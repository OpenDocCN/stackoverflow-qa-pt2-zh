# StackOverflow 问答 14304000-14304999

# android - SherlockListFragment 中的上下文操作模式：未选择项目，我无法选择多个项目

> ID：14304006
> 
> 赞同：0
> 
> 时间：2013-01-13T13:34:26.667
> 
> 标签：android, listview, android-actionbar, onlongclicklistener

我的问题是当我选择一个项目并且我释放该项目时未选择并且我第一次单击时没有选中元素。

代码：

```
public class SongsFragment extends SherlockListFragment implements
    LoaderManager.LoaderCallbacks<Cursor>, OnItemLongClickListener {

...

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    ...

    mMode = null;
    mListView = getListView();
    mListView.setItemsCanFocus(false);
    mListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    mListView.setOnItemLongClickListener(this);

}

...

@Override
public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
    Log.d(getClass().getSimpleName(), "longClick");

    SparseBooleanArray checked = mListView.getCheckedItemPositions();

    if(checked.size() == 0)
        Log.d(getClass().getSimpleName(), "checked size 0");

    boolean hasCheckedElement = false;
    for (int i = 0; i < checked.size() && !hasCheckedElement; i++) {
        Log.d(getClass().getSimpleName(), "For: " + Integer.toString(i));
        hasCheckedElement = checked.valueAt(i);
    }

    if (hasCheckedElement) {
        Log.d(getClass().getSimpleName(),"hasCheckedElement");
        if (mMode == null) {
            mMode = getSherlockActivity().startActionMode(
                    mActionModeCallback);
        }
    } else {
        Log.d(getClass().getSimpleName(),"!!!hasCheckedElement");
        if (mMode != null) {
            mMode.finish();
        }
    }

    return false;
}
...
} 
```

例如：点击一个项目，释放，点击同一个项目。这是输出：

```
SongsFragment(16560): longClick
SongsFragment(16560): checked size 0
SongsFragment(16560): !!!hasCheckedElement
SongsFragment(16560): longClick
SongsFragment(16560): For: 0
SongsFragment(16560): hasCheckedElement 
```

为什么第一次没有检查？为什么我发布时没有选择项目？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:22:15.827

我找到了本教程（西班牙语）：[http](http://androcode.es/2012/03/seleccion-individualmultiple-de-elementos-en-un-listview/) ://androcode.es/2012/03/seleccion-individualmultiple-de-elementos-en-un-listview/ 现在一切正常。

# objective-c - GNUSetup objective-c，找不到 libxml/tree.h' 文件未找到

> ID：14304009
> 
> 赞同：0
> 
> 时间：2013-01-13T13:35:23.383
> 
> 标签：objective-c, windows, gnustep

我试图在 Windows 的 GNUsetup 中使用 libxml2，使用带有 clang 的 Objective-C 编译。它不断给我错误：

```
$ make CC=clang 
This is gnustep-make 2.6.2\. Type 'make print-gnustep-make-help' for help.
Making all for tool sample_app...
 Compiling file HtmlParser.m ...
In file included from HtmlParser.m:1:
./HtmlParser.h:2:9: fatal error: 'libxml/tree.h' file not found
#import <libxml/tree.h>
        ^
1 error generated.
make[3]: *** [obj/sample_app.obj/HtmlParser.m.o] Error 1
make[2]: *** [internal-tool-all_] Error 2
make[1]: *** [sample_app.all.tool.variables] Error 2
make: *** [internal-all] Error 2 
```

文件确实存在于 :c:\GNUstep\include\libxml2\libxml\

这是我编译文件的 GNUsetup 文件

```
include $(GNUSTEP_MAKEFILES)/common.make

TOOL_NAME = sample_app

sample_app_HEADERS = HttpManager.h UT.h HtmlParser.h
sample_app_OBJC_FILES = main.m HttpManager.m UT.m HtmlParser.m
sample_app_RESOURCE_FILES =

include $(GNUSTEP_MAKEFILES)/tool.make 
```

这是我的包含 libxml2 标头的文件

```
#import <Foundation/Foundation.h>
#import <libxml/tree.h>
#import <libxml/parser.h>
#import <libxml/HTMLparser.h>
#import <libxml/xpath.h>
#import <libxml/xpathInternals.h>

@interface HtmlParser
{
    NSString* encoding;
}

-(id)init
{
    self = [super init];
    if(self) {
        encoding = @"UTF-8";
    }

    return self;

}

-(void)ExtractInnerSiteLinks:(NSString*) PageHtml:(NSString*) url;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:18:05.343

您可以尝试在 GNUmakefile 中添加更多标志，例如。

ADDITIONAL_INCLUDE_DIRS += c:\GNUstep\include\libxml2\ .. 我真的不知道如何在 Windows 上的 makefile 中指定路径..

可能是你会有链接问题，玩

ADDITIONAL_LIB_DIRS += -L*你的 dll 路径..*

ADDITIONAL_OBJC_LIBS += -lxml2

# php - 关于特定 URL 上的组织事件的 GitHub 通知？

> ID：14304015
> 
> 赞同：-2
> 
> 时间：2013-01-13T13:36:11.963
> 
> 标签：php, github, notifications, github-api

有没有办法在某个 URL 上获取有关 GitHub 组织事件的通知，而不是使用 cron 检查通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:51:33.827

不是原生的。GitHub [Notifications API](http://developer.github.com/v3/activity/notifications/)不提供在“推送”模型中处理通知的方法，因此您能做的最好的事情就是每隔一段时间使用 cron 拉取它们。

我也不知道有任何第三方服务会在每次从 GitHub 拉出新通知时通过点击自定义 URL 来自动完成推送通知的任务，即使制作这样的服务会比较容易。

# android - 浏览器中 GoogleMaps v2 的错误

> ID：14304019
> 
> 赞同：-1
> 
> 时间：2013-01-13T13:36:45.370
> 
> 标签：android, android-viewpager, android-maps, google-maps-api-2

我对视图页面中的地图 v2 有疑问。当我将地图 v2 用作普通应用程序（不在视图页面或类似的东西中）时，它的工作非常好。当我在视图页面中实现地图 v2 时，我突然想到了一些错误。首先，maptype 不是我在代码中设置的类型。我为类型设置：

**myMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);** .

但它显示的是正常类型（请看pepe 在他的线程顶部的[屏幕截图）。](https://stackoverflow.com/questions/13837697/viewpager-with-google-maps-api-v2-mysterious-black-view/14302360)第二件事是，我启用了指南针和 myLocationButton，但它也没有显示。

**myMap.getUiSettings().setCompassEnabled(true); myMap.getUiSettings().setMyLocationButtonEnabled(true);**

仅显示带有 ZoomControlsEnabled 按钮的地图。我该如何解决？有人有想法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:14:31.287

是的，我已经修好了。我在 fragmentactivtiy 中编写了所有方法。

```
public class MainActivity extends FragmentActivity implements LocationListener {
....

@Override
protected void onCreate(Bundle arg0) {
    // TODO Auto-generated method stub
    super.onCreate(arg0);
    setContentView(R.layout.main);

    myMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
    myMap.getUiSettings().setCompassEnabled(true); 
    myMap.getUiSettings().setMyLocationButtonEnabled(true);

}

......
......
}

public void onLocationChanged(Location location) {

if(location != null) {

        double latitude  = location.getLatitude();
        double longitude = location.getLongitude();

        LatLng latLng = new LatLng(latitude, longitude);

        mapFragment.myMap.moveCamera(CameraUpdateFactory.newLatLng(latLng));
        mapFragment.myMap.animateCamera(CameraUpdateFactory.zoomTo(17));

 }

public void onProviderDisabled(String arg0) {
// TODO Auto-generated method stub

}

public void onProviderEnabled(String arg0) {
// TODO Auto-generated method stub

}

public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
// TODO Auto-generated method stub

} 
```

这里是有用的教程： [tutorial1](http://android-er.blogspot.de/2012/12/a-simple-example-using-google-maps.html) , [tutorial2](http://wptrafficanalyzer.in/blog/google-maps-in-android-application-with-new-google-maps-android-api-v2-using-supportmapfragment/)

# xcode - UITextField - 发送到已释放实例“UIKBStringWideAttributeValueForKey:”的消息

> ID：14304024
> 
> 赞同：0
> 
> 时间：2013-01-13T13:38:07.780
> 
> 标签：xcode, ios6, uitextfield

启用僵尸对象后，当我尝试编辑 UITextField (textLvl) 时，我能够看到以下错误：

```
2013-01-13 13:27:10.509 testob[18418:907] *** -[NSConcreteMutableAttributedString
 _UIKBStringWideAttributeValueForKey:]: message sent to deallocated instance 0x2066a1f0 
```

我已经发布了导致以下问题的代码部分，它似乎特别是“textField.text = self.storeText;” 部分-当我对此发表评论时，问题就消失了。

您可能会说我不是最有经验的 iOS 开发人员，为什么我的 UITextView 在设置文本后会释放？请帮忙！

另外，我以前从未听说过“_UIKBStringWideAttributeValueForKey”——有什么想法吗？

谢谢大家！

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    NSLog(@"Text began editing");
 self.storeText = textField.text;
  textField.text = @"";

}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    if (textField == textLvl){

        if ([textField.text isEqualToString:@""]){
            textField.text = self.storeText;
            NSLog(@"No Text");
        }

        self.conv = [textField.text intValue];
        if (self.conv >= 101){
            textField.text = @"100";
            UIAlertView *successAlert = [[UIAlertView alloc] initWithTitle:@"Oh no!" message:@"Can't be higher than 100." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [successAlert show]; }
        }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:25:37.003

这可能是框架内部的错误。我建议您添加 -`(BOOL)textFieldShouldBeginEditing:(UITextField *)textField`并将文本字段文本设置为零，然后重置文本字段文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:34:42.420

我认为这里真正的答案是您正在处理已设置为处理 NSAttributedString 而不是 NSString 的 UITextField。您会注意到，如果您正在处理 .xib 中定义的 UITextField，它的顶级属性选项现在是“文本”，选项为普通或属性。

如果您的文本字段切换到属性，如果您继续处理文本字段，就好像它是普通的一样，您会发现此错误发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-15T11:38:02.787

我的文本字段在一个 xib 文件中，它的委托被连接到文件所有者。这导致我崩溃，因为文件的所有者是 NSObject。

我实际上想将代表连接到单元格，而不是文件所有者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T14:10:03.753

使用工具，以便查看保留/释放：

如果您需要查看对象使用工具的保留、释放和自动释放发生的位置：

在仪器中运行，在分配中设置“记录参考计数”（您必须停止记录才能设置选项）。使选择器运行，停止记录，在那里搜索 ivar (datePickerView)，向下钻取，您将能够看到所有保留、释放和自动释放发生的位置。

![](../Images/7838716286f7948b8b94a93abc6764ae.png)

# jbpm - Intalio vs JBPM

> ID：14304029
> 
> 赞同：-1
> 
> 时间：2013-01-13T13:39:08.513
> 
> 标签：jbpm, business-process-management

我们想开始在我们公司构建 BPM 项目（核心银行业务）。在搜索和比较了一些产品之后，我们决定在 Intalio 或 JBPM 之间进行选择。

现在，我们想知道这些产品的确切优点和缺点。我知道选择其中之一取决于我们的项目，但是我对这些解决方案的一般概述感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:19:21.727

Intalio BPMS 绝不是“零代码”，但它确实为构建复杂的人工任务和服务编排应用程序提供了*更*完整的包。

根据我的经验，jBPM 通常更专注于需要基于 Java 的嵌入式工作流解决方案的 Java 开发人员。尽管 jBPM 已经发展了很多，但它并没有提供相同级别的功能和开箱即用的支持。

例如，

*   Intalio 在其基于 Eclipse 的设计器中提供了 Tibco 通用接口 (GI) AJAX 表单的拖放式创作和集成，这使得 JavaScript 知识和 DOM 参考知识相当有限的人能够构建丰富的交互式表单。他们最新版本的 BPMS 在移动设备上提供了增强的渲染。

*   Intalio 在设计器中提供了一个易于使用的图形工具，能够轻松转换数据、创建消息、变量、条件等。

*   Intalio 提供了一个复杂的工作流套件，提供用户身份验证、任务管理、管理控制台、用户仪表板等。

*   Intalio 还将提供（收费）基于 BIRT 的集成报告工具、基于 Drools 的业务规则引擎、与 LifeRay、Alfresco 等的集成。

还值得牢记的是，Intalio 在 BPM、强大的管理团队和企业级支持基础设施（票务系统、电话支持等）方面拥有超过 10 年的经验。

全面披露：我经营一家 VAR 和系统集成商，提供 Intalio 咨询、培训等服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T08:42:09.313

我会推荐 Intalio 用于快速工作和日常变化活动，因为 Designer 比 jBPM 更友好和成熟。但是，如果有长期且高度客户特定的要求，而 bpmn 无法满足这些要求，我会推荐 jBPM，因为它对程序员来说是封闭的。我还根据需要考虑了 Intalio 和 jBPM 的集成，因为最终它是一个相互交谈的 Web 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T08:27:49.320

许可呢？你在寻找一个纯粹的开源项目吗？我想如果你在一家很重要的银行工作。那么，从长远来看，您是否计划将 BPM 解决方案与其他基础设施集成？您是否打算将引擎嵌入到现有应用程序中？优点和缺点取决于您要实现的目标以及您如何看待产品/项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-18T12:38:12.757

Intalio BPM 验证了转换方法，并帮助企业以简化的方式克服现实生活中的业务挑战。最好的开源 BPM 工具，通过低成本评估和与业务需求保持一致来降低引入新技术的风险。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-04T05:31:37.037

使用 BMPS 构建您的想法的可演示版本听起来很有趣。我会建议去 Intalio|BPMS。我们将相同的工具用于不同的相同目的，这是一种可配置的、可演示的产品，用于入职管理。它很快（经过几次打嗝）。我为您提供了一些提示，可以帮助您选择和开发：

1.  保持您的方法简单，使用现有的用户界面（它们是可定制的），使用简单的用户管理（intalio 提供基于文件和 LDAP），如果您的用户页面携带的数据量较少，请使用 Intalio 的默认表单保存方法。

2.  使用 tibco|GI 页面（默认功能）而不是在 JSP 中设计页面。用户 JS 和 Jquery 给出 WOW 因素。

3.  使用小流程，而不是使用一个长流程。在演示期间，您可以更改它们并在您的客户面前再次部署，它的影响是巨大的！

4.  INTALIO 社区和付费支持的大力支持。

免责声明：我从未使用过 JBPM。我是 Intalio 的忠实粉丝。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-26T18:45:56.883

我在 Intalio BPMS 方面的经验最为丰富，所以我可能有点偏颇。我认为 Intalio 与 JBPM 相比的主要优势在于它能够利用整个团队的工作，包括利益相关者和分析师。JBPM 功能强大，专注于开发人员可以使用，而 Intalio BPMS 可以被分析师用来捕获业务需求并根据业务需求布局流程。新的协作服务器功能甚至可以让未创建流程的利益相关者检查进度并发表评论。这减少了开发人员在实现业务需求时遇到的错误。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-04-09T03:42:20.850

鉴于您的短名单并且您在银行领域工作，如果您还没有考虑 Eclipse Stardust ( [http://www.eclipse.org/stardust/](http://www.eclipse.org/stardust/) ) ，我建议您也考虑一下。Stardust 对于开源世界来说相对较新，并且是 Eclipse 发布系列的一部分。它是 Eclipse 公共许可证 (EPL) 下成熟且全面的开源 BPMS，具有最终用户门户和 HTML5 流程建模器。它的商业版本在金融服务领域有数百个安装。

Ohloh 统计数据（@see [https://www.ohloh.net/p/eclipse-stardust](https://www.ohloh.net/p/eclipse-stardust)）：
- 39 位贡献者提交了 8,331 次提交，代表 2,538,774 行代码
- 大部分是用 Java 编写的，源代码注释的平均数量
- 年轻，但是由一个非常大的开发团队维护的已建立的代码库 - 估计需要 726 年的努力（COCOMO 模型）

在比较中，另请参阅[https://www.ohloh.net/p/jbpm](https://www.ohloh.net/p/jbpm) 不确定为什么 Intalio 没有统计信息。

# c# - 序列化字典（字符串，列表 ) 到 xml

> ID：14304034
> 
> 赞同：3
> 
> 时间：2013-01-13T13:39:32.493
> 
> 标签：c#, .net, xml, serialization

> **可能重复：**
> [将 Dictionary<string, string> 转换为 xml 的简单方法，反之亦然](https://stackoverflow.com/questions/1799767/easy-way-to-convert-a-dictionarystring-string-to-xml-and-visa-versa)

我有示例课程：

```
public class SampleClass
{
   public Dictionary<string, List<string>> SampleProperties {get;set;}
} 
```

我想将这个类序列化为 xml。我怎么能做到这一点？我想要类似于此示例的输出 xml：

```
<DataItem>
   <key>
      <value></value>
      <value></value>
      <value></value>
   </key>
</DataItem> 
```

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T13:46:42.520

您可以使用 Linq to Xml 从您的 SampleClass 对象创建所需的 xml：

```
SampleClass sample = new SampleClass();
sample.SampleProperties = new Dictionary<string, List<string>>() {
    { "Name", new List<string>() { "Greg", "Tom" } },
    { "City", new List<string>() { "London", "Warsaw" } }
};

var result = new XElement("DataItem", 
                 sample.SampleProperties.Select(kvp =>
                    new XElement(kvp.Key, 
                      kvp.Value.Select(value => new XElement("value", value)))));
result.Save(path_to_xml); 
```

输出：

```
<DataItem>
   <Name>
      <value>Greg</value>
      <value>Tom</value>
   </Name>
   <City>
      <value>London</value>
      <value>Warsaw</value>
   </City>
</DataItem> 
```

* * *

从 xml 反序列化：

```
SampleClass sample = new SampleClass();
sample.SampleProperties = XElement.Load(path_to_xml).Elements().ToDictionary(
                              e => e.Name.LocalName,
                              e => e.Elements().Select(v => (string)v).ToList()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:46:15.970

尝试以下代码片段

```
var dict = new Dictionary<string, List<string>>();
dict.Add("a1", new List<string>(){"a1","a2","a3"});

XElement root = new XElement("DataItem");

foreach(var item in dict)
{
  XElement element = new XElement("Key",item.Key);
  item.Value.ForEach (x => element.Add (new XElement("Value",x)));
  root.Add(element);
} 
```

# java - 冗长的 MouseListener 实现是否值得开销？

> ID：14304036
> 
> 赞同：1
> 
> 时间：2013-01-13T13:39:58.807
> 
> 标签：java, swing, awt, mouseevent, mouse-listeners

考虑下面的 MouseListener。我的问题是：具有此侦听器提供的额外功能**（其中一些您不需要**）是否值得拥有这些功能所带来的内存和处理开销？还是应该避免像这样的“冗长”实现？

```
import java.awt.Component;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.Timer;

/**
 * This is an overkill class that is useful for distinguishing between buttons and includes functions for hold and double-click events.
 *
 * @author Paranoid Android
 */
public class ParanoidMouseListener extends MouseAdapter {

    public static final int LEFT = MouseEvent.BUTTON1;
    public static final int MIDDLE = MouseEvent.BUTTON2;
    public static final int RIGHT = MouseEvent.BUTTON3;

    private DoubleClickTimer leftDouble = new DoubleClickTimer();
    private DoubleClickTimer middleDouble = new DoubleClickTimer();
    private DoubleClickTimer rightDouble = new DoubleClickTimer();

    private MouseEvent event;
    private int pressedButton;
    private Component pressed;
    private boolean dragging;

    /**
     * This method allows methods to ignore the MouseEvent when not needed.
     *
     * @return the latest mouse event.
     */
    public MouseEvent getEvent() {
        return event;
    }

    private HoldTimer leftHold = new HoldTimer() {

        @Override
        public void perform() {
            onLeftHold();
        }
    };
    private HoldTimer middleHold = new HoldTimer() {

        @Override
        public void perform() {
            onMiddleHold();
        }
    };
    private HoldTimer rightHold = new HoldTimer() {

        @Override
        public void perform() {
            onRightHold();
        }
    };

    @Override
    public final void mouseClicked(MouseEvent event) {
        this.event = event;
        switch (event.getButton()) {
            case LEFT:
                if (leftDouble.isRunning()) {
                    leftDouble.stop();
                    onLeftDoubleClick();
                } else {
                    leftDouble.start();
                    onPureLeftClick();
                }
                break;
            case MIDDLE:
                if (middleDouble.isRunning()) {
                    middleDouble.stop();
                    onMiddleDoubleClick();
                } else {
                    middleDouble.start();
                    onPureMiddleClick();
                }
                break;
            case RIGHT:
                if (rightDouble.isRunning()) {
                    rightDouble.stop();
                    onRightDoubleClick();
                } else {
                    rightDouble.start();
                    onPureRightClick();
                }
                break;
        }
    }

    @Override
    public final void mousePressed(MouseEvent event) {
        this.event = event;
        pressedButton = event.getButton();
        pressed = event.getComponent();
        switch (event.getButton()) {
            case LEFT:
                leftHold.start();
                onLeftPress();
                break;
            case MIDDLE:
                middleHold.start();
                onMiddlePress();
                break;
            case RIGHT:
                rightHold.start();
                onRightPress();
                break;
        }
    }

    @Override
    public final void mouseReleased(MouseEvent event) {
        this.event = event;
        pressedButton = -1;
        Component src = event.getComponent();
        boolean contains = src.contains(event.getPoint());
        switch (event.getButton()) {
            case LEFT:
                leftHold.stop();
                onLeftRelease();
                if (!dragging && src == pressed && contains) onLeftClick();
                break;
            case MIDDLE:
                middleHold.stop();
                onMiddleRelease();
                if (!dragging && src == pressed && contains) onMiddleClick();
                break;
            case RIGHT:
                rightHold.stop();
                onRightRelease();
                if (!dragging && src == pressed && contains) onRightClick();
                break;
        }
        dragging = false;
    }

    @Override
    public final void mouseMoved(MouseEvent event) {
        this.event = event;
        moved();
    }

    @Override
    public final void mouseDragged(MouseEvent event) {
        this.event = event;
        dragging = true;
        switch (pressedButton) {
            case LEFT:
                onLeftDrag();
                break;
            case MIDDLE:
                onMiddleDrag();
                break;
            case RIGHT:
                onRightDrag();
                break;
        }
    }

    @Override
    public final void mouseEntered(MouseEvent event) {
        this.event = event;
        entered();
    }

    @Override
    public final void mouseExited(MouseEvent event) {
        this.event = event;
        exited();
    }

    private int getDoubleClickInterval() {
        String property = "awt.multiClickInterval";
        return (int) Toolkit.getDefaultToolkit().getDesktopProperty(property);
    }

    private class DoubleClickTimer extends Timer {

        public DoubleClickTimer() {
            super(getDoubleClickInterval(), null);
            this.setRepeats(false);
        }
    }

    public int getHoldInitialDelay() {
        return 300;
    }

    public int getHoldQueueDelay() {
        return 60;
    }

    private class HoldTimer extends Timer {

        public HoldTimer() {
            super(getHoldQueueDelay(), null);

            this.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    perform();
                }
            });
            this.setInitialDelay(getHoldInitialDelay());
        }

        public void perform() {
        }
    }

    public void moved() {
    }

    public void entered() {
    }

    public void exited() {
    }

    public void onLeftHold() {
    }

    public void onMiddleHold() {
    }

    public void onRightHold() {
    }

    public void onLeftClick() {
    }

    public void onMiddleClick() {
    }

    public void onRightClick() {
    }

    public void onPureLeftClick() {
    }

    public void onPureMiddleClick() {
    }

    public void onPureRightClick() {
    }

    public void onLeftDoubleClick() {
    }

    public void onMiddleDoubleClick() {
    }

    public void onRightDoubleClick() {
    }

    public void onLeftPress() {
    }

    public void onMiddlePress() {
    }

    public void onRightPress() {
    }

    public void onLeftRelease() {
    }

    public void onMiddleRelease() {
    }

    public void onRightRelease() {
    }

    public void onLeftDrag() {
    }

    public void onMiddleDrag() {
    }

    public void onRightDrag() {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:05:19.133

正如充满鳗鱼的气垫船在评论中指出的那样，这是《[你不需要它》](http://c2.com/cgi/wiki?YouArentGonnaNeedIt)的经典案例。在您清楚地知道谁将使用它以及何时使用它之前实施功能通常是禁忌。在这种情况下，考虑到您在评论中概述的用例，您有几个选择：

*   在任何地方使用这个类并接受稍高的开销。您可能不太关心性能影响，这可能非常小。但是，这确实在您的其余代码中引入了对该类的更大依赖，这意味着如果您在以后引入回归，您就有破坏大量相关系统的风险。

*   允许类的消费者指出他们将使用哪些功能（例如，双击）并禁用消费者不想要的功能。这会给您的类带来复杂性，并使其更容易出错，并且使测试更加困难（尽管几乎不可能）。如果类之间迫切需要一致性，这可能是一种选择。

*   当需要添加功能时使用此类，并在`MouseAdapter`其他地方使用普通类。这可能是您最好的选择，特别是如果您的自定义类中没有明确定义某些行为案例。这减少了对您的类的依赖，并在内部也简化了类。权衡是消费者类之间如何处理鼠标交互的一致性较低，并且为了实现消费者类的代码稍微多一些`MouseAdapter`- 通常是值得的权衡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:47:12.467

如果您需要这些附加功能，别无选择！如果您不需要这些功能，那么使用这个扩展的侦听器类是没有意义的，再次别无选择！

请注意，一些成员字段和一些额外的代码，与 Java VM 的其余部分和其他代码相比，它几乎没有开销......所以任何选择：这并不重要！

再说一遍：选择你需要的！

# android - 无法通过android中的意图插入日历事件

> ID：14304040
> 
> 赞同：1
> 
> 时间：2013-01-13T13:40:20.000
> 
> 标签：android, google-calendar-api

我在 HTC(v2.3.3) 中收到此错误并在 Galaxy s3(v4.1) 中工作

```
Intent intent = new Intent(Intent.ACTION_EDIT)
            .setData(Uri.parse(EventUtils.EVENT_URI))
            .putExtra(Event.EXTRA_EVENT_BEGIN_TIME,
                    beginTime.getTimeInMillis())
            .putExtra(Event.EXTRA_EVENT_END_TIME, endTime.getTimeInMillis())
            .putExtra(
                    Event.TITLE,
                    Utils.getPref(getApplicationContext(),
                            Constant.PREF_EVENT_TAG,
                            Constant.CONST_EVENT_TAG)
                            + "Meeting")
            .putExtra(Event.DESCRIPTION, "important meeting")
            .putExtra(Event.AVAILABILITY, Events.AVAILABILITY_BUSY);
    // .putExtra(Event.EVENT_LOCATION, "The gym")
    // .putExtra(Intent.EXTRA_EMAIL,
    // "rowan@example.com,trevor@example.com");

    if (calID != -1) {
        intent.putExtra(Event.CALENDAR_ID, calID);
    }

    startActivity(intent); 
```

例外

```
01-13 18:58:59.417: E/AndroidRuntime(31730): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.EDIT dat=content://com.android.calendar/events (has extras) } 
```

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:50:36.110

你在 HTC 上的 Android 版本是什么？-- 我认为日历缩进是从 Android 4 开始才出现的。

**编辑：**

您使用什么以及什么[如何在 Android 中设置提醒？](https://stackoverflow.com/questions/5976098/how-to-set-a-reminder-in-android/5976386#5976386)使用，是一种添加日历事件的非官方方式，这取决于各种 Android 实现和设备是否有效。

从 Android 4（API 级别 14）开始，有一种官方方法可以使用[CalendarProvider](http://developer.android.com/guide/topics/providers/calendar-provider.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:47:01.740

很可能您为您的意图设置了错误的数据...在 Intent.setData() 方法中检查您的 Uri 参数...。

此外，您应该使用 try/catch 将其包围，因为某些禁用/卸载日历应用程序的用户在启动该意图时可能会强制关闭

# iphone - 按钮文本未显示且 xcode 崩溃

> ID：14304048
> 
> 赞同：3
> 
> 时间：2013-01-13T13:41:43.677
> 
> 标签：iphone, ios, objective-c, xcode, button

我刚开始学习IOS开发。我花了几天时间试图解决这个问题，但我一无所获。希望有人可以提供帮助。

我正在为 iPhone 开发一个计算器应用程序（只是为了练习）。我创建了一个按钮网格，但是当我开始创建最后一行时，xCode 在我创建或移动每个按钮后不断崩溃。我最终创建了布局，但是当我运行应用程序时，底行（在 IOS 模拟器或我的 iPhone 上）的任何按钮都没有显示按钮文本：

```
 +----+ +----+ +----+ +----+ +----+
             | 7  | | 8  | | 9  | | +  | | -  |
             |    | |    | |    | |    | |    |
             +----+ +----+ +----+ +----+ +----+

             +----+ +----+ +----+ +----+ +----+
             | 4  | | 5  | | 6  | | /  | | *  |
             |    | |    | |    | |    | |    |
             +----+ +----+ +----+ +----+ +----+

             +----+ +----+ +----+ +----+ +----+
             | 1  | | 2  | | 3  | |    | | AC |
             |    | |    | |    | |    | |    |
             +----+ +----+ +----+ |    | +----+
                                  | =  |
             +----+ +----+ +----+ |    | +----+
             |    | |    | |    | |    | |    |
             |    | |    | |    | |    | |    |
             +----+ +----+ +----+ +----+ +----+ 
```

如果我将按钮从底行一一移动到顶行，文本会显示在它们上面，但仍然不在底行：

```
 +----+ +----+        +----+
                    | .  | | +- |        | C  |
                    |    | |    |        |    |
                    +----+ +----+        +----+

             +----+ +----+ +----+ +----+ +----+
             | 7  | | 8  | | 9  | | +  | | -  |
             |    | |    | |    | |    | |    |
             +----+ +----+ +----+ +----+ +----+

             +----+ +----+ +----+ +----+ +----+
             | 4  | | 5  | | 6  | | /  | | *  |
             |    | |    | |    | |    | |    |
             +----+ +----+ +----+ +----+ +----+

             +----+ +----+ +----+ +----+ +----+
             | 1  | | 2  | | 3  | |    | | AC |
             |    | |    | |    | |    | |    |
             +----+ +----+ +----+ |    | +----+
                                  | =  |
             +----+               |    |
             |    |               |    |
             |    |               |    |
             +----+               +----+ 
```

然后，当我将最后一个按钮移到顶部时，新的底行停止显示文本：

```
 +----+ +----+ +----+        +----+
             | 0  | | .  | | +- |        | C  |
             |    | |    | |    |        |    |
             +----+ +----+ +----+        +----+

             +----+ +----+ +----+ +----+ +----+
             | 7  | | 8  | | 9  | | +  | | -  |
             |    | |    | |    | |    | |    |
             +----+ +----+ +----+ +----+ +----+

             +----+ +----+ +----+ +----+ +----+
             | 4  | | 5  | | 6  | | /  | | *  |
             |    | |    | |    | |    | |    |
             +----+ +----+ +----+ +----+ +----+

             +----+ +----+ +----+ +----+ +----+
             | 1  | | 2  | | 3  | |    | | AC |
             |    | |    | |    | |    | |    |
             +----+ +----+ +----+ |    | +----+
                                  |    |
                                  |    |
                                  |    |
                                  |    |
                                  +----+ 
```

然后我向上移动等号按钮，新的底行无法显示文本：

```
 |    |
                                  |    |
             +----+ +----+ +----+ | =  | +----+
             | 0  | | .  | | +- | |    | | C  |
             |    | |    | |    | |    | |    |
             +----+ +----+ +----+ +----+ +----+

             +----+ +----+ +----+ +----+ +----+
             | 7  | | 8  | | 9  | | +  | | -  |
             |    | |    | |    | |    | |    |
             +----+ +----+ +----+ +----+ +----+

             +----+ +----+ +----+ +----+ +----+
             | 4  | | 5  | | 6  | | /  | | *  |
             |    | |    | |    | |    | |    |
             +----+ +----+ +----+ +----+ +----+

             +----+ +----+ +----+        +----+
             |    | |    | |    |        |    |
             |    | |    | |    |        |    |
             +----+ +----+ +----+        +----+ 
```

这真是令人沮丧！我又开始在一个新的应用程序中得到同样的东西，总是没有显示的最低对齐行。如果我切换到 3.5" 视图，问题仍然存在。我尝试将按钮进一步间隔开，尝试更改所有文本参数，更改视图以禁用自动调整子视图并将模式从比例更改为适合，但这仍在发生.我找不到任何其他描述这个问题的帖子，这看起来很奇怪，因为它很容易重新创建。请帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T15:51:56.513

我建议仅在非常特殊的情况下使用 iOS 6 的新自动布局选项。我已经非常深入地测试了这个选项并发现了很多错误，例如：

*   在控制台中出现指示苹果错误的消息
*   它大大减慢了你的用户界面
*   而布局约束突然消失
*   该应用程序有时会因未记录的错误消息而崩溃

使用自动布局目前非常令人沮丧。我没有使用自动布局，而是使用

```
- (void)viewDidLayoutSubviews {} 
```

以编程方式调整我的 UI，这更容易和更快（在开发和运行时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:57:26.483

您需要取消单击“Interface Builder Document”下的“Use Autolayout”切换。我遇到了同样的问题，禁用它后，按钮中的文本正确显示。

显示实用程序/文件检查器/界面生成器/使用自动布局

据我所知，这是iOS 6.1的一个新“功能”

# css - CSS3 媒体查询当前页面大小

> ID：14304049
> 
> 赞同：0
> 
> 时间：2013-01-13T13:41:57.423
> 
> 标签：css, media-queries

使用 Google Chrome 浏览器，确定页面大小的最简单方法是什么，因此您可以编写适当的 css3 媒体查询。

目前，我会慢慢调整浏览器的大小，以发现任何可以使用 css3 媒体查询来改善日益压缩的界面的区域，但需要一种方法来了解应该使用查询的大小。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-13T13:48:27.267

啊，我找到了一个好方法。在 Google Chrome 检查器中，转到控制台选项卡并输入以下内容：

`document.body.offsetWidth`

这将打印出当前页面宽度:)

# javascript - 在预制的 javascript 中正确调用函数

> ID：14304050
> 
> 赞同：0
> 
> 时间：2013-01-13T13:42:10.727
> 
> 标签：javascript

我得到了这个 HTML 代码：

```
<head>
<link href="default.css" title="default" rel="stylesheet" type="text/css" />
<link href="theme1.css" title="theme1" rel="stylesheet" type="text/css" />
<link href="theme2.css" title="theme2" rel="stylesheet" type="text/css" />
<link href="theme3.css" title="theme3" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="javascript.js"></script>
</head>

<body>

<ul id="dropdown">
  <li> Choose theme
    <ul> 
      <li id="stylesheet1" > <a href="#"> Default </a></li>
      <li id="stylesheet2" > <a href="#"> Theme 1 </a></li>
      <li id="stylesheet3" > <a href="#"> Theme 2 </a></li>
      <li id="stylesheet4" > <a href="#"> Theme 3 </a></li>
   </ul>
 </li> 
</ul>

</body> 
```

我得到这是单独文件 javascript.js 中的代码：

```
function setActiveStyleSheet(title) {
  var i, a, main;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title")) {
      a.disabled = true;
      if(a.getAttribute("title") == title) a.disabled = false;
    }
  }
}

function getActiveStyleSheet() {
  var i, a;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title") && !a.disabled) return a.getAttribute("title");
  }
  return null;
}

function getPreferredStyleSheet() {
  var i, a;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1
       && a.getAttribute("rel").indexOf("alt") == -1
       && a.getAttribute("title")
       ) return a.getAttribute("title");
  }
  return null;
}

function createCookie(name,value,days) {
  if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
  }
  else expires = "";
  document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
  var nameEQ = name + "=";
  var ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
  }
  return null;
}

window.onload = function(e) {
  var cookie = readCookie("style");
  var title = cookie ? cookie : getPreferredStyleSheet();
  setActiveStyleSheet(title);
}

window.onunload = function(e) {
  var title = getActiveStyleSheet();
  createCookie("style", title, 365);
}

var cookie = readCookie("style");
var title = cookie ? cookie : getPreferredStyleSheet();
setActiveStyleSheet(title);

// Last part

function initate()
{
var style1 = document.getElementById("stylesheet1");
var style2 = document.getElementById("stylesheet2");
var style3 = document.getElementById("stylesheet3");
var style4 = document.getElementById("stylesheet4");

style1.onclick = function () { 
    setActiveStyleSheet("default"); 
    return false;
    };
style2.onclick = function () { 
    setActiveStyleSheet("theme1"); 
    return false;
    };
style3.onclick = function () { 
    setActiveStyleSheet("theme2");
    return false
    };
style4.onclick = function () { 
    setActiveStyleSheet("theme3"); 
    return false
    };            
}

window.onload = initate; 
```

我是 javascripts 的新手，我自己还没有编写这个脚本（http://www.alistapart.com/articles/alternate/），我自己设法创建了最后一部分（如代码中的注释所示）根据需要在 javascript 文件中将事件处理程序分开，这部分可以让样式表按照我想要的方式进行更改。但我不知道如何让 cookie 也能正常工作以保存我正在使用的主题。

编辑：

由于我是新手，我仍然很难弄清楚这段代码，但我尝试更改最后一个函数`initiate`并使用 onClick 事件处理程序来保存 cookie，但我无法让它工作。我用过这个：

```
style1.onclick = function () {
    createcookie(T1, style, 7);
} 
```

和

```
document.getElementById("stylesheet1").onclick(createCookie(T1, style, 7)); 
```

当我这样做时，样式表的更改不再起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:27:43.730

这有效：

```
style1.onclick = function () {
    createcookie(T1, style, 7);
} 
```

因为你所做的就是将`onclick`处理程序设置为一个函数。您不在那里调用该函数，您只是将其放弃，以便其他人（浏览器）可以调用它。

这不起作用：

```
document.getElementById("stylesheet1").onclick(createCookie(T1, style, 7)); 
```

因为你在那里调用函数。你要做的是：

1.  `createCookie`使用 3 个参数调用
2.  `onclick`使用来自的返回值调用`createCookie`

你想要的可能是这样的：

```
document.getElementById("stylesheet1").onclick = function() {
    createCookie(T1, style, 7);
}; 
```

它的作用是创建一个*匿名函数*并将此函数设置`onclick`为元素的属性。这个匿名函数在调用时会调用该`createCookie`函数。

您需要这样做的原因是因为您有 to 的参数`createCookie`，并且这些参数必须绑定到某个地方，直到调用该函数。

# c# - 如何减少以及如何清除内存泄漏？

> ID：14304051
> 
> 赞同：2
> 
> 时间：2013-01-13T13:42:11.197
> 
> 标签：c#, winforms, memory-leaks, datagridview, dataset

我正在从数据库中读取`Datagridview`大约 25000 条记录。在此阅读过程中，应用程序处于“无响应”模式，我可以看到它的进程内存越来越大，并停止在 2500-3800 MB 左右。在我关闭包含 的表单后`Datagridview`，内存保持在这个大小。

我的问题是：

1.  读取大量数据时如何避免“无响应”？
2.  当我从数据库中读取数据时，如何减少使用的内存量（我认为我做错了什么，因为它有很多内存）
3.  关闭表单后如何清除所有内存？我正在尽我所能处理一切，但似乎 GC 仍然没有释放内存。我读到一些关于未处理的事件处理程序的内容？

从数据库读取到的代码`Datagridview`：

```
delegate void SetSearchCallback();
public void Search()
{
    sqlCommand="";
    if (this._dbReports.InvokeRequired)
    {
        SetSearchCallback d = new SetSearchCallback(Search);
        this.Invoke(d, new object[] { });
    }
    else
    {
            DateTime startDate = new DateTime(dateTimePicker1.Value.Year, dateTimePicker1.Value.Month, dateTimePicker1.Value.Day);
            DateTime endDate = new DateTime(dateTimePicker2.Value.Year, dateTimePicker2.Value.Month, dateTimePicker2.Value.Day);
            sqlCommand = "select * FROM cstPackages where _dateTime >= '" + String.Format("{0:yyyy-MM-dd}", startDate) + "' and _dateTime <='" + String.Format("{0:yyyy-MM-dd} 23:59:59.999", endDate) + "' order by _dateTime desc"; //reading the db from end to start   
    }

        if (sqlCommand != "")
        {
            using (SqlConnection sCon2 = new SqlConnection("Data Source=" + SettingsForm.getAddress + ";Initial Catalog=" + SettingsForm.getDatabase + ";Integrated Security=False;User Id=" + SettingsForm.getUser + ";Password=" + SettingsForm.getPassword + ";Connect Timeout=5;"))
            {
                try
                {
                    sCon2.Open();
                    using (da = new SqlDataAdapter(sqlCommand, sCon2))
                    {
                        dsReport.Clear();
                        da.Fill(dsReport, "cstPackages");
                        dbBind = new BindingSource(dsReport, "cstPackages");
                        if (firstTime == 0)
                            _dbReports.Columns.Clear();

                        _dbReports.DataSource = dbBind;

                        if (firstTime == 0)
                        {
                            updateDataGridSettings();
                            firstTime = 1;
                        }

                        _dbReports.Refresh();
                        sCon2.Close();
                        sCon2.Dispose();
                    }
                }
                catch (Exception c)
                {
                    fn.errorHandler(c.Message, SettingsForm);
                }
            }
        }
    }
} 
```

当我关闭表格时：（`btnPress=1`仅当我填写了`Datagridview`一些东西时）

```
private void Reports_FormClosing(object sender, FormClosingEventArgs e)
{
    _dbReports.Dispose();
    if (btnPress == 1)
    {
        dsReport.Dispose();
        da.Dispose();
        dbBind.Dispose();
    }
} 
```

在表格关闭后的父表格中，我打电话给`ReportForm.Dispose();`

我知道这`Dispose`不会清除内存，但它应该有助于 GC 完成它的工作，对吧？

昨晚我让应用程序打开了一夜（关闭后`ReportForm`），早上的内存是一样的（GC没有工作）

先谢谢了。

**编辑：** 当我得到 3GB 内存泄漏时，我的数据库有大约 500 万条记录（我没有注意到，因为我有一个脚本正在填充我的数据库，我忘了停止它）

现在内存泄漏更容易接受了，它比我将记录添加到 DataGridView 之前大约多 10 MB。仍然..即使我使用虚拟模式并尝试关闭/处置所有可能的东西，每次填充内存都会增长约 10 MB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:12:39.497

> 1）当我读取大量数据时，如何避免“无响应”？

通过在单独的线程上执行这项昂贵的任务。在 WinForms 中，[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)它非常有用，因为它会在作业完成后自动编组对主 UI 线程的调用。

> 2）如何减少从数据库读取时使用的内存量（我认为我做错了什么，因为它有很多内存）

您可以尝试启用[`Virtual Mode`](http://www.codeproject.com/Articles/23937/Paging-Data-with-DataGridView-in-VirtualMode)并开始对数据进行分页。一次加载 25000 条记录是没有用的。无论如何，用户将永远无法立即使用它们。

> 3) 关闭表单后如何清除所有内存？我正在尽我所能处理一切，但似乎 GC 仍然没有释放内存。我读到一些关于未处理的事件处理程序的内容？

关闭表单后，垃圾收集器将负责处理所有资源。只要确保你从不存储对它的任何引用，以便它符合 GC 的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-19T20:02:04.593

我不小心实例化了一个表单而没有打开它......并且没有处理它。它引起了非常相似的症状。他们所说的确实是真的：不要自己调用垃圾收集器。你还有其他问题。你需要处理你创造的东西。我不得不通过我的代码并找到其他几个类似的问题。多么阴险的问题。

# c++ - 桥接非托管类和托管类

> ID：14304053
> 
> 赞同：1
> 
> 时间：2013-01-13T13:42:35.470
> 
> 标签：c++, clr, unmanaged, managed

我有一个导出到 Win32 Dll 的本机 C++ 类：

```
class __declspec(dllexport) Manager { ... } 
```

Dll 创建成功。让我们称之为`Unmanaged.dll`。

我想在.Net 应用程序中使用这个类。因此，我决定创建托管 C++ 包装类。所以我创建了一个新的 CLR 类库，在其中设置`Unmanaged.dll`为链接器的输入。

编译托管 dll 时出现以下错误：

> 致命错误 LNK1107：文件无效或损坏：无法在 0x318 读取。（项目ManagedBridge中的Unmanaged.dll）

这两个项目都设置为编译为 x64。DLL 导出查看器显示类的构造函数和方法。所以DLL似乎很好。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:21:33.037

您不能将 DLL 传递给链接器，它不知道如何处理它。DLL 通常不适合帮助链接器确定 DLL 是否包含您调用的函数。从 DLL 导出可以是多个名称。它是一个数字（“序数”）是一个问题，链接器将不知道如何将数字映射到标识符名称。并且名称也不必匹配，名称通常会简化，并删除名称装饰。

您必须改为告诉链接器有关 DLL 的导入库的信息。其中包含更多信息，包括名称映射的序数和编译器使用的原始修饰名称。导入库是链接 DLL 时创建的 .lib。您将在 DLL 项目的构建目录中找到它。将其路径添加到链接器的 Additional Dependencies 设置。

# java - 如何使用随机访问文件将数据保存在文本文件中并更新这些数据？

> ID：14304057
> 
> 赞同：2
> 
> 时间：2013-01-13T13:43:02.523
> 
> 标签：java, file-io, randomaccessfile

我很困惑如何保存我的数据，例如我有（学生 ID，姓名，姓氏）唯一的学生 ID 是整数，我想在按下（添加按钮）时将这些数据保存到文本文件，然后我想更新这些当我按下（更新按钮）时数据，数据被保存，但每次保存的数据出现在文件中时，我都使用向量数组，当按下（更新按钮）时，数据不会返回到我的 TextField 进行更新.

```
 class BtnListenerAdd implements ActionListener{
      public void actionPerformed(ActionEvent a) {

        if (a.getSource()==btnAdd){
            Student s=new Student(tfname.getText(),tfsurname.getText());
            s.number=Integer.parseInt(tfno.getText());
            myVector.add(s);
               //System.out.println(s);

            try{
                java.io.RandomAccessFile raf =
                               new java.io.RandomAccessFile("e:\\random.txt", "rw");

                    for (int i = 0; i < myVector.size(); i++) {
                      raf.writeChars(myVector.toString());
                    }

                    raf.seek(0);
                    while (raf.getFilePointer() < raf.length()) {
                      System.out.println(raf.readChar());
                    }

                raf.close();
            }catch(Exception e){
                System.out.println( e.toString() );
            }
        }

        if (a.getSource()==btnList){
            ta1.setText("");
            for (Student s : myVector) {
                ta1.append(s.toString()+ "\n"); 
            }
        }           
        }

     }

  class BtnListenerUpdate implements ActionListener{

    public void actionPerformed(ActionEvent s) {

        if (s.getSource()==btnUpdate){
            Student l=new Student(tfname.getText(),tfsurname.getText());
            l.number=Integer.parseInt(tfno.getText());
            myVector.add(l);

            try{
                java.io.RandomAccessFile raf = 
                              new java.io.RandomAccessFile("e:\\random.txt", "rw");

                for(int i=0; i <myVector.size(); i++) {
                    raf.writeChar(myVector.size());
                }

                raf.seek(0);
               int no= raf.readInt();
               tfno.setText(no +  "");
               System.out.println(no);

               String nam = "";
                for(int x=0; x<50; x++){
                    nam += raf.readChar();
                }

                nam = "";
                for(int x=0; x<50; x++){
                    nam += raf.readChar();
                }

            }catch(Exception e){
                System.out.println( e.toString() );
            }
        }

    }

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:12:49.190

如果您不创建或更新那么多记录，我建议您使用[BufferedWriter 。](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedWriter.html)如果你是，我建议你使用像[Mongo](http://www.mongodb.org/)或[MySQL这样的数据库](http://www.mysql.com/)

而且，您可能还想开始使用 UTF-8 数据测试您的代码。变音符号之类的。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:25:01.050

我建议您在编写更多代码之前编写少量您理解的代码。你写的代码越多，你就越难修复它。

我将再次开始编写另一个类，您可以从可以编写的最简单的代码开始对它进行单元测试，当它工作时添加更多内容并对其进行测试。

不幸的是，您编写的某些代码只是胡说八道，这就是为什么我不会重用其中任何代码的原因。

# c++ - 带有 flex/bison 的多行注释声明

> ID：14304063
> 
> 赞同：1
> 
> 时间：2013-01-13T13:43:14.550
> 
> 标签：c++, comments, bison, interpreted-language

今天我的 flex/bison 脚本有问题。它没有检测到多行注释。

```
%x COMMENT_MULTI
#\[                     yy_push_state(COMMENT_MULTI);

<COMMENT_MULTI>"]#"     yy_pop_state();
<COMMENT_MULTI>"\n"     {
                            yylloc->lines(yyleng);
                            yylloc->step();
                        }
<COMMENT_MULTI>.? 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-16T08:08:35.040

这是我最终在 C++ 注释和块注释的野牛定义中使用的解决方案：

```
%x COMMENT

"//".*\n                            ;                                                                                                                                                                 

"/*"                                BEGIN(COMMENT);                                                                                                                                                   
<COMMENT>"/*"                       printf("%s%d\n", "Warning: multiple comments opened at line: ", yylineno);                                                                                        
<COMMENT>"*/"                       BEGIN(INITIAL);                                                                                                                                                   
<COMMENT>"EOF"                      yyerror("Reached end of file while scanning comment");                                                                                                            
<COMMENT>.|"\n"                     ; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-04-07T00:53:08.193

```
/*DECLARING A SPECIFIC STATE FOR THE BLOCK COMMENT*/
%x BLOCK_COMMENT 
%%

\/\* { // BEGINING OF A BLOCK COMMENT: ENTERS INTO 'BLOCK_COMMENT' STATE
    BEGIN(BLOCK_COMMENT);
    blockcomment_line_start = line;
    blockcomment_col_start = frcol;
    strncat(block_comment, yytext, sizeof(block_comment));
    }
<BLOCK_COMMENT>\*\/    {   // END OF BLOCK COMMENT
    if(strlen(block_comment)+strlen(yytext) >= BLOCK_COMMENT_BUFFER-10){ //ADDS "(...)" AT THE END OF THE STRING IN CASE IT HAS BEEN TRUNCATED
        block_comment[1013] = '\0';
        strcat(block_comment," (...) ");
    }
    strncat(block_comment, yytext, sizeof(block_comment));
    printf("@(%.3d,%.3d)\tBLOCK COMMENT\t- %s\n", blockcomment_line_start, blockcomment_col_start, block_comment);

    BEGIN(INITIAL); //COMES BACK TO THE INITIAL STATE
    }
<BLOCK_COMMENT>\n {
    line++; // STILL HAS TO INCREMENT THE LINE NUMBER WHEN THERE'S A LINE BREAK INSIDE THE COMMENT
    //strcat(block_comment, "\\n");
    strncat(block_comment, "\\n", sizeof(block_comment));
}   
<BLOCK_COMMENT>. { // IGNORE ALL OTHER CHARACTERS WHILE IN 'BLOCK_COMMENT' STATE 
    //strcat(block_comment, yytext);
    strncat(block_comment, yytext, sizeof(block_comment));
}   
<BLOCK_COMMENT><<EOF>> {    
    printf("ERROR! THE BLOCK COMMENT OPENED IN  @(%d,%d) HASN'T BEEN CLOSED! \t\n", blockcomment_line_start, blockcomment_col_start);
    return;
} 
```

# java - 如何在 Java 中线程安全地向线程发出信号以暂停

> ID：14304074
> 
> 赞同：3
> 
> 时间：2013-01-13T13:44:27.607
> 
> 标签：java, multithreading, synchronization

我有一堆线程同时运行。有时一个线程需要通知其他线程等待它完成一个工作并再次发出信号让它们恢复。由于我对 Java 的同步有点陌生，我想知道做这种事情的正确方法是什么。我的代码是这样的：

```
private void Concurrent() {
    if (shouldRun()) {
        // notify threads to pause and wait for them
        DoJob();
        // resume threads
    }

    // Normal job...
} 
```

## 更新：

请注意，我编写的代码在一个类中，每个线程都将执行该类。我无权访问这些线程或它们的运行方式。我只是在线程内。

## 更新 2：

我的代码来自爬虫类。爬虫类（crawler4j）知道如何处理并发。我唯一需要的是在运行一个函数之前暂停其他爬虫，然后再恢复它们。这段代码是我的爬虫的基础：

```
 public class TestCrawler extends WebCrawler {
    private SingleThread()
    {
        //When this function is running, no other crawler should do anything
    }

    @Override
    public void visit(Page page) {
        if(SomeCriteria())
        {
            //make all other crawlers stop until I finish
            SingleThread();
            //let them resume
        }

        //Normal Stuff
    }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:11:49.510

这是一个简短的示例，说明如何使用很酷的 java 并发东西来实现这一点：

*使用 Pause 类剪断*旧代码不再重要。

编辑：

这是新的测试类：

```
package de.hotware.test;

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class Test {

    private Pause mPause;

    public Test() {
        this.mPause = new Pause();
    }

    public void concurrent() throws InterruptedException {
        while(true) {
            this.mPause.probe();
            System.out.println("concurrent");
            Thread.sleep(100);
        }
    }

    public void crucial() throws InterruptedException {
        int i = 0;
        while (true) {
            if (i++ % 2 == 0) {
                this.mPause.pause(true);
                System.out.println("crucial: exclusive execution");
                this.mPause.pause(false);
            } else {
                System.out.println("crucial: normal execution");
                Thread.sleep(1000);
            }
        }
    }

    public static void main(String[] args) {
        final Test test = new Test();
        Runnable run = new Runnable() {

            @Override
            public void run() {
                try {
                    test.concurrent();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        };
        Runnable cruc = new Runnable() {

            @Override
            public void run() {
                try {
                    test.crucial();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        };
        ExecutorService serv = Executors.newCachedThreadPool();
        serv.execute(run);
        serv.execute(run);
        serv.execute(cruc);
    }

} 
```

和实用程序暂停类：

```
package de.hotware.test;

import java.util.concurrent.atomic.AtomicBoolean;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

/**
 * Utility class to pause and unpause threads
 * with Java Concurrency
 * @author Martin Braun
 */
public class Pause {

    private Lock mLock;
    private Condition mCondition;
    private AtomicBoolean mAwait;

    public Pause() {
        this.mLock = new ReentrantLock();
        this.mCondition = this.mLock.newCondition();
        this.mAwait = new AtomicBoolean(false);
    }

    /**
     * waits until the threads until this.mAwait is set to true
     * @throws InterruptedException
     */
    public void probe() throws InterruptedException {
        while(this.mAwait.get()) {
            this.mLock.lock();
            try {
                this.mCondition.await();
            } finally {
                this.mLock.unlock();
            }
        }
    }

    /**
     * pauses or unpauses
     */
    public void pause(boolean pValue) {
        if(!pValue){
            this.mLock.lock();
            try {
                this.mCondition.signalAll();
            } finally {
                this.mLock.unlock();
            }
        }
        this.mAwait.set(pValue);
    }

} 
```

基本用法是在每次运行之前调用 probe()。如果在调用 pause(false) 之前暂停，这将阻塞。

您的课程将如下所示：

```
public class TestCrawler extends WebCrawler {

private Pause mPause;

public TestCrawler(Pause pPause) {
    this.mPause = pPause;
}

private SingleThread()
{
        //When this function is running, no other crawler should do anything
}

@Override
public void visit(Page page) {
    if(SomeCriteria())
    {
        //only enter the crucial part once if it has to be exclusive
        this.mPause.probe();
        //make all other crawlers stop until I finish
        this.mPause.pause(true);
        SingleThread();
        //let them resume
        this.mPause.pause(false);
    }
    this.mPause.probe();
    //Normal Stuff
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:52:23.783

```
public class StockMonitor extends Thread {

    private boolean suspend = false; 
    private volatile Thread thread;

    public StockMonitor() {
        thread = this;
    }

    // Use name with underscore, in order to avoid naming crashing with
    // Thread's.
    private synchronized void _wait() throws InterruptedException {
        while (suspend) {
            wait();
        }
    }

    // Use name with underscore, in order to avoid naming crashing with
    // Thread's.
    public synchronized void _resume() {
        suspend = false;
        notify();
    }

    // Use name with underscore, in order to avoid naming crashing with
    // Thread's.
    public synchronized void _suspend() {
        suspend = true;
    }  

     public void _stop() { 
        thread = null;
        // Wake up from sleep.
        interrupt();     
     }

     @Override
     public void run() {
        final Thread thisThread = Thread.currentThread();
        while (thisThread == thread) {
            _wait();
            // Do whatever you want right here.
        }
     }
} 
```

调用`_resume`and`_suspend`将使您能够恢复和暂停`Thread`. `_stop`会让你优雅地停止线程。请注意，一旦停止`Thread`，就无法再次恢复它。`Thread`不再可用。

该代码是从一个真实世界的开源项目中挑选出来的：http: [//jstock.hg.sourceforge.net/hgweb/jstock/jstock/file/b17c0fbfe37c/src/org/yccheok/jstock/engine/RealTimeStockMonitor.java#l247](http://jstock.hg.sourceforge.net/hgweb/jstock/jstock/file/b17c0fbfe37c/src/org/yccheok/jstock/engine/RealTimeStockMonitor.java#l247)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T13:49:28.683

您可以使用 wait() 和 notify()

线程等待：

```
 // define mutex as field
  Object mutex = new Object();

   // later:
   synchronized(mutex) {
        wait();
   } 
```

通知线程继续

```
 synchronized (mutex) {
        notify();
   } 
```

# c# - Winform BindingNavigator 未将项目保存到数据库

> ID：14304079
> 
> 赞同：0
> 
> 时间：2013-01-13T13:44:59.517
> 
> 标签：c#, winforms, entity-framework

我设计了一个使用 ADO.Net Entity Framework 绑定到我的数据库的 WinForm。加载时，我的详细信息表单中填充了数据库中的数据。

我可以浏览这些项目，但是我不能添加、保存或更新项目。

以下是我的表单的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication3
{
    public partial class Form1 : Form
    {

    cpdEntities dbcontext;
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        dbcontext = new cpdEntities();
        cpd_recipientsBindingSource.DataSource = dbcontext.cpd_recipients.ToList();
    }

    private void cpd_recipientsBindingNavigatorSaveItem_Click(object sender, EventArgs e)
    {
        dbcontext = new cpdEntities();
        dbcontext.SaveChanges();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:23:38.107

看起来您在每个事件中都重新实例化了 DbContext 类。从您的 saveItem 事件中删除重新实例化 DbContext 并再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:43:37.833

这是一个使用的简单示例`EntityFramework 4`

如何加载：

```
 using (var con = new cpdEntities())
 {
    cpd_recipientsBindingSource.DataSource = con.cpd_recipients.ToList();
 } 
```

如何插入和更新：

```
 if (cpd_recipientsBindingSource.Current == null) return;
        using (var con = new cpdEntities())
        {

            var p = new Customer()
            {
                CustomerId = ((cpd_recipients)cpd_recipientsBindingSource.Current).Id,
                CustomerIdNo = IdNoTextBox.Text,
                CustomerName = CustomerNameTextBox.Text
            };

            var cus = new Customer();
            if (p.CustomerId > 0)
                cus = con.Customers.First(c => c.CustomerId == p.CustomerId);
            cus.CustomerId = p.CustomerId;
            cus.CustomerIdNo = p.CustomerIdNo;
            cus.CustomerName = p.CustomerName;

            if (p.CustomerId == 0)
                con.Customers.AddObject(cus);
            con.SaveChanges();
            int i = cus.CustomerId;//SCOPE_IDENTITY
        }
    } 
```

# python - has_no_attribute 错误 python

> ID：14304081
> 
> 赞同：1
> 
> 时间：2013-01-13T13:45:28.667
> 
> 标签：python, serialization

我正在尝试通过网络发送序列化对象，直到今天，它工作得很好。

现在我有一个错误：

```
@staticmethod                   
def processkeys(self):
    '''
    This method has to be static as it is used as a tarked for a Thread.
    All it does by now is receive a mouseAndKeyWrapperobject from the client and 
    set this instances object to it.
    '''
    logging.getLogger(__name__).warning("keys processed")
    print("here")
    sock = self.sock
    Id = self.id
    from modules.logic import game
    self.myPlayer  = game.get_player()
    while True:
        try:
            myMakw = sock.recv(4096)
            self.makw = loads(myMakw)
            self.movePlayers(self.makw)
        except:
            logging.getLogger("nothing from Client")

        self.wrap.addPlayer(self.myPlayer)
        wrapToSend = dumps(self.wrap, 2)

        sock.sendall(wrapToSend) 
```

工作正常，直到最后一行之前：转储产生以下错误消息：

```
 wrapToSend = dumps(self.wrap, 2)
AttributeError: 'module' object has no attribute 'py_decode_TypedWritable_from_bam_stream' 
```

我以前用这种方法序列化和反序列化对象，甚至是自己编写的对象，但从来没有得到过这样的东西。甚至谷歌似乎也不知道那个特定的错误消息（零命中）。

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:21:08.917

使用`classmethod`or`staticmethod`装饰器时，您不应该有`self`参数。现在的问题是 this 在什么上下文中被调用以及 this`self`实际指的是什么——毕竟，Python 并没有对名为`self`. 我有一种感觉，你也在混淆类属性和实例属性，这就是为什么这之前没有失败，但如果没有一些实际的示例代码，这很难说。

# javascript - 获取推送通知的 appid - 电话间隙 (android)

> ID：14304082
> 
> 赞同：0
> 
> 时间：2013-01-13T13:45:39.607
> 
> 标签：javascript, android, html, cordova, push-notification

```
pushNotification.registerDevice({ projectid: "xxxx", appid: "?" },
    function (status) {
        var pushToken = status;
        console.warn('push token: ' + pushToken);
    },
    function (status) {
        console.warn(JSON.stringify(['failed to register ', status]));
    }
); 
```

什么地方放个问号（如何获取appid）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:57:20.413

appid = 此站点的应用程序代码**[pushwoosh](http://www.pushwoosh.com/)**

唱歌到这个网站并创建新应用程序，获取应用程序代码！:]

# xcode - MonoTouch 中未生成 UIViewController 类

> ID：14304084
> 
> 赞同：1
> 
> 时间：2013-01-13T13:45:48.963
> 
> 标签：xcode, xamarin.ios, storyboard, monodevelop, uicollectionview

我试图在 Storyboard 中创建一个集合视图控制器。添加它并将其重命名为 MyCollectionViewController 后，我返回到 Monotouch。没有创建名为 MyCollectionViewController 的类（就像它与 TableVieController 一起使用 iE。我是 Mono 和 iOS 开发的新手。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:40:46.973

你没有做错什么。这是/曾经是我为 MonoDevelop 3.1.1 修复的 MonoDevelop 中的一个错误。

如果您进入“MonoDevelop”菜单并选择“检查更新”，应该会弹出一个对话框。

如果您没有将 MonoDevelop 3.1.1 视为可用更新，请尝试将更新通道更改为“Beta”而不是“Stable”（对话框的左上角）。

MonoDevelop 3.1.1 应该很快就会进入稳定频道。

# boolean - 布尔代数简化

> ID：14304088
> 
> 赞同：-1
> 
> 时间：2013-01-13T13:45:59.157
> 
> 标签：boolean, algebra

我正在为星期四的考试做一份过去的论文，我在布尔代数方面有点挣扎。一个问题要求我简化：

```
[(X + Y).(X + 'Y)] 
```

我可以简化大部分。我明白了

```
[X(1 + 'Y + Y)] 
```

标记方案说这等于`[X]`。

但我不太明白为什么——我猜是因为

```
['Y + Y] 
```

但是我们没有使用'+'符号来添加它们，那为什么会这样呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T14:06:45.363

从 开始`X * (1 + 'Y + Y)`，请注意，`'Y + Y == 1`对于 any`Y`因为`Y`是`1`或者`'Y`是，所以`Y + 'Y`是`1 + 0`or `0 + 1`，在这两种情况下都等于`1`。

这将使函数等效于`X * (1 + 1)`，但我们也知道`1 + 1 == 1`(true OR true 为 true) 和`X * 1 == X`( `X`AND true is `X`)，所以最后你只剩下`X`。

参考：[布尔代数定律](http://www.ee.surrey.ac.uk/Projects/Labview/boolalgebra/index.html)，也在方便的[2 页 PDF](http://www.nayuki.io/res/boolean-algebra-laws/boolean-algebra-laws.pdf)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T14:07:29.497

```
['Y + Y] 
```

> X + X' = 1 现在想象在一个值和它的相反值之间选择一个。由于我们指的是布尔逻辑，因此唯一的选项将是 0 或 1。现在看看 0 和它的相反值（即 1）之间的 OR 运算的输出是什么。或者看看 1 OR 0 会产生什么。两者都产生 1，这意味着一个值与其负数（相反）之间的 OR 运算的输出为 1。

[http://www.buzzle.com/articles/boolean-algebra-rules.html](http://www.buzzle.com/articles/boolean-algebra-rules.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T14:17:58.743

在布尔代数中，如果`A = 1, A' = 0`和`A = true, A' = false`。此外，每个 AND 操作都是 (.)，每个 or 操作都是 (+)。

让我简化表达式：

```
(X+Y)(X+'Y)
= XX + XY' + YX + YY'
= X + XY' + YX + 0 // since X.X = X & Y.Y'= 0
= X + XY' + XY // = X(1 + 'Y + Y)
= X + X(Y+Y') 
= X + X(1) // Y+Y' = 1
= X + X 
= X 
```

# python - 在python中转义<

> ID：14304089
> 
> 赞同：-4
> 
> 时间：2013-01-13T13:46:09.383
> 
> 标签：python, python-2.x

我正在尝试在 python 中制作一个小脚本。我想做的脚本是打印一个html语句，所以我尝试了：

```
print "\<option value\"1\"\> zzz \ </ option \> 
```

" 很好，但`" <"` and `"> "`不是。

简而言之，我的问题是如何逃避`>`and `<`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:48:33.613

Python 字符串可以`"<>"`愉快地包含，无需转义。

```
>>> "<"
'<' 
```

唯一需要转义的字符是你用来包围字符串的引号样式——这样 Python 就可以告诉你不要在此处结束字符串。一般来说，可以通过使用其他类型的引号来避免这种情况，因此不需要转义（包含两种引号类型的字符串明显例外），例如：

```
>>> print('<option value="1">zzz</option>')
<option value="1">zzz</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:52:27.193

你的问题不是很清楚。

如果您只想输出`>`or `<`，则无需转义它们，因为它们不会在 Python 字符串中进行解释。

另一方面，如果您想将符号解析和输出为 html 实体，我建议您查看更完整的内容，例如： [http ://docs.python.org/2/library/htmlparser.html](http://docs.python.org/2/library/htmlparser.html)

手工做只会让你头疼，而且你肯定会错过几个案例。

# iphone - ARC下紧密循环中UIKit的内存管理

> ID：14304090
> 
> 赞同：2
> 
> 时间：2013-01-13T13:46:11.630
> 
> 标签：iphone, ios, objective-c, cocoa-touch, automatic-ref-counting

我有兴趣了解更多关于如何在使用 ARC 的紧密循环下最好地处理内存管理的信息。特别是，我有一个我正在编写的应用程序，它有一个`while`循环运行了很长时间，我注意到尽管在 ARC 中实现了（我相信是）最佳实践，但堆仍然存在无限成长。

为了说明我遇到的问题，我首先将以下测试设置为故意失败：

```
while (true) {         
    NSMutableArray *array = [NSMutableArray arrayWithObject:@"Foo"];
    [array addObject:@"bar"]; // do something with it to prevent compiler optimisations from skipping over it entirely
} 
```

运行此代码并使用分配工具进行分析表明内存使用量无休止地增加。但是，将其包装`@autoreleasepool`如下，可以立即解决问题并保持内存使用良好且低：

```
while (true) {
    @autoreleasepool {         
        NSMutableArray *array = [NSMutableArray arrayWithObject:@"Foo"];
        [array addObject:@"bar"];
    }
} 
```

完美的！这一切似乎都运行良好——甚至对于使用`[[... alloc] init]`. 一切正常，直到我开始涉及任何`UIKit`课程。

例如，让我们创建一个`UIButton`并看看会发生什么：

```
while (true) {
    @autoreleasepool {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        button.frame = CGRectZero;
    }
} 
```

现在，内存使用量无限增加——实际上，似乎`@autoreleasepool`没有任何效果。

所以问题是**为什么`@autoreleasepool`对 和 保持内存正常工作`NSMutableArray`，但是当应用于 a 时`UIButton`，堆继续增长？**

`UIKit`最重要的是，当在这样的无限循环中使用类时，如何防止堆无限扩展，这告诉我们关于 ARC`while(true)`或`while(keepRunningForALongTime)`样式循环的最佳实践是什么？

我对此的直觉是（我可能完全错了）可能是关于如何`while (true)`保持运行循环不循环，这将`UIKit`实例保存在内存中而不是释放它们......但显然我错过了一些东西我对ARC的理解！

（并且为了消除一个明显的原因，`NSZombiedEnabled`没有启用。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T18:05:47.850

至于为什么 UI* 对象会无限增长？内部实现细节。最有可能的是，您通过阻塞主运行循环来有效地禁用某种缓存或运行循环交互。

这让我得到了真正的答案：

> 最重要的是，当在这样的无限循环中使用 UIKit 类时，如何防止堆无限扩展，这告诉我们在 while(true) 或 while(keepRunningForALongTime) 样式循环中 ARC 的最佳实践是什么？

如何解决？ **永远不要在主线程上使用紧密循环，**也**不要阻塞主运行循环**。

即使您要弄清楚并解决 UI* 引起的堆增长，如果您要`while(...)`在主线程上使用循环，您的程序仍然无法运行。iOS 应用程序和 Cocoa 应用程序的整个设计是主线程有一个主运行循环，并且主运行循环必须可以自由运行。

如果不？您的应用程序不会响应用户输入（最终会被系统杀死），并且您的绘图代码不太可能按预期工作（因为运行循环会合并脏区域并与主线程一起按需绘制它们，经常卸载到辅助线程）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:00:54.383

我在这里推测，但是，它可以归结为 UI 相关对象特别倾向于使用 GCD 或类似对象（例如 performSelectorOnMainThread:...）以确保在主线程上发生一些操作。正如您所怀疑的那样 - 排队的块或其他执行单元维护对实例的引用，等待它在运行循环中执行的时间，并且永远不会得到它。

通常，阻止运行循环是不好的。曾几何时，它曾经是相对常见的——拖动跟踪通常以这种方式完成（或者有效地这样做，通过在拖动进行时仅在特殊模式下运行 runloop）。但这会导致奇怪的交互甚至死锁，因为很多代码的设计都没有考虑到这种可能性——尤其是在异步为王的 GCD 世界中。

请记住，如果您愿意，可以在 while 循环中显式运行 runloop，虽然这与让它自然运行并不完全相同，但它通常可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:02:45.213

是的，我对此做了更多的思考，以及**bbum**和**Wade Tegaskis**关于阻塞 runloop 的巨大贡献，并意识到缓解此类问题的方法是让 runloop 循环，通过使用`performSelector:withObject:afterDelay:`which 让runloop continue，同时安排循环在将来继续。

例如，回到我原来的例子，`UIButton`现在应该重写为这样的方法：-

```
- (void)spawnButton {
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectZero;
    [self performSelector:@selector(spawnButton) withObject:nil afterDelay:0];
} 
```

这样，该方法立即结束并`button`在超出范围时正确释放，但在最后一行，`spawnButton`指示runloop`spawnButton`在0秒内再次运行（即尽快），这反过来又指示runloop运行。 ..等等等等，你明白了。

然后，您需要做的就是`[self spawnButton]`在代码中的其他地方调用以使循环继续进行。

这也可以使用 GCD 类似地解决，下面的代码基本上做同样的事情：

```
- (void)spawnButton {
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectZero;
    dispatch_async(dispatch_get_main_queue(), ^{
        [self spawnButton];
    });
} 
```

这里唯一的区别是方法调用是使用 GCD （异步）分派到主队列（主运行循环）上的。

在 Instruments 中对其进行分析，我现在可以看到，尽管整体分配内存在增加，但活动内存仍然很低并且是静态的，这表明 runloop 正在循环，并且旧`UIButton`的 s 正在被释放。

通过考虑这样的运行循环，并使用`performSelector:withObject:afterDelay:`或 GCD，实际上还有许多其他实例（不仅仅是 UIKit），这种方法可以防止由运行循环锁定引起的意外“内存泄漏”（我在引用中使用它，因为在在这种情况下，我是一个 UIKit 流氓.. 但在其他情况下，这种技术很有用。）

# java - 餐饮哲学家线程和信号量

> ID：14304095
> 
> 赞同：-1
> 
> 时间：2013-01-13T13:47:13.047
> 
> 标签：java, multithreading, semaphore, dining-philosopher

我制作了一个包含 5 个表和叉子的简单 GUI，并试图可视化这个著名的问题，但我无法完全实现。我没有得到我的代码的卡点，如果有人建议我解决这个问题，任何帮助将不胜感激并提前感谢！额外说明：还有一个错误，我猜这与我的数组创建想法有关，我有一个错误为 java.lang.ArrayIndexOutOfBoundsException: 5。

```
public class Philosopher implements Runnable {

    private static Table table;
    private int ID;
    private int N = 5;
    private static Semaphore s1 = new Semaphore(1) ;
    private static Semaphore[] sarray = new Semaphore[5];
    private int[] array = new int[5];
    private int thinking = 0;
    private int hungry = 1;
    private int eating = 2;
    private int left = (ID + N - 1) % N;
    private int right = (ID + 1) % N;

    void test(int i)
    {
        if((array[i] == hungry) && (array[left] != eating) && (array[right] != eating))
        {
            table.ForkTake_GUI(i);
            array[i] = eating;
            sarray[i].release();

        }   
    }

    void take_forks(int i)
    {
        try {
            s1.acquire();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        array[i] = hungry;
        table.Hungry_GUI(i);
        test(i);
        s1.release();
        table.Eating_GUI(i);
        sarray[i].release();
    }

    void put_forks(int i)
    {
        table.StopEating_GUI(i);
        try {
            s1.acquire();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        array[i] = thinking;
        test(left);
        test(right);
        table.ForkPut_GUI(i);
        s1.release();

    }

    public Philosopher(int i)
    {
        setID(i);
    }

    public void run()
    {
        while(true)
        {
            Random RandomGenerator = new Random();
            int randomNum = RandomGenerator.nextInt(10);
            try {
                Thread.sleep((randomNum * 1000));
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            take_forks(ID);
            //table.Eating_GUI();
            put_forks(ID);      
        }

    }

    public static void main(String args[]) {

        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    table = new Table();
                    table.frame.setVisible(true);
                }
                catch(Exception e){
                    e.printStackTrace();
                }

            }
        });

        Philosopher p1 = new Philosopher(1);
        Philosopher p2 = new Philosopher(2);
        Philosopher p3 = new Philosopher(3);
        Philosopher p4 = new Philosopher(4);
        Philosopher p5 = new Philosopher(5);
        Thread pt1 = new Thread(p1);
        Thread pt2 = new Thread(p2);
        Thread pt3 = new Thread(p3);
        Thread pt4 = new Thread(p4);
        Thread pt5 = new Thread(p5);

        sarray[0] = new Semaphore(1);
        sarray[1] = new Semaphore(1);
        sarray[2] = new Semaphore(1);
        sarray[3] = new Semaphore(1);
        sarray[4] = new Semaphore(1);

        pt1.start();
        pt2.start();
        pt3.start();
        pt4.start();
        pt5.start();

    }
    public int getID() {
        return ID;
    }
    public void setID(int iD) {
        ID = iD;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:47:20.820

看看你从哪里获得互斥锁`sarray`- 关键是你没有，所以至少那里有冗余代码。

进一步说明：

*   您定义了 N，但全部使用了幻数 5。
*   您似乎有一个“中央”互斥锁，每个分叉都有一个。使用中央互斥体已经解决了最初的问题。
*   考虑将每个互斥体及其保护的数据放入一个聚合中。这将清楚地表明，五个互斥锁是针对五个分叉的，而不是针对五个哲学家的，或者？
*   您的越界显然是由 1-base 和 0-based 索引之间的转换引起的。会不会是左右计算后改变ID造成的？一般来说，我不会将这些存储为成员。另外，请注意，您拥有的价值观是针对哲学家的，而不是针对叉子的！画一幅画，这将帮助你做对！

# asp.net - asp .net 一个控件的多个验证器

> ID：14304097
> 
> 赞同：3
> 
> 时间：2013-01-13T13:47:45.190
> 
> 标签：asp.net, validation

我正在开发asp.net 网站。我在页面上有一个来自并有文本框。我`Validators`用来验证字段。我使用了两个验证器来验证我的电话号码字段。一个检查**长度**，另一个检查**所有输入的值都是数字**

我的问题是：对于与上述两个条件不匹配的无效输入，机器人会显示错误消息。

我想一次只显示 1 条错误消息。这可能吗？请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:53:20.277

“ValidationSummary 服务器控件适用于页面上的所有验证服务器控件。它会将其他验证控件发送回页面的所有错误消息都放在页面上的一个位置（您指定的位置）。这些错误消息可以显示在列表、项目符号列表或段落中。”

使用 ValidationSummary 控件。

编辑：现在我明白了你想要什么，你需要自定义验证器控件。看这个例子：

[http://asp.net-tutorials.com/validation/custom-validator/](http://asp.net-tutorials.com/validation/custom-validator/)

在那里，您将了解 IsValid 属性，它可以让您确定输入表达式何时实际有效。几个 if-else 将完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:20:32.030

最后我设法解决了我的问题。使用**CSS**

**我就是这样做的**

在样式表中编写了一个新的 css 类（.errorMsg）来处理错误消息的显示样式。

将该 css 类分配给每个验证器。

现在，无效输入的多个错误消息重叠。

为了解决这个问题，我为错误消息`<span>` 标签分配了背景颜色。（背景颜色与表单 BbColor 相同）。

所以现在重叠的消息没有显示。现在只显示最上面的错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-13T14:21:05.723

我认为您只需要一个验证器，因为您可以通过设置文本框控件的 maxlength 属性来限制输入字符的长度。即您只需要一个正则表达式验证器来验证数字。但是如果您仍然需要包含两个验证器并显示一个消息，您可以编写 javascript 进行验证。

# c++ - C ++从对象传递映射

> ID：14304103
> 
> 赞同：0
> 
> 时间：2013-01-13T13:48:37.950
> 
> 标签：c++

我正在构建一个简单的程序来“边走边学”，该程序需要几个文本文件并对其进行处理，第一个文本文件的每一行都是关于一个人的信息，并且每一行都有一个对象（学生类型（见下文））被创建并添加到向量中。在 Student 对象中是一个存储学生标记的地图。我在学生类中有一个函数，它在调用时返回地图（或者至少这就是我想要做的）。目前这个功能是：

```
marksType Student::printMarks(){
    return marks;
} 
```

（其中`marksType = std::map<string, float>`）和`marks`是类型的地图`marksType`。

然后在我的主要功能中，我有：

```
Student a = *qw;
studmarks = a.printMarks();
for (std::map<string, float>::iterator iter = studmarks.begin(); iter != studmarks.end(); iter++){
    cout << "TEST" << endl;
} 
```

其中 qw 是指向学生对象的指针，而 studmarks 是类型`map<string, float>`

问题是 cout 没有被调用，所以迭代器似乎跳过（但学生对象确实在标记映射中有项目）。

这是完整的学生课程

```
#include "Student.h"
using namespace std;
typedef std::map<string, float> marksType;

Student::Student(const string &name, int regNo) : Person(name){
    marksType marks;
    this->regNo = regNo;
}

int Student::getRegNo() const{
    return regNo;
}
void Student::addMark(const string& module, float mark){
    pair<marksType::iterator,bool> check;
    check = marks.insert (pair<string,float>(module,mark));
    if (check.second==false){
        marks[module]=mark;
    }
}
float Student::getMark(const string &module) const throw (NoMarkException){
    if (marks.find(module) != marks.end()){
        return marks.find(module)->second;
    }
    else throw NoMarkException();
}
float Student::getAverageMark() const throw (NoMarkException){
    if (!marks.empty()){
        float avgmark = 0;
        for (marksType::const_iterator avgit=marks.begin(); avgit!=marks.end(); ++avgit){
            avgmark = avgmark + avgit->second;
        }
        avgmark = avgmark/marks.size();
        return avgmark;
    }
    else throw NoMarkException();
}
marksType Student::printMarks(){
    return marks;
} 
```

哦，下面是给学生加分的主要功能部分，

```
for (vector<Student>::iterator it = students.begin(); it != students.end(); ++it){
    Student b = *it;
    if (regno == b.getRegNo()){
        found = true;
        b.addMark(module, mark);
    }
} 
```

我知道这很有效，因为当我使用 getMark 函数时它确实有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:28:36.127

您正在为存储在 vector 中的学生副本“添加标记” `students`。这些副本中的每一个仅在循环的一次迭代中存在，结果是您根本没有修改向量的元素：

```
for (vector<Student>::iterator it = students.begin(); it != students.end(); ++it){
    Student b = *it; // b IS A COPY
    if (regno == b.getRegNo()){
        found = true;
        b.addMark(module, mark); // modify local copy of Student
    }
} 
```

要将它们添加到向量的元素中，请使用

```
for (vector<Student>::iterator it = students.begin(); it != students.end(); ++it){
    if (regno == it->getRegNo()){
        found = true;
        it->addMark(module, mark);
    }
} 
```

# c - 计算两个日期之间的闰日

> ID：14304108
> 
> 赞同：1
> 
> 时间：2013-01-13T13:49:08.650
> 
> 标签：c, time, datediff

我已经写下了这段代码，我的程序目标是计算两个给定日期和时间之间的分钟数。让我们说一下之间的分钟差异：

```
14/1/2016 23:18
and
14/1/2004 23:18
is:
6,311,520.00 minutes 
```

这是我写的代码：

我在计算中有一些错误，我发现我的问题与正确答案最多相差 1440 分钟 - 由 excel 检查。我认为我的问题在于计算两个日期之间的 LEAP DAYS：

```
 #include <stdio.h>

    typedef struct {
        int year;
        int month;
        int day;
        int hour;
        int minute;
        int second;     
    }time;
    time time1,time2;

long calcTime(time,time);
int calcDaysFromStart(int,int);
int leapcheck(int);

int main()
{

    printf("Hello\n");
    printf("For calculating the difference between two times:\n");
    printf("Enter the date for first time:\n");
    printf("Enter day:\n");
    scanf("%d",&time1.day);
    printf("Enter month:\n");
    scanf("%d",&time1.month);
    printf("Enter year:\n");
    scanf("%d",&time1.year);
    printf("Enter the exact hour for first time:\n");
    printf("Enter the hour:\n");
    scanf("%d",&time1.hour);
    printf("Enter the minutes:\n");
    scanf("%d",&time1.minute);
    printf("Enter the seconds:\n");
    scanf("%d",&time1.second);
    printf("-----------------------------------\n");
    printf("Enter the date for second time:\n");
    printf("Enter day:\n");
    scanf("%d",&time2.day);
    printf("Enter month:\n");
    scanf("%d",&time2.month);
    printf("Enter year:\n");
    scanf("%d",&time2.year);
    printf("Enter the exact hour for first time:\n");
    printf("Enter the hour:\n");
    scanf("%d",&time2.hour);
    printf("Enter the minutes:\n");
    scanf("%d",&time2.minute);
    printf("Enter the seconds:\n");
    scanf("%d",&time2.second);
    printf("-----------------------------------\n");
    printf("-----------------------------------\n");
    printf("The first time is: %d:%d:%d %d/%d/%d\n", time1.hour ,time1.minute ,time1.second ,time1.day, time1.month ,time1.year);
    printf("The second time is: %d:%d:%d %d/%d/%d\n", time2.hour ,time2.minute ,time2.second ,time2.day, time2.month ,time2.year);
    printf("The Difference between the two times in minutes is:%ld\n", calcTime(time1,time2));
    return 1;   
}

long calcTime(time time1,time time2)
{
    long t1,t2,totalDiff;
    long yearDiffeInMinutes = 0;
    int leapt1, leapt2,leapAdd;
    leapt1 = leapcheck(time1.year);
    leapt2 = leapcheck(time2.year);
    int daysFromStartt1, daysFromStartt2;
    daysFromStartt1 = calcDaysFromStart(time1.month,leapt1);
    daysFromStartt2 = calcDaysFromStart(time2.month,leapt2);
    t1 = time1.minute+time1.hour*60+time1.day*1440+daysFromStartt1*1440;
    t2 = time2.minute+time2.hour*60+time2.day*1440+daysFromStartt2*1440;

    if (time1.year>time2.year)
    {
        leapAdd = (time1.year-time2.year)/4;
        if ((leapt1==1) && (time1.month<3))
            leapAdd--;
        if((leapt2==1) && (time2.month>2))
            leapAdd--;
        printf("THE PARAM leapApp IS:%d\n",leapAdd);
        yearDiffeInMinutes = ((time1.year-time2.year)*525600+leapAdd*1440);
        totalDiff = yearDiffeInMinutes+(t1-t2);
        printf("The first time is bigger\n");
        return totalDiff;
    }
    else if(time2.year>time1.year)
    {
        leapAdd = (time2.year-time1.year)/4;
        if ((leapt2==1) && (time2.month<3))
            leapAdd--;
        if((leapt1==1) && (time1.month>2))
            leapAdd--;
        yearDiffeInMinutes = ((time2.year-time1.year)*525600+leapAdd*1440);
        totalDiff = yearDiffeInMinutes+(t2-t1);
        printf("The second time is bigger\n");
        return totalDiff; 
    }
    else if(t1>t2)/**both times are in the same year**/
    {
        printf("The first time is bigger\n");
        if ((leapt1==1) && (time1.month>2))
            if(time2.month<2)
                return (t1-t2+1440);
        return(t1-t2);
    }
    else if(t2>t1)
    {
        printf("The second time is bigger\n");
        if ((leapt2==1) && (time2.month>2))
            if(time1.month<2)
                return (t2-t1+1440);
        return (t2-t1);
    }
    else
    {
        printf("Both times are equals\n");
        return 0;
    }
}

/**check if the year is leap, return 0 if not a leap and 1 if a leap**/
int leapcheck(int year)
{
    if(year%400==0 || (year%100!=0 && year%4==0))
    {
        printf("THE YEAR %d IS LEAP\n",year);
        return 1;
    }
    printf("THE YEAR %d is NOT LEAP\n",year);
    return 0;
}

/**clalculate how many days past from start ofthe year**/
int calcDaysFromStart(int month, int leap)
{
    if (month==1)
        return 0;
    else if (month==2)
        return 31;
    else if (month==3)
        return (59+leap);
    else if (month==4)
        return (90+leap);
    else if (month==5)
        return (120+leap);
    else if (month==6)
        return (151+leap);
    else if (month==7)
        return (181+leap);
    else if (month==8)
        return (212+leap);
    else if (month==9)
        return (243+leap);
    else if (month==10)
        return (273+leap);
    else if (month==11)
        return (304+leap);
    else if (month==12)
        return (334+leap);
    else return -1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T14:25:06.177

计算

```
leapAdd = (time1.year-time2.year)/4; 
```

是错的。2003 年和 2005 年之间有闰年，但这会忽略它。此外，13 年的跨度可以包括三到四个闰年，而不会达到世纪复杂度。

正确的代码是

```
leapAdd = time1.year/4 - time2.year/4      // how many Caesarian leap years
        - time1.year/100 + time2.year/100  // Centuries
        + time1.year/400 - time2.year/400; // last correction. 
```

（交换角色 if `time2.year > time1.year`）。

还，

```
t1 = time1.minute+time1.hour*60+time1.day*1440+daysFromStartt1*1440; 
```

多算。每月的第一天，没有完整的一天要添加，所以应该是

```
(time1.day-1)*1440 
```

同样`(time1.hour-1)*60`，迂腐地，也适用于会议记录。但是，由于超额计数是恒定的，因此不会影响时间差的计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T14:23:44.167

有一个标准库函数可以做到这一点。

```
time_t seconds_begin, seconds_end;
struct tm breakdown;

breakdown.tm_year = 2004 - 1900;
breakdown.tm_mon = 0; /* january */
breakdown.tm_mday = 14;
breakdown.tm_hour = 23;
breakdown.tm_min = 18;

seconds_begin = mktime( & breakdown );

breakdown.tm_year = 2016 - 1900;

seconds_end = mktime( & breakdown );

printf( "%.2f minutes", (seconds_end - seconds_begin) / 60\. ); 
```

[https://ideone.com/D8djMo](https://ideone.com/D8djMo)

> 6311520.00 分钟

在 Unix 系统上，我认为这比 Excel 更可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T14:16:04.933

`if`您的示例的快速解决方法是在and中添加以下行`else`：

```
if(leapt1==1 && leapt2==1)
    leapAdd++; 
```

但是这个代码会在更大的时间间隔内失败（包括 100 年和 400 年的闰例外）。所以，我建议你重写这部分代码；例如，您可以遍历间隔中的每一年，并检查它是否跳跃或共同，使用您的特殊外壳作为间隔的开始和结束）。

# macos - 在 Mac 上的 VirtualBox 中的 Windows VM 上使用 dnsmasq (+ MAMP)

> ID：14304111
> 
> 赞同：4
> 
> 时间：2013-01-13T13:49:33.727
> 
> 标签：macos, dns, mamp, virtualbox, dnsmasq

我在 Mac（OS X 10.7）上使用 dnsmasq 来促进本地开发（以及 MAMP），只需这个非常简单的配置：

[dnsmasq.conf]
地址=/dev/127.0.0.1

..非常简单。我所有的 *.dev 域都解析为 127.0.0.1 (localhost)。和...一起：

[DNS 服务器]
127.0.0.1
8.8.8.8
8.8.8.4

..作为我 Mac 的 DNS 设置，这是一种享受。

但后来我也有一个在 VirtualBox（最新）中运行的漂亮的 Windows 7 SP 1 VM。它使用 10.0.2.* 作为其在 Windows 中的 IP 子网。目前我必须使用像[http://xip.io](http://xip.io)这样的服务+ 另一个主机名别名才能在 Windows 中使用我的 *.dev 站点，例如：

[如果 Mac 的本地 IP 是 192.168.1.50 ]
something.dev.192.168.1.50.xip.io

..我需要在我的 Apache 配置中手动设置这个额外的 ServerAlias，并在每次本地 IP 地址更改时保持更新。

有什么方法可以设置 dnsmasq、VirtualBox 或我的 Windows IP 设置（或这些设置的组合），以便我可以直接从 Windows使用我的 .dev 主机名（例如[http://something.dev/ ）？](http://something.dev/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-08T14:09:30.857

试试这个： [https ://github.com/stackia/DNSAgent](https://github.com/stackia/DNSAgent)

它的功能类似于 Dnsmasq server= 和 address=

和一个规则转换器：[https ://stackia.github.io/masq2agent/](https://stackia.github.io/masq2agent/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T13:50:33.840

如果你的意思是你想在你的 windows vm 上运行类似 dnsmasq 的东西，那么我分享你的痛苦。我一直在尝试在 Windows 主机上设置一些东西来做通配符本地主机站点，而不做像 xip.io 这样的事情，但我在让它工作时遇到了问题。我拥有的 osx 机器上的 Dnsmasq 轻而易举，但试图让[Acrylic DNS](http://mayakron.altervista.org/wikibase/show.php?id=AcrylicHome)以同样的方式在 Windows 上工作并没有奏效。我确实让它作为本地缓存 DNS 运行，它应该做通配符部分，但在完成最后步骤时遇到问题。

一探究竟。在 windows 上看起来整洁、免费和 dnsmasq 替代品。如果你让它工作，发布你的结果！如果我能做到，我也会这样做。

# c++ - QT没有这样的插槽

> ID：14304113
> 
> 赞同：0
> 
> 时间：2013-01-13T13:49:47.323
> 
> 标签：c++, qt

我有这样一段代码：

przystanki.h

```
#ifndef PRZYSTANKI_H
#define PRZYSTANKI_H
#include "component.h"
class Przystanki : public Component
{
public:
    Przystanki(QWidget *parent = 0);

signals:
    void deletePosition(QString);
public slots:
    void deleteListItem();
    void addListItem(QString label);
    void createListItem(QString label, DodajPrzystanek* elem);

};

#endif // PRZYSTANKI_H 
```

组件.h

```
#ifndef COMPONENT_H
#define COMPONENT_H
#include <QListWidget>
#include <QGroupBox>
#include "dodajprzystanek.h"
class Component : public QGroupBox
{
    Q_OBJECT
public:
    explicit Component(QString name, QWidget *parent = 0);
    QListWidget* list;

};

#endif // COMPONENT_H 
```

使用它的片段：

```
MyWindow::MyWindow(QWidget *parent) :
QMainWindow(parent)
{
webView = new MyWebView(this);
mainlayout = new QGridLayout();
mainlayout->addWidget(webView, 0,0);
Przystanki *stop = new Przystanki(this);
mainlayout->addWidget(stop, 0, 1);
QHBoxLayout* bottom = new QHBoxLayout();
//bottom->addWidget(new QLabel("Linie"));
bottom->addWidget(new Component("Autobusy"));
bottom->addWidget(new Component("Linie"));
QHBoxLayout* hrightCorner = new QHBoxLayout();
QVBoxLayout* rightCorner = new QVBoxLayout();
rightCorner->addStretch(1);
rightCorner->addWidget(new QPushButton("Start", this));
//QLabel* label = new QLabel("Labelka");

//rightCorner->addWidget(label);
rightCorner->addStretch(1);
hrightCorner->addLayout(rightCorner);
mainlayout->addLayout(bottom, 1, 0);
mainlayout->addLayout(hrightCorner, 1, 1);
hrightCorner->setAlignment(Qt::AlignCenter);
this->setCentralWidget(new QWidget);
this->centralWidget()->setLayout(mainlayout);
connect(webView, SIGNAL(getMapPosition(QString)), stop, SLOT(addListItem(QString)));
connect(stop, SIGNAL(deletePosition(QString)), webView, SLOT(deleteMarker(QString)));

} 
```

我得到的是：

```
loaded the Generic plugin 
Object::connect: No such slot Component::addListItem(QString)
Object::connect: No such signal Component::deletePosition(QString) 
```

它发生在我将插槽和信号的定义从 Component 移动到它的派生类 Przystanki 之后。我已经删除了整个构建目录，运行 clean，运行 qmake 并再次构建，但它没有帮助。谁能向我解释我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:57:58.637

您的 Przystanki 类缺少 Q_OBJECT 宏。添加它，将 przystanki.h 添加到 .pro 文件中的 HEADERS（如果还没有的话）并重新运行 qmake。

# html - 如何让 div 表现得像漂浮在固定元素周围？

> ID：14304116
> 
> 赞同：2
> 
> 时间：2013-01-13T13:50:02.317
> 
> 标签：html, css

我有一个菜单 div，我想保持固定在左侧，而滚动的其余内容浮动到它的右侧。我有 20% 宽度的菜单，一个 80% w 的顶框和 20% w 的顶框下方的框，所以它应该全部排列以填满屏幕，唯一的问题是 div 浮动在固定的后面元素而不是它旁边，解决这个问题的最佳方法是什么？

这是 jfiddle [http://jsfiddle.net/8y2t2/14/](http://jsfiddle.net/8y2t2/14/)。

“maintop” div 应该填满屏幕剩余的 80% 宽度，而不是漂浮在“leftnav”div 后面并让“portolfio”框漂浮在它旁边。我觉得我缺少一些简单的解决方案？有任何想法吗？

```
* { margin: 0; }
html, body { height:100%; } 
body {margin:0px;background-color:#fff;}
#leftnav {background-color:#232323;width:20%;min-height: 100%;height:auto!important;float:left;text-align:center;position:fixed;left:0;}
#portfolio {white-space: nowrap;text-align:center;margin:0;}
#portfolio ul {margin:0;padding:0;}
#portfolio li {width: 20%;display:inline-block;text-align: center;vertical-align: middle; margin:0;padding:0;float:left;}
#portfolio img {max-width:100%;margin:0;padding:0;}
#maintop {width:80%;height:45%;background-color:#caab7e;float:left;text-align:center;}

<body>
<div id="leftnav"></div>
<div id="maintop"></div>
<div id="portfolio">
<ul>
    <li><img src="http://dummyimage.com/400x300/000/fff"></li>
    <li><img src="http://dummyimage.com/400x300/090/fff"></li>
    <li><img src="http://dummyimage.com/400x300/900/fff"></li>
    <li><img src="http://dummyimage.com/400x300/009/fff"></li>
    <li><img src="http://dummyimage.com/400x300/000/fff"></li>
    <li><img src="http://dummyimage.com/400x300/090/fff"></li>
    <li><img src="http://dummyimage.com/400x300/900/fff"></li>
    <li><img src="http://dummyimage.com/400x300/009/fff"></li>
    <li><img src="http://dummyimage.com/400x300/000/fff"></li>
    <li><img src="http://dummyimage.com/400x300/090/fff"></li>
    <li><img src="http://dummyimage.com/400x300/900/fff"></li>
    <li><img src="http://dummyimage.com/400x300/009/fff"></li>
</ul>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:54:21.497

使用以下 css`#maintop`和`#portfolio`. `#leftnav`这是有效的，因为您的绝对定位会从文档流中删除。即使`#leftnav`大小为 20%，它的作用就像它在一个单独的层上，这导致你的其他两个 div 计算它们相对于文档正文的位置。

```
#maintop {
    width:80%;
    height:45%;
    background-color:#caab7e;
    float:right;
    text-align:center;
}

#portfolio {
    text-align:center;
    float:right;
    width:80%;
    margin:0;
} 
```

[http://jsfiddle.net/8y2t2/20/](http://jsfiddle.net/8y2t2/20/)

# spring - Spring中的动态AOP配置

> ID：14304117
> 
> 赞同：0
> 
> 时间：2013-01-13T13:50:06.633
> 
> 标签：spring, spring-aop

我是 Spring AOP 的新手，我想知道是否可以使用 Spring AOP 实现我的项目。具体来说，我想知道在 Spring AOP 中是否可以在运行时配置哪些方面将被执行以及以何种顺序执行。注意：我只想控制我的应用程序方面，而不干扰 Spring 管理的方面，如事务或安全性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:44:20.840

您可以控制 aspesct 的顺序（使用声明优先级），但在运行时很难做到这一点，因为它需要为已经编织的类重新应用编织。指定要执行的方面也是如此。

您可以在每个方面方法的开头进行 if(!enabled){return;} 检查，并且可以像任何普通 bean 一样设置启用或禁用标志。这样，方面总是被编织进去，但如果它们被禁用，它们将无能为力。

**更新**

这是如何将方面用作 bean 的示例。假设您有这样的方面：

```
@Component // IMPORTANT
public aspect MyAspect {
    Object responder;

    public void setResponder(Object object) {
        this.responder=object;
    }
} 
```

然后在你的 spring 服务类中，你可以像这样连接方面：

```
@Service
public class MyServiceImpl implements MyService {
    @Autowired
    MyAspect aspect;

    void action() {
        aspect.setResponder(null);
    }
} 
```

这是可行的，因为方面实际上是 java 类。组件注释使方面被spring组件扫描识别为bean。我已经成功编译了这段代码，但实际上并没有在运行时测试它，所以很高兴知道它是否有效。

# c++ - 包含类的 C++ 排序列表

> ID：14304118
> 
> 赞同：0
> 
> 时间：2013-01-13T13:50:09.547
> 
> 标签：c++, list, sorting

我有一个小问题。我目前正在为锦标赛处理编写代码，我想出一个想法，即让团队在内存中保持有序的最佳方法是列表。现在，我正在尝试对包含点记录的列表进行排序。这是类声明：

```
#include "player.h"
#include <string>

class Team {
Player** Gracz;
std::string Name;
int TP, STP;
int Total;

public:
Team();
Team(Player* gracz1, Player* gracz2, Player* gracz3, Player* gracz4, Player*     gracz5, Player* gracz6, std::string name);
~Team();

void SetTeam();
void SetTeam(Player gracz1, Player gracz2, Player gracz3, Player gracz4, Player gracz5, Player gracz6, std::string name);
void SetTP(int tp);
void SetSTP(int stp);

std::string GetTeam();
int GetTotal();
int GetTP();
int GetSTP();

bool operator<(Team& team);
bool operator>(Team& team);

void PrintTeam();
}; 
```

这是程序代码：

```
#include <iostream>
#include "player.h"
#include "team.h"
#include <list>
#include <string>

using namespace std;

int main(int argc, char *argv[]) {
Player *p;
Team *t1, *t2, *t3, *t4;
list<Team> x;
list<Team>::iterator it;

p=new Player("a","a","a");

t1=new Team(p,p,p,p,p,p,"A");
t2=new Team(p,p,p,p,p,p,"B");
t3=new Team(p,p,p,p,p,p,"C");
t4=new Team(p,p,p,p,p,p,"D");

x.push_back(*t1);
x.push_back(*t2);
x.push_back(*t3);
x.push_back(*t4);

cout<<"Turniej: "<<endl;
for(it=x.begin();it!=x.end();++it)
    cout<<" "<<(*it).GetTeam();
cout<<endl;

t1->SetTP(15);
t2->SetTP(4);
t3->SetTP(8);
t4->SetTP(8);
t3->SetSTP(15);
t4->SetSTP(65);

x.sort(); 

cout<<"Turniej: "<<endl;
for(it=x.begin();it!=x.end();++it)
    cout<<" "<<(*it).GetTeam();
cout<<endl;

return 0;
} 
```

所以我想先按 TPs 然后按 STPs 对列表进行排序，它包含在重载运算符 < 的声明中。当我打印列表时，我在排序之前得到 A、B、C、D，在排序之后得到相同的结果，而不是之后的 A、D、C、B。我的错在哪里？

感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T13:54:21.427

这里对象被复制，其副本被推送到容器中：

```
x.push_back(*t1);
/* the same for others */ 
```

这里修改了原始对象，但容器中的副本没有改变：

```
t1->SetTP(15); 
```

# spring - Spring Component Scanner 无法从 applicationContext.xml 工作

> ID：14304122
> 
> 赞同：0
> 
> 时间：2013-01-13T13:50:36.923
> 
> 标签：spring, spring-mvc

问题是，当我将组件扫描放在 applicationContext.xml 中时，我无法启动 spring，但如果我将组件扫描放在 dispatcher-servlet.xml 中，则工作正常

**环境：**

> 春天 3.1.3

**Web.xml**

```
 <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

<context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/config/applicationContext.xml 
            /WEB-INF/config/shiro-security.xml
        </param-value>
</context-param>
<servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/config/dispatcher-servlet.xml</param-value>
        </init-param>
        <load-on-startup>2</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
</servlet-mapping> 
```

**应用程序上下文.xml**

```
<aop:aspectj-autoproxy proxy-target-class="true"/>
<context:component-scan base-package="com.keype.hawk" /> 
```

**调度程序-servlet.xml**

```
 <!-- Annotation driven programming model -->
   <mvc:annotation-driven>
        <mvc:message-converters>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
                <property name="objectMapper" ref="customJacksonMapper" />
            </bean>
        </mvc:message-converters>
    </mvc:annotation-driven> 
```

我可以看到春天启动时所有的豆子都被采摘了，但最终失败了。在日志中：

```
INFO :org.springframework.web.context.support.XmlWebApplicationContext[postProcessAfterInitialization]:Bean 'securityManager' of type [class org.apache.shiro.web.mgt.DefaultWebSecurityManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO :org.springframework.web.context.support.XmlWebApplicationContext[postProcessAfterInitialization]:Bean 'authorizationAttributeSourceAdvisor' of type [class org.apache.shiro.spring.security.interceptor.AuthorizationAttributeSourceAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO :org.springframework.web.context.support.XmlWebApplicationContext[postProcessAfterInitialization]:Bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0' of type [class org.springframework.transaction.annotation.AnnotationTransactionAttributeSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO :org.springframework.web.context.support.XmlWebApplicationContext[postProcessAfterInitialization]:Bean 'org.springframework.transaction.config.internalTransactionAdvisor' of type [class org.springframework.transaction.interceptor.BeanFactoryTransactionAttributeSourceAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO :org.springframework.beans.factory.support.DefaultListableBeanFactory[preInstantiateSingletons]:Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@125e8982: defining beans [org.springframework.aop.config.internalAutoProxyCreator,warehouseStockLevelDaoImpl,transactionsDaoImpl,trackingDaoImpl,warehouseTypeDaoImpl,documentTypeDaoImpl,warehouseProductStockDaoImpl,unitDaoImpl,documentItemDaoImpl,pricingTemplateDaoImpl,documentItemSerialNumbersDaoImpl,supplierContractItemDaoImpl,.. [Huge list. Deleting the rest]org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
INFO :org.springframework.beans.factory.support.DefaultListableBeanFactory[destroySingletons]:Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@125e8982: defining beans [org.springframework.aop.config.internalAutoProxyCreator,warehouseStockLevelDaoImpl,transactionsDaoImpl,trackingDaoImpl,warehouseTypeDaoImpl,documentTypeDaoImpl,warehouseProductStockDaoImpl,unitDaoImpl,documentItemDaoImpl,pricingTemplateDaoImpl,documentItemSerialNumbersDaoImpl,supplierContractItemDaoImpl,productSetDaoImpl,productTypeDaoImpl,productDaoImpl,productPriceListDaoImpl,supplierContractDaoImpl,productBrandDaoImpl,productCategoryDaoImpl,warehouseDa [Huge list. Deleting the rest] org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
INFO :org.springframework.cache.ehcache.EhCacheManagerFactoryBean[destroy]:Shutting down EHCache CacheManager
ERROR:org.springframework.web.context.ContextLoader[initWebApplicationContext]:Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'documentItemService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.keype.hawk.inventory.service.InventoryProductService com.keype.hawk.inventory.service.DocumentItemService.inventoryProductService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'inventoryProductService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.keype.hawk.inventory.service.DocumentItemService com.keype.hawk.inventory.service.InventoryProductService.documentItemService; nested exception is java.lang.IllegalArgumentException: Can not set com.keype.hawk.inventory.service.DocumentItemService field com.keype.hawk.inventory.service.InventoryProductService.documentItemService to $Proxy25
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) 
```

Spring [preInstantiateSingletons] 然后销毁它。为了调试，我将以下几行移至 dispatcher-servlet.xml

```
<aop:aspectj-autoproxy proxy-target-class="true"/>
    <context:component-scan base-package="com.keype.hawk" /> 
```

问题消失了，弹簧正常启动。将组件扫描器放在 applicationContext.xml 中时，如何解决上述问题？

--更新：完整的调试日志，applicationContext.xml 和 dispatcher-servlet.xml 在[这里](http://keype.com/tmp/springdebug-autowiring-issue.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:58:04.957

所有服务组件都应该是`applicationContext.xml`组件扫描的一部分，而控制器应该属于`dispatcher-servlet.xml`。似乎存在不止一种相同类型的 bean。在这种情况下，自动装配不适合。您可以通过显式声明冲突类型的 bean 并在 xml.xml 中自行连接它来解决冲突。看看[这里](https://stackoverflow.com/questions/6976183/proxy25-error-with-spring-service)。

# xcode - 我该如何解决 没有被 Xcode 发现？

> ID：14304123
> 
> 赞同：3
> 
> 时间：2013-01-13T13:50:41.457
> 
> 标签：xcode, macos

我只是试图编译旧版本的代码，编译器说找不到 avformat.h。我做了一个快速的谷歌搜索，但找不到这个问题的原因。图书馆是否已弃用或我遗漏了什么？

# java - CSS样式停止工作？

> ID：14304124
> 
> 赞同：1
> 
> 时间：2013-01-13T13:51:08.803
> 
> 标签：java, css, servlets

我正在使用 Java 代码开发一个 Web 应用程序，我通过使每个页面都从一个 servlet 类开始来更改我的代码。

servlet“indexServlet”中的 Java 代码：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        DataGathering dBConnector = new DataGathering();
        List<Long> lstDetailVewOID;
        lstDetailVewOID = dBConnector.getDetailVewOID();
        request.setAttribute("detailVewLst", lstDetailVewOID);
        // pass the list to jsp page.
        request.getRequestDispatcher("/index.jsp").forward(request, response);
    } 
```

从那时起CSS代码停止工作，它给了我这个错误：

> 资源解释为样式表，但使用 MIME 类型 text/html 传输：“http://localhost:8080/firstApplication/Style-Sheet/Template-Style.css”。

在跟踪代码时，我发现通过`doGet()`在类中运行该方法`servlet`，它调用页面并运行它，然后再次返回servlet关闭该方法，我猜是这个过程导致的错误，但不确定，我无法解决。

通过互联网搜索时，我认为类型应该是 text/css 但我已经这样做了，并且在更改代码之前，相同的 CSS 文件正在工作。

在jsp页面中调用CSS文件：

```
<link href="Style-Sheet/Template-Style.css" rel="stylesheet" type="text/css"> 
```

编辑：web.xml 映射：

```
<servlet>
        <servlet-name>Index</servlet-name>
        <servlet-class>com.Teklabz.Servlets.IndexServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Index</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:02:50.523

我认为您通过 servlet 返回静态资源，例如 css 和图像。这本身很糟糕，但如果这样做，您需要在响应标头中设置正确的 mime 类型。实际上，我认为您应该将 servlet-to-url 映射从 /* 更改为有点像 /*.jsp，因此，所有其他静态资源都将由您的 tomcat/jetty 处理，他们做得对。

```
<web-app>
    <servlet>
         <servlet-name>Servlet1</servlet-name>
         <servlet-path>foo.Servlet</servlet-path>
    </servlet>
    <servlet-mapping>
         <servlet-name>Servlet1</servlet-name>
         <url-pattern>/*.jsp</url-pattern> <!-- right here! -->
    </servlet-mapping>
</web-app> 
```

# makefile - 使错误乳胶

> ID：14304127
> 
> 赞同：0
> 
> 时间：2013-01-13T13:51:30.840
> 
> 标签：makefile, latex

```
make -C doc html latexpdf 
```

产生这个：

```
Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def
(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/rerunfilecheck.sty))
(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/hypcap.sty))
(/usr/share/texlive/texmf-dist/tex/latex/multirow/multirow.sty)
Writing index file Arakoon.idx
(./Arakoon.aux)
Runaway argument?
{{1.10.3}{9}{Client side support\relax }{subsection.1.10.
! File ended while scanning use of \@newl@bel.
<inserted text>
                \par
l.113 \begin{document}

? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-08-23T17:32:23.217

如果有人仍在寻找这个：对我来说，通常，当先前的构建由于错误而失败时，后续构建会因此错误而失败。通过删除主`.aux`文件并重新构建它来解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:55:47.083

不可能有任何信心地说，但它看起来像小节标题或数学标签（将是标签 10.1.3）中的脆弱（非稳健）命令，因为：

1.  它发生在`\begin{document}`, 当加载 .aux 文件时,
2.  该错误表明 .aux 文件中的指令格式错误，并且存在一个`\relax`存在 - 通常是什么命令在执行其副作用后减少。

两个建议：

1.  通过从中创建一个新文档来生成一个 MWE，其中除了标题/等式（可能还有以下句子）已删除之外，文档的所有正文都已删除。这会产生同样的错误吗？如果是这样，请在此处发布。您可能需要一些试验和错误来找出负责哪个 Lat3ex 命令，但它应该包含文本`Client side support`。
2.  请阅读[https://tex.stackexchange.com/questions/4736/what-is-the-difference-between-fragile-and-robust-commands](https://tex.stackexchange.com/questions/4736/what-is-the-difference-between-fragile-and-robust-commands) - 如果我是对的，你有一个不应该的脆弱命令. 找出应该在那里的东西。

# hibernate - spring data jpa @Entity property not found 异常

> ID：14304128
> 
> 赞同：11
> 
> 时间：2013-01-13T13:51:32.523
> 
> 标签：hibernate, spring-data-jpa

我是 spring-data-jpa 的新手，目前正在尝试使用 hibernate 来实现。我已经按照[教程](http://krams915.blogspot.com.au/2012/01/spring-mvc-31-jqgrid-and-spring-data_1887.html?showComment=1358083673242#c3842804094745003764)进行了！为此，我目前面临启动应用程序本身的问题。在启动过程中出现以下异常：

```
 Caused by: org.springframework.data.mapping.PropertyReferenceException: No property customer found for type com.adaptris.dashboard.customer.Customer
at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:74)
at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:326)
at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:352)
at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:306)
at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:270)
at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:244)
at org.springframework.data.repository.query.parser.Part.<init>(Part.java:73)
at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:180)
at org.springframework.data.repository.query.parser.PartTree$Predicate.buildTree(PartTree.java:260)
at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:240)
at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:71)
at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:57)
at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:90)
at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:162)
at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:68)
at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.<init>(RepositoryFactorySupport.java:280)
at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:148)
at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:125)
at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:41)
at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142) 
```

客户是我的域类注释

```
@Entity(name = "customer") 
```

而且我想它正在尝试连接到数据库并获取我实际配置的客户表。这是我的弹簧配置：

```
<tx:annotation-driven transaction-manager="transactionManager" />
<!-- Activate Spring Data JPA repository support -->
<jpa:repositories base-package="com.adaptris.dashboard.customer" />

    <!-- Declare a datasource that has pooling capabilities -->
<bean id="jpaDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close" p:driverClass="${app.jdbc.driverClassName}"
    p:jdbcUrl="${app.jdbc.url}" p:user="${app.jdbc.username}" p:password="${app.jdbc.password}"
    p:acquireIncrement="5" p:idleConnectionTestPeriod="60" p:maxPoolSize="100"
    p:maxStatements="50" p:minPoolSize="10" />

<!-- Declare a JPA entityManagerFactory -->
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
    p:persistenceXmlLocation="classpath*:META-INF/persistence.xml"
    p:persistenceUnitName="hibernatePersistenceUnit" p:dataSource-ref="jpaDataSource"
    p:jpaVendorAdapter-ref="hibernateVendor" />

<!-- Specify our ORM vendor -->
<bean id="hibernateVendor"
    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
    p:showSql="false" />

<!-- Declare a transaction manager -->
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
    p:entityManagerFactory-ref="entityManagerFactory" /> 
```

数据库是正在运行的 MYSQL。以下是属性：

```
# database properties
app.jdbc.driverClassName=com.mysql.jdbc.Driver
app.jdbc.url=jdbc\:mysql\://Mallik-PC/adaptrisschema
app.jdbc.username=dbuser
app.jdbc.password=dbpassword 
```

请帮助我摆脱这个问题！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-21T17:55:12.110

听起来您为 Domain 类指定的 Repository 接口包含一个`findXXX`方法，而`XXX`不是您的 Domain 类的属性。

例子：

```
public interface UserRepository extends CrudRepository<User, String> {

    /**
     * Finds a user by name.
     * 
     * @param name The name of the User to find.
     * @return The User with the given name.
     */
    public User findByName(String name);
} 
```

您的 Domain 类看起来像这样，并且缺少“name”属性：

```
@Entity
public class User {
    private String firstname;
    private String lastname;
    // No "private String name" in here!
    ... 
} 
```

在您的特定示例中，您似乎`findByCustomer(Customer customer)`向您的 Repository 接口添加了一个方法（可能称为类似的东西`CustomerRepository`）。您不需要该方法，因为`findOne(<PrimaryKeyClass> id)`Spring Data for JPA 会自动为您生成一个方法，您可以使用`@Id`Domain 类`Customer`的作为参数来调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:27:56.897

Spring ORM `LocalContainerEntityManagerFactoryBean`（我认为从 3.1 开始）有一个名为“packagesToScan”的属性。除非您有要通过 persistence.xml 设置的其他供应商属性，否则删除`p:persistenceXmlLocation`并替换为

```
p:packagesToScan="[package name where your entities are]" 
```

这告诉在`LocalContainerEntityManagerFactoryBean`哪里可以找到所有`@Entity`pojo 并将它们包含在您的 EntityManagerFactory 中，以便 Spring Data JPA 可以找到放置“客户”的位置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-25T17:15:47.483

在我的情况下，由于 Spring 区分大小写，我遇到了这个错误。我按名字搜索**，**域类中的声明为**名字**：

```
@Entity
public class User {
    private String firstName;
... 
```

只是因为在`findByFirstname`我收到此错误时声明了 find 方法。它在将字母**n**更改为**N**后起作用。

```
public Collection<User> findByFirstName(@Param("firstName") String firstname); 
```

# c# - 如何验证文本输入以仅包含数字？

> ID：14304133
> 
> 赞同：-1
> 
> 时间：2013-01-13T13:52:05.640
> 
> 标签：c#, .net

我想强制使用我的程序的人在 c# 的文本标签中只输入数字。我怎样才能做到这一点？示例：方程数：（他应该只输入一个数字）

此代码强制他输入介于`2`和之间的数字，`10`但我需要一个字母代码

```
if (int.Parse(txt1.Text) < 2 || int.Parse(txt1.Text) > 10)
   {
     l6.ForeColor = System.Drawing.Color.Red;
     l6.Text = "Svp choisir un nombre entre 2 et 10 ... Soyez Logique!";
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:13:55.780

将这个（或这个的变体，根据你想让用户输入的内容）放在文本框按键事件中，所以基本上你将在这个文本框中管理按键。添加 System.Media 库以使用哔声，如果用户输入了错误的密钥，或将其从代码中删除...

 ````
 if ((e.KeyChar >= '0') && (e.KeyChar <= '9') && (txt1.Text.Length < 10))
        {

        }
        else if (e.KeyChar == 0x08)
        {
            //BACKSPACE CHAR
        }
        else if (txt1.SelectionLength > 0)
        {
            //IF TEXT SELECTED -> LET IT OVERRIDE
        }
        else
        {
            e.Handled = true;
            SystemSounds.Beep.Play();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:12:20.507

检查在文本框中插入文本以避免非数字字符的各种方法并不是一件容易的事，而且往往会在某处失败。例如，从剪贴板粘贴的文本呢？退格、删除、左、右箭头键呢？。

在我看来，最好采用不同的方法。
使用 Validating 事件并让用户键入或粘贴他想要的任何内容。在验证事件中，您是否检查并建议用户或添加一个特殊的 errorProvider 来发出错误信号：

```
 private void l6_Validating(object sender, CancelEventArgs e)
    {
        int isNumber = 0;
        if (l6.Text.Trim().Length > 0)
        {
            if (!int.TryParse(l6.Text, out isNumber))
            {
                e.Cancel = true;
                errorProvider1.SetError(l6, "Svp choisir un nombre entre 2 et 10 ...";);
            }
            else
            {
                errorProvider1.SetError(l6, "");
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T14:09:48.963

你使用什么图形用户界面？使用 Winforms 有两种方法：

1.  我建议：使用 numericUpDown 控件而不是文本框。这样用户只能输入数字并且有很好的向上/向下箭头来更改值。另外，您还可以处理光标键。

2.  实现一个[验证](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)事件处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T14:10:53.550

```
if (txt1.Text.Trim().Length > 0)
{
    // Parse the value only once as it can be quite performance expensive.
    Int32 value = Int32.Parse(txt1.Text)

    if ((value >= 2) && (value <= 10))
    {
        l6.ForeColor = Color.Red;
        l6.Text = "Svp choisir un nombre entre 2 et 10 ... Soyez Logique!";

        // Clear the text...
        txt1.Text = "";
    }
    else
    {
        // Your code here...
    }
} 
```

但是，恕我直言，TryParse 甚至更好，因为它可以以更好的方式处理错误的字符串格式：

```
if (txt1.Text.Trim().Length > 0)
{
    Int32 value;

    if (!Int32.TryParse(txt1.Text, out value))
    {
        l6.ForeColor = Color.Red;
        l6.Text = "Svp choisir un nombre entre 2 et 10 ... Soyez Logique!";

        // Clear the text...
        txt1.Text = "";
    }
    else
    {
        // Your code here...
    }
} 
````

# ruby-on-rails - 如何发现我的代理服务器不起作用？

> ID：14304140
> 
> 赞同：0
> 
> 时间：2013-01-13T13:53:09.200
> 
> 标签：ruby-on-rails, ruby, proxy

例如，我有一个像 91.229.248.75:8085 这样的代理服务器，如果它工作我应该接收`true`，或者如果它不工作我应该接收`false`，我该如何使用 RoR？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T14:06:02.360

你可以试试这个：

通过以下方式安装 net-ping gem

```
 gem install net-ping 
```

然后使用它来检查代理：

```
 require 'net/ping'

 Net::Ping::TCP.new('91.229.248.75', 8085).ping 
```

例如：

```
 Net::Ping::TCP.new('www.google.com', 80).ping 
```

# android - Android和JSP（Tomcat服务器）连接，无法连接Tomcat服务器

> ID：14304141
> 
> 赞同：0
> 
> 时间：2013-01-13T13:53:13.340
> 
> 标签：android, jsp, tomcat, connection

```
package com.AndroidAndJSP;

import java.io.BufferedReader;`

import java.io.InputStream;

import java.io.InputStreamReader;

import java.util.ArrayList;

import org.apache.http.HttpEntity;

import org.apache.http.HttpResponse;

import org.apache.http.client.HttpClient;

import org.apache.http.client.entity.UrlEncodedFormEntity;

import org.apache.http.client.methods.HttpPost;

import org.apache.http.impl.client.DefaultHttpClient;

import org.apache.http.message.BasicNameValuePair;

import android.app.Activity;

import android.os.Bundle;

import android.util.Log;

import android.widget.Toast;

public class MainActivity extends Activity 

{

String user,pass;

@Override

public void onCreate(Bundle savedInstanceState) 

{

    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    try

{

        ArrayList<BasicNameValuePair> namevaluepair=new ArrayList<BasicNameValuePair>();

        namevaluepair.add(new BasicNameValuePair("user", user="username"));

        namevaluepair.add(new BasicNameValuePair("pass", pass="password"));

        HttpClient client=new DefaultHttpClient();

        HttpPost post=new HttpPost("http://10.0.2.2:8080/login.jsp");

        post.setEntity(new UrlEncodedFormEntity(namevaluepair));

        Toast.makeText(this, "Before Post", Toast.LENGTH_LONG).show();

        HttpResponse response=client.execute(post);         **//Here Comes Some Error, not going beyond from this line**

        Toast.makeText(this, "After Post", Toast.LENGTH_LONG).show();

        HttpEntity entity=response.getEntity();

        InputStream in=entity.getContent();

        try

{

            BufferedReader bf=new BufferedReader(new InputStreamReader(in));

            StringBuilder sb=new StringBuilder();

            String line=null;

            while((line=bf.readLine())!=null)

                {

                sb.append(line);

            }

            String result=sb.toString();

            if(result.equals("valid"))

                 {

               Log.d("valid","valid");

               Toast.makeText(this, "Valid User", Toast.LENGTH_LONG).show();

            }

                else{

                Toast.makeText(this, "Invalid Username/Pass", Toast.LENGTH_LONG).show();

            }

        }

             catch(Exception e){

            e.printStackTrace();
        }

   }

             catch(Exception e){

        Log.e("log_tag", "Error "+e.toString());

    }

}
} 
```

# php - 为什么 tcpdf 库从循环中输出一条记录？

> ID：14304144
> 
> 赞同：0
> 
> 时间：2013-01-13T13:53:44.970
> 
> 标签：php, mysql, codeigniter, tcpdf

我将TCPDF与codeigniter一起使用，当从sql查询生成PDF时，我在pdf文件中有一条记录，但是，该表有三条记录...

```
print_r($pdf_data); 
```

给了我这个

```
Array ( [0] => Array ( [no] => 1 [name] => Jamal [address] => ÙØ®Ø± ) [1] => Array ( [no] => 2 [name] => Jina [address] => Washington D.C ) [2] => Array ( [no] => 3 [name] => Dijandra [address] => Nairboi ) ) 
```

控制器

```
<?php

    class example extends CI_Controller {

        function __construct() {
            parent::__construct();
            $this->load->library('pdf');
        }

        function b() {
            $this->pdf->AddPage();
            $font1 = $this->pdf->addTTFfont(K_PATH_FONTS . 'arial.ttf', 'TrueTypeUnicode', '', 8);
            $this->pdf->SetFont($font1, '', 15, '', false);
            $this->load->model('member_model');
            $pdf_data = $this->member_model->alldata();
            foreach ($pdf_data as $rows) {

                $tbl = '<table style="width: 638px;" cellspacing="0">';
                $id = $rows['no'];
                $name = $rows['name'];
                $address = $rows['address'];

                $tbl .= '<tr>
                <td style="border: 1px solid #000000; width: 150px;">' . $id . '</td>
                <td style="border: 1px solid #000000; width: 378px;">' . $name . '</td>
                <td style="border: 1px solid #000000; width: 110px; text-align:center">' . $address . '</td>
                </tr>';

                $tbl .= '</table>';

                $this->pdf->writeHTML($tbl, true, false, false, false, '');
                  $this->pdf->Output('example_001.pdf', 'I');
            }
        }
    ?> 
```

该模型

```
<?php

class Member_model extends CI_Model {

    function __construct() {
        parent::__construct();
    }

    function alldata() {
        $this->db->select('*')->from('tb_member')->order_by('no', 'ASC');
        $getData = $this->db->get();
        if ($getData->num_rows() > 0)
            return $getData->result_array();
        else
            return NULL;
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T13:56:51.857

从`foreach`循环内部，删除以下段：

```
$this->pdf->Output('example_001.pdf', 'I'); 
```

并将其放在循环体之外。

# php - Php - 组合多个表单元素

> ID：14304152
> 
> 赞同：0
> 
> 时间：2013-01-13T13:54:51.447
> 
> 标签：php, file-upload, drop-down-menu, directory, subdirectory

我正在尝试组合多个表单元素。我有 2 个按钮，1 个文本框和 1 个上传框和 1 个下拉菜单，如下所示：

![上传.php](../Images/0ac0ecee89ace410b1f7b83b0d62a68e.png)

因此，用户可以选择要上传的目录，通过单击“创建”按钮和上传文件来创建一个新目录。但是，使用我当前的代码，它不起作用（文件被上传到默认目录）。

这是代码：

```
<?php
  include("login.php");

?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <title>FileStore - Upload Files</title>
    <link rel="stylesheet" href="./CSS/style.css" type="text/css" media="screen, projection" />
</head>
<body>
<div id="wrapper">
    <header id="header">
    <div id="header-content">
        <strong><h1>FileStore</h1></strong> Upload multiple files at once!
    </div>
    <div class="login-info" >
<?php
    if ($isLoggedin === false) {
        echo '  <form action="" method="POST">
        Username: <input name="username" > 
        Password: <input type="password" name="password" size="8">
              <input type="submit" name="submit" value="Login">
                </form>';
        echo "<p align='right'>You are not logged in.</p>";
        echo "<b><a href='registration.php'>Register</a></b>";
    }else{  
         echo $welcomeMsg;
    }   
?>
    </div>
    </header><!-- #header-->
    <section id="middle" align="center">
        <div id="container">
        <br><br>
            <div id="content">
                <strong><h1>Upload files</h1></strong><br><br>
                <div id="upload-file" >
                <form action="" method="post" enctype="multipart/form-data">
                <input type="file" value="" name="upload[]" multiple>
                <button type="submit">Upload!</button>
                            </form>
                <select name="myDirs">
                <option value=""  selected="selected">Select a folder</option>
                <?php
                if (chdir("./files/" . $userid)) {
                   $dirs = glob('*', GLOB_ONLYDIR);
                   foreach($dirs as $val){
                      echo '<option value="'.$val.'">'.$val."</option>\n";
                   }        
                    } else {
                   echo 'Changing directory failed.';
                }
                ?>          
<?php
            include("dbConfig.php");
    $Username = $_SESSION["username"];
    global $userid;
    $sql = "SELECT UserID FROM users WHERE Username = '".$Username."'";
    $result = mysql_query($sql) or die(mysql_error());

    while($row = mysql_fetch_assoc($result)) {
       $userid = $row['UserID'];
    }

    $newDir = $_REQUEST["newDir"];
    $upload_dir  = './files/' . (string)$userid . '/';
    $folder_path = $upload_dir . "/" . $newDir . "/" ;
    if (!file_exists($folder_path)) {
            mkdir($folder_path, 0777, true);
            chmod($folder_path, 0777);  
            echo "Folder" . $newDir . "created.";
            echo "Redirecting to upload page..";
            header( 'Location: ../upload.php' ) ;
        } else {
           echo "Error creating " . $newDir;
        }   
        echo "<form action='' method='post'>";
        echo "<input type='text' name='newDir'> ";      
        echo "<input type='submit' value='Create'>";
        echo "</form>";     
?>      
<?php
        include("dbConfig.php");
        $Username = $_SESSION["username"];
        global $userid;
        global $up_path;

        $error_message[0] = "Unknown problem with upload.";
        $error_message[1] = "Uploaded file too large (load_max_filesize).";
        $error_message[2] = "Uploaded file too large (MAX_FILE_SIZE).";
        $error_message[3] = "File was only partially uploaded.";
        $error_message[4] = "Choose a file to upload.";

        $sql = "SELECT UserID FROM users WHERE Username = '".$Username."'";

        $result = mysql_query($sql) or die(mysql_error());
        while($row = mysql_fetch_assoc($result)) {
           $userid = $row['UserID'];
        }
        $vpath = strlen($userid);
        $upload_dir  = './files/' . (string)$userid . '/';
        $num_files = count($_FILES['upload']['name']);

        if (!file_exists($upload_dir)) {
            mkdir($upload_dir, 0777, true);
            chmod($upload_dir, 0777);

        } else {

            for ($i=0; $i < $num_files; $i++) {
            $upload_file = $upload_dir . urlencode(basename($_FILES['upload']['name'][$i]));

                if (@is_uploaded_file($_FILES['upload']['tmp_name'][$i])) {
                    if (@move_uploaded_file($_FILES['upload']['tmp_name'][$i], 
                        $upload_file)) {
                        /* Great success... */

                        echo basename($upload_file) . " has been uploaded. <br>";
                        //$content = file_get_contents($upload_file);
                        //echo $content;
                    } else {
                        print $error_message[$_FILES['upload']['error'][$i]];
                    }
                } else {
                    print $error_message[$_FILES['upload']['error'][$i]];
                }    
            }
        }           
?>  
        </div>                              
            </div><!-- #content-->
        </div><!-- #container-->

        <aside id="sideLeft">

            <div id="menu-x" align="center"><br>
            <strong>Menu</strong><br><br>

                    <div class="menu">
                        <ul>
                        <li><a href="index.php">Home</a></li>
                        <li><a href="upload.php">Upload</a></li>
                        <li><a href="files.php">Files</a></li>
                        <li><a href="about.php">About</a></li>
                        <li><a href="help.php">Help</a></li>
                        <li><a href="#">Logout</a></li>
                        </ul>
                        <br style="clear:left"/>
                    </div>

            </div>

        </aside><!-- #sideLeft -->

    </section><!-- #middle-->

    <footer id="footer">
        <strong>FileStore:</strong> A CMT 3315 Project by Brian Livori
    </footer><!-- #footer -->

</div><!-- #wrapper -->

</body>
</html> 
```

我想让用户在上传之前创建一个目录，然后通过从下拉列表中选择一个选项来选择要上传的目录。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:57:26.617

您的表单标签在选择框之前结束，因此将其移动到选择框下方，您应该获得与所选上传目录相关的帖子值。

# c++ - 将文件内容复制到多维数组中

> ID：14304153
> 
> 赞同：1
> 
> 时间：2013-01-13T13:54:55.250
> 
> 标签：c++, file-io, multidimensional-array

我创建了一个 c++ 应用程序来将文件的内容读入数组：

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main()
{
    fstream myfile;
    myfile.open("myfile.txt");
    int a[3];
    int counter = 0;
    char s[10];
    while (!myfile.eof())
    {
        myfile.getline(s, 10,';');
        a[counter]=atoi(s);
        counter++;
    }

    for (int i = 0 ; i<3 ; i++)
        cout << a[i]<<endl;

    cin.get();
} 
```

和内容，如果我的文件是：

```
15;25;50 
```

它工作正常

我的问题是：如果我将文件更改为：

```
15;25;50

12;85;22 
```

如何将所有文件读入 3*2 数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:40:14.213

您有两个定界符`;`和换行符 ( `\n`)，这使事情变得有些复杂。您可以阅读完整的一行并在之后拆分该行。我还建议使用[`std::vector`](http://www.cplusplus.com/reference/vector/vector/)而不是普通数组

```
std::vector<std::vector<int> > a;
std::string line;
while (std::getline(myfile, line)) {
    std::vector<int> v;
    std:istringstream ss(line);
    std::string num;
    while (std::getline(ss, num, ';')) {
        int n = atoi(num);
        v.push_back(n);
    }

    a.push_back(v);
} 
```

也可以使用普通数组。然后，您必须确保当您的行数超过数组允许的数量时，您不会覆盖数组。

如果您总是在一行中有三个数字，您也可以利用它并将前两个数字拆分为 at`;`和第三个数字 at`\n`

```
int a[2][3];
for (int row = 0; std::getline(myfile, s, ';'); ++row) {
    a[row][0] = atoi(s);
    std::getline(myfile, s, ';'));
    a[row][1] = atoi(s);
    std::getline(myfile, s));
    a[row][2] = atoi(s);
} 
```

但这当然会失败，如果您连续有三个以上的数字，或者更糟糕的是，有两个以上的行。

# r - 在 R 中为绘图添加颜色

> ID：14304154
> 
> 赞同：1
> 
> 时间：2013-01-13T13:54:57.870
> 
> 标签：r, graphics, colors, plot

我正在`R`使用包`smacof`。

我有一个![图形](../Images/2e517603efe0e1501c836711d3e1b4db.png)我想看到红色的点 1 到 10，其他的则留下黑色。

我使用以下命令完成了它：

```
nations_indscal2<-smacofIndDiff(nations_list, ndim=2, metric=FALSE, 
                               constraint="indscal",itmax=10000)

nations_indscal2$gspace
plot(nations_indscal2)

nations_indscal2$cweights
weightspace(nations_indscal2,20,1,2) 
```

我试过（对于第 1 点）：

```
text(nations_indscal2$cweights[[1]], col="red")
weightspace(nations_indscal2,20,1,2) 
```

我没有错误，但它也不起作用。有什么想法我错了吗？

请在此处找到可重现的示例`nations_list`：

```
list(structure(c(6, 1, 6, 6, 5, 8, 6, 7, 5, 6, 5, 5, 7, 8, 8, 
8, 8, 7, 6, 7, 8, 7, 3, 5, 8, 6, 5, 8, 8, 7, 8, 2, 5, 6, 1, 8, 
5, 3, 7, 4, 7, 1, 2, 3, 8), Labels = c("Brazil", "Congo", "Cuba", 
"Egypt", "France", "India", "Israel", "Japan", "China", "USA"
), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
    upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(6, 1, 6, 6, 5, 8, 6, 7, 5, 6, 5, 5, 7, 8, 8, 
    8, 8, 7, 6, 7, 8, 7, 3, 5, 8, 6, 5, 8, 8, 7, 8, 2, 5, 6, 
    1, 8, 5, 3, 7, 4, 7, 1, 2, 3, 8), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(6, 5, 5, 5, 5, 6, 5, 5, 5, 6, 5, 6, 5, 6, 6, 
    6, 6, 6, 5, 7, 6, 6, 5, 5, 6, 4, 4, 6, 6, 6, 6, 5, 6, 6, 
    2, 6, 5, 4, 5, 4, 6, 3, 3, 3, 6), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(7, 5, 6, 7, 7, 7, 6, 7, 6, 7, 4, 5, 7, 7, 7, 
    7, 7, 7, 7, 8, 7, 7, 7, 7, 5, 7, 7, 7, 8, 5, 7, 6, 8, 7, 
    5, 7, 7, 4, 7, 6, 7, 4, 4, 5, 6), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(7, 5, 7, 5, 3, 7, 4, 3, 4, 7, 6, 6, 7, 7, 7, 
    7, 8, 7, 6, 6, 7, 6, 4, 5, 7, 7, 7, 7, 8, 7, 7, 6, 5, 6, 
    1, 6, 4, 2, 5, 7, 6, 7, 1, 5, 5), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(7, 5, 7, 7, 7, 7, 7, 7, 6, 7, 6, 6, 7, 7, 7, 
    7, 8, 7, 7, 7, 7, 7, 7, 5, 6, 5, 6, 7, 6, 7, 7, 7, 6, 7, 
    5, 6, 7, 6, 7, 7, 7, 6, 4, 7, 7), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(5, 3, 4, 7, 2, 3, 6, 3, 6, 4, 6, 7, 5, 4, 6, 
    6, 7, 1, 5, 2, 4, 6, 4, 3, 5, 4, 2, 5, 5, 6, 6, 5, 4, 3, 
    1, 5, 4, 4, 5, 5, 6, 6, 3, 2, 2), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(6, 5, 6, 5, 4, 7, 7, 6, 6, 5, 5, 6, 6, 8, 8, 
    7, 7, 7, 7, 7, 8, 8, 6, 7, 5, 6, 5, 8, 7, 7, 7, 5, 6, 7, 
    4, 8, 6, 6, 6, 7, 7, 3, 4, 5, 6), Labels = c("1", "2", "3", 
    "4", "5", "6", "7", "8", "9", "10"), Size = 10L, call = as.dist.default(m = data, 
        diag = TRUE, upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(5, 3, 6, 7, 6, 6, 7, 6, 6, 6, 5, 7, 6, 7, 6, 
    7, 7, 7, 7, 6, 6, 7, 6, 6, 7, 6, 5, 7, 7, 8, 7, 7, 6, 7, 
    3, 5, 5, 5, 7, 6, 6, 7, 1, 6, 6), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(4, 2, 2, 6, 6, 3, 8, 7, 6, 1, 2, 8, 4, 2, 8, 
    7, 7, 7, 7, 7, 7, 8, 4, 8, 7, 1, 2, 8, 2, 8, 8, 8, 8, 8, 
    2, 7, 7, 1, 8, 8, 7, 8, 2, 3, 8), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(3, 3, 4, 5, 3, 5, 6, 6, 6, 4, 2, 4, 5, 5, 5, 
    2, 7, 3, 4, 3, 5, 2, 3, 7, 6, 3, 4, 7, 5, 2, 5, 6, 8, 3, 
    7, 7, 7, 7, 7, 7, 5, 8, 2, 7, 1), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(7, 6, 7, 7, 7, 8, 8, 8, 6, 7, 6, 6, 8, 8, 8, 
    8, 8, 8, 8, 7, 8, 8, 5, 8, 8, 8, 6, 8, 8, 8, 8, 4, 5, 8, 
    2, 8, 7, 7, 8, 5, 8, 2, 7, 3, 8), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(5, 3, 4, 4, 4, 6, 3, 4, 4, 4, 5, 4, 5, 5, 4, 
    3, 4, 2, 4, 4, 4, 5, 2, 7, 4, 4, 6, 4, 2, 5, 4, 4, 4, 3, 
    3, 3, 4, 3, 2, 5, 4, 1, 4, 1, 5), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(6, 6, 7, 5, 7, 7, 6, 7, 6, 6, 6, 3, 6, 7, 7, 
    6, 7, 2, 6, 4, 6, 7, 2, 7, 4, 4, 5, 4, 2, 4, 6, 4, 2, 7, 
    3, 6, 7, 3, 7, 3, 6, 2, 6, 2, 6), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(6, 6, 7, 8, 6, 6, 7, 7, 8, 7, 6, 8, 6, 6, 7, 
    7, 8, 7, 8, 7, 8, 4, 3, 8, 7, 6, 5, 7, 7, 7, 8, 7, 7, 8, 
    2, 6, 7, 6, 8, 7, 7, 8, 1, 8, 8), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(8, 7, 7, 7, 8, 7, 7, 8, 7, 7, 7, 6, 7, 8, 8, 
    8, 8, 7, 8, 7, 7, 6, 6, 8, 7, 7, 6, 7, 7, 7, 7, 6, 7, 8, 
    6, 6, 7, 7, 7, 8, 8, 6, 5, 8, 8), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(6, 4, 6, 4, 5, 5, 6, 6, 7, 4, 5, 7, 6, 7, 5, 
    5, 8, 5, 7, 7, 4, 5, 2, 8, 5, 5, 4, 5, 5, 7, 7, 6, 3, 7, 
    2, 3, 4, 6, 6, 6, 4, 7, 3, 6, 8), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(5, 2, 6, 6, 7, 6, 7, 7, 5, 5, 4, 7, 5, 6, 7, 
    7, 7, 7, 7, 6, 6, 6, 7, 7, 6, 7, 3, 6, 5, 8, 7, 7, 7, 6, 
    3, 4, 4, 3, 7, 5, 7, 7, 0, 6, 7), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(7, 5, 5, 6, 6, 6, 6, 5, 6, 5, 5, 7, 7, 7, 6, 
    5, 7, 4, 8, 6, 8, 6, 4, 8, 5, 5, 6, 6, 5, 7, 4, 2, 4, 7, 
    1, 5, 4, 4, 6, 5, 6, 0, 2, 5, 8), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE), 
    structure(c(4, 1, 2, 7, 2, 3, 1, 1, 8, 2, 1, 8, 2, 2, 2, 
    1, 7, 1, 7, 1, 1, 0, 0, 7, 7, 2, 2, 2, 0, 8, 8, 8, 8, 8, 
    2, 1, 1, 0, 6, 2, 0, 7, 1, 8, 8), Labels = c("Brazil", "Congo", 
    "Cuba", "Egypt", "France", "India", "Israel", "Japan", "China", 
    "USA"), Size = 10L, call = as.dist.default(m = data, diag = TRUE, 
        upper = FALSE), class = "dist", Diag = TRUE, Upper = FALSE)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:36:27.517

我重写了你的权重空间函数：

```
nindividuals <- 15
weights <- sapply(nations_indscal2$cweights[1:nindividuals],diag)
plot(x=weights[1,],y = weights[2,],type ='n')
text(x=weights[1,],y = weights[2,],
     labels = seq(1,nindividuals),cex=1,col = c(rep('red',10),rep(1,6))) 
```

![在此处输入图像描述](../Images/525f6f6533f24d032b1f3a2fea674b0f.png)

# wif - 使用 SAML2（协议）身份提供程序的 ADFS 2.0 注销失败

> ID：14304155
> 
> 赞同：1
> 
> 时间：2013-01-13T13:54:57.853
> 
> 标签：wif, saml, adfs, ws-federation

我们使用 ADFS 2.0 作为联合提供者，并带有使用 SAML2 协议的身份提供者（claimsprovider）。ADFS 的依赖方使用 WS-Federation 协议。

我们现在可以请求依赖方，使用 SAML2 身份提供者登录并注销，以便 ADFS 向身份提供者发送一个注销请求，然后我们才能真正从中注销。

当我们在同一会话期间（不关闭浏览器）再次请求依赖方，使用 SAML2 身份提供者再次登录然后尝试注销时，就会出现问题。发生的情况是 ADFS 显示已注销页面，但未向身份提供者发送注销请求，因此该过程在那里停止（在 ADFS 处）。如果我们随后再次尝试登录，我们自然会在身份提供者处“弹跳”，因为我们仍然在那里登录。

在第一次注销（始终有效）之后，这就是所有后续尝试都会发生的情况。

关系和协议如下：

RP <---wsfed---> ADFS <---samlp---> IDP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:56:03.913

这取决于浏览器缓存 ADFS 服务器的凭据。用户正在重新进行身份验证，但由于浏览器会记住它们，因此不会为它们提供凭据。

注销后，他们应该看到一个浏览器窗口，通知他们关闭浏览器以安全注销。这是清除凭证缓存所必须发生的事情。

# android - Android证书存储保护？

> ID：14304162
> 
> 赞同：0
> 
> 时间：2013-01-13T13:56:13.140
> 
> 标签：android, security, certificate

我们在企业环境中使用 Android 4.0.4 ICS，我试图了解 Android 如何保护密钥库，特别是证书私钥。

它使用什么哈希算法？

有没有什么好的参考资料可以提供给我的安全架构师？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:46:16.803

如果您想了解该 API 是如何在内部实现的，请查看 Nikolay Elenkov 关于 ICS KeyChain 的文章。该系列共有三篇文章，但有关[ICS 凭证存储实现](http://nelenkov.blogspot.com/2011/11/ics-credential-storage-implementation.html)的文章会告诉您文件是如何存储在磁盘上的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:18:58.230

`keytool`是用于管理密钥库和相关 X.509 证书的标准 Java 工具。有关更多信息，请参阅[文档](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/keytool.html)；更具体地说，关于支持的算法的部分：

> 默认密钥对生成算法是“DSA”。签名算法来源于底层私钥的算法：如果底层私钥是“DSA”类型，默认签名算法是“SHA1withDSA”，如果底层私钥是“RSA”类型，默认签名算法是“MD5withRSA”。生成 DSA 密钥对时，密钥大小必须在 512 到 1024 位的范围内，并且必须是 64 的倍数。任何算法的默认密钥大小都是 1024 位。

# iphone - 绘图线位于核心绘图中的 X 轴下方

> ID：14304163
> 
> 赞同：1
> 
> 时间：2013-01-13T13:56:16.390
> 
> 标签：iphone, ios, objective-c, cocoa-touch, core-plot

我改变了绘图的外观，现在绘图线意外地位于 X 轴下方。问题看起来像这样（注意轴下方的黑线）：

![在此处输入图像描述](../Images/a8b1427f7d48db73d8b6fe24b0e7836b.png)

我怎样才能摆脱它？我已经改变了这样的情节线：

```
aaplPlot.interpolation = CPTScatterPlotInterpolationCurved; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:37:59.663

绘图不会在绘图区域之外绘制。您可以通过在绘图区域框架上设置填充来控制其大小，以将绘图区域的边缘向内推。您还需要调整绘图空间的绘图范围以保持相同的外观。

# javascript - 动画到特定点

> ID：14304164
> 
> 赞同：1
> 
> 时间：2013-01-13T13:56:16.560
> 
> 标签：javascript, html5-canvas, kineticjs

```
var stage = new Kinetic.Stage({
   container: 'container',
   width: 578,
   height: 200
});
var layer = new Kinetic.Layer();

var Circle = new Kinetic.Circle ({
     x: 100,
     y: 100,
     radius: 10,
     fill: 'green',
     stroke: 'black',
     strokeWidth: 5
});

layer.add(Circle);
stage.add(layer);

var a = 1;
var anim = new Kinetic.Animation(function(frame) {
     Circle.setX(frame.time * 350 / 1000 + 100);
 }, layer);

anim.start(); 
```

如何在特定点或坐标处停止动画？像动画到 x=700 然后停止。我想要一个能够用一个按钮动画的圆圈来协调 x=700，停止然后停止，然后再用另一个按钮返回或向下。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:52:08.253

有2种方式，
1。

```
var anim = new Kinetic.Animation(function(frame) {
    if(Circle.getX() < 700)
       Circle.setX(frame.time * 350 / 1000 + 100);
    else 
       this.stop();
}, layer); 
```

或
2.`Kinetic.Transition` [在此处使用检查](http://kineticjs.com/docs/symbols/Kinetic.Transition.php)

# iphone - UITextView 中不必要的换行符

> ID：14304165
> 
> 赞同：3
> 
> 时间：2013-01-13T13:56:18.973
> 
> 标签：iphone, ios, cocoa-touch, cocoa, uitextview

我正在以编程方式向 UITextView 写入逗号分隔的字符串。示例：NSString* str = @"cat,dog,big dog,kitten"。

在 [textView setText:str]; 我得到的结果是：猫，狗，大
狗，小猫。

我不明白为什么空间被转换为换行符。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:12:06.667

空格被转换为换行符，因为文本不适合一行。无法禁用或更改此换行模式。但是你可以增加文本视图的宽度。

# ios - 堆叠的 UIViewControllers 中的 UITextView 委托问题

> ID：14304167
> 
> 赞同：0
> 
> 时间：2013-01-13T13:56:33.743
> 
> 标签：ios, objective-c, uiviewcontroller, delegates, uitextview

我想在UIViewController***菜单上堆叠一个 UIViewController******板***，以创建一个类似 Facebook 的侧边菜单。这个菜单应该包含一个 UITextView。

 *到目前为止，我可以将 Board View 侧向拖动，菜单出现在其下方。伟大的。但是菜单内的 UITextView 存在问题。当我单击它时，应用程序会因 BAD_EXC... 异常而崩溃。这似乎是 UITextView 代表的问题。

这是我目前的设置方式。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    //Board
    board = [[BoardViewController alloc] init];
    [self.window setRootViewController:board];

    //Menu
    MenuViewController* menu = [[MenuViewController alloc]init];
    menu.textView.delegate = menu;
    [self.window addSubview:menu.view];

    //Window
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

注意：当我将 textView 委托设置为*board*并在那里实现委托方法时，它可以工作，但这对我来说似乎是实现菜单 textview 方法的错误位置。菜单的委托应该在菜单类本身中。

如何将菜单的 textView 委托正确设置为菜单类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:11:33.813

```
//Menu
MenuViewController* menu = [[MenuViewController alloc]init];
menu.textView.delegate = menu;
[self.window addSubview:menu.view]; 
```

然后，噗：菜单视图控制器不再被引用，并且被 ARC 释放。该视图由窗口保留，因此它看起来一切正常，直到文本视图尝试将其委​​托消息发送给早已被释放的对象。这是你`EXC_BAD_ACCESS`崩溃的原因。

简单、宽松的解决方案是在您的应用程序委托中为菜单视图控制器定义一个属性。

```
@property (nonatomic, strong) MenuViewController * menu; 
```

然后将菜单存储在那里

```
//MenuViewController* menu = [[MenuViewController alloc]init];
//becomes
self.menu = [[MenuViewController alloc]init]; 
```

正确的解决方案和我推荐的解决方案是您查找[UIViewController 容器](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)并实现您自己的自定义视图控制器容器，该容器负责处理这种特殊的视图控制器排列。

简要概述：您将有一个`UIViewController`具有两个属性的子类，一个用于板视图控制器，一个用于菜单视图控制器。它将有一个滚动视图，并负责滑动动作和任何需要从板传递到菜单的通信，反之亦然。这个容器还负责加载板子和菜单视图控制器，并将它们的视图插入到它自己视图中的正确位置。如果板视图控制器需要换成另一个板，那么容器也将对此负责。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:02:35.880

您通常可以通过将委托连接从 textField 拖动到界面构建器中的视图控制器，或以编程方式在菜单视图控制器的 viewDidLoad 中进行设置。你是对的，你的应用程序委托不应该与这个过程有任何关系。*

# java - 在 Eclipse 中预览长连接字符串

> ID：14304175
> 
> 赞同：1
> 
> 时间：2013-01-13T13:58:04.073
> 
> 标签：java, android, eclipse

如何预览长字符串（SQL 查询），例如（Eclipse Juno 中 Android 开发的实际代码）：

```
String insert_reminder = "INSERT INTO REMINDERS (NAME, DESCRIPTION, REMIND_TIMESTAMP, REMIND_TYPE_ID, STATE, STATUS_ID, IMAGE_ID, REMIND_RINGTONE) "
                        + "VALUES (\'"
                        + data.getStringExtra("remind_name")
                        + "\',\'"
                        + data.getStringExtra("remind_description")
                        + "\', "
                        + data.getLongExtra("remind_timestamp", 0)
                        + ", 1, "
                        + data.getIntExtra("remind_state", 1)
                        + ", 1,"
                        + data.getIntExtra("image_id", 1)
                        + ",\'"
                        + data.getStringExtra("remind_ringtone") + "\'" +
                        ")"; 
```

我想查看完整的字符串，即使没有数据。例如上面：

```
"INSERT INTO REMINDERS (NAME, DESCRIPTION, REMIND_TIMESTAMP, REMIND_TYPE_ID, STATE, STATUS_ID, IMAGE_ID, REMIND_RINGTONE) VALUES ('data.getStringExtra("remind_name")', 'data.getStringExtra("remind_description")', data.getLongExtra("remind_timestamp", 0), 1, data.getIntExtra("remind_state", 1), 1, data.getIntExtra("image_id", 1), 'data.getStringExtra("remind_ringtone")')" 
```

我需要这个来检查 SQL 查询中的逗号。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:31:33.023

*   在特定行设置断点
*   在调试模式下启动您的应用程序并继续，直到它在断点处停止
*   选择字符串并按 ctrl+shift+i（检查）

# php - 如何在javascript中传递数组值

> ID：14304183
> 
> 赞同：0
> 
> 时间：2013-01-13T13:59:30.113
> 
> 标签：php, javascript

我想在 javascript 中传递 php 值。我在 javascript 上运行查询并应用 if 语句和 while 数组。但总是显示空结果。我找不到问题。任何人请帮助我。谢谢

```
<?php
session_start();
$SUserName=$_SESSION['view'];
include 'dbconnect.php';

$query="select * from user_permission where username='$SUserName'";
$result=mysql_query($query) or die (mysql_error());

?>

        <script type="text/javascript">

        d = new dTree('d');
        d.add(0,-1,'Dhuronto');
        <?php
                if($SUserName=='sumon@dhuronto.com')
                    {
                    echo "d.add(1,0,'Admin','blank.php', 'Admin', 'main');";

                    }
                    else {
                        while ($row = mysql_fetch_array($result))
                            {
                     echo "d.add('$id','$pid','$node','$url', '$node', 'main');";
                            }
                    }

                ?>

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:23:42.307

您正在使用列的名称，就好像它们是变量一样。您需要从数组中获取它们：

```
while ($row = mysql_fetch_array($result))
{
    echo "d.add('{$row['id']}','{$row['pid']}','{$row['node']}','{$row['url']}', '{$row['node']}', 'main');";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:20:18.870

'$id'、'$pid'、'$node'、'$url'、'$node' 来自哪里？

```
while ($row = mysql_fetch_array($result))
{
   echo "d.add('$id','$pid','$node','$url', '$node', 'main');";
} 
```

你的意思

```
while ($row = mysql_fetch_array($result))
{
   echo "d.add('$row[id]','$row[pid]','$row[node]','$row[url]', '$row[node]', 'main');";
} 
```

注意 - 我自己不会使用上述语法，这是您唯一可以将 vars 编写为`$row[id]`. 我更喜欢

```
echo "d.add('" . $row['id']. "','" . $row['pid']. "'... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T14:55:49.553

您的代码不起作用，因为您没有为`$id`、`$pid`等定义值。也就是说，假设您的文本是 UTF-8 编码的，您可以使用[json_encode()](http://php.net/manual/en/function.json-encode.php)对 PHP 数据类型进行正确的 JavaScript 编码：

```
while ($row = mysql_fetch_array($result))
{
    // I don't know your database schema, so this could be wrong
    $args = array(
        $row['id'], 0, htmlspecialchars($row['username']),
        'blank.php', '', 'main'
    );

    // echo 'd.add.apply(d,' . json_encode($args) . ');';
    echo 'd.add(' . implode(',', array_map('json_encode', $args)) . ');';
} 
```

请注意，dTree 是一种过时的 JavaScript 库，已经落后于当前的最佳实践。它[最后一次更新](http://destroydrop.com/javascripts/tree/)是在 2003 年！您可能想研究更新、更好的替代方案，例如[https://stackoverflow.com/questions/1710114/jquery-tree-plugin](https://stackoverflow.com/questions/1710114/jquery-tree-plugin)中提到的替代方案。

# javascript - JavaScript - 浏览器选项卡切换的时间间隔问题

> ID：14304186
> 
> 赞同：1
> 
> 时间：2013-01-13T13:59:44.690
> 
> 标签：javascript, tabs, intervals, clearinterval

我有一个简单的脚本，可以淡入淡出一些图像。在我切换到另一个选项卡然后切换回来之前，它工作得非常好。切换回来后似乎运行动画的间隔没有被清除并且`animateFading`功能继续运行。

为什么会发生，选项卡切换如何影响脚本？我怎样才能让它正常工作？谢谢！

真实代码：

```
var img0 = document.getElementById("image0");
var img1 = document.getElementById("image1");
var img2 = document.getElementById("image2");

var imgs = [img0,img1,img2];

var intervalFading;
var intervalAnimate;

var imgThis = 0;
var imgNext = 1;

var fadeIn = 0;
var fadeOut = 1;

var start;

function animateFading() {
    fadeIn+=0.1;
    fadeOut-=0.1;
    imgs[imgThis].style.opacity = fadeOut;
    imgs[imgNext].style.opacity = fadeIn;

    if (fadeIn >= 1) {
        clearInterval(intervalAnimate);

        if (imgNext < 2) {
            imgNext++;
        } else {
            imgNext = 0;
        }

        if (imgThis < 2) {
            imgThis++;
        } else {
            imgThis = 0;
        }

        fadeIn = 0;
        fadeOut = 1;
    }

}

function fading() {
    intervalAnimate = setInterval(animateFading,50);
}

function startFading() {
    start = setInterval(fading, 3000);
}

window.addEventListener('load', startFading); 
```

**解决方案：**

```
var startedFading = false;

function startFading() {
    if (!startedFading) {
        startedFading = true;
        startFading = setInterval(fading, 5000);
        }
}

function stopFading() {
    startedFading = false;
        clearInterval(startFading);
}

window.addEventListener('focus', startFading);      
window.addEventListener('blur', stopFading); 
```

布尔值用于 Chrome，因为它会触发两次

```
window.addEventListener('focus', startFading); 
```

&

```
window.addEventListener('blur', stopFading); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:03:17.217

大多数浏览器都具有将内存使用容量重定向到唯一活动选项卡（当前正在查看）的功能。因此，当您切换当前选项卡时，`setInterval`和`setTimeout`时间都会受到影响（如果您使用的是 Google Chrome，您可以通过按 Shift+Esc 来查看每个选项卡的内存使用情况。当前选项卡将使用最多 25%，而其余的不超过 5%）

# php - 在 Amazon Marketplace API 请求上出现内部错误

> ID：14304187
> 
> 赞同：8
> 
> 时间：2013-01-13T13:59:46.437
> 
> 标签：php, api, curl, amazon, amazon-mws

我已经下载了 Amazon 的 Marketplace SDK，并且正在尝试示例目录中的一个示例。但是，每当我尝试时，我都会收到以下详细信息的异常：

```
Caught Exception: Internal Error
Response Status Code: 0
Error Code: 
Error Type: 
Request ID: 
XML: RequestId: , ResponseContext: , Timestamp: 
ResponseHeaderMetadata: 
```

我也使用 SSL 启用了 CURL。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-13T14:37:54.850

此答案供将来参考。有关深入的故障排除，请参阅对该问题的评论。

空响应表示与 Amazon 服务器的连接失败。在这种情况下，HTTP 工作正常，但 HTTPS 没有。由于关闭`CURLOPT_SSL_VERIFYPEER`cURL 设置解决了该问题，亚马逊服务器似乎没有使用有效的 SSL 证书。

`CURLOPT_SSL_VERIFYPEER`打开检查请求的主机是否具有有效证书，如果没有则让 cURL返回`false`。关闭时`CURLOPT_SSL_VERIFYPEER`，接受无效证书（例如，自签名）并返回常规响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-30T11:45:02.823

备查。在新版本的 SDK 中，client.php 中引用的选项如下

```
private function getDefaultCurlOptions() {
    return array (
      CURLOPT_POST => true,
      CURLOPT_USERAGENT => $this->config['UserAgent'],
      CURLOPT_VERBOSE => true,
      CURLOPT_HEADERFUNCTION => array ($this, 'headerCallback'),
      CURLOPT_RETURNTRANSFER => true,
      CURLOPT_SSL_VERIFYPEER => true,
      CURLOPT_SSL_VERIFYHOST => 2
    );
  } 
```

环境

```
CURLOPT_SSL_VERIFYPEER => false, 
```

在我的情况下成功了。但是，由于我不是安全专家，因此从这个角度没有建议。至少它的工作，你可能不会像我一样失去一整天。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-27T16:32:45.880

我遇到了与亚马逊非常相似的连接问题。它是与 Amazon php api 捆绑在一起的示例文件，其中包含以下配置数组：

```
$config = array (
  'ServiceURL' => $serviceUrl,
  'ProxyHost' => null,
  'ProxyPort' => -1,
  'MaxErrorRetry' => 3,
); 
```

如果这被复制而不被修改

```
'ProxyPort' => -1, 
```

将导致尝试通过代理端口 -1 进行连接，这当然会失败（通过检查 curl 错误跟踪问题）。我希望这有帮助。

# java - Android min3d 崩溃

> ID：14304188
> 
> 赞同：1
> 
> 时间：2013-01-13T13:59:56.280
> 
> 标签：java, android, min3d

我尝试使用 min3d 在我的应用程序中启动 3D 对象，但它崩溃了。我遵循了这个教程：http: [//www.mat-d.com/site/using-min3d-for-android-frequently-asked-questions-common-texture-issues-blender-import/](http://www.mat-d.com/site/using-min3d-for-android-frequently-asked-questions-common-texture-issues-blender-import/)

这是代码：

```
package com.g171.zaloeil;

import min3d.core.Object3dContainer;
import min3d.core.RendererActivity;
import min3d.parser.IParser;
import min3d.parser.Parser;
import min3d.vos.Light;

public class Vue3D extends RendererActivity {

private Object3dContainer faceObject3D;

/** Called when the activity is first created. */
@Override
   public void initScene()
   {
    scene.lights().add(new Light());
    scene.lights().add(new Light());

    Light myLight = new Light();
    myLight.position.setZ(150);
    scene.lights().add(myLight);

    IParser myParser = Parser.createParser(Parser.Type.OBJ, getResources(), "com.g171.zaloeil:raw/cle1_obj",true);
    myParser.parse();

    faceObject3D = myParser.getParsedObject();
    faceObject3D.position().x = faceObject3D.position().y = faceObject3D.position().z = 0;
    faceObject3D.scale().x = faceObject3D.scale().y = faceObject3D.scale().z = 0.009f;
// Depending on the model you will need to change the scale
    faceObject3D.scale().x = faceObject3D.scale().y = faceObject3D.scale().z = 0.009f;

    scene.addChild(faceObject3D);

   }

@Override
public void updateScene() {
    faceObject3D.rotation().x += 0.5;
    faceObject3D.rotation().z += 1;
}
} 
```

这是 logcat ：

```
01-13 14:57:35.904: D/dalvikvm(12402): Late-enabling CheckJNI
01-13 14:57:36.044: D/dalvikvm(12402): GC_FOR_ALLOC freed 77K, 3% free 7491K/7720K, paused 22ms, total 22ms
01-13 14:57:36.054: I/dalvikvm-heap(12402): Grow heap (frag case) to 10.458MB for 3145744-byte allocation
01-13 14:57:36.094: D/dalvikvm(12402): GC_FOR_ALLOC freed 1K, 3% free 10562K/10796K, paused 37ms, total 37ms
01-13 14:57:36.134: D/dalvikvm(12402): GC_CONCURRENT freed <1K, 3% free 10562K/10796K, paused 9ms+2ms, total 45ms
01-13 14:57:36.194: D/dalvikvm(12402): GC_FOR_ALLOC freed <1K, 3% free 10562K/10796K, paused 23ms, total 23ms
01-13 14:57:36.244: I/dalvikvm-heap(12402): Grow heap (frag case) to 15.771MB for 5571960-byte allocation
01-13 14:57:36.284: D/dalvikvm(12402): GC_FOR_ALLOC freed 0K, 2% free 16003K/16240K, paused 33ms, total 33ms
01-13 14:57:36.324: D/dalvikvm(12402): GC_CONCURRENT freed <1K, 2% free 16004K/16240K, paused 12ms+5ms, total 46ms
01-13 14:57:36.464: D/libEGL(12402): loaded /system/lib/egl/libEGL_tegra.so
01-13 14:57:36.474: D/libEGL(12402): loaded /system/lib/egl/libGLESv1_CM_tegra.so
01-13 14:57:36.484: D/libEGL(12402): loaded /system/lib/egl/libGLESv2_tegra.so
01-13 14:57:36.504: D/OpenGLRenderer(12402): Enabling debug mode 0
01-13 14:57:39.184: I/Min3D(12402): ManagedLightList.reset()
01-13 14:57:39.234: I/Min3D(12402): Renderer.onSurfaceCreated()
01-13 14:57:39.234: V/Min3D(12402): RenderCaps - openGLVersion: 1.1
01-13 14:57:39.234: V/Min3D(12402): RenderCaps - maxTextureUnits: 2
01-13 14:57:39.234: V/Min3D(12402): RenderCaps - maxTextureSize: 2048
01-13 14:57:39.234: V/Min3D(12402): RenderCaps - maxLights: 8
01-13 14:57:39.234: I/Min3D(12402): Scene.init()
01-13 14:57:39.234: I/Min3D(12402): ManagedLightList.reset()
01-13 14:57:39.244: D/Min3D(12402): Start parsing object com.g171.zaloeil:raw/cle1_obj
01-13 14:57:39.244: D/Min3D(12402): Start time 1358085459252
01-13 14:57:39.254: W/ResourceType(12402): No package identifier when getting value for resource number 0x00000000
01-13 14:57:39.254: W/dalvikvm(12402): threadid=12: thread exiting with uncaught exception (group=0x40b99930)
01-13 14:57:39.264: E/AndroidRuntime(12402): FATAL EXCEPTION: GLThread 493
01-13 14:57:39.264: E/AndroidRuntime(12402): android.content.res.Resources$NotFoundException: Resource ID #0x0
01-13 14:57:39.264: E/AndroidRuntime(12402):    at android.content.res.Resources.getValue(Resources.java:1014)
01-13 14:57:39.264: E/AndroidRuntime(12402):    at android.content.res.Resources.openRawResource(Resources.java:939)
01-13 14:57:39.264: E/AndroidRuntime(12402):    at android.content.res.Resources.openRawResource(Resources.java:921)
01-13 14:57:39.264: E/AndroidRuntime(12402):    at min3d.parser.ObjParser.readMaterialLib(ObjParser.java:175)
01-13 14:57:39.264: E/AndroidRuntime(12402):    at min3d.parser.ObjParser.parse(ObjParser.java:107)
01-13 14:57:39.264: E/AndroidRuntime(12402):    at com.g171.zaloeil.Vue3D.initScene(Vue3D.java:25)
01-13 14:57:39.264: E/AndroidRuntime(12402):    at min3d.core.Scene.init(Scene.java:254)
01-13 14:57:39.264: E/AndroidRuntime(12402):    at min3d.core.Renderer.onSurfaceCreated(Renderer.java:75)
01-13 14:57:39.264: E/AndroidRuntime(12402):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1494)
01-13 14:57:39.264: E/AndroidRuntime(12402):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240) 
```

有人知道可能缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:16:09.967

找不到资源异常。

您正在引用尚未添加到包中的资源：

```
android.content.res.Resources$NotFoundException: Resource ID #0x0 
```

具体来说：

```
01-13 14:57:39.264: E/AndroidRuntime(12402):    at com.g171.zaloeil.Vue3D.initScene(Vue3D.java:25) 
```

Vue3D.java:25 是你的问题（第 25 行）。您正在引用项目中不存在的资源 (R.id.xxxx)。

# sharepoint - 检查从 ASP.NET 登录到 SharePoint Online 的用户

> ID：14304190
> 
> 赞同：0
> 
> 时间：2013-01-13T14:00:30.300
> 
> 标签：sharepoint

如何检查用户是否`SharePoint Online`已从 Web 应用程序登录？

一种方法是在本地机器中搜索 cookie `SharePoint`，但它会引发安全问题。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:38:08.613

我找到了解决方案，这正是来自`jQuery.getScript()`

使用返回字符串的函数，将一个放在网页中，一个放在`.js`文件中，然后上传到 SPO 文档库。例如：

这个函数放在本地网页中：

```
function whereAmI(){
    return "local";
} 
```

此函数保存在`xxx.js`文件中并上传到 SPO：

```
function whereAmI(){
    return "remote"; 
```

请注意这两个函数具有相同的名称。

然后在本地网页中，插入以下代码：

```
jQuery.getScript("https://xxx.sharepoint.com/sites/xxx/DocLib/xxx.js", function () {
            if (whereAmI() == "local") // if not logged in, getScript failed to get xxx.js, so the page call local whereAmI
                // do something;
        }); 
```

就是这样。

# php - 如何以最佳方式保留 mysql 字段或 php 变量中的文本？

> ID：14304192
> 
> 赞同：1
> 
> 时间：2013-01-13T14:00:39.497
> 
> 标签：php, mysql, diff

我正在使用 php/mysql，并希望保留字段中已经存在的文本，确保附加（仅）出现的任何更改。

例如，如果mysql中的文本字段包含“原始文本123”，而php脚本有一个新文本“这是新文本和原始文本”，我需要确保我没有丢失“123”从原文。新存储的值应该是“这是新文本和原始文本123”。

我在想我可以使用[php diff library](https://github.com/nuxodin/diff_match_patch-php#readme)，但这可能有点矫枉过正，或者可能有更好的选择。

在大多数情况下，我将收到诸如“这是新文本和原始文本 123”之类的更改，因此我需要一种方法来比较传入更改末尾是否存在“原始文本 123”，这意味着我可以接受改变。但是，之后的更改可能是“新文本 2 和原始文本 123”。在这种情况下，我需要查看现有文本，并结合传入的文本，这将导致“这是新文本 2 这是新文本和原始文本 123”，所以我不认为我可以做一个简单的比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:07:00.293

由于您需要自定义字符串格式化，根据您的应用程序需要，我建议您从 mysql 获取字符串，然后手动检查您的字符串，查找搜索到的字符串并根据需要对其进行格式化，然后更新记录在你的 mysql 数据库中。所有这些都可以在您的 php 脚本中完成。

这是一个示例，但可能会根据您的需要有所不同： 注意：此示例假设您从提供 2 个变量的网页调用 php 页面：userId 和要写入的描述。php页面假设写在一个db上，其中字段userId是表的键，唯一要写的字段名为description

添加数据.php

```
 <?php
 //first of all define a function to open db and get your data
  function searchIdOnDb($id)
  {
   //connect to your database
   mysql_connect("localhost","root","root");
   //specify database
   mysql_select_db("yourDBname") or die;
   //Build SQL Query
   $id = mysql_real_escape_string($id);        
   $query = "select * from yourDBtable where userId ='" . $id . "'";
   $queryResult=mysql_query($query);
   return $queryResult;
  }
  //then define a function to update your DB record
  function setRecordOnDb($id, $description)
  {
   //the connection will be still active, then it is not needed to redo it 
   $id = mysql_real_escape_string($id);        
   $description = mysql_real_escape_string($description);        
   if ($description=="") $description=" ";
   $query="UPDATE yourDBtable SET description='" . $description . "' WHERE userId='" . $id . "'";    
   $queryResult=mysql_query($query);
   return $queryResult;
  }   

  //ok, we are ready to start. first of all get your variable from the webpage
  $me=$_GET["userID"];//get user id
  $description=$_GET["description"];//get data to write
  //if no data, exit
  if ($me==null)
  {
   die;
  }

  //if no data, exit
  if ($description==null)
  {
   die;
  }

  //search in db
  $result=searchIdOnDb($me);
  $numrows=mysql_num_rows($result);
  if ($numrows == 0) { //if user is not in the db exit
   die;
  } else { 
   //the user is in the db, let's generate new description and update it
   //get description from the record
   $row = mysql_fetch_assoc($result);
   $originalDescription= $row["description"] ;
   //here compare your string description with the string originalString in order
   //to obtain the newDescription string
   //just for test i will append the two strings, but you can make your search inside the strings and format it according to your needs
   $newDescription=$originalDescription . " " . $description;
   //update record
   $setRecord  = setRecordOnDb($me, $newDescription);

  }

  if ($setRecord==FALSE ) {
   //error during write, send me email 
   $to = "yourEmail@yourProvider.com";
   $subject = "Error in file addData.php";
   $body = "Variables: \n me=" . $me . " \n newDescription=" . $newDescription .  " \n originalDescription=" . $originalDescription . " \n description=" . $description ;
   mail($to, $subject, $body);
   die;
  }else{
   //write ok, return ok
   die("ok");
  }

 ?> 
```

# c++ - 为什么我的虚函数没有被调用？

> ID：14304195
> 
> 赞同：1
> 
> 时间：2013-01-13T14:00:51.680
> 
> 标签：c++

我在使用虚拟方法时遇到问题。当我打电话`f`时它不起作用。为什么？

```
#include <iostream>

struct A {
   virtual void f() const { std::cout << "In A"; }
   virtual ~A() {};
};

struct B : A {
   void f() const { std::cout << "In B"; }
};

int main()
{
   A* a = new A();

   B* b = dynamic_cast<B*>(a);

   (*b).f();

   delete a;
} 
```

它根本不打印任何东西，我也没有收到任何错误。我做错什么了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T14:02:03.093

问题是您没有检查重新调整的指针是否为`NULL`.

`dynamic_cast`告诉您所指向的实际对象`a`是否属于 type `b`，显然不是。在这种情况下，它会返回一个`NULL`.

基本上，您正在取消引用一个`NULL`指针，导致一个**未定义的行为**，不幸的是您不会崩溃。

当您使用语言提供的功能时，应按照标准规定的方式使用它。使用`dynamic_cast`保证`NULL`检查返回的指针。

您的指针`a`实际上应该指向派生类对象`b`。你需要：

```
 A* a = new B();
   B* b = dynamic_cast<B*>(a); 
```

此外，您的代码**必须**检查返回的指针：

```
 if(b != NULL)
       (*b).f(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-13T14:02:39.863

这一行：

```
B* b = dynamic_cast<B*>(a); 
```

给你一个空指针，因为`a`它实际上并不指向 a `B`。

下一行是未定义的行为。（你“幸运”什么都没发生。）

# php - 从第二个表返回搜索结果

> ID：14304202
> 
> 赞同：1
> 
> 时间：2013-01-13T14:01:44.673
> 
> 标签：php, mysql, sql, select

我有两张桌子，化学品和消耗品。“化学品”存储有关化学品的所有一般信息（配方、安全性等），“消耗品”存储有关各个房间的库存和位置等信息。常见字段是“CAS”（化学文摘服务注册号 - 组合数字和连字符）。

我想搜索“化学品”表并从两个表中返回信息

问题 #1 - 我应该将它们加入数据库 (Navicat) 还是仅通过 php 查询？

问题 #2 - 为什么以下代码不起作用？

```
$item = $_POST['item'];

$chem = mysql_query("
SELECT * 
FROM Chemicals
INNER JOIN Consumables 
ON Chemicals.Name_Chem1 = '%$item%'");

while ($row = mysql_fetch_array($chem)){

echo
"<table border='0'>
<tr class='content'>
<th>Name</th>
<th>Quantity</th>
<th>GHS Code</th>
<th>Formula</th>
<th>CAS</th>

</tr>";

while($row = mysql_fetch_array($chem))
{

 echo "<tr>";

echo "<td class='content'>" . $row['Consumables.Name'] . "</td>";
echo "<td class='content'>" . $row['Consumables.Quantity'] . "</td>";
echo "<td class='content'>" . $row['Chemicals.GHS_1'] . "</td>";
echo "<td class='content'>" . $row['Chemicals.Formula'] . "</td>";
echo "<td class='content'>" . $row['CAS'] . "</td>";
echo "</tr>";
}
echo "</table>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:03:52.657

A1.) 加入他们`MySQL`。

A2.) 由于您提到它们的公共列称为，因此您应该在子句中`CAS`定义它们，例如。`ON`

```
SELECT  a.*, b.*
FROM    Chemicals a
        INNER JOIN Consumables b
            ON a.CAS = b.CAS
WHERE   a.Name_Chem1 = '%$item%' 
```

作为旁注，`SQL Injection`如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用 PreparedStatements，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# php - 无法使用 parse_ini_file 从 php ini 文件中调用数组值

> ID：14304204
> 
> 赞同：0
> 
> 时间：2013-01-13T14:01:54.563
> 
> 标签：php

我尝试使用**parse_ini_file从 php ini 文件中读取参数**

这是我的代码

```
$param_array=parse_ini_file("test.ini");
print $param_array[0];
print $param_array[1]; 
```

上面的代码什么都不返回

test.ini 文件包含，

```
[names]
me = Robert
you = Peter

[urls]
first = "http://www.example.com"
second = "http://www.w3schools.com" 
```

现在我需要打电话给罗伯特和彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:13:04.677

如果您宁愿查阅[手册页](http://php.net/manual/en/function.parse-ini-file.php)而不是[w3fools](http://w3fools.com)，您会看到一个可靠的示例，其中显示返回的数组是关联的，也就是说，属性的名称是数组的键。
所以而不是

```
$param_array[0] 
```

你应该使用

```
$param_array['me'] 
```

访问“罗伯特”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T14:13:11.300

`parse_ini_file`返回一个关联数组。您正在尝试使用数字索引访问数组中的字段，但未定义它们。

尝试使用您在 ini 文件中提供的名称作为键访问这些字段：

```
echo $param_array['me']; // will yield Robert 
```

有用的提示：调查数组和变量的结构，找出它们的`print_r`样子`var_dump`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T14:12:50.750

以下代码有效！

```
print $param_array["me"];
print $param_array["you"]; 
```

# perl - 为什么这个 Perl 函数似乎只处理它的一些参数？

> ID：14304210
> 
> 赞同：0
> 
> 时间：2013-01-13T14:02:38.120
> 
> 标签：perl, arguments, argument-passing

为什么

```
my $i=0;
my @arr=();

sub readall {
    foreach (@_) {
        $arr[$i] = shift @_;
        $i++;
    }
}

readall(1, 2, 3, 4, 5);
print "@arr" 
```

和

```
my $i=0;
my @arr=();

sub readall {
    foreach (@_) {
        $arr[$i] = shift @_;
        print $arr[$i];
        $i++;
    }
}

readall(1, 2, 3, 4, 5); 
```

只打印三个参数到`readall`?

为什么这个看起来应该表现相同的函数处理所有五个参数？

```
sub readall {
    foreach (@_) {
        print $_;
    }
}

readall(1, 2, 3, 4, 5); 
```

这也读取所有五个（但确实以不同的原则运作）：

```
my @arr=();

sub readall {
    push(@arr, @_);
}

readall(1, 2, 3, 4, 5);
print "@arr" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T14:08:38.047

在同一个数组上使用`foreach`and可能会引起混淆。`shift`两个失败的都使用它，两个都没有..不要。

只是更改`shift @_`以`$_`修复它。

发生这种情况是因为您在迭代时正在缩短数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T14:10:03.483

您遍历 中的所有参数`@_`，同时移动`@_`以使其更短：

`sub readall {foreach (@_) {$arr[$i]=shift @_ ....}`

让这里的优秀列表解释在这种情况下的预期，记录的内容以及为什么不应该这样做。对我来说，这在逻辑上是错误的，没有任何意义。也许`s/foreach/while/`更惯用（至少，它有效）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-13T14:10:07.353

每次移动阵列时，它都会变短......所以你不是在整个阵列上操作，它会提前停止。您可以通过在代码中添加一行来看到这一点：

```
perl -wlae 'my $i=0; my @arr=(); sub readall {foreach (@_) {$arr[$i]=shift @_; $i++; print @_;}} readall(1,2,3,4,5); print "@arr"'

2345
345
45 
```

我想你可以从这里弄清楚。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-13T14:11:05.993

`shift @_`inside of`foreach (@_)`是错误的，摆脱它可以修复数组遍历：

```
$ perl -wlae 'my $i=0; my @arr=(); sub readall {foreach (@_) {$arr[$i]=$_[$i]; $i++}} readall(1,2,3,4,5); print "@arr"'
1 2 3 4 5 
```

`foreach`引用`$_`数组的每个元素工作：

```
$ perl -wlae 'my @arr=(1..5);foreach (@arr) { $_ *= 2 }; foreach (@arr) { print }'
2
4
6
8
10 
```

`unshift`因此，使用/取消引用元素`pop`会使一切变得混乱。

# mysql - 加载带有未知系统变量错误的数据文件

> ID：14304213
> 
> 赞同：0
> 
> 时间：2013-01-13T14:02:43.417
> 
> 标签：mysql, csv, import, load-data-infile, date-conversion

我一直在尝试使用 load data infile 过程将数据从 csv 文件加载到 mysql，尽管由于 set 语句中的未知变量错误，我无法做到这一点。

```
LOAD DATA LOCAL INFILE 'D:\\Bets\\BD\\tables\\match.csv' 
INTO TABLE `bets`.`match` 
FIELDS TERMINATED BY ';' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '"' 
LINES TERMINATED BY '\r\n' 
(`idMatch`, `idChampionship`, @date, `homeTeam`, `awayTeam`, `homeTeamGoals`, `awayTeamGoals`, `matchType` );

SET matchDate = STR_TO_DATE(@date, 'YYYY-MM-DD') 
```

要导入的日期字段格式为 2011-08-07。

运行查询时给出的错误是：SQL 错误 (1193)：未知系统变量“matchDate”。

任何帮助都会受到欢迎......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T02:11:27.780

什么`SET matchDate`时候应该是这样的：

```
SET matchDate = STR_TO_DATE(@date, '%Y-%m-%d'); 
```

代替`SET matchDate = STR_TO_DATE(@date, 'YYYY-mm-dd');`

您可以[在此处](http://www.mysqltutorial.org/mysql-str_to_date/)阅读MySQL **STR_TO_DATE**函数的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-31T09:47:33.307

我偶然发现了同样的问题。SET 行必须是 LOAD DATA INFILE ... 语句的一部分。在您的代码中，列表达式以分号结尾，分号在 LOAD DATA INFILE 完成后执行 SET 命令。语句完成后，语句中创建的用户变量不再存在。正确的说法如下，

```
LOAD DATA LOCAL INFILE 'D:\\Bets\\BD\\tables\\match.csv' 
INTO TABLE `bets`.`match` 
FIELDS TERMINATED BY ';' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '"' 
LINES TERMINATED BY '\r\n' 
(`idMatch`, `idChampionship`, @date, `homeTeam`, 
 `awayTeam`,`homeTeamGoals`, `awayTeamGoals`, `matchType`)
SET matchDate = STR_TO_DATE(@date, 'YYYY-MM-DD'); 
```

# javascript - 获取宽度的绑定处理程序

> ID：14304218
> 
> 赞同：1
> 
> 时间：2013-01-13T14:03:44.437
> 
> 标签：javascript, html, knockout.js

我更新了小提琴。在这个[小提琴](http://jsfiddle.net/DbJBs/6/)中，我有 3 个 div。在中间的 div 中有循环出来的文本。当 div 很小时，我想取出该项目并将其放入另一个绑定到这样的选择类型的 observableArray 中。

```
<div data-bind="collection:{items:itemsThatFit,itemsDontFit:itemsDontFit">
   <span data-bind="text:$data"></span>
</div>

<select data-bind="visible:itemsDontFit.length>0, options: itemsDontFit"></select> 
```

在小提琴中，当您添加许多不适合的内容时，我希望将其移动到 itemsDontFit 数组中。我无法从正确的角度解决这个问题，需要一些帮助。

我知道小提琴没有任何解决方案。我只是想表明 div 内的信息很大，我想将它转移到一个选择中。

我也知道我可以使用样式绑定来获取宽度，但我的 viewModel 上不需要它，所以我只想将它放在我的 bindingHandler 中。

如何让 bindingHandler 充当具有 items 值的 foreach？

这是我现在的测试

```
ko.bindingHandlers.collection = {
init: function (element, valueAccessor) {
    var value = valueAccessor();
    ko.utils.unwrapObservable(value);
    var $elm = $(element);
    //here I want a foreach on the itemsThatFit
    //maybe add the select in code here?
},
update: function (element, valueAccessor) {
    var value = valueAccessor();
    ko.utils.unwrapObservable(value);
    var $elm = $(element);
    //the div width
    var containerWidth = $elm.width();
    //the children width
    var childSum = 0;
    $elm.children().each(function() {
        childSum + $(this).width());
    });

    if(childSum>containerWidth){
       //move last item to itemsDontFit
    }
}}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:22:11.800

你很亲密。

html是

```
<div data-bind="foreach: developers"> 
  <span data-bind="textWidth:$data, sourceArray:$root.developers,
                   overflowArray:$root.overflow"></span> 
</div> 
```

请注意，我在`<span>`关卡中添加了额外的绑定，而不是`<div>`. 这是因为它必须检查每个`<span>`绑定。

关键的 JavaScript 是

```
ko.bindingHandlers['textWidth'] = {
  'update': function (element, valueAccessor, allBindingsAccessor) {
    var allBindings = allBindingsAccessor();
    // use ko text binding to do actual output.
    ko.bindingHandlers['text'].update(element, valueAccessor);
    var value = valueAccessor();
    ko.utils.unwrapObservable(value);
    var $parentEement = $(element).parent();

    var childSum = 0;
    $parentEement.children().each(function () {
      childSum += $(this).width();
    });

    if (childSum > $($parentEement[0]).width()) {
      var source = allBindings.sourceArray;
      var overflow = allBindings.overflowArray;
      source.remove(value);
      overflow.push(value);
      $(element).text('');
    }
  }
}; 
```

更新的小提琴位于[http://jsfiddle.net/DbJBs/17/](http://jsfiddle.net/DbJBs/17/)

# android - 操纵杆 API Android

> ID：14304222
> 
> 赞同：4
> 
> 时间：2013-01-13T14:04:23.310
> 
> 标签：android, api, joystick

Android 3.1+ 支持操纵杆和游戏手柄，但没有任何示例。我尝试使用 onTrackballEvent 并没有用。如何在我的 Android 应用程序中使用操纵杆？

# sql-server - 如何将 SQL Server 中的 xml 字符串反序列化为多列？

> ID：14304223
> 
> 赞同：0
> 
> 时间：2013-01-13T14:04:46.433
> 
> 标签：sql-server, xml-deserialization

我试图反序列化 SQL Server 存储过程中的 xml，然后再将其引入 c# win 表单。我当前的结果表如下所示：

![在此处输入图像描述](../Images/eb61b6752073efc361374b3a445d16f3.png)

编辑：由于上表太小而无法阅读，下面是其中包含的示例：

第 1 列只是时间 07:00、07:09 等。
第 2 列包含以下数据：
第 1 行：

```
ABADILLA ARIEL<RegistrationId>29</RegistrationId>, BLAKE LORCAN<RegistrationId>30</RegistrationId>, CRONIN SHANE<RegistrationId>31</RegistrationId> 
```

第 2 行：

```
ADAMS NORMAN<RegistrationId>33</RegistrationId>, ADAMS WILLIAM<RegistrationId>34</RegistrationId>, AHEARNE PAUL<RegistrationId>35</RegistrationId>, LAWLOR DES<RegistrationId>32</RegistrationId> 
```

因此，每行最多可以包含但不超过 4 个条目。

结束编辑

我希望能够对这张表做一些事情，主要是我需要能够将其修改为以下格式：

![在此处输入图像描述](../Images/41f2539680337d83a175a7134245621d.png)

但最终我想只显示带有名称的信息，但保留指向注册号的链接而不实际显示它。这部分在 c# win 表单中可能更容易完成，所以我想如果我能把它变成上面显示的格式，我会很高兴的。

迄今为止，我的 sql 代码返回结果表显示的初始值如下：

```
DECLARE @Registered TABLE
(CompetitionName VARCHAR(50),
CompetitionDate  Date,
StartTime TIME,
RegistrationId INTEGER,
PlayersName  Varchar(60)
)

INSERT INTO @Registered
SELECT MAX(c.CompetitionName) AS 'Competition Name', MAX(c.[Date]) AS 'Competition Date', 
CONVERT(VARCHAR, r.PlayersStartTime, 108) AS 'Start Time', MAX(r.RegistrationId) AS RegistrationId,
CASE WHEN m.MemberId IS NOT NULL THEN (m.Surname + ' ' + m.FirstName) ELSE (nm.Surname + ' '+ nm.Firstname) END AS PlayersName
FROM dbo.Competitions c
LEFT JOIN [dbo].[Registration] r ON c.[CompetitionId] = r.[CompetitionId]
LEFT JOIN dbo.Members m ON r.MemberId = m.MemberId
LEFT JOIN dbo.NonMembers nm ON r.NonMemberId = nm.NonMemberId
WHERE [Date] = '20130104'
AND c.CompetitionId = 10
GROUP BY r.PlayersStartTime, m.MemberId, m.FirstName, m.Surname, nm.FirstName, nm.Surname
----

SELECT DISTINCT Main.StartTime, 
 STUFF((SELECT ', ' + PlayersName, + RegistrationId
  FROM @Registered list
  WHERE list.StartTime = Main.StartTime
  FOR XML PATH ('')),1,2,''
  ) AS PlayerList
FROM @Registered Main; 
```

# user-interface - 为 DVD 创建 GUI

> ID：14304227
> 
> 赞同：-1
> 
> 时间：2013-01-13T14:05:00.443
> 
> 标签：user-interface, dvd

当 DVD 磁盘位于硬件 DVD 播放器中时，是否可以创建一些 GUI 来操作 DVD 磁盘上的文件？

是的，我知道我可以将我的 avi 文件转换为 DVD 格式并在它们上附加一些菜单（有很多软件可以做到这一点），但是如果我不想转换我的 avi 文件怎么办？有没有办法让它们保持原样并通过自己编写的图形外壳运行它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:14:25.530

这将取决于您正在使用的 DVD 播放器中包含的硬件和软件，但通常对于现成的 DVD 播放器，我会说不，这是不可能的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:16:26.273

这完全取决于您的 DVD 播放器固件。通常这是不允许的。

# php - phpseclib 或 ssh2 pecl 扩展

> ID：14304234
> 
> 赞同：3
> 
> 时间：2013-01-13T14:05:35.413
> 
> 标签：php, libssh2, phpseclib

我昨天的帖子：[https ://stackoverflow.com/questions/14296006/phpseclib-sftp-port-number](https://stackoverflow.com/questions/14296006/phpseclib-sftp-port-number)

好的，所以昨天我开始使用 php 学习 SSH / SFTP。我搜索了一堆论坛帖子，并推测我需要下载 phpseclib。

对php相对较新，因此从php5开始我不知道以前的php4不使用__constructor，因此上面的问题/帖子。

回答是相互矛盾的，并且与原始 Q 有点偏离主题，但是让我想到了一个我觉得在继续之前需要回答的问题：

**ssh2 pecl 扩展**或**phpseclib**哪个更好用？

这个问题：[phpseclib vs libssh2](https://stackoverflow.com/questions/4108492/phpseclib-vs-libssh2)是一样的，但我现在感觉有点过时了，正如 2010 年 11 月 5 日 17:37 所问

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-13T17:04:43.980

我说phpseclib。就个人而言，我认为你会得到更好的 phpseclib 支持，并且 API 更好，但主观原因也更少：

**更便携。**

我尝试在 Ubuntu 12.04 上安装 libssh2-php，但“sudo apt-get install libssh2-php”对我不起作用。即使这样做，它也可能不会获得最新版本。所以我不得不自己编译 libssh2 和 PECL 扩展，这总是很麻烦，而且不是很多管理员愿意做的事情。

即使您愿意编译一些东西，假设您的硬盘驱动器出现故障并且您必须重建服务器。如果您愿意编译 libssh2，您可能还会编译其他内容。这意味着您不能只启动另一个盒子 - 您必须记住您对旧盒子所做的所有更改并重新应用它们。如果你不记得他们怎么办？或者，如果其中一个尚未更新以与另一个的最新版本一起使用怎么办？

相比之下，phpseclib 不需要 PHP 以外的任何东西。如果它们可用，它将使用 mcrypt、gmp、bcmath 或 openssl，但如果它们不可用，那也没关系。它甚至不需要 PHP5，尽管它确实支持它。

**更好的公钥支持。**

你如何使用 libssh2：

```
<?php
$ssh = ssh2_connect('domain.tld');
ssh2_auth_pubkey_file($ssh, 'username', '/home/ubuntu/pubkey', '/home/ubuntu/privkey'/*, 'password'*/);

$stream = ssh2_exec($ssh, 'ls -la');
echo stream_get_contents($stream); 
```

两者都必须是正确的格式。如果你没有使用 ssh-keygen 来生成你的密钥，那么祝你转换它们好运。

使用 phpseclib：

```
<?php
include('Net/SSH2.php');
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();
$rsa->loadKey('...');

$ssh = new Net_SSH2('domain.tld');
$ssh->login('username', $rsa);
//$ssh->setPassword('password');

echo $ssh->exec('ls -la'); 
```

暂时忽略 API 有一些明确的方法 phpseclib 在这里脱颖而出：

*   phpseclib 接受字符串 - 而不是文件路径。如果你想做一个文件，你可以做 file_get_contents。
*   phpseclib 不需要公钥。大多数私钥格式都嵌入了公钥。如果他们不... phpseclib 也支持。
*   phpseclib 可以接受几乎任何标准化格式，从 PKCS#1 格式的密钥到 PuTTY 密钥，再到 XML 签名密钥

**交互式外壳。**

让我们尝试在远程系统上执行 sudo。

使用 phpseclib： [http](http://phpseclib.sourceforge.net/ssh/examples.html#password,sudo) ://phpseclib.sourceforge.net/ssh/examples.html#password,sudo ，

使用 libssh2？我没有线索。我最好的猜测（不起作用）：

```
<?php
$ssh = ssh2_connect('domain.tld'); 
ssh2_auth_password($ssh, 'username', 'password');

$shell = ssh2_shell($ssh);
echo fread($shell, 1024*1024);
fwrite($shell, "sudo ls -la\n");
$output = fread($shell, 1024*1024);
echo $output;
if (preg_match('#[pP]assword[^:]*:#', $output)) {
    fwrite($shell, "password\n");
}
echo fread($shell, 1024*1024); 
```

我也无法使用 libssh2，但它可以与 phpseclib 一起使用：

[http://phpseclib.sourceforge.net/ssh/examples.html#password,top](http://phpseclib.sourceforge.net/ssh/examples.html#password,top) ,

**诊断问题**

为什么 top 或 sudo 不起作用？在 phpseclib 上，您可以获得日志：

[http://phpseclib.sourceforge.net/ssh/examples.html#password,oneoff,logging](http://phpseclib.sourceforge.net/ssh/examples.html#password,oneoff,logging) ,

它们看起来像这样：

[http://phpseclib.sourceforge.net/ssh/log.txt](http://phpseclib.sourceforge.net/ssh/log.txt)

你也可以做`print_r($ssh->getErrors())`或`echo $ssh->getLastError()`。

**更改目录**

[我在http://php.net/ssh2](http://php.net/ssh2)没有看到任何 cd 或 chdir 函数。然而，phpseclib 有它 -`Net_SFTP::chdir(...)`

**速度**

libssh2：

```
<?php
$ssh = ssh2_connect('domain.tld');
ssh2_auth_password($ssh, 'username', 'password');

$start = microtime(true);
$sftp = ssh2_sftp($ssh);

$fp = fopen('ssh2.sftp://'.$sftp.'/home/username/1mb', 'w');

fwrite($fp, str_repeat('a', 1024 * 1024));
$elapsed = microtime(true) - $start;

echo "took $elapsed seconds"; 
```

25.71 秒。

phpsec库：

```
<?php
include('Net/SFTP.php');

$sftp = new Net_SFTP('domain.tld');
$sftp->login('username', 'password');

$start = microtime(true);
$sftp->put('1mb', str_repeat('a', 1024*1024));
$elapsed = microtime(true) - $start;

echo "took $elapsed seconds"; 
```

11.70 秒。

所以 phpseclib 的速度是原来的两倍多。

# javascript - 如何制作一个 保持在同一个位置

> ID：14304236
> 
> 赞同：1
> 
> 时间：2013-01-13T14:06:04.687
> 
> 标签：javascript, static, svg, mask, interactive

这是我的代码：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN"
"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="300" height="300">
<script type="text/ecmascript">
<![CDATA[
function changeRectColor(evt) {
var centerX = Math.round(Math.random() * 255);
var centerY = Math.round(Math.random() * 255);      
evt.target.setAttributeNS(null,"cx",centerX);
evt.target.setAttributeNS(null,"cy",centerY);
}
]]>
</script>

<defs>
<mask maskType="luminance" maskUnits="objectBoundingBox" maskContentUnits="objectBoundingBox" id="m1">
<image xlink:href="http://upload.wikimedia.org/wikipedia/commons/9/97/C130-boarding.jpg" height="1" width="1" y="0" x="0" />
</mask>
</defs>

<g>
<circle cx="50" cy="20" r="50" fill="red" mask="url(#m1)" onclick="changeRectColor(evt)"/>
</g>

</svg> 
```

当您单击红色圆圈时，它会改变位置。那一点效果很好。

问题：我已将其蒙版为图片。当圆圈移动时，蒙版/图片随之移动。我希望面具留在原地。

**注意：如果您了解我的问题，那么以下是一些附加信息**

如果我没有类似 Javascript 的函数，我可以将一个矩形屏蔽到圆和图像（使用父级），然后图像会说 put，但我是，并且 defs 中的东西似乎没有喜欢 Javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:39:36.973

使用 maskUnits="userSpaceOnUse" maskContentUnits="userSpaceOnUse"

当然，您必须调整图像和蒙版的 x、y、宽度和高度，因为它们将位于用户坐标而不是边界框坐标中。

# mysql - 为什么mysql没有使用正确的索引？

> ID：14304238
> 
> 赞同：2
> 
> 时间：2013-01-13T14:06:42.607
> 
> 标签：mysql, query-optimization

我有一个问题，没有使用正确的索引。

我在 innodb 表上有以下索引（大约 500,000 行）：

```
+-------------+------------+------------------------+--------------+------------------------+-----------+-------------+----------+--------+------+------------+---------+
| Table       | Non_unique | Key_name               | Seq_in_index | Column_name            | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------------+------------+------------------------+--------------+------------------------+-----------+-------------+----------+--------+------+------------+---------+
| osdate_user |          0 | PRIMARY                |            1 | id                     | A         |      419700 |     NULL | NULL   |      | BTREE      |         |
| osdate_user |          0 | email                  |            1 | email                  | A         |      419700 |     NULL | NULL   |      | BTREE      |         |
| osdate_user |          0 | username               |            1 | username               | A         |      419700 |     NULL | NULL   | YES  | BTREE      |         |
| osdate_user |          1 | lastvisit              |            1 | lastvisit              | A         |      419700 |     NULL | NULL   |      | BTREE      |         |
| osdate_user |          1 | active                 |            1 | active                 | A         |           8 |     NULL | NULL   | YES  | BTREE      |         |
| osdate_user |          1 | gender                 |            1 | gender                 | A         |          88 |     NULL | NULL   | YES  | BTREE      |         |
| osdate_user |          1 | regdate                |            1 | regdate                | A         |      419700 |     NULL | NULL   |      | BTREE      |         |
| osdate_user |          1 | lastupdate             |            1 | lastupdate             | A         |      419700 |     NULL | NULL   | YES  | BTREE      |         |
| osdate_user |          1 | password               |            1 | password               | A         |      419700 |     NULL | NULL   |      | BTREE      |         |
| osdate_user |          1 | age                    |            1 | age                    | A         |         190 |     NULL | NULL   | YES  | BTREE      |         |
| osdate_user |          1 | is_new                 |            1 | is_new                 | A         |           8 |     NULL | NULL   | YES  | BTREE      |         |
| osdate_user |          1 | private_photos         |            1 | private_photos         | A         |           8 |     NULL | NULL   |      | BTREE      |         |
| osdate_user |          1 | pictures_cnt           |            1 | pictures_cnt           | A         |          10 |     NULL | NULL   | YES  | BTREE      |         |
| osdate_user |          1 | pictures_cnt           |            2 | private_photos         | A         |          10 |     NULL | NULL   |      | BTREE      |         |
| osdate_user |          1 | status                 |            1 | status                 | A         |          19 |     NULL | NULL   |      | BTREE      |         |
| osdate_user |          1 | status                 |            2 | active                 | A         |          19 |     NULL | NULL   | YES  | BTREE      |         |
| osdate_user |          1 | status                 |            3 | gender                 | A         |          19 |     NULL | NULL   | YES  | BTREE      |         |
| osdate_user |          1 | status                 |            4 | age                    | A         |          19 |     NULL | NULL   | YES  | BTREE      |         |
| osdate_user |          1 | status                 |            5 | country                | A         |        7630 |     NULL | NULL   | YES  | BTREE      |         |
| osdate_user |          1 | status                 |            6 | city                   | A         |       46633 |     NULL | NULL   | YES  | BTREE      |         |
| osdate_user |          1 | status                 |            7 | pictures_cnt           | A         |       83940 |     NULL | NULL   | YES  | BTREE      |         |
| osdate_user |          1 | status                 |            8 | private_photos         | A         |      139900 |     NULL | NULL   |      | BTREE      |         |
| osdate_user |          1 | status                 |            9 | lang                   | A         |      209850 |     NULL | NULL   |      | BTREE      |         |
| osdate_user |          1 | status                 |           10 | is_new                 | A         |      209850 |     NULL | NULL   | YES  | BTREE      |         |
+-------------+------------+------------------------+--------------+------------------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

这个查询：

```
EXPLAIN EXTENDED SELECT user.id, user.active
FROM osdate_user user
WHERE user.active =1
AND user.status =  'active'
AND user.gender =  'M'
AND user.age
BETWEEN 19 
AND 35 
AND user.pictures_cnt >0
AND user.private_photos =  '0'
ORDER BY user.lastvisit DESC 
LIMIT 0 , 24 
```

显示以下计划：

```
+----+-------------+---------+-------------+--------------------------------------------------------------+------------------------------+---------+---------------------------+-------+----------+----------------------------------------------------------------------------+
| id | select_type | table   | type        | possible_keys                                                | key                          | key_len | ref                       | rows  | filtered | Extra                                                                      |
+----+-------------+---------+-------------+--------------------------------------------------------------+------------------------------+---------+---------------------------+-------+----------+----------------------------------------------------------------------------+
|  1 | SIMPLE      | user    | index_merge | PRIMARY,active,gender,age,private_photos,pictures_cnt,status | gender,private_photos,active | 4,1,2   | NULL                      | 28204 |   100.00 | Using intersect(gender,private_photos,active); Using where; Using filesort |
|  1 | SIMPLE      | userext | eq_ref      | userid                                                       | userid                       | 4       | db_name.user.id |     1 |   100.00 | Using index                                                                |
+----+-------------+---------+-------------+--------------------------------------------------------------+------------------------------+---------+---------------------------+-------+----------+----------------------------------------------------------------------------+ 
```

**我的问题是为什么不使用索引“状态”的查询**

当我强制它使用索引“状态”时 - 需要 0.2 秒，如果我不使用则需要 2.5 秒

非常感谢任何帮助。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:15:41.690

你有几个与他们索引的字段重叠的索引。例如 `pictures_cnt`，`status`
优化器“认为”您的查询更接近于使用字段`pictures_cnt`而不是`status`索引。如果您在`where`属于`status`索引的字段中有更多字段，它可能会决定使用该索引而不是`picture_cnt`

请注意，它不能同时使用两者。

如果您认为优化器是错误的（在不常见的情况下就是这种情况），您可以强制它使用您希望它使用的索引。做基准测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T22:41:03.960

经过一番搜索，我发现了一些关于不使用索引中允许 null 的列的建议。我将状态索引中的列都更改为非空，现在正在使用该索引。

通常情况下，最简单和最干净的解决方案是最好的。

# python - Python：处理图像并保存到文件流

> ID：14304245
> 
> 赞同：8
> 
> 时间：2013-01-13T14:07:57.733
> 
> 标签：python, image-processing, python-imaging-library

我需要使用 python 处理图像（应用过滤器和其他转换），然后使用 HTTP 将其提供给用户。现在，我正在使用 BaseHTTPServer 和 PIL。

问题是，PIL 不能直接写入文件流，所以我必须写入一个临时文件，然后读取这个文件，这样我就可以将它发送给服务的用户。

是否有任何可以将 JPEG 直接输出到 I/O（类文件）流的 python 图像处理库？有没有办法让 PIL 做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-13T14:11:17.280

使用内存中的二进制文件对象[`io.BytesIO`](https://docs.python.org/2/library/io.html#io.BytesIO)：

```
from io import BytesIO

imagefile = BytesIO()
animage.save(imagefile, format='PNG')
imagedata = imagefile.getvalue() 
```

这在 Python 2 和 Python 3 上都可用，因此应该是首选。

仅在 Python 2 上，您还可以使用内存文件对象模块[`StringIO`](http://docs.python.org/2/library/stringio.html)，或者它是更快的 C 编码等效项`cStringIO`：

```
from cStringIO import StringIO

imagefile = StringIO()  # writable object

# save to open filehandle, so specifying the expected format is required
animage.save(imagefile, format='PNG')
imagedata = imagefile.getvalue() 
```

`StringIO`/`cStringIO`是相同原理的较旧的遗留实现。

# c++ - 在带有 cpptk 的 Windows 上的 C++ 应用程序中使用 TCL/Tk 无法解决外部问题

> ID：14304246
> 
> 赞同：1
> 
> 时间：2013-01-13T14:08:06.870
> 
> 标签：c++, tcl, linker-errors, tk

我正在尝试从 C++ 应用程序开始使用 Tcl/tk。

我使用以下内容：

*   此库用于将 TclTk 实现为 c++： [http ://cpptk.sourceforge.net/](http://cpptk.sourceforge.net/)
*   [从http://www.activestate.com/activetcl/downloads](http://www.activestate.com/activetcl/downloads)安装的 TCL 8.5.13.0
*   视觉工作室 2010exp

我已经包含了所有必要的头文件，并且还链接到了 boost 和 Tcl。在 cpptkbase.cc 我添加了

```
#define shared_ptr boost::boost::shared_ptr    and
#define exception std::exception   (known issues according to google) 
```

尝试编译时，我得到：

```
1>------ Build started: Project: tcl, Configuration: Debug Win32 ------
1>  tcl.cpp
1>  stdafx.cpp
1>  cpptkbase.cc
1>c:\program\microsoft visual studio 10.0\vc\include\xutility(2227): warning C4996: 'std::_Copy_impl': Function call with parameters that may be unsafe - this call relies on the caller to check that the passed values are correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++ 'Checked Iterators'
1>          c:\program\microsoft visual studio 10.0\vc\include\xutility(2212) : see declaration of 'std::_Copy_impl'
1>          x:\mycodes\archiv\tcl\tcl\tcl\cpptkbase.cc(138) : see reference to function template instantiation '_OutIt std::copy<std::_String_iterator<_Elem,_Traits,_Alloc>,char*>(_InIt,_InIt,_OutIt)' being compiled
1>          with
1>          [
1>              _OutIt=char *,
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Alloc=std::allocator<char>,
1>              _InIt=std::_String_iterator<char,std::char_traits<char>,std::allocator<char>>
1>          ]
1>  cpptk.cc
1>  Generating Code...
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_Eval referenced in function "public: __thiscall `anonymous namespace'::Interp::Interp(void)" (??0Interp@?A0x9fc9ee39@@QAE@XZ)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tk_Init referenced in function "public: __thiscall `anonymous namespace'::Interp::Interp(void)" (??0Interp@?A0x9fc9ee39@@QAE@XZ)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_Init referenced in function "public: __thiscall `anonymous namespace'::Interp::Interp(void)" (??0Interp@?A0x9fc9ee39@@QAE@XZ)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_CreateInterp referenced in function "public: __thiscall `anonymous namespace'::Interp::Interp(void)" (??0Interp@?A0x9fc9ee39@@QAE@XZ)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_UpdateLinkedVar referenced in function "void __cdecl `anonymous namespace'::linkCpptoTcl(void)" (?linkCpptoTcl@?A0x9fc9ee39@@YAXXZ)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_Alloc referenced in function "void __cdecl `anonymous namespace'::linkCpptoTcl(void)" (?linkCpptoTcl@?A0x9fc9ee39@@YAXXZ)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_Free referenced in function "void __cdecl `anonymous namespace'::linkCpptoTcl(void)" (?linkCpptoTcl@?A0x9fc9ee39@@YAXXZ)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_SetResult referenced in function _callbackHandler
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_CreateObjCommand referenced in function "class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl Tk::details::addCallback(class boost::shared_ptr<class Tk::details::CallbackBase>)" (?addCallback@details@Tk@@YA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$shared_ptr@VCallbackBase@details@Tk@@@boost@@@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_LinkVar referenced in function "class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl Tk::details::addLinkVar(int &)" (?addLinkVar@details@Tk@@YA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AAH@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_UnlinkVar referenced in function "void __cdecl Tk::details::deleteLinkVar(int &)" (?deleteLinkVar@details@Tk@@YAXAAH@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_SetObjResult referenced in function "void __cdecl Tk::details::setResult(bool)" (?setResult@details@Tk@@YAX_N@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_NewBooleanObj referenced in function "void __cdecl Tk::details::setResult(bool)" (?setResult@details@Tk@@YAX_N@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_NewLongObj referenced in function "void __cdecl Tk::details::setResult(long)" (?setResult@details@Tk@@YAXJ@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_NewDoubleObj referenced in function "void __cdecl Tk::details::setResult(double)" (?setResult@details@Tk@@YAXN@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_NewStringObj referenced in function "void __cdecl Tk::details::setResult(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (?setResult@details@Tk@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_ListObjLength referenced in function "int __cdecl Tk::details::getResultLen(void)" (?getResultLen@details@Tk@@YAHXZ)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_GetObjResult referenced in function "int __cdecl Tk::details::getResultLen(void)" (?getResultLen@details@Tk@@YAHXZ)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_GetIntFromObj referenced in function "int __cdecl Tk::details::getResultElem<int>(int)" (??$getResultElem@H@details@Tk@@YAHH@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_ListObjIndex referenced in function "int __cdecl Tk::details::getResultElem<int>(int)" (??$getResultElem@H@details@Tk@@YAHH@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_GetDoubleFromObj referenced in function "double __cdecl Tk::details::getResultElem<double>(int)" (??$getResultElem@N@details@Tk@@YANH@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_GetString referenced in function "class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl Tk::details::getResultElem<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >(int)" (??$getResultElem@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@details@Tk@@YA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@H@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_DeleteCommand referenced in function "void __cdecl Tk::deleteCallback(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (?deleteCallback@Tk@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tcl_FindExecutable referenced in function "void __cdecl Tk::init(char *)" (?init@Tk@@YAXPAD@Z)
1>cpptkbase.obj : error LNK2019: unresolved external symbol __imp__Tk_MainLoop referenced in function "void __cdecl Tk::runEventLoop(void)" (?runEventLoop@Tk@@YAXXZ)
1>X:\MyCodes\Archiv\tcl\tcl\Debug\tcl.exe : fatal error LNK1120: 25 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:19:20.607

您应该再次链接 TCL 导入库（它可能是`tcl85.lib`，或者可能`tcl85<some suffix>.lib`在您的 ActiveState TCL 文件夹中的某个位置）。

# vba - 使用 VBA 在 Word 文档的表格中的特定单元格中嵌入对象

> ID：14304251
> 
> 赞同：1
> 
> 时间：2013-01-13T14:09:08.230
> 
> 标签：vba, ms-word

截至目前，我只能通过以下代码嵌入文档：

```
Dim wordDoc as word.document
wordDoc.InlineShapes.AddOLEObject Filename:="C:/Doc.doc", Linktofile:=False, DisplayAsIcon:=True, IconLabel:="Sample" 
```

问题是我想将对象嵌入到表格中的特定单元格中。发生的事情是它仅插入第一个单元格。我; v试图搜索但没有运气。我是VBA的新手，所以请帮助我。谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:31:32.480

这将是这样的：

```
ActiveDocument.Tables(1).Columns(2).Cells(2).Range.InlineShapes.AddOLEObject Filename:="C:/Doc.doc", Linktofile:=False, DisplayAsIcon:=True, IconLabel:="Sample" 
```

# matlab - 在枚举类型数据中查找相关性

> ID：14304252
> 
> 赞同：1
> 
> 时间：2013-01-13T14:09:23.700
> 
> 标签：matlab, correlation, pearson

我有以下数据集，其中包含有关国家/地区的信息

```
 5,1,648,16,10,2,0,3,5,1,1,0,1,1,1,0,0,0,0,0,1,0,0,1,0,0,
 3,1,29,3,6,6,0,0,3,1,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,
 4,1,2388,20,8,2,2,0,3,1,1,0,0,1,0,0,0,0,0,0,1,1,0,0,0,0,
 ... 
```

每行的第六列表示该国的主要宗教：0 是天主教，1 是其他基督教，2 是穆斯林，等等。其他一些数据是关于它们所包含的国家符号的国旗中是否存在不同的颜色， 等等。

数据的描述可以在[这里](http://archive.ics.uci.edu/ml/machine-learning-databases/flags/flag.names)找到。我已经删除了字符串数据列，所以它与显示的信息不完全一样。

我的问题是，我想使用协方差矩阵和皮尔逊相关性来查看，例如，旗帜中带有红色的事实是否可以说明该国的宗教是否有更大的机会成为某种东西比别的东西。但是由于列举了宗教，我对如何解决这个问题有点迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:42:37.100

您的问题是，尽管您的数据是有序的，但这个顺序是任意的。“穆斯林”（枚举 val=1）到“印度教”（枚举 val=3）之间的“距离”不是 2。

解决此问题的最直接方法是将枚举值转换为二进制指示符向量：

假设你有

```
enum {
   Catholic = 0
   Protestant,
   Muslim,
   Jewish,
   Hindu,
   ...
   NumOfRel }; 
```

您将 enum val 的**单个**条目替换为长度`NumOfRel`为零的二进制向量，除了`1`适当位置的单个条目：

对于新教条目，您将拥有以下二进制向量：

```
[ 0 1 0 0 ... ] 
```

对于犹太人：

```
[ 0 0 0 1 0 ... ] 
```

等等...

这样，不同宗教之间的“距离”总是1。

# c - 在源代码中部分禁用 gcc 中的迂腐警告

> ID：14304255
> 
> 赞同：14
> 
> 时间：2013-01-13T14:09:36.500
> 
> 标签：c, gcc, suppress-warnings

我试图`gcc`闭嘴我对二进制常量的使用。它们使代码更具可读性，但阻止我使用`-pedantic`我遵守的其他代码。我要么想要一个类似`-fnobinaryconstwarn`或类似的开关（在仔细阅读手册页一段时间后我认为它不存在），要么使用

```
#pragma GCC diagnostic ignored "-pedantic" 
```

选择性地禁用短暂的迂腐警告，如下所述： [Selectively disable GCC warnings for only part of a translation unit?](https://stackoverflow.com/questions/965093/selectively-disable-gcc-warnings-for-only-part-of-a-translation-unit) 不幸的是，这似乎不起作用。我有哪些选择？

为了`clang`

```
#pragma GCC diagnostic ignored "-Wpedantic" 
```

有效，而上面的行没有，但它会为`gcc`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-03T07:58:12.963

来自 gcc 手册： http: [//gcc.gnu.org/onlinedocs/gcc-4.8.2/gcc/Alternate-Keywords.html#Alternate-Keywords](http://gcc.gnu.org/onlinedocs/gcc-4.8.2/gcc/Alternate-Keywords.html#Alternate-Keywords)

> -pedantic 和其他选项会导致许多 GNU C 扩展出现警告。您可以通过在表达式前写 __extension__ 来防止在一个表达式中出现此类警告。__extension__ 除此之外没有任何影响。

我刚刚使用 -Wall -Wextra -Wpedantic 和 gcc-4.8.2 编译了以下块，并且没有打印警告：

```
static uint8_t shbl[2][9] = {
{ __extension__ 0b11111111,
  __extension__ 0b11111110,
  __extension__ 0b11111100,
  __extension__ 0b11111000,
  __extension__ 0b11110000,
  __extension__ 0b11100000,
  __extension__ 0b11000000,
  __extension__ 0b10000000,
  __extension__ 0b00000000 },
// BLOCK_RIGHT
{ __extension__ 0b11111111,
  __extension__ 0b01111111,
  __extension__ 0b00111111,
  __extension__ 0b00011111,
  __extension__ 0b00001111,
  __extension__ 0b00000111,
  __extension__ 0b00000011,
  __extension__ 0b00000001,
  __extension__ 0b00000000 }
}; 
```

(Of course this is ugly, and I'll change that to a precompiler macro. But for a test it was acceptable.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:54:05.493

也许，您可以使用一个宏，它可以以可移植的方式完成您想要实现的目标。这是一个简短的例子：

```
#include <stdio.h>

#define BINARY(N) strtol(#N, 0, 2)

int main()
{
    unsigned int piece = BINARY(10010101);
    printf("%u\n", piece);

    return 0;
} 
```

从理论上讲，gcc 应该能够优化对 strtol 的调用，并且不会失去可读性。

编辑：到目前为止，gcc 似乎没有优化 strtol 调用。但是，您的性能损失应该可以忽略不计。

干杯!

# php - 在 PHP 字符串错误中搜索和分页

> ID：14304257
> 
> 赞同：0
> 
> 时间：2013-01-13T14:09:55.870
> 
> 标签：php, mysql, sql

我的问题是当我尝试显示`SELECT * from table WHERE x Like y`分页结果正在工作但没有显示数据时，收到此错误：警告：mysql_fetch_array() 期望参数 1 是资源，在线 E:\server\htdocs\pag.php 中给出的字符串118 [这是 118: while($linie = mysql_fetch_array("$result"))] 这是我的代码：

```
<?php include('/SQL.php'); ?>

<?php   $tbl_name="modele";     //your table name
// How many adjacent pages should be shown on each side?
$adjacents = 3;
 $cautare = $_GET['c']; 
// gets value sent over search form

$query = "SELECT COUNT(*) as num FROM $tbl_name WHERE (`marca` LIKE '%".$cautare."%') OR (`model` LIKE '%".$cautare."%')";
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages = $total_pages['num'];

/* Setup vars for query. */
$targetpage = "paginare.php";   //your file name  (the name of this file)
$limit = 3;                                 //how many items to show per page
$page=isset($_GET['pagina'])?(int)$_GET['pagina']:0;
$page=mysql_real_escape_string($page);
if($page) 
    $start = ($page - 1) * $limit;          //first item to display on this page
else
    $start = 0;                             //if no page var is given, set start to 0

/* Get data. */
$sql = "SELECT * FROM $tbl_name
        WHERE (`marca` LIKE '%".$cautare."%') OR (`model` LIKE '%".$cautare."%') 
        LIMIT $start, $limit";
$result = mysql_query($sql) or die(mysql_error());echo $result;

/* Setup page vars for display. */
if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
$prev = $page - 1;                          //previous page is page - 1
$next = $page + 1;                          //next page is page + 1
$lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
$lpm1 = $lastpage - 1;                      //last page minus 1

/* 
    Now we apply our rules and draw the pagination object. 
    We're actually saving the code to a variable in case we want to draw it more than once.
*/
$pagination = "";
if($lastpage > 1)
{   
    $pagination .= "<div class=\"pagination\">";
    //previous button
    if ($page > 1) 
        $pagination.= "<a href=\"$targetpage?pagina=$prev\">« Inapoi</a>";
    else
        $pagination.= "<span class=\"disabled\">« Inapoi</span>";   

    //pages 
    if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
    {   
        for ($counter = 1; $counter <= $lastpage; $counter++)
        {
            if ($counter == $page)
                $pagination.= "<span class=\"current\">$counter</span>";
            else
                $pagination.= "<a href=\"$targetpage?pagina=$counter\">$counter</a>";                   
        }
    }
    elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
    {
        //close to beginning; only hide later pages
        if($page < 1 + ($adjacents * 2))        
        {
            for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?pagina=$counter\">$counter</a>";                   
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?pagina=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?pagina=$lastpage\">$lastpage</a>";     
        }
        //in middle; hide some front and some back
        elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
        {
            $pagination.= "<a href=\"$targetpage?pagina=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?pagina=2\">2</a>";
            $pagination.= "...";
            for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?pagina=$counter\">$counter</a>";                   
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?pagina=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?pagina=$lastpage\">$lastpage</a>";     
        }
        //close to end; only hide early pages
        else
        {
            $pagination.= "<a href=\"$targetpage?pagina=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?pagina=2\">2</a>";
            $pagination.= "...";
            for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
        }
    }

    //next button
    if ($page < $counter - 1) 
        $pagination.= "<a href=\"$targetpage?pagina=$next\">Inainte »</a>";
    else
        $pagination.= "<span class=\"disabled\">Inainte »</span>";
    $pagination.= "</div>\n";       
}
?>

<?php
    while($linie = mysql_fetch_array("$result"))
    {

    echo '<div id="content"><div id="content">
         <div class="post">
        <h3><a href=/articol.php?id='.$linie["id"].'>'.$linie["marca"].' '.$linie["model"].'</a></h3>
        <span class="info"><img style="float: left;" src="/foto.php?src=panou/'.$linie['img1'].'&h=180&w=120"></img><br />
        <h4> CPU: Nr de nuclee: '.$linie["performanta_cpu_core"].' x '.$linie["performanta_cpu"].' Mhz<br /><br /><br />
         RAM: '.$linie["performanta_rami"].'MB<br /><br /><br />
         BATERIE: '.$linie["baterie_mAh"].' mAh<br /><br /><br />
         FOTO: '.$linie["camera_fata"].' MP</h4><br /><br /><br />
        '.$linie["despre"].'</span>
        <span class="user">de <a href="http://plus.google.com/u/0/111829192724498190405" title="author" rel="author">'.$linie["utilizator"].'</a></span>
        <span class="comment">27 Comentarii</span>
    </div></div>
    <br /><br />';

    }
?>  <?=$pagination?> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:36:11.963

您`$sql`在第 24 行的查询很可能会失败，因为您缺少`,`中的`limit`，所以当您到达时`while($linie = mysql_fetch_array("$result"))` `$result`是一个字符串，而不是可以在`mysql_fetch_array()`-

```
$sql = "SELECT * FROM $tbl_name WHERE (`marca` LIKE '%".$c."%') OR (`model` LIKE '%".$c."%') LIMIT $start $limit";
                                                                                                         ^ 
```

改成 -

```
$sql = "SELECT * FROM $tbl_name WHERE (`marca` LIKE '%".$c."%') OR (`model` LIKE '%".$c."%') LIMIT $start, $limit"; 
```

请注意，当您在查询中使用未经处理的数据时，您对 sql 注入持开放态度 - `$c = $_GET['c'];`. 您应该从`mysql_*`函数更改为`mysqli_`or`PDO`并使用准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:58:00.063

删除引号
`while($linie = mysql_fetch_array($result))`
并确保查询没有错误
`echo mysql_error();`

# apache - Zend 调试器在 Windows XAMMP 上的 Apache 服务器上工作

> ID：14304258
> 
> 赞同：0
> 
> 时间：2013-01-13T14:09:58.553
> 
> 标签：apache, debugging, zend-framework, xampp

我无法让 Zend 调试器在 Windows XAMMP 安装上的 Apache 服务器上工作 - PHP V 5.3.8

这是我到目前为止所做的：

1.  在此处下载并安装 Zend Eclipse PDT (PDT 3.0.2 w/Eclipse Indigo)： [http ://www.zend.com/community/pdt/downloads](http://www.zend.com/community/pdt/downloads)

2.  从 Zend 站点下载的 zip 文件 ZendDebugger-20110410-cygwin_nt-i386

3.  将 ZendDebugger-20110410-cygwin_nt-i386\5_3_x_nts_comp\ZendDebugger.dll 文件复制为 C:\xampp\php\ext\ZendDebugger.dll

4.  找到正确的 php.ini 并将这些行添加到 php.ini

    zend_extension_manager.debug_server=/xampp/php/ext/ZendDebugger.dll

    zend_debugger.allow_hosts=127.0.0.1

    zend_debugger.expose_remotely=总是

5.  重新启动apache

6.  用 phpinfo() 运行脚本；

7.  在带有行的框中查找调试器的参考 该程序使用 Zend 脚本语言引擎

8.  找不到参考

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:30:03.280

几天前有一个类似的问题，我学到的是

您不能在 Windows 系统上运行带有线程安全的 PHP 5.3 的 ZEND 调试器。

（会给你参考，但我在不同的系统上拥有它，所以没有历史，如果我得到链接会更新它）

以下是您可以尝试的替代方案：

1.回到 5.2.xx 版本的 php（如果这不是问题）并为该版本配置 zend 调试器。

2.安装Zend server（听说用起来很方便）

3.使用 php 5.3 的非线程安全版本（不确定但可能有效）

4.不要使用zend_debugger，改用Xdebug之类的替代品，（我目前正在使用它，它工作正常）。

更新：为您获取这些链接。

[zenddebugger 只支持非线程安全的 PHP 仍然是真的吗？](https://stackoverflow.com/questions/3948321/is-it-still-true-that-zenddebugger-only-supports-non-thread-safe-php)

[http://forums.zend.com/viewtopic.php?f=59&t=1918#p13729](http://forums.zend.com/viewtopic.php?f=59&t=1918#p13729)

[设置 Zend 调试器](https://stackoverflow.com/questions/3491687/setting-up-zend-debugger)

希望他们有所帮助

# javascript - jQuery替换href值但只是部分？

> ID：14304260
> 
> 赞同：6
> 
> 时间：2013-01-13T14:09:59.597
> 
> 标签：javascript, jquery, regex, replace, href

> **可能重复：**
> [使用 jQuery 更改 href 参数](https://stackoverflow.com/questions/6540106/change-href-parameter-using-jquery)

我有一个页面有几个这样的链接：

```
<a href="playcats.php?cat='.$catname.'&sl=10" class="golink"> 
```

所以在 PHP 页面加载后它看起来像：

```
<a href="playcats.php?cat=blue&sl=10" class="golink">
<a href="playcats.php?cat=red&sl=10" class="golink">
<a href="playcats.php?cat=yellow&sl=10" class="golink">
... 
```

我想使用 jQuery 部分更改所有链接的 sl 值的 href（sl 值是从滑块 = data.value 中选取的）

我有这个：

```
$(document).ready(function() {
  $('a.golink').each(function() {
    var _href = $(this).attr('href'); 
    $(this).  ( rest of code.. )
  } );
}); 
```

现在我不知道如何使用正则表达式替换，因为我认为这是解决方案！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T14:14:04.283

你可能会做

```
 $(this).attr('href', _href.replace(/sl=[^&]+/, 'sl=newval')); 
```

`sl`用'newval'替换值。

您还可以使用函数来构建新值。例如，假设您想将旧的 sl 值乘以 2，您可以这样做：

```
 $(this).attr('href', _href.replace(/sl=([^&]+)/, function(_, oldval) {
      return 'sl='+(2*parseInt(oldval,10))
 })); 
```

您甚至可以避免使用`each`：

```
$('a.golink').attr('href', function(i, v){
  return v.replace(/sl=([^&]+)/, function(_, oldval) {
      return 'sl='+(2*parseInt(oldval,10))
  })
}); 
```

[演示](http://jsfiddle.net/srjPu/)（通过链接查看href）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T14:18:34.197

如何使用[`attr`](http://api.jquery.com/attr/)带有回调函数的重载：

```
$("a.golink").attr("href", function (_, val) {
    return val.replace(/sl=\d+/gi, "sl=new_value");
}); 
```

在函数内部，`this`等于当前`<a>`标记，因此您可以确定在其中使用什么值。

**示例：http:** [//jsfiddle.net/6zAN7/5/](http://jsfiddle.net/6zAN7/5/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T14:16:48.340

试试这个，很长的代码来理解......

```
$('a').each(function(){
    // Change this to get slider value
    slider_value = 25;

    var _href = $(this).attr('href'); 
    _href = _href.split("&");
    _href[_href.length] = "sl=" + slider_value;
    _href = _href.join("&");

    console.log(_href);
}); 
```

使用正则表达式：

```
$('a').each(function(){
    // Change this to get slider value
    slider_value = 25;

    var _href = $(this).attr('href'); 
    _href = _href.replace(/sl=[^&]+/, 'sl=' + slider_value);
}); 
```

# ruby-on-rails - Heroku ruby -on-rails 部署“nil:NilClass 的未定义方法‘信息’”

> ID：14304264
> 
> 赞同：2
> 
> 时间：2013-01-13T14:10:12.470
> 
> 标签：ruby-on-rails, deployment, heroku, rails-activerecord

按照教程，我成功地在本地制作了一个简单的 RoR 应用程序（使用 SQLite 和一些非常简单的数据模型），并通过 git 与 heroku 同步。（Heroku 服务器启动并显示通常的欢迎页面。）

但是，如果我想访问我的班级网址之一，例如`/users`，我会收到以下消息：

> 内部服务器错误
> 
> nil:NilClass 的未定义方法“信息”

`heroku logs`揭示

```
ERROR NoMethodError: undefined method `info' for nil:NilClass
/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.7/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/runtime.rb:17:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.7/lib/rails/rack/logger.rb:25:in `call_app'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.7/lib/rails/rack/logger.rb:16:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.7/lib/rails/applicatio
n.rb:220:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.7/lib/rails/rack/log_tailer.rb:17:in `call'
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/methodoverride.rb:21:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/lock.rb:15:in `call'
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.7/lib/action_dispatch/middleware/static.rb:62:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/content_length.rb:14:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/handler/webrick.rb:59:in `service'
/usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.7/lib/rails/engine.rb:479:in `call'
heroku[router]: at=info method=GET path=/users host=xxx.herokuapp.com fwd=178.190.207.99 dyno=web.1 queue=0 wait=0ms connect=0ms service=12ms status=500 bytes=340 
```

它似乎与 request 中的部分有关`at=info`。到目前为止，我的研究似乎表明与`ActiveRecord:Base.logger`但我不明白它有联系。

我什至从哪里开始寻找原因？

在其他帖子中，Gemfile 也是相关的，所以这里是：

```
source 'https://rubygems.org'

gem 'rails', '3.2.7'

group :development do
    gem 'sqlite3', '1.3.7'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:39:09.503

运行以下命令（如果您还没有）：

```
heroku run rake db:migrate 
```

你的用户控制器是什么样的？

的输出是`rake routes`什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-30T05:28:46.487

添加这个：

```
config.active_record.logger=Logger.new(STDOUT) 
```

配置/环境/xxx.rb。xxx 是您正在使用的环境的名称，它应该是开发、生产或测试。

# windows - 你如何创建一个简单的多行批处理文件

> ID：14304281
> 
> 赞同：1
> 
> 时间：2013-01-13T14:11:59.180
> 
> 标签：windows, batch-file

我发现自己不得不从 DOS 提示符下在 Windows 7 上一个接一个地运行相同的命令。所以我将命令放在一个文件中，每行一个，然后将文件命名为 buildWindows.bat，但是当我运行它时，它只运行第一行（成功）并退出。这是批处理文件（注意build是指另一个批处理文件build.bat）

```
build
Build copylatestbuild
C:\Apps\Code\IzPack5beta11\bin\compile C:\Code\Jaikoz\src\installer_windows\install.xml -o C:\Code\Jaikoz\target\installer\windows\\install.jar -b C:\Code\Jaikoz\src\installer_windows 
C:\Apps\Code\IzPack5beta11\bin\compile C:\Code\Jaikoz\src\installer_windows\install64.xml -o C:\Code\Jaikoz\target\installer\windows\install64.jar -b C:\Code\Jaikoz\src\installer_windows 
C:\Apps\Code\IzPack5beta11\bin\compile C:\Code\Jaikoz\src\installer_linux\install.xml  -o C:\Code\Jaikoz\target\installer\linux\install.jar -b C:\Code\Jaikoz\src\installer_linux 
build zipinstallers 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T14:24:54.693

改变

```
build 
```

到

```
call build 
```

它应该按预期工作。否则退出 build.bat 也会退出调用批处理文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T14:24:58.870

我怀疑这`build.bat`是另一个批处理文件。然后你应该使用`CALL`它来运行它，否则它会“替换”当前的批处理文件而不是返回它。

# javascript - 诺基亚 Here JavaScript API 在 iOS 中禁用捏合缩放

> ID：14304282
> 
> 赞同：1
> 
> 时间：2013-01-13T14:12:03.723
> 
> 标签：javascript, ios, api, map, here-api

我刚刚开始使用 Nokia Here API，它运行良好，但我注意到地图在 iOS 上禁用了捏缩放，在 iPhone 和 iPad 上。

这是一个例子：[http ://seemann.com/mapsample/](http://seemann.com/mapsample/)

在桌面上的大多数浏览器上都可以正常工作，但在 iOS 上无法进行缩放。（尚未在 Android 上测试过。）即使我关闭了 Behavior 组件，也会发生这种情况。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:03:16.543

A basic pinch zoom functionality **does exist** in the HERE Maps API for Javascript - you just need to include the `Behavior` component as shown.

```
var map = new nokia.maps.map.Display(mapContainer, {
    // initial center and zoom level of the map
    center: [52.51, 13.4],
    zoomLevel: 10,
    components: [
        // We add the behavior component to allow panning / zooming of the map
        new nokia.maps.map.component.Behavior()]
}); 
```

To take a couple of examples

*   [Basic Map Components on developer.here.net](http://developer.here.net/apiexplorer/examples/api-for-js/getting-started/basic-map-with-components.html)
*   [Headline news story from CNN News](http://edition.cnn.com/2013/01/17/world/meast/algeria-who-is-belmoktar/index.html?hpt=hp_c1)

If you don't include `Behavior` zoom will not work - here is an example

*   [Basic Map - no Behavior on developer.here.net](http://developer.here.net/apiexplorer/examples/api-for-js/getting-started/basic-map.html)

I've just tested the examples using an iPad and they work fine for me.

According to the [browser support matrix](http://developer.here.net/docs/maps_js/topics/overview.html#browser-support) the API will work on Safari 5+ and iOS 4+

# c# - Parallel.ForEach 和聚合异常

> ID：14304287
> 
> 赞同：2
> 
> 时间：2013-01-13T14:12:23.280
> 
> 标签：c#, task-parallel-library

我想运行异步 4 层嵌套循环并打印所有聚合异常，但没有这样做。 [关注 MS 关于如何处理并行库中的异常的帖子](http://msdn.microsoft.com/en-us/library/dd460695.aspx)。

能明白为什么我总是得到随机数，而它应该打印 3^3 次吗？

```
Console.WriteLine("{0} was on counter\n\n\n",counter);

class Program
{
    static void Main()
    {
        int counter = 1;

        List<int> numbers = new List<int> {1, 2, 3};

        try
        {
            ConcurrentQueue<Exception> exceptions = new ConcurrentQueue<Exception>();
            Parallel.ForEach(numbers, number1 =>
            {
                Parallel.ForEach(numbers, number2 =>
                {
                    Parallel.ForEach(numbers, number3 =>
                    {
                        Parallel.ForEach(numbers, number4 =>
                        {
                            try
                            {
                                throw new Exception(string.Format("number {0} failed on iteration {1}",number4,counter++));
                            }
                            catch (Exception exception)
                            {
                                exceptions.Enqueue(exception);
                            }

                        });
                    });
                });
            });
            if (!exceptions.IsEmpty)
            {
                throw new AggregateException(exceptions);
            }
        }
        catch (Exception exception)
        {
            Console.WriteLine("{0} was on counter\n\n\n",counter);
            GetInnerException(exception);
        }

        Console.WriteLine("Press any key to exit.");
        Console.ReadKey();
    }

    public static void GetInnerException(Exception exception)
    {
        if (exception.GetType().Equals(typeof(AggregateException)))
        {
            AggregateException aggregateException = (AggregateException)exception;
            foreach (Exception innerException in aggregateException.InnerExceptions)
            {
                GetInnerException(innerException);
            }
        }
        else
        {
            Console.WriteLine(exception.ToString());
        }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T14:53:27.760

该`counter`变量不会以线程安全的方式递增。

由于 TPL 循环将并行运行，因此您的计数器变量将从多个线程递增。由于递增整数变量不是原子的，因此您需要使这部分成为线程安全的，例如通过使用锁或[Interlocked.Increment](http://msdn.microsoft.com/de-de/library/dd78zt0c.aspx)：

```
throw new Exception(string.Format("number {0} failed on iteration {1}", 
                                  number4, 
                                  Interlocked.Increment(ref counter))); 
```

# macos - GLSL 中的 NULL 检查

> ID：14304290
> 
> 赞同：1
> 
> 时间：2013-01-13T14:12:48.903
> 
> 标签：macos, opengl, null, glsl, fragment-shader

如果我的 vec4 为 NULL，我正在尝试检查着色器 (GLSL) 内部。我需要这个有几个原因，主要是为了让特定的显卡兼容，因为其中一些在 gl_FragColor 中传递了以前的颜色，而另一些则没有（提供需要覆盖的空 vec4）。好吧，在一台相当新的 Mac 上，有人收到了这个错误：

```
java.lang.RuntimeException: Error creating shader: ERROR: 0:107: '==' does not operate on 'vec4' and 'int'
ERROR: 0:208: '!=' does not operate on 'mat3' and 'int' 
```

这是我在片段着色器中的代码：

```
void main()
{
    if(gl_FragColor == 0) gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); //Line 107
    vec4 newColor = vec4(0.0, 0.0, 0.0, 0.0);

    [...]

    if(inverseViewMatrix != 0) //Line 208
    {
        [do stuff with it; though I can replace this NULL check with a boolean]
    }

    [...]

    gl_FragColor.rgb = mix(gl_FragColor.rgb, newColor.rgb, newColor.a);
    gl_FragColor.a += newColor.a; 
} 
```

如您所见，我在开始时对 gl_FragColor 进行了 0/NULL 检查，因为有些显卡会在那里传递有价值的信息，但有些则不会。现在，在那台特殊的 Mac 上，它不起作用。我做了一些研究，但找不到有关如何在 GLSL 中进行正确 NULL 检查的任何信息。甚至有一个，还是我真的需要在这里制作单独的着色器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T15:35:47.320

所有用于读取的变量，即输入变量总是提供合理的值。作为*输出*变量，`gl_FragColor`不是这些变量之一！

在这段代码中

```
void main()
{
    if(gl_FragColor == 0) gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); //Line 107
    vec4 newColor = vec4(0.0, 0.0, 0.0, 0.0); 
```

您要做的第一件事就是从`gl_FragColor`. GLSL 规范明确指出，当进入片段着色器阶段时（第**1点），***输出变量*的值是未定义的：`gl_FragColor`

 **> 在以下三种情况中的任何一种情况下，输出变量的值都将是*未定义的：*
> 
> 1.  在执行开始时。
> 2.  在每个同步点，除非
>     *   该值在上一个同步点之后定义明确，并且此后没有被任何调用写入，或者
>     *   该值是由自上一个同步点以来的一个着色器调用写入的，或者
>     *   自上一个同步点以来，该值由多个着色器调用写入，并且所有此类调用执行的最后一次写入写入相同的值。
> 3.  当被着色器调用读取时，如果
>     *   该值在上一个同步点处未定义，并且此后未由相同的着色器调用写入，或者
>     *   输出变量由前一个和下一个同步点之间的任何其他着色器调用写入，即使该分配发生在读取之后的代码中。

只有在第一次写入输出变量的元素后，它的值才被定义。所以你在那里做的所有事情都是没有意义的。它“不起作用”是完全允许的，并且是您的错误。

您正在调用未定义的行为，从技术上讲，您的计算机可以变得有意识，在街上追赶您并擦除您的所有数据作为对此的替代反应。

* * *

在 GLSL 中，*vec4*是一种常规数据类型，就像 int 一样。它不是某种指向可能是空指针的数组的指针。充其量它有一些默认值不会被调用*glUniform*覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:40:01.043

GLSL 着色器中的变量总是被定义的（否则，你会得到一个链接器错误）。如果您不为这些值提供数据（通过不加载适当的统一，或将属性绑定到*in*或*属性*变量），则这些变量中的值将是未定义的（即垃圾），但存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-04T02:13:32.197

即使你不能*有空值*，你也可以测试*未定义*的变量。这是我用来调试着色器的技巧：

```
 ...
  /* First we test for lower range */
  if(suspect_variable.x < 0.5) {
      outColour = vec4(0,1,0,0); /* Green if in lower range*/
  } else if(suspect_variable.x >= 0.5) { /*Then for the higher range */
      outColour = vec4(1,0,0,0); /* Red if in higher range */
  } else {
      /* Now we have tested for all real values.
         If we end up here we know that the value must be undefined */
      outColour = vec4(0,0,1,0); /* Blue if it's undefined */
  } 
```

您可能会问，什么会使变量未定义？数组的超出范围访问将导致它未定义；

```
const int numberOfLights = 2;
uniform vec3 lightColour[numberOfLights];
...
for(int i = 0; i < 100; i++) {
   /* When i bigger than 1 the suspect_variable would be undefined */
   suspect_variable = suspect_variable * lightColour[i];
} 
```

当您无法访问真正的调试工具时，这是一个简单易用的技巧。**

# jquery - 使用 CSS3 旋转时无法淡出

> ID：14304293
> 
> 赞同：0
> 
> 时间：2013-01-13T14:12:55.480
> 
> 标签：jquery, html, css, rotation, transform

我在使用 Google Chrome 时遇到了一个相当奇怪的问题。应用 CSS3 变换（旋转）后，我无法淡出 H1 元素。这似乎是一个奇怪的问题，除了使用图像之外我无法解决。有没有人知道解决这个问题的方法，如果我不需要的话，我不想用图像破解它。

这是特定 H1 的 CSS

```
.studieprogramLinje h1{
color:#fff;
-webkit-transform: rotate(90deg);
-moz-transform: rotate(90deg);
-ms-transform: rotate(90deg);
-o-transform: rotate(90deg);
 transform: rotate(90deg);
 white-space: nowrap;
 margin-top:270px;
 font-weight: 100;
 } 
```

而 JQuery 部分只是：

```
$('#mobilApputvikling h1').fadeOut(200); 
```

如果我像这样淡出所有 h1 元素，它似乎正在工作：

```
$('h1').fadeOut(200); 
```

但不是这个特定的。但是，如果我删除 CSS3 中的旋转，它会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:18:53.470

您是否尝试过使用 jQuery animate 来代替？可能会产生相同的效果，但可能是一种解决方法。

```
$('h1').animate({ opacity: 0 }, 200); 
```

如果没有解决方法，提交错误如何：[Chromium Bugs](http://www.chromium.org/for-testers/bug-reporting-guidelines)

# php - Joomla 3.0 中的 Jlog Getinstance？

> ID：14304297
> 
> 赞同：2
> 
> 时间：2013-01-13T14:13:12.347
> 
> 标签：php, joomla, joomla-extensions

我为 Joomla 2.5 做了一个小扩展，它工作了。但问题是当我试图使其与 Joomla 3 兼容时，我收到有关 JLog::getInstance 方法未找到的错误。我知道他们删除了它并被 JLogLogger 取代，但这也不起作用。

有人可以帮助我并使其工作吗？我在 Joomla 2.5 中使用的代码是

```
$log = JLog::getInstance();
$log->addEntry(array('comment' => $server['REMOTE_ADDR'] . " is allowed")); 
```

我创建了一个名为 $log 的变量，因为我更多地使用它。这只是扩展中的一小段代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T04:39:11.037

这段代码来自一个[类似的问题](https://stackoverflow.com/questions/7586142/logging-in-joomla-platform-11-jlog)：

```
jimport('joomla.log.log');

JLog::addLogger(
    array(
            // Set the name of the log file
            'text_file' => 'test.log.php',
            // (optional) you can change the directory
            'text_file_path' => 'somewhere/logs'
     )
);

// start logging...
JLog::add('Starting to log'); 
```

如果上面的代码不起作用，请尝试`jimport('joomla.log.log');`自行添加到文件的顶部。

希望这可以帮助

# actionscript-3 - Flash的协调系统

> ID：14304298
> 
> 赞同：0
> 
> 时间：2013-01-13T14:13:20.613
> 
> 标签：actionscript-3

感谢您花时间阅读我的问题。所以，我有一个添加到舞台的影片剪辑，其中有另一个影片剪辑的实例。让我们将另一个第一个影片剪辑称为 A。第二个的实例名称将是 thing。所以我这样做：

```
var a:A = new A();
stage.addChild(a); 
```

这很好，a 的坐标很好，但 a.thing.x 始终基于它与 a 的距离。有什么方法可以让 a.thing.x 在舞台坐标系上显示？我希望我的问题足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:23:43.933

```
// position in stage coordinate system
var targetAbsolutePoint:Point = new Point(100, 100);

// position in "a" MovieClip coordinate system
var targetRelativePoint:Point = a.globalToLocal(targetAbsolutePoint);

// set position
thing.x = targetRelativePoint.x;
thing.y = targetRelativePoint.y; 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#globalToLocal%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#globalToLocal%28%29)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#localToGlobal%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#localToGlobal%28%29)

在评论中回答您的问题：

[http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7df5.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7df5.html)

DisplayObject 的“x”和“y”属性相对于其父显示对象轴的 0,0 坐标。

因此，如果“a”MovieClip 位于 (10, 50) 点，“thing”MovieClip 位于“a”MovieClip 内的 (20, 40) 点，那么为了找到“thing”MovieClip 的绝对坐标，我们应该计算：

x = "a" MovieClip 的 "x" 坐标 + "thing" MovieClip 的 "x" 坐标 = 10 + 20 = 30

和

y = "a" MovieClip 的 "y" 坐标 + "thing" MovieClip 的 "y" 坐标 = 50 + 40 = 90

但是因为可能有几个嵌套的父 DisplayObjects 所以使用 localToGlobal 和 globalToLocal 方法而不是

absoluteX = 我的影片剪辑的 x + 我的影片剪辑父项的 x + 我的影片剪辑父项的父项的 x 依此类推

更方便

# c++ - 如何取消 std::async 函数？

> ID：14304299
> 
> 赞同：10
> 
> 时间：2013-01-13T14:13:41.520
> 
> 标签：c++, multithreading, c++11, crash, stdasync

> **可能重复：**
> [有没有办法在 C++11 中取消/分离未来？](https://stackoverflow.com/questions/12086622/is-there-a-way-to-cancel-detach-a-future-in-c11)

有一个使用`std::future`and异步运行的成员函数`std::async`。在某些情况下，我需要取消它。（该函数在对象附近连续加载，有时对象在加载时超出范围。）我已经阅读了解决同一问题的[这个问题](https://stackoverflow.com/questions/12086622/is-there-a-way-to-cancel-detach-a-future-in-c11)的答案，但我无法让它工作。

这是与我的实际程序具有相同结构的简化代码。在异步运行时调用`Start()`and`Kill()`会导致崩溃，因为`input`.

在我看来，代码应该如下工作。当`Kill()`被调用时，运行标志被禁用。下一个命令`get()`应该等待线程结束，因为它会检查运行标志，所以它很快就会结束。线程取消后，`input`指针被删除。

```
#include <vector>
#include <future>
using namespace std;

class Class
{
    future<void> task;
    bool running;
    int *input;
    vector<int> output;

    void Function()
    {
        for(int i = 0; i < *input; ++i)
        {
            if(!running) return;
            output.push_back(i);
        }
    }

    void Start()
    {
        input = new int(42534);
        running = true;
        task = async(launch::async, &Class::Function, this);
    }

    void Kill()
    {
        running = false;
        task.get();
        delete input;
    }
}; 
```

似乎线程没有注意到将运行标志切换为假。我的错误是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T17:13:26.217

由于实际上没有人回答这个问题，但我会这样做。

对变量的写入和读取`running`不是原子操作，因此代码中没有任何内容会导致两个线程之间的任何同步，因此无法确保异步线程看到变量已更改。

可能发生的一种可能方式是编译器分析 的代码`Function`，确定该线程中的变量永远不会写入任何内容，并且由于它不是原子对象，因此其他线程写入的内容不需要可见，因此完全合法地将代码重新排列为：

```
void Function()
{
    if(!running) return;
    for(int i = 0; i < *input; ++i)
    {
        output.push_back(i);
    }
} 
```

显然，在此代码中，如果`running`在函数启动后发生更改，它不会导致循环停止。

C++ 标准允许您同步两个线程的方法有两种，一种是使用互斥锁并仅`running`在互斥锁锁定时读取或写入变量，或者使该变量成为原子变量。在您的情况下，`running`从更改`bool`为`atomic<bool>`将确保对变量的写入与从中读取同步，并且异步线程将终止。

# java - 您将如何为建筑物、楼层和空间设计类结构 - 面向对象

> ID：14304300
> 
> 赞同：-1
> 
> 时间：2013-01-13T14:13:48.713
> 
> 标签：java, c++, oop, object-oriented-analysis, class-structure

对于这些要求，什么是优雅的 OOP 设计？

*“为建筑物、楼层和空间设计类结构。空间可以是公寓、商店或办公室。包括您认为有趣的任何属性、领域和方法。”*

我已经尝试过了，但我认为这不是一个好的解决方案：

```
space {
    floor {
    }
    building {
        floor{
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T03:24:19.597

让我们分析一下需求。

你有 3 个对象；建筑、楼层和空间。

建筑物可以有一层或多层。

一层可以有一个或多个空间。

您应该能够从中开发对象及其关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T08:39:05.573

这里有一些伪 C++ 可以帮助您入门。我没有提供任何公共成员 - 只是有关系的结构让你开始。

至于“一个空间可以属于多个建筑物”的问题。这是一个练习，我会留给你。

```
class Building;
class Space;
class Floor;

class Building
{
   int number_of_floors;
   vector<Floor*> _floors;  // list of floors in the building

   // building specific data
   string name;
   string address;
};

class Floor
{
   Building* pBuilding; // building for which this floor belongs
   int floor_number;    // the floor number (e.g 1-99)
   vector<Space*>; // list of spaces on this floor
}; 

class Space
{
public:
    enum SpaceType
    {
        Apartment,
        Store,
        Office
    };

private:
    SpaceType _spacetype;
    Floor* pFloor;   // floor in which this space exists on
}; 
```

# php - 如何优化 preg_match_all 或其他替代方案？

> ID：14304302
> 
> 赞同：1
> 
> 时间：2013-01-13T14:14:03.867
> 
> 标签：php, html, performance, optimization

我有这个代码：

```
function toDataUri( $html )
{
  # convert css URLs to data URIs
  $html = preg_replace_callback( "#(url\([\'\"]?)([^\"\'\)]+)([\"\']?\))#", 'create_data_uri', $html );
  return $html;
}

// callback function
private function create_data_uri( $matches )
{
  $filetype = explode( '.', $matches[ 2 ] );
  $filetype = trim(strtolower( $filetype[ count( $filetype ) - 1 ] ));

  // replace ?whatever=value from extensions
  $filetype = preg_replace('#\?.*#', '', $filetype);

  $datauri = $matches[ 2 ];
  $data =  get_file_contents( $datauri );

  if (! $data) return $matches[ 0 ];

  $data = base64_encode( $data );

  //compile and return a data: URI with the encoded image data
  return $matches[ 1 ] . "data:image/$filetype;base64,$data" . $matches[ 3 ];
} 
```

它基本上在 HTML 文件中搜索具有格式的 URL，`url(path)`并将它们替换为 base 64 Data URIS。

问题是如果输入的 html 是几公斤，比如 10kb，返回最终响应需要很长时间。在这种情况下我们可以做任何优化吗？或者您有任何其他解决方案，当给定 html 时，它会搜索`url(path)`匹配项并将它们转换为数据 uris ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T14:16:47.813

这个表达式已经很便宜了——从一个固定的字符串开始，不需要回溯。

在 PCRE 中，有一个`S`修饰符可以启用一些正则表达式优化，但它只对没有固定前缀的模式很重要。

它不应该很慢——对于像这样的简单正则表达式来说，10KB 并不多。也许瓶颈在其他地方？

*   如果您`url(`在解析的文件中未关闭并且文件`)`末尾没有，那么它会扫描更多。`[^\"\'\)]{0,1000}`会限制这一点。但这是一个小的优化，只有当文件中存在病态语法错误时才会产生影响。
*   您可以删除`()`整个表达式。第 0 次匹配总是捕获整个字符串。

# php - HTML仅转义某些字符和字符组合？

> ID：14304307
> 
> 赞同：3
> 
> 时间：2013-01-13T14:14:37.237
> 
> 标签：php, html

我正在管理一个博客，其中少数人可以提交自己的文章和条目。我希望他们能够通过 HTML 嵌入视频（以及他们选择的粗体、斜体等文本）。如何在维护站点安全的同时做到这一点？

如果我不对实际的文章空间进行 HTML 转义，那么公开的评论就会毁掉我的网站。有没有办法选择性地转义某些字符组合？

编辑; 希望不用编写我自己的解析器。我只想要简单的东西，比如`<b>`，`<i>`等标签未转义，以及视频和链接嵌入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T14:18:52.950

我使用 SO 使用的东西。它是开源的，并具有多种语言的解析器。

名字是*WMD*和问题[*“WMD 编辑器开源项目在哪里？”*](https://meta.stackexchange.com/questions/71822/wheres-the-wmd-editor-open-source-project) 有一些质量保证材料概述了这个编辑器。

问题[*“running showdown.js serverside to conver Markdown to HTML (in PHP)”*](https://stackoverflow.com/questions/724218/running-showdown-js-serverside-to-conver-markdown-to-html-in-php)有一些 QA 材料概述了 PHP 中的一些 Markdown 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:17:29.533

大多数网站（例如 SO）使用的最简单的方法是引入您自己的特殊标记，然后将其转换为您想要的功能。

例如，SO 使用星号 ( `*`) 斜体和 ( `**`) 粗体（编辑：在 HTML 标记本身旁边**`<b></b>`**，请参阅此答案的来源）。

其他网站使用`[b]`和`[i]`标记。您可以有一个`[video=http://myvideo.com]`标签，然后您的 PHP 会将其转换为适当的 HTML 实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T14:17:38.243

您可以安全地 HTML 转义所有内容。您的视频的 URL 不会受到您想要进行的任何转义的影响。

# python - 使用 Flask-WTForms 选择性地要求字段的正确方法是什么？

> ID：14304308
> 
> 赞同：5
> 
> 时间：2013-01-13T14:15:10.377
> 
> 标签：python, flask, wtforms, flask-wtforms

我正在将 Flask 与 Flask-WTForms 一起使用，并且正在编写一个管理页面，可以在其中更新用户的值 - 包括密码。

我正在使用与注册相同的表单页面，但由于不需要更新密码，我不想要求它。使用 Flask-WTForms 执行此操作的正确方法是什么？

我已经`UserForm`进去了`forms.py`，我正在考虑制作一个自定义验证器，并有一个文件级`require_password`选项可以覆盖默认检查。我对 WTForms 还很陌生，对 Flask 也有些陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T14:28:37.733

该解决方案似乎可以满足我的要求：

在`forms.py`,

```
from flask.ext.wtf import Optional

def make_optional(field):
    field.validators.insert(0, Optional())

#Rest of code here... 
```

然后在我的烧瓶端点内，我可以调用：

```
user_form = UserForm()
forms.make_optional(user_form.password)
if user_form.validate_on_submit():
    #Go on your merry way! 
```

* * *

这似乎符合我的要求 - 保留所有其他验证（例如确认），同时在没有密码的情况下忽略任何内容。

# twitter-bootstrap - 引导链接到部分 - 标题被 navbar-fixed-top 隐藏

> ID：14304309
> 
> 赞同：4
> 
> 时间：2013-01-13T14:15:17.543
> 
> 标签：twitter-bootstrap

我在使用带有引导程序的部分参考链接时遇到了一些麻烦。我有一个固定在页面顶部的导航栏，然后是 span3 中的一些部分导航，因为此处的项目链接到 span9 中的标签。我将正文填充了 60 像素，以便页面内容位于固定导航栏下方，但是当我使用部分链接时，相关内容与导航栏下方的页面顶部对齐 - 这意味着标题被隐藏。

我看过[Bootstrap: affix navigation blocking scroll-to section title](https://stackoverflow.com/questions/13184409/bootstrap-affix-navigation-blocking-scroll-to-section-title) 但这会填充部分本身，这会改变间距。我想将页面间距保持为 Bootstrap 的默认值。

当我使用部分链接时，如何阻止 span9 中的内容在导航栏下消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:28:32.247

只需添加`padding`到元素的顶部，然后添加一个负数`margin`。您只需要`15px`根据导航栏的高度调整两者的值（在这种情况下），如果它即使在移动设备上也是固定的，等等。

这是[一个工作小提琴](http://jsfiddle.net/adamdehaven/h4Ym9/2/)

**HTML**

```
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner"> <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

        <div class="nav-collapse collapse">
            <ul class="nav">
                <li><a href="#description1">Description 1</a>

                </li>
                <li><a href="#description2">Description 2</a>

                </li>
                <li><a href="#description3">Description 3</a>

                </li>
                <li><a href="#description4">Description 4</a>

                </li>
            </ul>
        </div>
    </div>
</div>
<section id="description1">
    <div class="row">
        <div class="span9">
            <div class="content-bubble drop-shadow curved">
                 <h2 class="heading">Product Description 1</h2>

                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p class="last">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
            </div>
            <div class="content-bubble-triangle"></div>
        </div>
    </div>
</section>
<section id="description2">
    <div class="row">
        <div class="span9">
            <div class="content-bubble drop-shadow curved">
                 <h2 class="heading">Product Description </h2>

                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p class="last">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
            </div>
            <div class="content-bubble-triangle"></div>
        </div>
    </div>
</section>
<section id="description3">
    <div class="row">
        <div class="span9">
            <div class="content-bubble drop-shadow curved">
                 <h2 class="heading">Product Description 3</h2>

                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p class="last">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
            </div>
            <div class="content-bubble-triangle"></div>
        </div>
    </div>
</section>
<section id="description4">
    <div class="row">
        <div class="span9">
            <div class="content-bubble drop-shadow curved">
                 <h2 class="heading">Product Description 4</h2>

                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p>Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                <p class="last">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
            </div>
            <div class="content-bubble-triangle"></div>
        </div>
    </div>
</section> 
```

**CSS**

```
.navbar-inner{
    min-height:95px;
}
section {
    padding-top: 15px;
    margin-top: -15px;
} 
```

# c# - unitTest wmi PerformanceCounter

> ID：14304311
> 
> 赞同：1
> 
> 时间：2013-01-13T14:15:31.130
> 
> 标签：c#, unit-testing, wmi

我创建了 PerformanceCounter 来计算已处理项目的总数。

```
PerformanceCounter pCo = new PerformanceCounter(CategoryName, CounterName, false);
...
pCo.Increment(); 
```

我想运行一个测试来检查cuonter的输出。

如何从 WMI 读取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:02:23.763

在stackoverflow 上还有一个关于[单元测试WMI](https://stackoverflow.com/questions/44338/unit-testing-with-network-reliant-code)的问题，您可能会感兴趣。

您可以创建模拟性能计数器生成的数据的模拟。

我有一个我知道的建议与传统思维背道而驰：安装并允许性能计数器作为单元测试的一部分运行，测试数据并在单元测试期间清理，卸载性能计数器。我没有明确地做这个性能计数器，但是我创建了单元测试来安装/卸载“某物”作为测试的一部分。

# ruby-on-rails - Rails has_many 通过在创建时设置属性

> ID：14304314
> 
> 赞同：0
> 
> 时间：2013-01-13T14:15:51.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-many-through

我通过 Ruby on Rails 中的两个模型之间的关联设置了一个 has_many。设置如下。模型是用户和文档，连接模型是所有权。模型定义如下：

```
class Ownership < ActiveRecord::Base
  attr_accessible :document_id, :user_id 
  belongs_to :user
  belongs_to :document 
end

class User < ActiveRecord::Base
  has_many :ownerships
  has_many :documents, :through => :ownerships
end

class Document < ActiveRecord::Base
  has_many :ownerships
  has_many :users, :as => :owners, :through => :ownerships
end 
```

现在我的问题是如何在创建文档时将创建文档的用户设置为文档的所有者。该项目还使用 devise、cancan 和 rolify 进行用户处理。我试图像这样在 Codument 控制器的新动作中设置它，但没有成功

```
def new 
  @document = Document.new

  @document.users = current_user

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @document }
  end 
end 
```

我怎样才能正确地做到这一点？我的 Document 控制器的新操作是否适合这样的事情？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:53:02.567

首先，您需要在控制器的 create 方法中分配用户。其次，由于一个文档可以有许多用户，@document.users 是一个可枚举的，不能简单地通过执行分配单个用户

```
@document.users = current_user 
```

你可以这样做：

```
@document.owners << current_user 
```

在创建方法中。请注意，根据您的模型，文档具有所有者而不是用户。

改变

```
has_many :users, :as => :owners, :through => :ownerships 
```

到

```
has_many :owners, source: :user, through: :ownerships, foreign_key: :user_id 
```

在您的文档模型中。

这会在保存文档时存储当前用户。

# amazon-web-services - AWS API 限制：如何以编程方式了解

> ID：14304315
> 
> 赞同：3
> 
> 时间：2013-01-13T14:15:59.183
> 
> 标签：amazon-web-services

如果我没记错的话，可以根据这些数字计算当前的亚马逊广告 API 限制：

2,000 + 500 * [过去 30 天内每天驱动的平均员工收入]/24

有什么方法可以获得一定数量的剩余请求吗？

例如：2605 已经完成，1300 可以完成，直到我的帐户（或类似的东西）的当前时间结束。

还是我应该只依赖 503 错误消息（“超出每小时 2000 个请求的帐户限制”）？

# tastypie - 自定义句柄发布错误 - 重复条目

> ID：14304319
> 
> 赞同：2
> 
> 时间：2013-01-13T14:16:07.517
> 
> 标签：tastypie

是否可以在发布请求中处理重复条目错误，以便我可以返回现有条目的详细信息而不是错误消息？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-10T06:04:52.337

是的。您必须覆盖`obj_create()`定义。这是一个例子

```
def obj_create(self, bundle, request=None, **kwargs):
    bundle = self.full_hydrate(bundle)
    attempt = Attempt.objects.filter(**kwargs)
    if attempt.count() < 1:
        bundle.obj = Attempt(*kwargs)
    else:
        logger.info("Updating attempt")
        bundle.obj = attempt[0]
    return bundle 
```

# cocos2d-iphone - '未找到选择器的签名 - 它是否具有以下形式？-(void) 名称：(ccTime) dt' - cocos2d

> ID：14304321
> 
> 赞同：0
> 
> 时间：2013-01-13T14:16:10.710
> 
> 标签：cocos2d-iphone, xcode4.5

我不断收到相同的崩溃报告“'未找到选择器的签名 - 它是否具有以下形式？-（void）名称：（ccTime）dt'”。这现在变得很烦人，我只想让背景无限滚动。

这是我的代码：

```
-(id) init {

// always call "super" init
// Apple recommends to re-assign "self" with the "super" return value
if( (self=[super init])) {
    self.isTouchEnabled = YES;
    self.isAccelerometerEnabled = YES;

    CGSize screenSize = [CCDirector sharedDirector].winSize;

  /*CCSprite *Player = [CCSprite spriteWithFile:@"Icon.png"];
    Player.position = ccp(screenSize.width/2 -110, screenSize.height/2);
    Player.scale = 0.7;
    [self addChild:Player];

    [self scheduleUpdate];*/

    CCLOG(@"Screen width %0.2f screen height %0.2f",screenSize.width,screenSize.height);

    b2Vec2 gravity;
    gravity.Set(0.0f, -10.0f);

    bool doSleep = true;

    world = new b2World(gravity, doSleep);
    world->SetContinuousPhysics(true);

    // Debug Draw functions
    /*m_debugDraw = new GLESDebugDraw( PTM_RATIO );
    world->SetDebugDraw(m_debugDraw);

    uint32 flags = 0;
    flags += b2DebugDraw::e_shapeBit;
    //flags += b2DebugDraw::e_jointBit;
    //flags += b2DebugDraw::e_aabbBit;
    //flags += b2DebugDraw::e_pairBit;
    //flags += b2DebugDraw::e_centerOfMassBit;
    m_debugDraw->SetFlags(flags);*/

    // Define the ground body.
    b2BodyDef groundBodyDef;
    groundBodyDef.position.Set(0, 0); // bottom-left corner

    // Call the body factory which allocates memory for the ground body
    // from a pool and creates the ground box shape (also from a pool).
    // The body is also added to the world.
    b2Body* groundBody = world->CreateBody(&groundBodyDef);

    // Define the ground box shape.
    b2PolygonShape groundBox;

    // bottom
    groundBox.SetAsEdge(b2Vec2(0,0), b2Vec2(screenSize.width/PTM_RATIO,0));
    groundBody->CreateFixture(&groundBox,0);

    // top
    groundBox.SetAsEdge(b2Vec2(0,screenSize.height/PTM_RATIO),         b2Vec2(screenSize.width/PTM_RATIO,screenSize.height/PTM_RATIO));
    groundBody->CreateFixture(&groundBox,0);

    //Set up sprite

    BG1 = [CCSprite spriteWithFile:@"SkyAndClouds.png"];
    BG1.anchorPoint = ccp(0,0);
    BG1.position = ccp(0, 0);
    BG1.scale = 0.5;
    [self addChild:BG1];

    BG2 = [CCSprite spriteWithFile:@"SkyAndClouds.png"];
    BG2.anchorPoint = ccp(0,0);
    BG2.position = ccp([BG1 boundingBox].size.width-1,0);
    [self addChild:BG2];

    [self schedule: @selector(AnimatedBG:) interval:0];

    CCSpriteBatchNode *batch = [CCSpriteBatchNode batchNodeWithFile:@"Stick.png" capacity:150];
    [self addChild:batch z:0 tag:kTagBatchNode];

    [self addNewSpriteWithCoords:ccp(screenSize.width/2-110, screenSize.height/2)];
    [self addZombieWithCoords:ccp(screenSize.width/2+240, screenSize.height/2)];

    CCLabelTTF *label = [CCLabelTTF labelWithString:@"Stick, you Better Run!" fontName:@"Helvetica" fontSize:16];
    [self addChild:label z:0];
    [label setColor:ccc3(0,0,255)];
    label.position = ccp( screenSize.width/2, screenSize.height-17);

    [self schedule: @selector(tick:)];
}

return self;
}

-(void)AnimatedBG {
    BG1.position = ccp(BG1.position.x-1,BG1.position.y);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:47:15.463

您的 AnimatedBG 方法应定义为：

```
-(void) AnimatedBG:(ccTime)dt {

} 
```

您还应该确保您有一个预定滴答的定义：方法：

```
-(void) tick:(ccTime)dt {

} 
```

# cuda - 如何使用 CUDA Thrust 用最后一个非缺失值填充数组中的缺失值？

> ID：14304322
> 
> 赞同：3
> 
> 时间：2013-01-13T14:16:12.407
> 
> 标签：cuda, gpgpu, thrust, missing-data

我的缺失值标志是 0，所以`[0, A, B, 0, 0, C, 0]`我想要`[0, A, B, B, B, C, C]`（如果不存在以前的非缺失值，则保留为 0）。

我正在使用 CUDA Thrust 库，并且想知道是否有一种快速的方法可以做到这一点，而无需遍历每个元素。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T14:56:42.297

似乎运作良好。

```
#include <thrust/device_vector.h>
#include <thrust/scan.h>
#include <iterator>

template<class T>
struct FillMissing
{
    __host__ __device__ T operator()(const T& res, const T& dat)
    {
        return dat == T(0) ? res : dat;
    }
};

int main()
{
    thrust::device_vector<double> vec(7);
    vec[1] = 2;
    vec[2] = 1;
    vec[5] = 3;

    thrust::inclusive_scan(
            vec.begin(), vec.end(),
            vec.begin(),
            FillMissing<double>());

    thrust::copy(
            vec.begin(), vec.end(),
            std::ostream_iterator<double>(std::cout, " "));
    std::cout << std::endl;
} 
```

输出：

```
0 2 1 1 1 3 3 
```

# ruby - 来自 2 个不同但密切相关的 ruby 代码的相同键未正确反映默认值

> ID：14304324
> 
> 赞同：0
> 
> 时间：2013-01-13T14:16:21.043
> 
> 标签：ruby, ruby-1.9, ruby-1.9.3

请按照以下代码：

***第一部分***

```
> h = { "a" => 100, "b" => 200 }
=> {"a"=>100, "b"=>200}
> h.default = "Go fish"
=> "Go fish"
> h["a"]
=> 100
> h["z"]
=> "Go fish"
> h.default = proc do |hash, key|
*   hash[key] = key + key
> end
=> #<Proc:0x208bee8@(irb):5>
> h[2]
=> #<Proc:0x208bee8@(irb):5>
> h["cat"]
=> #<Proc:0x208bee8@(irb):5> 
```

***第二部分***

```
> h = { "a" => 100, "b" => 200 }
=> {"a"=>100, "b"=>200}
> h.default_proc = proc do |hash, key|
*   hash[key] = key + key
> end
=> #<Proc:0x1e21df8@(irb):2>
> h[2]
=> 4
> h["cat"]
=> "catcat" 
```

现在我很惊讶地看到，为什么`h[2] and h["cat"]`在`part-I and part-II`.

你能解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:20:32.850

**为什么？**（哲学的）

如果你想要一个`Proc`s 的哈希值怎么办？您不能只将默认*值*设置为 a `Proc` *to run*，因为不会有（微不足道的）机制将它与 a `Proc`to *return*区分开来。

s 的映射`Proc`可用于实现简单的状态机或外部 DSL。

**为什么？**（技术的）

因为是这样`[]`写的：

```
VALUE
rb_hash_aref(VALUE hash, VALUE key)
{
    st_data_t val;

    if (!RHASH(hash)->ntbl || !st_lookup(RHASH(hash)->ntbl, key, &val)) {
        if (!FL_TEST(hash, HASH_PROC_DEFAULT) &&
            rb_method_basic_definition_p(CLASS_OF(hash), id_default)) {
            return RHASH_IFNONE(hash);
        }
        else {
            return rb_funcall(hash, id_default, 1, key);
        }
    }
    return (VALUE)val;
} 
```

正如文档`default`所说：

> 无法将默认值设置为将在每次键查找时执行的 Proc。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T14:26:17.697

*   `Hash#default=`设置在没有这样的键的情况下要**返回的值。**您在 Part-I 中将其设置为 proc，这就是您看到的返回内容。
*   `Hash#default_proc=`**设置要在自身和密钥上调用**的 proc ，以防没有这样的密钥。如果你这样做了`hash[2] = 2 + 2`，那么`hash[2]`就会返回`4`。如果你这样做了`hash["cat"] = "cat" + "cat"`，那么`hash["cat"]`就会返回`"catcat"`。

# php - 缓慢的 php/mysql 结果 - 显示加载图像？

> ID：14304326
> 
> 赞同：0
> 
> 时间：2013-01-13T14:16:41.943
> 
> 标签：php, jquery, mysql, ajax

我有一个正在运行`php/MySQL`以查询和返回结果的网站。结果集超过 40,000 并且查询变得越来越慢。我想找到一种在页面构建时显示加载图像的简单方法。我可以在任何运行 JavaScript 的页面上做到这一点，但我假设因为 php 是服务器端，所以我需要以不同的方式处理加载。

我看到 AJAX 有一个`load()`功能，我可以在其中调用 php 页面并假定在加载请求时显示加载图像。这是最好的方法吗？我不敢相信没有很多示例脚本四处飘荡，因为这一定是一个非常普遍的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T14:22:12.447

您是否使用 AJAX 请求来执行此操作？如果是这样，它就像在发送请求时使用 JavaScript 显示图像一样简单，然后在成功/错误时再次隐藏它。您可以`<img>`使用“display：none”保留一个标签，并根据需要打开/关闭它。

如果您不使用 AJAX，那么这将是不可能的，因为在查询完成之前页面不存在。

附带说明：说“AJAX 有一个`load()`功能”是不正确的。AJAX 不是代码库或库，它是一种技术。也许您的意思是 jQuery.ajax 或其他一些库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:26:14.990

你必须使用 Ajax，我认为[使用 PHP 和 AJAX 将数据从表单加载到 MySQL](https://stackoverflow.com/questions/12030072/loading-data-from-form-into-mysql-with-php-and-ajax)将很有用，并遵循[jQuery API](http://api.jquery.com/jQuery.ajax/) for Ajax 参考

# python - 无法获取 winsound.Beep 工作

> ID：14304328
> 
> 赞同：5
> 
> 时间：2013-01-13T14:16:45.470
> 
> 标签：python

我正在尝试`Beep`用命令发出一些声音`winsound.Beep`。但是，当我使用时，`winsound.Beep(500, 500)`我什么也听不到。`winsound.MessageBeep`但是，我确实`winsound.PlaySound`可以播放声音。有什么想法我应该做什么？

我正在尝试做的事情：我想编写一个用于训练音程的小练习程序：计算机发出第一个音，然后是第二个音，您将不得不猜测音程是多少。为此，我需要音调，我可以设置频率的音调。我想让它尽可能简单，任何音调的声音都可以。我不想收集一组 .wav 文件或其他任何东西。我想使用我认为大多数声卡上都有的音调发生器。winsound.Beep 似乎可以做到这一点，但欢迎提出任何其他建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-02-25T11:20:27.070

我有同样的问题。winsound.Beep 过去工作得很好，然后突然停止工作（或者这就是我的想法）。问题是有人（或某些更新）关闭了系统声音，这阻止了 Windows 手动或通过我的程序播放哔声。尝试右键单击扬声器符号，打开音量混合器并检查系统声音是否关闭或最小音量。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T14:21:35.820

你确定你的电脑有哔声吗？许多最近的计算机删除了哔哔声，因为它很烦人，而且今天大多数计算机都有声卡来播放 wav 声音（您可以播放的其他声音）。

您还可以检查以验证它是否[在此页面上激活](http://www.howtogeek.com/howto/windows/turn-off-the-annoying-windows-xp-system-beeps/)

IMO，我认为将哔声用于调试以外的其他事情不是一个好主意。

***编辑***

[Mayby](https://stackoverflow.com/questions/5173795/how-can-i-generate-a-note-or-chord-in-python)，您可以尝试使用带有合成算法的基本 wav 来创建声音

# c# - MVC 4 Simple Populate DropDown 从数据库模型

> ID：14304331
> 
> 赞同：9
> 
> 时间：2013-01-13T14:16:56.410
> 
> 标签：c#, entity-framework, asp.net-mvc-4

我觉得有点傻。

我正在尝试使用拳击作为功能示例来掌握 MVC 4。

我`WeightCategories`在数据库中（`Heavyweights`等），和`Boxers`。

看起来很简单。该关系是拳击手具有当前的体重类别，但是当我编辑时，我希望它能够通过下拉菜单进行更改。

如果它是我在代码中自己制作的列表，我知道该怎么做，但是我无法理解如何从`WeightCategory`表中“加载”列表并将其显示在拳击手的视图/模型中。

所以，这是我的`WeightCategory`项目代码：

```
[Table("WeightCategories")]
public class WeightCategory
{
    [Key]
    public int WeightCategoryId { get; set; }

    public WEIGHT_CATEGORIES WeightCategoryType { get; set; }

    [Display(Name = "Weight Category Name")]
    [Required]
    [MinLength(5)]
    public string Name { get; set; }
    [Display(Name = "Weight Limit In Pounds")]        
    public int? WeightLimit { get; set; }
} 
```

这是拳击手物品的代码

```
[Table("Boxers")]
public class Boxer
{
    [Key]
    public int BoxerId { get; set; }

    public WeightCategory CurrentWeightCategory { get; set; }

    [Required]
    public string Name { get; set; }
    public int Wins { get; set; }
    public int Losses { get; set; }
    public int Draws { get; set; }
    public int Kayos { get; set; }
} 
```

在视图中，我真的不确定如何解决这个问题，我很确定它不是自动的，我可能需要在控制器中的某个地方加载表格......我正在寻找最佳实践或其他东西。

在最后的视图中是这样的：

```
@Html.DropDownListFor(model => model.CurrentWeightCategory.WeightCategoryId,
                      new SelectList(Model.WeightCategories, "WeightCategoryId", "Name", 
                                     Model.WeightCategories.First().WeightCategoryId)) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-13T14:55:01.150

您可以设计一个视图模型：

```
public class MyViewModel
{
    public Boxer Boxer { get; set; }
    public IEnumerable<SelectListItem> WeightCategories { get; set; }
} 
```

然后让您的控制器操作填充并将此视图模型传递给视图：

```
public ActionResult Edit(int id)
{
    var model = new MyViewModel();
    using (var db = new SomeDataContext())
    {
        // Get the boxer you would like to edit from the database
        model.Boxer = db.Boxers.Single(x => x.BoxerId == id);

        // Here you are selecting all the available weight categroies
        // from the database and projecting them to the IEnumerable<SelectListItem>
        model.WeightCategories = db.WeightCategories.ToList().Select(x => new SelectListItem
        {
            Value = x.WeightCategoryId.ToString(),
            Text = x.Name
        })
    }
    return View(model);
} 
```

现在你的视图变成了视图模型的强类型：

```
@model MyViewModel
@Html.DropDownListFor(
    x => model.Boxer.CurrentWeightCategory.WeightCategoryId,
    Model.WeightCategories
) 
```

# mysql - 如果一小时内没有找到数据，Mysql 查询按每小时分组返回零

> ID：14304334
> 
> 赞同：0
> 
> 时间：2013-01-13T14:17:13.753
> 
> 标签：mysql, group-by

我有一个三个 mysql 数据库表，其中包含客户公司的通话记录。我想每小时从数据库中获取公司组的数据。如果一个小时没有数据，它应该返回零。

我正在执行此查询，但仅在数据库中有数据时才获得该小时的结果。

这是我的查询。

```
select ph_Plans.Comp_ID, Plan_Type, ph_Companies.CompanyName,
    (sum(call_length_billable)*100)/(Plan_Limit*60) as total,
    hour(calldate)
from ph_Plans
join ph_Companies
    on ph_Companies.Comp_ID = ph_Plans.Comp_ID
join cdr
    on cdr.CompanyName = ph_Companies.CompanyName
where Plan_Type='Per_Min'
    and date(calldate)='2012-10-01'
    and ph_Companies.CompanyName='"ReadySpace-EN"'
group by hour(calldate); 
```

这是得到的结果。

```
+---------+-----------+-----------------+--------+----------------+
| Comp_ID | Plan_Type | CompanyName     | total  | hour(calldate) |
+---------+-----------+-----------------+--------+----------------+
|      44 | Per_Min   | "ReadySpace-EN" | 3.7467 |              1 |
|      44 | Per_Min   | "ReadySpace-EN" | 9.4933 |             18 |
|      44 | Per_Min   | "ReadySpace-EN" | 1.6600 |             20 |
|      44 | Per_Min   | "ReadySpace-EN" | 3.7333 |             21 |
|      44 | Per_Min   | "ReadySpace-EN" | 4.6067 |              2 |
|      44 | Per_Min   | "ReadySpace-EN" | 7.6533 |             23 |
+---------+-----------+-----------------+--------+----------------+ 
```

但我想要从零小时到 23 小时的结果。如果没有数据，那么它应该返回零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:20:35.410

执行 a`JOIN`时，您只能`JOIN`在两个表上都具有与正在联接的列相对应的数据。您想要做的是`LEFT JOIN`当您仍然想要另一个表中没有相应数据的结果时。

像这样的东西：

```
select ph_Plans.Comp_ID, Plan_Type, ph_Companies.CompanyName,
    if(call_length_billable IS NULL, 0, (sum(call_length_billable)*100)/(Plan_Limit*60)) as total,
    ifnull(hour(calldate), 0) hour
from ph_Plans
left join ph_Companies
    on ph_Companies.Comp_ID = ph_Plans.Comp_ID
left join cdr
    on cdr.CompanyName = ph_Companies.CompanyName
where Plan_Type='Per_Min'
    and (date(calldate)='2012-10-01' OR calldate IS NULL)
    and (ph_Companies.CompanyName='"ReadySpace-EN"' OR ph_Companies.CompanyName IS NULL)
group by hour(calldate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:57:30.370

有两种方法可以生成 0 到 23 小时。您可以在此演示中找到两者。

1.  使用临时表
2.  使用`INFORMATION_SCHEMA.COLLATION_CHARACTER_SET_APPLICABILITY`

    *   ## [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/89ff2/1)

如果我们使用最典型的方法，那就是使用与您的表连接的临时表。鉴于以下假设，请将此连接到您的主要查询。

示例查询：

```
SELECT COALESCE(P.ID,0),
COALESCE(P.CALLDATE,0),
COALESCE(HOUR(P.CALLDATE),0) 
FROM NUMBERS A
LEFT JOIN
PLAN P
ON A.N = HOUR(P.CALLDATE)
GROUP BY A.N
; 
```

结果：

```
| COALESCE(P.ID,0) | COALESCE(P.CALLDATE,0) | COALESCE(HOUR(P.CALLDATE),0) |
----------------------------------------------------------------------------
|                0 |                      0 |                            0 |
|                1 |    2013-01-03 01:11:14 |                            1 |
|                0 |                      0 |                            0 |
|                0 |                      0 |                            0 |
|                0 |                      0 |                            0 |
|                0 |                      0 |                            0 |
|                0 |                      0 |                            0 |
|                0 |                      0 |                            0 |
|                0 |                      0 |                            0 |
|                4 |    2013-01-03 09:51:02 |                            9 |
|                3 |    2013-01-03 10:50:20 |                           10 |
|                2 |    2013-01-03 11:31:24 |                           11 |
|                5 |    2013-01-03 12:30:00 |                           12 |
|                6 |    2013-01-03 13:41:01 |                           13 |
|                0 |                      0 |                            0 |
|                0 |                      0 |                            0 |
|                7 |    2013-01-03 16:19:08 |                           16 |
|                0 |                      0 |                            0 |
|                0 |                      0 |                            0 |
|                0 |                      0 |                            0 |
|                8 |    2013-01-03 20:18:30 |                           20 |
|                0 |                      0 |                            0 |
|               10 |    2013-01-04 22:21:50 |                           22 |
|                9 |    2013-01-03 23:01:44 |                           23 | 
```

*   **假设**：

由于您已经显示了从表生成的结果，因此我使用相同的查询来加入 0-23 小时数据表。另外，在上面的演示中似乎没有完整的表模式来创建它们。此外，没有提到哪个表有 column `calldate`，所以我假设它在**`Plan_Type`**表中。

*   PS：删除了较早的代码，因为它在此答案中占用了更多空间。

# c# - C# 在完成事件中引用动态创建的图像

> ID：14304335
> 
> 赞同：0
> 
> 时间：2013-01-13T14:17:21.557
> 
> 标签：c#, wpf

我在循环中动态创建了一系列图像，以及每个图像的动画和情节提要，并且我希望在动画完成后删除图像。图像、动画和故事板存储在数组中以供参考。

动画有不同的持续时间，画布上还有其他我不想删除的元素。

这是生成图像、动画和故事板的代码：

```
for (int i = 0; i < apples.Length; i++)
{
  Image apple = new Image();
  apple.Source = new BitmapImage(new Uri(@"pack://application:,,,/fall;component/Resources/apple.png"));
  apple.Height = 48;
  apple.Width = 48;

  int x = r.Next(5, (int)cGame.ActualWidth - 53);
  int y = (int)cGame.ActualHeight - 48;

  Canvas.SetLeft(apple, x);
  Canvas.SetTop(apple, y);

  apples[i] = apple;

}

for(int i = 0; i < speeds.Length; i++)
{
  DoubleAnimation speed = new DoubleAnimation();
  speed.From = 0;
  speed.To = cGame.ActualHeight;
  speed.Duration = new TimeSpan(0, 0, 0, 0, r.Next(2, 6) * 500);

  speeds[i] = speed;
  speeds[i].Completed += new EventHandler(aniComplete);
}

for (int i = 0; i < sbs.Length; i++)
{
  Storyboard sb = new Storyboard();
  sb.Children.Add(speeds[i]);
  Storyboard.SetTarget(speeds[i], apples[i]);
  Storyboard.SetTargetProperty(speeds[i], new PropertyPath(TopProperty));

  sbs[i] = sb;
} 
```

到目前为止，我已经创建了一个完成的事件并将其附加到每个动画中。我正在使用这个删除元素：

```
canvas.Children.RemoveAt(1); 
```

但它只是按顺序删除了元素，跳过了我想保留的元素。动画在随机时间运行并具有随机持续时间，因此元素很可能会乱序完成动画。

我将如何引用已完成事件中的特定元素？我尝试引用发件人，但我不确定我应该将其转换为什么，因为 (UIElement) 似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:45:59.167

您可以从捕获适当变量的[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)`Completed`创建事件处理程序，即 Canvas 和适当的 Image 控件：

```
speeds[i].Completed += (o, e) => canvas.Children.Remove(apples[i]); 
```

有关更多信息，请参阅Lambda 表达式中的[Lambda 表达式中的](http://msdn.microsoft.com/en-us/library/bb397687.aspx)*变量范围*部分。

# c# - 添加到并发集合

> ID：14304336
> 
> 赞同：2
> 
> 时间：2013-01-13T14:17:23.110
> 
> 标签：c#, multithreading, concurrent-collections

使用并发集合（例如 ConcurrentDictionary）时，我应该使用 TryAdd 方法，还是只使用普通的旧索引分配？我的意思是，TryAdd 方法在添加时会阻塞，所以如果另一个线程试图删除该值，它必须等到添加完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:20:38.293

索引器的设置器和内部`Add`调用`TryAdd`。

```
public TValue this[TKey key]
{
  get { /*Irrelevant*/ }
  set
  {
    if ((object) key == null)
      throw new ArgumentNullException("key");
    TValue resultingValue;
    this.TryAddInternal(key, value, true, true, out resultingValue);
  }
} 
```

`Add`方法：

```
void IDictionary<TKey, TValue>.Add(TKey key, TValue value)
{
  if (!this.TryAdd(key, value))
    throw new ArgumentException(this.GetResource("ConcurrentDictionary_KeyAlreadyExisted"));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T14:35:06.283

前缀`try`与线程安全无关。它只是`Add`.

# javascript - 在我的 Web 应用程序中维护货币金额

> ID：14304342
> 
> 赞同：0
> 
> 时间：2013-01-13T14:17:47.803
> 
> 标签：javascript, forms, web-applications

这更像是一个设计问题，而不是技术问题，是在我的 Web 应用程序中维护货币数量。

场景是 - 我以 html 形式带来了一些货币金额。该表单被组织为一个行表，其中很少有数量为只读的，其他的则由用户填写。在提出起始估计后，我必须根据用户输入更新只读字段。UI 上的金额是显示美元和美分之间小数点的数字，但在后端，这些金额被计算为整数。

这是一个示例，如果要添加 2 个数字 3.33 和 6.60 并显示 sum。

这两个数字首先更改为 333 和 660，然后相加，然后使用文本操作转换为 9.93。

有人可以为这个问题提出一个设计级别的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:36:11.227

浮点数对于货币来说是一个糟糕的选择，因为如果不四舍五入，它们就无法准确地表示所有十进制值。最好使用 BigDecimal。

我不确定为什么您需要在后端使用整数来正确使用十进制货币值进行计算，但是您可以选择将数字四舍五入，或者只取它们的整数部分（截断小数）。

# macos - 如何使用 Xcode 中的 OpenGL 程序解决以下链接器错误？

> ID：14304351
> 
> 赞同：0
> 
> 时间：2013-01-13T14:18:57.283
> 
> 标签：macos, opengl

当我尝试在 Mac OS 10.8 上的 Xcode 中编译我的 C++ OpenGL 程序时出现以下错误...我该怎么办？

```
Undefined symbols for architecture x86_64:
  "_aglChoosePixelFormat", referenced from:
      _main in main.o
  "_aglCreateContext", referenced from:
      _main in main.o
  "_aglDestroyContext", referenced from:
      _main in main.o
  "_aglDestroyPixelFormat", referenced from:
      _main in main.o
  "_aglSetCurrentContext", referenced from:
      _main in main.o
  "_aglSetFullScreen", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:52:46.290

由于您使用的是 AGL，因此查看[AGL](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/agl_opengl/Reference/reference.html)的参考，您需要将框架 AGL 与 OpenGL 一起导入。

# javascript - 布局类似于 google chrome 的 tweetdeck 应用

> ID：14304354
> 
> 赞同：2
> 
> 时间：2013-01-13T14:19:06.453
> 
> 标签：javascript, jquery, html, google-chrome-app

我是网络编程新手。我想使用多列布局，其中每列将具有与列标题相对应的内容，如我的谷歌浏览器应用程序中的 tweetdeck 应用程序[http://www.tweetdeck.com/](http://www.tweetdeck.com/)中使用的那样。我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T06:53:59.610

您可以使用`flexbox`创建所需的布局 ( [JSFiddle](http://jsfiddle.net/fedosov/WyuLk/1/) )：

HTML：

```
<div class="container">
    <div class="container__column">Column 1</div>
    <div class="container__column">Column 2</div>
    <div class="container__column">Column 3</div>
    <div class="container__column">Column 4</div>
</div> 
```

CSS：

```
.container {
    display: -webkit-flex;
    display: -moz-flex;
    display: -ms-flex;
    display: flex; /* applying flexbox layout for all browsers */
}

.container__column {
    -webkit-flex: 1;
    -moz-flex: 1;
    -ms-flex: 1;
    flex: 1; /* 1 for equal column widths */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:17:24.697

你的问题有点含糊。您是在问如何实现相同的布局，还是想知道如何用内容填充列？

如果是前者，你可以这样做：

**HTML：**

```
<body>
<div id="container">
<div class="columns" id="div1"></div>
<div class="columns" id="div3"></div>
<div class="columns" id="div2"></div>
</div> 
```

**CSS：**

```
body {
    padding:0px;
    margin:0px;
}
#container {
    width:900px;
    margin:0 auto;
    text-align:center;
}
.columns {
    width:280px;
    height:250px;
    background:#CCCCCC;
}
#div1 {
    float:left;
}
#div2 {
    margin: 0 auto;
}
#div3 {
    float:right;
} 
```

给每一列内容它真的取决于你在做什么。如果是您自己的内容，您可以使用数据库和 AJAX 从 PHP 脚本中提取内容。

# c# - LINQ：将单个列表分离为多个列表

> ID：14304355
> 
> 赞同：3
> 
> 时间：2013-01-13T14:19:10.600
> 
> 标签：c#, linq

我有一个包含这些条目的数组：

```
{1, 1, 2, 2, 3,3,3, 4} 
```

我想将它们转换为（在这种情况下为 3 个列表）：

```
{1,2,3,4}
{1,2,3}
{3} 
```

有没有办法用 LINQ 或 SQL 做到这一点？我想这个操作有一个数学术语，不幸的是我不知道......

还是我必须用循环来做？

=======

编辑：我无法真正描述逻辑，所以这里有更多示例.. 它或多或少地在数组上循环多次并取每个数字一次（但每个数字每轮只有一次），直到没有数字

{1, 1, 2, 2, 3,3,3, 4, 5} 将是 {1,2,3,4,5} {1,2,3} {3}

或者

{1, 1, 2, 2,2, 3,3,3, 4, 5} 将是 {1,2,3,4,5} {1,2,3} {2,3}

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T14:33:17.620

```
private IEnumerable<List<int>> FooSplit(IEnumerable<int> items)
{
    List<int> source = new List<int>(items);
    while (source.Any())
    {
        var result = source.Distinct().ToList();
        yield return result;
        result.ForEach(item => source.Remove(item));
    }
} 
```

用法：

```
int[] items =  { 1, 1, 2, 2, 3, 3, 3, 4 };

foreach(var subList in FooSplit(items))
{
    // here you have your three sublists
} 
```

* * *

这是另一种解决方案，可读性较差，但性能会更好：

```
private IEnumerable<IEnumerable<int>> FooSplit(IEnumerable<int> items)
{
    var groups = items.GroupBy(i => i).Select(g => g.ToList()).ToList();    

    while (groups.Count > 0)
    {
       yield return groups.Select( g => 
             { var i = g[0]; g.RemoveAt(g.Count - 1); return i; });
       groups.RemoveAll(g => g.Count == 0);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T14:32:22.910

这可以完成工作：

```
 static void Main(string[] args)
    {
        int[] numbers = {1, 1, 2, 2, 3, 3, 3, 3, 4, 5, 5};
        List<int> nums = new List<int>(numbers.Length);
        nums.AddRange(numbers);

        while (nums.Count > 0)
        {
            int[] n = nums.Distinct().ToArray();
            for (int i = 0; i < n.Count(); i++)
            {
                Console.Write("{0}\t", n[i]);
                nums.Remove(n[i]);
            }
            Console.WriteLine();
        }

        Console.Read();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T14:37:14.573

这是一个替代控制台应用程序：

```
class Program
{
    class Freq
    {
        public int Num { get; set; }
        public int Count { get; set; }
    }

    static void Main(string[] args)
    {
        var nums = new[] { 1, 1, 2, 2, 3, 3, 3, 4 };
        var groups = nums.GroupBy(i => i).Select(g => new Freq { Num = g.Key, Count = g.Count() }).ToList();
        while (groups.Any(g => g.Count > 0))
        {
            var list = groups.Where(g => g.Count > 0).Select(g => g.Num).ToList();
            list.ForEach(li => groups.First(g => g.Num == li).Count--);
            Console.WriteLine(String.Join(",", list));
        }

        Console.ReadKey();
    }

} 
```

# jquery - SQLite 拖放表帮助 (BlackBerry Webworks)

> ID：14304359
> 
> 赞同：0
> 
> 时间：2013-01-13T14:19:43.313
> 
> 标签：jquery, html, blackberry-webworks

我有这个功能，当用户退出应用程序时会删除一个表。

```
function emptyTable()
{
  var db = createDatabase();
  var deleteTable = "DROP TABLE IF EXISTS tblLocalUser";
  db.transaction(function(tx) {
    tx.executeSql(deleteTable, [], goSql, ohSql);
});
}

function goSql()
{
  alert("dropped");
}

function ohSql()
{
  alert("not dropped");
} 
```

它在 Ripple Emulator 上运行良好，表被删除并且 goSql 回调函数正在执行。

但是，当我将应用程序安装到设备（9900）中时，表并没有被删除，回调也没有被执行，即使是显示错误的那个也没有。

有人可以帮忙吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:50:38.570

可能是 Javascript 运行时评估程序的差异。尝试将空列表构造函数更改为单独的行

```
db.transaction(function(tx) {
    var myList = new Array();
    tx.executeSql(deleteTable, myList, goSql, ohSql);
}); 
```

# ruby-on-rails - 应该将宝石与应用程序捆绑在一起吗？

> ID：14304361
> 
> 赞同：6
> 
> 时间：2013-01-13T14:19:50.077
> 
> 标签：ruby-on-rails, ruby, gem, bundler

刚买了一台新机器，我借此机会尝试了一些新的东西。RVM 很棒，我一直在使用 gemsets，但在阅读了几篇博客文章后，我决定使用 switch 到 rbenv 并使用 bundler 来专门管理我的 gems，如[Ruby Rogues 第 45 集](http://rubyrogues.com/045-rr-bundler-with-andre-arko/)所述。

我没有那么多合作，如果我这样做，通常是与其他一两个人合作。

`vendor/cache`bundler 文档详细说明了通过运行以下命令将 gem 打包到目录中的能力：

```
$ bundle package
$ bundle install --local 
```

可以签入源代码控制的伟大的私人宝石；我猜想是部署到干净的服务器还是更容易协作？

但是，如果您检查`Gemfile`并`Gemfile.lock`进入源代码控制，那么需要`bundle package`什么？

[Ryan Mcgeary 在 2011 年初的这篇博](http://ryan.mcgeary.org/2011/02/09/vendor-everything-still-applies/)文和 2010 年的另[一篇博](http://yehudakatz.com/2010/07/26/whats-new-in-bundler-1-0-0-rc-1/)文中提倡这种方法，Yehuda Katz 说：

> 您可能希望将捆绑的 gem 安装到不同的位置，例如应用程序本身的目录。这将确保每个应用程序都有自己的 gem 副本，并提供额外的隔离级别。

这种隔离很像我想的 gemsets，我可以想象当你有一个巨大的系统 gem 列表时，很难知道你的应用程序实际使用了哪些。

## **那么用应用程序打包宝石？**

有人这样做吗？这种做法过时了吗？

在应用程序中捆绑 gem 的最佳做法是什么以及有哪些优点/缺点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:24:34.973

我认为捆绑包的用例范围很窄。

Gemfile 和 Gemfile.lock 处理版本锁定，但最后你还是去 ruby​​gems.org 下载 gem 包安装。

我可以看到捆绑包有用的三个场景：

1）我有一个干净的生产环境，我根本不想碰rubygems.org。这可能是由于安全协议、有限的 Internet 访问等原因。最后，我有一个完全独立的应用程序包，其中所有的 gem 排成一行并准备就绪，而无需真正接触服务器环境或 Internet。

2）我想下载gem，解压它，搞定它，然后使用那个特定的。特别是如果我不想处理 git、forking 或任何类似的事情。

3) From a development team point of view, you can say that all gems being used must be packaged and local to the app. You wouldn't have to worry about developers installing different versions, touching their environments, etc. This reason is kinda weak in my eyes, but I've seen this logic once or twice.

In the end, unless you have a use case where you're actively hunting for this ability, I'd stay away from it.

# angularjs - 指令中的 ng-model 问题

> ID：14304368
> 
> 赞同：0
> 
> 时间：2013-01-13T14:20:54.020
> 
> 标签：angularjs

我正在尝试编写我的第一个重要指令并且遇到了问题。

我想做的类似于[http://plnkr.co/nYSBnm](http://plnkr.co/nYSBnm)

除了两个输入使用相同的字段外，这按预期工作。当我尝试让他们使用预期的字段时，通过放置

```
ng-model="record.{{field.name}}" 
```

在 formInput 属性中替换 ng-model="record.name" 我得到一个错误

```
Error: Syntax Error: Token '{' is an unexpected token at column 8 of the expression [record.{{field.name}}] starting at [{{field.name}}]. 
```

值得一提的是[http://plnkr.co/O2uosO27khbcxZEeEb6V](http://plnkr.co/O2uosO27khbcxZEeEb6V)

我在这里查看了各种类似的问题和堆栈溢出，但到目前为止还没有任何工作。

我会很感激任何人可以在它上面放的任何光。

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:31:27.323

我也在 AngularJS 小组上问过这个问题（我在那里沉默了一天左右后在这里发帖）。然后我收到了 Pawel Kozlowski 的回复，他指出

```
ng-model="record[field.name]" 
```

正如他所说，“有点开始工作”。[这里](http://plnkr.co/edit/sOiJvkDI2akpV5LAV0yo?p=preview)有一个笨蛋。

不知道他的评论是什么意思，但是当我把它放在一个真实的页面中并点击刷新时，我得到了两个字段副本（除非我清除缓存），但他确实解决了所述问题。

# jquery - 在 jQuery 中定位出现问题

> ID：14304372
> 
> 赞同：0
> 
> 时间：2013-01-13T14:21:24.783
> 
> 标签：jquery, jquery-animate, positioning

看看这个小提琴：http: [//jsfiddle.net/BramVanroy/tKL8E/](http://jsfiddle.net/BramVanroy/tKL8E/)

当您将“联系人”悬停在其子项“adverteren”上时，工具提示将显示在该项上方而不是其旁边。当您然后用鼠标返回“联系”并再次返回“广告”时，工具提示显示得很好。怎么会这样？

相关代码：

```
var condition = offL > ((wW / 2) - $this.width()),
  properties = {},
  cssProp = {};

if (condition) {
  properties = {
    "left": (offL - tooltip.width() - 30)
  };
} else {
  properties = {
    "left": (offL + $this.width() + 25)
  };
}
$.extend(properties, {
  "top": ($this.offset().top + (posT / 2) - (tooltip.height() / 2))
});

tooltip.stop(true).text(title).animate(properties, 300).fadeTo(200, 1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:41:56.150

这是因为您在将新文本设置到其中或浏览器引擎重新计算元素大小**之前**根据工具提示宽度计算左侧位置。

让我再次检查以找到解决方案或解决方法。

**更新：** 像这样更改您的代码片段

```
tooltip.stop(true).text(title); // set the new text here

var condition = offL > ((wW / 2) - $this.width()),
  properties = {},
  cssProp = {};

if (condition) {
  properties = {
    "left": (offL - tooltip.width() - 30)
  };
} else {
  properties = {
    "left": (offL + $this.width() + 25)
  };
}
$.extend(properties, {
  "top": ($this.offset().top + (posT / 2) - (tooltip.height() / 2))
});

//and not here as you use width property to calculate the element position which is being changed when you change element text
tooltip.animate(properties, 300).fadeTo(200, 1); 
```

看看这个[http://jsfiddle.net/tKL8E/42/](http://jsfiddle.net/tKL8E/42/)

# javascript - javascript“假隐私”会带来安全风险吗？

> ID：14304378
> 
> 赞同：6
> 
> 时间：2013-01-13T14:22:09.077
> 
> 标签：javascript, security

Javascript 不允许您向对象提供私有数据或方法，就像在 C++ 中那样。哦，实际上，是的，通过一些涉及关闭的解决方法。但是来自 Python 背景，我倾向于相信“假装隐私”（通过命名约定和文档）已经足够好，甚至可能比“强制隐私”（由 Javascript 本身强制执行）更可取。当然，我可以想到不正确的情况——例如，人们在没有 RTFM 的情况下与我的代码交互，但我受到了指责——但我不是那种情况。

*但是*，有些事情让我停下来。Javascript 大师 Douglas Crockford 在“Javascript: The Good Parts”和其他地方一再将虚假隐私称为“安全”问题。[例如](http://websphere.sys-con.com/node/579770)，“攻击者可以轻松地直接访问字段并用自己的方法替换方法”。

我对此感到困惑。在我看来，如果我遵循最低限度的安全做法（验证，不要盲目信任从浏览器发送到我的服务器的数据；不要在我的网站上包含第三方脚本而不检查它们），那么就没有假装隐私不如强制隐私“安全”。是对的吗？如果不是，假装隐私与强制隐私具有安全含义的情况是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:10:30.773

不是本身。然而，正如 Crockford 指出的那样，这确实意味着您不能安全地将不受信任的 JavaScript 代码加载到 HTML 文档中。如果您确实需要在浏览器中运行此类不受信任的 JavaScript 代码（*例如*，用于社交网站中用户提交的小部件），请考虑 iframe 沙盒。

作为 Web 开发人员，您的安全问题通常是主要的 Internet 广告代理不支持（甚至[禁止](https://support.google.com/adsense/bin/answer.py?hl=en&answer=48182#beh)）构建他们的广告代码。不幸的是，您必须相信 Google 不会提供恶意 JavaScript，无论是有意还是无意（*例如*，它们被黑客入侵）。

[这是我作为另一个问题](https://stackoverflow.com/questions/14162492/allow-javascript-in-php-form-and-avoid-hacking-like-jsfiddle)的答案发布的 iframe 沙盒的简短描述：

> 为用户提交的 HTML、CSS 和 JavaScript设置一个**完全**独立的域名（例如“exampleusercontent.com”） 。不允许通过您的主域名加载此内容。然后使用 iframe 将用户内容嵌入到您的页面中。
> 
> 如果您需要比简单框架更紧密的集成，[`window.postMessage()`](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)可能会有所帮助，允许不同框架中的脚本以受控方式相互通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:34:13.773

答案似乎是“不，假隐私很好”。以下是一些详细说明：

*   在当今存在的 javascript 中，您不能在网页上包含未知且不受信任的第三方脚本。它可以造成严重破坏：它可以重写页面上的所有 HTML，它可以提示用户输入他的密码，然后将其发送到一个邪恶的服务器等等。Javascript 编码风格对这个基本事实没有任何影响。有关处理此问题的方法的讨论，请参阅[PleaseStand 的回答。](https://stackoverflow.com/a/14304760/1272672)

*   一个不称职但不邪恶的脚本可能会无意中通过名称冲突把事情搞砸。这是反对创建大量具有通用名称的全局变量的一个很好的论据，但与是否避免假私有变量无关。例如，我的香蕉销售网站可能使用 fake-private 变量`window.BANANA_STORE_MODULE.cart.__cart_item_array`。第三方脚本意外覆盖此变量并非完全不可能，但极不可能。

*   有一些[想法](http://www.joezimjs.com/javascript/securing-javascript/)是为了*将来修改*javascript 提供一个受控环境，在该环境中不受信任的代码可以以规定的方式运行。我可以让不受信任的第三方 javascript 通过特定的公开方法与我的 javascript 交互，并阻止第三方脚本访问 HTML 等。如果这种情况存在，则可能是私有变量对于安全性至关重要的场景。但它还不存在。

*   显然，编写清晰且无错误的代码总是有助于安全性。只要真正私有的变量和方法使编写清晰且无错误的代码变得更容易或更难，就存在安全隐患。它们是否有用总是一个争论和品味的问题，以及你的背景是，比如说，C++（私有变量是核心）还是 Python（私有变量不存在）。两个方向都有争论，包括著名的博客文章[Javascript Private Variables are Evil](http://clubajax.org/javascript-private-variables-are-evil/)。

就我而言，我将继续使用虚假隐私：前导下划线（或其他任何内容）向我和我的合作者表明某些属性或方法不是模块的公共支持接口的一部分。我的假隐私代码更具可读性（IMO），并且我在构建它时有更多自由（例如，闭包不能跨越两个文件），并且我可以在调试和实验时访问那些假私有变量。我不会担心这些程序比任何其他 javascript 程序更不安全。

# backbone.js - 如何将 JQuery Datepicker 与 Backbone-Forms 一起使用？

> ID：14304380
> 
> 赞同：4
> 
> 时间：2013-01-13T14:22:12.540
> 
> 标签：backbone.js, backbone-forms

```
var User = Backbone.Model.extend({
    schema: {
        date: {type: 'Date'}
    }
});

var user = new User();

var form = new Backbone.Form({
    model: user
}).render();

$('.bootstrap').append(form.el); 
```

我输入什么类型来使用包含的 JQuery-UI 日期选择器？除了：

旧的 jQuery 编辑器仍然包括在内，但可能会移动到另一个存储库：

jqueryui.List
jqueryui.Date（使用 jQuery UI 弹出日期选择器）
jqueryui.DateTime

架构类型在引号中声明，我无法弄清楚 jqueryui.Date 的字符串是什么 - 这肯定行不通。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T10:34:39.680

您想创建一个您将命名的自定义编辑器，例如：“DatePicker”。

所有编辑器都附加到 Backbone.Form.editors。因为 DatePicker 的呈现方式与文本字段完全一样，所以我们可以使用文本字段作为基础，并且只覆盖特定于 datepicker 的行为。

我经常将 moment.js 用于一些与日期相关的工作，所以这个例子也包括了这个。它也是基于 Bootstrap DatePicker 而不是 jQuery 的，但这几乎 100% 相同。

```
Backbone.Form.editors.DatePicker = Backbone.Form.editors.Text.extend({
    render: function() {
        // Call the parent's render method
        Backbone.Form.editors.Text.prototype.render.call(this);
        // Then make the editor's element a datepicker.
        this.$el.datepicker({
            format: 'yyyy-mm-dd',
            autoclose: true,
            weekStart: 1
        });

        return this;
    },

    // The set value must correctl
    setValue: function(value) {
        this.$el.val(moment(value).format('YYYY-MM-DD'));
    }
}); 
```

就是这样，您现在可以像这样使用日期选择器：

```
schema: {
    birthday: { title: 'When were you born', type: 'DatePicker'}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:00:32.900

不确定你的问题是否正确，但我认为你可以在视图的初始化方法中附加 Jquery 日期选择器

# r - 为一组点着色标签

> ID：14304381
> 
> 赞同：4
> 
> 时间：2013-01-13T14:22:23.773
> 
> 标签：r, ggplot2

**是否可以在 ggplot2 中为一组点着色标签？**

除了图中显示的红色标记外，我还想为下图中的一些左侧文本标签着色以显示红色的摆动状态：

![选举点图](../Images/e0c16d946a3f8eead95cce15026a798f.png)

[代码（带数据）在这里。](https://gist.github.com/4523631)-**编辑以反映答案**

*   我知道[如何为所有标签着色](https://stackoverflow.com/questions/10399930/how-to-change-axis-label-color-in-ggplot2)（[这里也是](https://stackoverflow.com/questions/12568032/in-ggplot2-how-can-i-change-the-color-of-the-axis-labels)），但这不是我需要的。
*   理想情况下，我也想改进传说，但不确定具体如何。

情节远非完美，因此非常欢迎提出其他建议。如果有人感兴趣，那里有[更好](http://jackman.stanford.edu/blog/?p=2620)的图表（但我还不足以编写它们）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T14:37:34.937

标签（轴文本）的颜色由函数`element_text=`中的参数设置`theme()`。您可以为每个标签设置不同的颜色。由于有一个`Swing`带有级别的列，它可以用来设置颜色。

```
dw_plot + theme(axis.text.y = element_text(colour = ifelse(dw_data$Swing=="Swing State","red","grey"))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-18T19:12:49.637

上述答案截至今天有效；但是，它们会发出警告，这会阻止将建议​​的方法与`ifelse`inside一起使用`element_text()`。`element_text()`未记录矢量化的原因`ggplot2`是因为它不受支持的功能（由于机会而起作用）。请参阅讨论此特定问题的 GitHub 上的以下[问题](https://github.com/tidyverse/ggplot2/issues/3492)。

上面提供的答案将导致以下警告：

```
# Warning message:
# Vectorized input to `element_text()` is not officially supported.
# Results may be unexpected or may change in future versions of ggplot2\. 
```

以下代码说明了这一点（使用 SlowLearner 提供的稍微更新的示例 - 原始数据不可用）并显示了我的解决方案，该解决方案支持使用[ggtext](https://github.com/wilkelab/ggtext)包和`element_markdown()`.

```
library(ggplot2); packageVersion("ggplot2")
# ‘3.3.0’
library(ggtext); packageVersion("ggtext") #; install.packages("ggtext") # https://github.com/wilkelab/ggtext
# ‘0.1.0’

set.seed(1234)
df <- data.frame(state = paste("State_", LETTERS, sep = ""), 
                margin = runif(26, -50, 50), 
                swing = rep(c("no", "yes", "no"), times = c(10, 6, 10)))

mycolours <- c("yes" = "red", "no" = "black")

ggplot(data = df, aes(x = margin, y = state)) +
     geom_point(size = 5, aes(colour = swing)) +
     scale_color_manual("Swing", values = mycolours) +
     theme(
          # The following line uses vectorisation (such as rep or ifelse).
          # This is not officially supported. Works by a chance and gives impression of a feature.
          axis.text.y = element_text(colour = rep(c("black", "red", "black"), times = c(10, 6, 10)))
          )

# Throws the following warning:
# Warning message:
# Vectorized input to `element_text()` is not officially supported.
# Results may be unexpected or may change in future versions of ggplot2\. 

# The following code uses ggtext method # element_markdown(),
# This is how this question should be solved because the vectorisation method may not work in the future inside element_text().
ggplot(data = df, aes(x = margin, y = state)) +
     geom_point(size = 5, aes(colour = swing)) +
     scale_color_manual("Swing", values = mycolours) +
     theme(axis.text.y = element_markdown(colour = rep(c("black", "red", "black"), times = c(10, 6, 10))))
# No warning occurs. This will also correctly calculate other aesthetic such as size. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-13T15:13:41.887

其他答案已经被接受，但只是作为一个直观的例子......对于更复杂的方案，您可以简单地在数据框中添加一个具有所需颜色的列并引用它，而不是使用下面的“红色”和“黑色”。

```
library(ggplot2)

set.seed(1234)
x <- data.frame(state = paste("State_", LETTERS, sep = ""), 
   margin = runif(26, -50, 50), swing = rep("no", 26))
x[c(10:15), 'swing'] <- "yes"
mycolours <- c("yes" = 'red', "no" = "black")

ggplot(data = x, aes(x = margin, y = state)) +
    geom_point(size = 5, aes(colour = swing)) +
    scale_color_manual("Swing", values = mycolours) +
    theme(axis.text.y = element_text(colour = 
        ifelse(x$swing == 'yes', 'red', 'black'))) +
    theme() 
```

![截屏](../Images/27e2ac7ed45df7f2df05d7815b27bb77.png)

# javascript - 关于数组的奇异猫鼬查询

> ID：14304383
> 
> 赞同：1
> 
> 时间：2013-01-13T14:22:33.693
> 
> 标签：javascript, mongoose

我在 mongoose 中查询时遇到问题，我正在寻找您的建议：

如果元素在数组中，我需要从集合中检索一些元素。很难解释，这是交易：如果当前用户在收件人中，我需要获取消息

```
var Message = new Schema({
    recipients: [{
        pseudo: {type: String},
        slug: {type: String, index: true}
    }],
    sender: {
        pseudo: {type: String},
        slug: {type: String, index: true}
    },
    content: String,
    dateCreated: {type: Date, default: Date.now},
    readBy: [{
        pseudo: String,
        slug: String,
        date: Date
    }]
}); 
```

同样，在检查未读消息时，如果我的用户不在 readBy 数组中，我需要检索一些消息。

我知道如何使用 $in 运算符，但它的工作方式相反。是否有可能实现这种查询？

编辑：我发现了 $elemMatch 运算符，它可以很好地处理我的第一个问题，但我不确定如何将它用于未读消息。是否可以在其中添加 NOT 子句？

# lisp - Lisp“prog”在这个例子中是如何工作的？

> ID：14304384
> 
> 赞同：1
> 
> 时间：2013-01-13T14:22:34.600
> 
> 标签：lisp, common-lisp

我是 lisp 的初学者，我需要有人逐步向我解释`prog`表单的工作原理。l1 的初始值是多少？无？

如果列表在第一级有偶数个元素，则问题输出 T，否则输出 nil。

```
(defun nr_par (l)
  (prog ((l1 l))
    ciclu
    (cond
      ((null l1) (return T))
      ((null (cdr l1)) (return NIL))
      ((null (cddr l1)) (return T))
      (T (setf l1 (cddr l1))
         (go ciclu))))) 
```

在控制台上：

```
(nr_par '(1 2 3 4 5 6 7 8))

T 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T14:36:45.527

该程序很简单，但不是非常惯用的 lisp（它是命令式的，而不是函数式的）。逐步进行如下。

`prog`使用一系列变量绑定，在这种情况下，最初`l1`被分配了值。`l`然后，循环开始的一系列语句（同样，不是非常 lisp 惯用的）。

这种类型的循环使用标签 ( `ciclu`) 和 goto 指令 ( `go`)，同样不推荐，但它存在。之后，`cond`检查一系列案件。当列表为空 ( `null`) 时，返回 true，在其他情况下，检查长度是偶数还是奇数，然后返回值。

在列表长于一个或两个元素的情况下（这两种情况都不为空），`l1`列表被调整为指向其自身的下一个元素（`cddr`函数）的下一个。

最后，该`go`函数将程序转回`ciclu`标签。

当`cond`满足任何子句时，程序将结束，返回`T`或`NIL`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T14:28:21.753

参见[CLHS 中的 PROG](http://clhs.lisp.se/Body/m_prog_.htm)：`L1`是*var*，`L`是*init-form*，所以 的初始值`L1`是 的值`L`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T15:58:25.680

正如[CLHS 页面`prog`](http://clhs.lisp.se/Body/m_prog_.htm)所说，它做了三件事：让您拥有本地变量并初始化它们；让你有标签`tagbody`和使用`go`; 并让您在命名中使用`return`as ：`block``NIL`

```
(defun nr_par (l)                     
  (prog ((l1 l))                           ; local binding(s)
    ciclu                             
    (if (null l1)       (return T))        ; return
    (if (null (cdr l1)) (return NIL)) 
    (setf l1 (cddr l1))  
    (go ciclu)))                           ; go

(defun nr_par1 (l)                         ; directly equivalent
  (labels ((ciclu (l1) 
             (if (null l1)       (return-from ciclu T)) 
             (if (null (cdr l1)) (return-from ciclu NIL)) 
             (ciclu (cddr l1))))
    (ciclu l)))

(defun nr_par2 (l)                         ; also equivalent
  (do ((l1 l (cddr l1)))
      (NIL)                                ; while T ...
    (cond
      ((null l1)       (return T))
      ((null (cdr l1)) (return NIL))))) 
```

函数调用`goto`毕竟是一种美化，不是吗？

另请参阅[Lisp](https://stackoverflow.com/questions/8597157/longest-decreasing-sequence-in-lisp/14316848#14316848)中的最长递减序列，以获取将几个相互递归函数手动编译成`prog`带有一堆`GO`语句的示例。

# php - 在 Yii 框架视图中使用 if-else php 代码是否可取？

> ID：14304385
> 
> 赞同：1
> 
> 时间：2013-01-13T14:23:02.850
> 
> 标签：php, yii, views, renderpartial

我是 Yii 框架的菜鸟。我正在开发一个不使用 GII CRUD 应用程序的应用程序。从头开始编写我自己的模型和视图。

我想知道是否建议在 Yii 框架视图中使用 if-else php 代码？

此外，如果使用渲染部分，如何将数据提交到控制器/模型并重定向到现有页面。

我尝试阅读几个博客和文档。我也浏览了 YII 食谱。但我无法找到第一个问题的答案..

我的代码是： http: [//pastebin.com/BQHJvBcA](http://pastebin.com/BQHJvBcA)

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T14:53:19.033

您应该查看[控制结构的替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)。

你的观点会更清楚：

来自 php.net 的示例：

```
<?php if ($a == 5): ?>
A is equal to 5
<?php endif; ?> 
```

# merge - Neo4j 如何在 Java 中合并两个节点？

> ID：14304391
> 
> 赞同：1
> 
> 时间：2013-01-13T14:24:48.713
> 
> 标签：merge, neo4j, nodes

有什么快速的方法可以将两个节点合并为一个，而不需要自己遍历属性和关系？

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:28:35.790

您必须自己实现 - 如果两个节点包含具有不同值的相同属性等，则包括冲突解决。

Neo4j 对此不提供任何支持（因为这可能不是一个非常常见的用例）。

# android - Android：什么是规范的包名？

> ID：14304401
> 
> 赞同：3
> 
> 时间：2013-01-13T14:26:03.570
> 
> 标签：android, android-package-managers

Android 的 PackageManager 类有 currentToCanonicalPackageNames() 和 canonicalToCurrentPackageNames() 方法。规范的包名到底是什么？它在哪里使用（它的目的是什么）？它何时与当前的包名称不同？

例如，在我的 Nexus S 上，浏览器应用程序的当前包名称是“com.google.android.browser”，其规范名称是相同的“com.google.android.browser”。对于我检查过的其他一些应用程序，我也得到了相同的当前和规范包名称。developer.android.com 和源代码都没有给我解释什么是规范包名称。希望这有助于更好地理解我上面的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:44:45.313

这是开发人员文档：

[http://developer.android.com/reference/android/content/pm/PackageManager.html](http://developer.android.com/reference/android/content/pm/PackageManager.html)

**公共抽象字符串 [] currentToCanonicalPackageNames (字符串 [] 名称)**

```
Added in API level 8
Map from the current package names in use on the device to whatever the current canonical name of that package is.

Parameters
names   Array of current names to be mapped.
Returns
Returns an array of the same size as the original, containing the canonical name for each package. 
```

**公共抽象 String[] canonicalToCurrentPackageNames (String[] 名称)**

```
Added in API level 8
Map from a packages canonical name to the current name in use on the device.

Parameters
names   Array of new names to be mapped.
Returns
Returns an array of the same size as the original, containing the current name for each package. 
```

查看源的此链接以获得更好的理解： [https ://android.googlesource.com/platform/frameworks/base/+/483f3b06ea84440a082e21b68ec2c2e54046f5a6/core/java/android/app/ApplicationPackageManager.java](https://android.googlesource.com/platform/frameworks/base/+/483f3b06ea84440a082e21b68ec2c2e54046f5a6/core/java/android/app/ApplicationPackageManager.java)

请参考这个 StackOverflow 问题：[如何在 Android 中获取默认应用程序包的规范名称](https://stackoverflow.com/questions/13171970/how-do-i-get-canonical-names-of-packages-of-deafult-apps-in-android)

# php - 如何在 PHP 中调用私有文件夹中的文件

> ID：14304402
> 
> 赞同：1
> 
> 时间：2013-01-13T14:26:06.093
> 
> 标签：php

我的网络文件存在于

> D:\inetpub\vhosts\website.com\http\

我可以从上面的目录中调用我的任何网络文件中的文件，例如

> website.com\index.php 等...

现在出于安全原因，我想将文件放在私人文件夹中，特别是为了保存密码

> D:\inetpub\vhosts\website.com\private\test.ini

我想在下面的函数 parse_ini_file("* *< path >* *test.ini")中使用这个 test.ini 文件

> <path> 的值应该是多少？

当我使用*D:\inetpub\vhosts\website.org\private\test.ini*它说 **警告：parse_ini_file(D:\inetpubhosts\website.com\private est.ini) [function.parse-ini-file]: failed打开流：**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:34:57.840

好吧，如果您知道您的`private`文件夹将是上一级目录，您可以执行以下操作：

```
<?php
define ('DS', DIRECTORY_SEPARATOR);               // So we don't have to type DIRECTORY_SEPARATOR...
define ('ROOT_DIRECTORY', dirname(__FILE__));
define ('PRIVATE_DIRECTORY', ROOT_DIRECTORY . DS . 'private'); 
```

现在你可以做这样的事情：

```
<?php
$parsed = parse_ini_file (PRIVATE_DIRECTORY . DS . 'my_ini_file.ini');

// or
require_once PRIVATE_DIRECTORY . DS . 'myfile.php'; 
```

注意：这也是独立于系统的，因为它可以在 Windows 和 *nix 系统上正常工作。

您可以在 PHP 手册中找到更多信息：[**dirname()**](http://si1.php.net/dirname)、[**DIRECTORY_SEPARATOR**](http://php.net/manual/en/dir.constants.php)和[***_* _FILE_ *_***](http://php.net/manual/en/language.constants.predefined.php)

编辑：

如果根文件夹在目录结构中的上一级以上，您始终可以这样做：

```
<?php
// If the directory in which this file is located is: D:\inetpub\foo\bar\baz\file.php
// and the root directory is D:\inetpub\foo 
// Then you can do the followwing
define ('ROOT_DIRECTORY', dirname(dirname(dirname(__FILE__))));

// dirname ("D:\inetpub\foo\bar\baz\file.php");    // D:\inetpub\foo\bar\baz
// dirname ("D:\inetpub\foo\bar\baz");             // D:\inetpub\foo\bar
// dirname ("D:\inetpub\foo\bar");                 // D:\inetpub\foo 
```

它完全是关于定义您的`ROOT`目录并将其用作定义/包括其他所有内容的参考。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T14:31:51.093

为了

D:\inetpub\vhosts\website.com\http\index.php

```
<?php

print_r( parse_ini_file('../private/test.ini') ); 
```

访问

D:\inetpub\vhosts\website.com\private\test.ini

PHP 会自动将 unix 风格的目录名称分隔符（/ insted of ）转换为 windows 风格，这让一些事情变得更容易。

如果您喜欢独立于 includep 路径和 cwd，请使用。从 php 5.3 开始工作

```
<?php

print_r( parse_ini_file(__DIR__ . '/../private/test.ini') ); 
```

[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

# php - 在本地 xampp 服务器上上传图像时出现权限被拒绝错误

> ID：14304405
> 
> 赞同：-1
> 
> 时间：2013-01-13T14:26:10.687
> 
> 标签：php, upload

xampp 中的 htdocs 文件夹具有 777 权限，我可以在那里手动复制更改任何文件，但将文件上传到子文件夹会出错。我的代码是：

```
<?php
define ('MAX_FILE_SIZE', 1024 * 50);
if (array_key_exists('submit', $_POST)) {
// define constant for upload folder
define('UPLOAD_DIR', '/opt/lampp/htdocs/properties/');
// replace any spaces in original filename with underscores
$file = str_replace(' ', '_', $_FILES['image']['name']);
// create an array of permitted MIME types
$permitted = array('image/gif', 'image/jpeg', 'image/pjpeg','image/png');
// upload if file is OK
if (in_array($_FILES['image']['type'], $permitted)
  && $_FILES['image']['size'] > 0 
  && $_FILES['image']['size'] <= MAX_FILE_SIZE) {
switch($_FILES['image']['error']) {
  case 0:
    // check if a file of the same name has been uploaded
    if (!file_exists(UPLOAD_DIR . $file)) {
// move the file to the upload folder and rename it
$success = move_uploaded_file($_FILES['image']['tmp_name'], UPLOAD_DIR $file);
} else {
$result = 'A file of the same name already exists.';
}
if ($success) {
$result = "$file uploaded successfully.";
} else {
$result = "Error uploading $file. Please try again.";
}
break;
case 3:
case 6:
case 7:
case 8:
$result = "Error uploading $file. Please try again.";
break;
case 4: 
$result = "You didn't select a file to be uploaded.";
}
} else {
$result = "$file is either too big or not an image.";
}
}
?> 
```

我得到的错误是：

```
Warning: move_uploaded_file(/opt/lampp/htdocs/properties/Cover.jpg): failed to open stream: Permission denied in /opt/lampp/htdocs/listprop.php on line 82 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:42:03.677

检查是`safe_mode`在`on`你的`php.ini`

如果只有 xampp 文件夹可写但无济于事，那么您也需要子文件夹可写。

二、只问

```
define('UPLOAD_DIR', '/opt/lampp/htdocs/properties/'); 
```

那`lampp`不应该在`xampp`哪里？只是问（这也可能导致移动问题）

# c++ - 使用“cin”的用户输入验证

> ID：14304410
> 
> 赞同：0
> 
> 时间：2013-01-13T14:26:17.593
> 
> 标签：c++, visual-c++, cin

我需要通过**cin**验证用户输入我的代码如下：

```
#include"iostream"
using namespace std;

int main()
{
int choice = 0; 
while(1)
{
    cout<<"ENTER your choice a value between 0 to 2"<<endl;
        cin>>choice;    

        // Here i need some logic which will work like "choice" can be only
        // Integer and within the range i.e. 0 to 2 and if it is not
    // satisfy condition then ask user to input again
    switch(choice)
    {
    case 0:
        exit(1);
        break;

    case 1:
       fun();
       break;
    case 2:
       fun1();
       break;
    default: cout<<"Please enter a valid value"<<endl;
            break;
    }
}

return 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:32:47.387

一个简单的示例：

```
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

template <typename T>
bool toNumber(const std::string &x, T &num)
{
    return (std::stringstream(x) >> num);
}
int main() {
    while (true) {
        cout << "ENTER your choice a value between 0 to 2" << endl;

        string s;
        cin >> s;

        int choice = 0;

        if (toNumber(s, choice)) {
            switch (choice) {
              case 0: exit(1); break;
              case 1: fun();   break;
              case 2: fun1();  break;
            }
        }
        else
            cout << "Please enter a valid value" << endl;
    }
} 
```

# javascript - 在 jquery 自动完成中访问建议

> ID：14304411
> 
> 赞同：2
> 
> 时间：2013-01-13T14:26:21.057
> 
> 标签：javascript, jquery, jquery-autocomplete

我已将自动完成功能附加到 html 表单中的文本输入字段。当用户在建议框中选择某些内容并且一切正常时，我可以处理。我使用“建议”作为来源。

我的问题是我想处理当用户输入了几个字符然后只是点击输入而不选择任何建议的情况。我想将这种情况视为用户选择了第一个建议。但是我不知道如何访问这些建议。有没有办法做到这一点？我需要访问建议的“价值”。“标签”是不够的。

```
$(myInputField).autocomplete({
 source : "suggest",
 focus : onFocus,
 select : onSelect
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:36:14.443

您可以使用`autoFocus: true`这样第一个项目始终处于焦点。

检查[自动完成文档](http://api.jqueryui.com/autocomplete/#option-autoFocus)。

# math - 如何生成 2 个随机素数，当它们相乘时，产生一个 X 位的数字？（X 作为参数给出））

> ID：14304415
> 
> 赞同：0
> 
> 时间：2013-01-13T14:26:48.130
> 
> 标签：math, primes, bits

我缺乏制作这个功能的数学技能。

基本上，我想返回 2 个随机素数，当它们相乘时，产生作为参数给出的位数 X。

例如：

如果我说我的 X 是 3，那么可能的解决方案是：p = 2 和 q = 3，因为 2 * 3 = 6（110 有 3 位）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T16:10:30.203

这个陈述的一个问题是它首先要求两个“随机”素数。如果没有任何关于所需随机素数分布的明确声明，我们已经陷入困境。（这是一个经典悖论的开始，我们被要求生成一个“随机”整数。）

但是假设我们将语句更改为找到任意两个任意素数，这会产生具有给定位数 x 的所需乘积。答案是微不足道的。

在其二进制表示中恰好具有 x 位的数字集是整数的半开集 [2^(x-1),2^x-1]。

1.  选择小于或等于 (2^x-1)/2 的任意素数。称之为 p1。

2.  接下来，选择位于区间 (2^(x-1)/p1,(2^x-1)/p1) 中的第二个素数。称之为p2。

p1*p2 必须在所需的区间内。

例如，给定 x = 10，因此乘积必须位于区间 [512,1023] 中，即正好为 10 位的整数集合。（注意，在那个区间内显然有 147 个这样的数字，正好有两个素因数。）

步骤1：

选择 p1 作为任何不大于 1023/2 = 511.5 的素数。我会选择 p1 = 137。那么第二个素数因子必须是位于区间内的素数

```
[512 1023]/137
ans =
    3.7372    7.4672 
```

因此是 5 或 7。

```
dec2bin(137*[5 7])
ans =
    1010101101
    1110111111 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T14:36:36.700

如果您知道位数，则可以生成一个数字 2^(x-2) < x < 2^(x-1)。然后取平方根并在它的任一侧找到最接近的素数。在大多数情况下，将它们相乘会得到一个正确范围内的数字。如果它太高，你可以直接在它的下侧取两个素数。

伪代码：

```
x = bits
primelist[] = makeprimelist()
rand = randnum between 2^(x-2) and 2^(x-1)
n = findposition(primelist, rand)
do
    result = primelist[n]*primelist[n+1]
    n--
while result > 2^(x-1) 
```

请注意，以这种方式生成的数字总是将“1”作为最高有效位，因此可以生成许多 x-1 位并将 1 附加到末尾。

# bash - 为管道 bash 脚本提供选项

> ID：14304418
> 
> 赞同：2
> 
> 时间：2013-01-13T14:27:04.563
> 
> 标签：bash, curl, pipe, getopts

在将脚本内容传送到 bash 以执行时，我试图为 bash 脚本提供选项。

```
#!/bin/bash

SETUP_PACKAGES=""

while getopts ":u:" opt; do
  case $opt in 
    p)
       if [[ "$OPTARG" =~ "mysql" ]] ; then SETUP_PACKAGES="$SETUP_PACKAGES mysql-client libmysqlclient-dev"; fi
       ;;

    # other parts omitted...
  esac
done 
```

在 shell 中执行脚本就像`./script.sh -p mysql`工作一样。目的是将脚本存储在存储库中，所以我尝试了`curl -L example.com/my/script | bash -p mysql`. 然而这抛出`/usr/bin/mysql: /usr/bin/mysql: cannot execute binary file`。

我需要做什么来实现我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:33:56.843

您需要`-s`bash 选项才能为交互式 shell 设置位置参数：

```
curl -L example.com/my/script | bash -s -p mysql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-04T10:32:10.640

上面的示例具有误导性，因为您等待“u”选项但仅设置“p”选项。这里的任何方式都是如何用 curl 调用它：

```
bash <(curl -L example.com/my/script) -p mysql 
```

# python-2.7 - 基于极端随机化树和特征冗余的特征重要性

> ID：14304420
> 
> 赞同：1
> 
> 时间：2013-01-13T14:27:16.377
> 
> 标签：python-2.7, scikit-learn

我正在使用 Scikit-learn Extremely Randomized Trees 算法来获取有关相对特征重要性的信息，并且我对如何对“冗余特征”进行排名有疑问。

如果我有两个相同（冗余）且对分类很重要的特征，则极度随机化的树无法检测到特征的冗余。也就是说，这两个功能都获得了很高的排名。有没有其他方法可以检测到两个特征实际上是多余的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:13:30.063

也许您可以提取前 n 个重要特征，然后计算这些特征的成对 Spearman 或 Pearson 相关性，以便仅检测信息量最高的特征的冗余，因为计算所有成对特征相关性（与特征数量成二次方）可能不可行.

不过，可能有更聪明的方法可以通过利用特征相对出现的统计数据作为决策树中的节点来做同样的事情。

# php - 使用文本文件注册仅插入 || 单词之间

> ID：14304423
> 
> 赞同：0
> 
> 时间：2013-01-13T14:27:44.903
> 
> 标签：php, html

我正在尝试使用文本文件创建注册，因为我无法使用数据库，但在我的注册中只有 || 单词之间插入，单词不显示。另外，我的文件不会自动打开，我确实将目录设置为 wrx。我已经为此工作了很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:41:34.067

一方面，这看起来是错误的：

```
$name = $_POST['username'];
$email = $_POST['password']; 
```

它应该是：

```
$username = $_POST['username'];
$password = $_POST['password']; 
```

# c++ - 需要帮助调试更新二进制文件的功能

> ID：14304425
> 
> 赞同：-2
> 
> 时间：2013-01-13T14:28:15.730
> 
> 标签：c++, debugging, binaryfiles

```
void updatebfile(char filename[MAX])
{

fstream writereadb;

char cont='y';
char filenameb [MAX];
int i=1;
int record;

student s;

strcpy(filenameb,filename);
strcat(filenameb,".dat");

writereadb.open(filenameb,ios::in | ios::out | ios::binary  );

cout<<"------------------------------"
    <<endl;

cout<<"Begin updating of binary file "
    <<filenameb
    <<endl
    <<endl;

cout<<"Information for student file"
    <<endl
    <<endl;

while ( writereadb.read (reinterpret_cast <char *>(&s), sizeof (s) ) )
{

    cout<<i
        <<'\t'
        <<s.identity
        <<" "
        <<s.name
        <<endl;

    i++;

}
writereadb.clear();

do
{   
cout<<endl
    <<"Update record: ";
cin>>record;

cout<<endl
    <<"Student id: ";   

writereadb.seekg ( (record - 1) * sizeof(s), ios::beg);
writereadb.read (reinterpret_cast <char *>(&s), sizeof (s));    

cout<<s.identity
    <<endl; 

cout<<"Update the name: "; 
cin.getline(s.name,50); //My programme does not stop at this line to read in an input for some reason
//cin.clear();
    //cin.ignore(200,'\n'); 

writereadb.seekp((record-1)*sizeof(student),ios::beg);  
writereadb.write (reinterpret_cast <const char *>(&s), sizeof (s));

cout<<"Any more update (y/n) :";
cin>>cont;//

}while (cont=='y');

writereadb.close();
 } 
```

我的程序运行良好，除了在程序快结束时遇到`cin.getline(s.name,50)`. 程序不会停止读取输入并继续运行。

我试过把它放在`cin.clear(); cin.ignore;`后面`cin.getline(s.name,50)`，它可以工作，但它不会将它存储`s.name`到二进制文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:11:51.803

`cin.ignore();` 在之前添加`cin.getline(s.name,50);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:01:16.743

我必须添加

> cin.clear();
> 
> cin.ignore(200,'\n');

在 cin>> 期间使用 >> 运算符清除 '\n'

# android - 在外部应用程序中打开 pdf

> ID：14304429
> 
> 赞同：3
> 
> 时间：2013-01-13T14:28:36.127
> 
> 标签：android

我有安卓应用。它在资产文件夹中有一个pdf。我编写了一个代码来在外部应用程序（如 adobe pdf 查看器）中查看此 pdf。它工作正常，但问题是 Adob​​e pdf 查看器中有共享选项。我不希望该用户可以分发此 pdf。

我的问题是有一本重要的 pdf 书，我希望用户只能阅读但不能共享或重新分发它。请给出一个想法。我将更改我的代码。

我正在使用以下代码：

```
Uri path = Uri.fromFile(new File(str,
                "lemmelibroandroid.pdf")); 
Intent pdfIntent = new Intent(Intent.ACTION_VIEW);
pdfIntent.setDataAndType(path, "application/pdf");
pdfIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(pdfIntent); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T14:37:44.297

我认为不可能限制用于打开 pdf 的外部应用程序的功能

查看 [http://asmncl.blogspot.in/2012/06/android-open-pdf-file-in-webview.html](http://asmncl.blogspot.in/2012/06/android-open-pdf-file-in-webview.html)了解如何在 WebView 中打开 pdf

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T14:40:10.480

这是不可能的，因此最好的选择是在您自己的应用程序中显示您的内容。
我相信你会找到一种适当的方式来展示它的一些活动方式。
也许您应该将 PDF 的格式更改为 HTML，它会更容易显示。

# c++ - 与 MFC 集成的报表生成器

> ID：14304431
> 
> 赞同：1
> 
> 时间：2013-01-13T14:28:47.263
> 
> 标签：c++, mfc, reporting

我必须为 MFC 应用程序创建类似于[Report Builder 和 SSRS](http://technet.microsoft.com/en-us/library/dd239314.aspx)或[Open RPT的东西。](http://www.xtuple.com/openrpt)

我们的想法是能够为以后必须**打印**的**报告创建和编辑****模板**。我不局限于使用 MFC（我可以使用 C#、QT 等），但无论我使用什么，它都必须集成到 MFC 文档应用程序中，并且能够拖放/调整大小和编辑容器（例如表格、图像容器等）。

 ****我考虑了一些选项（但它们似乎都过大了）：

*   **XPS**，它允许轻松打印，但不允许编辑/拖放。
*   **DirectDraw**，但这似乎需要做很多工作，我不知道是否/如何实现打印功能。
*   **来自 QT 的QGraphicsView**，但我担心由于集成部分而可能出现的复杂情况。

有没有我可以使用的组件？它不一定是免费的（但这很好），但我应该能够将它集成到我的应用程序中，而无需在客户端机器上安装额外的软件。

注意：我使用 MFC9 和 Visual Studio 2010。目标 PC 安装了 Windows 7 和 Windows 8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:38:12.663

所有主要的组件供应商都以某种方式拥有这种控制，我个人的选择是 DevExpress，但您也可以查看 Telerik、Syncfusion 等，只要确保报表设计器组件可以重新分发给您的最终用户即可。****

# c# - 如何在不重复位置的情况下获取数组位置？

> ID：14304432
> 
> 赞同：0
> 
> 时间：2013-01-13T14:28:47.177
> 
> 标签：c#, arrays, random

我有一个数组的问题，我想获得位置的值，但不重复位置（使用 next.random 值重复，但我需要一次获得位置），我发布我的代码让你看到它们。我希望你能帮助我。

```
 int d = 0;   

  for (int i = 0; i < caminohormiga.Length; i++)
       {
          int start2 = random.Next(0, caminohormiga.Length);

          d = caminohormiga[start2];
          MatrizAux[i] = d;

          if (caminohormiga[i] == 0)
             {
              Console.Write("Repetido");
             }
         Console.Write(caminohormiga[i] + ", ");
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:30:20.147

您需要创建一个索引数组，用零到长度减一的数字填充它，进行随机洗牌，然后通过洗牌后的数组来选择原始数组的索引。

您可以使用[*Fisher-Yates Shuffle 算法*](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)重新排列索引。

```
var indexes = Enumerable.Range(0, caminohormiga.Length).ToArray();
// Run Fisher-Yates algorithm on indexes
...
foreach (var i in indexes) {
    var randomNoRepeat = caminohormiga[i];
    ...
} 
```

# html - 通过嗅探流量确定用户的页面查看时间

> ID：14304438
> 
> 赞同：0
> 
> 时间：2013-01-13T14:30:02.147
> 
> 标签：html, browser, tcpdump, sniffing

当用户请求页面（页面请求）时，浏览器请求该页面内的其他几个组件（内联请求），即图像、CSS、JS...

通过嗅探客户端和服务器之间的流量，有没有办法区分页面请求和内联请求？要查找用户的页面请求之间的时间间隔（页面查看时间）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:22:41.257

Web 本质上是无状态的，因此很难弄清楚请求的含义。例如，如果您知道该应用程序是基于 Java EE 的，您可以在请求标头中查找 JSESSION 元素以确定这是否是同一用户。如果您进一步了解页面请求的模式，则可以开始计算他们在页面上花费的时间。

如果您可以访问网络上的流量，您可以偷偷地将一些 Javascript 注入传出页面并获取监视器事件。

# c++ - 使用 include 定义枚举

> ID：14304445
> 
> 赞同：1
> 
> 时间：2013-01-13T14:30:35.233
> 
> 标签：c++, enums, include

我使用include定义了一个枚举，因为有不同的枚举具有相同的枚举数据，我想重用它：

```
#define X(SYM) SYM
#define X_INIT(SYM,VAL) SYM = VAL
/// Destination for scalar memory read instruction
enum SSRC
{

#include "GenericInstructionFields1.h"
#include "ScalarInstructionFields.h"
#include "GenericInstructionFields2.h"

};
enum SDST
{

        #include "GenericInstructionFields1.h"
};

#undef X_INIT
#undef X
}; 
```

但我无法编译 SDST 的代码。编译器为来自“GenericInstructionFields1.h”的 SSRC 字段编写重新定义。问题的原因是什么，如何解决？

```
//GenericInstructionFields1.h
/// SGPR0 to SGPR103: Scalar general-purpose registers.
X_INIT(ScalarGPRMin,0),
X(ScalarGPR),
X_INIT(ScalarGPRMax,103),
/// 104 – 105 reserved.
X(Reserved104),
X(Reserved105),
X_INIT(Reserved,2),
/// vcc[31:0].
X_INIT(VccLo, 106),
/// vcc[63:32].
X(VccHi), 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T15:04:33.617

在同一个命名空间中不能有具有相同枚举数的枚举。这将重现您的问题：

```
enum X {A,B};
enum Y {A}; 
```

使用命名空间或为枚举值添加前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:15:54.807

枚举不像命名空间。

您将看到以下相同的错误

```
enum A
{
    P, Q
};

enum B
{
    P, Q
}; 
```

你可以通过这个实现你想要的

```
struct A
{
    enum { P, Q };
};

struct B
{
    enum { P, Q };
}; 
```

您现在可以使用 A::P、A::Q、B::P 和 B::Q

或者在你的情况下

```
#define X(SYM) SYM
#define X_INIT(SYM,VAL) SYM = VAL
/// Destination for scalar memory read instruction

struct SSRC
{
    enum
    {

        #include "GenericInstructionFields1.h"
        #include "ScalarInstructionFields.h"
        #include "GenericInstructionFields2.h"

    }

};

struct SDST
{
    enum 
    {
        #include "GenericInstructionFields1.h"
    }
};

#undef X_INIT
#undef X
}; 
```

您现在可以使用`SSRC::ScalarGPRMax`和`SDST::ScalarGPRMax`

# paypal - 为什么根据我查看的位置，我会收到针对同一 Paypal 交易的不同报告付款人电子邮件？

> ID：14304446
> 
> 赞同：0
> 
> 时间：2013-01-13T14:30:35.373
> 
> 标签：paypal, paypal-ipn

我有一笔交易，其中 PayPal 报告的电子邮件因我查看的位置而异：

一个。在 IPN 通知中，payer_email 字段中有一封电子邮件。

湾。如果我输入 PayPal，点击**Transactions**，向下翻页到交易并点击**Details**，出现的电子邮件与 a) 中收到的电子邮件不同

C。如果我输入 PayPal，点击**Transactions**，然后点击 CSV 下载一个 csv 文件，在下载的 cvs 文件中，出现另一个付款人电子邮件，与 a) 和 b) 中的不同。

所有电子邮件都属于同一个域（付款人的公司），但我想了解在 IPN 中收到的电子邮件有多可靠，因为我们的帐户系统在 IPN 电子邮件上中继以创建帐户并为其分配余额。

# objective-c - NSString 表示的常量值

> ID：14304447
> 
> 赞同：0
> 
> 时间：2013-01-13T14:30:45.500
> 
> 标签：objective-c, nsstring, constants, c-preprocessor

我有一个 PList，我在字典中加载了几行数据。我想添加一行

```
<key>StandardValue</key>
<string>STANDARDVALUEFORCERTAININSTANCE</string> 
```

现在，当我读出值时，我得到一个 NSString。如何获得我之前定义的常量的值

```
#define STANDARDVALUEFORCERTAININSTANCE 123 
```

有没有办法获得字符串的常量表示？所以本质上要解析它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:33:37.077

**你不能这样做**。我建议一个不错的选择：KVC。

您将此变量声明为类实例：

```
@property (nonatomic,assign) int standardValueForCertainInstance; 
```

然后你用 valueForKey 得到值：

```
NSString* key= dict[@"StandardValue"];
int value= [[self valueForKey: key] intValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:50:25.997

你想做的事情并不完全可能。创建的常量`#define`仅在编译时存在，在运行时无法通过名称访问它们——它们已经被转换为常量值。

可能存在的一种替代方法是定义许多返回常量值的方法，例如在一个`Constants`类中。`NSSelectorFromString()`然后，在运行时，从 plist 加载方法的名称并使用and调用它`performSelector:`。

但是，一个可能的问题是，为了安全起见，`performSelector:`您必须将所有常量重写为 Objective-C 对象（因为`performSelector:`返回 type `id`）。那可能很不方便。

不过，这里是`Constants`该类的一个示例实现：

```
@implementation Constants : NSObject

+ (NSNumber *)someValueForACertainInstance
{
    return @123;
}

@end 
```

以及示例用法：

```
NSDictionary *infoDotPlist = [[NSBundle mainBundle] infoDictionary];
NSString *selectorName = infoDotPlist[@"StandardValue"];
SEL selector = NSSelectorFromString(selectorName);
NSNumber *result = [Constants performSelector:selector]; 
```

以及选择器名称将如何存储在信息 plist 中：

```
<key>StandardValue</key>
<string>someValueForACertainInstance</string> 
```

# vb.net - 滚动时选定的行闪烁

> ID：14304448
> 
> 赞同：1
> 
> 时间：2013-01-13T14:30:54.017
> 
> 标签：vb.net, datagridview

我在表单区域`DataGridView`中有 5000 行数据`dgv "fill"`。当我用键盘向上或向下滚动它时，选定的行在固态计算机上闪烁很多。有没有办法摆脱这种闪烁？

这是我`DataGridView`的设置方式：

```
 With DataGridView1
        .AllowUserToAddRows = False
        .AllowDrop = False
        .AllowUserToOrderColumns = False
        .AllowUserToResizeRows = False
        .ColumnHeadersDefaultCellStyle.Font = fnt1
        .SelectionMode = DataGridViewSelectionMode.FullRowSelect
        .ScrollBars = ScrollBars.Vertical
        .MultiSelect = False
        .ReadOnly = True
        .DefaultCellStyle.Alignment = DataGridViewContentAlignment.MiddleLeft
        .GridColor = Color.FromArgb(240, 240, 240)
        .DefaultCellStyle.Font = fnt1
        .BorderStyle = BorderStyle.None
        .Dock = DockStyle.Fill
     End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:15:10.377

您可以通过为该表单实现双缓冲来摆脱闪烁

```
me.SetStyle(
ControlStyles.AllPaintingInWmPaint OR _
ControlStyles.UserPaint OR _
ControlStyles.DoubleBuffer,true) 
```

这应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:08:35.683

试试[这个](http://bitmatic.com/c/fixing-a-slow-scrolling-datagridview)_

我真的希望它有帮助

# c# - 为什么编码的 UI 测试自动化很重要？

> ID：14304449
> 
> 赞同：1
> 
> 时间：2013-01-13T14:30:59.187
> 
> 标签：c#

我是测试应用程序主题的新手。几天前开始在 Internet 上冲浪以查找一些有用的教程。老实说，我可以找到一些很好的视频，让我大致了解如何使用 MS Visual Studio 2010 进行一些编码 UI 测试自动化、数据库单元测试以及单元测试。但我仍然有很多问题。例如，CUIT 的自动化只是记录我在自己运行应用程序和测试时所做的事情。所以呢..？它只是记录我的行为。这实际上是我在传统上测试应用程序。我知道并且确信一定有一些我不知道的原因！谁能向我解释一下自动化编码的 UI 测试如何帮助我？另一方面，关于数据库单元测试也有类似的问题。我' 我在 YouTube 上找到了一个视频教程，解释了一个例子。它只是简单地检查存储过程是否正常工作！显然，当我运行我的应用程序（按 F5）时，我将简单地了解插入 SP 是否工作正常！因此，我无法理解数据库单元测试的作用是什么？如果有人能给我一个想法或任何有用的链接，我将提前感激不尽。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:57:59.900

拥有自动化测试的一大优势是它让您有信心更改和修复事物并添加功能，而不必担心某些东西会损坏的可能性，或者会有意想不到的副作用。在每次更改后运行预编码测试既简单又便宜，因此即使在开发周期的后期，您也可以进行风险最大的更改，并且仍然确信您的应用程序仍然是好的。

另一个优点是：假设您编写的某些新代码*确实会*破坏或更改某些现有功能。然后，您有一个简单的方法来发现一个列表到底发生了什么变化（只需运行自动化测试并查看结果！），然后您可以对这些变化进行推理，并将它们分类为错误，实际需要的副作用/变化等等。否则，开发很快就会变成“前进一步，后退两步”的混乱——每次签入都可能解决一个问题并引入两个新问题。即使开发人员知道这两个新问题（并非总是如此），尽管他们的意图是最好的，但他们稍后会忘记解决这些新问题。

您说您可以“只运行一个 SP”或“只运行”自己的 UI。但这并不能扩展......同样，理想情况下，您希望能够在每次更改后自动运行 1000 次测试，而无需支付任何费用，这意味着它们必须是自动化的。此外，您说您仅通过运行应用程序就知道 SP 是否在工作……但是随着您的数据库和应用程序变得越来越复杂，您在应用程序中实际测试所需要做的事情变得越来越不明显您的数据库正确。此外，如果稍后您需要创建使用相同数据库的第二个应用程序怎么办？（例如，您现在有一个网站，以后需要为管理员创建一些命令行工具）。

当有多个人在同一段代码上工作时，所有这些都变得更加重要，原因很明显。如果没有良好的自动化测试覆盖率，复杂的代码片段很快就会成为一个人的领域（“不要在不与 Joe 交谈的情况下触摸该代码！”）。

当然，这并不意味着你应该盲目地将所有可用的测试技术应用于所有项目，尤其是像 CUIT 这样相对“昂贵”的 oves（它可能很昂贵，因为如果你的 UI 在项目过程中变化很大，这种类型的测试可能更难更新）。相反，您应该对项目中的真正风险区域（如果您愿意的话，“错误农场”）进行适当的评估，以及在周期中引入每种类型的测试的正确时间——即有一个实际的测试计划。最后一段是我的观点，显然有不同的方法来选择什么/如何/何时测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:21:20.497

关于记录您操作的测试软件的注释，这在尝试复制错误时非常方便，特别是在您第一次开始编写测试时。

就像 Eugene 指出的那样，当您获得多个编码器时，事情会变得更加复杂，我还想补充一点，当软件必须与其他组件（例如服务器、其他软件包）交互时，它会很快变得非常复杂。假设其他组件是完美的并不总是一个安全的赌注。因此，自动化测试的想法是，在您继续编写软件的同时，您可以针对之前完成的所有内容进行测试，而无需进行任何工作。例如，我编写了一个使用蓝牙连接的程序，但我添加了 WiFi，我可以针对 Wifi 使用大多数（如果不是全部）蓝牙测试用例。在 UI 示例中，假设您添加了一个新按钮，在此过程中您不小心破坏了一个旧按钮，如果您有 10 个按钮并且它与新按钮无关，所以您不要

如果您需要更多关于测试的理由，我强烈建议您阅读[持续集成](https://rads.stackoverflow.com/amzn/click/com/0321336380)，它展示了您应该测试的原因和好处，并提供了如何进行测试的示例。它也有一些关于数据库测试的例子！

我希望这会有所帮助，我也是测试新手，但在短时间内学到了很多东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T15:17:39.027

我不记得我在哪里看到的，但它很好地总结了单元测试。

“写得好的单元测试找不到错误......但它肯定可以找到回归”

# java - 文件 I/O 在输出上产生乱码

> ID：14304450
> 
> 赞同：1
> 
> 时间：2013-01-13T14:31:16.877
> 
> 标签：java, io

我正在学习使用 Java 的文件 I/O。

以下是我来自两个不同 Java 文件的代码。一个是带有主类的“File”，另一个是“FileWrite”。

我能够实现字符串输入和输出。但是输出文本文件一开始就有乱码，我不知道为什么。

[文件.Java]

```
package file;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class File {
    public static void main(String[] args) {

    try (BufferedReader br = new BufferedReader(new FileReader("B:\\fileIn.txt")))
            {
              String stCurrent;

              while ((stCurrent = br.readLine()) != null) {
                    System.out.println(stCurrent);
            }

            } catch (IOException e) {
                e.printStackTrace();
            } 
                    FileWrite fW = new FileWrite();
                    fW.serializeAddress("Boston", "Canada");
        }
} 
```

[文件写入.Java]

```
package file;

import java.io.FileOutputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;

public class FileWrite {

   public void serializeAddress(String city, String country) {
       try {
        FileOutputStream fout = new FileOutputStream("B:\\address.txt");
        ObjectOutputStream obOut = new ObjectOutputStream(fout);   
                obOut.writeUTF(city);
                obOut.writeUTF(country);
        obOut.close();
        System.out.println("Output Done");
       } catch(Exception ex) {
           ex.printStackTrace();
       }
   }
} 
```

现在，关于“obOut.writeUTF(city); obOut.writeUTF(country);” 我分离出两个字符串输入。有没有办法将它们组合成一个？如 obOut.writeUTF(city, counry) 而不是两个。或者这只能通过将它们变成一个对象来实现？

[更新] 又导入了几个，我试过了

```
PrintStream ps = new PrintStream(new FileWriter("B:\\addressPS.txt")); 
ps.println(city); 
ps.println(country); 
ps.close(); 
But with errors, any clue? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:37:59.650

你正在做正确的事情，让他们分开。城市和国家是不同的领域。

一个非常常见的错误是没有区分二进制文件和文本文件/套接字流。你是两者的混合体，这会导致混乱。我建议您只起诉文本 Writer/Reader 或二进制 Input/OutputStream，除非您*非常*清楚自己在做什么。

总之，如果你写什么文字使用

```
PrintStream ps = new PrintStream(new FileWriter(textFileName));
ps.println(city);
ps.println(country);
ps.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:57:43.907

乱码是因为`.writUTF()`以 javadocs 中提到的修改后的 UTF 格式写入数据。

An`ObjectOutputStream`通常用于输出 OBJECTS 但我想您也可以将它用于字符串。您可以使用类中的相应`.readUTF()`方法`ObjectInputStream`来读取文件中的数据。

* * *

此外，您尝试使用 Java SE7 中新增的 try-with-resources 块。你不应该这样做。你应该这样做：

```
try (FileReader fr = new FileReader("B:\\fileIn.txt"); BufferedReader br = new BufferedReader(fr);) {

} catch (FileNotFoundException e1) {
  e1.printStackTrace();
} catch (IOException e1) {
  e1.printStackTrace();
} 
```

拆分 FileReader 和 BufferedReader 将允许 Java SE7 轻松关闭这两个流。按照您的操作方式，只有 BufferedReader 流会在 try 块完成后关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T14:36:18.997

writeUTF 也接受字符串，您不必为城市和县创建新对象。

你不能`obOut.writeUTF(city +" "+country);`吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T15:43:14.230

根据定义，`ObjectOutputStream`会产生“胡言乱语”。它不是供人类使用的，它是一种用于写出对象的格式，以便您可以读回它们。您不应该能够理解文本编辑器中的结果。要制作人类可读的内容，只需使用一个`OutputStreamWriter`甚至一个`PrintWriter`. 简而言之，您的最后一个示例是正确的，如果您遇到错误，请编辑您的问题以告诉我们错误是什么。

# google-api - Google Contacts API v3 - 如何使用 C#.net 更新性别？

> ID：14304451
> 
> 赞同：0
> 
> 时间：2013-01-13T14:31:19.570
> 
> 标签：google-api, google-api-dotnet-client

我使用的是 Google Contacts API v3，无法更新联系人的性别信息

```
public static Contact UpdateContactName(ContactsRequest cr, Uri contactURL) 
{ 
  // First, retrieve the contact to update. 
  Contact contact = cr.Retrieve<Contact>(contactURL); 
  contact.Name.FullName = "New Name"; 
  contact.Name.GivenName = "New"; 
  contact.Name.FamilyName = "Name"; 
  contact.ContactEntry.AddExtension(new Gender("male"));
  try 
  { 
    Contact updatedContact = cr.Update(contact); 
    Console.WriteLine("Updated: " + updatedEntry.Updated.ToString()) 
    return updatedContact; 
  } 
  catch (GDataVersionConflictException e) 
  { 
    // Etags mismatch: handle the exception. 
  } 
  return null; 
} 
```

# php - 使用 php 将 Moodle 数据库数据显示为 ul li

> ID：14304452
> 
> 赞同：0
> 
> 时间：2013-01-13T14:31:26.140
> 
> 标签：php, mysql, database, moodle

> **可能重复：**
> [嵌套数组。第三层正在消失](https://stackoverflow.com/questions/7673044/nested-array-third-level-is-disappearing)

我在使用 php 将 moodle 数据库数据显示为 ul li 表单时遇到了问题。我想以适当的嵌套形式显示所有课程类别，而不是课程，如 ul li。我正在处理的表是 mdl_course_categories。每当 php 脚本运行时，列表必须动态更新代码如下所示：

```
<?php
$con = mysql_connect("localhost","root","");
if (!$con) {
die('Could not connect: ' . mysql_error());
}

mysql_select_db("moodle19", $con);
$result = mysql_query("SELECT name AS COURSE_NAME,parent FROM mdl_course_categories");

if (isset($result)!=1) {
$message  = 'Invalid query: ' . mysql_error() . "\n";
}
echo "<p> The courses taught are: </p>";

while ($row = mysql_fetch_array($result)) {
$b=$row['COURSE_NAME'];
$c=$row['parent'];

//      $a=mysql_query("Select id from mdl_course_categories");
//      $condition=mysql_query("SELECT name AS COURSE_NAME FROM mdl_course_categories WHERE parent='0'");

    if ($c==0) {
    echo "<ul>
    <li>" .$b. "</li>
    </ul>";
    }

    else {
        echo "<ul>
            <li>" .$b. "</li>
            </ul>";
    $result1 = mysql_query("SELECT name AS COURSE_NAME FROM mdl_course_categories WHERE depth!='1'");
    while ($row1 = mysql_fetch_array($result1)) {

        $b1=$row1['COURSE_NAME'];
        echo "<ul>
            <li>" .$b1\. "</li>
            </ul>";
        }
    }   
}
?> 
```

我对出了什么问题感到困惑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:12:53.403

I think this will helpful for you -

```
$query_catetories = mysql_query('SELECT cc.id, cc.parent, cc.name FROM mdl_course_categories cc ');
$categories = mysql_fetch_all($query_catetories);

$tmp_categories = array();

foreach ($categories AS $row) {

    $row['id'] = (int) $row['id'];
    $row['parent'] = (int) $row['parent'];
    if (!$tmp_categories[$row['parent']])
        $tmp_categories[$row['parent']] = array();
    $tmp_categories[$row['parent']][] = $row;
}

$course_catetories = buildNode($tmp_categories);

echo '<ul>';
foreach ($course_catetories as $course_catetory) {
    print_category_child($course_catetory);
}
echo '</ul>';

function print_category_child($category) {
    echo '<li>' . $category['name'];
    if (array_key_exists('children', $category)) {
        echo '<ul>';
        foreach ($category['children'] as $child) {
            print_category_child($child);
        }
        echo '</ul>';
    }
    echo '</li>';
}

function buildNode($inputArray, $parent = 0) {
    $return = array();
    foreach ($inputArray[$parent] AS $key => $row) {
        if (@$inputArray[$row['id']]) {
            $row['children'] = buildNode($inputArray, $row['id']);
        }
        $return[] = $row;
    }
    return $return;
}

function mysql_fetch_all($result) {
    $all = array();
    while ($all[] = mysql_fetch_assoc($result)) {

    }
    return array_filter($all);
} 
```

Thanks

# java - 如何从一个文本字段获取值到另一个

> ID：14304455
> 
> 赞同：0
> 
> 时间：2013-01-13T14:31:39.333
> 
> 标签：java, sql

我想从类 DATAENTRY 的文本字段中获取值到我当前的类 SoilTable 中，以使表正常工作

```
private void btgetinvActionPerformed(java.awt.event.ActionEvent evt) {                                         

    try {                                 //my class DATAENTRY from which i have to fetch the value of textfield tf_rm_id
        DBUtil util = new DBUtil();
        Connection con = util.getConnection();
        PreparedStatement stmt = con.prepareStatement("select COUNT(box_no)as total from mut_det WHERE rm_id = ?");
        ResultSet rs;
        String rm = tf_rm_id.getText().trim();
        stmt.setInt(1, Integer.parseInt(rm));
        rs = stmt.executeQuery();
        while (rs.next()) {
            tf_boxno.setText(rs.getString("total"));
        } 
```

这是我的课程，我想用文本字段 tf_rm_id 的值替换 ? 范围

```
 try {                                               // My current class SoilTable
        DBUtil util = new DBUtil(); 
        Connection con = util.getConnection(); 
        Statement stmt = con.createStatement();
        ResultSet rs = stmt.executeQuery("select * from soil_det where rm_id=?");
        String rmn = (tf_rm_id.getText() == null || tf_rm_id.getText().equals("")) ? "0" : tf_rm_id.getText();
        stmt.setLong(1, Long.parseLong(rmn)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:13:03.923

如果我理解得很好（您的代码不是很清楚），我会创建一个方法并返回该值。

在您的另一个类中，我将创建该类的一个对象并调用该方法，然后如果您愿意，将其分配给另一个值，例如：

//数据输入类

```
 public String getVal()
  {
      return tf_rm_id;
   } 
```

//土壤表

```
 DATAENTRY textFieldVal = new DATAENTRY();

 String strTextFieldVal = textFieldVal.getVal();
 //assigned a new value
 strTextFieldVal = " field value manipulated";

//or display it directly:

 System.out.println("Value recieved: "+textFieldVal.getVal()); 
```

# iphone - iPhone 应用程序 (Storyboard) 中是否有 RTL 支持

> ID：14304459
> 
> 赞同：1
> 
> 时间：2013-01-13T14:31:56.183
> 
> 标签：iphone, objective-c, layout, ios6, right-to-left

我是 iPhone 应用程序的新手。我对英语和阿拉伯语文本（在应用程序开始时选择语言）很好，但只是好奇如何将屏幕从 LTR 格式化为 RTL。

**iPhone 故事板中是否支持布局中的 RTL？**

* * *

## 回答

我问了一些相同的问题，在那里我找到了答案。

[如何在同一标签上将阿拉伯文本设置为右侧，将英文文本设置为左侧](https://stackoverflow.com/questions/14335536/how-to-set-arabic-text-to-right-and-english-text-to-left-on-same-label)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T15:06:46.697

我绝对不是专家，但我确实在我的 iOS 应用程序中使用了希伯来语。iOS 6 SDK 有一个叫做“Auto-Layout”的东西，该指南指定它使您不必担心 RTL 语言。

> Cocoa Auto Layout 允许各个视图声明它们自己的首选大小，这意味着如果标签的文本发生更改（例如，由于本地化，如右侧窗口所示），您不必指定新布局。您甚至不必为像希伯来语和阿拉伯语这样的语言指定新的布局，其中元素本身的从左到右的顺序通常应该颠倒。

[https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-14T17:44:31.667

或者，如果您可以在 iPhone 上的浏览​​器中查看语言，您可以尝试使用 phonegap 等技术。

# android - 活动与远程服务之间的数据共享策略

> ID：14304464
> 
> 赞同：1
> 
> 时间：2013-01-13T14:33:05.093
> 
> 标签：android

我想知道，活动之间是否有任何好的数据共享策略，以及在单独进程中运行的衍生远程服务。到目前为止，我已经尝试了 3 种方法，但都没有奏效。

## 利用`Application`

我首先想到的是，只有一个`Application`, 在 2 个不同的进程之间共享，因为它们来自一个应用程序。

但事实并非如此。我意识到，在创建 main 之前`Activity`，会创建一个`Application`will。当我生成远程服务时，`Application`也会创建另一个新实例。

## 利用`Preferences`

我的第一个想法是，这是基于文件的。`Preferences`因此，每当我向through写入值时`sharedPreferences.edit().putString(key, value).commit()`，更改都会提交到文件中。另一个进程应该能够读取最新的更改。

但这种情况并非如此。我的猜测是，这是因为在我的服务中，我`Preferences`只在服务启动期间通过`PreferenceManager.getDefaultSharedPreferences(application)`. 它仅在第一次从文件中读取值。后续调用`getString`将从内存中读取。

## 使用全局静态变量

不可行，因为`Activity`远程`Service`处于 2 个不同的进程中。他们有2个不同的内存空间。

我可以尝试任何更好的策略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T17:12:48.530

我建议您使用其他两个选项之一：

# 1：广播

一端使用 Context.sendBroadcast(Intent i) 进行广播，另一端使用 Context.registerReceiver(BroadcastReceiver b) 定义广播接收器。

您可以在 Intent 中存储大量数据，但与直接使用内存中的变量相比，访问速度非常慢。

# 2：服务绑定

如果使用 AIDL 定义远程服务的接口，则可以跨进程边界连接到远程服务。它比其他选项复杂一些，但它也是最快的选项。更多信息在这里：http: [//developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)

# android - 软键盘不会触发 ScrollView 中的滚动

> ID：14304466
> 
> 赞同：6
> 
> 时间：2013-01-13T14:33:11.583
> 
> 标签：android, android-layout, scrollview, android-softkeyboard

我知道这里有很多关于 EditText 问题的问题，显示软输入键盘以及清单中应该有的内容（adjustPan 或 adjustResize）。

我在这里阅读了很多问题和答案，但未能解决我的问题。

它实际上很简单：我有一个登录活动，当键盘未显示时，所有内容都适合一个屏幕。在此登录活动的底部，我有一个应该始终位于底部的按钮。当专注于一个 EditText 时，键盘会出现并隐藏一些东西。当键盘启动时，我希望能够向下滚动，但我不能。

*   我已在清单中将活动设置为“adjustPan”

这是两个图像，没有和有键盘：

![在此处输入图像描述](../Images/5ec41ff13b88516ac5c26ad0e9af80bc.png) ![在此处输入图像描述](../Images/b97889ef5274ed64009ef5bdb5ec1891.png)

现在，当键盘启动时，我想向下滚动以查看按钮（黄色和底部）。我做不到。

如果我改为在清单中设置为“adjustRezise”，我会得到另一个不需要的效果，如下所示：

![在此处输入图像描述](../Images/7ef8b53096b0d86802f3a6bce1af6341.png)

底部的按钮不是其他东西的“顶部”，但我无法滚动（以便可以查看“登录”按钮）。

第一个问题是：为什么“adjustPan”不能滚动以及键盘隐藏东西时？这是我要说的合理的事情。

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout6"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/taxibg3"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/ScrollView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/login_logoBarInclude"
        android:fillViewport="true"
        android:orientation="vertical" >

        <RelativeLayout
            android:id="@+id/login_form"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <LinearLayout
                android:id="@+id/iv1"
                android:layout_width="240dp"
                android:layout_height="280dp"
                android:layout_centerHorizontal="true"
                android:layout_marginTop="5dp"
                android:background="@drawable/login_square_adapted"
                android:orientation="vertical"
                android:paddingTop="15dp" >

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_horizontal"
                    android:text="@string/vehicleLogin"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:textColor="#ffffff" />

                <FrameLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="3dp"
                    android:layout_marginRight="3dp"
                    android:layout_marginTop="10dp" >

                    <include layout="@layout/menu_divider_horizontal" >
                    </include>
                </FrameLayout>

                <RelativeLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="30dp"
                    android:layout_marginRight="30dp"
                    android:layout_marginTop="35dp"
                    android:gravity="center_horizontal"
                    android:orientation="vertical" >

                    <EditText
                        android:id="@+id/login_carNumber"
                        style="@style/EditTextDark"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_toRightOf="@+id/login_car_icon"
                        android:hint="@string/prompt_carNumber"
                        android:inputType="phone"
                        android:textAppearance="?android:attr/textAppearanceMedium"
                        android:textCursorDrawable="@null" >

                        <requestFocus />
                    </EditText>

                    <ImageView
                        android:id="@+id/login_car_icon"
                        android:layout_width="40dp"
                        android:layout_height="40dp"
                        android:src="@drawable/user" />

                    <EditText
                        android:id="@+id/login_password"
                        style="@style/EditTextDark"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_below="@id/login_carNumber"
                        android:layout_marginTop="10dp"
                        android:layout_toRightOf="@+id/login_lock_icon"
                        android:hint="@string/prompt_password"
                        android:inputType="phone"
                        android:textAppearance="?android:attr/textAppearanceMedium"
                        android:textCursorDrawable="@null" >
                    </EditText>

                    <ImageView
                        android:id="@+id/login_lock_icon"
                        android:layout_width="40dp"
                        android:layout_height="40dp"
                        android:layout_alignTop="@id/login_password"
                        android:layout_below="@id/login_car_icon"
                        android:src="@drawable/lock" />

                    <Button
                        android:id="@+id/sign_in_button"
                        android:layout_width="fill_parent"
                        android:layout_height="40dp"
                        android:layout_alignParentBottom="true"
                        android:layout_centerHorizontal="true"
                        android:layout_marginBottom="10dp"
                        android:background="@drawable/button_rounded"
                        android:gravity="center_horizontal"
                        android:paddingTop="5dp"
                        android:text="@string/action_sign_in_short"
                        android:textColor="#000000" />
                </RelativeLayout>
            </LinearLayout>
        </RelativeLayout>
    </ScrollView>

    <Button
        android:id="@+id/quit_app_button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="@string/action_exit_app" />

</RelativeLayout> 
```

**======= 编辑 =========**

所以，我按照约瑟夫的建议改变了布局，但是现在“高度很大”，即使没有理由，即最后的按钮是“远向下”，所以你需要滚动“远向下” "来查看它，而不是在屏幕底部。我希望你明白我的意思：

![请注意右侧的滚动条，并没有看到按钮，因为它是](../Images/501190ecb130986ae9a02613e7eeedd1.png)

*请注意右侧的滚动条，并且看不到按钮，因为它“向下”。此外，背景被拉伸了，这意味着名为“linearLayoyt6”的RelativeLayout（令人困惑，是的）由于某种原因正在向下扩展...... *

我尝试将 ScrollView 和下面的布局的高度设置为固定 dp，但没有任何帮助。XML是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <RelativeLayout
        android:id="@+id/linearLayout6"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/taxibg3"
        android:orientation="vertical" >

        <RelativeLayout
            android:id="@+id/login_form"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            >

            <LinearLayout
                android:id="@+id/iv1"
                android:layout_width="240dp"
                android:layout_height="280dp"
                android:layout_centerHorizontal="true"
                android:layout_marginTop="25dp"
                android:background="@drawable/login_square_adapted"
                android:orientation="vertical"
                android:paddingBottom="0dp"
                android:paddingLeft="0dp"
                android:paddingRight="0dp"
                android:paddingTop="15dp" >

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_horizontal"
                    android:text="@string/vehicleLogin"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:textColor="#ffffff" />

                <FrameLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="3dp"
                    android:layout_marginRight="3dp"
                    android:layout_marginTop="10dp" >

                    <include layout="@layout/menu_divider_horizontal" >
                    </include>
                </FrameLayout>

                <RelativeLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="30dp"
                    android:layout_marginRight="30dp"
                    android:layout_marginTop="35dp"
                    android:gravity="center_horizontal"
                    android:orientation="vertical" >

                    <EditText
                        android:id="@+id/login_carNumber"
                        style="@style/EditTextDark"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_toRightOf="@+id/login_car_icon"
                        android:hint="@string/prompt_carNumber"
                        android:inputType="phone"
                        android:textAppearance="?android:attr/textAppearanceMedium"
                        android:textCursorDrawable="@null" >

                        <requestFocus />
                    </EditText>

                    <ImageView
                        android:id="@+id/login_car_icon"
                        android:layout_width="40dp"
                        android:layout_height="40dp"
                        android:src="@drawable/user" />

                    <EditText
                        android:id="@+id/login_password"
                        style="@style/EditTextDark"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_below="@id/login_carNumber"
                        android:layout_marginTop="10dp"
                        android:layout_toRightOf="@+id/login_lock_icon"
                        android:hint="@string/prompt_password"
                        android:inputType="phone"
                        android:textAppearance="?android:attr/textAppearanceMedium"
                        android:textCursorDrawable="@null" >
                    </EditText>

                    <ImageView
                        android:id="@+id/login_lock_icon"
                        android:layout_width="40dp"
                        android:layout_height="40dp"
                        android:layout_alignTop="@id/login_password"
                        android:layout_below="@id/login_car_icon"
                        android:src="@drawable/lock" />
                </RelativeLayout>

                <FrameLayout
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_marginTop="30dp"
                    android:background="@drawable/login_square_half"
                    android:padding="0dp" >

                    <Button
                        android:id="@+id/sign_in_button"
                        android:layout_width="120dp"
                        android:layout_height="40dp"
                        android:layout_gravity="center_vertical|center_horizontal"
                        android:background="@drawable/button_rounded"
                        android:gravity="center_horizontal"
                        android:text="@string/action_sign_in_short"
                        android:textColor="#000000" />
                </FrameLayout>
            </LinearLayout>
        </RelativeLayout>

        <Button
            android:id="@+id/quit_app_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:text="@string/action_exit_app" />
    </RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:29:24.333

尝试将 resizeMode 更改为`adjustResize`并将 the`ScrollView`从内部移动`RelativeLayout` `linearLayout6`到外部并将 the设置`layout_height`为。`RelativeLayout``wrap_content`

# c++ - 为什么？特定的像素处理应该是处理 (h, w) 而不是 (w, h) 或 (x, y)

> ID：14304472
> 
> 赞同：1
> 
> 时间：2013-01-13T14:33:57.657
> 
> 标签：c++, opencv

一些关于使用 OpenCV 进行图像处理的示例代码如下所示：

```
for(i=0;i<height;i++)
{
      for(j=0;j<width;j++)
      {
          if(pointPolygonTest(Point(i,j),myPolygon))
          {
                 // do some processing
          }
      }
} 
```

在迭代中，为什么我们需要从高度和宽度开始？还有为什么 Point 是 store (height, width) 所以是 -> (y,x) ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:46:16.330

[0..Height] 和 [0..Width] 之间的范围是您工作区域的最大边界。

此代码正在测试整个图像的哪些像素在多边形内`myPolygon`。

*“整体”一词意味着您应该检查图像的所有像素，因此您应该从 0 迭代到 Y 的高度，并从 0 迭代到 X 的宽度。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:25:38.407

实际上在这里，行/列约定用于迭代整个图像。

> 高度 = 行数
> 
> 宽度 = 列数

图像被逐行访问。外循环在图像的行上迭代，内循环在列上迭代。所以基本上`i`是当前行并且`j`是图像的当前列。

内部循环处理一整行图像。

# jquery - JQuery 淡入延迟淡出

> ID：14304473
> 
> 赞同：16
> 
> 时间：2013-01-13T14:34:02.317
> 
> 标签：jquery

我试图淡入一个div，让它在屏幕上保持几秒钟然后淡出。问题是它没有像我预期的那样长时间停留在屏幕上，即使将延迟设置为大约 10 秒，它也只是短暂地停留在屏幕上。我已经阅读了很多帖子并尝试了很多事情，例如 settimeout 但我无处可去。

这是我的脚本：

```
<script type="text/javascript">
    function pageLoad() {
    $("[id*=lnkSelect]").live("click", function () {
    var price = $("#price").html($(".prodprice", $(this).closest('tr').prev().children   ('td.prodpricelabel')).html());
    var code = $("#code").html($(".prodcode", $(this).closest('tr').prev().prev().children ('td.prodcodelabel')).html());
    //Build the new HTML
    $(code).prepend("<br/>Item: ");
    $(code).append("<br/>Has been<br/>added to your cart.<br/>Price: ");
    $(".tooltipleft").html(code); //Set the new HTML
    $(".tooltipleft").append(price);
    $(".tooltipleft").fadeIn('slow').delay(5000).fadeOut('slow');
    });
    };
</script> 
```

因此，我从 html 中获取产品代码和价格，修改 div 中的 html，然后将其淡入作为商品已添加到购物车的通知。

这是我要淡入的 div：

```
<div class="tooltipleft" id="tooltip">
    <span id="code"></span><span id="price"></span>
</div> 
```

和网格中的按钮：

```
<asp:ImageButton ID="lnkSelect" runat="server" ImageUrl="~/Buttons/add_to_cart.png"
    AlternateText="Add To Cart" CommandArgument='<%# Eval("ProductID") %>' CommandName="Add"
    ImageAlign="Right" /> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-13T14:47:25.190

做这样的事情：http: [//jsfiddle.net/LJsNG/1/](http://jsfiddle.net/LJsNG/1/)

```
$(function () {
  $('.tooltipleft').fadeIn('slow', function () {
    $(this).delay(5000).fadeOut('slow');
  });
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-13T14:41:20.587

使用 show 和 hide 代替 fadeIn 和 fadeOut 来查看它是否有效。如果它不起作用，那么您的问题在其他地方。[如](http://jsfiddle.net/zceKN/116/)您所见，这是`$('#foo').fadeIn().delay(2000).fadeOut();` 一个正确的代码行。

```
$('#tooltipleft').show(0).delay(5000).hide(0); 
```

# c# - 在远程计算机上运行程序

> ID：14304474
> 
> 赞同：0
> 
> 时间：2013-01-13T14:34:10.430
> 
> 标签：c#, wmi, remote-server

我有这个代码：

```
ConnectionOptions connOptions = new ConnectionOptions();
connOptions.Impersonation = ImpersonationLevel.Impersonate;
connOptions.EnablePrivileges = true;
ManagementScope manScope = new ManagementScope(String.Format(@"\\{0}\ROOT\CIMV2", sHost), connOptions);
manScope.Connect();
ObjectGetOptions objectGetOptions = new ObjectGetOptions();
ManagementPath managementPath = new ManagementPath("Win32_Process");
ManagementClass processClass = new ManagementClass(manScope, managementPath, objectGetOptions);
ManagementBaseObject inParams = processClass.GetMethodParameters("Create");
inParams["CommandLine"] = "notepad.exe";
ManagementBaseObject outParams = processClass.InvokeMethod("Create", inParams, null); 
```

当我将 sHost 设置为我的本地 IP 地址时，它可以工作并打开记事本。但是，当我将其设置为远程服务器时，什么也没有发生。

（我能够连接到远程计算机并从我的应用程序复制文件 - 这只是为了尝试远程运行东西。防火墙也已为 WMI 配置）。

有点没有更多的想法...

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:49:55.420

也许，您应该使用 PsTools（从您的应用程序运行）？非常适合远程部署。

# c# - Linq To DataSet 出现错误

> ID：14304475
> 
> 赞同：0
> 
> 时间：2013-01-13T14:34:20.400
> 
> 标签：c#, .net, linq, linq-to-dataset

在我的 WinForm 项目中，我尝试在 LINQ 的帮助下访问 DataSet 中的表。

```
 DSObjectData lDataSetObject; // DSObjectData -Strongly typed DataSet

       var q = from contour in lDataSetObject.Contour
               select contour; 
```

但在**选择**运算符我得到这个错误：

> 无法将 lambda 表达式转换为类型“字符串”，因为它不是委托类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:40:02.560

DataTable 不可枚举。

```
var q = from contour in lDataSetObject.Contour.AsEnumerable()
               select contour; 
```

`q`是`IEnumerable<DataRow>`。

# windows-phone-7 - Windows Phone - SqlCeException 列类型 double

> ID：14304477
> 
> 赞同：0
> 
> 时间：2013-01-13T14:34:28.050
> 
> 标签：windows-phone-7, sql-server-ce, windows-phone, windows-phone-8

我有一个基本实体和 3 个继承的子实体，称为 NoteItem、ImageItem 和 MapItem。基实体类标有 [InheritanceMapping] 属性并具有鉴别器列。一切正常，除了第三个 MapItem 实体，它包含 4 列类型为 double 和 bool。

例如，如果我插入一个 NoteItem 实体，它会抛出一个异常：

> SqlCeException - 列间距不能包含 NULL 值

间距是双列型。仅当我使用 CanBeNull = true 添加扩展每个双精度和布尔列的 [Column] 属性时，它才有效。

在我看来，double 和 bool 值存在问题，因为 string 类型的列不能明确包含 CanBeNull 添加。

这是一个已知问题还是我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:17:01.240

> double 和 bool 值有问题

AFAIK 行为是设计使然。

> 字符串类型的列不得显式包含 CanBeNull 添加

字符串 CLR 值可以为空，因此如果没有`[Column( CanBeNull = false )]`指定属性，实体框架会生成可以为空的列。OTOH、bool 和 double 值不能为空，如果要允许空值，则必须指定`[Column( CanBeNull = true )]`

如果您不想用属性装饰您的 double 和 bool 属性/字段`[Column]`，您可以例如将它们分别定义为`double?`和。`bool?`

# c# - 如何在不使用命令按钮 C# asp.net 的情况下编辑、删除、添加 gridview 行？

> ID：14304478
> 
> 赞同：-1
> 
> 时间：2013-01-13T14:34:28.203
> 
> 标签：c#, asp.net, gridview

如何在 gridview 中删除、编辑和添加行，其中包含 3 个按钮，用于在 C# asp.net 中删除、编辑和添加行并在更改后刷新网格？我不想使用在每一行中重复的 gridview 的命令按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:01:06.220

您需要以某种方式选择行，以便代码知道要删除或编辑哪一行。然后您可以获取该行的内容`GridView1_SelectionChanged`以删除或更新它。

**编辑：** 这是要做的事情： 1\. 将一个gridview 和一个文本框拖到页面上。2.填充gridview 3.覆盖渲染

```
protected override void Render(System.Web.UI.HtmlTextWriter writer)
    {
        foreach (GridViewRow row in GridView1.Rows)
        {
            if (row.RowType == DataControlRowType.DataRow)
            {
                row.Attributes["onclick"] =ClientScript.GetPostBackClientHyperlink(GridView1,
            "Select$" + row.DataItemIndex, true);
            }
        }
        base.Render(writer); 
    } 
```

4) 在`GridView1_SelectedIndexChanged`事件中

```
//retrieve the id for selected row
int id=int.Parse(GridView1.SelectedDataKey.Value.ToString());
GridViewRow row = GridView1.SelectedRow;
TextBox1.Text = row.Cells[0].Text; 
```

现在，您可以根据自己的喜好轻松自定义这个简单的示例。

**编辑 2：** 在 gridview 中将 Id 指定为 DataKeyName

```
 <asp:GridView ID="GridView1" runat="server" DataKeyNames="id"
                onselectedindexchanged="GridView1_SelectedIndexChanged"> 
```

检查更新`GridView1_SelectedIndexChanged`以查看如何检索所选行的 id。

# image - 使用 ImageMagick 批量调整图像大小并将图像输出到新文件夹

> ID：14304480
> 
> 赞同：88
> 
> 时间：2013-01-13T14:34:41.293
> 
> 标签：image, imagemagick, image-resizing, resize-image, mogrify

当前图像文件夹路径：

```
public_html/images/thumbs 
```

输出图片文件夹路径：

```
public_html/images/new-thumbs 
```

我在当前文件夹中每个视频有 10 个视频拇指，以图像拇指命名：

```
1-1.jpg
1-2.jpg
1-3.jpg
1-4.jpg
1-5.jpg (Resize)
1-6.jpg
1-7.jpg
1-8.jpg
1-9.jpg
1-10.jpg

2-1.jpg
2-2.jpg
2-3.jpg
2-4.jpg
2-5.jpg (Resize)
2-6.jpg
2-7.jpg
2-8.jpg
2-9.jpg
2-10.jpg 
```

我想将所有第 5 张图像（*-5.jpg）的大小调整为新文件夹。我试过下面的命令但没有运气：

```
mogrify 
-path 
  public_html/images/thumbs/*-5.jpg 
-resize 16×12 
-quality 100 
  public_html/images/new-thumbs/*-5.jpg 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-08-02T13:31:03.230

"Mogrify" should be called from the directory with the original thumbnails, while the -path parameter is for pointing target directory.

```
cd public_html/images/thumbs
magick mogrify -resize 16x12 -quality 100 -path ../new-thumbs *.jpg 
```

[http://www.imagemagick.org/Usage/basics/#mogrify](http://www.imagemagick.org/Usage/basics/#mogrify)

the last arguments are the list of files, so you can filter by name pp*.jpg for example.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-10-11T13:24:22.500

建议的解决方案在最新的 ImageMagick 上无法正常工作（至少在 macOS 上）。*用于覆盖源图像*的命令如下：

`magick mogrify -path ./ -resize 50% -quality 80 *.jpg`

为避免覆盖原始图像，请写入新文件夹：

`magick mogrify -path path/to/destination/folder/ -resize 50% -quality 80 *.jpg`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-12-07T01:37:25.237

在 ImageMagick 7 版本中，它内置于 magick ...so..

```
magick mogrify -resize 16x12 -quality 100 -path ../new-thumbs *.jpg 
```

确保您在*路径*中指定的文件夹存在。它不会由 ImageMagick 创建。

在这里找到更多信息[https://www.imagemagick.org/script/mogrify.php](https://www.imagemagick.org/script/mogrify.php)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-19T18:53:38.193

对于在 Ubuntu/Debian 上安装了 Shotwell 的用户，通过根据需要处理图像，将文件夹中的选定图像导出到另一个文件夹可能更容易。

*   打开肖特韦尔
*   选择要导出的图像
*   文件 > 导出
*   根据您的需要调整值
*   选择要导出的文件夹

# c# - UdpClient C# BeginReceive 从特定端点

> ID：14304486
> 
> 赞同：2
> 
> 时间：2013-01-13T14:35:13.847
> 
> 标签：c#, udp, ip, communication

我在我的简单 Udp 服务器中使用 UdpClient。
是否可以仅从特定的 IP 地址开始接收（）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:56:39.227

不，这是 UDP 的基本原理，它不像 TCP 那样面向连接的协议。您只能在收到数据包时通过检查调用 EndReceive() 时获得的 IPEndPoint 来拒绝数据包。您实际上必须这样做的可能性应该很小。

# java - 如何使用 Achartengine 库在 Android 中的片段内使用图表？

> ID：14304489
> 
> 赞同：2
> 
> 时间：2013-01-13T14:35:26.423
> 
> 标签：java, android, android-layout, charts, achartengine

我有一个活动 3ChartPerTabActivity，我有 3 个带有 Viepager 的标签片段。每个片段视图都有不同的颜色。到目前为止正在工作。

当我尝试将饼图添加到第一个选项卡片段布局时，会出现我的问题...我想为每个选项卡制作一个图表。例如，第一个选项卡是饼图等

我决定使用`Achartengine`图书馆。我试过了，但我得到了`"NullPointerException"`。

这是 tab_frag1_layout.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:background="#FF0000"
    android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/chart_container"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">
        </LinearLayout>

    </LinearLayout> 
```

这是 Tab1Fragment：

```
import java.text.DecimalFormat;

import org.achartengine.ChartFactory;
import org.achartengine.GraphicalView;
import org.achartengine.model.CategorySeries;
import org.achartengine.model.SeriesSelection;
import org.achartengine.renderer.DefaultRenderer;
import org.achartengine.renderer.SimpleSeriesRenderer;

import android.graphics.Color;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;
import android.widget.Toast;

public class Tab1Fragment extends Fragment {

    private GraphicalView mChartView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
            return null;
        }

        // Pie Chart Slice Names
        final String[] status = new String[] { "Normal", "High", "Over" };

        // Pie Chart Slice Values
        double[] distribution = { 6, 3, 1 };

        // Color of each Pie Chart Slices
        int[] colors = { Color.GREEN, Color.YELLOW, Color.RED };

                // Instantiating CategorySeries to plot Pie Chart
        CategorySeries distributionSeries = new CategorySeries(" General ");
        for (int i = 0; i < distribution.length; i++) {

            // Adding a slice with its values and name to the Pie Chart
            distributionSeries.add(status[i], distribution[i]);
        }

        // Instantiating a renderer for the Pie Chart
        DefaultRenderer defaultRenderer = new DefaultRenderer();
        for (int i = 0; i < distribution.length; i++) {
            SimpleSeriesRenderer seriesRenderer = new SimpleSeriesRenderer();
            seriesRenderer.setColor(colors[i]);
            seriesRenderer.setDisplayChartValues(true);

            // Adding the renderer of a slice to the renderer of the pie chart
            defaultRenderer.addSeriesRenderer(seriesRenderer);
        }

        defaultRenderer.setChartTitle("General");
        defaultRenderer.setChartTitleTextSize(20);
        defaultRenderer.setZoomButtonsVisible(true); 
```

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// ////

```
// Getting a reference to view group linear layout chart_container
LinearLayout chartContainer = (LinearLayout) getView().findViewById(
        R.id.chart_container); 
```

///////////////////////////////////////// //////////////////////////////

```
// Getting PieChartView to add to the custom layout
        mChartView = ChartFactory.getPieChartView(getActivity(),
                distributionSeries, defaultRenderer);

        // Adding the pie chart to the custom layout
        chartContainer.addView(mChartView);

        return (LinearLayout) inflater.inflate(R.layout.tab_frag1_layout,
                container, false);
    }
} 
```

这是一个屏幕截图：![在此处输入图像描述](../Images/aaad6986562d7bc1f32b2d8016b0bb0e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T14:40:59.317

`getView``onCreateView`在 AFTER完成 之前不起作用：http: [//developer.android.com/reference/android/app/Fragment.html#getView](http://developer.android.com/reference/android/app/Fragment.html#getView) ()

使用`View`您膨胀的`onCreateView`作为起点来“找到”您仍在的其他视图`onCreateView`，而不是`getView`()。

例如：

```
View view = (LinearLayout) inflater.inflate(R.layout.tab_frag1_layout,
                container, false);
LinearLayout chartContainer = (LinearLayout) view.findViewById(
        R.id.chart_container);
...
return view; 
```

（假设“tab_frag1_layout”里面有“chart_container”布局。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-02T15:28:42.843

就我而言，我使用`SherlockFragment`and 遇到了同样的问题。

替换`LinearLayout`to后`ViewGroup`，它显示了图表。

```
ViewGroup chartContainer = (ViewGroup)view.findViewById(R.id.chart_container); 
```

我希望它对你和其他有同样问题的人有用。

# performance - 使用 SVG 'use' 标签的好处

> ID：14304491
> 
> 赞同：1
> 
> 时间：2013-01-13T14:35:48.370
> 
> 标签：performance, svg, tags

我对 SVG 'use' 标签进行了一些研究，我想知道它是否可以在我们的特定场景中有所帮助，即用户可以创建许多微小的晶体（svg 对象）（粗略估计，我预计大约 200-400 svg每个场景要创建的对象）。

我的问题是：

使用'use'标签有什么好处，当然，它克隆了另一个对象，但作为我们的应用程序。可能会变得很重，是否有与“使用”标签相关的性能优势？

谢谢，

# mobile - 响应式网页设计适用于桌面，但不适用于移动设备

> ID：14304494
> 
> 赞同：128
> 
> 时间：2013-01-13T14:35:57.377
> 
> 标签：mobile, responsive-design

我有一个必须响应手机的网站。我已经使用我的桌面创建了它。当我调整浏览器窗口时，它非常适合手机，但是当我在我的真实手机上检查它时：三星 Galaxy S2 它对移动视图没有响应。

可能是什么问题？

* * *

## 回答 #1

> 赞同：334
> 
> 时间：2013-01-29T07:28:20.680

您可能缺少 html 头中的视口元标记：

```
 <meta name="viewport" content="width=device-width, initial-scale=1"> 
```

没有它，设备假定并将视口设置为全尺寸。

更多信息[在这里](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-dont-forget-the-viewport-meta-tag/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-20T06:35:24.970

我也遇到过这个问题。最后我得到了解决方案。使用下面的代码。希望：问题会得到解决。

`<meta name="viewport" content="initial-scale=1, maximum-scale=1">`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-24T20:54:09.430

虽然上面已经回答并且使用正确

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

但是如果你使用 React 和 webpack，那么不要忘记关闭元素标签

```
<meta name="viewport" content="width=device-width, initial-scale=1" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-12T07:45:54.597

**响应式元标记**

为确保所有设备的正确渲染和触摸缩放，请将响应式视口元标记添加到您的`<head>`.

```
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> 
```

# canvas - ShapeDrawable 子类被幽灵三角形所困扰

> ID：14304500
> 
> 赞同：0
> 
> 时间：2013-01-13T14:36:29.260
> 
> 标签：canvas, shapedrawable

我正在尝试扩展/继承 ShapeDrawable。结果确实令人困惑。我的简单代码应该创建一个小点和一个小三角形。事实上，这些形状确实出现在绘制它们的地图视图上。然而，第二个形状有些不同的三角形也出现了，我不知道这是为什么。为什么我的 ShapeDrawable 子类会创建一个额外的三角形？

示例屏幕截图 --->> [http://www.activemetrics.com/DrawableProb.png](http://www.activemetrics.com/DrawableProb.png)

```
 private class CustomDrawable extends ShapeDrawable
    {
        public CustomDrawable() //GeoPoint point, MapView mapView)
        {
        }

        public void draw(Canvas canvas)
        {
            canvas.drawCircle(0, 0, 2/*radius*/,    getPaint());
            Paint paint = new Paint();
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(2);
            paint.setColor(Color.RED);
            Path path = new Path();
            path.reset();
            path.moveTo(0, -10);
            path.lineTo(5, 0);
            path.lineTo(-5, 0);
            path.close();
            path.offset(10, 40);
            canvas.drawPath(path, paint);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:03:32.850

我想也许这个问题太难了。也许在这个子类之外的某个地方出了点问题。（但奇怪的是，通过删除此处的绘图逻辑，鬼三角形消失了，这确实发生了。）无论如何，我通过制作一个添加到地图视图然后重载绘图方法的单一叠加层获得了更好的体验...

```
 private class MapOverlay extends com.google.android.maps.Overlay
    {
        @Override
        public boolean draw(Canvas canvas, MapView mapView,
        boolean shadow, long when)
        {
            super.draw(canvas, mapView, shadow);

            Bitmap bmp = BitmapFactory.decodeResource(
                    getResources(), R.drawable.ic_launcher);

            //---translate the GeoPoint to screen pixels---
            Point screenPts1 = new Point();
            mapView.getProjection().toPixels(p1, screenPts1);

            //---translate the GeoPoint to screen pixels---
            Point screenPts2 = new Point();
            mapView.getProjection().toPixels(p2, screenPts2);

            //---add the first marker---
            canvas.drawBitmap(bmp, screenPts1.x - bmp.getWidth()/2,
                                   screenPts1.y - bmp.getHeight()/2, null); 
```

（……剪……）

# pandas - Pandas 组示例错误

> ID：14304506
> 
> 赞同：0
> 
> 时间：2013-01-13T14:37:13.370
> 
> 标签：pandas

我正在尝试复制 Wes McKinney 关于 Pandas 的书中的一个示例，代码在这里（假设所有名称数据文件都在名称文件夹下）

```
# -*- coding: utf-8 -*-
import numpy as np
import pandas as pd

years = range(1880, 2011)
pieces = []
columns = ['name', 'sex', 'births']
for year in years: 
    path = 'names/yob%d.txt' % year
    frame = pd.read_csv(path, names=columns)
    frame['year'] = year
    pieces.append(frame)

names = pd.concat(pieces, ignore_index=True)
names

def get_tops(group):    
    return group.sort_index(by='births', ascending=False)[:1000]

grouped = names.groupby(['year','sex'])
grouped.apply(get_tops) 
```

我正在使用 Pandas 0.10 和 Python 2.7。我看到的错误是这样的：

```
Traceback (most recent call last):
  File "names.py", line 21, in <module>
    grouped.apply(get_tops)
  File "/usr/local/lib/python2.7/dist-packages/pandas-0.10.0-py2.7-linux-i686.egg/pandas/core/groupby.py", line 321, in apply
    return self._python_apply_general(f)
  File "/usr/local/lib/python2.7/dist-packages/pandas-0.10.0-py2.7-linux-i686.egg/pandas/core/groupby.py", line 324, in _python_apply_general
    keys, values, mutated = self.grouper.apply(f, self.obj, self.axis)
  File "/usr/local/lib/python2.7/dist-packages/pandas-0.10.0-py2.7-linux-i686.egg/pandas/core/groupby.py", line 585, in apply
    values, mutated = splitter.fast_apply(f, group_keys)
  File "/usr/local/lib/python2.7/dist-packages/pandas-0.10.0-py2.7-linux-i686.egg/pandas/core/groupby.py", line 2127, in fast_apply
    results, mutated = lib.apply_frame_axis0(sdata, f, names, starts, ends)
  File "reduce.pyx", line 421, in pandas.lib.apply_frame_axis0 (pandas/lib.c:24934)
  File "/usr/local/lib/python2.7/dist-packages/pandas-0.10.0-py2.7-linux-i686.egg/pandas/core/frame.py", line 2028, in __setattr__
    self[name] = value
  File "/usr/local/lib/python2.7/dist-packages/pandas-0.10.0-py2.7-linux-i686.egg/pandas/core/frame.py", line 2043, in __setitem__
    self._set_item(key, value)
  File "/usr/local/lib/python2.7/dist-packages/pandas-0.10.0-py2.7-linux-i686.egg/pandas/core/frame.py", line 2078, in _set_item
    value = self._sanitize_column(key, value)
  File "/usr/local/lib/python2.7/dist-packages/pandas-0.10.0-py2.7-linux-i686.egg/pandas/core/frame.py", line 2112, in _sanitize_column
    raise AssertionError('Length of values does not match '
AssertionError: Length of values does not match length of index 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:53:02.963

我认为这是 0.10 中引入的错误，即[问题 #2605](https://github.com/pydata/pandas/issues/2605)，“AssertionError when using apply after GroupBy”。它已经被修复了。

您可以等待 0.10.1 版本，从现在开始应该不会太久，或者您可以升级到开发版本（通过`git`或简单地通过下载`zip`master 。）

# php - 如何在 nginx 反向代理后面安全地检测 CakePHP 中的 SSL？

> ID：14304516
> 
> 赞同：9
> 
> 时间：2013-01-13T14:38:35.647
> 
> 标签：php, cakephp, ssl, nginx, reverse-proxy

CakePHP（我见过的所有版本）检查`$_SERVER['HTTPS']`是否通过 HTTPS 而不是纯 HTTP 发出请求。

我使用 nginx 作为负载均衡器，后面是 Apache 应用程序服务器。由于 SSL 连接在负载平衡器处终止，因此`$_SERVER['HTTPS']`就 CakePHP 而言没有设置。

我想找到一种安全的方法来检测应用服务器上的 HTTPS。

到目前为止，我已经把它放到了我的 CakePHP 配置中：

```
$request_headers = getallheaders();
if ( (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS']) || ( isset($request_headers['X-Forwarded-Proto']) && $request_headers['X-Forwarded-Proto'] == 'https' ) ) {

    $ssl = true;

    // overwrite environment vars (ugly) since CakePHP won't honour X-Forwarded-Proto
    $_SERVER['HTTPS'] = 'on';
    $_ENV['HTTPS'] = 'on';

} else {
    $ssl = false;
} 
```

然后在 nginx 配置中，我习惯`proxy_set_header X-Forwarded-Proto https;`将标志添加到负载均衡器和后端应用程序服务器之间的任何请求中。

这工作得非常好，但是任何向应用服务器发出直接请求的人都可能欺骗他们，以为他们正在浏览 SSL，而实际上他们不是。我不确定这是否存在安全风险，但这似乎不是一个好主意。

是否存在安全风险？更好的解决方案是什么？

由于 using`X-Forwarded-Proto`似乎[是一种标准](https://stackoverflow.com/questions/13111080/what-is-a-full-specification-of-x-forwarded-proto-http-header)，因此该解决方案可能是提交给 CakePHP 核心的一个很好的补丁，所以我认为任何答案都可以合法地涉及编辑核心文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T16:00:56.647

## 添加请求检测器

不要编辑核心。*如果您打算提交补丁，请在补丁被接受之前*不要依赖您的补丁- 否则您将走上分歧之路并维护自己的 CakePHP 分支。

一旦确定了确切的实现逻辑，就可以使用[请求检测器](http://book.cakephp.org/2.0/en/controllers/request-response.html#inspecting-the-request)来实现它。

例如：

```
//AppController::beforeFilter
public function beforeFilter() {
    $this->request->addDetector('ssl', array(
        'env' => 'HTTP_X_FORWARDED_PROTO',
        'value' => 'https'
    ));
} 
```

在此之后，您的自定义标头将被 cake 正确识别为 ssl 请求。

请注意，`$_SERVER`全局键被标准化为全部大写和下划线分隔，即：

```
$ curl --header "X-Forwarded-Proto:https" http:://yoursite.com 
```

将填充`$_SERVER['HTTP_X_FORWARDED_PROTO']`- 因此这是检查的关键。

## 考虑（内）安全

是的，这是您应该注意的事情 - 要么禁用对您的网络服务器的直接访问，以便只有通过负载均衡器的 ip 它才会响应；或修改您的检测器，以便无论标头的值如何，它都不会为直接访问请求返回 true `X-Forwarded-Proto`- 如文档中所示，您可以使用回调来执行所需的任何逻辑，而不是简单地测试某些环境变量的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-14T08:59:59.367

[mod_rpaf](https://github.com/gnif/mod_rpaf)会让你这样做。

这会根据 nginx 发送的标头将 Apache 中的 HTTPS 值设置为“on”，因此 Cake 可以开箱即用（以及在 Apache 中运行的任何其他应用程序）。

它还更正了 REMOTE_ADDR、SERVER_PORT 和 HTTP_HOST 的值。

这是我的示例配置：

```
<IfModule mod_rpaf.c>
    RPAF_Enable       On
    RPAF_ProxyIPs     127.0.0.1 10.0.0.0/24
    RPAF_SetHostName  On
    RPAF_SetHTTPS     On
    RPAF_SetPort      On
</IfModule>

# If mod_rewrite redirects then we lose the HTTPS status to REDIRECT_HTTPS.
# This resets it back. This happens with Cake's front controller
<IfModule setenvif_module>
    SetEnvIf REDIRECT_HTTPS on HTTPS=on
</IfModule> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T13:29:58.930

我发现 AD7six 的评论 - 覆盖 redirect() 函数 - 在我的仅 SSL 设置中非常有用，因为我的应用程序有一些重定向到 http。

我刚刚添加了以下内容，`AppController.php`因此重定向功能*始终*使用 https：

```
function redirect($url, $status = NULL, $exit = true) {
    return parent::redirect(str_replace('http://', 'https://', Router::url($url, true)));
} 
```

# authentication - 使用页面登录并从页面导入

> ID：14304517
> 
> 赞同：-1
> 
> 时间：2013-01-13T14:38:46.590
> 
> 标签：authentication, login, import, profile, facebook-page

我目前正在开发一个应用程序，该应用程序要求人们使用他们的 facebook 个人资料登录。我的问题是：有没有办法让非个人能够登录？我的意思是群组页面、业务页面等，因为我需要导入他们的个人资料图片和姓名。也许任何其他方式/想法来导入它们。那真的对我的案子有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:55:46.980

不可以。所有 Facebook 帐户都应该属于用户。用户可以是组和业务页面的管理员，但如果不先登录到他们的用户帐户，就无法直接登录其中一个。

企业和团体有时会错误地将自己注册为用户。没有办法过滤掉这些。

也就是说，如果您从用户、组或业务页面调用`https://graph.facebook.com/ID?fields=name,picture`where is，所有这些都会返回名称和个人资料图片。`ID`

# menu - 水平菜单不显示内联

> ID：14304518
> 
> 赞同：0
> 
> 时间：2013-01-13T14:38:57.130
> 
> 标签：menu, internet-explorer-9

我的水平菜单有问题。菜单未在 IE9 中内联显示。它在 Firefox、Safari 和 Chrome 中显示良好。不幸的是，我正在使用 Mac 并且无法访问 IE 来测试它。你有什么想法为什么它不能正常工作？

这是我的CSS：

```
.navigationwide {
    background-image: url('images/site_gray_bg.png');
    border-top: 3px solid #efa320;
    -moz-box-shadow: 0px 10px 20px rgba(0,0,0,0.3);
    -webkit-box-shadow: 0px 10px 20px rgba(0,0,0,0.3);
    box-shadow: 0px 10px 20px rgba(0,0,0,0.3);
}
.navigation {
    margin: auto;
    width: 960px;
    text-align: center;
}
.menu {
    margin: 0;
    padding: 0;
}
.menu ul {
    list-style: none;
    margin: 0;
    padding: 0;
    position: relative;
}
.menu li {
    display: inline-block;
    padding: 0;
}
.menu li a {
    display: block;
    font-family: 'Medula One', cursive;
    font-size: 30px;
    color: #ffffff;
    margin: 0;
    padding: 15px 25px;
    text-align: center;
    text-decoration: none;
    text-transform: uppercase;
}
.menu li a:hover {
    color: #efa320;
}
/* ----------------- SUBMENU START ----------------- */
.menu li ul {
    background-image: url('images/site_gray_bg.png');
    display: none;
    height: auto;
    padding: 0;
    margin: 0;
    position: absolute;
    z-index: 200;
}
.menu li:hover ul {
    display: block;
}
.menu li li {
    background: none;
    display: block;
    float: none;
    margin: 0;
    padding: 0;
}
.menu li:hover li a {
    background: none;
}
.menu li ul a {
    display: block;
    font-family: 'Medula One', cursive;
    font-size: 24px;
    color: #ffffff !important;
    margin: 0;
    padding: 10px 25px;
    text-align: left;
    text-decoration: none;
    text-transform: uppercase;
    border-bottom: 1px solid rgba(255,255,255,.1);
}
.menu li ul a:hover {
    color: #ffffff;
    background-color: #efa320;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T23:35:15.633

我用谷歌搜索并发现以下链接可能有助于您的内联问题水平菜单[http://openegg.ca/creating-a-horizo​​ntal- menu/](http://openegg.ca/creating-a-horizontal-menu/)

# show-hide - 隐藏/显示多重div jquery

> ID：14304520
> 
> 赞同：0
> 
> 时间：2013-01-13T14:39:02.567
> 
> 标签：show-hide, jquery

以下[**FIDDLE**](http://jsfiddle.net/richarde/nHXEs/5/)显示了我当前的标记。

**HTML**

```
<div class="popup-inner-content main-content">          
    <div class="inner-section one">
        <!-- images -->
        <div class="media pull-left">
            <img src="#" />
        </div>

        <!-- text -->
        <div class="media-aside pull-right">
            <h4>Head</h4>
            <p>Body</p>
        </div>
    </div>

    <div class="inner-section three is-hidden">
        <!-- images -->
        <div class="media pull-left">
            <img src="#" />
        </div>

        <!-- text -->
        <div class="media-aside pull-right is-hidden">
            <h4>Head</h4>
            <p>Body</p>
        </div>
    </div>

    <div class="inner-section two is-hidden">
        <!-- images -->
        <div class="media pull-left ">
            <img src="#" />
        </div>

        <!-- text -->                       
        <div class="media-aside pull-right">
            <h4>Head</h4>
            <p>Body</p>
        </div>                          
    </div>

    <div class="thumbnail pull-left">
        <!-- thumbnail -->
        <div class="media-thumb one">
            <img src="#" alt="media-thumbnail" title="media-thumbnail" />
            <p><a href="#">Anchot text</a></p>
        </div>
    </div>

    <div class="thumbnail pull-left">   
        <!-- thumbnail -->
        <div class="media-thumb two pull-left">
            <img src="#" alt="media-thumbnail" title="media-thumbnail" />
            <p><a href="#">Anchor text</a></p>
        </div>
    </div>

    <div class="thumbnail is-hidden">
        <!-- thumbnail -->
        <div class="media-thumb three ">
            <img src="#" width="128" height="69" alt="media-thumbnail" title="media-thumbnail" />
            <p><a href="#">Anchor Text</a></p>
        </div>
    </div>

    </div>
</div> 
```

我想要做的是始终有两个缩略图 div，一次只有一个内部 div 可见，并且在单击缩略图 div 内的任何锚点时基本上能够切换内部和缩略图 div。

我如何使用 jquery 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:56:26.307

使用这个：http: [//jsfiddle.net/nHXEs/6/](http://jsfiddle.net/nHXEs/6/)

```
function displayItem(showItem) {
  $('div.thumbnail').show();
  $('div.thumbnail .' + showItem).parent().hide();

  $('div.inner-section').hide();
  $('div.inner-section').filter('.' + showItem).show();
}

$(document).ready(function() {
    displayItem('one');

    $('div.thumbnail').click(function () {
      var showItem = '';
      if ($('.media-thumb', $(this)).hasClass('one')) {
          showItem = 'one';
      } else if ($('.media-thumb', $(this)).hasClass('two')) {
          showItem = 'two';
      } else {
          showItem = 'three';
      }

      displayItem(showItem);
    });
}); 
```

希望它是您正在寻找的。但我希望如此。

这不是最好的解决方案，因为你使用类来识别你的项目，但如果你总是有 3 次重击和大元素，它就可以工作。

更好的解决方案是使用 id`s 来识别元素

```
<div class="thumbnail" id="thump_three"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:28:37.203

您还没有解释如何决定要显示哪两个缩略图的逻辑，但这是一个很好的起点，我相信您的意思是通过切换应该允许您扩展它。这将只显示每个元素之一。

这个想法是 JS 不需要知道“一”、“二”、“三”等，而只需为无限数量的选项工作。

```
<p><a href="#one">Anchor text</a></p> 
```

给锚一个你可以使用的参考，因为找到类然后计算出“一”、“二”、“三”等将是更多的工作。

您可以在几行代码中完成此操作，但我已经清楚地说明了发生了什么。

```
$('.thumbnail  a').on('click', function(e){
    e.preventDefault();

    // find the wrapper (.thumbnail) and hide it
    var $wrapper=$(this).closest('.thumbnail');
    $wrapper.hide();

    // find the next one
    var $next=$wrapper.next();
    // if this was the last one get the first instead
    if (!$next.length) $next=$wrapper.siblings().filter(':first');

    // show it
    $next.show();

    // now deal with the element that's elsewhere
    var ref=this.href.replace('#','');

    $('.inner-section.' + ref).show().siblings().hide();

}); 
```

一旦你设置了这个行为，为了节省你自己再次编写代码（或需要定义函数）只需触发最后一个元素中的锚点的点击，这样它就会显示第一个元素。

```
$('.thumbnail:last a').trigger('click'); 
```

# jquery - jQuery UI 自动完成输入值子字符串

> ID：14304521
> 
> 赞同：1
> 
> 时间：2013-01-13T14:39:05.187
> 
> 标签：jquery, jquery-ui

我正在使用 jQuery UI 自动完成。当值很长时，我想要输入框中的子字符串文本。

例如

`var availableTags = [ "value long long long long", "value" ];`

```
$( ".chooseGiftWrapper input#tags" ).autocomplete({
    source: availableTags,
    minLength: 0,
    open: function(event, ui) {
        $('.ui-menu').width(200).css({'position':'static','top': '0'});
        $('#chooseGiftWrapperHead .listFriends').show().addClass('open');
        nameFriendPosition();
         $('.listFriendsWrapper.scroll').jScrollPane({autoReinitialise: true});
    },
    select: function(event, ui) {

        $('#chooseGiftWrapperHead .chooseGiftcloseBtn').addClass('active');
        $('.dropDownBlock.listFriends').hide().removeClass('open');

    },
    focus: function(event, ui) {
        var default_value = $(this).attr('default_value');
        if ($(this).val() == default_value) {
            $(this).val('');
            $(this).removeClass('set_default');
            $('#chooseGiftWrapperHead .chooseGiftcloseBtn').removeClass('active');
        } 

    },
    change: function(event, ui) {

    }
})
.data("autocomplete")._renderItem = function (ul, item) {
    return $("<li />")
        .data("item.autocomplete", item)
        .append("<a><img src='img/testAvatar.png'><p class='nameFriend'>" + item.label + "</p></a>")                                
        .appendTo(ul);
} 
```

但是选择事件对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:43:30.143

我找到了解决问题的方法

```
select: function(event, ui) {
            name = ui.item.value;
            lengthName = name.length;
            substrName = '';
            if( lengthName > 23){
                ui.item.value = name.substr(0,23) + '...';
            } else {
                ui.item.value = name;
            }
            $(this).val(ui.item.value);

            $('#chooseGiftWrapperHead .chooseGiftcloseBtn').addClass('active');
            $('.dropDownBlock.listFriends').hide().removeClass('open');

        }, 
```

# mysql - mySQl 递归存储过程

> ID：14304526
> 
> 赞同：0
> 
> 时间：2013-01-13T14:39:38.357
> 
> 标签：mysql, stored-procedures, recursion

我在以下存储过程中使用递归

```
CREATE  PROCEDURE `SP_DeleteParentDirectory`(pParentID INT,pIsFolder INT,pReferenceID INT)
BEGIN       
    SET @IsFolder= NULL;
    SET @ChildID= NULL;
    SET @ReferenceID= NULL;
    IF ( pIsFolder= 2) THEN
                SELECT  FileID INTO @ChildID FROM filesinfo WHERE ParentID= pParentID LIMIT 1;
                WHILE (@ChildID IS NOT NULL) DO
                         SELECT  @IsFolder := filesinfo.IsFolder, @ReferenceID :=filesinfo.ReferenceID  FROM filesinfo WHERE filesinfo.FileID = @ChildID;
                        CALL SP_DeleteParentDirectory(@ChildID,@IsFolder,@ReferenceID);             
                        SELECT filesinfo.FileID INTO @ChildID FROM filesinfo WHERE ParentID= pParentID LIMIT 1;
                END While;
    END IF;
    CALL SP_DeleteFileInfo(pParentID,pReferenceID);     
END;; 
```

但是当我尝试执行它时，我遇到递归最大限制错误，这迫使我添加以下语句：

```
SET @@SESSION.max_sp_recursion_depth = 100; 
```

我可以在不添加此语句的情况下解决问题吗

# java - Java (JNA) - 在 DLL (C++) 库中找不到函数

> ID：14304530
> 
> 赞同：3
> 
> 时间：2013-01-13T14:40:09.133
> 
> 标签：java, dll, jna

我是 Java 新手，在 google 和 stackoverflow 中搜索了这个问题，找到了一些帖子，但我仍然无法理解。

我想使用来自 Java 的 DLL 库 (C++) 方法。我为此目的使用 JNA。JNA 找到了我的库，但找不到我的方法： `Exception in thread "main" java.lang.UnsatisfiedLinkError: Error looking up function 'LoadCurrentData': The specified procedure could not be found.`

我的代码：

```
package javaapplication1;

import com.sun.jna.Library;
import com.sun.jna.Native;
import com.sun.jna.Platform;
import com.sun.jna.Pointer;

public class JavaApplication1 {

    public interface LibPro extends Library {
        LibPro INSTANCE = (LibPro) Native.loadLibrary(
            (Platform.isWindows() ? "LibPro" : "LibProLinuxPort"), LibPro.class);

        public  short LoadCurrentData();
    }

    public static void main(String[] args) {
      LibPro sdll = LibPro.INSTANCE;
      sdll.LoadCurrentData();  // call of void function
    }
 } 
```

我用 Depency Walker Tool 查看了我的 DLL，发现我的函数名有前缀和后缀 - 它看起来像`_LoadCurrentData@0`

感谢您的回复！

PS 我找到了很好的例子[http://tutortutor.ca/cgi-bin/makepage.cgi?/articles/rjna](http://tutortutor.ca/cgi-bin/makepage.cgi?/articles/rjna)（清单 6）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T15:10:03.573

我会说您需要应用正确的名称映射器，因为您注意到函数名称被破坏了，您需要注册`CallMapper`它将实现与编译器相同的修改。

这是[来自 JNA 主页](https://github.com/twall/jna/blob/master/www/FrequentlyAskedQuestions.md#my-library-mapping-causes-an-unsatisfiedlinkerror)的相关条目：

> 使用转储实用程序检查导出函数的名称以确保它们匹配（Linux 上的 nm，取决于 Windows）。在 Windows 上，如果函数具有“@NN”形式的后缀，则需要在初始化库接口时将 StdCallFunctionMapper 作为选项传递。通常，您可以使用函数映射器 (FunctionMapper) 来更改查找方法的名称，或者使用调用映射器 (InvocationMapper) 来更广泛地控制方法调用。

这是一个可能相关的问题：[renameing DLL functions in JNA using StdCallFunctionMapper](https://stackoverflow.com/questions/518131/renaming-dll-functions-in-jna-using-stdcallfunctionmapper)

# xml - XSL If 函数

> ID：14304531
> 
> 赞同：0
> 
> 时间：2013-01-13T14:40:09.763
> 
> 标签：xml, xslt, if-statement

我有以下 XML 文档和 XSL 样式表，我的任务是将 XSL 中的 CSS 应用到样式表，并在测试结果为 FAIL 时应用它。我似乎不知道该怎么做，我尝试了 xsl:if 但似乎无法改变它。有任何想法吗？

这是代码：

XML 文件：

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="results.xsl"?>
<request xmlns:xsi="httyp://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="results.xsd">
<authentication password="turkey" partnerid="exam" />

<method name="ListUserTestResults">
    <parameters>
        <user_id>42511</user_id>
        <transcript>4234232</transcript>
        <test_id>231</test_id>
        <test_name>ASP 3.0 Test</test_name>
        <percentage>75</percentage>
        <test_result>PASS</test_result>
        <time>2006-04-19T14:05:11Z</time>
    </parameters>

    <parameters>
        <user_id>42511</user_id>
        <transcript>2356545</transcript>
        <test_id>12</test_id>
        <test_name>PHP 5.0 Test</test_name>
        <percentage>35</percentage>
        <test_result>FAIL</test_result>
        <time>2006-05-17T10:19:45Z</time>
    </parameters>
    </method>
 </request> 
```

XSL 样式表：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="html" version="4.0.1"/>

<xsl:template match="/">

<style type="text/css">
    .FAIL {color:red;}
</style>

<h1>Results from tests:</h1>

<xsl:for-each select="request/method/parameters">
    <h2>
        <xsl:number count="parameters" />
        User <xsl:value-of select="user_id"/>
    </h2>

    <h3>
        <xsl:value-of select="test_name"/>
        (<xsl:value-of select="test_id"/>)
    </h3>

    <dl>
        <dt>Transcript</dt>
        <dd><xsl:value-of select="transcript"/></dd>
        <dt>Percentage</dt>
        <dd><xsl:value-of select="percentage"/>
        <xsl:if
        (<xsl:value-of select="test_result"/>)
        </dd>
        <dt>Date/Time of test</dt>
        <dd><xsl:value-of select="time"/></dd>
    </dl>
        </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

在浏览器中读取时，test_result 元素需要从黑色文本更改为 CSS 定义的红色。我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:30:16.773

**这是一个完整的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
    <style type="text/css">
        .FAIL {color:red;}
    </style>
    <h1>Results from tests:</h1>

    <xsl:apply-templates/>
 </xsl:template>

 <xsl:template match="parameters">
    <h2>
        <xsl:number count="parameters" />
        User <xsl:value-of select="user_id"/>
    </h2>

    <h3>
        <xsl:value-of select="test_name"/>
        (<xsl:value-of select="test_id"/>)
    </h3>

    <dl>
        <dt>Transcript</dt>
        <dd><xsl:value-of select="transcript"/></dd>
        <dt>Percentage</dt>
        <dd>
          <xsl:value-of select="percentage"/>
        </dd>
        <dt>Result</dt>
          <dd>
              <xsl:if test="test_result = 'FAIL'">
               <xsl:attribute name="class">FAIL</xsl:attribute>
              </xsl:if>
              (<xsl:value-of select="test_result"/>)
          </dd>
        <dt>Date/Time of test</dt>
        <dd><xsl:value-of select="time"/></dd>
    </dl>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<request xmlns:xsi="httyp://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="results.xsd">
<authentication password="turkey" partnerid="exam" />

<method name="ListUserTestResults">
    <parameters>
        <user_id>42511</user_id>
        <transcript>4234232</transcript>
        <test_id>231</test_id>
        <test_name>ASP 3.0 Test</test_name>
        <percentage>75</percentage>
        <test_result>PASS</test_result>
        <time>2006-04-19T14:05:11Z</time>
    </parameters>

    <parameters>
        <user_id>42511</user_id>
        <transcript>2356545</transcript>
        <test_id>12</test_id>
        <test_name>PHP 5.0 Test</test_name>
        <percentage>35</percentage>
        <test_result>FAIL</test_result>
        <time>2006-05-17T10:19:45Z</time>
    </parameters>
    </method>
 </request> 
```

**产生了想要的正确结果：**

```
<style type="text/css">
        .FAIL {color:red;}
    </style>
<h1>Results from tests:</h1>
<h2>1
        User 42511</h2>
<h3>ASP 3.0 Test
        (231)
    </h3>
<dl>
   <dt>Transcript</dt>
   <dd>4234232</dd>
   <dt>Percentage</dt>
   <dd>75</dd>
   <dt>Result</dt>
   <dd>
              (PASS)
          </dd>
   <dt>Date/Time of test</dt>
   <dd>2006-04-19T14:05:11Z</dd>
</dl>
<h2>2
        User 42511</h2>
<h3>PHP 5.0 Test
        (12)
    </h3>
<dl>
   <dt>Transcript</dt>
   <dd>2356545</dd>
   <dt>Percentage</dt>
   <dd>35</dd>
   <dt>Result</dt>
   <dd class="FAIL">
              (FAIL)
          </dd>
   <dt>Date/Time of test</dt>
   <dd>2006-05-17T10:19:45Z</dd>
</dl> 
```

**说明**：

正确使用**[`xsl:if`](http://www.w3.org/TR/xslt#section-Conditional-Processing-with-xsl%3aif)**和**[`xsl:attribute`](http://www.w3.org/TR/xslt#creating-attributes)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:55:27.370

您需要`<xsl:when>`在这里进行条件检查

```
 <dl>
        <dt>Transcript</dt>
        <dd><xsl:value-of select="transcript"/></dd>
        <dt>Percentage</dt>
        <dd><xsl:value-of select="percentage"/>
          <xsl:choose>
              <xsl:when test="test_result = 'PASS'">
                    <dd><xsl:value-of select="test_result"/></dd>
              </xsl:when>
              <xsl:otherwise>
                <dd style="color: red"><xsl:value-of select="test_result"/></dd>
              </xsl:otherwise>
          </xsl:choose>
        </dd>
        <dt>Date/Time of test</dt>
        <dd><xsl:value-of select="time"/></dd>
    </dl> 
```

# c++ - 在资源 DLL 之间切换

> ID：14304533
> 
> 赞同：0
> 
> 时间：2013-01-13T14:40:21.743
> 
> 标签：c++, visual-c++, mfc

我正在研究由许多项目组成的 MFC 解决方案。我的一个项目“App.exe”依赖于其他项目输出 dll “SC.dll”。

我通过 App 项目下的 Add Reference 选项添加了对另一个项目的引用。

我想通过使用资源 dll 在语言之间“基于选项”切换。我有另一个资源项目，它产生阿拉伯语资源“SC_AR.dll”。

我尝试根据选项使用 LoadLibrary，但失败了。

1.  “添加参考”的方法是错误的吗？
2.  如果没有，我如何在 Dll 之间切换？
3.  如果是，那么正确的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:26:06.840

无需参考[资源卫星](http://msdn.microsoft.com/en-us/library/8fkteez0.aspx)。MFC 使用用户的 Windows UI 语言和应用程序的文件名搜索附属 DLL。要切换到另一个卫星，请调用 LoadLibrary()，然后调用 AfxSetResourceHandle()。

当然，这是假设您通过 MFC 加载所有资源（例如，使用 CString::LoadString 而不是 LoadResource ）。如果直接调用 API，则必须显式使用自己的附属 DLL 句柄。

PS[关于 SetThreadLocale](http://www.siao2.com/2005/08/22/454360.aspx)的说法越少越好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:49:08.257

如果您使用的是 MFC，则资源 dll 将加载到主文件中生成的样板文件中。（不能随便记住它）但搜索 LoadResource()。您必须调用 LoadLibrary 才能让 hmodule 传递给它。

请注意，如果您要显示来自多个 dll 的资源，则必须小心不同资源 dll 中的对话框。如果您只是交换 dll，则不会有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:54:59.723

由于 MFC 不支持阿拉伯语，我在 dll 中制作了一个英文对话框和一个阿拉伯语对话框。并根据 Language 属性将资源 ID 发送给 Dialog 的构造函数。对于任何字符串，我使用 LoadString

# php - 将图片上传到页面相册正在工作，但在墙上张贴图片却不行

> ID：14304534
> 
> 赞同：2
> 
> 时间：2013-01-13T14:40:27.267
> 
> 标签：php, facebook, facebook-graph-api

**出现 OAuthException时出错**：(#100) 图片 URL 格式不正确

我有一个非常奇怪的问题，我可以使用graph api在我的页面相册上上传图片，但是当我尝试使用graph api发布图片时，它不起作用，

**请注意**，当我发布消息或墙上的链接时，它会被发布，问题仅出在图片上。

在这里，我放了两个代码片段：

1，这是我尝试将图片上传到页面相册（工作）时：

```
$facebook->setFileUploadSupport("http://apps.facebook.com/pagecron");
$x=realpath($_FILES['source']['tmp_name']);
$parameters = array('message' => $_POST['message'],'source' =>'@' . $x );
$parameters['access_token'] = $_SESSION['active']['access_token'];
$check=$facebook->api('/'.$_SESSION['active']['id'].'/photos/','POST',$parameters); 
```

2，这是当我试图将图片贴到墙上时（不工作）：

```
$img = realpath($y);
$facebook->setFileUploadSupport("http://apps.facebook.com/pagecron");
$x=realpath($_FILES['source']['tmp_name']);
$parameters = array('message' => $_POST['message'],'picture' =>'@' . $x );
$parameters['access_token'] = $_SESSION['active']['access_token'];
$check=$facebook->api('/'.$_SESSION['active']['id'].'/feed/','POST',$parameters); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:50:18.647

**Ist 事情**：您需要 POST 到`/TIMELINE_PHOTOS_ALBUM_ID/photos`.

**第二件事**：可能没有这样名字的专辑，所以你应该创建它（检查后）。

**如何**：

```
 $albums =$facebook->api('pageid/albums',GET,array('access_token'=>'access_token');      
 foreach($albums['data'] as $album)
 {
   if($album['name'] == 'TIMELINE_PHOTOS')
   {
      $uid = $album['id'];
   }
 }
if(isset($uid) && $uid !=0)
{
  //mean album is there so use that uid to post your photo
}
else 
{
    //create your album with that name and use its id
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:42:54.160

看来，如果您想将照片发布到用户的墙上，您`POST`需要`/TIMELINE_PHOTOS_ALBUM_ID/photos`.

这里似乎没有捷径可以解决这个问题。您需要搜索结果`/USER_ID/albums`以找到`album_id`名为“Timeline Photos”的相册（或使用 FQL 获取）。

[文档](https://developers.facebook.com/docs/reference/api/photo/)说相册限制为 200 张照片。我不确定如果用户的“时间线照片”相册中有超过 200 张照片会发生什么。我找不到朋友来检查这个。

# php - 在 foreach 循环中显示带有数据库值的表

> ID：14304535
> 
> 赞同：1
> 
> 时间：2013-01-13T14:40:41.707
> 
> 标签：php, html, mysql

我正在尝试在一段时间循环中显示一个表格。但我已经卡在那里 2 天了。任何人都可以帮我做到这一点？

现在我将实际解释我在这里要做什么。我的数据库中有几个类别和几个主题。每个类别都有自己的主题。现在我需要将类别及其主题显示为列表。当显示特定类别下的主题时，我需要添加一个包含 2 列的 HTML 表格来显示主题..

这是我到目前为止所做的代码..

```
 $categoryIds = implode(',', $_SESSION['category']);

    $q = "SELECT  c. category_id AS ci, c.category_name AS cn, s.subject_name AS sn, s.subject_id AS si
            FROM    category AS c 
            INNER JOIN category_subjects AS cs ON cs.category_id = c.category_id
            INNER JOIN subjects AS s ON s.subject_id = cs.subject_id
          WHERE   c.category_id IN ($categoryIds)";

    $r = mysqli_query( $dbc, $q) ;

    $catID = false;
    $max_columns = 2;

    while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC))
    {
        $categoryId = $row['ci'];
        $category = $row['cn'];
        $subjects = $row['sn'];

        echo '<div>';

        //Detect change in category
        if($catID != $categoryId) 
        {

            echo "<h3>Category 01: <span>{$category}</span><span></span></h3>\n";

            foreach ( $subjects AS $sub ) {

                echo "<div class='container'>\n";
                //echo "<table><tr>\n"; 

                //echo $sub;

                echo "</div> <!-- End .container DIV -->\n";

            }           
            echo '</div>';          
        }               
        $catID = $categoryId;       
        echo '</div>';
   } 
```

在这里，类别名称在标签下正确显示。但问题是当要显示属于类别的主题时。我正在尝试在 .container Div 中显示主题表。

请问有没有人可以帮助我解决这个问题......？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:18:04.007

尝试

```
...
//Detect change in category
if($catID != $categoryId) 
{
    echo "<h3>Category 01: <span>{$category}</span><span></span></h3>";
    echo "<div class='container'>";
    echo "<table>"; 

    if (is_array($subjects))
    {
        foreach ($subjects as $sub) {
            echo "<tr>";
            echo "<td>";
            echo $sub;
            echo "</td>";
            echo "</tr>";
        }
    }
    else
    {
        echo "<tr><td>No subjects to display...<td/><tr/>";
    }
    echo "</table>"; 
    echo "</div> <!-- End .container DIV -->";
}
... 
```

* * *

# 更新

考虑更改您用于从数据库中检索数据的方法。试试这个代码（代码未经测试，使用记事本输入）所以你可能需要修复一下......）

```
$categoryIds = implode(',', $_SESSION['category']);

$q = "SELECT  c. category_id AS ci, c.category_name AS cn
      FROM    category AS c 
      WHERE   c.category_id IN ($categoryIds)";

$r = mysqli_query( $dbc, $q) ;

$catID = false;
$max_columns = 2;

while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC))
{
    $categoryId = $row['ci'];
    $category = $row['cn'];

    echo '<div>';

    echo "<h3>Category 01: <span>{$category}</span><span></span></h3>\n";

    $qs = "SELECT  s.subject_name AS sn, s.subject_id AS si
              FROM    category_subjects cs
              INNER JOIN subjects AS s ON s.subject_id = cs.subject_id
              WHERE cs.category_id = \'' . $categoryId . '\'";

     $rs = mysqli_query( $dbc, $qs) ;

     echo "<h3>Category 01: <span>{$category}</span><span></span></h3>";
     echo "<div class='container'>";
     echo "<table>"; 

     while ($rows = mysqli_fetch_array($rs, MYSQLI_ASSOC))
     {
         $sub = $rows['sn'];

         echo "<tr>";
         echo "<td>";
         echo $sub;
         echo "</td>";
         echo "</tr>";
     }

     echo "</table>"; 
     echo "</div> <!-- End .container DIV -->";

     echo '</div>';          

} 
```

在此我们首先获取类别，进入循环打印第一个类别名称，在循环中我们为当前类别获取适当的主题，然后打印下一个，依此类推......

# xml - LL(1) 类 XML 语言的语法

> ID：14304536
> 
> 赞同：1
> 
> 时间：2013-01-13T14:40:43.100
> 
> 标签：xml, parsing

考虑 XML 子集的 LL(1) 语法，假设它是没有属性的 XML。我想出了这样的事情：

```
S -> BLOCK
BLOCK -> PART1 PART2
PART1 -> <NAME
PART2 -> >BODY</NAME> | />
BODY -> BLOCK BODY | EPS 
```

其中非终结符 NAME 是一个非空的字符字符串。这里的问题是语法不是 LL(1)，因为在非终结符 PART2 的第一个产生式中存在歧义：解析“>”字符后，您无法确定“<”字符是否源自 PART2 本身（这意味着 BODY是空字符串 EPS）或来自非终结符 PART1（因此 BODY 是 BLOCKBODY 并且 '<' 是从新块获得的）。语法的其余部分没问题，显然，如果我可以使用不同的字符来表示用于打开新标签或关闭现有标签的“<”，那就可以了。坏消息是我做不到。我的问题是：我正在寻找的 LL(1) 语法是否真的存在？如果是这样，关于我需要进行哪些更改的任何想法？非常感谢。

# c# - 如何配置本地缓存进行测试

> ID：14304537
> 
> 赞同：0
> 
> 时间：2013-01-13T14:40:43.880
> 
> 标签：c#, caching, azure, azure-worker-roles, shared-cache

我正在使用 Azure 共享缓存。在开发过程中，我需要编写大量数据，这需要时间。

**是否可以将工作角色配置为写入本地缓存？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:14:01.857

您是否考虑过新的角色内缓存？您可以指定现有角色的一部分 RAM 用于缓存，也可以创建专用缓存角色。无论哪种方式，它都将在您的部署中运行。假设您将缓存与您的网络角色共存，那么您将有效地拥有一个本地缓存。

[在这里](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)查看.net 教程。请注意，此缓存也可以与任何其他语言一起使用；这只是显示与 Visual Studio 的集成（它在 Eclipse 中的工作方式相同）。

# cakephp - CakePHP 和 Twitter Bootstrap：按钮中的 CSS 图标

> ID：14304538
> 
> 赞同：-1
> 
> 时间：2013-01-13T14:40:49.980
> 
> 标签：cakephp, twitter-bootstrap

我想在这个特定的按钮中插入一个 Twitter Bootstrap 的图标。

前面提到的添加方法`'escape' => false`（这里：[CakePHP & Twitter Bootstrap CSS button icons](https://stackoverflow.com/questions/13004567/cakephp-twitter-bootstrap-css-button-icons)）对我不起作用。

我用一个简单的 html-bootstrap-code 成功地测试了它——但是用 cakePHP 特定的代码它不起作用。

```
echo $this->Form->postLink(__('set User'), 
array('controller' => 'institutions', 'action' => 'setAssignee', $user['User']    ['institution_id'], $user['User']['id']), 
array('class' => 'btn btn-warning icon-plus'), 
__('Are you sure?', $user['User']['last_name'], $institution['Institution']['name'])); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:58:14.013

不起作用，`icon-plus`该类将被应用于`btn`.

为了让它工作，使用`<i>`这样的：

```
echo $this->Form->postLink('<i class="icon-plus"></i> ' . __('set User'), 
array('controller' => 'institutions', 'action' => 'setAssignee', $user['User']    ['institution_id'], $user['User']['id']), 
array('class' => 'btn btn-warning', 'escape'=>false), 
__('Are you sure?', $user['User']['last_name'], $institution['Institution']['name'])); 
```

# ruby - Jekyll 不显示任何内容

> ID：14304547
> 
> 赞同：6
> 
> 时间：2013-01-13T14:41:34.127
> 
> 标签：ruby, jekyll

我正在使用 Jekyll 开发一个博客。当我使用命令运行服务器时`jekyll`，内容不会生成。

在终端中显示的内容下方：

`WARN Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true`

## 索引.html

我使用了默认的 Jekyll 样板。

```
layout: default

{% for post in paginator.posts %}
<article>

  <header class="entry-header">
    <h2 class="entry-title"><a href="{{ post.url }}" title="{{ post.title }}" rel="bookmark">{{ post.title }}</a></h2>
  </header>

  <aside class="entry-details">
    <p class="entry-date">Publicado em: <a href="{{ post.url }}">{{ post.date | date: "%d/%m/%y" }}</a></p>
  </aside>

  <div class="entry-content">
      {{ post.content }}
  </div>

</article>
{% endfor %} 
```

## post.html

标准也。

```
layout: default

<article>

  <header class="entry-header">
    <h2 class="entry-title"><a href="{{ page.url }}" title="{{ page.title }}" rel="bookmark">{{ page.title }}</a></h2>
  </header>

  <aside class="entry-details">
    <a href="{{ page.url }}" class="entry-date">{{ page.date | date: "%d/%m/%y" }}</a>
  </aside>

  <div class="entry-content clearfix">
    {{ post.content }}
  </div>

  <footer class="entry-meta">
    {% include disqus.html %}
  </footer>

</article> 
```

default.html 标准也是。

```
<!doctype html>
<html lang="pt-BR">
<head>
  {% include head.html %}
</head>

<body class="home blog">

  {% include header.html %}

  <div id="content">
    {{ content }}
  </div><!-- end #content -->

  {% include footer.html %}

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T07:49:27.953

我使用这三个文件创建了一个[示例要点。](https://gist.github.com/nicolasmccurdy/1a5f6fd7a92ba5239bb3)我`jekyll serve`使用 Jekyll 2.1.1 运行（`jekyll --server`已弃用并替换为此命令），我没有收到任何错误（尽管 Jekyll 确实因为 yaml 前端问题而忽略了流动语法）。

我感觉这个问题与[WEBrick](https://stackoverflow.com/questions/9612618/warn-could-not-determine-content-length-of-response-body-set-content-length-of)（Jekyll 的默认服务器）中的一个错误有关。

我知道它`---`周围缺少 YAML 前端问题并且我没有`_posts`目录，尽管我假设这个问题无关紧要。

# java - 如何（无需每次都重新连接和关闭套接字）从 Android 或 java 中的套接字接收许多文件

> ID：14304551
> 
> 赞同：1
> 
> 时间：2013-01-13T14:41:58.680
> 
> 标签：java, sockets

目前，我的服务器程序能够从客户端套接字接收文件，并能够将接收到的文件保存在服务器机器中。但是我需要从客户端套接字到服务器套接字接收许多文件，而无需每次都关闭和打开套接字连接。

我已经编写了代码，这工作正常。但是在这个我在每次迭代中关闭和打开服务器和客户端套接字连接。但是我需要这样做而不是每次都连接和断开两个套接字。

请各位前辈指点...

* * *

我的服务器代码：

```
 int img_count=1;
        int bytesRead;
        int current = 0;
        byte [] mybytearray  = new byte [100000];

        InputStream is = null;
        FileOutputStream fos = null;
        BufferedOutputStream bos = null;
        Socket sock=null;

        // create socket
        ServerSocket servsock = new ServerSocket(6668);
        System.out.println("Waiting... for client req");
        int i=0;

         for ( i=0; i<9; i++)
          {

              sock = servsock.accept();        // Waiting for Client

              String fname = "Image000"+(img_count++)+".JPG";
              String fpath = "C:/RX_images/"+fname;      // Image saving path
              File myFile = new File (fpath);

              is = sock.getInputStream(); 
              fos = new FileOutputStream(myFile);
              bos = new BufferedOutputStream(fos);
              bytesRead = is.read(mybytearray,0,mybytearray.length);
              current = bytesRead;

           do {
              bytesRead =
              is.read(mybytearray, current, (mybytearray.length-current));
              if(bytesRead >= 0) current += bytesRead;
            } while(bytesRead > -1);

              bos.write(mybytearray, 0 , current);

              bos.flush();
              fos.flush();
              fos.close();
              bos.close();
              is.close();
              sock.close();

          }  // End of for loop

          servsock.close();
          System.out.println("Received : "+ (i++)+ " Images"); 
```

* * *

我的客户代码：

```
 int i=0;  
        int img_count=1;
        FileInputStream fis=null;
        BufferedInputStream bis=null;
        OutputStream os=null;
        Socket client=null;

        System.out.println("Sending...");

      for ( i=0; i<9; i++)
      {
          client = new Socket("192.168.1.54",6668);    

          String fname = "Image000"+(img_count++)+".JPG";
          String fpath = "C:/Tx_Images/"+fname;          // Image path
          File myFile = new File (fpath);

          byte [] mybytearray  = new byte [(int)myFile.length()];

          fis = new FileInputStream(myFile);
          bis = new BufferedInputStream(fis);        
          bis.read(mybytearray,0,mybytearray.length);
          os = client.getOutputStream();        
          os.write(mybytearray,0,mybytearray.length);

          bis.close();
          fis.close();
          os.flush();
          os.close();
          client.close();
          Thread.sleep(2000); 

      }   // End of for loop

      System.out.println("\n Sent : "+(i++)+" Images"); 
```

* * *

我对java很陌生，请帮助我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:12:02.553

由于套接字只是一个字节流，为了处理多个文件，您将不得不构建某种简单的协议。换句话说，发送者必须发送区分一个文件中的字节和另一个文件中的字节的字节。由于您正在发送二进制数据，因此您无法发送一系列字节来“标记”开始和/或/结束 - 例如，如果您在末尾发送 4 个零字节，那可能是数据，因此接收器不能确定它是标记还是数据。临时想到了两种处理它的方法——将文件分成最多 N 个字节的部分，然后一次发送一个部分。您必须计算每个部分中的字节数，因为至少一个部分的字节数不会与所有其他部分相同。交替，y 您可以计算文件中的字节数并从给出该计数的字节开始，因此接收者知道预期有多少字节。在提供计数时，如果需要，您还可以提供文件名称和类型等信息。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:03:22.990

这个问题实际上取决于您是否需要客户端保持连接打开。通常你只需要保持服务器端的监听，客户端每次需要发送文件时重新连接就可以了。

使用 an`ExecutorService`来保持服务器端运行并使用单独的线程处理多个连接。然后让客户端连接并发送它需要发送和断开连接的内容。请参阅此问题以获取快速示例：[多线程套接字通信客户端/服务器](https://stackoverflow.com/questions/12588476/multithreading-socket-communication-client-server)

另外，看看他们如何关闭资源（最终）并在该示例中停止服务器。这与您的问题无关，但您也希望使您的 I/O 和错误处理更加健壮。

如果您确实需要服务器和客户端保持连接并发送多个文件（或任何数据），那么您需要像 rcook 笔记那样实现某种协议，并且您需要更深入地了解网络并拥有一个心跳之类的。而且，即使你这样做了，客户端仍然需要足够聪明，以便在套接字关闭等情况下尝试重新连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:38:19.930

只需制作简单的协议，例如：

```
 File Name\r\n
 File Size\r\n
 File Data\r\n
 File Name\r\n
 File Size\r\n
 File Data\r\n
 .... 
```

我希望你会明白这一点。您可以先发送文件信息，然后服务器将解析此文件信息，并使您的服务器读取您在文件信息中指定的字节数。这些将使您能够查看文件结束标记以及何时开始新文件。但是您必须事先知道文件大小。

这不适用于长度未知的数据流。

让您的服务器读取您将指定的字节数，以便服务器可以知道何时结束文件写入并开始新文件，或者在套接字关闭之前文件是否已完全接收......

# c# - 如何使用 WaitHandle 等待异步调用完成？

> ID：14304554
> 
> 赞同：1
> 
> 时间：2013-01-13T14:42:13.253
> 
> 标签：c#, asynchronous, begininvoke, waithandle, waitone

考虑这段代码：

```
class Program
        {
            static void Main(string[] args)
            {
                Master master = new Master();
                master.Execute();
            }
        }

    class TestClass
    {
        public void Method(string s)
        {
            Console.WriteLine(s);
            Thread.Sleep(5000);
            Console.WriteLine("End Method()");
        }
    }
    class Master
    {
        private readonly TestClass test = new TestClass();

        public void Execute()
        {
            Console.WriteLine("Start main thread..");
            Action<String> act = test.Method;
            IAsyncResult res = act.BeginInvoke("Start Method()..", x =>
            {
                Console.WriteLine("Start Callback..");
                act.EndInvoke(x);
                Console.WriteLine("End Callback");
            }, null);
            Console.WriteLine("End main thread");
            Console.ReadLine();
        }
    } 
```

我们有结果：

```
Start main thread..
End main thread
Start Method()..
End Method()
Start Callback..
End Callback 
```

所以，我想要结果：

```
Start main thread..    
Start Method()..
End Method()
Start Callback..
End Callback
End main thread 
```

我怎么能`async`在这段代码中等待？我查看了 MSDN 文章[“异步调用同步方法”](http://msdn.microsoft.com/en-us/library/2e08f6yc.aspx)，发现：

调用后，`BeginInvoke`您可以执行以下操作：

*   做一些工作，然后调用`EndInvoke`阻塞直到调用完成。
*   `WaitHandle`使用该`IAsyncResultAsyncWaitHandle`
    属性获取 a ，使用其`WaitOne`方法阻止执行，直到
    `WaitHandle`发出信号，然后调用`EndInvoke`.
*   轮询 `IAsyncResult`返回的 by`BeginInvoke`以确定异步调用何时完成，然后调用`EndInvoke`.
*   将回调方法的委托传递给`BeginInvoke`. 当异步调用完成时，该方法在`ThreadPool`线程上执行。回调方法调用`EndInvoke`.

我认为这一秒对我来说更好。但是如何实现呢？特别是我对重载感兴趣`WaitOne()`（[阻塞当前线程，直到当前 WaitHandle 收到信号](http://msdn.microsoft.com/en-gb/library/system.threading.waithandle.waitone.aspx)）。如何正确地做到这一点？我的意思是这种情况下的常见模式。

**更新：**

现在我使用`Task<T>`：

```
 class Program
    {
        static void Main(string[] args)
        {
            Master master = new Master();
            master.Execute();
        }
    }

    class WebService
    {
        public int GetResponse(int i)
        {
            Random rand = new Random();
            i = i + rand.Next();
            Console.WriteLine("Start GetResponse()");
            Thread.Sleep(3000);
            Console.WriteLine("End GetResponse()");
            return i;
        }

        public void SomeMethod(List<int> list)
        {
            //Some work with list        
            Console.WriteLine("List.Count = {0}", list.Count);
        }
    }
    class Master
    {
        private readonly WebService webService = new WebService();

        public void Execute()
        {
            Console.WriteLine("Start main thread..");
            List<int> listResponse = new List<int>();
            for (int i = 0; i < 5; i++)
            {
                var task = Task<int>.Factory.StartNew(() => webService.GetResponse(1))
                    .ContinueWith(x =>
                    {
                        Console.WriteLine("Start Callback..");
                        listResponse.Add(x.Result);
                        Console.WriteLine("End Callback");
                    });
            }
            webService.SomeMethod(listResponse);
            Console.WriteLine("End main thread..");
            Console.ReadLine();
        }
    } 
```

`SomeMethod()`这是空的主要问题`list`。

结果： ![在此处输入图像描述](../Images/f043d72a72803acf0615e3f3ec210608.png)

现在我有可怕的解决方案:(

```
 public void Execute()
        {
            Console.WriteLine("Start main thread..");
            List<int> listResponse = new List<int>();
            int count = 0;
            for (int i = 0; i < 5; i++)
            {
                var task = Task<int>.Factory.StartNew(() => webService.GetResponse(1))
                    .ContinueWith(x =>
                    {
                        Console.WriteLine("Start Callback..");
                        listResponse.Add(x.Result);
                        Console.WriteLine("End Callback");
                        count++;
                        if (count == 5)
                        {
                            webService.SomeMethod(listResponse);
                        }
                    });

            }
            Console.WriteLine("End main thread..");
            Console.ReadLine();
        } 
```

结果：

![在此处输入图像描述](../Images/6fa1dc5773e7e5c201ef2c0ebaccbe99.png)

这就是我需要等待异步调用的原因。我如何`Wait`在`Task`这里使用？

**更新 2：**

```
class Master
{
    private readonly WebService webService = new WebService();
    public delegate int GetResponseDelegate(int i);

    public void Execute()
    {
        Console.WriteLine("Start main thread..");
        GetResponseDelegate act = webService.GetResponse;
        List<int> listRequests = new List<int>();
        for (int i = 0; i < 5; i++)
        {
            act.BeginInvoke(1, (result =>
            {                    
                int req = act.EndInvoke(result);
                listRequests.Add(req);
            }), null);  
        }

        webService.SomeMethod(listRequests);
        Console.WriteLine("End main thread..");
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:53:52.050

从您的示例代码中不清楚为什么需要异步调用。如果你不这样做，你可以只`test.Method();`同步调用。

假设您需要异步执行，请不要为过时的`Delegate.BeginInvoke`东西烦恼。使用`Task`基于新的 API：

```
var task = Task.Factory.StartNew(() => test.Method()); 
```

然后，您可以`Wait`在任务上或`await`它或使用`Task.ContinueWith`（为您的情况选择适当的技术）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:05:10.087

我认为这就是你想要的。我们正在启动任务，然后等待它们完成，所有完成后，我们正在获得结果。

```
class Program
{
    static void Main(string[] args)
    {
        Master master = new Master();
        master.Execute();
    }
}

class WebService
{
    public int GetResponse(int i)
    {
        Random rand = new Random();
        i = i + rand.Next();
        Console.WriteLine("Start GetResponse()");
        Thread.Sleep(3000);
        Console.WriteLine("End GetResponse()");
        return i;
    }

    public void SomeMethod(List<int> list)
    {
        //Some work with list        
        Console.WriteLine("List.Count = {0}", list.Count);
    }
}
class Master
{
    private readonly WebService webService = new WebService();
    public void Execute()
    {
        Console.WriteLine("Start main thread..");
        var taskList = new List<Task<int>>();
        for (int i = 0; i < 5; i++)
        {
            Task<int> task = Task.Factory.StartNew(() => webService.GetResponse(1));
            taskList.Add(task);
        }

        Task<List<int>> continueWhenAll =
            Task.Factory.ContinueWhenAll(taskList.ToArray(),
                            tasks => tasks.Select(task => task.Result).ToList());

        webService.SomeMethod(continueWhenAll.Result);
        Console.WriteLine("End main thread..");
        Console.ReadLine();
    }

} 
```

**BeginIvoke/EndInvoke 的丑陋解决方案**

```
public void Execute()
{
    Func<int, int> func = webService.GetResponce;

    var countdownEvent = new CountdownEvent(5);
    var res = new List<int>();
    for (int i = 0; i < 5; ++i)
    {
        func.BeginInvoke(1, ar =>
                        {
                            var asyncDelegate = (Func<int, int>)((AsyncResult)ar).AsyncDelegate;
                            int ii = asyncDelegate.EndInvoke(ar);
                            res.Add(ii);
                            ((CountdownEvent)((AsyncResult)ar).AsyncState).Signal();
                        }, countdownEvent);
    }
    countdownEvent.Wait();
    Console.WriteLine(res.Count);
} 
```

# clojure - clojure 中的 (defn function-name) 和 (defn- function-name) 有什么区别？

> ID：14304557
> 
> 赞同：2
> 
> 时间：2013-01-13T14:44:13.293
> 
> 标签：clojure

谁可以给我解释一下这个？我想我理解 (defn -main) 声明了一个 Java 可以识别的 main 方法，如果你将它与带有 (:gen-class) 的命名空间一起使用，你可以欺骗 Java 认为 clojure 是面向对象的，但是如果您只是创建一个类似的函数，我无法弄清楚目的是什么

(def- add2 (partial + 2) )

或 (defn-my-function...)

如果上述假设错误，任何人都可以简单地解释或纠正我吗？

**编辑 - 我了解部分函数的作用:) 我只是想知道上面和 (def add2 (partial + 2)) 之间是否有区别

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T14:45:48.640

定义的函数`defn-`不能在定义它们的命名空间之外访问。换句话说，它们是*私有*的。

看一下[defn- 的来源](http://www.clodoc.org/doc/clojure.core/defn-)。此宏计算为对`defn`与`{:private true}`合并到元数据散列中的调用。

# c++ - 在 C++ 控制台中更改特定字符的颜色

> ID：14304559
> 
> 赞同：0
> 
> 时间：2013-01-13T14:44:18.060
> 
> 标签：c++, colors

我正在为我的 c++ 课程制作一个日历程序，我只是想知道是否有办法改变程序中某些日子的颜色（例如，圣诞节、新年、周末，都是不同的颜色），如果它是不可能，我至少可以大胆一些……

这是我的代码

```
char *month_name[12] = {"January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"};
char *month_underline[12] = {"-------", "--------", "-----", "-----", "---", "----", "----", "------", "---------", "-------", "--------", "--------"};
char *week_name[7] = {"Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"};
int days = 1;
int days_max;
int i, j, k;

for(i = 0; i < 12; i++)
{
    cout << "--------------------------------------------------------------------------------";

    cout << '\n' << month_name[i] << '\n';
    cout << month_underline[i] << "\n\n";

    for (j = 0; j < 7; j++)
    {
        cout << week_name[j] << "     ";
    }

    cout << "\n\n";

    if (i == 0 || i == 2 || i == 4 || i == 6 || i == 7 || i == 9 || i == 11) //i is the number of the month minus 1 (jan = 0, feb = 1, etc.)
        days_max = 32;
    else if (i == 3 || i == 5 || i == 8 || i == 10)
        days_max = 31;
    else if (i == 1)
        days_max = 29;

    for (days = 1; days < days_max; days++)
    {
        if (i == 0 || i == 9)
        {
            if (days == 1)
            {
                cout << "                        ";
                cout << setw(4) << days << "        ";
            }
            else if (days == 6 || days == 13 || days == 20 || days == 27)
            {    
                cout << "\n\n";
                cout << setw(4) << days << "        ";
            }
            else 
                cout << setw(4) << days << "        ";
        }

        if (i == 1 || i == 2 || i == 10)
        {
            if (days == 1)
            {
                cout << "                                                            ";
                cout << setw(4) << days << "        ";
            }                
            else if (days == 3 || days == 10 || days == 17 || days == 24 || days == 31)
            {
                cout << "\n\n";
                cout << setw(4) << days << "        ";
            }
            else 
                cout << setw(4) << days << "        ";
        }

        if (i == 3 || i == 6)
        {
            if (days == 1)
            {
                cout << "            ";
                cout << setw(4) << days << "        ";
            }                
            else if (days == 7 || days == 14 || days == 21 || days == 28)
            {
                cout << "\n\n";
                cout << setw(4) << days << "        ";
            }
            else 
                cout << setw(4) << days << "        ";
        }

        if (i == 4)
        {
            if (days == 1)
            {
                cout << "                                    ";
                cout << setw(4) << days << "        ";
            }                
            else if (days == 5 || days == 12 || days == 19 || days == 26)
            {
                cout << "\n\n";
                cout << setw(4) << days << "        ";
            }
            else 
                cout << setw(4) << days << "        ";
        }

        if (i == 5)
        {
            if (days == 1)
            {
                cout << "                                                                        ";
                cout << setw(4) << days << "        ";
            }                
            else if (days == 2 || days == 9 || days == 16 || days == 23 || days == 30)
            {
                cout << "\n\n";
                cout << setw(4) << days << "        ";
            }
            else 
                cout << setw(4) << days << "        ";
        }

        if (i == 7)
        {
            if (days == 1)
            {
                cout << "                                                ";
                cout << setw(4) << days << "        ";
            }                
            else if (days == 4 || days == 11 || days == 18 || days == 25)
            {
                cout << "\n\n";
                cout << setw(4) << days << "        ";
            }
            else 
                cout << setw(4) << days << "        ";
        }

        if (i == 8 || i == 11)
        {           
            if (days == 8 || days == 15 || days == 22 || days == 29)
            {
                cout << "\n\n";
                cout << setw(4) << days << "        ";
            }
            else 
                cout << setw(4) << days << "        ";
        }

    }
        cout << "\n";
}

cout << "--------------------------------------------------------------------------------";

system("PAUSE");
return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T14:53:52.230

在文本模式下，您有一些限制。但是有一些便携式库可以处理您的目的，例如着色。

阅读这个问题：[Portable text based console manipulator](https://stackoverflow.com/questions/7876241/portable-text-based-console-manipulator)并点击[链接](http://tapio.github.com/rlutil/)。它至少在（支持 Windows 和 ANSI-Escape 的操作系统）之间是可移植的

您可以像下面的代码一样更改颜色：

```
#include <iostream>
#include "rlutil.h"  // <-- Get it from the link
int main()
{
    rlutil::setColor(2); // 2 for Green

    std::cout << "Hello! I am green!" << std::endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:56:25.357

没有 C++“标准”方法可以做到这一点。您可以按照 Masoud 的建议找到一个库 - 这将使您的代码可以移植到其他系统。或者您可以直接使用例如 ANSI Escape 序列[这可能是便携式解决方案在幕后所做的，但还有其他方法]。

该页面提供了一些信息： [http ://en.wikipedia.org/wiki/ANSI_escape_code](http://en.wikipedia.org/wiki/ANSI_escape_code)

但是请记住，这是不可移植的，并且不适用于所有平台。

# ruby-on-rails - 有没有办法缩短这个 RSpec 示例以停止代码重复？

> ID：14304562
> 
> 赞同：1
> 
> 时间：2013-01-13T14:44:32.507
> 
> 标签：ruby-on-rails, ruby, rspec

我在[这个优秀的 Rails 教程](http://ruby.railstutorial.org/chapters/following-users#top)的最后一章，我遇到了这段代码：

```
describe "creating a relationship with Ajax" do
  it "should increment the Relationship count" do
    expect do
      xhr :post, :create, relationship: { followed_id: other_user.id }
    end.to change(Relationship, :count).by(1)
  end

  it "should respond with success" do
    xhr :post, :create, relationship: { followed_id: other_user.id }
    response.should be_success
  end
end 
```

我想知道是否有任何方法可以停止重复，类似于下面的代码（它不会工作，因为它只创建 2 个测试）？

```
it "should increment relationships count" do
  expect do
    xhr :post, :create, relationship: { followed_id: other_user.id }
    response.should be_success        
  end.to change(Relationship, :count).by(1)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:47:53.423

这不是 DRY 问题。您应该将递增测试和成功响应分开

# javascript - 将手动更改还原为 2 个连接的 jquery ui 可排序 lsts

> ID：14304564
> 
> 赞同：0
> 
> 时间：2013-01-13T14:44:52.977
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

我有多个 jquery ui 可排序列表，它们连接起来，并在一个列表收到项目时手动平衡到 N 个项目 - 就像在这个答案中一样：[https ://stackoverflow.com/a/13754827/27497](https://stackoverflow.com/a/13754827/27497)

但是，当您在列表之间手动移动项目时（使用 jquery 的 .appendTo() 或 .prependTo()），jquery ui 可排序库不会检测到这些更改，因此当您使用“取消”命令时恢复状态，手动移动的项目不会放回其原始列表中。

是否有一种正确的方法可以手动将项目从一个列表移动到另一个列表，以便可排序库能够在您调用 $(".my-lists-selector").sortable("cancel"); 时将项目移回

这是一个示例，说明当您调用 .sortable("cancel") 时项目如何不恢复 - 只需在将项目从一个列表移动到另一个列表后单击红色取消按钮：http: [//jsfiddle.net/SUffL/3/](http://jsfiddle.net/SUffL/3/)

```
 $(function() {
    $( ".connectedSortable" ).sortable({
        connectWith: ".connectedSortable",
        update: function(event, ui) {
            var ul1 = $("#ul1 li");
            var ul2 = $("#ul2 li");
            var ul3 = $("#ul3 li");

            checkul1(ul1, ul2, ul3);
            checkul2(ul1, ul2, ul3);
            checkul3(ul1, ul2, ul3);
        }
    }).disableSelection();

  $("#cancel-btn").click(function(){
    $(".connectedSortable").sortable("cancel");
  });
});

function checkul1(ul1, ul2, ul3) {
    if (ul1.length > 5) {
        ul1.last().prependTo(ul2.parent());
    }
}

function checkul2(ul1, ul2, ul3) {
    if (ul2.length > 5) {
        if (ul1.length < 5) {
            ul2.first().appendTo(ul1.parent());
        } else {
            ul2.last().prependTo(ul3.parent());
        }
    }
}

function checkul3(ul1, ul2, ul3) {
    if (ul3.length > 5) {
        ul3.first().appendTo(ul2.parent());
        checkul2(ul1, ul2, ul3);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:56:29.190

这是一个解决方案，它存储手动移动的项目以及它开始的列表和移动到的列表。在`receive`事件处理程序中，2 个列表可用作`ui.sender`和`this`。我创建了一个简单的`balanceLists`函数来处理手动移动和取消

```
$(function () {

  var listChange = {
    startList: null,
    item: null,
    endList: null
  }
  $(".connectedSortable").sortable({
    connectWith: ".connectedSortable",
    receive: function (event, ui) {     
      listChange = {
        startList: ui.sender,
        item: ui.item,
        endList: $(this)
      }

      balanceLists($(this), ui.sender)

    }
  }).disableSelection();

  $("#cancel-btn").click(function () {
    if (listChange.item) {
      balanceLists(listChange.startList, listChange.endList)
      $(".connectedSortable").sortable("cancel").sortable("refresh");
      listChange.item=null;
    }
  });
});

function balanceLists($from, $to) {
  $to.append($from.find('li').last())

} 
```

演示：http: [//jsfiddle.net/SUffL/8/](http://jsfiddle.net/SUffL/8/)

这允许使用取消按钮撤消一个移动。

# php - 同一文件夹中的 PHP 脚本必须添加文件的文件夹的 chmod 应该是什么？

> ID：14304570
> 
> 赞同：1
> 
> 时间：2013-01-13T14:45:34.613
> 
> 标签：php, localhost, chmod, chown

我开发了一个 PHP 脚本来添加基于模板的新文件。我现在在 localhost 上运行它。我想知道脚本所在文件夹的最佳 chmod 设置是什么（以及新文件应该放在哪里）。644 表示权限被拒绝，622 工作，666 工作（我只能从我的 Mac 上的信息面板中选择 6、4、2 和 0）。顺便说一句，我注意到第三个数字很重要，如何将其设置为第二个或第一个？

**编辑**
那么你如何在 Mac 上为 localhost 更改 chown？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:54:30.810

这不是关于`chmod`它是关于`chown`。该目录的所有者应该是 Web 服务器。通常用户是`apache`or`www`或`www-data`。
644 建议用于文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T14:53:42.690

第三个数字与所有人相关（前两个是所有者和组）。4 是只读的，这就是为什么它不起作用，2 是只写，6 是读/写（7 是读/写/执行）。

一般来说，您不应该授予每个人对您的服务器的写入权限。需要写入权限的最佳方法是使用`chown`更改所有者和/或组以匹配您的网络服务器运行的用户，然后使用 644 或 664。

对于 Mac，此线程：[Mac OS X 下 Apache 2 站点文件/文件夹的正确所有者/组/权限？](https://stackoverflow.com/questions/2001881/correct-owner-group-permissions-for-apache-2-site-files-folders-under-mac-os-x)提供了一些关于如何安全地执行此操作的指示。

如果您只想更改上传文件夹，请尝试：

```
sudo chgrp _www /path/to/upload/folder
sudo chmod 664 /path/to/upload/folder 
```

# jsf - @BusinessProcessScoped bean 和 JSF 2 渲染属性

> ID：14304572
> 
> 赞同：0
> 
> 时间：2013-01-13T14:45:44.997
> 
> 标签：jsf, cdi, activiti

当表单在 JSF2 中提交并且我使用 bean 的范围时，bean 的 @BusinessProcessScoped 值不会在 action 方法中更新。如果我从 panelGrid 中删除渲染条件，则会更新值。有人可以澄清问题所在吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:30:32.190

该`rendered`属性必须评估为假。即使在呈现面板时它评估为真，当您提交数据时它也必须评估为假。

在提交请求时调试或记录模型 bean 的状态以确定问题的原因。

* * *

注意：

*   容器的`rendered`属性也适用于容器的孩子
*   该`rendered`属性不仅在渲染响应阶段使用

例如，从提交的数据中读取数据的功能由[以下`processDecodes`方法](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/api/javax/faces/component/UIComponent.html#processDecodes%28javax.faces.context.FacesContext%29)执行：

> 执行此组件的所有方面、此组件的所有子项以及此组件本身的请求处理生命周期的 Apply Request Values 阶段所需的组件树处理，如下所示。
> 
> *   **如果`rendered`此 UIComponent 的属性为 false，则跳过进一步处理。**
> *   *...省略了其他说明...*

# ios - 在 ios 上跟踪 ttl reciveform 的啤酒花

> ID：14304581
> 
> 赞同：4
> 
> 时间：2013-01-13T14:47:01.833
> 
> 标签：ios, c, sockets, network-programming, ttl

我正在尝试为 iOS 实现简单的跟踪路由。一切似乎都工作正常，除了当我在模拟器或设备上运行我的应用程序时，当 CLI traceroute 找到所有 14 个路由器时，它在途中只找到了几个（6-7）个第一个路由器。

```
const char *c = "www.gmail.com";
struct hostent *host_entry = gethostbyname(c);
char *ip_addr;
ip_addr = inet_ntoa(*((struct in_addr *)host_entry->h_addr_list[0]));
struct sockaddr_in destination, fromAddr;
int recv_sock;
int send_sock;

// Creting Sockets///

if ((recv_sock = socket(AF_INET, SOCK_DGRAM, IPPROTO_ICMP)) <
    0) // using UDP socket.
{
  NSLog(@"Could not cretae recv_sock.\n");
}
if ((send_sock = socket(AF_INET, SOCK_DGRAM, 0)) < 0) {
  NSLog(@"Could not cretae send_sock.\n");
}
memset(&destination, 0, sizeof(destination));
destination.sin_family = AF_INET;
destination.sin_addr.s_addr = inet_addr(ip_addr);
destination.sin_port = htons(80);
struct timeval tv;
tv.tv_sec = 0;
tv.tv_usec = 10000;
setsockopt(recv_sock, SOL_SOCKET, SO_RCVTIMEO, (char *)&tv,
           sizeof(struct timeval));
char *cmsg = "GET / HTTP/1.1\r\n\r\n";
int max_ttl = 20;
int num_attempts = 5;
socklen_t n = sizeof(fromAddr);
char buf[100];
for (int ttl = 1; ttl <= max_ttl; ttl++) {
  memset(&fromAddr, 0, sizeof(fromAddr));
  if (setsockopt(send_sock, IPPROTO_IP, IP_TTL, &ttl, sizeof(ttl)) < 0)
    NSLog(@"error in setsockopt\n");
  for (int try = 0; try < num_attempts; try ++) {
    if (sendto(send_sock, cmsg, sizeof(cmsg), 0,
               (struct sockaddr *)&destination,
               sizeof(destination)) != sizeof(cmsg))
      NSLog(@"error in send to...\n@");
    int res = 0;
    if ((res = recvfrom(recv_sock, buf, 100, 0, (struct sockaddr *)&fromAddr,
                        &n)) < 0) {
      NSLog(@"an error: %s; recvfrom returned %d\n", strerror(errno), res);
    } else {
      char display[16] = {0};
      inet_ntop(AF_INET, &fromAddr.sin_addr.s_addr, display, sizeof(display));
      NSLog(@"Received packet from%s for TTL=%d\n", display, ttl);
      break;
    }
  }
} 
```

我尝试绑定发送套接字，但结果相同，我无法在 iOS 上使用 Sock_raw。我试图在我的 Mac 上运行它并得到相同的结果。我得到的错误是“资源暂时不可用；” 对于`recvfrom()`. 这是为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T15:30:12.873

接收套接字的`EAGAIN`超时可能会引发错误（产生“资源暂时不可用；”字符串）。

由于您使用此行仅将 10000 微秒设置为读取超时（恕我直言，这真的很短）...

```
struct timeval tv;
tv.tv_sec = 0;
tv.tv_usec = 10000;
setsockopt(recv_sock, SOL_SOCKET, SO_RCVTIMEO, (char *)&tv,sizeof(struct timeval)); 
```

... 可能路越长（我的意思是您必须通过的路由器数量），您在这种情况下遇到的机会就越大。

尝试提高超时值并让我们知道它是否变得更好。

**编辑**

我在linux下尝试了源代码，我发现了两种问题。

*   如上所述：超时
*   80端口问题

我只是提高了超时时间并使用了一个不同于 80 的端口（在我的情况下，我将 udp 消息发送到 40000 端口）并且我像`traceroute`命令一样取回了所有跃点。

我不确定为什么会出现这种行为。也许某种*“可能的恶意数据包警报”*被丢弃它的路由器触发

**进一步编辑**

看这个链接：[man traceroute](http://linux.die.net/man/8/traceroute)

在**可用方法列表**部分中，您可以找到许多方法来实现您所需要的。您的方法类似于默认方法，说明：

*探测数据包是具有所谓“不太可能”的目标端口的 udp 数据报。第一个探针的“不太可能”端口是 33434，然后对于每个下一个探针，它都会增加 1。由于这些端口预计不会使用，因此目标主机通常会返回“icmp unreach port”作为最终响应。（**但是，没有人知道当某些应用程序侦听此类端口时会发生什么**）。*

因此，如果您需要完全模拟常见 Linux 跟踪路由的行为，您必须将目标端口增加 1，每次 TTL 增加（或者每次您无法得到响应恕我直言）

可能，有时您的命令在某些端口上不起作用，因为路由器正在侦听后者（如 Linux 手册所建议，我用粗体下划线）。

# ms-access - 使用查询作为数据源的表单不允许输入

> ID：14304584
> 
> 赞同：0
> 
> 时间：2013-01-13T14:47:40.650
> 
> 标签：ms-access, ms-access-2007

我有一个 Access 表单，它使用查询作为数据源。此查询使用 3 个不同的表。我希望表单允许输入和输入值填充这三个表之一。目前该表单不允许输入。请告知 非常感谢，纳撒尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:04:58.507

您需要一个可更新的查询：[http](http://allenbrowne.com/ser-61.html) ://allenbrowne.com/ser-61.html ，但如果这不可能，还有其他方法。

如果连接三个表的查询已经非常简单，您可以考虑是否真的需要一个表单中的所有表，例如，表单/子表单设置是一种非常有用的方式来呈现和更新来自多个表的数据桌子。如果其中一个表包括查找数据，例如国家代码/国家，另一种可能性是组合框。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-13T14:53:47.493

您可以删除数据源，并在 open 方法中显式获取数据。这意味着更多的 VBA 代码，但它可能不像你现在正在做的那样做作。

# c# - 检查用户输入是否为数字

> ID：14304591
> 
> 赞同：2
> 
> 时间：2013-01-13T14:48:58.860
> 
> 标签：c#

我想检查用户的输入是否是数字。如果是，我希望该功能继续运行，否则想提醒他并再次运行它。

```
Console.WriteLine(String.Concat("choose your action" ,Environment.NewLine ,
                                "1.Deposit", Environment.NewLine,
                                "2.Withdraw", Environment.NewLine,
                                "3.CheckAccount"));
string c = Console.ReadLine();
int value = Convert.ToInt32(c);

if (value==char.IsLetterOrDigit(value)) //<----- no good why?
{
    switch (value)
    {
        case 1:
            Deposit();
            return;
        case 2:
            Withdraw();
            return;
        case 3:
            CheckAccount();
            return;
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-13T14:50:44.110

只需使用：

```
string c = Console.ReadLine();
int value;
if (int.TryParse(c, out value)) { /*Operate*/ } 
```

编辑：使代码适应作者的评论：

```
if (int.TryParse(c, out value) && value >= 1 && value <= 3) { /*Operate*/ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:06:08.030

int 值 = Convert.ToInt32(c); 如果 c 不是仅由整数组成的字符串，这将失败。使用 try catch 来处理这种情况。

# c# - Stackoverflow API 响应格式

> ID：14304592
> 
> 赞同：6
> 
> 时间：2013-01-13T14:49:02.317
> 
> 标签：c#, asp.net, stackexchange-api

当 C# 创建 HTTP GET 请求时，Stackoverflow API 返回意外响应。

[如果我将http://api.stackoverflow.com/1.1/users/882993](http://api.stackoverflow.com/1.1/users/882993)粘贴到浏览器地址栏中，我会得到正确的 JSON 响应：

```
{
  "total": 1,
  "page": 1,
  "pagesize": 30,
  "users": [
    {
      "user_id": 882993,
      "user_type": "registered",
      "creation_date": 1312739131,
      "display_name": "Jack",
      "reputation": 1926,
      "email_hash": "69243d90e50d9e0b3e025517fd23d1da",
      "age": 23,
      "last_access_date": 1358087009,
      "website_url": "http://jtbrown.me.uk",
      "location": "Birmingham, United Kingdom",
      "about_me": "<p>Student.</p>\n",
      "question_count": 68,
      "answer_count": 79,
      "view_count": 115,
      "up_vote_count": 98,
      "down_vote_count": 3,
      "accept_rate": 94,
      "association_id": "d64187a3-bf66-4a4d-8e87-6ef18f0397e3",
      "user_questions_url": "/users/882993/questions",
      "user_answers_url": "/users/882993/answers",
      "user_favorites_url": "/users/882993/favorites",
      "user_tags_url": "/users/882993/tags",
      "user_badges_url": "/users/882993/badges",
      "user_timeline_url": "/users/882993/timeline",
      "user_mentioned_url": "/users/882993/mentioned",
      "user_comments_url": "/users/882993/comments",
      "user_reputation_url": "/users/882993/reputation",
      "badge_counts": {
        "gold": 0,
        "silver": 7,
        "bronze": 34
      }
    }
  ]
} 
```

如果我尝试在代码中执行相同的操作：

```
 HttpWebRequest Request = WebRequest.Create("http://api.stackoverflow.com/1.1/users/882993") as HttpWebRequest;  

    using (HttpWebResponse Response = Request.GetResponse() as HttpWebResponse)  
    {  
        // Get the response stream  
        StreamReader Reader = new StreamReader(Response.GetResponseStream());

        // Console application output  
        StackWidget.Text = Reader.ReadToEnd();
    } 
```

我得到回应：

```
�\b\0\0\0\0\0\0u�Ms�0���`8��Ӏ2�rl����#���J4��^\t#�p�g���j�����|�n�G/ڎ�7p����$�5\r���f�y�v�����\"F(���֛0���J�?{��������$���e�!T�-~+��@_p���j\fb�(�f�my��dt�ӄ�!AV\t����G'$\"؉i{;��X��5H9�z(�\"GQ<�]��TA9\b�Z��T��U%���;�n�-����*:ʚ��w�c��޹yU|P�m�S��M\r��?��O���@�m������\n'\b�}/�ь�.7E\a�*���uaDN@�k��N�L�zU\n�3�:DJ^S{����$K�\"�ɮ:f�.�)�P�\f�Qq\f�C�/�k*UN=�A\r�,7���.���p�9�3�jVT7��)ܬH\fYzW�4kGX�_|�AK��q�KU�GGw��^�j����D���7�\\��Ƴr,�N�yzno�F\ro�̄[�&amp;i{afڵ��ٗ,���c\\~=l>6�\0U�F\0\0 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T15:03:54.343

您收到的 HTTP 响应是 GZIP 压缩的，因此您必须解压缩响应流。这可以通过设置[`HttpWebRequest.AutomaticDecompression`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.automaticdecompression.aspx)属性自动完成。

```
var request = (HttpWebRequest)WebRequest.Create("http://api.stackoverflow.com/1.1/users/882993");
request.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate; 
using (var response = request.GetResponse())
using (var stream = response.GetResponseStream())
using (var reader = new StreamReader(stream))
{
    var json = reader.ReadToEnd();
} 
```

# android - 我正在尝试运行 eclipse（安装了 java）。该应用程序可以找到我的 javaw.exe 但无法执行它。这是我的 .ini 文件和错误提示：

> ID：14304595
> 
> 赞同：1
> 
> 时间：2013-01-13T14:49:15.640
> 
> 标签：android, eclipse

这是我从捆绑包中获得的 eclipse.ini：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20120522-1813
-product
com.android.ide.eclipse.adt.package.product
--launcher.XXMaxPermSize
256M
-showsplash
com.android.ide.eclipse.adt.package.product

// I add this in
-vm
C:\Program Files (x86)\Java\jre7\bin\javaw.exe

--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xms40m
-Xmx768m
-Declipse.buildId=v21.0.1-543035 
```

以及当我尝试执行文件时的错误提示：

```
Java was started but returned exit code=13
C:\Program Files (x86)\Java\jre7\bin\javaw.exe
-Dosgi.requiredJavaVersion=1.6
-Xms40m
-Xmx768m
-Declipse.buildId=v21.0.1-543035
-XX:MaxPermSize=256m
-jar C:\Program Files
(x86)\adt-bundle-windows-x86_64\eclipe\\plugins/org.eclipse.equinox.launcher_
1.3.0v21020522-1813.jar
-os win32
-ws win32
-arch x86_64
-showsplash
-launcher C:\Program Files (x86)\adt-bundle-windows-x86_64\eclipse\eclipse.exe
-name Eclipse
--launcher.library C:\Program Files
(x86)\adt-bundle-windows-x86_64\eclipse\\plugins/org.eclipse.equniox.launcher.
win32.win32.x86_64_1.1.200.v20120522-1813\eclipse_1503.dll
-startup C:\Program Files
(x86)\adt-bundle-windows-x86_64\eclipse\\plugins/org.eclipse.equniox.launcher_
1.3.0.v20120522-1813.jar
--launcher.overrideVmargs
-exitdata 1dd0_5c
-product com.android.ide.eclipse.adt.package.product
-vm C:\Program Files (x86)\Java\jre\bin\javaw.exe
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xms40m
-Xmx768m
-Declipse.buildId=v21.0.1-543035
-XX:MaxPermSize=256m
-jar C:\Program Files
(x86)\at-bundle-windows-x86_64\eclipse\\plugins/org.eclipse.equinox.launcher_
1.3.0.v20120522-1813.jar 
```

谁能帮我找出我的错误？是目录问题，还是我需要另一个操作系统来运行 eclipse？顺便说一句，我得到了这条线

```
-vm
C:\Program Files (x86)\Java\jre7\bin\javaw.exe 
```

从[无法加载 JNI 共享库 (JDK)](https://stackoverflow.com/questions/7352493/failed-to-load-the-jni-shared-library-jdk)。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-13T15:37:49.673

我总是将 jre 文件夹复制到我的 eclipse.exe 所在的同一目录中。所以我可以确保我的 Eclipse 独立于安装的 Java 版本运行。在首选项中，您可以定义一个单独的 jdk/jre（菜单：Window -> Preferences -> Java -> Installed JREs），用于运行您的代码。

顺便说一句：好的做法是在每个项目中使用一个单词空间来保持井井有条。您可以导出和导入您的工作区设置（菜单：文件 -> 导入/导出 -> Gneral -> 首选项）

这个链接也可以帮助-> [http://wiki.eclipse.org/Eclipse.ini](http://wiki.eclipse.org/Eclipse.ini)

# java - 为“(5+x)”之类的字符串创建正则表达式

> ID：14304596
> 
> 赞同：1
> 
> 时间：2013-01-13T14:49:21.040
> 
> 标签：java, regex

我想明白，括号里是我的表达方式。我创建了这样的正则表达式 -

```
public static final String complexValue = "([-]?[(].+[)])" 
```

但是我在这样的输入字符串上失败了-

```
String st = "(4+6)+(3)" 
```

有没有办法创建**这样的 regExp**，该字符串`(5+x)`匹配它和字符串`(4+6)+(3)`no。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:59:01.027

字面上的答案是肯定的：`"^\\(5\\+x\\)$"`做你问的，但不是你想要的。

问题是，不清楚你想要什么`((4)+(6))`：它应该匹配吗？你想允许括号的潜在无限嵌套，还是只允许一对外括号而不允许内括号？

在第一种情况下，您的语法不规则，因此正则表达式无法解析它。（我似乎记得有“不规则的正则表达式”方言，但 IIRC java 实现不在其中）。

在第二种情况下，类似的东西`"^\\([^)]+\\)$"`可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:56:02.377

所以你想匹配括号括起来的两个数字的加法吗？然后以下应该工作。

```
^\(\-?\d+\+\-?\d+\)$ 
```

# matlab - 获取逻辑图像中区域的外部索引

> ID：14304597
> 
> 赞同：1
> 
> 时间：2013-01-13T14:49:23.320
> 
> 标签：matlab, image-processing, region, indices

如果我有任何`m x n`白色区域的逻辑图像，如下所示：

![区域的逻辑图像](../Images/2f402cc1ef268946a95a485567d4939a.png)

如何获得白色和黑色区域之间边界线的索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:01:32.523

这简单地归结为检测给定图像的边缘。[`edge`](http://www.mathworks.com/help/images/ref/edge.html)MATLAB 在命令中已经有一个内置的实现。`I`这是使用 Canny 过滤器检测图像边界的示例：

```
A = edge(I, 'canny'); 
```

结果图像中的非零元素`A`就是您所追求的。然后，您可以使用`find`来获取它们的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:52:38.670

由于您的输入是清晰的二进制图像，因此无需`edge`按照@EitanT 的建议使用。

使用形态学运算获得周长[`imdilate`](http://www.mathworks.com/help/images/ref/imdilate.html)，[`imerode`](http://www.mathworks.com/help/images/ref/imerode.html)并且[`regionprops`](http://www.mathworks.com/help/images/ref/regionprops.html)：

```
% let input image be bw
we = bw & ~imerode( bw, strel('disk', 1) ); % get a binary image with only the boundary pixels set
st = regionprops(we, 'PixelIdxList'); % get the linear indices of the boundary

% get a binary image with pixels on the outer side of the shape set
be = ~bw & imdilate( bw, strel('disk', 1) );
st = regionprops(be, 'PixelList'); % get the row-col indices of the boundary 
```

# ruby-on-rails - 使用 Rails 在客户端调整图像大小

> ID：14304599
> 
> 赞同：2
> 
> 时间：2013-01-13T14:49:38.620
> 
> 标签：ruby-on-rails, image, image-resizing

我想知道在将图像上传到服务器之前是否有任何方法可以在客户端调整图像大小。我正在为表单的图像部分使用嵌套属性。理想情况下，它不会立即上传 - 只是调整大小，然后才会在提交表单时上传。

有谁知道任何可以做到这一点的插件？

编辑：如果有可以与 IE 一起使用的插件，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:32:14.017

See these:

[Image resizing client-side with javascript before upload to the server](https://stackoverflow.com/questions/2434458/image-resizing-client-side-with-javascript-before-upload-to-the-server)

[http://www.rubydesigner.com/blog/resizing-images-before-upload-using-html5-canvas](http://www.rubydesigner.com/blog/resizing-images-before-upload-using-html5-canvas)

Here's the code for the last one:

[https://github.com/josefrichter/resize/blob/master/public/preprocess.js](https://github.com/josefrichter/resize/blob/master/public/preprocess.js)

[https://github.com/josefrichter/resize](https://github.com/josefrichter/resize)

# mysql - 从多个表中获取不同的行

> ID：14304606
> 
> 赞同：0
> 
> 时间：2013-01-13T14:50:42.270
> 
> 标签：mysql

我想在我的网站中包含搜索功能。

我想允许根据用户名、城市、学院/学校名称、员工进行搜索。name 是必填项，其他是可选字段。我有以下表格

```
users(id,fname,lname,city)
profile_pic(id,pic,userid)//userid from users(id) 
educationdetail(eduid,school,userid)//userid from users(id) 
employment(empid.employeer,userid)//userid from users(id) 
```

在 profile_pic 中，每个用户只有一张图片；在educationdetail用户可以添加多个学校大学详细信息在就业用户可以添加多个工作详细信息

出于搜索目的，我使用以下查询：

```
 SELECT distinct s.id, s.fname, s.lname,pr.pic
     FROM users as s LEFT JOIN profile_pic as pr 
     on s.id = pr.userid
     LEFT JOIN educationdetail as edu
     on s.id=edu.userid
     LEFT JOIN  employment as emp
     on s.id=emp.userid
     where s.fname like '%m%' and s.lname like '%%%' and s.city like '%%%' 
```

这是给出适当的细节

但是当包含几个参数时，它没有显示任何结果

```
 SELECT distinct s.id, s.fname, s.lname,pr.pic
     FROM users as s LEFT JOIN profile_pic as pr 
     on s.id = pr.userid
     LEFT JOIN educationdetail as edu
     on s.id=edu.userid
     LEFT JOIN  employment as emp
     on s.id=emp.userid
     where s.fname like '%m%' and s.lname like '%%%' and s.city like '%%%'
     and  edu.school='%%%' and emp.employeer='%%%'; 
```

显示

```
Empty set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:57:45.197

也许你可以使用`OR`，然后在搜索模式时`LIKE`不要使用`=`

```
and  edu.school LIKE '%' and emp.employeer LIKE '%'; 
```

**更新 1**

它不返回任何值的原因是因为查询正在搜索不存在`%%%`的字段中的值。`edu.school`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:14:07.893

您必须使用[`ESCAPE`](http://dev.mysql.com/doc/refman/5.0/en//string-comparison-functions.html#operator_like)关键字来指定转义字符，当您尝试使用谓词搜索保留的通配符时`LIKE`，如果要搜索 value `%`，请使用：

```
WHERE name LIKE '%|%%' ESCAPE '|' -- Or any escape character. 
```

而不仅仅是：

```
WHERE name LIKE '%%%' 
```

# c# - 将 XPS 文档拆分为多个 XPS 文档

> ID：14304610
> 
> 赞同：1
> 
> 时间：2013-01-13T14:50:55.413
> 
> 标签：c#, split, xps

我正在尝试将 XPS 文档拆分为其他 XPS 文档。我已经使用以下代码开始，它适用于单个页面但不是更多（http://stackoverflow.com/questions/5328596/extract-a-single-page-from-an-xps-document）。在下面的代码中，我试图将父文档的前 3 页提取到子文档中。一旦我弄清楚这一点，我会将剩余的页面提取到其他文档中。

我遇到的问题是将父页面添加到子页面，因此我尝试使用内存流创建每个页面的副本，但现在在调用 XpsDocumentWriter 时出现以下异常。

异常：“发生 I/O 错误”。

我应该如何将父母的页面添加到孩子？

已解决：此代码适用于我的 WF4 项目。

```
public void Split(InputFile parent, string outputDirectory, int splitPageFrequency, CodeActivityContext context)
    {
        // Open the parent XPS package
        using (Package package = Package.Open(parent.InputFilePath, FileMode.Open, FileAccess.Read))
        {
            string Pack = "pack://temp.xps";
            Uri packageUri = new Uri(Pack);
            PackageStore.AddPackage(packageUri, package);

            // Get the parent XPS document
            XpsDocument xpsDocumentParent = new XpsDocument(package, CompressionOption.Maximum, Pack);
            FixedDocumentSequence fixedDocumentSequenceParent = xpsDocumentParent.GetFixedDocumentSequence();
            DocumentReference documentReferenceParent = fixedDocumentSequenceParent.References.First();
            FixedDocument fixedDocumentParent = documentReferenceParent.GetDocument(false);

            for (int pageCounter = 0, fileCounter = 1; pageCounter < fixedDocumentParent.Pages.Count; pageCounter += splitPageFrequency, fileCounter++)
            {
                // Generate the child file name
                Guid documentId = Guid.NewGuid();
                string childName = outputDirectory + parent.InputFileId + "_" + fileCounter + "_" + documentId + ".xps";

                // Open the child XPS package
                using (Package packageDest = Package.Open(childName))
                {
                    // Create the child XPS document
                    XpsDocument xpsDocumentChild = new XpsDocument(packageDest, CompressionOption.Maximum, childName);
                    FixedDocument fixedDocumentChild = new FixedDocument();

                    // Add the parent's pages in range to the child
                    for (int pageCounterChild = pageCounter; pageCounterChild < pageCounter + splitPageFrequency; pageCounterChild++)
                    {
                        // Add the copied fixedpage to the child FixedDocument.
                        PageContent pageContentChild = new PageContent();
                        pageContentChild.Source = fixedDocumentParent.Pages[pageCounterChild].Source;
                        (pageContentChild as IUriContext).BaseUri = ((IUriContext)fixedDocumentParent.Pages[pageCounterChild]).BaseUri;
                        pageContentChild.GetPageRoot(false);
                        fixedDocumentChild.Pages.Add(pageContentChild);
                    }

                    //Write the child FixedDocument to the XPSdocument
                    XpsDocumentWriter writer = XpsDocument.CreateXpsDocumentWriter(xpsDocumentChild);
                    writer.Write(fixedDocumentChild);
                    xpsDocumentChild.Close();
                }

                // Set the OutArgument value
                NumberOfDocuments.Set(context, fileCounter);
            }

            PackageStore.RemovePackage(packageUri);
            xpsDocumentParent.Close();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:35:05.840

在将父页面添加到子文档时，我使用 PageContent Source 属性解决了我的问题。我还添加了循环以将每个 n 页提取到不同的子级。

# r - 'orderVector1' 中未实现的类型 'list'

> ID：14304612
> 
> 赞同：0
> 
> 时间：2013-01-13T14:51:10.633
> 
> 标签：r

有人可以解释一下这里发生了什么吗？

我似乎无法弄清楚问题是什么。

```
 [,1] [,2]   [,3]   [,4]   [,5] [,6]  [,7]   [,8]  [,9]   [,10]  [,11] 
[1,] 0    -105.2 -97.49 -129.5 150  -62.5 -55.33 84.88 -15.15 32.69  -58.34
[2,] 1    -118.6 -107.4 -92.12 -10  -125  35     70.47 84.67  -113.5 12.99 
     [,12] [,13] [,14] [,15] [,16]  [,17]  [,18]  [,19]  [,20]  [,21]   [,22] 
[1,] 144.4 -49.7 0.494 122.1 106.4  -98.28 58.86  133    223.86 -269.99 327.23
[2,] 55    35.61 127.3 78.7  -60.01 44.7   -54.83 -11.41 17.74  -1.37   52.26 
     [,23]  [,24]  [,25]   [,26]  [,27]  [,28]   [,29]  [,30]   
[1,] 199.52 260.96 -137.21 37.11  238.15 -240.45 32.74  1320.327
[2,] 171.09 199.15 256.82  -27.02 48.12  -212.13 126.98 1098.386 
```

顺序错误（评估[，ncol（评估）]）：'orderVector1'中未实现的类型'list'

上面的矩阵是 print(evaluate) 返回的。

str（评估）返回

```
List of 60
 $ : int 0
 $ : int 1
 $ : num -105
 $ : num -119 
```

...

```
 $ : num 32.7
 $ : num 127
 $ : num 1320
 $ : num 1098
 - attr(*, "dim")= int [1:2] 2 30
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:30] "" "" "" "" ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:57:27.800

把它变成合适的对象。这是一个示例`matrix`：

```
xx <- scan(
file=textConnection(" 0 -105.2 -97.49 -129.5 150  -62.5 -55.33 84.88 -15.15 32.69  -58.34
 144.4 -49.7 0.494 122.1 106.4  -98.28 58.86  133    223.86 -269.99 327.23
 199.52 260.96 -137.21 37.11  238.15 -240.45 32.74  1320.327
 1 -118.6 -107.4 -92.12 -10  -125  35     70.47 84.67  -113.5 12.99 
 55    35.61 127.3 78.7  -60.01 44.7   -54.83 -11.41 17.74  -1.37   52.26 
 171.09 199.15 256.82  -27.02 48.12  -212.13 126.98 1098.386"
))

evaluated <- matrix(xx, byrow=TRUE, nrow=2)

order(evaluated[, ncol(evaluated)])
## [1] 2 1 
```

# java - Java从对象列表中提取单个数据

> ID：14304619
> 
> 赞同：1
> 
> 时间：2013-01-13T14:52:57.260
> 
> 标签：java

我有一个这样的Java类：

```
public class Employee {
  String Name;
  int Id;
  int Age;

  void setName(String tempVal) {
    Name = tempVal;
    System.out.println(Name);
    System.out.println("\n");
  }

  void setId(int parseInt) {
    Id = parseInt;
    System.out.println(Id);
    System.out.println("\n");
  }

  void setAge(int parseInt) {
    Age = parseInt;
    System.out.println(Age);
    System.out.println("\n");
  }

} 
```

现在我想使用链接中的代码使用 SAXParser 解析 employees.xml 文件：http: [//totheriver.com/learn/xml/xmltutorial.html#5.2](http://totheriver.com/learn/xml/xmltutorial.html#5.2)

问题是当我将 tempEmp 添加到列表并访问列表以在 printData() 方法中打印其值时，输出类似于：

```
No of Employees '3'.

Employee@140de537

Employee@1c43882a

Employee@15a08be5 
```

现在，如何分别提取员工的姓名、年龄和身份证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:54:50.677

您必须在类中实现一个`toString()`方法`Employee`才能正确显示它，如下所示：

```
@Override
public String toString() {
    return Id + " " + Name + " " + Age;
} 
```

另外，请记住，在 Java 中，属性名称应该以小写字符开头，而不是大写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T14:56:16.657

您想添加一些 getter 方法。

您还应该查看[Java 的代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)- 您的一些变量不应该以大写字母开头。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T15:02:18.673

我猜您正在将 Employee 对象添加到列表中并直接从列表中打印对象。如果您不重写 toString() 方法，它将调用 Object 类（所有类的超类）的 toString() 方法，这将是返回类名@hashcode（对象的哈希码）。如果要从类中打印一些数据，则需要覆盖类中的 toString() 方法并返回所需的格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T15:05:46.777

要单独获取每个值，您需要添加一些 get 方法

```
public String getName()
{
  return Name;
}

public int getAge()
{
  return Age;
}

public int getId()
{
  return Id;
} 
```

# java - 运行简单的 mapreduce 作业时出现错误“java.lang.OutOfMemoryError: Java heap space”

> ID：14304622
> 
> 赞同：2
> 
> 时间：2013-01-13T14:53:09.633
> 
> 标签：java, hadoop, garbage-collection, jvm

我一直在尝试在 RHEL 6 中为 wordcount 运行一个简单的 Mapreduce 作业，但一直收到此错误。请帮忙。

```
13/01/13 19:59:01 INFO mapred.MapTask: io.sort.mb = 100
13/01/13 19:59:01 WARN mapred.LocalJobRunner: job_local_0001
java.lang.OutOfMemoryError: Java heap space
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:949)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.<init>(MapTask.java:674)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:756)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)
13/01/13 19:59:02 INFO mapred.JobClient:  map 0% reduce 0%
13/01/13 19:59:02 INFO mapred.JobClient: Job complete: job_local_0001
13/01/13 19:59:02 INFO mapred.JobClient: Counters: 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T14:55:40.677

您可能需要为最大堆和最大永久空间增加一些 JVM 设置。

我建议您在运行 Hadoop 作业时运行[Visual VM](http://visualvm.java.net/)，这样您就可以了解正在发生的事情。

你在运行多台服务器吗？也许您要求单个服务器做太多事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:29:26.973

您可以使用它`jstat -gcutil`来监控 JVM 的内存使用情况。这将向您展示堆使用量增长的速度。

此外，您还可以启用 GC 日志记录，这是轻量级的，并且将为您实例化的每个 JVM 显示相同的内容：

> -XX:+UnlockDiagnosticVMOptions -XX:+LogVMOutput -XX:LogFile=jvm.log -XX:+HeapDumpOnOutOfMemoryError -Xloggc:gc.log -XX:+PrintGCTimeStamps -XX:+PrintGCDetails -showversion

# python - 有没有办法为一个输入框分配多个变量 - Python

> ID：14304628
> 
> 赞同：-2
> 
> 时间：2013-01-13T14:53:51.020
> 
> 标签：python, input, python-3.3

如何将多个变量分配给一个 GUI 输入框？像这样：q1, q2, q3 = input()

这不是代码的样子，但这正是我想要的样子：

```
 a, b, c = str(input("Type in a command")) 
```

但不是这样：

```
abc = str(input("Type in a command"))

if abc == str("a"):
    print ("a is right")
else:
    print ("a is wrong")

if abc == str("b"):
    print ("b is right")
else:
    print ("b is wrong")

if abc == str("c"):
    print ("c is right")
else:
    print ("c is wrong") 
```

如果我这样做，我会弄错其中一个，它会告诉我一个是对的，两个是错的。（a错，b对，c错）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T15:00:21.273

`input`只能返回一个字符串，但您可以即时处理它：

```
a, b, c = input('Type in a command').split() 
```

这可能会导致`ValueError`输入中“单词”的数量不同于 3，因此您可能需要使用`try`-`except`来处理它。

```
try:
    a, b, c = input('Type in a command').split()
except ValueError:
    print('Invalid input. Please enter a, b and c') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:01:09.153

`Input`只返回一个字符串。您可以存储输入，然后根据需要对其进行处理。采用多个变量输入的一种简单而安全的方法是：

```
s = input().split() 
```

在这里，`s`为您提供空格分隔输入的列表。这可以采用**任意数量**的选项。

然后，您可以单独处理**每个**：

```
for i in s :
    if i in ('a','b','c') : 
        print(i, " is right")
    else :
        print(i, " is wrong") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T15:13:45.993

如果你想使用不同的类型，你可能会使用`ast.literal_eval`：

```
a,b,c = ast.literal_eval("3,4,5")
a,b,c = ast.literal_eval("3,4.5,'foobar'") 
```

这是有效的，因为`ast`将字符串评估为包含文字的元组。然后在左侧打开包装。当然，为此，元素必须用逗号分隔。

# python - 一台服务器，2 个站点，1 个用清漆缓存，另一台无法删除会话

> ID：14304633
> 
> 赞同：2
> 
> 时间：2013-01-13T14:54:22.803
> 
> 标签：python, wordpress, flask, varnish

场景如下：1 个 EC2 微实例，托管 2 个站点、1 个 wordpress 博客和 1 个烧瓶驱动的站点，例如：wpsite.com 和 flasksite.com。两者都由监听 8080 的 nginx 提供服务，然后在 80 上监听的 varnish 充当 nginx 的代理。**我只需要缓存 wpsite.com 并且我想跳过 flasksite.com 的缓存引擎**。

这是 VCL：

```
backend default {
    .host = "127.0.0.1";
    .port = "8080";
}

acl purge {
    "127.0.0.1";
}

sub vcl_recv {
   if (!req.http.host ~ "^(www\.)?wpsite\.com$") {
        return(pass);
   }

   remove req.http.X-Forwarded-For;
   set req.http.X-Forwarded-For = client.ip;

   if (req.request == "PURGE") {
     if (!client.ip ~ purge) {
       error 405 "Not allowed.";
     }
     return(lookup);
   }
  if (req.http.Accept-Encoding) {
    #revisit this list
    if (req.url ~ "\.(gif|jpg|jpeg|swf|flv|mp3|mp4|pdf|ico|png|gz|tgz|bz2)(\?.*|)$") {
      remove req.http.Accept-Encoding;
    } elsif (req.http.Accept-Encoding ~ "gzip") {
      set req.http.Accept-Encoding = "gzip";
    } elsif (req.http.Accept-Encoding ~ "deflate") {
      set req.http.Accept-Encoding = "deflate";
    } else {
      remove req.http.Accept-Encoding;
    }
  }
  if (req.url ~ "\.(gif|jpg|jpeg|swf|css|js|flv|mp3|mp4|pdf|ico|png)(\?.*|)$") {
    unset req.http.cookie;
    set req.url = regsub(req.url, "\?.*$", "");
  }
  if (req.url ~ "\?(utm_(campaign|medium|source|term)|adParams|client|cx|eid|fbid|feed|ref(id|src)?|v(er|iew))=") {
    set req.url = regsub(req.url, "\?.*$", "");
  }
  if (req.http.cookie) {
    if (req.http.cookie ~ "(wordpress_|wp-settings-)") {
      return(pass);
    } else {
      unset req.http.cookie;
    }
  }
}

sub vcl_fetch {
  if (req.url ~ "manager" || req.url ~ "wp-(login|admin)" || req.url ~ "preview=true" || req.url ~ "xmlrpc.php") {
    return (hit_for_pass);
  }
  if ( (!(req.url ~ "manager" ||  req.url ~ "(wp-(login|admin)|login)")) || (req.request == "GET") ) {
    unset beresp.http.set-cookie;
   set beresp.ttl = 1h;
  }
  if (req.url ~ "\.(gif|jpg|jpeg|swf|css|js|flv|mp3|mp4|pdf|ico|png)(\?.*|)$") {
    set beresp.ttl = 365d;
  }
}

sub vcl_deliver {
   if (obj.hits > 0) {
     set resp.http.X-Cache = "HIT";
   } else {
     set resp.http.X-Cache = "MISS";
   }
}
sub vcl_hit {
  if (req.request == "PURGE") {
    set obj.ttl = 0s;
    error 200 "OK";
  }
}

sub vcl_miss {
  if (req.request == "PURGE") {
    error 404 "Not cached";
  }
} 
```

问题：一切似乎都很好，但是：我在 flasksite.com 中有一个依赖于 cookie-session 的登录系统：如果我登录，系统可以工作，但如果我想注销，cookie 仍然存在。

以下是 flasksite.com 的登录/注销视图：

```
@bp.route('/logout', methods=['POST'])
def logout():
    if 'username' in session:
        del session['username']
    return redirect(url_for('.start'))

@bp.route('/login', methods=['POST'])
def login():
    if 'username' not in session:
        db_user = database.get_user(request.form['username'])
        if db_user:
            if check_password(db_user['password'], request.form['password']):
                session['username'] = request.form['username']
                if 'remember_flag' in request.form:
                    session.permanent = True
                else:
                    session.permanent = False
            else:
                pass # wrong password
        else:
            pass # user not in db
    return redirect(url_for('.start')) 
```

如果我在 nginx 和客户端之间放置清漆，一切都会像魅力一样。感谢您的任何提示:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:06:20.877

好的，我已经解决了在 vcl_fetch 中添加以下内容：

```
 if (!req.http.host ~ "^(www\.)?wpsite\.com$") {
     return (hit_for_pass);
  } 
```

# ios - UICollectionViewCell里面的UIWebView不调用Delegate方法

> ID：14304636
> 
> 赞同：0
> 
> 时间：2013-01-13T14:54:57.527
> 
> 标签：ios, uiwebview, uicollectionview, uiwebviewdelegate, uicollectionviewcell

我目前正在 UICollectionViewCell 中嵌入 UIWebView，以便能够查看驻留在本地数据结构中的 HTML 格式文本。

我知道已经说过很多次不应该在 scrollView 中嵌入 UIWebView，但我目前看不到其他方法来实现显示混合内容概述（这是当前的要求，到目前为止 UICollectionView 确实适用于大型数据集）。

问题是，我无法调用 UIWebViews Delegate 方法：

```
- (BOOL)webView:(UIWebView *)webView
shouldStartLoadWithRequest:(NSURLRequest *)request
 navigationType:(UIWebViewNavigationType)navigationType { ... } 
```

我需要委托方法才能显示外部链接或调用本地方法。

有没有办法做到这一点？也许通过以编程方式移交事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:48:55.847

感谢您的反馈！

我刚刚发现我做错了什么：

我只需要更新单元格的 contentView：`[[cell contentView] setFrame:frameContainingWebViewSize]`

那成功了。未调用委托方法，因为 contentView 未覆盖 webview（clipSubviews 设置为 NO），因此未触发点击事件。

# node.js - 我应该在 /usr/lib 还是 /usr/local 中为 Meteor 安装 npm 模块？

> ID：14304639
> 
> 赞同：2
> 
> 时间：2013-01-13T14:55:14.947
> 
> 标签：node.js, meteor, npm

在[我们将通过 npm 安装在 Meteor 项目中的节点模块放在哪里？](https://stackoverflow.com/a/10683052/1913737)，接受的答案表明您应该使用以下命令进行安装：

> cd /usr/local/meteor/lib/ && npm install

但是 process.env 告诉我 $NODE_PATH 是`/usr/lib/meteor/lib/`

这是否意味着安装节点模块（供本地使用，例如 Chai）的正确位置现在`/usr/lib/meteor/lib/`不是`/usr/local/meteor/lib/`？

大多数关于此的问题都是在 2012 年 4 月/5 月提出的，而在 2012 年 6 月中旬，似乎对 NODE_PATH 的设置方式进行了更改。[https://github.com/meteor/meteor/commit/b7632579296257c10bf640a5f00716c3d440de71](https://github.com/meteor/meteor/commit/b7632579296257c10bf640a5f00716c3d440de71)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:12:24.230

.meteor/local/build/server/node_modules 是指向您需要安装模块的目录的符号链接。

# node.js - 转码和流式传输音频 - 如何发送内容范围标头

> ID：14304642
> 
> 赞同：4
> 
> 时间：2013-01-13T14:55:29.420
> 
> 标签：node.js, audio, stream, streaming, audio-streaming

`Content-Range`快速版本：不知道正文长度时如何发送正确的标题？

我有一个 FLAC 文件。我想将其转码为 MP3 并立即流式传输给用户。到目前为止，我有这样的事情：

```
function transcode(file) {
  var spawn = require('child_process').spawn

  var decode = spawn('flac', [
    '--decode',
    '--stdout',
    file
  ])

  var encode = spawn('lame', [
    '-V0',
    '-',
    '-'
  ])

  decode.stdout.pipe(encode.stdin)

  return encode
}

var express = require('express')
var app = express()

app.get('/somefile.mp3', function (req, res) {
  res.setHeader('Accept-Ranges', 'bytes')
  res.setHeader('Content-Range', 'bytes')
  res.setHeader('Content-Type', 'audio/mpeg')
  transcode(file).stdout.pipe(res)
}) 
```

这按预期工作，但它是“流式传输”，所以我不能跳过。显然我需要做点什么`Content-Range`。使用：[https ://github.com/visionmedia/node-range-parser](https://github.com/visionmedia/node-range-parser)

```
function sliceStream(start, writeStream, readStream) {
  var length = 0
  var passed = false

  readStream.on('data', function (buf) {
    if (passed) return writeStream.write(buf);

    length += buf.length

    if (length < start) return;

    passed = true
    writeStream.write(buf.slice(length - start))
  })

  readStream.on('end', function () {
    writeStream.end()
  })
}

var parseRange = require('range-parser')

app.get('/somefile.mp3', function (req, res) {
  var ranges = parseRange(Infinity, req.headers['range'])

  if (ranges === -1 || ranges === -2) return res.send(400);

  var start = ranges[0].start

  res.setHeader('Accept-Ranges', 'bytes')
  res.setHeader('Content-Type', 'audio/mpeg')

  if (!start) {
    res.setHeader('Content-Range', 'bytes')
    transcode(file).stdout.pipe(res)
    return
  }

  res.setHeader('Content-Range', 'bytes ' + start + '-')
  sliceStream(start, transcode(file).stdout, res)
}) 
```

这就是我卡住的地方。由于我不会等到整首歌曲被编码，所以我不知道歌曲的大小。由于我刚刚在 Chrome 中获得“取消”，我假设`Content-Range`标题格式不正确，没有大小。

另外，我目前只是在浏览器中打开这首歌，所以我假设它使用了该`<audio>`元素。

建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T18:13:12.993

是的，您的`Content-Range`标题格式不正确，没有大小。但是，您*可以*尝试发送您的服务器已经转码的当前大小。虽然我怀疑 Chrome 是否会优雅地处理不断变化的大小……</p>

[您没有处理许多事情](http://benramsey.com/blog/2008/05/206-partial-content-and-range-requests/)：

1.  您似乎没有发送[`206 Partial Content`](https://www.rfc-editor.org/rfc/rfc2616#section-10.2.7)状态（也许这是由图书馆处理的，不确定）。
2.  看起来您甚至没有检查范围请求的结尾部分。Chrome 通常不会发送除 之外的任何内容`0-`，但其他浏览器会发送。事实上，有些人可能会在一个请求中发送多个范围（支持的皇家痛苦）。
3.  您没有发送正确的`Content-Range`响应标头，因为您也没有包含您正在发送的内容的结束索引。它应该如下所示：
    `Content-Range: bytes 0-2048/3980841`
4.  最后，如果客户端发出一个超出范围的范围请求——也就是说，没有一个范围值与资源的范围重叠——服务应该响应一个[`416 Requested Range Not Satisfiable`](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.17)状态。

**编辑：**我没有测试过这种特殊情况，但是如果您从 FLAC 转码为 192kbps CBR MP3，我想如果您发送的内容长度*稍微*不准确（关闭小于 1000 位）：

*   音频的最后会被播放器剪掉。大约 1000 位会剪辑大约**5ms**的音频（对人类来说并不明显）。
*   浏览器将忽略结束索引或内容长度，并简单地继续接受和/或请求超出`Content-Range`您最初响应的范围，直到您关闭连接或发送 416 状态。
*   The missing/erroneous end of the audio may cause the `<audio>` to throw a `MEDIA_ERR_NETWORK` or a `MEDIA_ERR_DECODE` error that you'd simply have to handle gracefully. (The audio would still be clipped in this case.)

# html - Facebook 推荐框显示在其他项目之上

> ID：14304649
> 
> 赞同：0
> 
> 时间：2013-01-13T14:55:53.573
> 
> 标签：html, facebook-recommendations

我在我的网站 www.letralia.com 中使用 Facebook 推荐框。直到几周前它才能正常工作。现在，该框显示在页面中的其他项目之上。

怎么了？

提前致谢，

Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:02:46.637

只是为了让您知道这正在其他地方发生。我的网站（thisisxbox.com）也存在推荐框重叠的问题（尽管位于 div css inlne-block 等内部）并且随机消失。facebook 开发人员网站上已将其报告为错误，因为问题来自他们，而不是您对样式所做的任何事情。

它被认为是一个温和的问题，Facebook 正在调查这个错误......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:43:48.033

尝试在插入 facebook 插件的“div”结尾之前插入一些内容.. 或者 clear 可以提供帮助。

```
<div class="avisoderecha"><INSERTED FB PLUGIN CODE><span>&nbsp;</span></div> 
```

或者

```
<div class="avisoderecha"><INSERTED FB PLUGIN CODE><div style="clear:left;"></div></div> 
```

或为该框设置固定高度

```
<div class="avisoderecha" style="height:460px;"><INSERTED FB PLUGIN CODE></div> 
```

# wpf - 绑定到没有名称的堆栈面板中的其他元素

> ID：14304650
> 
> 赞同：2
> 
> 时间：2013-01-13T14:55:59.493
> 
> 标签：wpf, binding

我`DataTemplate`在 WPF 中创建一个，所以如果我使用`x:Name`. 这是我的代码的相关部分：

```
<DataTemplate>
    <StackPanel>
        <Image .../>
        <Textbox Width={Binding to image?, Path=ActualWidth} />
    </StackPanel>
</DataTemplate> 
```

如何在不使用名称的情况下绑定到图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:43:58.443

您可以使用`RelativeSource`：

```
<DataTemplate>
      <StackPanel>                        
          <Image Source="{Binding Photo}"/>
          <TextBox Width="{Binding Path=Children[0].ActualWidth, Mode=OneWay, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=StackPanel, AncestorLevel=1}}" />
       </StackPanel>
</DataTemplate> 
```

您不能直接绑定到 Image，但您可以使用`StackPanel`和属性 Children 来做到这一点。

# ios - Cocos2d 2.0 中“self.isTouchEnabled”的替代方法是什么？

> ID：14304652
> 
> 赞同：21
> 
> 时间：2013-01-13T14:56:07.167
> 
> 标签：ios, cocos2d-iphone

当我使用

```
self.isTouchEnabled = YES 
```

在`Cocos2d v2.0`图层可以被触摸时，Xcode 给了我一个提示：

```
setIsTouchEnabled: is deprecated 
```

现在，我只想知道 isTouchEnabled 的替代方法。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-13T15:27:23.837

这是新代码：

```
 self.touchEnabled = YES; //In Cocos2d 2.0

    self.userInteractionEnabled = YES; //In Cocos2d 3.0 
```

只是想知道为什么**天才们（Cocos2d 团队）**会做出这种**愚蠢的改变**！

但这是在 Cocos2d 2.x 及更高版本中设置触摸的正确调用！！！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-23T20:44:37.267

现在似乎`setIsTouchEnabled`位于“CCDeprecated.h”中。

以下方法在当前的“CCLayer.h”中：

```
[self setTouchEnabled:YES] 
```

# c# - C# 已建立的连接被主机中的软件中止

> ID：14304658
> 
> 赞同：59
> 
> 时间：2013-01-13T14:56:29.850
> 
> 标签：c#, sockets, network-programming

这些错误在我的游戏服务器上越来越频繁。它们导致服务器不断关闭并重新启动......

```
System.Net.Sockets.SocketException (0x80004005): An established connection was aborted by the software in your host machine 
   at System.Net.Sockets.Socket.BeginSend(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags, AsyncCallback callback, Object state) 
   at iRP.Game.Sessions.Session.SendData(Byte[] Data) 
```

这是生成这些错误的代码：

```
public void SendData(byte[] Data)
{
    try
    {
        if (mSocket == null)
        {
            //Output.WriteLine("[SND] Socket has a null exception, which means it is now invalid. Remove this socket!", OutputLevel.CriticalError);
        }
        else
        {
            mSocket.BeginSend(Data, 0, Data.Length, SocketFlags.None, sendCallback, mSocket);
        }
    }
    catch (Exception e)
    {
        string WhatToWrite = "Error handled (SESSION): " + e.ToString() + "\n\n" + e.Message + "\n\nStack: " + e.StackTrace + Environment.NewLine + "\n\n";
        File.AppendAllText(Environment.CurrentDirectory + "\\data\\fatal.txt", WhatToWrite);
        Program.Stop();
    }
} 
```

缓冲区大小设置正确，我们在套接字上使用 KeepAlive 并使用发送和接收超时。

人们建议禁用防火墙会有所帮助，但每当我这样做时，我们的游戏服务器（专用服务器）都会重新启动，就好像它受到攻击一样，所以防火墙必须保持启用状态。

其他人对此有任何其他解决方案吗？

PS：我们支持 DDoS 缓解服务，这可能会限制连接数......

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-01-13T16:28:16.673

> 已建立的连接被主机中的软件中止

这是一个样板错误消息，它来自 Windows。底层错误代码是 WSAECONNABORTED。这实际上并不意味着“连接被中止”。您必须对短语的“您的主机”部分小心一点。在绝大多数 Windows 应用程序中，确实是桌面应用程序连接到的主机中止了连接。通常是其他地方的服务器。

但是，当您实现自己的服务器时，角色会颠倒过来。现在您需要将错误消息阅读为“被线路另一端的应用程序中止”。当您实现服务器时，这当然并不少见，使用您的服务器的客户端程序无论出于何种原因都不太可能中止连接。这*可能*意味着防火墙或代理终止了连接，但这不太可能，因为它们通常不允许首先建立连接。

除非您了解线路另一端发生的情况，否则您并不真正知道为什么连接被中止。这当然很难得到。如果您的服务器可以通过 Internet 访问，那么不要忽视端口扫描器正在探测您的可能性。或者您的客户，正在寻找游戏作弊。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-12T05:26:53.270

如果两个软件使用相同的端口连接到服务器，则会出现此问题，
尝试根据您的操作系统通过 cmd 关闭该端口，
然后重新启动您的 Android Studio 或 Eclipse 或您的软件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-18T03:56:55.803

可能与最大并发请求数有关。我能够通过两种解决方案来修复它：

*   增加最大并发连接的默认限制（默认设置为`2`）：

```
ServicePointManager.DefaultConnectionLimit = 25 
```

*   将发送请求包裹在缓冲区周围：可用于`ConcurrentQueue`限制速率，或实现简单的等待，如下所示：

```
while (activeRequests >= maxConcurrentRequests)
    Thread.Sleep(1000);

Interlocked.Increment(ref activeRequests);
var response = await _client.GetStreamAsync(endpoint);
Interlocked.Decrement(ref activeRequests); 
```

# c++ - 在单独的线程中正确使用 Boost::asio

> ID：14304660
> 
> 赞同：1
> 
> 时间：2013-01-13T14:56:43.363
> 
> 标签：c++, multithreading, boost, boost-asio

我正在为[Orbiter 空间模拟器](http://orbit.medphys.ucl.ac.uk/)编写一个 DLL 插件，它允许与外部系统进行 UDP 通信。我为任务选择了 boost::asio，因为它允许我从低级的东西中抽象出来。

“边界条件”如下：

1.  我可以从我的 DLL 创建任何线程或调用任何 API 函数
2.  由于缺乏其他线程安全性，我只能在传递给我的 DLL（每帧）的回调中修改模拟内部的数据。

因此，我为用于通信的 NetworkClient 类选择了以下架构：

*   在构造时，它会初始化 UDP 套接字（boost::socket+boost::io_service）并启动一个线程，该线程调用 io_service.run()
*   传入消息被异步放入队列（通过 CriticalSection 线程安全）
*   回调处理函数可以从队列中拉取消息并进行处理

但是，我在运行实现时遇到了一些奇怪的异常： boost::exception_detail::clone_impl > at memory location 0x01ABFA00。

io_service.run() 调用中出现异常。

任何人都可以指点我，拜托，我错过了什么吗？我的课程的代码清单如下。

NetworkClient 声明：

```
class NetworkClient {
public:
    NetworkClient(udp::endpoint server_endpoint);
    ~NetworkClient();

    void Send(shared_ptr<NetworkMessage> message);
    inline bool HasMessages() {return incomingMessages.HasMessages();};
    inline shared_ptr<NetworkMessage> GetQueuedMessage() {return incomingMessages.GetQueuedMessage();};

private:
    // Network send/receive stuff
    boost::asio::io_service io_service;
    udp::socket socket;
    udp::endpoint server_endpoint;
    udp::endpoint remote_endpoint;
    boost::array<char, NetworkBufferSize> recv_buffer;

    // Queue for incoming messages
    NetworkMessageQueue incomingMessages;

    void start_receive();
    void handle_receive(const boost::system::error_code& error, std::size_t bytes_transferred);
    void handle_send(boost::shared_ptr<std::string> /*message*/, const boost::system::error_code& /*error*/, std::size_t /*bytes_transferred*/) {}
    void run_service();

    NetworkClient(NetworkClient&); // block default copy constructor
}; 
```

方法实现：

```
NetworkClient::NetworkClient(udp::endpoint server_endpoint) : socket(io_service, udp::endpoint(udp::v4(), 28465)) {
    this->server_endpoint = server_endpoint;
    boost::thread* th = new boost::thread(boost::bind(&NetworkClient::run_service,this));
    start_receive();
}

void NetworkClient::start_receive()
{
    socket.async_receive_from(boost::asio::buffer(recv_buffer), remote_endpoint,
        boost::bind(&NetworkClient::handle_receive, this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred)
    );
}
void NetworkClient::run_service()
{
    this->io_service.run();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:07:43.043

我可以看到您的架构没有任何问题。您应该捕获从 抛出的异常`io_service::run()`，这可能是您的问题的根源。

```
void NetworkClient::run_service()
{
    while(1) {
        try {
            this->io_service.run();
        } catch( const std::exception& e ) {
            std::cerr << e.what << std::endl;
        }
    }
} 
```

您还需要修复引发异常的任何内容。

# c++ - 在 OpenCV 中将浮点数转换为无符号字符

> ID：14304663
> 
> 赞同：1
> 
> 时间：2013-01-13T14:57:00.570
> 
> 标签：c++, image-processing, opencv, computer-vision

我使用 OpenCV 和 C++ 设计了一个水平一维向量形式的过滤器。该向量由浮点数据组成。灰度图像的原始uchar数据乘以这个浮点向量作为一维窗口得到结果。但是，我没有得到正确的结果。

当向量元素与图像像素值相乘时，超出了 0-255 的范围，我认为这会导致问题。

有没有办法将此浮点数据类型转换为 uchar 以获得正确的结果？

我现在正在使用`Img.at<uchar> = (uchar)(floatVector)`。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:40:56.087

我会建议您在乘以之后输入 cast...所以将您的`uchar`图像矩阵转换为`CV_32FC1`（因为您说它的灰度图像所以通道 = 1）...用您的过滤器对图像进行卷积然后输入 cast 值用于`uchar`显示可能是..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:57:43.713

您希望在浮点类型中执行乘法运算，并且仅在最后转换回无符号字符。不要忘记也将您的浮点向量归一化（所有值加起来为 1）

所以基本上你想要

Data.at(坐标) = (unsigned char) (floatVector(0)*(Data.at(coord0) + ... + FloatVector(last)*Data.at(coordLast))

# html - 将最小高度设置为 x 和屏幕高度之间的较高值

> ID：14304667
> 
> 赞同：0
> 
> 时间：2013-01-13T14:57:31.550
> 
> 标签：html, css

我有一个带有重复背景图像的页面，我想在整个页面内容后面展开。

所以我希望将 HTML 的高度设置为 600 像素或 100% 的屏幕——它们之间的最高值

（600px 是我的内容所需的最小高度，如果屏幕高度大于 600px，则为 100%，所以我想扩展我的 HTML 以适应它）

我试过

```
html
{
    min-height:600px;
    height:100%
} 
```

这是行不通的。

重复`background-image`在嵌套 div ( `#container`) 中，因为我的网站的宽度是有限的并且居中

```
#container
{
    width:1000px;  
height: 100%;
margin:0 auto;
background-image: url("/images/bg_content.png");
}

<body>
  <div id="container">
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:05:39.393

应用于正文，而不是 HTML

```
body { 
  min-height:600px; 
  height:100%;
} 
```

这个[小提琴](http://jsfiddle.net/LssZq/1/show/)的最小尺寸始终为 600px，但会在需要时扩展。

# vb.net - 如何将参数传递给水晶报表？

> ID：14304668
> 
> 赞同：0
> 
> 时间：2013-01-13T14:57:39.213
> 
> 标签：vb.net, parameters, crystal-reports-2010

我正在尝试使用 Crystal 中的参数过滤客户，方法是在`textbox`. 我为客户代码创建了一个参数，并尝试使用下面显示的代码传递它的值，但它不起作用。当我单击按钮时，它不仅显示过滤的客户，还显示所有客户：

```
Imports CrystalDecisions.CrystalReports.Engine
Imports CrystalDecisions.Shared

Public Class ParametroCrForm

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

        Dim relatorio As New ReportDocument

        relatorio.Load("C:\Users\Fernando e Flavia\Documents\Visual Studio 2010\Projects\Crystal.Estudo\Crystal.Estudo\CrystalReport1.rpt")

        Dim crParameterFieldDefinitions As ParameterFieldDefinitions
        Dim crParameterFieldDefinition As ParameterFieldDefinition
        Dim crParameterValues As New ParameterValues
        Dim crParameterDiscreteValue As New ParameterDiscreteValue

        If codigoTextBox.Text = "" Then
            MessageBox.Show("Digite um c�digo de cliente", "Aten��o", MessageBoxButtons.OK, MessageBoxIcon.Stop)
            Exit Sub
        End If

        crParameterDiscreteValue.Value = codigoTextBox.Text
        crParameterFieldDefinitions = relatorio.DataDefinition.ParameterFields
        crParameterFieldDefinition = crParameterFieldDefinitions.Item("codigoParametro")
        crParameterValues.Clear()
        crParameterValues = crParameterFieldDefinition.CurrentValues

        crParameterValues.Add(crParameterDiscreteValue)
        crParameterFieldDefinition.ApplyCurrentValues(crParameterValues)

        CrystalReportViewer1.ReportSource = relatorio
        CrystalReportViewer1.Refresh()

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:06:26.467

根据 ABZY 的解释，我必须在报告中添加选择公式。

在下面的链接中，解释了如何做到这一点：

[http://vb.net-informations.com/crystal-report/vb.net_crystal_report_parameter_string.htm](http://vb.net-informations.com/crystal-report/vb.net_crystal_report_parameter_string.htm)

再次感谢阿布兹！！

# jquery - 未捕获：调用 SetUploadURL 失败

> ID：14304674
> 
> 赞同：1
> 
> 时间：2013-01-13T14:58:01.420
> 
> 标签：jquery, uploadify

我正在尝试设置动态值来上传。但这给了我问题中提到的错误。

我想为`uploader`uploadify选项设置一个动态值。所以我做了以下事情：

```
$(function() {
    var uploader = $('.path').val() + '/uploadservlet?key=' + $('.key').val();

    $('.uploadify').uploadify({                        
        'buttonText' : 'Browse',
        'fileSizeLimit': 0,
        'swf': '../uploadify/uploadify.swf'
    });                    
    $('.uploadify').uploadify('settings', 'uploader', uploader);
}); 
```

但它给了我上述错误。我也试过这样称呼：

```
'onInit'   : function(instance) {
    $('.uploadify').uploadify('settings', 'uploader', uploader);
} 
```

但没有运气。任何指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T04:19:42.263

我也遇到了这个问题。错误消息具有误导性。

我调试并发现未定义`js`源异常。`__flash__argumentsToXML`根本原因是`swf`调用这个函数时没有准备好。

我将设置代码移到`onUploadStart`处理程序中，没关系。

# php - 使用 log4php 跟踪用户在 php 上的活动

> ID：14304680
> 
> 赞同：0
> 
> 时间：2013-01-13T14:59:03.540
> 
> 标签：php, mysql, log4php

![在此处输入图像描述](../Images/07a713857e563be22ca287066dc337d8.png)

我的系统已经有了一个简单的审计跟踪。但是我的教授想添加用户为审计跟踪所做的事情。我什至无法想象该怎么做。我发现 log4php [http://logging.apache.org/log4php/index.html](http://logging.apache.org/log4php/index.html) 我了解到它每次访问该站点都会生成一个文本文件。但是我如何将它合并到我已经在 mysql 中的表中并填写我页面中的活动列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:12:24.007

您的表无法存储此信息。我看到登录和注销时间戳的列，以及带有“活动”的内容，但您将生成的数据将是每个登录会话的多个活动。

此外，审计跟踪通常不会存储在可以轻松更改的系统中。

除非您想编写自己的附加程序，否则 Log4PHP 中包含的附加程序如下所述：[https ://logging.apache.org/log4php/docs/appenders/pdo.html](https://logging.apache.org/log4php/docs/appenders/pdo.html)

它详细介绍了如何定义存储表：

```
timestamp DATETIME
logger VARCHAR
level VARCHAR
message VARCHAR
thread VARCHAR
file VARCHAR
line VARCHAR 
```

每当您觉得您的代码应该在审核日志中生成一个条目时，您可能会获取审核记录器对象并向其发送消息：

```
Logger::get('audit')->info('Stuff happened'); 
```

这将创建一条日志消息，其中包含数据库所需的所有信息。此外，您可以使用 MDC 功能：您可以设置可能添加到日志消息中的永久信息。MDC 是“映射诊断上下文”的缩写，可以将“当前用户”等值添加到消息中。

但这只有在您配置包含此 MDC 值的正确日志消息格式时才会发生。配置可能通过 LoggerLayoutPattern 进行，有关详细信息，请参阅[https://logging.apache.org/log4php/docs/layouts/pattern.html](https://logging.apache.org/log4php/docs/layouts/pattern.html)。

底线：如果您到目前为止还没有将 Log4PHP 用于通用应用程序日志记录，我宁愿不为审计日志记录添加 Log4PHP。它是一个功能强大的工具，但我发现在尝试使其完美适合您当前的用例时存在许多问题。如果您自己进行审计日志记录，对您来说似乎更容易，因为您可以在数据库中包含您需要的所有信息。

# java - 基于字典的字符串匹配算法 - Java

> ID：14304684
> 
> 赞同：0
> 
> 时间：2013-01-13T14:59:28.420
> 
> 标签：java, algorithm, similarity

Java中是否有任何基于字典的字符串匹配算法？

可以根据字典给出两个字符串之间相似性百分比的东西？

像

```
 public double getSimilarity(String str1, String str2); 
```

实现如下：

```
 getSimilarity("Professor", "Teacher") 
```

会给出很高的百分比吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:27:35.463

Shaul Markovitch 和 Evgeniy Gabrilovich 完成了一项伟大的工作，在他们的文章中进行了描述：[基于 Wikipedia 的自然语言处理语义解释](http://www.cs.technion.ac.il/~shaulm/papers/abstracts/Gabrilovich-2009-WBS.html)。

思路如下：索引维基百科（或其他上下文来源）。
为每个术语（单词）创建一个映射：`term -> articles in which the term appears in`.

每个术语基本上由一个*向量*表示——为简单起见，假设它是一个二进制向量——因此对于该术语，当且仅当该术语出现在文档中时`t`，条目`d`才会为“1” 。`t``d`

现在，给定这些向量 - 找出两个术语`t1`,`t2`是否相似 - 你所要做的就是获取表示和的两个向量的*向量相似度*。`t1``t2`

* * *

注意：二进制向量是一种简化，实际上这篇文章使用了[tf-idf](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)分数，即该术语`t`在文档中的分数`d`。

# cocoa - 在用户默认值中存储语音 - Cocoa

> ID：14304685
> 
> 赞同：0
> 
> 时间：2013-01-13T14:59:53.013
> 
> 标签：cocoa, nsuserdefaults, voice, speechsynthesizer

我想在用户默认值中存储语音。既然我们不能直接存储语音，那么存储它的最佳方式是什么？`[NSSpeechSynthesizer availableVoices]`安装新语音后，使用数组中的索引可能会有所不同。`NSData`那么使用它的标识符转换为或存储呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:07:06.347

是的，索引是一个非常糟糕的主意。我用`[[NSSpeechSynthesizer attributesForVoice: voice] objectForKey: NSVoiceName]`.

# c# - 让一个类识别并循环它自己的属性

> ID：14304686
> 
> 赞同：0
> 
> 时间：2013-01-13T15:00:14.790
> 
> 标签：c#, sql, ado.net

我不确定这个问题的标题是否对任何人都有意义。

我的代码中的每个类都代表一个 SQL Server 数据库中的表，类属性是数据字段。我有几种方法对我编写的大多数类都是通用的，即 Populate、Update、Save 等。到目前为止还没有什么新东西。

然而，在开发周期中，甚至在我的软件实施之后，相对常见的情况是需要在其中一个表中添加一个额外的字段，从而在相应的类中添加一个额外的属性。这意味着我必须通过 Populate、Update、Save 方法来添加新字段，例如：-

```
private void Save()
{
   SqlConnection linkToDB = new SqlConnection(connString);
   linkToDB.Open();
   string sqlText = "INSERT INTO table (ID, Field1, Field2) VALUES (@ID, @Field1, @Field2);";
   SqlCommand sqlCom = new SqlCommand(sqlText, linkToDB);
   sqlCom.Parameters.Add("@ID", SqlDbType.Int).Value = this._id;
   sqlCom.Parameters.Add("@Field1",SqlDbType.VarChar).Value = this._field1;
   sqlCom.Parameters.Add("@Field2", SqlDbType.VarChar).Value = this._field2;
   sqlCom.ExecuteNonQuery();
   linkToDB.Close();
   linkToDB.Dispose();
} 
```

图像需要向这个我的类添加一个新字段，因此上面的 SAVE 方法需要修改 sqlText，sqlCom 添加一个新参数。需要对我的 UPDATE 和 POPULATE 方法以及具有与 Class 属性对应的完整参数集的任何其他方法进行相同的更改。

所以我的问题是这个。. .

有没有办法让一个类识别并遍历它自己的属性，并为每个属性创建正确类型的参数。我确实启动了一些代码（我知道它不会编译），但我被卡住了。这是我起床的地方。

```
private void Populate()
{
   SQLExpress exp = new SQLExpress();
   using (SqlConnection linkToDB = exp.DatabaseConnection)
   {
      string sqlText = "SELECT * FROM " + this._table + " WHERE ID = @ID;";
      SqlCommand sqlCom = new SqlCommand(sqlText, linkToDB);
      linkToDB.Open();
      using (SqlDataReader reader = sqlCom.ExecuteReader())
      {
         while (reader.Read())
         {
             Type type = this.GetType();
             foreach (PropertyInfo propertyInfo in type.GetProperties())
             {
                 string propName = propertyInfo.Name;
                 Type propType = propertyInfo.GetType();

                 //this.propName = (propType)reader[propName];
                 //Type propType = propertyInfo.GetType();                            
             }
         }
      }
   }
} 
```

有没有人可以提供任何建议我如何在这里实现我的编码目标？我应该以一种完全不同的方式来解决这个问题吗？还是我想要实现的目标根本不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:15:04.500

你走对了。拥有 PropertyInfo[] 后，您可以读取（或写入）该属性的值：

```
foreach (PropertyInfo propertyInfo in type.GetProperties())
{
  var propertyValue = propertyInfo.GetValue(this);
  propertyInfo.SetValue(this, new_value);
} 
```

就这样。顺便说一句，就像其他人说的那样，您尝试做的事情并不像看起来那么容易，并且有很多工具已经在做这种想法：它们是 ORM。看看 EntityFramework 或 NHibernate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:07:59.553

对于这些类型的 1 对 1 CRUD 操作，我更喜欢使用 ORM。它处理所有映射，甚至可以在自动将新字段添加到数据库时更新您的模型（类）。

您是否将其作为一种选择进行了探索，也许是[Entity Framework](http://msdn.microsoft.com/en-US/data/ef)？那里有很多不同的 ORM——只要快速搜索一下。

祝你好运。

# c++ - 添加对 boost::fusion::vector 的引用

> ID：14304688
> 
> 赞同：2
> 
> 时间：2013-01-13T15:00:38.407
> 
> 标签：c++, visual-c++, boost-fusion

我想创建一个引用变量的提升融合向量。目标是将不同数量的参数传递给函数并将它们添加到融合向量中。由于引用类型，我使用 TMP 一次添加每个元素。但有时融合向量中的某些元素是错误的。这似乎是未定义的行为（错误的值，读取访问冲突）。
我写了一个示例，在其中我“展开”了 TMP 中使用的递归以便于理解。它只是简单地添加两个对融合向量的引用并输出结果：

```
#include <iostream>

#include <boost/ref.hpp>
#include <boost/fusion/algorithm.hpp>
#include <boost/fusion/container.hpp>

using namespace boost;
using namespace boost::fusion;

//add second element
template <typename T>
vector<int&, double&> createVector2(T vec, double& v2) {
     auto newVector = join(vec, make_vector(ref(v2)));
     return newVector;
}

//add first element
template <typename T>
vector<int&, double&> createVector(T vec, int& v1, double& v2) {
     auto newVector = join(vec, make_vector(ref(v1)));
     return createVector2(newVector, v2); 
}

int main() {
     int v1 = 10;
     double v2 = 15.3;

     vector<> vec;
     auto ret = createVector(vec, v1, v2);

     std::cout << at_c<0>(ret) << std::endl;
     std::cout << at_c<1>(ret) << std::endl;

     if (at_c<0>(ret) != v1) {
         std::cout << "FAILED" << std::endl;
     }

     if (at_c<1>(ret) != v2) {
         std::cout << "FAILED" << std::endl;
     }

     return 0;
} 
```

当访问 boost fusion 向量中的引用（读取访问冲突）时，程序崩溃，首先在此行：

```
std::cout << at_c<0>(ret) << std::endl; 
```

我使用 VC11 作为编译器（版本 17.00.51106.1）。该错误仅在发布模式下。但是当我使用 VC10、GCC 4.7.0 或 GCC 4.7.2 时，没有错误，程序运行良好。
要让程序与 VC11 一起工作，我必须更改这一行

```
auto newVector = join(vec, make_vector(ref(v1))); 
```

到

```
auto newVector = as_vector(join(vec, make_vector(ref(v1)))); 
```

那么，上面的示例是否包含错误或 VC11 优化器有问题？是否允许将本地 boost 融合视图（boost::fusion::join 仅返回一个视图，并且该视图通过 boost::fusion::vector 转换为“正常” boost::fusion::vector）到另一个按价值运作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:01:11.603

我在 Microsoft connect ([链接](https://connect.microsoft.com/VisualStudio/feedback/details/776473/adding-references-to-a-boost-fusion-vector-failed)) 提交了一份错误报告。所以我的问题的答案是我的代码中有一个错误。

问题是join函数返回一个boost fusionjoint_view，里面包含seq1和seq2这两个元素。它们被定义为：

```
template <typename Sequence1, typename Sequence2>
struct joint_view : sequence_base<joint_view<Sequence1, Sequence2> >
{
    (...)
private:
    typename mpl::if_<traits::is_view<Sequence1>, Sequence1, Sequence1&>::type seq1;
    typename mpl::if_<traits::is_view<Sequence2>, Sequence2, Sequence2&>::type seq2;
}; 
```

我的代码的问题是我将一个临时对象（从 make_vector 返回）传递给了 join 函数。boost 融合向量不是视图，seq1 和 seq2 是参考。所以join函数返回一个joint_view，其中包含一个临时对象的引用，这是无效的。有两个修改可以解决这个问题：

1.  第一个解决方案（与 createVector 相同）：

    ```
    template <typename T>
    vector<int&, double&> createVector2(T vec, double& v2) {
        auto x = make_vector(ref(v2));
        auto newVector = join(vec, x);
        return newVector;
    } 
    ```

    现在 join 返回一个joint_view，其中包含对x 的引用，这是有效的。最后，将视图转换为增强融合向量并解析参考。

2.  第二种解决方案（与 createVector 相同）：

    ```
    template <typename T>
    vector<int&, double&> createVector2(T vec, double& v2) {
        return join(vec, make_vector(ref(v2)));
    } 
    ```

    临时对象（由 make_vector 返回）的生命周期是整个 return 语句，并且在第一个版本中，视图将转换为 boost 融合向量并再次解析引用。

感谢提供这两个解决方案的 Eric Brumer (Microsoft)。

**结论**：不要将临时对象传递给 boost fusion join 函数（仅当它是另一个视图时）。

# ruby-on-rails-3 - 覆盖 Rails 表单中的表单字段值

> ID：14304696
> 
> 赞同：4
> 
> 时间：2013-01-13T15:01:18.040
> 
> 标签：ruby-on-rails-3

**注意：**当我最初问这个问题时，我想得太多了。对于我给出的示例，接受的答案是正确的 - 即您可以只传递`:value`给 text_field，但实际上我遇到了问题`date_select`，它没有覆盖值集的工具。

因此，这已在 Rails 中更新，因此您可以设置`:selected => a_date`，它会按预期工作。这将在 Rails 4 中。

* * *

我有一个可以从父模型继承其值的模型。它的工作原理是这样的：

```
class User < ActiveRecord::Base
  attr_accessible :field_name

  belongs_to :company

  def field_name
    if self['field_name'].nil?
      company['field_name']
    else
      self['field_name']
    end
  end

end

class Company < ActiveRecord::Base
  attr_accessible :field_name
end 
```

然后我有一个表单来编辑用户，但是当然，如​​果用户值为 nil，那么它会使用来自 Company 的值填充表单，这不是我想要的。

我希望能够覆盖表单字段的值，这样如果 User 值为 nil，则该值为空。

**尝试 1**

理想情况下，我能够做到：

```
<%= form_for @user do |f| %>
   <%= f.text_field :field_name, @user['field_name'] %>
<% end %> 
```

但这不起作用，似乎没有提供覆盖值的机制。

**尝试 2**

所以我想创建第二个getter/setter：

```
def field_name_uninherited
  self['field_name']
end

def field_name_uninherited=(value)
  self['field_name']=value
end 
```

现在我可以使用`<%= f.text_field :field_name_uninherited %>`它了，它按预期工作 - 太棒了！**除外：**当`field_name`是日期，或者其他使用多参数属性的类型时，会导致这个错误：

```
1 error(s) on assignment of multiparameter attributes 
```

我相信这是因为它不知道这是一个日期字段，因为它是从数据库中推断出来的，并且该字段（带有 _uninherited 后缀）不在数据库中。

*所以我需要一些方法来将我的附加方法标记为与原始数据库字段相同的类型。*

* * *

进一步说明，上述示例（使用 field_name）是简化版本。我实际上是在使用[https://github.com/colinbm/inherits_values_from](https://github.com/colinbm/inherits_values_from)来处理继承，但我认为这对这个问题并不重要。

* * *

显然，如果有更好的方法来实现相同的目标，那么我会全力以赴。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-13T16:35:19.137

因此，当涉及到为用户显示您的价值时，您希望它的行为有所不同吗？

我要做的是在`:value`您的表单字段中使用该选项。这样您就可以像正常一样设置值，但选择您希望在表单字段中显示的内容。

```
<%= f.text_field :company, :value => user.field_name_uninherited %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:38:29.237

据我了解，您希望用户放置字段数据，并且仅当它为 nil 时，才使用父（公司）模型填充该值。在我看来，它`before_save`工作得很好，因为它是在 ActiveRecord 对象上调用 save 方法之前调用的（正如它的名字所建议的那样）。因此，您可以编写这种回调：

```
 class User < ActiveRecord::Base
      attr_accessible :field_name

      before_save :override_field

      private
        def override_field
          if self.field_name.nil?
            self.field_name = company.field_name
          end
        end 
```

这样，只有在保存时它为 nil 时，您才会覆盖该值，在创建新元素时将该表单字段留空。希望这有效！

# windows-runtime - WinRT 隔离存储的最大大小（MB）是多少？

> ID：14304698
> 
> 赞同：0
> 
> 时间：2013-01-13T15:01:51.393
> 
> 标签：windows-runtime

在 Windows Phone 7 中，独立存储的最大大小为 90 MB。Windows 运行时应用程序的隔离存储大小是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:18:53.570

只有磁盘是 LocalSettings/Folder 的限制

100k 是 RoamingSettings/Folder 的限制

[快速入门：本地应用程序数据](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh700361%28v=win.10%29.aspx)

# php - 命名空间有什么意义？

> ID：14304699
> 
> 赞同：-1
> 
> 时间：2013-01-13T15:02:04.390
> 
> 标签：php, namespaces

> **可能重复：**
> [什么是命名空间？](https://stackoverflow.com/questions/3384204/what-are-namespaces)

据我了解，命名空间允许您在脚本中的不同命名空间内拥有同名的函数/变量。

```
namespace productions\active;
class Slayer 
{
    function Username ()
    {
        $Username = "Test";
        return $Username;
    }
}
namespace productions\experimental;
class Slayer
{
    function Username()
    {
        $Username = "Experiemental"; 
        return $Username;
    }
} 
```

但这提供了什么功能？

**此外，如果我的类中有公共函数并且“存在”在命名空间中，会发生什么情况？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T15:04:51.647

如果您必须在同一个项目中使用具有相同类名的两个库，那将是显而易见的（是的，这可能会发生）。使用命名空间，您可以为其中一个创建别名，并在不考虑库核心的情况下使用两者。

# sql - 交叉连接但只选择第一个

> ID：14304701
> 
> 赞同：1
> 
> 时间：2013-01-13T15:02:15.870
> 
> 标签：sql, sql-server, sql-server-2012

我有以下格式的表格：

```
 Time            Quantity
    10:01:01.000    100
    10:01:01.001     50
    10:01:01.002      0
    10:01:01.003    100
    10:01:03.001    100 
```

请注意，我已根据时间订购了上述行。

我想交叉加入（或任何其他加入），以便加入仅在第一次高于当前时间而不是全部时发生。我的最终结果如下所示：

```
 Time            Quantity   Time2            Quantity2
    10:01:01.000    100        10:01:01.001     50
    10:01:01.001     50        10:01:01.002      0
    10:01:01.002      0        10:01:01.003    100
    10:01:01.003    100        10:01:03.001    100
    10:01:03.001    100        NULL            NULL 
```

该表有 4200 万行和 10 列。所以，我正在寻找有效的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T15:28:35.043

当您使用`SQL Server 2012`时，您可以使用[`LEAD`](http://msdn.microsoft.com/en-us/library/hh213125.aspx)

```
SELECT  a.Time,
        a.Quantity,
        LEAD(Time) OVER (ORDER BY Time) Time2,
        LEAD(Quantity) OVER (ORDER BY Time) Quantity2
FROM    tableName a 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!6/fc2b6/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:26:35.503

如果时间是独一无二的，这会让你继续前进：

```
SELECT t1.*, t2.*
FROM myTable t1
LEFT JOIN myTable t2
    ON  t1.time < t2.time
WHERE NOT EXISTS (
           SELECT * FROM 
               myTable t3
           WHERE t3.time > t1.time AND t3.time < t2.time) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T15:11:50.207

```
SELECT zt.* , nxt.*
FROM ztable zt
LEFT JOIN ztable nxt ON nxt.ztime > zt.ztime
WHERE NOT EXISTS (
    SELECT *
    FROM ztable nx
    WHERE nx.ztime > zt.ztime
    AND nx.ztime < nxt.ztime
    ); 
```

结果：

```
 ztime     | quantity |    ztime     | quantity 
--------------+----------+--------------+----------
 10:01:01     |      100 | 10:01:01.001 |       50
 10:01:01.001 |       50 | 10:01:01.002 |        0
 10:01:01.002 |        0 | 10:01:01.003 |      100
 10:01:01.003 |      100 | 10:01:03.001 |      100
 10:01:03.001 |      100 |              |         
(5 rows) 
```

# html - 列表项下方的这个空白是从哪里来的？

> ID：14304708
> 
> 赞同：3
> 
> 时间：2013-01-13T15:03:56.253
> 
> 标签：html, css

当我预览它时，它不会出现在 safari 中，但它会出现在其他浏览器中。

[这是 jsfiddle](http://jsfiddle.net/8y2t2/24/)。

您可以看到“投资组合”列表项在每个项下都有大约 2 个像素的空白。这是从哪里来的？我已将填充和边距设置为 0 和 nowrap 但无法找出任何其他原因......任何想法？

```
* { 
    margin:0; 
}
html, body { 
    height:100%; 
}
body {
    background-color:#fff;
}
#leftnav {
    background-color:#232323;
    width:20%;
    min-height:100%;
    height: auto !important;
    float:left;
    text-align:center;
    padding:75px 0 0px 0px;
    position:fixed;
    left:0;
    top:0;
}
#portfolio {
    white-space: nowrap;
    text-align:center;
    margin:0;
    width:80%;
    float:right;
}
#portfolio ul {
    margin:0;
    padding:0;
}
#portfolio li {
    width: 25%;
    display: inline-block;
    text-align: center;
    vertical-align: middle;
    margin:0;
    padding:0;
    float:left;
}
#portfolio img {
    max-width:100%;
    margin:0;
    padding:0;
}
#maintop {
    width:80%;
    height:45%;
    background-color:#caab7e;
    float:right;
    text-align:center;
}

<body>
<div id="leftnav"></div>
<div id="maintop"></div>
<div id="portfolio">
<ul>
    <li><img src="http://dummyimage.com/400x300/000/fff"></li>
    <li><img src="http://dummyimage.com/400x300/090/fff"></li>
    <li><img src="http://dummyimage.com/400x300/900/fff"></li>
    <li><img src="http://dummyimage.com/400x300/009/fff"></li>
    <li><img src="http://dummyimage.com/400x300/000/fff"></li>
    <li><img src="http://dummyimage.com/400x300/090/fff"></li>
    <li><img src="http://dummyimage.com/400x300/900/fff"></li>
    <li><img src="http://dummyimage.com/400x300/009/fff"></li>
    <li><img src="http://dummyimage.com/400x300/000/fff"></li>
    <li><img src="http://dummyimage.com/400x300/090/fff"></li>
    <li><img src="http://dummyimage.com/400x300/900/fff"></li>
    <li><img src="http://dummyimage.com/400x300/009/fff"></li>
</ul>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T15:25:10.580

它来自字体大小/行高。要么添加：

```
#portfolio li {
  font-size: 0;
} 
```

或者：

```
#portfolio li {
  line-height: 0;
} 
```

导致[这个更新的小提琴](http://jsfiddle.net/8y2t2/27/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:16:04.330

我也不知道那个空白是从哪里来的，但是你可以设置`li{ height: 87px; }`它会使空白消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T15:27:04.830

Opera浏览器也没有空间。我正在使用firebug插件在firefox中检查它，我可以看到img的高度是285px，li的高度是290px。现在，当我为 li 添加高度 285px 时，空间消失了。

```
#portfolio li {
width: 25%;
display: inline-block;
text-align: center;
vertical-align: middle;
margin:0;
padding:0;
float:left;
height: 285px;
} 
```

# javascript - 我的 javascript while 循环在第一次提示后停止

> ID：14304709
> 
> 赞同：0
> 
> 时间：2013-01-13T15:04:24.723
> 
> 标签：javascript, loops, while-loop

有人可以告诉我为什么我的脚本不会进入第二个问题吗？我已经检查了 Firefox 控制台，它没有显示任何语法错误，所以我有点卡在这里。

先感谢您。

这是我的脚本：

```
<head>
<script type="text/javascript" >
var vraag = new Array();
var cantwoord = new Array();

vraag[1] = "8x4=? ";
vraag[2] = "8/4=? ";
vraag[3] = "16x4=? ";

cantwoord[1]= "32";
cantwoord[2]= "2";
cantwoord[3]= "64";

function toets(index)
{
antwoord = prompt(vraag[index]);
if(antwoord == cantwoord[index])
{
return ("Correct");
}   
else
{
return ("Fout");    
}

}

</script>
</head>

<body>
<script type="text/javascript">
//<![CDATA[

var doorgaan = true;
var index = 0;
while(doorgaan)
{
index++;
resultaat = toets(index);
doorgaan = confirm(reultaat+" Wil je doorgaan ?");
if(index==3) break; 
}

//]]>
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:07:57.047

做这些修改：

```
//...
var resultaat = toets(index); // Add var before variable
doorgaan = confirm(resultaat+" Wil je doorgaan ?"); // reultaat --> resultaat 
if(index==3) break; 
//... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:13:21.470

除了一个拼写错误外，您的代码没有问题..应该是

```
`resultaat = toets(index);
doorgaan = confirm(resultaat+" Wil je doorgaan ?");` 
```

# android - 获取activity.Media player.Android传递的服务参数

> ID：14304710
> 
> 赞同：-1
> 
> 时间：2013-01-13T15:04:31.693
> 
> 标签：android, service, media-player

请帮帮我。我有一个活动类和服务类。活动包含很多按钮，所以当用户单击它时显示对应于按钮xml，它必须播放相应的声音。所以我通过putExtra将参数传递给服务，但我不能在服务类中获取它。我在 onStartCommand() 中获取它，但它不会创建或播放它（所以我不知道）。如何解决这个问题？谢谢。这是我的代码。活动.java

```
 public void onClick(View arg0) {
    if(arg0.getId()==R.id.Button01){
         id=arg0.getId();
        service = new Intent(this, MyService.class);
        service.putExtra("ButtonA", id);
                startService(service);

        setContentView(R.layout.button_a);

    } 
```

....服务.java

```
 public void onCreate() {}
 public int onStartCommand(Intent intent,int flags,int startId){
            Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
           onHandleCommand(intent);

            return START_STICKY;
            }

    private void onHandleCommand(Intent intent) {

       if(button.equals(intent.getStringExtra("ButtonA"))){
           player = MediaPlayer.create(this, R.raw.alma);
           player.setLooping(false); 
            } else if(button.equals(intent.getStringExtra("ButtonAE"))){
                player = MediaPlayer.create(this, R.raw.azhe);
                 player.setLooping(false); 
            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:09:37.627

对不起，我错过了重点，`onHandleCommand`是你自己的方法，你不能覆盖它。看起来你的问题在这里：

```
 if(button.equals(intent.getStringExtra("ButtonA"))) 
```

你在这里传递什么作为额外的意图？
您要比较什么？按钮和字符串？

# java - 从另一个 JFrame 遍历时，Key Listener 在 JFrame 中不起作用

> ID：14304711
> 
> 赞同：1
> 
> 时间：2013-01-13T15:04:32.767
> 
> 标签：java, swing, keylistener

我有2节课。

一个扩展画布并在内部创建一个 jframe 并将画布添加到该 jframe 并添加另一个 keyadapter 类来接收关键事件。我也有测试代码的主要功能。从 main 运行时，会显示表单并接收关键事件。

现在我创建了另一个扩展 jframe 并实现 keylistener 以接收这种形式的事件的类。

在第二类中完成功能后，我想关闭第二个表单并显示第一个表单。当从第二类的键事件函数中显示它时，第一类键侦听器不起作用。

请看一下我的代码并告诉我如何纠正我的问题。感谢您的宝贵时间和宝贵建议。

**1级**

```
public class Test extends Canvas {

private JFrame container;

public Test() {

    container = new JFrame("Space Invaders");
    JPanel panel = (JPanel) container.getContentPane();
    panel.setPreferredSize(new Dimension(screenSize.width, screenSize.height));
    panel.setLayout(null);
    setBounds(0, 0, screenSize.width, screenSize.height);
    panel.add(this);
    container.pack();
    container.setResizable(false);
    container.setVisible(true);

    try {

        addKeyListener(new KeyInputHandler(this));
    } catch (Exception e) {
        e.printStackTrace();
    }
    requestFocus();
}

private class KeyInputHandler extends KeyAdapter {

public void keyPressed(KeyEvent e) {
    //Some Action
}
public void keyReleased(KeyEvent e) {
    //Some Action
}
public void keyTyped(KeyEvent e) {
    //Some Action
}
}

public static void main(String args[]){
    //Running this canvas here works perfectly with all added keylisteners
}
} 
```

**2 级**

```
public class Sample extends JFrame implements KeyListener {

public Sample() {
    init();
    this.setSize(100, 100);
    this.setVisible(true);
    Sample.this.dispose();
            // Created a window here and doing some operation and finally redirecting
            // to the previous test window. Even now the test window works perfectly
            // with all keylisteners
    new Test();
}

public static void main(String[] args) {
    new Sample();

}

private void init() {
    addKeyListener(this);
}

@Override
public void keyTyped(KeyEvent e) {

}

@Override
public void keyPressed(KeyEvent e) {
    removeKeyListener(this);
    Sample.this.dispose();
            // But when calling the previous Test window here, the window 
            // gets displayed but the keylistener is not added to the 
            // window. No keys are detected in test window.
    new Test();
}

@Override
public void keyReleased(KeyEvent e) {

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T16:43:10.667

简单的不要使用`KeyListener`/`KeyAdapter`那是用于 AWT 组件并且在与 Swing 一起使用时已知焦点问题。

这些问题可以通过确保您的组件是可聚焦的，`setFocusable(true)`而不是`requestFocusInWindow()`在组件添加/可见后调用来解决。

而是将[`KeyBinding`s](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)用于 Swing。

例如说现在我们想监听`D`按下和释放：

```
public static void addKeyBindings(JComponent jc) {
    jc.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_D, 0, false), "D pressed");
    jc.getActionMap().put("D pressed", new AbstractAction() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            System.out.println("D pressed");
        }
    });

    jc.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_D, 0, true), "D released");
    jc.getActionMap().put("D released", new AbstractAction() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            System.out.println("D released");
        }
    });
} 
```

我们会这样称呼这个方法：

```
JPanel ourPanel=new JPanel();

...

addKeyBindings(ourPanel);//adds keybindings to the panel 
```

**其他代码建议**

*   `Event Dispatch Thread`始终通过`SwingUtilities.invokeLater(Runnable r)`块创建和操作 Swing 组件

*   `JFrame`不要不必要地扩展课程

*   不要在类上实现接口，除非该类将用于该目的，或者其他类需要访问接口方法。

*   正如@AndrewThompson 所提到的，不要使用多个`JFrame`s，要么将其余部分交换为`JDialog`，要么使用`CardLayout`. 有关示例，请参见[此处。](https://stackoverflow.com/questions/14011397/how-to-add-jpanel-by-clicking-jbutton/14012757#14012757)

# security - 从命令行确定 TLS/SSL 证书是否“受信任”？

> ID：14304713
> 
> 赞同：4
> 
> 时间：2013-01-13T15:04:33.660
> 
> 标签：security, ssl, openssl, certificate, phantomjs

我希望能够从命令行确定远程域的 TLS/SSL 证书是否“受信任”。

这是我几周前玩的一个 openssl 示例，这里我使用 openssl 获取证书，然后将其通过管道传递给 openssl 的“验证”命令。我假设“验证”命令将验证证书，但是，我现在的理解是“验证”命令只是验证证书链（我认为）。（cdn.pubnub.com 只是我从 Twitter 快速搜索中找到的一个域，作为示例使用）

```
echo "GET /" | openssl s_client -connect cdn.pubnub.com:443 | openssl x509 -text | openssl verify 
```

正如您从[cdn.pubnub.com](https://cdn.pubnub.com/)域中看到的（在撰写本文时），浏览器（至少 Chrome）不信任证书（因为证书域不匹配），但是，openssl 'verify'命令不输出“受信任”或“不受信任”或其他我们可以从中推断信息的内容。

我想到的另一种方法是使用无头浏览器（例如[PhantomJS](http://phantomjs.org/)）并解析它们返回的任何错误。事实证明，PhantomJS 只是错误但没有给出任何细节，因此不能使用，因为错误可能是由其他原因引起的。

我不认为从命令行找出证书是否受信任会这么难，而不必解析和检查使证书自己信任的所有数据，我认为这是不明智的。

是否有库或其他方式可以判断远程域的证书是否受命令行信任？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T15:26:08.957

`curl`(and `libcurl`) 对 https URL 使用 OpenSSL，并检查证书有效性，除非`-k, --insecure`启用了选项。

```
zsh 29354 % curl https://cdn.pubnub.com/
curl: (51) SSL peer certificate or SSH remote key was not OK 
```

如您所见，它没有详细说明证书无效的原因，但除此之外它应该与无头浏览器一样好，而且更轻巧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T10:53:52.330

这取决于您认为“受信任”的内容。除了核心加密检查（例如检查数字签名），客户端通常执行以下操作：

1.  检查证书链到受信任的根

2.  验证当前时间是否在 notValidBefore 和 not validAfter 属性之间。

3.  证书不会被吊销。

4.  keyUsage 和其他证书约束匹配。

5.  我们正在通信的实体以某种方式在证书的主题中找到（对于服务器，这通常意味着主机名被列为 CN 或 subjectAlternativeName）。

在您的情况下，缺少验证步骤 5 的信息（即主机名），因此无法检查。您必须自己执行此步骤。请注意，不同的客户端执行不同的检查以查看证书是否可信，因此一个答案可能不适用于所有可能的客户端。如果您想深入检查您的安装，请考虑使用来自 ssl 实验室的检查[https://www.ssllabs.com/ssltest](https://www.ssllabs.com/ssltest) /

# .net - 保护您的试用程序免受黑客攻击的最佳技术是什么？

> ID：14304714
> 
> 赞同：0
> 
> 时间：2013-01-13T15:04:44.450
> 
> 标签：.net, protection, disassembly

我正在开发一个 .NET 程序，它也有一些本地项目，我想发布它并具有试用功能。

我想到了“如何保护我的创作？”这个问题。而且我知道一些在线检查dll / exe校验和，写入注册表等的技术......但是可以通过反汇编以非常简单的方式删除上面的东西。

是否有一些新的保护方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:13:33.723

使用 .net 之类的架构，总是很容易（相对）有人反汇编 MSIL 并查看您的代码做了什么，然后绕过您的保护方案。如果您使用某种形式的代码混淆，这会使该过程更加困难，但没有办法完全阻止它的发生。

我想说，如果您担心公司“x”的普通员工窃取您的程序（即他们不应该有太多的编程/反汇编能力）。然后使用已经提到的方案之一；例如使用您已与机器 ID 连接并使用您的公钥加密的 DLL 之一的 SHA1 哈希打电话回家的程序。然后，您可以使用您的私钥在您的服务器上对此进行解密，检查 SHA1 哈希是否有效以及机器 ID 是否在您的“允许”用户列表中。没有它，只需停止程序运行。

然后，使用众多选项之一来混淆代码。我想你已经走得“足够远”了。

# jquery - jQuery为空但排除某个元素

> ID：14304717
> 
> 赞同：3
> 
> 时间：2013-01-13T15:04:57.620
> 
> 标签：jquery, jquery-selectors, selector, removechild

我尝试`empty()`使用 div 但排除特定选择器。

到目前为止我[已经尝试过：](http://fiddle.jshell.net/KLh4E/1/)

```
$('.modal').find('.close').nextAll().empty();
$('.modal').find(':not(.close)').empty();
$('.modal').not('.close').empty();
$('.modal:not(.close)').empty(); 
```

HTML：

```
<div class="modal">
  <a href="#" class="close">Close</a>
  ...I've the need to be removed...
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T15:22:12.777

可以这样做：

[http://fiddle.jshell.net/KLh4E/11/](http://fiddle.jshell.net/KLh4E/11/)

```
$(".modal").contents().filter(function(){
    return !$(this).is('.close');
}).remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T15:10:17.843

我不确定一个错误，但我能看到的最简单的方法是：

```
var el = $('.close');
$('.modal').empty().append(el); 
```

[JS 小提琴演示](http://fiddle.jshell.net/davidThomas/KLh4E/2/)。

更好的方法（在多个`.close`元素的错误假设下）：

```
$('.modal').each(
  function(){
    var that = $(this),
        el = that.find('.close');
    that.empty().append(el)
  }); 
```

[JS 小提琴演示](http://fiddle.jshell.net/davidThomas/KLh4E/4/)。

使用 jQuery`each()`和纯 JavaScript 函数的组合：

```
function fratricide(el) {
  while (el.previousSibling) {
    el.parentNode.removeChild(el.previousSibling);
  }
  while (el.nextSibling) {
    el.parentNode.removeChild(el.nextSibling);
  }
}

$('.close').each(

function() {
  fratricide(this);
}); 
```

[JS 小提琴演示](http://fiddle.jshell.net/davidThomas/KLh4E/10/)。

以及[JS Perf 方法的比较](http://jsperf.com/javascript-fratricide)。毫不奇怪，使用纯 JavaScript 可以明显加快速度，尽管我认为它读起来很丑（尽管我不确定它实际上会变得更漂亮）。

有趣的是（对我来说，无论如何，现在我已经更新了之前链接的 JS Perf）使用一个变量来存储引用的`el.parentNode`差异可以忽略不计，大概是因为尽管保存了对元素/节点的引用，但 DOM 仍然必须是访问以找到`el.previousSibling`节点？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T15:12:35.923

你可以试试这个：http: [//fiddle.jshell.net/KLh4E/3/](http://fiddle.jshell.net/KLh4E/3/)

```
var div = $('.modal').clone().find('a');
$('.modal').empty().html(div); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T15:13:18.650

jQuery 不匹配文本节点。您示例中的文本不被视为 .modal 中包含的节点；因此，它不能通过“选择除某些其他节点之外的所有节点”来删除。将文本包装成一个简单的`<span>` [就可以了](http://jsfiddle.net/KLh4E/9/)。

# javascript - 在javascript中检索页面的源代码

> ID：14304719
> 
> 赞同：0
> 
> 时间：2013-01-13T15:05:14.310
> 
> 标签：javascript, xmlhttprequest, cross-domain, greasemonkey

我正在制作一个greasemonkey脚本来从youtube结果中提取视频URL代码：我有这个：

```
// ==UserScript==
// @name        extract
// @namespace   here
// @include     http://stackoverflow.com/
// @grant GM_xmlhttpRequest
// @version     0.1
// ==/UserScript==

window.setTimeout(conseguir_articulos_youtube, 5000);

function conseguir_articulos_youtube(){

    GM_xmlhttpRequest({
        method: "GET",
        url: "http://www.youtube.com/results?search_sort=video_date_uploaded&uni=3&search_type=videos&search_query=humor",
        onload: on_load_extract              
    });
}

function on_load_extract(data){
    var datos=data.responseText;
    alert(datos);
} 
```

我使用 xmlHttpRequest 检索 youtube 的内容，但响应中存在的页面代码不完整。有一个表单可以在 javascript 中检索页面的完整源代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:20:23.273

看来您正在接收页面的整个源代码。问题是页面使用它自己的 AJAX 调用来进一步加载其他资源，从而给您留下一个“不完整”的页面版本。

我建议使用[YouTube API](https://developers.google.com/youtube/)进行 YouTube 集成，而不是抓取 HTML。

我自己从来没有使用过它，所以我不能给你一个快速的参考，但我相信它使用起来很简单。：） 希望能帮助到你！

# c# - 如何使用 C# 以编程方式向 Visio 图表添加主键

> ID：14304721
> 
> 赞同：2
> 
> 时间：2013-01-13T15:05:31.380
> 
> 标签：c#, vsto, visio

我想知道这是否可能。我正在使用 Visio 绘图控制 + MODELEg 库。我有类似的东西：

```
 IVMEEntity entity = GetEntity();
        IVMEAttribute attribNew = entity.CreateAttribute();
        attribNew.PhysicalName = attrib.AttributeName;
        attribNew.ConceptualName = attrib.AttributeName;
        attribNew.AllowNulls = !attrib.AttributeNotNull; 
```

并且可以很好地向当前实体添加属性（想想列）。它不能将列添加为主键。据我所知，我应该使用

```
attribNew.AttributeAnnotations 
```

在某种程度上，但我真的不明白如何。

# actionscript-3 - AS3：如何将数据网格中的数据保存到逐行文本文件中？

> ID：14304728
> 
> 赞同：1
> 
> 时间：2013-01-13T15:06:01.707
> 
> 标签：actionscript-3, datagrid, air, text-files, save

我有一个填充有文本文件的数据网格，其中包含逐行单词（即每行一个）。数据网格有 5 列。文本文件中的每 5 个单词被放入一个新行。然后可以添加或删除数据网格。我将如何使用数据网格中的所有值重写文本文件？

这就是填充数据网格的方式。如何遍历整个数据网格单元格并重写文本文件中的数据？

```
var loadFavourites: URLLoader = new URLLoader();;
var arFavourites = new Array();

loadFavourites.addEventListener(Event.COMPLETE, onLoadedFavourites);
loadFavourites.load(new URLRequest("lists/Favourites.txt"));

function onLoadedFavourites(event:Event):void
{
    arFavourites = event.target.data.split("\r\n");

    for (var i:int = 0; i <= arFavourites.length; i++)
    {
        if (i != 0 && i % 5 == 0)
        {
            dg.addItem({Place: arFavourites[i-5],Subject:arFavourites[i-4],Object:arFavourites[i-3],Feeling:arFavourites[i-2],Action:arFavourites[i-1]});

        }
    }
} 
```

添加记录：

```
var i:int=0;
    var tPlace = mc_places.mc_places_text.txtPlaces.text;
    var tSubject = mc_subject.mc_subject_text.txtSubject.text;
    var tObject = mc_object.mc_object_text.txtObject.text;
    var tFeeling = mc_feeling.mc_feeling_text.txtFeeling.text;
    var tAction = mc_action.mc_action_text.txtAction.text;
    arFavourites[FavCount+1]=tPlace;
    arFavourites[FavCount+2]=tSubject;
    arFavourites[FavCount+3]=tObject;
    arFavourites[FavCount+4]=tFeeling;
    arFavourites[FavCount+5]=tAction;
    dg.addItem({Place: arFavourites[FavCount+1],Subject:arFavourites[FavCount+2],Object:arFavourites[FavCount+3],Feeling:arFavourites[FavCount+4],Action:arFavourites[FavCount+5]});
    dg.scrollToIndex(dg.length-1);
    FavCount=FavCount+5;
    for (i=0; i<arFavourites.length; i++) {
                trace(arFavourites[i]);
            } 
```

删除记录：

```
var k:int;
    var i:int;
    trace("Selected Index: " + dg.selectedIndex);
    if (dg.length == 0) {
        return;
    }
    for (k=0; k<dg.length; k++) {
        if (dg.isItemSelected(dg.getItemAt(k))) {
            for (i=0; i<arFavourites.length; i++) {
                if (arFavourites[i] == dg.getItemAt(k)[1]) {
                    arFavourites.splice(i,1);
                    }
                if (arFavourites[i] == dg.getItemAt(k)[2]) {
                    arFavourites.splice(i,1);
                    }
                if (arFavourites[i] == dg.getItemAt(k)[3]) {
                    arFavourites.splice(i,1);
                    }
                if (arFavourites[i] == dg.getItemAt(k)[4]) {
                    arFavourites.splice(i,1);
                    }
                if (arFavourites[i] == dg.getItemAt(k)[5]) {
                    arFavourites.splice(i,1);
                    }
            }
            dg.removeItemAt(k);
            dg.scrollToIndex(k);
            dg.clearSelection();
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:35:12.380

好吧，我会做的基本上是相反的。首先，您将获取 the 的值`DataGrid`并将它们`Array`按与以前相同的顺序放回：

```
var newFavArray:Array = new Array();

for (var i:int = 1; i <= dg.length; i++)
{
    newFavourites[i * 5 - 5] = dg.getItemAt(i - 1).Place;
    newFavourites[i * 5 - 4] = dg.getItemAt(i - 1).Subject;
    newFavourites[i * 5 - 3] = dg.getItemAt(i - 1).Object;
    newFavourites[i * 5 - 2] = dg.getItemAt(i - 1).Feeling;
    newFavourites[i * 5 - 1] = dg.getItemAt(i - 1).Action;
} 
```

`i`（如果您能找到更好的使用方式来访问它`Array`并`DataGrid`随意使用它，我很快就完成了它。）

然后将其转换为`String`：

```
var newFavString:String = newFavArray.join("\r\n"); 
```

然后最后将它保存到您想要的文件中（当然覆盖旧值）。由于它是一个 AIR 应用程序，因此最好使用`File`和`FileStream`类：

```
var favFile:File = File.applicationStorageDirectory.resolvePath("lists/Favourites.txt");
var favStream:FileStream = new FileStream();

favStream.open(favFile, FileMode.WRITE);
favStream.writeUTFBytes(newFavString);
favStream.close(); 
```

我不确定您的工作流程是什么，但我个人会将所有这些都放在一个函数中：

```
function saveFavourites():void
{
    var newFavArray:Array = new Array();

    for (var i:int = 1; i <= dg.length; i++)
    {
        newFavArray[i * 5 - 5] = dg.getItemAt(i - 1).Place;
        newFavArray[i * 5 - 4] = dg.getItemAt(i - 1).Subject;
        newFavArray[i * 5 - 3] = dg.getItemAt(i - 1).Object;
        newFavArray[i * 5 - 2] = dg.getItemAt(i - 1).Feeling;
        newFavArray[i * 5 - 1] = dg.getItemAt(i - 1).Action;
    }

    var newFavString:String = newFavArray.join("\r\n");

    var favFile:File = File.applicationStorageDirectory.resolvePath("lists/Favourites.txt");
    var favStream:FileStream = new FileStream();

    favStream.open(favFile, FileMode.WRITE);
    favStream.writeUTFBytes(newFavString);
    favStream.close();
} 
```

您可以随时运行。

如果您以前没有使用过`File`，`FileStream`那么值得一试，看看它们是如何工作的。它们仅在 AIR 中可用，但它们比 and 更好和优越`URLRequest`得多`URLLoader`。您可能还想使用它们来加载文件。但是，它们仅对本地文件有用，如果文件在线或其他什么，那么我确定没问题`URLLoader`。

# regex - 使用正则表达式仅查找文件名开头的数字

> ID：14304731
> 
> 赞同：4
> 
> 时间：2013-01-13T15:06:51.923
> 
> 标签：regex, bash

我（一个正则表达式菜鸟）试图只查找目录中以数字而不是字符串开头的文件。

我的正则表达式是

```
 .*/^\d+\w+[A][D][0-5][0-9].mat 
```

（文件名的末尾有字母 AD，然后是 MAT 扩展名之前的 0-54 的数字。我包括在内`./`是因为我要将它传递给`find`in `bash`。）

但是，这对于两个文件都返回 false，例如

```
./times_121312_going_down_AD33.mat 
```

和

```
./121312_going_down_AD33.mat 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-13T15:26:29.997

[这是一个使用find](http://linux.die.net/man/1/find)的工作示例

```
$ ls -l *.mat
-rw-r--r-- 1 root root 0 Jan 13 15:09 121312_going_down_AD33.mat
-rw-r--r-- 1 root root 0 Jan 13 15:09 times_121312_going_down_AD33.mat

$ find . -type f -regex '.*/[0-9]+_.*AD[0-5][0-9]\.mat$'
./121312_going_down_AD33.mat 
```

`\d`并且`\w`不能在[POSIX 正则表达式](http://en.wikipedia.org/wiki/Regular_expression#POSIX)中工作，你可以使用`[:digit:]`tho

正则表达式解释

*   `.*`重复任何字符，除了\n，零次或多次
*   `/`从字面上匹配字符“/”
*   `[0-9]+`重复任何字符 0 到 9 次，一次或多次
*   `_`从字面上匹配字符“_”
*   `.*`重复任何字符，除了\n，零次或多次
*   `A`从字面上匹配字符“A”
*   `D`从字面上匹配字符“D”
*   `[0-5]`匹配 0 到 5 中的任何字符
*   `[0-9]`匹配 0 到 9 中的任何字符
*   `\.`匹配 '。' 字面上地
*   `m`从字面上匹配“m”
*   `a`从字面上匹配“a”
*   `t`从字面上匹配“t”
*   `$`字符串结尾

如果您只想匹配以整数开头的所有文件，您可以将其分解为`.*/[0-9]`也匹配的文件`./12/test.tmp`和`./12_not_a_mat_file.txt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:14:57.697

你的正则表达式：（`.*/\d+\w+[A][D][0-5][0-9]\.mat`不应该有`^`，你必须记住转义一个点`.`，因为没有`\`它只是意味着“任何字符”。

假设你`[A][D][0-5][0-9]`的部分不重要，你总是可以尝试这个：`.*/\d\w+\.mat`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T15:15:17.067

`\d`您使用的etc 表示法来自 perl（也可能来自其他地方），但`bash`命令行不支持。

你需要使用

```
 ./[0-9][0-9][0-9][0-9][0-9]* 
```

匹配 5 位数字 +“其他任何”值。

如果需要匹配前面的 1-n 个可能的数字，您需要将这些可能性“或”在一起。案例陈述可以帮助解决这个问题并使其更易于管理，即

```
 case ${fileName} in
  ./[0-9][0-9][0-9][0-9]*|./[0-9][0-9][0-9][0-9][0-9]*) echo "4 or 5 nums at front" ;;
  ./[0-9]*|./[0-9][0-9]*|./[0-9][0-9][0-9]* ) echo "up to 3 nums at front" ;;
  #-------^-------------^--- note the '|' regex OR
 esac 
```

请注意，您必须先测试较长的匹配项，因为较短的匹配项也会匹配较长的字符串。

根据您的需要，还有其他解决方案，但这不需要启动子流程，因此非常有效。

IHTH

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T15:52:32.630

如果您正在运行一个足够新的 bash，则可以使用 exglob 表达您正在寻找的内容。

```
shopt -s extglob
for f in ./+([0-9])*AD[0-5][0-9].mat; do
    # do something with "$f"
done 
```

请注意，以上不是递归搜索，对于仅 bash 的递归搜索，您需要一个也支持 globstar 的 bash 版本：

```
shopt -s extglob globstar
for f in ./**/+([0-9])*AD[0-5][0-9].mat; do
    # do something with "$f"
done 
```

或者，可以使用 GNU find 的`-regex`选项进行递归搜索。

# asynchronous - 分块是否包含异步执行？如何异步流式传输块？

> ID：14304733
> 
> 赞同：0
> 
> 时间：2013-01-13T15:07:13.027
> 
> 标签：asynchronous, playframework-2.0, chunking

在 Play 文档中，[块被引入](http://www.playframework.org/documentation/2.0/JavaStream)作为“流内容”的解决方案。我不确定是否可以在不阻塞 HTTP 线程的情况下缓慢生成流式内容，或者我是否必须通过更改（`sc`声明为`Chunks`）单独将块转换为 AsyncResult：

```
return ok(sc); 
```

至：

```
return async(play.libs.Akka.future(new Callable<Result>() {
    @Override
    public Result call() throws Exception {
        return ok(sc);
    }
})); 
```

使用第二种解决方案时，这些块不会逐渐出现在浏览器中，我希望它们这样做。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:14:23.883

`async`如果您的计算发生在`Promise`（`Future`在 2.1 中）中，例如使用 Akka 演员时，您只需要包装您的结果。结果类型是 then `AsyncResult`。

由于`Chunks`(defined in `play.mvc.Results.java`) 内部使用 an`Enumerator`将回调的内容推送到 an `Iteratee`，因此它*应该*是非阻塞的。

![在此处输入图像描述](../Images/643df7050260f16e3d69b8bb62fb81d0.png)

# python - 在 Haskell 中调用 Python 代码

> ID：14304734
> 
> 赞同：4
> 
> 时间：2013-01-13T15:07:15.877
> 
> 标签：python, haskell

我有一堆（或将有一堆）使用 OpenCV 库以及 SimpleCV 的 Python 代码。我还有一堆 Haskell 代码可以做一些其他的事情，但想调用我在 Python 中定义的一个函数。这个函数返回一个双精度的三元组。

在 Haskell 中调用此函数的最佳方法是什么？

例如，一个简化的情况是如果我在 Python 中有一个函数

```
# foo.py
import SimpleCV

def foo():
   return (1.0,2.0,3.0) 
```

我希望能够在 Haskell 中做到这一点

```
-- bar.hs

main = do
  putStrLn $ show pyThingy.foo 
```

我尝试过使用 MissingPy ( [http://hackage.haskell.org/package/MissingPy](http://hackage.haskell.org/package/MissingPy) )，但是每当我尝试导入本地文件时，我都会得到

```
*** Exception: <<MissingPy.Python.Types.PyException>> 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T15:16:48.573

您可以使用[节俭](http://thrift.apache.org/)。它用于可扩展的跨语言服务开发，将软件堆栈与代码生成引擎相结合，以构建在 C++、Java、**Python**、PHP、Ruby、Erlang、Perl、**Haskell**、C#、Cocoa、JavaScript、Node之间高效无缝工作的服务.js、Smalltalk、OCaml 和 Delphi 等语言。

# servicestack - ServiceStack 全局请求过滤器未触发

> ID：14304736
> 
> 赞同：7
> 
> 时间：2013-01-13T15:07:33.743
> 
> 标签：servicestack

我有一个由mythz（ServiceStack dev）建议的用于身份验证的全局请求过滤器，在这个[SO Answer](https://stackoverflow.com/questions/12829842/how-can-i-prevent-access-to-specific-path-with-servicestack-authentication)

我的过滤器：

```
RequestFilters.Add((httpReq, httpResp, requestDto) =>
{
    if (!PublicRoutes.Contains(httpReq.PathInfo))
    {
        new AuthenticateAttribute().Execute(httpReq, httpResp, requestDto);
    }
}); 
```

当我请求继承[动态 ViewPage的 ServiceStack Razor 页面时，过滤器不会为我触发](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Razor/ViewPage.cs)

示例 /Default.cshtml：

```
@inherits ViewPage
<!DOCTYPE html>
<html>
    <head>
        <title>HOME</title>
...
...
ETC 
```

[在答案](https://stackoverflow.com/questions/12829842/how-can-i-prevent-access-to-specific-path-with-servicestack-authentication)的底部，在评论中，问题提出者提出了类似的行为，但没有准确描述如何重现，所以我看不到解决方案。

有解决办法吗？我做错了什么吗？

* * *

**更新**

我发现我可以直接在我的页面上声明属性：

```
@using ServiceStack.ServiceInterface
@inherits ViewPage

@{
    new AuthenticateAttribute().Execute(Request, Response, this);
}
<!DOCTYPE html>
...
...
ETC 
```

或者我确定我可以创建一个继承 ViewPage 的类并在其 Init 方法中运行它们并在 Razor 页面上使用新类。

不过，这两种解决方案似乎都是无关紧要的，而且不是很干燥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T01:06:10.087

我最终创建了自己的`ViewPage`类来实现这一点，并在页面上设置模型后调用过滤器：

```
public abstract class FilterViewPage<TModel> : ViewPage<TModel>
    where TModel : class
{
    public override void SetModel(object o)
    {
        base.SetModel(o);

        this.AppHost.RequestFilters.ForEach(action => action.Invoke(this.Request, this.Response, this.Model));
        this.AppHost.ResponseFilters.ForEach(action => action.Invoke(this.Request, this.Response, this.Model));
    }
} 
```

我确保只有顶级页面继承它，而不是将其应用于部分页面，因此过滤器只触发一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:20:30.767

好吧，除了简单地检查是否有人登录之外，许多基于角色的东西都是根据请求 DTO 上的属性为您处理的。对于您正在做的事情，有几个选择。第一个是有一个不做任何事情的空 dto：

```
[Route("/")]
[Authenticate]
public class Default { }

public class DefaultService : Service
{
    public object Get(Default req)
    {
         return new object();
    }
} 
```

第二个是简单检查用户是否登录剃须刀页面

```
@{
    var session = Cache.SessionAs<AuthUserSession>();
    if (!session.IsAuthenticated) throw new HttpException(403, "You are not logged in.");
} 
```

# java - 部署小程序时 Glassfish 中的 java.lang.reflect.InvocationTargetException

> ID：14304739
> 
> 赞同：1
> 
> 时间：2013-01-13T15:07:48.397
> 
> 标签：java, applet, glassfish, war, invocationtargetexception

我的平台：

*   视窗;
*   JDK 7；
*   玻璃鱼3;
*   记事本++；
*   命令;

我想部署一个将 Glassfish 归档为 .war 文件的小程序。

`java.io`当我使用（即`ImageIO.read()`方法）访问我的资源时，我没有将我的资源归档为 jar 文件，以免自己签署小程序。

这就是我得到的：

## ImageViewerApplet.java

```
package ImageViewerApplet;

import java.awt.*;

import javax.swing.*;

import java.io.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;

public class ImageViewerApplet extends JApplet implements Serializable
{
    private Image BackgroundIMG;

    private final int APPLET_W = 600;
    private final int APPLET_H = 600;

    java.net.URL AppletImgURL = ImageViewerApplet.class.getResource("IMG");

    private String IMG_Path = AppletImgURL.getPath();

    @Override
    public void init()
    {
        Container MyJApplet = getContentPane();

        setSize(APPLET_W, APPLET_H);

        String IMG_Path = this.IMG_Path+"/";

        File BackgroundIMG_File = new File(IMG_Path+"Board.jpg");

        try
        {
            BackgroundIMG = ImageIO.read(BackgroundIMG_File);
        }
        catch(Throwable ThEx)
        {
            Logger.getLogger(ImageViewerApplet.class.getName()).
                                         log(Level.SEVERE, null, ThEx);
        }

        final ImageViewerPanel MyJPanel = new ImageViewerPanel(BackgroundIMG);

        MyJApplet.add(MyJPanel);
    }
} 
```

## ImageViewerPanel.java

```
package ImageViewerApplet;

import java.awt.*;
import java.awt.geom.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class ImageViewerPanel extends JPanel
{
    private BufferedImage BuffImg = new BufferedImage(600, 600, 
                                            BufferedImage.TYPE_INT_RGB);

    private Graphics2D Graph = BuffImg.createGraphics();

    private Image BackgroundIMG;

    public ImageViewerPanel(Image BackgroundIMG)
    {
        this.BackgroundIMG = BackgroundIMG;

        setBackground(Color.pink);
    }

    @Override
    public void paintComponent(Graphics G)
    {
        Graphics2D Graph2D = (Graphics2D) G;

        super.paintComponent(Graph2D);

        if(BuffImg == null)
        {
            System.err.println("BuffImg Is Null");
        }

        Graph.drawImage(BackgroundIMG, 0, 0, this);

        Graph2D.drawImage(BackgroundIMG, 0, 0, this);
    }
} 
```

## 索引.html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en-US">
 <HEAD>
   <TITLE>Applet HTML Page</TITLE>
</HEAD>
<BODY>

<H3><HR WIDTH="100%">Applet HTML Page<HR WIDTH="100%"></H3>

<P>
<APPLET codebase="java" code="ImageViewerApplet.ImageViewerApplet.class" width=600 height=600>
</APPLET>
</P>

</BODY>
</html> 
```

当我使用`index.html`浏览器以正常方式访问硬盘驱动器时，它工作正常并且背景图像显示出来。

然后我这样做：

```
 1) I archive my work on the cmd like this:
    -> jar -cvf ImageViewer.war .

    2) copy-paste my war file to glassfish "autodeploy" file.

    3) after a few seconds this file "ImgViewer.war_deployed" appears, 
       which means my war file is deployed fine. 
```

当我使用浏览器访问本地主机上的工作时出现问题，如下所示：

```
http://localhost:8080/ImgViewer 
```

小程序不工作，单击小程序时收到此错误消息：

```
"RuntimeException java.lang.reflect.InvocationTargetException" 
```

这是我单击详细信息时得到的：

```
Java Plug-in 10.9.2.05
Using JRE version 1.7.0_09-b05 Java HotSpot(TM) Client VM
User home directory = C:\Documents and Settings\Administrator
----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
l:   dump classloader list
m:   print memory usage
o:   trigger logging
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
x:   clear classloader cache
0-5: set trace level to <n>
---------------------------------------------------- 
```

我试图解决这个问题两个多月，我的研究没有任何运气。请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:42:18.737

> 我没有将我的资源归档为 jar 文件，以免自己签署小程序

Jar 文件不必进行数字签名，它只是一种选择。

OTOH

```
File BackgroundIMG_File = new File(IMG_Path+"Board.jpg"); 
```

小程序需要在签名的 Jar 中才能使用`File`. 如果此图像是小程序的“一部分”，则应由`URL`.

# php - 在添加到表之前检查 10 个新行的集合是否唯一，用布尔值记录

> ID：14304741
> 
> 赞同：0
> 
> 时间：2013-01-13T15:07:56.903
> 
> 标签：php, mysql

所以每天，我都会收集前 10 个列表，创建一个临时表**temp**。有一个大表，**timeline**，它聚合了这些列表，包含以下列：

```
date, num, id, changed 
```

我想检查这 10 本书的**临时**集合是否是唯一的，或者它的来源是否尚未更新并且值是否重复。在添加到**时间线**之前，我想在**temp**中以 boolean, *changed*来捕获它。

 ****我确信有更好的方法来做到这一点，但在 PHP 中，我为前一天创建了一个数组并添加了最后一组，并与当前组进行比较，将结果存储在单独的数组 $change_array 中。我不知道如何将它添加回**temp**，即将这个 0 和 1 的数组转换为一列，或者在一个命令中将值添加到它们各自的行中。仅供参考，这些命令如下所示：

```
$last_ten = "SELECT num, asin FROM timeline ORDER BY date DESC, num ASC LIMIT 0,10";
$cur_ten = "SELECT num, asin FROM temp ORDER BY num ASC";
...
for ($ind = 1; $ind <= 10; $ind++) {
    $change_array[$ind] = ($currents[$ind] == $prevs[$ind]) ? 0 : 1;
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:40:45.093

决定只是为了简化，按照建议使用 array_intersect，如果整个集合仅相差一行，则该日期的所有行都标记为不同：

```
$last_ten = "SELECT num, asin FROM timeline t ORDER BY t.date DESC, t.num ASC LIMIT 0,10";
$cur_ten = "SELECT num, asin FROM $table ORDER BY num ASC";

$prevs = array(1 => "", 2 => "", 3 => "", 4 => "", 5 => "", 6 => "", 7 => "", 8 => "", 9 => "",  10 => "");
    while($r = mysql_fetch_array($last_ten_res))
    {
        $num = $r['num'];
        $prevs[$num] = $r['asin'];
    }

$currents = array(1 => "", 2 => "", 3 => "", 4 => "", 5 => "", 6 => "", 7 => "", 8 => "", 9 => "",  10 => "");
    while($r = mysql_fetch_array($cur_ten_res))
    {
        $num = $r['num'];
        $currents[$num] = $r['asin'];
    }

$different = count(array_intersect($prevs, $currents)) == 10 ? 0 : 1;
$add_change = "ALTER TABLE $table ADD changed INT(1) DEFAULT $different;"; 
```****

# c# - C# 动力学，对象数组

> ID：14304745
> 
> 赞同：0
> 
> 时间：2013-01-13T15:08:24.763
> 
> 标签：c#

是否可以通过使用动力学来处理对象数组？

我的意思是这样的......\

```
dynamic d ;

d.SomeProp.Add(new SomeObject); 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T15:09:50.910

您可以使用 an[`ExpandoObject`](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)在运行时动态构建对象：

```
dynamic d = new ExpandoObject();
d.SomeProp = new List<SomeObject>();
d.SomeProp.Add(new SomeObject()); 
```

虽然不太明白这一点，但我个人更喜欢强类型和编译时安全。你呢？

# .net - Selenium WebDriver - 通过内部文本选择表格单元格 - C# .NET

> ID：14304756
> 
> 赞同：0
> 
> 时间：2013-01-13T15:10:09.560
> 
> 标签：.net, selenium, webdriver, css-selectors

我正在尝试获取一个或多个包含特定字符串的表格单元格。我无法做到这一点

```
var tableCells = table.FindElements(By.CssSelector("td:contains('my partial text')")); 
```

在这里使用的正确 css 选择器文本是什么？

我还尝试了以下方法：

```
var tableCells = table.FindElements(By.TagName("td")).Where(tableCell => tableCell.Contains("my partial text")); 
```

但它非常慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:44:00.490

**没有像`:contains()`.** 这是一个多年前被抛弃的提议。

缓慢的原因`table.FindElements(By.TagName("td")).Where(tableCell => tableCell.Contains("my partial text"));`应该至少部分显而易见 - 您要求 WebDriver 查找文档中的每个表格单元格，然后遍历它们。

您可以使用 XPath 定位器（例如`table.FindElements(By.xpath("//td[contains(.,'my partial text')]"))`. 这正是它的样子 - 您尝试的 CSS 定位器的 XPath 等效项。

# c# - 用我的数组值生成随机数而不重复

> ID：14304759
> 
> 赞同：2
> 
> 时间：2013-01-13T15:10:30.063
> 
> 标签：c#, arrays, shuffle

我是 C# 新手，我正在使用数组制作应用程序。我有一个数组，其数字如下所示：

```
int[] array2 = new int[] { 1, 3, 5, 7, 9 }; 
```

我需要做的是更改数组中这些数字的顺序而不重复，因为当我使用随机函数时，这会显示重复的数字。

我看到了这种方法，但不知道如何将其应用于数字： http: [//www.dotnetperls.com/shuffle](http://www.dotnetperls.com/shuffle)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T15:13:37.130

您可以使用以下 LINQ 链：

```
int[] array2 = new int[] { 1, 3, 5, 7, 9 };
var random = new Random();
var total = (int)array2.
    OrderBy(digit => random.Next()).
    Select((digit, index) => digit*Math.Pow(10, index)).
    Sum(); 
```

首先，它对元素进行随机排序，然后选择每个元素乘以 10 的索引次幂，然后将它们相加并将结果转换为整数。另外，请注意我没有为您的`Random`实例提供有用的种子。您可能想要这样做，以产生伪随机结果。

您可能还想使用[此处](https://stackoverflow.com/questions/383587/how-do-you-do-integer-exponentiation-in-c)描述的求幂方法，以避免强制转换为整数。

编辑：正如 Rhumborl 指出的，你可能只需要洗牌的数组。在这种情况下：

```
var shuffledArray = array2.OrderBy(n => random.Next()).
   ToArray(); 
```

应该为你工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:22:55.333

如果您使用 C# 工作，则最好使用 C# 结构。

您可以使用此通用功能

```
using System;
using System.Collections.Generic;

public static class ListExtensions
{
    public static void Shuffle<T>(this IList<T> list)
    {
        var randomNumber = new Random(DateTime.Now.Millisecond);
        var n = list.Count;
        while (n > 1)
        {
            n--;
            var k = randomNumber.Next(n + 1);
            var value = list[k];
            list[k] = list[n];
            list[n] = value;
        }
    }
} 
```

然后您的代码应如下所示：

```
List<int> list2 = new List<int>(){1, 3, 5, 7, 9};
Shuffle(list2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T15:20:59.603

正如您所说，您已经有一个包含数字的数组可以使用。所以我不会向你展示如何制作一个充满唯一数字的数组。

这就是你如何洗牌你的阵列。

1.  弄清楚如何生成介于 0 和数组长度之间的随机数。
2.  编写一个从 length_of_the_array-1 到 0 的循环。（将此索引用作 idx1）

在循环内执行以下操作：

一种。使用步骤 1 中的方法生成一个介于 0 和 idx1（含）之间的随机数。（让随机数为 idx2。）
b．在 idx1 和 idx2 处交换数组中的元素。

可以通过执行以下操作来完成简单的交换：

> int tmp = 数组[idx1];
> 数组[idx1] = 数组[idx2];
> 数组[idx2] = tmp;

循环结束，你留下一个洗牌的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T15:36:34.037

我不太清楚你所说的改变顺序而不重复是什么意思。如果您只想生成一个从不重复的随机数，您可以执行以下操作

```
private Random rand = new Random();
private List<int> used = new List<int>;
protected int randomNonrepeating() {
   int i = rand.next();
   while(used.contains(i))
       i = rand.next();
   used.add(i);
   return i;
} 
```

我的猜测是，这并不是你想要的。如果您只想在提供的链接上修改算法以使用整数数组而不是字符串。您只需要更改类型。像这样的东西

```
using System; 
```

使用 System.Collections.Generic；使用 System.Linq；

静态类 RandomStringArrayTool { 静态随机 _random = new Random();

```
public static string[] RandomizeStrings(int[] arr)
{
List<KeyValuePair<int, int>> list = new List<KeyValuePair<int, int>>();
// Add all strings from array
// Add new random int each time
foreach (var s in arr)
{
    list.Add(new KeyValuePair<int, int>(_random.Next(), s));
}
// Sort the list by the random number
var sorted = from item in list
         orderby item.Key
         select item;
// Allocate new string array
int[] result = new string[arr.Length];
// Copy values to array
int index = 0;
foreach (KeyValuePair<int, int> pair in sorted)
{
    result[index] = pair.Value;
    index++;
}
// Return copied array
return result;
} 
```

}

希望这可以帮助。

# awk - 替换 awk 上的当前记录添加空间

> ID：14304764
> 
> 赞同：1
> 
> 时间：2013-01-13T15:11:24.143
> 
> 标签：awk

我想用 awk 操作字符串。

现在查看我正在使用的 awk 上的当前记录`$0`，这工作正常：

```
echo "foobar" | awk -v FS="" '{print $0 }' 
```

我的输出是

```
foobar 
```

现在我想用第五个字符替换我的第二个字符：

```
echo "foobar" | awk -v FS="" '{$2=$5; print $0 }' 
```

它可以工作，但会在每个字符后添加空格：

```
f a o b a r 
```

所以我的问题是为什么 awk 在每个字符之后添加空格，以及如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:16:34.313

将 OFS（输出字段分隔符）设置为空：

```
$ echo "foobar" | awk -v FS="" '{$2=$5; print $0 }' OFS=""
faobar 
```

# haskell - Haskell：重载签名并为不同的输入类型返回不同的结果

> ID：14304765
> 
> 赞同：3
> 
> 时间：2013-01-13T15:11:32.303
> 
> 标签：haskell

我需要这个功能：

```
blubb :: ??? -> Int
blubb (n :: Int) = n
blubb (n :: Char) = 42 
```

它应该是这样工作的：函数获取`Int`并返回它。如果函数得到 an`Char`它返回一个常量值，其他情况无关紧要。

由于 Haskell 中的类型系统，这可能是不可能的，但我需要让它工作......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T15:19:20.677

这就是类型类的用途：

```
class Blubb t where
    blubb :: t -> Int

instance Blubb Int where
    blubb n = n

instance Blubb Char where
    blubb _ = 42 
```

这重载`blubb`以在`Int`s 和`Char`s 上工作。编译器将根据参数的类型选择正确的使用。

但是，请注意，您没有使用实际需要的类型类`Either`。你可能真的想要这个：

```
blubb :: Either Int Char -> int
blubb (Left  n) = n
blubb (Right _) = 42 
```

# android - 销毁活动时返回上一个选项卡

> ID：14304766
> 
> 赞同：2
> 
> 时间：2013-01-13T15:11:38.137
> 
> 标签：android, android-layout, android-intent

我有 2 个活动

1.  主要活动
2.  项目活动

MainActivity 有 3 个选项卡（片段）

1.  片段1
2.  片段2
3.  片段3

当我转到 Frag2 并单击操作栏中的“添加”按钮时，ProjectActivity 启动。在项目活动中，当我单击“取消”按钮时，我再次启动 MainActivity。但是现在当 MainActivity 启动时，它显示 Frag1。

如何更改我的代码以显示 Frag2，因为用户之前在 Frag2 上？

当单击取消按钮时，我使用这个简单的代码来启动 MainActivity。

```
intent = new Intent(this, MainActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T15:57:47.147

不要重新启动主要活动。改为使用`finish()`。这将带您回到原来`MainActivity`的状态，而不是创建一个新的。这与您从后退按钮获得的行为相同。

请参阅[任务和后台堆栈](http://developer.android.com/guide/components/tasks-and-back-stack.html)以更深入地了解后台堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:43:30.737

您可以维护一个变量来保存当前选项卡并在 onPause() 中更新。还要检查 onResume() 中的相同变量并相应地设置当前选项卡。

# jquery - 禁用调用 javascript 函数的点击

> ID：14304767
> 
> 赞同：1
> 
> 时间：2013-01-13T15:11:47.230
> 
> 标签：jquery

我有一个具有这种结构的简单菜单：

```
<ul class="navigation">
  <li><a href="javascript:void(0)" onclick="javascript:dataTable()">Preview all record</a></li>
</ul> 
```

在我的项目中的某些情况下，当用户单击此标记时，我需要禁用调用 dataTable() 函数

我正在使用这个

```
$('ul.navigation a').click(function(event){
     event.preventDefault();
}); 
```

但这对我不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T15:13:32.810

尝试删除`onclick`HTML 属性：

```
$("ul.navigation a").removeAttr("onclick"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:20:55.323

尝试保存值并将`onclick`属性设置为空：

```
var tmpVal = $("ul.navigation a").attr("onclick");
 $("ul.navigation a").attr("onclick",""); 
```

您可以再次恢复该值：

```
$("ul.navigation a").attr("onclick",tmpVal ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T15:22:43.790

您可以使用变量来存储是否调用 dataTable()：

```
onclick="javascript:if(showTable)dataTable()" 
```

[http://jsfiddle.net/shZFj/1/](http://jsfiddle.net/shZFj/1/)

# c# - C#从另一个类访问字典不起作用

> ID：14304770
> 
> 赞同：2
> 
> 时间：2013-01-13T15:12:06.590
> 
> 标签：c#, object, dictionary, reference

我对 C# 还很陌生，过去 3 天一直在努力学习。我很好奇为什么下面的代码不能正常工作？我收到以下错误：**对象引用未设置为对象的实例。**当我尝试调用 data.dOffsets["roomtargets"] 时。但是，调用 data.sProcessName 确实没有任何错误。

我有两个类/文件。程序.cs：

```
class Program
    {
        public static Data data = new Data();

        static void Main(string[] args)
        {
            Console.WriteLine("data.sProcessName: {0}", data.sProcessName);
            Console.WriteLine("data.dOffsets[\"roomtargets\"]: {0}", data.dOffsets["roomtargets"]); 
```

和 Data.cs：

```
public class Data
    {
        public string sProcessName { get; set; }
        public Dictionary<string, int> dOffsets { get; set; }

        public Data()
        {
            sProcessName = "Client";

            Dictionary<string, int> dOffsets = new Dictionary<string, int>()
            {
                {"roomtargets", 0x0018FA48}
            };
        }
    } 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T15:14:11.673

```
 Dictionary<string, int> dOffsets = new Dictionary<string, int>()
        {
            {"roomtargets", 0x0018FA48}
        }; 
```

此代码将字典初始化为构造函数中的内部变量。将其更改为：

```
 dOffsets = new Dictionary<string, int>()
        {
            {"roomtargets", 0x0018FA48}
        }; 
```

或者`this.dOffsets`让它更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:16:06.393

您的 dOffsets 对于构造函数来说是本地的。您的类已经具有该属性，因此您不需要在那里声明另一个局部变量

```
public Data()
{
    sProcessName = "Client";

    dOffsets = new Dictionary<string, int>()
    {
        {"roomtargets", 0x0018FA48}
    };
} 
```

这应该工作

# java - 限制java只执行签名的jar？

> ID：14304771
> 
> 赞同：4
> 
> 时间：2013-01-13T15:12:13.950
> 
> 标签：java, security, code-signing, whitelist, jar-signing

可以使用 JDK jarsigner 工具对 Java jar 进行签名。这与 policytool 结合起来，似乎只允许您在运行时向 jar 添加权限。我想要一个默认的“撤消运行权限”。是否有可能使 java 以这样的方式进行白名单，即只允许运行已由特定证书集签名的 jar 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T15:49:19.800

据我了解，这是在您可以控制的计算机上。利用

```
 java -Djava.security.manager YourApplication 
```

启动应用程序时。这将安装可以通过[策略文件](http://docs.oracle.com/javase/6/docs/technotes/guides/security/PolicyFiles.html)配置的默认安全管理器。策略文件允许为每个签名者或每个代码库配置权限

```
 grant signedBy "me" {
      permission java.io.FilePermission "/home/me/*", "read,write";
  }; 
```

在各种可能的权限之间，我目前看不到“根本运行”的权限，但似乎您可以完全禁用网络和文件系统访问。

如果您有可能运行自己的作为决策者的外部应用程序（启动或不启动），您可以验证代码中的签名，[如前所述](https://stackoverflow.com/questions/1374170/how-to-verify-a-jar-signed-with-jarsigner-programmatically)。

此外，您可以使用 -verify 开关围绕 jarsigner 编写包装器，如此[处](http://docs.oracle.com/javase/tutorial/security/toolfilex/rstep2.html)所述：

```
jarsigner -verify -keystore mystore hackerApplication.jar 
```

并使用一些类似 bash 的包装器在输出中捕获“smk”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T22:48:28.483

对于自 7u10 以来 Oracle JRE 上的 Java 插件和 WebStart，Java 控制面板中有相关的自定义安全设置。在“安全 JRE 版本上不受信任的应用程序的操作”下，选择“不运行”。请参阅[设置 Java 客户端的安全级别](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/client-security.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-29T12:59:34.443

如果这是针对基于浏览器的应用程序，则可以使用部署规则集来完成。

[https://blogs.oracle.com/java-platform-group/entry/introducing_deployment_rule_sets](https://blogs.oracle.com/java-platform-group/entry/introducing_deployment_rule_sets)

[http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/security/deployment_rules.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/security/deployment_rules.html)

# c++ - WTL。CTabCtrl。不要擦除子窗口区域

> ID：14304772
> 
> 赞同：0
> 
> 时间：2013-01-13T15:12:18.013
> 
> 标签：c++, wtl

我想禁用闪烁。如何在 CTabCtrl 中禁用子窗口区域的擦除背景？

# jsf - 有一些未处理的 FacesMessage，这意味着不是每个 FacesMessage 都有机会被渲染

> ID：14304774
> 
> 赞同：6
> 
> 时间：2013-01-13T15:12:35.733
> 
> 标签：jsf, message

我有一个 JSF 2.1 + PrimeFaces 3.3 页面：

```
<h:form id="particluar">
  <p:message id="msg" globalOnly="true" display="text"/>

  <h:panelGrid columns="2" id="test">
    <h:panelGrid id="panel2" columns="3">
      <p:inputText id="name1" value="Student.studentID" required="true"/>          
      <p:commandButton value="Check Name" actionListener="#{Student.abc}" process="name1" update="panel2" />
      <p:message id="msg1" for="name1" display="text"/>
    </h:panelGrid>

    <p:inputText id="name2" required="true"/>
    <p:message id="msg2" for="name2" display="text"/>

    <p:inputText id="name3" required="true"/>
    <p:message id="msg3" for="name3" display="text"/>

  </h:panelGrid>
  <p:commandButton value="submit" actionListener="#{Student.xyz}" update="particluar" />
</h:form> 
```

当名称无效时，我正在尝试手动添加面孔消息：

```
public void xyz() {
  if (name1.equals("primefaces")) {
    FacesContext.getCurrentInstance().addMessage("msg1", new FacesMessage(FacesMessage.SEVERITY_ERROR,"Invalid Name", "Invalid Name"));
  }
  if (name2.equals("primefaces")) {
    FacesContext.getCurrentInstance().addMessage("msg2", new FacesMessage(FacesMessage.SEVERITY_ERROR,"Invalid Name", "Invalid Name"));
  }
  if (name3.equals("primefaces")) {
    FacesContext.getCurrentInstance().addMessage("msg3", new FacesMessage(FacesMessage.SEVERITY_ERROR,"Invalid Name", "Invalid Name"));
  }
} 
```

但是它们没有出现，并且服务器日志不断打印以下警告：

> 有一些未处理的 FacesMessage，这意味着不是每个 FacesMessage 都有机会被渲染

如何在页面中显示它们？

而且，第二个问题，如果我提交带有三个空输入字段的表单，它会在每个`<p:message>`与`<p:inputText>`. 如何在 中显示它们`<p:message globalOnly="true">`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T18:30:38.883

> *如何在页面中显示它们？*

您需要指定一个有效的客户端 ID。客户端 ID 与组件 ID 不同。客户端 ID 就是您在 JSF 生成的 HTML 输出中看到的任何内容。此外，客户端 ID 应该是输入组件之一，而不是消息组件之一。

所以，给定一个

```
<h:form id="particular">
    <p:inputText id="name1" />
    <p:message id="msg1" for="name1" />
</h:form> 
```

输入组件具有客户端 ID `particular:name1`（在浏览器中右键单击页面并执行*查看源代码*以自己查看）。因此，消息应该准确地附加在这个客户端 ID 上。

```
context.addMessage("particular:name1", message); 
```

* * *

> *而且，第二个问题，如果我提交带有三个空输入字段的表单，它会在每个`<p:message>`与`<p:inputText>`. 如何在 中显示它们`<p:message globalOnly="true">`？*

`<p:message>`不是有效的组件，您应该使用`<p:messages>`.

```
<p:messages id="msg" globalOnly="true" display="text"/> 
```

该`globalOnly="true"`属性意味着只显示带有`null`客户端 ID 的消息。因此，您应该只添加这样的消息。

```
context.addMessage(null, message); 
```

### 也可以看看：

*   [如何更好地使用 JSF h:messages？](https://stackoverflow.com/questions/2930535/how-to-use-jsf-hmessages-better)
*   [JSF 中何时以及如何生成 clientID？](https://stackoverflow.com/questions/28351976/when-and-how-is-clientid-generated-in-jsf)

* * *

**与具体问题无关**，您尝试添加的非全局消息（“无效名称”）实际上应该由一个完全有价值的验证器完成。有关具体示例，另请参阅[如何在 JSF 中执行验证，如何在 JSF 中创建自定义验证器。](https://stackoverflow.com/questions/6047866/how-to-perform-validation-in-jsf-how-to-create-a-custom-validator-in-jsf/6047913#6047913)

# java - 将一个数组列表链接到另一个

> ID：14304775
> 
> 赞同：0
> 
> 时间：2013-01-13T15:12:37.907
> 
> 标签：java, arraylist, split

我基本上需要知道是否可以将 1 arrayList 更改为另一个 arrayList，然后关联 arrayList 1 中的哪个项目，arrayList 2 中的项目来自，而不使用模式查找器。很难解释，所以用一个简单的例子来说明：

给定文件输入：

```
Feline:
Cat Lion
Cheetah

Canine:
Dog
Wolves Fox 
```

我使用以下方法将文件拆分为每个段落：

```
String strLine;
String [] paragraph = strLine.split(""); 
```

从这里我通过在高级 for 循环中使用 add 方法将每个项目添加到 arrayList。

这应该给我们留下第一个arrayList：

```
[Feline: Cat Lion Cheetah, Canine: Dog Wolves Fox] 
```

从那里需要使用正则表达式 \\s+ 将每个项目拆分为单独的单词。使用另一个高级 for 循环应该很容易。

这应该给我们留下第二个arrayList：

```
[Feline:, Cat, Lion, Cheetah, Canine:, Dog, Wolves, Fox] 
```

我需要知道的是，是否无论如何让程序意识到第二个arrayList 中的单词Cheetah 源自第一个arrayList 中的第一个项目，而不必在第一个arraylist 中搜索第二个arrayList 中的项目。关键必须是一个arrayList中的一项源自另一个arrayList。

我基本上需要这样做，因为我有方法可以根据每个段落的第一个单词是什么，对每个段落执行不同的操作。

如果我的解释令人困惑并且对错误的术语感到抱歉，请告诉我，我在解释我的问题时遇到了麻烦。

如果这是可能的，请让我知道如何解决我的问题。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:29:33.140

当您根据空格字符进行拆分时，我建议保留初始数组列表位置。例如，您定义一个对象如下；

```
public class MyWord
{
private int pos;

private String word;
public MyWord(int pos,String word)
{
 this.pos = pos;

 this.word = word;
}
//getters and setters
} 
```

然后当你分裂时，你可以做这样的事情；

```
List<MyWord>secondList = new ArrayList<MyWord>();
for(int i=0;i<firstList.size();i++)
{
 String[]words = firstList.get(i).split("\\s");
 for(String wordToAdd : words)
 {
  MyWord w = new MyWord(i,wordToAdd);
  secondList.add(w);
 }
} 
```

所以现在你的第二个列表将有一个包含单词的对象以及它包含在第一个列表中的原始索引。

啤酒花这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:36:05.710

Your program is never going to 'realize' anything. Each of the Java collections has a specified semantics, and they do no more and no less that what they are documented to do.

`java.util.List` stores an ordered list of of objects. It does not detect duplicates. It does not maintain associations with anything else. You can ask a list 'do you contain X'? with the `contains` method. This takes time proportional to the number of things in the list.

When you store `String` objects in a list, there is no concept of where they come from. They are just in the list. If you need your second list to contain items that correlate to your first list, you need to code that. If *all* the second list needs to store is correlations to the first list, it could be a `List<Integer>`, and for each of those items you search for it in the first list to get the index. So, yes, as you process each of the items for the second list, you need to scan the first list to see if/where it is. It's not clear from your question what you want to have happen if something from the second group was not mentioned at all in the first group.

# iphone - 如何覆盖iphone文件目录中的文件？

> ID：14304776
> 
> 赞同：0
> 
> 时间：2013-01-13T15:12:39.790
> 
> 标签：iphone, objective-c, replace, copy-paste, paste

我的老问题解释得有点粗略，所以我会再试一次。我想开发一个应用程序，它只是用我自己的文件覆盖 iPhone 文件目录中的文件，但我不知道覆盖部分的代码。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:17:18.427

您不能覆盖 iPhones 文件目录中的文件。作为开发人员，您可以读取和写入的唯一部分是您的[应用程序的文档目录](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:04:32.543

为什么不直接删除现有文件以便放置新文件？

# c# - 内容嵌套母版页未显示

> ID：14304777
> 
> 赞同：2
> 
> 时间：2013-01-13T15:12:49.610
> 
> 标签：c#, asp.net, master-pages, umbraco

我正在使用 umbraco CMS 版本 4.11.3 内容嵌套母版页未加载（或显示）。（内容标题模板未显示。）请帮助我。

![我的模板结构](../Images/aee8eb1375913c539f726cad4191b738.png) Master.master 代码：

```
<%@ Master Language="C#" MasterPageFile="~/umbraco/masterpages/default.master" AutoEventWireup="true" %>

<asp:Content ContentPlaceHolderID="ContentPlaceHolderDefault" runat="server">
    <!doctype html>
    <html>
    <head title="Movafaqiyat" runat="server">

    </head>
    <body>
        <form id="form1" runat="server">
            <div id="MasterMaster" style="width: 100%;">
                <div style="width: 100%;">
                    <asp:ContentPlaceHolder ID="HeaderParentContent" runat="server">
                    </asp:ContentPlaceHolder>
                </div>
                <div style="width: 100%;">
                    <asp:ContentPlaceHolder ID="MenuContent" runat="server">
                    </asp:ContentPlaceHolder>
                </div>
                <div style="width: 100%;">
                    <asp:ContentPlaceHolder ID="FooterParentContent" runat="server">
                    </asp:ContentPlaceHolder>
                </div>
            </div>
        </form>
    </body>
    </html>
</asp:Content> 
```

> Blockquote HeaderParent.master 代码：

```
<%@ Master Language="C#" MasterPageFile="~/masterpages/Master.master" AutoEventWireup="true" %>

<asp:Content ContentPlaceHolderID="HeaderParentContent" runat="server">
    <div id="HeaderParentMaster" style="width: 100%; border: 1px solid red;">
        <div>
            <asp:ContentPlaceHolder ID="HeaderContent" runat="server">
            </asp:ContentPlaceHolder>
        </div>
    </div>
</asp:Content> 
```

> Blockquote Header.master 代码：

```
<%@ Master Language="C#" MasterPageFile="~/masterpages/HeaderParent.master" AutoEventWireup="true" %>
    <asp:Content ContentPlaceHolderID="HeaderContent" runat="server">
        <div style="width: 100%">
            Did not show HEADER.Master IN HERE!    
        </div>
    </asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:59:34.710

@BeaverProj 和 @amelvin：非常感谢您对我的回答。它们对我都很有用。但我用这种方法解决了我的问题：

![在此处输入图像描述](../Images/9404a31bbf9eeec146b3b35a6573da2e.png)

![在此处输入图像描述](../Images/757bc0b1a00225acd38f030114037029.png)

```
<form id="form1" runat="server">
   <div id="MasterMaster" style="width: 100%;">
       <uc1:HeaderControl runat="server" ID="HeaderControl" />
   <div>
       <asp:ContentPlaceHolder ID="defaultPageContent" runat="server">
       </asp:ContentPlaceHolder>
   </div>
 </form> 
```

> DefaultPage.master 代码：

```
<%@ Master Language="C#" MasterPageFile="~/masterpages/Menu.master" AutoEventWireup="true" %>

<%@ Register Src="~/usercontrols/DefaultControl.ascx" TagPrefix="uc1" TagName="DefaultControl" %>

<asp:Content ContentPlaceHolderID="defaultPageContent" runat="server">
    <uc1:DefaultControl runat="server" ID="DefaultControl" />
</asp:Content> 
```

应用这些更改后，我得到了我需要的东西。现在，当我运行程序时，我看到了默认页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:06:12.973

标题模板是否分配给任何内容页面？尝试将该模板用作 altTemplate 并查看它是否有效：

[http://yoursitedomain.com/Header.aspx](http://yoursitedomain.com/Header.aspx)

的

[http://yoursitedomain.com/?altTempalte=标头](http://yoursitedomain.com/?altTempalte=Header)

如果这显示了内容，那么它可能只是您认为分配了该模板的页面，没有。

如果您认为这是一个错误，那么也许可以提交错误报告或在 Our Umbraco 上提出这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T15:39:41.143

我认为您最好创建宏来封装小块功能（如标题内容）并将它们放入 Master.master 模板中。而不是继承母版页，其中子母版页仅用于简单呈现。

就设计而言，您将创建使用 Header.master 文件中设置的设计的页面——我认为您实际上并不想这样做。它会建议您将创建一个名为 header.aspx 的**内容**页面——基于**header.Master 模板**——这听起来是错误的。

母版页可以继承结构和设计 - 但链底部的最终模板是呈现包含连接文档类型中设置的字段的页面的基础 - 不仅仅是用于演示。

类似以下的内容是一种替代方法，将渲染的内容（静态或动态）放入宏中——作为奖励，然后可以将宏缓存在 Umbraco 中：

```
<div style="width: 100%;">
    <asp:Macro ID="HeaderParentContent" runat="server" parm1="#inheritedValue"/>
</div> 
```

如果您打算将内容模板放在 header.master 模板（例如 MyPageTemplate.master）下，那么您的设计仍然可以工作——但看起来仍然比需要的复杂一些。

# android - 使用水平滑动切换选项卡

> ID：14304779
> 
> 赞同：1
> 
> 时间：2013-01-13T15:13:15.700
> 
> 标签：android, tabs, android-fragments, fragment, gesture

我目前正在开发一个 android 项目，并创建了一个小测试项目来测试 Tab 的使用并通过使用水平滑动手势来更改选项卡。

除了一个问题外，该代码几乎可以正常工作。当我滑动内容以更改选项卡时，会显示第二个选项卡的活动，但未选择实际选项卡。即在 android 4.2 上，当应用程序加载时，它会启动主 FragmentActivity，然后显示位于选项卡 1 内的第一个片段（片段 1）。然后选项卡 1 下方有一条蓝线，以显示该选项卡已被选中。

如果我然后滑动屏幕，则会显示第二个活动，但蓝线会停留在选项卡 1 下方，并且不会移动到选项卡 2。

但是，如果我选择实际选项卡而不是滑动，那么蓝线确实会按预期移动到第二个选项卡上。

我怀疑我从正在看的教程中错过了一些非常简单的东西，但我一生都找不到那可能是什么。

下面是我为 FragmentActivity 编写的代码。这是应用程序首次启动时加载的内容。

```
public class TabsViewPagerFragmentActivity extends FragmentActivity 
    implements OnTabChangeListener, OnPageChangeListener{

    private TabHost mTabHost;
    private ViewPager mViewPager;
    private HashMap<String, TabInfo> mapTabInfo = new HashMap<String, TabInfo>();
    private PagerAdapter mPagerAdapter;

    private class TabInfo
    {
        private String tag;
        private Class<?> clss;
        private Bundle bundle;
        private Fragment fragment;
        public TabInfo(String tag, Class<?> clss, Bundle bundle) {
            this.tag = tag;
            this.clss = clss;
            this.bundle = bundle;
        }
    }

    class TabFactory implements TabContentFactory
    {
        private final Context mContext;

        public TabFactory (Context context)
        {
            mContext = context;
        }

        public View createTabContent(String tag)
        {
            View view = new View(mContext);
            view.setMinimumWidth(0);
            view.setMinimumHeight(0);
            return view;
        }   
    }

    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        this.initialiseTabHost(savedInstanceState);
        if (savedInstanceState != null)
        {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
        }
        this.initialiseViewPager();
    }

    protected void onSaveInstancestate(Bundle outState)
    {
        outState.putString("tab", mTabHost.getCurrentTabTag());
        super.onSaveInstanceState(outState);
    }

    private void initialiseViewPager()
    {
        List<Fragment> fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, Tab1Fragment.class.getName()));
        fragments.add(Fragment.instantiate(this, Tab2Fragment.class.getName()));
        this.mPagerAdapter = new PagerAdapter(super.getSupportFragmentManager(), fragments);
        this.mViewPager = (ViewPager)super.findViewById(R.id.viewpager);
        this.mViewPager.setAdapter(this.mPagerAdapter);
        this.mViewPager.setOnPageChangeListener(this);
    }

    private void initialiseTabHost(Bundle bundle)
    {
        mTabHost = (TabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup();
        TabInfo tabInfo = null;
        TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost,
                this.mTabHost.newTabSpec("Tab 1").setIndicator("Tab 1"),
                tabInfo = new TabInfo("Tab1", Tab1Fragment.class, bundle));
        TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost,
                this.mTabHost.newTabSpec("Tab 2").setIndicator("Tab 2"),
                tabInfo = new TabInfo("Tab2", Tab2Fragment.class, bundle));

        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        mTabHost.setOnTabChangedListener(this);
    }

    private static void AddTab(TabsViewPagerFragmentActivity activity, TabHost tabHost,
            TabHost.TabSpec tabSpec, TabInfo tabInfo)
    {
        tabSpec.setContent(activity.new TabFactory(activity));
        tabHost.addTab(tabSpec);
    }

    @Override
    public void onPageScrollStateChanged(int arg0) {

    }

    @Override
    public void onPageScrolled(int position, float positionOffset, 
            int positionOffsetPixels) {

    }

    @Override
    public void onPageSelected(int position) {
        this.mViewPager.setCurrentItem(position);
    }

    @Override
    public void onTabChanged(String tag) {
        int pos = this.mTabHost.getCurrentTab();
        this.mViewPager.setCurrentItem(pos);
    }
} 
```

下面是 PageAdapter 的代码

```
public class PagerAdapter extends FragmentPagerAdapter {

    private List<Fragment> fragments;

    public PagerAdapter(FragmentManager fm, List<Fragment> fragments)
    {
        super(fm);
        this.fragments = fragments;
    }

    public int getCount()
    {
        return this.fragments.size();
    }

    @Override
    public Fragment getItem(int position) {
        return this.fragments.get(position);
    }
} 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:36:00.730

Add `mTabHost.setCurrentTab(position)` to the `onPageSelected()` method in your `FragmentActivity`.

# android - 浏览器状态/数据/html是否加密？

> ID：14304787
> 
> 赞同：1
> 
> 时间：2013-01-13T15:13:44.290
> 
> 标签：android, iphone, ios, ipad

目前，我正在寻找由移动设备浏览器托管的移动设备应用程序。

据我了解，当设备的浏览器操作暂停/休眠时，即电话响起并且他们接听电话时，浏览器状态将被写入内存（NAND）并且未加密。此状态包括 OSI 6 和 7 中的所有内容。例如，从屏幕上可以看到的所有内容。

这种理解正确吗？如果是这样，是否可以加密此数据（不使用本机 API）并且可以在设备上进行配置？

注意：此问题针对 Android 和 iOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:32:36.430

以下是针对安卓的。

> 据我了解，当设备的浏览器操作暂停/休眠时

Android中没有这样的概念。Android 设备不使用 Linux 交换。

> 即电话响起，他们接听电话

这不涉及“暂停”或“休眠”，因为这些术语在现代操作系统中使用。浏览器进程只是移动到后台。

> 然后浏览器状态被写入内存（NAND）并且未加密。此状态包括 OSI 6 和 7 中的所有内容。

浏览器保留什么“状态”取决于浏览器的实现者。有许多适用于 Android 的浏览器。

当浏览器写入任何状态时，也取决于浏览器的实现者。有许多适用于 Android 的浏览器。

浏览器是否选择加密该状态也取决于浏览器的实现者。有许多适用于 Android 的浏览器。

Note that the *user* may also have elected to encrypt such state, insofar as they turned on whole-disk encryption for their Android 4.0+ device. That is independent of whether the browser itself does any encryption. Note that it is theoretically possible that a browser will persist "state" to external storage, which may yet be unencrypted -- encrypting external storage may be an option for the user.

> If so, is it possible to encrypt this data (without using the native API)

Users can enable whole-disk encryption if they so choose. You are welcome to implement your own Web browser that stores "state" encrypted, if you so choose. If you use in-browser storage mechanisms, you can elect to encrypt the data you pass to those APIs, if you so choose.

# jquery - 如何在网站上加载所有脚本

> ID：14304791
> 
> 赞同：1
> 
> 时间：2013-01-13T15:14:05.040
> 
> 标签：jquery, wordpress, nivo-slider

所以我刚刚设置了一个 Nivo 滑块，尽管现在这导致其余脚本无法正常工作。我无法编辑 nivo 滑块的加载位置，因为它是一个插件，但我需要强制这些脚本在网站之前加载，否则，没有帖子显示？

我不知道如何做到这一点，这是我对这个网站最不需要做的事情。所以迫切地想要完成它。哈哈

这是有问题的页面：http: [//hobhob.co.uk/whmag/](http://hobhob.co.uk/whmag/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:50:53.650

假设您是 WordPress 网站的管理员，您可以使用[插件编辑器编辑插件](http://codex.wordpress.org/Plugins_Editor_Screen)。我建议通过搜索[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)函数来查找 Nivo 滑块如何调用其 JS 文件，因为这是加载 JS 文件的推荐方式。

此外，大多数插件开发人员在开发插件时应该考虑 WordPress 环境中的其他 JS 文件，因此问题不一定出在滑块插件上，而是您正在加载的其他一些 JS 文件。使用消除过程，尝试一个一个禁用插件，看看是否有其他插件导致问题。

祝你好运！

# google-ads-api - 谷歌移动广告网址广告服务器

> ID：14304794
> 
> 赞同：1
> 
> 时间：2013-01-13T15:14:20.707
> 
> 标签：google-ads-api

我一直在寻找谷歌移动广告的广告服务器。我似乎无法找到它。

我正在添加一些过滤器（测试），例如 ads.whateverdomain/* 等，并且想知道是否有人知道我在哪里可以找到它，或者如果有人已经知道的话甚至更好？无论是模式还是子域，任何指示都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:15:05.030

好的 1 个月后询问并没有回复，所以我将粘贴我的发现作为答案，感谢adaway android 应用程序的[主机文件](http://code.google.com/p/ad-away/wiki/HostsSources)：

*   googleads.g.doubleclick.net
*   pagead2.googlesyndication.com
*   合作伙伴.googleadservices.com
*   www.googleadservices.com

添加`googleads.g.doubleclick.net`到路由器的域过滤功能已从移动应用程序中删除了一些广告。

# scala - 来自 Map 的案例类

> ID：14304803
> 
> 赞同：7
> 
> 时间：2013-01-13T15:15:19.300
> 
> 标签：scala, maps, case-class

我正在尝试实现从 Scala 案例类到 Maps（field_name -> field_value）的（反）序列化。问题是我不知道如何创建一个函数，它需要一个案例类类型和一个映射，实例化、填充并返回它。我已经在一些 JSON 库中看到了这一点，但我没有得到代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T15:28:30.757

为特定的案例类执行此操作很简单：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

case class Foo(x: Int, y: Double, z: String) {
  def toMap = Map('x -> x, 'y -> y, 'z -> z)
}
object Foo {
  def apply(vals: Map[Symbol, Any]): Foo = Foo(vals('x).asInstanceOf[Int], vals('y).asInstanceOf[Double], vals('z).asInstanceOf[String])
}

// Exiting paste mode, now interpreting.

defined class Foo
defined module Foo

scala> Foo(Map('x -> 1, 'y -> 2.0, 'z -> "wibble"))
res0: Foo = Foo(1,2.0,wibble)

scala> res0.toMap
res1: scala.collection.immutable.Map[Symbol,Any] = Map('x -> 1, 'y -> 2.0, 'z -> wibble) 
```

但我猜你想创建适用于任何案例类的东西，你不一定知道值的名称是什么？

在这种情况下，您将不得不看一下反射（在 Scala 2.10.0 中添加）：

[http://docs.scala-lang.org/overviews/reflection/overview.html](http://docs.scala-lang.org/overviews/reflection/overview.html)

您可以使用反射来遍历一个类的成员，找出他们的名字，然后创建您的地图。例如：

```
scala> import reflect.runtime.universe._
import reflect.runtime.universe._

scala> typeOf[Foo].members filter { m => m.isMethod && m.asMethod.isStable }
res2: Iterable[reflect.runtime.universe.Symbol] = SynchronizedOps(value z, value y, value x) 
```

# java - 需要在同一框架/面板中的现有绘图之上添加绘图

> ID：14304804
> 
> 赞同：2
> 
> 时间：2013-01-13T15:15:25.350
> 
> 标签：java, swing, drawing, java-2d, paintcomponent

我基本上有一个矩形矩阵，想分别绘制它们，但是绘制的每一个都会删除之前的任何一个，最后我得到一个最后一个孤独的矩形。而且我一直在谷歌上搜索几个小时，我发现的唯一建议是一次全部画出来，我尝试过，但似乎完全毁了我的听众，这些听众是围绕每个单独的组件构建的。

```
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.Color;
import javax.swing.JComponent;

@SuppressWarnings("serial")
public class GraphicEdge extends JComponent
{

    public Rectangle box;
    private Edge edge;
    /**
     * Creates a graphical box corresponding to the given edge at the given 
     * position
     * @param x x coordinate 
     * @param y y coordinate
     * @param e edge represented
     */
    public GraphicEdge(int x, int y, int width, int length, Edge e)
    {
        this.edge = e;
        this.box = new Rectangle(x, y, width, length);
    }
    /**
     * Paints said edge. Will be recalled whenever the edge switches from 
     * active to inactive.
     * @param g graphics.
     */

    public void paintComponent(Graphics g)
    {

        Graphics2D g2 = (Graphics2D)g;

        if (this.edge.getActive()==0)
        {
            g2.setColor(Color.red);
        }
        else
        {
            g2.setColor(Color.green);
        }
        g2.fill(this.box);
        g2.draw(this.box);

    }
    /**
     * Calls for the redrawing of the component.
     */
    public void redrawComponent()
    {
        repaint();
    }

    /**
     * Gets edge.
     */
    public Edge getEdge()
    {
        return this.edge;
    }
    /**
     * Returns the edge's rectangle.
     * @return
     */
    public Rectangle getBox()
    {
        return this.box;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:06:13.470

如果我理解正确，您基本上是想让您的图纸`paintComponent`持久化？

好吧，默认情况下，所有完成的图纸`paintComponent`都不是持久的。

因此 on`repaint()` `paintComponent`将被再次调用并绘制该方法告诉它的任何内容。

所以要解决你的问题：

`List`1）在你的类内部创建一个扩展`JPanel`（`JComponent`除非出于某种原因）。

2）制作一种`public`方法以允许添加到列表（并在需要时删除）。

3）在`paintComponent`遍历`List`并绘制每个对象。

这是一个示例（用鼠标单击容器上的任意位置以绘制 a `Rectangle`）：

![在此处输入图像描述](../Images/884d3f0c8e0bc3d4bc2e0506e2414e4c.png)

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import java.util.List;
import javax.swing.*;

public class Test {

    private final JFrame frame = new JFrame();
    private final MyPanel panel = new MyPanel();

    private void createAndShowUI() {
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test().createAndShowUI();
            }
        });
    }
}

class MyPanel extends JPanel {

    private List<Rectangle> recs = new ArrayList<>();

    public MyPanel() {
        initComponents();
    }

    private void initComponents() {
        addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent me) {
                super.mouseClicked(me);
                addRec(new Rectangle(me.getPoint().x, me.getPoint().y, 100, 50));
                repaint();
            }
        });
    }

    public void addRec(Rectangle rec) {
        recs.add(rec);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D) g;

        for (Rectangle rec : recs) {
            g2d.drawRect(rec.x, rec.y, rec.width, rec.height);
        }
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(400, 400);
    }
} 
```

注意正如@HFOE 所说，请记住在`super.paintComponent(g)`第一次调用被覆盖时调用`paintComponent`以尊重*油漆链*，否则可能会发生视觉异常。

# r - 通过格子中的点绘制二次样条

> ID：14304805
> 
> 赞同：7
> 
> 时间：2013-01-13T15:15:29.587
> 
> 标签：r, lattice

基于这个伟大的问题：[如何绘制通过一些点的平滑曲线](https://stackoverflow.com/questions/14303251/how-to-draw-a-smooth-curve-passing-through-some-points)

在格子中如何做到这一点？

```
plot(rnorm(120), rnorm(120), col="darkblue", pch=16, xlim=c(-3,3), ylim=c(-4,4))
points(rnorm(120,-1,1), rnorm(120,2,1), col="darkred", pch=16)
points(c(-1,-1.5,-3), c(4,2,0), pch=3, cex=3)
xspline(c(-1,-1.5,-3), c(4,2,0), shape = -1) 
```

![应该是这样的：](../Images/4182f30ca28973d9b36e37f9da265380.png)

这是类似的数据，格式更适合`lattice`绘图：

```
dat <- data.frame(x=c(rnorm(120), rnorm(120,-1,1)),
                  y=c(rnorm(120), rnorm(120,2,1)),
                  l=factor(rep(c('B','R'),each=120))
)
spl <- data.frame(x=c(-1,-1.5,-3), 
                  y=c(4,2,0)
) 
```

这是链接问题给出的内容，翻译为`lattice`：

```
xyplot(y ~ x,
       data=dat,
       groups=l,
       col=c("darkblue", "darkred"),
       pch=16,
       panel = function(x, y, ...) {
         panel.xyplot(x=spl$x, y=spl$y, pch=3, cex=3)
         ## panel.spline(x=spl$x, y=spl$y)              ## Gives an error, need at least four 'x' values
         panel.superpose(x, y, ...,
                         panel.groups = function(x, y, ...) {
                           panel.xyplot(x, y, ...)
                         }
         )
       },
       xlim=c(-3,3), ylim=c(-4,4)
) 
```

![在此处输入图像描述](../Images/710a72be82473d5b4091ed444982f284.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T02:14:58.200

**这是基本**图形解决方案到**lattice**的逐行“翻译” 。**（ latticeExtra**包`+`提供的操作符使翻译的直接性成为可能 。有关其用法的详细信息，请参阅。）**[`?layer`](http://latticeextra.r-forge.r-project.org/man/layer.html)**

 **最后一行调用了**基本**图形函数[`grid.xspline()`](http://stat.ethz.ch/R-manual/R-patched/library/grid/html/grid.xspline.html)的精确**网格**模拟。**`xspline()`**

 **```
library(lattice)
library(grid)
library(latticeExtra)

xyplot(rnorm(120)~rnorm(120), pch=16, col="darkblue", 
       xlim = c(-3.1, 3.1), ylim = c(-4.1, 4.1)) +
xyplot(rnorm(120,2,1) ~ rnorm(120,-1,1), pch=16, col="darkred") +
xyplot(c(4,2,0) ~ c(-1,-1.5,-3), pch=3, cex=3) +
layer(grid.xspline(c(-1,-1.5,-3), c(4,2,0), shape = -1, default.units="native")) 
```

（**网格**的一个特殊细节确实出现在上面的最后一行中：就像它的其他几个低级画线函数一样，`grid.xspline()`默认为单位而不是许多其他函数默认使用`"npc"`的通常所需的`"native"`单位。显然这很容易足以改变——一旦你意识到它！）`grid.points()``grid.*()`

![在此处输入图像描述](../Images/e7c2d7252247a6506c1ed7164f9cb960.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T16:34:58.713

这有点棘手，但有效。

```
plot(rnorm(120), rnorm(120), col="darkblue", pch=16, xlim=c(-3,3), ylim=c(-4,4))
points(rnorm(120,-1,1), rnorm(120,2,1), col="darkred", pch=16)
points(c(-1,-1.5,-3), c(4,2,0), pch=3, cex=3) 
```

我使用`xspline`而不产生平局

```
dd <- xspline(c(-1,-1.5,-3), c(4,2,0), shape = -1,draw=FALSE) 
```

然后我使用产生的积分`panel.lines`

```
library(lattice)
xyplot(y ~ x,
       data=dat,
       groups=l,
       col=c("darkblue", "darkred"),
       pch=16,
       panel = function(x, y, ...) {
         panel.xyplot(x=spl$x, y=spl$y, pch=3, cex=3)
         panel.lines(dd$x,dd$y)
         panel.superpose(x, y, ...,
                         panel.groups = function(x, y, ...) {
                           panel.xyplot(x, y, ...)
                         }
         )
       },
       xlim=c(-3,3), ylim=c(-4,4)
) 
```

![在此处输入图像描述](../Images/836321df5199a9373c24459218e84eb8.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T10:35:31.243

This is not a solution, by an attempt to use Josh solution with `grid.xspline` in `ggplot2`. I think it is interesting to get a parallel between ggplot2/lattice.

![enter image description here](../Images/9c6ad7ec3fdaaf1c96610b7fa848d260.png)

```
## prepare the data
dat <- data.frame(x=c(rnorm(120), rnorm(120,-1,1)),
                 y=c(rnorm(120), rnorm(120,2,1)),
                 l=factor(rep(c('B','R'),each=120))
)
spl <- data.frame(x=c(-2,-1.5,-3), 
                  y=c(4,2,0)
)
## prepare the scatter plot
library(ggplot(2))
p <- ggplot(data=dat,aes(x=x,y=y,color=l))+
  geom_point()+
  geom_point(data=spl,aes(x=x,y=y),color='darkred',size=5)
library(grid)
ff <- ggplot_build(p) 
```

My idea is to use the scales generated by ggplot2, to create the spline in the same panel than the scatterplot. Personally I find this tricky, and I hope that someone comes with a better solution.

```
xsp.grob <- xsplineGrob(spl$x, spl$y,
                        vp=viewport(xscale =ff$panel$ranges[[1]]$x.range,
                                    yscale = ff$panel$ranges[[1]]$y.range),
                        shape = -1, default.units="native")
p
grid.add(gPath='panel.3-4-3-4',child=xsp.grob) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-13T17:30:16.663

我终于找到了一个解决方案，基于这个问题的答案： [二次样条](https://stackoverflow.com/questions/12925533/quadratic-spline)

使用包`splines`

用以下代码替换`panel.splines(`... `)`（上面注释掉）：

```
 local({
           model <- lm(y ~ bs(x, degree=2), data=spl)
           x0 <- seq(min(spl$x), max(spl$x), by=.1)
           panel.lines(x0, predict(model, data.frame(x=x0)))
         }) 
```

![在此处输入图像描述](../Images/ccf8a130726aa9705e588a0ccdfdd0a0.png)

根据 Josh O'Brien 的出色建议，`grid.xspline()`可以替换注释掉的`panel.splines(`...`)`行，从而得到与上面链接的基本问题中的确切情节（除了边距）：

```
 grid.xspline(spl$x, spl$y, shape = -1, default.units="native") 
```

![在此处输入图像描述](../Images/33a44b44d433c741368804fccb607aa8.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T16:09:39.597

这是来自 Deepayan Sarkar 的样条面板的变​​体

```
panel.smooth.spline <-  function(x, y,
                                 w=NULL, df, spar = NULL, cv = FALSE,
                                 lwd=plot.line$lwd, lty=plot.line$lty,col, 
                                 col.line=plot.line$col,type, ... )
{
  x <- as.numeric(x)
  y <- as.numeric(y)
  ok <- is.finite(x) & is.finite(y)
  if (sum(ok) < 1)
    return()
  if (!missing(col)) {
    if (missing(col.line))
      col.line <- col
  }
  plot.line <- trellis.par.get("plot.line")
  spline <-   smooth.spline(x[ok], y[ok],
                            w=w, df=df, spar = spar, cv = cv)
  pred = predict(spline,x= seq(min(x),max(x),length.out=150))
  panel.lines(x = pred$x, y = pred$y, col = col.line,
              lty = lty, lwd = lwd, ...)
  panel.abline(h=y[which.min(x)],col=col.line,lty=2)
} 
```****

# python - 如何使用 Django 在我的页面中写入异常值

> ID：14304806
> 
> 赞同：1
> 
> 时间：2013-01-13T15:15:33.987
> 
> 标签：python, django

我想知道在引发异常值时如何返回到我的页面（并因此编写它）。例如现在我正在这样做：

```
try:
    user.save()
except:
    err_msg="An error verified during user adding process. Please repeate the procedure"
return render_to_response('staff.html', {'m':m, 'err_msg':err_msg}) 
```

我想对用户更清楚，并告诉他引发了什么错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:21:17.177

您不应该向用户显示实际的错误消息。这在安全性方面很糟糕。你刚刚做的很好。但是您应该通过打印实际错误消息来找出失败的原因以进行调试：

```
try:
    user.save()
except Exception, e:
    print e.message # print actual error message and figure out what went wrong
    err_msg="An error verified during user adding process. Please repeate the procedure"
return render_to_response('staff.html', {'m':m, 'err_msg':err_msg}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:21:40.717

如果您要问，如何捕获错误消息的*文本*，只需捕获并打印它：

```
try:
   '2' + 2
except TypeError as e:
   print '{}'.format(e) 
```

您也可以`print e.message`，但尝试直接打印会更安全。

如果您不知道会引发什么异常，您可以使用通用的 except 子句，然后执行以下操作：

```
import sys

try:
   '2' + 2
except:
    print sys.exc_info()[1].message 
```

但是，通用的 except 子句不是好的编程习惯。明确地捕获异常总是好的。

# python - 将 Sage 符号表达式转换为字符串

> ID：14304807
> 
> 赞同：2
> 
> 时间：2013-01-13T15:15:52.347
> 
> 标签：python, sage

我想将 Sage 符号表达式转换为：

```
y = 5*x + 7^x + 3*x^2 
```

到一个我可以通过下标访问的字符串（ y[0] = '5', y[1] = '*' 等。

我需要这样做，因为我想计算表达式中特定变量的出现次数。在上面的例子中，变量“X”出现了 3 次。

如果有人知道另一种方法来实现这一目标，我也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T15:40:44.313

我认为每个人都误解了这个问题——我们是从 Sage 的象征性表达开始的。

```
sage: y = 5*x + 7^x + 3*x^2
sage: y
7^x + 3*x^2 + 5*x
sage: type(y)
<type 'sage.symbolic.expression.Expression'> 
```

我会使用`operands()`and编写一个小递归walker `operator()`：

```
def var_counter(someexpr, v):
    tor = someexpr.operator()
    if tor is None:
        return int(v in someexpr.variables())
    else:
        return sum(var_counter(operand, v) for operand in someexpr.operands()) 
```

这似乎有效：

```
sage: x, x2, x3 = var("x x2 x3")
sage: y = 5*x + 7^x + 3*x^2 + x2**(x3+3*sin(x))
sage: var_counter(y, x)
4
sage: var_counter(y, x2)
1
sage: var_counter(y, x3)
1 
```

如果要将表达式转换为字符串，只需调用`str`：

```
sage: str(y)
'7^x + 3*x^2 + 5*x + x2^(x3 + 3*sin(x))'
sage: str(y)[2]
'x'
sage: str(y)[6]
'3' 
```

# javascript - Bootstrap：使用 Tab Press 访问单选按钮

> ID：14304812
> 
> 赞同：2
> 
> 时间：2013-01-13T15:16:22.047
> 
> 标签：javascript, forms, twitter-bootstrap, accessibility

我有一个 Bootstrap 表单（请参阅[此处](http://jsfiddle.net/MgcDU/1301/)的小提琴和下面的代码）。

使用键盘选项卡按钮时，从第一个字段开始，我可以浏览表单字段。但是，我有一个单选按钮条目（管理员/操作员）被标签按下跳过。

如何通过制表键访问表单的单选按钮？

```
<form class='form-horizontal'>
  <div class='control-group'>
    <label class='control-label'>Username</label>
    <div class='controls'>
      <input type='text' class='username' id='new-user-username' placeholder='Username'
      />
    </div>
  </div>
  <div class='control-group'>
    <label class='control-label'>Rights</label>
    <div class='controls'>
      <div class='btn-group' data-toggle='buttons-radio' id='new-user-rights'> <span class='btn'>Administrator</span>
 <span class='btn' id='new-user-operator'>Operator</span>

      </div>
    </div>
  </div>
  <div class='control-group'>
    <label class='control-label'>Password</label>
    <div class='controls'>
      <input type='password' class='password' id='new-user-password' placeholder='Password'
      />
    </div>
  </div>
  <div class='control-group'>
    <label class='control-label'>Confirm password</label>
    <div class='controls'>
      <input type='password' class='confirm' id='new-user-confirm' placeholder='Confirm password'
      />
    </div>
  </div>
  <div class='controls'>
    <button type='button' class='btn btn-primary' id='new-user-button'>Add new user</button>
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:46:56.773

您不会取得太多成就，因为如果您要通过输入进行选项卡，您只需在收音机中进行选项卡，您无法对其进行任何操作，因为如果您想按回车键选择一个，表格将被发送.

无论如何，您可以使用 HTML[`tabindex`](http://www.w3schools.com/tags/att_global_tabindex.asp)属性：

```
<input type='password' tabindex="1"> 
```

[jsFiddle](http://jsfiddle.net/DJDavid98/MgcDU/1304/)

**根据您的评论进行编辑：**

包括以下代码：

```
$('#new-user-rights span').keyup(function(e){
    e = e || window.event;

    if (e.keyCode == 32){
        $('#new-user-rights span').removeClass('active')
        $(this).addClass('active');
    }
}) 
```

[jsFiddle](http://jsfiddle.net/DJDavid98/MgcDU/1306/)

# html - 如何隐藏 iframe src 链接

> ID：14304815
> 
> 赞同：2
> 
> 时间：2013-01-13T15:16:49.807
> 
> 标签：html, iframe

我在一个主题中有以下 iframe 代码：

```
<!DOCTYPE html>
<html>
<body>

<iframe src="http://whatever.com">
  <p>Your browser does not support iframes.</p>
</iframe>

</body>
</html> 
```

反正有隐藏 iframe src 链接吗？我不希望用户看到 iframe 源代码。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T15:17:43.950

> 反正有隐藏 iframe src 链接吗？

不。

> 我不希望用户看到 iframe 源代码。

抱歉，那么您根本不应该包含此 iframe。

FireBug 之类的工具可以非常轻松地分析网络流量并准确查看 HTML 正在访问的站点。所以无论你多么努力地混淆你的代码，把它埋在大量的压缩、缩小和上帝知道还有什么其他的javascript动态生成这个iframe并将它注入到DOM中，只需查看客户端[的FireBug的Network选项卡](http://getfirebug.com/network)就会能够立即看到您发出的确切 HTTP 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-27T06:26:37.183

我找到了一个 node.js npm 插件，它可以隐藏任何 src="*" 以及 content+href - 易于使用 [https://www.npmjs.com/package/location-hide](https://www.npmjs.com/package/location-hide)

这也适用于 php href、src、内容，它将使用 src="" 中的所有内容

您只需要 node.js 来创建导出的文件。即使您不了解 node.js，它也很容易使用。您可以观看安装和使用 node.js 的 youtube 指南 如果您创建环境 1 次，您可以使用 npm 加载很酷的东西

事实证明

```
<script src="test/folder/sample.js" type="text/javascript"></script>  
<link href="test/stylesheet/perfect-scrollbar.css" rel="stylesheet"> 
```

进入

```
<script src="TNANIuTOLZfmLYwaPDIYhcZDVOWKodqYhysaTeQHFPDhYlDLCOtxZqYmkKAhaSwSgbsYOWlpBzVSBtMZKSfwRqvPSqWVlBBuzHR" type="text/javascript"></script>  
<link href="gyXeFnOEvZbgTjLvdZRnsyrfhaXqffkDjcdATTouqpIenCalLRXKamuXEtiKbPGCsNrdQIaqTMTNWsLyLFuxygKytaruWzSjKYMq" rel="stylesheet"> 
```

它会生成新的 jquery 包含这样的代码，以在外部文件中包含带有 javascript 的脚本

```
$('[src=\'TNANIuTOLZfmLYwaPDIYhcZDVOWKodqYhysaTeQHFPDhYlDLCOtxZqYmkKAhaSwSgbsYOWlpBzVSBtMZKSfwRqvPSqWVlBBuzHR\']').attr("src", "test/folder/sample.js")  
$('[href=\'gyXeFnOEvZbgTjLvdZRnsyrfhaXqffkDjcdATTouqpIenCalLRXKamuXEtiKbPGCsNrdQIaqTMTNWsLyLFuxygKytaruWzSjKYMq\']').attr("src", "test/stylesheet/perfect-scrollbar.css") 
```

另外，我建议您将所有外部 javascript 代码包含在 1 个单个 js 文件中。您可以将此文件放在索引文件的根目录中

```
<script src="./allinone_external_file.js" type="text/javascript"></script> 
```

然后使正确的 htaccess 没有人可以访问这个文件。您还可以为每个人都可以看到的源代码制作一个虚假的导入脚本。但是这个文件只是对真正的外部 js 文件的重定向。您多次这样做作为示例+使用其他混淆工具。这将保护您免受人们使用您的 javascript 代码搜索漏洞的侵害。我知道这没什么大不了的，如果你知道的话，也许你可以看到 jquery 包含代码。但无论如何，它是一个很好的保护。

# gwt - GWT 和 maven：正在删除的静态文件

> ID：14304816
> 
> 赞同：1
> 
> 时间：2013-01-13T15:17:02.600
> 
> 标签：gwt, maven

我将一个 gwt 项目转换为使用 maven。我们使用'war'作为我们输出put的目录。这是一个好主意吗？

在这个目录中，我们还有 css、html 和 javascript 文件。

现在，当我从 Eclipse 中运行项目时，html、js 等都消失了。如果我把文件放回去，就会再次被删除。基本上，我如何设置我们的项目，以便我们可以拥有我们的 js、图像、css 文件 - 不是作为资源 - 而只是作为静态文件 - 并且在我们运行项目时不会将它们删除，但仍然可以让我们的 gwt 使用它们应用程序，它何时运行？

这是我的 pom.xml。我希望你能帮助我。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.magick.app</groupId>
<artifactId>com.magick.app</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>war</packaging>
<name>magick.app</name>
<description>Magick.App</description>
<build>
    <sourceDirectory>src</sourceDirectory>
    <testSourceDirectory>test</testSourceDirectory>
    <resources>
        <resource>
            <directory>src</directory>
            <excludes>
                <exclude>**/*.java</exclude>
            </excludes>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <configuration>
                <webXml>war\WEB-INF\web.xml</webXml>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <!-- <version>2.5.0</version> 2.1.0-1 -->
            <version>${gwt.version}</version>
            <configuration>

            </configuration>

            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>generateAsync</goal>
                        <goal>test</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>

        <!--This plugin's configuration is used to store Eclipse m2e settings 
            only. It has no influence on the Maven build itself. -->
        <plugin>
            <groupId>org.eclipse.m2e</groupId>
            <artifactId>lifecycle-mapping</artifactId>
            <version>1.0.0</version>
            <configuration>
                <lifecycleMappingMetadata>
                    <pluginExecutions>
                        <pluginExecution>
                            <pluginExecutionFilter>
                                <groupId>org.codehaus.mojo</groupId>
                                <artifactId>
                                    gwt-maven-plugin
                                </artifactId>
                                <versionRange>
                                    [2.4.0,)
                                </versionRange>
                                <goals>
                                    <goal>i18n</goal>
                                    <goal>generateAsync</goal>
                                </goals>
                            </pluginExecutionFilter>
                            <action>
                                <ignore></ignore>
                            </action>
                        </pluginExecution>
                    </pluginExecutions>
                </lifecycleMappingMetadata>
            </configuration>
        </plugin>
    </plugins>
</build>
<dependencies>
    <dependency>
        <groupId>com.google.gwt.inject</groupId>
        <artifactId>gin</artifactId>
        <version>2.0.0</version>
    </dependency>
    <dependency>
        <groupId>com.google.inject.extensions</groupId>
        <artifactId>guice-servlet</artifactId>
        <version>3.0</version>
    </dependency>

    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-servlet</artifactId>
        <version>${gwt.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-user</artifactId>
        <version>${gwt.version}</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.atmosphere</groupId>
        <artifactId>atmosphere-gwt-client</artifactId>
        <version>1.0.8</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.atmosphere</groupId>
        <artifactId>atmosphere-gwt-server</artifactId>
        <version>1.0.8</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-jdk14</artifactId>
        <version>1.6.1</version>
    </dependency>
    <dependency>
        <groupId>com.github.gwtbootstrap</groupId>
        <artifactId>gwt-bootstrap</artifactId>
        <version>2.2.1.0-SNAPSHOT</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.danvk</groupId>
        <artifactId>dygraphs-gwt</artifactId>
        <version>2011.04.18</version>
    </dependency>

    <!-- <dependency> <groupId>com.gwtplatform</groupId> <artifactId>gwtp-all</artifactId> 
        <version>0.8-alpha-2</version> </dependency> -->

    <!-- MVP component -->
    <dependency>
        <groupId>com.gwtplatform</groupId>
        <artifactId>gwtp-mvp-client</artifactId>
        <version>${gwtp.version}</version>
        <scope>provided</scope>
    </dependency>

    <!-- Dispatch component -->
    <dependency>
        <groupId>com.gwtplatform</groupId>
        <artifactId>gwtp-dispatch-client</artifactId>
        <version>${gwtp.version}</version>
        <scope>provided</scope> <!-- Remove for GWTP 0.5.1 and earlier -->
    </dependency>

    <dependency>
        <groupId>com.gwtplatform</groupId>
        <artifactId>gwtp-dispatch-server-guice</artifactId>
        <!-- Or, if you use spring: <artifactId>gwtp-dispatch-server-spring</artifactId> -->
        <!-- For GWTP 0.5.1 and earlier: <artifactId>gwtp-dispatch-server</artifactId> -->
        <version>${gwtp.version}</version>
    </dependency>

    <!-- Crawler component -->
    <!-- <dependency> <groupId>com.gwtplatform</groupId> <artifactId>gwtp-crawler</artifactId> 
        <version>${gwtp.version}</version> </dependency> -->

    <!-- Annotation component -->
    <dependency>
        <groupId>com.gwtplatform</groupId>
        <artifactId>gwtp-processors</artifactId>
        <version>${gwtp.version}</version>
        <scope>provided</scope>
    </dependency>

    <!-- Tester component -->
    <!-- <dependency> <groupId>com.gwtplatform</groupId> <artifactId>gwtp-tester</artifactId> 
        <version>${gwtp.version}</version> <scope>test</scope> </dependency> -->

</dependencies>
<properties>
    <gwtp.version>0.7</gwtp.version>
    <gwt.version>2.4.0</gwt.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
<repositories>
    <repository>
        <id>sonatype</id>
        <url>http://oss.sonatype.org/content/repositories/snapshots</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
        <releases>
            <enabled>false</enabled>
        </releases>
    </repository>
</repositories> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:09:04.617

我们坚持为 webapp 项目使用默认的 maven 布局。

```
src/main/java
src/main/webapp
src/main/resources 
```

参考 - [https://developers.google.com/eclipse/docs/faq#gwt_with_maven](https://developers.google.com/eclipse/docs/faq#gwt_with_maven)

还要始终检查您的 pom.xml wrt 以从 GWT 团队中取样。只需将 gwt-maven-plugin 更新到最新的 2.5.0 -

1)[验证](http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/validation)

2) [Dynatablerf](http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/dynatablerf)

3)[移动网络应用](http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/mobilewebapp)

# powershell - powershell 和模块

> ID：14304823
> 
> 赞同：2
> 
> 时间：2013-01-13T15:18:08.993
> 
> 标签：powershell

我想知道 powershell 如何处理 powershell 模块 - 我一直在阅读有关 AppDomain、PSSession、Runspace 的信息，我想知道当 powershell 导入模块时，模块是否加载到同一个 AppDomain、同一个运行空间中？

我知道如果你把 C# 代码放在 powershell 中，c# 代码将被编译并加载到同一个 AppDomain 中。但是我找不到有关 Powershell 模块的相关信息。

- 编辑 -

我只是使用

```
[System.AppDomain]::CurrentDomain.FriendlyName 
```

它显示模块加载在同一个 AppDomain 中。但我仍然不知道 PSSession ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:33:03.970

如果您想找出加载了哪些模块，请执行`Get-Module`. 但不要将 PowerShell 模块与 ProcessModule（一个 .dll）混淆。如果进程模块是二进制 PowerShell 模块或 PSSnapin 的一部分，则进程模块可能与 PowerShell 相关。OTOH PowerShell 模块可以（并且通常是）只是一个 PSM1 文件 - 根本没有 dll。

AppDomain 是一个非常广泛的 .NET 概念，适用于所有 .NET 进程。PowerShell 具有运行空间，它是运行管道的环境，您的会话状态被管理（全局变量、提供程序状态等）。通常每个 PowerShell 进程都有一个运行空间，但在 PowerShell_ISE 的情况下，它可以有多个运行空间（每个 PowerShell 选项卡一个）。您可以通过以下方式看到这一点：

```
PS> $ExecutionContext.Host.Runspace

Events                 : System.Management.Automation.PSLocalEventManager
ThreadOptions          : ReuseThread
JobManager             : System.Management.Automation.JobManager
RunspaceConfiguration  :
InitialSessionState    : System.Management.Automation.Runspaces.InitialSessionState
Version                : 3.0
RunspaceStateInfo      : Opened
RunspaceAvailability   : Busy
ConnectionInfo         :
OriginalConnectionInfo :
LanguageMode           : FullLanguage
ApartmentState         : STA
InstanceId             : b80ae2aa-a70b-43b2-a63f-def6c92fd032
SessionStateProxy      : System.Management.Automation.Runspaces.SessionStateProxy
Debugger               : System.Management.Automation.Debugger 
```

请注意，在 PowerShell 提示符中，InstanceId 通常是相同的。例外是在不同运行空间（通常是不同的进程）中运行的作业、事件处理程序和工作流。

PSSession 是一种有点不同的野兽，用于指定与远程计算机的持久远程会话。

# lua - 如何将函数推入 Lua 中的 _G（全局空间）

> ID：14304826
> 
> 赞同：1
> 
> 时间：2013-01-13T15:18:31.813
> 
> 标签：lua, globals

TLDR；我的函数不能从 _G 范围调用，我希望它们可以通过解析字符串列表来调用函数。`package.seeall`框架要求的a 可能会加剧这种情况。

我在 luci 框架中工作，它是 OpenWRT 路由器的 UCI 前端。为了创建在解析特定 UCI 值时调用的自定义函数，我创建了共享返回值名称的函数，这些函数通过 _G 调用。

解析后的数据如下所示：

```
data = {Name="value"} 
```

我的代码如下所示：

```
function main()
    local pageValues={modules={}}
    for i,x in pairs(data) do
        --here is the part that throws the error
        pageValues.modules[x]=_G[x]()
        --also throws error when "newValue=_G[x]()
    end
end

function value()
--also does not work with "local function value()"
    return 'YEA'
end 
```

返回给我的错误是`attempt to call field '?' (a nil value)` 当我直接将字符串“值”传递给它时，`pageValues.modules['value']=_G['value']()`我收到`attempt to call field 'value' (a nil value)` 的时候是创建一个虚拟变量

```
dummy = 'value'
pageValues.modules[dummy]=_G[dummy]() 
```

我收到`attempt to call field '?' (a nil value)`。如果我使用，这是一样的`local dummy = 'value'`

当我解析`_G`以查看我的任何函数是否在其中时，我发现它们不是。**注意**Luci 会自动调用`package.seeall`，我不知道这是否与我的全局调用有关。但是，回答这个问题可能很重要。

我最迫切的需要是让这个功能正常运行。我的次要兴趣是如何确定 Lua 中的范围，以便将来能够解决 LuCI 中的沙盒问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:46:57.537

有点难以理解代码中发生了什么，因为它不是包含的可执行示例，但可能发生的一件事是，如果您定义全局变量的模块已调用该`module`函数，那么每当您尝试设置global 它将改为在模块的表中设置一个键。此外，如果您使用 package.seeall 参数运行模块，则仍会重定向全局分配 - 唯一的区别是模块可以读取其他预定义的全局变量。

如果是这种情况，您可以通过不尝试从全局表中读取值（而是从相应的模块中读取）或`_G`在首先创建这些值时直接设置来解决您的问题。

# php - PHP if 页面选择器

> ID：14304834
> 
> 赞同：1
> 
> 时间：2013-01-13T15:19:24.237
> 
> 标签：php, wordpress

以下 php 代码选择一个页面并相应地遵循 if 语句：

```
<?php if (is_home()){ ?>
    <div class="container clear slidecontainer">
            <?php lets_get_slideshow(); ?> 
```

我如何才能`if`调用所有页面，而不仅仅是本示例中的主页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:23:39.423

只需删除您的 if 条件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:56:51.173

If 语句用于表示基于某些条件的异常。如果您希望代码在所有条件（在本例中为所有页面）下执行，那么您可以简单地省略 if 语句，因为该规则没有例外。

# facebook - FBSessionStateClosedLoginFailed：错误调用

> ID：14304837
> 
> 赞同：2
> 
> 时间：2013-01-13T15:20:19.813
> 
> 标签：facebook, caching, uinavigationcontroller, facebook-ios-sdk

我在本地缓存登录令牌，但是我有一个导航视图，当我登录时，如果我弹出“facebook”视图控制器，然后推送它，然后再次执行此操作，则返回 FBSessionStateClosedLoginFailed:（如以及之前的 FBSessionStateOpen ）在视图的第二次推送中......关于为什么会发生这种情况的任何想法？谢谢

# javascript - 切换 JavaScript 不工作

> ID：14304839
> 
> 赞同：2
> 
> 时间：2013-01-13T15:20:29.830
> 
> 标签：javascript, dom

我只想要一个简单的切换 js，所以当您在导航中单击 About 时，会出现 about 文本，但它现在可以正常工作了

JS部分：

```
<script language="JavaScript" type="text/javascript">
function toggle() {
var about = document.getElementById('about')
if(about.style.display = "none")
{
about.style.display = "block";
}

else
{
about.style.display = "none";
}
}
</script> 
```

HTML：

```
<header>
...
    <nav><ul>
        <li><a href="index.html" id="active">Home</a></li>
        <li><a href="javascript:toggle()" onClick="toggle()">About me</a></li>
        ...more <li>s...
    </ul></nav>
</header>
<br/>

<div id="about">
aboutme
</div> 
```

CSS：

```
#about {
    display: none;
    } 
```

我究竟做错了什么？？有谁能够帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T15:21:52.217

在 if 语句中，您必须`have two equal sign`

```
function toggle() {
    var about = document.getElementById('about');
    if(about.style.display == "none")
    {
        about.style.display = "block";
    }
    else
    {
        about.style.display = "none";
    }
} 
```

**笔记**

```
= you can just assign value to variable
== must be used to compare variables values
=== must be used to compare variables in every aspect (In type too) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T15:25:10.750

修复`==`问题，然后不要使用该 CSS 规则隐藏“about”元素，而是将样式直接放在元素上：

```
<div id=about style='display: none'>About Me</div> 
```

如果您不这样做，JavaScript 代码将看不到样式对象上的“显示”属性。（样式对象仅反映与元素直接关联的样式，而不是由 CSS 样式表控制的样式。）

# rdf - SWI-Prolog semweb_db 的 rdf 谓词什么也没给出

> ID：14304841
> 
> 赞同：3
> 
> 时间：2013-01-13T15:20:39.563
> 
> 标签：rdf, swi-prolog

在 Ubuntu 中使用 SWI-Prolog（多线程，64 位，版本 5.10.4），我试图从 rdf/3 谓词中获取 rdf 三元组，遵循其中一个教程（实际上，所有这些都告诉我相同，但下面的示例与[http://cliopatria.swi-prolog.org/tutorial/Parsia/ 类似](http://cliopatria.swi-prolog.org/tutorial/Parsia/)）。然而，虽然其他谓词似乎运作良好，但 rdf/3 什么也没给出：

```
?- [library(semweb/rdf_db)].
...
true
?- [library(semweb/rdf_http_plugin)].
...
true
?- rdf_load('http://dbpedia.org/resource/Amsterdam').
% Parsed "http://dbpedia.org/resource/Amsterdam" in 0.32 sec; 4,194 triples
true.

?- rdf(S, P, O).
false.
?- rdf_graph(G).
G = 'http://dbpedia.org/resource/Amsterdam'. 
```

如果我为 P 和 O 输入常数（但我忘了怎么做），我会得到 S 的结果一两次。我不确定这是我的 swipl 版本中的一个错误，还是我忘记了一些重要的事情或一些琐碎的事情。Prolog 和库是从标准的 Ubuntu 12.10 存储库安装的。

（我没有对 semweb 库进行任何测试，因为我不知道该怎么做，因为我不是每天都在 Prolog 中编程）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:36:37.793

我正在使用从源代码安装的 SWI-Prolog，我可以在您的示例之后看到三元组。那么可能你需要升级你的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-19T20:46:48.463

我总是尝试为要加载三元组的图形命名，然后在`rdf/4`函数中使用该名称。这对我有用，并明确您正在查询哪个图表。例如：

```
?- rdf_load('http://dbpedia.org/resource/Amsterdam', [graph('amsterdam')]).
% Parsed "http://dbpedia.org/resource/Amsterdam" in 0.19 sec; 5,120 triples
true.

?- rdf_statistics(triples_by_graph(Graph, Triples)).
Graph = amsterdam,
Triples = 5120.

?- rdf(S, P, O, 'amsterdam').
S = 'http://dbpedia.org/resource/Cornelis_Pronk',
P = 'http://dbpedia.org/property/placeOfBirth',
O = 'http://dbpedia.org/resource/Amsterdam' . 
```

# javascript - 使用 Backbone.js 删除带有插件的视图

> ID：14304842
> 
> 赞同：1
> 
> 时间：2013-01-13T15:20:41.997
> 
> 标签：javascript, jquery, backbone.js

我有一个代码可以查看`#addHome`单击时启动插件的模型。该插件修改一个标签：

```
<select id="sel">
    <option value="1">ON</option>
    <option value="0">OFF</option>
</select> 
```

Backbone.js 代码：

```
var Contents = Backbone.View.extend({       
    events: {
            "click #addHome": "addContent1", "click #addContact": "addContent2"
    },
    initialize: function() {
        _.bindAll(this); 
        this.model = new ContentCollection();
        this.model.on("add", this.contentAdded);
    },                  
    addContent1: function(event) {
        this.model.add({ modelName: "home"});
        //Plugin:
        $('select').switchify().data('switch').bind('switch:slide', function(e,type){       
            //Do something
        });     
    }, 
    addContent2: function(event) {
        //another content
    },    
    contentAdded: function(content) {
        if (content.view == null) {
            var template_name;              
            switch(content.get("modelName")){   
                case 'home': template_name = 'home'; break;  
                case 'contact': template_name = 'contact'; break; 
            }                                       
            content.view = new ContentView({
                              model: content, template: //template
                     });
            $(".box").empty();    
            //render template                                               
            }       
        },              
}); 
```

`#addContact`单击时，替换`.box`为“其他内容”。问题是下一个：如果`#addHome`单击 after，插件内容将替换“另一个内容”，但此内容不正确，因为它显示了附加内容。我想，垃圾内容。怎么解决？

谢谢。

# android - 在android中制作XML文档

> ID：14304845
> 
> 赞同：1
> 
> 时间：2013-01-13T15:21:02.513
> 
> 标签：android, xml, namespaces, document

我在向我的 XML 文档添加前缀时遇到问题，我需要每个元素都有 tns 前缀，但由于某种原因它不起作用。不完全理解 XML 也是可能的 :)

代码：

```
 serializer.startDocument(null, Boolean.valueOf(true)); 
  serializer.setPrefix("tns","http://some.web.addres");
  serializer.setPrefix("xsi", "http://www.w3.org/2001/XMLSchema-instance%22");
  serializer.startTag("tns","Something");

  serializer.startTag("tns", "Zaglavlje");

  serializer.attribute("tns", "blabla", "bla");
  serializer.startTag("tns", "otvaramtopic");
  serializer.text("imam neki tekst");
  serializer.endTag("tns", "otvaramtopic");
  serializer.startTag("tns", "sadrzaj");
  serializer.text("sadrzaj sadrzaja");
            // close tag: </content>
        serializer.endTag("tns", "sadrzaj");

            // open tag: <author>
            serializer.startTag("tns", "autor");
            serializer.text("tekst autoru");
            // close tag: </author>
            serializer.endTag("tns", "autor");

            // open tag: <date>
            serializer.startTag("tns", "novitag");
            serializer.text("nekeja");
            // close tag: </date>
            serializer.endTag("tns", "novitag");

            // close tag: </study>
            serializer.endTag("tns", "Zaglavlje");
            // close tag: </record>
            serializer.endTag("tns", "Something");

        serializer.endDocument(); 
```

结果前缀是n0。如何将前缀更改为 tns？

# qt - 为什么 QWebView 不执行此网页上的脚本？

> ID：14304846
> 
> 赞同：2
> 
> 时间：2013-01-13T15:21:06.170
> 
> 标签：qt, qt4

这是 MainWindow 构造函数的代码：

```
view = new QWebView(this);
view->load(QUrl("http://checkusernames.com/")); 
```

该页面加载正常，并且该页面上有一个脚本，当单击“检查用户名”按钮时应该执行该脚本。它在 IE 和 FireFox 中执行良好，但在 QWebView 中没有任何反应。我的问题是：为什么这个脚本没有在 QWebView 中执行？

# javascript - 脸书简单登录

> ID：14304852
> 
> 赞同：3
> 
> 时间：2013-01-13T15:21:42.387
> 
> 标签：javascript, html, facebook

> **可能重复：**
> [如何让 Facebook 登录按钮重定向到特定 URL](https://stackoverflow.com/questions/5200167/how-to-let-facebook-login-button-redirect-to-a-particular-url)

我有这个代码。它正确连接到 facebook。但问题是如何将其重定向到主页？

```
<head>
<div id="fb-root"></div>
<script>

    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=32292*******";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

</script>
</head>

<body>

<div class="fb-login-button" data-show-faces="false" data-width="50" data-max-rows="2"></div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:29:54.743

您可以使用：

```
window.location="http://www.facebook.com"; 
```

我输入`facebook`作为示例，但您可以设置任何`URL`您想要重定向到的内容。

# ruby-on-rails-3 - 返回错误的类型？

> ID：14304855
> 
> 赞同：1
> 
> 时间：2013-01-13T15:22:12.230
> 
> 标签：ruby-on-rails-3, activerecord

我有这个 ProductPrice 模型：

```
class ProductPrice < ActiveRecord::Base
  belongs_to :product
  belongs_to :product_size
  attr_accessible :current, :price, :product_id, :product_size_id, :since

  def self.get_product_prices(category_id, product_id)
    MenuCategory.find(category_id).product_sizes.each do |size|
      ProductPrice.find_or_create_by_product_size_id_and_product_id(size.id, product_id)
    end
  end
end 
```

当我调用时`get_product_prices`，它会正确返回记录数，但它会返回 ProductSize 而不是 ProductPrice。

它如何返回 ProductSize 而不是 ProductPrice？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:05:29.803

因为您正在使用[each](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-each)，它返回应用的确切数组，即`MenuCategory.find(category_id).product_sizes`. 这是另一个可以帮助您理解问题的示例：

```
def test
  [1, 3].each { |e| e * 2 }
end

test # => [1,3] 
```

如果您希望它返回一个 ProductPrice 数组，您可以更改`each`为`map`.

# php - 通过单击 CodeIgniter 中的编辑按钮来更新行

> ID：14304857
> 
> 赞同：1
> 
> 时间：2013-01-13T15:22:23.167
> 
> 标签：php, jquery, html, ajax, codeigniter

我有一个表格，其中显示了所有数据，并且每一行都有一个编辑按钮。现在我想要的是在我单击编辑按钮后，弹出/模型框/灯箱无论您说什么都会出现，而无需刷新页面，然后所有字段都将出现在该框上。我知道如何在控制器和模型中进行更新。我只是不知道如何将以下行 id 附加到删除按钮，然后通过 ajax 发送到控制器，然后将它们填充到灯箱中，这就是我正在做的事情。

这是我的看法：

```
 <?php foreach($records as $row){?>
<tr>
<td>
    <td><?php echo $row->cat_name; ?></td>
    <td><?php $row->cat_id;?> <a toggle="modal"  href="#myModal"id="edit">Edit</a>

       <a  data-toggle="modal" href="#myModal">Delete</a>

       <div class="modal hide" id="myModal"> 
```

只需告诉我如何通过 ajax 将 cat_id 发送到控制器，因为在 ajax 中我们通过 'id' 获取值，但在这里我如何将 id 赋予这一行。

```
 <?php $row->cat_id;?> 
```

在编辑按钮后面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:13:29.350

you can get id through setting custom property of anchor tag

`<a toggle="modal" href="#myModal"id="edit" row_id="<?php echo $row->cat_id; ?>">Edit</a>`

and you can access this property using javascript, and append it your ajax url.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:15:18.333

```
<script languae="javascript" type="text/javascript">

$(function(){
    $(".edit").click(function(){
        row_id = $(this).attr("row_id");
        alert(row_id)
    })

    $(".delete").click(function(){
        row_id = $(this).attr("row_id");
        alert(row_id)
    })
})

</script> 
```

请将此 javascript 添加到您的文件中，并在您的 HTML 中进行一些更改，删除锚标记中的 id 属性。添加类属性

```
<a toggle="modal"  href="#myModal" class="edit" row_id="<?php $row->cat_id;?>">Edit</a>

       <a  data-toggle="modal" href="#myModal" class="delete" row_id="<?php $row->cat_id;?>">Delete</a> 
```

# jquery - 移动和隐藏/显示谷歌地图 div 的成本

> ID：14304861
> 
> 赞同：1
> 
> 时间：2013-01-13T15:22:59.393
> 
> 标签：jquery, google-maps, backbone.js

我的应用程序是一个单页应用程序 (backbone.js)，它使用存储在`#map_canvas`div 中的谷歌地图。

该应用程序有 3 个主要视图：

*   谷歌地图视图。
*   没有地图的视图。（即`#map_canvas`隐藏）
*   在细分中包含地图的视图。（我将 div 附加`#map_canvas`到另一个 div）

所以基本上我有 3 个主要的 dom 操作：

1.  隐藏地图
2.  显示地图
3.  将地图附加到另一个 div

我的问题是，这些操作的成本是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:18:17.120

它们有多贵？几乎可以忽略不计。我认为您并不关心隐藏和显示，因为它非常简单，并且执行时间几乎为 0。但我认为您担心将 DOM 中的 div 重新定位以将其附加到另一个 div。这也不应该花费时间，因为 Maps API 已经加载，因此移动它不会干扰 Maps API。

如果您使用 jQuery，那么只需继续执行它，您不必担心，因为 jQuery 使用最快的方法

如果您想附加另一个 div 用于设计目的，我建议您编写另一个 css 并加载它而不是附加 div，这将立即（当 css 加载时）改变您想要的 div 的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:40:06.257

在金钱方面：免费。

在执行时间方面：可以忽略不计

在实现时间方面：非常小（使用[jQuery](http://jquery.com/)之类的东西进行跨浏览器 dom 操作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:43:27.530

如果您不关心旧浏览器的兼容性，请使用 zeptojs 而不是 jQuery……可能会增加一点性能改进……但老实说，这没什么大不了的。

# android - 将 ArrayList 写入 SD 卡

> ID：14304863
> 
> 赞同：2
> 
> 时间：2013-01-13T15:23:28.317
> 
> 标签：android, arraylist, data-storage

当我的应用程序启动时，它会连接到数据库并以 XML 格式下载一些数据。这是布局：

```
<Customers>
  <Customer> 
    <name>...</name>
    ...
  </Customer>
   <Customer> 
    <name>...</name>
    ...
  </Customer>
  ...
</Customer> 
```

对于每个客户，我创建一个`Customer`存储在 ArrayList 中的类的对象。用户可以编辑和添加每个客户的一些数据，他们可以将其上传回服务器。

问题是我不知道在本地存储数据的最佳方式是什么，所以如果我的应用程序关闭或用户不再有互联网，他们将有一个备份。我现在将所有`Customer`对象转换回 XML，然后将其存储在 SD 卡上，但我认为这不是一个好的解决方案。每个客户有大约 40 个字符串、10 个整数和一些我必须存储的布尔值。有没有更好的方法在本地存储数据？

我发现[一些代码](https://github.com/blcooley/ArrayListTest/blob/master/src/com/coolmodev/arraylisttest/MainActivity.java)可以存储一个 ArrayList 但它不适用于自定义类。

**编辑：**我使用[本教程](http://www.jondev.net/articles/Android_Serialization_Example_%28Java%29)来解决我的问题。

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutput;
import java.io.ObjectOutputStream;
import java.util.ArrayList;

import android.os.Environment;

public class SerializeData {
    public static byte[] serializeObject(Object o) {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();

        try {
            ObjectOutput out = new ObjectOutputStream(bos);
            out.writeObject(o);
            out.close();

            // Get the bytes of the serialized object
            byte[] buf = bos.toByteArray();

            return buf;
        } catch (IOException ioe) {
            CreateLog.addToLog(ioe.toString());
            return null;
        }
    }

    public static Object deserializeObject(byte[] b) {
        try {
            ObjectInputStream in = new ObjectInputStream(
                    new ByteArrayInputStream(b));
            Object object = in.readObject();
            in.close();

            return object;
        } catch (ClassNotFoundException cnfe) {
            CreateLog.addToLog(cnfe.toString());

            return null;
        } catch (IOException ioe) {
            CreateLog.addToLog(ioe.toString());

            return null;
        }
    }

    public static void saveData(){
        byte[] arrayData = SerializeData
                .serializeObject(MyTasks.allCustomers);

        BufferedOutputStream bos;
        try {
            bos = new BufferedOutputStream(new FileOutputStream(
                    Environment.getExternalStorageDirectory()
                            + "/myprogram/myarray.txt"));
            bos.write(arrayData);
            bos.flush();
            bos.close();
        } catch (FileNotFoundException e) {
            CreateLog.addToLog(e.toString());
        } catch (IOException e) {
            CreateLog.addToLog(e.toString());
        }
    }

    public static ArrayList<Customer> getData(){
        File afile = new File(Environment.getExternalStorageDirectory()
                + "/myprogram/myarray.txt");
        int size = (int) afile.length();
        byte[] bytes = new byte[size];
        try {
            BufferedInputStream buf = new BufferedInputStream(new FileInputStream(afile));
            buf.read(bytes, 0, bytes.length);
            buf.close();
        } catch (FileNotFoundException e) {
            CreateLog.addToLog(e.toString());
        } catch (IOException e) {
            CreateLog.addToLog(e.toString());
        }

        return (ArrayList<Customer>) SerializeData.deserializeObject(bytes); 

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:34:52.587

As I understand, the Customer structure will be read and written only locally and also by the same or highly related program. For such situation, I think, Java serialization is appropriate as it adds very little code.

Make the Customer to implement Serializable (put immediately serialVersionUID so you could control versions later). ArrayList is already Serializable. Obtain the file name as explained [here](http://developer.android.com/training/basics/data-storage/files.html) and use ObjectInput/Output stream to serialize. You can always migrate to XML/JSON later if the need arises. A simple "hello world" example for serialization can be found [here](http://www.javabeginner.com/uncategorized/java-serialization).

# ios - TestFlight App 显示错误的 SDK 版本

> ID：14304865
> 
> 赞同：5
> 
> 时间：2013-01-13T15:23:34.397
> 
> 标签：ios, testflight

我正在使用 TestFlight 应用程序通过无线方式分发我的应用程序，因此将 SDK 版本 1.2 包含到我的应用程序中。

当我尝试使用桌面应用程序上传我的应用程序时，它显示错误的 SDK 版本 (1.1) 而不是 1.2。

编辑：看起来，这不仅仅是一个信息问题。它确实是 SDK 版本 1.1，因为它似乎不支持新的应用程序令牌（不显示会话等），但我从 TestFlight 网页获取了新版本并将其包含在我的项目中。

我究竟做错了什么？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T15:56:32.807

我建议您使用[CocoaPods](http://cocoapods.org/)获取 TestFlight SDK ，它快速简单，处理依赖项和设置，让您专注于正确的编码。该网站有关于如何设置它的非常直接的信息，但我写了一个关于它的[教程。](http://amokafullofstuff.wordpress.com/2013/01/05/cocoapods/)

要获取 TestFlightSDK 的 pod，您只需添加到您的`Podfile`这一行：

```
pod 'TestFlightSDK', '~> 1.2' 
```

TestFlight 现在是工作区的一部分，因此必须以这种方式导入：

```
#import <TestFlight.h> 
```

你应该很好地使用 CocoaPods，但如果你还没有尝试，这里有一些可能的东西：

*   尝试通过网络界面而不是桌面应用上传
*   检查您添加到项目中的文件，也许您从错误的版本文件夹中选择了它们
*   [再次查看 v1.2](https://testflightapp.com/sdk/doc/1.2/)的文档，您可能错过了一步
*   [重新下载SDK](https://www.testflightapp.com/sdk/download/)，网站的UI不是很清晰，可能是你选错了。

希望这可以帮助

# java - ExpectedSystemExit 导致错误

> ID：14304867
> 
> 赞同：2
> 
> 时间：2013-01-13T15:23:43.247
> 
> 标签：java, junit, system-rules

我正在使用库[系统规则](http://stefanbirkner.github.com/system-rules/)来测试调用 System.exit() 的方法：

```
@Rule
public final ExpectedSystemExit exit = ExpectedSystemExit.none(); 
```

不幸的是，这段代码导致了错误......

```
initializationError caused an ERROR: org/junit/rules/TestRule 
```

我正在使用 JUnit 4.7 和系统规则 1.2.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:33:34.053

系统规则至少需要 4.9 版的 JUnit。

（我将此信息添加到系统规则的主页。感谢您发布您的问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:42:47.403

系统规则似乎需要以下依赖项

*   junit-4.11-beta-1

hth

# ios - iOS 通过 POST 到 Web 服务器 - 字符串被切断？

> ID：14304868
> 
> 赞同：1
> 
> 时间：2013-01-13T15:23:55.597
> 
> 标签：ios, json, post

我正在尝试从我的 iOS 应用程序将序列化对象发送到 Web 服务器，并且通常一切正常。我试过发送一个巨大的字符串，它在服务器上就很好了。但是当我将序列化对象发送到服务器时，字符串会被切断。我已经从我的应用程序中记录了字符串 - 它就在那里。我尝试将相同的字符串写入我的 Web 服务器上的文件，但它以最奇怪的方式被切断。

可能是什么原因？我怀疑这与编码有关。这是我将数据发送到服务器的方式：

```
+ (void)postRequestWithData:(id)data toURL:(NSURL *)url {
    // Prepare data
    NSData *postData = [NSJSONSerialization dataWithJSONObject:data options:NSJSONWritingPrettyPrinted error:nil];
    NSString *postDataString = [[NSString alloc] initWithData:postData encoding:NSUTF8StringEncoding];
    NSString *requestString = [NSString stringWithFormat:@"sales=%@", postDataString];
    NSString *postLength = [NSString stringWithFormat:@"%d", [requestString length]];

    // Make the request
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:[requestString dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES]];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    // Error reporting
    if (!connection) {
        NSLog(@"Could not make a connection!");
    }
} 
```

其中 (id)data 是一个字典数组。

这是我在服务器中处理它的方式：

```
<?php
    $sales = $_POST['sales'];
    $myFile = "testFile.txt";
    $fh = fopen($myFile, 'w') or die("can't open file");
    fwrite($fh, $sales);
    fclose($fh);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:58:46.557

您应该根据[application/x-www-form-urlencode](http://www.w3.org/MarkUp/html-spec/html-spec_8.html#SEC8.2.1)转义您的 URL（查询）字符串。为此有一个 NSString 函数：

```
- (NSString *)stringByAddingPercentEscapesUsingEncoding:(NSStringEncoding)encoding 
```

据此，您的代码应如下所示：

```
NSData *postData = [NSJSONSerialization dataWithJSONObject:data options:NSJSONWritingPrettyPrinted error:nil];
NSString *postDataString = [[NSString alloc] initWithData:postData encoding:NSUTF8StringEncoding];
NSSztring *escapedDataString = [postDataString stringByAddingPercentEscapesUsingEncoding:NSUTF8Encoding]
NSString *requestString = [NSString stringWithFormat:@"sales=%@", escapedDataString];
NSString *postLength = [NSString stringWithFormat:@"%d", [requestString length]]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-13T15:34:37.593

You need to URL encode your postDataString first. To do this you can use the Core Foundation function [`CFURLCreateStringByAddingPercentEscapes`](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFURLRef/Reference/reference.html#//apple_ref/c/func/CFURLCreateStringByAddingPercentEscapes).

```
NSString *encoded = CFBridgingRelease( CFURLCreateStringByAddingPercentEscapes( kCFAllocatorDefault, (__bridge CFStringRef)originalString, NULL, NULL, kCFStringEncodingUTF8 ) ); 
```

Both `NULL` parameters control which characters should be encoded and which should be left alone. Passing `NULL` for both escapes all characters that are invalid in URLs. Note that I am assuming ARC here.

Also your Content-Length calculation is wrong. You need to get the length from your `NSData` object, not the string.

# mobiscroll - mobiscroll 日期控件 startYear 未设置

> ID：14304869
> 
> 赞同：2
> 
> 时间：2013-01-13T15:24:06.757
> 
> 标签：mobiscroll

我有如下非常直接的 MobiScroll 日期组件初始化代码。

```
function attachMobiDate(id) {
        var now = new Date();
        $('#'+id).mobiscroll().date({
            minDate: new Date(now.getFullYear(), now.getMonth(), now.getDate()),
            dateFormat: 'dd, M yyyy',
            theme: 'android',
            display: 'modal',
            mode: 'scroller',
            startYear: 2000
        });
    } 
```

一切正常。开始年份尚未确定。UI 仅显示 2013 年和 2014 年。但是，如果我将 'endYear' 设置为 2020 年，它工作正常。我现在可以这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:37:55.060

好的，发现我的错误！:)

```
minDate: new Date(*now.getFullYear()*, now.getMonth(), now.getDate()), 
```

在初始化部分并***再次***尝试通过“startYear”进行设置。

当我如下修改 minDate 并删除“startYear”时，它工作正常！

```
minDate: new Date(*now.getFullYear()-10*, now.getMonth(), now.getDate()), 
```

# ios6 - 将 FMDB + SQLCipher 与 Rubymotion 一起使用？

> ID：14304871
> 
> 赞同：2
> 
> 时间：2013-01-13T15:24:14.510
> 
> 标签：ios6, fmdb, rubymotion, sqlcipher, cocoapods

我在使用 ruby​​motion 构建的应用程序中使用 FMDB 处理 sqlite 数据库。

我想用 SQLCipher 加密数据库，当我尝试使用 SQLCipher 方法（如**sqlite3_key** ）时遇到问题？

有没有人尝试过相同的？

****** *** ** *** ***** *添加：**

 **当我尝试使用 SQLCipher api 提供的 sqlite3_key 方法加密数据库时，它会抛出异常，并告诉该方法未定义。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:17:42.717

我认为您可以通过添加`SQLCipher`pod 然后使用该`FMDB` `FMDatabase.setKey`方法来做到这一点，而无需编写任何 C。

在里面`Rakefile`

```
app.pods do
  pod 'FMDB'
  pod 'SQLCipher'
end 
```

然后在你的`Database.rb`

```
class Database
  def self.connection
    unless @connection
      @connection = FMDatabase.databaseWithPath(db_path)
      @connection.traceExecution = true if $debug
      @connection.open
      @connection.setKey 'MySecretKey'
    end
  end
end 
```

现在您应该可以使用

```
Database.connection.executeSelect 'SELECT * from some_table' 
```**

# .htaccess - htaccess 重定向新应用程序

> ID：14304872
> 
> 赞同：1
> 
> 时间：2013-01-13T15:24:21.197
> 
> 标签：.htaccess

我正在将现有应用程序迁移到新代码库，但我希望一些现有链接能够正常工作。

基本上我有附属公司将数据发布到我网站上的链接（链接是：apply/affiliate/leadcheck）

他们发布的数据是：first_name surname dob 等

无论如何，在新的代码库上，这个前导检查将在其他地方访问（如 index.php?mod=leadcheck）。

有什么方法可以确保任何 POST 请求 apply/affiliate/leadcheck 将被重定向到 index.php?mod=leadcheck ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:03:34.607

将 POST 请求重定向到固定链接

```
RewriteEngine On
RewriteCond %{REQUEST_METHOD} post [NC]
RewriteRule ^apply/affiliate/leadcheck index.php?mod=leadcheck 
```

# resize - 不明白如何在 JavaFX 中使用 changlistener

> ID：14304873
> 
> 赞同：3
> 
> 时间：2013-01-13T15:24:22.307
> 
> 标签：resize, listener, javafx, scene

我正在尝试向 Scene.getWidth() 添加一个 changlistener，以便我可以检测到调整大小。这是我尝试添加侦听器的代码片段。

```
scene.getWidth().addListener(new ChangeListener<Double>() {
    public void changed(ObservableValue<? extends Double> ov,double old_val, double new_val) {
        System.out.println(new_val);
    }
}); 
```

它给了我以下错误。

> ./GraphFX.java:49: 错误：不是抽象的，并且不会覆盖 ChangeListener 场景中的抽象方法 changed(ObservableValue,Double,Double).getWidth().addListener(new ChangeListener() {
> 
> ^
> ./GraphFX.java:49: 错误：无法取消引用双精度 scene.getWidth().addListener(new ChangeListener() { ^ 2 个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:52:38.917

scene.getWidth() 返回一个双原语而不是一个对象，这就是它不能被取消引用的原因。`public final double getWidth()`

您可以使用返回 ReadOnlyDoubleProperty 的场景 widthProperty() 方法

```
 scene.widthProperty().addListener(new ChangeListener() {
        @Override
        public void changed(ObservableValue ov, Object t, Object t1) {
         double value = (double) t1;
            System.out.println("Scene Width :" + value);
        }

   }); 
```

或者，您可以通过绑定场景宽度属性来跟踪场景宽度的变化

代码 ：

```
DoubleProperty sceneWidth = new SimpleDoubleProperty();
sceneWidth.bind(scene.widthProperty()); 
```

# javascript - 目的 ＃ 没有方法“updateMatrixWorld”错误

> ID：14304874
> 
> 赞同：2
> 
> 时间：2013-01-13T15:24:24.380
> 
> 标签：javascript, three.js

我正在尝试创建 sun，但是当我测试运行此代码时出现错误

```
THREE.CanvasRenderer 54 three.min.js:262
102
Uncaught TypeError: Object #<Screen> has no method 'updateMatrixWorld' three.min.js:126
192
Uncaught TypeError: Object #<Screen> has no method 'updateMatrixWorld' 
```

而且我也在使用最新版本，我只在昨天（2013 年 1 月 12 日）下载了。

请帮我找出我做错了什么！

另外，想知道 WebGLRenderer 和 CanvasRenderer 的区别。

```
 <script src="vendor/three.js/three.min.js"></script>
<script src="vendor/three.js/Detector.js"></script>
<script src="vendor/three.js/ShaderExtras.js"></script>
<script src="vendor/three.js/Stats.js"></script>
<script>
    var scene, renderer, camera, container, W, H;

    W = parseInt(document.body.clientWidth);
    H = parseInt(document.body.clientHeight);

    container = document.createElement('div');
    document.body.appendChild(container);

    camera = new THREE.PerspectiveCamera(45, W / H, 1, 10000); //field of view, aspect ratio, near and far clipping plane
    camera.position.z = 4300;
    scene = new THREE.Scene();

    //Sun
    var sun, sun_geom, sun_mat;
    sun_geom = new THREE.SphereGeometry(430, 30, 30); //radius, second and third parameters how many triangles to generate
    sun_mat = new THREE.MeshNormalMaterial();
    sun = new THREE.Mesh(sun_geom, sun_mat);
    scene.add(sun);

    //renderer
    renderer = new THREE.CanvasRenderer();
    renderer.setSize(W, H);
    container.appendChild(renderer.domElement);

    animate();

    function animate() {
        requestAnimationFrame(animate);

        renderer.render(screen, camera);
    }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:45:07.557

在动画功能中

固定线路`renderer.render(scene,camera);`

我很抱歉发布这样一个愚蠢的问题，愚蠢的错误：|

# java - eclipse android项目报错提醒

> ID：14304876
> 
> 赞同：1
> 
> 时间：2013-01-13T15:24:49.457
> 
> 标签：java, android

我从 googlecode 下载了一个开源的 android 项目。它的名字是`OSMAND`。通过设置`java compile version to 1.6`and `android version to 4.0`。`"net.osmand.plus.activities.MainMenuActivity"`eclipse IDE 只提示了三个错误的项目：

这两个错误是在课堂`AccessibilityDelegat`上，

我在 osmand google 群组中询问过。我不知道为什么我的问题因为周数或其他原因没有得到回答。所以我在这里问。

```
package net.osmand.access;

import net.osmand.access.AccessibleLayout;

import android.app.Activity;
import android.app.Dialog;
import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.view.Window;
import android.widget.FrameLayout;

// This class serves as a delegate of accessibility service
// providing a sort of touch exploration capability
// for a View hierarchy. It means that elements will be spoken
// on touch. Thus, you can slide your finger across the screen
// and hear available controls and items.
// Lift finger up on a control to make click.
//
// This class can not be instantiated directly.
// Use static method takeCareOf() to get it's functionality
// for respective objects.
//
public class AccessibilityDelegate extends AccessibleLayout {

    private AccessibilityDelegate(Context context) {
        super(context);
    }

    // Attach itself to a target View hierarchy to intercept touch events
    // and provide on-touch accessibility feedback.
    // Target View must be an instance of FrameLayout
    // or have a parent which is an instance of ViewGroup.
    private void attach(View target) {
        ViewGroup parent;
        if (target instanceof FrameLayout) {
            parent = (ViewGroup)target;
            while (parent.getChildCount() > 0) {
                View child = parent.getChildAt(0);
                parent.removeViewAt(0);
                addView(child);
            }
            parent.addView(this, new FrameLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        } else if (target.getParent() instanceof ViewGroup) {
            parent = (ViewGroup)target.getParent();
            int position = parent.indexOfChild(target);
            ViewGroup.LayoutParams params = target.getLayoutParams();
            parent.removeViewAt(position);
            addView(target, new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            parent.addView(this, position, params);
        }
    }

    // Provide touch exploration capability for individual View
    // or whole View hierarchy. The hierarchy root specified
    // as an argument must either be an instance of FrameLayout
    // or have a parent that is an instance of ViewGroup.
    public static void takeCareOf(View hierarchy) { 
```

> ```
>  final AccessibilityDelegate delegate = new AccessibilityDelegate(hierarchy.getContext()); 
> ```

```
 delegate.attach(hierarchy);
    }

    // Provide touch exploration capability for given window.
    public static void takeCareOf(Window window) {
        takeCareOf(window.getDecorView());
    }

    // Provide touch exploration capability for an activity View content.
    // Use after setContentView().
    public static void takeCareOf(Activity activity) {
        takeCareOf(activity.getWindow());
    }

    // Provide touch exploration capability for a dialog View content.
    // Use after setContentView().
    public static void takeCareOf(Dialog dialog) {
        takeCareOf(dialog.getWindow());
    }

} 
```

* * *

它提醒我：

```
The constructor View.AccessibilityDelegate(Context) is undefined   
Resource: AccessibilityDelegate.java   
Path: /net.osmand.plus.activities.MainMenuActivity/src/net/osmand/access    
Location:line 60    Type:Java Problem. 
```

这个错误出现在句子“ final AccessibilityDelegate delegate = new AccessibilityDelegate(hierarchy.getContext()); ”中，我在这里分开（为了方便通知）

和

```
The method attach(View) is undefined for the type View.AccessibilityDelegate    

Resource：AccessibilityDelegate.java
Path:/net.osmand.plus.activities.MainMenuActivity/src/net/osmand/access    
Location: line 61    Type:Java Problem
this error appear in the next of my seperated line, in sentence       "delegate.attach(hierarchy);" 
```

但是我在这个类中看到，有构造函数和附加方法定义。我不知道问题出在哪里以及如何纠正它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:34:52.713

似乎编译器让您使用 View.AccessibilityDelegate 。尝试使用完全限定名称，如下所示：

```
final net.osmand.access.AccessibilityDelegate delegate = new net.osmand.access.AccessibilityDelegate(hierarchy.getContext()); 
```

它应该适用于此。

# c# - 将数据保留在文本框中，就像按 BACKSPACE 一样

> ID：14304877
> 
> 赞同：3
> 
> 时间：2013-01-13T15:24:49.963
> 
> 标签：c#, asp.net, linkbutton, backspace

如果我以编程方式返回此页面，我想在一些文本框中保留一些信息。在第 1 页上，我输入信息，如果单击按钮，我将重定向到下一页，但如果信息中有错误（例如 TextBox 中的文本仅用于数字），我想通过单击链接按钮返回。我试过：

```
prevPage = Request.UrlReferrer.ToString();
LinkButton1.PostBackUrl = prevPage; 
```

但是如果回到上一页，所有的文本框都是空的。通过按键盘上的 BACKSPACE，所有信息都将保留。

我如何以编程方式执行此操作以保留信息，例如按 BACKSPACE ???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:27:44.743

只需在链接按钮单击上尝试此 javascript

```
history.back() 
```

**例子**

```
<script>
function goBack()
  {
  window.history.back()
  }
</script>

<input type="button" value="Back" onclick="goBack()"> 
```

# ajax - 在执行操作时显示加载图像

> ID：14304884
> 
> 赞同：1
> 
> 时间：2013-01-13T15:25:42.570
> 
> 标签：ajax, ruby-on-rails-3, jquery, ruby-on-rails-3.2

我的控制面板上有一个链接这个链接，调用我的控制器的一个动作。

```
<%= link_to "Enviar Correos".html_safe, {:controller => "users", :action => "email_all_users"}, :method => "get", :html =>  {:style => "color:#FAA732;" } %> 
```

那个行动：

```
def email_all_users
    User.all.each do |u|
        if !u.information.nil?
            if !u.information.business
                UserMailer.candidate_email(u).deliver
            else 
                    UserMailer.business_email(u).deliver
            end
        else
                UserMailer.no_info_email(u).deliver
        end
    end
    redirect_to "/users/#{current_user.id}",  :flash => { :success => "Los correos fueron enviados" }
  end 
```

一切都很好，但它需要很多时间，所以点击链接后我想更改加载图像的链接，然后（当动作完成时），我想显示另一个图像（完成！）和然后显示链接。

我从来没有使用过ajax。所以我需要一些帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:12:55.663

Generate loader image from Link

[Ajax Image Link](http://www.ajaxload.info/)

you need to write javascript to show the image on clicking the link

and hide image on load complete.

May this question work for you

[Link of answer](https://stackoverflow.com/questions/11063356/how-to-have-ajax-spinner-show-on-specific-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:20:09.253

你必须输入你的链接

```
:remote =>  true 
```

进行 Ajax 调用。

Rails 将转到“email_all_users”。在这里，您将不得不退出“redirect_to”语句。

在您的视图中，您必须放置一个“JS”视图文件，如“email_all_users.js.erb”，在这里您可以编写必要的 javascript 来显示信息“Los correos fueron enviados”。

要显示加载图像，例如 jQuery，你可以这样写：

```
$('body').ajaxStart(function() {
    $('body>*:not(:hidden)').fadeTo(0, 0.5)
    $(this).append('<img id="ajax_loader" src="/images/loading.gif">')
});
$('body').ajaxComplete(function() {
    $('body>*:not(:hidden)').fadeTo(0, 1)
    $('#ajax_loader').remove()
}); 
```

# mysql - MYSQL 间隔 - 未来一年的一周中的同一天

> ID：14304889
> 
> 赞同：2
> 
> 时间：2013-01-13T15:26:39.533
> 
> 标签：mysql, intervals

有没有人有一段 MYSQL 代码可以给我未来一年的新日期时间，即一周中的同一天？

```
SELECT new_day = ADDDATE(new_day,INTERVAL 364 DAY) FROM my_table 
```

适用于非闰年。任何想法如何最好地处理闰年？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T16:02:15.913

鉴于正常年份是 52 周零 1 天，闰年是 52 周零 2 天，您的新日期将比旧年早一到两天。对于平年元旦之后的任何日期，或闰年 1 月 2 日之后的任何日期，加上 52 周或 364 天后，您将得到下一年的日期，该日期与一周的同一天发生本月前 1 天或 2 天（或上个月末）。

这给您留下了如何处理一年中的前两天的问题。大概“明年”是至关重要的，所以 2013-12-31 比 2013-01-01 晚 52 周的简单答案是不正确的。在这种情况下，您必须编写一个条件表达式，用 SQL 拼写为 CASE。

```
SELECT CASE WHEN YEAR(DATEADD(ref_date, INTERVAL 364 DAY)) = YEAR(ref_date)
       THEN DATEADD(ref_date, INTERVAL 371 DAY)
       ELSE DATEADD(ref_date, INTERVAL 364 DAY)
       END
  FROM ...wherever... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:32:09.857

how do you wish it to deal with leap years? either save month and date and compare if 364 or 371 are closest to first day, and pick regardingly, or do nothing and face inaccuracy after a couple of years.

*   *saved_date* is the very first date before created new dates based on it
*   *passed_years* is increasing for every new since the first

    date_add(last_date, INTERVAL (case when datediff(date_add(saved_date, INTERVAL passed_years YEAR), date_add(last_date, INTERVAL 371 DAY)) <= 3 then 371 else 364 end)) DAY)

The idea of this is to either fetch 52 or 53 weeks of the next year. leap years doesn't affect weekdays, but they "contribute" to an already existing problem; the date gets lower for each passing year if you only add 52 weeks each year without above solution.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T22:51:50.057

为什么不简单

```
CURDATE() + INTERVAL 52 WEEK` 
```

当然，它会在“日历”中提前 1 或 2 天。

```
mysql> SELECT NOW(), CURDATE() + INTERVAL 52 WEEK;
+---------------------+------------------------------+
| NOW()               | CURDATE() + INTERVAL 52 WEEK |
+---------------------+------------------------------+
| 2017-09-05 15:50:46 | 2018-09-04                   |
+---------------------+------------------------------+ 
```

如果您需要它“稍后”，请使用`53`.

# android - 无法将项目动态添加到 RelativeLayout 一个低于另一个

> ID：14304890
> 
> 赞同：1
> 
> 时间：2013-01-13T15:26:42.140
> 
> 标签：android, android-layout

我在为动态创建的 relativeLayout 添加项目时遇到了问题。我看不到添加到其中的第一个元素。每次我只能看到添加到其中的最后一个元素。
我在这里提供此邮件 java 源代码和 xml 文件。请帮我解决这个问题：

```
 DynamicRelativeLayoutActivity.java
 ==================================

   package com.andr.rlayout;

   import android.app.Activity;
   import android.graphics.Color;
   import android.os.Bundle;
     import android.view.ViewGroup.LayoutParams;
  import android.widget.RelativeLayout;
  import android.widget.ScrollView;
  import android.widget.TextView;

 public class DynamicRelativeLayoutActivity extends Activity {
/** Called when the activity is first created. */
RelativeLayout rLayout;
ScrollView sview;
RelativeLayout dynamiclayout;
LinearLayout horizontalllayout;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.rlayout);
    sview = (ScrollView)findViewById(R.id.slayout);
    dynamiclayout = new RelativeLayout(DynamicRelativeLayoutActivity.this);
    dynamiclayout.setBackgroundColor(Color.WHITE);
    sview.addView(dynamiclayout);
    RelativeLayout.LayoutParams lp_btn;
    horizontalllayout = new LinearLayout(DynamicRelativeLayoutActivity.this);
    horizontalllayout.setOrientation(android.widget.LinearLayout.HORIZONTAL);

    TextView tv = new TextView(DynamicRelativeLayoutActivity.this);
    tv.setText("Hi");
    horizontalllayout.addView(tv);
    lp_btn = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT);
    lp_btn.addRule(RelativeLayout.BELOW);
    dynamiclayout.addView(horizontalllayout, lp_btn);  

    horizontalllayout = new LinearLayout(DynamicRelativeLayoutActivity.this);
    horizontalllayout.setOrientation(android.widget.LinearLayout.HORIZONTAL);
    TextView tv1 = new TextView(DynamicRelativeLayoutActivity.this);
    tv1.setText("Hello");
    horizontalllayout.addView(tv1);
   lp_btn = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT);
  lp_btn.addRule(RelativeLayout.BELOW);
    dynamiclayout.addView(horizontalllayout, lp_btn);

   }
    }

  rlayout.xml
  ===========
  <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
  >
<ScrollView 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@+id/slayout"
>
 </ScrollView>
</RelativeLayout> 

  AndroidManifest.xml
   -==================
     <?xml version="1.0" encoding="utf-8"?>
      <manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.andr.rlayout"
       android:versionCode="1"
       android:versionName="1.0" >

   <uses-sdk android:minSdkVersion="10" />

    <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".DynamicRelativeLayoutActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:49:43.730

//将id添加到你的horizo​​ntalllayout视图

```
horizontalllayout.setId(100); 
```

//然后调用

```
lp_btn.addRule(RelativeLayout.BELOW,horizontalllayout.getId()); 
```

//最后添加到你的滚动视图

```
sview.addView(dynamiclayout); 
```

# edit - 如何使用 jQuery-Tooltip 或类似工具编辑“MathJax 方程”？

> ID：14304896
> 
> 赞同：0
> 
> 时间：2013-01-13T15:27:31.710
> 
> 标签：edit, mathjax, jquery-tooltip

请问，如何使用[此截屏视频](http://www.screencast.com/users/oerpub/folders/Jing/media/da0d8591-74d9-4d6f-ba40-81074f665356)中的“工具提示”编辑文本？

我希望能够使用“mathjax 方程”（使用 Jquery 或类似的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:21:24.867

不是直接的答案，但截屏视频似乎是基于 Aloha 的 wysiwhat 编辑器的演示，[可在 github 上找到](https://github.com/wysiwhat/Aloha-Editor)，包括[现场演示](http://wysiwhat.github.com/Aloha-Editor/cnx.html)。

# visual-c++ - 如何保护我的 C++ 应用程序不被反编译？

> ID：14304901
> 
> 赞同：-1
> 
> 时间：2013-01-13T15:27:45.603
> 
> 标签：visual-c++

> **可能重复：**
> [C#：如何让黑客/破解者更难绕过或绕过许可检查？](https://stackoverflow.com/questions/4532540/c-how-to-make-it-harder-for-hacker-cracker-to-get-around-or-bypass-the-licensi)
> [保护 C++ 程序不被反编译](https://stackoverflow.com/questions/14113884/protect-c-program-against-decompiling)

如何保护我的 Visual C++ Windows 窗体应用程序不被反编译？有办法吗？

多谢你们 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:40:40.907

如果您想在一定程度上保护它免受反编译，您可以随时使用一些保护软件，如混淆器或加密器。

有大量的产品可以做到这一点，其价格（从免费到非常昂贵）、复杂性和实施方式各不相同。

您可能需要检查[http://www.safenet-inc.com/](http://www.safenet-inc.com/)。

# php - PHP从数组中获取数据

> ID：14304905
> 
> 赞同：1
> 
> 时间：2013-01-13T15:28:14.277
> 
> 标签：php

以下数组有多个数据数组。一些数据数组有 field `message`，而另一些则没有。

我想从具有这些字段的数组中获取`message`和`created_time`字段。

我可以在没有循环的情况下获取数据，例如：

```
$msg = $json['posts']['data'][0]['message']; 
```

但是我如何使用循环并从所有具有该字段的数组中获取消息字段。

```
Array
(
    [id] => 1234
    [posts] => Array
        (
            [data] => Array
                (
                    [0] => Array
                        (
                            [id] => 123_456
                            [from] => Array
                                (
                                    [name] => User Name
                                    [id] => 123
                                )

                            [message] => This is the message i want to get.
                            [privacy] => Array
                                (
                                    [value] => 
                                )

                            [type] => status
                            [status_type] => mobile_status_update
                            [created_time] => 2013-01-13T11:09:55+0000
                            [updated_time] => 2013-01-13T11:09:55+0000
                            [comments] => Array
                                (
                                    [count] => 0
                                ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:30:58.880

怎么样：

```
foreach ($json['posts']['data'] as $postKey => $post) {
   if (isset($post['message']) {
      echo $post['message'];
   }
   if (isset($post['created_time']) {
      echo $post['created_time'];
   }
} 
```

我假设“数据”是`$post`数组的唯一键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T15:32:10.097

您必须确保`$data['message']`isset(). 如果是，我假设它`$data['created_time']`也存在，所以不需要检查它是否被设置。

```
$messages = array();
$x = 0;
foreach($json['posts']['data'] as $data){
    if($mes = isset($data['message'])){
        $message[$x]['message'] = $mes;
        $message[$x]['created_time'] = $data['created_time'];
        $x++;
    }
} 
```

# java - 无法在受保护的站点上启动 Java Web Start

> ID：14304909
> 
> 赞同：2
> 
> 时间：2013-01-13T15:28:35.453
> 
> 标签：java, web-applications, java-web-start, saml

我有以下问题。在一台服务器中，我有一个文件夹 /protected/ 需要使用 SAML 令牌进行身份验证。

当我尝试访问此文件夹中的资源时，我首先被重定向到登录页面，登录后我可以访问该资源。

现在，我在 /protected/ 文件夹中添加了一个 .jnlp 文件，其中包含所需的所有资源。当我尝试访问 .jnlp 文件时，我得到了预期的登录页面。登录后，Java Web Start 会初始化并尝试下载资源。

但是，Smart Start 立即失败，抱怨它无法解析 .jnlp 文件。当我查看调试控制台时，我看到下载的是 Java，而不是 jnlp 文件，而是登录页面。所以看起来Java Web Start应用程序不共享浏览器的凭据，所以它需要重新登录

我的身份提供者是 ZXID，我们使用的是 SAML。我会假设 Java Web Start 必须以某种方式使用与浏览器相同的 SAML 令牌，对吗？这个对吗？可能吗？

到目前为止，在我的调查中，似乎当浏览器找到 .jnlp 文件时，它会立即启动 Java，Java 应用程序将尝试下载 jnlp，从而产生此问题。我确实发现 JNLP 文件不能包含代码库条目。否则，Java VM 将尝试重新下载该文件，但由于它未经过身份验证，它将获得登录页面。

但是，如果可以读取 JNLP，则资源也不可能在受保护区域内，因为 JWS 再次没有经过身份验证。

所以我想需要的是JWS VM以某种方式从浏览器获取会话ID，因此它被认为是经过身份验证的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:40:05.307

到目前为止，我还没有找到解决这个问题的合适方法。我做了以下，它的工作：

*   在我的服务器上创建了一个保护区，并在其后面添加了一个 servlet
*   我的 servlet 使用会话 ID 即时创建 JNLP 文件。
*   JNLP 文件用于从公共位置下载 JAR
*   Web 启动应用程序使用会话 ID 从受保护区域加载资源。

# python - 显示部分搜索结果的最佳实践（从辅助服务器中逐一显示）

> ID：14304912
> 
> 赞同：1
> 
> 时间：2013-01-13T15:28:51.927
> 
> 标签：python, ajax, django, cgi, daemon

我想做以下事情：

*   django 站点（第一台服务器）上的查询被发送到第二台服务器（出于性能和安全原因）
*   使用 sqlite 在第二台服务器上处理查询
*   python搜索功能必须在内存中保留大量数据。一个简单的 cgi 总是必须从磁盘重新读取数据，这会进一步减慢搜索过程。所以我想我需要一些守护进程才能在第二台服务器上运行。
*   搜索过程很慢，我想发回部分结果，并在它们到达时显示它们。

这看起来像一个常见的任务，但不知何故我不明白。

我首先尝试了 Pyro，它公开了搜索类（然后我需要一种解决方法来避免 sqlite 线程问题）。我设法将完整的搜索结果放到第一台服务器上，但只是作为一个整体。我不知道如何一一“产生”结果（因为生成器不能被腌制），而且我无论如何也不知道如何将它们一一写到搜索结果页面上。

我可能需要一些“推送技术”说这个线程：[https](https://stackoverflow.com/a/5346075/1389074) ://stackoverflow.com/a/5346075/1389074谈论一些不同的框架。但哪个？

我似乎没有搜索正确的术语。也许有人可以向我指出一些解决此任务的讨论或框架？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:09:08.800

您可以使用 python[龙卷风 websockets](http://www.tornadoweb.org/documentation/websocket.html)。这将允许您建立从客户端到服务器的 2 路连接并返回数据。Tornado 是一个用 python 构建的异步框架。

# objective-c - 我如何让这些数字每 5 秒“计数”一次？（对象；Xcode）

> ID：14304916
> 
> 赞同：-2
> 
> 时间：2013-01-13T15:29:40.253
> 
> 标签：objective-c, arrays, add

我希望我的球在我的比赛中变得更快。在 pos 你可以选择球的速度。但我希望球每 5 秒变得更快。pos = CGPointMake(5.0,4.0); 5 秒后 5.0 应该变成 6.0 和 4.0 变成 5.0。

我有一个名为 MainInt 的计时器。MainInt 是一个计数器，它计算您在不丢失的情况下玩了多长时间。

还有一个显示计时器的标签。（IBOutlet UILabel *秒；.h）

.m

* * *

```
-(void)viewDidLoad {

[lastTime setHidden:YES];

[super viewDidLoad];
// X Speed Y Speed
pos = CGPointMake(5.0,4.0); // <- these numbers (add 1 each every 5 sec.)
Speedy = [NSTimer scheduledTimerWithTimeInterval:5.0  target:self selector:@selector(doThis) userInfo:nil repeats:YES];

}

/*

-(void)doThis {

if(MainInt % 5 == MainInt)     //True every 5th second
{

    pos = CGPointMake();
}

}
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:59:18.913

好吧，一方面，在 5 秒后永远`MainInt % 5 == MainInt`是*错误的。*1-4 是唯一`MainInt`可以实现这一点的值。考虑查看模运算符的工作原理。即使您将其更改为`MainInt % 5 == 0`，这是正确的，您仍然必须问自己为什么要检查有关外部异步时间值的任何内容。所有这一切都会做的是，如果计时器不同步，每次调用它时都强制它不做任何事情，因为你已经将它的调用之间的延迟设置为 5 秒。如果您希望一切都很好地同步，您可能应该有一个主要的 NSTimer 或 CADisplayLink 负责游戏循环，您可以在其中调用需要每帧更新游戏状态的方法。

如果您真的想以这种方式为所有事情使用单独的计时器并尝试使它们与您的主要时间值保持同步，那么您就可以了。

```
//replace timer line with this one
Speedy = [NSTimer scheduledTimerWithTimeInterval: 0.1  target:self selector:@selector(doThis) userInfo:nil repeats:YES];

//replace body of "doThis" with the following
if(MainInt % 5 == 0) //True every 5th second
{
    pos = CGPointMake(pos.x + 1, pos.y + 1);
} 
```

此外，您应该遵循某种命名约定并尝试更清楚地命名事物。如果`pos`是球的速度，不应该命名`velocity`而不是位置吗？什么是`Speedy`实例变量？如果是这样，为什么它是大写的？另外，Speedy 是我听过的最模糊的名字之一。它不是宠物，它是一个变量。同样的事情`MainInt`。一般来说，类名保留大写，实例变量、方法和函数使用驼峰式命名。它会让你的代码更清晰。:)

# c# - 如何在表 linq 中转换字符串表名？

> ID：14304917
> 
> 赞同：0
> 
> 时间：2013-01-13T15:29:44.613
> 
> 标签：c#, linq-to-sql

我有这个代码：

```
//Convert senderObject to MenuItem
MenuItem menuSelec = (MenuItem)sender;
//Obtain the selected table name
String nombreTabla = menuSelec.Header.ToString(); 
```

在变量`nombreTabla`中，我有要转换为表元素的表的字符串名称，以便以`DataContext`这种方式分配：

```
NorthwindDataContext northWind = new NorthwindDataContext();
dataGrid1.DataContext = northWind.Employees.ToList(); 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:37:25.133

您可能应该使用反射来实现：

```
dataGrad1.DataContext = northWind.GetType().GetProperty(nombreTabla).GetValue(northWind, null); 
```

此代码将采用您的上下文类类型，使用您的表名搜索属性并返回其值。

# nginx - nginx / fcgiwrapper 错误“无法获取脚本名称，...”

> ID：14304922
> 
> 赞同：3
> 
> 时间：2013-01-13T15:30:01.887
> 
> 标签：nginx, fastcgi, otrs

我正在尝试使用 nginx 和 fcgiwrap 在 Debian 上运行 OTRS。但我得到的只是这个错误：

```
FastCGI sent in stderr: "Cannot get script name, is DOCUMENT_ROOT and SCRIPT_NAME set 
and is the script executable?" while reading response header from upstream, 
client: 123.123.123.123, 
server: support.example.com, 
request: "GET /otrs/index.pl HTTP/1.1", 
upstream: "fastcgi://unix:/var/www/sockets/fcgiwrap.socket:", 
host: "support.example.com", referrer: "http://support.examle.com/" 
```

这是我的配置：

```
server {
    server_name support.example.com;

    access_log      /var/www/support/log/access.log;
    access_log      /var/log/nginx/access.log;
    error_log       /var/www/support/log/error.log info;

    fastcgi_buffers 8 16k;
    fastcgi_buffer_size 32k;

    root /var/www/support/otrs/var/httpd/htdocs;

    index index.html;

    location = /favicon.ico {
            access_log      off;
            log_not_found   off;
    }

    location /otrs-web/ {
            alias /var/www/support/otrs/var/httpd/htdocs;
    }

    location ~ ^/otrs/(.*\.pl)(/.*)?$ {
            gzip off;

            fastcgi_pass unix:/var/www/sockets/fcgiwrap.socket;

            fastcgi_index index.pl;

            fastcgi_param SCRIPT_FILENAME /var/www/support/otrs/bin/fcgi-bin/$1;

            include fastcgi_params;

    }
} 
```

和 fastcgi_params：

```
fastcgi_connect_timeout 65;
fastcgi_send_timeout    180;
fastcgi_read_timeout    180;

fastcgi_param   QUERY_STRING            $query_string;
fastcgi_param   REQUEST_METHOD          $request_method;
fastcgi_param   CONTENT_TYPE            $content_type;
fastcgi_param   CONTENT_LENGTH          $content_length;

fastcgi_param   SCRIPT_FILENAME         $request_filename;
fastcgi_param   SCRIPT_NAME             $fastcgi_script_name;
fastcgi_param   REQUEST_URI             $request_uri;
fastcgi_param   DOCUMENT_URI            $document_uri;
fastcgi_param   DOCUMENT_ROOT           $document_root;
fastcgi_param   SERVER_PROTOCOL         $server_protocol;

fastcgi_param   GATEWAY_INTERFACE       CGI/1.1;
fastcgi_param   SERVER_SOFTWARE         nginx/$nginx_version;

fastcgi_param   REMOTE_ADDR             $remote_addr;
fastcgi_param   REMOTE_PORT             $remote_port;
fastcgi_param   SERVER_ADDR             $server_addr;
fastcgi_param   SERVER_PORT             $server_port;
fastcgi_param   SERVER_NAME             $server_name;

fastcgi_param   HTTPS                   $https;

# PHP only, required if PHP was built with --enable-force-cgi-redirect
fastcgi_param   REDIRECT_STATUS         200; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:56:06.577

这可能是在 debian 挤压 (1.0-1+squeeze1) 上发现的 fcgiwrap 版本的错误。见[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=698071](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=698071)

升级到 fcgiwrap 1.0.3-3 为我解决了这个问题。

# javascript - Flexslider startAt 选项和 directionNav 似乎冲突

> ID：14304925
> 
> 赞同：2
> 
> 时间：2013-01-13T15:30:17.993
> 
> 标签：javascript, jquery, jquery-plugins, flexslider

我在最后一张幻灯片上使用带有 startAt 选项的 Flexslider 2.0。

这似乎弄乱了定向导航。

以前有人遇到过这个问题并且知道如何解决吗？

我使用的代码没有什么特别之处：

```
 $(".period-slides").flexslider({
      animation: "slide", 
      animationLoop: false,
      itemWidth: 265,
      minItems: 4,
      maxItems: 4,
      controlNav: false,
      directionNav: true,
      prevText: "\ue75d",
      nextText: "\ue75e"
      startAt: 7
    }); 
```

编辑：添加了 HTML

```
<div class="period-slides">
  <ul class="slides">
    <li class="slide"><!-- repeated 8 times -->
      <div class="period-overview">
        <p>Some Content</p>
      </div>  
    </li>
  </ul>
</div> 
```

编辑：它似乎没有正确指示当前的位置，在导航中似乎当前位置是第一张幻灯片。所以我在设置 startAt 时没有正确设置导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:13:50.363

根据您编辑中的 HTML，您总共有 8 个项目，这些项目将分为两张幻灯片，每张四张。

我认为您遇到的问题是设置`startAt`为 7 太高 - 您只有两张幻灯片，因此索引需要为 1 或 0。

当我设置`startAt`为 7 时，滑块最初显示为空白，我必须向后导航才能显示最后一张幻灯片。设置`startAt`为 1 或 0 会导致最初显示正确的幻灯片。

# mysql - sql自连接表删除重复行

> ID：14304928
> 
> 赞同：26
> 
> 时间：2013-01-13T15:30:54.057
> 
> 标签：mysql, sql

我有下表：

```
╔════════╦════════════╗
║ USERID ║ LANGUAGEID ║
╠════════╬════════════╣
║      1 ║          2 ║
║      1 ║          7 ║
║      1 ║          8 ║
║      2 ║         10 ║
║      2 ║          3 ║
╚════════╩════════════╝ 
```

现在我想为每个用户创建所有可能的语言对，这意味着我希望结果集是：对于用户 1：(2,7), (7,8), (2,8)

对于用户 2：（10,3）

为此，我完成了以下查询：

```
SELECT a.userId , a.LanguageId, b.LanguageId
FROM knownlanguages a, knownlanguages b  
WHERE a.userID=b.userID  
AND a.LanguageId<>b.LanguageId 
```

我得到的结果是针对用户 1： (2,7), (7,8), (2,8) , (7,2), (8,7), (8,2)

对于用户 2：(10,3), (3,10)

(10,3) 和 (3,10) 对我来说没有区别

如何删除重复的行？

tnx

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-13T15:41:55.403

使用您的标识符：

```
SELECT a.userId , a.LanguageId, b.LanguageId
  FROM knownlanguages a inner join knownlanguages b  
    on a.userID=b.userID and a.LanguageId < b.LanguageId 
```

测试： 脚表：

```
create table t ( u int, l int);

insert into t values 
(    1,               2),
(    1,               7),
(    1,               8),
(    2,               10),
(    2,               3); 
```

查询是：

```
select t1.u, t1.l as l1, t2.l as l2
from t t1 inner join t t2
   on t1.u = t2.u and t1.l < t2.l 
```

（[结果](http://sqlfiddle.com/#!2/8db6a/3/0)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T15:37:42.200

```
SELECT  userId,
        LEAST(LANG_ID1, LANG_ID2) ID1,
        GREATEST(LANG_ID1, LANG_ID2) ID2
FROM
    (
      SELECT a.userId, 
             a.LanguageId LANG_ID1, 
             b.LanguageId LANG_ID2
      FROM   knownlanguages a, knownlanguages b  
      WHERE  a.userID=b.userID  AND 
             a.LanguageId <> b.LanguageId
    ) s
GROUP BY userId, ID1, ID2 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d9257/12)

输出，

```
╔════════╦═════╦═════╗
║ USERID ║ ID1 ║ ID2 ║
╠════════╬═════╬═════╣
║      1 ║   2 ║   7 ║
║      1 ║   2 ║   8 ║
║      1 ║   7 ║   8 ║
║      2 ║   3 ║  10 ║
╚════════╩═════╩═════╝ 
```

或者简单地说，

```
 SELECT a.userId, 
         a.LanguageId LANG_ID1, 
         b.LanguageId LANG_ID2
  FROM   knownlanguages a, knownlanguages b  
  WHERE  a.userID=b.userID  AND 
         a.LanguageId < b.LanguageId 
```

# c# - 将 Web Api 服务自托管到 Windows 窗体中

> ID：14304933
> 
> 赞同：11
> 
> 时间：2013-01-13T15:31:22.920
> 
> 标签：c#, asp.net, winforms, asp.net-web-api, self-hosting

我正在尝试使用以下代码在 Windows 窗体应用程序中自行托管 Web Api 服务

```
namespace MascoteAquarium.Desktop
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            var config = new HttpSelfHostConfiguration("http://localhost:8080");
            config.Routes.MapHttpRoute(
                "DefaultApi", "api/{controller}/id", new { id = RouteParameter.Optional });

            using (HttpSelfHostServer server = new HttpSelfHostServer(config))
            {
                server.OpenAsync().Wait();
            }

            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new frmMainMenu());
        }
    }
} 
```

当我尝试

```
http://localhost:8080/api/*(some-controller)* 
```

我在*System.Web.Http.SelfHost.HttpSelfHostServer.ProcessRequestContext(ChannelContext channelContext, RequestContext requestContext)*收到*NullReferenceException*

 *有人知道发生了什么吗？是否可以在 Win Forms 应用程序中自行托管？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T07:52:43.240

问题是*HttpSelfHostServer对象在**Application.Run(...)*之前丢失，其中包含保持程序运行的主事件循环。[**using**](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)语句确保为对象调用**Dispose**方法，在本例中为server *，*从而使其无法响应请求，从而导致您遇到*NullReferenceException 。*

要修复异常，您的代码应如下所示：

```
...
using (HttpSelfHostServer server = new HttpSelfHostServer(config))
{
    server.OpenAsync().Wait();
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new frmMainMenu());
}
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:25:45.927

1.  您需要以提升的权限（作为管理员）运行 WinForms 应用程序（或 VS，如果您从调试器运行 WinForm 应用程序），否则将不允许自主机打开端口。

2.  确保没有其他应用程序在端口 8080 上运行*

# php - PHP - 在下拉菜单中递归列出所有目录和子目录

> ID：14304935
> 
> 赞同：13
> 
> 时间：2013-01-13T15:31:28.020
> 
> 标签：php, drop-down-menu, recursion, directory, subdirectory

> **可能重复：**
> [PHP获取给定目录的所有子目录](https://stackoverflow.com/questions/2524151/php-get-all-subdirectories-of-a-given-directory)

我想要一个下拉菜单来显示所有子目录，`./files/$userid/`而不仅仅是主文件夹。例如： `/files/$userid/folder1/folder2/`

我目前的代码是：

HTML：

```
<select name="myDirs">
<option value=""  selected="selected">Select a folder</option> 
```

PHP：

```
if (chdir("./files/" . $userid)) {

       $dirs = glob('*', GLOB_ONLYDIR);
       foreach($dirs as $val){
          echo '<option value="'.$val.'">'.$val."</option>\n";
       }        
        } else {
       echo 'Changing directory failed.';
} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-13T16:52:24.707

[RecursiveDirectoryIterator](http://php.net/manual/en/class.recursivedirectoryiterator.php)应该可以解决问题。不幸的是，文档不是很好，所以这里有一个例子：

```
$root = '/etc';

$iter = new RecursiveIteratorIterator(
    new RecursiveDirectoryIterator($root, RecursiveDirectoryIterator::SKIP_DOTS),
    RecursiveIteratorIterator::SELF_FIRST,
    RecursiveIteratorIterator::CATCH_GET_CHILD // Ignore "Permission denied"
);

$paths = array($root);
foreach ($iter as $path => $dir) {
    if ($dir->isDir()) {
        $paths[] = $path;
    }
}

print_r($paths); 
```

这会在我的计算机上生成以下输出：

```
Array
(
    [0] => /etc
    [1] => /etc/rc2.d
    [2] => /etc/luarocks
    ...
    [17] => /etc/php5
    [18] => /etc/php5/apache2
    [19] => /etc/php5/apache2/conf.d
    [20] => /etc/php5/mods-available
    [21] => /etc/php5/conf.d
    [22] => /etc/php5/cli
    [23] => /etc/php5/cli/conf.d
    [24] => /etc/rc4.d
    [25] => /etc/minicom
    [26] => /etc/ufw
    [27] => /etc/ufw/applications.d
    ...
    [391] => /etc/firefox
    [392] => /etc/firefox/pref
    [393] => /etc/cron.d
) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-13T16:00:04.433

您可以编写自己的目录递归列表，例如：

```
function expandDirectories($base_dir) {
      $directories = array();
      foreach(scandir($base_dir) as $file) {
            if($file == '.' || $file == '..') continue;
            $dir = $base_dir.DIRECTORY_SEPARATOR.$file;
            if(is_dir($dir)) {
                $directories []= $dir;
                $directories = array_merge($directories, expandDirectories($dir));
            }
      }
      return $directories;
}

$directories = expandDirectories(dirname(__FILE__));
print_r($directories); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-13T15:42:26.890

您可以在此函数中使用递归 glob 实现：

```
function rglob($pattern='*', $path='', $flags = 0) {
$paths=glob($path.'*', GLOB_MARK|GLOB_ONLYDIR|GLOB_NOSORT);
$files=glob($path.$pattern, $flags);
foreach ($paths as $path) {
  $files=array_merge($files,rglob($pattern, $path, $flags));
}
return $files;
} 
```

# ruby-on-rails - 需要 Ruby on Rails 循环帮助

> ID：14304939
> 
> 赞同：0
> 
> 时间：2013-01-13T15:32:04.253
> 
> 标签：ruby-on-rails, ruby, loops

在过去的 12 个小时里，我一直试图找到解决这个问题的方法，我只需要承认失败并提出问题......

我目前正在开展一个项目，该项目涉及向产品添加开始评级功能。

**the_number = number_with_precision(product.no_of_stars, :precision => 0)**给了我产品的平均星级。我可以在 index.html.erb 页面上显示数字（例如 4），但我无法让它为每个数字（而不是数字）呈现星形 jpg。

我知道 <%= 和 <% 等之间的区别，但是因为这是我的第一篇文章，我无法复制和过去我使用过的代码:-(

所以... the_number （例如）会给我 4，但是我的 index.html.erb 文件中的以下循环构造不断抛出错误读取

> `undefined method`“4”的次数：ActiveSupport::SafeBuffer`

```
the_number.times do 
img src="my-image.jpg" alt=""
end 
```

我知道上面的代码片段没有包含在正确的标签中，但如前所述，它也不允许我这样做。请假设第 1 行和第 3 行包含在没有“=”的 ruby​​ 标记中，并且图像包含在相关的 html img 标记中。您还可以假设评级“系统”正常工作。

任何帮助将不胜感激 ：-）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:38:39.927

尝试转换`the_number`为整数：

`the_number.to_i`

然后你应该可以调用`times`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:37:39.397

```
the_number.to_i.times do
  img src="my-image.jpg" alt=""
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T15:36:35.827

会`<%= ... Integer(expression resulting in 4) %>`为你工作吗？

为此，您可以附加时间并继续循环

如

```
Integer(the_number).times do
img src="my-image.jpg" alt="" 
end 
```

# asp.net - Inherrit Page_Load from base class. Correct Object Oriented programming

> ID：14304947
> 
> 赞同：1
> 
> 时间：2013-01-13T15:32:38.730
> 
> 标签：asp.net, inheritance

I have functionality I reuse in every web form. So I want this reuse in a base class and have the web form inherit the base class. Does my example use correct Object oriented practice ?? Here is an example:

```
using System;
using System.Web;
namespace Template1
{

  public abstract class AllPageBaseClass : System.Web.UI.Page
  {
    public AllPageBaseClass()
    {
      this.Load += new EventHandler(this.Page_Load);
    }

        protected void Page_Load(object sender, EventArgs e)
         {
              if (Session["stuff"] == null)
                  Response.Write("Session Is Empty");
              // More error checking common to all pages here
         }
     }
 }

using System.Lots_Of_Stuff; 
```

// Do I need System; and System.Web; here ??

```
namespace Template1
{
    public partial class Home : AllPageBaseClass
    {
        protected new void Page_Load(object sender, EventArgs e)
        {
        // All unique Page_load stuff here
        }
        ....
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:26:27.863

您不需要订阅 Load 事件。

我的一个项目示例：

```
public class SecuredPage:System.Web.UI.Page
{
    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        if (...) 
        {
            // do something
        }
    }
} 
```

您的内容页面应如下所示：

```
 public partial class Home : AllPageBaseClass
    {
        protected void Page_Load(object sender, EventArgs e)
        {
          // All unique Page_load stuff here
        }
        ....
    } 
```

您还可以查看[新运算符](http://msdn.microsoft.com/en-us/library/ms173153%28v=vs.80%29.aspx)的用途。

# ios - Where can I find good examples of TDD in iOS code on the net?

> ID：14304948
> 
> 赞同：-1
> 
> 时间：2013-01-13T15:32:39.207
> 
> 标签：ios, unit-testing, tdd

What is a good source where such code is available (e.g., in GitHub).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T15:39:56.673

这里有一个非常好的 iOS TDD 示例视频：http: [//qualitycoding.org/objective-c-tdd/](http://qualitycoding.org/objective-c-tdd/)

此示例的源代码无法在线获得，但无论如何这不会太有用。测试驱动开发是关于开发过程，而不是最终结果。通过查看完成的代码，您无法了解有关 TDD 的任何信息。

# java - Convert object[][] to ArrayList

> ID：14304949
> 
> 赞同：5
> 
> 时间：2013-01-13T15:32:51.937
> 
> 标签：java, arrays, collections, multidimensional-array, arraylist

I think probably this question has been asked/answered several times before my post. But I couldn't get the exact thing I am looking for, so I post it again:

I am trying to do like this:

```
float[][] fa2 = {{7,2}, {5,4}, {9,6}, {4,7}, {8,1}, {2,3}};
ArrayList<Float[]> AF = new ArrayList<Float[]>();
AF = Arrays.asList(fa2); 
```

But it is giving an error:

```
Type mismatch: cannot convert from List<float[]> to ArrayList<Float[]> 
```

I understand the reason for the error but what is the most convenient way to do the conversion in Java ?

This is the easiest way that I can think of. Is there something better / more convenient ?

```
float[][] fa2 = {{7,2}, {5,4}, {9,6}, {4,7}, {8,1}, {2,3}};
ArrayList<Float[]> AF = new ArrayList<Float[]>(fa2.length);
for (float[] fa : fa2) {
    //initialize Float[]
    Float[] Fa = new Float[fa.length];
    //copy element of float[] to Float[]
    int i = 0;
    for (float f : fa) {
        Fa[i++] = Float.valueOf(f);
    }
    //add Float[] element to ArrayList<Float[]>
    AF.add(Fa);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T15:34:23.280

As you're converting from `float[]` to `Float[]` you have to do it manually:

```
float[][] fa2 = {{7,2}, {5,4}, {9,6}, {4,7}, {8,1}, {2,3}};
ArrayList<Float[]> AF = new ArrayList<Float[]>();
for(float[] fa: fa2) {
    Float[] temp = new Float[fa.length];
    for (int i = 0; i < temp.length; i++) {
        temp[i] = fa[i];
    }
    AF.add(temp);
} 
```

Or you could just be using `float[]` all the way:

```
List<float[]> AF = Arrays.asList(fa2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T15:38:58.347

这为我跑了：

```
float[][] fa2 = {{7f,2f}, {5f,4f}, {9f,6f}, {4f,7f}, {8f,1f}, {2f,3f}};
List<float[]> AF = Arrays.asList(fa2); 
```

编辑：如果由于某种原因您必须混合使用 float[] 和 Float[] 使用 Apache Commons [ArrayUtils.toObject](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/ArrayUtils.html#toObject%28float%5b%5d%29)

```
float[][] fa2 = {{7f,2f}, {5f,4f}, {9f,6f}, {4f,7f}, {8f,1f}, {2f,3f}};
List<Float[]> AF = new ArrayList(fa2.length);
for (float[] fa : fa2) {
  AF.add(ArrayUtils.toObject(fa));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T15:40:52.920

您可以这样做的另一种方法：

```
 float[][] fa2 = {{7,2}, {5,4}, {9,6}, {4,7}, {8,1}, {2,3}};

   ArrayList<float[]> AF = new ArrayList<float[]>((Collection<float[]>)Arrays.asList(fa2)) 
```

我忘了添加演员表..修复它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T15:35:42.080

You can just do it like this and you don't need to convert:

```
Float[][] test = {{2f,3f},{3f,4f}}; 
```

The concept that allows to wrap the natives in Java to change into Objects is called AutoBoxing, which is being used here. However, for this to work you either have to specifically say that the numbers are floats or cast them with (float).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T15:40:36.120

尝试

```
 float[][] fa2 = {{7,2}, {5,4}, {9,6}, {4,7}, {8,1}, {2,3}};
    List<float[]> af = Arrays.asList(fa2); 
```

或者

```
Float[][] fa2 = {{7f,2f}, {5f,4f}, {9f,6f}, {4f,7f}, {8f,1f}, {2f,3f}};
List<Float[]> af = Arrays.asList(fa2); 
```

# c++ - Is it possible to erase elements of a std::list in a c++11 for each loop

> ID：14304950
> 
> 赞同：9
> 
> 时间：2013-01-13T15:32:53.550
> 
> 标签：c++, stl, c++11

I want to use the new C++11 for each loop to iterate over all elements of a list and erase certains elements. For example

```
std::list<int> myList;
myList.push_back(1); 
myList.push_back(13);
myList.push_back(9);
myList.push_back(4);

for(int element : myList) {
    if(element > 5) {
        //Do something with the element

        //erase the element
    }else{
        //Do something else with the element
    }
} 
```

Is it possible to do this using the for each loop or do I have to go back to iterators to achive this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T15:39:33.627

你应该能够做到这一点

```
myList.erase(std::remove_if(myList.begin(), myList.end(),
    [](int& element) 
    { 
        return element > 5;
    } 
    ),myList.end()); 
```

或者简单地说（由本杰明林德利提供）

```
myList.remove_if(
    [](int& element) 
    { 
        return element > 5;
    } 
    ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T16:04:02.420

您不能在基于范围的 for 循环中擦除该容器上的标准容器的元素 - 循环本身具有您当前正在访问的元素的迭代器，并且在循环递增之前擦除它会使该迭代器无效。它。

基于范围的 for 在标准的 6.5.4 中定义为等效于（稍微简化）：

```
for (auto __begin=begin-expr, __end=end-expr; __begin != __end; ++__begin) {
    for-range-declaration = *__begin;
    statement
} 
```

`begin-expr`并且`end-expr`有自己的冗长定义，但在您的示例中，它们`myList.begin()`分别是`myList.end()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T15:40:21.170

不，我不这么认为。看到[这个答案：](https://stackoverflow.com/questions/10360461/removing-item-from-vector-while-in-c11-range-for-loop)

> 不，你不能。基于范围的 for 用于需要访问容器的每个元素一次的情况。
> 
> 如果您需要在进行过程中修改容器、多次访问元素或以非线性方式遍历容器，则应该使用普通的 for 循环或其表亲之一。

# mysql - MySQL 5.5 not shutting down on mac

> ID：14304951
> 
> 赞同：0
> 
> 时间：2013-01-13T15:33:24.487
> 
> 标签：mysql

I have a problem shutting down the mysql server that is running on my mac. I tried from ActivityMonitor, from terminal using "mysqladmin shutdown" , kill -9 , and many other proposed ways but it always restarts within a second. Error log doesnt show anything strange:

```
 30113 16:28:12 [Note] /usr/local/Cellar/mysql/5.5.25a/bin/mysqld: Normal shutdown

130113 16:28:12 [Note] Event Scheduler: Purging the queue. 0 events
130113 16:28:14 [Warning] /usr/local/Cellar/mysql/5.5.25a/bin/mysqld: Forcing close of thread 3  user: 'root'

130113 16:28:14  InnoDB: Starting shutdown...
130113 16:28:15  InnoDB: Shutdown completed; log sequence number 2614644
130113 16:28:15 [Note] /usr/local/Cellar/mysql/5.5.25a/bin/mysqld: Shutdown complete

130113 16:28:15 mysqld_safe mysqld from pid file /usr/local/var/mysql/mun07066.local.pid ended
130113 16:28:15 mysqld_safe Starting mysqld daemon with databases from /usr/local/var/mysql
130113 16:28:15 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/var/mysql/ is case insensitive
130113 16:28:15 [Warning] One can only use the --user switch if running as root

130113 16:28:15 InnoDB: The InnoDB memory heap is disabled
130113 16:28:15 InnoDB: Mutexes and rw_locks use GCC atomic builtins
130113 16:28:15 InnoDB: Compressed tables use zlib 1.2.5
130113 16:28:15 InnoDB: Initializing buffer pool, size = 128.0M
130113 16:28:15 InnoDB: Completed initialization of buffer pool
130113 16:28:15 InnoDB: highest supported file format is Barracuda.
130113 16:28:16  InnoDB: Waiting for the background threads to start
130113 16:28:17 InnoDB: 1.1.8 started; log sequence number 2614644
130113 16:28:17 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
130113 16:28:17 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
130113 16:28:17 [Note] Server socket created on IP: '0.0.0.0'.
130113 16:28:17 [Note] Event Scheduler: Loaded 0 events
130113 16:28:17 [Note] /usr/local/Cellar/mysql/5.5.25a/bin/mysqld: ready for connections.
Version: '5.5.25a'  socket: '/tmp/mysql.sock'  port: 3306  Source distribution 
```

# javascript - 从其他范围访问对象（javascript）

> ID：14304952
> 
> 赞同：0
> 
> 时间：2013-01-13T15:33:28.833
> 
> 标签：javascript, jquery

> **可能重复：**
> [是否可以访问函数的闭包？](https://stackoverflow.com/questions/11192875/is-it-possible-to-gain-access-to-the-closure-of-a-function)

请看一下这段代码：http: [//jsfiddle.net/FH6pB/1/](http://jsfiddle.net/FH6pB/1/)

```
(function($) {
  var o1 = {
    init: function() { alert('1'); },
  }
  var o2 = {
    init: function() { alert('2'); },
  }
}(jQuery));

(function($) {
  var o3 = {
    init: function() { alert('3'); },
  }
  o2.init();
}(jQuery));

o1.init();
o2.init(); 
```

我在 2 个不同的“范围”中有 3 个对象（我不知道在这里使用这个词是否正确，但我想你明白意思）。您可能知道，我无法从外部或其他“范围”访问对象的功能（这些`o.init();`都不起作用）。

为什么会这样？有没有办法改变它？

我知道我可以将代码放在一个范围内，它会很好地工作，但是如果我在单独的 JS 文件中有范围怎么办？

提前感谢，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:34:54.920

不，您不能从外部访问闭包中声明的变量。这就是闭包的工作原理。

一个（通常不好的）解决方案是将变量声明为全局变量：

```
(function($) {
  window.o2 = {
    init: function() { alert('2'); },
  };
}(jQuery));

o2.init(); 
```

但通常，模块模式用于将一些变量设为私有，只返回有用的变量。见[这篇文章](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:50:04.873

您可以使用类似名称空间：

[http://jsfiddle.net/FH6pB/2/](http://jsfiddle.net/FH6pB/2/)

```
var scope = {};

(function($) {
  scope.o1 = {
    init: function() { alert('1'); },
  }
  scope.o2 = {
    init: function() { alert('2'); },
  }
}(jQuery));

(function($) {
  scope.o3 = {
    init: function() { alert('3'); },
  }
  scope.o2.init();
}(jQuery));

scope.o1.init();
scope.o2.init(); 
```

# python - How to configure logging handler to produce weekly rotated log files?

> ID：14304954
> 
> 赞同：1
> 
> 时间：2013-01-13T15:33:57.053
> 
> 标签：python, logging

```
TimedRotatingFileHandler(filename, when='W', interval=0, backupCount=0) 
```

Produces:

```
ValueError: Unable to configure handler 'fichierSemaineStandard': You must specify a day for weekly rollover from 0 to 6 (0 is Monday): W 
```

But the [python documentation](http://docs.python.org/2/library/logging.handlers.html#timedrotatingfilehandler) tells

> value: 'W', type of interval: Week day (0=Monday)

So what's wrong?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T15:33:57.053

It seems that this section of documentation is not clear about this. After having a peek in the code, to make the week rotation work, the 'W' argument is not sufficient. The weekday number must be placed just after the letter `W`:

```
TimedRotatingFileHandler(filename, when='W0', backupCount=0) 
```

Note that the "interval" argument is useless.

# arduino - Arduino+Ethernet-SD shield, listing all filenames existing files on the SD card

> ID：14304961
> 
> 赞同：0
> 
> 时间：2013-01-13T15:34:53.670
> 
> 标签：arduino, listings

I have: Arduino MEGA 2560; Ethernet+SD shield [http://www.amazon.com/dp/B0022TWQ22/?tag=stackoverfl08-20](https://rads.stackoverflow.com/amzn/click/com/B0022TWQ22) ; SD card 2GB FAT.

SD contains 400 files with names 00000000; 0000001; 0000002; ... 00000098; 0000099; 0000100; ... 00000398; 00000399.

I need to construct String var which will contain all the Filenames separated by ";" like this: sdata = "0000001;0000002;0000003 ... 00000398;00000399;";

Code:

```
#include <SdFat.h>
#include <SPI.h>

const uint16_t chipSelect = SS;
char cnamefile[9];
String sdata="";
SdFat sd;
SdFile file;

void setup() {

  Serial.begin(9600);
  Serial.println("hi");
  sdata="";
  if (!sd.begin(chipSelect, SPI_HALF_SPEED)) sd.initErrorHalt();
    Serial.println("List files");
    while (file.openNext(sd.vwd(), O_READ)) {
      file.getFilename(cnamefile);
      file.close();
      sdata = sdata + String(cnamefile) + ";";

    }
  Serial.print(sdata);
}

void loop() { 
} 
```

Listening to the COM port i see:

```
hi
List files
00000005;00000006;00000007;00000008;00000009;00000010;00000011;00000012;00000013;00000014;00000015;00000016;00000017;00000018;00000019;00000020;00000021;00000022;00000023;00000024;00000025;00000026;00000027;00000028;00000029;00000030;00000031;00000032;00000033;00000034;00000035;00000036;00000037;00000038;00000039;00000040;00000041;00000042;00000043;00000044;00000045;00000046;00000047;00000048;00000049;00000050;00000051;00000052;00000053;00000054;00000055;00000056;00000057;00000058;00000059;00000060;00000061;00000062;00000063;00000064;00000065;00000066;00000067;00000068;00000069;00000070;00000071;00000072;00000073;00000074;00000075;00000076;00000077;00000078; 
```

How to fix this problem and put all filenames in one variable?

Information for: 400 names and 400 ";" its 3600 bytes. When i try to read any file and put all its contents (more than 3600 bytes) in "String sdata" it works normally. Problem only with listing. Please help me in sorting out this issue.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:20:08.003

这似乎是您的程序将失败的正确位置。这条无辜的线是你的问题：

```
sdata = sdata + String(cnamefile) + ";"; 
```

像这样的字符串连接将在短时间内使用 2X 的 sdata 内存。这就是您应该如何查看该行中的操作顺序

```
// compiler has done this for you:
String temp1234 = sdata + String();

// note that at this moment, memory usage is now 2x sdata

String temp1235 = temp1234 + ";";

// now you can have 3x the memory used

// assignment to variable
sdata = temp1235;

// now can delete temporary variable
// compiler will do this
//temp1234.delete()
//temp1235.delete() 
```

您正在尝试创建最多 3k 字节的字符串，但总 RAM 只有 8k，因此无法执行上述操作。

这展示了关于字符串的几点。您在一行上的串联不一定比这两行形式更好：

```
sdata = sdata + String(cnamefile);
sdata = sdata  + ";"; 
```

在第二种形式中，您可以确保中间结果只有一个临时变量。

这导致下一个提示。您应该在想我将如何逃避临时变量。这就是我们有 += 运算符的原因。你最好的机会是像这样连接：

```
sdata += String(cnamefile);
sdata += ";"; 
```

如果 += 运算符在 String 类上可用，编译器将使用它。该运算符可能能够使用更节省内存的连接方式。例如，如果字符串预先分配了一些额外的内存，那么它可以将新字符放入现有缓冲区。

总的来说，这是一个很好的学习受限内存空间中字符串的方法，因为您必须了解一些在大型 CPU 环境中经常被忽略的编译器内部和运算符细节。

鉴于您建议的大小，如果您更改为预先构建字符串缓冲区并用文件名*填充*它的方法，您可能只能适合 RAM 。换句话说：不要在微控制器上使用 String 。

# sql - Using IIF in Access give me aggregate function error

> ID：14304964
> 
> 赞同：1
> 
> 时间：2013-01-13T15:35:15.263
> 
> 标签：sql, ms-access, aggregate-functions, iif

```
SELECT Bot.BetType, 
   Sum(Bot.Result) AS Won, 
   IIf([Bot]![Market Name] Like "*Place*", "Place", "Win") AS Type
FROM Bot
GROUP BY Bot.BetType, Type; 
```

Getting error:

> You tried to execute a query that does not include the specified expression `If([Bot]![Market Name] Like "*Place*", "Place", "Win")` as part of an aggregate function.

I did not find a result from google. If you have any questions, feel free to ask.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T15:36:59.463

您不能在 GROUP BY 中使用别名：

```
SELECT Bot.BetType, 
   Sum(Bot.Result) AS Won, 
   IIf([Bot]![Market Name] Like "*Place*", "Place", "Win") AS Type
FROM Bot
GROUP BY Bot.BetType, IIf([Bot]![Market Name] Like "*Place*", "Place", "Win"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:37:48.670

如果您使用子查询，我认为您可以使用别名：

```
SELECT B.BetType, 
       Sum(B.Result) AS Won,
       type
from (select b.*, IIf([Bot]![Market Name] Like "*Place*", "Place", "Win") AS Type
      FROM Bot b
     ) b
GROUP BY b.BetType, Type; 
```

# php - Can't load youtube source in php script.

> ID：14304966
> 
> 赞同：0
> 
> 时间：2013-01-13T15:35:27.510
> 
> 标签：php, html, youtube, domdocument

Hello I'm making a php script to extract videos URL from [Youtube](http://youtube.com) result. I have this:

```
<?php
    error_reporting(1);

    function conseguir_codigo_url($url) {
        $dwnld = curl_init();
        curl_setopt($dwnld, CURLOPT_URL, $url);
        curl_setopt($dwnld, CURLOPT_HEADER, 0);
        //$userAgent = 'Mozilla/4.0 (compatible; MSIE 6.01; Windows NT 6.0)';
        curl_setopt($dwnld, CURLOPT_USERAGENT, $userAgent);
        curl_setopt($dwnld, CURLOPT_RETURNTRANSFER, true);

        $fuente_url = curl_exec($dwnld);
        curl_close($dwnld);
        return $fuente_url;
    }

    function extraer_atributo_elemento($fuente) {
        $file = new DOMDocument;

        if($file->loadHTML($fuente) and $file->validate()){

            echo "DOCUMENTO";

            $file->getElementById("search-results");

        }

     $codigo_url = conseguir_codigo_url("http://www.youtube.com/results?search_sort=video_date_uploaded&uni=3&search_type=videos&search_query=humor");
    extraer_atributo_elemento($codigo_url);
?> 
```

The trouble is I can't use `getelementbyid`, I think it's maybe **html5**. Have you a suggestions to solve this. I need parse the source and I don't know **regex** . So domdocument is the only way.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:48:21.097

你为什么用`$file->validate()`？如果你只是想通过 ID 提取元素，不需要调用它。此外，在调用之前设置`DOMDocument::recover`为可能有助于解析来自网络的损坏的 HTML。`true``loadHTML`

# google-visualization - 谷歌图表默认大小

> ID：14304972
> 
> 赞同：21
> 
> 时间：2013-01-13T15:36:09.217
> 
> 标签：google-visualization

我有一个 Google 图表，设置为 500 像素 x 500 像素，但返回 400 像素 x 200 像素。我查看了 div，它显示 500x500。我没有理由解释为什么图表回到 400x200。div 显示 500x500，但 SVG 矩形框显示 400x200，使所有图像变小。

有不知道的设定吗？

```
<div class="span5">
<div id="qual_div" style="border:1px black solid;margin:0px;padding:0px;height:500px;width:500px"></div>
</div>
    <script type="text/javascript">
  var data, options, chart;
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    data = google.visualization.arrayToDataTable([
      ['Qual', 'Stat'],
      ['Patient Satisfaction',     {{ $stats->attributes['sa_ptsatisfaction'] }}],
      ['Medical Knowledge',      {{ $stats->attributes['sa_medknowledge'] }}],
      ['ER Procedural Skills',  {{ $stats->attributes['sa_erprocskills'] }}],
      ['Nurse Relationship Skills', {{ $stats->attributes['sa_nrsrltnshpskls'] }}],
      ['Speed',    {{ $stats->attributes['sa_speed'] }}],
      ['Compassion',    {{ $stats->attributes['sa_compassion'] }}],
      ['EMR Utilization Skills',    {{ $stats->attributes['sa_emr'] }}],
      ['Profession Teamwork Skills',    {{ $stats->attributes['sa_proftmwrkskills'] }}]
    ]);

    options = {
      title: 'My Daily Activities'
      ,chartArea:{left:0,top:0,width:"100%",height:"100%"}
    };

    chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }

  function adjustChart(nm, vl) {
    for (var r=0; r<data.D.length; r++) {
      if (data.D[r].c[0].v == nm) {
        data.D[r].c[1].v = parseInt(vl);
        break;
      }
    }
    chart.draw(data, options);
  }
</script> 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-15T00:05:43.437

有几种方法可以设置图表的大小。

首先是设置包含它的元素的大小。图表将默认为包含元素的宽度和高度（[有关高度/宽度的默认值，请参阅 Google 可视化文档](https://developers.google.com/chart/interactive/docs/gallery/columnchart)）。

第二个是不定义元素的实际大小，而是通过将这些添加到您的选项中手动将图表的高度/宽度设置为 500 像素：

```
options = {
  title: 'My Daily Activities'
  ,chartArea:{left:0,top:0,width:"100%",height:"100%"}
  ,height: 500
  ,width: 500
}; 
```

您在代码中实际所做的是设置图表本身的大小（而不是带有轴、标签和图例的整个图表元素的大小）。如果您指向 @Dr.Molle 在评论中指出的适当 div，这将导致图表绘图区域变为 500 像素 x 500 像素。

假设您不希望这样，您的新选择将是：

```
options = {
  title: 'My Daily Activities'
  ,height: 500
  ,width: 500
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-25T09:49:22.850

我有同样的情况，渲染图的大小为 400 x 200px

渲染后，svg 被包裹在 3 个 div 中

```
<div id="gantt-chart" class="svelte-ql38wl">

  <div style="position: relative; width: 400px; height: 200px;">

    <div style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%;">

      <svg width="400" height="200"><defs></defs><g><rect x="0" y="0" width="400" height="200" fill="#ffffff"></svg>

    </div>
  </div>
</div> 
```

1.  *拥有*图表的容器集 = new google.visualization.Gantt(document.getElementById( **'gantt-chart'** ));
2.  生成的外包装 div - 宽度和高度集 > 在哪里？似乎与 svg 大小同步
3.  生成的内部包装 div - 图表区域？
4.  svg

内部包装 div 看起来像图表区域。不幸的是，更改选项中的值没有效果 - 始终保持 'left: 0px; 顶部：0px；宽度：100%；高度：100%；'

**注意**我正在绘制 Google**甘特**图 - 看起来并非所有图表都具有相同的可能设置。我在例如“柱形图”下找到了 chartArea 选项，但它没有与“甘特图”一起列出

主图表文档说

> 您可以在两个地方指定图表大小：
> 
> 1.  **在 HTML 中**指定大小- 加载和呈现图表可能需要几秒钟。如果您已经在 HTML 中调整了图表容器的大小，则加载图表时页面布局不会跳转。
> 2.  将大小指定**为图表选项**- 如果图表大小在 JavaScript 中，您可以复制和粘贴，或序列化、保存和恢复 JavaScript，并一致地调整图表大小。
> 
> **如果您未在 HTML 中或作为选项指定图表大小，则图表可能无法正确呈现。**

由于看起来图表大小只能设置为像素数（再次使用甘特图 - 我看到了其他似乎可以设置百分比的示例......）在我的情况下，这些设置有帮助

1.  设置容器 div + 生成的子元素的 css
2.  通过 js 以编程方式设置图表的高度

```
#gantt-chart {
        width: 100%;
        height: 100%;
        display: flex;
        overflow: auto;
}

#gantt-chart div {
        margin: auto; /* centers chart inside container div with display:flex*/
} 
```

```
let trackHeight = 30

let options = {
  height: dataTable.getNumberOfRows() * trackHeight + 50
  // width adaps to container div with 100% width
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-15T19:11:00.997

因此，按照 jmac 的答案设置高度和宽度是可行的，但是如果您希望它具有**响应**性，我还需要做一些额外的事情。

但只是备份一下，我在第一个地方遇到这个问题的原因是：当页面加载时，这个图表显示的 div 是**不可见的。**

如此处所见，隐藏的图表宽度**错误**400 乘 200：jsfiddle.net/muc7ejn3/6/

如此处所见，隐藏的图表宽度是**正确**的：jsfiddle.net/muc7ejn3/7/

另一种方法是在调用 chart.draw() 之前取消隐藏图表，然后再次隐藏它，例如：

```
tempShowChart();
chart.draw(view, options);
hideChartAgain(); 
```

这不处理调整大小的窗口。

# c# - 如何知道 Windows 商店应用程序类型可能抛出的异常类型？

> ID：14304980
> 
> 赞同：2
> 
> 时间：2013-01-13T15:36:37.777
> 
> 标签：c#, exception-handling, windows-store-apps

我正在使用这种方法：[DatagramSocket.BindEndpointAsync()](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.sockets.datagramsocket.bindendpointasync.aspx)

我怎么知道它会抛出什么类型的异常？此[官方示例](http://code.msdn.microsoft.com/windowsapps/DatagramSocket-sample-76a7d82b/sourcecode?fileId=57971&pathId=589460989)显示捕获所有异常，如下所示：

```
 // Start listen operation. 
        try 
        { 
            await listener.BindServiceNameAsync(ServiceNameForListener.Text); 
            rootPage.NotifyUser("Listening", NotifyType.StatusMessage); 
        } 
        catch (Exception exception) 
        { 
            CoreApplication.Properties.Remove("listener"); 

            // If this is an unknown status it means that the error is fatal and retry will likely fail. 
            if (SocketError.GetStatus(exception.HResult) == SocketErrorStatus.Unknown) 
            { 
                throw; 
            } 

            rootPage.NotifyUser("Start listening failed with error: " + exception.Message, NotifyType.ErrorMessage); 
        } 
```

但这似乎非常草率-肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:42:00.080

C# 不要求开发人员用它可以抛出的异常列表来标记每个方法（Java 有这个要求）。这就是为什么您必须依赖文档或检查源代码并找出答案的原因。

在这种情况下，Async/Await 不会改变任何东西。

# php - 带分页的HABTM

> ID：14304981
> 
> 赞同：0
> 
> 时间：2013-01-13T15:36:51.030
> 
> 标签：php, cakephp, pagination, find, has-and-belongs-to-many

首先看一下下面的模型结构：

模型*构建*：

```
id
name 
```

建模*范围*：

```
id
building_id
postalcode 
```

好的，所以*BuildingRange* $belongsTo *Building*和*Building* $hasMany *BuildingRange*。应该清楚直到'这里。

现在让

```
$current_postalcode="12345"; 
```

我知道想在*BuildingController*中做这样的事情：

```
$this->paginate('Building',array('Building.BuildingRange.postalcode'=>$current_postalcode)); 
```

在文本中：我想为存在带有 $current_postalcode 的条目“BuildingRange”选择所有建筑物。你是怎样做的？

我感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:35:43.703

在处理这样的`hasMany`关联时，CakePHPs 自动魔术需要两个查询，一个在`Building`表上，一个在`BuildingRange`表上。通过该`pagiante`方法传递条件时，这些条件将传递给第一个查询，因此由于关联的模型表未连接，因此它将失败。

这个问题可以通过几种不同的方式解决，一种是使用临时连接，例如：

```
$this->paginate = array
(
    'joins' => array
    (
        array
        (
            'table' => 'building_ranges',
            'alias' => 'BuildingRange',
            'type' => 'LEFT',
            'conditions' => array('BuildingRange.building_id = Building.id')
        )
    )
);
$this->paginate('Building', array('BuildingRange.postalcode' => $current_postalcode)); 
```

这将导致查询看起来像这样：

```
SELECT `Building`.`id`,
       `Building`.`name`
FROM   `buildings` AS `Building`
       LEFT JOIN `building_ranges` AS `BuildingRange`
              ON ( `BuildingRange`.`building_id` = `Building`.`id` )
WHERE  `BuildingRange`.`postalcode` = '12345'
LIMIT  20 
```

请注意，在传递给方法的条件中，无需通过模型`paginate`引用模型，即无需使用（无论如何都行不通）。`BuildingRange``Building``Builduing.BuildingRange`

ps，提一下你使用的 CakePHP 版本总是好的！

# php - 存储和显示图像

> ID：14304993
> 
> 赞同：0
> 
> 时间：2013-01-13T15:38:12.080
> 
> 标签：php, image, file-upload, file-storage

我仍然真的不明白图像存储和显示。

让我举个例子，我首先做了什么（人们说我的逻辑是一个坏主意）。

我一开始是这样的，每个用户都有一个带有 的文件夹，`user_id`提交表单后，它会将带有`unique name`in 的图像和图像名称保存到该文件夹​​中，扩展名在数据库中，我已经显示了图像匹配文件夹中的文件名与数据库中保存的名称，

示例（这里让我们跳过唯一名称只是为了更清楚一点）

用户上传了一张名为`butterfly.jpg`

图像存储在数据库中

```
id | name          |
1  | butterfly.jpg | 
```

并存储在同名文件夹中

```
/images/user_id/butterfly.jpg 
```

并以这种方式显示图像

```
<img src="images/unser_id/<?php echo $name ?>" alt=""> 
```

所以它与名称匹配（如果不是，我希望我很清楚对不起）

所以我知道我的逻辑是一个糟糕的逻辑，因为将名称存储在数据库中会导致一个巨大的问题，可能会导致以后的其他问题

我想问的是它是否不是一个大请求，是否有人可以用一些示例代码写下一个逻辑线程（我不是要为我写它），只是为了让我知道我错过了什么

以及关于我所读内容的其他问题

一些开发者说，他们只在数据库中存储图像文件夹名称，这没关系，但是如果只存储文件夹名称，我如何能够显示这些图像？因为它可能会有不止一张图片，比如 3 张原始图片和 2 张其他缩略图。

所以请不要因为这个问题讨厌我，我只是问这个问题，因为我想向更有经验的开发人员学习并获得建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:41:58.607

我认为你在正确的道路上。正确的做法是 - 将文件上传到您的服务器，然后将图像路径放入您的数据库，据我所知，您做得对。:-)

# java - Java 7 JRE 在 OSX Mountain Lion 上已安装但未启用

> ID：14304996
> 
> 赞同：2
> 
> 时间：2013-01-13T15:38:29.413
> 
> 标签：java, macos, osx-mountain-lion, java-7, java-6

Mountain Lion 上的 Java 给了我一些问题。

*   当我加载嵌入了 Java 的网站时，我收到“阻止插件”通知。 ![爪哇版](../Images/e21ffef96058f75ef0418555de761427.png)
*   单击它会提示我下载并安装最新的 Java JRE。很公平，我做到了。

*   运行最新的 Java 7 JRE 安装程序（多次）后，当我从系统偏好设置中检查 Java 控制面板时，我可以看到据说只安装了 Java 7。（在“用户”和“系统”选项卡中）

![Java 控制面板](../Images/c07a8a1aeb89663c5f177dddce2ea084.png)

*   但是，当我签入终端时，我仍然只看到 Java 6： ![Java终端版本](../Images/fe0c8d2c6aafebfb69b8848a752c2b6c.png)

而且我仍然收到“阻止插件”通知。我还确保检查我的 Safari 安全设置是否允许 Java。

据我所知，我仍然安装了 Java 6，并且（我假设）这就是终端/浏览器正在使用的。所以我的问题是，我可以做些什么来配置使用 java 7 而不是 6？这意味着如果我在终端中运行“java -version”，我会看到“1.7.0_10”而不是“1.6.0_37”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:47:11.580

这很可能与美国 CERT 建议禁用 Java 7 的当前新闻项目有关，直到周二可以发布最新沙盒漏洞的补丁。

Apple 可能已禁用该插件以保护您。

[这是公告。](http://www.kb.cert.org/vuls/id/625617) 但是，如果您在 Google 上搜索“java 7 问题”，您将获得许多热门新闻。

你说：“嗯，可能，但我仍然认为当我运行'java -version'时，它应该显示为 1.7.0_10，不管苹果有什么安全措施，而不是 1.6.0_37，所以有些东西配置不正确。”

不对。安装 Oracle JRE 不会使 java 在命令提示符下可用。仅安装 JDK 即可。因为您从 Snow Leopard 升级到 Lion 和 ML，所以您还剩下 Apple Java（对吗？）。现在，Apple 已通过其黑名单机制伸出援手，并通过宣布它为“病毒”来禁用您的 Oracle Java 7。所以你只剩下你所拥有的了。完全有道理。