# StackOverflow 问答 14493000-14493999

# c# - 为什么基本页面不提供 OnNavigatedTo() 事件？

> ID：14493001
> 
> 赞同：1
> 
> 时间：2013-01-24T02:36:00.683
> 
> 标签：c#, visual-studio-2012, windows-store-apps

在试图确定为什么我的应用程序（基于“空白应用程序”模板进入这个勇敢的新世界）没有像我预期的那样工作（http://stackoverflow.com/questions/14467756/why-would-my -event-handler-not-get-called），我开始了一个新的空白项目，然后删除了 MainPage 并添加了一个新的基本（非空白）页面，我将其命名为 MainPage 以纪念已故的页面（并作为对传统和懒惰——所以我不必更改导航到该页面的 app.xaml.cs 中的代码）。

Blank 应用程序像这样创建了原始 MainPage.xaml.cs（自动生成的注释被省略）：

```
namespace AsYouWish
{
    public sealed partial class MainPage : Page
    {
        public MainPage()
        {
            this.InitializeComponent();
        }

        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
        }
    }
} 
```

...我用 BasicPage（不是 BlankPage）替换了它，它生成了这个：

```
namespace AsYouWish
{
    public sealed partial class MainPage : AsYouWish.Common.LayoutAwarePage
    {
        public MainPage()
        {
            this.InitializeComponent();
        }

        protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
        {
        }

        protected override void SaveState(Dictionary<String, Object> pageState)
        {
        }
    } 
```

所以 Basic Page 得到 LoadState() 和 SaveState()，而 Blank Page 的 MainPage 有 OnNavigatedTo()。为什么基本页面没有 OnNavigatedTo() 事件？似乎每个页面都有被导航到（和从，但我认为该事件更有可能是可选/不必要的）的可能性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T05:56:16.367

这只是正在使用的页面模板的问题。`OnNavigatedTo`虚拟方法是在`Page`类中实现的，因此它可以在任何直接或间接继承自它的类中被覆盖。唯一的区别是用于的模板中`MainPage.xaml.cs`已经有一个空`OnNavigatedTo`方法，而`BasicPage`模板没有。

没有什么可以阻止您通过添加以下代码来覆盖该方法：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    base.OnNavigatedTo(e);

    // add you own code here
} 
```

只要确保您保持`base.OnNavigatedTo(e)`通话，否则您将失去已在`LayoutAwarePage`（启用`LoadState`/ `SaveState`）中实现的功能。

如果您不知道，在 Visual Studio 中向您的类添加覆盖非常容易。只需键入`override`并按空格键，就会打开一个下拉列表，其中包含您可以在类中覆盖的所有方法。一旦您选择其中一个，完整的空方法将被添加到您的类中，就像我在上面的答案中包含的那样。

# pdf - 可以扫描 pdf 文档并将所有带注释的突出显示文本复制到带有页面参考的剪贴板的 Apple 脚本

> ID：14493008
> 
> 赞同：1
> 
> 时间：2013-01-24T02:36:46.177
> 
> 标签：pdf, applet, applescript, automator

在进行研究时，我发现自己通常会在 pdf 文档中添加注释（突出显示、添加注释），然后我会在 Evernote 中创建一个注释并索引我所有的注释。

例如，

* * *

p 3 - “学校是否有可能改变他们的做法，从而对学生的成绩产生强烈的积极影响？”

第 10 页 - “该区大胆推进多项新改革”

* * *

我希望使用 pdf 文档，对其进行注释，然后运行将我所有注释（亮点和注释）复制到剪贴板的小程序，然后我可以将它们粘贴到注释中，从而获得我所有点的索引发现有用。

我正在使用 Mac，并且愿意使用任何一种语言来简单地创建它。我的想法是一个applescript会是最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:12:30.637

[Skim](http://skim-app.sourceforge.net)可以将笔记导出为文本，它还有一个 AppleScript 字典。

`tell application "Skim" to tell document 1 to save as "notes as text" in "/Users/username/Desktop/notes.txt"`

输出如下所示：

```
* Highlight, page 1
ocument (highlighting

* Text Note, page 1
aa

* Highlight, page 1
ent, annotate it, 
```

# apache - setcellformula 上的 Apache POI NoSuchFieldError

> ID：14493009
> 
> 赞同：0
> 
> 时间：2013-01-24T02:36:53.860
> 
> 标签：apache, exception, apache-poi

我有一个部署 apache poi 3.7 并在服务器上出现以下错误的环境

发生异常：java.lang.NoSuchFieldError: instance at org.apache.poi.ss.formula.FormulaParser.Term(FormulaParser.java:1431) 。. .

当我尝试使用 main 代码时，它工作正常

这是发生异常的行

sumcell.setCellFormula("(H"+frow+"*I"+frow+")+(K"+frow+"*L"+frow+")+M"+frow+"+N"+frow); 我尝试使用 SUM 函数但错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:08:59.543

这在[Apache POI FAQ](http://poi.apache.org/faq.html#faq-N10006)中有介绍。您的类路径上有两个不同的 Apache POI 副本，这不起作用。您需要确保只有一份副本，我建议您使用 POI 3.9，因为它自 3.7 以来已经修复了很多错误。

我强烈建议您[阅读有关 NoSuchFieldError 的 POI 常见问题解答条目，](http://poi.apache.org/faq.html#faq-N10006)并按照那里的说明追踪并删除重复的旧 jar。

# c# - 可以将 Debug.Assert 设置为仅引发异常而不是在 C# 中弹出窗口吗？

> ID：14493011
> 
> 赞同：4
> 
> 时间：2013-01-24T02:37:19.523
> 
> 标签：c#, .net, visual-studio

当我的 C# 应用程序中的断言失败时，我希望抛出一个异常并且编辑器跳转到该位置。但是会弹出一个中止/重试/忽略消息框。有没有办法控制这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T02:46:06.203

您可以添加一个自定义 TraceListener ，它会在任一方法上引发异常`.Fail()`：

```
public class ThrowListener : TextWriterTraceListener
{
    public override void Fail(string message)
    {
        throw new Exception(message);
    }

    public override void Fail(string message, string detailMessage)
    {
        throw new Exception(message);
    }
} 
```

我可能会派生出你自己的异常类型，它同时接受消息和 detailMessage，因此异常来自哪里更明显。

您必须将调用堆栈提升到 .Assert() 调用，因为调试器可能会直接将您带到 .Assert() 调用`throw`。

您可以像这样添加它：

```
Debug.Listeners.Insert(0, new ThrowListener()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T02:42:42.577

不直接：这就是 Debug.Assert 所做的。请参阅文档

[http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.aspx)

也许您想使用除 Debug.Assert 之外的其他东西？比如如果无法处理就简单地抛出一个异常，或者在需要时调用一些应用程序定义的 onError 处理程序？

或者，您可以通过添加侦听器并连接到该侦听器来获得所需的内容。请参阅文档。

# javascript - 事件声明后添加的元素使用什么代替 .live() (jQuery v1.9)

> ID：14493012
> 
> 赞同：1
> 
> 时间：2013-01-24T02:37:29.960
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [jquery：on vs live](https://stackoverflow.com/questions/9864476/jquery-on-vs-live)

**当我通过 javascript动态创建对象**时，我曾经使用**.live()**方法，因为在我将事件侦听器声明为单击时，该元素尚未在 DOM 中，因此当动态添加元素时通过用户操作， .live('click') 方法可以解决问题。

 **但是，在 jQuery v1.9.0 中，没有 live 方法，文档建议使用**.on()**代替，但这在这种示例中不起作用......

这是一个例子：http: [//jsfiddle.net/promatik/C3DLQ/](http://jsfiddle.net/promatik/C3DLQ/)。

仅当您将 jQuery 设置为 1.8.3 或 Migrate 插件时，它才会起作用。

```
$("#create").click(function(){
    $('body').append($('<div id="test" class="btn">click me<div>'));
});

$("#test").on("click", function(){
    alert("worked!"); 
}); 
```

我实际上测试了其他方法，如**delegate()**和**bind()**，但没有一个有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T02:42:28.903

它不起作用的原因是`test`javascript第一次运行时不存在。如果您将 on 事件附加到父元素并将其过滤为`#test`，那么它将按预期工作。

```
$("body").on("click", "#test", function(){
    alert("worked!"); 
}); 
```

更新小提琴：http: [//jsfiddle.net/C3DLQ/4/](http://jsfiddle.net/C3DLQ/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T02:40:35.280

您可以将其附加到文档并指定一个选择器，如下所示：

```
$(document).on("click", "#test", function(){
    alert("worked!"); 
}); 
```

该`#test`元素未在您的初始选择器查询中返回，因此未附加任何事件。将它附加到`document`元素并指定要使用的选择器将使其在将新元素添加到 DOM 时工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T02:41:01.840

它不起作用的原因是因为您正在使用一个 ID 的多个实例。选择多个元素时，请改用类。

```
$('#create').click(function() {
    $('body').append($('<div class="btn test">click me<div>'));
}); 
```

您还需要将单击绑定到文档并过滤元素以使其`.test`喜欢。

```
$(document).on('click', '.test', function() {
    alert('worked!'); 
}); 
```**

# three.js - Three.js 子网格位置总是返回 (0,0,0)

> ID：14493019
> 
> 赞同：3
> 
> 时间：2013-01-24T02:39:25.780
> 
> 标签：three.js, mesh

我通过 OBJLoader 加载了一些对象，加载的对象包含一个父级和多个子级；然后我应用 Raycaster 并找到点击的孩子。

然后我想更新子对象的位置，但是所有子对象的初始位置都为零。

```
var intersect = intersects[0].object;
intersect.position.y = intersect.position.y + 5; // 0 + 5 
```

但在我的场景中，一切看起来都很好。另外，如果我删除点击的对象，实际上它是从场景中删除的。我想我错过了一些点，他们的位置不能是（0,0,0）。我怎样才能达到他们的相对位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-09-11T18:01:40.317

这是将变换控制设置为对象中心的代码：

```
let objLoader = new THREE.OBJLoader();
    let mtlLoader = new THREE.MTLLoader();
    mtlLoader.load("path/to/mtlFile.mtl", (materials) => {
        materials.preload();
        objLoader.setMaterials(materials).load("path/to/objFile.obj", (object3d) => {
            object3d.traverse((child) => {
                if (child instanceof THREE.Mesh) {
                    child.geometry.computeBoundingBox();
                    let matrix = new THREE.Vector3();
                    let offset = child.geometry.boundingBox.getCenter(matrix);
                    child.geometry.applyMatrix(new THREE.Matrix4().makeTranslation(-offset.x, -offset.y, -offset.z));
                    child.position.copy(offset);
                    objects.push(child);
                }
            });
            scene.add(object3d);
        });
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T12:57:39.080

Try this, then read position(). I had the same issue, got an answer here. (geom is your Meshes geometry.)

```
objMesh.centroid = new THREE.Vector3();
for (var i = 0, l = geom.vertices.length; i < l; i++) {
    objMesh.centroid.add(geom.vertices[i].clone());
}
objMesh.centroid.divideScalar(geom.vertices.length);
var offset = objMesh.centroid.clone();

objMesh.geometry.applyMatrix(new THREE.Matrix4().makeTranslation(-offset.x, -offset.y, -offset.z));

objMesh.position.copy(objMesh.centroid); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T04:03:07.993

位置是相对于父级的

将位置乘以父级的变换以获得世界空间坐标，如果那是您正在寻找的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-30T12:29:54.910

这是因为 obj 文件中的所有对象的轴心点都位于 World 0,0,0，无论它们在导出之前的本地轴心点在哪里。

# c - 对程序的“输出”进行排序

> ID：14493025
> 
> 赞同：0
> 
> 时间：2013-01-24T02:40:06.597
> 
> 标签：c, unix, sorting, output

假设我运行一个程序，该程序在其运行过程中生成多个 printf 语句。自然，每次它遇到 printf 命令时都会打印。我将如何进行而不是打印它，“存储”它，然后在程序结束时，取出所有应该打印的行，对其进行排序，然后打印它。

例如

```
Run Program
prints "File1 90"
prints "File2 30"
prints "File3 40"
End Program 
```

* * *

```
Run Program
prints "File1 90" (don't actually print it out)
prints "File2 30" (don't actually print it out)
prints "File3 40" (don't actually print it out)
Take print statements and rearrange them by numerical order, then print
Program prints:
prints "File2 30"
prints "File3 40"
prints "File1 90" 
```

我想我必须在我的 C 程序中使用 unix shell 命令，例如 `sort -k2n,2 -k1,1 myprogram`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:49:32.390

我能想到的一种方法是重定向`stdout`到文件

```
freopen( "file.txt", "w", stdout ); 
```

然后将文件提供给`sort`带有`-k 2`参数的文件，因为您想对第二列进行排序（？）

至于命令/s 参考这个[例子](http://linuxprograms.wordpress.com/category/pipes/)。

它说明了基础知识。

# python - 从 .csv 文件中读取值并将它们转换为浮点数组

> ID：14493026
> 
> 赞同：2
> 
> 时间：2013-01-24T02:40:10.250
> 
> 标签：python, arrays, csv, numpy, data-conversion

我偶然发现了一个小编码问题。我基本上必须从看起来很像这样的 .csv 文件中读取数据：

```
2011-06-19 17:29:00.000,72,44,56,0.4772,0.3286,0.8497,31.3587,0.3235,0.9147,28.5751,0.3872,0.2803,0,0.2601,0.2073,0.1172,0,0.0,0,5.8922,1,0,0,0,1.2759 
```

现在，我基本上需要一个由这样的行组成的整个文件，并将它们解析为 numpy 数组。到目前为止，我已经能够使用类似于以下的代码将它们放入一个大字符串类型对象中：

```
order_hist = np.loadtxt(filename_input,delimiter=',',dtype={'names': ('Year', 'Mon', 'Day', 'Stock', 'Action', 'Amount'), 'formats': ('i4', 'i4', 'i4', 'S10', 'S10', 'i4')}) 
```

该文件的格式目前由一组 S20 数据类型组成。我需要基本上将大 ORDER_HIST 数据类型中的所有数据提取到每列的一组数组中。我不知道如何保存日期时间列（我现在将其保留为字符串）。我需要将其余部分转换为浮动，但下面的代码给了我一个错误：

```
 temparr=float[:len(order_hist)]
    for x in range(len(order_hist['Stock'])): 
        temparr[x]=float(order_hist['Stock'][x]); 
```

有人可以告诉我如何将所有列转换为我需要的数组吗？？？或者可能引导我到一些链接这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T02:56:10.907

小伙子，我有请客给你吗？[numpy.genfromtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)有一个`converters`参数，它允许您在解析文件时为每一列指定一个函数。该函数被提供 CSV 字符串值。它的返回值成为numpy数组中的对应值。

此外，该`dtype = None`参数告诉`genfromtxt`对每列的类型进行智能猜测。特别是，数字列会自动转换为适当的 dtype。

例如，假设您的数据文件包含

```
2011-06-19 17:29:00.000,72,44,56 
```

然后

```
import numpy as np
import datetime as DT

def make_date(datestr):
    return DT.datetime.strptime(datestr, '%Y-%m-%d %H:%M:%S.%f')

arr = np.genfromtxt(filename, delimiter = ',',
                    converters = {'Date':make_date},
                    names =  ('Date', 'Stock', 'Action', 'Amount'),
                    dtype = None)
print(arr)
print(arr.dtype) 
```

产量

```
(datetime.datetime(2011, 6, 19, 17, 29), 72, 44, 56)
[('Date', '|O4'), ('Stock', '<i4'), ('Action', '<i4'), ('Amount', '<i4')] 
```

您的真实 csv 文件有更多列，因此您希望向 中添加更多项目`names`，但除此之外，该示例应该仍然有效。

如果你真的不关心额外的列，你可以像这样分配一个绒毛名称：

```
arr = np.genfromtxt(filename, delimiter=',',
                    converters={'Date': make_date},
                    names=('Date', 'Stock', 'Action', 'Amount') +
                    tuple('col{i}'.format(i=i) for i in range(22)),
                    dtype = None) 
```

产量

```
(datetime.datetime(2011, 6, 19, 17, 29), 72, 44, 56, 0.4772, 0.3286, 0.8497, 31.3587, 0.3235, 0.9147, 28.5751, 0.3872, 0.2803, 0, 0.2601, 0.2073, 0.1172, 0, 0.0, 0, 5.8922, 1, 0, 0, 0, 1.2759) 
```

* * *

您可能也有兴趣查看基于构建的[pandas](http://pandas.pydata.org/)`numpy`模块，该模块将解析 CSV 提升到更高级别：它有一个[pandas.read_csv](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html)函数，其`parse_dates = True`参数将自动解析日期字符串（使用[dateutil](http://labix.org/python-dateutil#head-c0e81a473b647dfa787dc11e8c69557ec2c3ecd2)）。

使用熊猫，你的 csv 可以用

```
df = pd.read_csv(filename, parse_dates = [0,1], header = None,
                    names=('Date', 'Stock', 'Action', 'Amount') +
                    tuple('col{i}'.format(i=i) for i in range(22))) 
```

请注意，无需指定`make_date`函数`. Just to be clear --`pands.read_csv `returns a`DataFrame，而不是 numpy 数组。实际上可能对您的`DataFrame`目的更有用，但您应该知道它是一个不同的对象，具有全新的开发和探索方法世界。

# c - 使用信号和 sigsegjmp/siglongjmp 捕获 SIGSEGV

> ID：14493027
> 
> 赞同：0
> 
> 时间：2013-01-24T02:40:22.737
> 
> 标签：c, signals, segmentation-fault

我正在编写一个小程序来扫描内存的每一页上的单个内存地址，以查看它是否可读/或可读写/或没有。

注意：我没有显示部分代码，因为它是导致错误的信号处理。

这个while循环用于遍历addys

```
char * currAddy;
currAddy = (char*)0x00000000;

while(1){

    int readWrite = read_write(currAddy);

    printf("Chunk val returned %i\n", readWrite);

    if(currAddy == (char*)0xfffff000)
        break;

    currAddy += pageSize;

} 
```

其余用于处理信号

```
int read_write (char * currAddy)
{

myRead = 0;
myWrite = 0;

/*
 myRead = 0 & myWrite = 0 -> NOT A CHUNK -> RW = -1
 myRead = 0 & myWrite = 1 -> NOT POSSIBLE
 myRead = 1 & myWrite = 0 -> RW = 0
 myRead = 1 & myWrite = 1 -> RW = 1

 */

if (sigsetjmp(jumpbuf, 1) == 0){

    //try and read
    char test = *currAddy;
    myRead = 1;

    //try and write
    *currAddy = 'a';
    myWrite = 1;

}else{

    //SIGSEGV while reading
    if (myRead == 0)
        return -1;

    //SIGSEGV while writing
    if (myRead == 1 && myWrite == 0)
        return 0;

    printf("Inside setjmp\n");

}

printf("Below the sigjmp\n");
sleep(1);

//return 1 because we can both read and write to this position

//doesnt appear to run though -- HELP HERE?
return 1;

} 
```

这是处理信号的地方

```
void handler (int sig)
{
    siglongjmp(jumpbuf, 1);
} 
```

现在，当我运行它时，输出如下所示：

```
Chunk val returned -1
Chunk val returned -1
Chunk val returned -1
Chunk val returned 0
Chunk val returned 0
Below the sigjmp
Inside setjmp
Below the sigjmp
Below the sigjmp
Inside setjmp
Below the sigjmp
Below the sigjmp
Inside setjmp
......... 
```

编辑：我似乎无法弄清楚为什么它永远不会返回 1？同样奇怪的是它为什么会打印两次“Below the sigjmp”。任何帮助/提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:37:12.863

根据 POSIX，您不能在信号处理程序中使用 (sig)longjump - 如果这样做，您会得到未定义的行为。但是，至少某些 Unix 确实允许它（通常是 BSD 派生的），因此您将在此处看到的内容取决于您运行的操作系统。

看起来您在`sleep`调用中遇到了崩溃（可能是由于早期 siglongjmp 中损坏的信号/堆栈状态），这导致它循环回`sigsetjmp`.

也有可能成功者`*currAddy = 'a';`破坏了一些重要的东西，导致后来的崩溃循环回`sigsetjmp`

# ios - 可靠的方法来判断 aes256 解密中是否使用了错误的密钥

> ID：14493029
> 
> 赞同：6
> 
> 时间：2013-01-24T02:40:25.200
> 
> 标签：ios, objective-c, encryption, commoncrypto

我有一些代码用于加密和解密 ios 应用程序中的一些字符串。该代码涉及使用 CCCrypt。是否有可靠的方法来测试所使用的密钥的有效性，而无需将密钥实际存储在任何地方？根据我的研究，似乎接近判断密钥是否有效的唯一方法是使用密钥长度和密钥哈希。任何人都可以指导我正确的方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T17:17:52.957

获得答案需要一些关于正确加密的背景知识。您可能已经知道这一点，但大多数人都做错了，所以我将覆盖它。（如果您使用密码进行加密并且没有对至少一个 HMAC、两个盐和一个 IV 进行编码，那么您做错了。）

`CCHmac()`首先，您必须在任何时候使用未经身份验证的模式（例如 AES-CBC）进行加密时使用 HMAC（请参阅参考资料）。否则，攻击者可以修改您的密文，使其解密为不同的消息。有关此攻击的示例，请参见[模式。](https://github.com/rnapier/security-blunders/blob/master/modaes.py)HMAC 是基于密钥的加密安全哈希。

其次，如果您使用基于密码的加密，则必须使用 KDF 将其转换为密钥。最常见的是 PBKDF2。您不能只将密码字节复制到密钥中。

假设您以这种方式使用密码，您通常会生成两个密钥，一个用于加密，一个用于 HMAC。

好的，有了这些部分，您可以验证密码是否正确，因为如果不正确，HMAC 将失败。这就是[RNCryptor](https://github.com/rnapier/RNCryptor)的做法。

这种简单的方法有两个问题：您必须在验证密码之前处理整个文件，并且无法检测文件损坏与密码错误。

为了稍微解决这些问题，您可以添加一小块单独的 HMAC 额外数据。然后，您验证那个小块而不是整个文件。这基本上就是[aescrypt](http://www.aescrypt.com/)的做法。具体来说，他们生成一个“真实”密钥来加密整个文件，然后使用 PBKDF2 生成的密钥和 HMAC 分别加密该密钥。某些形式的损坏仍然看起来像错误的密码，但通过这种方式将它们区分开来更容易一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:14:58.643

您可以将使用密钥加密的已知值存储在数据库中。验证密钥是否正确很简单：加密已知字符串，并将其与数据库中的加密输出进行比较。如果您坚持使用单个数据块，那么您不必担心操作模式并且可以保持简单。

也可以存储密钥的哈希值，但我会将密钥视为密码，并采取在数据库中存储密码时所采取的所有防御措施（例如，使用 bcrypt、对哈希值加盐等）。

如果您无法存储这些值，您可以在不知道实际内容但可能知道消息的某些属性（例如 ASCII 文本、字符串中某处有今天的日期等）的情况下解密某些内容并测试解密的内容这些属性的消息。然后，如果解密后的块不具有这些属性（例如，设置了 MSB 的字节，没有日期实例），您就知道密钥无效。在这种情况下存在误报的可能性，但几率非常低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:24:37.270

一般来说，我同意彼得·埃利奥特的观点。但是，我还有一些额外的评论：

a) 如果密钥是随机生成的，那么存储密钥的哈希值是安全的

b）您始终可以将原始消息的哈希附加到加密消息（如果您可以控制的话）。在这种情况下，您可以解密消息，获取解密消息的哈希并将其与原始消息的哈希进行比较。如果它们是 eqaul，则使用正确的密钥进行解密。

# c - 标准差计划

> ID：14493030
> 
> 赞同：0
> 
> 时间：2013-01-24T02:40:29.823
> 
> 标签：c

这是说明：编写一个程序，开始向用户询问正态分布的平均值 u 和标准差 s（参见 wiki 文章[http://en.wikipedia.org/wiki/Normal_distribution](http://en.wikipedia.org/wiki/Normal_distribution) 该程序然后要求N，然后询问 N 个值 x。对于每个 x，它会在屏幕上写出 f(x)。请注意，程序只向用户询问 u、s 和 N 一次。之后，它会询问 x 的 N 个值，一个接一个。在每个值 x 之后，它写出函数的相应值。当然，为此使用双精度并使用标准数学库中的平方根和指数函数。

到目前为止，这是我的代码，但我无法让 N 工作。

```
#include <stdio.h>
#define PI 3.141592653589793238462643383
#define E 2.7182818284590452353602874713526624977572470937
#include <math.h>
#include <stdlib.h>
int main()
{
double u,s,N,x,math1, math2, math3,n,;
printf("Enter Mean: \n");
scanf("%d", &u);
printf("Enter Deviation: \n");
scanf("%d", &s);

    n=1/2;
math1 =1/(u*sqrt(2*PI));
math2= (x-u)/s * (x-u)/s;
math3= E * exp(n);
x = math1 * exp(math3)*exp(math2);
printf("%d \n", x);
system("Pause");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:54:29.320

```
n=1/2; 
```

这将等于 0，因为 1 是整数，2 是整数，1 除以 2 是整数数学中的 0。

尝试`1.0/2.0`

确保每个其他除法的一侧或两侧都有一个双精度数，否则它将作为整数数学完成

# java - 如何访问 java 信任库证书

> ID：14493032
> 
> 赞同：0
> 
> 时间：2013-01-24T02:40:31.533
> 
> 标签：java, certificate, ssl-certificate

我的服务器程序对客户端证书使用信任存储，这对于双向握手很好，但是我希望能够从信任存储中获取证书用于其他事情。我注意到[这个](http://www.java2s.com/Code/Java/Security/RetrievingaKeyPairfromaKeyStore.htm)Key stores 的例子。对于信托商店，我该如何处理？

我以以下方式为我的 SSL 双向握手设置了信任库，但我想将证书用于其他用途。

```
System.setProperty("javax.net.ssl.trustStore", "store.jts");
System.setProperty("javax.net.ssl.trustStorePassword", "PASS); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:32:21.457

信任库和密钥库都是 KeyStore 对象。只是用法不一样。因此，您找到的示例应该适用于密钥存储或信任存储，因为它们是相同类型的对象。

# ruby-on-rails - 动态分配背景图片 scss/sass

> ID：14493043
> 
> 赞同：4
> 
> 时间：2013-01-24T02:41:41.013
> 
> 标签：ruby-on-rails, ruby, sass

我想要做的是有一个表单，您可以在其中上传图片，然后当您查看该对象时，图片在特定 div 中居中、垂直和水平地向上倾斜。它的大小是未知的，等等。

除非有办法使用 image_tag 帮助器将其垂直居中，否则我希望能够将图像用作背景图像。在我的 .css.scss 文件中，我希望能够执行类似的操作

```
.image_div {
     background-image: image_url("#{@object.image}");
     background-position: center
} 
```

我使用 CarrierWave 上传图片，当我输出 @object.image 时，它​​会在我的计算机上提供图像的路径（所以我不知道在生产中是否会被视为路径或 url）。有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-24T02:50:06.273

可以在 sass 文件中*使用*erb，但这是一个非常非常糟糕的主意，因为您的 css 必须在每个请求上进行解析（并且浏览器将无法缓存它）。

我建议直接在样式标签中的视图页面上粘贴一段 css。这样它就会被页面评估。有道理？

* * *

**更新**（添加请求的示例）

将此添加到您的实际视图中（例如 show.html.erb）：

```
<style media="screen">
  .image_div { background-image: url(<%= @object.image %>); }
</style> 
```

您可以将`background-position`声明保留在 css 文件中，因为它不是动态的。`@object.image`需要返回图像的实际路径，因此如果`@object.image`是 ruby​​ 对象，则需要访问存储路径的任何属性（`@object.image.path`或`@object.image.url`任何适合您的代码库的属性）。

# php - 具有条件自定义字段的复杂 wordpress 查询

> ID：14493045
> 
> 赞同：1
> 
> 时间：2013-01-24T02:41:44.770
> 
> 标签：php, wordpress

我正在尝试在侧边栏中显示日历。应该显示在此日历中的帖子有一个名为**event_date**的自定义字段。该字段填充了日期，格式类似于 YYYYMMDD。我试图让**未来的事件**出现。

我的第一个计划，只显示带有 event_date 字段的帖子，成功了：

```
<?php
$args = array
  (
  'showposts' => 10,
  'meta_key' => 'event_date',
  'meta_value' => '',
  'meta_compare' => '!='
  );
query_posts( '$args' );
?> 
```

但我不知道如何从这里开始，只过滤掉未来的事件。当然，我可以稍后在 while 循环中进行过滤，但这听起来不是一个干净的解决方案。

如果可以按日期对它们进行排序，那就更令人惊奇了，否则我将把所有东西都放在一个数组中并从那里计算顺序。

使用时间戳而不是 yyyymmdd 不是解决方案，因为这需要对编辑进行大量教育。

希望有人能指出我正确的方向。提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:51:47.997

输入您的问题总是有帮助的。我得到了它！无论如何感谢您的阅读！

这是我的解决方案，愚蠢的是我以前没有弄清楚这一点：

```
<?php
$args = array
(
'showposts' => 10,
'meta_key' => 'event_date',
'order' => 'ASC',
'orderby' => 'meta_value',
'meta_value' => date("Ymd", date("U")-3600*24),
'meta_compare' => '>'
);
query_posts( $args );
?> 
```

# javascript - 在AngularJS中提交时实现需要禁用的按钮的最佳方法是什么？

> ID：14493050
> 
> 赞同：0
> 
> 时间：2013-01-24T02:42:01.137
> 
> 标签：javascript, angularjs

我有一个带有提交按钮的表单，该表单需要 10 秒才能返回，我不希望用户同时单击该表单。到目前为止，我的方法是将按钮的文本设置为`buttonText="Loading..."`并使用`ng-disable`我在提交（`isSubmitted`）时设置的标志。考虑到这必须是一个通用模式，那么最好和最可重用的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:43:41.923

使用自定义指令创建可重用组件。该指令应创建一个隔离作用域并使用“&”语法来指定单击按钮时要调用的父作用域函数。传递一个回调函数，以便指令可以在任务完成时撤消按钮标签更改和禁用属性。

HTML：

```
<button wait-button do-stuff="doStuff(cbFn)">button label</button> 
```

指示：

```
myApp.directive('waitButton', function() {
    return {
        scope: {
            doStuff: '&'
        },
        link: function(scope, element) {
            var normalText = element.text();
            var callbackFn = function() {
                console.log('callback')
                // element[0] is the (unwrapped) DOM element
                element[0].disabled = false;
                element.text(normalText);
            }
            element.bind('click', function() {
                element[0].disabled = true;
                element.text('Loading...');
                // Weird syntax below!  Arguments must 
                // be passed inside an object:
                scope.doStuff({cbFn: callbackFn});
            })
        }
    }
})

function MyCtrl($scope, $timeout) {
    $scope.doStuff = function(callbackFn) {
        console.log('doStuff');
        // Do stuff here... then call the callback.
        // We'll simulate doing something with a timeout.
        $timeout(function() {
            callbackFn()
        }, 2000)
    }
} 
```

[小提琴](http://jsfiddle.net/mrajcok/7dGqA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:28:55.393

我推荐使用 jQuery [.delegate](http://api.jquery.com/delegate/)函数：记住**“#”** = 控件 ID 和**“.”** = CSS类

```
 $("#create").click(function(){
        $('body').append($('<div id="test" class="btn">click me<div>'));
    });

    //-- if you create single button use this
    $("body").delegate("#test", "click", function() {
       alert("worked!"); 
     });

    //-- if you create many buttons use this
    // $("body").delegate(".btn", "click", function() {
      // alert("worked!"); 
    // }); 
```

# python - Python找出最大数量？

> ID：14493051
> 
> 赞同：3
> 
> 时间：2013-01-24T02:42:02.307
> 
> 标签：python

编写一个程序，反复提示用户输入整数，直到用户输入“完成”。输入“完成”后，打印出最大和最小的数字。如果用户输入的不是有效数字，请使用 try/except 捕获它并发出适当的消息并忽略该数字。

到目前为止我有这个但我对如何创建一种比较最大值的方法感到困惑？我是编程新手，我只是寻求帮助。我是否也在尝试之前包含了 try 和 except 块？然后除了错误？

```
 largest = None
 smallest = None
 while True:
     num = raw_input("Enter a number: ")
     if num == "done" : break
       print num

 print "Maximum", largest 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T02:46:49.830

```
nums = []
while True:
  n = raw_input("Enter a number: ")
  if n == "done":
    break
  try:
    nums.append(int(n))
  except ValueError:
    print "Invalid input"

print "Min: %d" % min(nums)
print "Max: %d" % max(nums) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T02:47:42.580

```
largest = None
smallest = None
first_number = True

while True:
    num = raw_input("Enter a number: ")
    if num == "done" : break

    try:
        num = int(num)
        if first_number:
            largest = num
            smallest = num
            first_number = False
        else:
            largest = max(largest, num)
            smallest = min(smallest, num)
    except Exception, e:
        print "Not Valid Input!!!"
        continue

print "Maximum", largest
print "Minimum", smallest 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T05:23:21.787

您可以通过对原始程序进行非常小的修改来做到这一点：只需在您考虑它们时保留最小和最大数字的标签。

```
largest  = None
smallest = None

while True:
    string = raw_input("Enter a number: ")

    if string == "done":
        break

    try:
        num = int(string)
    except ValueError:
        print "Not a number"
        continue

    if largest is None or num > largest:
        largest = num

    if smallest is None or num < smallest:
        smallest = num 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-04T05:03:13.387

```
largest =  None
smallest = None

while True:
   num = raw_input("Enter a number: ")
   if num == "done": break
   if len(num) < 1 : break
   try:
    num=int(num)
   except:
    print "Invalid input"
    continue
    if num is smallest:
      smallest = num
    if num > largest:
      largest = num
print "Maximum is ", largest
print "Minimum is ", smallest 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T02:47:29.917

```
numbers =[]
while True:
     num = raw_input("Enter a number: ")
     if num == "done" :
         break
     else:
         numbers.append(num)

print max(numbers)
print min(numbers) 
```

因此，逻辑是将数字添加到列表中并使用函数 max 和 min。您可以编写代码来自己处理异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-09T16:05:15.650

```
largest = None
smallest = None

while True:
num = raw_input('Enter a number: ')

if num == 'done':
    print 'Maximum is %s' % largest
    print 'Minimum is %s' % smallest
    break

try:
    num = int(num)

    if smallest is None or num <= smallest:
        smallest = num

    if largest is None or num >= largest:
        largest = num

except:
    print 'Invalid input' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-13T13:34:30.397

我也是一个 Python 初学者，我在 Charles Russell Severance 的“Python for Everyone”中注意到了这个问题。我的答案如下。

```
prompt = 'Enter the number: '
initial_value = 0.0
while True:
    thing = input(prompt)
    if thing == 'done':
        break
    try:
        num = float(thing)
    except:
        print('Invalid input')
        continue
    num = float(thing)
    if num > initial_value:
        max = num
        min = initial_value
    else:
        min = num
print('Max', max)
print('Min', min) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-24T02:45:52.273

通过分配`num`给单个值，您将在循环的每次迭代中覆盖它。请改用列表。

```
num = []
finish = "n"
while finish.lower() == "n"
    try:
        num.append(int(raw_input("Enter a number: ")))
    except ValueError:
         print "Not a number"
    finish = raw_input("Would you like to add another number? (y/n): ")

print max(num) 
```

# html - 将 NavBar 中心与宽度对齐：100%；

> ID：14493052
> 
> 赞同：0
> 
> 时间：2013-01-24T02:42:08.257
> 
> 标签：html, css, center, centering, navbar

我知道这个问题已经被问了 100 次，但我就是找不到对我有帮助的话题。我试图使导航栏居中，我的 div 的宽度为 100%。我只想让我的导航栏居中。任何帮助将不胜感激！这是我的 HTML：

```
<! Doctype HTML >
<html>
<head>
    <meta http-equiv="refresh" content="10" />
    <title>NavBar WareHouse</title>
    <link rel="stylesheet" type="text/css" href="main.css" />
</head>
<body>
    <div id="nav"> <!-- Nav Start -->
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="tabbed.html">Tabbed</a>
                <ul>
                    <li><a href="tab-colour.html">Colourful</a></li>
                    <li><a href="tab-elegant.html">Elegant</a></li>
                    <li><a href="tab-complex.html">Complex</a></li>
                </ul>
            </li>
            <li><a href="regular.html">Regular</a>
                <ul>
                    <li><a href="reg-colour.html">Colourful</a></li>
                    <li><a href="reg-elegant.html">Elegant</a></li>
                    <li><a href="reg-complex.html">Complex</a></li>
                </ul>
            </li>
            <li><a href="wild.html">Wild</a></li>
        </ul>
    </div>
</body>
</html> 
```

还有我的 CSS：

```
/* Main CSS */

html{
    font-family: sans-serif;
}
body{
    background:#e8e8e8;
}
#nav{
    width:100%;
    background: #666;
    height:38px;
    padding:0;
}
#nav ul{
    display:inline-block;
    text-align:center;
    background-color::#666;
    width:100%;
    padding:0;
    margin:0 auto;
    list-style: none;
}
#nav li{
    width:100%;
    text-align: center;
    width:75px;
    float:left;
    position:relative;
    padding:10px;
    background:#666;
}
#nav li:hover{
    background: maroon;
}
#nav a{
    padding:10px;
    color:#fff;
    text-decoration:none;
}
#nav a:hover{
    background: maroon;
}
#nav ul ul{
    display:none;

}
#nav ul li:hover ul{
    width:75px;
    text-align: none;
    display:block;
    position:relative;
    left:-10px;
    top:10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:56:41.170

这在 Firefox 18 中对我有用...

```
#nav ul{
    /*display:inline-block; remove this */
    text-align:center;
    background-color::#666;
    width:400px; /* set this to a static width */
    padding:0;
    margin:0 auto;
    list-style: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:50:33.840

您的 CSS 意味着导航栏实际上是居中的，但是因为您将每个元素设置为整个页面宽度，所以您的导航列表项元素都向左浮动。您实际上希望居中导航占据总页面宽度的多少比例？首先计算出该数量并相应地调整`ul`元素。

# actionscript-3 - context3d.setRenderToTexture() 性能

> ID：14493057
> 
> 赞同：0
> 
> 时间：2013-01-24T02:42:29.200
> 
> 标签：actionscript-3, actionscript, stage3d

我目前正在 stage3d 中开发 2D 游戏。性能是惊人的——我得到了 60/60 FPS，有很多精灵在屏幕上移动。

我已经开始实现后处理过滤器：我会将所有内容渲染到纹理而不是屏幕上，对其应用着色器，然后将其渲染回屏幕上。

但是我遇到了重大的性能下降 - 仅使用 setRenderToTexture 和最简单的着色器就可以达到 40 FPS。

也许我以错误的方式渲染它，或者问题是我如何渲染最终纹理。

SWF 大小为 980x600，最终纹理为 1024x1024。

**这是我对这个后处理的快速而肮脏的实现：[https ://gist.github.com/4616886](https://gist.github.com/4616886)**

我使用 Axel 引擎（[http://axgl.org](http://axgl.org)），但代码应该对任何人都易于理解。

Gist 显示了我在 Ax.as 中更改的代码（[https://github.com/arkeus/Axel/blob/master/src/org/axgl/Ax.as](https://github.com/arkeus/Axel/blob/master/src/org/axgl/Ax.as)）

我使用了 AxCache.as 中的几个函数（[https://github.com/arkeus/Axel/blob/master/src/org/axgl/util/AxCache.as](https://github.com/arkeus/Axel/blob/master/src/org/axgl/util/AxCache.as)）

这是我使用的 SPRITE_INDEX_BUFFER - ( [https://github.com/arkeus/Axel/blob/master/src/org/axgl/AxSprite.as#L518](https://github.com/arkeus/Axel/blob/master/src/org/axgl/AxSprite.as#L518) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:45:43.813

createTexture（宽度：int，高度：int，格式：字符串，optimizeForRenderToTexture：布尔，streamingLevels：int = 0）

我不敢相信我错过了它......数小时的谷歌搜索和反复试验，我错过了一个构造函数参数。

FPS现在恢复正常了！

# c# - 在 C# 中使用 Aspose.words 按列导航

> ID：14493065
> 
> 赞同：2
> 
> 时间：2013-01-24T02:43:14.267
> 
> 标签：c#, aspose

我正在为我的一位客户评估 Aspose.words，几乎所有的功能我都从 MS Word 库迁移到了 Aspose.word 库。还有一个，但我正在努力寻找以下解决方案：

我们有 .docx 格式的模板文档。模板具有两列页面布局。在运行时系统会将其他文档中的内容复制粘贴到此模板文档中。仍然这个步骤工作正常。

当我打开模板页面时，它看起来不错，有 2 列布局。

但是我们有一些逻辑应该读取第一列的最后一行并检查文本是否为特定格式，如果是则向下移动一行，这将自动移动到下一列。

这个逻辑在 Word 中很容易实现，但我在 Aspose.words 中找不到任何参考来实现这一点。

我还尝试通过将文档转换为 Xml 来找到不同的选项。& 发现有一个节点叫 . 但是只有当我将文档另存为 Microsoft Word 中的 xml 时，此节点才可见。如果我将文档从 Aspose.words 保存为 xml，则不会发生。

请建议我解决这个问题。

提前致谢

古纳塞卡拉 S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:44:30.110

我们刚刚完成了将一项功能集成到 Aspose.Words 以打开对渲染引擎的访问，以便可以读取渲染文档的每个元素，因为它显示为页面、列、行、跨度等。这个功能正是您所需要的并将在下一个版本的 Aspose.Words 中提供，预计将在大约一周的时间内发布。很快我将分享代码片段来满足您的要求。

我的名字是 Nayyer，我是 Aspose 的开发布道者。

# ajax - 桥接 jQuery UI droppable 到 Lift ajax 处理程序

> ID：14493068
> 
> 赞同：1
> 
> 时间：2013-01-24T02:43:37.080
> 
> 标签：ajax, jquery-ui, scala, lift

我正在使用 Scala / Lift 开发一个 Web 应用程序项目。我想让我的应用程序支持拖放以改善用户体验。

但我不太确定如何将 jQuery 部分与 Lift 连接起来。

目前我有一个工作的 UI 部分，一个 div 块有一个名为`listRow`的类，它具有一个 HTML5 属性`data-stuffid`，该属性具有来自数据库的 ID。

它可以拖到一个名为 的块中，我可以在 JavaScript 中正确`nextAction`打印出该字段。`data-stuffid`

这是我的 JavaScript 代码块：

```
<script type="text/javascript">
  $('.listRow').draggable({
      revert: true
  });

$("#nextAction").droppable({
    accept: ".listRow",
    tolerance: "pointer",
    activeClass: "dropActive",
    hoverClass: "dropHover",
    drop: function(event, ui) {
        var stuffID = ui.draggable.data("stuffid")
        console.log(stuffID)
    }
}) 
```

但我不知道如何调用 Lift AJAX 处理程序，并在案例中将 stuffID 传递给 Lift。

我想做的是有一个 Scala 函数，如下所示：

```
def showDialog(stuffID: String): JsCmds
{
    // Do some server side work, ex: querying database

    // Return a javascript cmds likes SHtml.ajaxButton...etc.
    Alert("SutffID:" + stuffID)
} 
```

当用户将a拖到`.listRow`“#nextAction”时，`showDialog`将被调用，并将javascript返回给浏览器并让浏览器执行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:43:39.820

您可能正在寻找这两个功能之一。我会看看：

[`JsCmds.Function`](http://scala-tools.org/mvnsites/liftweb-2.3/net/liftweb/http/js/JsCmds%24%24Function%24.html)和[`SHtml.ajaxCall`](http://main.scala-tools.org/mvnsites/liftweb-2.0/framework/scaladocs/net/liftweb/http/SHtml%24object.html)

`JsCmds.Function`将允许您创建一个 JavaScript 函数，并`SHtml.ajaxCall`允许您通过 ajax 执行代码。您将在 Lift CSS Selector 中创建一个函数，然后您就可以直接从您的 jQuery 代码中调用该函数。

关于使用这两种方法的讨论很多，一些相关信息可能是：

*   [https://groups.google.com/forum/?fromgroups=#!topic/liftweb/4EyE1EbcDDM](https://groups.google.com/forum/?fromgroups=#!topic/liftweb/4EyE1EbcDDM)
*   [https://groups.google.com/forum/?fromgroups=#!topic/liftweb/aAmvSjPxcyI](https://groups.google.com/forum/?fromgroups=#!topic/liftweb/aAmvSjPxcyI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:54:06.770

从lift初始化jquery时，只需发送lift ajax回调作为参数

# sql-server - 用于 NServiceBus 的生产就绪 SQL Server 传输？

> ID：14493070
> 
> 赞同：0
> 
> 时间：2013-01-24T02:43:57.853
> 
> 标签：sql-server, nservicebus

NServiceBus 是否有生产就绪的 SQL Server 传输？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:30:48.743

在 NServiceBus 的下一个主要版本 (v4) 中，我们有一个开箱即用的 SqlServer 传输。

我们将很快开始 v4 的 beta 版本，但与此同时，如果您想了解一下，您可以从 nuget [https://nuget.org/packages/NServiceBus.SqlServer](https://nuget.org/packages/NServiceBus.SqlServer)获取预发布版本并提供去评估的目的。

# python - 自定义 Python 排序：双重优先级

> ID：14493073
> 
> 赞同：0
> 
> 时间：2013-01-24T02:44:36.200
> 
> 标签：python, sorting, built-in

我想为我的 Python 代码使用内置的 sort() 函数进行自定义排序，但可以根据两个值对列表进行排序。我要排序的列表结构为一个元组列表，每个元组包含 2 个整数。我要做的排序是根据每个元组的第一个整数对元组列表进行排序，但是如果两个第一个整数并列，它指的是它们的第二个整数，这是唯一的，因此不会相同。我想使用内置 sort() 函数的速度，但能够以这种方式排序。非常感谢任何和所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:46:45.883

内置`sorted`做到这一点。

```
>>> l = [(1, 1), (1, 2), (2, 5), (2, 4)]
>>> sorted(l)
[(1, 1), (1, 2), (2, 4), (2, 5)] 
```

`sort()`和之间的区别在于`sorted()`修改`sort()`给定*列表*（因此，任何其他共享其结构的列表），同时`sorted()`接受一个可迭代对象，并返回一个全新的列表对象。

例如：

```
>>> a = list("alphabet")
>>> a
['a', 'l', 'p', 'h', 'a', 'b', 'e', 't']
>>> b = a
>>> b
['a', 'l', 'p', 'h', 'a', 'b', 'e', 't']
>>> b.sort()
>>> #this has modified the shared structure
>>> a
['a', 'a', 'b', 'e', 'h', 'l', 'p', 't'] 
```

相对于`sorted()`

```
>>> c = list("alphabet")
>>> d = c
>>> sorted(d)
['a', 'a', 'b', 'e', 'h', 'l', 'p', 't']
>>> c
['a', 'l', 'p', 'h', 'a', 'b', 'e', 't'] 
```

`sorted()`更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:01:52.653

您刚刚描述了 list.sort() 方法的确切行为，因此一旦您将元组放入列表中，只需调用不带参数的列表的排序方法 (l.sort)，它将按所需顺序放置。

当需要更复杂的排序时，您可以将“键函数”作为命名参数 key 传递。该函数应用于列表的每个元素以生成一个排序键，然后元素按照它们的排序键的顺序进行排序。

当您需要列表的排序副本时， sorted 内置函数很方便 - 它只是为您省去了创建副本然后调用其排序方法的麻烦。

# ruby - Ruby：基于时间的加密密钥？

> ID：14493074
> 
> 赞同：1
> 
> 时间：2013-01-24T02:44:42.023
> 
> 标签：ruby, encryption

我有一个跟踪点击的 URL，我想阻止用户共享该 URL。

因此，我的想法是创建一个唯一的 URL，该 URL 具有一个字符串，该字符串是某种加密时间戳（带有盐），如果在该加密时间戳的 5 分钟内单击该链接，那么它将是有效的。

有一个更好的方法吗？如果不是，我将如何解密它，因为生成它的时间戳与单击它的时间戳在大多数情况下会有所不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:24:29.063

我认为已经给出的评论和答案过于复杂。这个问题似乎类似于密码重置链接。你可以：

1.  生成一个随机令牌并将其加盐哈希（或[PBKDF2(token, salt)](http://en.wikipedia.org/wiki/PBKDF2)以增加安全性）连同到期时间一起存储在数据库中。

2.  每当有人使用该 URL 时，对其进行哈希处理并根据您存储的副本对其进行验证，并确保时间没有过期。

任何“加密时间戳”方案仍然存在如何安全处理该 AES 密钥的问题。要么你有一个需要存储的随机密钥，要么它是可派生的，在这种情况下它是不安全的。

您的威胁模型可能应该假设应用程序或数据库的妥协将导致另一个妥协。在这种情况下，只需存储令牌而不增加复杂性。

如果您仍想在 URL 中嵌入时间戳，您可以查看[Azure 共享访问签名](http://msdn.microsoft.com/en-us/library/windowsazure/ee395415.aspx)的工作方式，其中包括 URL 中的 SHA256-HMAC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:04:47.100

提供页面时，生成转换为时区 UTC 的时间戳。对称加密（例如使用 AES-256）并将其放在 URL 中。

当用户要求访问具有此类加密时间戳的 URL 时，请使用相同的密钥对其进行解密（编辑：使密钥成为相关内容的*加盐*哈希，以便每个不同的内容都有不同但始终相同，钥匙）。如果时间戳与转换为时区 UTC 的服务器时间戳相比不到 5 分钟，则拒绝它，否则接受它。

用户无法通过输入不同的加密时间戳来欺骗您，因为他们不知道也无法找到您的密钥（即使知道它会是什么时间戳并且加密算法也没有提供足够的信息来找出您的密钥） key) 并且所有的时间戳选择和比较都是在服务器端完成的。

编辑：通过编辑，他们也不能获取对一个内容有效的时间戳并将其附加到对另一个内容有效的时间戳。

# javascript - itemtap 事件未在所有点击时触发

> ID：14493076
> 
> 赞同：3
> 
> 时间：2013-01-24T02:45:14.437
> 
> 标签：javascript, event-handling, sencha-touch, sencha-touch-2, sencha-touch-2.1

我正在使用 Sencha Touch 2.1。我有**Ext.carousel.Carousel**容器和一堆**Ext.dataview.Dataview**作为轮播内的页面。

![在此处输入图像描述](../Images/4a17485189c8ecb32f058d0d0d0f686e.png)

在每个数据视图上，我都有很多按钮（使用 CSS 渲染 - 所以它们不是按钮控件，而是具有精美样式的简单 div）。`itemtap`当用户点击“按钮”时，我试图捕捉事件。

在桌面上的浏览器中一切正常。`itemtap`然而，在 iPad 上，触摸灵敏度是不同的，当用户不小心轻按按钮时，我通常不会收到事件。当检测到滑动事件并且轮播需要更改页面时，轮播将开始轻微移动。

我试图更换`itemtap`和使用`itemtouchstart`。按钮响应能力明显提高，但当用户在页面之间合法滑动时，我经常会看到误报。

我被困住了。我想要响应式按钮，并且还想要滑动以更改页面。

有人见过类似的东西吗？或者以某种方式解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:05:05.720

这是一个已知问题，请查看 sencha 论坛中的此论坛[帖子](http://www.sencha.com/forum/showthread.php?246254-Button-sensitivity-issue-on-iPad-iOS-6)。可悲的是，我遇到了同样的问题，目前仅使用 sencha 无法解决，也许 phonegap 中提供了解决方案，但我不知道。

# php - php拉取网页数据

> ID：14493077
> 
> 赞同：0
> 
> 时间：2013-01-24T02:45:17.343
> 
> 标签：php, html

```
<?php
 $pullurl = 'http://akroncanton.craigslist.org/jjj/';
 $contents = file_get_contents($pullurl);
 $result = preg_split('/<\/p>/',$contents);
 print_r($result); 
  ?> 
```

因此，在昨天与一些人交谈后，我能够将其放在一起，基本上这个剂量是从 craigslist 网站中提取一些数据。

然后将人们发布的每个帖子分成 $results 1 - 不管

我希望完成的下一步是使它能够识别 A 标题。换句话说，我正在按照 while 循环的思路思考一些事情，或者做一些事情，直到你跑完所有的结果

另一个词我希望做到这一点

```
Do
if ($Results[2] *contains* 'Morage') {
echo '***HERE***';
}
until $Results[1-whatever ran] 
```

我不确定如何正确写这个，因为我已经说过我对这个 php 东西很陌生，所有的帮助真的很感激，我试过搜索我刚刚迷路的东西，真的可以使用一些帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:51:51.520

如果你想抓取网页，你应该尝试[QueryPath](http://querypath.org/)或[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)。它们就像 jQuery 的 $ 函数。它们将使您易于使用，而不是尝试自己查找和拆分 HTML 标签。

# php - Zend Framework 2 中的数据库日志记录：错误的“额外”列名

> ID：14493080
> 
> 赞同：3
> 
> 时间：2013-01-24T02:45:44.530
> 
> 标签：php, logging, zend-framework2

我想将日志条目从 Zend Framework 2 保存到我的 MySQL 数据库中。我正在使用`Zend\Log\Logger`编写器`Zend\Log\Writer\Db`。通过为编写者提供一个数组，可以选择将哪些数据保存到哪些列（例如，将时间戳记到“log_date”列中）以及保存哪些数据。这是我正在做的事情：

```
$logger = new Zend\Log\Logger();

$mapping = array(
    'timestamp' => 'timestamp_column',
    'priority'  => 'priority_column',
    'message'   => 'message_column',
    'extra' => 'extra_column'
);

$logger->addWriter(new Zend\Log\Writer\Db($dbAdapter, 'table_name', $mapping));
$logger->err('some message', array('some extra information')); 
```

我面临的问题是列名数组及其值包含“额外”列的错误列名。基于上面的数组，它应该将值“一些额外的信息”插入到“extra_column”列中。问题是`Zend\Log\Writer\Db`该类使用字母“e”作为额外列的名称。这来自我上面数组中“extra_column”的第一个字母。出于某种原因，它采用“extra_column”的第一个字母并将其用作列名而不是整个值。

我看了一下源代码。该`mapEventIntoColumn`方法用于将列名和值作为数组获取。我复制了下面方法的相关部分。

```
// Example:
// $event = array('extra' => array(0 => 'some extra information'));
// $columnMap = array('extra' => 'extra_column');
// Return: array('e' => 'some extra information')
// Expected (without looking at the code below): array('extra_column' => 'some extra information')
protected function mapEventIntoColumn(array $event, array $columnMap = null) {
    $data = array();
    foreach ($event as $name => $value) {
        if (is_array($value)) {
            foreach ($value as $key => $subvalue) {
                if (isset($columnMap[$name][$key])) {
                    $data[$columnMap[$name][$key]] = $subvalue;
                }
            }
        }
    }
    return $data;
} 
```

该`$event`参数是一个数组，其中包含与我的第一个代码片段中的数组相同的键`$mapping`以及日志消息的值。`$columnMap`参数是我的第一个代码片段中的数组`$mapping`（数组值是列名）。

实际上似乎发生的是，因为我将额外信息作为数组传递（这是必需的），所以执行了内部 foreach 循环。在这里，`$key`是 0 （索引）所以它实际上是这样做的：`$columnMap['extra'][0]`. 这给出了字母“e”（“extra_column”中的第一个字母），用作列名，它应该是整个列名。

在调用 log 方法时，我尝试在额外的数组中提供我自己的密钥，但同样的情况发生了。官方文档没有显示额外参数的使用示例。我想将可以帮助我调试错误的信息插入到我的表中，所以我想使用它。

这是一个错误还是我错过了什么？这对我来说真的很奇怪！我希望我解释得足够好——这很棘手！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:59:36.367

由于 Daniel M 尚未发布他的评论作为答案，我将向您推荐他解决问题的评论。

# exception-handling - PyQt 事件处理程序捕获异常

> ID：14493081
> 
> 赞同：7
> 
> 时间：2013-01-24T02:45:51.333
> 
> 标签：exception-handling, pyqt, pyqt4

这是说明问题的代码：

```
from PyQt4 import QtGui
app = QtGui.QApplication([])
dialog = QtGui.QDialog()
button = QtGui.QPushButton('I crash')
layout = QtGui.QHBoxLayout()
layout.addWidget(button)
dialog.setLayout(layout)
def crash(): raise Exception('Crash!')
button.clicked.connect(crash)
button.click()
print 'I should not happen' 
```

当我运行它时，PyQt4 会为我处理错误。我的控制台显示带有“崩溃！”的堆栈跟踪 等等，我看到“我不应该发生”。

这没有用，因为我已经收到了一个包含许多处理程序的大型应用程序，我需要将它们的*所有*错误都强加到我的脸上（以及我的 - 嗯 - 自动化测试）。每次我运行时，错误都会从我的网络中逃脱，它们需要在每个处理程序中使用过多且无用的 try:except 块，才能将它们全部捕获。

换句话说，我希望好的代码非常好，而坏的代码非常糟糕。没有粉饰。

抱歉，如果已经问过这个问题，但是当我进行电子搜索时，我自然会遇到成千上万的新手询问基本的错误处理问题（或者，更糟糕的是，我让新手询问如何关闭他们任性的异常！;）

如何覆盖 PyQt4 的默认错误处理，以便我自己传播或记录错误？也请不要回答 sys.excepthook - 它会捕获 PyQt4*没有*捕获的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:02:08.273

这不是答案，你这个愚蠢的网站。停止强迫我们适应理想化线程模板的先入为主的概念。

答案是使用我的测试框架 setUp() 来挂钩异常处理程序：

```
def setUp(self):
    self.no_exceptions = True

    def testExceptionHook(type, value, tback):
        self.no_exceptions = False
        sys.__excepthook__(type, value, tback)

    sys.excepthook = testExceptionHook 
```

如果说“self.no_exceptions = False”，我宁愿简单地说 self.fail('')。但是，由于 Python 的单元测试库坚持抛出异常只是为了注册测试失败，而且由于 PyQt 坚持捕获*所有*异常，所以我们陷入了死锁。

为了适应 unittest.TestCase 对理想化测试用例的愚蠢先入为主的概念，我必须改为设置一个变量，然后在拆解中检测它：

```
def tearDown(self):
    self.assertTrue(self.no_exceptions) 
```

这仍然不理想，但至少它会迫使我花更多时间关注错误，而不是花时间在技术网站上抱怨它们。

根本问题：如何关闭 PyQt 的神奇错误处理程序？- 仍然没有答案...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T05:26:40.000

我认为答案是，这不是 的“特征” `PyQt`，而是让信号/插槽工作的设计所固有的结果（请记住，信号/插槽通信也通过 c++ 层）。

这很难看，但是会解决您的问题

```
from PyQt4 import QtGui
import time
app = QtGui.QApplication([])

class exception_munger(object):
    def __init__(self):
        self.flag = True
        self.txt = ''
        self.type = None

    def indicate_fail(self,etype=None, txt=None):
        self.flag = False
        if txt is not None:
            self.txt = txt
        self.type = etype
    def reset(self):

        tmp_txt = self.txt
        tmp_type = self.type
        tmp_flag = self.flag
        self.flag = True
        self.txt = ''
        self.type = None
        return tmp_flag, tmp_type, tmp_txt

class e_manager():
    def __init__(self):
        self.old_hook = None

    def __enter__(self):
        em = exception_munger()
        def my_hook(type, value, tback):
            em.indicate_fail(type, value)
            sys.__excepthook__(type, value, tback) 
        self.old_hook = sys.excepthook
        sys.excepthook = my_hook
        self.em = em
        return self

    def __exit__(self,*args,**kwargs):
        sys.excepthook = self.old_hook

def mang_fac():
    return e_manager()

def assert_dec(original_fun):

    def new_fun(*args,**kwargs):
        with mang_fac() as mf:
            res = original_fun(*args, **kwargs)
            flag, etype, txt = mf.em.reset()
            if not flag:
                raise etype(txt)
            return res
    return new_fun

@assert_dec
def my_test_fun():
    dialog = QtGui.QDialog()
    button = QtGui.QPushButton('I crash')
    layout = QtGui.QHBoxLayout()
    layout.addWidget(button)
    dialog.setLayout(layout)
    def crash(): 
        time.sleep(1)
        raise Exception('Crash!')
    button.clicked.connect(crash)

    button.click()

my_test_fun()
print 'should not happen' 
```

这不会打印“不应该发生”，并为您提供一些可以通过自动化测试捕获的东西（使用正确的异常类型）。

```
In [11]: Traceback (most recent call last):
  File "/tmp/ipython2-3426rwB.py", line 68, in crash
Exception: Crash!
---------------------------------------------------------------------------
Exception                                 Traceback (most recent call last)
<ipython-input-11-6ef4090ab3de> in <module>()
----> 1 execfile(r'/tmp/ipython2-3426rwB.py') # PYTHON-MODE

/tmp/ipython2-3426rwB.py in <module>()

/tmp/ipython2-3426rwB.py in new_fun(*args, **kwargs)

Exception: Crash!

In [12]: 
```

堆栈跟踪被顶起，但您仍然可以读取打印出来的第一个。

# c - C：HTTP头解析

> ID：14493090
> 
> 赞同：0
> 
> 时间：2013-01-24T02:47:10.133
> 
> 标签：c, http

我需要解析标头以从 http 请求中提取绝对 URL。我只关心的方法只有 GET、POST 和 HEAD。我想确认以下简单的逻辑/伪代码足以涵盖大多数情况，

```
1  url = extract the url from the first request line;
2  if (url[0] == '/') {
3    //relative url, keep reading until HOST or end of the header
4    while (nextline != "\r\n\r\n") {
5      if (nextline starts with HOST) {
6         host = extract the host value;
7         return (host+url);
8      } else {
9         continue;
10     }
11     
12   }
13    return bad_req;
14 } else {
15   //absolute url, return directly, ignore HOST
16    return url;
17 } 
```

1）有没有遗漏的案例？

2) 第 2 行是否足以判断它是相对 URL 还是绝对 URL？

3）编码重要吗？

4）其他可能的故障？

顺便说一句，性能是我需要考虑的一个非常重要的因素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:06:30.417

nextline != "\r\n\r\n" <---- 这在 C 中不起作用

尝试 while ( strcmp (nextline, "\r\n\r\n") == 0 )

> if（下一行以 HOST 开头）

if (strncmp(nextline, "http://www.frogs.com", strlen(nextline)) == 0)

== 0 表示匹配。如果不匹配，则结果小于或大于 0。以上行取决于下一行的字符串长度 >= "http://www.frogs.com" 的字符串长度。

“顺便说一句，性能是我需要考虑的一个非常重要的因素。”

C具有裸机性能=“光速”。编写低性能的 C 代码需要大量的技能，同时还要具备足够高的能力水平来编写可以在没有警告的情况下编译并且不会崩溃的 C 代码。

# php - 将多个选择列表选项设置为从查询中选择

> ID：14493097
> 
> 赞同：0
> 
> 时间：2013-01-24T02:48:11.410
> 
> 标签：php

我有一个名为“专业”的字段，其中包含一串用逗号分隔的整数。该字段是使用以下变量从插入查询的多选列表中填充的：

```
$majors_string = implode(",", $majors); 
```

现在在编辑页面上，我想让这些值在同一个列表中设置选项。部分问题是列表是使用动态生成的：

```
<select name="majors[]" size="9" multiple="multiple" id="majors">
          <?php 
$query = mysql_query("SELECT * from major ORDER BY title ASC");
for($i=0;$i<mysql_num_rows($query);$i++) {
$row=mysql_fetch_assoc($query);
?>
          <option value="<?php echo $row['major_pk']; ?>"><?php echo $row['title']; ?></option>
          <?php 
}
?>
        </select> 
```

在编辑页面的初始查询中，我有：

```
$query_topic = "SELECT * FROM topic WHERE topic_pk = '$topic_pk'";
$result_topic = mysql_query($query_topic, $connection) or die(mysql_error());
$row_topic = mysql_fetch_assoc($result_topic);

$retrieved_majors = explode(",", $row_topic['majors']); 
```

但我不确定是否将多个列表中的选项设置为数组 $retrieved_majors 中的值。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:59:25.120

我想你是在问如何设置默认选择的选项，对吧？

```
<option value="<?php echo $row['major_pk']; ?>" <?php if(array_search($row['major_pk'], $retrieved_majors) !== false) {echo 'selected';} ?> ><?php echo $row['title']; ?></option> 
```

# php - 使用数据库中的数据填充列表框

> ID：14493100
> 
> 赞同：0
> 
> 时间：2013-01-24T02:48:16.307
> 
> 标签：php, html, sql-server

```
<?php
ini_set("display_errors","on");
$conn = new COM("ADODB.Connection");
   try {
   $myServer = "WTCPHFILESRV\WTCPHINV";
   $myUser = "sa";
   $myPass = "P@ssw0rd";
   $myDB = "wtcphitinventory";   
   $connStr = "...conn string...";
   $conn->open($connStr); 
         if (! $conn) {
            throw new Exception("Could not connect!");
        }
   }
   catch (Exception $e) {
      echo "Error (File:): ".$e->getMessage()."<br>";
   }   
if (!$conn)
  {exit("Connection Failed: " . $conn);}
    $sql_exp = "select * from dbo.PC"; 
  $rs = $conn->Execute($sql_exp);
 echo "<table><tr><th>Desktop Number</th></th></tr>";
   while (!$rs->EOF) {
       set_time_limit(0);    
       echo "<td>CP # <br>".$rs->Fields("PC_Number")."</td>";           
      $rs->MoveNext();
   }   
   echo "</table>";   
   $rs->Close();   
       ?> 
```

我想要一个列表框，而不仅仅是打印数据库中 PC_Number 的所有数据。我所能做的就是回应它，我很难插入一个选择。我想要一个表单方法和一个 select(listbox)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:12:55.630

在while 语句中创建列表框。

```
echo "<table border='1' cellpadding='1' cellspacing='0' id='rounded-corner'><tr><th>Desktop Number</th></th></tr>";

   echo "<tr><td><select name='selectionField'>";
   while (!$rs->EOF) {
       set_time_limit(0);
       echo "<option value=".$rs->Fields('PC_Number')." >".$rs->Fields('PC_Number')."</option>";
      $rs->MoveNext();
   }   
   echo "</td></tr></table>"; 
```

# twitter-bootstrap - Apphabor 在 bootstrap.less 上给出 404

> ID：14493102
> 
> 赞同：1
> 
> 时间：2013-01-24T02:48:21.910
> 
> 标签：twitter-bootstrap, http-status-code-404, less, appharbor

我在 appharbor 上部署了一个简单的 .NET MVC 应用程序，它实现了引导程序和更少。当我运行它时，我的 localhost 实例上的负载较少，但是，当我将它推送到 appharbor 时，我在 bootstrap.less 上得到一个 404。

有没有人在此之前遇到过这个可能会告诉我为什么？

我检查了构建，部署中存在较少的目录/文件结构。

appharbor 网址是[http://appharbor-bootstrap.apphb.com/](http://appharbor-bootstrap.apphb.com/)如果有人想查看我看到的内容。

源码可以在 github [https://github.com/jamesamuir/appharbor-bootstrap上找到](https://github.com/jamesamuir/appharbor-bootstrap)

这就是它应该看起来的样子![本地主机](../Images/c8d904f3a2451d68610bbddd73f2e16c.png)

这是appharbor上的样子![港口](../Images/400ac18db55214f5e9f917c7b6121f9c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T04:06:54.067

您可能必须在 web.config 中配置 mime 类型映射。[此处](http://support.appharbor.com/discussions/problems/717-less-file-is-not-being-served)和[此处](https://stackoverflow.com/questions/6025145/dotless-file-yields-404-error-in-iis)有详细信息的链接。

```
<system.webServer>
    <staticContent>
        <mimeMap fileExtension=".less" mimeType="text/css" />
    </staticContent>
</system.webServer> 
```

# excel - 是否可以在电子表格中搜索列表中的条件

> ID：14493103
> 
> 赞同：0
> 
> 时间：2013-01-24T02:48:29.380
> 
> 标签：excel

我想知道是否可以在电子表格中搜索列表中的条件？

**例子：**

Formulas!B6 包含 Red，在 Laptops!D2 中搜索 Red，将字符串 Red 返回给 Formulas!E1

Formulas!B7 包含 Orange，在 Laptops!D2 中搜索 Orange，将字符串 Orange 返回给 Formulas!E1

**我试过的**

=查找（2 ^ 15，搜索（B $ 6：B $ 21，笔记本电脑！D2），E1）

查找功能是否朝着正确的方向前进？

**笔记本电脑表**

![在此处输入图像描述](../Images/61535dff6cbea1649fd581b6ba7c1dde.png)

**公式表**

![在此处输入图像描述](../Images/9e99186738d54e4b683a1180c41ed5b8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:18:08.083

好的，有一个工作公式。=IFERROR(INDEX($A$2:$A$8,MAX(IF(ISERROR(FIND($A$2:$A$8,笔记本电脑!A2)),-1,1)*(ROW($‌​A2:$ A8)-ROW(A2)+1))),"Color Not Present") 图片中的单元格引用可以轻松应用于此

# resources - WPF C#无法找到子文件夹图像资源

> ID：14493106
> 
> 赞同：1
> 
> 时间：2013-01-24T02:48:54.420
> 
> 标签：resources, bitmap, uri, .net-assembly, subdirectory

我在一个程序集中有几个图像，我都在它们的属性设置中标记为资源。

为了测试，我将图像放在项目的根目录中。

```
Img.Source = new BitmapImage(new Uri("pack://application:,,,/MyAssembly;component/image.png", UriKind.Absolute)); 
```

它可以很好地找到并加载图像。

如果我将图像放在子文件夹中，无论是哪个文件夹或哪个级别，它都会返回它无法找到资源。

文件夹结构为 Resources/Base/Weather/image.png

```
Img.Source = new BitmapImage(new Uri("pack://application:,,,/MyAssembly;component/Resources/Base/Weather/image.png", UriKind.Absolute)); 
```

当我运行应用程序并尝试加载该图像时，我收到此错误

找不到资源“resources/base/weather/image.png”。

注意文件夹名称上的小写字母。我不知道接下来要尝试什么。我尝试了很多变体，包括使用 @ 但这无济于事。我真的不想用图像加载根目录。

有人想吗？？？

# .net - 使用服务总线架构在不同系统之间关联/映射实体有哪些方法？

> ID：14493110
> 
> 赞同：2
> 
> 时间：2013-01-24T02:49:10.663
> 
> 标签：.net, architecture, masstransit, eai

我正在研究在我们的企业中使用服务总线架构来协调我们环境中系统之间的数据和业务流程。

我们的情况很典型：面向客户的 Web 应用程序将消息传递给内部系统以进行计费、库存等。我们有几个业务实体在大多数或所有这些系统中都是通用的；这些系统中的每一个都在自己的数据库中维护自己的这些实体版本。

应用于服务总线概念，我们可以从我们的客户门户网站向总线发布代表订单的消息。每个感兴趣的系统（计费、库存等）都可以使用此消息在自己的数据库中创建相应的客户记录。但是，当这些内部系统中的一个需要发布有关订单状态的消息时，它会从自己的数据库中携带订单 ID。如果我们的门户网站需要使用该消息，它将不知道如何将从我们的内部系统发送给它的订单 ID 与保存到门户网站数据库的订单 ID 相关联。

由于没有其他系统固有地知道等效实体如何跨系统关联，因此似乎需要某种类型的映射机制来允许系统将消息中包含的 ID 转换为与其相关的 ID。例如，可以创建一个将 ID 从一个系统映射到另一个系统的数据库表。可以查询该表以检索目标系统的适当 ID。我们的业务目前不使用实体聚合或其他一些“360 度视图”类型的存储库作为通用实体信息的单一权威来源，通用 ID 可以从这些信息中在所有系统之间传递和使用。

使用这种实体映射方法来伴随服务总线实现是一种有效的方法吗？如果是这样，是否有任何既定的指导方针来指导设计？如果没有，我有兴趣了解跨系统链接实体以促进通过服务总线进行集成的替代方法。

PS：如果有帮助，我目前正在评估用于构建我们的公共汽车的 MassTransit 框架，所以如果有特定的信息可以提供，那也非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:33:00.617

如果没有更多细节，我会考虑一种看起来类似于这样的方法......

1.  网站发布`SubmitNewOrder`消息
2.  MiddleManager 服务将接收该`SubmitNewOrder`消息并将其转换为每个系统的任务；通过该转换，您可以进行 ID 翻译
3.  每个系统都有一个端点，可以使用正确的消息/命令并采取相应的行动

所以这里的一些事情是发送命令而不是发送你的实体。现在您可以发送实体的子集（这是从实体中提取接口并编写消息类型的好时机）。从高层次来看，这似乎是解决这个问题的一种完全有效的方法。

如果您想更深入地研究这一点，[Enterprise Service Bus: Theory in Practice](https://rads.stackoverflow.com/amzn/click/com/0596006756)是一本很棒的入门书籍。它与 MassTransit 没有任何关系，但许多理论都适用并奠定了良好的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:38:09.010

我在现在的公司做过很多类似的工作。我来自 C# 背景，对服务总线的概念很陌生。我一直在从事的项目主要使用 Java，所以我们最终选择了 Mule ESB 作为我们的解决方案。我强烈推荐它，但我意识到它可能无法与 .NET 代码一样开箱即用。

**问题：您如何跨系统管理实体？**

我们目前有两种类型的实体。那些存在于一个权威系统中并被复制到其他系统的实体，以及跨系统共享的实体。

当一个实体来自一个系统时，我发现最好跨系统创建该实体的副本。服务总线将提取数据，对其进行转换，然后将其加载到适当的系统中。源和目标具有固定的实体数据格式，由服务总线进行转换。这对我们来说非常有效。

对于共享实体，它有点棘手。我们允许部分更改（一个系统修改 5 个属性/字段，另一个系统管理另外 3 个属性/字段），到目前为止效果还不错。由于数据不一致的风险，我们已尝试最小化共享实体。（例如，“为什么这个实体看起来很奇怪？哦，是的，一些系统修改了状态字段，我忘记了它可以做到这一点。”）

**使用队列**

我们使用 ActiveMQ 和主题的概念在系统之间发送数据。主题类似于队列，但许多订阅者可以收听一个主题。例如，我们有一个生成文章实体的内部 CMS。当用户发布一篇文章时，它会转到 ActiveMQ 主题。

然后服务总线可以有许多正在观看该主题的听众。每个听众都得到他自己的实体副本。然后每个侦听器也可以进行自己的转换，然后将副本发送到相应的系统。

事实证明，它非常容易理解/编码/测试/维护。

**拥有地图数据库**

令我感到羞耻的是，我最近通过将值硬编码到脚本中来做到这一点。实际上我写了一个工具来为我生成代码，但它仍然在一个脚本文件中。原因是我们做了很多批处理，我们将大量消息发送到服务总线上。我不想在每次必须通过消息时都为进行数据库查找付出代价。

所以我的工具会生成一个脚本来管理实体的映射/协调，而且速度非常快。如果进行了更改，我只需重新运行该工具并准备好一个新脚本即可。我的映射信息变化非常非常缓慢，所以没关系。

但是，如果您可以创建具有实体映射的数据存储（XML、数据库、平面文件等），我认为这很好。

**一般建议**

做大量服务总线工作的一些技巧：

1.  服务巴士不是灵丹妙药。根据我的经验，当您拥有多种技术时，它的效果最好。例如，我们有 MySQL、SQL Server、ActiveMQ、Mongo、CouchDb、Elastic Search 等。

2.  我不知道公共交通是如何运作的，但骡子有流动的概念。流是从 A 点到 B 点的一种概念数据流。您可以有许多流。我尽我所能使这些*非常*简单。它使测试变得相当容易。由于它是集成工作，因此调试起来并不容易，因此我更愿意消除任何复杂性。

3.  尝试让实体在源头尽可能靠近目的地。换句话说，如果我从 .NET Web 服务获取数据并将其写入 SQL，我希望对象在 90% 的情况下进入服务总线以实现完全转换。这再次使服务总线逻辑保持简单。

# javascript - 使用上下文调用 bind()

> ID：14493115
> 
> 赞同：0
> 
> 时间：2013-01-24T02:49:39.887
> 
> 标签：javascript, jquery, bind

我正在一个网站上工作，其中各种对象绑定到 $(window) 上的常见事件。但是，我想在接收触发器的对象的上下文中运行这些函数。（换句话说，保留“this”，这样它在调用函数时仍然引用对象而不是窗口。）我该怎么做？例如，在对象内部：

```
var someNum = 1;

$(window).bind("test", printNum);

function printNum() {
    alert(this.someNum); // should return 1
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T02:51:52.600

查看[`$.proxy`](http://api.jquery.com/jquery.proxy/)，您可以使用它来创建始终具有特定上下文的函数：

```
$(window).bind("test", $.proxy(printNum, this)); 
```

此外，[`on`](http://api.jquery.com/on)它比`bind`jQuery 1.7 更受欢迎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:53:47.697

我一直不清楚 JavaScript 中的对象上下文，但我已经成功地使用了这种方法。笑或欣赏它：

```
this.someNum = 1;

$(window).bind("test", printNum);

var parent = this;
function printNum() {
    alert(parent.someNum); // should return 1
} 
```

# angularjs - 如何使 orderby 过滤器对字符串数组起作用？

> ID：14493116
> 
> 赞同：87
> 
> 时间：2013-01-24T02:49:40.487
> 
> 标签：angularjs

这是不起作用的代码：演示：http: [//jsfiddle.net/8dt94/63/](http://jsfiddle.net/8dt94/63/)

```
<div ng-controller="MyCtrl">    
    <input type="text" ng-model="searchText" />
  <ul ng-repeat="strVal in arrVal|orderBy|filter:searchText" >
      <li>{{strVal}}</li>
  </ul>
</div>

var app=angular.module('myApp', []);
app.controller('MyCtrl', function ($scope,$filter) {
  $scope.arrVal = ['one','two','three','four','five','six'];  
}); 
```

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2013-04-07T04:04:30.317

您可以通过方法订购，因此您可以使用 toString 方法

```
<ul ng-repeat="strVal in arrVal | orderBy:'toString()' | filter:searchText"> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-24T04:02:50.227

编写[自定义过滤器](http://docs.angularjs.org/guide/dev_guide.templates.filters.creating_filters)：

```
app.filter('mySort', function() {
    return function(input) {
      return input.sort();
    }
  }); 
```

HTML：

```
<ul ng-repeat="strVal in arrVal|filter:searchText|mySort"> 
```

[小提琴](http://jsfiddle.net/mrajcok/5PJrr/)。

# php - 如何将表单中的字段设置为根据主键 ID 自动递增？

> ID：14493119
> 
> 赞同：0
> 
> 时间：2013-01-24T02:50:23.617
> 
> 标签：php, crud, atk4

我是 Agiletoolkit 的新手，仍在学习中。这是我的问题：

我有一个用于管理工作的常规 CRUD。

```
$this->add('CRUD')->setModel('Job'); 
```

模型包含字段“job_number”，应在“添加”页面上自动填写：N762、N763 等。

这是可以在模型或从 CRUD 表调用的 addjob 页面中完成的事情吗？

谁能给我一些非常简单的代码示例？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:01:56.020

我相信这应该在模型级别完成。它基本上与视图级别无关。

如果这个 job_number 字段与 ID 严格相关，那么您甚至可以将其作为模型中的表达式字段，甚至不将其存储在数据库中。例如，job_number = id + 100。

但是如果你真的想将它存储在数据库中，那么你应该这样做：

1) 在模型中将 job_number 创建为具有类型（'number'）的普通字段，但使用 ->system(true) 或 ->editable(false)，具体取决于您希望在何处查看此字段（表单、网格）；

2) 在模型初始化方法中添加钩子 afterInsert。

```
function init(){
    parent::init();

    // ... your field definitions here

    // add afterInsert hook
    $this->addHook('afterInsert',array($this,'afterInsert'));
} 
```

3）在模型创建方法中

```
function afterInsert($m,$new_id){ // <-- new_id is ID of newly inserted record
    $m->load($new_id);
    $m['job_number'] = $new_id + 100; // <-- your function here
    $m->save();
}

or maybe you can even write it simpler - not sure

function afterInsert($m,$new_id){ // <-- new_id is ID of newly inserted record
    $this->set('job_number',$new_id + 100); // <-- your function here
    $this->save();
} 
```

这应该有效，但我没有对此进行测试。只是在飞行中写在这里。

试试这个，如果您需要更多帮助，请告诉我们。此外，非常欢迎您加入 ATK4 IRC 频道并直接提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:34:55.830

这样的事情应该解决你的问题：

在模型初始化中：

```
$this->addField("job_no")
    ->defaultValue("N" . $this->dsql()->del("fields")->field(
          $this->dsql()->expr("max(id) + 1"), "nr"
    )->getOne()); 
```

不过没有测试。

# asp.net - 新的 ASP.NET 项目

> ID：14493123
> 
> 赞同：1
> 
> 时间：2013-01-24T02:50:51.087
> 
> 标签：asp.net

在 ASP.NET 中创建新的 Web 项目时，您最好使用“ASP.NET 空 Web 应用程序”还是“ASP.NET Web 表单应用程序”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:06:02.130

我建议*不要*使用 ASP.Net Web 表单。这是一个有趣的想法，但在实际应用中被证明是笨拙的。无论您使用的是 PHP、Ruby 还是 ASP.Net，整个 Web 开发行业都在朝着某种 MVC 框架或其他框架发展，所以最好不要使用它。

当然，仍然有很多 ASP.Net Web Forms 应用程序，而且它们可能会在未来一段时间内存在，因此学习该技术有一些好处，但我会避免在任何新项目中使用它。

根据您的问题，您是否应该使用空项目并没有真正的区别。如果您刚开始填充的项目可以让您对结构的工作原理有一个基本的了解，但如果您对从头开始构建它足够舒适，那么请使用空项目。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T02:57:25.007

这取决于你想做什么。

一般来说，ASP.NET 应用项目有以下三种：

*   Web 窗体 - ASP.NET 最初是在 2001 年出现的。在现代和新开发的应用程序中不鼓励使用它，因为它构建了关于 Web 应用程序应该如何工作的过时想法。
*   MVC - 新的热点。尝试使用这个。StackOverflow 就是使用它构建的。
*   其他所有内容 - 太多无法列出，但这通常需要您创建一个空项目并使用`IHttpHandler`.

如果您是 ASP.NET 新手，我强烈建议您避免列出您列出的两种项目类型，因为它们都适用于 Web 窗体；考虑改用“ASP.NET MVC 应用程序”选项 - 如果您使用的是 VS2008，那么您需要下载并安装 ASP.NET MVC 2 附加组件。VS2010 及更高版本预装了 MVC 模板。

如果您想从头开始工作，您可能想使用 Empty Web Application 项目模板`IHttpHandler`，但您对此听起来很陌生，因此我建议您避免使用它。

# c++ - 消息循环如何使用线程？

> ID：14493125
> 
> 赞同：4
> 
> 时间：2013-01-24T02:51:19.933
> 
> 标签：c++, multithreading, winapi, messages

我有点困惑，想知道我是否被误导了，在另一篇文章中我被告知“只有当你明确地创建新线程时才会创建新线程。C++ 程序默认是单线程的。” 当我打开没有在 ollydbg 中显式创建新线程的程序时，我多次注意到通常有 2 个线程在运行。我想在不停止执行的情况下了解消息循环是如何工作的，我得到的解释不足以解释它是如何工作的。

消息循环是创建一个新线程还是占用了主线程？如果它占用主线程，它是否会在其他所有内容都执行后才这样做，而不管代码顺序如何？如果它不这样做但仍然占用主线程，它是否会产生一个新线程以便程序可以执行而不是卡在消息循环中？

编辑：通过实验解决了我的大部分问题。消息循环占用主线程和代码后面的任何代码：

```
while (GetMessage (&messages, NULL, 0, 0))
{
    TranslateMessage(&messages);
    DispatchMessage(&messages);
}
return messages.wParam; 
```

不会执行，除非由于程序卡在消息循环中而执行特殊操作以使其执行。在执行的窗口过程中放置​​无限循环会导致程序崩溃。我仍然不明白多线程的奥秘，但在我更喜欢的程度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T04:17:20.087

也许开始的地方是意识到“消息循环”并不是这样的*东西*。这实际上只是线程所做的事情。

窗口中的线程通常分为两类之一：拥有 UI 的线程和执行后台工作（例如网络操作）的线程。

一个简单的 UI 应用程序通常只有一个线程，即 UI 线程。为了使 UI 工作，线程需要等到有一些输入要处理（鼠标单击、键盘输入等）、处理输入（例如，更新状态和重绘窗口），然后返回等待更多输入。“等待输入，处理它，重复”的整个行为*就是*消息循环。（在这个阶段还值得一提的是消息队列：每个线程都有自己的输入队列，用于存储线程的输入消息；线程“等待输入”的行为实际上是检查队列中是否有任何内容, 如果没有, 等到有。) 在 win32 中, 如果一个线程正在以这种方式主动处理输入, 它也被称为“泵送消息”。

一个典型的简单 Windows 应用程序的主线代码将首先进行基本初始化，创建主窗口，然后执行等待输入并处理它的消息循环。它通常会这样做，直到用户关闭主窗口，此时线程退出循环，并继续执行后面的代码，通常是清理代码。

Windows 应用程序中的一个常见架构是有一个主 UI 线程——通常这是主线程——它创建并拥有所有 UI，并且有一个消息循环为线程创建的所有 UI 分派消息。如果一个应用需要做一些可能会阻塞的事情，例如从套接字读取，工作线程通常用于此目的：您不希望 UI 线程阻塞（例如，在等待来自套接字的输入时） ，因为在此期间它不会处理输入，并且 UI 最终会无响应。

你可以编写一个包含多个 UI 线程的应用程序——然后每个创建窗口的线程都需要自己的消息循环——但这是一种相当先进的技术，对于大多数基本应用程序来说并不是那么有用。

您看到的其他线程可能是由 Windows 创建的用于执行后台任务的某种辅助线程；在大多数情况下，您可以忽略它们。例如，如果你初始化 COM，windows 最终可能会创建一个工作线程来管理一些 COM 内部的东西，它也可能会创建一些不可见的 HWND。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T02:54:33.187

通常启动程序的线程只运行消息循环，占用主线程。不属于处理消息或更新 UI 的任何事情通常由其他线程完成。即使您的应用程序没有创建任何线程，您看到的附加线程也可以由库或操作系统创建。Windows 将在您的进程内创建线程来处理诸如向消息循环分派事件之类的事情。

# javascript - Google Maps API V3：打开新信息框时关闭所有信息框

> ID：14493127
> 
> 赞同：4
> 
> 时间：2013-01-24T02:51:41.100
> 
> 标签：javascript, google-maps, google-maps-api-3, infowindow, infobox

我正在使用 Google Maps API V3 和[infoboxes](http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.5/docs/reference.html)，并且我正在尝试对其进行设置，以便在任何给定时间只打开一个信息框。

我见过[很多](https://stackoverflow.com/questions/11296235/google-maps-api-v3-closing-infobox) [相关](https://stackoverflow.com/questions/7308875/google-maps-api-infobox-plugin-and-multiple-markers) [的](https://stackoverflow.com/questions/12102598/trigger-event-with-infowindow-or-infobox-on-click-google-map-api-v3) [线程，但我不](https://stackoverflow.com/questions/6548225/close-infobox-when-clicking-on-the-map) [知道](https://stackoverflow.com/questions/5429444/google-maps-api-v3-event-mouseover-with-infobox-plugin)如何修改它们以使它们工作。我隐约知道它需要绑定到一个

```
google.maps.event.addListener(map,'click',function() {

}); 
```

但这几乎是我能弄清楚的程度。

这是我的代码：

```
var boxList =[]

function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(35.542284,-76.856),
      zoom: 11,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);

    $(document).ready(function(){
        $.getJSON('test.json', function(data) {

                for (i = 0; i < data.length; i++) {
                    var item = data[i];
                    var myLatlng = new google.maps.LatLng(item.lat, item.longs);
                    var contentString = item.name;

                    // accidentally left this extraneous code in here...
                    // var infowindow = new google.maps.InfoWindow({
                    //    content: item.name
                    // });

                    var marker = new google.maps.Marker({
                        position: myLatlng,
                        map: map,
                        title: item.name,
                        icon: item.type + ".png"

                    }); // end add new marker

                    var boxText = document.createElement("div");
                    boxText.style.cssText = "border: 1px solid black;";
                    boxText.innerHTML = item.name;

                    var myOptions = {
                        content: boxText,
                        boxStyle: {
                              opacity: 0.75,
                              width: "280px"
                            },
                        closeBoxMargin: "12px 4px 2px 2px",
                    };

                    var ib = new InfoBox(myOptions);
                    boxList.push(ib);

                    google.maps.event.addListener(marker,'click',
                    (function(marker, i) {
                        return function() {
                            boxList[i].open(map, this);
                        }
                    })(marker, i));

                } //end for loop 

        }) // end getJSON

    }); // end jQuery

} // end initialize 
```

EDIT: I should mention that I got this working with InfoWindows [using this plugin](http://koti.mbnet.fi/ojalesa/boundsbox/attachinfowindow.htm), but I need to be able to style them to match a specific look and feel for a website, which is the only reason I'm even banging my head against InfoBoxes to begin with.

I would really appreciate any pointers in the right direction! Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T05:26:41.113

Your coding in the for loop is the culprit here. You are creating a new InfoBox every time in the loop so you are left with new InfoBox with every marker.

This code is the one that creates a new InfoBox every time in the loop:

```
 var boxText = document.createElement("div");
                boxText.style.cssText = "border: 1px solid black;";
                boxText.innerHTML = item.name;

                var myOptions = {
                    content: boxText,
                    boxStyle: {
                          opacity: 0.75,
                          width: "280px"
                        },
                    closeBoxMargin: "12px 4px 2px 2px",
                };

                var ib = new InfoBox(myOptions); 
```

So to have a single instance of InfoBox, write the above code before the loop, so that you are only initializing the InfoBox once.

Since boxText.innerHTML is dynamic in the above code, set this content in the AddListener function.

So the final code should be-

```
 for (i = 0; i < data.length; i++) {
                var item = data[i];
                var myLatlng = new google.maps.LatLng(item.lat, item.longs);
                var contentString = item.name;

                var marker = new google.maps.Marker({
                    position: myLatlng,
                    map: map,
                    title: item.name,
                    icon: item.type + ".png"

                }); // end add new marker
              AddInfoBox(marker, contentString); //function call
            } //end for loop 

            function AddInfoBox(myMarker, content)
            {
                google.maps.event.addListener(myMarker,'click',function() {
                        ib.setContent(content); //not sure about this statement
                        ib.open(map, this);
                    }
                });

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:13:02.280

Use [gmaps.js](http://hpneo.github.com/gmaps/examples.html), look [add marker option](http://hpneo.github.com/gmaps/examples/markers.html), plugin it's easy to use.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T03:22:51.523

I believe [this](http://gmaps-samples-v3.googlecode.com/svn/trunk/single-infowindow/single-infowindow.html) example is what you're looking for. It shows how to share a single info window between multiple markers.

# php - 为什么我的 php 中的数据不会上传到我的 sql 服务器？

> ID：14493128
> 
> 赞同：1
> 
> 时间：2013-01-24T02:51:42.907
> 
> 标签：php, mysql, database, login, connect

我已经开始编写一个带有登录名（用户/通行证/头像等）的基于社区的网站。所有这些变量都存储在 sql 服务器上，因此我可以访问它们以进行登录等。

我查看了所有谷歌，我的代码看起来很合理，并且我的电子邮件验证已发送。但是没有数据上传到我的sql数据库，所以不能创建用户。

我在下面包含了我的网站的代码，出于安全原因删除了连接信息。为什么我无法将数据写入我的数据库？任何帮助，将不胜感激。

## 注册.php

```
 <?php require('top.php'); ?>

 <div id="full">        
        <?php

        $form = " <form action='register.php' method='post'>

            <table cellspacing='10px'>
            <tr>

                <td></td>
                <td>Required Feilds <font color='red'>*</font></td>

            </tr>

            <tr>

                <td>First Name:</td>
                <td><input type='text' name='firstname' class='textbox'><font color='red'>*</font></td>

            </tr>
            <tr>

                <td>Last Name:</td>
                <td><input type='text' name='lastname' class='textbox'><font color='red'>*</font></td>

            </tr>
            <tr>

                <td>Username:</td>
                <td><input type='text' name='username' class='textbox'><font color='red'>*</font></td>

            </tr>
            <tr>

                <td>Email:</td>
                <td><input type='text' name='email' class='textbox'><font color='red'>*</font></td>

            </tr>
            <tr>

                <td>Password:</td>
                <td><input type='password' name='password' class='textbox'><font color='red'>*</font></td>

            </tr>
            <tr>

                <td>Confirm Password:</td>
                <td><input type='password' name='repassword' class='textbox'><font color='red'>*</font></td>

            </tr>
            <tr>

                <td>Avatar:</td>
                <td><input type='file' name='avatar' > </td>

            </tr>
            <tr>

                <td>Website Address:</td>
                <td><input type='text' name='website' class='textbox'></td>

            </tr>
            <tr>

                <td>YouTube Username:</td>
                <td><input type='text' name='youtube' class='textbox'></td>

            </tr>
            <tr>

                <td>Bio:</td>
                <td><textarea name='bio' cols='35' rows='5' class='textbox'></textarea> </td>

            </tr>
            <tr>

                <td></td>
                <td><input type='submit' name='submitbtn' value='Register' class='button'></td>

            </tr>
            </table>

            </form>";

            if($_POST['submitbtn']) {

                $firstname = strip_tags($_POST['firstname']);
                $lastname = strip_tags($_POST['lastname']);
                $username = strip_tags($_POST['username']);
                $email = strip_tags($_POST['email']);
                $password = strip_tags($_POST['password']);
                $repassword = strip_tags($_POST['repassword']);
                $website = strip_tags($_POST['website']);
                $youtube = strip_tags($_POST['youtube']);
                $bio = strip_tags($_POST['bio']);

                $name = $_FILES['avatar']['name'];
                $type = $_FILES['avatar']['type'];
                $size = $_FILES['avatar']['size'];
                $tmpname = $_FILES['avatar']['tmp_name'];
                $ext = substr($name, strrpos($name, '.'));

                if ($firstname && $lastname && $username && $email && $password && $repassword) {

                    if ($password == $repassword){

                        if ( strstr($email, "@") && strstr($email, ".") && strlen($email) >= 6) {

                            require('connect.php');

                            $query = mysql_query("SELECT * FROM users WHERE username='$username'");
                            $numrows = mysql_num_rows($query);
                            if ($numrows == 0) {

                                $query = mysql_query("SELECT * FROM users WHERE email='$email'");
                                $numrows = mysql_num_rows($query);
                                if ($numrows == 0) {

                                    $pass = md5(md5($password));
                                    $date =date("F d, Y"); 

                                    if ($name) {

                                        move_uploaded_file($tmpname, "avatars/$username.$ext");
                                        $avatar = "$username.$ext";

                                    }
                                    else
                                        $avatar = "avatars/defavatar.png";

                                    $code = substr(md5(rand (1111111111, 99999999999999999)), 2, 25);

                                    mysql_query("INSERT INTO users VALUES       ('','$firstname','$lastname,'$username','$email','$pass','$avatatar','$bio','$website','$youtube','','0','$code','0','$date')");

                                    $webmaster = "email@email.com";
                                    $subject = "Activate Your Account";
                                    $headers = "From: a person <$webmaster>";
                                    $message = "Hello $firstname. Welcome to awebsite.com Below is a link for you to activate your account.\n\n Click Here to Activate Your Account: http://awebsite.netii.net/activate.php?code=$code";

                                    mail ($email, $subject, $message, $headers);

                                    echo "Thank You for registering. To access your account please activate your account by folowing the link sent to <b>$email</b>. If you do not see the email in your inbox, check your junk mail as it may have been filtered. If you are expeiriencing any problems please contact the site administrator at <a href='mailto:email@email.com'>email@email.com</a>";

                                }
                                else
                                    echo "That email is already taken. $form";

                            }
                            else
                                echo "That username is already taken. $form";

                        }
                        else
                            echo "You did not enter a valid email. $form";

                    }
                    else
                        echo "Your Passwords did not match. $form";

                }
                else
                    echo "You did not fill in all the required feilds. $form";
            }

            else 
                echo "$form";

         ?>
 </div>
<?php require('bottom.php');?>

</div>

</body>
</html> 
```

## 激活.php

```
 <?php $title = "Activate Your Account"; ?>
    <?php require('top.php');?>

    <div id="full"> 
    <?php

        $getcode =$_GET['code'];

        $form = "<form action='activate.php' method='post'>
        <table>
        <tr>
            <td>Activate Code:</td>
            <td><input type='text' name='code' value='$getcode' size='30' </td>
        </tr>
        <tr>
            <td>Username:</td>
            <td><input type='text' name='username' </td>
        </tr>
        <tr>
            <td>Password:</td>
            <td><input type='password' name='password' </td>
        </tr>
        <tr>
            <td></td>
            <td><input type='submit' name='submitbtn' value='Activate'</td>
        </tr>
        </table>
        </form>";

        if ($_POST['submitbtn']) {
            $code = strip_tags($_POST['code']);
            $username = strip_tags($_POST['username']);
            $password = strip_tags($_POST['password']);

            if ($code && $username && $password) {

                if (strlen($code) == 25) {

                    $pass = md5(md5($password));
                    require('connect.php');
                    $query = mysql_query("SELECT * FROM users WHERE username='$username' AND password='$pass'");
                    $numrows = mysql_num_rows($query);
                    if ($numrows == 1) {

                        $row = mysql_fetch_assoc($query);
                        $dbcode = $row['code'];

                        if ($code == $dbcode) {

                            mysql_query("UPDATE users SET active='1' WHERE username='$username'");

                            echo "Your account has been activated. You may now login. Click<a href='login.php'>here</a> to login.";

                        }
                        else
                            echo"Your activation code was incorrect. $form";

                    }
                    else
                        echo "Your username or password are invalid. $form";

                }
                else
                    echo "You have not supplied a valid code. $form";

            }
            else
                echo "You did not fill out the entire form. $form";
        }
        else
            echo "$form";

    ?>
</div>
<?php require('bottom.php');?> 
```

## 连接.php

```
<?php 

$server = "";
$dbuser = "";
$dbpass = "";
$database = "";

mysql_connect($server, $dbuser, $dbpass) or die("Unable to connect to $server");
mysql_select_db($database) or die( "Unable to select $database" );

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:54:47.767

在 register.php 中，更改：

```
<form action='register.php' method='post'> 
```

至：

```
<form action='register.php' method='post' enctype="multipart/form-data"> 
```

这是使用上传文件所必需的`<input type="file" ...>`。

你不应该使用`$pass = md5(md5($password));`- 这只是一种容易破解的方法。而是查看`crypt()`- [http://php.net/crypt](http://php.net/crypt)

由于这是新代码，请考虑从`mysql_*`函数更改为`mysqli_*`或 PDO，因为 PHP 正在贬值`mysql_*`，这将节省您以后的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:18:42.883

您的代码中有拼写错误。

首先我们必须检查是否设置了提交请求，所以 => if($_POST['submitbtn']) 应该是，

```
if( isset($_POST['submitbtn']) ) {
     ...
} 
```

更改代码并检查。

**编辑**

您可以重新格式化您的代码。检查所有不为空的变量，使用 mysql 转义而不是条形标签，并且不要对密码使用任何转义，仅使用 hash(md5)。

```
 if (isset($_POST['submitbtn'])) {
            $code     = mysql_real_escape_string($_POST['code']);
            $username = mysql_real_escape_string($_POST['username']);
            $password = md5($_POST['password']);
            $errors   = array();

            if (empty($code) || empty($username) || empty($password)) {
                $errors[] = "You did not fill out the entire form." . $form;
            } elseif(strlen($code) !== 25) {
                $errors[] = "You have not supplied a valid code." . $form;
            } else {
                // further code...
            }
        } else {
            echo $form;
        } 
```

# android - ViewPager 文章的左右滑动手势对我不起作用？

> ID：14493132
> 
> 赞同：1
> 
> 时间：2013-01-24T02:51:55.983
> 
> 标签：android

我已经实现了一个 ViewPager，它为 ImageViews 提供服务，如本文和源代码所示：

[http://android-developers.blogspot.com/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)

[http://code.google.com/p/viewpagerexample/source/browse/trunk/AwesomePager/src/com/geekyouup/paug/awesomepager/AwesomePagerActivity.java](http://code.google.com/p/viewpagerexample/source/browse/trunk/AwesomePager/src/com/geekyouup/paug/awesomepager/AwesomePagerActivity.java)

渲染很好，但是当我尝试浏览寻呼机的内容时，我遇到了一个非常奇怪的手势问题。左右滑动手势似乎没有被正确捕获，所以寻呼机只是快速回到第 0 个元素。如果我继续玩这些手势，也许 50 次中有 1 次我可以让它前进到下一页。

我在 ListView 中使用它（通过 getListView().addHeaderView(myViewPager)）。除此之外，一切都一样。其他人在此实施方面取得了成功吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T08:12:36.860

如果您使用 viewpager 作为 listview 的标题，则需要这样做，然后 viewpager 才能正常工作。

```
viewPager.setOnTouchListener(new OnTouchListener() {
  @Override
  public boolean onTouch(View v, MotionEvent event) {
    PointF downP = new PointF();
    PointF curP = new PointF();
    int act = event.getAction();
    if(act == MotionEvent.ACTION_DOWN || act == MotionEvent.ACTION_MOVE || act == MotionEvent.ACTION_UP){
      ((ViewGroup) v).requestDisallowInterceptTouchEvent(true);
      if (downP.x == curP.x && downP.y == curP.y) {
        return false;
      }
    }
    return false;
  } 
```

# javascript - 如何使用javascript根据父窗口标题更改iframe内div的显示？

> ID：14493134
> 
> 赞同：0
> 
> 时间：2013-01-24T02:52:06.727
> 
> 标签：javascript, html, iframe

我有这个标题为 Criatweb 的父页面，其中有一个 iframe 页面，我想更改 iframe 页面内 div 的显示，但只有当它的标题是 Criatweb 时才更改。我在 iframe 页面中尝试过，但没有成功：

```
<script type="text/javascript">
if (window.parent.document.title == 'Criatweb')
{document.getElementById('customizarsite').style.display = 'none';}    
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:15:31.527

错误消息意味着您在页面上加载元素之前调用它！

这就像在打开它之前穿过一扇门。除非你是鬼，否则不会发生。

您需要将其称为 onload 或 onready 或在元素之后。

```
<div id="customizarsite">Put the script after me</div>
<script type="text/javascript">
    if (window.parent.document.title == 'Criatweb') {    
        document.getElementById('customizarsite').style.display = 'none';
    }    
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T02:57:05.367

使用[jQuery 隐藏](http://api.jquery.com/hide/)

```
<script type="text/javascript">
 if (window.parent.document.title == 'Criatweb')
 {
    $("#customizarsite").hide();
 }    
</script> 
```

# ios - iOS OpenGL ES - 模拟器和设备上的不同纹理行为

> ID：14493142
> 
> 赞同：3
> 
> 时间：2013-01-24T02:53:06.217
> 
> 标签：ios, opengl-es

我正在使用 OpenGL ES 加载纹理，下面是我的代码。

图形由 2 个相同大小的纹理组成，停止按钮和后面的蓝色发光。

下面的第一张图是使用 xCode 中的 iPad 模拟器拍摄的，第二张图是在实际设备上拍摄的。当我从 Illustrator 导出图形时，第一个图形是正确的输出。但是，当我在 iPad 上加载程序时，它给了我第二个图形。似乎不知何故，停止按钮后面的蓝光纹理变小了。为什么会这样？

我可以通过使蓝光纹理更大来补偿，但这不正确，因为它在 Illustrator 中的外观应该是第一个图形。

这是我的代码。

```
//
//  OpenGLES_Ch3_4ViewController.m
//  OpenGLES_Ch3_4
//

#import "OpenGLES_Ch3_4ViewController.h"
#import "AGLKVertexAttribArrayBuffer.h"
#import "AGLKContext.h"

#define Y_POS 1.0
#define ASPECT_RATIO 0.75f
#define SIZE 0.8

@implementation OpenGLES_Ch3_4ViewController

@synthesize baseEffect;
@synthesize vertexBuffer;
@synthesize textureInfo0;
@synthesize textureInfo1;

/////////////////////////////////////////////////////////////////
// This data type is used to store information for each vertex
typedef struct {
   GLKVector3  positionCoords;
   GLKVector2  textureCoords;
}
SceneVertex;

/////////////////////////////////////////////////////////////////
// Define vertex data for a triangle to use in example
//static const SceneVertex vertices[] = 

static const SceneVertex vertices[] =
{
    {{-1.0f*SIZE, -ASPECT_RATIO*SIZE, 0.0f}, {0.0f, 0.0f}},  // first triangle
    {{ 0.0f*SIZE, -ASPECT_RATIO*SIZE, 0.0f}, {1.0f, 0.0f}},
    {{-1.0f*SIZE,          0.0f*SIZE, 0.0f}, {0.0f, 1.0f}},
    {{ 0.0f*SIZE, -ASPECT_RATIO*SIZE, 0.0f}, {1.0f, 0.0f}},  // second triangle
    {{-1.0f*SIZE,          0.0f*SIZE, 0.0f}, {0.0f, 1.0f}},
    {{ 0.0f*SIZE,          0.0f*SIZE, 0.0f}, {1.0f, 1.0f}},
};

/////////////////////////////////////////////////////////////////
// Called when the view controller's view is loaded
// Perform initialization before the view is asked to draw
- (void)viewDidLoad
{
   [super viewDidLoad];

   // Verify the type of view created automatically by the
   // Interface Builder storyboard
   GLKView *view = (GLKView *)self.view;
   NSAssert([view isKindOfClass:[GLKView class]],
      @"View controller's view is not a GLKView");

   // Create an OpenGL ES 2.0 context and provide it to the
   // view
   view.context = [[AGLKContext alloc] 
      initWithAPI:kEAGLRenderingAPIOpenGLES2];

   // Make the new context current
   [AGLKContext setCurrentContext:view.context];

   // Create a base effect that provides standard OpenGL ES 2.0
   // shading language programs and set constants to be used for 
   // all subsequent rendering
   self.baseEffect = [[GLKBaseEffect alloc] init];
   self.baseEffect.useConstantColor = GL_TRUE;
   self.baseEffect.constantColor = GLKVector4Make(
      1.0f, // Red
      1.0f, // Green
      1.0f, // Blue
      1.0f);// Alpha

   // Set the background color stored in the current context 
   ((AGLKContext *)view.context).clearColor = GLKVector4Make(
      0.0f, // Red 
      0.0f, // Green 
      0.0f, // Blue 
      1.0f);// Alpha 

   // Create vertex buffer containing vertices to draw
   self.vertexBuffer = [[AGLKVertexAttribArrayBuffer alloc]
      initWithAttribStride:sizeof(SceneVertex)
      numberOfVertices:sizeof(vertices) / sizeof(SceneVertex)
      bytes:vertices
      usage:GL_STATIC_DRAW];

   // Setup texture0
   CGImageRef imageRef0 = 
      [[UIImage imageNamed:@"stoplight_full.png"] CGImage];

   self.textureInfo0 = [GLKTextureLoader 
      textureWithCGImage:imageRef0 
      options:[NSDictionary dictionaryWithObjectsAndKeys:
         [NSNumber numberWithBool:YES], 
         GLKTextureLoaderOriginBottomLeft, nil] 
      error:NULL];

    self.textureInfo0_2 = [GLKTextureLoader
                         textureWithCGImage:imageRef0
                         options:nil
                         error:NULL];

   // Setup texture1
   CGImageRef imageRef1 = 
      [[UIImage imageNamed:@"stop_button.png"] CGImage];

   self.textureInfo1 = [GLKTextureLoader 
      textureWithCGImage:imageRef1 
      options:[NSDictionary dictionaryWithObjectsAndKeys:
         [NSNumber numberWithBool:YES], 
         GLKTextureLoaderOriginBottomLeft, nil] 
      error:NULL];

    self.textureInfo1_2 = [GLKTextureLoader
                         textureWithCGImage:imageRef1
                           options:nil
                           error:NULL];

   // Enable fragment blending with Frame Buffer contents
   glEnable(GL_BLEND);
   glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
}

/////////////////////////////////////////////////////////////////
// GLKView delegate method: Called by the view controller's view
// whenever Cocoa Touch asks the view controller's view to
// draw itself. (In this case, render into a frame buffer that
// shares memory with a Core Animation Layer)
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{   
   // Clear back frame buffer (erase previous drawing)
   [(AGLKContext *)view.context clear:GL_COLOR_BUFFER_BIT];

   [self.vertexBuffer prepareToDrawWithAttrib:GLKVertexAttribPosition
      numberOfCoordinates:3
      attribOffset:offsetof(SceneVertex, positionCoords)
      shouldEnable:YES];
   [self.vertexBuffer prepareToDrawWithAttrib:GLKVertexAttribTexCoord0
      numberOfCoordinates:2
      attribOffset:offsetof(SceneVertex, textureCoords)
      shouldEnable:YES];

   self.baseEffect.texture2d0.name = self.textureInfo0.name;
   self.baseEffect.texture2d0.target = self.textureInfo0.target;
   [self.baseEffect prepareToDraw];

   // Draw triangles using the vertices in the 
   // currently bound vertex buffer
   [self.vertexBuffer drawArrayWithMode:GL_TRIANGLES
      startVertexIndex:0
      numberOfVertices:sizeof(vertices) / sizeof(SceneVertex)];

   self.baseEffect.texture2d0.name = self.textureInfo1.name;
   self.baseEffect.texture2d0.target = self.textureInfo1.target;
   [self.baseEffect prepareToDraw];

   // Draw triangles using currently bound vertex buffer
   [self.vertexBuffer drawArrayWithMode:GL_TRIANGLES
      startVertexIndex:0
      numberOfVertices:sizeof(vertices) / sizeof(SceneVertex)];
 } 
```

![所需 - iPad 模拟器](../Images/9ba98ab26620155459a99837ef3daa3c.png)

![平板电脑 3](../Images/3b18378a318c877027d3624d5de087c3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:34:41.487

对我来说，第二个纹理看起来并不小，只是更暗。您的笔记本电脑和 iPad 很可能具有不同 gamma 的显示器。

有很多方法可以校正 gamma，[这里](http://www.arcsynthesis.org/gltut/Illumination/Tut12%20Monitors%20and%20Gamma.html)提供了一个很棒的介绍。

值得注意的是，如今许多现代卡也可以为您做到这一点，但据我所知，OpenGL ES 目前不支持：[sRGB 颜色格式](http://www.arcsynthesis.org/gltut/Texturing/Tutorial%2016.html)。

# bash - 如何获取终端历史记录中每个命令行的时间戳？

> ID：14493145
> 
> 赞同：16
> 
> 时间：2013-01-24T02:53:34.910
> 
> 标签：bash, command-line, terminal, timestamp

我想知道我在终端中输入的命令已经运行了多长时间。能够获得我历史上每个命令的时间戳真是太好了。让我知道您是否需要更多信息才能回答这个问题。谢谢。

编辑：我正在使用 bash 终端。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-24T02:57:05.870

假设您正在使用命令提示符

```
HISTTIMEFORMAT="%d/%m/%y %T " 
```

然后

```
history 
```

[http://www.cyberciti.biz/faq/unix-linux-bash-history-display-date-time/](http://www.cyberciti.biz/faq/unix-linux-bash-history-display-date-time/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-01-12T02:01:13.970

`history -f`是打印时间戳的好方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-12T09:21:10.563

我不认为我知道如何显示持续时间，但您可以通过设置 HISTTIMEFORMAT 变量来查看运行命令的时间。

```
export HISTTIMEFORMAT='%F %T ' 
```

然后叫你的“历史”

```
history 
```

如果您只想查看最后 10 个命令

```
history | tail 
```

希望这有帮助:)

# android - 按下按钮时寻求进度条

> ID：14493146
> 
> 赞同：1
> 
> 时间：2013-01-24T02:53:34.887
> 
> 标签：android, seekbar, android-progressbar, buttonclick

我做了一个简单的android项目，一个包含三个按钮和一个搜索栏的活动，现在我想要的是，当我按下第一个按钮时，搜索栏应该直接前进33％（不显示进度），当第二个按钮按下搜索栏时第二次应该再次进步 33%，当按下第三个按钮时，搜索栏应该完全进步..我的代码如下：

**主.java**

```
package com.example.seekabardemo;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.SeekBar;

public class MainActivity extends Activity {
Button btn,btn1,btn2;
SeekBar sk;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
      btn=(Button)findViewById(R.id.button1);
      btn1=(Button)findViewById(R.id.button2);
      btn2=(Button)findViewById(R.id.button3);
      sk=(SeekBar)findViewById(R.id.seekBar1);
      btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    });
      btn1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    });
      btn2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

![在此处输入图像描述](../Images/fe12430a7b8166a0186742ba3d6c1fd6.png)

![在此处输入图像描述](../Images/7c25bf3b2cb934e2641fabe803091568.png)

![在此处输入图像描述](../Images/241183bdf3959fd72c56d3ddb4cf434a.png)

![在此处输入图像描述](../Images/3338bb87d663c4a6e32efa012e9fbd80.png)

谢谢..请帮帮我..！

请帮助我..谢谢..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:29:52.327

这三个语句分别写在每个按钮的点击事件中。

```
sk.setProgress(sk.getMax()/3);
sk.setProgress(sk.getMax()*2/3);
sk.setProgress(sk.getMax()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T18:27:34.317

只需设置 seekBar 进度：

```
sk.setProgress(ProgressToSet); 
```

为了获得最大可能的进步：

```
sk.getMax(); 
```

要获得一个搜索栏的百分比：

```
sk.setProgress(sk.getMax()/100*YourPercentage); 
```

# java - GridView getView 问题

> ID：14493149
> 
> 赞同：1
> 
> 时间：2013-01-24T02:54:07.493
> 
> 标签：java, android, gridview, lazy-loading, universal-image-loader

在我的 GridView 的 getView() 方法中，我正在执行以下操作：

```
public View getView(int position, View convertView, ViewGroup parent) {
       convertView = this.inflater.inflate(..);
       ImageView image = (ImageView) convertView
                .findViewById(R.id.imageButton1);
       imageLoader.displayImage("URL/"
                + sampleArray.get(position), image); 
```

这里的 sampleArray 是我在创建 Adapter 时加载的数组。它在延迟加载（使用此工具：[https](https://github.com/nostra13/Android-Universal-Image-Loader) ://github.com/nostra13/Android-Universal-Image-Loader ）这些图像时使用，并且基本上是确定要加载的图片的图像 URL 的一部分。现在，据我所知，最好的做法是仅在视图为空*时才对视图进行膨胀：*

```
if(convertView == null){
   this.inflater.inflate(...); 
```

当我这样做时，它实际上更快，但图像加载很奇怪。如果我向下滚动并向上滚动，图像会在行内切换，这意味着在顶行中，第一列图像可能会与第二列图像随机切换。我使用的数组 (sampleArray) 没有改变。我知道这与调用位置和 getView() 有关，但我不确定为什么会发生这种行为。

如果我按照现在的方式（第一个代码块）进行操作，这意味着我每次都会对其进行充气，它可以完美运行，但加载速度很慢。为什么这种行为会这样工作？

提前致谢。

**编辑**：

这就是我认为正在发生的事情。GetView() 被多次调用，这与“位置”参数不同步，导致从数组中挑选出错误的元素。我仍然对此感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:51:58.870

你应该使用

```
.resetViewBeforeLoading() 
```

并且可能

```
.showStubImage(R.drawable.empty_image) 
```

初始化 UIL 时在 DisplayImageOptions 上。这将在加载之前重置视图。这是必需的，因为您正在重用 gridview 上的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:43:12.157

您是否尝试过清理原始图像：

```
image.setImageBitmap(null); 
```

我检查了[图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader/blob/master/library/src/com/nostra13/universalimageloader/core/ImageLoader.java%22image%20loader%22)的源代码，其中一种方法是：

```
public void displayImage(String uri, ImageView imageView, DisplayImageOptions options) 
```

我认为您也可以尝试将选项设置为“resetViewBeforeLoading = true”

我认为奇怪的事情发生的原因是，在加载器将其与新位图附加之前，该视图被 gridview 回收，该视图在显示时仍与原始位图保持一致。

如果它仍然不起作用，请让我知道。

**编辑**

我做了更多的调查，我认为原因是回收。让我更清楚地解释一下：

*原因：*

假设屏幕上的数据共有 12 个单元格，则只有 9 个视图可见

一开始，gridview 将创建并在屏幕上显示 9：

视图_1_1 视图_1_2 视图_1_3

视图_2_1 视图_2_2 视图_2_3

view_3_1 view_3_2 view_3_3

滚动后（向上滚动，显示第 4 行），此时网格视图会将 view_1_1、view_1_2、view_1_3 放入回收站。然后将从回收站获取第 4 行的 3 个视图，这些视图作为“convertView”放入 getView，因此 view_1_1、view_1_2、view_1_3 将被重用。

假设一开始，视图附有位图

view_1_1：位图_1_1

view_1_2：位图_1_2

view_1_3：位图_1_3

当这些视图被回收并显示在第 4 行时，由于位图是异步加载的，因此 bitmap_1_1、bitmap_1_2、bitmap_1_3 将显示在第 4 行，然后被这些新位图替换。

*如何确认*

1.我喜欢的调试网格视图的一种方法是在图像上放一些“id”，简单的方法就是在“ImageView” toString() 上放一个覆盖视图，并在其中写入id，例如：

```
String s = viewInfoHolder.imageView.toString();
viewInfoHolder.overlay.setText(s.substring(s.length() -3));//last 3 chars are enough and cleanup 
```

2.为了使更换变慢，修改

```
com.nostra13.universalimageloader.core.LoadAndDisplayImageTask 
```

方法的最后一行：

```
public void run() 
```

从：

```
handler.post(displayBitmapTask); 
```

至：

```
handler.postDelayed(displayBitmapTask, 2000); 
```

您可以准确了解网格视图的工作原理。

希望它有帮助:)

# nginx - 使用 nginx 在龙卷风中创建 404 页面失败

> ID：14493156
> 
> 赞同：0
> 
> 时间：2013-01-24T02:54:59.037
> 
> 标签：nginx, http-status-code-404, tornado

我试图为龙卷风制作自定义 404 页面，并想用 nginx 部署它，但失败了。

这是我的 domain.conf（包含在 nginx.conf 中）

```
server {
    listen 80;
    server_name vm.tuzii.me;

    client_max_body_size 50M;

    location ^~ /app/static/ {
        root ~/dev_blog;
        if ($query_string) {
            expires max;
        }
    }

    location = /favicon.ico {
        rewrite (.*) /static/favicon.ico;
    }
    location = /robots.txt {
        rewrite (.*) /static/robots.txt;
    }

    error_page 404 /404.html;
    location /404.html {
        root /home/scenk;
        internal;
    }

    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_pass http://frontends;
    }
} 
```

但是重新加载nginx后，什么也没有发生。似乎龙卷风在 nginx 之前捕获了 404error。我不知道要解决这个问题。

**PS。我只想通过 nginx 制造 404error。但不要重写龙卷风源中的“write_error”。**

```
Environment: Ubtuntu 12.04 Tornado2.4.1 runsite with supervisor by Nginx 4 process. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T15:02:14.030

我遇到了同样的问题，你真正需要的是这一套：

proxy_intercept_errors 开启；

来自[nginx 代理模块文档](http://wiki.nginx.org/HttpProxyModule)：

proxy_intercept_errors

语法：proxy_intercept_errors on | 离开

默认值：关闭

上下文：http

该指令决定 nginx 是否会拦截 HTTP 状态代码为 400 或更高的响应。

默认情况下，所有响应都将从代理服务器按原样发送。

如果您将其设置为 on，则 nginx 将拦截由 error_page 指令显式处理的状态代码。状态码与 error_page 指令不匹配的响应将从代理服务器按原样发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:47:49.393

最终解决这个问题。因为

```
proxy_pass_header Server; 
```

所以发送了真正的 TornadoServer。要隐藏真实服务器，只需更改

```
proxy_pass_header User-Agent; 
```

就这样。

# jquery - 选择 DIV 中的特定字符串并对其进行格式化

> ID：14493162
> 
> 赞同：0
> 
> 时间：2013-01-24T02:55:52.063
> 
> 标签：jquery, css, html

div 内的示例文本：

```
I am at the first line.
I am at the second line.
I am at the third line.
I am at the end of the first paragraph. 
```

问题：我想制作一个脚本，它将使：

> 1.  所有“第一”都将被涂成蓝色
> 2.  所有“第二个”都将被涂成绿色
> 3.  所有“第三个”都将被涂成红色和粗体

[请在此处查看非工作代码..](http://jsfiddle.net/rickroydaban/y7ept/)

添加了代码链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T05:21:51.297

Here you go

```
$(function(){   
  $('#text').attr('value','first').css('color','#0000FF');
  $('#text').attr('value','second').css('color','#00FF00');
  $('#text').attr('value','third').css('color','#FF0000');
  $('#text').attr('value','third').css('font-weight','bold');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:03:04.980

这几乎是不可能实现的，如果适用于一篇文章或段落，它将不适用于另一篇文章或段落。在我看来，唯一的解决方案是包含一个 html 标记，它将定义这些标记，然后为它们应用 jquery 代码，

```
<p class='paragraph'>
<span class='firstline'>This is the first line.</span>
<span class='secoundline'> This is the second line. </span>
<span class='thirdline'> This is the third line.</span>
<span class='endparagraph'>This is the end of the first paragraph.</span>
</p> 
```

现在在 jquery 部分你可以做类似的事情

```
$(function(){
  $('.firstline').css({'color':'blue' , 'font-weight':'bold'});
  .....

}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T03:41:36.937

您可以使用 jQuery`:nth-child`选择器来执行此操作。您可以使用 css() 或通过向段落添加类并使用 CSS 设置样式（这将是理想的）来应用样式。

I've created a JSFiddle with the two versions: [http://jsfiddle.net/RJ8sC/5/](http://jsfiddle.net/RJ8sC/5/). You just need to change the wrapper div ID to yours and you should be good to go.

Here's the jQuery code for quick reference:

```
$(document).ready( function() {
    $('#example p:nth-child(1)').css('color','blue');
    $('#example p:nth-child(2)').css('color','green');
    $('#example p:nth-child(3)').css({color:'red', 'font-weight': 'bold'});
});

// ALTERNATIVE USING CLASSES - THIS IS BETTER PRACTICE

$(document).ready( function() {
    $('#example2 p:nth-child(1)').addClass('first');
    $('#example2 p:nth-child(2)').addClass('second');
    $('#example2 p:nth-child(3)').addClass('third');
}); 
```

# magento - 客户通过 3rd 方网关取消付款然后选择 Paypal 时出错

> ID：14493166
> 
> 赞同：0
> 
> 时间：2013-01-24T02:56:05.637
> 
> 标签：magento, paypal, opayo

我正在使用 Paypal、eway 和 sagepay 作为支付网关运行 Magento CE 1.7。例如，如果客户在结账阶段选择通过 eway 或 sage pay 付款，然后决定取消付款以选择 Paypal，则单击处理订单后会弹出错误。错误是：“无法处理订单”。随后通过贝宝付款的尝试被拒绝。有没有其他人遇到过这个问题？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:14:26.653

您是否检查了 exception.log 文件？此消息是在 magentos onepagecheckout 上还是在 paypal 上显示的？

# javascript - 修复角度排序

> ID：14493168
> 
> 赞同：1
> 
> 时间：2013-01-24T02:56:12.263
> 
> 标签：javascript, sorting, angularjs

[Angular](http://angularjs.org/)将“奥兰群岛”排在“津巴布韦”之后。我想以全球的方式解决这个问题。我不想创建自定义排序函数并在每个[`orderBy`](http://docs.angularjs.org/api/ng.filter%3aorderBy)过滤器中指定它，而是想以某种方式全局修补默认排序函数。这可能吗？

通过首先使用以下函数对两个字符串进行归一化，问题得到解决：

```
function norm(str) {
  str = str.toLowerCase();
  str = str.replace(/\\s/g, "");
  str = str.replace(/[àáâãäå]/g, "a");
  str = str.replace(/æ/g, "ae");
  str = str.replace(/ç/g, "c");
  str = str.replace(/[èéêë]/g, "e");
  str = str.replace(/[ìíîï]/g, "i");
  str = str.replace(/ñ/g, "n");
  str = str.replace(/[òóôõö]/g, "o");
  str = str.replace(/œ/g, "oe");
  str = str.replace(/[ùúûü]/g, "u");
  str = str.replace(/[ýÿ]/g, "y");
  str = str.replace(/\\W/g, "");
  return str;
} 
```

我希望有一种方法可以在 Angular 中做到这一点，并且再也不用担心它了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T18:05:14.833

您可以自己规范化它：

```
var normalize = function(str) {
  return str.toLowerCase().
             replace(/[àáâãäå]/g, "a");
             // ...
};

app.controller('MainCtrl', function($scope) {
  $scope.items = [
    {name: 'Åland Islands'},
    // ...
  ];

  $scope.normalizedName = function(item) {
    return normalize(item.name);
  };
}); 
```

然后在html中使用：

```
<li ng-repeat="item in items | orderBy:normalizedName">{{item.name}}</li> 
```

[这是plunker](http://beta.plnkr.co/edit/PcnX6Mm973hmbRczEsPr?p=preview)的整个示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T21:21:34.760

根据对问题的评论，创建一个自定义过滤器。将 orderBy 过滤器注入此自定义过滤器，以免重复 orderBy 已经执行的操作：

```
angular.module('myApp', []).
filter('betterOrderBy', function(orderByFilter) {
    return function(input, arg1, arg2) {
        var copy_of_input = angular.copy(input)
        for (var i = 0; i < input.length; i++) {
            copy_of_input[i]['orig'] = input[i];
            str = copy_of_input[i][arg1].toLowerCase();
            str = str.replace(/[àáâãäå]/g, "a");
            // ...
            copy_of_input[i][arg1] = str.replace(/\\W/g, "");
        }
        var normalized_sorted = orderByFilter(copy_of_input, arg1, arg2);
        var normalized_sorted_orig = [];
        angular.forEach(normalized_sorted, function(obj, i) {
            normalized_sorted_orig.push(obj.orig)
        })
        return normalized_sorted_orig;
    }
}); 
```

按如下方式使用它：

```
Better sort: {{myArrayOfObjects | betterOrderBy:'name'}} 
```

[小提琴](http://jsfiddle.net/mrajcok/TaHEt/)。

# regex - 什么是正则表达式或？

> ID：14493170
> 
> 赞同：2
> 
> 时间：2013-01-24T02:56:13.310
> 
> 标签：regex, bash

我正在尝试查找所有名为“abc”、“qwe”、“asd”或“zcx”的文件。

```
find . -name "abc"|"qwe"|"asd"|"zcx" 
```

这不正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T02:58:11.857

用这个：

```
 find . -name "abc" -o -name "qwe" -o -name "asd" -o -name "zcx" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T02:59:28.690

尝试这个：

```
find . -regex '.*/\(abc\|qwe\|asd\|zcx\)$' 
```

* * *

注意：`-regex`将匹配整个路径。

# jquery - 在现有的 jQuery 代码中添加“活动”类

> ID：14493172
> 
> 赞同：0
> 
> 时间：2013-01-24T02:56:27.977
> 
> 标签：jquery

我想在现有的 jQuery 代码中添加“活动”类我在 jQuery 中不太擅长我尝试但我不够幸运。

我想为活动状态添加类“活动”

我[这里有一个样本](http://jsfiddle.net/jhunlio/CNgJM/2/)

```
$(function() {
    $('#arrow').click(function() {
        $('.toggleContent').slideToggle('fast');
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T02:58:12.773

要将其添加到单击的箭头，请使用`$(this)`：

```
$('#arrow').click(function(event) {
    $('.toggleContent').slideToggle('fast');
    $(this).toggleClass('active');

    event.preventDefault();
}); 
```

# lisp - 读取时评估宏与准引用

> ID：14493175
> 
> 赞同：3
> 
> 时间：2013-01-24T02:57:01.830
> 
> 标签：lisp, common-lisp

简而言之，有什么区别？

```
(setq var1 `(,(get-internal-real-time)))
var1
-->(1358995178904535)
var1
-->(1358995178904535)

(setq var2 '(#.(get-internal-real-time)))
var2
-->(1358995195568422)
var2
-->(1358995195568422) 
```

我认为也许“读取时评估”意味着它会在我每次读取变量时进行评估，但我想我错了，准引用评估也不会这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T08:48:50.620

差异很重要的一个例子：

```
* (defun foo () `(,(get-internal-real-time)))
FOO
* (defun bar () '(#.(get-internal-real-time)))
BAR
* (foo)
(44577)
* (foo)
(47651)
* (bar)
(41929)
* (bar)
(41929) 
```

如您所见，当您不直接使用该值时（如本`(setq var1 ...)`例所示），每次都会扩展准引号，返回不同的值。但是，使用读取时评估，它只被调用一次，一次又一次地返回相同的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T09:04:24.500

如果您想单独查看读取时间效果，则使用 REPL 评估表单不是一个好主意。REPL 表示读取 EVAL 打印循环。每一段代码都将被读取、评估和打印。不只是阅读。

而是看到这个：

```
CL-USER > (read-from-string "`(,(get-internal-real-time))")
(LIST (GET-INTERNAL-REAL-TIME)) 
```

以上结果在一定程度上取决于实现，因为未定义反引号列表的读取版本。但效果是相似的：从 Lisp 阅读器返回的结果形式是`LIST`对子形式的调用（或等效形式）作为参数。

```
CL-USER > (read-from-string "'(#.(get-internal-real-time))")
(QUOTE (465370171)) 
```

上面在读取时执行表单并将值包含到表达式中，这是读取操作的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T04:42:57.480

“读取时评估”意味着每次读取代码本身时都会对其进行评估。当您输入`var2`REPL 时，您不会读取变量，而是访问它的值。因此，在您的情况下，两种形式都会产生相同的结果。

# android - 将原生操作栏转换为操作栏 Sherlock

> ID：14493178
> 
> 赞同：2
> 
> 时间：2013-01-24T02:57:07.493
> 
> 标签：android, android-intent, android-actionbar, actionbarsherlock

通常通过研究工作示例并将零碎的东西拼凑在一起，直到我了解一切是如何工作的，才能学得最好。我对`ActionBars`or没有太多经验`ABS`，但我找到了一个本地的工作演示`ActionBar`。我在这里找到：[https ://github.com/johannilsson/android-actionbar](https://github.com/johannilsson/android-actionbar)

我得到了这个演示`ABS library`并在 Eclipse 中启动并运行。我现在的问题是**如何将其转换为 ABS 操作栏或使用 ABS 重新创建等效项？（只是一个简单的入门 ABS 操作栏，我可以适应，其中有几个项目链接到不同的活动。）**

这是操作栏演示代码：

```
package com.markupartist.android.actionbar.example;

import com.markupartist.android.widget.ActionBar;
import com.markupartist.android.widget.ActionBar.Action;
import com.markupartist.android.widget.ActionBar.IntentAction;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class HomeActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final ActionBar actionBar = (ActionBar) findViewById(R.id.actionbar);
        //actionBar.setHomeAction(new IntentAction(this, createIntent(this), R.drawable.ic_title_home_demo));
        actionBar.setTitle("Home");

        final Action shareAction = new IntentAction(this, createShareIntent(), R.drawable.ic_title_share_default);
        actionBar.addAction(shareAction);
        final Action otherAction = new IntentAction(this, new Intent(this, OtherActivity.class), R.drawable.ic_title_export_default);
        actionBar.addAction(otherAction);

        Button startProgress = (Button) findViewById(R.id.start_progress);
        startProgress.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                actionBar.setProgressBarVisibility(View.VISIBLE);
            }
        });

        Button stopProgress = (Button) findViewById(R.id.stop_progress);
        stopProgress.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                actionBar.setProgressBarVisibility(View.GONE);
            }
        });

        Button removeActions = (Button) findViewById(R.id.remove_actions);
        removeActions.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {
                actionBar.removeAllActions();
            }
        });

        Button addAction = (Button) findViewById(R.id.add_action);
        addAction.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {
                actionBar.addAction(new Action() {
                    @Override
                    public void performAction(View view) {
                        Toast.makeText(HomeActivity.this, "Added action.", Toast.LENGTH_SHORT).show();
                    }
                    @Override
                    public int getDrawable() {
                        return R.drawable.ic_title_share_default;
                    }
                });
            }
        });

        Button removeAction = (Button) findViewById(R.id.remove_action);
        removeAction.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {
                int actionCount = actionBar.getActionCount();
                actionBar.removeActionAt(actionCount - 1);
                Toast.makeText(HomeActivity.this, "Removed action." , Toast.LENGTH_SHORT).show();
            }
        });

        Button removeShareAction = (Button) findViewById(R.id.remove_share_action);
        removeShareAction.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {
                actionBar.removeAction(shareAction);
            }
        });
    }

    public static Intent createIntent(Context context) {
        Intent i = new Intent(context, HomeActivity.class);
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        return i;
    }

    private Intent createShareIntent() {
        final Intent intent = new Intent(Intent.ACTION_SEND);
        intent.setType("text/plain");
        intent.putExtra(Intent.EXTRA_TEXT, "Shared from the ActionBar widget.");
        return Intent.createChooser(intent, "Share");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T03:29:36.547

ActionBarSherlock 是 API 14 和 15 操作栏的 API 完整反向移植，它是 Android 的一部分。

如果您是该库的新手，我建议您首先尝试学习如何使用本[机操作栏](http://developer.android.com/guide/topics/ui/actionbar.html)。只有在您熟悉使用它之后，才能切换到使用ABS。

切换将非常简单，因为它主要由以下三件事组成：

*   将一些导入（例如 , `ActionBar`）`MenuItem`从`android.app`to`com.actionbarsherlock.app`和`android.view`to更改为`com.actionbarsherlock.view`。
*   将主题从更改`Theme.Holo`为`Theme.Sherlock`（或`.Light`或`.Light.DarkActionBar`）
*   将您的活动更改为从而`SherlockActivity`不是扩展`Activity`。
*   将呼叫切换`getActionBar()`到`getSupportActionBar()`。

非常简单！

另外，应该注意的是，您的演示不是原生操作栏，而是第三方库，它模拟了内置到操作系统之前的操作栏。

# android - 数据库文本文件随机而不重复数据？

> ID：14493179
> 
> 赞同：0
> 
> 时间：2013-01-24T02:57:15.857
> 
> 标签：android, database, random

我想一次随机显示一个在txt文件中的数据库数据，并且不能重复数据。

```
private void question() {
    // TODO Auto-generated method stub

          InputStreamReader inputStream = new InputStreamReader
            (getResources().openRawResource(R.raw.question1));
            BufferedReader br = new BufferedReader(inputStream);

            //number of lines in the database numLines
            int numLines= 10;
            Random r = new Random();
            int desiredLine = r.nextInt(numLines);

            String theLine="";
            int lineCtr = 0;

            try {

                while ((theLine = br.readLine()) != null)   {

                if (lineCtr == desiredLine) {

                    StringTokenizer st = new StringTokenizer(theLine,",");
                    while(st.hasMoreTokens())
                     {   
                         //reading and getting data from the database","
                         String a = st.nextToken();
                         String b = st.nextToken();
                         String c = st.nextToken();
                         String d = st.nextToken();
                         String e = st.nextToken();
                         String f = st.nextToken();

                         //button setText
                         question.setText(a);
                         ca.setText(f);
                         firstbutton.setText(e);
                         secondbutton.setText(d);
                         thirdbutton.setText(b);
                         fourthbutton.setText(c);
                     //assigning
                         firstholder =e;
                         secondholder =d;
                         thirdholder=b;
                         fourthholder =c;

                         break;
                     }

                  }
                  lineCtr++;

                 }

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 

} 
```

# c# - 为什么我不能从 JArray 中删除元素？

> ID：14493181
> 
> 赞同：1
> 
> 时间：2013-01-24T02:57:26.823
> 
> 标签：c#, json, json.net

我从 HTTP 流中获取一个 json 对象。`JObject`我使用以下内容创建一个：

```
var stream = await client.GetStreamAsync(uri);
var root = JToken.Load(new JsonTextReader(new StreamReader(stream))); 
```

这给了我正确的回应。但现在，我想删除其`results`属性的最后一个元素，即数组 ( `JArray`)。我使用这段代码：

```
var results = (JArray)root["results"];
var last = results.Last();              // gets the last element -- correct
var removed = results.Remove(last);     // removed = false and last not removed
var another = last.Remove();            // doesn't work either 
```

我能够使用以下方法从对象本身中删除一个`secret`属性：`root`

```
var removed = ((JObject)root).Remove("secret"); // removed = true, works 
```

我也可以向`results`数组中添加元素，但由于某种原因，我无法删除它们。**我错过了什么？**

**编辑**：在我的头撞到墙上几个小时并写了这篇文章之后，我发现了发生了什么。上面的代码是我实际代码的简化版本。实际上，答案就是这种简化。原始代码稍微*缩写*了一点：

```
var last = root["results"].ToObject<JArray>().Last();
last.Remove();                                         // did not work 
```

关键是我被误叫了`ToObject<JArray>()`。这`remove()`很可能破坏了逻辑，因为新对象与原始对象不同`JArray`。因此，**发布的代码按预期工作**，我更新了我的代码也更简单。对不起这里的噪音。[橡皮鸭问题解决](http://www.codinghorror.com/blog/2012/03/rubber-duck-problem-solving.html)的完美例证

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:53:49.033

为了清楚起见，在此处重新发布：

在把我的头撞在墙上几个小时并写了这篇文章之后，我发现了发生了什么。上面的代码是我实际代码的简化版本。实际上，答案就是这种简化。原始代码稍微*缩写*了一点：

```
var last = root["results"].ToObject<JArray>().Last();
last.Remove();                                         // did not work 
```

关键是我打错了`ToObject<JArray>()`。这`remove()`很可能破坏了逻辑，因为新对象与原始对象不同`JArray`。因此，**发布的代码按预期工作**，我更新了我的代码也更简单。对不起这里的噪音。[橡皮鸭问题解决](http://www.codinghorror.com/blog/2012/03/rubber-duck-problem-solving.html)的完美例证 感谢 James NK 的快速响应（在 Twitter 上）和他的优秀库。就像杰夫阿特伍德[教](http://james.newtonking.com/projects/json-net.aspx)[我们](http://www.codinghorror.com/blog/2007/06/supporting-open-source-projects-in-the-microsoft-ecosystem.html)的那样，[不止一次](http://www.codinghorror.com/blog/2006/12/today-is-support-your-favorite-small-software-vendor-day.html)地通过捐赠来感谢他。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-11T18:05:21.667

您可以使用此函数从 JArray 中删除任何 obj（或 string/int/boolean）...

此函数有两个参数：
1）您要从中删除任何内容的 JArray。
2) 要从 JArray 中删除的动态（JObject 或字符串或整数或布尔值）变量。

此函数将返回更新的 JArray。

```
private static JArray RemoveValue(JArray oldArray, dynamic obj)
{
    List<string> newArray= oldArray.ToObject<List<string>>();
    newArray.Remove(obj); 
    return JArray.FromObject(newArray);
} 
```

# ruby - vlad 任务：更新后，符号链接前

> ID：14493184
> 
> 赞同：0
> 
> 时间：2013-01-24T02:57:48.647
> 
> 标签：ruby, rake, vlad-deployer

我们正在使用部署程序 vlad 来部署我们的 rails 应用程序。

目前，我们有一些在 vlad:update 任务之后运行的任务。这些任务需要几分钟。在这几分钟里，网站被破坏了。

我想在 vlad:update 中间运行这些任务——在它完成除了创建“当前”符号链接之外的所有操作之后。我怎么做？vlad:update 任务似乎是单一的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:08:28.713

找到了答案。将您的任务定义为在任务之前`update_symlinks`而不是在`update`任务之后运行。

```
remote_task :finish_deployment, :roles => :app do
  ...
end

remote_task :update_symlinks => :finish_deployment 
```

# python - 如何在 activepython 社区版上安装 networkx？

> ID：14493190
> 
> 赞同：0
> 
> 时间：2013-01-24T02:58:17.983
> 
> 标签：python, networkx, activepython

我正在尝试运行命令 easy_install networkx 来安装 NetworkX 包。当我这样做时，它会生成此错误消息： `SyntaxError: invalid syntax`. 是因为我使用的是免费的社区版 activepython 还是我犯了一个愚蠢的错误？

# c# - 使用 Async 时如何知道 Task 或 Void 方法是否仍在运行

> ID：14493191
> 
> 赞同：1
> 
> 时间：2013-01-24T02:58:29.550
> 
> 标签：c#, asynchronous, task, async-await, multitasking

我正在尝试使用异步和等待，我的问题是它不会等待后台进程完成。也许您想知道为什么我不同步运行应用程序？我正在尝试尽快完成我的部分任务，其余的可以等待，如本例所示。谢谢你们的帮助！=)

```
class Program
{
    static void Main(string[] args)
    {
        Run();
        //Problem or Maybe Not? Needs this 
        //So that my application won't close immediately
        Console.ReadLine();
    }

    private async static void Run()
    {
        Task<bool> TBool = ProcessRecords();

        if (await TBool)
        {
            //Problem #1 This Line Doesn't Show
            Console.WriteLine("End of Code");
            //SHould be safe to close the application by Now
            //But goes through here not waiting for the return
            //of the last process.

            Environment.Exit(0);

            //My temporary solution is to indicate a Task.Delay(80000)
            //to make sure that all the logging in the background
            //are all done. I dont know if there is a function that shows
            //that there are task running on the background or any 
            //other workaroung will help. =) thanks
        }

    }

    private async static Task<bool> ProcessRecords()
    {
        Task newTask = null;
        //Loop through all the records and send
        //all the records to MQ ASAP
        for (int x = 0; x < 10; x++)
        {
            //I wont wait for this Task so
            //I can send the next record
            newTask = SendToMQ(x);
        }
        //I only need to wait for the last Task to
        //indicate that I can exit the system
        //as soon as it finish
        //Problem #2 The Console.WriteLine doesnt show the last record.
        await newTask;
        return true;
    }

    private async static Task SendToMQ(int count)
    {
        //actual sending of message (Important)
        await Task.Delay(1000);
        //Process of Logging Connect to DB etc, (Not so Important, but takes most of the time)
        await LoggingRecord();
        Console.Clear();
        Console.WriteLine("Done Processing  " + count.ToString() + " records");
    }

    //Logging of each record
    private async static Task LoggingRecord()
    {
        await Task.Delay(5000);
        //Problem #3 This Line Doesn't Show
        Console.WriteLine("Last Log Finished");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:36:03.010

您应该尽可能使用 await：

```
await Run(); 
```

但是，在这种情况下你不能，所以你必须使用 Wait

```
static void Main(string[] args)
{
    Run().Wait();

    //Problem or Maybe Not? Needs this 
    //So that my application won't close immediately
    //Console.ReadLine();
}

// note the return type is Task
private async static Task Run()
{
...
} 
```

在 ProcessRecords() 你有以下行 - 我不太清楚你的意思，所以我没有解决它：

```
//Problem #2 The Console.WriteLine doesnt show the last record. 
```

以上打印出来

```
Done Processing  9 records
End of Code 
```

# javascript - 如何在 JavaScript 中编写需要输入的函数

> ID：14493193
> 
> 赞同：-4
> 
> 时间：2013-01-24T02:58:35.607
> 
> 标签：javascript, jquery, function

如何创建需要在 JavaScript 中输入的函数？

例子：

```
var a = 0;
var b;
function A(int myInteger){    //should it be something like var myInteger?
 // do something with myInteger
// print something or do a = myInteger;
}
function B(a){
// do something with recieved integer
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:14:58.210

`var`除了JS 中的一切都是 var之外，JavaScript 中没有数据类型。

因此，当传递变量时，也不需要提及 var 。只需在创建函数时传递您的值 .same 。只需提及变量名称。而已 。

所以

```
var a = 0;
var b;
function A(a){    //passing your varible 
 // do something with a
// print something or do a = myInteger;
}
function B(b){
//Ex :call function A here 
A(b);
} 
```

//干杯。

正如所有人所说..欢迎来到 JS 和 W3School。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:06:27.883

我建议你阅读一些 javascript 的初学者教程。

为了解决这个问题：

```
var a = prompt('Input something here:');
/* do something here with a */ 
```

然后访问此站点：[http](http://www.w3schools.com/js/default.asp) ://www.w3schools.com/js/default.asp并开始您的学习之旅。

# web-applications - 基于 Web 的基本应用程序的序列图

> ID：14493202
> 
> 赞同：1
> 
> 时间：2013-01-24T02:59:17.037
> 
> 标签：web-applications, uml, sequence-diagram

我正在尝试为使用 TomCat 作为本地主机运行的基于 Web 的应用程序创建序列图。

该应用程序使用户能够在文本框中输入文本并将其保存到 TomCat 内的目录中。

我无法为此定义对象。

到目前为止，我有“ACTOR-CreateText.jsp-Application Server”

事件顺序如下：

1.  用户加载应用程序
2.  用户选择创建文本按钮
3.  创建返回给actor的文本网页
4.  用户输入文本并推送点击保存文本文件
5.  文件保存到应用服务器
6.  确认消息返回给演员

如何在序列图上显示这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:28:07.367

定义![](../Images/1c2ee3a90a8cdfb602a284f2cf584547.png)“演员”时，您应该知道该定义

> **Actor**对与主体交互（例如，通过交换信号和数据）的实体所扮演的角色类型进行建模，但在主体外部（即，在某种意义上，Actor 的实例不是主体的一部分）其对应主题的实例）。参与者可以代表人类用户、外部硬件或其他主体所扮演的角色。请注意，参与者不一定代表特定的物理实体，而只是与相关用例的规范相关的某个实体的特定方面（即“角色”）。因此，单个物理实例可能扮演多个不同角色的角色，相反，给定角色可能由多个不同实例扮演

在您的系统中，我们可以说演员是`( User, Web browser, Web server (Application, Content database) )`.

我们的下一步将定义我们的演员之间的![](../Images/f30ccac968429961e0878bd12f5c59d1.png)“呼叫消息”和![](../Images/58b6c4d47281efb79f67d1a108db95df.png)“返回消息”。

> **消息**定义了交互生命线之间的特定通信。

根据您提到的事件，我们将尝试对其进行更多分解以更好地解释它们。

> 1.  用户加载应用程序。
>     *   [用户] ----“RequestResource()”---> [Web 浏览器]
>     *   [Web 浏览器]----“RequestAccessForUser()”---> [Web 服务器]
>     *   [Web 服务器] ------"CheckUserExists()"-----> [内容数据库]
>     *   [内容数据库] ---"Exists Return Message" ----> [Web Server] *- 继续向用户返回响应并在他的浏览器上加载您的页面。*

在这里您可以发现用户没有注册的可能性，然后有一个叫做![](../Images/02caf4cafde084a1b76a61c407294c35.png)“替代路径”的东西。

当然，您可以通过减少参与者数量来最小化步骤，但对于学习和简单来说，这将是一个非常好的解决方案。以下是一些示例和教程肯定会有所帮助。

[编写您的第一个序列图的视觉范式介绍](http://www.visual-paradigm.com/VPGallery/diagrams/Sequence.html)

[序列图示例](http://www.uml-diagrams.org/sequence-diagrams-examples.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:57:03.653

由于 Web 应用程序是使用 HTTP 请求/响应对构建的，我发现它有助于在序列图中捕获这一点。它还有助于考虑您为每个请求发出的 HTTP 命令的类型 - GET、POST 等，以及哪些请求需要身份验证或状态。在应用程序使用状态码的地方——例如“重定向”或“需要身份验证”，我也喜欢包含这些。

我通常不会在这个过程中为用户建模——重点通常不是为用户交互建模（他们点击了哪些按钮等）；但是，我确实包含了在浏览器中执行的相关 JavaScript 函数（例如“WaitForInput()”）。

因此，对于您的示例，它可能类似于：

```
Browser: GET index.jsp -> ServletContainer
ServletContainer: 200: index.jsp ->Browser
Browser: GET enterText.jsp -> ServletContainer 
ServletContainer: 200: enterText.jsp -> Browser
Browser: POST: enterText.jsp(text) -> ServletContainer
ServletContainer: validateEntry() -> ServletContainer
if(valid)
  ServletContainer: 200: success.jsp(fileName) -> Browser
else
  ServletContainer: 501: fail.jsp(reason)
endif 
```

# java - 创建双向链表但无法打印结果

> ID：14493203
> 
> 赞同：1
> 
> 时间：2013-01-24T02:59:17.543
> 
> 标签：java

```
/**This class implements a doubly linked list of characters in Java. 
 * The instance variables head and tail are initially null. 
 * As elements are added head points to the first element on the
 * list and tail points to the last element. 
 * Each node on the list is of type DoubleNode. 
 * Each DoubleNode holds a pointer to the previous 
 * node and a pointer to the next node in the list.
 * @param head       Keeps track of the first node of the list. Null if nothing.
 * @param tail       Keeps track of the last node of the list. Null if nothing.
 */    

public class DoublyLinkedList {

        //data field
        DoubleNode head;
        DoubleNode tail;

        /**Constructor
         * Precondition: The object to be created is casted as DoublyLinkedList
         * Postcondition:Constructs a new DoublyLinkedList object with head and        
               tail as null
             * Best case and worst case are the same: theta(1)
             * Afterwards a new null list comes into existence
             */
        public DoublyLinkedList(){
            head = null;
            tail = null;
        }

        /**Mutator
         * @param c  The character to be added
         * Precondition: The character is an uppercase 
         * or lowercase letter (in the range 'A' ... 'Z' or 'a' ... 'z') 
         * Postcondition:A character node containing the character 
         * c will be added to the end
         * Best case and worst case are the same: theta(1)
         */
        public void addCharAtEnd(char c){
            if(this.isEmpty()) {//When no node in list so far
                head = new DoubleNode(null,null,c);
                tail = head;
            }
            else{//More than one node exist(s)
              DoubleNode endNode = new DoubleNode(tail,null,c);
              tail.setNext(endNode);
              tail = endNode;
            }

        }

        /**Deletes the first occurence of the character c from the list
         * @param c the character want to find and then deleted
         * @return True if a deletion occurred and false otherwise
         * Precondition: The character is an uppercase 
         * or lowercase letter (in the range 'A' ... 'Z' or 'a' ... 'z') 
         * Postcondition:Afterwards the list will abandon the first occurence of
         * the character c from the list or won't change(if c not presented)
         * Best case: O(1)(theta(1),when node containing c happens to be the head) 
         * Worst case: went over the whole list. Theta(n)
         * Average: theta(n)
         */
        public boolean deleteChar(char c){
        if(isEmpty()) return false;
        else {
            for(DoubleNode current = head; current != null; current = `enter code here`current.getNext()){
                if(current.getC() == c){
                    if(current == head && tail != null){//More than one `enter code here`node and the node to be deleted is the head
                        head = head.getNext();
                        head.setPrev(null);
                        }

                    if(current == head && tail == null){//There is only `enter code here`one node
                        head = tail = null;

                    }
                    if(current == tail){//More than one node and the `enter code here`node to be deleted is the tail
                      tail  = tail.getPrev();
                      tail.setNext(null);
                    }
                    else{//The node is between two more nodes in the list
                        DoubleNode previous = current.getPrev();
                        current.getNext().setPrev(previous);
                        previous.setNext(current.getNext());

                    }
                }
                    return true;

            }
            return false;//After looping still nothing found
        }
        }

        /**Mutator
         * Precondition: The character is an uppercase 
         * or lowercase letter (in the range 'A' ... 'Z' or 'a' ... 'z') 
         * Postconditions: a character node containing the 
         * character c will be added to the start
         * @param c  The character to be added
         * Best case and worst case are the same: theta(1)
         */
        public void addCharAtFront(char c){
            if(this.isEmpty()) {
                head = new DoubleNode(null,null,c);
                tail = head;
            }
            else{
             DoubleNode newHead = new DoubleNode(null,head,c);
             head.setPrev(newHead);
             head = newHead;

        }
        }

        /**Count the nodes in the list
         * Precondition: The instance used to invoke the method exists
         * Postcondition: Return the int number of the node in that
         * instance, leaving everything unchanged.
         * @return the number of nodes
         * Could be no cases(nothing in list)
         * If there are node(s)Best and Worst case: theta(n)(go over the list)
         */
        public int countNodes(){
            int counter = 0;
            for(DoubleNode current = this.head; current != null; current = `enter code here`current.getNext()){
                counter++;
            }
            return counter;
        }

        /**Remove and return the character at the beginning of the doubly linked list.
         * Precondition: The instance used to invoke the method exists and 
         * there is at least one node in the instance(if not, returning ']')
         * Postcondition: Remove and return the character at the beginning 
         * of the doubly linked list
         * @return the character stored in the deleted node
         * Best and worst case: theta(1)
            */
            public char removeCharFromFront(){
                char c;
                if(isEmpty()) {
                    System.out.println("Empty list, returning ']'");
                    return ']';
                }
                else {
                    if(head == tail){//There is only one node
                        c = head.getC();
                        head = null;
                        tail = null;
                        return c;

                    }
                    else{
                        c = head.getC();
                        head = head.getNext();
                        head.setPrev(null);// line 156?
                        return c;
                    }
                }

            }

        /**Remove and return the character at the end of the doubly linked list
         * Precondition: The instance used to invoke the method exists and
         *  there is node in the instance(if not, returning ']')
         * Postcondition: Remove and return the character at the end of the 
         * doubly linked list.
         * @return the character stored in the deleted node
         * Best and worst case: theta(1)
            */
            public char removeCharAtEnd(){
                char c;
                if(isEmpty()) {
                    System.out.println("Empty list, returning ']'");
                    return ']';
                }
                else {
                    if(head == tail){//There is only one node
                        c = head.getC();
                        head = null;
                        tail = null;
                        return c;

                    }
                    else{
                        c = tail.getC();
                        tail.getPrev().setNext(null);
                        tail = tail.getPrev();
                        return c;
                    }

                }
            }

        /**Check if the list is empty
         * Precondition: The instance used to invoke the method exists
         * Postcondition: Returns true if the list is empty false otherwise,
         * leaving everything unchanged
         * @return true if the list is empty false otherwise
         * Best and worst case: Theta(1)
         */
        public boolean isEmpty(){
            if(head == null)
            return true;
            else return false;
        }

        /**Reverse the whole list by changing the pointer
         * Precondition: The instance used to invoke the method exists
         * Postcondition: The whole list will be reversed
         * Could be no cases
         * Best and worst is theta(n)
         */
        public void reverse(){
            if(isEmpty())
                System.out.println("No node in the list");
            else{
                DoubleNode newTail = head;
                head = tail;

                for (DoubleNode current = tail; current != null; current = `enter code here`current.getPrev()){
                        current.setNext(current.getPrev());
                        current.setPrev(current.getNext());
                    }
                tail = newTail;

                }

                }

        /**toString methods overriding the one in java.lang.object
         * Precondition: The instance used to invoke the method exists
         * Postcondition: return the characters in list as String, leaving
         * everything else unchanged.
         * @return the String expression of the characters stored in the list
         * Best case and worst case are the same: theta(n)
         */

        public String toString(){
            StringBuffer sb = new StringBuffer();
            if(isEmpty())
                return new String("No node in the list");
            DoubleNode current = new DoubleNode();
            for(current = this.head; current != null; current = `enter code here`current.getNext()){
                sb.append(String.valueOf(current.getC()));
                System.out.println(sb);

            }
            System.out.println(sb);
            return new String(sb);
        }

        /**Test the DoublyLinkedList class
         * @param args command-line arguments 
         * Initiate two nodes using different constructor. Test the above 
         * method.
         */
    public static void main(String a[]) {

            DoublyLinkedList list = new DoublyLinkedList();
            list.addCharAtEnd('H');
            list.addCharAtEnd('e');
            list.addCharAtEnd('l');
            list.addCharAtEnd('l');
            list.addCharAtEnd('o');
            System.out.println(list);
            System.out.println("Deleting l");
            list.deleteChar('l');
            System.out.println(list);
            System.out.println("Deleting H");
            list.deleteChar('H');
            System.out.println(list);
            System.out.println("Deleting o");
            list.deleteChar('o');
            System.out.println(list);
            System.out.println("Deleting e");
            list.deleteChar('e');
            System.out.println(list);
            System.out.println("Deleting l");
            list.deleteChar('l');
            System.out.println(list);
            list.addCharAtFront('o');
            list.addCharAtFront('l');
            list.addCharAtFront('l');
            list.addCharAtFront('e');
            list.addCharAtFront('H');
            System.out.println(list);

            System.out.println(list.countNodes());

            System.out.println("Popping everything");
            while(!list.isEmpty()){
                System.out.println(list.removeCharFromFront());//line 294?
            }

            list.addCharAtFront('o');
            list.addCharAtFront('l');
            list.addCharAtFront('l');
            list.addCharAtFront('e');
            list.addCharAtFront('H');

            System.out.println("Popping everything from the end");
            while(!list.isEmpty()){
                System.out.println(list.removeCharAtEnd());
            }
            System.out.println(list.countNodes());

            list.addCharAtEnd('o');
            list.addCharAtEnd('l');
            list.addCharAtEnd('l');
            list.addCharAtEnd('e');
            list.addCharAtEnd('H');

            list.reverse();
            System.out.println(list);

            list.reverse();
            System.out.println(list);

        }

    }

    public class DoubleNode {
        // data field
        private DoubleNode p;
        private DoubleNode n;
        private char c;

        /**
         * Constructor with parameters to initialize instance variables with given p, c, n
         * Preconditions: p, c, n should be casted correctly to be the right instances
         * Postcondition: Afterwards generates a new node with double pointers 
         * Best case and worst case are the same: theta(1)
         */
        public DoubleNode(DoubleNode initialp, DoubleNode initialn, char initialc) {
            DoubleNode p = initialp;
            DoubleNode n = initialn;
            char c = initialc;
        }

        /**Constructor without parameters
         * Precondition: Initialize instance variables with unspecified value
         * So no pre.
         * Postcondition: A new node with null pointers come into existence
         * Best case and worst case are the same: theta(1)
         */
        public DoubleNode() {
            this.p = null;
            this.n = null;
        }
        /**Access to get the reference to previous node in specific node
         * @return the reference to the previous node. Null if nothing
         * Precondition: the instance used to invoke the method does exist
         * Postcondition: Return the previous pointer in current instance while doesn't change the node
         * Best case and worst case are the same: theta(1)
         */
        public DoubleNode getPrev() {
            return p;
        }

        /**Mutator to change the pointer pointing the previous node
         * @param p the value of new previous pointer of that node
         * Precondition: the instance used to invoke the method does exist. n is `enter code here`created to be DoubleNode.
         * Postcondition: Set the previous pointer in Node while leave other things `enter code here`the same. 
         * Best case and worst case are the same: theta(1)
         */
        public void setPrev(DoubleNode p) {
            this.p = p;
        }

        /**Access to get the reference to next node in specific node
         * @return the reference to the next node. Null if nothing
         * Precondition: the instance used to invoke the method does exist
         * Postcondition: Return the next pointer in current instance while doesn't change the node
         * Best case and worst case are the same: theta(1)
         */
        public DoubleNode getNext() {
            return n;
        }

        /**Mutator to change the pointer pointing the next node
         * @param n the value of new next pointer of that node
         * Precondition: the instance used to invoke the method does exist. n is `enter code here`created to be DoubleNode
         * Postcondition: Set the next pointer in Node while leave other things the `enter code here`same. 
         * Best case and worst case are the same: theta(1)
         */
        public void setNext(DoubleNode n) {
            this.n = n;
        }

        /**Access to get the character in specific node
         * @return the character in the node
         * Precondition: the instance used to invoke the method does exist
         * Postcondition: Return the character in current instance while doesn't `enter code here`change the node
         * Best case and worst case are the same: theta(1)
         */
        public char getC() {
            return c;
        }

        /**Mutator to change the character in specific node
         * @param c the value to be changed to
         * Precondition: the instance used to invoke the method does exist. The `enter code here`character is an uppercase 
         * or lowercase letter (in the range 'A' ... 'Z' or 'a' ... 'z') 
         * Postcondition: Reset the character in the Node while leave pointers the `enter code here`same
         * Best case and worst case are the same: theta(1)
         */
        public void setC(char c) {
            this.c = c;
        }

        /**toString methods overriding the one in java.lang.object
         * @return the String expression of the character stored in the node
         * Precondition: the instance used to invoke the method does exist
         * Postcondition: return the character as String in the node while dosen't `enter code here`change anything else
         * Best case and worst case are the same: theta(1)
         */
        public String toString() {
            return String.valueOf(c);
        }

        /**Test the DoubleNode class
         * @param args command-line arguments 
         * Initiate two nodes using different constructor. Test the methods above
         */
        public static void main(String[] args){
            DoubleNode dllNode = new DoubleNode();
            StringBuffer test = new StringBuffer();
            System.out.println("Test: "+dllNode);
            dllNode.setC('H');
            dllNode.setNext(null);
            dllNode.setPrev(null);
            System.out.println("Test2: "+dllNode);

        }

    } 
```

结果应该是：
Hello
Deleting l
Helo
Deleting H
elo
Deleting o
el
Deleting e
l
Deleting l
No node in the list
Hello
5
Popping everything
H
e
l
l
o
Popping everything from the end
o
l
l
e
H
0
Hello
olleH

但是我无法打印出链表，而且还有如下错误：

```
Exception in thread "main" java.lang.NullPointerException
at DoublyLinkedList.removeCharFromFront(DoublyLinkedList.java:156)
at DoublyLinkedList.main(DoublyLinkedList.java:294) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:30:09.423

我不会为你修复这个作业问题中的错误，因为如果我给你解决方案你不会学习，但这里有一些建议：

1.  `addCharAtEnd`有注释表明，如果列表不为空，则必须存在多个节点。单节点列表真的不允许吗？
2.  请只需将 的主体更改`isEmpty`为`return head == null;`。没有理由使用 if 语句对布尔表达式进行测试，然后返回该表达式的确切值。
3.  您应该添加一个遍历链表的方法，确保所有指针都正确（之前的节点`head`是`null`，之后的节点`tail`是`null`，如果A的下一个节点是B，那么B的前一个节点是A），并打印列表中的字符。然后，您应该在每个改变（即更改）列表的方法之后添加对该方法的调用。或者，您可以在调试器中单步执行您的代码，并在每次操作后检查列表。在你提交作业后取消调用，但是像这样的跟踪打印可能是一种有用的调试技术。当然，在某些情况下，有些技术比跟踪打印更好，而且跟踪打印可以改变系统的行为，但在这种情况下它完全没问题。

当您成为更好的程序员时，第三个非常重要。能够调试您的代码，并将您的假设与实际发生的情况进行比较，将帮助您找到很多错误。此外，尝试边缘情况（奇怪的、奇怪的或意外的输入），看看你的代码是否能很好地处理它们。您应该研究单元测试框架，例如[JUnit](http://junit.sourceforge.net/)，作为一种几乎自动发现错误的方法。JUnit 是一个很好的框架，它甚至内置在[Eclipse](http://eclipse.org/)中，使其更加方便。

# python - __hash__ 的返回值是如何使用的？

> ID：14493204
> 
> 赞同：3
> 
> 时间：2013-01-24T02:59:18.563
> 
> 标签：python, hash, key

假设我写了一个类，但没有`__hash__`为它定义一个类。然后根据[文档](http://docs.python.org/2/reference/datamodel.html#object.__hash__)`__hash__(self)`默认为`id(self)`(的内存地址) 。`self`

但是我没有在文档中看到如何使用这个值。
因此，如果 my is `__hash__`simple `return 1`，这将导致我的类的所有实例的哈希相同，它们都会被分桶到相同的底层哈希桶中（我假设它是用 C 实现的）。但是，这并不意味着 的返回值`__hash__`被用作在这个底层哈希表中对元素进行 bin 的键。
所以真的，我的问题是：返回的值会发生什么`__hash__`？它是直接用作键，还是它的散列（或对其执行的一些其他计算的结果）用作散列表的键？

万一这很重要，我在 python2.7

**编辑**：为了澄清，我不是在问如何处理哈希冲突。在 python 中，[这似乎是通过线性链接完成的](https://stackoverflow.com/a/13001957/198633)。相反，我问的是如何将返回值`__hash__`转换为相应存储桶的内存地址（？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:28:20.893

由于 Python 的哈希表的大小是 2 的幂，因此哈希值的低位决定了哈希表中的位置（或至少是初始探测的位置）。

对大小为*n*的表的探测序列由下式给出：

```
def gen_probes(hashvalue, n):
    'Same sequence of probes used in the current dictionary design'
    mask = n - 1
    PERTURB_SHIFT = 5
    if hashvalue < 0:
        hashvalue = -hashvalue
    i = hashvalue & mask
    yield i
    perturb = hashvalue
    while True:
        i = (5 * i + perturb + 1) & 0xFFFFFFFFFFFFFFFF
        yield i & mask
        perturb >>= PERTURB_SHIFT 
```

例如，字典：

```
d = {'timmy': 'red', 'barry': 'green', 'guido': 'blue'} 
```

存储为大小为 8 的数组，每个条目的形式为`(hash, key, value)`：

```
entries = [['--', '--', '--'],
           [-8522787127447073495, 'barry', 'green'],
           ['--', '--', '--'],
           ['--', '--', '--'],
           ['--', '--', '--'],
           [-9092791511155847987, 'timmy', 'red'],
           ['--', '--', '--'],
           [-6480567542315338377, 'guido', 'blue']] 
```

在 Python 字典中插入键的 C 源代码可以在这里找到：http: [//hg.python.org/cpython/file/cd87afe18ff8/Objects/dictobject.c#l550](http://hg.python.org/cpython/file/cd87afe18ff8/Objects/dictobject.c#l550)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:02:08.037

当一个对象存储在字典中时，`__hash__`用于确定该对象所在的原始 bin。但是，这并不意味着一个对象会与字典中的另一个对象混淆——它们仍然会检查对象是否相等。这只是意味着字典在散列该类型的对象时会比其他对象慢一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T03:10:17.460

当然在逻辑上（从*使用*哈希表的代码来看）对象本身就是关键。如果在哈希表中搜索key `"foo"`，无论哈希表中的其他哪些对象具有与 相同的哈希值`"foo"`，只有在哈希表中存储的键值对之一的键等于`"foo"`.

我不确切知道*Python*做了什么，但哈希表实现必须考虑哈希冲突。如果哈希表数组有`N`槽，那么如果你插入`N + 1`值（并且表没有首先调整大小），那么肯定会发生冲突。此外，正如您提到的 where`__hash__`始终返回 1 的情况，或者只是作为散列函数实现的一个怪癖，可能有两个对象具有完全相同的散列码。

有两种主要策略用于处理内存中单个机器的哈希表中的哈希冲突（用于分布式哈希表的不同技术等）：

1.  数组中的每个槽都是一个列表（通常是一个链表），所有散列到`k`模的值`N`都放在槽的列表中`k`。因此，如果散列值发生冲突，这不是问题，因为具有相同散列值的两个对象最终都在同一个列表中。
2.  某种探测方案。基本上，如果您要插入的对象的哈希值等于`k`modulo `N`，则查看 slot `k`。如果它已满，则将一些公式应用于当前位置（可能只是添加 1），然后查看下一个插槽。您按照常规模式选择下一个插槽，给定原始哈希值和到目前为止的探测次数，并继续探测直到找到一个开放的插槽。这很少使用，因为如果您对您的实现不小心，您可能会遇到集群问题，即在找到对象之前必须进行多次探测。

[Wikipedia在这里](http://en.wikipedia.org/wiki/Hash_table)讨论了更多关于哈希表实现的内容。

# r - 在 R 中选择满足某些条件的文件名

> ID：14493205
> 
> 赞同：2
> 
> 时间：2013-01-24T02:59:20.530
> 
> 标签：r

我在一个目录中存储了许多文件，但我只需要其中的一些。我需要的文件都包含`transcript_counts`，所以我在想是否`R`有一个功能可以帮助我用`transcript_counts`. 例如，通过使用`dir()`我可以看到文件名列表：

```
 [1] "xx1_sequence_alignment.csv"  
 [2] "xx2_sequence_transcript_counts.csv"
 [3] "xx3_sequence_alignment.csv"  
 [4] "xx4_sequence_transcript_counts.csv"
 [5] "xx5_sequence_alignment.csv" 
```

现在我想要一个仅包含 , 的列表`xx2_sequence_transcript_counts.csv`，`xx4_sequence_transcript_counts.csv`以此类推`transcript_counts`作为标识符。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T03:00:53.757

使用`pattern`论据

```
dir(pattern="transcript_counts") 
```

从`?dir`

> 模式：可选的正则表达式。仅返回与正则表达式匹配的文件名。

* * *

如果您已经有一个字符向量，您可以使用它`grep`来获取您想要的元素。

```
x <- dir()
grep("transcript_counts", x, value=TRUE) 
```

# jquery - 如何在 jQuery 中定位 :active 伪类？

> ID：14493213
> 
> 赞同：1
> 
> 时间：2013-01-24T02:59:56.503
> 
> 标签：jquery, css

我正在寻找 :active jQuery 中的伪类。基本上当激活状态时，我想要一个简单的动画发生。有没有办法像在 CSS 中那样定位 ":active" ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T03:02:21.250

在 JavaScript 中没有办法做到这一点，但您可以将动画绑定到会导致元素被考虑的事件`:active`，即`click`：

```
$(element).on('click', function () { /* anmiation * / }); 
```

动画也可以通过 CSS 实现，您可以`:active`直接使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:07:25.407

对于输入，我认为这将是您想要的

```
$(":input").focusin(function() { .... });
$(":input").focusout(function() { .... }) 
```

# python - 在 Python 类中将库值从父级覆盖到子级

> ID：14493217
> 
> 赞同：0
> 
> 时间：2013-01-24T03:00:25.353
> 
> 标签：python, class, dictionary

我正在尝试设计一个在库中具有多个分配属性的父类。

```
class CC():
    Features = {"1" : "", "2" : ""}

class F(CC):
    Features["1"] = { key : value } 
```

当我尝试覆盖该类的子字典中的元素（使用子字典）时，它给了我：

```
Traceback (most recent call last):
  File "C:\Python27\Rough\Starting UP\AttributeInput.py", line 7, in <module>
    PersonClass = Fighter()
  File "C:\Python27\Rough\Starting UP\CharClass.py", line 45, in __init__
    classFeatures["1"] = {"Bonus Feat" : "Select a free feat from Fighter List"} 
NameError: global name 'classFeatures' is not defined 
```

在全局中声明字典似乎是一个糟糕的主意，那么如何在不将“功能”的键分解为它们自己的特定值的情况下覆盖特定元素呢？

**编辑如下评论**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:06:59.153

您无法访问类定义中的超类属性，因为该类尚未定义（仍在定义中），因此它还不知道其超类是什么。另外，请注意，如果您可以访问它们（或者如果您通过执行显式访问它们`CC.Features`），您将修改 dict in `CC`，而不是创建新 dict in `F`。因此，您的更改`F`会影响`CC`，这几乎肯定不是您想要的。

一种方法是使用类装饰器在定义类后对其进行修改，例如通过将其`Features`值与其超类的值合并。这也可以通过元类来完成。

那是假设您实际上想`Features`成为一个类属性。从您的示例中不清楚，但在许多情况下，将其设为实例属性可能会更好，在这种情况下，您将在`__init__`.

也许您可以提供更多关于您如何使用该`Feature`属性以及您希望用它完成什么的信息。

# python - 使用python将十六进制写入文件

> ID：14493221
> 
> 赞同：4
> 
> 时间：2013-01-24T03:01:30.393
> 
> 标签：python, file, encoding, hex

我正在尝试创建一堆包含相应十六进制值的二进制文件

```
for i in range(2**8):
    file = open("test" + str(i) + ".bin", "wb")
    file.write(hex(i))
    file.close() 
```

不幸的是，我的计数器转换为十六进制的文本表示似乎被写入文件而不是实际的十六进制值。有人可以更正此代码吗？我确定问题出在`hex(i)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T03:12:08.100

如果您希望以二进制形式写入值，请使用*chr()*从*i*创建字符：

```
for i in range(2**8):
    with open("test" + str(i) + ".bin", "wb") as f:
        f.write(chr(i)) 
```

# java - 如何将所有值保存在内存中，并使用命令检查它们，就像在 Matlab 中调试一样

> ID：14493226
> 
> 赞同：2
> 
> 时间：2013-01-24T03:02:07.530
> 
> 标签：java, c++, debugging, matlab, memory

我已经使用 Matlab 多年了，就像在其中调试的方式一样，所有值都存储在内存中，当您需要检查一个时，只需在命令窗口中输入即可。

但是，在 C++ 和 Java 中，那些未打印或未在控制台中给出的数据在执行后将无法看到。是否有一些开发环境可以让我像 Matlab 一样调试 Java 和 C？

谢谢，杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:32:53.810

我已经使用 Java 多年了。在 IDEA、Eclipse、Netbeans 等 java ide 中，您可以放置​​一个断点来查看内存中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:30:25.933

我假设您指的是调试`mex`文件（C++ 编译的 Matlab 函数）。

即使在您的 C/C++ 模块中，您仍然可以访问 Matlab 的环境（可从命令行获得的变量）。我通常做的是从 mex C 代码中编写临时变量，以便以后分析数据并了解函数的内部工作。

C 函数[mexPutVariable](http://www.mathworks.com/help/matlab/apiref/mexputvariable.html)可以与第一个参数“base”（或“caller”）一起使用，以创建一个 Matlab 数组，该数组在 mex 完成处理后可从命令行使用。

# javascript - 使用 webkit 构建站点

> ID：14493227
> 
> 赞同：-1
> 
> 时间：2013-01-24T03:02:12.187
> 
> 标签：javascript, html, css

我是 Web 开发的新手，想设计我的第一个网站以兼容台式机和所有移动设备。我看到另一个站点的源代码似乎做得很好，他们正在使用某种“屏幕 webkit”。

我想知道这是某种可以在网上找到的 CSS 吗？有人可以向我解释他们在使用图片中发布的这些“webkits”做什么吗？有人对他们在这里做什么有什么建议吗？

我也想这样做。

谢谢！

![在此处输入图像描述](../Images/5144ed2240524b894fec8c8cc4f43e6e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:08:27.277

Webkit 是一个渲染引擎。Safari、Chrome、Mobile Safari 和 Android 浏览器都使用它。

你有一个带有媒体查询的样式表。样式表仅适用于满足任何这些条件的浏览器。

# c# - 在一个场景中渲染多个对象 DirectX C#

> ID：14493230
> 
> 赞同：2
> 
> 时间：2013-01-24T03:02:27.457
> 
> 标签：c#, directx, direct3d

我对directX并不是真的不了解，但我会尽力解释。首先，我有多个模型对象（带有顶点数据的自定义对象）。目前，我的代码（见下文）可以使用该模型的 vertexBuffer 和 indexBuffer 在场景中渲染单个模型。我想做的是给定一系列模型。将它们全部渲染在一个场景中。这是我当前的代码：

```
 private void Render()
    {
        device.Clear(ClearFlags.Target | ClearFlags.ZBuffer, Color.White, 1.0f, 0);
        device.BeginScene();

        float x = (float)Math.Cos(0);
        float z = (float)Math.Sin(0);
        device.Transform.Projection = Matrix.PerspectiveFovLH((float)Math.PI / 4, this.Width / this.Height, 1f, 50f);
        device.Transform.View = Matrix.LookAtLH(new Vector3(x, 6, z), new Vector3(0, 0, 0), new Vector3(0, 1, 0));
        device.RenderState.Lighting = true;
        device.Lights[0].Type = LightType.Directional;
        device.Lights[0].Diffuse = Color.White;
        device.Lights[0].Direction = new Vector3(-x, -6, -z);
        device.Lights[0].Position = new Vector3(x, 6, z);
        device.Lights[0].Enabled = true;

        device.Transform.World = model.transform;

        device.VertexFormat = CustomVertex.PositionNormalColored.Format;
        device.SetStreamSource(0, vertexBuffer, 0);
        device.Indices = indexBuffer;

        device.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0, model.getVertices().Length, 0, model.getIndices().Length / 3);

        device.EndScene();
        device.Present();
    }

    public void RenderModel(Model model)
    {
        this.model = model;
        vertexBuffer = new VertexBuffer(typeof(CustomVertex.PositionNormalColored), model.getVertices().Length,
                                    device, Usage.Dynamic | Usage.WriteOnly, CustomVertex.PositionNormalColored.Format, Pool.Default);
        vertexBuffer.SetData(model.getVertices(), 0, LockFlags.None);

        indexBuffer = new IndexBuffer(typeof(ushort), model.getIndices().Length, device, Usage.WriteOnly, Pool.Default);
        indexBuffer.SetData(model.getIndices(), 0, LockFlags.None);

        Render();
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T08:49:39.837

tl;博士;

您可以简单地`RenderModel`循环调用。但是，为了获得更好的性能，您可能希望*按更新频率对操作进行排序*，*始终处置不需要的资源*并且*不要保留相同数据的多个副本*。

* * *

好吧，使用您的设置渲染多个对象的简单方法如下所示：

```
foreach (var model in models)
{
    RenderModel(model);
} 
```

我说天真，因为有很多事情我会先解决。

# 提高性能

实时 3D 应用程序都与良好的性能有关。为了实现它，您必须非常小心执行昂贵任务的频率。例如，在*每次*调用该`RenderModel`方法时，您都在创建一个新的顶点和索引缓冲区。（我想这会发生在每一帧？）此外，效果状态（如视图/投影矩阵和照明）将为每个模型单独设置，即使它们可能在整个帧中保持不变。

## 按更新频率分离效果状态。

识别昂贵的操作（设置/创建着色器、常量、缓冲区；大致上任何使用 GraphicsDevice 的操作）并考虑它们需要多久更改一次。为了获得最佳性能，请不要更频繁地执行此操作。例子：

*   **网格的顶点缓冲区：**如果网格不是动态的并且顶点在一段时间内不会更改（或根本不更改），则顶点缓冲区将始终包含相同的数据。当您加载网格然后一遍又一遍地重用它时，创建它就足够了。（也适用于索引缓冲区。）*（更新频率：每级一次）*

*   **设置光照、视图和投影矩阵：**光照通常在一帧内保持不变。相机矩阵也是如此。在帧的开头设置一次，你就完成了。*（更新频率：每帧一次）*

*   **绑定纹理：**通常场景中有不同的*材质*，与各个模型相关联。大多数情况下，材质属于多个对象（因为您将它们的纹理组合在一个大纹理贴图中）。因此，为所有使用它的网格绑定一次这些纹理和常量将节省最多的 GPU 容量。*（更新频率：每种材料一次）*

*   **绑定顶点和索引缓冲区：**顶点和索引数据对于网格通常是唯一的。因此，如果您的场景中有多个网格，则在完成一个网格后立即在设备上切换缓冲区是不可避免的。*（更新频率：每网格一次）*

*   **设置世界矩阵：设置**效果状态并将网格数据绑定到设备。你终于可以画出你的对象了。所以你设置世界矩阵并调用设备的绘制方法。但是等等，你想在场景的其他地方再复制一份网格吗？现在是最好的时机。只需绑定另一个世界矩阵并再次绘制。您刚刚在设备上绘制了两个状态变化最小的对象。完美的！¹ *（更新频率：每个网格实例一次）*

¹ [如果您确实需要场景中相同网格*的大量*副本，我建议您查看[Hardware instancing](http://en.wikipedia.org/wiki/Geometry_instancing)，从 Direc3D 9 开始可用。]

## 处理不再需要的资源。

通常垃圾收集器会处理您的旧对象，并且在这方面做得*非常*好。但是在这里，您正在使用*未管理*的资源。它们被称为非托管的，因为它们不受 CLR 管理，因此不受垃圾回收的影响。

### 为什么要打扰你？

保留这些对象可能会导致内存泄漏。您的内存将被不需要的资源弄得一团糟，从而导致性能下降。²

.NET 为使用非托管资源的类提供了一个接口，称为[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口。它公开了一个`Disposable`释放非托管资源的方法。您所要做的就是调用该方法，一旦您完成使用该对象。

```
if (myTexture != null)
    myTexture.Dispose(); 
```

例如，在您的情况下，您每帧创建一个新的顶点和索引缓冲区。在用新缓冲区覆盖它们并且旧缓冲区消失之前，您绝对应该处置它们。（更不用说，你不应该经常创建它们。）只要看看一些 Direct3D 类，你就会发现它们中的大多数都实现了 IDisposable。

²[据我了解，其实并没有*那么*糟糕。正确实现 IDisposable 通常意味着类有一个析构`Dispose`函数，只要对象被垃圾回收，它就会调用。尽管如此，由于您无法知道垃圾收集*何时*发生，因此一般建议还是手动处理 Disposable 对象。]

## 不要保留相同数据的多个副本。

目前，您可能正在将顶点和索引存储在数组中。创建缓冲区时，基本上是在创建数据的副本。正如我之前提到的：顶点和索引缓冲区可以为每个网格创建一次。所以当你这样做时，将顶点和索引写入缓冲区，然后只保留它们。您的模型类当然会略有变化：

```
public class Model
{
    public VertexBuffer Vertices { get; private set; }
    public IndexBuffer Indices { get; private set; }
} 
```

如果您不需要直接访问顶点和索引，这将是一个更好的解决方案。

[我知道，这是一个小步骤，但我认为意识到这一点是件好事。]

# 伪代码渲染方法

```
public void RenderFrame(Model[] models)
{
    // Per frame
    Bind(View);
    Bind(Projection);
    BindLighting();

    // Per effect
    BindEffect();

    foreach (var material in GetMaterials(models))
    {
        // Per material
        Bind(material.Color);
        Bind(material.DiffuseMap);

        foreach (var model in GetModelsByMaterial(material, models))
        {
            // Per mesh
            Bind(model.VertexBuffer);
            Bind(model.IndexBuffer);

            foreach (var instance in model.Instances)
            {
                // Per instance
                Bind(instance.World);

                // Draw the instance
                Draw();
            }
        }
    }
} 
```

* * *

[**免责声明：**我使用 Direct3D 9 (XNA) 仅几个月。我写的大部分内容都应该适用于我更熟悉的 D3D9 和 Direct3D 10/11。]

# vba - 在文本框中使用 if 函数

> ID：14493233
> 
> 赞同：0
> 
> 时间：2013-01-24T03:02:43.030
> 
> 标签：vba, excel

我在用户表单后面有以下代码

```
Private Sub add_button()
    On Error Resume Next
     If TextBox1 > TextBox9 Then
         TextBox12 = "YES"
     Else
         TextBox12 = "No"
         If TextBox8 > TextBox3 And TextBox8 < TextBox4 Then
            TextBox11 = "YES"
         Else
            TextBox11 = "no"
            If TextBox12 = "NO" Then
                TextBox10 = "NO"
            ElseIf TextBox11 = "NO" Then
                TextBox10 = "NO"
            Else
                TextBox10 = "YES"
            End If
         End If
     End If
End Sub 
```

上面的代码不起作用：请就可能的错误提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:26:45.163

一些事情，

1.  删除错误处理，然后您将知道执行中是否存在问题，如 Siddharth 的评论
2.  平衡文本格式/案例的左右比较作为拉里的评论
3.  使用适当的属性来获取设定值。在你的情况下`Textbox.Text`
4.  `F8`通过按下并添加在调试模式下运行代码`break points`
5.  Do `Debug.Print`or a `Msgbox`at each`if-else`确保逻辑流程
6.  在社区尽最大努力帮助您解决问题时回复评论。

这是您可以对代码进行的更改。此时您已经设置了两个逻辑`12`，`11`在`NO`这种情况下，没有必要进行此检查：

```
 If TextBox12 = "NO" Then 
     TextBox10 = "NO" 
 ElseIf TextBox11 = "NO" Then 
     TextBox10 = "NO" 
```

你可以简单地设置`Textbox10.Text = "NO"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:44:47.320

请您检查脚本的实际条件是否有效，因为我有点不确定这些条件对文本的效果如何。只需复制所有现有代码并复制以下内容作为测试：

```
Private Sub add_button()
    If TextBox1 > TextBox9 Then
        MsgBox "TextBox1 > TextBox9 "
    Else
        MsgBox "TextBox1 < TextBox9 "
        If TextBox8 > TextBox3 And TextBox8 < TextBox4 Then
            MsgBox "TextBox8 > TextBox3 And TextBox8 < TextBox4 "
        End
    End If
End Sub 
```

# python - python什么时候编译常量字符串字母，将字符串组合成一个常量字符串？

> ID：14493236
> 
> 赞同：6
> 
> 时间：2013-01-24T03:03:06.320
> 
> 标签：python

如

```
In [9]: dis.disassemble(compile("s = '123' + '456'", "<execfile>", "exec"))
  1           0 LOAD_CONST               3 ('123456')
              3 STORE_NAME               0 (s)
              6 LOAD_CONST               2 (None)
              9 RETURN_VALUE 
```

我想知道，python 什么时候将常量字符串组合为`CONST`. 如果可能的话，请告诉我在 cpython（无论是 2.x、3.x）上的哪些源代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T03:19:14.327

只要组合字符串为 20 个字符或更少，就会发生这种情况。

优化发生在窥视孔优化器中。*请参阅Python/peephole.c*`fold_binops_on_constants()`函数中的第 219 行：http : [//hg.python.org/cpython/file/cd87afe18ff8/Python/peephole.c#l149](http://hg.python.org/cpython/file/cd87afe18ff8/Python/peephole.c#l149)

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T03:49:42.467

[@Raymond Hetting 的回答](https://stackoverflow.com/questions/14493236/when-does-python-compile-the-constant-string-letters-to-combine-the-constant-st/14493372#14493372)很棒，投票赞成（我做了）。我会将此作为评论，但您不能在评论中格式化代码。

如果超过 20 个字符的限制，反汇编代码如下所示：

```
>>> dis.disassemble(compile("s = '1234567890' + '09876543210'", "<execfile>", "exec"))
  1  0 LOAD_CONST  0 ('1234567890')
     3 LOAD_CONST  1 ('09876543210')
     6 BINARY_ADD
     7 STORE_NAME  0 (s) 
```

但是在您有两个字符串文字的情况下，请记住您可以省略`+`并使用[字符串文字连接](http://docs.python.org/2/reference/lexical_analysis.html#string-literal-concatenation)来避免 BINARY_ADD（即使组合字符串长度大于 20）：

```
>>> dis.disassemble(compile("s = '1234567890' '09876543210'", "<execfile>", "exec"))
  1  0 LOAD_CONST  0 ('123456789009876543210')
     3 STORE_NAME  0 (s) 
```*

# java - Java 中默认的未捕获信号处理程序策略的基本原理是什么？

> ID：14493239
> 
> 赞同：3
> 
> 时间：2013-01-24T03:03:14.370
> 
> 标签：java, exception

已经写了很多关于一般异常的智慧以及特别是在 Java 中使用已检查与未检查异常的文章，但我有兴趣看到对将线程终止作为默认策略而不是应用程序终止的决定的辩护它在 C++ 中的方式。这个选择对我来说似乎非常危险：程序员没有计划的某些情况会导致程序的某些部分在记录堆栈跟踪后死掉，但其余的程序士兵却坚决地坚持下去，会出什么问题？我的直觉和经验表明，这里很多事情都可能出错，默认策略是那种只能由有特定理由选择它的人专门选择的东西，那又如何？这个策略的好处是什么，却有这么大的坏处？我是否高估了风险？

编辑：根据到目前为止的答案，我觉得我需要更加专注于描述我所感知的危险；我说的是使用多线程（例如在线程池中）来更新共享状态的应用程序的情况。我认识到这个策略不会给单线程应用程序带来问题。

EDIT2：您可以从解释为什么不推荐使用 Thread.stop() 方法中看到语言维护人员对这些风险的认识（可在此处找到：http: [//docs.oracle.com/javase/7/docs /technotes/guides/concurrency/threadPrimitiveDeprecation.html](http://docs.oracle.com/javase/7/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html)）。当线程由于未捕获的异常而意外死亡时，同样的问题也适用。他们一定设计了 JVM，以便在线程死亡时自动解锁所有监视器，这似乎是一个糟糕的实现选择；线程在监视器锁定的情况下死亡应该表明整个程序应该死亡，因为替代方案几乎可以肯定是某些共享状态下的内部不一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:22:19.780

@BD，不确定您的经验对此有何看法，因为您没有在这里解释。但是，这是我作为开发人员所经历的：

1.  一般来说，如果应用程序的一个组件由于数据库重启或某些文件被替换等任何原因（暂时或永久）失败，那么让应用程序失败是一个坏主意。例如，如果我引入了一种新型的交易系统并且出现了一些问题，它不应该关闭我的应用程序。

2.  像 Web/应用程序服务器这样的应用程序应该能够继续工作并响应用户，即使它的任何部署都抛出任何奇怪的异常。

根据您对异常的担忧，通常所有应用程序都有一个健康监控系统，用于监控它们的健康状况，如 CPU/磁盘/RAM 使用情况或日志中的错误等，并相应地发出警报。

我希望这能解决您的困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:55:57.893

通过与同事讨论这个问题，以及回顾目前收到的答案，我在这里形成了一个假设，并希望得到一些反馈。

我怀疑将这种行为作为默认行为的决定源于定义语言早期发展的哲学及其早期环境。

作为最初理念的一部分，程序员/设计人员被期望使用检查异常，并且语言强制可能由方法调用发出的检查异常（即已在方法定义中声明）必须在调用方法中处理，否则被它声明为“正式”将责任传递给更高级别的调用者。常见的做法已经大大远离使用受检异常，更不用说实践中最常发生的异常之一 NullPointerException 是未经检查的。因此，程序员现在必须假设任何方法调用都可以生成未经检查的异常，对此的推论是，任何在并发上下文中更新共享数据的代码都必须为这些更新实现事务语义才能完全正确。我的经验是大多数开发人员并不真正理解这一点，即使他们了解多线程开发的基础知识，例如在使用同步管理关键部分时避免死锁。默认的未捕获异常处理程序行为通过掩盖其影响来加剧问题：在 C++ 中，未捕获的异常是否会导致共享状态损坏无关紧要，因为程序无论如何都是死的，但在 Java 中，程序将继续跛行，因为尽管它很可能不再正确运行，但它可以做到最好。即使他们确实了解多线程开发的基础知识，例如在使用同步管理关键部分时避免死锁，他们也不会真正理解这一点。默认的未捕获异常处理程序行为通过掩盖其影响来加剧问题：在 C++ 中，未捕获的异常是否会导致共享状态损坏无关紧要，因为程序无论如何都是死的，但在 Java 中，程序将继续跛行，因为尽管它很可能不再正确运行，但它可以做到最好。即使他们确实了解多线程开发的基础知识，例如在使用同步管理关键部分时避免死锁，他们也不会真正理解这一点。默认的未捕获异常处理程序行为通过掩盖其影响来加剧问题：在 C++ 中，未捕获的异常是否会导致共享状态损坏无关紧要，因为程序无论如何都是死的，但在 Java 中，程序将继续跛行，因为尽管它很可能不再正确运行，但它可以做到最好。

环境因素是单线程程序很可能是该语言最初开发时的常态，因此默认行为伪装成正确的行为。多核架构的兴起和线程池使用的增加使威胁更广泛地暴露出来，而常用的方法（例如使用不可变对象）只能解决这个问题（提示：ConcurrentMap 可能不如您安全认为是）。到目前为止，我的经验是，否认这种风险的人相对于他们代码的实际安全要求还不够偏执，但我希望被证明是错误的。

我怀疑修改未捕获的异常处理程序以终止程序应该是大多数开发组织要求的标准程序；至少应该对已知会根据传入输入更新共享状态的线程池执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:26:14.367

正常（无 GUI，无容器）应用程序在未捕获的异常时退出 - 默认行为很好 - 与您想要的一样。

基于 GUI 的应用程序，它会很好地显示错误消息并能够更有效地处理错误 - 例如，我们可以提交带有一些附加信息的缺陷报告。

通过提供线程特定的异常处理程序，可以完全改变行为，其中可能包括应用程序退出。

[这里](http://www.javapractices.com/topic/TopicAction.do?Id=229)有一些有用的注意事项

# performance - 绩效基准准则 2

> ID：14493240
> 
> 赞同：1
> 
> 时间：2013-01-24T03:03:12.833
> 
> 标签：performance, zend-framework, doctrine, doctrine-orm

我最近尝试使用 Zend CE 简单的基准测试工具对我的 Zend 应用程序进行基准测试与 Doctrine 2。在 Zend App 的索引控制器的索引操作中，我添加了简单的功能来创建用户实体、持久化实体和刷新实体管理器。

我注意到仅持久化和刷新操作就将我的 Zend 应用程序的 RPS 从 50 降低到 11。然后我意识到添加元数据缓存可能会提高性能。结果发现添加 ApcCache 驱动程序并将其设置为元数据缓存只会将 RPS 提高到 16。

关于如何提高持久化和刷新方法的性能有什么建议吗？还是我该放弃 Doctrine 2 并转向更简单的 Zend 数据库框架了？

# android - Android AsyncTask 发送 UDP 数据包

> ID：14493241
> 
> 赞同：2
> 
> 时间：2013-01-24T03:03:12.123
> 
> 标签：android, sockets, android-asynctask, udp

我想用asynctask发送一个数据报包，但是不行！！

我已经添加了所有可能需要的权限！

我认为问题可能出在

```
 socket.send(packet); 
```

请帮我解决这个问题:)

```
 "In my XML file"
  <uses-permission 
    android:name="android.permission.INTERNET"></uses-permission>
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-   permission>
 <uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"></uses-permission>

public class DroneMain extends Activity {
String at_cmd = "";
String action = "";
FloatBuffer fb=null;
IntBuffer ib=null;
int   PORT=5556;
float speed = (float)0.1;
int   seq = 1;
public Handler handler ;
InetAddress    inet_addr;
DatagramSocket socket;
public Button btnForward,btnBackward,btnLeft,btnRight
       ,btnEmrgency,btnTakeoff,btnLanding,btnUp,btnDown;
   ///////////////////////////////////////MAIN//////////////////////////////////////
   @Override
       public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_drone_main);

 /////////////////////Button Finder//////////////////////
       btnForward=(Button)findViewById(R.id.forwardBtn);
       btnBackward=(Button)findViewById(R.id.backwardBtn);
       btnLeft=(Button)findViewById(R.id.LeftBtn);
       btnRight=(Button)findViewById(R.id.downBtn);
       btnUp=(Button)findViewById(R.id.upBtn);
       btnDown=(Button)findViewById(R.id.downBtn);
       btnEmrgency=(Button)findViewById(R.id.emergencyBtn);
       btnTakeoff=(Button)findViewById(R.id.takeoffBtn);
       btnLanding=(Button)findViewById(R.id.LandingBtn);
 /////////////////////Button Listener///////////////////////
       btnForward.setOnClickListener(btnForwardListener);
       btnBackward.setOnClickListener(BackwardListener);
       btnLeft.setOnClickListener(btnLeftListener);
       btnRight.setOnClickListener(btnRightListener);
       btnUp.setOnClickListener(btnUpListener);
       btnDown.setOnClickListener(btnDownListener);
       btnEmrgency.setOnClickListener(btnEmrgencyListener);
       btnTakeoff.setOnClickListener(btnTakeoffListener);
       btnLanding.setOnClickListener(btnLandingListener);
       Log.e("///","end of on create");
}
 ///////////////////////////////////////end of on create
 public int intOfFloat(float f) {
    /*fb.put(0, f);
    return ib.get(0);*/
    if(fb != null) fb.put(0, f);
    if(ib != null) return ib.get(0);
    else return 0;
 }

 public Button.OnClickListener btnForwardListener=
    new Button.OnClickListener(){
    @Override
    public void onClick(View arg0) {
        Log.e("///button","forward_enter1");
        action = "Go Forward (pitch+)";         
            at_cmd = "AT*PCMD=" + (seq++) + ",1," + intOfFloat(speed)+ ",0,0,0";                
        new ATcommandThread().execute();            
    }

};

public Button.OnClickListener BackwardListener=
    new Button.OnClickListener(){
    @Override
    public void onClick(View arg0) {
        action = "Go Backward (pitch-)";
            at_cmd = "AT*PCMD=" + (seq++) + ",1," + intOfFloat(-speed) + ",0,0,0";      
        //AT*PCMD=1,0,1036831949,0,0 'backward
            new ATcommandThread().execute();            

    }

};

public Button.OnClickListener btnLeftListener=
    new Button.OnClickListener(){
    @Override
    public void onClick(View arg0) {
         action = "Go Left (roll-)";
         // at_cmd = "AT*PCMD=" + (seq++) + ",1,0," + intOfFloat(-speed) + ",0,0";
         at_cmd = "AT*PCMD=" + (seq++) + ",1," + intOfFloat(-speed)+",0,0,0";
         //AT*PCMD=1,-1110651699,0,0,0 'safe left
         new ATcommandThread().execute();           
    }

};

public Button.OnClickListener btnRightListener=
    new Button.OnClickListener(){
    @Override
    public void onClick(View arg0) {
         action = "Go Right (roll+)";
         at_cmd = "AT*PCMD=" + (seq++) + ",1," + intOfFloat(+speed) + ",0,0,0";
         //AT*PCMD=1,1036831949,0,0,0 ' safe right
         Log.e("AT*PCMD",at_cmd);
         new ATcommandThread().execute();           

    }

};

public Button.OnClickListener btnUpListener=
    new Button.OnClickListener(){
    @Override
    public void onClick(View arg0) {
          action = "Go Up (gaz+)";
          at_cmd = "AT*PCMD=" + (seq++) + ",1,0,0," + intOfFloat(speed) + ",0";
          new ATcommandThread().execute();          
    }

};

public Button.OnClickListener btnDownListener=
    new Button.OnClickListener(){
    @Override
    public void onClick(View arg0) {
         action = "Go Down (gaz-)";
         at_cmd = "AT*PCMD=" + (seq++) + ",1,0,0," + intOfFloat(-speed) + ",0";
         //Move the drone Sets the reference for the horizontal plane
         new ATcommandThread().execute();           

    }

};

public Button.OnClickListener btnEmrgencyListener=
    new Button.OnClickListener(){
    @Override
    public void onClick(View arg0) {
        action = "Emergency";
        at_cmd = "AT*REF=" + (seq++) + ",290717952";
        new ATcommandThread().execute();            

    }

};

public Button.OnClickListener btnTakeoffListener=
    new Button.OnClickListener(){
    @Override
    public void onClick(View arg0) {
        action = "Takeoff";
        at_cmd = "AT*REF=" + (seq++) + ",290718208";
        new ATcommandThread().execute();            

    }

};

public Button.OnClickListener btnLandingListener=

    new Button.OnClickListener(){
    @Override
    public void onClick(View arg0) {
        action = "Landing";
        at_cmd = "AT*REF=" + (seq++) + ",290717696";
        new ATcommandThread().execute();            

    }

};
    @Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_drone_main, menu);     
    return true;
}

public class ATcommandThread extends AsyncTask<String, Integer, Boolean>{

    @Override
    protected Boolean doInBackground(String... arg0) {
        byte [] ip_bytes = new byte[] {(byte)192,(byte)168,(byte)1,(byte)1};
        try {
            inet_addr = InetAddress.getByAddress(ip_bytes );
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e("AT command: ","at_cmd)");    
        byte[] buffer = (at_cmd + "\r").getBytes();
            DatagramPacket packet = new DatagramPacket(buffer, buffer.length,     inet_addr, PORT);
            try {
                socket.send(packet);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        Log.e("///send at command","at command topic");
        return null;
    } 
} 
```

}

```
 01-24 10:57:26.449: E/Trace(1356): error opening trace file: No such file or directory (2)
 01-24 10:57:26.948: E////(1356): end of on create
 01-24 10:57:27.109: D/gralloc_goldfish(1356): Emulator without GPU emulation detected.
 01-24 10:57:27.189: I/ActivityManager(160): Displayed  com.example.dronedivideandroid/.DroneMain: +1s232ms
 01-24 10:57:36.419: E////button(1356): forward_enter1
 01-24 10:57:36.419: E/AT command:(1356): at_cmd) 
 01-24 10:57:36.429: W/dalvikvm(1356): threadid=11: thread exiting with uncaught exception (group=0x40a13300)
 01-24 10:57:36.439: E/AndroidRuntime(1356): FATAL EXCEPTION: AsyncTask #1
 01-24 10:57:36.439: E/AndroidRuntime(1356): java.lang.RuntimeException: An error occured while executing doInBackground()
 01-24 10:57:36.439: E/AndroidRuntime(1356):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
 01-24 10:57:36.439: E/AndroidRuntime(1356):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
 01-24 10:57:36.439: E/AndroidRuntime(1356):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
 01-24 10:57:36.439: E/AndroidRuntime(1356):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
 01-24 10:57:36.439: E/AndroidRuntime(1356):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
 01-24 10:57:36.439: E/AndroidRuntime(1356):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
 01-24 10:57:36.439: E/AndroidRuntime(1356):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 01-24 10:57:36.439: E/AndroidRuntime(1356):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
 01-24 10:57:36.439: E/AndroidRuntime(1356):    at java.lang.Thread.run(Thread.java:856)
 01-24 10:57:36.439: E/AndroidRuntime(1356): Caused by: java.lang.NullPointerException
 01-24 10:57:36.439: E/AndroidRuntime(1356):    at com.example.dronedivideandroid.DroneMain$ATcommandThread.doInBackground(DroneMain.java:201)
 01-24 10:57:36.439: E/AndroidRuntime(1356):    at com.example.dronedivideandroid.DroneMain$ATcommandThread.doInBackground(DroneMain.java:1)
 01-24 10:57:36.439: E/AndroidRuntime(1356):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
 01-24 10:57:36.439: E/AndroidRuntime(1356):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
 01-24 10:57:36.439: E/AndroidRuntime(1356):    ... 5 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:13:02.300

是的，您需要实际分配套接字，异常是空指针，因为您声明了套接字但在使用它之前没有分配它。现在，这应该可以了，但是您将不断分配新的套接字。您应该采取以下行： socket = new DatagramSocket() 我在下面插入并最有可能将其放在 onCreate 中。

```
protected Boolean doInBackground(String... arg0) {
        byte [] ip_bytes = new byte[] {(byte)192,(byte)168,(byte)1,(byte)1};
        try {
            inet_addr = InetAddress.getByAddress(ip_bytes );
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e("AT command: ","at_cmd)");    
        byte[] buffer = (at_cmd + "\r").getBytes();
            DatagramPacket packet = new DatagramPacket(buffer, buffer.length,     inet_addr, PORT);
            try {
                socket= new DatagramSocket();
                socket.send(packet);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        Log.e("///send at command","at command topic");
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:13:30.637

你没有初始化你的`socket`

```
public ATcommandThread()
{

  socket = new DatagramSocket();
} 
```

# c# - IEnumerable 从视图 c# MVC

> ID：14493242
> 
> 赞同：0
> 
> 时间：2013-01-24T03:03:20.547
> 
> 标签：c#, sql, asp.net-mvc-3

我在 SQL 方面不是很有经验。我正在使用 SQL Server 2008 和 MVC3；在我的数据库中有一个简单的视图，尝试使用以下脚本创建一个列表：

```
 List<vw_LearnerCourse> list = ctx.vw_LearnerCourses.Where(x => x.Course_ID == id).ToList().AsEnumerable(); 
```

我收到以下错误：

```
Cannot implicitly convert type 'System.Collections.Generic.IEnumerable<vw_LearnerCourse>' to 'System.Collections.Generic.List<vw_LearnerCourse>'. An explicit conversion exists (are you missing a cast?) 
```

感谢您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:05:03.590

只需使用：

```
 List<vw_LearnerCourse> list 
          = ctx.vw_LearnerCourses.Where(x => x.Course_ID == id).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:05:05.973

调用[`.ToList()`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)IEnumerable。

```
List<vw_LearnerCourse> list = ctx.vw_LearnerCourses.Where(x => x.Course_ID == id).ToList(); 
```

从[文档](http://msdn.microsoft.com/en-us/library/bb342261.aspx)中：

> ToList(IEnumerable) 方法强制立即进行查询评估并返回一个包含查询结果的列表。您可以将此方法附加到查询中，以获取查询结果的缓存副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T03:09:05.020

您可以[看到](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)List 被定义为

```
[SerializableAttribute]
public class List<T> : IList<T>, ICollection<T>, 
IList, ICollection, IReadOnlyList<T>, IReadOnlyCollection<T>, IEnumerable<T>, 
IEnumerable 
```

默认情况下，列表是可枚举的。所以如果你用 ToList() 结束语句，它工作正常。不需要 AsEnumerable()。

```
List<vw_LearnerCourse> list = ctx.vw_LearnerCourses.Where(x => x.Course_ID == id).ToList(); 
```

# sql - 字符串（dd/mm/yyyy）到日期sql server

> ID：14493243
> 
> 赞同：4
> 
> 时间：2013-01-24T03:03:34.350
> 
> 标签：sql, sql-server, tsql

**编辑**：解决方案在参考帖子的解决方案中。我不小心忽略了 DATETIME--> Varchar(10)

`CONVERT 的语法：

```
CONVERT ( data_type [ ( length ) ] , expression [ , style ] )` 
```

我知道[这篇](https://stackoverflow.com/questions/207190/sql-server-string-to-date-conversion)文章

> SQL Server (2005, 2000, 7.0) 没有任何灵活甚至不灵活的方式来获取字符串格式的任意结构化日期时间并将其转换为日期时间数据类型。

所以我正在寻找一种只解决这种特定字符串格式的解决方案。

假设我在 sql server 中有一个带有字段的表`inputDate`：`datetime`格式

以下代码无需转换/转换即可工作

```
SELECT inputDate
FROM   some_table
WHERE  inputDate > '01/24/2013' 
```

但它不会为

```
SELECT inputDate
FROM   some_table
WHERE  inputDate > '24/01/2013' 
```

投掷`The conversion of a varchar data type to a datetime data type resulted in an out-of-range value`

然后我尝试了

```
SELECT inputDate
FROM   some_table
WHERE  inputDate > CONVERT(VARCHAR(10), '24/01/2013', 103) 
```

抛出同样的错误

有没有办法**将 dd/mm/yyyy 中的字符串转换为**SQL SERVER 中的日期时间格式？还是唯一的方法，正确的方法是在别处进行消毒？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T03:06:16.780

你试过用`DATETIME`而不是`VARCHAR(10)`

```
WHERE inputDate > CONVERT(DATETIME, '24/01/2013', 103) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T09:21:05.423

尝试使用这篇文章中的信息：[ISO 8601](https://stackoverflow.com/questions/813238/tsql-datetime-iso-8601)

我成功地做到了以下几点：

```
select convert(datetime,convert(char(23),'20140125' ,127),103) as MyDate 
```

得到这个：2014-01-25 00:00:00.000

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T03:06:24.083

使用[ISO 8601](http://www.w3.org/TR/NOTE-datetime)日期格式 YYYY-MM-DDT00:00:00。它将在任何语言环境中隐式转换为日期时间

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-24T03:13:40.403

尝试将 VARCHAR(10) 的长度增加到 VARCHAR(14) ，例如：

```
select inputDate from Table 
where inputDate > convert(varchar(14), '24/01/2013', 103) 
```

# node.js - 使用 ExpressJS 为每个文件设置 Cache-Control

> ID：14493248
> 
> 赞同：4
> 
> 时间：2013-01-24T03:04:39.560
> 
> 标签：node.js, express, cache-control

有没有办法在 ExpressJS 应用程序中为每个文件设置 Cache-Control 属性？我想对我的应用程序中文件的缓存进行精细控制......我该如何实现这一点？关于 Cache-Control 的最佳实践是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T05:09:40.843

```
app.use(function (req, res, next) {
  if (req.url.match(/* some filter */)) {
    res.setHeader('Cache-Control', ...)
  } else if (req.url.match(/* some filter */)) {
    res.setHeader('Cache-Control', ...)
  }

  next()
})

app.use(express.static(__dirname + '/public')) 
```

没必要把它弄复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-14T20:19:04.043

这个线程已经很老了，但是有一种更简单的方法来实现对静态文件的基本缓存控制。只需向`express.static()`内置中间件函数添加一个选项对象，如下所示：

```
let options = {
    maxAge: "1d"
}

app.use(express.static(__dirname + '/public', options)) 
```

默认情况下，这将为您的所有静态资产启用缓存控制。它会将`Cache-Control`标题设置为`public, max-age=86400`.

# jquery - 使用 JSON 数据的 Ajax / Jquery 自动完成

> ID：14493250
> 
> 赞同：12
> 
> 时间：2013-01-24T03:04:54.583
> 
> 标签：jquery, ajax, json, jquery-ui, jquery-ui-autocomplete

我正在尝试设置我的 Jquery UI 自动完成字段以获取来自 ajax 连接的数据。到目前为止，这是我的代码：

```
 $("#mainIngredientAutoComplete").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: "../api/IngredientChoices",
                        dataType: "json",
                        success: function (data) {
                            response(function (item) {
                                return {
                                    label: item.MainName,
                                    value: item.MainItemID
                                }
                            });
                        }
                    });
                }
            }); 
```

这是我的 JSON：

```
[{"SubItemID":1,"MainItemID":1,"SubName":"2%","MainName":"Milk"},{"SubItemID":2,"MainItemID":1,"SubName":"Skim/Fat Free","MainName":"Milk"},{"SubItemID":3,"MainItemID":2,"SubName":"Chedder","MainName":"Cheese"}] 
```

HTML：

```
<table id="tbl_ingredients" style="padding:0px;">
                <tr id="ingHeader">
                    <td>Ingredient</td>
                    <td>Measurement</td>
                    <td>Amount</td>
                    <td><input id="mainIngredientAutoComplete" /></td>
                    <td></td>
                </tr>
</table> 
```

当我开始输入“mil”（牛奶）时，我的代码给了我这个错误：

![在此处输入图像描述](../Images/75404e336482be28482d75b9683b531a.png)

**编辑：**

我进行了更改，尝试了几次，但现在我遇到了一个新错误-

[URL] 中第 55 行第 25 列未处理的异常

0x800a1391 - Microsoft JScript 运行时错误：“数据”未定义

```
 $("#mainIngredientAutoComplete").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "../api/IngredientChoices",
                    dataType: "json",
                    response: ($.map(data, function(v,i){
                        return {
                            label: v.MainName,
                            value: v.MainItemID

                        }}))
                });
            }
        }); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-24T03:15:28.823

您需要将成功回调更改为

```
response($.map(data, function(v,i){
    return {
                label: v.MainName,
                value: v.MainItemID
               };
})); 
```

[小提琴](http://jsfiddle.net/arunpjohny/huUkt/1/)。

[jQuery.map](http://api.jquery.com/jQuery.map/)有助于将数组或对象中的所有项目转换为新的项目数组。

更新：添加过滤器

```
$("#mainIngredientAutoComplete").autocomplete({
    source: function (request, response) {
        var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
        $.ajax({
            url: "../api/IngredientChoices",
            dataType: "json",
            success: function (data) {
                response($.map(data, function(v,i){
                    var text = v.MainName;
                    if ( text && ( !request.term || matcher.test(text) ) ) {
                        return {
                                label: v.MainName,
                                value: v.MainItemID
                               };
                    }
                }));
            }
        });
    }
}); 
```

# c# - 套接字连接是否应该保持打开状态并且它们是否需要管理员权限？

> ID：14493257
> 
> 赞同：0
> 
> 时间：2013-01-24T03:05:46.280
> 
> 标签：c#, .net, sockets, tcp, udp

我是套接字的新手，对它们在 .NET 中的使用有几个问题。这是一个消费者程序，因此在用户运行服务器和客户端时不会出现任何扩展问题。

1）在服务器关闭之前保持套接字连接打开是否更好，或者我应该仅在用户请求时打开连接并在完成后关闭它？这不是一个实时游戏，所以请求会是断断续续的，但是让套接字连接保持打开状态有什么缺点吗？

2) 如果用户正在运行服务器，套接字是否要求用户具有管理员权限？我环顾四周，似乎 RAW 套接字可以，但我计划使用 Stream 或 Dgram 来代替，这取决于哪个最适合我的程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:11:06.077

1.  如果您谈论的是单个套接字，那么不，让它保持打开状态并不是什么大问题。有很多可用的端口，如果您的套接字只是处于等待状态，它将消耗的系统资源可以忽略不计。
2.  TCP 和 UDP 套接字连接不需要管理员权限即可打开。但是，根据用户的防火墙设置，可能需要防火墙例外以允许您的应用程序进行外部连接，并且取决于可能需要也可能不需要管理员权限的防火墙*软件*。

# c# - 更新列表 在 DbContext 中

> ID：14493262
> 
> 赞同：0
> 
> 时间：2013-01-24T03:06:23.360
> 
> 标签：c#, asp.net, .net

我有一个这样的模型

```
public class Challenge
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Blurb { get; set; }
    public int Points { get; set; }
    public string Category { get; set; }
    public string Flag { get; set; }
    public List<string> SolvedBy { get; set; }
}

public class ChallengeDBContext : DbContext
{
    public DbSet<Challenge> Challenges { get; set; }
} 
```

然后像这样的控制器。但是我无法更新列表“SolvedBy”，下次我使用调试器单步执行时，列表仍然是空的。

```
 [HttpPost]
    public string Index(string flag = "", int id=0)
    {
        Challenge challenge = db.Challenges.Find(id);
        if (flag == challenge.Flag)
        {
            var chall = db.Challenges.Find(id);
            if (chall.SolvedBy == null)
            {
                chall.SolvedBy = new List<string>();
            }
            chall.SolvedBy.Add(User.Identity.Name);
            db.Entry(chall).State = EntityState.Modified;
            db.SaveChanges();
            //congrats, you solved the puzzle
            return "got it";
        }
        else
        {
            return "fail";
        }
    } 
```

有什么办法可以制作一个保存在数据库中的字符串列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:20:59.980

模型中的A`List<T>`通常会映射到第二个表，但在您的表中，`DbContext`您只有一个表。尝试添加第二个表。

```
public class ChallengeDBContext : DbContext
{
    public DbSet<Challenge> Challenges { get; set; }
    public DbSet<Solution> Solutions {get; set;}
}

public class Challenge
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Blurb { get; set; }
    public int Points { get; set; }
    public string Category { get; set; }
    public string Flag { get; set; }
    public List<Solution> SolvedBy { get; set; }
}

public class Solution
{
    public int ID { get; set; }
    public string Name { get; set; }
} 
```

然后您的控制器可以使用以下代码...

```
 var chall = db.Challenges.Find(id);
        if (chall.SolvedBy == null)
        {
            chall.SolvedBy = new List<Solution>();
        }
        chall.SolvedBy.Add(new Solution {Name=User.Identity.Name}); 
```

以上都没有经过测试，我可能在那里犯了一些错误，但我想说明的一般原则是你需要另一个表。代表 SQL 中的`List<T>`JOIN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:26:06.177

EF 不知道如何在数据库表中存储数组，所以它只是忽略它。您可以创建另一个表/实体或使用 XML/JSON 来存储列表。您可以在保存之前序列化列表，并在从数据库加载后反序列化它

# bash - Bash 查找当前执行所在的位置

> ID：14493271
> 
> 赞同：-1
> 
> 时间：2013-01-24T03:07:13.517
> 
> 标签：bash, shell, unix

我在一个目录（即 dir1/dothis.sh）中有一个 shell 程序 - 当我 cd 到该目录和 ./dothis.sh 时工作正常

如果我使用新名称为该目录创建了一个 ln - dir2 并执行 dir2/dothis.sh 它会执行，但它认为当前执行路径是 dir2 指向的新目录

在 dothis.sh - 我如何找到 dothis.sh 的实际位置？我遇到的问题是 dir1/dothis.sh 可以从一个系统重新定位到另一个系统，因此无法保证 dir1/dothis.sh 可以是硬代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:26:29.657

使用 bash 内置

```
#!/bin/bash
echo "Current path: $PWD" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:16:59.297

怎么样

```
dirname $(readlink -f $0) 
```

如果有的话，它也将解析符号链接......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T03:16:29.093

尝试这个：

```
#!/bin/bash
echo $0
a=`pwd`
echo $a
b=$a"/"$0
echo `dirname $b` 
```

# oracle - oracle 中使用 datastage 将文本导入到 oracle 中的领先问号？

> ID：14493277
> 
> 赞同：1
> 
> 时间：2013-01-24T03:07:39.703
> 
> 标签：oracle, import, oracle11g, datastage

问号“？” 仅出现在要插入的第一行的第一个字段的前面。
这一次，我将 ftp 上传文件类型更改为 text/ascii（而不是二进制），这似乎解决了问题。但后来它又回来了。服务器操作系统是 aix5.3。
数据阶段为 7.5x2。
甲骨文是 11g。

我使用 ue 将文件保存为 utf-8，使用 unix 结束标记。有没有人以前得到过这个东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:19:48.707

问号本身意义不大，因为它可能只是数据库无法识别的某些特殊字符的“掩码”。您没有提供有关您的环境的任何详细信息，所以我在这里的意见只是一个猜测。我希望它能给你一点光明。

文本文件是如何创建的？如果它是在 Windows 环境中创建的文件，那么由于刹车线 {CR}{LF} 字符，您很可能会有这样的字符。

oracle 表的数据类型是什么？Char 数据类型将根据字段的大小“填充”每个位置，我建议在这种情况下使用 varchar 代替。

如果不是这种情况，我会以十六进制模式编辑文件并检查此特定字符的 Ascii 代码，然后使用 TRIM（如果并行）或转换（如果服务器）替换字符。

转换函数将是这样的：

转换（字符（[ascii_char_number]），''，[your_string]）

或者，如果您的工作是并行工作，您可以使用 Trim 功能

修剪（[你的字符串]，[ascii_char_number]，'L'）

选项“L”将删除所有前导字符。您可能需要调整此功能以满足您的需要。如果您不熟悉 TRIM 功能，可以在 datastage 在线文档中找到更多详细信息。

这样做时我要给出的唯一警告是，您将从原始数据源中删除数据，因此请确保在操作这样的文件时没有删除任何有效信息，因为这不是非常推荐的ETL 专家之间的练习。

有什么问题，给我留言。如果可以的话，很乐意提供帮助。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-17T19:23:19.983

我有一个类似的问题，无法打印的字符显示为“？” 并且 datastage 在处理这些记录时会发出警告。我可以不显示那些不可打印的字符，所以我使用了函数 ICONV 将这些字符转换为可打印的字符。有多个选项，我选择了一个将它们转换为“。”的选项。这对我有用。以下 IBM 页面提供了更多详细信息：

[https://www-01.ibm.com/support/knowledgecenter/SSZJPZ_11.3.0/com.ibm.swg.im.iis.ds.parjob.dev.doc/topics/r_deeref_String_Functions.html](https://www-01.ibm.com/support/knowledgecenter/SSZJPZ_11.3.0/com.ibm.swg.im.iis.ds.parjob.dev.doc/topics/r_deeref_String_Functions.html)

[http://docs.intersystems.com/ens201317/csp/docbook/DocBook.UI.Page.cls?KEY=RVBS_foconv](http://docs.intersystems.com/ens201317/csp/docbook/DocBook.UI.Page.cls?KEY=RVBS_foconv)

我使用的转换：ICONV(column_name,"MCP")

# actionscript-3 - 为什么在文件未完成加载时会调度 URLStream 完成事件？

> ID：14493278
> 
> 赞同：3
> 
> 时间：2013-01-24T03:08:04.890
> 
> 标签：actionscript-3, flash, air

我正在编写一个 AIR kiosk 应用程序，它每晚都连接到 WordPress 服务器，获取一个包含所有内容路径的 JSON 文件，然后下载该内容并将其保存到 kiosk 硬盘驱动器。

有数百个文件（jpg、png、f4v、xml），其中大多数可以毫无问题地下载/保存。但是，有两个 f4v 文件永远不会完全下载。complete 事件确实被调度了，但是如果我比较 bytesTotal （来自 progress 事件）与 bytesAvailable （来自 complete 事件）它们不匹配；bytesTotal 更大。bytesTotal（来自进度事件）与服务器上的字节匹配。

进度事件中的 bytesLoaded 永远不会增加到与 bytesTotal 匹配的程度，因此我也不能依赖进度事件。这似乎每次都发生在相同的两个视频上。视频不是很大，一个是13MB，一个是46MB。我有较大的视频可以毫无问题地下载。

编辑：重新启动我的计算机后，这两个视频现在完成下载，但我遇到了与 300kb png 文件相同的问题。

如果我将 url 粘贴到 Firefox 中，它会正确下载。我还编写了一个简单的 c# 应用程序来下载文件，它能够毫无问题地下载它们，所以它似乎是 Flash/AIR 的问题。

编辑：这是一个更简单的代码版本，它来自一个测试项目，它是唯一的代码（网址在我们的本地网络上，所以你不能自己下载文件）：

```
package  {

    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.ProgressEvent;
    import flash.net.URLRequest;
    import flash.net.URLStream;

    [SWF(backgroundColor="#000000", frameRate="24", width="640", height="480")]

    public class Test extends Sprite {

        private var fileSize:Number;
        private var stream : URLStream;
        private var url:String = "http://192.168.150.219/wordpress2/wp-content/uploads/2012/12/John-Butler-clip1.f4v";

        public function Test() {
            if (stage)
                init();
            else
                this.addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event=null):void {
            this.removeEventListener(Event.ADDED_TO_STAGE, init);
            stream = new URLStream();
            stream.addEventListener(ProgressEvent.PROGRESS, onLoadProgress);
            stream.addEventListener(Event.COMPLETE, onLoadComplete);
            stream.load(new URLRequest(url));
        }

        private function onLoadProgress(event:ProgressEvent):void {
            fileSize = event.bytesTotal;
            var percent:Number = event.bytesLoaded / event.bytesTotal * 100;
            trace(percent + "%"); // this never gets to 100%
        }

        private function onLoadComplete(event:Event):void {
            trace("loaded", stream.bytesAvailable, "of", fileSize); 
            // outputs "loaded 13182905 of 13184365"
            // so why is it "complete" when it isn't fully downloaded?
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:02:31.647

不要比较`bytesAvailable`，`length`而是使用。BytesAvailable 实际上是`ByteArray.length - ByteArray.position`. 因此，如果 ByteArray 中的位置远离索引 0，则 bytesAvailable 值将减小。长度将始终是数组中的总字节数。

尝试使用长度进行比较，看看这是否有任何区别。我没有时间筛选您的代码以查看您是否在任何时候更改位置（有意或无意；您可以通过多种方式做到这一点），所以这是我现在能提供的最好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:50:14.720

如果其他人有和我一样的问题。结果是 AIR 中也存在缓存问题，因此添加到请求中的时间戳可以解决此问题：http: [//www.newtonflash.com/blog/as3/prevent-xml-caching-problem/#comment- 43](http://www.newtonflash.com/blog/as3/prevent-xml-caching-problem/#comment-43)

```
{
var xmlPath:String="replaceYourXMLPathHere.xml"
var urlReq:URLRequest = new URLRequest(xmlPath+"?time=" + new Date().getTime());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:00:13.043

你的答案在你的问题中。

**普通 URL**（文件）- 对于此服务器，这是一个数据块。一旦服务器交付“数据块”，交付过程就被认为是“完成**”**。在这种情况下，如果文件为 100kb，一旦收到 100kb - Flash 将其视为“完成**”**。

**URLStream** - 对服务器来说这是 [ **TWO** ] 数据块（非常简单的查看方式）。服务器将首先将**CONNECTION**提供给流......然后提供**STREAM DATA**。正如其描述的那样，这是在 Flash 中处理的。

Flash 会将**CONNECTION**的加载视为“**完成**”，并且**从不**检查**STREAM**数据是否已加载 - 这取决于您的服务器。在任何流中，您实际上应该检查 [load progress] 事件并在数据进入时读取每个字节......然后根据需要进行构造。

# javascript - 锁定在 setSelection() 上的 Dygraphs 不起作用

> ID：14493281
> 
> 赞同：1
> 
> 时间：2013-01-24T03:08:21.097
> 
> 标签：javascript, dygraphs

我在锁定 setSelection() 时遇到问题。选择正确的值没有问题，但之后图表没有被锁定。

我努力了：

```
graph = new Dygraph(satgraph, data, { labels: [ "Score", "Percentage of people at this score"] });
.
.
.
graph.setSelection(intoStepSpace, { locked: [true] });
graph.setSelection(intoStepSpace, "", true); 
graph.setSelection(intoStepSpace, null, true);
graph.setSelection(intoStepSpace, undefined, true);

and, just in case they want a highlightSeriesOpts instead of the name of a series:

graph.setSelection(intoStepSpace, { highlightSeriesOpts: [
   {strokeWidth: 3},
   {strokeBorderWidth: 1},
   {highlightCircleSize: 5}]
 }, true);} 
```

这些都是单独尝试的，而不是像上面的代码所示的顺序。

很可能，这是我对 JavaScript 中的可选参数不够了解的问题，但是在阅读了这个概念之后，我认为我是对的。我做错了什么对任何人来说都很明显吗？我已经很久没有使用 JavaScript 做任何事情了，我很高兴能够使用 Dygraphs 重新开始使用它。

非常感谢你的帮助。

-Brian J. Stinar-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:54:31.580

我超级棒的程序员朋友 Jeremy Pepper 向我提到了两件事：

1.）锁定似乎将选择锁定到特定系列，而不是锁定整个图表。

2.)

```
graph.mouseMove_ = doNothing;
function doNothing()
{
} 
```

作品。我不知道为什么这个解决方案让我觉得很脏......

# ruby-on-rails-3 - 何时在 Ruby on Rails ActiveRecord 中传递实例代替 id 起作用？

> ID：14493285
> 
> 赞同：3
> 
> 时间：2013-01-24T03:08:36.527
> 
> 标签：ruby-on-rails-3, activerecord

示例场景：模型 Worker`belongs_to`模型 Bucket。

请参阅以下查询：

```
1.9.3p194 :045 > Worker.where(bucket_id: Bucket.first).count
   (0.7ms)  SELECT COUNT(*) FROM "workers" WHERE "workers"."bucket_id" = 1
 => 38
1.9.3p194 :046 > Worker.where(bucket_id: Bucket.first.id).count
   (0.7ms)  SELECT COUNT(*) FROM "workers" WHERE "workers"."bucket_id" = 1
 => 38

1.9.3p194 :047 > Worker.new bucket_id: Bucket.first
 => #<Worker id: nil, email: nil, created_at: nil, updated_at: nil, bucket_id: nil>
1.9.3p194 :048 > Worker.new bucket_id: Bucket.first.id
 => #<Worker id: nil, email: nil, created_at: nil, updated_at: nil, bucket_id: 2> 
```

正如您所看到的，在`where`函数的情况下，传递一个实例，例如`Bucket.first`作品来代替确切的`id`. 所以有人会认为它也适用于该`new`功能。相反，它默默地失败了！

为什么它会这样工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:45:40.993

我相信这发生在[ActiveRecord::PredicateBuilder](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/relation/predicate_builder.rb#L49)中。如果该值是一个 ActiveRecord::Base 对象，您可以在那里看到它会调用`id`它。该`new`方法不会触发此代码，因此它的行为会有所不同。

我更喜欢明确并`id`直接传递。然而[，在 Rails 4 中](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/relation/predicate_builder.rb#L38)，您将能够做到这一点：

```
Worker.where(bucket: Bucket.first).count 
```

这与初始化非常相似：

```
Worker.new(bucket: Bucket.first) 
```

一般来说，我建议传递一个`id`如果您正在设置/匹配的属性以`_id`.

**更新：**我还想指出，初始化将继承`where`条件。所以这将在 Rails 3.2 中工作：

```
Worker.where(bucket_id: Bucket.first).new 
```

我假设最终会通过 PredicateBuilder，但不确定。即使这有效，我也不推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:20:40.997

据我了解，`Bucket.first`将返回一个即时对象，但`Bucket.first.id`只会返回即时对象的 id。

因此，另一方面，当您创建`Worker.new`和传递时`bucket_id: Bucket.first`，它实际上不起作用，

```
Worker.new bucket_id: Bucket.first.id 
```

它将传递正确的参数以创建新的 Worker。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T03:36:04.973

当您使用时，`.new`您正在创建一个空白记录，但它还没有 ID。对于 Active Record，这经常用于表单。

这与 say `.create`which 不同，如果给定所需的有效参数，将创建带有 ID 的记录。类似地，选择`Bucket.first`具有 ID 的记录将获得具有 ID 的现有记录。

如果您使用`.new`，请设置所需的参数，然后执行 a`.save`您将获得一个 ID。

# javascript - Javascript嵌套菜单向下滑动？

> ID：14493290
> 
> 赞同：0
> 
> 时间：2013-01-24T03:09:20.240
> 
> 标签：javascript

我做了一个嵌套菜单向下滑动，但问题是，如果你连续悬停在 li 上和悬停以动画嵌套的 ul 向下滑动，当你悬停时，它会继续做动画，因​​为它没有当您快速悬停时完成。我想做它，这样它就不会注册动画，直到它完成上下移动以防止在你不悬停时出现动画。

这是我的 Javascript：

```
function mainmenu() {
    $(" ul ul ").css({
        display: "none"
    }); 
    $(" ul li").hover(function () {
        $(this).find('ul:first').css({
            visibility: "visible",
            display: "none"
        }).slideDown(100);
    }, function () {
        $(this).find('ul:first').slideUp(100);
    });
}
$(document).ready(function () {
    mainmenu();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:22:44.300

使用 jQuery ' [stop()](http://api.jquery.com/stop/) '。

```
function mainmenu() {
$(" ul ul ").css({
    display: "none"
}); 
$(" ul li").hover(function () {
    $(this).find('ul:first').css({
        visibility: "visible",
        display: "none"
    }).stop().slideDown(100);
}, function () {
    $(this).find('ul:first').stop().slideUp(100);
});
} 
```

# button - Cocos2d sprite MoveTo 一个被点击的按钮？

> ID：14493291
> 
> 赞同：0
> 
> 时间：2013-01-24T03:09:23.217
> 
> 标签：button, cocos2d-iphone, sprite

Cocos2d 新手在这里。我正在构建一个游戏，其中有一个精灵和 5 个按钮展开。我希望精灵移动到我单击的按钮的方向。我有以下代码：

在我的初始化中：

```
goHere1=[CCMenuItemImage itemWithNormalImage:@"goToBut.png"selectedImage:@"goToBut.png" target:self selector:@selector(imHere:)];
goHere1.position=ccp(70, 650); 
```

然后方法：

```
- (void) imHere:(id)sender {
    NSLog(@"I'm Here");
    [mole runAction:[CCMoveTo actionWithDuration:1.5 position:????????)]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:53:50.233

据我所知，您不应该使用`moveTo`方法来为精灵设置动画。你有没有注意到，当你使用“moveto”时，你的移动并不顺畅？

我是这样做的，可能并不完美。

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *myTouch = [touches anyObject];
    CGPoint location = [zoombase convertTouchToNodeSpace:myTouch];
    self.destinationLocation = loaction;
}
-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
     UITouch *myTouch = [touches anyObject];
    CGPoint location = [zoombase convertTouchToNodeSpace:myTouch];
    self.destinationLocation = loaction;
}

-(void)update:(ccTime)dt {

    //that will do until your sprite reach you destination point
    if(!CGPointEqualToPoint(self.spriteToMove,self.destinationLocation)) {
        CGPoint *stepToMove = ccp(0.2/destinationLocation,0.2/destinationLocation); //some piece of orginal destination
        [self.spriteToMove setPosition:ccpAdd(stepToMove,self.spriteToMove.position)]; // add that pice to your sprite current location
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:18:02.280

试试这个代码

```
-(void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
CGPoint touchLocation=[touch locationInView:[touch view]];
touchLocation=[[CCDirector sharedDirector] convertToGL:touchLocation];
touchLocation=[self convertToNodeSpace:touchLocation];

 self.moveaction=[CCSequence actions:[CCMoveTo actionWithDuration:0.5f position:touchLocation],[CCCallFunc actionWithTarget:self selector:@selector(moveend)],nil];
[sprite runAction:moveaction];
 } 
```

我希望这能帮到您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T03:54:33.943

您作为选择器操作传递的方法，您`CCMenuItemImage`可以使用method 参数`CCMenuItemImage`触发该方法。`sender`因此，您可以使用`((CCMenuItemImage*)sender).position`（需要将`sender`变量转换为`CCMenuItemImage`第一个）来获得位置

```
- (void) imHere:(id)sender {
    NSLog(@"I'm Here");
    [mole runAction:[CCMoveTo actionWithDuration:1.5 position:((CCMenuItemImage*)sender).position]];
} 
```

# jquery - jQuery、JSON 解析

> ID：14493293
> 
> 赞同：0
> 
> 时间：2013-01-24T03:09:52.650
> 
> 标签：jquery, json

我有一个 JSON 数据包，它不仅仅是“数据”——还有一些与之相关的元数据——但我似乎无法引用它......

这是它的样子（JSON）

```
{ "count":"4",
  "companies": [
{ "id":"1", "company":"Acme", "address":"1234 street st.", "city":"New York", "state":"NY", "zip":"02123", "phone":"212-222-2222", "contact":"Billy Bob", "email":"bb@ny.com", "jobscurrent":"12", "jobsdone":"11" },
{ "id":"3", "company":"Acme", "address":"1234 street st.", "city":"New York", "state":"NY", "zip":"02123", "phone":"212-222-2222", "contact":"Billy Bob", "email":"bb@ny.com", "jobscurrent":"12", "jobsdone":"11" },
{ "id":"4", "company":"Acme", "address":"1234 street st.", "city":"New York", "state":"NY", "zip":"02123", "phone":"212-222-2222", "contact":"Billy Bob", "email":"bb@ny.com", "jobscurrent":"12", "jobsdone":"11" },
{ "id":"5", "company":"Acme", "address":"1234 street st.", "city":"New York", "state":"NY", "zip":"02123", "phone":"212-222-2222", "contact":"Billy Bob", "email":"bb@ny.com", "jobscurrent":"12", "jobsdone":"11" }
] } 
```

这是我的 jQuery 的样子......嵌套的“每个” - 第一个（这是我的理解）循环 {count,companies} 和嵌套在里面的一个循环遍历客户数组中的每个数组......

第二个工作正常（即使我没有将它嵌套在第一个内也工作正常 - 但是我需要传回类似“显示 n 条记录”之类的东西 - 但现在，“value.count”

```
items.push('<tr class=""><td colspan="11">' + value.count + '</td></tr>' ); 
```

返回“未定义”

啊！- 我刚刚注意到它给了我两次输出......我猜这是可以预料的 - 每次外部循环迭代一次 - 因为我有 2 个元素

所以问题是 - 我怎样才能引用我的元数据一次......显然我不想为此使用 EACH ......

我只尝试了“data.count”来引用它——但我什么也没得到，这就是为什么我采用“EACH”方式来提取 JSON 变量......

```
function loadTable() {
    $.ajax({
        type: 'POST',   
        url: 'company_list.php',    
        dataType: 'json',   
        success: function ( data ) {                
            var items = [];
            var line = 1;

            $.each( data, function ( key, value ) {
                // meta data
                items.push('<tr class=""><td colspan="11">' + value.count + '</td></tr>' );

                // the real data
                $.each( data.companies, function ( key, value ) {   
                    var thisRowClass = 'odd';
                    if ( line % 2 ) {
                        thisRowClass = 'even';
                    }
                    items.push('<tr class="' + thisRowClass + '"><td>'  + value.company + 
                               '</td><td>' + value.address + 
                               '</td><td>' + value.city + 
                               '</td><td>' + value.state + 
                               '</td><td>' + value.zip + 
                               '</td><td>' + value.phone + 
                               '</td><td>' + value.contact + 
                               '</td><td>' + value.email + 
                               '</td><td>' + value.jobscurrent + 
                               '</td><td>' + value.jobsdone + 
                               '</td><td> edit | delete ' +
                               '</td></tr>');   
                    line++;
                }); 
            });

            //$( '#message' ).html( '<p>Displaying' + value.count + '</p>' );   
            $( '#companies-list' ).append( items.join('') );                                   

        },

        error: function () {    
            // there's an error
            $( '#message' ).html( '<p>There was a problem on the server... </p>' ); 
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T03:13:56.423

你想要`data.count`而不是`value.count`：

```
items.push('<tr class=""><td colspan="11">' + data.count + '</td></tr>' ); 
```

实际上，`$.each`如果您的 JSON 的整个结构看起来像这样，我认为您的外部可能是不必要的。换句话说：

```
success: function (data) {
    var items = [];
    var line = 1;

    // meta data
    items.push('<tr class=""><td colspan="11">' + data.count + '</td></tr>');

    // the real data
    $.each(data.companies, function (key, value) {
        var thisRowClass = 'odd';
        if (line % 2) {
            thisRowClass = 'even';
        }
        items.push('<tr class="' + thisRowClass + '"><td>' + value.company +
            '</td><td>' + value.address +
            '</td><td>' + value.city +
            '</td><td>' + value.state +
            '</td><td>' + value.zip +
            '</td><td>' + value.phone +
            '</td><td>' + value.contact +
            '</td><td>' + value.email +
            '</td><td>' + value.jobscurrent +
            '</td><td>' + value.jobsdone +
            '</td><td> edit | delete ' +
            '</td></tr>');
        line++;
    });

    //$( '#message' ).html( '<p>Displaying' + value.count + '</p>' );   
    $('#companies-list').append(items.join(''));
}; 
```

**示例：http:** [//jsfiddle.net/gyDMP/1/](http://jsfiddle.net/gyDMP/1/)

# java - 将 Unicode 宽字符更改为 ASCII

> ID：14493294
> 
> 赞同：1
> 
> 时间：2013-01-24T03:09:53.187
> 
> 标签：java, regex, unicode

我正在处理来自不同国家和语言的文本。有大量使用“宽”格式字符的文本。它们表面上看起来像标准的 ASCII 字符，但有一点不同的字体，并且它们周围有额外的空间。

目前，我循环遍历字符串的字符数组表示中的每个字符，测试字符是否在宽字符范围内，如果是，则将字符替换为其 ASCII 等效字符，然后转换回字符串。

```
public static String wideToShortChars(String s) {
    char[] messagechars = s.toCharArray();
    for (int i = 0; i < messagechars.length; i++) {
        int thisChar = (int) messagechars[i];
        if (thisChar >= 65280 && thisChar <= 65519) {
            messagechars[i] = (char) (thisChar - 65248);
        }
    }
    return new String(messagechars);
} 
```

这似乎会很慢，我想使用 RegEx 会更快。我发现我可以使用`\p{InHalfwidth_and_Fullwidth_Forms}`正则表达式中的术语来搜索这些字符。

我可以构建一个搜索这些宽字符并将它们替换为它们的 ASCII/标准等价物的正则表达式吗？我只想用字母、数字和通常的标点符号来做这件事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T03:24:47.867

> 这似乎会很慢，我想使用 RegEx 会更快。

我想你会错误地想象。编写良好的手动代码搜索/替换转换可能比实现为正则表达式的等效转换更快。此外，我认为不可能用单个正则表达式进行这种转换。

# spring - Grails + hibernate + 控制器 sessionFactory 空对象？

> ID：14493299
> 
> 赞同：0
> 
> 时间：2013-01-24T03:10:57.493
> 
> 标签：spring, hibernate, model-view-controller, grails, orm

我是使用hibernate和grails的新手。我有多个需要保留的 java 对象。为了了解它是如何工作的，我使用了一个员工类的简单示例。它在我的 src/java 中，并带有相应的 xml 映射。我想我需要从我的会话工厂创建一个会话实例，我不知道我做错了什么。我遵循了一个设置hibternate [hibernate tut](http://www.tutorialspoint.com/hibernate/hibernate_pdf_version.htm "冬眠啧啧")的教程，并尝试将其翻译为grails。有什么想法吗？

```
package com.turingpages.Matrix.view

import org.springframework.dao.DataIntegrityViolationException
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.Transaction;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.codehaus.groovy.grails.commons.ApplicationHolder as AH

class MatrixController {

    def ctx = AH.application.mainContext
    def sessionFactory = ctx.sessionFactory

    static allowedMethods = [save: "POST", update: "POST", delete: "POST"]

...

    def create() {
        def session = sessionFactory.currentSession
        Transaction tx = null;
        Integer employeeID = null;
        try{
            tx = session.beginTransaction();
            Employee employee = new Employee("fname", "lname", 100);
            employeeID = (Integer) session.save(employee);
            tx.commit();
        } catch (HibernateException e) {
            if (tx!=null) tx.rollback();
            e.printStackTrace();
        } finally {
            session.close();
        }
        return employeeID;
    } 
```

我的堆栈跟踪：

```
 ERROR errors.GrailsExceptionResolver  - NullPointerException occurred when processing request: [POST] /turingpages/matrix/create
Cannot get property 'currentSession' on null object. Stacktrace follows:
Message: Cannot get property 'currentSession' on null object
    Line | Method
->>   33 | create    in com.turingpages.Matrix.view.MatrixController$$ENvP7skK
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    195 | doFilter  in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|     63 | doFilter  in grails.plugin.cache.web.filter.AbstractFilter
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run       in java.lang.Thread 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:51:21.710

没有理由你应该用 Grails 编写这样的代码。如果你真的需要在控制器中管理事务，你应该这样做。

```
def create() {
    Integer employeeID = null;
    Employee.withTransaction { status ->
      Employee employee = new Employee(firstName: "fname", lastName: "lname", noIdea: 100);
      employee.save()
      if (employee.hasErrors()) {
         status.setRollbackOnly()
      }
    }
    return employee.id;
} 
```

也就是说，在处理这样的单个域时，您根本不需要担心它：

```
def create() {
   Employee employee = new Employee(firstName: "fname", lastName: "lname", noIdea: 100);
   employee.save(flush: true)
   [employee: employee] // generally you want to pass the object back to a view this way
   // deal with errors in the domain on the view
} 
```

甚至更好的是使用[服务](http://grails.org/doc/latest/guide/services.html)类。但这可能是你的家庭作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:51:04.087

您需要移动代码

```
def ctx = AH.application.mainContext
def sessionFactory = ctx.sessionFactory 
```

进入方法 create()，或将其替换为

```
def sessionFactory 
```

但是，Grails 提供了一个[withTransaction](http://grails.org/doc/latest/ref/Domain%20Classes/withTransaction.html)方法以更简单的方式为您服务：

```
 def create() {
        Employee.withTransaction{ status ->
            Employee employee = new Employee("fname", "lname", 100).save()
            .....
            if (employee.id) {
                return employee.id
            }
            else {
               status.setRollbackOnly()
            }
        }
    } 
```

# ios - 出于内存原因，NSMutableArray 是否比 NSArray 更好？

> ID：14493302
> 
> 赞同：7
> 
> 时间：2013-01-24T03:11:12.247
> 
> 标签：ios, objective-c, memory-management, nsmutablearray, nsarray

我有一个关于 NSArray 和 NSMutableArray 的问题。我理解两者之间的区别主要是 NSArray 是不可变的，而 NSMutableArray 是可变的。就我的研究而言，性能也是一样的。有一件事我找不到一个好的答案，那就是 NSMutableArray 是否使用比 NSArray 更多的内存，以及 NSMutableArray 在内存方面是否比 NSArray 更苛刻。

我非常感谢您的建议和解释。

谢谢维克

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T03:20:19.310

NSMutableArray 使用更多的内存有两个（呃，四个，见评论）原因：

1）因为它可以改变大小，所以它不能存储对象内部的内容，必须存储一个指向outline storage的指针以及用于存储的额外malloc节点

2）因为在添加东西时一次调整一个元素的大小会很慢，它会以块的形式调整大小，这可能会导致一些未使用的空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T03:13:33.330

这就像想知道标准数组或`std::vector`. 可变数据结构确实需要做更多的事情，主要不是内存（因为它需要`NSMutableArray`并且`NSArray`可能相等），但它需要动态调整大小并管理所有特定操作，如插入和删除，这对于不可变数组是不必要的：维度是在分配对象时决定的，它是恒定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T06:25:46.540

对于正常使用，没有明显的性能差异。

但是，如果您从内部使用可变数组来构建响应的方法返回 NSArray，那么我发现临时数组的副本可能需要大量时间。

在 DTCoreText 的某些情况下，我发现 [NSMutableArray 复制] 到 NSArray 将占用 Instruments 中方法时间的 40%。即返回可变数组将方法时间减半。

因此，在评估 NSArray 与可变性能时，我建议您将注意力集中在避免复制对象上。在紧密循环或内部方法中，您应该更喜欢避免复制。

# sql - SQL：如果没有找到行，是否再次搜索？

> ID：14493303
> 
> 赞同：1
> 
> 时间：2013-01-24T03:11:29.393
> 
> 标签：sql

我需要编写一个查询，它总是会返回一些东西，即使没有什么满足条件，像这样

```
SELECT * WHERE date > NOW() FROM table ORDER by date
   IF none is returned THEN
      SELECT FIRST FROM table ORDER by date 
```

所以只会返回超过 10 的数字，如果没有返回，则返回任何数字有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:13:36.227

这是一种方法，使用`union all`：

```
select *
from table
where number > 10
union all
(select *
 where number > 0 and
       not exists (select * from table where number > 10)
 limit 1
) 
```

如果您使用的是合理版本的 SQL，则可以执行以下操作：

```
select t.*
from (select t.*, max(number) over () as maxnumber,
             row_number() over (order by number desc) as seqnum
      from table t
     ) t
where (maxnumber > 10 and number > 10) or seqnum = 1 
```

为此，您需要窗口函数。

# events - UIViewController 子类中的 UIButton 不响应任何触摸

> ID：14493306
> 
> 赞同：0
> 
> 时间：2013-01-24T03:12:06.073
> 
> 标签：events, uibutton, subclass, touches

几天前我遇到了这个问题，我也到处搜索解决方案，但没有一个工作正常。我在自定义viewController（是UIViewController的子类）中添加了一个按钮，然后，将customView添加到myMainViewController中。像这样的代码：

```
customView.h
cusomView:UIViewController
{
UIButton *myButton;
}

-(void)doSomething:(id)sender;

customView.m
-(void)viewDidLoad
{
  [super viewDidLoad];
  self.view=[UIView alloc] initWithFrame:CGRectMake(0,100,100,100);
  //init the button....
  [myButton addTarget:self action:@selector(doSomething:)     forControlEvents:...upInside];
  [self.view addSubViews:myButton];
}
-(void)doSomething:(id)sender
{
.......
}

myMainViewController
-(void)viewDidLoad
{
   ......
   customView *cusView=[customView alloc] init];
   [self.view addSubViews:cusView];
} 
```

就这样，它显示得很好，但是按钮不响应任何触摸。你能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:56:02.287

是否有理由不`myMainController`直接将uibutton添加到？

# haskell - 类型同义词中的模式匹配/内部类型参数的类型同义词

> ID：14493307
> 
> 赞同：4
> 
> 时间：2013-01-24T03:12:06.667
> 
> 标签：haskell, types, pattern-matching, synonym, type-parameter

我的代码中有类似于此类的内容。在我的情况下，将 a' 作为另一个参数添加到类 Foo 是没有意义的。

```
class Foo a where
    type FCtx a a' :: Constraint
    type FCtx a a' = ()

    f :: (FCtx a a') => a -> a'

data D b = D b

instance (Integral b) => Foo (D b) where
    -- the next line does not compile because b' does not appear on the LHS
    type FCtx (D b) a' = (a' ~ D b', Integral b') 

    f (D x) = D $ fromIntegral x 
```

对于这个*特定*的实例`Foo`，我想`a'`以这种方式关联。我想出完成这项工作的唯一方法是添加一个具有“明显”类型同义词的“虚拟”类：

```
class DClass d where
   type DType d

instance DClass (D b) where
    type DType (D b) = b 
```

实例现在`Foo`变为：

```
instance (Integral b) => Foo (D b) where
    type FCtx (D b) a' = (a' ~ D (DType a'), Integral (DType a'))
    f (D x) = D $ fromIntegral x 
```

问题是我必须为我的特定数据类型创建一个完整的类（和实例），只是为了表达（D b）确定 b 的类型同义词/功能依赖性。我不会有这个类的任何其他实例，因为我*总是*想`DType a'`将类型参数表示为`D b`.

我想做的是：

```
type DParam (D b) = b

instance (Integral b) => Foo (D b) where
     type FCtx (D b) a' = (a' ~ D (DParam a'), Integral (DParam a'))
     f (D x) = D $ fromIntegral x 
```

或者甚至可以在完全不使用类型同义词的情况下用更好的方式来表达这个约束。似乎很愚蠢，我应该被迫创建一个具有单个实例的类型同义词的（开放）类来实现这一点，并且其他人可能会创建我不打算创建的新实例是不安全的。

至少，不会有一些规范的方式将“模式匹配类型同义词”转换为`DClass`上面的类/实例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T07:53:32.920

重量稍轻，使用类型族：

```
type family DParam d :: *
type instance DParam (D b) = b 
```

不知道你现在能不能做得更好……

# jquery - 将滚动条位置移动 x 个像素

> ID：14493311
> 
> 赞同：10
> 
> 时间：2013-01-24T03:12:34.117
> 
> 标签：jquery, html, css, navigation, scrollbar

我有一个固定的 div 大小宽度。我将其表示为 x

我有一个固定的 div 大小高度。

我想在 div 的任一侧添加按钮，允许用户向右导航，即向右移动 x 像素量，即显示 div 中的下一个条目。

任何人都可以提出解决这个问题的方法吗？

这是我当前的 html / css：

```
<div class="outer_container" style="overflow: scroll; overflow-y: hidden; width:577px; border-style:solid; border-width:5px; border-color:#578278;">
    <div class="inner_container" style="width: 10000px;">

<table>
    <tr>
        <td style=" width: 577px; ">
            <div style="text-align:left;  margin: 0px 10px 10px 10px; width:557px; ">
                <p>Add Comment to the Tesco Catalogue</p>
                <form class="comment_form" action="profile" method="post">
                    <textarea style="resize:none;" maxlength="250" rows="2" cols="65" placeholder="Enter your comment here..."></textarea>
                    <input type="submit" value="Submit"/>
                </form>
            </div>
        </td>
        <!-- do a for loop here to generate all other items -->
        <td style="width:577px;">
            <div style="text-align:left; padding: 5px 10px 5px 10px; margin: 0px 10px 10px 10px; width:567px; border-style:solid; border-width:1px; border-color:#578278;">
                <p class="comment_username"> User said at such a time</p>
                <p class="comment_comment"> Comment ......</p>
            </div>
        </td>
        <td style="width:577px;">
            <div style="text-align:left; padding: 5px 10px 5px 10px; margin: 0px 10px 10px 10px; width:567px; border-style:solid; border-width:1px; border-color:#578278;">
                <p class="comment_username"> User said at such a time</p>
                <p class="comment_comment"> Comment ......</p>
            </div>
        </td>
    </tr>
</table>
</div>
</div> 
```

这是[jsfiddle](http://jsfiddle.net/EB4UC/)

所以我想在 div 的任一侧添加两个按钮，这两个按钮都向左或向右移动 x 个像素，显然是向左按钮，例如上一条评论，右按钮，下一条评论。

因此，在我创建的 html 中，我希望滚动条一次向左或向右移动 577px，具体取决于用户单击。

让我知道你们的想法！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-24T03:22:54.350

您可以使用`scrollLeft()`来检索当前滚动位置。然后使用 jQuery 的`animate`函数来平滑地向左/向右滚动容器。为此，我添加了两个 ID 为左/右的按钮。函数之间的唯一区别是一个增加了 200 的距离，而另一个减去了 200。用 200 替换您想要的任何滚动量。对于奖励积分，您可以检测下一个评论部分相对于 div 容器的左侧位置，并即时计算两百个值。

[http://jsfiddle.net/EB4UC/70/](http://jsfiddle.net/EB4UC/70/)

```
$('#left').click(function () {
    var leftPos = $('div.outer_container').scrollLeft();
    console.log(leftPos);    
    $("div.outer_container").animate({
        scrollLeft: leftPos - 200
    }, 800);
});

$('#right').click(function () {
    var leftPos = $('div.outer_container').scrollLeft();
    console.log(leftPos); 
    $("div.outer_container").animate({
        scrollLeft: leftPos + 200
    }, 800);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T03:20:26.067

你在寻找，

```
$('.outer_container').scrollLeft(3);
$('.outer_container').scrollTop(16); 
```

因此，当您添加按钮时，代码将是

```
$('#buttonid').click(function(){
$('.outer_container').scrollLeft(5);
}) 
```

让用户点击多次，看看会发生什么

```
$('#button_id').click(function(){
    var scroll = $('.outer_container').scrollLeft();
    console.log(scroll);
$('.outer_container').scrollLeft(5+scroll);
}) 
```

# extjs - 当鼠标移到文本字段上时，禁用的文本字段会引发“Ext.fly 为空”错误

> ID：14493313
> 
> 赞同：0
> 
> 时间：2013-01-24T03:12:49.783
> 
> 标签：extjs, extjs4.1

我正在使用 ExtJs 4.1.1。我有一个禁用的文本字段。当我将鼠标移到文本字段上时，出现“Ext.fly 为空”JS 错误。仅当字段被禁用时才会发生这种情况。请帮忙。

```
 Ext.onReady(function () {
                    Ext.create('Ext.window.Window', {
                        layout: 'anchor',
                        minHeight: 60,
                        items: [{
                                  xtype: 'textfield',                   
                                  anchor: '100%',
                                  disabled: true
                            }]
                    }).show();
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:06:53.313

您在第 7 行有一个小语法错误。缺少“，”，这可能会给您带来错误，但我无法重现您提到的错误。如果这可以解决您的问题，请尝试此代码

```
 Ext.onReady(function () {
            Ext.create('Ext.window.Window', {
                layout: 'anchor',
                minHeight: 60,
                items: [{
                          xtype: 'textfield',                   
                          anchor: '100%',
                          disabled: true
                    }]
            }).show();
        }); 
```

# javascript - 跟随 Node.js 中的重定向

> ID：14493319
> 
> 赞同：1
> 
> 时间：2013-01-24T03:13:10.330
> 
> 标签：javascript, node.js, redirect, proxy, http-headers

我正在研究从 Google Docs 下载文件的代理。由于 Google Drive API 为非 gdrive 文件类型（pdf、txt、jpeg）提供的下载 url 是重定向并且已阅读[[1]](https://stackoverflow.com/questions/7323932/how-do-you-follow-an-http-redirect-in-node-js)和[[2]](https://stackoverflow.com/questions/11061118/node-js-requests-returning-301-redirects)，因此我决定使用[follow-redirects library](https://github.com/olalonde/follow-redirects)。因此，当您点击`http://localhost:3000/oauth2_download?accessToken=x&url=my_url`where x is my GDrive access_token, url 时，`https://docs.google.com/uc?id=0B_31K_MP92hUNjljYjIyMzgtZTBmNS00MGMwLWIxNmQtYjMyNDFiYjY0MTJl&export=download`应该下载该文件。但是，浏览器将我发送到 Google Docs 登录页面（`https://docs.google.com/uc?id=0B_31K_MP92hUNjljYjIyMzgtZTBmNS00MGMwLWIxNmQtYjMyNDFiYjY0MTJl&export=download`如果您已登录 Google Docs，则在浏览器中点击会下载文件）意味着未正确发送标头。知道我应该如何使用“follow-redirects”库来处理这个问题吗？先感谢您！

```
//var https = require('https');
var https = require('follow-redirects').https;
var app = require('express')();
var urllib = require('url');
// Downloads the file using OAuth2\. Tested on Google Drive
app.get('/oauth2_download', function(req, res){
    var url = req.param('url');
    var accessToken = req.param('accessToken');
    var headers = { "Authorization": "Bearer " + accessToken }
    var searchname = urllib.parse(url).search;
    var hostname = urllib.parse(url).hostname;
    var pathname = urllib.parse(url).pathname;
    if (url && accessToken) {
        // downloading file with streaming
        var options = {
            hostname: hostname,
            port: 443,
            path: pathname + searchname,
            method: 'GET',
            headers: headers
        };
        https.request(options, function(response){
            for (var key in response.headers) {
                res.setHeader(key, response.headers[key]);
            }
            response.on('data', function(chunk) {
                res.write(chunk);
            });
            response.on('end', function() {
                res.end();
            });
            //console.log("Done downloading using OAuth2");
        }).on('error', function(e) {
            console.error(e);
        }).end();
    } else {
        res.send(404);
        res.end();
    }
}); 
```

# sql - 如何使用 XML SCHEMA COLLECTION 验证 SQL Server 2008 XML 类型数据类型

> ID：14493327
> 
> 赞同：0
> 
> 时间：2013-01-24T03:13:36.287
> 
> 标签：sql, xml, collections, schema

仍在学习如何在 SQL Server 2008 中使用 XML。我看到的许多演示如何使用 XML Schema Collection 验证 XML 数据的示例似乎都在验证已知大小的 XML。我的问题是我正在使用的 XML 数据可以有“X”个 Kit 元素。

如果只有一个工具包，验证工作正常，但如果`<xsd:element name="Kit">`XML 中有多个元素，则会出现错误：

> *XML 验证：意外元素：工具包。位置：/* :KitStatus[1]/ *:Kits[1]/* :Kit[2]*

我的代码：

```
CREATE XML SCHEMA COLLECTION [dbo].[KitStatusSchema] AS 
N'<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<xsd:element name="KitStatus" >
  <xsd:complexType>
    <xsd:sequence>
       <xsd:element name="ClientID"/>
       <xsd:element name="Kits">
          <xsd:complexType>
             <xsd:sequence>
                <xsd:element name="NumberofKits"/>
                <xsd:element name="Kit">
                   <xsd:complexType>
                      <xsd:sequence>
                 <xsd:element name="PackageNumber"/>
                 <xsd:element name="KitNumber"/>
                         <xsd:element name="LocationNumber"/>
                         <xsd:element name="Status"/>
                      </xsd:sequence>
                   </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
         </xsd:complexType>
       </xsd:element>
     </xsd:sequence>            
   </xsd:complexType>
</xsd:element>
</xsd:schema> 
```

验证是否可以验证 1 个或多个套件？

# python - 当图在图形边缘运行时添加边距

> ID：14493334
> 
> 赞同：10
> 
> 时间：2013-01-24T03:14:43.773
> 
> 标签：python, matplotlib, plot

通常当我在 matplotlib 中绘图时，我会得到这样的图表：

![沿顶部边缘运行的频率响应](../Images/3819209102f019cf62bf6e1c2fb8d3bd.png)

您看不到该函数，因为它在绘图边缘运行。

有没有办法在这些情况下*自动*添加一些边距，使它们看起来像这样：

![带有少量噪声的频率响应](../Images/c40e27fa02b5c7235190dfc0ffff92db.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T09:41:13.220

您可以使用`ax.margins()`来设置[边距](http://matplotlib.org/api/axes_api.html?highlight=xlim#matplotlib.axes.Axes.margins)。例子：

```
In [1]: fig, ax = plt.subplots()

In [2]: ax.plot(np.arange(10), '-o')
Out[2]: [<matplotlib.lines.Line2D at 0x302fb50>] 
```

![无边距](../Images/5b0b2b7166577650f4ba8be9a666780f.png)

```
In [1]: fig, ax = plt.subplots()

In [2]: ax.margins(0.05)

In [3]: ax.plot(np.arange(10), '-o')
Out[3]: [<matplotlib.lines.Line2D at 0x302fb50>] 
```

![有边距](../Images/624a0d5bd29a98309dd0c282dc2804fe.png)

您也可以只设置 x 或 y 边距。但是，它似乎不是一个`matplotlibrc`选项，因此您可以简单地将其设为默认行为（因此它不是完全自动的）。我打开了一个[github 问题](https://github.com/matplotlib/matplotlib/issues/1766)来请求这个。

# codeigniter - 如何在codeigniter中动态地将值数组发送到查询

> ID：14493337
> 
> 赞同：0
> 
> 时间：2013-01-24T03:15:04.533
> 
> 标签：codeigniter

模型中的代码是 public function get_report6_8($type, $filter_id=NULL) { $values = array($filter_id);

```
$select = '';       
if ($filter_id && $type == 'jh') {
    $select = 'and natbuild_rep.jh_rep_id = ?';
}
else if ($filter_id && $type == 'natbuild') {
    $select = 'and natbuild_principal.id = ?';
}

$sql = "select sum(total) total
    from (
        select value_of_sale total
        from lead
        left join natbuild_rep
        on natbuild_rep.mobile = lead.mobile
        left join natbuild_store
        on natbuild_store.id = natbuild_rep.store_id
        left join natbuild_principal
        on natbuild_principal.store_group = ifnull(natbuild_store.store_group2, natbuild_store.store_group)
        where (status = 1 OR status = 2)
        and value_of_sale is not null
        {$select}
        group by lead.id
    ) temp";

return $this->db->query($sql, $values)->row();
} 
```

控制器中的代码是 $data['report8'] = $this->lead_report_model->get_report6_8($type, $this->input->post('filter'));

视图中的代码是

*   总计：$total)) ? $report8->总计：0；？>

如果我像这样运行查询

```
select sum(total) total

from (

    select value_of_sale total
    from lead
    left join natbuild_rep
    on natbuild_rep.mobile = lead.mobile
    left join natbuild_store
    on natbuild_store.id = natbuild_rep.store_id
    left join natbuild_principal
    on natbuild_principal.store_group = ifnull(natbuild_store.store_group2, natbuild_store.store_group)
where (status = 1 OR status = 2)
    and value_of_sale is not null
    and natbuild_principal.id in (18, 30, 31, 35, 33, 25, 23, 15, 8, 6, 5, 29, 7, 3, 2, 1, 24, 27, 22, 21, 20, 26, 36)
group by lead.id ) temp 
```

结果是对的。请帮助我如何将值数组发送到 $select。当我从包含所有其他值的下拉列表中选择总计时，就会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:19:12.673

您的下拉菜单是多选的，因此它将传递一个包含值的数组。

利用

```
 implode(",", $dropdownSelections);

 $select = 'and natbuild_principal.id in ('.implode(",", $dropdownSelections).')'; 
```

# c++ - 如何表示需要删除返回值？

> ID：14493338
> 
> 赞同：2
> 
> 时间：2013-01-24T03:15:22.240
> 
> 标签：c++, memory-management

我通常不是 C++ 开发人员。我常用的语言都是垃圾收集的，它们为我工作，但 C++ 让我感兴趣。

关于返回动态分配的对象或结构，我有一两个问题。我的理解是它们必须动态分配，因此数据在堆中而不是堆栈中。如果我错了，请纠正我。

返回指针的最佳做法是什么？假设我正在编写一个库，我如何在代码中指示是否/何时应该删除返回的指针？如果我返回一个数组，我如何返回数组的大小？

这些不是我在 C# 或 javascript 中必须面对的问题。这些问题确实是双向的：如果我在使用别人的图书馆，我要寻找什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T03:31:01.710

C++ 有一个成语叫做 RAII。这对您来说意味着您不必担心清理工作，并且资源将在代码中的定义点被释放。

例如，在函数中创建一个数组并返回它。这是一个没有 RAII 的典型实现（另一个是调用者分配内存并将其传入）：

```
int *makeIntArray(std::size_t length) {
    return new int[length];
} 
```

现在调用者需要记住释放这个内存。将此与 RAII 版本进行比较：

```
std::vector<int> makeIntArray(std::size_t length) {
    return std::vector<int>(length);
} 
```

当向量超出范围时，由此返回的内存将被释放，这取决于调用者。除其他外，它还提供了一个`size()`成员函数来获取元素的数量。

也就是说，最好尽可能保持不动态分配的东西。如果您需要返回一个结构，比如说`Str`，只需按值返回它：

```
Str makeStr() {
    return Str();
} 
```

没有动态分配意味着没有额外的工作，无论是释放内存还是将其包装在某些东西中（如`std::unique_ptr`本例中的智能指针）。

至于其他库，您需要阅读文档以确保您必须拥有它返回的内容。如果必须，您可以做的一件事是用它制作一个 RAII 对象。例如：

```
int *makeSomeInt(int value) {
    return new int(value);
}

...

std::unique_ptr<int> myInt(makeSomeInt(5));
//memory freed when myInt goes out of scope 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:15:18.573

我看到克里斯已经提供了一个很好的答案。有几件事要补充：

*   远离在代码中分配动态*内存*。让动态内存分配（和释放）尽可能由库来完成。（见`vector`上面的例子。）

*   如果你必须自己做动态内存分配，那么每个内存（即指针）都必须有一个所有者。内存的构造和销毁应该是所有者，其他人只能*使用*它。

*   如果您使用的是 C++11，请熟悉`unique_ptr`，这是您最常需要的。

    来自[Dobb 博士](http://www.drdobbs.com/cpp/c11-uniqueptr/240002708)：

    > C++11 中有很多很棒的特性，但 unique_ptr 在代码卫生领域脱颖而出。简单地说，这是动态创建对象的灵丹妙药。

# benchmarking - 计算每秒浮点运算次数 (FLOPS) 和每秒整数运算次数 (IOPS)

> ID：14493339
> 
> 赞同：2
> 
> 时间：2013-01-24T03:15:24.477
> 
> 标签：benchmarking, processor, cpu-speed, flops

我正在尝试学习一些基本的基准测试。我的 Java 程序中有一个循环，例如，

```
float a=6.5f;
int b=3;    
for(long j=0; j<999999999; j++){            
       var = a*b+(a/b);
    }//end of for 
```

我的处理器需要大约 0.431635 秒来处理这个。如何根据 Flops（每秒浮点操作数）和 Iops（每秒整数操作数）计算处理器速度？你能提供一些步骤的解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T23:50:11.913

您有一个包含 999999999 次迭代的循环：为简单起见，我们将其称为 1e9（十亿）。在涉及两者的计算中，整数将被提升为浮点数，因此循环包含 3 个浮点运算：一个 mult、一个 add 和一个 div，所以有 3e9。这需要 0.432 秒，所以你显然得到了大约 6.94 GFLOP/s (3e9/0.432)。同样，您在`j++`每次循环迭代中执行 1 个整数 op ( )，因此您将获得 1e9/0.432 或大约 2.32 GIOP/s。

然而，计算`a*b+(a/b)`是循环不变的，所以如果这没有得到优化，那将是非常令人惊讶的。我对 Java 了解不多，但是任何 C 编译器都会在编译时评估它，删除`a`and`b`变量和循环，并（有效地）用`var=21.667;`. `javac`这是一个非常基本的优化，所以如果不这样做我会感到惊讶。

我不知道 Java 的底层发生了什么，但我怀疑获得 7 GFLOPs。现代英特尔 CPU（我假设这就是您所拥有的）原则上能够在每个时钟周期使用正确的指令组合（每个周期一个加法和一个乘法运算）进行两个矢量算术运算，因此对于 3 GHz 4 -core CPU，在理想条件下甚至可以得到 3e9*4*8 = 96 个单精度 GFLOPs。各种`mul`和`add`指令的吞吐量倒数为 1 个周期，但`div`需要十倍以上的时间，所以一旦涉及除法，我会非常怀疑获得超过 CLK/12 FLOPs（单核上的标量除法）：如果编译器足够聪明，可以矢量化和/或并行化要获得更多的代码，它必须这样做，它肯定足够聪明，可以优化整个循环。

总之，我怀疑循环正在被完全优化掉，你看到的 0.432 秒只是开销。您没有给出任何指示您如何为上述循环计时，所以我不能确定。您可以通过将 ~1e9 循环迭代替换为 1e10 来亲自检查这一点。如果它不需要大约 10 倍的时间，那么你就没有按照你认为的时间来计时。

关于基准测试和性能分析还有很多话要说，但我会就此搁置。

我知道这已经很晚了，但我希望它对某人有所帮助。

埃米特。

# qt - QTreeWidgetItem 中的语法高亮显示

> ID：14493341
> 
> 赞同：1
> 
> 时间：2013-01-24T03:15:30.337
> 
> 标签：qt, pyqt, syntax-highlighting, pyside

我正在尝试找到一种方法来语法突出显示 QTreeWidgetItem 中的一些特殊单词。例如，如果项目的文本同时包含字母和数字，我将仅突出显示数字。

我能够突出显示整个 QTreeWidgetItem。但只是不能在一个项目中做到这一点。有人有什么想法吗？

# java - 扩展 struts 数据源，并将其更改为 jndi

> ID：14493346
> 
> 赞同：0
> 
> 时间：2013-01-24T03:15:44.220
> 
> 标签：java, hibernate, struts, jndi

我有一个 api，它使用下面的 xml 进行连接，他们为我们提供了一个如下的 xml：

> struts-config.xml

```
 <data-source type="org.apache.commons.dbcp.BasicDataSource">
        <set-property property="defaultAutoCommit"          value="false"/>
        <set-property property="defaultReadOnly"            value="false"/>
        <set-property property="driverClassName"            value="oracle.jdbc.OracleDriver"/>
        <set-property property="maxActive"                  value="60"/>
        <set-property property="maxIdle"                    value="5"/>
        <set-property property="maxWait"                    value="5000"/>
        <set-property property="poolPreparedStatements"     value="false"/>
        <set-property property="maxOpenPreparedStatements"  value="500"/>
        <set-property property="password"                   value="password"/>
        <set-property property="url"                        value="jdbc:oracle:thin:@localhost:1521:abcd"/>
        <set-property property="username"                   value="username"/>
        <set-property property="logAbandoned"               value="true"/>
        <set-property property="removeAbandoned"            value="true"/>
        <set-property property="testWhileIdle"              value="true"/>
        <set-property property="validationQuery"            value="SELECT NULL FROM DUAL"/>
    </data-source>
</data-sources> 
```

如何扩展它并将其更改为 jndi？像我的应用程序如下：

> 应用程序上下文.xml

```
<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName">
        <value>java:comp/env/jdbc/abcd</value>
    </property> 
</bean> 
```

我使用tomcat进行开发，但实际环境是IBM websphere 7.0。连接 jndi 将提供 websphere 7.0 的形式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:36:40.080

请注意，不推荐使用数据源元素；使用 DAO 并通过 Spring 进行管理。请参阅[数据源 Struts 1 文档](http://struts.apache.org/1.2.8/faqs/database.html#manager)。

（链接是 1.2 文档，因为您没有说明您使用的是什么版本。）

# c++ - C++ 运算符重载解释

> ID：14493347
> 
> 赞同：3
> 
> 时间：2013-01-24T03:15:58.533
> 
> 标签：c++, operator-overloading

以下是字符串类的抽象。

```
class string {
public:
    string(int n = 0) : buf(new char[n + 1]) { buf[0] = '\0'; }
    string(const char *);
    string(const string &);
    ~string() { delete [] buf; }

    char *getBuf() const;
    void setBuf(const char *);
    string & operator=(const string &);
    string operator+(const string &);
    string operator+(const char *);

    private:
       char *buf;
    };

    string operator+(const char *, const string &);
    std::ostream& operator<<(std::ostream&, const string&); 
```

我想知道为什么这两个运算符重载函数

```
 string operator+(const char *, const string &);
  std::ostream& operator<<(std::ostream&, const string&); 
```

不是类成员函数或友元函数吗？我知道两个参数运算符重载函数通常是友元函数（我不确定，如果您也能对此有所启发，我将不胜感激）但是我的教授也没有将它们声明为友元。以下是这些函数的定义。

```
 string operator+(const char* s, const string& rhs) {

           string temp(s);
           temp = temp + rhs;
           return temp;
 }

 std::ostream& operator<<(std::ostream& out, const string& s) {
     return out << s.getBuf();
 } 
```

任何人都可以用一个小例子来解释这一点，或者指导我回答类似的问题。提前致谢。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:47:32.877

让我们谈谈运算符+。将其作为非成员允许以下代码

```
string s1 = "Hi";
string s2 = "There";
string s3;

s3 = s1 + s2;
s3 = s1 + "Hi";
s3 = "Hi" + s1; 
```

如果 operator+ 是成员而不是命名空间范围函数，则最后一个赋值语句是不可能的。但如果是命名空间范围函数，则字符串文字“Hi”会使用转换构造函数“string(const char *);”转换为临时字符串对象。并传递给 operator+。

在您的情况下，可以在不将此功能设为朋友的情况下进行管理，因为您拥有私有成员“buf”的访问器。但通常，如果出于某种原因未提供此类访问器，则需要将这些命名空间范围函数声明为友元。

现在让我们谈谈运算符<<。

这是为 ostream 对象定义的插入运算符。如果他们必须打印用户定义类型的对象，则需要修改 ostream 类定义，不建议这样做。

因此，运算符在命名空间范围内被重载。

在这两种情况下，都有一个众所周知的[Argument Dependent Lookup](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)原理，这是查找这些命名空间范围函数（也称为 Koenig Lookup）背后的核心原因。

另一个有趣的读物是[命名空间接口原则](http://www.gotw.ca/publications/mill08.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T03:54:07.270

`friend`关键字授予对 a 的`protected`和`private`成员的访问权限`class`。它没有在您的示例中使用，因为这些函数不需要使用 ; 的内部`string`。`public`接口就够了。

`friend`函数永远不是类的成员，即使在`class {}`作用域内定义也是如此。这是一个比较混乱的问题。有时`friend`用作在`class {}`大括号内定义非成员函数的技巧。但是在您的示例中，没有什么特别的，只有两个功能。这些函数恰好是运算符重载。

将一些重载定义为成员，将一个重载定义为非成员，这*是一种*糟糕的风格。`operator+`通过使所有这些都成为非成员来改进界面。`this`不同的类型转换规则应用于成为重载函数内部的左侧参数，这可能会导致令人困惑的错误。所以交换运算符通常应该是非成员（`friend`或不是）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T04:04:12.037

运算符可以被成员函数和独立（普通）函数重载。独立重载函数是否是朋友完全无关紧要。友谊属性与运算符重载绝对没有关系。

当您使用独立函数时，您可能需要直接访问类的“隐藏”（私有或受保护）内部，即当您将函数声明为`friend`. 如果您不需要这种特权访问（即您可以根据类的公共接口实现所需的功能），则无需将函数声明为`friend`.

这里的所有都是它的。

将独立的重载函数声明为朋友变得如此流行，以至于人们经常将其称为“由朋友函数重载”。这确实是一个误导性的误称，因为正如我上面所说，友谊本身与它无关。

此外，人们有时会声明重载函数，`friend`即使他们不需要对类的特权访问。他们这样做是因为`friend`函数声明可以在类定义中包含函数的直接内联定义。没有`friend`人将被迫做一个单独的声明和一个单独的定义。在某些情况下，紧凑的内联定义可能看起来“更干净”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:52:38.990

我对 C++ 重载有点生疏，但我会通过这个简单的备忘录来完成上述答案：

*   如果左侧操作数的类型是**用户定义的类型**（例如类），您应该（但您不必）将运算符重载实现为成员函数。请记住，如果这些重载——很可能像*+*、*+=*、*++* ...—— 修改左侧操作数，它们会返回调用类型的引用（实际上是修改后的对象） . 这就是为什么，例如在 Coplien 的规范形式中，`operator=`重载是一个成员函数并返回一个“UserClassType &”（因为实际上该函数返回`*this`）。

*   如果左侧操作数的类型是**系统类型**（`int`、`ostream`等...），则应将运算符重载实现为独立函数。

顺便说一句，我一直被告知`friend`关键字是坏的、丑陋的和吃孩子的。我想这主要是编码风格的问题，但我建议你在使用它时要小心，并尽可能避免它。（我从来没有遇到过强制使用它的情况，所以我真的说不出来！）

（对不起我的英语不好，我也有点生疏）

赛

# html - html中指定的图像宽度单位是什么？

> ID：14493348
> 
> 赞同：7
> 
> 时间：2013-01-24T03:16:04.167
> 
> 标签：html, image

我对 html 语言完全陌生。在html中附加的图像中，我们需要通过以下标记指定图像的宽度

```
<img width=350 src='/var/tmp.jpg'/> 
```

那么这里的宽度单位是什么？我猜它是像素？如果以像素为单位，是否意味着图像的大小实际上相对于显示器的分辨率？我在不同的机器上打开一个显示宽度为 350 的图像的网页，不同的显示器具有不同的分辨率。我测量屏幕上显示的图像的宽度，它们是相同的。那么有什么方法可以让我计算出图像的绝对宽度（以厘米或毫米为单位）（在 php 中）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T03:18:24.040

像素。答案必须是 30 个字符长。所以我打字更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T03:21:33.823

您无法真正计算出最终显示的绝对宽度/高度。如果您的目标是特定的分辨率/屏幕尺寸，那么您可以向后工作。

用户可以轻松更改屏幕分辨率，从而影响最终结果的大小。作为粗略的指导，它的 96dpi（每英寸点数），而新的 iphone 显示器可以超过 300dpi。

# delphi - 使用delphi发送邮件（连接正常关闭）

> ID：14493352
> 
> 赞同：0
> 
> 时间：2013-01-24T03:16:38.517
> 
> 标签：delphi, email, smtp, gmail

> **可能重复：**
> [Delphi + Indy：连接正常关闭](https://stackoverflow.com/questions/1085933/delphi-indy-connection-closed-gracefully)

我想用delphi发送一些电子邮件，我有这个小代码：

```
procedure TForm1.Button1Click(Sender: TObject);
var i : integer;
begin
  IdMsgSend := TIdMessage.Create(nil);
  SSLHandler :=TIdSSLIOHandlerSocketOpenSSL.Create(nil);
  try
    with IdMsgSend do
    begin
     ContentType := 'text/plain';
     Body.Text := 'Test test text';
     From.Text := 'USERNAME@gmail.com';
     ReplyTo.EMailAddresses := 'Recipient@server.com';
     Recipients.EMailAddresses := 'Recipient@server.com';
     Subject := 'i just came to say hello';
    end;

    SMTP := TIdSMTP.Create(nil);
    try
      SMTP.Username := 'USERNAME@gmail.com';
      SMTP.Password := 'PASSWODD';
      SMTP.Host := 'smtp.gmail.com';
      SMTP.Port := 465;

      SMTP.IOHandler := SSLHandler;
      SSLHandler.SSLOptions.Method := sslvSSLv3;
      SMTP.UseTLS := utUseExplicitTLS;
      SMTP.Connect;
      try
            IdMsgSend.Body.Text := 'The body';
            IdMsgSend.Subject := 'The subject';
            SMTP.Send(IdMsgSend);
      finally
        SMTP.Disconnect;
      end;

    finally
      FreeAndNil(SMTP);
    end;
  finally
    FreeAndNil(IdMsgSend);
  end;
end; 
```

它曾经工作得很好！现在，每次我尝试发送电子邮件时，我都会在以下位置收到此错误`SMTP.Send(IdMsgSend)`：连接正常关闭

我读过它可能来自防病毒或防火墙，所以我禁用了它们，但仍然是同样的问题？

这里有什么问题？gmail是否更改了它的SMTP选项或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:21:53.697

根据[这篇文章](http://www.swissdelphicenter.ch/en/showarticle.php?id=1)，这是一个 Delphi 未正确处理的异常。尝试对您的调试器选项进行所示的修改，问题将得到解决。

# c++ - C/C++ 中的并发编程、堆栈和堆

> ID：14493353
> 
> 赞同：7
> 
> 时间：2013-01-24T03:16:38.697
> 
> 标签：c++, memory-management, parallel-processing, heap-memory, stack-memory

好吧，如果这感觉像是对旧问题的重复，我很抱歉，我已经在 tanenbaum 的现代操作系统书 Stack Overflow 上回答了几个问题，并且仍然需要清除我对此的疑问。

首先，我将不胜感激任何我应该更详细地阅读以更好地理解这种结构的书籍/资源。我不明白这些是操作系统书籍、编程语言或架构书籍中通常解释的概念。

在我提出问题之前，我将根据有关堆栈/堆的读数列出我的发现

**堆**

*   仅包含所有实例变量、动态分配（new/malloc）和全局变量
*   不再使用数据结构堆，使用更复杂的结构
*   通过内存位置访问，负责在其上分配的内存的单个进程
*   碎片整理和内存分配由操作系统完成（如果是或否，请回答我关于谁管理堆、操作系统或运行时环境的问题）
*   在进程中可以访问其引用的所有线程之间共享

**堆**

*   仅包含所有局部变量。（在函数调用时推送）
*   使用实际的堆栈数据结构进行操作
*   由于连续性，访问速度更快

现在，对于我的一些关于相同的问题。

1.  全局变量，它们在哪里分配？（我认为它们是在堆上分配的，如果是这样，它们何时被分配，在运行时或编译时，还有一个问题，是否可以清除该内存（如使用删除）？）
2.  堆的结构是什么？堆是如何组织的（它是由操作系统管理还是由运行时环境管理（由 C/C++ 编译器设置））。
3.  堆栈是否***只***保存方法及其局部变量？
4.  每个应用程序（进程）都有一个单独的堆，但是如果超过堆分配，那么是否意味着操作系统无法分配更多内存？（我假设内存不足会导致操作系统重新分配以避免碎片）
5.  进程中的所有线程都可以访问堆（我相信这是真的）。如果是，所有线程都可以访问实例变量、动态分配的变量、全局变量（如果它们有引用）
6.  不同的进程，不能互相访问堆（即使传递了地址）
7.  堆栈溢出崩溃
    *   仅当前线程
    *   当前进程
    *   所有进程
8.  在 C/C++ 中，是否在运行时为函数内的块变量在堆栈上分配内存（例如，如果代码的子块（例如 For 循环）创建了一个新变量，则该变量是在运行时分配的堆栈（或堆）还是预先分配的？）它们何时被删除（块级范围，如何维护）。我对此的看法是，所有对堆栈的添加都是在运行时在块开始之前进行的，每当到达该块的末尾时，所有添加到该点的元素都会被推送。
9.  CPU 对堆栈寄存器的支持仅限于堆栈指针，该堆栈指针可以通过对内存的正常访问来递增（弹出）和递减（推送）。（这是真的？）
10.  最后，OS/Runtime 环境生成的堆栈和堆结构是否都存在于主内存中（作为抽象？）

我知道这很多，而且我似乎一直很困惑，如果你能指出我正确的方向来解决这些问题，我将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T03:39:48.320

1.  全局变量分配在编译时布局的内存的静态部分中。这些值在输入之前在启动期间被初始化`main`。当然，初始化可以在堆上分配（即静态分配`std::string`的结构本身将位于静态布局的内存中，但它包含的字符串数据在启动期间分配在堆上）。这些东西在正常程序关闭期间被删除。在此之前您无法释放它们，如果您愿意，您可能希望将值包装在指针中，并在程序启动时初始化指针。

2.  堆由分配器库管理。C 运行时附带了一个，但也有自定义的，例如[tcmalloc](http://goog-perftools.sourceforge.net/doc/tcmalloc.html)或[jemalloc](http://www.canonware.com/jemalloc/)，您可以使用它们来代替标准分配器。这些分配器使用系统调用从操作系统获取大量内存*页面*，然后在您调用 malloc 时为您提供这些页面的一部分。堆的组织有点复杂，并且在分配器之间有所不同，你可以在他们的网站上查看它们是如何工作的。

3.  是的。尽管您可以使用库函数，例如`alloca`在堆栈上腾出一块空间，然后将其用于您想要的任何东西。

4.  每个进程都有一个单独的内存空间，即它认为它是孤独的，没有其他进程存在。通常，如果您要求，操作系统会给您更多内存，但它也可以强制限制（如`ulimit`在 linux 上），此时它可以拒绝给您更多内存。碎片对于操作系统来说不是问题，因为它在*pages*中提供内存。然而，你的进程中的碎片可能会导致你的分配器请求更多的页面，即使有空的空间。

5.  是的。

6.  是的，但是通常有特定于操作系统的方法来创建多个进程可以访问的共享内存区域。

7.  堆栈溢出本身不会使任何东西崩溃，它会导致将内存值写入可能包含其他值的位置，从而破坏它。对损坏的内存进行操作会导致崩溃。当您的进程访问未映射的内存时（请参阅下面的注释），它会崩溃，不仅仅是线程，而是整个进程。它不会影响其他进程，因为它们的内存空间是隔离的。（这在 Windows 95 等旧操作系统中并非如此，所有进程共享相同的内存空间）。

8.  在 C++ 中，堆栈分配的对象在进入块时创建，并在退出块时销毁。虽然堆栈上的实际空间可能分配得不那么精确，但构造和销毁将在这些特定点进行。

9.  x86 进程上的堆栈指针可以任意操作。编译器通常会生成代码，只需将空间量添加到堆栈指针，然后为堆栈上的值设置内存，而不是执行一堆推送操作。

10.  进程的栈和堆都存在于同一个内存空间中。

概述内存的组织方式可能会有所帮助：

*   你有内核看到的物理内存。
*   当进程请求时，内核将物理内存页面映射到虚拟内存页面。
*   一个进程在自己的虚拟内存空间中运行，不知道系统上的其他进程。
*   当一个进程启动时，它会将可执行文件的部分（代码、全局变量等）放入其中的一些虚拟内存页面中。
*   分配器从进程中请求页面以满足 malloc 调用，此内存构成堆。
*   当一个线程启动（或进程的初始线程）时，它会向操作系统询问构成堆栈的几页。（您也可以询问您的堆分配器，并将它提供给您的空间用作堆栈）。
*   当程序运行时，它可以自由访问其地址空间、堆、栈等所有内存。
*   当您尝试访问未映射的内存空间区域时，您的程序会崩溃。（更具体地说，您会从操作系统获得一个信号，您可以选择处理该信号）。
*   堆栈溢出往往会导致您的程序访问这些未映射的区域，这就是堆栈溢出往往会使您的程序崩溃的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T03:38:25.843

1.  分配全局变量的位置实际上取决于系统。有些系统会将它们静态地放在二进制文件中，有些系统会将它们分配到堆上，有些系统会将它们分配到堆栈上。如果一个全局变量是一个指针，你可以`delete`使用它指向的值，但是没有办法清除该内存，否则。应用程序退出时将自动调用全局变量的析构函数（好吧，也许不是使用 SIGTERM）
2.  我不是很肯定，但我想它是由操作系统管理的，特别是内核。
3.  是的，而且仅限于某一点。例如，您不能进行无限递归，因为值会（没有双关语）叠加。你会得到一个，等待它，*堆栈溢出*（AHH，就是这样，他说的！）
4.  某些操作系统可能会通过单独的进程施加堆大小限制，但通常如果您未能分配内存，那是因为没有剩余内存了。
5.  所有线程共享一个公共堆，所​​以是的，它们都可以访问全局变量、动态分配等。
6.  通常是正确的，尽管在一些非常简单的架构上这可能不是真的。在大多数情况下，操作系统在虚拟表的上下文中执行进程，因此您使用的指针值实际上指向的内存地址与它们看起来的不同。
7.  当前进程，如果按进程表示操作系统级进程。
8.  我假设这是正确的，但我不知道自己。
9.  这个不在我的驾驶室里。
10.  是的，有点。正如我之前提到的，大多数操作系统使用 vtables 将进程指针映射到主内存。另外，考虑分页到磁盘（交换）

# php - 从 PHP => JSON => JS 时的空值

> ID：14493358
> 
> 赞同：0
> 
> 时间：2013-01-24T03:17:04.417
> 
> 标签：php, javascript, json

我创建了一个到我的数据库的 PHP 连接并进行了以下查询：

```
$taxRates = array();
while($row = mysql_fetch_assoc($result)) {
    $taxRates[] = $row['mar_tax_rate'];
} 
```

然后我将结果编码如下：

```
$jsonobj = json_encode($taxRates, JSON_NUMERIC_CHECK);
echo "This is jsonobj:<br>" . $jsonobj . "<br>"; 
```

返回：

```
This is jsonobj:
[0,0.35,0.35,0.35,0.35,0.35,0.35,0.35,0.35] 
```

我遇到的问题是这个。当我尝试将这些结果回显到 JS 中时，我的结果是空的（据我所见）——不是空数组，什么都没有。这就是我试图将结果输入 JS 的方式：

```
data:[<?php echo $jsonobj; ?>] 
```

返回：

```
data: 
```

我试图使用警告 PHP 变量

```
alert("<?php echo $jsonobj; ?>"); 
```

这会产生警报，但也是空的。

有什么想法吗？

这是完整的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<script type="text/javascript" src="includes/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="includes/js/highcharts.2.3.2.js"></script>
<script type="text/javascript" src="includes/js/highstock.src.js"></script> 

<script type="text/javascript">
$(document).ready(function() {
  drawChart();
});

function drawChart() {

alert("<?php echo join($jsonobj); ?>");
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'chart',
        type: 'column',
    },      
    credits: {
        enabled: false
    },  
    series: [{
        data:[<?php echo $jsonobj; ?>]
    }]
});
};
</script>

</head>

<body>

<button style="height:100px; width:300px;" onclick="drawChart();">Redraw the Chart</button><br />

<div id="chart"></div>

<?php 
$link = mysql_connect('url', 'username', 'password'); 
if (!$link) { 
    die('Could not connect: ' . mysql_error()); 
} 
//mysql_close($link);

$db_selected = mysql_select_db('bloch',$link); 
if (!$db_selected) {
    die ('Can\'t use Bloch Database : ' . mysql_error());
}

$result = mysql_query('SELECT mar_tax_rate from bloch.bloch_deficit');
if (!$result) {
    die('Invalid query: ' . mysql_error());
}

$taxRates = array();
while($row = mysql_fetch_assoc($result)) {
    $taxRates[] = $row['mar_tax_rate'];
}

$jsonobj = json_encode($taxRates, JSON_NUMERIC_CHECK);
echo "This is jsonobj:<br>" . $jsonobj . "<br>";
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:41:25.247

在您尝试将其放入 HTML 之前，您的变量没有被定义。在您的 HTML 之前使用您需要的内容创建变量，以便将其正确发送到页面。

# facebook-graph-api - 找不到嵌入式系统的任何 SDK 资源

> ID：14493361
> 
> 赞同：0
> 
> 时间：2013-01-24T03:17:32.680
> 
> 标签：facebook-graph-api, embedded, system

我们想将照片分享到 SNS，例如。通过 OS 系统为 ThreadX RTOS 的相机进行 FB。

但是我们找不到任何适用于 ThreadX RTOS 系统的 SDK 资源。

我们有机会通过 ThreadX RTOS 系统分享照片到 FB 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:21:00.543

Facebook 的 API 基于结构化 HTTP 调用，您可以编写代码以任何语言与网络堆栈进行交互；该文档应该适用于您使用的任何语言，尽管它可能会在示例中引用 Facebook 的 PHP 或 Javascript SDK。

您最大的问题将是身份验证，这需要设备上的网络浏览器可以访问互联网，以便用户登录并授予对您的应用程序的访问权限；如果你能找到一种方法来做到这一点，那么 API 就不应该有其他问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-11T15:21:49.530

ThreadX 有另一个名为 NetX 的包，它支持 TCP/IP 通信。

请参见，

对于 NetX， [https: //rtos.com/solutions/netx/embedded-network/](https://rtos.com/solutions/netx/embedded-network/)

NetX Duo (IP V4/v6)， [https: //rtos.com/solutions/netx-duo/embedded-network-stack/](https://rtos.com/solutions/netx-duo/embedded-network-stack/)

# ios - iOS PhoneGap 2.3 Config.xml 混淆

> ID：14493364
> 
> 赞同：1
> 
> 时间：2013-01-24T03:17:59.520
> 
> 标签：ios, cordova

好的，所以我正在尝试将我当前使用 PhoneGap 的 Android 应用程序移植到 iOS。在 Android 世界中，我使用 config.xml 文件来存储设置，例如启动屏幕和屏幕超时以及图标 url。我遇到的问题是如何让它在 xcode 中的 iOS 上工作？在 Adob​​e 的示例 PhoneGap 项目中，他们声明 cordova.plist 文件在 2.3 中消失并被 config.xml 替换，但随后 adobe 又声明 config.xml 文件用于 Adob​​e PhoneGap App Builder。如果我不想使用 App Builder，我在哪里存储我的设置？我正确安装了软件包，因为我的应用程序加载正常，但我似乎无法更改任何启动画面或超时设置。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T08:57:08.630

如果我理解正确，您想更新您的启动画面。您应该通过工作区左侧的 xCode finder 替换默认的 png 文件。然后，只需清理并重建。

# php - 构造函数中的 PHP 动态方法

> ID：14493365
> 
> 赞同：0
> 
> 时间：2013-01-24T03:18:01.267
> 
> 标签：php, class

我希望能够在其中创建方法`__construct`

我尝试通过以下方式使用 lambda

```
// This is what I am trying to achieve as an end result
class A extends Z{
    public function __construct() {
        parent::__construct()
    }

    public function myfunc() { // do something }
}

// This was an attempt to implement it
class A extends Z{
    public function __construct() {
        //example
        if ($something_is_true) {
            $this->myfunc = function () {}
        }
        parent::__construct()
    }
} 
```

我希望这能解释我想要达到的目标

**编辑**

我已将 URL 映射到函数，并且我希望有一些逻辑来确定类中存在哪些 URL 映射函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:44:15.753

不要认为这是可能的。但是另一种在类中动态“创建”方法的方法是使用神奇的[__call()](http://php.net/manual/en/language.oop5.overloading.php#object.call)方法。

实现此方法后，任何对对象调用不存在的方法的尝试都将调用 __call() 方法。传入的第一个参数将是用户调用的函数的名称，第二个参数将是参数。

有关详细信息，请参阅[手册](http://php.net/manual/en/language.oop5.overloading.php#object.call)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:33:51.587

一旦定义了一个类，就不能使用标准 PHP 向它添加新方法。我也建议使用 __call，但如果您可以使用变量变量，您也可以通过使用 create_function 动态创建函数内容来完成您想要的：

```
<?php

class A
{
    public function __construct()
    {
        $this->addUpEchoAndReturn=create_function('$a,$b','$c=$a+$b;echo "$a+$b=$c<hr />";return $c;');
    }
    public function add_up_and_echo($a,$b,$c,$d)
    {
        $fn=$this->addUpEchoAndReturn;
        return $fn($fn($a, $b),$fn($c, $d));
    }
}

$x=new A();
$result=$x->add_up_and_echo(3,4,5,25);
echo "<hr /><hr />Final Result: $result";
?> 
```

# xml - 在 xslt 上对相同的属性进行分组

> ID：14493366
> 
> 赞同：1
> 
> 时间：2013-01-24T03:18:16.413
> 
> 标签：xml, xslt

我有一个如下的 XML 文件，我想根据出版年份对书籍进行分组，并计算每年的书籍数量。按升序对结果进行排序。

```
<body>
  <outline text="A">
    <outline text="Abelson, Harold" author="Harold Abelson" title="Struktur und Interpretation von Computerprogrammen. Eine Informatik-Einführung" publisher="Springer Verlag" isbn="3540520430" year="1991"/>
    <outline text="Abrahams, Paul W." author="Paul W. Abrahams" title="Tex for the Impatient" publisher="Addison-Wesley Pub Co" isbn="0201513757" year="2000"/>
  </outline>
  <outline text="B">
    <outline text="Bach, Fred" author="Fred Bach" title="UNIX Handbuch zur Programmentwicklung" publisher="Hanser Fachbuchverlag" isbn="3446151036"/>
    <outline text="Bach, Maurice J." author="Maurice J. Bach" title="Design of the UNIX Operating System" publisher="Prentice Hall PTR" isbn="0132017997" year="1986"/>
  </outline>
</body> 
```

这是例外的输出

```
 <p> Group by Year </p>
    <table border="1">
        <tr bgcolor="yellow">
            <th>Year</th>
            <th>Number</th>
        </tr>
        <tr>
            <td>1963</td>
            <td>1</td>
        </tr>
        <tr>
            <td>1966</td>
            <td>1</td>
        </tr> 
```

这是我的代码：

```
<xsl:template match="body">
    <xsl:copy>
      <table border="1">     
        <tr bgcolor="Yellow">
            <th class="cell"><span> Year </span></th>
            <th class="cell"><span> Count </span></th>
        </tr>
        <xsl:apply-templates select="outline"/>
      </table>
    </xsl:copy>
  </xsl:template>

 <xsl:key  name="groupbyyear"  match="outline" use="@year"/)/>
   <xsl:template match="outline/outline">
    <tr>
      <xsl:sort select="year" order="ascending" />
    </tr>
  </xsl:template>

</xsl:stylesheet> 
```

我不确定如何使用 xsl 键功能以及在键功能之后我应该在模板内做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:35:54.750

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kOutlineByYear" match="outline/outline" use="@year"/>

 <xsl:template match="/*">
    <p> Group by Year </p>
    <table border="1">
        <tr bgcolor="yellow">
            <th>Year</th>
            <th>Number</th>
        </tr>
     <xsl:apply-templates select=
      "outline/outline[generate-id()
                      =generate-id(key('kOutlineByYear',@year)[1])
                      ]">
      <xsl:sort select="@year" data-type="number"/>
     </xsl:apply-templates>
    </table>
 </xsl:template>

 <xsl:template match="outline/outline">
   <tr>
     <td><xsl:value-of select="@year"/></td>
     <td><xsl:value-of select="count(key('kOutlineByYear',@year))"/></td>
   </tr>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（提供的文档稍作修正以使其更具代表性）：

```
<body>
  <outline text="A">
    <outline text="Abelson, Harold"
     author="Harold Abelson"
     title="Struktur und Interpretation von Computerprogrammen. Eine Informatik-Einführung"
     publisher="Springer Verlag"
     isbn="3540520430" year="1991"/>
    <outline text="Abrahams, Paul W." author="Paul W. Abrahams"
     title="Tex for the Impatient"
     publisher="Addison-Wesley Pub Co" isbn="0201513757" year="2000"/>
  </outline>
  <outline text="B">
    <outline text="Bach, Fred" author="Fred Bach"
    title="UNIX Handbuch zur Programmentwicklung"
    publisher="Hanser Fachbuchverlag" isbn="3446151036" year="2000"/>
    <outline text="Bach, Maurice J."
    author="Maurice J. Bach"
    title="Design of the UNIX Operating System"
    publisher="Prentice Hall PTR" isbn="0132017997" year="1986"/>
  </outline>
</body> 
```

**产生想要的正确结果：**

```
<p> Group by Year </p>
<table border="1">
   <tr bgcolor="yellow">
      <th>Year</th>
      <th>Number</th>
   </tr>
   <tr>
      <td>1986</td>
      <td>1</td>
   </tr>
   <tr>
      <td>1991</td>
      <td>1</td>
   </tr>
   <tr>
      <td>2000</td>
      <td>2</td>
   </tr>
</table> 
```

**说明**：

正确使用**[孟池分组法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kOutlineByYear" match="outline/outline" use="@year"/>

 <xsl:template match="/*">
    <p> Group by Year </p>
    <table border="1">
        <tr bgcolor="yellow">
            <th>Year</th>
            <th>Number</th>
        </tr>
     <xsl:for-each-group select="outline/outline"
      group-by="@year">
       <xsl:sort select="current-grouping-key()" data-type="number"/>
           <tr>
             <td><xsl:value-of select="current-grouping-key()"/></td>
             <td><xsl:value-of select="count(current-group())"/></td>
           </tr>
      </xsl:for-each-group>
    </table>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，再次产生相同的正确结果**：

```
<p> Group by Year </p>
<table border="1">
   <tr bgcolor="yellow">
      <th>Year</th>
      <th>Number</th>
   </tr>
   <tr>
      <td>1986</td>
      <td>1</td>
   </tr>
   <tr>
      <td>1991</td>
      <td>1</td>
   </tr>
   <tr>
      <td>2000</td>
      <td>2</td>
   </tr>
</table> 
```

**说明**：

1.  **[`<xsl:for-each-group>`](http://www.w3.org/TR/xslt20/#xsl-for-each-group)**使用带有`group-by`属性的 XSLT 2.0 指令。

2.  使用 XSLT 2.0 函数**[`current-group()`](http://www.w3.org/TR/xslt20/#current-group)**和**[`current-grouping-key()`](http://www.w3.org/TR/xslt20/#function-current-grouping-key)**.

# asp.net - 视图中的 MVC Easy 实用程序？

> ID：14493368
> 
> 赞同：2
> 
> 时间：2013-01-24T03:18:29.523
> 
> 标签：asp.net, asp.net-mvc-4

我正在使用 asp.net MVC 4，在我看来我想做这样的事情

```
<a href=@NamespaceHere.StaticUtil.TheFunctionIUseAlot("/blah", 1, Viewbag, "link and view specific") class="thing">my link</a> 
```

我不喜欢它。有没有办法可以隐含命名空间？我不能像 global.request.current.viewbag 一样传入 Viewbag 并以某种方式获取它吗？

如果有帮助，我不需要 TheFunctionIUseAlot 是静态的。我只需要在我的所有视图中都可以轻松调用它，并希望我不想通过 viewbag。我通过 viewbag 的原因是因为我需要控制器中的一些东西，我也卡在 viewbag 中。也许我可以把它放在模型中，但我不希望在传递模型而不是 viewbag 的地方出现同样的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:23:46.560

`@using NamespaceHere;`您可以通过在视图顶部添加或在视图 Web 配置中将其注册为命名空间来使命名空间隐含。像这样的东西：

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="NamespaceHere"/>
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

如果您为视图使用自定义页面基本类型，则可以访问函数中的视图包。您可以在此处找到有关操作的说明：http: [//haacked.com/archive/2011/02/21/changeing-base-type-of-a-razor-view.aspx](http://haacked.com/archive/2011/02/21/changing-base-type-of-a-razor-view.aspx)。

在您的情况下，要访问 ViewBag，您需要`FunctionThatIUseALot`在将 WebViewPage 作为构造函数参数（动态或 ViewDataDictionary）的非静态类中定义。然后，在你的 WebViewPage 的`InitHelpers`覆盖中，你可以创建你的帮助类，传入`this`. 这将使您能够访问 WebViewPage 的所有标准属性。

像这样的东西：

```
public class Utils {
    private WebViewPage page;
    public Utils(WebViewPage page) { this.page = page; }

    public FunctionThatIUseALot(string someParameter) {
        string someViewBagValue = page.ViewBag.SomeViewBagValue;
    }
}

public abstract class CustomWebViewPage : WebViewPage {
  public Utils Utils { get; set; } // Utils is your helper class

  public override void InitHelpers() {
    base.InitHelpers();
    Utils = new Utils(this);
  }
} 
```

以上并不是您需要做的所有事情才能使其工作，其余的您需要阅读文章。但最终结果应该是您可以`@Utils.FunctionThatIUseALot("some value")`直接在视图中调用。

注意：您需要这样做两次——一次用于标准`WebViewPage`基类，一次用于`WebViewPage<TModel>`基类。

# matlab - 训练模型时遇到的索引超出矩阵维度

> ID：14493370
> 
> 赞同：1
> 
> 时间：2013-01-24T03:18:58.733
> 
> 标签：matlab, machine-learning, computer-vision, object-detection

我在使用 PASCAL 开发套件和由 Felzenszwalb、D. McAllester、D. Ramaman 和他的团队在 Matlab 中实现的经过判别训练的可变形零件模型系统来训练模型时遇到问题。

目前，当我尝试使用 10 个正图像和 10 个负图像为“猫”训练一个 1 分量模型时出现此输出错误。

```
Error:

??? Index exceeds matrix dimensions.

Error in ==> pascal_train at 48
models{i} = train(cls, models{i}, spos{i}, neg(1:maxneg),
0, 0, 4, 3, ...

Error in ==> pascal at 28
model = pascal_train(cls, n, note); 
```

这是 pascal_train 文件

```
function model = pascal_train(cls, n, note)

% model = pascal_train(cls, n, note)
% Train a model with 2*n components using the PASCAL dataset.
% note allows you to save a note with the trained model
% example: note = 'testing FRHOG (FRobnicated HOG)

% At every "checkpoint" in the training process we reset the 
% RNG's seed to a fixed value so that experimental results are 
% reproducible.
initrand();

if nargin < 3
  note = '';
end

globals; 
[pos, neg] = pascal_data(cls, true, VOCyear);
% split data by aspect ratio into n groups
spos = split(cls, pos, n);

cachesize = 24000;
maxneg = 200;

% train root filters using warped positives & random negatives
try
  load([cachedir cls '_lrsplit1']);
catch
  initrand();
  for i = 1:n
    % split data into two groups: left vs. right facing instances
    models{i} = initmodel(cls, spos{i}, note, 'N');
    inds = lrsplit(models{i}, spos{i}, i);
    models{i} = train(cls, models{i}, spos{i}(inds), neg, i, 1, 1, 1, ...
                      cachesize, true, 0.7, false, ['lrsplit1_' num2str(i)]);
  end
  save([cachedir cls '_lrsplit1'], 'models');
end

% train root left vs. right facing root filters using latent detections
% and hard negatives
try
  load([cachedir cls '_lrsplit2']);
catch
  initrand();
  for i = 1:n
    models{i} = lrmodel(models{i});
    models{i} = train(cls, models{i}, spos{i}, neg(1:maxneg), 0, 0, 4, 3, ...
                      cachesize, true, 0.7, false, ['lrsplit2_' num2str(i)]);
  end
  save([cachedir cls '_lrsplit2'], 'models');
end

% merge models and train using latent detections & hard negatives
try 
  load([cachedir cls '_mix']);
catch
  initrand();
  model = mergemodels(models);
 48:   model = train(cls, model, pos, neg(1:maxneg), 0, 0, 1, 5, ...
                cachesize, true, 0.7, false, 'mix');

save([cachedir cls '_mix'], 'model');
end

% add parts and update models using latent detections & hard negatives.
try 
  load([cachedir cls '_parts']);
catch
  initrand();
  for i = 1:2:2*n
    model = model_addparts(model, model.start, i, i, 8, [6 6]);
  end
  model = train(cls, model, pos, neg(1:maxneg), 0, 0, 8, 10, ...
                cachesize, true, 0.7, false, 'parts_1');
  model = train(cls, model, pos, neg, 0, 0, 1, 5, ...
                cachesize, true, 0.7, true, 'parts_2');
  save([cachedir cls '_parts'], 'model');
end

save([cachedir cls '_final'], 'model'); 
```

我在第 48 行突出显示了错误发生的代码行。

我很确定系统正在读取正面和负面图像以进行正确训练。我不知道这个错误发生在哪里，因为 matlab 没有准确指出哪个索引超出了矩阵维度。

如果我在某处做错了，我试图尽可能地整理代码。

我应该从哪里开始寻找任何建议？

好的，我尝试使用 display 来检查 pascal_train 使用的变量；显示（一）；显示（尺寸（型号））；显示（大小（spos））；显示（长度（负））；显示（最大）；

所以返回的结果是；

```
 1

 1     1

 1     1

10 
```

200

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:53:56.987

只需更换：

```
models{i} = train(cls, models{i}, spos{i}, neg(1:maxneg), 
```

作为

```
models{i} = train(cls, models{i}, spos{i}, neg(1:min(length(neg),maxneg)), 
```

这个脚本的其他地方有几个类似的句子，你应该修改它们。

原因是你的训练样本集很小，所以你列出的 'neg' 比`maxneg(200)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:57:04.733

我没有你的问题的答案，但这里有一个建议可以帮助你自己调试这个问题。

在 Matlab 菜单中，转到 Debug-> Stop if Errors/Warnings ... 并选择“Always stop if error (dbstop if error)”。现在再次运行您的脚本，这一次当您收到错误时，matlab 将停在发生错误的行，就好像您在那里放置了一个断点一样。此时，您可以使用整个工作区，您可以检查所有变量和矩阵大小，以查看哪个变量给您所看到的错误。

# c++ - 仅使用素数 2、3 和 5 生成序列，然后显示第 n 项 (C++)

> ID：14493373
> 
> 赞同：0
> 
> 时间：2013-01-24T03:19:22.687
> 
> 标签：c++, numbers, hamming-numbers

我正在解决一个问题，该问题要求使用素数 2、3 和 5 生成一个序列，然后在序列中显示第 n 个数字。所以，如果我让程序显示第 1000 个数字，它应该显示它。

我不能使用数组或类似的东西，只能使用基本的决策和循环。

我开始研究它并碰壁......这就是我得到的：

```
#include <iostream>

using namespace std;
int main() {
    unsigned int n=23;
    for(int i=2; i<n; i++){
        if(i%2==0){
            cout<<i<<", ";
        }else if(i%3==0){
            cout<<i<<", ";
        }else if(i%5==0){
            cout<<i<<", ";
        }
    }

    return 0;
} 
```

不幸的是，该代码没有执行所需的操作。它显示诸如 14 之类的数字，其中包括一个素数 7.... 这些数字只能除以 3 个指定的素数 (2,3,5)。

我发现了一些我试图理解的信息，到目前为止还不确定如何实现它......也许使用了很多 for() 循环？所以，看来我必须使用 2^n * 3^m * 5^k 的概念，其中 n+m+k>0。

我想我必须通过一个测试来运行一个数字，它首先检查它是否可以被 2^1 * 3^0 * 5^0 完全整除，然后是 2^0 * 3^1 * 5^0，然后是 2^ 0 * 3^0 * 5^1，等等......只是不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T04:02:20.747

这是一个著名的问题，在 Richard Hamming 之后被称为 Hamming 问题，并且在Dijkstra的名著*A Discipline of Programming中有介绍。*数学家称这些数字（如果包括 1）为 5 平滑数字，因为它们的素数分解只包含小于或等于 5 的素数。

您应该注意的是，您可以从彼此生成数字。这是思考问题的一种方法：

```
#include <set>
#include <iostream>

using namespace std;

int
main()
{
    const unsigned n = 23;

    set<unsigned> s;
    s.insert(2);
    s.insert(3);
    s.insert(5);

    for (unsigned i = 0; i < n; ++i)
    {
        // This returns the smallest element in the set.
        unsigned x = *s.begin();
        cout << x << '\n';

        // Erase the smallest element.
        s.erase(s.begin());

        // Insert the multiples of x.
        s.insert(2*x);
        s.insert(3*x);
        s.insert(5*x);
    }
} 
```

这需要 O(n log n) 时间来打印 n 个数字。通过合并惰性流，可以使用类似的算法在 O(n) 时间内完成。我的解决方案使用`boost::transform_iterator`and `boost::iterator_facade`，所以我不建议初学者使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:06:55.423

```
#include <type_traits>
#include <utility>
#include <iostream>

template<int... s>
struct seq {};

template<int n, typename seq, typename=void>
struct can_be_factored_into;

template<int n, int first, int... rest>
struct can_be_factored_into< n, seq<first, rest...>, typename std::enable_if< (n > 1) && (n%first) >::type >: can_be_factored_into< n, seq<rest...> > {};

template<int n, int first, int... rest>
struct can_be_factored_into< n, seq<first, rest...>, typename std::enable_if< (n > 1) && !(n%first) >::type >: can_be_factored_into< n/first, seq<first, rest...> > {};

template<int n, int... rest>
struct can_be_factored_into< n, seq<rest...>, typename std::enable_if< n == 1 >::type: std::true_type {};

template<int n>
struct can_be_factored_into< n, seq<>, typename std::enable_if< n != 1 >::type: std::false_type {};

template<int n>
using my_test = can_be_factored_into< n, seq<2,3,5> >;

template<template<int n>class test, int cnt, int start=1, typename=void>
struct nth_element;

template<template<int n>class test, int cnt, int start>
struct nth_element<test, cnt, start, typename std::enable_if< (cnt>1)&&test<start>::value >::type >:
  nth_element<test, cnt-1, start+1 > {};

template<template<int n>class test, int cnt, int start>
struct nth_element<test, cnt, start, typename std::enable_if< (cnt==1)&&test<start>::value >::type >
  { enum { value = start }; };

template<template<int n>class test, int cnt, int start>
struct nth_element<test, cnt, start, typename std::enable_if< !test<start>::value >::type >:
  nth_element<test, cnt, start+1 > {};

int main() {
  std::cout << nth_element< my_test, 1500 >::value << "\n";
} 
```

一旦你编译了上面的代码，它将在不到 1 分钟的时间内执行。

缺点是它会破坏大多数编译器的编译时间递归限制。（这是你每天的轻描淡写）

为了改善这一点，`nth_element`需要重写以在该范围内进行指数爆炸搜索和分而治之。您可能还必须修改代码以使用 64 位值，因为上述序列的第 1500 个元素可能大于 2^32。

还是让它快速编译也是一个要求？:)

这是汉明实现的第一步。尚未编译：

```
#include <iostream>
#include <utility>

template<long long... s>
struct seq;

template<long long cnt, typename seq, typename=void>
struct Hamming;

template<long long cnt, long long first, long long... rest>
struct Hamming<cnt, seq<first, rest...>, typename std::enable_if< cnt == 0 >::type> {
  static const long long value = first;
};

template<long long x, typename seq>
struct prepend;
template<long long x, long long... s>
struct prepend<x, seq<s...>>
{
  typedef seq<x, s...> type;
};

template<typename s1, typename s2, typename=void>
struct merge;

template<long long begin_s1, long long... s1, long long begin_s2, long long... s2>
struct merge< seq< begin_s1, s1... >, seq< begin_s2, s2... >, typename std::enable_if< (begin_s1 < begin_s2) >::type > {
  typedef typename prepend< begin_s1, typename merge< seq< s1... >, seq< begin_s2, s2... > >::type >::type type;
};

template<long long begin_s1, long long... s1, long long begin_s2, long long... s2>
struct merge< seq< begin_s1, s1... >, seq< begin_s2, s2... >, typename std::enable_if< (begin_s1 >= begin_s2) >::type > {
  typedef typename prepend< begin_s2, typename merge< seq< begin_s1, s1... >, seq<  s2... > >::type >::type type;
};
template<long long begin_s1, long long... s1>
struct merge< seq< begin_s1, s1... >, seq<>, void > {
  typedef seq< begin_s1, s1... > type;
};
template<long long... s2>
struct merge< seq<>, seq<s2...>, void > {
  typedef seq< s2... > type;
};

template<long long cnt, long long first, long long... rest>
struct Hamming<cnt, seq<first, rest...>, typename std::enable_if< cnt != 0 >::type>:
  Hamming<cnt-1, typename merge< seq<first*2, first*3, first*5>, seq<rest...> >::type >
{};

int main() {
  std::cout << Hamming<1500, seq<1>>::value << "\n";
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T03:47:59.593

这段代码会做到这一点。将问题分解为更小的问题通常是一个好计划。

```
int main() {
    unsigned int n=23;

    unsigned int counter=0;
    unsigned int answer;
    for ( answer = 2; counter < n; ++answer ) {
        if ( isNotDivisibleByAPrimeGreaterThan5( i ) {
           ++counter;
        }
    }
    cout << answer;
    return 0;
} 
```

现在你只需要编写这个函数。

```
bool isNotDivisibleByAPrimeGreaterThan5( unsigned int i ) {
  // return true if i is not divisable by a prime greater than 5.
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T05:58:07.357

检查这个。

```
#include <iostream>
using namespace std;

int IsPrime(int var);
int CheckifPrimeGreaterThaFive(int Num);
int GetFactors(int Num)
{
    int i =0,j=0;
    for (i =2,j=0; i <= Num; i++)
    {
        if (Num%i == 0)
        {
           if (1 == CheckifPrimeGreaterThaFive(i))
           {
                 return 1;
              }
        }
    }
    return 0;
}

int CheckifPrimeGreaterThaFive(int Num)
{
   if ((Num != 2 && Num != 3 && Num != 5) && IsPrime(Num))
   {

           return 1;
   }

    return 0;
}

int IsPrime(int var)
{
    for (int i = 2; i <= var/2; i++)
    {
        if (var % i == 0)
           return 0;
    }
    return 1;
}

int main() {
    int n=98;
    int i, FactorsCount=0;

    for(i=2; i<n; i++)
    {
        if (0 == GetFactors(i))
        {  
           cout<<" "<<i;
        }   
    }
    return 0;
} 
```

# php - 在自定义 PHP 变量上使用 $_ 前缀是否安全

> ID：14493385
> 
> 赞同：0
> 
> 时间：2013-01-24T03:20:45.910
> 
> 标签：php, variables

我知道可以使用 $_ 前缀设置自定义 PHP 变量，但是我不确定这样做是否安全？我不会设置很多，也不会覆盖像 $_SERVER 或 $_COOKIE 这样的预设变量。我应该完全避免这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T03:23:20.280

`$_`只要您不覆盖任何超全局变量（您需要），初始化以开头的变量是完全安全的。

但是，`$_`变量上的前缀表明它们是超全局变量或具有某种其他类型的魔术行为，因此对“正常”变量这样做是不标准的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:35:55.130

这种表示法通常在类中用于表示私有或受保护成员（属性或方法）。在这种情况下，它是完全安全的。

请注意，[php 手册](http://php.net/manual/en/language.oop5.magic.php)对使用双下划线作为前缀方法有一个警告，因为这种表示法是为“魔术”方法保留的。此警告不适用于单个下划线前缀。

# list - Scala根据条件从列表中提取

> ID：14493386
> 
> 赞同：1
> 
> 时间：2013-01-24T03:20:47.460
> 
> 标签：list, scala, map, slice

我有一个单词列表作为列表，我想提取长度可能在 5 到 10 之间的单词，我正在使用以下代码，但似乎不起作用。我也只能使用 val 而不是 var。

```
val sentence = args(0)
val words = sentence.split(" ")
val fullsort = words.sortBy(w => w.length -> w)
val med = fullsort.map(x => if(x.length>3 && x.length<11) x) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T03:24:10.117

```
val sentence = args(0)
val words = sentence.split(" ")
val results = words.filter(word => word.length >= 5 && word.length <= 10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:11:39.630

尝试这个

```
val sentence = args(0)
val words = sentence.split(" ")
val fullsort = words.sortBy(w => w.length -> w)

val med = fullsort collect {case x:String if (x.length >= 5 && x.length <= 10) => x} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:09:20.483

另一种选择是让正则表达式为您完成更多工作：

```
val wordLimitRE  = "\\b\\w{5,10}\\b".r
val wordIterator = wordLimitRE.findAllMatchIn(sentence).map {_.toString} 
```

这个特殊的正则表达式以一个单词边界模式***\b***开始，然后是一个范围有限的匹配多个单词字符***\w{lower, upper}***然后最后是另一个单词边界模式***\b***

该方法为每个匹配`findAllMatchIn`返回一个`Iterator[Regex.Match]`（由于单词边界模式，匹配不会重叠）。`map {_.toString}`返回一个`Iterator[String]`

# connection - 连接报告

> ID：14493393
> 
> 赞同：-1
> 
> 时间：2013-01-24T03:21:47.560
> 
> 标签：connection, ip, ireport

我很难尝试从我的 ireport 与系统建立连接。我的问题是我使用的系统是集成的，换句话说，我的几个客户将使用相同的系统，因此使用相同的报告。这就是问题所在，银行的名称和每个客户的 ip 不会每次都相同。所以我想知道jasper如何从系统中获取银行ip和银行名称，而不是通过ireport建立的连接？无论如何通过代码将这些数据发送到 ireport 吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-21T12:44:48.360

以下是 iReport 提供的数据源和连接类型列表：

-JDBC 连接。

-JavaBean 集合数据源。

-XML 数据源。

-CSV 数据源。

- 休眠连接。

- 弹簧加载的休眠连接。

-Hadoop Hive 数据源。

-JRDataSourceProvider。

- 自定义数据源。

-蒙德里安 OLAP 连接。

-XMLA 连接。

-EJBQL 连接。

- 空数据源。

对于您的情况，您需要“JavaBean 集合数据源”来填充您的 java 代码中的报告，使用这两个类：net.sf.jasperreports.engine.data.JRBeanCollectionDataSource，net.sf.jasperreports.engine.data.JRBeanArrayDataSource

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:24:29.260

我的系统通过类进行通信`Connection`。Java可以`.jasper`通过这个类与数据库通信吗？

**我的连接**

**===============**

```
 package newpackage;

import java.sql.Connection;

import java.sql.DriverManager;

import java.sql.SQLException;

import java.util.logging.Level;

import java.util.logging.Logger;

import javax.swing.JOptionPane;

/**

 *
 * @author User

 */

public class ConnectionJava {

    Connection conn;

    public Connection conectar() {
        try {
            Class.forName(DriverConnectionJava);
            conn = DriverManager.getConnection(database, username, password);
        } catch (SQLException ex) {
            Logger.getLogger(ConnectionJava.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(null, "Error login with data base", "ERROR!", JOptionPane.ERROR_MESSAGE);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(ConnectionJava.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(null, "Error connection data base", "ERROR!", JOptionPane.ERROR_MESSAGE);
        }

        return conn;
    }

    public void desconect() {
        try {
            conn.close();
        } catch (SQLException ex) {
            Logger.getLogger(ConnectionJava.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    private String database = "jdbc:mysql://localhost/Java";
    private String username = "root";
    private String password = "root";
    private String DriverConnectionJava = "com.mysql.jdbc.Driver";
} 
```

# javascript - 将 c 的每个值从 jsp 传递到 Javascript

> ID：14493397
> 
> 赞同：0
> 
> 时间：2013-01-24T03:22:14.197
> 
> 标签：javascript, jsp, dom-events

我想将某些项目的多个值从 jsp 传递给 Javascript。由于我的要求，我需要使用 Div 并在该 div 内循环打印数据。

在某些项目行的双倍上，我想将多个值从 jsp 传递给 Javascript。

注意：由于要求，我不能使用选择标签，而是需要使用 Div。

目前，当我使用传递方法`${food.foodItemId}`时`showDetailData()`，没有数据传递给 Javascript。

```
<div class="scroller" ondblclick="showDetailData(${food.foodItemId},'m','desktop');">
        <c:forEach var="food" varStatus="i" items="${foodItemList}">
            <c:out value="${food.foodName}"/>
            <br><br>
        </c:forEach>
</div> 
```

**如何`food.foodItemId~food.foodCategoryId~food.foodName~food.foodPortionName`在双击某些数据行时将具有这种格式 [] 的多个值传递给 Javascript，如下面的代码（使用选择标签）？**

示例如下：

```
<option value="<c:out value="${food.foodItemId}"/>~<c:out value="${food.foodCategoryId}"/>~<c:out value="${food.foodName}"/>~<c:out value="${food.foodPortionName}"/>" ><c:out value="${food.foodName}"/></option> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:59:38.167

我得到了符合我要求的解决方案。

我在 div 中使用了 ul 和 li 标签，这解决了我的问题，并在 ul 标签上使用了双击事件。

```
<div class="scroller">
    <c:forEach var="food" varStatus="i" items="${foodItemList}">
    <c:set var="foodInfo" value="${food.foodItemId}~${food.foodCategoryId}~${food.foodName}~${food.foodPortionName}"/>
    <ul class="scroller_result" ondblclick="showDetailData('${foodInfo}','m','desktop');"">
        <li><c:out value="${food.foodName}"/>
        </li>
    </ul>
    </c:forEach>
</div> 
```

# java - 如果为同一个 JButton 注册了 2 个动作侦听器，则在特定条件下阻止执行 listener2

> ID：14493398
> 
> 赞同：1
> 
> 时间：2013-01-24T03:22:17.940
> 
> 标签：java, swing, awt, actionlistener

我有一个 JButton，为它注册了两个动作监听器。`Listener1`将首先执行，因为它首先注册。所以，我需要的是，在条件匹配的情况下，不应该执行`Listener1`的代码 。`Listener2`如果Listener1中的条件匹配，您能否帮助我，如何防止Listener2的执行。

```
JButton jbtn=new JButton();

jbtn.addActionListener(new ActionListener() {

     //Listener1
     public void actionPerformed(ActionEvent e)
     {
         if(condition==true){
             //do not execute the code of listner2
             //stop further executeion of current action
         }
     }

});

jbtn.addActionListener(new ActionListener() {

     //Listener2
     public void actionPerformed(ActionEvent e)
     {
         //some code
     }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T07:39:21.907

这很简单。`AbstractButton`有方法`getActionListeners()`。因此，您可以删除之前添加的任何侦听器。然后您可以创建您的侦听器，它可以调用另一个侦听器（已从按钮中删除）。像这样的东西：

```
public class MyActionListener implements ActionListener {
  private ActionListener anotherListener;
  public MyActionListener(ActionListener another) {
    anotherListener = another;
  }
  public void actionPerformed(ActionEvent ae) {
    doSomething();
    if (myCondition) {
      anotherListener.actionPerformed(ae);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T03:36:25.457

在我看来，好像您可能使事情过于复杂。为什么不简单地使用一个 ActionListener 或 AbstractAction 并将 if 块嵌套在里面：

```
jbtn.addActionListener(new ActionListener() {   
  public void actionPerformed(ActionEvent e) {
   if(condition) { // no need for the == true part!
     myMethod1();
   } else { // condition is false
     myMethod2();
   }
  }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T03:45:39.093

根据您要触发的确切事件，有时您可以使用`consume() / isConsumed()`. （例如[java.awt.event.InputEvent](http://docs.oracle.com/javase/6/docs/api/)）

你的听众在做任何事情之前检查`isConsumed()`，然后打电话给`consume()`.

这样，假设*他们都遵循此约定*，则只有一个侦听器会收到该事件。因此，如果一个听众来自外部或图书馆类，这将无济于事。并且 Listener 首先获取事件的顺序可能不在您的控制之下。

所以@Hovercraft 的选择可能会更好。取决于您希望如何解耦。

# c - 外部功能不起作用 - 但不确定原因

> ID：14493400
> 
> 赞同：1
> 
> 时间：2013-01-24T03:22:35.267
> 
> 标签：c

我目前正在编写一些代码，到目前为止，一切都编译得很好。代码的目的是这样的：

*   从数据文件中读取输入并将值分配给数组。
*   通过对给定间隔内的数据取平均值并将该间隔中的每个值替换为平均值来“平滑数据”。

这是给我带来麻烦的第二部分。在外部函数中，由于某种原因，当我的“for”循环如下所示时它可以工作：

```
for(i=t; i<t+z; i++) 
```

但我不希望它那样做。我希望它这样做：

```
for(i=t*z; i<(t+1)*z; i++) 
```

当我尝试编译时，它就崩溃了。有谁知道原因吗？这让我困惑了好几个小时。顺便说一下，所有代码如下所示：

```
#include <stdio.h>
#include <stdlib.h>

float foo(float*, int, int);

int main(int argc, char* argv[])
{
    FILE *input;

    const char datafile[]="datainput.dat";
    input=fopen(datafile, "r");

    int i;
    int N=0, t=0;
    int z=100;
    int M=10;
    float *a, avg;

    a=(float*)malloc(M*sizeof(float));

    if((input!=(FILE*) NULL))
    {
        while(fscanf(input, "%e", &a[t++])==1)
        {
            if (t>=M)
            {
                M*=2;
                a=(float *)realloc(a, M*sizeof(float));
            }
            N++;
        }
        float u[N];

        for(t=0; t<N; t++)
        {
            avg = foo(a, z, t);
            u[t] = avg;
        }
        fclose(input);
    }
    else
        printf("Input file could not be opened.\n");

    return(0);
}

float foo(float b[], int z, int t)
{
    int i;
    int k=0;
    float avg;
    float sum=0;

    for(i=t*z; i<(t+1)*z; i++)
    {
        sum+=b[i];
        k++;
    }
    avg = sum/(float)k;

    return(avg);
} 
```

旁注：您可能会注意到在代码中途定义 float u[N] 的不良做法。我真的不喜欢这样，但你会注意到 N 是一个变量，它计算输入文件中的值的数量（最初未知）并且最初设置为 N=0，所以我不确定如何我解决了这个问题。

另外，我之前在这里问过这个问题，但是如果我的 realloc 失败了，它就没有子句。这是我正在做的事情，但目前它在没有它的情况下编译。

此外，所有数据值的形式都是浮点数，有七位小数，采用科学计数法，因此是 %e。

谢谢！

* * *

编辑：这是数据文件中的一些值。尽管左侧的值看起来是有序的，但它们是文件中的实际值，而不是用来表示右侧的值。

```
 8.0800000e+00   7.0872796e-01
   8.0900000e+00   7.1941101e-01
   8.1000000e+00   2.1635408e+00
   8.1100000e+00  -5.4200807e-01
   8.1200000e+00   1.1046968e+00
   8.1300000e+00   1.5833782e+00
   8.1400000e+00   6.6122899e-01
   8.1500000e+00   1.7922273e+00
   8.1600000e+00   1.2446803e+00
   8.1700000e+00   3.7869871e-01
   8.1800000e+00   1.4793635e+00
   8.1900000e+00   1.0508171e+00
   8.2000000e+00   9.1012735e-01
   8.2100000e+00   6.0967729e-01
   8.2200000e+00   1.3834455e+00
   8.2300000e+00  -5.2312924e-01
   8.2400000e+00   9.2566688e-01
   8.2500000e+00   7.8145188e-01
   8.2600000e+00   4.1410150e-01
   8.2700000e+00   1.9796986e+00
   8.2800000e+00   5.9372874e-01
   8.2900000e+00   1.8696331e+00
   8.3000000e+00   2.3058409e+00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:08:47.187

所以我一直盯着这个看了一段时间。这就是我想出的。间隔（我假设是100）。为了理智起见，我`5`在下面的代码中将其更改为，因为您发布的示例数据只有 46 个元素长。我必须假设你的比这*大得多*。

需要注意的一些事项：

*   `foo()`不再依赖于一些古怪的“我在哪里计算我的平均”变量。*调用者*负责将元素的起始位置和计数传递给平均值。正如您将看到的，这使代码*变得更加*简单。这基本上是问题的核心，因为您的分配循环很好（除了不检查您的`realloc`返回值）。没有理由使该函数复杂化以尝试计算某个较大数组中间某处的平均值。把事情简单化。只需让*调用者*告诉函数从哪里开始以及平均多少。

*   虽然没有指定，但我相信`z`是你的“间隔”宽度。下面代码中要注意的是间隔计数计算。间隔数是简单的`(N+(z-1))/z`，这将导致要处理的间隔数，包括可能只是部分的最后一个间隔。从那里，我们简单地遍历原始数组，分割成`z`-size 的切片，计算平均值，然后用上述相同的平均值重写我们刚刚平均的间隔。同样，最后一个间隔可能是部分的，这需要一点额外的照顾。

*   我将数据文件更改为命令行参数`argv[1]`。让我更容易测试。

当然希望这是你要找的。谢谢，如果您打算使用它，**请不要忘记`z`将此代码中的值重置回 100。**

```
#include <stdio.h>
#include <stdlib.h>

float foo(float a[], int count);

int main(int argc, char* argv[])
{
    if (argc !=2)
        return EXIT_FAILURE;

    FILE *input=fopen(argv[1], "r");
    if (input != NULL)
    {
        int z=5,t=0;
        int M=10,N=0;
        float *a = malloc(M*sizeof(float));

        while(fscanf(input, " %e", a + N) ==1 )
        {
            if (++N>=M)
            {
                void *tmp = realloc(a, (M*=2)*sizeof(float));
                if (tmp != NULL)
                {
                    a = tmp;
                }
                else
                {
                    perror("Failed to allocate memory.");
                    exit(EXIT_FAILURE);
                }
            }
        }

        // compute number of intervals we will process. the last
        //  interval may be only a partial.
        for (t=0;t<N;t+=z)
        {
            // how many we're doing in this interval
            int count = (z < (N-t) ? z : (N-t)), k=0;
            float avg =  foo(a+t, count);
            printf("Avg[%d] = %e\n", t/z, avg);

            // smooth over original array with just-found svg.
            for (k=0;k<count; a[t+k++] = avg);
        }
        fclose(input);

        // dump the final array content
        for (t=0;t<N;++t)
            printf("a[%d] = %e\n", t, a[t]);

        // release original array.
        free(a);
    }
    else
    {
        perror("Input file could not be opened.");
    }

    return(0);
}
// find the average of the range of floats we're given.
float foo(float a[], int count)
{
    float sum = 0;
    int i = 0;

    for(i=0; i<count; sum += a[i++]);
    return (sum)/(float)(count);
} 
```

**输出 (z=5)**

```
Avg[0] = 5.139628e+00
Avg[1] = 3.791246e+00
Avg[2] = 5.332921e+00
Avg[3] = 3.949121e+00
Avg[4] = 5.420036e+00
Avg[5] = 3.866650e+00
Avg[6] = 5.024508e+00
Avg[7] = 3.941051e+00
Avg[8] = 5.466672e+00
Avg[9] = 2.305841e+00
a[0] = 5.139628e+00
a[1] = 5.139628e+00
a[2] = 5.139628e+00
a[3] = 5.139628e+00
a[4] = 5.139628e+00
a[5] = 3.791246e+00
a[6] = 3.791246e+00
a[7] = 3.791246e+00
a[8] = 3.791246e+00
a[9] = 3.791246e+00
a[10] = 5.332921e+00
a[11] = 5.332921e+00
a[12] = 5.332921e+00
a[13] = 5.332921e+00
a[14] = 5.332921e+00
a[15] = 3.949121e+00
a[16] = 3.949121e+00
a[17] = 3.949121e+00
a[18] = 3.949121e+00
a[19] = 3.949121e+00
a[20] = 5.420036e+00
a[21] = 5.420036e+00
a[22] = 5.420036e+00
a[23] = 5.420036e+00
a[24] = 5.420036e+00
a[25] = 3.866650e+00
a[26] = 3.866650e+00
a[27] = 3.866650e+00
a[28] = 3.866650e+00
a[29] = 3.866650e+00
a[30] = 5.024508e+00
a[31] = 5.024508e+00
a[32] = 5.024508e+00
a[33] = 5.024508e+00
a[34] = 5.024508e+00
a[35] = 3.941051e+00
a[36] = 3.941051e+00
a[37] = 3.941051e+00
a[38] = 3.941051e+00
a[39] = 3.941051e+00
a[40] = 5.466672e+00
a[41] = 5.466672e+00
a[42] = 5.466672e+00
a[43] = 5.466672e+00
a[44] = 5.466672e+00
a[45] = 2.305841e+00 
```

**输出 (z=10)**

```
Avg[0] = 4.465437e+00
Avg[1] = 4.641021e+00
Avg[2] = 4.643343e+00
Avg[3] = 4.482779e+00
Avg[4] = 4.939867e+00
a[0] = 4.465437e+00
a[1] = 4.465437e+00
a[2] = 4.465437e+00
a[3] = 4.465437e+00
a[4] = 4.465437e+00
a[5] = 4.465437e+00
a[6] = 4.465437e+00
a[7] = 4.465437e+00
a[8] = 4.465437e+00
a[9] = 4.465437e+00
a[10] = 4.641021e+00
a[11] = 4.641021e+00
a[12] = 4.641021e+00
a[13] = 4.641021e+00
a[14] = 4.641021e+00
a[15] = 4.641021e+00
a[16] = 4.641021e+00
a[17] = 4.641021e+00
a[18] = 4.641021e+00
a[19] = 4.641021e+00
a[20] = 4.643343e+00
a[21] = 4.643343e+00
a[22] = 4.643343e+00
a[23] = 4.643343e+00
a[24] = 4.643343e+00
a[25] = 4.643343e+00
a[26] = 4.643343e+00
a[27] = 4.643343e+00
a[28] = 4.643343e+00
a[29] = 4.643343e+00
a[30] = 4.482779e+00
a[31] = 4.482779e+00
a[32] = 4.482779e+00
a[33] = 4.482779e+00
a[34] = 4.482779e+00
a[35] = 4.482779e+00
a[36] = 4.482779e+00
a[37] = 4.482779e+00
a[38] = 4.482779e+00
a[39] = 4.482779e+00
a[40] = 4.939867e+00
a[41] = 4.939867e+00
a[42] = 4.939867e+00
a[43] = 4.939867e+00
a[44] = 4.939867e+00
a[45] = 4.939867e+00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:21:21.747

不太可能`sum+=b[i];`访问 0 到 N-1 之间的数组 b。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:24:24.423

您为浮点数分配了 10 个块，作为函数的数组参数传递。在语句 sum+=b[i] 中，这里的 b[i] 不会确保您没有在数组大小之外的索引处引用，因为您有“i”，它可以超过 10，例如当 z=100 和 t= 1.

# javascript - 将内联 JavaScript 附加到脚本标记

> ID：14493402
> 
> 赞同：3
> 
> 时间：2013-01-24T03:22:49.300
> 
> 标签：javascript, dom

> **可能重复：**
> [如何附加一行 JavaScript（而不是外部 .js 文件）？](https://stackoverflow.com/questions/3267485/how-to-append-a-line-of-javascript-rather-than-an-exteral-js-file)

我正在尝试动态创建脚本标签。我想将内联 javascript 附加到脚本标记。

我的代码

```
 var script = document.createElement("script")  
  script.type = "text/javascript";   
  var scriptContents = 'var isActive; window.onfocus = function () { isActive = true; }; window.onblur = function () { isActive = false; };';
  var textNode = document.createTextNode(scriptContents);   
  script.appendChild(textNode);
  document.getElementsByTagName("head")[0].appendChild(script); 
```

我想这样做的原因是检测浏览器选项卡是否处于活动状态

我的代码因错误而失败

> SCRIPT65535：对方法或属性访问的意外调用。

在线的

```
script.appendChild(textNode); 
```

感谢帮助

# html - 在不影响按钮的情况下更改 Bootstrap 的导航栏不透明度

> ID：14493405
> 
> 赞同：5
> 
> 时间：2013-01-24T03:23:12.213
> 
> 标签：html, css, twitter-bootstrap, opacity, navbar

我只希望我的导航栏按钮可见，而跨越整个页面的实际栏完全不透明。每当我更改导航栏的不透明度时，它都会影响其中的类，即使我指定这些类没有不透明度也是如此。

我已经发布了我正在尝试复制的图像。如您所见，链接完整显示，但导航栏不可见，允许显示完整的背景图像。它可能看起来像一个实心的红色条，但我向你保证它是一个不可见的导航栏。

![在此处输入图像描述](../Images/d91274f1eadbd9f2554c0e1cb38fcc3a.png)

任何帮助将不胜感激！谢谢。

* * *

这是我的导航栏 HTML 代码：

```
<div class="custom_nav">
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                </a>
                <a class="brand" href="index.html">Homegrown</a>
            <div class="nav-collapse">
                <ul class="nav nav-pills">
                    <li class="active"><a href="index.html">Home</a></li>
                    <li><a href="index.html">About</a></li>
                    <li><a href="index.html">Contact</a></li>
                </ul><!-- /.nav -->
            </div><!--/.nav-collapse -->
            </div><!-- /.container -->
        </div><!-- /.navbar-inner -->
    </div><!-- /.navbar -->
</div><!--/.custom_nav--> 
```

到目前为止，我已经尝试使用以下内容编辑我的 CSS：

```
ul .nav .nav-pills {background:rgba(255,255,255,0.5)}

.custom_nav {
    .navbar.navbar-fixed-top {
        background:rgba(255,255,255,.5);
    }
    .navbar .nav > .active a, .navbar .nav > .active a:hover, .navbar .nav > li a:hover {
        background:rgba(210,105,30, 0); text-shadow:none;
    }   
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-24T03:49:34.963

一种解决方案是使用[此处](https://stackoverflow.com/questions/2561460/css-opacity-and-child-elements)给出的[rbga](http://www.w3.org/TR/css3-color/#rgb-color)。[它在 ie < 9 中不起作用](http://css-tricks.com/rgba-browser-support/)，

```
.custom_nav .navbar.navbar-fixed-top .navbar-inner{
    background: rgba(255, 255, 255, 0.3);
} 
```

[小提琴](http://jsfiddle.net/arunpjohny/NsFSL/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T03:50:00.350

要更改父项的不透明度而不影响子项的不透明度，请`rgba`在背景属性上使用，如下所示：

```
ul {
  background: rgba(255, 255, 255, 0.7);
} 
```

前 3 个值是构成颜色的 RGB 值，最后一个值是颜色的不透明度（在上面的示例中，不透明度为 70%）。

见[演示](http://jsfiddle.net/A6r2J/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T02:14:19.117

我用手写笔写了一个mixin：

```
support-for-ie ?= true

opacity(n)
  opacity n
  -moz-opacity n
  filter unquote('alpha(opacity=' + round(n * 100) + ')')
  if support-for-ie
    filter unquote('progid:DXImageTransform.Microsoft.Alpha(Opacity=' + round(n * 100) + ')')

.opacity-70
  opacity(0.7) 
```

我希望它可以帮助那些想要支持几乎所有浏览器都认为不透明的人

# c++ - OpenGL GLM 矩阵计算不起作用

> ID：14493408
> 
> 赞同：1
> 
> 时间：2013-01-24T03:23:20.043
> 
> 标签：c++, opengl, sdl

OpenGL glm 计算似乎在我的程序中不起作用。即使我使用 glm translate 函数每帧用一个变量平移 z 轴，也没有任何移动。我错过了什么吗？

**主文件**

```
#define GLEW_STATIC
#define NO_SDL_GLEXT
#include "glew.h"
#include <sdl.h>
#undef main
#include "SDL_opengl.h"
#include "timer.h"
#include <time.h>
#include <shader.h>
using namespace std;
#include <glm/gtc/matrix_projection.hpp>
#include <glm/gtc/matrix_transform.hpp>
using namespace glm;
unsigned int vaoID[1]; // Our Vertex Array Object
unsigned int vboID[1]; // Our Vertex Buffer Object
glm::mat4 projectionMatrix; // Store the projection matrix
glm::mat4 viewMatrix; // Store the view matrix
glm::mat4 modelMatrix; // Store the model matrix
Shader *shader; // Our GLSL shader
float ztransform(0);
bool exited(false);
SDL_Event event;
const int FRAMES_PER_SECOND = 60;
void createSquare(void) {
    float* vertices = new float[18];    // Vertices for our square
    vertices[0] = -0.5; vertices[1] = -0.5; vertices[2] = 0.0; // Bottom left corner
    vertices[3] = -0.5; vertices[4] = 0.5; vertices[5] = 0.0; // Top left corner
    vertices[6] = 0.5; vertices[7] = 0.5; vertices[8] = 0.0; // Top Right corner
    vertices[9] = 0.5; vertices[10] = -0.5; vertices[11] = 0.0; // Bottom right corner
    vertices[12] = -0.5; vertices[13] = -0.5; vertices[14] = 0.0; // Bottom left corner
    vertices[15] = 0.5; vertices[16] = 0.5; vertices[17] = 0.0; // Top Right corner
    glGenVertexArrays(1, &vaoID[0]); // Create our Vertex Array Object
    glBindVertexArray(vaoID[0]); // Bind our Vertex Array Object so we can use it
    glGenBuffers(1, vboID); // Generate our Vertex Buffer Object
    glBindBuffer(GL_ARRAY_BUFFER, vboID[0]); // Bind our Vertex Buffer Object
    glBufferData(GL_ARRAY_BUFFER, 18 * sizeof(GLfloat), vertices, GL_STATIC_DRAW); // Set the size and data of our VBO and set it to STATIC_DRAW
    glVertexAttribPointer((GLuint)0, 3, GL_FLOAT, GL_FALSE, 0, 0); // Set up our vertex attributes pointer
    glEnableVertexAttribArray(0); // Disable our Vertex Array Object
    glBindVertexArray(0); // Disable our Vertex Buffer Object
    delete [] vertices; // Delete our vertices from memory
}
void startGL()
{
    SDL_Init(SDL_INIT_EVERYTHING);
    SDL_SetVideoMode(800, 600, 32, SDL_OPENGL);
    glewInit();
    glClearColor(0.4f, 0.0f, 1.0f, 0.0f);
    projectionMatrix = glm::perspective(60.0f, (float)800 / (float)600, 0.1f, 100.f);  // Create our perspective projection matrix
    shader = new Shader("shader.vert", "shader.frag"); // Create our shader by loading our vertex and fragment shader
    createSquare();
}
void drawstuff()
{
    glViewport(0, 0, 800, 600); // Set the viewport size to fill the window
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT); // Clear required buffers
    viewMatrix = glm::translate(glm::mat4(1.0f), glm::vec3(0.0f, 0.0f, ztransform)); // Create our view matrix which will translate us back 5 units
    modelMatrix = glm::scale(glm::mat4(1.0f), glm::vec3(0.5f));  // Create our model matrix which will halve the size of our model
    shader->bind(); // Bind our shader
    int projectionMatrixLocation = glGetUniformLocation(shader->id(), "projectionMatrix"); // Get the location of our projection matrix in the shader
    int viewMatrixLocation = glGetUniformLocation(shader->id(), "viewMatrix"); // Get the location of our view matrix in the shader
    int modelMatrixLocation = glGetUniformLocation(shader->id(), "modelMatrix"); // Get the location of our model matrix in the shader
    glUniformMatrix4fv(projectionMatrixLocation, 1, GL_FALSE, &projectionMatrix[0][0]); // Send our projection matrix to the shader
    glUniformMatrix4fv(viewMatrixLocation, 1, GL_FALSE, &viewMatrix[0][0]); // Send our view matrix to the shader
    glUniformMatrix4fv(modelMatrixLocation, 1, GL_FALSE, &modelMatrix[0][0]); // Send our model matrix to the shader
    glBindVertexArray(vaoID[0]); // Bind our Vertex Array Object
    glDrawArrays(GL_TRIANGLES, 0, 6); // Draw our square
    glBindVertexArray(0); // Unbind our Vertex Array Object
    shader->unbind(); // Unbind our shader
}
int main (int argc, char* args[])
{
    Timer fps;
    startGL();
    while(exited == false)
    {
        while( SDL_PollEvent(&event) )
        {
            if( event.type == SDL_QUIT )
                exited = true;
        }
        drawstuff();
        ztransform+=.1
        SDL_GL_SwapBuffers();
        if( fps.get_ticks() < 1000 / FRAMES_PER_SECOND )
            SDL_Delay( ( 1000 / FRAMES_PER_SECOND ) - fps.get_ticks() );
    }
    SDL_Quit();
    return 0;
} 
```

**着色器.frag**

```
#version 150 core

in vec3 pass_Color;

out vec4 out_Color;

void main(void)
{
      out_Color = vec4(pass_Color, 1.0);
} 
```

**着色器.vert**

```
#version 150 core

in vec3 in_Position;
in vec3 in_Color;

out vec3 pass_Color;

void main(void)
{
     gl_Position = vec4(in_Position, 1.0);
     pass_Color = in_Color;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T04:05:06.820

您必须在顶点着色器中应用您的转换。

你应该在你的顶点着色器中定义

```
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat4 modelMatrix; 
```

然后将这些转换应用于您的输入位置（注意：我可能弄错了顺序）

```
gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(in_position, 1.0); 
```

不过，通常情况下，您可以在 c++ 程序中将这 3 个矩阵相乘并传入一个`modelViewProjection`矩阵。

# r - R：防止使用 ggplot geom_line 显示时间序列数据的换行

> ID：14493416
> 
> 赞同：2
> 
> 时间：2013-01-24T03:24:25.810
> 
> 标签：r, ggplot2

使用 ggplot2 我想画一条在某个日期后改变颜色的线。我希望这很简单，但是在颜色发生变化时我会中断线。最初我认为这是一个问题`group`（根据[这个](https://stackoverflow.com/questions/13358953/the-appliance-of-geom-line-in-ggplot)问题；[另一个问题](https://stackoverflow.com/questions/7841552/line-plot-that-changes-color-over-time)看起来也很相关，但不是我所需要的）。把美学弄乱`group`了 30 分钟，我无法修复它，所以如果有人能指出明显的错误......

![截屏](../Images/1c42d3b777c28066d738f652ae5537b8.png)

代码：

```
require(ggplot2)

set.seed(1111)
mydf <- data.frame(mydate = seq(as.Date('2013-01-01'), by = 'day', length.out = 10),
    y = runif(10, 100, 200))
mydf$cond <- ifelse(mydf$mydate > '2013-01-05', "red", "blue")

ggplot(mydf, aes(x = mydate, y = y, colour = cond)) +
    geom_line() +
    scale_colour_identity(mydf$cond) +
    theme() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T03:37:44.963

如果设置`group=1`，则 1 将用作所有数据点的组值，并且线将连接起来。

```
ggplot(mydf, aes(x = mydate, y = y, colour = cond, group=1)) +
  geom_line() +
  scale_colour_identity(mydf$cond) +
  theme() 
```

# javascript - 遍历jQuery中表中的第二列

> ID：14493423
> 
> 赞同：10
> 
> 时间：2013-01-24T03:25:48.853
> 
> 标签：javascript, jquery, html, dom

我在 dom 中有一张看起来像这样的桌子

```
<div id="table">
<table>
<tr>
  <td>a</td>
  <td>b</td>
  <td>c</td>
  <td>d</td>
</tr>
<tr>
  <td>a</td>
  <td>b</td>
  <td>c</td>
  <td>d</td>
</tr> 
</div> 
```

我想遍历这个表，比如`$('#table').each(function(){})`但我只想遍历第二列。所以本例中的值为 b。

任何想法如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-24T03:30:14.713

试试这个：

```
$("table tr td:nth-child(2)").each(function () {

}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-24T03:28:54.360

使用`nth-child`jQuery 中的选择器，这应该可以工作：

```
$("#table").find("td:nth-child(2)").each(function () {

}); 
```

这使用`nth-child`选择器[http://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)，作为链接状态，它将选择作为`<td>`其父级的第二个子级的所有元素（这将是 a `<tr>`）。

这是一个演示它的小提琴：http: [//jsfiddle.net/GshRz/](http://jsfiddle.net/GshRz/)

如果您正在寻找一个选择器来获取`<td>`仅在表中立即出现的 s（例如不在嵌套表中），请使用以下内容：

```
$("#table").children("tbody").children("tr").children("td:nth-child(2)").each(function () {

}); 
```

[http://jsfiddle.net/GshRz/1/](http://jsfiddle.net/GshRz/1/)

根据您的结构（可能包括 a `<thead>`），您可以使用`.children("thead, tbody")`而不是仅使用`.children("tbody")`.

此外，如果您想抓取几列，选择`<tr>`元素然后获取它们的子`<td>`元素可能会更容易。例如：

```
$("#table1").children("tbody").children("tr").each(function (i) {
    var $this = $(this);
    var my_td = $this.children("td");
    var second_col = my_td.eq(1);
    var third_col = my_td.eq(2);
    console.log("Second Column Value (row " + i + "): " + second_col.html());
    console.log("Third Column Value (row " + i + "): " + third_col.html());
}); 
```

[http://jsfiddle.net/GshRz/2/](http://jsfiddle.net/GshRz/2/)

您使用什么选择器以及在哪里使用取决于表格的结构和内容。所以请记住区分`children`and`find`和`nth-child`and `eq`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T03:35:04.197

```
$("#table td:nth-child(2)").each(function (index) {
   alert('Row no. ' + (index+1) + ', Column 2 : ' + $(this).html());
}); 
```

[样本](http://jsfiddle.net/Z7L4F/1/)

# wxpython - 如何在 wxPython 中动态添加子菜单

> ID：14493424
> 
> 赞同：0
> 
> 时间：2013-01-24T03:25:51.627
> 
> 标签：wxpython, wxwidgets

在我的一个程序中，我想在“文件”菜单中添加“最近使用”功能。因此，当用户选择“文件 > 最近使用”时，它会显示一个带有历史列表的子菜单。我知道如何使用 AppendSubMenu 附加子菜单。但问题是在初始化菜单栏以及“文件”、“查看”菜单等时，“文件”菜单是静态创建的。如何在运行时动态附加子菜单？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:44:50.170

您可能想查看[wxFileHistory](http://docs.wxwidgets.org/trunk/classwx_file_history.html)并避免完全手动更新菜单。

但是如果你真的需要这样做，当然也很容易：使用[wxMenuBar::GetMenu()](http://docs.wxwidgets.org/trunk/classwx_menu_bar.html#a7935fbf932f070f13c31b213c5e3419d)获取`wxMenu`指针，然后调用[wxMenu::AppendSubMenu()](http://docs.wxwidgets.org/trunk/classwx_menu.html#a6e5821042919502670e8fdab77a5f7a8)。

# mysql - 显示表和 MYSQL_NUM_ROWS

> ID：14493427
> 
> 赞同：1
> 
> 时间：2013-01-24T03:26:14.223
> 
> 标签：mysql, sql, mysql-num-rows

我刚刚注意到 mysql_num_rows 应该返回为 SELECT 或 SHOW 命令返回的行数，专门为 SHOW TABLE 命令返回 0。

相反，它显示受影响的行数而不是行数。

谁能告诉我这是一个错误还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T03:41:07.320

`SHOW TABLE`命令用于显示数据库中的表名。另一方面，`mysql_num_rows`用于计算从您的查询中获得了多少结果。此查询取决于您的要求基础......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:31:22.527

如[PHP 文档页面所述](http://php.net/manual/en/function.mysql-num-rows.php)：

> 从结果集中检索行数。此命令仅对返回实际结果集的 SELECT 或 SHOW 等语句有效。

我的猜测是，这`SHOW TABLES`不是一个技术查询，它会产生`mysql_num_rows`枚举的结果集类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T04:15:06.943

这些“辅助”函数（例如`SHOW`、`EXPLAIN`等`DESCRIBE`）不会让您像在常规表中那样*发布它们的结果。*

但是，如果您正在寻找如何做到这一点，因为`SHOW TABLES`您可以做到

```
SELECT `table_name` FROM `information_schema`.`tables`
WHERE `table_schema`=DATABASE()
-- DATABASE() selects current database name
-- you can use the name of any database as a string instead 
```

所以基本上你可以使用`information_schema`数据库来获取这些信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T16:30:23.507

这是mysql中的一个错误，通过更新修复了它。

# websocket - Netty WebSocket - 正确驱动“ChannelFuture”的“operationComplete”

> ID：14493428
> 
> 赞同：1
> 
> 时间：2013-01-24T03:26:23.137
> 
> 标签：websocket, netty

我正在编写一个应用程序，通过 WebSocket 从 Netty 服务器向客户端发送小文件（~2kb）。

为了测试文件是否发送成功，我进行了以下测试。

1.  客户端连接到服务器。
2.  设置从客户端机器上的服务器丢弃所有数据包。
3.  服务器向客户端发送文件。
4.  在服务器上检查“ChannelFuture”的结果。

当我在这个测试中发送一个 ~2kb 的文件时，我立即从“future.isSuccess()”和“future.isDone()”得到了正确的结果，即使客户端也无法接收到该文件。

我对较大的文件重复了这个测试。我发现如果文件大小大于~7kb，“ChannelFuture future”将等待传输的反馈。这是我预期的结果。

我正在使用 Netty3.6.1，我的应用程序是基于“org.jboss.netty.example.http.websocketx.server”构建的。

这是我的代码的一部分：

```
ChannelBuffer cb = ChannelBuffers.copiedBuffer(myfile_byteArray);   
ChannelFuture result = ctx.getChannel().write( new BinaryWebSocketFrame( cb ) );
result.addListener(new ChannelFutureListener() {
            public void operationComplete(ChannelFuture future) throws Exception {
                if (future.isSuccess()){  
                    System.err.println("future.isSuccess()");  
                }  
                if (future.isDone()){  
                    System.err.println("future.isDone()");  
                }  
                if (future.isCancelled()){  
                    System.err.println("future.isCancelled()");  
                }  
            }
        }); 
```

有谁知道我怎样才能让“ChannelFuture”正确处理小文件？

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:45:42.440

只有当数据可以写入远程对等方时，才会通知 ChannelFuture。因此，如果它被通知，那么另一个对等方接收到的数据没有问题。这适用于所有大小的数据。

# android - 在 Android 中优化位图创建/大小

> ID：14493429
> 
> 赞同：1
> 
> 时间：2013-01-24T03:26:27.723
> 
> 标签：android, optimization, bitmap

我正在寻找有关如何优化以下代码的想法，该代码是 for 循环的主体：

```
final BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 4;
options.inJustDecodeBounds = false;
ImageButton view = new ImageButton(this);
view.setBackgroundColor(0);
view.setOnClickListener(new OnClickListener(){
@Override
public void onClick(View v) {
     finalThis.onBorderClicked(v);
}
});
view.setTag(i); //i is the loop counter

Bitmap big = BitmapFactory.decodeResource(getResources(), borders[i], options);
Bitmap smaller = Bitmap.createScaledBitmap(big, borderDimension, borderDimension, false);

view.setImageBitmap(smaller);

view.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT));
((LinearLayout.LayoutParams)view.getLayoutParams()).setMargins(0, 0, -5, 0);
group.addView(view);

big.recycle(); 
```

基本上我有 600x600 的图像，我想让它们的大小约为 50dp。所以很自然，我先将样本大小设置为4（600 / 4 = 150），这样我就不会占用不必要的内存，然后进一步将图像缩小到指定大小。`ImageButton`然后我用它将它加载到一个`Bitmap`.

这是一个动态 UI 创建代码，`ImageButtons`被添加到一个`HorizontalScrollView`. 事情是，在一种情况下，我必须向`ImageButtons`UI 添加一百多个，而这段代码非常慢。

问题是：我怎样才能让它工作得更快？它目前在 上执行`MainActivity`，多线程（也许`AsyncTask`）在这种情况下有帮助吗？还有其他方法可以更快地将位图设置为所需的大小吗？如果没有办法使这个过程显着加快，那么有没有办法逐步添加 ImageButtons（但顺序相同），以便在所有这些发生时 UI 不会冻结？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:46:54.247

您不需要自己缩放图像。您可以通过要求`ImageButton`为您扩展来做到这一点，这要快得多。

```
ImageButton view = new ImageButton(this);
view.setBackgroundColor(0);
view.setOnClickListener(new OnClickListener(){
@Override
public void onClick(View v) {
     finalThis.onBorderClicked(v);
}
});
view.setTag(i); //i is the loop counter

view.setAdjustViewBounds(true);
view.setMaxHeight(borderDimension);
view.setMaxWidth(borderDimension);
view.setImageResource(border[i]);

view.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
((LinearLayout.LayoutParams)view.getLayoutParams()).setMargins(0, 0, -5, 0);
group.addView(view); 
```

我已更改布局参数以使用 WRAP_CONTENT 作为高度，因为我不知道您的图像看起来如何。您可以稍微调整一下布局，但这通常应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:36:19.290

[我在http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)找到了一个很好的解决方案

它有以下代码，动态设置`Bitmap`为`ImageView`.

```
class BitmapWorkerTask extends AsyncTask<Integer, Void, Bitmap> {
    private final WeakReference<ImageView> imageViewReference;
    private int data = 0;

public BitmapWorkerTask(ImageView imageView) {
    // Use a WeakReference to ensure the ImageView can be garbage collected
    imageViewReference = new WeakReference<ImageView>(imageView);
}

// Decode image in background.
@Override
protected Bitmap doInBackground(Integer... params) {
    data = params[0];
    return decodeSampledBitmapFromResource(getResources(), data, 100, 100));
}

// Once complete, see if ImageView is still around and set bitmap.
@Override
protected void onPostExecute(Bitmap bitmap) {
    if (imageViewReference != null && bitmap != null) {
        final ImageView imageView = imageViewReference.get();
        if (imageView != null) {
            imageView.setImageBitmap(bitmap);
        }
    }
}
} 
```

您可以通过使用来调用它，

```
public void loadBitmap(int resId, ImageView imageView) {
    BitmapWorkerTask task = new BitmapWorkerTask(imageView);
    task.execute(resId);
} 
```

在这里，只需更改`ImageView`为`ImageButton`.

**编辑：**

```
public static Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
    int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(res, resId, options);

    // Calculate inSampleSize
    options.inSampleSize = 4;

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeResource(res, resId, options);
} 
```

[您可以在此处](http://developer.android.com/training/displaying-bitmaps/index.html)找到有关处理的更多信息`Bitmaps Efficiently`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T03:51:30.280

将您的代码从主线程中移除不会使应用程序更快地处理图像，但它会在该过程发生时保持 UI 对用户的响应，并且当您一次加载这么多数据时绝对是必要的步骤. 但是，请记住，您不能从除主线程之外的任何线程操作视图层次结构，因此您不能将整个操作放在`AsyncTask.doInBackground()`. 您将不得不拆分花费最多时间的行（即您的`decodeResource()`and`createScaledBitmap()`调用），但是用于实例化并向父级添加视图的代码将需要在`onPostExecute()`or中发生`publishProgress()`（取决于您如何实现任务逻辑）。

> 问题是，在一种情况下，我必须在 UI 中添加一百多个 ImageButton，而这段代码非常慢。

要记住的另一件重要事情是，在任何时候在您的层次结构中拥有超过 100 个基于图像的视图仍然是一大块浪费的内存。加快进程的最佳方法不是一次添加所有视图，而是仅在需要时添加它们（即当用户滚动时），然后删除/回收不再出现在屏幕上的视图。正是`AdapterView`出于这个原因，实现的工作方式就是这样，只使用您需要的内存，您的应用程序将更快更高效。

我意识到`HorizontalListView`框架中没有，但有 3rd 方实现为您提供此功能，或者您可以查看其中一个框架类的源代码以构建您自己的。

# magento - FishPig WordPress - Magento v1.7.0.0 获取特色图片以显示

> ID：14493431
> 
> 赞同：0
> 
> 时间：2013-01-24T03:26:32.200
> 
> 标签：magento, magento-1.7, fishpig

我们一直在尝试在 CMS 主页上显示此块的特色图像，但到目前为止在 Magento v1.7.0.0 上使用 FishPig WP 集成扩展未成功。但是，我们成功地将博客帖子中的其他内容从指定类别中显示出来。

我们要做的是让每个帖子显示 2 张图片。剩下的很好去。每个部分都被视为一个帖子。我已将两个屏幕截图与视觉辅助说明联系起来。

**我们尝试在开发站点上完成此操作的区域是：** [https ://devtest.eboost.com](https://devtest.eboost.com)

**Press部分的相关代码块是**

```
<div id="pressblock">
  <?php

    //$press_posts = Mage::getResourceModel('wordpress/image')->addIsPublishedFilter()->addCategorySlugFilter('press');
    $press_posts = Mage::getResourceModel('wordpress/post_collection')->addIsPublishedFilter()->addCategorySlugFilter('press');
    $presstotal = count($press_posts->getAllIds());
    $presstotid = $press_posts->getAllIds();

    //i<=2 means displays last 2 posts
    //display latest 2 posts...
    $k = 0;
    $nopages = ceil($presstotal/6);
    $pag = 1;
    for($j=$presstotal - 1; $j>=0; $j--)
      {
        $k++;
        if($k == 1)
          {
            if($pag == 1)
              {
                echo '<section id="page-'.$pag.'" class="active">';
                $pag++;
              }
            else
              {
                echo '<section id="page-'.$pag.'">';
                $pag++;
              }
          }
    ?>
        <div class="<?php if($k%2 == 0) echo 'press_right'; else echo 'press_left';?>">
          <div class="pree_emty">

            <?php
              /*
                GPSM 01-23-13:
                Some attempts to get the featured image to show. I don't see a variable to display any image really. The only thing that shows image is post_content but that shows the content as well... Maybe we can filter the image from there?

                Maybe we can use some of the code from "app/design/frontend/default/eboost/template/wordpress/post/list.phtml" or something.

                The following StackOverflow post looks to have promising suggestions:
                http://stackoverflow.com/questions/10169968/wordpress-posts-on-magento

                Check "app/code/community/Fishpig/Wordpress/Model/Image.php" for functions to display image stuff
              */
              //echo $press_posts->getItemById($presstotid[$j])->post_content;
              //print_r($press_posts->getItemById($presstotid[$j]));
              //echo $press_posts->getItemById($presstotid[$j])->getFeaturedImage();
            ?>

            <img src="<?php echo $press_posts->getItemById($presstotid[$j])->getFeaturedImage(); ?>" width="204" height="204" alt="" />
            <?php/*<img src="<?php echo $this->getSkinUrl('images/pree_emty.png');?>" width="204" height="204" alt="" />*/?>
          </div>

          <div class="press_txt">
            <h3><?php echo $press_posts->getItemById($presstotid[$j])->getPostTitle(); ?></h3>
            <p><?php echo substr(strip_tags($press_posts->getItemById($presstotid[$j])->getPostContent()), 0, 150); ?></p>
            <p><a href="#"><img src="<?php echo $this->getSkinUrl('images/viewfull_btn.png');?>" width="168" height="30" alt="" /></a></p>
          </div>
        </div>
    <?php
        if($k >= 6)
          {
            echo "</section>";
            $k = 0;
          }

      }
        if($k < 6)
          {
            echo "</section>";
          }
    ?>
  </div><!--#pressblock--> 
```

**2个视觉辅助屏幕截图：**

[![Screenshot#1](../Images/41f347f9d8b106a6cc5d64cf52fd20d8.png)](https://i.stack.imgur.com/o3lNu.jpg) [![Screenshot#2](../Images/dcf10c1c117877cf1077928457eb0a53.png)](https://i.stack.imgur.com/aMkx2.jpg)

最好的祝福，

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:27:58.030

弄清楚了...

Essentially we pulled the custom field image from the posts. We will be making another custom field for the posts for another image. So, one image from post will be for the frontpage->press block and the second image will be displayed in a fancybox overlay.

Here is the relevant code snippet:

[http://www.filedropper.com/code_1](http://www.filedropper.com/code_1)

^^ posting the code this time around screwed with the formatting and figured to just save it to a file "code.php", upload to free upload site, post here... I followed the posting instructions like last time to post the snippet but I must be doing something wrong but don't have time now to figure that out...

Regards, George

# c - 需要帮助解决一个 C 指针链表赋值

> ID：14493434
> 
> 赞同：0
> 
> 时间：2013-01-24T03:26:38.910
> 
> 标签：c, list, pointers

我有一个程序要求输入一个数字。然后，如果我接下来输入“0”，它将在前面（列表顶部）插入数字/项目。如果我接下来输入“1”，它将在后面（列表底部）插入数字/项目。

我遇到的问题是让后面的代码工作。我试图在我的脑海中逻辑地解决这个问题，但它似乎并不正确。links.h 文件有 Item 的定义。它包含数据和下一个（指向下一个对象的指针）。

这是我到目前为止的代码。

我负责编写 insertFront() 和 insertRear() 函数。前线已经开始工作了。据说在 else 语句之后只需要 2 行代码。

```
#include "links.h"
#include <stdio.h>
#include <stdlib.h>

int main (void) {
  Item *head, *tail;
  Item *newItem;
  int  data, insert;

  /* Link the empty list */
  head = tail = NULL;

  /* Prompt the user for new data to be inserted into the list */
  while (1) {
    /* Get the data value */
       printf ("Enter the positive integer that you want to insert into list (-1 to end): ");
   fflush(stdout);
  if (scanf ("%d",&data) != 1) {
     /* If it isn't valid input, throw away the rest of the line of input */
     while (getchar() != '\n') { }
     fprintf(stderr, "Invalid data found.  Try again.\n");
     continue;
   }

   /* A negative value terminates the list entry */
   if (data < 0) break;

   printf("Enter a 0 to insert data at the beginning or 1 to insert at the end: ");
   fflush(stdout);
   if (scanf ("%d",&insert) != 1 || insert < 0 || insert > 1) {
     /* If it isn't valid, throw away the rest of the line of input */
     while (getchar() != '\n') { }
     fprintf(stderr, "Must be zero or one!  Try insertion again.\n");
     continue;
   }

   if ((newItem = malloc(sizeof(Item))) == NULL) {
     perror ("Unable to allocate memory for new item");
     return EXIT_FAILURE;
   }
   newItem->next = NULL;
   newItem->data = data;

   if (insert == 0) {
     insertFront (newItem, &head, &tail);
   } else {
     insertRear (newItem, &head, &tail);
   }

   /* Print the list in forward order */
   printf("List in forward order:\n");
   printList (head);
 }
}

/* Insert the item into front of the list */
void insertFront (Item *item, Item **headptr, Item **tailptr) {

    if(*headptr == NULL) {
            *headptr = item; // item is the address
            *tailptr = item;
       } else {

            item->next = *headptr;
            *headptr = item;

       }

  }

   void insertRear (Item *item, Item **headptr, Item **tailptr) {

       if(*tailptr == NULL) {
               *tailptr = item;
               *headptr = item;

       } else {

         item->next = *tailptr;
         *tailptr = item;

          }

     }

  /* Print the list in forward order */
  void printList (Item *head) {
    Item *current = head;
    while (current != NULL) {
      printf ("%d\n", current->data);
      current = current->next;
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:31:19.713

您的头指针和尾指针的行为方式不应相同！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:41:16.400

您的 insertRear() 应该是：

```
void insertRear (Item *item, Item **headptr, Item **tailptr) {
       if(*tailptr == NULL) {
               *tailptr = item;
               *headptr = item;

       } else {

          (*tailptr)->next=item;
         *tailptr = item;

          }

     } 
```

不用说 item->next 应该是 NULL。

# linux - BASH - Sed 无法删除用元字符填充的属性行

> ID：14493435
> 
> 赞同：0
> 
> 时间：2013-01-24T03:26:46.420
> 
> 标签：linux, perl, bash, scripting, sed

我试图从名为 changesfile 的文件中正确地将参数传递给 sed，但我没有成功。它可能是文件更改文件的内容或我使用 for 循环的方式。我不确定。

我使用的命令：

```
cat changesfile | while read i ; do sed -e "s/$i//g" "filename" ; done
cat changesfile | while read i ; do sed -i "s/$i//g" "filename" ; done
cat changesfile | while read i ; do sed -e '/$i/d' filename ; done
cat changesfile | while read i ; do sed -e '/"$i"/d' filename ; done 
```

我需要将文件中的某些行与大量元字符匹配。我试图匹配和删除的东西如下：

```
fileattribute[hostname.stile.tib.area2]=Disk /var;default_queue;area-unix
fileattribute[hostname.stoop.trb.area]=Disk /tmp;default_queue;area-unix 
```

以下是包含通配符和转义字符以正确将信息传递给 sed 的更改文件的内容如下：

```
.*hostname\.stoop\.trb\.area.*Disk.*\/tmp.*area\-unix$
.*hostname\.stile\.tib\.area2.*Disk.*\/var.*area\-unix$ 
```

到目前为止，没有任何工作。一些命令删除了正则表达式和其他东西。不知道为什么。非常感谢任何建议。我的工作场所还​​没有任何人提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:45:52.170

尝试以下

```
#!/bin/bash
sed -i -r -f changesfile filename 
```

**解释**

1.  `-r`- 在脚本中使用扩展的正则表达式。无需转义特殊字符。
2.  `-f`- 将脚本文件的内容添加到要执行的命令中。

# css - 在 mixin 中 LESS 重复选择器声明

> ID：14493439
> 
> 赞同：3
> 
> 时间：2013-01-24T03:27:46.263
> 
> 标签：css, css-selectors, less

我正在尝试为某些表格行声明背景图像图标：

```
.i(@file:'file.png', @type) {
    &.@{type} {
      td:first-child {
        background-image: url('../img/@{file}');
      }
    }
  } 
```

我希望能够一次传递多种图像类型：

```
.i('code.png', 'asp, php, rb, py') 
```

并让它有效地做到这一点：

```
.i(@file:'file.png', @type) {
  &.@{type1},
  &.@{type2},
  &.@{type3},
  &.@{type4}, {
    td:first-child {
      background-image: url('../img/@{file}');
    }
  }
} 
```

我知道 CSS 输出会有所不同，最后一个代码示例用于说明目的。

除了将一堆空选择器声明为占位符之外，关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T15:02:57.803

## 更新为 LESS 1.5

此代码在 LESS 的更高版本中更有效地产生相同的效果，使用LESS 1.5+ 中可用的更新`extract()`和功能。`length()`输出将与原始示例相同。

```
.i(@file:'file.png', @types) {

  //find length to make the stop point
  @stopIndex: length(@types);

  //set up our LESS loop (recursive)
  .loopTypes (@index) when (@index =< @stopIndex) {
    @class: extract(@types,@index);
    //print the CSS
    &.@{class} {
        td:first-child {
          background-image: url('../img/@{file}');
        }
      }

        // next iteration
        .loopTypes(@index + 1);
    }

    // "call" the loopingClass the first time getting first item
    .loopTypes (1);
}

.myClass {
  .i('code.png'; asp, php, rb, py;);
} 
```

## 在 LESS 1.3.3 中使用循环和内联 JavaScript

这花了几个小时才想出来（不，我没有很多空闲时间来研究它，我只是上瘾了……）。花费时间最长的部分之一是弄清楚为什么`@stopIndex`当我返回数组时我没有被 LESS 视为数字`.length`，并引发类型错误。我终于发现我需要明确告诉它使用`unit()`LESS 的功能将其视为一个数字。

该解决方案利用了这些来源的一般概念：

1.  LESS[循环](http://blog.thehippo.de/2012/04/programming/do-a-loop-with-less-css/)
2.  [LESS 中](http://movableapp.com/2012/08/execute-complex-javascript-in-lesscss/)的Javascript 函数

**较少的**

```
.i(@file:'file.png', @type) {
  //find length to make the stop point
  @stopIndex: unit(`(function(){ return @{type}.split(",").length})()`);
  //need to get the first item in @type
  @firstClass: ~`(function(){ 
      var clsArray = @{type}.replace(/\s+/g, '').split(",");   
      return clsArray[0]; 
    })()`;

  //set up our LESS loop (recursive)
  .loopTypes (@index, @captureClass) when (@index < @stopIndex) {
    @nextClass: ~`(function(){ 
      var clsArray = @{type}.replace(/\s+/g, '').split(",");
      //don't let it try to access past array length
      if(@{index} < (@{stopIndex} - 1)) {
       return clsArray[@{index} + 1]; 
      } 
      else { return '' }
    })()`;

    //print the CSS
    &.@{captureClass} {
        td:first-child {
          background-image: url('../img/@{file}');
        }
      }

        // next iteration
        .loopTypes(@index + 1, @nextClass);
    }

    // define guard expressoin to end the loop when past length
    .loopTypes (@stopIndex, @captureClass) {}

    // "call" the loopingClass the first time getting first item
  .loopTypes (0, @firstClass);
}

.myClass {
  .i('code.png', 'asp, php, rb, py');
} 
```

**CSS 输出**

```
.myClass.asp td:first-child {
  background-image: url('../img/code.png');
}
.myClass.php td:first-child {
  background-image: url('../img/code.png');
}
.myClass.rb td:first-child {
  background-image: url('../img/code.png');
}
.myClass.py td:first-child {
  background-image: url('../img/code.png');
} 
```

# spring - 将表单绑定到 SPRING 3.0 中的对象

> ID：14493440
> 
> 赞同：0
> 
> 时间：2013-01-24T03:27:58.220
> 
> 标签：spring, spring-mvc

嗨，我正在关注[Spring MVC 中将参数从 JSP 传递到控制器，](https://stackoverflow.com/questions/5590036/passing-paramters-from-jsp-to-controller-in-spring-mvc)显然我错过了一些东西，因为我得到了

> javax.el.PropertyNotFoundException：在类型 com.outbottle.hellospring.entities.Movie 上找不到属性“标题”

关于我缺少什么的任何想法？

我的控制器：

```
package com.outbottle.hellospring.controllers;

import com.outbottle.hellospring.entities.Movie;
import java.util.Map;
import javax.servlet.http.HttpServletRequest;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.SessionAttributes;

@Controller
@SessionAttributes("Movie")

public class FormPractice{

//display the form
@RequestMapping(value="/form", method= RequestMethod.GET)
public String form(ModelMap map) {

    map.addAttribute("Movie", new Movie());
    //return new ModelAndView("form", "movie", new Movie());  
    return "form";

}

// Process the form

@RequestMapping(value="/showMovies", method = RequestMethod.POST)
public String processMovieRegistration(@ModelAttribute("Movie") Movie moviedata,
                                       BindingResult result,                                           
                                       HttpServletRequest request,
                                       Map<String, Object> map){

    //System.out.print(moviedata.Title);
    map.put("moviedata", moviedata);
    //map.addAttribute("movie", moviedata);

    map.put("date", request.getParameter("date"));

    return "showMovies";
}

   public Movie formBackingObject() {
     return new Movie();
   }

} 
```

我的对象

```
package com.outbottle.hellospring.entities;

import java.util.Date;

public class Movie {

    private String Title;
    private Date  ReleaseDate;

    /**
     * @return the ReleaseDate
     */
    public Date getReleaseDate() {
        return ReleaseDate;
    }

    /**
     * @param ReleaseDate the ReleaseDate to set
     */
    public void setReleaseDate(Date ReleaseDate) {
        this.ReleaseDate = ReleaseDate;
    }

    /**
     * @return the Title
     */
    public String getTitle() {
        return Title;
    }

    /**
     * @param Title the Title to set
     */
    public void setTitle(String Title) {
        this.Title = Title;
    }

} 
```

表格

```
<form:form method="post" action="showMovies" modelAttribute="Movie" commandName="Movie">

    <table>
        <tr>
            <td>Title</td>
            <td><form:input path="Title" /></td>
        </tr>
        <tr>
            <td>Date</td>
            <!--Notice, this is normal html tag, will not be bound to an object -->
            <td><input name="date" type="text"/></td>
        </tr>
        <tr>
            <td colspan="2">
                <input type="submit" value="send"/>
            </td>
        </tr>
    </table>

</form:form> 
```

风景：

```
<body>
    <h3>Here are the list</h3>

     <c:choose> 
        <c:when test="${not empty moviedata.Title}">
            <b>${moviedata.Title}</b>
        </c:when>
        <c:otherwise>
            <b>No Movie yet.</b>
        </c:otherwise>
    </c:choose>
<br />
<br />
    <c:choose> 
        <c:when test="${not empty date}">
            <b>${date}</b>
        </c:when>
        <c:otherwise>
            <b>still nothing.</b>
        </c:otherwise>
    </c:choose>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:55:25.503

不知道为什么，但删除标题中的大写“T”有效..

```
<body>
<h3>Here are the list</h3>

 <c:choose> 
    <c:when test="${not empty moviedata.title}">
        <b>${moviedata.title}</b>
    </c:when>
    <c:otherwise>
        <b>No Movie yet.</b>
    </c:otherwise>
</c:choose> 
```

如果有人能解释为什么这会起作用，它将帮助我更快地理解 SPRING 3.0.. 但现在我很高兴我可以继续前进..

# ios - 我可以在 iOS 中使用 Map 或 Locate SDK 获取 POI

> ID：14493443
> 
> 赞同：0
> 
> 时间：2013-01-24T03:28:04.570
> 
> 标签：ios, sdk, point-of-interest

POI：兴趣点（http://en.wikipedia.org/wiki/Point_of_interest）

是否有 iOS api 可用于获取用户位置附近的 POI 列表？这就是我想要的——用户输入一个搜索词，我已经知道他的纬度和经度。我想根据搜索词获取包含 POI 详细信息的列表。

因此，假设我在特定位置搜索星巴克，我应该在距离我所在位置 5 英里的半径范围内找到所有星巴克。

iOS API 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:24:57.020

不是 iOS 原生的，但您可以使用第三方提供商，例如 YellowPages.com。

[http://www.yellowapi.com](http://www.yellowapi.com)

# c# - 如何在 c# windows 窗体中添加文本框的值并将结果显示在 texbox 中

> ID：14493448
> 
> 赞同：0
> 
> 时间：2013-01-24T03:29:00.843
> 
> 标签：c#

你能帮我吗..
我有一个 5 个文本框，你将如何自动获取那些有值的文本框的总和并将其显示到 textboxtotal。就像当您在 textbox1 中输入一个数字时，该值显示在 textboxtotal 上，当您在另一个文本框中输入一个值时，它会自动获取总和等等......当您清除在一个文本框中输入的值时，textboxtotal 将是更新..

希望你能帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:50:21.740

将所有输入文本框（没有结果文本框）放入一些容器组件中，例如面板或组框。设置为所有输入文本框相同的离开处理程序，代码如下：

```
private void textBox1_Leave(object sender, EventArgs e)
    {
        GroupBox parent = (((TextBox) sender).Parent as GroupBox);
        int sum = 0;
        foreach (Control control in parent.Controls)
        {
            TextBox textBox = control as TextBox;
            if (textBox != null)
            {
                string tbContent = (textBox).Text;
                int tbNumValue;
                if(int.TryParse(tbContent, out tbNumValue))
                {
                    sum += tbNumValue;
                }
            }
        }

        tbResult.Text = sum == 0 ? string.Empty : sum.ToString();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:35:28.290

您可以这样做来添加值 -

```
 public void AddValues()
    {
        int val1, val2, val3, val4, val5;

        int.TryParse(textBox1.Text, out val1);
        int.TryParse(textBox2.Text, out val2);
        int.TryParse(textBox3.Text, out val3);
        int.TryParse(textBox4.Text, out val4);
        int.TryParse(textBox5.Text, out val5);

        textboxtotal.Text = (val1 + val2 + val3 + val4 + val5).ToString();
    } 
```

现在，对于您问题的其他部分，只需调用您`AddValues()`的`TextChanged`文本框即可。

# javascript - 如何在 JavaScript 中执行相当于 php str_replace 的操作？

> ID：14493454
> 
> 赞同：0
> 
> 时间：2013-01-24T03:29:54.330
> 
> 标签：javascript, replace, str-replace, case-sensitive

如何在 JavaScript 中执行区分大小写的字符串替换？我正在寻找类似于 PHP 的`str_replace`.

```
var text = "this IS some sample text that is going to be replaced";
var new_text = replace_in_javascript("IS", "is not", text);
document.write(new_text); 
```

应该给

```
this is not some sample text that is going to be replaced 
```

我想替换所有的出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T03:31:23.183

您可以使用正则表达式：

```
var str = 'is not';
str = str.replace(/IS/g, 'something'); // won't replace "is" 
```

`g`是针对全球的。

如果您想要不区分大小写的结果，请添加`i`标志，`/is/gi`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T20:36:18.917

与 PHP 函数完全相同：

```
function str_ireplace(search, replace, subject) {
  //  discuss at: http://phpjs.org/functions/str_ireplace/
  // original by: Martijn Wieringa
  //    input by: penutbutterjelly
  //    input by: Brett Zamir (http://brett-zamir.me)
  // improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
  // improved by: Jack
  // bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
  // bugfixed by: Onno Marsman
  // bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
  // bugfixed by: Philipp Lenssen
  //   example 1: str_ireplace('l', 'l', 'HeLLo');
  //   returns 1: 'Hello'
  //   example 2: str_ireplace('$', 'foo', '$bar');
  //   returns 2: 'foobar'

  var i, k = '';
  var searchl = 0;
  var reg;

  var escapeRegex = function(s) {
    return s.replace(/([\\\^\$*+\[\]?{}.=!:(|)])/g, '\\$1');
  };

  search += '';
  searchl = search.length;
  if (Object.prototype.toString.call(replace) !== '[object Array]') {
    replace = [replace];
    if (Object.prototype.toString.call(search) === '[object Array]') {
      // If search is an array and replace is a string,
      // then this replacement string is used for every value of search
      while (searchl > replace.length) {
        replace[replace.length] = replace[0];
      }
    }
  }

  if (Object.prototype.toString.call(search) !== '[object Array]') {
    search = [search];
  }
  while (search.length > replace.length) {
    // If replace has fewer values than search,
    // then an empty string is used for the rest of replacement values
    replace[replace.length] = '';
  }

  if (Object.prototype.toString.call(subject) === '[object Array]') {
    // If subject is an array, then the search and replace is performed
    // with every entry of subject , and the return value is an array as well.
    for (k in subject) {
      if (subject.hasOwnProperty(k)) {
        subject[k] = str_ireplace(search, replace, subject[k]);
      }
    }
    return subject;
  }

  searchl = search.length;
  for (i = 0; i < searchl; i++) {
    reg = new RegExp(escapeRegex(search[i]), 'gi');
    subject = subject.replace(reg, replace[i]);
  }

  return subject;
} 
```

原文： http: [//phpjs.org/functions/str_ireplace/](http://phpjs.org/functions/str_ireplace/)

# java - Mysql 给出 ClassCastException ： java.math.BigInteger 不能在 Amazon EC2 上转换为 java.lang.Long

> ID：14493462
> 
> 赞同：-1
> 
> 时间：2013-01-24T03:30:56.513
> 
> 标签：java, mysql, servlets, amazon-ec2, classcastexception

我有一个 Java servlet 项目，最近部署在 amazon ec2 实例上。我在 ec2 上安装了 java6、mysql 和 tomcat7 并运行我的应用程序。但是突然之间，网站开始到处给我这个 ClassCastException。“org.mybeans.factory.RollbackException: java.lang.ClassCastException: java.math.BigInteger cannot be cast to java.lang.Long” 但奇怪的是同一个项目在我的本地机器上运行得非常好。我只是将 .war 文件 scp 到 ec2 上并运行它。有没有人遇到过类似的问题？谁能提供一些建议如何解决这个问题？谢谢！（这是我在这里的第一个问题，抱歉格式混乱..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:48:30.773

根据[http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-type-conversions.html](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-type-conversions.html) BigInteger 从 MySQL 值 UNSIGNED BIGINT 返回，其中 BIGINT 返回 Long。您的本地计算机和 ec2 之间的 db 模式是否存在差异？

# android - 在 Android 上使用 OpenGL ES 围绕另一个球体旋转

> ID：14493471
> 
> 赞同：1
> 
> 时间：2013-01-24T03:31:33.737
> 
> 标签：android, opengl-es, colors, rotation, geometry

我有以下问题：我正在尝试在 Android 上的 OpenGL ES 中创建一个太阳能系统。我已经有了一些球体。现在我想让球体围绕中心最大球体的轨道旋转（就像行星围绕太阳旋转一样）。我怎么做？球体围绕自身旋转有效，但我不知道如何让它围绕另一个球体旋转。

另外，我的颜色有问题。我的代码中一定有问题，因为我所有的“行星”都是灰色的。我试图让太阳变成红色，但它一直是灰色的，我不知道为什么。我使用了 gl.glColor4f 并且应该可以，但它没有。

请帮忙，这非常紧急，因为我需要在 1 月 28 日星期一之前运行，因为这是我正在为我的学习做的一个程序，我真的不知道如何解决这些问题。请帮忙。谢谢你。

这是我的代码：

```
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL;
import javax.microedition.khronos.opengles.GL10;

import my.pack.graphics.primitives.Sphere;

import android.app.Activity;
import android.content.Context;
import android.opengl.GLSurfaceView;
import android.opengl.GLU;
import android.opengl.GLUtils;
import android.os.Bundle;
import android.util.FloatMath;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.widget.Toast;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import java.nio.IntBuffer;
import java.nio.ShortBuffer;

public class GLES06 extends Activity {
    private GLSurfaceView touchableGLSurfaceView;

    private final int MENU_RESET = 1, MENU_PAN = 2, MENU_ZOOM = 3;
    private final int GROUP_DEFAULT = 0, GROUP_PAN = 1, GROUP_ZOOM = 2;
    private boolean PAN = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    touchableGLSurfaceView = new TouchableGLSurfaceView(this);
    setContentView(touchableGLSurfaceView);
    touchableGLSurfaceView.setFocusableInTouchMode(true);
    touchableGLSurfaceView.requestFocus();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(GROUP_DEFAULT, MENU_RESET, 0, "Reset");
    menu.add(GROUP_PAN, MENU_PAN, 0, "Pan");
    menu.add(GROUP_ZOOM, MENU_ZOOM, 0, "Zoom");
    return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
    if (PAN) {
        menu.setGroupVisible(GROUP_PAN, false);
        menu.setGroupVisible(GROUP_ZOOM, true);
    } else {
        menu.setGroupVisible(GROUP_PAN, true);
        menu.setGroupVisible(GROUP_ZOOM, false);
    }
    return super.onPrepareOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case MENU_RESET:
            TouchableGLSurfaceView.resetViewing();
            Toast.makeText(this, "trackball reset",               
                            Toast.LENGTH_SHORT).show();
            touchableGLSurfaceView.requestRender();
            return true;
        case MENU_PAN:
            Toast.makeText(this, "panning activated", 
                            Toast.LENGTH_SHORT).show();
            PAN = true;
            TouchableGLSurfaceView.guiZoom = false;
            return true;
        case MENU_ZOOM:
            Toast.makeText(this, "zooming activated", 
                            Toast.LENGTH_SHORT).show();
            PAN = false;
            TouchableGLSurfaceView.guiZoom = true;
            return true;
    }
    return super.onOptionsItemSelected(item);
    }

    @Override
    protected void onResume() {
    super.onResume();
    touchableGLSurfaceView.onResume();
    }

    @Override
    protected void onPause() {
    super.onPause();
    touchableGLSurfaceView.onPause();
    }
 }

 // touchable GLSurfaceView with
 // an implementation of a virtual trackball rotation control
class TouchableGLSurfaceView extends GLSurfaceView {
    private OurRenderer ourRenderer;

    static public boolean guiZoom = true;
    // possible touch states
    final static int NONE = 0;
    final static int ROTATE = 1;
    final static int ZOOM = 2;
    final static int PAN = 3;
    int touchState = NONE;

    final static float MIN_DIST = 50;
    static int oldDistance = 0;
    static int centerX = 0, centerY = 0;
    static int oldCenterX = 0, oldCenterY = 0;

    static float EYE_DISTANCE, EYE_DISTANCE_INC;
    static float PAN_X, PAN_Y, PAN_INC;
    static float CURRENT_QUATERNION[], LAST_QUATERNION[];
    static float TRANSFORM_MATRIX[];

    static int OLD_MOUSE_X, OLD_MOUSE_Y, MOUSE_BUTTON_PRESSED;

    static int WINDOW_W = 600;
    static int WINDOW_H = 800;

    static float zNear = 1.0f, zFar = 1000.0f;

    static {
    CURRENT_QUATERNION = new float[4];
    LAST_QUATERNION = new float[4];
    TRANSFORM_MATRIX = new float[16];
    }

    public TouchableGLSurfaceView(Context context) {
    super(context);
    ourRenderer = new OurRenderer();
    setRenderer(ourRenderer);

    ourRenderer.autoRotate=true;
    setRenderMode(GLSurfaceView.RENDERMODE_CONTINUOUSLY);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();

    float p1x, p1y, p2x, p2y;
    // normalize mouse positions
    p1x = (2.0f * OLD_MOUSE_X - WINDOW_W) / WINDOW_W;
    p1y = (WINDOW_H - 2.0f * OLD_MOUSE_Y) / WINDOW_H;
    p2x = (2.0f * x - WINDOW_W) / WINDOW_W;
    p2y = (WINDOW_H - 2.0f * y) / WINDOW_H;

    switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            touchState = ROTATE;
            OLD_MOUSE_X = (int) x;
            OLD_MOUSE_Y = (int) y;
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            // secondary touch event starts: remember distance
            oldDistance = (int) calcDistance(event);
            // and midpoint
            calcMidpoint(event);
            oldCenterX = centerX;
            oldCenterY = centerY;
            if (oldDistance > MIN_DIST) {
                if (guiZoom) {
                    touchState = ZOOM;
                } else {
                    touchState = PAN;
                }
            }
            break;
        case MotionEvent.ACTION_MOVE:  
            if (touchState == ROTATE) {
                // single finger rotate
                Trackball.trackball(LAST_QUATERNION, p1x, p1y, 
                                                                         p2x, p2y);
                OLD_MOUSE_X = (int) x;
                OLD_MOUSE_Y = (int) y;
                Trackball.add_quats(LAST_QUATERNION, 
                                              CURRENT_QUATERNION, CURRENT_QUATERNION);
                requestRender();
            } else if (touchState == ZOOM) {
                // double-finger zoom, zoom depends on changing 
                                       distance
                int dist = (int) calcDistance(event);
                if (dist > MIN_DIST) {
                    if (dist > oldDistance)
                    EYE_DISTANCE -= EYE_DISTANCE_INC;
                    else if (dist < oldDistance)
                    EYE_DISTANCE += EYE_DISTANCE_INC;
                    oldDistance = dist;
                    requestRender();
                }
            } else if (touchState == PAN) {
                int dist = (int) calcDistance(event);
                calcMidpoint(event);
                if (dist > MIN_DIST) {
                    if (centerX > oldCenterX)
                    PAN_X -= PAN_INC;
                    if (centerX < oldCenterX)
                    PAN_X += PAN_INC;
                    if (centerY > oldCenterY)
                    PAN_Y += PAN_INC;
                    if (centerY < oldCenterY)
                    PAN_Y -= PAN_INC;
                    oldCenterX = centerX;
                    oldCenterY = centerY;
                    requestRender();
                }
            }
            break;
        case MotionEvent.ACTION_UP:
            touchState = NONE;
            break;
        case MotionEvent.ACTION_POINTER_UP:
            touchState = ROTATE;
            // update touch down location for drag event to holding finger
            switch (event.getActionIndex()) {
                case 0:
                    OLD_MOUSE_X = (int) event.getX(1);
                    OLD_MOUSE_Y = (int) event.getY(1);
                    break;
                case 1:
                    OLD_MOUSE_X = (int) event.getX(0);
                    OLD_MOUSE_Y = (int) event.getY(0);
                    break;
            }
            break;
    }
    return true;
}

private float calcDistance(MotionEvent event) {
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

private void calcMidpoint(MotionEvent event) {
    centerX = (int) ((event.getX(0) + event.getX(1)) / 2);
    centerY = (int) ((event.getY(0) + event.getY(1)) / 2);
}

// the implementation of the renderer interface
private class OurRenderer implements GLSurfaceView.Renderer {

    //Declaration of some variables for our planets and moons
    private Sphere sun;
    private Sphere merkur;
    private Sphere venus;
    private Sphere erde;
    private Sphere neptun;
    private Sphere uranus;
    private Sphere saturn; 
    private Sphere jupiter;

    private long milSecPerRotation=20*1000;
    private double angle=0.0f;
    private long lastTime;

    public boolean autoRotate=true;

    public OurRenderer() {

        // Defining our planets and moons

        // spheres along z-axis with lightning
        // radius: the radius of the sphere
        // slices: the number of subdivisions along the z-axis
        // stacks: the number of subdivisions around the z-axis
        sun = new Sphere(4.0f, 10, 10);
        merkur = new Sphere(0.5f, 10,10);
        venus = new Sphere(0.9f, 10,10);
        erde = new Sphere(1.0f, 10,10);
        neptun = new Sphere(1.5f, 10,10);
        uranus = new Sphere(1.5f, 10,10);
        saturn = new Sphere(2.5f, 10,10);
        jupiter = new Sphere(3.0f, 10,10);

    }

    public void onDrawFrame(GL10 gl) {
        // the first thing to do: clear screen and depth buffer
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        // reset modelview matrix
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();

        // set ambient light color
        float model_ambient[] = { 0.5f, 0.5f, 0.5f, 1.0f };
        ByteBuffer bb1 = ByteBuffer.allocateDirect(model_ambient.length * 4);
        bb1.order(ByteOrder.nativeOrder());
        FloatBuffer fb1 = bb1.asFloatBuffer();
        fb1.put(model_ambient);
        fb1.position(0);
        gl.glLightModelfv(GL10.GL_LIGHT_MODEL_AMBIENT, fb1);

        // set light position of LIGHT0
        float light_position[] = { 1.0f, 1.0f, 1.0f, 0.0f };
        ByteBuffer bb2 = ByteBuffer.allocateDirect(light_position.length * 4);
        bb2.order(ByteOrder.nativeOrder());
        FloatBuffer fb2 = bb2.asFloatBuffer();
        fb2.put(light_position);
        fb2.position(0);
        gl.glLightfv(GL10.GL_LIGHT0, GL10.GL_POSITION, fb2);

        // enable ligth and lighting
        gl.glEnable(GL10.GL_LIGHT0);
        gl.glEnable(GL10.GL_LIGHTING);

        // manipulate modelview matrix by setting viewing transformation
        gl.glTranslatef(-PAN_X, -PAN_Y, -EYE_DISTANCE);
        Trackball.build_rotmatrix(TRANSFORM_MATRIX, CURRENT_QUATERNION);
        gl.glMultMatrixf(TRANSFORM_MATRIX, 0);

        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_NORMAL_ARRAY);
        gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
        gl.glColor4x(65536, 0, 0, 65536);

        // create an automatic rotation
        long time = System.currentTimeMillis();
        long deltaTime = time-lastTime;
        lastTime=time;
        if (autoRotate) {
            angle = (float) (angle + 360.0 / milSecPerRotation * 
                                                                       deltaTime);
            if (angle > 360.0f)
                angle -= 360;

        }    

        //Building the planets and moons and defining position, rotation and 
                  color

        gl.glPushMatrix();
            gl.glColor4f(1.0f, 0.0f, 0.0f, 1.0f);
            sun.draw(gl);
        gl.glPopMatrix();
        gl.glPushMatrix();
            gl.glTranslatef(0.0f, 8.0f, 0.0f);
            gl.glRotatef((float) angle, 0.0f, 0.0f, -1.0f);
            merkur.draw(gl);
            gl.glPopMatrix();
        gl.glPushMatrix();
            gl.glTranslatef(0.0f, 16.0f, 0.0f);
            gl.glRotatef((float) angle, 0.0f, 0.0f, -1.0f);
            venus.draw(gl);
        gl.glPopMatrix();
        gl.glPushMatrix();
            gl.glTranslatef(0.0f, 24.0f, 0.0f);
            gl.glRotatef((float) angle, 0.0f, 0.0f, -1.0f);
            erde.draw(gl);
        gl.glPopMatrix();
        gl.glPushMatrix();
            gl.glTranslatef(0.0f, 32.0f, 0.0f);
            gl.glRotatef((float) angle, 0.0f, 0.0f, -1.0f);
            neptun.draw(gl);
        gl.glPopMatrix();
        gl.glPushMatrix();
            gl.glTranslatef(0.0f, 40.0f, 0.0f);
            gl.glRotatef((float) angle, 0.0f, 0.0f, -1.0f);
            uranus.draw(gl);
        gl.glPopMatrix();
        gl.glPushMatrix();
            gl.glTranslatef(0.0f, 48.0f, 0.0f);
            gl.glRotatef((float) angle, 0.0f, 0.0f, -1.0f);
            saturn.draw(gl);
        gl.glPopMatrix();
        gl.glPushMatrix();
            gl.glTranslatef(0.0f, 56.0f, 0.0f);
            gl.glRotatef((float) angle, 0.0f, 0.0f, -1.0f);
            jupiter.draw(gl);
        gl.glPopMatrix();
    }

    // resize of viewport
    // set projection matrix
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        gl.glViewport(0, 0, width, height);

        float aspectRatio = (float) width / height;
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        GLU.gluPerspective(gl, 45.0f, aspectRatio, zNear, zFar);
        GLU.gluLookAt(gl, 0.0f, 0.0f, 5.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 
                                                                             0.0f);
        gl.glMatrixMode(GL10.GL_MODELVIEW);

        lastTime = System.currentTimeMillis();
    }

    // creation of viewport
    // initialization of some opengl features
    public void onSurfaceCreated(GL10 gl, EGLConfig config) {

        gl.glDisable(GL10.GL_DITHER);
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);

        gl.glClearColor(0, 0, 0, 1);
        gl.glEnable(GL10.GL_CULL_FACE);
        gl.glShadeModel(GL10.GL_SMOOTH);
        //gl.glShadeModel(GL10.GL_FLAT);
        gl.glEnable(GL10.GL_DEPTH_TEST);

        resetViewing();
    }
}

// reset of view parameters
static void resetViewing() {
    EYE_DISTANCE = 0.5f;
    EYE_DISTANCE_INC = 0.5f;
    PAN_X = 0.0f;
    PAN_Y = 0.0f;
    PAN_INC = 0.1f;

    // trackball init
    Trackball.trackball(CURRENT_QUATERNION, 0.0f, 0.0f, 0.0f, 0.0f);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:46:27.537

为了让球体像行星一样移动，旋转然后平移。

```
glPushMatrix();
  gluLookAt( ... );  // The camera transformation should affect everyone
  sun.draw(gl);

  // Draw the earth and moon
  glPushMatrix();
    glRotatef( day, 0, 1, 0 );
    glTranslatef( 0, earthRadius, 0 );
    glPushMatrix();
      glRotatef( hour, 0, 1, 0 );
      earth.draw(gl);
      glTranslatef( 0, moonRadius, 0 );
      moon.draw(gl); // the moon is geostationary, so it doesn't rotate
    glPopMatrix();
  glPopMatrix();

  // Draws mars
  glPushMatrix();
    glRotatef( martianDay, 0, 1, 0 );
    glTranslatef( 0, marsRadius, 0 );
    mars.draw(gl);
  glPopMatrix();

glPopMatrix(); 
```

这一系列调用通常称为“依赖转换”，因为转换的动作会影响稍后在同`glPushMatrix/glPopMatrix`一块内调用的转换。

至于颜色问题，这是因为您启用了照明，并且从照明覆盖生成的颜色（在 OpenGL 中；不在您的顶点数组中）与顶点一起传递。这本身不是问题，但它需要的不仅仅是启用光照模型的环境部分。具体来说，您需要为您的对象指定*材料属性*。看看`glMaterialf`。

# vba - 如何以编程方式添加 excel 2010 宏

> ID：14493473
> 
> 赞同：6
> 
> 时间：2013-01-24T03:32:06.577
> 
> 标签：vba, excel, excel-2010

是否有任何方法可以以编程方式将宏添加到 Excel 文件？
我有太多的 Excel 文件，我想向它们添加一个宏。手动（手动）添加似乎是不可能的。我需要创建一个工具来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T13:07:44.807

是的，您可以通过编程方式执行此操作，您可以通过代码访问 VB 集成开发环境。以下网站非常适合学习 VBIDE，我用它们来整理这段代码。如果运行`WorkbookModuleImport`会弹出两个打开的对话框，第一个是要求工作簿导入模块，第二个是选择要导入的模块。

```
Sub WorkbookModuleImport()
    Dim ii As Integer, vFileNames As Variant, vModules As Variant

    'We'll use the Application.GetOpenFilename to get a list of all the excel     workbooks we want to import into
    vFileNames = Application.GetOpenFilename(",*.xls;*.xlsx;*.xlsm", , "Select Workbooks to Import Modules To", , True)
    'If the result is not an array it means the cancel button has been pressed
    If Not IsArray(vFileNames) Then Exit Sub

    'Use the same method to get all the modules/classes/forms to input
    vModules = Application.GetOpenFilename(",*.cls, *.bas, *.frm", , "Select Modules/Forms/Class Modules to Import", , True)
    If Not IsArray(vModules) Then Exit Sub

    'Now loop through all the workbooks to import the modules
    For ii = LBound(vFileNames) To UBound(vFileNames)
        Call ImportModules(VBA.CStr(vFileNames(ii)), vModules)
    Next ii

End Sub

Public Sub ImportModules(sWorkbookName As String, vModules As Variant)
    Dim cmpComponents As VBIDE.VBComponents, ii As Integer
    Dim wkbTarget As Excel.Workbook

    'We need to open the workbook in order to be able to import the code module
     Set wkbTarget = Workbooks.Open(sWorkbookName)

    'If the project is protected with a password we can't import so just set tell us in the immediate window
    If wkbTarget.VBProject.Protection = 1 Then
        'Give a message
        Debug.Print wkbTarget.Name & " has a protected project, cannot import module"
        GoTo Cancelline
    End If

    'This is where we set the reference to the components of the Visual Basic project
    Set cmpComponents = wkbTarget.VBProject.VBComponents

   'Loop through all the modules to import
    For ii = LBound(vModules) To UBound(vModules)
        cmpComponents.Import vModules(ii)
    Next ii

Cancelline:
   'If it's in Excel 2007+ format but doesn't already have macros, we'll have to save it as a macro workbook
   If wkbTarget.FileFormat = xlOpenXMLWorkbook Then
       wkbTarget.SaveAs wkbTarget.Name, xlOpenXMLWorkbookMacroEnabled
       wkbTarget.Close SaveChanges:=False
   Else
       'Otherwise, just save the workbook and close it
        wkbTarget.Close SaveChanges:=True
   End If

   'I don't trust excel, so set the workbook object to nothing
   Set wkbTarget = Nothing
End Sub 
```

这些网页是很好的参考： [http](http://www.cpearson.com/excel/vbe.aspx) ://www.cpearson.com/excel/vbe.aspx和 [http://www.rondebruin.nl/vbaimportexport.htm](http://www.rondebruin.nl/vbaimportexport.htm)。我以罗恩为起点。

# ruby-on-rails - 载波：拒绝 .gif 重命名为 .jpg

> ID：14493476
> 
> 赞同：1
> 
> 时间：2013-01-24T03:32:14.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave, rmagick

我想允许用户上传`.jpg`文件，但前提是它们实际上是（`.jpg`例如， `cat.gif`重命名为**不起作用**。`cat.jpg`

 **目前在我的 Carrierwave 中，`ImageUploader.rb`我有：

```
include CarrierWave::RMagick
include CarrierWave::MimeTypes
process :set_content_type
def extension_white_list
  %w(jpg jpeg png)
end 
```

在我的 Rspec 测试文件中，我以三种方式对其进行测试：

```
# Works
describe "with invalid mime type and invalid extension" do
  before do
    image.image = File.open(File.join(Rails.root, 'spec', 'support', 'image', 'images', 'executable.jpg')) # this is a .exe renamed to .jpg
  end
  it { image.should_not be_valid }
end

# Works
describe "with invalid mime type and invalid extension" do
  before do
    image.image = File.open(File.join(Rails.root, 'spec', 'support', 'image', 'images', 'test_gif.gif')) # this is a .gif
  end
  it { should_not be_valid }
end

# Doesn't work
describe "with invalid mime type and valid extension" do
  before do
    image.image = File.open(File.join(Rails.root, 'spec', 'support', 'image', 'images', 'test_gif.jpg')) # this is a .gif renamed to .jpg
  end
  it { image.should_not be_valid }
end 
```

前两个测试通过，但第二个测试失败。我不知道为什么，因为我没有`gif`在白名单上，我正在检查 mime 类型。

有什么建议么？

（将 gifs 转换为 jpgs 是我的备份，但我宁愿拒绝它们。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T18:43:47.610

我遇到了同样的问题，不得不为我的上传程序覆盖默认的 set_content_type 方法。这假设您的 Gemfile 中有**Rmagick** gem，这样您就可以通过读取图像获得正确的 mime 类型，而不是做出最佳猜测。

注意：如果图像被仅支持 JPG 和 PNG 图像的 Prawn 使用，这将特别有用。

**上传者类：**

```
process :set_content_type

def set_content_type #Note we are overriding the default set_content_type_method for this uploader
  real_content_type = Magick::Image::read(file.path).first.mime_type
  if file.respond_to?(:content_type=)
    file.content_type = real_content_type
  else
    file.instance_variable_set(:@content_type, real_content_type)
  end
end 
```

**图像模型：**

```
class Image < ActiveRecord::Base
  mount_uploader :image, ImageUploader

  validates_presence_of :image
  validate :validate_content_type_correctly

  before_validation :update_image_attributes

private
  def update_image_attributes
    if image.present? && image_changed?
      self.content_type = image.file.content_type
    end
  end

  def validate_content_type_correctly
    if not ['image/png', 'image/jpg'].include?(content_type)
      errors.add_to_base "Image format is not a valid JPEG or PNG."
      return false
    else
      return true
    end
  end
end 
```**

# google-app-engine - Google App Engine ndb：查找订单查询列表的位置

> ID：14493479
> 
> 赞同：2
> 
> 时间：2013-01-24T03:32:29.683
> 
> 标签：google-app-engine, google-cloud-datastore, data-modeling

在 Google App Engine 的 ndb 上，我使用以下内容检索所有实体并根据它们的等级对它们进行排序：

```
ranks = Member.query().order(-Member.grade) 
```

然后我想知道特定成员的位置：

```
i = 0
for rank in ranks:
    if rank.account == 'abc'
        position = i
        break
    i += 1 
```

我的问题：是否有等效的 ndb 操作来查找特定实体的位置？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-23T14:43:11.997

我相信它可以分两步完成

1.  检索帐户为“abc”的条目

    目标 = Member.query(Member.account=='abc').get()

2.  查询评分较高的条目

    n = Member.query(Member.grade>target.grade).count()

然后你得到目标的等级为 n+1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:30:46.257

看起来您正在尝试查找成员的等级。看看[http://code.google.com/p/google-app-engine-ranklist/](http://code.google.com/p/google-app-engine-ranklist/)这将使您能够通过查询找到排名，而无需遍历所有分数。

# java - 从 onClick 侦听器调用方法

> ID：14493480
> 
> 赞同：-4
> 
> 时间：2013-01-24T03:32:47.170
> 
> 标签：java, this, inner-classes

> **可能重复：**
> [在 Java 中访问内部类的包含类](https://stackoverflow.com/questions/2858604/accessing-the-containing-class-of-an-inner-class-in-java)

我知道这肯定已经得到了回答，但是我已经连续两个晚上一直在研究这个问题，我要么不明白，要么把事情搞砸了。我正在尝试使用按钮调用方法。我的方法只是复制和粘贴，所以它不会打开另一个活动。

```
package com.example.copypastetest;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class PDFtester extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_pdftester);
            Button b1 = (Button) findViewById(R.id.button2);
            b1.setOnClickListener(new OnClickListener(){;

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            //public void work (View view){
    this is my issue??-->Intent intent = new Intent(this, copyAsset.class);
            startActivity(intent);}         
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_pdftester, menu);
        return true;}
    }; 
```

谢谢你的关注，我承认我是一个彻头彻尾的黑客。我做到这一点的唯一原因是这个网站，第一个问题，我相信很多人，但希望有人能提供帮助。我并不是想成为吸血鬼，但如果有一个页面我可以阅读以了解我做错了什么，我真的在这里寻找正确的答案，我全神贯注。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:20:51.407

使用此代码：

```
 @Override
    public void onClick(View view) {
        // TODO Auto-generated method stub
        //public void work (View view){
        Intent intent = new Intent(PDFtester.this, copyAsset.class);
        startActivity(intent);}         
    } 
```

注意：- 等接口`OnClickListener`不`OnTouchListener`用于`this`尝试`Context`使用`YourActivity.this`或`getApplicationContext()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:13:21.457

```
b1.setOnClickListener(new OnClickListener(){;

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        //public void work (View view){
this is my issue??-->Intent intent = new Intent(PDFtester.this, copyAsset.class);
        startActivity(intent);}         
    }

 // define the scope as PDFtester.this 
```

# javascript - 未捕获的错误：HIERARCHY_REQUEST_ERR：DOM 异常 3

> ID：14493484
> 
> 赞同：0
> 
> 时间：2013-01-24T03:33:00.920
> 
> 标签：javascript, jquery

第 18 行：$('#display-month').html(msg); 在 get_month() 函数中返回以下错误：未捕获错误：HIERARCHY_REQUEST_ERR：DOM 异常 3

我最初在加载时触发 get_month()，以将当前月历加载到 .

我不知道为什么该行会中断加载当前月历。

```
$(document).ready(function() {

  function get_month()
  {
    var u = $("#days_for_month_url").attr("href");

    var form_data = {
      ajax : '1'
    };

    $.ajax({
      type: 'POST',
      url: u,
      data: form_data,
      success: function( msg ) {

        $('#display-month').html(msg);

      } // end success

    }); // end ajax

    return false;
  }

  get_month();

  $("a.view_events").live('click', function() {

    var date = $(this).data('date');

    // change if URL changes
    var u = $("#events_for_day_url").attr("href");

    var form_data = {
      year : $(this).data('year'),
      month : $(this).data('month'),
      day : $(this).data('day'),
      date : $(this).data('date'),
      ajax : '1'
    };

    $.ajax({
      type: 'POST',
      url: u,
      data: form_data,
      success: function( msg ) {

        $('#display-events').html(msg);
        $('#display-event_detail').html('');

      } // end success

    }); // end ajax

    return false;

  }); // end on.click view-events

  $("a.view_event_details").live('click', function() {

    var u = $("#event_detail_url").attr("href");

    var form_data = {
      event_id : $(this).data('event_id'),
      ajax : '1'
    };

    $.ajax({
      type: 'POST',
      url: u,
      data: form_data,
      success: function( msg ) {

        $('#display-event_detail').html(msg);
        $('#display-events').html('');

      } // end success

    }); // end ajax

    return false;

  }); // end on.click view_event_details

  $("a.month_link").live('click', function() {

    $('#display-events').html('');

    var u = $("#days_for_month_url").attr("href");

    var form_data = {
      month_url : $(this).data('month_url'),
      ajax : '1'
    };

    $.ajax({
      type: 'POST',
      url: u,
      data: form_data,
      success: function( msg ) {

        $('#display-month').html(msg);

      } // end success

    }); // end ajax

    return false;

  }); // end on.click view-month

 $("a.view_subscriptions").live('click', function() {

    var u = $("#subscriptions_url").attr("href");

    var form_data = {
      ajax : '1'
    };

    $.ajax({
      type: 'POST',
      url: u,
      data: form_data,
      success: function( msg ) {

        $('#display-subscriptions').html(msg);
        //$('#display-subscriptions').toggle();

      } // end success

    }); // end ajax

    return false;

  }); // end on.click view-subscriptions

 $("#update_subscriptions").live('click', function() {

    var u = $("#update_subscriptions_url").attr("href");

    var vals = []
    $('input:checkbox[name="calendar[]"]').each(function() {
        if (this.checked) {
            vals.push(this.value);
        }
    });

    var form_data = {
      ajax : '1',
      calendar: vals,
    };

    $.ajax({
      type: 'POST',
      url: u,
      data: form_data,
      success: function( msg ) {

        get_month();
        $('#display-subscriptions-update').html(msg).fadeOut(6000);
        $('#display-subscriptions').html('');

      } // end success

    }); // end ajax

    return false;

  }); // end on.click view-subscriptions

}); // end document ready 
```

更新：验证了它在 ajax 调用中返回的 html（这不会导致问题），并且我在 ajax 调用中添加了 dataType: 'html' ，从而修复了它。

# javascript - Javascript 方法调用模式示例不起作用，为什么？

> ID：14493485
> 
> 赞同：0
> 
> 时间：2013-01-24T03:33:03.160
> 
> 标签：javascript

这个片段是我在书中找到的 [Javascript - 好的部分]

它根本不起作用。在“var myObject...”行中缺少 '}'，因为 IE8 描述了一个错误。

我错过了什么？

```
// Create myObject. It has a value and an increment
// method. The increment method takes an optional
// parameter. If the argument is not a number, then 1
// is used as the default.

var myObject = {
    value: 0;
    increment: function (inc) {
        this.value += typeof inc === 'number' ? inc : 1;
    }
};

myObject.increment(  );
document.writeln(myObject.value);    // 1

myObject.increment(2);
document.writeln(myObject.value);    // 3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T03:34:11.313

在[对象文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Object_literals)中，属性由逗号 ( `,`) 分隔，而不是分号 ( `;`)。改变这个：

```
value: 0; 
```

对此：

```
value: 0, 
```

# python-2.7 - 如何让海龟一起移动？

> ID：14493488
> 
> 赞同：0
> 
> 时间：2013-01-24T03:33:15.797
> 
> 标签：python-2.7, turtle-graphics

这是我的代码（Python初学者，不专业的代码请多多包涵），基本上我想要的是让两只海龟一起在同一个圆圈上移动（你可能猜到了，我的任务是模拟一艘追逐国际空间站的宇宙飞船）。在我的代码中，第一个海龟将围绕圆圈移动，然后是第二个海龟：

```
from turtle import *
rocket=Turtle()
ISS=Turtle()
counter=1
title("ISS")
screensize(750,750)
ISS.hideturtle()
rocket.hideturtle()
ISS.penup()
ISS.left(90)
ISS.fd(250)
ISS.left(90)
ISS.showturtle()
ISS.pendown()
rocket.penup()
rocket.fd(250)
rocket.left(90)
rocket.showturtle()
rocket.pendown()
while counter==1:
    ISS.speed(1)
    rocket.speed(2)
    ISS.circle(250)
    rocket.circle(250) 
```

我的老师告诉我“线程”可以解决这个问题，但我不太明白。如果有人可以帮助我解决这个问题，将不胜感激；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:14:04.527

有一个乌龟[限制](http://bugs.python.org/issue1702036)，不允许它在多线程中工作。

虽然，您不必将乌龟移动整个圆圈，您可以将其移动一部分。另外，我认为您误解了`speed`它的作用。这只是乌龟绘制的速度。

```
from turtle import *

def move(thing, distance):
    thing.circle(250, distance)

def main():
    rocket = Turtle()
    ISS = Turtle()
    rocket.speed(10)
    ISS.speed(10)
    counter = 1
    title("ISS")
    screensize(750, 750)
    ISS.hideturtle()
    rocket.hideturtle()
    ISS.penup()
    ISS.left(90)
    ISS.fd(250)
    ISS.left(90)
    ISS.showturtle()
    ISS.pendown()
    rocket.penup()
    rocket.fd(250)
    rocket.left(90)
    rocket.showturtle()
    rocket.pendown()

    while counter == 1:
        move(ISS, 3)
        move(rocket, 4)

if __name__ == '__main__':
    main() 
```

我重复了移动这个东西的步骤，无论是国际空间站还是火箭，并使它成为一个功能。我将绘图速度提高到 10，因为我认为它看起来更流畅。国际空间站现在每一步只移动火箭的 3/4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-18T23:14:29.980

在像 turtle 这样的事件驱动的世界中，你不应该这样做：

```
counter = 1
...
while counter==1: 
```

这有可能锁定事件。此外，没有办法彻底退出该程序。不是在循环中移动不同的*距离*`while`，而是移动一个恒定的距离，但在一个事件中具有不同的*延迟*`ontimer()`（应该与 Python 2 或 3 一起使用）：

```
from turtle import Turtle, Screen

RADIUS = 250
ISS_DELAY = 100  # milliseconds
ROCKET_DELAY = 75  # milliseconds
CURSOR_SIZE = 20

def move_ISS():
    ISS.circle(RADIUS, 1)

    screen.ontimer(move_ISS, ISS_DELAY)

def move_rocket():
    rocket.circle(RADIUS, 1)

    # rocket slows to ISS' speed once docked
    delay = ISS_DELAY if rocket.distance(ISS) <= CURSOR_SIZE else ROCKET_DELAY

    screen.ontimer(move_rocket, delay)

screen = Screen()
screen.title("ISS")
screen.setup(750, 750)

ISS = Turtle("square", visible=False)
ISS.speed('fastest')
ISS.penup()
ISS.left(180)
ISS.sety(RADIUS)
ISS.showturtle()
ISS.pendown()

rocket = Turtle("triangle", visible=False)
rocket.speed('fastest')
rocket.penup()
rocket.left(90)
rocket.setx(RADIUS)
rocket.showturtle()
rocket.pendown()

move_ISS()
move_rocket()

screen.exitonclick() 
```

您可以随时单击窗口上的任意位置，以干净地退出事件处理程序的程序。我加入了一些逻辑，让太空船在它们停靠而不是飞过国际空间站后就粘在国际空间站上。

这也可以通过线程来完成，但所有图形操作都必须通过主线程进行引导以避免 Tkinter 错误（仅限 Python3 的解决方案）：

```
from threading import Thread, active_count
from turtle import Turtle, Screen
from queue import Queue  # use for thread-safe communications
from time import sleep

RADIUS = 250
ISS_DISTANCE = 3
ROCKET_DISTANCE = 4
CURSOR_SIZE = 20
QUEUE_SIZE = 1

def move_ISS(turtle):
    while True:
        actions.put((turtle.circle, RADIUS, ISS_DISTANCE))
        sleep(0.1)

def move_rocket(turtle):
    while True:
        # rocket slows to ISS' speed once docked
        distance = ISS_DISTANCE if rocket.distance(ISS) <= CURSOR_SIZE else ROCKET_DISTANCE

        actions.put((turtle.circle, RADIUS, distance))
        sleep(0.1)

def process_queue():
    while not actions.empty():
        action, *arguments = actions.get()
        action(*arguments)

    if active_count() > 1:
        screen.ontimer(process_queue, 100)

actions = Queue(QUEUE_SIZE)

screen = Screen()
screen.title("ISS")
screen.setup(750, 750)

ISS = Turtle("square", visible=False)
ISS.speed('fastest')
ISS.penup()
ISS.left(180)
ISS.sety(RADIUS)
ISS.showturtle()
ISS.pendown()

ISS_thread = Thread(target=move_ISS, args=[ISS], daemon=True)

rocket = Turtle("triangle", visible=False)
rocket.speed('fastest')
rocket.penup()
rocket.left(90)
rocket.setx(RADIUS)
rocket.showturtle()
rocket.pendown()

rocket_thread = Thread(target=move_rocket, args=[rocket], daemon=True)

ISS_thread.start()
rocket_thread.start()

process_queue()

screen.exitonclick() 
```

# javascript - 如何将动态创建的表单字段的值传递给文本区域

> ID：14493490
> 
> 赞同：0
> 
> 时间：2013-01-24T03:33:26.057
> 
> 标签：javascript, jquery, forms, dynamic

我正在尝试使用动态表单元素“添加”/“删除”功能创建一个简单的表单。最终，一旦条目完成，我希望表单结果显示在文本区域中。

我在这个论坛上进行了搜索，并设法拼凑了一些可以实现一些但不是我所有目标的东西。它将动态地制作我的表单元素，并删除它们。但是，当我尝试在我的 textarea 中显示结果时，只显示第一个选项。此外，当我在文本输入中输入内容时，所有后续的新字段都预先填充了该用户文本。最后，由于我的元素之一是选择框，我想知道是否有人更好地了解如何让用户在 20-30 个选项中进行选择？

我的 HTML

```
 <form name="builder">
    <fieldset>
         <h2>Select your results</h2>

        <div id="IPOX">
            <p>
                <select name="column1" id="col1">
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                    <option value="E">E</option>
                    <option value="F">F</option>
                    <option value="Z">Z</option>
                </select>
                <select name="column2" id="col2">
                    <option value="POS">POS</option>
                    <option value="NEG">NEG</option>
                    <option value="EQUIV">EQUIV</option>
                </select>
                <input type="text" name="usercomm" id="usercomm">
            </p>
        </div>
        <p><span class="add">Add another row</span>

        </p>
    </fieldset>
    <br>
    <br>
    <p>
        <input type="button" id="submit" value="Done!" onclick="printIHC()" />
    </p>
</form> 
```

我的js

```
 $(window).load(function () {
    $(function () {
        var defaults = {
            'usercomm': '-'
        };

        // separating set and remove
        // note that you could add "defaults" as an arg if you had different
        // defaults for different fieldsets
        var setDefaults = function (inputElements) {
            $(inputElements).each(function () {
                var d = defaults[this.name];
                if (d) {
                    // set with jQuery
                    // we don't need the data - just check on the class
                    $(this).val(d)
                        .addClass('default_value');
                }
            });
        };

        var removeDefaults = function (inputElements) {
            $(inputElements).each(function () {
                if ($(this).hasClass('default_value')) {
                    $(this).val('')
                        .removeClass('default_value');
                }
            });
        };

        setDefaults(jQuery('form[name=builder] input'));

        $("span.add").click(function () {
            // get the correct fieldset based on the current element
            var $fieldset = $(this).closest('fieldset');
            var $inputset = $('p', $fieldset)
                .first()
                .clone()
                .insertBefore($('p', $fieldset).last());
            // add a remove button
            $inputset.append('<span class="remove">Remove</span>');
            setDefaults($('input', $inputset));
            // return false; (only needed if this is a link)
        });

        // use delegate here to avoid adding new 
        // handlers for new elements
        $('fieldset').delegate("span.remove", {
            'click': function () {
                $(this).parent().remove();
            }
        });

        // Toggles 
        $('form[name=builder]').delegate('input', {
            'focus': function () {
                removeDefaults($(this));
            },
                'blur': function () {
                // switch to using .val() for consistency
                if (!$(this).val()) setDefaults(this);
            }
        });
    });     
});
// Print values to textarea
        function printIHC() {
            var myIHC = document.getElementById('output');
            var selectAb = document.getElementById('col1');
            selectAb.onchange = this.value;
            var selectVal = document.getElementById('col2');
            selectVal.onchange = this.value;
            var userTxt = document.getElementById('usercomm');

            ihcOut = 'Column 1\tValue \tComments\n---------------------------------\n' + selectAb.value + '\t\t' + selectVal.value + '\t' + userTxt.value + '\n';
            myIHC.value += ihcOut;
        } 
```

我不是程序员，所以我不知道我是否应该混合使用javascript和jquery。我也有一种感觉，当表单元素被动态创建时，它们对打印脚本显得无声。最后，与此相关的许多主题都涉及 PHP 脚本，我想避免这些，因为我不完全了解它们是如何工作的。

我试着把它变成一个 jsfiddle，如果它更容易查看的话 - [http://jsfiddle.net/Vqzk9/](http://jsfiddle.net/Vqzk9/)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:59:33.570

您应该做的第一件事是将`col1`, `col2`,`usercomm`从更改`id`为`class`。因为`id`是独一无二的。

然后我写一个新`printthis`的如下：

```
function printthis() {
   var ihcOut = 'Column 1\tValue \tComments\n---------------------------------\n';
         $('fieldset p').each(function(){
             if($(this).find('.add').length>0)return;
            var selectAb = $(this).find('.col1').val();
            var selectVal = $(this).find('.col2').val();
           var userTxt = $(this).find('.usercomm').val();
            ihcOut += selectAb + '\t\t' + selectVal + '\t' + userTxt + '\n';
        });
        $('#output').val(ihcOut);
  } 
```

这是jsfiddle [http://jsfiddle.net/Vqzk9/1/](http://jsfiddle.net/Vqzk9/1/)

# django - 在多个前端 Django 1.4 和 jQuery 中创建动态组合框？

> ID：14493491
> 
> 赞同：1
> 
> 时间：2013-01-24T03:33:39.863
> 
> 标签：django, python-2.7, django-forms, django-1.4, frontend

抱歉，如果您不理解翻译但我需要 Django 1.4 的帮助，事实是我需要一个示例或教程如何以 html 形式创建多个动态后端组合框，组合框数据是从数据库中获取的，应该保存.

一个例子[http://www.martiniglesias.eu/demos/combobox/index.php](http://www.martiniglesias.eu/demos/combobox/index.php)

这个例子的想法是使用**Django 1.4、Mysql 和 Jquery。**

任何问题，如果不让我知道请理解，我会注意您的反馈。

谢谢！。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:59:41.183

您可以使用 dajaxproject 获取动态组合框的数据，这是一个示例：[http ://www.dajaxproject.com/forms/](http://www.dajaxproject.com/forms/)

# javascript - 小屏幕上的 Javascript DOM offsetHeight 问题

> ID：14493494
> 
> 赞同：0
> 
> 时间：2013-01-24T03:33:53.067
> 
> 标签：javascript, dom, mobile, offsetheight

我有一个简单的代码来将一列`id="colLeft"`的高度设置为另一列的高度，`id="colRight"`没有填充或边框：

```
<script type="text/javascript">
    var colLeft = document.getElementById("colLeft");
    var colRight = document.getElementById("colRight");
    colLeft.style.height = colRight.offsetHeight + "px";
</script> 
```

此代码在台式机和 iPad 上运行良好，但在我的 android 手机上，结果相当不可预测。有时 colLeft 更长，有时 colRight ，有时它按应有的方式工作。我已经在两个浏览器上尝试过，结果相同。

我也在里面尝试过`window.onload=function(){...}`，结果的差异略小，但仍然不完美。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:11:01.127

[你可以在这里](https://developer.mozilla.org/en-US/docs/DOM/element.offsetHeight)阅读一些关于 offsetHeight 的信息。需要注意的重要一点是，如果内容大于可视区域，浏览器可能会使用非滚动元素做一些有趣的事情。因为这是一个手机浏览器，我猜问题是它计算错误的列高，因为它没有正确处理滚动元素。

你如何设置第一列的高度？如果它在样式表中设置了有效的高度，您可以轻松地执行以下操作：

```
colLeft.style.height = colRight.style.height; 
```

如果这不起作用，您可能需要根据浏览器窗口大小设置列高，例如：

```
 colLeft.style.height = colRight.style.height = (window.innerHeight - 10) + "px"; 
```

或类似的东西。

# python - Python 元组列表

> ID：14493495
> 
> 赞同：3
> 
> 时间：2013-01-24T03:34:09.120
> 
> 标签：python, tuples

我是 python 和一般编程的新手，需要一些帮助：我有一个列表，我在程序的前面通过从循环附加创建的（即我现在不能重新定义我的列表来解决我的问题） , 24 个 4 元组：

```
elementary = [(23, 1, 18, 4), (23, 1, 6, 16), (23, 1, 4, 18), (23, 2, 18, 3), (23, 2, 12, 9), (23, 2, 9, 12), (23, 2, 3, 18), (23, 3, 18, 2), (23, 3, 2, 18), (23, 4, 18, 1), (23, 4, 1, 18), (23, 5, 14, 7), (23, 5, 7, 14), (23, 6, 16, 1), (23, 6, 9, 8), (23, 6, 8, 9), (23, 6, 1, 16), (23, 7, 14, 5), (23, 7, 5, 14), (23, 8, 9, 6), (23, 8, 6, 9), (23, 9, 12, 2), (23, 9, 8, 6), (23, 9, 6, 8), (23, 9, 2, 12), (23, 12, 9, 2), (23, 12, 2, 9), (23, 14, 7, 5), (23, 14, 5, 7), (23, 16, 1, 6), (23, 18, 4, 1), (23, 18, 3, 2), (23, 18, 2, 3), (23, 18, 1, 4)] 
```

但现在想摆脱刚刚重新排列的元组......换句话说，在第一个元组 ( `(23,1,18,4)`) 之后我会摆脱`(23,1,4,18), (23,4,1,18)`，等等......，如果可能的话，我想在整个列表中执行此操作，这样我最终只会得到 6 个完全不同的 4 元组。有什么方法可以做到这一点，而无需返回并在我的程序早期做一些不同的事情？任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T03:46:43.973

怎么样：

```
{tuple(sorted(t)): t for t in elementary}.values() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T03:38:28.757

作为 1-liner，这对每个 4 元组进行排序，然后创建一组结果，具有删除重复项的效果。我假设您的 4 元组可以更改元素的顺序。

```
set(tuple(sorted(i)) for i in elementary)

>>> set((5, 7, 14, 23), (6, 8, 9, 23), (2, 3, 18, 23), (1, 4, 18, 23), (1, 6, 16, 23), (2, 9, 12, 23)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T03:44:21.830

如果您真的想通过比较感到沮丧和肮脏：

```
In [1028]: elementary = [(23, 1, 18, 4), (23, 1, 6, 16), (23, 1, 4, 18), (23, 2, 18, 3), (23, 2, 12, 9), (23, 2, 9, 12), (23, 2, 3, 18), (23, 3, 18, 2), (23, 3, 2, 18), (23, 4, 18, 1), (23, 4, 1, 18), (23, 5, 14, 7), (23, 5, 7, 14), (23, 6, 16, 1), (23, 6, 9, 8), (23, 6, 8, 9), (23, 6, 1, 16), (23, 7, 14, 5), (23, 7, 5, 14), (23, 8, 9, 6), (23, 8, 6, 9), (23, 9, 12, 2), (23, 9, 8, 6), (23, 9, 6, 8), (23, 9, 2, 12), (23, 12, 9, 2), (23, 12, 2, 9), (23, 14, 7, 5), (23, 14, 5, 7), (23, 16, 1, 6), (23, 18, 4, 1), (23, 18, 3, 2), (23, 18, 2, 3), (23, 18, 1, 4)]

In [1029]: for e in elementary:                                                                                                                                  
               add = True                                                                                                                                                   
               for a in answer:                                                                                                                                                 
                   if all(_e in a and e.count(_e)==a.count(_e) and len(e)==len(a) for _e in e):
                       add = False
               if add:
                   answer.append(e)    

In [1030]: answer
Out[1030]: 
[(23, 1, 18, 4),
 (23, 1, 6, 16),
 (23, 2, 18, 3),
 (23, 2, 12, 9),
 (23, 5, 14, 7),
 (23, 6, 9, 8)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T03:39:10.063

你真的只有24个吗？如果是这样，带有一些不必要的内存分配的慢速解决方案可能在这里工作正常，并节省您的编程时间：

```
elementary_unique = set(tuple(sorted(t)) for t in elementary) 
```

现在`elementary_unique`是一个集合而不是一个列表 - 如果它很重要，你可以使用

```
elementary_unique = list(set(tuple(sorted(t)) for t in elementary)) 
```

相反，但这会比第一个版本慢一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T03:39:52.443

您可以随时识别等价组合`sorted(tuple1) == sorted(tuple2)`。

代码简短而甜蜜：

```
>>> set(map(tuple, map(sorted, elementary)))
set([(5, 7, 14, 23), (6, 8, 9, 23), (2, 3, 18, 23), 
     (1, 4, 18, 23), (1, 6, 16, 23), (2, 9, 12, 23)]) 
```

如果您需要保留每个第一个不同元组的顺序，则需要更多的工作：

```
>>> uniq = set()
>>> for t in elementary:
    s = tuple(sorted(t))
    if s not in uniq:
        uniq.add(s)
        print t

(23, 1, 18, 4)
(23, 1, 6, 16)
(23, 2, 18, 3)
(23, 2, 12, 9)
(23, 5, 14, 7)
(23, 6, 9, 8) 
```

# javascript - 当页面响应如媒体查询时获取特定的 JS 文件

> ID：14493501
> 
> 赞同：0
> 
> 时间：2013-01-24T03:34:33.580
> 
> 标签：javascript, responsive-design, media-queries

我需要在页面响应时获取某些 JS 文件。

例如：如果页面 min-width 800px 得到这个

```
<script" src="800.js"></script> 
```

如果页面最小宽度 1920px 得到这个

```
<script" src="1920.js"></script> 
```

就像 css 媒体查询一样，只是为了获取 js 文件。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T06:46:58.700

看看 MatchMedia [https://github.com/paulirish/matchMedia.js](https://github.com/paulirish/matchMedia.js)应该正是你所需要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-16T13:35:44.533

这个问题的可能答案在***Stephen Chapman***编写的[Media specific JavaScript](http://javascript.about.com/od/guidesfunctionlibrary/a/Media-Specific-Javascript.htm)文章中进行了描述。

 ****Nicholas Zakas***`isMedia()`写了一段片段。可以在这里找到[isMedia()](https://gist.github.com/nzakas/08602e7d2ee448be834c)*

# asp.net-mvc - 使用 MVC Contrib 在多个局部视图中进行分页和排序

> ID：14493503
> 
> 赞同：1
> 
> 时间：2013-01-24T03:34:46.240
> 
> 标签：asp.net-mvc, sorting, paging, mvccontrib

我使用 asp mvc razor + mvc grid 创建了一个应用程序。我的问题是：我有一个视图，其中包含返回部分视图的多个操作，在每个部分视图中都有一个显示数据的网格。我正在使用支持分页和排序的 mvc contrib 网格。

我的观点（index.cshtml）：

```
<div class="row-fluid">
    <div id="formations" class="control-group">
    @Html.Action("Formations")
</div>

<div id="pools" class="control-group">
    @Html.Action("Pools")
</div>

<div id="zones" class="control-group">
    @Html.Action("Zones")
</div> 
```

编队行动：

```
 public ActionResult Formations(GridSortOptions sort, int? page, string filter = "all")
    {

        IPagination<StratUnitVo> pagination = ....        
        return PartialView("_Formations", pagination);
    } 
```

部分视图_Formations：

```
@Html.Grid(Model).Sort(ViewData["sort"] as GridSortOptions).Columns(col =>
  {
       col.For(p => Html.ActionLink(p.LongName, "EditFormation", "Stratigraphy", new { id = p.Id }, null).ToHtmlString()).Encode(false).Named(Locale.Name).SortColumnName("LongName");
       col.For(p => p.FormCode).Named(Locale.Code);
   col.For(p => p.ReferenceStratUnit.LongName).Named(Locale.ReferenceFormation);      
   }).Attributes(@class => "table table-condensed table-striped table-hover")

@if (Model.Count() > 0)
{
    @Html.Raw(@Html.Pager(Model)));
} 
```

其他动作和视图最像上面的示例（只是模型数据的差异）。我的问题是：

1.  当我单击一个网格中的导航分页（例如：编队）时，将导航到另一个网格（池和区域）。例如：单击编队网格中的第 2 页也会将另一个网格移动到第 2 页。
2.  当我单击一个网格中的列标题时（这意味着我要对数据进行排序），整个页面被部分视图替换。我想要的只是对我单击的网格进行排序。

我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T00:27:17.700

好吧，我刚刚解决了我的问题：

1.  对于分页：为每个名为“类型”的操作添加新参数并根据参数进行验证。

    ```
    public ActionResult Formations(GridSortOptions sort, int? page, string type, string filter = "all")
    {
        if (type != null && !type.Equals("Formation")) page = 1;            

        IPagination<StratUnitVo> pagination = ......
        return PartialView("_Formations", pagination);
    } 
    ```

2.  对于排序：对 mvc 网格使用 ajax 排序：

    ```
    $(function () {
        ajaxSort('pools', 'Stratigraphy', 'Pools');
        ajaxSort('formations', 'Stratigraphy', 'Formations');
        ajaxSort('zones', 'Stratigraphy', 'Zones');         
    });

    function ajaxSort(tableId, controllerName, actionName) {
    $(document).on('click', '#' + tableId + ' > table > thead > tr > th > a', (function () {
    // store the href attribute, will get the column and direction parameter
    var href = $(this).attr('href');

    // mvc grid sort url is : 'http\\controllerName\\actionName?Column=columnname&Direction=[Ascending|Descending]            
    var temp = href.split('&');

    // retrieve the column name
    var column = temp[0].split('=')[1];
    // retrieve sort direction
    var direction = temp[1].split('=')[1];
    // retrieve column header
    var columnHeader = $(this).text();

    // remove the href attribute, prevent postback
    $(this).removeAttr('href');

    // use ajax to sort
    $.ajax({
        url: '/' + controllerName + '/' + actionName,
        data: { 'Column': column, 'Direction': direction },
        dataType: 'html',
        success: function (data) {                
            $('#' + tableId).html(data);

            columnHeader = columnHeader.replace('\u25B2', '').replace('\u25BC', '');

            // show up down arrow
            // \u25B2 and \u+25BC is the unicode character for up/down triangle (arrow) to display in HTML                                
            var column = $('#' + tableId + ' > table > thead > tr > th > a:contains(' + columnHeader + ')');

            if(direction == 'Ascending')
                column.text(columnHeader + "\u25B2");
            else {                
                column.text(columnHeader + "\u25BC");
            }
        },
       });
      }));
    } 
    ```

# php - JSONException 错误：Rest php server-Android 客户端

> ID：14493504
> 
> 赞同：0
> 
> 时间：2013-01-24T03:34:55.637
> 
> 标签：php, android, json, rest, jsonexception

.Java 文件。这就是错误所在---> int success = json.getInt(TAG_SUCCESS);

```
 protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Products: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            **int success = json.getInt(TAG_SUCCESS);**

            if (success == 1) {
                // products found
                // Getting Array of Products
                products = json.getJSONArray(TAG_PRODUCTS);
                Log.d("level1: ", "@@@@@@@@@@@@@@@@@@@@@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$");

                // looping through All Products
                for (int i = 0; i < products.length(); i++) {
                    JSONObject c = products.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_PID);
                    String name = c.getString(TAG_NAME);
                    Log.d("level2: ", "lksdjflsdjf0wrewrwje************************");
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_PID, id);
                    map.put(TAG_NAME, name);

                    // adding HashList to ArrayList
                    productsList.add(map);
                }
            } else {
                // no products found
                // Launch Add New product Activity
                Log.d("level3: ", "jldksffffffffffffffffffffffffffffffffffffff");
                Intent i = new Intent(getApplicationContext(),
                        NewProductActivity.class);
                // Closing all previous activities
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    } 
```

来自服务器的 Json 数组如下。我已经从 jsonlint.com 验证了它

```
 {
"tbl_user": {
    "0": {
        "id": "195",
        "email": "aru@yahoo.com",
        "password": "202cb962ac59075b964b07152d234b70",
        "fname": "aru",
        "lname": "sharma"
    },
    "1": {
        "id": "196",
        "email": "manu@yahoo.com",
        "password": "202cb962ac59075b964b07152d234b70",
        "fname": "manu",
        "lname": "sharma"
    },
    "2": {
        "id": "197",
        "email": "rishi@yahoo.com",
        "password": "202cb962ac59075b964b07152d234b70",
        "fname": "rishi",
        "lname": "sharma"
    },
    "success": 1
} 
```

}

我想我无法从这里读取成功值。我无法在此 Json 字符串中看到错误。请帮忙。

在服务器上创建 json 的 Rest Php 代码是

```
 function getUsers() {
$sql = "select * FROM tbl_user ORDER BY fname";
try {
    $db = getConnection();
    $stmt = $db->query($sql);  
    $users = $stmt->fetchAll(PDO::FETCH_OBJ);
    $users["success"] = 1;
    $db = null;
    echo '{"tbl_user": ' . json_encode($users) . '}';

} catch(PDOException $e) {
    echo '{"error":{"text":'. $e->getMessage() .'}}'; 
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:01:43.390

像这样尝试，我们必须先获取 JSON 对象，然后再获取内部值。

```
JSONObject json = new JSONObject(result);
int success =   json.getInt(TAG_SUCCESS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:42:32.847

试试这个：

PHP：

```
try {
$db = getConnection();
$stmt = $db->query($sql);  
$users["tbl_user"] = $stmt->fetchAll(PDO::FETCH_OBJ);
$users["success"] = 1;
$db = null;
echo json_encode($users) 

} catch(PDOException $e) {
echo '{"error":{"text":'. $e->getMessage() .'}}'; 
} 
```

在java文件中：

```
JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);
int success = json.getInt(TAG_SUCCESS); 
```

# dojo - dojo 1.8：将带有dojo的html文件加载到内容窗格中

> ID：14493506
> 
> 赞同：0
> 
> 时间：2013-01-24T03:35:10.487
> 
> 标签：dojo

嗨，知道如何将带有 dojo 的 html 文件动态加载到内容窗格中吗？

我可以使用 href 将非 dojo html 加载到内容窗格中。

当我加载带有dojo 的html 文件时，我可以看到html 标记中的文本，但看不到dojo 脚本中的文本。我哪里做错了？

我放在这里的脚本是：-

```
widget.set('href','dojotext.html') 
```

jsfiddle 中的另一个问题是按下按钮 1 不会更新，这与我的环境不同。

有趣的是，与我的环境不同，不显示边框容器和内容窗格。

这是我在 jsfiddle 中的链接 -[用于测试加载的主页](http://jsfiddle.net/clementyap/WCRsK/14/) -[要加载的 dojo 内容](http://jsfiddle.net/clementyap/SCtBu/1/)

请指教。谢谢克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:54:55.480

首先，您的*ContentPanes*和*BorderContainer*没有被显示，因为您没有解析它们。

在您的代码中，您可以手动运行解析器：

```
ready(function () {
    parser.parse();
    // ...
}); 
```

关于您的第一个问题，您似乎没有阅读文档：

```
<div id="foo" data-dojo-type="dijit/layout/ContentPane" href="/some/page.html">
  <script type="dojo/method">
    alert ('Hello World!');
  </script>
</div> 
```

代码来自：[ContentPane 文档](https://dojotoolkit.org/reference-guide/1.8/dijit/layout/ContentPane.html#executing-javascript-inside-contentpane)

# lotus-notes - 刷新 Lotus Notes 文件夹

> ID：14493509
> 
> 赞同：1
> 
> 时间：2013-01-24T03:35:34.680
> 
> 标签：lotus-notes, lotus-domino, lotusscript

我目前正在研究一个 Lotusscript，它在 $Inbox 上放置一个操作菜单（以及从该设计派生的任何文件夹）。此操作菜单有几个项目，其中选择了“如果公式为真则隐藏操作”。所有这些背后的逻辑都很完美，但是我现在需要重新评估这些公式，如果用户在文件夹中执行某些操作（例如：如果由于设置了某个标志而隐藏了该动作，并且该标志是改变了，然后我想重新评估公式，以便现在出现动作）。我似乎找不到任何方法来重新加载文件夹或重新评估这些公式。有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:32:30.173

NotesUIDocument 有一个 RefreshHideFormulas 方法，但视图没有。不过，您*也许*可以调用 NotesUIWorkspace 的 ReloadWindow() 方法，因此值得一试。

作为替代方案，触发调用 @Command RefreshHideFormulas 的代理也可能对您有用：

这是一些代码（借自[http://ideajam.net/ideajam/p/ij.nsf/0/3BBA7E25A972ABD88625759600445A50?OpenDocument](http://ideajam.net/ideajam/p/ij.nsf/0/3BBA7E25A972ABD88625759600445A50?OpenDocument)）

1）使用以下代码创建一个名为“RefreshActions”的@Formula Agent，Agent List Trigger：

```
@SetTargetFrame("YourFrame");
@UpdateFormulaContext;
@Command([RefreshHideFormulas]); 
```

2）在您想要插入“刷新框架”调用的 Lotusscript 中，添加以下内容：

```
Dim agent As NotesAgent 
Set agent = db.Getagent("RefreshActions")
Call agent.Run() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:59:48.897

您可以使用在视图属性 [i] 选项卡中找到的属性“评估每个文档更改的操作”。文档的每次选择（单击、箭头）都会触发重新评估隐藏操作的时间。也许它会在通过一些动作刷新视图后起作用。

# jquery - jQuery - 为什么上下滑动有震动而不是平滑？

> ID：14493516
> 
> 赞同：2
> 
> 时间：2013-01-24T03:36:04.960
> 
> 标签：jquery, css, slide, nav

我有这个代码：

```
 $(document).ready(function () {
     $(this).hoverAccordionMenu(); //build left menu accordion effects  

     /*ie6 hack for mouse over icons on 2nd level. Not part of the plugin. optional!*/
     if ($.browser.msie && $.browser.version.substr(0, 1) < 7) {
         //rollover arrow which doesn't work with simple css
         $('ul.menu > li > ul > li').bind("mouseenter", function (e) {
             $(this).css("background", "url(ico-arrow-level2.gif) no-repeat");
         });
         $('ul.menu > li > ul > li').bind("mouseleave", function (e) {
             $(this).not(".active").css("background", "none");
         });
     }

 }); 
```

我已经放入了一个 jsfiddle 来向您展示：

[http://jsfiddle.net/haNGY/](http://jsfiddle.net/haNGY/)

谁能告诉我为什么上下滑动有震动而不是平滑？

提前致谢！

（PS，抱歉，刚刚想起了标题，但是这里已经快凌晨 4 点了，所以我的大脑有点慢！刚去编辑它，但它已经修复了，谢谢！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:47:10.393

要修复跳跃，只需执行以下操作：

```
#menu ul li ul {
    width:235px;
    /* display: inline-block ;*/ /* REMOVE */
} 
```

现在只是一些有用的东西

```
#menu li {
    margin: 0;
    /*margin-left:0; */ /* believe me you don't need this */
} 
```

```
#menu li li {
    padding-top:2px;
    padding-left:9px;
    /*margin:0;*/ /* why if you already use margin 0 for LI*/
} 
```

这里也是凌晨 4 点 49 分，所以明天好好看看 CSS 吧……；）

是的，另外我避免为 LI 元素设置样式。这不好，而且并不总是与 Xbrowser 兼容。最好使用 LI 元素（如虚拟容器）来保持最小的样式。使用`a`内部元素来实现所需的样式。

# sqlite - SQLite 数据库文件

> ID：14493517
> 
> 赞同：0
> 
> 时间：2013-01-24T03:36:06.417
> 
> 标签：sqlite

我想知道为什么 SQLite 在路径中创建两个文件。这些文件的区别是什么。

我有一个数据库名称`mydatabase`。

当我在给定路径中看到有两个文件时。

```
data/data/pack name/databases/.... 
```

1-`mydatabase`

2-`mydatabase-journal`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:51:46.450

`mydatabase`是主数据库文件，其中包含有关该数据库的所有内容。

`mydatabase-journal`是日志文件。默认情况下它不存在，并且仅在必要时由 SQLite 创建，以保留 SQLite 想要对数据库执行的操作的意图日志。基本上，这是在事务正确完成后应该对主数据库文件执行的操作的意图。如果您正常完成所有事务并优雅地断开与数据库的连接，`-journal`文件将正常自动删除。

如果断开连接是突然的——比如进程被杀死或崩溃，`-journal`文件将保留并且不应该被删除。当 SQLite 下次再次打开该数据库时，它会注意到`-journal`文件的存在，并会重播或回滚未完成的事务，从而使主数据库文件保持一致且不损坏。

如果您`-journal`手动删除文件，则无法保证恢复并且数据库可能完全损坏 - 因此，请勿删除`-journal`文件。

正确删除`-journal`文件的最简单方法可能是执行以下命令：

```
sqlite3 mysqlitedatabase.db VACUUM 
```

它将 VACUUM（优化）您的数据库，结果应该只留下主文件。

# linux - linux升级后使用gcc的Netbeans无法找到标准头文件

> ID：14493525
> 
> 赞同：0
> 
> 时间：2013-01-24T03:36:39.173
> 
> 标签：linux, file, netbeans, header, upgrade

我正在使用带有 Core 2 Duo 处理器的 IBM ThinkPad Edge 64 位上使用 Netbeans 7.1.2 开发 C 应用程序。我刚刚从 Linux Mint 9 升级到 Linux Mint 14，现在 Netbeans 找不到构建我的项目所需的许多标准头文件。在 Linux 升级之前，一切都运行良好。我尝试查看 Netbeans 用于搜索两个版本的 Netbeans 的标准头文件的路径，它们是相同的。这些头文件的位置是否可能因发行版而异，或者它们的位置是 GNU 标准（或者可能是 Linux 标准）的一部分？我想如果没有找到其他解决方案，我可以简单地恢复到旧操作系统，但我试图避免这种情况。如何判断我的 Linux 发行版是否存在与其 GNU 头文件位置有关的问题？我' 我尝试在我的整个文件系统中搜索第一个找不到的头文件。我找到了它，将它复制到 Netbeans 头文件路径中的一个目录中，但它只是抱怨找不到另一个目录，并且不知何故这种方法感觉不对。因此，我尝试将找到第一个未找到的头文件的目录添加到 Netbeans 的头文件路径中，这再次导致它抱怨其他未找到的头文件。这里一定有别的东西。我感谢任何人可以提供的任何有用的信息。我试图将找到第一个未找到的头文件的目录添加到 Netbeans 的头文件路径中，这再次导致它抱怨其他未找到的头文件。这里一定有别的东西。我感谢任何人可以提供的任何有用的信息。我试图将找到第一个未找到的头文件的目录添加到 Netbeans 的头文件路径中，这再次导致它抱怨其他未找到的头文件。这里一定有别的东西。我感谢任何人可以提供的任何有用的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:00:57.077

mint 14 在 usr/include/i386-linux-gnu/sys/ 文件夹中包含所有标准头文件，而不是 usr/include/sys 文件夹，因为我相信该设置是在以前的版本中。将netbeans指向正确的位置，你应该没问题。

# c# - 创建 ppt 幻灯片缩略图而不导出到文件

> ID：14493526
> 
> 赞同：0
> 
> 时间：2013-01-24T03:36:47.767
> 
> 标签：c#, add-in, powerpoint

我正在开发一个 ppt 以在 powerpoint 窗口上以侧面板的形式添加我需要的是自定义幻灯片缩略图，到目前为止我所做的我使用 Export() 方法将所有幻灯片转换为临时图像并显示它们。但这种方法太慢了，因为我需要从磁盘保存/加载，我的要求是以交互方式显示它们（需要足够快）

我想知道是否有办法在内存中导出幻灯片缩略图...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:59:48.040

一种可能的方法：

```
ActivePresentation.Slides(x).Copy 
```

这会将幻灯片以多种格式放在 Windows 剪贴板上，包括位图、PNG、JPG 等。

如果您有办法将剪贴板中的图像加载到您正在做的任何事情中，那么您就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:52:47.290

感谢史蒂夫使用剪贴板的想法，

**编辑** 它可以工作但仍然很慢，当我生成 70 张幻灯片时需要 4-5 秒，看来 Copy() 方法很慢，所以开销不在剪贴板的位图图像中......

这就是我所做的

```
slide.Copy();
if (Clipboard.GetDataObject().GetDataPresent(DataFormats.Bitmap))
{
    ImageSource imgSource = BinaryStructConverter.ImageFromClipboardDib();
} 
```

对于 BinaryStructConverter 我从这里得到了一个很好的代码： [http](http://www.thomaslevesque.com/2009/02/05/wpf-paste-an-image-from-the-clipboard/) ://www.thomaslevesque.com/2009/02/05/wpf-paste-an-image-from-the-clipboard/ （我们需要以某种方式转换它，因为如果你直接从剪贴板复制就行了，位图图片格式很可能乱码）

```
[StructLayout(LayoutKind.Sequential, Pack = 2)]
public struct BITMAPFILEHEADER
{
    public static readonly short BM = 0x4d42; // BM

    public short bfType;
    public int bfSize;
    public short bfReserved1;
    public short bfReserved2;
    public int bfOffBits;
}

[StructLayout(LayoutKind.Sequential)]
public struct BITMAPINFOHEADER
{
    public int biSize;
    public int biWidth;
    public int biHeight;
    public short biPlanes;
    public short biBitCount;
    public int biCompression;
    public int biSizeImage;
    public int biXPelsPerMeter;
    public int biYPelsPerMeter;
    public int biClrUsed;
    public int biClrImportant;
}

public static class BinaryStructConverter
{
    public static ImageSource ImageFromClipboardDib()
    {
        MemoryStream ms = Clipboard.GetData("DeviceIndependentBitmap") as MemoryStream;
        if (ms != null)
        {
            byte[] dibBuffer = new byte[ms.Length];
            ms.Read(dibBuffer, 0, dibBuffer.Length);

            BITMAPINFOHEADER infoHeader =
                BinaryStructConverter.FromByteArray<BITMAPINFOHEADER>(dibBuffer);

            int fileHeaderSize = Marshal.SizeOf(typeof(BITMAPFILEHEADER));
            int infoHeaderSize = infoHeader.biSize;
            int fileSize = fileHeaderSize + infoHeader.biSize + infoHeader.biSizeImage;

            BITMAPFILEHEADER fileHeader = new BITMAPFILEHEADER();
            fileHeader.bfType = BITMAPFILEHEADER.BM;
            fileHeader.bfSize = fileSize;
            fileHeader.bfReserved1 = 0;
            fileHeader.bfReserved2 = 0;
            fileHeader.bfOffBits = fileHeaderSize + infoHeaderSize + infoHeader.biClrUsed * 4;

            byte[] fileHeaderBytes =
                BinaryStructConverter.ToByteArray<BITMAPFILEHEADER>(fileHeader);

            MemoryStream msBitmap = new MemoryStream();
            msBitmap.Write(fileHeaderBytes, 0, fileHeaderSize);
            msBitmap.Write(dibBuffer, 0, dibBuffer.Length);
            msBitmap.Seek(0, SeekOrigin.Begin);

            return BitmapFrame.Create(msBitmap);
        }
        return null;
    }

    public static T FromByteArray<T>(byte[] bytes) where T : struct
    {
        IntPtr ptr = IntPtr.Zero;
        try
        {
            int size = Marshal.SizeOf(typeof(T));
            ptr = Marshal.AllocHGlobal(size);
            Marshal.Copy(bytes, 0, ptr, size);
            object obj = Marshal.PtrToStructure(ptr, typeof(T));
            return (T)obj;
        }
        finally
        {
            if (ptr != IntPtr.Zero)
                Marshal.FreeHGlobal(ptr);
        }
    }

    public static byte[] ToByteArray<T>(T obj) where T : struct
    {
        IntPtr ptr = IntPtr.Zero;
        try
        {
            int size = Marshal.SizeOf(typeof(T));
            ptr = Marshal.AllocHGlobal(size);
            Marshal.StructureToPtr(obj, ptr, true);
            byte[] bytes = new byte[size];
            Marshal.Copy(ptr, bytes, 0, size);
            return bytes;
        }
        finally
        {
            if (ptr != IntPtr.Zero)
                Marshal.FreeHGlobal(ptr);
        }
    }
} 
```

# php - PHP、MoDX：从自定义 PHP Snippet 上传文件

> ID：14493527
> 
> 赞同：0
> 
> 时间：2013-01-24T03:37:06.647
> 
> 标签：php, file-upload, upload, transfer, modx

我有一个片段，我想用它来上传文件。

该脚本似乎运行良好，直到 PHP 将文件从临时文档传输到我自己的文件夹。

我的文件夹被称为“上传”并且是根目录。

在 ModX 上，PHP 文件目录是

`/core/cache/includes/elements/modsnippet`

我似乎无法找到一种方法来指导脚本将文件从 modsnippet 目录发送回 public_html/uploads 目录。

到目前为止，我已经尝试过：

`move_uploaded_file($_FILES['instlogo']['tmp_name'], dirname(__FILE__) . "/../../../../uploads".$new_file_name)`

`;`

以及绝对路径，例如：

`http://mysite.com/uploads`

无济于事。

有人知道正确执行此操作的方法吗？谢谢！

（ps：该文件夹的权限为777）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:12:05.480

你可以试试这样的东西：

```
$my_uploads = $modx->getOption('base_path').'uploads/';

move_uploaded_file($_FILES['instlogo']['tmp_name'], $my_uploads.$new_file_name) 
```

base_path 选项将为您提供完整的文件系统路径 [来自服务器根目录]

如果不是并且您遇到文件系统错误，服务器日志 [aapche] 应该会告诉您原因。您可以访问它们吗？

# python - numpy：数组除法的简洁条件语法

> ID：14493531
> 
> 赞同：1
> 
> 时间：2013-01-24T03:38:13.453
> 
> 标签：python, syntax, numpy

假设一个简单的一维 numpy 数组：

```
>>> x = np.array([1,3,5,0,3,2]) 
```

现在假设我要执行操作`1.0/x`。我可以用 numpy 做到这一点：

```
>>> 1.0/x
array([ 1\.        ,  0.33333333,  0.2       ,         inf,  0.33333333,
    0.5       ]) 
```

这里的问题是原始元素值 0 的无穷大 ( `inf`) 结果，因为`1.0/0`似乎返回无穷大来代替未定义的行为。

我想提供我自己的自定义值，而不是无穷大，在这些除以 0 的情况下出现。虽然我知道这可以使用循环来完成，但我想知道这种操作是否有任何惯用语法。

[这里](https://stackoverflow.com/questions/3409255/how-do-i-do-conditional-array-arithmetic-on-a-numpy-array)有一个相关的问题，但它只处理*if something: (do this) else: (do nothing)*场景，而我的问题是*if something: (do this) else: (do that)*场景。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T03:40:56.607

您以后可以随时对其进行修补：

```
a = 1.0/x
inf_ind = np.isinf(a)
a[inf_ind] = your_value 
```

或者

```
a[inf_ind] = f(x[inf_ind]) 
```

其优点是不会妨碍漂亮的优化 numpy 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T03:57:57.193

基于上一个答案，您还可以设置浮点回调模式以检测何时需要应用 inf 转换。

但是，我找不到在每个浮点错误上调用的回调。

另见： [http ://docs.scipy.org/doc/numpy/reference/generated/numpy.seterr.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.seterr.html)

```
import numpy
class IsDivideError(object):
    def __init__(self):
        self.hasDivideError=False

    def callback(self, x,y):
        self.hasDivideError=True

ide=IsDivideError()
numpy.seterr(divide='call')
numpy.seterrcall(lambda x,y: ide.callback(x,y) )
x = numpy.array([1,3,5,0,3,2])
val=1.0/x
if(ide.hasDivideError):
    val[numpy.isinf(val)]=5 
```

# html - 带有锚链接、twitter bootstrap 固定导航栏和附加插件的非常奇怪的“重绘行为”

> ID：14493533
> 
> 赞同：9
> 
> 时间：2013-01-24T03:38:24.870
> 
> 标签：html, css, twitter-bootstrap

一起使用 Twitter Bootstrap 的词缀插件、固定导航栏和锚链接时，我遇到了一种非常奇怪的行为。我将尝试解释我的问题，但很难用语言表达，所以如果我不是最清楚的，请原谅我。

我`navbar-fixed-top`的页面顶部有一个。在此之下，我有一个`.container`div。里面有两个`div.spans`（`span4`和`span8`）。Inside`span4`是一个应用`div.well`了`affix-top`类的类（所以它得到一个固定的位置并“粘”在它所在的位置）。在我的里面我`span8`有一堆内容。

在`well`div 里面有一个`nav-list`. 这个列表根据中的项目填充了`li`/`a`元素`span8`（我有一个小脚本可以做到这一点）。链接是锚点，因此它们指向页面上的元素（`#myId`、`#myIdTwo`等）。所有这些都非常有效。我的列表在那里，链接是可点击的，它们将我带到我的元素。伟大的。

然而，不是很好。有时，当我单击其中一个链接时，我会转到我的锚点，`span8`但页面似乎没有正确刷新。我有时会看到奇怪的白色“盒子”。或者跨度内的内容将部分显示在固定的上方`nav-header`。有时一半`nav-list`消失了..但是如果我在它周围移动鼠标，它就会回来（有点）。就像您过去在一些陷入困境的旧 Windows 应用程序中看到的那样。

您可以在这里亲自查看：http: [//jaylach.github.com/lutra](http://jaylach.github.com/lutra)。在看到问题之前，您可能需要多次单击某些导航链接。

我整天都在为此苦苦挣扎，而我一生都无法弄清楚。我已经取出了词缀，我已经取出了固定顶部导航栏，我已经取出了我的`z-index`. 我似乎无法弄清楚。

任何地方的任何人都知道可能导致这种情况的原因吗？我真的很感激你们能给我的任何建议。

提前谢谢了！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T06:17:05.323

这是一个 WebKit 错误。

添加 `-webkit-transform: scale3d(1,1,1);`到两者`.navbar-fixed-top`和`.affix`

两种样式都在**bootstrap.min.css**中定义。**因此，将main.css**中的这两种样式覆盖为：

```
.affix,.navbar-fixed-top {
-webkit-transform: scale3d(1,1,1);
} 
```

# javascript - 通过 ajax 保存已更新内容的网页

> ID：14493538
> 
> 赞同：0
> 
> 时间：2013-01-24T03:38:46.577
> 
> 标签：javascript, ajax, save, basecamp

有没有办法保存已通过 ajax 请求更新其内容的网页？我需要保存 basecamp 消息线程但无法导出，因为我不是帐户所有者。正如预期的那样，原始来源只会保存原始内容，如果我尝试使用以下 javascript 命令：

```
javascript:'<xmp>' + window.document.body.outerHTML+ '</xmp>' 
```

只显示身体。我需要的不仅仅是正文内容，因为标题包含 CSS 文件以便于阅读。

有谁知道该怎么做？

赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:46:56.410

你可以使用：

```
document.documentElement.innerHTML 
```

获取`<html>`元素的内部 HTML

[https://developer.mozilla.org/en-US/docs/DOM/document.documentElement](https://developer.mozilla.org/en-US/docs/DOM/document.documentElement)

# django - 使用 django 模板中的一个元素将对象强制转换为列表

> ID：14493539
> 
> 赞同：0
> 
> 时间：2013-01-24T03:38:50.443
> 
> 标签：django, django-templates

首先，我知道这是不好的做法，但我被限制只能访问 Django 项目的模板层，所以就这样吧。

所以说我有list1和list2，它们都包含故事对象。我也有 features_story 这是一个单一的故事对象。在我的模板中，我可以执行以下操作。

```
{% with list1|add:list2 as my_list %}
# my_list is now all elements from list1 and list2
{% with my_list|add:featured_story as final_list %}
# my_list has not changed
{% endwith %}
{% endwith %} 
```

有没有办法将 features_story 强制加入列表？

再说一次，我知道我不应该这样做，并且鉴于有能力在视图层中处理这个问题，但我使用的是 Ellington 平台，并且无法访问适当的代码来添加它。或者，我也没有能力创建一个自定义标签或过滤器来促进这一点。

# c# - 比较 'int' 和 'null' 编译

> ID：14493540
> 
> 赞同：8
> 
> 时间：2013-01-24T03:38:52.610
> 
> 标签：c#

> **可能重复：**
> [C# 可以将值类型与 null 进行比较](https://stackoverflow.com/questions/1972262/c-sharp-okay-with-comparing-value-types-to-null)

我刚刚在 C# (4.0) 编译器中发现了一个奇怪的东西。

```
int x = 0;
if (x == null) // Only gives a warning - 'expression is always false'
    x = 1;

int y = (int)null; // Compile error
int z = (int)(int?)null; // Compiles, but runtime error 'Nullable object must have a value.' 
```

如果你不能分配`null`给一个`int`，为什么编译器允许你比较它们（它只给出一个警告）？

有趣的是，编译器不允许以下内容：

```
struct myStruct
{
};

myStruct s = new myStruct();
if (s == null) // does NOT compile
    ; 
```

为什么`struct`示例无法编译，但`int`示例可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T03:52:47.657

进行比较时，编译器会尝试进行比较，以便比较的两个操作数尽可能具有兼容的类型。

它有一个`int`值和一个常`null`量值（没有特定类型）。两个值之间唯一兼容的类型是`int?`它们被强制转换为`int?`并进行比较`int? == int?`。作为 an 的某些`int`值`int?`绝对是非空的，并且`null`绝对是空的。编译器意识到，并且由于非空值不等于确定`null`值，因此会给出警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:58:59.790

实际上编译允许比较'int？to 'int' not 'int' to null 有意义

例如

```
 int? nullableData = 5;
        int data = 10;
        data = (int)nullableData;// this make sense
        nullableData = data;// this make sense

        // you can assign null to int 
        nullableData = null;
        // same as above statment.
        nullableData = (int?)null;

        data = (int)(int?)null;
        // actually you are converting from 'int?' to 'int' 
        // which can be detected only at runtime if allowed or not 
```

这就是你想要做的`int z = (int)(int?)null;`

# regex - 字符串首字母匹配正则表达式

> ID：14493543
> 
> 赞同：0
> 
> 时间：2013-01-24T03:39:16.950
> 
> 标签：regex

正则表达式是否可以匹配字符串中单词的首字母？例子：

我想匹配，比如说，国际拼字游戏协会，但它可以是 ISA, Intl。Scrabble Assoc. 等。理想情况下，它们都将匹配 ISA。

可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:17:19.253

如果你问是否有办法在本地并且只能在正则表达式中做到这一点，那么不，没有办法做到这一点。您必须拆分字符串并提取首字母（可能使用正则表达式），然后从中构造一个新的正则表达式。因此，解决方案当然取决于您的实现，但这里有一个 PHP 示例：

```
<?php
    $str = "International Scrabble Assocation";
    preg_match_all('/\b(\w)\w*\b/i', $str, $matches);
    $regex = '/\b' . implode('\S*\s*', array_map(strtoupper, $matches[1])) . '\S*\b/';
    $tests = array('Intl. Scrabble Assoc.',
                   'Intl Scrabble Assoc',
                   'I.S.A',
                   'ISA',
                   'Intl. SA', 
                   'intl scrabble assoc',
                   'i.s.a.',
                   'isa',
                   'lisa',
                   'LISA',
                   'LI. S. A.');
    echo "The generated regex is $regex.\n\n";
    foreach ($tests as $test)
    {
        echo "Does '$test' match? " . (preg_match($regex, $test) ? 'Yes' : 'No') . ".\n";
    }
?> 
```

输出：

```
The generated regex is /\bI\S*\s*S\S*\s*A\S*\b/.
Does 'Intl. Scrabble Assoc.' match? Yes.
Does 'Intl Scrabble Assoc' match? Yes.
Does 'I.S.A' match? Yes.
Does 'ISA' match? Yes.
Does 'Intl. SA' match? Yes.
Does 'intl scrabble assoc' match? No.
Does 'i.s.a.' match? No.
Does 'isa' match? No.
Does 'lisa' match? No.
Does 'LISA' match? No.
Does 'LI. S. A.' match? No. 
```

如果你想玩它，[这里是ideone 。](http://ideone.com/5anfU2)

# java - Java RMI 对服务进行编程

> ID：14493544
> 
> 赞同：0
> 
> 时间：2013-01-24T03:39:22.010
> 
> 标签：java, rmi

我是java rmi的新手。我想创建一个 rmi 程序作为服务。例如，我有一个远程接口：

```
public interface Handler implements Remote {
    public void insert (String str) throws RemoteException, NotBoundException;
}

public class HandlerImpl extends UnicastRemoteObject implements Handler {
    public HandlerImpl (int port) {
        super(port);
    }

    public void insert (String str) throws RemoteException, NotBoundException {
        // insert string to a file
    }
} 
```

而且我还有一个类来注册它：

```
class Server {
    public Server () {
        Registry svcReg = LocateRegistry.createRegistry(999);
        Handler handler = new HandlerImpl (1000);
        svcReg.rebind("insert", handler);
    }
} 
```

现在如果用

```
Server server = new Server(); 
```

当程序终止时，服务就消失了。什么是使服务器像它在后台运行的服务并且仍然可以调用“远程方法”的正确方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:47:23.477

您可以使用[Apache Commons Daemon](http://commons.apache.org/daemon/index.html)来完成此操作。

# jquery - 我可以通过 jQuery 设置 HTML 元素的高度吗？

> ID：14493549
> 
> 赞同：1
> 
> 时间：2013-01-24T03:39:57.833
> 
> 标签：jquery, css, html, internet-explorer-6

我在样板（和 HTML5Shiv）项目上遇到了 IE6 兼容性问题。我一直在尝试将`<html>`元素设置为与元素相同的高度，`<body>`但无论出于何种原因，它都固定为 100%，没有任何特定代码。每页的长度都是动态的，所以我无法设置特定的值。

我想这样做是因为一个主要原因——即使下面有其他内容，IE6 也不显示滚动条。

我试图通过以下代码设置高度，但没有任何运气：

```
$("html").css("height", parseInt($("body").height()) + "px"); 
```

我还尝试了以下代码，只有`<body>`元素响应：

```
$("html, body").css("height", "2000px"); 
```

但是，我已经能够通过创可贴修复添加滚动：

```
html, body {
    overflow-y: scroll;
} 
```

现在回到高度问题，这甚至可以通过`jQuery`吗？IE6 根本不支持我所追求的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:38:03.470

我很惊讶还没有人提到这一点。

**忘记尝试调整`<html>`元素的大小。**

该`html`元素并不意味着要调整大小。我也不会费心尝试做一个更小`body`的。如果您需要某个尺寸的元素，`div`请在您的内部粘贴一个`body`并设置样式。

[标签](http://www.w3.org/TR/1999/REC-html401-19991224/struct/global.html#h-7.3)的[HTML4 规范`html`](http://www.w3.org/TR/1999/REC-html401-19991224/struct/global.html#h-7.3)并未将`style`其列为属性，原因很容易理解。

即使在像 Chrome 这样的现代浏览器中，尝试调整`html`元素的大小也会产生一些奇怪的结果：http: [//jsfiddle.net/QdCmM/](http://jsfiddle.net/QdCmM/)。

# ios - 在 ViewController 中嵌入 UIScrollView 并且没有分页

> ID：14493553
> 
> 赞同：0
> 
> 时间：2013-01-24T03:40:22.437
> 
> 标签：ios, uiscrollview

我正在尝试在 UIViewController 中嵌入 UIScrollView。我想要启用滚动和分页。我有：

```
CGRect thirdRect=CGRectMake(0.0f, 50.0f, 200.0f, 200.0f);
self.myVC=[[UIScrollView alloc] initWithFrame:thirdRect];
self.myVC.pagingEnabled=YES;
self.myVC.scrollEnabled=YES;
//[self.myVC setBackgroundColor:[UIColor orangeColor]];

UIImage *myImage=[UIImage imageNamed:@"stina.jpg"];
UIImageView *jtImageView=[[UIImageView alloc] initWithImage:myImage];
[self.myVC addSubview:jtImageView];
[self.view addSubview:self.myVC]; 
```

这是一个截图（没有分页，滚动）：

![在此处输入图像描述](../Images/f138e3cd0196c75dc74c4afd85890885.png)

但没有滚动/分页。有什么我做错了吗？这甚至可能吗？

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:41:39.713

对于您的 UIScrollView，您应该设置内容大小，然后滚动将开始发生

```
self.myVC.contentSize = CGSizeMake(1000,1000); 
```

试试看

# html - 嵌套的 DIV 和 z-index

> ID：14493564
> 
> 赞同：3
> 
> 时间：2013-01-24T03:41:43.123
> 
> 标签：html, css

我正在尝试通过在 div 上使用 z-index 创建这种类型的重叠：

![嵌套的 DIV 和 z-index](../Images/a59c263a1edcba18e6a59c75410d31b9.png)

但是，如果我将父元素的 z-index 设置为小于“非子”元素的 z-index 的数字，则子元素也会与它的父元素一起留在后面。我想知道是否有任何方法可以克服这个问题..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T04:11:29.463

你想做这样的事情吗？

[http://codepen.io/mudittuli/full/rEgkw](http://codepen.io/mudittuli/full/rEgkw)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:59:21.907

没有看到你的代码很难判断，但我相信你使用一些 DIV 作为祖先；尝试单独使用它们。该示例可以满足您的要求：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Positioning test</title>
        <style>
            div { position: absolute; width: 100px; height: 100px; color: #fff; text-align: center; }

            #parent { z-index: 1; background-color: red; left: 100px; top: 20px; }
            #not-child { z-index: 2; background-color: green; left: 140px; top: 40px; }
            #child { z-index: 3; background-color: blue;  left: 70px; top: 60px; }
        </style>
    </head>
    <body>
        <div id="parent">Parent</div>
        <div id="not-child">Not-child</div>
        <div id="child">Child</div>
    </body>
</html> 
```

# ios - cordova :: XMLHttpRequest :: setRequestHeader 不适用于 JSONP

> ID：14493566
> 
> 赞同：2
> 
> 时间：2013-01-24T03:42:02.623
> 
> 标签：ios, google-chrome, cordova, cordova-2.0.0, ripple

在 hello world cordova 2.3.0 应用程序中尝试使用波纹

添加了基本的 BackboneJS 代码，我得到上面显示的错误

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript" src="http://static.stackmob.com/js/json2-min.js"></script>
    <script type="text/javascript" src="http://static.stackmob.com/js/underscore-1.4.3-min.js"></script>
    <script type="text/javascript" src="http://static.stackmob.com/js/backbone-0.9.10-min.js"></script> 
```

我已经用正确的标志启动了谷歌`--allow-file-access-from-files`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-18T15:50:09.800

您可能还需要在 Ripple 设置中禁用“跨域代理”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:39:15.097

将“JSONP”更改为“JSON”并使用以下两个选项启动 chrome：

```
chrome.exe --disable-web-security --allow-file-access-from-files 
```

# html - 拖动时的 KineticJS 图层索引

> ID：14493567
> 
> 赞同：4
> 
> 时间：2013-01-24T03:42:11.840
> 
> 标签：html, html5-canvas, kineticjs

所以我的问题似乎是一个可拖动的对象总是被绘制在其他对象上。

看看我的[**小提琴**](http://jsfiddle.net/andrewgable/nYHrg/)。

和我的**代码**：

```
 <!DOCTYPE HTML>
<html>
    <head>
        <style>
            body {
                margin: 0px;
                padding: 0px;
            }
            canvas {
                border: 1px solid #9C9898;
            }
        </style>
        <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.1-beta.js"></script>
        <script>
         window.onload = function() {

            var stage = new Kinetic.Stage({
            container: 'container',
            width: 578,
            height: 200
            });

            var cableLayer = new Kinetic.Layer();

// build cable
var cable = new Kinetic.Line({
  strokeWidth: 40,
  stroke: 'green',
  points: [{
    x: stage.getWidth() / 2,
    y: stage.getHeight() / 2
  }, {
    x: 100,
    y: 100
  }],
  draggable: true
});

// build center

var c1 = new Kinetic.Circle({
  radius: 60,
  fill: 'black',
  draggable: true,
  x: stage.getWidth() / 2,
  y: stage.getHeight() / 2
});

var c2 = new Kinetic.Circle({
  x: 100,
  y: 100,
  radius: 60,
  fill: 'black',
  draggable: true,
});

//add everything to the layer

cableLayer.add(cable);
cableLayer.add(c1);
cableLayer.add(c2);

//add all to stage
stage.add(cableLayer);

//What to do when something is changed...

cable.on('dragmove', (function () {
  c1.setPosition([cable.getPosition().x + cable.getPoints()[0].x, cable.getPosition().y + cable.getPoints()[0].y]);
  c2.setPosition([cable.getPosition().x + cable.getPoints()[1].x, cable.getPosition().y + cable.getPoints()[1].y]);  

  cableLayer.draw();

}));

c1.on('dragstart', (function () {
  c1.getLayer().afterDraw(function () {
    cable.attrs.points[0].x = c1.getX()-cable.getX();
    cable.attrs.points[0].y = c1.getY()-cable.getY();
    cableLayer.draw();

  });
}));

c2.on('dragstart', (function () {
  c2.getLayer().afterDraw(function () {
    cable.attrs.points[1].x = c2.getX()-cable.getX();
    cable.attrs.points[1].y = c2.getY()-cable.getY();
    cableLayer.draw();
  });
}));

}
        </script>
    </head>
    <body onmousedown="return false;">
        <div id="container"></div>
    </body>
</html> 
```

所以，我尝试使用设置索引

```
 cable.on('dragmove', (function () {
  c1.setPosition([cable.getPosition().x + cable.getPoints()[0].x, cable.getPosition().y + cable.getPoints()[0].y]);
  c2.setPosition([cable.getPosition().x + cable.getPoints()[1].x, cable.getPosition().y + cable.getPoints()[1].y]);  
   c2.setIndex(1);
  c1.setIndex(1);
  cable.setIndex(2);
  cableLayer.draw();

})); 
```

好像不行？为什么是这样？在所有情况下，如何让圆圈画在这条线上？主要是你拖线的情况。

有没有我在其他地方设置不同的地方？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:14:33.703

[http://jsfiddle.net/nYHrg/3/](http://jsfiddle.net/nYHrg/3/)

所以问题是 kineticjs (4.3.0) 添加了一个新的“拖动”层来提高拖动性能。任何时候你拖动一个对象，它都会被放在拖动层中，当你停止拖动时，它会被放回它自己的层中。这不会保留您的原始 z-index。每当您创建一个新对象并想要覆盖此功能时，您必须将对象的属性之一设置为：

```
 "dragOnTop: false" 
```

请参阅 jsfiddle 以了解具体实现。

# apache - 将 Apache Web 服务器配置为使用代理服务器

> ID：14493574
> 
> 赞同：10
> 
> 时间：2013-01-24T03:42:59.767
> 
> 标签：apache, proxy, webserver

我想将 Apache Web 服务器配置为使用代理服务器，以便所有出站请求都通过此代理服务器。你能帮我怎么做吗？我尝试使用 Proxifier，但对我没有多大帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T04:03:26.797

如果需要代理出站请求，可以使用 mod_proxy [http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxyremote中的 ProxyRemote](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxyremote)

`ProxyRemote * http://ip.of.proxY.host:port`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-03T13:00:36.803

如果您使用的是 Apache，更简单的方法是定义一个全局变量 http_proxy。在 RedHat 上，像编辑 /etc/sysconfig/httpd 并根据您的环境调整这两行：

```
export http_proxy="http://proxy:8080/" 
export https_proxy="http://proxy:8080/" 
```

# android - 如何使用 MediaStore 获取相机中的图片

> ID：14493577
> 
> 赞同：1
> 
> 时间：2013-01-24T03:43:10.090
> 
> 标签：android, mediastore

我尝试使用 MediaStore 来获取存储的图片。我的`in SDcard:DCIM/Camera`代码是这样的：

```
Cursor track = mContext.getContentResolver().query(
MediaStore.Images.Media.EXTERNAL_CONTENT_URI, null, null, null,
null); 
```

但我得到了 SD 卡中的所有图片，我只需要进入`DCIM/Camera`，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:06:52.817

试试下面的代码。

```
String SD_CARD_CAM_DIR = Environment.getExternalStorageDirectory() + File.separator + "DCIM" + File.separator + "Camera";
File file =new File(SD_CARD_CAM_DIR);
Cursor track = mContext.getContentResolver().query(Uri.fromFile(file), null, null,null,null); 
```

# jquery - jQuery 多个滑出菜单 - 每个唯一与相同的兄弟姐妹

> ID：14493580
> 
> 赞同：1
> 
> 时间：2013-01-24T03:43:22.593
> 
> 标签：jquery, drop-down-menu, jquery-animate, siblings

我试图通过使用 .next() 兄弟而不是每个滑出菜单的唯一 ID 来简化我的代码。但是，当每个滑出菜单都有 .next() 兄弟（单击上一个兄弟以打开菜单容器）时，我似乎无法正确获取代码。

最终，与 6 到 8 个不同的 CSS 类相比，只维护一个 CSS 类会更容易。我确信有一种优雅的方式来编写 jQuery 以使其工作......但我就是无法得到它。任何帮助表示赞赏。下面是我的 jsfiddle（其中包括用于顶行滑出菜单的“唯一”元素方法，以及用于第二行的“兄弟姐妹”方法）和用于兄弟姐妹方法的 jQuery。

*编辑：请注意，我希望一次只提供一个菜单。顶行确实有一些同时显示的滑出式菜单，但这是特定情况。

[http://jsfiddle.net/U3jHf/28/](http://jsfiddle.net/U3jHf/28/)

```
$('.topIcon').click(function(){

    if($(this).next('.sideUITopIconContainer').is(':hidden')){  

            $(this).next('.sideUITopIconContainer').show();
            $(this).next('.sideUITopIconContainer').animate({'height':'456px'});
        $('sideUITopIconContainer').not(this).next('sideUITopIconContainer').animate({'height':'0'},function(){

                 $('sideUITopIconContainer').not(this).next('sideUITopIconContainer').hide();

        }); 
    }

    else{

        $(this).next('.sideUITopIconContainer').animate({'height':'0'}, function(){

                $(this).next('sideUITopIconContainer').hide();

        }); 
    }

}); 
```

提前感谢您的帮助。

# jquery - 多列的数据表

> ID：14493581
> 
> 赞同：0
> 
> 时间：2013-01-24T03:43:45.423
> 
> 标签：jquery, datatables

我有一个数据表来显示从数据库中提取的信息。对于八列，数据显示完美，但是当我尝试在 html 中再添加一列并从数据库中提取一列信息时，数据表被搞砸了。我已附上我的代码以供参考：

我的html表

```
<table id="datatables" class ="display">
<thead>
    <tr>
     <th>University</th>
       <th>Country</th>
       <th>Total_Pubs</th>
       <th>Per Pubs in 10 % SNIP</th>
       <th>Per Pubs in Top 25% SNIP</th>
       <th>Total Cites</th>
       <th> Per Cites from Top 10% SNIP</th>
       <th>Per Cites from Top 25% SNIP</th>                      
    </tr>
</thead>
<tbody> 
```

从数据库中获取数据：

```
 while ($row = mysql_fetch_array($result)) {

                <tr>
                   <td><?=$row['University_Name']?></td>
                    <td><?=$row['Country_Name']?></td>
                    <td><?=$row['Total_Pubs']?></td>
                    <td><?=$row['Per_Pubs_A1']?></td> 
                    <td><?=$row['Per_Pub_A1_A']?></td>  
                    <td><?=$row['Total_Cite']?></td>
                    <td><?=$row['Per_Cite_A1']?></td> 
                    <td><?=$row['Per_Cite_A1_A']?></td>         
                </tr>

            } 
```

用于数据表的 JQUery：

```
 jQuery(document).ready(function() {
                    jQuery('#datatables').dataTable({
                    "sPaginationType":"full_numbers",
                    "aaSorting":[[2, "desc"]],
                    "bJQueryUI":true,

    });
  }); 
```

任何建议和想法都将受到高度赞赏。

# asp.net-mvc - MVC 如何在一页中对 2 种不同的方法做出反应

> ID：14493583
> 
> 赞同：0
> 
> 时间：2013-01-24T03:44:02.373
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我有 2 种方法：加法和减法。我希望当单击添加按钮时，第三个文本框显示 A + B 的结果；单击“减去”按钮，第三个文本框显示 A - B 的结果。

我认为这应该是一件简单的事情（因为它可以在 ASP.NET WebForm 应用程序中的几行代码内完成）。但是试了很多次，问了几个朋友，还是没找到解决办法……

```
@using (Html.BeginForm("Add", "MyMVC"))
{
    <ol>
        <li>
            @Html.TextAreaFor(m => m.A)
        </li>
        <li><span>+ </span></li>
        <li>
            @Html.TextAreaFor(m => m.B)
        </li>
        <li><span>= </span></li>
        <li>
            @Html.TextAreaFor(m => m.C)
        </li>
    </ol>
    @{
    Html.RenderAction("Calculate", "MyMVC");
    }
    @{
    Html.RenderAction("Subtract", "MyMVC");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:00:04.817

不需要 RenderAction 标签。BeginForm 扩展还需要呈现一个发布到自身的表单元素。

将您的视图更改为

```
@model SampleMvc.Models.SumModel

@using (Html.BeginForm())
{
    <ol>
        <li>
            @Html.TextAreaFor(m => m.A)
        </li>
        <li><span>+ </span></li>
        <li>
            @Html.TextAreaFor(m => m.B)
        </li>
        <li><span>= </span></li>
        <li>
            @Html.TextAreaFor(m => m.C)
        </li>
    </ol>
    <input type="submit" id="add" name="Calculate" value="Add" />
    <input type="submit" id="subtract" name="Calculate" value="Subtract" />
} 
```

注意提交输入上的 name 属性，这将使默认模型绑定器绑定到名为 Calculate 的属性。

为您查看模型使用类似于

```
public class SumModel {
        public int A { get; set; } 
        public int B { get; set; } 
        public int C { get; private set; }
        public string Calculate { get; set; }

        public void RunCalculation() {
            if (Calculate.Equals("add",StringComparison.InvariantCultureIgnoreCase)) {
                C = A + B;
            } else {
                C = A - B;
            }
        }
    } 
```

然后在控制器中有类似的动作：

```
public ActionResult Calculate() {
        return View();
    }

[HttpPost]
public ActionResult Calculate(SumModel sumModel) {
    sumModel.RunCalculation();

    return View(sumModel);
} 
```

当表单通过提交输入上的点击事件提交时，按钮的值将自动神奇地绑定到 SumModel 的 Calculate 属性。

然后，当调用 RunCalculation 方法时，它使用该属性来计算针对值 A 和 B 运行哪个操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:09:42.817

其他简单的方法是，您可以为按钮使用相同的名称。然后在控制器中读取它。

```
<input type="submit" id="add" name="buttonclicked" value="Add" />
<input type="submit" id="subtract" name="buttonclicked" value="Subtract" />

[HttpPost]
public ActionResult Index(string buttonclicked, SumModel sumModel) {
if(buttonclicked=="add"){

}
else{

}
} 
```

# jquery - 使用数组存储 jQuery 选择器

> ID：14493584
> 
> 赞同：0
> 
> 时间：2013-01-24T03:44:07.040
> 
> 标签：jquery, arrays, css-selectors

我希望能够拥有一个充满 jQuery 选择器的数组（一个类名数组）。这就是我目前正在做的事情，尽管它不起作用：

```
var array = [$('.one'),$('.two')];
array[0].find('.box-text').attr('src',"myImage.png"); 
```

怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T03:46:58.057

你可以做类似的事情吗

```
var array = ['.one','.two'];
$(array[0]).hide() 
```

# .net - 为什么我的 .NET 应用程序会产生如此多的页面错误？

> ID：14493592
> 
> 赞同：4
> 
> 时间：2013-01-24T03:45:05.893
> 
> 标签：.net, performance, memory, paging

我有一个 64 位 .NET 控制台应用程序，它基本上从 MSMQ 读取消息，然后通过 .NET SqlClient 与 SQL 服务器通信来处理它们。大多数时候它工作正常，但时不时地让自己进入一个状态，即使是最简单的操作，例如构建 SqlCommand 参数数组，都运行异常缓慢。在最坏的情况下，应用程序一次 30 分钟什么都不做（什么都没有写入日志，并且在详细模式打开时非常健谈），然后将再次开始写入，没有任何迹象表明导致延迟的原因。这严重影响了我们产品的可用性。

在过去的几个小时里，我一直在查看每个性能计数器等，一切都表明页面读取过多 - 因此磁盘 I/O 已达到最大值，我可以看到我的进程不断从 pagefile.sys 等中大量读取. 等等 但我不知道为什么，因为应用程序的总内存使用量远低于可用 RAM：工作集为 60M，总提交大小为 300M（高，并且与峰值工作集匹配 - 不知道为什么会这样)，但与可用的 12 Gig RAM 相比，这是微不足道的，其中很少使用其他内存。

我已经阅读了关于监控应用程序性能等的每一个 MS 文档，但所有内容都指向“我的应用程序需要更多内存”。好的......那么它如何给它更多的内存 - 没有其他东西在使用它！现在有一个单独的问题，考虑到应用程序的功能，它确实不应该需要那么多内存，但是为了降低内存而付出的努力可能不值得更多硬件的成本。

要注意的另一件事：如果我启动同一应用程序的第二个实例，它似乎运行良好。所以这显然不是系统范围的问题。

我在 stackoverflow 上看到了一些类似的帖子，但还没有特别有用的答案……希望比以前的海报有更多的运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:44:02.923

任务管理器中的页面错误意味着对磁盘上页面文件的点击，默认为您安装的 RAM 数量的 1.5 倍。这不一定是坏事，它只是告诉你数据在哪里。您可以关闭分页文件以查看此数字保持为 0。

您是否查看过您所依赖的产品（如 SQL Server 或 MSMQ）的性能和计数器？您是否尝试过 memtest86 来测试您的内存？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-20T12:29:02.743

我有同样的问题。根据我的经验，当您有“永远在线”的密集应用程序时；它们应该放置在 Windows 服务而不是控制台应用程序中。

话虽如此，这可能是垃圾收集的问题。

将此添加到您的配置文件中：

```
<runtime>
  <gcServer enabled="True"/>
</runtime> 
```

您需要将其放在配置节点下。

根据我的经验，这将导致应用程序的 PageFaults 更少，工作集更大。

没有银弹。如果没有代码，就无法知道您的代码是否正在泄漏内存；这可能是过度分页的另一个原因。

# android - android相机错误1001 - 那是什么鬼？

> ID：14493593
> 
> 赞同：8
> 
> 时间：2013-01-24T03:45:23.337
> 
> 标签：android, camera

我在网上搜索了所有内容，但找不到那个 1001 错误是什么。几秒钟后，我收到相机 100 错误，但我无法找出第一个错误是什么。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T21:02:49.037

我在 S3 上也遇到了这个错误。我相信我追踪到了 MediaRecorder 如何使用相机预览表面。在我的情况下，当我尝试开始录制时，预览显示正在重置。我通过清理我的代码解决了这个问题，并在下面的 SurfaceView 实现中使用调用来设置、启动和停止预览显示（来自[Android Camera 开发人员指南](http://developer.android.com/guide/topics/media/camera.html#camera-preview)）：

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
private SurfaceHolder mHolder;
private Camera mCamera;

public CameraPreview(Context context, Camera camera) {
    super(context);
    mCamera = camera;

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = getHolder();
    mHolder.addCallback(this);
    // deprecated setting, but required on Android versions prior to 3.0
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, now tell the camera where to draw the preview.
    try {
        mCamera.setPreviewDisplay(holder);
        mCamera.startPreview();
    } catch (IOException e) {
        Log.d(TAG, "Error setting camera preview: " + e.getMessage());
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // empty. Take care of releasing the Camera preview in your activity.
}

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    // If your preview can change or rotate, take care of those events here.
    // Make sure to stop the preview before resizing or reformatting it.

    if (mHolder.getSurface() == null){
      // preview surface does not exist
      return;
    }

    // stop preview before making changes
    try {
        mCamera.stopPreview();
    } catch (Exception e){
      // ignore: tried to stop a non-existent preview
    }

    // set preview size and make any resize, rotate or
    // reformatting changes here

    // start preview with new settings
    try {
        mCamera.setPreviewDisplay(mHolder);
        mCamera.startPreview();

    } catch (Exception e){
        Log.d(TAG, "Error starting camera preview: " + e.getMessage());
    }
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-27T03:20:19.093

只是想我会在这里添加一个帖子以供将来参考。这个问题困扰了我很久。事实证明，我的问题是由不正确的预览大小引起的，尽管分辨率设置是从 getSupportedPictureSize 方法获得的。

因此，例如，您可以获得如下尺寸：

```
//first entry in list is 1392x1392 for front facing camera on an S3
List<Camera.Size> supportedPictureSizes = params.getSupportedPictureSizes(); 
```

设置此分辨率或忽略设置图片大小将导致可怕的错误 1001。

如果您在任何其他设备上遇到此问题，我建议您尝试不同的图片尺寸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T17:19:51.740

所以我在 Galaxy S3 上安装它还有另一个原因。我正在使用 TextureView 来显示我的相机预览，并且在成功预览后按下主页按钮然后再次进入应用程序时遇到了这个可怕的错误。在 onResume() 函数中我再次启动预览，发现我没有在 onSurfaceTextureDestroyed() 函数中释放 SurfaceTexture 实例变量。

我在这个函数中添加了发布行，它现在看起来像这样并且完美地工作：

```
@Override public boolean onSurfaceTextureDestroyed(SurfaceTexture surface) {
    mSurfaceTexture = null; //This was the offending culprit.

    releaseMediaPlayer();
    releaseVideoRecorder();
    releaseCamera();

    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-08T16:49:50.333

就我而言，在三星 S3 中，未设置视频大小参数，这导致了 1001 错误。使用预览大小在媒体记录器上设置视频大小修复了该问题。但是，此更改可能会在其他设备上失败，因为该参数可能会或可能不会在所有设备中都可用/设置。以下代码适用于大多数设备：

```
if(params.get("video-size") != null && params.get("video-size").isEmpty()) {
    int videoWidth = params.getPreviewSize().width;
    int videoHeight = params.getPreviewSize().height;
    mediaRecorder.setVideoSize(videoWidth, videoHeight);
} else {
    mediaRecorder.setVideoSize(profile.videoFrameWidth, profile.videoFrameHeight);
} 
```

# ios - 子类化 UIView/UIViewController

> ID：14493594
> 
> 赞同：0
> 
> 时间：2013-01-24T03:45:29.783
> 
> 标签：ios, objective-c, uiview, uiviewcontroller, uibutton

我的应用程序中需要很多自定义按钮。目前我正在使用情节提要在我需要的每个控制器上定义这些按钮。但是，我觉得因为我在整个应用程序中都需要它们，所以我最好放置一个不同的视图控制器/视图子类，`UIView`或者`UIViewController`如果我需要进行任何更改，我只需要做一次，而不是在不同的视图控制器。最好的方法是什么？你能告诉我如何以编程方式创建按钮吗？这就是我目前正在做的事情，我得到了一个完全空白的屏幕。

```
-(void)viewDidAppear:(BOOL)animated 
{ 
    UIButton *testButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [testButton setFrame:CGRectMake(0, 390, 100, 40)];
    [testButton setAutoresizingMask:UIViewAutoresizingFlexibleTopMargin];
    [setImage:[UIImage imageNamed:@"test_button"] forState:UIControlStateNormal];
    [setImage:[UIImage imageNamed:@"test_button"] forState:UIControlStateHighlighted];  
    [setEnabled:YES];
    [self.view addSubview:testButton];
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:04:33.423

您的按钮有可能远离可见的矩形。对于以编程方式添加按钮，你做的大多是正确的。此外，图像应具有文件扩展名。由于您要添加自定义按钮，因此如果没有图像，那么您将看不到任何按钮。尝试为按钮添加标题，即使没有添加图像也会显示。

试试下面的代码。

```
-(void)viewDidAppear:(BOOL)animated { 
    [super viewDidAppear:animated]; //you must have a good reason to not add this line.
    UIButton *testButton=[UIButton buttonWithType:UIButtonTypeCustom];
    [testButton setFrame:CGRectMake(0, 20, 100, 40)];
    [testButton setAutoresizingMask:UIViewAutoresizingFlexibleTopMargin];
    [testButton setImage:[UIImage imageNamed:@"test_button.png"] forState:UIControlStateNormal];
    [testButton setImage:[UIImage imageNamed:@"test_button.png"] forState:UIControlStateHighlighted]; 
    [testButton setEnabled:YES];
    [self.view addSubview:testButton];
 } 
```

# jquery - 在 li 标签内居中 img 标签

> ID：14493595
> 
> 赞同：0
> 
> 时间：2013-01-24T03:45:34.367
> 
> 标签：jquery, html, css

我正在使用 flex 滑块 jquery 插件

如何以动态宽度和高度集中滑块内的图像？

```
<div class="flexslider">
    <ul class="slides">
        <li><img .../></li>
        <li><img .../></li>
    </ul>
</div>

ul.slides li
{
  margin: 0px; padding: 0px;
  text-align:center;
}

ul.slides li img
{
  width: 100%;
  /*display: table-cell; vertical-align: middle; does not work*/
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:54:49.057

如果你想要一个好的解决方案，那么你可以使用 jQuery UI position() 函数，否则使用这个查询：

```
$(".slides li img").each( function() {
    var w = $(this).width();
    var h = $(this).height();
    var wi = $(this).parent().width();
    var he = $(this).parent().height();
    var margintb = ((he-h)/2);
    var marginlb = ((wi-w)/2);
    $(this).css({ "margin": margintb+"px "+marginlb+"px" });
}); 
```

您可以使用基于 CSS 的解决方案：

```
li img {
    margin:0 auto;
}
li {
    line-height: *px;
} 
```

其中 * 是 li 元素的高度，如果它具有动态宽度和高度，那么一些 jQuery 就会发挥作用。

```
$(".slides li").each( function() {
    var s = $(this).height();
    $(this).css({ "line-height" : s+"px" });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T04:31:23.823

这是一个简单有效的 jQuery 解决方案。将此添加为新答案，因为它与我上面的另一个答案非常不同。

CSS 方式看起来很混乱，我不完全确定 @user1743214 的建议是否适用于 FlexSlider。

我已经复制了一些 FlexSlider 代码并将其设置在 JSFiddle 中。它不是动画或任何东西，但你有正确的结构和风格。

[http://jsfiddle.net/cmp3R/1/](http://jsfiddle.net/cmp3R/1/)

**jQuery 代码（为了方便/存档）**

```
$('.slides li').each( function() {
    var height = $(this).height();
    var imageHeight = $(this).find('img').height();

    var offset = (height - imageHeight) / 2;

    $(this).find('img').css('margin-top', offset + 'px');

}); 
```

**CSS 更改**

您需要为`<li>`每张幻灯片的包装设置一个高度。您可以在 CSS 中执行此操作。

**jQuery**

你得到滑块（即X）和图像（即Y）的高度，得到差异，差异的一半，然后添加一个内联样式，将图像向下移动该数量。IE。

`= (x-y)/2`

您需要使用 each() 为滑块中的每张幻灯片运行它，并且它应该将其偏移正确的量，以便它们垂直居中。

如果您使用插件的响应式功能，我可以看到这是一个问题，但可以通过使用查询`<li>`为每个屏幕尺寸设置不同的高度来解决它。`@media`

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T03:49:28.713

您可以尝试在 img 上使用 text-align: center ，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T03:53:57.813

尝试使用自动边距水平居中，仅影响图像列表。您可能需要设置`margin-top`，`margin-bottom`如果您也想垂直居中。

```
li img
{
  margin-left: auto;
  margin-right: auto;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T03:58:04.360

我不确定我是否完全理解您的问题，因为：

```
ul.slides li img {
   width: 100%;
  /*display: table-cell; vertical-align: middle; does not work*/
} 
```

您正在使图像与滑块一样宽，因此对齐无关紧要？

无论如何，`<li>`您可以使用`margin:auto`（使用 FlexSlider 测试）将图像居中。

但是您是否要使滑块本身居中？

**编辑：**要垂直对齐，您可以尝试`display: inline-block; vertical-align: middle;`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T04:11:26.697

现在只是为你总结一下，css方式..如果你想减少头痛，这就是你要做的

```
.image {
   position: absolute;
   top: 50%;
   left: 50%;
   width: 200px;
   height: 200px;
   margin-top: -100px; /* half the height */
   margin-left: -100px; /* half the width */
} 
```

这种类型称为行居中，这意味着您可以将这些样式应用于行中的对象。

现在另一种方式更复杂但被广泛使用，但您可能会看到它使用 div 应用并将显示更改为表格

```
html, body, #cont {
   height:100%; // set the height to be the full page  , as well as the width
   width: 100%;
   margin: 0;
   padding: 0;
   border: 0;
}
#cont td {
   vertical-align: middle;
   text-align: center;
} 
```

html 标记

```
<html>
<body>
   <table id="cont">
      <tr>
         <td><img src="image.png" alt="" /></td>
      </tr>
   </table>
</body>
</html> 
```

现在，如果您愿意，可以搜索有关此主题的更多信息，因为它已被覆盖。

对于 jquery 部分，您可以搜索插件，也可以使用@Aspiring Aqib 建议的代码

他的代码更像是内联居中技术

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-06T08:23:21.850

这是汤姆解决方案的修改版本，它也解决了不知道图像或`<li>`高度的问题。

找到最高的高度`<li>`并将所有图像调整`<li>`到该高度。

```
$(document).ready(function () {
    var maxHeight = -1;

    $('.slides li').each(function () {
        maxHeight = maxHeight > $(this).height() ? maxHeight : $(this).height();
    });

    $('.slides li').each(function () {
        $(this).height(maxHeight);
    });
}); 
```

在 each 之前插入一个元素`<img>`。

```
$(function () {
    $('img').before('<span class="vert-center"></span>');
}); 
```

将新元素设置为父元素的 100%，并将`<li>`其与图像垂直对齐。

```
.slides {
    text-align: center;
    position: relative;
}
.vert-center {
    display: inline-block;
    height: 100%;
    vertical-align: middle;
}
.slides img {
    display: inline-block;
    vertical-align: middle;
} 
```

查看[**演示**](http://jsfiddle.net/96XQL/)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-27T18:56:32.210

所以我试图用 flexslider 完成同样的事情，我是这样做的：

```
var centerImage = function (sliderH, n) {
  var $current = $('.js-slider .slides li img').eq(n);

  $current.css({
    'position' : 'relative',
    'top' : (sliderH - $current.height())/2
  });
};

$('.js-slider').flexslider({
  /* 
    other flexslider parameters 
  */
  start: function (slider) {
    centerImage(slider.h, slider.currentSlide);
  },
  before: function (slider) {
    centerImage(slider.h, slider.animatingTo);
  }
}); 
```

代码非常不言自明，希望对您有所帮助！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-06T06:05:21.393

如何在 flexslider 容器的 li 标签内创建一个固定高度的 div 标签

```
<div class="flexslider">
    <ul class="slides">
        <li>
            <div class="mydiv">
                <img ...>
            </div>
        </li>
    </ul>
</div>

.mydiv{height: 200px; display: table-cell; vertical-align: middle} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-15T16:28:14.603

要在 Flexslider 中设置图像水平居中，只需在**flexslider.css**文件中进行如下更改。

找到**.flexslider .slides img**并进行如下更改。

```
.flexslider .slides img {
  /*width: 100%;*/ or you can use width: auto;
  display: block;
  margin: 0 auto;
} 
```

无需进行所有计算。

# linux - 在多个语料库上获取多个关键字的快速方法

> ID：14493598
> 
> 赞同：0
> 
> 时间：2013-01-24T03:46:12.503
> 
> 标签：linux, unix, grep

我有 13K 术语的列表，我想确定它是否存在于 24K 文本文件中。所以最后我想了解一下`terms->file names`上下文。

使用 Unix/bash 命令实现此目的的最佳方法是什么？

我可以像这样使用 Perl 脚本，但是太慢了：

```
#!/usr/bin/perl 
#....skip...
foreach my $term (@terms) {
    system("grep $term /corpus/*.txt/")
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:53:33.883

```
grep --fixed-strings --word-regexp --with-filename --file=terms.txt --recursive /corpus 
```

# java - Java - 使用嵌套的 for 循环创建带有数字的三角形

> ID：14493599
> 
> 赞同：0
> 
> 时间：2013-01-24T03:46:19.270
> 
> 标签：java, for-loop

我有作业要做一个看起来像这样的三角形：

```
 1
        2 1 2
      3 2 1 2 3
    4 3 2 1 2 3 4 
  5 4 3 2 1 2 3 4 5
6 5 4 3 2 1 2 3 4 5 6 
```

我已经能够使用以下代码创建几乎一半的三角形：

```
public static void main(String[] args) {

            for (int i = 1; i <= 6; i++) {
              for (int j = 1; j <= i; j++)
                System.out.print(j + " ");
              System.out.println();
            }
} 
```

我一直无法弄清楚如何用我的代码镜像三角形的另一半，使其看起来像上面的三角形。讲师暗示使用带有 tab return 的 for 循环`\t`是执行此操作的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:18:34.143

尝试

```
 for (int i = 1; i <= 6; i++) {
        for (int j = 6; j > i; j--) {
            System.out.print("  ");
        }
        for (int j = i; j > 1; j--) {
            System.out.print(j + " ");
        }
        for (int j = 1; j <= i; j++) {
            System.out.print(j + " ");
        }
        System.out.println();
    } 
```

输出

```
 1 
        2 1 2 
      3 2 1 2 3 
    4 3 2 1 2 3 4 
  5 4 3 2 1 2 3 4 5 
6 5 4 3 2 1 2 3 4 5 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:50:09.000

打印 2*(6-i) 个空格，然后在 j > 0 时从 j = i 降序打印数字，然后在 j <= i 时从 j = 2 升序打印数字。

# java - 在正在运行的 java 程序的后台执行 jsp 程序

> ID：14493601
> 
> 赞同：0
> 
> 时间：2013-01-24T03:46:28.253
> 
> 标签：java, html, jsp, tomcat, servlets

我只想在单击正在运行的 java 程序上的按钮时执行我的 jsp 程序，它不需要可见，我说的 jsp 程序用于打印，一旦它加载到浏览器中，它就会弹出打印对话框确认框，所以它不需要可见，一旦我的java程序中的按钮被点击，打印对话框就会弹出，就是这样。顺便说一句，我是这个网站的新手，也只知道 java 的基础知识，所以我不知道该怎么做，但我喜欢这样做，只需要一个来自 jsp 页面的链接本地主机，类似的东西，

提前谢谢小伙伴们！希望你能帮助我！...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:34:59.433

这应该有效，不能确定它是否正常运行，请向我保证结果

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;

    public class callURL {
    public static void main(String[] args) 
    {
        String url = "http://localhost:8080/OpenID/asd.html";
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse response;
        StringBuilder builder= new StringBuilder();
        try 
        {
            response = httpClient.execute(httpPost);
            BufferedReader in = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
            char[] buf = new char[8000];
            int l = 0;
                while (l >= 0) 
                {
                    builder.append(buf, 0, l);
                    l = in.read(buf);
                }

        } 
        catch (ClientProtocolException e) 
        {
            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        } 
    }
} 
```

这个java程序来执行你的jsp

你必须在你的jsp页面中添加这一行

```
<script>
window.location.href="http://localhost:8080/OpenID/asd.html"
</script>

where OpenId : Application Name
asd.html is your jsp page , the same jsp which you are calling from java program 
```

# php - RESTful API 错误处理

> ID：14493610
> 
> 赞同：3
> 
> 时间：2013-01-24T03:47:36.340
> 
> 标签：php, api, rest

我有一个简单的函数，它向我的 RESTful API 发出 cURL 请求，并在发出成功请求时返回数据。我的问题是，当用户可能向 API 提供错误数据或 API 无法执行请求时，我不知道如何返回错误响应（例如 404s、500s）。

我该怎么做呢？

目前我有以下内容。在我的 API 客户端

```
class Awesome_Api { 
    static function request($url, $data, $method)
    {
        // cURL stuffs here...

        if (successful)
        {
            return (success response)
        }
        else
        {
            return (error response)
        }
    }
} 
```

和

```
$response = Awesome_Api::request($url, $data, $method); 
```

现在如何从 API 返回错误响应代码，并在客户端进行处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T03:55:27.543

使用该[`header`](http://php.net/manual/en/function.header.php)函数返回错误代码，如下所示：

```
header('HTTP/1.1 500 Internal Server Error'); 
```

或者

```
header('HTTP/1.1 404 Not found'); 
```

确保在调用此函数之前没有将任何内容写入输出是非常重要的，否则它将无法按预期工作。

在您的客户端 API 中，您可以使用[`curl_error()`](http://php.net/manual/en/function.curl-error.php)和[`curl_errno()`](http://php.net/manual/en/function.curl-errno.php)函数来检索有关从服务器返回的错误号和消息的信息。

# java - 如何使用 JDT 获取静态字段的所有引用

> ID：14493613
> 
> 赞同：2
> 
> 时间：2013-01-24T03:47:53.940
> 
> 标签：java, eclipse, eclipse-jdt

我找到[了 Java：查找方法的所有调用者——获取调用特定方法的所有方法，该方法](http://www.programcreek.com/2011/07/find-all-callers-of-a-method/)提示如何查找特定方法的所有调用者。

那么，如何获取静态字段的用户呢？

例如，当我有 static `z`in`AnotherClass`并且使用 访问它时`ClassA`，如何获取`IMethod` `ClassA#moved`？

```
public class AnotherClass {
    public static int z = 20;
    ....
}

public class ClassA {
    public int moved(int x, int y)
    {
        int temp = AnotherClass.z;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:20:21.247

该示例基于 org.eclipse.jdt.internal.* 类，我认为您不需要花费太多精力来执行此操作，因为 JDT SearchEngine API 功能齐全。在您的情况下，以下代码就足够了：

```
 IWorkspace workspace = ResourcesPlugin.getWorkspace();
    IWorkspaceRoot root = workspace.getRoot();
    IProject plainProject = root.getProject("some project");
    IJavaProject javaProject = JavaCore.create(plainProject);
    try {
        IType type = javaProject.findType("foo.bar.AnotherClass");
        IField field = type.getField("z");
        //IJavaSearchScope scope = SearchEngine.createWorkspaceScope();
        IJavaSearchScope scope = SearchEngine.createJavaSearchScope(new IJavaElement[] { plainProject });
        SearchPattern searchParttern = SearchPattern.createPattern(field,
                IJavaSearchConstants.REFERENCES);
        SearchRequestor requestor = new SearchRequestor() {
            @Override
            public void acceptSearchMatch(SearchMatch match) {
                System.out.println(match.getElement());
            }
        };
        SearchEngine searchEngine = new SearchEngine();
        searchEngine.search(searchParttern,
                new SearchParticipant[] { SearchEngine.getDefaultSearchParticipant() }, scope,
                requestor, new NullProgressMonitor());
    } catch (Exception e) {
        // some exception handling you need to do
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:10:22.337

您需要使用 JDT Core [SearchEngine](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/search/SearchEngine.html) API 来查找（引用）java 元素。

# javascript - 强制图像从服务器重新加载的方法

> ID：14493620
> 
> 赞同：1
> 
> 时间：2013-01-24T03:48:41.107
> 
> 标签：javascript

我已经在 IE 中看到了有关 setAttribute() 类似问题的所有其他帖子，但似乎无法获得任何解决方法，呃，工作（特别是对于 img 元素的 src 属性。

这个例子：

```
function reloadCaptcha(sImgElementId) {
    var oImgElement = document.getElementById(sImgElementId);
    oImgElement.setAttribute('src', oImgElement.src);
    return false;
} 
```

和 img 元素：

```
<img id="nlc" name="nlc" src="/inc_captcha.asp" onClick="javascript:reloadCaptcha('nlc'); return false;" /> 
```

它只是重新加载 src。像 Chrome 和 FF 中的魅力一样工作。IE中的纳达。

如何在 IE 中完成这项工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T03:52:18.893

我很确定它会可靠地重新加载您的验证码图像：

```
oImgElement.src = oImgElement.src + '?' + Math.random(); 
```

# vhdl - VHDL - 增加按钮事件的寄存器值

> ID：14493625
> 
> 赞同：3
> 
> 时间：2013-01-24T03:49:35.207
> 
> 标签：vhdl, fpga, intel-fpga

我对 VHDL 非常陌生，正在尝试弄清楚如何在 Altera Cyclone II 上做一些相当基本的事情。FPGA 有四个按钮——其中两个需要被编程来增加和减少选定的寄存器（0-F），另外两个需要被编程来增加和减少将在的值（从 00 到 FF）。那个寄存器。这是我到目前为止所拥有的：

```
entity raminfr is
    port (
        clk : in std_logic;
        we : in std_logic;
        a : in unsigned(3 downto 0);
        di : in unsigned(7 downto 0);
        do : out unsigned(7 downto 0)
    );
end raminfr;

architecture rtl of raminfr is
type ram_type is array (0 to 15) of unsigned(7 downto 0);
signal RAM : ram_type;
signal read_a : unsigned(3 downto 0);

begin

process (clk)
begin
    if rising_edge(clk) then
        if we = '1' then
            RAM(to_integer(a)) <= di;
        end if;
        read_a <= a;
    end if;
end process;

do <= RAM(to_integer(read_a));

end rtl; 
```

有人可以提供一些关于如何对按钮进行编程的基本示例代码吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T07:31:08.383

您可以在 clocked 中进行简单的边沿检测`process`，然后对上升沿做出反应。例如：

```
signal lastButtonState    : std_logic := '0';

process(clk)
begin
  if(rising_edge(clk)) then
    if(buttonState = '1' and lastButtonState = '0') then      --assuming active-high
      --Rising edge - do some work...
    end if;
    lastButtonState <= buttonState;
  end if;
end process; 
```

为了让一切正常工作，你需要确保你的按钮以某种方式去抖动。许多开发板为此都有一个硬件 RC 电路，但否则你需要在你的代码中完成它（虽然这并不难 - 网上应该有很多这样的例子）。

# android - android 4.1+ 中的 MP4 文件编写器

> ID：14493627
> 
> 赞同：1
> 
> 时间：2013-01-24T03:49:38.460
> 
> 标签：android, mp4, android-4.2-jelly-bean, android-mediarecorder, muxer

从 Android 4.1（API 级别 16）开始，引入了 MediaCodec API。这些 API 支持基本流解码和编码。此外，MediaExtractor API 将通过分析媒体流来提供基本的轨道详细信息。

我的问题是，我使用 MediaCodec API 设置了一个视频编码器，它为我提供了 .h264 格式的编码文件。我想将 .h264 文件写入 .mp4 文件以进行播放/存储/共享。我没有找到任何适用于 android 的 .MP4 文件编写器 API。有没有办法实现它？

谢谢，萨蒂什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T14:25:31.237

[这个](https://stackoverflow.com/a/14549890)响应可能有用。它建议使用[isoparser](http://code.google.com/p/mp4parser/)库。如果您将基本流保存到磁盘，它工作得很好，但如果您想从 MediaCodec 输出实时流，它就不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T20:40:43.350

另一种方法是使用 FFmpeg ( [http://sourceforge.net/projects/ffmpeg4android/](http://sourceforge.net/projects/ffmpeg4android/) ) 将 h264 文件混合到 mp4 容器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T19:34:11.547

从 Android 4.3 (API 18) 开始，您可以使用[MediaMuxer 类](http://developer.android.com/reference/android/media/MediaMuxer.html)将原始 H.264 流转换为 .mp4 文件（甚至合并音频流）。

有关示例代码，请参阅[此页面上](http://bigflake.com/mediacodec/)的 EncodeAndMuxTest 和 CameraToMpegTest 源。

# css - 包括字体使 用CSS支持IE7（IE6不关心）

> ID：14493630
> 
> 赞同：0
> 
> 时间：2013-01-24T03:49:50.100
> 
> 标签：css

下面的 CSS 可以让我在所有浏览器中看到 FontAwesome，但它不适用于 IE7。正在努力解决如何解决它。

```
@font-face {
font-family: 'FontAwesome';
src: url('fontawesome-webfont.eot'); /* IE9 Compat Modes */
src: url('fontawesome-webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
     url('fontawesome-webfont.woff') format('woff'), /* Modern Browsers */
     url('fontawesome-webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
     url('fontawesome-webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
} 
```

我没有使用任何像选择器这样的高级 CSS `:before`，即使这样也不起作用：

```
<span style="font-family:FontAwesome;">&lt;/span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:53:02.060

GitHub 网站上的 FontAwesome 下载有一个特定的 IE7 样式表，对我有用。

# ruby-on-rails - #258 标记字段（修订） - 它如何创建新作者？

> ID：14493631
> 
> 赞同：0
> 
> 时间：2013-01-24T03:49:50.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, railscasts

我正在尝试关注剧集 #258 Token Fields（已修订）。不知道代码是怎么创建作者的，感觉跟下面的代码有关系，但不确定。

请您解释一下代码是如何创建作者的？

在 /app/models/book.rb

```
def author_tokens=(tokens)
    self.author_ids = Author.ids_from_tokens(tokens)
end 
```

链接到剧集[http://railscasts.com/episodes/258-token-fields-revised?view=asciicast](http://railscasts.com/episodes/258-token-fields-revised?view=asciicast)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:28:55.870

这段代码实际上并没有创建作者。作者自己需要已经被创建。此代码将获取作者的令牌，并将其转换为 ID。所以这本书会有很多作者。

您可以在下面的这张图片中看到，作者在本书创建时已经存在。我们从书中选择

![选择图像](../Images/deb5f04fa8f1a43c062fe43d22679359.png)

图片来源：[http ://railscasts.com/episodes/258-token-fields-revised?view=asciicast](http://railscasts.com/episodes/258-token-fields-revised?view=asciicast)

更新

在剧集结束时，如果没有找到新作者，系统将创建新作者。这是由以下代码创建的：[https ://github.com/railscasts/258-token-fields-revised/blob/master/bookstore-tokeninput-after/app/models/author.rb](https://github.com/railscasts/258-token-fields-revised/blob/master/bookstore-tokeninput-after/app/models/author.rb)

```
 class Author < ActiveRecord::Base
    ##...
    def self.ids_from_tokens(tokens)
      tokens.gsub!(/<<<(.+?)>>>/) { create!(name: $1).id }
      tokens.split(',')
    end
  end 
```

因此，如果令牌带有 <<>>（从 Author.tokens 方法发送），它将创建作者，然后获取 ID 并返回它。

# c++ - 如何从系统日期获取昨天的日期并附加到字符串？

> ID：14493637
> 
> 赞同：1
> 
> 时间：2013-01-24T03:50:14.537
> 
> 标签：c++, c, date, system, runtime-error

我是 C 编程的初学者，并试图通过 c 代码使用系统日期获取昨天的日期，并像这样昨天Date_dtmmddyy 附加到字符串“yesterdayDate_dt”中，但面临运行时错误“总线错误 10”。

我的代码如下  

```
#include <stdlib.h>
#include <stdio.h>
#include <time.h>
#include <string.h>

int main(void)
{
   time_t now = time(NULL);
   struct tm *t = localtime(&now);

  int dInt = t->tm_mday+1;
  int mInt = t->tm_mon -1;
  int yInt = t->tm_year+1900;
  char *date= "23";
  char *month = "01";
  char *year = "13";

  sprintf(date, "%d", dInt);
  sprintf(month, "%d", mInt);

   char *yestDt = (char *)malloc(strlen(date)+strlen(month)+strlen(year)+1);
   strcpy(str,month);
   strcat(str,date);
   strcat(str,year);
   printf("str:%s",yestDt);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T03:57:28.687

请查看 sprintf 文档并尝试以下代码

```
#include <stdlib.h>
#include <stdio.h>
#include <time.h>
#include <string.h>

int main(void)
{
    char yestDt[23];
    time_t now = time(NULL);
    now = now - (24*60*60);
    struct tm *t = localtime(&now);
    sprintf(yestDt,"yesterdayDate_dt%02d%02d%02d", t->tm_mon+1, t->tm_mday, t->tm_year - 100);
    printf("Target String: \"%s\"", yestDt);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:59:47.560

此代码不合法​​：

```
sprintf(date, "%d", dInt); 
```

`sprintf`期望第一个参数指向**可写**字符存储。 `date`不是指向可写存储。

尝试将声明更改为`date`可写字符数组：

```
char date[3]; 
```

# python - 读取后从txt文件中删除行

> ID：14493638
> 
> 赞同：1
> 
> 时间：2013-01-24T03:50:33.930
> 
> 标签：python, scripting

我正在尝试创建一个脚本，该脚本向 txt 文件中的随机 url 发出请求

```
import urllib2

with open('urls.txt') as urls:
    for url in urls:
        try:
            r = urllib2.urlopen(url)
        except urllib2.URLError as e:
            r = e
        if r.code in (200, 401):
            print '[{}]: '.format(url), "Up!"
        elif r.code == 404:
            print '[{}]: '.format(url), "Not Found!" 
```

但我希望当某些 url 找不到 404 时从文件中删除。每个 url 都是每行的，所以基本上是擦除每个找不到 404 的 url。怎么做？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:53:50.353

您可以写入第二个文件：

```
import urllib2

with open('urls.txt', 'r') as urls, open('urls2.txt', 'w') as urls2:
    for url in urls:
        try:
            r = urllib2.urlopen(url)
        except urllib2.URLError as e:
            r = e

        if r.code in (200, 401):
            print '[{}]: '.format(url), "Up!"
            urls2.write(url + '\n')
        elif r.code == 404:
            print '[{}]: '.format(url), "Not Found!" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:01:08.280

为了从文件中删除行，您必须重写文件的*全部内容*。最安全的方法是在同一目录中写出一个*新*文件，然后`rename`将其覆盖旧文件。我会像这样修改你的代码：

```
import os
import sys
import tempfile
import urllib2

good_urls = set()

with open('urls.txt') as urls:
    for url in urls:
        try:
            r = urllib2.urlopen(url)
        except urllib2.URLError as e:
            r = e
        if r.code in (200, 401):
            sys.stdout.write('[{}]: Up!\n'.format(url))
            good_urls.add(url)
        elif r.code == 404:
            sys.stdout.write('[{}]: Not found!\n'.format(url))
        else:
            sys.stdout.write('[{}]: Unexpected response code {}\n'.format(url, r.code))

tmp = None
try:
    tmp = tempfile.NamedTemporaryFile(mode='w', suffix='.txt', dir='.', delete=False)
    for url in sorted(good_urls):
        tmp.write(url + "\n")
    tmp.close()
    os.rename(tmp.name, 'urls.txt')
    tmp = None
finally:
    if tmp is not None:
        os.unlink(tmp.name) 
```

您可能希望在第一个循环中`good_urls.add(url)`的子句中添加 a。`else`如果有人知道一种更整洁的方法来完成我对 try-finally 所做的事情，我想听听。

# hibernate - JPA/JPQL：根据相关对象的集合/映射填充集合/映射？（原型样）

> ID：14493642
> 
> 赞同：1
> 
> 时间：2013-01-24T03:51:16.327
> 
> 标签：hibernate, select, jpa, jpql, prototypal-inheritance

我有这样的实体结构：

```
Product  1 -> N   ProductCustomField
  1                       1
  |                       |
  M                       M'
Release  1 -> N'  ReleaseCustomField 
```

`ProductCustomField`是一种“原型” - Release 可能具有的字段列表。

我想选择一个`Release`对象，其中所有对象`ReleaseCustomFields`都`ProductCustomField`在`Product`其中`Release`。

**例子：**

MySoft 具有自定义字段“downloadURL”，默认值为“”。MySoft 已发布 1.0。这个版本没有ReleaseCustomFields，但因为它是MySoft 的一个版本，我可以看出它可能有“downloadURL”自定义字段。

因此，我希望 MySoft 1.0 版本带有定义“downloadURL”的地图（默认值“”）。

我知道我会在 SQL 中做什么，这将是一个不错的长而复杂的 SELECT，但可能。
我不知道如何在 JPA/Hibernate 中掌握它。

不确定这是否是尝试在`SELECT`. 也许我宁愿`Release`用 INSERT 填充 的自定义字段，然后简单地依赖映射（这已经有效）？
或者我应该在 中创建一个特殊属性`Release`，填充特殊查询？（我不介意使用`org.hibernate.*`注释。）
或者我应该做最简单的事情 - 采取`release.getProduct().getCustomFields()`并执行“对于 中的每个字段`ProductCustomField`，使用中的内容`ReleaseCustomField`，还是`ProductCustomField#getDefault()`其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:43:47.480

我选择了第三种方法。因为我使用了 Wicket 框架，所以我创建了一个模型，它给定一个`release`并且`release.getProduct.getCustomFields().get("fieldName")`能够获取默认值或实际值，并且在写入时更新`releases`' 字段值映射。

我开始得到，`IllegalArgumentException: object is not an instance of declaring class`但这很可能是一个不同的问题。

# mysql - CONVERT_TZ 在共享托管服务器上运行

> ID：14493647
> 
> 赞同：2
> 
> 时间：2013-01-24T03:51:50.763
> 
> 标签：mysql, convert-tz

我真的很想使用 CONVERT_TZ 函数来处理通过用 Perl 编写的 cron 作业发送自动提醒。我遇到的问题是，每当我使用 CONVERT_TZ 函数时，我都会得到一个 NULL 输出，这让我相信我的主机没有填充时区表。不幸的是，他们对我的设置没有那么有帮助，所以我尝试将这些表加载到我的数据库中，因为我无权访问系统 mysql 数据库，但这似乎对我没有任何帮助。

有谁知道如何解决这个问题？提前致谢。

# javascript - Humble Haxe，在非 haxe 友好的目标项目中自动合并 haxe 的方法？

> ID：14493652
> 
> 赞同：1
> 
> 时间：2013-01-24T03:52:22.110
> 
> 标签：javascript, haxe

通常使用 haxe，我们需要使用现有的非 haxe 代码，因此我们可能希望我们的 haxe 代码吸收系统的一部分或添加到它，而不是编写外部代码，我们不能假设一个好的 haxe 设置的系统。

以 js 目标为例，假设我们想向一些现有的 javascript 代码添加功能，我们无法轻松控制 haxe 的入口点，我们必须在当前 js 代码中注入功能或类。JS 代码可能太复杂而无法重新排列成真正的友好格式。所以一种方法是用我们需要的东西来模拟一个类，然后尝试创建一些 neko 来自动插入并转换它，合并到当前的代码库中......但这是一个非常开放的问题，并且会与其他目标。

所以我的问题是您开发了哪些方法来在现有目标代码中混合 haxe 目标代码，例如在 js 源中添加一个 haxe 类，也许使用一些 neko 来自动插入并重新排列 haxe 中所需的引导代码恶作剧类。但也对您如何处理其他目标感兴趣，我可能对 haxe flash 有想法，但不是说 PHP 或 c++。让我们假设您无法设置标准的主引导结构，并且在每次发布时，您真的希望您的 haxe 代码在您点击构建按钮时正确地合并回主非 haxe 项目代码。

一个棘手但非常重要的解决方案使得在更多项目中使用 haxe 变得更加容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:09:59.763

我对你所说的只有少量经验，但这里是：

*   JS - 我使用了一个自定义的 Markdown 库（[mdown](https://github.com/jasononeil/mdown/)的变体），它是用 Haxe 编写的，主要用于非 haxe javascript 环境。我试图让它尽可能地成为“黑匣子”——Haxe 库使用[@:expose metadata](http://haxe.org/manual/tips_and_tricks#javascript-specific-metadata)暴露了一个静态方法，所以我可以调用 Markdown.convert(str); 从我的 Javascript 中的任何地方。我们发现尽可能将其保持为“黑匣子”是有益的，因此非 haxe Javascript 知道要提供什么输入以及期望什么输出，但其他一切都是不透明的。

*   PHP - 我已经完成了一两个项目，我在 Haxe 中做了一些工作，并且不得不将它包含在现有的 PHP 网站上。我发现我可以捎带现有的网站会话来检查用户是否经过身份验证，并且我为现有网站设置了一种方法，为应用程序的 Haxe 部分提供“基本模板”，然后 Haxe 将其渲染到. 相当 hacky，但它成功了，这意味着 Haxe 部分和非 haxe 部分的模板都已更新。

*   服务器端的另一种方法可能是分离成面向用户的代码和 API。所以也许 Haxe 设置了一个 JSON API，PHP 与之对话。或者也许你有一个 Haxe 网站，它与 Ruby/Python API 等对话。

正如你所看到的 - 我试图让事情变得非常不同。如果 Haxe 可以以相对独立的方式运行，并通过获取特定输入并提供特定输出来与其他代码交互，那么事情的行为就可以相对可预测。我没有尝试过比这更进一步的集成，我认为 Haxe 的工作方式（使用它自己的类系统和数据结构等）足够不同，以至于紧密集成可能会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:52:23.487

我很少混合代码，但它是这样的：

*   对于 flash，您不需要任何东西，如果您添加在另一个程序中制作的 swf 库，您可以从 haxe 访问这些类。

*   除非您想使用无类型，否则没有外部变量，对于 js 是不可能的。或者也许你明白杰森做了什么，我没有:)

*   对于 cpp 更糟糕的是，您必须使用 cffi 最终会导致代码混乱，用于示例检查 nme 扩展的工作方式。

*   从未使用过java，但我认为这里很简单

# python - 如何在鼻子中设置 self.maxDiff 以获得完整的差异输出？

> ID：14493670
> 
> 赞同：87
> 
> 时间：2013-01-24T03:54:07.187
> 
> 标签：python, nose

在 Python 3.3.0 中使用鼻子 1.2.1 时，有时会收到类似于以下的错误消息

```
======================================================================
FAIL: maxdiff2.test_equal
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python3.3/site-packages/nose/case.py", line 198, in runTest
    self.test(*self.arg)
  File "/Users/loic/cmrsj/Calculus_II/scrap/maxdiff2.py", line 32, in test_equal
    assert_equal(str1, str2)
AssertionError: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a
diam lectus.\n [truncated]... != 'Suspendisse lectus leo, consectetur in tempor sit
amet, placerat quis neque.\nE [truncated]...
Diff is 1780 characters long. Set self.maxDiff to None to see it.

----------------------------------------------------------------------
Ran 1 test in 0.064s

FAILED (failures=1) 
```

在许多情况下，要弄清楚错误到底是什么，我需要查看完整的 diff 输出。但是，我不知道如何设置它`self.maxDiff`。谷歌搜索鼻子和 maxDiff 没有帮助。在 Python 2.7.1 上使用相同版本的鼻子，完整的差异会打印到屏幕上。

这是一个简单的脚本，在运行时会生成上述错误`nosetests-3.3`：

```
from nose.tools import assert_equal

def test_equal():
    str1 = """\
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus.
Sed sit amet ipsum mauris. Maecenas congue ligula ac quam viverra nec
consectetur ante hendrerit. Donec et mollis dolor. Praesent et diam eget libero
egestas mattis sit amet vitae augue. Nam tincidunt congue enim, ut porta lorem
lacinia consectetur. Donec ut libero sed arcu vehicula ultricies a non tortor.
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean ut gravida
lorem. Ut turpis felis, pulvinar a semper sed, adipiscing id dolor.
Pellentesque auctor nisi id magna consequat sagittis. Curabitur dapibus enim
sit amet elit pharetra tincidunt feugiat nisl imperdiet. Ut convallis libero in
urna ultrices accumsan. Donec sed odio eros. Donec viverra mi quis quam
pulvinar at malesuada arcu rhoncus. Cum sociis natoque penatibus et magnis dis
parturient montes, nascetur ridiculus mus. In rutrum accumsan ultricies. Mauris
vitae nisi at sem facilisis semper ac in est."""

    str2 = """\
Suspendisse lectus leo, consectetur in tempor sit amet, placerat quis neque.
Etiam luctus porttitor lorem, sed suscipit est rutrum non. Curabitur lobortis
nisl a enim congue semper. Aenean commodo ultrices imperdiet. Vestibulum ut
justo vel sapien venenatis tincidunt. Phasellus eget dolor sit amet ipsum
dapibus condimentum vitae quis lectus. Aliquam ut massa in turpis dapibus
convallis. Praesent elit lacus, vestibulum at malesuada et, ornare et est. Ut
augue nunc, sodales ut euismod non, adipiscing vitae orci. Mauris ut placerat
justo. Mauris in ultricies enim. Quisque nec est eleifend nulla ultrices
egestas quis ut quam. Donec sollicitudin lectus a mauris pulvinar id aliquam
urna cursus. Cras quis ligula sem, vel elementum mi. Phasellus non ullamcorper
urna."""

    assert_equal(str1, str2) 
```

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-01-24T04:18:57.340

你设置`maxDiff`为`None`.

但是您必须实际使用 a[`unittest.TestCase`](http://docs.python.org/2/library/unittest.html#unittest.TestCase.maxDiff)进行测试才能使其正常工作。这应该有效。

```
class MyTest(unittest.TestCase):

    maxDiff = None

    def test_diff(self):
          <your test here> 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-05-12T20:07:44.547

这适用于 python 2.7：

```
 from unittest import TestCase
    TestCase.maxDiff = None 
```

它将为所有 TestCase 实例设置默认的 maxDiff，包括 assert_equals 和朋友附加到的那个。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-02-06T22:44:43.237

我在 Python 3 中遇到了同样的问题（通过阅读此处的其他答案）并且使用`im_class`不起作用。下面的代码片段适用于 Python 3（参见[如何在 Python 中查找绑定方法的实例？](https://stackoverflow.com/questions/4679592/how-to-find-instance-of-a-bound-method-in-python)）：

```
assert_equal.__self__.maxDiff = None 
```

正如@Louis 评论的那样，便利函数*是*`Dummy`实例上的绑定方法。他们似乎都在同一个实例上，所以改变这个例如`assert_equal`会改变它`assert_dict_equal`等等。从[Python 文档](http://docs.python.org/2/reference/datamodel.html)，`__self__`可从 Python 2.6 及更高版本获得。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-18T20:35:59.410

在这里你有它（谷歌告诉我的）：

```
# http://pdf2djvu.googlecode.com/hg/tests/common.py
try:
    from nose.tools import assert_multi_line_equal
except ImportError:
    assert_multi_line_equal = assert_equal
else:
    assert_multi_line_equal.im_class.maxDiff = None 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-12T21:49:56.867

在 python 2.7.3，nose 1.3.0 中，执行以下操作对我有用：

```
assert_equal.im_class.maxDiff = None
assert_equal(huge_thing, other_huge_thing) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-12-30T07:37:08.940

对于使用基本`unittest`库的人。`maxDiff`到达该领域的方式几乎相同：

```
import unittest

class Test_Something(unittest.TestCase):  
    def test_first_test(self):
        huge_custom_object = CustomObject()
        expected_object = CustomObject(customVars)

        self.assertEqual.__self__.maxDiff = None
        self.assertEqual(huge_custom_object , expected_object )

if __name__ == '__main__':
    unittest.main() 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2020-03-23T08:57:47.557

我最近遇到了这个问题....我强制使用 MS 类型的行结尾....

```
MSstr="""hi\r
there\r"""
expected="""hi
there"""

self.assertEqual(MSsrt, expected) 
```

这与其他人正在使用的可怕错误一起崩溃。

在 PyCharm 中，它说文件是相同的！

我删除了 \r - 没有更多的崩溃和测试现在通过了。

希望这可以节省我花费的 2 个小时。

# matlab - 使用 Matlab 从 wav 文件中拆分 DTMF 信号

> ID：14493673
> 
> 赞同：1
> 
> 时间：2013-01-24T03:54:12.820
> 
> 标签：matlab, signal-processing, fft, octave, dtmf

这是问题的背景：我有一个 wav 格式的 DTMF 信号，我必须识别它编码的数字序列。我必须在 Matlab 中使用快速傅立叶变换来执行此操作，这意味着我使用`wavread`和 来读取 wav 文件，并识别每个数字之间的间隔为 40ms 或更多。

到目前为止，这是我的代码：

```
[signal, fs] = wavread( 'C:\Temp\file.wav' );  % here, fs = 8000Hz

N = 512;                    
T = 1/fs;                   
L = length( signal )        
samples = fs / 1000 * 40    
windows = floor(L / samples) 
t = (1:L)/fs;

figure(1), plot(t, signal); 
```

这是`figure 1`从 wav 读取的信号的样子： ![在此处输入图像描述](../Images/a6418737dfdd74f5472b13cc6ca5fbff.png)

如何有效地将信号分成几部分，以便我可以分别对 10 个部分中的每一个进行 FFT 以解码相应的数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:59:41.917

我会推荐以下方法：

*   在时域中找到信号的包络（参见希尔伯特变换）。
*   稍微平滑一下信封。
*   取差异并找到峰值以获得音调的开始。
*   使用起始点选择帧并使用 fft 查找频谱。
*   在每个频谱中找到最大值的索引并将它们转换为频率。

棘手的部分是在第 3 点获得一个强大的起始检测器。您选择的差异中的峰值必须具有一定的大小才能符合起始条件。如果您的音调强度不同，这可能会造成问题，但从您的时间信号图像来看，这似乎不是问题。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:51:37.490

这对我有用：

```
windowSize = 256;   
nbWindows = floor(L / windowSize);

for i=1:nbWindows
    coeffs = fft(signal((i-1)*windowSize+1:i*windowSize));    
    plot(abs(coeffs(1:N)));
    waitforbuttonpress
end; 
```

这样可以移动窗口直到输入信号结束

# android - 从android上的sqlite获取数据真的很慢

> ID：14493676
> 
> 赞同：1
> 
> 时间：2013-01-24T03:54:32.913
> 
> 标签：android, sql, performance, sqlite

我有这个代码：

```
DatabaseHandler db = new DatabaseHandler(this);
System.out.println("Start - " + System.currentTimeMillis());
for (int i = 1; i < db.getChampsCount() + 1; i++) {
    String name = db.getChampInfo(i, "name");
    String title = db.getChampInfo(i, "title");
    String thumb = db.getChampInfo(i, "thumb");
    System.out.println("End - " + System.currentTimeMillis());
    [...]
} 
```

还有这个

```
String getChampInfo(int id, String col) {
    SQLiteDatabase db = this.getReadableDatabase();

    Cursor cursor = db.rawQuery("SELECT " + col + " FROM champions WHERE id = " + id, new String[] {});
    if (cursor != null)
        cursor.moveToFirst();

    db.close();
    return cursor.getString(0);
} 
```

这是 DatabaseHelper 类的一部分

它工作正常，但问题是执行时间太长（在我的安卓手机上为 2089 毫秒）。这些字符串是 UI 的一部分，所以我认为我不能把它放在另一个线程中。我该怎么做才能使这段代码运行得更快？

编辑：正好有 110 行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T04:13:41.753

而不是单独的语句，你不应该使用 Single sql statement 吗？

只需创建一个 ArrayList 即可将所有需要的值存储在 Activity 类中。

例如：`ArrayList<String> myData;`

现在在数据库助手类中创建一个函数，如下所示：

```
 // TO get All Data of datanase which you want
public ArrayList<String> getAllData() {          
    ArrayList<String> subTitleList = null;         
    Cursor cursor = null;          
    try {              
    String queryString = "SELECT * FROM champions";              
        cursor =  db.rawQuery(queryString, null);              
        if (cursor != null && cursor.moveToFirst()) {                 
            subTitleList = new ArrayList<String>();                 
            do {                     
                String nextUser = new String(cursor.getString(cursor.getColumnIndex("name")));                     
                String nextUser = new String(cursor.getString(cursor.getColumnIndex("title")));                     
                String nextUser = new String(cursor.getString(cursor.getColumnIndex("thumb")));                     

                subTitleList.add(nextUser);                 
            } 
            while (cursor.moveToNext());   
            System.out.println("it comes in SubTitleList");
        }         
    } 
    catch (Exception e) {             
        e.printStackTrace();             
        subTitleList = null;         
    } 
    finally {             
        if (cursor != null && !cursor.isClosed()) {                 
            cursor.deactivate();                 
            cursor.close();                 
            cursor = null;             
        }             
        if(db != null){                 
            db.close();             
        }         
    }
    //System.out.println("SubTitleList is: "+subTitleList);
    return subTitleList;   
} 
```

现在在您的活动类中，您可以调用此函数并从 myData ArrayList 中获取所有需要的数据。

```
myData = db.getAllData(); // i think there is no need of any ID if you are fetching all the data. 
```

希望你明白我的意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T04:03:57.390

你绝对可以在`AsyncTask`. 您所要做的就是将数据传递给任务的参数，或者如果您无法弄清楚，只需让您的任务有一个构造函数来获取参数并像这样调用它：

```
MyAsync ma = new MyAsync(stuff, stuff, stuff);
ma.execute(); 
```

在任务`onPostExecute()`中，您可以从后台运行的查询中获取数据，然后您可以更新 UI。

其他人也说得对。如果您可以将最好的查询与这样的表结合起来，那么它并不会真正给您带来很大的性能提升，至少我认为不会。

# matlab - 使用 matlab 有效地可视化大量点。

> ID：14493683
> 
> 赞同：2
> 
> 时间：2013-01-24T03:55:03.213
> 
> 标签：matlab, visualization, point-clouds

我有一组大约 100 万个点的 3D 点。我希望用 matlab 将这些可视化。

我尝试了以下功能：

```
plot3
scatter3 
```

但他们都非常迟钝。在matlab中有没有更有效的方法来可视化这个级别的点？也许是一种网格化点的方法？

如果没有，任何人都可以建议一个插件甚至一个不同的程序来可视化 3D 点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T04:11:43.207

如果您希望所有百万以上的点都显示在绘图中，那么无论您使用什么插件/程序，您都会遇到效率问题。我的建议是下采样。每隔一个点或每个第 n 个点使用 plot3 或 scatter3 函数，直到得到一个不迟钝的图形。只要您的数据差异不是天文数字，稍微下采样就不会影响点的整体分布（假设您有一百万个以上的点）。并且任何能够显示这么多数据而又不迟钝的软件很可能*是*下采样/分箱或使用一些插值技术来做到这一点（所以你也可以控制它）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-16T16:31:35.697

[来自文件交换的fscatter3](http://www.mathworks.com/matlabcentral/fileexchange/2993-fscatter3-m)，做你喜欢的事。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T04:22:00.860

是否有特定的理由让它显示那么多点？

我用谷歌搜索了一下，发现一些人遇到了类似的问题（有人建议将 Avizo 作为替代程序，但我从未使用过它）：

*   [http://www.mathworks.com/matlabcentral/newsreader/view_thread/308948](http://www.mathworks.com/matlabcentral/newsreader/view_thread/308948)
*   mathworks.com/matlabcentral/newsreader/view_thread/134022（不可点击，因为我没有足够的代表发布两个以上的链接）

如果您对数据的密度更感兴趣，另一种解决方案是生成直方图：

*   [http://blogs.mathworks.com/videos/2010/01/22/advanced-making-a-2d-or-3d-histogram-to-visualize-data-density/](http://blogs.mathworks.com/videos/2010/01/22/advanced-making-a-2d-or-3d-histogram-to-visualize-data-density/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T14:57:07.630

我事先知道您要查找的特征的大致坐标，尝试将云通过一个简单的直通过滤器，它基本上会裁剪您的点云。即，如果您知道该要素的 x 坐标 > 5，则删除所有 x 坐标 < 5 的点。

该过滤器可以首先协调实现为 data = data(data(1,:) > 5,:); 前提是您的 3d 数据存储在 n x 3 矩阵中。

这与下采样一起可以帮助您。如果您仍然发现性能滞后，请考虑使用 PointCloudLibrary 中的 PCD 查看器之类的东西，请在页面的中间查看 [http://pointclouds.org/documentation/overview/visualization.php](http://pointclouds.org/documentation/overview/visualization.php)

这是一个可以从 matlab 启动的独立应用程序。我发现它的性能远远好于缓慢的 matlab 绘图工具。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T05:25:40.330

对于任何感兴趣的人，我最终找到了一个名为 Cloud Compare 的点云可视化器。它非常快，允许选择和分割以及对点云进行过滤。

# javascript - 模板不适用于 JSON / Mustache.js

> ID：14493685
> 
> 赞同：0
> 
> 时间：2013-01-24T03:55:19.773
> 
> 标签：javascript, jquery, jquery-templates, mustache

我目前遇到了 Mustache.js 模板的问题。一切似乎都是正确的，并且模板在页面上加载为 HTML。但它无法访问 JSON 数据，我不太清楚为什么。任何人都可以帮忙吗？提前致谢。

我正在使用的 Javascript 如下。

```
 query.find({
        success: function(results){
        var template = $("#newCurrItem").html();

        var newContents = Mustache.to_html(template, results);
        $("#curr-list").append(newContents);
        },
        error: function(error){
            console.log("error");
        } 

    }); 
```

此图像显示 JSON 格式：

[http://i.imgur.com/JrYrORk.png?1](http://i.imgur.com/JrYrORk.png?1)

而且，这是模板：

```
<script id="newCurrItem" type="text/html"> 
    {{#results}}
    <!-- Template for new curriculum --> 
    <li id="curr-list-item">

            <div id="curr-item">
            <input type="checkbox" class="item-delete">
            <label id="item-content" class="item-content">{{curr}}</label>

    </div>
    </li>
    {{/results}}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:21:31.253

尝试像这样构建您的 JSON 数据：

```
 { "results" : [
        {
            "curr": "curr_dbc",
            "createdAt" : ...,
            "updatedAt":...
         }
     ]}; 
```

# jquery - jquery.js 文件的位置

> ID：14493689
> 
> 赞同：-1
> 
> 时间：2013-01-24T03:55:35.550
> 
> 标签：jquery, jsf

我已经创建了一个示例 jsf 应用程序，并且正在尝试使用 jquery。jquery.js 文件应该位于哪个目录中？网络信息？源代码？我下载了 .js 文件，但它似乎不起作用。我不确定它应该在哪里。

我已更新我的代码以指向 googleapis，但它仍然无法正常工作：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <title>Facelet Title</title>
</h:head>
<h:body>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js">
        $(document).ready(function(){
            $("#p1").mouseenter(function(){
                alert("You entered p1!");
            });
        });
    </script>
    <p id="p1">Enter this paragraph.</p>
</h:body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:01:12.693

只要您提供正确的文件路径，您就可以将其保存在任何地方。但是尽量让它远离`WEB-INF`目录，只保留该目录下的私有文件（用户不能直接访问的文件）。

如果您有`web-content`目录，请将 jquery 文件保存在`web-content\js`目录下，以便您可以通过`<path-to-your-app>/js/jquery.js`.

但是，如果您可以尝试使用jQuery[下载部分中给出的文件的 CDN 版本。](http://jquery.com/download/)您可以使用[Google](https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js)或[Microsoft](https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.0.min.js) CDN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T04:09:10.727

没关系，最重要的是你必须给出正确的路径。

例如：

```
<script language="javascript" src='script/jquery-1.6.min.js'></script> 
```

并且您的包含 jquery 的 html 文件必须与脚本文件夹放在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:49:41.883

鉴于您正在使用 JSF2，您可以利用 JSF2 资源管理系统。也就是说，将 CSS/JS/image 资源放到`/resources`公共 webcontent 的文件夹中，如下所示：

```
WebContent
 |-- resources
 |    |-- css
 |    |    `-- style.css
 |    |-- js
 |    |    `-- script.js
 |    `-- img
 |         `-- logo.png
 : 
```

然后可通过以下组件获得：

```
<h:outputStylesheet name="css/style.css" />
<h:outputScript name="js/script.js" />
<h:graphicImage name="img/logo.png" /> 
```

因此，在您的特定情况下，您需要将其另存为`/resources/js/jquery-1.9.0.min.js`：

```
WebContent
 |-- resources
 |    `-- js
 |         `-- jquery-1.9.0.min.js
 : 
```

并参考如下：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <title>Facelet Title</title>
    <h:outputScript name="js/jquery-1.9.0.min.js" />
</h:head>
<h:body>
    <h:outputScript target="body">
        $("#p1").mouseenter(function(){
            alert("You entered p1!");
        });
    </h:outputScript>
    <p id="p1">Enter this paragraph.</p>
</h:body> 
```

注意：`<h:outputScript target="body">`将自动重定位到 end`<body>`将早于`$(document).ready()`.

### 也可以看看：

*   [如何在 Facelets 模板中引用 CSS / JS / 图片资源？](https://stackoverflow.com/questions/8367421/how-to-reference-resource-in-facelets-template/)
*   [JSF 资源库有什么用途，应该如何使用？](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)
*   [具有共享代码的多个 JSF 项目的结构](https://stackoverflow.com/questions/8320486/structure-for-multiple-jsf-projects-with-shared-code/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T03:59:54.567

只要您提供正确的路径就没有关系，目前我们主要使用谷歌托管的 jquery 库。这减轻了一些交通压力..

你可以试试 [谷歌托管库](https://developers.google.com/speed/libraries/devguide)

请注意，您需要在链接前添加 http 或 https ..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T04:16:41.747

您可以将脚本文件保存在`WebResources`/`WebContent`文件夹中（任何资源文件夹，但路径必须正确），

用于`h:outputScript`加载脚本文件：（[参考](https://stackoverflow.com/a/9095727/1213738)）

```
 <h:outputScript name="js/jquery-1.6.2.js" /> 
```

如果您使用的是 RichFaces，则放置路径：

```
<a4j:loadScript src="resource:///pathToFile/jquery-1.4.2.min.js" /> 
```

添加**谷歌 CDN**：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script> 
```

参考：[xhtml 中的 jQuery](https://stackoverflow.com/questions/3888881/how-to-use-jquery-with-in-xhtml)

**您的场景：**使用如下代码。

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <title>Facelet Title</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
</h:head>
<h:body>
   <script type="text/javascript">
        $(document).ready(function(){
            $("#p1").mouseenter(function(){
                alert("You entered p1!");
            });
        });
    </script>
    <p id="p1">Enter this paragraph.</p>
</h:body> 
```

**或者**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
            $(document).ready(function(){
                $("#p1").mouseenter(function(){
                    alert("You entered p1!");
                });
            });
        </script> 
```

**演示：**
[Live Example1](http://jsfiddle.net/z6BYs/)（在正文中添加 google CDN）
[Live Example2](http://jsfiddle.net/CaFKY/)（在标题中添加 google CDN）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T05:58:24.103

您可以将 jquery 库放在Web 应用程序文件夹`WebContent`内的目录中。`resources`

```
WebContent
   ->resources->js->jquery-latest-version.js 
```

您可以通过指定将 jquery 包含在 JSF 页面中，

```
<h:outputScript name="js/jquery-latest-version.js" /> 
```

在 html 内`<head>`或页面底部。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-24T10:13:54.987

在您的网络应用程序中添加文件夹`resources`下一个文件夹下一个文件夹，该`js`文件夹由您的 JavaScript 文件命名，`jquery.js`并在此有效 JavaScript 文件中，其名称与版本的语法匹配，例如`1_6.js`.

因此，对于您的示例，它将是：

```
<your_web_app>/resources/js/jquery_min.js/1_6.js 
```

这是正确的 JSF 方式。现在您可以在您的 jsf 页面中使用：

```
<h:outputScript library="js" name="jquery_min.js"/> 
```

所有版本都将由 JSF Framework 管理。如果您添加下一个版本，可能是 1_7 这样的文件，命名`1_7.js`为您的`jquery_min.js`文件夹，那么 JSF 将自动从上述代码调用该版本的文件。

# actionscript-3 - 删除Flash动画/AS中的对象边框

> ID：14493690
> 
> 赞同：-1
> 
> 时间：2013-01-24T03:55:59.697
> 
> 标签：actionscript-3, flash, coverflow

我对 flash 和动作脚本都不熟悉，但我必须在我的网站上使用 flash 小程序，这里是对象演示；[http://www.weberdesignlabs.com/demos/flash_10_coverflow/](http://www.weberdesignlabs.com/demos/flash_10_coverflow/)

所以问题是，我想禁用每个图像周围的空白边框，以及图像反射。我认为当我将禁用图像边框本身时，反射边框也将被禁用。

我当然有修改该项目所需的 .fla 和所有 .as 文件。

我尝试成功的是通过修改名为“Coverflow.as”的.as文件中的这一行来将空白边框从4设置为0；

`private var padding:Number=4;`

边框实际上会变薄，但边框仍然在这里。

我向您粘贴 Coverflow.as 脚本代码：

```
////////////////////////////////////////////
// Project: Flash 10 Coverflow
// Date: 10/3/09
// Author: Stephen Weber
////////////////////////////////////////////
package {

    ////////////////////////////////////////////
    // IMPORTS
    ////////////////////////////////////////////

    import flash.display.Sprite;
    import flash.display.BitmapData;
    import flash.display.Bitmap;
    import flash.display.GradientType;
    import flash.display.Graphics;
    import flash.display.Shape;
    import flash.display.MovieClip;
    import flash.display.BlendMode;
    import flash.display.Loader;
    import flash.events.Event;
    import flash.events.KeyboardEvent;
    import flash.events.MouseEvent;
    import flash.events.IOErrorEvent;
    import flash.geom.Matrix;
    import flash.geom.Rectangle;
    import flash.geom.ColorTransform;
    import flash.net.URLRequest;
    import flash.net.URLLoader;
    import flash.net.navigateToURL;
    import flash.display.Stage;
    import flash.utils.setTimeout;

    //TweenLite - Tweening Engine - SOURCE: http://blog.greensock.com/tweenliteas3/
    import com.greensock.*;
    import com.greensock.easing.*;
    import com.greensock.plugins.*;

    public class Coverflow extends Sprite {

        ////////////////////////////////////////////
        // VARIABLES
        ////////////////////////////////////////////

        // size of the stage
        private var sw:Number;
        private var sh:Number;

        private var background:Background;

        // padding between each cover, can be customed via xml
        private var coverflowSpacing:Number=30;

        // transition time for movement
        private var transitionTime:Number=0.75;

        // the center of the stage
        private var centerX:Number;
        private var centerY:Number;

        // store each image cover's instance
        private var coverArray:Array=new Array();

        // title of each image
        private var coverLabel:CoverflowTitle = new CoverflowTitle();

        // the slider under the image cover
        private var coverSlider:Scrollbar;

        // how many image covers
        private var coverflowItemsTotal:Number;

        // how to open the link
        private var _target:String;

        // size of the image cover
        private var coverflowImageWidth:Number;

        private var coverflowImageHeight:Number;

        //Holds the objects in the data array
        private var _data:Array = new Array();

        // the y position of the item's title
        private var coverLabelPositionY:Number;

        //Z Position of Current CoverflowItem
        private var centerCoverflowZPosition:Number=-125;

        // display the middle of the cover or not
        private var startIndexInCenter:Boolean=true;

        // which cover to display in the beginning
        private var startIndex:Number=0;

        // the slide's Y position
        private var coverSlidePositionY:Number;

        //Holder for current CoverflowItem
        private var _currentCover:Number;

        //CoverflowItem Container
        private var coverflowItemContainer:Sprite = new Sprite();

        //XML Loading
        private var coverflowXMLLoader:URLLoader;

        //XML
        private var coverflowXML:XML;

        // the image cover's white border padding
        private var padding:Number=0;

        // stage reference
        private var _stage:Stage;

        //reflection
        private var reflection:Reflect;

        //Reflection Properties
        private var reflectionAlpha:Number;

        private var reflectionRatio:Number;

        private var reflectionDistance:Number;

        private var reflectionUpdateTime:Number;

        private var reflectionDropoff:Number;

        ////////////////////////////////////////////
        // CONSTRUCTOR - INITIAL ACTIONS
        ////////////////////////////////////////////
        public function Coverflow(_width:Number, _height:Number, __stage:Stage = null):void {
            _stage=__stage;
            sw=_width;
            sh=_height;
            centerX=_width>>1;
            centerY=(_height>>1) - 20;
            loadXML();

            //Grabs Background color passed in through FlashVars
            var backgColor:String = _stage.loaderInfo.parameters["backgroundColor"];

            if(backgColor == null) {
                //Black
                backgColor = "0x000000";

                //White
                //backgColor = "0xFFFFFF";
            }

            //Creates Background MovieClip
            background = new Background();

            //Set Background To Provided Width/Height
            background.width = _width;
            background.height = _height;

            //Adds background MovieClip to DisplayList
            addChild(background);

            //Tints Background MovieClip with provided tint
            TweenPlugin.activate([TintPlugin]);
            TweenLite.to(background, 0, {tint:backgColor});

            //Grabs Background color passed in through FlashVars
            var labelColor:String = _stage.loaderInfo.parameters["labelColor"];

            //Check for value and then default
            if(labelColor == null) {
                //Black
                //labelColor = "0x000000";

                //White
                labelColor = "0xFFFFFF";
            }

            //Tint Coverflow label to color provided
            TweenLite.to(coverLabel, 0, {tint:labelColor});

            if (_stage) {
                _stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDownHandler);
            }
        }
        ////////////////////////////////////////////
        // FUNCTIONS
        ////////////////////////////////////////////

        private function keyDownHandler(e:KeyboardEvent):void {
            if (e.keyCode==37||e.keyCode==74) {
                clickPre();
            }
            if (e.keyCode==39||e.keyCode==75) {
                clickNext();
            }
            // 72 stand for "H" key, 191 stand for "?" key
            if (e.keyCode==72||e.keyCode==191) {

            }
        }

        // display the previous image
        private function clickPre(e:Event=null):void {
            _currentCover--;
            if (_currentCover<0) {
                _currentCover=coverflowItemsTotal-1;
            }
            coverSlider.value=_currentCover;
            gotoCoverflowItem(_currentCover);
        }

        // display the next image
        private function clickNext(e:Event=null):void {
            _currentCover++;
            if (_currentCover>coverflowItemsTotal-1) {
                _currentCover=0;
            }
            coverSlider.value=_currentCover;
            gotoCoverflowItem(_currentCover);
        }

        // loading the XML
        private function loadXML():void {

            //Loads XML passed through FlashVars
            var xml_source:String = _stage.loaderInfo.parameters["xmlPath"];

            //If XML not found through FlashVars then defaults to xml path below
            if(xml_source == null) {
                xml_source = 'xml/data.xml';
            }

            // loading the cover xml here
            coverflowXMLLoader = new URLLoader();
            coverflowXMLLoader.load(new URLRequest("xml/data.xml"));
            coverflowXMLLoader.addEventListener(Event.COMPLETE, coverflowXMLLoader_Complete);
            coverflowXMLLoader.addEventListener(IOErrorEvent.IO_ERROR, coverflowXMLLoader_IOError);

        }

        // parse the XML
        private function coverflowXMLLoader_Complete(e:Event):void {
            coverflowXML=new XML(e.target.data);
            coverflowItemsTotal=coverflowXML.cover.length();
            coverflowSpacing=Number(coverflowXML.@coverflowSpacing);
            coverflowImageWidth=Number(coverflowXML.@imageWidth);
            coverflowImageHeight=Number(coverflowXML.@imageHeight);
            coverLabelPositionY=Number(coverflowXML.@coverLabelPositionY);
            coverSlidePositionY=Number(coverflowXML.@coverSlidePositionY);
            transitionTime=Number(coverflowXML.@transitionTime);
            centerCoverflowZPosition=Number(coverflowXML.@centerCoverflowZPosition);

            //Image Border
            padding = Number(coverflowXML.@imagePadding)

            //Reflection Attributes
            reflectionAlpha=Number(coverflowXML.@reflectionAlpha);
            reflectionRatio=Number(coverflowXML.@reflectionRatio);
            reflectionDistance=Number(coverflowXML.@reflectionDistance);
            reflectionUpdateTime=Number(coverflowXML.@reflectionUpdateTime);
            reflectionDropoff=Number(coverflowXML.@reflectionDropoff);

            startIndex=Number(coverflowXML.@startIndex);
            startIndexInCenter = (coverflowXML.@startIndexInCenter.toLowerCase().toString()=="yes");
            _target=coverflowXML.@target.toString();

            for (var i=0; i<coverflowItemsTotal; i++) {

                //Make An Object To Hold Values
                var _obj:Object = new Object();

                //Set Values To Object from XML for each CoverflowItem
                _obj.image = (coverflowXML.cover[i].@img.toString());
                _obj.title = (coverflowXML.cover[i].@title.toString());
                _obj.link = (coverflowXML.cover[i].@link.toString());
                _data[i] = _obj;

            }
            loadCover();
        }

        private function coverflowXMLLoader_IOError(event:IOErrorEvent):void {
            trace("Coverflow XML Load Error: "+ event);
        }

        // load the image cover when xml is loaded
        private function loadCover():void {

            for (var i:int = 0; i < coverflowItemsTotal; i++) {
                var cover:Sprite=createCover(i,_data[i].image);
                coverArray[i]=cover;
                cover.y=centerY;
                cover.z=0;
                coverflowItemContainer.addChild(cover);
            }

            if (startIndexInCenter) {
                startIndex=coverArray.length>>1;
                gotoCoverflowItem(startIndex);

            } else {

                gotoCoverflowItem(startIndex);

            }
            _currentCover=startIndex;
            coverSlider=new Scrollbar(coverflowItemsTotal,_stage);
            coverSlider.value=startIndex;
            coverSlider.x = (_stage.stageWidth/2) - (coverSlider.width/2);
            coverSlider.y=_stage.stageHeight-40;
            coverSlider.addEventListener("UPDATE", coverSlider_Update);
            coverSlider.addEventListener("PREVIOUS", coverSlider_Previous);
            coverSlider.addEventListener("NEXT", coverSlider_Next);
            addChild(coverSlider);

            //coverLabel.x = (sw - coverLabel.width)>>1;
            coverLabel.x = (_stage.stageWidth/2) - (coverLabel.width/2);
            coverLabel.y=coverLabelPositionY;
            addChild(coverLabel);

            addChild(coverSlider);
            addChild(coverLabel);

        }

        private function coverSlider_Update(e:Event):void {
            var value:Number=(coverSlider.value);
            gotoCoverflowItem(value);
            e.stopPropagation();
        }

        private function coverSlider_Previous(e:Event):void {
            clickPre();
        }

        private function coverSlider_Next(e:Event):void {
            clickNext();
        }

        // move to a certain cover via number
        private function gotoCoverflowItem(n:int):void {
            _currentCover=n;
            reOrderCover(n);
            if (coverSlider) {
                coverSlider.value=n;
            }
        }

        private function cover_Selected(event:CoverflowItemEvent):void {

            var currentCover:uint=event.data.id;

            if (coverArray[currentCover].rotationY==0) {
                try {
                    // open the link if user click the cover in the middle again
                    if (_data[currentCover].link!="") {
                        navigateToURL(new URLRequest(_data[currentCover].link), _target);
                    }

                } catch (e:Error) {
                    //
                }

            } else {
                gotoCoverflowItem(currentCover);

            }

        }

        // change each cover's position and rotation
        private function reOrderCover(currentCover:uint):void {
            for (var i:uint = 0, len:uint = coverArray.length; i < len; i++) {
                var cover:Sprite=coverArray[i];

                if (i<currentCover) {
                    //Left Side
                    TweenLite.to(cover, transitionTime, {x:(centerX - (currentCover - i) * coverflowSpacing - coverflowImageWidth/2), z:(coverflowImageWidth/2), rotationY:-65});
                } else if (i > currentCover) {
                    //Right Side
                    TweenLite.to(cover, transitionTime, {x:(centerX + (i - currentCover) * coverflowSpacing + coverflowImageWidth/2), z:(coverflowImageWidth/2), rotationY:65});
                } else {
                    //Center Coverflow
                    TweenLite.to(cover, transitionTime, {x:centerX, z:centerCoverflowZPosition, rotationY:0});

                    //Label Handling
                    coverLabel._text.text=_data[i].title;
                    coverLabel.alpha=0;
                    TweenLite.to(coverLabel, 0.75, {alpha:1,delay:0.2});

                }
            }
            for (i = 0; i < currentCover; i++) {
                addChild(coverArray[i]);
            }
            for (i = coverArray.length - 1; i > currentCover; i--) {
                addChild(coverArray[i]);
            }

            addChild(coverArray[currentCover]);
            if (coverSlider) {
                addChild(coverSlider);
                addChild(coverLabel);
            }
        }

        //Create CoverflowItem and Set Data To It
        private function createCover(num:uint, url:String):Sprite {

            //Setup Data
            var _data:Object = new Object();
            _data.id=num;

            //Create CoverflowItem
            var cover:CoverflowItem=new CoverflowItem(_data);

            //Listen for Click
            cover.addEventListener(CoverflowItemEvent.COVERFLOWITEM_SELECTED, cover_Selected);

            //Set Some Values
            cover.name=num.toString();
            cover.image=url;
            //cover.padding=padding;
            cover.imageWidth=coverflowImageWidth;
            cover.imageHeight=coverflowImageHeight;
            cover.setReflection(reflectionAlpha, reflectionRatio, reflectionDistance, reflectionUpdateTime, reflectionDropoff);

            //Put CoverflowItem in Sprite Container
            var coverItem:Sprite = new Sprite();
            cover.x=- coverflowImageWidth/2-padding;
            cover.y=- coverflowImageHeight/2-padding;
            coverItem.addChild(cover);
            coverItem.name=num.toString();

            return coverItem;
        }

    }
} 
```

请注意，还有 6 个脚本文件，分别命名为：CoverflowItem.as、CoverflowItemEvent.as、Main.as、Reflect.as、Scrollbar.as、ScrollbarEvent.as。

我希望解决方案在上面的脚本文件中。如果熟悉AS的人能给我指出一个好的方向，我会非常高兴！

对不起，如果我的英语不是很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:49:38.027

该组件从名为`data.xml`. 在那个 XML 文件中设置`imagePadding="0"`应该去掉边框。

# xcode - 如何在 tableView 的单元格中只显示一次 imageView？

> ID：14493692
> 
> 赞同：0
> 
> 时间：2013-01-24T03:56:18.937
> 
> 标签：xcode, imageview, tableview

我正在开发一个使用 TableView 的应用程序。我想添加一个 ImageView 来帮助用户在详细视图上进行操作。换句话说，当用户点击表格视图中的一个单元格时，图像视图**仅在详细视图上显示一次**，以帮助用户操作。

我应该怎么做才能实现这样的规范？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T21:33:41.260

也许您可以给 TableViewController 一个 BOOL 属性（例如，称为 shouldHideHelperImage），它可以初始化为 NO。打开详细视图时，您可以使用该属性来确定您的 ImageView 是否应该隐藏。

```
[imageView setHidden:[<TableViewContoller name> shouldHideHelperImage]];
[<TableViewController name> setShouldHideHelperImage:YES]; 
```

您必须将该值保存到文件中以保持持久性。我建议将它作为 TableViewController 的属性而不是你的 detailViewController 的原因只是为了减少保存和调用它的频率。

我希望这会有所帮助！- 虽然现在你可能已经解决了。

# python - 如何缩短此 if 语句？

> ID：14493694
> 
> 赞同：2
> 
> 时间：2013-01-24T03:56:42.620
> 
> 标签：python, if-statement

我有这个函数来检查我们在通过坐标系时所面对的方向，通过查看元组中的值与航点列表中的下一个值相比如何增加或减少。看代码，感觉很复杂，很笨拙：

```
a.facing = self.direction(a.travel_list[0], a.travel_list[1])

def direction(self, start, end):
    s_width = start[0]
    s_height = start[1]
    e_width = end[0]
    e_height = end[1]
    # check directions
    if s_height < e_height:
        if s_width < e_width:
            return 'right'
        elif s_width > e_width:
            return 'up'
        else:
            return 'up_right'

    elif s_height > e_height:
        if s_width < e_width:
            return 'down'
        elif s_width > e_width:
            return 'left'
        else:
            return 'down_left'

    elif s_height == e_height and s_width < e_width:
        return 'down_right'
    else:
        return 'up_left' 
```

返回值被调整为顺时针旋转一步。我的问题是，我们如何更改代码以使函数更短、更高效？

编辑：请注意，移动只能在指定的 8 个方向上发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T04:05:19.977

使用基于*cmp()*返回值的字典：

```
def direction(self, start, end):
    return table[cmp(start[0], end[0]), cmp(start[1], end[1])] 
```

构建字典以总结您当前的逻辑：

```
table = {
    (-1, -1): 'right',
    (-1, 1):  'up',
    (-1, 0):  'up_right',
       ...
} 
```

如果您使用的是 Python 3，则需要将自己的*cmp()*函数定义为：

```
cmp = lambda x, y:  -1 if x < y else 1 if x > y else 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T04:11:23.017

稍微改变一下你的函数，你可以用一个简单的函数定义返回一个方向列表：

```
def direction(self, start, end):
    delta = (end[0] - start[0], end[1] - start[1])

    s = []

    if delta[1]>0 : s.append("up")
    elif delta[1]<0 : s.append("down")

    if delta[0]>0 : s.append("right")
    elif delta[0]<0 : s.append("left")

    return s 
```

这里 s 将包含 0、1 或 2 个成员，具体取决于行进方向。如果没有移动，列表将为空。

如果您特别需要您指定格式的返回值，那么您可以简单地从列表中提取值并根据需要进行解析。

* * *

我不完全理解您对顺时针移位的需求，但如果那不可更改，那么我建议最初使用一些更短/更简单的值作为占位符，然后使用字典来处理用所需文本替换占位符以及顺时针移位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T04:03:53.970

第 1 步：获取 y 和 x 距离

第 2 步：调用 atan2(x, y) 以获取角度 ( [http://docs.python.org/2/library/math.html#math.atan2](http://docs.python.org/2/library/math.html#math.atan2) )

第 3 步：除以 pi/4 并四舍五入到最接近的整数，得到 -4 和 4 之间的值

第 4 步：现在您可以进行大小写/切换，这些值中的每一个都将是不同的基本方向（-4 和 4 将是相同的方向，例如都向东）

编辑：我刚刚意识到这仅在您考虑例如比东部高出 10 度时才有效。XD 让我想一个更好的...

编辑2：好的，试试这个：

第 1 步：创建一个包含两个值的元组

第 2 步：值 1 = cmp(x1, x2)

第 3 步：值 2 = cmp(y1, y2)

第 4 步：在元组表中查找方向（例如，0,1 是北，0,-1 是南，1,1 是东北等）并返回结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T04:09:06.233

您可以使用`and`运算符：

```
a.facing = self.direction(a.travel_list[0], a.travel_list[1])

def direction(self, start, end):
    s_width, s_height, e_width, e_height = start[0], start[1], end[0], end[1]
    # multiple assignments
    # check directions
    if s_height < e_height and s_width < e_width:
        return 'right' 
    elif s_height < e_height and s_width > e_width:
        return 'up'
    elif s_height < e_height: # this will get executed if the top two are false
        return 'up_right'     # its similar to using the `else` in a nested conditional
    elif s_height > e_height and s_width < e_width:
        return 'down'
    elif s_height > e_height and s_width > e_width:
        return 'left'
    elif s_height > e_height:
        return 'down_left'
    elif s_height == e_height and s_width < e_width:
        return 'down_right'
    else:
        return 'up_left' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T06:15:39.977

如果您的原始代码是正确的，那么您的映射有一些我不明白的地方。假设开始是（宽度，高度），正如你所说的那样，或者我在下面使用的（x，y），并假设 x 向右增加并且 y 增加（数学中的常见情况，但你的要求似乎是略有不同），这是一种简明的方法来判断 end 相对于 start 的位置（使用您的字符串名称集）：

```
DIR_STR_LIST  = ("up", "down", "right", "left")

def direction3((sx, sy), (ex, ey)):
    conds = (sy < ey, ey < sy, sx < ex, ex < sx)
    istr = DIR_STR_LIST.__iter__()
    return '_'.join([istr.next() for c in conds if c or not istr.next()]) 
```

当为假`or not istr.next()`时，需要推进迭代器。`c`

虽然这*很*简洁，但它比我想要的要丑一些。我认为它*可能*比原始代码执行得更好（因为列表理解**很快**），但在这种情况下，简单性对性能更好。原始代码快了 5 倍（哎哟！）。

# android - 如何从片段访问父活动中的 UI 元素

> ID：14493700
> 
> 赞同：31
> 
> 时间：2013-01-24T03:58:01.317
> 
> 标签：android

父活动布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".LockerCodeActivity" >

    <LinearLayout
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
    </LinearLayout>

    <ProgressBar
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:id="@+id/ctrlActivityIndicator"
        android:indeterminateOnly="true"
        android:keepScreenOn="false"
     />

    <TextView
        android:id="@+id/tv_results"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="" />

</RelativeLayout> 
```

在父活动 onCreate 函数中为片段充气

```
FragmentManager fragmentManager = getFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    Fragment scannerFragment = new ScanFragment();
    fragmentTransaction.add(R.id.fragment_container, scannerFragment);
    fragmentTransaction.commit(); 
```

到目前为止工作得很好......现在我该如何隐藏进度条？这是我尝试过的

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_scan, container, false);

    ProgressBar progressBar = (ProgressBar) view.findViewById(R.id.ctrlActivityIndicator);
    progressBar.setVisibility(View.INVISIBLE);
    return view;
    } 
```

我得到一个空指针异常

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-24T03:59:51.327

既然你想要 Activity 的视图，你会想要这样做：

```
ProgressBar progressBar = (ProgressBar) getActivity().findViewById(R.id.ctrlActivityIndicator); 
```

您调用`getActivity()`以获取 Activity 实例，然后`findViewById()`正常使用（前提`R.id.ctrlActivityIndicator`是它是 Activity 布局的一部分，您将不会获得 NPE）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-16T22:22:16.603

这对我不起作用，我将 getActivity 的结果转换为父活动。请参阅下面的链接： [从片段中调用父级的活动](https://stackoverflow.com/questions/14354279/call-parents-activity-from-a-fragment)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-08T17:28:53.490

您可以使用：

```
((ParentActivity)getActivity()).UI_COMPONENT_NAME 
```

访问父活动的 ui 组件。

UI_COMPONENT_NAME 是在 ParentActivity 中初始化的组件的名称。

# php - 如何将3个下拉列表中的值插入mysql的1列

> ID：14493703
> 
> 赞同：1
> 
> 时间：2013-01-24T03:58:10.337
> 
> 标签：php, mysql, date, drop-down-menu

如何将3个下拉列表中的值插入mysql的1列

我正在使用 php。

我有一个表格，其中包含 3 个日期下拉列表，1\. Day 2\. Month 3\. Year

如何将它们作为 1 个日期值插入 mysql 中的 1 列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:06:51.163

```
$day = $_POST['day'];
$month = $_POST['month'];
$year = $_POST['year'];

$date = $month." ".$day.",".$year; 

$query = "INSERT INTO table_name(my_column) VALUES(STR_TO_DATE('$date','%d,%m,%Y'))"; 
```

`$date`使用 (.) 点连接运算符将下拉选择的值组合成单个字符串 ，并将其传递给**`STR_TO_DATE()`**将字符串转换为日期的函数。

因此，假设您将字符串**May 1,2013**传递给`STR_TO_DATE()`函数，插入的值是日期时间类型`2013-05-01`。

例如。

```
mysql> SELECT STR_TO_DATE('01,5,2013','%d,%m,%Y');
        -> '2013-05-01' 
```

或者

```
mysql> SELECT STR_TO_DATE('May 1, 2013','%M %d,%Y');
        -> '2013-05-01' 
```

现在以全月名称格式使用**`DATE_FORMAT()`**函数显示此日期时间值。

```
mysql> SELECT DATE_FORMAT('2013-05-01',  %M %d %Y');
        -> 'May 1 2013' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T04:03:08.353

```
$year = $_POST['year_column'];    //YYYY
// Updated
// Cause you have months as String like January
$month = date('m', strtotime($_POST['month_column']));  //Return MM
$day = $_POST['day_column'];    //DD

$newDate = $year . '-' . $month . '-' . $day; 
```

现在将`$newDate`变量插入到您的数据库中，这`datetime`是您`date_field`在 mysql 中的另一种数据类型。

**更新：**

```
$months = array(1=>'January', 'February', ...); // Your Months in array
echo "<select name='month_column'>";
foreach( $months as $key=>$month){
echo "<otpion value='$key'>$month</option>";
}
echo "</select>"; 
```

如果您已`January`命名月份，请查看此示例[http://codepad.org/p3pqbSlB](http://codepad.org/p3pqbSlB)这将您的月份转换为`datetime`兼容。

你也应该看看 PHP 的[date()](http://php.net/manual/en/function.date.php)函数。

请享用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:02:55.440

确保该列是日期类型

然后将 3 个下拉列表中的值连接到日期字符串中

```
 // proper input for date into mysql = "Y-m-d" ("2013-01-23")
$dateString = $year . "-" . $month . "-" . $day; 
```

# perl - 在 perl 脚本中运行 awk 命令

> ID：14493704
> 
> 赞同：0
> 
> 时间：2013-01-24T03:58:17.453
> 
> 标签：perl

想在 perl 的 backtik 运算符中运行 awk 命令。它给了我一个错误。我尝试转义引号，管道但似乎没有任何效果。

```
my @fieldCnt=`head -1 $inputFileDir/$cmdParams{mas}|awk -F, \'print NF\'`; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T04:46:15.127

我只会在 perl 脚本中执行此操作，而不是使用 awk。如果我了解您要实现的目标，则您正在查找以逗号分隔的行中的项目数，然后

```
 # Open the file for reading
 open my $fh,"$cmdParams{mas}" or die "Unable to open: $cmdParams{mas}";
 my $firstLine = <$fh>;  # Get the first line
 close($fh);  # close the file
 my @items = split(',',$firstLine);  # Get the items separated by comma's
 $numberOfFields = scalar(@items);   # Get the count of the number of items 
```

希望这会有所帮助。

# mysql - MySQL 字段值未以 UTF8 显示正确字符

> ID：14493705
> 
> 赞同：0
> 
> 时间：2013-01-24T03:58:23.693
> 
> 标签：mysql, character-encoding

我试着保存这个字符串

```
ŸeÈ╬fý↔5ƒ1 
```

到 varchar(1000) 的字段和排序规则为 utf8_general_ci 的表

当我尝试在文本字段中显示此字段时，我得到了这个值

```
ŸeÈ?fý?5ƒ1 
```

为什么不能正确显示所有字符？

附言

我已经设置了这个标签

```
<meta charset="utf-8"/> 
```

在头上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:22:41.603

答案是字段排序规则本身需要设置为 utf8。我用了

```
utf8_general_ci 
```

它奏效了。

附言

支持@theunlucky 给我一个问题的线索。

# ios - 如何在后台清除应用程序的所有子视图

> ID：14493706
> 
> 赞同：1
> 
> 时间：2013-01-24T03:58:35.887
> 
> 标签：ios, view, background-process

我使用从斯坦福讲座中借来的以下代码放置了一个子视图（一个数字），然后将视图“旋转”到下水道。一切正常，除非当屏幕上有数字时应用程序进入后台。当它回来时，数字被冻结。我认为当它进入后台时我需要清除所有子视图，但我很难做到这一点。有什么建议么？这是我从斯坦福讲座“借来”的代码。

```
- (void)drain
{
    for (UIView *view in self.firstView.subviews) {
        CGAffineTransform transform = view.transform;
        if (CGAffineTransformIsIdentity(transform)) {
            UIViewAnimationOptions options = UIViewAnimationOptionCurveLinear;
            [UIView animateWithDuration:DRAIN_DURATION/3 delay:0 options:options animations:^{
                view.transform = CGAffineTransformRotate(CGAffineTransformScale(transform, 0.7, 0.7), 2*M_PI/3);
            } completion:^(BOOL finished) {
                if (finished) {
                    [UIView animateWithDuration:DRAIN_DURATION/3 delay:0 options:options animations:^{
                        view.transform = CGAffineTransformRotate(CGAffineTransformScale(transform, 0.4, 0.4), -2*M_PI/3);
                    } completion:^(BOOL finished) {
                        if (finished) {
                            [UIView animateWithDuration:DRAIN_DURATION/3 delay:0 options:options animations:^{
                                view.transform = CGAffineTransformScale(transform, 0.1, 0.1);
                            } completion:^(BOOL finished) {
                                if (finished) [view removeFromSuperview];
                            }];
                        }
                    }];
                }
            }];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:17:15.177

您需要在应用程序委托的确实进入后台方法中执行这段代码 - applicationDidEnterBackground：

```
if ([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)]) { //Check if your iOS version supports multitasking I.E iOS 4
    if ([[UIDevice currentDevice] isMultitaskingSupported]) { //Check if device supports mulitasking
        UIApplication *application = [UIApplication sharedApplication]; //Get the shared application instance
        __block UIBackgroundTaskIdentifier background_task; //Create a task object
        background_task = [application beginBackgroundTaskWithExpirationHandler: ^ {

        [application endBackgroundTask: background_task]; //Tell the system that we are done with the tasks
            background_task = UIBackgroundTaskInvalid; //Set the task to be invalid
            //System will be shutting down the app at any point in time now
        }];
        //Background tasks require you to use asyncrous tasks
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            //Perform your tasks that your application requires

 // Call your drain method here or raise a notification if this drain is not in the app delegate

            NSLog(@"\n\nRunning in the background!\n\n");
            [application endBackgroundTask: background_task]; //End the task so the system knows that you are done with what you need to perform
            background_task = UIBackgroundTaskInvalid; //Invalidate the background_task
        });
    }
} 
```

希望这可以帮助。

# c - 显示在给定地址 gdb 找到的值

> ID：14493707
> 
> 赞同：24
> 
> 时间：2013-01-24T03:58:45.800
> 
> 标签：c, linux, assembly, gdb, x86

我正在调试 gdb 中的二进制文件。它是由 gcc 在 Intel IA-32 上编译的 C 代码。我从`objdump`. 我最感兴趣的是这里的最后一行：

```
08048d9e <func_1>
8048d9e:    55                      push   %ebp
8048d9f:    89 e5                   mov    %esp,%ebp
8048da1:    83 ec 18                sub    $0x18,%esp
8048da4:    c7 44 24 04 88 99 04    movl   $0x8049988,0x4(%esp)
8048dab:    08 
8048dac:    8b 45 08                mov    0x8(%ebp),%eax
8048daf:    89 04 24                mov    %eax,(%esp)
8048db2:    e8 54 01 00 00          call   8048f0b <strings_not_equal> 
```

我相信最后一行将比较在指定地址找到的值：`8048f0b`。我尝试：

```
(gdb) x 0x8048f0b 
```

并收到：

```
0x8048f0b <strings_not_equal>:  0x57e58955 
```

我是否错误地解释了程序集？这是在 gdb 中读取地址值的正确方法吗？我有点期待找到一个对 ascii 更友好的十六进制值。我有兴趣找到与之比较的存储字符串值。

您是否还有喜欢用于此类调试的最喜欢的 gui 工具？我一直在考虑尝试ddd。我想找到一种更简单的调试方法。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-24T04:07:57.390

您正在正确读取内存地址处的值`0x8048f0b`，但该行`call 8048f0b <strings_not_equal>`表明该地址是函数的开始（称为`strings_not_equal()`）。你不会期望它是 ASCII - 你会期望它是更多的机器代码。

如果您正在寻找 的函数参数`strings_not_equal()`，它们将被推入堆栈。第一个参数是从 复制的`0x8(%ebp)`，它是 的第一个参数`func1()`。第二个参数是`$0x8049988`，大概是一个字符串的地址。

如果要将地址的内容打印为字符串，可以使用`x/s`：

```
x/s 0x8049988 
```

# java - org.objectweb.asm.commons.LocalVariablesSorter 是否未正确优化？

> ID：14493710
> 
> 赞同：0
> 
> 时间：2013-01-24T03:59:20.807
> 
> 标签：java, java-bytecode-asm

我正在尝试使用 ASM 将方法包装在 try/finally 块中。具体来说，我正在扩展`org.objectweb.asm.commons.AdviceAdapter`并遵循“3.2.3 在方法退出前插入代码”下描述的[“使用 ASM 框架实现常见字节码转换模式”的技术。](http://asm.ow2.org/current/asm-transformations.pdf)

我还使用`LocalVariablesSorter`（的超类`AdviceAdapter`）在我在 finally 块中使用的方法 start 处添加一个局部变量。

我有一个尝试用 ASM 修改的方法。该方法需要三个参数，并且没有自己的局部变量：

```
class Example {
    public static int f4(int i, long l, int f) {
        return (int) (i + l + f);
    }
} 
```

由于我的`finally`块可能是异常处理程序目标，因此我添加了一个调用 so `super.visitFrame(F_NEW, ...)`，传递方法参数。由于这调用了超类，我希望我的 newLocal 被添加到这个框架中`LocalVariablesSorter`。但是当通过我的 ASM 管道运行它时，Java 7 给了我错误`java.lang.VerifyError: Bad local variable type in method Example.f4(IJI)I at offset 32`。

在方法中查看的[来源`LocalVariablesSorter`](http://websvn.ow2.org/filedetails.php?repname=asm&path=%2Ftrunk%2Fasm%2Fsrc%2Forg%2Fobjectweb%2Fasm%2Fcommons%2FLocalVariablesSorter.java)`visitFrame`，我看到它有一个布尔值`changed`，如果没有更改，则`visitFrame`跳过对我可能创建的任何新本地人的任何考虑。此布尔值似乎仅在上游字节码对由于用于创建新`changed`局部变量而必须重新映射的变量执行某些操作时设置（并且在上述方法中没有发生此类操作）。`LocalVariablesSorter``f4()`

通过应用此解决方法：

```
 Field field = LocalVariablesSorter.class.getDeclaredField("changed");
       field.setAccessible(true);
       field.setBoolean(this, true); 
```

我能够通过 Java 7 的验证程序。此外，使用`TraceClassVisitor`ASM 实用程序，我在 finally 块开始之前看到堆栈映射帧的差异：

前：

```
FRAME FULL [I J I] [java/lang/Throwable] 
```

在我的反射破解之后（我添加的新本地是一个 int）：

```
FRAME FULL [I J I I] [java/lang/Throwable] 
```

我知道我没有共享任何周围的代码，但我的问题更笼统。这个`changed`布尔值是错误的优化`LocalVariablesSorter`吗？还是我以某种方式滥用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:46:55.200

该`LocalVariablesSorter.visitFrame(..)`调用不添加任何本地变量，它仅通知 ASM 记录有关附加帧的信息。您需要通过调用添加本地人`LocalVariablesSorter.newLocal(..)`。

虽然一般来说，如果您认为您在 ASM 中发现了错误，最好将错误报告提交给[ASM 问题跟踪器](http://forge.ow2.org/tracker/?group_id=23)并提供允许重现问题的测试代码（例如测试类和完整的转换）。

# php - PDO 返回数组('value1','value2')

> ID：14493712
> 
> 赞同：-1
> 
> 时间：2013-01-24T03:59:24.807
> 
> 标签：php, mysql, arrays, pdo

我使用一个 select sql 语句 PDO fetchData，

```
$user = 'admin';
sql = 'SELECT AccessPage FROM accessrights where UserName = '$user''; 
```

在数据库中，结果如下所示：

```
-----------
Access Page
-----------
 - index

 + create

 - update 
```

我会将它存储在变量 $result 中

我怎样才能将 $result 格式设置为这样的数组？

```
$result = array('index','create','update'); 
```

另一个问题，

我在我的函数中使用了代码：但是当我 var_dump 时，它会返回一个 array(0) { } 值。

这是我的功能：

```
 $user = CHtml::encode(Yii::app()->user->name);

    $connectionString[0] = Yii::app()->params['dbhandler2'];
    $dbhandler3 = new DBHandler($connectionString[0]);
    $dbhandler3->open();

    $dbhandler3->prepare("SELECT AccessPage FROM accessrights where UserName ='$user'");
    $dbhandler3->execute();
    $this->result2 = $dbhandler3->fetchAllData();
    $dbhandler3->close();

    $yourarrayname = array();
    while ($row = $dbhandler3->fetchAllData()) {
        $yourarrayname[] = $row['AccessPage'];
    }

    $this->access = $yourarrayname; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:05:39.987

使用下面的代码

```
 $user = 'admin';
 $sql = "SELECT AccessPage FROM accessrights where UserName = '$user'";
 $sth = $dbh->prepare($sql);
 $sth->execute();

 /* Fetch all of the values of the first column */
 $result = $sth->fetchAll(PDO::FETCH_COLUMN, 0);
 print_r($result); // the $result will be array  array('index','create','update'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:03:41.180

我假设`index`,`create`和`update`是列值，并且您希望它们在“普通”数组中。默认值是将结果存储为整数和列名键。您想将 fetchmode 设置为整数键：`$stmt->setFetchMode(PDO::FETCH_NUM)`或`$stmt->fetch(PDO::FETCH_NUM)`. [http://php.net/manual/en/pdostatement.setfetchmode.php](http://php.net/manual/en/pdostatement.setfetchmode.php) http://php.net/manual/en/pdostatement.fetch.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:22:05.147

首先，我假设您只有一列 Accesspage，并且在该列中您已经保存了三行索引、创建、更新。当您搜索用户的**Accesspage**值时`$user`。这将返回分配给 $user 的值。

```
$user = 'admin';
$sql = 'SELECT AccessPage FROM accessrights where UserName = '$user'';
$sth = $dbh->prepare($sql);
$sth->execute();
$result = $sth->fetch(PDO::FETCH_ASSOC);
print_r($result); 
```

现在这个 $result 是一个关联数组，键为“ **AccessPage** ”

如果你想制作一个数组，那么你应该像这样尝试

```
$yourarrayname=array();
while ($row = $sth->fetch(PDO::FETCH_ASSOC))
{
 $yourarrayname[]= $row['AccessPage'] ; 
}

print_r($yourarrayname); 
```

# regex - 使用正则表达式从 URL 末尾修剪垃圾文本

> ID：14493713
> 
> 赞同：-1
> 
> 时间：2013-01-24T03:59:25.827
> 
> 标签：regex

我发现一个客户在谷歌网站管理员工具中存在混乱——数百个页面，其中网站名称以某种方式附加到 URL 上——所有这些显然都会产生 404 错误。

幸运的是，字符串总是相同的。“网站 %20 名称”

所以我需要做的是：

博客/类别/帖子名称/网站%20Name

转换为：

博客/类别/帖子名称/

假设一点正则表达式代码将是最简单的解决方案。

无法在其他地方找到这个例子。

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:03:48.310

这是正则表达式：

```
/Website%20Name$/ 
```

# ios - 核心定位不断循环

> ID：14493714
> 
> 赞同：0
> 
> 时间：2013-01-24T03:59:29.947
> 
> 标签：ios, core-location, infinite-loop

我基本上是从这个 CoreLocation iOS 教程开始的，以了解如何在我的应用程序中实现 CoreLocation。（[http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_Location_Application](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_Location_Application)）

但是我在尝试将本教程合并到我的应用程序时遇到的是，它现在只是一遍又一遍地循环，这让我感到困惑。有人可以帮忙吗？

GPSViewController.h

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>

@interface GPSViewController : UIViewController
@property (strong, nonatomic) CLLocationManager *locationManager;
@property (strong, nonatomic) CLLocation *startLocation;
@end 
```

GPSViewController.m

```
#import "GPSViewController.h"

#import "DataClass.h"

@interface GPSViewController ()

@end

@implementation GPSViewController
@synthesize locationManager, startLocation;

DataClass *obj;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    //initialization og global varable.
    DataClass *obj=[DataClass getInstance];

    //GPS Initialise
    self.locationManager = [[CLLocationManager alloc] init];
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.delegate = self;
    [locationManager startUpdatingLocation];
    startLocation = nil;

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark -
#pragma mark CLLocationManagerDelegate

-(void)locationManager:(CLLocationManager *)manager
   didUpdateToLocation:(CLLocation *)newLocation
          fromLocation:(CLLocation *)oldLocation
{
    NSString *currentLatitude = [[NSString alloc]
                                 initWithFormat:@"%g",
                                 newLocation.coordinate.latitude];
    //latitude.text = currentLatitude;
    obj.Latatude = currentLatitude;

    NSString *currentLongitude = [[NSString alloc]
                                  initWithFormat:@"%g",
                                  newLocation.coordinate.longitude];
    //longitude.text = currentLongitude;
    obj.Longitude = currentLongitude;

    NSLog(@"latitude %+.6f, longitude %+.6f\n",
          newLocation.coordinate.latitude,
          newLocation.coordinate.longitude);

    if(obj.Latatude != NULL && obj.Longitude != NULL){
        [self performSegueWithIdentifier:@"GPSSuccess" sender:self];
    }
}

-(void)locationManager:(CLLocationManager *)manager
      didFailWithError:(NSError *)error
{
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.startLocation = nil;
    self.locationManager = nil;
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T04:32:03.143

您应该调用`[locationManager stopUpdatingLocation];`以阻止它一遍又一遍地获取用户的位置。

# javascript - 从 localhost 调用时 auth.login 根本没有被触发，并且 auth.logout 在注销后需要很长时间才能被触发

> ID：14493715
> 
> 赞同：0
> 
> 时间：2013-01-24T03:59:30.883
> 
> 标签：javascript, facebook

当我从 localhost 运行脚本时，auth.login 根本没有被触发。半小时后，一旦我从 facebook 注销 auth.logout 事件被触发。谁能告诉我原因并建议我任何事情。我正在通过以下方式进行操作：

```
 window.fbAsyncInit = function() {
    FB.init({
        appId: "472581889444408",
        status: true,
        xfbml: true,
        oauth: true
       }); 

    FB.Event.subscribe('auth.statusChange', function(response){alert("status changed");});
    FB.Event.subscribe('auth.authResponseChange', function(response){alert("authResponse changed");});
    FB.Event.subscribe('auth.login', function(response){alert("log in");});
    FB.Event.subscribe('auth.logout', function(response){alert("log out");});

     }; 
```

# ios - 目标 c 何时使用 NSDictionary 而不是 NSArray

> ID：14493725
> 
> 赞同：2
> 
> 时间：2013-01-24T03:59:56.527
> 
> 标签：ios, objective-c, xcode, nsmutablearray, nsmutabledictionary

对于我应该使用两者中的哪一个，我处于两难境地。我将通过一个restful API（返回json）检索一组数据，我不确定在我的UI视图表上显示之前我应该​​如何存储它们。

例如。

```
{"Events":[{"Id":5,"Name":"Event 1 2013"},{"Id":6,"Name":"Event 2 2013"}]} 
```

我一直在阅读教程，有些人会使用 NSMutableArrays，而有些人会使用 NSMutableDictionary。

我应该怎么做？

**顺便说一句：我在 UI 视图表上显示数据，当点击时会将用户重定向到另一个页面，如果他们决定返回，则必须显示前一个视图而不重新加载（使用 UinavigationController）**

谢谢！

**编辑：**

另外，只是为了让您了解我正在尝试做的事情。我正在尝试按照本教程将我得到的数据拆分为节标题。在本教程中，它使用 NSDictionary。

[http://www.icodeblog.com/2010/12/10/implementing-uitableview-sections-from-an-nsarray-of-nsdictionary-objects/](http://www.icodeblog.com/2010/12/10/implementing-uitableview-sections-from-an-nsarray-of-nsdictionary-objects/)

如果我使用 NSArray，会影响性能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T05:52:56.930

在 NSArray - 集合中的每个项目都有一个整数索引，因此项目有一个明确的顺序。当您从 NSARRY 检索/替换/删除存储对象时，您需要指定该存储对象的相应对象索引。

NSDictionary - 源自一个叫做 entry 的词。每个条目由一个表示键的对象和另一个表示键值的对象组成。在字典中，键是唯一的。也就是说，单个字典中没有两个键是相等的（由 isEqual 确定：）。当您从字典中检索对象时，您需要为[objectForKey](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/objectForKey%3a)指定键值 每当您解析 plist 然后 NSDictionary将是理想的。您可以[在此处参考苹果的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)以获取有关 NSDictionary.Happy 编码的更多解释 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T04:03:23.033

NSDictionaries 的查找时间比 NSArrays 快。这是主要优势之一。这是Apple 文档的[链接。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Articles/Dictionaries.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T04:02:26.127

通常，如果您需要以索引方式访问数据（例如您需要访问表中的行），那么您应该使用数组，因为您可以使用以下方式访问任何特定索引`indexOfObject:`

现在，如果每一行都有很多信息，那么您应该有一个自定义对象数组或字典数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T05:23:32.420

字典总是比数组快。字典将键映射到对象，就像哈希表一样。这是一个关联数组。

为了搜索一些值，您需要迭代数组，在字典中通过键检索它。

如果您希望集合按照某种排序顺序或到达顺序，那么 Array 是适合您的类型。

当您最终获得两个相同的键时，字典就会缺失。

而且我感觉很好将数组用于 tableViews，因为我可以直接将行与索引相关联。

# javascript - sublime 插件将 javascript 长文本转换为连接的小文本

> ID：14493729
> 
> 赞同：0
> 
> 时间：2013-01-24T04:00:47.053
> 
> 标签：javascript, sublimetext2

我想知道是否有一些崇高的插件可以让我从

```
var xx = 'long text long text long text long text long text long text long text long text long text'; 
```

进入

```
var xx = 
  'long text long text long text long text long text ' +
  'long text long text long text'; 
```

也来自

```
var xx =
  long text long text long text long text long text 
  long text long text long text 
```

至

```
var xx = 
  'long text long text long text long text long text ' +
  'long text long text long text'; 
```

你明白了

我搜索了一段时间（http://wbond.net/sublime_packages/community）但找不到类似的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:12:34.027

谁需要插件？

示例 1：

`0``f``'``h``s``Enter``gqq``k``A``' +``Esc``j``I``'``Esc`

示例 2：

`0``j``w``v``g``(underscore)``S``'``A``' +``Esc``j``0``w``v``g``(underscore)``S``'``A``;``Esc`

需要环绕插件。哦，还有 VIM ;)

# android - Android自定义视图中的widthMeasureSpec和heightMeasureSpec是什么？

> ID：14493732
> 
> 赞同：42
> 
> 时间：2013-01-24T04:01:03.827
> 
> 标签：android

我已经看到很多在 android 中创建自定义视图和布局的示例。我从他们那里学到的是 measure（如 Android 开发者网站上所说）方法是`onMeasure()`，它具有`widthMeasureSpec`和`heightMeasureSpec`作为参数。

1.  这些参数的实际含义是什么？
2.  它们的初始值是多少？
3.  如果我创建的自定义视图是我的活动的父视图，它们会被调用什么值？

我对这些问题真的很困惑。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2014-01-27T20:56:46.310

**widthMeasureSpec**和**heightMeasureSpec**是复合变量。这意味着虽然它们只是普通的旧整数，但它们实际上包含两个独立的数据。

存储在这些变量中的数据的第一部分是给定维度的可用空间（*以像素为单位）。*

您可以使用以下便捷方法提取此数据：

```
int widthPixels = View.MeasureSpec.getSize( widthMeasureSpec ); 
```

第二条数据是测量模式，它存储在 int 的高阶位中，并且是以下可能值之一：

```
View.MeasureSpec.UNSPECIFIED
View.MeasureSpec.AT_MOST
View.MeasureSpec.EXACTLY 
```

您可以使用这种便捷方法提取值：

```
int widthMode = View.MeasureSpec.getMode( widthMeasureSpec ); 
```

你可以做一些逻辑，改变其中一个或两个，然后使用最后一个方便的方法创建一个新的 meassureSpec：

```
int newWidthSpec = View.MeasureSpec.makeMeasureSpec( widthPixels, widthMode  ); 
```

然后把它传给你的孩子，通常是打电话`super.onMeasure( widthMeasureSpec, heightMeasureSpec );`

在`onMeasure()`MeasureSpec 模式中，用于传递您的视图及其子视图允许占用的最大允许空间。它还使用规范模式作为对子视图放置一些额外约束的一种方式，告知它们如何允许它们使用可用空间。

如何使用它的一个很好的例子是 Padding。ViewGroups 获取可用的宽度和高度，并减去它们的填充，然后创建一个新的 meassureSpec，从而将一个稍小的区域传递给它们的子级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-11T18:22:16.287

本文[将对](https://programming.vip/docs/the-process-of-customizing-view.html)您有所帮助。我从文章的上下文中回答你的问题。

***1\. 这些参数的实际含义是什么？***

**回答：**

`widthMeasureSpec`父视图强加给子视图的水平空间要求。

`heightMeasureSpec`父视图强加给子视图的垂直空间要求

***2\. 它们的初始值是多少？***

**回答：**

when `MODE_SHIFT`= 30 当值是 -

`MeasureSpec.UNSPECIFIED`= `0`<< `MODE_SHIFT`=`0`

`MeasureSpec.EXACTLY`= `1`<< `MODE_SHIFT`=`1073741824`

`MeasureSpec.AT_MOST`= `2`<< `MODE_SHIFT`=`2147483648`

***3\. 如果我创建的自定义视图是我的活动的父视图，它们被称为什么值？***

**答：** 这取决于您在父视图中给出的高度和宽度。您将在文章的最后一部分中对它有一个很好的了解，该部分还显示了我提到的下面的图表 -

[![在此处输入图像描述](../Images/b098a10901ecf3d9b81a107d5289d04f.png)](https://i.stack.imgur.com/7Iy8U.png)

# java - 如何在 String 对象上运行 K-means 算法？

> ID：14493735
> 
> 赞同：2
> 
> 时间：2013-01-24T04:01:31.597
> 
> 标签：java, google-app-engine, jakarta-ee, machine-learning, k-means

我正在做一个项目，我需要根据它们的相似程度对句子进行分组。

例如，这些句子需要分组到一个集群中：

1.  苹果第一季度的巨额收益仍然低于华尔街
2.  Apple 公布 2013 年第一季度收益：创纪录的 545 亿美元收入。
3.  苹果公布了创纪录的收入和利润；iPhone 销量跃升近 30%。

标题不断出现，所以我可能需要即时安排和修改集群。目前我正在使用 Monge-Elkan 算法来识别两个字符串的相似程度，但我不知道如何对它们进行聚类。

在互联网上搜索让我相信我需要使用 K-Means 算法对内容进行分组，但我不知道如何继续我拥有的内容。

让事情变得稍微复杂的是我将它托管在 Google App Engine 上，所以我不能使用文件系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:59:16.853

编辑距离度量不太可能有效地模拟句子含义的相似性，我假设你在追求。将文本低级表示为字符串也是如此。

更好的方法是使用更高级别的表示，例如[向量空间模型](http://en.wikipedia.org/wiki/Vector_space_model)。在这里，您收集句子集合（语料库）中的所有唯一单词，并将它们中的每一个映射到一个数字。然后将每个文档（句子）表示为一个向量：

[w1_count, w2_count, ..., wN_count]

其中第 N 个元素是给定句子中第 N 个单词（映射到数字 N 的单词）的计数。

现在你可以在这个数据集上运行 k-means，但更好：

1.  处理数据，使“Apple”等重要词的权重高于“on”或“in”等常用词。一种这样的技术是[TF-IDF](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)。然后用欧几里得距离在这个上面运行标准k-means。

2.  更好的是，使用更高级别的工具，例如[潜在语义分析](http://en.wikipedia.org/wiki/Latent_semantic_analysis)或[潜在狄利克雷分配](http://en.wikipedia.org/wiki/Latent_Dirichlet_allocation)。

如果您想使用现有方法，Simon G. 的回答为您指明了正确的方向，并且在[此问题](https://stackoverflow.com/questions/4064630/how-do-i-convert-between-a-measure-of-similarity-and-a-measure-of-difference-di)中回答了与距离覆盖的相似性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T04:41:04.113

首先，将您的相似之处变为不同之处，以便将它们视为距离

其次，使用多维缩放库将距离更改为空间中的点。

第三，对空间中的点使用常规 k-means。

# c++ - NetBeans 有 C 自动注释吗？

> ID：14493738
> 
> 赞同：3
> 
> 时间：2013-01-24T04:01:58.407
> 
> 标签：c++, c, netbeans

NetBeans 有 C 自动注释吗？

我安装了 NetBeans IDE 7.2.1 和 C/C++ 插件。

当我输入“/**”并按 Enter 时，它会自动生成如下代码。

```
/**
* @param param1
* @param param2
* @param param3
*/ 
```

我只是想知道我是否可以修改它生成的内容。

我想添加更多信息，如作者、日期、备注。

简单地说，我希望在输入“/**”并按如下所示按 Enter 时生成一些评论。（该函数已定义。）

```
/**
* @author
* @date
* @param param1
* @param param2
* @param param3
* @remark
*/
void do_something( struct sturct_one *param1, int param2, char *param3 )
{
   ...
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:07:54.947

简，

[有关添加源代码文档](http://netbeans.org/kb/docs/cnd/navigating-editing.html)的 NetBeans IDE 文档部分未提及自定义 Doxygen 模板的可能性。所以简短回答你的问题

> *我只是想知道我是否可以修改它生成的内容*

是：不，你不能。

通常，不需要任何额外内容，例如，如果您使用版本控制系统，则示例中的标签@author 和@date 是不必要的。你考虑过使用 CVS 吗？

作为替代解决方案（尽管不如键入“/**”那么优雅），您可以使用代码模板。如 NetBeans[文档](http://netbeans.org/kb/docs/cnd/navigating-editing.html)中所述，您可以定义代码模板的缩写。在您的情况下，您可以使用 @author、@date、@remark 标记和 1、2、3、... 参数定义 Doxygen 评论模板，并使用缩写 1、2、... 快速插入评论。

# regex - grep中的正则表达式查找单词

> ID：14493739
> 
> 赞同：0
> 
> 时间：2013-01-24T04:02:00.807
> 
> 标签：regex, grep

我有一个 sample.txt 文件，如下所示：

```
1.hi _plane_ is
2.hi airplane is
3.hi plane is
4.hi _plane- is
5.hi :plane: is
plane
there is a plane here 
```

我想在其他单词中找到一个单词“plane”，比如“airplane”，所以在 grep 之后，输出将如下所示（只有第 2 行会被过滤掉）

```
1.hi _plane_ is
3.hi plane is
4.hi _plane- is
5.hi :plane: is
plane
there is a plane here 
```

我试过：

```
grep -w "plane" sample.txt
grep "\bplane\b\|\Bplane\B" sample.txt 
```

但输出与我的预期不符。实际上我应该如何使用 grep 来获得正确的结果？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:13:33.483

```
egrep -v '[[:alpha:]]+plane|plane[[:alpha:]]+' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:10:42.647

试试这个：

```
grep "(^|[^a-zA-Z])plane([^a-zA-Z]|$)" sample.txt 
```

问题`\b`在于下划线字符`_`被视为“单词字符”，因此`\bplane\b`不匹配`_plane_`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:16:27.930

使用 GNU `grep`：

 ~~~~```
grep -w plane sample.txt 
```~~  ~~从头开始；`grep -w`将下划线视为单词的一部分，因此在这种情况下不好。~~~~

# c - 可以将地址运算符应用于非整数类型的二维数组和C中结构的非整数字段吗？

> ID：14493740
> 
> 赞同：1
> 
> 时间：2013-01-24T04:02:12.880
> 
> 标签：c, struct, operator-keyword, multidimensional-array, memory-address

我读了一**本 C 书**，它说，如果我们可以将地址运算符应用于二维整数类型数组的元素（例如 short、int、long）。例如，如果类型是浮点数，那么我们必须使用临时变量。代码示例：

```
int i, j;
int arr[4][4];
for (i = 0; i < 2; ++i)
   for (j = 0; j < 2; ++j)
       scanf("%d", &a[i][j]); /* OK because of int type */ 
```

但这不行：

```
int i, j;
float arr[4][4];
for (i = 0; i < 2; ++i)
   for (j = 0; j < 2; ++j)
       scanf("%f", &a[i][j]); /* NOT OK because of float type - not integral type */ 
```

我们必须使用临时变量：

```
int i, j;
float temp;
float arr[4][4];
for (i = 0; i < 2; ++i)
   for (j = 0; j < 2; ++j) {
       scanf("%f", &temp); /* OK */
       a[i][j] = temp;     /* then assign back to element of 2d array */
   } 
```

作者说 struct 没有整数字段也存在同样的问题。

```
typedef struct {
    char name[20];
    int id;
    float grade;
} Student; 
```

...

```
Student s;
float temp;
scanf("%d", &s.id);        /* OK becuase of integral type */
/* scanf("%f", &s.grade);  NOT OK because of float type */
scanf("%f", &temp);  /* OK */
s.grade = temp;      /* assign back */ 
```

作者只是在C中说，是这样但没有解释。这很奇怪，我以前从未听说过，因为我在 Visual Studio 6.0、Visual Studio 2010 上测试程序（添加带有 .c 扩展名的新文件），它可以正常工作而无需使用临时变量
这是历史问题 -老C风格？
C++ 中有这个限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:12:42.173

我会认真考虑寻找新作者：

```
#include <stdio.h>
int main(int argc, char *argv[])
{
    int i, j;
    float arr[4][4];
    for (i = 0; i < 2; ++i)
        for (j = 0; j < 2; ++j)
            scanf("%f", &arr[i][j]);

    for (i=0;i<2;++i)
        for (j=0;j<2;++j)
            printf("%f\n", arr[i][j]);
    return 0;
} 
```

**输入**

```
1.01
2.01
3.01
4.01 
```

**输出**

```
1.010000
2.010000
3.010000
4.010000 
```

也许更多关于他/她的理由的信息会有所帮助，但除非有任何真正的肉来提出这样的要求，否则我会在我的鸟笼里放那本书。*他的说法背后可能*有一些历史。我能理解的唯一相关的是它的性质`float`（即它的特定于实现的性质）。大多数人都使用 IEEE 754 single-prec for `float`， double-prec for `double`. 但我给了他*很大*的自由度来试图理解他的主张的逻辑。

# java - 得到答案但抛出异常，为什么？

> ID：14493741
> 
> 赞同：0
> 
> 时间：2013-01-24T04:02:13.393
> 
> 标签：java

试图解决欧拉问题，其中答案应该给出五个连续整数的最大乘积。我得到的答案是“40824”，根据欧拉解决方案是正确的。但是，我不明白为什么它最后会抛出一个异常，说“线程“主”java.lang.ArrayIndexOutOfBoundsException：1000 at LargestProduct.main（LargestProduct.java:23）中的异常”

下面是我的代码：

`public class LargestProduct {`

 ````
static String myBigInteger = "7316717653133062491922511967442657474235534919493496983520312774506326239578318016984801869478851843858615607891129494954595017379583319528532088055111254069874715852386305071569329096329522744304355766896648950445244523161731856403098711121722383113622298934233803081353362766142828064444866452387493035890729629049156044077239071381051585930796086670172427121883998797908792274921901699720888093776657273330010533678812202354218097512545405947522435258490771167055601360483958644670632441572215539753697817977846174064955149290862569321978468622482839722413756570560574902614079729686524145351004748216637048440319989000889524345065854122758866688116427171479924442928230863465674813919123162824586178664583591245665294765456828489128831426076900422421902267105562632111110937054421750694165896040807198403850962455444362981230987879927244284909188845801561660979191338754992005240636899125607176060588611646710940507754100225698315520005593572972571636269561882670428252483600823257530420752963450";
static int i;
static int j = 0;
static int BigProduct = 0;

public static void main(String[] args) {

    /* Both methods work to give an integer out of a char*/
    //getNumericValue(c)
    //digit(c,10);

    char[] letters = getStringToArray(myBigInteger);
        for(i=0; i<=letters.length; i++){

                int mydigit1 = Character.digit(letters[i + 0],10);
                int mydigit2 = Character.digit(letters[i + 1],10);
                int mydigit3 = Character.digit(letters[i + 2],10);
                int mydigit4 = Character.digit(letters[i + 3],10);
                int mydigit5 = Character.digit(letters[i + 4],10);

               int newBigProduct = mydigit1 *  mydigit2 * mydigit3 * mydigit4 * mydigit5;

                    if(newBigProduct > BigProduct){
                        BigProduct = newBigProduct;
                    }

                System.out.println("MaxProduct = " + BigProduct);

        }
    }           

public static char[] getStringToArray(String IntegerString) {
    char c[] = IntegerString.toCharArray();
    return c;

} 
```

}`  `我希望有人可以回答这个问题：）谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T04:03:16.887

我看到的一个问题是：

```
 for(i=0; i<=letters.length; i++){ 
```

应该

```
 for(i=0; i<letters.length; i++){ 
```

索引从 0 开始，`length`告诉数组中元素的数量。

其他问题：

```
 int mydigit2 = Character.digit(letters[i + 1],10);
            int mydigit3 = Character.digit(letters[i + 2],10);
            int mydigit4 = Character.digit(letters[i + 3],10);
            int mydigit5 = Character.digit(letters[i + 4],10); 
```

当您达到 i 的最大值时，上述语句将引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:07:30.637

for 循环边界不正确：

```
 for(i=0; i<=letters.length; i++){

            int mydigit1 = Character.digit(letters[i + 0],10);
            int mydigit2 = Character.digit(letters[i + 1],10);
            int mydigit3 = Character.digit(letters[i + 2],10);
            int mydigit4 = Character.digit(letters[i + 3],10);
            int mydigit5 = Character.digit(letters[i + 4],10); 
```

在最后一次迭代中，您触摸了数组最后一个元素之后的 5 个元素！该错误实际上会发生在`mydigit5`when `i`is的计算中`letters.length - 4`。这是因为`i + 4 == letters.length - 4 + 4 == letters.length`, 它是数组末尾的一个。您可能的意思`i + 4 < letters.length`是`for`循环绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:09:53.163

发生的事情是你正在使用

```
for(i=0; i<=letters.length; i++){ 
```

但在你正在访问的循环内

```
int mydigit1 = Character.digit(letters[i + 0],10);
int mydigit2 = Character.digit(letters[i + 1],10);
int mydigit3 = Character.digit(letters[i + 2],10);
int mydigit4 = Character.digit(letters[i + 3],10);
int mydigit5 = Character.digit(letters[i + 4],10); 
```

在这里，当 i 到达最后四个索引值时，您正在使用数组中的 i+1,i+2,i+3,i+4 元素

这四个变量跨越数组长度，从而引发数组索引超出范围异常`

# php - PHP foreach 数组中的子数组

> ID：14493745
> 
> 赞同：0
> 
> 时间：2013-01-24T04:02:14.310
> 
> 标签：php, zend-framework

我正在尝试解析一个如下所示的数组：

```
array(1) {
  ["StrategischeDoelstellingenPerDepartement"] => array(412) {
    [0] => array(5) {
      ["CodeDepartement"] => string(8) "DEPBRAND"
      ["NummerHoofdstrategischeDoelstelling"] => string(1) "1"
      ["Nummer"] => string(2) "27"
      ["Titel"] => string(22) "DSD 01 - HULPVERLENING"
      ["IdBudgetronde"] => string(1) "2"
    }
    [1] => array(5) {
      ["CodeDepartement"] => string(8) "DEPBRAND"
      ["NummerHoofdstrategischeDoelstelling"] => string(1) "2"
      ["Nummer"] => string(2) "28"
      ["Titel"] => string(24) "DSD 02 - Dienstverlening"
      ["IdBudgetronde"] => string(1) "2"
    }
    [2] => array(5) {
      ["CodeDepartement"] => string(8) "DEPBRAND"
      ["NummerHoofdstrategischeDoelstelling"] => string(1) "2"
      ["Nummer"] => string(2) "29"
      ["Titel"] => string(16) "DSD 03 - KLANTEN"
      ["IdBudgetronde"] => string(1) "2"
    }
    ... 
```

（数组继续，但它太大，无法在此处完整发布）

我可以像这样在数组上执行 foreach 循环：

```
foreach($my_arr->StrategischeDoelstellingenPerDepartement as $row){
    echo "i found one <br>";
} 
```

但是，我想在其他数组上做同样的事情，我想让函数通用。第一个键（在这种情况下为StrategischeDoelstellingenPerDepartement）有时会发生变化，这就是为什么我想通用地这样做。我已经尝试过以下方法：

```
foreach($my_arr[0] as $row){
    echo "i found one <br>";
} 
```

但随后我收到以下通知，但没有数据：

```
Notice: Undefined offset: 0 in C:\Users\Thomas\Documents\GitHub\Backstage\application\controllers\AdminController.php on line 29 
```

这可能是一个愚蠢的问题，但我是 PHP 新手，这似乎是正确的方法。显然，它不是。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:06:23.440

用于在不知道键名的情况下[`reset`](http://php.net/reset)获取第一个元素：`$my_arr`

```
$a = reset($my_arr);
foreach($a as $row){
    echo "i found one <br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:09:28.633

您正在尝试做的是 object，而不是 array `$my_arr->StrategischeDoelstellingenPerDepartement`。您可以使用[isset()](http://php.net/manual/en/function.isset.php)检查索引是否存在：

```
if(isset($my_arr['StrategischeDoelstellingenPerDepartement'])){
    foreach($my_arr['StrategischeDoelstellingenPerDepartement'] as $row){
        echo "i found one <br>";
    }
} 
```

或者，您可以使用[array_values()](http://au1.php.net/manual/en/function.array-values.php)忽略数组键并使其成为索引数组：

```
$my_new_arr = array_values($my_arr);
foreach($my_new_arr as $row){
    echo "i found one <br>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:39:08.100

使用`current`参考：http: [//in3.php.net/manual/en/function.current.php](http://in3.php.net/manual/en/function.current.php)

```
$a = current($my_arr);
foreach($a as $row){
    echo "i found one <br>";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T04:12:39.333

将子数组移出主数组并循环遍历它：

```
$sub = array_shift($my_arr);
foreach ($sub as $row) {
    echo $row['Titel'], "<br>";
} 
```

# c# - 在服务中使用通用基接口时，WCF 代理不知道回调

> ID：14493749
> 
> 赞同：1
> 
> 时间：2013-01-24T04:02:40.427
> 
> 标签：c#, wcf, generics

我正在编写一些可以在多个 WCF 服务中重复使用的通用代码。我已经能够成功使用泛型接口和基类，然后添加仅指定要使用的类型的派生接口和类：

```
[ServiceContract]
public interface IGenericContract<T>
{
    [OperationContract]
    void DoSomething(T param);
}

[ServiceContract]
public interface IService : IGenericContract<string> {}

// Re-usable generic base class
public class GenericService<T> : IGenericContract<T>
{
    public void DoSomething(T param)
    {
    }
}

// Specific service implementation
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
public class Service : GenericService<string>, IService
{
} 
```

当我托管一个实例`Service`并生成代理时，我得到了一个`DoSomething()`带有字符串类型参数的方法，如预期的那样：

```
public void DoSomething(string param) {
    base.Channel.DoSomething(param);
} 
```

在我尝试使用相同的技术添加回调之前，这很有效：

```
public interface IGenericCallback<T>
{
    [OperationContract]
    void DoSomethingOnClient(T param);
}
public interface ICallback : IGenericCallback<string>
{
}

// Add CallbackContract type to service
[ServiceContract(CallbackContract = typeof(ICallback))]
public interface IService : IGenericContract<string> { } 
```

生成的代理对`ICallback`. 为什么会这样，有没有办法解决它？

# php - MySQL 服务器在 PHP 脚本中不断“消失”

> ID：14493755
> 
> 赞同：0
> 
> 时间：2013-01-24T04:03:12.880
> 
> 标签：php, mysql, linux

我有一个脚本试图记录一些数据（通常一次大约 200-300kb）。它已经运行了很长一段时间。我不知道对处理服务器上的 MySQL 服务器或 PHP 所做的任何配置更改。昨天，以下代码块开始出现异常。两天前，“$sqlBucket”查询运行良好。现在，它失败了，mysql_error 返回“MySQL 服务器已消失”。我在第一个 if 块中添加了调试，它输出：

```
The Link Is Down
Link still down 
```

编码：

```
if (!mysql_ping($conn))  {
   echo "The Link Is Down!\n";
   mysql_close($conn);
   if (!($conn = mysql_connect($hostname,$username,$password))) echo "Fail " . $mysql_error() . "\n";
   mysql_select_db($db,$conn);
   if (!mysql_ping($conn)) echo "Link still down\n";
}
if (!mysql_query($sqlBucket, $conn)) {
    echo "Could not execute: {$sqlBucket}" . mysql_error() . "\n";
} 
```

如果有人对检查、调试、重新配置等有任何想法，我已经没有想法了。谢谢。

编辑：额外信息

该脚本在约 3 秒内执行并失败。

MySQL 服务器上的 wait_timeout 值为 28800。

我能够通过命令行成功发送查询。

我在 mysql_connect 函数上添加了一个检查，它报告成功（至少我没有在输出中得到“失败”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:29:20.813

查看表结构和索引 - 随着表的增长，写入数据可能需要更长的时间。200-300 kB 听起来是相当多的数据，而且会迅速累积（每 3-4 次更新 1 MB）。

此外，启用您的 MySQL[慢查询日志](http://dev.mysql.com/doc/refman/5.0/en/slow-query-log.html)，以准确查看慢速进入系统的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:24:00.670

验尸：

显然，这个解决方案与我收到的错误代码几乎没有关系。事实证明，为了腾出一些空间，我搬走了一张多余的桌子。好吧，我没有意识到另一个开发人员有一个触发器正在填充这个表。触发器被调用以插入我在原始问题中引用的代码块下方的块中参与查询的表上。我注意到的是代码第一次执行得很好，然后就失败了。发生的事情是触发错误以某种方式终止了与服务器的连接。放下触发器后，脚本开始运行得很好。

我仍然不确定为什么重做连接不允许它继续进行并且像第一次迭代期间那样运行。

# macos - 如何在mac上构建qt 5项目

> ID：14493770
> 
> 赞同：1
> 
> 时间：2013-01-24T04:04:46.190
> 
> 标签：macos, qt, clang

我尝试在 Mac 上构建一个简单的 Qt 5 程序。但我失败了。

代码非常简单：

```
#include <QtWidgets/QApplication>

int main(int argc, char *argv[])
{
    QApplication app (argc, argv);
    return app.exec();
} 
```

我用了：

```
clang++ -I ~/Qt5.0.0/5.0.0/clang_64/include -L/Users/crazylion/Qt5.0.0/5.0.0/clang_64/lib    test.cpp 
```

然后我得到了这个错误：

```
Undefined symbols for architecture x86_64:
  "QApplication::exec()", referenced from:
      _main in test-jPGORy.o
  "QApplication::QApplication(int&, char**, int)", referenced from:
      _main in test-jPGORy.o
  "QApplication::~QApplication()", referenced from:
      _main in test-jPGORy.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:07:39.973

首先，不要手动编译和链接Qt项目；使用 qmake 和项目文件。

在您的源目录中运行`qmake -project`以生成基本项目文件。

编辑项目文件并添加以下行：`QT += widgets`

现在运行`qmake`生成一个makefile。

现在运行`make`以构建您的程序。

其次，您可以简单地`#include <QApplication>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:39:45.280

如果您想使用 clang++ 来支持 qmake，您需要指定要链接到的库以及库目录（您提供的）。

```
clang++ -I ~/Qt5.0.0/5.0.0/clang_64/include -L/Users/crazylion/Qt5.0.0/5.0.0/clang_64/lib  -lQtCore -lQtGui  test.cpp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:24:49.620

我遇到了同样的问题，在我看来，版本中存在某种错误，它给了我一些错误，因为在全新安装（使用 qt creator）之后，我没有一些晦涩的 qt 库（不是普通的 qt5模块，但某种库正在开发中）所以我倾向于认为这可能是 qt 的问题

也就是说，我有一些问题需要更好地理解：

- 你在使用 IDE 吗？

- 如果您使用的是哪个？

- 你是否在 *.pro 中包含了所有用于地震的模块？

-你用过4.8版本，有没有遇到过这些问题？

PS如果您没有任何特殊需要，我建议您坚持使用4.8版一段时间（就像我正在做的那样没有问题），因为5.0刚刚发布

# shell - wget 被阻止下载 .FLV 文件，而 curl 不是

> ID：14493771
> 
> 赞同：1
> 
> 时间：2013-01-24T04:04:58.837
> 
> 标签：shell, wget

在我的终端中：

```
url='http://58.30.207.171/youku/69764FC8BC2447992487A2488/030002010051001478A6FA0109ACBF22B0F614-2746-1AE5-C9EF-2266A1CC83DB.flv'
curl $url -o test1.flv #can download
wget -c $url -O test2.flv #can not download 
```

1.为什么`wget`不能下载？
2.我怎样才能`wget`下载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:24:31.323

该站点可能专门阻止 wget。您可以通过将用户代理设置为空字符串来覆盖它：我在[http://www.gnu.org/software/wget/manual/wget.html#Option-Syntax](http://www.gnu.org/software/wget/manual/wget.html#Option-Syntax)

'-U agent-string' '--user-agent=agent-string' 标识为 http 服务器的代理字符串。http 协议允许客户端使用 User-Agent 标头字段来标识自己。这可以区分 www 软件，通常用于统计目的或跟踪协议违规。Wget 通常标识为“Wget/version”，version 是 Wget 的当前版本号。

但是，众所周知，某些站点会根据用户代理提供的信息实施定制输出的策略。虽然这在理论上并不是一个坏主意，但它已被服务器滥用，拒绝向（历史上）Netscape 或更常见的 Microsoft Internet Explorer 以外的客户端提供信息。此选项允许您更改 Wget 发出的 User-Agent 行。不鼓励使用此选项，除非您真的知道自己在做什么。

使用 '--user-agent=""' 指定空用户代理会指示 Wget 不要在 http 请求中发送 User-Agent 标头。

# css - 如何以编程方式实现jqgrid搜索覆盖

> ID：14493777
> 
> 赞同：0
> 
> 时间：2013-01-24T04:05:43.223
> 
> 标签：css, jqgrid

你能告诉我如何使用 CSS 以编程方式显示或隐藏搜索框覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:09:22.480

html:

```
<form>
    <input type="text" class="search-box" />
<form> 
```

要隐藏的 CSS：

```
.search-box{
    display:none;
} 
```

要显示的 CSS：

```
.search-box{
    display:block;
} 
```

# c# - 在 C# 编辑器中更改 emonic 的前景色

> ID：14493778
> 
> 赞同：0
> 
> 时间：2013-01-24T04:05:48.947
> 
> 标签：c#, eclipse-plugin

我想更改 emonic（eclipse 插件）C# 编辑器的前景色，语法工作正常 ![在此处输入图像描述](../Images/08cdd233f7a44ac349e6d3cc6b9e2db0.png)

除了语法，C# 编辑器首选项表示可以在文本编辑器首选项页面上设置一些首选项。 ![在此处输入图像描述](../Images/befe8ec0560c8ba762d2008dd0e4d5ca.png)

我做了.. ![在此处输入图像描述](../Images/8ed838c76ce905ff7bbb721566b20977.png)

文本编辑器看起来不错 ![在此处输入图像描述](../Images/4906b6d5b8120b8682d5812de99c117b.png)

在 C# 编辑器中不太好.. ![在此处输入图像描述](../Images/99f120d962a28c0092208d42a8f4a62a.png)

我试图修改我的工作区 .metadata.plugins\org.eclipse.core.runtime.settings\org.eclipse.ui.editors.prefs .metadata.plugins\org.eclipse.core.runtime.settings\org.emonic 中的文件.base.prefs

尽管如此，这些举动都是徒劳的..任何建议都将不胜感激，谢谢:)

# java - 在 JBoss7.1 上使用 Resteasy 对角色管理进行身份验证

> ID：14493781
> 
> 赞同：0
> 
> 时间：2013-01-24T04:06:22.520
> 
> 标签：java, web-applications, jboss7.x, resteasy

很长一段时间以来，我都喜欢在 JBoss 上进行实验。现在我在 JBoss7.1 上使用 Resteasy 进行角色管理身份验证时遇到了一些问题。

让我解释一下这个问题。刚刚我在 Jboss7 上启动了一个简单的 Web 应用程序，并实现了 Resteasy。我可以通过验证用户角色来登录。当我尝试注销时出现问题。我在登录期间发现，如果您执行 securityContext.getUserPrinicials.getName() ，则用户名是经过身份验证的输出。但是没有为该用户管理会话。那么实现注销功能的最佳方法是什么。我对 Jboss7 和 Resteasy 都很陌生。如果我说错了，请道歉。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:24:32.310

我也是 Resteasy 的新手。Servlet 3.0 模块可以做到这一点。我从[这里](http://docs.oracle.com/javaee/6/tutorial/doc/gjiie.html)得到了一些想法。

由于您没有提供示例代码，我已经测试了以下代码以进行注销，它工作正常。

```
 //import things

@Path("/userrealam")
public class UserService {
    @Context HttpServletRequest request;
    @Context HttpServletResponse response;

        @GET
        @Path("logout")
        @Produces({MediaType.TEXT_PLAIN})
        public void logout() throws JAXBException, IOException {
            try {
                        if (request.getUserPrincipal() != null){
                        request.logout();
                      }
                      }
             catch (Exception e) {
                    }

          }
} 
```

# ruby-on-rails - Nil 对象，当您没想到它用于联系 form_for

> ID：14493784
> 
> 赞同：0
> 
> 时间：2013-01-24T04:06:47.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml

我正在尝试使用[本教程](http://matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/)为我的 Rails 3.1.3 应用程序添加联系表。但是最后当我尝试加载我的联系页面时，我得到了错误：

*当你没想到时，你有一个 nil 对象！您可能期望有一个 Array 的实例。评估 nil 时发生错误。[]*

它说它出现在 new.html.haml 页面上此代码块的第 1 行：

```
 = form_for @message, :url => { :action=>"new", :controller=>"contact"} do |form|
    %fieldset.fields
      .field
        = form.label :name
        = form.text_field :name
      .field
        = form.label :email
        = form.text_field :email
      .field
        = form.label :body
        = form.text_area :body
    %fieldset.actions
      = form.submit "Send" 
```

我的控制器如下所示：

```
class ContactController < ApplicationController
    def new
        @message = Message.new
    end

  def create
    @message = Message.new(params[:message])

    if @message.valid?
      NotificationsMailer.new_message(@message).deliver
      redirect_to(root_path, :notice => "Message was successfully sent.")
    else
      flash.now.alert = "Please fill all fields."
      render :new
    end
  end
end 
```

模型如下所示：

```
class Message < ActiveRecord::Base
  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend ActiveModel::Naming

  attr_accessor :name, :email, :body

  validates :name, :email, :body, :presence => true
  validates :email, :format => { :with => %r{.+@.+\..+} }, :allow_blank => true

  def initialize(attributes = {})
    attributes.each do |name, value|
      send("#{name}=", value)
    end
  end

  def persisted?
    false
  end

end 
```

为什么我会收到该错误，我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:34:45.857

您是否添加了教程中提到的路线？

```
match 'contact' => 'contact#new', :as => 'contact', :via => :get
match 'contact' => 'contact#create', :as => 'contact', :via => :post 
```

除此之外，您可以以您的形式使用

```
<%= form_for @message, :url => contact_path do |form| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:07:46.563

如果您对新操作和编辑操作使用单独的表单，您可以在 new.html.haml

```
 = form_for :message, :url => { :action=>"new", :controller=>"contact"} do |form| 
```

或者

```
= form_for :message, @message, :url => { :action=>"new", :controller=>"contact"} do |form| 
```

# java - 类中的构造函数不能应用于给定类型

> ID：14493788
> 
> 赞同：-3
> 
> 时间：2013-01-24T04:06:54.593
> 
> 标签：java, web-services

我有这个问题`constructor TblPemohon in class entity.TblPemohon cannot applied to given types`。

我正在使用 Netbeans 7.0.1

代码`entity.TblProblem`：

```
public class TblPemohon {
    private String KtpPemohon;
    private String NamaDepanPemohon;
    private String NamaBelakangPemohon;
    private String TempatLahirPemohon;
    private String TanggalLahirPemohon;
    private String JenisKelamin;
    private String AgamaPemohon;
    private String StatusPerkawinan;
    private String PekerjaanPemohon;
    private String NamaJalanPemohon;
    private String NoAlamatPemohon;
    private String RtPemohon;
    private String RwPemohon;
    private String KelurahanPemohon;
    private String KecamatanPemohon;
    private String KabupatenPemohon;
    private String ProvinsiPemohon;
    private String KodePosPemohon;
    private String TelpPemohon;
    private String KewarganegaraanPemohon;

    private String errorCode;

    public TblPemohon() {

    }

    public String getKtpPemohon() {
        return KtpPemohon;
    }

    public void setKtpPemohon(String KtpPemohon) {
        this.KtpPemohon = KtpPemohon;
    }

    public String getNamaDepanPemohon() {
        return NamaDepanPemohon;
    }

    public void setNamaDepanPemohon(String NamaDepanPemohon) {
        this.NamaDepanPemohon = NamaDepanPemohon;
    }

    public String getNamaBelakangPemohon() {
        return NamaBelakangPemohon;
    }

    public void setNamaBelakangPemohon(String NamaBelakangPemohon) {
        this.NamaBelakangPemohon = NamaBelakangPemohon;
    }

    public String getTempatLahirPemohon() {
        return TempatLahirPemohon;
    }

    public void setTempatLahirPemohon(String TempatLahirPemohon) {
        this.TempatLahirPemohon = TempatLahirPemohon;
    }

    public String getTanggalLahirPemohon() {
        return TanggalLahirPemohon;
    }

    public void setTanggalLahirPemohon(String TanggalLahirPemohon) {
        this.TanggalLahirPemohon = TanggalLahirPemohon;
    }

    public String getJenisKelamin() {
        return JenisKelamin;
    }

    public void setJenisKelamin(String JenisKelamin) {
        this.JenisKelamin = JenisKelamin;
    }

    public String getAgamaPemohon() {
        return AgamaPemohon;
    }

    public void setAgamaPemohon(String AgamaPemohon) {
        this.AgamaPemohon = AgamaPemohon;
    }

    public String getStatusPerkawinan() {
        return StatusPerkawinan;
    }

    public void setStatusPerkawinan(String StatusPerkawinan) {
        this.StatusPerkawinan = StatusPerkawinan;
    }

    public String getPekerjaanPemohon() {
        return PekerjaanPemohon;
    }

    public void setPekerjaanPemohon(String PekerjaanPemohon) {
        this.PekerjaanPemohon = PekerjaanPemohon;
    }

    public String getNamaJalanPemohon() {
        return NamaJalanPemohon;
    }

    public void setNamaJalanPemohon(String NamaJalanPemohon) {
        this.NamaJalanPemohon = NamaJalanPemohon;
    }

    public String getNoAlamatPemohon() {
        return NoAlamatPemohon;
    }

    public void setNoAlamatPemohon(String NoAlamatPemohon) {
        this.NoAlamatPemohon = NoAlamatPemohon;
    }

    public String getRtPemohon() {
        return RtPemohon;
    }

    public void setRtPemohon(String RtPemohon) {
        this.RtPemohon = RtPemohon;
    }

    public String getRwPemohon() {
        return RwPemohon;
    }

    public void setRwPemohon(String RwPemohon) {
        this.RwPemohon = RwPemohon;
    }

    public String getKelurahanPemohon() {
        return KelurahanPemohon;
    }

    public void setKelurahanPemohon(String KelurahanPemohon) {
        this.KelurahanPemohon = KelurahanPemohon;
    }

    public String getKecamatanPemohon() {
        return KecamatanPemohon;
    }

    public void setKecamatanPemohon(String KecamatanPemohon) {
        this.KecamatanPemohon = KecamatanPemohon;
    }

    public String getKabupatenPemohon() {
        return KabupatenPemohon;
    }

    public void setKabupatenPemohon(String KabupatenPemohon) {
        this.KabupatenPemohon = KabupatenPemohon;
    }

    public String getProvinsiPemohon() {
        return ProvinsiPemohon;
    }

    public void setProvinsiPemohon(String ProvinsiPemohon) {
        this.ProvinsiPemohon = ProvinsiPemohon;
    }

    public String getKodePosPemohon() {
        return KodePosPemohon;
    }

    public void setKodePosPemohon(String KodePosPemohon) {
        this.KodePosPemohon = KodePosPemohon;
    }

    public String getTelpPemohon() {
        return TelpPemohon;
    }

    public void setTelpPemohon(String TelpPemohon) {
        this.TelpPemohon = TelpPemohon;
    }

    public String getKewarganegaraanPemohon() {
        return KewarganegaraanPemohon;
    }

    public void setKewarganegaraanPemohon(String KewarganegaraanPemohon) {
        this.KewarganegaraanPemohon = KewarganegaraanPemohon;
    }

    public String getErrorCode() {
        return errorCode;
    }

    public void setErrorCode(String errorCode) {
        this.errorCode = errorCode;
    }

} 
```

以及调用它的另一个类的代码

```
public List<TblPemohon> getTblPemohons() {
    DataBase db = new DataBase();
    try {
        Pemohon p = new Pemohon(db.getConnection());
        return p.getTblPemohons();
    } catch (Exception e) {
        List<TblPemohon> ltp = new ArrayList<TblPemohon>();
        ltp.add(new TblPemohon(e.getMessage()));
        return ltp;
    } finally {
        db.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:10:11.660

您的 TblPemohon 类只有非参数构造函数，但您尝试使用此处采用一个字符串的构造函数来创建它：

```
ltp.add(new TblPemohon(e.getMessage())); 
```

您需要添加一个采用一个字符串的构造函数，或者使用非参数构造函数

# google-maps - 信息窗口中的 Google Maps Api V3 Zoom 链接不起作用

> ID：14493797
> 
> 赞同：0
> 
> 时间：2013-01-24T04:08:01.147
> 
> 标签：google-maps, google-maps-api-3, zooming, infowindow

我正在使用 php sql 和 javascript 构建商店定位器。我已经完成了本教程[https://developers.google.com/maps/articles/phpsqlsearch_v3](https://developers.google.com/maps/articles/phpsqlsearch_v3)并让它工作。我正在尝试在 infoWindows 上实现放大/缩小链接，以供用户单击标记时使用。它不起作用，在 FireFox 中，我在控制台中没有收到任何错误。在 Chrome 中我得到 Uncaught TypeError: Object # has no method 'setCenter'

我一直在搜索论坛，但一直无法找到解决方案。抱歉，我没有在线版本可供查看，在本地工作。下面是我正在使用的脚本。

```
var map  = null;
var markers = [];
var infoWindow;
var locationSelect;
//On page load Create a google map in #map
//Set default cordinates & Map style to roadmap
function load() {
var myOptions = {
  zoom: 8,
  center: new google.maps.LatLng(43.907787,-79.359741),
  mapTypeControl: true,
  mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
  navigationControl: true,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map"), myOptions); 
infoWindow = new google.maps.InfoWindow({ 
  size: new google.maps.Size(150,50)
});
locationSelect = document.getElementById("locationSelect");
locationSelect.onchange = function() {
  var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
  if (markerNum != "none") {
    google.maps.event.trigger(markers[markerNum], 'click');
  }
};
}

//Search for LAT/LNG of a place using its address using Google Maps Geocoder
 function searchLocations() {
  var address = document.getElementById("addressInput").value;
 var geocoder = new google.maps.Geocoder();
 geocoder.geocode({address: address}, function(results, status) {
   if (status == google.maps.GeocoderStatus.OK) {
    searchLocationsNear(results[0].geometry.location);
   } else {
     alert(address + ' not found');
   }
 });
}

//Clears Prve location, in info box
function clearLocations() {
 infoWindow.close();
 for (var i = 0; i < markers.length; i++) {
   markers[i].setMap(null);
 }
 markers.length = 0;
 locationSelect.innerHTML = "";
 var option = document.createElement("option");
 option.value = "none";
 option.innerHTML = "See all results:";
 locationSelect.appendChild(option);
}

 //Look for locations near by and loop through all data getting lat & lng of each marker
 function searchLocationsNear(center) {
 clearLocations();

 var radius = document.getElementById('radiusSelect').value;
 var searchUrl = 'http://localhost:8888/starward/wp-content/themes/starward/map_request.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius;
 downloadUrl(searchUrl, function(data) {
   var xml = parseXml(data);
   var markerNodes = xml.documentElement.getElementsByTagName("marker");
   var bounds = new google.maps.LatLngBounds();
   for (var i = 0; i < markerNodes.length; i++) {
     var name = markerNodes[i].getAttribute("name");
     var address = markerNodes[i].getAttribute("address");
     var distance = parseFloat(markerNodes[i].getAttribute("distance"));
     var zoom = 18;
     var latlng = new google.maps.LatLng(
          parseFloat(markerNodes[i].getAttribute("lat")),
          parseFloat(markerNodes[i].getAttribute("lng"))); 

     createOption(name, distance, i);
     createMarker(latlng, name, address,zoom);
     bounds.extend(latlng);
   }
   map.fitBounds(bounds);
   map.setZoom(11);
   // map.setCenter(center);
   locationSelect.style.visibility = "visible";
   locationSelect.onchange = function() {
     var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
     google.maps.event.trigger(markers[markerNum], 'click');
   };
  });
}

//Creates marker on the map
//Adds event for user when they click address info pops up
function createMarker(latlng, name, address, zoom) {
  //var html = "<b>" + name + "</b> <br/>" + address 
  // add the zoom links
  var html =  "<b>" + name + "</b> <br/>" + address 
  html += '<br><a  href="javascript: map.setZoom('+zoom+');">Zoom To</a>';
  html += ' <a  href="javascript:map.setCenter(new google.maps.LatLng('+latlng.toUrlValue(6)+')); map.setZoom(parseInt(map.getZoom())+1);">[+]</a>';
  html += ' <a  href="javascript:map.setCenter(new google.maps.LatLng('+latlng.toUrlValue(6)+')); map.setZoom(parseInt(map.getZoom())-1);">[-]</a>';

  var marker = new google.maps.Marker({
    position: latlng,
    map: map
  });
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
  marker.MyZoom = zoom;
  markers.push(marker);
}

function createOption(name, distance, num) {
  var option = document.createElement("option");
  option.value = num;
  option.innerHTML = name + "(" + distance.toFixed(1) + ")";
  locationSelect.appendChild(option);
}
//Look up XML sheet to get data
function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      callback(request.responseText, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function parseXml(str) {
  if (window.ActiveXObject) {
    var doc = new ActiveXObject('Microsoft.XMLDOM');
    doc.loadXML(str);
    return doc;
  } else if (window.DOMParser) {
    return (new DOMParser).parseFromString(str, 'text/xml');
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:29:05.197

[它适用](http://www.geocodezip.com/v3_simpleMap_SO_zoomToMarker.html)于 IE 和 Firefox。尽管对我来说，如果我也为“ZoomTo”链接设置中心，这种行为会更有意义：

```
html += '<br><a  href="javascript: map.setCenter(new google.maps.LatLng('+latlng.toUrlValue(6)+'));map.setZoom('+zoom+');">Zoom To</a>'; 
```

# javascript - 以编程方式设置 html 元素的值

> ID：14493799
> 
> 赞同：1
> 
> 时间：2013-01-24T04:08:17.920
> 
> 标签：javascript, jquery, html

我正在尝试根据访问者选择的主题创建自动回复消息模板。我检查了formmail，发现它是如何完成的，就像设置要从fmtemplate 目录中提取的模板一样。

[http://www.tectite.com/fmhowto/autorespond.php](http://www.tectite.com/fmhowto/autorespond.php)

但是，在自动回复发送任何内容之前，我需要检查“主题”选择并发送适当的自动回复模板。

我认为应该这样做的方式如下。将选择标记的值设置如下。

```
<select name="subject" id="subject" class="subject_category"">
    <option value="first_option">First Option</option>
    <option value="second_option">Second Option</option>
    <option value="third_option">Third Option</option>
    <option value="fourth_option">Fourth Option</option>
</select> 
```

还有一些如何通过formmail指示以下隐藏标签

将自动响应 HTML 的文件名替换为用户选择的选项。

有没有办法嵌入 javascript 来代替 arhtml.html 文件，以便它读取 select 选项并相应地构造一个 html 名称？

# xcode - Xcode 4 中简体中文和繁体中文的本地化

> ID：14493801
> 
> 赞同：1
> 
> 时间：2013-01-24T04:08:24.360
> 
> 标签：xcode, localization

Xcode 4 默认在项目导航器中将两种语言都命名为“中文”，这使得当我需要编辑本地化时变得非常混乱。有没有办法让它显示繁体/简体中文，甚至 zh-Hans/zh-Hant 而不仅仅是“中文”？

![在此处输入图像描述](../Images/00d06d52884b922c7e4a8c321d133d79.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:33:07.780

你使用的是什么版本的 Xcode？在 Xcode 4.5.2 中，我看到以下内容：

![在此处输入图像描述](../Images/157b4b325eb30d3e0ba804150aa83652.png)

即使有了这个扩展的描述，你仍然没有走出困境。如果添加 zh-Hant-HK 和 zh-Hans-HK

![在此处输入图像描述](../Images/b14cd983c05a63bd5b40aaa93a531012.png)

您在语言菜单中得到相同的描述：

![在此处输入图像描述](../Images/9e0df8b69cd5167324692d10fa8271fe.png)

是时候向 Xcode 团队报告错误了。

# iphone - 模态视图控制器隐藏标签栏

> ID：14493803
> 
> 赞同：5
> 
> 时间：2013-01-24T04:08:30.430
> 
> 标签：iphone, ios, objective-c, uitabbarcontroller, modalviewcontroller

在我的基于选项卡的应用程序中，单击其中一个选项卡时，我想显示一个带有一些信息的模态视图控制器。在我的应用程序委托的 didSelectViewController 方法中，我添加了模态视图。但它占据了整个屏幕并隐藏了标签栏。我不想隐藏标签栏，只想显示弹出并可以关闭的模态视图。

我该怎么做？

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T04:13:03.590

模态视图控制器总是在 iPhone 上全屏显示。如果您不想隐藏标签栏，那么您需要以除模态之外的其他方式呈现此视图。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-08T02:00:04.887

*通过**设置*`modalPresentationStyle`为`.currentContext`. _ _ _

```
let newViewController = UIViewController()
newViewController.view.backgroundColor = UIColor.red
newViewController.modalPresentationStyle = .currentContext
newViewController.modalTransitionStyle = UIModalTransitionStyle.flipHorizontal
present(newViewController, animated: true, completion: nil) 
```

编辑：通过更多测试，如果有人在显示时更改选项卡，则上述内容可能会出现一些错误行为`newViewController`。

为了“修复”，我创建了一个“切换器”——`UIViewController`在我想在标签栏下翻转的视图控制器之间进行动画处理：

```
view.addSubview(nextView)
UIView.transition(from: currentView,
   to: nextView,
   duration: 0.5,
   options: animation,
   completion: { (_) in
      currentView.removeFromSuperview()
   }) 
```

在这种情况下，`currentView`是 ViewControllerOne 的视图（当前可见的），以及`nextView`ViewControllerTwo 的视图（我们要呈现的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T04:17:04.987

例如，如果 secondViewController 是您的第二个标签栏的第二个 viewController，您应该这样做：

`[secondViewController.view addSubview:theViewYouWantToShow];`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T04:38:20.287

在 iOS 中，模态视图控制器在所有可用的视图控制器中始终具有最高优先级。所以你不能在你的情况下使用模态视图控制器。

如果您只想在屏幕上显示具有背景可见性的弹出窗口，则只需使用**UIAlertView**。您可以根据需要添加确定或取消按钮以删除警报视图。

或者

如果要显示具有选项卡栏可见性的完整视图，请将该选项卡中的视图添加为子视图。**您可以使用视图的transform**属性给它一种弹出的感觉。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-06T10:41:28.357

您可以通过设置PresentationStyle来模态地呈现它。这种样式将viewController呈现在一个正方形中，并且不占满屏幕。

```
self.modalPresentationStyle = UIModalPresentationFormSheet; 
```

您还可以设置过渡：

```
self.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal; 
```

# perl - 运行 Build.PL 无法创建 MYMETA 文件

> ID：14493806
> 
> 赞同：0
> 
> 时间：2013-01-24T04:08:49.260
> 
> 标签：perl

我想安装 File-MimeInfo-0.16 包并运行“perl Build.PL”，它抛出了：

```
Could not create MYMETA files
Creating new 'Build' script for 'File-MimeInfo' version '0.16' 
```

有谁知道如何解决？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T17:42:07.290

创建 MYMETA.json 和 MYMETA.yml 文件的包称为`CPAN::Meta`. 您可以使用以下方法之一安装它：

*   Mac OS X：`sudo port install p5-cpan-meta`在终端中输入（假设您安装了[MacPorts](http://www.macports.org/)）

*   Ubuntu Linux：`sudo apt-get install libcpan-meta-perl`在终端中输入

*   其他平台：运行 CPAN shell（通常通过`cpan`从终端或命令提示符键入），然后键入：

    `install CPAN::Meta`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T05:47:48.830

您可以直接从 CPAN安装[File::MimeInfo 。](http://search.cpan.org/~pardus/File-MimeInfo-0.16/lib/File/MimeInfo.pm)

```
cpan File::MineInfo 
```

或者，如果您想手动操作，

1.  如果没有，请安装以下依赖项：

    *   鲤鱼
    *   出口商
    *   Fcntl
    *   吊舱::使用
    *   文件::基本名称
    *   文件::BaseDir
    *   文件::桌面条目
2.  下载发行版

    ```
    wget http://search.cpan.org/CPAN/authors/id/P/PA/PARDUS/File-MimeInfo/File-MimeInfo-0.16.tar.gz 
    ```

3.  运行以下命令序列：

    ```
    tar xvzf File-MimeInfo-0.16.tar.gz
    cd File-MimeInfo-0.16
    perl MakeFile.PL
    make test
    make install 
    ```

我不知道你为什么要跑`perl Build.PL`。

但就模块的安装而言，上述步骤将确保您安装了模块（前提是您处理依赖关系......或使用 CPAN）

**PS：**以上说明适用于Linux平台。我从来没有在窗户上做过任何坏事。

# c# - Windows Phone 应用程序 8 更新的独立存储设置应用程序设置

> ID：14493810
> 
> 赞同：3
> 
> 时间：2013-01-24T04:09:18.523
> 
> 标签：c#, windows-phone

通过 AppStore 更新应用程序时，是否保存了 Windows Phone 8 应用程序存储的设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:03:04.293

隔离存储设置提供了一种方便的方法，可以将用户特定数据作为键值对存储在本地隔离存储文件中，并具有应用程序的生命周期。您可以找到更多有关[IsolatedStorageSettings 类](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings%28v=VS.95%29.aspx)的信息。

所以答案是 Windows Phone 应用程序将保存应用程序更新后保存的所有数据。如果您卸载应用程序，您将丢失来自 IsolatedStorageSettings 的所有数据。

# python - 如何在 Python 中将图例放入一个带有一个数据点（或外部）的循环中？

> ID：14493816
> 
> 赞同：0
> 
> 时间：2013-01-24T04:09:36.907
> 
> 标签：python, loops, matplotlib, legend

在 matplotlib 中，我使用循环来绘制图形，每一步仅绘制一个具有特定颜色 C[index] 的数据点（X[index]，Y[index]），以便为每个数据点分配颜色观点。总的来说，我用 8 种颜色来表示我的数据点，所以我希望我可以用这 8 种颜色来做一个图例，每种颜色代表一个含义。

这是我的代码。感谢帮助。:)

```
for index in range(0,len(X)):
  plt.plot(X[index],Y1[index], marker = 'o', markersize = 10, color = C[index])  
  plt.xlabel("the percentage of students' credit hours found in instructor data", fontsize=14, color ="blue")
  plt.ylabel("total number of writing assinments", fontsize=14, color="blue")
  plt.axis([0, 100, 0, max(Y1)]) 
plt.show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:40:57.957

[直接来自matplotlib 文档](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.plot)的示例：

> kwargs 可用于设置线属性（任何具有 set_* 方法的属性）。您可以使用它来**设置线标签（用于自动图例）**、线宽、消除、标记面颜色等。这是一个示例：

```
 plot([1,2,3], [1,2,3], 'go-', label='line 1', linewidth=2)
    plot([1,2,3], [1,4,9], 'rs',  label='line 2')
    axis([0, 4, 0, 10])
    legend() 
```

所以，如果你`label`为每一行设置属性，你应该可以在`legend()`之后调用它，它会自动生成带有适当标签的图例。

如果您想对传说做一些更有趣的事情，他们也有[相关文档](http://matplotlib.org/users/legend_guide.html)。

# c++ - 在 c++ 中有效使用 std::map 和 std::set

> ID：14493817
> 
> 赞同：-3
> 
> 时间：2013-01-24T04:09:40.000
> 
> 标签：c++, map, vector, set

为了有效地使用向量，我们需要在设置元素之前保留内存。但是对于不是连续容器的 map 和 set，我们如何才能让它们快速高效呢？

* * *

我有一个大小为 10s 的向量/集/映射，并希望添加非重复元素。我想让它尽可能快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:18:00.553

Q1) 所有 STL 容器已经尽可能高效。程序员可以选择适合给定要求的数据结构。您需要了解每种数据结构的优缺点。

Q2) Map[key] = value 调用 operator[] 也可用于访问元素，而不仅仅是插入，而 insert() 函数仅特定于插入。insert() 在 operator[] 上几乎没有其他重载功能，请查看[http://www.cplusplus.com/reference/map/map/insert/](http://www.cplusplus.com/reference/map/map/insert/)

# jquery - jQuery 中 Class.create() 的等价物是什么？

> ID：14493820
> 
> 赞同：1
> 
> 时间：2013-01-24T04:10:02.900
> 
> 标签：jquery, prototypejs

我最近将一些 PrototypeJS 代码转换为 jQuery，遇到`Class.create()`了 jQuery 等价物，但不确定。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T04:20:31.390

jQuery 没有内置此功能。

如果您想使用与 PrototypeJS 处理方式相似的语法，请考虑在您的项目中包含John Resig（他是 jQuery 的原作者）的[小型**Simple JavaScript Inheritance**脚本。](http://ejohn.org/blog/simple-javascript-inheritance/)

包含该脚本后，您可以按原样复制和粘贴代码。大部分是一样的。唯一的区别是`Class.create`你应该使用而不是使用`Class.extend`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:48:27.070

jquery 中没有 class.create() ，而是使用常规 JS 对对象进行编码。

创建一个具有关联对象的类，然后使用 $.extend() 处理该对象。

点击链接：[http ://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

# c# - Windows Phone 7 闹钟未在预定时间响起

> ID：14493823
> 
> 赞同：3
> 
> 时间：2013-01-24T04:10:09.270
> 
> 标签：c#, windows-phone-7, alarm

我正在为 windows phone OS 7.1 创建一个应用程序来了解这个平台。创建警报应用程序时，我遇到了这个奇怪的错误：当我使用 ScheduledActionService.Add(myAlarm) 设置警报时，警报永远不会在所选时间响起。我设置了 beginTime = now + 10 秒，然后我等了 2 分钟却没有运气。但是，当我在运行时添加另一个警报时，在最后一个警报的选定时间之后，最后一个警报将响起。

下面是我的 createAlarm 函数的代码。我做了一些搜索，但没有找到解决方案。

```
 private void createAlarm(double time, string message)
    {
        var myAlarm = new Alarm(System.Guid.NewGuid().ToString())
        {
            Content = message,
            BeginTime = DateTime.Now.AddSeconds(time),
            ExpirationTime = DateTime.Now.AddSeconds(time + 10.0)
        };

        myAlarm.Sound = new Uri("/Sounds/02 Ha Trang.mp3", UriKind.Relative);
        myAlarm.RecurrenceType = RecurrenceInterval.None;

        ScheduledActionService.Add(myAlarm);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:15:56.340

这是一个已知问题。警报以 30 秒的精度响起。提醒的情况也是如此。有时您实际上可能会得到准确的结果，但总体而言，频繁发出警报或提醒并不可靠。缺乏准确性可能是为了保持低资源消耗。（记住，警报在后台工作。）第一个警报在设置第二个警报时触发，因为系统突然“意识到”警报已经过期。将它们分开至少一分钟是一个好习惯。

另一方面，如果你真的需要以非常小的间隔发出哔声，你将不得不使用更“前景”的东西，比如计时器。

# android - Android——使用sanselan手动更新图片Exif数据

> ID：14493825
> 
> 赞同：1
> 
> 时间：2013-01-24T04:10:16.950
> 
> 标签：android, android-camera, exif

我一直在尝试使用 sanselan library for android 来正确更新我的图像旋转数据，但我无法让它工作。我想知道这里是否有人让这个工作。我整天都在查看类似问题的答案，但似乎还没有任何效果。在银河 s3 和摩托罗拉剃须刀 m 上，出于某种原因，我总是在图片中嵌入风景旋转。我已经在我分配给我的相机和所有东西的参数中设置了旋转属性，但它仍然无法正常工作。有没有人对他们如何成功手动更新 android 图像中的 Exif 数据有任何想法、链接或示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:19:58.910

某些设备，例如 Galaxy S3、Note2 会提供旋转图像。要正确获取图像，请按照以下步骤操作：

1.  使用方向 exif 信息旋转位图
2.  将正确的值设置为图像 exif 方向

如果我没看错，您的问题出现在第 2 步。如果您尝试更新 exif 方向，Sanselan 将复制方向属性。所以首先，你必须删除方向值，然后添加值。我是这样解决的：

```
 List<?> sourceDirectories = outputSet.getDirectories();
            for (int i = 0; i < sourceDirectories.size(); i++) {
                TiffOutputDirectory sourceDirectory = (TiffOutputDirectory) sourceDirectories.get(i);

                List<?> sourceFields = sourceDirectory.getFields();
                for (int j = 0; j < sourceFields.size(); j++) {
                    TiffOutputField sourceField = (TiffOutputField) sourceFields.get(j);
                    if (sourceField.tagInfo.name.equals("Orientation")) {
                        sourceDirectory.removeField(sourceField.tagInfo);
                    }
                }
            }

            TiffOutputDirectory tiffDirectory = outputSet.getExifDirectory();
            TiffOutputField orientationField = TiffOutputField.create(TiffConstants.EXIF_TAG_ORIENTATION, outputSet.byteOrder, 1);
            tiffDirectory.add(orientationField); 
```

[这篇文章可以帮助你定位价值](http://www.impulseadventure.com/photo/exif-orientation.html)

# tridion - 如何在 Experience Manager 中限制给定页面类型的内容类型

> ID：14493827
> 
> 赞同：6
> 
> 时间：2013-01-24T04:10:53.343
> 
> 标签：tridion, tridion-2011

Experience Manager (XPM)（SDL Tridion 2011 SP1 的用户界面更新）允许管理员创建页面类型，这些页面类型具有与页面一样的组件表示，但还添加了有关如何创建和允许其他内容类型的规则。

对于给定的页面类型，我想通过限制内容类型选择来简化作者的选择。

我知道我们可以：

*   **限制内容类型**，这样对于给定的页面类型，作者只能创建某些[预定义的内容类型。](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/task_882FF93B152F4C879FFA7F8CAA21ED2D)
*   在仪表板中，通过取消选择**将上述内容完全限制为仅预定义的内容类型**`Content Types Already Used on the Page`
*   **使用指定模式和模板组合**以及数量限制的**[区域。](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/reference_1F06D11E24E543D4BA8E4CB8E3FAA221)**作者只能向这些区域添加（拖放）某些类型和数量的组件。例如，我们可以输出以下内容`Staging`来创建一个区域：

```
<div>
<!-- Start Region: {
  title: "Promos",
  allowedComponentTypes: [
    {
      schema: "tcm:2-42-8",
      template: "tcm:2-43-32"
    },
  ],
  minOccurs: 1,
  maxOccurs: 3
} -->
<!-- place the matching CPs here with template logic (e.g. TemplateBeginRepeat/ TemplateBeginIf with DWT) -->
</div> 
```

*   作者可能仍会*看到*他们可能想要插入的组件（下图），但如果区域控制允许的内容，则无法添加它们
*   但是，文件夹权限会减少作者在插入内容库中可以看到/使用的组件

![插入内容](../Images/9b774963df3984af59f1a44f367d138a.png)

**我都得到了吗？XPM 功能中的任何其他方式或可能的扩展考虑如何限制给定页面类型的允许内容？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T05:30:52.860

阿尔文，你几乎提供了你问题中的大部分选项。如果需要自定义错误消息或更精细的控制级别，另一种选择是使用事件系统。订阅页面的保存事件 Initiated 阶段并编写一些验证代码，如果页面上有不需要的组件表示，则会引发异常。

由于页面类型实际上是页面模板、页面上的任何元数据以及页面上的组件演示类型的组合，因此我们需要检查我们是否正在处理想要的页面类型，如果遇到不符合要求的 CP匹配我们想要的，我们可以简单地抛出异常。这是一些快速代码：

```
[TcmExtension("Page Save Events")]
public class PageSaveEvents : TcmExtension
{
    public PageSaveEvents()
    {
        EventSystem.Subscribe<Page, SaveEventArgs>(ValidateAllowedContentTypes, EventPhases.Initiated);
    }

    public void ValidateAllowedContentTypes(Page p, SaveEventArgs args, EventPhases phases)
    {
        if (p.PageTemplate.Title != "My allowed page template" && p.MetadataSchema.Title != "My allowed page metadata schema")
        {
            if (!ValidateAllowedContentTypes(p))
            {
                throw new Exception("Content Type not allowed on a page of this type.");
            } 
        }
    }

    private bool ValidateAllowedContentTypes(Page p)
    {
        string ALLOWED_SCHEMAS = "My Allowed Schema A; My Allowed Schema B; My Allowed Schema C; etc";  //to-do put these in a parameter schema on the page template
        string ALLOWED_COMPONENT_TEMPLATES = "My Allowed Template 1; My Allowed Template 2; My Allowed Template 3; etc"; //to-do put these in a parameter schema on the page template

        bool ok = true;
        foreach (ComponentPresentation cp in p.ComponentPresentations)
        {
            if (!(ALLOWED_SCHEMAS.Contains(cp.Component.Schema.Title) && ALLOWED_COMPONENT_TEMPLATES.Contains(cp.ComponentTemplate.Title)))
            {
                ok = false;
                break;
            }
        }

        return ok;
    }
} 
```

# javascript - JavaScript 和 document.getElementById

> ID：14493828
> 
> 赞同：2
> 
> 时间：2013-01-24T04:11:20.967
> 
> 标签：javascript, html

我是 JS 新手。我放入`document.getElementById`我的 JS 并尝试将该元素放入一个`p`id 中，但是当我单击按钮时，什么都没有显示。我在这里做错了什么？任何帮助是极大的赞赏。谢谢！

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>GRL Example</title>
<script>
function class_roll() {
    // Car Classes
    var classes = ["B", "A", "S", "R3", "R2", "R1"],
        classToUse = classes[Math.floor(Math.random() * classes.length)];
    var elemClass = document.getElementById("croll");
}

function track_roll() {
    // Tracks
    var tracks = ["Clear Springs Circuit", "Festival North Circuit", "Beaumont Circuit", "Finley Dam Circuit", "Gladstone Circuit", "Clifton Valley Trail", "Gladstone Trail"],
        trackToUse = tracks[Math.floor(Math.random() * tracks.length)];
    var elemTrack = document.getElementById("troll");
}
</script>
</head>

<body>

<p id="croll">Some text here</p>
    <button onclick="class_roll();">Class Roll</button>

<p id="troll">Some text here</p>
    <button onclick="track_troll;">Track Roll</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T04:42:01.460

## 带第一个功能

```
function class_roll() {
    // Car Classes
    var classes = ["B", "A", "S", "R3", "R2", "R1"],
        classToUse = classes[Math.floor(Math.random() * classes.length)];
    var elemClass = document.getElementById("croll");
} 
```

您没有执行任何操作，因此添加一些对您可见的操作。改成。

```
function class_roll() {
    // Car Classes
    var classes = ["B", "A", "S", "R3", "R2", "R1"],
        classToUse = classes[Math.floor(Math.random() * classes.length)];
    document.getElementById("croll").innerHTML = classToUse ;
} 
```

## 带第二功能

```
function track_roll() {
    // Tracks
    var tracks = ["Clear Springs Circuit", "Festival North Circuit", "Beaumont Circuit", "Finley Dam Circuit", "Gladstone Circuit", "Clifton Valley Trail", "Gladstone Trail"],
        trackToUse = tracks[Math.floor(Math.random() * tracks.length)];
    var elemTrack = document.getElementById("troll");
} 
```

1.  函数名中有拼写错误意味着您调用的名称与定义名称不同。
2.  `document.getElementById("troll").innerHTML = trackToUse ;` 添加此项以随机查看所选选项。

这是修复的代码以供您帮助

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>GRL Example</title>

</head>

<body>

<p id="croll">Some text here</p>
    <button onclick="class_roll();">Class Roll</button>

<p id="troll">Some text here</p>
    <button onclick="track_roll();">Track Roll</button>

</body>
<script>
function class_roll() {
    // Car Classes
    var classes = ["B", "A", "S", "R3", "R2", "R1"],
        classToUse = classes[Math.floor(Math.random() * classes.length)];
    document.getElementById("croll").innerHTML = classToUse ;
}

function track_roll() {

    var tracks = ['a' ,'a' ,'a' ,'a'];
        trackToUse = tracks[Math.floor(Math.random() * tracks.length)];
    document.getElementById("troll").innerHTML = trackToUse ;

}
</script>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T04:19:38.957

如果您想更改元素的值，则需要在检索到它后对其进行处理。

例如：

```
function track_roll() {
    // Tracks
    var tracks = ["Clear Springs Circuit", "Festival North Circuit", "Beaumont Circuit", "Finley Dam Circuit", "Gladstone Circuit", "Clifton Valley Trail", "Gladstone Trail"],
        trackToUse = tracks[Math.floor(Math.random() * tracks.length)];
    var elemTrack = document.getElementById("troll");
    elemTrack.InnerHTML = "Test";
} 
```

# php - 如何在 PHP 语句中嵌入 location.href() 属性

> ID：14493832
> 
> 赞同：0
> 
> 时间：2013-01-24T04:11:39.307
> 
> 标签：php, html, web-applications, onclick, href

我有一个 PHP echo 语句，在其中创建了一个 HTML 按钮元素，并且在该按钮元素中，我想将 onclick 属性设置为 location.href 函数，以便在用户单击按钮时重定向到另一个页面。但是我似乎无法正常工作，单击按钮时没有任何反应。我认为这与大量的单引号和双引号有关，但我不确定。这是我最近的尝试，但我尝试了多种方式来转义内部引号。

```
 echo "Commissioner Admin</th><td><button type='button' id='adddirectoradmin' value='adddirectoradmin' width='75' onclick=\"location.href('http://some-url')\">Add</button></td>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T04:13:28.960

`location.href`不是函数。你的报价都OK。

您的问题是您正在*调用* `location.href`而不是仅仅为其分配一个新值：

```
onclick="location.href = 'http://some-url'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:21:46.967

尝试这个：

```
echo "Commissioner Admin</th><td><button type='button' id='adddirectoradmin' value='adddirectoradmin' width='75' onclick='". location.href('http://some-url')."'>Add</button></td>"; 
```

# java - 我的方法返回 NULL 而不是返回二维数组

> ID：14493838
> 
> 赞同：0
> 
> 时间：2013-01-24T04:12:11.907
> 
> 标签：java, android, methods, multidimensional-array

我将我的方法定义如下，并希望返回一个二维数组，但它返回一个 NULL 。有人可以告诉我这有什么问题吗？

```
public String[][] parseInput150(String[] inputPercent150, String[][] input150Parsed ) {

    String inputPer150fromXML = getResources().getString(R.string.InputPercent150);

    inputPercent150 = inputPer150fromXML.split(Pattern.quote("|"));
    input150Parsed = new String[inputPercent150.length-1][];
    for (int i = 1; i < inputPercent150.length; i++) {
        input150Parsed[i-1] = inputPercent150[i].split(Pattern.quote(" "));
    } 
    for (int i = 0; i < input150Parsed.length; i++){

            Log.e("TAG","Parsed Array value = " + Arrays.toString(input150Parsed[i]));

    }

    return input150Parsed;      
} 
```

方法调用如下：

> ```
> @Override
>   public void onCreate(Bundle savedInstanceState) {
>        super.onCreate(savedInstanceState);        
>        setContentView(R.layout.activity_main);        
>     operationalSoldiers = (EditText) findViewById(R.id.operationalSoldiers);
>     operationalSoldiers.setText("150");        
>     initialInput = setinitialInput(initialInput);
>     input150Parsed = parseInput150(inputPercent150, input150Parsed);                        
>     listView = (ListView) findViewById(R.id.list);
>     selectAll = (Button) findViewById(R.id.selectAll);
>     deselectAll = (Button) findViewById(R.id.deselectAll);        
>     ArrayAdapter<String> adapter;
>     array =  getResources().getStringArray(R.array.facilities);
>     strings1 = new ArrayList(Arrays.asList(array));                
>     TopicSelectionListAdapter topicSelectionListAdapter = new TopicSelectionListAdapter(
>             second.this, R.layout.listrow, strings1);
>     listView.setAdapter(topicSelectionListAdapter);
>     listView.setItemsCanFocus(false);
>     listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
>     for(int i=0;i<strings1.size();i++){
>         listView.setItemChecked(i, false);
>       }
>        listView.setOnItemClickListener(new OnItemClickListener() {
>         @Override
>         public void onItemClick(AdapterView<?> arg0, View view, int position,
>                 long arg3) {
>             CheckedTextView selectedItem = (CheckedTextView) view;
>             boolean isChecked = selectedItem.isChecked();
>            Log.e("TAG","item clicked position = " + position + " isChecked = " + isChecked);
>             for(int i=0; i< strings1.size(); i++){
>                 if(!isChecked){
>                     bArray[i]= 1;
>                 }
>                 else{
>                     bArray[i]= 0;
>                 }
>                     System.out.print(bArray[i]);
>             }Log.e("TAG","boolean Array value = " + bArray);
>           }
>     });
>     selectAll.setOnClickListener(new View.OnClickListener() {
>         @TargetApi(Build.VERSION_CODES.HONEYCOMB)
>         @Override
>         public void onClick(View v) {
>             for(int i=0;i<strings1.size();i++){
>                 listView.setItemChecked(i, true);
>                 bArray[i]= 1;
>             }
>             totalSoldiers = (int) (operationalSoldiers.getAlpha() + (operationalSoldiers.getAlpha() * 0.13));
>             for (int r=0; r < input150Parsed.length; r++ ){
>                 for(int c=0; c < input150Parsed[r].length; c++){                        
>                     calculatedParValues[r][c] = ((totalSoldiers * (Integer.valueOf(input150Parsed[r][c]))) * Integer.valueOf(initialInput[c]));
>                 }
>             }
>           for (int i = 0; i < calculatedParValues.length; i++){
>         Log.e("TAG","Parsed parameter value = " + Arrays.toString(calculatedParValues[i]));
>         }
>           }
>     }); 
> ```

# html - 为什么字符长时会出现在底部？

> ID：14493841
> 
> 赞同：0
> 
> 时间：2013-01-24T04:12:36.883
> 
> 标签：html, css

我正在尝试进行响应式设计。

演示[http://jsfiddle.net/tbuU8/](http://jsfiddle.net/tbuU8/)

它应该是这样的图像。主要有左右两个部分。
左侧部分固定为 300px 宽度。
关于右侧部分，它可以缩小（缩小）到 300px。如果它比这更窄，右侧部分应该显示在底部，就像下图一样。

![在此处输入图像描述](../Images/d303011f358e0f565f4f637db6e15300.png)

*   右侧部分应保持在右侧，除非宽度缩小到 300 像素以下。
*   如果低于 300px，则应显示在底部。
*   如果是长文本，则需要在右侧部分的边缘中断

在我的演示中，当字符长度较长时，它会在底部显示右侧部分。
它需要休息并从新行开始。它总是试图在 1 行中显示这一点。

如何在右侧显示右侧部分，以及需要中断的文本。

![在此处输入图像描述](../Images/cf477dcc0556a6da0c8a6a4247bfe9db.png) ![在此处输入图像描述](../Images/78a5ea449ab178dc4af1fe1fe534ade6.png)

**我想要的输出**

```
July 22, 2013 11:34   Helloooooooooooooooooooooooooooooooooooooooooooooo     <= need break!
    John Smith        ooooooooooooooooooo!
      Avatar 
```

**HTML**

```
<div class="Row">
    <div class="Box">
        <div class="Left">  
            <div class="posted_at">July 22, 2013 11:34</div>
            <div class="user">John Smith</div>
            <div class="avatar">avatar</div>
        </div>
    </div>

    <div class="Box">
        <div class="Right">
            <div class="body">Helloooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo</div>
            <div class="image"></div>
        </div>
    </div>
</div> 
```

**CSS**

```
div.Row{
    border:1px solid rgb(0, 0, 0);
    min-width: 300px;
    width: 100%;
    background-color:#ffffff;
    margin-bottom: 20px;
    margin-right: 20px;
    float:left;
    display:block;  
}

div.Box{
    padding:0px;
    text-align:center;
    float:left;
    }

div.Left{
    width:300px;
    padding-top:5px;
    padding-bottom:15px;
    text-align:center;
    color:#000000;
    clear:both;
}

div.LeftImage{
    margin: 15px 15px 15px 15px;
}

div.Right{
    padding-top:15px;
    padding-right:10px;
    text-align:left;
    color:#000000;
    clear:both;
    min-width: 300px;
    word-break: break-all;

}

div.posted_at{
    padding:5px;
}

div.icon{
    display:inline-block;
    padding: 10px;
}

div.icon img{
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:59:59.500

```
try this 

div.Row
       {
        border:1px solid rgb(0, 0, 0);
        min-width: 300px;
        width: 100%;
        background-color:#ffffff;
        margin-bottom: 20px;
        margin-right: 20px;
        float:left;
        display:block;  
       }
div.Box
     {
      padding:0px;
      text-align:center;
     float:left;
    }
div.Left
    {
    width:300px;
    padding-top:5px;
    padding-bottom:15px;
    text-align:center;
    color:#000000;
    clear:both;
   }

div.LeftImage
   {
   margin: 15px 15px 15px 15px;
   }

div.Right
   {
   padding-top:15px;
   padding-right:10px;
   text-align:left;
   max-width:300px; word-wrap:break-word;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T04:19:45.047

用这个

```
.Row{
    border:1px solid rgb(0, 0, 0);
    width: 300px;
    background-color:#ffffff;
    margin-bottom: 20px;
    margin-right: 20px;
    float:left;
    display:block;  
}

.Box{
    width:700px;
    padding:0px;
    text-align:center;
    float:right;
    } 
```

# ruby - 如何确定 Ruby 脚本的 shell 执行上下文？

> ID：14493844
> 
> 赞同：2
> 
> 时间：2013-01-24T04:12:50.127
> 
> 标签：ruby, windows, command-line

有没有办法以编程方式确定是否正在从 Windows DOS shell、Linux bash shell 等运行 Ruby 脚本？

我正在尝试在任何支持它的控制台上发出 ANSI 颜色代码。我使用术语 ansicolor gem 和 win32console 将 ANSI 颜色代码转换为原生 Windows 命令行颜色序列。但是，我发现这个解决方案非常不稳定。

我只想在支持 ANSI 的控制台上发出 ANSI（请注意，此脚本在 Windows 和 Linux 上运行，带有各种备用第三方 shell）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:06:14.203

您可以使用父进程 ID 来确定它从哪里开始。`Process`您可以使用模块获取父进程 ID 。[但是请注意Process.ppid](http://www.ruby-doc.org/core-1.9.3/Process.html#method-c-ppid)上的此警告（在 Win32/64 上返回不可信的值。），您需要彻底测试此解决方案。获得父进程 ID 后，您可以在`win32_process`表上查找以获取进程的名称并检查其是否为`cmd.exe`. 下面的示例代码。

```
require 'win32ole'

wmi = WIN32OLE.connect("winmgmts://")
processes = wmi.ExecQuery("select * from win32_process where ProcessId = #{Process.ppid}")

processes.each do |process|
    if process.Name == "cmd.exe"
        puts "started from command prompt. Do something"
    else
        puts "started from elsewhere. Do something else"
    end     
end 
```

# autohotkey - 在“ahk_class SWT_Window0”窗口中运行自动热键时出现问题

> ID：14493845
> 
> 赞同：0
> 
> 时间：2013-01-24T04:12:51.300
> 
> 标签：autohotkey

我不确定这是否常见，但我无法让我的代码在这种类型的窗口中运行。它适用于我的所有其他窗口，除了一个，ahk_class SWT_Window0，我希望它在......去图。

我的代码是：

```
RButton::
SendInput {Click 166,350}
return 
```

非常简单，只需移动光标并单击即可。它适用于 google chrome wundow spy scite 和其他各种窗口，但不适用于正确的窗口。任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:49:17.293

杰克，

您是否尝试过直接在您的应用程序中使用扫描码？

这是一个例子。它在当前位置单击鼠标，然后发送 {Tab}。您需要根据需要更改此设置。您可以先使用 MouseMove,%XPos3%,%YPos3% 将鼠标移动到正确的位置

```
F8:: ; Press F8 to start macro
Send, {vk01} ; Click left mouse button
;Send, {scYYY} ; 
Send, {vk09sc00F} ; Send the Vk and SC codes for the {Tab} key.
Return 
```

让我知道这个是否奏效

# algorithm - 打印（或输出到文件）欧几里得算法的步数表

> ID：14493847
> 
> 赞同：1
> 
> 时间：2013-01-24T04:12:56.960
> 
> 标签：algorithm, python-3.x, pretty-print

我想打印（或以类似下面的人类可读格式发送到文件）任意大小的方表，其中每个表格单元格包含解决欧几里德算法所需*的步骤数，*以解决行/列标题中的两个整数，如这个（手写的表格，但我认为数字都是正确的）：

```
 1  2  3  4  5  6
1 1  1  1  1  1  1 
2 1  1  2  1  2  1
3 1  2  1  2  3  1
4 1  1  2  1  2  2
5 1  2  3  2  1  2
6 1  1  1  2  2  1 
```

理想情况下，该脚本将允许我选择起始整数（如上 1 或如下 11 或其他任意值）和结束整数（如上 6 或如下 16 或其他任意且大于起始整数的值），这样我也可以这样做：

```
 11 12 13 14 15 16
11  1  2  3  4  4  3
12  2  1  2  2  2  2
13  3  2  1  2  3  3
14  4  2  2  1  2  2
15  4  2  3  2  1  2
16  3  2  3  2  2  1 
```

我意识到表格关于对角线对称，因此只有一半的表格包含唯一信息，并且对角线本身始终是一个 1 步算法。

请参阅[此](http://en.wikipedia.org/wiki/Euclidean_algorithm#Algorithmic_efficiency)内容以及![求解欧几里得算法所需的步骤数](../Images/a8abcb833283f4022bbfe6ae6c9e2315.png)我所追求的图形表示，但我想知道图像未显示的任何两个整数的实际步数。

我有算法（可能有更好的实现，但我认为这些可行）：

计步器：

```
def gcd(a,b):
    """Step counter."""
    if b > a:
        x = a
        a = b
        b = x
    counter = 0
    while b:
        c = a % b
        a = b
        b = c
        counter += 1
    return counter 
```

列表生成器：

```
def gcd_steps(n):
    """List builder."""
    print("Table of size", n - 1, "x", n - 1)
    list_of_steps = []
    for i in range(1, n):
        for j in range(1, n):
            list_of_steps.append(gcd(i,j))
    print(list_of_steps)
    return list_of_steps 
```

但我完全不知道如何写表。我想过一个带有 i 和 j 的双重嵌套 for 循环，但我是 Python 新手，不知道编写表格的最佳方法（或任何方法）。我不需要特殊的格式，比如从表格单元格中偏移行/列头，因为我可以通过肉眼做到这一点，但只是让所有内容对齐以便我可以轻松阅读它对我来说太难了目前的技能水平，恐怕。我认为在两个嵌套的 for 循环中打印/输出可能是有意义的，因为我正在计算我需要的数字，这就是为什么列表生成器有一些打印语句以及返回列表，但我没有知道如何使用印刷魔法来做我所追求的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:13:49.117

尝试这个。程序逐行计算数据并在可用时打印每一行，以限制内存使用。

```
import sys, os

def gcd(a,b):
   k = 0
   if b > a:
      a, b = b, a
   while b > 0:
      a, b = b, a%b
      k += 1
   return k

def printgcd(name, a, b):
   f = open(name, "wt")
   s = ""
   for i in range(a, b + 1):
      s = "{}\t{}".format(s, i)
   f.write("{}\n".format(s))
   for i in range(a, b + 1):
      s = "{}".format(i)
      for j in range (a, b + 1):
         s = "{}\t{}".format(s, gcd(i, j))
      f.write("{}\n".format(s))
   f.close()

printgcd("gcd-1-6.txt", 1, 6) 
```

前面不会返回包含所有计算值的列表，因为它们是故意销毁的。然而，这很容易做到。这是一个带有哈希表的解决方案

```
def printgcd2(name, a, b):
   f = open(name, "wt")
   s = ""
   h = { }
   for i in range(a, b + 1):
      s = "{}\t{}".format(s, i)
   f.write("{}\n".format(s))
   for i in range(a, b + 1):
      s = "{}".format(i)
      for j in range (a, b + 1):
         k = gcd(i, j)
         s = "{}\t{}".format(s, k)
         h[i, j] = k
      f.write("{}\n".format(s))
   f.close()
   return h 
```

这是另一个带有列表列表的列表

```
def printgcd3(name, a, b):
   f = open(name, "wt")
   s = ""
   u = [ ]
   for i in range(a, b + 1):
      s = "{}\t{}".format(s, i)
   f.write("{}\n".format(s))
   for i in range(a, b + 1):
      v = [ ]
      s = "{}".format(i)
      for j in range (a, b + 1):
         k = gcd(i, j)
         s = "{}\t{}".format(s, k)
         v.append(k)
      f.write("{}\n".format(s))
      u.append(v)
   f.close()
   return u 
```

# ios - libcrypto 和 libGoogleAdMobAds 中的重复符号 _MD5

> ID：14493849
> 
> 赞同：1
> 
> 时间：2013-01-24T04:13:06.570
> 
> 标签：ios, linker, compiler-errors

我的项目在编译为 armv7 结构时出现此错误：

```
duplicate symbol _MD5 in:
    /Users/User1/Documents/codes/ProgramList1/libraries/armv7/lib/libcrypto.a(md5_one.o)
    /Users/User1/Documents/codes/ProgramList1/ProgramList1/ADs/AdsMoGoLib/AdNetworkLibs/AdMob_SDK_621/libGoogleAdMobAds.a(GADGestureCFiles.o)
ld: 1 duplicate symbol for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我用谷歌搜索了这个问题，我读到有人建议将两个库合并为一个以消除重复的符号，如下所示：

```
> lipo libGoogleAdMobAds.a -thin armv7 -output libGoogleAdMobAds-armv7.a
> mkdir armv7
> cd armv7/
> ar -x ../libGoogleAdMobAds-armv7.a 
> ar -x ../libcrypto.a 
> libtool -static -o ../libcrypto-googlead-armv7.a *.o 
```

最后，我回到项目，从链接标志中删除 libGoogleAdMobAds.a 和 libcrypto.a 并将新的组合库添加到项目中。

但我仍然得到同样的错误：

```
duplicate symbol _MD5 in:
    /Users/User1/Documents/codes/ProgramList1/libraries/armv7/lib/libGoogleAdMobAds-armv7.a(md5_one.o)
    /Users/User1/Documents/codes/ProgramList1/ProgramList1/ADs/AdsMoGoLib/AdNetworkLibs/libGoogleAdMobAds-armv7.a(GADGestureCFiles.o)
ld: 1 duplicate symbol for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

如您所见，同一个库中有重复的符号。我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:30:59.153

转发评论以获得答案

“您是否在项目/目标构建设置的其他链接器标志中设置了 all_load 标志？”

这是关于 all_load 作用的一个很好的详细解释：

[为什么我在 XCode 4.2 中的 three20 依赖项不再需要 -force_load？](https://stackoverflow.com/questions/7942616/why-is-force-load-no-longer-required-for-my-three20-dependencies-in-xcode-4-2/7942924#7942924)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T16:18:11.757

Remove `-all_load` in your build settings linker flag.

It is safe to remove, even if some libraries asked you to add that.

# jquery - 使用 jQuery Validate 插件将规则传递给类

> ID：14493850
> 
> 赞同：2
> 
> 时间：2013-01-24T04:13:08.647
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 官方网站上提供的 jQuery Validate Plugin 来验证我的表单。一切都很好，直到我必须通过规则，而不是基于 field `name`，而是基于`class`or `id`。我无法做到这一点。

这是我如何将规则传递给字段的示例`name="comment"`。

这是我的 jQuery 代码

```
$("#comForm").validate({
    rules: {
        comment: {
            required: true,
            minlength: 5,
            maxlength: 500
        }
    }
}); 
```

这是我的表格

```
 <form id="comForm" action="#" method="post" >
  <textarea rows="4" name="comment" placeholder="What do you think?" class="input-xxlarge" id="defaultform"></textarea></br>
  <textarea rows="4" name="othercomment" placeholder="What do you think?" class="input-xxlarge" id="defaultform"></textarea></br>
  <input type="submit" value="Rate!" class="btn btn-primary">
  </form> 
```

假设我想将规则传递给使用默认表单的每个字段`id`或使用`input-xxlarge` `class`. 那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T04:21:09.063

是的，这是可能的，但你真的不应该使用重复`id`的 's ......它是无效的 HTML，它会导致 JavaScript 问题。`class`如果您需要重复，请使用。

使用内置`rules()`方法添加规则并通过`class`. [请参阅文档。](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

然后使用 jQuery 的[`.each()`](http://api.jquery.com/jQuery.each/)方法将规则应用于所有使用相同`class`.

**HTML：**

```
<form id="myform">
    <textarea class="myclass" name="field1" ></textarea>
    <textarea class="myclass" name="field2" ></textarea>
</form> 
```

**jQuery：**

```
$('#myform').validate({
    // your other rules and options
});

// the following method must come AFTER .validate()
$('.myclass').each(function() {
    $(this).rules('add', {
        required: true,
        minlength: 5,
        maxlength: 500,
        messages: {
            required: "Required input",
            minlength: "Must be at least {0} characters",
            maxlength: "Must be less than {0} characters"
        }
    });
}); 
```

**[工作演示](http://jsfiddle.net/4ujFS/)**

* * *

另外，类似于这个问题：

[jQuery Validate set rule使用通配符查找目标字段](https://stackoverflow.com/q/13885056/594235)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:07:21.687

您可以通过数据规则属性应用规则。这是维护干净代码的最简单方法，也可能是最好的方法......

例子：

```
<input type="text" name="email" data-rule-required="true" data-rule-email="true">
<input type="text" name="password" id="passoword" data-rule-required="true" data-rule-minlength="6">
<input type="text" name="password-confirm" data-rule-required="true" data-rule-minlength="6" data-rule-equalsto="#password"> 
```

您甚至可以通过数据属性提供消息：

```
<input id="cemail" name="email" data-rule-required="true" data-rule-email="true" data-msg-email="Please enter a valid email address" /> 
```

在 JavaScript 中只需调用：

```
$('#myform').validate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:17:00.057

您可以使用标准 jquery 选择器向元素添加规则，如下所示：

```
$(".required").rules("add", { 
  required:true,  
  minlength:1
}); 
```

# c++ - 在析构函数上释放堆

> ID：14493851
> 
> 赞同：-1
> 
> 时间：2013-01-24T04:13:15.403
> 
> 标签：c++, winapi, memory, heap-memory

我有一个名为“字节”的类，它让我分配/释放动态内存。但我遇到了问题，我不知道在哪里释放它在析构函数上？或编写诸如 free() 之类的新函数

让我解释。

```
Byte string; // Default constructor created a heap saved in a private variable in class.

void assignsomething()
{
string += "Blabla"; // Created a block of memory
string += " Blabla2"; // Added data again.

} // if I write a destructor that free heap with HeapDestroy() i can't use data in main()

int main()
{
  assignsomething();
  MessageBoxA(0,string,0,0);
  // Byte.HeapFree(); 
} 
```

现在......是否可以设置析构函数将调用的位置？还是我下课后应该免费打电话？提前致谢。快乐编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:17:47.090

如果您在堆栈上创建它（您不是通过 new 创建它），那么当它超出范围时将自动调用析构函数。如果您通过 new 创建它，您需要在完成后使用 operator delete 自己释放它。不要在其上调用 free()，使用 new 和 delete 操作符。不要尝试手动调用析构函数，只需使用 delete

是的，析构函数应该释放类中剩下的所有动态分配的内存，除非你在类外有一个指向它的指针。尽量不要这样做，它会使内存管理变得困难，并且通常被认为是糟糕的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:59:14.277

在构造函数中获取内存，在析构函数中释放它。本地或静态变量是自动的，但是当你有一个“新”时，你必须使用“免费”或“删除”或其他东西来告诉操作系统这部分内存现在对你来说没用了，而操作系统可以拿回来

# css - jquery手机升级

> ID：14493854
> 
> 赞同：0
> 
> 时间：2013-01-24T04:13:26.710
> 
> 标签：css, jquery-mobile, mobile

我在网上购买了一个主题，我相信它使用的是旧的 jquery mobile 而不是新的。

现在在我的标题中它看起来像这样：

```
<!-- Mobile Tags -->
    <meta content="initial-scale=1.0, user-scalable=no, minimum-scale=1, maximum-scale=1" name="viewport" >
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />   
    <meta name="apple-mobile-web-app-capable" content="yes">

    <!-- You can put your own logo below linking photos for splash screen-->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/images/touch/apple-touch-icon-144x144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/images/touch/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/images/touch/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="assets/images/touch/apple-touch-icon-57x57-precomposed.png">
    <link rel="shortcut icon" href="assets/images/touch/apple-touch-icon.png">
    <!-- / Mobile Tags -->

    <!-- Splash screens -->
    <!-- iPhone 320x460 -->
    <link href="assets/images/splashscreens/apple-touch-startup-image-320x460.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)" rel="apple-touch-startup-image">
    <!-- iPhone (Retina) 640x920 -->
    <link href="assets/images/splashscreens/apple-touch-startup-image-640x920.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
    <!-- iPhone 5 640x1096-->
    <link href="assets/images/splashscreens/apple-touch-startup-image-640x1096.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
    <!-- iPad 768x1004 / 748x1024-->
    <link href="assets/images/splashscreens/apple-touch-startup-image-768x1004.png" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)" rel="apple-touch-startup-image">
    <link href="assets/images/splashscreens/apple-touch-startup-image-748x1024.png" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)" rel="apple-touch-startup-image">
    <!-- iPad (Retina) 1536x2008 / 1496x2048 -->
    <link href="assets/images/splashscreens/apple-touch-startup-image-1536x2008.png" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
    <link href="assets/images/splashscreens/apple-touch-startup-image-1496x2048.png" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
<!-- / Splash Screens -->

    <!-- CSS Files -->
    <link rel="stylesheet" href="assets/css/jquery.mobile.structure-1.0.1.min.css" type="text/css">

    <link rel="stylesheet" href="assets/css/jquery.mobile.1.0.1.min.css" />
    <link rel="stylesheet" href="assets/css/add2home.css"><!-- Iphone Bubble  -->
    <link rel="stylesheet" href="assets/css/icons/icons.css" type="text/css" >
    <link rel="stylesheet" href="assets/css/icons/nav-icons.css" type="text/css" >
    <link rel="stylesheet" href="assets/css/flexslider.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="assets/css/style.css" type="text/css" > <!-- Theme Style Sheet File -->
    <link rel="stylesheet" href="assets/css/normalize.css">
    <link rel="stylesheet" href="assets/css/main.css">

    <link rel="stylesheet" type="text/css" href="assets/css/icons/nav-icons-black.css"> 
```

为了将它升级到最新的 jquery mobile，我尝试将这些行添加到头部的底部，但我搞砸了一些东西，因为按钮变成了双倍。它似乎与真正秃头的 css 混为一谈：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:03:17.537

当然，您必须删除所有指向旧版本 jQuery Mobile 的链接，例如：

```
<link rel="stylesheet" href="assets/css/jquery.mobile.1.0.1.min.css" /> 
```

此外，请注意 ajax-loader 图像不再是 .png 而是 .gif

# python - Python / PyGame，Ubuntu 12.04 上的 MIDI

> ID：14493857
> 
> 赞同：6
> 
> 时间：2013-01-24T04:13:34.263
> 
> 标签：python, ubuntu, pygame, midi

试图让 MIDI 接口在 Ubuntu 12.04 上与 pygame 一起工作。我知道键盘可以工作，因为它可以控制 vkeybd 并在 OSX 上与 PyGame 一起工作，所以 python 中的 MIDI 存在问题。

```
$ python -m pygame.examples.midi --list

Traceback (most recent call last):
  File "/usr/lib/python2.7/runpy.py", line 162, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/usr/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/usr/lib/python2.7/dist-packages/pygame/examples/midi.py", line 820, in <module>
    print_device_info()
  File "/usr/lib/python2.7/dist-packages/pygame/examples/midi.py", line 25, in     print_device_info
    pygame.midi.init()
  File "/usr/lib/python2.7/dist-packages/pygame/midi.py", line 71, in init
    import pygame.pypm
ImportError: /usr/lib/libportmidi.so.0: undefined symbol: snd_seq_event_input_pending 
```

python-pygame 通过包管理器安装，python-pm 也是如此。

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T05:11:31.553

虽然这不能完全回答您的问题，但它可以帮助您自己调试问题。

错误是这样的：

```
ImportError: /usr/lib/libportmidi.so.0: undefined symbol: snd_seq_event_input_pending 
```

这`undefined symbol`是动态链接器未能找到`snd_seq_event_input_pending`函数所需的代码。

在一个示例 32 位 Oneiric 系统上，我们可以这样做来查看`libportmidi.so.0`.

```
nm -DC /usr/lib/libportmidi.so.0 | grep snd_seq_event_input_pending

U snd_seq_event_input_pending 
```

这告诉我们`libportmidi`库需要代码，`snd_seq_event_input_pending`但符号未定义。因此，`libportmidi`为了发挥作用，它还必须加载一个包含此功能的附加库。

在 Oneiric 上，我发现这个符号是在`libasound2.so.2`.

```
nm -DC /usr/lib/i386-linux-gnu/libasound.so.2 | grep snd_seq_event_input_pending

000a0fa0 T snd_seq_event_input_pending 
```

`T`表示该函数存在并且在文本（代码）段中。

通常，关联库的链接会自动发生，`libasound.so.2`应该由`libportmidi`. 在同一个系统上。

```
ldd /usr/lib/libportmidi.so.0

....
libasound.so.2 => /usr/lib/i386-linux-gnu/libasound.so.2 (0x00e35000) 
```

这表明`libmidi`取决于`libasound`。在`ldd`您的评论中的输出列表中没有对 的引用`libasound`，因此它不会`libasound.so.2`在加载时尝试自动动态链接，从而导致您的错误。

可能出现错误的原因有几个：

*   链接方式`libportmidi`可能从 Oneiric 变为 Precise。例如`libportmidi`，可能会尝试为`libasound`. （不太可能）。
*   包装中存在一个错误`libportmidi`，它没有`libasound.so.2`按应有的方式引用。这可能是特定于平台的（例如，只有 64 位系统上的错误）。

我建议您尝试找出系统上包含该`snd_seq_event_input_pending`函数的库，然后向后工作以尝试确定为什么它没有与`libportmidi`.

以下 bash 命令将帮助您找到实现`snd_seq_event_input_pending`. 如果您没有找到任何东西，则说明您机器上安装的库有问题。

```
find /lib /usr/lib -name "lib*.so.*" | while read f; do
    if nm -DC "$f" | grep -q 'T snd_seq_event_input_pending'; then
        echo "$f"
    fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:48:05.937

如果你想现在修复它，你可以检出最新版本的[portmidi](http://portmedia.sourceforge.net/portmidi/)并按如下方式构建库（假设你已经检出或解压 portmidi 到一个名为 portmidi 的目录中）：

```
cd portmidi
make -f pm_linux/Makefile 
```

默认安装不会构建动态版本的库，因此您需要像这样构建一个：

```
gcc -shared -Wl,-soname,libportmidi.so.0 -o  pm_linux/libportmidi.so.0 pm_common/pmutil.o pm_linux/pmlinuxalsa.o pm_linux/pmlinux.o pm_common/portmidi.o -lasound 
```

然后您可以复制旧库（以防万一），然后将这个新库复制到它的位置：

```
sudo cp /usr/lib/libportmidi.so.0 /usr/lib/libportmidi.so.0.orig
sudo cp pm_linux/libportmidi.so.0 /usr/lib/libportmidi.so.0 
```

您的应用程序现在应该可以运行...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T11:00:38.223

我有完全相同的问题（在 Ubuntu 12.04.1 上），例如使用 Frescobaldi 中的 MIDI 播放工具（这是一个 Python 应用程序）。这曾经可以正常工作，但现在不行了。

这显然是一个错误编译的 portmidi 包，它于 2013 年 1 月 25 日推出，请参阅[https://launchpad.net/ubuntu/+source/portmidi/1:200-0ubuntu1.12.04.1](https://launchpad.net/ubuntu/+source/portmidi/1:200-0ubuntu1.12.04.1)。降级到以前的 1:200-0ubuntu1 包为我解决了这个问题。

我想正确的做法是在[https://bugs.launchpad.net/ubuntu/+source/portmidi/+bugs](https://bugs.launchpad.net/ubuntu/+source/portmidi/+bugs)上的 Launchpad 上针对 1:200-0ubuntu1.12.04.1 版本提交错误报告。如果它没有得到修复，我们可能还会询问 falkTX，他是否愿意在他的 KXStudio PPA 中提供一个工作包。

仅作记录，以下是 ldd 为我系统上的 1:200-0ubuntu1 libportmidi 提供的内容：

```
linux-vdso.so.1 =>  (0x00007fffe9bff000)
libasound.so.2 => /usr/lib/x86_64-linux-gnu/libasound.so.2 (0x00007f26264cb000)
libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f26262ae000)
libporttime.so.0 => /usr/lib/libporttime.so.0 (0x00007f26260ab000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f2625cec000)
libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f26259f0000)
libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f26257eb000)
librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f26255e3000)
/lib64/ld-linux-x86-64.so.2 (0x00007f26269f4000) 
```

以及破碎的 1:200-0ubuntu1.12.04.1 版本：

```
linux-vdso.so.1 =>  (0x00007fff9e3ff000)
libporttime.so.0 => /usr/lib/libporttime.so.0 (0x00007fb84ac71000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fb84a8b2000)
libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fb84a694000)
/lib64/ld-linux-x86-64.so.2 (0x00007fb84b0af000) 
```

因此，任何没有碰巧链接到 libasound2 本身的应用程序都将被处理。具体来说，Python portmidi 模块似乎就是这种情况。（至少从 Ubuntu 12.04 开始，gcc 默认使用 --as-needed 链接器标志，这一事实也加剧了这种错误。我敢打赌，Ubuntu 存储库中仍有相当多的包被破坏正因为如此。）

# regex - 在Notepad ++中寻求正则表达式以仅在两个引号[“]之间搜索和替换CRLF

> ID：14493861
> 
> 赞同：2
> 
> 时间：2013-01-24T04:14:22.653
> 
> 标签：regex, notepad++, replace

我有一个包含大约 600 条记录的 CSV 文件，我需要用 [空格] 替换一些 [CRLF] 但只有当 [CRLF] 位于两个 ["] （引号）之间时。当第二个 ["]遇到然后它应该跳过该行的其余部分并转到文本中的下一行。

我真的没有起点。希望有人提出建议。

例子：

```
John und Carol,,Smith,,,J.S.,,,,,,,,,,,,,+11 22 333 4444,,,,,"streetx 21[CRLF]
New York City[CRLF]
USA",streetx 21,,,,New York City,,,USA,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Normal,,My Contacts,[CRLF] 
```

在这种情况下，第一个 ["] 之后的两个 [CRLF] 需要用空格 [ ] 替换。当遇到第二个 ["] 时，跳过行尾并转到下一行。

再说一次，现在在下一行，在遇到第一个 ["] 之后替换所有 [CRLF] 直到遇到第二个 ["]。[CRLF] 的数量各不相同。在 CSV 文件中，逗号 [,] 在 (23) 之前和 (65) 之后的数量，两个引号 ["] 是恒定的。

所以也许可以使用逗号计数器。我不知道。

感谢您的反馈。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T06:27:13.277

这将只使用一个正则表达式（在 Notepad++ 中测试）：

在字段中输入此正则表达式`Find what`：

`((?:^|\r\n)[^"]*+"[^\r\n"]*+)\r\n([^"]*+")`

在`Replace with`字段中输入此字符串：

`$1 $2`

确保`Wrap around`选中复选框（和`Regular expression`单选按钮）。

根据需要执行`Replace All`多次（直到弹出“0 次出现”对话框）。

**解释：**

```
(
  (?:^|\r\n)     Begin at start of file or before the CRLF before the start of a record
  [^"]*+         Consume all chars up to the opening "
  "              Consume the opening "
  [^\r\n"]*+     Consume all chars up to either the first CRLF or the closing "
)                Save as capturing group 1 (= everything in record before the target CRLF)
\r\n             Consume the target CRLF without capturing it
(
  [^"]*+         Consume all chars up to the closing "
  "              Consume the closing "
)                Save as capturing group 2 (= the rest of the string after the target CRLF) 
```

注意：*+ 是所有格量词。适当地使用它们来加快执行速度。

**更新：**

这个更通用的正则表达式版本适用于任何换行序列（`\r\n`,`\r`或`\n`）：

`((?:^|[\r\n]+)[^"]*+"[^\r\n"]*+)[\r\n]+([^"]*+")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:35:32.087

在这种情况下，源数据是由 GMail 中的导出功能为您的联系人生成的。在下面概述的修改之后（没有 RegEx），结果可用于整理您的联系人数据库并将其重新导入 GMail 或 MS Outlook。是的，我站在@alan 和@robinCTS 的肩膀上。谢谢你俩。

5个步骤的说明：

使用 Notepad++ / 查找替换 / 扩展搜索模式 / 环绕 = on

-1- 将所有 [CRLF] 替换为唯一的字符集或字符串（我使用 [ `~~`]）

查找：`\r\n` 并替换为：`~~` 文件内容现在仅在一行上。

-2- 现在我们需要分隔标题行。对于这个移动到第一个记录正好在第 88 个之前开始的位置。逗号（包括第 87 个后的单词。逗号 [,]）并通过按回车键手动输入 [CRLF]。现在有两行：标题和记录。

-3- 现在找到所有 [ `,~~`] 并替换为 [ `,\r\n`] 结果是每行一条记录。

-4- 删除剩余的 [~~] find:`~~` 并替换为： [ `] 一个空格。该文件现在已清除不需要的 [CRLF]。`

 `-5- 保存文件并按预期使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:13:48.943

也许分三步完成（假设您在 CSV 中有 88 个字段，因为您说之前有 23 个逗号，每秒有 65 个逗号`"`）

**第 1 步**：用文件中没有的某个字符替换所有 CR/LF，例如`~`

搜索：`\r\n`替换：`~`

**第 2 步**：将所有`~`第 88 个“逗号组”（或 CSV 中的许多字段）替换为`\r\n`-- 以重新插入所需的 CSV 换行符：

搜索：`((?:[^,]*?,){88})~`替换：`$1\r\n`

**第3步**`~`：用空格替换所有剩余的

搜索`~` 替换：`<space>``

# cross-platform - 在 go/golang 中表示换行符的最便携/跨平台的方式是什么？

> ID：14493867
> 
> 赞同：42
> 
> 时间：2013-01-24T04:15:30.917
> 
> 标签：cross-platform, go, newline, portability

目前，为了表示 go 程序中的换行符，我使用`\n`. 例如：

```
package main

import "fmt"

func main() {
    fmt.Printf("%d is %s \n", 'U', string(85))
} 
```

... 将产生`85 is U`后跟换行符。

但是，这似乎并不是跨平台的。看看其他语言，PHP 用一个全局常量 ( `PHP_EOL`) 来表示它。`\n`在 go / golang 中以跨平台特定方式表示换行符的正确方法是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-24T04:50:45.880

我对此感到好奇，所以决定看看究竟是做什么的`fmt.Println`。[http://golang.org/src/pkg/fmt/print.go](http://golang.org/src/pkg/fmt/print.go)

如果滚动到最底部，您将看到始终使用的`if addnewline`位置`\n`。我很难说这是否是最“跨平台”的方式，并且 Go 在早期最初与 linux 相关联，但这就是 std lib 的所在。

我最初打算建议只使用`fmt.Fprintln`，这可能仍然有效，就好像当前功能不合适一样，可以提交一个错误，然后只需要使用最新的 Go 工具链编译代码。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-24T21:18:08.570

让操作系统确定换行符在许多情况下是错误的。您真正想知道的是“记录”分隔符是什么，Go 假设您作为程序员应该知道这一点。

即使二进制文件在 Windows 上运行，它也可能正在使用来自 Unix 操作系统的文件。

行尾取决于文件或文档的来源所说的行尾，而不是运行二进制文件的操作系统。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-04-22T07:05:20.430

您始终可以使用特定于操作系统的文件来声明某些常量。就像`_test.go`文件仅在执行时使用一样`go test`，`_[os].go`仅在构建到该目标平台时才包含。

基本上你需要添加以下文件：

```
 - main.go
 - main_darwin.go     // Mac OSX
 - main_windows.go    // Windows
 - main_linux.go      // Linux 
```

您可以在每个文件中声明一个 LineBreak 常量，`main_[os].go`并将您的逻辑放在`main.go`.

你文件的内容看起来像这样：

**main_darwin.go**

```
package somepkg

const LineBreak = "\n" 
```

**main_linux.go**

```
package somepkg

const LineBreak = "\n" 
```

**main_windows.go**

```
package somepkg

const LineBreak = "\r\n" 
```

只需在您的`main.go`文件中，编写代码并参考`LineBreak`

**main.go**

```
package main

import "fmt"

func main() {
    fmt.Printf("%d is %s %s", 'U', string(85), LineBreak)
} 
```

# javascript - 在 Javascript 中使用 innerHTML 更改值

> ID：14493869
> 
> 赞同：1
> 
> 时间：2013-01-24T04:15:53.520
> 
> 标签：javascript, innerhtml, scoring

自从我使用 Javascript 和 HTML 编码以来已经有一段时间了。我正在尝试构建一个基本的记分牌系统，该系统将在获得积分时为主客场得分添加积分。我目前正在制作 Home，当我完成基本操作后，我基本上会复制 Away。

这是我的代码：

```
<script type="text/javascript">

function addTD(){

    document.getElementById("score").innerHTML +=6;

}

function addPAT(){document.getElementById("score").innerHTML ++;}

</script>

<div id="score"></div>

<a href="javascript:addTD();">Touchdown</a>
<a href="javascript:addPAT();">PAT</a> 
```

当我选择 Touchdown 链接时，它会添加一个 6，当我选择 PAT 链接时，它会将 6 更改为 7。但是当我再次选择 Touchdown 时，它会在 7 之后添加 6。

```
76
Touchdown PAT 
```

当我再次选择 Touchdown 时，如何将 7 更改为 13？

在此先感谢您的帮助。布兰登

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T04:19:26.733

改成

```
function addTD(){            
   document.getElementById("score").innerHTML=
        parseInt(document.getElementById("score").innerHTML,10)+6;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T04:19:45.707

`innerHTML`是一个字符串，而不是一个整数。

要增加当前值，您可以使用`parseInt`：

```
function addPAT(){
    var scoreEl = document.getElementById("score");
    scoreEl.innerHTML = parseInt(scoreEl.innerHTML, 10) + 1;
} 
```

编辑：正如 Blender 所指出的，您还应该指定字符串是以 10 为底的数字（`parseInt`函数的第二个参数）。否则，类似的数字`012`可以解释为八进制数。

MDN 链接：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T04:20:30.360

您将要使用[`parseInt`](http://www.w3schools.com/jsref/jsref_parseint.asp)它，以便 Javascript 知道您在谈论整数而不仅仅是文本。

# html - 切换到纯 HTML 的移动视图

> ID：14493870
> 
> 赞同：3
> 
> 时间：2013-01-24T04:15:55.273
> 
> 标签：html, mobile

我需要使用纯 HTML 或 javascript 切换到网站的移动视图......呃，任何不需要服务器端脚本的东西。我们的网站是通过 Dropbox 临时托管的。（[http://teammetalcow.com](http://teammetalcow.com)重定向到公共文件夹中的 HTML 文件。）我需要一种方法，以便我们可以检测用户的设备类型，然后适当地显示移动或桌面版本。最好有一种简单的方法来添加移动网站。这甚至可能吗？如果你能提供帮助，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:05:32.417

您可以尝试一些库，如断点：[https](https://github.com/martinmartinmartin/breakpoint/) ://github.com/martinmartinmartin/breakpoint/ 或研究这个javascript：[http ://www.sitepoint.com/javascript-media-queries/](http://www.sitepoint.com/javascript-media-queries/)

您只需要使用 javascript 检测设备，然后重定向。

```
// in case of a viewport
if (document.documentElement.clientWidth < 900) {
// scripts --> redirect
    window.location = "http://www.disney.com"
}

// in case of a screen
if (screen.width < 900) {
// scripts --> redirect
    window.location = "http://www.disney.com"
} 
```

继续

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:47:18.380

为此，您可以做很多不同的事情。带有媒体查询的 CSS 是一种解决方案，但提供移动版网站的更简单的方法是进行实际设备检测，并根据设备类型加载网站的替代版本。

如果您使用的是 Apache 网络服务器，[Apache Mobile Filter提供了一种非常轻松的方式来执行此操作。](http://www.apachemobilefilter.org/)它为您处理设备检测。一旦您以某种方式检测到移动设备，您可以将用户重定向到特定于移动设备的网站（从单独的域或子目录或类似的东西提供服务），或者使用您用于生成网站的任何后端代码在检测到移动设备时显示网站的移动版本（AMF 将设置 HTTP 标头，告诉您请求是否来自移动设备、平板电脑等）。

还有其他选择，但这些可能是最简单的方法。

# ios - 从左到右收缩 UIView

> ID：14493871
> 
> 赞同：1
> 
> 时间：2013-01-24T04:15:59.797
> 
> 标签：ios, uiview, shrink

我有以下代码从左到右缩小 UIView 并在动画完成后将其从超级视图中删除：

```
 UIView* coverView = [[UIView alloc]initWithFrame:CGRectMake(100, 100, 300, 50)];
    UIImageView* imageView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"swipe_rl.png"]];
    [imageView setContentMode:UIViewContentModeScaleToFill];
    [imageView setFrame:coverView.bounds];
    [coverView addSubview:imageView];
    [coverView setAutoresizingMask:UIViewAutoresizingFlexibleWidth];
    coverView.clipsToBounds = YES;
    [self.view addSubview:coverView];
    CGRect frame = coverView.frame ;
    [UIView animateWithDuration:5.0 animations:^{
    [coverView setFrame:CGRectMake(frame.origin.x + frame.size.width, frame.origin.y, 0, frame.size.height)];
    } completion:^(BOOL finished){
        [coverView removeFromSuperview];
    }]; 
```

但是，图片的左侧部分保留，图片的右侧部分消失，如您在图片中看到的那样。出于特定目的，我希望左侧部分消失而右侧部分保留。我该怎么做？

对于那些想知道我为什么想要这个的人：

```
- Basically, I want a display-from-left-to-right animation (It means you have a picture and the left of the picture appears first and the the middle and the whole picture appears)
- I do this by adding a second view above the first picture and then shrink the second view from left to right. The first view will then be revealed from left to right.
- Look at http://i1289.photobucket.com/albums/b510/yenmach/right_to_left_zps80b9e9bb.jpg and http://i1289.photobucket.com/albums/b510/yenmach/left_to_right_zps9214dc4a.jpg 
```

![从头缩小](../Images/931e0b69b24af55a2bbeeb9bae460fe8.png)

![在动画中间收缩](../Images/a80dc3d2e3bc7a42be3bc3990aede432.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T05:38:50.647

//尝试这个.......

```
 CGRect frame = coverView.frame ;
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:5.0];
[UIView setAnimationDelay:0];
[UIView setAnimationCurve:UIViewAnimationCurveLinear];
imageView.frame = CGRectMake(frame.origin.x - 2*frame.size.width,imageView.frame.origin.y, frame.size.width, frame.size.height);
coverView.frame = CGRectMake(frame.origin.x + frame.size.width, frame.origin.y, frame.size.width, frame.size.height);
[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:58:23.203

尝试更改 UIImageView [contentMode](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW99)属性，

```
[imageView setContentMode: UIViewContentModeRight]; 
```

我有同样的要求，当时这对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:22:15.557

不完全是一个解决方案，而是一种解决方法，如果您要使用具有一致背景（理想情况下为纯色）的它，您可以让另一个视图在图像视图上方设置动画，然后在动画完成后将两者都删除。

# facebook - 是否可以跟踪使用 Open Graph 协议采取的“行动”总数

> ID：14493872
> 
> 赞同：0
> 
> 时间：2013-01-24T04:16:09.633
> 
> 标签：facebook, facebook-graph-api, facebook-like

使用 OpenGraph Facebook API，我创建了一个自定义操作“提交”和对象“投票”。

假设我有几个页面，每个页面都有自己的“投票”元数据。我怎么能知道每个页面有多少“提交”/喜欢？

# android - Webview 高度没有更新？

> ID：14493873
> 
> 赞同：0
> 
> 时间：2013-01-24T04:16:13.003
> 
> 标签：android, webview

> 我正在使用 HTML 图书阅读器，因此在网络视图中我正在加载网页。这里我有放大和缩小按钮，所以点击放大我正在增加网络视图参数，即宽度和高度，但我的问题是在更改参数后，高度参数没有更新，这意味着它不会达到新的给定高度。特别是在缩小的情况下，它会显示以前的高度本身，但宽度可以正常工作并且内容也会缩小。它不会更新如果我单击某些按钮或移动到下一页，它会正确出现，直到发生任何单击事件为止的高度。
> 
> 所以我的主要问题是，如果缩小网络视图高度参数设置不正确，请给我任何建议。我在布局参数更改后也调用了 invalidate() 但无法正常工作，因此请告诉我任何可行的解决方案并提前致谢。

# opengl - opengl 模板缓冲区多个同时使用

> ID：14493877
> 
> 赞同：1
> 
> 时间：2013-01-24T04:16:27.857
> 
> 标签：opengl, stencil-buffer

我已经成功地将 OpenGL 的模板缓冲区用于场景中的单个实例。但是，我不确定如何在同一场景的两个不同地方使用它。依次定义两个模板形状会阻止其中任何一个工作，并且我尝试将一个用途嵌套在另一个用途中也不起作用。我已经看到在同一场景中多次使用模板缓冲区的示例，但我无法理解或调整代码。这是我到目前为止能够完成的工作。

```
void display(void) {
    // store floor shape in stencil buffer
    glClearStencil(0);
    glClear(GL_STENCIL_BUFFER_BIT);
    glEnable(GL_STENCIL_TEST);
    glStencilMask(1);
    glStencilFunc(GL_ALWAYS, 1, 1);
    glStencilOp(GL_REPLACE, GL_REPLACE, GL_REPLACE);
    floor->draw();
            glBegin(GL_QUADS);                   //
                glVertex3f(0.0, 0.0, 0.0);       //
                glVertex3f(0.0, 100.0, 0.0);     //
                glVertex3f(0.0, 100.0, 100.0);   //
                glVertex3f(0.0, 0.0, 100.0);     //
            glEnd();                             //

    // draw scene outside floor
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    scene();

    // draw reflection of scene in floor
    glStencilFunc(GL_EQUAL, 1, 1);
    glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);
    glPushMatrix();
    glScalef(1.0, 1.0, -1.0);
    scene();
    glPopMatrix();
    glDisable(GL_STENCIL_TEST);

    // draw translucent floor
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glColor4f(1.0, 1.0, 1.0, 0.7);
    floor->draw();
    //windowHole();
    glDisable(GL_BLEND);

    glFlush();
    glutSwapBuffers();
    glutPostRedisplay();
} 
```

![程序运行截图](../Images/427c99f0b1beae775559f07df3aa339a.png)

# .net - Html 到 PDF 转换，导致文本重叠

> ID：14493887
> 
> 赞同：1
> 
> 时间：2013-01-24T04:17:41.557
> 
> 标签：.net, abcpdf

我正在使用 abcpdf 转换器将文本转换为 PDF。

我的 Html 文档有多行：-

```
<tr><td>somecontent1</td></tr>
<tr><td>somecontent2</td></tr>
<tr><td>somecontent3</td></tr>
<DIV style="PAGE-BREAK-BEFORE: always"></DIV>
<tr><td>somecontent4</td></tr>
<tr><td>somecontent5</td></tr>
<tr><td>somecontent6</td></tr> 
```

现在我期待的是前 3 行应该出现在第 1 页上，其余 3 行出现在第 2 页上。

因为第一页的其中一行内容很大，所以第一页第三行的一半内容会出现在第二页。

如果不适合当前页面，我正在寻找一种将内容转移到下一页的方法

如果我不够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:40:45.130

这取决于您要打印的页面尺寸，您需要计算每页允许的高度，如果您的第 3 行内容超过该高度，则`<DIV style="PAGE-BREAK-BEFORE: always"></DIV>`在此之前插入。

[这里](https://stackoverflow.com/questions/2132382/tell-abcpdf-to-scale-the-html-to-fit-on-a-single-pdf-page)类似

# html - 如何将图像放在另一个图像后面，然后向上滑动？

> ID：14493891
> 
> 赞同：0
> 
> 时间：2013-01-24T04:18:07.663
> 
> 标签：html, z-index, fadein, slidetoggle, slideup

我目前有两个图像“图像 A”和“图像 B”。截至目前，我的意图是淡入图像 A，然后淡入其后面的图像 B（同时保持在页面的中心）。然而，相反，图像 B 似乎正在推高图像 A。我正在使用 z-index，但我可能做错了，因为它不是很有效。

在 IMAGE B 中淡入后，正确地我也想将它滑到 IMAGE A 的正上方。谢谢你的帮助！

![图片A](../Images/1ed7823f95a693165536befa72d6839e.png)

![图B](../Images/d5931c99c8aa2711863fa729bf2f48ac.png)

我附上了一个 jsfiddle 以更好地演示发生了什么：http: [//jsfiddle.net/YQwZ6/](http://jsfiddle.net/YQwZ6/)

## HTML：

```
<style type="text/css">
</style>
<script src="http://code.jquery.com/jquery-1.4.4.min.js" type="text/javascript">

</script>
<script type="text/javascript">
    $(document).ready(function() {
    $('#pocket').hide().delay(1000).fadeIn(3000).delay(2000);
    $('#pop').hide().delay(1000).fadeIn(8000).delay(2000);

});
</script>
<body>
<center>
    <div id="pics" align="center">
        <table width="100%" height="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
                <td valign="middle" align="center">
                    <table cellpadding="0" cellspacing="0" border="0">
                        <tr>
                            <td height="200">
                                <center>
                                    <div id="pocket" style="z-index:5000"><a><img src="http://www.cjboco.com/assets/page-extras/cj-flashy-slideshow/image_a.jpg"/></a>

                                    </div>
                                    <div id="pop" style="z-index:100"><a><img src="http://www.cjboco.com/assets/page-extras/cj-flashy-slideshow/image_b.jpg"/></a>

                                    </div>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </div> 
```

## CSS：

```
body {
margin-left: 0px;
margin-top: 0px;
margin-right: 0px;
margin-bottom: 0px;
background-color: #FFFFFF;
background-repeat: repeat;
color: #333366;
}
#pocket, #pop {
position:relative;
display: none;
float:center;
}
#pics {
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:24:10.763

改变这个

```
$('#pocket').hide().delay(1000).fadeIn(3000).delay(2000);
$('#pop').hide().delay(1000).fadeIn(8000).delay(2000); 
```

对此

```
$('#pocket').hide().delay(1000).fadeIn(8000).delay(2000);
$('#pop').hide().delay(1000).fadeIn(3000).delay(2000); 
```

还有这个

```
#pocket, #pop {
position:relative; 
```

对此

```
#pocket, #pop {
position:absolute;
left: 0;
top: 0; 
```

现在，只需将图像放置在您希望它们出现的位置。如果它们需要居中，请在相对定位的 DIV 中使用它们，以便您可以使用`margin: 0 auto;`它来居中。

对您的 HTML 进行了一些处理，我将其清理为：

HTML

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.4.4.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#pocket').hide().delay(1000).fadeIn(8000).delay(2000);
            $('#pop').hide().delay(1000).fadeIn(3000).delay(2000);
        });
    </script>
</head>
<body>
    <div id="pics" align="center">
        <div id="pocket" style="z-index:5000"><a><img src="http://www.cjboco.com/assets/page-extras/cj-flashy-slideshow/image_a.jpg"/></a></div>
        <div id="pop" style="z-index:100"><a><img src="http://www.cjboco.com/assets/page-extras/cj-flashy-slideshow/image_b.jpg"/></a></div>
    </div>
</body>

</html> 
```

CSS

```
#pics {
    position: relative;
    width: 200px;
    margin: 10px auto;
}

#pocket, #pop {
    position:absolute;
    left: 0;
    top: 0;
    display: none;
    float:center;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T04:39:55.630

编辑：

现在看这个例子：

[**看演示**](http://jsfiddle.net/akhurshid/8UHWr/)

如果是，那么下面给出了一些更改：

**CSS：**

```
#pocket, #pop {    
    display: none;
    float:center;
}

#pocket {
    position:relative;
    z-index: 2;
    top: 0px;
}

#pop {
    position:absolute;
    z-index: 1;
    top: 180px;
} 
```

**从下面给出的 HTML 代码中删除`z-index`值：**

```
 <div id="pocket" style="z-index:5000">
 and
 <div id="pop" style="z-index:100"> 
```

**使用 jQuery：**

```
$('#pocket').hide().delay(1000).fadeIn(1000).delay(500);
$('#pop').hide().delay(1000).fadeIn(4000).delay(500).fadeOut(500).animate({
    'z-index' : 3
}, 500).fadeIn(500); 
```

# java - 在同一类的其他方法中使用 get 方法的 Java 约定是什么？

> ID：14493892
> 
> 赞同：4
> 
> 时间：2013-01-24T04:18:16.993
> 
> 标签：java, coding-style, convention

在java类中编写get方法后，是在同一个类中使用get方法还是变量本身更好？

例如：

```
if(a.getWidth()>this.getWidth()) 
```

或者：

```
if(a.getWidth()>this.width) 
```

如果我应该使用 this.anything 这么多，我也很困惑。将相同类型的对象相互比较时似乎更容易阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T04:21:40.080

> 在同一个类中使用get方法还是变量本身更好？

恕我直言，使用该变量。访问器方法主要供其他对象使用。

> 如果我应该使用 this.anything 这么多，我也很困惑。将相同类型的对象相互比较时似乎更容易阅读。

您并不*总是*需要显式地使用`this`参考。它主要用于可读性，就像您说的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T04:43:38.247

我认为使用 getter 方法对可维护性更好。考虑[Null Object 模式](http://en.wikipedia.org/wiki/Null_Object_pattern)，一种方法是通过以下方式实现：

```
public String getName(){
    if (this.name == null){
        this.name = "";
    }
    return this.name;
} 
```

这应该可以避免您在使用变量之前检查大量空值。

```
public boolean isCorrect(){
    if(this.name != null && this.name.isEmpty()){
        //The null check up is boilerplate code
        return false;
    }else{
        return true;
    }
} 
```

我宁愿这样写：

```
public boolean isCorrect(){
    if(this.getName().isEmpty()){
        //The null check up is boilerplate code
        return false;
    }else{
        return true;
    }
} 
```

当然，这取决于你是否采用这种模式。

还要考虑你有

```
double width;
double height;

public double getWidth(){
    return this.width;
} 
```

但是在某些时候，您决定为一个类更改它，但仍然有方法，这样您的程序就不会崩溃。

```
Dimension dimension;
public double getWidth(){
    return this.getDimension().getWidth();
}
// etc... 
```

最后（正如 MadProgrammer 所评论的），当您使用继承时，可以重写方法以更好地表示预期的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T04:57:19.490

1) 从类内部看来，使用字段和 getter 之间没有区别，但是如果 getter 被子类覆盖怎么办？

```
class A {
    String name;
    String address;

    String getName() {
        return name;
    }

    String getAddress() {
        return address;
    }

    String getDescription() {
        return name + " " + address;
    }
}

class B extends A {
    String country;
    @Override
    String getAddress() {
        return super.getAddress() + ", " + country;
    }
} 
```

B.getDescription() 应该返回一个扩展地址，但它不会。如果 A.getDescription() 被实现为

```
 return getName() + " " + getAddress(); 
```

2）我个人不使用`this`可读性，因为 IDE`this`用不同的颜色标记

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T04:22:16.123

除非您遇到参数与字段同名的情况（例如在构造函数中），否则不需要使用 this。

对于访问属性，从长远来看，使用公共 getter 可能是有益的，因为您可能希望向属性添加某种形式的处理，并且如果您在任何地方都使用 getter，则只需进行一次更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T04:30:29.797

如果您的 get 方法返回具有某种格式的数据，则必须使用 get 方法，否则，变量本身就可以使用。

仅当您的方法参数与您的成员变量相同时才需要这样做，否则，这不是强制性的。

例如：

```
private String str;

public void setString(String str){
   this.str = str;  // here this.str is necessary because this represents the memeber variable
}

public String getString(){
    return this.str; // here this is optional and you can simply omit it 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T04:36:11.303

您可以使用访问器或变量本身，这是个人喜好之一。

有些人喜欢使用变量本身，因为您没有调用函数的开销。但是，如果您对变量的值有任何限制，有时只使用访问器和修改器会更干净；特别是如果您要进行子类化。但它是可以去任何一种方式的事情之一。

我喜欢使用`this`关键字的方式是，我总是将它用于实例变量。我发现它使代码更易于阅读，因为您可以直观地确定在哪里使用实例变量，以及在哪里使用局部变量。同样，这是个人喜好。

最重要的是确保你的代码干净、可读。此外，请确保您遵循组织使用的任何编码标准，并确保保持一致。

# uistoryboardsegue - 通过 UIButtons 在 ContianerView 中打开场景

> ID：14493893
> 
> 赞同：0
> 
> 时间：2013-01-24T04:18:18.667
> 
> 标签：uistoryboardsegue, container-view

iOS6 XCode 4.5.2

我有一个 MainViewController，左侧有 5 个 UIButtons (B1 - B5)。在主视图控制器的中间，我有一个 ContainerView。这个 ContainerView 有 5 个场景（初始场景也是一个导航控制器），我想将它们连接到 5 个 UIButton。当按下按钮时，我希望场景在容器内打开。

目前，当应用程序运行时，我可以单击初始 ContainerView 场景上的下一步按钮并逐步浏览所有 5 个场景。我什至可以通过逐步按下返回按钮回到第一个场景。但是，在通过 Storyboard 连接 UIButton 之后，当我单击任何按钮时，它们并没有打开容器内的场景，而是以全屏模式打开，堆叠在 MainViewContoller 的顶部。

按下按钮时，如何让场景（场景 1、场景 2 等）在容器内打开？

![在此处输入图像描述](../Images/6d27a071694ef7357c685a6247e20134.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:23:28.727

你在为 iPhone 编程吗？iOS 人机界面指南指定“[在 iPhone 上，导航栏始终显示在整个屏幕宽度上。](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW41) ”。在这种情况下，我建议您摆脱第二个导航控制器。

# android - 图片未从 url 加载

> ID：14493896
> 
> 赞同：0
> 
> 时间：2013-01-24T04:19:00.667
> 
> 标签：android, image, url, imageview

在我的应用程序中，我必须从 url 在图像视图中显示图像。Web 服务提供了完整的列表，其中包含与它们相关的所有信息。我将所有信息存储到数据访问对象中并将其传递到详细信息页面。在我的详细信息页面上，我必须显示从网络服务获得的 url 中的图像。但是，图像没有显示出来。下面是我的代码：

**图像加载器**

```
public class ImageLoader {

public static final String TAG = "ImageLoaderSN";
public enum BitmapManager {
    INSTANCE;

    private final Map<String, SoftReference<Bitmap>> cache;
    private final ExecutorService pool;
    private Map<ImageView, String> imageViews = Collections
            .synchronizedMap(new WeakHashMap<ImageView, String>());
    private Bitmap placeholder;

    BitmapManager() {
        cache = new HashMap<String, SoftReference<Bitmap>>();
        pool = Executors.newFixedThreadPool(5);
    }

    public void setPlaceholder(Bitmap bmp) {
        placeholder = bmp;
    }

    public Bitmap getBitmapFromCache(String url) 
    {
        //Log.v(TAG, "getBitmapFromCache called");
        if (cache.containsKey(url)) 
        {
            //Log.v(TAG, "getBitmapFromCache if loop");
            return cache.get(url).get();
        }

        return null;
    }

    public void queueJob(final String url, final ImageView imageView,
            final int width, final int height) 
    {
        Log.v(TAG, "queueJob called");
        //Create handler in UI thread. 
        final Handler handler = new Handler() 
        {
            public void handleMessage(Message msg) 
            {
                //Log.v(TAG, "queueJob handleMessage called");
                String tag = imageViews.get(imageView);
                if (tag != null && tag.equals(url)) 
                {
                    //Log.v(TAG, "queueJob tag not null");
                    if (msg.obj != null) 
                    {
                        //Log.v(TAG, "queueJob msg.obj not null");
                        imageView.setImageBitmap((Bitmap) msg.obj);
                    } else 
                    {
                        imageView.setImageBitmap(placeholder);
                        //Log.v(TAG, "queueJob fail " + url);
                    }
                }
            }
        };

        pool.submit(new Runnable() {
            public void run() {
                final Bitmap bmp = downloadBitmap(url, width, height);
                Message message = Message.obtain();
                message.obj = bmp;
                //Log.d(null, "Item downloaded: " + url);

                handler.sendMessage(message);
            }
        });
    }

    public void loadBitmap(String url, final ImageView imageView,
            final int width, final int height) 
    {
        //Log.v(TAG, "loadBitmap called");
        if(url.contains(" "))
        {
            //Log.v(TAG, "if url contains spaces");
          url  = url.replaceAll(" ", "%20");

        }
        imageViews.put(imageView, url);
        Bitmap bitmap = getBitmapFromCache(url);

        // check in UI thread, so no concurrency issues
        if (bitmap != null) 
        {
            //Log.v(TAG, "Item loaded from cache: " + url);
            imageView.setImageBitmap(bitmap);
        } 
        else 
        {
            //Log.v(TAG, "else loadBitmap");
            imageView.setImageBitmap(placeholder);
            queueJob(url, imageView, width, height);
        }
    }

    public Bitmap downloadBitmap(String url, int width, int height) {
        try {

             String URL  = url.replaceAll(" ", "%20");
            Bitmap bitmap = BitmapFactory.decodeStream((InputStream) new URL(
                    URL).getContent());

            bitmap = Bitmap.createScaledBitmap(bitmap, width, height, true);
            cache.put(URL, new SoftReference<Bitmap>(bitmap));
            return bitmap;
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return null;
    }

     public Bitmap getResizedBitmap(Bitmap bm, int newWidth) {

            int width = bm.getWidth();

            int height = bm.getHeight();

        float aspect = (float)width / height;

        float scaleWidth = newWidth;

        float scaleHeight = scaleWidth / aspect;        // yeah!

        // create a matrix for the manipulation

        Matrix matrix = new Matrix();

        // resize the bit map

        matrix.postScale(scaleWidth / width, scaleHeight / height);

        // recreate the new Bitmap

        Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, true);

            bm.recycle();

            return resizedBitmap;
        }

}

} 
```

检查后，我发现图像 url 不为空。但是，当缓存中没有位图时，ImageLoader 类中 queueJob() 中的处理程序没有运行。我独立测试了相同的代码，并且它有效。无法找出什么是实际问题。

# javascript - 可靠的文件缓存

> ID：14493900
> 
> 赞同：1
> 
> 时间：2013-01-24T04:19:29.790
> 
> 标签：javascript, css, caching

我正在尝试确定缓存我的 JavaScript 和 CSS 文件的最佳方式。

有几种方法可以做到这一点：

1.  使用`Date`,`Expires`和`Cache-Control`标头
2.  使用`ETag`标题
3.  永久缓存并在文件更改时更改文件名
4.  将查询字符串附加到 HTML 中的文件名以及最后一次修改时间或文件内容的 MD5

我的印象是最后一种方法（4）是最可靠的，并且会导致最少的不必要请求，但我的朋友只是告诉我，有时查询字符串方法不可靠，您实际上需要更改文件名。

将 HTTP 标头设置为永久缓存并仅使用带有最后一次修改时间的查询字符串是否有任何缺点，或者是否存在另一种方法更有益的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:32:26.267

我是方法 4 的忠实拥护者，但我在上面使用了 Session Id。因此，进入我的网站的用户将在每个会话中加载一次（如果访问者保持非活动状态超过 20 分钟或关闭浏览器窗口，会话通常会终止）。

在 Asp.net 中，我使用该语法：

```
<script src="js/DetalhesCurso.js?<%=Session.SessionID%>"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T04:32:43.007

你的第三种方法是最可靠的。[一些 CDN/代理完全忽略查询字符串，而不管查询字符串值如何，只提供相同的缓存文件](http://www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/)。

[Amazon](http://aws.typepad.com/aws/2012/05/amazon-cloudfront-support-for-dynamic-content.html)和[Azure](http://msdn.microsoft.com/en-us/library/windowsazure/ff919703.aspx)确实支持它，但其他人可能不支持。

请注意，在方法 #3 中，您*实际上*不必更新文件名本身。您可以只使用一些 URL 重写来始终获取相同的文件。您只需更新您的 HTML。

# python - 连续分数到分数故障

> ID：14493901
> 
> 赞同：1
> 
> 时间：2013-01-24T04:19:31.413
> 
> 标签：python, sympy, fractions, continued-fractions

我一直在研究 Project euler Problem 57（爱这个网站！）。对于这个问题，需要在有限连分数和正规分数之间进行转换。我设计了一种算法，它基本上取列表中最后一个数字的倒数，将其添加到倒数第二个并继续直到最后一个分数仍然存在。对于问题 67，它工作得非常好，但这次它在第二次迭代后停止工作（我必须对多个连分数执行算法）。

这是一段代码（我使用了一个外部模块，即 sympy）：

```
import time
from sympy import *
from sympy import fraction, Rational, Symbol

def cont_fract_to_fraction(cont_frac_list):
    a=cont_frac_list[-1]
    b=cont_frac_list[-2]
    new_reduced=Rational(b,1)+ Rational(1,a)
    cont_frac_list[-2]=new_reduced
    del cont_frac_list[-1]
    if len(cont_frac_list)==1:
        print cont_frac_list #To check
        return cont_frac_list
    else:
        cont_fract_to_fraction(cont_frac_list)

def numerator_higher_denominator(fraction):
    num=str(fraction[0])
    den=str(fraction[1])
    if len(num)>len(den):
        return 1
    else:
        return 0

start=time.time()

tally=0

for k in xrange (1, 101):
    sqrt_eval=[1]
    for x in xrange (1, k+2):
        sqrt_eval.append(2)
    sqrt_eval=cont_fract_to_fraction(sqrt_eval)
    print sqrt_eval ##To double check
    #fraction_result=fraction(soln[0]) To introduce later
    #tally+=numerator_higher_denominator(fraction_result) To introduce later

elapsed=time.time()-start

print "Solution: ", tally, "Solved in: ", elapsed 
```

我基本上只是测试它是否得到了所有最后的分数，并且在返回之前从函数中打印出答案，但是在我将值分配给 sqrt_eval 之后的打印结果为 None。这是一个测试运行：

> ```
> ###Test run####
> [3/2] #--> function print
> [3/2] #--> sqrt_eval print
> [7/5]
> None
> [17/12]
> None
> [41/29]
> None
> [99/70]
> None
> [239/169]
> None
> [577/408]
> None
> [1393/985]
> None
> [3363/2378]
> None
> [8119/5741]
> None
> [19601/13860]
> None 
> ```

我一直在彻底寻找答案，但找不到答案。如果可以的话，请帮助我调试它，而无需过多更改代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:30:17.757

[*分数*模块](http://docs.python.org/2.7/library/fractions.html#module-fractions)简化了这个问题：

```
>>> from fractions import Fraction
>>> def normal_fraction(continued_fraction):
         n = Fraction(0)
         for d in continued_fraction[:0:-1]:
             n = 1 / (d + n)
         return continued_fraction[0] + n

>>> cf = [3,7,15,1,292,1,1,1,2,1,3,1]
>>> normal_fraction(cf)
Fraction(5419351, 1725033)
>>> float(_)
3.1415926535898153 
```

*如果您喜欢函数式编程和简洁的代码，可以使用reduce()*以单行方式表达上述逻辑：

```
>>> cf[0] + reduce(lambda d, n: 1 / (d + n), cf[:0:-1], Fraction(0))
Fraction(5419351, 1725033) 
```

这是一个不使用*Fraction*的版本。它甚至可以在非常旧的 Python 版本上工作：

```
def normal_fraction(continued_fraction):
    n, d = 0, 1
    for a in continued_fraction[:0:-1]:
        n, d = d, a*d + n
    return continued_fraction[0]*d + n, d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:27:14.797

这不能回答您的问题，但是[Wikipedia](http://en.wikipedia.org/wiki/Continued_fraction#Some_useful_theorems)上有一些公式可以让您更有效地计算它。

# php - laravel 4中的路由问题

> ID：14493902
> 
> 赞同：3
> 
> 时间：2013-01-24T04:19:34.060
> 
> 标签：php, routing, routes, laravel, laravel-4

我是 laravel 的新手，现在正在学习它。我在`routes.php`文件中给出以下路线

```
Route::resource('contacts', 'ContactsController'); 
```

但是当我在浏览器中加载我的页面时，它给了我以下错误

```
Unhandled Exception

Message:

Call to undefined method Laravel\Routing\Route::resource()
Location:

/Users/zafarsaleem/Sites/learning-laravel/application/routes.php on line 35 
```

我完整的 routes.php 文件如下

```
Route::resource('contacts', 'ContactsController');

Route::get('/', function()   //<------- This is line 35
{
    return View::make('home.index');
}); 
```

如何消除此错误？

**编辑**

ContactsController 代码如下，我希望使用 index() 函数

```
class ContactsController extends BaseController {

/**
 * Display a listing of the resource.
 *
 * @return Response
 */
public function index()
{
    Contact::all();
}

/**
 * Show the form for creating a new resource.
 *
 * @return Response
 */
public function create()
{
    //
}

/**
 * Store a newly created resource in storage.
 *
 * @return Response
 */
public function store()
{
    $input = Input::json();

    Contact::create(array(
        'first_name' => $input->first_name
        'last_name' => $input->last_name
        'email_address' => $input->email_address
        'description' => $input->description
    ));
}

/**
 * Display the specified resource.
 *
 * @return Response
 */
public function show($id)
{
    return Contact::find($id);
}

/**
 * Show the form for editing the specified resource.
 *
 * @return Response
 */
public function edit($id)
{
    //
}

/**
 * Update the specified resource in storage.
 *
 * @return Response
 */
public function update($id)
{
    $contact = Contact::find($id);
    $input = Input::json();

    $contact->first_name = $input->first_name;
    $contact->last_name = $input->last_name;
    $contact->email_address = $input->email_ddress;
    $contact->description = $input->description;

    $contact->save();
}

/**
 * Remove the specified resource from storage.
 *
 * @return Response
 */
public function destroy($id)
{
    return Contact::find($id)->delete();
}

} 
```

**编辑 2**

我尝试了以下两条路线，但最终出现相同的错误

```
Route::resource('contacts', 'ContactsController', ['only', => ['index']]);
Route::get('contacts','ContactsController@index'); 
```

现在重新安装 laravel 4 后，我收到以下错误

```
404 Not Found

The requested URL /contacts was not found on this server.
_____________________________________________________________________
Apache/2.2.22 (Unix) DAV/2 PHP/5.3.15 with Suhosin-Patch Server at bb.dev Port 80 
```

**编辑 3**

这是现在所做的，我编辑“/private/etc/apache2/users/.conf”并将“AllowOverride None”更改为“AllowOverride All”，然后重新启动我的 apache 服务器。现在我收到以下错误

```
403 Forbidden

You don't have permission to access /contacts on this server.
__________________________________________________________________________________
Apache/2.2.22 (Unix) DAV/2 PHP/5.3.15 with Suhosin-Patch Server at bb.dev Port 80 
```

为什么我没有此联系人控制器的权限？现在让我发疯了。

这是我的 .htaccess 文件

```
<IfModule mod_rewrite.c>
Options -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T14:11:53.887

你在另一台服务器上试过吗？重写可能会出现很多问题（我已经浪费了几个小时来修复 .htaccess），所以问题可能出在 Apache 而不是 Laravel。

这对我有用`public/.htaccess`：

```
<IfModule mod_rewrite.c>
     RewriteEngine on

     RewriteCond %{REQUEST_FILENAME} !-f
     RewriteCond %{REQUEST_FILENAME} !-d

     RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

你有没有试过去`index.php/contacts`而不是`/contacts`？如果可行，那么问题出在 Apache，而不是 Laravel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:28:27.153

这可能是一个命名空间问题——它应该调用*Illuminate* \Routing\Router 上的函数，但您的异常是指*Laravel* \Routing\Route::resource()。

您的配置文件中是否仍有对 Laravel3 的引用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T08:06:48.890

尝试将您的路线更改为

```
Route::resource('/contacts', 'ContactsController'); 
```

在 ContactsController.php 中更改索引以返回模型的实例

```
public function index()
{
    return Contact::all();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-09T08:54:23.343

我遇到了同样的 $#%& 问题，经过数小时的搜索，我发现这不是 .httacess 文件的问题。我刚刚做了什么来解决这个问题：

```
composer update --dev 
```

我认为这`--dev`一点很重要。希望对某人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-11T06:09:04.387

好的，我在一分钟前就遇到了这个问题！这是因为 ide-helper 解决了你应该在 routes.php 中注释以下代码

```
use Illuminate\Routing\Route; 
```

# java - android无法启动接收器尚未实现

> ID：14493907
> 
> 赞同：0
> 
> 时间：2013-01-24T04:19:54.547
> 
> 标签：java, android, service, broadcastreceiver, runtime-error

我想`service`在手机完成启动时启动（CheckTime）。这似乎可行，但我的应用程序立即崩溃。我收到以下错误“ `java.lang.RuntimeException: Unable to start receiver com.example.alarmtest.MyReceiver: java.lang.UnsupportedOperationException: Not yet implemented`”。我试图解决这个问题没有成功。我不确定我是否遗漏了一些东西`manifest`（我对 android 开发相当陌生）。这是我的 MyReceiver 代码。（出现 log.d ）

```
public class MyReceiver extends BroadcastReceiver {
public MyReceiver() {   
}

@Override
public void onReceive(Context context, Intent intent) {
        Intent startServiceIntent = new Intent(context, CheckTime.class);
        context.startService(startServiceIntent);
        Log.d("evan alarm", "Started on Launch, android autostart");
   throw new UnsupportedOperationException("Not yet implemented");
        }
} 
```

和 CheckTime 的代码（log.d 永远不会出现）

```
public class CheckTime {
      public void loglab(){
      Log.d("evan alarm", "We are now in CheckTime");
      }
} 
```

最后是清单。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.alarmtest"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />

<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <service 
        android:name="com.example.alarmtest.MyService" >
        <intent-filter 
            android:label="com.example.alarmtest.MyService">
        </intent-filter>
    </service>
    <service android:name="com.example.alarmtest.CheckTime" />

    <activity
        android:name="com.example.alarmtest.AlarmActivity"
        android:label="@string/title_activity_alarm" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.alarmtest.ChangeTime"
        android:label="@string/title_activity_change_time" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.AlarmTest.AlarmActivity" />
    </activity>

    <receiver
        android:name="com.example.alarmtest.MyReceiver">
        <intent-filter>  
            <action android:name="android.intent.action.BOOT_COMPLETED" />  
        </intent-filter> 
    </receiver>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T04:22:03.527

```
 throw new UnsupportedOperationException("Not yet implemented"); 
```

那是接收器的最后一行。你自己扔。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-13T11:15:14.273

删除此行

```
throw new UnsupportedOperationException("Not yet implemented"); 
```

# vba - 我如何停止执行我的代码

> ID：14493908
> 
> 赞同：0
> 
> 时间：2013-01-24T04:19:55.577
> 
> 标签：vba, excel

```
For i=0 to 100000

 MsgBox("Whats up")

 Next i 
```

我试图测试我的 FOR 循环是否有效，现在我无法停止程序的执行。中断按钮不起作用，我只能按确定。我需要帮助

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T04:22:55.160

Ctrl+Break 通常有效。不只是 Break 本身。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T06:56:33.227

在地址到“你的代码”正如[RJ Lohan](https://stackoverflow.com/users/897994/rj-lohan)提到的那样`Ctrl`+`Break`

`Ctrl`+`Scroll Lock`也有效

在其他情况下，如果`Ctrl`+`Break`由该过程/窗口处理。你可以试试`Esc` `Esc`

并确保在 VBA 中应用程序设置为： `Application.EnableCancelKey = xlInterrupt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:21:39.407

打开任务管理器，在“进程”选项卡的“结束进程”下找到您的程序的进程。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T04:23:05.057

也许你应该关闭你的机器。

# java - 如何在 Oracle 中回滚/超时“选择更新”锁？

> ID：14493912
> 
> 赞同：2
> 
> 时间：2013-01-24T04:20:18.573
> 
> 标签：java, oracle, web-applications, architecture, pessimistic-locking

我们的应用程序主要使用 Hibernate 的版本控制支持的乐观锁定。我们计划在一种特定情况下实施悲观锁定。我对悲观锁定没有太多经验，所以如果这个问题听起来很幼稚，请原谅。

当用户表现出更新条目的意图时 - 我们使用“选择更新”锁定相应的数据库行。现在，如果这个用户需要很长时间来提交他的更改在锁定后忘记了它，我们如何使用一些超时/回滚机制来解锁这个锁？这样该行就不会长时间保持锁定状态，并且不允许所有其他用户对其进行编辑。

我怀疑这是否会在我们正在使用的 Weblogic-JTA-Spring 事务机制中处理——我们已经有 30 分钟的事务超时。（？？）

因此，是否应该直接在 Oracle 级别处理此回滚。如果是，那么如何？请就处理此问题的最佳方法提出建议，以免此类锁停留太久。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:50:43.193

只有在事务结束时才会释放锁。事务将在显式`commit`或`rollback`向数据库发出或数据库会话终止（执行隐式`rollback`）时结束。如果您的中间层已设置回滚任何打开时间超过 30 分钟的事务，则足以释放锁定。

但是，如果您有一个 Java 应用程序在 Weblogic 应用程序服务器中运行，那么悲观锁定是合适的，这让我觉得很不寻常。首先，我假设您在中间层使用连接池。如果是这种情况，则连接池中的一个数据库连接将需要由中间层在事务长度内保持（在这种情况下最多 30 分钟）。但是允许一个会话长时间保持打开一个特定的数据库会话会破坏拥有连接池的目的。通常，数十个（如果不是数百个）应用程序会话可以共享连接池中的单个连接——如果您要允许悲观锁定，那么您现在强制这些会话的应用程序会话和数据库会话之间存在 1:1 的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T17:20:05.833

乐观锁不能代替悲观锁的情况很多。锁定超时在数据库中处理。有关如何在 Oracle 中配置它的信息，请参阅此页面

[oracle的默认对象锁超时时间可以改吗？](https://stackoverflow.com/questions/1398685/can-oracles-default-object-lock-timeout-be-changed)

# python - 为什么在 Python 中使用线程和队列时需要无限循环

> ID：14493915
> 
> 赞同：1
> 
> 时间：2013-01-24T04:20:33.493
> 
> 标签：python

我试图了解如何使用线程，我在[http://www.ibm.com/developerworks/aix/library/au-threadingpython/遇到了这个很好的例子](http://www.ibm.com/developerworks/aix/library/au-threadingpython/)

```
 #!/usr/bin/env python
      import Queue
      import threading
      import urllib2
      import time

      hosts = ["http://yahoo.com", "http://google.com", "http://amazon.com",
      "http://ibm.com", "http://apple.com"]

      queue = Queue.Queue()

      class ThreadUrl(threading.Thread):
      """Threaded Url Grab"""
        def __init__(self, queue):
          threading.Thread.__init__(self)
          self.queue = queue

        def run(self):
          while True:
            #grabs host from queue
            host = self.queue.get()

            #grabs urls of hosts and prints first 1024 bytes of page
            url = urllib2.urlopen(host)
            print url.read(1024)

            #signals to queue job is done
            self.queue.task_done()

      start = time.time()
      def main():

        #spawn a pool of threads, and pass them queue instance 
        for i in range(5):
          t = ThreadUrl(queue)
          t.setDaemon(True)
          t.start()

       #populate queue with data   
          for host in hosts:
            queue.put(host)

       #wait on the queue until everything has been processed     
       queue.join()

      main()
      print "Elapsed Time: %s" % (time.time() - start) 
```

我不明白的部分是为什么该`run`方法有一个无限循环：

```
 def run(self):
          while True:
            ... etc ... 
```

只是为了笑，我在没有循环的情况下运行了程序，它看起来运行良好！那么有人可以解释为什么需要这个循环吗？另外，由于没有 break 语句，循环如何退出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:22:33.837

您是否希望线程执行不止一项工作？如果没有，则不需要循环。如果是这样，你需要一些能够让它做到这一点的东西。循环是一种常见的解决方案。您的示例数据包含五个作业，并且程序启动了五个线程。因此，您*不需要*任何线程在这里完成一项以上的工作。不过，请尝试为您的工作负载再添加一个 URL，然后看看有什么变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T04:23:21.810

该循环是必需的，因为没有它，每个工作线程在完成其第一个任务后立即终止。您想要的是让工作人员在完成后执行另一项任务。

在上面的代码中，您创建了 5 个工作线程，恰好足以覆盖您正在使用的 5 个 URL。如果您有 >5 个 URL，您会发现只有前 5 个被处理。

# ruby - 如何检查网址是否包含带有 fileEntityId 的数字？

> ID：14493929
> 
> 赞同：-1
> 
> 时间：2013-01-24T04:22:14.320
> 
> 标签：ruby, ruby-1.9

我有一些网址如下：

```
https://example.com/file/filegetrevision.do?fileEntityId=738007
9&cs=4Pzbb2jPu3EHBzv8RQHrGcPm4hZZkRC-CfH0my4dP0M.arv

https://example.com/file/filegetrevision.do?fileEntityId=&cs=2L
5cx4UsMsFJgM05pPtB_Z8dRdL4CXLLcTeDhGPDBIg.arv

https://example.com/file/filegetrevision.do?fileEntityId=2555874&cs=2L
5cx4UsMsFJgM05pPtB_Z8dRdL4CXLLcTeDhGPDBIg.arv 
```

现在我需要检查哪个网址有`numbers`或`fileEntityId`没有？在这方面有什么帮助吗？说第一个和第三个 URL 有`738007`和`2555874`数字，`fileEntityId`但第二个没有。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:43:10.830

在这里，我们使用正则表达式来确定字符串是否包含“fileEntityId=”后跟一个或多个数字：

```
urls = ['https://example.com/file/filegetrevision.do?fileEntityId=7380079&cs=4Pzbb2jPu3EHBzv8RQHrGcPm4hZZkRC-CfH0my4dP0M.arv',
  'https://example.com/file/filegetrevision.do?fileEntityId=&cs=2L5cx4UsMsFJgM05pPtB_Z8dRdL4CXLLcTeDhGPDBIg.arv',
  'https://example.com/file/filegetrevision.do?fileEntityId=2555874&cs=2L5cx4UsMsFJgM05pPtB_Z8dRdL4CXLLcTeDhGPDBIg.arv']

urls.map {|u| !!(u =~ /fileEntityId=\d+/)} # => [true, false, true] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:33:41.850

尽管我很喜欢正则表达式，但标准库中包含了更合适的工具：

```
require 'uri'
require 'cgi'

url = "https://example.com/file/filegetrevision.do?fileEntityId=7380079&cs=4Pzbb2jPu3EHBzv8RQHrGcPm4hZZkRC-CfH0my4dP0M.arv"
query = URI::parse(url).query # => "fileEntityId=7380079&cs=4Pzbb2jPu3EHBzv8RQHrGcPm4hZZkRC-CfH0my4dP0M.arv"
fileEntityId = CGI::parse(query)['fileEntityId'] # => ["7380079"] 
```

然后你可以检查它是否是一个数字。

# javascript - 使用超链接和按钮提交表单

> ID：14493933
> 
> 赞同：1
> 
> 时间：2013-01-24T04:22:52.787
> 
> 标签：javascript, html, forms

我有表单，可以通过单击超链接或提交按钮来完成表单提交。但是，我希望我的服务器能够了解表单提交所使用的内容。

当前的代码片段如下所示：

```
<a href=javascript:{} onclick="formSubmit()";>Next</a>
<input type="button" name="search" value="Get Result" onclick = "formSubmit();"> 
```

我的 formSubmit() 看起来像这样

```
<script type="text/javascript">
 function formSubmit()
 {
     document.getElementById('form1').submit();
     return false;
 } 
```

关于如何去做的任何指示。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:32:16.937

在表单中使用隐藏参数。

```
< input type="hidden" value="0" name="flag"/> 
```

*   当使用 javascript 提交表单时，将脚本中的标志值更改为“1”。

    ```
    function formSubmit()
    {
     document.form1.flag.value="1";
     document.getElementById('form1').submit();
     return false;
    } 
    ```

*   如果按下提交按钮，则标志 = '0'。

*   可以在服务器上获取这个参数来判断表单是如何提交的

编辑：将您的按钮类型更改为“提交”或为这两个操作调用不同的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:27:04.887

将一个值（比如一个`int`or `boolean`）传递给函数。传递的值可用于确定来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:46:26.117

您调用相同的函数来提交表单，所以如果您希望您的服务器实现表单提交所使用的内容，我认为您必须将参数传递给您的服务器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T05:25:01.163

您可以使用 event.target 获取触发事件的源，然后设置一个标志以传递给服务器。请参见下面的示例：

```
<!DOCTYPE html>
<html>
<head>

<script>
function myFunction(e)
{ 
alert(e.target);
}
</script>
</head>

<p>
Click on a paragraph. An alert box will alert the element that triggered the event.</p>

<p>
<strong>Note:</strong> The target property returns the element that triggered the event, and not necessarily the eventlistener's element.</p>

This Link Click will return "javascript:{}"
<a href=javascript:{} onclick="myFunction(event)";>Next</a>

<p>
This Button Click will return "[objectHTMLInputElement]"
<input type="button" name="search" value="Get Result" onclick = "myFunction(event);"> 
</p>

</body>
</html> 
```

# php - 在 PHP 中对数组进行切片

> ID：14493937
> 
> 赞同：-1
> 
> 时间：2013-01-24T04:23:03.643
> 
> 标签：php

我有以下声明：

```
print_r($dates); 
```

给出输出：

```
Array ( [0] => Fri, Jan 25 [1] => Sat, Jan 26 [2] => Sun, Jan 27) 
```

我想单独打印日期。我知道爆炸的方法，但是有没有其他方法可以在每个日期分开我的日期（Fri,Jan25）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:29:32.890

为什么没有功能？他们很棒=）

```
foreach($dates as $date){
    $arr_dates = explode(",", $date);
    echo 'day is '.$arr_dates[0].' and date is '.$arr_dates[1]."\r\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:30:10.090

如果您不想使用函数，那么只需`echo`：

```
echo $dates[0];
echo $dates[1];
echo $dates[2]; 
```

或者

使用`foreach loop`：

```
foreach($dates as $d)
   echo "Date : " . $d . "<br>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:30:10.953

您可以使用函数[preg_match()](http://au1.php.net/preg_match)：

```
$pattern = '/(\w+), (\w+) (\d+)/i';
foreach($dates as $dt){ 
    if(preg_match($pattern, $dt, $matches)){
        echo 'DoW : '.$matches[1].'<br>';
        echo 'Mon : '.$matches[2].'<br>';
        echo 'Day : '.$matches[3].'<br>';
        echo '<hr>';
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T04:30:36.753

```
foreach($dates as $val){
   echo $val;
   echo "<br>";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T04:34:39.413

您可以使用[**`strtotime`**](http://php.net/strtotime)来解析日期，以便您可以获得有关每个日期的有意义的信息。然后您可以使用该[**`date`**](http://php.net/date)功能以您喜欢的任何格式显示（或[**`getdate`**](http://php.net/getdate)获取有关日、月、年等的详细信息）：

```
$dates = Array ("Fri, Jan 25", "Sat, Jan 26", "Sun, Jan 27");
foreach($dates as $datestr) {
    $date = strtotime($datestr);
    echo date('l jS \of F Y h:i:s A', $date)."\n";
} 
```

输出：

```
Friday 25th of January 2013 12:00:00 AM
Saturday 26th of January 2013 12:00:00 AM
Sunday 27th of January 2013 12:00:00 AM 
```

演示：http: [//ideone.com/6xeCxt](http://ideone.com/6xeCxt)

PHP 内置了许多[日期/时间操作函数，它们可能会有所帮助。](http://php.net/ref.datetime.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T04:57:29.333

```
<?php
 $array = array("Fri, Jan 25", "Sat, Jan 26", "Sun, Jan 27");
 foreach($array as $date) {
   $dateStr = substr($date, 4); 
  echo $dateStr;
 }
?> 
```

# c# - C# windows 窗体应用程序：如何在不删除原始文件的情况下替换文本文件中的单行？

> ID：14493939
> 
> 赞同：1
> 
> 时间：2013-01-24T04:23:18.333
> 
> 标签：c#, windows, forms, streamwriter

我正在制作一个使用 streamreader 和 streamwriter 的项目，我是否可以只替换或保存特定行中的文本而不影响其他行？如果我这样做

```
streamreader sr = new streamreader(@"txtfile");
list<string> lines = new list<string>();
while (!sr.EndOfStream)
sr.readline();
{
     lines.Add(sr.ReadLine();
}

//put in textbox
sr.close();

{
streamwriter sw = new streamwriter(@"txtfile");
sw.WriteLine(textBox1.text);
sw.close();
} 
```

这只是一个示例，但我是否有可能使用 list 也不是 streamwriter？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:54:36.083

如果你想要一个单线解决方案（代码高尔夫 :)）你可以使用

```
string path = @"C:\Test.txt";
string lineToReplace = "Relpace This Line";
string newLineValue = "I Replaced This Line";

File.WriteAllLines(path, File.ReadAllLines(path).Select(line => line.Equals(lineToReplace) ? newLineValue : line)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:26:04.613

将文件读入内存，更改要更改的行，关闭阅读器，打开文件进行写入，将文件的新内容写出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:48:02.600

您不能只更改一行，但您可以到**ReadAllLines**，**找到要更改的行**，**更改它并将其全部写入文件**：

```
StringBuilder newFile = new StringBuilder();
string temp = "";
string[] file = File.ReadAllLines(@"txtfile");

foreach (string line in file)
{
    if (line.Contains("string you want to replace"))
    {
        temp = line.Replace("string you want to replace", "New String");
        newFile.Append(temp + "\r\n");
        continue;
    }
    newFile.Append(line + "\r\n");
}

File.WriteAllText(@"txtfile", newFile.ToString()); 
```

# sqlalchemy - sql alchemy：派生列示例

> ID：14493942
> 
> 赞同：1
> 
> 时间：2013-01-24T04:23:23.903
> 
> 标签：sqlalchemy

```
#necessary import goes here
engine = sqlalchemy.create_engine('mysql://root@127.0.0.1/test',echo=False)
print 'Engine created'
connection=engine.connect()
metadata=MetaData(engine)
metadata.bind=engine
Session =  sessionmaker(bind=engine)
session = Session()
mapping = Table('mapping',metadata,autoload=True)

class Mapping(object):
    pass
MappingMapper=mapper(Mapping,mapping) 
```

现在我可以为插入、更新、删除、过滤等编写基本查询。

问：1 我需要编写复杂的查询，我确实根据现有列派生新列。前任。ColA,ColB 在表上，ColC 不是表结构的一部分。从 ColC > 50 按 ColC 排序的表中选择 (ColA+ColB) 作为 ColC。

我不知道如何使用 SqlAlchemy 转换上面的查询。如何映射，如何检索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:02:55.040

最简单的是使用[Hybrid Attributes](http://docs.sqlalchemy.org/en/rel_0_8/orm/extensions/hybrid.html)。在您的情况下，只需将类的声明更改为以下内容：

```
from sqlalchemy.ext.hybrid import hybrid_property

class Mapping(object):
    @hybrid_property
    def ColC(self):
        return self.ColA + self.ColB 
```

然后查询：

```
qry = session.query(Mapping).filter(Mapping.ColC > 80) 
```

将生成 SQL：

```
SELECT mapping.id AS mapping_id, ...
FROM mapping
WHERE mapping."ColA" + mapping."ColB" > ? 
```

# python - python shell add_option问题

> ID：14493945
> 
> 赞同：1
> 
> 时间：2013-01-24T04:23:34.787
> 
> 标签：python, linux

我在 python add_option 中有些困惑

我这样写代码

```
parser.add_option("-u", "--uniqueness",
              action="store_true", dest="uniqueness", default=False) 
```

稍后在 shell 中，我想写一些类似的东西：

```
if(the user input -u option):
     do something 
```

我的问题是，如何在 python 中编写“用户输入 -u 选项”？我尝试使用“if（parser.uniqueness）”但是，这个命令不起作用。顺便说一句，我使用的是 python 2.7.3（只是想知道这个命令是否与 python 3 中的命令不同）thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:28:02.347

首先，`optparse`不推荐使用，因此您应该使用`argparse`- 但逻辑将是相似的。

您需要先做某事`args = parser.parse_args()`，然后使用以下命令签入此对象：

```
if args.uniqueness:
  # potato 
```

# python - 第二个定义的语法错误

> ID：14493949
> 
> 赞同：0
> 
> 时间：2013-01-24T04:23:50.547
> 
> 标签：python, python-2.7, syntax-error, function

运行此代码时，我遇到了第二个 def 的问题，* *de* *f multiply (): 当我收到语法错误时，def 的 de 被剔除。

```
import random
def start () :

    print "Welcome!"
    choose ()

def choose () :

    choice = input """would you like to
     add, subtract, or multiply?
      1       2            3
    """
    if choice = 1 :
        add ()
    if choice = 2 :
        subtract ()
    if choice = 3 :
        multiply ()

def multiply () :

    x = random.random ()
    x = round ()
    y = random.random ()
    y = round ()
    print "What is the answer to: ", x,"*", y, " ?"
    answer = input ": "
    z = x*y
    if answer == z :
        print "you are correct!"
    elif answer < z :
        print "your answer is low! The correct answer was ", z
    elif answer > z :
        print "your answer is high! The correct answer was ", z
    multiply ()

def add () :

    x = random.random ()
    x = round ()
    y = random.random ()
    y = round ()
    print "What is the answer to: ", x,"+", y, " ?"
    answer = input ": "
    z = x+y
    if answer == z :
        print "you are correct!"
    elif answer < z :
        print "your answer is low! The correct answer was ", z
    elif answer > z :
        print "your answer is high! The correct answer was ", z

def subtract () :

    x = random.random ()
    x = round ()
    y = random.random ()
    y = round ()
    print "What is the answer to: ", x,"*", y, " ?"
    answer = input ": "
    z = x*y
    if answer == z :
        print "you are correct!"
    elif answer < z :
        print "your answer is low! The correct answer was ", z
    elif answer > z :
        print "your answer is high! The correct answer was ", z 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:30:20.747

`input`是一个函数，所以你必须像这样调用它：

```
input('Input some stuff: ') 
```

您还有几行如下所示：

```
if choice = 1 : 
```

你想写`choice == 1`。最后，这里的这部分有点奇怪：

```
x = random.random ()
x = round () 
```

您可能想要传递`x`到`round`：

```
x = random.random ()
x = round (x) 
```

或者完全跳过该部分并使用`randint`

```
x = random.randint(0, 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:31:52.350

以下是代码中的一些逻辑和语法错误：

`answer = input ": "`

你这样调用输入：

`answer = input(": ")`

* * *

`if choice = 1 :`

= 是赋值。你的意思是==。

* * *

```
x = random.random ()
x = round () 
```

如果您将 x 分配为第一件事，然后是第二件事，就好像第一次分配从未发生过。你的意思是`x = round(x)`？

* * *

# php - 为什么这段代码循环两次

> ID：14493955
> 
> 赞同：-2
> 
> 时间：2013-01-24T04:25:28.123
> 
> 标签：php

我在试图查明我遇到的问题时遇到了问题，下面的代码循环了两次并给了我一个输出，`Match11Match111Match11Match111`我真的不确定问题出在哪里，但它应该只循环一次。

```
<?php

function generateTimeCard($conn, $employeeID){

    // set current date
$date7 = date("m/d/y");

// parse about any English textual datetime description into a Unix timestamp
$ts = strtotime($date7);

// calculate the number of days since Monday
$dow = date('w', $ts);
$offset = $dow;
if ($offset < 0) {
    $offset = 6;
}

// calculate timestamp for the Monday
$ts = $ts - $offset*86400;

// loop from Monday till Sunday
for ($i = 0; $i < 7; $i++, $ts += 86400){

    $date1 = date("m/d/y", $ts);
    $date3 = date("l", $ts);
    $$date3 = $date1;
    $date2 = $date1;
    $day[$i] = $date1;

    $stmt = $conn->prepare('SELECT `employeeID`,`date`,`unitNumber`,`jobDescription`,`timeIn`,`timeOut`, `lunch`, TIMEDIFF(`timeOut`, `timeIn`)  
                            AS `totalTime` FROM `timeRecords` WHERE `date`= :day AND `employeeID`= :employeeID ORDER BY date,id;');

    $stmt->execute(array(':day'=>$day[$i], ':employeeID'=>$employeeID));    

    $dayOW = 1;

    while($row = $stmt->fetch()) {

           if ($row['lunch'] == "Yes"){
            echo "Match";
        } else{
            echo "1";
        }

        $dayCurrent = $date3 . "Hours." . $dayOW;
        $data[$dayCurrent] = $row['totalTime'];
        $timeDay = $date3 . "." . $dayOW;
        $unitNumber = $date3 . "UnitNumber." . $dayOW;
        $description = $date3 . "Description." . $dayOW;
        $data[$timeDay] = date("h:i A", strtotime($row['timeIn'])) . "/" . date("h:i A", strtotime($row['timeOut']));
        $data[$unitNumber] = $row['unitNumber'];
        $data[$description] = $row['jobDescription'];
        $dayOW++;
    }

    $stmt = $conn->prepare('SELECT `employeeID`, SEC_TO_TIME(SUM(TIME_TO_SEC(TIMEDIFF(`timeOut`, `timeIn`)))) 
                            AS `totalDay` FROM `timeRecords` WHERE   `date` = :day
                            AND `employeeID` = :employeeID GROUP BY `employeeID`;');
    $stmt->execute(array(':day'=>$date1, ':employeeID'=>$employeeID));
    $row = $stmt->fetch();
    $totalDay = "Total" . $date3;

    $data[$totalDay] = $row['totalDay'];

}
$data['Week']= $Sunday . " - " . $Saturday;
return $data;

}

?> 
```

我的数据库看起来像这样

```
+----+------------+----------+--------+----------------------------+-------------+------------+-----------+---------+-------+
| id | employeeID | date     | timeIn | jobDescription             | equipType   | unitNumber | unitHours | timeOut | lunch |
+----+------------+----------+--------+----------------------------+-------------+------------+-----------+---------+-------+
|  1 |          1 | 01/20/13 | 6:00   | Worked in RockPort         | Excavator   | 01E        |      7238 | 17:13   | Yes   |
|  2 |          1 | 01/21/13 | 6:00   | Worked in Jefferson        | Excavator   | 01E        |      7238 | 17:17   |       |
|  3 |          1 | 01/22/13 | 6:00   | Worked in Jefferson        | Excavator   | 02E        |      7238 | 17:30   |       |
|  4 |          1 | 01/23/13 | 6:00   | Worked in Whispering Creek | Skid Loader | 32SL       |      2338 | 18:30   | Yes   |
|  5 |          1 | 01/24/13 | 8:00   | Worked in Hubbard          | Scraper     | 54C        |      9638 | 11:30   |       |
|  6 |          1 | 01/25/13 | 8:00   | Worked in Jefferson        | Dozer       | 4D         |       941 | 19:30   |       |
|  7 |          1 | 01/26/13 | 8:00   | Pushed Snow                | Loader      | 950H       |       342 | 20:30   |       |
+----+------------+----------+--------+----------------------------+-------------+------------+-----------+---------+-------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T04:30:27.117

默认情况下，PDO 使用索引和列名键获取。所以有“重复”的价值。您希望将获取模式更改为 FETCH_NUM（仅索引键）（`$stmt->fetch(PDO::FETCH_NUM)`），以便值不会出现在两个映射下。[http://php.net/manual/en/pdostatement.fetch.php](http://php.net/manual/en/pdostatement.fetch.php)

# c# - 如何检查用户是否未登录域帐户

> ID：14493956
> 
> 赞同：0
> 
> 时间：2013-01-24T04:25:30.063
> 
> 标签：c#, asp.net, visual-studio-2010

当用户通过从`txtboxDomain.Text`

```
using (PrincipalContext pc = new PrincipalContext(ContextType.Domain, txtboxDomain.Text))
{
    // validate the credentials
    bool isValid = pc.ValidateCredentials(txtboxUsername.Text, txtboxPassword.Text);
    if (isValid == true)
    {
        lblLogin.Text = "Valid User Name and/or Password";
        Session["Person"] = txtboxUsername.Text;
        Session.Timeout = 1;
        Response.Redirect("default.htm");
    }
    else
    {
        lblLogin.Text = "Invalid User Name and/or Password";
    }
} 
```

那么，如果用户只想使用本地系统帐户，我该如何编码？（假设本地系统名称是`WIN2008R2_LOCAL`?

我是否将代码编写为`using (PrincipalContext pc = new PrincipalContext(ContextType.Domain, "WIN2008R2_LOCAL"))`

（我尝试了上面的代码，但它不起作用。所以想知道我应该如何编码。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:37:17.130

```
PrincipalContext pc = new PrincipalContext(ContextType.Machine, null); 
```

# winforms - 在 RDLC 报告中显示详细数据

> ID：14493957
> 
> 赞同：0
> 
> 时间：2013-01-24T04:25:45.690
> 
> 标签：winforms, rdlc

如何创建在同一报表中显示主行和明细行的报表？

我正在努力为客户准备发票和信用声明。

结构是：

```
Customer

Invoice

Credit

Credit Detail

Payment

Payment Detail 
```

客户的场景：

一个客户可以有多个发票，每个发票可以针对特定发票发出多个信用。每张发票可以有多次付款。

该报表应生成每张未结发票，并列出对发票分组下的任何付款或贷项。

在某些情况下，客户可以在没有发票的情况下获得信用。这也需要在没有任何发票的情况下显示。

我需要一些关于如何使用 RDLC 使用 Winforms Report 来完成此操作的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:29:25.560

我创建了 statementdata 和 statementdetail 表，该表经过预处理，将所有发票及其信用和付款金额以及未开票而不是发给客户的信用（特殊信用）合并在一起。StatementDetail 表将包含信用和付款的详细信息。一旦我们有了这个，它就变成了一个主细节场景。这使我很容易展示具有以下结构的语句。

客户名称和地址 - 标题

发票 1 - 发票 1 付款的详细部分详细信息 - 发票 1 学分的子分组详细信息 - 发票 2 子分组详细信息 发票 2 付款
详细信息 发票 2 学分的详细信息

ETC。，

谢谢

# c# - 如何以编程方式控制 Firefox，最好使用 C# 应用程序？

> ID：14493958
> 
> 赞同：6
> 
> 时间：2013-01-24T04:25:49.577
> 
> 标签：c#, firefox

我正在寻找一个程序来打开一个 Firefox 的实例，即包含我的各种登录信息的 Firefox 的默认实例，然后简单地切换几个站点。我有点能够做到这一点，使用以下代码：

```
System.Diagnostics.Process.Start("firefox.exe", "thisIsMyURL"); 
```

但是，我相信您大部分都知道，这只会打开一个新的 Firefox 进程，并将给定的 URL 作为默认打开的站点。为了做我想做的事，我基本上必须打开一个新的 Firefox 进程，在页面上做我需要做的事情，终止进程，然后对我需要的每个页面重复此操作。这不太理想。所以，我希望有人会知道一种通过 API 或库或其他东西以编程方式控制 Firefox 的方法。我在谷歌上搜索过，到目前为止，只发现过时的解决方案并没有真正解决我的问题。

一如既往，感谢您的帮助！您可以提供的一切都将受到赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T05:06:14.130

您可以将 Selenium WebDriver 用于 C#。

这是一个跨平台 API，允许您使用 Java、C# 等 API 控制各种浏览器。

附上一段 C# 用 Selenium WebDriver 测试的代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium;
using OpenQA.Selenium.Interactions;
using OpenQA.Selenium.Interactions.Internal;
using OpenQA.Selenium.Support.UI;
using OpenQA.Selenium.IE;
using NUnit.Framework;
using System.Text.RegularExpressions;

namespace sae_test
{   class Program
    {   private static string baseURL;
        private static StringBuilder verificationErrors;

        static void Main(string[] args)
        {   // test with firefox
            IWebDriver driver = new OpenQA.Selenium.Firefox.FirefoxDriver();
            // test with IE
            //InternetExplorerOptions options = new InternetExplorerOptions();
            //options.IntroduceInstabilityByIgnoringProtectedModeSettings = true;
            //IWebDriver driver = new OpenQA.Selenium.IE.InternetExplorerDriver(options);
            SetupTest();
            driver.Navigate().GoToUrl(baseURL + "Account/Login.aspx");
            IWebElement inputTextUser = driver.FindElement(By.Id("MainContent_LoginUser_UserName"));
            inputTextUser.Clear();
            driver.FindElement(By.Id("MainContent_LoginUser_UserName")).Clear();
            driver.FindElement(By.Id("MainContent_LoginUser_UserName")).SendKeys("usuario");
            driver.FindElement(By.Id("MainContent_LoginUser_Password")).Clear();
            driver.FindElement(By.Id("MainContent_LoginUser_Password")).SendKeys("123");
            driver.FindElement(By.Id("MainContent_LoginUser_LoginButton")).Click();
            driver.Navigate().GoToUrl(baseURL + "finanzas/consulta.aspx");
            // view combo element
            IWebElement comboBoxSistema = driver.FindElement(By.Id("MainContent_rcbSistema_Arrow"));
            //Then click when menu option is visible 
            comboBoxSistema.Click();
            System.Threading.Thread.Sleep(500);
            // container of elements systems combo
            IWebElement listaDesplegableComboSistemas = driver.FindElement(By.Id("MainContent_rcbSistema_DropDown"));
            listaDesplegableComboSistemas.FindElement(By.XPath("//li[text()='BOMBEO MECANICO']")).Click();
            System.Threading.Thread.Sleep(500);
            IWebElement comboBoxEquipo = driver.FindElement(By.Id("MainContent_rcbEquipo_Arrow"));
            //Then click when menu option is visible 
            comboBoxEquipo.Click();
            System.Threading.Thread.Sleep(500);
            // container of elements equipment combo
            IWebElement listaDesplegableComboEquipos = driver.FindElement(By.Id("MainContent_rcbEquipo_DropDown"));

            listaDesplegableComboEquipos.FindElement(By.XPath("//li[text()='MINI-V']")).Click();
            System.Threading.Thread.Sleep(500);

            driver.FindElement(By.Id("MainContent_Button1")).Click();            
            try
            {   Assert.AreEqual("BOMBEO MECANICO_22", driver.FindElement(By.XPath("//*[@id=\"MainContent_RejillaRegistroFinanciero_ctl00_ctl04_LabelSistema\"]")).Text);
            }
            catch (AssertionException e)
            {   verificationErrors.Append(e.Message);
            }
            // verify coin format $1,234,567.89 usd
            try
            {   Assert.IsTrue(Regex.IsMatch(driver.FindElement(By.XPath("//*[@id=\"MainContent_RejillaRegistroFinanciero_ctl00_ctl04_labelInversionInicial\"]")).Text, "\\$((,)*[0-9]*[0-9]*[0-9]+)+(\\.[0-9]{2})? usd"));
            }
            catch (AssertionException e)
            {   verificationErrors.Append(e.Message);
            }
            try
            {   Assert.IsTrue(Regex.IsMatch(driver.FindElement(By.XPath("//*[@id=\"MainContent_RejillaRegistroFinanciero_ctl00_ctl04_labelCostoOpMantto\"]")).Text, "\\$((,)*[0-9]*[0-9]*[0-9]+)+(\\.[0-9]{2})? usd"));
            }
            catch (AssertionException e)
            {   verificationErrors.Append(e.Message);
            }
            try
            {   Assert.IsTrue(Regex.IsMatch(driver.FindElement(By.XPath("//*[@id=\"MainContent_RejillaRegistroFinanciero_ctl00_ctl04_labelCostoEnergia\"]")).Text, "\\$((,)*[0-9]*[0-9]*[0-9]+)+(\\.[0-9]{2})? usd"));
            }
            catch (AssertionException e)
            {   verificationErrors.Append(e.Message);
            }
            try
            {   Assert.IsTrue(Regex.IsMatch(driver.FindElement(By.XPath("//*[@id=\"MainContent_RejillaRegistroFinanciero_ctl00_ctl04_labelcostoUnitarioEnergia\"]")).Text, "\\$((,)*[0-9]*[0-9]*[0-9]+)+(\\.[0-9]{2})? usd"));
            }
            catch (AssertionException e)
            {   verificationErrors.Append(e.Message);
            }
            // verify number format 1,234,567.89
            try
            {   Assert.IsTrue(Regex.IsMatch(driver.FindElement(By.XPath("//*[@id=\"MainContent_RejillaRegistroFinanciero_ctl00_ctl04_labelConsumo\"]")).Text, "((,)*[0-9]*[0-9]*[0-9]+)+(\\.[0-9]{2})?"));
            }
            catch (AssertionException e)
            {   verificationErrors.Append(e.Message);
            }
            System.Console.WriteLine("errores: " + verificationErrors);
            System.Threading.Thread.Sleep(20000);
            driver.Quit();
        }

        public static void SetupTest()
        {   baseURL = "http://127.0.0.1:8081/ver.rel.1.2/";
            verificationErrors = new StringBuilder();
        }

        protected static void mouseOver(IWebDriver driver, IWebElement element)
        {   Actions builder = new Actions(driver);
            builder.MoveToElement(element);
            builder.Perform();
        }

        public static void highlightElement(IWebDriver driver, IWebElement element)
        {   for (int i = 0; i < 2; i++)
            {   IJavaScriptExecutor js = (IJavaScriptExecutor)driver;
                js.ExecuteScript("arguments[0].setAttribute('style', arguments[1]);",
                        element, "color: yellow; border: 2px solid yellow;");
                js.ExecuteScript("arguments[0].setAttribute('style', arguments[1]);",
                        element, "");
            }
        }
    }
} 
```

在[http://vidadigital.com.mx/publicacion/source/Program.cs下载](http://vidadigital.com.mx/publicacion/source/Program.cs)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T05:03:45.390

前段时间在看 MSDN 杂志，看到一篇关于“Watir”项目的文章引起了我的兴趣，因为当时我正在做很多自动化测试。我调查了一下，发现实际上有一个名为**WatiN**的项目，它是基于 .NET 的。检查一下，我认为这正是您想要做的。

[http://watin.org/](http://watin.org/)

[http://watir.com/](http://watir.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:38:28.260

首先使用以下方法启动该过程：

```
Process.Start("firefox.exe", "www.example.com"); 
```

然后要杀死它，您需要执行以下操作：

```
Process[] processes = Process.GetProcessesByName("firefox.exe");
foreach (Process p in processes)
{
    if (p.ProcessName.Equals("firefox.exe", StringComparison.OrdinalIgnoreCase))
    {
        p.Kill();
    }
} 
```

# jquery - 在标签更改时重置或重新加载 Jcarousel

> ID：14493962
> 
> 赞同：3
> 
> 时间：2013-01-24T04:26:40.053
> 
> 标签：jquery, html, jquery-plugins, jcarousel

我使用 jquery Ui 在两个不同的选项卡中制作了两个 jcarousel 滑块...

当我更改选项卡部分时，滑块必须重置（或）重新加载并移动到其第一个图像。

我用过这个脚本

```
jQuery(document).ready(function() {
  jQuery('#mycarousel').jcarousel();
  jQuery('#mycarousel2').jcarousel();
  $( "#tabs" ).tabs();
}); 
```

我试过这个脚本我对代码没有任何影响

```
<script type="text/javascript"> 
    var theModelCarousel = null; 

    function modelCarousel_initCallback(carousel) { 
        theModelCarousel = carousel; 

    }; 

    jQuery('#tabs-2').click(function() { 

         jQuery('#mycarousel').jcarousel({ 
            initCallback: modelCarousel_initCallback 

        });

    }); 

    function clearModelCarousel() { 
        theModelCarousel.reset(); 

    } 
</script> 
```

如果我更改为另一个选项卡（不刷新页面），如何重置滑块。

在这里我做了一个[BIN](http://jsbin.com/idabit/5/)以便于理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T04:47:29.983

您可以尝试使用 jcarousel 中的重新加载选项

```
.jcarousel('reload' [, options]) 
```

jCarousel [API](http://sorgalla.com/jcarousel/docs/reference/api.html)

```
$('.jcarousel').jcarousel('reload', {
    'animation': 'slow'
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T11:30:00.237

参考 API

这真的是一个简单的问题

[http://sorgalla.com/jcarousel/docs/reference/api.html](http://sorgalla.com/jcarousel/docs/reference/api.html)

```
 .jcarousel('reload' [, options]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-27T19:39:51.443

我有同样的问题，`.jcarousel('reload' [, options])`或者 `$('#mycarousel').jcarousel('scroll', 0);`有一个奇怪的副作用。

`('scroll', 0)`只是在 jcarousel 重新排序您的元素时随机工作。

`('reload' [, options])`第一眼就开始工作，但是当您单击下一张图片按钮时，它会滑动到您看到的最后一张图片旁边的图片。如果您最后使用上一个图片按钮，则无法正常工作。

对我有用的是每次打开 jcarousel 脚本时将其绑定到图像库，然后在每次关闭时销毁 jcarousel：

删除 jcarousel 使用：

> $('.gallery').jcarousel('destroy');

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-26T21:31:31.280

```
jQuery('#mycarousel').data('jcarousel').scroll(0); 
```

这会将您的轮播重置为起始位置；

或者如果在一个函数中你有 carousel 对象

```
carousel.scroll(0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T02:27:52.097

```
 $('#tabs').on('click', '.ui-tabs-anchor', function() {
    $('#mycarousel').jcarousel('scroll', 0);
    $('#mycarousel2').jcarousel('scroll', 0);
  }); 
```

也许可以使用滚动方法来定位轮播中的第一项。 [http://jsbin.com/idabit/23/edit](http://jsbin.com/idabit/23/edit)

# elasticsearch - Elasticsearch TermsFacet 给出错误计数

> ID：14493965
> 
> 赞同：1
> 
> 时间：2013-01-24T04:27:18.297
> 
> 标签：elasticsearch

我对 Elasticsearch Term Facet 有疑问

我把数据如下：

```
curl -X DELETE "http://localhost:9200/articles'

curl -X POST "http://localhost:9200/articles/article" -d '{"title" : "One",   "tags" : "foo","datetime":"2005-12-23 23:10:52"}'

curl -X POST "http://localhost:9200/articles/article" -d '{"title" : "Two",   "tags" : "bar","datetime":"2005-12-23 23:10:53"}'

curl -X POST "http://localhost:9200/articles/article" -d '{"title" : "Three", "tags" : "baz","datetime":"2005-12-23 23:10:54"}'

curl -X POST "http://localhost:9200/articles/article" -d '{"title" : "four", "tags" : "baz","datetime":"2005-12-23 23:10:55"}'

curl -X POST "http://localhost:9200/articles/article" -d '{"title" : "five", "tags" : "foo","datetime":"2005-12-23 23:10:56"}' 
```

因此，每当我查询术语方面时，它都会给出正确的结果，以下是我的 Elasticsearch 查询：

```
curl  'http://localhost:9200/articles/article/_search?pretty=true' -d '{

   "query": {
       "match_all": {}
   },
    "facets" : { "myfacet" : { "terms" : {"field" : "tags"}}
    }
}' 
```

但是，当我向 Facet 添加过滤器时，它不会显示任何方面计数以下是查询：

```
curl  'http://localhost:9200/articles/article/_search?pretty=true' -d '{

   "query": {
       "match_all": {}
   },
   "facets" : {
        "myfacet" : { "terms" : {"field" : "tags"},
             "filter" : { "range" :{
 "datetime" : {"from" : "2005-12-23   3:10:52","to" : "2005-12-23 23:10:56" }

        }
            }
    }
    }
}' 
```

我得到如下结果

```
facets" : {
    "myfacet" : {
      "_type" : "filter",
      "count" : 0
    }
  } 
```

所以，任何人都知道为什么它给出这样的计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:08:08.967

日期格式无效，看一下elasticsearch支持的日期时间格式（太长了，别看了，jodatime支持的任何日期都是elasticsearch支持的）。

```
http://www.elasticsearch.org/guide/reference/mapping/date-format.html 
```

话虽如此，您只需要修改插入语句中的日期并将它们置于有效的日期格式中，例如`2005-12-23T23:10:55Z`. 然后只需将您的查询更改为该时间格式的适当时间范围，这应该会给您结果。

编写这些查询时也要小心，因为我注意到您在 from 子句中使用的日期无效。

以下是修改后的 curl 脚本：

```
curl -X POST "http://localhost:9200/articles/article" -d '{"title" : "One",   "tags" : "foo","datetime":"2005-12-23T23:10:52Z"}'

curl -X POST "http://localhost:9200/articles/article" -d '{"title" : "Two",   "tags" : "bar","datetime":"2005-12-23T23:10:53Z"}'

curl -X POST "http://localhost:9200/articles/article" -d '{"title" : "Three", "tags" : "baz","datetime":"2005-12-23T23:10:54Z"}'

curl -X POST "http://localhost:9200/articles/article" -d '{"title" : "four", "tags" : "baz","datetime":"2005-12-23T23:10:55Z"}'

curl -X POST "http://localhost:9200/articles/article" -d '{"title" : "five", "tags" : "foo","datetime":"2005-12-23T23:10:56Z"}' 
```

和修改后的搜索：

```
 curl  'http://localhost:9200/articles/article/_search?pretty=true' -d '{

   "query": {
      "match_all": {}
    },
    "facets" : {
     "myfacet" : { 
         "terms" : {"field" : "tags"},
         "filter" : { "range" :{
                         "datetime" : {
                             "from" : "2005-12-23T23:10:52Z",
                              "to" : "2005-12-23T23:10:54Z" 
                          }   
                       }
                    }
                  }
             }
}' 
```

希望这会有所帮助，马特

# visual-c++ - 指向对话框类的全局指针

> ID：14493966
> 
> 赞同：-1
> 
> 时间：2013-01-24T04:27:19.963
> 
> 标签：visual-c++, mfc

我需要一个示例来显示指向名为`Dlg1`. 它已初始化，可供其他对话框访问和使用。我意识到使用全局指针有其风险，并且可以指示设计流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:01:34.447

你的问题是什么？

例如，请参阅 Microsoft 如何允许访问[CWinThread::m_pMainWnd](http://msdn.microsoft.com/en-us/library/f3ddxzww%28v=vs.80%29.aspx)。他们将其设为公共变量

# spring-mvc - 错误：没有注册 ContextLoaderListener

> ID：14493971
> 
> 赞同：0
> 
> 时间：2013-01-24T04:28:10.383
> 
> 标签：spring-mvc

嗨，我已经在 spring mvc 中编写了登录代码，我的代码如下：

**web.xml:-**

http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5"> Spring3Demo

```
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/forms/*</url-pattern>
</servlet-mapping>
<welcome-file-list>
<welcome-file>index.jsp</welcome-file>
</welcome-file-list>
<listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
 </web-app> 
```

**Dispatcher-servlet：-**

```
<context:component-scan base-package="net.roseindia.controllers" />

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/views/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>

<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="/WEB-INF/messages" />
</bean>
<bean id="loginForm" class="net.roseindia.forms.LoginValidator"/>
<bean id="loginController" class="net.roseindia.controllers.LoginController">
    <property name="sessionForm"><value>false</value></property>
    <property name="commandName"><value>loginForm</value></property>
    <property name="commandClass"><value>net.roseindia.forms.LoginForm</value></property>
    <property name="formView"><value>index</value></property>
    <property name="successView"><value>loginsuccess</value></property>
    <property name="urlMap">
        <map>
            <entry key="index.jsp">
                <ref bean="loginController"/>
            </entry>
        </map>
    </property>
</bean>
<!-- Configure the multipart resolver -->
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">      
</bean> 
```

**Index.jsp：-**这是在 webinf 之外的 web 内容文件夹中

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Spring 3, MVC Examples</title>
</head>
 <body>
    <h1>Spring 3, MVC Examples</h1>
 <ul>
   <li><a href="forms/helloworld.html">Hello World</a></li>
</ul>
<form:form action="login.html" commandName="loginForm"  >
<table>
    <tr>
    <td>User Name<FONT color="red"><form:errors path="userName" /></FONT></td>  <td><form:input path="userName" /></td>
    </tr>
    <tr>
    <td>Password<FONT color="red"><form:errors path="password" /></FONT></td><td><form:password path="password" /></td>
    </tr>
    <tr>
    <td colspan="2"><input type="submit" name="submit" value="Login"/></td>
    </tr>
</table>
</form:form>
  </body>
</html> 
```

在 src 文件夹中，我有**net.roseindia.forms.LoginForm**和**net.roseindia.controllers.LoginController类**

**我收到错误 java.lang.IllegalStateException: No WebApplicationContext found: no ContextLoaderListener registered? 在 index.jsp 的第 15 行，即在表单标签上**

请建议如何配置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:45:56.640

将上下文参数 contextConfigLocation 添加到您的 web.xml。即使您不需要尝试添加一个空的 applicationContext 文件。

```
<context-param> 
    <param-name>contextConfigLocation</param-name> 
    <param-value>classpath*:applicationContext*.xml</param-value> 
</context-param> 
```

# android - 关于 ContentObserver 的内存泄漏

> ID：14493972
> 
> 赞同：3
> 
> 时间：2013-01-24T04:28:13.360
> 
> 标签：android, memory-leaks, mat

我在我的 android 应用程序上遇到了有关内存泄漏的问题。

我使用startActivity从activity1到activity2，然后通过按返回按钮返回activity1。重复服务时间，adb shell显示应用程序的RSS正在上升并且不能下降。最后虚拟机将被关闭。

然后我用 MAT 发现：

```
Leak Suspects» Leaks» Problem Suspect 1 Description
59 instances of "android.database.ContentObserver$Transport", loaded by "<system class loader>" occupy 1,569,864 (39.41%) bytes. 

Keywords
android.database.ContentObserver$Transport

 Reference Pattern
Class Name Shallow Heap Retained Heap Percentage 
class android.database.ContentObserver$Transport @ 0x40308cc0 0 0 0.00% 
```

但我从不使用那个类。我怎样才能找出真正的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T10:59:56.743

你在使用任何 CursorAdapter 吗？如果它没有正确初始化，它可能会在 ContentObserver 上创建它，这会产生你的泄漏。

您应该将此构造函数用于 CursorAdapter。标志 0 将阻止它创建自己的 ContentObserver。

```
new CursorAdapter(context, cursor, 0) 
```

# nhibernate - NHibernate.ByteCode.LinFu.dll 的使用

> ID：14493975
> 
> 赞同：0
> 
> 时间：2013-01-24T04:28:39.040
> 
> 标签：nhibernate

在我的 ASP.NET MVC 3 项目中，我使用 Nhibernate，因为我引用了两个 DLL，即——

1.LinFu.DynamicProxy.dll

2.NHibernate.ByteCode.LinFu.dll

我不知道这两个 DLL 的用途，即使我删除这两个 DLL 的引用然后项目构建成功。那么这些DLL有什么用呢？

另外，在`hibernate-configuration`我有类似的条目 -

```
 <property name="proxyfactory.factory_class">
         NHibernate.ByteCode.LinFu.ProxyFactoryFactory, NHibernate.ByteCode.LinFu
      </property> 
```

它告诉了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:05:09.797

1) NHibernate 中有一个突发新闻`2.1`：

> 从 NH2.0.xGA 到 NH2.1.0 的重大变化
> 
> 如果您现在想使用 LinFu.DynamicProxy 进行延迟加载，您必须部署 NHibernate.ByteCode.LinFu.dll

它引入了不仅使用 Castle 作为代理生成器的可能性。

2) NHibernate`3.2`引入了另一个 chang。此发行版本身包含代理生成器，无需安装它`LinFu`。因此，如果您运行的是 NH 3.2+，则不需要 LinFu

如果您有版本`2.1`- `3.1`：那么（在运行时）NHibernate 将加载您在配置中指定的代理生成器：

```
<session-factory name="NHibernate.Test">
...
 <property name="proxyfactory.factory_class">
    NHibernate.ByteCode.LinFu.ProxyFactoryFactory
   , NHibernate.ByteCode.LinFu
</property>
... 
```

构建时不需要这个库（它只实现接口）。但是，如果您将升级到 NH 3.2+，您就不必再解决它了...

# jquery - 特定 div 上的自定义滚动条

> ID：14493976
> 
> 赞同：0
> 
> 时间：2013-01-24T04:28:44.773
> 
> 标签：jquery, scrollbars

我需要一种方法来分别滚动两个单独的“div”（实际上是`<nav>`and `<section>`，但为了简单起见，我们称它们为 div）。

一个是左侧的垂直导航，另一个是部分。每当任何一个溢出时，我都希望在 div 内出现一个自定义滚动条，并且当​​它们滚动时，另一个应该保持不变。

我的猜测是我必须用 jQuery 来做这件事？`overflow: hidden;`到目前为止，我所做的只是`<body>`隐藏标准滚动条。添加自定义滚动条的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:36:56.960

我找到了一个不错的 jquery 插件：

[http://www.dynamicdrive.com/dynamicindex11/facescroll/index.htm](http://www.dynamicdrive.com/dynamicindex11/facescroll/index.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T04:40:24.153

看看[jScrollPane](http://jscrollpane.kelvinluck.com/)

> jScrollPane 是 Kelvin Luck 的跨浏览器 jQuery 插件，它将浏览器的默认滚动条（在具有相关溢出属性的元素上）转换为 HTML 结构，可以很容易地用 CSS 换肤。

# c++ - 插入排序的运行时间

> ID：14493978
> 
> 赞同：1
> 
> 时间：2013-01-24T04:29:17.237
> 
> 标签：c++, sorting, c++11, time-complexity, insertion-sort

```
for (int p=1; p < a.size(); p++) {
    int tmp = a[p];
    for(j=p; j>0 && tmp < a[j-1]; j--) {
        a[j] = a[j-1];
    }
    a[j] = tmp;
} 
```

我无法找出插入排序的最坏情况。因此，给定的数组是按降序排列的，我们要按升序对其进行排序。

外循环通过数组。因此，它运行（n 次）。O(n) `int tmp=a[p]`---- 该语句被执行 n 次。O(n) 内部循环被执行 (1+2+3+4+5+6+.... +n-1) 次。O(n^2) `a[j]= tmp`-------- 该语句被执行 n 次。上）

我不确定在找到插入排序的运行时间后该怎么做？如果可以，请纠正我的工作。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:27:27.857

这是插入排序的两行通用 C++11 实现

```
template< typename ForwardIterator, typename Compare = std::less<typename std::iterator_traits<ForwardIterator>::value_type> >
void insertion_sort(ForwardIterator first, ForwardIterator last, Compare cmp = Compare())
{
        for (auto it = first; it != last; ++it) {
                auto const insertion = std::upper_bound(first, it, *it, cmp);
                std::rotate(insertion, it, std::next(it));
        }
} 
```

该算法采用一系列元素（由两个迭代器`first`和给出`last`）和一个比较函数（默认为`operator<`指向元素的可能内置函数）。

主循环（元素数量呈线性关系）保持子区间的`[first, it)`排序，并反复搜索放置下一个元素的插入点。它相当于你的主循环。它通过[**二进制搜索**](http://en.cppreference.com/w/cpp/algorithm/upper_bound)（对数复杂度）来实现。在您的代码中，您使用反向线性搜索（具有线性复杂性但可能有更好的缓存行为）。

找到插入点后，它只是[**旋转**](http://en.cppreference.com/w/cpp/algorithm/rotate)两个范围`[insertion, it)`和`[it, it+1)`，这意味着将当前元素交换到插入点。这种旋转与迄今为止已排序的元素数量呈线性关系。由于嵌套在主循环中，所以插入排序的整体复杂度是二次的，即 `O(N^2)`. 您的代码集成了插入点的交换和搜索，但这不会改变复杂性。

请注意，当输入范围已经排序时，插入点将始终等于 指向的元素`it`，这意味着`std::rotate`根本不需要交换任何东西。足够智能和优化的编译器应该能够执行该优化。如果是这种情况，则排序范围上的插入排序具有线性复杂性。

[这里](https://stackoverflow.com/a/14412866/819272)给出了一个类似的 2 行选择排序方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:00:47.607

外循环执行 n 次。

内部循环的每次运行都会执行 0 到 p-1 次，其中 p 从 0 到 n 变化。在最坏的情况下，它将执行 p-1 次。如果 p 从 0 变化到 n，则平均而言，p 为 n/2。因此，内循环的最坏情况复杂度是 O(p-1) = O(n/2-1) = O(n)。

除了循环之外，代码都是 O(1)（最重要的是，内部循环内的代码是），所以只有循环才是重要的。

O(n) * O(n) = O(n^2)。

QED。

大致就是你自己给的分析。

# c# - 如果对象是使用实例构造函数初始化程序构造的，C# GC.Collect 不会破坏它

> ID：14493980
> 
> 赞同：12
> 
> 时间：2013-01-24T04:29:20.847
> 
> 标签：c#, .net, garbage-collection, weak-references

> **可能重复：**
> [使用对象初始化器的复活差异](https://stackoverflow.com/questions/9753256/resurrection-difference-in-using-object-initializer)

我很难理解垃圾收集器在 C# 中是如何工作的（我使用的是 2012，所以是 c# 4.5）。这是我的示例代码：

```
 public class A
    {
        public int c;
        public A(){}
        public A(int pC)
        {
            c = pC;
        }
    }

    public static void Main()
    {
        // Test 1
        var a = new A {c=199};
        var aRef = new WeakReference(a);
        a = null;
        Console.WriteLine(aRef.IsAlive);
        GC.Collect();
        Console.WriteLine(aRef.IsAlive);
        //            Console.WriteLine(GC.GetGeneration(aRef.Target)); //output 1

        // Test 2
        a = new A (200);
        aRef = new WeakReference(a);
        a = null;
        Console.WriteLine(aRef.IsAlive);
        GC.Collect();
        Console.WriteLine(aRef.IsAlive);
    } 
```

输出为真/真/真/假

在我看来，在这两个测试中，堆上的对象在调用 GC.Collect 之前没有根。但是碰巧在测试 1 中，对象通过了 force gc 运行，而在测试 2 中则没有。那么，使用初始化程序有什么神秘之处吗？我的猜测是，使用初始化程序时可能会有“一些额外的代码”，这将成为同一对象的强根.....

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T07:26:07.027

使用初始化程序时说

```
 var a = new A {c=199}; --------> 1 
```

编译器在堆栈上包含一个额外的引用，使对象通过 GC 。
上面的陈述（1）结果如下

```
 var temp = new A() ;
  temp.c=199;
  var a=temp . 
```

我认为这个临时变量使这个对象在 GC 期间还活着。

请参考这个[链接](https://stackoverflow.com/questions/9753256/resurrection-difference-in-using-object-initializer)

**编辑**：正如**TomTom**在评论中提到的那样。如果调试器正在运行，那么 GC 行为将被更改，并且变量保持活动状态直到方法结束，直到最后一次使用。如果我错了请纠正我

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T13:13:09.667

显然，您正在运行 Debug 构建或附加了调试器。垃圾收集器从即时编译器获得生命周期提示，它生成一个表，指示可以在哪些代码段中引用局部变量。垃圾收集器遍历被 GC 中断的执行方法的堆栈，并根据该表检查执行位置。并在找到匹配项时将引用计为有效。

如果代码是在 Debug 配置中构建的，或者当附加了调试器时，jitter 会修改此表并让变量保持活动状态，直到方法体结束。这使得调试代码变得更加容易，您可以将局部变量放在监视表达式中，即使您越过不再使用变量的点，它也会产生结果。

@Imposter 发布的答案是正确的，隐藏的临时变量使 A 的第一个实例保持活动状态。并且垃圾收集器认为它在方法结束之前有效，因为您正在使用调试器。您的第二个`a = null;`分配允许对第二个实例进行垃圾收集。

当您在生产环境中运行此代码时，真正会发生什么是非常不同的。一方面，抖动优化器将**删除**a = null 分配。它知道这些分配没有有用的副作用，因此不会为它们生成代码。非常不直观，最好的方法是采取以下步骤：

*   从代码中删除 a = null 分配
*   使用 Build + Configuration Manager 切换到 Release 配置
*   使用工具 + 选项，调试，常规，取消勾选“在模块加载时抑制 JIT 优化”选项。

最后一个选项更改允许您继续使用调试器，而不会影响抖动生成代码的方式。现在临时变量将不再保留引用的 A 的第一个实例，由抖动生成的表只会将其标记为存储方法中第一条语句的有效引用。运行你的程序，你会看到：

```
True
False
True
False 
```

有了重要的新见解，即实际上不需要设置对 null 的引用，垃圾收集器足够聪明，不需要您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:32:42.380

我坚信堆栈上的额外引用使 GC Root。

让我们通过 SOS 调试确认..

1.  使用初始化器时，

    ```
     (before GC.Collect)
      01bdc110 - object address of A.

      !GCRoot 01bdc110 
      Note: Roots found on stacks may be false positives. Run "!help gcroot" for more info.
      Scan Thread 2920 OSTHread b68
      ESP:20e960:Root:  01bdc110(GCTest.A)
      **ESP:20ebb8:Root:  01bdc110(GCTest.A) -- extra stack reference generated by compiler**
      ESP:20ebbc:Root:  01bdc110(GCTest.A)
      ESP:20ebc4:Root:  01bdc110(GCTest.A)
      Scan Thread 2404 OSTHread 964 
    ```

    （在 GC.Collect 之后）

    ```
     !GCRoot 01bdc110 
      Note: Roots found on stacks may be false positives. Run "!help gcroot" for more info.
      Scan Thread 2920 OSTHread b68       
      **ESP:20ebb8:Root:  01bdc110(GCTest.A) ----//Still remains**
      ESP:20ebbc:Root:  01bdc110(GCTest.A)         
      Scan Thread 2404 OSTHread 964 
    ```

    确认弱引用没有被移除。

    ```
     !GCRoot 01bdc210 //(address of weak reference)
       Scan Thread 2920 OSTHread b68
       **ESP:20e968:Root:  01bdc210(System.WeakReference) // Created by us** 
       ESP:20ebb4:Root:  01bdc210(System.WeakReference) // other in mscorlib
       ESP:20ebc0:Root:  01bdc210(System.WeakReference) // other in mscorlib
       Scan Thread 2404 OSTHread 964 
    ```

2，没有初始化器，

```
 !GCRoot 01bdd4e0 
    Scan Thread 2920 OSTHread b68
    ESP:20e960:Root:  01bdd4e0(GCTest.A)
    ESP:20eba8:Root:  01bdd4e0(GCTest.A)
    ESP:20ebc4:Root:  01bdd4e0(GCTest.A)
    Scan Thread 2404 OSTHread 964

   **No extra stack reference.** 
```

# php - mysql_fetch_assoc 回显特定的行值

> ID：14493984
> 
> 赞同：1
> 
> 时间：2013-01-24T04:30:04.527
> 
> 标签：php, get

我想将 mysql_fetch_assoc 的结果作为一个数组获取，然后在该数组中回显一个特定值。我怎么做？我试过了

```
$d = array();
while($row_dates = mysql_fetch_array($date_result)){
$d[] = $row_dates;
}

echo $d[1];// this would be the result from the first row
echo $d[3];// this should be the result from the second row. 
```

结果我只是得到了 Array 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:32:02.130

使用下面的代码

```
$d = array();
while($row_dates = mysql_fetch_array($date_result)){
    $d[] = $row_dates['your_column_name'];
} 
```

你只是错过了`column_name`你的代码，你的代码中的其他一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:50:48.787

```
mysql_fetch_array 
```

> 返回与获取的行对应的数组，并将内部数据指针向前移动。

现在在这里

```
$d[] = $row_dates; 
```

你分配的`$d[]`是数组而不是值（我认为你想要什么）

检查你习惯了`var_dump()`什么`var_dump($row_dates);`

现在你是什么

```
while($row_dates = mysql_fetch_array($date_result)){
    $d[] = $row_dates['your_column_name'];
} 
```

# javascript - 在Javascript中切换数组排序（升序到降序，反之亦然）

> ID：14493985
> 
> 赞同：6
> 
> 时间：2013-01-24T04:30:06.507
> 
> 标签：javascript

我正在像这样对数组进行排序：

```
array.sort((function(index) {
    return function(a, b){
        return (a[index] === b[index] ? 0 : (a[index] < b[index] ? -1 :1));
    };
})(0)); 
```

如您所见，它是按升序排列的。

我的问题是如何切换排序？例如，如果它已经按升序排列，那么如何按降序对它进行排序，反之亦然？

我知道按降序排序我需要修改如下代码：

```
array.sort((function(index) {
    return function(a, b) {
        return (a[index] === b[index] ? 0 : (a[index] < b[index] ? 1 :-1));
    };
})(0)); 
```

但我不知道如何切换。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-08-11T10:18:01.617

.reverse() 将始终反转数组的顺序，因此在切换时，您只需调用 yourSortedArray.reverse()

```
var myArray = [1, 5, 8, 4, 0, 3, 6];
myArray.sort(); //[0, 1, 3, 4, 5, 6, 8]
myArray.reverse(); //[8, 6, 5, 4, 3, 1, 0] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-16T00:06:15.883

怎么样：

```
var array = [ 2,4,7,12,1,5 ];

array.toggled_sort = function () {
    var self=this;
    this.asc=!this.asc;
    return this.sort(function (l, r) {
        return l > r ? (self.asc ? 1 : -1) : l < r ? (self.asc ? -1 : 1) : 0;
    });
};

array.toggled_sort(); // ==> [ 1,2,4,5,7,12 ]
array.toggled_sort(); // ==> [ 12,7,5,4,2,1 ]
array.toggled_sort(); // ==> [ 1,2,4,5,7,12 ]
array.toggled_sort(); // ==> [ 12,7,5,4,2,1 ]
// etc. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T06:55:47.290

你在正确的轨道上，你需要第三个闭包来存储切换的状态。

```
function fn(reversed){
    return function(){
        reversed = !reversed;
        return function(a,b){
            return (a==b ? 0 : a < b? -1 : 1) * (reversed ? -1 : 1);
        };
    };
};
// usage
var toggleSort = fn();
array.sort(toggleSort()) 
```

jsfiddle：http: [//jsfiddle.net/8JMuj/1/](http://jsfiddle.net/8JMuj/1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T04:42:21.553

如果您确定该数组已排序，那么您可以使用简单的循环来反转顺序

```
var l = array.length;
for(i=0; i< l / 2; i++) {
   var t = array[i];
   array[i] = array[l - 1 - i];
   array[l - 1 - i] = t;
} 
```

更简单的解决方案是使用`reverse`函数（顺便说一句，检查[这个 SO Q&A](https://stackoverflow.com/questions/5276953/what-is-the-most-efficient-way-to-reverse-an-array-in-javascript)以了解不同的反转算法及其性能）

如果您不知道数组的初始状态，那么我会建议将自定义属性关联到将跟踪排序顺序的数组。例如，

```
function sortArray(a, isAscending) {
  var currentSort = a["my_sort_order"];
  if (typeof currentSort != 'boolean') {
     // assume it be unsorted, use sort alogorithm
     a.sort(function(a,b) { return isAscending ? a - b : b - a; }); // assuming numerical array, modify as per your needs
  } else if (currentSort != isAscending) {
     // sorted but in different order, reverse the order
     a.reverse(); // or use for loop
  }
  // set the sort order
  a["my_sort_order"] = isAscending ? true : false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-28T13:57:42.920

```
//Array sort by its object property can be implemented as this where sortType variable is used as the toggle parameter

//sortElement is the object property can be used as variable if you  need to select the property that which is used for sorting 
```

//按日期属性排序`var elem1Var = new Date(elem1[sortElement]);`

//按字符串属性排序`var elem1Var =elem1[sortElement].toUpperCase();`

```
var sortMethod = -1;
if(self.sortType == 'ASC'){
  sortMethod = 1;
}

dataArr.sort(function(elem1,elem2){
  var elem1Var = elem1[sortElement];
  var elem2Var = elem2[sortElement];

  if(elem1Var  < elem2Var){
       return -1*sortMethod;
  }

  if(elem1Var > elem2Var){
       return  1*sortMethod;
  }
  return 0;
 }); 
```

# javascript - Javascript - 带有布尔键的数组？

> ID：14493986
> 
> 赞同：7
> 
> 时间：2013-01-24T04:30:07.013
> 
> 标签：javascript, arrays, key, boolean

我对 Javascript 比较陌生，可能只是一个我不熟悉的技巧，但是如何将布尔值分配给数组键？

发生了什么：

```
var test = new Array();
test[false] = "asdf";
test['false'] = "fdsa";

Object.keys(test); // Yield [ "false" ]
Object.keys(test).length; // Yield 1 
```

我想要发生的事情：

```
var test = new Array();

//Some stuff

Object.keys(test); // Yield [ "false" , false ]
Object.keys(test).length; // Yield 2 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T04:34:50.660

您不能在数组中使用任意索引，但您可以使用对象文字来（某种程度上）完成您所追求的：

```
var test = {};
test[false] = "asdf";
test['false'] = "fdsa"; 
```

但是应该注意，对象属性*必须*是字符串（或可以转换为字符串的类型）。使用布尔原语最终会创建一个名为`'false'`.

```
test[false] === test['false'] === test.false 
```

这就是为什么您的第一个示例的`Object.keys().length`调用仅返回`1`.

对于 JavaScript 中的对象的优秀入门指南，我推荐 MDN 的[*Working with objects*](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T04:34:17.433

Javascript 中的数组不是关联的，**因此您不能将值分配给其中的键。**

```
var test = [];
test.push(true);  // [true]
test.push(false); // [true, false] 
```

**你对一个对象感兴趣！**

```
var test    = {};
test[true]  = "Success!";
test[false] = "Sadness";  // {'false': "Sadness", 'true': "Success"} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T04:33:53.817

Javascript 数组仅基于数字索引。您可以使用 0 和 1 作为键（尽管我想不出需要布尔键的情况）。`myArr[0] = "mapped from false"; myArr[1] = "mapped from true";`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-09T23:50:08.640

您也可以反转上面的答案，例如

```
let test = [true];

console.log(typeof test);

// Output: Object True 
```

# javascript - 解析来自 google 和 twitter 差异的 json 数据

> ID：14493997
> 
> 赞同：1
> 
> 时间：2013-01-24T04:31:18.307
> 
> 标签：javascript, jquery, json, google-maps

我是 JavaScript 新手。我曾在 Twitter API 上工作过。在 twitter API 中，我使用 jQuery.ajax 函数从 twitter 服务器获取 json 数据。但是当我对谷歌地图服务器使用相同的选项时，我的应用程序在进入 jQuery.ajax 的那一刻没有给出任何响应。我尝试使用 jslint 对其进行调试，但结果很干净。我使用警报进行调试，当它进入 jQuery.ajax 函数时它会停止。检索数据的方法是否因来源而异？如果不是，为什么我的代码没有响应？

Twitter运行功能::

```
 var twitterapi = "http://search.twitter.com/search.json?";
          jQuery.ajax(
          {
             type: "GET",
             url: twitterapi,
             data: 
              {
                "q": hashtag,
                 "rpp": 1000
              },
              dataType: 'jsonp'
          }).done(function (response) 
             {
                var results = response.results;
                for (var i = 0; i < results.length; i++) 
                 {

                    $("#tweet").prepend("<li class='tweet'>" +
                    "<img src='" + 
                    results[i].profile_image_url + 
                    "'/>" + 
                    "<span class='username'>" +
                    results[i].from_user +
                    "</span> <span class='tweet_content'> " +
                    results[i].text + 
                    "</span></li>");
                  }
              }); 
```

我的谷歌地图 API（不工作）

```
 var j = 2;
var friends = [];
var distance =[];

$(document).ready(function () {

     alert("function started");
    $('#button').click(function () {
        if (j < 11) {
            $('#friends').append('Friend' + j + ':<input type="text" id="friend' + j + '"/><br/><br/>');
            j++;
        }
        else {
            alert("Limit reached");
        }
    });

   $('button').click(function(){
   var a =[];
   alert("button clickede");
    for(i=1;i<=j;i++)
     {
        a[i] = $("#friend" + i).val();
      }     

    var gurl = "http://maps.googleapis.com/maps/api/distancematrix/json?"+
        "origins=" +
        a.join('|').replace(/ /g,'+') +
        "&destinations=" +
        a.join('|').replace(/ /g,'+') +
        "&sensor=false";

           alert("making request to" +gurl);
            jQuery.ajax(
          {
             type: "GET",
             url: gurl,
             dataType: 'jsonp'
          }).done(function (response) 
           {
           alert("request made to"+gurl);

           var rows = response.rows;        
             alert(row[0].elements[0].value);

       for(var i=0;i<rows.length;i++)
         {
             for(var j=0;j<elements.length;j++)
              {
                       distance[i][j] = row[i].elements[j].distance.value;
              } 
          }

            alert(distance[0][0]);
        }); 

     });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:59:53.460

我不知道你遇到了什么错误，所以我帮不上什么忙。

但是您发布的代码存在三个问题：

1- 由于 a 未定义，我无法通过前两行。

2-删除代码中的 a 调用，然后引发语法错误。我通过删除最后一个 }); 线。

3- 它发出了请求，但又抛出了另一个错误（可能是因为 URL 格式错误）。