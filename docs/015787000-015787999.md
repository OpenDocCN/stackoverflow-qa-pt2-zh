# StackOverflow 问答 15787000-15787999

# asp.net - 重音字符在 pdf 中显示为 Ã© 使用 Persits.PDF

> ID：15787001
> 
> 赞同：2
> 
> 时间：2013-04-03T12:11:32.910
> 
> 标签：asp.net, vb.net, pdf, fonts, pdf-generation

[我正在尝试使用 Persits.PDF (Persits URL)](http://www.asppdf.net/)在 pdf 上显示一个名称，这个特定的名称中有一个重音字符，这是`é`

当我使用 Arial 字体时，它工作正常：

```
Dim standardFont As PdfFont = doc.Fonts.Item("Arial") 
```

但是，当我使用 Helvetica 时，`é`显示为`Ã©`

```
Dim standardFont As PdfFont = doc.Fonts.Item("Helvetica")

strParams = "x=" & (leftMarginX + CDbl(1345)).ToString() & "; y=660; width=1430.5; size=42; color=#000000;"
page.Canvas.DrawText(strFullName, strParams, standardFont) 
```

在上面的代码`page = Persits.PDF.PdfPage`和`doc = Persits.PDF.PdfDocument`

我怎样才能让 Helvetica 显示这个字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T12:29:36.827

我认为文档告诉您 Helvetica 不支持它 - 请参阅[support.persits.com](http://support.persits.com/show.asp?code=PS040206127)

# php - PHP Web 应用程序的基于树的文档

> ID：15787008
> 
> 赞同：0
> 
> 时间：2013-04-03T12:11:42.657
> 
> 标签：php, web-applications

我有一个 PHP Web 应用程序，我想为该应用程序实现文档，以便用户可以在树视图中导航。类似于微软的 MSDN。

我还想要将文档导出为 PDF 的选项

有没有我可以使用的包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:21:06.277

大多数 Wiki 将提供某种导出功能，但并非所有 Wiki 都提供树状结构导航。我经常使用dokuwiki，它有[几个](https://www.dokuwiki.org/plugin%3abookcreator)用于创建PDF 的插件。

# mysql - SQL 计算所有行

> ID：15787016
> 
> 赞同：0
> 
> 时间：2013-04-03T12:11:59.617
> 
> 标签：mysql, sql, count

我需要计算查询的计数，但是我遇到了一些问题。

原始查询运行良好。
它给了我 1 行的正确计数（3200）：

```
select count(e.entity_id) 
from `catalog_product_entity` AS `e`
INNER JOIN `review` AS `rt` 
ON rt.entity_pk_value = e.entity_id
INNER JOIN `review_detail` AS `rdt` 
ON rdt.review_id = rt.review_id
INNER JOIN `review_store` AS `store` 
ON rt.review_id=store.review_id AND store.store_id=0 
```

我需要更改此查询以获取其他值，所以现在，这是新的计数查询：

```
select count(e.entity_id) 
from `catalog_product_entity` AS `e`
INNER JOIN `review` AS `rt` 
ON rt.entity_pk_value = e.entity_id
INNER JOIN `review_detail` AS `rdt` 
ON rdt.review_id = rt.review_id
LEFT JOIN `rating_option_vote` AS `vt` 
ON vt.review_id = rt.review_id
INNER JOIN `review_store` AS `store` 
ON rt.review_id=store.review_id AND store.store_id=0 
GROUP BY `rt`.`review_id` 
```

第二个查询给我的不是 1 行具有正确计数 (3200)，而是 3200 行，每行具有不同的计数。

我需要的是这样的：

```
SELECT COUNT (*) FROM
( `second_query`) 
```

或任何其他让我恢复正确计数的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:14:07.443

去掉 group by 子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:24:22.610

试试这个

```
select TOP 1 count(e.entity_id) OVER() [Total Count]
from `catalog_product_entity` AS `e`
INNER JOIN `review` AS `rt` 
ON rt.entity_pk_value = e.entity_id
INNER JOIN `review_detail` AS `rdt` 
ON rdt.review_id = rt.review_id
LEFT JOIN `rating_option_vote` AS `vt` 
ON vt.review_id = rt.review_id
INNER JOIN `review_store` AS `store` 
ON rt.review_id=store.review_id AND store.store_id=0 
GROUP BY `rt`.`review_id` 
```

或者

```
SELECT COUNT(*)
FROM 
(select `rt`.`review_id`
from `catalog_product_entity` AS `e`
INNER JOIN `review` AS `rt` 
ON rt.entity_pk_value = e.entity_id
INNER JOIN `review_detail` AS `rdt` 
ON rdt.review_id = rt.review_id
LEFT JOIN `rating_option_vote` AS `vt` 
ON vt.review_id = rt.review_id
INNER JOIN `review_store` AS `store` 
ON rt.review_id=store.review_id AND store.store_id=0 
GROUP BY `rt`.`review_id`) AS T1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:16:25.143

当您有没有 a 的查询时`group by`，它将隐式地将整个结果组成一组，并且您将获得该组的计数。

通过添加，`group by`您将为每个评论创建一个组，结果是每个组的计数。

只需`group by`从查询中删除该子句，您就可以获得整个结果的计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:37:26.883

试试这个

```
select TOP 1 count(e.entity_id) OVER (partition by '1')
from `catalog_product_entity` AS `e`
INNER JOIN `review` AS `rt` 
ON rt.entity_pk_value = e.entity_id
INNER JOIN `review_detail` AS `rdt` 
ON rdt.review_id = rt.review_id
LEFT JOIN `rating_option_vote` AS `vt` 
ON vt.review_id = rt.review_id
INNER JOIN `review_store` AS `store` 
ON rt.review_id=store.review_id AND store.store_id=0 
GROUP BY `rt`.`review_id` 
```

# clojure - lein ring 服务器不会自动重建

> ID：15787020
> 
> 赞同：1
> 
> 时间：2013-04-03T12:12:07.050
> 
> 标签：clojure, leiningen, compojure, hiccup, cljsbuild

我正在编写一个小型 clojurescript 项目，并遵循了许多使用 lein ring 作为开发 Web 服务器的 lein cljsbuild 示例。

`lein ring server`我曾经在本地机器上运行以提供网站服务。现在，当我更改包含打嗝 html 定义的 clj 文件时，似乎 lein ring 服务器不会自动重建和重新启动。

根据[https://github.com/weavejester/lein-ring](https://github.com/weavejester/lein-ring)应该是这种情况（也许我读错了，但它说重新加载应该是默认值）。

我的 project.cljs 或多或少等同于[https://github.com/emezeske/lein-cljsbuild/blob/master/example-projects/advanced/project.clj](https://github.com/emezeske/lein-cljsbuild/blob/master/example-projects/advanced/project.clj)

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-13T09:21:42.927

我遇到了同样的问题，最终原因是我在声明命名空间之前需要一个库，要求命名空间下方的行使其工作。所以它就像：

```
(require 'clojure.pprint)
(ns app.core) 
```

我改为：

```
(ns app.core)
(require 'clojure.pprint) 
```

# java - 使用 Java 创建 Lotus Notes 约会

> ID：15787031
> 
> 赞同：0
> 
> 时间：2013-04-03T12:12:33.490
> 
> 标签：java, lotus-notes, appointment

我试图使用 Domino Java API DOMINGO 生成 Lotus Notes 约会。约会在我的本地邮件数据库中成功创建，我能够打开它。但不幸的是，约会中没有必需的与会者名单。关闭它后，我的字段“RequiredAttendees”不再存在，它已被删除。我试图将手动创建的约会与我的 Java 应用程序生成的新约会进行比较。结果可以在[Dropbox 文件夹](https://www.dropbox.com/sh/vxaycj88b4rkzum/AJyy1RJK28)中找到。

我无法弄清楚我的 Java 生成的约会中缺少什么。

谢谢你的帮助！

PS：我知道之前有人[问过](https://stackoverflow.com/questions/12144041/creating-an-appointment-for-lotus-notes-programmatically)这个问题。我尝试了针对此问题的推荐解决方案，但没有成功...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T19:49:25.327

既然您正在使用 Java，为什么不使用出色的新[日历服务 REST API](http://www.openntf.org/blogs/openntf.nsf/d6plinks/NHEF-97BAWN)呢？您可以直接从 OpenNTF.org 下载它，并让 Domino 在幕后完成所有艰苦的工作。您还可以在所有其他 Domino 视图和文档上使用完整的 CRUD（创建、替换、更新和删除）支持，以及 Domino REST Services、[Domino Data Services](http://infolib.lotus.com/resources/domino/8.5.3/doc/designer_up1/en_us/DominoDataService.html#ddapi_ref)中的其他 siebling 。REST-API 服务为希望与 Domino 数据交互的应用程序开发人员开辟了一个全新的世界。

祝你好运！

# java - JMustanGo 设置

> ID：15787037
> 
> 赞同：1
> 
> 时间：2013-04-03T12:12:47.477
> 
> 标签：java, installation, cluster-computing, hp-ux

我们维护了一个工作的 JMustanGo HPUX 实例。但是，我们正在迁移到 HPUX 11i v3 VSE-OE 并且需要重新部署我似乎没有找到有关如何设置 JMustanGo 节点的任何信息。谁能提供一些有用的提示？

# html - POST 与提交输入图像 src 而不是文件类型的输入

> ID：15787038
> 
> 赞同：1
> 
> 时间：2013-04-03T12:12:50.450
> 
> 标签：html, image, http-post, form-submit

我有一个带有提交输入的表单，它发送带有图像和额外描述的 POST 请求。一切正常，但这不是我要寻找的目的。我不希望用户从他的 PC 中选择图像，而是提供已经在我的服务器上的图像。我尝试过隐藏输入，但没有成功。这是我的代码：

```
<img src="final.jpg">
<form enctype="multipart/form-data" action="<php echo $graph_url; ?>" method="POST">
    Please choose a photo: 
    <input name="source" type="file"><br/><br/>
    Say something about this photo: 
    <input name="message" type="text" value=""><br/><br/>
    <input type="submit" value="Upload" /><br/>
</form> 
```

我希望发送 final.jpg 而不是文件输入类型中的文件。我之前提到隐藏类型对我不起作用，或者我没有按应有的方式使用它。希望我说得很清楚。

# c++ - c ++调试流失败（）状态？

> ID：15787039
> 
> 赞同：4
> 
> 时间：2013-04-03T12:12:52.053
> 
> 标签：c++, state, ofstream

我一直在用 ofstreams 写入文件时遇到奇怪的问题，现在有了

```
ofstream.fail() 
```

在我的 ofstream.open() 调用之后立即返回 true。

是否有一些方法可以获得额外的信息，比如关于为什么设置失败状态的更多细节？

编辑，附加信息：is_open() 返回 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-20T15:01:08.653

刚刚发现同样的情况，我解决了一个已经阅读的错字

if (!outfile.is_open());

{

}

没有注意到 if 语句后的分号...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:25:41.510

确保它`ofstream`没有与之关联的文件（已经用该流打开了一个文件）。根据[http://www.cplusplus.com/reference/fstream/ofstream/open/](http://www.cplusplus.com/reference/fstream/ofstream/open/)：

> 如果对象已经有一个关联的文件（打开），则函数失败。失败时，设置失败位标志（可以使用成员失败检查），并且根据设置的值设置异常，可能会引发异常。

如果您打开了文件，请在打开之前将其关闭。

编辑：如上所示，您可以`failbit flag`通过使用检查设置了哪个 '`stream.rdstate()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T07:55:00.717

引用[这个](https://stackoverflow.com/a/1725770/3011380)

```
std::string DescribeIosFailure(const std::ios& stream)
{
  std::string result;

  if (stream.eof()) {
    result = "Unexpected end of file.";
  }

#ifdef WIN32
  // GetLastError() gives more details than errno.
  else if (GetLastError() != 0) {
    result = FormatSystemMessage(GetLastError());
  }
#endif

  else if (errno) {
#if defined(__unix__)
    // We use strerror_r because it's threadsafe.
    // GNU's strerror_r returns a string and may ignore buffer completely.
    char buffer[255];
    result = std::string(strerror_r(errno, buffer, sizeof(buffer)));
#else
    result = std::string(strerror(errno));
#endif
  }

  else {
    result = "Unknown file error.";
  }

  boost::trim_right(result);  // from Boost String Algorithms library
  return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:22:43.550

```
io_state word=ofstream.rdstate();
if(word & ios::failbit){
    cout<<"Failbit flag is set";
}
//etc 
```

# javascript - 我可以在 svg 文件上绘制形状吗

> ID：15787040
> 
> 赞同：0
> 
> 时间：2013-04-03T12:12:53.277
> 
> 标签：javascript, canvas, svg, html5-canvas

我需要在现有的 svg 上动态绘制矩形、圆形等形状。即，当我单击 svg 时，它应该选择并突出显示 svg 中的特定路径。然后我想在突出显示的区域上绘制形状。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:45:08.583

在 SVG 上绘图：

```
var svg_ns = "http://www.w3.org/2000/svg";
var my_svg = document.getElementById('your_svg');

var new_shape = document.createElementNS(svg_ns, 'rect');
new_shape.setAttributeNS(null, 'x', x);
new_shape.setAttributeNS(null, 'y', y);
new_shape.setAttributeNS(null, 'height', '50');
new_shape.setAttributeNS(null, 'width', '50');
new_shape.setAttributeNS(null, 'fill','#00FF00');
my_svg.appendChild(new_shape); 
```

要获得 SVG 路径：

```
var svg_paths = my_svg.getElementsByTagName("path");
/* Then to hightlight a path : svg_paths[i].stroke='#0000FF' */ 
```

您可以在以下位置查看基本形状信息： [http ://www.w3.org/TR/SVG/shapes.html](http://www.w3.org/TR/SVG/shapes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:18:06.750

为了实现这一点，需要许多操作，例如。在 SVG 中绘制矩形相当复杂。让我解释一下：通过单击并在光标下方添加新元素来突出显示（或着色）元素很容易，但“绘图元素”通常需要某种“通过拖动调整大小”并且有点复杂。使用一些库可能会有很大帮助：例如。

*   [http://fabricjs.com/kitchensink/](http://fabricjs.com/kitchensink/)（单击简单绘制矩形等）
*   [http://raphaeljs.com/](http://raphaeljs.com/)如果您想要更“原始”的方法。
*   [http://demos.bonsaijs.org/demos/draggable-shapes/index.html](http://demos.bonsaijs.org/demos/draggable-shapes/index.html)

# java - JDK8批量收集操作库中奇怪的“减少”方法组

> ID：15787042
> 
> 赞同：11
> 
> 时间：2013-04-03T12:12:58.753
> 
> 标签：java, collections, lambda, java-8

为什么新的JDK8[`Stream`](http://lambdadoc.net/api/java/util/stream/Stream.html)类只包含以下`reduce`方法：

```
T reduce(BinaryOperator<T> reducer)
T reduce(T identity, BinaryOperator<T> reducer)
U reduce(U identity, BiFunction<U, ? super T, U> reducer, 
    BinaryOperator<U> combiner) 
```

但不是一个明显的方法，它对应于`reduce`/`fold`其他语言（例如 Haskell `foldl :: (a -> b -> a) -> a -> [b] -> a`）中的函数，可能看起来像这样：

```
U reduce(U identity, BiFunction<U, ? super T, U> reducer) 
```

?

相反，有一个类似的方法，它有一个额外的`combiner`参数。我什至不知道如何使用它，因为我上面链接的 API 文档在示例中没有使用这个参数，它只提到了它所需的属性。

为什么 JDK8 方法是这样的，我如何`fold`用它们模拟标准行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T12:16:37.360

类似`reduce`数据并行操作用作对数据集（例如元素数组）的一般值聚合操作。例如，您可以使用它们来实现求和。

未指定数据集的值组合在一起（例如求和）的顺序，因此它们不对应于`foldl`在 Haskell 中找到或`reduceLeft`/`foldLeft`在 Scala 中找到。

`combiner`当聚合的结果类型与元素的类型不同时，使用第三行中的额外参数。在这些情况下，您必须指定如何将两个结果组合在一起。假设您想使用第三个 reduce 来实现字符串中元音的计数。数据元素是字符，`reducer`指定字符和当前计数的组合方式：

```
(Integer count, Character c) -> if (isVowel(c)) count + 1 else count 
```

组合器将只是一个总和：

```
(Integer count1, Integer count2) -> count1 + count2 
```

例如，[Scala Parallel Collections已经有](http://docs.scala-lang.org/overviews/parallel-collections/overview.html)[一段时间了](http://www.scala-lang.org/api/current/index.html#scala.collection.Seq)（搜索`aggregate`）。

# c# - 需要 C# 命名建议

> ID：15787048
> 
> 赞同：0
> 
> 时间：2013-04-03T12:13:13.217
> 
> 标签：c#, naming-conventions

```
 public class SomeClass
 {
    private readonly AuthenticationService _authenticationService = null;
    private readonly ProfileService _profileService = null;

    public SomeClass(IAuthenticationService authenticationService, ProfileService profileService)
    {
        _authenticationService = authenticationService;
        _bgMeterProfileService = bgMeterProfileService;
    }
   ... 
```

我正在使用 _varName 作为私有变量

这是为了区分私有变量和构造函数参数。

想把这段代码公开的扔出去看看有没有更好的方法区分私有变量和方法参数

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T12:14:13.587

怎么样`this.variable = variable;`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T12:17:32.337

有不同的可能性。

你可以使用：

```
this.variable = variable;
this._variable = variable;
this.m_variable = variable; 
```

我个人会使用第一个版本，并且`this.`在针对当前实例成员时始终使用“”。

最重要的是在代码中**始终使用相同的约定**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:19:48.817

过去几年我一直在使用`_varName = varName;`-convention 并将继续在接下来的几个中使用它，因为在大多数可发现性（智能感知）、调试/可读性（以避免与本地变量的歧义）方面最方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:18:48.650

区分私人物品和公共物品是很重要的。

有些人使用前导下划线，有些人使用匈牙利符号，例如 m_intMyIntVar 或 m_strMyStringVar

其中 m_ 表示成员，下一位是类型缩写，然后是名称。

大多数情况下，这取决于个人喜好。

# java - 如何将动态创建的 HtmlInputText 组件的值绑定到 bean 属性？

> ID：15787053
> 
> 赞同：3
> 
> 时间：2013-04-03T12:13:24.457
> 
> 标签：java, jsf, jsf-2

如何动态设置带有一些组件（例如一些输入文本）的 JSF dynamicPanelGrid，然后获取它们的值并将它们存储到对象和数据库中？我创建了一个示例对象模型、一个带有用于动态生成的“占位符”的 Facelets 视图以及一个用于创建实例及其组件`HtmlPanelGrid`的支持 bean 。`HtmlPanelGrid`这是每个的代码：

该模型：

```
@Entity
@Table(name = "imageviewer_crreviewerformdata")
public class CRReviewerFormData implements Serializable {

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue
@Column(name = "FdId")
private Long fdId;

@Column(name = "Input1")
private String input1;

@Column(name = "Input2")
private String input2;

@Column(name = "Input3")
private String input3;

/* getters & setters*/
// ... 
```

风景：

```
<p:commandButton value="View" action="#{reviewReportBean.updateDynamicPanelGrid()}"
                   oncomplete="dlg.show()" icon="ui-icon-image" >
    <f:param name="selectedImage" value="#{cRImageData.imName}" />
</p:commandButton>
...
<p:outputPanel id="outerContainerDynamicPanelGrid" autoUpdate="true">
    <h:panelGrid id="innerContainerDynamicPanelGrid"
                    binding="#{reviewReportBean.dynamicPanelGrid}">
    </h:panelGrid>
</p:outputPanel>
<p:commandButton id="viewSaveForm" value="Save" 
                    action='#{reviewReportBean.saveReport()}'>
</p:commandButton>
<p:commandButton id="viewEditForm" value="Edit" 
                    action='#{reviewReportBean.editReport()}'>
</p:commandButton>
... 
```

控制器：

```
@ManagedBean(name = "reviewReportBean")
@ViewScoped
public class ReviewReportBean implements Serializable { 
    private static final long serialVersionUID = 1L;
    private String imageOfInterest;
    private HtmlPanelGrid dynamicPanelGrid;
    private CRReviewerFormData cRReviewerFromData;
    // ...
    @PostConstruct
    public void init(){     
        dynamicPanelGrid = new HtmlPanelGrid();
        FacesContext facesContext = FacesContext.getCurrentInstance();
        ConfigOptionsBean configOptionsBean = (ConfigOptionsBean) facesContext.getApplication().getVariableResolver().resolveVariable(facesContext, "configOptionsBean");

        cRReviewerFromData = new CRReviewerFormData();
    }

    @SuppressWarnings("unused")
    public void updateDynamicPanelGrid() {

        RequestContext requestContext = RequestContext.getCurrentInstance();
        Application application = FacesContext.getCurrentInstance().getApplication();
        dynamicPanelGrid.getChildren().clear();

        Row row1 = (Row) application.createComponent(Row.COMPONENT_TYPE);
        row1.setRendered(true);
        Row row2 = (Row) application.createComponent(Row.COMPONENT_TYPE);
        row2.setRendered(true);     
        Row row3 = (Row) application.createComponent(Row.COMPONENT_TYPE);
        row3.setRendered(true);

        HtmlOutputLabel label1 = (HtmlOutputLabel)application.createComponent(HtmlOutputLabel.COMPONENT_TYPE);      
        label1.setValue("I am the first label");
        label1.setStyle("font-weight:bold;color:black");
        label1.setId("label1");     
        HtmlOutputLabel label2 = (HtmlOutputLabel)application.createComponent(HtmlOutputLabel.COMPONENT_TYPE);      
        label2.setValue("I am the second label");
        label2.setStyle("font-weight:bold;color:red");
        label2.setId("label2");     
        HtmlOutputLabel label3 = (HtmlOutputLabel)application.createComponent(HtmlOutputLabel.COMPONENT_TYPE);      
        label3.setValue("I am the third label");
        label3.setStyle("font-weight:bold;color:red");
        label3.setId("label3");

        HtmlInputText input1 = (HtmlInputText)application.createComponent(HtmlInputText.COMPONENT_TYPE);
        input1.setId("input1"); 
        //How can i set inputtext value to something 
        //like: #{cRReviewReportBean.input1} in order to store 
        //form data (cRReviewerFromData)?

        HtmlInputText input2 = (HtmlInputText)application.createComponent(HtmlInputText.COMPONENT_TYPE);        
        input2.setId("input2");
        //How can i set inputtext value to something
        // like: #{cRReviewReportBean.input2} in order to store 
        //form data (cRReviewerFromData)?

        HtmlInputText input3 = (HtmlInputText)application.createComponent(HtmlInputText.COMPONENT_TYPE);
        input3.setId("input3");
        input3.setValueBinding(arg0, arg1);
        //How can i set inputtext value to something 
        //like: #{cRReviewReportBean.input3} in order to store
        // form data (cRReviewerFromData)?

        dynamicPanelGrid.setColumns(2);

        dynamicPanelGrid.getChildren().add(label1);
        dynamicPanelGrid.getChildren().add(input1);     
        dynamicPanelGrid.getChildren().add(label2);
        dynamicPanelGrid.getChildren().add(input2);     
        dynamicPanelGrid.getChildren().add(label3);
        dynamicPanelGrid.getChildren().add(input3);
        requestContext.update(":viewDatagridForm:innerContainerDynamicPanelGrid");
    }
    // ...
} 
```

如何将动态创建的`HtmlInputText`组件的值绑定到 bean 属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:20:49.227

```
HtmlInputText input1 = (HtmlInputText)application.createComponent(HtmlInputText.COMPONENT_TYPE);
input1.setId("input1"); 
//How can i set inputtext value to something 
//like: #{cRReviewReportBean.input1} in order to store 
//form data (cRReviewerFromData)? 
```

[`UIComponent#setValueExpression()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#setValueExpression%28java.lang.String,%20javax.el.ValueExpression%29)在组件的`value`属性上使用。

因此，鉴于此属性是`String`

```
private String input1; 
```

并拥有这个辅助方法

```
public static ValueExpression createValueExpression(String valueExpression, Class<?> valueType) {
    FacesContext context = FacesContext.getCurrentInstance();
    return context.getApplication().getExpressionFactory()
        .createValueExpression(context.getELContext(), valueExpression, valueType);
} 
```

这应该这样做：

```
HtmlInputText input1 = (HtmlInputText)application.createComponent(HtmlInputText.COMPONENT_TYPE);
input1.setId("input1"); 
input1.setValueExpression(createValueExpression("#{cRReviewReportBean.input1}", String.class)); 
```

# ios - 如何增加 UITextView 中的行间距

> ID：15787057
> 
> 赞同：5
> 
> 时间：2013-04-03T12:13:26.490
> 
> 标签：ios, xcode, ios6, xcode4, uitextview

如何增加 UITextView 中的行间距？

我希望使用默认系统字体，即尺寸为 15 的 Helvetica。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-01T19:23:26.203

声明你通过添加实现协议

`<NSLayoutManagerDelegate>`

到你的界面。然后，设置：

`yourTextView.layoutManager.delegate = self;`

然后重写这个委托方法：

```
- (CGFloat)layoutManager:(NSLayoutManager *)layoutManager lineSpacingAfterGlyphAtIndex:(NSUInteger)glyphIndex withProposedLineFragmentRect:(CGRect)rect
{
    return 5; // Line spacing of 19 is roughly equivalent to 5 here.
} 
```

更新：我最近发现这也可以使用`NSMutableParagraphStyle setLineSpacing:`API 来完成。

为了始终提供有用的复制粘贴代码片段令人敬畏，给你！

```
NSMutableParagraphStyle *myStyle = [[NSMutableParagraphStyle alloc] init];
[myStyle setLineSpacing:myLineSpacingInt];
[myString addAttribute:myDesiredAttribute value:myStyle range:myDesiredRange];
[myViewElement setAttributedText:myString]; 
```

^`myViewElement`可以是`UITextField`,`UILabel`或`UITextView`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-25T11:17:24.427

在 IOS6+ 中，您可以设置 UITextView 的类型属性

```
NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
[paragraphStyle setLineSpacing:lineSpacing];

NSDictionary *attrsDictionary = [NSDictionary dictionaryWithObject:paragraphStyle forKey:NSParagraphStyleAttributeName];

[textView setTypingAttributes:attrsDictionary]; 
```

# php - 将mysql列存储到数组PHP

> ID：15787059
> 
> 赞同：1
> 
> 时间：2013-04-03T12:13:27.530
> 
> 标签：php

我使用它来获取名为“device_token”的列并将值保存到数组中：

```
mysql_connect("localhost", "xxxx", "xxxx") or die ("Not connected");
mysql_select_db("xxxxx") or die ("no database");
$query = "SELECT xxxx_device_token FROM device_tokens";

$result_array = array();
while($row = mysql_fetch_assoc($result))
{
    $result_array[] = $row['xxxx_device_token'];
}
print_r($result_array); 
```

但我得到的只是一个空数组，有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:20:27.817

你的代码不正确，试试这样

```
mysql_connect("localhost", "xxxx", "xxxx") or die ("Not connected");
mysql_select_db("xxxxx") or die ("no database");
$query = "SELECT xxxx_device_token FROM device_tokens";
$result = mysql_query($query);

$result_array = array();
while($row = mysql_fetch_assoc($result))
{
    $result_array[] = $row['xxxx_device_token'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:16:09.473

$result 为空且 $query 不在任何地方使用。

你需要这样的东西：

```
$result = mysql_query($query); 
```

[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:16:22.670

您的代码不正确。您没有执行查询。你需要这样做：

```
mysql_connect("localhost", "xxxx", "xxxx") or die ("Not connected");
mysql_select_db("xxxxx") or die ("no database");

$result_array = array();
$query = mysql_query("SELECT xxxx_device_token FROM device_tokens");

while($row = mysql_fetch_assoc($query))
{
    $result_array[] = $row['xxxx_device_token'];
}
print_r($result_array); 
```

但`mysql_query`在新版本的 PHP 中已弃用，因此您需要使用`mysqli_query`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:16:38.037

试试这个，

```
$query = "SELECT xxxx_device_token FROM device_tokens";
$result = mysql_query($query);

$result_array = array();
while($row = mysql_fetch_assoc($result))
{
    $result_array[] = $row['xxxx_device_token'];
} 
```

不要使用 Mysql 函数。它已被弃用。请移至 Mysqli（或）PDO

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T12:16:58.073

您`mysql_fetch_assoc($result)`在 while 语句中有，但没有`$result`.

您必须执行查询：

```
$result = mysql_query($query); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T12:17:07.503

假设这不是复制和粘贴错误，您可能缺少这一行：

```
$result = mysql_query($query); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T12:18:27.497

尽量不要使用`mysql_*`，不推荐，使用`mysqli_*`，理想情况下你应该使用[PDO](http://php.net/manual/en/book.pdo.php)进行数据库连接。

那就是说你错过了这个， `$result = mysql_query($query);`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-03T12:19:56.660

你忘了执行你的mysql查询，像这样

`$result = mysql_query($con,"SELECT * FROM Persons");`

# directshow - KsProperty() 在设置相机缩放值时返回“传递给系统调用的数据区域太小” ERROR_INSUFFICIENT_BUFFER

> ID：15787063
> 
> 赞同：0
> 
> 时间：2013-04-03T12:13:34.143
> 
> 标签：directshow

```
HRESULT hr = S_OK;
KSPROPERTY ksprop;    
ZeroMemory(&ksprop, sizeof(ksprop));
PVOID pData = NULL;
ULONG valueSize = 0;
ULONG dataLength = 0;
KSPROPERTY_CAMERACONTROL_S cameraControl;
ZeroMemory(&cameraControl, sizeof(cameraControl));
ksprop.Set = PROPSETID_VIDCAP_CAMERACONTROL;
ksprop.Id = KSPROPERTY_CAMERACONTROL_ZOOM;
ksprop.Flags = KSPROPERTY_TYPE_SET;
cameraControl.Property = ksprop;
cameraControl.Flags = KSPROPERTY_CAMERACONTROL_FLAGS_MANUAL;
cameraControl.Capabilities = KSPROPERTY_CAMERACONTROL_FLAGS_MANUAL;
cameraControl.Value = 50;

pData = &cameraControl;
dataLength = sizeof(cameraControl);
hr = m_pKsControl->KsProperty(
            &ksprop, sizeof(ksprop),
            pData, dataLength, &valueSize); 
```

这里 hr “传递给系统调用的数据区太小了。”
我在 windows 7 机器上编译 vs 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:41:29.780

您可能在第四个参数中提供了一个太小的缓冲区。

很容易检查出来，请参阅[`IKsControl::KsProperty`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff559792%28v=vs.85%29.aspx)文档：

> 要确定特定属性请求所需的缓冲区大小，您可以调用此方法并将 PropertyData 设置为 NULL 并且 DataLength 等于零。该方法返回 HRESULT_FROM_WIN32(ERROR_MORE_DATA)，BytesReturned 包含所需缓冲区的大小。

# android - android 4.2.2 键盘改变水平滚动

> ID：15787070
> 
> 赞同：2
> 
> 时间：2013-04-03T12:13:44.627
> 
> 标签：android, horizontalscrollview, android-4.2-jelly-bean

我的问题是（经过大量搜索和多次测试）我的应用程序在 android 4.0 和 4.1 的设备上运行良好，.

但是对于 Android 4.2.2 的模拟器，每次我使用键盘（出现、消失、触摸一个键）时，我的 Horizo​​ntalScrollView 都会滚动到视图的右端。

有人知道问题并有解决方案吗？

# android - 使用单选按钮在 Android 中切换 XML 布局

> ID：15787072
> 
> 赞同：0
> 
> 时间：2013-04-03T12:13:47.743
> 
> 标签：android, xml, layout, radio-button

我有 apk，在开始时我显示一个布局，顶部是单选按钮，它应该检查更改布局，它类似于在开始时显示布局 PC，点击它应该更改为 Playstation 或 Xbox

晚上我会发布源代码，但现在如何让它工作？我找到了一些解决方案，但没有任何效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:16:49.680

为什么不为不同的布局文件创建新的活动？但是试试这个也许它会帮助你。

CB_Event.setOnCheckedChangeListener(new OnCheckedChangeListener() {

```
 @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {

            if (isChecked) {

                setContentView(R.layout.YOURfirstLayout);

            } else {

                setContentView(R.layout.YOURSecondLayout);
            }

        }
    }); 
```

在这个例子中，我使用了 CheckBox，你也可以使用 RadioButton。

# c - 提高机器精度是否会自动提高系列扩展项？

> ID：15787075
> 
> 赞同：1
> 
> 时间：2013-04-03T12:13:57.010
> 
> 标签：c, floating-point, precision, series, expansion

**我想知道是否将C**中的机器精度从**浮点数**增加到**双**精度数是否会自动提高级数展开中的项，例如三角函数？

 **这个和我关于堆栈溢出的其他问题与调查各向异性介质中波动方程发生的数值不稳定性有关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:59:29.850

通常，影响例程执行正弦、对数等的准确性的因素是您调用的例程版本。一个好的数学库对于单精度正弦（C's`sinf`函数）、双精度正弦（C's `sin`）和长双精度正弦（C's）有单独的例程`sinl`。`sinf`在 C 中，您通常通过编写对、`sin`或的调用来显式调用这些版本`sinl`。C 还提供`<tgmath.h>`，这会导致源代码`sin(x)`根据`x`. 在 C++ 中，函数调用也将根据变量的类型进行解析。

在一个好的数学库中，`sinf`例程将使用更快的算法，其精度适合 的精度`float`，而`sin`将使用适合精度的较慢算法`double`。数学库的质量各不相同，因为编写这些例程是一项复杂的任务。

不使用系列扩展。（特别是，泰勒级数没有被使用，因为误差分布很差并且需要太多的项才能收敛。）相反，使用了精心准备的近似多项式。经常使用某种形式的极小极大多项式。更精确类型的例程可能使用具有更多项的多项式，但它也可能以其他方式发生变化，例如将域划分为更多间隔或使用某种形式的扩展精度。这些都不是自动的；程序由软件工程师手动准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:08:30.400

根据[this reference](http://www.cplusplus.com/reference/cmath/sin/)，虽然C++有不同版本的`sin(x)`函数，

> 在 C 中，只有这个函数的双重版本存在这个名字

为了确认这一点，我编写了以下代码行：

```
#include <stdio.h>
#include <math.h>

int main(void){

    double d = 0.12345e16;
    float f;
    f = d;

    printf("the difference is %f\n", sin(d) - sin(f));

    f = 0.12345e16;
    d = f;
    printf("the difference is now %f\n", sin(d) - sin(f));

} 
```

这会产生以下输出（使用 C 编译器编译时）：

```
the difference is 1.947785
the difference is now 0.000000 
```

编辑 - 我的原始代码中有错字。现在更新了，并给出了预期的结果。

上面显示了两个参数的评估方式相同，确认使用了相同的算法。

这是在 Linux 上使用 gcc 编译器，带有`-lm`选项和调用的文件`fltchk.c`（我认为这应该导致 gcc 使用 C 编译器）。**

# c++ - winapi listview 检查项 c++

> ID：15787078
> 
> 赞同：4
> 
> 时间：2013-04-03T12:14:02.880
> 
> 标签：c++, winapi, listview

我使用 minGW32 编译器。我创建了一个带有复选框的 ListView，如下所示：

```
HWND hListView = CreateWindowExW(0, WC_LISTVIEWW, L"",
    WS_VISIBLE | WS_CHILD | WS_TABSTOP | LVS_REPORT | LVS_EDITLABELS,
    10,10,500,500, hwnd, (HMENU)ID_LISTVIEW, GetModuleHandle(NULL), NULL);
    SendMessage(hListView, WM_SETFONT, (WPARAM) font, TRUE);

ListView_SetExtendedListViewStyle(hListView, LVS_EX_CHECKBOXES |  LVS_EX_FULLROWSELECT | LVS_EX_HEADERDRAGDROP | LVS_EX_GRIDLINES/*LVSCW_AUTOSIZE_USEHEADER*/);

lvc.mask = LVCF_TEXT | LVCF_SUBITEM | LVCF_WIDTH  | LVCF_FMT;
lvc.fmt  = LVCFMT_LEFT; 
```

我想检查何时选中任何复选框。例如。如果我选中任何复选框，则显示一个消息框：

```
I use this WM_NOTIFY:
case WM_NOTIFY:
 {
  switch (LOWORD(wParam))
  {
   case ID_LISTVIEW:
   {
   switch (((LPNMHDR) lParam)->code)
   {
    case LVN_ITEMCHANGED :
    MessageBoxW( NULL, (LPCWSTR)lpMsgBuf, L"Error", MB_OK | MB_ICONERROR ); 
    }
    break; 
   }
  break;
  }
  break;
 }
 break; 
```

但这总是发生。当我单击 ListView 的空白区域或单击任何项​​目时。但我只想在复选框更改时运行消息框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:24:50.260

```
LPNMLISTVIEW pnmv = (LPNMLISTVIEW) lParam; 

if(pnmv->uChanged & LVIF_STATE) // item state has been changed
{
   switch(pnmv->uNewState & LVIS_STATEIMAGEMASK)
   {
   case INDEXTOSTATEIMAGEMASK(2):
      // pnmv->iItem was checked
      break;
   case INDEXTOSTATEIMAGEMASK(1):
      //pnmv->iItem was unchecked
      break;
   }
} 
```

# java - 如何将数据从一个 webApplication 发送到另一个

> ID：15787085
> 
> 赞同：3
> 
> 时间：2013-04-03T12:14:10.033
> 
> 标签：java, web-applications, servlets, httprequest

我在两个不同的服务器上有两个 Web 应用程序。我想在标头中发送一些数据或请求其他 Web 应用程序。我该怎么做，请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:18:38.913

您可以通过多种方式传递数据：

1.  通过从您的应用发出 http 请求：

    ```
    URLConnection conn = new URL("your other web app servlet url").openConnection();
    // pass data using conn. Then on other side you can have a servlet that will receive these calls. 
    ```

2.  通过使用 JMS 进行异步通信。

3.  通过使用 Web 服务（SOAP 或 REST）

4.  通过使用 RMI

5.  通过在应用程序之间共享数据库。因此，一个写入表，另一个从该表读取

6.  通过共享文件系统文件......一个人写入文件，另一个人从文件中读取。

7.  您可以使用套接字连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:45:20.903

一个 Web 应用程序充当另一个 Web 应用程序的客户端。您可以使用该`org.apache.http`库在 Java 中创建您的 HTTP 客户端代码。你将如何做到这一点取决于几件事：

1.  你用的是http还是https？
2.  您发送数据的应用程序是否具有 REST API？
3.  您有基于 SOAP 的 Web 服务吗？

如果您有一个基于 SOAP 的 Web 服务，那么为它创建一个 Java 客户端非常容易。如果没有，您可以执行类似的操作并在常规 Java 客户端中测试代码，然后再尝试在 Web 应用程序中运行它。

```
 import org.apache.http.client.utils.*;
 import org.apache.http.*; 
 import org.apache.http.impl.client.*;

  HttpClient httpclient = new DefaultHttpClient();
  try {
     URIBuilder builder = new URIBuilder();
     builder.setHost("yoursite.com").setPath(/appath/rsc/);
     builder.addParameter("user", username);
     builder.addParameter("param1", "SomeData-sentAsParameter");
     URI uri = builder.build();
     HttpGet httpget = new HttpGet(uri);
     HttpResponse response = httpclient.execute(httpget);
     System.out.println(response.getStatusLine().toString());
     if (response.getStatusLine().getStatusCode() == 200) {
        String responseText = EntityUtils.toString(response.getEntity());
        httpclient.getConnectionManager().shutdown();
     } else {
        log(Level.SEVERE, "Server returned HTTP code "
                + response.getStatusLine().getStatusCode());
     }
  } catch (java.net.URISyntaxException bad) {
     System.out.println("URI construction error: " + bad.toString());
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:21:14.167

HttpClient 可以提供帮助

[http://hc.apache.org/index.html](http://hc.apache.org/index.html)

> Apache HttpComponents
> 
> Apache HttpComponents™ 项目负责创建和维护一个专注于 HTTP 和相关协议的低级 Java 组件工具集。

# java - java.lang.StackOverflowError

> ID：15787086
> 
> 赞同：6
> 
> 时间：2013-04-03T12:14:10.333
> 
> 标签：java, android, sqlite, stack-overflow

我从我的 sqlite 数据库中获取一些文本并将其放在一个变量中：

```
opis = c.getString(11); 
```

光标在我的应用程序的其余部分工作正常。现在我调用另一个有意图的活动并将字符串发送给它：

```
Intent opis = new Intent(getApplicationContext(), Popup_opis.class);
opis.putExtra("poslatOpis", opis);
startActivity(opis); 
```

在那个类中，我将该字符串放入另一个字符串中，然后将该文本设置为 TextView。当我在该 TextView 中仅使用单词“text”调用它时，该弹出活动工作正常。现在，这是该活动：

```
public class Popup_opis extends Activity{

    TextView opis;
    String poslatOpis, primljenOpis;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.popup_opis);

        Bundle extras = getIntent().getExtras(); 
        if(extras !=null) {
           primljenOpis = extras.getString("poslatOpis");
        }

        initVariables();

    }

    private void initVariables() {
        Typeface tv = Typeface.createFromAsset(getAssets(), "ARIALN.TTF");
        opis = (TextView) findViewById(R.id.tvOpis);
        opis.setTypeface(tv);
        opis.setText(primljenOpis);

    }

} 
```

这是 LogCat：

```
04-03 13:59:54.424: E/AndroidRuntime(28413): FATAL EXCEPTION: main
04-03 13:59:54.424: E/AndroidRuntime(28413): java.lang.StackOverflowError
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeMapInternal(Parcel.java:484)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Bundle.writeToParcel(Bundle.java:1552)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeBundle(Parcel.java:502)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.content.Intent.writeToParcel(Intent.java:5503)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeParcelable(Parcel.java:1151)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeValue(Parcel.java:1070)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeMapInternal(Parcel.java:488)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Bundle.writeToParcel(Bundle.java:1552)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeBundle(Parcel.java:502)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.content.Intent.writeToParcel(Intent.java:5503)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeParcelable(Parcel.java:1151)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeValue(Parcel.java:1070)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeMapInternal(Parcel.java:488)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Bundle.writeToParcel(Bundle.java:1552)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeBundle(Parcel.java:502)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.content.Intent.writeToParcel(Intent.java:5503)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeParcelable(Parcel.java:1151)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeValue(Parcel.java:1070)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeMapInternal(Parcel.java:488)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Bundle.writeToParcel(Bundle.java:1552)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeBundle(Parcel.java:502)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.content.Intent.writeToParcel(Intent.java:5503)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeParcelable(Parcel.java:1151)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeValue(Parcel.java:1070)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeMapInternal(Parcel.java:488)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Bundle.writeToParcel(Bundle.java:1552)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeBundle(Parcel.java:502)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.content.Intent.writeToParcel(Intent.java:5503)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeParcelable(Parcel.java:1151)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeValue(Parcel.java:1070)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeMapInternal(Parcel.java:488)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Bundle.writeToParcel(Bundle.java:1552)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeBundle(Parcel.java:502)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.content.Intent.writeToParcel(Intent.java:5503)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeParcelable(Parcel.java:1151)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeValue(Parcel.java:1070)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeMapInternal(Parcel.java:488)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Bundle.writeToParcel(Bundle.java:1552)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeBundle(Parcel.java:502)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.content.Intent.writeToParcel(Intent.java:5503)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeParcelable(Parcel.java:1151)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeValue(Parcel.java:1070)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeMapInternal(Parcel.java:488)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Bundle.writeToParcel(Bundle.java:1552)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeBundle(Parcel.java:502)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.content.Intent.writeToParcel(Intent.java:5503)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeParcelable(Parcel.java:1151)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeValue(Parcel.java:1070)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeMapInternal(Parcel.java:488)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Bundle.writeToParcel(Bundle.java:1552)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeBundle(Parcel.java:502)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.content.Intent.writeToParcel(Intent.java:5503)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeParcelable(Parcel.java:1151)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeValue(Parcel.java:1070)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeMapInternal(Parcel.java:488)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Bundle.writeToParcel(Bundle.java:1552)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeBundle(Parcel.java:502)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.content.Intent.writeToParcel(Intent.java:5503)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeParcelable(Parcel.java:1151)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeValue(Parcel.java:1070)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeMapInternal(Parcel.java:488)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Bundle.writeToParcel(Bundle.java:1552)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeBundle(Parcel.java:502)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.content.Intent.writeToParcel(Intent.java:5503)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeParcelable(Parcel.java:1151)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeValue(Parcel.java:1070)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeMapInternal(Parcel.java:488)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Bundle.writeToParcel(Bundle.java:1552)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeBundle(Parcel.java:502)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.content.Intent.writeToParcel(Intent.java:5503)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeParcelable(Parcel.java:1151)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeValue(Parcel.java:1070)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Parcel.writeMapInternal(Parcel.java:488)
04-03 13:59:54.424: E/AndroidRuntime(28413):    at android.os.Bundle.writeT 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T12:20:04.130

```
Intent opis = new Intent(getApplicationContext(), Popup_opis.class);
opis.putExtra("poslatOpis", opis); 
```

您将您的`opis`意图放入您的意图附加内容中，在打包时创建无限递归。为意图和`poslatOpis`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:22:25.883

the`Intent`和 the`String`都被命名为 opis。您可能正在打包意图。而是将字符串打包为额外的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:25:51.207

```
// Change
opis = c.getString(11);
// to
opisString = c.getString(11);

// and change
opis.putExtra("poslatOpis", opis);
// to
opis.putExtra("poslatOpis", opisString); 
```

# c# - 电子邮件地址验证 C#

> ID：15787088
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:14:19.287
> 
> 标签：c#, email

C# 的新手，似乎有问题。我正在修改具有以下代码验证电子邮件地址的程序：

```
public static bool IsValidEmail(string sEmail)
    {
        sEmail = sEmail.Trim();
        if (sEmail == string.Empty)
        {
            return false;
        }
return (Regex.IsMatch(sEmail, @"^(([\w-]+\.)+[\w-]+|([a-zA-Z]{1}|[\w-]{2,}))@"
                       + @"((([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\."
                       + @"([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])){1}|"
                       + @"([a-zA-Z]+[\w-]*\.)+[a-zA-Z]{1,4})$")); 
```

现在，自从实施了电子邮件验证后，电子邮件验证发生了变化，现在我只想验证是否存在 @ 和 . 地址中。

我试过了：

```
 public static bool IsValidEmail(string sEmail)
     if ((sEmail.IndexOf("@") != -1) & (sEmail.IndexOf(".") != -1))
        {
            return true;
        }
        else
        {
            return false;
        } 
```

但是现在应该是有效的地址，即 name+@domain.com 仍然被认为是错误的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:31:07.257

我不确定问题出在哪里（我认为这不是明显的语法错误）您提供的代码确实按照您描述的方式工作。

我重写了一点，以便编译和工作：

```
public static bool IsValidEmail(string sEmail)
{
    return sEmail.IndexOf("@") != -1 && sEmail.IndexOf(".") != -1;
} 
```

使用此 nunit 测试验证：

```
[Test]
public void IsValidEmailTest()
{
    Assert.IsTrue( IsValidEmail( "name+@domain.com" ) );
    Assert.IsTrue( IsValidEmail( "name@domain.com" ) );
    Assert.IsFalse( IsValidEmail( "namedomain.com" ) );
    Assert.IsFalse( IsValidEmail( "namedomaincom" ) );
    Assert.IsFalse( IsValidEmail( "named@omaincom" ) );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:16:39.647

试试这个解决方案：

```
 protected override bool EvaluateIsValid()
    {
        string val = this.GetControlValidationValue(this.ControlToValidate);
        string pattern = @"^[a-z][a-z|0-9|]*([_][a-z|0-9]+)*([.][a-z|0-9]+([_][a-z|0-9]+)*)?@[a-z][a-z|0-9|]*\.([a-z][a-z|0-9]*(\.[a-z][a-z|0-9]*)?)$";
        Match match = Regex.Match(val.Trim(), pattern, RegexOptions.IgnoreCase);

        if (match.Success)
            return true;
        else
            return false;
    } 
```

# ssh - 当密钥对无效时，如何强制 SSH 失败而不是密码输入会话？

> ID：15787091
> 
> 赞同：1
> 
> 时间：2013-04-03T12:14:30.340
> 
> 标签：ssh, automation, certificate

当我使用 SSH 连接到远程机器时，如果密钥对无效，它会要求我输入密码。

```
ssh -i keyfile root@server.com
root@server.com's password: 
```

如何强制 SSH 失败而不是询问密钥对文件何时无效？这是为了 bash 脚本自动化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:39:44.747

禁用标准输入`ssh -n`

# c# - 如何更改 MVC4 网站的 url？

> ID：15787095
> 
> 赞同：3
> 
> 时间：2013-04-03T12:14:51.073
> 
> 标签：c#, asp.net-mvc-4, url-rewriting

我需要更改`URL`地址栏上的。

我寻找，`URL Rewrite`但据我所知，它适用于这样的请求：

```
url.com/mypage.aspx?xp=asd&yp=okasd 
```

并将其转换为：

```
url.com/mypage/asd/okasd 
```

[http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

那不是我的范围。我已经`MVC Routes`和`url.com/mypage`. 问题是，当我键入时，`URL`我被重定向（这是我想要的行为）到`url.com/otherpage/actionX?param=value`. 问题是我仍然希望地址栏显示`url.com/mypage`。会`URL Rewrite`为此工作吗？我问是因为我不知道它是否会起作用，因为它是内部重定向（RedirectToAction）而不是“常规”访问。如果有人想知道为什么我不能为此制定路线，正如我的问题中所解释的那样，我已经有一条规则可以`url.com/mypage`重定向到决定调用什么操作的“路由器”。

我看到了一些问题，但我认为它们没有涵盖我的具体问题：

[MVC3 更改网址](https://stackoverflow.com/questions/15183670/mvc3-change-the-url)

[C# - 如何在 MVC3 中重写 URL](https://stackoverflow.com/questions/7602572/c-sharp-how-to-rewrite-a-url-in-mvc3)

**更新**

这是我的路线：

```
routes.MapRoute(
    "Profile", // Route name
    "{urlParam}", // URL with parameters
    new { controller = "Profile", action = "Router" } // Parameter defaults
); 
```

在内部`Router`操作中，我根据对`urlParam`. 我需要这种行为，因为每个动作都返回不同的`View`.

*更新了我的标签，因为我现在使用的是 MVC4*

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T07:09:00.947

在我看来，您可以尝试以下操作：

1.  从您的 Action 方法返回 EmptyResult 或 RedirectResult。
2.  此外，您需要为所需的 URL 设置和构建出站路由。

其次，如果这些都不起作用，处理这种情况的粗略方法是使用 Div 标签并将 Div 的内容替换为 Action 方法发出的任何 HTML。我在这里假设在您的问题上下文中，您可以调用 jquery ajax 调用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T12:07:16.833

我曾经不得不在 Windows 盒子上运行一个 php 站点。在它最初运行的 linux 机器上，它定义了一个重写，以使站点仅在一个 php 文件 (index.php) 中处理所有请求。

我已经使用以下参数安装并配置了 URL Rewrite

```
Name              : all to index.php
Match URL ------------------------------
 Requested URL    : Matches the Pattern
 Using            : Regular Expressions
 Pattern          : (.*)
 Ignore Case      : Checked
Conditions -----------------------------
 Logical Grouping : Match All
    Input         : {REQUEST_FILENAME}
    Type          : Is Not a File
Action ---------------------------------
 Action Type      : Rewrite
 Action Properties:
   Rewrite Url         : /index.php?$1
   Append Query String : Checked
   Log Rewritten URL   : Checked 
```

这使得对站点的所有请求（除了像 css 和 js 文件这样的文件）都由 index.php 处理

所以`url.com/user/1`在服务器端处理，`url.com/index.php?/user/1` 因为它在服务器端客户端url保持不变。

以此为基础，您可以构建重写（而不是重定向）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T17:33:54.510

[Server.Transfer](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.transfer.aspx)正是您所需要的，但这在 MVC 上不可用。

在 MVC 世界中，您可以使用[此线程中定义](https://stackoverflow.com/questions/799511/how-to-simulate-server-transfer-in-asp-net-mvc/892545#1180744)的 TransferResult 类。

有了这个......您将代码添加到您的 ROUTE 操作中，该操作一如既往地处理 urlParam，而不是将用户“重定向”（RedirectToAction）到新的 URL，您只需将他/她“转移”到新的操作方法而不更改网址。

但是有一个问题（我想，我还没有测试过）......如果那个新页面回发了一些东西......它不会使用你的路由器的操作 URL（url.com/mypage），而是真正的 ACTION（url. com/其他页面）

希望能帮助到你。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T12:32:12.150

您遇到的问题是您将用户（使用 302 http 代码）重定向到新位置，因此浏览器会重新加载页面。您需要修改路由以直接指向您的控制器。路由注册应该是 routes.MapRoute("specific", "my page", new { controller = "otherpage", action="actions", param="value"})。这条路线应该先注册

# jquery - JSON 仅在 IE7 和 8 中加载一次

> ID：15787097
> 
> 赞同：0
> 
> 时间：2013-04-03T12:14:52.043
> 
> 标签：jquery, ajax, json, internet-explorer-8, internet-explorer-7

当用户单击一个按钮时，我正在调用一个 JSON 文件，它是第一次加载，但是当您刷新页面时它失败了，可能是什么问题？这个问题发生在IE7和IE8中，在其他浏览器中很好。

```
$(document).on('click', '.game-reg-button', function(e){
    e.preventDefault();
           loadContent(); 
       });

 function loadContent(){ 
        $.ajax({
            url: "json/content.json",
            data: "nocache=" + Math.random(),
            type: "GET",
            contentType: "application/json",
            dataType: "json",
            cache: false,
            success: function(source){
                data = source;
                showStartpage(data);
                showInfo(data);
            },
            error: function(data){
                alert("Failed to load content");
            }
        }); 

    } 
```

# c# - 如何获取.NET/C#中查询结果的底层SQL类型？

> ID：15787104
> 
> 赞同：3
> 
> 时间：2013-04-03T12:15:11.720
> 
> 标签：c#, .net, sql, sql-server, sql-types

例如，以下代码打印“ `System.Int32`”，而不是“ `int`”：

```
string connArgs = "..."; // use your settings here
string query = "SELECT 1";
using (SqlConnection conn = new SqlConnection(connArgs)) {
  conn.Open();
  SqlCommand cmd = new SqlCommand(query, conn);
  using (SqlDataReader reader = cmd.ExecuteReader())
    for (int col = 0; col < reader.VisibleFieldCount; ++col)
      Console.WriteLine(reader.GetFieldType(col));
} 
```

如何获取*底层 SQL 类型*，而不仅仅是其等效的 .NET 系统类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:17:53.420

您可以为此使用一种[`GetDataTypeName`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getdatatypename.aspx)方法：

> 获取表示指定列的数据类型的字符串。

```
for (int col = 0; col < reader.VisibleFieldCount; ++col) {
    Console.WriteLine(reader.GetDataTypeName(col));
} 
```

# xml - Visual Studio - 注释掉每一行 XML

> ID：15787105
> 
> 赞同：2
> 
> 时间：2013-04-03T12:15:15.043
> 
> 标签：xml, visual-studio, comments

在 Visual Studio 中编辑 XML 文件时，我可以使用快捷键 Ctrl-K Ctrl-C 注释掉 XML 区域：

```
 <!--<Person>Tom</Person>
  <Person>Dick</Person>
  <Person>Harry</Person>--> 
```

但是，我希望将每一行单独注释掉，如下所示：

```
 <!--<Person>Tom</Person>-->
  <!--<Person>Dick</Person>-->
  <!--<Person>Harry</Person>--> 
```

是否有允许我这样做的设置，或者现有的扩展，或者我必须编写自己的宏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:00:52.480

[Resharper 允许两种编辑：](http://www.jetbrains.com/resharper/webhelp/Reference__Keyboard_Shortcuts.html)

*   使用行注释编辑
*   使用块注释进行编辑

# mysql - 更新内部联接冻结

> ID：15787107
> 
> 赞同：4
> 
> 时间：2013-04-03T12:15:22.183
> 
> 标签：mysql, sql

由于某种原因，此`UPDATE`查询永远挂起。如果我替换为`SELECT`- 它会立即得到结果。

```
UPDATE table1 AS t1
INNER JOIN
(
    SELECT count(*) as total, left(number,7) as prefix, outcome FROM table1
    where outcome like '%Passed%'
    group by prefix 
    order by total desc limit 200
) AS t2 
ON t2.prefix = left(t1.number,7) AND t1.outcome = 'Fail'
SET t1.outcome = '', t1.status = 'NEW' 
```

那里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:19:09.923

尝试将`ORDER BY`and`LIMIt`移到`UPDATE`. 就像是：

```
UPDATE table1 AS t1
INNER JOIN
(
    SELECT count(*) as total, left(number,7) as prefix, outcome FROM table1
    where outcome like '%Passed%'
    group by prefix 
) AS t2 ON t2.prefix = left(t1.number, 7) AND t1.outcome = 'Fail'
SET t1.outcome = '', t1.status = 'NEW'
order by total desc 
limit 200; 
```

请参阅[`UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/update.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:29:28.473

我会尝试这样的事情：

```
UPDATE table1
SET
  table1.outcome = '',
  table1.status = 'NEW'
WHERE
  outcome = 'Fail'
  AND 
  left(number,7) IN (SELECT * FROM (
    SELECT left(number,7) as prefix
    FROM table1
    WHERE outcome like '%Passed%'
    GROUP BY prefix 
    ORDER BY COUNT(*) desc limit 200
    ) s
  ) 
```

请[在此处](http://sqlfiddle.com/#!2/753c2/1)查看小提琴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:27:39.527

你能更新你加入的专栏吗？即，`t1.outcome`。

将过滤器表达式`t1.outcome = 'Fail'`移出`JOIN`和移入`WHERE`子句。

```
UPDATE table1 AS t1
INNER JOIN
(
    SELECT count(*) as total, left(number,7) as prefix, outcome FROM table1
    where outcome like '%Passed%'
    group by prefix 
    order by total desc limit 200
) AS t2 
ON t2.prefix = left(t1.number,7)
SET t1.outcome = '', t1.status = 'NEW'
WHERE t1.outcome = 'Fail' 
```

# node.js - Node.js 子域

> ID：15787108
> 
> 赞同：6
> 
> 时间：2013-04-03T12:15:24.867
> 
> 标签：node.js, express, subdomain

我试图让我的 Node.js 支持的站点在一个服务多个域的实例上运行。我有我的主域，`example.com`然后我有`admin.example.com`并且`api.example.com`都有不同的路线等，*我正在使用 Express。*

到目前为止，我已经为子域添加了两条 A 记录，并且还在`/var/vhosts`我的 CentOS 框中添加了两个条目。

```
127.0.0.1 api.example.com
127.0.0.1 admin.example.com
127.0.0.1 example.com 
```

我知道 Express 有一个`express.vhost`方法，所以我已经尝试过：

```
app.use(express.vhost('api.example.com', require('./lib/subdomains/api')))
app.use(express.vhost('admin.example.com', require('./lib/subdomains/admin'))) 
```

但这仍然只服务于我在下面导入的主要路线。我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T22:16:28.333

如果其他人发现这个问题，您可能需要检查您是否以正确的方式传递您的虚拟主机路由参数。

我正在使用：

```
app.get('/', function(res, req) { /* Do stuff.. */ } 
```

什么时候应该。回调函数的第一个参数是`req`，然后第二个参数是`res`。

```
app.get('/', function(req, res) { /* Do stuff.. */ } 
```

认真对待你的代码:)

# javascript - 循环 App.Car.find() 的结果

> ID：15787109
> 
> 赞同：0
> 
> 时间：2013-04-03T12:15:38.757
> 
> 标签：javascript, ember.js, ember-data

假设我有一辆模型车，我可以买到所有的车

```
cars = App.Car.find() 
```

如何遍历所有汽车以更改每辆汽车的属性（类似于`cars.each do |car|`Ruby）？对于一辆车，我会这样做，`car.set('colour', 'blue');`但我缺乏对 JavaScript 的理解来解决这个琐碎的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:26:52.280

> 如何循环遍历所有汽车以更改每辆汽车的属性（例如，在 Ruby 中，cars.each do |car|）？

返回的对象`App.Car.find()`是一个 Enumberable，因此您可以使用`Ember.Enumerable`API 访问子对象。例如，您可以：

```
cars.forEach(function(car) {
  car.set('colour', 'blue');
}); 
```

但在这种情况下，使用以下方法会更有效`setEach`：

```
cars.setEach('colour', 'blue'); 
```

Enumberables API 为您提供了很多选择，请参阅 [ember enumerables 指南](http://emberjs.com/guides/enumerables/)和[enumberables api doc](http://emberjs.com/api/classes/Ember.Enumerable.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:25:07.170

您可以[`Ember.Enumerable#setEach`](http://emberjs.com/api/classes/Ember.Enumerable.html#method_setEach)为此使用：

```
cars = App.Car.find();
cars.setEach('colour', 'le blue'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:21:22.323

如果`find()`返回一个数组，可以使用`Array.prototype.map` [MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

```
cars = cars.map(function (car) {
  return car.set('colour', 'blue');
}); 
```

还有用于[映射 ember enumerables](http://emberjs.com/guides/enumerables/#toc_map)的特定文档。

# php - PHP函数属性调用计数？

> ID：15787110
> 
> 赞同：0
> 
> 时间：2013-04-03T12:15:38.853
> 
> 标签：php, function, variables

我多次调用这个函数，传递额外的 $case 参数告诉我这个函数被调用了多少次：

```
function check($chars,$case=1){
    $charNums = array(
        "a" => "2",
        "b" => "22",
        "c" => "222",
        "d" => "3",
        "e" => "33",
        "f" => "333",
        "g" => "4",
        "h" => "44",
        "i" => "444",
        "j" => "5",
        "k" => "55",
        "l" => "555",
        "m" => "6",
        "n" => "66",
        "o" => "666",
        "p" => "7",
        "q" => "77",
        "r" => "777",
        "s" => "7777",
        "t" => "8",
        "u" => "88",
        "v" => "888",
        "w" => "9",
        "x" => "99",
        "y" => "999",
        "z" => "9999",
        " " => "0",
    );
    echo "Case #{$case}: ";
    for($i=0;$i<strlen($chars);$i++){
        if($prevChar == $charNums[$chars[$i]][0]) echo " ";
        echo $charNums[$chars[$i]];
        $prevChar = $charNums[$chars[$i]][0];
    }
    echo "<br>";
} 
```

我希望这个函数自己计算它被调用的次数。为了节省额外的参数成本，我看到每个 javascript 函数都有自己的默认属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:17:49.883

使用静态变量：

```
function check($chars){
  static $count = 0;
  ++$count;

  // TODO: your implementation here

  return $count;
} 
```

如果您已经将返回值用于其他目的，则可以将函数包装在一个类中：

```
class Checker {
  public static $count = 0;
  public static function check($chars) {
    ++self::$count;

    // TODO: your implementation here

    return $whatever;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:24:10.630

你没有清除

> $prevChar

在 for 循环中匹配...

## if($prevChar == $charNums[$chars[$i]][0]) echo " ";

用这个

```
for($i=0;$i<strlen($chars);$i++){
        $prevChar = $chars[$i];
        if($prevChar == $charNums[$chars[$i]][0]) echo " ";
        echo $charNums[$chars[$i]];
        $prevChar = $charNums[$chars[$i]][0];
    } 
```

# android - 开启“不保留活动”模式时无法从图库中选择图片

> ID：15787114
> 
> 赞同：2
> 
> 时间：2013-04-03T12:15:56.590
> 
> 标签：android, android-activity, android-gallery, htc-android

在“开发者选项”设置中，我使用“不保留活动”模式。我需要从图库中选择图像并在我的应用程序中使用它的 URI。打开图库以选择图像的代码是：

```
Intent intent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
intent.setType(FileType.IMAGE);

startActivityForResult(intent, 1); 
```

当我选择图像时会出现问题。显示“请稍候...”消息，然后我返回图库中的“选择图像”。打开此模式时，它会在 HTC One X 设备中发生。在三星 Galaxy S3 中不会出现此问题。HTC ONE X 设备开启此模式后如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T21:37:04.833

我只使用 mime-type 切换到 Intent.ACTION_GET_CONTENT，它似乎效果更好。我猜是HTC的错误。

```
 Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
    intent.setType("image/*"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T12:18:53.220

尝试这个

```
Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
photoPickerIntent.setType("image/*");
startActivityForResult(photoPickerIntent, 1); 
```

1 是传递给活动的请求代码，以区分调用的多个活动。

# javascript - MooTools：更改元素文本，保持嵌套元素不变

> ID：15787117
> 
> 赞同：0
> 
> 时间：2013-04-03T12:16:07.173
> 
> 标签：javascript, html, mootools

我对设置`text`属性的可能性以及与设置的区别感到困惑`html`。基本上，我有一个带有图像的段落：

`<p id="test">Title <img src="/someimage.jpg" /></p>`

我想做的是将“标题”更改为其他内容。所以我做什么（使用 MooTools）：

`$('test').set('text', 'Different title');`

但是，这只是替换了段落元素的全部内容，剥离了图像元素，如下所示：http: [//jsfiddle.net/4vhtR/1/](http://jsfiddle.net/4vhtR/1/)

我预计这只会更改文本、实际文本，而不是包含的任何 HTML 元素。现在它似乎与使用`set('html', 'Different title')`.

为什么它会这样工作？我怎样才能真正改变文本，而不用将文本包装在 a 中`<span>`或克隆并用 JS 放回图像，这只会使它复杂化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:51:19.003

做事的正确方法是通过文本节点。[https://developer.mozilla.org/en-US/docs/DOM/Node.nodeValue](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeValue)

```
Element.implement({
    getTextNodes: function(){
        return Array.filter(this.childNodes, function(el){
            return el.nodeType == 3;
        });
    }
});

var textNodes = $('test').getTextNodes();

textNodes[0].nodeValue = 'Hi there'; 
```

[http://jsfiddle.net/dimitar/4vhtR/4/](http://jsfiddle.net/dimitar/4vhtR/4/)

这将返回所有 textNode 的集合，您可以更新其值，以便您可以引用任何您喜欢的文本。

# php - PHP获取所有标题首字母大写

> ID：15787118
> 
> 赞同：1
> 
> 时间：2013-04-03T12:16:08.317
> 
> 标签：php

我知道 PHP 方法“getallheaders”改变了我的自定义标题。我花了很多时间来理解为什么我的脚本没有得到任何标题。问题出在我的主机上，但是在我的本地服务器中，所有标头都可以正常工作而无需重命名。

例如：

```
dupId -> Dupid
dup_id -> Dupid 
```

为什么？我该如何解决？我想从 JS 发送“dupId”并在服务器端获取“dupId”。

# ruby - Ruby 动态实例化类

> ID：15787122
> 
> 赞同：2
> 
> 时间：2013-04-03T12:16:22.137
> 
> 标签：ruby

如何在静态方法中引用类？

```
class Car
  def self.new_from_xml(xml)
    instance = self.class.new
    #do some stuff with xml
    instance
  end
end

class Mercedes < Car
end

class Porsche < Car
end 
```

内部审查委员会：

```
Mercedes.new_from_xml(somedata) # Output is #<Class:...>, should be #<Mercedes:...>
Porsche.new_from_xml(somedata)  # Output is #<Class:...>, should be #<Porsche:...> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T12:26:04.413

代替

```
instance=self.class.new 
```

写吧

```
instance = new 
```

**为什么是这样？**

好吧，首先，您必须了解您正在调用类方法，因此您已经处于类级别。.new 方法是一个类方法，所以你可以直接调用它，而不用调用 self.class.new。

**为什么 self.class.new 会返回 Class？**

因为 Car 类的类是 Class（我知道，听起来很奇怪；），因为 Ruby 中的类是 Class 的实例。

这实际上是一个非常深刻的概念，我建议您阅读更多有关它的内容。我读过的一本很好的参考书是 Paolo Perrotta 所著的 Metaprogramming Ruby (ISBN-10: 1934356476) [1] 一书。

1.  [http://www.amazon.com/Metaprogramming-Ruby-Program-Like-Pros/dp/1934356476](https://rads.stackoverflow.com/amzn/click/com/1934356476)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T12:20:04.270

由于您已经在一个类方法中，您应该使用`self.new`（或简单地`new`，如@tokland 所写）而不是`self.class.new`：

```
class Car
   def self.new_from_xml(xml)
       instance = new
       #do some stuff with xml
   end
end

class Mercedes < Car
end

class Porsche < Car
end

p Mercedes.new_from_xml(nil) #=> #<Mercedes:0x007f042d0db208>
p Porsche.new_from_xml(nil) #=> #<Porsche:0x007f042d0db118> 
```

* * *

从评论到这个答案：*为什么 self.class 引用类？这里的逻辑是什么？*

在类块内`self`引用您正在编辑的类：

```
class Car
  puts self #=> writes Car
end 
```

使用`def self.new_from_xml`它就像你在声明`def Car.new_from_xml`，那是`Car`对象的一个​​方法（它是 的一个实例`Class`）；所以里面`new_from_xml` `self`不谋而合`Car`。

# api - HighChart.js 数据源推荐

> ID：15787128
> 
> 赞同：0
> 
> 时间：2013-04-03T12:16:38.097
> 
> 标签：api, highcharts, highstock, stock

我希望将 Highstock.js 用于我正在开发并希望使用 Highcharts 股票库图表实现股票表现的应用程序；[http://www.highcharts.com/stock/demo/](http://www.highcharts.com/stock/demo/)

我想知道是否有关于从哪里获取数据源的好建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:04:58.153

我从 API 获取数据，然后将数据存储在本地存储中。

例如：

这从 API 中获取数据以用于 Highcharts，并将其存储/更新到本地存储（jStorage）中。

```
 updateLocalStorage: function(id) {
        //Check if local storage needs updating
        if (isNaN($.jStorage.get(id))) {
            //Data exists in Localstorage, merge data
            //Query API for highstock data

            return $.post('api/', {
                data_id: id
            }, function(data) {
                if (data) {
                    var merged = $.extend($.jStorage.get(id), data);
                    $.jStorage.set(id, merged);
                }
            });

            //return true;
        }
} 
```

一旦获取了这些数据，我就会从存储在本地存储中的数据中渲染高图。

```
$.when(updateLocalStorage(id)).then(function(response){               
if(response){
//Local storage is up to date. Render chart
}
}); 
```

我还可以使用计时器从 API 获取数据并更新本地存储，当我想重新渲染图表时，我可以使用 highcharts setData 方法，例如：

```
var json = $.jStorage.get(id);

for(i =0; i < json.data; i++) {
    chart_object.series[i].setData(json.data[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:02:35.190

如果您询问从哪里获取金融股票价格数据，我知道有几个来源，包括谷歌金融和雅虎金融。以下是一些可以帮助您的链接：

[如何使用 Google Finance API 获取股票报价？](https://stackoverflow.com/questions/527703/how-can-i-get-stock-quotes-using-google-finance-api)

[http://www.yqlblog.net/blog/2009/06/02/getting-stock-information-with-yql-and-open-data-tables/](http://www.yqlblog.net/blog/2009/06/02/getting-stock-information-with-yql-and-open-data-tables/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:46:59.233

您可以硬编码系列/数据对象中的数据，如示例[http://www.highcharts.com/demo/](http://www.highcharts.com/demo/)显然您也可以使用动态方式来定义点。

[http://docs.highcharts.com/#preprocessing](http://docs.highcharts.com/#preprocessing)

# debugging - GNU Make 使用 -j 时内 存不足。在那个特定的时刻它在做什么？

> ID：15787129
> 
> 赞同：2
> 
> 时间：2013-04-03T12:16:39.257
> 
> 标签：debugging, gnu-make

我正在运行带有 -j 标志的大型 GNU Make 文件。在某一时刻，Make 进程溢出所有 RAM 并因“分段错误”而下降。如果没有 -j 标志，进程将成功完成。如何知道 GNU Make 在开始吃内存时在做什么？调试标志 (-d) 对这个问题没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-18T14:01:47.813

`gmake -j`您是否在没有任何争论的情况下跑步`-j`？在这种情况下`gmake`，可以并行运行尽可能多的进程（可能有数百或数千个）。这很可能导致`gmake`分叉进程或分叉进程中的段错误。如果这是问题所在，请限制并行进程的数量，例如，

```
gmake -j 4 
```

粗略估计的数量是 CPU 内核数量的两倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:31:28.147

如果内存不足，则不应将分段错误作为错误消息。如果某些 make 进程正在消耗大量内存，然后像那样崩溃，则可能是堆栈溢出。

makefile 是否可能具有某种递归依赖关系？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-18T10:23:01.717

吃内存的不是 GNU make。它在各个目标中运行命令，这些目标并行分叉，分别消耗内存。这可能就是为什么仅当您使用多个并行进程运行时才会出现问题的原因。你已经尝试过`-j2`，但也失败了，对吧？

如果您使用[remake](http://bashdb.sf.net/remake)，当您的进程失败时，您将看到失败的 make 命令以及调用它的目标堆栈。

# drupal - 匿名用户名未显示在评论 Drupal

> ID：15787131
> 
> 赞同：0
> 
> 时间：2013-04-03T12:16:40.670
> 
> 标签：drupal, comments

我正在使用 Drupal 7，它有评论和博客作为核心模块。我添加了内联评论模块。

当匿名用户添加评论时，在我的博客查看页面上，它允许添加他们的名字，但在保存时，他们的名字是可见（存储）为匿名的。

但是在我的节点博客页面上，如果匿名用户添加评论，它还允许添加他们的名字并将他们的名字保存为他们添加的任何内容，而不是匿名。

所以，我也想在我的博客查看页面上，当匿名用户添加评论时，它应该显示他们的名字而不是匿名。

# django - 如何在 Django 中获取 URL 的内容/预览？

> ID：15787133
> 
> 赞同：4
> 
> 时间：2013-04-03T12:16:45.833
> 
> 标签：django, url

对于我的网络应用程序，我需要预览用户给出的 URL。例如，在 Facebook 中，如果用户复制粘贴 URL，它会自动获取 URL 的内容并显示页面预览。它是如何工作的？它是 Ajax 的一个特性吗？我需要在 Django 中完成。有教程或演示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T12:31:44.587

对于 Facebook，有一种标准方法可以使您的网站“预览”兼容，使用开放图形标签。最常见的是：

```
<meta property="og:title" content="The Rock" />
<meta property="og:type" content="video.movie" />
<meta property="og:url" content="http://www.imdb.com/title/tt0117500/" />
<meta property="og:image" content="http://ia.media-imdb.com/images/rock.jpg" /> 
```

完整列表可在[开放图形协议站点上](http://ogp.me/)找到。您可以使用[`PyOpenGraph`](https://github.com/minichiello/PyOpenGraph)它来解析其开放图形标签的 URL。以下是自述文件中的示例：

```
>>> import PyOpenGraph
>>> og = PyOpenGraph('http://www.rottentomatoes.com/m/10011268-oceans/')
>>> print og.metadata
{'url': 'http://www.rottentomatoes.com/m/10011268-oceans/',
 'site_name': 'Rotten Tomatoes',
 'image': 'http://images.rottentomatoes.com/images/movie/custom/68/10011268.jpg',
 'type': 'movie',
 'title': 'Oceans'}
>>> print og.metadata['title']
Oceans 
```

# javascript - javascript: json数据解析

> ID：15787137
> 
> 赞同：0
> 
> 时间：2013-04-03T12:16:51.350
> 
> 标签：javascript, jquery, asp.net, json, highcharts

要求是通过 JSON 提取数据并将其提供给图表。数据需要采用以下形式

> var dataArray = [{data:[]},{data:[]}];

在客户端获取 JSON 数据的代码如下：

```
$.ajax({
                    type: "POST",
                    url: "Default.aspx/SendJsonUpadtes",
                    data: "{}",
                    contentType: "application/json",
                    dataType: "json",
                    success: function (msg) {
                        $("#Result").text(msg.d);
                        alert(msg.d);
                   }
                }); 
```

Asp.net 服务器端代码：

```
[WebMethod(EnableSession = false)]
    public static string SendJsonUpadtes()
    {
        return JSONFromCSV();

    }

    public static string JSONFromCSV()
    {
        //var reader = new StreamReader(File.OpenRead(@"D:\logs\data.csv"));
        var lines = File.ReadAllLines(@"D:\logs\electricity\data.csv");
        object[,] data = new object[lines.Count(), 2];
        int i = 0;
        string jsonStr = "[";
        lines.ToList().ForEach(line =>
        {
            jsonStr += "["+line+"]";
            i++;
            if (i < lines.Count())
                jsonStr += ",";
        });
        jsonStr += "]";
        return jsonStr;
    } 
```

数据以字符串形式接收：

> “[[10,20],[20,30],[30,40]]"

我需要解析它以使其成为 var dataArray = [{data:[]},{data:[]}];

我如何使用 Javascript 或 JQuery 来做到这一点！还有其他更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:21:54.470

试试这个：

```
var dataArray = [];
$.each(msg.d, function(index, value) {
  dataArray.push({data : value});
}); 
```

[**在这里演示**](http://jsfiddle.net/Nscy3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:23:04.520

您可以使用[map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)函数来修改数据数组。

```
var data = [[10,20],[20,30],[30,40]];

var dataArray = data.map(function(element) {
                            return { "data" : element }
                         }); 
```

# tomcat - http 404，找不到资源

> ID：15787138
> 
> 赞同：1
> 
> 时间：2013-04-03T12:16:51.583
> 
> 标签：tomcat, http-status-code-404

使用tomcat 6.0服务器，我最近遇到以下问题，我创建了一个jsp，重新启动了一个服务器，然后请求这个页面我得到了404错误

```
HTTP 404 the requested resource can not be found. 
```

在tomcat文件夹中，jsp存在，如何解释这个，我创建了另一个页面，同样的问题有人告诉我这可能是夏季时间引起的，它是由windows自动改变的..我不知道，你知道吗？

添加到现有页面的东西也不会显示（例如我添加了一个 h1 到现有页面，它不会显示）就像没有应用更改一样

# cakephp - 如何仅使用一个字段+ cakephp 2.x 进行登录

> ID：15787143
> 
> 赞同：0
> 
> 时间：2013-04-03T12:17:04.647
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我试图通过仅获取/授权一个输入 *user_number* （**不是**用户名 - 密码）来登录。

我用以下方式制作了我当前的登录页面： [Cakephp2.x simple login](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)

任何帮助请！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:14:00.343

## 创建自定义身份验证对象

创建一个自定义身份验证对象，该对象仅对用户编号的使用进行身份验证；

[创建自定义身份验证对象](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#creating-custom-authentication-objects)

app/Controller/Component/Auth/UserNumberAuthenticate.php

```
App::uses('BaseAuthenticate', 'Controller/Component/Auth');

class UserNumberAuthenticate extends BaseAuthenticate {
    public function authenticate(CakeRequest $request, CakeResponse $response) {
        $userModel = $this->settings['userModel'];
        list($plugin, $model) = pluginSplit($userModel);

        $fields = $this->settings['fields'];
        if (
            empty($request->data[$model])
            || empty($request->data[$model][$fields['username']])
        ) {
            return false;
        }

        return $this->_findUser($request->data[$model][$fields['username']]);
    }

    /**
     * Find a user record via his user-number/identifier
     *
     * @param string $usernumber The user-number/identifier.

     * @return Mixed Either false on failure, or an array of user data.
     */
    protected function _findUser($usernumber) {
        $userModel = $this->settings['userModel'];
        list($plugin, $model) = pluginSplit($userModel);
        $fields = $this->settings['fields'];

        $conditions = array(
            $model . '.' . $fields['username'] => $usernumber,
        );
        if (!empty($this->settings['scope'])) {
            $conditions = array_merge($conditions, $this->settings['scope']);
        }
        $result = ClassRegistry::init($userModel)->find('first', array(
            'conditions' => $conditions,
            'recursive' => $this->settings['recursive'],
            'contain' => $this->settings['contain'],
        ));
        if (empty($result) || empty($result[$model])) {
            return false;
        }
        $user = $result[$model];
        unset($result[$model]);
        return array_merge($user, $result);
    }
} 
```

然后指定您要使用您的自定义身份验证对象

在您的 AppController 内部：

```
public $components = array(
    'Auth' => array(
        'authenticate' => array(
            'UserNumber' => array(
                'userModel' => 'User',
                'fields'    => array('username' => 'user_number')
            )
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T07:39:46.150

## 把事情简单化

如果您只有一种识别用户的方法，那么识别用户的最简单（因此也是推荐的）方法是定义您自己的登录函数。例如：

```
public function login() {
    if ($this->request->is('post')) {
        $number = $this->request->data['User']['user_number'];
        $user = $this->User->findByUserNumber($number);
        if ($user && $this->Auth->login($user)) {
            return $this->redirect($this->Auth->redirectUrl());
        } else {
            $this->Session->setFlash(__('User %d doesn\'t exist', $number), 'default', array(), 'auth');
        }
    }
} 
```

请注意，这与使用 Cake 2.x[登录用户的标准方式](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#identifying-users-and-logging-them-in)差别很小

# r - 将 igraph 中的图保存为 igraph 对象或 gml 格式

> ID：15787145
> 
> 赞同：1
> 
> 时间：2013-04-03T12:17:10.563
> 
> 标签：r

我有以下代码使用 walktrap 社区算法从相关矩阵中检测社区。一旦发现社区，我就绘制它们。

```
 G <- graph.adjacency(th, mode="undirected", weighted=TRUE)
 G <- delete.vertices(G, V(G)[ degree(G)==0 ])
 G1<-walktrap.community(G)
 par(mai=c(0.4,0.01,0.01,0.4)) 
 b<-plot(G1,G,vertex.size=15,vertex.label.color= "black",vertex.label.cex=0.45,layout=layout.fruchterman.reingold) 
```

我想做的是制作一个交互式版本的绘图，显示不同的社区，或者以可以导入 cytoscape 的格式保存它们。我尝试了以下方法：

```
 tkplot(G1,G,vertex.size=15,vertex.label.color= "black",vertex.label.cex=0.45,layout=layout.fruchterman.reingold) 
```

但我收到以下错误：

```
 Error in tkplot(G1, G, vertex.size = 15, vertex.label.color = "black",  : 
```

不是图形对象

我试图将绘图转换为 gml 格式以导入 cytoscape 但失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:15:09.743

`G1`这里不是一个图，而是一个分层的社区结构。`tkplot()`可以绘制图表，但不能绘制社区结构。如果您想要一个显示最高模块化级别的社区的图，使用顶点颜色进行编码，那么您可以执行以下操作：

```
mycolors <- heat.colots(length(G1))
tkplot(G, vertex.color=mycolors[membership(G1)]) 
```

# vbscript - 如何从 .VBS 或 Bat 清除 Firefox 缓存和 Cookie

> ID：15787146
> 
> 赞同：0
> 
> 时间：2013-04-03T12:17:10.850
> 
> 标签：vbscript, batch-file

您好，我想从 .vbs 脚本或 bat 中清除 Firefox cookie + 缓存，我已经尝试过 ccleaner /auto 但问题是它需要关闭浏览器才能清除缓存和 cookie，否则它会跳过它，我想清除 cookie 和缓存而不从 .vbs 脚本或 .bat 脚本关闭浏览器你能给出代码或推荐任何其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:12:51.307

Enduros 的答案可能会有所帮助，但是如果您安装了 ccleaner，这是一种简短的方法，您可以调用 ccleaner comaandline`ccsetup.exe /S` 或使用其他各种参数选项来执行您可能感兴趣的任何特定任务这里是指向命令行选项[ccleaner 命令行](http://www.piriform.com/docs/ccleaner/advanced-usage/command-line-parameters)的链接您还可以使用以下代码片段的[参数](http://www.piriform.com/docs/ccleaner/advanced-usage/command-line-parameters)

```
#include <File.au3>

Dim $sPath = @AppDataDir & '\Mozilla\Firefox\Profiles'

Dim $arr = _FileListToArray($sPath, '*.default', 2)

If IsArray($arr) Then
For $i = 1 To $arr[0]
    FileDelete($sPath & "\" & $arr[$i] & "\cookies.sqlite")
Next
EndIf 
```

# jquery - for循环中的Ajax请求

> ID：15787156
> 
> 赞同：0
> 
> 时间：2013-04-03T12:17:37.347
> 
> 标签：jquery, ajax

这是我的代码：

```
for (var i = 0; i < 20; i++) {
$.ajax({
    type: "GET",
    async: false,
    url: "/MyController/MyMethod",
    success: function (data) {
        if (i == 0) {
            $('#result_progress').hide();
            $('#result_msg').hide();
            $('#details').show();
        } else if (i == 1) {
            $.ajax({
            type: "GET",
            async: true,
            url: "/Import/Finish",
            success: function (data) {
                    ....                        
            });                                            
        }
        if (i < 2) {
            $('#details').html($('#details').html() + 'someText'));
        }                                        
    }
}); 
```

}

我不想使用 async: false 因为我的浏览器停止工作。我将如何以另一种方式解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:20:07.077

您的问题是`i`执行回调时具有循环结束的值。

解决这个问题的标准解决方案是添加一个立即调用的中间函数来保护 的值`i`：

```
for (var i = 0; i < 20; i++) {
   (function(i){
      ... your code
   })(i);
} 
```

对该函数的调用会创建一个范围，其中`i`是一个不同的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:31:58.627

我认为你应该做一些封闭：

```
function makeReq(n){
   return function(){
      $.ajax({
        type: "GET",
        async: true,
        url: "/MyController/MyMethod",
        success: function (data) {
           if (n == 0) {
              $('#result_progress').hide();
              $('#result_msg').hide();
              $('#details').show();
           } else if (n == 1) {
              $.ajax({
                type: "GET",
                async: true,
                url: "/Import/Finish",
                success: function (data) {
                    ....                        
                });                                            
           }
           if (n < 2) {
               $('#details').html($('#details').html() + 'someText'));
           }                                        
       }
     });
   }
}

for (var i = 0; i < 20; i++) {
    makeReq(i);
} 
```

这个问题可以通过创建一个函数并在循环的每次迭代中调用它来解决，同时传递 i; 调用该函数将形成一个全新的执行上下文，其中 i 的值被保留，并且可以在该上下文中以任何方式使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:09:36.873

这是我修复它的方法：

```
function run(i, howManyToRun, start) {
    if(i >= howManyToRun) return;

    $.ajax({
        type: "GET",
        async: false,
        url: "/MyController/MyMethod",
        success: function (data) {        
            ....
            run(++i, howManyToRun, start);
            ....                                    
        }
    });
} 
```

# c++ - 在 C++ 中写入和读取二进制文件

> ID：15787166
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:17:56.173
> 
> 标签：c++

我是处理文件的初学者。我想要在我的代码中做的是从用户那里得到一个名字，并将它隐藏在一个 .bmp 图片中。并且还能够从文件中再次获取名称。但我想先将字符更改为 ASCII 码（这就是我的作业所说的）

我试图做的是将名称的字符更改为 ASCII 代码，然后将它们添加到我将以二进制模式打开的 bmp 图片的末尾。添加它们后，我想从文件中读取它们并能够再次获取名称。

这是我到目前为止所做的。但我没有得到正确的结果。我得到的只是一些无意义的字符。这段代码是否正确？

```
int main()
{
    cout<<"Enter your name"<< endl; 
    char * Text= new char [20];
    cin>> Text;    // getting the name

    int size=0;
    int i=0;     
    while( Text[i] !='\0')          
    {

        size++;
        i++;

    }

int * BText= new int [size];

for(int i=0; i<size; i++)
{
    BText[i]= (int) Text[i];  // having the ASCII codes of the characters.

}

    fstream MyFile;
MyFile.open("Picture.bmp, ios::in | ios::binary |ios::app");  

    MyFile.seekg (0, ios::end);
ifstream::pos_type End = MyFile.tellg();    //End shows the end of the file before adding anything

    // adding each of the ASCII codes to the end of the file.
    int j=0;
while(j<size)
{
    MyFile.write(reinterpret_cast <const char *>(&BText[j]), sizeof BText[j]);
    j++;
}

MyFile.close();

char * Text2= new char[size*8];

MyFile.open("Picture.bmp, ios:: in , ios:: binary");

    // putting the pointer to the place where the main file ended and start reading from there.

    MyFile.seekg(End);
    MyFile.read(Text2,size*8);

cout<<Text2<<endl;

MyFile.close();

system("pause");
return 0; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:19:02.230

您的代码中存在许多缺陷，其中一个重要的缺陷是：

```
MyFile.open("Picture.bmp, ios::in | ios::binary |ios::app"); 
```

一定是

```
MyFile.open("Picture.bmp", ios::in | ios::binary |ios::app);
            ^           ^
            |           |
            +-----------+ 
```

其次，使用[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)而不是 C 风格的字符串：

```
char * Text= new char [20]; 
```

应该

```
std::string Text; 
```

另外，用于[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)制作数组：

```
int * BText= new int [size]; 
```

应该

```
std::vector<int> BText(size); 
```

*等等...*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:23:39.830

您写入`int`（32 位）但读取`char`（8 位）。

为什么不按原样写字符串？无需将其转换为整数数组。

而且，您不会终止您读入的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:26:48.397

您的写入操作不正确，您应该直接传递完整的文本 `MyFile.write(reinterpret_cast <const char *>(BText), sizeof (*BText));`

此外，将您的字符串转换为整数并返回字符会在您的字符之间插入空格，您在阅读操作中没有考虑到这些空格

# reverse-engineering - 对 FoxPro/dBsae 数据库进行反向工程以创建 EER 模型

> ID：15787167
> 
> 赞同：0
> 
> 时间：2013-04-03T12:17:58.043
> 
> 标签：reverse-engineering, foxpro, dbase, eer-model

我目前正在为客户开发一个 webapp，我需要从他们的旧应用程序中导入数据。

据我所知，数据库是用 FoxPro 编写的 dBase。我有应用程序 exe 和大量 dbf/dbb/dbi 文件，并且由于[DBF Commander](http://elphsoft.com/dbfcommander.html) ，我可以打开 dbf 表文件。

虽然我可以打开每个表并查看数据，但我确实可以使用 EER 图来了解表如何相互连接。

是否有任何工具可以对数据库进行逆向工程并绘制 EER 图？

谢谢你的时间。

问候，雨果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:48:26.837

看看 XCase 是否能满足您的需求：[http ://www.xcase.com/](http://www.xcase.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:36:13.920

很大程度上取决于它是否只是一堆 DBF/CDX/FPT 文件，或者它们是否属于数据库容器（DBC/DCT/DCX 扩展）。如果没有数据库容器，即“自由表”，它们不一定是由 FoxPro 创建的，它可能是任何 xBase 语言，如 Clipper 等。

如果它们是数据库容器的一部分，那么其中可能有定义规则、触发器、关系的元数据。

即便如此，您可能真的需要一份 Visual FoxPro 的副本（您可能有 MSDN 子吗？）。它有一个名为 GenDBC 的内置工具，如果它有一个数据库容器，它将记录数据库的结构。

还有[一个 Stonefield 数据库工具包](http://www.stonefield.com/sdt.aspx)，它可以在这方面提供更好的工具。

或者，您可以使用 Visual FoxPro 中的升迁向导将数据导入 SQL Server，然后您将有更好的工具选择。

# oracle - 无法在windows中启动oracle服务

> ID：15787169
> 
> 赞同：1
> 
> 时间：2013-04-03T12:18:00.057
> 
> 标签：oracle, oracle11g

我正在服用 DB 编。类，我们需要使用 Oracle+ Oracle sql dev。到目前为止，我在 oracle 中获得了 3 个 DB，每个 DB 都与 Oracle sql dev 的连接。

在 Windows 服务中，我只有一个名为 OracleDBConsole"MY1stDB name" 的服务，我创建的其他数据库没有类似的服务。

当我尝试启动此服务时，我收到错误图片

![在此处输入图像描述](https://i.stack.imgur.com/Sf1v3.png)

我可以通过 Oracle sql dev 中的连接进行连接。到我创建的另一个数据库，除了第一个

有人对这个问题有想法吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-21T12:26:19.780

作为受影响的人之一，我终于找到了解决方案：

如果出现这种情况，`lsnrctl start`请以管理员身份运行以启动侦听器。

很可能您的 listener.ova 和 tnsnames.ova 设置不正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-25T09:44:29.740

提到的服务与 oracle 企业管理器服务有关。您拥有此服务是因为它为您的数据库配置。但要对其进行故障排除，请检查其在 %ORACLE_HOME%**HOSTNAME_DBNAME**\sysman\log* 中的日志。检查那里的日志并发送调查。问候，莫森

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-22T11:06:00.610

好的，您在同一台机器上安装了 3 个实例。有两种可能性。

它们都设置为使用默认端口，因此当启动一个端口时，由于端口冲突，其他端口无法启动。在这种情况下，您需要按照[文档重新配置端口](https://docs.oracle.com/cd/B19306_01/install.102/b15660/app_port.htm)

第二种可能性是您的实例已经有不同的端口。在这种情况下，请检查您的连接定义是否使用正确的端口。首先可能需要默认的 1521，但其他需要其他端口。您可以尝试 1522，因为在安装期间使用 1521 时，它可能需要下一次免费。但通常你应该去`NETWORK/ADMIN/listener.ora`编辑文件并检查使用的端口。然后在客户端工具中正确定义连接。

但正如评论中所说。除非您尝试通过`DBlinks`模拟进行一些研究，否则安装 3 个实例毫无意义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-21T11:06:32.400

关于错误的详细信息不足以知道问题所在，但我的猜测是后续实例正在尝试使用与已启动实例相同的资源，很可能是端口。

不过，您的问题可以通过**不创建多个**Oracle 实例来解决，而是在一个 Oracle 实例中**创建多个数据库。**

可以肯定的是，您的老师并不打算让您启动多个 Oracle 实例。

# android - 可见时更新通知

> ID：15787179
> 
> 赞同：0
> 
> 时间：2013-04-03T12:18:34.043
> 
> 标签：android, bitmap, notifications, notificationmanager

`Notification`我的Android 应用程序中有一个（丰富的） ，目前正在使用`BigPictureStyle`

显示的位图会不时更改，因此我需要更新通知，这没什么大不了的，但我不知道何时显示我的通知，因此不知道何时更新通知。

创建位图需要大量的性能，因此我不想做太多必要的事情。你有什么想法，我如何尽可能少地更新我的通知，但尽可能多地更新我的通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:12:36.870

Android does not allow to check whether the notification is shown or not. I too had the same problem.

What you can do is store the Date (in shared preferences) when its shown last time just before showing notification. Then check this date and find whether you need to show again or not.

# lua - 碰撞时更新计时器

> ID：15787184
> 
> 赞同：0
> 
> 时间：2013-04-03T12:18:53.400
> 
> 标签：lua, coronasdk

大家好，任何人都可以帮助我编写一个计时器更新，该计时器更新在使用 corona sdk 和 LUA 与特定对象碰撞时会增加。

基本上计时器会倒计时，如果玩家与星星碰撞，那么计时器应该是 + 5 等等。

这是我的计时器设置

```
function timerDown()
  timeLimit = timeLimit-1
  timeLeft.text = timeLimit 
```

还有那颗星

```
star = display.newImage("star1.png")
  star.name = "star"
  star.x = 700
  star.y = 200
  physics.addBody(star, "static") 
```

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:43:13.707

```
local timeLimit

function timerDown()
  timeLimit = timeLimit-1
  timeLeft.text = timeLimit
end

function newFunc( event )
  if event.phase == "began" then
     timeLimit = timeLimit + 5
  end
end

star = display.newImage("star1.png")
  star.name = "star"
  star.x = 700
  star.y = 200
  physics.addBody(star, "static")
  star:addEventListener( "collision", newFunc )

timer.performWithDelay( 1000, function() timerDown() end, timeLimit ) 
```

这将帮助您开始。根据您的对象，您可能需要对碰撞侦听器进行一些修改。

# django - FeinCMS，内容类型字段的中间模型

> ID：15787185
> 
> 赞同：1
> 
> 时间：2013-04-03T12:18:57.737
> 
> 标签：django, feincms

我正在尝试完成以下任务：

```
class DownloadContentFiles(models.Model):
    download_content = models.ForeignKey('DownloadContent')
    media_file = models.ForeignKey(MediaFile)

class DownloadContent(models.Model):
    files = models.ManyToManyField(MediaFile, through=DownloadContentFiles)

    class Meta:
        abstract=True 
```

我明白为什么这不起作用。因为下载内容的摘要。

是否有为内容类型字段指定中间模型的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:33:12.063

通常，如果您在创建字段（例如选择列表）或具体的 Django 模型（如您所做的那样）时需要更多信息，您可以使用`initialize_type`它。

```
class DownloadContent(models.Model):
    @classmethod
    def initialize_type(cls):
        cls.add_to_class('files', ... your model field ...) 
```

使用`MediaFileContent`此方法添加`type`选择器：

[https://github.com/feincms/feincms/blob/master/feincms/content/medialibrary/models.py#L58](https://github.com/feincms/feincms/blob/master/feincms/content/medialibrary/models.py#L58)

**但是**，在您的情况下，这不起作用，因为您还必须`through`动态创建模型。原因是对于每个具体的`DownloadContent`，你需要另一个具体的`DownloadContentFiles`模型。

您可以通过使用`type`内置动态创建新的具体类来实现这一点（当与不同的 CMS 基础（例如和）一起`DownloadContentFiles`使用时，请注意名称冲突）。`DownloadContent``page.Page``elephantblog.Entry`

**也许是实现您想要的更简单的方法：**

*   `Downloads`在某处添加模型，然后将其添加`files` `ManyToManyField`到此类
*   `DownloadContent`唯一包含一个`ForeignKey(Downloads)`

是的，你需要另一个模型。这可能是值得的，因为您可以为 构建更好的编辑界面`Downloads`，并且页面编辑器也得到了简化，因为您只需选择一个已经存在的`Downloads`模型即可在页面上显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:31:22.400

也许明确定义`class_name`为[create_content_type](http://www.feinheit.ch/media/labs/feincms/api/core.html?highlight=class_name#base-models)可能对您有用。像这样的东西：

```
class DownloadContentFiles(models.Model):
    download_content = models.ForeignKey('MyDownloadContent')
    media_file = models.ForeignKey(MediaFile)

class DownloadContent(models.Model):
   files = models.ManyToManyField(MediaFile, through=DownloadContentFiles)

    class Meta:
        abstract=True

Page.create_content_type(DownloadContent, class_name="MyDownloadContent") 
```

# qt4 - 如何在Qt中的指定目录中获取不带扩展名的文件列表

> ID：15787193
> 
> 赞同：3
> 
> 时间：2013-04-03T12:19:14.473
> 
> 标签：qt4, qstring, qdir

我想获取位于指定目录中但最后没有扩展名的所有文件。我做了这个Qt代码：

```
QDir myDir(mConfigDirectory);

         filters << "*.ini";
         myDir.setNameFilters(filters);
     list = myDir.entryList ();
    qDebug()<<list; 
```

但我找不到将名称与扩展名分开并仅获取名称的方法？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:00:19.420

[`QFileInfo Class`](http://qt-project.org/doc/qt-4.8/qfileinfo.html)在这种情况下没有帮助吗？看[`QString QFileInfo::baseName`](http://qt-project.org/doc/qt-4.8/qfileinfo.html#baseName)

# xml - 使用 simplexml_load_file 解析 XML 文件返回空对象

> ID：15787198
> 
> 赞同：3
> 
> 时间：2013-04-03T12:19:26.343
> 
> 标签：xml, simplexml, php

```
 <?xml version="1.0" ?> 
  <aws:UrlInfoResponse xmlns:aws="http://alexa.amazonaws.com/doc/2005-10-05/">
   <aws:Response xmlns:aws="http://awis.amazonaws.com/doc/2005-07-11">
    <aws:OperationRequest>
    </aws:OperationRequest>
    <aws:UrlInfoResult>
     <aws:Alexa>
      <aws:TrafficData>
       <aws:DataUrl type="canonical">google.com/</aws:DataUrl> 
       <aws:Rank>1</aws:Rank> 
      </aws:TrafficData>
     </aws:Alexa>
    </aws:UrlInfoResult>
    <aws:ResponseStatus xmlns:aws="http://alexa.amazonaws.com/doc/2005-10-05/">
     <aws:StatusCode>Success</aws:StatusCode> 
    </aws:ResponseStatus>
   </aws:Response>
  </aws:UrlInfoResponse> 
```

我只想解析这个 xml 文档中的排名。在尝试时，我正在做的是......

```
 $xml= simplexml_load_file("path of the file saved");
        echo $xml->Response->UrlInfoResult->Alexa->TrafficData->Rank; 
```

但我这样做会出错。它说

```
 Notice: Trying to get property of non-object in C:\wamp\www\SEO Stats[Only Testing]\Tools\web_worth.php on line 13 
```

错误在这一行

```
 echo $xml->Response->UrlInfoResult->Alexa->TrafficData->Rank;
 this line is referred as line no 13.. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T12:47:15.703

解析器返回一个空对象，因为根据[文档](http://php.net/manual/en/function.simplexml-load-file.php)，您必须指定前缀命名空间 - 例如，您想使用以下内容：

```
simplexml_load_file('/path/to/file.xml', null, null, 'aws', true); 
```

[工作示例](http://ideone.com/ucSJWJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:28:44.047

您可能将结果对象嵌套错误，因此其中一个对象`$xml->Response->UrlInfoResult->Alexa->TrafficData->Rank;`为空。分别尝试`echo`每一步：

```
echo $xml->Response;
echo $xml->Response->UrlInfoResult;
// etc ... 
```

如果第一个回显没有返回任何内容，则检查您是否需要改为输出`UrlInfoResponse`或需要先注册命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:29:54.443

好的，这太模糊了，但是您总是可以打印 $xml 值以查看它是否实际上是一个对象，有时会发生路径错误。试试这段代码，看看是否真的加载了 xml 文档：

```
<?php

if (file_exists('/path/to/document.xml')) {
    $xml = simplexml_load_file('/path/to/document.xml');

    print_r($xml);
} else {
    exit('Failed to open /path/to/document.xml.');
} 
```

?>

有了这个，您应该看到 xml 文档的内容。

# macos - 是否可以在 osc Terminal 的 rm -rf 查询中实现多个文件夹名称

> ID：15787200
> 
> 赞同：0
> 
> 时间：2013-04-03T12:19:34.627
> 
> 标签：macos, terminal, directory, rm

我正在尝试删除目录中的某些子文件夹。

使用以下提示时：

`cd`到目录 Y 的根目录

然后（假设文件夹名称是“X”）：

`find . -name X -exec rm -rf {} \;`

是否可以实现除 X 之外的多个目标文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:36:08.610

```
find . -name X1 -or -name X2 -type d -depth 1 ... 
```

`-type d`只会找到目录。

`-depth 1`将其限制为当前目录的子目录（即`ls`不带参数列出的目录）。

# file - 如何在 Nautilus/Caja linux 文件管理器中获取视频文件的分辨率（宽度和高度）？

> ID：15787204
> 
> 赞同：1
> 
> 时间：2013-04-03T12:19:42.920
> 
> 标签：file, ubuntu, nautilus

我已阅读此内容 [如何从 linux 命令行获取视频文件的分辨率（宽度和高度）？](https://stackoverflow.com/questions/684015/how-can-i-get-the-resolution-width-and-height-for-a-video-file-from-a-linux-co) 但那是命令行。

我想知道如何在文件管理器中获取视频信息，以便我可以使用文件管理器 GUI 按视频大小排序。

附件是显示可用选项的屏幕截图...不包括视频 rez/size。

我正在运行 Linux Mint 13。也许是一个在后台运行的脚本来拉取视频。大小信息并将其推送到文件管理器列？

这是屏幕截图：

[https://docs.google.com/file/d/0B19mmCKTPBRYV0FkLV9kc2JtRU0/edit?usp=sharing](https://docs.google.com/file/d/0B19mmCKTPBRYV0FkLV9kc2JtRU0/edit?usp=sharing)

谢谢你的帮助，丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:42:27.190

MediaInfo [http://mediainfo.sf.net](http://mediainfo.sf.net)有一个命令行版本，并提供尺寸以及大量其他信息。

# php - 单击后禁用提交按钮并保持 POST/REDIRECT/GET 工作

> ID：15787205
> 
> 赞同：0
> 
> 时间：2013-04-03T12:19:43.610
> 
> 标签：php, javascript, jquery, forms, submit

我使用 POST/REDIRECT/GET 技巧来防止刷新重新发送表单。现在我想禁用不应单击两次的表单提交按钮（单击后）。尽管我尝试了所有找到的 javascript 示例，但它们都与 POST/REDIRECT/GET 冲突。在大多数情况下，它甚至不提交，而只是重定向到自身。有什么解决办法吗？谢谢你的帮助。

我尝试过的一些冲突是这个例子：

该脚本首先运行 headers.php，其中包含：

```
if (isset($_POST['start-diff-scan']))
{
    $_SESSION['SCAN_START'] = true;

    header('HTTP/1.1 303 See Other');
    header('Location: '.APP_URL.'scan.php');
    exit;
} 
```

然后 scan.php 使用这种形式：

```
<form name="start-diff-scan" id="start-diff-scan" method="post">
    <button
        name="start-scan"
        id="start-scan"
        value=""
        class="start-scan btn btn-primary"
        type="submit"
        method="post">
        Start New Scan
    </button>
</form> 
```

并且工作正常。但是js技巧与此冲突。我在scan.php的最后添加了js代码

```
<script>
$('#start-diff-scan').submit(function()
{
    $('#start-scan').prop('disabled', true);
});
</script> 
```

发生的情况是它只重定向到同一页面（scan.php）而不执行任何操作。感谢您迄今为止的所有回答和帮助，这很棒。非常感谢任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:22:53.480

您无法以这种方式阻止它，因为它是用户端脚本，人们可以在发送表单之前轻松删除此代码。即使您禁用该按钮。在您的服务器端脚本中检查请求是否已插入，因此您将向它们显示错误或将它们返回到页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:25:54.747

`$('#start-scan').attr("disabled", true);`

应该管用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:26:49.857

如果“禁用”方法弄乱了您的代码并且所有其他方法都失败了：

您可以尝试用“loader gif”覆盖按钮，使其不可点击。

```
$('#start-scan').click(function()
{
    $('#start-scan').before('<div>LOADING</div>'); //Set the loading overlay width, height and background-color
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T13:01:45.890

您遇到的问题是当人员单击时设置禁用会导致按钮被禁用并且单击操作不会触发。

添加一个 setTimeout 来延迟设置 disabled 属性。

其他选项是隐藏按钮并将其替换为表示提交的文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T12:22:01.713

```
$('#start-scan').attr('disabled', true); 
```

或使用

```
.prop("disabled", true)

$('#start-scan').prop("disabled", true) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T12:22:41.247

您可以将其添加到表单中：

```
onClick="this.disabled=true" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T12:23:04.770

尝试`prop()`

```
$('#start-scan').prop('disabled', true); 
```

# javascript - Sencha touch 2 如何在视图中引用列表项？

> ID：15787208
> 
> 赞同：1
> 
> 时间：2013-04-03T12:19:50.967
> 
> 标签：javascript, sencha-touch, sencha-touch-2

我是 Sencha Touch 的新手。我在视图中有一个列表。我想在视图的初始功能中引用列表。在函数中，我将把 store 设置为列表。

我的观点：

```
Ext.define('NCAPP.view.tablet.MainMenu',{
extend:'Ext.Container',
xtype:'mainMenu',
    id:'mainMenu',

    requires:['Ext.TitleBar','Ext.dataview.List'],
config:{
            loggedInUser:'',
    fullscreen:true,
            tabBarPosition: 'top',
    items:[{
        xtype:'titlebar',
        title:'NetCenter APP',
        items:[{
               xtype:'list',
               id:'menuList',
               itemCls:'listItem'
            }
        ]

    }]

},

    initialize: function () {
        Ext.Viewport.setMasked({
               xtype: 'loadmask',
               message: 'Loading ...'
           });
           var moduleStore=Ext.create('NCAPP.store.Module');
           moduleStore.load({
               callback:function(records,operation,success){
                    Ext.Viewport.setMasked(false);
                    // I would like to refer to the list here and set store to it
                    var menu=this.menulist;
                    menu.setStore(moduleStore);
                    console.log(records);
               },
               scope:this
           });
    }
}); 
```

任何人都可以帮助我吗？谢谢

我的模型：

```
Ext.define('NCAPP.model.Module', {
extend:'Ext.data.Model',

config:{
    fields:[
        { name:'id', type: 'int'},
        { name: 'name', type: 'string'},
        { name: 'description', type:'string'}
        ]
} 
```

});

还有我的商店：

```
Ext.define('NCAPP.store.Module',{
extend:'Ext.data.Store',

config: {
    model:'NCAPP.model.Module',

    autoLoad:false,
    proxy: {
        type:'rest',
        url:NCAPP.app.baseApiUrl+'/user/module/1/',
        noCache: false,

        //limitParam: false,
        //enablePagingParams: false,
       // startParam: false,

        reader: {
            type:'json',
            rootProperty:'modules'
        }

    } 
```

}

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:57:25.600

由于您已经`id`为您的列表设置，那么您只需要使用[Ext.getCmp()](http://docs.sencha.com/touch/2-1/#!/api/Ext-method-getCmp)来检索您的列表：

```
var menu = Ext.getCmp("menuList");
menu.setStore(moduleStore); 
```

之后要填充列表，请尝试[刷新](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.DataView-method-refresh)：

```
menu.refresh(); 
```

# string - 以“A1”、“B2”、“C3”形式连接行

> ID：15787209
> 
> 赞同：0
> 
> 时间：2013-04-03T12:19:56.033
> 
> 标签：string, r, paste

我有一个数据框

```
> df
  letters numbers
1       A       1
2       B       2
3       C       3
4       D       4
5       E       5 
```

并希望在连接行后得到以下结果：

```
"A1","B2","C3","D4","E5" 
```

为了获得以下内容：

```
c("A1","B2","C3","D4","E5") 
```

以下代码有什么问题？

```
> paste(df$letters, df$numbers, sep="",collapse='","')
[1] "A1\",\"B2\",\"C3\",\"D4\",\"E5" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:25:02.460

对于 a `data.frame`，您可能想尝试：

```
> do.call(paste0, df)
[1] "A1" "B2" "C3" "D4" "E5" 
```

或者，如果您想要一个带逗号的字符串，请按如下方式修改您的方法：

```
> paste0(df$letters, df$numbers, collapse = ", ")
[1] "A1, B2, C3, D4, E5" 
```

在那里获取报价具有欺骗性：

```
> paste0('"', paste0(df$letters, df$numbers, collapse = '", "'), '"')
[1] "\"A1\", \"B2\", \"C3\", \"D4\", \"E5\"" 
```

看起来有反斜杠，但没有：

```
> cat(paste0('"', paste0(df$letters, df$numbers, collapse = '", "'), '"'))
"A1", "B2", "C3", "D4", "E5"
> nchar(paste0('"', paste0(df$letters, df$numbers, collapse = '", "'), '"'))
[1] 28 
```

* * *

或者，也许您正在寻找`dQuote`，`sQuote`或者`shQuote`（很难说不知道为什么要做您正在做的事情）：

```
> noquote(paste(dQuote(paste0(df$letters, df$numbers)), collapse = ", "))
[1] “A1”, “B2”, “C3”, “D4”, “E5”
> noquote(paste(shQuote(paste0(df$letters, df$numbers)), collapse = ", "))
[1] 'A1', 'B2', 'C3', 'D4', 'E5'
> noquote(paste(sQuote(paste0(df$letters, df$numbers)), collapse = ", "))
[1] ‘A1’, ‘B2’, ‘C3’, ‘D4’, ‘E5’ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:24:08.257

是转义字符，`\`用于标识`"`R 在使用时在任何字符串周围打印`print`以及`"`在字符串本身中打印。为了摆脱`\`你可以使用`'`而不是`"`. 此外，要`'`绕过字符串，也是第一个和最后一个，您可以`sprintf`结合使用`paste`：

```
> paste(sprintf("'%s%s'", letters[1:10], 1:10), collapse = ",")
[1] "'a1','b2','c3','d4','e5','f6','g7','h8','i9','j10'" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:32:17.540

R 读`\"`作`"`字符串中的 a。跑的时候`cat(paste0(df$letters, df$numbers, sep="",collapse='","'),"\n")`就知道了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T12:36:22.423

这是我的帽子：

```
theString <- paste0(sprintf("\"%s%i\"", df$letters, df$numbers), collapse = ",")

cat(theString)
# "A1","B2","C3","D4","E5" 
```

# asp.net-mvc-4 - 在 MVC 4 中使用 Singleton 到 Application State 对象是一种好习惯吗？

> ID：15787216
> 
> 赞同：1
> 
> 时间：2013-04-03T12:20:01.847
> 
> 标签：asp.net-mvc-4, singleton, application-state

最近我一直忙于编写一个 MVC 4 网站，我需要在所有会话中保存一些值，所以我决定使用“应用程序状态”对象。因为位于 Global.asax.cs 中的 MvcApplication 类是 HttpApplication 类型，并且保证在 Application Start 时被初始化，所以我认为它是“Application State”对象的一个​​很好的参考，所以我在里面创建了一个 Singleton这个类是这样的：

```
public class MvcApplication : HttpApplication
{
    public static HttpApplicationState Singleton;

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();

        Singleton = this.Application; //<== Here it is!
    }

    protected void Application_Error(object sender, EventArgs e)
    {

    }
} 
```

所以我现在可以像这样访问这个对象：

```
MvcApplication.Singleton 
```

因为我希望我的代码是标准的并避免使用非标准代码，所以我想确定它是否是做这种事情的好方法。

提前感谢您的关注。

# r - 如何将 ffdf 应用于非原子数据帧？

> ID：15787221
> 
> 赞同：0
> 
> 时间：2013-04-03T12:20:08.693
> 
> 标签：r, dataframe, bigdata

许多帖子（[例如this](http://www.r-bloggers.com/if-you-are-into-large-data-and-work-a-lot-with-package-ff/)）声称该`ff`包优于它，`bigmemory`因为它可以处理带有原子和非原子组件的对象，但是如何处理呢？例如：

```
UNIT <- c(100,100, 200, 200, 200, 200, 200, 300, 300, 300,300)
STATUS <- c('ACTIVE','INACTIVE','ACTIVE','ACTIVE','INACTIVE','ACTIVE','INACTIVE','ACTIVE',
        'ACTIVE','ACTIVE','INACTIVE') 
TERMINATED <- as.Date(c('1999-07-06','2008-12-05','2000-08-18','2000-08-18','2000-08-18',
                    '2008-08-18','2008-08-18','2006-09-19','2006-09-19','2006-09-19',
                    '1999-03-15')) 
START <- as.Date(c('2007-04-23','2008-12-06','2004-06-01','2007-02-01','2008-04-19',
               '2010-11-29','2010-12-30','2007-10-29','2008-02-05','2008-06-30',
               '2009-02-07'))
STOP <- as.Date(c('2008-12-05','2012-12-31','2007-01-31','2008-04-18','2010-11-28',
              '2010-12-29','2012-12-31','2008-02-04','2008-06-29','2009-02-06',
              '2012-12-31'))
TEST <- data.frame(UNIT,STATUS,TERMINATED,START,STOP)
TEST                   

#install.packages('ff')            
library('ff')            
TEST2 <- ffdf(TEST)            
Error in ffdf(TEST) : ffdf components must be atomic ff objects 
```

我能做些什么来完成这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:22:40.723

使用

```
TEST2 <- as.ffdf(TEST) 
```

代替

```
TEST2 <- ffdf(TEST) 
```

将工作。

说明： `as.ffdf`将您的 data.frame 转换为 ffdf。如果您真的想`ffdf`直接使用，则需要提供原子 ff 向量，如错误消息所示。对于上面的例子，这将是

```
ffdf(UNIT = as.ff(UNIT), STATUS = as.ff(as.factor(STATUS)), TERMINATED = as.ff(TERMINATED), START = as.ff(START), STOP = as.ff(STOP)) 
```

请参阅 ?as.ffdf 或 ?ffdf，它们是 ff 包的一部分。

在现实生活中，您的数据将来自其他来源，如 csv 或 SQL 来源，而不是来自 R 中已经存在的 data.frame。请参阅包[ETLUtils](http://cran.r-project.org/web/packages/ETLUtils/index.html)以轻松将您的数据从 SQL 获取到 ff。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:47:06.077

`ff`我试图在调用之前将TEST data.frame 的列强制为对象，`ffdf`但这不起作用。这里使用的解决方法`read.csv.ffdf`：

```
write.csv(TEST,file='test.csv')
TEST.ffd <- read.csv.ffdf(file='test.csv') 
```

# android - 如何解决android中的空白？

> ID：15787223
> 
> 赞同：0
> 
> 时间：2013-04-03T12:20:14.243
> 
> 标签：android, image, android-sqlite

我是安卓新手。。

我正在使用 sqlite 数据库。在我的图像数据库中，我有一行。我在android中正确获取图像。但是数据库中没有图像，在我的drawable中也没有图像，我在图像视图中得到了空白空间。如何解决这个问题？任何人都可以帮助我..我的代码也没有错误。

提前致谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T12:25:56.840

从数据库中检索图像时，检查它是否为空。如果它为空，则设置`ImageView.setVisbility(VIEW.GONE);` 这将删除布局中 ImageView 的空间，或用于`View.INVISIBLE`使其不可见

顺便说一句，这可能应该是评论，但我还不能评论。如果有人正确回答，我将删除此答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:55:47.123

更新测验集 image = NULL where image =''; 在数据库中像这样检查..

# html - 如何在 :focus 上实现这个效果

> ID：15787224
> 
> 赞同：1
> 
> 时间：2013-04-03T12:20:15.390
> 
> 标签：html, css, focus, border

我在一个网站上看到了这个：

![在此处输入图像描述](https://i.stack.imgur.com/mEYPT.png)

然后，当你点击它... ![在此处输入图像描述](https://i.stack.imgur.com/vHGGr.png)

你会如何重现这个？不仅仅是一个简单的实心边框，而是像那个一样。我扫描了源代码，但找不到任何东西。不在css或javascript中。

我得到这个的网站是： http: [//www.minecraft-schematics.com/search/](http://www.minecraft-schematics.com/search/)

我很确定这会产生`:focus`影响，但正如我所说，我在源代码中找不到它......

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T12:23:46.117

从您所指的页面上该特定元素的来源：

```
input[type="text"]:focus {
    border-color: rgba(82, 168, 236, 0.8);
    outline: 0;
    outline: thin dotted 9;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),0 0 8px rgba(82, 168, 236, 0.6);
    -moz-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(82,168,236,0.6);
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),0 0 8px rgba(82, 168, 236, 0.6);
} 
```

*我通过 Chrome 通过强制元素进入焦点状态然后检查应用的 CSS 规则来实现这一点。在 Chrome Devtools 中，您可以右键单击检查器中的任何 DOM 元素，然后选择“Force element state”->“:focus”*

**旁注：**从外观上看，该页面是基于流行的 UI 框架[Twitter Bootstrap](http://twitter.github.com/bootstrap/)构建的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T12:27:33.623

看起来它是引导程序的一部分。

[jsFiddle](http://jsfiddle.net/Tyriar/nBEqA/3/)

```
.fancy {
    background-color: #fff;
    border: 1px solid #ccc;
    -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);
    -moz-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);
    box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);
    -webkit-transition: border linear .2s,box-shadow linear .2s;
    -moz-transition: border linear .2s,box-shadow linear .2s;
    -o-transition: border linear .2s,box-shadow linear .2s;
    transition: border linear .2s,box-shadow linear .2s;
    display: inline-block;
    height: 20px;
    padding: 4px 6px;
    margin-bottom: 10px;
    font-size: 14px;
    line-height: 20px;
    color: #555;
    vertical-align: middle;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
}
.fancy:focus {
    border-color: rgba(82, 168, 236, 0.8);
    outline: 0;
    outline: thin dotted 9;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),0 0 8px rgba(82, 168, 236, 0.6);
    -moz-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(82,168,236,0.6);
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),0 0 8px rgba(82, 168, 236, 0.6);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:29:26.433

文本框使用[CSS3`box-shadow`](http://www.css3.info/preview/box-shadow/) :. 下面的 CSS 将使所有文本框上的阴影效果成为焦点：

```
input[type^="text"] {
    background: #fff;
    border: 1px solid #0077cc;
    border-radius: 5px;
    padding: .2em;
    outline: none; /*Stops Chrome putting a yellow border on the textbox*/
}
input[type^="text"]:focus {
    box-shadow: 0px 0px 10px #0077cc;
} 
```

# ruby-on-rails - 如何缓存过滤器？

> ID：15787225
> 
> 赞同：1
> 
> 时间：2013-04-03T12:20:18.613
> 
> 标签：ruby-on-rails, ruby, caching, memcached, invalidation

我即将为我的网站实现排序和过滤功能。

我打算使用 memcache 来缓存单个页面的结果（应用的每个过滤器都是不同的页面）。

问题是每个页面的内存缓存键应该是什么。我打算在 memcache 键中附加每个过滤器排列，例如

some_id_color_red_size_l_page_1 等等。

但是问题是随着这些键呈指数增长而使这些缓存键失效。如果某些产品在某个地方更新，我必须更新它出现的所有页面的密钥。

知道如何以更优化的方式实现这一点吗？或者除 memcache 之外的任何其他机制来实现这一点？

# c++ - C++ 访问另一个类的公共成员

> ID：15787226
> 
> 赞同：0
> 
> 时间：2013-04-03T12:20:19.677
> 
> 标签：c++, winapi, com, file-mapping

我有一个 COM 对象。在主要课程中，我创建了两个公共成员。

```
public:
    HANDLE                  m_hVoiceData;
    void*                   m_pVoiceData; 
```

它们用于映射文件。我在 COM 对象的实例化处映射文件。

COM 对象的主类有一个私有类。从这个私有类我想访问这些公共成员：

这就是我想要访问映射文件的方式：

```
memcpy(nEncodedBytes,& CTTSEngObj::m_pVoiceData[iFirstByteToRead], iLenCompressedBytes); 
```

但是编译器不喜欢这样。它说“非静态成员引用必须相对于某个对象”。

谁能告诉我如何正确地做到这一点？我知道在主类中公开成员，但我需要这样做，因为私有类（如上所述）也有私有类，它们都需要这个成员来访问某个映射文件。

* * *

这是我映射文件的地方：

```
STDMETHODIMP CTTSEngObj::SetObjectToken(ISpObjectToken * pToken)
{

HRESULT hr = SpGenericSetObjectToken(pToken, m_cpToken);

//--- Map the voice data so it will be shared among all instances
//  Note: This is a good example of how to memory map and share
//        your voice data across instances.
TCHAR szFileName[MAX_PATH+1];
GetModuleFileName(_Module.m_hInst, szFileName, MAX_PATH+1);
StrCpy(PathFindFileName(szFileName), _T("data.dat"));

if( SUCCEEDED( hr ) )
{
    USES_CONVERSION;//needed to make T2W work
    hr = MapFile( T2W(szFileName), &m_hVoiceData, &m_pVoiceData );
} 
```

进而

```
STDMETHODIMP CTTSEngObj::Speak( DWORD dwSpeakFlags,
                            REFGUID rguidFormatId,
                            const WAVEFORMATEX * pWaveFormatEx,
                            const SPVTEXTFRAG* pTextFragList,
                            ISpTTSEngineSite* pOutputSite )
{

HRESULT hr = S_OK;

//--- Check args
if( SP_IS_BAD_INTERFACE_PTR( pOutputSite ) ||
    SP_IS_BAD_READ_PTR( pTextFragList )  )
{
    hr = E_INVALIDARG;
    return hr;
}

m_App.DoSomething(); 
```

m_App 是一个类。它是 COM 对象主类的私有成员。

该类有子类，例如：CTTSEngObj.m_App.SomeSmallClass

SomeSmallClass 需要访问映射的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:23:23.107

要访问非静态成员，您需要拥有该类的实例。根据您的需要，使成员成为静态成员或创建实例。

在您的代码`m_pVoiceData`中是一个实例成员，但您尝试直接从类中访问它`CTTSEngObj::m_pVoiceData`

这相当于

```
class A
{
  int a;
};
main()
{
  int b = A.a; //same error
} 
```

要解决此问题，您需要一个实例`CTTSEngObj`或`m_pVoiceData`必须是静态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:02:10.977

静态意味着对象只会被初始化一次，并且对于同一类的每个实例都是相同的，如下所示：

```
 class A 
    {
    public:
    static int a;
    };

    void main()
    {
        A::a = 3; // now a will contain 3 for every instance of the class;
        cout << A::a; //calling the static member without an instance of the class outputs 3
        A someA; //create some instances of the class
        A otherA;

        cout << someA.a; // outputs 3

        someA.a = 7; // assing 7 to a

        cout << otherA.a; // outputs 7 for we modified the value of the static member in another instance
    } 
```

因此，如果您希望创建的每个对象都不同，则需要将其设置为非静态并通过该类的现有实例访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-17T12:07:55.757

静态变量是类特定的，成员变量是对象特定的。

```
 class MyClass
  {
    static int s_ObjectCount;
    unsigned int m_id;
   public:
    MyClass(int id):m_id(id)
    {
       s_ObjectCount++;
    } 

   ~MyClass()
   {
     s_ObjectCount++;
   }
   static int GetObjectCount()
   {
     return s_ObjectCount;
   }
 };
 int MyClass::s_ObjectCount = 0;

 int main(int argc, char* argv[])
 {
  MyClass a(12345);
  MyClass b(123456);
  printf("%d",MyClass::GetObjectCount());// outputs 2
  return 0;
} 
```

因此，如果我们必须在对象之间共享一些公共数据并且成员变量是特定于对象的，则使用静态变量。

# silverlight - XAML 在 MouseOver 上突出显示文本块背景

> ID：15787227
> 
> 赞同：1
> 
> 时间：2013-04-03T12:20:21.490
> 
> 标签：silverlight, xaml

我有一个，当我把鼠标放在它上面时`TextBlock`，我想突出显示它。`Button`通常，只有文本突出显示。有谁知道如何做到这一点？我会很感激一个例子。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:35:57.477

根据您的总体要求，您有多种选择来完成此操作。您的问题将来自提供背景，因为 TextBlock 默认情况下没有该属性可用作框架元素。但是，这里有几种方法；

1.  您可以使用`HyperlinkButton`模板来指定您的颜色更改等到`Content` `Foreground`背景`Border`或其中的`Rectangle`某些内容，`VisualStateManager`然后将您的文本设置为`HyperlinkButton`类型。这通常可以通过查看默认模板来快速解决。

2.  您可以创建一个`TextBlock`带有 a 的模板`VisualStateManager`来执行上述相同类型的操作。

3.  如果仅针对单个实例或几个地方，您可以使用`EventTrigger`附加到对象来完成相同的事情，例如；

**命名空间：**

xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"

```
<Border x:Name="MyBackground">
  <TextBlock x:Name="MyForeground" Text="Hover Over Me!" Margin="5">
      <i:Interaction.Triggers>
         <i:EventTrigger EventName="MouseEnter">
             <ei:ChangePropertyAction TargetName="MyForeground"
                                      PropertyName="Foreground"
                                      Value="Orange" />
             <ei:ChangePropertyAction TargetName="MyBackground"
                                      PropertyName="Background"
                                      Value="Blue" />
         </i:EventTrigger>
         <i:EventTrigger EventName="MouseLeave">
             <ei:ChangePropertyAction TargetName="MyForeground"
                                      PropertyName="Foreground"
                                      Value="Black" />
             <ei:ChangePropertyAction TargetName="MyBackground"
                                      PropertyName="Background"
                                      Value="Transparent" />
       </i:EventTrigger>
      </i:Interaction.Triggers>
    </TextBlock>
</Border> 
```

这只是与本示例中未包含的其他几种方法一起完成它的几种可能方法。希望这可以帮助。:)

# c# - 动态查询创建（动态搜索引擎）

> ID：15787233
> 
> 赞同：1
> 
> 时间：2013-04-03T12:20:43.597
> 
> 标签：c#, asp.net-mvc-3, iqueryable, entity-framework-4.3, dynamicquery

我们正在使用 ASP.NET MVC3、EF 4.3.1、DynamicQuery 库我们目前正在开发一个可以对多个数据库执行搜索查询的动态搜索引擎。

所以我们有一个允许用户创建查询的界面。界面如下所示：![带有选定 ddl 值的屏幕截图](https://i.stack.imgur.com/Mower.jpg)

所以在那之后，我们在控制器内重新创建组/子句的层次结构，然后我们必须在不同的表之间执行一些连接（例如：Study / People）。

问题是当我们执行连接时，我们按如下方式进行：

```
if (queries.ContainsKey("Drug"))
{
    query = query.Join(GetContext().StudyDrugs, s => s, sd => sd.StudyId, (s, sd) => new { Study = s, StudyDrug = sd })
                 .Join((IQueryable<int>)queries["Drug"], obj => obj.StudyDrug.DrugId, d => d, (obj, d) => obj.Study);
} 
```

但是我们不能设置生成查询的 Where 子句，因为它们并不总是适用于搜索`IQueryable<T>`的对象，而是适用于连接的对象。

And : 由于我们需要能够对子句进行分组（这就是我们在屏幕截图中使用组的原因），我们必须能够正确生成带括号的 Where 子句。（这可以使用 PredicateBuilder 类来完成，但由于搜索结果是 an `IQueryable<T>`，我们不知道 where 子句是否适用于`T`类或连接类之一。

我错过了什么吗？是否有任何技巧可以让我在连接完成后但在从数据库中提取对象之前（仍在`IQueryable`对象上）添加 where 子句？

编辑 ：

事实上，如果我能够在生成的 SQL 查询中指定“as”名称，那么结束 where 子句就可以很容易地完成。有什么方法可以命名连接表（以下示例中的 T2）？

```
SELECT * FROM Table1 T1
JOIN Table2 T2 on (T1.T2Key = T2.Key) 
```

# plugins - 无法使用插件注册工具注册自定义工作流，表示不支持 int32 类型

> ID：15787242
> 
> 赞同：0
> 
> 时间：2013-04-03T12:21:18.180
> 
> 标签：plugins, workflow, dynamics-crm, dynamics-crm-4

我在我的自定义工作流代码中创建了一个模型属性，生成了代码的程序集。然后，我已经厌倦了使用插件注册工具注册程序集文件，但在完成时收到如下错误消息 - 不支持属性模型的 Int32 类型。（插件注册工具是否支持64位int类型，如果那么如何将我粘贴在底部的代码中的int32更改为int64）

未处理的异常：System.Web.Services.Protocols.SoapException：服务器无法处理请求。详细信息： `0x8004501d` 不支持属性模型的 Int32 类型。在 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) 在 PluginRegistrationTool 的 System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall) 的平台。 CrmSdk.CrmService.Create(BusinessEntity entity) at PluginRegistrationTool.RegistrationHelper.RegisterPluginType(CrmOrganization org, CrmPlugin plugin) at PluginRegistrationTool.PluginRegistrationForm.btnRegister_Click(Object sender, EventArgs e)

如果我做错了什么，请参考下面的代码并纠正我。

```
[CrmWorkflowActivity("Create Cardetails Record", "Utilities")]
public partial class CreateCardetails : SequenceActivity
{
    public static DependencyProperty modelProperty = DependencyProperty.Register("model", typeof(int), typeof(CreateCardetails));

    [CrmInput("Model")]
    public int model
    {
        get
        {
            return (int)base.GetValue(modelProperty);
        }
        set
        {
            base.SetValue(modelProperty, value);
        }
    }

    public CreateCardetails()
    {
        InitializeComponent();
    }

    protected override ActivityExecutionStatus Execute(ActivityExecutionContext executionContext)
    {
        // Get the context service.
        IContextService contextService = (IContextService)executionContext.GetService(typeof(IContextService));
        IWorkflowContext context = contextService.Context;

        // Use the context service to create an instance of CrmService.
        ICrmService crmService = context.CreateCrmService(true);

        DynamicEntity entity = null;
        Guid contactId;

        if (context.InputParameters.Properties.Contains("Target") && context.InputParameters.Properties["Target"] is DynamicEntity)
        {
            // Obtain the target business entity from the input parmameters.
            entity = (DynamicEntity)context.InputParameters.Properties["Target"];
            contactId = ((Key)entity.Properties["contactid"]).Value;

            Lookup lookup = new Lookup();
            lookup.Value = contactId;
            lookup.type = "contact";

            //Create an account which is linked to the contact record
            DynamicEntity cardetails = new DynamicEntity("cir_cardetails");

            cardetails["cir_carsdetailsid"] = lookup;

            //Setting the picklist value of Model
            Picklist modelPickList = new Picklist();
            modelPickList.Value = (int)model;
            cardetails.Properties.Add(new PicklistProperty("cir_model", modelPickList));
            Guid carkey = crmService.Create(cardetails);
        }
        return ActivityExecutionStatus.Closed;
    }
} 
```

请帮助，我所有的运气现在都没有了。我不知道如何解决它，甚至不确定这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:13:54.570

CRM 4 不支持`int`作为自定义工作流活动的输入属性（CRM 2011 支持）

所以，而不是...

```
[CrmInput("Model")]
public int model 
```

尝试...

```
[CrmInput("Model")]
public CrmNumber model 
```

[自定义工作流活动：CRM 类型的使用](http://msdn.microsoft.com/en-gb/library/cc677093.aspx)

# java - javafx 上的 sun.security.pkcs11

> ID：15787245
> 
> 赞同：3
> 
> 时间：2013-04-03T12:21:23.317
> 
> 标签：java, pkcs#11

我尝试开发一个访问智能卡的 javafx 应用程序。

我有一个简单的概念证明，如下所示：

```
package javafxapplication7;

import java.net.URL;
import java.util.ResourceBundle;
import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.Label;
import sun.security.pkcs11.SunPKCS11;

public class SampleController implements Initializable {

   @FXML
   private Label label;

   @FXML
   private void handleButtonAction(ActionEvent event) {
      SunPKCS11 a = new SunPKCS11();
   }

   @Override
   public void initialize(URL url, ResourceBundle rb) {
       // TODO
   }    
} 
```

并且执行是：

```
Caused by: java.lang.NoClassDefFoundError: sun/security/pkcs11/SunPKCS11
at javafxapplication7.SampleController.handleButtonAction(SampleController.java:26) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:27:08.870

只需在 64 位 JDK 旁边（或代替）安装 32 位 JDK，并确保使用 32 位版本编译和签名 JAR/COD 文件。

实际上这是**64 位**版本中的一个错误.. [http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=f1279f413fd19e3a247022d6dcca9?bug_id=7105065](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=f1279f413fd19e3a247022d6dcca9?bug_id=7105065)

我在以下讨论中找到了它：-

[http://www.java.net/node/703858](http://www.java.net/node/703858)

[http://tai-dev.blog.co.uk/2009/11/11/are-you-seeing-the-java-lang-noclassdeffounderror-sun-security-pkcs11-sunpkcs11-error-when-signing-your- rim-blackberry-j2me-apps-7352729/](http://tai-dev.blog.co.uk/2009/11/11/are-you-seeing-the-java-lang-noclassdeffounderror-sun-security-pkcs11-sunpkcs11-error-when-signing-your-rim-blackberry-j2me-apps-7352729/)

[http://community.igniterealtime.org/thread/30821](http://community.igniterealtime.org/thread/30821)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:24:56.533

无论您为什么遇到此特定问题，都不要使用`sun.*`类。它们不是为公众使用而设计的。

您可能希望使用`SunPKCS11`JCE 提供程序来处理您的智能卡。查看本指南以帮助您入门：[http](http://docs.oracle.com/javase/1.5.0/docs/guide/security/p11guide.html) ://docs.oracle.com/javase/1.5.0/docs/guide/security/p11guide.html 。

# algorithm - 图的所有子图 - 不知情的搜索（人工智能相关）

> ID：15787246
> 
> 赞同：1
> 
> 时间：2013-04-03T12:21:24.383
> 
> 标签：algorithm, graph, depth-first-search

我需要编写一个程序，该程序必须能够首先使用深度等算法找到图的所有子图。问题是我无法理解如何表示一组具有以下关系的节点：

```
A: A->B A->D A->F
B: B->A B->C 
C: C->B C->D
D: D->C D->A D->F
F: F->A F->D 
```

在树中，所以我可以使用该算法。欢迎任何来源或解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:35:10.583

图 G"(V",E") 是图 G(V,E) 的子图，如果：

1.  V" 是 V 的子集

2.  E" 必须具有来自 E 的所有边，它们连接 V 中存在的 2 个顶点"

存储任意数量顶点的所有子图空间复杂度：

```
TIME & SPACE = SUM { k * (|V|-k+1) } for k: 1..|V|

TIME & SPACE = 1/6 n (n+1) (n+2)

TIME & SPACE ~ O(|V|^3 + |V|^2 + |V| + ..) 
```

在英语中，您将需要大量空间来保存 G 的所有可能子图。

```
TIME & SPACE ~ SUM { (|V|-k+1) * SPACE(Gk) }
    for k: 1..|V|, SPACE(Gk): size of sub-graph with k nodes 
```

获得所有可能子图的算法是蛮力算法..

算法（Java）：

```
public class SubGraphs
{
    public static ArrayList<Graph> getAllSubsets (Graph g)
    {
        // i: 1,2,3 .. |V|
        for (int i=1; i<graph.V.size(); i++)
        {
            addSubsets(subsets, i);
        }
    }

    public static void addSubsets (ArrayList<Graph>, int i)
    {
        // generate all k-permutations from set V
        ArrayList<Node[]> perm = generateAllPerm(graph.V, graph.V.size()-i);

        // Ex: abc ~ 3:abc ; 2:ab,ac,bc ; 1:a,b,c
        for (Node[] p : perm)
        {
            subsets.add(removeVerticesFromGraph(graph, p));
        }
    }
} 
```

# c# - 将值从一个列表框交换到另一个列表框时出现异常

> ID：15787253
> 
> 赞同：0
> 
> 时间：2013-04-03T12:21:52.593
> 
> 标签：c#, winforms, listbox, datasource

我有两个列表框。当我将值从一个列表框交换到另一个列表框时，出现异常`Items collection cannot be modified when the DataSource property is set.`如何解决？

在我绑定列表框和交换值的代码下方

对于交换值，我使用这个：

```
 private void MoveListBoxItems(ListBox lstEmployeelist, ListBox lstSelectedEmployees)
    {

        ListBox.SelectedObjectCollection sourceItems = lstEmployeelist.SelectedItems;

        try
        {
            for (int i = 0; i <= sourceItems.Count - 1; i++ )
            {
                object item = sourceItems[i];

                lstSelectedEmployees.Items.Add(item);
                lstEmployeelist.Items.RemoveAt(i);

            }
        }
        catch (Exception ex)
        {
            throw ex;
        }

    } 
```

对于绑定列表框，我使用此代码

```
if (_empComponent == null)
            _empComponent = new EmployeeComponent();
        lstEmployeelist.DataSource = _empComponent.GetEmpCodeWithName();
        lstEmployeelist.ValueMember = "Empno";
        lstEmployeelist.DisplayMember = "FirstName"; 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:25:02.383

这很容易：当您使用 a 时`DataSource`，您无法修改`Items`集合，因为项目是从数据源自动填充的。

改为更改数据源，这将是背后的数据结构`_empComponent.GetEmpCodeWithName()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:26:29.413

改为在 DataSource 列表中进行更改 - 在分配之前将其保存在 sime provate 字段中，

```
if (_empComponent == null)
    _empComponent = new EmployeeComponent();

_myPrivateCollection = _empComponent.GetEmpCodeWithName();
lstEmployeelist.DataSource = _myPrivateCollection;
lstEmployeelist.ValueMember = "Empno";
lstEmployeelist.DisplayMember = "FirstName"; 
```

需要时，更改并重新分配 DataSource：

```
//I don't know your logic here, but probably there is a bug - you are modifying collection and then use old index position - you'll get unexpected results =). Let you fix it on your own, so just rewrite your code
for (int i = 0; i <= lstEmployeelist.SelectedIndices.Count; i++ )
{
    var index = lstEmployeelist.SelectedIndices[i]
    object item = _myPrivateCollection[index];

    _myPrivateCollection.Add(item);
    _myPrivateCollection.RemoveAt(index);
}
lstEmployeelist.DataSource = null;
lstEmployeelist.DataSource = _myPrivateCollection; 
```

请注意，这种技术不应该经常用于非常大的列表，因为它操作缓慢。但这是满足您需求的最简单方法。

# javascript - 在 Backbone.js 应用程序中进行搜索的想法

> ID：15787261
> 
> 赞同：0
> 
> 时间：2013-04-03T12:22:12.527
> 
> 标签：javascript, backbone.js

***我现在拥有的***

* * *

*   产品型号/视图；
*   产品集合；
*   产品列表视图；
*   相当直接的寻呼机视图；
*   当然还有路由器；

*路由器*

```
var AppRouter = Backbone.Router.extend({
    routes: {
        '': 'list',
        '!/products': 'list',
        '!/products/page/:page': 'list'
        //, '!/search/:term/:page': 'some_handler'
    }
});

appRouter.on('route:list', function(page) {
    renderProductsList(page);
}); 
```

[寻呼机及其模板可以在那里找到](http://jsfiddle.net/challenger/SVLJs/2/)

```
var renderProductsList = function(page) {
    require(['collections/ProductsList', 'views/ProductListView', 'views/PagerView'], 
    function(ProductsList, ProductListView, PagerView) {
        var p = page ? parseInt(page, 10) : 1;
        var productsList = new ProductsList();
        productsList.fetch({
            success: function() {
                var $container = $("#content-region");
                $container.html(new ProductListView({
                    model: productsList,
                    page: p
                }).el);

                // attach pager
                var $pager = new PagerView({
                    // pager options
                }).$el;
                // ...
            },
            error: function() {
                // handle the error
            }
        });
    });
} 
```

* * *

***问题***

*   我应该重用`renderProductsList`方法吗？
*   我知道像`where`,之类的函数`filter`可以在集合上调用吗？我该如何使用它？
*   我应该缓存获取的结果吗？
*   如何重复使用我的寻呼机？`options`我应该在参数中传递 url 模式吗？
*   好吧......我如何重建我的应用程序以使其可以通过例如这条路线进行搜索`!/search/:term/:page`

* * *

**我对使用不感兴趣`Backbone.Pagination`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:23:32.657

如果我理解正确，您只有一个产品列表，并且想创建一些过滤器。因此，您想知道如何做到这一点。好吧，我会说这取决于很多因素。
无论如何，您是否在开始时获取所有内容？如果是，那么，当然你只会使用 JS。如果不是：
缓存结果？好吧，我不知道你会怎么做，或者我猜这真的很麻烦。还是要看：传输的数据量大吗？..要考虑的东西还挺多的，问题就从路由器开始。只调用一个路由（Backbone 绝对不能调用多个路由，它将在第一个匹配的模式处停止，与您拥有的路由器数量无关），您必须加载搜索页面，进行过滤，然后去到正确的页面。
tl;dr：我认为我们没有足够的信息来真正帮助您。

至于如何使用`where`等等，我认为[Backbone 的文档](http://backbonejs.org/#Collection)在这个主题上非常完整（我真的不知道你想知道什么）。

# c# - 使用 Delegates 模拟连接的对象

> ID：15787263
> 
> 赞同：2
> 
> 时间：2013-04-03T12:22:21.493
> 
> 标签：c#, delegates

我正在编写一个应用程序，我需要在其中模拟电力或天然气等资源在以任意方式相互连接的大型对象网络之间的分布。不需要模拟物理。只是当对象请求资源时资源单元的流动。

考虑下图：

```
ObjA <---> ObjB <---> PwrA <---> ObjF
            /\                                ObjG
   ObjE<---/  \---> PwrB 
```

当**Obj对象请求时，** **Pwr**对象可以提供资源电力。我在这里需要模拟的是，如果 ObjA 需要 50 电，它应该向所有连接的对等方发送一条消息，而不关心它去往谁，并且应该只从它直接或间接连接到的对等方取回资源。

 **我没有在这里模拟延迟或任何东西，因此传输将是即时的。从编程的角度来看，这完全是应用程序本地的（没有真正的网络或类似的东西）。

我在这里的挑战是尝试以模块化和干净的方式对其进行编程。我想避免本地连接节点的巨大列表和关于如何处理消息的大型 ifelse 语句（如果可能）。

我既想实现我的目标，又想学习一些新东西。几周以来，我一直在阅读文章、书籍和编程概念，我认为可能是一个很棒的解决方案是 C# Delegates。

我已经完成了一些原型设计并设法使用 MessageOut Delegate 设置对象，其他连接的对象可以订阅并侦听要处理的传出消息。

这工作得很好，但由于我对这个概念没有经验，我有以下缺点：

*   我不知道如何处理连接对象之间的消息传递的循环引用： 上图中如果ObjB广播消息为电力ObjA，PwrA，PwrB，ObjE会被通知，依次所有处理，然后通知ObjB . 这将反过来通知...等。网络处理这个问题的方式是简单地广播所有端口（监听委托的对象），除了接收它的端口。我怎样才能用代表来实现呢？平面广播是行不通的。
*   倾听代表有效地创建单向沟通。为了实现双向通信，我需要让对象互相监听传出消息。但是如果没有上述内容，它肯定是另一个循环引用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:24:46.740

在我看来，代表会变得笨拙和混乱。

你看过 TPL 数据流吗？[http://msdn.microsoft.com/en-gb/library/hh228603.aspx](http://msdn.microsoft.com/en-gb/library/hh228603.aspx)

它提供了许多具有排队请求、发送请求等行为的“块”，您可以使用它来模拟这些虚拟资源的推送和拉取。

将它们连接在一起和处理循环依赖关系的所有魔法都得到了照顾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:43:21.793

如果您正在处理事件，您会注意到最佳实践是在每个事件委托中都有一个“发送者”对象和一个“EventArgs”。

我不得不这样做一次，而提出的解决方案是将“OriginalSender”添加到 EventArgs 派生类中。

每条收到的消息都首先传递到一个 if 语句中：

```
class MyEventListenerClass
{
     .....
    private void EventHandlerMethod(object sender, MyEventArgs E)
    {
        if (E.OriginalSender != this)
        { 
            do what is needed
        }
        else
        {
            got this message from myself in a circular way....discard it
        }
    }
     ......
}

class MyEventArgs : EventArgs
{
    public object OriginalSender {get; private set;}
    public MyEventArgs(object OrigSender) : base ()
    {
        OriginalSender = OrigSender;
    }
} 
```

但这并不能解决所有问题。就我而言，没有任何循环不包含原始发件人。如果消息陷入这样的循环，它将是无限的。所以也许发件人列表可以解决它，使`if (E.SenderList.Contains(this)) {...}`. 因此，每次收到消息时，接收者都会检查列表是否包含自身。如果不是，他发送消息，将自身添加到发件人列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:31:28.717

似乎你在正确的轨道上......它实际上是称为观察者/监听器设计模式......你应该使用 C# 中的事件来更好地实现该模式。事件基本上是一种委托，您可以在 MSDN 或 Google 中找到更多信息...

关于循环问题：

您只需将发件人列表与消息一起传递.. 并且每个对象都必须检查他是否是该列表中的发件人之一，并决定他是否应该发送梅西的天气。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:34:46.687

我不认为代表是解决您提出的问题的好方法。让我们看一下以下场景：

ObjB 需要 1 个电力单位，现在，假设它有一个名为“GetElectricity”的委托，正如我从您所写的内容中了解的那样，PwrA、PwrB 都为委托添加了一个处理程序，PwrA 和 PwrB 处理程序都将被调用，或者您将尝试第一个处理程序，如果它没有提供所需的电力，它将尝试下一个处理程序……这将创建一个复杂、难以维护的软件。

你在说什么（或者至少，我会做什么:)），是事件，ObjB 将为 NeedElecricty 引发一个事件，所有 Pwr 对象都已注册它，如果它们可以提供电力，他们将调用一个事件“ProvideElectricity " 在 ObjB 上，ObjB 可以决定他将从其中哪一个获得他需要的电源，并通知他们他需要来自 PwrA 的 1 个电源单元（并会告诉 PwrB 他不需要它服务）。

寻找观察者和事件，因为这是您主要谈论的内容。

* * *

我同意@Clint，TPL 数据流是最好的解决方案，因为它完全符合您的要求。但正如你所说，它超出了范围。**

# javascript - sAjaxSource 参数

> ID：15787267
> 
> 赞同：4
> 
> 时间：2013-04-03T12:22:36.170
> 
> 标签：javascript, asp.net-mvc, jquery, datatables

如果我有一个 sAjaxSource，我可以通过它传递参数以使我的页面更灵活吗？这是我现在的样子：

```
"sAjaxSource": "Data/IndustryTable?region_type=4&region_code=51&ind_min=10&ind_max=99" 
```

最终目标是当用户登陆页面时，预定义参数加载特定数据。在用户对更新参数的其他信息进行选择之后，然后更新数据表。

这是大多数准备好的功能

```
 $(document).ready(function () {
        var anOpen = [];
        var oTable = $('#VADataTable').dataTable
        ({
            //                "sDom": 'T<"clear">lfrtip',
            //                "oTableTools":
            //                        {
            //                            "sSwfPath": "/swf/copy_csv_xls_pdf.swf"
            //                        }, //flash must be enabled
            "iDisplayLength": 5, //defalut amount of rows shown on page                
            "bServerSide": false, //uses sever for filter curently turned off                                                
            "bFilter": false, //makes columns clickable to filter 
            "bProcessing": true,
            //"bserverSide":true,
            "bJQueryUI": true, //enables user interface 
            "bSort": true, //sorting for columns                               
            "bScrollInfinite": true, //using this takes away ddl of selection                
            "sAjaxSource": "Data/IndustryTable?region_type=4&region_code=51&ind_min=10&ind_max=99",   //where ajax commands renders results                              
            "sScrollY": "200px",
            "sScrollX": "100%",
            "sScrollXInner": "100%",
            "bScrollCollapse": true, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-27T19:50:45.793

使用您的示例代码，它看起来像这样：

```
$(document).ready(function () {
var anOpen = [];
var oTable = $('#VADataTable').dataTable
({
    //                "sDom": 'T<"clear">lfrtip',
    //                "oTableTools":
    //                        {
    //                            "sSwfPath": "/swf/copy_csv_xls_pdf.swf"
    //                        }, //flash must be enabled
    "iDisplayLength": 5, //defalut amount of rows shown on page                
    "bServerSide": false, //uses sever for filter curently turned off                                                
    "bFilter": false, //makes columns clickable to filter 
    "bProcessing": true,
    //"bserverSide":true,
    "bJQueryUI": true, //enables user interface 
    "bSort": true, //sorting for columns                               
    "bScrollInfinite": true, //using this takes away ddl of selection                
    "sAjaxSource": "Data/IndustryTable",   //I use a custom .aspx page for my source
    "fnServerParams": function ( aoData ) {
         aoData.push( { "name": "region_type", "value": "4" },
                      { "name": "region_code", "value": "51"},
                      { "name": "ind_min", "value": "10"},
                      { "name": "ind_max", "value": "99"} );
    },                      
    "sScrollY": "200px",
    "sScrollX": "100%",
    "sScrollXInner": "100%",
    "bScrollCollapse": true,
    ... 
```

这样的设置将传递所有正常的 Datatables 参数以及 region_type、region_code、ind_min 和 ind_max。

在 sAjaxSource 代码中，您可以像正常一样检索这些参数（我使用 VB）

```
 Dim RegionType As Integer = Request("region_type") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-24T08:38:56.750

显然 fnServerParams 不适用于旧版本的数据表。使用 PHP 怎么样：

```
...
"bScrollInfinite": true, //using this takes away ddl of selection                
"sAjaxSource": "Data/IndustryTable?region_type=<?=$_GET['region_type'];?>&region_code=<?=$_GET['region_code'];?>&ind_min=<?=$_GET['ind_min'];?>&ind_max=<?=$_GET['ind_max'];?>",   //where ajax commands renders results                              
"sScrollY": "200px",
... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T12:35:49.570

您想要使用的方式不是 datatbles 使用的方式，因此请尝试使用[fnServerParams](http://datatables.net/ref)：

```
$('#example').dataTable( {
    "bProcessing": true,
    "bServerSide": false,
    "sAjaxSource": "scripts/server_processing.php",
    "fnServerParams": function ( aoData ) {
      aoData.push( { "name": "more_data", "value": "my_value" } );
    }
  } ); 
```

# javascript - Javascript 导航外部链接

> ID：15787270
> 
> 赞同：0
> 
> 时间：2013-04-03T12:22:40.887
> 
> 标签：javascript, jquery

我再次需要你的帮助。我有一个带导航的功能区。它并没有真正做任何事情，它只是从活动/可见“切换”链接，这没关系。但是，我想实现这一点，如果用户点击外部链接（示例中 profile-nav 中的第三个 li），它会将他带到链接中的 url。非常感谢你！

HTML：

```
<div class="ribbon">
    <nav>
        <ul class="profile-nav">
              <li class="active"><a href="#" title="My Account">My Account</a></li>
              <li><a href="#" title="Login">Login</a></li>
              <li><a href="http://www.google.com" title="External link">External link</a></li>
        </ul>
        <ul class="lang-nav">
            <li class="active"><a href="#" title="English (US)">English (US)</a></li>
            <li><a href="#" title="English (UK)">English (UK)</a></li>
            <li><a href="#" title="Deutsch">Deutsch</a></li>
            <li><a href="#" title="Italiano">Italiano</a></li>
            <li><a href="#" title="Русский">Русский</a></li>
        </ul>
        <ul class="currency-nav">
            <li class="active"><a href="#" title="$US Dollar">$US Dollar</a></li>
            <li><a href="#" title="€ Euro">€ Euro</a></li>
            <li><a href="#" title="£ Pound">£ Pound</a></li>
        </ul>
    </nav>
</div> 
```

JAVASCRIPT

```
$(document).ready(function () {
        $('.ribbon li').hide();
    $('.ribbon li.active').show();
    $(".ribbon li a").click(function() {
        $(".ribbon li").hide();
        if ($(this).parent().parent().hasClass('open'))
            $(this).parent().parent().removeClass('open');
        else {
            $(".ribbon ul").removeClass('open');
            $(this).parent().parent().addClass('open');
        }
        $(this).parent().siblings().each(function() {
            $(this).removeClass('active');
        });
        $(this).parent().attr('class', 'active'); 
        $('.ribbon li.active').show();
        $('.ribbon ul.open li').show();
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:32:38.083

有很多方法可以实现您想要的。按照您的方法，我建议`class="nolink"`您在不需要遵循外部链接的锚点中添加一个。之后将点击事件绑定到相应的“a.nolink”。

HTML 如下所示：

```
<div class="ribbon">
    <nav>
        <ul class="profile-nav">
          <li class="active"><a href="#" class="nolink" title="My Account">My Account</a></li>
          <li><a href="#" class="nolink" title="Login">Login</a></li>
          <li><a href="http://www.google.com" title="External link">External link</a>            </li>
        </ul>
        <ul class="lang-nav">
            <li class="active"><a href="#" class="nolink" title="English (US)">English (US)</a></li>
            <li><a href="#" class="nolink" title="English (UK)">English (UK)</a></li>
            <li><a href="#" class="nolink" title="Deutsch">Deutsch</a></li>
            <li><a href="#" class="nolink" title="Italiano">Italiano</a></li>
            <li><a href="#" class="nolink" title="Русский">Русский</a></li>
        </ul>
        <ul class="currency-nav">
            <li class="active"><a href="#" class="nolink" title="$US Dollar">$US Dollar</a></li>
            <li><a href="#" class="nolink" title="€ Euro">€ Euro</a></li>
            <li><a href="#" class="nolink" title="£ Pound">£ Pound</a></li>
        </ul>
    </nav>
</div> 
```

和绑定你的元素的javascript：

```
$(".ribbon li a.nolink").click(function() { ... 
```

# c++ - C++ 为下一次迭代保留索引？

> ID：15787277
> 
> 赞同：-2
> 
> 时间：2013-04-03T12:22:56.290
> 
> 标签：c++

我有一个循环，我想在其中保留下一次迭代的值。我决定使用`std::vector`它（尽管我不知道这是否是最好的方法）但是当我检查`if(bottomMap[i] == true)`它时它不会编译。

```
vector<bool> bottomMap;
for (int i = 0; i < str.size() ; i++){
    if (str[i] != ' ') {
        cout << "XXXX";
    } else {
           if (bottomMap[i] == true)
            cout << "YYYY";
        else
            cout << "X";
        }
    }
    vector <bool> bottomMap(topMap);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:34:39.043

bottomMap 必须在循环开始之前存在

```
for (int i = 0; i < str.size() ; i++){
    if (str[i] != ' ') {
        cout << "XXXX";
    } else {
           if (bottomMap[i] == true) //< ERROR: bootomMap here is not declred.
            cout << "YYYY";
        else
            cout << "X";
        }
    }
    vector <bool> bottomMap(topMap); //< Declared here, but destroyed to the very next '}'
} 
```

尝试这个

```
vector <bool> bottomMap(topMap);   //< MOVED HERE
for (int i = 0; i < str.size() ; i++){
    if (str[i] != ' ') {
        cout << "XXXX";
    } else {
           if (bottomMap[i] == true)
            cout << "YYYY";
        else
            cout << "X";
        }
    }
                                  ///< AND NOMORE HERE
} 
```

建议：保持打开和关闭大括号对齐：这将花费更多的行，您将很容易找到事物何时开始和结束它们的存在

这是您的代码，重新对齐：

```
for (int i = 0; i < str.size() ; i++)
{
    if (str[i] != ' ')  
    {
        cout << "XXXX";
    } 
    else 
    {
        if (bottomMap[i] == true) //< ERROR: bottomMap here is not declared.
            cout << "YYYY";
        else
            cout << "X";
    }
}
vector <bool> bottomMap(topMap); //< Declared here, but too late!
} //< ERROR: TOO CLOSED BRACES 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:25:23.040

`bottommap`因为在你使用它的地方不知道它的定义。你必须在使用它之前定义它。

# iphone - 在 iPhone 中播放流媒体视频

> ID：15787279
> 
> 赞同：0
> 
> 时间：2013-04-03T12:23:03.160
> 
> 标签：iphone, ios, objective-c, xcode, mpmoviewcontroller

我正在尝试通过使用 MPMoviewPlayerController 实时流式传输在我的应用程序中播放视频，它对于保存在我的捆绑包中的那些视频工作正常，但它不适用于实时流式传输我正在使用这个

```
 //for Bundle Video
     NSString *urlStr = [[NSBundle mainBundle] pathForResource:@"Video.mp4" ofType:nil];

//for Streaming Video
    NSURL *videoURL = [NSURL URLWithString:@"http://streaming.disponivel.uol.com.br/video360p2/288148-1192657.mp4"];

    self.playerController = [[MPMoviePlayerViewController alloc] initWithContentURL:videoURL];
    [self.view addSubview:self.playerController.view];
    self.playerController.view.frame = CGRectMake(0, 0, 320, 400);
    [self.playerController.moviePlayer play]; 
```

我如何流式传输实时视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:08:04.497

请使用以下代码从包中获取 Mp4 文件

```
 NSString *url = [[NSBundle mainBundle] pathForResource:@"Video" ofType:@"mp4"];
   MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:url]]; 
```

愿这有助于解决您的问题

**已编辑**

```
NSURL *url = [NSURL URLWithString:@"http://streaming.disponivel.uol.com.br/video360p2/288148-1192657.mp4"];
moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
[moviePlayer setControlStyle:MPMovieControlStyleDefault];
moviePlayer.scalingMode = MPMovieScalingModeAspectFit;
CGRect frame;
if(self.interfaceOrientation ==UIInterfaceOrientationPortrait)
    frame = CGRectMake(20, 69, 280, 170);
else if(self.interfaceOrientation ==UIInterfaceOrientationLandscapeLeft || self.interfaceOrientation ==UIInterfaceOrientationLandscapeRight)
    frame = CGRectMake(20, 61, 210, 170);
[moviePlayer.view setFrame:frame];  // player's frame must match parent's
[self.view addSubview: moviePlayer.view];
[self.view bringSubviewToFront:moviePlayer.view];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:moviePlayer];

[moviePlayer prepareToPlay];
[moviePlayer play]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T11:33:44.057

我不知道确切的原因，但**MPMoviePlayerController**需要声明为一个强属性。如果你没有强烈声明它的属性，那么只会出现黑色视图。

所以为 MPMoviePlayerController 声明一个强属性

```
@property (strong, nonatomic) MPMoviePlayerController *moviePlayer; 
```

和

```
NSURL *url = [NSURL URLWithString:@"http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8"];
self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
[self.moviePlayer setControlStyle:MPMovieControlStyleDefault];
self.moviePlayer.scalingMode = MPMovieScalingModeAspectFit;
CGRect frame = CGRectMake(20, 80, 280, 280); //change according to your need

[self.moviePlayer.view setFrame:frame];  // player's frame must match parent's
[self.view addSubview: self.moviePlayer.view];
[self.view bringSubviewToFront:self.moviePlayer.view];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:self.moviePlayer];

[self.moviePlayer prepareToPlay];
[self.moviePlayer play]; 
```

和

```
- (void) moviePlayBackDidFinish:(NSNotification*)notification {
    NSError *error = [[notification userInfo] objectForKey:@"error"];
    if (error) {
       NSLog(@"Did finish with error: %@", error);
     }
 } 
```

# email - 无法从 liferay hook 发送邮件

> ID：15787282
> 
> 赞同：2
> 
> 时间：2013-04-03T12:23:04.643
> 
> 标签：email, liferay, hook, sendmail

我正在尝试从同时使用 MailEngine 和 MailServiceUtil 的钩子发送电子邮件，但我还不能发送它。我的代码如下：

```
InternetAddress from=null;
InternetAddress to=null;
try {
 from = new  InternetAddress("test@test.com", "Admin admin");
 to = new InternetAddress(newUser.getEmailAddress(), newUser.getFirstName());
} catch (UnsupportedEncodingException e) {
 // TODO Auto-generated catch block
 e.printStackTrace();
} 
MailMessage mailMessage = new MailMessage();

mailMessage.setFrom(from);
mailMessage.setTo(to);

mailMessage.setBody(body); 
mailMessage.setSubject(subject);
MailServiceUtil.sendEmail(mailMessage); 
```

在此我收到以下错误，

```
java.lang.LinkageError: loader constraint violation: when resolving method "com.liferay.portal.kernel.mail.MailMessage.setFrom(Ljavax/mail/internet/InternetAddress;)V" the class loader (instance of org/apache/catalina/loader/WebappClassLoader) of the current class, com/lftechnology/sbworkbench/hooks/createaccount/CustomCreateAccountAction, and the class loader (instance of org/apache/catalina/loader/StandardClassLoader) for resolved class, com/liferay/portal/kernel/mail/MailMessage, have different Class objects for the type javax/mail/internet/InternetAddress used in the signature 
```

我在 liferay 安装中找到了一个 mail.jar 文件，但我无法使用它。我尝试使用 artifactid com.sun 在我的 pom 文件中导入 javax.mail，但仍然出现此错误。这里有人知道问题是什么吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:55:19.613

我最好的猜测是您的类路径上有多个版本的 mail.jar（或包含相同代码的各种其他化身）。您说，您在 tomcat 中找到了 mail.jar - 我猜它也包含在您的 web 应用程序的 WEB-INF/lib 中：从那里删除它，您的 webapp 必须使用 tomcat 全局类路径中的那个。

您可以在 Maven 中将依赖项配置为“已提供”，以便 Maven 知道您将依赖该代码，但不会将其与您的应用程序一起部署

提出您的评论：不要只是“重新部署”，而是取消部署（删除 Web 应用程序），否则 tomcat 可能会保留您之前提供的库。因此，您不会再次复制它们，但它们仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:08:30.790

我忘记从已部署项目的 WEB-INF 中删除 mail.jar 文件，并且使用设置为提供的依赖项再次部署并不会自动删除该文件。

所以我从 webapp 页面中删除了该项目并重新部署了该项目。因此它奏效了。

# javascript - 画布渲染

> ID：15787287
> 
> 赞同：1
> 
> 时间：2013-04-03T12:23:26.327
> 
> 标签：javascript, html, image, canvas

如果你尝试在画布宽度和高度之外渲染图像，计算机还会尝试渲染它并使用资源来尝试渲染它吗？我只是想知道在尝试渲染之前检查图像是否在画布内是否更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:21:16.433

我相信它仍然在无限大的不可见平面上进行渲染，因此以编程方式检测对象是否“可见”是明智的，就像您希望在任何其他编程语言中做的那样。如果你不需要，通过逻辑是没有意义的。

[从画布的规范中](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#drawing-model)看到这一点：

> 当绘制一个形状或图像时，用户代理必须按照给定的顺序执行这些步骤（或像他们那样做）：
> 
> 将形状或图像渲染到无限透明的黑色位图上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:29:41.663

我认为当您想要优化性能时，您需要构建测试器，根据负载检查每秒帧数。并检查变化和没有变化，这样你就可以确定什么是正确的。看这里在页面的左上角 web [Demo tester by frame per secend](http://codeincomplete.com/projects/racer/v4.final.html)

# java-ee-6 - Java EE 6中Spring框架的使用

> ID：15787305
> 
> 赞同：0
> 
> 时间：2013-04-03T12:24:23.227
> 
> 标签：java-ee-6, java-ee-5

我一直在研究Java EE 6，想问一下，构建Java EE 6 时是否需要Spring？我了解到它在 Java EE 5 中是必要的，但在 Java EE 6 中不是；这是真的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:29:13.167

Spring 不是 Java Enterprise Edition (Java EE) 的规范。它是一个框架。您可以根据 Java EE 版本使用特定版本的 Spring。我们在 Java EE 5 上使用 Spring3.0，但它也可以在 Java EE 6 上使用。没有什么能阻止您使用基于 Java EE 版本的 Spring。

# ruby - 使用 Rmagic（图像魔法）将动画 gif 转换为一张图像

> ID：15787307
> 
> 赞同：0
> 
> 时间：2013-04-03T12:24:25.833
> 
> 标签：ruby, carrierwave, rmagick

我知道有一种方法可以使用 Rmagic 将多个图像转换为 gif 动画，但是我想做相反的事情。上传动画 gif 时，我希望它是非动画的，我该怎么做？（图像流中的单个/任何图像都足够好）

我将使用它作为带有[Rmagic](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=https://github.com/jnicklas/carrierwave&ei=zB5cUeM8r5rUBcL2gKgJ&usg=AFQjCNFD144z6Z-4eSvqdq-AD1XZrLgEWg&sig2=TQlJIhVYgiyzRxUFGYw42A&bvm=bv.44697112,d.d2k)再处理缩略图的载波的一部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:56:57.277

来自[https://stackoverflow.com/a/13441569/473040](https://stackoverflow.com/a/13441569/473040)

```
class DocumentUploader < CarrierWave::Uploader::Base
include CarrierWave::RMagick
#...

    version :thumb do
      process :remove_animation
      process :resize_to_fill => [300,200]

      #....
    end    

    def remove_animation
      # this will keep only first image of animated gif
      manipulate! do |img, index|
      index == 0 ? img : nil
    end

end 
```

谢谢 Padde 和 Tiago Franco

# file - FORTRAN 90 如何找出文件夹中的文件数

> ID：15787308
> 
> 赞同：2
> 
> 时间：2013-04-03T12:24:26.150
> 
> 标签：file, fortran, directory, fortran90

快速怀疑，我需要从一个文件夹中读取所有文件，但我不知道有多少文件。

我知道如何打开它们，只是不知道何时停止，即当所有文件都被读取时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:50:01.840

如果你有一定的规则来生成文件名（如mydata001.dat、mydata002.dat等），那么你可以在每次生成文件名时，用`inquire`语句检查文件是否存在。第一次不存在，可以停止。下面的程序演示了：

```
program proba
  implicit none

  character(len=20) :: buffer
  logical :: exist
  integer :: ind

  ind = 1
  fileloop: do
    write(buffer,"(A,I3.3,A)") "mydata", ind, ".dat"
    inquire(file=buffer, exist=exist)
    if (.not. exist) then
      write(*,*) "File '", trim(buffer), "' not found, exiting loop"
      exit
    end if
    write(*,*) "File: '", trim(buffer), "' found."
    ind = ind + 1
  end do fileloop

end program proba 
```

或者，如果无法根据规则生成文件名，您可以使用一些能够获取目录中文件列表的库。一种可能是我的[modFileSys](https://bitbucket.org/aradi/modfilesys/)库，您可以通过以下方式对任意目录内容执行此操作：

```
program test_ls
  use filesys_module

  type(dirdesc) :: dir
  character(:), allocatable :: path

  call opendir("./", dir)
  path = dir%next_filename()
  do while (len(path) > 0)
    write(*, "(A)") path
    path = dir%next_filename()
  end do

end program test_ls 
```

# sql-server - 手动将记录插入 SQL Server 2008 更改跟踪表？

> ID：15787309
> 
> 赞同：0
> 
> 时间：2013-04-03T12:24:29.000
> 
> 标签：sql-server, change-tracking

我想在我的一些表上启用 SQL Server 2008 的更改跟踪。我还有一些现有的历史数据，我们正在以另一种方式跟踪这些数据，我们希望将这些数据与变更表结合起来。有没有办法手动将数据插入更改表，以便我可以将这些历史数据包含在新的更改数据中？

# java - 列出具有不同对象的列表

> ID：15787316
> 
> 赞同：2
> 
> 时间：2013-04-03T12:24:37.897
> 
> 标签：java

可以说我有

```
class Person {
    String Age;
    String Name;
}

Class Employee  {
    int Salary;
    String Name;
} 
```

我在列表中有这些类的各种实例。我创建了 2 个单独的函数来接受`List<Person>`和`List<Employee>`显示内容。但我想创建一个接受任何对象列表并执行显示部分的通用函数。

请帮我

谢谢阳光

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T12:27:06.130

最简单的解决方案是让`Employee`继承自`Person`. 这是很自然的，因为 Employee 很可能**是**Person。它们甚至共享一些属性，例如`Name`（您已经在代码中拥有的）和`Age`.

```
class Person {
    String Age;
    String Name;
}

class Employee  extends Person {
    int Salary;
    // String Name; not needed anymore, inherited from Person
} 
```

然后，有一个 Persons 列表就足够了`List<Person>`，您可以在其中存储两种对象类型。

如果您出于任何原因仍需要将它们分开，您可以添加一个公共父类或接口。理想情况下，将必要的方法（如显示）添加到界面中并让类实现它们：

```
interface Human {
   void showMe();
}

class Person implements Human {
    String Age;
    String Name;

    public void showMe() { System.out.println("I am a Person!");  }
}

class Employee implements Human {
    int Salary;
    String Name;

    public void showMe() { System.out.println("I am an Employee!");  }
} 
```

然后，您可以使用`Human`s 的列表来存储这两种对象类型。迭代变得非常容易：

```
List<Human> humanList = new ArrayList<>();
// ... Populate the list with Persons and Employees

for(Human human : humanList) {
    human.showMe();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:33:00.333

我还没有测试过，但是像这样：

```
public interface MyInterface{
public void display();
}

class Person implments MyInterface{

String Age;
String Name;

@Override
public void display(){
   //Logic to print the data
}
}

Class Employee  implments MyInterface{
int Salary;
String Name;
@Override
public void display(){
   //Logic to print the data
}
}

public class MyTest{

public static void main(String[] args){

  List<MyInterface> myList = new ArrayList<MyInterface>();

    MyInterface p = new Person();
    MyInterface e = new Person();
    myList.add(p);
myList.add(e);
printMyList(myList);

}

private void printMyList(  List<MyInterface> myList){
   for(MyInterface my:myList){
     my.display();
}
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:31:03.123

我应该让 Employee 扩展 Person，这样你就可以有一个通用的函数来显示。

另一种方法是为 Person 和 Employee 提供一个通用接口，具有相同的显示功能，但有两种不同的实现。

# c++ - 编写和显示图像 OpenCV

> ID：15787319
> 
> 赞同：0
> 
> 时间：2013-04-03T12:24:39.340
> 
> 标签：c++, opencv

我正在录制视频片段并在每一帧上执行各种图像处理方法以获得所需的结果。

现在，一旦我得到我正在寻找的结果，我想在我的硬盘上捕获并存储一个特定的帧。

为此，我使用 imwrite 函数将帧写入 jpg。然后我使用 imshow 在名称窗口中显示此框架。

问题是，当满足存储图像的所有条件时，我的程序而不是存储图像，会给我一个运行时错误.......

这是代码：

```
for(vector<double>::iterator iter_dis = Left_Point_distance.begin(); iter_dis != Left_Point_distance.end();++iter_dis)
    {

        if(*iter_dis > 20 && center.y >= 120 && center.x >=510 && Box[0].width > Box[0].height)
        {

            char* window_Punches = "Punches";
            namedWindow(window_Punches ,1);

            Mat Hook;

            imwrite("C:\\Hook.jpg", Hook);
            imshow(window_Punches, Hook);

        }

        if(*iter_dis >20 && center.y <=60)
        {

        }

    } 
```

浏览opencv教程这就是它的完成方式，但在我的情况下不起作用......

此外，所有过程都在无限循环中进行，视频帧存储在 Mat 帧中；然后使用 imshow 函数将其显示在窗口中。

任何人都可以发现这里做错了什么......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:27:51.657

您定义了 Mat Hook，但在尝试使用 imwrite() 编写时它是空的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:28:01.370

你对这段代码有什么期望：

```
 Mat Hook;

  imwrite("C:\\Hook.jpg", Hook);
  imshow(window_Punches, Hook); 
```

您创建一个空矩阵并使用它。

# hibernate - 异常字段 'DISCRIMINATOR' 没有默认值

> ID：15787326
> 
> 赞同：0
> 
> 时间：2013-04-03T12:24:59.023
> 
> 标签：hibernate

我有以下映射文件。

```
<hibernate-mapping>
<class name="One" abstract="true">
       <id name="id" type="long" column="ID">
            <generator class="assigned"/>
        </id>
         <discriminator column="DISCRIMINATOR" type="string" />

        <union-subclass name="Two" table="TWO">
        .
        .
        </union-subclass>
        <union-subclass name="Three" table="THREE">
        .
        .
        </union-subclass>
</class>
</hibernate-mapping>

<hibernate-mapping>
    <subclass name="TWOSUB" extends="TWO">
        .
        .
    </subclass>
</hibernate-mapping> 
```

当我尝试添加 TWOSUB 的对象时，它会引发以下异常字段 'DISCRIMINATOR' 没有默认值。

上面的映射有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T13:00:00.927

您需要将 discriminator-value="YOUR_CUSTOM_SUBCLASS_DISCRIMINATOR_VALUE" 添加到使用鉴别器相互区分的所有类标签（因此映射到同一个表中）。否则 hibernate 不知道使用哪个鉴别器值来区分它们。

但是，我认为不可能用使用鉴别器的子类来扩展联合子类——你要么必须为你的类 TWOSUB 使用另一个联合子类，要么根本不使用联合子类从一个继承两个。至少 union-subclass 标签没有 discriminator-value 属性，因此无法区分 TWO 和 TWOSUB。

# javascript - jQuery Select2 插件：重置

> ID：15787331
> 
> 赞同：1
> 
> 时间：2013-04-03T12:25:20.820
> 
> 标签：javascript, jquery-plugins, jquery-select2

我希望能够重置（*即*空值和设置占位符，如在“新”上）一个*Select2*下拉菜单。更准确地说，我有依赖下拉菜单，清除一个应该清除依赖下拉菜单。

例如，我可以有国家、地区和城市：清除国家应该清除地区和城市。

我尝试了几件事，但从未能够以编程方式触发清除。最明显的一个是，`$('#my-select').empty()`但占位符没有重新设置，并且选定的值仍然存在（即使它没有显示）。

使用`$('#my-select').select2('data', {})`(or `$('#my-select').select2('data', null)`) 不会产生预期的结果并出现错误：

> 错误：当附加到元素时，Select2 不允许使用选项“数据”。

有没有有效的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:20:40.220

好...

这是一种方式，它正在研究一个最小的例子（见下文）。在此示例中，第二个选择不会在重置时恢复它的占位符（假设它几乎可以工作）。这意味着我正在处理的遗留代码在某个地方存在问题（鉴于错误，我猜 JSP 标记会生成一个`<select>`.

这个问题似乎不是我要找的地方。

所以这是解决方案（但不是我真正问题的解决方案）。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Select2 example</title>
    <link href="select2-release-3.2/select2.css" media="all" rel="stylesheet" type="text/css" />
</head>
<body>

    <fieldset>
        <legend>Example</legend>

        <label for="first-select">First</label>
        <input id="first-select" />

        <label for="second-select">Second (depends on first)</label>
        <input id="second-select" />

    </fieldset>

    <script src="jquery-1.9.1.min.js"></script>
    <script src="select2-release-3.2/select2.js"></script>

    <script type="text/javascript">
        $(function() {

            var secondData = [{id:0,text:'1'},{id:1,text:'2'},{id:2,text:'3'},{id:3,text:'4'}];

            $(document).ready(function() {
                // Init first dropdown.
                $('#first-select').select2({
                    allowClear: true, 
                    placeholder: 'Select a value',
                    data: [{id:0,text:'A'},{id:1,text:'B'},{id:2,text:'C'},{id:3,text:'D'},{id:4,text:'E'}]
                });

                // Init second dropdown.
                $('#second-select').select2({
                    allowClear: true, 
                    placeholder: 'Select a value',
                    data: {}
                });
            });

            $(document).on('change', '#first-select', function() {
                if ($(this).val() == "") {
                    // Clear second
                    $('#second-select').select2({
                        allowClear: true, 
                        placeholder: 'Select a value',
                        data: {}
                    });
                } else {
                    // Fill second
                    $('#second-select').select2({data: secondData});
                }
            });
        });
    </script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T13:05:24.097

在 Select2 v3.4.1 中，我从 UL 中删除了 Li 元素，但只删除了“select2-search-choice”标签：

```
$('.select2-search-choice').remove(); 
```

# c++ - c++ substr Visual Studio 2008

> ID：15787336
> 
> 赞同：1
> 
> 时间：2013-04-03T12:25:31.243
> 
> 标签：c++, visual-studio-2008

我在 Visual Studio 2008 Forms 环境中尝试了这个简单的例子：

```
String^ textn;
textn = this->dateTimePicker1->Value.ToString();
textn = textn.substr(0, 7); 
```

这没有与神秘的消息一起编译：

```
1>        type is 'System::String ^'
1>        did you intend to use '->' instead? 
```

我已经用谷歌搜索了大约 1 小时，找出它失败的原因，但我找不到答案。我通常编写 C# 代码，但由于工作情况，我不得不降级到 C++，而且我发现做最简单的事情非常困难。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:26:45.873

这不是很神秘。它告诉你该怎么做。使用`->`而不是`.`访问托管指针的成员：

```
textn = textn->substr(0, 7); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:35:35.303

您的代码中有两个问题：首先是访问托管类的成员；第二个是您访问的成员的名称。

使用托管类型时，您访问的成员与 C# 中的成员相同。当您使用 C++`std::string`时，您可以使用`substr`. 当你使用 时`System.String`，你需要使用`Substring`，像这样：

```
textn = textn->Substring(0, 7); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:48:49.273

您遇到的问题是您将“C++”与“C++/CLR”混合在一起。“C++/CLR”代表 C++ 公共语言运行时，它基本上是 .NET 使用的。

当你想存储一个变量时，你现在有三种方法。

```
std::string    value1; // This is allocating a variable on C++ stack
std::string*   value2; // Allocating on the C++ heap.
System.String^ value3; // Handle to object on managed heap (CLR). 
```

要记住的一个简单规则是，当它在堆上时，您需要一个箭头。

有关托管堆上对象句柄的更多信息，请参阅 [http://msdn.microsoft.com/en-US/library/yk97tc08(v=vs.110).aspx](http://msdn.microsoft.com/en-US/library/yk97tc08(v=vs.110).aspx)

# php - magento 同类别产品缩略图

> ID：15787340
> 
> 赞同：0
> 
> 时间：2013-04-03T12:25:44.707
> 
> 标签：php, magento, thumbnails, product

我在同一类别中有 3 个产品
我正在尝试在 magento 中显示相同类别的产品缩略图`catalog/product/view.phtml`

```
<?php
    $productCollection = Mage::getModel('catalog/category')->load($cat_id)
         ->getProductCollection()
         ->addAttributeToSelect('*')
         ->addAttributeToFilter('status', 1);

    $prodIds = $productCollection->getAllIds();

    $prod_siblings = array();
    foreach($prodIds as $productId) 
    {
        $prod =  Mage::getModel('catalog/product')->load($productId);
        $prod_siblings[] = array(
            'url' => $prod->getProductUrl(),
            'name' => $prod->getName(),
            'image' => $this->helper('catalog/image')->init($prod, 'thumbnail')->constrainOnly(TRUE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(75)
            );
    }
?> 
```

使用此代码，这 3 个`$prod_siblings`有自己的名称和 url（存储在数组中），但它们都共享相同的图像（最后创建的产品的图像）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:41:35.683

尝试将产品详细信息存储在您的`$prod_siblings`. 这将如下所示：

```
?php
$productCollection = Mage::getModel('catalog/category')->load($cat_id)
     ->getProductCollection()
     ->addAttributeToSelect('*')
     ->addAttributeToFilter('status', 1);

$prodIds = $productCollection->getAllIds();

$prod_siblings = array();
foreach($prodIds as $productId) 
{
    $prod =  Mage::getModel('catalog/product')->load($productId);
    $product_detail[] = array(
        'url' => $prod->getProductUrl(),
        'name' => $prod->getName(),
        'image' => $this->helper('catalog/image')->init($prod, 'thumbnail')->constrainOnly(TRUE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(75)
        );  array_push($prod_siblings,$product_detail[]);
}?> 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:47:10.723

知道了 ！

在这里找到我的答案：[如何在 Magento 中获取产品图像？](https://stackoverflow.com/questions/2474117/how-to-get-a-products-image-in-magento)

用过的`(string)Mage::helper('catalog/image')->init($prod, 'thumbnail')...`

代替`$this->helper('catalog/image')->init($prod, 'thumbnail')...`

# php - 用户 www-data 的连接访问被拒绝

> ID：15787346
> 
> 赞同：1
> 
> 时间：2013-04-03T12:25:58.223
> 
> 标签：php, mysql

我有一个简单的 PHP 页面，它连接到数据库以读取值，当我在本地部署它时，这一切似乎都可以正常工作。但是，当我部署到我的服务器时，它不会连接 - 在我看来，它似乎忽略了我的连接文件并使用默认值......？

```
 <?php
//Database details
include "Connection.php";
$db_handle = mysql_connect($server, $user_name, $password);
$db_found = mysql_select_db($database, $db_handle);
?>

//Contents of Connection.php
<?php
  $user_name = "sam";
$password = "123456";
$database = "clubleague";
$server = "localhost";
?> 
```

我回来的错误是：

> 用户 'www-data'@'localhost' 的访问被拒绝（使用密码：否）。

我本来希望它说用户“sam”的访问被拒绝，而不是www-data？在 phpMyAdmin 中，我有一个名为 Sam 的用户附加到数据库中，我尝试为其授予对 Global 和本地数据库的完全权限，但没有任何乐趣。任何提示，建议让它与我的凭据连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:38:35.257

看起来您的“Connection.php”不包括在内。为避免这种情况，请检查文件路径并使用“require”而不是“include”（[http://php.net/manual/en/function.require.php](http://php.net/manual/en/function.require.php)）。在这种情况下，“require”会向您抛出错误，您不会错过它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:32:06.290

`mysql_connect`似乎是通过empty`$server`和.`$user_name``$password`

默认情况下，它使用运行 PHP 解释器的凭据（在您的情况下是 Apache 凭据）通过默认 UNIX 套接字连接到本地服务器。

很可能它反映在 Web 服务器日志中（“未定义变量：服务器在 ...”）等。

请检查它`Connection.php`确实存在并且实际上被包括在内。

# c# - 在 C# 中从 Excel 到 PowerPoint 的拉伸表

> ID：15787347
> 
> 赞同：0
> 
> 时间：2013-04-03T12:25:59.873
> 
> 标签：c#, html, excel, powerpoint

我正在尝试通过 C# 在 PowerPoint 中拉伸表格

表格已经从 Excel 复制到 PowerPoint 中，问题是粘贴时表格内容很小，无法读取。

我所做的基本上是将 HTML 文件复制到

```
Clipboard.SetText(html); 
```

将其粘贴到 Excel 范围内

```
sheet.Range(cellmapp).PasteSpecial();  
sheet.Columns.AutoFit();
sheet.Rows.AutoFit();
sheet.UsedRange.Copy(Missing.Value); 
```

现在，我想将它粘贴到 PowerPoint 中的正确位置

```
foreach (PowerPoint.Slide slide in presentation.Slides)
{
     foreach (PowerPoint.Shape pptshape in slide.Shapes)
     {
           if (!pptshape.Type.ToString().Equals("msoAutoShape") && pptshape.AlternativeText.Contains("|"))
           {
               if (xlsSheetName == pptSheetName && xlsShapeName == pptxlsShapeName)
               {
                   ppApp.ActiveWindow.View.PasteSpecial();
               }
           }
     }
} 
```

它会在我选择的位置复制我在 PowerPoint 中的表格。

但问题是，这张桌子真的又薄又小，难以辨认，因为它太小了。

C# 中是否有拉伸功能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:03:44.003

我过去做过类似的事情 - 如果我没记错的话，您必须将新表格对象的宽度/高度属性设置为更大的值（这取决于工作表的布局）但 Powerpoint 可能会忽略这一点，如果文本太小 - 在这种情况下，只需调整每个单元格的 .font.size 属性。

作为一个额外的想法：考虑到 excel 粘贴表的糟糕布局以及修改它时表对象的缓慢性，根据自己的喜好创建一个 powerpoint 表然后将 excel 中的值粘贴到新表中可能会更快。只需遍历每个单元格并为 .text 属性分配一个值。如果您可以使用默认的 powerpoint 样式，则可以通过编程方式将每个表格设置为一种样式，请搜索表格对象的 .style 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:56:23.190

您还可以：

1.  在 Excel 中选择您需要的所有单元格
2.  将它们复制到剪贴板
3.  将其粘贴到PowerPoint中
4.  调整形状表的大小

    var clipbordCache = Clipboard.GetDataObject();

    //复制到excel...

    //粘贴到PowerPoint中

    var table = slide.shapes.Paste(); Clipboard.SetDataObject(clipbordCache);

    //调整大小

    table.Width = 200;

# c# - C# DWM 透明窗口效果

> ID：15787353
> 
> 赞同：2
> 
> 时间：2013-04-03T12:26:28.840
> 
> 标签：c#, .net, wpf, winapi, dwm

所以我有一个项目要构建一个 Windows Flip (Alt+Tab) 类型的应用程序，以使用 Kinect 驱动。

我的所有句柄和缩略图以及窗口选择和一些自定义修改器等都很好地通过了。解决方案所需的最后一块是 Windows Flip 应用于除选定窗口之外的所有活动窗口的透明效果。但我似乎在任何地方都找不到它，所以我猜它可能不会公开。

有人对此有任何经验/暗示吗？

# python - 从 matlab 到 python 的转换

> ID：15787360
> 
> 赞同：0
> 
> 时间：2013-04-03T12:26:46.227
> 
> 标签：python, matlab, matrix

我需要将matlab文件转换为python。在matlab中我们有

```
for o_indy = 1:o_vres
  for o_indx = 1:o_hres
   ....
  if(condition)
    img_o(o_indy, o_indx,:) = pix11*p11 + pix12*p12 + pix21*p21 + pix22*p22; 
```

`pix11*p11 , pix12*p12 , pix21*p21 , pix22*p22`在哪里`1x1x3 matrices`

matlab中的输出`img_o`是`320x320x3 matrix`

当我转换为 python

```
 for o_indy in range(1, o_vres+1):
    for o_indx in range(1, o_hres+1):
 ....
      if(condition):
        img_o[o_indy-1: o_indx] =(matrix((array(pix11)*p11))+matrix((array(pix12)*p12))+matrix((array(pix21)*p21))+matrix((array(pix22)*p22))) 
```

我得到一个`1x320x960`大小矩阵。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-04T14:24:58.017

这里有很多问题。

首先，您使用的是切片，而不是索引。应该和matlab一样，只是把()换成[]：

```
img_o[o_indy, o_indx, :] 
```

其次，python 使用基于 0 的索引，而不是像 Matlab 那样基于 1 的索引。所以你应该做范围（o_vres），例如。

第三，你真的不应该使用矩阵。

所以你的代码应该是这样的：

```
pix11=array(pix11)
pix12=array(pix12)
pix13=array(pix13)
for o_indy in range(o_vres):
    for o_indx in range(o_hres):
 ....
      if(condition):
        img_o[o_indy, o_indx, :] = pix11*p11+pix12*p12+pix2*p21+pix22*p22 
```

你如何平铺也有问题。如果 osize 的长度为 2，则结果数组将是错误的。所以说 osize 是 (320, 320)，那么

平铺（temp_fill_value，osize）

将产生形状数组 (1, 320, 960)

所以你需要 osize 的长度为 3，最后一个值为 1。所以，比如说：

```
img_o = tile(temp_fill_value, [osize[0], osize[1], 1]) 
```

这导致形状数组 (320, 320, 3)

但是，更简单的解决方案是：

```
img_o = np.zeros([osize[0], osize[1], 3]) 
```

# c# - 使用类名获取用于我们项目的参考 dll 名称

> ID：15787365
> 
> 赞同：1
> 
> 时间：2013-04-03T12:26:59.427
> 
> 标签：c#, .net, dll, namespaces, .net-assembly

如何获取所有引用 dll 名称及其代表类名称以及 C# 中特定 dll 反射中使用的命名空间？

让我们考虑 sample.dll，其中 reference1.dll 和 reference2.dll 通过方法 reference1.method1 和 reference2.method2 用作对示例 dll 的引用

我需要列出

```
1)reference dll names ie.reference1.dll,reference2.dll
2)methods used in that dll names ie.reference1.method1,reference2.method2
3) Namespace used for referring that reference dll 
```

我已经尝试过`myassembly.GetTypes()`它并没有帮助我

等待您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:46:15.530

嗯，我不知道为什么你认为`Assembly.GetTypes()`没有帮助......

请注意，并非所有 dll 都在磁盘上，因此如果您`Assembly.Location`使用名称而不是名称，则可能会遇到错误。

命名空间不引用特定的程序集，一个程序集可以包含许多命名空间。

下面的方法将包含相当一部分 .Net 框架，因此您可能需要稍微过滤一下列表。

这有帮助吗？

```
 List<String> Dlls = new List<string>();
        List<String> Namespaces = new List<string>();
        List<String> Methods = new List<string>();
        foreach (var Assembly in AppDomain.CurrentDomain.GetAssemblies())
        {
            if (!Dlls.Contains(Assembly.GetName().Name))
                Dlls.Add(Assembly.GetName().Name);

            foreach (var Type in Assembly.GetTypes())
            {
                if (!Namespaces.Contains(Type.Namespace))
                    Namespaces.Add(Type.Namespace);
                foreach(var Method in Type.GetMethods())
                {
                    Methods.Add(String.Format("{0}.{1}", Type.Name, Method.Name));
                }
            }

        } 
```

# google-maps - Google Maps V6 室内导航

> ID：15787371
> 
> 赞同：2
> 
> 时间：2013-04-03T12:27:18.953
> 
> 标签：google-maps, bluetooth, gps, wifi, indoor-positioning-system

有人知道谷歌的室内导航是如何工作的吗？它是基于 WiFi 的吗？如果是这样，他们是否依赖于街景车辆映射的现有 Wifi DB？谢谢万儿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:12:18.257

媒体上有相互矛盾的信息：

一篇德国文章说：它是基于 GPS 的，并且像普通导航一样工作。
这进一步意味着它不适用于大多数建筑物，并且该功能实际上已退化为查看建筑物的数字地图，您必须知道自己在哪里。

另一个人说，苹果也投资了室内定位，并收购了 WiFiSlam 公司，该公司使用 Wifi 进行室内定位。

另一家（完成）公司使用建筑物的磁场，必须在之前测量并应用于建筑物地图。

我认为如果数据可用，谷歌将同时使用 GPS 和 Wifi。但这是主要问题。

然而，在某些建筑物中，它在今天仍然有意义，也许是在大型机场

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:52:37.997

我们注意到谷歌正在使用不同的信号进行定位，但它们都依赖于 GPS。如果用户打开了他们的 GPS 和 WiFi，那么谷歌会将这些 WiFi 信号和移动塔映射到这个 GPS 位置。因此，如果用户打开例如谷歌地图，那么它可以在你不打开 GPS 的情况下定位你。这适用于小型开放式建筑，但不适用于多层楼和混凝土建筑。

谷歌也有一个应用程序供开发人员手动映射室内 WiFi 热点，但这并不是在所有国家都可用。也许它会及时改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-19T17:54:08.650

Google IO 2013 给出了答案：

*   WiFi（主传感器）
*   GPS（有问题，包括反射）
*   气压计（将在未来确定楼层）
*   加速度计
*   陀螺仪

来源： [https ://www.youtube.com/watch?v=oLOUXNEcAJk](https://www.youtube.com/watch?v=oLOUXNEcAJk)

> “我们实际上结合了许多不同的传感器来给你一个估计；我们使用 WiFi，我们使用 GPS。我们使用传感器（即你手机上的加速度计、陀螺仪，以及气压计）......主导...是WiFi”。

非常感谢 Waleed & Sarah 的介绍。

# entity-framework - 将子级添加到现有父级会检索所有现有子级

> ID：15787373
> 
> 赞同：0
> 
> 时间：2013-04-03T12:27:21.500
> 
> 标签：entity-framework, entity-framework-5

就像标题说的那样，当我将孩子添加到现有父母时，所有现有的孩子都会被检索到。

简化/简化的父子模型：

```
public class ProjectLocalisation
{
    public int ProjectID { get; set; }

    public virtual Project Project { get; set; }

    public virtual ICollection<ProjectImage> Images { get; set; }
}

public class ProjectImage
{
    [Key]
    public int ID { get; set; }

    public int ProjectID { get; set; }

    public virtual ProjectLocalisation ProjectLocalisation { get; set; }
} 
```

*   当创建带有新子代的新父代时，除了在数据库上进行实际插入之外，什么都不做。
*   在编辑现有父项而不添加新子项但编辑现有子项时，除了对数据库进行实际更新外，什么都不做。
*   编辑现有父级并添加新子级时，将从数据库中检索所有现有子级。

通过创建类的新实例、设置主键和附加对象来编辑现有父级。执行此行的那一刻：

```
projectLocalisation.Images.Add(image); 
```

执行此查询：

```
exec sp_executesql N'SELECT 
[Extent1].[ID] AS [ID], 
[Extent1].[ProjectID] AS [ProjectID], 
[Extent1].[Name] AS [Name], 
[Extent1].[Order] AS [Order], 
[Extent1].[LanguageTag] AS [LanguageTag]
FROM [dbo].[ProjectImages] AS [Extent1]
WHERE ([Extent1].[ProjectID] = @EntityKeyValue1) AND ([Extent1].[LanguageTag] = @EntityKeyValue2)',N'@EntityKeyValue1 int,@EntityKeyValue2 nvarchar(128)',@EntityKeyValue1=5,@EntityKeyValue2=N'nl' 
```

有没有办法禁用这种行为？

* * *

编辑：一种解决方法似乎是不要让集合成为虚拟的，但我宁愿不要到处使用`.Include()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:41:29.507

这看起来像延迟加载。当你不需要它（或者当你不想要它时）通过调用关闭延迟加载：

```
dbContext.Configuration.LazyLoadingEnabled = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:46:50.427

您可以尝试从关系的另一端添加图像，例如

```
db.ProjectImages.Add(new ProjectImage { ProjectLocalisation = localisation, ... } 
```

# ajax - 不更新目标组件，但 工作正常

> ID：15787376
> 
> 赞同：2
> 
> 时间：2013-04-03T12:27:33.347
> 
> 标签：ajax, jsf

我在让 Ajax 正常工作时遇到问题。在我在这里的 xhtml 文件中，我使用 Ajax 来呈现启用或禁用的某些输入，并且它可以正常工作。但是，再往下，我还使用 Ajax 来呈现包含的 xhtml 文件，该文件包含其他控件，并带有 id="photoEnabled" 标记。如果未选中该复选框，则会在其位置显示一个由 id="photoDisabled" 标记的虚拟显示，只是为了在页面上进行整洁的演示，并且会被禁用。

由于某种原因，这不起作用，我不明白为什么。但是，如果我更换：

```
<h:selectBooleanCheckbox id="photometry" value="#{option1.photometry}">   
  <f:ajax event="click" render="photoEnabled photoDisabled" listener="# {option1.updateCheck}"/>   
</h:selectBooleanCheckbox>   

<!-- by -->   

<h:selectBooleanCheckbox id="photometry" value="#{option1.photometry}">   
  <f:ajax event="click" render="@form" listener="#{option1.updateCheck}"/>   
</h:selectBooleanCheckbox> 
```

它确实可以正常工作，但问题是在页面的更上方并且未在此处显示，我还有一些其他输入字段，并且当复选框的状态发生更改时，由于呈现了整个表单，因此这些字段被清除，我不要。

相关的 xhtml 代码在这里，显示了两个 Ajax 标记，一个有效，另一个无效。

```
 <p:fieldset id="chooseOutput" legend="and choose your output:" style="text-align:left">   
    <h:commandButton id="popupChooseOutput" type="button" value="?" onclick="openPopup(420,370,'popups/helpOpt12')"  
                     styleClass="queryButton"/>   
    <p:panelGrid id="specphot" styleClass="textCentered" style="margin-left:auto; margin-right:auto">   
      <p:row>   
        <p:column colspan="2">   
          <span></span>   
        </p:column>   
        <p:column>   
          <h:outputText value="λ<sub>1</sub>(Å)" escape="false"/>   
        </p:column>   
        <p:column>   
          <p:spacer width="2" height="0"/>   
        </p:column>   
        <p:column>   
          <h:outputText value="λ<sub>2</sub>(Å)" escape="false"/>   
        </p:column>   
        <p:column>   
          <p:spacer width="2" height="0"/>   
        </p:column>   
        <p:column>   
          <h:outputText value="Δλ(Å)" escape="false"/>   
        </p:column>   
        <p:column>   
          <p:spacer width="2" height="0"/>   
        </p:column>   
        <p:column>   
          <h:outputText value="R"/>   
        </p:column>   
        <p:column>   
          <p:spacer width="2" height="0"/>   
        </p:column>   
        <p:column>   
          <h:outputText value="<i>v</i>sin <i>i</i> (km/s)" escape="false"/>   
        </p:column>   
      </p:row>     
      <p:row>   
        <p:column>   
          <h:selectBooleanCheckbox id="spectrum" value="#{option1.spectrum}">   
            <f:ajax event="click" render="deltaLambda lambda1 lambda2 R vsini" listener="#{option1.updateCheck}"/><!-- This works -->   
          </h:selectBooleanCheckbox>   
        </p:column>   
        <p:column style="text-align:left">   
          <h:outputText value="Spectrum:" escape="false"/>   
        </p:column>   
        <p:column>   
          <h:inputText size="6" id="lambda1" value="#{simulator.lam1}" disabled="#{!option1.spectrum}"  
                       styleClass="#{option1.enableStyle}"/>   
        </p:column>   
        <p:column>   
          <div></div>   
        </p:column>   
        <p:column>   
          <h:inputText size="6" id="lambda2" value="#{simulator.lam2}" disabled="#{!option1.spectrum}"  
                       styleClass="#{option1.enableStyle}"/>   
        </p:column>   
        <p:column>   
          <div></div>   
        </p:column>   
        <p:column>   
          <h:inputText size="6" id="deltaLambda" value="#{simulator.dlam}" disabled="#{!option1.spectrum}"  
                       styleClass="#{option1.enableStyle}"/>   
        </p:column>   
        <p:column>   
          <div></div>   
        </p:column>   
        <p:column>   
          <h:inputText size="6" id="R" value="#{simulator.lamByDlam}" disabled="#{!option1.spectrum}"  
                       styleClass="#{option1.enableStyle}"/>   
        </p:column>   
        <p:column>   
          <div></div>   
        </p:column>   
        <p:column>   
          <h:inputText size="6" id="vsini"   value="#{option1.vsini}" disabled="#{!option1.spectrum}"  
                       styleClass="#{option1.enableStyle}"/>   
        </p:column>   
      </p:row>   
      <p:row>   
        <p:column>   
          <h:selectBooleanCheckbox id="photometry" value="#{option1.photometry}">   
            <f:ajax event="click" render="photoEnabled photoDisabled" listener="#{option1.updateCheck}"/><!-- This does not work -->   
          </h:selectBooleanCheckbox>   
        </p:column>   
        <p:column style="text-align:left">   
          <h:outputText value="Photometry:"/>   
        </p:column>   
        <p:column colspan="9">   

          <!-- Conditionally enable filter menu here and in Option 2\.  ""hiddenPhoto" is used by   
               JavaScript to test if any user defined filter files have been selected if it is "1".   
               If it is, it then tests if any files have been uploaded, in which case the user is   
               then given the choice of canceling the operation or deleting the uploaded files. -->   

          <h:outputText id="hiddenPhoto" class="hide" value="#{filters.displayUserDefined}"/>   

          <ui:fragment id="photoEnabled" rendered="#{option1.photometry}">   
            <ui:include src="include/filterMenu.xhtml"/>   
          </ui:fragment>   

          <!-- When the filter menu is disabled display the disabled menu in its place with the background color -->   

          <ui:fragment id="photoDisabled" rendered="#{!option1.photometry}">   
            <h:panelGrid columns="3">   
              <h:selectOneMenu value="#{filters.filterSet}" styleClass="filterMenuDisabled" disabled="true">   
                <f:selectItems value="#{filters.filtersMap}"/>   
              </h:selectOneMenu>   
              <h:selectOneRadio value="#{filters.radioValue}" disabled="true">   
                <f:selectItem itemValue="" itemLabel="AB"/>   
                <f:selectItem itemValue="" itemLabel="Vega"/>   
              </h:selectOneRadio>   
            </h:panelGrid>   
          </ui:fragment>   

        </p:column>   
      </p:row>   
    </p:panelGrid>   
  </p:fieldset> 
```

在我的 Java 类中，我有各种 getter 和 setter，它们都可以正常工作，包括与复选框相关联的那些，以及似乎是必需的虚拟 Ajax 方法。

部分代码在这里：

```
public boolean isSpectrum() {   
  return spectrum;   
}   

public void setSpectrum(boolean spectrum) {   
  this.spectrum = spectrum;   
}   

public boolean isPhotometry() {   
  return photometry;   
}   

public void setPhotometry(boolean photometry) {   
  this.photometry = photometry;   
} 

public void updateCheck(AjaxBehaviorEvent event) {} 
```

我在清单前面的一些复选框中遇到了类似的问题，为了使它们起作用，我必须使用“@form”而不是特定的 ID，因此当单击复选框时，输入字段再次被清除。

有人可以帮我解决我不明白的奇怪情况吗，是否应该在我的 bean 的 updateCheck() 方法中放置一些代码？

非常感谢，我期待着一个有趣的答复。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-03T12:53:58.143

*我会假设在提出问题时，`#`和之间`{`的空格`listener="# {option1.updateCheck}"`只是一个粗心的错字。这种无效的 EL 语法确实“不起作用”。*

* * *

您的具体问题归结为缺乏对基本 HTML/JavaScript 工作原理的理解（请记住，JSF 在这个问题的上下文中基本上只是一个 HTML/JS 代码生成器）。目前提供的代码存在2个技术问题：

1.  您正在尝试 ajax 更新一个组件，该组件本身在 JSF 中有条件地呈现。这将不起作用，原因很简单，即 JavaScript 无法找到未呈现的 JSF 组件的 HTML 表示，`document.getElementById()`以便将其替换为从 ajax 响应中获得的新 HTML 表示。

    您需要将它放在始终呈现的组件中。例如这个

    ```
    <ui:fragment id="photoDisabled" rendered="#{!option1.photometry}">
        <h:panelGrid columns="3"> 
    ```

    理论上需要换成

    ```
    <ui:fragment id="photoDisabled">
        <h:panelGrid columns="3" rendered="#{!option1.photometry}"> 
    ```

    * * *

2.  **但是**，`<ui:fragment>`它不会生成任何 HTML 标记（您可以通过查看 JSF 生成的 HTML 输出来确认这一点），因此 JavaScript 永远无法找到它的 HTML 表示来更新其子代。您需要用一个 JSF 组件替换它，该组件呈现一个可以通过通常`document.getElementById()`方式选择的具体 HTML 元素，就像`<h:panelGroup>`呈现 HTML`<span>`元素的 a 一样。

    总而言之，这应该这样做：

    ```
    <h:panelGroup id="photoDisabled">
        <h:panelGrid columns="3" rendered="#{!option1.photometry}"> 
    ```

### 也可以看看：

*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w/9010771#9010771)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T07:46:23.060

如果你想通过 id 渲染特定元素，那么你可以`<h:form id="formId">`全局使用组件。请参阅下面的示例以了解更多信息。

```
 <h:form id="formId">
    <h:inputText id="photoEnabled" value="#{bean.photoEnaled}"/>
    <h:inputText id="photoEnabled" value="#{bean.photoDisabled}"/>
    ....
    <h:selectBooleanCheckbox id="photometry" value="#{option1.photometry}">   
       <f:ajax event="click" render=":formId:photoEnabled :formId:photoDisabled" listener="# {option1.updateCheck}"/>   
     </h:selectBooleanCheckbox>   
                ...
   </h:form> 
```

在上面的示例中，解释了在选择值 `h:selectBooleanCheckbox`时，`h:inputText`元素 photoEnabled 和 photoEnabled 将被刷新。

# java - 如何使用 jcheck 框和多选创建 jcombobox

> ID：15787379
> 
> 赞同：2
> 
> 时间：2013-04-03T12:27:40.480
> 
> 标签：java, swing, jcombobox, jlist, jcheckbox

我想创建带有复选框和多项选择的 JComboBox 。渲染 jlist 后，我​​创建了一个带有复选框的列表。我不知道如何用 jcombobox 渲染它。或者是否可以将 jlist 设置为下拉列表，如组合框。对于 jlist 渲染，我使用以下代码

```
 DefaultListModel listModel = new DefaultListModel();
    ListCheckBox li= new ListCheckBox(listModel);
    JScrollPane jsp= new JScrollPane(li);
    add(jsp);

    listModel.add(0,new JCheckBox("Other Court"));

    listModel.add(0,new JCheckBox("Tribunal Court"));

    listModel.add(0,new JCheckBox("High Court"));
   listModel.add(0,new JCheckBox("Supreme Court")); 
```

ListCheck Box 类如下

```
 import javax.swing.*;
 import javax.swing.border.*;
 import java.awt.*;
 import java.awt.event.*;

 public class ListCheckBox extends JList
{
protected static Border noFocusBorder =
 new EmptyBorder(1, 1, 1, 1);

public ListCheckBox(DefaultListModel model)

  {

   super(model)  ;
   setCellRenderer(new CellRenderer());

    addMouseListener(new MouseAdapter()
     {
        public void mousePressed(MouseEvent e)
        {
           int index = locationToIndex(e.getPoint());

           if (index != -1) {
              JCheckBox checkbox = (JCheckBox)
                          getModel().getElementAt(index);

              checkbox.setSelected(
                                 !checkbox.isSelected());
              repaint();
            }
          }
        }
      );

     setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
   }

   protected class CellRenderer implements ListCellRenderer
   {
   public Component getListCellRendererComponent(
    JList list, Object value, int index,
    boolean isSelected, boolean cellHasFocus)
     {  JCheckBox checkbox = (JCheckBox) value;
     checkbox.setBackground(isSelected ?
      getSelectionBackground() : getBackground());
     checkbox.setForeground(isSelected ?
     getSelectionForeground() : getForeground());
     checkbox.setEnabled(isEnabled());
     checkbox.setFont(getFont());
     checkbox.setFocusPainted(false);
     checkbox.setBorderPainted(true);
     checkbox.setBorder(isSelected ?
      UIManager.getBorder(
       "List.focusCellHighlightBorder") : noFocusBorder);
      return checkbox;
      }
    }
 } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T12:33:14.253

最简单的解决方案可能是为每个选项创建一个弹出菜单`JCheckBoxMenuItem`，然后将该弹出菜单附加到一个按钮，该按钮显示您希望为“选定项目”显示的任何内容。

```
final JPopupMenu menu = new JPopupMenu();
menu.add(new JCheckBoxMenuItem("Other Court"));
menu.add(new JCheckBoxMenuItem("Tribunal Court"));
menu.add(new JCheckBoxMenuItem("High Court"));
menu.add(new JCheckBoxMenuItem("Supreme Court"));

final JButton button = new JButton();
button.setAction(new AbstractAction("Court") {
    @Override
    public void actionPerformed(ActionEvent e) {
        menu.show(button, 0, button.getHeight());
    }
});

JFrame frame = new JFrame();
frame.getContentPane().add(button);
frame.pack();
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setVisible(true); 
```

# html - HTTP 206 Partial Content 状态消息是什么意思，如何完全加载资源？

> ID：15787380
> 
> 赞同：61
> 
> 时间：2013-04-03T12:27:42.310
> 
> 标签：html, apache, request, http-response-codes

我在这样的网站上有一些图像标签。

```
<img src="img.png"/> 
```

当我尝试加载它们时，它们只加载了一半。当我在网络控制台中检查请求时，我看到响应是：

> 206部分内容

我用谷歌搜索了它，它说如果标题中设置了一个范围，它将是这样的。但是这些标题实际设置在哪里？以及如何避免这种情况并加载完整图像？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-03T12:33:33.490

[从 user166390 对问题的回答](https://stackoverflow.com/a/9755372/1591669)为什么[Firebug 在视频加载请求中显示“206 Partial Content”响应？](https://stackoverflow.com/questions/9755168/why-does-firebug-show-a-206-partial-content-response-on-a-video-loading-reques)

> 当客户端请求范围（例如“给我前 2MB 的视频数据”）时，可以从服务器发送*此*部分内容代码 (206 )。
> 
> 以块的形式下载数据以避免获取未使用的资源是至关重要的。（我很少在线观看完整的视频。）查看对`Range`标头的传出请求。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-03T12:32:54.887

由客户端进行另一个调用以获取其余数据（或下一位）。你不需要做任何事情，他们最终会得到完整的图像，即使它需要几个 http 调用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-25T01:45:28.957

首先：

HTTP**`206 Partial Content`**成功状态响应代码表示请求已成功，并且正文包含请求的数据范围，如`Range`请求标头中所述。

如果只有一个范围，`Content-Type`则将整个响应的 the 设置为文档的类型，并`Content-Range`提供 a。

如果返回多个范围，`Content-Type`则设置为**`multipart/byteranges`**，每个片段覆盖一个范围，`Content-Range`并对其进行`Content-Type`描述。

（[来自 Mozilla 优秀的 HTTP 状态码参考。](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/206)）

下一个：

在资源上设置的 HTTP 标头通常由 Web 服务器设置。但是，如果文件很大，例如视频文件[，浏览器可以请求](https://serverfault.com/questions/571554/what-does-http-code-206-partial-content-really-mean)正在加载的资源块。通常**`HTTP 206`**会从客户端发起的请求中返回一个标头。在 apache 中的资源上设置的标头设置`mod_headers`在`httpd.conf`. 查找以下行以查看是否打开了部分内容：

```
Header set Accept-Ranges bytes 
```

本节控制 apache 设置的标头的行为，因此它将是一个很好的起点。

然而，可以通过多种不同的方式设置标题。例如，当使用 apache 时，您可以控制加载的图像，以便它们缓存。这可以使用`[a2enmod module][2]`. 这将减少服务器上的负载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-04T08:48:53.907

从不同的子域加载字体时，我遇到了类似的问题。在我的情况下，由于跨域问题，我得到了 206，我只是通过将 .htaccess 文件放在我的根文件夹中来解决它：

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule> 
```

# python - numpy：如何加入数组？（得到几个范围的并集）

> ID：15787383
> 
> 赞同：8
> 
> 时间：2013-04-03T12:27:52.243
> 
> 标签：python, arrays, numpy, indexing

我将 Python 与`numpy`.

我有一个 numpy 索引数组`a`：

```
>>> a
array([[5, 7],
       [12, 18],
       [20, 29]])
>>> type(a)
<type 'numpy.ndarray'> 
```

我有一个 numpy 索引数组`b`：

```
>>> b
array([[2, 4],
       [8, 11],
       [33, 35]])
>>> type(b)
<type 'numpy.ndarray'> 
```

我需要`a`用一个数组加入一个数组`b`：

`a`+ `b`=>`[2, 4] [5, 7] [8, 11] [12, 18] [20, 29] [33, 35]`

=>`a`并且`b`有索引数组 => `[2, 18] [20, 29] [33, 35]`

（索引`([2, 4][5, 7][8, 11][12, 18])`按顺序排列

=> `2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18`=> `[2, 18]`)

对于这个例子：

```
>>> out_c
array([[2, 18],
       [20, 29],
       [33, 35]]) 
```

有人可以建议，**我怎么得到`out_c`？**

**更新**：@Geoff 建议解决方案[python union of multiple range](https://stackoverflow.com/questions/15273693/python-union-of-multiple-ranges)。这个解决方案是否是大型数据阵列中最快和最好的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:36:12.167

# （新答案）使用 Numpy

```
ranges = np.vstack((a,b))
ranges.sort(0)

# List of non-overlapping ranges
nonoverlapping = (ranges[1:,0] - ranges[:-1,1] > 1).nonzero()[0]

# Starts are 0, and all the starts not overlapped by their predecessor
starts = np.hstack(([0], nonoverlapping + 1))

# Ends are -1 and all the ends who aren't overlapped by their successor
ends = np.hstack(( nonoverlapping, [-1]))

# Result
result = np.vstack((ranges[starts, 0], ranges[ends, 1])).T 
```

**（旧答案）使用列表和集合**

```
import numpy as np
import itertools

def ranges(s):
    """ Converts a list of integers into start, end pairs """
    for a, b in itertools.groupby(enumerate(s), lambda(x, y): y - x):
        b = list(b)
        yield b[0][1], b[-1][1]

def intersect(*args):
    """ Converts any number of numpy arrays containing start, end pairs 
        into a set of indexes """
    s = set()
    for start, end in np.vstack(args):
        s = s | set(range(start,end+1))
    return s

a = np.array([[5,7],[12, 18],[20,29]])
b = np.array([[2,4],[8,11],[33,35]])

result = np.array(list(ranges(intersect(a,b)))) 
```

# 参考

*   [如何在python中找到范围重叠？](https://stackoverflow.com/questions/6821156/how-to-find-range-overlap-in-python)
*   [http://docs.python.org/2/library/sets.html](http://docs.python.org/2/library/sets.html)
*   [在python中将整数列表转换为范围](https://stackoverflow.com/questions/4628333/converting-a-list-of-integers-into-range-in-python)
*   [http://docs.python.org/2/library/itertools.html#itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T15:56:55.227

不漂亮，但它有效。我不喜欢最后的循环，buy想不出没有它的方法：

```
ab = np.vstack((a,b))
ab.sort(axis=0)

join_with_next = ab[1:, 0] - ab[:-1, 1] <= 1
endpoints = np.concatenate(([0],
                            np.where(np.diff(join_with_next) == True)[0]  + 2,
                            [len(ab,)]))
lengths = np.diff(endpoints)
new_lengths = lengths.copy()
if join_with_next[0] == True:
    new_lengths[::2] = 1
else:
    new_lengths[1::2] = 1
new_endpoints = np.concatenate(([0], np.cumsum(new_lengths)))
print endpoints, lengths
print new_endpoints, new_lengths

starts = endpoints[:-1]
ends = endpoints[1:]
new_starts = new_endpoints[:-1]
new_ends = new_endpoints[1:]
c = np.empty((new_endpoints[-1], 2), dtype=ab.dtype)

for j, (s,e,ns,ne) in enumerate(zip(starts, ends, new_starts, new_ends)):
    if e-s != ne-ns:
        c[ns:ne] = np.array([np.min(ab[s:e, 0]), np.max(ab[s:e, 1])])
    else:
        c[ns:ne] = ab[s:e]

>>> c
array([[ 2, 18],
       [20, 29],
       [33, 35]]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:26:01.503

也许您可以尝试使用 numpy.concatenate() 将数组连接在一起，然后找到每行的最小值和最大值……然后将 c 创建为每行的最小值和最大值的矩阵。

或者，np.minimum 和 np.maximum 比较两个数组并找到最小值和最大值，因此您可以找到每行的最小值和最大值，然后将其分配给矩阵 c。

# wso2 - DCAT 中的 API 管理器文档

> ID：15787384
> 
> 赞同：0
> 
> 时间：2013-04-03T12:27:56.020
> 
> 标签：wso2

我希望能够以 DCAT 格式公开每个 API 的文档。

是否有可能做到这一点以及如何做到这一点？

谢谢

卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:09:27.610

API Manager 可以将文档视为外部实体。因此，您可以使用任何您想要的格式，然后从 API 管理器中引用它们。

# macos - OS X：便携式 Git（又名安装多个 Git 版本）

> ID：15787385
> 
> 赞同：2
> 
> 时间：2013-04-03T12:28:01.230
> 
> 标签：macos, git, osx-lion

我目前正在尝试在 OS X 上安装多个 Git 版本以进行测试。从[git-scm.com](http://git-scm.com/downloads)（安装到`/usr/local/git`）下载 OS X 安装程序包后，我将其移动到不同的位置，例如`~/git-1.7.11.1`或`~/git-1.8.1`. 不幸的是，Git 不喜欢这个动作：

```
$ ~/git-1.7.11.1/bin/git fetch
fatal: Unable to find remote helper for 'https' 
```

甚至更糟：

```
$ ~/git-1.7.11.1/bin/git pull
git: 'pull' is not a git command. See 'git --help'.

Did you mean this?
        shell 
```

当我设置路径时，它也不起作用：

```
$ export PATH=~/git-1.7.11.1/bin:$PATH
$ which git
/Users/xxx/git-1.7.11.1/bin/git
$ git pull
git: 'pull' is not a git command. See 'git --help'.

Did you mean this?
        shell 
```

我还需要在 Git 包中更改什么以使其可移植（也就是在每个位置运行）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:25:32.873

git-scm 安装程序似乎将所有内容安装在 /usr/local/git 中（通过查看 git-scm 下载中的 uninstall.sh 文件推断）。因此，重命名 git 目录应该没有问题。您需要做的是增加您的路径，如下所示：

```
PATH=$PATH:/usr/local/git-1.7.11.1/bin 
```

这样`git`就可以找到它的所有帮助程序。

请注意，如果您尝试从同一个 shell 调用多个 git 版本，这种方法将不起作用；所有版本都将从 PATH 的第一个目录中获取其帮助程序。

[编辑] 您还需要设置环境变量 GIT_EXEC_PATH。采用

```
git --exec-path 
```

了解它目前是什么，然后使用一个新的：

> git --exec-path=<...git-1.7.11.1/...>

或通过定义 GIT_EXEC_PATH。

此外，构建路径似乎内置在`git`可执行文件中，这可能表明`git`它的支持文件位于默认位置。

```
ebg@ebg(147)$ strings git | grep usr
/usr/local/git
/usr/local/bin:/usr/bin:/bin

ebg@ebg(148)$ strings /usr/bin/git | grep usr
/Applications/Xcode.app/Contents/Developer/usr
/usr/local/bin:/usr/bin:/bin 
```

所以，使用 GIT_EXEC_PATH。有关更多信息，请参阅[GIT 手册页](http://bit.ly/Z8Eyoy)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:50:20.497

我需要设置`GIT_EXEC_PATH`：

```
$ ~/git-1.7.11.1/bin/git pull
git: 'pull' is not a git command. See 'git --help'.

Did you mean this?
        shell
$ export GIT_EXEC_PATH=~/git-1.7.11.1/libexec/git-core/
$ ~/git-1.7.11.1/bin/git pull
Password for 'https://xxx': 
```

# javascript - 无滚动的分页

> ID：15787388
> 
> 赞同：0
> 
> 时间：2013-04-03T12:28:12.893
> 
> 标签：javascript, jquery, html, jquery-pagination

我正在尝试使用 jquery 进行分页。当我单击下一个按钮时，我有一个要显示的内容。在此事件期间，内容的第一行和最后一行显示一半，即显示一半的内容。所以我想在 div 的边框和内容之间留出空间，以便我们可以看到正确的内容.帮我解决问题

```
 <!DOCTYPE html>
  <html>
  <head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js">                 </script>
  <style type="text/css" media="screen">
 body {background-color:white; font:16px Helvetica, Arial; color:black;}
.pagination {margin:auto; display:block; height:275px; width:300px; position:relative;     overflow:hidden; border:1px solid black;}
</style>
 <script>
$(document).ready(function() {
//$('.pagination').children().wrapAll('<div class="content"/>');
$('.next').click(function() {
    var height = 10;
    var current = ($('.content').css('margin-top') || '0px');
    var pag = document.getElementById("page");
    //for(i=0; i<pag.
    $('.content').css('margin-top',current.substring(0,current.length-2) - $('.pagination').height() + 'px');
});
});

function clk()
{
    var idc = document.getElementById("c");
    //console.log(idc);
}

function test()
{
    var idc = document.getElementById("c");
    var tn = idc.childNodes[0];
    var sp = document.createElement("span");
    var range = document.createRange();

    range.selectNode(tn);
    range.surroundContents(sp);

    console.log("test" + sp.offsetTop);

    return false;
}
  </script>
  </head>
  <body>
   <div id="page" class="pagination" style="padding:5px">
<div class="content">
    <p>The House of Representatives shall be composed of Members chosen every second Year by the People of the several States, and the Electors in each State shall have the Qualifications requisite for Electors of the most numerous Branch of the State Legislature.</p>
    <p>No Person shall be a Representative who shall not have attained to the Age of twenty five Years, and been seven Years a Citizen of the United States, and who shall not, when elected, be an Inhabitant of that State in which he shall be chosen.</p>
    <p>(Representatives and direct Taxes shall be apportioned among the several States which may be included within this Union, according to their respective Numbers, which shall be determined by adding to the whole Number of free Persons, including those bound to Service for a Term of Years, and excluding Indians not taxed, three fifths of all other Persons.) (The previous sentence in parentheses was modified by the 14th Amendment, section 2.) The actual Enumeration shall be made within three Years after the first Meeting of the <span id="c" onclick="clk()">Congress</span> of the United States, and within every subsequent Term of ten Years, in such Manner as they shall by Law direct. The Number of Representatives shall not exceed one for every thirty Thousand, but each State shall have at Least one Representative; and until such enumeration shall be made, the State of New Hampshire shall be entitled to chuse three, Massachusetts eight, Rhode Island and Providence Plantations one, Connecticut five, New York six, New Jersey four, Pennsylvania eight, Delaware one, Maryland six, Virginia ten, North Carolina five, South Carolina five and Georgia three.</p>
    <p>When vacancies happen in the Representation from any State, the Executive Authority thereof shall issue Writs of Election to fill such Vacancies.</p>
    <p>The House of Representatives shall chuse their Speaker and other Officers; and shall have the sole Power of Impeachment.</p>
</div>
    </div>
     <ul>
     <li>Previous</li>
     <li class="next">Next</li>
<li><a href="" onclick="return test()">Click</a></li>
     </body>
    </html> 
```

# handler - 未知的 url 处理程序类型，未定义 execfile

> ID：15787391
> 
> 赞同：0
> 
> 时间：2013-04-03T12:28:23.473
> 
> 标签：handler, execfile

尝试实施教程“Hello world”。

当我选择 Python 3.1 时，什么都没有发生，并且日志说 execfile(script_path, globals_) 没有定义。

当我使用 python 2.7 时，终端窗口打开，但有一段时间没有任何反应，然后关闭。日志文件说：

```
 File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\yaml_listener.py", line 177, in _HandleEvents
    raise yaml_errors.EventError(e, event_object)
google.appengine.api.yaml_errors.EventError: Unknown url handler type.
<URLMap 
    auth_fail_action=redirect 
    static_dir=None 
    secure=default 
    http_headers=None 
    url=/.* 
    static_files=None 
    expiration=None 
    upload=None 
    api_endpoint=None 
    script=None 
    application_readable=None 
    position=None 
    login=optional 
    mime_type=None 
    require_matching_file=None
    >
  in "C:\Users\Bill\Programmes\helloworld\app.yaml", line 9, column 5 
```

我正在使用介绍中的代码。关于可能出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:34:41.270

这似乎是 appEngine 问题.. 如果是这样，如果你想尝试，我有一个解决方案，

卸载 python 3.3 并安装这个 2.7

[http://www.python.org/download/releases/2.7/](http://www.python.org/download/releases/2.7/)

打开谷歌应用引擎启动器..

去编辑>首选项>python路径>选择路径pythonw.exe希望它适合你

下面可能也有帮助

[在 Windows 操作系统中在 python 中运行 Google 应用程序时出错](https://stackoverflow.com/questions/10257243/error-in-running-google-apps-in-python-in-windows-os)

希望能帮助到你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T20:51:56.883

[来自http://www.python.org/download/](http://www.python.org/download/)的Python 2.75对我来说似乎适用于谷歌应用引擎。

# android - 无法访问另一个活动类的方法

> ID：15787392
> 
> 赞同：1
> 
> 时间：2013-04-03T12:28:26.990
> 
> 标签：android, methods

我在这一行收到空指针异常错误，这`Log.d("Density",obj.getDensity());` 是整个代码：

```
public class MainActivity extends Activity {

AndroidUtil obj = null;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Log.d("Phone Model",AndroidUtil.PHONE_MODEL);
    Log.d("API Level","::"+AndroidUtil.APILEVEL);
    Log.d("Android Version",AndroidUtil.VERSION);
    Log.d("Code Name",AndroidUtil.CODE_NAME);
    Log.d("BootLoader",AndroidUtil.BOOT_LOADER);
    Log.d("Board",AndroidUtil.BOARD);
    Log.d("Brand",AndroidUtil.BRAND);
    Log.d("Manufacturer",AndroidUtil.MANUFACTURER);
    Log.d("Hardware",AndroidUtil.HARDWARE);
    //Log.d("Pixel Width","::"+obj.getWidthInPx());
    //Log.d("Pixel Height","::"+obj.getHeightInPx());
    //Log.d("Dp Width","::"+obj.getWidthInDp());
    //Log.d("Dp Height","::"+obj.getHeightInDp());
    Log.d("Density",obj.getDensity());
} 
```

}

现在我的 AndroidUtil 课程在这里

```
public class AndroidUtil extends Activity {
    int Measuredwidth = 0;  
    int Measuredheight = 0;  
    Point size = new Point();

    WindowManager w = getWindowManager();

    static final int APILEVEL = android.os.Build.VERSION.SDK_INT;

    static final String PHONE_MODEL = android.os.Build.MODEL;

    static final String BOOT_LOADER = android.os.Build.BOOTLOADER;

    static final String BOARD = android.os.Build.BOARD;

    static final String VERSION = android.os.Build.VERSION.RELEASE;

    static final String CODE_NAME = android.os.Build.VERSION.CODENAME;

    static final String BRAND = android.os.Build.BRAND;

    static final String MANUFACTURER = android.os.Build.MANUFACTURER;

    static final String HARDWARE = android.os.Build.HARDWARE;   

    @SuppressWarnings("deprecation")
    @SuppressLint("NewApi")
    public int getHeightInPx(){

        if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
              w.getDefaultDisplay().getSize(size);
              Measuredheight = size.y; 
         }else{
              Display d = w.getDefaultDisplay(); 
              Measuredheight = d.getHeight(); 
        }
        return Measuredheight;
    }

    @SuppressWarnings("deprecation")
    @SuppressLint("NewApi")
    public int getWidthInPx(){
        Log.d("Width","called");
        if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
              w.getDefaultDisplay().getSize(size);
              Measuredwidth = size.x; 
         }else{
              Display d = w.getDefaultDisplay(); 
              Measuredwidth = d.getWidth(); 
        }
        return Measuredwidth;
    }

    public float getHeightInDp(){
        Display display = getWindowManager().getDefaultDisplay();
        DisplayMetrics outMetrics = new DisplayMetrics ();
        display.getMetrics(outMetrics);

        float density  = getResources().getDisplayMetrics().density;
        float dpHeight = outMetrics.heightPixels / density;
        return dpHeight;
    }

    public float getWidthInDp(){
        Display display = getWindowManager().getDefaultDisplay();
        DisplayMetrics outMetrics = new DisplayMetrics ();
        display.getMetrics(outMetrics);

        float density  = getResources().getDisplayMetrics().density;
        float dpWidth  = outMetrics.widthPixels / density;
        return dpWidth;
    }

    public String getDensity(){
        Log.d("density","called");
        String DPI = null;
        switch (getResources().getDisplayMetrics().densityDpi) {
        case DisplayMetrics.DENSITY_LOW:
            DPI = "Low Density";
            break;
        case DisplayMetrics.DENSITY_MEDIUM:
            DPI = "Medium Density";
            break;
        case DisplayMetrics.DENSITY_HIGH:
            DPI = "High Density";
            break;
        case DisplayMetrics.DENSITY_XHIGH:
            DPI = "Extra High Density";
            break;
        }
        return DPI;
    }
} 
```

记录猫错误：

```
 04-03 17:51:57.799: E/filePathInTheme(5781): fallback to res
04-03 17:51:57.829: E/filePathInTheme(5781): fallback to res
04-03 17:51:57.859: D/Phone Model(5781): A100
04-03 17:51:57.859: D/API Level(5781): ::15
04-03 17:51:57.859: D/Android Version(5781): 4.0.4
04-03 17:51:57.859: D/Code Name(5781): REL
04-03 17:51:57.859: D/BootLoader(5781): unknown
04-03 17:51:57.859: D/Board(5781): 7x27
04-03 17:51:57.859: D/Brand(5781): China Telecom
04-03 17:51:57.859: D/Manufacturer(5781): Micromax
04-03 17:51:57.859: D/Hardware(5781): qcom
04-03 17:51:57.869: W/dalvikvm(5781): threadid=1: thread exiting with uncaught exception (group=0x40a839d8)
04-03 17:51:57.869: E/AndroidRuntime(5781): FATAL EXCEPTION: main
04-03 17:51:57.869: E/AndroidRuntime(5781): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.andutil/com.andutil.MainActivity}: java.lang.NullPointerException
04-03 17:51:57.869: E/AndroidRuntime(5781):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1961)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1986)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1152)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at android.os.Looper.loop(Looper.java:137)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at android.app.ActivityThread.main(ActivityThread.java:4450)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at java.lang.reflect.Method.invokeNative(Native Method)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at java.lang.reflect.Method.invoke(Method.java:511)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at dalvik.system.NativeStart.main(Native Method)
04-03 17:51:57.869: E/AndroidRuntime(5781): Caused by: java.lang.NullPointerException
04-03 17:51:57.869: E/AndroidRuntime(5781):     at com.andutil.MainActivity.onCreate(MainActivity.java:28)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at android.app.Activity.performCreate(Activity.java:4465)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-03 17:51:57.869: E/AndroidRuntime(5781):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1925)
04-03 17:51:57.869: E/AndroidRuntime(5781):     ... 11 more 
```

请帮忙 ！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T12:41:38.207

像这样初始化活动不是一个好的选择（而且我很确定它在任何情况下都不起作用，它的上下文将始终为空）。在我看来，要实现您想要做的事情，最好的方法是创建一个 AndroidUtils 类，如下所示：

```
public class AndroidUtils {

     private Context mContext;

     public AndroidUtils(Context context){
          this.mContext = context;
     }

} 
```

并且在任何地方你都需要一个上下文变量，`getDensity()`等等。使用`mContext`. 之后，您可以从任何 Activity 中使用此类，如下所示：

```
AndroidUtils mObject = new AndroidUtils(MainActivity.this);
mObject.getDensity(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:33:29.017

您正在访问一个为 null 的活动，因此未初始化。

```
AndroidUtil obj = null;
...
Log.d("Density",obj.getDensity()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:35:34.400

好吧，您确实分配`null`给`obj`：

```
AndroidUtil obj = null; 
```

如果你想要一个`Activity`实例，你必须做一些非常肮脏的黑客攻击。而不是保存对它的引用`AndroidUtil`和调用方法，你应该使用它`Intents`来传达你的`Activities`.

1.  您可以使用`startActivityForResult`, 或
2.  您可以`Activity`使用常规启动`Intent`，然后让它在全局对象上注册。

看看你的代码做了什么，这些都是坏主意。我只是将代码移动`AndroidUtil`到您的 main`Activity`中。

如果您想将代码保留在 main 之外`Activity`，请将其实现为带有 as 参数的静态助手`Activity`，而不是通过 sublcasing`Activity`来访问其设施。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:35:35.650

不是因为你声明对象为空吗？==>`AndroidUtil obj = null;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T13:08:33.793

只需添加这些代码

```
 String print = AndroidUtil.class.getDensity();

 Log.d("Density",print); 
```

# windows-phone-7 - WP 树状列表导航

> ID：15787393
> 
> 赞同：1
> 
> 时间：2013-04-03T12:28:27.997
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone, treelist

在 WP 应用程序中，我有树状列表，用户可以在其中查看类别和项目。

如果用户单击项目-> 我将导航到项目页面。

但是如果用户想要更深入并单击类别 - > 我需要向他显示内部类别和项目，那么如果可以再次打开此页面并显示内部类别和项目，那就太好了，因为它**绝对有同样的逻辑**。

据我所知，我不能运行一个的多个实例`Page`。

我可以在此页面的当前实例上显示内部类别，只需更改列表框内容，但这样我遇到了 2 个问题：

1.  在后退按钮按下我需要显示以前的列表框，所以我需要将所有以前打开的列表框存储在类似`Stack`
2.  我想为用户显示页面导航动画（也用于后退键），他会看到他在树列表中更深入，或者他回到以前的状态。

也许你们中的一些人已经做过同样的事情，你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:10:47.000

您可以拥有同一页面的多个实例。

假设每个类别都有一个唯一的 ID，您只需导航到页面并在查询字符串中提供一个 ID 参数。为最顶层的数据保留一个 ID（例如 0）。

因此，您的类别页面最初将像这样调用

```
NavigationService.Navigate("MyCategoriesPage?categoryId=0"); 
```

在 OnNavigatedTo 方法中，您解析 categoryId 并根据 Id 从后端或存储读取数据。

当用户点击一个类别时，您会根据类别 id 导航到同一页面，例如：

```
NavigationService.Navigate("MyCategoriesPage?categoryId=12"); 
```

Windows Phone 保留后退堆栈，因此将处理后退按钮上的导航。您应该记住的唯一一件事是，如果用户停用并重新激活应用程序，该应用程序可能会被删除。在这种情况下，不会保留列表框数据。要处理它，请确保您遵循 OnNavigatedTo 方法中的标准模式：

```
if (!_isInitialized)
{
   int categoryId = int.Parse(NavigationContext.QueryString["categoryId"]);
   ReadData(categoryId);
   _isInitialized = true;
} 
```

# ios - 目标 - C：在 Xcode 中添加到以前保存的 NSUserDefaults

> ID：15787400
> 
> 赞同：-3
> 
> 时间：2013-04-03T12:28:52.510
> 
> 标签：ios, objective-c, uiviewcontroller, uilabel, nsuserdefaults

我正在用 Xcode 制作一个游戏，其中包括每个级别的评分系统。在这里，我有一些通过使用委托获得`NSString`( ) 的代码。`passedValue1`

这是委托的代码：

```
LevelCompleteLevel1 
```

**。H**

```
#import "ViewController.h"
@interface LevelCompleteLevel1 : UIViewController{
IBOutlet UILabel *label;

ViewController *secondviewData;
}
@property (nonatomic, retain)ViewController*secondviewData; 
```

**.m**

```
ViewController *second = [[ViewController alloc] initWithNibName:nil bundle:nil];
self.secondviewData = second;
secondviewData.passedValue1 = label.text;
[self presentModalViewController:second animated:YES]; 
```

在`.m`我将当前标签中的一个值发送`viewcontroller`到另一个`view controller`我发送的值被称为`passedValue1`

一旦我发送了我需要显示的值并保存在我的`ViewController`

```
ViewController 
```

**。H**

```
@interface ViewController : UIViewController{

IBOutlet UILabel *label;
NSString *passedValue1;
}
@property (nonatomic, retain)NSString *passedValue1;

@end 
```

**.m**

首先我...`@synthesize passedValue1;`

然后我添加代码以接收我的值`viewDidLoad`并将我的值显示在`UILabel`

```
- (void)viewDidLoad
{ 
    if(passedValue1){
        label.text = passedValue1;

        NSUserDefaults *defults = [NSUserDefaults standardUserDefaults];
        [defults setObject:label.text forKey:@"labelkey"];
        [defults synchronize];
    }
    label.text = [[NSUserDefaults standardUserDefaults]objectForKey:@"labelkey"];
} 
```

一旦我显示了值，我就使用`NSUserDefault`. 但是，一旦我重玩了我的游戏并获得了另一个得分值，我想将新`passedValue1`值添加到当前保存的值中......

**例如：**

假设我玩了我的关卡，我得到了 10 的得分值。然后保存该值并重播我的关卡。然后我想获取保存的值并将其添加到我刚刚得分的值中。所以这就是说我得分的第二个值是 20。然后我希望我的代码将它们加在一起并给我一个 30 的值。

提前致谢。

**编辑** 这是我正在使用的代码：

```
- (void)viewDidLoad
{ 

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib
    if(passedValue1){
        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

        NSObject * object = [prefs objectForKey:@"lablekey"];
        if(object != nil){
            NSUserDefaults *defults = [NSUserDefaults standardUserDefaults];
            [defults setObject:passedValue1 forKey:@"lablekey"];
            [defults synchronize];
        }
        else{
        NSUserDefaults *defults = [NSUserDefaults standardUserDefaults];

        NSInteger readScore=[[[NSUserDefaults standardUserDefaults] objectForKey:@"labelkey"] integerValue];
        NSInteger newValue=readScore+[passedValue1 integerValue];
        [defults setObject:[NSString stringWithFormat:@"%d",newValue] forKey:@"labelkey"];
        [defults synchronize];
        }
    }
    label.text = [[NSUserDefaults standardUserDefaults]objectForKey:@"lablekey"];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:34:59.960

从 userDefaults 读取，添加您当前的分数：

```
//assuming passedValue1 is your new score

NSInteger readScore=[[NSUserDefaults standardUserDefaults] objectForKey:@"labelkey"] integerValue];
NSInteger newValue=readScore+[passedValue1 integerValue]; 
```

然后再次保存：

```
NSUserDefaults *defults = [NSUserDefaults standardUserDefaults];
[defults setObject:[NSString stringWithFormat:@"%d",newValue] forKey:@"labelkey"];
[defults synchronize]; 
```

**编辑：** **您在 labelKey 中有错字，这就是为什么我将它存储在一个字符串中并使用它，这样即使是错误的，您也可能不会出现任何错字错误。**

将您的方法更改为：

```
- (void)viewDidLoad{ 
    [super viewDidLoad];
    NSString *key=@"labelKey";

    // Do any additional setup after loading the view, typically from a nib
    if(passedValue1){
        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

        NSObject * object = [prefs objectForKey:key];
        if(object != nil){
            NSUserDefaults *defults = [NSUserDefaults standardUserDefaults];
            [defults setObject:passedValue1 forKey:key];
            [defults synchronize];
        }
        else{
            NSUserDefaults *defults = [NSUserDefaults standardUserDefaults];

            NSInteger readScore=[[[NSUserDefaults standardUserDefaults] objectForKey:key] integerValue];
            NSInteger newValue=readScore+[passedValue1 integerValue];
            [defults setObject:[NSString stringWithFormat:@"%d",newValue] forKey:key];
            [defults synchronize];
        }
    }
    label.text = [[NSUserDefaults standardUserDefaults]objectForKey:key];
} 
```

# java - 压缩文件到gz

> ID：15787402
> 
> 赞同：0
> 
> 时间：2013-04-03T12:28:54.627
> 
> 标签：java, compression, gzip

是否存在其他方式以便更好地压缩到 gz？

```
FileOutputStream outFile = new FileOutputStream(outFileName);
GZIPOutputStream out = new GZIPOutputStream(outFile);
byte[] buf = new byte[1024];
int len;
while ((len = in.read(buf)) > 0) 
{
    out.write(buf, 0, len);
}
in.close();
out.close();
outFile.close(); 
```

# excel - 在 VBScript 中将 .csv 文件转换为 Excel

> ID：15787403
> 
> 赞同：0
> 
> 时间：2013-04-03T12:28:55.517
> 
> 标签：excel, vbscript, csv

我正在编写一个程序来将 .csv 文件转换为 VBScript 中的 Excel 文件。

这是我的 .csv 文件的一部分（它也有一个标题）

> 报告标题,货物性能特征报告,,报告标题,货物性能特征报告,,,,,,, 开始日期,8/7/2012,,,,,,,,,,,模板名称,XXXX-Test-VVV-两个职位,,,,,,,,,, 总产量,,,,,,,,,,,,
> 
> ,ID,名称,产品描述,发布日期,产品类型,重量 (kg),重量 (lb),价格,产品体积,利润,总值 (000),315616102,Lux Honey,沐浴露,8/1/2012 ,C,0.06,0.06,93,793920,0,7455703038 ,579780206,清除去头屑,洗发水,8/1/2012,C,0.06,0.06,60.5,1325980,2.05,8022179000 ,761713106,Loreal Divine, 8/1/2012,F,0.12,0.12,46.52,3314780,5.07,15420356560

这是我为转换编写的**更新的 VBScript 代码。**

```
Dim xlApp, workBook1, workBook2,aSheets, fileName, aInfo2,aInfo1,oExcel
  Const XlPlatform = "xlWindows"
  Const xlDelimited = 1
  Const xlTextQualifierDoubleQuote = 1
  Const xlTextFormat = 2
  Const xlGeneralFormat = 1

  Set oExcel = Sys.OleObject("Excel.Application")  
  Set xlApp = CreateObject("Excel.Application")  

  Set workBook1 = xlApp.ActiveWorkBook

  Set workBook1 = xlApp.WorkBooks.OpenText("Y:\Personal Folders\XXXX\TestFile1.csv",XlPlatform, 1, xlDelimited, xlTextQualifierDoubleQuote, true, false, false, true, false, true, "CRLF", Array(Array (1,2),Array (2,2),Array (3,2),Array (4,1),Array (5,2),Array (6,1),Array (7,1),Array (8,1),Array (9,1),Array (10,1),Array (11,1)), true, false)

  Set workBook1 = xlApp.ActiveWorkBook
  xlApp.Visible = true

  workBook1.Save "Y:\Personal Folders\XXXX\x.xlsx", xlNormal
  workBook1.Close 
```

但是Excel文件中的数据不是表格形式。我想以表格形式显示数据。

谁能帮我根据分隔符提取数据。我也需要excel文件中的标题部分。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:07:09.990

您更新的问题中的代码存在几个问题：

*   `Const XlPlatform = "xlWindows"`

    `XlPlatform`必须是数值，而不是字符串。[枚举](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.xlplatform%28v=office.11%29.aspx)`xlWindows`成员的值为。但是，由于无论如何这是默认值，您可以在调用时简单地省略此值。`2``OpenText`

*   `Set workBook1 = xlApp.ActiveWorkBook`

    新生成的 Excel 实例没有活动工作簿，因此在实际打开或创建工作簿之前将其分配给变量是没有意义的。

*   `Set workBook1 = xlApp.WorkBooks.OpenText(...)`

    该`OpenText`方法不返回对象，因此在上面的语句中没有要分配的内容。

*   `...ooks.OpenText(..., true, "CRLF", ...)`

    字符串`"CRLF"`不是字符。为什么还要将换行符指定为分隔符？

*   `..., Array(...), true, false)`

    您指定的最后 2 个参数是`TextVisualLayout`（指定从左到右/从右到左）和`DecimalSeparator`. 它们都不是布尔值。如果您不确定是否需要它们，只需省略它们即可。

*   `workBook1.Save "Y:\Personal Folders\XXXX\x.xlsx", xlNormal`

    该`Save`方法以当前名称保存工作簿。要以不同的名称保存工作簿，您必须使用该[`SaveAs`](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.saveas%28v=vs.80%29.aspx)方法。该常量`xlNormal`未在代码中的任何位置定义。另外，`xlNormal`生成 Excel 97/2003 工作簿 ( `.xls`)。要将工作簿另存为 Excel 2007/2010 工作簿 ( `.xlsx`)，您必须使用`xlOpenXMLWorkbook`常量。

以下代码对我有用：

```
Const xlDelimited                =  1
Const xlTextQualifierDoubleQuote =  1
Const xlOpenXMLWorkbook          = 51

Set xl = CreateObject("Excel.Application")

xl.Workbooks.OpenText "Y:\Personal Folders\XXXX\TestFile1.csv", , , xlDelimited _
  , xlTextQualifierDoubleQuote, True, False, False, True, False, False, _
  , Array(Array(1,2), Array(2,2), Array(3,2), Array(4,1), Array(5,2) _
  , Array(6,1), Array(7,1), Array(8,1), Array(9,1), Array(10,1), Array(11,1))
Set wb = xl.ActiveWorkbook

wb.SaveAs "Y:\Personal Folders\XXXX\x.xlsx", xlOpenXMLWorkbook, , , , False
wb.Close

xl.Quit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:11:44.453

我正在使用 Excel 2003。以下是我必须指定 .csv 文件格式的代码

```
Set xl = CreateObject("Excel.Application")

Set wb = xl.Workbooks.OpenText "input.csv", , , xlDelimited, xlDoubleQuote, _
  False, False, True, , , , dataTypes 
```

从[Vbscript 将 csv 导入 excel](https://stackoverflow.com/questions/12961835/vbscript-to-import-csv-into-excel?rq=1)

您能否**解释一下**以下行的功能？

```
Set wb = xl.Workbooks.OpenText "input.csv", , , xlDelimited, xlDoubleQuote, _
      False, False, True, , , , dataTypes 
```

**我对上述 .csv 文件的 OpenText 属性的实现**

```
Set workBook1 = xlApp.WorkBooks.OpenText("D:\Personal Folders\XXXX\TestFile1.csv", , ,xlDelimited, ,false ,false ,false ,True,false ,false ,"~") 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T12:39:46.177

您需要指定要保存的格式。以下将其指定为 2003 年的标准 .xls

```
 Workbooks.Open Filename:= _
    "D:\Personal Folders\XXXXX\TestFile1.csv"

    ActiveWorkbook.SaveAs Filename:= _
    "D:\Personal Folders\XXXXX\x.xls", FileFormat:=xlNormal

    ActiveWorkbook.Close 
```

也可以试试

```
ActiveWorkbook.SaveAs Filename:= _
    "D:\Personal Folders\XXXXX\x.xls", FileFormat:= 56 
```

# 3d - 使用 LibGDX 动画 3d 模型

> ID：15787409
> 
> 赞同：1
> 
> 时间：2013-04-03T12:29:18.643
> 
> 标签：3d, libgdx, 3d-model

我即将使用 LibGDX 创建一个 3D 游戏。

LibGDX 文档在涉及 3d 时非常混乱，我无法理解如何使用 3d 模型。请对这个话题有所了解。

网络上有一些例子并没有真正起作用或只是过时了。我知道有一个新的 3d API 即将发布，我还没有使用它，我更喜欢稳定的 LibGDX 版本。

1.  **因此，我需要做的第一件也是非常基本的事情是导入我在搅拌机 (.obj) 中创建的 3d 模型，并在其上呈现纹理。**
2.  **第二个是对动画模型做同样的事情，就像老兄在[那个](http://www.youtube.com/watch?v=3aWZRDR6zYk)视频中所做的那样。**

这些是帮助我入门的基础知识。一个简单的代码片段将不胜感激。

如果有一些简单的“Hello world”3d 教程来了解如何将 LibGDX 用于 3d 场景，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-17T05:38:06.190

本教程将指导您使用 LibGDX 提供的 3d api 基础知识。

[http://blog.xoppa.com/basic-3d-using-libgdx-2/](http://blog.xoppa.com/basic-3d-using-libgdx-2/)

# jquery - jQuery UI Accordion，默认展开

> ID：15787412
> 
> 赞同：2
> 
> 时间：2013-04-03T12:29:30.540
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion

我正在使用 jQueryUI Accordion 插件进行站点导航。我的页面是在服务器端呈现的，当前选项卡获取一个属性`defaultactive=true`。标记如下：

```
<ul class="accordion">
    <li>One</li>
    <li defaultactive="true">Two</li>
    <li>Three</li>
</ul> 
```

我知道这个片段可以按预期工作：

```
$("#accordion").accordion({ active: 2 }); 
```

我必须写什么来获得容器`defaultactive-attribute`内li 元素的确切位置（从零开始） `ul`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T12:32:07.340

由于所有`<li>`元素都是兄弟元素，因此可以使用[index()](http://api.jquery.com/index/)：

```
$(".accordion").accordion({
    active: $(".accordion li[defaultactive=true]").index()
}); 
```

请注意，根据您的标记，您应该使用类选择器 ( `.accordion`)，而不是 id 选择器 ( `#accordion`)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T12:32:18.807

您可以使用`index()`来实现这一点：

```
$('.accordion li[defaultactive="true"]').index() 
```

[**示例小提琴**](http://jsfiddle.net/dm74e/)

# java - Eclipse ADT - Android 4.2.2 示例项目包含数百个错误

> ID：15787416
> 
> 赞同：0
> 
> 时间：2013-04-03T12:29:38.783
> 
> 标签：java, android, eclipse, adt, sample

我是 Android 编程的初学者并尝试查看示例项目，从`Eclipse ADT (v21.1.0)`我选择 New Android Sample -> `4.2.2`-> 并有 3 个示例选择（Support4Demo、11Demo、...）每个都有 100+错误

大多数错误是`"cannot be resolved to type"`错误和压倒一切的错误

我究竟做错了什么？我用的是最新的eclipse和SDK（一起下载的）

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:51:59.130

请检查您在项目中使用的 SDK android 的版本，检查 SDK Android 的路径和 JDK 的版本。只有这些选项。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:17:57.220

搜索后，我发现 Android 支持库的最新版本（2013 年 2 月的第 12 版）不包含它应该具有的一些类（FragmentTabHost 等）

尝试再次删除和下载，但它再次没有包含它应该包含的类，

我找到了上一个版本的链接（如果你想要一个不同的版本，你可以更改数字 - 01,02...,09,10,11,12）

[http://dl.google.com/android/repository/support_r11.zip](http://dl.google.com/android/repository/support_r11.zip)

我替换了 support 文件夹，复制了新的（旧的）jar ，这解决了所有问题。

# zend-framework - Zend 带有附件的电子邮件不在共享服务器上发送

> ID：15787417
> 
> 赞同：0
> 
> 时间：2013-04-03T12:29:47.310
> 
> 标签：zend-framework

我正在使用 Zend Mail 创建带有附件的电子邮件。该电子邮件正在我的本地安装上发送，但它在共享服务器上不起作用。

在错误日志中，我得到以下信息 - PHP 警告：include(Zend/PDF.php): failed to open stream

这是我用于电子邮件附件的一些代码：

```
$pdf = $this->createAttachment($params, "1");
$at = $this->mail->createAttachment($pdf->render());
$at->type = 'application/pdf';
$at->disposition = Zend_Mime::DISPOSITION_ATTACHMENT;
$at->encoding = Zend_Mime::ENCODING_BASE64;
$at->filename = 'invoice.pdf';

function createAttachment($params, $type)
{
     $pdf = Zend_PDF::load("/system/assets/template.pdf");
            ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:38:38.570

这应该是：

```
Zend_Pdf::load("/system/assets/template.pdf"); 
```

（注意“Pdf”的情况）。我猜您在本地使用不区分大小写的文件系统，但在共享服务器上区分大小写。

# php - 计算联接表中的结果并在侧边栏中的 () 之间显示

> ID：15787419
> 
> 赞同：1
> 
> 时间：2013-04-03T12:29:52.187
> 
> 标签：php, mysql, codeigniter, count

我有一个带有类别的侧边栏。正如你在这里看到的：http: [//kees.een-site-bouwen.nl/](http://kees.een-site-bouwen.nl/)

url 中的类别 ID。带有 uri 段 (3) 当您单击其中一个类别时，例如网页设计。显示了一些工厂。这些工厂与类别有联系。所以当类别 id = 11 时，会显示类别 id=11 的工厂。

***但现在我想展示该类别中有多少工厂。输出将显示在***

`()`在这里： http: [//kees.een-site-bouwen.nl/](http://kees.een-site-bouwen.nl/)

所以我的实际问题是：我**如何 count_all_results() 所以它只显示位于该类别中的工厂？**

我试过的。

```
<?php
if (isset($results) && is_array($results)) { 
foreach ($results as $key => $row) { 
$id = $row->idcategorieen; 
$segment3 = $this->uri->segment(3); 
if ($id == $segment3) { 

echo '<h2>Categorie:', '&nbsp;' , $row->Categorie;  
echo '<h2>';
echo br(1);
echo '<p class="field">';
echo '<h3><label class="field">Aantal:</label></h3>', $this->db->count_all_results('bedrijven');
echo '</p>';
echo br(1); 
break;
} 
}
}
?>
<br />
<h4>Bedrijven</h4>
<hr>
<br />
<?php foreach($results as $item):?>

<p>Bedrijfsnaam: <a href="<?php echo base_url()?>home/showindividueel/<?php echo $item->idbedrijven?>">
<?= $item->Bedrijfsnaam   ?></a><br /></p> 
 </tr>
 <?php endforeach;?> 
```

这显示了我数据库中的所有工厂。但我只需要特定类别中的那些。

侧边栏代码：

```
 echo '<ul>';
        if(isset($cat) && is_array($cat)){
            foreach($links as $k => $value)
                {
                    echo '<li>';
                    echo '<br>';
                    echo '<a href="'.base_url().'home/categorie/'.$value->idcategorieen.' ">' .$value->Categorie. '</a>';
                    echo nbs(1);
                    echo '(';
                    echo ')';
                    echo '</li>';
                }
            }
        echo '<ul>'; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:57:08.803

尝试更换

```
echo '<h3><label class="field">Aantal:</label></h3>', $this->db->count_all_results('bedrijven'); 
```

有以下

```
echo '<h3><label class="field">Aantal:</label></h3>', count($results); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T09:58:23.957

我使用控制器中的新功能解决了我的问题。

我的控制器：

```
$data['counts'] = $this->bedrijven_model->bedrijf_categorie(); 
```

我的模型：

```
function bedrijf_categorie()
{

    $sql = "
    SELECT count(b.idbedrijven) as ItemCount, c.Categorie as Categorie
    FROM `bedrijven` b
    INNER JOIN `bedrijfcategorieen` bc
    ON bc.idbedrijven = b.idbedrijven
    INNER JOIN `categorieen` c
    ON c.idcategorieen = bc.idcategorieen
    GROUP BY c.idcategorieen
    ";
    $query = $this->db->query($sql);
    return $query->result_array();
} 
```

我的看法：

```
 <?php   
    echo '<ul>';
            foreach($counts as $count){

                    echo '<li>';
                    echo '<a href="'.base_url().'home/categorieen/'.$count['Categorie'].' ">' .$count['Categorie']. '</a>';
                    echo nbs(1);
                    echo '(';
                    echo $count['ItemCount'];
                    echo ')';
                    echo '</li>';
                }
    echo '</ul>';
    ?> 
```

反正。感谢帮助过的人。

# php - 移动站点时的htaccess问题

> ID：15787422
> 
> 赞同：1
> 
> 时间：2013-04-03T12:30:02.267
> 
> 标签：php, apache, .htaccess, mod-rewrite

我有一个站点已移至另一台服务器上的测试区域。网址是：

[http://www.example.co.uk/clientarea/royston/the_team](http://www.example.co.uk/clientarea/royston/the_team)（这不是一个实时站点，因此该链接实际上不起作用）

当该站点在实时服务器上时，它将是：

[http://www.example.co.uk/the_team](http://www.example.co.uk/the_team)

我有一个看起来像这样的 htaccess 文件：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

##Remove Trailing Slashes
RewriteRule ^(.+)/$ http://%{HTTP_HOST}/$1 [R=301,L]

##Ignore
RewriteCond %{REQUEST_URI} !^/admin
RewriteCond %{REQUEST_URI} !^/css
RewriteCond %{REQUEST_URI} !^/images
RewriteCond %{REQUEST_URI} !^/includes
RewriteCond %{REQUEST_URI} !^/internal
RewriteCond %{REQUEST_URI} !^/modules
RewriteCond %{REQUEST_URI} !^/scripts

##Remove .php from filename
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^.]+)$ /$1.php [L] 
```

我需要知道如何更改 htaccess，以便 URL 可以在测试站点上运行。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:40:56.517

更改这些行：

```
RewriteBase /clientarea/royston/ 
```

和

```
RewriteRule ^([^.]+)$ /clientarea/royston/$1.php [L] 
```

**编辑：**你也可以像这样使用你的 ReweireRule 所以你不需要改变它

```
RewriteRule ^([^.]+)$ $1.php [L] 
```

# c# - ASP.NET C# Reportviewer 高度问题

> ID：15787427
> 
> 赞同：1
> 
> 时间：2013-04-03T12:30:28.267
> 
> 标签：c#, asp.net, height, reportviewer

我已经搜索并浏览了许多网站，但没有找到问题的解决方案。

我在我的 asp.net 页面中有报告查看器。我希望报表查看器在整页中可见。我试图指定高度，但它不适合我。

![在此处输入图像描述](https://i.stack.imgur.com/0zEv3.png)

我希望这个控件以整页大小显示。给我一些指导线来设置这个控件的高度。

这是我的代码。

```
<%@ Page Title="" Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs"
    Inherits="SiteManager_Default" %>

<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
    Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>
<html>
<head></head>
<body>
    <form runat="server">
    <asp:ScriptManager runat="server">
    </asp:ScriptManager>
    <rsweb:ReportViewer ID="ReportViewer1" runat="server" Visible="true" AsyncRendering="false"
        SizeToReportContent="true" />
    <script type="text/javascript">
        $(document).ready(function () { $('#<%=ReportViewer1.ClientID%>_fixedTable').css('width', '100%'); });
    </script>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:07:49.553

这是我在 ReportViewer 2010 和 jQuery 中使用的内容（有点像 hack，但它可以工作 ;-)

```
<rsweb:ReportViewer runat="server" ID="rv1" Visible="true" AsyncRendering="false" SizeToReportContent="true" /> 
```

然后

```
<script>
   $(document).ready(function(){$('#<%=rv1.ClientID%>_fixedTable').css('width','100%');});
</script> 
```

希望这会有所帮助；-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:03:53.840

```
 <rsweb:ReportViewer ID="ReportViewer1" runat="server" Font-Names="Verdana" Font-Size="8pt"

ProcessingMode="Remote" Width="100%" Hieght="100%" CssClass="fullheight"> 
```

试试这个...

# break - break 语句不起作用

> ID：15787433
> 
> 赞同：0
> 
> 时间：2013-04-03T12:31:16.013
> 
> 标签：break

我的代码大致如下所示：

```
START  
Recursive method A  
    print("Before Loop")  
    loop:  
    for(Object o: list)  
    {  
          print("Outer loop top")  
       for(Object ob: list2)   
       {  
                 print("Inner loop top")  
          //do stuff with o & ob e.g. recursively call method A under certain conditions  
          if(someCondition true)  
          {  
              print("Entered")  
            break loop;  
          }  
                 print("Inner loop bottom")  
        }   
          print("Outer loop bottom")  
    }  

print("After Loop")  

END 
```

当程序进入 someCondition 为 true 的 if 语句时，它会打印

```
Entered 
```

然后它似乎成功地从两个 for 循环中中断，因为它接下来打印

```
After Loop 
```

接着！！在控制台中打印

```
inner loop bottom  
Outer Loop bottom  
Outer loop top  
inner loop top  
etc. 
```

这怎么可能。方法 A 从超过 1 个地方递归调用，但是，如果下一次打印“内循环底部”的原因，因为该方法再次递归启动，它不会首先打印“内循环底部”！但是会打印“Before loop”，然后是“Outer loop top”，然后是“Inner loop top”，然后是“inner loop bottom”。根据打印语句，它从两个循环中中断，然后跳回到内循环的底部并继续循环通过内循环。到底是怎么回事。请帮忙！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:40:04.530

使用不带标签的 break 会中断当前正在执行的最内层循环。

使用带有标签 foo 的 break 会中断标签为 foo 的语句。

[https://developer.mozilla.org/en/JavaScript/Reference/Statements/break](https://developer.mozilla.org/en/JavaScript/Reference/Statements/break)

break 语句包含一个可选标签，允许程序跳出带标签的语句。break 语句需要嵌套在这个带标签的语句中。带标签的语句可以是任何块语句；它不必以循环语句开头。

学分：[javascript中带标签和不带标签之间的区别是什么](https://stackoverflow.com/questions/5118965/what-the-difference-between-break-with-label-and-without-label-in-javascript)

# cmake - 如何在没有 CMake 的情况下使用 CPack 创建 NSIS 安装程序

> ID：15787434
> 
> 赞同：4
> 
> 时间：2013-04-03T12:31:17.197
> 
> 标签：cmake, nsis, cpack

我想在同一位置安装多个软件。这些软件是二进制文件，包含不受 CMake 管理的文件。我的想法是使用 CPack 和 NSIS 生成器但不使用 CMake，以便将软件安装在用户定义的位置，然后启动将创建环境变量的自定义脚本（在 Windows 下）。

可以用 CPack 做到这一点吗？似乎可以使用 CPackConfig.cmake 文件来完成，但我没有设法定义我想安装的目录。

谢谢你的帮助。

# c# - 如何在 C# 中编写 XML？

> ID：15787435
> 
> 赞同：2
> 
> 时间：2013-04-03T12:31:18.963
> 
> 标签：c#, xml, xmltextwriter

```
<Account nr="401" name="Wasser/Abwasser" income="0.00" expenditure="1,310.74" saldo="-1,310.74" resultText="Es wurden ausgegeben">
    <Accounting date="15.02." refNr="....." description="I/2013"  income="" expenditure="1,310.74" vat="10%" pretax="131.07"/>
  </Account> 
```

我可以使用 XmlTextWriter 但不知道如何继续使用 nr,name .....

```
myXmlTextWriter.WriteStartElement("Account");.....
myXmlTextWriter.WriteElementString("Accounting",...... 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T12:34:18.697

尝试使用`XElement`结束`XAttribute`类。它们是 LINQ to XML 的一部分，它们使使用 XML 变得更加容易。

```
var xml = new XElement("Account",
              new XAttribute("nr", 401),
              new XAttribute("name", "Wasser/Abwasser"),
              new XElement("Accounting",
                  new XAttribute("date", "15.02."),
                  new XAttribute("refNr", "..."))); 
```

那个返回`.ToString()`：

```
<Account nr="401" name="Wasser/Abwasser">
  <Accounting date="15.02." refNr="..." />
</Account> 
```

按照模式填充其余属性，您将拥有所需的内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T12:36:14.300

你会想发出一个`WriteAttributeString`：

```
myXmlTextWriter.WriteAttributeString(null, "nr", null, "401");
myXmlTextWriter.WriteEndElement(); 
```

并在`WriteStartElement`.

你也可以使用这个重载：

```
myXmlTextWriter.WriteAttributeString("nr", "401"); 
```

当然，为所有其他属性复制它。它也适用于子节点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T12:36:18.040

使用 LINQ to XML，您可以非常简单地做到这一点：

```
var document = new XDocument( 
                   new XElement("Account",
                       new XAttribute("nr", 401),
                          ...));
document.WriteTo(myXmlTextWriter); 
```

# php - 为每个用户使用 .htacces 的子域

> ID：15787448
> 
> 赞同：0
> 
> 时间：2013-04-03T12:31:51.063
> 
> 标签：php, apache, .htaccess, amazon-ec2

我正在使用亚马逊 Ec2。我在 .htaccess 方面不专业，我在 .htaccess 中提到过

```
RewriteCond %{HTTP_HOST}    ^([\w-]+).example.com$
RewriteCond %{REQUEST_URI}  !^/example.com/
RewriteRule ^(.*)$          /example.com/$1?subdomain=%1 [LAST,QSA] 
```

当我尝试执行此`username.example.com`操作时`example.com/subdomain?id=username`

我正在使用 EC2 亚马逊服务器。

第一个问题是如果我试图执行，`username.example.com`那么这个域没有得到解决。

第二个问题上面的 htaccess 对我不起作用。如果有人可以解决这将有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:43:09.400

您无法使用`.htaccess`文件执行此操作，您需要设置一个通配符虚拟主机，然后将其重写为您需要的 URL。

此[**信息**](http://blog.orite.com.au/web_development/2009-01-22/setting-up-wildcard-virtual-hosts-for-web-development-environment/)可能有用，您也可以参考此[**问题**](https://stackoverflow.com/questions/2395325/dynamic-sub-domain-creation-with-php-in-a-linux-based-server)。

# adobe - 在 Adob e CQ5 页面之间共享内容

> ID：15787449
> 
> 赞同：0
> 
> 时间：2013-04-03T12:31:51.737
> 
> 标签：adobe, components, aem

我目前正在为 Adob​​e CQ5 中的网站创建 CMS。要求的组件之一是为菜单提供自定义导航组件。用户将能够输入特定于该页面的一系列链接和 URL。

关键是他们需要能够与其他几个页面共享此菜单（但不是全部，通常这将是同一文件夹中的其他页面）。还将有几个不同的菜单，每个菜单在它们自己的页面组之间共享。

所以我想问题是，让一个菜单编辑一次并且更改反映在多个页面上的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:39:46.700

一种选择是创建一个“数据”组件——即用于创作数据实例的组件。每个数据实例将包含菜单数据并允许作者更改菜单数据。然后创建第二个组件，它是数据的消费者——即引用现有数据组件实例并呈现数据的组件。然后，您可以根据需要让尽可能多的页面呈现相同的菜单数据，并且如果底层菜单数据实例发生更改，它将影响所有页面。

您可能会考虑构建您的“数据”实例，以便它们将在单独的内容区域中创建，您可能希望以不同于普通内容页面的方式查看，并且如果您需要控制谁可以更改菜单，则可能具有不同的创作权限. 这也将使连接起来更容易，因此作者可以选择一个现有的数据实例来用于他们的消费者组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:50:37.260

另一种选择是使该组件从其父组件“继承”。为此，您可以在对话框中添加一个复选框，以指示组件是否应该或不应该从其父级继承。如果是这样，您的组件代码可以爬上树来寻找父页面上的导航组件并在找到时加载它。如果不是，组件只能从其当前资源加载数据。

这将允许您创建任意数量的单独导航组，并允许内容作者编辑导航，而无需转到另一个配置区域，这可能会破坏编辑体验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T12:12:34.340

创建一个页面组件，您可以在其中通过 iparsys 包含您的菜单组件，并在您的子页面（针对特定模板）组件上继承该页面。当您对菜单组件进行任何更改时，它将反映到所有页面。

# android - 文档的 ContentObserver

> ID：15787452
> 
> 赞同：0
> 
> 时间：2013-04-03T12:31:54.190
> 
> 标签：android, android-contentprovider, contentobserver

我需要能够跟踪添加/删除*文档*到 android 文件系统。我所说的*Documents*是指 word、excel、powerpoint 和 pdf 等文件。我知道`ContentProviders`和`ContentObservers`。就's 而言，我看到我可以为媒体文件类型`ContentObserver`设置一个，即*Audio*、*Video*和*Photos*。但是，我没有看到可以告诉我有关*文档*类型的信息。`ContentObserver`

 ***一种可能性是我`ContentObserver`为所有文件（包括媒体）安装了一个，但我担心它会对性能产生什么影响。我问是因为我看到人们已经在抱怨 android 扫描整个文件系统以查找媒体文件的更改。我已经意识到人们用来让 android 从更改中跳过某些文件夹的[.nomedia](https://android.stackexchange.com/questions/5261/how-to-exclude-certain-folders-from-getting-scanned-by-music-player)`ContentObserver`解决方法。

我正在寻找两个答案：

1.  有没有更有效的方法来实现我想要的，而无需查看所有文件的更改？类似于 Documents 的东西`ContentObserver`。

2.  另一件事是，当我在 Android 设备上打开“我的文件”时，我会在其他媒体类型中看到顶层的*Documents条目。*有谁知道这是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:14:37.673

> 我需要能够跟踪添加/删除文档到 android 文件系统。

为什么这符合用户的利益？记住：你不重要；你的用户是。

> 我知道 ContentProviders 和 ContentObservers。

请注意，这些仅在您的应用因其他原因在内存中时才有效。

> 我看到我可以为媒体文件类型（即音频、视频和照片）设置 ContentObserver。但是，我没有看到可以告诉我有关文档类型的信息。

正确，因为 Android 中没有“文档类型”。这是你自己的发明。您可以很容易地引用“Snicklefritz 类型”，定义为“第 18 个字节为 0x4F 的文件”。

> 有没有更有效的方法来实现我想要的，而无需查看所有文件的更改？

并不真地。欢迎您使用`FileObserver`来监视对文件或目录的更改，但这仅适用于该文件或该目录，而不是整个文件系统。

> 当我在安卓设备上打开“我的文件”时

Android 中没有“我的文件”。在您的特定 Android 设备上可能有这样的东西，运行您的特定固件。***

# android - 错误 NetworkOnMainThreadException Consuming Restful Webservice using Android Client 4.0

> ID：15787464
> 
> 赞同：-2
> 
> 时间：2013-04-03T12:32:16.450
> 
> 标签：android, rest, android-asynctask

我有关于我的 android 客户端的问题。

我有一个脚本，它使用一个安静的 web 服务并确定用户身份验证这是我的代码

```
import java.io.IOException;

import org.apache.http.client.ClientProtocolException;  
import org.apache.http.client.HttpClient;  
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;  
import org.apache.http.impl.client.DefaultHttpClient; 

import android.os.AsyncTask;
import android.util.Log;

public class RestLogin {

private static String URL = "http://REST Webservice here?";
private static final String tag = "Logcat tag: ";

public static Boolean Auth(String username,String password)
{
    String result = "";
    HttpClient httpclient = new DefaultHttpClient();
    HttpGet request = new HttpGet(URL);
    //adding parameter to request to determine user authentication
    request.addHeader("username",username);
    request.addHeader("password",password);
    //taking handler to get execution status
    ResponseHandler<String> handler = new BasicResponseHandler();
    try
    {
        result = httpclient.execute(request, handler);
    }

        catch (ClientProtocolException cpe)
        {
            cpe.printStackTrace();
        }
        catch (IOException ioe)
        {
            ioe.printStackTrace();
        }
        catch(IllegalArgumentException iae)
        {
            iae.printStackTrace();
        }
        catch(NullPointerException npe)
        {
            npe.printStackTrace();
        }

    httpclient.getConnectionManager().shutdown();
    Log.i(tag,result);
    return Boolean.parseBoolean(result);        
} 
```

}

首先，当我构建代码时，它在我的 logcat 状态上显示错误 NetworkOnMainThreadException。然后，我发现由于google android honeycomb，我不能直接使用这种方法。所以我需要添加 AsyncTask<>，这里是代码

```
public class RestLogin extends AsyncTask<String, String, Boolean> {

private static String URL = "http://Restful webservice here?";
private static final String tag = "Logcat tag: ";

@Override
protected Boolean doInBackground(String... params) {
    //TO DO Auto Generated Method
    return null;
} 
```

现在我被卡住了，如何使用 AsyncTask 调用 Auth() 方法？

提前致谢。

好的，更新：这是新语法

```
public class RestLogin extends AsyncTask<Void, Void, Void> {

private static String URL = "http://REST Webservice here?";
private static final String tag = "Logcat tag: ";

private String usname, psswrd;
public RestLogin(String username, String password){
    usname = username;
    psswrd = password;
}

protected void onPreExecute(){          
    super.onPreExecute();
} 

protected Void doInBackground(Void... params) {
    Boolean stat = Auth(usname,psswrd);
    return null;
}

protected void onPostExecute(Void result)
  {     
            super.onPostExecute(result);
  } 

public static Boolean Auth(String username,String password)
{
    String result = "";
    HttpClient httpclient = new DefaultHttpClient();
    HttpGet request = new HttpGet(URL);
    //adding parameter to request to determine user authentication
    request.addHeader("username",username);
    request.addHeader("password",password);
    //taking handler to get execution status
    ResponseHandler<String> handler = new BasicResponseHandler();
    try
    {
        result = httpclient.execute(request, handler);
    }

        catch (ClientProtocolException cpe)
        {
            cpe.printStackTrace();
        }
        catch (IOException ioe)
        {
            ioe.printStackTrace();
        }
        catch(IllegalArgumentException iae)
        {
            iae.printStackTrace();
        }
        catch(NullPointerException npe)
        {
            npe.printStackTrace();
        }

    httpclient.getConnectionManager().shutdown();
    Log.i(tag,result);
    return Boolean.parseBoolean(result);        
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:05:59.467

> 试试这个：

```
public class RestLogin extends AsyncTask<String, Void, Boolean> {

private static String URL = "http://Restful webservice here?";  
private static final String tag = "Logcat tag: ";

  @Override
  protected Boolean doInBackground(String... params) {

       String username = params[0]; //username
       String password = params[1]; //password

       //now call Auth
       return Auth(username,password);
  }

  @Override
  protected void onPostExecute(Boolean result) {

       super.onPostExecute(result);

       if(result){

            //successful login. Display a Toast or take the user to next screen by using intent.
       }
       else {

           //Display Authentication failed error message.

       }
  }

  public Boolean Auth(String username,String password)
  {

        // your logic.

  }

} 
```

> AsyncTask 可以通过以下代码调用。

```
 new RestLogin().execute(username,password); 
```

如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:34:45.623

NetworkOnmainthreadException 发生是因为您正在主 UI 线程上运行与网络相关的操作。您应该为此使用**Asynctask**。

当应用程序尝试在其主线程上执行网络操作时引发的异常。

这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。请参阅文档设计响应性。

[http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

您可以使用 asycntask。[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); 
            new TheTask(username,password).execute();
      }
class TheTask extends AsyncTask<Void,Void,Void>
{
   String username,pwd;
   public TheTask(String uname, String password)
   {
     username=uname;
     pwd=password;      
   }
  protected void onPreExecute()
  {           super.onPreExecute();
            //display progressdialog.
  } 

   protected void doInBackground(Void ...params)
  {  
        //rest web service. do not update ui here
        boolean somevalue= Auth(username, pwd);
        return null;
  } 

   protected void onPostExecute(Void result)
  {     
            super.onPostExecute(result);
            //dismiss progressdialog.
            //update ui
  } 

 } 
```

# php - PDO MySQL 事务

> ID：15787470
> 
> 赞同：0
> 
> 时间：2013-04-03T12:32:23.400
> 
> 标签：php, transactions, pdo

我有 3 个关于 PDO 和事务的查询。我对交易很陌生，所以请理解我的误解！

首先，我将解释一下情况：我以单例模式创建了一个 PDO 包装器，它访问带有 innoDB 表的 MySQL 数据库。我创建包装器的原因是提供额外的功能并提高可移植性。

每次对象需要访问数据库时，它都会检索相同的连接。

我的问题如下：

1）我知道如果我开始一个事务`PDO::beginTransaction()`，那么这会将 MySQL 的自动提交模式设置为关闭。然而，这是否只影响当前用户与数据库的连接，或每个访问者连接，因为它的数据库包含自动提交值，而不是 PHP 脚本？

2) 我需要执行与实际事务无关的 MySQL 查询。这些查询在不相关的对象中执行，但仍使用与事务相同的 MySQL 连接。我刚刚发现不相关的（与交易）查询仍包含在交易中，这会导致不良影响。有没有办法解决？还是我的 PHP 设计不适合这种事务使用？

3) 我正在使用 PHP 5.1。它支持以下功能`PDO::beginTransaction()`：`PDO::commit()`和`PDO::rollBack()`。

我知道，如果我调用`PDO::rollBack()`，当事务无效时，会抛出 PDOException 。解决方案是`PDO::inTransaction()`在使用 rollBack() 之前检查事务，但是直到 5.3 才添加到 PHP 中。

目前，当我的包装器启动事务时，它会将静态变量更新为 true，当它回滚或提交时，它会将变量设置回 false。这是一个好的解决方案吗？还是有我不知道的预先存在的解决方案？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:39:35.373

1.  每个连接的事务。但是某些查询可能会受到来自不同连接的相互影响。
2.  对于 InnoDB 连接，事务中的所有查询。但是使用自动提交，它会在每个之后提交。这就是为什么你总是在交易中。
3.  你可以用你自己的变量来做到这一点......你也可以使用[自动提交变量](http://dev.mysql.com/doc/refman/5.5/en/commit.html)来找出你已经开始了一个事务。你可以用 query 来做`select @@autocommit`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T12:40:27.480

1.  自动提交是数据库连接的一个属性。如果您为每个用户打开一个新连接，则一个用户不会受到另一个用户所做的事情的影响。
2.  一旦你打开了一个事务，你在提交或回滚之前所做的一切都是事务的一部分。您可以通过打开与数据库的新连接来防止这种情况发生，或者您可以重构代码以使事务不包含额外的操作。事实上，交易应该尽可能小。

# delphi - 用于 JavaFX 小程序的 Delphi 主机

> ID：15787471
> 
> 赞同：1
> 
> 时间：2013-04-03T12:32:27.830
> 
> 标签：delphi, applet, javafx, java

我在 Delphi 2010 中为 JavaFX 小程序创建了一个 NPAPI 主机。该主机使用私有 JRE 来显示小程序。使用 Java 7 Update 10，可以在浏览器中禁用 Java 内容。我不希望此设置禁用主机中的插件。是否可以覆盖我的私有 JRE 的部署属性？

# delphi - 惠普定制的 OEM Windows 上的 Delphi 平台错误

> ID：15787472
> 
> 赞同：3
> 
> 时间：2013-04-03T12:32:31.080
> 
> 标签：delphi, delphi-xe2, delphi-xe3

我在设置我的计算机时不断收到相同的错误，因此它将运行 Delphi，我已经在`PLATFORM`环境变量上设置了一个用户覆盖，将其转换为 win32，但它仍然给出相同的错误；

> [错误错误] 平台变量“HPD”无效。PLATFORM 必须是以下之一：“Win32”、“Win64”、“Android”、“iOSSimulator”、“iOSDevice”或“OSX32”。如果 PLATFORM 由您的系统环境定义，则必须在 RAD Studio IDE 中覆盖它或在命令行上显式传递给 MSBuild；例如，/p:Platform=Win32。

谁能解释它为什么这样做以及如何修复错误？我在大学时在 Delphi XE2 工作并且现在正在使用 Delphi XE3 的事实可能会影响这一点

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T12:57:45.477

您可能使用的是 HP 电脑。它们预先配置了`PLATFORM`环境变量。

较新的 XPlatform 版本的 Delphi 使用该`PLATFORM`变量来跟踪目标构建的用途（`WIN32`, `WIN64`, `ANDROID`, `iOSSimulator`, `iOSDevice`,or `OSX32`）。由于那里已经有一个，它正在尝试使用它，但无法弄清楚如何处理`HPD`.

为所有项目解决此问题的最简单方法是进入计算机的设置（右键单击`My Computer`桌面或开始菜单，`Properties->Advanced System Settings->Environmental Variables`然后删除`PLATFORM`变量。（HP 似乎没有将它用于任何事情，我已经在六台计算机上完成了此操作，没有任何不良影响。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T12:55:53.440

这是 HP 计算机的一个已知问题（例如，请参阅[Chris Rolliston 的博客](http://delphihaven.wordpress.com/2011/09/01/xe2-or-more-exactly-msbuild-vs-hp-notebooks/)） - 他们确实设置了一个名为的系统环境变量`PLATFORM`，该变量与预期的参数冲突`MSBuild`。解决方法是删除环境变量。

# c# - WCF数据服务：调用服务操作

> ID：15787474
> 
> 赞同：0
> 
> 时间：2013-04-03T12:32:37.657
> 
> 标签：c#, wcf-data-services

我有一个带有服务操作的实例 WCF 数据服务。

```
[WebGet]
    public IQueryable<long> TestMethod() {
        long[] instanceNumberArray = new long[] { 1 };
        return instanceNumberArray.AsQueryable();
    } 
```

我尝试这样称呼它：

```
Uri EndPointAddressUri = new Uri(@"http://localhost:9227/ReviewServiceWDS.svc/");
DataServiceContext context = new DataServiceContext(EndPointAddressUri);
DataServiceQuery<long> query = context.CreateQuery<long>("TestMethod");
var result = query.Execute();
var value = result.FirstOrDefault(); 
```

在最后一行我发现异常：

处理响应流时出错。XML 元素包含混合内容。

同时 Internet Explorer 返回：

`<TestMethod> <element p2:type="Edm.Int64">1</element> </TestMethod>`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:50:33.277

DataServiceContext.CreateQuery 仅以 EntitySetName 作为参数。您需要使用 DataServiceContext.Execute 来调用服务操作。

# url - Opencart v. 1.5.5.1 中的难看 URL

> ID：15787479
> 
> 赞同：0
> 
> 时间：2013-04-03T12:32:49.787
> 
> 标签：url, opencart

今天我在网站上看到了一个看起来很奇怪的 URL。

他们都开始看起来像这样：

```
index.php?route=product/product&product_id=1096**#.UVwcJpOePhs** 
```

在最后的部分**#.UVwcJpOePhs**每次我重新加载页面时，字符 5 和 6 都会发生变化。在这种情况下， **Jp**变成了不同的东西。

任何想法问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:41:00.573

这是一些 javascript 的结果，如果我没记错的话，它与类似 facebook 的按钮有关，或者添加这个栏（或类似的东西）。为什么会发生或添加我不确定，但这肯定对您的 URL 没有好处

# javascript - 输入文本字段触摸后调用相同的函数

> ID：15787480
> 
> 赞同：0
> 
> 时间：2013-04-03T12:32:50.833
> 
> 标签：javascript, css, html, scroll

我正在使用 javaScript 滚动框架 - 为 Windows 构建一个不错的滚动条。我只是将它添加到一个 div：

```
 this.displayDiv = function () {
        $("#myDiv").niceScroll();
    }

    <a href="#" onclick="manager.displayDiv();"> 
```

在我的移动设备（HTML5 应用程序）中，它运行良好，当我从`form window`with`input text`字段调用它时，它显示正常，但是当我只是触摸输入文本字段（是否写东西）并获得`focus effect`，之后尝试启动它再次滚动不起作用。想不通...可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:42:17.860

您使用什么移动设备？我在 iOS 5 上测试过，没有发现任何问题。

试试这个示例页面：

[http://nicescroll.areaaperta.com/test/mutation.html](http://nicescroll.areaaperta.com/test/mutation.html)

如果问题仍然存在，请在 github 上打开一个问题：

[https://github.com/inuyaksa/jquery.nicescroll/issues](https://github.com/inuyaksa/jquery.nicescroll/issues)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:36:26.290

```
function scrolling() {
    $("#myDiv").niceScroll();
}

<a href="#" id="myDiv" onclick="function scrolling()"> Click me to scroll. </a> 
```

# asp.net-mvc - asp.net mvc 4 不间断地运行一个方法，而不会减慢或阻塞应用程序

> ID：15787483
> 
> 赞同：0
> 
> 时间：2013-04-03T12:32:55.310
> 
> 标签：asp.net-mvc, database, asp.net-mvc-4, asynchronous, modbus

在寻找了几天的明确答案后，我决定自己在这里问。

在我的公司，我的任务是制作一个用于气体和火灾检测的 Web 应用程序。它通过 modbus tcp/ip 与 modbus 库进行对话。这种连接工作得非常好，它每秒读取大约 1 次（尽管我可以很容易地调整它）。

我对asp.net mvc模型中的AsynControllers和async-await任务有很多关注。问题是我必须让这个工作不停。因此，当我的应用程序第一次启动时（打算永远不会关闭它，因为它将是一个控制室类型的应用程序），我的应用程序需要开始阅读并继续阅读，同时将此信息放入数据库中，所以我可以将此数据库用于应用程序的其余部分。由于它是火灾检测，因此此更新需要始终并且几乎立即起作用。

我正在考虑在 global.aspx 中调用它，以便它在启动时运行。但是当然，当我调用此方法时，它只会阻止我的完整应用程序。我怎样才能使这项工作？

任何帮助将不胜感激。

**编辑：**

它似乎可以添加：Task.Factory.StartNew(() => { ModbusDB.Main(); });

到 global.aspx！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:40:22.843

Web 应用程序不适用于这种“永远在线”的模型。您实际上在谈论的是*两个应用程序*（可以在同一 Web 服务器上运行）：

1.  一个 Windows 服务（或计划的控制台应用程序，无论您想要什么），它执行与外部系统交互和更新应用程序数据库的后台工作。这是“永远在线”的部分。它轮询外部系统，从中获取所需的数据，更新应用程序数据库。相反，它可以轮询应用程序数据库，从中获取需要的数据，更新外部系统。基本上，它完成了正在进行的背景工作。
2.  处理与用户交互的 Web 应用程序。这并不是严格意义上的“永远在线”。Web 应用程序旨在接收请求并返回响应。在那次互动之后，它基本上完成了。只是等待其他请求。所以这个应用程序只会与应用程序数据库交互，并向用户提供他们需要的界面。从用户的角度来看，这个应用程序将他们连接到那个外部系统。但从技术角度来看，它只是一个连接到简单数据库的简单 Web 应用程序，其他东西处理与外部系统的交互。

这提供了将您的关注点分成不同的模块的额外好处。如果您需要构建另一个应用程序来与该外部系统交互（可能是人们工作站上安装了某种系统托盘的监控服务），那么该应用程序需要做的就是与数据库交互，而不是与外部系统交互。

相反，如果外部系统发生变化，那么您只需更改该后台服务，而不是用户用来与之交互的应用程序。

# android - 如何在特定日期和时间启动警报？

> ID：15787486
> 
> 赞同：2
> 
> 时间：2013-04-03T12:33:04.480
> 
> 标签：android, service, datepicker, broadcastreceiver, alarmmanager

如何在特定时间和日期启动警报，我在哪里使用`TimePicker`and 获得时间和日期`DatePicker`。即使我可以在用户指定的时间启动警报，但我不能在用户指定的日期这样做。我怎样才能达到我的目标？我已经完成的代码。

```
package com.example.modifiedalarm;
import java.util.Calendar;
import java.util.Locale;
import java.util.TimeZone;
import android.os.Bundle;
import android.provider.AlarmClock;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.TextView;
import android.widget.TimePicker;
import android.widget.Toast;
import android.app.Activity;
import android.app.AlarmManager;
import android.app.DatePickerDialog;
import android.app.DatePickerDialog.OnDateSetListener;
import android.app.PendingIntent;
import android.app.TimePickerDialog;
import android.app.TimePickerDialog.OnTimeSetListener;
import android.content.Context;
import android.content.Intent;

public class MainActivity extends Activity {
    Button b1, b2, b3;
    Calendar c;
    String abcd;
    TextView ed, tv;
    int hr, min, year, month, date;
    int time = 0;
    int daa = 0;

private PendingIntent pendingIntent;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        b1 = (Button) findViewById(R.id.button1);
        b2 = (Button) findViewById(R.id.button2);
        b3 = (Button) findViewById(R.id.button3);
        ed = (TextView) findViewById(R.id.settime);
        tv = (TextView) findViewById(R.id.gettime);
        c = Calendar.getInstance();

        hr = c.get(Calendar.HOUR_OF_DAY);
        min = c.get(Calendar.MINUTE);
        year = c.get(Calendar.YEAR);
        month = c.get(Calendar.MONTH);
        date = c.get(Calendar.DAY_OF_MONTH);

        b2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent i = new Intent(AlarmClock.ACTION_SET_ALARM);
            i.putExtra(AlarmClock.EXTRA_MESSAGE, "New Alarm");
            i.putExtra(AlarmClock.EXTRA_HOUR, hr);
            i.putExtra(AlarmClock.EXTRA_MINUTES, min);
            startActivity(i);
}});                

        b1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                // showDialog(time);
                new TimePickerDialog(MainActivity.this, timeval, hr, min, true)
                        .show();

            }

        });

        b3.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                new DatePickerDialog(MainActivity.this, dateval, year, month,
                        date).show();
            }
        });
    }

    OnDateSetListener dateval = new OnDateSetListener() {

        @Override
        public void onDateSet(DatePicker view, int Year, int monthOfYear,
                int dayOfMonth) {
            // TODO Auto-generated method stub
            year = Year;
            month = monthOfYear;
            date = dayOfMonth;
            updatedate();
        }
    };

    OnTimeSetListener timeval = new OnTimeSetListener() {
        @Override
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            // TODO Auto-generated method stub
            hr = hourOfDay;
            min = minute;
            updatetime();
        }
    };

    public void updatedate() {
        tv.setText(new StringBuilder().append(date).append("/").append(month).append("/").append(year));
        String og=tv.getText().toString();
        //int ogx=Integer.parseInt(og);
        Toast.makeText(MainActivity.this, "the date is "+og, Toast.LENGTH_LONG).show();
        datecompare();

}   private void datecompare() {

    }
private void updatetime() {
        // TODO Auto-generated method stub
        ed.setText(new StringBuilder().append(hr).append(":").append(min));
        String b=hr + ":" + min;
        }

} 
```

例如：我想在 2013 年 5 月 4 日下午 12:00 设置一个闹钟。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:52:27.073

这是我从现在开始设置 5 分钟的注销警报的方法

```
Calendar cal1 = Calendar.getInstance(); 
cal1.add(Calendar.MINUTE, 5); 
```

您可以使用**[Calendar](http://developer.android.com/reference/java/util/Calendar.html)**中提供的方法和字段对日期进行更多操作。例如：

```
Calendar cal = Calendar.getInstanc();
cal.set(Calendar.MONTH, JANUARY); 
```

设置月份。检查该链接，您可以看到可以设置它的所有不同方式。用于`set()`设置字段（月、日等）并用于`add()`添加到字段。无论如何，这应该可以帮助您入门

**编辑**

无论您在哪里设置待处理的意图，只需使用您设置的这些变量作为值

```
 private void updatedate() {
    // TODO Auto-generated method stub
    c.set(Calendar.Month, month);            // `c` is the `Calendar` instance you defined earlier. Now we are setting the month on that instance
    c.set(Calendar.DAY_OF_MONTH, date);
    } 
```

然后当你点击你的`Button`

```
 b2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
         long alarmTime = cal.getTimeInMillis(); // convert your calendar instance with the dates set to millis
            Intent i = new Intent(AlarmClock.ACTION_SET_ALARM);
        i.putExtra(AlarmClock.EXTRA_MESSAGE, "New Alarm");
        i.putExtra("alarmTime", alarmTime);     //"alarmTime" will be used to get the time to set the alarm in your AlarmClock class
        startActivity(i);
}}); 
```

如果你已经设定了时间，剩下的你就知道该怎么做了。希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:01:38.120

```
 AlarmManager:
    Calendar cal = Calendar.getInstance();

            long when =0; 
            intent = new Intent(this, AlarmReceiver.class);
            intent.putExtra("eventName", eventName);
            intent.putExtra("eventDescription",eventDescription);

            // Get the AlarmManager service
            AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);

            RadioGroup rg=(RadioGroup)findViewById(R.id.Setting_rgRepeatMode);
            selectedRadio=(RadioButton)findViewById(rg.getCheckedRadioButtonId());
            long repeatTime=0;

                cal.set(mYear,mMonth,mDay,mHour,mMinute,0);
                intent.putExtra("Flag",true);
                PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
                when=cal.getTimeInMillis();
                am.set(AlarmManager.RTC_WAKEUP,when, pendingIntent);
                return;

    BroadCastReceiver:

        public class MyBroadcastReceiver extends BroadcastReceiver {
       try {
//Here you can write your logic
                    Toast.makeText(context,bundle.getString("eventName"), Toast.LENGTH_SHORT).show();

            NotificationManager notificationManager =(NotificationManager) context.getSystemService(context.NOTIFICATION_SERVICE);
            int icon = R.drawable.event;
            CharSequence notiText = "Event Notification";
            long time = System.currentTimeMillis();
            @SuppressWarnings("deprecation")
            Notification notification = new Notification(icon, notiText,time);
            notification.defaults |= Notification.DEFAULT_SOUND;
            notification.flags |= Notification.FLAG_AUTO_CANCEL;
            Intent notificationIntent = new Intent(context, Setting.class);
            PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
            notification.setLatestEventInfo(context,intent.getStringExtra("eventName"),intent.getStringExtra("eventDescription"), contentIntent);
            int SERVER_DATA_RECEIVED =  1;
            Calendar cal=Calendar.getInstance();
            Toast.makeText(context,"aavechhe "+intent.getBooleanExtra("Flag",false),Toast.LENGTH_SHORT).show();
            if(intent.getIntExtra("month",0)==cal.get(Calendar.DAY_OF_MONTH))
            {
                Toast.makeText(context,"aavechhe "+cal.get(Calendar.DAY_OF_MONTH),Toast.LENGTH_SHORT).show();
                notificationManager.notify(SERVER_DATA_RECEIVED, notification);
            }
            if(intent.getBooleanExtra("Flag",false))
                notificationManager.notify(SERVER_DATA_RECEIVED, notification);

        } catch (Exception e) {
            Toast.makeText(context, "There was an error somewhere, but we still received an alarm", Toast.LENGTH_SHORT).show();
            e.printStackTrace();

        } 
```

# mysql - MySQL 查询到 Oracle 查询的转换

> ID：15787487
> 
> 赞同：0
> 
> 时间：2013-04-03T12:33:06.857
> 
> 标签：mysql, oracle

考虑一个类似的 sql 查询

```
SELECT a, b>now() as expired 
FROM TABLE; 
```

其中 b 是日期并检查当前日期。

我发现`now()`应该替换为`SYSDATE`

但是怎么写

```
 b > (SYSDATE) as expired 
```

甲骨文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:41:33.243

Oracle 没有布尔数据类型（MySQL 也没有，但它只是将任何不等于零的数字视为“真”），因此您需要返回一个表示过期的数字`0`和`1`

```
select a, 
       case 
          when b > sysdate then 1
          else 0
       end as expired
from the_table; 
```

请注意，Oracle 的`DATE`数据类型包括时间。所以`SYSDATE`返回类似`2013-04-04 14:43:12`. 您可能想在比较中使用 trunc() ：

```
select a, 
       case 
          when trunc(b) > trunc(sysdate) then 1
          else 0
       end as expired
from the_table; 
```

当然，您可以在 case 语句中返回任何内容，而不仅仅是数字

```
select a, 
       case 
          when trunc(b) > trunc(sysdate) then 'expired'
          else 'active'
       end as expired
from the_table; 
```

# ios - iPhone音频应用程序未进入睡眠模式

> ID：15787489
> 
> 赞同：0
> 
> 时间：2013-04-03T12:33:12.937
> 
> 标签：ios

我正在使用 Matt Gallagher AudioStreamer 从网络流式传输音频。我指定了“应用程序播放音频”和“应用程序不在后台运行 -> 否”。我的应用程序正在后台播放音频，一切正常。

问题是**应用程序没有进入睡眠模式**，并且无论应用程序是否正在播放音频，它总是处于唤醒状态。

这是因为指定了“应用程序播放音频”吗？我如何让它表现得像普通的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:58:17.353

我没有意识到我正在从 XCode 运行应用程序。一旦我断开手机与 XCode 的连接并运行应用程序，它就会进入睡眠模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:43:21.073

如果要启用空闲计时器，只需将`idleTimerDisabled`应用程序的属性设置为`NO`. 如果这不能按预期工作，请检查 AudioStreamer 库的来源，也许它在某处将其禁用。

`[[UIApplication sharedApplication] setIdleTimerDisabled:NO];`

# highcharts - 升级到 v3.0 - 发现更多问题 (3)

> ID：15787491
> 
> 赞同：0
> 
> 时间：2013-04-03T12:33:18.617
> 
> 标签：highcharts

我已经更新到 v3.0 并在 IE9 和 Chrome 中发现了这个问题。我有一个按钮，可以根据找到的数据创建一个新图表。图形比例 yAxis 变化？（注：图表为对数图表）。有时图表会变成：

![在此处输入图像描述](https://i.stack.imgur.com/fxueJ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:34:54.157

抱歉没有一个真实的例子：但我在按下自定义按钮时注意到了这一点（5/6次后） - 出现此问题：

笔记：

1) 使用图表创建按钮。
2) 图表可能每 5 秒更新一次 - 如果数据已更改

```
// handle detailed chart refresh button
function showResetZoomButton(pb_detailed_chart)
{
    // load refresh images
    var ResetZoomJPG        = 'images/gallery/reset_zoom.jpg';
    var ResetZoomPressedJPG = 'images/gallery/reset_zoom_pressed.jpg';

    // add refresh (pressed) image
    var imgResetZoomPressed = pb_detailed_chart.renderer.image(ResetZoomPressedJPG, pb_detailed_chart.chartWidth-112,10,24,20);
    imgResetZoomPressed.add();
    imgResetZoomPressed.css({'cursor':'pointer'});
    imgResetZoomPressed.attr({'title':'Reset Zoom'});

    // add refresh image
    var imgResetZoom = pb_detailed_chart.renderer.image(ResetZoomJPG, pb_detailed_chart.chartWidth-112,10,24,20);
    imgResetZoom.add();
    imgResetZoom.css({'cursor':'pointer'});
    imgResetZoom.attr({'title':'Reset Zoom'});

    // init in-action/out-action for mouse event
    var inAction = "mouseover";
    var outAction = "mouseout";
    if ( $.browser.mozila )
    {
        inAction = "mouseenter"; outAction = "mouseleave";
    }

    imgResetZoom.on(inAction, function(){
        imgResetZoomPressed.show();
        imgResetZoom.hide();
    });

    imgResetZoom.on(outAction, function(){
        imgResetZoom.show();
        imgResetZoomPressed.hide();
    });

    imgResetZoomPressed.on(inAction, function(){
        imgResetZoomPressed.show();
        imgResetZoom.hide();
    });

    imgResetZoomPressed.on(outAction, function(){
        imgResetZoom.show();
        imgResetZoomPressed.hide();
    });

    // refresh chart
    imgResetZoomPressed.on('click',function(){
        // check if master found, and if real time disabled
        if (pb_master_chart && enable_lastRoundsChart_realtime == 0)
        {
            // master chart found
            // remove plotBand
            pb_master_chart.xAxis[0].removePlotBand('mask-before');
            pb_master_chart.xAxis[0].removePlotBand('mask-after');
            pb_master_chart.xAxis[0].addPlotBand({
                id: 'mask-before',
                from: -1,
                to: 99999,
                color: 'rgba(0, 0, 0, 0.2)'
            })
        }
        // reset detailed graph
        createDetail(cache_last_rounds.last_rounds_data, window.show_top_round_ids);
    });
} 
```

# mysql - 检查 MySQL 数据库是否有任何存储过程

> ID：15787496
> 
> 赞同：1
> 
> 时间：2013-04-03T12:33:32.930
> 
> 标签：mysql, stored-procedures

我试图找出确定 mysql 数据库是否使用存储过程的最佳方法。它不是一个自制的数据库......开源的东西。我在这里找到了另一个帖子： [查找所有 MySQL 存储过程调用？](https://stackoverflow.com/questions/926967/find-all-mysql-stored-procedure-calls)

基于那篇文章，我尝试了以下方法：

```
mysql> SELECT * FROM information_schema.ROUTINES
    ->; 空集（0.00 秒）

mysql>

```

我可以安全地假设这个数据库没有存储过程吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:27:52.953

使用您发布的查询，您做出该假设是正确的。我在没有存储过程的本地数据库上对其进行了测试，得到了相同的结果。我创建了一个测试存储过程，重新运行相同的查询并得到一个结果（使用我创建的过程）。

# mongodb - 使用 C# 驱动程序的 MongoDB 2.4 的“更新后限制数组中的元素数”？

> ID：15787498
> 
> 赞同：2
> 
> 时间：2013-04-03T12:33:35.873
> 
> 标签：mongodb, mongodb-.net-driver

MongoDB 2.4 添加了一个新[的“更新后限制数组中元素的数量”功能](http://docs.mongodb.org/manual/tutorial/limit-number-of-elements-in-updated-array/)。这是通过 shell 使用它的方式：

```
db.students.update(
    { _id: 1 },
    { $push: 
        { scores:
            { $each : 
            [
                { attempt: 3, score: 7 },
                { attempt: 4, score: 4 }
            ],
            $sort: { score: 1 },
            $slice: -3
            }
        }
    }
) 
```

**如何使用 MongoDB 的 C# 驱动程序来实现这一点？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:20:29.073

这是一个示例测试，展示了如何在不使用类型化类的情况下执行此操作：[https ://github.com/mongodb/mongo-csharp-driver/blob/master/MongoDB.DriverUnitTests/Builders/UpdateBuilderTests.cs#L492](https://github.com/mongodb/mongo-csharp-driver/blob/master/MongoDB.DriverUnitTests/Builders/UpdateBuilderTests.cs#L492)

您正在寻找的相关代码是这样的：

```
var update = Update.PushEach(
    "name", 
     new PushEachOptions { Slice = -3, Sort = SortBy.Descending("a") }, 
    value1ToPush, 
    value2ToPush); 
```

如果您使用类型化实体，我们也支持这一点： [https ://github.com/mongodb/mongo-csharp-driver/blob/master/MongoDB.DriverUnitTests/Builders/UpdateBuilderTests.cs#L524](https://github.com/mongodb/mongo-csharp-driver/blob/master/MongoDB.DriverUnitTests/Builders/UpdateBuilderTests.cs#L524)

```
var update = Update<Test>.PushEach(
    x => x.B, 
    args => args.SortDescending(x => x.C).Slice(-3), 
    new[] { new B { C = 0 }, new B { C = 1 } }); 
```

最后，就像 .NET 驱动程序中的所有其他内容一样，您始终可以构建一个看起来与上面的结构完全相同的 BsonDocument 并简单地执行它。

# php - codeigniter 2 分页不适用于 _remap

> ID：15787500
> 
> 赞同：0
> 
> 时间：2013-04-03T12:33:43.603
> 
> 标签：php, view, pagination, codeigniter-2

Paginator 正在为第二个页面加载 404 页面。猜测问题出在此控制器中存在的 _remap 方法中。

我的分页器：

```
 $this->config->load('pagination', TRUE);
    $config = array_merge($this->config->item('pagination'), Array(
        'base_url'   => site_url() . "/welcome",
        'total_rows'  => count($commentsOfInterview),
        'per_page'   => 2,
        'uri_segment'  => 2,
    ));
    $this->pagination->initialize($config);

    $page = ($this->uri->segment(1)) ? $this->uri->segment(1) : 1;
    $commentsList['comments'] = $this->em->getRepository('Entities\Comment')->findPageOfActive($page, $config["per_page"], 'DESC', $lastInterviewId);
    $commentsList['links'] = $this->pagination->create_links(); 
```

Paginator 正在加载，但对于来自 2 的页面，它会加载 404 页面。我怎样才能解决这个问题而不删除_remap？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:39:17.710

```
 public function _remap($method) {
        if(method_exists($this, $method)){
            if( $this->em->getRepository('Entities\User')->getUserId() === null && $this->em->getRepository('Entities\User')->getUserRole() !== 'VISITOR'){
                $this->em->getRepository('Entities\User')->setUserRole('VISITOR');
                $options=array(
                    'client_id' => 'interview',
                    'client_secret' => 'interview',

                );
                $params=array(
                    'scope'=>'email',
                    'cur_uri' => 'http://192.168.0.129/index.php/' . $this->uri->uri_string(),
                    'redirect_uri' => 'http://192.168.0.129/index.php/UserController/authorise/muloqot',  //?connect=muloqot',

                );
                $client = new Oauth2_MuloqotClientAPI($options);
                $client->isAuthorized($params);
            }
/*            else if($this->em->getRepository('Entities\User')->getUserRole() === 'VISITOR'){
                $this->em->getRepository('Entities\User')->deleteSessionData();
            }*/
            if ($this->uri->segment(3)) {
                return $this->$method($this->uri->segment(3));
            } else return $this->$method();
        } else {
            $error404 = site_url($this->router->routes['404_override']);
            redirect($error404);
        }
    } 
```

# jquery - jquery validate add 方法来验证日期时间

> ID：15787503
> 
> 赞同：8
> 
> 时间：2013-04-03T12:34:08.967
> 
> 标签：jquery, jquery-ui, jquery-validate, datepicker

我正在使用我在[这里](http://trentrichardson.com/examples/timepicker/)找到的一个 datetimepicker 插件，它工作得很好。

现在唯一的问题是它破坏了[jquery 验证插件](http://docs.jquery.com/Plugins/Validation)中包含的标准日期验证，因为在输入框中的字符串末尾添加了时间。

这是我到目前为止在[演示](http://jsfiddle.net/XH4sh/4/)中的内容。我添加了一个验证方法来检查值是否为日期，但它不接受时间。

我需要帮助编写自定义验证方法。如何拆分`date`and`time`字符串然后执行测试来验证它们？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T15:53:02.803

您已经对`date`规则进行了验证。否则，您可以查看 jQuery Validate 插件以获取：

```
date: function( value, element ) {
    return this.optional(element) || !/Invalid|NaN/.test(new Date(value).toString());
}, 
```

这是我发现的用于验证`time`字符串部分的自定义方法。

```
$.validator.addMethod("time", function (value, element) {
    return this.optional(element) || /^(([0-1]?[0-9])|([2][0-3])):([0-5]?[0-9])(:([0-5]?[0-9]))?$/i.test(value);
}, "Please enter a valid time."); 
```

**时间演示：http: [//jsfiddle.net/9CdvN/](http://jsfiddle.net/9CdvN/)**

只需将这两个函数组合到您的“日期时间”方法中。然后在空间拆分您的输入值并相应地测试每个部分。

* * *

这是一个演示，我将日期和时间方法组合在一起。它接受以下格式，`yyyy/mm/dd hh:mm`因此您只需稍微调整一下即可。

**[http://jsfiddle.net/9CdvN/2/](http://jsfiddle.net/9CdvN/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:41:12.533

您提到的日期时间选择器说它使用 jQuery UI 的 datepicker 小部件。您可以使用 ui datepicker API，特别是[dateFormat 方法](http://api.jqueryui.com/datepicker/#option-dateFormat)来控制从小部件接收的日期格式。

您应该能够设置 datepicker 以提供验证所需格式的日期。

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:08:34.747

我可以建议你切换插件吗？[http://www.datejs.com/](http://www.datejs.com/)有大量验证日期的方法和一些荒谬的语法糖：

```
// Convert text into Date
Date.parse('today');
Date.parse('t + 5 d'); // today + 5 days
Date.parse('next thursday');
Date.parse('February 20th 1973');
Date.parse('Thu, 1 July 2004 22:30:00'); 
```

# c# - 从主视图局部视图访问 Ninject 对象

> ID：15787510
> 
> 赞同：2
> 
> 时间：2013-04-03T12:34:20.817
> 
> 标签：c#, asp.net-mvc-4, dependency-injection, ninject

我试图在我的布局视图中访问由 ninject 创建的对象，但我不知道如何访问它们。

以下是我迄今为止尝试过的简要概述：-

由服务创建并绑定它们：

```
public interface IService 
{
    void SomeMethod();
}

public class Service : IService
{
    public void SomeMethod
    {

    }
}

Bind<IService>().To<Service>(); 
```

创建了一个静态类并使用`[Inject]`属性：

```
public static class MasterLayout
{
    [Inject]
    public static IService Service { private get; set; }

    public static void CallSomeMethod();
    {
        Service.SomeMethod
    }
} 
```

每次我`MasterLayout.CallSomeMethod()`从**我的主视图或部分视图**调用时，该`Service`字段始终为空。

这是否可能，或者我应该创建一个基本控制器并让其他控制器从它继承，我可以设置这些值以在主视图和部分视图中使用？有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:52:28.940

如果与构造器注入一起使用，Ninject 是否有效？

（见[http://ninject.codeplex.com/wikipage?title=Injection%20Patterns](http://ninject.codeplex.com/wikipage?title=Injection%20Patterns)）

就像是

```
 IUnitOfWork UnitOfWork;

    public AccountController(IUnitOfWork unitOfWork)
    {
        this.UnitOfWork = unitOfWork;
    } 
```

你检查过这里吗？

[绑定到属性总是返回 null](https://stackoverflow.com/questions/10108352/bind-to-property-always-return-null)

当您说“在每个页面上”时，您的意思是“在每个控制器上”？

如果是，我认为您可以创建一个 BaseController 类，并且所有控制器都应该从它继承。我正在使用这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:42:05.513

您必须创建一个[自定义控制器工厂](http://bubblogging.wordpress.com/2012/06/04/mvc-controller-factory-ninject/)才能让 Ninject 创建控制器。一旦你这样做，这将起作用。也可能已经对此[进行了扩展](http://www.ninject.org/extensions.html)。

# authentication - 验证码需要 youtube api C#

> ID：15787511
> 
> 赞同：0
> 
> 时间：2013-04-03T12:34:24.047
> 
> 标签：authentication, youtube-api, youtube.net-api

每次我向 youtube API 请求获取视频时，我都会做类似的事情：

```
public Video GetVideo(string videoId)
{
    YouTubeRequest request = new YouTubeRequest(settings);

    Uri videoEntryUrl = new Uri("http://gdata.youtube.com/feeds/api/videos/" + videoId);

    return request.Retrieve<Video>(videoEntryUrl);
} 
```

有时我得到一个例外，说“需要验证码”。我想知道构建 YoutubeRequest 是否要求为每次调用 GetVideo 提供身份验证令牌，因此我得到了这个异常。是否可以？我怎样才能避免这个异常？而且我不是在谈论用 try-catch 来处理它。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:16:49.373

是的; 有多种方法可以重用 ClientLogin 令牌。请参阅[此博客文章中的场景 4，并查看](http://apiblog.youtube.com/2011/03/clientlogin-fail.html)[本文档](https://developers.google.com/gdata/docs/auth/clientlogin#RecallAuthToken)的“调用身份验证令牌”部分。

更好的是，我建议迁移到 OAuth 2 而不是 ClientLogin，如该博客文章中所述。

# ruby-on-rails - 如何查看节点集的每个单独项目？

> ID：15787515
> 
> 赞同：0
> 
> 时间：2013-04-03T12:34:38.187
> 
> 标签：ruby-on-rails, ruby, xpath, xml-parsing, nokogiri

我正在从 API 解析 XML 并将它们显示在一页上，尽管我已将它们分页到每页 30 个。

我想使用该`link_to`方法单独查看每一个，然后更新属性，然后可以将这些属性以 XML 形式发送回 API。我没有做的是保存到模型中，只是显示。我可以将返回的结果视为对象吗？

这是 XML：

```
<entry>
<id>xxx</id>
<updated>xxx</updated> 
<category  scheme="xxx"  term="xxx"/>
<title type="text">xxx</title>
<link rel="xxx" type="xxx"    href="xxx"/> 
<link rel="xxx"/>     
<link rel="xx" type="xxx" href="xxx"/> <link rel="xx" type="axx" href="xxx"/> 
<gd:email rel="xxx" address="xxx" primary="xx"/> 
</entry> 
```

这是控制器：

```
def show
  @contact = getcontact.find(params[:title])
end 
```

这是`getcontact`方法：

```
doc = Nokogiri::XML.parse(open(url))
doc.xpath('//xmlns:feed/xmlns:entry[xmlns:title[node()]]') 
```

这是路线：

```
match 'contacts/xmlns:title' => 'contacts#show' 
```

所有联系人视图：

```
<% @mycontacts.each do |c| %>
Name: <%= c.xpath('xmlns:title').text %>  
Email: <%= c.xpath('gd:email/@address').text %> 
<%= link_to "Update Contact", contact_path(c.xpath('xmlns:title').text) %></p> 

<% end %> 
```

显示视图：

```
<%= @contact.xpath('xmlns:title') %>
<%= @contact.xpath('gd:email/@address') %> 
```

当我单击链接查看单个联系人时，我收到一条错误消息：

```
undefined method `xpath' for #<Enumerator:0x3cc6570> 
```

* * *

编辑：

将所有内容保存到模型中，在应用程序中更新，然后转换为 XML 并将其发回会更好吗？这似乎有点啰嗦，但这是最佳做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:55:17.483

是的，我会创建一个模型来封装 API 和您的检索方法。另外，我会使用专为这个用例设计的[HTTParty 。](http://httparty.rubyforge.org/)它将自动执行与 XML 的转换。（虽然如果那是一个 RSS 提要，我可能会使用[专用的 RSS 解析器](https://www.ruby-toolbox.com/categories/feed_parsing)）

这种分离不会“冗长”，实际上它会更干净，更高效，因为您可以缓存甚至只是在模型中[记忆](http://www.railway.at/articles/2008/09/20/a-guide-to-memoization/)，从而最大限度地减少您必须执行的获取量。

# php - 如何在每个网页php中检查会话是否过期？

> ID：15787518
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:34:44.953
> 
> 标签：php

我正在建立我的教程网站。为此我有登录设施。当会话开始时，我的主页打开。我将有多个网页，当我单击链接时，会话也必须继续到下一个连续页面。因此，最左上角的变量用户名一直保留到会话到期（按下注销时）。怎么做？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:37:14.607

尝试这个

```
if(isset($_SESSION['your_sess_name']) && !empty($_SESSION['your_sess_name'])) {
  echo 'your session exists';
} 
```

注销

```
unset($_SESSION['your_sess_name']);
session_destroy(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:38:28.330

包括`session_start();`作为您需要会话的每个网页的第一行。在每一页上都打开它并不好。

还要检查会话是否打开，您可以包含以下代码

```
<?php
if(strlen(sessionid()) > 0){
    //session exists
    echo "Session Started!";
}else{
    echo "No Session Found!";
}
?> 
```

您还可以将上述代码包含在单个文件中，并在需要会话的页面上使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:43:42.093

首先创建一个文件为`config.php`. 在这个文件中写下你的条件，如下所示：

```
session_start();
if((!isset($_SESSION['session_name'])) and (!isset($_GET['lgact'])))
{
header("location:".SITE_URL."index.php");
exit;
} 
```

然后只需将此文件包含在您的网页中。 `include("config.php");`
希望这是你找到的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T12:40:45.327

SESSION 是非持久性 cookie，它将在所有页面上可用，直到浏览器关闭。SESSION 的最大年龄取决于您在该会话上停留的时间，一旦您关闭浏览器窗口，该会话将被浏览器终止。

简单地说，在所有 PHP 文件之上：您可以调用：

```
<?php
session_start();
if(isset($_SESSION['name']) && $_SESSION['name'] == 'some value')){

}
?> 
```

# ios - Core Plot 注释触摸事件

> ID：15787522
> 
> 赞同：1
> 
> 时间：2013-04-03T12:34:48.983
> 
> 标签：ios, objective-c, core-plot

我`Core Plot`在我的应用程序中使用。我需要使`CPTAnnotation`绘图对象响应用户的触摸事件。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:58:52.910

`CPPlotSpaceDelegate`协议用于触摸事件设置委托

您需要在视图控制器中调用以下方法

```
-(BOOL)plotSpace:(CPPlotSpace *)space shouldHandlePointingDeviceUpEvent:(id)event atPoint:(CGPoint)point;

-(BOOL)plotSpace:(CPPlotSpace *)space shouldHandlePointingDeviceCancelledEvent:(id)event;

-(BOOL)plotSpace:(CPPlotSpace *)space shouldHandlePointingDeviceDownEvent:(id)event atPoint:(CGPoint)point;

-(BOOL)plotSpace:(CPPlotSpace *)space shouldHandlePointingDeviceDraggedEvent:(id)event atPoint:(CGPoint)point; 
```

对于注释水龙头，您需要像这样使用...

```
- (void)scatterPlot:(CPTScatterPlot *)plot plotSymbolWasSelectedAtRecordIndex:(NSUInteger)index
{
NSLog(@"touch");
CPTGraph *graph = self.hostView.hostedGraph;

if (_annotation)
{
    [graph.plotAreaFrame.plotArea removeAnnotation:_annotation];
    _annotation = nil;
}

CPTMutableTextStyle *annotationTextStyle = [CPTMutableTextStyle textStyle];
annotationTextStyle.color = [CPTColor whiteColor];
annotationTextStyle.fontSize = 16.0f;
annotationTextStyle.fontName = @"Helvetica-Bold";

NSValue *value = [self.data objectAtIndex:index];
CGPoint point = [value CGPointValue];
NSString *number1 = [NSString stringWithFormat:@"%.2f", point.x];
NSString *number2 = [NSString stringWithFormat:@"%.2f", point.y];

NSLog(@"x and y are, %.2f, %.2f", point.x, point.y);
NSLog(@"number1 and number2 are, %.2f, %.2f", point.x, point.y);

NSNumber *x = [NSNumber numberWithFloat:point.x];
NSNumber *y = [NSNumber numberWithFloat:point.y];

NSArray *anchorPoint = [NSArray arrayWithObjects: x, y, nil];

NSString *final = [number1 stringByAppendingString:number2];
NSLog(@"final is %@",final);

CPTTextLayer *textLayer = [[CPTTextLayer alloc] initWithText:final style:annotationTextStyle];
_annotation = [[CPTPlotSpaceAnnotation alloc] initWithPlotSpace:graph.defaultPlotSpace anchorPlotPoint:anchorPoint];
_annotation.contentLayer = textLayer;
_annotation.displacement = CGPointMake(0.0f, 0.0f);
[graph.plotAreaFrame.plotArea addAnnotation:_annotation];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T11:24:07.753

*CPTAnnotation*包含 contentLayer 属性，属性类型为*CPTLayer*，*SPTLayer*确认接口*CPTResponder*。

您可以为内容层创建自定义类并覆盖*[CPRResponder](https://core-plot.googlecode.com/hg-history/efa73ee50d8edfd0e1d4294cf4bd2c07d9f8af77/documentation/html/iOS/protocol_c_p_t_responder-p.html)*的方法：

```
(BOOL)  - pointingDeviceDownEvent:atPoint:
(BOOL)  - pointingDeviceUpEvent:atPoint:
(BOOL)  - pointingDeviceDraggedEvent:atPoint:
(BOOL)  - pointingDeviceCancelledEvent: 
```

# mysql - 索引 MySQL 表以获得最佳查询的替代方法？

> ID：15787524
> 
> 赞同：2
> 
> 时间：2013-04-03T12:34:56.470
> 
> 标签：mysql, indexing, primary-key, unique-key

我对如何最好地在 MySQL 中为表建立索引感到困惑，并且需要有关要使用的最佳索引构造类型的帮助。目前我在这个表上使用唯一键索引，但不知道这是否是最好的使用方法，在某些情况下，由于 MySQL 的限制，我不能使用这种类型的索引。

该表由一个主键和 n 列组成，在这种情况下保持简单 n=4。所以表格看起来像这样：pk, col1, col2, col3, col4

col1-n 中的值是 VARCHAR，通常长度在 1 到 4 个字符之间。主键是 col 值的串联。所以典型的行可能如下所示：

```
A:B:C:D, A, B, C, D
A:B:C:E, A, B, C, E
A:B:F:F, A, B, F, F 
```

其中第一个元素是主键，后续元素是 col1、col2 等。

该表需要针对查询而不是插入进行优化。我希望执行的查询将有一个 WHERE 子句，我们知道第 1-4 列中的一些值。因此，例如，我可能想查找第二列为“B”或“C”的所有行。一旦我有了主键，我就用它来加入另一个表。

我在 col1-4 上创建了一个唯一键（因为它们是唯一的）。问题是，一旦 n 变大（>16），我就不能再创建唯一键索引（MySQL 被限制为 16 列用于唯一键约束）。这不是问题，因为主键可确保唯一性。但是，我不确定两件事：

a) 为了优化查询速度，唯一键是一个很好的索引吗？

b) 当我不能使用唯一键时，我应该使用什么索引？

我有以下选项，但我不确定哪个（如果有）是最好的：

a) 在 (col1, col2, col3, col4) 上创建单个索引

b) 每列创建一个索引 (col1), (col2)…(col-n)

c) 为每个 col 创建一个索引，其中包含的 pk (pk, col1), (pk, col2), (pk, col-n)

非常感谢您提供的任何帮助。

谢谢

菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:49:27.087

仅当子句包含第一列的条件时`(col1, col2, col3, col4)`，才能使用索引。`WHERE`这意味着，如果查询不包含 on 条件`col1`，则根本无法使用索引（请参阅[多列索引](http://dev.mysql.com/doc/refman/5.6/en/multiple-column-indexes.html)）。如果您有此类查询，则应定义其他索引。这些可能`(col2, col3, col4)`是`(col3, col4)`和`(col4)`。

另一方面，在 、`(col1)`和上单独索引也是一个不错的选择。在这种情况下，不需要在索引中包含主键。我更喜欢这个解决方案而不是上面提到的解决方案。`(col2)``(col3)``(col4)`

我发现您选择的主键很奇怪。如果`(col1, col2, col3, col4)`是唯一的，则将其用作主键。如果您不想在四列上使用主键（大多数人不这样做），那么下一个选择通常是代理键（即`auto_increment`MySQL 中的列）。在这种情况下，唯一的密钥`(col1, col2, col3, col4)`强制执行数据完整性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:56:30.903

`MySQL`只要您正在搜索确切的键值（而不是范围），就可以在 PK 上的单个表中合并连接多个索引。

因此，如果您在`col1`to上创建单独的索引`colN`，则可以运行此查询：

```
SELECT  *
FROM    mytable
WHERE   col2 = 'B'
        OR
        col3 = 'C' 
```

这将导致索引打开`col2`并`col3`合并（您将`index_merge using union(col2, col3)`在`EXPLAIN`输出中看到它）。

为确保唯一性，将第一列声明为 就足够了`PRIMARY KEY`，因此只要保持数据一致性（PK 值确实是`col*`连接和分离的值），您的数据唯一性将由 PK 监管。

# sharepoint - MOSS 2007 自定义应用程序页面在 IP 上工作，但不在 Intranet 和 Internet URL 上

> ID：15787527
> 
> 赞同：0
> 
> 时间：2013-04-03T12:34:58.890
> 
> 标签：sharepoint, sharepoint-2007, iis-6, moss2007-security

我在 MOSS 2007 站点上实现了一个自定义应用程序页面。我已将 VS 文件夹放入布局中，并在 web.config 和 gac 中进行了所有必要的更改。自定义应用程序页面使用 IP 地址运行顺畅

例如：`(http://)IP:portnumber/_layouts/Applicationfolder/page.aspx`。

但是，一旦我尝试使用 Intranet 或 Internet url，例如：/abc/_layouts/Applicationfolder/page.aspx 或[http://abc.orgname.com/_layouts/Applicationfolder/page.aspx](http://abc.orgname.com/_layouts/Applicationfolder/page.aspx)。我收到以下错误。请帮我..

```
Cannot complete this action.
Please try again.   at Microsoft.SharePoint.Library.SPRequestInternalClass.OpenWebInternal(String bstrUrl, Guid& pguidID, String& pbstrRequestAccessEmail, UInt32& pwebVersion, String& pbstrServerRelativeUrl, UInt32& pnLanguage, UInt32& pnLocale, String& pbstrDefaultTheme, String& pbstrDefaultThemeCSSUrl, String& pbstrAlternateCSSUrl, String& pbstrCustomizedCssFileList, String& pbstrCustomJSUrl, String& pbstrAlternateHeaderUrl, String& pbstrMasterUrl, String& pbstrCustomMasterUrl, String& pbstrSiteLogoUrl, String& pbstrSiteLogoDescription, Object& pvarUser, Boolean& pvarIsAuditor, Int32& plSiteFlags) 
   at Microsoft.SharePoint.Library.SPRequest.OpenWebInternal(String bstrUrl, Guid& pguidID, String& pbstrRequestAccessEmail, UInt32& pwebVersion, String& pbstrServerRelativeUrl, UInt32& pnLanguage, UInt32& pnLocale, String& pbstrDefaultTheme, String& pbstrDefaultThemeCSSUrl, String& pbstrAlternateCSSUrl, String& pbstrCustomizedCssFileList, String& pbstrCustomJSUrl, String& pbstrAlternateHeaderUrl, String& pbstrMasterUrl, String& pbstrCustomMasterUrl, String& pbstrSiteLogoUrl, String& pbstrSiteLogoDescription, Object& pvarUser, Boolean& pvarIsAuditor, Int32& plSiteFlags) 
```

部署后我遇到了上述错误，我遵循了链接中给出的以下解决方案：http:
[//social.technet.microsoft.com/Forums/en-US/sharepointadmin/thread/602705ce-08a3-41af-a6fe-b1472b048532](http://social.technet.microsoft.com/Forums/en-US/sharepointadmin/thread/602705ce-08a3-41af-a6fe-b1472b048532)

但现在应用程序页面仅在 IP 上工作，并在 Intranet 和 Internet URL 上抛出上述错误。我还检查了备用访问映射。因为它是生产的，所以其他站点在 IP 和 URL 上都可以正常工作。我认为这可能是一些配置或 ASP.net 身份验证问题。我可能错了。只是一个猜测。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:29:21.577

您可以检查启用的匿名访问吗？

您是否为此站点配置了备用访问映射？

如果没有，请按照此链接进行配置。

[http://technet.microsoft.com/en-us/library/cc261814(office.12).aspx](http://technet.microsoft.com/en-us/library/cc261814(office.12).aspx) '它适用于 Moss 2007，但概念是相同的。

# css - 将 CSS 应用于包含默认母版页的 ASP.Net 网页

> ID：15787531
> 
> 赞同：0
> 
> 时间：2013-04-03T12:35:06.270
> 
> 标签：css, master-pages

在创建了一个新的简单 ASP.Net Web 应用程序中，在 Default.aspx 文件中添加了新的 div，如下所示

```
<div id="TestDiv"> Hi, This is CSS test. </div> 
```

对于上述 div 的样式，在 Site.css 文件中的 css 下方添加

```
#TestDiv{ color:Red; } 
```

如果我在 Design 视图中查看 Default.aspx 页面，发现上面的文本颜色变成了红色。但是当我运行这个应用程序并检查浏览器时，发现颜色没有改变，css也没有应用到它。我想使用在母版页中声明的相同 Site.css 来应用于上述 div，并且我不想在 Default.aspx 页面中显式声明 css 样式。你能帮我看看我怎样才能让它工作。

根据请求共享 Site.css 内容

```
/* DEFAULTS
----------------------------------------------------------*/

body
{
    background: #b6b7bc;
    font-size: .80em;
    font-family: "Helvetica Neue" , "Lucida Grande" , "Segoe UI" , Arial, Helvetica, Verdana, sans-serif;
    margin: 0px;
    padding: 0px;
    color: #696969;
}

a:link, a:visited
{
    color: #034af3;
}

a:hover
{
    color: #1d60ff;
    text-decoration: none;
}

a:active
{
    color: #034af3;
}

p
{
    margin-bottom: 10px;
    line-height: 1.6em;
}

/* HEADINGS   
----------------------------------------------------------*/

h1, h2, h3, h4, h5, h6
{
    font-size: 1.5em;
    color: #666666;
    font-variant: small-caps;
    text-transform: none;
    font-weight: 200;
    margin-bottom: 0px;
}

h1
{
    font-size: 1.6em;
    padding-bottom: 0px;
    margin-bottom: 0px;
}

h2
{
    font-size: 1.5em;
    font-weight: 600;
}

h3
{
    font-size: 1.2em;
}

h4
{
    font-size: 1.1em;
}

h5, h6
{
    font-size: 1em;
}

/* this rule styles <h1> and <h2> tags that are the 
first child of the left and right table columns */
.rightColumn > h1, .rightColumn > h2, .leftColumn > h1, .leftColumn > h2
{
    margin-top: 0px;
}

/* PRIMARY LAYOUT ELEMENTS   
----------------------------------------------------------*/

.page
{
    width: 960px;
    background-color: #fff;
    margin: 20px auto 0px auto;
    border: 1px solid #496077;
}

.header
{
    position: relative;
    margin: 0px;
    padding: 0px;
    background: #4b6c9e;
    width: 100%;
}

.header h1
{
    font-weight: 700;
    margin: 0px;
    padding: 0px 0px 0px 20px;
    color: #f9f9f9;
    border: none;
    line-height: 2em;
    font-size: 2em;
}

.main
{
    padding: 0px 12px;
    margin: 12px 8px 8px 8px;
    min-height: 420px;
}

.leftCol
{
    padding: 6px 0px;
    margin: 12px 8px 8px 8px;
    width: 200px;
    min-height: 200px;
}

.footer
{
    color: #4e5766;
    padding: 8px 0px 0px 0px;
    margin: 0px auto;
    text-align: center;
    line-height: normal;
}

/* TAB MENU   
----------------------------------------------------------*/

div.hideSkiplink
{
    background-color: #3a4f63;
    width: 100%;
}

div.menu
{
    padding: 4px 0px 4px 8px;
}

div.menu ul
{
    list-style: none;
    margin: 0px;
    padding: 0px;
    width: auto;
}

div.menu ul li a, div.menu ul li a:visited
{
    background-color: #465c71;
    border: 1px #4e667d solid;
    color: #dde4ec;
    display: block;
    line-height: 1.35em;
    padding: 4px 20px;
    text-decoration: none;
    white-space: nowrap;
}

div.menu ul li a:hover
{
    background-color: #bfcbd6;
    color: #465c71;
    text-decoration: none;
}

div.menu ul li a:active
{
    background-color: #465c71;
    color: #cfdbe6;
    text-decoration: none;
}

/* FORM ELEMENTS   
----------------------------------------------------------*/

fieldset
{
    margin: 1em 0px;
    padding: 1em;
    border: 1px solid #ccc;
}

fieldset p
{
    margin: 2px 12px 10px 10px;
}

fieldset.login label, fieldset.register label, fieldset.changePassword label
{
    display: block;
}

fieldset label.inline
{
    display: inline;
}

legend
{
    font-size: 1.1em;
    font-weight: 600;
    padding: 2px 4px 8px 4px;
}

input.textEntry
{
    width: 320px;
    border: 1px solid #ccc;
}

input.passwordEntry
{
    width: 320px;
    border: 1px solid #ccc;
}

div.accountInfo
{
    width: 42%;
}

/* MISC  
----------------------------------------------------------*/

.clear
{
    clear: both;
}

.title
{
    display: block;
    float: left;
    text-align: left;
    width: auto;
}

.loginDisplay
{
    font-size: 1.1em;
    display: block;
    text-align: right;
    padding: 10px;
    color: White;
}

.loginDisplay a:link
{
    color: white;
}

.loginDisplay a:visited
{
    color: white;
}

.loginDisplay a:hover
{
    color: white;
}

.failureNotification
{
    font-size: 1.2em;
    color: Red;
}

.bold
{
    font-weight: bold;
}

.submitButton
{
    text-align: right;
    padding-right: 10px;
}
#TestDiv
{
    color:Red;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:37:05.613

它不起作用的原因之一是 Directory Structure ，这使得 CSS 无法从您的 Default.aspx 访问。否则没有理由它不会工作。您可以通过按 F12 使用 IE 开发人员工具并选择 div 并查看您的 site.css 是否已应用。您还可以查看视图源并在浏览器中复制 CSS 路径以查看它是否呈现或您正在获取 404

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:40:59.750

确保您制作了一个包含当前 css 文件位置的标签，并且您的链接标签必须在标题上，但 div 部分必须在正文上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:43:10.187

这个问题有几个原因。最好使用浏览器的开发工具来查看前端更改实际影响了什么。Chrome 提供了绝对最佳的调试套件...只需右键单击您的页面并在您的 div 上选择“检查元素”。

至于这个问题的具体情况：

*   检查您是否专门引用了 Site.css。
*   确保没有其他父 CSS 定义覆盖您的定义
*   如果存在冲突（例如：颜色的“div”定义），请确保您的 css ID 定义出现在页面流之后

备选方案：

*   使用脚本闭包在每页的基础上定义 CSS。
*   对特定元素使用内联样式。

**回应评论**

好吧，每个浏览器都有分配给大多数元素的默认规则。如果您发现从主体继承的样式，很可能是由于 CSS“重置”样式表和/或架构，其中主体被赋予了更合理的默认值。我怀疑你甚至会在 ASP.NET 应用程序中找到它。

我建议创建您自己的样式表并在您的 default.aspx 页面中引用它。这实际上并不重要（只要您在生成样式表之后引用您的样式表），但它将所有内容分开。大多数情况下，您不需要更改生成的 CSS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:48:55.220

给你2个答案：

1.  告诉我你的 deafult.aspx 文件在哪里？在诸如site/asp/deafult.aspx之类的文件夹中，您的样式在site/style/site.css中，如果确实如此，则添加链接标签`<link href="../Style/Site.css" rel="stylesheet" type="text/css" />`

2.  如果您的网站在 Site/deafult.aspx 中，而 css 在 Site/Styles/Site.css 中，那么请确保不同的大小字相同。

# c# - windows 应用程序在 Session 的地方使用了什么？

> ID：15787533
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:35:08.827
> 
> 标签：c#, windows, winforms, c#-4.0, session

我是 Windows 编程的新手，因为当用户成功登录到 Web 应用程序并每次检查母版页中的会话时，我们在会话中使用存储用户的详细信息，如果它为空，则将用户重定向到登录页面。我想在 Windows 应用程序中做同样的事情，我创建了一个登录表单：代码如下所示：

```
private void btnLogin_Click(object sender, EventArgs e)
    {
        clsLogin obj = new clsLogin();
        DataTable dtLogin = obj.Login_Check(txtUserName.Text.Trim(), txtPassword.Text.Trim());
        if (dtLogin.Rows.Count > 0)
        {
            if (dtLogin.Rows[0]["result"].ToString() == "3")
            {
                lblMessage.Text = "Password does not matched";
            }
            else
                if (dtLogin.Rows[0]["result"].ToString() == "2")
                {
                    lblMessage.Text = "User does not exists";
                }
                else
                {

                    Staff.Home home = new Staff.Home();
                    this.Hide();
                    home.Show();
                }
        }
    }
} 
```

现在我要做的是：将用户信息存储在用户单击注销的位置和时间，然后它将破坏该会话并打开登录表单。

我知道这是一个非常愚蠢的问题，因为我是 Windows 编程新手，这对我来说很难，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:44:08.657

除了代码的明显问题之外：

1.  按索引直接访问行
2.  直接在事件处理程序中完成登录
    *   您应该有单独的登录服务和数据访问服务

我会：

1.  创建一个登录服务，该服务维护当前登录的用户详细信息并自行执行身份验证。
2.  创建登录服务可以调用以访问数据存储的数据访问服务

然后在您的事件处理程序中，您只需要调用：

```
if (loginService.Authenticate(username, password))
{
   // Do your UI handling here
} 
```

那么 loginService 将有一个 .CurrentUser 属性，例如，您可以从那里开始。

例如

```
public class LoginService
{
    private User _currentUser;
    public bool Authenticate(string username, string password)
    {
        if (_currentUser != null)
        {
            Logout();
        }
        else
        {
            var user = DataAccess.Get("users").SingleOrDefault(u => u.Username = username);
            if (user == null)
            {
                throw new Exception("No user with that username found");
            }

            if (password == user.Password)
            {
                _currentUser = user;
                return true;
            }
            else
            {
                return false;
            }
        }
    }

    public User CurrentUser
    {
        get { return _user; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:57:35.040

在 Web 应用程序中，假设有多个客户端连接到单个服务器；您应该使用 Session 来区分它们并将数据传递给它们中的每一个“那里然后再回来”。对于桌面应用程序，这个问题根本不存在——只有一个用户，他的数据都在这里：你不需要像 Session 这样的特殊机制。这意味着您可以使用多种不同的方法从表单中传递数据。在您的示例中，通过构造函数直接将数据传递给您的“主”表单似乎更合乎逻辑

```
else
{
    var userData = .... (txtUserName.Text);
    Staff.Home home = new Staff.Home(userData);
    this.Hide();
    home.Show();
} 
```

或通过财产

```
else
{
    var userData = .... (txtUserName.Text);
    Staff.Home home = new Staff.Home();
    home.UserData = userData;
    this.Hide();
    home.Show();
} 
```

这只是一个例子，还有很多选择——想想这个“单一用户，永远在线”的模型。

# android - outofboundexception将如何解决？

> ID：15787534
> 
> 赞同：0
> 
> 时间：2013-04-03T12:35:13.533
> 
> 标签：android, database, while-loop, android-cursor

我正在通过一个查询访问电话簿并从其他查询获取最后一次通话详细信息。问题是当我从管理的光标中获取日期时，我得到了出站异常并且我的应用程序崩溃了。请帮助我，我只想获取每个号码的最近通话日期（如果不为空）。

我用于获取电话簿详细信息的光标查询是：-

```
Cursor mCursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, new String[] {Phone._ID, Phone.DISPLAY_NAME, Phone.NUMBER}, null, null, null);
          startManagingCursor(mCursor); 
```

查询获取特定号码的最近通话日期：-

```
Cursor managedCursor = managedQuery(CallLog.Calls.CONTENT_URI,null, selection,null, Order); 
```

循环，我正在获取从电话簿详细信息光标中获取的号码的最近通话日期：-

```
 mCursor.moveToFirst();

          while(!mCursor.isAfterLast()) {

                JSONObject contact = new JSONObject();
                JSONObject parentCont = new JSONObject();

                 String name = mCursor.getString(mCursor.getColumnIndex(Phone.DISPLAY_NAME));
                 String number = mCursor.getString(mCursor.getColumnIndex(Phone.NUMBER));
                 String selection = android.provider.CallLog.Calls.NUMBER+"="+number;
                 String Order = android.provider.CallLog.Calls.DATE + " DESC";
                          Cursor managedCursor = managedQuery(CallLog.Calls.CONTENT_URI,null, selection,null, Order);
                          managedCursor.moveToNext();   
              String     callDate = managedCursor.getString(managedCursor.getColumnIndex(android.provider.CallLog.Calls.DATE));

                Date callDayTime = new Date(Long.valueOf(callDate));

                //String dateColumn = cursorcalllog.getString(cursorcalllog.getColumnIndex(CallLog.Calls.DATE));

                 Log.d("CONTACT", "Name: " + name + "| Number: " + number+"Recently Called"+callDayTime); 
```

Logcat 错误：-

```
04-03 05:33:43.090: E/AndroidRuntime(963): FATAL EXCEPTION: main
04-03 05:33:43.090: E/AndroidRuntime(963): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.socialize_us/com.example.socialize_us.CustomTabActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.socialize_us/com.example.socialize_us.PhoneBookActivity}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2084)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2111)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.ActivityThread.access$600(ActivityThread.java:134)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1251)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.os.Looper.loop(Looper.java:137)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.ActivityThread.main(ActivityThread.java:4666)
04-03 05:33:43.090: E/AndroidRuntime(963):  at java.lang.reflect.Method.invokeNative(Native Method)
04-03 05:33:43.090: E/AndroidRuntime(963):  at java.lang.reflect.Method.invoke(Method.java:511)
04-03 05:33:43.090: E/AndroidRuntime(963):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
04-03 05:33:43.090: E/AndroidRuntime(963):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
04-03 05:33:43.090: E/AndroidRuntime(963):  at dalvik.system.NativeStart.main(Native Method)
04-03 05:33:43.090: E/AndroidRuntime(963): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.socialize_us/com.example.socialize_us.PhoneBookActivity}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2084)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:1924)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:682)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.widget.TabHost.setCurrentTab(TabHost.java:346)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.widget.TabHost.addTab(TabHost.java:236)
04-03 05:33:43.090: E/AndroidRuntime(963):  at com.example.socialize_us.CustomTabActivity.onCreate(CustomTabActivity.java:33)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.Activity.performCreate(Activity.java:4510)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2048)
04-03 05:33:43.090: E/AndroidRuntime(963):  ... 11 more
04-03 05:33:43.090: E/AndroidRuntime(963): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:400)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.database.CursorWrapper.getString(CursorWrapper.java:241)
04-03 05:33:43.090: E/AndroidRuntime(963):  at com.example.socialize_us.PhoneBookActivity.onCreate(PhoneBookActivity.java:107)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.Activity.performCreate(Activity.java:4510)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
04-03 05:33:43.090: E/AndroidRuntime(963):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2048)
04-03 05:33:43.090: E/AndroidRuntime(963):  ... 21 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:43:36.297

您的光标为空，当您尝试从为空的 mcusor 中获取值时，您将获得光标 IndexOutOfBoundsException。

尝试以这种格式从光标中读取值以避免 IndexoutOfBoundsException

```
if(mCursor.moveToFirst())
{

  do
{
...
...
}
while(mCursor.moveToNext())

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:44:26.377

错误： 引起：android.database.CursorIndexOutOfBoundsException：**请求索引 0，大小为 0** 如果值等于 0，则必须添加异常没有信息。

# functional-programming - 如何判断一年中的哪一天属于哪一个月？

> ID：15787541
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:35:43.510
> 
> 标签：functional-programming, sml

我是初学者，我必须在 SML 中编写一个函数。

作业问题是：

> 编写一个名为的函数`what_month`，它将一天的编号（例如，257，假设一年 365 天）作为输入，并返回这一天所属的月份的编号。
> 
> 示例：`what_month(40)`应该返回`2`（二月）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:54:38.443

一种方法是创建一个每个月有多少天的列表。

这样的列表可能如下所示

```
days_in_month = [31, 28, 31, 30, ...] 
```

然后您可以根据每个月的天数轻松倒数您输入的数字。当您到达的数字小于下个月的天数时，输入的数字必须属于您到达的月份。

请注意，这不考虑闰年。但是，如果需要的话，这也不应该那么难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:02:10.907

对于简单的情况（不考虑闰年），您可以定义一个以月为单位的天数列表`months_days`和一个递归辅助函数`aux`，它接受一个`int`被调用`sum`和一个`int list`被调用`numbers`，并返回一个`int` `n`这样`n`的列表的第一个元素添加到小于`sum`，但`n + 1`列表的第一个元素添加到`sum`或更多。

```
val month_days= [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]

fun what_month(day :int) =
 let  
   fun aux(sum :int,  numbers: int list) =
    let
      val numbers_tail = tl numbers
    in
      if sum <= (hd numbers)
      then 1
      else    
        1 + aux(sum, (hd numbers + hd numbers_tail)::(tl numbers_tail))
    end
 in
   aux(day, month_days)
 end 
```

# html - 如何将在 svn 上提交的文件嵌入到我的 html 页面中？

> ID：15787543
> 
> 赞同：0
> 
> 时间：2013-04-03T12:35:45.023
> 
> 标签：html, svn, iframe, embed, xls

无论如何，我可以将在 SVN 上提交的 xls 文件显示到 iframe 中的网页（HTML）上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:52:30.270

我不是 100% 确定你在问/期待什么，但这是可能的：

*   您可以将 XLS 文件提交到 SVN 存储库
*   假设您可以公开该 SVN 存储库（或从 Web 服务器访问它），您应该能够将其显示在网页上，但只能作为文件的链接，其他人可以下载该文件。
*   如果您想实际显示 XLS 的内容，则必须在代码中读取文件，并将其显示在您在代码中创建的表中
*   您可以执行诸如将文件转换为 Google Doc 之类的操作，并将其显示在 iFrame 中（从内存中他们的 API 非常好，因此您可能会与他们的 API 交互以编写一些代码来上传文件等）
*   您可以使用其他框架或类似的框架将数据加载到 HTML 中的类似结构的表格中，例如[http://www.datatables.net/](http://www.datatables.net/)

# jmx - 无法访问 ProcessCpuTime、SystemCpuLoad 方法

> ID：15787544
> 
> 赞同：0
> 
> 时间：2013-04-03T12:35:48.413
> 
> 标签：jmx, mbeans

我想在我的 mbean 中收集操作系统参数..以便在注册后我可以在 JConsole 上看到这些值..我已经收集了一些参数但我无法收集*ProcessCpuTime、SystemCpuLoad*的值我尝试使用*OperatingSystemMXBean*接口对象但它不起作用。我也在谷歌上读到，这些方法需要 Windows 不支持的 API。所以有没有另一种方法来数学计算这些值......请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:24:53.090

[java.lang.management.OperatingSystemMXBean](http://docs.oracle.com/javase/6/docs/api/java/lang/management/OperatingSystemMXBean.html)的 Windows JVM 实现是[com.sun.management.OperatingSystem](http://www.docjar.com/docs/api/com/sun/management/OperatingSystem.html)。您可以通过转换前者来直接引用它：

```
import java.lang.management.*;
import com.sun.management.*;
...
OperatingSystem os = (OperatingSystem)ManagementFactory.getOperatingSystemMXBean(); 
```

这个类的 Java 6 和 java 7 版本之间存在一些差异，可以通过这个 Groovy 脚本观察到：

```
import java.lang.management.*;

os = ManagementFactory.getOperatingSystemMXBean();
println os.getClass().getName();

try { println "Process CPU Load:${os.getProcessCpuLoad()}"; } catch (e) {}
try { println "Process CPU Time:${os.getProcessCpuTime()}"; } catch (e) {}
try { println "System CPU Load:${os.getSystemCpuLoad()}"; } catch (e) {} 
```

**Java 6 输出：**

> com.sun.management.OperatingSystem
> 
> 进程 CPU 时间：79810111600

**Java 7 输出：**

> com.sun.management.OperatingSystem
> 
> 进程 CPU 负载：-1.0
> 
> 进程CPU时间：1840811800
> 
> 系统 CPU 负载：0.4902940980431365

所以它不如 Linux [et.al.] 变体有用，但你可能会得到你想要的东西。

# redis - 为什么这些语句在redis中很慢？

> ID：15787548
> 
> 赞同：0
> 
> 时间：2013-04-03T12:36:06.350
> 
> 标签：redis

我在redis中有以下慢查询日志。我已禁用写入磁盘。所以数据库在内存数据库中。我不明白为什么这两个查询很慢？

**仅供参考** ，我总共有 462698 个哈希。有图案`key:<numeric_number>`

```
 1) 1) (integer) 34
    2) (integer) 1364981115
    3) (integer) 10112
    4) 1) "HMGET"
       2) "key:123"
       3) "is_working"

 6) 1) (integer) 29
    2) (integer) 1364923711
    3) (integer) 87705
    4) 1) "HMSET"
       2) "key:538771"
       3) "status_app"
       4) ".. (122246 more bytes)" 
```

# java - SQL Server 2008 中的子选择查询错误

> ID：15787549
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:36:06.813
> 
> 标签：java, sql-server, sql-server-2008, jdbc

考虑以下查询：

```
insert into dbo.SubscriptionDetails (taxonomyid) 
values(select objectid from SubscriptionObjects where objectname=?) 
```

此查询在我的本地环境中运行良好，但在执行生产环境时会出现问题。

子选择查询是否需要在 SQL-Server 级别设置任何属性？

我使用 Java - JDBC 进行 SQL 事务。

请参阅下面的堆栈跟踪：

```
2013.03.28 15:42:11 CDT ERROR Error while inserting records into SubscriptionDetails table..
java.sql.BatchUpdateException: Subqueries are not allowed in this context. Only scalar expressions are allowed. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:37:17.667

我很惊讶您的版本可以在任何环境中使用！尝试省略`values`：

```
insert  into dbo.SubscriptionDetails 
        (taxonomyid) 
select  objectid 
from    SubscriptionObjects 
where   objectname=? 
```

对于多个子查询，您可以：

```
insert  into dbo.SubscriptionDetails 
        (taxonomyid, contenttypeid) 
select  (select objectid from SubscriptionObjects where objectname=?)
,       (select objectid from SubscriptionObjects where objectname=?) 
```

或者，使用括号强制标量上下文`values`：

```
insert  into dbo.SubscriptionDetails 
        (taxonomyid, contenttypeid) 
values  ((select objectid from SubscriptionObjects where objectname=?),
         (select objectid from SubscriptionObjects where objectname=?)) 
```

# xcode4.5 - XCode：Xcode 4.5.2（尽管拥有 Xcode 4.6 的所有 SDK -- iphoneOS 和 Sim）未检测到 iOS 6.1.3 设备

> ID：15787551
> 
> 赞同：0
> 
> 时间：2013-04-03T12:36:17.883
> 
> 标签：xcode4.5

我同时拥有**Xcode 4.5.2**和**Xcode 4.6**以及带有**iOS 6.1.3**的 iPod 。

现在，当我连接设备并使用 Xcode 4.6 时 - 检测到设备。但 Xcode 4.5.2 未检测到该设备。

请注意，两个版本的 Xcode 具有完全相同的 SDK。

任何想法 ？？？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:50:54.903

上述*有关复制 SDK*的过程完美运行。我刚刚重新启动了我的机器。

# git - 分支在权威存储库的'origin/master'之前

> ID：15787555
> 
> 赞同：1
> 
> 时间：2013-04-03T12:36:22.853
> 
> 标签：git

我有几个远程 GIT 存储库，其中一个是许多人使用的权威。所有更改都应提交到权威存储库。不幸的是，我对其中一个不具有权威性的远程存储库进行了一些更改，而后者变得不一致：

（来自远程仓库）

```
# On branch master
# Your branch is ahead of 'origin/master' by 5 commits. 
```

有没有什么安全的方法可以让权威服务器和别人保持一致？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:39:40.927

将您的分支合并回 origin/master 并将其推送回您认为具有权威性的远程仓库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:18:27.510

> 导致此类问题的原始推送是从我的本地计算机完成的。我丢失了那个本地仓库。

通过克隆非权威回购，您可以取回您的提交。

然后你可以`git remote add authoritative ssh:/url/to/authoritative-repo`简单地推回权威的。

```
git push authoritative master 
```

# c# - 始终使 DataGridView 仅接受第一行中的数据

> ID：15787557
> 
> 赞同：0
> 
> 时间：2013-04-03T12:36:26.533
> 
> 标签：c#, winforms

我只想在 datagridview 的第一个位置插入一行，并且添加的行应该向下移动。

我正在使用以下代码

```
DataRow row = dtLocl.NewRow();
dtLocl.Rows.InsertAt(row,0); 
```

添加新记录时，我无法设置焦点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:44:57.893

也许[这个](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/080e68a3-2bcd-4c1d-ae60-54b43b9c040e/)链接会帮助你..

编辑：忘记链接..试试这个：

```
dataGridView1.Rows[0].Selected = true; 
```

# c# - linq to xml 和 xml 序列化之间的性能差异

> ID：15787563
> 
> 赞同：1
> 
> 时间：2013-04-03T12:37:00.590
> 
> 标签：c#, xml-serialization, linq-to-xml

我想创建一个 xml 文件（100 行，5 个命名空间和 30 个不同的标签，总共 20 个属性）。我已经有一个硬编码的 xml 示例，但我需要编写一些 c# 代码来生成动态 xml 并填充值，这当然可以改变。性能是一个问题。

1.  我是否应该使用**linq to xml并使用****XDocument 和 XElement**创建所有标签并提供包含动态值的变量

2.  因为我已经有一个 xml 示例，所以创建一个 schema.xsd 并将值提供给对象

xml（对象流）将每秒通过 HTTP POST 发送到 Web 服务。

我将对这两个版本进行时间测试，但我只是好奇是否有人已经这样做了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:41:04.917

**LINQ to XML 版本应该有更好的性能。**

如果您想进一步优化它，您可能应该考虑直接字符串连接（但这不是最佳实践，性能提升不会很大）。

下一个性能选项将是 XmlTextWriter。可能是“正确”编写 XML 的最快方法——它不需要创建像 LINQ to XML 这样的 XML 对象模型，因此应该快得多。

如果您缓存 XmlSerializer 实例并且不会每次都创建它，则可以稍微优化序列化。然后它也会相对较快，尽管肯定比直接 XML 写入要慢。

# android - 通过 MediaStore.ACTION_IMAGE_CAPTURE 打开相机时保存在 sd 卡上的空白（0kb）文件

> ID：15787564
> 
> 赞同：1
> 
> 时间：2013-04-03T12:37:00.803
> 
> 标签：android, file, android-camera, android-camera-intent

使用 . 打开相机时`MediaStore.ACTION_IMAGE_CAPTURE intent`，尽管没有保存图像，但它会在 sd 卡中保存一个 0kb 或空白文件，即使我不保存图像或丢弃图像或只是返回。**编辑:: 但是如果我保存图像，它会保存正确的图像**。下面是我正在处理的代码：

```
import java.io.File;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.PointF;
import android.net.Uri;
import android.os.Build;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.util.FloatMath;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.VideoView;

public class DocsAdd extends Activity 
{

    private static final int ACTION_TAKE_PHOTO_B = 1;

    private static final String BITMAP_STORAGE_KEY = "viewbitmap";
    private static final String IMAGEVIEW_VISIBILITY_STORAGE_KEY = "imageviewvisibility";
    private ImageView mImageView;
    private Bitmap mImageBitmap;

    private String mCurrentPhotoPath;

    private static final String JPEG_FILE_PREFIX = "IMG_";
    private static final String JPEG_FILE_SUFFIX = ".jpg";

    private File getAlbumDir() 
    {

        Log.i("inside ", "docs add");
        String path = Environment.getExternalStorageDirectory().toString();          
        File filenamedemo = new File(path + "/AutoistDiary/ImageFolder/");

        String name=String.valueOf(filenamedemo);
        if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) 
        {

            if (name != null) 
            {
                if (! filenamedemo.mkdirs()) 
                {
                    if (! filenamedemo.exists())
                    {
                        Log.d("CameraSample", "failed to create directory");
                        return null;
                    }
                }
            }

        } else {

        }

        return filenamedemo;
    }

    private File createImageFile() throws IOException {
        // Create an image file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        String imageFileName = JPEG_FILE_PREFIX + timeStamp + "_";
        File albumF = getAlbumDir();
        File imageF = File.createTempFile(imageFileName, JPEG_FILE_SUFFIX, albumF);
        return imageF;
    }

    private File setUpPhotoFile() throws IOException {

        File f = createImageFile();
        mCurrentPhotoPath = f.getAbsolutePath();

        return f;
    }

    private void galleryAddPic() {
            Intent mediaScanIntent = new Intent("android.intent.action.MEDIA_SCANNER_SCAN_FILE");
            File f = new File(mCurrentPhotoPath);
            Uri contentUri = Uri.fromFile(f);
            mediaScanIntent.setData(contentUri);
            this.sendBroadcast(mediaScanIntent);
    }

    private void dispatchTakePictureIntent() {

        Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

            File f = null;

            try {
                f = setUpPhotoFile();
                mCurrentPhotoPath = f.getAbsolutePath();
                takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
            } catch (IOException e) {
                e.printStackTrace();
                f = null;
                mCurrentPhotoPath = null;
            }

        startActivityForResult(takePictureIntent,0);
    }

private void handleBigCameraPhoto() 
    {

        if (mCurrentPhotoPath != null) 
        {
            //setPic();
            galleryAddPic();
            mCurrentPhotoPath = null;

            Intent viewint=new Intent(DocsAdd.this, DocsShow.class);        
            Log.i("calling ", "view activity");
            startActivity(viewint);
            finish();
        }

    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        dispatchTakePictureIntent();

        /*if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO) {
            mAlbumStorageDirFactory = new FroyoAlbumDirFactory();
        } else {
            mAlbumStorageDirFactory = new BaseAlbumDirFactory();
        }*/
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        handleBigCameraPhoto(); 
    }

    // Some lifecycle callbacks so that the image can survive orientation change
    @Override
    protected void onSaveInstanceState(Bundle outState) {
        outState.putParcelable(BITMAP_STORAGE_KEY, mImageBitmap);

        outState.putBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY, (mImageBitmap != null) );

        super.onSaveInstanceState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState)
    {
        super.onRestoreInstanceState(savedInstanceState);
        mImageBitmap = savedInstanceState.getParcelable(BITMAP_STORAGE_KEY);
        mImageView.setImageBitmap(mImageBitmap);
        mImageView.setVisibility(
                savedInstanceState.getBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY) ? 
                        ImageView.VISIBLE : ImageView.INVISIBLE
        );

    }

    /**
     * Indicates whether the specified action can be used as an intent. This
     * method queries the package manager for installed packages that can
     * respond to an intent with the specified action. If no suitable package is
     * found, this method returns false.
     * http://android-developers.blogspot.com/2009/01/can-i-use-this-intent.html
     *
     * @param context The application's environment.
     * @param action The Intent action to check for availability.
     *
     * @return True if an Intent with the specified action can be sent and
     *         responded to, false otherwise.
     */
    public static boolean isIntentAvailable(Context context, String action) 
    {
        final PackageManager packageManager = context.getPackageManager();
        final Intent intent = new Intent(action);
        List<ResolveInfo> list =packageManager.queryIntentActivities(intent,PackageManager.MATCH_DEFAULT_ONLY);
        return list.size() > 0;
    }

     /** Show an event in the LogCat view, for debugging */
    private void dumpEvent(MotionEvent event) {
       String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE",
             "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
       StringBuilder sb = new StringBuilder();
       int action = event.getAction();
       int actionCode = action & MotionEvent.ACTION_MASK;
       sb.append("event ACTION_").append(names[actionCode]);
       if (actionCode == MotionEvent.ACTION_POINTER_DOWN
             || actionCode == MotionEvent.ACTION_POINTER_UP) {
          sb.append("(pid ").append(
                action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
          sb.append(")");
       }
       sb.append("[");
       for (int i = 0; i < event.getPointerCount(); i++) {
          sb.append("#").append(i);
          sb.append("(pid ").append(event.getPointerId(i));
          sb.append(")=").append((int) event.getX(i));
          sb.append(",").append((int) event.getY(i));
          if (i + 1 < event.getPointerCount())
             sb.append(";");
       }
       sb.append("]");

    }

    /** Determine the space between the first two fingers */
    private float spacing(MotionEvent event) {
       float x = event.getX(0) - event.getX(1);
       float y = event.getY(0) - event.getY(1);
       return FloatMath.sqrt(x * x + y * y);
    }

    /** Calculate the mid point of the first two fingers */
    private void midPoint(PointF point, MotionEvent event) {
       float x = event.getX(0) + event.getX(1);
       float y = event.getY(0) + event.getY(1);
       point.set(x / 2, y / 2);
    }

    public void onCancel() 
    {
        // TODO Auto-generated method stub
        Log.i("on click", "discard image");
        Log.d("on click", "discard image hahahahahaaaaaa");
    }
} 
```

任何人都可以指出为什么保存空白文件或可以针对此问题做些什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-09T22:59:10.997

这是一个老问题，但我最近在复制粘贴 OP 使用的相同代码后遇到了同样的问题。

在 ACTION_IMAGE_CAPTURE 意图启动之前，您正在方法中为照片创建文件`createImageFile()`。您需要处理未正确拍摄照片的情况并处理您创建的文件。例如：

```
 if(requestCode == 1) {
        if(resultCode == RESULT_OK) {
            //pic taken properly
        } else {
            //pic was not taken properly, deal with the empty file you created
        }
    } 
```

# cmake - 铿锵 + icecc + ccache

> ID：15787570
> 
> 赞同：4
> 
> 时间：2013-04-03T12:37:19.737
> 
> 标签：cmake, clang, ccache

我正在尝试使用 clang + icecc + ccache 构建。但我无法让它工作。我在同一个网络上使用 gcc + icecc + ccache 成功构建。

以下是软体版本：

```
Clang version  : Ubuntu clang version 3.2-9 (tags/RELEASE_32/final) (based on LLVM 3.2) 
ccache version : 3.1.7
icecc version  : ICECC 0.9.7 
```

我在 /usr/lib/ccache 中有 clang 符号链接：

```
$ ls -l /usr/lib/ccache/clang*
/usr/lib/ccache/clang -> ../../bin/ccache*
/usr/lib/ccache/clang++ -> ../../bin/ccache* 
```

我在 /usr/lib/icecc/bin 中有 clang 符号链接：

```
$ ls -l /usr/lib/icecc/bin/clang*
/usr/lib/icecc/bin/clang -> ../../../bin/icecc*
/usr/lib/icecc/bin/clang++ -> ../../../bin/icecc* 
```

所以这是我尝试过的：

我尝试在我的 PATH env var 中将 ccache 作为第一个：

```
export PATH=/usr/lib/ccache:/usr/lib/icecc/bin/:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin 
```

但它只是不分发编译。

我尝试过首先使用icecc：

```
export PATH=/usr/lib/icecc/bin/:/usr/lib/ccache:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin 
```

它给了我这个输出：

```
ICECC[5240] 14:27:17: icecream seems to have invoked itself recursively! 
```

根据这个线程[https://bugzilla.redhat.com/show_bug.cgi?id=377761](https://bugzilla.redhat.com/show_bug.cgi?id=377761)这是正常的。

我试过只吃icecc：

```
export PATH=/usr/lib/icecc/bin/:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin 
```

但它只是不分发编译。

所以我有点卡在这里，我找不到任何说这是不可能的，所以如果有人有解决方案或替代解决方案（与icecc不同的东西）。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:16:32.433

要将 ccache 与另一个编译器包装器一起使用，请设置`CCACHE_PREFIX`为另一个包装器。在你的情况下：

```
export PATH=/usr/lib/ccache:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
export CCACHE_PREFIX=icecc 
```

这更好有几个原因：

*   它确实有效。
*   编译器升级将被正确检测。
*   缓存的结果将在有和没有icecc的编译之间共享。
*   ccache 在运行预处理器时不会不必要地调用icecc。

阅读[ccache 手册中的](https://ccache.dev/manual/latest.html)[将 ccache 与其他编译器包装器一起使用](https://ccache.dev/manual/latest.html#_using_ccache_with_other_compiler_wrappers)部分的更多信息。

# javascript - Video.js cancelFullScreen api 方法在 Firefox 中不起作用

> ID：15787573
> 
> 赞同：1
> 
> 时间：2013-04-03T12:37:33.093
> 
> 标签：javascript, html5-video, fullscreen, video.js

我正在使用[video.js](http://videojs.com/)构建自定义视频播放器。我想要在功能中构建的一件事是检查以确保如果视频在全屏模式下结束播放，它会恢复到正常模式。[我认为使用video.js api](https://github.com/zencoder/video-js/blob/master/docs/api.md)很容易实现。

在我的代码中，我正在侦听“结束”事件，然后在该事件的处理程序中触发 cancelFullScreen() 方法，这在 Chrome 中工作得非常好（它甚至可以在 IE 7/8 的闪存回退模式下工作），但是它在 Firefox 19 中根本不起作用 - 窗口只是保持全屏模式。

任何想法为什么？

这是我的标记：

```
 <link rel="stylesheet" href="http://vjs.zencdn.net/3.2/video-js.css">
    <script src="http://vjs.zencdn.net/c/video.js"></script>

    <div class="vid_container" style="width: 934px; height: 524px; left: 0; top: 0;">
      <video id="video_NewMoon" controls   class="video-js vjs-default-skin" width="934" height="524" poster="/cms/arcadiacorp_uk/repository/pages/static/static-0000008447/images/poster.jpg" data-setup="{}">
        <source src="http://ecmcstg.arcadiagroup.ltd.uk/cms/arcadiacorp_uk/repository/pages/static/static-0000008447/flash/nailVid.mp4" type="video/mp4">
        <source src="http://ecmcstg.arcadiagroup.ltd.uk/cms/arcadiacorp_uk/repository/pages/static/static-0000008447/flash/nails.webm" type="video/webm">

        <a href="http://ecmcstg.arcadiagroup.ltd.uk/cms/arcadiacorp_uk/repository/pages/static/static-0000008447/flash/nailVid.mp4" title="Click here to download the video">Your browser cannot play this video, click here to download it instead.</a>
      </video>
    </div> 
```

这是我的 js 代码，它位于结束 body 标记内：

```
var myPlayer = _V_("video_NewMoon");

var movEnded = function(){
    myPlayer.bigPlayButton.hide();
    myPlayer.loadingSpinner.hide();

    if(myPlayer.isFullScreen === true) {
        console.log("yep, we're fullscreen - lets shut this down");
        myPlayer.cancelFullScreen();
    }
};
myPlayer.addEvent("ended", movEnded); 
```

我已经尝试了各种其他方法来解决它，例如在结束的处理程序中使用 jquery 触发 Esc 键，但这也不起作用。我现在对这个已经没有耐心了。

哦，当我们讨论错误时，加载微调器在 Chrome 上显示但隐藏在 FF 中。老实说，我宁愿它被隐藏起来。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T01:47:36.653

根据[http://caniuse.com/fullscreen](http://caniuse.com/fullscreen)全屏 API 在 Firefox 中部分支持。

# java - 关于模拟 javamail

> ID：15787577
> 
> 赞同：0
> 
> 时间：2013-04-03T12:37:52.470
> 
> 标签：java, mail-server

我需要一个可以处理传入和传出邮件（POP3-IMAP-SMTP 协议）的 java 邮件服务器。

我想过尝试使用 mock-javamail。

我下载了：

```
svn co https://svn.java.net/svn/mock-javamail~svn 
```

我想在eclipse中导入项目并开始配置和测试。

我没有找到任何关于如何构建这个项目以便在 Eclipse 中打开它的信息。我对许可证一无所知。有人可以帮忙吗？

我已经使用 JavaMail api 完成了 smtp-pop3-imap 客户端。

现在我需要在java中实现一个可以处理传入-传出电子邮件的邮件服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-03T08:18:18.053

看看 JavaMail Mock2 [https://github.com/salyh/javamail-mock2](https://github.com/salyh/javamail-mock2)，这是为使用 JavaMail 进行单元测试而设计的，不需要真正的系统。

它主要专注于 IMAP/POP3，但也可以使用 SMTP Mock。它在 Maven 中心可用。

特征

*   支持imap、imaps、pop3、pop3s、smtp、smtps
*   支持 POP3：cast to POP3Folder, Folder.getUID(Message msg)
*   支持 IMAP：转换为 IMAPFolder、转换为 UIDFolder、子文件夹、-Folder.getMessagesByUID(...)、删除/重命名文件夹、附加消息
*   支持 SMTP：模拟 Transport.send()

暂时不支持：IMAP 扩展，如 IDLE、CONDSTORE 等，以及强制转换为 POP3Message/IMAPMessage，存储侦听器

要在 Eclipse 中下载和导入，请安装 maven 和 git 并键入：

*   git 克隆 https://github.com/salyh/javamail-mock2.git
*   cd javamail-mock2
*   mvn 日食：日食
*   然后在eclipse中导入为现有项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:22:52.873

这是测试邮件 api 的简单方法。

```
import org.apache.commons.mail.Email;
import org.apache.commons.mail.EmailException;
import org.apache.commons.mail.SimpleEmail;

public class MyMailSender {

    public void sendMail(String to, String from, String subject, String msg) throws EmailException {
       Email email = new SimpleEmail();
       email.addTo(to);
       email.setFrom(from);
       email.setSubject(subject);   
       email.setMsg(msg);
       email.setHostName("testmail.com");   
       email.send();  
    }

} 
```

# ruby-on-rails - Rails req 位置（MVC 结构）

> ID：15787579
> 
> 赞同：0
> 
> 时间：2013-04-03T12:38:10.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller

我是 Rails 新手。我在哪里放置以下代码 - `name`/models/name 中的文件夹在哪里

```
req = Name.new
req.configure 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:05:24.683

这种逻辑应该在您的控制器中用于此类（应用程序/控制器/名称）。

例如：

```
def new
  @req = Name.new
  @req.configure

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @req }
  end
end 
```

但是，您可以运行一些命令来自动设置这一切，更多信息请访问： http: [//guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

# ios - 将 rootViewController 从 uiviewcontroller 更改为 uinavigationcontroller

> ID：15787581
> 
> 赞同：2
> 
> 时间：2013-04-03T12:38:15.957
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uiapplicationdelegate, rootview

我正在开发一个`MFsidemenu`用于 swipeBar 的应用程序。我的应用程序包含一个`loginController`which 是 an`uiViewController`并在将其登录后更改为`uiNavigationController`.

`MFsidemenu`需要在 AppDelegate 上运行此代码：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];
UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;

UIViewController *leftSideMenuViewController = [storyboard instantiateViewControllerWithIdentifier:@"leftSideMenuViewController"];
[MFSideMenu menuWithNavigationController:navigationController
                  leftSideMenuController:leftSideMenuViewController
                 rightSideMenuController:nil]; 
```

问题是如果 initialView 是`uiViewController`(Login) 如何更改代码的第二行，然后如何将其传递给`secondViewController`(MainMenu) 这是一个`uiNavigationController`？

简而言之，我希望`MFSidemenu`它只在第二个控制器上工作，它是主控制器。谢谢！

更新：已解决，由下面的 SpaceDust 解决方案 :)

问题更新：因此，使用示例`MFSidemenu`仅限于在控制器上显示侧面菜单。该示例`sideMenuController`从故事板上的任何其他 segue 中流放。在我实现`uiTableViewController`导航到另一个控制器的侧面菜单上。那么如何更改 MainMenuView`sideMenuController` `didSelectRowAtIndexPath`呢？我希望我的英语足够好来代表我的情况。再次感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:56:53.743

`uiViewController(Login)`如果您不想在登录期间出现侧边菜单，则需要将您的显示为模态视图控制器。

在情节提要中创建一个登录视图控制器，给它一个情节提要 ID，比如说 LoginViewController 。不要将该视图控制器连接到情节提要上的任何东西，让它自己坐在一个角落里。

首先创建一个全局单例变量，您可以在其中检查用户是否已登录

然后在你的`navigationcontroller's rootviewcontroller`

```
-(void)viewWillAppear:(BOOL)animated
{
     //this will present the login view if user is not logged in
    if (isLoggedIn==NO) {

        UIStoryboard* sb = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                     bundle:nil];
        LoginViewController *loginVC = [sb instantiateViewControllerWithIdentifier:@"LoginViewController"];
        [self presentModalViewController:loginVC  animated:YES];

    }
} 
```

登录过程完成后，在您的登录视图控制器中更改全局单例布尔值，`isLoggedIn=YES` 然后关闭您的登录视图控制器。

`[self dismissViewControllerAnimated:NO];`

# python - 查找具有重复项的项目索引

> ID：15787582
> 
> 赞同：3
> 
> 时间：2013-04-03T12:38:20.270
> 
> 标签：python, list

我有一个包含许多重复项的列表，如何找到数组中所有重复项的索引。所以基本上我搜索一个数据项，如果它有重复。它打印出项目所在位置的索引，包括重复项的位置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:40:12.623

如果列表中的项目是可散列的，您可以将它们用作字典中的键：

```
import collections

somelist = list('ABRACADABRA')
dups = collections.defaultdict(list)
for index, item in enumerate(somelist):
    dups[item].append(index)
print(dups) 
```

产量

```
defaultdict(<type 'list'>, {'A': [0, 3, 5, 7, 10], 'R': [2, 9], 'B': [1, 8], 'C': [4], 'D': [6]}) 
```

* * *

如果项目不可散列（例如列表），那么下一个最佳解决方案是定义一个`key`函数（如果可能），将每个项目映射到唯一的可散列对象（例如元组）：

```
def key(item):
    return something_hashable
for index, item in enumerate(somelist):
    dups[key(item)].append(index) 
```

* * *

如果找不到此类`key`，则必须将已看到的项目存储在列表中，并通过测试与已看到对象列表中的每个项目的相等性来测试重复项。这是 O(n**2)。

```
# Don't use this unless somelist contains unhashable items
import collections
somelist = list('ABRACADABRA')
seen = []
dups = collections.defaultdict(list)
for i, item in enumerate(somelist):
    for j, orig in enumerate(seen):
        if item == orig:
            dups[j].append(i)
            break
    else:
        seen.append(item)
print([(seen[key], val) for key, val in dups.iteritems()]) 
```

产量

```
[('A', [3, 5, 7, 10]), ('B', [8]), ('R', [9])] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:46:06.130

试试这个：

```
def get_duplicate_indexes(li):
    retval = {}
    for i, x in enumerate(li):
        if x not in retval:
            retval[x] = []
        retval[x].append(i)
    return retval 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T12:54:37.033

```
>>> temp = {}
>>> def print_dupes(a):
...     for i,j in enumerate(a):
...             temp[j] = 0
...     for i,j in enumerate(a):
...             temp[j] += 1
...     for i,j in enumerate(a):
...             if temp[j] > 1:
...                     print i
...
>>> print_dupes([1,1,1,2,2,2,3,3])
0
1
2
3
4
5
6
7
>>> print_dupes([1,1,1,2,2,2,3])
0
1
2
3
4
5
>>> print_dupes([1,1,1,2,3])
0
1
2 
```

# mysql - 如何通过 mysql workbench 将 Mysql 数据库推送到 heroku？

> ID：15787584
> 
> 赞同：0
> 
> 时间：2013-04-03T12:38:26.760
> 
> 标签：mysql, heroku

我在heroku上创建了cleardb，我想将本地磁盘上的mysql数据库推送到heroku。我安装了 mysql 工作台。我怎样才能把它推到heroku？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:49:46.620

查看输出`heroku config`- 您将看到一个名为`CLEARDB_DATABASE_URL`this 的键，它是您的应用程序用来与数据库通信的连接字符串。

您可以将此 URL 分解为各个组成部分，以获得用户名、密码、主机、端口和数据库名称，您可以通过 mysql 工作台在连接中使用这些名称。

请参阅[https://devcenter.heroku.com/articles/cleardb](https://devcenter.heroku.com/articles/cleardb)以获取更多参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:49:52.700

如果您只想推送数据库，请使用控制台，这很简单：

```
heroku db:push 
```

# css - 960gs：在包含 2 个浮动网格的容器元素上设置边框

> ID：15787589
> 
> 赞同：0
> 
> 时间：2013-04-03T12:38:36.990
> 
> 标签：css, 960.gs, grid-layout

在 960gs 上，我试图找出将 1px 实心边框添加到嵌套到 container_12 中的*包装器边框容器中的最佳/跨浏览器方法......而不影响网格系统！*

```
<div class="wrapper-border">

    <div class="grid_8 alpha"></div>

    <div id="content" class="grid_4 omega"></div>

</div> <!-- end #wrapper-border --> 
```

我打算将两个网格的边距减少 -1，但对我来说看起来并不那么酷

# python - 从模型中获取 django 中特定类型的所有字段

> ID：15787592
> 
> 赞同：2
> 
> 时间：2013-04-03T12:38:44.747
> 
> 标签：python, django

如何从某种类型的特定模型中获取所有字段？

例如，我想从我的模型中获取所有为 PositiveIntegerField 的字段。
怎么做？

我问这个的原因是因为我有以下代码：

```
from django import forms
from hzmo_web.apps.hzmo.models import Report

class ReportForm(forms.ModelForm):
    class Meta:
        model = Report

    def __init__(self, *args, **kw):
        super(ReportForm, self).__init__(*args, **kw)
        self.fields['osiguranika'].widget.attrs['class']   = 'biggerWidth'
        self.fields['korisnika'].widget.attrs['class']     = 'biggerWidth'
        self.fields['sredstva'].widget.attrs['class']       = 'biggerWidth'
        self.fields['dzd_korisnika'].widget.attrs['class']  = 'biggerWidth'
        self.fields['dzd_djece'].widget.attrs['class']      = 'biggerWidth'
        self.fields['dzd_isplata'].widget.attrs['class']    = 'biggerWidth' 
```

所有这些字段都是 PositiveIntegerField 类型，所以我想编写一些循环来缩短代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:08:03.540

如果您的模型中不存在表单中的字段，您将希望在 try/except 块中执行此操作。

```
def __init__(self, *args, **kw):
    super(ReportForm, self).__init__(*args, **kw)

    for field in self.fields.keys():
        if self._meta.model._meta.get_field(field).get_internal_type()=='PositiveIntegerField':
            self.fields[field].widget.attrs['class']='biggerWidth' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:19:14.040

可能这些字段具有相同的表单字段，您可以检查：

```
for field in self.fields:
    if isinstance(field, forms.IntegerField):
        field.widget.attrs['class'] = 'biggerWidth' 
```

# c - C编程中的字符串比较

> ID：15787595
> 
> 赞同：0
> 
> 时间：2013-04-03T12:38:49.697
> 
> 标签：c

如何在 C 编程中从动态输出控制台读取和比较字符串？

考虑一下，您一次将获得一个输出。您需要将程序的输出视为其他程序功能的输入。程序 1 的示例输出如下，

A123#345H5KGH3***状态***GETRUNOMMUNICATION5619***已连接***HIEDSAKNFH***OK***

![在此处输入图像描述](https://i.stack.imgur.com/R2866.png)

如果此语句出现在输出控制台中，我需要获取语句**STATE:CONNECTEDOK ，然后下一个程序（函数）将启动。**

笔记：

1.  我一次得到一个输出

2.  将第一个输出视为“ **A** ”，下一个将是“ **A1** ”，以下输出为**“A12”**。

3.  我想使用数组来存储值，但是输出范围（无限）使得它非常冗长且难以预先配置，因为数组的长度是未知的。

4.  如果指定的语句出现在输出控制台中，那么它应该提示一些消息。

5.  两个连续输出之间没有空格。

我想使用字符串，所以我的问题如下，

1.  当字符串的长度未知时，如何从输出控制台读取字符串？

2.  我需要使用什么函数来执行输出长度未知的比较（我已经知道语句**“STATE:CONNECTEDOK” ）？**

3.  当范围或长度未知时，如何存储输出数据？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:46:19.213

假设您并不是要从实际的控制台窗口*以图形方式*识别数据，而是可以将数据通过管道传输到您的程序，我认为最好的选择是使用[状态机，即“接受器”](http://en.wikipedia.org/wiki/Finite-state_machine#Acceptors_and_recognizers)。

您只需一次读取一个字符，并将其输入状态机。

# matlab - 使用 PCA 进行聚类

> ID：15787596
> 
> 赞同：0
> 
> 时间：2013-04-03T12:38:53.327
> 
> 标签：matlab, machine-learning

我正在做无监督分类。为此，我有 n 个分类功能，我想使用 PCA 将数据投影到新的子空间，然后使用 PCA 的输出执行聚类。我写了以下代码：

```
for c=1:size(feature,1) 
    feature(c,:)=feature(c,:)-mean(feature);
end
DataCov=cov(feature); % covariance matrix
[PC,latent,explained] = pcacov(DataCov); 
```

这给了我：

```
 PC =

0.6706    0.7348    0.0965    0.0316   -0.0003   -0.0001
0.0009   -0.0060    0.0298    0.0378    0.8157   -0.5764
0.0391   -0.1448    0.5661    0.8091   -0.0406    0.0264
0.7403   -0.6543   -0.1461   -0.0505    0.0018   -0.0005
0.0003   -0.0020    0.0193   -0.0116    0.5768    0.8166
0.0264   -0.1047    0.8048   -0.5832   -0.0151   -0.0169

latent =

0.0116
0.0001
0.0000
0.0000
0.0000
0.0000 
```

解释 =

```
 98.8872  <-----
1.0445
0.0478
0.0205
0.0000
0.0000 
```

解释表明，只有第一个分量（由 <-- 表示）真正对解释方差有很大贡献。

请回复，是否可以仅使用第一个组件创建新功能。？？？

以下是使用所有 Principle 组件为我提供的新功能集 feature_New。这是创建可以执行聚类的新功能集的正确方法吗：

```
 feature_New= feature*PC; 
```

# android - AndEngine 设计图形资源

> ID：15787599
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:39:06.607
> 
> 标签：android, andengine, game-development

我打算开发一个小游戏。我想请我的图形设计师设计游戏场景，但目前我不知道该选择哪种分辨率。

我已经阅读了很多关于这个问题的帖子，我知道如果我选择 RationResolutionPolicy，我可以在 photoshop 或 illustrator 中启动 800x480 尺寸的设计，然后引擎将缩放其余部分。

你有什么意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:18:56.990

AndEngine 实际上会通过`RatioResolutionPolicy`. 基本上，您真的只是希望分辨率又大又好，并且适合您计划发布的设备。

我为我的 Galaxy S3 制作了一个分辨率为 1280x720 的游戏。因此，如果我将游戏部署在分辨率较低的另一部手机上，AndEngine 会自动调整它。

请记住一件事，如果您的游戏分辨率为 1280x720 并且您的设备分辨率更高（例如 1920x1080），那么游戏将会拉伸和扭曲。

# c# - 实体框架：创建独立实体

> ID：15787600
> 
> 赞同：3
> 
> 时间：2013-04-03T12:39:07.827
> 
> 标签：c#, linq, entity-framework-5

美好的一天，堆栈溢出。
我的问题是：当实体 from`DataContextModel`在代码中的某处实例化时，它是否已经引用了数据库记录？或者它可以像普通一样使用`class`吗？例如：

```
public void SomeMethod()
{
   var FirstEntity = new DBEntity(); //DBEntity is some entity from the database
   var SecondEntity = new DBEntity();
   var ThirdEntity = new DBEntity();
   DbSet<DBEntity>.Add(SecondEntity);
   DbSet<DBEntity>.Add(ThirdEntity);
   DbContext.SaveChanges();
} 
```

那么，退出`FirstEntity`时会以某种方式受到影响，还是会被删除？ 提前致谢。`SomeMethod`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T12:47:20.873

如果在上下文之外，它只是一个普通的类。

但要小心，假设 this`FirstEntity`在另一个对象中被引用，如下所示：

```
var FirstEntity = new DBEntity(); 
var SecondEntity = new DBEntity();
var ThirdEntity = new DBEntity();
DbSet<DBEntity>.Add(SecondEntity);
DbSet<DBEntity>.Add(ThirdEntity);
SecondEntity.Sibling = FirstEntity; 
```

当您保存更改时，如果`Sibling`示例中是外键引用，它将自动添加`FirstEntity`到数据库中。

另一个要清楚的例子：

```
var Computer = new ComputerEntity();
var Motherboard = new MotherboardEntity();
Computer.Motherboard = Motherboard;
DbSet<ComputerEntity>.Add(Computer);
DbContext.SaveChanges(); 
```

这会将**计算机**和**主板**都保存到数据库中。

# java - Spring MVC 项目中的@RequestAttribute 不获取值

> ID：15787602
> 
> 赞同：2
> 
> 时间：2013-04-03T12:39:13.133
> 
> 标签：java, spring, spring-mvc, spring-annotations

`@RequestAttribute`在 Spring MVC 项目中不获取值。

我使用*@ModelAttribute*。这里`foo`的属性被设置为`bar`

```
@ModelAttribute  
void beforeInvokingHandlerMethod(HttpServletRequest request) 
{  
    request.setAttribute("foo", "bar");  
} 
```

我尝试调用请求属性值以`foo`使用`@RequestAttribute("foo")`. 但值为空。

然后我尝试使用`request.getAttribute("foo")`并打印该值。我不知道以下代码有什么问题：

```
@RequestAttribute("foo"). 
@RequestMapping(value="/data/custom", method=RequestMethod.GET)  
public @ResponseBody String custom(@RequestAttribute("foo") String foo, HttpServletRequest request) {  
    System.out.println("foo value : " + foo);    //null printed  
    System.out.println("request.getAttribute : " + request.getAttribute("foo"));    //value printed  

    return foo;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T19:58:40.167

@RequestAttribute 不是 Spring 注释。如果你想传递一个请求参数的值，你可以这样做

```
@RequestMapping(value="/data/custom", method=RequestMethod.GET)  
public @ResponseBody String custom(@RequestParam("foo") String foo) {  
    System.out.println("foo value : " + foo);    //null printed      
    return foo;  
} 
```

或者，如果您想在路径中传递值，您可以这样做

```
@RequestMapping(value="/data/custom/{foo}", method=RequestMethod.GET)  
public @ResponseBody String custom(@PathVariable("foo") String foo) {  
    System.out.println("foo value : " + foo);    //null printed      
    return foo;  
} 
```

# java - 如何以固定的时间间隔运行后台作业方法？

> ID：15787605
> 
> 赞同：6
> 
> 时间：2013-04-03T12:39:18.197
> 
> 标签：java, jakarta-ee, tomcat, servlets, background-process

我在 Apache Tomcat 上使用 JSP/Servlet。我必须每 10 分钟运行一次方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T14:03:26.663

由于您使用的是 Tomcat，它只是一个准系统 servletcontainer，因此您不能使用`@Schedule`Java EE 规范推荐的 EJB。你最好的选择是[`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)来自 Java 1.5 的`java.util.concurrent`包。您可以通过以下方式触发此操作[`ServletContextListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)：

```
@WebListener
public class BackgroundJobManager implements ServletContextListener {

    private ScheduledExecutorService scheduler;

    @Override
    public void contextInitialized(ServletContextEvent event) {
        scheduler = Executors.newSingleThreadScheduledExecutor();
        scheduler.scheduleAtFixedRate(new SomeTask(), 0, 10, TimeUnit.MINUTES);
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
        scheduler.shutdownNow();
    }

} 
```

`SomeTask`类看起来像这样：

```
public class SomeTask implements Runnable {

    @Override
    public void run() {
        // Do your job here.
    }

} 
```

如果您实际上使用的是真正的 Java EE 容器，它支持 EJB 并且全部都在 em 上（如 Glassfish、JBoss AS、TomEE 等），那么您可以使用[`@Singleton`](http://docs.oracle.com/javaee/6/api/javax/ejb/Singleton.html)带有方法的 EJB [`@Schedule`](http://docs.oracle.com/javaee/6/api/javax/ejb/Schedule.html)。这样容器就会担心池化和销毁线程。您只需要以下 EJB：

```
@Singleton
public class SomeTask {

    @Schedule(hour="*", minute="*/10", second="0", persistent=false)
    public void run() {
        // Do your job here.
    }

} 
```

请注意，通过这种方式，您可以继续以通常的方式（`@PersistenceContext`等等）透明地使用容器管理的事务，这是不可能的`ScheduledExecutorService`——您必须手动获取实体管理器并手动启动/提交/结束事务，但您会默认情况下，像 Tomcat 这样的准系统 servletcontainer 上已经没有其他选项了。

请注意，您永远不应`Timer`在所谓的“终生”运行的 Java EE Web 应用程序中使用 a。它具有以下主要问题，使其不适合在 Java EE 中使用（引自[Java Concurrency in Practice](http://jcip.net/)）：

*   `Timer`对系统时钟的变化很敏感，`ScheduledExecutorService`不是。
*   `Timer`只有一个执行线程，所以长时间运行的任务会延迟其他任务。`ScheduledExecutorService`可以配置任意数量的线程。
*   任何运行时异常都会在杀死该线程时引发`TimerTask`，从而导致`Timer`死机，即计划任务将不再运行（直到您重新启动服务器）。`ScheduledThreadExecutor`不仅可以捕获运行时异常，还可以让您根据需要处理它们。抛出异常的任务将被取消，但其他任务将继续运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T12:44:17.157

阅读[ScheduledExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)它必须由[ServletContextListener启动](http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletContextListener.html)

```
public class MyContext implements ServletContextListener 
{
    private ScheduledExecutorService sched;

    @Override
    public void contextInitialized(ServletContextEvent event) 
    {
        sched = Executors.newSingleThreadScheduledExecutor();
        sched.scheduleAtFixedRate(new MyTask(), 0, 10, TimeUnit.MINUTES);
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) 
    {
        sched.shutdownNow();
    }
} 
```

此外，您可以尝试使用[ServletContextListener中的 Java](http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletContextListener.html) [Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)，但不建议在 Java EE 容器中使用它，因为它会从容器中夺走对 Thread 资源的控制。（ScheduledExecutorService 的第一个选项是要走的路）。

```
Timer timer = new Timer("MyTimer");
MyTask t = new MyTask();

//Second Parameter is the specified the Starting Time for your timer in
//MilliSeconds or Date

//Third Parameter is the specified the Period between consecutive
//calling for the method.

timer.schedule(t, 0, 1000*60*10); 
```

而`MyTask`implements`TimerTask`是一个实现`Runnable`接口的类，所以你必须用你的代码覆盖run方法：

```
class MyTask extends TimerTask 
{
  public void run() 
  { 
    // your code here
  }
} 
```

# magento - 特价 - 如何大量去除？

> ID：15787606
> 
> 赞同：0
> 
> 时间：2013-04-03T12:39:18.083
> 
> 标签：magento

我设置了一些特价，有开始日期，没有结束日期。现在我想删除所有特价。所以没有折扣。

我转到目录视图，选择所有产品，然后单击“更改属性”。我检查了开始日期和特价旁边的“更新”复选框。然后我点击应用。

我可以看到特价消失了，但是……在前端，我仍然可以看到促销！这怎么可能？现在请注意，如果我在后台选择一个产品，并且如果我点击“保存”（不编辑任何内容），那么它可以在前端工作！

当然，我重新索引了所有内容并清除了缓存。我有 20k 个产品，所以我无法一一选择所有产品点击“保存”

谢谢你的帮助罗德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:07:29.247

我为此使用[magmi](http://sourceforge.net/projects/magmi/)。大多数批量操作都可以在这里进行。如果你说你有 20k+ 个产品，你肯定会需要这个。

在此解决方案之外，您可能必须手动执行操作、编写脚本来管理大规模更新，或者编写直接 SQL 语句来更新它。我会在这里发布一个查询，但由于 Magento 的 EAV 系统，它可能过于多样化。

# java - 如何在spring控制器中的数据绑定期间将请求中的两个字符串参数绑定为一种字段类型？

> ID：15787607
> 
> 赞同：1
> 
> 时间：2013-04-03T12:39:22.687
> 
> 标签：java, spring, spring-mvc, data-binding, controller

让成为我的自定义类型（请注意，**没有设置器，因为这是一个不可变的值对象**）：

```
class CustomType extends ValueObject {

  private String value;

  @NotNull
  public String getValue();

  CustomType(String value) { this.value = value;}
  CustomType(String prefix, String suffix) { this.value = prefix + suffix;}

  public String getPrefix() { return value.substring(0, 4);}
  public String getSuffix() { return value.substring(4);}
} 
```

和我的控制器：

```
@Controller
class MyController {
  public ModelAndView processSubmittedForm(@Valid CustomType myObject, BindingResult result) {..}
} 
```

和我的jsp视图表单：

```
<form>
    <input id="prefixField" name="prefix" value="756." type="hidden">
    <input id="suffixField" name="suffix" type="text">
...
<form/> 
```

考虑到此视图将**发送两个 POST 参数`prefix`，并且`suffix`**`myObject`假设 Spring 将使用非空值验证这两个参数，我需要做什么才能将这两个参数绑定到单个对象 ？

我可以通过注册格式化程序或自定义编辑器或其他方式自定义 WebDataBinder、InitBinder 来实现这一点吗？

非常感谢您的帮助。

**编辑**：以下是我用谷歌搜索的相关文章，但没有找到与我自己的问题相匹配的解决方案：

*   [http://forum.springsource.org/showthread.php?130618-Custom-HandlerMethodArgumentResolver-that-uses-messageConverters](http://forum.springsource.org/showthread.php?130618-Custom-HandlerMethodArgumentResolver-that-uses-messageConverters)
*   [Spring MVC 自定义方法参数绑定](https://stackoverflow.com/questions/6519322/spring-mvc-customized-method-parameter-binding)
*   [Spring 部分更新对象数据绑定](https://stackoverflow.com/questions/15124858/spring-partial-update-object-data-binding)
*   [http://sergialmar.wordpress.com/2011/03/29/extending-handler-method-argument-resolution-in-spring-mvc/](http://sergialmar.wordpress.com/2011/03/29/extending-handler-method-argument-resolution-in-spring-mvc/)
*   [自定义 WebArgumentResolver，例如 @PathVariable](https://stackoverflow.com/questions/5060589/custom-webargumentresolver-like-pathvariable)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:32:20.370

@fabien7474，您可以使用 PropertiesEditor，因为如果我们稍微看一下 HTTP 协议，请求中的所有参数都是 String，当您需要执行一些类型转换或验证时，spring 为您提供了一种初始化 binder 的方法。

例子：

```
@Controller
class MyController {
    public ModelAndView processSubmittedForm(@Valid MyObject myObject, BindingResult result) {..}

    @InitBinder
    public void initBinder (WebDataBinder binder) {
         binder.registerCustomEditor(MyObject.class, new CustomObjectEditor());
    }

}

class CustomObjectEditor {
    @Override
    public void setAsText(String text) throws IllegalArgumentException {
            MyObject ob = new MyObject();
            CustomType ct = new CustomType();
            ct.setValue(text);
            ob.setCustomType(ct);

            super.setValue(ob);

    }
} 
```

通过此示例，您可以看到一种对话类型。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T11:25:33.117

```
<form>
<input id="prefixField" name="prefix" value="756." type="hidden">
<input id="suffixField" name="prefix" type="text"> 
```

...

```
Declare prefix field in your object(i.e commandName). 
```

# ruby-on-rails - 仅在存在时调用方法

> ID：15787610
> 
> 赞同：71
> 
> 时间：2013-04-03T12:39:33.147
> 
> 标签：ruby-on-rails, ruby

是否有一些隐藏的 Ruby/Rails-magic 仅在方法存在时才调用它？

可以说我想打电话

```
resource.phone_number 
```

但我事先不知道资源是否响应`phone_number`. 一种方法是

```
resource.phone_number if resource.respond_to? :phone_number 
```

如果在错误的地方使用，那并不是那么漂亮。我很好奇是否存在更符合`try`使用方式的东西（`resource.try(:phone_number)`）。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-03T12:48:08.390

如果您对标准的 ruby​​ 语法不满意，您可以：

```
class Object
  def try_outside_rails(meth, *args, &cb)
    self.send(meth.to_sym, *args, &cb) if self.respond_to?(meth.to_sym)
  end
end 
```

现在：

```
resource.try_outside_rails(:phone_number) 
```

将按照您的意愿行事。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-11-06T08:26:13.383

我会尝试`defined?`（[http://ruby-doc.org/docs/keywords/1.9/Object.html#defined-3F-method](http://ruby-doc.org/docs/keywords/1.9/Object.html#defined-3F-method)）。它似乎完全符合您的要求：

```
resource.phone_number if defined? resource.phone_number 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-12-10T06:58:28.107

我知道这是很老的帖子。但只是想知道这是否是一个可能的答案以及影响是否相同。

```
resource.try(:phone_number) rescue nil 
```

谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-15T15:00:03.180

我不能说效率，但像......

```
Klass.methods.include?(:method_name) 
```

在 Rails 4 中为我工作

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-04-29T03:13:40.110

如果`A.c`已定义和未定义`A.a`，`A.b`您可以做`A.a rescue A.b rescue A.c`，它会像魅力一样工作。不过，你会打破一些愚蠢的规则。

# wix - 如何使用 wix 将多个元素添加到 XML 配置文件中？

> ID：15787614
> 
> 赞同：6
> 
> 时间：2013-04-03T12:39:44.950
> 
> 标签：wix, app-config, elements

我正在尝试使用 Wix 编辑 XML 文件。我正在使用与 Wix 3.7 捆绑的 WixUtilExtension。xml 文件是在 Visual Studio 2010 中为 C# 应用程序创建的设置文件。在这个文件中，我使用了一个用于在数组中存储多个字符串值的元素。这是未更改的设置文件的内容：

```
<configuration>
    <applicationSettings>
        <AppName.Properties.Settings>
            <setting name="StringArray" serializeAs="Xml">
                <value>
                    <ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                        xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                    </ArrayOfString>
                </value>
            </setting>
        </AppName.Properties.Settings>
    </applicationSettings>
</configuration> 
```

我想向此文件`<string>`中的元素添加元素`<ArrayOfString>`。一种方法是使用`<XmlConfig>`wix/UtilExtension 命名空间中的元素。我已将此元素添加到包含如下配置文件的组件中：

```
<Component Id="ProductComponent" Guid="$(var.ConfigGuid)">
    <File Source="SettingsFile.exe.config" KeyPath="yes" Id="FILE_config" />
    <util:XmlConfig
      Name="string"
      Value="My value"
      File="[INSTALLFOLDER]SettingsFile.exe.config"
      Id="String1"
      On="install"
      Action="create"
      Node="element"
      ElementPath="/configuration/applicationSettings/AppName.Properties.Settings/setting[\[]@name='StringArray'[\]]/value/ArrayOfString"
      Sequence="100"
      />
</Component> 
```

这导致向元素添加一个`<string>`元素`<ArrayOfString>`。要将另一个`<string>`元素添加到设置文件，必须将另一个 XmlConfig 元素添加到`<Component>`设置项目的元素中，该元素具有不同的 Id 属性和更高的 Sequence 属性值，如下所示：

```
<util:XmlConfig
    Name="string"
    Value="My second value"
    File="[INSTALLFOLDER]SettingsFile.exe.config"
    Id="String2"
    On="install"
    Action="create"
    Node="element"
    ElementPath="/configuration/applicationSettings/AppName.Properties.Settings/setting[\[]@name='StringArray'[\]]/value/ArrayOfString"
    Sequence="101"
/> 
```

安装 msi 后，`<ArrayOfString>`设置文件中的元素如下所示：

```
<ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                            xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<string>My value</string><string>My second value</string></ArrayOfString> 
```

我发现可以将属性的 Value 属性设置为`<XmlConfig>`属性的值，如下所示：

```
<Property Id="STRING1VALUE" Value="My value" />
<util:XmlConfig Value="[STRING1VALUE]" ... /> 
```

这很好。我希望用户能够在安装过程中动态添加多个值，以便可以将可变数量的`<string>`元素添加到设置文件中。我的第一种方法是使用这样的`<?foreach?>`语句：

```
<?define values="My value;My second value"?>
<?foreach value in $(var.values)?>
    <util:XmlConfig
        Name="string"
        Value="$(var.value)"
        File="[INSTALLFOLDER]SettingsFile.exe.config"
        Id="String$(var.value)"
        On="install"
        Action="create"
        Node="element"
        ElementPath="/configuration/applicationSettings/AppName.Properties.Settings/setting[\[]@name='StringArray'[\]]/value/ArrayOfString"
        Sequence="101"
    />
<?endforeach?> 
```

这种方法存在一些问题：

1.  foreach 语句使用无法设置为属性值的预处理器变量。
2.  Sequence 属性的值保持不变。

我希望用户将字符串元素的值存储在属性中，该属性用分号分隔值，然后在 foreach 语句中解析它们，如下所示：

```
<Property Id="VALUES" Value="My value;My second value" />
<?foreach value in [VALUES]?>
    <util:XmlConfig
        Name="string"
        Value="$(var.value)"
        File="[INSTALLFOLDER]SettingsFile.exe.config"
        Id="String$(var.value)"
        On="install"
        Action="create"
        Node="element"
        ElementPath="/configuration/applicationSettings/AppName.Properties.Settings/setting[\[]@name='StringArray'[\]]/value/ArrayOfString"
        Sequence="101"
    />
<?endforeach?> 
```

这会引发以下错误：

```
The util:XmlConfig/@Id attribute's value, 'String[VALUES]', is not a legal identifier. 
Identifiers may contain ASCII characters A-Z, a-z, digits, underscores (_), or periods (.). 
Every identifier must begin with either a letter or an underscore. 
```

有什么方法可以使用 XmlFile 或 XmlConfig 元素创建可变数量的元素？这个问题的唯一解决方案是 CustomAction 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:17:42.887

根据 Rob 的回答，这是我使用 Wix 将多个元素添加到 XML 配置文件的新方法。我不想编写 C++ 代码，这就是我在 CustomAction 中使用[DTF的原因。](http://robmensching.com/blog/posts/2008/5/16/deployment-tools-foundation-joins-the-wix-toolset)

我将描述如何使用分隔符将包含多个元素的字符串转换为多个 XML 元素。

首先，安装文件中需要有一个包含分隔字符串的属性。

```
<Property Id="STRINGARRAY" Value="string1;string2;string3" /> 
```

当然，这个属性可以由用户在对话框中填充。

接下来，必须编写一个 CustomAction。要使用 DTF，必须将 Microsoft.Deployment.WindowsInstaller.dll 的引用添加到 C# CustomAction 项目中。命名空间 Microsoft.Deployment.WindowsInstaller 应包含在该项目中的 using 指令中。我的 CustomAction 看起来像这样：

```
[CustomAction]
public static ActionResult Insert(Session session)
{
    string strings = session["STRINGARRAY"];
    string[] stringArray = strings.Split(';');
    Database db = session.Database;
    View view = db.OpenView("select * from `XmlConfig`");
    string xpath = "/configuration/applicationSettings/AppName.Properties.Settings/setting[\\[]@name='StringArray'[\\]]/value/ArrayOfString";
    for (int i = 0; i < stringArray.Length; i++)
    {
        string id = String.Format("String{0}", i);
        int sequence = 100 + i;
        string value = stringArray[i].Trim();
        Record rec = new Record(
            id,
            "[INSTALLFOLDER]SettingsFile.exe.config",
            xpath,
            null,
            "string",
            value,
            273,
            "ProductComponent",
            sequence);
        view.InsertTemporary(rec);
    }
    db.Close();
    return ActionResult.Success;
} 
```

在这里，首先将 Property StringArray 读入一个局部变量，该变量被转换为一个字符串数组。以下行建立到安装程序使用的当前数据库的连接。在表 XmlConfig 上创建了一个句柄，该表是添加 XML 元素的表。要将正确的值插入到该表中，最好创建一个包含此类表的安装程序文件，然后在 orca 或 InstEd 等编辑器中查看该表。

在 xpath 中，必须使用双反斜杠来转义反斜杠。id 变量保存临时记录的名称，使用简单的字符串和数字可以完美地工作。序列必须为每个元素递增。我找不到关于 flags 列值的任何文档，但我发现它的值设置为 273 用于创建的元素和 289 用于删除的元素。

一旦记录填充了正确的值，就会使用视图对象的 InsertTemporary 方法将其添加到 XmlConfig 表中。这是针对在分隔字符串中找到的每个元素完成的。

我遇到的一个问题是，如果 XmlConfig 表不存在，此 CustomAction 将失败。为了解决这个问题，我在安装文件中添加了以下代码，该代码将一个元素添加到 XML 文件并立即删除该元素。我想可能有一个更清洁的解决方案，但这对我来说是最简单的。

```
<util:XmlConfig
    Name="string"
    Value="Dummy"
    File="[INSTALLFOLDER]SettingsFile.exe.config"
    Id="DummyEntry"
    On="install"
    Action="create"
    Node="element"
    ElementPath="/configuration/applicationSettings/AppName.Properties.Settings/setting[\[]@name='StringArray'[\]]/value/ArrayOfString"
    Sequence="1" />
<util:XmlConfig
    On="install"
    Action="delete"
    Id="DeleteDummyEntry"
    Node="element"
    File="[INSTALLFOLDER]SettingsFile.exe.config"
    VerifyPath="/configuration/applicationSettings/AppName.Properties.Settings/setting[\[]@name='StringArray'[\]]/value/ArrayOfString/string"
    ElementPath="/configuration/applicationSettings/AppName.Properties.Settings/setting[\[]@name='StringArray'[\]]/value/ArrayOfString"
    Sequence="2" /> 
```

最后，必须将 CustomAction 添加到安装项目中。通过在 setup 项目中添加对 CustomAction 项目的引用，可以像这样指定二进制文件的位置：

```
<Binary Id="XmlCustomActionDLL" SourceFile="$(var.XmlCustomAction.TargetDir)XmlCustomAction.CA.dll" /> 
```

CustomAction 必须立即执行，否则将无法访问会话变量：

```
<CustomAction Id="CA_XmlCustomAction" BinaryKey="XmlCustomActionDLL" DllEntry="Insert" Execute="immediate" Return="check" />
<InstallExecuteSequence>
  <Custom Action="CA_XmlCustomAction" Before="RemoveRegistryValues" />
</InstallExecuteSequence> 
```

为了确定安装顺序中 CustomAction 的正确位置，我参考了 Bob Arnson 的[这篇文章](http://www.joyofsetup.com/2007/07/01/semi-custom-actions/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:58:17.413

是的，这是可能的，但如果您想在安装时确定这一点，那么预处理器不是一个选项。预处理器在构建过程中执行。

要获得所需的内容，您需要编写另一个自定义操作，该操作采用任意长的用户数据集并将临时行添加到`XmlConfig`表中。中的`WcaAddTempRecord()`功能`src\ca\wcautil\wcawrap.cpp`可以完成工作。这是使用向表中添加行`src\ca\wixca\dll\RemoveFoldersEx.cpp`的一个很好的例子。你会想做类似的事情。`WcaAddTempRecord()``RemoveFile`

# tsql - tsql 模式 [^az] 找到 aa

> ID：15787616
> 
> 赞同：0
> 
> 时间：2013-04-03T12:39:47.203
> 
> 标签：tsql, design-patterns, sql-like

我正在尝试用 url 过滤掉列中的“非法”字符

我试过

```
select seourl from products where seourl like '%[^0-9a-z&;/_.?,!%-]%'; 
```

但是我有很多看似正常的网址被选为非法网址。所以我尝试了这个以获得更多的调试信息：

```
declare @p nvarchar(40)='%[^0-9a-z&;/_.?,!%-]%';

select substring(seourl,patindex(@p,seourl),2) s,
patindex(@p,seourl) n,
seourl from products where 
seourl like @p 
```

它表明我在包含“aa”的字符串上得到了命中，如下所示：

```
AA  1  AA_Batteri__-_Mignon__1,5_v/1_stk
aa  2  Haarboerste 
```

可能是因为排序规则是 Danish_Norwegian_CI_AS，其中 aa 像 å,å ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:43:24.670

确实如此。

通过更改排序规则，我不再得到误报：

```
declare @p nvarchar(40)='%[^0-9a-z&;/_.?,!%-]%';

select seourl from t_produkter where 
CAST(seourl COLLATE SQL_Latin1_General_CP1_CI_AS as varchar(255)) like @p 
```

# ruby - Mongomapper 查询多对多关联对象的特定字段

> ID：15787618
> 
> 赞同：0
> 
> 时间：2013-04-03T12:39:50.747
> 
> 标签：ruby, mongodb, associations, mongomapper

我有一个这样的 mongomapper 模型：

```
class ChildTemplate

  include MongoMapper::Document
  plugin MongoMapper::Plugins::IdentityMap

  key :name,            String, :required => true, :unique => true
  key :description,     String
  key :config,          Array

  key :used_parameters, Array
  many :parameters, :in => :used_parameters

  validate :parameters_in_config

  def parameters_in_config
    found_parameters = Set.new

    config.each do |line|
      params = line.scan("<([-+*]{2})(.+)\1>")
      unless params.empty?
        found_parameters |= params.transpose[1]
      end
    end

    unless found_parameters == Parameter.find(used_parameters).fields(:name).to_set 
      errors.add(:parameters, 'Incorrect')
    end
  end

end

class Parameter

  include MongoMapper::Document
  plugin MongoMapper::Plugins::IdentityMap

  key :name,          String
  key :description,   String
  #more keys

end 
```

问题是这一行：

```
unless found_parameters == Parameter.find(used_parameters).fields(:name).to_set 
```

在这里，我建立了一个包含所用参数名称的调用`Set`。`found_parameters`为了验证，我需要确保这个集合等于数组中`name`s 的`parameter`s 。`ids``used_parameters`

它不像我尝试过的那样工作，我尝试过的其他事情包括：

```
used_parameters.name
used_parameters[:name]
parameters.name
parameters[:name]
Parameter.find(used_parameters)[:name] 
```

ETC...

我只是想不出正确的查询。此外，我总是无法找到适合 mongomapper 的文档。网站上的所有内容都非常简短，几乎没有示例，尤其是对于 ruby​​ 和 mongo 的新手来说，这更加困难。

因此，如果有人可以解释更多有关查询相关文档的信息，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:08:09.310

我目前正在使用每个循环来获取名称并将它们存储在单独的集合中：

```
parameters.each do |par|
    used_param_names << par.name
end 
```

这可以正常工作，但我想要一种更优雅的方式，因为 MongoMapper 可能提供了在单个语句中获取名称集合的可能性。

# extjs - 谷歌地球插件，在面板中显示表格

> ID：15787620
> 
> 赞同：1
> 
> 时间：2013-04-03T12:39:58.823
> 
> 标签：extjs, google-earth-plugin

我正在使用带有 Extjs 4 的 Google 地球插件。虽然我认为我遗漏了一些小东西。

我的谷歌地球插件有很多创建的地标。

控制面板看起来像这样。

```
// Create control panel
var controlPanel = new Ext.Panel({
    title: 'Control Panel',
    width: 280,
    height: this.height,
    border: true,
    collapsible: false,
    renderTo: 'westPanel',
    layout: 'accordion',
    layoutConfig: {
        animate: true
    },
    defaultType: 'panel',
    defaults: {
        bodyStyle: 'padding: 10px'
    }
}); 
```

创建一个文件夹。

```
var folder = this.earth.createFolder("PLaceMark Name");

placemark = this.earth.createPlacemark('');

var point = this.earth.createPoint('');

point.setLatitude(my_lat);      
point.setLongitude(my_long);
placemark.setGeometry(point);

folder.getFeatures().appendChild(placemark); 
```

最后，我使文件夹可见。

```
this.earth.getFeatures().appendChild(folder);
folder.setVisibility(true);

// Add panels
controlPanel.add(earthPanel.getLayersPanel());
controlPanel.add(earthPanel.getOptionsPanel());
controlPanel.add(earthPanel.getFoldersPanel());
controlPanel.doLayout(); 
```

我确实可以看到地图上的所有地标，但在面板上没有选项可以使该文件夹可见/隐藏。

我要做的就是在面板上创建一个选项，我可以在其中隐藏我的地标或用复选框显示它们。

也许有一种方法可以构建带有复选框的自定义面板并在我选中/取消选中该框时执行 JavaScript。

任何建议将不胜感激。

# c++ - 如何将数据存储到向量中，然后重用

> ID：15787623
> 
> 赞同：1
> 
> 时间：2013-04-03T12:40:07.030
> 
> 标签：c++, vector

我正在尝试将数据保存到一个数组中，以便再次重复使用，数据采用以下格式并且来自 1964-2013，这只是一个片段，任何帮助都会很棒，干杯。

```
 a     b    c       d        e       f     

1964   9   20.5     8.8       0    37.4     
1964  10   13.6     4.2       5    77.8     
1964  11   11.8     4.7       3    45.5     
1964  12    7.7     0.1      17    65.1     
1965   1    7.3     0.8      14    74.6     
1965   2    6.5     0.1      13     3.3 
```

到目前为止，这是我使用代码的地方：

```
#include <iostream>
#include <fstream>
#include <sstream>
using namespace std;
#include <vector>
#include <string>

struct Weather
{
  int a;
  int b;
  double c;
  double d;
  int e;
  double f;
  double g;
};

int main()
{
  std::vector<Weather> data_weather;
  string line;
  std::ifstream myfile ("weatherdata.txt");
  if (myfile.is_open())
    {
        while ( getline(myfile, line) )
        {

    std::istringstream buffer(line);
    int a_d, b_d, c_d, d_d, e_d, f_d, g_;
    buffer >> a >> b >> c >> d >> e >> f >> g;

    data_weather.push_back(Weather());
    data_weather.back().a = a_d;
    data_weather.back().b = b_d;
    data_weather.back().c = c_d;
    data_weather.back().d = d_d;
    data_weather.back().e = e_d;
    data_weather.back().f = f_d;
    data_weather.back().g = g_d;

    cout << line << endl;

        }
        myfile.close();
    }
    else
        cout << "unable to open file";

        scat::pause("\nPress <ENTER> to end the program.");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:46:49.217

矢量用法示例..

```
#include <iostream>
#include <vector>
using namespace std;

int main()
{
    vector<double> student_marks(20);

    for (vector<double>::size_type i = 0; i < 20; i++)
    {
        cout << "Enter marks for student #" << i+1 
             << ": " << flush;
        cin >> student_marks[i];
    }
    // ... Do some stuff with the values

return 0;
} 
```

以下可以帮助您更好地理解...

[http://www.mochima.com/tutorials/vectors.html](http://www.mochima.com/tutorials/vectors.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:46:12.587

由于您没有告诉我们您遇到了什么问题，我只能猜测。我注意到您正在阅读`int`变量中的所有内容。

```
int year, mm, tmax, tmin, af, rain, sun;
buffer >> year >> mm >> tmax >> tmin >> af >> rain >> sun; 
```

您的数据格式表明您需要浮点数据类型（对于`tmax`，`tmin`并且`rain`至少）。

该`sun`列也不能被解析为`int`（那里只有减号）。读入`sun`变量将失败，并且由于您尚未对其进行初始化，因此您将在此行中调用未定义的行为：

```
data_weather.back().sun = sun; // sun's value is indeterminate, reading it is UB 
```

除非您绝对确定输入操作不会失败（在用户输入的情况下，这实际上永远不会失败）我建议您养成检查成功的习惯：

```
if (!(buffer >> year >> mm >> tmax >> tmin >> af >> rain >> sun)) {
    // something went wrong
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:46:41.293

首先，您需要确保跳过前两行，因为它们不是数值。另外，正如另一个人所说，请确保您将 a 读取`double`为要存储为 a的值`double`以及`int`要读取为 的值`int`。

例子：

```
double value1, value2;
int value3, value4;
stream >> value1 >> value3 >> value 2 >> value 4; 
```

接下来，您可以创建一个`Weather`对象并将该对象推入向量中：

```
Weather objName = {year, month, tempmax, tempmin, airfrost, rain, sun};
data_weather.push_back(objName); 
```

`vector[index]`您可以通过或访问向量的每个元素`vector.at(index)`。您也可以通过这种方式修改这些值：

```
data_weather[2].year = newYear; 
```

要打印，您可以遍历向量并打印出值：

```
for (auto it = data_weather.begin(); it != data_weather.end(); it++) {
  cout << it.year << " " << it.month << endl; //Or any other values you want 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:48:51.713

你完成它的方式是有效的。还有其他方法，比如先创建结构，用数据填充它，然后推送：

```
Weather weather;

buffer >> weather.year >> weather.month
       >> weather.tempmax >> weather.tempmin
       >> weather.airfrost >> weather.rain >> weather.sun;

data_weather.push_back(weather); 
```

# java - StringBuffer 和字符串池

> ID：15787628
> 
> 赞同：7
> 
> 时间：2013-04-03T12:40:28.110
> 
> 标签：java

给定以下代码：

```
StringBuffer str2 = new StringBuffer(" I don't");
    StringBuffer str3 = str2.append(" get it.");
    if (str2 == str3)
    {
        System.out.println("Equal");
    } 
```

我的讲师说，在这种情况下，两者都`str2`将`str3`引用同一个对象，并且字符串“我不明白”将被插入到“字符串池”中。

我想我明白了为什么`str2`，`str3`现在将引用同一个对象，但是为什么字符串“我不明白”。`str3`分配发生时进入字符串池？

例如，如果我这样做：

```
 String s = "abcd"; 
```

然后我知道现在字符串“abcd”将被插入到“字符串池”中，如果它还没有的话。

我很想得到一个解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:44:10.140

> 为什么字符串“我不明白”。进入字符串池。

`"I don't get it."`字符串不会进入实习池。

一种验证方法如下：

```
StringBuffer str2 = new StringBuffer(" I don't");
StringBuffer str3 = str2.append(" get it.");
String str = new String(str3.toString());
if (str == str.intern()) {
    System.out.println("It was not interned before"); // <<== This is printed
} else {
    System.out.println("It was interned before");
} 
```

如果`String`' 的内容被保留，则调用`intern()`将返回一个不同的（“规范”）对象。如您所见，上面返回相同的对象，这意味着您调用的对象`intern()`刚刚成为“规范”对象（即已被实习）。

另一方面，如果你删除`append`，你会得到不同的结果：

```
StringBuffer str2 = new StringBuffer(" I don't");
StringBuffer str3 = str2;
String str = new String(str3.toString());
if (str == str.intern()) {
    System.out.println("It was not interned before"); // <<== This is printed
} else {
    System.out.println("It was interned before");
} 
```

现在里面的字符串`str3`是`" I don't"`. 它的副本已经被保留，因为它与创建`str2`.

您可以并排运行[第一个](http://ideone.com/B59CuF)和[第二个程序，看看自己的区别。](http://ideone.com/sussFH)

`str2 == str3`is的原因`true`与字符串池无关（俚语是[“字符串实习”](http://en.wikipedia.org/wiki/String_interning)）。两者相等，因为`StringBuffer.append`返回`append`调用 的对象，即`str2`。你没有第二个对象——只有一个对象有`StringBuffer`两个引用。其内容`StringBuffer`是`" I don't"`和`" get it."`字符串的连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:20:40.637

您缺少的是[string literal](http://en.wikipedia.org/wiki/String_literal)的概念。

在以下情况下将字符串添加到池中：

*   它被定义为文字。
*   您在其上调用方法实习生。

并且还没有在池中。

在您的示例中，您将字符串文字放入类型的对象中`StringBuffer`。要从该对象中检索字符串，您必须调用`toString()`. 要将结果添加到字符串池中，您必须另外调用`intern()`该字符串。

为了证明我们可以进行一个简单的测试。

```
String s1 = "This is a simple test";
String s2 = "This is a simple test";

System.out.println(s1 == s2);

StringBuffer sb1 = new StringBuffer(s1);
StringBuffer sb2 = new StringBuffer(s2);

String result1 = sb1.toString();
String result2 = sb2.toString();

System.out.println(result1 == result2);

String internedResult1 = result1.intern();
String internedResult2 = result2.intern();

System.out.println(internedResult1 == internedResult2); 
```

代码输出将是：

> 真假 真
> _

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:44:37.977

您正在比较`StringBuffer`对象，而不是 (interned)`String`的。如果您查看`StringBuffer.append( String )`实现，您会注意到它以 结尾`return this;`，因此您的`str2`和`str3`是同一个对象。

```
public synchronized StringBuffer append(String str) {
super.append(str);
    return this;
} 
```

编辑：虽然您的代码中的两个字符串文字被实习（在“字符串池”中），但组合字符串“我不明白”不会被实习。通过检查`StringBuffer`代码（在内部将组合表示为`char[]`数组）可以清楚地看到这一点。

干杯，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:46:53.603

[StringBuffer#append(StringBuffer 某人)](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html#append%28java.lang.StringBuffer%29)

> 将指定的 StringBuffer 附加到此序列。StringBuffer 参数的字符按顺序附加到此 StringBuffer 的内容，使此 StringBuffer 的长度增加参数的长度。如果 sb 为 null，则将四个字符“null”附加到此 StringBuffer。
> 
> 设 n 为旧字符序列的长度，即在执行 append 方法之前包含在 StringBuffer 中的字符序列。那么如果k小于n，则新字符序列中索引k处的字符等于旧字符序列中索引k处的字符；否则，它等于参数 sb 中索引 kn 处的字符。
> 
> 此方法在此（目标）对象上同步，但不在源 (sb) 上同步。

你会得到真实的，因为两者的参考是相同的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T12:49:16.993

似乎有些混乱。StringBuffer 是可变的，这意味着它的内容可以被修改。来自 StringBuffer的方法[append()](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuffer.html#append%28char%5B%5D,%20int,%20int%29)将 String 附加到缓冲区内的字符串并返回实例。所以这一行：

```
StringBuffer str3 = str2.append(" get it."); 
```

将具有与以下相同的实际结果：

```
str2.append(" get it.");
StringBuffer str3 = str2; 
```

换句话说，str3 和 str2 指向同一个对象。因为您附加了字符串文字“get it”。到“我不明白”，这个 StringBuffer 将包含“我不明白。”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T12:52:57.630

> 为什么字符串“我不明白”。当 str3 赋值发生时进入字符串池？

它没有。你的讲师在这一点上是错误的。可能发生的唯一方法是如果 StringBuffer 调用 String.intern()，它没有，或者至少没有指定这样做..

# vaadin - 如何防止 vaadin 默认样式以及如何增加文本字段的宽度和高度

> ID：15787629
> 
> 赞同：1
> 
> 时间：2013-04-03T12:40:29.030
> 
> 标签：vaadin

我正在使用 vaadin 框架开发应用程序。我是 vaadin 框架的新手。

我在设计上有很多困惑。

1）我正在创建布局以显示登录表单，但它会带有一些默认样式。那种风​​格让我的设计崩溃了。

请任何人说我如何删除或阻止该 vaadin 默认样式。

2）如果我增加文本字段的高度，它会自动更改为文本区域。

请帮助任何人如何增加文本字段的高度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T15:51:48.727

答案为 2：

为 TextField 设置高度还有一个副作用，就是将 TextField 置于多行模式（又名“textarea”）。多行模式也可以通过调用 setRows(int) 来实现。高度值覆盖由 setRows(int) 设置的行数。

如果要设置单行文本字段的高度，请在设置高度后调用值为 0 的 setRows(int)。将 rows 设置为 0 会重置副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T11:01:59.040

我看不到任何函数 setRow 和 setHeight 不允许编辑更多行。中间只有一条垂直线。瓦丁 7

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-13T08:25:59.903

对于问题1，您应该首先设置PrimaryStyleName，如果您需要其他样式，请添加StyleName

# sql - 如何从 DateTime 获取日期

> ID：15787634
> 
> 赞同：1
> 
> 时间：2013-04-03T12:40:38.430
> 
> 标签：sql, oracle

假设我有以下 Oracle 表并且我想要`the last (aka max) entry by aGroup and day where the timepart of dateTime in less than 00:00:15`（应该将日期提取为 的日期部分`dateTime`）

它的 SQL 查询是什么（我不知道如何从 dateTime 中提取日期）？

```
 dateTime aGroup
2011-01-01 00:00:12      a
2011-01-01 00:00:31      a
2012-01-01 00:00:09      a
2012-01-01 00:00:03      a
2011-01-01 00:00:06      b
2011-01-01 00:00:14      b
2011-01-01 00:00:16      b
2012-01-01 00:00:16      b
2012-01-01 00:00:11      b 
```

这是我期望的结果

```
 dateTime aGroup
2011-01-01 00:00:12      a
2012-01-01 00:00:09      a
2011-01-01 00:00:14      b
2012-01-01 00:00:11      b 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:48:49.443

考虑一个类似这样的查询：

```
SELECT 
  MAX(DateTime), 
  aGroup
FROM 
  tablename
WHERE 
  TIME_TO_SEC(TIME(DateTime)) < 15
GROUP BY 
  DATE(DateTime), 
  aGroup 
```

这将为您提供每个 aGroup 每天的最大时间（小于 00:00:15）。

**编辑：**更新为`TIME_TO_SEC`用于 oracle

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:50:44.390

[TRUNC 函数](http://docs.oracle.com/cd/B28359_01/olap.111/b28126/dml_functions_2127.htm)非常方便提取天数：

```
SELECT dateTime, aGroup
FROM
(
    SELECT dateTime
          , aGroup
          , RANK() OVER (PARTITION BY aGroup, TRUNC(dateTime, 'DDD') ORDER BY dateTime DESC) as Rank
    FROM table
    WHERE (dateTime - TRUNC(dateTime, 'DDD')) * 24 * 3600 < 15
)
WHERE Rank = 1 
```

线

```
 WHERE (dateTime - TRUNC(dateTime, 'DDD')) * 24 * 3600 < 15 
```

计算当前日期和当天开始之间的天数差。
乘以 24 和 3600 得到秒数，如果小于 15 则过滤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:54:40.377

这是我尝试使用 to_char

```
SELECT AGROUP, MAX(DATETIME) FROM MYTABLE
WHERE TO_CHAR(DATETIME,'SS') <'15'
GROUP BY TO_CHAR(DATETIME,'YYYY-MM-DD'), AGROUP
ORDER BY AGROUP 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T12:56:26.013

```
select dateTime, agroup
  from (select dateTime, agroup, 
               row_number() over (partition by agroup, trunc(datetime)
                                  order by datetime desc) rn
          from yourtab
         where to_number(to_char(datetime, 'hh24miss')) < 15)
 where rn = 1 
```

会这样做。见[http://sqlfiddle.com/#!4/b4eb98/1](http://sqlfiddle.com/#!4/b4eb98/1)

# python - Python-3.x SIMPLE XPath 库

> ID：15787637
> 
> 赞同：3
> 
> 时间：2013-04-03T12:40:45.313
> 
> 标签：python, xpath, python-3.x

我正在尝试使用 Python 解析非常简单的 XML。

在 Python 3 之前，我使用带有 XPath 功能的“webscraping”库。工作非常简单：

```
xpath.search(xml (xml string), "XPath Query (//search)" 
```

- 根据提供的 XPath 查询返回找到的元素。

现在我决定切换到 Python 3，并且上面提到的库不能正常工作（即使在 2to3.py 之后） - 所以我决定使用本机`xml.etree.ElementTree`库。

可能我不明白什么，但这是正确的噩梦。它在您简单地向函数中提供 XML 和 XPath 查询并返回结果的方式中不起作用。相反，您需要使用 10 多行代码，弄乱元素的子元素等，但它仍然无法正常工作......

```
import xml.etree.ElementTree as ET
doc = ET.fromstring(xml)
result = doc.findall("//XPath Query") 
```

返回`SyntaxError: cannot use absolute path on element` 添加`.`到`//XPath Query`也没有多大帮助。

是否有某种原因导致库如此复杂`ElementTree`并且`lxml`不允许简单地使用 XPATH 而不是弄乱元素、`for`每次都使用循环等？

任何人都可以推荐只使用 XPath 查询并返回结果的 python 3 简单库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:37:20.090

[使用来自http://docs.python.org/2/library/xml.etree.elementtree.html](http://docs.python.org/2/library/xml.etree.elementtree.html)的示例 xml ，搜索似乎工作正常：

```
>>> import xml.etree.ElementTree as ET
>>> xml = """..."""
>>> doc = ET.fromstring(xml)
>>> doc.findall(".//rank")
[<Element 'rank' at 0x10199ebd0>, <Element 'rank' at 0x10199e210>, <Element 'rank' at 0x10199e4d0>] 
```

或者，如果您想从根目录显式搜索：

```
>>> ET.ElementTree(doc).findall('//rank') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:58:11.240

现在发现问题了。

我的 XML 响应包含以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<GetOrdersResponse xmlns="urn:ebay:apis:eBLBaseComponents">
  <!-- Call-specific Output Fields -->
  <HasMoreOrders> boolean </HasMoreOrders>
  <OrderArray> OrderArrayType
    <Order> OrderType
      <AdjustmentAmount currencyID="CurrencyCodeType"> AmountType (double) </AdjustmentAmount>
      <AmountPaid currencyID="CurrencyCodeType"> AmountType (double) </AmountPaid>
      <AmountSaved currencyID="CurrencyCodeType"> AmountType (double) </AmountSaved>
      <BuyerCheckoutMessage> string </BuyerCheckoutMessage>
      <BuyerUserID> UserIDType (string) </BuyerUserID>
      <CheckoutStatus> CheckoutStatusType
      ... 
```

解析该 XML 后：

```
root = ET.fromstring(xml)
result = tree.findall("*") 
```

它返回每个带有前缀的单个元素`{urn:ebay:apis:eBLBaseComponents}`

例如，如果我需要搜索`<BuyerCheckoutMessage>`

`result = tree.findall(".//BuyerCheckoutMessage")`它不会返回任何内容，因为该元素看起来像`{urn:ebay:apis:eBLBaseComponents}BuyerCheckoutMessage`.

因此，要搜索元素，我需要`{urn:ebay:apis:eBLBaseComponents}`在每个 XPath 查询之前包含以检索我的元素。

所以解决方案是使用：

`result = tree.findall(".//{urn:ebay:apis:eBLBaseComponents}BuyerCheckoutMessage")` `result[0].text`将返回元素值。

为什么它不能像 ET.search(xml, "XPath-query") 那样工作是我最大的秘密。浪费了这么多时间。

# sml - 如何定义异构列表数据类型？

> ID：15787639
> 
> 赞同：0
> 
> 时间：2013-04-03T12:40:52.367
> 
> 标签：sml, smlnj

我刚开始学习 SML 并遇到问题。我想为一个非同质的列表定义一个数据类型。
举个例子

```
val a = [1,[2,4,3],5,[2,6]] 
```

我做了这个数据类型

```
datatype 'a MulList = List of 'a multiList list
                    | E of 'a; 
```

但我收到以下错误

```
/tmp/emacs-region29207RwC:8.34-8.43 Error: unbound type constructor: multiList

uncaught exception Error
  raised at: ../compiler/TopLevel/interact/evalloop.sml:66.19-66.27
             ../compiler/TopLevel/interact/evalloop.sml:44.55
             ../compiler/TopLevel/interact/evalloop.sml:296.17-296.20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:20:30.447

您的数据类型声明有一些错误。首先，将值构造函数的第一个字母大写是一种很好的做法（就像您所做的那样），但是将类型构造函数全部小写也是一种很好的做法。您遇到的真正错误是您在定义值构造函数时
引用了您的`mullist`类型。`multiList``List`

修复后，您可以创建多列表：

```
datatype 'a mullist = List of 'a mullist list
                    | E of 'a

val a = [E 1, List [E 2, E 4, E 3], E 5, List [E 2, E 6]] 
```

# c# - 这段 C# 代码是怎么回事？

> ID：15787646
> 
> 赞同：0
> 
> 时间：2013-04-03T12:41:27.823
> 
> 标签：c#, winforms

我有一个拆分容器，我需要能够显示和隐藏它。

我尝试使用以下代码将拆分容器“连接”到按钮：

```
if (toolStripButton2.Checked == false)
{
    toolStripButton2.Checked = true;
    this.WindowState = FormWindowState.Maximized;
    splitContainer1.Panel2Collapsed = false;
    splitContainer1.Panel2.Show();                
}
if (toolStripButton2.Checked == true)
{
    toolStripButton2.Checked = false;
    splitContainer1.Panel2Collapsed = true;
    splitContainer1.Panel2.Hide();          
} 
```

但这似乎不起作用。我看不出代码有任何问题。也许我忽略了什么？

有任何想法吗？

- 编辑 -

为了让 panel2 的内容正确显示，我需要最大化表单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T12:44:53.127

看起来您的代码中有逻辑错误。如果`Checked`状态为`False`，则将其设置为`True`，这意味着您的第二`if`条语句将为真，并且代码将在其中运行。

尝试改用`else`语句：

```
if (toolStripButton2.Checked == false)
{
    toolStripButton2.Checked = true;
    this.WindowState = FormWindowState.Maximized;
    splitContainer1.Panel2Collapsed = false;
    splitContainer1.Panel2.Show();
}
else 
{
    toolStripButton2.Checked = false;
    splitContainer1.Panel2Collapsed = true;
    splitContainer1.Panel2.Hide();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T12:48:08.833

你在哪里运行这段代码？您可能想`CheckChanged`在按钮上捕获事件。在您的表单中连接一个处理程序`OnLoad`：

```
toolStripButton2.CheckChanged += toolStripButton2_CheckChanged; 
```

并放置以下处理程序，该处理程序将在检查更改后执行：

```
public void toolStripButton2_CheckChanged(object sender, EventArgs e)
{
    if (toolStripButton2.Checked)
    {
        splitContainer1.Panel2Collapsed = true;
        splitContainer1.Panel2.Hide();

    }
    else
    {
        splitContainer1.Panel2Collapsed = false;
        splitContainer1.Panel2.Show();
    }
} 
```

由于此处理程序在检查更改后运行，因此您无需手动设置检查状态！如果您将检查状态设置为何`false`时`true`（或相反），您将有效地**撤消**更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T12:45:09.193

不应该是：

```
if (toolStripButton2.Checked == false)
{
        toolStripButton2.Checked = true;
        this.WindowState = FormWindowState.Maximized;
        splitContainer1.Panel2Collapsed = false;
        splitContainer1.Panel2.Show();

}
else //toolStripButton2.Checked == true
{
        toolStripButton2.Checked = false;
        splitContainer1.Panel2Collapsed = true;
        splitContainer1.Panel2.Hide();
} 
```

# java - 如何建立到 localhost:8080 的 URL 连接并检查 HTTP 响应代码是否在 200 和 209 之间？

> ID：15787650
> 
> 赞同：1
> 
> 时间：2013-04-03T12:41:37.850
> 
> 标签：java

我一直在努力寻找这个问题的答案。

如何建立到 localhost:8080 的 URL 连接并检查 HTTP 响应代码是否在 200 和 209 之间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:45:11.310

你必须打开一个套接字并发送一个 HTTP 命令：`GET / HTTP 1.0`，并分析 HTTP 响应以找到响应代码。

有一种更简单的方法，使用像[HTTPUnit](http://httpunit.sourceforge.net/)这样的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:47:27.733

这应该这样做：

```
URL url = new URL("http://example.com");
HttpURLConnection connection = (HttpURLConnection)url.openConnection();
connection.setRequestMethod("GET");
connection.connect();

int code = connection.getResponseCode();
if (code>=200 && code <= 209){
    //...
} 
```

# c++ - 使用相同的函数来处理不同的类

> ID：15787652
> 
> 赞同：-3
> 
> 时间：2013-04-03T12:41:42.960
> 
> 标签：c++, oop, class

我有两个 B 类和 C 类——它们都是我（非常原始的）游戏中的怪物。我有一个叫做 MOVE 的函数，它现在只是改变怪物的 X 和 Y 坐标。B 和 C 都是从 A 派生的；所以A有X和Y坐标，B和C有其他属性，比如速度、攻击。

有没有一种方法可以设置一个允许我通过 B 或 C 的函数（因为它们都需要能够移动..），换句话说，被移动的怪物是否无关紧要是 B 还是 C - 但它会以同样的方式对待它们吗？

我正在考虑通过 A 级，但我无法让它发挥作用！:-(。（也许只是我非常缺乏经验！）

非常感谢 - ：-）

凯杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:44:17.180

将 move 实现为 a 的函数。然后 b 和 c 都将具有移动函数，然后您可以使用多态性将 b 和 c 作为 a 的子级移动。

对于更重要的答案，一些代码确实会有所帮助，当然还有您使用的语言。您描述它的方式，有些事情听起来不像它们在 OO 方面实现得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:50:51.217

使用可以`move`在父类中实现方法`A`：

```
class A {
  private:
    int X;
    int Y;

  public:
    A() { X = 0; Y = 0; }

    inline void move (int dx, int dy) {
      X += dx;
      Y += dy;
      std::cout << "Moved to " << X << "," << Y << std::endl;
    }
};

class B : public A {};

class C : public A {}; 
```

然后，您可以使用这些类：

```
A objB;
A objC;

objB.move(0,1);
objB.move(0,3);
objC.move(2,0); 
```

此代码将打印：

```
Moved to 0,1
Moved to 0,4
Moved to 2,0 
```

# php - 从数组中提取键值对并在php中对数组进行分组

> ID：15787662
> 
> 赞同：0
> 
> 时间：2013-04-03T12:42:41.737
> 
> 标签：php, group-by, push

在单一形式中，输入命名为：

*   foo_name
*   foo_age
*   foo_bday
*   bar_cost
*   bar_date

在我使用 post 作为方法提交表单后，我想将输入分组到这样的数组中：

```
$post = array(
    'foo' => array(),
    'bar' => array(),
    'baz' => array()
) 
```

所以所有以'foo'开头的array_keys都将被推入'foo'数组，其他的也是如此。当然与他们各自的价值观一起。

这是我的尝试：

```
$post = array('foo' => array(), 'bar' => array(), 'baz' => array());
echo '<pre>';
foreach ($_POST as $key => $value) {
    if (startsWith($key, 'foo_')) {
        array_push($post['foo'], $key = $value);
    } else if(startsWith($key, 'bar_')) {
    } else if (startsWith($key, 'baz_')) {
    }
}

foreach ($post['foo'] as $key => $value) {
    echo $key . ' = ' . $value . '<br>';
} 
```

最后一个 foreach 语句输出这个

```
0 = 1111
1 = 1112
2 = 210 
```

而不是拥有它的array_keys，如果`$key`在哪里输出，则在哪里产生索引

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:50:38.450

```
$post = array();

foreach($_POST as $key => $value) {
  $key = explode('_', $key);
  $post[$key[0]][$key[1]] = $value;
}

echo '<pre>';
print_r($post);
echo '</pre>'; 
```

这是一个[phpFiddle](http://phpfiddle.org/lite/code/x91-1dc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:54:29.770

如果您能够根据需要命名输入字段，则可以`name="foo[name]"`从头开始命名它们等 - 这将为您提供相应结构化的数组，而无需使用其他代码自己构造数据。

# c# - 在自定义管道组件中读取 SSIS 变量

> ID：15787663
> 
> 赞同：0
> 
> 时间：2013-04-03T12:42:43.057
> 
> 标签：c#, ssis

我正在尝试在自定义 PipelineComponent 中读取包变量

```
public override void PreExecute()
{
            IDTSVariable100 vars2 = null;
            VariableDispenser.LockForRead("System::databse");
            VariableDispenser.GetVariables(out vars2);
} 
```

VariableDispenser.GetVariables(out vars2) 给了我错误

```
"The best overloaded method match for 
"Microsoft.SqlServer.Dts.Runtime.Wrapper.IDTSVariableDispenser100.GetVariables(out Microsoft.SqlServer.Dts.Runtime.Wrapper.IDTSVariables100)' 
 has some invalid argument. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:52:45.293

好吧，除了`IDTSVariableDispenser100`接口是那些“[支持 SQL Server 基础结构并且不打算直接从您的代码中使用](http://msdn.microsoft.com/en-us/library/bb522739.aspx)”的 API 之一这一事实之外，您还声明`vars2`了错误的类型。IDTSVa [​​riableDispenser100.GetVariables](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.wrapper.idtsvariabledispenser100.getvariables.aspx)方法采用`out`类型的参数`IDTSVariables100`，而不是`IDTSVariable100`。（注意“s”。）

# ios - NSURLResponse 和 NSHTTPURLResponse 有什么区别

> ID：15787664
> 
> 赞同：0
> 
> 时间：2013-04-03T12:42:45.180
> 
> 标签：ios, objective-c, response

请原谅我这个愚蠢的问题，但谁能告诉我 NSURLResponse 和 NSHTTPURLResponse 之间有什么区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:44:24.087

> “NSURLResponse 为访问 NSURLRequest 实例返回的响应的对象声明了编程接口。
> 
> NSURLResponse 以独立于协议和 URL 方案的方式封装与 URL 加载相关的元数据。
> 
> NSHTTPURLResponse 对象表示对 HTTP URL 加载请求的响应。它是 NSURLResponse 的子类，提供了访问特定于 HTTP 协议响应的信息的方法。" *
> 
> **引自 Apple Developer 官方[文档](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSURLResponse_Class/Reference/Reference.html)。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:50:37.713

NSHTTPURLResponse - 它返回接收者的 HTTP 状态码。NSURLResponse - 它返回接收者的 URL。

有关更多详细信息，您可以参考 1\. [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLResponse_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLResponse_Class/Reference/Reference.html)。2\. [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSHTTPURLResponse_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSHTTPURLResponse_Class/Reference/Reference.html)

# php - PHP 优化使用 file_put_contents 函数

> ID：15787667
> 
> 赞同：0
> 
> 时间：2013-04-03T12:42:58.987
> 
> 标签：php, performance, io

我正在查询数据库，然后使用 file_put_contents() 将返回的数据存储到 XML 文件中。我想知道调用此函数的哪种方式更好。请注意，$data 是一个大数组，在这种情况下，变量 $rss 可以包含一个大字符串。

起初我实现了这样的事情：

```
foreach($data as $item)
{
    $rss .= '<title>'.getTitle($item['id']).'</title>';
    $rss .= '<data>'.getData($item['id']).'</data>.';
    file_put_contents($this->fileRss, $rss);
    unset($rss);
} 
```

然后我在上面更改为：

```
foreach($data as $item)
{
    $rss .= '<title>'.getTitle($item['id']).'</title>';
    $rss .= '<data>'.getData($item['id']).'</data>.';
}

file_put_contents($this->fileRss, $rss); 
```

哪种方式更好？制作一个很大的变量 $rss 然后保存它还是每次都保存相当小的变量？我不确定，但我认为 IO 操作比内存操作慢，所以第一种方法更好。唯一的问题可能是内存限制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:59:54.767

第一个示例是不正确的，除非您将 FILE_APPEND 添加到 file_put_contents。

```
file_put_contents($this->fileRss, $rss, FILE_APPEND); 
```

我宁愿在循环之前手动打开文件，在循环中写入每一块 rss 数据，在循环之后关闭文件。

```
$file = fopen($this->fileRss, 'w');
foreach($data as $item)
{
    $rss = '';
    $rss .= '<title>'.getTitle($item['id']).'</title>';
    $rss .= '<data>'.getData($item['id']).'</data>.';
    fwrite($file, $rss);
}
fclose($file); 
```

这样您就不会将所有 rss 条目存储在内存中，并且可以避免在每次迭代中打开和关闭文件。我还替换了`unset`with`$rss = '';`以避免循环内的垃圾收集。

# mysql - 文本框输入作为列表视图中的列标题和 vb6 和 mysql 中的表列

> ID：15787669
> 
> 赞同：1
> 
> 时间：2013-04-03T12:42:59.830
> 
> 标签：mysql, database, listview, vb6, columnheader

是否可以将文本框的输入作为listview中的列标题和mysql中的表列？

我想做这样的事情：

```
textbox: name

listview columnheader: name

table column: name 
```

另一个输入：

```
textbox: year

listview columnheader: name    year

table column: name    year 
```

如何实现这一目标？这个网上搜不到。只是询问这在 vb6 和 mysql 作为数据库中是否可行。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:37:31.727

[`ListViewColumnHeaders.Add()`您可以使用方法](http://msdn.microsoft.com/en-us/library/aa443195%28v=vs.60%29.aspx)动态添加列，例如：

```
ListView.ColumnHeaders.Add , , Text1.Text, 2000, lvwColumnLeft 
```

前两个参数（在我的示例中省略）允许您指定索引（以控制位置）和一个可选的键值以稍后引用该列。

# linux - rsync 如何在 rsync 上进行校验和

> ID：15787676
> 
> 赞同：13
> 
> 时间：2013-04-03T12:43:13.200
> 
> 标签：linux, bash, rsync, checksum

使用 rsync 时，有时 rsync 不会复制完成的所有文件，下面是我使用的代码。它们是一种在 rsync 之后进行校验和检查的方法，以查看是否所有文件都已复制，如果在复制所有文件之前不重试？

```
TEMP="/home/user/temp"
OPTS="-rav -h"

rsync $OPTS --stats user@example.com:/home/user/Local $TEMP 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-10-23T11:39:16.150

正如 uʍop ǝpısdn 的回答所暗示的那样，`rsync -c`或者`rsync --checksum`可以做你需要的。

> -c, --checksum: 根据校验和跳过，而不是 mod-time & size
> 
> 这会强制发送方使用 128 位 MD4 校验和对每个常规文件进行校验和。它在初始文件系统扫描期间执行此操作，因为它构建所有可用文件的列表。然后接收方检查每个文件的版本（如果存在并且与发送方对应的文件大小相同），以决定需要更新哪些文件：选择大小改变或校验和改变的文件转移。由于除了在文件传输期间发生的自动校验和验证之外，还会对连接两侧的所有文件进行整个文件校验和，因此此选项可能会非常慢。
> 
> 请注意，rsync 总是通过检查其整个文件校验和来验证每个传输的文件是否在接收端正确重建，但是自动传输后验证与此选项的传输前“此文件是否需要要被更新？” 查看。

如今，对速度缓慢的担忧可能与此无关，当您不能或不想依赖修改时间时，这似乎是一个不错的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T12:46:53.030

我认为这最好通过`rsync`正确配置来解决。阅读`man`页面 :) 有选项（比如`--checksum`这个）。

您也可以自己执行此操作：

1.  `find`rsync'd 目录中的所有文件。
2.  `xargs md5sum`获取所有文件的校验和
3.  `md5sum`校验和

如果您在双方（本地/远程）都这样做，您将有一个校验和进行比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-07T21:29:06.783

采用`rsync -Pahn --checksum /path/to/source /path/to/destination | sed '/\/$/d' | tee migration.txt`

`sed`从校验和验证中删除目录。 `tee`同时输出到屏幕和文件。

请记住，如果您有非常大的文件，这可能不是一个合适的方法，因为验证需要很长时间。

[来源](https://techblog.jeppson.org/2014/10/verify-backup-integrity-with-rsync-sed-cat-and-tee/)

# date - javax.jms.MessageFormatException：消息格式无效

> ID：15787681
> 
> 赞同：0
> 
> 时间：2013-04-03T12:43:23.787
> 
> 标签：date, jms, java-ee-6, glassfish-3, message-queue

当我尝试在 Glassfish 3.1 Open MQ 上使用 JMS 发送`Date`对象时，`MapMessage`出现以下错误：

```
javax.jms.MessageFormatException: [C4017]: Invalid message format. 
```

以下是我如何尝试发送`Date`对象的代码`MapMessage`：

```
public class JSenderMockClient {
    public static void main(String[] args) {
        try {           
            //using jndiContext to get ConnectionFactory, Queue, Session and stuff

            Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
            MessageProducer producer = session.createProducer(destination);

            MapMessage mapMessage = session.createMapMessage();
            mapMessage.setObject("now", new Date());

            producer.send(mapMessage);

            System.out.println("MapMessage \"now\" sent..");            
        } catch (Throwable ex) {
            //just in case stuff
        } finally {
            //closing session and connection
        }
    }
} 
```

有人可以帮我理解为什么我会得到这个例外吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:41:50.740

我认为 MapMessage 只支持字符串和原语。您可以将日期序列化为字符串，也可以使用 ObjectMessage。

要序列化日期，您可以使用[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

请参阅[将自定义对象绑定到 JMS MapMessage](https://stackoverflow.com/questions/9115971/bind-a-custom-object-to-a-jms-mapmessage)

# php - 如何在php中获得小数点后的2个值

> ID：15787683
> 
> 赞同：1
> 
> 时间：2013-04-03T12:43:31.723
> 
> 标签：php

```
$a =99.99999;
echo $f = sprintf ("%.2f", $a); 
```

输出值为`100.00`

但是我需要`99.99`

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:44:21.580

[http://3v4l.org/LdHLA](http://3v4l.org/LdHLA)

```
echo intval((99.99999*100))/100; 
```

取自这里：

[如何使 number_format() 不四舍五入](https://stackoverflow.com/questions/3833137/how-to-make-number-format-not-to-round-numbers-up)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T12:44:43.567

使用下面的代码，您将获得所需的代码

```
echo number_format($a,2); 
```

# linux - lfs glibc 编译 ld 错误

> ID：15787684
> 
> 赞同：3
> 
> 时间：2013-04-03T12:43:34.247
> 
> 标签：linux, ld, glibc, linux-from-scratch

我的主机系统是 Linux debian 2.6.32-5-amd64 #1 SMP Mon Feb 25 00:26:11 UTC 2013 x86_64 GNU/Linux。我想构建一个 LFS，而 glibc 编译现在阻止了我。以下是错误提示，谢谢。

```
/mnt/lfs/sources/glibc-build/resolv/libresolv_pic.a(gethnamaddr.os)：在函数“getanswer”中：
/mnt/lfs/sources/glibc-2.17/resolv/gethnamaddr.c:180：未定义对“__stack_chk_guard”的引用
/mnt/lfs/sources/glibc-2.17/resolv/gethnamaddr.c:483：未定义对“__stack_chk_guard”的引用
/mnt/lfs/sources/glibc-build/resolv/libresolv_pic.a(gethnamaddr.os)：在函数“res_gethostbyaddr”中：
/mnt/lfs/sources/glibc-2.17/resolv/gethnamaddr.c:644：未定义对“__stack_chk_guard”的引用
/mnt/lfs/sources/glibc-2.17/resolv/gethnamaddr.c:783：未定义对“__stack_chk_guard”的引用
/mnt/lfs/sources/glibc-build/resolv/libresolv_pic.a(gethnamaddr.os)：在函数`__GI_res_gethostbyname2'中：
/mnt/lfs/sources/glibc-2.17/resolv/gethnamaddr.c:510：未定义对“__stack_chk_guard”的引用
/mnt/lfs/sources/glibc-build/resolv/libresolv_pic.a(gethnamaddr.os):/mnt/lfs/sources/glibc-2.17/resolv/gethnamaddr.c:636：更多未定义的对“__stack_chk_guard”的引用
collect2：错误：ld 返回 1 个退出状态
make[2]: *** [/mnt/lfs/sources/glibc-build/resolv/libresolv.so] 错误 1
make[2]: 离开目录`/mnt/lfs/sources/glibc-2.17/resolv'
make[1]: *** [解决/其他] 错误 2
make[1]: 离开目录`/mnt/lfs/sources/glibc-2.17'
make: *** [全部] 错误 2

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-22T11:15:09.877

我找到了解决此问题的解决方案：

在 gcc 的第一遍之前由 gcc 源中的这个 sed 修复：

```
sed -i '/k prot/agcc_cv_libc_provides_ssp=yes' gcc/configure 
```

和：

```
sed -i 's/if \((code.*))\)/if (\1 \&\& \!DEBUG_INSN_P (insn))/' gcc/sched-deps.c 
```

但是这些已经在 LFS 手册中提到了。我不知道为什么当我开始使用 LFS 时我没有看到它们 :D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T17:02:30.953

您的 gcc 启用了堆栈保护。

要克服此错误：

CFLAGS="-fno-stack-protector -O2" ./configure --prefix=/somepath

在我的系统上我跑了：

mkdir 构建

光盘构建

CFLAGS="-fno-stack-protector -O2" ../configure --prefix=/usr/test_glibc

# jodatime - jadira usertype joda time 从数据库返回不正确的日期时间

> ID：15787686
> 
> 赞同：4
> 
> 时间：2013-04-03T12:43:37.280
> 
> 标签：jodatime, usertype

我在 Hibernate 4 中使用 jadira 用户类型作为 joda 时间。我需要使用 jvm 日期时间进行存储和检索。问题是回读的日期有 2 小时的偏移量。我们在 UTC+2。日期正确地存储在数据库中。数据库是 MySQL 5。我在会话工厂配置中全局设置 databaseZone 和 javaZone，如下所示：

```
<prop key="jadira.usertype.autoRegisterUserTypes">true</prop>
<prop key="jadira.usertype.databaseZone">jvm</prop>
<prop key="jadira.usertype.javaZone">jvm</prop> 
```

数据库本身配置为时区 SAST。以上述配置为例，数据库中存储的日期为 2008-01-01，读取为 2007-12-31T22:00:00.000+02:00。我也尝试过没有使用注释的全局配置，如下所示，但结果相同：

```
@Type(type = "org.jadira.usertype.dateandtime.joda.PersistentDateTime",
parameters = { @Parameter(name = "databaseZone", value = "jvm"),
         @Parameter(name = "javaZone", value = "jvm")}) 
```

如果我在数据库上运行以下查询，

```
SELECT version( ) , @@time_zone , @@system_time_zone , NOW( ) , UTC_TIMESTAMP( ); 
```

我得到结果：

```
version : 5.5.13
@@time_zone :  SYSTEM
@@system_time_zone  : South Africa Standard Time
NOW() : 2013-04-03 14:33:12
UCT_TIMESTAMP() : 2013-04-03 12:33:12 
```

我在这里想念什么。根据我从 usertype 和 joda 了解到的所有信息，我的配置是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:25:50.537

我设法解决了这个问题。它是由于 MySQL 驱动程序中的错误而发生的。这是[一个链接](http://bugs.mysql.com/bug.php?id=15604/)！我将驱动程序升级到版本 mysql-connector-java-6.1.6。因为我使用 databaseZone="jvm"，所以我必须通过在数据库属性中使用 serverTimezone=UTC 来强制数据库为 UTC。您还必须使用属性 setLegacyDatetimeCode=false 才能使错误修复生效

# c# - 从 XDocument 错误中删除 XElement

> ID：15787689
> 
> 赞同：1
> 
> 时间：2013-04-03T12:43:50.110
> 
> 标签：c#, asp.net, xml, linq-to-xml

我有一个`XDocument`，我想从中删除`XElement`。

我试试这段代码：-

```
XDocument XDoc = XDocument.Parse(XMLFile);

    var PricedItineraryRemove = XDoc.Descendants("PricedItinerary");

    foreach (XElement xle in PricedItineraryRemove)
    {
         if (xle.Attribute("SequenceNumber").Value != SequenceNumber.ToString())
         {
               xEle.Remove(); //this line giving error second time.
         }
    } 
```

`xEle.Remove()`第一次正常工作，但第二次给出`System.InvalidOperationException`异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:46:25.200

尝试使用此代码删除具有特定属性的节点：

```
string sequenceNumberStr = SequenceNumber.ToString();

XDoc.Descendants("PricedItinerary")
    .Where(node => (string)node.Attribute("SequenceNumber") != sequenceNumberStr)
    .Remove(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-14T21:02:36.177

The`PricedItineraryRemove`是一个`IEnumerable<XElement>`在你开始`foreach`ing 时被懒惰评估的。现在，当您在此迭代期间开始删除部分 DOM 时，此迭代器会变得混乱并死掉。简单的解决方案：添加一个 .ToList() 或 .ToArray() 以便预先评估列表并且没有人可以再混淆：

```
foreach (XElement xle in PricedItineraryRemove.ToList()) 
```

# java - IText 中应存在但无法识别的符号

> ID：15787690
> 
> 赞同：0
> 
> 时间：2013-04-03T12:43:50.787
> 
> 标签：java, itext

我挣扎了3天，找不到解决方案

从此代码：

```
 import java.io.ByteArrayOutputStream; 
    import java.io.FileOutputStream; 
    import java.io.IOException; 
    import java.io.InputStream; 
    import java.security.MessageDigest; 
    import java.security.cert.Certificate;    
    import org.javasign.operators.CryptokiGenerator;    
    import com.itextpdf.text.Rectangle; 
    import com.itextpdf.text.pdf.PdfDictionary; 
    import com.itextpdf.text.pdf.PdfName; 
    import com.itextpdf.text.pdf.security.PdfPKCS7; 
    import com.itextpdf.text.pdf.PdfReader; 
    import com.itextpdf.text.pdf.PdfSignatureAppearance; 
    import com.itextpdf.text.pdf.PdfStamper; 
    import com.itextpdf.text.pdf.PdfString; 
    import com.itextpdf.text.pdf.PdfSignature;

    FileOutputStream fout = new FileOutputStream("signed.pdf");
    PdfStamper stamper = PdfStamper.createSignature(reader, fout, '\0');
    PdfSignatureAppearance sap = stamper.getSignatureAppearance();
    sap.setCrypto(null, certs, null, PdfSignatureAppearance.SELF_SIGNED);
    sap.setReason("How to use iText and Javasign with an Italian smart card");
    sap.setLocation("Italy");
    sap.setVisibleSignature(new Rectangle(30, 750, 500, 565), 1, null);
    sap.setExternalDigest(new byte[128], new byte[20], "RSA");
    sap.preClose();

    PdfPKCS7 sig = sap.getSigStandard().getSigner(); 
```

Netbeans 找不到符号：SELF_SIGNED、setExternalDigest() 和 getSigStandard()

我已经添加了上面所有的库以及罐子，所以我的包含没有问题。该文档讲述了包括这个常量在内的那些方法，所以我不知道发生了什么。

我正在使用 IText 5.4.0 有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:49:52.333

> Netbeans 找不到符号：SELF_SIGNED、setExternalDigest() 和 getSigStandard()

根据[IText (5.4.1) API 文档](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfSignatureAppearance.html)，这些方法在类中不存在`PdfSignatureAppearance`。

# ios - 客户向我发送了分发证书和登录用户名密码到开发门户，但没有私钥

> ID：15787691
> 
> 赞同：0
> 
> 时间：2013-04-03T12:43:52.860
> 
> 标签：ios, testing, certificate, private-key

分发证书实际上是从 Apple 的开发门户下载的。有没有办法为分发证书生成私钥？或者私钥必须由创建分发证书的计算机生成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:49:18.367

如果您想对您的应用程序进行代码签名以进行分发，您将需要该私钥。

您可以创建一个***新***的私钥/公钥和分发证书（您的客户可能不满意，因为这会使他的所有证书无效），或者您需要让他向您发送该私钥以便您可以执行您的代码-签署和建设分配。

# java - 声明处理程序错误

> ID：15787692
> 
> 赞同：0
> 
> 时间：2013-04-03T12:43:58.250
> 
> 标签：java, android, handler

我在 android Java 中获得了 Handler 的代码片段，它告诉我删除 postDelayed 参数周围的括号。

```
Handler handler = new Handler();
handler.postDelayed (runable, minute);
private Runnable runnable = new Runnable()
{
    @Override
    public void run()
    {
        biomass = biomass +1;
    }
}; 
```

我希望程序在一分钟后将生物量增加 1。上面已将分钟声明为 int minute = 60000;

我使用的代码片段在这里：www.mopri.de/2010/timertask-bad-do-it-the-android-way-use-a-handler/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:56:06.407

试试这个：

```
final Handler handler = new Handler();
                        handler.postDelayed(new Runnable() {
                          public void run() {
                              biomass = biomass +1;
                          }
                        }, 6000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:46:51.400

您可以使用 Thread.sleep(6000) 暂停 Thread/Runnable，其中 6000 是毫秒数

```
private Runnable runnable = new Runnable()
{
    @Override
    public void run()
    {
        Thread.sleep(6000);
        biomass = biomass +1;
    }
}; 
```

新线程（可运行）.start（）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:56:32.120

您在定义它之前访问 runnable。private 不能在那里定义

```
 Handler handler = new Handler();
    final Runnable runnable = new Runnable()
    {
        @Override
        public void run()
        {

        }
    };
    handler.postDelayed (runnable,c); 
```

# jenkins - 如何在 jenkins 中提供 chrome_bin 路径以在 mac 中进行业力集成？

> ID：15787694
> 
> 赞同：0
> 
> 时间：2013-04-03T12:44:04.657
> 
> 标签：jenkins, jenkins-plugins, karma-runner

chrome_bin = /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome 在 jenkins-karma 集成中不起作用。我收到以下错误：

[错误：spawn EACCES] 代码：'EACCES'，errno：'EACCES'，系统调用：'spawn'}

谷歌搜索后发现这是 karma 中的一个问题，因为没有正确设置 chrome 二进制文件。那么，如何正确设置 chrome 二进制文件？

是否有必要分别为所有浏览器提供路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:56:17.270

我猜您使用的是 Mac，所以只需将其添加到您的 ~/.MacOSX/environment.plist

请记住，路径应该指向可执行文件本身，而不是指向它的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-18T04:40:44.180

别名 chrome="/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome"

在上面运行然后检查

# reporting-services - SSRS 中同一报告的多个打印副本

> ID：15787698
> 
> 赞同：0
> 
> 时间：2013-04-03T12:44:09.260
> 
> 标签：reporting-services, ssrs-2008

我创建了 SSRS 报告（销售订单），客户想要一次打印多个副本，例如，当用户单击打印按钮时，它应该打印 3 个副本，第一个副本应该有标题“基本副本”第二个应该有标题“Copy1”第三个应该有标题 "Copy2" 。

请指导我如何完成此任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:25:29.547

制作起来不是一件容易的事，因为我没有遇到过这种能力。

作为一种解决方法，我认为最好的方法是生成一份报告，该报告将相同的报告复制 3 次，然后在另一份报告中复制。但是不要使用标题，而是创建一个模拟标题的文本框。然后使用文本框中的分页符选项来强制一个新页面。

# javascript - 谷歌地图标记的加载/绑定事件

> ID：15787713
> 
> 赞同：0
> 
> 时间：2013-04-03T12:44:58.753
> 
> 标签：javascript, jquery, google-maps, events, google-maps-markers

我正在使用 Google maps api 加载地图并在地图上创建标记。

现在我想在标记下显示一个小框来显示一些信息。它不是信息窗口。该框应在加载地图本身时出现..

就是这些问题。。

> 1.  要引用标记，标记应该有一些 Id.. 然后只有我可以使用它。那么，如何为marker设置一个Id呢？
>     
>     
> 2.  我需要一个标记的加载/绑定事件来将小盒子绑定到标记。是否有任何事件，如标记的加载/绑定？

请任何人..帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:30:48.310

`Marker with Label`从下面的链接下载库

[http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#MarkerWithLabel](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#MarkerWithLabel)

并使用如下标记；

```
var marker = new MarkerWithLabel({
   position: new google.maps.latLng(28.32323,78.33232),
   map: map,
   draggable: true,
   raiseOnDrag: true,
   labelContent: "Your content should go here",
   labelAnchor: new google.maps.Point(3, 30),
   labelClass: "labels", // the CSS class for the label
   labelInBackground: false
}); 
```

# glassfish - 删除日志中的空白行

> ID：15787714
> 
> 赞同：2
> 
> 时间：2013-04-03T12:45:00.217
> 
> 标签：glassfish, glassfish-3

在 GF 3.1.x 中，在 Netbeans 中回显到屏幕的日志有空行。有什么办法可以删除空白，所以滚动浏览的内容更少？我知道这是次要的，但任何能让这一天更有成效的事情......

```
INFO: 08:40:33,170  INFO RequestMappingHandlerMapping:186 - Mapped "{[/search],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" 

INFO: 08:40:33,171  INFO RequestMappingHandlerMapping:186 - Mapped "{[/search],methods=[POST],params=[],headers=[],consumes=[],produces=[],custom=[]}" 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-03T12:55:18.300

`$ sed '/^$/d' blanks.txt > without_blanks.txt`

# php - 在 Windows 上的 XAMPP 上为 PHP 安装 couchbase 客户端 SDK

> ID：15787715
> 
> 赞同：5
> 
> 时间：2013-04-03T12:45:02.100
> 
> 标签：php, xampp, couchbase

因为我找不到关于这个主题的任何问题，在与 Couchbase 支持取得联系后，我终于能够在 Windows 上的 XAMPP 上设置 couchbase PHP SDK（在我的情况下是 7 untimate，但这应该适用于任何版本），所以我继续写这篇自我回答的帖子，这样每个有同样问题的人都可以解决这个问题。

如果您尝试按照 couchbase SDK 页面 ( [http://www.couchbase.com/develop/php/current](http://www.couchbase.com/develop/php/current) ) 上的说明设置 couchbase PHP 客户端 SDK，它将无法正常工作，因为他们在本文发布时所拥有的只是说明为了在 linux 上设置它，如果你在论坛上稍微挖掘一下，你会找到 IIS 的解释，它没有概述如何使它在 XAMPP/apache 下工作。

如果你解压 /php/ext 文件夹下的 SDK 文件并将 extension=php_couchbase.dll 添加到 php.ini 中，你会在启动 apache 时遇到错误。

为了使 couchbase PHP 客户端 SDK 与 XAMPP 一起工作，您需要**将 libcouchbase.dll 文件移动到 /apache/bin/ 文件夹**，将 php_couchbase.dll 文件移动到 /php/ext/ 文件夹，最后添加线

```
extension=php_couchbase.dll 
```

到 /php/php.ini 文件（这是默认的 ini 文件）。

顺便说一句，据我所知，XAMPP 使用 PHP 的线程安全版本进行部署，因此您必须下载带有“TS”后缀的库（Windows PHP 5.3 TS、32 位或 Windows PHP 5.4 TS、32 位等） .) 适用于您的 PHP 版本。

更新：正如 trondn 在下面的评论中提到的：如果您需要从命令行 (CLI) 运行 php，则需要将 libcouchbase.dll 复制到 c:\xampp\php。或者，您可以将 libcouchbase.dll 复制到系统目录以使其可用于所有二进制文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:22:30.907

您的帖子缺少我在[http://trondn.blogspot.no/2013/04/couchbase-php-xampp-and-windows.html](http://trondn.blogspot.no/2013/04/couchbase-php-xampp-and-windows.html)的帖子中的一个重要细节。您需要将 libcouchbase.dll 复制到 c:\xampp\php 才能从命令行运行 php。或者，您可以将 libcouchbase.dll 复制到系统目录以使其可用于所有二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T11:07:49.190

[http://windows.php.net/downloads/pecl/releases/couchbase/1.1.5/](http://windows.php.net/downloads/pecl/releases/couchbase/1.1.5/) - couchbase sdk PHP 的下载站点。

下载前使用 php info 查找有关您的 apache/php 版本（编译器、架构、线程安全）的信息

libcouchbase.dll 必须与 php.exe 复制到同一目录下 php_couchbase.dll 必须复制到 php 的扩展目录下。

# wpf - WPF如何更新ViewModel中绑定到ReadOnly属性的视图

> ID：15787722
> 
> 赞同：1
> 
> 时间：2013-04-03T12:45:17.497
> 
> 标签：wpf, mvvm, readonly

我将 WPF 窗口标题属性绑定到 ViewModel ReadOnly 属性为：

```
Title="{Binding ClientAndDate}" 
```

ViewModel 属性如下所示：

```
Public ReadOnly Property ClientAndDate As String
    Get
       Return SelectedClient.Name) & " " & SelectedClient.Date)
    End Get
End Property 
```

我在 ViewModel 中实现了 INotifyPropertyChanged 但由于这是 ReadOnly 属性，当 SelectedClient.Name 或 SelectedClient.Date 更改时，它将如何通知 UI 进行更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:51:25.940

如果您订阅 的 PropertyChanged 事件`SelectedClient`，那么您可以在`ClientAndDate`任何时候`Name`或者`Date`是属性更改的原因时在该属性的视图模型中引发属性更改事件`SelectedClient`。

即使该`ClientAndDate`属性是只读的，在您的视图模型中的任何位置为其发出属性更改通知都会导致绑定子系统从该属性刷新自身。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T12:53:24.623

你必须做一些“通知”方法。

像这个。

```
protected void OnPropertyChanged(string name)
{
     PropertyChangedEventHandler handler = PropertyChanged;
     if (handler != null)
     {
         handler(this, new PropertyChangedEventArgs(name));
     }
} 
```

并在每次需要更新 UI 时使用“ClientAndDate”参数调用它。

“ClientAndDate”是更新的属性的名称。

[这](http://msdn.microsoft.com/en-us/library/ms743695.aspx)是 GET 语句的完整示例，但您可以以相同的方式使用它。

# matlab - 在 MATLAB GUI 弹出菜单中写入指数

> ID：15787724
> 
> 赞同：2
> 
> 时间：2013-04-03T12:45:24.023
> 
> 标签：matlab, user-interface, popup, exponent

除了在 MATLAB GUI 弹出菜单中作为字符串的一部分之外`²`，我还有什么方法可以编写指数？`³`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:55:31.977

Matlab`uicontrols` [支持 HTML](http://undocumentedmatlab.com/blog/html-support-in-matlab-uicomponents/)。

因此，您可以创建一个带有任意指数的弹出菜单（`string`如果您是通过 GUIDE 创建的，只需设置属性）：

```
fh = figure;
uicontrol('style','popupmenu','parent',fh,'units','normalized','position',[0.2 0.2 0.4 0.4],...
   'string','<html>text<sup>exp</sup></html>') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:19:21.413

您只需键入 [number]^[power]，它会自动转换为幂符号

# sql - 查询月平均人口

> ID：15787725
> 
> 赞同：0
> 
> 时间：2013-04-03T12:45:31.853
> 
> 标签：sql, sql-server, tsql

我有一张桌子叫`patients`. 我正在尝试查询每月平均每日患者。例如，如果我今天查询：

`select count(*) from patients where active=1`

它返回：

```
-----------
213

(1 row(s) affected) 
```

从数学上讲，我需要计算每天的计数，然后除以该月的天数。

如果我想获得每月活跃患者的平均每日人数，我该怎么做？

编辑：

`Patient ID`一些显示 a和它们的示例数据`creation_date`。

```
Patient ID  creation_date
----------- -----------------------
48          2011-11-16 08:59:34.000
55          2011-11-16 09:09:20.000
82          2011-11-16 09:32:48.000
110         2011-11-16 09:42:38.000
111         2011-11-16 09:42:53.000
123         2011-11-16 09:47:01.000
138         2011-11-16 09:58:02.000
188         2011-11-16 10:20:03.000
225         2011-11-16 10:32:53.000
231         2011-11-16 10:34:48.000
241         2011-11-16 10:38:13.000
259         2011-11-16 10:44:35.000
377         2011-12-17 10:26:21.000
536         2012-02-02 16:10:57.000
551         2012-02-05 11:42:22.000
591         2012-02-12 12:14:57.000 
```

我想要的结果是这样的：

```
Month                          Month Number Year        ADP
------------------------------ ------------ ----------- -----------
November                       11           2011        240
December                       12           2011        280
January                        1            2012        220
February                       2            2012        225
March                          3            2012        241
April                          4            2012        212
May                            5            2012        210 
```

编辑：似乎提交的答案给了我新患者的平均每日计数，这是一个较小的数字。我需要总人口的平均每日计数。

编辑：我了解到患者状态跟踪是在一个名为的表中跟踪的，该表`patient_booking_data`的列名为`release`. 这可能会有所帮助。以下是该表中的示例数据：

```
id          pid         booking_no                       date                    release                 active facility date_created            temporary temporary_no
----------- ----------- -------------------------------- ----------------------- ----------------------- ------ -------- ----------------------- --------- --------------------------------
1           1           12345                            2011-11-03 00:00:00.000 2011-11-15 10:45:00.000 0      11535    2011-11-03 12:45:36.000 0         NULL
2           2           7890                             2011-11-14 12:00:00.000 2011-11-21 07:01:00.000 1      11535    2011-11-14 08:45:33.000 0         NULL
3           3           100                              2011-11-14 09:00:00.000 2011-11-21 07:00:00.000 1      11535    2011-11-14 08:45:34.000 0         NULL
4           4           111                              2011-11-14 09:00:00.000 2011-11-21 07:01:00.000 1      11535    2011-11-14 08:45:34.000 0         NULL
5           5           12                               2011-11-14 10:20:00.000 2011-11-21 07:02:00.000 1      11535    2011-11-14 10:21:25.000 0         NULL
6           6           1234                             2011-11-14 00:00:00.000 2011-11-21 07:02:00.000 1      11535    2011-11-14 10:25:10.000 0         NULL
7           7           1123                             2011-11-14 11:14:00.000 2011-11-21 07:01:00.000 1      11535    2011-11-14 11:15:44.000 0         NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:05:58.297

```
SELECT  m,
        cnt * 1\. / DATEDIFF(day, m, DATEADD(month, 1, m)) AS adp
FROM    (
        SELECT  DATEADD(month, DATEDIFF(month, 0, creation_date), 0) AS m, COUNT(*) AS cnt
        FROM    mytable
        GROUP BY
                DATEADD(month, DATEDIFF(month, 0, creation_date), 0)
        ) q 
```

更新：

创建一个表来跟踪患者状态的变化：

```
CREATE TABLE
        status
        (
        id INT NOT NULL PRIMARY KEY,
        patient INT NOT NULL,
        active BIT NOT NULL,
        ts DATETIME NOT NULL
        )

CREATE INDEX
        ix_status_patient_ts
ON      status (patient, ts) INCLUDE (active) 
```

并记录患者的每个状态变化。

然后运行这个查询：

```
WITH    months (mon) AS
        (
        SELECT  '2012-01-01'
        UNION ALL
        SELECT  DATEADD(month, 1, mon)
        FROM    months
        WHERE   m < '2014-12-01'
        )
SELECT  mon, COUNT(*)
FROM    patient p
CROSS JOIN
        months m
CROSS APPLY
        (
        SELECT  TOP 1
                active
        FROM    status s
        WHERE   s.patient = p.id
                AND s.ts <= m.mon
        ORDER BY
                ts DESC, id DESC
        ) s
WHERE   s.active = 1
GROUP BY
        mon 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:08:15.620

可能是我写过的最不优雅的查询，但它确实给了你想要的结果，即每月每天的平均患者数：

```
SELECT DATENAME(MONTH, creation_date) AS [Month],
       DATEPART(MONTH, creation_date) AS [Month Number],
       DATEPART(YEAR, creation_date) AS Year,
       CAST(COUNT(*) AS FLOAT) / DATEDIFF(DAY, DATEADD(DAY, 1 - DAY(creation_date), creation_date), DATEADD(MONTH, 1, DATEADD(DAY, 1 - DAY(creation_date), creation_date))) AS ADP
  FROM patients
  GROUP BY DATENAME(MONTH, creation_date),
       DATEPART(month, creation_date),
       DATEPART(year, creation_date),
       DATEDIFF(DAY, DATEADD(DAY, 1 - DAY(creation_date), creation_date), DATEADD(MONTH, 1, DATEADD(DAY, 1 - DAY(creation_date), creation_date)))
  ORDER BY 3, 2 
```

这是在[SQLFiddle](http://www.sqlfiddle.com/#!3/61527/15)上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:08:17.713

这似乎回答了你的问题：

```
SELECT YEAR(thedate), MONTH(thedate), datename(month, thedate()), AVG(cnt*1.0)
FROM (SELECT cast(creation_date as date) as thedate, count(*)  as cnt
      FROM patients
      where active = 1
      GROUP BY cast(creation_date as date)
     ) t
group by YEAR(thedate), MONTH(thedate),  datename(month, thedate())
order by 1, 2; 
```

这个 versino 假设您每天都有数据。仔细查看您的数据表明情况并非如此，这个版本很接近：

```
SELECT YEAR(thedate), MONTH(thedate), datename(month, thedate()),
        sum(cnt*1.0) / count(*) as average
FROM (SELECT cast(creation_date as date) as thedate, count(*)  as cnt
      FROM patients
      where active = 1
      GROUP BY cast(creation_date as date)
     ) t
group by YEAR(thedate), MONTH(thedate),  datename(month, thedate())
order by 1, 2; 
```

如果您真的想计算天数，并且没有日历表，那么 SQL 会变得更复杂一些。以下假设您每个月至少有一条记录（以生成 mons 表）：

```
with pc as (
      SELECT cast(creation_date as date) as thedate, count(*)  as cnt,
             MIN(YEAR(creation_date)*12+MONTH(creation_date)) as monnum
      FROM patients
      where active = 1
      GROUP BY cast(creation_date as date)
     ),
     mons as (
      select distinct YEAR(creation_date) as yr, MONTH(creation_date) as mon, DATENAME(month, creation_date) as monname,
             CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(creation_date)-1),creation_date),101) as FirstDay,
             CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(DATEADD(mm,1,creation_date))),DATEADD(mm,1,creation_date)),101) as LastDay,
             YEAR(creation_date)*12+MONTH(creation_date) as monnum
      from patients
     )
SELECT mons.yr, mons.mon, mons.monname,
       (SUM(datediff(day, (case when pc.thedate < mons.FirstDay then mons.FirstDay else  pc.thedate end),
                     (case when pc.thedate > mons.LastDay then mons.LastDay else pc.thedate end)
                    ) * pc.cnt
           ) /
        SUM(datediff(day, (case when pc.thedate < mons.FirstDay then mons.FirstDay else  pc.thedate end),
                     (case when pc.thedate > mons.LastDay then mons.LastDay else pc.thedate end)
                    )
           )
       ) as avgday
FROM mons join
    (select pc.*,
             (select top 1 pc2.monnum from pc pc2 where pc2.thedate > pc.thedate order by thedate
             ) as nextmonnum
      from pc
     ) pc
     on mons.monnum between pc.monnum and pc.nextmonnum
group by mons.yr, mons.mon, mons.monname
order by 1, 2; 
```

基本上，它为每个病人记录创建一个开始和结束日期——由于没有新病人进来，计数将保持不变的时间段。然后它会做一堆摆弄和算术来计算病人天数每个月和每个月的天数。我没有对此进行测试，因此它很容易受到语法错误和非一错误的影响。我在这里举个例子。

但是，您计算的是过去几个月当前活跃的患者数量，而不是那些月份的活跃患者数量。

要获取活动患者的数量，您需要提供“激活”和“停用”的日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:09:21.733

试试这个代码：

```
 select  to_char(creation_date, 'mon') Month,
            to_char(creation_date, 'mm') Month_Number,
            to_char(creation_date, 'yyyy') Year,
            count(Patient_ID) / to_char(last_day(to_date(to_char(creation_date, 'yyyymm')),'DD') Avg_per_Month
       from patients 
      where active=1
   group by to_char(creation_date, 'mon'),
            to_char(creation_date, 'mm'),
            to_char(creation_date, 'yyyy'),
            to_char(last_day(to_date(to_char(creation_date, 'yyyymm')),'DD') 
```

以下代码返回给定月份的天数：

```
to_char(last_day(to_date(to_char(creation_date, 'yyyymm')),'DD') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T13:14:27.127

您可以通过以下方式确定一个月的第一天：

```
dateadd(month, datediff(month, 0, @date), 0) 
```

下个月的第一天：

```
dateadd(month, 1 + datediff(month, 0, @date), 0) 
```

一个月的天数就是两者之差。应用于您的问题，这将变为：

```
select  datepart(year, creation_date) as Year
,       datepart(month, creation_date) as Month
,       1.0 * count(*) / datediff(day,
            dateadd(month, datediff(month, 0, min(creation_date)), 0),
            dateadd(month, 1+datediff(month, 0, min(creation_date)), 0))
            as DailyAverage
from    Table1
group by
        datepart(year, creation_date)
,       datepart(month, creation_date) 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/08198/13/0)

# wordpress - 如何用瑞典语显示月份？

> ID：15787728
> 
> 赞同：1
> 
> 时间：2013-04-03T12:45:37.703
> 
> 标签：wordpress, date, loops, blogs

如果我在 WordPress 中使用以下内容，我会得到英文月份，但我想要瑞典文，例如“maj”而不是“may”。我可以用瑞典语约会吗？

```
the_time('j F Y'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:14:23.000

流氓，

要本地化日期，请使用 date_i18n() 函数。

您还需要将 .po 用于瑞典语。请参阅文件 .po 了解法语。

[http://svn.automattic.com/wordpress-i18n/fr_FR/tags/2.0.11/messages/fr_FR.po](http://svn.automattic.com/wordpress-i18n/fr_FR/tags/2.0.11/messages/fr_FR.po)

在 url 中搜索瑞典语：

[http://svn.automattic.com/wordpress-i18n/](http://svn.automattic.com/wordpress-i18n/)

# byte - CHIP-8 游戏的字节数为奇数

> ID：15787729
> 
> 赞同：2
> 
> 时间：2013-04-03T12:45:42.250
> 
> 标签：byte, chip-8

我一直在研究 CHIP8 仿真器，并且正在使用 notepad++ 中的十六进制编辑器来查看十六进制值。我碰巧注意到，像 David Winter 的“Blitz”这样的游戏有奇数字节数。

![Blitx 属性窗口](https://i.stack.imgur.com/DY6EJ.png)

![闪电战十六进制数据](https://i.stack.imgur.com/ISpwi.png)

在 CHIP8 中，每个操作码都是 2 个字节长，所以应该有偶数个字节，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-23T07:11:56.873

正如您在十六进制转储中看到的那样，作者已将字符串嵌入`BLITZ By David WINTER`到 ROM 中。也许这个字符串出现在游戏的某个地方，或者这只是他签署他的作品的小方法。

该字符串有 21 个字符长，这就是为什么您最终会得到一个奇怪的文件大小。
游戏从指令开始`0x1217`，即跳转到地址`0x217`。这对应于字符串后面的第一个字节，因为游戏是在地址加载到内存中的`0x200`。

# sql-server - ODBC 驱动程序错误地格式化日期字段的问题

> ID：15787732
> 
> 赞同：0
> 
> 时间：2013-04-03T12:45:50.507
> 
> 标签：sql-server, sql-server-2008, odbc, driver, sqldatatypes

我在使用具有不同驱动程序的多个 ODBC 连接到链接表时遇到问题。当我使用 ODBC 驱动程序“SQL Native Client 10.0”时，日期格式正确（例如，US Layout, **02/15/2013**）并且在表格中，日期的数据类型为日期/时间。

但是当我将 ODBC 更改为相同的连接，但将驱动程序更改为 SQL Server 时，我注意到在所有链接表中，日期/时间的数据类型都更改为文本，日期看起来像这样 - **2013-02-15 00:00:00.0000000**。

我需要 SQL Server 驱动程序来保存日期/时间数据类型。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:44:15.483

我在破坏我的大脑后发现了这个问题。

sql server 被设置为将日期保存为 datetime(2)。这已更改为 datetime 并解决了问题。

# android - Android Html.toHtml(editText.getText()) 返回太多html标签

> ID：15787734
> 
> 赞同：0
> 
> 时间：2013-04-03T12:45:55.750
> 
> 标签：android, html, android-edittext, styleable

我正在使用 SpannableString 在 EditText 中使用下面的样式设置文本

```
 str.setSpan(new StyleSpan(android.graphics.Typeface.BOLD), selectionStart, selectionEnd, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
str.setSpan(new StyleSpan(android.graphics.Typeface.ITALIC), selectionStart, selectionEnd, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    str.setSpan(new UnderlineSpan(), selectionStart, selectionEnd, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

这会正确呈现样式文本，如下所示 hi **** *hello*** *how are* ** **yiu**

嗨 - 正常

你好 - 粗体

怎么样 - 粗体+斜体

yiu - 粗体 + 斜体 + 下划线

但是当我这样做时`Html.toHtml(editText.getText())`它会返回

```
 <p><font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">h</font></font></font></font></font></font></font></font></font></font></font></font></font>
</font></font></font></font></font>
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">i</font></font></font></font></font></font></font></font></font></font></font></font>
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
 </font></font></font></font></font></font>
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3"><b><font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">h</font></font></font></font></font></font></b></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font><font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3"><font color ="#000000">
<font size ="3"><font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3"><b><font color ="#000000">
<font size ="3"><font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">o</font></font></font></font></font></font></b></font></font></font></font></font></font></font></font></font></font></font></font><font color ="#000000"><font size ="3"><font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3"><b><font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3"><font color ="#000000"><font size ="3">w</font></font></font></font></font></font></b></font></font></font></font></font></font><b><font color ="#000000"><font size ="3"><font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3"> </font></font></font></font></font></font></b><font color ="#000000"><font size ="3"><font size ="3">
<font color ="#000000"><font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3"><font size ="3">
<font color ="#000000"><font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3"><font size ="3">
<font color ="#000000"><font color ="#000000">
<font size ="3"><b><font color ="#000000">
<font size ="3"><i><font size ="3">
<font color ="#000000"><font color ="#000000">
<font size ="3">a</font></font></font></font></i></font></font></b></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font><font color ="#000000"><font size ="3">
<font size ="3"><font color ="#000000">
<font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3">
<font size ="3"><font color ="#000000">
<font color ="#000000"><font size ="3"><b><font color ="#000000"><font size ="3"><i><font size ="3"><font color ="#000000">
<font color ="#000000"><font size ="3">r</font></font></font></font></i></font></font></b></font></font></font></font></font></font></font></font></font></font></font></font><font color ="#000000"><font size ="3">
<font size ="3">
<font color ="#000000"><font color ="#000000">
<font size ="3"><b><font color ="#000000">
<font size ="3"><i><font size ="3">
<font color ="#000000"><font color ="#000000">
<font size ="3">e</font></font></font></font></i></font></font></b></font></font></font></font></font></font><b><font color ="#000000">
<font size ="3"><i><font size ="3"><font color ="#000000">
<font color ="#000000"><font size ="3"> </font></font></font></font></i></font></font></b><font color ="#000000"><font size ="3"><font size ="3">
<font color ="#000000"><font color ="#000000"><font size ="3">
<font color ="#000000"><font size ="3"><font size ="3">
<font color ="#000000"><font color ="#000000">
<font size ="3"><b><font color ="#000000">
<font size ="3"><i><font size ="3">
<font color ="#000000"><u><font color ="#000000"><font size ="3">y</font></font></u></font></font></i></font></font></b></font></font></font></font></font></font></font></font></font></font></font></font><font color ="#000000">
<font size ="3"><font size ="3"><font color ="#000000">
<font color ="#000000"><font size ="3"><b><font color ="#000000"><font size ="3"><i><font size ="3"><font color ="#000000"><u><font color ="#000000"><font size ="3">o</font></font></u></font></font></i></font></font></b></font></font></font></font></font></font><b><font color ="#000000"><font size ="3"><i><font size ="3"><font color ="#000000"><u><font color ="#000000"><font size ="3">u</font></font></u></font></font></i></font></font></b></p> 
```

这是预期的还是我错过了什么？请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T20:41:48.823

嗯，看起来问题出在

```
Spannable.SPAN_EXCLUSIVE_EXCLUSIVE 
```

如果您阅读文档，之后插入到您的字符串中的任何新文本似乎都不会收到您指定的格式。为了在 html 中执行此操作，必须将标签添加到每个单独的字符。所以你所拥有的似乎是预期的

如果您希望标签更少，请尝试使用

```
Spannable.SPAN_INCLUSIVE_INCLUSIVE 
```

不同之处在于，之后插入到您的字符串中的任何文本都将具有与周围文本相同的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:15:51.183

尝试这个：

```
Html.toHtml(editText.getText().toString()); 
```

希望这将为您提供所需的文本。

# python - 为 Python 处理其输出的外部程序计时

> ID：15787735
> 
> 赞同：4
> 
> 时间：2013-04-03T12:45:58.383
> 
> 标签：python, external, timing

我想测量我的 Python 脚本使用其输出的外部程序的执行时间。

调用`extprogram`产生输出的程序，此刻我做了类似的事情：

```
import time
import subprocess

def process_output(line):
   ...
   ...
   return processed_data

all_processed_data = []

ts = time.time()
p = subprocess.Popen("extprogram", stdout=subprocess.PIPE)

for line in p.stdout:
    all_processed_data.append(process_output(line))
te = time.time()
elapsed_time = te - ts 
```

这不能按预期工作，因为我测量的是执行时间`extprogram`加上处理其输出所需的时间。

`extprogram`产生大量数据，因此我想像现在一样使用循环将其输出“流式传输”到我的 Python 程序中。如何评估`te`何时`extprogram`终止而不是等待处理所有输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:51:08.110

以下仍然使用“挂钟”时间，但可能是使用主机系统时间命令的替代方法。执行和计时被分成单独的线程，并且可以在执行任何处理之前停止计时器。

```
from multiprocessing import Event
import threading
import time
import subprocess

def timing(event):
    print "timer starts"
    ts = time.time()
    event.wait()
    te = time.time()
    elapsed_time = te - ts
    print "Elapsed Time " + str(elapsed_time)

def execution(event): 
    for i in range(0,1000):
        p = subprocess.Popen("ls", stdout=subprocess.PIPE)
    event.set()

if __name__ == '__main__':  
    event = Event()
    e = threading.Thread(target=execution, args=(event,))
    t = threading.Thread(target=timing, args=(event,))
    t.start()  
    e.start() 
    while not event.is_set():
        print "running..."
        time.sleep(1) 
```

这给了我以下输出：

```
timer starts
running...
running...
Elapsed Time 1.66236400604 
```

或者您可以从输出处理中拆分接收“extprogram”的输出。

例如：

```
ts = time.time()
p = subprocess.Popen("extprogram", stdout=subprocess.PIPE)

for line in p.stdout:
    tempdata.append(line)

te = time.time()
elapsed_time = te - ts

for line in tempdata:
    all_processed_data.append(process_output(line)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:26:05.443

由于您在 Unix 下，您可以使用该`time`命令。这里是原理：

```
import sys
import subprocess

p = subprocess.Popen(["time", "ls"], stdout=subprocess.PIPE, stderr=subprocess.PIPE)

for line in p.stdout:  # ls output
    sys.stdout.write(line)

time_output = p.stderr.readlines()

print "Stderr:", ''.join(time_output) 
```

在我的机器上，这给出了：

```
Stderr:         0.01 real         0.00 user         0.00 sys 
```

总处理器时间为`user`+`sys`时间（`real`是挂钟时间，一般不代表程序使用了多少处理器时间：例如 with `sleep 5`，`real`时间为 5 秒，而`user`and`sys`时间为 0）。

这是有效的，因为`time`输出了对实际执行时间的详细说明（不仅仅是墙上时间，这取决于正在运行的其他进程等），并且对标准错误输出这样做。您可以解析标准错误并获取时间信息。

如果您将数据输出到可能会干扰`time`命令解析的标准错误，则此方法可能不实用。

另外，我还没有检查上面的代码不会发生死锁（我不确定如果调用的程序对标准错误打印很多会发生什么：程序是否会阻塞，直到读取标准错误缓冲区，这如果 Python 程序正在读取标准输出，可能不会发生？）。也就是说，如果你知道定时程序没有或很少有关于标准错误的数据，我相信上面的代码不会死锁。

# c++ - C++ 对命名空间中函数的未定义引用

> ID：15787737
> 
> 赞同：3
> 
> 时间：2013-04-03T12:46:00.117
> 
> 标签：c++, c, function, namespaces

这一直困扰着我一段时间。我有一个命名空间，我想在该命名空间中声明 C 风格的函数。所以我做了我认为正确的事情：

```
namespace test
{
    std::deque<unsigned> CSV_TO_DEQUE(const char* data);
    std::deque<unsigned> ZLIB64_TO_DEQUE(const char* data, int width, int height);

    std::string BASE64_DECODE(std::string const& encoded_string);
} 
```

然后对于实现文件：

```
#include "theheaderfile.hpp"

using namespace test;

std::deque<unsigned> CSV_TO_DEQUE(const char* data)
{
     ...
}
std::deque<unsigned> ZLIB64_TO_DEQUE(const char* data, int width, int height)
{
     ...
}

std::string BASE64_DECODE(std::string const& encoded_string)
{
     ...
} 
```

但是，当尝试实际调用这些函数时，我得到一个未定义的引用错误。文件链接，所以我不确定为什么引用未定义。

我还应该补充一点，如果我将函数从`test`命名空间中取出并将它们留在全局命名空间中，它们将毫无障碍地工作。

我想避免在标题中定义函数。这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T12:48:47.570

`using namespace`只会导入命名空间以供使用 - 它不会让您在该命名空间中定义函数。

您仍然需要在 test 命名空间中定义函数：

```
namespace test {
    // your functions
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T12:49:53.300

像这样定义它：

```
std::deque<unsigned> test::CSV_TO_DEQUE(const char* data)
{
     ...
} 
```

否则这只是全局命名空间中的一个新函数

# java - 使用 java 代码评估 javascript

> ID：15787748
> 
> 赞同：7
> 
> 时间：2013-04-03T12:46:35.417
> 
> 标签：java, javascript, web

这可能不切实际，但我将其作为一项任务。我在java中有一个打开的ServerSocket。现在我想读取一个包含 html 和 javascript 的文件，并将 javascript 结果输出到浏览器。所以这样，我将在服务器端评估 javascript。所以我想要评估里面的东西。

我试过这个来测试，它工作但它有一些问题，例如它将消息打印到 System.out。和 engine.eval("print('Welocme to java worldddd')"); 不返回字符串，以便我可以将其输出到套接字的输出流：

```
import javax.script.*;
// create a script engine manager
ScriptEngineManager factory = new ScriptEngineManager();
// create a JavaScript engine
ScriptEngine engine = factory.getEngineByName("JavaScript");
try {
     // evaluate JavaScript code from String
     engine.eval("print('Welocme to java worldddd')");
     //engine.eval("a");
} catch (ScriptException ex) {
     Logger.getLogger(doComms.class.getName()).log(Level.SEVERE, null, ex);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T12:55:01.950

您可以`print()`通过将 writer 设置为`ScriptContext`：

```
ScriptEngine engine = new ScriptEngineManager().getEngineByName("javascript");
ScriptContext context = engine.getContext();
StringWriter writer = new StringWriter();
context.setWriter(writer);

engine.eval("print('Welocme to java worldddd')");

String output = writer.toString();

System.out.println("Script output: " + output); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T13:01:04.150

我过去通过在内部创建一个 javascript 函数`eval()`并调用它来获得结果来解决这个问题：

```
import javax.script.*;
// create a script engine manager
ScriptEngineManager factory = new ScriptEngineManager();
// create a JavaScript engine
ScriptEngine engine = factory.getEngineByName("JavaScript");
try {
     // evaluate JavaScript code from String
     engine.eval("function sum(a,b){ return a + b;}");
     System.out.println(((Invocable) engine).invokeFunction("sum", new Object[]{10,20}));
} catch (ScriptException ex) {
     Logger.getLogger(doComms.class.getName()).log(Level.SEVERE, null, ex);
} 
```

请注意，`invokeFunction`（第一个参数）中的函数名称应与之前声明的名称匹配。

请记住，这可能很危险。您对 javascript 代码的来源有绝对的控制权吗？否则，一个简单`while(true){}`的对您的服务器来说可能是灾难性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-31T11:22:25.257

```
public static String convertEnumToJson(Class<? extends Enum<?>> cls) throws ScriptException, NoSuchMethodException, IllegalAccessException {
    List<Map<String, Object>> map = createMap(Colors.class);
    return createJson(map);
}

public static List<Map<String, Object>> createMap(Class<? extends Enum<?>> cls) throws IllegalAccessException {
    List<Map<String, Object>> res = new ArrayList<>();

    for (Enum<?> item : cls.getEnumConstants()) {
        Map<String, Object> map = new LinkedHashMap<>();

        for (Field field : item.getClass().getDeclaredFields()) {
            if (field.getType() != item.getClass() && !"$VALUES".equals(field.getName())) {
                field.setAccessible(true);
                map.put(field.getName(), field.get(item));
            }
        }

        res.add(map);
    }

    return res;
}

// It's better to use Jackson or similar lib for read/write json
public static <T> String createJson(T obj) throws ScriptException, NoSuchMethodException {
    ScriptEngineManager factory = new ScriptEngineManager();
    ScriptEngine engine = factory.getEngineByName("JavaScript");
    engine.eval("function sum(a){ return a;}");
    return ((Invocable)engine).invokeFunction("sum", obj).toString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-19T05:35:02.410

[如果最近有人像我一样偶然发现了这个](https://www.graalvm.org/reference-manual/js/NashornMigrationGuide/#:%7E:text=The%20Nashorn%20engine%20has%20been,JavaScript%20previously%20provided%20by%20Nashorn.)页面，请注意 Nashorn 已被弃用。

您可以探索其他可用的[替代方案。](https://jaxenter.com/nashorn-deprecation-interview-caldwell-146951.html)

# regex - R：gsub 和捕获

> ID：15787753
> 
> 赞同：2
> 
> 时间：2013-04-03T12:46:42.683
> 
> 标签：regex, string, r, gsub, regex-greedy

我正在尝试从字符串中提取方括号之间的内容：

```
eq <- "(5) h[m] + nadh[m] + q10[m] --> (4) h[c] + nad[m] + q10h2[m]" 
```

我可以过滤掉它们：

```
gsub("\\[.+?\\]","" ,eq) ##replaces square brackets and everything inside it
   [1] "(5) h + nadh + q10 --> (4) h + nad + q10h2" 
```

但是我怎样才能捕捉到括号内的内容呢？我尝试了以下方法：

```
gsub("\\[(.+)?\\])", "\\1", eq) 
grep("\\[(.+)?\\]", eq, value=TRUE) 
```

但两者都返回给我整个字符串：

```
[1] "(5) h[m] + nadh[m] + q10[m] --> (4) h[c] + nad[m] + q10h2[m]" 
```

此外，在我的应用程序中，我永远不知道方括号中有多少这样的术语，所以我不知道 gsub 中的“替换”参数应该是什么样子（例如`\\1`或`\\1_\\2`）。提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T12:57:16.690

试试这个：

```
eq <- "(5) h[m] + nadh[m] + q10[m] --> (4) h[c] + nad[m] + q10h2[m]"
pattern<-"\\[.+?\\]"
m <- gregexpr(pattern, eq)
regmatches(eq, m)
[[1]]
[1] "[m]" "[m]" "[m]" "[c]" "[m]" "[m]" 
```

您的第一个模式不起作用，因为从未找到一个额外的括号：

```
gsub("\\[(.+)?\\])", "\\1", eq) # Yours 
gsub("\\[(.+?)\\]", "\\1", eq) # Corrected -- kind of
[1] "(5) hm + nadhm + q10m --> (4) hc + nadm + q10h2m" 
```

您本质上正在做的是用您的第一个括号部分替换匹配的每个实例，这不是您想要的。

您的第二个模式 using`grep`只是在字符串中搜索该模式，找到它，然后返回所有具有该模式的字符串，这是您的一个字符串。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T13:14:00.463

另外一个选项 ：

```
library(stringr)
pattern<-"\\[.+?\\]"
str_extract_all(eq,pattern)
[[1]]
[1] "[m]" "[m]" "[m]" "[c]" "[m]" "[m]" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T13:19:27.597

`gsub` *用替换*字符串替换字符串的一部分，但在这里我们希望*提取*字符串而不是替换它们。

**gsubfn** `strapplyc`包中的[strapplyc](http://gsubfn.googlecode.com)可以做到这一点。使用您的模式，但在您希望捕获的部分周围插入括号（如果您希望捕获包括方括号在内的整个模式，则省略括号）：

```
> library(gsubfn)
> strapplyc(eq, "\\[(.*?)\\]")[[1]]
[1] "m" "m" "m" "c" "m" "m" 
```

的胆量`strapplyc`是用 tcl 编写的，所以它非常快，尽管对于像这里的那些小字符串来说，速度并不重要。

**strapply**还存在`strapply`接受第三个参数，即应用于每个提取的捕获的函数、列表或原型对象。例如

```
> # function
> strapply(eq, "\\[(.*?)\\]", toupper)[[1]]
[1] "M" "M" "M" "C" "M" "M"

> # list
> strapply(eq, "\\[(.*?)\\]", list(c = "crunchy", m = "munchy"))[[1]]
[1] "munchy"  "munchy"  "munchy"  "crunchy" "munchy"  "munchy" 
```

# uicollectionview - 为 UICollectionView 设置最小 contentsize

> ID：15787754
> 
> 赞同：4
> 
> 时间：2013-04-03T12:46:46.490
> 
> 标签：uicollectionview, contentsize

我希望能够在 UICollectionView 中设置内容大小的最小高度，这样我就可以隐藏/显示 UISearchbar，类似于在 iBooks 上完成的方式。

但是，我不想对布局进行子类化，因为我想为 UICollectionView 保留标准的垂直布局。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-19T18:39:37.750

您可以通过继承 UICollectionViewFlowLayout 并覆盖该方法来做到这一点

```
-(CGSize)collectionViewContentSize
{ //Get the collectionViewContentSize
     CGSize size = [super collectionViewContentSize];
     if (size < minimumSize) return minimumSize;
     else return size;
} 
```

编辑：我刚刚意识到你说你不想继承布局。无论如何，我继承了 UICollectionViewFlowLayout 并且只修改了 collectionViewContentSize 方法。它为我保留了标准的垂直布局。

编辑：[https](https://stackoverflow.com/a/14465485/2017159) ://stackoverflow.com/a/14465485/2017159 。这里说 UICollectionViewFlowLayout 只支持一个方向（垂直或水平），所以应该没问题吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:21:34.170

你可以试试这个快速解决方案，如果你有足够的项目填满屏幕，搜索栏将被隐藏。当然，您可以使用任何自定义视图更改下面的 UISearchBar。

```
collectionView.contentInset = UIEdgeInsetsMake(44.0, 0.0, 0.0, 0);
UISearchBar *searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, -44, collectionView.frame.size.width, 44)];
[collectionView addSubview:searchBar];
if([items count] != 0){
    [collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:0 inSection:0] atScrollPosition:UICollectionViewScrollPositionTop animated:NO];
} 
```

另一种完全相同的解决方案是使用补充视图。我只是试了一下。创建 UICollectionReusableView 的子类，确保在流布局上设置标题引用大小

```
[flowLayout setHeaderReferenceSize:CGSizeMake(0, 44.0)]; 
```

将补充视图注册到集合视图

```
[playersCollectionView registerClass:[MySupplementaryView class] forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:@"MyHeader"]; 
```

并实现 UICollectioViewDataSource 方法

```
-(UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath
{
    MySupplementaryView *header = nil;

    if ([kind isEqual:UICollectionElementKindSectionHeader]){
        header = [collectionView dequeueReusableSupplementaryViewOfKind:kind withReuseIdentifier:@"MyHeader" forIndexPath:indexPath];
        header.headerLabel.text = @"bla bla";
    }
    return header;
} 
```

最后在每次重新加载后，将集合视图重新定位在第一个项目的开头以隐藏 searchBar/header 视图。

```
if([items count] != 0){
    [collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:0 inSection:0] atScrollPosition:UICollectionViewScrollPositionTop animated:NO];
} 
```

补充视图教程[techotopia.com](http://www.techotopia.com/index.php/An_iPhone_iOS_6_Storyboard-based_Collection_View_Tutorial#Implementing_a_Supplementary_View) , [appcode.com](http://www.appcoda.com/supplementary-view-uicollectionview-flow-layout/) , [mobinius](http://blog.mobinius.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T15:18:05.440

这是khangsile答案的调整版本。仅限制实际小于最小尺寸的尺寸

```
- (CGSize)collectionViewContentSize
{
    CGSize size = [super collectionViewContentSize];

    size.width  = MAX(size.width, self.minimumContentSize.width);
    size.height = MAX(size.height, self.minimumContentSize.height);

    return size;
} 
```

# .htaccess - .htaccess 重定向不起作用。重定向不断循环

> ID：15787759
> 
> 赞同：0
> 
> 时间：2013-04-03T12:46:53.887
> 
> 标签：.htaccess, redirect

我希望将 '/portfolio' 重定向到 '/portfolio/architectural-photography' 但是 htaccess 重定向不起作用。我收到“此页面未正确重定向”错误页面。

它似乎不断循环结束位并试图去 - [http://www.danielbinks.co.uk/portfolio/architectural-photography/architectural-photography/architectural-photography/architectural-photography/architectural-photography/architectural -摄影/建筑摄影](http://www.danielbinks.co.uk/portfolio/architectural-photography/architectural-photography/architectural-photography/architectural-photography/architectural-photography/architectural-photography/architectural-photography)

这是我的规则（请告诉我有什么问题）：

```
redirect 301 /portfolio http://www.danielbinks.co.uk/portfolio/architectural-photography 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:19:54.350

该`Redirect`指令将两个路径节点链接在一起，因为重定向的目标与源匹配，它只会继续循环。尝试`RedirectMatch`改用：

```
RedirectMatch 301 ^/portfolio/?$ http://www.danielbinks.co.uk/portfolio/architectural-photography 
```

# javascript - 如何将我的对象与数据转换为 dygraphs 的输入？

> ID：15787763
> 
> 赞同：0
> 
> 时间：2013-04-03T12:47:05.320
> 
> 标签：javascript, dygraphs

我有一个时间序列列表。每个时间序列都由包含时间戳和值的对象组成。不同时间序列的时间戳可能重叠也可能不重叠。我想在一个 DyGraph 中绘制这些时间序列。

一个例子：

```
 data["first series"]  = [{timestamp: 1, value: 10.3},
                             {timestamp: 3, value: 12.5}]
    data["second series"] = [{timestamp: 2, value: 11.5},
                             {timestamp: 3, value: 13.0},
                             {timestamp: 4, value: 14.3}] 
```

将我的输入数据转换为适合 DyGraph 的形式的最有效方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:44:36.440

我最近不得不为 dygraphs 项目做同样的事情。在较高级别上，您将需要创建一个组合数据集，以便在您的所有系列中每个唯一 x 值都有一行。对于在给定 x 处没有值的列/系列，您可以插入空值。

我将粘贴我在这里使用的一般代码。这是一个快速的复制粘贴，已经过大量修改，变量重命名等。它可能有一些小错误。我还在 dygraph 的 customBars 中使用了 min/max，这就是为什么粘贴的这段代码使用数组作为列，即使它可能不是必需的。

```
function combineSeries(seriesArr) {

  var dyDataRows = [];

  for (var seriesIdx = 0; seriesIdx < seriesArr.length; seriesIdx++) {

    var seriesData = seriesArr[seriesIdx];

    var newDyDataRows = [];

    var nextDataRowInsertIdx = 0;
    for (var dpIdx = 0; dpIdx < seriesData.length; dpIdx++) {
      var dp = seriesData[dpIdx];

      if (nextDataRowInsertIdx < dyDataRows.length) {
        var nextDataRowCols = dyDataRows[nextDataRowInsertIdx];
        var nextDataRowX = nextDataRowCols[0].getTime();
      }

      if (nextDataRowInsertIdx >= dyDataRows.length || dp.x < nextDataRowX) {
        var newDataRowCols = [new Date(dp.x)];
        for (var colIdx = 0; colIdx < seriesIdx; colIdx++) {
          newDataRowCols.push([null]);
        }
        newDataRowCols.push([dp.y]);
        newDyDataRows.push(newDataRowCols);
      }
      else if (dp.x > nextDataRowX) {
        var newDataRowCols = nextDataRowCols.slice(0);
        newDataRowCols.push([null]);
        newDyDataRows.push(newDataRowCols);
        nextDataRowInsertIdx++;
        dpIdx--;
      }
      else {//(dp.x == nextDataRowX) {
        var newDataRowCols = nextDataRowCols.slice(0);
        newDataRowCols.push([dp.y]);
        newDyDataRows.push(newDataRowCols);
        nextDataRowInsertIdx++;
      }

    }

    //insert any remaining existing rows
    for (var i = nextDataRowInsertIdx; i < dyDataRows.length; i++) {
      var nextDataRowCols = dyDataRows[i];
      var nextDataRowDateTm = nextDataRowCols[0];

      var newDataRowCols = nextDataRowCols.slice(0);
      newDataRowCols.push([null]);
      newDyDataRows.push(newDataRowCols);
    }

    dyDataRows = newDyDataRows;
  }

  return dyDataRows;
}; 
```

这是蛮力方法，并且可能有更有效的 JavaScript 编码技术。不过它对我有用。

# maven - 使用 jboss-maven-plugin 部署 EJB 模块失败并出现 FileNotFoundException

> ID：15787764
> 
> 赞同：0
> 
> 时间：2013-04-03T12:47:05.953
> 
> 标签：maven, ejb, maven-plugin, jboss5.x, file-not-found

我正在尝试使用 jboss-maven-plugin 将包含我的 EJB 的 jar 文件部署到 JBoss 5。但是插件找不到我的jar文件。

我正在运行命令：mvn jboss:deploy

这就是我在 POM.xml 中的配置：

```
<build>
    <finalName>my-ejb</finalName>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jboss-maven-plugin</artifactId>
            <version>1.5.0</version>
            <configuration>
                <hostName>localhost</hostName>
                <port>8080</port>
                <fileNames>
                    <fileName>target/my-ejb-1.0-SNAPSHOT.jar</fileName>
                </fileNames>
            </configuration>
        </plugin>
    </plugins>
 </build> 
```

这是我在 JBoss 控制台上收到的错误消息：

```
14:36:50,371 ERROR [[HtmlAdaptor]] Servlet.service() for servlet HtmlAdaptor threw exception
java.io.FileNotFoundException: my-ejb-1.0-SNAPSHOT.jar doesn't exist. (rootURI: file:/Users/hordine/software/jboss-5.1.0.GA/bin/target/my-ejb-1.0-SNAPSHOT.jar, file: /Users/hordine/software/jboss-5.1.0.GA/bin/target/my-ejb-1.0-SNAPSHOT.jar) 
```

有趣的是，“/Users/hordine/software/jboss-5.1.0.GA”是我的 JBOSS_HOME。为什么要在 JBoss 本身内部寻找要部署到 JBoss 的 jar 文件？

如何配置此文件名以便可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:21:56.350

我需要在文件名前面加上 ${project.basedir}/：

```
<fileName>${project.basedir}/target/my-ejb-1.0-SNAPSHOT.jar</fileName> 
```

# php - 不知道如何使用 php soap api

> ID：15787766
> 
> 赞同：1
> 
> 时间：2013-04-03T12:47:07.260
> 
> 标签：php, soap, soap-client

我正在尝试将此 wsdl 与 PHP 的内置 SoapClient 一起使用：

[http://api1.silverpop.com/SoapApi?wsdl](http://api1.silverpop.com/SoapApi?wsdl)

不幸的是，它似乎不起作用。我的代码：

```
<?php
$silverpop = new SoapClient('SoapApi.xml');
$result = $silverpop->Login(array('USERNAME' => 'zzz', 'PASSWORD' => 'xxx'));

echo $silverpop->__getLastRequest(); 
```

我希望最后一个请求会被回显，但没有回显，这让我怀疑是否真的发出了任何东西。有任何想法吗？

编辑：我也试过这个没有成功：

```
$silverpop->__soapCall('Login',
    array(array('USERNAME' => 'zzz', 'PASSWORD' => 'xxx')),
    array('uri' => 'SilverpopApi:Engageservice', 'soapaction' => '')
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:45:43.287

必须向 SoapClient 添加第二个参数才能使 __getLastRequest() 工作。例如。

```
$silverpop = new SoapClient('http://api1.silverpop.com/SoapApi?wsdl', array('trace' => 1)); 
```

# android - 调用 finish() 后保存来自 Activity 的用户输入

> ID：15787767
> 
> 赞同：-3
> 
> 时间：2013-04-03T12:47:09.950
> 
> 标签：android, android-activity

在我的 Android 应用程序中，我有一个获取用户全名的活动。当调用下一个 Activity 时，前者进入暂停状态，我有：

```
@Override
protected void onPause() {
    super.onPause();
    finish();
} 
```

如果用户点击后退按钮，应用程序不应返回到该活动（获取用户全名的活动）。

如何从另一个 Activity 中的 EditText 中获取作为字符串读入的全名？当我需要该字符串时，我已经在获取全名的 Activity 上调用了 finish()。

我希望这次我的意思很清楚。如果不是，我将尝试再次解释。带来不便敬请谅解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:50:34.543

您必须将用户输入保存在 sharedprefrences 中。

```
private void SavePreferences(String key, String value) {
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(key, value);
        editor.commit();
    }

    private void LoadPreferences() {
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        String score = sharedPreferences.getString("INPUT", "");

} 
```

要保存您的用户输入，只需调用 SavePreferences("INPUT", "YOUR_Input"); 并调用 LoadPreferences() 来检索它。

# powershell - 通过 PowerShell 远程访问 Azure 云服务 PaaS 实例

> ID：15787768
> 
> 赞同：2
> 
> 时间：2013-04-03T12:47:13.250
> 
> 标签：powershell, azure, rdp, powershell-remoting, azure-virtual-machine

我有一个带有 2 个实例的 Azure Web 角色（注意 PaaS 角色，***不是 Azure 虚拟机**）。我可以通过远程桌面连接到它们，但我不知道如何在 Powershell 中进行远程处理（PowerShell 远程处理），因为与 Azure 虚拟机云服务不同，无法为每个实例定义端点和端口为每个工人角色没有单独的地址。

如何通过 Powershell Remoting 连接到单个 PaaS Worker 角色实例？IOW 我该如何使用：

```
Enter-PSSession –ComputerName PC1 –Credential User 
```

针对云服务工作者角色 (PaaS) 实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:36:36.067

对于 Azure VM，使用 PowerShell Remoting（不要与 RDP 混淆）看起来完全可行：

> PowerShell Remoting 需要正确的网络配置以允许远程连接。由于我们将通过 Web 访问 VM，因此我们需要使用 HTTPS 来保护通信通道。跳过 PowerShell Remoting 使用的 Windows 远程管理的详细信息，我只会说默认的 HTTPS 端口是 5986。
> 
> 要允许连接到 VM，必须将此端点添加到 ServiceDefinition.csdef：

```
<endpoints>
    <inputendpoint localport="5986" port="5986" protocol="tcp" name="WinRM" /> 
</endpoints> 
```

> 打开正确的端口后，只需启用 PowerShell Remoting。在启用它之前需要解决两个问题。
> 
> 首先是使用正确的用户帐户来设置远程处理。您必须使用之前创建的帐户来运行脚本来设置 Remoting[1]。使用这些命令，您之前创建的用户将执行脚本 e:\approot\StartRemotingListener.ps1：

```
schtasks /CREATE /TN "StartRemotingListener" /SC ONCE /SD 01/01/2020 /ST 00:00:00 
               /RL HIGHEST /RU <username> /RP <password> 
               /TR "powershell -ExecutionPolicy unrestricted 
                               -Command e:\approot\StartRemotingListener.ps1 -Force" /F
schtasks /RUN /TN "StartRemotingListener" 
```

> 第二个问题是配置 HTTPS 连接所需的证书。获取证书对于生产环境可能不是问题。您可能已经为您的服务提供了一个并且可以重复使用它。如果您的服务在正常操作或非生产环境中不需要证书，则可能会出现问题。

来自：http: [//blogs.msdn.com/b/mariok/archive/2011/08/08/command-line-access-to-azure-vms-powershell-remoting.aspx](http://blogs.msdn.com/b/mariok/archive/2011/08/08/command-line-access-to-azure-vms-powershell-remoting.aspx)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-03T12:51:10.420

使用 Azure 管理门户，您可以下载用于连接的 RDP 文件。编辑这些文件，您应该拥有连接所需的所有详细信息（端点和端口）。

顺便说一句，Azure 使用端口转发进行特定实例访问。

# tomcat - 在战争之外保护对文件的访问

> ID：15787776
> 
> 赞同：0
> 
> 时间：2013-04-03T12:47:29.203
> 
> 标签：tomcat, spring-security

我有一个使用 Spring 3.1 构建的 Web 应用程序，使用 Spring Security 3.0，部署在 Tomcat 6 下。站点中的某些页面仅对具有 ROLE_MEMBER 角色的用户可用。其中一个页面显示了可供下载的文件的动态列表。用户可以使用应用程序中的安全表单上传新文件。我的问题是：我可以在哪里存储文件，以便 Spring Security 保护对它们的访问？我目前将它们放在 Web 应用程序文件夹中，但这使得部署应用程序的新版本很痛苦，因为我必须在 Tomcat 重新部署新版本后备份文件并恢复它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:58:00.220

Spring Security 可以保护一些 URL 或方法调用。它无法保护您的文件。所以你的文件在哪里并不重要。使用哪个 URL 用户可以下载某些文件很重要。

例子：

```
http://domain.com/files.html - list of files 
```

对应文件：

```
http://domain.com/files/file1.pdf
http://domain.com/files/file2.doc
http://domain.com/files/file3.png 
```

安全配置：

```
<intercept-url pattern="/files.html" access="hasRole('ROLE_MEMBER')" />
<intercept-url pattern="/files/**" access="hasRole('ROLE_MEMBER')" /> 
```

实际文件路径（从安全角度来看它们并不重要）：

```
/home/user/uploads/file1.pdf
/home/user/uploads/file2.doc
/home/user/uploads/file3.png 
```

当然，您需要一些 servlet/controller 来负责通过给定的 URL 发送文件内容。

# python - 如何在 python 中为 selenium webdriver 导入和导出 FireFox 配置文件

> ID：15787777
> 
> 赞同：1
> 
> 时间：2013-04-03T12:47:30.030
> 
> 标签：python, selenium, profile

如何导入和导出 webdriver FireFox 配置文件？

我想做的是：

```
from selenium import webdriver

#here I want to import the FF profile from a path

if profile:
  driver = webdriver.Firefox(profile)
else:
  #this is the way I get the WebDriver currently
  driver = webdriver.Firefox()

#doing stuff with driver

#Here I want to save the driver's profile 
#so I could import it the next time 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:33:16.630

您必须决定存储缓存配置文件的位置，然后使用`os`库中的函数检查该位置是否有文件，并加载它。要首先缓存配置文件，您应该能够从 获取配置文件的路径`webdriver.firefox_profile.path`，然后将内容复制到您的缓存位置。

综上所述，我真的建议不要这样做。通过缓存在测试运行时创建的配置文件，您可以根据之前的行为使您的测试发生变异，这意味着它不再是孤立的和可靠的可重复的。我建议您与测试分开创建一个配置文件，然后始终将其用作基本配置文件。这使您的测试可预测地重复。Selenium 甚至可以很好地使用这种模式，因为它实际上并不使用您提供的配置文件，而是复制它并使用副本来启动浏览器。

# php - 无法使用php上传图像文件

> ID：15787779
> 
> 赞同：0
> 
> 时间：2013-04-03T12:47:30.860
> 
> 标签：php, database, image, file, warnings

这条线呢？

> 警告：copy(): open_basedir 限制生效。File() 不在允许的路径内：(/xxx/xxx/xxx/xxx/php:/tmp) 在 /home/xxxxxxxxxx/public_html/newsp.php 中的第 85 行

这是我的代码：

```
<?php
 session_start();
 if (isset($_SESSION['password'])) {
        $con=mysqli_connect("xxxxx","xxxxx","xxxxx","xxxxx");
        // Check connection
            if (mysqli_connect_errno($con))
            {
            echo "Failed to connect to MySQL: " . mysqli_connect_error();
            }
            $result = mysqli_query($con,"SELECT * FROM News ORDER BY ID DESC LIMIT 1");

            while($row = mysqli_fetch_array($result))
                {
                    $ID = $row['ID'] + 1;
                }

            $title = $_POST['title'];
            $content = $_POST['content'];
            $type=$_POST['type'];

            echo $title . "<br>";
            echo $content . "<br>";
            echo $type . "<br>";
            echo $ID . "<br>";

            $sql = 'INSERT INTO News '.'(Title, Content, Type) '.'VALUES ( $title, $content, $type)';
            $result=mysqli_query($con,$sql);

//define a maxim size for the uploaded images in Kb
 define ("MAX_SIZE","100"); 

//This function reads the extension of the file. It is used to determine if the file  is an image by checking the extension.
 function getExtension($str) {
         $i = strrpos($str,".");
         if (!$i) { return ""; }
         $l = strlen($str) - $i;
         $ext = substr($str,$i+1,$l);
         return $ext;
 }

//This variable is used as a flag. The value is initialized with 0 (meaning no error  found)
//and it will be changed to 1 if an errro occures.
//If the error occures the file will not be uploaded.
 $errors=0;
//checks if the form has been submitted
    //reads the name of the file the user submitted for uploading
    $image=$_FILES['file']['name'];
    //if it is not empty
    if ($image)
    {
    //get the original name of the file from the clients machine
        $filename = stripslashes($_FILES['file']['name']);
    //get the extension of the file in a lower case format
        $extension = getExtension($filename);
        $extension = strtolower($extension);
    //if it is not a known extension, we will suppose it is an error and will not  upload the file,
    //otherwise we will do more tests
        if (($extension != "jpg") && ($extension != "jpeg") && ($extension != "png") && ($extension != "gif"))
            {
            //print error message
            echo '<h1>Unknown extension!</h1>';
            $errors=1;
            }
        else
        {
    //get the size of the image in bytes
     //$_FILES['image']['tmp_name'] is the temporary filename of the file
     //in which the uploaded file was stored on the server
     $size=filesize($_FILES['image']['tmp_name']);

    //compare the size with the maxim size we defined and print error if bigger
        if ($size > MAX_SIZE*1024)
            {
            echo '<h1>You have exceeded the size limit!</h1>';
            $errors=1;
            }

    //we will give an unique name, for example the time in unix time format
        $image_name= $ID.'.'.$extension;
    //the new name will be containing the full path where will be stored (images folder)
        $newname="NewsPic/".$image_name;
    //we verify if the image has been uploaded, and print error instead

        echo $image_name;
        $copied = copy($_FILES['image']['tmp_name'], $newname);
        if (!$copied)
            {
            echo '<h1>Copy unsuccessfull!</h1>';
            $errors=1;
            }

        }
    }

    } else {
        header("location:login.php");
    }
?> 
```

我想上传一张图片到我的文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:50:51.207

尝试使用`move_uploaded_file(param1,param2);`功能

```
move_uploaded_file($_FILES['image']['tmp_name'],$newname) 
```

*注意：您的变量 $newname 必须包含您应该保存它的文件夹的路径 + 文件名*

* * *

**为您`INSERT`查询**

尝试`'.'`在声明应插入的字段时删除两者

导致您的查询像这样

```
$sql= "INSERT INTO News(Title, Content, Type)VALUES ( '$title', '$content', '$type')"; 
```

因为`'.'`使您的sql失败。

# java - 使用 Joda Time 解析 Twitter 日期

> ID：15787781
> 
> 赞同：6
> 
> 时间：2013-04-03T12:47:42.143
> 
> 标签：java, twitter, jodatime, date-parsing

Twitter 给了我一个日期，例如“Wed, 27 Mar 2013 15:12:14 +0000”。我试图用以下方式解析它：

```
DateTimeFormat.forPattern("EEE, dd MMM yyyy HH:mm:ss ZZZZZ").withLocale(Locale.ENGLISH); 
```

但它失败了：

```
Invalid format: "Wed, 03 Apr 2013 10:35:35 +0000" is malformed at "+0000" 
```

我试过用 , 和 替换`ZZZZZ`，`z`但`Z`没有`ZZZ`改变。这些日期可以这样解析吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T12:53:42.323

尽管您已经说过您`Z`在格式模式中使用了一个，但这有效：

```
DateTimeFormatter format = 
    DateTimeFormat.forPattern("EEE, dd MMM yyyy HH:mm:ss Z").withLocale(Locale.ENGLISH);
DateTime dateTime = format.parseDateTime("Wed, 27 Mar 2013 15:12:14 +0000"); 
```

解析此格式时，单个`Z`时区字符就足够了，4 无效：

> Z时区偏移/id区-0800；-08:00；美国/洛杉矶

有关更多信息，请参阅[javadoc](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T16:40:30.410

虽然接受的答案是正确的，但我从 API 获得的 Twitter 日期却不同。此备用解析器适用于该格式：

```
DateTimeFormatter format = DateTimeFormat.forPattern("EE MMM dd HH:mm:ss Z yyyy").withLocale(Locale.ENGLISH)
String input = "Sat Jan 14 01:50:54 +0000 2017"
DateTime dateTime = format.parseDateTime(input) 
```

# c# - 否则简化

> ID：15787785
> 
> 赞同：2
> 
> 时间：2013-04-03T12:47:55.523
> 
> 标签：c#

```
if (File.Exists(file.csv))
{
   return file.csv;
}
else if (File.Exists(file.dbf))
{
   return file.dbf;
} 
```

我可以用一行来简化这个表达式吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T12:52:27.127

如果您愿意接受`InvalidOperationException`如果不存在匹配的文件：

```
return new[]{file.csv, file.dbf}.First(File.Exists); 
```

**编辑：**

如果您不想要异常（您从问题中删除了该部分），[`FirstOrDefault()`](http://msdn.microsoft.com/en-us/library/bb340482.aspx)请改用并检查`null`，正如威廉邓肯在他的评论中已经提到的那样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T12:50:54.967

不是以仍然可读的方式。但是，您可以将该代码提取到它自己的方法中。

此外，`else`不需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:03:56.767

我认为在一行中这样做没有任何优势，但作为替代方案，也许你可以这样做：

```
var files = new[] { "file.csv", "file.dbf" };
foreach (var file in files)
{
    if (File.Exists(file))     
    {      
        return file;
    }       
} 
```

这个扩展性更强，没有重复的字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T12:56:08.557

一行：是的。删除除最后一个以外的所有换行符。

一个简单的陈述：不。您的代码有条件地返回。我怀疑 C# 中有一个简单的命令可以做到这一点。

# java - Gmail 撰写部分无法自动使用带有 Java 的 WebDriver

> ID：15787789
> 
> 赞同：0
> 
> 时间：2013-04-03T12:48:06.777
> 
> 标签：java, gmail, webdriver, selenium-webdriver, sendkeys

我想自动化 Gmail 撰写部分。但我无法使用 WebDriver (java) 在 To 部分、Subject 部分和 Body 部分中写入电子邮件地址。任何人都可以帮助我为什么会发生这种情况？我使用了以下代码：

```
driver.findElement(By.id(":lt")).sendKeys("nazifa_cs@yahoo.com");
driver.findElement(By.id(":lf")).click();
driver.findElement(By.id(":lf")).clear();
driver.findElement(By.id(":lf")).sendKeys("test");
//driver.SwitchTo().Frame(frameIndex);

driver.findElement(By.id(":jy")).clear();
driver.findElement(By.id(":jy")).sendKeys("test"); 
```

这些代码不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:12:57.597

如果您想测试基本场景，将您的 Gmail 切换到基本 HTML 模式应该是有意义的。不过，我仍然同意 JimEvans 的观点，即您最好不要尝试使用 WebDriver 自动化 Gmail，因为视图中使用的元素属性具有大量随机性。

# java - 如何在java中亲自格式化属性文件？

> ID：15787792
> 
> 赞同：3
> 
> 时间：2013-04-03T12:48:15.207
> 
> 标签：java, properties

我正在使用 java 中的属性类来为我的应用程序保存一些配置。这是我第一次使用属性，所以请对我温柔:)

我可以从属性中插入和检索数据，没问题，但我想将数据插入如下：

属性文件：

```
#Header generated by java ~ this is fine, I don't care

#Server 1 configuration
url=192.168.1.1
port=6546
username=max
password=123

#Server 2 configuration
url=192.168.2.1
port=6454
username:dude
password:123

#And so on... 
```

这是我的代码：

```
public void setProp(String host, String port, String user, String pass, 
                           String host2, String port2, String user2, String pass2)
{
        try{
            prop.setProperty("host", host);
            prop.setProperty("port", porto);
            prop.setProperty("username", user);
            prop.setProperty("password", pass);

            prop.setProperty("host2", host2);
            prop.setProperty("port2", porto2);
            prop.setProperty("username2", user2);
            prop.setProperty("password2", pass2);

            config.store(new FileOutputStream("configuration.properties"), "Server 1 Configuration");

        }catch (Exception e) {
            JOptionPane.showMessageDialog(null,"Error: "+e.getMessage());
        }
} 
```

编辑：@Nathan 不接近我假装的样子。生成的属性文件是：

```
#Wed Apr 03 14:03:57 BST 2013 
server1.url=192.168.1.1 
server1.port=80 
server2.password=qqq 
server1.user=root 
server2.port=88 
server2.user=dude 
server1.pass=123 
server2.url=192.168.2.1 
```

我会寻找类似的东西：

```
#Wed Apr 03 14:03:57 BST 2013 
#Server 1 details
server1.url=192.168.1.1 
server1.port=80 
server1.user=root 
server1.pass=123 

#Server 2 details:
server2.password=qqq 
server2.port=88 
server2.user=dude 
server2.url=192.168.2.1 
```

我什至不在乎订单是否正确（例如 url 上方和端口下方的密码等）我只需要将它们分组，就像现在在我的示例中一样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T12:56:23.910

属性文件不是这样分层的。（还有其他格式，例如 YAML 或 XML，但不是这种格式。）相反，每一行都是一个键值对，其中键在文件中必须是唯一的。（Properties 类是从 Hashtable 扩展而来的快速破解。）更改属性文件中的键：

```
#Server 1 Configuration
server1.url=192.168.1.1
server1.port=6546
server1.username=max
server1.password=123

#Server 2 configuration
server2.url=192.168.2.1
server2.port=6454
server2.username:dude
server2.password:123 
```

然后将您的代码更改为：

```
 prop.setProperty("server1.url", host); 
```

因为 Properties 扩展了 Hashtable，并且 hashtable 为您提供了它们自己的键值对的内部排序，所以当您从 Properties 对象生成属性文件时，条目将全部混乱。由于您希望键按任意顺序排序也不容易。我将使用代码生成属性文件的初始版本，然后按照您想要的顺序移动内容，并继续使用该属性文件。如果您需要以编程方式生成属性文件，那么您将需要编写代码来写入文件，而不是 Properties 如何执行它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T12:55:13.520

我想我看到了你的问题......当你有：

```
#Server 1 configuration
url=192.168.1.1
port=6546

#Server 2 configuration
url=192.168.2.1
port=6454 
```

只有 url、port 等的最后一个值会在属性文件中读取，因为后面的每个值都会覆盖前面的值。我通常通过执行以下操作来解决此问题：

```
#Server 1 configuration
server.1.url=192.168.1.1
server.1.port=6546

#Server 2 configuration
server.2.url=192.168.2.1
server.2.port=6454

....

#Server n configuration
server.n.url=192.168.2.1
server.n.port=6454 
```

您还可以存储服务器总数，其属性如下：

```
number.of.servers=55 
```

但这是假设服务器编号是连续的。在更一般的情况下，让我们假设它们不是这样你可以有类似的东西：

```
#server 1
url=xxx
port=123

#server 100
url=xxx
port=123

#server 5
url=xxx
port=123 
```

正如@Nathan Hughes 简洁地指出的那样，属性是键值对，每个重复的键都会吹走前一个键。我没有使用过 YAML，但我更喜欢 JSON 而不是 XML。但是，您仍然可以坚持使用属性。

如前所述，您可以执行以下操作：

```
#server 1
server.1.url=xxx
server.1.port=123

#server 100
server.100.url=xxx
server.100.port=123

#server 5
server.5.url=xxx
server.5.port=123 
```

所以现在问题变成了，我的属性文件中有哪些服务器编号。只需遍历属性文件的键，然后做一些字符串功夫。

```
Properties p = myReadProperties();
Set<String> keys = p.keySet();
Set<Integer> serverNumbers = new Set<Integer>();
Iterator<String> i = keys.iterator();
String str, strArray;
while(i.hasNext()) {
  str = i.next();
  //A regex would be better here, but for brevity.
  if(str.startsWith("server.") && str.endsWith(".url")) {
    strArray = str.split(".");
    serverNumbers.add(new Integer(strArray[1]));
  } 
```

所以现在你有一组服务器号码。您可以重建您的属性键以获得任何值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:00:37.630

```
#Server 1 configuration
url=192.168.1.1
port=6546
username=max
password=123

#Server 2 configuration
url=192.168.2.1
port=6454
username:dude
password:123 
```

因此，如果我理解，您想创建一个这样的配置文件。你可以做的格式化它是一旦保存，打开文件并插入你想要的行，这将是一个非常痛苦的工作。如果您想要一个结构良好的配置文件，那么为什么不尝试使用 xml 和 jaxb 呢？

就像是：

```
<servers>
<server>
<id>1</id>
<url>192.168.1.1</url>
<port>6546</port>
<username>max</username>
<password>123</password>
</server>

<server>
<id>2</id>
<url>192.168.2.1</url>
<port>6454</port>
<username>dude</username>
<password>123</password>
</server>
</servers> 
```

您可以基于此创建架构：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="servers">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="server" maxOccurs="unbounded" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element type="xs:byte" name="id"/>
              <xs:element type="xs:string" name="url"/>
              <xs:element type="xs:short" name="port"/>
              <xs:element type="xs:string" name="username"/>
              <xs:element type="xs:byte" name="password"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

然后根据您的目的使用 JAXB。我希望它可以帮助你，或者至少可以给你一个想法。最好的祝福。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:00:52.700

如果您使用 FileOutputStream，您可以创建输出文件并以您要求的格式写入它。但是，如果您使用属性，那么您将无法重复相同的键。

# magento - Magento 购物车规则折扣 + 等级价格

> ID：15787794
> 
> 赞同：2
> 
> 时间：2013-04-03T12:48:28.160
> 
> 标签：magento

Magento 中是否可能出现以下情况？

分层定价和批量折扣将适用于同一订单。我想要总价超过 200 美元的 4% 折扣。但是，分层定价的产品价格将不被视为批量折扣规则。

例如我有 4 个产品

```
product 1 price = 10  and having tier price = $8 for 5+ products
product 2 price = 10
product 3 price = 100
product 4 price = 140 
```

所以如果我点了喜欢

```
product 1 qty-6  price = $48
priduct 2 qty-1  price = 10
priduct 3 qty-1  price = 100
priduct 4 qty-1  price = 140 
```

我们对产品 1 应用分级定价，该产品不符合批量定价的条件。但是，剩余金额仍然有资格进行批量定价。这意味着 4% 的折扣将适用于 $250 (10 + 100 + 140)。

我需要减去在购物车中应用了等级价格的产品总数，并且需要根据我的购物车规则检查剩余的产品总数以获得折扣。

谁能指导我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:06:07.497

```
public static function calculatePrice($basePrice, $specialPrice, $specialPriceFrom, $specialPriceTo,
            $rulePrice = false, $wId = null, $gId = null, $productId = null)
    {
        Varien_Profiler::start('__PRODUCT_CALCULATE_PRICE__');
        if ($wId instanceof Mage_Core_Model_Store) {
            $sId = $wId->getId();
            $wId = $wId->getWebsiteId();
        } else {
            $sId = Mage::app()->getWebsite($wId)->getDefaultGroup()->getDefaultStoreId();
        }

        $finalPrice = $basePrice;
        if ($gId instanceof Mage_Customer_Model_Group) {
            $gId = $gId->getId();
        }

        $finalPrice = self::calculateSpecialPrice($finalPrice, $specialPrice,          $specialPriceFrom, $specialPriceTo, $sId);

        if ($rulePrice === false) {
            $storeTimestamp = Mage::app()->getLocale()->storeTimeStamp($sId);
            $rulePrice = Mage::getResourceModel('catalogrule/rule')
                ->getRulePrice($storeTimestamp, $wId, $gId, $productId);
        }

        if ($rulePrice !== null && $rulePrice !== false) {
            $finalPrice = min($finalPrice, $rulePrice);
        }

        $finalPrice = max($finalPrice, 0);
        Varien_Profiler::stop('__PRODUCT_CALCULATE_PRICE__');
        return $finalPrice;
    } 
```

在 Mage_Catalog_Model_Product_Type_Price 中有

```
 if ($rulePrice === false) {
            $storeTimestamp = Mage::app()->getLocale()->storeTimeStamp($sId);
            $rulePrice = Mage::getResourceModel('catalogrule/rule')
                ->getRulePrice($storeTimestamp, $wId, $gId, $productId);
        } 
```

因此，在 $rulePrice == false 检查产品数量以及是否有任何批量定价适用，如果是，那么

```
if ($rulePrice === false) {
            $storeTimestamp = Mage::app()->getLocale()->storeTimeStamp($sId);
            $flag = $this->someCheckFunction()  // This function you will have to write
            if($flag == 1) {

            $rulePrice = Mage::getResourceModel('catalogrule/rule')
                ->getRulePrice($storeTimestamp, $wId, $gId, $productId);
           }
        } 
```

# c# - C# Maze Generation 我自己的 Prim 算法的实现 Bug

> ID：15787800
> 
> 赞同：3
> 
> 时间：2013-04-03T12:48:51.537
> 
> 标签：c#, windows, xna, prims-algorithm

首先让我为尺寸道歉，我会尽量保持这个尺寸

在尝试完全按照维基百科上所说的方式构建 prim 算法之后，我发现它不会像我构建的迷宫那样工作。所以我试图做同样的想法来适应我的迷宫，但我看到了一个奇怪的错误，

当我的游戏开始时，它只是没有正确构建我的迷宫，我无法弄清楚为什么这是偶尔发生的事情

![迷宫错误图片](https://i.stack.imgur.com/TsXjY.png)

其他时候它工作得很好，所以我有一个`public Dictionary<int, Dictionary<int, MazeCellState>> maze`这个迷宫，当它开始时，迷宫都是树篱，然后我继续像这样建造路径

```
private static void buildPath()
       {
           List<KeyValuePair<Misc.Cord, Misc.Cord>> ends = new List<KeyValuePair<Misc.Cord, Misc.Cord>>();
           ends.Add(new KeyValuePair<Misc.Cord, Misc.Cord>(new Misc.Cord() { X = 0, Y = 0 }, new Misc.Cord() { X = 0, Y = 0 }));
           Misc.Cord currentPos = null;

           while (ends.Count > 0)
           {
               int posKey = rand.Next(0, ends.Count);
               Misc.Cord lastPos = ends[posKey].Key;
               currentPos = ends[posKey].Value;
               maze[currentPos.X][currentPos.Y] = MazeCellState.Path;
               int currentCount = 0;

               MovingState moveTo1 = (MovingState)rand.Next(0, 4);
               MovingState moveTo2 = (MovingState)rand.Next(0, 4);
               while (moveTo1.Equals(moveTo2))
               {
                   moveTo1 = (MovingState)rand.Next(0, 4);
                   moveTo2 = (MovingState)rand.Next(0, 4);
               }

               // check left
               if (currentPos.X - 2 > 0 && maze[currentPos.X - 2][currentPos.Y] != MazeCellState.Path && currentCount < 2 && (moveTo1 == MovingState.Left || moveTo2 == MovingState.Left))
               {
                   if(!lastPos.Equals(new Misc.Cord() { X = currentPos.X - 2, Y = currentPos.Y }))
                   {
                       ends.Add(new KeyValuePair<Misc.Cord, Misc.Cord>(currentPos, new Misc.Cord() { X = currentPos.X - 2, Y = currentPos.Y }));
                       maze[currentPos.X - 1][currentPos.Y] = MazeCellState.Path;
                       currentCount++;
                   }
               }

               // check right
               if (currentPos.X + 2 < maze.Count && maze[currentPos.X + 2][currentPos.Y] != MazeCellState.Path && currentCount < 2 && (moveTo1 == MovingState.Right || moveTo2 == MovingState.Right))
               {
                   if (!lastPos.Equals(new Misc.Cord() { X = currentPos.X + 2, Y = currentPos.Y }))
                   {
                       ends.Add(new KeyValuePair<Misc.Cord, Misc.Cord>(currentPos, new Misc.Cord() { X = currentPos.X + 2, Y = currentPos.Y }));
                       maze[currentPos.X + 1][currentPos.Y] = MazeCellState.Path;
                       currentCount++;
                   }
               }

               // check Up
               if (currentPos.Y - 2 > 0 && maze[currentPos.X][currentPos.Y - 2] != MazeCellState.Path && currentCount < 2 && (moveTo1 == MovingState.Up || moveTo2 == MovingState.Up))
               {
                   if(!lastPos.Equals(new Misc.Cord() { X = currentPos.X, Y = currentPos.Y - 2}))
                   {
                       ends.Add(new KeyValuePair<Misc.Cord, Misc.Cord>(currentPos, new Misc.Cord() { X = currentPos.X, Y = currentPos.Y - 2 }));
                       maze[currentPos.X][currentPos.Y - 1] = MazeCellState.Path;
                       currentCount++;
                   }
               }

               // check Down
               if (currentPos.Y + 2 < maze[0].Count && maze[currentPos.X][currentPos.Y + 2] != MazeCellState.Path && currentCount < 2 && (moveTo1 == MovingState.Down || moveTo2 == MovingState.Down))
               {
                   if(!lastPos.Equals(new Misc.Cord() { X = currentPos.X, Y = currentPos.Y + 2}))
                   {
                       ends.Add(new KeyValuePair<Misc.Cord, Misc.Cord>(currentPos, new Misc.Cord() { X = currentPos.X, Y = currentPos.Y + 2 }));
                       maze[currentPos.X][currentPos.Y + 1] = MazeCellState.Path;
                       currentCount++;
                   }
               }
                ends.RemoveAt(posKey);
                ends = reorderList(ends);
           }

           maze[0][1] = MazeCellState.Path;
       } 
```

我不知道为什么有时我会得到上面的图片，我的理论是它最终会恢复它的自我

一些快速说明，此时 MazeCellState 只能是 2 个选项之一，路径或对冲和 reorderList 将重新索引任何类型的列表，迷宫大小是从屏幕分辨率计算出来的，每个单元格是 64x64 PX，

```
 GraphicsDevice.Viewport.Width * 5 / 64,
            GraphicsDevice.Viewport.Height * 5 / 64 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-22T07:29:02.653

当您的字段是网格时，这确实是一种很难实现算法的方法。Prim 的网格算法可以更容易地表达。与其研究你的代码做错了什么，我会告诉你一个简单的方法。

创建您的网格，并用从零开始的连续数字对所有单元格进行编号。每个单元都有两个可以破坏的边界墙；上下左右，或其他组合，只要选择（左/右）和（上/下）之一即可。

现在选择任何一个单元格，然后选择它的一堵墙。如果该墙另一侧的单元格具有不同的编号（一个高一个低一个），则打破该墙，然后在整个迷宫中，将所有出现的较大数字重新编号为较低的数字。如果您选择一个单元格和另一侧已经有相同编号的墙，不要尝试另一面墙，而是按顺序移动到下一个单元格，在每一行和向下重复（可能几乎一直循环) 直到你找到一个有墙的牢房，你可以打破它。

如果你有 N 个单元格，你必须准确地重复这个破墙练习 N-1 次，直到最后一次所有单元格都被编号为零（因为每次你打破，你从字段中删除更高的数字），你有一个完整的迷宫。

如果你想要一个迷宫，它的路径通常是左右而不是上下，然后偏向于你随机选择在那个方向打破哪堵墙。这也适用于 3D 迷宫，您可能不需要很多梯子；只是不要选择打破这么多的天花板/地板。

在我描述了这个算法之后，我 14 岁的儿子在 3D 中用 Turbo-Pascal 实现了它，所以我知道这个算法和这个描述确实有效。这实际上是 Prim 算法的一个版本，除了所有弧都具有相同的成本（或所有左右弧都如此，所有上下弧都如此，等等）。它的巧妙之处在于编号的工作方式，以确定哪些单元格已经可以从其他单元格到达。

# asp.net-mvc - MVC 4 return View(model) 语句以文本形式返回页面标记

> ID：15787803
> 
> 赞同：0
> 
> 时间：2013-04-03T12:49:00.193
> 
> 标签：asp.net-mvc, validation, asp.net-mvc-4, view

```
List<DepozytPositionModel> pozycje = Session["pozycje"] as List<DepozytPositionModel>;

                if (pozycje == null || !pozycje.Any())
                {
                    ModelState.AddModelError("", "blah blah");
                }

                if (!ModelState.IsValid)
                {
                    TempData["guid"] = model.guid;
                    return View(model);
                } 
```

正如标题所说。当验证失败时，页面应该重新加载相同的数据和验证信息，对吗？返回页面，但内容如下所示：

```
<html>
  <head></head>
  <body>
    <pre style="word-wrap: break-word; white-space: pre-wrap;">
      Returned view markup/code in form of raw text.
    </pre>
  </body>
</html> 
```

开始的代码没有改变，因为我们使用了 MVC3，然后它工作得非常好。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:18:28.753

是由错误的内容类型（application/json 而不是 text/html）引起的。

# eclipse - 在 Cocos2dx 中工作，Eclipse 中的 Intellisense 没有出现

> ID：15787808
> 
> 赞同：0
> 
> 时间：2013-04-03T12:49:23.470
> 
> 标签：eclipse, cocos2d-x

谁能告诉为什么在制作 cpp 文件时智能感知没有出现在 Eclipse 中。

# python - 通过python执行带空格的sudo命令

> ID：15787817
> 
> 赞同：1
> 
> 时间：2013-04-03T12:49:46.027
> 
> 标签：python, python-2.7

嗨，伙计们，我有一个问题。

我正在执行一个需要运行 sudo 命令才能继续的 python 脚本。这是命令：

```
sudo /etc/init.d/test restart 
```

问题是，无论我如何执行它，它只会运行 sudo 和 /etc/init.d/test 并返回：

```
sudo: /etc/init.d/test: command not found 
```

问题似乎是重新启动没有与命令一起发送。

这些是我尝试运行命令的方式：

尝试 1 使用操作系统

```
os.system('sudo /etc/init.d/test restart') 
```

尝试 2 使用子进程

```
x = subprocess.Popen(['sudo','/etc/init.d/test','restart'])
x.communicate() 
```

尝试 3 再次使用子进程

```
x = subprocess.Popen(['sudo','/etc/init.d/test restart'])
x.communicate() 
```

这实际上返回：

```
sudo: /etc/init.d/test restart: command not found 
```

这没有任何意义，因为如果我直接在系统上执行命令，它就可以工作。
关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:15:54.943

```
#!/usr/bin/env python
import subprocess,getpass
password = getpass.getpass()
#proc = subprocess.Popen(
#  ['sudo','-p','','-S','/etc/init.d/test','restart'],
#   stdin=subprocess.PIPE)
proc = subprocess.Popen(
    ['sudo','-p','','-S','echo','restart'],
    stdin=subprocess.PIPE)
proc.stdin.write(password+'\n')
proc.stdin.close()
proc.wait() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:38:07.347

如果你得到这个：

```
sudo: /etc/init.d/test: command not found 
```

它表示 /etc/init.d/test 不存在。从命令行自己尝试一下：

```
> sudo blarg whatever whatever
sudo: blarg: command not found 
```

因此，只需确保您尝试执行的命令确实存在：

```
ls -l /etc/init.d/test 
```

如果你仍然有问题，然后尝试通过首先让它执行'sudo whoami'来简化事情——一旦你开始工作，把它改成你的“真实”命令。

# ruby - 在 RVM 中安装 Ruby 1.9.3 时出错 - 出错

> ID：15787818
> 
> 赞同：2
> 
> 时间：2013-04-03T12:49:46.177
> 
> 标签：ruby, macos, makefile, rvm

我在 OSX 中使用 RVM 编译 Ruby 1.9.3 时出错。我已经搜索了很多解决方案，但不是常见的错误。我认为这是一个权限错误，但我不知道如何解决。

查看我的 make.log 文件：

```
[2013-04-03 09:37:41] make
    CC = clang
    LD = ld
    LDSHARED = clang -dynamiclib
    CFLAGS = -O2 -arch x86_64 -fno-common -pipe 
    XCFLAGS = -include ruby/config.h -include ruby/missing.h -fvisibility=hidden -DRUBY_EXPORT
    CPPFLAGS = -I/opt/local/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -I/opt/local/include -I. -I.ext/include/x86_64-darwin12.3.0 -I./include -I.
    DLDFLAGS = -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace -install_name /Users/brunno/.rvm/rubies/ruby-1.9.3-p392/lib/libruby.1.9.1.dylib -current_version 1.9.1 -compatibility_version 1.9.1  -Wl,-u,_objc_msgSend   
    SOLIBS = 
compiling main.c
compiling dmydln.c
compiling dmyencoding.c
compiling version.c
compiling miniprelude.c
compiling array.c
compiling bignum.c
compiling class.c
bignum.c:2732:26: warning: while loop has empty body [-Wempty-body]
        while (--ny && !zds[ny]); ++ny;
                                ^
bignum.c:2732:26: note: put the semicolon on a separate line to silence this warning
compiling compar.c
compiling complex.c
compiling dir.c
compiling dln_find.c
compiling enum.c
compiling enumerator.c
compiling error.c
compiling eval.c
compiling load.c
compiling proc.c
1 warning generated.
compiling file.c
compiling gc.c
compiling hash.c
compiling inits.c
compiling io.c
compiling marshal.c
compiling math.c
compiling node.c
compiling numeric.c
compiling object.c
compiling pack.c
compiling parse.c
compiling process.c
compiling random.c
compiling range.c
compiling rational.c
compiling re.c
compiling regcomp.c
compiling regenc.c
compiling regerror.c
compiling regexec.c
compiling regparse.c
compiling regsyntax.c
compiling ruby.c
compiling safe.c
compiling signal.c
compiling sprintf.c
compiling st.c
compiling strftime.c
compiling string.c
compiling struct.c
compiling time.c
compiling transcode.c
compiling util.c
compiling variable.c
compiling compile.c
compiling debug.c
compiling iseq.c
compiling vm.c
compiling vm_dump.c
compiling thread.c
thread.c:2550:34: warning: variable 'orig_read' is uninitialized when used within its own initialization [-Wuninitialized]
    rb_fdset_t UNINITIALIZED_VAR(orig_read);
                                 ^~~~~~~~~
./vm_core.h:115:34: note: expanded from macro 'UNINITIALIZED_VAR'
#define UNINITIALIZED_VAR(x) x = x
                                 ^
thread.c:2551:34: warning: variable 'orig_write' is uninitialized when used within its own initialization [-Wuninitialized]
    rb_fdset_t UNINITIALIZED_VAR(orig_write);
                                 ^~~~~~~~~~
./vm_core.h:115:34: note: expanded from macro 'UNINITIALIZED_VAR'
#define UNINITIALIZED_VAR(x) x = x
                                 ^
thread.c:2552:34: warning: variable 'orig_except' is uninitialized when used within its own initialization [-Wuninitialized]
    rb_fdset_t UNINITIALIZED_VAR(orig_except);
                                 ^~~~~~~~~~~
./vm_core.h:115:34: note: expanded from macro 'UNINITIALIZED_VAR'
#define UNINITIALIZED_VAR(x) x = x
                                 ^
compiling cont.c
compiling ./enc/ascii.c
compiling ./enc/us_ascii.c
compiling ./enc/unicode.c
3 warnings generated.
compiling ./enc/utf_8.c
compiling newline.c
compiling ./missing/setproctitle.c
compiling dln.c
compiling encoding.c
compiling dmyversion.c
linking miniruby
generating encdb.h
rbconfig.rb updated
generating enc.mk
generating prelude.c
compiling prelude.c
encdb.h unchanged
making srcs under enc
linking static-library libruby.1.9.1-static.a
make[1]: Nothing to be done for `srcs'.
generating transdb.h
transdb.h unchanged
linking shared-library libruby.1.9.1.dylib
making enc
making trans
compiling ./enc/trans/transdb.c
compiling ./enc/big5.c
compiling ./enc/encdb.c
compiling ./enc/cp949.c
compiling ./enc/trans/big5.c
configuring -test-/array/resize
configuring -test-/bug-3571
compiling ./enc/emacs_mule.c
configuring -test-/bug-3662
configuring -test-/funcall
configuring -test-/load/dot.dot
configuring -test-/old_thread_select
configuring -test-/st/numhash
configuring -test-/string
configuring -test-/wait_for_single_fd
configuring -test-/win32/dln
Failed to configure -test-/win32/dln. It will not be installed.
configuring -test-/win32/fd_setsize
Failed to configure -test-/win32/fd_setsize. It will not be installed.
compiling ./enc/trans/chinese.c
configuring bigdecimal
compiling ./enc/euc_jp.c
compiling ./enc/euc_kr.c
compiling ./enc/euc_tw.c
configuring continuation
configuring coverage
configuring curses
compiling ./enc/gb2312.c
compiling ./enc/gb18030.c
compiling ./enc/gbk.c
compiling ./enc/iso_8859_1.c
compiling ./enc/iso_8859_2.c
compiling ./enc/iso_8859_3.c
compiling ./enc/iso_8859_4.c
compiling ./enc/iso_8859_5.c
compiling ./enc/iso_8859_6.c
compiling ./enc/iso_8859_7.c
compiling ./enc/iso_8859_8.c
compiling ./enc/iso_8859_9.c
compiling ./enc/iso_8859_10.c
compiling ./enc/iso_8859_11.c
compiling ./enc/iso_8859_13.c
compiling ./enc/iso_8859_14.c
compiling ./enc/iso_8859_15.c
compiling ./enc/iso_8859_16.c
compiling ./enc/koi8_r.c
compiling ./enc/koi8_u.c
compiling ./enc/shift_jis.c
compiling ./enc/utf_16be.c
compiling ./enc/trans/emoji.c
compiling ./enc/utf_16le.c
compiling ./enc/utf_32be.c
compiling ./enc/utf_32le.c
compiling ./enc/windows_1251.c
linking encoding encdb.bundle
linking encoding big5.bundle
compiling ./enc/trans/emoji_iso2022_kddi.c
linking encoding cp949.bundle
linking encoding emacs_mule.bundle
linking encoding euc_jp.bundle
linking encoding euc_kr.bundle
linking encoding euc_tw.bundle
linking encoding gb2312.bundle
linking encoding gb18030.bundle
linking encoding gbk.bundle
linking encoding iso_8859_1.bundle
linking encoding iso_8859_2.bundle
linking encoding iso_8859_3.bundle
linking encoding iso_8859_4.bundle
linking encoding iso_8859_5.bundle
linking encoding iso_8859_6.bundle
linking encoding iso_8859_7.bundle
linking encoding iso_8859_8.bundle
linking encoding iso_8859_9.bundle
linking encoding iso_8859_10.bundle
linking encoding iso_8859_11.bundle
linking encoding iso_8859_13.bundle
linking encoding iso_8859_14.bundle
linking encoding iso_8859_15.bundle
linking encoding iso_8859_16.bundle
linking encoding koi8_r.bundle
linking encoding koi8_u.bundle
linking encoding shift_jis.bundle
linking encoding utf_16be.bundle
linking encoding utf_16le.bundle
linking encoding utf_32be.bundle
linking encoding utf_32le.bundle
linking encoding windows_1251.bundle
compiling ./enc/trans/emoji_sjis_docomo.c
compiling ./enc/trans/emoji_sjis_kddi.c
compiling ./enc/trans/emoji_sjis_softbank.c
compiling ./enc/trans/escape.c
compiling ./enc/trans/gb18030.c
compiling ./enc/trans/gbk.c
compiling ./enc/trans/iso2022.c
compiling ./enc/trans/japanese.c
compiling ./enc/trans/japanese_euc.c
compiling ./enc/trans/japanese_sjis.c
configuring date
configuring dbm
configuring digest
configuring digest/bubblebabble
configuring digest/md5
configuring digest/rmd160
compiling ./enc/trans/korean.c
configuring digest/sha1
configuring digest/sha2
compiling ./enc/trans/single_byte.c
configuring dl
compiling ./enc/trans/utf8_mac.c
compiling ./enc/trans/utf_16_32.c
linking transcoder transdb.bundle
linking transcoder big5.bundle
linking transcoder chinese.bundle
linking transcoder emoji.bundle
linking transcoder emoji_iso2022_kddi.bundle
linking transcoder emoji_sjis_docomo.bundle
linking transcoder emoji_sjis_kddi.bundle
linking transcoder emoji_sjis_softbank.bundle
linking transcoder escape.bundle
configuring dl/callback
configuring dl/win32
Failed to configure dl/win32\. It will not be installed.
configuring etc
linking transcoder gb18030.bundle
linking transcoder gbk.bundle
linking transcoder iso2022.bundle
linking transcoder japanese.bundle
linking transcoder japanese_euc.bundle
linking transcoder japanese_sjis.bundle
linking transcoder single_byte.bundle
linking transcoder utf8_mac.bundle
linking transcoder utf_16_32.bundle
linking transcoder korean.bundle
making encs
configuring fcntl
configuring fiber
configuring fiddle
configuring gdbm
configuring iconv
configuring io/console
configuring io/nonblock
configuring io/wait
configuring json
configuring json/generator
configuring json/parser
configuring mathn/complex
configuring mathn/rational
configuring nkf
configuring objspace
configuring openssl
configuring pathname
configuring psych
configuring pty
configuring racc/cparse
configuring readline
configuring ripper
configuring sdbm
configuring socket
configuring stringio
configuring strscan
configuring syck
configuring syslog
configuring tk/tkutil
Failed to configure tk/tkutil. It will not be installed.
configuring win32ole
Failed to configure win32ole. It will not be installed.
configuring zlib
compiling resize.c
compiling bug.c
compiling bug.c
compiling passing_block.c
installing default bug libraries
installing default funcall libraries
linking shared-object -test-/bug-3571/bug.bundle
installing default bug libraries
linking shared-object -test-/funcall/funcall.bundle
linking shared-object -test-/bug-3662/bug.bundle
installing default resize libraries
linking shared-object -test-/array/resize.bundle
ld: can't open output file for writing: ../../../.ext/x86_64-darwin12.3.0/-test-/bug-3571/bug.bundle, errno=2 for architecture x86_64
ld: can't open output file for writing: ../../../.ext/x86_64-darwin12.3.0/-test-/bug-3662/bug.bundle, errno=2 for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
ld: can't open output file for writing: ../../../.ext/x86_64-darwin12.3.0/-test-/funcall/funcall.bundle, errno=2 for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [../../../.ext/x86_64-darwin12.3.0/-test-/bug-3662/bug.bundle] Error 1
make[1]: *** [ext/-test-/bug-3662/all] Error 2
make[2]: *** [../../../.ext/x86_64-darwin12.3.0/-test-/funcall/funcall.bundle] Error 1
make[1]: *** Waiting for unfinished jobs....
make[1]: *** [ext/-test-/funcall/all] Error 2
make[2]: *** [../../../.ext/x86_64-darwin12.3.0/-test-/bug-3571/bug.bundle] Error 1
make[1]: *** [ext/-test-/bug-3571/all] Error 2
ld: can't open output file for writing: ../../../../.ext/x86_64-darwin12.3.0/-test-/array/resize.bundle, errno=2 for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [../../../../.ext/x86_64-darwin12.3.0/-test-/array/resize.bundle] Error 1
make[1]: *** [ext/-test-/array/resize/all] Error 2
make: *** [build-ext] Error 2 
```

谢谢你们的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T18:14:25.380

我知道这个问题已经得到解答，但我想我会贡献~~解决~~这个问题所需的命令：

```
cd ~/.rvm/src/ruby-1.9.3-p392
mkdir -p .ext/x86_64-darwin12.3.0/-test-/array
mkdir -p .ext/x86_64-darwin12.3.0/-test-/bug-3571
mkdir -p .ext/x86_64-darwin12.3.0/-test-/bug-3662
mkdir -p .ext/x86_64-darwin12.3.0/-test-/funcall/
mkdir -p .ext/x86_64-darwin12.3.0/-test-/load/dot.dot/
mkdir -p .ext/x86_64-darwin12.3.0/-test-/old_thread_select
mkdir -p .ext/x86_64-darwin12.3.0/-test-/st
mkdir -p .ext/x86_64-darwin12.3.0/-test-/string
mkdir -p .ext/x86_64-darwin12.3.0/-test-/wait_for_single_fd
mkdir -p .ext/x86_64-darwin12.3.0/digest
mkdir -p .ext/x86_64-darwin12.3.0/dl
mkdir -p .ext/x86_64-darwin12.3.0/io
mkdir -p .ext/x86_64-darwin12.3.0/json/ext
mkdir -p .ext/x86_64-darwin12.3.0/mathn 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T12:57:31.350

日志明确指出：

```
ld: can't open output file for writing: ../../../.ext/x86_64-darwin12.3.0/ 
```

给她能力:-) 只需创建一个文件夹即可`chown`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T11:08:36.017

我有同样的问题，但使用 ruby​​ 2.0.0

这有帮助（感谢@dr4g0n）：

```
cd ~/.rvm/src/ruby-2.0.0-p195/.ext/x86_64-darwin12.4.0
mkdir -p ./-test-/array
mkdir -p ./-test-/bug-3571
mkdir -p ./-test-/bug-3662
mkdir -p ./-test-/funcall/
mkdir -p ./-test-/load/dot.dot/
mkdir -p ./-test-/old_thread_select
mkdir -p ./-test-/st
mkdir -p ./-test-/string
mkdir -p ./-test-/wait_for_single_fd
mkdir -p ./digest
mkdir -p ./dl
mkdir -p ./io
mkdir -p ./json/ext
mkdir -p ./mathn
mkdir -p ./racc
mkdir -p ./-test-/bug-5832/
mkdir -p ./-test-/fatal/
mkdir -p ./-test-/marshal/
mkdir -p ./-test-/iter/
mkdir -p ./-test-/num2int/
mkdir -p ./-test-/path_to_class/
mkdir -p ./-test-/symbol/
mkdir -p ./-test-/typeddata/ 
```

# c - 如何以编程方式从证书中提取信息？

> ID：15787824
> 
> 赞同：2
> 
> 时间：2013-04-03T12:49:55.273
> 
> 标签：c, openssl, certificate, x509, pkix

我有一个生成的证书，但我希望能够从证书中提取信息，例如国家、有效性、公钥等。我必须将从证书中检索到的信息与我存储在 C 程序中的其他信息进行比较。

我知道如果我使用这样的功能，它会打印我的证书信息：

```
void print_certificate(const char* cert)
{
    X509 *x509 = NULL;
    BIO *i = BIO_new(BIO_s_file());
    BIO *o = BIO_new_fp(stdout,BIO_NOCLOSE);

    if((BIO_read_filename(i, cert) <= 0) ||
       ((x509 = PEM_read_bio_X509_AUX(i, NULL, NULL, NULL)) == NULL)) {
           printf("Bad certificate, unable to read\n");
    }

    X509_print_ex(o, x509, XN_FLAG_COMPAT, X509_FLAG_COMPAT);   

    if(x509)
        X509_free(x509);
} 
```

但我想要的只是这些信息的一部分。怎么做到呢？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:23:32.770

尝试`grep _get_ /usr/include/openssl/x509.h`

这里有一些你可能会觉得有用的东西：

```
EVP_PKEY *  X509_get_pubkey(X509 *x);
#define     X509_CRL_get_issuer(x) ((x)->crl->issuer)
#define     X509_get_notBefore(x) ((x)->cert_info->validity->notBefore)
#define     X509_get_notAfter(x) ((x)->cert_info->validity->notAfter) 
```

还要检查[t_x509.c](http://www.opensource.apple.com/source/OpenSSL098/OpenSSL098-32/src/crypto/asn1/t_x509.c)的源代码，其中包含`X509_print_ex`. 这可能是最有用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:51:35.877

请参阅 OpenSSL 的 x509.h（[此处](http://www.opensource.apple.com/source/OpenSSL098/OpenSSL098-32/src/crypto/x509/x509.h)为示例）。你会发现很多有用的功能。例子：

```
#define     X509_get_version(x) ASN1_INTEGER_get((x)->cert_info->version)
/* #define  X509_get_serialNumber(x) ((x)->cert_info->serialNumber) */
#define     X509_get_notBefore(x) ((x)->cert_info->validity->notBefore)
#define     X509_get_notAfter(x) ((x)->cert_info->validity->notAfter)
#define     X509_extract_key(x) X509_get_pubkey(x) /*****/
#define     X509_REQ_get_version(x) ASN1_INTEGER_get((x)->req_info->version)
#define     X509_REQ_get_subject_name(x) ((x)->req_info->subject)
#define     X509_REQ_extract_key(a) X509_REQ_get_pubkey(a)
#define     X509_name_cmp(a,b)  X509_NAME_cmp((a),(b))
#define     X509_get_signature_type(x) EVP_PKEY_type(OBJ_obj2nid((x)->sig_alg->algorithm))

#define     X509_CRL_get_version(x) ASN1_INTEGER_get((x)->crl->version)
#define     X509_CRL_get_lastUpdate(x) ((x)->crl->lastUpdate)
#define     X509_CRL_get_nextUpdate(x) ((x)->crl->nextUpdate)
#define     X509_CRL_get_issuer(x) ((x)->crl->issuer)
#define     X509_CRL_get_REVOKED(x) ((x)->crl->revoked)

/* This one is only used so that a binary form can output, as in
 * i2d_X509_NAME(X509_get_X509_PUBKEY(x),&buf) */
#define     X509_get_X509_PUBKEY(x) ((x)->cert_info->key) 
```

# c# - 看看有没有什么是类型类

> ID：15787829
> 
> 赞同：0
> 
> 时间：2013-04-03T12:50:13.613
> 
> 标签：c#, class, types

我正在尝试检查某些东西是否是 c# 中的某种类型的类。它根据表单的类型在表单上打印出某些标签。这就是我到目前为止所拥有的，它适用于“if”语句。但是，我收到“无法转换类型的对象”的错误。在这种情况下是否可以使用 if-else 语句？

```
public void ShowStaffData(string pName)
{
  //Gets Staff Details from the name slected int he list box in the form
  people.CreatePeople();
  var currentPerson = 
    people.person.Where(p => p.Forename + " " + p.Surname == pName);

  // How the info is printed out if person selected in 
  // a member of Accademic Staff
  AccademicStaff accademic = currentPerson as AccademicStaff;

  if (currentPerson!=null)
  {
    foreach (AccademicStaff accStaff in currentPerson)
    {
      label9.Text = accStaff.Forename + " " + accStaff.Surname;
      label10.Text = accStaff.IdentificationNumber.ToString();
      label11.Text = accStaff.DateOfBirth;
      label12.Text = accStaff.Address;
      label13.Text = accStaff.Office;
      label14.Text = accStaff.School;
      label15.Text = accStaff.ModuleLeaderOf;
      label16.Text = accStaff.ProgramLeaderOf;
    }
  }      
  else
  {
    // How the info is printed out if person selected in 
    // a member of Admin Staff

    foreach (AdminStaff admin in currentPerson)
    {
      label9.Text = admin.Forename + " " + admin.Surname;
      label10.Text = admin.IdentificationNumber.ToString();
      label11.Text = admin.DateOfBirth;
      label12.Text = admin.Address;
      label13.Text = admin.Office;
      label6.Text = "Job Role";
      label14.Text = admin.JobRole;
      label7.Dispose();
      label8.Dispose();
      label15.Dispose();
      label16.Dispose();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T12:54:50.710

首先，`currentPersion`是物品的集合。使用该`Single`方法使其成为单个项目：

```
var currentPerson =
  people.person.Where(p => p.Forename + " " + p.Surname == pName).Single(); 
```

（如果您可能根本没有得到匹配，您将使用`SingleOrDefault`然后检查是否`currentPersion`为空。）

其次，在尝试强制转换后，您正在检查`currentPerson`变量而不是`accademic`变量：

```
AccademicStaff accademic = currentPerson as AccademicStaff;
if (accademic != null) 
```

现在你也不需要循环了。使用`accademic`第一部分中的变量，并在第二部分中将引用转换`AdminStaff`为：

```
AdminStaff admin = currentPerson as AdminStaff; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T12:53:13.513

将`if ... else ...`位移动到`foreach`循环中，因为您的 where 选择器返回一个集合，而不是一个人。

```
var currentPerson = people.person.Where(p => p.Forename + " " + p.Surname == pName);

foreach (var person in currentPerson)
{

    AccademicStaff accStaff = person as AccademicStaff;
    if (accStaff != null)
    {
        label9.Text = accStaff.Forename + " " + accStaff.Surname;
        label10.Text = accStaff.IdentificationNumber.ToString();
        label11.Text = accStaff.DateOfBirth;
        label12.Text = accStaff.Address;
        label13.Text = accStaff.Office;
        label14.Text = accStaff.School;
        label15.Text = accStaff.ModuleLeaderOf;
        label16.Text = accStaff.ProgramLeaderOf;
    }
    else
    {
        // How the info is printed out if person selected in a member of Admin Staff
        label9.Text = person.Forename + " " + person.Surname;
        label10.Text = person.IdentificationNumber.ToString();
        label11.Text = person.DateOfBirth;
        label12.Text = person.Address;
        label13.Text = person.Office;
        label6.Text = "Job Role";
        label14.Text = person.JobRole;
    }       
} 
```

我删除了标签上的调用`Dispose()`，它们没有任何意义。

**编辑**您可能会像这样缩短它：

```
var currentPerson = people.person.Where(p => p.Forename + " " + p.Surname == pName);

foreach (var person in currentPerson)
{

    label9.Text = person.Forename + " " + person.Surname;
    label10.Text = person.IdentificationNumber.ToString();
    label11.Text = person.DateOfBirth;
    label12.Text = person.Address;
    label13.Text = person.Office;

    AccademicStaff accStaff = person as AccademicStaff;
    if (accStaff != null)
    {
        label14.Text = accStaff.School;
        label15.Text = accStaff.ModuleLeaderOf;
        label16.Text = accStaff.ProgramLeaderOf;
    }
    else
    {
        label6.Text = "Job Role";
        label14.Text = person.JobRole;
    }       
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:53:12.200

```
if (instance.GetType().IsClass)
{

} 
```

应该做的伎俩。

但是你真的不应该这样做，如果你需要不同的类来打印不同的东西，那么我建议你沿着创建接口的路线并在每种类型上分别实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:59:13.643

看起来`currentPerson`是单个实体而不是集合。so `Single`or`FirstOrDefault`也可以；（取决于 currentPerson 是否唯一）然后测试我喜欢使用的类型，`is`因为它处理空检查。因此，如果您没有填充任何标签，则意味着从 linq 语句返回的人不是这两种类型。

```
 people.CreatePeople();
    var currentPerson = people.person.Where(p => p.Forename + " " + p.Surname == pName).Single();

        if(currentPerson is AcademicStaff)
        {
            label9.Text = accStaff.Forename + " " + accStaff.Surname;
            label10.Text = accStaff.IdentificationNumber.ToString();
            label11.Text = accStaff.DateOfBirth;
            label12.Text = accStaff.Address;
            label13.Text = accStaff.Office;
            label14.Text = accStaff.School;
            label15.Text = accStaff.ModuleLeaderOf;
            label16.Text = accStaff.ProgramLeaderOf;
        }
        else if(currentPerson is AdminStaff)
        {
            label9.Text = admin.Forename + " " + admin.Surname;
            label10.Text = admin.IdentificationNumber.ToString();
            label11.Text = admin.DateOfBirth;
            label12.Text = admin.Address;
            label13.Text = admin.Office;
            label6.Text = "Job Role";
            label14.Text = admin.JobRole;
            label7.Dispose();
            label8.Dispose();
            label15.Dispose();
            label16.Dispose();
        } 
```

# mysql - mysql 计数 2 字段

> ID：15787830
> 
> 赞同：0
> 
> 时间：2013-04-03T12:50:16.780
> 
> 标签：mysql, count, sum

我有 1 个表，我想计算/求和 2 个日期大于另一个的列

例如

```
id | comment | articleid | dateadd    | dateupdate |
1     bla      1           2011-01-01   2011-01-01
2     hello    1           2011-01-01   2011-01-01
3     whooaa   1           2011-01-01   2011-01-02 
```

查询假设返回“3 条评论和 1 条更新”。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T00:57:25.777

您应该使用 对记录进行分组`articleID`并过滤聚合结果`HAVING`。

```
SELECT  articleID,
        COUNT(*) totalCooments,
        SUM(dateUpdate > dateadd) totalUpdated
FROM    TableName
GROUP   BY articleID
HAVING  SUM(dateUpdate > dateadd) > 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/681f0/1)
*   [SQLFiddle Demo（*没有更新时*）](http://www.sqlfiddle.com/#!2/9f378b/1)

# java - 如何从javascript中获取所有未声明的变量

> ID：15787831
> 
> 赞同：-5
> 
> 时间：2013-04-03T12:50:17.520
> 
> 标签：java, javascript

如何从 java 脚本中获取所有未声明的变量。我需要所有未声明变量的列表。我想要java代码中未定义的javascript变量列表。现在我正在使用 Rhino 引擎来评估 javascript。任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T12:51:53.430

如果您通过[JSLint](http://www.jslint.com/)运行代码，您将收到未声明变量的警告以及其他警告。例如运行以下命令：

```
"use strict";

function b() {
    a = 20;
} 
```

将其作为警告之一

> 'a' 在定义之前使用。第 4 行字符 5
> 
>      a = 20;

我`"use strict";`在上面包含了警告，如果您将其包含在代码中，通常使用未定义的变量会引发异常，您可以在浏览器的开发人员工具中查看这些异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:56:06.857

如果您的意思是未声明的变量值是`undefined`，则以下代码仅适用于全局窗口范围

```
var a ;
var undefinedVariables = [];

for ( var i in window ){
    if ( window[i] === undefined ){
        undefinedVariables.push( i )
    }
}

console.log( undefinedVariables ); 
```

哪个打印`["a"]`

# php - Yii 表单未提交

> ID：15787832
> 
> 赞同：0
> 
> 时间：2013-04-03T12:50:21.007
> 
> 标签：php, yii

以下表格不提交。我错过了什么吗？

```
 <?php
            $form = $this->beginWidget('CActiveForm', array(
                'id' => 'site-search-form',
                'action' => Yii::app()->createAbsoluteUrl('/moduleA/actionB'), //array('/moduleA/actionB'),
                'enableClientValidation' => true,
                'enableAjaxValidation' => true,
                'clientOptions' => array(
                    'validateOnSubmit' => true,
                ),
            ));
            echo $form->hiddenField($model, 'is_a', array('id' => 'is_candidate'));
            ?>
            <div class="blueline"></div>
            <div class="row">
                <?php echo $form->label($model, 'position_type'); ?>
                <?php echo $form->error($model, 'position_type'); ?>
                <?php
                $arr = CHtml::listData(PositionType::model()->findAll(array('condition' => 'status=1', 'order' => 't.order')), 'id', 'name');
                foreach ($arr as $k => $v) {
                    $arr[$k] = $v . ' Positions';
                }
                echo $form->dropDownList($model, 'position_type', $arr);
                ?>
                <div class="clear-float"></div>
            </div>
            <div class="row">
                <?php echo $form->label($model, 'location'); ?>
                <?php echo $form->error($model, 'location'); ?>
                <?php echo $form->dropDownList($model, 'location', CHtml::listData(CitySector::model()->findAll(), 'id', 'name')); ?>
                <div class="clear-float"></div>
            </div>
            <div class="row buttons">
                <?php echo CHtml::submitButton(''); ?>
                <div class="clear-float"></div>
            </div>
            <?php
            $this->endWidget();
            ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:10:23.877

您很可能对未呈现的属性有验证错误。在这种情况下，您可以临时添加一个`<?php echo CHtml::errorSummary($model) ?>`位置来显示所有模型错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:14:32.800

**`clientOptions`**从 Yii 表单小部件中删除参数并尝试：

```
'clientOptions' => array(
    'validateOnSubmit' => true,
), 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-11T12:52:10.377

对于那些面临同样问题，但所选答案不起作用的人。确保您没有尝试实现 AJAX 搜索。AJAX 搜索将安装一个代码来阻止表单提交，并尝试异步获取数据。如果该代码失败或在没有给出 javascript 错误的情况下无法正常工作，那么您将陷入困境。要检查 AJAX 代码是否正在实施，请尝试在您的视图中找到此代码：

```
Yii::app()->clientScript->registerScript('search', "
   ...
   $('.search-form form').submit(function(){
   ...
   return false; //<-- here's the trouble 
```

将行从 return false 更改为 true 应使其以非 AJAX 方式工作。

# variables - 修改makefile中的变量

> ID：15787835
> 
> 赞同：0
> 
> 时间：2013-04-03T12:50:30.723
> 
> 标签：variables, makefile, gnu

我希望 make 过程仅在执行的第一个目标上有条件地回显在以下 makefile 中，它应该只打印 'a'、'b' 或 'goal'
目前，由于 L 没有被修改，它打印为执行的任何目标。

我已经使用外部临时文件和脚本完成了它，但我想知道如果没有外部文件/脚本是否有可能？

```
L=1

goal: a b
ifeq ($(L),1)
        @echo goal
        @L=0
endif
        @echo done > goal

a:
ifeq ($(L),1)
        @echo a
        @L=0
endif
        @echo done > a

b:
ifeq ($(L),1)
        @echo b
        @L=0
endif
        @echo done > b 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:19:14.803

您不能使用 ifeq 等，因为这些是*预处理器*语句：它们在读入 makefile 时执行。

在传统的 make 中，没有办法做你想做的事，除非像你做的那样通过脚本和文件。如果你愿意成为特定的 GNU make，并且需要一个足够新的 GNU make 版本来支持该`$(eval ...)`功能，那么你可以这样做；就像是：

```
SHOW := true
goal: a b
        $(if $(SHOW),@echo goal $(eval SHOW :=))
        @echo done > goal
a:
        $(if $(SHOW),@echo a $(eval SHOW :=))
        @echo done > a
b:
        $(if $(SHOW),@echo b $(eval SHOW :=))
        @echo done > b 
```

# java - NoClassDefFoundError：org/apache/commons/configuration/ConfigurationException

> ID：15787841
> 
> 赞同：7
> 
> 时间：2013-04-03T12:50:39.710
> 
> 标签：java, maven, apache-commons, apache-commons-config

我有一个应用程序，我需要在其中解析配置文件，当在服务器上运行该程序时，它会给出以下跟踪：

```
java.lang.NoClassDefFoundError: org/apache/commons/configuration/ConfigurationException
    at com.messagedna.server.startup.StartupServlet.init(StartupServlet.java:19)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1274)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1186)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1081)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5033)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5320)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1553)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:791)
    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:622)
    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:569)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:791)
    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1486)
    at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:96)
    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1327)
    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1419)
    at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:847)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)
    at sun.rmi.transport.Transport$1.run(Transport.java:177)
    at sun.rmi.transport.Transport$1.run(Transport.java:174)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.configuration.ConfigurationException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 48 more 
```

apache commons**存在**于我的类路径中。它是。尽管如此，我还是有这样的问题。

在 firefox 的 firebug 中，我在 tomcat 日志中看到以下跟踪：

```
<b>exception</b> <pre>java.lang.NoClassDefFoundError: com/google/gwt/user/client/rpc/RemoteService
    java.lang.ClassLoader.defineClass1(Native Method)
    java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
    org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    java.lang.ClassLoader.defineClass1(Native Method)
    java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
    org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:461)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    java.lang.Thread.run(Thread.java:722) 
```

实际上，我并不认为这两个例外有相同的原因。如果有人能告诉我解决此类问题的方法，我将不胜感激

**UPD：**这是我的 pom.xml 文件：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

    <parent>
        <artifactId>DLP</artifactId>
        <groupId>com.messagedna.dlp</groupId>
        <version>1.0</version>
    </parent>
  <groupId>com.messagedna.dlp</groupId>
  <artifactId>DLPServer</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>DLPServer</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
      <dependency>
          <groupId>com.google.gwt</groupId>
          <artifactId>gwt-servlet</artifactId>
          <version>2.0.3</version>
      </dependency>
      <dependency>
          <groupId>com.google.gwt</groupId>
          <artifactId>gwt-user</artifactId>
          <version>2.0.3</version>
      </dependency>
      <dependency>
          <groupId>com.extjs</groupId>
          <artifactId>gxt</artifactId>
          <version>2.2.0</version>
      </dependency>
      <dependency>
          <groupId>commons-configuration</groupId>
          <artifactId>commons-configuration</artifactId>
          <version>1.9</version>
      </dependency>
      <dependency>
          <groupId>javax.mail</groupId>
          <artifactId>mail</artifactId>
          <version>1.4.5</version>
      </dependency>
      <dependency>
          <groupId>org.apache.james</groupId>
          <artifactId>apache-mime4j</artifactId>
          <version>0.6.1</version>
      </dependency>
      <dependency>
          <groupId>org.apache.tika</groupId>
          <artifactId>tika-parsers</artifactId>
          <version>1.2</version>
      </dependency>
      <dependency>
          <groupId>net.freeutils.jtnef</groupId>
          <artifactId>tnef</artifactId>
          <version>1.5.0</version>
      </dependency>
      <dependency>
          <groupId>com.messagedna-archive.mimeparser</groupId>
          <artifactId>MimeParser</artifactId>
          <version>1.0</version>
      </dependency>

      <dependency>
          <groupId>com.rabbitmq</groupId>
          <artifactId>amqp-client</artifactId>
          <version>3.0.4</version>
      </dependency>
      <dependency>
          <groupId>commons-lang</groupId>
          <artifactId>commons-lang</artifactId>
          <version>2.3</version>
      </dependency>
      <dependency>
          <groupId>org.jboss.resteasy</groupId>
          <artifactId>resteasy-jaxrs</artifactId>
          <version>2.3.4.Final</version>
      </dependency>
      <dependency>
          <groupId>org.jboss.resteasy</groupId>
          <artifactId>resteasy-jaxb-provider</artifactId>
          <version>2.3.4.Final</version>
      </dependency>

      <dependency>
          <groupId>junit</groupId>
          <artifactId>junit</artifactId>
          <version>4.10</version>
          <scope>test</scope>
      </dependency>
  </dependencies>
  <build>
        <outputDirectory>war/WEB-INF/classes</outputDirectory>
        <plugins>
              <plugin>
                  <groupId>org.codehaus.mojo</groupId>
                  <artifactId>gwt-maven-plugin</artifactId>
                  <version>1.2</version>
                  <executions>
                      <execution>
                          <goals>
                              <goal>compile</goal>
                              <goal>generateAsync</goal>
                              <goal>test</goal>
                          </goals>
                      </execution>
                  </executions>
                  <configuration>
                      <runTarget>Main.html</runTarget>
                      <style>OBFUSCATED</style>
                      <extraJvmArgs>-Xmx1024m -Xss1024k</extraJvmArgs>
                      <webappDirectory>war</webappDirectory>
                  </configuration>
              </plugin>

              <plugin>
                  <groupId>org.apache.maven.plugins</groupId>
                  <artifactId>maven-war-plugin</artifactId>
                  <version>2.1.1</version>
                  <configuration>
                      <webappDirectory>war</webappDirectory>
                      <warSourceExcludes>.gwt-tmp/**</warSourceExcludes>
                  </configuration>
              </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
  </build>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:55:54.197

检查 lib 是否包含在您的应用程序的 lib 文件夹中，您可能通过 ant 或 maven 打包离开了它。下一个可能的原因可能是您的 jar 已损坏。尝试反编译和检查（尽管这种情况非常罕见）。

Allways do remeber classNotFound 异常仅仅意味着您的程序无论出于何种原因都无法找到关注类。将它添加到您的库/类路径中。没有其他可能的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:54:27.767

你的路上也有 Commons Lang 吗？否则，Eclipse 将无法解析 ConfigurationException 类，您将收到该错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T12:03:48.370

想法（我使用intellij Idea）属性中的问题。由于某种原因，它们被打破了。我没有发现完全错误（运行配置的问题）并删除了所有想法文件，创建了一个新项目并将我的模块导入到这个项目中，我的程序开始工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-11T00:12:36.313

我在 Glassfish 运行时环境 3.1.2 的另一个实例上运行该应用程序，它可以工作！！我使用的是 3.1.2.2

它可能是 glassfish 服务器实例损坏或 glassfish 服务器 3.1.2.2 中的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-07T19:40:15.880

哦，真的，JetBrains IDE 有问题。使缓存无效并重新启动对我有帮助。

# java - 在该实体本身之前持久/保存 JPA 实体的关系

> ID：15787844
> 
> 赞同：1
> 
> 时间：2013-04-03T12:50:47.777
> 
> 标签：java, jpa, spring-mvc

我有一个`@OneToMany`JPA 关联，该关联`Curriculum`具有多个`WorkExperience`.

`Curriculum`JPA 实体：

```
@Entity
public class Curriculum {
    ...
    @OneToMany
    private Set<WorkExperience> workExperiences;
    ... 
```

`WorkExperience`JPA 实体：

```
@Entity
public class WorkExperience {
... 
```

我最初想将课程及其 WorkExperiences 持久化到一个 entityManager 调用的 persist 方法中。

但是，鉴于我如何设计 Web UI 的操作流程，我现在想知道是否可能无法实现另一种情况，即：

*   首先将 WorkExperiences 持久化到 db，然后在用户填写了主要课程实体详细信息后，将其持久化到：

*   将现有的 WorkExperience 实例（已经在 db 中）设置为 Curriculum 实例（不在 db 中）和

*   坚持整个对象图：课程及其工作经验。

那有意义吗？我想到了几个缺点，例如，如果用户选择不保留 Curriculum 实例会发生什么？如何清理 WorkExperience 表中的悬空线？

有替代品或更好的模式吗？例如，在用户验证表单之前预先保存课程实例是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:05:13.440

我会在 , 上定义一个级联`Curriculum`，因为`WorkExperience`它似乎是一个依赖实体。

然后在 UI/控制器中使用新的/分离的实体，直到用户决定提交（最后一个）表单。然后在同一事务提交期间持久化`Curriculum`和相关实体也将被持久化。`WorkExperience`

```
@OneToMany(cascade=CascadeType.ALL)
private Set<WorkExperience> workExperiences; 
```

# php - 如果日期以特定格式给出，则更改日期格式的特殊条件

> ID：15787847
> 
> 赞同：0
> 
> 时间：2013-04-03T12:50:52.343
> 
> 标签：php, cakephp

我正在从 excel 文件中读取日期字段。如果日期是正确的日期，我可以成功阅读它。但在某些情况下，我有约会之类的

**2012 年 7 月 12 日**

由于它不是正确的日期格式，**它应该是 07.12.2012。**

**我的脚本将其读取为 2007 年 12 月 12 日。但我希望输出为 07-12-2012。**

那么有什么方法可以检查格式是否为 dd.mm.yy （特殊情况），然后我可以简单地使用

**爆炸('.','07.12.12')**

并根据我的需要更改日期。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:56:15.310

使用日期时间对象。

```
$date = DateTime::createFromFormat('d.m.y', '07.12.12');
echo $date->format('d.m.Y'); 
```

[CodeViper 演示。](http://codepad.viper-7.com/oQTHwk)

**注意：**我个人建议您保留日期格式标准（`d-m-Y`），它由`-`&分隔，`.`并且此方法仅支持 PHP 版本> = 5.3.0。

**已编辑：**用于检查您的日期是否在 dmy 中的正则表达式条件

```
$pattern = '/^[0-9]{2}\.[0-9]{2}\.[0-9]{2}$/';
if(preg_match($pattern,$date,$matches)){
   #conversion goes here    
} 
```

你也可以使用，

```
 if(substr_count($date,'.') == 2){
    #conversion goes here
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:43:36.930

只需检查长度：

```
$pieces = explode('.', '07.12.12');
if (strlen($pieces[2]) !== 4) {
    $pieces[2] = '20' . $pieces[2];
}

// proper date in YYYY-MM-DD format
$date = $pieces[2] . '-' . $pieces[1] . '-' . $pieces[0]; 
```

# c# - 在以逗号作为小数分隔符的 SugarCRM 中，如何保存字段的十进制值？

> ID：15787855
> 
> 赞同：2
> 
> 时间：2013-04-03T12:51:10.117
> 
> 标签：c#, web-services, sugarcrm

**设想**

> 从 c# 更新糖中的机会数量

**问题**

> 当机会金额为十进制且糖以逗号 (,) 作为小数分隔符时。金额保存不正确（500.50保存为50050）

唯一要做的就是读取糖设置。但是soap.php中没有这样的方法返回数字分隔符

PS 有趣的是，当从糖中读取值时，它会以点作为分隔符。然后在 c# 中正确读取。问题只在于给糖写价值。

# scala - 强制执行 void 特征初始化的注释

> ID：15787862
> 
> 赞同：1
> 
> 时间：2013-04-03T12:51:30.097
> 
> 标签：scala, initialization, mixins, traits

关于 Scala 中的特征初始化顺序有很多问题。我想用注释标记一个特征，说明该特征没有初始化代码，因此可以在不打扰初始化顺序的情况下使用。

像这样的东西：

```
@noinit
trait Funcs[A] {
  val a : A
  def b() : A
  def c(x : A)
} 
```

trait`Funcs`只是声明了一些值和函数，不需要初始化代码

如何实现描述的功能？

# elasticsearch - 单集群升级后 ES 超时

> ID：15787865
> 
> 赞同：0
> 
> 时间：2013-04-03T12:51:42.567
> 
> 标签：elasticsearch, netty

所以我有 ES 版本 0.19.4 并想升级到 0.20.6，因为我的集群没有任何我无法轻松恢复的信息我删除了索引并完全清除了我的 es 数据文件夹，删除了 0.19 .4 版本，当我启动时，我不知何故无法使用我原来的集群名称，ES 以任何其他集群名称开始正常，但不是我之前使用的“aggr”，因为我想确保没有其他东西在使用旧的 Elastic搜索我什至重新启动了计算机（在这个测试系统上没有任何启动软件）所以基本上一切都很清楚，但我不能使用旧的集群名称......堆栈：

```
[2013-04-03 13:37:59,902][WARN ][discovery.zen.ping.multicast] [Orchid] failed to connect to requesting node [Kaur, Benazir][by0TZFhXR1mUxBd9T6bi9w][inet[/xxx.xxx.xx.xxx.xxxx]]{client=true, data=false}
org.elasticsearch.transport.ConnectTransportException: [Kaur, Benazir][inet[/xxx.xxx.xx.xxx.xxxx]] connect_timeout[30s]
at org.elasticsearch.transport.netty.NettyTransport.connectToChannels(NettyTransport.java:671)
at org.elasticsearch.transport.netty.NettyTransport.connectToNode(NettyTransport.java:610)
at org.elasticsearch.transport.netty.NettyTransport.connectToNode(NettyTransport.java:580)
at org.elasticsearch.transport.TransportService.connectToNode(TransportService.java:127)
at org.elasticsearch.discovery.zen.ping.multicast.MulticastZenPing$Receiver$1.run(MulticastZenPing.java:536)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.net.ConnectException: connection timed out
at org.elasticsearch.common.netty.channel.socket.nio.NioClientBoss.processConnectTimeout(NioClientBoss.java:136)
at org.elasticsearch.common.netty.channel.socket.nio.NioClientBoss.process(NioClientBoss.java:82)
at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:312)
at org.elasticsearch.common.netty.channel.socket.nio.NioClientBoss.run(NioClientBoss.java:41)
at org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
at org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
... 3 more 
```

所有 elasticsearch.yml 设置都被注释掉，除了：

```
cluster.name: aggr 
```

此外，当 Elastic Search 在连接到内部网络的测试机器上启动时，我在日志中看到：

```
[2013-04-03 13:37:27,281][INFO ][node                     ] [Orchid] {0.20.6}[4484]: initializing ...
[2013-04-03 13:37:27,287][INFO ][plugins                  ] [Orchid] loaded [], sites []
[2013-04-03 13:37:29,633][INFO ][node                     ] [Orchid] {0.20.6}[4484]: initialized
[2013-04-03 13:37:29,633][INFO ][node                     ] [Orchid] {0.20.6}[4484]: starting ...
[2013-04-03 13:37:29,710][INFO ][transport                ] [Orchid] bound_address {inet[/0:0:0:0:0:0:0:0:9300]}, publish_address {inet[/**My internal IP**:9300]}
[2013-04-03 13:37:32,739][INFO ][cluster.service          ] [Orchid] new_master [Orchid][MzSRtsCfR2W3S_QyG_QLQg][inet[/**My internal IP**:9300]], reason: zen-disco-join (elected_as_master)
[2013-04-03 13:37:32,818][INFO ][discovery                ] [Orchid] aggr/MzSRtsCfR2W3S_QyG_QLQg
[2013-04-03 13:37:32,857][INFO ][http                     ] [Orchid] bound_address {inet[/0:0:0:0:0:0:0:0:9200]}, publish_address {inet[/**My internal IP**:9200]}
[2013-04-03 13:37:32,857][INFO ][node                     ] [Orchid] {0.20.6}[4484]: started
[2013-04-03 13:37:32,945][INFO ][gateway                  ] [Orchid] recovered [0] indices into cluster_state 
```

然后在错误日志中，我看到了与外部 IP 连接的服务器机器的日志：

```
[2013-04-03 13:37:59,902][WARN ][discovery.zen.ping.multicast] [Orchid] failed to connect to requesting node [Kaur, Benazir][by0TZFhXR1mUxBd9T6bi9w][inet[/**My external IP**:9301]]{client=true, data=false}
org.elasticsearch.transport.ConnectTransportException: [Kaur, Benazir][inet[/**My external IP**:9301]] connect_timeout[30s] 
```

怎么会这样？我的系统如何在我的内部机器上启动并在链接到我的外部机器时抛出错误？同样，在 ES.yml 中设置的唯一设置是集群名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:18:30.480

看起来您仍然在某处运行旧客户端节点：

```
[Kaur, Benazir][inet[/xxx.xxx.xx.xxx.xxxx]] 
```

您需要先将其关闭，然后才能使用新版本启动集群。

此客户端可能在您使用弹性搜索的 Web 应用程序中运行，而您升级弹性搜索服务器时，您没有升级此应用程序中的弹性搜索库。你有在 xxx.xxx.xx.xxx 上运行的 java 应用吗？尝试关闭它。

# asp.net-mvc - 来自多个提供商的 asp.net mvc 请求 xml

> ID：15787866
> 
> 赞同：1
> 
> 时间：2013-04-03T12:51:48.847
> 
> 标签：asp.net-mvc

我有一个 mvc 应用程序，有一次我需要从我的一些提供商那里检索一些 XML 文件。我怎样才能做到这一点？是否支持多线程？然后将解析这些文件并将其添加到数据库中。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:58:05.697

是的，它支持多线程。要实现它，您可以使用[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)

```
Task[] tasks = new Task[5]
{
    Task.Factory.StartNew(() => ParseXml()),
    Task.Factory.StartNew(() => ParseXml()),
    Task.Factory.StartNew(() => ParseXml()),
    Task.Factory.StartNew(() => ParseXml())
    Task.Factory.StartNew(() => ParseXml())
};

Task.WaitAll(tasks); 
```

其中 ParseXML - 是您解析 xml 的方法，然后您可以将其保存到数据库

# linux - 调用_exit时系统调用返回07

> ID：15787868
> 
> 赞同：2
> 
> 时间：2013-04-03T12:51:58.023
> 
> 标签：linux, gcc, nasm, elf, system-calls

我正在看一篇论文[Size Is EverythingSize Is Everything](http://www.muppetlabs.com/~breadbox/software/tiny/teensy.html) with kernel 3.8.4 x64 nasm gcc-4.7.2 fedora

按类型输入 moretiny.asm

```
BITS 64

EXTERN _exit
GLOBAL _start
SECTION .text

_start:
    push dword 42
    call  _exit

\>nasm -f elf64 moretiny.asm 
\>gcc -Wall -s -nostartfiles -o moretiny.
\>./a.out ; echo $? 
```

7

在 gdb 的帮助下。在 _exit 处休息

```
(gdb) display /i $pc
1: x/i $pc
=> 0x3a5e0bb750 <_exit>:    movslq %edi,%rdx
(gdb) si
0x0000003a5e0bb753 in _exit () from /lib64/libc.so.6
1: x/i $pc
=> 0x3a5e0bb753 <_exit+3>:  mov    0x2f56de(%rip),%r10        # 0x3a5e3b0e38
(gdb) 
0x0000003a5e0bb75a in _exit () from /lib64/libc.so.6
1: x/i $pc
=> 0x3a5e0bb75a <_exit+10>: mov    $0xe7,%r9d
(gdb) 
0x0000003a5e0bb760 in _exit () from /lib64/libc.so.6
1: x/i $pc
=> 0x3a5e0bb760 <_exit+16>: mov    $0x3c,%r8d
(gdb) 
0x0000003a5e0bb766 in _exit () from /lib64/libc.so.6
1: x/i $pc
=> 0x3a5e0bb766 <_exit+22>: jmp    0x3a5e0bb781 <_exit+49>
(gdb) 
0x0000003a5e0bb781 in _exit () from /lib64/libc.so.6
1: x/i $pc
=> 0x3a5e0bb781 <_exit+49>: mov    %rdx,%rdi
(gdb) 
0x0000003a5e0bb784 in _exit () from /lib64/libc.so.6
1: x/i $pc
=> 0x3a5e0bb784 <_exit+52>: mov    %r9d,%eax
(gdb) 
0x0000003a5e0bb787 in _exit () from /lib64/libc.so.6
1: x/i $pc
=> 0x3a5e0bb787 <_exit+55>: syscall 
(gdb) 
[Inferior 1 (process 32082) exited with code 07] 
```

似乎系统调用返回 07 的代码，我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:15:53.693

abi[`x86_64`指定](http://math-atlas.sourceforge.net/devel/assembly/abi_sysV_amd64.pdf)参数传递约定。

在这种情况下：

> 如果类是 INTEGER，则使用序列 %rdi、%rsi、%rdx、%rcx、%r8 和 %r9 的下一个可用寄存器12。

所以你应该使用`%rdi`寄存器而不是压入堆栈。

`_exit`从您对函数调用的单步调试中可以看出这一点。

# c# - 使用 TypeDescriptor 在 WCF 服务中加载自定义属性

> ID：15787870
> 
> 赞同：1
> 
> 时间：2013-04-03T12:52:01.437
> 
> 标签：c#, wcf, custom-attributes, typedescriptor

我有几个类具有以下数据合同定义和元数据类

```
[MetadataType(typeof(ClassAMetadata))]
public partial class ClassA
{
    public string PropertyA { get; set; }
}

public class ClassAMetadata
{
    [CustomAttribute(Title = "PropertyAText")]
    public string PropertyA { get; set; }
} 
```

然后，我想使用以下代码从当前程序集中获取在所有程序集类型中使用的 CustomAttribute 的属性 Title：

```
internal static Dictionary<string, string> GetCustomAttributeTitles<T>(this T entity) where T : class
{          
    Dictionary<string, string> result = (from prop in TypeDescriptor.GetProperties(entity.GetType()).Cast<PropertyDescriptor>()
                                            from att in prop.Attributes.OfType<CustomAttribute>()
                                            select new { prop.Name, att.Title }).ToDictionary(t => t.Name, t => t.Title);

    return result;
} 
```

在调用 GetCustomAttributeTitles 方法之前，我在类型描述符中加载元数据属性：

```
 public static void InstallForAssembly(Assembly assembly)
    {
        if (assembly == null)
        {
            throw new ArgumentNullException("assembly");
        }

        foreach (Type type in assembly.GetTypes())
        {
            foreach (MetadataTypeAttribute attrib in type.GetCustomAttributes(typeof(MetadataTypeAttribute), true))
            {
                TypeDescriptor.AddProviderTransparent(
                      new AssociatedMetadataTypeTypeDescriptionProvider(type, attrib.MetadataClassType), type);
            }
        }
    } 
```

我的程序的一个例子是：

```
InstallForAssembly(Assembly.LoadFile(Environment.CurrentDirectory + "\\DataContract.dll"));
ClassA instanceOfA = new ClassA();
//fill instanceOfA
var dictionary = instanceOfA.GetCustomAttributeTitles();
//do something with dictionary 
```

这在控制台应用程序中运行良好，但在 WCF 服务方法中不起作用，GetCustomAttributeTitles 方法中的字典始终为空。为什么会发生？

# ajax - Wicket 6：如何通过 AbstractDefaultAjaxBehavior 注入 javascript 函数？

> ID：15787875
> 
> 赞同：3
> 
> 时间：2013-04-03T12:52:13.477
> 
> 标签：ajax, wicket, wicket-6

我有一个附加了 JavaScript 文件的页面。

JavaScript 有一个函数，最后应该调用一个由 Wicket 通过 AbstractDefaultAjaxBehavior 注入的函数。

JavaScript 看起来像这样：

```
function updateAmount(amount){
  // do some calculations on amount
  saveAmount(amount);
} 
```

注入的函数应该是这样的：

```
function saveAmount(amount){
  Wicket.Ajax.post({
    u: '${callbackUrl}',
    dep: function(){
           return [{name:'amount','value':amount}];
         }
} 
```

我遇到的问题是，当`updateAmount`调用该`saveAmount`函数时，（控制台）日志指出“saveAmount”未定义。

如果我查看源代码，注入的函数就在那里，但不是 JavaScript，而是由 wicket 生成的“AJAX”JavaScript。

目标是在 JavaScript 中调用一个函数，该函数将调用由 Wicket 注入的函数，该函数使用 JavaScript 提供的参数执行 AJAX 调用。

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T09:04:17.263

基本上，您应该在自定义中使用`updateAjaxAttributes()`and`renderHead()``AbstractAjaxBehaviour`

在此处查看更多详细信息：

~~[http://wickedsource.org/2013/01/07/rolling-your-own-ajax-behavior-with-wicket/](http://wickedsource.org/2013/01/07/rolling-your-own-ajax-behavior-with-wicket/)~~

从 google 缓存中检索，相关代码（由 Tom Hombergs 编写）：

```
public class MyAjaxBehavior extends AbstractDefaultAjaxBehavior {

@Override
protected void respond(AjaxRequestTarget target) {
RequestCycle cycle = RequestCycle.get();
WebRequest webRequest = (WebRequest) cycle.getRequest();
StringValue param1 = webRequest.getQueryParameters().getParameterValue("param1");
StringValue param2 = webRequest.getQueryParameters().getParameterValue("param2");
// do whatever you need with param1 and param2
}

@Override
public CharSequence getCallbackScript() {
String script = super.getCallbackScript().toString();
script = script.replace("\"PLACEHOLDER1\"", "param1Value");
script = script.replace("\"PLACEHOLDER2\"", "param2Value");
return script;
}

@Override
protected void updateAjaxAttributes(AjaxRequestAttributes attributes) {
super.updateAjaxAttributes(attributes);
attributes.getExtraParameters().put("param1", "PLACEHOLDER1");
attributes.getExtraParameters().put("param2", "PLACEHOLDER2");
}

@Override
public void renderHead(Component component, IHeaderResponse response) {
super.renderHead(component, response);
String script = "var param1Value = My.JavaScript.Module.calculate1();";
script += "var param2Value = My.JavaScript.Module.calculate2();";
script += getCallbackScript();
response.render(OnDomReadyHeaderItem.forScript(script));
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:43:15.943

我认为您需要将响应的内容绑定到全局 Javascript 变量 ( `window.MyObject.saveAmount = function(){...}`)。

这样你就可以从你自己的 Javascript 中调用它。在我看来，问题在于 Wicket 将其 Ajax 响应的内容“沙箱化”到一个小范围（响应范围）。

如果我的回答无效，请提供更完整的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T16:23:52.693

```
private static final String MY_PARAM = "myparam";
public static class SampleCallbackBehavior extends AbstractDefaultAjaxBehavior {        
    @Override
    public void renderHead(Component component, IHeaderResponse response) {
        super.renderHead(component, response);
        response.render(OnDomReadyHeaderItem.forScript("var myfunction : " + getCallbackFunction(CallbackParameter.explicit(MY_PARAM))));
    }
    @Override
    protected void respond(AjaxRequestTarget target) {
        StringValue paramValue = getComponent().getRequest().getRequestParameters().getParameterValue(MY_PARAM);
        //TODO handle callback
    }       
} 
```

在此之后，您应该只从 javascript 调用该函数

```
myfunction("paramValue"); 
```

# iphone - iPhone 应用程序崩溃 [__NSCFString objectForKey:] 无法识别的选择器发送到实例

> ID：15787876
> 
> 赞同：2
> 
> 时间：2013-04-03T12:52:18.090
> 
> 标签：iphone, objective-c, nsmutablearray, nsdictionary

我试图在 tempArray 中添加只有偶数个 data.localBookmarks 是字典数组。这是我的代码：

```
currentIndex = indexPath.row;
for (NSDictionary *dict in localBookmarks)
    {
    if (currentIndex % 2 == 0 && currentIndex <= [localBookmarks count])
     {             
           [tempArray addObject:[dict objectForKey:@"firstName"]];
     }
        currentIndex++;
    }
NSLog(@"tempArray %@",tempArray);

cell.textLabel.text = [tempArray objectAtIndex:indexPath.row];
return cell; 
```

我的应用程序在 [tempArray addObject:[dict objectForKey:@"firstName"]] 上崩溃；这条线，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T12:56:20.667

## 为什么你会崩溃

`dict`您认为是 NSDictionary的变量实际上是 NSString。由于字符串不响应`objectForKey:`您的应用程序崩溃的方法。这就是错误消息告诉您的内容。

## 问题出在哪里

您的陈述：“data.localBookmarks 是字典数组”是错误的。其中至少有一个只是一个字符串。

检查您的`localBookmarks`来源。如果您正在解析的是数据，您可能需要更改它。

# phpbb3 - 格式化从 phpbb3 数据库中提取的帖子数据

> ID：15787878
> 
> 赞同：0
> 
> 时间：2013-04-03T12:52:24.293
> 
> 标签：phpbb3

我想将我的 phpbb3 论坛中的特定帖子整合到我网站的其他区域。

我已经编写了 sql 代码来隔离正确的帖子并拉出正确的帖子，但它显示为一个巨大的混乱字符串。

phpbb3 类中的内部方法将来自数据库的长混乱字符串格式化为您在打开论坛时查看的格式正确的帖子，包括显示附加图像。

我正在用 php 做这个。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:37:25.090

我相信我之前的一个答案（稍作修改）可以为您提供所需的信息。

[在外部页面上显示 5 个最新帖子](https://stackoverflow.com/questions/14723578/phpbb3-forum-feed-on-external-page-for-non-authenticated-users/14903122#14903122)

您的问题的简短答案是这段代码。这将清理数据的各个方面。

```
 $topic_title       = $posts_row['topic_title'];
     $post_author       = get_username_string('full', $posts_row['poster_id'], $posts_row['username'], $posts_row['user_colour']);
     $post_date          = $user->format_date($posts_row['post_time']);
     $post_link       = append_sid("{$phpbb_root_path}viewtopic.$phpEx", "p=" . $posts_row['post_id'] . "#p" . $posts_row['post_id']);

     $post_text = nl2br($posts_row['post_text']);

     $bbcode = new bbcode(base64_encode($bbcode_bitfield));         
     $bbcode->bbcode_second_pass($post_text, $posts_row['bbcode_uid'], $posts_row['bbcode_bitfield']);

     $post_text = smiley_text($post_text); 
```

正如我在上一个答案中提到的，该代码基于PHPBB Wiki的[示例 4 。](https://wiki.phpbb.com/Practical.Displaying_posts_and_topics_on_external_pages#Example_4:_Display_posts_from_anywhere)

# c++ - 存储数组的字符串

> ID：15787885
> 
> 赞同：0
> 
> 时间：2013-04-03T12:52:39.097
> 
> 标签：c++, arrays, string, arraylist

```
if(command=="insert")
{
    int i=0;
    while(i>=0)
    {
        string textToSave[i];
        cout << "Enter the string you want saved: " << endl;
        cin >>textToSave[i];

        ofstream saveFile ("Save.txt");
        saveFile << textToSave;
        saveFile.close();
        i++;
        break;
    }
} 
```

我想将输入的数组存储到 .txt 文件中。但是我在创建要存储的数组时遇到问题。在whileloop和forloop之间选择我也很纠结，但认为while循环更合适，因为不知道插入单词需要多少时间。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:57:49.257

您正在尝试存储整个字符串数组，而不仅仅是当前字符串。不知道为什么你需要`i`and 有一个数组，因为无论如何你一次只是读取和写入一个字符串。

它可能是这样的：

```
if(command=="insert")
{
    string textToSave;

    cout << "Enter the string you want saved: " << endl;
    cin >>textToSave;

    ofstream saveFile ("Save.txt");
    saveFile << textToSave;
    saveFile.close();

    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:05:03.590

> 但是我在创建要存储的数组时遇到问题。

在循环外，声明一个空向量；这将保存数组：

```
vector<string> textToSave; 
```

在循环内部，读取一个字符串并将其附加到数组中：

```
string text;
cin >> text;
textToSave.push_back(text); 
```

或者，稍微紧凑一点：

```
textToSave.push_back(string());
cin >> textToSave.back(); 
```

> 我也很难在 whileloop 和 forloop 之间进行选择

看起来您根本不想要一个循环，因为您只是在读取一个字符串。您可能想要一个外部循环来读取命令，沿着

```
vector<string> textToSave;
for (;;) { // loop forever (until you reach "break")
    string command;
    cin >> command;
    if (command == "quit") { // or whatever
        break;
    } 
    if (command == "insert") {
        cout << "Enter the string you want saved: " << endl;
        textToSave.push_back(string());
        cin >> textToSave.back();
    }
    // other commands ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:57:04.153

您遇到的一些最明显的问题是：

*   在声明. [_](http://en.wikipedia.org/wiki/Variable-length_array) `textToSave`这不是合法的 C++。
*   如果可变长度数组声明有效，则在获取用户输入时，您将写入最后一个索引*之外的一个*
*   您在每次迭代中打开并覆盖该文件。
*   当你跳出循环时，你只循环一次，所以无论如何只保存一个字符串。
*   如果您没有`break`在循环结束时使用，那么您将在该条件下永远循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:58:06.917

在循环之前创建数组，否则您将不断创建大小递增 1 的数组。如果您希望将每个数组保存在新文件中，也请更改文件名，否则您将不断覆盖同一个文件。

```
string textToSave[string_count];
if(command=="insert")
{
int i=0;
    while(i<string_count)
        {
            cout << "Enter the string you want saved: " << endl;
            cin >>textToSave[i];

            ofstream saveFile ("Save"+i+".txt");
            saveFile << textToSave[i];
            saveFile.close();
            i++;
        }
} 
```

# java - 使用 Jackson 读取没有属性的 json 数组

> ID：15787887
> 
> 赞同：0
> 
> 时间：2013-04-03T12:52:51.823
> 
> 标签：java, json, jackson

我正在尝试做一些非常简单的事情，但我无法正确...

给定以下 json 数组：

```
["gate","","vaterlands park","","gabels gate",""] 
```

我正在尝试使用以下方法对其进行映射：

```
List<String> names = mapper.readValue(new URL("http://hostname/search?q=" + queryString), List.class); 
```

但“名称”返回空。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:02:39.427

我不完全确定你不想做什么。但我可以建议您使用[JSON 自己的 java 类](http://json.org/java/)。它们很容易理解并且可以很容易地使用。

您可以简单地使用这些类来加载数组（如果您有字符串），它将返回一个 JSONArray，您可以像使用任何其他数组一样使用它。

如果您只需要实际名称，您将不需要那些空字符串。

# java - 使用正则表达式替换字符串中所有出现的单词

> ID：15787891
> 
> 赞同：2
> 
> 时间：2013-04-03T12:53:03.000
> 
> 标签：java, regex, string, replace

有没有简单的方法可以替换字符串中所有出现的（整个）单词？我目前正在使用它，它不是很优雅：

```
public static String replace(String input, String toReplace, 
                           String replacement){
    if(input==null) throw new NullPointerException();
    input = input.replace(" "+toReplace+" ", " "+replacement+" ");
    input = input.replaceAll("^"+toReplace+" ", replacement+" ");
    input = input.replaceAll(" "+toReplace+"$", " "+replacement);
    return input;
} 
```

此外，正则表达式`"^"+toReplace+" "`不是正则表达式安全的。例如：当它可能包含诸如`[`或之类的字符时`(`。

**编辑：**

这段代码的任何原因：

```
public static String replace(String input, String toReplace, 
                           String replacement){
    if(input==null) throw new NullPointerException();
    input = input.replace(" "+toReplace+" ", " "+replacement+" ");
    input = input.replaceAll(Pattern.quote("^"+toReplace+" "), replacement+" ");
    input = input.replaceAll(Pattern.quote(" "+toReplace+"$"), " "+replacement);
    //input = input.replaceAll("\\b" + Pattern.quote(toReplace) + "\\b", replacement);
    return input;
} 
```

在以下情况下表现这种方式：

```
 input = "test a testtest te[(st string test";
    input = replace(input, toReplace, "REP");
    System.out.println(input); 
```

a)`toReplace = test`打印：

```
test a testtest te[(st string test 
```

b)`toReplace = te[(st`打印：

```
test a testtest REP string test 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:58:12.003

使用单词边界`\b`和`Pattern.quote`转义。

```
return input.replaceAll("\\b" + Pattern.quote(toReplace) + "\\b", replacement); 
```

指示的是`\\b`单词和非单词字符之间的零宽度边界，包括字符串的开头和结尾。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T13:00:20.910

单词边界有一个特殊的正则表达式代码 - `\b`。这涵盖了您对空格/行尾开头的手动处理以及标点符号等其他情况。

有一种`Pattern.quote()`引用字符串的方法来保护正则表达式的特殊性，正如您所建议的，如果字符串是任意的或可能是用户提供的，则应始终使用该方法。

所以这给出了：

```
input.replaceAll("\\b"+Pattern.quote(toReplace)+"\\b", replacement); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T13:03:47.213

您需要了解 regex `\b`，它是“单词边界”的零宽度匹配。有了它，你方法的人就变成了一行：

```
return input.replaceAll("\\b"+Pattern.quote(toReplace)+"\\b", replacement); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T13:01:58.450

```
input = input.replaceAll("\\b"+Pattern.quote(toReplace)+"\\b", replacement); 
```

\b 匹配单词边界，参见[http://www.regular-expressions.info/wordboundaries.html](http://www.regular-expressions.info/wordboundaries.html)

使用 java.util.regex.Pattern.quote 转义特殊字符。

# windows - 嵌入式 Lua 不打印到分配的控制台

> ID：15787892
> 
> 赞同：1
> 
> 时间：2013-04-03T12:53:03.283
> 
> 标签：windows, console, lua, stdout

我的代码看起来像这样（Windows 平台）：

```
AllocConsole();
FILE *fp = freopen("CONOUT$", "w", stdout); //couldn't find documentation what CONOUT$ actually is
lua_State *lua_state = luaL_newstate();
luaL_openlibs(lua_state);
if(luaL_dostring(lua_state, "print 'It works!'"))
{
    printf("%s\n", lua_tostring(lua_state, -1));
} 
```

我无法获得 Lua 输出，而正常的 printf 工作（也打印 Lua 错误）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:37:04.483

**TL;DR：**该程序使用了多个版本的 C 运行时库。不要那样做。它总是会导致其他正确代码的神秘症状。

# 背景

从表面上看，您提供的代码应该可以工作。而且，如果在这里小心建造和链接，我可以让它工作。作为参考，我在 Win7 Pro 上使用 MingW GCC 4.7.2 构建 32 位 Windows。但我相信任何针对 Windows 的编译器都可能出现潜在问题。

我将介绍查找此错误的过程，希望对了解我如何解决此问题有所帮助。但是，如果您不耐烦，请跳到最后，然后回到这里看看我是如何到达那里的。

# 可测试代码

首先，我将您的代码片段包装在足够的样板中以使其完全编译和运行：

```
#include <lua.h>
#include <lauxlib.h>
#include <stdio.h>
#include <windows.h>

int main(int argc, char **argv) {
    AllocConsole();
    FILE *fp = freopen("CONOUT$", "w", stdout); 
    lua_State *L = luaL_newstate();
    luaL_openlibs(L);
    if(luaL_dostring(L,
             "print 'print works!'\n"
             "io.write 'io.write works'"
            ))
    {
    printf("%s\n", lua_tostring(L, -1));
    }
    Sleep(5000); // give me 5 seconds to read the console
} 
```

# 使用 GCC 编译

我在 Windows 上尽可能简单地编译和链接，这还不错，因为我安装了 Lua for Windows 的副本，恰好使环境变量`LUA_DEV`指向它的安装：

```
gcc -o q15787892 q15787892.c -mwindows -I"%LUA_DEV%\include" "%LUA_DEV%\lua5.1.dll" 
```

该`-mwindows`标志告诉 GCC（特别是链接器`ld`）将可执行文件标记为完整的 Windows GUI 程序。如果没有该标志，您将获得一个已经分配了控制台的控制台程序，并且 AllocConsole() 将简单地为持有命令提示符的程序提供句柄。

# 结果

有趣的是，既没有调用`print()`也没有`io.write()`产生输出。我在 Lua 文本中引入了一个语法错误，并注意到它确实输出到了控制台，表明它`stdout`确实被正确重定向了。

我`FILE *old=stdout;`在调用之前`freopen()`和`printf("%p %p %p", fp, stdout, oldstdout);`之后添加了它。所有三个指针完全相等，表明`freopen()`没有做任何不寻常的事情。

查看 Lua 5.1 函数实现的源代码，[`print()`](http://www.lua.org/source/5.1/lbaselib.c.html#luaB_print)我们发现它只是调用`fputs(s,stdout)`.

`printf()`那么，对from的调用怎么可能`main()`有效，但类似的调用 using`stdout`失败？

# 解决方案

如果`stdout`in`main()`与`stdout`in不同，则有可能`luaB_print()`。

但是两者都是全局变量，链接器应该使它们相同，对吗？

嗯，不一定。全局变量`stdout`是 C 运行时库的一部分。如果 Lua 核心链接到与程序不同的 C 运行时 DLL，那么 Lua 核心和程序实际上可能引用*不同*的名为`stdout`.

[对Dependency Walker](http://www.dependencywalker.com/)的快速检查显示我的测试可执行文件与 MSVCRT.DLL（MinGW 首选的 C 运行时）链接，但`lua5.1.dll`来自 Lua for Windows 的链接与 MSVCR80.DLL（Visual Studio 2005 中的 C 运行时）链接。

这个问题很容易解决。我将测试用例更改为链接到与 MSVCRT.DLL 链接的 Lua 构建，现在原始代码按预期工作。这是新的构建步骤，现在可以在 BAT 文件中找到，并假设其中`lua5_1-4_Win32_dll6_lib`包含正确构建的 Lua 核心：

```
setlocal
set LUADIR="lua5_1_4_Win32_dll6_lib"
gcc -o q15787892 q15787892.c -mwindows -I"%LUADIR%\include" "%LUADIR%\lua5.1.dll"
if not exist lua5.1.dll copy %LUADIR%\lua5.1.dll . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T09:17:34.590

另一个可能的原因是 luaxx.dll 发布了，而测试项目是调试版。所以，luaxx.dll 使用的是 msvcrxx.dll，而测试项目使用的是 msvcrxxd.dll——微软 c 运行时的调试版。

# java - 调用AndWait Java

> ID：15787894
> 
> 赞同：3
> 
> 时间：2013-04-03T12:53:08.143
> 
> 标签：java, swing, event-dispatch-thread, invokeandwait

谁能告诉我这两个代码之间的实际区别是什么，因为它们都产生相同的结果？

代码1：

```
public class JLabelDemo extends JApplet {
public void init() {
    this.setSize(400, 400);
    ImageIcon ii = new ImageIcon("Flock_icon.png");
    JLabel jl = new JLabel("<<--- Flock_icon", ii, JLabel.CENTER);
    add(jl);
}
} 
```

代码2：

```
public class JLabelDemo extends JApplet {
private static final long serialVersionUID = 1L;

public void init() {
    this.setSize(400, 400);
    try {
        SwingUtilities.invokeAndWait(new Runnable() {
            public void run() {
                makeGUI();
            }
        });
    } catch (InvocationTargetException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}

private void makeGUI() {
    ImageIcon ii = new ImageIcon("Flock_icon.png");
    JLabel jl = new JLabel("<<--- Flock_icon", ii, JLabel.CENTER);
    add(jl);
}
} 
```

我真的没有发现生成的输出之间有任何区别。但我无法理解代码。

> 那么任何人都可以给我invokeAndWait方法的真实示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:02:10.703

对于 code1，2 个分配和添加在任何线程调用 init() 上执行。如果这不是事件分派线程，那么*可能*会出现问题，因为 Swing 文档说几乎所有 Swing 的使用都应该在事件分派线程上完成。

对于 code2，对 Swing 的调用保证在事件调度线程上完成。这是做事的正确方法。它既丑陋又复杂，而且你（还）不理解它，但如果 init() 将在 EDT 以外的任何线程上调用，它就是正确的做事方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:57:49.767

`invokeAndWait`意味着它将在单独的线程中执行该代码块，因此在执行时不会阻塞主线程。它用于创建 Swing GUI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:04:45.213

您不会在小型摆动应用程序中看到任何差异。在 UI 绘制需要较长时间和/或应用程序中涉及多个线程的较大应用程序中，您可以看到差异。

来自 javadoc

> invokeAndWait 导致 doRun.run() 在 AWT 事件分派线程上同步执行。此调用会阻塞，直到所有待处理的 AWT 事件都已处理并且（然后）doRun.run() 返回。当应用程序线程需要更新 GUI 时，应使用此方法。它不应该从 EventDispatchThread 中调用。

你也可以[在这里查看](https://stackoverflow.com/questions/15080772/java-invokeandwait?rq=1)。

# java - 安卓平板能支持Fcl文件吗？

> ID：15787897
> 
> 赞同：1
> 
> 时间：2013-04-03T12:53:14.023
> 
> 标签：java, android, fuzzy-logic, jfuzzylogic

我将 jfuzzylogic 应用程序用于我的论文项目。当我尝试在 Android 平台上运行 jfuzzylogic 应用程序时，我遇到了一个问题。我在下面运行此代码后，无法加载 fcl 文件。我猜Android平台无法检测或识别fcl文件。但是，当我在普通计算机上运行相同的 jfuzzylogic 代码块时，fcl 文件加载正常。有人对这个问题有什么建议吗？是否可以在 Android 平板电脑上运行 jfuzzylogic 应用程序？这是代码：

```
 import net.sourceforge.jFuzzyLogic.FIS;

 import android.widget.TextView;

public class Mixing implements Runnable {

public Interfacekit mixkit,sonarkit;
public TextView[] Rfidviews; 

int count;  

public Mixing(Interfacekit sonarkit,Interfacekit dishkit,Interfacekit mixkit,Rfid mrfid1,Rfid mrfid2, Rfid mrfid3,Rfid mrfid4,Rfid dishrfid,Rfid sinkrfid,Rfid stoverfid,Temperature eggtemp,Temperature stovetemp,final TextView[] Rfidviews)
{
    this.sonarkit=sonarkit;
    this.Rfidviews = Rfidviews;

    new Thread(this).start();
}

public void run()   

{
    while(count==1){

                 //////////////////////////initial states

        if(mixkit.getattach()==true||sonarkit.getattach()==true ) 

        {

                    Rfidviews[20].post(new Runnable() {
                        public void run() {
                            {

                                // Vassiliki

                                // Load from 'FCL' file

                                String vassiliki_fileName1= "vassiliki_examinable.fcl";

                                // Vassiliki Examinable     

                                /* I FACED PROBLEM IN THIS LINE. THIS FCL FILE WASN'T LOADED SINCE I GUESS ANDROID TABLET CAN'T DETECT
                                 * OR RECOGNIZE FCL FILE.
                                 */
                                FIS vassiliki_examinable_obj1 = FIS.load(vassiliki_fileName1,true);

                                // Error while loading?
                                if( vassiliki_examinable_obj1 == null ) { 
                                    System.err.println("Can't load file: '" 
                                                           + vassiliki_fileName1 + "'");
                                    return;
                                }

                                int sonar1 = sonarkit.getsonar(2);
                                if (sonar1 != 0){

                                vassiliki_examinable_obj1.setVariable("proximity", sonar1);
                                vassiliki_examinable_obj1.setVariable("obj_orient_perception", 1);
                                vassiliki_examinable_obj1.setVariable("obj_size", 40);

                                vassiliki_examinable_obj1.evaluate();

                                double ex_toaster=vassiliki_examinable_obj1.getVariable("examinable").getValue();

                                if(ex_toaster>10){

                                     Rfidviews[20].setText("Toaster");

                                }

                                }

                                else
                                    Rfidviews[20].setText(" ");

                            }
                        }
                    });

        }           

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T05:43:55.693

请改用 jfuzzylite。它是免费和开源的。它不需要第三方库，包含比jfuzzylogic更多的功能（参数优化除外），二进制大小小于300KB，在Android上完美运行。访问 www.fuzzylite.com。

# c++ - 将视频帧数据移动到 GPU 的最有效方法是什么？

> ID：15787898
> 
> 赞同：3
> 
> 时间：2013-04-03T12:53:15.037
> 
> 标签：c++, opencv, cuda

我目前正在我的 GPU (CUDA/C++) 上实现运动跟踪算法，到目前为止，我看到了非常强劲的加速。然而，正如人们可能预期的那样，主要瓶颈是帧（图像）数据从 CPU 到 GPU 的实际传输。

照原样，我正在使用 OpenCV 读取测试视频文件。然而，OpenCV 以压缩字节的形式返回帧`RRGGBB RRGGBB ...`，或者换句话说，每个像素都与 24 位边界对齐。这使我无法使用合并的内存访问，这会对 GPU 造成严重的性能损失。按原样，我只是使用一些预先生成*的*32 位对齐的测试数据（在表单中用零填充`RRGGBB00 RRGGBB00 ...`），但我现在想开始使用实际的视频数据。

这给我带来了一些重大的性能损失，所以我有两个主要问题：

1.  虽然我可以手动在 CPU 上对感兴趣的像素进行预处理，然后启动传输，但有没有什么方法可以快速将像素数据传输到 GPU，而是对齐到 32 位边界？（但是，我认为这与预处理具有相同的性能影响）

2.  我可以使用另一个库以不同的格式阅读视频吗？例如，我知道 SDL 表面包含在 32 位边界中，即使没有包含 Alpha 通道。

我们实现的最终目标是与用于机器人控制的摄像头实时交互，尽管现在我只想要一些可以有效解码我的测试视频的东西，以使用预定义的测试数据测试我们的特征检测和运动跟踪算法.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:11:21.367

我尝试编写一个简单的 CUDA 内核，使用共享内存将 24 位值填充到 32 位。请注意，这不是一个非常整洁的代码（仅适用于 1 个块，依赖于 int 为 32 位） - 小心使用。我尝试了具有共享内存原子的版本和没有 - 似乎正在工作。：

```
__global__ void pad(unsigned int *data, unsigned int* odata) {
__shared__ unsigned int array[WORK_SIZE];
unsigned int v, high, low;
const int index = (threadIdx.x * sizeof(unsigned int)) / 3;

array[threadIdx.x] = 0;
__syncthreads();

const int shl = threadIdx.x % 3;
const int shr = 3 - shl;

if (threadIdx.x
        < ((WORK_SIZE * 3) + sizeof(unsigned int) - 1)
                / sizeof(unsigned int)) {
    v = data[threadIdx.x];
    high = (v >> (shl * 8)) & ~0xFF;
    low = v << (shr * 8);
#if __CUDA_ARCH__ < 200
    array[index] = high;
}
__syncthreads();
if (threadIdx.x
        < ((WORK_SIZE * 3) + sizeof(unsigned int) - 1)
        / sizeof(unsigned int)) {
    array[index + 1] += low;
#else
    if (high)
        atomicOr(array + index, high);
    if (low)
        atomicOr(array + 1 + index, low);
#endif
}
__syncthreads();

// Do computations!
odata[threadIdx.x] = array[threadIdx.x] + 0xFF;
} 
```

# c# - 当前上下文中不存在 C# 错误

> ID：15787899
> 
> 赞同：-2
> 
> 时间：2013-04-03T12:53:20.327
> 
> 标签：c#

我的堆栈中的一个类中有以下类型的方法：

```
public void CalculateNewDate(DateTime newDate)
    {
      //datetimecalculations
    } 
```

我试图从堆栈中的不同类调用该方法，并传入一个 newDate 参数以获取 datetimecalculations 的结果。

在项目中的新类中，我这样称呼它：

```
Public void methodName(param,param)
{ foreach loop(param)
    {If item != null)
     DateTime newDate = item.Date.value;
      {
        item.item.date = CalculateNewDate(newDate);
      }
    }
} 
```

我收到“当前上下文中不存在名称“CalculateNewDate”的错误消息，其中包含生成方法存根的选项。

我确实有正确的命名空间使用。知道为什么我不能从其他班级调用此方法吗？

抱歉，由于我们公开发布的内容受到限制，我不能说得更具体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:56:59.043

C# 是一种面向对象的语言，主要的构建块是类。
如果不创建该类的实例，就不能调用在类中定义的方法。
（除非您将方法声明为静态，但这并不是真正的问题）

所以假设你有这个类

```
public class AClassOfMine
{
    public DateTime CalculateNewDate(DateTime newDate)
    {
      //datetimecalculations
      return calculatedDate;
    }
} 
```

如果要使用该方法，则需要该类的实例

```
public void methodName(param,param)
{ 
    foreach loop(param)
    {
        If (item != null)
        {
            DateTime newDate = item.Date.value;
            AClassOfMine anInstance = new AClassOfMine();
            item.item.date = anInstance.CalculateNewDate(newDate);
        }
    }
} 
```

当然，该方法`CalculateNewDate`应该返回一个新日期，因此您的方法签名应该相应更改。（返回日期）

# asp.net-mvc - 从单独的数据库中提取 MVC 3 中的相关数据

> ID：15787911
> 
> 赞同：1
> 
> 时间：2013-04-03T12:53:51.210
> 
> 标签：asp.net-mvc, database, multiple-databases, database-first

作为 MVC 和实体框架的新手，我在执行复杂的数据查询时遇到了很多问题。我正在使用 Database First 方法，我需要了解从单独的数据库中提取相关数据的最佳方法。我已经连接到数据库并创建了 edmx 文件以及现有数据库中的模型。我将简化问题示例：如果我有一张包含员工信息的表：

```
Employee_Information(EmployeeID, FullName, Address, Phone) 
```

然后我有第二个（在另一个数据库中）

```
Employee_Achievements(EmployeeID, Achievement, DateAchieved) 
```

如何将这两者联系在一起以在视图中提取员工的信息（姓名、地址等）？我最初的想法是进行连接，然后将其传递给视图：

```
var employee = from emp in db.EmployeeAchievements
join empInfo in emp_db.EmployeeInformation
emp.EmployeeID == empInfo.EmployeeID 
```

我遇到的问题是我已经在使用 ViewModel，其中有多个模型被传递给视图。我需要能够一次将多个员工的信息与视图中的类似内容联系起来：

```
@for (int i = 0; i < model.EmployeeAchievements.Count; i++)
{
    <tr valign="top">
        <td>
            <div class="editor-field">
                @Html.EditorFor(model => model.EmployeeAchievements[i].EmployeeID)
                @Html.ValidationMessageFor(model => model.EmployeeAchievements[i].EmployeeID)
            </div>
        </td>
// Display employee name next 
```

可能使用 ViewBag？或者有没有办法可以跨数据库关联外键？请记住，这是数据库优先，因此会生成 edmx 和模型文件。我还没有找到我在这里尝试做的任何好的例子。我会很感激任何帮助，如果需要可以提供更多细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:20:23.950

您可以创建一个类，该类具有您需要的所有字段：id、姓名、成就（如果您有一对多，则为它们的列表）、日期等等 - 您需要的一切。因此，例如，这个类被命名为`EmployeeAchievement`. 然后，您只需将当前的 ViewModel 修改为具有`List<EmployeeAchievement>`名为的类型的字段`EmplAch`。然后，您必须构建视图模型：

```
YourViewModel model = new ViewModel();
model.EmplAch = (from emp in db.EmployeeAchievements
                 join empInfo in emp_db.EmployeeInformation
                 emp.EmployeeID == empInfo.EmployeeID
                 select new EmployeeAchievement 
                 {
                     EmployeeID = emp.EmployeeID,
                     AchievementId = emp.id,
                     Date = emp.DateAchieved,
                     Achievement = emp.Achievement
                 }); 
```

因此，在您看来，您可以使用：

```
@for (int i = 0; i < model.EmplAch.Count; i++)
{
    <tr valign="top">
        <td>
            <div class="editor-field">
                @Html.EditorFor(model => model.EmplAch[i].EmployeeID)
                @Html.ValidationMessageFor(model => model.EmplAch[i].EmployeeID)
            </div>
        </td>
// Display employee name next
} 
```

# android - 为什么我使用相机传递结果 ResultInfo 失败？

> ID：15787915
> 
> 赞同：1
> 
> 时间：2013-04-03T12:54:05.890
> 
> 标签：android, camera, nullpointerexception, cursor, uri

我是 android 开发的菜鸟，我无法返回相机拍摄的图像。当我垂直/纵向拍照时，我的应用程序运行良好，但是当我水平/横向拍照时，应用程序崩溃并出现错误，显示失败交付结果 ResultInfo{who=null, request=1, result=-1, data=null } 。我已经调整了输出图片的宽度和高度，但没有成功。任何帮助是极大的赞赏。

我的代码

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode == RESULT_OK) {
        //check if we are returning from picture selection
        if (requestCode == PICKER) {

            //the returned picture URI
     //       Uri pickedUri = data.getData();

            //declare the bitmap
            Bitmap pic = null;
            //declare the path string
            String imgPath = "";

            //retrieve the string using media data
            String[] medData = { MediaStore.Images.Media.DATA };
            //query the data
            Cursor picCursor = managedQuery(outputFileUri, medData, null, null, null);
            if(picCursor!=null)
            {
                //get the path string
                int index = picCursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                picCursor.moveToFirst();
                imgPath = picCursor.getString(index);
            }
            else
                imgPath = outputFileUri.getPath();

            //if and else handle both choosing from gallery and from file manager

            //if we have a new URI attempt to decode the image bitmap
            if(outputFileUri!=null) {

                //set the width and height we want to use as maximum display
                int targetWidth = 600;
                int targetHeight = 400;

                //sample the incoming image to save on memory resources

                //create bitmap options to calculate and use sample size
                BitmapFactory.Options bmpOptions = new BitmapFactory.Options();

                //first decode image dimensions only - not the image bitmap itself
                bmpOptions.inJustDecodeBounds = true;
                BitmapFactory.decodeFile(imgPath, bmpOptions);

                //work out what the sample size should be

                //image width and height before sampling
                int currHeight = bmpOptions.outHeight;
                int currWidth = bmpOptions.outWidth;

                //variable to store new sample size
                int sampleSize = 1;

                //calculate the sample size if the existing size is larger than target size
                if (currHeight>targetHeight || currWidth>targetWidth) 
                {
                    //use either width or height
                    if (currWidth>currHeight)
                        sampleSize = Math.round((float)currHeight/(float)targetHeight);
                    else 
                        sampleSize = Math.round((float)currWidth/(float)targetWidth);
                }
                //use the new sample size
                bmpOptions.inSampleSize = sampleSize;

                //now decode the bitmap using sample options
                bmpOptions.inJustDecodeBounds = false;

                //get the file as a bitmap
                pic = BitmapFactory.decodeFile(imgPath, bmpOptions);

                if(currentPic<=10){                     
                    //pass bitmap to ImageAdapter to add to array
                    imgAdapt.addPic(pic);
                    currentPic++;
                }

                //redraw the gallery thumbnails to reflect the new addition
                picGallery.setAdapter(imgAdapt);

                //display the newly selected image at larger size
                picView.setImageBitmap(pic);
                //scale options
                picView.setScaleType(ImageView.ScaleType.FIT_CENTER);
            }
        }
    }
    //superclass method
    super.onActivityResult(requestCode, resultCode, data);
} 
```

LOGCAT

```
04-03 08:26:46.113: E/AndroidRuntime(15318): Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity {com.example.pickenssurvey/com.example.pickenssurvey.PictureGallery}: java.lang.NullPointerException
04-03 08:26:46.113: E/AndroidRuntime(15318):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3179)
04-03 08:26:46.113: E/AndroidRuntime(15318):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2534)
04-03 08:26:46.113: E/AndroidRuntime(15318):    ... 13 more
04-03 08:26:46.113: E/AndroidRuntime(15318): Caused by: java.lang.NullPointerException
04-03 08:26:46.113: E/AndroidRuntime(15318):    at android.content.ContentResolver.acquireProvider(ContentResolver.java:913)
04-03 08:26:46.113: E/AndroidRuntime(15318):    at android.content.ContentResolver.query(ContentResolver.java:305)
04-03 08:26:46.113: E/AndroidRuntime(15318):    at android.app.Activity.managedQuery(Activity.java:1742)
04-03 08:26:46.113: E/AndroidRuntime(15318):    at com.example.pickenssurvey.PictureGallery.onActivityResult(PictureGallery.java:241)
04-03 08:26:46.113: E/AndroidRuntime(15318):    at android.app.Activity.dispatchActivityResult(Activity.java:4723)
04-03 08:26:46.113: E/AndroidRuntime(15318):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3175) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:07:48.750

当您的屏幕方向发生变化时，您的 Activity 将被销毁并以新的方向重新创建。因此，在 Activity 生命周期内获得引用的任何变量都将不再引用任何内容，如果您随后尝试访问它们引用的对象而不重新分配它们的值，您将获得 NullPointerException。

onSaveInstanceState() 方法用于在配置更改之间保存临时数据。这将创建一个 Bundle，当 Activity 再次启动时传递给 onCreate()。

没有任何代码，我不知道这是否是您的问题，但值得一看。

请参阅[http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)了解更多信息（毫无疑问，我提供的信息比我提供的更准确）。

不是我从其他帖子复制的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:46:08.990

您想在您的应用程序中支持纵向和横向视图吗？如果不是，则可以通过防止方向更改来解决问题。将以下代码放入您的 onCreate 中：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

仍然可以更改相机意图中的方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-17T10:10:29.403

我之前遇到过这个问题，没有看到任何与我的原因相匹配的答案。

问题是：

1.  相机接管
2.  设备在相机模式下旋转
3.  拍照并确认
4.  图片被发送回活动，但您的活动/片段在屏幕方向更改时被销毁并重新创建，包括存储输出 URI 文件/字符串的变量

解决方案：

1.  将输出 URI 存储在`onSaveInstanceState`包含用于重新创建活动的包的方法中
2.  从 Bundle 中检索文件以`onRestoreInstanceState`获取活动和`onCreateView`片段

# osgi - 来自命令行的无头 OSGi 框架

> ID：15787916
> 
> 赞同：0
> 
> 时间：2013-04-03T12:54:09.533
> 
> 标签：osgi, equinox

目前我正在使用以下方法调用Equinox OSGi系统：

```
java -jar org.eclipse.osgi_3.2.0.jar -console 
```

当我可以退出时，框架会立即关闭，这是正常的。
但是，我想让框架无限期地运行。
这样做的最佳方法是什么？而且我知道我可以以编程方式启动 Equinox 框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:03:30.740

使用“java -jar org.eclipse.osgi_3.2.0.jar -console -Dosgi.noShutdown=true”。

不确定它是否适用于您的版本，但我肯定适用于 3.7.2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:39:56.260

只要确保框架有事可做......框架仅在没有非守护线程运行时才存在。如果您所有的捆绑包都在等待回调......注意可能会发生。因此，您至少需要一个在 UI 线程、Web 服务器等上等待的包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:44:38.340

您可以使用[Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/product-overview.html)将 Java 应用程序作为 Windows/Linux 服务运行

# unicode - 比较不同编码的文件

> ID：15787918
> 
> 赞同：3
> 
> 时间：2013-04-03T12:54:16.400
> 
> 标签：unicode, encoding, utf-8, diff, iso-8859-2

几个月前，我试图在 php5 和 utf8 编码上移动旧的基于 php4 和 iso8859-2 的系统。一切正常，但现在需要最终运行这个新版本，问题是过去几个月在旧系统中进行了一些更改，我需要在这个基于 php5 的系统上拥有实际版本。
我想将这两个系统与 KDiff3 进行比较，但是由于编码差异，他告诉我有 2300 个差异。
最好的解决方案是使用一些工具进行比较，而无需更改此编码。
有没有一种工具可以比较两个不同的编码文件，比如它们的编码相同？

抱歉，如果我的帖子令人困惑，但我已尝试尽可能简单地解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-02T17:06:37.453

如果您取消选中“比较文件大小”复选框并在会话设置中使用“基于规则的比较”，它在 Beyond Compare 4.0 中有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:30:51.097

你没有。您将旧编码升级到 UTF-8，然后进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:19:20.503

我们的产品[Beyond Compare](http://www.scootersoftware.com)可以比较具有不同字符编码的文件，并且会忽略这些差异。它甚至会自动检测不同的编码，因此它应该可以开箱即用。

# javascript - 将像素添加到动态 iframe 高度

> ID：15787922
> 
> 赞同：0
> 
> 时间：2013-04-03T12:54:32.627
> 
> 标签：javascript, iframe, height

我正在尝试将固定数量的像素添加到动态 iframe 高度。如何将静态像素量添加到 iframe 高度？我正在使用这个 javascript 根据其内容调整 iframe 高度：

```
 $(document).ready(function()
{
    // Set specific variable to represent all iframe tags.
    var iFrames = document.getElementsByTagName('iframe');

    // Resize heights.
    function iResize()
    {
        // Iterate through all iframes in the page.
        for (var i = 0, j = iFrames.length; i < j; i++)
        {
            // Set inline style to equal the body height of the iframed content.
            iFrames[i].style.height = iFrames[i].contentWindow.document.body.offsetHeight + 'px';
        }
    }

    // Check if browser is Safari or Opera.
    if ($.browser.safari || $.browser.opera)
    {
        // Start timer when loaded.
        $('iframe').load(function()
            {
                setTimeout(iResize, 0);
            }
        );

        // Safari and Opera need a kick-start.
        for (var i = 0, j = iFrames.length; i < j; i++)
        {
            var iSource = iFrames[i].src;
            iFrames[i].src = '';
            iFrames[i].src = iSource;
        }
    }
    else
    {
        // For other good browsers.
        $('iframe').load(function()
            {
                // Set inline style to equal the body height of the iframed content.
                this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
            }
        );

    }
} 
```

);

例如，当我在“px”之前添加数字“100”时，它只会在当前 iframe 高度旁边放置 100。因此，如果我的 iframe 高度为 200，那么如果我使用它，高度将为 200100：

```
iFrames[i].style.height = iFrames[i].contentWindow.document.body.offsetHeight + '100px'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:03:51.317

> 例如，当我在“px”之前添加数字“100”时，它只会在当前 iframe 高度旁边放置 100。因此，如果我的 iframe 高度为 200，则高度将为 200100

由于`+`是字符串连接的运算符以及普通的“加号”运算符，因此当您已经在字符串上下文中时会发生这种情况。

尝试使用`parseInt`on`iFrames[i].contentWindow.document.body.offsetHeight`值将其转换为数字，以便以下`+` *添加*100 而不是连接它：

```
iFrames[i].style.height =
  ( parseInt(iFrames[i].contentWindow.document.body.offsetHeight) + 100 ) + 'px'; 
```

# android - Android 开发者控制台 - 删除评级

> ID：15787924
> 
> 赞同：0
> 
> 时间：2013-04-03T12:54:39.000
> 
> 标签：android

我最近在 Play 商店中发布了一个应用程序，我有一条评论包含一些不好的语言（以及最低评分）。我怎样才能删除它？我没有看到任何报告审查按钮...

我不确定我是否在正确的站点中，如果是这样，请指导我到更好的站点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T12:56:05.220

您不能删除用户评论或评分等任何内容。您可能希望向 Google 报告评论（使用联系表）。但为了快速反应（如果有的话），我不会过多地交叉手指

# javascript - 如何使用 JavaScript 在样式表中获取有关图像的信息

> ID：15787928
> 
> 赞同：0
> 
> 时间：2013-04-03T12:54:50.973
> 
> 标签：javascript, image, url, stylesheet

我正在使用 WorldSpace Sync 扫描我公司的网站以查找品牌违规行为。我想获取有关样式表中使用的任何图像的信息（宽度、高度等）。

`//*[@rel="stylesheet"]`WorldSpace 允许用户在从 XPath（在我的例子中）返回的节点上运行简单的 JavaScript 代码。我可以使用以下命令获取每个图像的 URL：

```
function evaluateNodes( nodes, optionValue) {
    var viols = [];
    var violation = false;
    var relatedNodes = [];
    var additionalInfo = "";
    var reEx = new RegExp( "(url[(].*?[)]).*;", "gi");
    try {
        debugOut( "TRYING: "+nodes.length);
        for ( var i = 0, _len = nodes.length; i < _len; i++) {
            for ( var j = 0, _ilen = nodes[i].ownerDocument.styleSheets.length; j < _ilen; j++) {
                var styleSheet = nodes[i].ownerDocument.styleSheets[j];
                additionalInfo = "";
                violation = false;
                for ( var k = 0, _iilen = styleSheet.cssRules.length; k < _iilen; k++) {
                    var cssRule = styleSheet.cssRules[k];
                    switch( cssRule.type) {
                        case 1:
                            varText = cssRule.cssText;
                            while (matches = reEx.exec( varText )) {
                                violation = true;
                                additionalInfo+=" IMAGE: "+matches[1]+"\n"
                            }
                            break;
                        case 3:
                            // import
                            break;
                        default:
                            break;
                    }

                }
                if ( violation) {
                    viols.push( {
                        node: styleSheet.ownerNode
                        ,additionalInfo: additionalInfo
                        ,relatedNodes: relatedNodes
                    });
                }
            }
        }
    } catch( ee) {
        debugOut( "EXCEPTION:"+ee);
    }
    return viols;
} 
```

以下是上述的一些示例输出：

```
IMAGE: url("/images/lightbox/tile.png") 
IMAGE: url("/images/lightbox/close-lightbox.jpg") 
IMAGE: url("/images/lightbox/tile.png") 
IMAGE: url("/images/news/lightbox-image-header.jpg") 
IMAGE: url("/images/lightbox/close-lightbox.jpg") 
```

我不是 JavaScript 人，所以我不知道现在我有这些 URL 该怎么办。似乎所有[与图像宽度](https://stackoverflow.com/questions/9576806/getting-the-width-from-an-scaled-image)使用有关的问题`jQuery`，但我认为我不能在 WorldSpace 中使用它。

[小提琴](http://jsfiddle.net/)将是理想的，但任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:59:56.603

使用 javascript 检索图像大小并非万无一失。我可以硬编码与原始大小不同的图像大小并欺骗您的系统。如果要从 CSS 文件中检索图像大小，则必须将文件下载到服务器并以这种方式检查其大小。

`getimagesize();`如果 PHP 是您的游戏，请尝试使用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:11:23.083

尝试使用`ImageInfo`. 您可以在此处找到示例和源文件；[http://blog.nihilogic.dk/2008/08/imageinfo-reading-image-metadata-with.html](http://blog.nihilogic.dk/2008/08/imageinfo-reading-image-metadata-with.html)

演示链接在这里；[http://www.nihilogic.dk/labs/imageinfo/](http://www.nihilogic.dk/labs/imageinfo/)

您可以获得大量数据，例如；

```
format: JPEG
version: 
width: 400
height: 300
bpp: 24
alpha: false
mimeType: image/jpeg
byteSize: 32641
exif:   ImageDescription :           
    Make : NIKON
    Model : E4600
    Orientation : 1
    XResolution : 300
    YResolution : 300
    ResolutionUnit : 2
    Software : Adobe Photoshop CS3 Windows
    DateTime : 2008:05:08 14:54:46
    YCbCrPositioning : 2
    ExifIFDPointer : 236
    ExposureTime : 0.005747126436781609
    FNumber : 8.2
    ExposureProgram : Normal program
    ISOSpeedRatings : 50
    ExifVersion : 0220
    DateTimeOriginal : 2006:06:13 15:44:45
    DateTimeDigitized : 2006:06:13 15:44:45
    ComponentsConfiguration : YCbCr
    CompressedBitsPerPixel : 2
    ExposureBias : 0
    MaxApertureValue : 3
    MeteringMode : Pattern
    LightSource : Flash
    Flash : Flash did not fire, compulsory flash mode
    FocalLength : 17.1
    UserComment : [125 values]
    FlashpixVersion : 0100
    ColorSpace : 1
    PixelXDimension : 400
    PixelYDimension : 300
    InteroperabilityIFDPointer : 872
    FileSource : DSC
    SceneType : Directly photographed
    CustomRendered : Normal process
    ExposureMode : 0
    WhiteBalance : Manual white balance
    DigitalZoomRation : 0
    FocalLengthIn35mmFilm : 102
    SceneCaptureType : Standard
    GainControl : None
    Contrast : Normal
    Saturation : Normal
    Sharpness : Normal
    SubjectDistanceRange : Unknown 
```

# python - 在python字符串中插入标签

> ID：15787941
> 
> 赞同：0
> 
> 时间：2013-04-03T12:55:34.357
> 
> 标签：python, string, search

我想在 python 中突出显示搜索结果：

```
 search_term = 'highlighted'
    text_string = 'A very long highlighted text'  
    DO THE MAGIC  
    print text_string 
```

输出：

```
 A very long <span class="highlight">highlighted</span> text 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T12:57:39.807

```
new_string = text_string.replace(
    search_term,
    "<span class='highlighted'>%s</span>" % search_term) 
```

在这种情况下（HTML 属性），无论您使用单引号：`'`还是双引号：`"`，我都选择了单引号，因为它看起来更清晰一些。如果你想要双倍，你需要逃避它：`"<span class=\"highlighted\">"`等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:58:21.883

```
search_term = 'highlighted'
text_string = 'A very long highlighted text'
pre_tag = '<span class="highlight">'
post_tag = '</span>'

# magic, not so magic
text_string = text_string.lower().replace(
    search_term, 
    pre_tag + search_term + post_tag
) 
```

当然，如果您打算完全匹配*用户*搜索的同一个词。

# ios - 在 iOS 上更改有效的自动续订订阅

> ID：15787945
> 
> 赞同：4
> 
> 时间：2013-04-03T12:55:46.047
> 
> 标签：ios, app-store, in-app-purchase

是否可以在 iOS 上的活动自动更新订阅之间切换？

例如：我在 iTunes Connect 中配置了一个自动更新订阅“家庭”

*   套餐 A（1 周）
*   套餐B（1个月）
*   套餐C（3个月）

用户首次订阅套餐 A，每周计费。一切正常。让我们假设用户在某一时刻决定升级到包 B。这可能在 iOS 应用程序中实现吗？

据我的测试显示，这是不可能的。沙盒应用商店的响应是我已经订阅了这个包，并为包 B 交易返回了一个取消错误，但同时返回了一个购买的事件，其中包含来自包 A（原始）的最新收据，这基本上意味着我一直给这个用户包 A 的内容，他/她永远不会升级。

# php - Paypal 沙箱中的多币种错误

> ID：15787946
> 
> 赞同：0
> 
> 时间：2013-04-03T12:55:48.267
> 
> 标签：php, paypal, paypal-sandbox

我正在我的 php 站点中集成 Paypal checkout Api。但每次订单失败并显示多种货币错误。

支付场景如下：

`Seller a/c is USD`

`Buyer can pay in 3 currencies GBP, EUR, USD`

每次当买家访问该网站时，我的应用程序都会检测他们的国家并使用相关货币初始化 PAYPAY。

请提出一些解决方案

# c# - 转换 IEnumerable 的更好方法 到用户类型

> ID：15787953
> 
> 赞同：10
> 
> 时间：2013-04-03T12:56:05.267
> 
> 标签：c#, .net, linq

我有一个自定义集合类型，定义如下：

```
public abstract class RigCollectionBase<T> : Collection<T>, IEnumerable<T>, INotifyPropertyChanged, IBindingList, ICancelAddNew where T : BusinessObjectBase, new() 
```

注意：这是基类，有 20 个左右的子类是这样实现的：

```
public class MyCollection : RigCollectionBase<MyObject> 
```

我们在代码中使用了很多 Linq，您可能知道，Linq 函数返回`IEnumerable<T>`. 我正在寻找的是一种`MyCollection`从`IEumberable<MyObject>`. 不允许投射，我收到异常“无法从...投射”

这是我想出的答案，它*确实*有效，但它似乎有点笨重而且......过于复杂。也许不是，但我想我会把它拿出来看看是否有更好的方法。

```
public static class Extension
{
    /// <summary>
    /// Turn your IEnumerable into a RigCollection
    /// </summary>
    /// <typeparam name="T">The Collection type</typeparam>
    /// <typeparam name="U">The Type of the object in the collection</typeparam>
    /// <param name="col"></param>
    /// <returns></returns>
    public static T MakeRigCollection<T, U> (this IEnumerable<U> col) where T : RigCollectionBase<U>, new() where U : BusinessObjectBase, new()
    {
        T retCol = new T();

        foreach (U myObj in col)
            retCol.Add(myObj);

        return retCol;
    }
} 
```

我想，我真正在寻找的是这个。有没有办法实现基类，以便我可以使用简单的强制转换从 IEnumerable 进入 MyCollection ...

```
var LinqResult = oldCol.Where(a=> someCondition);
MyCollection newCol = (MyCollection)LinqResult; 
```

不，上面的代码不起作用，我实际上不是 100% 确定为什么会这样……但事实并非如此。感觉就像有一些我没有看到的非常明显的步骤......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:04:07.163

您的方法`MakeRigCollection`基本上是正确的方法。这是一个使用起来稍微冗长但实现起来更简单的变体：

```
TCollection MakeRigCollectionSimple<TCollection, TItem>(
    this IEnumerable<TItem> items, TCollection collection)
    where TCollection : ICollection<TItem>
{
        foreach (var myObj in items)
            collection.Add(myObj);
        return collection;
} 
```

我希望我做对了。你像这样使用它：

```
MakeRigCollectionSimple(items, new MyCollection()); 
```

或者

```
items.MakeRigCollectionSimple(new MyCollection()); 
```

现在你有第二个参数要填写，但作为交换，我们能够摆脱所有疯狂的泛型东西。只剩下简单的泛型。并且类型推断完全发挥作用。此外，这适用于*所有*集合类型，而不仅仅是您的 RigCollections。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:04:40.860

虽然您的集合确实实现了，但由于继承的工作原理`IEnumerable<T>`，您不能将简单的转换为您的特定集合。`IEnumerable<T>`

这就是为什么有内置的 LINQ 扩展方法，例如`IEnumerable<T>.ToList()`，它完全按照您编写的方式工作。

唯一的区别是它提供了一个作为参数`List<T>`的公共构造函数。`IEnumerable<T>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:03:29.020

添加一个`MyCollection`接受, 的构造函数`IEnumerable<T>`，然后执行以下操作：

```
var newCol = new MyCollection(oldCol.Where(a=> someCondition)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T13:03:38.457

您不能强制转换，因为 LINQ 方法不会更改您的原始集合。他们返回新的。新的不是您的集合的实例，而是特定于 LINQ 的集合的实例，具体取决于您使用的方法。原因是 LINQ 方法的延迟性质。

你有几种可能性：

1.  您可以在您的类中创建显式或隐式转换运算符，但您需要在每个子类中实现它。
2.  您可以创建一个构造函数，该构造函数接受`IEnumerable<T>`并直接从中初始化您的集合 - 类似于 on 上的构造函数`List<T>`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T13:21:46.270

这有点复杂，但通常您可以想象，LINQ 会枚举您的集合（无论类型如何，重要的是它可以转换为[`IQueryable`](http://msdn.microsoft.com/en-us/library/system.linq.iqueryable.aspx)）并将所有匹配的对象引用添加到新列表中。这取决于使用[`IQueryProvider`](http://msdn.microsoft.com/en-us/library/system.linq.iqueryprovider.aspx)哪个容器对象来收集查询结果。所以最明显的选择是[创建一个自定义`IQueryProvider`](http://blogs.msdn.com/b/mattwar/archive/2008/11/18/linq-links.aspx). 每个尝试过的人都知道这会带来多大的痛苦......

但是`IQueryProvider`通常返回一个[`IEnumerable`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable%28v=vs.110%29.aspx)，这导致两个选项：

1.  使用 LINQ 的[`ToList`](http://msdn.microsoft.com/en-us/library/vstudio/bb342261.aspx)扩展方法，创建[`System.Collections.Generic.List`](http://msdn.microsoft.com/en-us/library/vstudio/6sh2ey19.aspx)并继续使用简单列表作为容器，或者
2.  添加一个构造函数，接受一个`IEnumerable`.

两种方式都比您想象的要相似得多，因为`ToList`以某种方式实现如下：

```
public static List<T> ToList<T>(this IEnumerable<T> enumerable)
{
    return new List<T>(enumerable);
} 
```

因此，它只是将所有艰苦的工作委托[给`List<T>`](http://msdn.microsoft.com/en-us/library/vstudio/fkbw11z0.aspx).

大多数集合都支持按`IEnumerable`参数构建。我其实不知道为什么[`System.Collections.ObjectModel.Collection<T>`](http://msdn.microsoft.com/en-us/library/ms132397.aspx)不支持`IEnumerable`，但是[`IList`](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)。但是，这使您可以使用两个额外的构造函数来实现集合基类，以简化查询结果：

```
MyRigCollectionBase(IEnumerable<T> enumerable)
    : this (enumerable.ToList())
{
    // Delegates to constructor below
}

MyRigCollectionBase(IList<T> list)
    : base (list)
{
    // Delegates to constructor of Collection<T>.
} 
```

这并不能真正解决您的过载问题，但它使您有机会从查询中构建自定义集合：

```
var coll = new MyCollection(oldColl.Where(x => x.AddToList)); 
```

它让客户可以使用不同的方式来管理他们的查询结果。

这也使您能够提供自定义扩展：¹

```
public class MyCollection : MyRigCollectionBase<MyObject>
{
    public static ToMyCollection(this IEnumerable<MyObject> enumerable)
    {
        return new MyCollection(enumerable);   // Calls our previously declared constructor.
    }
} 
```

现在您可以像这样查询：

```
var coll = oldColl.Where(x => x.AddToList).ToMyCollection(); 
```

您的集合的每个专业化都可以在它的声明范围内定义它自己的扩展。每个返回 an 的查询`IEnumerable<MyObject>`都能够将其结果转换为`MyCollection`.

¹ ^([我不是 100% 确定是否`this IEnumerable<MyObject>`可以作为参数使用，并且可以调用扩展以返回`IEnumerable<MyObject>`. 一些确认会很好！])

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T13:03:28.277

您绝对不能只`IEnumerable<T>`转换为您的自定义类型，因为编译器永远不会知道如何进行此转换。除非你告诉它如何使用[转换运算符重载](http://msdn.microsoft.com/en-us/library/85w54y0a.aspx)。

# javascript - 淘汰赛：在输入字段中解码 html 实体

> ID：15787958
> 
> 赞同：0
> 
> 时间：2013-04-03T12:56:10.983
> 
> 标签：javascript, knockout.js, html-entities

我有一个允许用户提交和保存 HTML 的网络应用程序。用户在几个不同的字段中输入他/她想要使用的 html。有些是文本输入元素，有些是 textarea 元素。当用户提交他们的标记时，我将特殊字符转换为 html 实体。

当用户回来编辑他们提交的 html 时，我从数据库中获取他们的条目并使用敲除预填充表单。为了在他们键入时显示 html，我对绑定到我的视图模型的任何数据调用一个函数，以删除将任何实体更改回与号和括号以及所有有趣的东西。

```
var viewModel = {
property : ko.observable(decode_entities(varContainingUserInput)),
....
} 
```

我知道当绑定到大多数 html 元素（如 div 或 p 标签）时，您可以在打印实体之前使用敲除 html 绑定来解码实体。这减轻了调用 decode_entities 函数的需要。但是，这不适用于输入字段。

我想摆脱 decode_entities 函数，或者将它滚动到淘汰赛中，这样它就不会分散在我的代码中。我想通过任何额外的工作来敲除我绑定中的实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:00:32.117

您可以扩展 observable ( [http://knockoutjs.com/documentation/extenders.html](http://knockoutjs.com/documentation/extenders.html) )，特别查看数字扩展器。

您也可以使用自定义绑定，但我认为扩展 observable 将是这种情况下的更好解决方案。

# h.264 - 使用 Gstreamer 从摄像头捕获 h.264 流

> ID：15787967
> 
> 赞同：12
> 
> 时间：2013-04-03T12:56:24.037
> 
> 标签：h.264, gstreamer, v4l2

`/dev/video0`我正在尝试使用element从本地安装的 Logitech C920 摄像头捕获 H264 流`Gstreamer 1.0` `v4l2src`。

`v4l2-ctl --list-formats`表明相机能够提供 H264 视频格式：

```
# v4l2-ctl --list-formats
ioctl: VIDIOC_ENUM_FMT
        ...

        Index       : 1
        Type        : Video Capture
        Pixel Format: 'H264' (compressed)
        Name        : H.264

        ... 
```

但管道

`# gst-launch-1.0 -vvv v4l2src device=/dev/video0 ! video/x-h264, width=800, height=448, framerate=30/1 ! fakesink`

一直给我`not-negotiated (-4)`错误：

```
/GstPipeline:pipeline0/GstV4l2Src:v4l2src0.GstPad:src: caps = video/x-h264, width=(int)800, height=(int)448, interlace-mode=(string)progressive, pixel-aspect-ratio=(fraction)1/1, framerate=(fraction)30/1
/GstPipeline:pipeline0/GstCapsFilter:capsfilter0.GstPad:src: caps = video/x-h264, width=(int)800, height=(int)448, interlace-mode=(string)progressive, pixel-aspect-ratio=(fraction)1/1, framerate=(fraction)30/1
/GstPipeline:pipeline0/GstFakeSink:fakesink0.GstPad:sink: caps = video/x-h264, width=(int)800, height=(int)448, interlace-mode=(string)progressive, pixel-aspect-ratio=(fraction)1/1, framerate=(fraction)30/1
/GstPipeline:pipeline0/GstCapsFilter:capsfilter0.GstPad:sink: caps = video/x-h264, width=(int)800, height=(int)448, interlace-mode=(string)progressive, pixel-aspect-ratio=(fraction)1/1, framerate=(fraction)30/1
ERROR: from element /GstPipeline:pipeline0/GstV4l2Src:v4l2src0: Internal data flow error.
Additional debug info:
gstbasesrc.c(2809): gst_base_src_loop (): /GstPipeline:pipeline0/GstV4l2Src:v4l2src0:
streaming task paused, reason not-negotiated (-4)
Execution ended after 67687169 ns. 
```

任何帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T11:54:39.717

gstreamer 是否满足您的需求？我在 H264 模式下的 Logitech C920 和 gstreamer 也有很多问题。但我设法将 VLC 用作 RTSP 服务器以将 C920 与 H264 一起使用：

```
$ cvlc -v v4l2:///dev/video0:chroma="H264":width=1024:height=570:fps=30 \
       --sout="#rtp{sdp=rtsp://:8554/live}" 
```

然后我可以用另一个 VLC 连接到 URI rtsp://localhost:8554/live

如果 GStreamer 对您来说是强制性的，我只设法将它与您可以在此处找到的捕获实用程序一起使用：[https](https://github.com/csete/bonecam) ://github.com/csete/bonecam - 目录“捕获”

你必须编译它，但如果你有一些编程技能，它应该很容易，因为只有一个 C 文件和一个脚本可以提供帮助。只需将“主机”作为参数传递给脚本：

```
# Get the bonecam/capture content or git clone the directory, and then
$ cd bonecam/capture
$ ./build host 
```

您可以使用类似这样的“捕获”实用程序：

```
$ v4l2-ctl -d /dev/video0 --set-fmt-video=width=1024,height=570,pixelformat=1
$ v4l2-ctl -d /dev/video0 --set-parm=30
$ ./bonecam/capture/capture -d /dev/video0 -c 100000 -o | \
      gst-launch -e filesrc location=/dev/fd/0 ! legacyh264parse ! rtph264pay ! udpsink host=10.0.0.42 port=5000 
```

如果您不喜欢指定要获取的帧数（“-c”参数和“capture”），您可以在此处找到此实用程序的一个分支：[https ://github.com/DeLaGuardo/bonecam](https://github.com/DeLaGuardo/bonecam)

我知道有一个分类为“坏”的插件，称为 gstreamer 0.10 的 uvch264，它应该适用于 C920。但我不知道 gstreamer 1.0，我无法测试它。

**升级版：**

不要忘记添加`--rtsp-timeout=-1`到`cvlc`命令行

```
$ cvlc -v v4l2:///dev/video0:chroma="H264":width=1024:height=570:fps=30 \
       --sout="#rtp{sdp=rtsp://:8554/live}" --rtsp-timeout=-1 
```

如果没有此选项，默认情况下流式传输仅持续 60 秒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T09:44:00.460

我一直在尝试做同样的事情，但我得到了同样的错误。我相信我使用的是 GStreamer 1.0.6。

我发现，甚至可能感谢 Fergal Butler 的回答，是以下页面：

[http://kakaroto.homelinux.net/2012/09/uvc-h264-encoding-cameras-support-in-gstreamer/](http://kakaroto.homelinux.net/2012/09/uvc-h264-encoding-cameras-support-in-gstreamer/)

在这里，Youness Alaoui 描述了他制作的 uvch264_src 元素，用于为 GStreamer 带来 H264 摄像头支持。

他在他的文章中将 GStreamer 1.0 的移植描述为待处理。所以在过去的一周里，我一直在研究这个。事实证明，它现在*已*被移植到 GStreamer 1.0，但仅限于开发人员版本（版本 1.1.2）。

您可以在此处获取 1.1.2 版本：

[http://gstreamer.freedesktop.org/src/](http://gstreamer.freedesktop.org/src/)

它现在被称为“uv​​ch264src”，它是 gst-plugins-bad 的一部分。我认为它也存在于 1.1.1 版本中，但我还没有真正研究过。

我安装它有点困难，我认为主要是由于与安装在我的 PC 上的 GST 1.0 软件包发生冲突（所以我自己的错）。但请注意，它依赖于 libgudev-1.0-dev 和 libusb-1.0-0-dev，因此请先安装这些软件包 - 我花了一段时间才弄清楚这是我缺少的那两个。

这是我要使用的使用uvch264的管道：

`gst-launch-1.0 uvch264src device=/dev/video0 name=src auto-start=true src.vfsrc ! video/x-raw, format=YUY2, width=160, height=90, framerate=5/1 ! xvimagesink src.vidsrc ! queue ! video/x-h264, width=800, height=448, framerate=30/1 ! h264parse ! avdec_h264 ! xvimagesink`

如果您不想使用预览视频（来自 vfsrc pad），只需将 src.vfsrc 直接连接到 fakesink 即可。我还应该提到，即使这条管道对我有用，我也会收到很多关于“在段事件之前获取数据流”的警告。所以很明显我做的不对，但我不确定是什么。

无论如何，在完全安装和运行 1.1.2 和 uvch264src 之后，我决定再次快速尝试 v4l2src。事实证明，v4l2src 毕竟正确支持 H264：/。（见简短回答。）

* * *

# 简短的回答：

因此，对您的问题的简短回答是，如果您乐于从源代码安装 1.1.2，您将能够以您一直在尝试的方式完全按照您的意愿进行操作。你不应该需要uvch264src。我已经测试了你的管道，它在我的安装中运行良好。我也试过这个简单的管道，在屏幕上显示视频，它对我来说也很好：

`gst-launch-1.0 -e v4l2src device=/dev/video0 ! video/x-h264, width=800, height=448, framerate=30/1 ! avdec_h264 ! xvimagesink sync=false`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-05T02:34:21.810

我还有一台罗技 C920 摄像头，并使用以下管道从摄像头录制 H.264 视频：

```
gst-launch-1.0 v4l2src device=/dev/video0 ! video/x-h264,width=1280,height=720,framerate=30/1 ! mpegtsmux ! filesink location=output.ts 
```

这要求相机生成 H.264 数据，然后我将其复用到[MPEG 传输流](https://en.wikipedia.org/wiki/MPEG_transport_stream)容器中，并写入磁盘。我可以使用 Totem 成功播放生成的文件。

上述管道以 720p 记录。如果您将请求的格式更改为 ，相机还可以以 1080p 录制`width=1920,height=1080`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T17:06:49.227

我不相信 v4l2src 目前支持 h264。看这里：

[http://www.oz9aec.net/index.php/gstreamer/473-using-the-logitech-c920-webcam-with-gstreamer](http://www.oz9aec.net/index.php/gstreamer/473-using-the-logitech-c920-webcam-with-gstreamer)

和这里：

[http://kakaroto.homelinux.net/2012/09/uvc-h264-encoding-cameras-support-in-gstreamer/](http://kakaroto.homelinux.net/2012/09/uvc-h264-encoding-cameras-support-in-gstreamer/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-21T12:32:32.913

尝试使用 videoconvert 自动将视频转换为视频接收器可以理解的格式

```
gst-launch-1.0 -vvv v4l2src device=/dev/video0 ! videoconvert ! ... 
```

# c++ - 将一个坐标系的旋转转换为另一个坐标系所需的矩阵

> ID：15787969
> 
> 赞同：2
> 
> 时间：2013-04-03T12:56:28.870
> 
> 标签：c++, matrix, rotation, collada

我在“自制”GL 坐标系中有旋转矩阵，并希望将它们应用于 collada 坐标系。

我知道我需要一个矩阵来乘以 GL 旋转以将它们转换为 collada 坐标系（其中 Z 实际上是向上的）。坐标系如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/eexc2.png)

我需要从左系统到右系统的转换..为了更多理解：
ColladaMatrix=GLRotMatrix*NeededMatrix

有人知道我需要的矩阵吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:20:17.243

我认为你需要乘以**两个矩阵**来改变你的旋转矩阵的基础。

事实上，ColladaMatrix 是这样的（[col] 表示 collada 坐标，[gl] 表示 GL 坐标）

y[col] = R[col,col] x[col]

但是如果要使用 GL 矩阵，则需要将 x[col] 转换为 GL 坐标，然后在 GL 基础上应用旋转，最后返回 Collada 坐标。所以

y[col] = B[gl->col] R[gl,gl] B[col->gl] x[col]

所以，

> R[col,col] = B[gl->col] R[gl,gl] B[col->gl]

这里 B[gl->col] 和 B[col->gl] 是一样的，所以

```
 [1 0 0                  [1 0 0
MatrixCollada  =   0 0 1   * MatrixGL *    0 0 1
                   0 1 0]                  0 1 0] 
```

希望能帮助到你！

**备注**：对角化矩阵时也会发生同样的情况（实际上是基的变化），您需要对要对角化的矩阵进行预乘和后乘。

编辑：我为矩阵编写了两个坐标系，因为通常，矩阵可以将向量从坐标系发送到另一个坐标系。这使它更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:20:07.993

我明白了，我误读了您问题中有关旋转矩阵的部分。我以为您要的是旋转矩阵，它将 GL 坐标转换为 COLLODA 坐标。

这些是将左系统（您标记为“GL”的系统）转换为右系统（“COLLADA”）的矩阵：

```
1 0 0
0 0 1
0 1 0 
```

以另一种方式转换您将使用相同的矩阵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:11:15.597

DirectX 和许多库和游戏引擎（不是 OpenGL）使用左手规则系统，几乎所有你会发现的数学模型和设备都使用右手规则，这被称为向量的数学叉积。

这就是为什么不可能将一个系统转换为另一个抛出简单旋转的原因。

你必须选择一个坐标系来工作，尝试使用最常用的，然后做一些有用的函数来转换一个坐标系到另一个坐标系。

作为经验，我可以告诉你四元数是避免这个问题的最好方法，选择正确的矩阵来计算命运的手系统。

如果你有旋转问题（如果你使用超过 90° 的俯仰，你会遇到），搜索云台锁，然后使用四元数，这将节省大量时间和精力。

然后看这个：[Euler to Quaternion](http://en.wikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles)，并通过 -sin(x) 更改 sin(x) 以在一个坐标系统之间切换到另一个坐标系统。

最好的祝福。

# ios - UISLider 以正确的方式改变 UILabel 的值

> ID：15787975
> 
> 赞同：0
> 
> 时间：2013-04-03T12:56:45.063
> 
> 标签：ios, objective-c, cocoa-touch, uilabel, uislider

所以我有这个代码来改变`UILabel`基于值的值`UISlider`：

```
- (void)slider03Changed:(UISlider *)slider{

    int value = 10;

    if (slider.value >= 0.1){
        value = 20;
    }
    if (slider.value >= 0.2){
        value = 30;
    }
    if (slider.value >= 0.3){
        value = 40;
    }
    if (slider.value >= 0.4){
        value = 50;
    }
    if (slider.value >= 0.5){
        value = 60;
    }
    if (slider.value >= 0.6){
        value = 70;
    }
    if (slider.value >= 0.7){
        value = 80;
    }
    if (slider.value >= 0.8){
        value = 90;
    }
    if (slider.value >= 0.9){
        value = 100;
    }

    lbl01.text = [NSString stringWithFormat:@"%u hours", value];
} 
```

一切正常，但我担心这里的代码质量。

这段代码相当长。有没有办法以某种方式优化它？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:59:32.063

使用 for 循环：

```
- (void)slider03Changed:(UISlider *)slider{

    int value = 10;

    for (float i = 0.9; i > 0; i-=0.1)
    {
        if (slider.value >= i)
        {
           value = (i*100)+10; 
           break;
        }
    }

    lbl01.text = [NSString stringWithFormat:@"%u hours", value];
} 
```

使用的公式是：

```
(i*100)+10 
```

例如：

```
(0.6*100)+10 = 70
(0.7*100)+10 = 80
and so on... 
```

**更新：**

您可以通过首先检查这种情况来进一步优化它`slider.value >= 0.9`。

为什么 ？

因为如果它满足具有更高价值的情况，那么您的`if`陈述的其余部分将毫无用处。在我编写的代码中，只要满足 的值最多的条件`slider.value`，我们就设置`value`变量的值并跳出循环。这将阻止您的代码评估不必要的情况。

例如：

假设你的`slider.value`= **0.95**

这将在您的代码中发生：

```
(slider.value >= 0.1) ----> true ----> then ---> set value = 20
(slider.value >= 0.2) ----> true ----> then ---> set value = 30
(slider.value >= 0.3) ----> true ----> then ---> set value = 40
(slider.value >= 0.4) ----> true ----> then ---> set value = 50
(slider.value >= 0.5) ----> true ----> then ---> set value = 60
(slider.value >= 0.6) ----> true ----> then ---> set value = 70
(slider.value >= 0.7) ----> true ----> then ---> set value = 80
(slider.value >= 0.8) ----> true ----> then ---> set value = 90
(slider.value >= 0.9) ----> true ----> then ---> set value = 100 
```

用我的代码：

```
(slider.value >= 0.9) ----> true ----> then ---> set value = 100 and break out of the loop 
```

如您所见，使用我的代码，它只评估 1 个案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:06:56.337

每当您需要许多`if`' 并且您知道只会执行一个时，请使用`if-else ladder`.

在这种情况下，您可以使用：（*这不是最好的方法*）

```
if (slider.value >= 0.9){
    value = 100;
}
else if (slider.value >= 0.8){
    value = 90;
}
else .... 
```

* * *

现在要自动化/制作更短的代码，您可以将其用作：

```
- (void)slider03Changed:(UISlider *)slider{
    lbl01.text = [NSString stringWithFormat:@"%.0f hours", round(value*10-.5)*10+10]);];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:31:55.850

一旦像这样尝试，我认为这里不需要每次都使用循环，

```
- (void)slider03Changed:(UISlider *)slider{

    float value = slider.value;

        int k=((int)(value*10)*10)+10;
        if(k==110){
            k=100;
        }
   lbl01.text = [NSString stringWithFormat:@"%d hours", value];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:17:20.370

首先，您可能会考虑更改 UISlider 以使最小值和最大值与您想要的输出相匹配——即 min==0，max=99。如果您想在代码中执行此操作，则这些将是 minimumValue 和 maximumValue 属性；如果您使用的是 Interface Builder，则这些将是 Attributes Inspector 中的 Minimum 和 Maximum 字段。

那么输出值的计算将是：

```
int value = slider.value;
    value = (value + 10) - value % 10; 
```

# ios - 面向未来的 iPad 相机分辨率？

> ID：15787984
> 
> 赞同：0
> 
> 时间：2013-04-03T12:57:14.813
> 
> 标签：ios, ipad, camera

我正在构建一个 iPad 相机应用程序，现在我基于一个“神奇”数字进行大量计算，即后置 5MP 相机的当前分辨率（例如 2592x1936）。我预计*有一天*苹果会用 8MP 取代那台相机。有没有一种方法（无需拍照和检查尺寸）可以从框架中发现后置摄像头的分辨率，无论是现在还是将来？

谢谢！

如果我已经错过了如何做到这一点，你能告诉我吗？;)

# windows-store-apps - 失去焦点时应用程序崩溃

> ID：15787985
> 
> 赞同：0
> 
> 时间：2013-04-03T12:57:16.337
> 
> 标签：windows-store-apps, winrt-xaml

当我从 winrt 屏幕打开我的应用程序时，它的主页需要一些时间来加载（大约一分钟，因为我编写了一些需要时间的代码）。同时，如果我导航到桌面然后返回应用程序，应用程序崩溃，我必须从 winrt 屏幕再次打开应用程序并等待应用程序加载主页。

**只有在主页完全加载后，我才能导航到我的桌面，然后返回并且应用程序不会崩溃。如果我在加载主页时导航，我会遇到应用程序崩溃的问题。**

我能知道它发生的原因以及如何防止它崩溃吗？我`Xaml+C#`在`visual studio 2012`（Windows 商店应用程序）中开发了该应用程序我的应用程序也通过了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:51:47.370

当您导航到桌面时，您的应用程序将进入“暂停”状态（代码不运行），并且在您重新激活应用程序时将进一步执行。

你是从网上加载东西吗？将所有内容包装到 try/catch 中，然后查看异常来自何处。

# c# - iTextSharp 在 Winforms 项目中不起作用

> ID：15787994
> 
> 赞同：3
> 
> 时间：2013-04-03T12:57:30.703
> 
> 标签：c#, winforms, itextsharp

# 环境

C# 2008 速成版，Windows 窗体，iTextSharp 5.4.0。

我将 iTextSharp.dll 放在我的项目`bin`文件夹中，我在我的项目中添加了对它的引用，我有 namespace `using iTextSharp`，`iTextSharp.text`并且`iTextSharp.text.pdf`我尝试了以下代码，但没有创建任何内容，也没有错误消息。

这是第一个块：

```
Document doc1 = new Document();
string path = "C:/Temp/Testing";
PdfWriter.GetInstance(doc1, new FileStream(path + "first.pdf", FileMode.Create));
doc1.Open();
doc1.Add(new Paragraph("Test"));
doc1.Close(); 
```

这是第二个块：

```
FileStream fs = new FileStream("C:\\Temp\\Testing" + "Test.pdf", FileMode.Create);
Document doc = new Document();
PdfWriter writer = PdfWriter.GetInstance(doc, fs);
doc.Open();
doc.Add(new Paragraph("Hello"));
doc.Close();
writer.Close();
fs.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:55:11.783

此示例打开一个对话框，用户可以保存文件。使用代码转换器将 VB 代码转换为 C#。

```
Using ms As New System.IO.MemoryStream()
Using doc As New iTextSharp.text.Document(iTextSharp.text.PageSize.A4)
Using w As iTextSharp.text.pdf.PdfWriter = iTextSharp.text.pdf.PdfWriter.GetInstance(doc, ms)

Dim FileName As String = "Name.pdf"

Here create your document end close it

Response.Clear()
Response.ContentType = "application/octet-stream"
Response.AddHeader("content-disposition", "attachment;filename= " & FileName)
Response.Buffer = True
Response.Clear()
Dim bytes = ms.ToArray()
Response.OutputStream.Write(bytes, 0, bytes.Length)
Response.OutputStream.Flush()

End Using
End Using
End Using 
```