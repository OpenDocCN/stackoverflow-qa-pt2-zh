# StackOverflow 问答 15457000-15457999

# haskell - 如何生成 n 个变量的所有排列，每个变量取 1 或 0？

> ID：15457001
> 
> 赞同：3
> 
> 时间：2013-03-17T02:54:34.913
> 
> 标签：haskell

例如，假设我想生成两个值的所有排列，每个可能是 0 或 1，我会得到：

```
[11,10,01,00] 
```

注意这里第一个变量变化最慢，所以它保持固定而其余变量变化。

在三个变量的情况下，我会得到

```
[111,110,101,100,011,010,001,000] 
```

我看到它应该有一个递归定义，但在我的脑海中还不够清楚，所以我可以表达它。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-17T03:36:31.070

这不是关于排列，而是关于组合，您可以在 Haskell 中轻松生成它们：

```
replicateM 3 "01"
= ["000","001","010","011","100","101","110","111"] 
```

如果您需要实际的整数：

```
replicateM 3 [0, 1]
= [[0,0,0],[0,0,1],[0,1,0],[0,1,1],
   [1,0,0],[1,0,1],[1,1,0],[1,1,1]] 
```

最后，如果各个位置的值不同：

```
sequence [".x", ".X", "-+"]
= ["..-","..+",".X-",".X+","x.-","x.+","xX-","xX+"] 
```

当然，这也适用于整数：

```
sequence [[0,1], [0,2], [0,4]]
= [[0,0,0],[0,0,4],[0,2,0],[0,2,4],
   [1,0,0],[1,0,4],[1,2,0],[1,2,4]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T03:02:32.137

如果您想要排列，例如在列表列表中，这是使用列表单子的解决方案。

```
\n -> mapM (const [0, 1]) [1..n] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T06:49:18.700

```
ghci> :m +Data.List
ghci> permutations [0,1]
[[0,1],[1,0]] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T03:01:35.800

(Edited based on feedback)

The smallest n-digit binary integer is 000..0 (n times), which is 0.

The largest n-digit binary integer is 111...1 (n times), which is 2^n - 1.

Generate the integers from `0` to `1<<n - 1` and print out the values you have.

Haskell's Int should be safe for <= 28 binary variables.

Hope that helps.

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-03-17T03:14:58.597

我不知道haskel，但这里有一段关于我如何进行排列的伪代码。

```
var positions = [0,0,0];
var max = 1;

done:
while(true){
    positions[0]++; //Increment by one
    for (var i = 0; i < positions.length; i++) {
        if(positions[i] > max){ //If the current position is at max carry over
            positions[i] = 0;
            if(i+1 >= positions.length){ //no more positions left
                break done; 
            }
            positions[i+1]++;
        }
    }
} 
```

# unix - 在 Mac OS 上我的文件中的 Dos 行结尾？

> ID：15457005
> 
> 赞同：0
> 
> 时间：2013-03-17T02:55:26.540
> 
> 标签：unix, dos

我在 Mac OS X 上，我的朋友 Andy 也是。我们都下载并安装了一个 python 包。我生成的`.vim`文件有dos行结尾（它们出现`^M`在错误消息中，我`dos2unix`在每个文件上使用它们修复它们。他没有与行结尾分享这个问题。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:03:29.370

你朋友用的什么编辑器？

他的 .vimrc 中可能有不同的设置（如果他使用的是 Vim）。

# vb.net - Excel中命名范围的设置值

> ID：15457007
> 
> 赞同：1
> 
> 时间：2013-03-17T02:56:01.877
> 
> 标签：vb.net, excel, named-ranges

如果这是一个完全的菜鸟问题，我深表歉意。我正在为 Excel 编写插件。我在 class1 中有一个 sub 可以打开一个 excel 文件，在这个 sub 中我有一个对 sub2 的引用，它在下面。我要做的就是挂钩到 Excel 的活动实例，更改命名范围值并退出。但无论我尝试哪种方式，我都会不断出错。这就是我所拥有的。告诉我哪里出错了。忘了提，这是在 VB.NET 中。

```
 Private Sub SetRangeValue(ByVal RangeName As String, ByVal RangeValue As String)
    Dim ExcelApp As Excel.Application
    Dim TheRange As Excel.Range
    Dim TheRangeName As String = ""

    'Hook into running excel instance
    ExcelApp = CType(Marshal.GetActiveObject("Excel.Application"), Excel.Application)

    'First Attempt Here
    TheRange = ExcelApp.ActiveWorkbook.Names.Item(RangeName)
    TheRange.Value = RangeValue

    'Second Attempt
    TheRange = ExcelApp.Range(RangeName)
    TheRange.Value = RangeValue
End Sub 
```

我不能让任何一个工作。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:34:41.807

最后我让它正常工作。这就是它需要工作的方式。感谢所有的帮助。

```
Private Sub SetRangeValue(ByVal RangeName As String, ByVal RangeValue As String)
    Dim ExcelApp As Excel.Application
    'Dim TheRangeObj As Excel.Range
    Dim TheRange As Microsoft.Office.Interop.Excel.Name
    Dim TheRangeName As String = ""

    'Hook into running excel instance
    ExcelApp = CType(Marshal.GetActiveObject("Excel.Application"), Excel.Application)

    TheRange = ExcelApp.ActiveWorkbook.Names.Item(RangeName)
    TheRange.RefersToRange.Value = RangeValue

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T05:37:09.790

```
'First Attempt Here
TheRange = ExcelApp.ActiveWorkbook.Names.Item(RangeName)
TheRange.Value = RangeValue 
```

根据[Names.Item Method (Excel)](http://msdn.microsoft.com/en-us/library/office/ff192981.aspx)，此函数从 Names 集合返回单个 Name 对象。在这种情况下，TheRange 不是该变量的有效名称，它应该是 TheName。然后

```
TheName.Value = RangeValue 
```

不是正确的赋值；根据[Name.Value 属性 (Excel)](http://msdn.microsoft.com/en-us/library/office/ff195389.aspx)，此属性 - 返回或设置一个字符串值，该值表示定义名称要引用的公式。

错误 0x800A03EC，从 Excel 返回此错误的原因有很多 - 最常见的是尝试写入大于 Excel 可以处理的数据时。例如，您尝试将长度超过 1024 个字符的字符串写入 Excel 中的单元格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-15T08:02:41.390

我刚刚制作了一个子程序，可以让我更轻松地使用我的命名范围查找和替换：

```
Private Sub XlFindReplace(ByRef xSheet As Excel.Worksheet, ByVal cellName As String, ByVal NewText As String)
        xSheet.Range(cellName).Value = NewText
    End Sub 
```

然后T会这样称呼它以替换东西：

```
XlFindReplace(xlC1Sheet, "client1Co1Tax", client1Co1Tax) 
```

*   这`xlC1Sheet`是我目前的工作表
*   这`"client1Co1Tax"`是excel中范围的名称
*   并且`client1Co1Tax`是我要替换的字符串变量

感谢大家的意见。

# c++ - 使用从 C++ 对象到另一个 C++ 对象的指针来修改 Lua 中的成员变量

> ID：15457010
> 
> 赞同：3
> 
> 时间：2013-03-17T02:57:11.027
> 
> 标签：c++, lua, luabind

如何在 Lua 脚本中从另一个 C++ 对象获取对 C++ 对象的引用？我真的不知道如何正确地用文字来总结，所以让我先用一个 Lua 例子来详细说明：

```
function doSomething()
    compo = a:getComponent()
    compo:setVariable(0)
end 
```

a 是一个 C++ 对象，函数 getComponent 返回一个指针：

```
// inside A.h
Component* A::getComponent(); 
```

似乎问题在于`getComponent()`将 Component 对象的副本传递给 Lua，而不是引用。我对每个返回指针的函数都遇到了同样的问题，Lua 无法修改原始对象。

对象 a 似乎工作正常，如果我从 Lua 中修改一个变量，它的结果会反映在 C++ 中。A 和 component 都已经绑定到 Lua，以及所需的方法。

我是否在语法上遗漏了一些东西，或者还有更多的东西？

我正在使用 luabind、Lua 5.1 和 MinGW。感谢您提前提供任何帮助。

编辑

这是 luabind 代码。我总结了它，因为还有一堆与问题无关的其他绑定：

```
luabind::class_<A>("A")
    .def("getComponent", &A::getComponent) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:33:00.660

也为“组件”制作一个 Lua 包装器。然后`a:getComponent()`返回 Lua 对象，而不是 C++ 对象的真正引用。在该新包装器对象上添加您需要的任何方法。如果您有更多“对象”，请冲洗并重复。

简而言之：对于您想从 Lua 操作的每个对象，您都必须创建一个 Lua 包装器。解决这个问题的唯一方法是在顶级对象上创建额外的函数，并从 Lua（`a:setComponentVariable(0)`而不是`a:getComponent()`+ `compo:setVariable(0)`）调用这些函数。

# c# - 可以强制 XMLWriter 在单引号中写入元素吗？

> ID：15457011
> 
> 赞同：4
> 
> 时间：2013-03-17T02:57:14.593
> 
> 标签：c#, xmlwriter

这是我的代码：

```
var ptFirstName = tboxFirstName.Text;
writer.WriteAttributeString("first",ptFirstName); 
```

请注意，即使我使用 ptFirstName 也会以双引号结尾

```
ptFirstName = ptFirstName.Replace("\"","'"); 
```

这也不起作用，因为作者仍​​然会在我的文件中强制使用双引号，如下所示：

实际上我需要时（不要问我为什么——说来话长……）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T03:00:34.513

是的，您可以通过设置`XmlTextWriter.QuoteChar`属性来设置引号使用的字符。有关详细信息，请参阅[http://msdn.microsoft.com/en-ca/library/system.xml.xmltextwriter.quotechar.aspx](http://msdn.microsoft.com/en-ca/library/system.xml.xmltextwriter.quotechar.aspx)。

但这意味着您必须创建一个 XmlTextWriter 对象才能使其工作。

# assembly - 程序集 lang 8085 .. 如何找到偶数/奇数奇偶校验

> ID：15457014
> 
> 赞同：0
> 
> 时间：2013-03-17T02:57:39.470
> 
> 标签：assembly, parity, 8085

我有以下代码来计算 1 的数量并将其保存到 reg B。我需要修改它以查找奇偶校验是偶数还是奇数......

```
LXI H, var1
MVI B, 00H
MVI D, 00H
MVI C, 08H
MOV A, M

LOOP: RAR
JNC SKIP
INR B
SKIP: DCR C
JNZ LOOP

HLT

var1: db 72 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T03:00:51.790

`B`保持输入中设置位的计数：只需按位`AND`注册`B`value `1`。如果结果为`1`，则为奇校验。如果结果为`0`，则为偶数。那是因为偶数总是`0`在最低有效位，奇数总是有`1`。

访问8080 级程序集的*非常模糊的记忆，但我认为它会是这样的：*

```
 MOV      A, B
          ANI      01H
          JZ       par_even
par_odd   ; parity is odd here, work your magic
          JMP      par_done

par_even  ; parity is even here, work other magic

par_done  ; carry on processing here 
```

例如，`72`您使用的值 is`64 + 8`或 binary `01001000`。

因此，假设您的位计数代码正常工作，寄存器`B`将设置为 2，或`00000010`. 与它相加`00000001`给你 0，因此是奇偶校验。

或者，值`254`, or`11111110`会将寄存器设置`B`为`7`, 或`00000111`。与`00000001`得到`1`，因此奇等价。

你也可以使用类似的东西：

```
ANA    A
JPE    par_even 
```

其中 A 是*值*而不是 1 位的计数。

您*可能*需要 ANA 的原因是确保根据累加器的内容设置奇偶校验标志。只有某些操作会设置标志，并且将累加器与自身进行与运算将使其保持不变，但会根据它设置 P、S 和 Z 标志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T07:35:13.650

偶校验意味着在一个八位字节中设置了偶数个比特。根据这篇对[Intel 8085 架构](http://www.cpu-world.com/Arch/8085.html)的简单介绍：

> 标志是一个 8 位寄存器，包含 5 个 1 位标志：
> - 符号 - 如果设置了结果的最高有效位，则设置。
> - 零 - 如果结果为零，则设置。
> - 辅助进位 - 如果结果的位 3 到位 4 有进位，则设置。
> -***奇偶校验***- 如果奇偶校验（结果中设置的位数）为偶数，则设置。
> - 进位 - 如果在加法期间有进位，或在减法/比较期间借位，则设置。

奇偶校验标志可以最容易地使用条件分支进行测试（[链接到源代码](http://engeletrica.sobral.ufc.br/professores/marcelo/Micro/8085_is_details.pdf)）

```
JPE label;   // Jump if parity is Even 
JPO label;   // or jump if parity is Odd 
```

该标志由处理单个输出寄存器的大多数算术和逻辑指令设置。反例是*MOV*和*CMP*，它们不存储结果。依次修改寄存器对的算术运算（*INX*、*DEX*等）没有明确的结果。

# scala - 解释反映射

> ID：15457015
> 
> 赞同：42
> 
> 时间：2013-03-17T02:58:06.147
> 
> 标签：scala

有人可以向我解释`contramap`吗？这个实现会是什么样子？好的用法示例是什么样的？

```
// contravariant functor
trait Contravariant[F[_]] {
  def contramap[A, B](f: B => A): F[A] => F[B]
} 
```

资料来源：[http ://tmorris.net/posts/functors-and-things-using-scala/index.html](http://tmorris.net/posts/functors-and-things-using-scala/index.html)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-17T09:53:19.517

假设您有一个`Conversion[X, Y]`表示从 type 的值到 type`X`的值的转换的类`Y`。您可以将其与`? => X`预处理输入的函数或`Y=>?`后处理输出的函数结合使用。例如：

```
trait Conversion[X, Y] { self =>

  def apply(x: X): Y

  def map[Z](f: Y => Z) = new Conversion[X, Z] {
    def apply(x: X): Z = f(self.apply(x))
  }

  def contramap[W](f: W => X) = new Conversion[W, Y] {
    def apply(w: W): Y = self.apply(f(w))
  }

} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-17T03:27:57.940

如果你看[`Ordering.on`](https://github.com/scala/scala/blob/v2.10.1/src/library/scala/math/Ordering.scala#L121)标准库的以下方法：

```
def on[U](f: U => T): Ordering[U] 
```

您会看到`on`将 a 转换`Ordering[T]`为`Ordering[U]`while 将函数从`U`to `T`。因此，该方法见证了可以被视为函子`on`的事实：`Ordering``Contravariant`

```
def contramap[A, B](f: B => A) = (fa: Ordering[A]) => fa.on(f) 
```

我还看到了托尼的博客文章，它帮助我终于理解了这个三年前的[答案](https://stackoverflow.com/a/2197880/257449)，从反义词到我的一个问题。

# c# - c# epplus error 删除部分：绘图形状

> ID：15457016
> 
> 赞同：1
> 
> 时间：2013-03-17T02:58:24.667
> 
> 标签：c#, epplus

我在尝试使用 oledb 之后才开始使用 epplus 库，然后尝试了互操作。

下面是我正在做的

```
public void editExcel_VariablesEEP()
    {
        try
        {
            FileInfo newFile = new FileInfo(excelQuotePath);
            ExcelPackage pck = new ExcelPackage(newFile);
            var energyCalculation = pck.Workbook.Worksheets[4];
            var ROI = pck.Workbook.Worksheets[3];
            var NPV = pck.Workbook.Worksheets[2];
            var Summary = pck.Workbook.Worksheets[1];

            energyCalculation.Cells["B5"].Value = Convert.ToDecimal(numericUpDown1.Value);
            energyCalculation.Cells["B6"].Value = numericUpDown2.Value;
            energyCalculation.Cells["B7"].Value = numericUpDown3.Value;
            energyCalculation.Cells["B8"].Value = numericUpDown4.Value;                
            NPV.Cells["B12"].Value = (numericUpDown5.Value/100);
            NPV.Cells["B13"].Value = (numericUpDown6.Value / 100);
            NPV.Cells["B14"].Value = (numericUpDown7.Value / 100);
            energyCalculation.Cells["F40"].Value = (numericUpDown8.Value / 100);
            energyCalculation.Cells["L5"].Value = numericUpDown9.Value;
            energyCalculation.Cells["G60"].Value = (comboBox1.Text);
            Summary.Cells["K2"].Value = (quoteName.Text);

            pck.Save();
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }

    } 
```

由于未知原因，它将正确保存，Visual Studio 中没有显示错误。但是当我打开 xlsx 文件时，我会看到“文件已损坏”提示。然后我同意修复，错误显示为 - Removed Part: Drawing shape。但是，当我查看 Excel 时，所有数据都存在并说明了。

如果您对此熟悉，请提供帮助。

谢谢。

*//更新测试只是继续，我正在做的事情，我将模板 xlsx 文件复制到另一个文件夹，我运行上面发布的代码并保存它。我加载了新编辑的 xlsx 文件并显示错误。我确认修复然后保存/覆盖它。然后我再次运行该程序，但我将其指向文件。它节省。我跑了，没有出现错误。发生了什么事，我不知道是什么。*

//更新2

那么，到目前为止发生了什么。错误在其描述中是正确的。这是一个引起问题的图像。我完全忽略了它，因为它是一个小图像。我必须做的修复是通过右键单击图像更改“大小和属性”菜单中的一些设置。在属性选项卡下，我选中了“不要移动或调整单元格大小”，并选中了打印对象和锁定复选框。最后，在尺寸选项卡下，我检查了“锁定纵横比”。加载时没有显示错误。但是观察文件大小，看起来图像没有“保存”，因为每次我打开 excel 然后关闭时，即使我没有做任何更改，它也会要求保存。确认保存，文件大小不同（大小增加）。测试这个“奇怪的保存”是否会影响重新打开文件或进一步编辑，我试过了，很好。没问题，重开。但“奇怪的保存”仍然存在。

# ios - 如何让自定义 UITableViewCell 出现在带有情节提要的自定义 UIViewController 中的 UITableView 中？

> ID：15457021
> 
> 赞同：0
> 
> 时间：2013-03-17T02:59:06.077
> 
> 标签：ios, objective-c, uitableview, uiviewcontroller

我想我现在真的很接近，但我错过了一些东西。如果我在返回 tableView:cellForRowAtIndexPath 方法中的单元格之前中断，则单元格包含正确的数据。但它没有出现在表格中。我我假设我的 UITableView 没有正确连接到 UIViewController。

这是我的自定义单元格：SCCustomerTableCell.h

```
#import <UIKit/UIKit.h>
#import "SCCustomer.h"

@interface SCCustomerTableCell : UITableViewCell

@property (strong, nonatomic) IBOutlet UILabel *companyLabel;
-(void)configureCellWithCustomer:(SCCustomer *)customer;

@end 
```

SCCustomerTableCell.m

```
#import "SCCustomerTableCell.h"

@implementation SCCustomerTableCell

-(void)configureCellWithCustomer:(SCCustomer *)customer
{
    self.companyLabel = [[UILabel alloc] init];
    self.companyLabel.text = [customer dbaName];
}

@end 
```

以及自定义视图控制器：SCCustomersVC.h

```
#import <UIKit/UIKit.h>
#import "SCCustomerTableCell.h"
#import "SCDataObject.h"

@interface SCCustomersVC : UIViewController <UITableViewDelegate, UITableViewDataSource, UISearchBarDelegate>

@property (strong, nonatomic) IBOutlet UITableView *customersTable;
@property SCDataObject *dataObject;
@property (nonatomic, strong) NSArray *customers;

@end 
```

SCCustomersVC.m

```
#import "SCCustomersVC.h"
#import "SCSplitVC.h"
#import "SCDataObject.h"

@interface SCCustomersVC ()
@end

@implementation SCCustomersVC

@synthesize customersTable;

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.customers count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomerCell";
    [self.customersTable registerClass:[SCCustomerTableCell class] forCellReuseIdentifier:CellIdentifier];
    SCCustomerTableCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    SCCustomer *customer = (SCCustomer *)[self.customers objectAtIndex:indexPath.row];
    [cell configureCellWithCustomer:customer];
    return cell;
} 
```

编辑：我忘记了故事板连接的屏幕：
[SCCustomersVC](http://screencast.com/t/WqiqGiROyQwN)，[UITableView](http://screencast.com/t/xM8KhqmROD)，[SCCustomerTableCell](http://screencast.com/t/Ksv9Z0v9z6Hj)，[UILabel](http://screencast.com/t/N6a3VDk8ToY6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:23:19.017

好的，有几件事你做错了。我从您的屏幕截图中看到您没有将控制器设置为表视图的数据源或委托。你需要这样做。其次，如果你在 IB 的表格视图中制作自定义单元格，则不需要注册类，只需确保设置了标识符即可。第三，由于您在 IB 中制作了标签，并且您有一个出口，因此您无需在单元格的 .m 文件中分配 init ——实际上您根本不需要 .m 中的任何内容。只需将 cell.companyLabel.text =... 放在 cellForRowAtIndexPath 方法中。

# objective-c - 当现代运行时或自动合成的属性不可用时中止编译

> ID：15457022
> 
> 赞同：4
> 
> 时间：2013-03-17T02:59:17.347
> 
> 标签：objective-c, cocoa

我写了一个依赖于自动合成属性的 Mac + iOS 库。我有人尝试在 32 位下编译它，忽略一堆编译器警告，并在运行时获得无法识别的选择器。

由于如果不实现一堆 getter 和 setter，任何代码都无法工作，我宁愿用 a 来阻止它们`#error`。

我以为我可以这样做：

```
#if !__has_feature(objc_default_synthesize_properties)
#error This library requires the modern runtime and will not compile under 32-bit
#endif 
```

但它没有效果。

为了得到我想要的结果，我必须这样做：

```
#if !__has_feature(objc_default_synthesize_properties) || defined(__i386__)
#error This library requires the modern runtime and will not compile under 32-bit
#endif 
```

我知道除了 32 位 Intel 架构之外还有其他实例会导致问题，例如旧版本的 Mac OS。

是否有更好的宏来检查自动合成属性或现代运行时的可用性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:13:08.173

因为现代运行时从 Mac OS X 10.5 开始可用，`#if MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_5`如果给定系统支持现代运行时，宏应该正确评估。`i386`可能还需要检查架构。以上也可以检查`NSAppKitVersionNumber10_5`

在 iOS 上，检查是不必要的，因为每个 iOS 设备都支持现代 Objective-C 运行时，因此也支持变量合成。

这里有一些宏也包含了 Steven Fisher 的回答。它们应该在任一平台上工作，并检查现代编译器和现代运行时：

```
#if !( defined(__clang__) && __has_feature(objc_default_synthesize_properties) && \
       ( TARGET_OS_IPHONE || \
         ( NSAppKitVersionNumber10_5 && !defined(__i386__) ) ) )
#error This library requires autosynthesized properties
#endif 
```

# android - Android Libgdx 应用程序仅在重新安装或重新启动后启动

> ID：15457027
> 
> 赞同：0
> 
> 时间：2013-03-17T02:59:53.073
> 
> 标签：android, libgdx

主要问题是该应用程序仅在安装或重新启动后才启动。第二次应用程序运行不正确。详情如下。

我遇到了一些奇怪的问题

```
1) Libgdx did not detect screen size correctly on Android 4 in
   SCREEN_WIDTH = Gdx.graphics.getWidth(); 
```

我得到了`369*320`而不是`960*540`

我采取以下措施来解决这个问题：

*   我运行主`Activity`类，我在其中使用`Display`
*   然后我运行`AndroidApplication`开始 Admob 和 Libgdx 课程的课程。

2）第二个问题是应用程序启动时没有初始化值，也就是说内存相同。没有初始化值，例如`boolean abc=false;` 看起来无效退出？

*   在 Libgdx 类（第三类）中，我设置了一些值`exit=true`并退出，处理所有纹理。程序返回第二节课。

    ```
    public void onCreate(android.os.Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      if (Data.exit) finish(); 
    ```

第二类返回以`exit`相同方式检查的主要活动

3) 下一个有趣的事情是现在`Gdx.graphics.getWidth()` 可以正确获取屏幕尺寸。神秘...

4）如果是这样，我重新制作了应用程序。现在主类开始 Libgdx 类。它可以正常工作并退出，但仅在安装或重新启动后的第一次。Libgdx`onCreate`启动的秒数，但`render()`没有启动。第一次重新启动后看起来无效退出：主类代码在这里

```
 public class MyActivity extends AndroidApplication 
      implements IActivityRequestHandler {
  public void onCreate(android.os.Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...
    context.startService(new Intent(context, BillingService.class));
    ....
    // Create the libgdx View
    View gameView = initializeForView(new MyGame(this), false);

    // Create and setup the AdMob view
    adView = new AdView(this, AdSize.BANNER, "aaaaaaa");
  }

@Override
public synchronized void onPause() {
    super.onPause();
}

@Override
public void onStop() {
    super.onStop();
}

@Override
protected void onDestroy() {
    super.onDestroy();
} 
```

有任何想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T02:53:54.910

您正在使用静力学。当您关闭应用程序时，它们会保留其价值，并在 Android 销毁该进程之前再次打开它，因此使用相同的 VM。您无法控制 Android 何时销毁它，因此请尝试在其类的构造函数/创建方法中初始化这些变量。

代替：

```
static boolean abc=false; 
```

利用：

```
static boolean abc;

public MyClass/create(){
    abc=false;
} 
```

或者除非必要，否则不要使用静力学。

# grep - cgvg 转义引号

> ID：15457029
> 
> 赞同：0
> 
> 时间：2013-03-17T03:00:07.007
> 
> 标签：grep

有谁知道用 cgvg 转义引号的方法？通常，当我需要字符串中的引号时，我只使用相反的引号类型（单引号和双引号）。但有时我需要两者。像这样：

```
cg '["'].*something.*["']' 
```

转义封闭的单引号无济于事：

```
cg '["\'].*something.*["\']' 
```

也没有第二层或第三层转义：

```
cg '["\\'].*something.*["\\']'
cg '["\\\'].*something.*["\\\']' 
```

想法？

谢谢！

# mysql - 获取sql中与嵌套类别相关的项目数

> ID：15457030
> 
> 赞同：5
> 
> 时间：2013-03-17T03:00:14.473
> 
> 标签：mysql, sql

我有两个表：类别和项目。我使用嵌套集结构存储了类别。类别有项目。项目只能添加到根类别的叶节点。

例如：类别

```
Vehicles
    Bikes
        Bajaj
    Automobiles
Art & Antiques
    Amateur Art 
```

在这种情况下，可以将项目添加到 Bajaj、汽车和业余艺术类别。

假设 Bajaj 中有 2 个项目，汽车中有 5 个项目，业余艺术中有 2 个项目

对于根级别类别，我想显示如下：

```
- Vehicles (7 items)
- Art & Antiques (2 items) 
```

我怎样才能做到这一点 ？

这是用于处理一些示例数据的 sql 转储

```
--
-- Table structure for table `categories`
--

CREATE TABLE IF NOT EXISTS `categories` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `parent_id` int(11) DEFAULT NULL,
 `title` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
 `lft` int(11) NOT NULL,
 `lvl` int(11) NOT NULL,
 `rgt` int(11) NOT NULL,
 `root` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
   KEY `IDX_3AF34668727ACA70` (`parent_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=28 ;

--
 -- Dumping data for table `categories`
--

INSERT INTO `categories` (`id`, `parent_id`, `title`, `lft`, `lvl`, `rgt`, `root`)  VALUES
(22, NULL, 'Vehicles', 1, 0, 8, 22),
(23, 22, 'Bikes', 2, 1, 5, 22),
(24, 23, 'Bajaj', 3, 2, 4, 22),
(25, 22, 'Automobiles', 6, 1, 7, 22),
(26, NULL, 'Art & Antiques', 1, 0, 4, 26),
(27, 26, 'Amateur Art', 2, 1, 3, 26);

-- --------------------------------------------------------

--
-- Table structure for table `items`
--

CREATE TABLE IF NOT EXISTS `items` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `category_id` int(11) NOT NULL,
 `title` varchar(100) NOT NULL,
 PRIMARY KEY (`id`),
 KEY `FK_403EA91BA33E2D84` (`category_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;

--
-- Dumping data for table `items`
--

INSERT INTO `items` (`id`, `category_id`, `title`) VALUES
(1, 24, 'Pulsor 150 cc'),
(2, 24, 'Discover 125 cc'),
(3, 27, 'Art of dream'),
(4, 25, 'Toyota Car');

--
-- Constraints for dumped tables
--

--
-- Constraints for table `categories`
--
ALTER TABLE `categories`
 ADD CONSTRAINT `FK_3AF34668727ACA70` FOREIGN KEY (`parent_id`) REFERENCES `categories` (`id`) ON DELETE SET NULL;

--
-- Constraints for table `items`
--
ALTER TABLE `items`
 ADD CONSTRAINT `FK_403EA91BA33E2D84` FOREIGN KEY (`category_id`) REFERENCES  `categories` (`id`) ON DELETE CASCADE; 
```

根节点在 parent_id 字段中为 NULL

更新：

我能够使用此查询获取根：

```
SELECT c.id,c.title,cte.co FROM categories c
JOIN 
(SELECT 
  c0_.id,c0_.root,COUNT(i.id) co
  FROM 
  categories c0_ 
  JOIN items i ON c0_.id=i.category_id
  WHERE c0_.rgt = 1 + c0_.lft
  GROUP BY c0_.id
) cte
ON cte.root=c.id
WHERE c.parent_id is null 
```

上述查询适用于根级别类别。现在，当用户单击根级别类别时，我也想做同样的事情。

例如，当有人点击车辆时，我应该得到：

```
 Bikes (2)
 Automobiles (5) 
```

为此，我尝试了：

```
 SELECT c.id,c.title,cte.co FROM categories c
 JOIN 
 (SELECT 
   c0_.id,c0_.root,COUNT(i.id) co
  FROM 
  categories c0_ 
  JOIN items i ON c0_.id=i.category_id
  WHERE 
  c0_.rgt = 1 + c0_.lft
  GROUP BY c0_.id
 ) cte
 ON cte.root=c.id
 WHERE c.parent_id=1 
```

这返回了空结果集。这个查询有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:26:16.193

```
SELECT parent.title,
( SELECT count(i.id) count FROM items i 
 WHERE category_id IN 
 (
 SELECT child.id FROM categories child WHERE child.lft>=parent.lft AND   
  child.rgt<=parent.rgt AND child.root=parent.root
 )
)
FROM categories parent 
WHERE parent.parent_id=@parent_id; 
```

如果这不起作用，请通知我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T04:52:51.050

像这样的东西怎么样：

```
SELECT COUNT(items.id), 
    (SELECT lookup.title 
     FROM categories lookup 
     WHERE lookup.id = categories.root) 
FROM items, categories 
WHERE categories.id = items.category_id 
GROUP BY categories.root; 
```

基于上面脚本的输入给了我：

```
3 | Vehicles
1 | Art & Antiques 
```

选择特定的根添加

```
AND categories.root = @id 
```

其中@id 是您要查找的根ID。

或者，如果您想通过根名称进行选择，请执行以下操作（可怕）：

```
SELECT title, total 
    FROM
    (SELECT COUNT(items.id) total, 
            (SELECT lookup.title 
         FROM categories lookup 
         WHERE lookup.id = categories.root) title 
    FROM items, categories 
    WHERE categories.id = items.category_id 
    GROUP BY categories.root;
    ) AS some_table
WHERE some_table.title = @root_name 
```

其中@root_name 是您的根节点的名称（当然在引号中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T03:05:40.173

像这样的东西应该工作。

```
 select c1.title, count(*) itemcount
 from categories c1 join categories c2
 on c2.parent_id = c1.id
 join items on items.category_id = c2.id
 group by c1.title 
```

# colors - 使用 matplotlib 指定轮廓的 RGB 颜色

> ID：15457032
> 
> 赞同：6
> 
> 时间：2013-03-17T03:00:36.567
> 
> 标签：colors, matplotlib, contour

好的，我认为这可能很简单，但是我进行了广泛的搜索，但找不到任何东西。我想要做的是指定使用 matplotlib 生成的轮廓线的精确 RGB 颜色值。我知道如果我做类似的事情：

```
plt.contour(X,Y,Z,[0.1,0.2,0.3],colors='k') 
```

然后我会得到三个全黑的轮廓级别，或者如果我用'w'代替'k'，那么轮廓都是白色的。没关系，但我需要做的是这样的：

```
plt.contour(X,Y,Z,[0.1,0.2,0.3],colors=(1.0,0.25,0.75) 
```

颜色不是从一些内置预设中选择的，而是由我精确定义的 RGB（或 RGBA）值。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T07:38:53.257

你应该给出一个颜色列表。如果列表长度为 1 种颜色，则它将对该颜色用于所有轮廓。

```
plt.contour(X, Y, Z, [0.1,0.2,0.3], colors = [(1.0,0.25,0.75)]) 
```

# python - Python : function definition keeps returning 'None' in the middle of the desired output

> ID：15457037
> 
> 赞同：1
> 
> 时间：2013-03-17T03:02:01.183
> 
> 标签：python

okay so i'm making code for my girlfriend for our 6th anniversary. I'm a complete noob to programming. I'm writing some very simple code to make, basically an input output machine of number inputs, in order for the user (her) to receive string outputs.

i keeps seeing "none" when i run my code. why? here goes.

```
def love(n):
  if n < 0 : 
    print "Why would it be negative?!" 
  if n == 0 : 
      print "well that is just hurtful" 
  if n == 1 :
    print "I REALLY love you" 
  if n == 2 : 
    print "You make me smile at least once, each and every day"
  if n == 3 : 
    print"you wouldn't believe how annoying it was to get this program to run properly! but it was worth it"
  if n == 4 : 
      print "let's " + "shoot a little higher than that"
  else:
    print "I honestly can't see myself without you anymore" 

print love(0) 

print "Wanna try again? :D " 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T03:05:35.407

```
love(0) # is all you need. 
```

* * *

你不需要打电话`print love()`，因为你已经在里面有打印语句`love`。你正在`None`做`love`所有的工作，它没有返回任何东西。

* * *

此外，您需要`if-elif-else`在函数中使用一个块，因为您希望*一次*运行所有打印操作中的一个。

```
if n < 0 : 
    print "Why would it be negative?!" 
elif n == 0 : 
      print "well that is just hurtful" 
elif n == 1 :
    print "I REALLY love you" 
elif n == 2 : 
    print "You make me smile at least once, each and every day"
elif n == 3 : 
    print"you wouldn't believe how annoying it was to get this program to run properly! but it was worth it"
elif n == 4 : 
      print "let's " + "shoot a little higher than that"
else:
    print "I honestly can't see myself without you anymore" 
```

虽然，除此之外`2`，打印所有内容都不会受到伤害；）

[我对 SO的第 100^(个答案！)耶 ！]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T03:05:26.133

你的函数有一个默认的返回值`None`，所以当你`print`输出它时，它会打印出来`None`。

只需调用没有`print`语句的函数。

或者，您可以将`print`函数中的所有语句替换为`return`，并将其变成一个`if-elif-else`块，因为它们都是互斥操作。然后，打印`love(0)`实际上会打印出返回值。

# hadoop - 安全退出 pig shell 命令

> ID：15457039
> 
> 赞同：7
> 
> 时间：2013-03-17T03:02:30.440
> 
> 标签：hadoop, apache-pig

当我在 Pig 交互式 shell 环境中输入一些错误命令时，它会进入监听模式 (>>)，如下所示。我如何安全地退出此命令，但仍留在 pig shell 环境中？

`Ctrl`+`C`把我带出猪壳，直到那时我失去了我的环境设置。

```
**grunt> Test_group = group Block2_Prep_filter by (page_visit_id as grp_page_visit_id, page_user_guid as grp_page_user_guid);
>> ;
>>
>>** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-19T17:02:49.807

我查看了猪源代码。这称为secondary_prompt（在PigScriptParser.jj 中找到，JavaCC 的上下文无关解析器语法文件）。在我看来，它似乎无法摆脱。我尝试了很多我在该代码中看到的东西的组合，但没有任何效果。还尝试了我能想到的所有退出类型的词，但无济于事。

当我做`Ctrl`+`D`时，它退出并显示：

```
>> 2013-06-19 12:51:43,632 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1000:
Error during parsing. Lexical error at line 83, column 0\.  Encountered: <EOF> after : "" 
```

查看 Grunt 类，在这一点上，它确实：

```
parser.setInteractive(false);
return parser.parseStopOnError(); 
```

这向我表明，交互性在这一点上已经结束。

# forms - 播放框架向导动态字段

> ID：15457042
> 
> 赞同：0
> 
> 时间：2013-03-17T03:03:00.053
> 
> 标签：forms, playframework, playframework-2.0, wizard

我正在尝试遵循 Play 提供的表单示例中的向导模式（[https://github.com/playframework/Play20/blob/master/samples/java/forms/app/views/wizard/form1.scala.html](https://github.com/playframework/Play20/blob/master/samples/java/forms/app/views/wizard/form1.scala.html)）。

当字段数是静态的时，这种方法看起来不错。但是，当字段是动态的时，我该如何处理。例如，如果用户可以在步骤 2 中创建多个配置文件，我如何在此页面上表示它？

另外，这是否意味着我的向导的每个页面都必须知道其余页面上的所有控件，并将其隐藏？必须有更好的方法来解决这个问题。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T01:16:07.203

我在使用向导时遇到了类似的问题。我通过将我的数据库模型与 UI 模型解耦来解决它。例如，在 DB 级别，我有一个代表整车的模型。在 UI 层，我创建了多个模型来代表汽车的各个部分，例如车轮、座椅、车门等。

在 UI 向导中，我使用 UI 模型。因此，在任何给定步骤，我的向导步骤只需要了解它所操作的部分。我可以在这些模型上应用 @required 等验证约束。如果部分表单验证成功，我将使用该信息更新数据库模型。HTH。

# javascript - 使用 Javascript 在 Firefox 中禁用 Shift + 右键单击

> ID：15457051
> 
> 赞同：5
> 
> 时间：2013-03-17T03:04:22.833
> 
> 标签：javascript, html, right-click

我正在开发一款 RTS 游戏，您可以在其中选择单位并右键单击以将它们移动到某个地方。您也可以移动右键单击以将您希望单位前往的点列表排队。

在除 FF 之外的所有浏览器中，这都能完美运行。

然而，在 Firefox 中，shift 右键单击​​会触发上下文菜单（没有 shift 的右键单击不会）。我正在处理 contextmenu 事件并调用 preventDefault 但是当按住 shift 按钮时，这似乎在 FF 中没有做任何事情。

有什么办法可以阻止 FF 中的这种行为？

我的游戏在这里：[https](https://mod.it/4plhXo3l) : //mod.it/4plhXo3l 以及第 36 行 RTSBoard.js 文件中的相关代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-17T03:42:26.830

通过将 event.shiftKey 设置为 false，然后调用 preventDefault() 和 stopPropagation()，然后返回 false，我设法让这个在 Firefox 中工作。然后，我将文档模型的 onclick 事件和 ondblclick 事件设置为您自己最终使用的相同函数，并将添加的 shiftkey 设置设置为 false。我还必须为 mouseup 事件执行此操作，因为单击和拖动也会导致上下文菜单弹出。

我不确定它可以完全 100% 禁用，但这看起来是你能得到的最接近的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:00:47.027

回答我自己的问题。在 document.onclick 事件中调用 preventDefault 和 stopPropagation 似乎可以解决问题。

有关更多讨论，请参阅此 reddit 线程：[http ://www.reddit.com/r/javascript/comments/1agoj8/is_it_possible_to_block_the_shift_right_click/](http://www.reddit.com/r/javascript/comments/1agoj8/is_it_possible_to_block_the_shift_right_click/)

# jquery - 找到父值？

> ID：15457052
> 
> 赞同：0
> 
> 时间：2013-03-17T03:04:35.800
> 
> 标签：jquery, onclick, parent

我需要一个 onclick 事件，以便所有 4 个 <input> 都将读取行的 id 值：“2013-0455”。

在我的脑海中，我将每个*输入*视为JQuery中*tr的**子*项。我不知道如何实现它？

 *如果这不起作用，我希望能够单击 4 个*输入*中的任何一个并获取`id="File_Number"`

```
<tr id="2013-0455">
<td><input id="File_Number" value="2013-0455" type="readonly" size="7"></td>
<td><input id="File_DateTime" value="2013-03-16 03:08:12" type="readonly" size="18"></td>
<td><input id="Address" value="123 Sesame Street" type="readonly" size="20"></td>
<td><input id="File_Comments" value="Something said done entered" type="readonly" size="30"></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:08:01.443

尝试这个：

```
$('input').click(function() {
  var id = $(this).parents('tr').attr('id');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T03:08:23.767

这是你想要的吗？

```
$('input').click(function () {
    var x = $(this).closest('tr').attr('id');
    console.log(x);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T13:39:38.763

您可以尝试以下方法：

```
$('input').click(function() {
  var value = $("#File_Number").val();
}); 
```

让我知道这是否适合你。*

# firebreath - 将 boost locale 与 Firebreath 一起使用

> ID：15457055
> 
> 赞同：0
> 
> 时间：2013-03-17T03:05:29.650
> 
> 标签：firebreath, boost-locale

我使用 Firebreath 创建了一个 chrome 扩展：[http](http://slimtext.org) ://slimtext.org 我遇到了一个问题：该扩展在 Windows 上不能很好地支持中文字符。经过大量研究，我发现了这一点：http: [//www.boost.org/doc/libs/1_50_0/libs/locale/doc/html/default_encoding_under_windows.html](http://www.boost.org/doc/libs/1_50_0/libs/locale/doc/html/default_encoding_under_windows.html)

我认为解决方案是使用 boost/locale。但是[https://github.com/firebreath/firebreath-boost](https://github.com/firebreath/firebreath-boost)项目似乎不包含 boost/locale。1.50.0 分支包含比 master 分支更新的 boost，但它们都不包含 boost/locale。

我尝试使用外部提升，或从外部提升复制语言环境代码，但失败了。（在制作时无法链接到语言环境）

你有什么建议？如何将 boost locale 与 Firebreath 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:30:22.023

firebreath-boost 只是完全提升的一个子集。要使用所有 boost 手动安装 boost 并使用系统 boost。见[http://www.firebreath.org/display/documentation/Prep+Scripts](http://www.firebreath.org/display/documentation/Prep+Scripts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T01:58:06.277

我未能在 Windows 上使用外部 Boost 编译我的 Firebreath 项目。经过大量调查，我开始怀疑 boost/locale 是我原来问题的关键：汉字编码问题。

最后我在没有提升/语言环境的情况下解决了它：

1.  **尽可能使用 wstring 而不是 string**
2.  您可能必须为 Windows 和其他操作系统分别编写代码，例如：

`#ifdef _WIN32`

```
 file.open(path.c_str()); //path is std::wstring 
```

`#else`

```
 fs::path the_path(path);            
    file.open(the_path.generic_string().c_str()); 
```

`#endif`

# string - 如何检查比较是否回文？

> ID：15457056
> 
> 赞同：0
> 
> 时间：2013-03-17T03:05:30.457
> 
> 标签：string, assembly, x86, reverse, palindrome

我不太了解汇编语言，但我尝试制作这个回文，这很难。首先，我必须输入一个字符串，然后显示其原始字符串和反转字符串，然后显示它是否为回文。

我已经想出了如何通过从另一个论坛中阅读的内容通过循环推送和弹出反向字符串来显示反向字符串，现在我发现唯一的问题是比较反向字符串和原始字符串以检查它是否是回文与否。

```
call clearscreen

mov dh, 0
mov dl, 0
call cursor
mov ah, 09h
mov dx, offset str1
int 21h

palin db 40 dup(?)
mov ah, 0ah
mov palin, 40
mov dx, offset palin
int 21h

mov dh, 1
mov dl, 0
call cursor
mov ah, 09h
mov dx, offset str2
int 21h

mov si, 2
forward:
mov al, palin + si
cmp al, 13
je palindrome
mov ah, 02h
mov dl, al
push ax      'push the letter to reverse
int 21h
inc si
jmp forward
 palindrome:

 mov dh, 2
 mov dl, 0
 call cursor
 mov ah, 09h
 mov dx, offset str3
 int 21h

 mov cx, 40   'pop each letter through a loop to show its reverse 
 reverse:
 mov ah, 02h
 pop ax
 mov dl, al
 int 21h
 loop reverse

 int 20h

 clearscreen:
mov ax, 0600h
mov bh, 0Eh
mov cx, 0
mov dx, 8025
int 10h
ret
 cursor:
mov ah, 02h
mov bh, 0
int 10h
ret
str1: db "Enter A String : $"
str2: db "Forward : $"
str3: db "Backward : $"
str4: db "Its a Palindrome! $"
str5: db "Not a Palindrome!$" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T04:11:37.197

你有一个用户输入的字符串，你需要做的是比较第一个字节和最后一个字节，对第二个字节和第二个到最后一个字节做同样的事情。对整个字符串继续这样做。您还需要字符串的长度。为了让生活更轻松，您应该将字符串转换为全部大写字母或全部小写字母，以便于比较。

不幸的是，他们仍在教授 16 位 DOS 代码。这是一个在数据部分中定义了单词的示例。 **您**必须对其进行修改以接收输入并处理该字符串

```
.data
    pal db "racecar"
    pal_len equ $ - pal  - 1
    szYes     db "yes$"
    szNo      db "no$"
.code

start:  
    mov     ax,@data
    mov     ds,ax

    call    IsPalindrome

    mov     ah,4ch
    int     21h

IsPalindrome:    
    lea     si, pal
    lea     di, pal
    add     di, pal_len
    mov     cx, 0
CheckIt:
    mov     al, byte ptr [si]
    mov     dl, byte ptr [di]
    cmp     al, dl
    jne     No
    inc     si
    dec     di
    inc     cx
    cmp     cx, pal_len
    jne     CheckIt

    mov ah,9
    lea dx,szYes
    int 21h
    ret

No:
    mov ah,9
    lea dx,szNo
    int 21h
    ret
end start 
```

为了完整性并将我们带入 21 世纪，32 位 NASM 代码：

```
section .data
fmt         db  "%s", 0
szPal       db  "RACECAR"
Pal_len     equ $ - szPal - 1
szYes       db  "Yes", 10, 0
szNo        db  "No", 10, 0

extern printf, exit

global _start
section .text
_start:
    call    IsPalindrome
    call    exit

IsPalindrome:

    mov     ecx, 0
    mov     ebx, Pal_len
    mov     esi, szPal

.CheckIt:
    mov     al, byte [esi + ecx]
    mov     dl, byte [esi + ebx]
    cmp     al, dl
    jne     .No
    inc     ecx
    dec     ebx
    jns     .CheckIt

    push    szYes
    push    fmt
    call    printf
    add     esp, 4 * 2
    mov     eax, 1
    jmp     Done

.No:
    push    szNo
    push    fmt
    call    printf
    add     esp, 4 * 2
    xor     eax, eax
Done:    
    ret 
```

# woocommerce - Woocommerce - 在使用 UPS 扩展程序时为单件商品创建免费送货

> ID：15457059
> 
> 赞同：1
> 
> 时间：2013-03-17T03:05:42.490
> 
> 标签：woocommerce, shipping, ups

我在 woocommerce 中使用 UPS 扩展。我需要绕过 UPS 计算器，为某些物品提供免费送货服务。执行此操作的一种好方法似乎是将项目标记为“虚拟”，但随后该项目不需要运输。我需要为这个项目要求运输。我已经能够自定义结帐页面并强制运输字段显示在虚拟物品上，但是它们不会存储在实际订单中。

任何人都知道我如何创建自定义函数或修改 woocommerce 文件以强制结帐过程要求运送虚拟物品，同时绕过 UPS 计算器？（其他物品需要计算运费）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:24:22.583

我遇到了同样的问题，插件的作者回复我说不能这样做，必须编写代码才能做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T19:58:55.657

I just ran into this issue, maybe this will help someone out. For all of the products that I wanted free shipping, I made virtual products.

Then I went to Woocommerce > Shipping Options Tab, check the box that says "Collect shipping address even when not required" which is in the "Shipping Destination section".

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T06:10:53.853

我认为可以帮助您使商品“免费”送货的另一种方法（以及我过去使用过的一种方式）是创建可以对产品打折的**优惠券**（不要将其标记为“虚拟”）它的价格减去运费。

例如，假设您的产品为 100 美元，运费为 10 美元（总计 110 美元），然后您专门为该产品创建优惠券，该优惠券将给予 10 美元折扣，使您的产品和运费总计 100 美元。

我假设您已经知道如何在 woocommerce 中创建优惠券（如果您需要一些关于如何创建优惠券的信息，[此页面](https://docs.woothemes.com/document/coupon-management/)会有所帮助）。要将优惠券**应用于**您想要免费送货的特定产品，请转到使用限制-> 产品并指定您想要“免费”（或在本例中为折扣）送货的特定产品。

为了省去用户结账时输入此优惠券代码的麻烦，您可以在functions.php中添加以下代码：

```
//Check for specific products then discount to adjust for 'free' shipping.

function my_free_shipping(){
//variables.
global $woocommerce;
$coupon_code = 'free-shiping';
$products= array('1', '2'); //products (ID's) to have discounted shipping.

//get the cart contents.
$cart_item = $woocommerce->cart->get_cart();
//loop through the cart items looking for the products in $products.
    foreach ($cart_item as $key => $item){
        //check if the cart items match to any of those in the array.
        if(in_array($item['product_id'], $products)){       
            //apply discount.
            $woocommerce->cart->add_discount(sanitize_text_field($coupon_code));
        }
    }
} 

add_action('init', 'my_free_shipping'); 
```

请注意，我尚未使用 UPS 扩展**测试**此代码，但可以随意修改和使用它。

我希望这篇文章对你有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-14T23:39:40.647

我也需要这个，并且有一个可行的解决方案：

首先进入您的`functions.php`in `"Appearance"->"Editor"->"Theme Functions"`，并添加以下代码（我强烈建议您首先使用“[子主题](https://codex.wordpress.org/Child_Themes)”，这样您就不会修改主题的`functions.php`......或者您也可以[创建一个自定义插件](https://codex.wordpress.org/Writing_a_Plugin)）。

```
/* Puts items with "free-shipping" shipping class into a different shipping package. */

    function free_woocommerce_cart_shipping_packages( $packages ) {

        // Reset the packages
        $packages = array();

        // Free items
        $freeshipping_items = array();
        $regular_items      = array();

        // Sort free from regular (replace "free-shipping" below with the shipping class slug you actually use).
        foreach( WC()->cart->get_cart() as $item ) {
            if( $item['data']->needs_shipping() ) {
                if( $item['data']->get_shipping_class() == 'free-shipping' ) {
                    $freeshipping_items[] = $item;
                }
                else {
                    $regular_items[] = $item;
                }
            }
        }

        // Put inside packages:
        if( $freeshipping_items ) {
            $packages[] = array(
                'ship_via'        => array( 'flat_rate' ),
                'contents'        => $freeshipping_items,
                'contents_cost'   => array_sum(wp_list_pluck($freeshipping_items, 'line_total')),
                'applied_coupons' => WC()->cart->applied_coupons,
                'destination'     => array(
                    'country'   => WC()->customer->get_shipping_country(),
                    'state'     => WC()->customer->get_shipping_state(),
                    'postcode'  => WC()->customer->get_shipping_postcode(),
                    'city'      => WC()->customer->get_shipping_city(),
                    'address'   => WC()->customer->get_shipping_address(),
                    'address_2' => WC()->customer->get_shipping_address_2()
                )
            );
        }
        if( $regular_items ) {
            $packages[] = array(
             // 'ship_via'        => array( 'usps' ),
                'contents'        => $regular_items,
                'contents_cost'   => array_sum(wp_list_pluck($regular_items, 'line_total')),
                'applied_coupons' => WC()->cart->applied_coupons,
                'destination'     => array(
                    'country'   => WC()->customer->get_shipping_country(),
                    'state'     => WC()->customer->get_shipping_state(),
                    'postcode'  => WC()->customer->get_shipping_postcode(),
                    'city'      => WC()->customer->get_shipping_city(),
                    'address'   => WC()->customer->get_shipping_address(),
                    'address_2' => WC()->customer->get_shipping_address_2()
                )
            );
        }

        return $packages;
    }

    add_filter('woocommerce_cart_shipping_packages', 'free_woocommerce_cart_shipping_packages'); 
```

其次，进入`"Products"->"Shipping Classes"`并创建一个名为“”的运输类，并`Free Shipping`带有一个名为“ `free-shipping`”的 slug（slug 名称是我们将自定义函数绑定到的名称）。然后“ `Add New Shipping Class`”。

然后在您的`"WooCommerce"->"Settings"->"Shipping"->"Flat Rate"`启用“ `Flat Rate`”运输中，并在“ ”部分下，在我们刚刚创建的“”类旁边`Shipping Class Costs`放置一个“”值。就我而言，我也将“ ”设置为“ ”。然后“ ”。`0.00``Free Shipping``Calculation Type``Per Class``Save changes`

然后最后在`"WooCommerce"->"Settings"->"Shipping"->"Shipping Options"`“ `Shipping Methods`”部分，确保“ `Flat Rate`”具有`Selection Priority`比您使用的任何其他运输方式更高的“”（在该名称的列中），并且它是列表中的最后一个（您可以使用每个选项左侧的菜单图标拖动以重新排序）。“ `Save Changes`”。

然后编辑您希望免费送货的产品之一，转到“ `Product Data"->"Shipping`”部分并将运输类别更改为“ `Free Shipping`”（您创建的新类别）。然后“ `Update`”该产品保存更改。然后将其添加到您的购物车，并将其他一些定期非免费送货的商品添加到您的购物车中。

**测试。**

您现在应该看到，免费送货商品有自己的送货“包裹”行（“ `Shipping #1`”和“ `Shipping #2`”），与仍应收取运费的商品分开，即使您在购物车中每种商品都有一些。

或者，您也可以尝试名为“ [Per Product Shipping](http://www.woothemes.com/products/per-product-shipping/) ”的完整付费插件。

或者这个[免费插件也可以工作](https://wordpress.org/plugins/multiple-packages-for-woocommerce/)（没有承诺）。

# c# - 如何使用 javascript 将值从 webgrid 传递到另一个操作页面？

> ID：15457060
> 
> 赞同：0
> 
> 时间：2013-03-17T03:05:45.653
> 
> 标签：c#, javascript, asp.net-mvc-3

我在 MVC3 中有一个 Webgrid，它有一个编辑列。单击该列时，必须将行的 ID 传递到我编写了编辑操作的另一个*操作页面。*如何在单击 Webgrid 中的编辑列时运行 Javascript 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:53:06.890

将此用于您视图中的编辑链接：

```
Html.ActionLink(article.Title, 
                "Item",   // <-- ActionMethod
                "Login",  // <-- Controller Name.
                new { ItemID = Model.ItemID }, // <-- Route arguments.
                null  // <-- htmlArguments .. which are none. You need this value
                      //     otherwise you call the WRONG method ...
                ) 
```

# asp.net - 负载平衡的 ASP.NET Web 应用程序中的跨服务器通信

> ID：15457063
> 
> 赞同：4
> 
> 时间：2013-03-17T03:06:00.150
> 
> 标签：asp.net, caching, ipc, invalidation, web-farm

我的 ASP.NET 应用程序将一些昂贵的（加载）数据存储在应用程序可访问的`static`字段中（`System.Web.Caching.Cache`在这种情况下使用不合适）。

我的应用程序还通过另一台机器上的中央 SQL Server 跨几个网络服务器进行负载平衡。

有时此缓存会失效。如果用户提交了一些更新的数据，`Server01`那么该应用程序知道它可以在将数据提交到数据库时清除其本地缓存。

但是，如何`Server01`通知`Server02`此更改 so`Server02`的缓存将失效？

我不知道 ASP.NET 中有任何内置的服务器间 IPC 用于 web-farm 通信，看来我必须在应用程序中创建一个 URI 处理程序（例如`http://mysite/InvalidateCache`），该处理程序将由其他服务器调用，但这似乎有点骇人听闻。有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:39:36.280

我有一点脑子放屁，并意识到网络服务器可以通过相互发送请求来相互通信——不需要特殊的侧通道线路。我之前把这个想法称为hackish，但理论上它是合理的。

显然出于安全目的，这些请求需要通过物理专用网络连接，或者具有加密签名的请求，但我现在真的想不出这种方法有什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T04:28:59.517

我建议您探索像 AppFabric 这样的分布式缓存。[http://msdn.microsoft.com/en-us/library/ff383731(v=azure.10).aspx](http://msdn.microsoft.com/en-us/library/ff383731(v=azure.10).aspx)

# java - 调用返回 tv.getText() 的方法返回不同的值，就像简单地使用 tv.getText()？

> ID：15457065
> 
> 赞同：1
> 
> 时间：2013-03-17T03:06:05.610
> 
> 标签：java, android

我构建了一个方法来检索 TextView 中的文本。我的问题是，当我调用该方法来检索文本时，它总是返回“”。通过查看代码更容易看到问题：

```
 public TextView tv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
      ...
      tv = (TextView) findViewById(R.id.edit_text);
    }

    public String getResult() {
      return tv.getText().toString();
    }

    public void test() {
      System.out.println("A:"+tv.getText().toString()); // Returns text
      System.out.println("B:"+getResult()); // Always returns "" 
```

getResult() 不应该等同于 tv.getText().toString() 吗？它们如何返回不同的值？

# web - 您可以在不是在 Google 协作平台下创建的网站上使用 google 脚本吗？

> ID：15457067
> 
> 赞同：3
> 
> 时间：2013-03-17T03:07:16.747
> 
> 标签：web, google-apps-script, embed, hosted

谷歌脚本有一种嵌入谷歌网站的方法，但我想知道我是否可以将谷歌脚本用于非谷歌托管的网站。这个 google 脚本的目的是作为 Javascript 的简单替代方案，用于访问 Google 电子表格的简单功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:01:37.270

目前无法在非 Google 网站中嵌入 Apps 脚本界面。您可以将脚本发布为[Web 应用程序](https://developers.google.com/apps-script/execution_web_apps)，它会有自己的 URL，但不能将其嵌入 iframe。

# php - Netbeans / XDebug 断点

> ID：15457069
> 
> 赞同：1
> 
> 时间：2013-03-17T03:07:38.277
> 
> 标签：php, netbeans, xdebug

我正在为我的 PHP 应用程序使用 netbeans 设置 xdebug，托管在本地 xampp 安装（Windows 7）上

根据 netbeans / xdebug 文档，安装和命令行测试成功并正常工作。但是，当我在代码中添加断点时，无论我将它放在代码中的什么位置，它都会显示为“损坏的”断点。当我运行带有调试器的应用程序时，它无法在这些断点处停止。

我已经做了很多搜索，但没有找到一个很好的解释，有人有建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:27:29.817

**解决方案1：**

您需要在项目源代码和 Xdebug 输出之间配置正确的映射。你可以在这里做：

```
Project Window -> right click on project name -> Properties -> Run Configuration -> Advanced -> Path mapping 
```

**解决方案2：**

如果 xdebug 配置正确，请检查 php 信息。您可以通过空 php 文件中的 phpinfo() 检查它并在浏览器中运行它：

```
<?php
 phpinfo(); 
```

尝试去找：

```
This program makes use of the Zend Scripting Language Engine:
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies
with Xdebug v2.2.1, Copyright (c) 2002-2012, by Derick Rethans 
```

然后在 php.ini 中（您可以在 phpinfo() 中检查该字段的位置，添加以下部分：

```
[xdebug]
xdebug.remote_enable = On
xdebug.profiler_enable = On
xdebug.profiler_enable_trigger = On
xdebug.profiler_output_name = cachegrind.out.%t.%p
xdebug.profiler_output_dir = "c:/xamp/tmp"
xdebug.remote_handler=dbgp
xdebug.remote_port=9100
xdebug.remote_host=localhost 
```

（确保此目录 c:/xamp/tmp 是否存在）

然后在netbeans中：

```
Tools -> Options -> PHP -> Debugging 
```

设置：调试器端口：9100 并选择“Stop at First Line”

保存它并调试它现在应该可以正常工作的应用程序。

# windows - 无法使用 GNAT Ada 读取 USB com 端口

> ID：15457070
> 
> 赞同：1
> 
> 时间：2013-03-17T03:07:45.123
> 
> 标签：windows, usb, ada

我正在尝试使用以下方法设置 USB 串行端口： `GNAT.SERIAL_COMMUNICATIONS`。

我可以打开端口，但是当我尝试设置端口的属性时，出现以下异常

```
raised GNAT.SERIAL_COMMUNICATIONS.SERIAL_ERROR : set: cannot get comm state ( 6) 
```

有任何想法吗？

肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:21:01.770

由于您使用的不是自然的 Windows COM 端口，而是由设备驱动程序创建的额外 COM 端口，因此您可能对[这个问题](https://stackoverflow.com/questions/3186395/serialport-port-open-the-port-com2-does-not-exist/3186501#3186501)感兴趣（尤其是我对它的回答）。

摘要是有时具有正常名称的程序无法访问虚拟 COM 端口。在放弃之前`"COM2"`，请尝试`"\\.\COM2"`

# python - Python-从多个文本文件读入字典

> ID：15457072
> 
> 赞同：0
> 
> 时间：2013-03-17T03:07:47.573
> 
> 标签：python, text, dictionary

我正在尝试将两个文件合并到一个字典中。它们都是文本文件。

第一个文件有州首字母和人口。它看起来像这样：

```
AL 4447100
AK 626932
AZ 5130632
AR 2673400
CA 33871648
CO 4301261
... 
```

第二个文件有状态初始和状态名称（这次是每行，而不是并排）：

```
AL
Alabama
AK
Alaska
AZ
Arizona
AR
Arkansas
CA
California
CO
Colorado
... 
```

我正在尝试创建一个看起来像这样的字典

```
{'Alabama': 4447100, 'Alaska': 626932, ...} 
```

现在，我无法阅读第一个文本文件。当缩写妨碍时，我如何阅读数字？

第二个文本文件更容易，因为我可以阅读每隔一行。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:21:14.603

您可以根据读取数据的方式使用[拆分。](http://docs.python.org/2/library/stdtypes.html#str.split)

例如：

```
>>> myStr = 'AL 4447100'
>>> myStr.split(' ')
>>> ['AL', '447100'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T03:22:43.763

我不会给出完整的解决方案，因为这可能是家庭作业，但你的最后一个应该有一些这样的代码

```
d = {}

with open('file1.txt') as f:
    for line in f:
         state, pop = line.split()
         d[states[state]] = int(pop) # states is a dictionary with initials as 
                                     # the  keys and full names as values 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T03:23:27.997

Q) 现在，我无法读取第一个文本文件。当缩写妨碍时，我如何阅读数字？

A）您可以将其与每行的字符串一起使用，以从字符串中删除前 3 个字符（首字母缩写词和空格）：

```
number = lineString[3:] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T03:44:39.757

假设你有文件`states.txt`和`pop.txt`

```
with open("states.txt") as f1:
   x= f1.read().split()
   states = {state:abrv for state,abrv in zip(x[0::2],x[1::2])}

with open("pop.txt") as f2:
   y= f2.read().split()
   pop = {states[abrv]:val for abrv,val in zip(y[0::2],y[1::2])} 
```

# kineticjs - KineticJS 在两组之间共享一个对象

> ID：15457077
> 
> 赞同：0
> 
> 时间：2013-03-17T03:08:15.107
> 
> 标签：kineticjs, drag

我正在使用 KineticJS 在中间绘制一条垂直线和一条水平线以及一个圆圈。我已经对垂直线和圆圈进行了分组，但是我也想用水平线移动圆圈，这是我的脚本：

```
var stage1 = new Kinetic.Stage({
                container: 'container',
                width: 1024,
                height: 1024
            });
              var blayer1 = new Kinetic.Layer();
            var bgroup1 = new Kinetic.Group({
                draggable: true,
                dragBoundFunc: function (pos) {
                    return {
                        x: pos.x,
                        y: this.getAbsolutePosition().y
                    }
                }
            });
            var BlueLine1 = new Kinetic.Line({
                points: [512, 0, 512, 1024],
                stroke: '#0080c0',
                strokeWidth: 2,
                lineCap: 'round',
                lineJoin: 'round'
            });
            var circle = new Kinetic.Circle({
                x: stage1.getWidth() / 2,
                y: stage1.getHeight() / 2,
                radius: 140,
                stroke: '#00ffff',
                strokeWidth: 2
            });
            bgroup1.add(circle);
            bgroup1.add(BlueLine1);
            blayer1.add(bgroup1);
            stage1.add(blayer1);
            blayer1.draw();

            var glayer1 = new Kinetic.Layer();
            var ggroup1 = new Kinetic.Group({
                draggable: true,
                dragBoundFunc: function (pos) {
                    return {
                        x: this.getAbsolutePosition().x,
                        y: pos.y
                    }
                }
            });
            var GreenLine1 = new Kinetic.Line({
                points: [0, 512, 1024, 512],
                stroke: 'red',
                strokeWidth: 2,
                lineCap: 'round',
                lineJoin: 'round'
            });
            ggroup1.add(GreenLine1);
            glayer1.add(ggroup1);
            stage1.add(glayer1);
            glayer1.draw();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:57:16.443

**以下是如何在 2 个群组之间共享一个圈子**

使用“.moveTo()”将圆圈移动到您需要的任何组中。

这会将您的圆圈移动到 ggroup1，因此 ggroup1 现在有您的垂直线和您的圆圈：

```
circle.moveTo(ggroup1);
blayer1.draw();
glayer1.draw(); 
```

这会将你的圆圈移动到 bgroup1 中，因此 bgroup1 现在有你的水平线和你的圆圈：

```
circle.moveTo(bgroup1);
blayer1.draw();
glayer1.draw(); 
```

顺便说一句，我看到您使用的是 2 个单独的图层。我假设 2 层的目的是为了你正在做的其他事情。但是，您不需要 2 层来使圈子共享成为可能。您可以在 1 层上有 2 个组，但仍然只是在 2 个组之间移动圆圈。

# mysql - MySQL 查询 - 连接问题

> ID：15457079
> 
> 赞同：1
> 
> 时间：2013-03-17T03:08:16.977
> 
> 标签：mysql, join, left-join

我有以下查询，它多次重复返回所有相同的行。

我需要加入 2 个表：评论和项目对象，但无论我尝试哪种方式，行都会重复多次。

这是当前的查询：

```
SELECT 
acx_comments.created_on AS 'Time',
acx_project_objects.created_by_id AS `Created By`,  
acx_comments.body AS `Comment`,
concat("http://www.example.com/projects/" , acx_project_objects.project_id , "/tasks/" , acx_project_objects.integer_field_1 ) AS URL
FROM acx_comments, acx_project_objects
LEFT JOIN acx_comments v
ON v.parent_id = acx_project_objects.id 
WHERE acx_comments.id > 1500 AND acx_comments.id <= 1575
ORDER BY acx_comments.created_on DESC 
```

目前的结果是这样的：

时间/创建者/评论/网址

15:35:34 / 1 / 测试评论 X / URLx

15:35:34 / 1 / 测试评论 X / URLx

15:35:34 / 1 / 测试评论 X / URLx

15:35:34 / 1 / 测试评论 X / URLx

15:35:34 / 1 / 测试评论 X / URLx

15:35:34 / 1 / 测试评论 X / URLx

15:35:34 / 1 / 测试评论 X / URLx

如您所见 - 它多次打印相同的评论。

我知道这是因为 acx_comments.parent_id 在连接到 acx_project_objects.id 时有许多重复项 - 有许多评论具有相同的父 ID，因为每个父级可以有多个评论......但我只是想按日期打印一次评论。

我想不出正确的 Join 方法来让它只打印每条评论一次。上面的代码没有给我按日期排序的评论列表（仅限唯一）。

任何建议都将不胜感激，因为我已经花费了几个小时并且无法找出解决方案。

谢谢！

顺便说一句 - 我必须使用项目对象表，因为它需要构造 URL 地址（请参阅 concat 函数）。如果您认为我应该删除该表 - 这是不可能的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T03:12:48.860

```
FROM acx_comments, acx_project_objects
LEFT JOIN acx_comments v
ON v.parent_id = acx_project_objects.id 
```

您在技术上加入了两次 acx_comments。您的 WHERE 子句不包含任何 JOIN 条件，并且您的 ON 子句中的 JOIN 条件仅适用于您的 LEFT JOIN 中指定的“acx_comments v”。

我对正在发生的事情的猜测是，您正在 acx_comments 和 acx_project_objects 之间创建笛卡尔积，因为它们在 WHERE 中以逗号分隔而没有 JOIN 条件。然后你又加入了反对 acx_comments 的烂摊子。

重新编写您的 FROM 和 LEFT JOIN 以便每个表只列出一次，然后试一试。

```
SELECT 
v.created_on AS 'Time',
o.created_by_id AS `Created By`,  
v.body AS `Comment`,
concat("http://www.example.com/projects/" , o.project_id , "/tasks/" , o.integer_field_1 ) AS URL
FROM acx_comments v
LEFT JOIN acx_project_objects o
ON v.parent_id = o.id 
WHERE v.id > 1500 AND v.id <= 1575
ORDER BY v.created_on DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T03:16:03.410

您可以尝试[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/select.html)在评论 ID 上使用 MySQL。

```
SELECT 
  acx_comments.created_on 'Time',
  acx_project_objects.created_by_id 'Created By',  
  acx_comments.body 'Comment',
  concat("http://www.example.com/projects/" , acx_project_objects.project_id , "/tasks/" , acx_project_objects.integer_field_1 ) 'URL'
FROM acx_comments, acx_project_objects
LEFT JOIN acx_comments v ON v.parent_id = acx_project_objects.id 
WHERE acx_comments.id > 1500 AND acx_comments.id <= 1575
GROUP BY acx_comments.id
ORDER BY acx_comments.created_on DESC 
```

# regex - 如果使用正则表达式，则匹配 bash 中的前导点

> ID：15457083
> 
> 赞同：0
> 
> 时间：2013-03-17T03:09:23.563
> 
> 标签：regex, bash

假设我想匹配字符串“.a”中的前导点

所以我输入

> [[ ".a" =~ ^\. ]] && 回声“哈”

哈

> [[“一”=~^\。]] && 回声“哈”

哈

为什么我在这里得到相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:18:53.880

您需要转义它的意义超出句点的点 - 它是正则表达式中的元字符。

```
 [[ "a" =~ ^\. ]] && echo "ha" 
```

在另一个示例中也进行更改。

检查您的 bash 版本 - 我相信您需要 4.0 或更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:56:26.013

之后的版本`=~`之间存在一些兼容性问题。在 Bash 中使用最安全的方法是将 RE 模式放在 var 中：`Bash``3.0``=~`

```
$ pat='^\.foo'
$ [[ .foo =~ $pat ]] && echo yes || echo no
yes
$ [[ foo =~ $pat ]] && echo yes || echo no
no
$ 
```

有关更多详细信息，请参阅[Bash 常见问题页面上的 E14](http://tiswww.case.edu/php/chet/bash/FAQ)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T06:35:36.457

可能是因为 bash 试图处理 "." 作为 \ 字符，如 \n \r 等。

为了告诉 \ & 。作为 2 个单独的字符，请尝试

```
[[ "a" =~ ^\\. ]] && echo ha 
```

# python - 无法让 pip 模块在 python 3.3 中工作

> ID：15457084
> 
> 赞同：0
> 
> 时间：2013-03-17T03:09:44.353
> 
> 标签：python, python-3.x, installation, pip, python-module

正如我所说，我正在使用 Python 3.3，我想知道是否有人可以帮助我让 pip 模块正常工作。

当我使用 help('modules') 查看可用模块列表时，该列表包含“pip”。然后当我尝试“import pip”或“pip install 'module name'”（显然没有引号）时，我收到错误消息。

当我输入“pip install beautifulsoup”时，我得到：

**pip install beautifulsoup**

SyntaxError：无效的语法。

当我尝试：

**“进口点子”**，我得到：

回溯（最近一次通话最后）：

```
File "<pyshell#2>", line 1, in <module>
    import pip
  File "E:\lib\site-packages\pip\__init__.py", line 9, in <module>
    from pip.log import logger
  File "E:\lib\site-packages\pip\log.py", line 7, in <module>
    from pip import backwardcompat
  File "E:\lib\site-packages\pip\backwardcompat\__init__.py", line 27, in <module>
    console_encoding = sys.__stdout__.encoding
AttributeError: 'NoneType' object has no attribute 'encoding' 
```

如果有人可以提供帮助，将不胜感激。祝你好运！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:17:32.257

使用了我通过 Windows cmd 提示成功安装的 get-pip.py ，但无法在 IDLE 中进行导入。这是完整的日志-：

```
C:\Python33\Lib>get-pip.py install
Downloading/unpacking pip
  Downloading pip-1.3.1.tar.gz (247Kb): 247Kb downloaded
  Running setup.py egg_info for package pip

    warning: no files found matching '*.html' under directory 'docs'
    warning: no previously-included files matching '*.txt' found under directory
 'docs\_build'
    no previously-included directories found matching 'docs\_build\_sources'
Installing collected packages: pip
  Found existing installation: pip 1.3.1
    Uninstalling pip:
      Successfully uninstalled pip
  Running setup.py install for pip

    warning: no files found matching '*.html' under directory 'docs'
    warning: no previously-included files matching '*.txt' found under directory
 'docs\_build'
    no previously-included directories found matching 'docs\_build\_sources'
    Installing pip-3.3-script.py script to C:\Python33\Scripts
    Installing pip-3.3.exe script to C:\Python33\Scripts
    Installing pip-script.py script to C:\Python33\Scripts
    Installing pip.exe script to C:\Python33\Scripts
Successfully installed pip
Cleaning up...

C:\Python33\Lib>cd pip-1.3.1

C:\Python33\Lib\pip-1.3.1>cd pip-1.3.1

C:\Python33\Lib\pip-1.3.1\pip-1.3.1>pip install beautifulsoup4
'pip' is not recognized as an internal or external command,
operable program or batch file.

C:\Python33\Lib\pip-1.3.1\pip-1.3.1>cd ..

C:\Python33\Lib\pip-1.3.1>cd..

C:\Python33\Lib>pip install beautifulsoup4
'pip' is not recognized as an internal or external command,
operable program or batch file.

C:\Python33\Lib>python3-pip RPM
'python3-pip' is not recognized as an internal or external command,
operable program or batch file.

C:\Python33\Lib>cd pip-1.3.1

C:\Python33\Lib\pip-1.3.1>cd pip-1.3.1

C:\Python33\Lib\pip-1.3.1\pip-1.3.1>get-pip.py install
Downloading/unpacking pip
  Downloading pip-1.3.1.tar.gz (247Kb): 247Kb downloaded
  Running setup.py egg_info for package pip

    warning: no files found matching '*.html' under directory 'docs'
    warning: no previously-included files matching '*.txt' found under directory
 'docs\_build'
    no previously-included directories found matching 'docs\_build\_sources'
Installing collected packages: pip
  Found existing installation: pip 1.3.1
    Uninstalling pip:
      Successfully uninstalled pip
  Running setup.py install for pip

    warning: no files found matching '*.html' under directory 'docs'
    warning: no previously-included files matching '*.txt' found under directory
 'docs\_build'
    no previously-included directories found matching 'docs\_build\_sources'
    Installing pip-3.3-script.py script to C:\Python33\Scripts
    Installing pip-3.3.exe script to C:\Python33\Scripts
    Installing pip-script.py script to C:\Python33\Scripts
    Installing pip.exe script to C:\Python33\Scripts
Successfully installed pip
Cleaning up...

C:\Python33\Lib\pip-1.3.1\pip-1.3.1>sudo easy_install pandas
'sudo' is not recognized as an internal or external command,
operable program or batch file.

C:\Python33\Lib\pip-1.3.1\pip-1.3.1>setup.py install
running install
running bdist_egg
running egg_info
writing dependency_links to pip.egg-info\dependency_links.txt
writing top-level names to pip.egg-info\top_level.txt
writing pip.egg-info\PKG-INFO
writing requirements to pip.egg-info\requires.txt
writing entry points to pip.egg-info\entry_points.txt
reading manifest file 'pip.egg-info\SOURCES.txt'
reading manifest template 'MANIFEST.in'
warning: no files found matching '*.html' under directory 'docs'
warning: no previously-included files matching '*.txt' found under directory 'do
cs\_build'
no previously-included directories found matching 'docs\_build\_sources'
writing manifest file 'pip.egg-info\SOURCES.txt'
installing library code to build\bdist.win-amd64\egg
running install_lib
running build_py
creating build\bdist.win-amd64\egg
creating build\bdist.win-amd64\egg\pip
creating build\bdist.win-amd64\egg\pip\backwardcompat
copying build\lib\pip\backwardcompat\socket_create_connection.py -> build\bdist.
win-amd64\egg\pip\backwardcompat
copying build\lib\pip\backwardcompat\ssl_match_hostname.py -> build\bdist.win-am
d64\egg\pip\backwardcompat
copying build\lib\pip\backwardcompat\__init__.py -> build\bdist.win-amd64\egg\pi
p\backwardcompat
copying build\lib\pip\basecommand.py -> build\bdist.win-amd64\egg\pip
copying build\lib\pip\baseparser.py -> build\bdist.win-amd64\egg\pip
copying build\lib\pip\cacert.pem -> build\bdist.win-amd64\egg\pip
copying build\lib\pip\cmdoptions.py -> build\bdist.win-amd64\egg\pip
creating build\bdist.win-amd64\egg\pip\commands
copying build\lib\pip\commands\bundle.py -> build\bdist.win-amd64\egg\pip\comman
ds
copying build\lib\pip\commands\completion.py -> build\bdist.win-amd64\egg\pip\co
mmands
copying build\lib\pip\commands\freeze.py -> build\bdist.win-amd64\egg\pip\comman
ds
copying build\lib\pip\commands\help.py -> build\bdist.win-amd64\egg\pip\commands

copying build\lib\pip\commands\install.py -> build\bdist.win-amd64\egg\pip\comma
nds
copying build\lib\pip\commands\list.py -> build\bdist.win-amd64\egg\pip\commands

copying build\lib\pip\commands\search.py -> build\bdist.win-amd64\egg\pip\comman
ds
copying build\lib\pip\commands\show.py -> build\bdist.win-amd64\egg\pip\commands

copying build\lib\pip\commands\uninstall.py -> build\bdist.win-amd64\egg\pip\com
mands
copying build\lib\pip\commands\unzip.py -> build\bdist.win-amd64\egg\pip\command
s
copying build\lib\pip\commands\zip.py -> build\bdist.win-amd64\egg\pip\commands
copying build\lib\pip\commands\__init__.py -> build\bdist.win-amd64\egg\pip\comm
ands
copying build\lib\pip\download.py -> build\bdist.win-amd64\egg\pip
copying build\lib\pip\exceptions.py -> build\bdist.win-amd64\egg\pip
copying build\lib\pip\index.py -> build\bdist.win-amd64\egg\pip
copying build\lib\pip\locations.py -> build\bdist.win-amd64\egg\pip
copying build\lib\pip\log.py -> build\bdist.win-amd64\egg\pip
copying build\lib\pip\req.py -> build\bdist.win-amd64\egg\pip
copying build\lib\pip\runner.py -> build\bdist.win-amd64\egg\pip
copying build\lib\pip\status_codes.py -> build\bdist.win-amd64\egg\pip
copying build\lib\pip\util.py -> build\bdist.win-amd64\egg\pip
creating build\bdist.win-amd64\egg\pip\vcs
copying build\lib\pip\vcs\bazaar.py -> build\bdist.win-amd64\egg\pip\vcs
copying build\lib\pip\vcs\git.py -> build\bdist.win-amd64\egg\pip\vcs
copying build\lib\pip\vcs\mercurial.py -> build\bdist.win-amd64\egg\pip\vcs
copying build\lib\pip\vcs\subversion.py -> build\bdist.win-amd64\egg\pip\vcs
copying build\lib\pip\vcs\__init__.py -> build\bdist.win-amd64\egg\pip\vcs
copying build\lib\pip\__init__.py -> build\bdist.win-amd64\egg\pip
copying build\lib\pip\__main__.py -> build\bdist.win-amd64\egg\pip
byte-compiling build\bdist.win-amd64\egg\pip\backwardcompat\socket_create_connec
tion.py to socket_create_connection.cpython-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\backwardcompat\ssl_match_hostname.p
y to ssl_match_hostname.cpython-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\backwardcompat\__init__.py to __ini
t__.cpython-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\basecommand.py to basecommand.cpyth
on-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\baseparser.py to baseparser.cpython
-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\cmdoptions.py to cmdoptions.cpython
-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\commands\bundle.py to bundle.cpytho
n-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\commands\completion.py to completio
n.cpython-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\commands\freeze.py to freeze.cpytho
n-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\commands\help.py to help.cpython-33
.pyc
byte-compiling build\bdist.win-amd64\egg\pip\commands\install.py to install.cpyt
hon-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\commands\list.py to list.cpython-33
.pyc
byte-compiling build\bdist.win-amd64\egg\pip\commands\search.py to search.cpytho
n-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\commands\show.py to show.cpython-33
.pyc
byte-compiling build\bdist.win-amd64\egg\pip\commands\uninstall.py to uninstall.
cpython-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\commands\unzip.py to unzip.cpython-
33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\commands\zip.py to zip.cpython-33.p
yc
byte-compiling build\bdist.win-amd64\egg\pip\commands\__init__.py to __init__.cp
ython-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\download.py to download.cpython-33.
pyc
byte-compiling build\bdist.win-amd64\egg\pip\exceptions.py to exceptions.cpython
-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\index.py to index.cpython-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\locations.py to locations.cpython-3
3.pyc
byte-compiling build\bdist.win-amd64\egg\pip\log.py to log.cpython-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\req.py to req.cpython-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\runner.py to runner.cpython-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\status_codes.py to status_codes.cpy
thon-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\util.py to util.cpython-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\vcs\bazaar.py to bazaar.cpython-33.
pyc
byte-compiling build\bdist.win-amd64\egg\pip\vcs\git.py to git.cpython-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\vcs\mercurial.py to mercurial.cpyth
on-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\vcs\subversion.py to subversion.cpy
thon-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\vcs\__init__.py to __init__.cpython
-33.pyc
byte-compiling build\bdist.win-amd64\egg\pip\__init__.py to __init__.cpython-33.
pyc
byte-compiling build\bdist.win-amd64\egg\pip\__main__.py to __main__.cpython-33.
pyc
creating build\bdist.win-amd64\egg\EGG-INFO
copying pip.egg-info\PKG-INFO -> build\bdist.win-amd64\egg\EGG-INFO
copying pip.egg-info\SOURCES.txt -> build\bdist.win-amd64\egg\EGG-INFO
copying pip.egg-info\dependency_links.txt -> build\bdist.win-amd64\egg\EGG-INFO
copying pip.egg-info\entry_points.txt -> build\bdist.win-amd64\egg\EGG-INFO
copying pip.egg-info\not-zip-safe -> build\bdist.win-amd64\egg\EGG-INFO
copying pip.egg-info\requires.txt -> build\bdist.win-amd64\egg\EGG-INFO
copying pip.egg-info\top_level.txt -> build\bdist.win-amd64\egg\EGG-INFO
creating 'dist\pip-1.3.1-py3.3.egg' and adding 'build\bdist.win-amd64\egg' to it

removing 'build\bdist.win-amd64\egg' (and everything under it)
Processing pip-1.3.1-py3.3.egg
creating c:\python33\lib\site-packages\pip-1.3.1-py3.3.egg
Extracting pip-1.3.1-py3.3.egg to c:\python33\lib\site-packages
Adding pip 1.3.1 to easy-install.pth file
Installing pip-3.3-script.py script to C:\Python33\Scripts
Installing pip-3.3.exe script to C:\Python33\Scripts
Installing pip-script.py script to C:\Python33\Scripts
Installing pip.exe script to C:\Python33\Scripts

Installed c:\python33\lib\site-packages\pip-1.3.1-py3.3.egg
Processing dependencies for pip==1.3.1
Finished processing dependencies for pip==1.3.1 
```

* * *

在 IDLE 中导入 pip [我使用 Python 3.3.0]

> > >

```
 import pip
Traceback (most recent call last):
  File "<pyshell#5>", line 1, in <module>
    import pip
  File "C:\Python33\lib\site-packages\pip\__init__.py", line 9, in <module>
    from pip.log import logger
  File "C:\Python33\lib\site-packages\pip\log.py", line 7, in <module>
    from pip import backwardcompat
  File "C:\Python33\lib\site-packages\pip\backwardcompat\__init__.py", line 27, in <module>
    console_encoding = sys.__stdout__.encoding
AttributeError: 'NoneType' object has no attribute 'encoding' 
```

# svg - SVG 文件是否会根据其属性自动压缩到尽可能小的像素大小？

> ID：15457085
> 
> 赞同：0
> 
> 时间：2013-03-17T03:09:44.353
> 
> 标签：svg, vector-graphics, pixels, automatic-properties

我正在编写一些在 SVG 中生成图形的代码，我想知道生成的 SVG 文件的大小。例如，对于以下两行：

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
<line x1="0" y1="0" x2="0" y2="400.0" stroke="black" stroke-width="1"/>
<line x1="0" y1="400.0" x2="600.0" y2="400.0" stroke="black" stroke-width="1"/>
</svg> 
```

生成的图像将自动为 600 x 400 像素，对吗？还是我必须做出单独的定义？

# iphone - Retina 的线条和设计

> ID：15457086
> 
> 赞同：0
> 
> 时间：2013-03-17T03:09:45.277
> 
> 标签：iphone, css, web, border, retina-display

我有一个快速的问题，因为我所有的搜索都出现了应用程序设计而不是网页设计的答案。

在为 Retina 设计时，我应该在我的 CSS 中添加什么以使 1px 的水平线显示为 - 1px？我不希望它加倍，但显然我也不能让它变成 0.5px。

还是它应该渲染像素指定的边框？

到目前为止，我所研究的一切都使它变得更加混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:01:32.453

I'm assuming from your tags on the question, that you have a `1px` border created in CSS. There is no need to adjust the border for high density displays. When the border is rendered by the browser, whatever calculations that need to be made for it, will be. So, you'll get a crisp `1px` border in any scenario.

Unfortunately, I cannot locate a resource that states this explicitly. However, I know from my personal experience (developing websites, including mobile) that I never make any adjustments to border thickness for high density displays. I only do this for graphics.

This is one of many reasons why using CSS to create your graphics is useful.

# php - 在 PHP 中创建产品的网格视图

> ID：15457089
> 
> 赞同：0
> 
> 时间：2013-03-17T03:09:50.797
> 
> 标签：php, html, mysql, css

非常新的 PHP 请忍受。

正如您从我的代码片段中看到的那样，我只是在一行下显示产品信息，然后使用 while 重复循环。然后，这显然将我的相关数据显示在一列中，一个列下。

```
while ($row = mysqli_fetch_row($result)){

    echo "<img src=\"images/album1.jpg\"/><br>"; //this will eventually show the product image
    echo "<a href=\"product.php?id=$row[0]\">$row[1] </a><br>"; //this shows the product name
    echo "<strong>&pound$row[2]</strong><br>"; //this shows the product price

            } 
```

我将如何创建网格视图，例如使用列来显示我的数据？我认为这将是某种要添加的循环，并且可能使用表格来显示我的数据？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:12:11.907

您可以通过创建 div 并将该 div 向左浮动这将创建网格视图

```
while ($row = mysqli_fetch_row($result)){
    echo "<div class='container'>";
    echo "<img src=\"images/album1.jpg\"/><br>"; //this will eventually show the product image
    echo "<a href=\"product.php?id=$row[0]\">$row[1] </a><br>"; //this shows the product name
    echo "<strong>&pound$row[2]</strong><br>"; //this shows the product price
    echo "</div>";
    } 
```

和CSS

```
.container{
  float:left;
} 
```

您还可以设置 div 的最大高度和宽度

# node.js - 如何在 Appfog 上设置节点 HTTPS

> ID：15457092
> 
> 赞同：4
> 
> 时间：2013-03-17T03:10:23.563
> 
> 标签：node.js, ssl, https, appfog

appfog 文档的读取方式是，只要您使用他们提供的域，您将获得免费的 SSL。

但据我了解，您需要一个 .KEY 和一个 .CERT 文件才能让 NodeJS 启动 https 服务器。

我错过了什么还是他们真的只支持自定义域上的 https ......？

谢谢姑娘们和伙计们！

有问题的 Appfog 文档：[https ://docs.appfog.com/customize/ssl](https://docs.appfog.com/customize/ssl)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-08T12:43:08.307

您可以立即将 https 与他们提供的域名一起使用，*例如 myapp.aws.af.cm*。当使用他们提供的域名时，AppFog 会处理 SSL 终止，因此您的应用无需执行任何操作。

此外，如果您需要了解请求中使用的协议，则可以查看`X-Forwarded-Proto`AppFog 在路由期间添加的标头。

[自定义域的SSL](https://docs.appfog.com/customize/ssl)信息适用于您使用自己的自定义域时。然后您将需要进行更多设置、ssl 证书等。

# gwt - 在 GWT 画布上放置 3D 立方体的教程

> ID：15457098
> 
> 赞同：1
> 
> 时间：2013-03-17T03:11:35.587
> 
> 标签：gwt, java-3d

有人可以指点我在 GWT Canvas 上放置立方体的教程吗？我只有一个带有 Context2d 和 Canvas 的示例代码和一个带有 SimpleUniverse 的示例。后者我不知道如何集成到 GWT 应用程序中。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:55:24.673

对于支持 WebGL 的浏览器（不是 Internet Explorer，甚至不是 IE 10）（[http://caniuse.com/#feat=webgl](http://caniuse.com/#feat=webgl)），您可以使用[gwt-g3d](https://code.google.com/p/gwt-g3d/)。

对于非 WebGL 浏览器，您可以自己执行透视投影（如果您有立方体的坐标，实际上并不难，请参阅[https://stackoverflow.com/a/2484154/291741](https://stackoverflow.com/a/2484154/291741)），或者可能已经有我还不知道的非 WebGL 3D 的 GWT（或 GWT 兼容）库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T19:27:42.067

一些非 WebGL 示例在这里[https://code.google.com/p/w3dgwt/](https://code.google.com/p/w3dgwt/)

# android - 下拉链接仅适用于 Android Chrome 组合

> ID：15457104
> 
> 赞同：-1
> 
> 时间：2013-03-17T03:12:24.560
> 
> 标签：android, html, css

测试站就在这里。[http://www.ssbmn.com/new/test.php](http://www.ssbmn.com/new/test.php)

任何浏览器都可以工作，除了 Android(Chrome) 触摸链接时它什么都不做。我无法弄清楚这一点。

我这里也有代码。[http://jsfiddle.net/bigdessert/fL3Jg/](http://jsfiddle.net/bigdessert/fL3Jg/)

我认为这与这段代码有关：

```
 .dropdown_1column{
        position:absolute;
        left:-999px; /* Hides the drop down */
    }
    #menu li:hover .dropdown_1column{
        left:0;
        top:53px;
    } 
```

如果我删除这两个，那么下拉菜单总是显示它工作正常。

请记住，唯一不起作用的是 chrome 并且仅适用于 android。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:41:56.140

这似乎是最新版本的 chrome for android 的问题。如果您从 chrome 卸载更新，则 css 菜单可以工作。如果您安装最新的更新，它将不起作用。

我还没有找到解决方法。

# html - 响应式 / bootstrap.css 菜单标题

> ID：15457105
> 
> 赞同：-2
> 
> 时间：2013-03-17T03:12:48.720
> 
> 标签：html, css

不确定是否有人可以帮助我。但这是问题所在。我正在制作一个供个人使用的移动网站，并且用我下载的免费模板玩得很开心......

我想知道如何将标题放在网站的响应式菜单上。在桌面上访问该站点时，正常菜单显示正常。但是，当在移动设备或平板电脑上访问时，网站应该自动折叠菜单（它会这样做），然后显示一个用户可以与之交互的菜单标题。

使用 google chrome 我可以检查元素并找到我可以编辑的 nav.php 或 bootstrap-responsive.css 文件以添加菜单标题。

任何人都可以提供任何见解吗？我不确定我需要发布什么...该网站是[http://bit.ly/15TpCjW](http://bit.ly/15TpCjW)

谢谢！如果我需要提供任何其他信息，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:15:32.463

在 nav.php 文件中的每个图标集下方添加品牌类别（取决于您要编辑的菜单）将完成此操作。

# java - 扩展 ArrayList - 无法实例化类型字符串？

> ID：15457108
> 
> 赞同：2
> 
> 时间：2013-03-17T03:12:55.773
> 
> 标签：java, arraylist

我想延长`ArrayList`. 我想扩展它，使子类只能包含`String`s 而没有其他内容。为什么我的代码中出现错误？

```
import java.util.*;

public class ExtendedStringArray<String> extends ArrayList<String>{

    public String getAString() {
        return new String("Test");  
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T03:15:26.980

您不需要在类声明中使用泛型类型，只需在`extends`子句中：

```
public class ExtendedStringArray extends ArrayList<String> {

    public String getAString() {

        return new String("Test"); 

    }

} 
```

您在这里所说的是`ExtendedStringArray`扩展特定类型的`ArrayList`，`ArrayList`使用类型进行参数化`String`。由于您没有为类的实现使用任何泛型类型参数，因此您不需要`<>`在类声明中使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T03:17:07.543

编译器认为您声明了一个名为 的泛型类型参数`String`，最终隐藏了实际的`String`类。您不能实例化类型参数，因此会出现错误。你反而想要：

```
class ExtendedStringArray extends ArrayList<String> {
     ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T03:17:55.623

因为您`String`在类声明中使用任何一个，或者在它扩展的地方使用。这意味着 String 字面上用作类型变量，您的代码确实等同于

```
public class ExtendedStringArray<T> extends ArrayList<T>{

  public T getAString(){
    return new T("Test"); 
  }

} 
```

但这是不正确的，因为您不能实例化泛型类型的对象`T`。

使用：`class StringArrayList extends ArrayList<String> { ..`以便您指定您正在专门化一个`ArrayList<String>`而不是声明一个泛型类。

# oracle - : 和 ' 运算符是什么意思

> ID：15457109
> 
> 赞同：0
> 
> 时间：2013-03-17T03:13:03.650
> 
> 标签：oracle, stored-procedures, plsql

我必须对具有以下几行的 Oracle 存储过程进行修改。

```
 InsStmt = 'INSERT INTO EMPLOYEE (Emp_cd, Emp_lst_nm, Emp_fst,nm) VALUES
                (:Emp_cd, :Emp_lst_nm, :Emp_fst_nm);';
    varExec :='
    DECLARE
      var1 VARCHAR2(100);
    BEGIN
      var1 := :Emp_cd||:Emp_lst_nm||:Emp_fst_nm;
      '||InsStmt||'
    END;';
   EXECUTE IMMEDIATE varExec USING ip_param_cd, ip_param_lnm, ip_param_fnm; 
```

我对Oracle存储过程只有基本的了解。经过一番研究，我发现 || 运算符用于连接字符串。

但我仍然想知道下面的陈述是什么意思

```
var1 := :Emp_cd||:Emp_lst_nm||:Emp_fst_nm;
      '||InsStmt||' 
```

[我浏览了http://docs.oracle.com/cd/B28359_01/appdev.111/b28843/tdddg_procedures.htm#CIHGDECD](http://docs.oracle.com/cd/B28359_01/appdev.111/b28843/tdddg_procedures.htm#CIHGDECD)上的教程，但找不到任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T03:26:01.113

在触发器上下文之外，该列`:`用于绑定语句中的变量。

例如：

```
EXECUTE IMMEDIATE 'UPDATE mytable SET age = 25 WHERE age = :1' 
     USING IN localVarAge; 
```

在这种情况下，该`:1`值将替换为 的值`localVarAge`。':' 变量出现在准备好的语句中的顺序很重要，而不是它们的实际标签。

在您的代码中，显然缺少一块，这部分`var1 := :Emp_cd||:Emp_lst_nm||:Emp_fst_nm;`应该在引号内。无论如何，这都是有道理的，因为在那之后您有一个结束引号和一个连接。

# javascript - Javascript：使用 CSS 选项卡隐藏/显示内容

> ID：15457113
> 
> 赞同：2
> 
> 时间：2013-03-17T03:14:06.310
> 
> 标签：javascript, css, tabs, navigation

我一整天都在努力让它工作，我已经完成了 95% 的工作！有人可以看看我的代码并帮助我做一件（希望是简单的）事情吗？我有 3 个 CSS 选项卡，单击时会更改样式（活动与非活动），并在下面显示相应的 div 内容。一切正常（至少在 Firefox 中），但让我恼火的是我得到的代码（来自[http://www.digimantra.com/tutorials/simple-tabs-using-javascript-and-css/](http://www.digimantra.com/tutorials/simple-tabs-using-javascript-and-css/)) 使用具有相同内容的“tabContent”和“tab1Content”。这基本上复制了（在代码中）我网站的大部分内容。（用户不会看到差异，但我是干净代码的坚持者，不能让自己使用这种看似草率的解决方法！）有没有办法让这个工作没有重复的内容？（请对我说清楚；我是一名手工编写 xHTML 和 CSS 代码的设计师，我对 js 的了解已经足够危险了，但我无法从头开始编写自己的 js 代码。请原谅我！）

我的完整代码和 css 工作测试在这里：[http ://www.happywivestravel.com/testTabToggle.html](http://www.happywivestravel.com/testTabToggle.html)

有问题的javascript：

```
<script type="text/javascript">
function tabs(x)
{
var lis=document.getElementById("sidebarTabs").childNodes; //gets all the LI from the UL

for(i=0;i<lis.length;i++)
{
  lis[i].className=""; //removes the classname from all the LI
}
x.className="selected"; //the clicked tab gets the classname selected
var res=document.getElementById("tabContent");  //the resource for the main tabContent
var tab=x.id;
switch(tab) //this switch case replaces the tabContent
{
  case "tab1":
    res.innerHTML=document.getElementById("tab1Content").innerHTML;
    break;

  case "tab2":
    res.innerHTML=document.getElementById("tab2Content").innerHTML;
    break;
  case "tab3":
    res.innerHTML=document.getElementById("tab3Content").innerHTML;
    break;
  default:
    res.innerHTML=document.getElementById("tab1Content").innerHTML;
    break;

}
} 
```

的HTML

```
<div class="tabContainer" >
<ul class="digiTabs" id="sidebarTabs">
<li id="tab1" class="selected" onclick="tabs(this);">Overview</li>
<li id="tab2" onclick="tabs(this);">Itinerary</li>
<li id="tab3" onclick="tabs(this);">Destination Info</li>
</ul>

<div id="tabContent"><p>Tab 1 content here...</p></div>
<div id="tab1Content" style="display:none;"><p>Tab 1 content repeated here...</p></div>
<div id="tab2Content" style="display:none;"><p>Tab 2 content here...</p></div>
<div id="tab3Content" style="display:none;"><p>Tab 3 content here...</p></div> 
```

感谢任何对此有任何想法的人。我很接近得到我想要的东西，这很痛苦！=）（为了清楚起见，我的目标是有一个简单的仅css（无图像）选项卡式导航，它会根据活动/非活动选项卡改变外观。我研究过jQuery UI，但它看起来有点庞大我想要，并且我想要更容易/更好地控制 css。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:54:45.000

the css is messed up, but i think it might help u.

**js**

```
$(function(){
    $(".t").bind("click",function(){
        $(".tabContent").each(function(){
        $(this).hide();
        });
    var id = $(this).attr("id");
        $("#t"+id).show();
    });
}); 
```

**html**

```
 <div class="tabContainer" >
  <ul class="digiTabs" id="sidebarTabs">
    <li id="1" class="selected t" >
       Overview</li>

  <li id="2" class="t" >
     Itinerary </li>

   <li id="3" class="t">
      Destination Info</li>

  </ul>
   <div id="t1" style="display:none;" class="tabContent">
<h2>This sight will steal your  breath away!</h2>The Happy Wives are leaving their high heels home and donning a sensible  (albeit cute) pair of hiking boots for this adventure to Peru. Discover the ancient city of  Cusco, explore the ruins that lie along the Sacred Valley, and marvel at the lost Incan  city of Machu Picchu that's nestled atop the Andes Mountains. The Happy Wives turn this  traditional backpacker's adventure into a tour with class and style! (Backpack optional.)  [...]</div>    

<div id="t2"  class="tabContent" style="font-family:'Lucida Sans Unicode', 'Lucida     Grande', sans-serif; font-size: 13px;display:none">
<p class="sale" style="border-bottom: 1px #666666;">YOUR TOUR INCLUDES:</p>
<ul class="tourIncludes">
<li>Roundtrip airfare from Minneapolis</li>
<li>9 nights in hand-picked hotels</li>
<li>Breakfast daily plus 1 dinner</li>
<li>Private driver to/from Sacred Valley</li>
<li>English-speaking guided tours in Lima, Cusco, and at Machu Picchu</li>
<li>2 days at Machu Picchu, including train/bus transportation</li>
<li>Your own personal travel assistant to guide you through Peru</li>
</ul>
 </div>  
 <div id="t3" class="tabContent" style="display:none;">The standard chunk of Lorem   Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from "de Finibus Bonorum et Malorum" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham.    </div>  

</div> 
```

check this [JSFIDDLE DEMO](http://jsfiddle.net/NIkhar/NRkL9/2/)

**updated js**

```
$(function(){

    $(".t").bind("click",function(){
        $(".t").each(function(){
         $(this).removeClass("selected");
        });
        $(this).addClass("selected");
        $(".tabContent").each(function(){
        $(this).hide();
        });
    var id = $(this).attr("id");
        $("#t"+id).show();
    var res=document.getElementById("tabContent");
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:36:33.570

只是为了完成，如果其他人遇到同样的问题，这里是完整的工作代码：

```
<!-- styles and scripts for sub nav tabs -->
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<style type="text/css">
.tabContainer {
margin: 0;
}
.tabContainer .digiTabs {
list-style: none;
display: block;
overflow: hidden;
margin: 0;
padding: 0px;
position: relative;
top: 1px;

}
.tabContainer .digiTabs li {
float: left;
background-color: #e7e5df;
padding: 5px 15px!important;
cursor: pointer;
border-bottom:none;
margin-right: 1px;
color: #801350;
font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
font-size: 14px;
}
.tabContainer .digiTabs .selected {
background-color: #fff;
color: #393939;
border-left: 1px solid #000;
border-top: 1px solid #000;
border-right: 1px solid #000;
}
.tabContent {
padding: 20px;
background-color: #fff;
overflow: hidden;
float: left;
border: 1px solid #000;
}
</style>

<script type="text/javascript">
$(function(){

$(".t").bind("click",function(){
    $(".t").each(function(){
     $(this).removeClass("selected");
    });
    $(this).addClass("selected");
    $(".tabContent").each(function(){
    $(this).hide();
    });
var id = $(this).attr("id");
    $("#t"+id).show();
var res=document.getElementById("tabContent");
});

});
</script>
<!-- end styles/scripts for subnav tabs -->

<!-- begin html container for tabs and content -->
<div class="tabContainer">
<ul class="digiTabs">
<li id="1" class="selected t">Overview</li>
<li id="2" class="t">Itinerary</li>
<li id="3" class="t">Destination Info</li>
</ul>

<!-- TAB 1 -->
<div id="t1" class="tabContent" style="display: block;">
<p>Content for tab 1.</p>
</div>
<!-- end tab 1 content -->

<!-- TAB 2 --> 
<div id="t2" class="tabContent" style="display: none;">
<p>Content for tab 2.</p>
</div>  
<!-- end tab 2 content -->

<!-- TAB 3 -->
<div id="t3" class="tabContent" style="display: none;">
<p>Content for tab 3.</p>
</div>  
<!-- end tab 3 content -->

</div>
<!-- end div class tabContainer --> 
```

再次感谢 Nikhar 提供的所有出色帮助！=)

# ios - 在应用程序购买从服务器动态添加项目

> ID：15457115
> 
> 赞同：2
> 
> 时间：2013-03-17T03:14:18.167
> 
> 标签：ios, ios4, in-app-purchase

我正在开发一个歌唱应用程序，人们可以在其中购买我们的货币和歌曲的背景音乐。很明显，货币是消耗品类型，但是我对背景音乐（或节拍）感到困惑，因为我有以下条件。

1.  背景音乐必须通过应用内购买购买，而不是用我们的货币购买（我们与音乐提供商达成协议）。
2.  可能有数百首音乐经常更新，我无法在 iTunes Connect 中手动注册它们。3\. 我们有一个服务器存储这些音乐，理想的流程是用户购买特定的 bg 音乐，然后他可以将其下载到设备中，我们也在服务器端保存记录。

我首先考虑创建一个通用项目“Beat”。无论特定BG音乐用户购买什么，我都将其视为购买了这个“Beat”项目。如果可能，该项目应该是什么类型？还是有另一种方法可以自动注册这些音乐？（获取产品编号）

除了这部分之外，该应用程序几乎完成了。我现在有点担心。提前感谢您的帮助。

# c++ - QTreeView 显示的树区域未扩展到其父窗口小部件？

> ID：15457116
> 
> 赞同：0
> 
> 时间：2013-03-17T03:14:29.513
> 
> 标签：c++, qt, view, model, qtreeview

我使用`QTreeView`and`QStandardItemModel`将其内容（从 xml 文件中读取）显示在`tree view`. 文件解析器工作正常，但是当我使用视图显示数据时，`sizePolicy`它就不起作用。
为什么？如何使树的面积扩大？
（如下所示，哪个树视图没有展开？）

树的展示图片：
![在此处输入图像描述](../Images/bc204326524afaae5700d29327e8cdd8.png)

代码（编辑以添加“布局”部分，但也不起作用。）：

```
...
QStandardItemModel *model = new QStandardItemModel();
preOrder(doc.firstChild(), model);
view = new QTreeView(pageDetails);
view->setModel(model);

model->setHorizontalHeaderLabels(QStringList(""));

QHBoxLayout* lay=new QHBoxLayout(pageDetails);
lay->setContentsMargins(0, 0, 0, 0);
lay->addWidget(view);
view->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);
pageDetails->setLayout(lay);

view->show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:55:14.683

我现在解决了问题：
![在此处输入图像描述](../Images/b0590fd20345ab3bf9482b02c221d50e.png)

但是还是不知道怎么去掉header...
**问题是Qt Designer引起的。**我用它来添加父小部件 ui，但在设计器中将其设置为水平布局（有点难找）。
我只是不知道为什么上面的代码在这种情况下不起作用。

PS：
如果我留下代码评论：

```
//QHBoxLayout* lay=new QHBoxLayout(pageDetails);
//lay->setContentsMargins(0, 0, 0, 0);
//lay->addWidget(view);
//view->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);
//pageDetails->setLayout(lay); 
```

它出现：
![在此处输入图像描述](../Images/3af40b7acc1b36eb667f757b338fda79.png)

PS2：
成功删除标题！：
评论`model->setHorizontalHeaderLabels(QStringList(""));`
添加`view->header()->setVisible(false);`

# ruby-on-rails - 耙中止！“actionmailer”的未定义方法“名称”：字符串

> ID：15457117
> 
> 赞同：0
> 
> 时间：2013-03-17T03:14:31.250
> 
> 标签：ruby-on-rails, rake, ruby-on-rails-2

我在启动 rails 项目时遇到问题。我的环境：

```
 rails -v
2.3.2
ruby -v 
1.8.7 (2012-10-12 patchlevel 371) [i686-darwin11.4.2]
gem -v 
1.8.6 

```

当我尝试启动 rails 时：

```
 $ script/server
/Users/bmalets/.rvm/gems/ruby-1.8.7-p371@global/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:55: uninitialized constant ActiveSupport::Dependencies::Mutex (NameError)
    from /Users/bmalets/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /Users/bmalets/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /Users/bmalets/.rvm/gems/ruby-1.8.7-p371@global/gems/activesupport-2.3.2/lib/active_support.rb:56
    from /Users/bmalets/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /Users/bmalets/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /Users/bmalets/.rvm/gems/ruby-1.8.7-p371@global/gems/rails-2.3.2/lib/commands/server.rb:1
    from /Users/bmalets/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /Users/bmalets/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from script/server:3 
```

请帮我解决这个问题。

当我尝试安装 gems 时，我有：

```
 $ rake gems:install
(in /Users/bmalets/Documents/ror_projects/myapp)
rake aborted!
undefined method `name' for "actionmailer":String 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:24:41.833

我重新安装了 ruby​​gems，它有帮助。

# jquery - jCarousel 导航和 looperslider 不起作用

> ID：15457118
> 
> 赞同：0
> 
> 时间：2013-03-17T03:14:42.040
> 
> 标签：jquery, jcarousel

当我单击此页面的 jCarousel 脚本中的缩略图（以及 loopedslider 插件）时，出现以下错误：（[http://www.mamaisonmoncondo.ca/propriete/maison-a-etages-a-vendre-lancienne-lorette](http://www.mamaisonmoncondo.ca/propriete/maison-a-etages-a-vendre-lancienne-lorette)）：

未捕获的错误：语法错误，无法识别的表达式：[object Object][rel="2"]

但它似乎在该示例演示页面上正常工作：http: [//demo.woothemes.com/estate/property/desert-wing-house/](http://demo.woothemes.com/estate/property/desert-wing-house/)

这肯定是一件很容易解决的事情，但我自己无法弄清楚......任何帮助都会非常有帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:01:14.077

LoopedSlider 插件不适用于 jQuery 1.8.3（或至少在我的情况下）。我将 jquery 降级到 1.8.0，它现在可以工作了。

# batch-file - set /p 没有像宣传的那样工作

> ID：15457120
> 
> 赞同：2
> 
> 时间：2013-03-17T03:15:14.187
> 
> 标签：batch-file

我在将输入从文件重定向到 set/p 时遇到问题

这是我的脚本：

```
@echo off
echo Reading: {%1}
type %1
echo(
echo Starting...
set VAR=
set /P VAR=<%1
echo VAR is {%VAR%}... 
```

我在其他地方（[https://stackoverflow.com/a/7827243](https://stackoverflow.com/a/7827243)）读到我使用的语法会起作用。它不是！

这是我的输出：

```
Reading: {Fruit.txt}
Pears
Apples
Oranges
Kiwi
Grapes
Kumquat

Starting...
VAR is { ■P}... 
```

所以 - 什么给了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T04:29:41.213

您的文件是 Unicode (UTF16) 格式，并且 SET /P 不适用于 Unicode。TYPE 命令确实适用于 Unicode，并将输出转换为 ANSI。您可以将 TYPE 的输出重定向到新的文本文件，然后您的 SET /P 将起作用。

```
@echo off
type %1>new.txt
set VAR=
set /P VAR=<new.txt
echo VAR is {%VAR%}... 
```

**编辑**

要获得第二行而不是第一行：

```
@echo off
type %1>new.txt
<new.txt (
  set /P VAR=
  set VAR=
  set /P VAR=
)
echo VAR is {%VAR%}... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T03:47:27.147

如果目的是从文件中读取文本行，为什么需要**set /p**命令？

```
for /f "delims=" %%a in ('type "file name.txt"') do echo %%a 
```

如果您在 cmd.exe 命令行中键入命令，您将编写 %a（一个 % 符号）而不是 %%a（即，在 shell 脚本 [批处理文件] 中使用时，将 % 符号加倍）。

账单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:52:22.053

这是另一种使用**for /f**和不依赖于**set /p的****类型**仅读取文件第一行的技术：

 **```
@echo off
setlocal enableextensions enabledelayedexpansion
set VAR=
set CURRLINE=0
for /f "delims=" %%a in ('type "test.txt"') do (
  set /a CURRLINE+=1
  if !CURRLINE! EQU 1 (
    set VAR=%%a
    goto :DONE
  )
)
:DONE
echo %VAR%
endlocal 
```

这里的优点是不需要写出单独的文件。

但是，请注意，这些方法中的任何一种（**set /p**或**for /f** with **type ）都会在输入文件（** **<**、**>**、**|**等）中出现特殊 shell 字符的问题。为了解决这个问题，可以使用我不久前编写的一个名为 shellesc.exe ( [http://www.westmesatech.com/sst.html](http://www.westmesatech.com/sst.html) ) 的小实用程序来“转义”特殊字符。但是如果你使用这些工具，那么你也可以使用 linex.exe 来选择你想要的行，并用更少的代码得到结果：

```
@echo off
setlocal enableextensions
set VAR=
for /f "delims=" %%a in ('type "test.txt" ^| linex -l 1 ^| shellesc') do set VAR=%%a
echo %VAR%
endlocal 
```

请注意，这种方法还有一个额外的优势，即不会“阻塞”特殊的 shell 字符 (shellesc)。

高温下，

账单**

# php - Cakephp Auth：绕过登录

> ID：15457125
> 
> 赞同：0
> 
> 时间：2013-03-17T03:15:57.723
> 
> 标签：php, cakephp, cakephp-2.0

我正在开发一个 CakePHP 应用程序，它是另一个以不同技术 (ColdFusion) 开发的应用程序的一部分/子。这两个应用程序都有自己的登录功能，并且它们是必需的。CakePHP 中的登录功能是通过 AUTH 和 ACL 实现的。现在的要求是，当用户登录在 ColdFusion 中开发的父应用程序时，用户应该直接转到受保护的页面/仪表板而不登录。我想要一种绕过 Auth 提供的登录功能的方法。

谢谢，

基兰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T03:22:44.350

> 我想要一种绕过 Auth 提供的登录功能的方法。

您可能不知道，您可能希望能够自动登录用户，[而 Auth 支持](https://stackoverflow.com/questions/9650605/cakephp-2-0-automatic-login-after-account-activation).

您需要有某种方式让您的 PHP 代码调用 ColdFusion，以基于某些共享机密（例如，应用程序的 ColdFusion 部分的登录 cookie）对用户进行身份验证，然后在用户通过身份验证时自动登录。

# windows - 等待批处理文件直到指定时间

> ID：15457127
> 
> 赞同：4
> 
> 时间：2013-03-17T03:15:59.237
> 
> 标签：windows, windows-8, batch-file

我想在指定时间通过批处理文件启动应用程序。我可以使用以下方法启动它：

```
@echo off
start notepad c:\test.txt 
```

但是如何让批处理文件在指定时间启动任务呢？批处理文件中会提到时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T03:28:46.027

该`at`命令看起来很有希望。试试看[这个](http://support.microsoft.com/kb/313565)。

看来，如果您输入`at 15:00 "echo Done"`，命令提示符将在当天（或之后）下午 3:00 输出“完成”。

这是`at`命令的文档

```
AT [\\computername] [ [id] [/DELETE] | /DELETE [/YES]]
AT [\\computername] time [/INTERACTIVE]
    [ /EVERY:date[,...] | /NEXT:date[,...]] "command"

\\computername     Specifies a remote computer. Commands are scheduled on the
                   local computer if this parameter is omitted.
id                 Is an identification number assigned to a scheduled
                   command.
/delete            Cancels a scheduled command. If id is omitted, all the
                   scheduled commands on the computer are canceled.
/yes               Used with cancel all jobs command when no further
                   confirmation is desired.
time               Specifies the time when command is to run.
/interactive       Allows the job to interact with the desktop of the user
                   who is logged on at the time the job runs.
/every:date[,...]  Runs the command on each specified day(s) of the week or
                   month. If date is omitted, the current day of the month
                   is assumed.
/next:date[,...]   Runs the specified command on the next occurrence of the
                   day (for example, next Thursday).  If date is omitted, the
                   current day of the month is assumed.
"command"          Is the Windows NT command, or batch program to be run. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T03:21:05.230

你可以使用这个：

```
@echo off
timeout 5
start notepad c:\test.txt 
```

# java - 如何进行更快的广度优先搜索？

> ID：15457132
> 
> 赞同：0
> 
> 时间：2013-03-17T03:16:21.233
> 
> 标签：java

因此，我平均能够在 22 毫秒内解决一个 200x200 的迷宫（就像没有任何图形的 pacman）。我使用了四个邻居（上、右、左和下）的节点链表。我使用了 FileWriter、文件读取器、缓冲区方法，并使用 BFS 算法从起点到目标进行搜索。如前所述，所有这些任务在 200x200 的迷宫中总共花费了 22 毫秒。我想知道专门使用 Queue 接口是否有助于加快进程。我知道LinkedList实现了Queue，所以我只是使用了LinkedList。关于让它更快的任何建议？

注意：我尽我最大的努力使每种方法都没有太多的 for 循环。仅在编写文件时才使用两个 for 循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:01:37.297

If you use a grid and recursion, you can avoid actually using a loop at all.

Something like

```
public static void main(String... ignored) {
    search(2, 2, "..........\n" +
            ".########.\n" +
            "...#......\n" +
            "#####.####\n" +
            "X.........\n");
}

public static boolean search(int x, int y, String grid) {
    String[] rows = grid.split("\n");
    char[][] grid2 = new char[rows.length][];
    for (int i = 0; i < rows.length; i++) {
        String row = rows[i];
        grid2[i] = row.toCharArray();
    }
    return search(x, y, grid2);
}

public static boolean search(int x, int y, char[][] grid) {
    if (x < 0 || x >= grid.length || y < 0 || y > grid[0].length)
        return false;
    char ch = grid[x][y];
    if (ch == 'X') {
        System.out.println("End " + x + ", " + y);
        return true;
    }
    // - is been here before
    // # is a wall.
    if (ch == '-' || ch == '#') {
        return false;
    }
    grid[x][y] = '-'; // been here before.
    boolean found = search(x - 1, y, grid) || search(x + 1, y, grid)
            || search(x, y - 1, grid) || search(x, y + 1, grid);
    grid[x][y] = ch;
    if (found)
        System.out.println("... " + x + ", " + y);
    return found;
} 
```

prints (in reverse order to avoid creating a list of co-ordinates)

```
End 4, 0
... 4, 1
... 4, 2
... 4, 3
... 4, 4
... 4, 5
... 3, 5
... 2, 5
... 2, 6
... 2, 7
... 2, 8
... 2, 9
... 1, 9
... 0, 9
... 0, 8
... 0, 7
... 0, 6
... 0, 5
... 0, 4
... 0, 3
... 0, 2
... 0, 1
... 0, 0
... 1, 0
... 2, 0
... 2, 1
... 2, 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:58:12.647

一些直接跳入脑海的想法如下，请务必在进行时进行测量：

1）将所有数据存储在一个数组中，并确保以标准的“步长”大小迭代数组。这将使 CPU 更容易预测内存访问。链表倾向于将对象分散在内存中，使 cpus 在需要数据之前更难预取数据。这往往会导致 CPU 在等待从主内存加载数据时停止。

2) 优化文件 io 并确保它没有停止。预先分配文件的大小有助于防止在操作系统调整文件大小时停止。内存映射文件也可能有很大帮助，但里程确实有所不同。

3) 将执行工作的线程固定到 CPU 上的单个内核。这将最大限度地提高 CPU 缓存命中率，我经常看到仅此一项就提高了 5 倍。

4) 如果您发现自己经常修改数组并检查其长度。请注意，java 将数组长度存储在数组内容旁边，因此写入数组元素可能会使保存 array.lengt 值的同一缓存行无效。如果发生这种情况，那么 CPU 将停止，因此将长度存储在一个绝望的变量或常量中。

5) 检查你的算法是否有重复的工作和流水线

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T03:24:57.177

这实际上取决于您使用的访问模式。您不会看到 Queue 和 LinkedList 之间有很大的区别。如果您按位置访问元素，则 ArrayList 实际上可能更快。

此外，如果您正在查看整个事情的整体表现，您是否细分了每个主要部分需要多长时间？例如，将 FileReader 包装在 BufferedReader 中可能会显着加快文件读取部分的速度。

# ios - Parse for iOS：尝试运行应用程序时出错

> ID：15457136
> 
> 赞同：80
> 
> 时间：2013-03-17T03:17:33.237
> 
> 标签：ios, parse-platform

我一直在使用 Parse SDK，并按照快速指南进行操作。当我尝试运行时，我得到了这 8 个错误。关于为什么的任何想法？它看起来与我没有使用的 Parse 的 Facebook 部分有关。

```
 Undefined symbols for architecture armv7:
"_FBTokenInformationTokenKey", referenced from:
  -[PFFacebookTokenCachingStrategy accessToken] in Parse(PFFacebookTokenCachingStrategy.o)
  -[PFFacebookTokenCachingStrategy setAccessToken:] in Parse(PFFacebookTokenCachingStrategy.o)
 "_FBTokenInformationExpirationDateKey", referenced from:
  -[PFFacebookTokenCachingStrategy cacheTokenInformation:] in     Parse(PFFacebookTokenCachingStrategy.o)
  -[PFFacebookTokenCachingStrategy expirationDate] in Parse(PFFacebookTokenCachingStrategy.o)
  -[PFFacebookTokenCachingStrategy setExpirationDate:] in Parse(PFFacebookTokenCachingStrategy.o)
 "_OBJC_METACLASS_$_FBSessionTokenCachingStrategy", referenced from:
  _OBJC_METACLASS_$_PFFacebookTokenCachingStrategy in Parse(PFFacebookTokenCachingStrategy.o)
"_OBJC_CLASS_$_FBSessionTokenCachingStrategy", referenced from:
  _OBJC_CLASS_$_PFFacebookTokenCachingStrategy in Parse(PFFacebookTokenCachingStrategy.o)
"_FBTokenInformationUserFBIDKey", referenced from:
  -[PFFacebookTokenCachingStrategy facebookId] in Parse(PFFacebookTokenCachingStrategy.o)
  -[PFFacebookTokenCachingStrategy setFacebookId:] in Parse(PFFacebookTokenCachingStrategy.o)
"_OBJC_CLASS_$_FBRequest", referenced from:
  objc-class-ref in Parse(PFFacebookAuthenticationProvider.o)
"_OBJC_CLASS_$_FBSession", referenced from:
  objc-class-ref in Parse(PFFacebookAuthenticationProvider.o)
 ld: symbol(s) not found for architecture armv7
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-03-17T19:46:15.967

这是与 Parse iOS 1.1.33 版本相关的某种错误，因为多人看到相同的错误 - 包括我自己。

有几个解决方法-

如果您没有使用需要 -ObjC 链接器标志的库，则可以从项目中删除 -ObjC：

构建设置 > 其他链接器标志 > 删除 -ObjC

或者，如果您使用需要该标志的库，则可以添加 Facebook SDK。

这两个选项都将消除错误。希望他们能解决这个问题，因为我的应用程序中不需要 Facebook SDK。

关注这里的讨论：

[https://parse.com/questions/cocoapods-incompatibility](https://parse.com/questions/cocoapods-incompatibility)

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2013-09-05T01:08:35.617

这是一个可能比下载、编译和安装 FB 工具包更简单的解决方法，后者有点大而且很麻烦。请注意，当然，您将无法在 Parse 中使用任何 FB 类型功能，如果您触发任何期望使用这些虚拟符号的 Parse 代码，您将遇到严重问题。但是，如果你远离他们，我想你会没事的。所以...

1.  在您的应用程序中创建一个名为 FBMissingSymbols 的对象

2.  删除你不需要的 .h

3.  把它放在 .m 中：

```
NSString *FBTokenInformationExpirationDateKey = @"";
NSString *FBTokenInformationTokenKey = @"";
NSString *FBTokenInformationUserFBIDKey = @"";
@interface FBAppCall:NSObject
@end
@implementation FBAppCall
@end
@interface FBRequest:NSObject
@end
@implementation FBRequest
@end
@interface FBSession:NSObject
@end
@implementation FBSession
@end
@interface FBSessionTokenCaching:NSObject
@end
@implementation FBSessionTokenCaching
@end
@interface FBSessionTokenCachingStrategy:NSObject
@end
@implementation FBSessionTokenCachingStrategy
@end 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-04-29T15:33:57.913

您必须删除旧的`ParseFacebookUtils.framework`并保留新`ParseFacebookUtilsV4.framework`的才能使其正常工作。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2014-05-29T01:09:04.833

我喜欢 dbquarrel 的回答，但它不再起作用了，因为它缺少一些新的社会阶层。

所以做同样的事情，但是，添加这个：

```
NSString *FBTokenInformationExpirationDateKey = @"";
NSString *FBTokenInformationTokenKey = @"";
NSString *FBTokenInformationUserFBIDKey = @"";
NSString *SLServiceTypeTwitter = @"";
NSString *ACAccountTypeIdentifierTwitter = @"";
@interface FBAppCall:NSObject
@end
@implementation FBAppCall
@end
@interface FBRequest:NSObject
@end
@implementation FBRequest
@end
@interface FBSession:NSObject
@end
@implementation FBSession
@end
@interface FBSessionTokenCaching:NSObject
@end
@implementation FBSessionTokenCaching
@end
@interface FBSessionTokenCachingStrategy:NSObject
@end
@implementation FBSessionTokenCachingStrategy
@end
@interface ACAccountStore:NSObject
@end
@implementation ACAccountStore
@end
@interface SLRequest:NSObject
@end
@implementation SLRequest
@end
@interface SLComposeViewController:NSObject
@end
@implementation SLComposeViewController
@end 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-06-07T22:27:40.373

检查并确保您没有添加两个版本的“ParseFacebookUtils”框架：

ParseFacebookUtilsV4 和 ParseFacebookUtils

一旦我删除了 ParseFacebookUtils，并保留了 ParseFacebookUtilsV4，它就可以正常工作了。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-06-14T18:01:59.840

我的解决方案肯定会起作用，您可以在其他链接器标志中使用 -ObjC。

1.  添加“Social.framework”，“Account.framework”
2.  添加“FacebookSDK.framework”

干杯......现在它可以工作......并且不需要删除-ObjC。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-17T10:26:37.167

听起来您可能需要添加“Accounts.Framework”和/或“Social.Framework”。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-06-05T10:12:05.667

对@blueHula 答案的补充。Parse 已从其框架中删除了 Facebook SDK，这意味着从某些特定版本（可能是 1.1.33）集成 parse.framework 应该伴随着独立集成 FB SDK。

请使用 parse ios sdk 参考此链接[，不包括 facebook sdk](https://www.parse.com/questions/using-the-parse-ios-sdk-without-including-the-facebook-sdk)

关键点是用来`-force_load $(SRCROOT)/path/libname.a`链接必要的第三方库，而不是使用`-all_load`和`-ObjC`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-17T03:32:58.163

这是一个链接器错误...您的项目中没有包含所需的框架，您在其中一个包含的头文件中引用了该框架。

因此，例如，如果您的代码中有一个包含：

```
#import <Parse/Parse.h> 
```

它可能需要一个支持框架，并且您必须将其包含在您的应用程序中。`parse.framework`您是否在 Xcode 中包含了from ？

![Xcode 框架](../Images/109db5cf77a7ed38746e54c20a733c72.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-05-28T16:15:38.827

我有同样的用途，唯一的第三方是 PayPal SDK。删除 -ObjC 后一切正常。（始终在更改设置之前备份您的项目）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-07-16T22:06:21.423

现在是 2015 年，我也遇到了同样的错误。不幸的是，以上答案都不适合我。但这确实：

**Target > Build Phases > Link Binary With Libraries** **然后添加 libstdc++.6.dylib**

这为我解决了这个问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-01-29T07:06:01.997

有许多框架需要将 -ObjC 标志设置为其他链接标志，而 Parse 不允许您这样做。要解决此问题，您可以执行以下操作之一。我已经展示了需要 -ObjC 标志的 Google Maps SDK 示例，但由于 Parse 在同一个项目中，我不能直接使用它：

**解决方案 1 - 使用 force_load 标志**

不要将 -ObjC 标志设置为其他链接标志，而是使用 force_load 标志来加载特定的框架或库。

```
-force_load $(SRCROOT)/GoogleMaps.framework/Versions/A/GoogleMaps 
```

**解决方案 2 - 使用 Facebook SDK**

只需将 Facebook SDK 添加为单独的框架，这将允许您使用 -ObjC 标志。还要确保您已添加`Accounts.framework`和`Social.framework`。如果您添加了 Bolt.framework 并使用 Parse 空白项目然后处理重复符号 remove `Bolt.framwork`。如果仍然有一些错误，则删除 Accounts and Social 框架并再次添加（如果您使用了 Parse 默认空白项目，则会出现这种情况）。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2014-01-16T07:23:04.030

我被这个问题困扰了很多天。我使用 cocoapods 来管理所有第三个 SDK。

这是我解决此问题的方法。转到 pod 项目并将“仅构建架构”项设置为 NO。

重建 pod 项目，然后链接错误消失了！help this 可以帮助正在使用 cocoapods 的人。![在此处输入图像描述](../Images/b6ce4a8fad07c1100edba164974ba449.png)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-05-21T14:28:51.303

我有同样的问题。我通过从这里下载以前的版本（1.1.32）解决了：

[https://parse.com/downloads/ios/parse-library/1.1.32](https://parse.com/downloads/ios/parse-library/1.1.32)

（就我而言，我需要 -ObjC 标志）

编辑：似乎该版本不适用于 64 位架构。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-07-22T21:13:22.533

这可以从位于 `<projectname>/cordova/<projectname>/platforms/ios/<projectname>.xcodeproj/project.pbxproj`和的项目文件中删除

搜索文件`-ObjC`，有多个位置。它看起来像这样：

```
OTHER_LDFLAGS = (
    "-weak_framework",
    CoreFoundation,
    "-weak_framework",
    UIKit,
    "-weak_framework",
    AVFoundation,
    "-weak_framework",
    CoreMedia,
    "-weak-lSystem",
    "-force_load",
    "\"$(BUILT_PRODUCTS_DIR)/libCordova.a\"",
    "-ObjC",
); 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2015-07-06T18:41:04.450

安装 cocoaPods 并将其添加到您的 Podfile：

```
pod 'Facebook-iOS-SDK'
pod 'Parse'
pod 'ParseFacebookUtils' 
```

# unix - Automake：AM_CFLAGS 无效

> ID：15457140
> 
> 赞同：4
> 
> 时间：2013-03-17T03:18:13.800
> 
> 标签：unix, gcc, compilation, autotools, automake

我正在尝试在 Automake 中添加一些编译选项，但这些方法都不起作用。

这是我的`configure.ac`：

```
AC_INIT(...)
AC_PREREQ([2.59])
AC_CONFIG_AUX_DIR([build-aux])
AM_INIT_AUTOMAKE([1.10 foreign -Wall no-define])
AC_PROG_CXX
AC_PROG_LIBTOOL
AC_CONFIG_HEADERS([config.h])
AC_CONFIG_FILES([Makefile src/Makefile test/Makefile])
AC_LANG(C++)
AC_OUTPUT 
```

我有父母`Makefile.am`（在顶级目录中）：

```
#AM_CFLAGS = ... # doesn't work
AUTOMAKE_OPTIONS = subdir-objects
ACLOCAL_AMFLAGS = ${ACLOCAL_FLAGS}
SUBDIRS = src test
dist_noinst_SCRIPTS = autogen.sh 
```

和`Makefile.am`每个源目录一个；`src/Makefile`：

```
include_HEADERS = ...
lib_LIBRARIES = ... 
```

和`test/Makefile`：

```
#AM_CFLAGS = ... # doesn't work
bin_PROGRAMS = myprog #test
myprog_SOURCES = ...
myprog_LDADD = ../src/libmylib.a
#myprog_CFLAGS = ... # Doesn't work either 
```

我尝试取消注释所有注释行的组合，即：

*   添加`AM_CFLAGS = ...`到父`Makefile.am`级 - 这应该为所有受影响的源设置 CFLAGS
*   添加`AM_CFLAGS = ...`到其他两个`Makefile.am`s
*   将 myprog_ 添加`CFLAGS = ...`到 Makefile.am（这应该在编译 myprog 时设置 CFLAGS）

但这些都没有任何影响。我的程序 ( `myprog`) 和它的库 ( `mylib`) 都在编译/链接一些默认标志，这些标志类似于`-DHAVE_CONFIG -g -O2`.

我也尝试过使用`INCLUDES`而不是`AM_CFLAGS`，但没有帮助。

任何人都知道这里发生了什么以及如何解决它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T04:09:20.630

1.  看起来您正在编译 C++，在这种情况下要使用的变量是`AM_CXXFLAGS`.
2.  设置`AM_CXXFLAGS`应该在`Makefile.am`声明您实际编译的内容的 中（即 , `bin_PROGRAMS`, `lib_LTLIBRARIES`...）。
3.  如果您在重复自己，请不要忘记 automake 支持`include`声明。
4.  递归使得认为是有害的。现代 automake 支持`subdir-objects`. 如果`Makefile.am`失控，请使用`include`语句。
5.  打开 libtool 的现代方法是`LT_INIT`，而不是`AC_PROG_LIBTOOL`.
6.  `AC_LANG(C++)`不做任何事情`configure.ac`。它设置运行配置测试时使用的语言。此外，`AC_LANG_PUSH`并且`AC_LANG_POP`是更聪明的方法。
7.  你为什么要`ACLOCAL_AMFLAGS`这样分配？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-11T20:12:35.377

我尝试`AM_CFLAGS`按照建议添加到父 Makefile.am，但没有成功。当我将它添加到相关的 Makefile.am 中时，它最终引入了两个冲突`-g`的选项，如下所示：

```
libtool: link: gcc -std=gnu99 -g -O0 -g -O2 -Wl -pthread ... 
```

禁用优化的正确方法是在`CFLAGS = -g -O0`需要的地方添加到 Makefile.am。如果更改由于某种原因没有生效，请尝试删除 Makefile.in 和 Makefile（无扩展名）。

这是正确的链接器指令：

```
libtool: link: gcc -std=gnu99 -g -O0 -Wl -pthread ... 
```

# spring - JSR 303 中的 GroupSequence 和评估顺序

> ID：15457141
> 
> 赞同：0
> 
> 时间：2013-03-17T03:18:21.130
> 
> 标签：spring, validation, bean-validation, hibernate-validator

我`String`在命令 bean 中有一个类型字段，必须按以下顺序进行验证。

*   必须包含一个值（非空）。
*   必须正好有 6 个字符。
*   必须确认这个正则表达式 -`[0-9, a-f, A-F]+`

当其中任何一个被违反时，其余的不得执行。我尝试使用`@GroupSequence`以下方法来实现这一点。

```
@GroupSequence({TempBean.ValidationGroupNotEmpty.class, TempBean.ValidationGroupColourHexLength.class, TempBean.ValidationGroup.class, TempBean.class})
public final class TempBean
{
    @NotEmpty(groups={ValidationGroupNotEmpty.class}, message="Must enter a valid colour code.")
    @Length(min=6, max=6, groups={ValidationGroupColourHexLength.class}, message="Requires exactly 6 characters.")
    @Pattern(groups={ValidationGroup.class}, regexp="[0-9, a-f, A-F]+", message="Invalid colour code.")
    private String stringValue;

    public interface ValidationGroup{}
    public interface ValidationGroupNotEmpty{}
    public interface ValidationGroupColourHexLength{}

    // Getters and setters.
} 
```

当文本字段故意留空时，仅`@NotEmpty`执行但当我输入一个违反`@Length`和`@Pattern`约束的值时，我会得到指定的消息，这意味着它们都被评估。这不应该发生。一次只能按照定义的顺序执行其中一项。如何才能做到这一点？

我正在使用 Spring 3.2.0 和 Hibernate Validator 4.3.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:35:25.050

您的代码看起来不错，我什至针对 HV 4.3.1 对其进行了测试。它按预期工作。您正在评估*默认*组对吗？你试过调试吗？

# algorithm - 最低成本的背包

> ID：15457143
> 
> 赞同：0
> 
> 时间：2013-03-17T03:18:59.683
> 
> 标签：algorithm, dynamic-programming, knapsack-problem

我有几种类型的硬币，每种都有重量（wi）和成本（ci）。所以我必须制作一个重量==W 和（！）硬币成本最低的背包。我无法建立递归关系来使用 DP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:32:21.933

只需制定通常的递归关系...

将总权重 k 可实现的最小成本指定为 Min_cost(k)。

使用以下命令引导记忆：

```
Min_cost(0) = cost of empty set = 0 
```

然后使用以下方法求解增加的 k 值：

```
Min_cost(i+1) = min [Min_cost(i)   + min [ci, for all items with wi = 1],
                     Min_cost(i-1) + min [ci, for all items with wi = 2],
                     Min_cost(i-2) + min [ci, for all items with wi = 3],
                     ...
                     Min_cost(2) + min [ci, for all items with wi = w-1],
                     Min_cost(1) + min [ci, for all items with wi = w],
                     Min_cost(0) + min [ci, for all items with wi = w+1]] 
```

# django - 如何找到共享文件的用户名？

> ID：15457144
> 
> 赞同：0
> 
> 时间：2013-03-17T03:19:02.873
> 
> 标签：django, django-queryset

我有一个文件、用户和共享模型，如下所示：

```
class File(models.Model):
    users = models.ForeignKey(User)
    file_name = models.CharField(max_length=100)
    type = models.CharField(max_length=10)
    source = models.CharField(max_length=100)
    start_date = models.TextField()
    time_overview = models.CharField(max_length=55)
    end_date = models.TextField()
    duration = models.TextField()
    size_overview = models.IntegerField()
    size = models.TextField()
    flag = models.TextField()
    flag_r = models.TextField()

class Share(models.Model):
    users = models.ForeignKey(User)
    files = models.ForeignKey(File)
    shared_user_id = models.IntegerField()
    shared_date = models.TextField() 
```

我发现了使用此查询共享特定文件的用户数量：

```
shared_file = File.objects.filter(id__in= Share.objects.filter(users_id = log_id).values_list('files', flat=True)).annotate(count=Count('share__shared_user_id')) 
```

现在，我想找出共享特定文件的用户名。尝试使用这个：

```
shared_username = User.objects.filter(id__in= Share.objects.filter(users_id = log_id).values_list('shared_user_id', flat=True)) 
```

没弄对。我想获得整个特定文件共享的用户名。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:53:41.580

在第二个查询中添加特定文件名的条件：

`shared_username = User.objects.filter(id__in = Share.objects.filter(users_id = log_id, files__file_name='file1').values_list('shared_user_id', flat=True))`

* * *

但是，您的模型有一些值得注意的问题：

1-如果你`Share.shared_user_id`用 OnetoMany 字段替换你的模型会更正确，你的查询会更容易。

2-如果`related_name`您在外键上使用，您可以从相反的模型访问它们，您的查询会容易得多。

3- 你不应该为外键使用复数 var 名称，因为它们代表一个对象。`File.users`应该是`File.user`和相同`Share.files`的`Share.users`

4-如果您正确命名变量，您的模型可能更具可读性。例如，`File.users`您可以使用`File.owner`or代替`File.owning_user`。与`Share.users`:相同`Share.sharing_user`。

# zend-framework2 - 如何让ZF2的validator验证中文输入

> ID：15457145
> 
> 赞同：1
> 
> 时间：2013-03-17T03:19:09.170
> 
> 标签：zend-framework2

我想建立一个在线信息管理系统，它会有一些中文输入。但是，ZF2 的验证器无法验证中文。我应该怎么做才能验证中文输入？创建自定义验证器？如何创建一个？非常感谢！！！

[详情见这里：](http://framework.zend.com/manual/2.1/en/modules/zend.validator.set.html)

```
There are actually 3 languages which are not accepted in their own script. These languages
are korean, japanese and **chinese** because this languages are using an alphabet where a
single character is build by using multiple characters.

In the case you are using these languages, the input will only be validated by using the
english alphabet. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:25:41.180

ZF2 中没有这样的中文或日文验证器。

您可以做的是构建自己的小型验证器类。我结合[了 PHP 检查字符串是否有中文字符](https://stackoverflow.com/questions/4923319/php-check-if-the-string-has-chinese-chars)和[如何检查单词是日语还是英语，使用 PHP通过为您](https://stackoverflow.com/questions/2856942/how-to-check-if-the-word-is-japanese-or-english-using-php)[扩展抽象验证器](https://github.com/zendframework/zf2/blob/release-2.1.3/library/Zend/Validator/AbstractValidator.php)来构建这两个小型验证器：

```
namespace MyApp\Validator;

use Zend\Validator\AbstractValidator;

// forgive the name of this class
class IsNotOrientalLanguage extends AbstractValidator
{
    /**
     * {@inheritDoc}
     */
    public function isValid($value)
    {
        $this->abstractOptions['messages'] = array();

        if (preg_match('/\p{Han}+/u', $value)) {
            $this->abstractOptions['messages'][] = 'Chinese not allowed.';
        }

        if (preg_match('/[\x{4E00}-\x{9FBF}]/u', $value)) {
            $this->abstractOptions['messages'][] = 'Kankji not allowed.';
        }

        if (preg_match('/[\x{3040}-\x{309F}]/u', $value)) {
            $this->abstractOptions['messages'][] = 'Hiragana not allowed.';
        }

        if (preg_match('/[\x{30A0}-\x{30FF}]/u', $value)) {
            $this->abstractOptions['messages'][] = 'Katakana not allowed.';
        }

        return ! $this->abstractOptions['messages'];
    }
} 
```

您现在可以在任何地方使用此验证器：

```
use Zend\InputFilter\Input;
use MyApp\Validator\IsNotOrientalLanguage;

$input = new Input('blog_post');

$input->getValidatorChain()->attach(new IsNotOrientalLanguage()); 
```

# visual-studio-2012 - Visual Studio 2012 - 关闭实时错误检查 - 打字稿

> ID：15457150
> 
> 赞同：1
> 
> 时间：2013-03-17T03:19:47.340
> 
> 标签：visual-studio-2012, typescript

我在 Visual Studio 2012 中使用 TypeScript，当我必须重构我的代码并且必须暂时引入很多错误时，Visual Studio 经常会在长达一分钟的时间内无响应，从而无法有效地重构。

我怎样才能暂时关闭它，直到我觉得我已经修补了大部分错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T01:53:51.460

应该没那么严重，不然就是BUG了。不幸的是，在最新版本中，有一个问题正在调查中。请参阅[https://typescript.codeplex.com/workitem/779](https://typescript.codeplex.com/workitem/779)。如果不是这个问题，那么请记录另一个描述如何可靠地重现您看到的问题，并将对其进行调查。

针对当前正在测试的上述问题已签入修复程序（请参阅[https://typescript.codeplex.com/SourceControl/changeset/e44dbae94e04](https://typescript.codeplex.com/SourceControl/changeset/e44dbae94e04)）。如果您感到幸运并且不想等待下一次更新，您可以随时在 typescriptServices.js 文件中自己替换这行代码，看看它是否能解决您的问题。

有关要更新的文件位置的详细信息，请参阅[http://blogs.msdn.com/b/typescript/archive/2013/01/29/trying-the-latest-typescript-build.aspx](http://blogs.msdn.com/b/typescript/archive/2013/01/29/trying-the-latest-typescript-build.aspx)。

# c# - 有没有办法阻止属性网格在 Visual Studio 中捕获异常

> ID：15457155
> 
> 赞同：1
> 
> 时间：2013-03-17T03:20:20.780
> 
> 标签：c#, winforms, exception, propertygrid

在我的应用程序中使用属性网格修改控件的属性时，我遇到了跨线程异常。我尝试使用 Visual Studio 中的“异常”对话框来中断所有异常（我选中了对话框中的所有复选框）。属性网格仍然会自行捕获异常，因此我无法找到导致问题的代码。有没有办法打破属性网格异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:37:24.903

是否在设计时抛出异常？我认为是这种情况，因为您正在谈论属性网格。如果是这样，您将无法使用运行设计器的同一 Visual Studio 实例来捕获它。要调试控件的设计时行为，您需要将 Visual Studio 的第二个实例附加到正在运行设计器的实例 - 然后在引发异常时该第二个实例应该中断。您可以从“*调试*”菜单中选择“*附加到进程”并为该进程选择**devenv.exe*（确保选择正确的*devenv.exe*实例！）。

# java - mouseEntered 不会执行

> ID：15457160
> 
> 赞同：0
> 
> 时间：2013-03-17T03:21:14.527
> 
> 标签：java, swing, awt, mouselistener

我正在尝试进行 mouseEntered 测试以更改方形颜色，但是 MouseListener mouseEntered 不会执行。鼠标有响应，但仅响应单击、按下和释放。所以我不确定发生了什么。我希望你能帮我指出我的问题谢谢。

```
//Class
class RectangleClass extends JPanel{
    private int height;
    private int width;
    private boolean MouseEntered= false;
    private boolean MouseExit= false;
    private JPanel myPanel = new JPanel();
//Inner class with mouse Event
    class RectangleAdapter extends MouseAdapter{

        public void MouseEntered(MouseEvent e){
            System.out.println("MouseEntered"); 
            MouseEntered = true;
            repaint();
        }

        public void MouseExited(MouseEvent e){
            System.out.println("MouseExited");  
            MouseExit = true;
            repaint();
        }

    }
//constructor
    public RectangleClass(int height,int width){

        myPanel = this;
        this.height=height;
        this.width=width;
        this.addMouseListener(new RectangleAdapter());
    }
//paint graphic
    public void paint(Graphics g){
        super.paint(g);
        g.clearRect(0, 0, width, height);
        g.drawRect(0, 0, width, height);
        g.setColor(Color.YELLOW);

        if (MouseEntered){
            g.setColor(Color.CYAN);
            MouseEntered= false;
        }
        if (MouseExit){
            g.setColor(Color.orange);
            MouseExit= false;
        }
        g.fillRect(0, 0, width, height);
    }
}

public class RectangleContainer extends JFrame{

    public RectangleContainer(){
        setLayout(null);
        JPanel myPanel = new RectangleClass(100,100);
        myPanel.setBounds(50, 50, 200, 200);
        setSize(200,200);
        add(myPanel);
        setVisible(true);
    }

    public static void main(String args[]){
        new RectangleContainer();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T03:23:48.950

你实际上并没有覆盖[mouseEntered](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseAdapter.html#mouseEntered%28java.awt.event.MouseEvent%29)的方法`MouseAdapter`，你需要

```
@Override
public void mouseEntered(MouseEvent e) { 
```

添加`@Override`将使编译器检查您是否覆盖了正确的方法。这同样适用于[mouseExited](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseAdapter.html#mouseExited%28java.awt.event.MouseEvent%29) BTW。

* * *

*旁注：*

*   不要使用[`null`布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)- 始终使用[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)
*   对于自定义绘画覆盖`paintComponent`而不是`paint`
*   Java 命名约定表明所有变量都以*小写*字母开头，这将使变量`MouseEntered` `mouseEntered`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T03:26:33.017

您已`mouseEntered`在代码中以大写 M 开始该方法。将其更改为小写 m。

# jvm - 如何通过分析 java_opt 获得 -Xmx？

> ID：15457161
> 
> 赞同：-1
> 
> 时间：2013-03-17T03:21:14.570
> 
> 标签：jvm

eg：-Xms1g -Xmx1g -XX:SurvivorRatio=2 -XX:+UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction=75

JVM 没有启动。所以我的问题是如何使用 jdk 方法分析 java_opt 。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:32:47.650

```
Runtime.getRuntime().maxMemory() 
```

# javascript - Javascript/JQuery 循环遍历数组值

> ID：15457166
> 
> 赞同：3
> 
> 时间：2013-03-17T03:22:35.460
> 
> 标签：javascript, jquery, loops, delay, slidetoggle

我正在尝试在我的网站上显示/隐藏赞助商徽标，无休止地一个接一个地显示/隐藏。我想我有点接近了，但是在撞了我的头之后，我决定是时候寻求帮助了。这是我的代码：

```
var sponsors = ["prointec","pequigraf"];
for (var i = 0; i < sponsors.length; i++){
    setTimeout($(document.getElementById(sponsors[i])).slideToggle("slow", "swing"), 1000);
    setTimeout($(document.getElementById(sponsors[i])).slideToggle("slow", "swing"), 10000 * (i + 1));
} 
```

基本上，它应该一个接一个地显示（10 秒后），而是一次运行。有什么提示吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T03:55:41.547

我将其发布为答案而不是评论，只是为了确保我可以进行一些正确的代码格式设置。

rpamely 的代码看起来正是您所需要的，但您可以将其简化很多。只需在您的两个赞助商 ID 前加上“#”，您就可以删除所有`document.getElementById()`来电：

```
var sponsors = [ "#prointec","#pequigraf" ];

var i = 0;

$(sponsors[0]).show();
$(sponsors[1]).hide();

var toggleSponsor = function() {
    $(sponsors[i]).hide();

    i = (i + 1) % sponsors.length;
    $(sponsors[i]).show();

    setTimeout(toggleSponsor, 10000);
};

setTimeout(toggleSponsor, 10000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T03:31:46.750

您需要为超时提供函数参考。你也应该嵌套你的超时。在编写 JavaScript 时尝试异步思考。

我没有测试过这个，但这就是我想出的。另请注意，10 秒是 10,000 毫秒，而不是 1000。

```
var sponsors = ["prointec","pequigraf"];

var i = 0;

$(document.getElementById(sponsors[0])).show();
$(document.getElementById(sponsors[1])).hide();

var toggleSponsor = function() {
    $(document.getElementById(sponsors[i])).hide();

    i = (i + 1) % sponsors.length;
    $(document.getElementById(sponsors[i])).show();

    setTimeout(toggleSponsor, 10000);
};

setTimeout(toggleSponsor, 10000); 
```

# php - 显示来自 My SQL 的数组信息

> ID：15457170
> 
> 赞同：2
> 
> 时间：2013-03-17T03:23:00.030
> 
> 标签：php, mysql

你好我已经尝试了很多方法来让它工作我不确定我的错误在哪里。我收到错误消息。

```
mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in 
```

这是代码：

```
$dbh = mysqli_connect("HOST", $user_name, $password, $database_name);
if (!$dbh)
{
    die("Not connected : " . mysqli_error($dbh));
}

if ($method=="graces")
{ 
   $query = "SELECT id, name FROM raceslog";
    $userinfo = array();

      while ($row_user = mysql_fetch_assoc($query)){
       $userinfo[] = $row_user;}

       foreach ($userinfo as $user) {
         echo "^{$user[id]}"
            . "^{$user[name]}";
        }
 } 
```

好吧，我的问题是有没有人看到我的错误在哪里，并且可以指出我正确的方向来解决谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T03:26:21.350

您需要首先使用实际运行查询`mysqli_query`。还要注意`mysql_*`和`mysqli_*`不兼容。您应该坚持使用 mysqli 并正确参数化您的查询。

```
$result = mysqli_query($dbh, $query);
while ($row_user = mysqli_fetch_assoc($result)) { 
```

如果需要，您也可以在`while`循环中回显。

# c++ - Strtok 在行尾返回额外数据

> ID：15457171
> 
> 赞同：1
> 
> 时间：2013-03-17T03:23:01.757
> 
> 标签：c++, string, char, strtok

我一直在搞乱这段代码几个小时，正在寻找一些建议。我正在使用 strtok 从字符串中获取单词，但我不断在每一行的末尾获取额外的数据。我有以下代码：

```
cout << "\n\n6\. Load File:\n";
        getline(cin, inFile);
        inFile = path + inFile;
        myfile.open(inFile.c_str());
            while (myfile.is_open() == false)   //check to make sure file exists
            {
                cout << "\nPlease enter in a valid file name: ";
                getline(cin,inFile);
                inFile = path + inFile;
                myfile.open(inFile.c_str());
            }
                getline (myfile,line);
                while ( myfile.good() )     //while the file is running, run below code
                {
                    getline (myfile,line);
                    //cout << line;
                    char str[line.length()];
                    char * pch;
                    for (int i=0;i<line.size();i++) { //creates a char array from characters
                        str[i]=line[i];
                    }
                    pch = strtok(str," ,-!?\r\t\f\v\n\0|/\\_"); //eliminates whitespace,etc in char array
                    while (pch != NULL)
                    {
                        printf ("%s\n",pch);
                        pch = strtok (NULL, " ,-!?\r\t\f\v\n\0|/\\_");  //grabs next word
                    }

                }
        myfile.close(); 
```

现在这段代码给了我我想要的单词输出，但在每一行的末尾都有来自内存的随机疯狂值。见下文：

加载文件：
cars1.txt
Jalopy
Blue
3402.99 **\244\363P**
Rustbucket
Brown
44.99 **P**
Lemon
Yellow
4226.99 **99P**

请帮助，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:09:49.377

在中，字符串的末尾`C`必须有(0)。`NUL`你需要添加它。

（这也意味着`\0`您的令牌字符串中的 被视为该字符串的结尾，并且将忽略以下字符。这将符合您对空格的评论，但它可能不是您真正想要的。）

最简单的解决方案：用于`strdup`复制您的字符串。

```
char* tmp_copy = strdup(line.c_str());
for (char* pch = strtok(tmp_copy," ,-!?\r\t\f\v\n\0|/\\_");
     pch;
     pch = strtok (NULL, " ,-!?\r\t\f\v\n\0|/\\_")) {
   printf ("%s\n",pch);
}
free(tmp_copy); 
```

更好的解决方案：使用[boost::tokenizer](http://www.boost.org/doc/libs/release/libs/tokenizer/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:03:28.180

您需要空终止`str`。您一次复制`line`到`str`一个字符，但不是终止的空值。

试试这个：

```
char str[line.length()+1];
char * pch;
for (int i=0;i<line.size();i++) {
    str[i]=line[i];
}
str[line.size()+1] = '\0';     // null terminator 
```

或者更简单，只需初始化`str`：

```
char str[line.length()+1] = {};  // initialize to all nulls
char * pch;
for (int i=0;i<line.size();i++) {
    str[i]=line[i];
} 
```

# excel - 引用 100x2 范围然后打印到文件

> ID：15457184
> 
> 赞同：0
> 
> 时间：2013-03-17T03:24:53.987
> 
> 标签：excel, filesystemobject, vba

我有一个范围，我想在每次迭代时在列之间交替写入文件。我会有 A1 > B1 > A2 > B2 等，举个例子：

```
 A   |   B
1   Hello | World
2   Whats | Up 
```

现在我将它放在一个文本文件中：

```
Hello
World
Whats
Up 
```

我有以下代码将从我的第一列中获取信息，但我坚持在每次迭代时添加第二列：

```
Sub mac()
Dim fso As New FileSystemObject
Dim stream As TextStream
Set stream = fso.CreateTextFile("F:\Hmmmmm.txt", True)

  Range("G2").Select

  Do Until IsEmpty(ActiveCell)
     stream.WriteLine ActiveCell
     ' Here I would affectively want stream.WriteLine ActiveCell + 1 Column
     ActiveCell.Offset(1, 0).Select
  Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:25:15.213

首先，如果您还没有这样做，请确保您选择了 VBA 编辑器中工具下的“Microsoft 文件脚本”参考（有关更多帮助，请阅读[如何在 VBA 中使用 FileSystemObject？](https://stackoverflow.com/questions/3233203/how-do-i-use-filesystemobject-in-vba)）。

以下应该工作。请注意阅读我的评论 - 您可以更改部分代码以适合您的电子表格/需求

```
Sub mac()
    Dim ws As Worksheet
    Dim fso As New FileSystemObject
    Dim stream As TextStream
    Dim DataTable As Range
    Dim StartCell As Range
    Dim c As Range

    'Edit this line to save the text file to drive\path\filename of your choice
    Const TextFileName As String = "F:\Hmmmmm.txt"       

    Set ws = ActiveSheet
    Set fso = CreateObject("Scripting.FileSystemObject")
    Set stream = fso.CreateTextFile(FileName:=TextFileName, Overwrite:=True)

    'Edit this line to adjust to your spreadsheet
    'I assume your data starts in Cell A1
    Set StartCell = ws.Range("A1")

    Set DataTable = StartCell.CurrentRegion

    For Each c In DataTable.Cells
            stream.WriteLine c.Value
    Next c

    Set c = Nothing
    Set StartCell = Nothing
    Set DataTable = Nothing
    Set ws = Nothing
    Set stream = Nothing
    Set fso = Nothing
End Sub 
```

# python - Python - 返回一个字符串的函数，从另一个字符串中删除字符

> ID：15457187
> 
> 赞同：2
> 
> 时间：2013-03-17T03:25:06.610
> 
> 标签：python, string, replace

```
"""Return a copy of str1 with characters from str2 removed.

filter_string(string, string) -> string
"""

for a in str1:
    if a in str2:
      str1.replace(a,"")

return str1 
```

我接近了吗？

str1 和 str2 包含变量字符串

到目前为止，我的输出是 21 oramrfrrdonRsmsov creea h tite twrch

所需的输出是 21mdnRmvhiwh

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T03:33:25.033

您的函数可以使用以下[`str.translate`](http://docs.python.org/2/library/stdtypes.html#str.translate)方法非常简单地编写：

```
str1 = str1.translate(None, str2) 
```

`str2`这将删除from中的所有字符`str1`。

例如：

```
>>> 'Hello, world!'.translate(None, 'lewf!')
Ho, ord 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T03:31:29.493

使用列表推导：

```
>>> str1 = "HelloWorld"
>>> str2 = "World"
>>> "".join([i for i in str1 if i not in str2])
'He'
>>> 
```

# php - 如何检索 longText 并按时间排序以相应地回显它们

> ID：15457189
> 
> 赞同：0
> 
> 时间：2013-03-17T03:25:49.017
> 
> 标签：php, mysql

在 mySQL 中，我有一个评论表，由 userID、restaurantID 和评论列组成：

```
DROP TABLE IF EXISTS `comment`;
CREATE TABLE IF NOT EXISTS `comment` (
 `loginID` varchar(20) NOT NULL,
 `RID` int(11) NOT NULL,
 `comments` longtext NOT NULL,
 KEY `loginID` (`loginID`)
 KET 'RID' ('RID')
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

这就是我想做的：

**i）**我想为评论栏存储评论+当前时间。

我会在 java 中说 (comments = comments + newinput + currentime + ",")。然后在 PHP 中转换 $comment = $_POST['comments']

**ii)**当我插入时，我正在做 (插入评论 (loginID,RID,comments) VALUES ('$loginID','$RID','$comment'));

所以现在评论列包含一长串数据，例如

（美味的 12:00:00，最糟糕的 23:00:00，...）等等。

**iii)**我想逐行显示所有这些，类似于列出用户 ID 和评论以及底部的谷歌市场评论。

我的**问题**是：

1）我应该如何根据逗号分别获取数据？内爆还是爆炸？但我对此感到困惑..

2) 当我 (SELECT comments FROM comment WHERE RID = $RID); 我会得到很多用户 ID 和他们的评论列表。我应该如何将它们全部分成几部分，以便我可以根据发布的时间对它们进行排序并打印从最早时间到当前时间的用户 ID 和评论。

逻辑：（1个餐厅可以被多个用户评论，1个用户可以对餐厅发表很多评论。）

我这样存储数据是否合适？（更新文本 = 文本 + 当前时间 + ","）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T03:41:08.783

就数据库结构和规范化而言，您的开端并不好，这就是您的问题所在。

您应该将单独的评论作为单独的条目输入到评论表中，并在时间上增加一列。这样，您可以使用以下方法轻松按时间排序：

SELECT comments, time FROM comment WHERE RID = $RID SORT BY time ASC

这将按时间顺序获取特定餐厅的评论（使用 DESC 代替首先获取最新评论）。

这样您就可以消除任何不必要的字符串操作——这总是会导致错误和令人头疼的问题。它还允许您使用 MySQL 的内置日期/时间格式，允许您仅选择过去一周的评论等。

# java - 更新 ArrayList 中的值

> ID：15457191
> 
> 赞同：0
> 
> 时间：2013-03-17T03:26:11.443
> 
> 标签：java, arraylist

我的程序是物品清单。每个项目由用户输入，直到达到 10 个，然后在最后显示每个项目的总成本（成本 * 数量）。

但我需要能够更新特定项目的数量。所以我想以某种方式询问用户“你想更新哪个项目？” 和“你想减去多少”，但我不知道如何将项目链接到它的具体数量。之后，我想再次显示更新的项目列表和更新的总成本。

可以作为一个`ArrayList`吗？或者我应该使用不同的结构？

所以这是课程：

```
public class StockItem {
String stockItemID;
String stockItemDescription;
double stockItemCostPrice;
double stockItemSellingPrice;
int stockItemQuantityAvailable;
String toString;
int updateItemQuantityAvailable;

StockItem(String stockItemID, String stockItemDescription, double stockItemCostPrice,
double stockItemSellingPrice, int stockItemQuantityAvailable, int
updateItemQuantityAvailable) {
    this.stockItemID = stockItemID;
    this.stockItemDescription = stockItemDescription;
    this.stockItemCostPrice = stockItemCostPrice;
    this.stockItemSellingPrice = stockItemSellingPrice;
    this.stockItemQuantityAvailable = stockItemQuantityAvailable;
    this.updateItemQuantityAvailable = updateItemQuantityAvailable;
}

public void setStockItemID(String stockItemID) {
    this.stockItemID = stockItemID;
}

public String getStockItemID() {
    return stockItemID;
}

public void setStockItemDescription(String stockItemDescription) {
    this.stockItemDescription = stockItemDescription;
}

public String getStockItemDescription() {
    return stockItemDescription;
}

public void setStockItemCostPrice(double stockItemCostPrice) {
    this.stockItemCostPrice = stockItemCostPrice;
}

public double getStockItemCostPrice() {
    return stockItemCostPrice;
}

public void setStockItemSellingPrice(double stockItemSellingPrice) {
    this.stockItemSellingPrice = stockItemSellingPrice;
}

public double getStockItemSellingPrice() {
    return stockItemSellingPrice;
}

public void setStockItemQuantityAvailable(int stockItemQuantityAvailable) {
    this.stockItemQuantityAvailable = stockItemQuantityAvailable;
}

public int getStockItemQuantityAvailable() {
    return stockItemQuantityAvailable;
}

public String toString() {
    return (stockItemID + "\t" + stockItemDescription + "\t" + " Cost Price: $" + stockItemCostPrice + "\t" + "Selling Price: $" + stockItemSellingPrice + "\t" + "Quantity: " + stockItemQuantityAvailable + "\n");
}

public void setUpdateItemQuantityAvailable(int updateItemQuantityAvailable){
    this.updateItemQuantityAvailable = updateItemQuantityAvailable;
}
public int getUpdateItemQuantityAvailable() {
    return updateItemQuantityAvailable;
} 
```

然后方法：

```
public static void main(String[] args) {
    Scanner input = new Scanner(System.in);
    ArrayList<StockItem> list = new ArrayList<StockItem>();
    for (int i = 0; i < 2; i++) {

        System.out.print(" Enter ID: ");
        String stockItemID = input.next();

        System.out.print(" Enter Item Description: ");
        String stockItemDescription = input.next();

        System.out.print(" Enter Item Cost Price: ");
        double stockItemCostPrice = input.nextDouble();

        System.out.print(" Enter Item Selling Price: ");
        double stockItemSellingPrice = input.nextDouble();

        System.out.print(" Enter Item Quantity Available: ");
        int stockItemQuantityAvailable = input.nextInt();

        int updateItemQuantityAvailable = (0);

        list.add(new StockItem(stockItemID, stockItemDescription, stockItemCostPrice, stockItemSellingPrice, stockItemQuantityAvailable, updateItemQuantityAvailable));
        list.
    }

    System.out.println(list.toString().replace("]", "").replace("[", "").replace(",", "").replace(" ",""));

    for (StockItem data : list) {
        double totalStockCost = (data.getStockItemQuantityAvailable()- data.getUpdateItemQuantityAvailable()) * (data.getStockItemCostPrice());
        System.out.println(("Total Cost for ") + data.getStockItemDescription() + ": $" + totalStockCost);            
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:39:19.773

你应该使用 a`HashMap`而不是`ArrayList`. 如果通过*“更新”*你的意思是*替换*，那么这应该工作：

```
HashMap<String, StockItem> map = new HashMap<String, StockItem>();
for (int i = 0; i < 2; i++) {

    System.out.print(" Enter ID: ");
    String stockItemID = input.next();
    ...

    StockItem item = new StockItem(stockItemID, stockItemDescription, stockItemCostPrice, stockItemSellingPrice, stockItemQuantityAvailable, updateItemQuantityAvailable);
    map.put(stockItemID, item); // this line will replace any earlier item with same stockItemID
} 
```

显示地图的内容：

```
for(StockItem item : map.values()) {
    System.out.println(item);
} 
```

显示每个项目的总成本：

```
for(StockItem data : map.values()) {
    double totalStockCost = ...
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T03:48:14.870

如果您只是关心能够更新 的元素`List`，是的，您可以这样做。比如你已经填`list`了 10 `StockItem`s，都填了`stockItemQuantityAvailable`100，用户想买第 5 件：

```
 StockItem chosen = list.get(0);
 int currentStock = chosen.getStockItemQuantityAvailable();
 chosen.setStockItemQuantityAvailable(currentStock - 5); 
```

现在，如果您打印出列表，您会发现第一项有 95 个，其余的有 100 个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T03:55:51.037

HashMap 将使搜索更有效率。

如果您不想使用 HashMap，那么我将采用的方法是为 StockItem 和 ShoppingCart 类设置一个单独的类。在 ShoppingCart 中，您可以编写一个实用方法，如下所示。或者，您也可以实现一个比较器并使用 List.contains()。

```
ShoppingCart
    private List<StockItem> items = new ArrayList<StockItem>();

    public void updateQuantity(String itemId, int qty) {
        if(null == itemId) { return; }

        for(StockItem item : items) {
            if (itemId.equals(item.getStockItemID())){
                item.setStockItemQuantityAvailable(qty);
            }
        }
    } 
```

# c# - 不能在 for 循环中包含枚举，不会使用 [i] 进行迭代 - 创建卡片组

> ID：15457197
> 
> 赞同：0
> 
> 时间：2013-03-17T03:27:46.853
> 
> 标签：c#

/*嗨我想知道我需要做什么才能让这个for循环循环遍历我的枚举，因为它不需要[]。我正在尝试在一副卡片中创建所有卡片。*/

```
using System;
using System.Collections.Generic;
using System.Text;

namespace BlackJackGameX
{
    public class Deck
    {

        Random rNumber = new Random();

        List<Card> Cards;
        List<Card> ShuffledDeck;

        public Deck ()
        {
            Cards = NewDeck();
        }

        public void Shuffle()
        {

            for (int i = 0; i <= 51; ++i) 
            {

                int c = rNumber.Next (1, 53);

                ShuffledDeck.Add(Cards[c]);

            }
        } 
```

/*这是主要问题区域，我认为我的构造函数也犯了一个错误，但这可能是一个不相关的问题*/

```
 private List<Card> NewDeck(Suit CardSuit, FaceValue CardValue, int iValue)
        {
            for (int i = 0; i <= 3; i++) 
            {
                for (int j = 0; j <= 12; j++) 
                {
                    Card newCard = new Card(CardSuit[i], CardValue[j], iValue[j]);
                }
            }
        }

        public void Print()
        {
            Console.WriteLine(ShuffledDeck[1].CardValue);
            Console.ReadLine();
        }

    }
}

/*This is the other class containing the enums*/

using System;
using System.Collections.Generic;
using System.Text;

namespace BlackJackGameX
{

    public enum Suit {Spades, Hearts, Clubs, Diamonds}
    public enum FaceValue {Ace, Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten, Jack, Queen, King}

    public class Card
    {
        public Suit CardSuit;
        public FaceValue CardValue;
        public int iValue;

        public Card (Suit cardSuit, FaceValue cardValue, int ivalue)
        {
            CardSuit = cardSuit;
            CardValue = cardValue;
            iValue =ivalue;
        }

        public Card ()
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:42:49.473

使用交叉连接：

```
 public enum Suit {Spades, Hearts, Clubs, Diamonds}
    public enum FaceValue { Ace, Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten, Jack, Queen, King }

    public static void Main()
    {

        var cards =
            (from suit in Enum.GetValues(typeof(Suit)).Cast<Suit>()
             from face in Enum.GetValues(typeof(FaceValue)).Cast<FaceValue>()
             select new { Suit = suit, Face = face })

             .ToList();

        foreach (var card in cards)
            Console.WriteLine("{0} {1}", card.Face, card.Suit);

        Console.ReadLine();

    } 
```

然后在提供的 foreach 循环中，只需读取 card.Face 或 card.Suit。应该给你所有花色的所有牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T03:43:46.450

您不能使用索引运算符来获取枚举值。看到这个相关的帖子：[你能遍历所有的枚举值吗？](https://stackoverflow.com/questions/972307/can-you-loop-through-all-enum-values)

再加上你的 cunstroctur 有一些错误，你似乎没有返回任何列表，但你声明你这样做了。“新甲板”方法也是如此。

我建议如下：

```
private List<Card> NewDeck(Suit CardSuit, FaceValue CardValue, int iValue)
{
   for (int i = 0; i <= 3; i++) 
   {
       for (int j = 0; j <= 12; j++) 
       {
           Card newCard = new Card(AllSuit [i], AllFaces[j], iValue[j]);
       }
   }
}

 var AllSuit = new Suit[]
    {
      Suit.Spades,
      Suit.Hearts,
      Suit.Clubs,
      Suit.Diamonds
    };

    //Do the same for AllFaces... 
```

# c++ - 无法在我的代码中使用 std::unordered_map

> ID：15457204
> 
> 赞同：1
> 
> 时间：2013-03-17T03:29:48.053
> 
> 标签：c++, c++11, eclipse-cdt

我不能在我的代码中使用 std::unordered_map，但它可以与 std::tr1::unordered_map 一起使用。这是一个已知问题吗？如果我想改用 std::unordered_map 该怎么办？操作系统：ubuntu IDE：eclipse CDT gcc：4.7.2 编译器选项：--std=c++11

这会引发错误 - 无法解析符号“unordered_map”：

```
 std::unordered_map<unsigned int, std::vector<test> > m; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:06:06.137

缺少符号通常表明包含了错误的标题。确保将包含的标题从

```
#include <tr1/unordered_map> 
```

至

```
#include <unordered_map> 
```

# objective-c - 从 UIGestureRecognizer 中排除子视图

> ID：15457205
> 
> 赞同：33
> 
> 时间：2013-03-17T03:29:52.633
> 
> 标签：objective-c, xcode, uiview, uigesturerecognizer

我有一个包含多个“子视图”的 UIView（“容器视图”）。我想在容器视图中添加一个 UITapGestureRecognizer，这样当我触摸容器视图内部但子视图外部的区域时，它就会被激活。

目前，触摸容器视图内的任何位置，包括子视图内的任何位置都会激活手势识别器。

实现看起来像这样： 在控制器中：

```
ContainerView *containerView = [[ContainerView alloc] initWithSubViews:array];
UITapGestureRecognizer *tap = [UITapGestureRecognizer alloc] initWithTarget:self action:@selector(someSelector)];
[containerView addGestureRecognizer:tap];
[self.view addSubView:containerView]; 
```

在 ContainerView.m 中

```
-(id)initWithSubviews:(NSArray *)array {
    for (subView *s in array) {
        [self addSubView:s];
    }
    return self;
} 
```

我认为出现问题是因为在子视图之后添加了手势识别器。如果这是真的，那么解决方案将需要将 initWithSubViews 方法分成两个单独的方法，我希望避免这样做。

谢谢你

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-09-19T04:45:42.133

我使用了下面的简单方法。**它可以正常工作！**

实现UIGestureRecognizerDelegate函数，只接受superview的touch，不接受subview的touch：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    if (touch.view != _mySuperView) { // accept only touchs on superview, not accept touchs on subviews
        return NO;
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-18T04:27:17.897

iOS 6 引入了一个很好的新功能来解决这个确切的问题 - UIView（子视图）可以从`gestureRecognizerShouldBegin:`（附加到超级视图的手势识别器）返回 NO。实际上，对于某些手势识别器，这已经是某些 UIView 子类的默认设置（例如，与附加到超级视图的 UITapGestureRecognizer 相关的 UIButton）。

请参阅我关于此主题的书：[http ://www.aeth.com/iOSBook/ch18.html#_gesture_recognizers](http://www.apeth.com/iOSBook/ch18.html#_gesture_recognizers)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-18T03:51:23.960

我设法通过执行以下操作使其工作：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapGestureHandler:)];

// ...

-(void) tapGestureHandler:(UITapGestureRecognizer *)sender {
    CGPoint point = [sender locationInView:sender.view];
    UIView *viewTouched = [sender.view hitTest:point withEvent:nil];
    if ([viewTouched isKindOfClass:[ThingIDontWantTouched class]]) {
        // Do nothing;
    } else {
        // respond to touch action
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-09-15T11:55:28.037

**记得添加和设置委托方法**-

在你的 UIViewController 的 .h 文件中包含这个委托

```
@interface YourViewController: UIViewController<UIGestureRecogniserDelegate> 
```

然后在哪里创建你的 tapGesture 对象，（例如在 viewDidLoad 中）

```
 UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(actionMethodYouWantToHappenOnTap)];  

    tap.delegate = self;  //Remember to set delegate! Otherwise the delegate method won't get called.

    [self.view addGestureRecognizer:tap]; 
```

记住设置委托方法**`tap.delegate = self;`**，然后点击的委托方法现在将在点击时触发。

在此方法中，当您希望使用点击手势识别时，您可以处理，在我的代码中，如果特定子视图可见，我希望它忽略点击

```
-(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer{

     if (!mySubview.hidden){
     return NO;   //This fired if said subview was visible, though whatever the condition of where and when you want tap to work, can be handled within this delegate method.
     }

    return YES;
} 
```

我希望这可以帮助其他有同样问题的人。记住设置我发现的委托方法是很容易被忽视的。

干杯

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-22T11:24:22.173

很多答案，添加另一个替代解决方案。将您不想接收触摸的子视图的视图标签初始化为 1 并执行以下操作：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    tap.delegate = self;
    [self.view addGestureRecognizer:tap];
}

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    if (touch.view.tag == 1) {
        return NO;
    }
    return YES;
}

-(void)handleTap:(id)sender
{
//Handle tap...
} 
```

这样，触摸手势将仅从您需要它的视图中接收。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-05T09:12:55.630

更新到***Swift 5***

@Awais Hussain 的回答非常适合，

> 用手势查看 -> Controller.view -> subView -> ViewThingI_DontWantToBeTouched

```
class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view.

        let tap = UITapGestureRecognizer(target: self, action: #selector(ViewController.tapGestureHandler(_:)))

    }

    @objc
    func tapGestureHandler(_ sender: UITapGestureRecognizer){
        let point = sender.location(in: sender.view)
        if let viewTouched = sender.view?.hitTest(point, with: nil), viewTouched is ViewThingI_DontWantToBeTouched{
            ()
            // Do nothing;
        }
        else {
            // respond to touch action
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-17T03:46:58.257

如果您`UITapGestureRecognizer`为 ContainerView 添加，它应该响应整个 ContainerView。它不会介意它的子视图。

检查手势位置，如果它在您的子视图位置，只需跳过手势动作。

```
- (void) tapGestureHandler:(UIGestureRecognizer *) gestureRecognizer {

    CGPoint tapPoint = [gestureRecognizer locationInView:nil]; 

   //check your tapPoint contains ur subview frame, skip.else do ur actions
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-17T06:38:32.703

添加：

我只是想到了更好的东西。

在你的处理程序中

```
-(void)tapGestureHandler:(UITapGestureHandler)gesture 
```

检查gesture.view是否是超级视图。如果点击子视图，它将返回子视图。

==================================================== ==

我建议在超级视图中覆盖。

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event 
```

调用它来确定手势是否落在视图内

请参阅此问题的答案以了解其默认行为方式。

[iOS 的事件处理 - hitTest:withEvent: 和 pointInside:withEvent: 是如何相关的？](https://stackoverflow.com/questions/4961386/event-handling-for-ios-how-hittestwithevent-and-pointinsidewithevent-are-r)

您可以检查该点是否在其任何子视图中。如果是，则返回 nil，否则返回 self。

或者

在每个子视图中，添加一个不执行任何操作的 Tapgesture 识别器。默认情况下，子视图的手势识别器将取消其父视图的手势识别器。如果有很多子视图，我会留意内存占用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-25T03:54:47.767

Swift 4 的更新答案

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool {
        if touch.view != yourView
        {
            return false
        }

        return true
    } 
```

在此之前，请确保您已将委托属性设置为您的对象..

# android - （OpenGL ES）远离视图中心的对象被拉伸

> ID：15457210
> 
> 赞同：6
> 
> 时间：2013-03-17T03:30:37.247
> 
> 标签：android, opengl-es

所以我在 OpenGL ES 中生成了一个球体（特别是 OpenGL ES 2.0，在 Java 中，用于 Android）。当这个球体放置在与我的视图矩阵使用的中心相同的位置时，这很好，但是当偏离中心时，球体会严重扭曲（见下文）。

为什么会发生这种情况，我该如何阻止它？

![在此处输入图像描述](../Images/42aeba03e72b586a303b450cade21b7f.png)

那是同一个球体。右上角的那个只是翻译成 x 和 y（不是 z）。

我的 GLSurfaceView.renderer 实现中的一些代码片段，

```
public void onSurfaceCreated(GL10 unused, EGLConfig config) {
    GLES20.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    GLES20.glEnable(GLES20.GL_CULL_FACE);
    GLES20.glEnable(GLES20.GL_DEPTH_TEST);

    // Both centred on (0,0,0), of radius 1.0.
    outerSphere = new Sphere();
    centreSphere = new Sphere();
}

public void onSurfaceChanged(GL10 unused, int width, int height) {
    GLES20.glViewport(0, 0, width, height);

    ratio = (float) width / height;

    final float left = -ratio;
    final float right = ratio;
    final float bottom = -1.0f;
    final float top = 1.0f;
    final float near = 1.0f;
    final float far = 100.0f;

    Matrix.frustumM(projMatrix, 0, left, right, bottom, top, near, far);
}

public void onDrawFrame(GL10 unused) {
    GLES20.glClear(GLES20.GL_DEPTH_BUFFER_BIT | GLES20.GL_COLOR_BUFFER_BIT);

    float eyeX = 0.0f;
    float eyeY = 0.0f;
    float eyeZ = 10.0f;

    final float lookX = 0.0f;
    final float lookY = 0.0f;
    final float lookZ = 0.0f;

    final float upX = 0.0f;
    final float upY = 1.0f;
    final float upZ = 0.0f;

    Matrix.setLookAtM(viewMatrix, 0, eyeX, eyeY, eyeZ, lookX, lookY, lookZ,
                      upX, upY, upZ);

    // Set identity matrix as input for translations.
    Matrix.setIdentityM(outerModelMatrix, 0);

    // Translate outer sphere by 5 in x and y.
    Matrix.translateM(outerModelMatrix, 0, 5.0f, 5.0f, 0.0f);

    // MVP matrix = Projection * View * Model.
    Matrix.multiplyMM(centreMVPMatrix, 0, viewMatrix, 0, centreModelMatrix, 0);
    Matrix.multiplyMM(centreMVPMatrix, 0, projectionMatrix, 0, centreMVPMatrix, 0);
    Matrix.multiplyMM(outerMVPMatrix, 0, viewMatrix, 0, outerModelMatrix, 0);
    Matrix.multiplyMM(outerMVPMatrix, 0, projectionMatrix, 0, outerMVPMatrix, 0);

    outerSphere.draw(outerMVPMatrix);
    centreSphere.draw(outerMVPMatrix);

} 
```

我的着色器很简单，

```
private final static String vertexShaderCode =
    "uniform mat4 u_MVPMatrix;" +
    "attribute vec4 a_Position;" +
    "uniform vec4 u_Color;" +
    "void main() {" +
    "    gl_Position = u_MVPMatrix * a_Position;" +
    "}";
private final static String fragmentShaderCode = 
    "precision mediump float;" +
    "uniform vec4 u_Color;" +
    "void main() {" +
    "    gl_FragColor = u_Color;" +
    "}"; 
```

我已经省略了 Sphere 类中的几乎所有代码，以及我认为不需要的其他东西（？），但如果需要它们，我会放上它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T03:39:25.763

欢迎来到[透视失真](https://en.wikipedia.org/wiki/Perspective_distortion_%28photography%29)的世界！

更多细节：你的视野太窄，你必须塑造平截头体，让它更大一点。

# asp.net-mvc - 用于多个应用程序的 mvc 4 web api

> ID：15457214
> 
> 赞同：5
> 
> 时间：2013-03-17T03:31:11.007
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我的 mvc 4 应用程序为 3 个不同的子应用程序公开了一个 API 层。我为所有三个子应用程序使用单个 api 控制器。所有这三个应用程序都使用父应用程序数据库。

我想知道我是否做错了什么。此外，随着应用程序的开发，api 控制器变得越来越重。有什么好的方法可以管理父应用项目中的子应用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T07:16:00.483

您可以使用**区域**来管理父应用中的子应用。请按照以下问题中回答的步骤在您的项目中创建区域

[如何在 ASP.NET MVC3 中配置区域](https://stackoverflow.com/questions/5243158/how-to-configure-areas-in-asp-net-mvc3)

为了处理对区域的 Api 请求，您需要在区域注册中有两条路由。

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.Routes.MapHttpRoute(
            name: "Area_Name_Api",
            routeTemplate: "Area_Name/api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
        context.MapRoute(
            "Area_Name_default",
            "Area_Name/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }
        );
    } 
```

第一条路线用于到达该区域的 api 控制器，第二条路线用于常规路线。

[http://blogs.infosupport.com/asp-net-mvc-4-rc-getting-webapi-and-areas-to-play-nicely/](http://blogs.infosupport.com/asp-net-mvc-4-rc-getting-webapi-and-areas-to-play-nicely/)

上面的链接对此进行了更多解释。

通过这种方式，您可以分离您的子应用程序并在父项目中组织您的功能、模型视图（如果有）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T15:24:35.967

您可以在不同的 web api 控制器下处理子应用程序。

# oauth-2.0 - 在基于自定义omniauth oauth2 的策略中调用auth_code.get_token 方法时如何删除client_secret？

> ID：15457216
> 
> 赞同：1
> 
> 时间：2013-03-17T03:31:37.093
> 
> 标签：oauth-2.0, omniauth

我基于[https://github.com/intridea/omniauth-oauth2](https://github.com/intridea/omniauth-oauth2)此处的模板松散地创建了自定义 oauth2 omniauth 策略。它运行良好，直到我到达第三站，在那里我将访问代码交换为访问令牌。

我的策略继承了omniauth oauth2 策略，因此使用它的`build_access_token`方法（参见[https://github.com/intridea/omniauth-oauth2/blob/master/lib/omniauth/strategies/oauth2.rb](https://github.com/intridea/omniauth-oauth2/blob/master/lib/omniauth/strategies/oauth2.rb)）来执行交换。该`build_access_token`方法依次调用`client.auth_code.get_token`，它位于“oauth2” gem 中（请参阅[https://github.com/intridea/oauth2/blob/master/lib/oauth2/strategy/auth_code.rb](https://github.com/intridea/oauth2/blob/master/lib/oauth2/strategy/auth_code.rb)）。该`get_token`方法将`client_secret`作为参数添加到请求中。如何`client_secret`从请求中删除 - 或覆盖它？

我有充分的理由这样做，并在我的自定义策略中寻找如何实现它的指导。发送

# sql-server - 如何检索最新的标识值并将其用于 SQLServer/Azure 中的 INSERT 语句？

> ID：15457219
> 
> 赞同：1
> 
> 时间：2013-03-17T03:31:54.297
> 
> 标签：sql-server, azure, azure-sql-database, identity-column, sql-insert

[编辑]

根据 Mitch Wheat 的建议，插入现在可以使用`(SCOPE_IDENTITY(), 'Semi-Fail')`, `(@@IDENTITY, 'Semi-Fail')`; **但是**，两者都在选择时产生`NULL`值：

```
create clustered index test2_inx ON test2 (test1_id); 
```

以下`INSERT`s 都产生 NULL

```
INSERT INTO test1 VALUES ('Semi-failure');
INSERT INTO test2 VALUES (SCOPE_IDENTITY(), 'Semi-failure');
INSERT INTO test1 VALUES ('Semi-failure');
INSERT INTO test2 VALUES (@@IDENTITY, 'Semi-failure');
SELECT * FROM test2; 
```

但是，使用`IDENT_CURRENT`确实有效：

```
INSERT INTO test1 VALUES ('Success');
INSERT INTO test2 VALUES (IDENT_CURRENT('test1'), 'Success'); 
```

...但为什么我不能让它与其他两个一起工作？

谢谢你。

顺便说一句：来自 Oracle，表可以被创建为堆表以外的任何东西而不被指定为这样的概念，嗯，是疯狂的。那是云的事吗？有谁知道这样做的目的？

[/编辑]

DDL：

```
CREATE TABLE test1 (
 id int identity(1,1)
,value varchar(20)
,CONSTRAINT test1_id_pk PRIMARY KEY (id)
);
CREATE TABLE test2 (
 id int
,value varchar(20)
,CONSTRAINT test2_id_fk FOREIGN KEY (id) REFERENCES test1 (id)
) 
```

插入 test1 语句：

```
INSERT INTO test1 VALUES ('failure'); 
```

以下所有失败并出现相同的错误：

```
INSERT INTO test2 VALUES (SCOPE_IDENTITY(), 'fail');
INSERT INTO test2 VALUES (select SCOPE_IDENTITY(), 'fail');
INSERT INTO test2 VALUES ( (select SCOPE_IDENTITY()) , 'fail');
INSERT INTO test2 VALUES (@@IDENTITY, 'fail');
INSERT INTO test2 VALUES (select @@IDENTITY, 'fail');
INSERT INTO test2 VALUES ( (select @@IDENTITY), 'fail');
INSERT INTO test2 VALUES (IDENT_CURRENT('test1'), 'fail');
INSERT INTO test2 VALUES (select IDENT_CURRENT('test1'), 'fail');
INSERT INTO test2 VALUES ( (select IDENT_CURRENT('test1'), 'fail'); 
```

对于上述每个`INSERT`语句，我收到以下错误之一：

```
Tables without a clustered index are not supported in this version of SQL Server. Please create a clustered index and try again.
Incorrect syntax near the keyword 'select'. 
```

此外，以下 select 语句在`INSERT`进入 test1 之后返回 null：

```
SELECT SCOPE_IDENTITY();
SELECT @@IDENTITY; 
```

而以下返回正确的值：

```
SELECT IDENT_CURRENT('test1'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:37:13.140

您***必须***在表上定义聚集索引（如您发布的错误消息中所述）。

> 由于 Microsoft Windows Azure SQL 数据库不支持堆表，因此表必须具有聚集索引。如果在没有聚集约束的情况下创建表，则必须在允许对表执行插入操作之前创建聚集索引。

[参考](http://msdn.microsoft.com/en-us/library/windowsazure/ee336275.aspx)。

这样做，然后`SELECT SCOPE_IDENTITY()`应该工作。

# php - 无法比较php中的查询结果

> ID：15457238
> 
> 赞同：1
> 
> 时间：2013-03-17T03:34:31.867
> 
> 标签：php, html, mysql

我正在尝试将可用现金的查询结果与股票价格进行比较，但它不起作用，我不明白为什么。我不明白为什么它不起作用，因为它们似乎*$cash*和*$value*是有效数字。这是给我问题的线。

```
if($cash < $value) 
```

这是整个文件

```
<?php

//configuration
require("../includes/config.php");

//query user's portfolio
if ($_SERVER["REQUEST_METHOD"] == "POST") 
{

    // Insert the stock into their portfolio 
    if(preg_match("/^\d+$/", $_POST["shares"])==false){

        apologize("Please enter full share numbers");

    }else{

    $cash = query("SELECT cash FROM users WHERE id = ?", $_SESSION["id"]);

    // lookup stock
    $stock = lookup($_POST["symbol"]);

    // calculate total sale value (stock's price * shares)
    $value = $stock["price"] * $_POST["shares"];

    if($cash < $value){
        apologize("you do not have enough money");
    }else{

         //insert stock into database      
       query("INSERT INTO shares 
           (id, symbol, shares)
           VALUES (?, ?, ?) 
           ON DUPLICATE KEY UPDATE shares = shares + VALUES(shares)",
           $_SESSION["id"], strtoupper($_POST["symbol"]),$_POST["shares"]
             );  

        // substract the share value from cash
        query("UPDATE users SET cash = cash - ? WHERE id = ?", $value, $_SESSION["id"]);

        redirect("/");
      }

    }
}
else
{

// render portfolio
render("buy_search.php", ["title" => "Buy"] );
}
?> 
```

这是*查询*功能

```
function query(/* $sql [, ... ] */)
{
    // SQL statement
    $sql = func_get_arg(0);

    // parameters, if any
    $parameters = array_slice(func_get_args(), 1);

    // try to connect to database
    static $handle;
    if (!isset($handle))
    {
        try
        {
            // connect to database
            $handle = new PDO("mysql:dbname=" . DATABASE . ";host=" . SERVER, USERNAME, PASSWORD);

            // ensure that PDO::prepare returns false when passed invalid SQL
            $handle->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
        }
        catch (Exception $e)
        {
            // trigger (big, orange) error
            trigger_error($e->getMessage(), E_USER_ERROR);
            exit;
        }
    }

    // prepare SQL statement
    $statement = $handle->prepare($sql);
    if ($statement === false)
    {
        // trigger (big, orange) error
        trigger_error($handle->errorInfo()[2], E_USER_ERROR);
        exit;
    }
    // execute SQL statement
    $results = $statement->execute($parameters);
    // return result set's rows, if any
    if ($results !== false)
    {
        return $statement->fetchAll(PDO::FETCH_ASSOC);
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:55:40.570

```
if ($cash[0]['cash'] < $value) 
```

根据您的调试评论，应该是这样，因为您需要访问数组 index`cash`的数组索引`0`。如果您不想要这种格式，您应该研究如何返回查询结果以不必使用嵌套数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T03:59:18.207

$cash 几乎可以肯定不是一个数字，甚至不是一个标量值。

查询可能返回结果对象或数组的数组。

# android - ListView - 自定义适配器 - CursorIndexOutOfBound 异常

> ID：15457243
> 
> 赞同：0
> 
> 时间：2013-03-17T03:35:33.457
> 
> 标签：android, android-listview, custom-adapter

安卓 2.3.3

我正在使用自定义适配器来填充列表视图。列表视图中的每一行都有 3 个文本视图（自定义布局），它们是从从数据库中检索到的数据中填充的。

问题是，数据第一次正确显示。但是当我向下滚动然后再次向上滚动列表视图时，我得到以下异常。

```
03-17 08:55:37.789: E/AndroidRuntime(574): FATAL EXCEPTION: main
03-17 08:55:37.789: E/AndroidRuntime(574): android.database.CursorIndexOutOfBoundsException: Index 7 requested, with a size of 7
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
03-17 08:55:37.789: E/AndroidRuntime(574):  at com.mobilevoiceapps.advancedvoicecalculatorfree.History$MyCustomAdapter.getView(History.java:111)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.widget.HeaderViewListAdapter.getView(HeaderViewListAdapter.java:220)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.widget.AbsListView.obtainView(AbsListView.java:1588)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.widget.ListView.makeAndAddView(ListView.java:1772)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.widget.ListView.fillDown(ListView.java:695)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.widget.ListView.correctTooLow(ListView.java:1445)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.widget.ListView.fillGap(ListView.java:672)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.widget.AbsListView.trackMotionScroll(AbsListView.java:4176)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.widget.AbsListView.onTouchEvent(AbsListView.java:2609)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.widget.ListView.onTouchEvent(ListView.java:3677)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.view.View.dispatchTouchEvent(View.java:3885)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:903)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-17 08:55:37.789: E/AndroidRuntime(574):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1750)
03-17 08:55:37.789: E/AndroidRuntime(574):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1131)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
03-17 08:55:37.789: E/AndroidRuntime(574):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1734)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2200)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1884)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.os.Looper.loop(Looper.java:130)
03-17 08:55:37.789: E/AndroidRuntime(574):  at android.app.ActivityThread.main(ActivityThread.java:3687)
03-17 08:55:37.789: E/AndroidRuntime(574):  at java.lang.reflect.Method.invokeNative(Native Method)
03-17 08:55:37.789: E/AndroidRuntime(574):  at java.lang.reflect.Method.invoke(Method.java:507)
03-17 08:55:37.789: E/AndroidRuntime(574):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
03-17 08:55:37.789: E/AndroidRuntime(574):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
03-17 08:55:37.789: E/AndroidRuntime(574):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我正在使用的代码...

从数据库中检索.. public Cursor retrieve_history() {

```
 c = db.rawQuery("select * from history", null);
        return c;
    } 
```

自定义布局 - ListView 行

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:paddingBottom="5dp"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingTop="5dp" >

    <TextView
        android:id="@+id/txtView_History_Count"
        android:layout_width="0dip"
        android:layout_height="50dp"
        android:layout_weight="0.20"
        android:text="Number"
        android:textColor="#FFFFFF"
        android:textSize="22dp"
        android:paddingLeft="5dp"
        android:gravity="center" />

    <LinearLayout
        android:id="@+id/ll2"
        android:layout_width="0dip"
        android:layout_height="50dp"
        android:layout_weight="0.80"
        android:orientation="vertical"
        android:paddingLeft="5dp" >

        <TextView
            android:id="@+id/txtView_History_Result"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Result"
            android:textColor="#316DA2"
            android:textSize="22dp" />

        <TextView
            android:id="@+id/txtView_History_Expression"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Expression"
            android:textColor="#FFFFFF"
            android:textSize="15dp" />
    </LinearLayout>

</LinearLayout> 
```

自定义适配器

```
class MyCustomAdapter extends BaseAdapter{

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return c.getCount();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        LayoutInflater li = getLayoutInflater();
        convertView =  li.inflate(R.layout.history_row, null);

        TextView cnt = (TextView) convertView.findViewById(R.id.txtView_History_Count);
        TextView exp = (TextView) convertView.findViewById(R.id.txtView_History_Expression);
        TextView res = (TextView) convertView.findViewById(R.id.txtView_History_Result);

                cnt.setText(String.valueOf(count));     
                System.out.println(cnt.getText().toString());

                expression = c.getString(c.getColumnIndex("expression"));
                result = c.getString(c.getColumnIndex("result"));

                if(!c.isAfterLast())
                {
                    c.moveToNext();
                    count++;
                    //c.moveToFirst();
                }               

                exp.setText(expression);
                System.out.println(exp.getText().toString());
                res.setText(result);
                System.out.println(res.getText().toString());

        return convertView;
    }

} 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:45:45.933

尝试利用

```
 c.moveToPosition(int position);// Move the cursor to an absolute position. 
```

在 getview 方法中，以便您可以正确设置列表视图行中的数据..

# api - 通过 IP 限制 API 速率

> ID：15457252
> 
> 赞同：3
> 
> 时间：2013-03-17T03:36:34.780
> 
> 标签：api, http, http-headers, rate-limiting

我正在研究如何完成速率限制，似乎很多 API（包括 StackOverflow v1 API）通过 IP 限制速率或将 API 密钥限制为在某个域上使用。这是如何可靠地完成的？

当我查看一个由 XHR 向我的 API 生成的请求时，它有一个引用者（通常）和一个远程地址。我认为远程地址很有希望，但看起来那是使用该网站的用户的地址，而不是发出请求的网站的地址。推荐人看起来并不总是发送，但我想当它在那里时，可以查找与服务器对应的IP。

我的观点是：这一定是可能的，因为一些大牌做到了；他们是怎么做到的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:41:10.067

在欺诈领域，这些被称为速度控制，而在流量管理中，它类似于“流量整形”。基本上，您允许每个时间段的有限使用，例如，您可能只允许 10 个请求/分钟/IP 地址。

对于每个“请求”，确定远程地址（C 中的 getpeername()），此函数将始终是远程用户的 IP 地址。然后简单地计算每个时间段如何处理请求，如果超出限制，请执行任何操作。在伪代码中

```
Get block for remote ip
If time-now is new window, then reset usage to zero
Add one to usage count
If usage > allowance then .....
Else if usage > allowance*0.75 then slow-down 
Else ok 
```

虽然我展示了一个周期，但大多数实现通常是多个周期的平均值，例如每分钟一小时等。它们也倾向于允许突发并且只限制持续负载，但这取决于您希望允许的配置文件。

如果这是针对 API 的，那么简单地减慢请求而不是提供硬错误是正常的。不能保证另一端的客户端会处理该错误。如果是用户屏幕，则可以显示超出限制。

您当然可以通过任何您希望的维度进行限制，IP 地址、引用、浏览器类型！、pageurl、cookie。如果您使用 getpeername，请注意，如果多个并发用户位于公共专用路由器后面，则他们都可以拥有相同的远程 IP 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-19T14:33:27.807

您可以使用请求的远程地址或 x-forwarded-for 标头中的第一个 ip。

仅当您的应用程序位于您信任的反向代理之后或您在 PaaS 上运行时，您才使用标头。您需要控制您信任的级别。检查 nginx 模块 real-ip。

使用 ip 地址是匿名流量的一种非常常见的模式，因为此时您对用户一无所知。一旦用户通过身份验证（作为人或应用程序），最好使用其 id 而不是 ip。

# php - PDO：使用来自两个不同表的数据计算一个值

> ID：15457261
> 
> 赞同：0
> 
> 时间：2013-03-17T03:37:39.880
> 
> 标签：php, pdo

我正在尝试做的是计算一家公司拥有的用于在线游戏的土地的总价值。每个城市的土地当前价值作为 acre_price 存储在 city_list 表中。公司拥有的英亩数作为数量存储在 company_land 表中。所以总价值是acre_price * amount，对公司拥有土地的每个城市都这样做，然后把它们加起来。

acre_price 无法存储在 company_land 表中的原因是因为它是一个不断变化的值 - 如果有足够的活动，它可以每隔几分钟更改一次，并且在两个不同的表中保持土地价值最新会很多工作的。

这是我想出的，并且它成功了一半。它计算了正确的值，但仅适用于公司拥有土地的 1 个城市（数据库中的最新条目）。我需要它来计算数据库中所有条目的值。我尝试在第二个查询中将 fetch 更改为 fetchAll ，但这破坏了代码并且只显示了一个白页。

有谁知道我需要做些什么来实现这一目标？

提前致谢 ：）

```
$sth = null; $count = 0; $data = array();
$sth = $dbh->prepare("SELECT * FROM company_land WHERE company_id = ?");
$company_land_query = $sth->execute(array($_GET['id']));

if($company_land_query){
while($row = $sth->fetch()){
    $land_data = $row;
    ++$count;
}
    if($count > 0){
        $sth = null; $count = 0; $data = array();
        $sth = $dbh->prepare("SELECT * FROM city_list WHERE city_id = ?");
        $land_price_query = $sth->execute(array($land_data['city_id']));
            while($row = $sth->fetch()){
            $city_data = $row;
            $land_value = $land_data['amount'] * $city_data['acre_price'];
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:56:43.967

`SELECT`您可以使用带有这样查询的单个语句来计算该值

```
SELECT SUM(l.amount * c.acre_price) total
  FROM company_land l INNER JOIN
       city_list c ON l.city_id = c.city_id 
```

*它没有经过测试，因为尚未提供表和示例数据的 DDL。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:31:46.427

您过早关闭第一个 while 循环，它应该包含第二个循环，因为第一个循环所做的只是计算从第一个查询返回的行数，并且只返回该查询的最后一行（$land_data 被覆盖多次没有使用）。

代码应该像这样更好地工作，请注意我已经移动了一些代码并删除了一些不需要的行：

```
/*
 * Prepare both queries here, moved the city_list query out from the loops, no
 * need to prepare it multiple times.
 */
$sthLand = $dbh->prepare("SELECT * FROM company_land WHERE company_id = ?");
$sthCity = $dbh->prepare("SELECT * FROM city_list WHERE city_id = ?");
$land_value = 0;

if ($sthLand->execute(array($_GET['id']))) {
    while($land_data = $sthLand->fetch()) {
        if ($sthCity->execute(array($land_data['city_id']))) {
            while($city_data = $sthCity->fetch()) {
                $land_value += $land_data['amount'] * $city_data['acre_price'];
            }
        }
    }
} 
```

$land_value 包含公司拥有的土地总价值。

# vba - VBA MSFORMS vs Controls - 有什么区别

> ID：15457262
> 
> 赞同：5
> 
> 时间：2013-03-17T03:37:57.117
> 
> 标签：vba, userform

向用户窗体添加控件时，以下内容有什么区别。我对何时适合使用其中任何一种感到困惑。

```
Dim aButton1 as MSFORMS.CommandButton
Dim aButton2 as Control.CommandButton
Dim aButton3 as CommandButton 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-18T00:59:34.843

**首先添加用户窗体**。然后在**VBA IDE 中按 F2**，出现**对象浏览器**。在左上角是组合框，选择**MSForms**。在类列表中，您可以看到属于 MSForms 对象库的类。

您可以在该列表中看到**CommandButton**和**Control ：**

![在此处输入图像描述](../Images/71f064659b372e52c047a6e531a9ea8b.png)

**要在代码中声明类型为 CommandButton 的变量：**

```
Dim button1 As MSForms.CommandButton
Dim button2 As CommandButton 
```

变量 button1 肯定是 MSForms 中的 CommandButton 类型。**button2 可以是您自己在本地 VBA 项目中定义的类**......但如果您的本地 VBA 项目不包含任何具有此类名称的类，则它也将被 MSForms 考虑。但是**，如果您引用另一个对象库**说“MSFoo”，它也将包含类 CommandButton，您将必须像这样声明它们**完全合格**：

```
Dim button1 As MSForms.CommandButton
Dim button2 As MSFoo.CommandButton 
```

**要在代码中声明 Control 类型的变量：**

```
Dim controlObject As MSForms.Control 
```

使用 Control 类型的变量，例如控件的基类。例如枚举 Controls 集合：

```
For Each controlObject In Me.Controls
    Debug.Print VBA.TypeName(controlObject)
Next controlObject 
```

或者作为函数中的参数，它不仅需要一种类型的控制：

```
Private Sub PrinControlName(ByRef c As MSForms.Control)
    Debug.Print c.Name
End Sub 
```

所以我认为使用像 MSForms.CommandButton 这样的完全限定名称通常是合适的。使用 Control.CommandButton 是错误的，并且在您引用某个名为“Control”且其中包含类 CommandButton 的对象库之前不会编译。

**编辑：**

这是一个**本地创建的类的示例，其名称**与 MSForm.CommandButton 相同： ![在此处输入图像描述](../Images/f1617fdefb729936257256920bd77e86.png)

以及**TypeName**和**TypeOf**在这种情况下如何工作：

```
Option Explicit

Private m_buttonMsForms As MSForms.CommandButton
Private m_buttonLocal As CommandButton

Private Sub UserForm_Initialize()
    Set m_buttonMsForms = Me.Controls.Add( _
        "Forms.CommandButton.1", "testMsButton", True)
    Set m_buttonLocal = New CommandButton

    m_buttonLocal.Name = "testLocalButton"

    Debug.Print "We have two instances of two different button types: " & _
        m_buttonLocal.Name & " and " & m_buttonMsForms.Name

    ' Check instances with TypeName function
    ' TypeName function returns same results
    If VBA.TypeName(m_buttonMsForms) = VBA.TypeName(m_buttonLocal) Then
        Debug.Print "TypeName of both buton types returns same result"
    End If

    ' Check instances with TypeOf operator
    ' TypeOf doen't work with not initialised objects
    If m_buttonLocal Is Nothing Or m_buttonMsForms Is Nothing Then _
        Exit Sub

    ' TypeOf operator can distinguish between
    ' localy declared CommandButton type and MSForms CommandButton
    If TypeOf m_buttonLocal Is MSForms.CommandButton Then _
        Debug.Print "m_buttonLocal Is MSForms.CommandButton"

    If TypeOf m_buttonMsForms Is CommandButton Then _
        Debug.Print "m_buttonMsForms Is CommandButton"

    If TypeOf m_buttonLocal Is CommandButton Then _
        Debug.Print "m_buttonLocal Is CommandButton"

    If TypeOf m_buttonMsForms Is MSForms.CommandButton Then _
        Debug.Print "m_buttonMsForms Is MSForms.CommandButton"

End Sub 
```

> 输出：
> 
> ```
> We have two instances of two different button types: testLocalButton and testMsButton
> TypeName of both buton types returns same result
> m_buttonLocal Is CommandButton
> m_buttonMsForms Is MSForms.CommandButton 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T13:46:09.060

数字 1 和 3 创建相同类型的控件。第一条语句是完全限定的 - 相当于使用 Dim ws 作为 WorkSheet 或 Dim ws 作为 Excel.WorkSheet。

我不熟悉第二种类型 - “Control.CommandButton” - 它不会在 Excel 2010 的用户表单中为我编译。

# python - 在python中哪种导入方式更好以及对类对象的一些说明

> ID：15457267
> 
> 赞同：0
> 
> 时间：2013-03-17T03:38:49.690
> 
> 标签：python, class, object, import

我有一个名为 Point2.py 的 python 文件，其中包含以下代码

```
class Point():   
    def __init__(self,x=0,y=0):
        self.x = x
        self.y = y
    def __str__(self):
        return "%d,%d" %(self.x,self.y) 
```

现在在解释器中，我这样做了：

```
>>> import Point2
>>> p1 = Point() 
```

但我收到一个错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'module' object is not callable 
```

Point2.py 文件中有 Point 类。为什么我无法将其分配给 p1。当我尝试时：

```
>>> from Point import *

>>> p1 = Point() 
```

有用

我将文件重命名为 Point.py 然后我做了

```
>>> import Point
>>> p1 = Point 
```

这可行，但分配值并不容易。

然而，

```
>>> from Point import *
>>> p1 = Point(3,4) 
```

作品。

我的问题是为什么当我导入 Point 和从 Point import *. 哪种导入方式好？

类和文件名有什么关系吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T03:47:58.803

回答为什么：

```
>>> import Point2
>>> p1 = Point() 
```

不起作用，是因为您没有直接导入类 Point()。要访问该`Point()`课程，您需要执行以下操作：

```
>>> import Point2
>>> p1 = Point2.Point() 
```

或者

```
>>> from Point2 import Point
>>> p1 = Point() 
```

从模块中导入`from x import *`所有*内容。*因此，如果`foo()`模块中有一个函数`bar`，doing`from bar import foo`将导入该函数，因此您可以做`foo()`而不必做`bar.foo()`。这就是为什么当你这样做时`from Point import *`，它会像你不需要做的那样工作`Point.Point()`。

* * *

哪种方式导入更好？好吧，`from x import *`除非你打算使用`x`. 它也可能与您自己脚本中的函数混淆。

用`from x import y`or `import x`，看看[这个问题](https://stackoverflow.com/questions/3591962/python-import-x-or-from-x-import-y-performance)。

# hibernate - “[错误] " 在 GWT compile 之前编译时没有出现这样的错误

> ID：15457268
> 
> 赞同：0
> 
> 时间：2013-03-17T03:39:00.587
> 
> 标签：hibernate, gwt

我已经搜索了网络，但未能找到答案。

我在 Stackoverflow 中发现了一些类似的问题，但它们不能重复。

下面是 GWT 编译时产生的错误信息的一部分。

> [错误]：公共接口 org.hibernate.Session 扩展了 java.lang.Object 实现：java.io.Serializable
> 
> /* 方法 */ public abstract org.hibernate.Transaction beginTransaction() throws org.hibernate.HibernateException
> 
> [未解决] public abstract void cancelQuery() 在 on... 上抛出 Unresolved type ...

在许多其他线程中发现的一些解决方法是

1.  如果以前没有生成此类错误，请删除 [gwt-unitCache]。
2.  或提供正确的签名，如[http://code.google.com/p/google-web-toolkit/issues/detail?id=4470](http://code.google.com/p/google-web-toolkit/issues/detail?id=4470)

是的，我已经编译了我的 gwt 项目一百次，并且没有这样的错误。

Hibernate 工作得非常好并且没有一点与 hibernate 相关的 ORM 被修改过。

但我无法弄清楚它为什么会发生。

在开发模式下，一切正常，但编译过程给了我。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:43:23.767

我努力寻找根本原因，但失败了。

但奇怪的是它现在又开始无错误地编译了，

即使我所做的只是恢复到我以前没有错误的项目并添加一组

其中一个或多个可能是原因的候选片段，

没有任何错误。

它现在可以正常工作了。

那个编译错误侵蚀了我的星期天，很奇怪。

# jquery - 您如何下载和使用 jquery 插件？

> ID：15457273
> 
> 赞同：-1
> 
> 时间：2013-03-17T03:40:17.233
> 
> 标签：jquery, plugins, zip

我正在尝试使用一个名为 DataTables 的 jquery 插件，但不知道我需要对从该站点获得的 .zip 做什么。有没有办法安装它，或者我需要将它包含在我的项目中的一个文件夹中？

我意识到我现在可能错过了一些非常小而简单的东西，但我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:42:51.833

只需在 JQuery 文件之后嵌入您的插件。像这样：

```
<script type="text/javascript" src="js/jquery.tabify.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T03:43:14.453

解压缩并添加到您的脚本中：

```
<script language="javascript" type="text/javascript" src="js/DataTables-1.9.4/media/js/jquery.dataTables.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T03:44:15.247

他们教你如何在[这里](http://www.datatables.net/usage/)使用它，但基本上你解压缩文件并将其链接为 Javascript`<script>`

# html - 导航栏无缘无故下移页面

> ID：15457276
> 
> 赞同：0
> 
> 时间：2013-03-17T03:40:46.793
> 
> 标签：html, navigation

我不是最擅长 HTML 和 CSS 的，但我只是很困惑为什么会这样？我猜它的宽度/高度问题。我有一个页面，当您第一次加载/打开它时，导航栏会向下移动页面，然后当您刷新页面时它会自行修复并移动到页面顶部？

[http://pastebin.com/mXDnuYDw](http://pastebin.com/mXDnuYDw) < index.html

[http://pastebin.com/ENYkKBgk](http://pastebin.com/ENYkKBgk) < stylesheet.css

奇怪的是，当我从记事本++启动索引时，它不会做愚蠢的移动事情吗？

# c++ - 创建一个动态数组？

> ID：15457278
> 
> 赞同：2
> 
> 时间：2013-03-17T03:41:11.107
> 
> 标签：c++, dynamic-arrays

```
 keyMain= new Key_Node[X];
    for(int i=0; i<X; i++)
    {
        keyMain[i].key=i;
        cout << keyMain[i].key<<endl;
        keyMain[i].next_package=NULL;
    } 
```

我在这里做吗？我不确定。这似乎是正确的做法，但有人可以证实吗？谢谢你。`X`是用户输入的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T03:43:46.403

是的，您当然可以这样做，前提是该数组不会增长或缩小。

否则，`std::vector`（请参阅[此处](http://www.cplusplus.com/reference/vector/vector/)）可能是更好的选择。C++在其标准库中提供了一些强大的集合类，自称了解该语言的每个人都应该熟悉它们。

# javascript - 如何使用Javascript保持克隆表中的宽度与原始表相同

> ID：15457279
> 
> 赞同：1
> 
> 时间：2013-03-17T03:41:12.667
> 
> 标签：javascript, html-table, clone

我想要做的是将表头复制到新表中。所以，我尝试如下：

```
var srcTable = document.getElementById("bnn_GridView");
var clonedTable = srcTable.cloneNode(true);
clonedTable.id = "copiedTable";    // clear the id property of the cloned table

var container = document.getElementById("_bnn_GridView_tr");
container.appendChild(clonedTable); 
```

是的，我复制了原始表格

![在此处输入图像描述](../Images/c43677f0d15bbe6c274634f50ed08f72.png)

以上为复制表，以下为原表。它可以找到。但是当我从复制的表中删除行时，它就像..

![在此处输入图像描述](../Images/9cde924cc2cab0df13cec6a0e3e3a03a.png)

我失去了所有的宽度属性。我知道是因为我没有从原始表格中复制宽度。顺便说一句，原始表格本身也没有宽度属性。

这是原始表源。

```
<table id="bnn_GridView">
    <tr>
        <td><div>No</div></td>
        <td><div>Name</div></td>
        <td><div>User ID</div></td>
        <td><div>Address</div></td>
        <td><div>Telephone Number</div></td>
        <td><div>Zipcode</div></td>
        <td><div>Web Site</div></td>
        <td><div>Sex</div></td>
        <td><div>Birthday</div></td>
        <td><div>Note</div></td>
    </tr>
    <tr>
        <td>0</td>
        <td>Richard0</td>
        <td>richard</td>
        <td>5th texas street</td>
        <td>+82 114</td>
        <td>135-080</td>
        <td>http://www.website.com</td>
        <td>Male</td>
        <td>May 5 1980</td>
        <td>Good</td>
    </tr>
</table> 
```

有任何想法吗？保持原始表的宽度，即使我删除了复制表中的所有行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:46:53.903

您将需要遍历源表中一行上的每个单元格，然后在克隆表中的相应单元格上显式设置其宽度。

# ruby-on-rails - 阻止 Devise/ActionMailer 发送确认邮件

> ID：15457280
> 
> 赞同：1
> 
> 时间：2013-03-17T03:41:20.327
> 
> 标签：ruby-on-rails, devise, actionmailer

我正在使用带有 ActionMailer 的设计。如果他们使用 Twitter，我想允许用户创建一个没有电子邮件的帐户。但是如果他们稍后选择添加电子邮件，我仍然需要设计：可确认。

但是，当用户创建新帐户时，Devise 会自动发送确认电子邮件，即使用户不提供它也是如此。因此，将我的 Rails 应用程序部署到 Heroku 时出现错误：

```
ArgumentError (At least one recipient (To, Cc or Bcc) is required to send a message): 
```

没有电子邮件地址时，如何防止 Devise 或 ActionMailer 发送确认电子邮件？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:03:54.567

Devise 有一种`skip_confirmation!`方法可以让您完成此操作，请查看[confirmable.rb](https://github.com/plataformatec/devise/blob/master/lib/devise/models/confirmable.rb#L116)

# iphone - 试图同时为两个 UIView 设置动画，只有一个动作

> ID：15457282
> 
> 赞同：7
> 
> 时间：2013-03-17T03:41:36.557
> 
> 标签：iphone, ios, uiview, uiviewanimation

我正在尝试在我的 iOS 应用程序中创建一个动画，其中一个新视图从左侧滑到屏幕上，而主视图滑到右侧为其腾出空间。主视图是我的视图控制器顶视图的子视图，而滑入的侧视图是从单独的 xib 文件加载的。

如果它是相关的，这是我加载侧视图的代码，从我的主视图控制器的 viewDidLoad 方法调用：

```
sideViewController = [[SideViewController alloc] init];
[sideViewController loadView];

sideView = sideViewController.topView;
[self.view addSubview:sideView];
sideView.hidden = YES;
sideView.frame = CGRectMake(-200, 0, 200, 460); 
```

这是被调用来为两个视图设置动画的代码：

```
sideView.hidden = NO;
[UIView animateWithDuration:0.25f
                 animations:^{                         
                     mainView.frame = CGRectMake(200, 0, 320, 460);
                     sideView.frame = CGRectMake(0, 0, 200, 460);
                 }]; 
```

这看起来很简单。但由于某种原因，只有 sideView 动画 - mainView 不会移动到任何地方。更令人困惑的是，如果我注释掉动画块中移动 sideView 的行，mainView 的动画就会开始工作。

有谁知道出了什么问题？从我读过的所有搜索和文档中，我所做的应该可以正常工作。我原以为会是一个简单的动画，却变成了数小时的挫败感。任何帮助将非常感激！

编辑：

根据郭路川的建议，我尝试为两个 UIView 的不同属性设置动画。大多数都得到了相同的结果，尽管动画它们的两个变换属性*几乎都*起作用了。在这种情况下，两个 UIView 都动画了，但是 mainView 只是做错了事：它的动画从不同的位置开始并在错误的位置结束。看起来它正在执行我指示它执行的翻译，但从向量计算中表示的这个位置开始：

```
starting_point - 0.5 * total_translation 
```

意味着它结束于：

```
starting_point + 0.5 * total_translation 
```

但是，sideView 的动画效果正确。

这该死的烦人。我没有意识到以这种方式在 iOS 上执行动画是如此糟糕。接下来我要尝试的是使用 CABasicAnimation，虽然我很不高兴，但我不得不尝试使用如此低级的 API 来完成如此简单的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T06:42:49.360

我遇到了和你一样的问题。

当我在 中同时设置 2 个视图相同的属性（如`frame`或`transform`）时`UIView animation block`，它将无法达到我的预期。

所以，我设置了一个视图`frame`并设置了另一个视图`transform`，然后效果很好，但我不知道为什么会这样。

我认为这对你来说会很好。

```
sideView.hidden = NO;
[UIView animateWithDuration:0.25f
                 animations:^{                         
                     mainView.frame = CGRectMake(200, 0, 320, 460);
                     sideView.transform = CGAffineTransformMakeTranslation(200,0);
                 }]; 
```

而且我认为您可以制作 2`CABasicAnimation`然后将它们添加到`CAAnimationGroup`. 它也可以为你工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T01:14:49.410

问题是我为我的 xib 文件打开了自动调整大小。我一关掉它，我原来的动画代码就完美无缺地工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T08:27:49.983

如果`sideView`是 的**子视图**，请`mainView`使用以下动画方法：

```
+animateWithDuration:delay:options:animations:completion: 
```

有选项：

```
UIViewAnimationOptionAllowAnimatedContent 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T17:15:14.783

我终于找到了解决方案，我认为这非常令人发指。这是有效的代码：

```
mainView.transform = CGAffineTransformMakeTranslation(400,0);
CABasicAnimation *move = [CABasicAnimation animationWithKeyPath:@"transform.translation.x" ];
[move setFromValue:[NSNumber numberWithFloat:200]];
[move setToValue:[NSNumber numberWithFloat:400]];
[move setDuration:0.25];
move.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
[[mainView layer] addAnimation:move forKey:@"transform.translation.x"];

sideView.center = CGPointMake(100, 230);
CABasicAnimation *sideMove = [CABasicAnimation animationWithKeyPath:@"transform.translation.x" ];
[sideMove setFromValue:[NSNumber numberWithFloat:-200]];
[sideMove setToValue:[NSNumber numberWithFloat:0]];
[sideMove setDuration:0.25];
sideMove.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
[[sideView layer] addAnimation:sideMove forKey:@"transform.translation.x"]; 
```

首先，如果我没有设置 mainView 的变换，那么整个事情就不会起作用，并且 mainView 在动画完成后不会移动到任何地方。我尝试设置它的框架和中心，但都没有任何效果。只有变换有效。这个细节类似于使用 animateWithDuration 方法。

其次，这是让我最困惑的部分，为什么数字是这样的？无论出于何种原因，我需要将 mainView 向右偏移 200 个额外像素（sideView 的宽度），以使其正确对齐。如果我不这样做，即使我正在将它的仿射变换从身份更改为向右平移 200 像素，它的动画也会精确到原来的位置。

据我所知，sideView 正在以某种奇怪的方式影响 mainView，即使它们是直接位于我的视图控制器顶层视图下的兄弟姐妹，并且不应该有任何层次关系*。*我的猜测是这与从 xib 加载 sideView 有关，但据我所知，我这样做是正确的。

希望这个解决方案对发现自己处于类似情况的其他人有用，并且他们不必像我刚才那样做同样烦人的死鸡编程。

另外，如果有人可以为所有这些提供解释，我将非常感激！我不喜欢编写我不理解的东西，我很想知道为什么会发生这一切，这样我就可以避免将来出现这种情况。

# php - 页面刷新后PHP会话变量消失

> ID：15457285
> 
> 赞同：0
> 
> 时间：2013-03-17T03:42:29.587
> 
> 标签：php, session, variables

我有一个大问题，我无法解决。我的会话变量在文件之间交换，但在刷新第二页后它们消失了。

这是代码：

**索引.php**

```
session_start();

header('Title: So random');
header('charset: UTF-8');

//if index.php?login is requested
if(isset($_REQUEST['login'])) {

    //'pass' input box value (from POST) is saved to $pass variable.
    $pass = $_POST['password'];

    //if pasword matches Password.
    if($pass == 'Password') {

        //session_start();

        $_SESSION['logintoken'] = "approoved";
        header("Location: list.php");
        die();

    } else { $error = true; }

}

if(isset($_SESSION['logintoken'])) { 
        header('Location: list.php'); 
        die();
    }

?>
Random HTML With login page goes here... 
```

然后我们有页面，该页面仅适用于登录。从登录重定向到它之后没关系，但刷新后我有“未定义登录令牌”。

**列表.php**

```
<?php
session_start();

if($_SESSION['logintoken'] != "approoved") { 
    //'<meta http-equiv="REFRESH" content="0; url=index.php">'
    die();
}

?>
<html> goes here.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:54:36.993

```
header('Title: So random');
header('charset: UTF-8');   
$_SESSION['logintoken']='' ; 
```

编辑：也许这更好

```
if(isset($_SESSION['logintoken']) && ($_SESSION['logintoken'] != "approoved")) 
```

编辑2：

```
 header("Location: list.php?token=".$_SESSION['logintoken']); 
```

列表.php

```
if($_REQUEST['token'] != "approoved") { 
    //'<meta http-equiv="REFRESH" content="0; url=index.php">'
    die();
} 
```

# ios - persistentStoreManagedObjectContext 与 mainQueueManagedObjectContext

> ID：15457290
> 
> 赞同：7
> 
> 时间：2013-03-17T03:43:13.127
> 
> 标签：ios, restkit, afnetworking

晚上好！

因此，在将数据保存在 Core Data 中时，我一直无法理解到底发生了什么。首先，一个快速的问题：

1）什么时候应该使用persistentStoreManagedObjectContext，什么时候应该使用mainQueueManagedObjectContext？！现在，我总是使用persistentManagedObjectContext，但我可以看到一个RestKit 调用“getObjectsPath”，该对象将具有mainQueueObjectContext。这是为什么？！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:13:58.267

`persistentStoreManagedObjectContext` could be used to populate other another NSManagedObjectContext (e.g. for a background thread).

So unless your not leaving the main thread when accessing the object, use the `mainQueueManagedObjectContext` and you're on the safe site.

# jquery - 如何在 $.unbind 之后重新启用/重新绑定 jQuery UI Sortable？

> ID：15457292
> 
> 赞同：6
> 
> 时间：2013-03-17T03:43:19.070
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

`$('div.something').sortable(options)`工作正常，但在`$('div.something').unbind();`. 尝试重新运行`$('div.something').sortable(options);`或`$('div.something').sortable('refresh');`之后`$('div.something').unbind();`没有帮助。

我正在使用 $.unbind 通过从应用插件的元素中删除事件来停用/取消启动插件，但是这种技术会产生不利影响，因为它会破坏 $.sortable。**关于如何重新激活可排序的任何想法？**

我正在使用最新版本的 jQuery 和 jQuery UI。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T05:06:42.650

在调用`.sortable('destroy')`之前调用`.unbind()`将完全从元素中删除可排序功能。

这可以确保在执行有点危险的调用之前进行适当的拆卸`.unbind()`，这会删除元素上的所有绑定处理程序。然后，您可以重新初始化可排序功能。

```
// Initialization of the sortable feature
$('div.something').sortable(options);
...
// Remove the sortable feature to prevent bad state caused by unbinding all
$('div.something').sortable('destroy');
// Unbind all event handlers!
$('div.something').unbind();
...
// Re-initialize the sortable feature
$('div.something').sortable(options); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-17T04:00:21.717

If you want to deactivate the [sortable](http://jqueryui.com/sortable/) plugin I recommend using [destroy](http://api.jqueryui.com/sortable/#method-destroy) method

```
$('div.something').sortable(options)//Activate
....
$('div.something').sortable('destroy')//Remove the plugin functionality
....
$('div.something').sortable(options)//Reactivate 
```

Demo: [Fiddle](http://jsfiddle.net/arunpjohny/KxnHb/1/)

# math - 素数有规律吗？

> ID：15457294
> 
> 赞同：-3
> 
> 时间：2013-03-17T03:43:28.777
> 
> 标签：math, primes

我已经通过这篇文章： http: [//gauravtiwari.org/2011/12/11/claim-for-a-prime-number-formula/](http://gauravtiwari.org/2011/12/11/claim-for-a-prime-number-formula/)

和这篇论文： [http ://www.m-hikari.com/ams/ams-2012/ams-73-76-2012/kaddouraAMS73-76-2012.pdf](http://www.m-hikari.com/ams/ams-2012/ams-73-76-2012/kaddouraAMS73-76-2012.pdf)

他们说有一个公式，当我给它 (n) 时，它会返回第 n 个素数。在其他文章中，他们说到目前为止还没有发现可以做到这一点的公式。

如果这个公式确实存在，那么为什么他们会时不时地发现已知的最大素数呢，用这个公式来找到一个更大的素数就很简单了。

我只是想确保这样的公式是否存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:51:20.857

从概念上讲，测试给定数字`n`是否为质数非常简单：只需检查所有较小的数字“m”（大于 1）是否“m”除以“n”而没有余数。如果存在这样的“m”，则“n”不是素数。

然后，要找到第`k`-个素数，您只需迭代此过程，直到找到第`k`-个素数。所以是的，这样的公式是存在的。

但是，执行上述过程是**非常**低效的。所以即使有这个公式（在实际情况下你会使用更智能的变体），在你得到答案之前可能需要很长时间。这就是为什么使用更有效的变体和技巧来查找大素数的原因。

# heroku - Heroku 为什么停止使用 doozer？

> ID：15457295
> 
> 赞同：2
> 
> 时间：2013-03-17T03:43:31.107
> 
> 标签：heroku, high-availability, doozer

我听说 Heroku 停止使用 Doozer 或者至少不再使用它了。为了实现强一致性和高可用性，Heroku 用什么替代了 Doozer，为什么？替换解决了 Doozer 的哪些缺点？

# php - PHP Mkdir 将不起作用

> ID：15457301
> 
> 赞同：0
> 
> 时间：2013-03-17T03:44:04.683
> 
> 标签：php, mkdir

我有一个简单的脚本，我需要它做的就是用 GET 变量的名称创建一个目录。当我运行这个脚本时，它似乎没有创建目录。我希望此目录与 PHP 文件位于同一目录中。

```
$dir = $_GET['dir'];
umask(000);
mkdir($_SERVER['DOCUMENT_ROOT']."/".$dir."/",0777); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:51:46.773

在那里放置一些错误处理。大多数时候，错误是不言而喻的。以下摘自 PHP 手册的片段向您展示了如何操作。

```
$rs = @mkdir( $dirPath, 0777 ); 
if( $rs ) 
{ 

    // success

}else{ 

    // print error information 
    echo 'an error occurred. Attempting create folder'; 
    echo '<br>dirPath: ' . $dirPath; 
    echo '<br>php_errormsg: ' . $php_errormsg; 

} 
```

# asp.net - 在asp.net的html电子邮件中嵌入图像到正文

> ID：15457302
> 
> 赞同：0
> 
> 时间：2013-03-17T03:44:05.137
> 
> 标签：asp.net

我应该如何编写将图像嵌入到电子邮件正文的代码？怎么了？

```
 mMailMessage.Body += Server.MapPath(@"<img src=""/Styles/Images/logo.png"""); 
```

.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:52:11.047

您正在将路径映射到名为`"<img src=""/Styles/Images/logo.png"""`!

你想要做的是这样的：

```
mMailMessage.Body += "<img src=\"" + Request.Url.Scheme + "://" + Request.Url.Host + ":" + Request.Url.Port + @"/Styles/Images/logo.png" + "\"/>"; 
```

# prestashop - 部署 prestashop 存储错误

> ID：15457309
> 
> 赞同：0
> 
> 时间：2013-03-17T03:44:49.733
> 
> 标签：prestashop

我在我的开发服务器中创建了一个 prestashop 商店。完成后，复制到最终服务器，更改数据库和域的设置后，网站在ie，ff，chrome和safari中打不开（但是，如果我在浏览器中查看源代码，他是更正），只打开歌剧。在其他浏览器中出现以下错误：

**在铬：**

```
This page contains the following errors:
error on line 67 at column 95: EntityRef: expecting ';'
Below is a rendering of the page up to the first error. 
```

**在火狐中：**

```
Error in analise the XML: bad formater
Location: http://douradoedourado.pt/
Line number 78, colune 191:$('#logofont').change(function(){var gFontVal=$("option:selected",this).val();var gFontName=gFontVal.split(':');$.cookie("logo_font",gFontVal);if($('head').find('link#logofont_link').length<1){$('head').append('<link id="logofont_link" rel="stylesheet" type="text/css" href="" />');}
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------^ 
```

有人帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:52:28.927

通常，当我们将 PS 站点移动到另一台服务器时，我们会遇到一些问题。要解决它们，请执行以下操作： **注意：这些点可能会或可能不会解决您遇到的问题。**

1）禁用缓存并启用强制编译。

2) 从 cache/smarty/compile 以及 cache/smarty/cache 文件夹内容中删除所有编译文件（如果 index.php 除外）

3) 检查站点 url 和 ssl url 的设置。

4) 重新生成.htaccess 文件

在这些之后，检查网站。

如果站点未打开，则启用如下错误

在 config/defines.inc.php 中打开文件并将 _PS_MODE_DEV 设置为 true 以启用错误。

之后重新加载页面。你会看到错误。如果您仍然不理解这些错误，请更新您的帖子以及错误内容，然后我可以帮助您。

谢谢

# python - 正则表达式替换正则表达式

> ID：15457310
> 
> 赞同：2
> 
> 时间：2013-03-17T03:44:59.007
> 
> 标签：python, regex, replace

我有这个正则表达式用于在 Python 代码中获取字符串：

```
x1 = re.compile('''((?P<unicode>u?)(?P<c1>'|")(?P<data>.+?)(?P<c2>'|"))''') 
```

我想提取这个正则表达式的and`data`部分来制作一个替换字符串（如果） ，比如：`c1``c2``c1 == c2`

```
repl = "u<c1><data><c2>" 
```

我怎样才能做到这一点？？
这可能在一行中还是通过使用`re.sub`？

**更新**：
我的新代码：

```
x1 = re.compile('''(?P<unicode>u?)(?P<c>'|")(?P<data>.*?)(?P=c)''')
def repl(match):
    if '#' in match.string:
        ### Confused
    return "u%(c)s%(data)s%(c)s" % m.groupdict()

fcode = '\n'.join([re.sub(x1,repl,i) for i in scode.splitlines()]) 
```

在这里，我在确定如何不更改评论中的字符串时遇到问题，我该怎么做才能忽略评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:17:57.937

假设你有一个模式：

```
pattern = r'''(?P<unicode>u?)(?P<c>'|")(?P<data>.*?)(?P=c)''' # did a little tweak 
```

匹配一个字符串：

```
m = re.search(pattern, "print('hello')") 
```

你有什么：

```
>>> m.groups()
('', '"', 'hello')
>>> m.groupdict()
{'c': '"', 'unicode': '', 'data': 'hello'} 
```

现在你可以用这些做任何你想做的事情：

```
>>> 'u{c}{data}{c}'.format_map(m.groupdict())
'u"hello"' 
```

也许您正在使用 Python 2.x：

```
>>> 'u{c}{data}{c}'.format(**m.groupdict())
'u"hello"' 
```

甚至你喜欢老`%`

```
>>> "u%(c)s%(data)s%(c)s" % m.groupdict()
'u"hello"' 
```

**编辑**：

正则表达式解决方案无法正确处理某些情况。

所以我使用了一个`2to3`hack（实际上是3to2，仍然无法解决所有问题）：

```
cd /usr/lib/python3.3/lib2to3/fixes/
cp fix_unicode.py fix_unicode33.py 
```

编辑`fix_unicode33.py`

```
-_literal_re = re.compile(r"[uU][rR]?[\'\"]")
+_literal_re = re.compile(r"[rR]?[\'\"]")

-class FixUnicode(fixer_base.BaseFix):
+class FixUnicode33(fixer_base.BaseFix):

-                new.value = new.value[1:]
+                new.value = 'u' + new.value 
```

现在`2to3 --list | grep unicode33`应该输出`unicode33`

然后就可以运行了`2to3 -f unicode33 py3files.py`。

记得删除`fix_unicode33.py`后

**注意**：在 Python3 中`ur"string"`抛出`SyntaxError`. 这里的逻辑很简单，修改它以达到你的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:46:49.693

我最终得到的长代码。

```
x1 = re.compile('''(?P<unicode>u?)(?P<c>'|")(?P<data>.*?)(?P=c)''')

def in_string(text,index):
    curr,in_l,in_str,level = '',0,False,[]

    for c in text[:index+1]:
        if c == '"' or c == "'":
            if in_str and curr == c:
                instr = False
                curr = ''
                in_l -= 1
            else:
                instr = True
                curr = c
                in_l += 1
        level.append(in_l)
    return bool(level[index])

def repl(m):
    return "u%(c)s%(data)s%(c)s" % m.groupdict()

def handle_hashes(i):
    if i.count('#') == 1:
        n = i.find('#')
    else:
        n = get_hash_out_of_string(i)
    return re.sub(x1,repl,i[:n]) + i[n:]

def get_hash_out_of_string(i):
    n = i.find('#')
    curr = i[:]
    last = (len(i)-1)-''.join(list(reversed(i))).find('#')
    while in_string(curr,n) and n < last:
        curr = curr[:n]+' '+curr[n+1:]
        n = curr.find('#')
    return n 
```

# ruby-on-rails - 具有 3 种不同类型用户的 Rails 应用程序

> ID：15457313
> 
> 赞同：0
> 
> 时间：2013-03-17T03:45:43.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, activerecord, models

我现在处于应用程序的设计阶段。主要是在纸上做一些事情来了解应用程序模型，定义我需要什么等等。我发现了一个问题，我不知道如何解决，或者更具体地说，我不知道如何实现它以保持干燥。所以这里是交易：

我有应用程序，其中将是三种不同类型的用户/帐户：

1.  **普通账户**- 账户在应用程序中有基本的个人资料和基本权限，普通账户的用户可以看到每个人的公开个人资料，可以修改自己的个人资料，只能有一张个人资料图片，可以搜索等。

2.  **高级帐户**- 具有高级配置文件，这意味着用户可以指定联系信息，外观详细信息，具有预订页面，可以获取报价，具有日历

3.  **公司帐户**- 具有包含公司联系信息的公司资料，可以向高级用户提供报价，并可以浏览应用程序中的所有资料

所以基本上，我为所有用户提供了一个用户模型，我决定使用 Devise 进行身份验证。创建用户后，我想向他/她显示一个屏幕，他/她可以在其中选择帐户类型 - 常规、高级、公司。之后，他/她将在系统中拥有适当的权限以及适当的配置文件。他以后将无法在帐户类型之间进行更改。

我还想保持代码干净和干燥，我很难找到最好的解决方案。现在我把头撞在墙上，因为我不知道该怎么做。这是问题：

应该如何看待这个最终的模型图。它应该是多态关联吗？或者它应该是一般的：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me, :account_type

  has_one :account
  has_one :entertainer
  has_one :company
  after_create :create_account

  def create_account
    if self.account_type == 'Advanced'
      self.entertainer = AdvancedAccount.create(user_id: self.id)
    elsif self.account_type = "Company"
      self.company = CompanyAccount.create(user_id: self.id)
    else
      self.account = RegularAccount.create(user_id: self.id)
    end   
  end
end 
```

还是我走错了路？这个问题的最佳做法是什么？感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T03:56:48.467

我发现[cancan](https://github.com/ryanb/cancan) gem 对于管理用户能力和授权非常有用，而不是为不同类型的用户管理单独的模型。我过去使用[这篇博客文章](http://www.tonyamoyal.com/2010/07/28/rails-authentication-with-devise-and-cancan-customizing-devise-controllers/)来设置它，尽管它现在可能已经过时了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T03:56:22.527

我会在您的 UsersController 中使用一些方法来定义各种访问级别，例如：

`@user = is_advanced?`

这样，您可以允许他们选择他们将拥有的帐户类型，将该选择存储在数据库中`[users::account_type: integer]`。如果您决定添加该功能，这将允许您让他们在未来进行更改。

我不会在您的 Users 类中创建这么多关联，因为它会使您的 RESTfull 路由等膨胀，并使调试过程成为一场噩梦。

# iphone - 确定 AVPlayer 比特率

> ID：15457316
> 
> 赞同：4
> 
> 时间：2013-03-17T03:45:56.613
> 
> 标签：iphone, ios, objective-c, audio-streaming, avplayer

我正在播放实时音频流`AVPlayer`，`AVPlayerItem`并尝试确定流的当前比特率。我在网上搜索并找到了这个帮助： [Determening MPMovieController bit-rate](https://stackoverflow.com/questions/7298735/determening-mpmoviecontroller-bit-rate/15457211#15457211)

受上述线程的启发，我尝试使用以下代码计算它：

```
NSArray *logEvents=playerItem.accessLog.events;
AVPlayerItemAccessLogEvent *event = (AVPlayerItemAccessLogEvent *)[logEvents lastObject];
double bitRate=event.observedBitrate; 
```

但是当在计时器内检查时，该变量`bitRate`始终为零。

事实上`[logEvents count]`也总是为零。

你能告诉我这项技术有什么问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-17T18:14:02.117

除了 Ooops 的建议之外，注册[AVPlayerItemNewAccessLogEntryNotification](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVPlayerItem_Class/index.html#//apple_ref/c/data/AVPlayerItemNewAccessLogEntryNotification)通知以检查比特率可能是明智的。

由于访问日志数组不符合 KVO，使用通知将允许您不使用计时器来检查更新，并且您不必担心等待播放器项目准备好。如果事件被触发得太频繁，您可以选择忽略一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:24:24.647

方法没有问题。检查您的 playerItem 是否实际加载。在 playerItem 被“访问”之前，accessLog 为 nil。在您的播放器变为 AVPlayerStatusReadyToPlay 后尝试获取 accessLogs，您将获得日志。

# ruby-on-rails - 不断收到 ActiveRecord::AssociationTypeMismatch

> ID：15457318
> 
> 赞同：0
> 
> 时间：2013-03-17T03:46:38.243
> 
> 标签：ruby-on-rails, forms, select

几天来，我一直在努力解决这个问题。我不断收到错误：

```
ActiveRecord::AssociationTypeMismatch in SatellitesController#create

Satellite(#70098878574220) expected, got String(#70098849353340) 
```

我已经浏览了这个网站，但似乎没有任何帮助。到目前为止，这是我的代码中的内容：

在我的 new.html.erb 文件中：

```
<%= form_for( @satellite ) do |f| %>
<div class="field">
    <%= f.label :parent_id %></br>
    <%= f.select( :parent_id, Satellite.all.collect { |s| [ s.name, s.id ] }, { :include_blank => '-select-' } ) %>
</div> 
```

这是我正在使用的关联：

```
class Satellite < ActiveRecord::Base

  validates :name, :presence => true, :uniqueness => true

  has_many :satellites, class_name: 'Satellite', foreign_key: 'parent_id'
  belongs_to :parent_id, class_name: 'Satellite', foreign_key: 'parent_id'
end 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:17:02.270

不确定它是否与为什么使用 select 而不是 collection_select 相关？

```
<%= f.select( :parent_id, Satellite.all.collect { |s| [ s.name, s.id ] }, { :include_blank => '-select-' } ) %> 
```

可能

```
<%= f.collection_select :parent_id, Satellite.all, :id, :name, { :include_blank => true } %> 
```

看起来在模型的自引用部分中对您父级的引用可能是错误的。

```
belongs_to :parent_id, class_name: 'Satellite', foreign_key: 'parent_id' 
```

我认为这应该是

```
belongs_to :satellites, class_name: 'Satellite', foreign_key: 'parent_id' 
```

# ruby-on-rails - Ruby where 与 find_each

> ID：15457329
> 
> 赞同：4
> 
> 时间：2013-03-17T03:48:40.423
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在查看官方 Rails 文档，该文档显示了如何使用“find_each”方法。这是他们给出的一个例子

```
Person.where("age > 21").find_each do |person|
  person.party_all_night!
end 
```

这一次处理 1000 条记录。但是，我仍然感到困惑。这如何转化为 SQL？允许 Ruby 一次只能处理 1000 条记录的幕后发生了什么？

我有点困惑的原因是因为似乎 Person.where("age > 21") 会首先执行，这将返回所有结果。

例如：

```
Person.where("age > 21").limit(10) 
```

会先返回内存中的所有人，然后给你前 10 个，对吧？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T03:57:15.053

`Person.where("age > 21")`仅返回 ActiveRecord 关系。它不会返回所有结果。

`Person.where("age > 21").limit(10)`不会将所有模型加载到内存中，这将是糟糕且无法使用的。它只加载10个。

`find_each`一次并没有真正处理 1000 条记录。它加载 1000 条记录，然后处理每一条记录。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-17T04:29:32.213

我建议从控制台运行它并查看 SQL 或阅读源代码。

例如：

```
User.find_each(:batch_size => 40) do |user| end
  User Load (1.0ms)  SELECT "users".* FROM "users" WHERE ("users"."id" >= 0) ORDER BY "users"."id" ASC LIMIT 40
  User Load (0.8ms)  SELECT "users".* FROM "users" WHERE ("users"."id" > 96) ORDER BY "users"."id" ASC LIMIT 40
  User Load (0.8ms)  SELECT "users".* FROM "users" WHERE ("users"."id" > 156) ORDER BY "users"."id" ASC LIMIT 40
  User Load (0.8ms)  SELECT "users".* FROM "users" WHERE ("users"."id" > 219) ORDER BY "users"."id" ASC LIMIT 40
  User Load (0.8ms)  SELECT "users".* FROM "users" WHERE ("users"."id" > 272) ORDER BY "users"."id" ASC LIMIT 40
  User Load (0.8ms)  SELECT "users".* FROM "users" WHERE ("users"."id" > 314) ORDER BY "users"."id" ASC LIMIT 40
  User Load (0.8ms)  SELECT "users".* FROM "users" WHERE ("users"."id" > 355) ORDER BY "users"."id" ASC LIMIT 40 
```

或者

```
bundle show activerecord
point your favorite code editor at that location and find the source 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T04:27:33.760

Ruby 有一个可爱的特性，叫做*codeblocks*。真正伟大的是，*每个*方法都假设 <silently> 接收一个代码块作为最后一个参数。可以动态检查代码块是否以`if block_given?`.

我猜你想知道为什么 Ruby单独*返回*数据`where`而只用链*准备*它？`where.whatever`好吧，`ActiveRecord` 隐式检查是否给出了代码块，或者执行底层 SQL 语句并遍历结果**，或者**返回一个带有准备好但尚未执行的 SQL 语句的迭代器。后者将被延迟执行并按需缓存。例如，相同的做法被用于`Array.each`。在幕后正在执行类似的操作：

```
sql_prepare
if block_given?
  @cache = sql_execute_and_cache
  @cache.each { yield @cache }
end 
```

希望能帮助到你。

# python - 将字符串转换为时间格式

> ID：15457332
> 
> 赞同：0
> 
> 时间：2013-03-17T03:49:06.027
> 
> 标签：python

```
>>> x
['00:05:09.252', '00:05:42.244', '00:06:44.546'] 
```

如何将这些字符串项转换为 'hh:mm:ss.uuu' 时间格式，以便我可以以这种格式进行时间计算？

我阅读了文档，但似乎一切都在日期时间和各种时区的上下文中进行了解释，而我只想以时间格式进行计算，而不为这个任务编写我自己的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T04:02:06.307

鉴于您的数据已严格格式化为`hour:min:sec.usec`

（看起来他们在 python 中没有处理微秒的[指令](http://docs.python.org/2/library/time.html#time.strftime)`strptime`，所以猜你必须自己将值提供给`datetime.time`的构造函数）

```
import datetime
def timeconverter(timestring):
   hour, min, sec = timestring.split(':')
   sec, usec = sec.split('.')
   time = datetime.time(*[int(x, 10) for x in (hour, min, sec, usec)])
   return time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:03:32.273

查看时间模块中的[strptime](http://docs.python.org/2/library/time.html#time.strptime)。

```
import time
t= time.strptime("00:05:42.244", "%H:%M:%S") 
```

如果您不关心秒的小数部分，请执行此操作。如果您确实关心，那么 thkang 使用的方法是一个更好的解决方案。

# java - Java 方法似乎需要很多时间，我无法解释

> ID：15457333
> 
> 赞同：6
> 
> 时间：2013-03-17T03:49:36.147
> 
> 标签：java, performance, reflection, jprofiler

使用 JProfiler，我在我的 Java 代码中发现了一个我无法理解的热点。JProfiler 解释说，这种方法平均需要 150μs（没有预热的情况下为 674μs），不包括调用后代方法所需的时间。150μs 可能看起来不多，但在这个应用程序中，它加起来（并且我的用户体验过）而且看起来很多，与其他对我来说似乎比这个更复杂的方法相比。因此，这对我很重要。

```
private boolean assertReadAuthorizationForFields(Object entity, Object[] state,
        String[] propertyNames) {
    boolean changed = false;
    final List<Field> fields = FieldUtil.getAppropriatePropertyFields(entity, propertyNames);
    // average of 14 fields to iterate over
    for (final Field field : fields) {
        // manager.getAuthorization returns an enum type
        // manager is a field referencing another component
        if (manager.getAuthorization(READ, field).isDenied()) {
            FieldUtil.resetField(field.getName(), state, propertyNames);
            changed = true;
        }
    }
    return changed;
} 
```

我自己在不同的方向上最小化了这种方法，但它从来没有教给我太多有用的东西。我不能过分强调 JProfiler 报告的持续时间 (150μs) 仅与此方法中的代码有关，不包括执行`getAuthorization`、`isDenied`等所需的时间`resetField`。这也是为什么我首先发布这个片段，没有太多上下文，因为问题似乎出在这段代码上，而不是它随后的后代方法调用。

也许你可以争论为什么——如果你觉得我看到了鬼魂:) 不管怎样，谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:40:57.123

可能会减慢您速度的候选人行为：

*   主要效果：明显迭代。如果你有很多领域......你说平均14，这是相当重要的
*   主要影响：热点内联意味着调用的方法包含在您的时间中 - 这可能很明显，因为您的方法调用使用反射。getAppropriatePropertyFields 对类字段定义元数据进行自省；resetField 动态调用 setter 方法（可能使用 Method.invoke()??）。如果你对性能非常渴望，你可以通过 HashSet 使用缓存（映射 ElementClass->FieldMetadataAndMethodHandle） 这可以包含字段元数据和 setter 方法的 MethodHandles（而不是使用 method.invoke，这很慢）。然后，您将只在应用程序启动期间进行反映，并使用 JVM 的快速 dynamicInvoke 支持。
*   次要影响 - 但乘以迭代次数：如果您有非常大的数组用于状态和属性名称，并且它们使用原始字段，那么它们将在方法调用期间涉及某种程度的复制（方法参数实际上是按“值”传递的）表示按引用传递/按原语复制传递）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:37:11.063

我建议您自己为该方法计时，因为分析器并不总是给出准确的时间。

仅使用此代码创建一个微基准，并将其计时至少 2 秒。要计算出方法调用有多大的不同，请将它们注释掉并对它们返回的值进行硬编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T15:23:06.080

我认为问题在于 FieldUtil 正在使用反射并且不缓存它正在使用的字段。

# vim - 注销后关闭 vim Conque

> ID：15457334
> 
> 赞同：1
> 
> 时间：2013-03-17T03:49:43.917
> 
> 标签：vim

我一直在为 Vim 使用[http://code.google.com/p/conque/](http://code.google.com/p/conque/)，工作正常，并且我一直在分配 Ctrl+M 使用以下命令在 .vimrc 上运行 :ConqueTermSplit bash：

```
 map <C-M> :ConqueTermSplit bash<CR> 
```

有没有办法在bash程序终止之前/之后关闭当前conque分屏/缓冲区而无需输入：q或：bd？（通常我使用 ctrl+d 退出 bash）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:07:33.963

从[文档中：](http://code.google.com/p/conque/wiki/Usage#2.1_General_Usage)

> **3.1.7 程序退出时关闭缓冲区**
> 
> 如果您希望终端缓冲区在其中运行的程序退出时关闭并永久删除，请将此选项设置为 1。否则缓冲区将在程序退出后变为简单的文本缓冲区，您可以在 insert 中编辑程序输出模式。
> 
> ```
> let g:ConqueTerm_CloseOnEnd = 0 
> ```

# c++ - C++ GCC 为什么这个 sfinae 代码可以用 GCC 4.7 编译，但不能用 4.8？

> ID：15457338
> 
> 赞同：6
> 
> 时间：2013-03-17T03:50:14.713
> 
> 标签：c++, gcc, c++11, sfinae

我喜欢在模板类中使用本地类来执行诸如“静态 if”之类的构造。但是我遇到了 gcc 4.8 不想编译我的代码的问题。但是 4.7 可以。

这个样本：

```
#include <type_traits>
#include <iostream>
#include <string>

using namespace std;

struct A {
    void printA() {
        cout << "I am A" << endl;
    }
};
struct B {
    void printB() {
        cout << "I am B" << endl;
    }
};

template <typename T>
struct Test {
    void print() {
        struct IfA {
            constexpr IfA(T &value) : value(value) {
            }
            T &value;
            void print() {
                value.printA();
            }
        };
        struct IfB {
            constexpr IfB(T &value) : value(value) {
            }
            T &value;
            void print() {
                value.printB();
            }
        };
        struct Else {
            constexpr Else(...) {}
            void print() {
            }
        };
        typename conditional<is_same<T, A>::value, IfA, Else>::type(value).print();
        typename conditional<is_same<T, B>::value, IfB, Else>::type(value).print();
    }
    T value;
};

int main() {
    Test<A>().print();
    Test<B>().print();
} 
```

选项：

```
g++ --std=c++11 main.cc -o local-sfinae 
```

任务：

1.  给定具有不同打印接口的 A 和 B 类。
2.  编写一个可以打印 A 和 B 的通用类 Test。
3.  不要污染任何命名空间或类范围。

代码说明：

1.  这只是一个干净的例子。
2.  我使用这样的方法，因为我想概括构造“静态 if”。看，我通过它们的字段将参数传递给 IfA 和 IfB 类，而不是直接传递给 print() 函数。
3.  我经常使用这种结构。
4.  我发现这些结构不应该在（污染）类范围内。我的意思是它们应该放在方法范围内。

所以这个问题。

此代码不能用 GCC 4.8 编译。因为它会检查所有类，即使它们从未使用过。但它没有用二进制实例化它们（我已经注释了导致错误的行并用 gcc 4.8 编译它）。证明：

```
$ nm local-sfinae |c++filt |grep "::If.*print"
0000000000400724 W Test<A>::print()::IfA::print()
00000000004007fe W Test<B>::print()::IfB::print() 
```

看，没有 Test::print()::IfB::print()。（见后文：'void Test::print()::IfB::print() [with T = A]'）

如果我使用 gcc 4.8 编译上述代码，则会出现以下错误：

```
g++ --std=c++11 main.cc -o local-sfinae
main.cc: In instantiation of 'void Test<T>::print()::IfB::print() [with T = A]':
main.cc:36:9:   required from 'void Test<T>::print() [with T = A]'
main.cc:49:21:   required from here
main.cc:34:17: error: 'struct A' has no member named 'printB'
                 value.printB();
                 ^
main.cc: In instantiation of 'void Test<T>::print()::IfA::print() [with T = B]':
main.cc:28:9:   required from 'void Test<T>::print() [with T = B]'
main.cc:50:21:   required from here
main.cc:26:17: error: 'struct B' has no member named 'printA'
                 value.printA();
                 ^ 
```

1.  它是 GCC 4.8 错误吗？
2.  还是 GCC 4.7 错误？也许代码不应该被编译。
3.  或者这是我的错误，我不应该依赖编译器行为/不应该使用这种方法来实现“静态 if”。

附加信息：

这个简单的代码可以在 4.7 上编译，但不能在 4.8 上编译。我把它缩短了。

```
struct A {
    void exist() {
    }
};

template <typename T>
struct Test {
    void print() {
        struct LocalClass {
            constexpr LocalClass(T &value) : value(value) {
            }
            T &value;
            void print() {
                value.notExist();
            }
        };
    }
    T value;
};

int main() {
    Test<A>().print();
} 
```

错误：

```
main.cc: In instantiation of 'void Test<T>::print()::LocalClass::print() [with T = A]':
main.cc:16:9:   required from 'void Test<T>::print() [with T = A]'
main.cc:22:21:   required from here
main.cc:14:17: error: 'struct A' has no member named 'notExist'
                 value.notExist();
                 ^ 
```

已经测试了两个 GCC 4.8 版本：2012.10 和 2013.02。希望这是 GCC 4.8 的错误并且可以修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T04:28:04.480

`LocalClass`不是模板。“不使用则不实例化”规则仅适用于类模板的成员函数。

也就是说，当`Test::print()`被实例化时，里面的所有东西都会被激活，包括其本地类中未使用的成员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T16:56:47.560

您的代码中没有 SFINAE。

SFINAE 适用于模板参数推导和参数替换（SFINAE 中的“S”代表替换），但程序中唯一的替换发生`A`在`T`模板参数列表中的替换时`Test`，这不会失败。

然后调用`print()`which instantiates `Test<A>::print()`，它不涉及任何替换，并且由于`value.notExist();`无效而出现错误。

SFINAE 必须用于替换上下文中，例如由函数调用导致的模板参数推导或使用默认参数推导模板参数时。

# php - 不区分大小写字符串的 PHP 引用变量

> ID：15457345
> 
> 赞同：1
> 
> 时间：2013-03-17T03:52:10.500
> 
> 标签：php

PHP 5\. 我需要将不区分大小写的 url 查询转换为 PHP 对象中的成员变量。基本上，我需要知道 url 查询键指向的成员变量，以便知道它是否为数字。

例如：

```
class Foo{
    $Str;
    $Num;
}

myurl.com/stuff?$var=value&num=1 
```

处理此 URL 查询时，我需要知道“str”与 Foo->$Str 等相关联。有关如何处理此问题的任何想法？我什么都想不出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:57:12.347

Try something like this.

```
function fooHasProperty($foo, $name) {
  $name = strtolower($name);
  foreach ($foo as $prop => $val) {
    if (strtolower($prop) == $name) {
      return $prop;
    }
  }
  return FALSE;
}

$foo = new Foo;

// Loop through all of the variables passed via the URL
foreach ($_GET as $index => $value) {
  // Check if the object has a property matching the name of the variable passed in the URL
  $prop = fooHasProperty($foo, $index);
  // Object property exists already
  if ($prop !== FALSE) {
    $foo->{$prop} = $value;
  }
} 
```

And it may help to take a look at php's documentation on [Classes and Objects](http://php.net/manual/en/language.oop5.php).

**Example:**

URL: myurl.com/stuff?var=value&num=1

Then `$_GET` looks like this:

```
array('var' => 'value', 'num' => '1') 
```

Looping through that, we would be checking if `$foo` has a property `var`, (`$foo->var`) and if it has a property `num` (`$foo->num`).

# android - 在 API <9 中获取相机的内在方向

> ID：15457357
> 
> 赞同：0
> 
> 时间：2013-03-17T03:54:36.173
> 
> 标签：android, android-camera

在 API 级别 9 中，Android 添加了 CameraInfo 类，其中包含设备中每个物理摄像头的信息。特别是，它包含一个[方向](http://developer.android.com/reference/android/hardware/Camera.CameraInfo.html#orientation)属性，即“相机图像需要顺时针旋转的角度，以便它以自然方向正确显示在显示器上”。这与设备的实际旋转不同，后者是从 中找到的`getContext().getWindowManager().getDefaultDisplay().getRotation()`。

Android 的[示例代码](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)从后置摄像头的摄像头方向中减去设备的旋转（前置摄像头稍微复杂一些），并将摄像头预览旋转这个量。这允许预览以屏幕的纵向和横向方向正确显示。

在没有 CameraInfo 类的 API 级别小于 9 的情况下，如何获得相机的内在方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:51:40.060

有一些特定于平台的解决方案。但是没有简单的通用解决方案。

Android 有一个硬件抽象层（HAL），不同的厂商会以不同的方式实现 HAL。例如，不同的相机设备可能有不同的驱动程序，所以他们有不同的方式来获取他们的数据，包括你的 cameraInfo。当 Android 将 API 添加到 HAL 中时，它要求其供应商基于其硬件实现该 API。然后 Android 框架和 Android 应用程序可以以统一的方式使用该功能。

但是，正如您所说，getCameraInfo 不在 Froyo 之前的 HAL 中。因此，一种直接的方法是自己从驱动程序或特定于平台的库中获取这些信息。

对于 MSM 相机，`mm_camera_get_camera_info`在`liboemcamera.so`. 您可以使用它来获取 camera_info_t 结构的列表。

```
typedef struct {
  int  modes_supported;
  int8_t camera_id;
  cam_position_t position;
  uint32_t sensor_mount_angle;
}camera_info_t; 
```

该函数封装了对目标相机设备的实际系统调用。`ioctl(controlfd, MSM_CAM_IOCTL_GET_CAMERA_INFO, &cameraInfo)`. 喜欢的可以直接调用。

所以不幸的是，您需要根据您正在使用的设备获取该信息。但也许你期待一个通用的方法。那么我认为实现这一目标的唯一方法是自己实现 HAL。许多 if-else 来决定您需要使用哪个设备或哪个 ioctl 命令。祝你好运。

# c# - how to know the textfield has failed the validation in c#

> ID：15457360
> 
> 赞同：0
> 
> 时间：2013-03-17T03:54:47.403
> 
> 标签：c#, asp.net, validation

I am new to c# and asp.net coding.

I have created a sample page which has a input box and submit button.

I have added regular expression so that the input box takes only numbers.

This is working fine and regular expression is showing error when characters are entered in the field.

But my problem is, when submit button is pressed how I will come to know that validation has been failed for that input box.

How the regular expression result for input box can be accessed when submit button is pressed, so that i will not proceed to save the contents of input box to database

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:03:18.663

If your regular expression is working you could simply put that logic within the button. So when it is pressed the Event Click Notifier does the validation.

# android - 从 android 方法返回字符串到 html 文件，从 webview

> ID：15457365
> 
> 赞同：-3
> 
> 时间：2013-03-17T03:55:50.117
> 
> 标签：android

我看过这篇文章：- [将数据从java类传递到Web View html](https://stackoverflow.com/questions/11752052/passing-data-from-java-class-to-web-view-html)

我们可以将字符串从 android 函数返回到 android 应用程序 webview 中的 html 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T04:05:55.580

您可以实现一些返回此类字符串的 Java 类：

```
public class Bar {
  public String foo() {
    return "bla-bla-bla";
  }
} 
```

之后，您将其传递给 addJavascriptInterface 方法：

```
webView.addJavascriptInterface(new Bar(), "bar"); 
```

现在你有了 JavaScript 对象“bar”：

```
alert(bar.foo()); 
```

# html - I am having problems centering a scroll div

> ID：15457367
> 
> 赞同：0
> 
> 时间：2013-03-17T03:55:52.703
> 
> 标签：html, css

I'm trying to place a *div* that scrolls. I want it dead center on the page but it's not doing it with the code I provided below. Please help.

CSS

```
#content  
{
text-align: center;
}

.scroll
{
background-color:#fff;
color:#000;
width:500px;
height:400px;
overflow:scroll;
} 
```

HTML

```
<div id ="content">
<div class="scroll"> Stuff </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:57:37.940

A div is a block level element and will not listen to `text-algin`. You will either need to use `margin: 0 auto` on the `.scroll` element or make the div an inline-block element. Though support for block level elements to be inline-block level elements is not totally supported so you would have to use a span for complete support. However the better option is if your div has a set width, use a left and right margin of `auto` on the element you want to center.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T03:57:46.447

`text-align` only affects text. To position a `<div>` in the center, use
`margin-left:auto;margin-right:auto`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T04:03:05.863

You can add `display:inline;margin:auto` to your `<div>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T04:08:16.047

尝试这个

**HTML**

```
<div id ="content">
<div class="scroll"> Stuff </div>
</div> 
```

**CSS**

```
#content  
{
    text-align: center;
    margin-left:auto;
    margin-right:auto;
    width:300px;
    height:200px;
    overflow: scroll;
}

.scroll
{
    background-color:#fff;
    color:#000;
    width:500px;
    height:400px;
} 
```

[**在这里**](http://jsfiddle.net/jNWva/)生活小提琴[](http://jsfiddle.net/jNWva/)

# java - 抽象列表 - add(int index, E element), add(E e) 等返回类型的区别？

> ID：15457372
> 
> 赞同：2
> 
> 时间：2013-03-17T03:56:12.307
> 
> 标签：java

方法`addAll(int index, Collection<? extends E> c)`并`add(E e)`返回 a`boolean`以通知元素已成功添加。另一方面，`add(int index, E element)`没有。

为什么会这样？我如何知道是否可以添加元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T04:02:14.037

`add(E)`是 的成员`Collection`。对于某些类型的集合——`Set`尤其是保证唯一性的集合——有时添加一个元素可能会以一种不足为奇的方式“失败”，因为该元素已经在集合中。在这种情况下，布尔返回值很有用。

`add(int, E)`另一方面，它是 的成员`List`，并且以这种方式将元素添加到列表中永远不会失败 -`List`根据定义， a 可以包含重复元素。

`addAll(int, Collection<E>)`有点难。它是 的成员`List`，因此根据定义，添加不会被拒绝。Javadoc 说“如果此列表因调用而更改”，则返回 true。我想如果参数是一个空集合，它可能会返回 false。这似乎不是很有用。

但请注意，有一个`addAll(Collection<E>)`in ，并且当所有添加的元素都是重复的并且集合是 a 时`Collection`，它可以返回。所以我想该方法返回是因为该方法确实 - 为了对称，而不是出于任何真正的需要。`false``Set``List``boolean``Collection`

# iphone - Detect a pan over multiple objects?

> ID：15457387
> 
> 赞同：0
> 
> 时间：2013-03-17T03:59:42.527
> 
> 标签：iphone, ios, objective-c, xcode, uigesturerecognizer

So here I have a loop that creates a bunch of different squares on the screen, using an array, and I've added a gesture recognizer to detect for a pan. The thing is, I want to be able to smoothly slide over one object to the next, without lifting my finger. But, with my current code I have to lift my finger and slide over each object individually. Does anyone know how to make it so that I can smoothly slide my finger over each object, and have them perform their functions when they've been slid over? Here's my code:

```
 int numby = [squareLocations count];

    for (int i = 0; i < numby; i++)
    {
        NSValue *pointLocation = [squareLocations objectAtIndex:i];
        CGPoint tmpPoint = [pointLocation CGPointValue];
        UIImage *theSquare = [UIImage imageNamed:@"square.png"];

        UIButton *squareButton = [[UIButton alloc] init];

        squareButton = [UIButton buttonWithType:UIButtonTypeCustom];
        squareButton.frame = CGRectMake(tmpPoint.x, tmpPoint.y, theSquare.size.width, theSquare.size.height);
        squareButton.tag = *(&i);
        [squareButton setImage:theSquare forState:UIControlStateNormal];

        UIPanGestureRecognizer *slide = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
        [squareButton addGestureRecognizer:slide];

        [whereStuffActuallyHappens addSubview:squareButton];

    }

}

- (void) handlePan:(UIPanGestureRecognizer *)slide {

    [slide setTranslation:CGPointZero inView:slide.view];

    NSInteger tag = slide.view.tag;
    NSLog(@"Tag is: %i", tag);

    [slide.view removeFromSuperview];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:28:55.290

一种有点hack-ish的方法是将平移手势添加到正方形的超级视图中，并检查哪个手势的位置与其框架发生碰撞。

# r - 使用带有小插图的 R CMD 检查时从当前包访问功能

> ID：15457388
> 
> 赞同：1
> 
> 时间：2013-03-17T03:59:49.393
> 
> 标签：r, sweave

我正在整理一个包裹；为简单起见，使用一个功能和一个小插图来说明其用途。

在尝试添加小插图之前，我能够毫无困难地运行`R CMD check packagename`。`foo.R`该包的`R`目录中有一个函数`packagename`（它用基本图形制作一个图）。目录中的小插图`vignettes`（一个`.Rnw`文件）调用函数`foo`如下：

```
<<fig1, fig=true, echo=true, include=true>>=
df0 <- data.frame(x1=rnorm(10))
foo(df0)
@ 
```

我想“按规则”玩，但`R CMD check packagename`照常运行会给出：

```
 When sourcing 'foo.R':
  Error: could not find function "foo"
  Execution halted 
```

我尝试将以下内容添加到`.Rnw`文件中，但没有帮助：

```
\begin{document}
\VignetteDepends{packagename} 
```

我也试过这个没有成功：

```
<<fig1, fig=true, echo=true, include=true>>=
df0 <- data.frame(x1=rnorm(10))
source("foo.R")
foo(df0)
@ 
```

请注意，该`NAMESPACE`文件已包含以下内容：

```
export(foo) 
```

问题：

每次从包中调用函数时，是否需要在文件中添加特定`source()`命令？`.Rnw`如果是这样，我如何指定路径（即`R CMD check`检查小插图时从哪里开始？）

`DESCRIPTION`或者我应该通过将以下内容添加到文件中来采取简单的方法：

```
BuildVignettes: False 
```

（因为我能够`.pdf`从现有`.Rnw`文件构建一个）。

我正在尝试遵循[**编写 R 扩展**](http://cran.r-project.org/doc/manuals/R-exts.pdf)中的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:37:24.593

您的小插图需要`library("mypkg")`位于顶部，以便`foo`可以找到您自己的功能，例如 。我相信这是因为小插图建筑在一个干净的环境中运行，所以它不知道您的包裹或任何其他相关信息，除非您提出它。

如果您已经有这样的一行，请在您的问题中加入一个小插图的示例，并包括您的`sessionInfo()`，因为我们可能需要它来解决它。

# xml - Migrating from Smart GWT Power 3.0 to 3.1

> ID：15457393
> 
> 赞同：0
> 
> 时间：2013-03-17T04:01:07.377
> 
> 标签：xml, gwt, maven-3, smartgwt, smartgwt-pro

I'm starting my intership next Monday. My mission is migrating an application from Smart gwt 3.0 to 3.1.

The application works with XML's Datasources and Xpath to query all data. It works within a Maven Project and uses Spring/Hibernate/Bitronix-JTA. According to my boss, when we upgrade smartgwt to 3.1 there is no error or exception thrown, however, most datasources don't work anymore. He said that the XPath is not valid anymore and it's being interpreted as String or something like that.

Monday I'll see what the issue looks like, but before that I'd rather preferred to ask question here to have your opinions. If someone has already seen this issue he can make my ideas clear and help to make a good beginning. If I've got the source code like POM or *.ds.xml or output exception I'll post it here as I get them.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:19:15.780

首先感谢 Caleb 纠正了我之前的问题。
我比较了分别在 3.0 和 3.1 版本上运行的两个应用程序，我发现了一个问题。
一些 GridLists 没有被正确填充，我确定查询（我还不知道的 SQL 或 XQuery 或 XPath）运行正常，因为在标题中我有 executeFetch () 返回的记录数（照片中的 104），但是 GridList 是空的，我宁愿说记录是空的，如您所见，复选框在那里......我认为问题来自记录的实例化，我还没有完成对代码源的分析有点大（甚至是巨大的）而且不是我的，我首先要习惯我前辈的编程方式，这里有两张说明问题的图片，我总是在我身边搜索，但任何技巧，提示或欢迎体验 谢谢大家。

[智能 GWT 3.0](http://img15.hostingpics.net/pics/731790Version30.png)
[智能 GWT 3.1](http://img15.hostingpics.net/pics/161975Version31.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:42:49.157

首先，我建议您查看 SmartGWT 3.1 的发行说明。您将大致了解更改的内容以及您最应该关心的功能类型。

尽管 DataSource 功能可能存在一些问题，但您可能会发现页面布局行为发生了一些变化。我计划在一月份从 3.0 迁移到 3.1，但它从未通过测试。一切都很好，除了一件事：应用程序需要以各种格式显示一些文档，而 PDF 显然就是其中之一。问题是我需要在渲染文档前面打开一些 SmartGWT Windows 来渲染它。在 Chrome 和 IE 中，这在 v3.0 中不是问题，但在 v3.1 中，窗口永远不会停留在它前面。始终显示在浏览器加载的插件后面以显示文档。

祝你好运！

# c# - C#如何判断exe是否在硬盘上

> ID：15457394
> 
> 赞同：-2
> 
> 时间：2013-03-17T04:01:11.747
> 
> 标签：c#, .net

有一个 exe 文件，它可以在驱动器上的任何位置。如何使用 C# 和 WinForms 扫描并判断它是否存在

我尝试了这段代码，但没有让它正常工作

```
if (Directory.GetFiles(@"C:\", "MCRInstaller.exe", SearchOption.AllDirectories))
{
    // do something. 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T04:07:46.307

```
List<string> files = Directory.EnumerateFiles(startFolder, "*.txt",
                                              SearchOption.AllDirectories).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T04:34:29.063

您可能还想知道，当您点击系统文件夹（系统卷信息、RECYCLER、Windows 等）时会引发异常。

考虑一些排除项，如下面的 lambda 所示：

```
List<string> matches = new List<string>(); 
DirectoryInfo C = new DirectoryInfo("C:\\");
var rootFiles = C.GetFiles();
var rootDirs = C.GetDirectories("*", SearchOption.TopDirectoryOnly).Where(dir => !dir.Name.Equals("System Volume Information") && !dir.Name.Equals("RECYCLER") && !dir.Name.Equals("WINDOWS"));

foreach (var rf in rootFiles)
{
    if (rf.Name.Equals("MCRInstaller.exe"))
    {
        matches.Add(rf.FullName);
    }
}

foreach (var rdir in rootDirs)
{
    try
    {
        var dirFiles = rdir.GetFiles("*", SearchOption.AllDirectories);

        foreach (var aFile in dirFiles)
        {
            if (aFile.Name.Equals("MCRInstaller.exe"))
            {
                matches.Add(aFile.FullName);
            }
        }
    }
    catch (UnauthorizedAccessException err)
    {
        using (StreamWriter errLog = File.AppendText("errors.log"))
        {
            string dt = "[" + DateTime.Now + "]: ";
            errLog.Write(dt);
            errLog.Write(err.StackTrace);
        }
    }
}

foreach (string match in matches)
{
    //do some stuff with your list of matches
} 
```

# javascript - 需要禁用内联 Fancybox 库的循环 - 循环：假和循环：假不起作用

> ID：15457396
> 
> 赞同：2
> 
> 时间：2013-03-17T04:01:32.763
> 
> 标签：javascript, loops, fancybox, fancybox-2, cyclic

第一次在这里发帖，请善待。我到处找，找不到我的确切问题。我创建了一个带有内联 HTML 的 fancybox 库。它在第一次点击时效果很好，但是当它循环回到第一个 div 时，它开始无序显示它们。因此，我想简单地禁用循环。但是，我尝试通过 Javascript 禁用它，但无济于事。

作为记录，这是画廊在浏览时采用的模式：

*   第 1 部分
*   第 2 部分
*   第 3 部分
*   第 4 部分
*   循环到 Div 1
*   第 3 部分
*   第 2 部分
*   第 4 部分
*   第 3 部分
*   第 1 部分

^ 如果有人能告诉我为什么会这样，那就去吧！这将不胜感激。但如果我能让它停止循环，我会很满足

我将分享我的一些代码...

HTML 标记：

```
<div id="container">
<div><p>
    <a class="fancybox" href="#inline1" data-fancybox-group="gallery"><img src="images/zacthumb.png" alt="" /></a>
    <a class="fancybox" href="#inline2" data-fancybox-group="gallery"><img src="images/zacthumb.png" alt="" /></a>
    <a class="fancybox" href="#inline3" data-fancybox-group="gallery"><img src="images/zacthumb.png" alt="" /></a>
    <a class="fancybox" href="#inline4" data-fancybox-group="gallery"><img src="images/zacthumb.png" alt="" /></a>
</p></div>
</div></div>
<div id="inline1" style="width:820px;display: none;">
    <p id="zac"><font size="4">    
    <b>ZAC NORRIS</b></font><br /><br />Lorem ipsum dolor sit amet, consectetur adipiscing     
elit. Etiam quis mi eu elit tempor facilisis id et neque. Nulla sit amet sem sapien.   
Vestibulum imperdiet porta ante ac ornare. Nulla et lorem eu nibh adipiscing ultricies nec     at lacus. Cras laoreet ultricies sem, at blandit mi eleifend aliquam. Nunc enim ipsum,     vehicula non pretium varius, cursus ac tortor. Vivamus fringilla congue laoreet. Quisque     ultrices sodales orci, quis rhoncus justo auctor in. Phasellus dui eros, bibendum eu feugiat     ornare, faucibus eu.<br /><br />Nunc aliquet tempus sem, id aliquam diam varius ac. Maecenas     nisl nunc, molestie vitae eleifend vel, iaculis sed magna. Aenean tempus lacus vitae orci    posuere porttitor eget non felis. Donec lectus elit, aliquam nec eleifend sit amet, vestibulum    sed nunc.</p>
    </p><br /><div id="boxnav"><center>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="fancybox" href="#inline2" data-fancybox-group="gallery"><img src="next1.png" onclick="$("ul li a").click(function() { $("#us").toggle("fast"); });"/></a></center></div>
</div>

<div id="inline2" style="width:820px;display: none;">
<p id="zac"><font size="4"><b>PERSON TWO</b></font><br /><br />Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam quis mi eu elit tempor facilisis id et neque. Nulla sit amet sem sapien. Vestibulum imperdiet porta ante ac ornare. Nulla et lorem eu nibh adipiscing ultricies nec at lacus. Cras laoreet ultricies sem, at blandit mi eleifend aliquam. Nunc enim ipsum, vehicula non pretium varius, cursus ac tortor. Vivamus fringilla congue laoreet. Quisque ultrices sodales orci, quis rhoncus justo auctor in. Phasellus dui eros, bibendum eu feugiat ornare, faucibus eu.<br /><br />Nunc aliquet tempus sem, id aliquam diam varius ac. Maecenas nisl nunc, molestie vitae eleifend vel, iaculis sed magna. Aenean tempus lacus vitae orci posuere porttitor eget non felis. Donec lectus elit, aliquam nec eleifend sit amet, vestibulum sed nunc.</p>
    </p><br /><div id="boxnav"><center><a class="fancybox" href="#inline1" data-fancybox-group="gallery"><img src="prev1.png" onclick="$("ul li a").click(function() { $("#us").toggle("fast"); });"/></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="fancybox" href="#inline3" data-fancybox-group="gallery"><img src="next1.png" onclick="$("ul li a").click(function() { $("#us").toggle("fast"); });"/></a></center></div>
</div>

<div id="inline3" style="width:820px;display: none;">
    <p id="zac"><font size="4"><b>PERSON THREE</b></font><br /><br />Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam quis mi eu elit tempor facilisis id et neque. Nulla sit amet sem sapien. Vestibulum imperdiet porta ante ac ornare. Nulla et lorem eu nibh adipiscing ultricies nec at lacus. Cras laoreet ultricies sem, at blandit mi eleifend aliquam. Nunc enim ipsum, vehicula non pretium varius, cursus ac tortor. Vivamus fringilla congue laoreet. Quisque ultrices sodales orci, quis rhoncus justo auctor in. Phasellus dui eros, bibendum eu feugiat ornare, faucibus eu.<br /><br />Nunc aliquet tempus sem, id aliquam diam varius ac. Maecenas nisl nunc, molestie vitae eleifend vel, iaculis sed magna. Aenean tempus lacus vitae orci posuere porttitor eget non felis. Donec lectus elit, aliquam nec eleifend sit amet, vestibulum sed nunc.</p>
    </p><br /><div id="boxnav"><center><a class="fancybox" href="#inline2" data-fancybox-group="gallery"><img src="prev1.png" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="fancybox" href="#inline4" data-fancybox-group="gallery"><img src="next1.png" /></a></center></div>
</div>

<div id="inline4" style="width:820px;display: none;">
    <p id="zac"><font size="4"><b>PERSON FOUR</b></font><br /><br />Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam quis mi eu elit tempor facilisis id et neque. Nulla sit amet sem sapien. Vestibulum imperdiet porta ante ac ornare. Nulla et lorem eu nibh adipiscing ultricies nec at lacus. Cras laoreet ultricies sem, at blandit mi eleifend aliquam. Nunc enim ipsum, vehicula non pretium varius, cursus ac tortor. Vivamus fringilla congue laoreet. Quisque ultrices sodales orci, quis rhoncus justo auctor in. Phasellus dui eros, bibendum eu feugiat ornare, faucibus eu.<br /><br />Nunc aliquet tempus sem, id aliquam diam varius ac. Maecenas nisl nunc, molestie vitae eleifend vel, iaculis sed magna. Aenean tempus lacus vitae orci posuere porttitor eget non felis. Donec lectus elit, aliquam nec eleifend sit amet, vestibulum sed nunc.</p>
    </p><br /><div id="boxnav"><center><a class="fancybox" href="#inline3" data-fancybox-group="gallery"><img src="prev1.png" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</center></div>
</div> 
```

失败的Javascript？如果需要可以提供更多：

```
 defaults: {
        padding : 5,
        margin  : 20,

        width     : 800,
        height    : 600,
        minWidth  : 100,
        minHeight : 100,
        maxWidth  : 9999,
        maxHeight : 9999,

        autoSize   : true,
        autoHeight : false,
        autoWidth  : false,

        autoResize  : true,
        autoCenter  : !isTouch,
        fitToView   : true,
        aspectRatio : false,
        topRatio    : 0.5,
        leftRatio   : 0.5,

        scrolling : 'auto', // 'auto', 'yes' or 'no'
        wrapCSS   : '',

        arrows     : true,
        closeBtn   : true,
        closeClick : false,
        nextClick  : false,
        mouseWheel : false,
        autoPlay   : false,
        playSpeed  : 3000,
        preload    : 3,
        modal      : false,
        cyclic       : false, 
```

先感谢您。

<3 劳拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:08:21.657

你有多个这样写的 onclick 属性

```
onclick="$("ul li a").click(function() { $("#us").toggle("fast"); });" 
```

在您的代码中，这是错误的 - 由于您对引号的处理不正确，此属性仅包含 $ 符号。先解决这个问题，看看问题是否仍然存在。如果是这样，请至少提供一个在线示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:40:01.967

好吧，这个很容易解释：

Fancybox 将使用AND的所有`<a>`标签创建一个**图库**，包括那些在您的内联内容中的标签。`class="fancybox"``data-fancybox-group="gallery"`

 **换句话说，如果您的缩略图像：

```
<a class="fancybox" href="#inline1" data-fancybox-group="gallery"><img src="1_s.jpg" alt="" /></a>
<a class="fancybox" href="#inline2" data-fancybox-group="gallery"><img src="2_s.jpg" alt="" /></a>
<a class="fancybox" href="#inline3" data-fancybox-group="gallery"><img src="3_s.jpg" alt="" /></a>
<a class="fancybox" href="#inline4" data-fancybox-group="gallery"><img src="4_s.jpg" alt="" /></a> 
```

...然后，fancybox 库将按该顺序包含 4 个元素，**但是**，如果您还包括以下内容`#inline1`：

```
<a class="fancybox" href="#inline2" data-fancybox-group="gallery">Fog >></a> 
```

...然后您将*第五个*元素添加到您的画廊（`#inline2`），这就是为什么`#inline2`总是显示在`#inline4`

当然，如果你在里面添加`#inline2`

```
<a class="fancybox" href="#inline1" data-fancybox-group="gallery"><< Trees</a> | 
<a class="fancybox" href="#inline3" data-fancybox-group="gallery">Sunshine >></a> 
```

...然后`#inline1`成为您画廊的*第 6 个*元素和 ，依此类推。`#inline3``7th`

此时您的画廊将是

*   #inline1
*   #inline2
*   #inline3
*   #inline4
*   #inline2
*   #inline1
*   #inline3 等

你怎么能解决它？

如果您想在内联内容中包含自己的导航，请首先考虑 javascript 索引的工作原理，第*一个*元素以`index = 0` so 开头：

*   树 = 0
*   雾 = 1
*   阳光 = 2
*   巴黎 = 3

如果您知道要移动到的图库中每个元素的索引，则可以使用 fancybox 方法`$.fancybox.jumpto()`在图库中导航。

所以，如果你想去*雾*（从内部`#inline1`），而不是这个：

```
<a class="fancybox" href="#inline2" data-fancybox-group="gallery">Fog >></a> 
```

... 做这个 ：

```
<a href="javascript:$.fancybox.jumpto(1);">Fog &gt;&gt;</a> 
```

**请注意**，我正在`>`使用其形式转义字符`&gt;`以避免 html 验证错误（改为使用`&lt;`字符`<`）**

# wordpress - 编辑 wordpress Shopp 插件以启用促销代码输入

> ID：15457398
> 
> 赞同：1
> 
> 时间：2013-03-17T04:01:45.457
> 
> 标签：wordpress, shopp

我想为 wordpress 上的 Shopp 插件启用促销代码输入框。

文档说要显示促销框，我需要将以下 PHP 添加到模板文件中：

```
<?php shopp('cart','promo-code'); ?> 
```

我是 wordpress CMS 的新手，不知道这应该添加到哪个模板文件/在哪里查看。如果有人这样做，我将非常感谢添加此 PHP 以启用该功能的详细信息。所有教程都侧重于在 cpanel 中创建促销，但不包括使用 PHP 打开促销输入框。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:26:06.740

这是一个主题 API 标签，通常添加到购物车模板文件中。在您的主题中设置自定义模板时，该文件位于`wp-content/themes/yourtheme/shopp/cart.php`. 请注意，它`yourtheme`代表您的活动 WordPress 主题文件的目录名称。

Shopp 具有内置的入门模板，您可以将其复制到您的主题文件中。不建议在 Shopp 插件中编辑模板文件，因为每次升级都会丢失所做的更改。

您可以自己将文件从 Shopp 复制到您的主题，也可以使用内置系统进行复制。有关这些模板以及如何将它们安装到您的主题中进行自定义的更多信息，请参阅[主题模板](https://shopplugin.net/docs/the-catalog/theme-templates/)文章中的 Shopp 用户指南文档。

# c# - 如果富文本框中包含 X，则更改字符串颜色

> ID：15457402
> 
> 赞同：1
> 
> 时间：2013-03-17T04:02:20.250
> 
> 标签：c#, windows, winforms, richtextbox

我有一个提供输出的 Jar 文件和一个将输出写入其中的富文本框。Jar 文件给出的每个字符串都是富文本框中的一个新行。如果该行包含某些关键字，我想更改它的颜色。我尝试了以下方法：

```
if (textR.Contains("[INFO]"))
{
    //txtboxServerOutput.Text += textR + "\n";
    txtboxServerOutput.SelectedText = textR;
    txtboxServerOutput.SelectionColor = Color.Aqua;
}
else
{
    txtboxServerOutput.Text += textR + "\n";
} 
```

这会导致输出混乱。富文本框对一些包含“[INFO]”的文本进行了着色，但不是全部，所有内容都是一行。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T04:20:47.980

我最终为它创建了一个重载`AppendText`：

```
// Adds new overload for AppendText for rich textboxes
public static class RichTextBoxExtensions
{
        public static void AppendText(this RichTextBox txtbox, string text, Color color)
        {
            txtbox.SelectionStart = txtbox.TextLength;
            txtbox.SelectionLength = 0;

            txtbox.SelectionColor = color;
            txtbox.AppendText(text);
            txtbox.SelectionColor = txtbox.ForeColor;
        }
}; 
```

所以现在我可以这样做：

```
richTextBox.AppendText("some random text", Color.Blue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:44:53.173

试试这个 -

```
if (textR.Contains("[INFO]"))
{
    txtboxServerOutput.SelectionColor = Color.Aqua;
}
txtboxServerOutput.SelectedText = textR + "\n"; 
```

# cors - Fineuploader 3.3 CORS upload failed error IE9 IE8

> ID：15457404
> 
> 赞同：0
> 
> 时间：2013-03-17T04:02:55.770
> 
> 标签：cors, fine-uploader

I am having having trouble with FineUploader for cross domain (CORS) submission inside of a hidden iframe (i.e. IE 9, 8). For each cross-domain upload request, the image uploads successfully, but the error message displays, with the IE bugger stating:

```
No valid message received from loaded iframe for file id 1 
```

In detail now, their [blog](http://blog.fineuploader.com/2013/01/31/cors-support-in-3-3/) says that:

> All cross-domain iframe-initiated responses must end with the script tag above, and the valid JSON portion MUST include the UUID of the associated file. Note that you must host the iframe.xss.response.js file on an accessible server and reference it in the tag accordingly. When the contents of your response is returned to the iframe tracked by Fine Uploader, the associated javascript file imported by the script tag above will be executed, and will pass the JSON portion of your response to the uploader via window.postMessage.

Ok, so I implement this as follows:

```
if(!isset($_SERVER['HTTP_X_REQUESTED_WITH']) 
                || (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH']!="XMLHttpRequest")){{
        header("Content-Type: text/html");
        $result['uuid'] = $uploader->gen_uuid();
        echo json_encode($result);
        echo "<script src='http://example.com/js/iframe.xss.response-3.3.0.js'></script>";
    } 
```

Now, Fiddler says the response is as follows:

```
HTTP/1.1 200 OK
Date: Sun, 17 Mar 2013 03:26:49 GMT
Server: Apache
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: PHPSESSID=VJ3AgTRnMtjAqbxizfXBN3; path=/
Vary: Accept-Encoding
Content-Length: 203
Keep-Alive: timeout=2, max=100
Connection: Keep-Alive
Content-Type: text/html

{"success":true,"uploadName":"_73d05d51b4ab624e3260ef0b289a60bc_NMS_0785.JPG","uuid":"749174c7-e29c-485f-9f6d-cc18d4b5d0fd"}<script src='http://example.com/js/iframe.xss.response-3.3.0.js'></script> 
```

And the IE debugger says:

```
 [FineUploader] Processing 1 files or inputs... 
 [FineUploader] Sending upload request for 1 
 [FineUploader] Received iframe load event for CORS upload request (file id 1) 
 [FineUploader] Received the following window message: '{"success":true,"uploadName":"_73d05d51b4ab624e3260ef0b289a60bc_NMS_0785.JPG","uuid":"749174c7-e29c-485f-9f6d-cc18d4b5d0fd"}' 
 [FineUploader] Received the following window message: '{"success":true,"uploadName":"_73d05d51b4ab624e3260ef0b289a60bc_NMS_0785.JPG","uuid":"749174c7-e29c-485f-9f6d-cc18d4b5d0fd"}' 
[FineUploader] No valid message received from loaded iframe for file id 1 
 [FineUploader] iframe loaded 
```

Does anyone have any idea what could be going wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:25:39.493

您是否通过查看请求确认与 POST 请求一起发送的文件的 UUID 与您的响应中的 UUID 匹配？您在回复中发送的 UUID 很可能是错误的。

# javascript - Javascript 删除 div 元素

> ID：15457411
> 
> 赞同：1
> 
> 时间：2013-03-17T04:05:22.483
> 
> 标签：javascript, html, stopwatch

我正在用 JavaScript 实现秒表。

我想在按下`clear`按钮时删除其他 div 元素。我添加了功能`cc();`，但`function cc()`不起作用。我的代码有什么问题？

Javascript：

```
a = 0;
myButton = 0;

function myWatch(flug) {
  if(myButton == 0) {
    Start = new Date();
    myButton = 1;
    document.myForm.myFormButton.value = "Stop!";
    myInterval = setInterval("myWatch(1)", 1);
  } else {
    if(flug == 0) {
      myButton = 0;
      document.myForm.myFormButton.value = "Start";
      clearInterval(myInterval);
    }
    Stop = new Date();
    T = Stop.getTime() - Start.getTime();
    H = Math.floor(T / (60 * 60 * 1000));
    T = T - (H * 60 * 60 * 1000);
    M = Math.floor(T / (60 * 1000));
    T = T - (M * 60 * 1000);
    S = Math.floor(T / 1000);
    Ms = T % 1000;
    document.myForm.myClick.value = H + ":" + M + ":" + S + ":" + Ms;
  }
}
b = 0;

function stop() {
  b++;
  stopa();
}

function stopa() {
  var element = document.createElement('div');
  element.id = pos;
  var objBody = document.getElementsByTagName("body")
    .item(0);
  objBody.appendChild(element);
  rap = "";
  rap = "rap" + b + "=" + H + ":" + M + ":" + S + ":" + Ms;
  element.innerHTML = rap;
}

function cc() {
  document.body.removeChild(element);
} 
```

HTML：

```
<form name="myForm" action="#">
  <input type="text" size="20" name="myClick">
  <input type="button" value="Start" name="myFormButton" onclick="myWatch(0)" />
  <input type="button" value="Rap" name="Rap" onclick="stop()">
  <input type="button" value="clear" name="clear" onclick="cc()">
</form>
<h3>
  <div id="pos">
  </div>
</h3> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T05:30:27.327

尝试将上下文作为参数显式传递给`cc()`函数。

js

```
function cc(el) {
    el.parentNode.removeChild(el);
} 
```

html

```
<input type="button" value="clear" name="clear" onclick="cc(this)"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T05:24:21.010

打开你的控制台。它存在于大多数主流浏览器中，将帮助您加载 JS 开发。

例如，[如果您完全按原样查看代码](http://jsfiddle.net/daCrosby/MMywX/)，则会收到错误：

```
Uncaught ReferenceError: element is not defined 
```

正如一些人所说，这是[一个可变范围问题](https://stackoverflow.com/questions/500431/javascript-variable-scope)。有一些简单的修复方法，最简单的方法是让`element`范围更大——也就是说，首先在你的函数之外定义它。

```
var element = null; 
```

然后 in `stopa`，不要使用`var`，因为它会创建一个新的局部变量，而不是使用全局变量。

```
element = document.createElement('div'); 
```

您会注意到的下一个问题是`element`in`cc`仍然没有引用正确的元素 - 这是因为在下面的行中，`pos`没有定义。

```
element.id = pos; 
```

再一次看一下控制台（现在更具体地说是在 HTML 部分而不是 JS，但它在相同的开发人员选项中）。您会注意到创建元素的 ID 是`[object HTMLDivElement]`- 而不是“pos”。我建议您甚至不必担心给他们`id`s，您的 HTML 中已经有一个带有 id 的 div `pos`，只需将结果附加到它而不是`body`.

```
objBody = document.getElementById("pos"); 
```

然后，当您清除时，清除所有子项`pos`（我确定您还想清除文本框，所以来吧）

```
while (objBody.hasChildNodes()) {
  objBody.removeChild(objBody.lastChild);
}
document.myForm.myClick.value = ""; 
```

请注意，现在我们不再需要`element`是全局的，因为它只在一个函数中被引用——它可以是该函数的本地。但是，`objBody`现在在`stopa`and中引用了`cc`，所以我们将像我们一样将其设为全局，`element`并简单地确保所有未来对它的引用不包括`var`.

```
var element = null; 
```

添加一些错误检查（例如，在单击开始之前清除会导致错误），您就可以开始了！

[http://jsfiddle.net/daCrosby/MMywX/1/](http://jsfiddle.net/daCrosby/MMywX/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T04:24:31.003

该函数`cc`不知道“元素”是什么。解决此问题的最简单方法是使用 jquery。当您删除 div 时，请执行以下操作

```
$('#pos').remove() 
```

这会找到 id 为 'pos' 的 div 并将其删除。如果不只是“pos”，您可能需要将 div 的 id 传递给 cc。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-18T09:36:48.453

现代浏览器支持元素上的**remove()方法。**您不需要将外部库用作 jQuery 或长代码。这很简单：

```
var x = document.getElementById("myElement");
x.remove(); 
```

此处的工作示例-> [https://jsfiddle.net/tmj3p7t5/](https://jsfiddle.net/tmj3p7t5/)

# php - Javascript 到 PHP domain.charCodeAt(i)

> ID：15457412
> 
> 赞同：3
> 
> 时间：2013-03-17T04:05:51.790
> 
> 标签：php, javascript

我正在尝试将 javascript 片段转换为 PHP。Javascript是

```
var sum1 = 0, sum2 = 0;
for (var i = domain.length - 1; i >= 0; i--) {
    sum1 += domain.charCodeAt(i) * 13748600747;
    sum2 += domain.charCodeAt(i) * 40216416130;
}

var x = ("$" + sum1).substring(0, 8) + ("" + sum2).substring(0, 8); 
```

但无法理解这部分，`sum1 += domain.charCodeAt(i) * 13748600747;`我的意思是可以使用哪个 PHP 函数代替 domain.charCodeAt(i)。

**编辑：**

我的PHP代码：

```
$domain = "example.com";
$sum1 = 0;
$sum2 = 0;
$length = strlen($domain);
$i = $length - 1;
for ( $i; $i >= 0; $i-- ) {
    $sum1 += ord($domain[$i]) * 13748600747;
    $sum2 += ord($domain[$i]) * 40216416130;
}
$newsum = "$".$sum1;
$x = substr($newsum,0,8) + substr($sum2,0,8);

echo $x; 
```

输出肯定不一样。需要帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T06:30:12.687

这应该是 Unicode 安全版本。

```
$domain = "example.com";
$sum1 = 0;
$sum2 = 0;

// this will convert $domain to a UTF-16 string,
// without specifying the third parameter, PHP will
// assume the string uses PHP's internal encoding,
// you might want to explicitly set the `from_encoding`
$domain = mb_convert_encoding($domain, 'UTF-16');

$length = mb_strlen($domain, 'UTF-16');
$i = $length - 1;

for ( $i; $i >= 0; $i-- ) {
    $char = mb_substr($domain, $i, 1, 'UTF-16');
    $sum1 += hexdec(bin2hex($char)) * 13748600747;
    $sum2 += hexdec(bin2hex($char)) * 40216416130;
}
$newsum = "$" . strval($sum1);
$sum2 = strval($sum2);
$x = substr($newsum,0,8) . substr($sum2,0,8);

echo $x; 
```

转换为十进制是基于文档[注释](http://php.net/ord)[中](http://www.php.net/manual/en/function.ord.php#109724)的代码。[`ord`](http://php.net/ord)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T05:50:18.200

因为 ord() 只适用于 ascii 而 javascript 使用的是 utf-16，所以我们最好使用

```
hexdec(bin2hex($utf16_char)) 
```

这是我做的实验：

```
// This is a utf8 character because my editor can only accept utf8
$utf8_char = "北";
// convert to utf16 using mb_convert_encoding()
$utf16_char = mb_convert_encoding($utf8_char, "utf-16", "utf-8");

// output is correct: int(21271), same as javascript output
var_dump(hexdec(bin2hex($utf16_char)));

// output is wrong: int(83) because ord() only works for ascii character.
var_dump(ord($utf16_char)); 
```

注意：为了完全替换上面的js代码，最好使用mbstring模块，并将utf-16设置为内部编码。

```
mb_internal_encoding('utf-16'); 
```

然后使用 mb_* 函数，例如，使用 mb_strlen() 代替 strlen()。您还可以使用 utf16 字符串来提供 php 函数。

[**更新**]为了更好地理解这个问题，请注意以下两行是等效的：

```
hexdec(bin2hex($any_utf_char));
(int) base_convert(unpack("H*", $any_utf_char)[1], 16, 10); // Note: the array dereferencing only works in php5.4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T04:07:27.803

那将是[`ord`](http://php.net/ord)`($domain[$i])`

# transparency - 如何在 Dreamweaver CS6 中堆叠透明项目

> ID：15457421
> 
> 赞同：0
> 
> 时间：2013-03-17T04:07:28.087
> 
> 标签：transparency, dreamweaver, transparent, outline

**终极目标：制作一个成型的透明度，图像可以通过它显示，但由形式本身塑造。图像是翻转按钮，通过悬停从灰度变为彩色**

所以下面的图片（链接）显示了我想在 Dreamweaver CS6 中发生的事情。我使用 PS 制作了这张图片。我只是把“人物部分”删除了，所以图片变成了一个白色的盒子，里面是透明的。我的计划是简单地将这个图像植入 DW，然后通过放置 IMG 标签将其余的彩色图像放在它下面。

我想它会像你在下面看到的那样，但事实并非如此。我只是得到一个完整的白页（离线测试，未上传到服务器）。如果我添加图片，则没有任何迹象表明具有透明度的 PNG 甚至存在。

那么现在，您的建议是什么？只使用 FW 并制作如下所示的工作切片会更容易吗？在那种情况下，我只需要在 DW 中工作时像俄罗斯方块一样匹配身体的所有部分。似乎有一种更简单的方法可以做到这一点，但不知何故我让它变得非常困难。

请询问您是否需要更多信息。太感谢了。

[http://i1195.photobucket.com/albums/aa400/SteffaneTimm/MeFirstSuccess_zps146c6716.jpg](http://i1195.photobucket.com/albums/aa400/SteffaneTimm/MeFirstSuccess_zps146c6716.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:26:22.150

您可以将轮廓保存为具有 alpha 透明度的 .PNG。要获得具有翻转效果的单独图像，您可以尝试以下操作。（不使用任何画布技巧）。创建一个两倍于您想要的条带高度的图像，将黑白版本放在上半部分，将相同图像的彩色版本放在下半部分。

如果您无法看到白色轮廓，您可以尝试将页面背景暂时设置为黑色。

要仔细检查您是否正确链接到图像文件，您还可以尝试在 chrome 中按 f12 并查看 Frames > Images 中的 Resources 选项卡。

```
.container {
width: 500px; height: 800px;
}

.image-strip {
height: 200px; width: 500px; float: left;
overflow: hidden;
}

.image-strip img:hover {
margin-top: -200px;
}

.woman-outline {
position: relative; top: 0px; left: 0px;
height: 800px; width: 500px;
background: url('woman.png') no-repeat;
z-index: 1000;
}

<div id="container">

   <div class="image-strip"><img src="1.jpg" /></div>
   <div class="image-strip"><img src="2.jpg" /></div>
   <div class="image-strip"><img src="3.jpg" /></div>
   <div class="image-strip"><img src="4.jpg" /></div>

   <div id="woman-outline"></div>

</div> 
```

# iphone - 以表单形式呈现时难以居中视图控制器

> ID：15457428
> 
> 赞同：5
> 
> 时间：2013-03-17T04:08:30.263
> 
> 标签：iphone, ios, objective-c, ipad, uiviewcontroller

我正在尝试展示一个视图控制器，其展示样式设置为表单。但是，当视图控制器出现时，**它位于屏幕的右侧，而不是中心。**我不确定为什么会发生这种情况，或者我应该怎么做。所有这些坐标都是正确的！

```
CGSize size = CGSizeMake(650, 550);

//custom init for ViewController so I can position stuff correctly
ViewController *vc = [[ViewController alloc] initWithSize:size];
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:vc];

nav.modalPresentationStyle = UIModalPresentationFormSheet;
nav.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

[self presentModalViewController:nav animated:YES];

nav.view.superview.frame = CGRectMake(0, 0, size.width, size.height);
nav.view.superview.center = self.view.center; 
```

![在此处输入图像描述](../Images/c99592924e700577f066f253bf91237c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:12:09.790

似乎每当我删除最后两行时，我都会得到我认为是您正在寻找的行为。

```
CGSize size = CGSizeMake(650, 550);

//custom init for ViewController so I can position stuff correctly
ViewController *vc = [[ViewController alloc] initWithSize:size];
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:vc];

nav.modalPresentationStyle = UIModalPresentationFormSheet;
nav.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

[self presentModalViewController:nav animated:YES]; 
```

我不确定你到底想用这两条线做什么，但没有它们，视图就会居中。

# php - 如何修复功能 mysql_list_tables() 已弃用？

> ID：15457429
> 
> 赞同：-5
> 
> 时间：2013-03-17T04:08:36.670
> 
> 标签：php, mysql, deprecated

我正在尝试为我的网站添加投票系统，但出现此错误：

```
Deprecated: Function mysql_list_tables() is deprecated in /home/yokoscap/public_html/vote/classes/vote.class.php on line 11
Access denied for user 'yokoscap'@'localhost' (using password: NO) 
```

我是 PHP 和 MySQL 的新手，所以如果你能把它弄糊涂/帮我修复它会很棒。

[这是](http://pastebin.com/3mfpFwW7)代码粘贴，我觉得这里太大了，所以我上传到pastebin。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T04:18:02.420

你[查过说明书](http://php.net/mysql_list_tables)吗？有一个替换它的完整示例：

```
<?php
$dbname = 'mysql_dbname';

if (!mysql_connect('mysql_host', 'mysql_user', 'mysql_password')) {
    echo 'Could not connect to mysql';
    exit;
}

$sql = "SHOW TABLES FROM $dbname";
$result = mysql_query($sql);

if (!$result) {
    echo "DB Error, could not list tables\n";
    echo 'MySQL Error: ' . mysql_error();
    exit;
}

while ($row = mysql_fetch_row($result)) {
    echo "Table: {$row[0]}\n";
}

mysql_free_result($result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T05:20:03.583

使用这个 sql 查询

```
show tables from dbname 
```

希望这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T04:14:00.173

自 PHP 4.3.7 (!) 以来，该`mysql_list_tables()`函数已被弃用，因为它太具体了。

要获取当前数据库中的表列表，请运行`SHOW TABLES`查询。这是一个完全正常的查询；你不需要一个特殊的功能来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T04:12:41.683

我在手册中[说](http://php.net/manual/en/function.mysql-list-tables.php)

> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T04:17:11.400

根据 [**`mysql_list_tables`**](http://php.net/manual/en/function.mysql-list-tables.php)... `changelog`secton 此功能已从版本 4.3.7 开始弃用`SHOW TABLES`

# c# - 以编程方式使用 nlog 中的规则排除特定记录器

> ID：15457437
> 
> 赞同：4
> 
> 时间：2013-03-17T04:10:48.657
> 
> 标签：c#, nlog

我正在寻找一种以编程方式实现以下日志记录规则的方法。

```
<logger name="Name.Space.*" minlevel="Debug" maxlevel="Error" final="true" /> 
```

我可以使用以下设置“*名称*”和“*日志级别*”但没有办法实现 final="true"..

```
LoggingRule fileLoggingRule = new LoggingRule("ConnDriverLogger", LogLevel.Trace, connDriverFileTarget);
connDriverLoggingConfig.LoggingRules.Add(fileLoggingRule); 
```

有什么建议可以实现上述吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:34:08.463

LoggingRule.Final 属性呢？

在你的情况下：

```
LoggingRule fileLoggingRule = new LoggingRule("ConnDriverLogger", LogLevel.Trace, connDriverFileTarget);
fileLoggingRule.Final = true;
connDriverLoggingConfig.LoggingRules.Add(fileLoggingRule); 
```

我在 NLog 的存储库中找到了 LoggingRule.Final 属性：

[https://github.com/NLog/NLog/blob/master/src/NLog/Config/LoggingRule.cs](https://github.com/NLog/NLog/blob/master/src/NLog/Config/LoggingRule.cs)

# javascript - 使用 TideSDK 创建 Amazon 授权签名

> ID：15457438
> 
> 赞同：0
> 
> 时间：2013-03-17T04:10:52.493
> 
> 标签：javascript, tidesdk

我正在尝试为 TideSDK 拼凑一个 S3 客户端。我已经过了日期格式/匹配，要签名的字符串 - 但我现在收到错误**SignatureDoesNotMatch**

我已经尝试了几乎所有我能想到的角度，但仍然不足。也许你们中的一个人可以发现我的方式的错误。注意：AWS 在别处定义。

```
var podcastFile = Ti.Filesystem.getFile(AWS.fileName);
var fileContents = podcastFile.read();

AWS.http = Ti.Network.createHTTPClient();
AWS.fileURL = 'http://'+AWS.AWSBucketName+'.s3.amazonaws.com/show.json';        
AWS.http.setTimeout(AWS.timeout);
AWS.http.open('PUT', AWS.fileURL, false);

var mimeType = 'text/json';
var fileName = 'show.json';
var curDate = AWS.Date.formatDate(new Date(),'E, d MMM yyyy HH:mm:ss') + ' -0400';
var StringToSign = 'PUT\n\n'+mimeType+'\n' + curDate + '\n/'+AWS.AWSBucketName+'/' + fileName;

var AWSAccessKeyID = 'AWS ' + AWS.APIKey + ':';
var AWSSignature = Ti.Codec.digestHMACToHex(Ti.Codec.SHA1, AWS.SecretKey, StringToSign);
var AWSAuthHeader = AWSAccessKeyID.concat(AWSSignature);

AWS.http.setRequestHeader('Authorization', AWSAuthHeader); 
AWS.http.setRequestHeader('Content-Type', 'text/json');
AWS.http.setRequestHeader('Content-Length', podcastFile.size().toString());
AWS.http.setRequestHeader('Host', 's3.amazonaws.com');
AWS.http.setRequestHeader('Date', curDate);
AWS.http.setRequestHeader('Accept-Encoding', 'gzip');
AWS.http.setRequestHeader('Proxy-Connection','close');

var headers = AWS.http.getResponseHeaders();
console.log(AWS.http.send(fileContents)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:36:11.987

我对tidesdk一无所知，但你需要对你的AWSSignature进行base64编码。

我遇到了类似的问题，这个工具帮助了我：[http](http://aws.amazon.com/code/199) ://aws.amazon.com/code/199 。

# javascript - 骨干集合视图不显示 de html 和模型的值

> ID：15457439
> 
> 赞同：0
> 
> 时间：2013-03-17T04:11:21.270
> 
> 标签：javascript, backbone.js, underscore.js

我正在使用 Backbone.js 0.9.10、1.4.4 Underscore.js。当我调用我的 html 页面时，没有 javascript 错误，并且控制台显示该集合已被迭代。

但是，浏览器没有显示我的 html 我得到了空白页。我在控制台上记录了html的结果，没有用json替换模型的变量就出现了，像这样：

（我取消了标记中的信号 (< >) 以显示出现在控制台上的 html 模板。）

我的 html 来自 view =
p a href="#" id="remove-button" >Remover este Post/a /p h2 /h2 p /p>

```
//HTML
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Backbone COLLECTION</title>
<script src="../js/jquery/jquery-1.8.3.js" type="text/javascript" charset="utf-8">
</script>
<script src="../js/backbone/underscore.js" type="text/javascript" charset="utf-8">
</script>
<script src="../js/backbone/backbone.js" type="text/javascript" charset="utf-8"> 
</script>
<script src="../js/mvc/PostModel.js"></script>
<script src="../js/mvc/PostView.js"></script>
<script src="../js/mvc/PostCollectionView.js"></script>
<script src="../js/mvc/PostCollection.js"></script>    
<script>
$(document).ready(function() {            
        var postList = new PostList();
        var postCollectionView = new PostCollectionView({collection:postList});
        postList.fetch();
});

</script>
</head>

<body>

<script type="text/template" id="post-template">
<p>
    <a href="#" id="remove-button">Remover este Post</a>
</p>
<h2><%=title%></h2>
<p><%=text%></p>
</script>

</body>
</html>   

//VIEW
var PostView = Backbone.View.extend({
events: {
    "click #remove-button": "removePost"
},

initialize: function() {
    _.bindAll(this, 'render', 'removePost', 'refresh');

    this.template = _.template($('#post-template').html());

    this.model = new PostModel();

    this.model.on("change", this.render, this);
    this.model.on("destroy", this.refresh);
},

render: function() {
    console.log('PostView - render ');//ok

    var template = this.$el.html(this.template(this.model.toJSON()));

    return this;
},

removePost: function() {
    this.model.destroy();
},

refresh: function() {
    this.model.clear({silent: true});
    this.model.fetch();
}
});    

//MODEL
var PostModel = Backbone.Model.extend({
defaults : function(){
    return {
        //some
        title: [],
        text: []
    }
}
});    

//COLLECTION
var PostCollectionView = Backbone.View.extend({
    initialize: function(){
    this.collection.on('add', this.addOne, this);
    this.collection.on('reset', this.addAll, this);
},

addOne: function(modelItem){
    var postView = new PostView({model: modelItem});
    console.log('my html come from view = ' + postView.render().$el.html());
    this.$el.append(postView.render().$el.html());        
},

addAll: function(){
    this.collection.forEach(this.addOne, this);
},

render: function(){
    this.addAll();
}
});

//Collection with URL
var PostList = Backbone.Collection.extend({
    url: 'http://www.mysystem.com/newproject/project/cadTarefas/recuperarListaTeste',

    model: PostModel
});

//My JSON
[{"title":"titulo_1","text":"texto_1"},{"title":"titulo_2","text":"texto_2"},
{"title":"titulo_3","text":"texto_3"},{"title":"titulo_4","text":"texto_4"}, 
{"title":"titulo_5","text":"texto_5"},{"title":"titulo_6","text":"texto_6"},
{"title":"titulo_7","text":"texto_7"},{"title":"titulo_8","text":"texto_8"},
{"title":"titulo_9","text":"texto_9"},{"title":"titulo_10","text":"texto_10"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:34:35.867

尝试在渲染视图中更改字符串

```
var template = this.$el.html(this.template(this.model.toJSON())); 
```

串起来

```
this.$el.html(this.template(this.model.toJSON())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:44:08.107

我在您的任何代码中都没有看到的一件事是 PostCollectionView 的元素附加到 DOM 的位置。它应该有一个静态声明，即

```
var PostCollectionView = Backbone.View.extend({
    el: $('#somediv'), 
```

或者外接的，

```
$(document).ready(function() {            
    var postList = new PostList();
    var postCollectionView = new PostCollectionView({collection:postList, el: $('#somediv')}); 
```

或者您的控制器负责在 View 初始化后将动态分配的一个附加到 DOM。其中之一必须是真实的。

其次，在 PostView 中，传入现有模型后，使用 行将其销毁`this.model = new PostModel();`，这会用新的空白模型覆盖传入的对象本地引用，这就是为什么您什么都看不到的原因。

# objective-c - obj-c cocoa 中有没有办法创建 AES-128 加密密钥文件

> ID：15457440
> 
> 赞同：0
> 
> 时间：2013-03-17T04:11:35.853
> 
> 标签：objective-c, cocoa, encryption, aes, crypt

在我的 mac 应用程序中，我必须使用 AES-128 加密密钥加密文件

我想使用[http://www.aescrypt.com/download/](http://www.aescrypt.com/download/)来做到这一点。

但我首先需要加密密钥文件

底线是这个

1.  从我的 mac 应用程序生成一个密钥文件（这是我需要的重要步骤）
2.  使用密钥文件加密一个文件，比如 abcd.mpg
3.  将密钥存放在安全的地方
4.  获取密钥并解密

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:21:18.660

创建密钥只需要知道密钥需要多长时间并具有良好的随机性来源。在 OS X 的情况下，有一种商品`/dev/random`被认为包含足够的熵，因此出于加密目的从中读取是合理的。您可以像任何其他设备一样从中读取数据。

加密（和解密）可以在 10.5 及更高版本中使用 Common Crypto 完成，在 10.7 及更高版本中使用安全转换，两者都有很好的文档记录（搜索`Cryptographic Services`一个好的概述）。

对于密钥存储（正如@mttrb 所提到的），KeyChain 是 OS X 上的正确选择，如果您需要允许用户单独保存密钥，您可以考虑将其打包在密码容器中。

虽然 Common Crypto 可以通过 10.8 使用，但安全转换允许链接，并且设计得更好一些，用于处理流数据和更大的文件。

# hibernate - hibernate：使用注释的完全连接

> ID：15457442
> 
> 赞同：0
> 
> 时间：2013-03-17T04:11:45.883
> 
> 标签：hibernate, hibernate-mapping

我想使用休眠对两个表执行完全外连接。

这两个表没有任何外键主键关系。

**表格1。**

```
valcode nvarchar2(10)
value number
datemodified date 
```

**表 2**

```
id number
result nvarchar2(10) 
```

**SQL查询：**

```
select a.valcode, b.id, b.result from table1 a,table2 b (+) on a.valcode=b.id order by a.valcode 
```

如何将此查询转换为带有表类中注释的休眠查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:57:01.783

这确实是一个好问题。我还没有遇到这个问题；所以，我对任何可能的解决方案也很感兴趣。

如果我理解正确，这两个表之间没有任何“自然”关系。因此，我不确定是否有一种简单有效的方法可以使用 HQL 或 Criteria 来使用 Hibernate。

如果您使用所需的 SQL 创建视图并将该视图与 Hibernate 实体映射，怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-21T16:09:14.900

据我从 Hibernate 文档中了解到，您可以在关系注释上使用 fetch 属性并将其设置为`FetchType.EAGER`：

> 您可以急切地或懒惰地获取关联的实体。fetch 参数可以设置为`FetchType.LAZY`或 `FetchType.EAGER`。EAGER 将尝试使用外连接选择来检索关联对象，而 LAZY 只会在第一次访问关联对象时触发选择。 `@OneToMany`和`@ManyToMany`关联默认为 LAZY， `@OneToOne`并且`@ManyToOne`默认为 EAGER。

[您可以在此处](https://docs.jboss.org/hibernate/annotations/3.5/reference/en/pdf/hibernate_reference.pdf)找到完整的文档。

# java - 带有 Swing GUI 的 Spring Java 项目中的 Nullpointer 异常

> ID：15457449
> 
> 赞同：0
> 
> 时间：2013-03-17T04:14:21.987
> 
> 标签：java, spring, swing, nullpointerexception

大家好，我是spring的新手，java编程。我创建了一个 java 程序，它应该在单击操作时访问数据库，但我不知道为什么我会收到 nullpointer 异常，因为所有对象都已正确设置。

摇摆代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.ibm.quest.taxonomyupdate.ui;

import com.ibm.quest.taxonomyupdate.model.TypeCategory;
import com.ibm.quest.taxonomyupdate.model.TypeCategoryJDBCTemplate;
import javax.swing.ButtonGroup;

/**
 *
 * @author Ashish Tyagi
 */
public class ApplicationWindow extends javax.swing.JFrame {
    TypeCategoryJDBCTemplate typeCategoryJDBCtemplate;

    /**
     * Creates new form ApplicationWindow
     */

    public void setTypeCategoryJDBCtemplate(TypeCategoryJDBCTemplate typeCategoryJDBCtemplate) {
        this.typeCategoryJDBCtemplate = typeCategoryJDBCtemplate;
        System.err.println("setter in the application window "+this.typeCategoryJDBCtemplate);
    }

    public ApplicationWindow() {
        initComponents();
        addRadioButtonInGroup();
        setTitle("Taxonomy Updator");
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        buttonGroup = new javax.swing.ButtonGroup();
        infoLabel = new javax.swing.JLabel();
        jTextField1 = new javax.swing.JTextField();
        searchButton = new javax.swing.JButton();
        beginButton = new javax.swing.JRadioButton();
        endButton = new javax.swing.JRadioButton();
        exactButton = new javax.swing.JRadioButton();
        anywhereButton = new javax.swing.JRadioButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        closeButton = new javax.swing.JButton();
        updateAllButton = new javax.swing.JButton();
        updateButton = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        getContentPane().setLayout(new java.awt.GridBagLayout());

        infoLabel.setText("Please enter the text you wants to search");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(11, 10, 0, 0);
        getContentPane().add(infoLabel, gridBagConstraints);

        jTextField1.setText("jTextField1");
        jTextField1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField1ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 10;
        gridBagConstraints.ipadx = 279;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(6, 10, 0, 0);
        getContentPane().add(jTextField1, gridBagConstraints);

        searchButton.setText("Search");
        searchButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                searchButtonActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 19;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 25;
        gridBagConstraints.ipadx = 17;
        gridBagConstraints.ipady = -3;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(6, 6, 0, 10);
        getContentPane().add(searchButton, gridBagConstraints);

        beginButton.setText("Begin with");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 10, 0, 0);
        getContentPane().add(beginButton, gridBagConstraints);

        endButton.setText("End with");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 0, 0);
        getContentPane().add(endButton, gridBagConstraints);

        exactButton.setText("Exact Match");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = 5;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 0, 0);
        getContentPane().add(exactButton, gridBagConstraints);

        anywhereButton.setText("Anywhere");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 9;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = 11;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 0, 0);
        getContentPane().add(anywhereButton, gridBagConstraints);

        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jScrollPane1.setViewportView(jTable1);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.gridwidth = 44;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.ipadx = 351;
        gridBagConstraints.ipady = 60;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(2, 10, 0, 10);
        getContentPane().add(jScrollPane1, gridBagConstraints);

        closeButton.setText("Close");
        closeButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                closeButtonActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 43;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(175, 6, 0, 10);
        getContentPane().add(closeButton, gridBagConstraints);

        updateAllButton.setText("Update All");
        updateAllButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                updateAllButtonActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 6;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 24;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(175, 6, 0, 0);
        getContentPane().add(updateAllButton, gridBagConstraints);

        updateButton.setText("Update");
        updateButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                updateButtonActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 4;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(175, 8, 0, 0);
        getContentPane().add(updateButton, gridBagConstraints);

        pack();
    }// </editor-fold>                        

private void searchButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             
    String text = jTextField1.getText();
    java.util.List<TypeCategory> records = this.typeCategoryJDBCtemplate.listTypeCategory(text);
    for(TypeCategory value:records)
    System.out.println(value.getDescription()+"  "+value.getTaxonomydescription());
}                                            

    private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {                                            
        // TODO add your handling code here:
    }                                           

    private void updateButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             
        // TODO add your handling code here:
    }                                            

    private void updateAllButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                
        // TODO add your handling code here:
    }                                               

    private void closeButtonActionPerformed(java.awt.event.ActionEvent evt) {                                            
        // TODO add your handling code here:
        this.dispose();
    }                                           

    /**
     * @param args the command line arguments
     */
    public void start() {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(ApplicationWindow.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(ApplicationWindow.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(ApplicationWindow.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(ApplicationWindow.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new ApplicationWindow().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JRadioButton anywhereButton;
    private javax.swing.JRadioButton beginButton;
    private javax.swing.ButtonGroup buttonGroup;
    private javax.swing.JButton closeButton;
    private javax.swing.JRadioButton endButton;
    private javax.swing.JRadioButton exactButton;
    private javax.swing.JLabel infoLabel;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable jTable1;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JButton searchButton;
    private javax.swing.JButton updateAllButton;
    private javax.swing.JButton updateButton;
    // End of variables declaration                   

    private void addRadioButtonInGroup() {
        buttonGroup = new ButtonGroup();
        buttonGroup.add(beginButton);
        buttonGroup.add(endButton);
        buttonGroup.add(exactButton);
        buttonGroup.add(anywhereButton);
    }
} 
```

主文件：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.ibm.quest.taxonomyupdate;
import com.ibm.quest.taxonomyupdate.model.TypeCategoryJDBCTemplate;
import org.springframework.context.ApplicationContext;
import com.ibm.quest.taxonomyupdate.ui.ApplicationWindow;
import org.springframework.context.support.ClassPathXmlApplicationContext;

/**
 *
 * @author Ashish Tyagi
 */
public class TaxonomyUpdater {
    public static void main(String [] args){
        ApplicationContext context = new ClassPathXmlApplicationContext("Spring-Config.xml");
        ApplicationWindow window= (ApplicationWindow) context.getBean("applicationWindow");
        window.start();
//        TypeCategoryJDBCTemplate typecategoryJDBCTemplate = (TypeCategoryJDBCTemplate)context.getBean("typeCategoryJDBCTemplate");
//        window.setTypeCategoryJDBCtemplate(typecategoryJDBCTemplate);
//        List<TypeCategory> records=typecategoryJDBCTemplate.listTypeCategory("Q2%");
//        for(TypeCategory value:records)
//            System.out.println(value.getTypecatind()+"  "+value.getDescription()+" "+value.getTaxonomydescription());
    }

} 
```

Spring-Config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:c="http://www.springframework.org/schema/c"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:flow="http://www.springframework.org/schema/webflow-config"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:jms="http://www.springframework.org/schema/jms"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xmlns:osgi="http://www.springframework.org/schema/osgi"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:util="http://www.springframework.org/schema/util"

       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
          http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
          http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
          http://www.springframework.org/schema/webflow-config http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.0.xsd
          http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
          http://www.springframework.org/schema/jms http://www.springframework.org/schema/jms/spring-jms-3.2.xsd
          http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.2.xsd
          http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi-1.2.xsd
          http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
          http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd
">
    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.ibm.db2.jcc.DB2Driver" />
        <property name="url" value="jdbc:db2://sample.sample.com:3798/sampledb"/>
        <property name="username" value="root" />
        <property name="password" value="root" />
    </bean>
    <bean id="typeCategoryJDBCTemplate" class="com.ibm.quest.taxonomyupdate.model.TypeCategoryJDBCTemplate">
        <property name="dataSource" ref="dataSource" />
    </bean>
    <bean id="applicationWindow" class="com.ibm.quest.taxonomyupdate.ui.ApplicationWindow">
        <property name="typeCategoryJDBCtemplate" ref="typeCategoryJDBCTemplate" />
    </bean>

</beans> 
```

正在验证正在创建对象但仍然是空指针异常的日志。

```
Mar 17, 2013 12:24:51 AM org.springframework.jdbc.datasource.DriverManagerDataSource setDriverClassName
INFO: Loaded JDBC driver: com.ibm.db2.jcc.DB2Driver
Inside the setDataSoureorg.springframework.jdbc.datasource.DriverManagerDataSource@4389b7
setter in the application window com.ibm.quest.taxonomyupdate.model.TypeCategoryJDBCTemplate@18c6fd4
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at com.ibm.quest.taxonomyupdate.ui.ApplicationWindow.searchButtonActionPerformed(ApplicationWindow.java:207)
    at com.ibm.quest.taxonomyupdate.ui.ApplicationWindow.access$100(ApplicationWindow.java:15)
    at com.ibm.quest.taxonomyupdate.ui.ApplicationWindow$2.actionPerformed(ApplicationWindow.java:88)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:702)
    at java.awt.EventQueue$4.run(EventQueue.java:700)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:54:48.113

感谢大家的调查，但我在代码中发现了问题，即在 ApplicatoinWindow -> start() 方法中创建窗口。它正在创建对象并返回控件。

```
 /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new ApplicationWindow().setVisible(true);
        }
    }); 
```

我把它改成

```
 /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            setVisible(true);
        }
    }); 
```

# sql - 插入数据时出现sql错误

> ID：15457450
> 
> 赞同：-2
> 
> 时间：2013-03-17T04:14:39.243
> 
> 标签：sql

```
INSERT INTO `properties` (`refnum`, `price`, `town`, `region`, `country`, `src`)
VALUES ('PM33077', '470.000', 'La Valetta', 'Valetta', 'Malta', 'villa1.jpg'), 
       ('PS22188', '220.000','Sax', 'Murcia','Spain', 'villa2.jpg'), 
       ('PS57331', '390.000','Malaga', 'Costa del Sol','Spain', 'villa3.jpg'), 
       ('PI531135', '330.000','Peruggia', 'Umbria','Italy', 'villa4.jpg'), 
       ('PM48079', '770.000','Fort Chambray', 'Gozo','Malta', 'villa5.jpg'), 
       ('PM37501', '840.000','Fort Chambray', 'Gozo','Malta', 'villa6.jpg'); 
```

结果错误：

> *#1054 -“字段列表”中的未知列“src”*

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:16:32.870

你的`properties`桌子是什么样子的？此错误通常意味着您的表中没有列（在本例中为`src`）`properties`。

要修复此类错误，请确保该列存在于您的表中。

# html - 如何在页面中制作页面？

> ID：15457451
> 
> 赞同：-6
> 
> 时间：2013-03-17T04:14:45.100
> 
> 标签：html, css, iframe

我有一个需要添加元素的网站。
当前样式会干扰元素。
有没有办法在页面中创建一个具有自己样式的单独部分，
就像 iframe 的工作方式一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:16:44.987

您可以创建一个具有自己的 css 的单独页面，然后使用 iframe 将其嵌入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T04:20:14.850

您在问题中回答了您自己的问题。执行此操作的理想方法是使用`<iframe>`.

如果`<iframe>`不可能，那么您可以通过在“框架”中的所有规则前面加上特定 ID 并覆盖默认样式来手动“限定”您的 CSS：

```
.style1 { ... }
.style2 { ... }

#widget .style1 { ... }
#widget .style2 { ... } 
```

在 HTML5 中，您实际上可以在页面内限定 CSS。以下只会将样式应用于内部`<div>`。

```
<div>
  <style scoped>
    div { color: red; }
  </style>
  <div>RED</div>
</div> 
```

然而，这还没有得到广泛的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T04:21:36.210

您可以将您的次要样式包含在`<div>`标签中，并以这种方式覆盖其余代码：

```
a {
    color:red
}

#newstyle a {
    color: blue
} 
```

和 HTML：

```
<a>This is red.</a> 
<div id="newstyle">
    <a>This is blue.</a>
</div> 
```

但是，可能有更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T07:52:19.340

使用 iframe 或使用 ajax 将该页面的实际内容加载到页面上的 div 中

# c# - 使用javascript删除webgrid行？

> ID：15457452
> 
> 赞同：1
> 
> 时间：2013-03-17T04:15:04.447
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-3, webgrid

我`webgrid`在mvc3中有一个。它有列`delete`。单击它后，我想运行一个 Javascript 函数，通过将行 id 作为参数传递给 Javascript 函数，将用户重定向到控制器的操作。

我该怎么做？该列不是`Htmlactionlink`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T05:49:26.607

假设这是您拥有行的方式：-

```
<tr id="thisRowId">
  .
  .
  .
 <td>
    <a id="deleteBtn" data-rowId="thisRowId">delete</a>
 </td>
<tr> 
```

为您的删除点击提供通用功能

```
$('#deleteBtn').click(function(){

var id =   $(this).data('rowId'); // or use $(this).closest('tr').attr('id');

$.ajax({
url: "controller/action",
type: 'Delete', // assuming your action is marked with HttpDelete Attribute or do not need this option if action is marked with HttpGet attribute
data: {'id' : "'" + id  "'"} // pass in id here
success : yoursuccessfunction
});

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-23T20:33:35.930

如此[处](https://stackoverflow.com/a/22548760/132599)`WebGrid`所述，这是从AJAX 请求中删除表行的示例。`WebGrid`不容易识别表中的特定项目。问题是如何识别要删除的行。在示例中，`MvcHtmlString`用于将跨度标记注入列中。它包含一个 id 值，该值随后用于标识要从表中删除的行。

```
<div id="ssGrid">
    @{
        var grid = new WebGrid(canPage: false, canSort: false);
        grid.Bind(
            source: Model,
            columnNames: new[] { "Location", "Number" }
        );
    }
    @grid.GetHtml(
        tableStyle: "webGrid",
        headerStyle: "header",
        alternatingRowStyle: "alt",
        columns: grid.Columns(
            grid.Column("Location", "Location"),
            grid.Column("Number", "Number"),
            grid.Column(
                format: (item) => 
                    new MvcHtmlString(string.Format("<span id='ssGrid{0}'>{1}</span>",
                                          item.SecondarySystemId,
                                          @Ajax.RouteLink("Delete",
                                              "Detail", // route name
                                              new { action = "DeleteSecondarySystem", actionId = item.SecondarySystemId },
                                              new AjaxOptions { 
                                                  OnComplete = "removeRow('ssGrid" + item.SecondarySystemId + "')"
                                              }
                                          )
                                     )
                    )
            )
        )
    )
</div>

<script>
    function removeRow(rowId) {
        $("#" + rowId).closest("tr").remove();
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T04:53:21.533

您可以尝试将 jQuery 单击处理程序附加到元素，如下所示：

HTML：

```
<tr>
  <td>
    <a id="your id">delete</a>
  </td>
<tr> 
```

Javascript：

```
$("tr a").click(function() {
  //your code
}); 
```

# c# - 如何为游戏编译 C# 脚本

> ID：15457456
> 
> 赞同：2
> 
> 时间：2013-03-17T04:15:38.687
> 
> 标签：c#, dll, scripting

我用 C# 制作了一个简单的游戏引擎（在 VB 2008 中，主要是为了我自己）。有一个主要的应用程序来处理图形和其他东西，来自实际游戏的大部分数据都将保存在一个 dll 中，该 dll 由我提供给游戏设计师的工具生成。

我听说过很多关于 C# 非常适合编写脚本的消息（而且看起来它比任何其他方式都更适合我的需求），但我真的找不到确切的答案。我遇到了这个问题：

我显然不想提供主 exe 的源代码，但它将包含脚本所需的所有主要方法（因为它们作用于主 exe）。

如果没有定义将在父 exe 中调用的方法，如何生成 dll？主 exe 将 dll 作为使用它的依赖项。这意味着 dll 不能依赖会导致循环的 exe。

我可以创建另一个 exe 和库都将使用的 dll，但是其中的方法将无法直接作用于使用它的主 exe。

我想出的唯一合乎逻辑的解决方案是：

*   一个包含我需要的类的骨架的 dll。
*   包含游戏数据的 dll。这将有一个从 dll A 继承的类。
*   Exe 依赖于 A 和 B。它将覆盖 B 中的 A 方法以使其表现出应有的方式。

不过，这似乎不太优雅。

在我累得无法进一步阅读之前，我在研究中看到了很多单词（MAF、MEF、Roslyn 等）。我一个人就花了几个小时。

在你看来，我应该怎么做呢？有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:23:46.200

我不知道您在哪里听说 C# 非常适合编写脚本。Rosyln 的半生不熟的尝试并不是真正的“脚本”。

为什么不尝试其中一种 DLR 语言——比如 IronPython 和 IronRuby？

还有 .NET 的 Lua 绑定。如今，大多数游戏开发人员都在 Lua 中编写脚本。因此，如果您打算将其封闭源代码，那么模组社区肯定会喜欢您的游戏引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:29:59.450

听起来您正在混合通过 dlls 的可扩展性和通过**scripting**的可扩展性。

让我们首先采用 dll 方法。

实现这一点的标准方法与您概述的非常接近：

1.  有一个`interfaces.dll`
2.  您的入口点 dll 将依赖于`interfaces.dll`
3.  扩展 dll 将依赖于`interfaces.dll`
4.  在运行时，要扩展 main，扫描意图 dll 中实现所需接口的类，根据需要`interfaces.dll`调用方法。

对于脚本，您通常需要使用脚本语言 - powershell 在 .Net 中很流行，还有[一些 JavaScript 实验](https://github.com/tjanczuk/edge)

# macos - 我怎样才能分割一个nswindow？

> ID：15457465
> 
> 赞同：0
> 
> 时间：2013-03-17T04:17:40.353
> 
> 标签：macos, cocoa, nswindow

所以我试图模仿新的 cleanlymac 应用程序。看起来它有两个相互重叠的窗户，一个没有红绿灯，另一个有红绿灯，但它们被视为一个。这有能力让后卫在一开始就滑倒。有人会知道这是如何构建的吗？

这是 cleanmymac 应用程序的照片： ![在此处输入图像描述](../Images/b51223cf844acb90f2b60838838377f3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T04:27:25.070

它们实际上是一个窗口。

您可以通过使用带有 2 个窗格的垂直[NSSplitView轻松实现这一点。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSplitView_Class/Reference/Reference.html)

在这里，您可以选择中间的分隔器或修复分隔器。

并且在每个 splitView 中都放置了一个新的 NSView。在此视图中，您可以从单个或多个 xib 中放置您的视图。

在此处查看[ViewOnWindow](http://www.keepandshare.com/doc/5604837/viewonwindow?da=y)如何将另一个 xib 的视图显示到主窗口。

在这里查看[教程](http://www.youtube.com/watch?v=k3XLInzZIs8)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T05:40:38.407

这看起来像一个自定义窗口，窗口右上角为黑色背景。搜索自定义窗口可可以查找如何执行此操作的示例。在这种情况下，我看不到自定义窗口的意义，您可以拆分窗口的内容，这可能是品牌化。

# prestashop - Javascript 拆分在 IE 中无法正常工作

> ID：15457466
> 
> 赞同：0
> 
> 时间：2013-03-17T04:17:41.657
> 
> 标签：prestashop

我有一页结帐。我的 OPC 在其他浏览器上运行良好，但在 IE 上出现致命错误。IE 的 Javascript 控制台显示`Object doesn't support this property or method.`. 有问题的方法`var items = field_name.split(reg)`来自文件：`order-address.tpl`.

我不知道是什么导致了这个问题。由于这个错误，我在使用 IE 时无法从一页结帐中正确登录。似乎有很多人有同样的问题。有什么问题？

此错误出现在 1.4.9、1.4.10 和 1.5.3 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:54:52.680

解决了。事实证明，问题不在于编码，而在于 IE 的设置。我所要做的就是从工具 => 互联网选项 => 高级 => 重置（包括个人设置）重置 IE。感谢 altafhussain 试图帮助我。

# java - MDB 中 SpringBeanAutowiringInterceptor 的 java 配置

> ID：15457469
> 
> 赞同：1
> 
> 时间：2013-03-17T04:17:55.003
> 
> 标签：java, spring, jakarta-ee, config

我正在尝试为现有的 jaxws 服务公开 MDB 接口。jaxws 实现是使用 Spring 的 java 配置进行连接的，我也想为 MDB 重用它，将委托注入 MDB 中，该委托将从 onMessage() 调用。

我正在尝试按照文档使用 SpringBeanAutowiringInterceptor 。
[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/ejb.html#ejb-implementation-ejb3](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/ejb.html#ejb-implementation-ejb3)

但文档仅涉及 XML 配置。提到了覆盖 getBeanFactory() 的选项，但没有给出详细信息。

有没有办法将 Spring 的 java 配置 (@Configuration) 与 SpringBeanAutowiringInterceptor 一起使用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T00:42:31.103

最终将 MDB 与 Web 服务一起打包到 WAR 中，如[http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=/com.ibm.websphere.base 中所述。 doc/ae/cejb_ejbinwar.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=/com.ibm.websphere.base.doc/ae/cejb_ejbinwar.html)。

# android - 安卓外部存储

> ID：15457470
> 
> 赞同：2
> 
> 时间：2013-03-17T04:17:58.050
> 
> 标签：android, storage, external

我正在使用方法`Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC)`来获取我的 Android 设备将其音乐保存到的默认目录。

此方法返回的目录存在（类似于 sdcard/music），但它没有任何音乐文件。当我检查我的 sdcard 时，我发现所有音乐文件都存储在另一个由我的一个应用程序命名的目录中（sdcard/qqmusic/song），使用该方法无法找到该目录`getExternalStoragePublicDirectory`。

在这种情况下（不同的设备将音乐存储在不同的位置），无论设备之间的差异如何，有没有什么好的方法来获取路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:59:47.903

正如我们在评论中所讨论的，我将展示 Android 音乐应用程序如何查找所有音乐文件。

Android 音乐应用程序只需查询 MediaProvider 以获取外部存储（即 sdcard）上的所有音乐。

数据库由[MediaScannerService](https://android.googlesource.com/platform/packages/providers/MediaProvider/+/android-4.2.2_r1/src/com/android/providers/media/MediaScannerService.java)填充。MediaScannerService 调用[MediaScanner.scanDirectories](https://android.googlesource.com/platform/frameworks/base/+/android-4.2.2_r1/media/java/android/media/MediaScanner.java)来搜索这些目录下的所有文件。如果是音频文件，则获取元数据并将其放入数据库（MediaProvider）。

```
if (MediaProvider.INTERNAL_VOLUME.equals(volume)) {
    // scan internal media storage
    directories = new String[] {
        Environment.getRootDirectory() + "/media",
    };
}else if (MediaProvider.EXTERNAL_VOLUME.equals(volume)) {
    // scan external storage volumes
    directories = mExternalStoragePaths;
}

if (directories != null) {
    scan(directories, volume);
} 
```

所以我的回答是MediaProvider已经包含了外部存储上的音乐文件，所以你可以直接查询provider来获取所有的音乐文件。

首先检查[MediaStore](http://developer.android.com/reference/android/provider/MediaStore.html)。

您可以使用以下代码获取所有音乐文件。

```
//Some audio may be explicitly marked as not being music
String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";

String[] projection = {
        MediaStore.Audio.Media._ID,
        MediaStore.Audio.Media.ARTIST,
        MediaStore.Audio.Media.TITLE,
        MediaStore.Audio.Media.DATA,
        MediaStore.Audio.Media.DISPLAY_NAME,
        MediaStore.Audio.Media.DURATION
};

cursor = this.managedQuery(
        MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
        projection,
        selection,
        null,
        null);

private List<String> songs = new ArrayList<String>();
    while(cursor.moveToNext()){
        songs.add(cursor.getString(0) + "||" + cursor.getString(1) + "||" +   cursor.getString(2) + "||" +   cursor.getString(3) + "||" +  cursor.getString(4) + "||" +  cursor.getString(5));
} 
```

该`MediaStore.Audio.Media.DATA`列包含该音乐文件的完整路径。

# google-app-engine - 我们如何从自定义域下的 cron 作业启动任务？

> ID：15457478
> 
> 赞同：0
> 
> 时间：2013-03-17T04:20:07.147
> 
> 标签：google-app-engine, cron, task-queue

Cron 作业在域`*.appspot.com`（服务器名称）下运行，因为它不属于任何特定（自定义）域。

但是在`TaskQueue`其父 servlet 的域下运行的任务，例如`www.example.com`or `xyz.abc.com`。

如何将任务从 cron 作业启动到特定的自定义域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:50:14.633

用于启动 cron 作业或任务的实际域名无关紧要。只要 mydomain.com 指向 myapp.appspot.com，它就会由同一个 GAE 处理程序处理。您永远不需要检查请求的域名。所以只需从 cron 作业启动任务，不用担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:57:01.213

“使用 cron 作业点击自定义域上的 URL（如果需要，使用参数）并将新项目推送到队列中”

-- 另类哺乳动物

# wordpress - Wordpress - 将自定义帖子类型类别添加到菜单

> ID：15457480
> 
> 赞同：0
> 
> 时间：2013-03-17T04:20:24.147
> 
> 标签：wordpress, custom-post-type

对于这些自定义帖子，我有一个名为“The Books”的自定义帖子类型，以及一个名为“The Books”的相关类别。

当我将帖子类别添加到导航菜单时，它不起作用，因为它转到 URL */category/the-books*而不是只转到*/the-books*。如果我在默认帖子部分发布此内容，它会正确显示，但是当我在自定义帖子部分发布时，它不会返回我的帖子。当然，我可以将自定义帖子部分中的单个帖子添加到导航菜单，但不知道如何添加自定义帖子的存档页面。

我的永久链接设置为： URL/%postname%/ 所以我不确定为什么会这样。

这是我的自定义帖子的功能：

```
add_action( 'init', 'create_post_type' );
function create_post_type() {
    register_post_type( 'hpl_books',
        array(
            'labels' => array(
                'name' => __( 'The Books' ),
                'singular_name' => __( 'Book' )
            ),
            'taxonomies' => array('category'),
            'public' => true,
            'has_archive' => true,
            'rewrite' => array('slug' => 'the-books'),
        )
    );
} 
```

任何意见是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T04:52:18.850

您不需要添加类别“the-books”来显示结果。

您是否在页面模板目录中创建了一个名为“archive-hpl_books.php”的视图？这是 WordPress 将查找的文件以显示您的自定义帖子类型的存档。基本上，您将创建一个名为“the-books”或其他名称的页面，然后将archive-hpl_books.php 设置为模板。

请参阅[http://codex.wordpress.org/Template_Hierarchy](http://codex.wordpress.org/Template_Hierarchy)

我只是对此做出回应，因为我刚刚遇到了类似的问题，所以我很乐意提供帮助。:)

# java - 变量在异步任务android之外返回null

> ID：15457482
> 
> 赞同：2
> 
> 时间：2013-03-17T04:20:55.180
> 
> 标签：java, android, android-asynctask

我有一个通过 php 获取数据的异步任务。asynctask 工作正常，它将值传递给全局数组列表。但是，当我尝试在 .execute() 之后调用 onCreate 上的变量时，它返回一个空大小/值。我想知道为什么这个全局变量在它应该有一个值时返回一个空值。提前致谢！

这是异步任务的代码：

```
 private class  get_pendingreq extends AsyncTask<String, Integer, String> 
 {
    @Override
    protected String doInBackground(String... arg0) 
    {
        InputStream is = null;
        String result = "";

        try 
        {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url+"pending_requests.php");

            List<NameValuePair> parameter = new ArrayList<NameValuePair>();
            parameter.add(new BasicNameValuePair("email", globalVariables.accountemail));

            httppost.setEntity(new UrlEncodedFormEntity(parameter));

            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

        } catch (Exception e) 
        {
            Log.e("log_tag", "Error in http connection " + e.toString());
        }

        try 
        {
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;

            while ((line = reader.readLine()) != null) 
            {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
        } catch (Exception e) 
        {
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        return result;
    }

    @Override
    protected void onPostExecute(String result) 
    {
        super.onPostExecute(result);

        try 
        {
            /*  JSON parsing starts here    */
            JSONObject jArray = new JSONObject(result);
            /*globalVariables.pendingdate = new ArrayList<String>();*/
            JSONArray request = jArray.getJSONArray("request");

            for (int i = 0; i < request.length(); i++) 
            {

                JSONObject e = request.getJSONObject(i);

                /* puts values to arraylist<String>  */                 
                globalVariables.pendingdate.add(e.getString("date"));

            }

            Log.d("striiing", globalVariables.pendingdate.toString());
        } catch (JSONException e) 
        {
            e.printStackTrace();
                }
    }
} 
```

主要活动：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.calendar);

    new get_pendingreq().execute();

    System.out.print("alalala" + globalVariables.pendingdate.size());
      }//this returns null 
```

全局变量：

```
public static ArrayList<String> pendingdate = new ArrayList<String>; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T04:27:38.737

因为 `AsyncTask`还没完。放进`System.out.print("finish");`去`onPostExcute()`看看谁先打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T04:34:40.697

an 背后的想法`AsyncTask`是它从主线程异步运行，因此在后台线程上运行。这样它就不会阻止主线程上任何代码的执行。

知道这一点后，以下几行将依次执行：

```
new get_pendingreq().execute();
System.out.print("alalala" + globalVariables.pendingdate.size()); 
```

您的`get_pendingreq`班级在经过一小段延迟之前不会做任何实际工作，这意味着在调用上述代码段中的第一行之后，什么都没有发生。您只是指示平台在不久的将来某处启动异步任务。

现在，`globalVariables.pendingdate`在异步任务完成其工作之前，您在第二行访问的字段将没有任何值。在执行之前不会发生这种情况`onPostExecute()`。换句话说：您试图在错误的时间打印值。

只需将该 print 移到异步任务`onPostExectute()`方法的末尾（但显然在之前`return`- 为什么甚至在那里？）。

我强烈建议您通读[`AsyncTask`类文档](http://developer.android.com/reference/android/os/AsyncTask.html)和[Processes and Threads](http://developer.android.com/guide/components/processes-and-threads.html)文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T04:35:52.013

从名称中可以清楚地看出 AsyncTask 确实异步运行......让我解释一下考虑到您的代码：

```
new get_pendingreq().execute(); 
```

> 这一行将创建一个新的执行线程，它将异步运行，因此下一行(ieSystem.out.print("alalala" + globalVariables.pendingdate.size());) 在这一行之后立即执行，无需等待异步要完全执行的任务。所以将此 system.print 行放在 post execute 方法中...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T04:40:38.523

你确定，`globalVariables.pendingdate.add(e.getString("date"));`真的有“数据”字段吗？

# objective-c - 限制我从 FBRequestConnection 得到的结果

> ID：15457483
> 
> 赞同：2
> 
> 时间：2013-03-17T04:20:56.170
> 
> 标签：objective-c, facebook, facebook-graph-api

我正在使用 Facebook iOS SDK 从 Score 中检索数据。

以下是我的代码...

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   [NSString stringWithFormat: @"%d", mScore], @"score",
                                   nil];

[FBRequestConnection startWithGraphPath: [NSString stringWithFormat: @"%llu/scores", APP_ID] 
parameters: params HTTPMethod:@"GET" 
completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {} 
```

我想问我如何修改参数以便它只会返回有限数量的结果？例如，我知道我可以通过编写类似 LIMIT=20 的内容来使用 FQL。由于我没有使用 FQL，如何使用上述代码实现相同的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:33:05.223

根据[文档](https://developers.facebook.com/docs/reference/api/pagination/) 应该足够了

```
NSInteger limit = 3;
[FBRequestConnection startWithGraphPath: [NSString stringWithFormat: @"%llu/scores?limit=%i", APP_ID, limit]; 
```

**编辑**

由于上述似乎不起作用，您是否尝试过在参数中传递限制？

```
NSInteger limit = 3;
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   [NSString stringWithFormat: @"%d", mScore], @"score",
                                   limit, @"limit",
                                   nil]; 
```

**编辑 2**

这个API似乎有问题。

我试过查询

```
<APP_ID>/scores?limit=1 
```

在[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

在任何情况下它都会返回超过 1 个结果。

# macos - lldb python错误

> ID：15457484
> 
> 赞同：15
> 
> 时间：2013-03-17T04:21:15.997
> 
> 标签：macos, lldb

我尝试`lldb`在我的 Mac 上运行并在启动时得到这个：

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/System/Library/PrivateFrameworks/LLDB.framework/Versions/A/Resources/Python/lldb/embedded_interpreter.py", line 1, in <module>
    import readline
ImportError: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/readline.so: no appropriate 64-bit architecture (see "man python" for running in 32-bit mode)
Traceback (most recent call last):
  File "<string>", line 1, in <module>
NameError: name 'run_one_line' is not defined
Traceback (most recent call last):
  File "<string>", line 1, in <module>
NameError: name 'run_one_line' is not defined
Traceback (most recent call last):
  File "<string>", line 1, in <module>
NameError: name 'run_one_line' is not defined 
```

我尝试添加环境变量`VERSIONER_PYTHON_PREFER_32_BIT=yes`，但仍然出现此错误。我认为 lldb 使用的 python 环境与其 Mac 主机不同，所以我在哪里进行更改以使其使用 32 位模式？谢谢。

更新：

我做了一个`arch -i386 lldb`，它在 32 位下工作。为了让它在 64 位下工作，我为 OS X 安装了一个 64 位版本的 python readline，但在原生 python 库（如`termios`和`time`. 所以我下载了python 2.7.3 64位安装程序DMG文件并安装了它的二进制文件；现在 lldb 终于在我的 10.8 山狮上以 64 位运行。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T21:48:04.443

看起来您`/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/readline.so`在系统上的某个位置安装了它（我在 Mac OS X 10.7.5 安装中没有看到它，尽管它可能包含在 10.8 中），并且 dylib 仅构建为 32 位。您可以确认

```
file /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/readline.so 
```

在您的系统上。您可以尝试强制 lldb 也以 32 位模式运行（分发二进制文件构建为 32-/64- 通用），但我建议您从系统中删除仅 32 位，`readline.so`除非您确实需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-24T01:09:20.450

为了其他人来这个问题寻找快速解决方案 - Linus Oleander 的回答对我有用 - 也就是说，运行

`pip install six`

冒险猜测*为什么*会这样，我认为这可以解决 lldb 在安装了“非标准”python 的机器上运行时面临的一些 python 不兼容问题。这也适用于使用 Homebrew 的 llvm 版本。

# java - 错误 - 未处理的异常类型异常？

> ID：15457486
> 
> 赞同：2
> 
> 时间：2013-03-17T04:21:52.970
> 
> 标签：java, exception

我做了一个抛出异常（）的方法。它会导致错误 - 未处理的异常类型 Exception

```
public void temp(){
  throw new Exception();
} 
```

但是，如果我用任何其他异常（例如 NullPointerException）替换异常，我不会收到任何错误。为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T04:25:52.700

这就是“已检查”异常和“未检查”异常之间的区别。任何扩展 RuntimeException 的东西，包括 NullPointerException，都是“未经检查的”，这意味着它们不需要通过 try/catch 或通过声明方法抛出它们来显式处理。

已检查异常是那些不扩展 RuntimeException 并且**必须**通过 try/catch 或通过声明您的方法 throw 它来处理的异常。因此，您的代码无法编译，因为您没有以任何一种方式处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-20T20:45:21.123

我遇到了这个错误的奇怪情况。也就是说，我的 Eclipse 在没有警告的情况下构建了代码，但是对于我的两个同事，编译器给出了这个错误。我们花了一段时间才弄清楚，主要是因为使用`RuntimeException`. 但最后，诀窍在于他们的 Eclipse 是为 Java 1.6 设置的，而我的则为 1.7 进行了调整。

# php - 虚 URL 错误：找不到对象

> ID：15457487
> 
> 赞同：0
> 
> 时间：2013-03-17T04:21:54.197
> 
> 标签：php, html, .htaccess

出于某种原因，我收到了一个虚 URL 错误，并且没有其他帖子充分回答了这个问题。PHP代码有什么问题？

```
if (isset($_GET['username']) === true && empty($_GET['username']) === false) {
$username = $_GET['username'];
echo $username;
} 
```

我的`.htaccess`文件是：

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /lr/profile.php?username=$1 
```

如果我去`/projects/lr/profile.php?username=harrison7042`，它可以工作，但如果我去`/projects/lr/harrison7042`它不起作用，只是返回：`Object not found!`。

如果我改变这一行：

```
RewriteRule ^(.*)$ /lr/profile.php?username=$1 
```

对此：

```
RewriteRule ^(.*)$ projects/lr/profile.php?username=$1 
```

服务器返回一个`Internal Server Error`. 我不确定我做错了什么，或者什么。我完全按照[这里](http://www.youtube.com/watch?v=zrc4p-J_x9s&list=ECE134D877783367C7)的教程进行操作。

谢谢，哈里森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:05:07.110

在 .htaccess 更改：

```
RewriteRule ^(.*)$ /lr/profile.php?username=$1 
```

至

```
RewriteRule ^(.*)$ profile.php?username=$1 
```

# java - 如何编写正则表达式以及如何在 Java 中创建更多组？

> ID：15457492
> 
> 赞同：1
> 
> 时间：2013-03-17T04:22:25.370
> 
> 标签：java, regex

请帮我！我正在使用正则表达式用 Java 编写程序。我有很多句子结构。

给定句子 - “为 Ahmed Mohamed 医生写‘学习 java’ 的书”或“最好的书名：为 Ahmed Mohamed 学习 java”，等等。

这意味着：

> （书）可以是[书或文本：或（文本）]。
> 
> （对于医生）可以是[为作者或为或由或为医生]。

正则表达式是：

```
"(?<=(book| the book| \\ (\\)|\\:)) .*? (?=(for doctor| for| for author))" 
```

输出：

我想在（书）和（医生）之前提取任何单词并将其命名为标题。并在（对于医生）之后提取任何单词并将其命名为作者。

```
String inputtext =  "book 'learning java' for doctor  ahmed mohamed";

Pattern p = Pattern.compile("(?<=(book| the book| \\ (\\)|\\:)) .*? (?=(for doctor| for| for author))");

Matcher m = p.matcher(inputtext);

    if (m.matches()) {
        String author = m.group(1).trim();
        String bookTitle = m.group(2).trim();

        System.out.println("Title is : " + author);
        System.out.println("Author is : " + bookTitle); 
```

这个程序在运行时给了我错误，我会支持正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:42:56.837

1.  你缺少一个`)`. `\\)`是一个转义的`)`，所以`(\\)|\\:)`被括号包围，`(book| the book| \\ (\\)|\\:))`也是，但`(?<=`没有右括号。

2.  我很确定您不能使用环视，`Matcher::matches()`因为它会尝试匹配整个字符串，因此环视将在字符串的开头和字符串的结尾之后查找。使用`Matcher::find()`效果更好。

3.  括号中的所有内容都是组（环视组和非捕获组除外），因此第 1`(book| the book| \\ (\\)|\\:))`组是第 2 组`(\\)|\\:)`

4.  `(book| the book| \\ (\\)|\\:))`(and `for doctor|...`) 实际上不需要放在括号中，因为环视括号就足够了。

5.  看来您的正则表达式中有太多空格（它们是正则表达式的一部分，因此需要匹配）。

6.  如果您在`for doctor|for|for author`零件上使用前瞻，您将无法捕捉到作者。

7.  你根本不需要环顾四周。

**这使我们：**

```
String inputtext =  "book 'learning java' for doctor  ahmed mohamed";
Pattern p = Pattern.compile("(book|\\)|\\:) (.*) for( doctor| author|) (.*)");
Matcher m = p.matcher(inputtext);
if (m.find()) {
    String title = m.group(2).trim();
    String author = m.group(4).trim();
    System.out.println("Title is : " + title);
    System.out.println("Author is : " + author);
} 
```

**如果您确实想使用匹配项：**

```
String inputtext =  "book 'learning java' for doctor  ahmed mohamed";
Pattern p = Pattern.compile("(?:book|the book|(?:\\(.*?\\))|.*?\\:) (.*) for(?: doctor| author|) (.*)");
Matcher m = p.matcher(inputtext);
if (m.matches()) {
    String title = m.group(1).trim();
    String author = m.group(2).trim();

    System.out.println("Title is : " + title);
    System.out.println("Author is : " + author);
} 
```

the`?:`只是一个非捕获组，没有它们匹配将是相同的，但您必须使用`group(3)`and`group(5)`而不是`group(1)`and `group(2)`。

[参考](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

# java - 实体 Bean：无法为 unitName null 检索 EntityManagerFactory

> ID：15457497
> 
> 赞同：1
> 
> 时间：2013-03-17T04:23:03.583
> 
> 标签：java, jakarta-ee, javabeans, netbeans-7

这是我第一次尝试实体 bean，我反复收到以下错误：

```
java.lang.IllegalStateException: Unable to retrieve EntityManagerFactory for unitName null 
```

我使用 Netbeans 7.3 和 GlassFish 3.1.2.2 Server 编写了一个简单的实体 bean 示例。我的persistance.xml 文件似乎有问题。但是，我无法解决此问题。我读了

[JavaEE 6：java.lang.IllegalStateException：无法为 unitName null 检索 EntityManagerFactory](https://stackoverflow.com/questions/7647309/javaee-6-java-lang-illegalstateexception-unable-to-retrieve-entitymanagerfacto)

[无法为简单 EJB 检索 unitName null 的 EntityManagerFactory](http://javakenai-dev.cognisync.net/forum/topic/glassfish/glassfish/unable-retrieve-entitymanagerfactory-unitname-null-simple-ejb-0) - 请参阅 nosferatum 答案

但几个小时后，我也无法解决这个问题。我附上了我的目录结构的屏幕截图以及我的 XML 文件的代码，希望有人能指出错误。

persistance.xml ：（由 NetBeans 自动生成的代码）

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="EnterpriseApplication3-ejbPU" transaction-type="JTA">
    <jta-data-source>TestDatabase</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties/>
  </persistence-unit>
</persistence> 
```

![项目目录结构（由 NetBeans 自动放置的 Persistance.xml](../Images/e3e72788e516e7fb775d6a50ee326281.png)

失败代码：

宣言 ：

```
// This injects the default entity manager factory
    @PersistenceUnit
    private EntityManagerFactory emf; 
```

调用点：

```
EntityManager em = emf.createEntityManager(); 
```

此外，一些人似乎这样做：

```
@PersistenceContext(unitName = "myPU") 
```

并且在persistance.xml 中具有相同的名称。我快速搜索了所有项目文件，但没有找到 @PersistenceContext 注释。但我加了

```
@PersistenceContext(unitName = "EnterpriseApplication3-ejbPU") 
```

到我调用 EntityManagerFactory 的代码。但仍然没有成功:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:04:24.790

试试这个：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("EnterpriseApplication3-ejbPU");
EntityManager em = emf.createEntityManager(); 
```

# intellij-idea - Intellij 与 TestNG 报告生成

> ID：15457499
> 
> 赞同：14
> 
> 时间：2013-03-17T04:23:17.810
> 
> 标签：intellij-idea, testng

我无法使用 TestNG+Intellij 12 生成报告，在运行配置中也提供了输出路径。我什至通过这种方式更新到 TestNG 6.8：[https ://stackoverflow.com/a/13452828/1434611](https://stackoverflow.com/a/13452828/1434611)

如果您能够生成报告，任何人都可以提供一些输入。

![截屏](../Images/bf690ba0b9f3baa9b1291914a39bbf76.png)

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2016-04-10T15:33:49.803

[![检查使用默认记者选项](../Images/019a793fa475e28f27d5d7f0023cc909.png)](https://i.stack.imgur.com/ry0Sg.png) 选中使用默认记者选项，它将在您的根文件夹中创建包含所有报告的测试输出文件夹。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-04T10:15:55.900

您可以考虑做的一件事是，选中 Listeners 下的复选框。此复选框启用自动报告。您必须更改 TestNG 运行选项的默认设置，以便在第一次运行之后启用它。这解决了我的报告问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-06T02:31:41.527

您可以在“运行配置”中添加“EmailableReporter”或“FailedReporter”等侦听器，它将在您的工作区中生成测试输出目录。

我在 Intellj IDEA 12.0.4 测试它

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-01-09T10:01:11.247

从编辑配置

1.  在“侦听器选项卡”上，应选中使用默认侦听器。
2.  并且输出目录应该设置正确。

# python - 如何设置 Canvas 文本项的字体 大小？

> ID：15457504
> 
> 赞同：14
> 
> 时间：2013-03-17T04:23:56.133
> 
> 标签：python, python-3.x, canvas, text, tkinter

我有以下代码：

```
canvas.create_text(x, y, font="Purisa", text= k) 
```

如何使用名为 的变量设置字体大小`rndfont`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-17T06:03:11.690

对于文本项，字体大小是`font`关键字参数的一部分：

```
canvas.create_text(x, y, font=("Purisa", rndfont), text=k) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-17T09:28:23.227

`font`是您可以在 tkinter 对象中传递的属性。您传递一个指示字体*名称*和*大小的***元组**，因此您的代码应该更像：

 **```
canvas.create_text(x, y, font=("Purisa", 12), text= k) 
```

但是您要问的是如何使字体大小成为变量。您应该能够像其他任何用途一样将其作为变量传递：

```
rndfont = 12
canvas.create_text(x, y, font=("Purisa", rndfont), text= k) 
```

我刚刚对其进行了测试，似乎如果您为该元组传递了一个无效的属性（例如在字体名称应该是的地方传递一个空字符串），它将完全忽略该属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-29T17:49:02.680

您创建字体大小变量：

```
rndfont=12 
```

并在画布上显示文本：

```
canvas.create_text(x,y,font=('Pursia',rndfont),text=k) 
```

字体参数可以是一个带有字体名称、字体大小和特殊效果（粗体、斜体...）的元组，例如：

```
font=('Arial',30,'bold italic') 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-17T04:25:58.580

```
canvas.create_text(x, y, font="Purisa", size=mdfont, text=k) 
```

假设这`mdfont`只是一个整数，例如

```
mdfont = 10 
```

或者

```
mdfont = int(raw_input("Font size? ")) 
```**

# java - Java：最长升序子串

> ID：15457509
> 
> 赞同：0
> 
> 时间：2013-03-17T04:25:35.503
> 
> 标签：java, for-loop, compiler-errors, substring

我正在尝试创建一个 Java 程序来读取从键盘输入的数字字符串，

并给出最长的升序子串。

以下是我的代码：

```
import java.util.Scanner;
public class Ascending{
public static void main(String args[]){

Scanner in = new Scanner(System.in);

System.out.print("Enter a number = ");
String n = in.nextLine(); 
int length = n.length(); 

for(int i = 0; i < length; i++) {

    char first = n.charAt(i);       
    char next = n.charAt(i+1);      
    char last = n.charAt(length-1);     
    int f = (int)(first - 48);      
    int nx = (int)(next - 48);      
    int l = (int)(last - 48);       

        if (f<nx) {

        String asc = n.substring(i, i++);   
        i++;
        System.out.println("output = " + asc);
            }

        else {
            String asc = n.substring(i, i++);
            System.out.println("output = " + asc);
            break;}

        }

    }
} 
```

当我编译上述内容时，我得到

```
<Enter a number = 12 output = > 
```

没有任何结果。

我假设 for 循环内部出了点问题，但我无法弄清楚我到底哪里出错了。

恐怕我定义了太多不必要的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:42:34.610

您正在使用后增量运算符，但我认为您还没有尝试过它是如何工作的。尝试这个：

```
int i = 0;

System.out.println(i);
System.out.println(i++);
System.out.println(i); 
```

你会得到

```
0
0
1 
```

那是因为 post-increment ( `++`) 说“增加这个值，然后返回*你增加它之前*的值”。

所以当你要求

```
n.substring(i, i++); 
```

您明确要求一个长度为 0 的字符串（因为`i == i++`）。

您可以使用预增量运算符，，`++i`但它很少在代码高尔夫之外使用，因此您最终只会让人们感到困惑。最佳实践 IMO 是只`++`在自己的线路上使用，避免查看返回值。

真的，你想要的是

```
n.substring(i, i+1); 
```

# c - 使用 C 进行除法运算的计算器

> ID：15457510
> 
> 赞同：-1
> 
> 时间：2013-03-17T04:25:45.693
> 
> 标签：c, calculator

我正在使用 C 语言制作计算器。但问题是我陷入了分裂。我希望当我输入 0 除以 0 时，它将打印 undefined 并且如果一个数字除以零将打印不能除以零（这似乎我明白了）。

这是我的代码：

```
#include <stdio.h>
#include <math.h>

main(){

    float num1, num2, total;
    int a;
    char choice;
    clrscr();
    printf("What operation you want to perform?\n 1\. Addition\n 2\. Subtraction\n 3\. Multiplication\n 4\. Division\n");
    scanf("%d", &a);
    switch(a)  {
        case 1:  //Addition
            printf("Addition\n Enter two numbers to be added\n");
            scanf("%f%f",&num1, &num2);
            total=num1 + num2;
            printf("\nThe total is: %f + %f = %f\n", num1, num2, total);
            printf("\nDo want to continue? Y or N:  ");
            scanf("%s", &choice);
            if(choice=='y'||choice=='Y')
                main();
            else
                exit(1);
            break;
        case 2: //Subtraction
            printf("Subtraction\n Enter two numbers to be subtract\n");
            scanf("%f%f", &num1, &num2);
            total=num1 - num2;
            printf("\nThe Difference is: %f + %f = %f\n", num1, num2, total);
            printf("\nDo you want to continue? Y or N:  ");
            scanf("%s", &choice);
            if(choice=='y'||choice=='Y')
                main();
            else
                exit(1);
            break;
        case 3: //Multiplication
            printf("Multiplication\n Enter two numbers to be multiplied\n");
            scanf("%f%f",num1, num2);
            total=num1*num2;
            printf("\nThe product is: %f * %f = %f\n", num1, num2, total);
            printf("\nDo you wish to continue? Y or N:  ");
            scanf("%s", &choice);
            if(choice=='y'||choice=='Y')
                main();
            else
                exit(1);
            break;

        case 4: //Division
            abcd:
            printf("Division\n Enter two numbers to be divide\n");
            scanf("%f%f",&num1, &num2);
                if(num2==0.0)
                      {    printf("\n %f cannot be divided by zero\n\n", num1);    // ;(
                     goto abcd;}
                else if(num1==0.0 && num2==0.0)                    //This is my problem here.
                    {printf("\nIts Undefined. 0 / 0\n\n ");
                    }
            total=num1/num2;
            printf("\nThe qoutient is %f / %f = %f\n", num1, num2, total);
            printf("\nDo you want more? Y or N:  ");
            scanf("%s", &choice);
            if(choice=='y'||choice=='Y')
                main();
            else
                exit(1);
            break;
        default:
            printf("Can you add letters? LOL only numbers");
            printf("\nDo you want to continue? Y/N ");
            scanf("%s", &choice);
            if(choice=='y'||choice=='Y')
                main();
            else
                exit(1);
            break;
    }

    getch();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T04:33:02.293

你有：

```
if(num2==0.0)
    // division by zero
else if(num1==0.0 && num2==0.0)
    // zero/zero is undefined 
```

问题是如果两个数字都是 0.0，它会被第一个测试捕获，而第二个永远不会执行。

*您需要先*测试两个数字是否为零，然后检查第二个数字是否为零。

或者你可以结合这两个测试：

```
if (num2 == 0.0) {
    if (num1 == 0.0) {
        // zero / zero
    }
    else {
        // non-zero / zero
    }
}
else {
    // ok
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T04:34:22.690

您的`if else`陈述没有正确排序。始终尝试将最具体的案例放在更一般的案例之前。

所以在你的情况下，具体情况是什么时候`num1 == 0.0 && num2 == 0.0`

而一般情况是`num2 == 0.0`

`num1`此外，当两者都为零时，您的程序会崩溃`num2`，因为在这种情况下无论如何都会将它们分开。

# php - 无限滚动 - 获取动态更新内容的 Div ID

> ID：15457514
> 
> 赞同：0
> 
> 时间：2013-03-17T04:26:41.750
> 
> 标签：php, jquery, html

所以我正在为我的博客创建无限滚动。它应该在滚动后基本上拉出一个帖子。我正在通过 Ajax 实现它。问题是，Ajax 发布的 post_id 与我在滚动一次后得到的相同。我用萤火虫调试它。例如：已经有一个post-id = 10的帖子。我滚动后，它会附加下一个post-id = 11的帖子。但在那之后滚动，它只会附加post-id = 11的帖子，它不会附加 post-id = 12 的帖子，依此类推。问题是什么？这个 (Posted:last) 选择器有问题吗？如何获取最后动态更新内容的 id？

这是我的 Index.php：

```
<?php
include 'resources/init.php';

function get_posts($post_id = null, $tag_id = null){
    $posts = array();
    $query = "SELECT `posts`.`post_id` AS `posts_id`, `tags`.`tag_id` AS `tags_id`,
                        `title`, `txt_content`, `img_content`, `date_posted`,`tag_name`
                        FROM `posts`
                        INNER JOIN `tags` ON `tags`.`tag_id` = `posts`.`tag_id`";

    if(isset($post_id)){
        $post_id = (int)$post_id;
        $query .= " WHERE `posts`.`post_id` = $post_id";

    }
    if(isset($tag_id)){
        $tag_id = (int)$tag_id;
        $query .= " WHERE `tags`.`tag_id` = $tag_id";

    }

    $query .= " ORDER BY `posts`.`post_id` DESC LIMIT 0,1";

    $query = mysql_query($query);
    while($row = mysql_fetch_assoc($query)){
        $posts[] = $row;
    }
    return $posts;
}

$posts = (isset($_GET['post_id'])) ? get_posts($_GET['post_id']) : get_posts();
?>
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
</head>
<body>
<a href = "http://localhost/simpleblog/add_post.php">Add a Post</a> | <a href = "http://localhost/simpleblog/add_tag.php">Add a Tag</a> | <a href = "http://localhost/simpleblog/tag_list.php">Show Existing Tags</a> | <a href = ""></a>
<p>
<div id = "AddPosts">
<?php
foreach($posts as $post){
?>
    <div class = "Posted" id = "<?php echo $post['posts_id']; ?>">
    <h2><a href = "http://localhost/simpleblog/looks/<?php echo $post['posts_id']; ?>-<?php $strings = array(" "); echo str_replace($strings, '-', preg_replace('/[^a-zA-Z0-9 s]/', '', $post['title'])); ?>"><?php echo $post['title'];?></a></h2>
    <div><?php echo nl2br($post['txt_content']);?></div>
    <div><img src = "http://localhost/simpleblog/<?php echo $post['img_content'];?>"></div>
        <p>Posted on <i><?php echo date("F dS\,\ Y", strtotime($post['date_posted'])); ?></i>
         in <a href = "http://localhost/simpleblog/tags/<?php echo $post['tags_id'];?>"><?php echo $post['tag_name']; ?></a></p>
         <div><a href = "http://localhost/simpleblog/edit_my_looks/<?php echo $post['posts_id'];?>">Edit This Post</a> |
        <a href = "http://localhost/simpleblog/delte_my_post/<?php echo $post['posts_id'];?>"> Delete This Post</a></div>
    </div>
<?php
}
?>
</div>
<center><img src = "loader.gif" id = "loading-img" width = "200" height = "200" style = "display:none" /></center>
<script>
$(window).scroll(function(){
    if ($(window).scrollTop() == $(document).height() - $(window).height()){
        $('#loading-img').show();

        var post_id = $('.Posted:last').attr('id');
        $.post("add_more_posts.php", {post_id: post_id} , function(data){
            if(data){
                $('#loading-img').fadeOut();
                $('#AddPosts').append(data);
            }else{
                $('#AddPosts').append('Finished Loading!');
            }
        });
    }
});
</script>
</body>
</html> 
```

添加_more_posts.php

```
<?php
include 'resources/init.php';

function load_more_posts($post_id = null, $tag_id = null){
    $posts = array();
    $query = "SELECT `posts`.`post_id` AS `posts_id`, `tags`.`tag_id` AS `tags_id`,
                        `title`, `txt_content`, `img_content`, `date_posted`,`tag_name`
                        FROM `posts`
                        INNER JOIN `tags` ON `tags`.`tag_id` = `posts`.`tag_id`";

    if(isset($post_id)){
        $post_id = (int)$_POST['post_id'];
        $query .= " WHERE `posts`.`post_id` < $post_id";

    }
    if(isset($tag_id)){
        $tag_id = (int)$tag_id;
        $query .= " WHERE `tags`.`tag_id` = $tag_id";

    }

    $query .= " ORDER BY `posts`.`post_id` DESC LIMIT 0,1";

    $query = mysql_query($query);
    while($row = mysql_fetch_assoc($query)){
        $posts[] = $row;
    }
    return $posts;
}

$posts = (isset($_POST['post_id'])) ? load_more_posts($_POST['post_id']) : load_more_posts();
?>
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<?php
foreach($posts as $post){
?>
    <h2><a href = "http://localhost/simpleblog/looks/<?php echo $post['posts_id']; ?>-<?php $strings = array(" "); echo str_replace($strings, '-', preg_replace('/[^a-zA-Z0-9 s]/', '', $post['title'])); ?>"><?php echo $post['title'];?></a></h2>
    <div><?php echo nl2br($post['txt_content']);?></div>
    <div><img src = "http://localhost/simpleblog/<?php echo $post['img_content'];?>"></div>
        <p>Posted on <i><?php echo date("F dS\,\ Y", strtotime($post['date_posted'])); ?></i>
         in <a href = "http://localhost/simpleblog/tags/<?php echo $post['tags_id'];?>"><?php echo $post['tag_name']; ?></a></p>
         <div><a href = "http://localhost/simpleblog/edit_my_looks/<?php echo $post['posts_id'];?>">Edit This Post</a> |
        <a href = "http://localhost/simpleblog/delte_my_post/<?php echo $post['posts_id'];?>"> Delete This Post</a></div>
<?php
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:42:05.590

好的，这是一个为什么它可能不起作用的想法。

在 ajax 站点上，跟踪获取的 id 可能存在问题。如果您要获取 id=12 的记录。你是如何记录这个记录的？所以你的问题可能是 ajax 一遍又一遍地向服务器发送相同的 id，这就是它不获取下一条记录的原因。

您可以通过以下方式在 javascript 中创建静态变量

```
function static_vars(){
    this.id=0;
} 
```

稍后您可以从任何函数调用它

```
static_vars.id 
```

因此，一旦您获取记录 12，请将 static_vars.id 更新为 13 并将 id 发送到服务器以获取记录 13。

仅当您从服务器获得成功响应时才增加 static_vars.id。

# php - 将谷歌站点地图标题添加到根元素？

> ID：15457519
> 
> 赞同：0
> 
> 时间：2013-03-17T04:27:45.620
> 
> 标签：php, xml, validation, xml-namespaces, xml-sitemap

我正在创建一个简单的脚本来动态生成谷歌站点地图，但我有一个小问题，当我查看谷歌的普通站点地图时，我发现主根元素内的这些行称为`urlset`：

```
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 

xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 

http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd" 

xmlns="http://www.sitemaps.org/schemas/sitemap/0.9 
```

我正在通过`DOMdocument`PHP 创建站点地图，我需要知道如何将此标题或代码添加到我的主要孩子？
这是我的代码：

```
$doc = new DOMDocument('1.0', 'UTF-8');
$map = $doc->createElement('urlset');
$map = $doc->appendChild($map);
$url = $map->appendChild($doc->createElement('url'));
$url = $map->appendChild($doc->appendChild($url));
$url->appendChild($doc->createElement('loc',$link));
$url->appendChild($doc->createElement('lastmod',$date));
$url->appendChild($doc->createElement('priority',$priority));
$doc->save('sitemap.xml'); 
```

代码工作正常，生成 XML 文件没有问题，但是当我尝试通过验证来检查站点地图的有效性时，它给出了这个错误

> 元素“urlset”：没有可用于验证根的匹配全局声明或找不到元素“urlset”的声明。

这是由于我认为缺少标题造成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:45:08.150

Google Sitemap 中的`<urlset>`元素位于带有 URI 的 XML 命名空间中`http://www.sitemaps.org/schemas/sitemap/0.9`。

因此，当您创建该元素时，您需要在该命名空间中创建它。为此，您需要命名空间 URI 和方法[`DOMDocument::createElementNS()`^(*Docs*)](http://php.net/domdocument.createElementns)：

```
const NS_URI_SITE_MAP = 'http://www.sitemaps.org/schemas/sitemap/0.9';

$doc = new DOMDocument('1.0', 'UTF-8');

$map = $doc->createElementNS(NS_URI_SITE_MAP, 'urlset');
$map = $doc->appendChild($map); 
```

这已经创建了以下 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"/> 
```

下一部分是为验证添加 XML Schema Instance Schemalocation 属性。它是它自己的命名空间中的一个属性，因此需要在命名空间内再次创建该属性，然后添加到`$map`根元素：

```
const NS_URI_XML_SCHEMA_INSTANCE = 'http://www.w3.org/2001/XMLSchema-instance';
const NS_PREFIX_XML_SCHEMA_INSTANCE = 'xsi';

$schemalocation = $doc->createAttributeNS(
    NS_URI_XML_SCHEMA_INSTANCE,
    NS_PREFIX_XML_SCHEMA_INSTANCE . ':schemaLocation'
);
$schemaLocation->value = sprintf('%1s %1$s.xsd', NS_URI_SITE_MAP);
$schemaLocation        = $map->appendChild($schemaLocation); 
```

然后将文档扩展到（漂亮打印）：

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9
                            http://www.sitemaps.org/schemas/sitemap/0.9.xsd"/> 
```

据我所知，DOMDocument 不可能在*不*将它们编码为数字实体的情况下在属性值内插入换行符。因此，我使用了一个空格，当文档被读回时，它是*等效的。*

希望这可以帮助。

有关的：

*   [xsi:schemaLocation 有什么用？](https://stackoverflow.com/questions/5875021/what-is-the-use-of-xsischemalocation)

# mysql - 删除MySQL中关系位置的记录？

> ID：15457521
> 
> 赞同：5
> 
> 时间：2013-03-17T04:27:51.793
> 
> 标签：mysql, relational

我正在尝试清理存储在 MySQL 表中的记录。如果一行包含`%X%`，无论内容如何，​​我都需要删除该行及其下方的行。例如（对不起，如果这张桌子侮辱了任何人的智力）：

```
| 1 | leave alone 
| 2 | Contains %X% - Delete
| 3 | This row should also be deleted
| 4 | leave alone
| 5 | Contains %X% - Delete
| 6 | This row should also be deleted
| 7 | leave alone 
```

有没有办法只使用几个查询来做到这一点？还是我必须先执行一个 SELECT 查询（使用`%x%`search 参数），然后循环遍历这些结果并为每个返回的索引执行 DELETE...WHERE + 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T04:40:14.243

这应该可以工作，虽然它有点笨重（可能需要检查 LIKE 参数，因为它使用模式匹配（见评论） DELETE FROM `table`. `db` WHERE `idcol`IN ( SELECT `idcol`FROM `db`. `table`WHERE `col`LIKE '%X%') OR idcol `IN ( SELECT`idcol `+1 FROM`db `.`table `WHERE`col` LIKE '％X％'）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T05:47:26.563

假设该表已命名`test`并包含在名为 和 的列`id`中`data`。

我们从一个 SELECT 开始，它为我们提供具有前一行的所有行的 id（所有 id 中的最高 id 低于当前行的 id）：

```
SELECT t1.id FROM test t1
  JOIN test t2 ON
    ( t2.id, true )
      =
    ( SELECT t3.id, t3.data LIKE '%X%' FROM test t3
        WHERE t3.id < t1.id ORDER BY id DESC LIMIT 1 ) 
```

这给了我们 ID 3 和 6。它们前面的第 2 行和第 5 行包含`%X%`，所以这很好。

现在让我们通过 UNION 获取包含行的 id`%X%`并将它们与之前的行组合：

```
(SELECT t1.id FROM test t1
  JOIN test t2 ON
    ( t2.id, true )
      =
    ( SELECT t3.id, t3.data LIKE '%X%' FROM test t3
        WHERE t3.id < t1.id ORDER BY id DESC LIMIT 1 )
)
UNION
(
  SELECT id FROM test WHERE data LIKE '%X%'
) 
```

这给了我们 3、6、2、5 - 很好！

现在，我们不能从一个表中删除并从 MySQL 中的同一个表中选择 - 所以让我们使用一个临时表，将要删除的 id 存储在其中，然后从该临时表中读取以从我们的原始表中删除：

```
CREATE TEMPORARY TABLE deleteids (id INT);

INSERT INTO deleteids
  (SELECT t1.id FROM test t1
    JOIN test t2 ON
      ( t2.id, true )
        =
      ( SELECT t3.id, t3.data LIKE '%X%' FROM test t3
          WHERE t3.id < t1.id ORDER BY id DESC LIMIT 1 )
  )
  UNION
  (
    SELECT id FROM test WHERE data LIKE '%X%'
  );

  DELETE FROM test WHERE id in (SELECT * FROM deleteids); 
```

...我们的表中只剩下 ids 1、4 和 7 了`test`！

（并且由于之前的行是使用 <、ORDER BY 和 LIMIT 选择的，因此如果 id 不连续，这也适用。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T05:47:38.583

您可以在一个`DELETE`语句中完成所有操作：

假设“紧随其后的行”是基于您的基于 INT 的 ID 列的顺序，您可以使用 MySQL 变量来分配行号，从而解决您的 ID 中的空白：

```
DELETE a FROM tbl a
JOIN (
    SELECT a.id, b.id AS nextid
    FROM (
        SELECT     a.id, a.text, @rn:=@rn+1 AS rownum 
        FROM       tbl a
        CROSS JOIN (SELECT @rn:=1) rn_init
        ORDER BY   a.id
    ) a
    LEFT JOIN (
        SELECT     a.id, @rn2:=@rn2+1 AS rownum 
        FROM       tbl a
        CROSS JOIN (SELECT @rn2:=0) rn_init
        ORDER BY   a.id
    ) b ON a.rownum = b.rownum
    WHERE a.text LIKE '%X%'
) b ON a.id IN (b.id, b.nextid) 
```

# [SQL Fiddle Demo（例如添加了附加数据）](http://sqlfiddle.com/#!2/e9d43/1/0)

* * *

它的作用是首先获取您的数据并根据您的 ID 列对其进行排名，然后我们`LEFT JOIN`对几乎相同的结果集进行偏移，除了排名列落后于`1`. 这将并排获取行及其直接“下一个”行，以便我们可以在父`DELETE`语句中同时提取它们的两个 id：

```
SELECT a.id, a.text, b.id AS nextid, b.text AS nexttext
FROM (
    SELECT     a.id, a.text, @rn:=@rn+1 AS rownum 
    FROM       tbl a
    CROSS JOIN (SELECT @rn:=1) rn_init
    ORDER BY   a.id
) a
LEFT JOIN (
    SELECT     a.id, a.text, @rn2:=@rn2+1 AS rownum 
    FROM       tbl a
    CROSS JOIN (SELECT @rn2:=0) rn_init
    ORDER BY   a.id
) b ON a.rownum = b.rownum
WHERE a.text LIKE '%X%' 
```

产量：

```
ID     | TEXT                   | NEXTID   | NEXTTEXT
2      | Contains %X% - Delete  | 3        | This row should also be deleted
5      | Contains %X% - Delete  | 6        | This row should also be deleted
257    | Contains %X% - Delete  | 3434     | This row should also be deleted
4000   | Contains %X% - Delete  | 4005     | Contains %X% - Delete
4005   | Contains %X% - Delete  | 6000     | Contains %X% - Delete
6000   | Contains %X% - Delete  | 6534     | This row should also be deleted 
```

然后，我们`JOIN`-`DELETE`整个语句的条件是它删除 ID 为“子选择”`ID`或`NEXTID`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T04:37:15.353

没有合理的方法可以在单个查询中执行此操作。（这可能是*可能的*，但是您最终不得不使用的查询将非常复杂，并且几乎肯定不能移植到其他 SQL 引擎。）

使用您在问题中描述的 SELECT-then-DELETE 方法。

# css - 使用悬停选择器显示/隐藏 html 元素

> ID：15457523
> 
> 赞同：0
> 
> 时间：2013-03-17T04:28:37.020
> 
> 标签：css, hover

我想仅使用 css 在鼠标悬停时隐藏 div 元素。

```
<div>Stuff shown on hover</div>

div {
    display: block;
    width:100px;
    height:100px;
    border: solid black;
}

div:hover {
    display: none;
} 
```

为什么这不起作用？

如果我想改变 - 例如 - 背景而不是它工作得很好：

```
div:hover {
    background-color: red;
} 
```

无法隐藏/显示我正在应用悬停选择器的相同元素？

[http://jsfiddle.net/link01/TknA8/](http://jsfiddle.net/link01/TknA8/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T04:36:25.713

> 为什么这不起作用？

这不是很明显吗……？

显示 Div 元素。

你将鼠标移到它上面——这使它处于它的`:hover`状态。

你说对于它的`:hover`状态，元素将从渲染的输出中完全删除。

由于它现在“不再存在”，所以鼠标仍然不能在它上面。

鼠标不再在它上面意味着，元素不再处于`:hover`状态。

当元素不在其`:hover`状态时，您的 CSS 对元素又说了什么？

啊，是的，`display:block`。

OK，浏览器再次渲染元素。

嘿，那是什么，那个该死的老鼠在它上面？

让我们看看，这意味着它必须再次删除......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T04:37:25.833

当一个元素的显示设置为无时，它不存在于布局中，因此无法与鼠标交互。

只需在它周围添加一个包装器：

```
<div class="wrapper">
    <div class="hidden">Stuff shown on hover</div>
</div> 
```

[http://jsfiddle.net/cecAn/](http://jsfiddle.net/cecAn/)

# c# - 将 C# 方法转换为 Java

> ID：15457526
> 
> 赞同：2
> 
> 时间：2013-03-17T04:29:02.637
> 
> 标签：c#, java

我希望将以下 C# 代码转换为 Java。我很难想出一个等价物。

## 工作 C# 代码：

```
private ushort ConvertBytes(byte a, byte b, bool flip)
{
    byte[] buffer = new byte[] { a, b };
    if (!flip)
    {
        return BitConverter.ToUInt16(buffer, 0);
    }
    ushort num = BitConverter.ToUInt16(buffer, 0);
    //this.Weight = num;
    int xy = 0x3720;
    int num2 = 0x3720 - num;
    if (num2 > -1)
    {
        return Convert.ToUInt16(num2);
    }
    return 1;
} 
```

这是不起作用的Java代码。最大的挑战是“BitConverter.ToInt16(buffer,0)。我如何获得与工作 C# 方法相等的 Java。

## 错误的 Java 代码：

```
private short ConvertBytes(byte a, byte b, boolean flip){
    byte[] buffer = new byte[] { a, b };
    if (!flip){
        return  (short) ((a << 8) | (b & 0xFF));
    }
    short num = (short) ((a << 8) | (b & 0xFF));
    //this.Weight = num;
    int num2 = 0x3720 - num;
    if (num2 > -1){
        return (short)num2;
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T04:43:10.493

```
private short ConvertBytes(byte a, byte b, boolean flip){

    ByteBuffer byteBuffer = ByteBuffer.allocate(2);
    byteBuffer.order(ByteOrder.LITTLE_ENDIAN);
    byteBuffer.put(a);
    byteBuffer.put(b);
    short num = byteBuffer.getShort(0);

    //this.Weight = num;
    int num2 = 0x3720 - num;
    if (num2 > -1){
        return (short)num2;
    }
    return 1;
} 
```

# php - 动态 sql - 无法弄清楚为什么我的代码没有回显

> ID：15457529
> 
> 赞同：1
> 
> 时间：2013-03-17T04:29:46.440
> 
> 标签：php, sql, ms-access, dynamic

我想知道是否可以得到一些帮助并向我展示我在这里做错了什么，因为我的代码不会回显。结果没有回显，它只是一个空白页。我现在真的很沮丧，我的教授根本没有帮助，也不会告诉我我做错了什么。我基本上创建了一个搜索框，我可以在其中输入 NBA 球队名称，它会通过从 MS Access 数据库中提取球队记录来显示球队记录。

我还输入了一个打印命令以查看我做错了什么，如果我在搜索框中输入西部会议球队名称（如马刺队），这就是我得到的结果：**SELECT teamRECORDS FROM nbateam WHERE teamNBA='spurs'**

如果有人能帮助我，让我看到光明，我将不胜感激！

```
table: nbateam
Fields: ID, teamNBA, teamRECORDS

**<--nba.html-->**

<form action="nbadetails.php" method="post">

<h2>Current Western Conference NBA Team Records</h2>

<h4>Enter the NBA team name:</h4>
<input type="text" name="teamName">
<br>
<input type="submit" value="Go!">
</form>

**<--nbadetails.php-->**

<?php
$teamname=filter_input (INPUT_POST, "teamName");

$conn = new COM("ADODB.Connection") or die("Cannot start ADO"); 
$connString= "Provider=Microsoft.Jet.OLEDB.4.0;Data      Source=e:\\server\\kl7\\Database\\nbateam.mdb";

$conn->Open($connString);

$selectCommand="SELECT teamRECORDS FROM nbateam WHERE teamNBA='".$teamname."'";

print $selectCommand;

$rs=$conn->Execute($selectCommand);

if (!$rs->EOF)
{
$teamNBA=$rs->Fields("teamNBA");
echo "Results: $teamNBA";
}
else 
{
echo "You did not enter a western conference NBA team name.";

$rs->Close;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:57:45.177

您没有`teamNBA`在选择查询中进行选择。

```
$selectCommand="SELECT teamRECORDS, teamNBA FROM nbateam WHERE teamNBA='$teamname'"; 
```

如果上述方法不起作用，您可能需要在连接字符串中输入用户 ID 和密码。

```
$connString= "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=e:\\server\\kl7\\Database\\nbateam.mdb"; User    ID=userid;Password=password; 
```

# html - 无法定义可点击区域高度

> ID：15457530
> 
> 赞同：0
> 
> 时间：2013-03-17T04:29:57.520
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:37:35.213

由于您将图像设置在锚点内`height: 0px; width: 0px;`，因此锚点需要定义测量值，以弥补缺少提供所述测量值的子项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:40:48.093

像这样的东西应该工作：

```
#dprenav a {
    height: 50px;
} 
```

# c++ - sfml 编译错误：NULL 未在此范围内声明

> ID：15457533
> 
> 赞同：3
> 
> 时间：2013-03-17T04:30:22.027
> 
> 标签：c++, linux, compiler-errors, sfml

我正在运行 Linux Mint。版本信息如下：

```
$ cat /etc/*-release
DISTRIB_ID=LinuxMint
DISTRIB_RELEASE=12
DISTRIB_CODENAME=lisa
DISTRIB_DESCRIPTION="Linux Mint 12 Lisa" 
```

我正在尝试为使用 sfml 的 C++ 程序编译和链接文件。尝试编译文件时，出现以下错误：

```
$g++ -c lineTest.cpp Rasterizer.cpp simpleCanvas.cpp
In file included from /usr/local/include/SFML/System/Resource.hpp:211:0,
             from /usr/local/include/SFML/Graphics/Image.hpp:31,
             from simpleCanvas.h:13,
             from simpleCanvas.cpp:9:
/usr/local/include/SFML/System/ResourcePtr.inl: 
In constructor ‘sf::ResourcePtr< <template-parameter-1-1> >::ResourcePtr()’:
/usr/local/include/SFML/System/ResourcePtr.inl:31:12: 
error: ‘NULL’ was not declared in this scope
/usr/local/include/SFML/System/ResourcePtr.inl: In member function ‘void sf::ResourcePtr< <template-parameter-1-1> >::OnResourceDestroyed()’:
/usr/local/include/SFML/System/ResourcePtr.inl:148:18: error: ‘NULL’ was not declared in this scope 
```

在文件 ResourcePtr.inl 中使用“NULL”似乎有问题。就个人而言，我通常会避免使用这个关键字，而是使用 0，但是当它用于我自己甚至没有编写的包文件中时，我该怎么办？此外，如果没有我的管理员权限，我将无法编辑该文件以更正它，但我使用 sudo 编辑它并添加了`#include <cstddef>`. 这为一系列类似问题打开了闸门，其中“未定义”或关键字或类型无法识别（列表太长，我无法在此处发布）。这似乎表明库中缺少某些内容。最初设置库时我遇到了很多麻烦，所以我意识到我可能没有正确完成。你可以在[这个问题中看到它here](https://stackoverflow.com/questions/15455914/cant-run-a-program-that-uses-sfml-in-linux). 有谁知道我做错了什么和/或我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:28:21.933

此代码无法编译并显示您描述的错误：

```
#include <SFML/Graphics/Image.hpp>
int main()
{
    return 0;
} 
```

输出是：

```
In file included from ./include/SFML/System/Resource.hpp:211:0,
                 from ./include/SFML/Graphics/Image.hpp:31,
                 from test.cpp:1:
./include/SFML/System/ResourcePtr.inl: In constructor ‘sf::ResourcePtr< <template-parameter-1-1> >::ResourcePtr()’:
./include/SFML/System/ResourcePtr.inl:31:12: error: ‘NULL’ was not declared in this scope
./include/SFML/System/ResourcePtr.inl: In member function ‘void sf::ResourcePtr< <template-parameter-1-1> >::OnResourceDestroyed()’:
./include/SFML/System/ResourcePtr.inl:148:18: error: ‘NULL’ was not declared in this scope 
```

幸运的是，修复很简单，这很有效：

```
#include <SFML/System.hpp>
#include <SFML/Graphics/Image.hpp>
int main()
{
    return 0;
} 
```

看起来这也有效：

```
#include <cstddef>
#include <SFML/Graphics/Image.hpp>
int main()
{
    return 0;
} 
```

在使用`NULL`. 只要你在他们的任何标题之前包含它，它就可以工作。

正如您自己所说，使用`NULL`可能有点令人困惑，因为它本身就是扩展为`0`或的宏`(void*)0`。新标准通过引入`nullptr`强类型来解决这个问题。在 ResourcePtr.inl 的第 31 和 148 行更改`NULL`for`nullptr`可能是解决问题的最佳方法。

# c# - 制作导航 3D 立方体

> ID：15457536
> 
> 赞同：0
> 
> 时间：2013-03-17T04:31:04.910
> 
> 标签：c#, 3d, cube

我正在尝试在 Microsoft Visual Studio 中制作一个 3D 立方体，而我想让它做的是让您用鼠标拖动它。（例如，按住鼠标左键抓住立方体，然后在屏幕上拖动以将其旋转 3D）

这可能与c#有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:40:57.653

这很容易在`WPF` [WPF 3D 简介中](http://wpftutorial.net/Behaviors.html)实现，并使用[Behaviors](http://wpftutorial.net/Behaviors.html)使其可拖动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:46:35.890

您可以在 WPF 中使用转换，或在 C# 中使用 opengl，请参阅这篇[文章](http://xinyustudio.wordpress.com/2008/12/01/using-opengl-in-c-taoframework/)。

# c - 在 C 中，处理多个类似“列表”的参数的典型方法是什么？

> ID：15457537
> 
> 赞同：2
> 
> 时间：2013-03-17T04:31:11.147
> 
> 标签：c, unix, command-line-arguments, filenames

假设我有一个名为“combine”的程序，它输入“red”、“green”和“blue”类型的文件来生成输出文件（比如说“color.jpg”）......但是每种类型的*数量*是任意的。我们还假设除了通过用户如何分类文件之外，没有办法确定文件的类型。在这种情况下，人们通常会怎么做？

例如，在命令行上，一些方法可能是：

```
command red1,red2,red3 green1,green2 blue1 color.jpg 
```

如果逗号可以出现在文件名中，这种逗号方法就会失效。这是我最喜欢的方法。另一个想法是

```
command "red1 red2 red3" "green1 green2" "blue1" color.jpg 
```

但这种方法也有名称中的空格问题。

我还可以要求包含列出每种类型文件的 ASCII 文件：

```
command redlist greenlist bluelist color.jpg 
```

但这需要携带额外的文件。

进一步的想法？有没有标准的 LINUX 方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T04:35:55.410

标准方法是这样的：

```
command --red red1.jpg --red red2.jpg --blue blue1.jpg 
```

短选项：

```
command -r red1.jpg -r red2.jpg -b blue1.jpg 
```

使用 bash 速记：

```
command -r={red1,red2}.jpg -b blue1.jpg 
```

（上面的内容被 shell 扩展，所以它看起来像之前的调用。）

以这种方式做事避免了诸如“文件名中没有逗号”之类的任意限制，并且还使您的程序与标准 *nix 实用程序等更具有互操作性`xargs`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T04:44:14.740

另一种方式是接受：

```
command -r redfile1 redfile2 -b bluefile1 blue2 blue2 -g green1 
```

以便：

```
command -r red* -b blue* -g green* 
```

是可能的。

# api - 使用 Azure ACS 验证从第三方应用程序对我的 Web API 的调用

> ID：15457538
> 
> 赞同：0
> 
> 时间：2013-03-17T04:31:21.693
> 
> 标签：api, azure, web, identity, acs

我正在使用 Azure ACS 对我的 Web API 项目进行身份验证，它与 Google 和 Live 等 IP 配合得很好。我要求允许第三方（合作伙伴）针对我的 API 进行开发，但我不确定如何对其进行身份验证。我想我可能必须编写一个自定义 STS 并管理每个合作伙伴的用户名和密码。在这种情况下，合作伙伴将通过用户名/密码从我的自定义 STS 请求访问令牌，然后使用该令牌访问我的 API。我还看到 Azure ACS 具有服务标识，我想知道是否可以使用它们来对我的 API 进行身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T07:13:11.413

是的你可以。

*   通过 x509 证书创建具有身份验证的服务标识
*   使用将服务身份名称映射到选定声明的规则创建规则组
*   在依赖方应用程序中的应用程序中，检查身份验证设置中的新规则组。

# java - Java Math.Pow 方法

> ID：15457547
> 
> 赞同：2
> 
> 时间：2013-03-17T04:32:58.340
> 
> 标签：java, pow

```
monPay = (amtFin * amtI)/((1-(1+amtI)*Math.pow(-n,-n))); 
```

我正在使用此代码，但它没有正确计算 Math.pow(-n,-n)。似乎 Math.pow(-n,-n) 正在计算为 0.0。所有变量都有类型`double`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:54:48.377

看起来您正在尝试根据本金等计算每月还款额。但是，您的公式是错误的：`(1+amtI)*Math.pow(-n,-n)`应该是`Math.pow(1+amtI,-n)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T08:50:33.363

发生的情况是 的值`pow(-n,-n)`太低而无法表示为 a `double`（绝对值的最小非零双精度约为 10E-323）。

您可以改用[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)，但请注意计算`BigDecimal`速度较慢。

# java - 在 java 中从 main 中调用不同的方法和错误：找不到符号

> ID：15457550
> 
> 赞同：0
> 
> 时间：2013-03-17T04:33:48.593
> 
> 标签：java

我有这个代码： http: [//paste.ubuntu.com/5621366/](http://paste.ubuntu.com/5621366/)

但是在第 56 行，我试图调用 keyPressed 方法，但是当我尝试它时，我收到了这个错误：

```
error: cannot find symbol 
```

这是 java 编译器的一个非常普遍的错误，所以我不确定如何解决它。

仅供参考：我是 Java 的初学者。

如果我删除“新”，我也会收到此错误，我需要导入一些东西吗？：

```
move.java:56: error: method keyPressed in class GraphicsProgram cannot be applie
d to given types;
                keyPressed();
                ^
  required: KeyEvent
  found: no arguments
  reason: actual and formal argument lists differ in length
1 error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:38:50.763

你在做`new keyPressed();`。取出`new`，唯一可以合法遵循`new`的是构造函数。

为了使方块响应按键而移动，您需要更改一些内容。首先，您的程序当前没有实现该`KeyListener`接口。要实现这个类，代码如下：

```
class GraphicsProgram extends Canvas implements KeyListener { 
```

其次，由于你的类现在实现了一个接口，你需要重写它的**所有**抽象方法。即使您只使用`keyPressed`，您也需要重写方法`keyReleased`并`keyTyped`让程序编译。由于您不使用它们，因此可以将它们留空。最后，您必须将图形窗口设置为自身的动作侦听器。这可以使用以下`addActionListener`方法完成：

```
GP.addActionLisener( GP ); 
```

# c++ - 如何在 C++ 的基本成员初始化部分初始化 std::map？

> ID：15457553
> 
> 赞同：1
> 
> 时间：2013-03-17T04:34:19.043
> 
> 标签：c++, initialization-list

基本上，我有一个映射作为类中的成员变量，我想在基本成员初始化部分中使用键、值对进行初始化。

```
Parser::Parser()
    :operations() //the dictionary
{

} 
```

我不太确定这样做的语法是什么。我在想类似的事情：

```
Parser::Parser()
    :operations({"hello","goodbye"},{"foo","bar"}) 
{

} 
```

但这不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:42:04.813

您缺少初始化列表：

```
Parser::Parser()
    :operations({{"hello","goodbye"},{"foo","bar"}}) 
{

} 
```

这也应该有效：

```
Parser::Parser()
    :operations{{"hello","goodbye"},{"foo","bar"}}
{

} 
```

演示[在这里](http://ideone.com/ouA1Aj)。

*编辑*：这是一个应该在VS下工作的替代方案：

```
struct a {
    std::map<int, int> x;

    static std::map<int, int> make_map() {
        std::map<int, int> some_map = {{1,2}, {3,4}};
        return some_map;
    }

    a() : x(make_map()) {}
}; 
```

# youtube - 如何对 YouTube 视频进行后期处理以获得简单的视频效果？

> ID：15457559
> 
> 赞同：0
> 
> 时间：2013-03-17T04:34:45.317
> 
> 标签：youtube, youtube-api, post-processing, visual-effects

我正在尝试在任何 YouTube 视频上实现“镜像”播放（视频中的任何惯用右手的人在镜像视频中似乎都是左撇子），但我似乎找不到任何用于操作视频的资源，一旦记录和上传。我希望有一个简单的 YouTube 播放器 API 级别访问基本的后处理，但在挖掘了所有三个提供的 API（iframe、JavaScript、ActionScript）之后，看起来我很不走运。

我正在研究检查 FLV 对象的网络数据包，希望手动反转图像，但后来我想我可能会使用它作为最后的手段。您将如何进行像镜像播放这样的简单后处理？API中是否有我遗漏的东西？我可以尝试的 API 之外的东西？

欢迎任何和所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T15:11:42.687

可以用css沿y轴旋转元素，然后转180度左右吗？

```
<div id="controlDiv"><iframe id="yt" width="100%" height="100%"></iframe></div>

#controlDiv{
   transform: rotateY(180deg); 
   -webkit-transform: rotateY(180deg); 
   -moz-transform: rotateY(180deg); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:47:01.360

您可以使用[https://www.youtube.com/editor](https://www.youtube.com/editor)

目前还没有这方面的 API，但请关注[YouTube 开发者博客](http://apiblog.youtube.com/)和[YouTube 开发者 G+ 页面](https://plus.google.com/u/1/b/100270142261733078201/+YouTubeDev/)以获取公告。

# java - 使用 HashMap 时出现问题

> ID：15457560
> 
> 赞同：0
> 
> 时间：2013-03-17T04:35:06.747
> 
> 标签：java, hashmap

我试图将一个字符串转换为一个数字数组，所以我定义了一个哈希映射来完成这项工作。这是我的代码：

```
import java.util.*;

public class DES {

static HashMap<String, Integer> numMap = new HashMap<String, Integer>();

private static void init(){
    numMap.put("a", 0);
    numMap.put("b", 1);
    numMap.put("c", 2);
    numMap.put("d", 3);
    numMap.put("e", 4);
    numMap.put("f", 5);
    numMap.put("g", 6);
    numMap.put("h", 7);
    numMap.put("i", 8);
    numMap.put("j", 9);
    numMap.put("k", 10);
    numMap.put("l", 11);
    numMap.put("m", 12);
    numMap.put("n", 13);
    numMap.put("o", 14);
    numMap.put("p", 15);
    numMap.put("q", 16);
    numMap.put("r", 17);
    numMap.put("s", 18);
    numMap.put("t", 29);
    numMap.put("u", 20);
    numMap.put("v", 21);
    numMap.put("w", 22);
    numMap.put("x", 23);
    numMap.put("y", 24);
    numMap.put("z", 25);
    numMap.put(" ", 26);
    numMap.put(".", 27);
    numMap.put(",", 28);
    numMap.put("?", 29);
    numMap.put("(", 30);
    numMap.put(")", 31);

}

public static void main(String[] args) {

    init();

    String plaintext = "how do you like computer science";
    String[] splittext=plaintext.split("");
    int[] numtext=new int[splittext.length];
    for(int i=0;i<splittext.length;i++)
    {
        numtext[i]=numMap.get(splittext[i]);
        System.out.println(numtext[i]);
    }
}

} 
```

运行时出现“nullpointerexception”，但我猜哈希映射没问题，因为我尝试了类似的东西

```
 numtext[i]=numMap.get("z"); 
```

它工作正常。所以也许我的 splittext 数组有一些问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T04:44:30.257

`Arrays.toString(splittext)`：

```
[, h, o, w,  , d, o,  , y, o, u,  , l, i, k, e,  , c, o, m, p, u, t, e, r,  , s, c, i, e, n, c, e, ] 
```

的第一个元素是空字符串，它在 your和on`splittext`中没有映射。`HashMap``NullPointerException``get()`

您可以通过跳过`splittext`. `String#split()`有一种方法可以避免尾随空格，但不能避免前导空格，所以我认为你不能以任何其他方式做到这一点。

更好的解决方案是使用`String#toCharArray()`比在空字符串上拆分更好的方法:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T04:48:46.503

`String[] splittext = plaintext.split("");`创建一个空字符串数组

```
[, h, o, w,  , d, o,  , y, o, u,  , l, i, k, e,  , c, o, m, p, u, t, e, r,  , s, c, i, e, n, c, e] 
```

和 numMap.get(""); 返回空值。您可以在地图中添加一个带有 key="" 的条目来解决问题

```
 numMap.put("", 32); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T04:52:57.253

由于您只是在每个字符上拆分字符串，我会考虑将字符存储在地图中，使用`plaintext.toCharArray()`，然后循环遍历结果数组，查找地图中的每个字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T05:22:19.510

您尝试使用条目字符串模式 ("") 拆分字符串，结果字符串没有被拆分，并且您在尝试访问拆分字符串（不存在）时得到 NullPointerException。尝试使用 ("\s") 拆分字符串，这会将字符串拆分为空格。

希望这可以帮助。

# jquery - 取消选中 td 中的最后一个复选框以启用其他复选框

> ID：15457561
> 
> 赞同：0
> 
> 时间：2013-03-17T04:35:09.577
> 
> 标签：jquery, checkbox

如何使这项工作？当 Bar 未选中时，其他输入复选框删除在每个 td 中禁用？我是 Jquery 的初学者 :)

原始代码取自 [原始代码](https://stackoverflow.com/questions/11240672/jquery-check-and-disable-checkbox-on-checking-another-checkbox)

```
<table border="1" id="re">
    <tr>
<td class="class1"><input type=checkbox  disabled="disabled" value="ss"/>ss</td>
<td class="class1"><input type=checkbox  disabled="disabled" value="aa"/>aa</td>
<td class="class1"><input type=checkbox  disabled="disabled" value="dd"/>dd</td><td class="class1"><input type=checkbox checked="checked" value="bar"/>Bar</td></tr>

    <tr>
<td class="class1">
    <input type=checkbox  disabled="disabled" value="ss"/>ss</td><td class="class1">
    <input type=checkbox  disabled="disabled" value="aa"/>aa</td><td class="class1">
    <input type=checkbox  disabled="disabled" value="dd"/>dd</td><td class="class1">
         <input type=checkbox checked="checked" value="bar"/>Bar
        </td></tr>
     <tr>
<td class="class1">
    <input type=checkbox  disabled="disabled" value="ss"/>ss</td><td class="class1">
    <input type=checkbox  disabled="disabled" value="aa"/>aa</td><td class="class1">
    <input type=checkbox  disabled="disabled" value="dd"/>dd</td><td class="class1">
         <input type=checkbox checked="checked" value="bar"/>Bar
        </td></tr>
    </table>

$('.class1 input:last-of-type').live('change', function () {

var n = $(this).siblings('input:checkbox');
if (!$(this).attr('checked')) {
    n.attr('disabled',false);

} else {

    n.attr('disabled', true); 
} 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T04:47:45.837

尝试类似的东西

```
$('table').on('click', 'input[value="bar"]', function(e){
    var $this = $(this);
    var checked = $this.is(':checked');
    var others = $this.closest('tr').find('input:checkbox').not(this).prop('disabled', checked)
    if(checked){
        others.prop('checked', false);
    }
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/Ba7xD/)

# node.js - HTTPS 与 nodejs 并连接

> ID：15457562
> 
> 赞同：9
> 
> 时间：2013-03-17T04:35:25.043
> 
> 标签：node.js, https, connect

我目前正在使用带有连接的 nodejs 作为我的 HTTP 服务器。无论如何用连接激活HTTPS？我找不到任何关于它的文档。谢谢。

赫里

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-17T06:32:57.177

不用创建`http`服务器，而是使用`https`服务器进行连接：

```
var fs = require('fs');
var connect = require('connect')
  //, http = require('http'); Use https server instead
  , https = require('https');

var options = {
    key:    fs.readFileSync('ssl/server.key'),
    cert:   fs.readFileSync('ssl/server.crt'),
    ca:     fs.readFileSync('ssl/ca.crt')
};
var app = connect();
https.createServer(options,app).listen(3000); 
```

[在此处](http://nodejs.org/api/tls.html#tls_tls_createserver_options_secureconnectionlistener)查看`https` [此处](http://nodejs.org/api/https.html#https_https_createserver_options_requestlistener)和`tls`服务器的文档（https 是 tls 的子类）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T06:32:25.520

来自[http://tjholowaychuk.com/post/18418627138/connect-2-0](http://tjholowaychuk.com/post/18418627138/connect-2-0)

> HTTP 和 HTTPS
> 
> 以前 connect.Server 继承自 Node 的核心 net.Server，这使得很难为您的应用程序同时提供 HTTP 和 HTTPS。connect()（以前的 connect.createServer()）的结果现在只是一个 JavaScript 函数。这意味着您可以省略对 app.listen() 的调用，而只需将 app 传递给 Node net.Server，如下所示：
> 
> ```
> var connect = require('connect')
>   , http = require('http')
>   , https = require('https');
> 
> var app = connect()
>   .use(connect.logger('dev'))
>   .use(connect.static('public'))
>   .use(function(req, res){
>     res.end('hello world\n');
>   })
> 
> http.createServer(app).listen(80);
> https.createServer(tlsOptions, app).listen(443); 
> ```

express 3.0 也是如此，因为它继承了 connect 2.0

# photoshop - 在 Photoshop 中创建生长阶梯线

> ID：15457567
> 
> 赞同：-3
> 
> 时间：2013-03-17T04:36:03.243
> 
> 标签：photoshop, adobe-illustrator

我正在 Photoshop 中设计徽标，试图从显示增长的单行创建越来越多的步骤。它看起来和**楼梯台阶**一样，我使用了铅笔工具，但创建的对象看起来不太好。

请帮忙.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:51:28.637

*这些步骤适用于 Illustrator* 您可以尝试混合工具。在形状、大小和位置上创建您的开始和结束对象。选择这两个形状并转到对象>混合>制作。默认情况下，它可能会执行太多或太少的步骤。通过转到对象>混合>混合选项并将其从平滑颜色更改为指定步骤来解决此问题。您可以在此处指定要创建的步骤数。一旦您对结果感到满意，请转到对象>扩展，它将使其成为可编辑的对象。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:40:36.693

它真的很简单。选择钢笔工具并单击，直到您对自己的形状感到满意。您可以通过按住 ctrl + 鼠标单击来移动锚点。我认为你不需要曲线的步骤。当您对此感到满意时，右键单击并选择笔划或进行选择。:)

# java - Windows 是否会干扰 Java 的 Socket.setSOTimeout？

> ID：15457569
> 
> 赞同：2
> 
> 时间：2013-03-17T04:36:08.703
> 
> 标签：java, sockets, connection-timeout, netbios

我在 [这里读到](http://mindprod.com/jgloss/socket.html#TIMEOUTS)

> 连接时，JVM（Java 虚拟机）尝试将主机名解析为 IP/端口。Windows 尝试在 UDP（用户数据报协议）端口 137 上进行 netbios ns 查询，超时时间为 1.5 秒，忽略任何 ICMP（Internet 控制消息协议）端口无法访问的数据包，然后再重复两次，总计为 4.5 秒。我建议将关键主机名放在您的 HOSTS 文件中，以确保快速解决它们。另一种可能性是完全关闭 NETBIOS 并在您的 LAN（局域网）上运行纯 TCP/IP。

这目前仍然是一个问题吗？因为我正在研究心跳传感器，我很好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T05:36:09.257

您的引用不是规范性参考，只是另一个爱好网站，在这种情况下它是完全错误的。这些都与 setSoTimeout() 无关。他完全混淆了名称解析时间、连接时间和读取时间。setSoTimeout() 设置读取超时，并且不受他所描述的恶作剧的影响，无论是否准确，正如他所说，这甚至不会在连接时发生：它们会在名称解析时发生。

让我向你保证，这远不是在那个网站上发现的唯一混乱，甚至在那个页面上。十年前我告诉他这个页面上的几个错误，还有很多其他的，直到今天都没有更正，这让你对网站的准确性、最新性和内容有所了解审查机制。他唯一的反应是对我加了一句粗鲁的话。作为同行评审机制没有说服力。

坚持权威来源。

# c# - 数据行错误，集合已修改；枚举操作可能无法执行

> ID：15457571
> 
> 赞同：11
> 
> 时间：2013-03-17T04:36:33.513
> 
> 标签：c#, foreach, datarow

我有 for-each 循环，其中更新了数据行，因此*修改了异常 Collection；枚举操作可能不会执行*。有什么办法解决吗？我见过 To-List 函数，但它不适用于数据行，这是我的代码：

```
foreach (DataRow row in dataTable.Rows) {
  temp = row[0].ToString();
  foreach (DataRow rows in dataTable.Rows) {
    if (temp == rows[0].ToString()) {
      tempdatatable.Rows.Add(row[0],row[1]);
      dataTable.Rows.Remove(rows);
      //Update happens here
    }
    tempdatatable.DefaultView.Sort = "gscitations DESC";
    dataGridView1.DataSource = tempdatatable;
  }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T04:58:41.340

您不能在使用 Enumerator 枚举集合时修改集合，这发生在`foreach`语句的幕后（[MDSN 链接](http://msdn.microsoft.com/en-us/library/aa664754%28v=vs.71%29.aspx)）。

解决此问题的一种可能方法是在第一次枚举中收集要删除的行，然后在单独的循环中删除它们，如下所示：

```
var rowsToDelete = new List<DataRow>();

foreach (DataRow row in dataTable.Rows)
     {
         temp = row[0].ToString();
         foreach (DataRow rows in dataTable.Rows)
         {
             if (temp == rows[0].ToString())
             {
                 tempdatatable.Rows.Add(row[0],row[1]);
                 rowsToDelete.Add(rows);
             }
             tempdatatable.DefaultView.Sort = "gscitations DESC";
             dataGridView1.DataSource = tempdatatable;
         }
     }

rowsToDelete.ForEach( x => dataTable.Rows.Remove(x) ); 
```

您也可以将`foreach`循环替换为`for`，但您需要在删除元素时正确处理当前索引做额外的工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T04:59:29.783

尝试这个 ：

```
for (int i = 0; i < dataTable.Rows.Count; i++)
{
    var tempRow = dataTable.Rows[i];
    var temp = dataTable.Rows[i][0];
    for (int j = 0; j < dataTable.Rows.Count; j++)
    {
        DataRow rows = dataTable.Rows[j];
        if (temp == rows[0].ToString())
        {
            tempdatatable.Rows.Add(tempRow[0], tempRow[1]);
            dataTable.Rows.Remove(rows);      //Update happen here
        }
        tempdatatable.DefaultView.Sort = "gscitations DESC";
        dataGridView1.DataSource = tempdatatable;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T05:12:56.933

我会说你应该创建一个单独的条目表，而不是调用 datatable.Rows.Remove(rows)，将行“行”添加到另一个表中。然后，每当行或行迭代时，您运行一个 if 语句来检查它是否被“删除”，即在已删除行的列表中。枚举结束后，您可以从表中永久删除这些行。

**编辑：**

下面是代码实现：

```
DataTable duplicates = dataTable;
duplicates.Rows.Clear(); /* Produces an empty duplicate of the 
dataTable table to put the duplicates in */
foreach (DataRow row in dataTable.Rows)
{
     if (!duplicates.Rows.Contains(row))
     {    
         temp = row[0].ToString();
         foreach (DataRow rows in dataTable.Rows)
         {
             if (temp == rows[0].ToString()&&!duplicates.Rows.Contains(rows)) //need unique key
             {
                 tempdatatable.Rows.Add(row[0],row[1]);

             }
             tempdatatable.DefaultView.Sort = "gscitations DESC";
             dataGridView1.DataSource = tempdatatable;
         }
    }
}
foreach (DataRow row in duplicates.Rows)
{
    dataTable.Rows.Remove(row);
} 
```

如果您没有唯一键，可以尝试切换`!duplicates.Rows.Contains(/*specific row*/)`为`duplicates.Rows.IndexOf(/*specific row*/)>0`. 这应该提供足够的替代品。

# ruby-on-rails - rails3 中的 PDFkit 总是生成没有样式的 PDF

> ID：15457580
> 
> 赞同：1
> 
> 时间：2013-03-17T04:38:27.777
> 
> 标签：ruby-on-rails, pdfkit

我正在尝试使用 PDFKit 生成 PDF。在 url 后添加“.pdf”后，它可以工作并获得一个 PDF 页面，但它总是看起来像一个只有文本内容的默认页面。我无法设置 PDF 页面的样式。

我在“views\layouts\application.html.erb”中有这一行

```
 <%= stylesheet_link_tag    "application", :media => "all" %> 
```

在“assets\stylesheets\application.css”中，我有

```
@media print {
body{
    font-size:40px;}

#container{
    background:black;
    padding:20px;
    font-size:200%;
    }
} 
```

但它没有用。pdf 页面仍然是默认样式。

你们能帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:16:15.053

您是否将 PDFKit 设置为使用打印媒体样式？

```
config.middleware.use "PDFKit::Middleware", :print_media_type => true 
```

# scrapy - 使用 Scrapy 减少盗版

> ID：15457581
> 
> 赞同：1
> 
> 时间：2013-03-17T04:38:36.113
> 
> 标签：scrapy, web-crawler

我是使用 Scrapy 的新手，我对 Python 语言知之甚少。到目前为止，我已经安装了 Scrapy 并学习了一些教程。在那之后，我一直在尝试找到一种方法来搜索许多网站以获取相同的数据。我的目标是使用 Scrapy 找到指向“帖子”的链接和一些搜索条件的链接。例如，我想搜索站点 A、B 和 C。每个站点，我想看看他们是否有关于应用名称 X、Y 和 Z 的“帖子”。如果他们有任何“帖子”在X、Y、Z。我希望它能够获取该帖子的链接。如果它会更容易......它可以扫描每个帖子以获取我们的公司名称。它会搜索每个“帖子”的内容而不是 X、Y、Z，以查找 [示例公司名称]。我这样做的原因是，创建的 JSON 只包含指向“帖子”的链接

我在 Ubuntu 10.12 上，我已经能够抓取我们想要的网站，但我无法将 JSON 缩小到所需的信息。所以目前我们仍然需要通过数百个链接，这是我们想要通过这样做来避免的。我们获得如此多链接的原因是因为我找到的所有教程都是用于抓取特定的 HTML 标签。我希望它搜索标签以查看它是否包含我们的应用程序标题或包名称的任何部分。

像这样，它显示帖子信息，但现在我们必须从 json 中挑选出链接。节省时间，但仍然不是我们真正想要的。我认为部分原因是我没有正确引用或调用它。请给我任何你能提供的帮助。我花了几个小时试图弄清楚这一点。

```
posts = hxs.select("//div[@class='post']")
        items = []
        for post in posts:
            item = ScrapySampleItem()
            item["title"] = post.select("div[@class='bodytext']/h2/a/text()").extract()
            item["link"] = post.select("div[@class='bodytext']/h2/a/@href").extract()
            item["content"] = post.select("div[@class='bodytext']/p/text()").extract()
            items.append(item)
        for item in items:
            yield item 
```

我想用它来减少我们的 Android 应用程序的盗版。如果我可以让它出去并搜索我们想要的盗版网站，然后我可以通过电子邮件向网站或托管公司发送我们想要删除的所有链接。根据版权法，他们必须遵守，但他们要求我们将他们链接到他们侵犯的每个“帖子”，这就是为什么应用程序开发人员通常不会搞砸这类事情的原因。他们有数百个应用程序，因此找到指向您的应用程序的链接需要花费大量时间。

感谢您提前提供的任何帮助。从长远来看，您将帮助许多应用程序开发人员！

格雷迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:56:13.477

您的 XPath 选择器是绝对的。它们必须相对于前一个选择器（`.`）

```
posts = hxs.select('//div[@class='post']')

for post in posts:
    item = ScrapySampleItem()
    item['title'] = post.select('.//div[@class="bodytext"]/h2/a/text()').extract()
    item['link'] = post.select('.//div[@class="bodytext"]/h2/a/@href').extract()
    item['content'] = post.select('.//div[@class="bodytext"]/p/text()').extract()

    yield item 
```

# sockets - 在 IP 级别，“保持连接打开”是否具有特定的技术含义——例如存储 IP 映射条目的中间网关？

> ID：15457585
> 
> 赞同：2
> 
> 时间：2013-03-17T04:39:08.497
> 
> 标签：sockets, networking, network-programming

我是一位经验丰富的 C++ 套接字级程序员，但我不明白当**套接字连接保持打开状态**`close`时 IP 网络级别会发生什么（与通过从代码中调用套接字上的函数关闭）。

我研究了 IP 标头，并试图了解让套接字打开是否对 IP 级别有任何影响。

在 TCP 级别，让套接字保持打开状态对我来说是有意义的，因为这可能意味着 TCP 标头中的“序列号”字段会继续增加。然而，这将是一个纯粹基于端点的实现，因此无法减少 TCP 数据包的传输时间。据我了解，**保持连接打开**通常意味着数据包在互联网上的端点之间的传输时间会减少。

问题是，让套接字连接保持打开状态在 IP 级别是否意味着什么？

我的最佳猜测是，如果套接字连接保持打开状态，则沿完整 IP 网络路径的中间网关将尝试在其映射表中留下一个条目，以便可以立即执行下一跳，而无需进行广播所有连接的网关，以确定下一跳。

（也许这种方式也避免了 DNS 查找的开销。）

我是否正确猜测“保持连接打开”对应于中间 IP 网关上保留的映射条目（这会加快数据包传输）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T04:57:33.737

直接回答：没有。

你的问题说明你没有完全理解 TCP 的目的，就是在两台主机之间建立数据流。记住这一点，保持连接打开的目的应该很明显：如果关闭连接，流将结束。

TCP 连接的状态在 IP 级别上是不可见的；它仅与 TCP 有关。除 NAT 网关外，中间主机通常不会跟踪通过它们的 TCP 连接的状态。（在许多情况下，他们不可能这样做——大型路由器通过它们运行的​​连接比他们可能跟踪的要多得多。）

> 我的最佳猜测是，如果套接字连接保持打开状态，则沿完整 IP 网络路径的中间网关将尝试在其映射表中留下一个条目，以便可以立即执行下一跳，而无需进行广播所有连接的网关，以确定下一跳。

这个猜测是不正确的。路由器将具有某种算法，用于根据目标 IP 选择路由，基于它内部保存的一组路由表。阅读[BGP](http://en.wikipedia.org/wiki/Border_Gateway_Protocol)以了解有关如何在大型路由器上确定这一点的详细信息；在较小的路由器上，路由表通常由管理员定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T04:59:36.737

首先，让我们澄清一个误解：

> 沿完整 IP 网络路径的中间网关将尝试在其映射表中留下一个条目，以便可以立即执行下一跳，而无需向所有连接的网关广播以确定下一跳。

路由器从不“广播到所有连接的网关”以确定下一跳。如果一个数据包到达并且路由器还不知道如何路由它，则该数据包被简单地丢弃（可能带有一个 ICMP 错误消息被发送回源）。在路由器上运行的路由协议的工作是使用从对等方学习到的路由预先填充路由器的路由表，以便它们准备好接收数据包并路由它们。

此外，“完整的 IP 网络路径”也没有明确定义。当网络上的链接出现故障或新链接可用时，网络路径可以随时更改。由于负载平衡，它甚至可以在没有路由更改的情况下从一个数据包更改为下一个数据包。

回到你的问题：不，套接字是否关闭对 IP 没有影响。IP 是无状态的，因为每个数据包都是自包含和独立路由的。

套接字是否关闭*确实*会对 TCP 产生影响，但是，正如您所注意到的，这仅涉及连接端点处的两个节点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T05:02:08.900

“保持连接打开”对速度的影响是，在 TCP 中*建立*连接需要往返。但更重要的是，连接对大多数运行在 TCP 上的协议也具有*语义意义。*在同一连接上发送的两位数据相关，而在不同连接上发送的两位数据则不相关。

# git - 如何使用 git 从本站下载（全部）源代码？

> ID：15457587
> 
> 赞同：1
> 
> 时间：2013-03-17T04:39:43.837
> 
> 标签：git, tizen

我正在尝试使用以下方法从[https://review.tizen.org/git/](https://review.tizen.org/git/)获取 tizen 的源代码：

```
git clone git://review.tizen.org/git 
```

但我得到：

```
fatal: The remote end hung up unexpectedly 
```

如何解决这个问题？该站点在git的地址中没有具体说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T05:52:10.580

您会在该链接上看到许多不同的项目。因此您必须执行以下操作：

```
git clone git://review.tizen.org/git/tools/sbs.git 
```

另外，我假设您具有正确的访问权限。此外，您可能需要查看它，`All-Projects.git`因为它具有您需要的一些配置和访问信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:42:34.070

[该](https://review.tizen.org/git/)位置似乎有多个项目，因此在进行克隆时请提及正确的项目存储库。

> **例如**

假设您有适当的凭据，

```
git clone https://review.tizen.org/git/All-Projects.git
                  OR
git clone git://review.tizen.org/git/All-Projects.git 
```

这将克隆`All-projects.git`到您的本地驱动器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-19T10:41:47.173

因为tizen的所有项目都是巨大的，你最好挑选一些有趣的子项目。

例如，我可以克隆 ecore 项目，如：

```
$ git clone git://review.tizen.org/framework/uifw/ecore.git 
```

[您可以从https://review.tizen.org/git/](https://review.tizen.org/git/)查看涉及的项目

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-27T11:24:21.440

此网址不需要您为 gerrit 设置帐户和上传密钥

```
git clone https://git.tizen.org/cgit/Public-Projects.git 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-06T00:05:13.513

有关详细信息，请参阅 Tizen 文档。本质上，它使用 repo 一次下载所有项目。

[https://source.tizen.org/documentation/developer-guide/getting-started-guide/cloning-tizen-source](https://source.tizen.org/documentation/developer-guide/getting-started-guide/cloning-tizen-source)

# php - 数组文件 isset 错误地返回 False

> ID：15457592
> 
> 赞同：4
> 
> 时间：2013-03-17T04:40:57.197
> 
> 标签：php, arrays, isset

我有以下 PHP 代码：

```
$haystack  = file("dictionary.txt");
$needle = 'john';
$flipped_haystack = array_flip($haystack);
if (isset($flipped_haystack[$needle])) {
    echo "Yes it's there!";
}
else {
    echo "No, it's not there!";
} 
```

的内容`dictionary.txt`如下（UTF-8编码）：

```
john 
```

出于某种原因，尽管事实是`$haystack`打印出来没有任何问题，但我一直在弄错。这只是我不断得到的错误，这一直给我带来问题。或者，我尝试更改`$haystack`为以下代码，该代码又正确返回为 true：

```
$haystack = array("john"); 
```

为什么我的代码错误地返回 false？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T04:52:16.097

这可能是因为每个元素末尾的换行符。尝试这个：

```
$haystack  = file("dictionary.txt", FILE_IGNORE_NEW_LINES); 
```

这是[PHP 手册](http://www.php.net/manual/en/function.file.php)中的注释：

```
Each line in the resulting array will include the line ending, unless FILE_IGNORE_NEW_LINES is used, so you still need to use rtrim() if you do not want the line ending present. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T04:54:57.430

问题取决于以下事实`file`：

> 以数组形式返回文件。数组的每个元素对应于文件中的一行，换行符仍然附加。

因此`john`不等于`john\n`。

只需设置以下标志：

```
file("dictionary.txt", FILE_IGNORE_NEW_LINES); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T04:57:28.057

该`file()`函数正在向数组元素添加换行符。

请参阅手册页：[http ://www.php.net/manual/en/function.file.php](http://www.php.net/manual/en/function.file.php)

以这种方式打开文件：

```
$haystack = file('dictionary.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); 
```

此外，为了帮助调试，您可以添加如下行：

```
var_dump($haystack);

var_dump($flipped_haystack); 
```

这会告诉你这个：

```
array(1) {
  [0] =>
  string(5) "john\n"
}
array(1) {
  'john
' =>
  int(0)
}
No, it's not there! 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T04:56:32.670

# android - 跨多个文件的android布局xml

> ID：15457595
> 
> 赞同：0
> 
> 时间：2013-03-17T04:41:26.370
> 
> 标签：android, android-layout, layout

为了更容易维护，我想为一个屏幕使用多个 XML 文件，特别是因为我有根据用户操作相互排除的部分。所以部分布局的可见性消失或可见。我希望将这些部分放在多个文件中，然后放在一个我只引用它们的文件中。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:49:35.840

您可以使用[<include/>](http://developer.android.com/training/improving-layouts/reusing-layouts.html)标签来重用布局。您可以使用此标签在一个布局中添加多个布局 xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:53:15.187

我不确定这是否是您想要的，但您可以调用 setContentView() 方法，该方法在用户执行操作时显示您的 XML 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T05:00:58.903

您可以使用该`<include/>`元素来拥有子 xml 文件：

```
<LinearLayout ... >
   <include layout="@layout/header" />
   <include layout="@layout/content" />
   <include layout="@layout/footer" />
</LinearLayout> 
```

这将允许您利用可重用性。

# asp.net - 之前必须调用“WebSecurity.InitializeDatabaseConnection”方法吗？

> ID：15457597
> 
> 赞同：2
> 
> 时间：2013-03-17T04:41:49.767
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我有以下 Asp.Net MVC 4 代码，它在 controller 的第 18 行引发错误`DealController`。现在，只有在我在本地 PC 上使用 VS 2012 进行调试时重建项目后才会发生这种情况。

```
Line 16: private IQueryable<Deal> Deals
Line 17: {
Line 18:    get { return User.IsInRole("Admin") ? _db.Deals : _db.Deals.Where(d => d.CreatedBy == User.Identity.Name); }
Line 19: } 
```

> 在调用“WebSecurity”类的任何其他方法之前，您必须调用“WebSecurity.InitializeDatabaseConnection”方法。此调用应放置在站点根目录中的 _AppStart.cshtml 文件中。

我应该`[InitializeSimpleMembership]`在所有调用`User.IsInRole()`或的控制器上添加属性`User.Identity.Name`吗？目前只添加在`AccountController`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T16:44:18.940

添加`[InitializeSimpleMembership]`控制器解决了这个问题。

# jquery - 单击按钮时Ajax不处理

> ID：15457600
> 
> 赞同：0
> 
> 时间：2013-03-17T04:42:22.643
> 
> 标签：jquery, html, ajax, jsp

所以我试图在使用 JQueryUI 的 JSP 中使用一个简单的 Ajax 函数。我只是传入表单中使用的两个文本字段，并尝试用它们填充两个 div。当我单击按钮时，什么都没有发生，我尝试将 console.logs 放在 ajax 函数中并且没有打印任何内容。

按钮单击调用的 JSP 代码（按要求提供完整的 jquery）

```
<script type="text/javascript">
      $('#saveBtn').click(function() {  
          //define the handler function for click event inline (it doesn't need a name because we're just using it one time)
          // get the value of the search box
          console.log("you are in the ajax");
          var addressValue = $("#address").val();
          var creditValue = $('#creditcard').val();
          System.out.println("you are in the function");
          // send to the server (this is relative to our current page)
          $.ajax({

            url: "actions.InfoAjax.action",
            data: { // this is an embedded JSON object we'll send to server
              address: addressValue,
              creditcard: creditValue
            },
            dataType: 'json',  // tell JQuery to expect JSON back from the server
            success: function(ret) {  // this is called as soon as the server returns

              console.log(ret.address);
              console.log(ret.creditcard);
              $('#savedAddress').html(ret.address);
              $('#savedCC').html(ret.creditcard);

            }//success
          });//ajax

        });//click
      });//ready
    </script> 
```

这是我的html：

```
<form action="post">
          <input type = "text" name="address" placeholder="Address" ></input></br>
           <input type = "text" name="creditcard" placeholder="Credit Card Number">  </input></br>
          <button type ="button" class ="btn btn-small" id="saveBtn">Save</button>
</form> 
```

我一直试图让它工作几个小时，任何帮助表示赞赏。

以下是我从控制台得到的错误：

```
 readyState: 4
responseText: "
↵
↵{
↵  "address": [null],
↵  "creditcard": [ test ]
↵}
↵
↵"

1: "parsererror"
2: SyntaxError
get stack: function () { [native code] }
message: "Unexpected token e"
set stack: function () { [native code] }
__proto__: Error
callee: function () {
length: 3
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:57:37.030

尝试：

```
$('#saveBtn').click(function (e) { //define the handler function for click event inline (it doesn't need a name because we're just using it one time)
    e.preventDefault();
    // get the value of the search box
    console.log("you are in the ajax");
    var addressValue = $("#address").val();
    var creditValue = $('#creditcard').val();
    //System.out.println("you are in the function");
    // send to the server (this is relative to our current page)
    $.ajax({

        url : "actions.InfoAjax.action",
        data : { // this is an embedded JSON object we'll send to server
            address : addressValue,
            creditcard : creditValue
        },
        dataType : 'json', // tell JQuery to expect JSON back from the server
        success : function (ret) { // this is called as soon as the server returns

            console.log(ret.address);
            console.log(ret.creditcard);
            $('#savedAddress').html(ret.address);
            $('#savedCC').html(ret.creditcard);

        }, //success
        error : function () {
            console.log(arguments);
        }
    }); //ajax

}); //click 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T07:14:32.133

```
$('#foo').click(function() {
   return false;
});

$('#foo').live('click', function() {
   return false;
}); 
```

试试看。关闭函数前最后一行的“return false”可能会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T07:19:53.840

您也可以创建一个新功能。制作表格：

```
$(document).ready(function() {
   $('#foo').submit(function() {
      // function here. try it!
      return false;
   });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T05:11:19.133

在 jQuery Docs 中，.click 是 .on('click', handler) 的快捷方式，尝试使用

```
$(".foo").on("click", function(){
    //your code here
}); 
```

还要确保加载包含代码或内联脚本的 JS 文件，以及页面加载时的 jQuery。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-17T04:52:43.643

试试这个并告诉我们

```
//System.out.println ?? check this
 });//ajax
    return false; 
});//click 
```

# android - Maven 编译 - Facebook 缺少符号

> ID：15457603
> 
> 赞同：0
> 
> 时间：2013-03-17T04:43:10.037
> 
> 标签：android, facebook, maven

我正在尝试在终端中使用 maven 命令

```
mvn clean install 
```

但由于某种原因，今天终端想抛出一些错误。这些错误也都围绕着 Facebook。

```
...src/com/facebook/Settings.java:[26,27] cannot find symbol
[ERROR] symbol  : variable BuildConfig
[ERROR] location: package com.facebook.android 
```

我将如何摆脱这些错误，我整天都在寻找没有运气的可能性。不知道从哪里开始，任何建议将不胜感激。

我可以在 Pom.xml 中调整什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:45:02.717

我遇到了同样的问题，对我来说[android-maven-plugin](https://code.google.com/p/maven-android-plugin/) [升级](https://stackoverflow.com/questions/11447351/maven-build-android-application-buildconfig)到最新（截至 3 月 13 日）v3.5.1 解决了这个问题。

# eventbrite - 使用网站工作流的第三部分后续步骤获取与会者数据

> ID：15457605
> 
> 赞同：1
> 
> 时间：2013-03-17T04:43:21.163
> 
> 标签：eventbrite

我正在使用 Event Brite API，并且我需要找出最佳方法。现在，我有一个人们将注册的活动。在注册过程的最后一步，我需要问他们一些针对我的活动的问题。遗憾的是，这些问题是由我的网站数据驱动的，因此我无法使用带有 Event Bright 的打包调查。

在一个完美的世界中，我会使用 EB 文档的网站工作流程中详述的基本流程，以“第 3 方后续步骤”步骤（重定向方法）结束。

[http://developer.eventbrite.com/doc/workflows/](http://developer.eventbrite.com/doc/workflows/)

登陆该页面后，我希望能够访问我们刚刚创建的订单数据，以便更新我的数据库并向每个购买座位的人发送电子邮件。这封电子邮件将包含启动我的注册过程的调查部分所需的信息。

这在当前的 API 中可行吗？重定向是否会将任何数据发布回第 3 方站点？我看到一些 SO 帖子提供了一些可以包含在重定向 URL 中的关键字（有完整的列表吗？）。如果是这样，有没有办法使用该数据仅查找该订单的订单信息？

现在，我唯一的另一种选择是设置一个轮询服务，该服务将提取 EB API 数据，检查新值，然后每隔一段时间启动该过程。这对所有相关方来说都会非常嘈杂，给我的与会者造成延误，如果可能的话，我想避免它。想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:57:03.550

以下是与会者下单后我们支持的全套参数：

```
http://yoursite.com/?eid=$event_id&attid=$attendee_id&oid=$order_id 
```

`order_id`有可能它`attendee_id`不是一个数值，在这种情况下它会返回一个“未知”的值。不过你总会有的`event_id`。

如果您想在将与会者重定向到您的站点后获取特定于订单的数据，您可以使用 event_list_attendees 方法和`modified_after`参数。您仍然需要查看 new`order_id`的结果集，但结果集会更小且更易于导航。您可以在这里获得更多信息：http: [//developer.eventbrite.com/doc/events/event_list_attendees/](http://developer.eventbrite.com/doc/events/event_list_attendees/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:27:31.773

您可以在重定向 URL 中传递 order_id 以解决此问题。

当您[定义重定向 URL](http://help.eventbrite.com/customer/portal/articles/426236-order-confirmation-customization#redirect)时，Evenbrite 将自动交换 order_id 值以代替字符串“$order_id”。

```
http://your3rdpartywebsite.com/welcome_back/?order_id=$order_id 
```

或者：

```
http://your3rdpartywebsite.com/welcome_back/$order_id/ 
```

当用户完成交易时，他们将被重定向到您的外部站点，如下所示：/ http: [//developer.eventbrite.com/doc/workflows/](http://developer.eventbrite.com/doc/workflows/)

当您的交易后登陆页面被加载时，从请求 URL 中获取 order_id，并调用[event_list_attendees API 方法](http://developer.eventbrite.com/doc/events/event_list_attendees/)以在响应中查找订单信息。

# wordpress - WordPress 多站点与否？

> ID：15457607
> 
> 赞同：0
> 
> 时间：2013-03-17T04:43:49.547
> 
> 标签：wordpress

我有 4 个网站，其中主站点将是一个全球站点，另外 3 个将是同一站点的变体，仅因国家/地区而异。它们将具有相同的结构、相同的外观和感觉等。只有一些细节和图像会在站点之间发生变化。现在是使用 WP Multisite 的好时机吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:22:07.240

当然，这是使用您的网站的最佳方式之一，它也是一个非常专业的网站，因为它还有其他国家/地区的其他网站。这是更好地利用网站的方式。

您知道如果您在美国，那么 google 网站将是**google.com**，如果您在印度，您的网站将是**google.in**，因此通过这种方式，您的网站将比以往更好。

# rest - Extjs 4.2 Proxy Rest id 参数

> ID：15457610
> 
> 赞同：3
> 
> 时间：2013-03-17T04:44:17.167
> 
> 标签：rest, extjs, proxy

我正在尝试使用*extjs*代理 rest 访问 REST 服务，但是正在发送的 url 看起来很奇怪，看看：

/rest/v1/distribution-list/1* *?id=1* *

我不知道为什么要发送'id'。它应该发送`'/rest/v1/distribution-list/1'` 任何想法？这是我的模型

```
 Ext.define('Wave.model.DistributionList', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id'},
        {name: 'name', type: 'string'},
        {name: 'status', type: 'string'}

    ],

    proxy: {
        type: 'rest',
        noCache: false,
        reader: {
            type: 'json'
        },
        writer: {
            type: 'json'
        },
        actionMethods: {
            create: 'POST',
            read: 'GET', // defaults to GET
            update: 'POST',
            destroy: 'DELETE'
        },
        api: {
            read: '/rest/v1/distribution-list/',
            create: '/rest/v1/distribution-list/',
            update: '/rest/v1/distribution-list/',
            destroy: '/rest/v1/distribution-list/'
        }

    }

}); 
```

干杯

- 恩里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T11:00:04.753

已发送的 ID 由 Extjs 设置。您可以使用 idParam 将其更改为另一个；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T13:57:09.523

使用 sencha-touch 2.3.1 和 rest 代理，ExtJS 使用查询字符串参数创建操作方法的 URL，如您所说：/rest/v1/distribution-list/?id=1。如果您不想附加 id，可以在代理配置中将 appendId 更改为 false。

# c++ - 我的合并排序函数吐出 0 而不是对我的列表进行排序

> ID：15457613
> 
> 赞同：1
> 
> 时间：2013-03-17T04:44:59.910
> 
> 标签：c++, mergesort

我正在尝试创建一个 Mergesort 函数，但似乎无法理解为什么我的列表打印出“00000100000”。我有一种感觉，它可能是我正在通过的辅助数组，但如果可能的话，我想将它保留在我的代码中。这是我的代码：

```
void merge(int arr[], int aux[], int low, int mid, int high)
{
    int leftStart = low;
    int rightStart = mid+1;
    int auxIndex = low;
    int start = low;

while(leftStart<=mid && rightStart<= high)
{

    if(arr[leftStart]>=arr[rightStart])
    {
        aux[auxIndex] = arr[rightStart];
        auxIndex++;
        rightStart++;
    }
    else
        aux[auxIndex] = arr[leftStart];
        auxIndex++;
        leftStart++;
}
if(leftStart>mid)
{
    for(;rightStart<=high; rightStart++)
    {
        aux[auxIndex] = arr[rightStart];
    }
}
if(rightStart>high)
{
    for(;leftStart<=high; leftStart++)
    {
        aux[auxIndex] = arr[rightStart];
    }
}
for(; start <= high; start++)
    arr[start]=aux[start];
}

void mergeSort(int arr[], int aux[], int low, int high)
{
    int mid;
    if(low<high)
    {
    mid=(low+high)/2;
    mergeSort(arr, aux, low, mid);
    mergeSort(arr, aux, mid+1, high);
    merge(arr,aux, low, mid, high);
    }
}

int main(int argc, char *argv[]) {
int arr[20]={6,4,3,2,1,7,8,9,5,6,7,5};
for(int i = 0; i<12; i++)
    cout<<arr[i];
int aux[20];
mergeSort(arr, aux, 0, 12);
for(int i = 0; i<12; i++)
    cout<<arr[i];
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:54:54.683

`valgrind`在或等效的分析工具下运行您的程序。您会发现代码中存在与数组访问相关的直接错误。

# ruby-on-rails - 如何为新用户设置不同的默认头像？此代码不起作用

> ID：15457617
> 
> 赞同：0
> 
> 时间：2013-03-17T04:45:40.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gravatar

我阅读了这个页面 - [https://en.gravatar.com/site/implement/images/](https://en.gravatar.com/site/implement/images/) - 并查看了其他帖子，但它对我不起作用。

这是我正在使用的代码：

```
def gravatar_for(user, options = { size: 50 })
    gravatar_id = Digest::MD5::hexdigest(user.email.downcase)
    options[:default] = image_tag("https://s3.amazonaws.com/bucketname/image/default_gravatar_70.png")
    size = options[:size]
    gravatar_url = "https://secure.gravatar.com/avatar/#{gravatar_id}?s=#{size}"
    image_tag(gravatar_url, alt: user.name)
  end 
```

我希望下面链接中的任何内容成为所有新用户的默认 gravatar。 [https://s3.amazonaws.com/bucketname/image/default_gravatar_70.png](https://s3.amazonaws.com/bucketname/image/default_gravatar_70.png)

但我仍然得到经典的 gravatar 默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:09:50.790

您的图片链接是否有任何安全措施？如果我单击您那里的链接，我会收到拒绝访问错误。默认图像 gravatar 仅适用于公开可用的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:45:31.480

我看到了文档，默认图片可以通过 ad= 参数将其设置为默认值，而不是使用他们的。

```
<img src="http://www.gravatar.com/avatar/00000000000000000000000000000000?d=http%3A%2F%2Fexample.com%2Fimages%2Favatar.jpg" /> 
```

# javascript - HTML Canvas：在绘图下方绘制网格

> ID：15457619
> 
> 赞同：0
> 
> 时间：2013-03-17T04:46:06.867
> 
> 标签：javascript, html, canvas, plot

我正在画布上绘制图表，并且无法在图表下方绘制图表的网格。我的数据点被绘制为矩形（fillRect）。当我第一次绘制图表然后绘制网格时，它按预期工作，但由于网格在图表上，它看起来并不好。但是当我先绘制网格然后绘制图形时，所有网格都消失在下面。

我画我的情节如下：

```
var plots = document.getElementsByClassName("PlotCanvas");
for (var x=0; x < tokens.length; x++)
    {
        var canvas = plots[x];
        canvas.width = arrayOfArrays[x].length;
        var context = canvas.getContext("2d");

        for(var point=1; point<arrayOfArrays[x].length; point++)
        {
            context.fillRect(point, arrayOfArrays[x][point],...);
        }
    } 
```

然后将网格绘制为： function DrawGrids(plots) {

```
 for(var count=0; count<plots.length; count++)
    {
        var ctx = plots[count].getContext("2d");
        ctx.beginPath();

        for (var x = 0.5; x < plots[count].width; x += 20) {
            ctx.moveTo(x, 0);
            ctx.lineTo(x, plots[count].height);
        }
        for (var y = 0.5; y < plots[count].height; y += 20) {
            ctx.moveTo(0, y);
            ctx.lineTo(plots[count].width, y);
        }
        ctx.strokeStyle = "#eee";
        ctx.stroke();
    }
} 
```

有人可以建议我如何在情节下方绘制网格。或者如何绘制图形，使其不在整个画布上绘制，从而使之前绘制的网格消失。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:33:25.493

**使用 ctx.globalCompositeOperation="destination-over" 在地块后面绘制网格！**

```
// draw your plots here

// save the context
ctx.save();

// set compositing to "destination-over"
// New drawings are drawn behind the existing canvas content.
ctx.globalCompositeOperation = "destination-over";

// draw your grids behind your plots!
DrawGrids();

// restore the context
ctx.restore(); 
```

# php - 将日历添加到我的网站

> ID：15457620
> 
> 赞同：0
> 
> 时间：2013-03-17T04:46:26.850
> 
> 标签：php, calendar, fullcalendar, google-calendar-api

我正在从头开始制作一个允许用户创建帐户的网站。我计划拥有 4 种类型的帐户（客户、员工/所有者、代表/销售员和经销商）。在这 4 种类型的帐户中，所有者和代表是唯一在登录后会看到日历的人。所有者应该能够修改代表日历中的事件，并且代表显然也可以修改他/她自己的日历。我不打算从头开始制作日历，而是从我的网站上获取满足我需求的日历。老实说，我不知道从哪里开始寻找，或者有什么好的脚本可以完成我想做的事情，所以任何帮助和想法都非常感谢。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:27:16.337

这似乎是一项艰巨的任务。

但是看看这个网站，看看这个用PHP 编写的[日历脚本](http://css-tricks.com/snippets/php/calendar-function/)，它可能是一个很好的起点。如果你想手动编码。

# c++ - 使用动态分配的矩阵

> ID：15457621
> 
> 赞同：1
> 
> 时间：2013-03-17T04:46:43.923
> 
> 标签：c++, memory, matrix, allocation

我目前无法在 C++ 中使用分配的矩阵。我有一个变量板，我分配为一个 8x8 矩阵，如下所示：

```
int **board;

board = new int*[8];

for(int i = 0; i < 8; i ++)
{
   board[i] = new int[8];
} 
```

当我在分配矩阵后尝试用 0 初始化时，如下所示：

```
for(int i = 0; i < 8; i++)
{
   for(int j = 0; j < 8; j++)
   {
       board[i][j] = 0;
   }
} 
```

符号板[i][j] 完美运行。但是当我尝试在另一个函数中使用它时，它并没有像我预期的那样工作。我在这样的函数中使用了分配的矩阵作为参数：

```
int interpretBoard(int ** board, int ** knightsPos)
{
int k, numKnights = 0;
string buffer;

for(int row = 0; row < 8; row++)
{
    for(int column = 0; column < 8; column++)
    {
       cin >> buffer;

        switch (buffer[0])
        {
            case 'e':
                board[row][column] = 0;
                break;
            case 'b':
                if (buffer[1] == 'n')
                {
                    board[row][column] = 1;
                    knightsPos[0][k] = row;
                    knightsPos[1][k++] = column;
                    numKnights++;
                }
                else
                {
                    board[row][column] = 3;
                }
                break;
            case 'w':
                if (buffer[1] == 'n')
                {
                    board[row][column] = 2;
                    knightsPos[0][k] = row;
                    knightsPos[1][k++] = column;
                    numKnights++;
                }
                else
                {
                    board[row][column] = 4;
                }
                break;
        }

       cout << "board[" << row << "][" << column <<"]: " 
               << board[row][column] << endl;
    }
}

return numKnights;
} 
```

当我尝试读取这样的矩阵时出现段错误。我这样传递参数：

```
int main(int argc, char** argv) {

int l = 0;
int** board;
int** knightsPos;
vector<int**> boardVector;
vector<int**> knightsPosVector;
vector<int> numKnightsVector;

boardVector[0] = 0;

constructor(board, knightsPos);

while(!cin.eof())
{
    numKnightsVector.push_back(interpretBoard(board,knightsPos));
    boardVector.push_back(board);
    knightsPosVector.push_back(knightsPos);
    l++;
}    

destructor(board,knightsPos);

return 0;
} 
```

我不知道为什么我可以在一部分代码中以这种方式扫描矩阵，而在另一部分中却不行。感觉和我传参数的方式有关系，但是现在不明白怎么错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:47:10.543

您的问题是，`int ** board`对于您为电路板分配的尺寸没有任何提示。所以`interpretBoard`不知道它必须与 8x8 板一起使用。

另一种方法是使用包含棋盘方格的结构，例如

```
struct board
{
    int square[8][8];
}; 
```

现在你有了一个知道维度的数据类型，而且你不需要动态分配任何东西。

# java - 避免在 Java 中使用 instanceof

> ID：15457623
> 
> 赞同：17
> 
> 时间：2013-03-17T04:47:18.847
> 
> 标签：java, oop, inheritance, instanceof

我在大学的某个阶段被告知（并且随后在十几岁的地方阅读）使用`instanceof`应该只用作“最后的手段”。考虑到这一点，是否有人能够判断我拥有的以下代码是否是最后的手段。我环顾了一下堆栈溢出，但找不到类似的情况-也许我错过了？

```
private void allocateUITweenManager() {
   for(GameObject go:mGameObjects){
      if (go instanceof GameGroup) ((GameGroup) go).setUITweenManager(mUITweenManager);
   }
} 
```

在哪里

*   `mGameObjects`是一个数组，其中只有一些是`GameGroup`类型
*   `GameGroup`是抽象类的子类`GameObject`。
*   `GameGroup`使用`UITweenable`有方法的接口`setUITweenManager()`
*   `GameObject`不使用接口`UITweenable`

我想我可以同样（并且可能应该）`GameGroup`在上面的代码中替换为`UITweenable`- 我会问同样的问题。

有没有另一种方法可以避免这种情况`instanceof`？这段代码不能失败，因此（我认为，对吧？），但考虑到坏消息`instanceof`似乎得到了，我是否在我`instanceof`在这里使用的路线的某个地方犯了一些 OOP 的主要罪行？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T05:20:45.703

`Visitor pattern`我在大学的编译器课程中了解到，我认为它可能适用于您的场景。考虑下面的代码：

```
public class GameObjectVisitor {

    public boolean visit(GameObject1 obj1) { return true; }
    .
    .
    // one method for each game object
    public boolean visit(GameGroup obj1) { return true; }
} 
```

然后你可以`GameObject`像这样在接口中放置一个方法：

```
public interface GameObject {

    .
    .
    public boolean visit(GameObjectVisitor visitor);
} 
```

然后每个人都`GameObject`实现了这个方法：

```
public class GameGroup implements GameObject {

    .
    .
    .
    public boolean visit(GameObjectVisitor visitor) {
        visitor.visit(this);
    }
} 
```

当您具有复杂的继承层次结构时，这特别有用`GameObject`。对于您的情况，您的方法将如下所示：

```
private void allocateUITweenManager() {

    GameObjectVisitor gameGroupVisitor = new GameObjectVisitor() {
        public boolean visit(GameGroup obj1) {
            obj1.setUITweenManager(mUITweenManager);
        }
    };

    for(GameObject go:mGameObjects){
      go.visit(gameGroupVisitor);
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T04:53:53.983

**编辑**

您可以在这里做两件主要的事情来让自己摆脱这种特定的`instanceof`. （双关语？）

1.  按照我最初的回答建议做，并将您定位的方法移至您正在迭代的类。在这种情况下这并不理想，因为该方法对父对象没有意义，并且会像 Ted 所说的那样造成污染。

2.  将您正在迭代的对象的范围缩小到只熟悉目标方法的对象。我认为这是更理想的方法，但可能不适用于您当前的代码形式。

就个人而言，我避免`instanceof`像瘟疫一样，因为它让我觉得我完全错过了一些东西，但有时它是必要的。如果您的代码以这种方式布局，并且您无法缩小您正在迭代的对象的范围，那么`instanceof`可能会工作得很好。但这似乎是一个很好的机会，可以了解多态性如何使您的代码在未来更易于阅读和维护。

我将在下面留下原始答案以保持评论的完整性。

**/编辑**

就个人而言，我认为这不是使用`instanceof`. 在我看来，您可以利用一些多态性来实现您的目标。

你有没有考虑过制作`setUITweenManager(...)`一个方法`GameObject`？这样做有意义吗？

如果它确实有意义，您可以让您的默认实现什么都不做，并让您`GameGroup`覆盖该方法以执行您希望它执行的操作。此时，您的代码可能看起来像这样：

```
private void allocateUITweenManager() {
   for(GameObject go:mGameObjects){
       go.setUITweenManager(mUITweenManager);
   }
} 
```

这是实际的多态性，但我不确定这是否是您当前情况的最佳方法。`Collection`如果可能的话，迭代`UITweenable`对象会更有意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T08:34:51.283

不鼓励的原因`instanceof`是因为在 OOP 中我们不应该从外部检查对象的类型。相反，惯用的方法是让对象本身使用覆盖的方法进行操作。在您的情况下，一种可能的解决方案可能是定义`boolean setUITweenManager(...)`on`GameObject`并让它返回`true`，如果可以为特定对象设置管理器。但是，如果这种模式出现在许多地方，顶级类可能会受到相当大的污染。因此有时`instanceof`是“小恶”。

这种 OPP 方法的问题是每个对象都必须“知道”它所有可能的用例。如果你需要一个适用于你的类层次结构的新特性，你必须将它添加到类本身，你不能将它放在单独的地方，比如在不同的模块中。正如其他人所建议的那样，这可以使用[访问者模式以一般方式解决。](http://en.wikipedia.org/wiki/Visitor_pattern)访问者模式描述了检查对象的最通用方法，并且在与多态性结合使用时变得更加有用。

请注意，其他语言（特别是函数式语言）使用不同的原则。它们不是让对象“知道”它们如何执行每个可能的操作，而是声明自己没有方法的数据类型。相反，使用它们的代码检查它们是如何使用[代数数据类型](http://en.wikipedia.org/wiki/Algebraic_data_types)上的[模式匹配](http://en.wikipedia.org/wiki/Pattern_matching)构造的。据我所知，与 Java 最接近的具有模式匹配的语言是[Scala](http://en.wikipedia.org/wiki/Scala_%28programming_language%29)。有一篇关于 Scala 如何实现模式匹配的有趣论文，其中比较了几种可能的方法：[*Matching Objects With Patterns。*](http://lampwww.epfl.ch/~emir/written/MatchingObjectsWithPatterns-TR.pdf)[*布拉克·埃米尔、马丁·奥德斯基和约翰·威廉姆斯。*](http://lampwww.epfl.ch/~emir/written/MatchingObjectsWithPatterns-TR.pdf)[](http://lampwww.epfl.ch/~emir/written/MatchingObjectsWithPatterns-TR.pdf)

 *> 面向对象编程中的数据是按类的层次结构组织的。面向对象模式匹配的问题是如何从外部探索这种层次结构。这通常涉及按对象的运行时类型对对象进行分类、访问其成员或确定一组对象的某些其他特征。在本文中，我们比较了六种不同的模式匹配技术：面向对象的分解、访问者、类型测试/类型转换、类型案例、案例类和提取器。这些技术在与简洁性、可维护性和性能相关的九个标准上进行了比较。本文介绍了案例类和提取器作为两种新的模式匹配方法，并表明它们的组合适用于所有已建立的标准。

总结：在 OOP 中，您可以轻松地修改数据类型（如添加子类），但添加新函数（方法）需要对许多类进行更改。使用[ADT](http://en.wikipedia.org/wiki/Algebraic_data_types)添加新函数很容易，但修改数据类型需要修改许多函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-17T17:38:13.953

instanceof 的问题在于，您可能会受到未来对象层次结构更改的影响。更好的方法是在您可能使用 instanceof 的情况下使用[策略模式。](http://en.wikipedia.org/wiki/Strategy_pattern)用 instanceof 解决问题，你陷入了一个问题 Strategy 试图解决的问题：**to many ifs**。有些人建立了一个社区。[Anti-IF Campaign](http://www.antiifcampaign.com/)可能是个笑话，但 untipattern 是严肃的。从长远来看，维持 10-20 级 if-else-if 的项目可能会很痛苦。在您的情况下，您最好为数组的所有对象创建一个通用接口，`setUITweenManager`并通过接口为所有对象实现。

```
interface TweenManagerAware{
   setUITweenManager(UITweenManager manager);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-17T05:12:51.300

在同一个集合中混合不同类的对象对我来说总是有点“可疑”。将单个游戏对象集合拆分为多个集合，其中一个是游戏对象，另一个是 UITweenables，是否有可能/有意义？（例如，使用由类键入的 MultiMap）。然后你可以这样做：

```
for (UITweenable uit : myMap.get(UITweenable.class)) {
  uit.setUITweenManager(mUITweenManager);
} 
```

现在，您在插入地图时仍然需要一个`instanceof`，但它被更好地封装 - 隐藏在不需要知道这些细节的客户端代码中

ps 我不是对所有的 SW“规则”，而是对谷歌“Liskov 替换原则”的狂热。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T06:51:23.060

You could use the mGameObjects container for when you need to do something on all game objects and keep a separate container only for GameGroup objects.

This will use some more memory, and when you add/remove objects you have to update both containers, but it shouldn't be a noticeable overhead, and it lets you loop very efficiently through all the objects.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-17T08:59:24.773

这种方法的问题在于，它通常不会只出现在您的代码中的一个地方，因此在将来添加另一个接口实现时或多或少会很痛苦。是否避免它取决于您的考虑。有时可以应用 YAGNI，这是最直接的方式。

其他人提出了替代方案，例如访问者模式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-23T15:36:35.000

我有另一种避免方法的建议`instanceof`。

除非您使用的是泛型工厂，否则在创建时`GameObject`您就知道它是什么具体类型。因此，您可以做的是传递任何`GameGroup`您创建的可观察对象，并允许他们向其中添加侦听器。它会像这样工作：

```
public class Game {
    private void makeAGameGroup() {
        mGameObjects.add(new GameGroup(mUITweenManagerInformer));
    }

    private void allocateUITweenManager() {
        mUITweenManagerInformer.fire(mUITweenManager);
    }

    private class OurUITweenManagerInformer extends UITweenManagerInformer {
        private ArrayList<UITweenManagerListener> listeners;

        public void addUITweenManagerListener(UITweenManagerListener l) {
            listeners.add(l);
        }

        public void fire(UITweenManager next) {
            for (UITweenManagerListener l : listeners)
                l.changed(next);
        }
    }
    private OurUITweenManagerInformer mUITweenManagerInformer = new OurUITweenManagerInformer();
}

public interface UITweenManagerInformer {
    public void addUITweenManagerListener(UITweenManagerListener l);
}

public interface UITweenManagerListener {
    public void changed(UITweenManager next);
} 
```

这个解决方案吸引我的是：

*   因为 a`UITweenManagerInformer`是 的构造函数参数`GameGoup`，所以您不能忘记将其传递给它，而对于实例方法，您可能会忘记调用它。

*   `GameGroup`对我来说，一个对象需要的信息（比如需要知道 current的方式`UITweenManager`）应该作为构造函数参数传递，这对我来说很直观——我喜欢将这些视为对象存在的先决条件。如果您不了解 current `UITweenManager`，则不应创建`GameGroup`，并且此解决方案强制执行此操作。

*   `instanceof`从未使用过。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-17T05:30:34.477

您可以使用什么都不做的实现`setUITweenManager`来声明。`GameObject`

`UITweenable`您可以创建一个为实例数组中的所有实例返回迭代器的方法`GameObject`。

还有其他方法可以有效地将调度隐藏在某些抽象中；例如访问者或适配器模式。

* * *

> ...我是否在我在这里使用的某处犯了一些 OOP 的主要罪行`instanceof`？

不是真的（海事组织）。

最糟糕的问题`instanceof`是当您开始使用它来测试实现类时。特别糟糕的原因是它很难添加额外的类，等等。这里的`instanceof UITweenable`东西似乎并没有引入这个问题，因为它`UITweenable`似乎对设计更为基础。

* * *

当你做出这些判断时，最好*理解*为什么（据说）糟糕的构造或用法被认为是糟糕的原因。然后，您查看您的特定用例并弥补这些原因是否适用，以及您正在查看的替代方案在您的用例中是否真的更好。*

# c - 命名管道终止会话

> ID：15457630
> 
> 赞同：1
> 
> 时间：2013-03-17T04:47:44.600
> 
> 标签：c, linux, named-pipes

我正在编写一个短程序来轮询命名管道的缓冲区。为了测试它，我将登录到“nobody”并回显到管道中。当它挂起时，我从另一个用户登录并运行读取缓冲区的程序。当它运行时，程序什么也不返回，并且另一个用户从系统中注销。这是读取功能：

```
void ReadOut( char * buf )
{
    ZERO_MEM( buffer, BUF_SIZE );

    int pipe = open( buf, O_RDONLY | O_NONBLOCK );

    if( pipe < 0 )
    {
            printf( "Error %d has occured.\n" , pipe );
            return;
    }

    while( read( pipe, buffer, 2 ) > 0 ) printf( "%s \n" , buffer );
    close( pipe );

    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:51:42.100

> 此功能在我取出 O_NONBLOCK 时也有效

当您将文件描述符标记为非阻塞时，通常可以阻塞的所有操作（例如`read(2)`，和`write(2)`）都返回`-1`并设置`errno = EAGAIN`。

因此，在您的情况下`read`，立即返回 -1 信号“*我现在还没准备好，稍后再试*”。

# regex - 无法弄清楚 .htaccess 中重定向规则的正确逻辑

> ID：15457638
> 
> 赞同：1
> 
> 时间：2013-03-17T04:50:06.970
> 
> 标签：regex, .htaccess, rewrite, rule

我有一个具有如下查询字符串的 URL：

```
www.blablabla.com/index.php?page=details&p_name=van-der-var&p_country=holland 
```

我想将 URL 重写为如下所示：

```
www.blablabla.com/van-der-var-holland.html 
```

我可以做这样的事情：

```
www.blablabla.com/van_der_var-holland.html 
```

但我需要在名称和其他参数中一起使用相同的符号。可能吗？

我当前的`.htaccess`文件如下所示：

```
RewriteRule ^p-([A-Za-z0-9_]+)-([A-Za-z0-9_]+)\.html$ index\.php?main_page=person&p_name=$1&p_country=$2 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:22:16.890

我想不出一种方法来解决它，在变量和变量中的单词之间使用相同的分隔符，即考虑到您的国家名称可能是 2 个或更多单词。如果国家总是一个词，@faa 的解决方案将满足您的需求。否则，我会建议以下内容：

**van_der_var-holland.html**

```
RewriteRule ^([a-zA-Z0-9_]+)-([a-zA-Z0-9_]+).html$ index.php?page=details&p_name=$1&p_country=$2&%{QUERY_STRING} 
```

**van-der-var_holland.html**

```
RewriteRule ^([a-zA-Z0-9-]+)_([a-zA-Z0-9-]+).html$ index.php?page=details&p_name=$1&p_country=$2&%{QUERY_STRING} 
```

**van-der-var/holland.html**

```
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+).html$ index.php?page=details&p_name=$1&p_country=$2&%{QUERY_STRING} 
```

或与任何其他分隔符类似的东西，例如逗号。

# excel - 使用vba获取具有特定文本的单元格的列号

> ID：15457639
> 
> 赞同：4
> 
> 时间：2013-03-17T04:50:28.063
> 
> 标签：excel, vba

![excel的截图](../Images/521465be25e9ab1e4f2a82bd907d4e58.png)嗨，我需要获取文本为 ACTION 的单元格列。

我当前的代码如下。

```
Option Explicit
Private Sub Worksheet_Change(ByVal Target As Range)
Dim rngDV As Range
Dim oldVal As String
Dim newVal As String
Dim actionColName As String
If Target.Count > 1 Then GoTo exitHandler

On Error Resume Next
Set rngDV = Cells.SpecialCells(xlCellTypeAllValidation)
On Error GoTo exitHandler

If rngDV Is Nothing Then GoTo exitHandler

If Intersect(Target, rngDV) Is Nothing Then
   'do nothing
Else
  Application.EnableEvents = False
  newVal = Target.Value
  Application.Undo
  oldVal = Target.Value
  Target.Value = newVal
  If Target.Column = 3 Then
    If oldVal = "" Then
      'do nothing
      Else
      If newVal = "" Then
      'do nothing
      Else
      Target.Value = oldVal _
        & "+ " & newVal
      End If
    End If
  End If
End If

exitHandler:
  Application.EnableEvents = True
End Sub 
```

在上面的代码中有一个条件如下 If Target.Column = 3 Then

我不想用 3 对值进行硬编码，而是将此逻辑应用于在该列的一个单元格中包含值**ACTION**的完整 列。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T09:59:50.263

使用 a`Find`确定包含*Action的（第一）列*

```
Sub GetAction()
Dim rng1 As Range
Set rng1 = ActiveSheet.UsedRange.Find("Action", , xlValues, xlWhole)
If Not rng1 Is Nothing Then
MsgBox "Found in column " & rng1.Column
Else
MsgBox "Not found", vbCritical
End If
End Sub 
```

# asp.net - 回发后保留html输入值？

> ID：15457640
> 
> 赞同：1
> 
> 时间：2013-03-17T04:50:38.210
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我的 Asp.Net MVC 4 在索引视图中有以下代码。

```
<form action="/Deal" method="GET">
    <p>
        @Html.ActionLink("Create New", "Create")
        <input type="text" name="search"/>
        <input type="submit" value="Search" />
    </p>
</form> 
```

以及 DealController 中的以下代码。但是，回发后的 html 搜索输入是空的。在输入框中显示键入的搜索字符串以便用户继续修改它的最佳方式是什么？

```
public ActionResult Index(string search)
{
    var deals = Deals.Include(d => d.Address);
    if (search != null)
        deals =
            deals.Where(d => d.Address.ApartmentNum.Contains(search) 
                             || d.Address.StreetAddress.Contains(search)
                             || d.Address.City.Contains(search) 
                             || d.Address.State == search 
                             || d.Address.Zip == search);
    return View(deals.ToList());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T04:58:18.603

也许不是最好的，但更简单的方法之一。

```
 <form action="/Deal" method="GET">
     <p>
         @Html.ActionLink("Create New", "Create")
         <input type="text" name="search" value= "@((string)ViewBag.Search)" />
         <input type="submit" value="Search" />
     </p> 
</form>

public ActionResult Index(string search)
{
    var deals = Deals.Include(d => d.Address);
    if (search != null)
        deals =
            deals.Where(d => d.Address.ApartmentNum.Contains(search) 
                             || d.Address.StreetAddress.Contains(search)
                             || d.Address.City.Contains(search) 
                             || d.Address.State == search 
                             || d.Address.Zip == search);
    ViewBag.Search = search;
    return View(deals.ToList());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T06:17:14.070

发现只需要用老办法

```
<input type="text" name="search" value="@Request.QueryString["search"]"/> 
```

# java - 数组到 JLabel

> ID：15457643
> 
> 赞同：0
> 
> 时间：2013-03-17T04:50:53.443
> 
> 标签：java, arrays, string, swing

我有两个带有 java 类的包

*   PKStrings
*   PKJ表格

* * *

```
public class classWork {
    public String[] titleMenu={
        "A","B","C","D"
    };

    public int intOption;
} 
```

我有`JFrame`菜单

*   A点击去jframe A，

    B 点击 go jframe B,

    C 点击 go jframe C,

    D 点击 go jframe D

和同一个包装中的其他框架 `JFram01`，包含`JLabel`.

如果您单击“A”并显示该位置标签，如何识别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:06:05.017

```
I dont understand your need. "A click A go jframe A" doesnot make sense.
if you want to go to another jFrame when clicking a label
Try this

    private void yourlabelMouseClicked(java.awt.event.MouseEvent evt) {
          //  either you can hide the current jFrame by setting 
            jFrame.setVisible(false);
            newjFrame.setVisible(True);
                    or
            make these jFrames in 2 different classes that make simple invocations
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:09:12.180

据我了解，您可以在包中使用公共变量并使用 A、B、C 上的单击事件在其中存储值.....

然后从您想要的 jfaram 访问该信息

例如

```
public String pos ="";

A onclick event(){
   pos="A";
}

finally

if(pos.compareto("A")==0){
   jlabel.settext("A");
} 
```

# c - 作业：试图理清我试图计算 C 的操作

> ID：15457645
> 
> 赞同：-2
> 
> 时间：2013-03-17T04:51:13.450
> 
> 标签：c, bit-manipulation, boolean-logic, control-flow

很抱歉问你们，而不是我的教授。（几个小时后到期，她不在）但我只是在寻找正确方向的一点。

我今晚写的一篇文章陈述了两件事......

```
Single-character versions of the C logical operators:

& for && (logical AND)
| for || (logical OR)
! for logical NOT 
```

这...作为示例输出。

```
Enter an expression: (0 & 1) | (1 & 1)
Result: (0 & 1) | (1 & 1) = true 
```

我的伪逻辑是输入 '&' 或 '|' 并让它返回为 '&&' 或 '||' 并根据输入的表达式将它们全部重新组合在一起，让程序进行数学运算。

但我不明白的是什么会使上述表达式 evaulwate 为真？还是假的？我应该研究什么来更多地了解上述表达式？是什么让它对或错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T04:54:33.747

这样看：

```
(0 & 1) | (1 & 1)

= (0 and 1) or (1 and 1)

= (false and true) or (true and true)

= (false) or (true)

= true 
```

[在维基百科进一步阅读](http://en.wikipedia.org/wiki/Boolean_algebra)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T04:56:42.857

`true`C 中的and的概念`false`是整数`0`for`false`和非零数 for `true`。

“单个”布尔运算符，如,`&`和称为按**位运算**符。`|``~``^`

 **它们逐位处理两个数字 - 分别遵循逻辑表 - AND，OR，ONE-COMPLEMENT（not）和XOR。

所以，你的表达：

`(0 & 1) | (1 & 1)`是真的，因为`0 & 1`= `0`, `1 & 1`=`1`并且`0 | 1`是`1`. 这是真的。

`false`如果表达式与 an`&`而不是这样的组合，则可能会变成`|`这样：

`(0 & 1) & (1 & 1)`= `false`。

AND的真值表：

```
+---------------+---------+
|  A    +   B   |   A & B |
+---------------+---------+
| 0     |   0   |    0    |
| 0     |   1   |    0    | 
| 1     |   0   |    0    |
| 1     |   1   |    1    |
+---------------+---------+ 
```

OR的真值表：

```
+---------------+---------+
|  A    +   B   |   A | B |
+---------------+---------+
| 0     |   0   |    0    |
| 0     |   1   |    1    | 
| 1     |   0   |    1    |
| 1     |   1   |    1    |
+---------------+---------+ 
```

* * *

但是，由于 C99，`true`and是保留字，并且`false`将在内部评估 - 上面发布的答案适用于 C99 以及 C89`0``1`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-17T05:09:56.640

感谢大家的意见。真的有帮助。

```
int logicalCheck (int a, int x, int b) {

// let 88 = true
//  let 89 = false

if (x == '&') {
    if (a == b) {
        return 88;
    }
    if (a != b) {
        return 89;
    }

}

if (x == '|') {
    if ((a == b && a) || b != 0) {
        return 88;
    }
    if (a || b == 0) {
        return 89;
    }

}

return 0; 
```**

# c++ - C++ 冒泡排序链表

> ID：15457648
> 
> 赞同：2
> 
> 时间：2013-03-17T04:51:33.537
> 
> 标签：c++

我是 C++ 初学者，我正在尝试定义一个 BubbleSort 函数来对链表中的元素进行排序。但是发生错误

```
for(current = firstPtr ; current != 0 ; current= current ->nextPtr) 
```

说

```
First-chance exception at 0x01375557 in 111.exe: 0xC0000005: Access violation reading  location 0x00000000.
Unhandled exception at 0x01375557 in 111.exe: 0xC0000005: Access violation reading location 0x00000000\. 
```

下面是核心代码：

```
 //define Node in class List
 //Node.h
 template<typename T> class List;

template<typename T>
class Node{
friend class List<T>;

public:
Node(T &); //constructor
    T getData() const; //access data

private:
T data;
Node<T> *nextPtr; //point to the next Node
};

template<typename T>
Node<T> ::Node(T &key):data(key),nextPtr(0){}

template<typename T>
T Node<T>::getData()const{
return data;
}

//clase List
//List.h
#include<iostream>
#include"Node.h"
using namespace std;

template <typename T>
class List{
public:
List();
    void insertAtFront(T );
void insertAtBack( T &);
bool removeFromFront(T &);
bool removeFromBack(T &);
bool isEmpty() const;
void print() const;
    void BubbleSort();
private:
Node<T> *firstPtr;
Node<T> *lastPtr;

Node<T> *getNewNode(T&);

};

template<typename T>
List<T> :: List():firstPtr(0),lastPtr(0){}

template<typename T>
void List<T>::BubbleSort(){
Node<T> *current;  //Point to the current node
Node<T> *temp = firstPtr;  //hold the data of first element
    for(bool swap = true; swap;){  // if no swap occurs, list is in order
     swap =false;         
     for(current = firstPtr ; current != 0 ; current= current ->nextPtr){
         if (current->data > current->nextPtr->data){  //swap data
             temp->data = current->data;
             current->data = current->nextPtr->data;
             current->nextPtr->data = temp ->data;
             swap = true;
         }

     }
  }
} 
```

你们能帮我修一下吗？我使用调试但仍然找不到解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:10:24.597

在您的内部循环中，您假设`current->nextPtr`当您尝试查看其数据时它不为空。列表中的最后一个节点不是这种情况。尝试改变你的内循环条件

`current != 0`

到

`current != 0 && current->nextPtr != 0`

# c - 在 C 的 while 循环中，是否可以比较两个变量 while (a < b)？

> ID：15457650
> 
> 赞同：0
> 
> 时间：2013-03-17T04:51:44.570
> 
> 标签：c, while-loop, comparison

在这段代码中，我试图让用户输入一个 int 值 (x)，然后在下面的 while 循环中比较这个值：while(k < x)。当我这样做时，我的程序崩溃了。

```
int main()
{
    long int sum = 0;
    long int i = 1;
    long int j = 2;
    long int k = 0;
    int x = 0;
    printf("This program will sum up all of the evenly valued terms from the 
    Fibionacci sequence, up until the\n user-specified highest term value.\n");
    printf("Set this limit: "); 
    scanf("%d",x);

while(k < x)
{   
    k = i + j;
    if(k%2==0)
        sum +=k;
    i = j;
    j = k;

}

printf("The sum of all of the evenly valued terms of the Fibionacci sequence up     until the value %d is %d",x,sum);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T04:55:34.123

你的程序因为这一行而崩溃：

```
scanf("%d",x); 
```

C 通过*值*传递参数，而不是通过引用。因此，对于能够从*调用者*修改变量的 C 函数，该函数需要一个指针，并且调用者必须传递变量的地址：

```
scanf("%d", &x); 
```

通过忽略传递地址，`scanf`尝试写入内存中的某个任意位置（在本例中为地址 0），这会导致未定义的行为。

另请参阅[comp.lang.c FAQ 中的 Q12.12](http://www.c-faq.com/stdio/scanf1.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T04:53:34.380

这里需要一个地址：

```
scanf("%d",x); // ==> scanf("%d", &x); 
```

否则会发生奇怪的事情。在 C 中，当您期望在函数参数中接收结果时，您传递了一个地址。

# sorting - 硬件中的快速/区域优化排序 (fpga)

> ID：15457663
> 
> 赞同：2
> 
> 时间：2013-03-17T04:53:13.450
> 
> 标签：sorting, vhdl, fpga

我正在尝试使用 vhdl 对一组 8 位数字进行排序。我试图找出一种优化延迟的方法和另一种使用更少硬件的方法。

数组的大小是固定的。但我也有兴趣将功能扩展到可变长度。到目前为止，我遇到了 3 种算法：

1.  巴彻平行
2.  方法绿色排序
3.  范沃里斯排序

其中哪一个会做得最好？我应该看看其他方法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:20:03.623

在这方面有很多研究文章。您可以尝试在网上搜索它。我搜索了“排序网络”，并对不同算法进行了很多比较，以及它们在 FPGA 中的适配程度。

您选择的算法很大程度上取决于优化哪个参数最重要，即延迟、面积等。另一个重要因素是排序开始和结束时值的存储位置。如果它们存储在寄存器中，则可能会立即访问它们，但如果您必须从宽度有限的内存中读取它们，您也应该在实现中考虑这一点，因为这样您就必须对流中的值进行排序，并在将其保存回内存之前重新排列该流。

就个人而言，我会考虑一些时间恒定的东西，比如合并排序，它有一个恒定的排序时间，所以你可以很容易地为一个固定大小的数组安排排序。但是，我不确定这对任意大小的数组的扩展或使用效果如何。您可能必须设置数组大小的上限，如果所有数据都存储在寄存器中，这种方法效果最好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:36:57.880

我在 Knuth 的一本书中读到了这一点，根据那本书，Batcher 的并行合并排序是最快的算法，也是硬件效率最高的算法。

# javascript - 如果 url 有锚，如何执行 javascript

> ID：15457668
> 
> 赞同：-5
> 
> 时间：2013-03-17T04:53:36.450
> 
> 标签：javascript, anchor

与 SO 类似，我希望有一些评论的锚点，并且在页面加载后我希望页面执行一些 javascript（突出显示、滚动等 - 我可以自己编写）

所以如果我的网址是

```
www.mywebapp.com/mypost#45625 
```

我希望javascript滚动到带有id的div`45625`并在那里做我自己的javascript。

**如何编写开始执行我的 javascript 的条件，以便它仅在存在 achor 时才起作用？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T04:59:16.137

```
if (window.location.href.indexOf('#') > -1)
    // Do something. 
```

甚至更好：

```
if (window.location.hash.length)
    ... 
```

# unix - ghostscript cygwin

> ID：15457672
> 
> 赞同：2
> 
> 时间：2013-03-17T04:53:55.887
> 
> 标签：unix, cygwin

我在 windows 上使用 cygwin (unix) 并想安装 ghostscript，这样我就可以运行 ImageMagick 的转换以从 PDF 转换为 tif。但是，为了做到这一点，我需要ghostscript。我查看了不同的网站以在 cygywin 上安装它，但我不明白。[这是我在这里](http://ghostscript.com/doc/7.07/Install.htm)尝试使用的网站

谁能向我解释这是如何完成的？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T05:01:17.357

您应该能够通过 Cygwin setup.exe 程序安装 GhostScript (gs)。有关详细信息，请参阅[http://cygwin.com/install.html](http://cygwin.com/install.html)。

# jquery - 从我单击的区域调整大小

> ID：15457674
> 
> 赞同：0
> 
> 时间：2013-03-17T04:54:15.973
> 
> 标签：jquery, css, resize, point, area

我想知道是否可以从我单击的区域调整内容的大小，而不是左上角的默认调整大小。

例如这里是我的代码[http://jsfiddle.net/2drYk/29/](http://jsfiddle.net/2drYk/29/)

```
var $cont = $('.container .content'),
    init_size = $cont.width()*0.1,
    ratio = $cont.width() / $cont.height(),
    c =0,
    s = [400,init_size];

$cont.height( init_size );

$cont.click(function(){   
    $(this).stop().animate({height: s[c%2], width: s[c%2] * ratio });
    c++;
}); 
```

如您所见，它从左上角到右下角调整大小，是否可以根据我单击的位置设置它开始调整大小的点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:25:24.670

是的，当您调整大小时，以适当的比例移动图像，以便较大图像中的点与单击事件的位置是相同的相对点。本质上，这意味着根据比率将其移动到负顶部和左侧单击时图像放置的计算是：

```
New position = Mouse click event position-New size/Old Size*Mouse click event position 
```

这是一个[jsfiddle](http://jsfiddle.net/opherv/adn55/)示例

此示例使用相等的宽度/高度比，但您可以轻松地在它的基础上支持您需要的任何比例

# php - 在 Android 中显示 php 论坛主题列表

> ID：15457675
> 
> 赞同：0
> 
> 时间：2013-03-17T04:54:22.593
> 
> 标签：php, android, mysql

我有安卓应用。有一个php论坛。目前我有一个用户表来存储用户详细信息，但我这样做是因为我需要允许用户从 android 界面向论坛发布和评论。我需要从我的论坛中获取主题列表，当用户选择其中一个主题时，它会显示内容，他可以单击评论按钮进入评论布局以撰写并将他/评论发送到论坛。

现在我已经制作了这个 php 代码来列出主题

```
<?php
//This page let display the list of topics of a category
  function __construct() {
    require_once 'DB_Connect.php';
    // connecting to database
    $this->db = new DB_Connect();
    $this->db->connect();
}
 if(isset($_GET['parent']))
{
$id = intval($_GET['id']);
}
   $dn = mysql_query('select t.title,  u.username as author,  from topics as t left join topics left join user as u  where t.parent="'.$id.'" and t.id2=1 group by t.id order by t.timestamp2 desc');
if(mysql_num_rows($dn)>0)
  {
        $dn = mysql_query("SELECT * FROM topics WHERE id = $parent");
        // return user details
        $posts = array();
          if(mysql_num_rows($dn)) {
            while($post = mysql_fetch_assoc($dn)) {
              $posts[] = array('post'=>$post);
            }
  }
    } else {
       // return false;
    }
?> 
```

但我确定在我的 Android 端是否正确，我是否应该创建一个数组来保存要显示的值。我需要知道我的概念是否正确，否则我会浪费我的时间......

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:04:40.113

您需要做的是以您可以从 Android 解析的格式打印您的信息。我建议使用 JSON，因为它很简单，而且是首选方式。

所以，总结一下：

*   以 JSON 格式打印您的论坛信息
*   执行来自 Android 的 HTTP 请求并获取响应正文
*   使用 JSON 库解析它
*   可选但推荐：将其转换为一个对象来表示每个元素（每个论坛）

# xaml - 如何在 c# 中以编程方式更改 wp8 主题颜色

> ID：15457679
> 
> 赞同：0
> 
> 时间：2013-03-17T04:54:50.263
> 
> 标签：xaml, windows-phone-8

是否可以从 C#（xaml、html5 等）以编程方式更改整体 windows phone 8 主题颜色（背景和强调色）（设置 >> 主题）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:41:45.280

您只能更改应用程序的主题，而不能更改 Phone 的主题。您可以像本文一样检测手机主题：[Windows Phone Mango Custom application Theme Step by Step](http://mobile.dzone.com/articles/how-programmatically-detect)

但是当您进行更改时，它仅适用于您的应用程序。

# ruby-on-rails - Rails：我如何进行捆绑清除？

> ID：15457682
> 
> 赞同：0
> 
> 时间：2013-03-17T04:55:17.580
> 
> 标签：ruby-on-rails, bundler, reset

我继承了一个 Rails 3.1 应用程序，由乘客/nginx 提供服务。

我以为我必须从 ActiveAdmin 0.4 升级到 0.5，但这导致了其他问题，所以我找到了解决方法并降级到 0.4.0。

然后 Ruby 开始抱怨没有检出 formtastic-bootstrap gem。这是 Gemfile 中的行：

```
gem 'formtastic-bootstrap',   :git => "git://github.com/cgunther/formtastic-bootstrap.git", :branch => "bootstrap-2" 
```

配置中肯定有一个 fb gem，但是 stackoverflow 上有人说要运行

```
bundle install --deployment 
```

在我运行那个咒语之后，网站加载了。除了所有的 ActiveAdmin CSS 都消失了。我可以对文件 assets/active_admin.css 进行小修改，然后它们就会生效，但该网站在其他方面看起来就像是古罗马废话。

所以我在上述步骤之一中做了一些坏事——我通常以 root 身份运行 bundle install，但该站点归“web”所有。在 Ruby 抱怨找不到 formtastic-bootstrap 之后，我发现其中两个 gem 安装在 /home/web/.bundler/ruby/ （或类似的东西）中，因为 Ruby 一定一直在抱怨它们，所以我删除了它们。那里什么都没有。

运行另一个后`bundle install`，该站点将加载，但 CSS 没有生效。

我在不同的选项卡中加载了参考站点，并将生成的 HTML 与参考 HTML 进行了比较。唯一的区别在于加载 JS 和 CSS 的两行。在参考网站：

```
<link href="/assets/active_admin-e1b0dc3ef3753e264638b07b12174adb.css" media="all" rel="stylesheet" type="text/css" />
<script src="/assets/active_admin-385197d3f18a204049d4eb22bc9a033e.js" type="text/javascript"></script> 
```

在我的：

```
<link href="/assets/active_admin.css" media="all" rel="stylesheet" type="text/css" />
<script src="/assets/active_admin.js" type="text/javascript"></script> 
```

我知道 JS 和 CSS 正在加载，因为我看到了警报，并且其他东西都被着色了，而不是 ActiveAdmin 元素。但是 DOM 检查器显示参考站点正在从该 CSS 文件中为 body 元素提取各种东西，而对于我的页面，它只是从 resource://gre-resources/html.css 和不需要在此处重复的数据 URI。

错误控制台充满了通常的 jquery 和 google.maps JS 警告（它是一个 gmap 应用程序），但什么也没有跳出来。

这会为任何人敲响警钟吗？我收集看到未标记的 CSS 和 JS 文件引用的原因是因为我运行了“bundle install --deployment”，然后在情况变得更糟时运行了“bundle install --no-deployment”。我只是想把事情放回第 1 格。

那么我怎样才能清除所有内容呢？或者更好的是，是否有一堆魔法装饰物被缓存在某个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:05:53.057

您可以尝试进行捆绑卸载

另一种可能性是重命名 Gemfile.lock 并重新运行捆绑安装，这将强制重新安装。

如果您正在使用版本控制，例如 Git，您可以运行 diff 并查看对代码进行了哪些更改并进行比较。

# python - 列表中的 PySide RegExp 匹配

> ID：15457684
> 
> 赞同：0
> 
> 时间：2013-03-17T04:55:20.603
> 
> 标签：python, regex, pyqt, pyside

您好，我正在 PySide 中编写一个简单的文本编辑器，我想对某些关键字进行颜色编码。这就是我匹配评论的方式。

```
comment    = QtCore.QRegExp(r'\(\*(.*)?') 
```

匹配单个关键字

```
keyword    = QtCore.QRegExp(r'/action/') 
```

我怎么能从这样的列表中匹配：

```
reserved_words = ["if", "else", "elseif", "while"]
keywords = QtCore.QRegExp(r'/match_the_reserced_kewords_here/') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:38:11.170

为了匹配单个（或多个）关键字，您需要定义关键字中允许的字符。否则，您将匹配`action`in `reaction`，这可能不是您想要的。

匹配单个关键字的正确方法是在单词`\b`之前和之后断言单词边界。

```
r'/\baction\b/' 
```

要匹配任何关键字，您需要`|`在单词之间使用交替构造正则表达式：

```
r'/\b(' + r'|'.join(reserved_words) + r')\b/' 
```

**此解决方案假定关键字在 regex 中不包含任何元字符**，例如`.`, `?`, `*`, `+`, `[`, `]`, , `(`, `)`, `{`, `}`, `\`, `^`, `$`, `|`。

问题并不像转义元字符那么简单，因为还有单词边界。但是，我猜想保留关键字只包含英文字母字符；如果是这样的话，应该没有任何问题。

# c++ - 用于将weak_ptr 应用于unique_ptr 的内容

> ID：15457686
> 
> 赞同：4
> 
> 时间：2013-03-17T04:55:54.393
> 
> 标签：c++, memory-management, boost, memory-leaks, c++11

我试图理解c++11 中的`unique_ptr`,`shared_ptr`​​ 和。`weak_ptr`

我听说这`weak_ptr`对于缓存和中断循环等事情会很好。我听说他们与`shared_ptrs`.

`shared_ptrs`但是在这方面，和 和有什么区别`unique_ptrs`？为什么`weak_ptr`get 只能与一个一起使用而不与另一个一起使用？为什么我不想弱引用别人拥有的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T06:06:57.233

从技术上讲， A`weak_ptr`是一种挂在一组`shared_ptr`管理某个共享对象的 s 的引用计数器上的方法。当最后一个`shared_ptr`对象被销毁时，对象也被销毁，但只要它有`weak_ptr`s，它的引用计数器就会一直存在。因此，通过任何仍然`weak_ptr`存在的对象，您可以检查对象是否仍然存在或已被销毁。

如果它仍然存在，那么`weak_ptr`您可以从中获得一个`shared_ptr`可以让您引用该对象的对象。

它的主要用途是打破循环。

特别是，一个对象可以包含一个`weak_ptr`对它自己的引用计数器的持有，这允许你`shared_ptr`从对象本身获得一个对象。也就是说，a使用与该对象的其他 s`shared_ptr`相同的引用计数器。`shared_ptr`这是如何`enable_shared_from_this`工作的。

`unique_ptr`没有任何引用计数器，因此挂在那个不存在的引用计数器上是没有意义的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T05:03:53.653

弱指针的主要观点是您可以尝试使指针变强，即拥有：

```
auto strongPtr = weakPtr.lock();

if (strongPtr)
{
    // still existed, now have another reference to the resource
}
else
{
    // didn't still exist
} 
```

注意第一条路径：*使弱指针更强大需要我们获得对象的所有权*。

这就是为什么它没有意义的原因`unique_ptr`：使弱指针变强的唯一方法是从其他地方*获取*`unique_ptr`资源，因为这意味着将其留在其他地方并带有意外的空指针。`shared_ptr`获得通行证，因为接受它真的意味着分享它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T05:02:28.377

我也是 C++11 的新手，所以如果有人知道得更好，我将不胜感激。

我认为没有太多理由，否则，你会使用 a ，`shared_ptr`因为它会破坏 a 的全部目的`unique_ptr`。A`unique_ptr`具有隐含的语义，即它可以完全控制它指向的对象。

# c++ - 在类模板中重载运算符（链表）

> ID：15457687
> 
> 赞同：1
> 
> 时间：2013-03-17T04:56:00.470
> 
> 标签：c++, templates, linked-list, operator-overloading

注意：**这是作业**

具体来说，我的问题是 + 赋值运算符，我正在编写一个单链表模板，并且必须创建运算符 +=、+、-、[] 等。我已经编写了数组，并且 += 到目前为止没有太多问题，但现在我正在使用 + 运算符，目前我有......

队列.h

```
#ifndef QUEUE_H
#define QUEUE_H

#include<iostream>
//#include "UnderGrad.h"
//#include "Grad.h"
#include <string.h>
#include<cstdlib>

template <typename T>
class Queue
{
class Node
{
    friend class Queue;
    private:
    T* data;
    Node* next;
};

public:
    Queue() {head = NULL; tail = NULL; numNodes = 0;}
    ~Queue () {clear();}

    //overloaded operators
    T& operator [] (int);
    const T& operator [] (int) const;
    Queue<T>& operator += (T*);
    Queue<T>& operator += (Queue<T>&);
    friend Queue<T> operator+ (Queue<T> inList,T* tbAdded)
    {
        inList.pushBack(tbAdded);

        return inList;
    }
    //Queue<T> operator + (Queue<T>, Queue<T>&);
    //Queue<T>& operator -= (T*&);
    //Queue<T>& operator -= (const Queue<T>&);
    //Queue<T> operator - (T, const T&);
    //Queue<T> operator -(Queue<T>, const Queue<T>&);
    //Queue<T>& operator ! ();

    void pushBack(T*);
    //nice to be ble to clear all sometimes rather than write a for loop evertime you want ot clear the list
    void clear();
    void popFront();

    bool empty();
    T* front();
    int size() const;

    //used while an individual is using create app, so you can go back and edit prevous pages of the app
    T* getPrev(T*);
    T* back();
    void removeNode(T*);
    void sortList();

private:
Node* head;
Node* tail;
int numNodes;

};

//be carefule here with automatic variables
//as it will not create a new instance
template <typename T>
Queue<T>& Queue<T>::operator += (T* tbAdded)
{
    this -> pushBack(tbAdded);
return *this;
}

template <typename T>
Queue<T>& Queue<T>::operator += (Queue<T> &tbAdded)
{   
T* temp;

while (tbAdded.front() != NULL)
{
    temp = (T*) new T(*(tbAdded.front()));
    this -> pushBack(temp);
    tbAdded.popFront();
}

return *this;
}

template <typename T>
const T& Queue<T>::operator[] (int index) const
{
int count = 0;
Node *temp = head;

while (count < index && temp -> next != NULL)
{
    count++;
    temp = temp -> next;
}

if (count < index)
{
    std::cerr << "ArrayOutOfBounds: Index at: " << index << " ArrayLength: " << count << std::endl;
    exit(1);
}
else
{
    return *(temp -> data);
}
}

template <typename T>
T& Queue<T>::operator[] (int index)
{
int count = 0;
Node *temp = head;

while (count < index && temp -> next != NULL)
{
    count++;
    temp = temp -> next;
}

if (count < index)
{
    std::cerr << "ArrayOutOfBounds: Index at: " << index << " ArrayLength: " << count << std::endl;
    exit(1);
}
else
{
    return *(temp -> data);
}
}

//adds node to the back of the list
template <typename T>
void Queue<T>::pushBack(T *tbAdded)
{
    //  std::cout << "hello" << std::endl;

Node *temp = new Node;
//I copy the data into the heap, because for some operations i want to use save   local variables which poses problematic
temp -> data = tbAdded;
temp -> next  = NULL;
    //  std::cout << "hello" << std::endl;
if (head == NULL)
{
    //  std::cout << "bye" << std::endl;
    head = temp;
    tail = head;
}   
else
{
    //  std::cout << "shy" << std::endl;
    tail -> next = temp;
    tail = tail -> next;

}
    //  std::cout << "hello" << std::endl;
numNodes++;
}

//returns length of Queue
template <typename T>
int Queue<T>::size() const
{
return numNodes;
}

//removes a node formt he fornt of the list
template <typename T>
void Queue<T>::popFront()
{
if (head != NULL)
{
    Node *temp = head;
    head = head ->next;
    delete (temp -> data);
    delete (temp);
    numNodes--;
    if (numNodes > 0)
    {
        numNodes--;
        if (numNodes == 0)
        {
            tail = NULL;
        }
    }
}
}

//clears the list
template <typename T>
void Queue<T>::clear()
{
while (head != NULL)
{
    popFront();
}
}

//returns true iff list is empty
template <typename T>
bool Queue<T>::empty()
{
if (numNodes == 0)
{
    return true;
}

return false;
}

//returns data at fornt of list unless the list is empty then it returns null
template <typename T>
T* Queue<T>::front()
{
if (head != NULL)
{
    return head -> data;
}
else
{
    return NULL;
}
}

 //sorts undgrad info
//template <>
//inline void Queue<UnderGrad>::sortList()
//{
//  Node *temp = head;
//  UnderGrad *info;
//
//  for (int i = 0; i < size(); i++)
//  {
//      while (temp -> next)
//      {
//          std::string temp1 = (*(temp -> data)).getCourse();
//          std::string temp2 = (*(temp -> next -> data)).getCourse();
//          if (strcmp(temp1.c_str(), temp2.c_str()) > 0)
//          {
//              info = temp -> data;
//              temp -> data = temp -> next -> data;
//              temp -> next -> data = info;
//
//          }
//          else if (strcmp(temp1.c_str(), temp2.c_str()) == 0 && 
//              (*(temp -> data)).getGPA() < (*(temp -> next -> data)).getGPA())
//          {
//              info = temp -> data;
//              temp -> data = temp -> next -> data;
//              temp -> next -> data =    info;                 
//          }
//
//          temp = temp -> next;
//      }
//      
//      temp = head;
//  }
//  
//
//  
//}

//sorts Grad info
//template <>
//inline void Queue<Grad>::sortList()
//{
//  Node *temp = head;
//  Grad *info;
//
//  for (int i = 0; i < size(); i++)
//  {
//      while (temp -> next)
//      {
//          std::string temp1 = (*(temp -> data)).getCourse();
//          std::string temp2 = (*(temp -> next -> data)).getCourse();
//          std::string temp3 = (*(temp -> data)).getResearch();
//          std::string temp4 = (*(temp -> next -> data)).getResearch();
//          if (strcmp(temp1.c_str(), temp2.c_str()) > 0)
//          {
//              info = temp -> data;
//              temp -> data = temp -> next -> data;
//              temp -> next -> data = info;
//
//          }
//          else if (strcmp(temp1.c_str(), temp2.c_str()) == 0 && 
//              strcmp(temp3.c_str(), temp4.c_str()) > 0)
//          {
//              info = temp -> data;
//              temp -> data = temp -> next -> data;
//              temp -> next -> data = info;                    
//          }
//
//          temp = temp -> next;
//      }
//      temp = head;
//  }
//  
//
//  
//}

//these mothds i was considering using for a bonus but never completed they are used   no where in my code for now atleast
//this method is used when a back button is pressed so i can go from end to front of a list (since this is supposed to be a singly linked list this will be inneficient)
//that way if i have multiple things i.e related courses saved i can go back and edit  them b4 i save the app
template <typename T>
T* Queue<T>::getPrev(T* curNode)
{
if (curNode == head)
{
    return NULL;
}

Node *temp = head;
while (temp -> next != curNode)
{
    temp = temp -> next;
}

return temp -> data;
}

//if editing data i need a acces the last node in order to be able to go back and eit nodes back -> front
template <typename T>
T* Queue<T>::back()
{
if (tail != NULL)
{
    return head -> data;
}
else
{
    return NULL;
}
}

//if we decide to go back and edit we will need to remove the old node
template <typename T>
void Queue<T>::removeNode(T *tbRemoved)
{
Node *curNode, *prevNode;

curNode = head;

if (tbRemoved == head -> data)
{
    head = head -> next;
    delete curNode -> data;
    delete curNode;
}

while (curNode -> data != tbRemoved)
{
    prevNode = curNode;
    curNode = curNode -> next;
}

prevNode -> next = curNode -> next;
delete curNode -> data;
delete curNode;
}

#endif 
```

主文件

```
#include"Queue.h"
#include<iostream>

using namespace std;

int main()
{
Queue<int> intList;
Queue<int> intList1, intList2;
int *t;

intList.pushBack((int*) new int (5));
intList.pushBack((int*) new int (10));
intList.pushBack((int*) new int (15));
intList.pushBack((int*) new int (20));

intList += ((int*) new int (25));
cout << intList[4] << "!" << endl;
cout << "?" << endl;
cout << "?" << endl;
cout << "?" << endl;
intList = intList + ((int*) new int (35));
cout << intList[5] << "!" << endl;
intList += ((int*) new int (30));
cout << intList[5] << "!" << endl;
cout << "?" << endl;
cout << "?" << endl;
cout << "?" << endl;

intList1.pushBack((int*) new int (2));
intList1.pushBack((int*) new int (7));
intList1.pushBack((int*) new int (9));
intList1.pushBack((int*) new int (11));
intList += intList1;
    intList1.clear();
cout << intList[6] << "!" << endl;
cout << intList[2] << "!" << endl;
intList.clear();
intList1.clear();
cout << "?" << endl;

Queue<string> strList;
cout << "?" << endl;    
strList.pushBack((string*) new string("hi"));
strList.pushBack((string*) new string("bi"));
strList.pushBack((string*) new string("di"));
strList.pushBack((string*) new string("ki"));
cout << "?" << endl;
cout << strList[2] << "!" << endl;
return 0;
} 
```

输出：25！

?

?

?

分段错误（核心转储）

我需要实现 + 运算符，因此它接受一个数据指针并返回一个由旧列表和新节点组成的新列表，我在类模板本身中编写了这个函数，因为我读到它是在外面写它的问题，比如我的其余功能。我已经尝试了一些方法来让它工作

*   使用我定义的 += 赋值运算符（加号可以正常工作，但是当我将它与他的函数一起使用时出现问题？）

*   我已经尝试创建一个新列表并用旧数据和新数据填充它，然后返回该列表，但没有用..所以现在我混淆了正确方向的点会很糟糕！

    * * *

编辑：我尝试从类定义中删除我的 + 运算符并将其减少为接受一个参数

```
template <typename T>
Queue<T>& Queue<T>::operator+ (T* tbAdded)
{
Queue<T> *temp = (Queue<T> *) new Queue<T>(*this);
temp -> pushBack(tbAdded);
  //    std::cout << (*temp)[5] << std::endl;
  //    std::cout << (*this)[3] << std::endl;
return *temp;
} 
```

形成我所有的测试，这似乎是“工作”，但是在我的测试结束时（在所有输出正确输出之后）存在分段错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:34:55.340

您需要为您的类定义一个复制构造函数和一个赋值运算符。这些将需要逐个元素地复制整个列表。

在以下代码中：

```
Queue<T> *temp = (Queue<T> *) new Queue<T>(*this); 
```

`Queue<T>(*this)`调用复制构造函数。由于您不提供，编译器会为您生成一个。该自动生成的复制构造函数只是对您的对象进行逐个字段的复制。换句话说，它复制`head`和`tail` *指针*，以及 的值`numNodes`。

然而，这是错误的，因为当原始元素和副本超出范围时，它们都会尝试释放相同的元素。这会导致未定义的行为，并解释您所看到的崩溃。

见[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。

# microsoft-metro - 将 C++ AMP 与 Direct2D 结合使用

> ID：15457694
> 
> 赞同：3
> 
> 时间：2013-03-17T04:57:11.733
> 
> 标签：microsoft-metro, textures, direct3d, direct2d, c++-amp

是否可以将 C++ AMP 生成的纹理用作屏幕缓冲区？

我想用我的 C++ AMP 代码（已经完成）生成一个图像，并使用这个图像来填充 Windows 8 Metro 应用程序的整个屏幕。图像每秒更新 60 次。

我一点也不精通 Direct3D。我使用 Direct2d 模板应用程序作为起点。

首先，我尝试直接从 C++ AMP 代码中的交换链操作缓冲区，但是任何写入该纹理的尝试都会导致错误。

在 GPU 上使用 AMP 处理数据，然后将其移动到 CPU 内存以创建可以在 D2D API 中使用的位图似乎效率低下。

有人可以分享一段代码，让我可以直接使用 C++ AMP 操作交换链缓冲区纹理（数据不离开 GPU），或者至少用来自另一个不离开 GPU 的纹理的数据填充该缓冲区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:16:41.957

您可以在 AMP Texture<> 和 ID3D11Texture2D 缓冲区之间进行互操作。可以在[此处的第 11 章](http://ampbook.codeplex.com/)示例中找到完整的代码和其他互操作示例。

```
//  Get a D3D texture resource from an AMP texture.

texture<int, 2> text(100, 100);
CComPtr<ID3D11Texture2D> texture;
IUnknown* unkRes = get_texture(text); 
hr = unkRes->QueryInterface(__uuidof(ID3D11Texture2D), 
    reinterpret_cast<LPVOID*>(&texture));   
assert(SUCCEEDED(hr));

// Create a texture from a D3D texture resource

const int height = 100; 
const int width = 100;

D3D11_TEXTURE2D_DESC desc; 
ZeroMemory(&desc, sizeof(desc)); 
desc.Height = height; 
desc.Width = width; 
desc.MipLevels = 1; 
desc.ArraySize = 1; 
desc.Format = DXGI_FORMAT_R8G8B8A8_UINT; 
desc.SampleDesc.Count = 1; 
desc.SampleDesc.Quality = 0; 
desc.Usage = D3D11_USAGE_DEFAULT; 
desc.BindFlags = D3D11_BIND_UNORDERED_ACCESS | D3D11_BIND_SHADER_RESOURCE; 
desc.CPUAccessFlags = 0; 
desc.MiscFlags = 0;

CComPtr<ID3D11Texture2D> dxTexture = nullptr; 
hr = device->CreateTexture2D(&desc, nullptr, &dxTexture);
assert(SUCCEEDED(hr));

texture<uint4, 2> ampTexture = make_texture<uint4, 2>(dxView, dxTexture); 
```

# android - android 上的 Facebook：你什么时候 openActiveSession 和 openForRead

> ID：15457695
> 
> 赞同：2
> 
> 时间：2013-03-17T04:57:11.907
> 
> 标签：android, facebook, session, facebook-login

我有一个问题，什么时候使用`openActiveSession`，什么时候使用`openFoRead`。

我可以`openForRead`在用户登录 facebook 时使用额外的读取权限，它是否也会像打开一个活动会话一样`openActiveSession`？

# mdx - MDX：使用 generate 解析层次结构以搜索特定场景

> ID：15457696
> 
> 赞同：1
> 
> 时间：2013-03-17T04:57:25.477
> 
> 标签：mdx

我创建了以下结构的层次结构：

```
[Contact Key].[Type].[Event Date Key].[Event Name] 
```

我希望生成一组具有最新（LASTCHILD？）`[Contact Key]`的产品的所有 s 。`[Type]=FineArt``[Event Date Key]``[Event Name]=Cancel`

这是我的理解`GENERATE`，但对我来说并没有发生：

```
GENERATE (
   [Subscription Event].[Hierarchy 1].MEMBERS
  ,[Subscription Event].[Hierarchy 1].[Contact Key].&[FineArt].[Event Date Key].LASTCHILD.&[Cancel]
) 
```

什么做错了？

# ios - IOS 应用程序中多个 MKMapViews 的问题

> ID：15457705
> 
> 赞同：0
> 
> 时间：2013-03-17T04:58:23.117
> 
> 标签：ios, mkmapview, mkannotation

`MKMapViews`我的iOS 应用程序中存在多个问题。我们目前使用的`TabBarController`是基本导航。当一个`MKMapView`'s annotation 的按钮 segues 到另一个视图，该视图有一个通向另一个`MKMapView`. 第一个`MKMapView`适用于注释和功能，但第二个`MKMapView`不会添加注释。

我相信该类与 StoryBoard 的布局相关联，因为它`viewDidLoad`在 segue 上触发了该功能。当我单步执行`viewDidLoad`函数时，它会到达`addAnnotation`函数调用，但注释不会添加到地图中。

我知道帖子“[同一应用程序中的多个地图视图](https://stackoverflow.com/questions/9099137/multiple-map-views-in-same-app)”涵盖了类似的问题，但发帖人似乎不太友好，因此没有得到任何答案。

`MKMapViews`如果您需要更多信息，或者如果您在 iOS 项目中实现了多个，请告诉我您的想法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:53:35.120

仔细查看您的代表和 IBOutlets 设置，以确保每个视图都指向正确的地图视图。然后确保每个函数都使用它给出的参数，例如

```
- (MKAnnotationView *)mapView:(MKMapView *)aMapView viewForAnnotation:(id < MKAnnotation >)annotation
{
    //Only use "aMapView here not "mapView"
} 
```

# php - PHP MVC 加载默认控制器但不会重写 URL

> ID：15457706
> 
> 赞同：1
> 
> 时间：2013-03-17T04:58:35.957
> 
> 标签：php, apache, .htaccess, mod-rewrite

我正在使用 PIP mvc。我将默认控制器设置为“main”，因此我的基本 URL 加载正常。当我尝试使用“example.com/main/index”样式访问 URL 时，出现 404 错误。

我在我的主目录中使用 OS X 10.8.2 和虚拟主机。

我的.htaccess：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L]
</IfModule>
Options -Indexes 
```

我知道 apache 正在读取 htaccess 文件，因为我删除了“Options -Indexes”并且能够浏览文件系统。

它与 PIP 下载中的那个相匹配。

谢谢！

# subset - CLIPS 子集重复值

> ID：15457708
> 
> 赞同：2
> 
> 时间：2013-03-17T04:58:57.143
> 
> 标签：subset, clips

我想要一个规则来建议玩家库存中可能的项目组合。

以下是一些示例事实。物品事实包含物品组合的配方，玩家事实包含玩家库存中的物品。

```
(player (name x) (inventory "aaa" "bbb" "ccc"))

(item (name xxx) (recipe "aaa" "bbb"))
(item (name yyy) (recipe "aaa" "aaa" "ccc")) 
```

以下是我写的规则：

```
; ; Item Combination rule
(defrule item-combination
    (player (name ?n1) (inventory $?i1))
    (item (name ?n2) (recipe $?i2))
    (test (subsetp $?i2 $?i1))
    =>
    (assert (can-combine ?n1 ?n2))
) 
```

如果配方中没有重复的项目，则该规则很有效。

例如，对于项目 yyy，我们需要 2 个“aaa”实例，但是 (subsetp (aaa aaa ccc) (aaa bbb ccc)) 将返回 true。但是，我要求在玩家的库存中包含 2 个“aaa”实例。

我想知道是否有一个功能可以检查涉及重复值的子集。

编辑：我写了我自己的函数

```
(deffunction subsetdp (?sub ?set) 
    (if (eq 0 (length$ ?sub)) 
        then (return TRUE))
    (bind ?x (member$ (nth$ 1 ?sub) ?set))
    (if ?x 
        then (return (subsetdp (rest$ ?sub) (delete$ ?set ?x ?x))))
    FALSE)
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T20:05:17.290

如果您想检查重复项，您需要编写自己的函数。

# c# - 使用 Bouncy Castle 将 RSA 公钥转换为 RFC 4716 公钥

> ID：15457710
> 
> 赞同：6
> 
> 时间：2013-03-17T04:59:17.580
> 
> 标签：c#, ssh, bouncycastle, ssh-keys, rsa-key-fingerprint

我希望将 RSA 公钥转换为可以用作 SSH 公钥的东西。

目前我有 Bouncy Castle 为我生成一个如下所示的公钥：

```
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAq1Y5300i8bN+cI2U3wJE
Kh3xG/.........jbuz+WB0vvG
P25UwCle2k5siVMwbImEYsr+Xt0dsMmGVB3/6MHAqrM3QQdQ8p2E5TyzL+JYa1FT
gwIDAQAB
-----END PUBLIC KEY----- 
```

我希望它具有类似于此的 RFC 4716 格式：

`ssh-rsa AAAAB3NzaC1yc2.......G1p2Ag3mZLFsks7RNHVLgMsGIAikQ==`

到目前为止，我使用 Bouncy Castle 的代码如下所示：

```
var r = new Org.BouncyCastle.Crypto.Generators.RsaKeyPairGenerator();
r.Init(new KeyGenerationParameters(new SecureRandom(), 2048));
var keys = r.GenerateKeyPair();

var stringWriter = new StringWriter();

var pemWriter = new PemWriter(stringWriter);
pemWriter.WriteObject(keys.Private);
pemWriter.Writer.Flush();
stringWriter.Close();
PrivateKey = stringWriter.ToString();

stringWriter = new StringWriter();
pemWriter = new PemWriter(stringWriter);
pemWriter.WriteObject(keys.Public);
pemWriter.Writer.Flush();
stringWriter.Close();
PublicKey = stringWriter.ToString(); 
```

如何重新格式化和编码密钥以使其看起来像这样？

有没有人使用 Bouncy Castle 或类似工具创建 SSH 公钥？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-12-26T15:54:48.367

我在 BouncyCastle 中没有找到现成的功能。因此，解决方法是使用`PemReader`然后格式化结果。结果将作为`PublicSSH`属性提供：

```
using Org.BouncyCastle.Crypto;
using Org.BouncyCastle.Crypto.Generators;
using Org.BouncyCastle.Crypto.Parameters;
using Org.BouncyCastle.Math;
using Org.BouncyCastle.OpenSsl;
using Org.BouncyCastle.Security;
using System;
using System.IO;
using System.Text;

namespace Deploy4Me.Common.Utils
{
    public class RSAKey
    {
        public string PublicPEM { get; set; }
        public string PrivatePEM { get; set; }
        public string PublicSSH { get; set; }
    }

    public static class RSA
    {
        public static RSAKey Generate()
        {
            try
            {
                RSAKey result = new RSAKey();
                IAsymmetricCipherKeyPairGenerator gen;
                KeyGenerationParameters param;
                gen = new RsaKeyPairGenerator();
                param = new RsaKeyGenerationParameters(
                    BigInteger.ValueOf(3L),
                    new SecureRandom(),
                    2048,
                    80
                );
                gen.Init(param);
                AsymmetricCipherKeyPair pair = gen.GenerateKeyPair(); 
                using(TextWriter textWriter = new StringWriter())
                {
                    PemWriter wr = new PemWriter(textWriter);
                    wr.WriteObject(pair.Private);
                    wr.Writer.Flush();

                    result.PrivatePEM = textWriter.ToString();
                }

                using (TextWriter textWriter = new StringWriter())
                {
                    PemWriter wr = new PemWriter(textWriter);
                    wr.WriteObject(pair.Public);
                    wr.Writer.Flush();

                    result.PublicPEM = textWriter.ToString();
                }

                using (StringReader sr = new StringReader(result.PublicPEM))
                {
                    PemReader reader = new PemReader(sr);
                    RsaKeyParameters r = (RsaKeyParameters)reader.ReadObject();
                    byte[] sshrsa_bytes = Encoding.Default.GetBytes("ssh-rsa");
                    byte[] n = r.Modulus.ToByteArray();
                    byte[] e = r.Exponent.ToByteArray();

                    string buffer64;
                    using(MemoryStream ms = new MemoryStream()){
                        ms.Write(ToBytes(sshrsa_bytes.Length), 0, 4);
                        ms.Write(sshrsa_bytes, 0, sshrsa_bytes.Length);
                        ms.Write(ToBytes(e.Length), 0, 4);
                        ms.Write(e, 0, e.Length);
                        ms.Write(ToBytes(n.Length), 0, 4);
                        ms.Write(n, 0, n.Length);
                        ms.Flush();
                        buffer64 = Convert.ToBase64String(ms.ToArray());
                    }

                    result.PublicSSH = string.Format("ssh-rsa {0} generated-key", buffer64);
                }

                return result;
            }
            catch (Org.BouncyCastle.Crypto.CryptoException ex)
            {
                throw ex;
            }
        }

        private static byte[] ToBytes(int i)
        {
            byte[] bts = BitConverter.GetBytes(i);
            if (BitConverter.IsLittleEndian)
            {
                Array.Reverse(bts);
            }
            return bts;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-21T03:10:07.637

注意：我在微软工作，但这不是微软的回答，只是个人的。

添加到 Pavels 答案中，

我发现由于某种原因在生成 3072 位 RSA 密钥时，PuttyGen 会生成与我的不同的 RSA 公钥。

经过研究，我发现在Putty Gen Program的源代码中似乎会对Byte数组做.Length + 1，添加一个前导0。

对于 BouncyCastle，您将更改此行。

```
 ms.Write(ToBytes(n.Length), 0, 4);
                    ms.Write(n, 0, n.Length); 
```

到

```
 ms.Write(ToBytes(n.Length+1), 0, 4);//Add +1 to Emulate PuttyGen
                    ms.Write(new byte[] { 0 }, 0, 1); //Add a 0 to Emulate PuttyGen
                    ms.Write(n, 0, n.Length); 
```

对于 Microsoft .net **RSACryptoServiceProvider**，它看起来像这样

```
 RSACryptoServiceProvider RSA = new RSACryptoServiceProvider(3072);
            byte[] sshrsa_bytes = Encoding.Default.GetBytes("ssh-rsa");
            byte[] n = RSA.ExportParameters(false).Modulus;
            byte[] e = RSA.ExportParameters(false).Exponent;
            string buffer64;
            using (MemoryStream ms = new MemoryStream())
            {
                ms.Write(ToBytes(sshrsa_bytes.Length), 0, 4);
                ms.Write(sshrsa_bytes, 0, sshrsa_bytes.Length);
                ms.Write(ToBytes(e.Length), 0, 4);
                ms.Write(e, 0, e.Length);
                ms.Write(ToBytes(n.Length+1), 0, 4); //Remove the +1 if not Emulating Putty Gen
                ms.Write(new byte[] { 0 }, 0, 1); //Add a 0 to Emulate PuttyGen
                ms.Write(n, 0, n.Length);
                ms.Flush();
                buffer64 = Convert.ToBase64String(ms.ToArray());
            }

            string pubssh = string.Format("ssh-rsa {0} generated-key", buffer64); 
```

You can see my Private Key I used for testing & the putty gen source code link [https://www.cameronmoten.com/2017/12/21/rsacryptoserviceprovider-create-a-ssh-rsa-public-key/](https://www.cameronmoten.com/2017/12/21/rsacryptoserviceprovider-create-a-ssh-rsa-public-key/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-17T11:04:36.577

意识到您的帖子现在已经有几个月了，但如果您仍在寻找，请尝试下面的代码片段，灵感来自 gotoalberto on [Using public key from authorized_keys with Java security](https://stackoverflow.com/questions/3531506/using-public-key-from-authorized-keys-with-java-security) ...

```
public static String getPublicOpenSSHKey(String pem, String userComment)
   throws IOException, EWAException
{
    // Read the PEM supplied using Bouncy Castle's PEMReader ...
    PEMReader r = new PEMReader(new StringReader(pem));
    try { keyPair = (KeyPair) r.readObject(); }
    catch (IOException ioe) { ioe.printStackTrace(); }
    finally { try { r.close(); } catch (Throwable ignore) { } }

    PublicKey publicKey = keyPair.getPublic();

    if (publicKey.getAlgorithm().equals("RSA"))
    {
        RSAPublicKey rsaPublicKey = (RSAPublicKey) publicKey;
        ByteArrayOutputStream byteOs = new ByteArrayOutputStream();
        DataOutputStream dos = new DataOutputStream(byteOs);
        dos.writeInt("ssh-rsa".getBytes().length);
        dos.write("ssh-rsa".getBytes());
        dos.writeInt(rsaPublicKey.getPublicExponent().toByteArray().length);
        dos.write(rsaPublicKey.getPublicExponent().toByteArray());
        dos.writeInt(rsaPublicKey.getModulus().toByteArray().length);
        dos.write(rsaPublicKey.getModulus().toByteArray());
        String enc = Base64.encode(byteOs.toByteArray());
        return("ssh-rsa " + enc + " " + userComment);
     }
     else
        throw new IllegalArgumentException("Unknown public key encoding: " + publicKey.getAlgorithm());
} 
```

# c++ - noexcept 说明符和编译器优化

> ID：15457711
> 
> 赞同：7
> 
> 时间：2013-03-17T04:59:24.030
> 
> 标签：c++, c++11, compiler-optimization, noexcept

我已经阅读了关于 noexcept 说明符和编译器优化的不清楚的内容。指定`noexcept`编译器时可能会优化：

*   编译时间（更快的编译）。
*   执行时间（代码运行速度更快）。
*   或两者？
*   还是没有？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T13:42:36.290

noexpect 的最初原因是使库能够在内部使用更快的移动构造函数，如果调用函数不允许按规范抛出。

> 接下来，当您的类型的移动构造函数和移动赋值使用 noexcept 注释时，可以在 STL 矢量等容器中实现大的性能优化。当 STL 实用程序 std::move_if_noexcept 检测到您的动作没有抛出时，它将使用这些安全动作而不是副本进行某些操作（如调整大小）。在容器存储数百万个元素的情况下，这将实现巨大的优化。

（引自[using-noexcept](http://akrzemi1.wordpress.com/2011/06/10/using-noexcept/)）

* * *

此外，如果编译器知道由于 noexpect 说明符而不会引发异常，则编译器不必为堆栈展开生成额外的代码。

* * *

我看不出 noexcept 说明符如何显着影响编译时间。不过，由此产生的运行时间可能会快得多。

# amazon-web-services - 刀 ec2 创建服务器和厨师节点

> ID：15457717
> 
> 赞同：0
> 
> 时间：2013-03-17T05:00:39.993
> 
> 标签：amazon-web-services, amazon-ec2, chef-infra

运行 knife ec2 create server 后，我预计厨师中会有一个节点，但没有。

保持 chef 和 ec2 同步的典型过程是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:16:57.003

理想情况下是的，新创建的节点应该向您的主厨服务器报告。如果它没有下载 chef-client 配方并将其部署在您的服务器中，当您使用 knife ec2 命令创建节点时，它应该自动将 chef-client 部署到您新创建的节点中，并且它应该向您的 chef-server 报告。即使我在厨师工作，这实际上也很正常，但从未遇到过这个问题。

# c# - 将预先打开的 IE 或进程附加到 Watin 库

> ID：15457718
> 
> 赞同：0
> 
> 时间：2013-03-17T05:00:58.477
> 
> 标签：c#, windows, vb.net, internet-explorer-9, watin

我在直接用 Watin 使用 -nomerge 参数打开 IE9 时遇到问题，所以我想如果我用

> Process.Start("IExplore.exe", "-nomerge about:blank");

然后将它附加到Watin，以便我可以控制浏览器，或者将PID附加到Watin以便Watin可以控制它，我已经尝试过

> Settings.MakeNewIe8InstanceNoMerge = true;

但它根本没有帮助，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:44:12.223

**您可以通过将此注册表项HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main** SessionMerging 更改为 0在工作站上全局更改配置

# javascript - AngularJS - 服务、工厂、过滤器等中的依赖注入

> ID：15457720
> 
> 赞同：58
> 
> 时间：2013-03-17T05:01:03.043
> 
> 标签：javascript, dependency-injection, angularjs

所以我有一些我想在我的 Angular 应用程序中使用的插件和库，并且（目前）我只是在以完全忽略依赖注入的方式引用这些函数/方法，因为它们在 99% 的应用程序中都是如此。

我有（例如）处理格式化和验证日期的 javascript 库“MomentJS”，我在整个应用程序的控制器、服务和过滤器中都使用了它。我学到的方法（使用 AngularJS）是创建一个引用该函数（及其方法）的服务，并将该服务注入我的控制器，效果很好。

问题是我真的需要在所有不同类型的组件中引用这个库，从服务到过滤器再到控制器和其他一切。所以，我想我的问题是你如何在过滤器、服务和其他不是控制器的东西中进行依赖注入？

这可能吗？这甚至是有益的吗？

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-03-17T05:14:41.893

是的，您可以对过滤器和指令使用依赖注入

前任：

筛选：

```
app.filter('<filter>', ['$http', function(http){
    return function(data){
    }
}]); 
```

指示：

```
app.directive('<directive>', ['$http', function(http){
    return {
        ....
    }
}]); 
```

服务：

```
app.factory('<service>', ['$http', function(http) {
  var shinyNewServiceInstance;
  return shinyNewServiceInstance;
}]); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-11-22T06:45:31.637

为了完整起见，这里是一个带有注入的服务示例：

```
app.service('<service>', ['$http', function($http) {
  this.foo = function() { ... }
}]); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-05-17T14:16:01.777

虽然已经存在的答案是正确且有效的，但 john papas 角度风格指南支持在[Y091](https://github.com/johnpapa/angular-styleguide/blob/master/a1/README.md#style-y091)`$inject`中使用该服务：

筛选：

```
app.filter('<filter>', MyFilter);
MyFilter.$inject = ['$http'];
function MyFilter() {
  return function(data) {
  }
} 
```

指示：

```
app.directive('<directive>', MyDirective);
MyDirective.$inject = ['$http'];
function MyDirective() {
  return {
    ...
  }
} 
```

工厂：

```
app.factory('<factory>', MyFactory);
MyFactory.$inject = ['$http'];
function MyFactory() {
  var shinyNewServiceInstance;
  return shinyNewServiceInstance;
} 
```

服务：

```
app.service('<service>', MyService);
MyService.$inject = ['$http'];
function MyService() {
  this.foo = foo;
  function foo(){
    ...
  }
} 
```

# sql - SQL Server 分组问题

> ID：15457722
> 
> 赞同：0
> 
> 时间：2013-03-17T05:01:22.203
> 
> 标签：sql, sql-server

我有两张桌子。

1.  `Customer ID, NAME, MonthlyIncome`
2.  `Orders ID, CustomerKey, TotalCost`

我想把这两张桌子合二为一，就像在商店里买的总金额一样。

```
CustomerKey, MonthlyIncome, TotalCost. 
```

我试图按 分组`CustomerKey`，但我无法包括其余的列。我应该使用哪个查询？

```
SELECT 
    fs.CustomerKey, SUM(fs.TotalCost) as TotalBought
FROM 
    FactOnlineSales fs
INNER JOIN 
    DimCustomer c on c.CustomerKey = fs.CustomerKey
GROUP BY 
    fs.CustomerKey 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:15:52.887

> 我尝试按 CustomerKey 分组，但无法管理如何包含其余列。

[就这样做](http://3.bp.blogspot.com/-zOUTYrhxHtk/TtTfSqA3iqI/AAAAAAAABuY/hHyxLchsmpE/s1600/nike-just-do-it1.jpg)：

```
SELECT fs.CustomerKey,
       c.MonthlyIncome,
       SUM(fs.TotalCost) as TotalBought
  FROM FactOnlineSales fs
       INNER JOIN DimCustomer c
         ON c.CustomerKey = fs.CustomerKey
 GROUP BY fs.CustomerKey,
          c.MonthlyIncome 
```

大概`CustomerKey`是唯一的，因此按不太唯一的列分组不会改变`SUM`总数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:28:24.027

您没有提及您使用的 SQL Server**版本**- 但如果您使用的是 SQL Server **2005**或更高版本，则可以使用以下`OVER()`子句：

```
SELECT 
    fs.CustomerKey, 
    c.MonthlyIncome,
    TotalBought = SUM(fs.TotalCost) OVER(PARTITION BY fs.CustomerKey)
FROM 
    FactOnlineSales fs
INNER JOIN 
    DimCustomer c on c.CustomerKey = fs.CustomerKey 
```

这基本上给了你`CustomerKey`，`MonthlyIncome`然后`TotalCost`对每个求和，`CustomerKey`并在你的输出中显示适当的值。`GROUP BY`在这种情况下不需要做 a

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T09:40:21.377

您可能在连接的 ON 子句中有错误。
您使用`CustomerKey`而不是`Customer ID`从`DimCustomer`表中。对于分组：您必须按未聚合的每一列进行分组，因此您可以包括`NAME`（因此您可以拥有描述性客户）和 `MonthlyIncome`.

```
SELECT 
    c."Customer ID",
    c.NAME, 
    c.MonthlyIncome,
    SUM(fs.TotalCost) as TotalBought
FROM 
    FactOnlineSales fs INNER JOIN DimCustomer c 
    on c."Customer ID" = fs.CustomerKey
GROUP BY 
    c."Customer ID",
    c.NAME,
    c.MonthlyIncome 
```

# c - C中的简单结构程序

> ID：15457723
> 
> 赞同：4
> 
> 时间：2013-03-17T05:01:57.550
> 
> 标签：c, list, pointers, struct

我是编程新手，所以请多多包涵。谁能解释一下最后一行代码在做什么以及整个代码块试图做什么。我知道第一个块是创建一个名为 node 的结构并向它添加两个指针 *next 和 *prev。顺便说一句，这是链表程序的一部分

```
struct node
 {
  char line[80];
  struct node *next,*prev;
 };

struct node *start=NULL,*temp,*temp1,*temp2,*newnode; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T05:08:03.400

```
struct node *start=NULL,*temp,*temp1,*temp2,*newnode; 
```

可以作为

```
struct node *start=NULL;
struct node  *temp;
struct node *temp1;
struct node *temp2;
struct node *newnode; 
```

现在很容易理解..？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T05:05:35.603

最后一行是创建 5 个类型的指针，`struct node`即`start`指向`NULL`、`temp`、`temp1`和。`temp2``newnode`

整个代码块实际上是创建一个名为的结构体`node`，其中包含一个 80 个字符的数组，后跟指向下一个和上一个的指针。因此，它正在为双向链表创建一个结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T05:06:33.007

最后一行是创建 5 个 struct node 类型的指针。这里 start 被初始化为 Null。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-17T05:06:49.607

最后一行代码定义了 5 个变量，它们都是指向`struct node`. 其中之一，`start`，被初始化为 NULL；如果变量在任何函数之外，其他变量也初始化为 NULL，但如果它们在函数内部，则未初始化。未初始化的指针应在使用前进行初始化。不应取消引用空指针；疯狂位于空指针（或更常见的是核心转储）的末尾。

# jquery - 如何使用 jQuery 向后端提交值并接收结果

> ID：15457727
> 
> 赞同：1
> 
> 时间：2013-03-17T05:02:33.470
> 
> 标签：jquery, ajax, jsp, struts2

我正在使用以下 jquery 代码来接收值并验证完美工作的值。然后将它们发送到我的 java 应用程序并接收响应，但它不会将请求发送到指定的方法。

```
 <script type="text/javascript">
            $(document).ready(function(){
                $('#reg').click(function(){
                    $('#signup').show('fast');
                });
                $('#register').click(function(){
                    var name = $("#name").val();
                    var family = $("#family").val();
                    if(name.length <= 1)
                    {
                        $("#messageSent").text("name is invalid");
                    }
                    else if(family.length <= 1){
                            $("#messageSent").text("family is invalid");
                    }else{
                        var data = 'name=' + name & 'family='+ family;
                          $.ajax({
                              type:"GET",
                              cache:false,
                              url:"http://localhost:8080/myApp/register.jsp",
                              data : data,
                              success:function(html){
                                  $("#messageSent").html(html);
                              }
                          });
                          return false;
                         }

                    });
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:49:47.867

好的，这是您需要做的

1）**如何将表单的值传递给验证函数？**

答：您不需要传递值，验证函数可以获取表单元素的值。这是你如何做到的。

```
var name=$("name").val();
var family=$("family").val(); 
```

一旦你得到所有的值，你就可以做任何你想做的事情来验证它。

2)**如何显示错误或确认信息？（因此表单一旦提交就不应隐藏）。**

答：可以创建一个 div 并设置它的 css 属性 display:hidden。如果您的验证功能未验证表单，您可以使此 div 可见并在其中显示错误。

```
<div id="merror" style="display:none"></div> 
```

然后在您的验证功能中

```
$("merror").show();
$("merror").html("The form validation failed, please try again"); 
```

3）**我的方法还有其他选择吗？**

答：如果您已经在使用 jquery，请使用 jquery $.post 来发布数据，而不是常规的 javascript ajax 方法。使用 jquery 方法的好处是它的跨浏览器兼容并且更易于使用。

还有一件事。当您收到服务器的响应时，您应该显示确认。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T07:04:13.083

您可以使用 jquery validate 来验证表单。

有关更多信息，请参阅此链接：http: [//docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

请找到更新的答案。希望能帮助到你。

```
<script type="text/javascript">
$(document).ready(function () {
    $('#registrationform').hide();
    $('#registrationBtn').click(function () {
        $('#registrationform').show();
    });
});

function saveForm() {
    $("#registrationform").validate({
        rules: {
            //add rules for validation here
            name : "required"
        },
        submitHandler: function() {
            //ajax code to execute if form is successfully validated
            var request = $("#registrationform").serialize();
            $.ajax({
                type: "POST",
                url: url,
                data: request,
                dataType:"json",
                async:false,
                success: function(response){    
                    $('#registrationform').hide();                                                           
                },
                error: function(XMLHttpRequest,textStatus){                     
                }
            });            
        },
        messages : {
            //error messages to display
            name : "Please enter the name"
        }
    });
}
</script>
<input type="button" id="registrationBtn" name="registrationBtn" value="Register"/>
<form id="registrationform">
    <input type="text" id="name" name="name" /><br/>
    <input type="submit" id="submitBtn" name="submitBtn" onclick="saveForm();"/>
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T07:10:05.433

为什么不使用 AJAX jQuery？“$.ajax({});”

我希望我有所帮助。

```
$(document).ready(function() {
   $('#register').submit(function() {
      var name = $('#name').val();
      var family = $('#family').val();
      if($.trim(name) == '' || $.trim(family) == '') {
         alert('You can not leave fields blank. Sorry.');
      } else {
         $.ajax({
            type: 'POST',
            url: 'form.php',
            beforeSend: function() {
               // function while sending...
            },
            success: function(data) {
               // function if success. "data" returns the response
            },
            error: function() {
               // Create function for errors in the page request.
            }
         });
      }
   });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T04:03:03.087

创建另一个 jsp 文件并将结果放入其中 然后从第一页调用控制器并在主页面的 div 中提供新的 jsp 文件。

```
$.ajax({
    type: "GET",
    url: "nameOfAction",
    data:"name=" + name + "family=" + email,
    dataType: "text/html;charset=utf-8",
    success: function(msg) {
        $("#nameOfDive").html(msg);
    }
}); 
```

# android - 应用程序小部件不会显示在应用程序抽屉中，似乎与无效尺寸有关

> ID：15457729
> 
> 赞同：3
> 
> 时间：2013-03-17T05:02:50.877
> 
> 标签：android, android-appwidget, appwidgetprovider

我在 LogCat 中收到以下错误：

> 03-16 23:33:47.239: E/Rosie.AppsCustomizePag_(19861): 小部件 WidgetSummary(TestApp/APP_WIDGET/0 x 0/-1/ComponentInfo{com.example.testapp/com.example.testapp.ExampleAppWidgetProvider}/0 /false) 具有无效维度 (0, 0)

这是我的小部件布局：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android" >
    android:minWidth="294dp"
    android:minHeight="72dp"
    android:updatePeriodMillis="86400000"
    android:initialLayout="@layout/example_widget"
    android:previewImage="@drawable/ic_launcher"
</appwidget-provider> 
```

任何想法我做错了什么？我对 Android 很陌生。还需要什么其他信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:57:24.693

钱币。我在 xml 文件中有一个额外的“>”。把一切都搞砸了。

# mysql - 从表中获取表名并使用表名访问数据

> ID：15457731
> 
> 赞同：0
> 
> 时间：2013-03-17T05:03:27.693
> 
> 标签：mysql, database, select

我想创建一个数据库，其中有一个存储在表中的表名列表。现在借助此列表，我可以访问其他表。

前任 ：-

```
Table name :- table_list (2 column i.e. table_name,table_id)
table_list attributes 
authentication 1 
basic_info 2 
contact 3 
```

我可以使用 select 语句直接访问这些表，但我想使用 table_list 表访问它们，最好使用 select 语句。

我试过了

```
select * from (select table_name as x from table_list where id=2) as y 
```

但无法获得正确的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T05:24:57.620

它被调用[`Prepared Statements`](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)并且它们的唯一用途是当您想在一个请求中实现您提到的需求时。否则，您可以轻松地以编程语言检索表名并使用手头的数据创建下一条语句。工作原理如下`Prepared Statements`：

```
SELECT table_name INTO @tbl FROM my_tables WHERE id = 1 LIMIT 1;
SET @sql := CONCAT('SELECT * FROM ', @tbl);
PREPARE stmt1 FROM @sql;
EXECUTE stmt1;
DEALLOCATE PREPARE stmt1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:52:41.117

表名（“标识符”）必须是发送给数据库的 SQL 文本的静态部分；标识符不能“即时”提供，无论是作为参数还是作为另一个 SQL 查询的结果。

要做你想做的事，你需要一个两步的方法。您可以使用一个（或多个）SQL 语句来获取您需要的标识符（表名、列名等），然后使用它来动态创建第二个 SQL 语句，作为字符串。

标识符（表名、列名）不能作为参数或“绑定变量”提供，它们必须是 SQL 文本的静态部分。

例如，要生成语句：

```
SELECT CONCAT('SELECT * FROM `',table_name,'` ORDER BY 1') AS stmt
  FROM table_list
 WHERE id = 2 
```

（编码细节取决于您使用的语言。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T05:10:00.327

```
TRY THIS

select * from (SELECT TABLE_NAME FROM TABLE_LIST WHERE ID=2)as y 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T05:13:55.123

由于您确定要访问的表名是 x，因此只需使用查询检查这样的表是否存在，并将 x 用于将来的目的。

# android - 移植 C++ 库 - o penSMILE 到 Android

> ID：15457733
> 
> 赞同：2
> 
> 时间：2013-03-17T05:04:31.243
> 
> 标签：android, speech, emotion

我需要有关如何将 C++ 中的开源 openSMILE [http://opensmile.sourceforge.net/](http://opensmile.sourceforge.net/)库移植到 Android 的指导。具体来说，我应该如何使用 SWIG 在 JAVA 中创建调用者代码，以及我应该如何使用 Android-NDK 在我的 android 应用程序中创建 JNI？我完全没有 Android 编程经验，所以我不知道如何开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-22T09:18:14.483

请参阅版本 2.3。来自[http://opensmile.audeering.com/](http://opensmile.audeering.com/)的 openSMILE 。

它包含一个带有 JNI 接口的 Android Studio 示例项目和构建脚本，以使用 NDK 为 Android 编译库和二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:30:36.733

```
 how to port the opensource openSMILE.? 
```

您可以下载该库的整个源代码，然后针对您的平台进行交叉编译，然后将其安装在 android 堆栈中或在 jni 中使用

```
 Specifically how should I use SWIG to create the caller code in JAVA..? 
```

在这里，您需要在 jnic 中为该库的每个 API 编写包装器，然后您将拥有该库的 java 导出 API，您可以在您的 android 应用程序中使用它。

# java - 滚动 3d 球的旋转

> ID：15457735
> 
> 赞同：3
> 
> 时间：2013-03-17T05:05:25.883
> 
> 标签：java, opengl, 3d, rotation

我在 3D 空间中有一个 Ball，它具有以下属性：

location - 表示球旋转位置的 Vector3f - 表示 x、y 和 z 轴旋转角度的 Vector3f

我想以 Vector3f“方向”表示的特定方向滚动球。我将如何根据我希望球滚动的方向计算适当的轴旋转矢量（见上文）？

我尝试了以下方法：

1.  将rotation.x 设置为direction.z
2.  将rotation.z 设置为direction.x

计算球的变换矩阵为：

```
private Matrix4f calculateEntityMatrix(EEntity entity)
{
    Matrix4f matrix = new Matrix4f();
    matrix.translate(new Vector3f(entity.getXLocation(), entity.getYLocation(), entity.getZLocation()));

    if(entity.getXRotation()>0)
    {
        matrix = matrix.rotate(entity.getXRotation(), new Vector3f(1f, 0f, 0f));
    }
    if(entity.getYRotation()>0)
    {
        matrix = matrix.rotate(entity.getYRotation(), new Vector3f(0f, 1f, 0f));
    }
    if(entity.getZRotation()>0)
    {
        matrix = matrix.rotate(entity.getZRotation(), new Vector3f(0f, 0f, 1f));
    }
    if(entity.getXScale()!=1 || entity.getYScale()!=1 || entity.getZScale()!=1)
    {
        matrix = matrix.scale(new Vector3f(entity.getXScale(), entity.getYScale(), entity.getZScale()));
    }

    return matrix;
} 
```

这在向下滚动 x 或 z 轴时有效，但是当我在两个轴之间的方向滚动时，旋转看起来不正确。我的假设是，这是由于旋转计算如下：

1.  球通过rotation.x 沿X 轴旋转
2.  然后球沿第 1 步创建的“新”X 轴旋转。

有什么建议可以改变这种行为，以便每次旋转都相互独立计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:32:43.430

除非你想实现滑动和/或后旋，否则我认为你应该稍微不同地处理这个问题。你已经有一个`Matrix.rotate()`支持绕任意轴旋转的，*使用它*。

**为球存储的属性**

*   位置
*   旋转矩阵

*注意：在面向矩阵的系统/场景图中，bould 通常会存储在单个 4x4 变换矩阵中。这可能会或可能不会更方便，具体取决于您当前代码库的其余部分。*

**移动算法**

1.  给定球`direction`和标准向上向量`(0, 1, 0)`，`rotation axis`使用叉积计算。（即它垂直于方向和上轴）

2.  旋转现在只是一个`matrix.rotate( rotationSpeed, rotationAxis)`, 应用于现有的旋转矩阵。

如果允许球向上/向下滚动表面，请将标准向上矢量替换为适当的表面法线。

# javascript - 另一个for循环调用的函数中的Javascript for循环

> ID：15457740
> 
> 赞同：0
> 
> 时间：2013-03-17T05:05:55.237
> 
> 标签：javascript, loops, increment

我见过很多例子，人们嵌套了 for 循环并且他们改变了他们的增量变量（i，j，k）。

```
for(var i=0;i<array.length;i++){
    for(var j=0;j<array.length;j++){
        for(var k=0;k<array.length;k++){

        }
    }
} 
```

所以我的问题是为什么不从 for 循环调用一个函数，它里面有一个 for 循环不会导致增量变量的冲突？是因为 javascript 的函数范围性质，还是因为冲突而我没有遇到问题。例子：

```
for(var i=0;i<array.length;i++){
    callFunction()
}

function callFunction(){
    for(var i=0;i<arry.length;i++){
        console.log(i)
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T05:11:04.583

我不知道为什么 adeneo 没有把它作为答案，但它确实与范围有关。将其与以下内容进行比较：

```
function first() {
  var i = 2;
  console.log(i);
}

function second() {
    var i = 3;
    console.log(i);
    first();
} 
```

每个函数中的`i`变量都包含在函数中，因此变量不会冲突。如果您使用了全局变量（`i = 3`而不是`var i = 3`），那么它们就会发生冲突。

如果您想要一些有关 javascript 和范围规则的材料，请查看[此问题](https://stackoverflow.com/questions/500431/javascript-variable-scope)或以下链接：

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)
*   [http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/](http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/)

# wordpress - Wordpress paginate_links() 函数，404s 和麻烦

> ID：15457741
> 
> 赞同：1
> 
> 时间：2013-03-17T05:05:58.020
> 
> 标签：wordpress, pagination, http-status-code-404

这是一个可怕的、严重的、浪费时间的（两周）可怕的问题。

它可能是重写，我对自定义帖子的使用，但是在剥离了这么多（并减少了我的主题的一些功能）之后，我将我的问题简化为：

`paginate_links()`正在发布这样的链接：

```
?s=cute&post_type=image&paged=2 
```

当我将浏览器栏中的变量更改为 page=2 时（删除 'd'）。

```
?s=cute&post_type=image&page=2 
```

它工作正常。

所以我的问题简化为：**如果我必须让该函数正确输出“页面”变量，那是如何完成的？**

`paged`并且`paged`都被 WordPress 使用。`paged`相反，如果这是更好的做法，我如何获得认可？

据我所知，这表明我的主题中存在一些更深层次的问题，但对于我的生活，我看不出我还有什么可能出错！

编辑：

这是我正在使用的代码：

```
if ( get_query_var('paged') )

        $paged = get_query_var('paged');

    elseif ( get_query_var('page') )

        $paged = get_query_var('page');

    else
        $paged = 1;     

    $big = 999999999; // need an unlikely integer

    $stuff_to_echo =  paginate_links( array(
        'base' => str_replace( $big, '%#%', esc_url( get_pagenum_link( $big ) ) ),
        'format' => '?page=%#%',
        'current' => max( 1, $paged ),
        'total' => $wp_query->max_num_pages,
        'type' => 'array'
    ) ); 
```

编辑 2 - 如果上述情况良好，这是问题可能发生的另一个可能区域。我将发布自定义帖子类型的创建和重写规则 -

```
//image custom post type

add_action( 'init', 'symbiostock_image_manager_register' );

function symbiostock_image_manager_register( )
{
    //creating custom post type for image

    $labels = array(
         'name' => 'Symbiostock Images',
        'singular_name' => 'Image',
        'add_new' => 'New Image',
        'add_new_item' => 'Add New Image',
        'edit_item' => 'Edit Image',
        'new_item' => 'New Image',
        'all_items' => 'All Images',
        'view_item' => 'View Image',
        'search_items' => 'Search Images',
        'not_found' => 'No image found',
        'not_found_in_trash' => 'No images found in Trash',
        'parent_item_colon' => '',
        'menu_name' => 'RF Images' 
    );

    $args = array(

         'labels' => $labels,
        'singular_label' => __( 'Image' ),
        'description' => 'Image Listings',
        'menu_position' => 100,
        'menu_icon' => symbiostock_IMGDIR . '/symbiostock_icon2.png',
        'public' => true,
        'publicly_queryable' => true,
        'show_ui' => true,
        'capability_type' => 'post',
        'hierarchical' => true,
        'has_archive' => true,
        'exclude_from_search' => false,
        'supports' => array(
             'title',
            'editor',
            'thumbnail' 
        ),
        'rewrite' => array(
             'slug' => 'image',
            'with_front' => false 
        ) 

    );

    register_post_type( 'image', $args );

    register_taxonomy( 'image-type', array(
         'image' 
    ), array(
         'hierarchical' => true,
        'label' => 'Image Categories',
        'singular_label' => 'Image Type',
        'rewrite' => true,
        'exclude_from_search' =>false,
        'public' => true, 
        'slug' => 'image-type' 
    ) );

    register_taxonomy( 'image-tags', array(
         'image' 
    ), array(
         'hierarchical' => false,
         'rewrite' => true,
         'query_var' => true,
        'singular_label' => 'Image Keyword',

        'hierarchical'            => false,
        'labels'                  => $labels,
        'show_ui'                 => true,
        'show_admin_column'       => true,
        'update_count_callback'   => '_update_post_term_count',

        'slug' => 'image-tag',               
        'labels' => array(
            'name' => _x( 'Image Keywords', 'taxonomy general name' ),
            'singular_name' => _x( 'Keywords', 'taxonomy singular name' ),
            'search_items' =>  __( 'Search Images' ),
            'all_items' => __( 'All Image Keywords' ),
            'edit_item' => __( 'Edit Image Keyword' ),
            'update_item' => __( 'Update Image Keyword' ),
            'add_new_item' => __( 'Add New Image Keyword' ),
            'new_item_name' => __( 'New Keyword Name' ),
            'menu_name' => __( 'Image Keywords' ),
            ),
        'rewrite' => array(
            'slug' => 'search-images', // This controls the base slug that will display before each term
            'with_front' => false, 
            'hierarchical' => false 
        ),
    ) );

}

add_action( 'admin_init', 'symbiostock_image_directory' );

function symbiostock_image_directory( )
{
    add_meta_box( 'symbiostock-image-meta', 'Symbiostock Image Info', 'symbiostock_image_manager_meta_options', 'image', 'normal', 'high' );

} 
```

以下是更下方的重写规则 -

```
add_action( 'init', 'symbiostock_rewrite' );

function symbiostock_rewrite( )
{   

    global $wp_rewrite;
    $wp_rewrite->add_permastruct('typename','typename/%year%%postname%/' , true , 1);
    add_rewrite_rule('typename/([0-9]{4})/(.+)/?$','index.php?typename=$matches[2]', 'top');
    $wp_rewrite->flush_rules();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-14T06:05:56.713

我知道这很旧，但我遇到了同样的问题，并通过更改导致 404 的页面的永久链接来解决它。

这是因为，显然，您不能拥有与自定义帖子类型同名的 page-slug。

所有功劳归功于 Ryan S. 分享原始解决方案： http: [//www.sutanaryan.com/2013/09/404-error-in-custom-post-type-pagination-wordpress/](http://www.sutanaryan.com/2013/09/404-error-in-custom-post-type-pagination-wordpress/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:21:02.143

在您的 paginate_links() 参数下，我会确保您的格式设置正确。'paged' 通常用于获取用户所在的“当前页面”（参考：[https](https://codex.wordpress.org/Pagination#Adding_the_.22paged.22_parameter_to_a_query) ://codex.wordpress.org/Pagination#Adding_the_.22paged.22_parameter_to_a_query ）

```
'format' => '?page=%#%' 
```

听起来您已将其设置为 '?paged=%#%'

这是一个完整的例子

```
global $wp_query;
$args = array(
    'format'    => '?page=%#%',
    'current'   => max( 1, get_query_var('paged') ),
    'total'     => $wp_query->max_num_pages
);
paginate_links($args); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:50:41.493

它可能不是最优雅的解决方案，但在这种情况下是合适的。

如果有人正在搜索此帖子类型，我只需设置一个重定向到分类页面。

```
add_action( 'parse_query', 'image_search_redirect' );

function image_search_redirect( $query ) {
    if ( ( is_search() && get_query_var( 'post_type' ) == 'image' ) ) {

        wp_redirect(home_url("?image-tags=") . urlencode(get_query_var('s')));

        exit(); 
    }
} 
```

这与其说是一种创造性的解决方案，不如说是一种解决方案。我应该没有理由在“paged=”变量上找不到 404。如果将来有人知道更好的解决方案，我很想知道一个！

# riak - 通过书籍或唯一页面查询数据的 Riak 解决方案

> ID：15457748
> 
> 赞同：0
> 
> 时间：2013-03-17T05:07:05.677
> 
> 标签：riak, riak-search

考虑一组名为*Library*的数据，其中包含一组*Books*，每本书包含一组*Pages*。

假设您正在使用 Riak 存储这些数据，并且您需要以两种可能的方式访问数据： - 查询特定页面（具有唯一 id） - 查询特定书籍中的所有页面（具有唯一名称)

此外，您需要能够轻松更新和删除特定*Book*的页面。

在 Riak 中实现这一目标的最佳方法是什么？

显然，Riak Search 可以解决问题，但对于我想要做的事情来说可能效率低下。我想知道设置存储桶是否有意义，其中每个存储桶都可以是一*本书*（这可能会产生数百万个“书”存储桶）。也许这是个坏主意……

这可以通过二级索引来完成吗？

我试图保持这个简单......

我是 Riak 的新手，我正在尝试找到完成可能相对简单的事情的最佳方法。我会感谢 Stack Overflow 社区的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:46:52.640

最有效的方法是将洞书存储为一个对象，并将其页面复制为另一个单独的对象。优点：

*   您将能够通过其键选择任何对象（riak 中最便宜的操作是 kv 查询）
*   任何查询都会被延迟预测
*   这是 riak 的自然存储方式

缺点：

*   如果您需要更新任何页面，则必须更新整本书，然后再更新页面。由于 riak 没有原子操作，因此您必须考虑如何恢复任何故障情况（例如：书已更新，但页面未更新）。

Riak 是关于可用性可预测延迟的，所以如果你将使用 2i 之类的东西来收集结果，它会进行不可预测的时间查询，它会随着页码的增长而增长

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:47:53.580

在 Riak 中对主从关系建模的一种常见方法是让主记录包含一个详细记录 ID 列表，可能还包括一些关于详细记录的信息，这些信息在决定要检索哪些详细记录时可能很有用。

在您的示例中，您可以有两个称为“书籍”和“页面”的存储桶。“图书”存储桶中的主记录将包含有关图书整体的元数据和信息，以及图书中包含的页面列表。每个页面将包含保存页面数据的“页面”记录的 ID 以及相应的页码。例如，如果您希望能够按章节查询，您还可以添加有关某个页面所属章节的信息。

“页面”存储桶将包含页面的文本，并可能包含指向该页面中包含的图像和其他媒体数据的链接。该数据可以存储在另一个存储桶中。

为了获取特定页面或一系列页面，首先从“书籍”存储桶中检索主记录，然后根据记录的内容获取适当的页面。尽管这需要多次 GET 操作，但它们都是基于键的直接查找，这是从 Riak 检索数据的最有效和可扩展的方式，因此它的性能和扩展性都很好。

这种方法还可以轻松更改页面和/或章节的顺序，因为只需要更新主记录。然而，添加、删除或修改页面将需要更新、添加或删除主记录以及一个或多个详细记录。

您当然也可以通过向对象添加二级索引并基于此进行查询来解决此问题。然而，Riak 中的二级索引查询确实必须包括对分区覆盖集（通常是环大小/n_val）的处理才能满足请求，因此会给系统带来更多的负载，并且通常会导致比检索更高的延迟通过直接键查找包含键的单个对象（只需要涉及实际存储对象的分区）。

尽管在插入或删除页面/条目时维护一个包含索引的单独对象会增加一些额外的工作，但这种方法通常会导致更有效的读取，因为只需要直接键查找。如果您的应用程序的读取量很大，那么使用这种方法可能是有意义的，而二级索引对于写入量大的应用程序可能更有效，因为插入和修改成本更低，但读取成本更高。但是，您始终可以添加二级索引以防万一，以保持您的选择开放。

在这种情况下，我通常会建议执行一些基准测试来测试解决方案并检查哪种解决方案最符合您的特定性能和扩展要求。

# iphone - 如何从变异字符串创建子字符串

> ID：15457749
> 
> 赞同：-1
> 
> 时间：2013-03-17T05:08:01.107
> 
> 标签：iphone, ios, string, nsarray, substring

我是 iphone 开发的菜鸟，我正在尝试从 NSString 值创建一个子字符串，该值总是会改变。基本上，我正在尝试对字符串的最后一部分进行子串化。该字符串的格式为“March 15 PM Metals Commentary: John Jones” 我想要字符串的姓氏部分 例如，“Jones”而不是“John Jones”。我尝试过的两种方法要么给我异常，要么不返回任何值。任何帮助是极大的赞赏。

我的代码

```
//This approach throw index out of bounds exception
NSString * storyLink2 = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];
NSRange namestart = [storyLink2 rangeOfString:@" " options:NSBackwardsSearch];
NSString *name = [[[stories objectAtIndex: storyIndex] objectForKey: @"title"] substringWithRange:NSMakeRange(namestart.location +1, name.length - namestart.location+1)];

//This approach return nothing
NSString *name = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];
NSArray *thingitems = [name componentsSeparatedByString:@" "];
name = [thingitems lastObject]; 
```

编辑

```
 NSString *name = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];
NSLog(@"myname: %@", name);// <-- Showing  "March 15 PM Metals Commentary: John Jones"
NSArray *thingitems = [name componentsSeparatedByString:@":"]; ////<-- [__NSArrayM componentsSeparatedByString:]: unrecognized selector sent to instance 0x89741a0
NSArray *lastName=[thingitems componentsSeparatedByString:@" "];
name = [lastName lastObject];
NSLog(@"myname: %@", name); 
```

日志

```
2013-03-17 01:30:39.738 GSCC[704:207] myname: March 15 PM Metals Commentary: Thomas Vitiello

2013-03-17 01:30:39.739 GSCC[704:207] -[__NSArrayM componentsSeparatedByString:]: unrecognized selector sent to instance 0x89741a0
2013-03-17 01:30:39.741 GSCC[704:207] Exception - -[__NSArrayM componentsSeparatedByString:]: unrecognized selector sent to instance 0x89741a0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T05:11:09.387

如果您的字符串是`"March 15 PM Metals Commentary: John Jones"`并且您总是希望在冒号**“：”**之后的最后一部分出现名称，那么：

```
NSString *str=@"March 15 PM Metals Commentary: John Jones";
//use storyLink2 in place of str
NSString *name=[str componentsSeparatedByString:@":"][1]; 
```

编辑：

如果你只想要姓氏：那么

```
NSString *str=@"March 15 PM Metals Commentary: John Jones";
//use storyLink2 in place of str
NSArray *fullname=[str componentsSeparatedByString:@" "];
NSArray *lastName=[fullname lastObject]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:40:36.630

如果你只想要最后一句话`string`，试试吧`[ [ string componentsSeparatedByCharactersInSet:[ NSCharacterSet whitespaceCharacterSet ] ] lastObject ]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T05:49:47.717

我已经对此进行了测试，没有错误

```
NSString *string = @"March 15 PM Metals Commentary: John Jones";
NSString *lastName = [[string componentsSeparatedByString:@" "] lastObject];
NSLog(@"%@",lastName); 
```

所以我觉得你的可能是这样的？

```
NSString *name = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];
NSString *lastName=[[name componentsSeparatedByString:@" "] lastObject];
NSLog(@"myname: %@", lastName); 
```

# csv - text/csv mimetype 的可选标头参数的正确语法？

> ID：15457752
> 
> 赞同：17
> 
> 时间：2013-03-17T05:08:11.037
> 
> 标签：csv, mime-types, rfc4180

根据[RFC 4180](https://www.rfc-editor.org/rfc/rfc4180)：

> ...标题行的存在与否应通过此 MIME 类型的可选“标题”参数指示...

那么，这是否意味着正确的字符串是：

```
text/csv; header 
```

也许：

```
text/csv; header=true 
```

或者是其他东西？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-17T05:11:25.407

> “header”参数指示是否存在标题行。有效值为“存在”或“不存在”。

因此，如果您使用该参数，则完整的 MIME 类型将是`text/csv; header=present`or `text/csv; header=absent`。

# three.js - 如何？从 kinect 数据为 three.js 示例 webgl_kinect 创建 webm 视频

> ID：15457765
> 
> 赞同：2
> 
> 时间：2013-03-17T05:11:09.503
> 
> 标签：three.js, kinect, webm

[http://mrdoob.github.com/three.js/examples/webgl_kinect.html](http://mrdoob.github.com/three.js/examples/webgl_kinect.html)

在上面的示例中，如何创建要播放的 kinect webm 电影，具体来说，如何从 kinect oni 文件或 kinect 点云中播放？

方法、语言、操作系统并不重要。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T14:18:21.227

在[kinect.webm 旁边](https://github.com/mrdoob/three.js/blob/master/examples/textures/kinect.webm)，您会找到[kinect.nfo](https://github.com/mrdoob/three.js/blob/master/examples/textures/kinect.nfo)，我在其中写了一些笔记，其中包含有关其记录方式的链接。

# perl - 从 perl Nx3 数组中提取行

> ID：15457769
> 
> 赞同：0
> 
> 时间：2013-03-17T05:11:44.203
> 
> 标签：perl

我想从 Nx3 数组中提取大小为 3x3 的块。

```
 foreach (@TotalData){
         print "@{$_}\n";
    } 
```

给我（例如）：

```
 .
    .
    0.000 22.00 3.791140e+000
    0.100 22.00 2.737532e+000
    0.200 22.00 2.393466e+000
    .
    . 
```

圆点代表其他条目。我想把这个 3x3 块放在它自己的数组中。我怎样才能提取这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T05:34:50.493

你想用积木做什么？也许你只想要一个@TotalData 的片段（例如`@TotalData[4,5,6]`甚至`splice(@TotalData, 4, 3)`），也许你想一次循环 3 个（例如 with `List::MoreUtils::natatime`）；你还没有真正提供足够的信息可以说。

如果您不介意清除 @TotalData 作为副作用：

```
while ( my @block = splice( @TotalData, 0, 3 ) ) {
    # do something with @block (which will have 3 elements,
    # except on the last iteration, where it will have 1-3)
} 
```

只获得完整的 3 块：

```
while ( 3 == ( my @block = splice( @TotalData, 0, 3 ) ) ) {
    # do something with @block (which will have 3 elements)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T22:00:18.717

我很确定[PDL](http://pdl.perl.org)有这样做的方法。事实上，在 PDL 文档中的[Conway 的生命游戏示例中研究了几乎相同的问题。](http://pdl.perl.org/?docs=Threading&title=PDL%3a%3aThreading#example__conway_s_game_of_life)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T22:34:15.683

您在寻找[List::MoreUtils::natatime](http://search.cpan.org/perldoc/List%3a%3aMoreUtils)吗？

```
#!/usr/bin/env perl

use strict;
use warnings;

use List::MoreUtils qw( natatime );

my @data = (
    [1 .. 3],
    [4 .. 6],
    [7 .. 9],
    ['a' .. 'c'],
    ['d' .. 'f'],
    ['g' .. 'i'],
);

my $it = natatime(3, @data);

while (my @set = $it->()) {
    for my $r ( @set ) {
        print "@$r\n";
    }
    print '-' x 30, "\n";
} 
```

输出：

```
~/tmp> ./jj.pl
1 2 3
4 5 6
7 8 9
------------------------------
美国广播公司
定义
吉
------------------------------
```

# ios - 仅当存在时才从监督中删除

> ID：15457777
> 
> 赞同：0
> 
> 时间：2013-03-17T05:13:14.233
> 
> 标签：ios, objective-c, cocoa-touch

我在业余时间正在开发一个 ipad 程序，我遇到了一个小问题。在我的 uisplitview 中，如果我单击一个单元格，它会加载一张图片我有两个其他单元格，每个单元格都有这个代码

```
[self.icon1 removeFromSuperview]; 
```

但是，这可以很好地删除图片。如果在我单击带有图片的单元格一之后...然后我单击单元格 2（并且运行此删除代码）它会正确删除图片。但如果我单击单元格 3...然后程序中断（访问不正确，它指向 removeFromSuperview）。虽然我认为这是因为图标已被删除。是否有一个功能基本上说“如果存在则从超级视图中删除”？谢谢你

```
if (([receivedRainObject isEqualToString:@"Facts"]) && (Track==100)) {
    self.view.backgroundColor=[UIColor whiteColor];
    //     self.tvFacts=[[UITextView alloc]initWithFrame:CGRectMake(0, 150, 700, 500)];
    self.tvFacts.text=@"  Test";

    [tvFacts setEditable:NO];

     UIImage *acheivement1=[UIImage imageNamed:@"saychesse.png"];
    [factBanner1 setImage:acheivement1];

    UIImage *fbIcon= [UIImage imageNamed:@"facebook.png"];
     fbIcon1 = [UIButton buttonWithType:UIButtonTypeCustom];
    fbIcon1.frame = CGRectMake(580.0, 305.0, 35.0, 35.0);
    fbIcon1.tag=TAG_BUTTON_ONE;
    [fbIcon1 addTarget:self action:@selector(authButtonAction) forControlEvents:UIControlEventTouchUpInside];
    [fbIcon1 setBackgroundImage:fbIcon forState:UIControlStateNormal];

    UIImage *twIcon= [UIImage imageNamed:@"twitter.png"];
    twIcon1 = [UIButton buttonWithType:UIButtonTypeCustom];
    twIcon1.frame = CGRectMake(530.0, 305.0, 35.0, 35.0);
    [twIcon1 addTarget:self action:@selector(tweetTapped) forControlEvents:UIControlEventTouchUpInside];
    [twIcon1 setBackgroundImage:twIcon forState:UIControlStateNormal];

    [self.imgClassification removeFromSuperview];
    [self.Image removeFromSuperview];

    [self.lblSel removeFromSuperview];
    [self.tvDescrip removeFromSuperview];
    [self.tvName removeFromSuperview];
    [self.tvDiet removeFromSuperview];
    [self.navigationController popViewControllerAnimated:NO];
    [self.lblPictureAnnotation removeFromSuperview];
    [self.lbllife removeFromSuperview];
    [self.tvGestation removeFromSuperview];

    [self.view addSubview:self.tvFacts];
    [self.view addSubview:factBanner1];
    [self.view addSubview:fbIcon1];
    [self.view addSubview:twIcon1];
    [self.view setNeedsDisplay];

}
// Life-Span         
if (([receivedRainObject isEqualToString:@"Life Span"]) && (Track==100)) {
    self.view.backgroundColor=[UIColor whiteColor];
    //     self.lbllife=[[UILabel alloc]initWithFrame:CGRectMake(0, 150, 700, 500)];
    self.lbllife.text=@"The";

    [lbllife setEditable:NO];
    [self.factBanner1 removeFromSuperview];
   [self.fbIcon1 removeFromSuperview];
    [self.twIcon1 removeFromSuperview];
     [self.factBanner2 removeFromSuperview];
      [self.fbIcon2 removeFromSuperview];
    [self.twIcon2 removeFromSuperview];
    [self.imgClassification removeFromSuperview];
    [self.Image removeFromSuperview];

    [self.lblSel removeFromSuperview];
    [self.tvDescrip removeFromSuperview];
    [self.tvName removeFromSuperview];
    [self.tvDiet removeFromSuperview];
    [self.navigationController popViewControllerAnimated:NO];
    [self.tvFacts removeFromSuperview];
    [self.lblPictureAnnotation removeFromSuperview];
    [self.tvGestation removeFromSuperview];
     [self.factBanner1 removeFromSuperview];
    [self.view addSubview:self.lbllife];
    [self.view setNeedsDisplay];        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:43:44.487

我的猜测是你已经`self.icon1`在某个时候从它的超级视图中删除了，并且该`icon1`属性是一个`weak`参考。

这意味着`icon1`仅由其超级视图保留。因此，在您第一次删除它后，它会被释放，当您再次尝试使用它时，您会收到错误消息。

解决方案：要么将`icon1`属性更改为`strong`引用，要么（更好），`self.icon1 = nil`在`[self.icon1 removeFromSuperview];`.

`Product > Analyze`顺便说一句，这是 Clang 静态分析器（运行它）通常能够检测到的那种错误。

# django - 模型管理器查询集未过滤

> ID：15457780
> 
> 赞同：7
> 
> 时间：2013-03-17T05:13:42.990
> 
> 标签：django, django-models, django-views

我有一个代理模型，其查询集是其父模型的子集。但是，当我调用它时，会返回父对象。

**[模型经理](https://docs.djangoproject.com/en/dev/topics/db/managers/#modifying-initial-manager-querysets)**：

```
class NewRequestsManager(models.Manager):        
    def get_queryset(self):
        return super(NewRequestsManager, self).get_queryset().filter(is_scoped=0) 
```

**代理模型**：

```
class NewRequests(Engagement):
    objects = NewRequestsManager()

    class Meta:
        proxy = True
        app_label = 'myapp'
        verbose_name = 'New Request' 
```

**查看**：

```
def list(request):
    new_requests = NewRequests.objects.all()
    c = RequestContext(request, {
            'cl': new_requests,
    })
    t = loader.get_template('queue.html')
    return HttpResponse(t.render(c)) 
```

任何帮助深表感谢。我不确定我在这里缺少什么。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-17T05:46:57.483

可能只是一个错字：`get_queryset`应该是`get_query_set`，所以你没有覆盖任何东西。

```
class NewRequestsManager(models.Manager):        
    def get_query_set(self):
        return super(NewRequestsManager, self).get_query_set().filter(is_scoped=0) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-07T01:51:59.860

不是错字：[开发文档](https://docs.djangoproject.com/en/dev/topics/db/managers/#modifying-initial-manager-querysets)使用 get_queryset 而[1.5 文档](https://docs.djangoproject.com/en/1.5/topics/db/managers/#modifying-initial-manager-querysets)使用 get_query_set 我想开发版本最近发生了变化。

# javascript - 我可以触发Android软键盘通过javascript打开（没有phonegap）吗？

> ID：15457783
> 
> 赞同：15
> 
> 时间：2013-03-17T05:14:11.837
> 
> 标签：javascript, android, galaxy

我的移动 Web 应用程序中有一些自定义 Web 组件，而我需要在字段上手动触发“焦点”事件，以模拟 Android 软键盘功能中的“NEXT”功能。（使用 Galaxy S3 原生浏览器）。

但是，当我在“选择”字段上手动触发焦点事件时，不会显示本机软键盘。我必须随后单击该字段以使其显示。（当然，在 IOS 中，它工作得很好）。

所以我想知道，如果“焦点”事件没有触发软键盘打开，那么 JS 事件会是什么？？？

我没有使用phonegap，所以我希望没有它的方法。

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-17T05:20:36.783

这是来自 StackOverflow 的链接：

> [使用 javascript 对字段进行 .focus() 处理时显示 Android 的软键盘](https://stackoverflow.com/questions/6020400/showing-androids-soft-keyboard-when-a-field-is-focusd-using-javascript)
> 
> 只是在没有事件的情况下集中注意力似乎不起作用。- 你确实需要一个点击事件来触发它。

```
$(document).ready(function() {
    $('#field').click(function(e){
        $(this).focus();
    });
    $('#button').click(function(e) {
        $('#field').trigger('click');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-23T15:37:46.133

您可以通过在输入上调用`focus()`then来执行此操作。`click()`不需要jquery。如果您的脚本是由包含元素上的 onclick() 触发的，请注意无限循环。还要确保此脚本是由某些用户交互触发的。它不适用于 document.onload() 或 setTimeout()。它也很脆弱，例如元素的同时样式更改。下面的脚本适用于我的 Chrome for android 58 和 Safari mobile 602.1。

```
var target = document.getElementsByTagName("input")[0];

if (event.target != target) {
    target.focus();
    target.click();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-23T10:26:04.190

香草JS解决方案：

```
let button = document.getElementById("b");
let input = document.getElementById("i");

// Keyboard opens when focusing the input from a click listener
button.addEventListener("click", () => {
  input.focus();
});

// Input field gets focus but keyboard doesn't open.
setTimeout(() => {
  input.focus();
}, 1000); 
```

# python - 找到两个列表相同的基于 1 的位置

> ID：15457784
> 
> 赞同：3
> 
> 时间：2013-03-17T05:14:30.347
> 
> 标签：python, list

挑战是编写一个函数来比较两个相当小的整数列表（每个列表通常少于 10 个元素）。一个列表可能是这样的：

```
self = [0, 0, 1, 2] 
```

要与之比较的列表可能类似于以下示例之一：

```
other1 = []
other2 = [0, 0, 1]
other3 = [0, 0, 1, 2, 0]
other4 = [0, 1, 1, 2]
other5 = something 
```

如您所见，重复元素很常见，元素的顺序很重要。

期望的结果应该是一个整数，表示self和other多长时间相同，从头开始计数。因此，根据其他情况，结果将是：

```
result1 = 0
result2 = 3
result3 = 4
result4 = 1
result5 = 0 
```

该代码应该是最有效的，因为每次用户交互都要使用大约 100 次。

我编写了以下代码，它可以按需要工作，但似乎有点慢：

```
def match(self, other):
    if self == other:
        return len(self)
    element = -1
    for element in range(min(len(self),  len(other))):
        if self[element] != other[element]:
            element -= 1
            break
    return element +1 
```

第一个 if 语句已经是加快速度的增强，但解决方案似乎仍然很慢，而且对变量命名元素和两个返回语句的所有更正看起来也有点笨拙。

有没有人为这种比“匹配”或“比较”更好的功能命名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T05:43:14.633

```
>>> from itertools import takewhile, izip
>>> def F(seq1, seq2):
        return sum(1 for x in takewhile(lambda x: x[0] == x[1], izip(seq1, seq2)))

>>> F([0, 0, 1, 2], [0, 0, 1, 2, 0])
4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:41:28.647

在一个[相关问题](https://stackoverflow.com/questions/15477314/performance-of-library-itertools-compared-to-python-code)中，我发布了以下潜在解决方案：

```
def while_equal(seq, other):
    for this, that in zip(seq, other):
        if this != that:
            return
        yield this

def match(seq, other):
    return sum(1 for _ in while_equal(seq, other)) 
```

和

```
def match_loop(seq, other):
    count = 0
    for this, that in zip(seq, other):
        if this != that:
            return count
        count += 1
    return count 
```

这些版本都比其他给定的解决方案更快（第二个是最快的），而且，我认为，更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T09:00:36.117

**编辑：**正如 jamylak 指出的那样，我的解决方案是错误的。我会把它留在这里，这样每个想要回答这个问题的人都会看到整个问题，而不仅仅是前两个案例。

另一个不需要的解决方案`itertools`，尽管它不如[jamylak 的解决方案](https://stackoverflow.com/a/15457920/885028)有效。

```
def compareLists(list1, list2):
    return sum(map(lambda (x,y): 1 if x == y else 0, zip(list1, list2))) 
```

# python - 导入 scipy.stats 后 Ctrl-C 使 Python 崩溃

> ID：15457786
> 
> 赞同：40
> 
> 时间：2013-03-17T05:14:46.697
> 
> 标签：python, scipy, keyboardinterrupt

我在 Win7 64 位上运行 64 位 Python 2.7.3。我可以通过这样做可靠地使 Python 解释器崩溃：

```
>>> from scipy import stats
>>> import time
>>> time.sleep(3) 
```

并在睡眠期间按 Control-C。没有引发 KeyboardInterrupt；解释器崩溃。打印以下内容：

```
forrtl: error (200): program aborting due to control-C event
Image              PC                Routine            Line        Source

libifcoremd.dll    00000000045031F8  Unknown               Unknown  Unknown
libifcoremd.dll    00000000044FC789  Unknown               Unknown  Unknown
libifcoremd.dll    00000000044E8583  Unknown               Unknown  Unknown
libifcoremd.dll    000000000445725D  Unknown               Unknown  Unknown
libifcoremd.dll    00000000044672A6  Unknown               Unknown  Unknown
kernel32.dll       0000000077B74AF3  Unknown               Unknown  Unknown
kernel32.dll       0000000077B3F56D  Unknown               Unknown  Unknown
ntdll.dll          0000000077C73281  Unknown               Unknown  Unknown 
```

这使得无法中断长时间运行的 scipy 计算。

谷歌搜索“forrtl”等，我看到这种问题是由于使用了覆盖 Ctrl-C 处理的 Fortran 库引起的。我在 Scipy 跟踪器上没有看到错误，但鉴于 Scipy 是一个与 Python 一起使用的库，我认为这是一个错误。它打破了 Python 对 Ctrl-C 的处理。有什么解决方法吗？

编辑：按照@cgohlke 的建议，我尝试在导入 scipy 后添加自己的处理程序。 [这个](https://gis.stackexchange.com/questions/2190/keyboardinterrupt-doesnt-work-when-arcgisscripting-module-is-loaded/2197#2197)关于相关问题的问题表明添加信号处理程序不起作用。我尝试通过 pywin32使用 Windows API [SetConsoleCtrlHandler函数：](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686016%28v=vs.85%29.aspx)

```
from scipy import stats
import win32api
def doSaneThing(sig, func=None):
    print "Here I am"
    raise KeyboardInterrupt
win32api.SetConsoleCtrlHandler(doSaneThing, 1) 
```

在此之后，按 Ctrl-C 会打印“我在这里”，但 Python 仍然会因 forrtl 错误而崩溃。有时我还会收到一条消息说“ConsoleCtrlHandler 功能失败”，该消息很快就消失了。

如果我在 IPython 中运行它，我可以在 forrtl 错误之前看到一个正常的 Python KeyboardInterrupt 回溯。如果我引发其他错误而不是 KeyboardInterrupt（例如 ValueError），我还会看到一个正常的 Python 回溯，然后是 forrtl 错误：

```
ValueError                                Traceback (most recent call last)
<ipython-input-1-08defde66fcb> in doSaneThing(sig, func)
      3 def doSaneThing(sig, func=None):
      4     print "Here I am"
----> 5     raise ValueError
      6 win32api.SetConsoleCtrlHandler(doSaneThing, 1)

ValueError:
forrtl: error (200): program aborting due to control-C event
[etc.] 
```

似乎无论底层处理程序在做什么，它不仅仅是直接捕获 Ctrl-C，而是对错误条件 (ValueError) 做出反应并自行崩溃。有没有办法消除这种情况？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-18T08:56:12.087

这是您发布的解决方案的一个变体，可能有效。也许有更好的方法来解决这个问题——或者甚至可以通过设置一个告诉 DLL 跳过安装处理程序的环境变量来避免这一切。希望这会有所帮助，直到您找到更好的方法。

[`time`模块](http://hg.python.org/cpython/file/70274d53c1dd/Modules/timemodule.c#l867)（第868-876行）和[`_multiprocessing`模块](http://hg.python.org/cpython/file/70274d53c1dd/Modules/_multiprocessing/multiprocessing.c#l312)（第 312-321 行）都调用[`SetConsoleCtrlHandler`](https://msdn.microsoft.com/en-us/library/ms686016). 在`time`模块的情况下，它的控制台控制处理程序设置一个 Windows 事件，`hInterruptEvent`. 对于主线程，`time.sleep`通过 等待此事件`WaitForSingleObject(hInterruptEvent, ul_millis)`，其中`ul_millis`是休眠的毫秒数，除非被 Ctrl+C 中断。由于您安装的处理程序返回`True`，`time`模块的处理程序永远不会被调用 set `hInterruptEvent`，这意味着`sleep`不能被中断。

我尝试使用`imp.init_builtin('time')`重新初始化`time`模块，但显然`SetConsoleCtrlHandler`忽略了第二次调用。似乎必须删除处理程序然后重新插入。不幸的是，该`time`模块没有为此导出函数。因此，作为一个杂物，只需确保在安装处理程序*后*`time`导入模块。由于 importing也 imports ，您需要预加载 libifcoremd.dll ，以便以正确的顺序获取处理程序。最后，添加一个调用以确保调用 Python 的处理程序^([1])。*`scipy``time``ctypes``thread.interrupt_main``SIGINT`*

 *例如：

```
import os
import imp
import ctypes
import thread
import win32api

# Load the DLL manually to ensure its handler gets
# set before our handler.
basepath = imp.find_module('numpy')[1]
ctypes.CDLL(os.path.join(basepath, 'core', 'libmmd.dll'))
ctypes.CDLL(os.path.join(basepath, 'core', 'libifcoremd.dll'))

# Now set our handler for CTRL_C_EVENT. Other control event 
# types will chain to the next handler.
def handler(dwCtrlType, hook_sigint=thread.interrupt_main):
    if dwCtrlType == 0: # CTRL_C_EVENT
        hook_sigint()
        return 1 # don't chain to the next handler
    return 0 # chain to the next handler

win32api.SetConsoleCtrlHandler(handler, 1)

>>> import time
>>> from scipy import stats
>>> time.sleep(10)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyboardInterrupt 
```

* * *

[1]`interrupt_main`调用`PyErr_SetInterrupt`. 此行程`Handlers[SIGINT]`并调用`Py_AddPendingCall`add `checksignals_witharg`。反过来这个电话`PyErr_CheckSignals`。由于`Handlers[SIGINT]`被绊倒，因此调用`Handlers[SIGINT].func`. 最后，如果`func`是`signal.default_int_handler`，你会得到一个`KeyboardInterrupt`例外。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-06-29T10:35:35.100

将环境变量设置`FOR_DISABLE_CONSOLE_CTRL_HANDLER`为`1` [似乎可以解决问题](https://github.com/ContinuumIO/anaconda-issues/issues/905#issuecomment-232498034)，但前提是它是**在**加载有问题的包之前设置的。

```
import os
os.environ['FOR_DISABLE_CONSOLE_CTRL_HANDLER'] = '1'

[...] 
```

**编辑**：虽然`Ctrl`+`C`不再使 python 崩溃，但它也无法停止当前的计算。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-17T21:01:02.660

通过这样做，我已经能够获得一半的解决方法：

```
from scipy import stats
import win32api
def doSaneThing(sig, func=None):
    return True
win32api.SetConsoleCtrlHandler(doSaneThing, 1) 
```

在处理程序中返回 true 会停止处理程序链，以便不再调用干预的 Fortran 处理程序。但是，这种解决方法只是部分的，原因有两个：

1.  它实际上并没有引发 KeyboardInterrupt，这意味着我无法在 Python 代码中对其做出反应。它只是让我回到提示。
2.  它不会像 Ctrl-C 通常在 Python 中那样完全打断事情。如果在一个新的 Python 会话中我执行 a`time.sleep(3)`并按 Ctrl-C，则睡眠会立即中止并且我得到一个 KeyboardInterrupt。使用上述解决方法，睡眠不会中止，只有在睡眠时间结束后控制才会返回提示。

尽管如此，这仍然比整个会话崩溃要好。对我来说，这引发了一个问题，为什么 SciPy（以及任何其他依赖于这些英特尔库的 Python 库）自己不这样做。

我不接受这个答案，希望有人可以提供真正的解决方案或解决方法。“真实”是指在长时间运行的 SciPy 计算期间按 Ctrl-C 应该像未加载 SciPy 时一样工作。（请注意，这并不意味着它必须立即工作。像普通 Python 这样的非 SciPy 计算`sum(xrange(100000000))`可能不会立即在 Ctrl-C 上中止，但至少当它们这样做时，它们会引发 KeyboardInterrupt。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-30T21:47:47.323

这是修补 dll 以删除安装 Ctrl-C 处理程序的调用的代码：

```
import os
import os.path
import imp
import hashlib

basepath = imp.find_module('numpy')[1]
ifcoremd = os.path.join(basepath, 'core', 'libifcoremd.dll')
with open(ifcoremd, 'rb') as dll:
    contents = dll.read()

m = hashlib.md5()
m.update(contents)

patch = {'7cae928b035bbdb90e4bfa725da59188': (0x317FC, '\xeb\x0b'),
  '0f86dcd44a1c2e217054c50262f727bf': (0x3fdd9, '\xeb\x10')}[m.hexdigest()]
if patch:
    contents = bytearray(contents)
    contents[patch[0]:patch[0] + len(patch[1])] = patch[1]
    with open(ifcoremd, 'wb') as dll:
        dll.write(contents)
else:
    print 'Unknown dll version' 
```

编辑：这是我为 x64 添加补丁的方式。在调试器中运行 python.exe，并设置一个断点，`SetConsoleCtrlHandler`直到你到达你想要修补的调用：

```
Microsoft (R) Windows Debugger Version 6.12.0002.633 AMD64
Copyright (c) Microsoft Corporation. All rights reserved.

CommandLine: .\venv\Scripts\python.exe
...
0:000> .symfix
0:000> bp kernel32!SetConsoleCtrlHandler
0:000> g
Breakpoint 0 hit
KERNEL32!SetConsoleCtrlHandler:
00007ffc`c25742f0 ff252af00400    jmp     qword ptr [KERNEL32!_imp_SetConsoleCtrlHandler (00007ffc`c25c3320)] ds:00007ffc`c25c3320={KERNELBASE!SetConsoleCtrlHandler (00007ffc`bfa12e10)}
0:000> k 5
Child-SP          RetAddr           Call Site
00000000`007ef7a8 00000000`71415bb4 KERNEL32!SetConsoleCtrlHandler
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for C:\WINDOWS\SYSTEM32\python27.dll -
00000000`007ef7b0 00000000`7035779f MSVCR90!signal+0x17c
00000000`007ef800 00000000`70237ea7 python27!PyOS_getsig+0x3f
00000000`007ef830 00000000`703546cc python27!Py_Main+0x21ce7
00000000`007ef880 00000000`7021698c python27!Py_InitializeEx+0x40c
0:000> g
Python 2.7.11 (v2.7.11:6d1b6a68f775, Dec  5 2015, 20:40:30) [MSC v.1500 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy
...
Breakpoint 0 hit
KERNEL32!SetConsoleCtrlHandler:
00007ffc`c25742f0 ff252af00400    jmp     qword ptr [KERNEL32!_imp_SetConsoleCtrlHandler (00007ffc`c25c3320)] ds:00007ffc`c25c3320={KERNELBASE!SetConsoleCtrlHandler (00007ffc`bfa12e10)}
0:000> k 5
Child-SP          RetAddr           Call Site
00000000`007ec308 00000000`7023df6e KERNEL32!SetConsoleCtrlHandler
00000000`007ec310 00000000`70337877 python27!PyTime_DoubleToTimet+0x10ee
00000000`007ec350 00000000`7033766d python27!PyImport_IsScript+0x4f7
00000000`007ec380 00000000`70338bf2 python27!PyImport_IsScript+0x2ed
00000000`007ec3b0 00000000`703385a9 python27!PyImport_ImportModuleLevel+0xc82
0:000> g
...
>>> import scipy.stats
...
Breakpoint 0 hit
KERNEL32!SetConsoleCtrlHandler:
00007ffc`c25742f0 ff252af00400    jmp     qword ptr [KERNEL32!_imp_SetConsoleCtrlHandler (00007ffc`c25c3320)] ds:00007ffc`c25c3320={KERNELBASE!SetConsoleCtrlHandler (00007ffc`bfa12e10)}
0:000> k 5
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for C:\Users\kevin\Documents\\venv\lib\site-packages\numpy\core\libifcoremd.dll -
Child-SP          RetAddr           Call Site
00000000`007ed818 00007ffc`828309eb KERNEL32!SetConsoleCtrlHandler
00000000`007ed820 00007ffc`828dfa44 libifcoremd!GETEXCEPTIONPTRSQQ+0xdb
00000000`007ed880 00007ffc`828e59d7 libifcoremd!for_lt_ne+0xc274
00000000`007ed8b0 00007ffc`828e5aff libifcoremd!for_lt_ne+0x12207
00000000`007ed8e0 00007ffc`c292ddc7 libifcoremd!for_lt_ne+0x1232f
0:000> ub  00007ffc`828309eb
libifcoremd!GETEXCEPTIONPTRSQQ+0xbb:
00007ffc`828309cb 00e8            add     al,ch
00007ffc`828309cd df040b          fild    word ptr [rbx+rcx]
00007ffc`828309d0 0033            add     byte ptr [rbx],dh
00007ffc`828309d2 c9              leave
00007ffc`828309d3 ff15bf390e00    call    qword ptr [libifcoremd!for_lt_ne+0x40bc8 (00007ffc`82914398)]
00007ffc`828309d9 488d0d00efffff  lea     rcx,[libifcoremd!for_rtl_finish_+0x20 (00007ffc`8282f8e0)]
00007ffc`828309e0 ba01000000      mov     edx,1
00007ffc`828309e5 ff158d390e00    call    qword ptr [libifcoremd!for_lt_ne+0x40ba8 (00007ffc`82914378)] 
```

我们将`lea`用一个相对的指令修补指令`jmp`（`0xeb`后面是要跳转的字节数）

```
0:000> ? 00007ffc`828309eb - 00007ffc`828309d9
Evaluate expression: 18 = 00000000`00000012
0:000> f 00007ffc`828309d9 L2 eb 10
Filled 0x2 bytes
0:000> ub  00007ffc`828309eb
libifcoremd!GETEXCEPTIONPTRSQQ+0xbe:
00007ffc`828309ce 040b            add     al,0Bh
00007ffc`828309d0 0033            add     byte ptr [rbx],dh
00007ffc`828309d2 c9              leave
00007ffc`828309d3 ff15bf390e00    call    qword ptr [libifcoremd!for_lt_ne+0x40bc8 (00007ffc`82914398)]
00007ffc`828309d9 eb10            jmp     libifcoremd!GETEXCEPTIONPTRSQQ+0xdb (00007ffc`828309eb)
00007ffc`828309db 0d00efffff      or      eax,0FFFFEF00h
00007ffc`828309e0 ba01000000      mov     edx,1
00007ffc`828309e5 ff158d390e00    call    qword ptr [libifcoremd!for_lt_ne+0x40ba8 (00007ffc`82914378)] 
```

我不知道.dll文件在这个过程中是如何映射的，所以我只是`0d 00 ef ff ff`用十六进制编辑器在文件中搜索。这是一个独特的命中，因此我们可以计算 .dll 中的位置来修补。

```
0:000> db  00007ffc`828309d0
00007ffc`828309d0  00 33 c9 ff 15 bf 39 0e-00 eb 10 0d 00 ef ff ff  .3....9.........
00007ffc`828309e0  ba 01 00 00 00 ff 15 8d-39 0e 00 48 8d 0d 0e 9c  ........9..H....
00007ffc`828309f0  09 00 e8 09 2e 0a 00 48-8d 0d 32 9f 09 00 e8 fd  .......H..2.....
00007ffc`82830a00  2d 0a 00 48 8d 0d ca ee-0e 00 e8 51 90 00 00 85  -..H.......Q....
00007ffc`82830a10  c0 0f 85 88 02 00 00 e8-38 fa 0a 00 ff 15 4e 39  ........8.....N9
00007ffc`82830a20  0e 00 89 c1 e8 d7 2d 0a-00 48 8d 05 f8 be 11 00  ......-..H......
00007ffc`82830a30  45 32 e4 c7 05 0b 4a 13-00 00 00 00 00 41 bd 01  E2....J......A..
00007ffc`82830a40  00 00 00 48 89 05 06 4a-13 00 ff 15 30 39 0e 00  ...H...J....09..
0:000> ? 00007ffc`828309d9 -  00007ffc`828309d0
Evaluate expression: 9 = 00000000`00000009
0:000> ? 00007ffc`828309d9 -  00007ffc`828309d0 + 3FDD0
Evaluate expression: 261593 = 00000000`0003fdd9
0:000> 
```

好的，我已经在`0x3fdd9`. 让我们看看它现在的样子：

```
Microsoft (R) Windows Debugger Version 6.12.0002.633 AMD64
Copyright (c) Microsoft Corporation. All rights reserved.

CommandLine: .\venv\Scripts\python.exe
...
0:000> bp libifcoremd!GETEXCEPTIONPTRSQQ+c9
Bp expression 'libifcoremd!GETEXCEPTIONPTRSQQ+c9' could not be resolved, adding deferred bp
0:000> g
Python 2.7.11 (v2.7.11:6d1b6a68f775, Dec  5 2015, 20:40:30) [MSC v.1500 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import scipy.stats
...
Breakpoint 0 hit
libifcoremd!GETEXCEPTIONPTRSQQ+0xc9:
00007ffc`845909d9 eb10            jmp     libifcoremd!GETEXCEPTIONPTRSQQ+0xdb (00007ffc`845909eb)
0:000> u
libifcoremd!GETEXCEPTIONPTRSQQ+0xc9:
00007ffc`845909d9 eb10            jmp     libifcoremd!GETEXCEPTIONPTRSQQ+0xdb (00007ffc`845909eb)
00007ffc`845909db 0d00efffff      or      eax,0FFFFEF00h
00007ffc`845909e0 ba01000000      mov     edx,1
00007ffc`845909e5 ff158d390e00    call    qword ptr [libifcoremd!for_lt_ne+0x40ba8 (00007ffc`84674378)]
00007ffc`845909eb 488d0d0e9c0900  lea     rcx,[libifcoremd!GETHANDLEQQ (00007ffc`8462a600)]
00007ffc`845909f2 e8092e0a00      call    libifcoremd!for_lt_ne+0x30 (00007ffc`84633800)
00007ffc`845909f7 488d0d329f0900  lea     rcx,[libifcoremd!GETUNITQQ (00007ffc`8462a930)]
00007ffc`845909fe e8fd2d0a00      call    libifcoremd!for_lt_ne+0x30 (00007ffc`84633800)
0:000> 
```

所以现在正在`jmp`将参数推入堆栈和函数调用。所以不会安装它的 Ctrl-C 处理程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-18T14:37:38.833

## 解决方法：补丁`SetControlCtrlHandler`

```
import ctypes
SetConsoleCtrlHandler_body_new = b'\xC2\x08\x00' if ctypes.sizeof(ctypes.c_void_p) == 4 else b'\xC3'
try: SetConsoleCtrlHandler_body = (lambda kernel32: (lambda pSetConsoleCtrlHandler:
    kernel32.VirtualProtect(pSetConsoleCtrlHandler, ctypes.c_size_t(1), 0x40, ctypes.byref(ctypes.c_uint32(0)))
    and (ctypes.c_char * 3).from_address(pSetConsoleCtrlHandler.value)
)(ctypes.cast(kernel32.SetConsoleCtrlHandler, ctypes.c_void_p)))(ctypes.windll.kernel32)
except: SetConsoleCtrlHandler_body = None
if SetConsoleCtrlHandler_body:
    SetConsoleCtrlHandler_body_old = SetConsoleCtrlHandler_body[0:len(SetConsoleCtrlHandler_body_new)]
    SetConsoleCtrlHandler_body[0:len(SetConsoleCtrlHandler_body_new)] = SetConsoleCtrlHandler_body_new
try:
    import scipy.stats
finally:
    if SetConsoleCtrlHandler_body:
        SetConsoleCtrlHandler_body[0:len(SetConsoleCtrlHandler_body_new)] = SetConsoleCtrlHandler_body_old 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-18T09:46:10.497

尝试

```
import os
os.environ['FOR_IGNORE_EXCEPTIONS'] = '1'
import scipy.stats 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-15T14:58:30.613

这对我有用：

```
import os
os.environ['FOR_DISABLE_CONSOLE_CTRL_HANDLER'] = '1'
from scipy.stats import zscore 
```*

# java - 如何单击自动建议输入文本字段中的选项？Selenium 网络驱动程序

> ID：15457792
> 
> 赞同：1
> 
> 时间：2013-03-17T05:16:53.277
> 
> 标签：java, selenium

我正在使用 Selenium WebDriver 运行测试

我对输入文本字段*("Select Source: By Name:")*有疑问。当我在文本字段中输入字符串“ABC 高级新闻（澳大利亚）”时，会显示一个选项。然后我需要单击（或选择）它。我尝试了所有带有 fireEvent 的方法......没用。

以下是源代码：

```
driver.get("http://www..."); 
driver.switchTo().frame("mainFrame");
WebElement sourceTitle = driver.findElement(By.name("sourceTitle"));
sourceTitle.sendKeys("ABC Premium News (Australia)"); 
//Now a "combobox-like" option "ABC Premium News (Australia)" shows up...how do I click it?

// I tried fireEvent...it did not help. The following is one of my trials that does not work:
DefaultSelenium sel = new WebDriverBackedSelenium(driver,"http://www....");
sel.type("//input[@id='destination']", "ABC Premium News (Australia)");
sel.fireEvent("//input[@id='destination']", "keydown");
// In addition to keydown, I tried: onclick, onfocus, onblur... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:34:44.190

我知道这不是最好的方法，但它仍然可以用作临时解决方法。

```
WebElement sourceTitle = driver.findElement(By.name("sourceTitle"));

WebElement small = driver.findElement(By.cssSelector("li#nameExampleSection label + small"));

sourceTitle.sendKeys("ABC Premium News (Australia)"); 

Thread.sleep(5000);

Actions actions = new Actions(driver);

actions.click(small).perform(); 
```

# php - PHP 和 mysqli：使用准备好的语句选择多个条件

> ID：15457793
> 
> 赞同：0
> 
> 时间：2013-03-17T05:18:21.387
> 
> 标签：php, select, mysqli, prepared-statement

我正在使用*mysqli*在 php 文件中使用在*InnoDB*上运行的数据库来处理一些准备好的语句。大多数语句都运行良好，但是我有一个带有多个条件的 select 语句，它在我的 select 语句中不断返回语法错误，具体来说：`? AND section_num = ? AND dept = ? AND semester = ? AND year = ?`在第 1 行附近以及以下错误：

```
Call to a member function bind_param() on a non-object. 
```

这是代码片段：

```
if (!$rs = $mysqli->query("SELECT id FROM courses WHERE course_num = ? AND section_num = ? AND dept = ? AND semester = ? AND year = ?")) {
        echo "Select Query Failed!: (" . $mysqli->errno . ") ". $mysqli->error;
    }
    if(!$rs->bind_param("ssssi", mysqli_real_escape_string($mysqli,$course_num), mysqli_real_escape_string($mysqli,$section_num),
        mysqli_real_escape_string($mysqli,$dept), mysqli_real_escape_string($mysqli,$semester), mysqli_real_escape_string($mysqli,$year))) {
        echo "Select Binding parameters failed: (" . $rs->errno .") " . $rs->error;
    }
    if (!$rs->execute()) {
        echo "Execute select failed: (" . $rs->errno . ") " . $rs->error;
    } 
```

关于如何形成此语句以根据 4 个输入检索 id 的任何建议都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:24:02.163

您应该使用它`prepare`来准备一个语句，而不是`query`仅仅执行一个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:33:28.370

```
$query = "
SELECT id 
FROM courses 
WHERE 
course_num = ? AND section_num = ? AND dept = ? AND semester = ? AND year = ?
";
$rs = $mysqli->prepare($query);
$rs->bind_param("ssssi", $course_num, $section_num, $dept, $semester, $year);
$rs->execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T05:48:04.957

更改：`$mysqli->query("SELECT id ...` 至：`$mysqli->prepare("SELECT id ...`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-02-27T02:33:03.577

这样做很简单

```
$query = "SELECT * FROM `$table_tran` WHERE `$mem_id` ='$member_id' and                         $status` = '$cur_status'";
$result = mysqli_query($link,$query); 
```

It gets the data from the transaction table using the `and` statement.

# c - 四个连续逻辑

> ID：15457796
> 
> 赞同：8
> 
> 时间：2013-03-17T05:19:22.973
> 
> 标签：c, algorithm

我目前正在为自己制作一个基本的连续四场比赛，但我相当卡在它背后的逻辑上。

目前我有这个代表棋盘的多维数组

```
[
    [0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0]
] 
```

`0`将代表一个空槽，而`1`和`2`代表一个玩家。所以让我们说一段时间后你得到这个数组：

```
[
    [0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 1, 1, 0, 0],
    [0, 0, 0, 1, 1, 0, 0],
    [0, 0, 1, 2, 2, 2, 0],
    [0, 1, 2, 2, 1, 2, 0]
] 
```

如何编写逻辑来检查是否连续有四个？为水平和垂直计算它似乎很容易（尽管仍然找出最好的方法），但我将如何为对角线做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-17T05:27:47.237

最好的办法是将搜索空间分成四个：

*   垂直的;
*   水平的;
*   向右和向下；
*   正确和向上。

然后根据方向限制您的起点和终点坐标。

例如，假设您的数组位于`board[row=0-5][col=0-6]`左上角`board[0][0]`。

第一个垂直（在此伪代码的两端都包含循环）*：*

```
for row = 0 to 2:
    for col = 0 to 6:
        if board[row][col] != 0 and
           board[row][col] == board[row+1][col] and
           board[row][col] == board[row+2][col] and
           board[row][col] == board[row+3][col]:
               return board[row][col] 
```

这将可能性限制在那些不超出电路板边缘的范围内，这是大多数解决方案在简单地从检查每个单元格开始并从那里向各个方向延伸时都会遇到的问题。我的意思是，检查第 3 行的起始行是没有意义的，因为这将涉及第 3、4、5 和 6 行（后者不存在）。

同样，对于水平：

```
for row = 0 to 5:
    for col = 0 to 3:
        if board[row][col] != 0 and
           board[row][col] == board[row][col+1] and
           board[row][col] == board[row][col+2] and
           board[row][col] == board[row][col+3]:
               return board[row][col] 
```

对于右和下，然后是右和上：

```
for row = 0 to 2:
    for col = 0 to 3:
        if board[row][col] != 0 and
           board[row][col] == board[row+1][col+1] and
           board[row][col] == board[row+2][col+2] and
           board[row][col] == board[row+3][col+3]:
               return board[row][col]

for row = 3 to 5:
    for col = 0 to 3:
        if board[row][col] != 0 and
           board[row][col] == board[row-1][col+1] and
           board[row][col] == board[row-2][col+2] and
           board[row][col] == board[row-3][col+3]:
               return board[row][col] 
```

现在，您实际上可以通过制作外循环并只执行一次而不是两次来将这两者*结合起来*`for col = 0 to 3`，但我实际上更喜欢将它们分开（带有适当的注释），以便更容易理解。但是，如果您沉迷于性能，您可以尝试：

```
for col = 0 to 3:
    for row = 0 to 2:
        if board[row][col] != 0 and
           board[row][col] == board[row+1][col+1] and
           board[row][col] == board[row+2][col+2] and
           board[row][col] == board[row+3][col+3]:
               return board[row][col]
    for row = 3 to 5:
        if board[row][col] != 0 and
           board[row][col] == board[row-1][col+1] and
           board[row][col] == board[row-2][col+2] and
           board[row][col] == board[row-3][col+3]:
               return board[row][col] 
```

然后，如果在四个可能的方向上都没有找到胜利，则只需返回`0`而不是胜利者`1`或`2`。

因此，例如，您的示例板：

```
row
 0   [0, 0, 0, 0, 0, 0, 0]
 1   [0, 0, 0, 0, 0, 0, 0]
 2   [0, 0, 0, 1, 1, 0, 0]
 3   [0, 0, 0, 1, 1, 0, 0]
 4   [0, 0, 1, 2, 2, 2, 0]
 5 > [0, 1, 2, 2, 1, 2, 0]
         ^
      0  1  2  3  4  5  6 <- col 
```

将在起始单元格所在的右侧和向上循环中检测到获胜者，因为 ,`{5,1}`和`{5,1}`都设置为.`{4,2}``{3,3}``{2,4}``1`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T05:44:39.413

前段时间我开发了四个连续游戏。这是检查连续四个条件的获胜条件的代码片段：（这是用 C 语言编写的）

```
int checkWinOrLose(int grid[][7],int result,int rowNum) {
//  For checking whether any win or lose condition is reached. Returns 1 if win or lose is reached. else returns 0
//  grid[][] is the 6X7 matrix
//  result is the column number where the last coin was placed
//  rowNum is the row number where the last coin was placed

    int player=grid[rowNum][result];
    if(rowNum<=2 && grid[rowNum+1][result]==player && grid[rowNum+2][result]==player && grid[rowNum+3][result]==player) // 4 in a row vertically
        return 1;
    else {
        int count=1,i,j;
        for(i=result+1;i<7;i++) { // 4 in a row horizontally
            if(grid[rowNum][i]!=player)
                break;
            count++;
        }
        for(i=result-1;i>=0;i--) { // 4 in a row horizontally
            if(grid[rowNum][i]!=player)
                break;
            count++;
        }
        if(count>=4)
            return 1;
        count=1;
        for(i=result+1,j=rowNum+1;i<7 && j<6;i++,j++) { // 4 in a row diagonally
            if(grid[j][i]!=player)
                break;
            count++;
        }
        for(i=result-1,j=rowNum-1;i>=0 && j>=0;i--,j--) { // 4 in a row diagonally
            if(grid[j][i]!=player)
                break;
            count++;
        }
        if(count>=4)
            return 1;
        count=1;
        for(i=result+1,j=rowNum-1;i<7 && j>=0;i++,j--) { // 4 in a row diagonally
            if(grid[j][i]!=player)
                break;
            count++;
        }
        for(i=result-1,j=rowNum+1;i>=0 && j<6;i--,j++) { // 4 in a row diagonally
            if(grid[j][i]!=player)
                break;
            count++;
        }
        if(count>=4)
            return 1;
    }
    return 0;
} 
```

# java - 检测天气一个节点是NEO4J中的叶节点

> ID：15457798
> 
> 赞同：-3
> 
> 时间：2013-03-17T05:20:17.623
> 
> 标签：java, neo4j

我有一个节点“mynode”。我怎么能说它是叶节点？我想得到一个布尔值（真/假）。像

```
if(mynode is a leafnode)
{
......
} 
```

我正在用java编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:47:40.163

在 Java 中： node.getRelationships(Direction.OUTGOING) 会给你传出关系。 [http://api.neo4j.org/1.8.2/org/neo4j/graphdb/Node.html#getRelationships%28org.neo4j.graphdb.Direction%29](http://api.neo4j.org/1.8.2/org/neo4j/graphdb/Node.html#getRelationships%28org.neo4j.graphdb.Direction%29)

您还可以为此编写一个 Cypher 查询：

```
start n=<look up your node>
match n-[r]->()
return count(r) as outgoing 
```

# php - $_GET 不从 URL 检索 id

> ID：15457799
> 
> 赞同：2
> 
> 时间：2013-03-17T05:20:26.633
> 
> 标签：php

我有一个包含类别的垂直菜单栏，这些类别下有产品。当我将鼠标悬停在类别上时看到的 URL 是`..../index.php?catid=1`

例如我有

```
category- SCHOOLS (catid=1)
products - NPS, DPS... 
```

为了显示产品，当我将鼠标悬停在产品上时，我需要使用*$_GET从 URL 获取“catid”。*

这是该部分的代码：

```
$fetchedcatid = $_GET['catid'];
$resultLIst = array();
$i = 0;
$sql="Select * from product_master where id = ".$fetchedcatid;
$query=mysql_query($sql) or die(mysql_error()); 
```

这给了我一个 MYSQL 错误，因为 catid 没有存储在 $fetchedcatid 中。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T05:21:44.347

你需要先检查一下`catid`在使用前设置的也使用单例也不是好的选择

```
if(isset($_GET['catid'])){
 // other stuff use $_GET['catid']

} 
```

您也可以使用[`is_int`](http://www.php.net/manual/en/function.is-int.php)or[`ctype_digit`](http://php.net/manual/en/function.ctype-digit.php)确保 id 只有数字

* * *

## **警告**

您的代码容易受到[sql 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响，您需要全部转义`get`，更好的方法是使用[Prepared 语句](http://en.wikipedia.org/wiki/Prepared_statement)`post``request`

**好读**

1.  [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)
2.  [**PDO 准备好的语句是否足以防止 SQL 注入？**](https://stackoverflow.com/a/12202218/1723893)

* * *

## **笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了所有以 mysql_ 为前缀的函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958.)
2.  [MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)
3.  [Pdo 初学者教程](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php/14110189#14110189)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:22:41.507

启动对`$_GET['catid']`变量的测试

```
$fetchedcatid = isset($_GET['catid']) ? $_GET['catid'] : FALSE;

if($fetchedcatid) { 
  // do stuff here 
  // you will want to sanitize this variable especially when using it in a mysql_query statement
 //For Example:

$resultLIst = array();
$i          = 0;
$sql        = "Select * from product_master where id = ".mysql_real_escape_string($fetchedcatid);
$query      = mysql_query($sql) or die(mysql_error());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T05:33:18.363

我的理解是您对 $_GET 变量有问题，而不是它们是否已设置（虽然所有优点，但我认为这不是 OP 的主要问题）。

尝试：

```
<?php 

if(empty($_GET)) 
echo "_GET is empty"; 
else 
print_r($_GET); 

?> 
```

如果您没有获得任何变量，那么您的配置设置有问题，也许 _GET 被禁用或被框架重新分配给其他变量？

[GET、POST 和 REQUEST 的 PHP 文档](http://www.php.net/manual/en/language.variables.external.php)

# java - 如何将整数字符串放入整数数组中？

> ID：15457811
> 
> 赞同：2
> 
> 时间：2013-03-17T05:23:02.580
> 
> 标签：java, compilation, compiler-errors

沙盒：

```
 import java.util.Arrays;
    import java.util.Scanner;
    import static java.lang.System.*;
    import static java.util.Arrays.*;

 public class Sandboxx
{
    public static void main( String args[] )
   {

     Construct ion = new Construct(3, "3, 2, 1, 0");

   }

} 
```

构造：

```
import java.util.Arrays;
import java.util.Scanner;
import static java.lang.System.*;
import static java.util.Arrays.*;

public class Construct
{

  int length;
  String s;

  public Construct() {

  }

  public Construct(int _length) {

  }

   public Construct(String _s) {

  }

  public Construct(int _length, String _s) {

     length = _length;
    s = _s;

    Scanner chopper = new Scanner(s);

    int[] nums = new int[3];
    while (chopper.hasNextInt()) {

       nums = chopper.nextInt();
    }

  }

} 
```

我正在尝试将一串整数 (s) 放入整数数组 (nums) 中。我写了这段代码，但我收到了这个错误：错误：/Users/bobgalt/Construct.java:41: '.class' expected。如您所见，我是java的新手，但我似乎无法弄清楚如何将整数字符串放入整数数组中。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T05:28:29.297

我认为您的问题是“如何将字符串“3、2、1、0”解析为一组整数？

最简单的答案是 String.split()。

示例（*未经测试*）：

```
 String s = "3, 2, 1, 0";
  String a[] = s.split(",");
  int[] nums = new int[a.length];
  for (int i=0; i < a.length; i++)
     nums[i] = Integer.parseInt(a[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T05:28:36.797

你可以尝试这样的事情： -

```
String s= "{3,2,1,0}";
String[] x= s.replaceAll("\\{", "").replaceAll("\\}", "").split(",");

int[] s= new int[x.length];

for (int i = 0; i < x.length; i++) {
    try {
        s[i] = Integer.parseInt(x[i]);
    } catch (Exception e) {};
} 
```

# list - 在 JavaFX 中使用 ListProperty

> ID：15457814
> 
> 赞同：7
> 
> 时间：2013-03-17T05:24:00.313
> 
> 标签：list, javafx-2, listproperty

我定义了一个包含列表的类。我正在尝试使用传输列表初始化构造函数中的列表：

```
public class Person {
    public IntegerProperty id;
    public ListProperty<Priority> choice;

    public Person(int id, List<Priority> list) {
        this.id = new SimpleIntegerProperty(id);
        this.choice = new SimpleListProperty<Priority>();
        for (int i = 0; i < 5; i++) {
            this.choice.add(list.get(i));
        }
    }

    public IntegerProperty idProperty() { return id; }
    public ListProperty<Priority> choiceProperty() { return choice; }
} 
```

该类`Priority`包含两个字段及其吸气剂：

```
public IntegerProperty rate;  
public StringProperty speciality; 
```

难道是我没有`ListProperty`正确使用？

当我尝试创建对象时：

```
Exception in Application start method
Exception in thread "main" java.lang.RuntimeException: Exception in Application start     method
  at  com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:403)
  at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
  at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
  at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.UnsupportedOperationException
  at java.util.AbstractList.add(AbstractList.java:148)
  at java.util.AbstractList.add(AbstractList.java:108)
  at java.util.AbstractCollection.addAll(AbstractCollection.java:334)
  at javafx.beans.binding.ListExpression.addAll(ListExpression.java:280)
  at Person.setAllchoice(Person.java:24)
  at Person.<init>(Person.java:17)
  at Distribution.ReadDataFromFile(Distribution.java:85)
  at Distribution.start(Distribution.java:28)
  at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
  at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:215)
  at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:179)
  at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:176)
  at java.security.AccessController.doPrivileged(Native Method)
  at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:176)
  at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:76)
  at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
  at com.sun.glass.ui.gtk.GtkApplication$3$1.run(GtkApplication.java:82)
  ... 1 more 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-17T17:43:35.957

尝试以`SimpleListProperty`这种方式初始化：

```
public Person(int id, List<Priority> list) {
    ...
    ObservableList<Priority> observableList = FXCollections.observableArrayList(list)
    this.choice = new SimpleListProperty<Priority>(observableList);
} 
```

# python - django south：没有名为 southutils.wsdl 的模块

> ID：15457816
> 
> 赞同：1
> 
> 时间：2013-03-17T05:24:11.363
> 
> 标签：python, django, django-south

我想在 django 项目中使用南。

在我安装南（尝试easy_install并从源代码构建）并添加`'south'`到`INSTALLED_APPS`之后，`./manage.py shell`给了我这个错误：

**`Error: No module named southutils.wsdl`**

我用谷歌搜索，但没有任何页面提到过“southutils.wsdl”。

怎么装？任何建议都会被采纳。

我的环境：

```
South-0.7.6$ sudo python setup.py install
....
Installed /usr/local/lib/python2.6/dist-packages/South-0.7.6-py2.6.egg
Processing dependencies for South==0.7.6
Finished processing dependencies for South==0.7.6

------------------------
Django Version: 1.4
Python Version: 2.6.5
Python Path:    
['/home/jifenzhong/servers/webapps/utils-web',
 .....
 '/usr/local/lib/python2.6/dist-packages/South-0.7.6-py2.6.egg',
 .....
 '/usr/local/lib/python2.6/dist-packages'] 
```

# php - 计算总行数

> ID：15457817
> 
> 赞同：0
> 
> 时间：2013-03-17T05:24:19.367
> 
> 标签：php, mysql

我像这样从数据库中获取和显示记录

```
SELECT purchorders.orderno,
                    suppliers.suppname,
                    purchorders.orddate,
                    purchorders.deliverydate,
                    purchorders.initiator,
                    purchorders.requisitionno,
                    purchorders.allowprint,
                    purchorders.status,
                    suppliers.currcode,
                    currencies.decimalplaces AS currdecimalplaces,
                    SUM(purchorderdetails.unitprice*purchorderdetails.quantityord) AS ordervalue
                FROM purchorders 
                INNER JOIN purchorderdetails 
                ON purchorders.orderno = purchorderdetails.orderno
                INNER JOIN suppliers
                ON purchorders.supplierno = suppliers.supplierid
                INNER JOIN currencies 
                ON suppliers.currcode=currencies.currabrev
                WHERE purchorders.orderno=purchorderdetails.orderno
                GROUP BY purchorders.orderno,
                    suppliers.suppname,
                    purchorders.orddate,
                    purchorders.initiator,
                    purchorders.requisitionno,
                    purchorders.allowprint,
                    purchorders.status,
                    suppliers.currcode,
                    currencies.decimalplaces LIMIT 5 
```

我得到了正确的结果。但我想计算并显示我显示的 ordervalues 的结果（总共 5 个，因为我将其限制为 5 个）

我试着这样做

```
$SalesOrdersResult2 = DB_query($SQL,$db);
while ($row = DB_fetch_array($SalesOrdersResult2))
{
$FormatedOrderValue2 = locale_number_format($row['ordervalue'],$row['currdecimalplaces']);
$Total = $array_sum($row['ordervalue']);
$FormatedOrderDate1 = ConvertSQLDate($row['orddate']);
                        $FormatedDelDate1 = ConvertSQLDate($row['deliverydate']);

                        echo " <tr><td> " . $row['suppname'] . " </td>";
                        echo " <td>$FormatedOrderDate1</td><td>$FormatedDelDate1</td><td> " . $row['initiator'] . " </td><td>$FormatedOrderValue2</td><td> " . $row['status'] . " </td></tr> ";

                    }
        echo "<tr><td colspan='3'>Total---</td><td colspan='2'>$Total</td></tr></tbody>"; 
```

但它说**“致命错误：函数名称必须是...中的字符串”**

有人请帮我做这个谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:25:55.787

删除`$`之前的`array_sum`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:34:11.810

我怀疑你正在尝试做这样的事情？：

```
$SalesOrdersResult2 = DB_query($SQL, $db);
$Total = 0;
while ($row = DB_fetch_array($SalesOrdersResult2))
{
    $FormatedOrderValue2 = locale_number_format($row['ordervalue'],$row['currdecimalplaces']);
    $Total += $row['ordervalue'];
    $FormatedOrderDate1 = ConvertSQLDate($row['orddate']);
    $FormatedDelDate1 = ConvertSQLDate($row['deliverydate']);
    echo " <tr><td> " . $row['suppname'] . " </td>";
    echo " <td>$FormatedOrderDate1</td><td>$FormatedDelDate1</td><td> " . $row['initiator'] . " </td><td>$FormatedOrderValue2</td><td> " . $row['status'] . " </td></tr> ";
}
echo "<tr><td colspan='3'>Total---</td><td colspan='2'>$Total</td></tr></tbody>"; 
```

# ios - Objective-C UIButton 网格生成

> ID：15457820
> 
> 赞同：1
> 
> 时间：2013-03-17T05:24:40.817
> 
> 标签：ios, objective-c, arrays, uibutton, grid

可可之王 - 我需要帮助！

我正在编写我的第一个应用程序（游戏），并尝试在 Core Frameworks 和 UIKit 中完成所有工作。我的游戏涉及一个由我手动创建的 UIButtons 制成的 5 x 8 板（！）。当我改变一个人的行为时要更新的大量 PItA。我尝试过使用可变数组和 UIButton 生成器，但我对这些东西仍然很糟糕，而且我在让事情正常工作方面非常不成功。

该按钮存储它的状态、价值、所有者和来源。我目前有 A、B、C、D、E 重新表示列，1-8 表示行。按钮为 62x62，网格两侧有 1 个像素的边距，按钮之间有 2 个像素的缓冲区和边距。

有人可以帮我从一个我为每个按钮指定标签、值等的类中获得一个不错的小数组生成器，并以编程方式吐出网格吗？

按钮示例：

```
 -(IBAction) buttonA1:(id)sender {
UIButton *theButton = (UIButton *)sender;
theButton.titleLabel.font = [UIFont fontWithName:@"Gotham Rounded" size:22];
NSString *Title = theButton.titleLabel.text;

if (tapA1 != 1) {

    [theButton  setAlpha:1.0];

    tapSum++;
    tapA1 = 1;

    [theButton setTitle: @"A1" forState: UIControlStateNormal];
    NSLog(@"Press recieved from %@:\n\nSum is %i.\n", Title, tapSum);
    [theButton setBackgroundImage:[UIImage imageNamed:@"red-dot.png"] forState:UIControlStateNormal];

}
else if (tapA1 == 1)
{
    [theButton  setAlpha:0.3];

    tapA1 = 0;
    tapSum--;

    NSLog(@"Press recieved from %@:\n\nSum is %i.\n", Title, tapSum);
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T06:01:40.403

好吧，您可以像这样创建一个网格：-

```
#define WIDTH 62
#define HEIGHT 62
#define PADDING 3
#define NUMBEROFBUTTONSINAROW 8
#define X 100
#define Y 100
#define TOTALBUTTONS 40

NSMutableArray *array = [[NSMutableArray alloc] init];

    for(int i=0 ; i<TOTALBUTTONS;i++)
    {
        UIButton *btnClick = [UIButton buttonWithType:UIButtonTypeCustom];
        [btnClick setImage:[UIImage imageNamed:@"ship.jpg"] forState:UIControlStateNormal];
        [btnClick setFrame:CGRectMake(X+((WIDTH + PADDING) * (i%NUMBEROFBUTTONSINAROW)), Y + (HEIGHT + PADDING)*(i/NUMBEROFBUTTONSINAROW), WIDTH, HEIGHT)];
        [btnClick addTarget:self action:@selector(btnTapped:) forControlEvents:UIControlEventTouchUpInside];
        btnClick.tag=i + 1;
        [self.view addSubview:btnClick];

        [array addObject:btnClick];
    } 
```

最后是按钮操作：-

```
-(void)btnTapped:(id)sender
{

    NSLog(@"Button Clicked %d",((UIButton *)sender).tag);
} 
```

您可以通过标签值访问按钮。该数组不是必需的。好吧，如果你喜欢，可以通过数组访问它。

或者，您可以创建一个将所有按钮自定义与其关联的类，并将类对象存储在 Array 中，以便稍后访问它。在这种情况下，按钮实现将在类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T05:49:33.573

好的，对于这个解决方案，我假设每个按钮都有一个“TapxY”BOOL 变量和“buttonxY:”选择器，其中 x:[A,B,C,D,E] 和 Y:[1-8]。

您想要做的是使每个按钮的按钮标签为 1000+n（1000 只是为了使标签永远不会为 0。只要您跟踪它，这可以是任何东西。）

这样，标签将是 1000,1001,...,1000+col*row-1（在 5x8 中为 1039）。

我还假设 tapxY (ex tapA1) 永远只会是 0 或 1。你要做的是创建一个 NSMutableArray 的布尔值 (可以存储为 [NSNumber numberWithBool:boolVal])，它具有 col*row ( 40) 以 [NSNumber numberWithBool:NO] 开头的元素；

在您的 buttonAction:(id)sender 方法中，您可以这样做：

```
UIButton *theButton = (UIButton *)sender;
int buttonNum = theButton.tag-1000;
BOOL buttonTapped = [[tapped objectAtIndex:buttonNum] boolValue];
if (buttonTapped) { //Assuming tapped is your array of tapped buttons.
    tapSum++;
    //Set this button up however you want for the tapped state.
}
else {
    tapSum--;
    //Set this button up as not tapped
}
[tapped replaceObjectAtIndex:buttonNum withObject [NSNumber numberWithBool:!buttonTapped]]; //set this button as the opposite of what it just was. 
```

然后，当您创建按钮时，您只需执行以下操作：

```
int rows = 5;
int columns = 8;
for (int n=0;n<rows;n++) {
    for (int m=0;m<columns;m++) {
        CGRect frame = CGRectMake(1+64*n,1+64*m,62,62);
        Button *button = [[UIButton alloc] initWithFrame:frame]; // or create a rounded rect and set its frame.
        [button setTag:1000+n*columns+m]; //sets tag to a number 1000 to rows*columns-1
        //Then do other setup for the button.
        [button addTarget:self forSelector:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside];
        [self.view addSubview:button];
    }
} 
```

*注意：请勿完全复制此代码，因为可能存在一些拼写错误且未经测试*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T05:41:37.800

你是这个意思吗？

```
#define kButtonSize 62
#define kMaxRows 6
#define kMaxColumns 4
#define kButtonSpacingWidth (([[UIScreen mainScreen].bounds.size.width - kMaxColumns * kButtonSize) / (kMaxColumns + 1))
#define kButtonSpacingHeight (([[UIScreen mainScreen].bounds.size.height - kMaxRows * kButtonSize) / (kMaxRows + 1))

- (UIButton *)buttonAtRow:(int)r column:(int)c
{
    CGRect frm = CGRectMake(
        kButtonSpacingWidth + c * (kButtonSize + kButtonSpacingWidth),
        kButtonSpacingHeight + r * (kButtonSize + kButtonSpacingHeight),
        kButtonSize,
        kButtonSize
    );

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
    btn.titleLabel.font = [UIFont fontWithName:@"FooBar-Bold" size:42.0];
    btn.frame = frm;
    [btn setBackgroundImage:[UIImage imageNamed:@"Baz.jpg"] forState:UIControlStateNormal];

    return btn;
} 
```

想象一下按钮是如何放置的，应用像减法和除法这样的小学数学，其余的都是微不足道的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T05:44:23.663

For循环来救援！你可以用一点视觉空间思维来制作一个网格：

```
-(void)generateSomeButtons {
    int row = 0;
    int col = 0;
    for (int tag = 0; tag < 40; tag++)
        UIButton *btn = //...
        btn.tag = tag;
        int buf = 1;
        //no division by 0 
        if (tag == 0) {
            buf = 2;
            row = 0; 
        }
        //Reset when it moves to the sixth element
        else if (tag % 6 == 0) {
            row = 0;
            col++;
        } 
        //Else buffer by 2 pixels
        else {
            buf = 2;
        }
        btn.frame = CGRectMake(buf + (row * 62), (col*62) + 2, 62, 62);
        [self.view addSubview:btn];
        row++;
    }
} 
```

这里只是基本的数学。

# javascript - Javascript Backbone 在更高的上下文中存储值

> ID：15457828
> 
> 赞同：0
> 
> 时间：2013-03-17T05:28:07.187
> 
> 标签：javascript

我正在使用主干，我有这个代码：

```
render: function() {
    var displayData = this.model;

    fetchData('checkComplete', this.model.id, function(checkCompleteData) {
        displayData.complete = checkCompleteData; // Value is true
    });

    fetchData('showGraphicAssets', this.model.id, function(showGraphicsData) {
        $.each(showGraphicsData, function(index, value) {
            if (value.type === "GRAPHIC_A") {
                displayData.assetId = value.id; // Value is 808
            }
        });
    });

    console.log(displayData.complete); // Valus is undefined
    console.log(displayData.assetId); // Value is undefined

    var html = this.template.tmpl(displayData.toJSON());
    $(this.el).html(html);
}

fetchData = function(dataRequest, id, callback) {
request = '/show/' + id + '/completed.json';
$.ajax({
    url: '/app' + request,
    type: 'GET',
    dataType: 'json',
    success: function(data) {
        callback(data);
    }
}); 
```

};

如您所见，我`displayData`在函数之外定义了变量`fetchData`。当我尝试在`fetchData`上下文中添加属性时，它可以工作，而当我尝试在`fetchData`上下文之外使用它时，它会导致未定义。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:00:39.077

这是人们使用 JavaScript 时最常见的问题。您不尊重回调的异步性质。

你不能在回调函数中设置一个值（就像你用 做的那样`displayData.assetId`）并假设它必须在几行之后才可用。它不是。永远不会。

回调完成后将可用。由于您有其中两个，请使用专门用于处理多个异步调用的 jQuery[`$.when()`函数](http://api.jquery.com/jQuery.when/)（及其伙伴[`.then()`](http://api.jquery.com/deferred.then/),[`.fail()`](http://api.jquery.com/deferred.fail/)和）：[`.always()`](http://api.jquery.com/deferred.always/)

```
render: function () {
    var self = this, model = self.model, template = self.template;

    $.when(
        $.get('/app/show/checkComplete/' + model.id + '/completed.json'),
        $.get('/app/show/showGraphicAssets/' + model.id + '/completed.json')
    )
    .then(function (checkCompleteData, showGraphicsData) {
        // this will receive the response data in the correct order

        model.complete = checkCompleteData;

        $.each(showGraphicsData, function (index, value) {
            if (value.type === "GRAPHIC_A") {
                model.assetId = value.id;
                return false; // break the $.each()
            }
        });

        $(self.el).html( template.tmpl(model.toJSON()) );
    })
    .fail(function () {
        // this will be called if either HTTP request fails
        // also check out the arguments and react accordingly to errors
    });
} 
```

请注意，由于您需要更少的样板，代码也变得更短。

如果您确保您的视图使用正确的 Content-Type ( `application/json`) 就`$.get()`足够了；避免`$.ajax()`在视觉上更清洁。

# javascript - 如何在 HTML5 Canvas 中丢帧

> ID：15457829
> 
> 赞同：1
> 
> 时间：2013-03-17T05:28:13.023
> 
> 标签：javascript, html, canvas, frame-rate

我正在用画布元素用 HTML5 制作一个小游戏。它在大多数计算机上运行良好，但在其他计算机上却落后。但是，它不会跳过帧，它会继续渲染每一帧并且游戏会变慢。我正在尝试编写一个跳过帧的函数，但我想不出一个公式来做到这一点。

我试过四处寻找，但我什么也没找到。

我有一个渲染游戏的函数叫做渲染，它在这样的循环中：

```
var renderTimer = setInterval("render(ctx)", 1000/CANVAS_FPS);

render()
{
/* render code here */
} 
```

谢谢你的帮助，布兰登·菲佛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:46:20.077

**此模式将允许您在已知速度较慢的计算机上跳过帧**

```
var isSlowComputer=true;
var FrameSkipper=5;

function render(){

    // if this is a slow computer
    // just draw every 5th frame
    if(isSlowComputer && --FrameSkipper>0){ return; }

    // reset the frame skipper
    FrameSkipper=5;

    // draw your frame now

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T07:18:16.370

如果您的目标市场是使用支持 HTML5 的浏览器的人，您可以只使用 window.requestAnimationFrame。这允许您将所有渲染逻辑绑定在一个简单的地方，并且只有在必须时才会减慢速度。它将努力达到每帧分配 16 毫秒，从而使您达到 60 fps。

`var canvas = document.getElementById("#canvas"); (function drawFrame(){ window.requestAnimationFrame(drawFrame, canvas); // your main code would fire off here }());` 只要您让浏览器计算出您的帧速率，您就可以了。

我之前用画布写过一些不同的体验，在我使用 requestAnimationFrame 之前，事情有点不稳定。

要记住的另一件事是双缓冲区。如果您要在任何给定时刻在屏幕上写很多东西，我发现将它们全部写到第二个隐藏的画布元素中会更容易，然后只需使用它就`context.drawImg(buffer,0,0);`可以摆脱很多麻烦。只要您认为通过画布的代码即使在很多压力下也不应该变得不稳定。

祝你好运

# php - 特定 PHP 脚本的自定义权限

> ID：15457833
> 
> 赞同：1
> 
> 时间：2013-03-17T05:28:39.780
> 
> 标签：php, security, permissions

我正在开发一个网站，它提供了客户端可以将他们的 PHP 脚本上传到我服务器上的特定目录的选项。我想确保我的系统是安全的，因此我不希望人们能够使用这些 PHP 脚本来编辑或查看它们上传到的目录之外的文件。换句话说，如果 有文件`public_html/directory1/foo.php`，它应该只能编辑和查看 中的文件`public_html/directory1`，而不能编辑或查看系统上其他任何地方的文件。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:44:46.903

这是*超级*危险的。从技术上讲，如果您了解 linux/windows 用户和组配置、`Apache`配置和`PHP`配置的方式，那么有一些方法可以做到这一点。您需要`Apache`在具有极其特定权限的用户下运行，并配置 PHP 以禁止某些类型的命令（最值得注意的是`exec`/`system`命令，但还有很多其他可能会给您带来麻烦的命令）。

我强烈建议您尝试找出一种方法来避免让您的用户有权将文件上传到一个文件夹，服务器将在该文件夹中将它们作为 PHP 进行评估。有太多事情可能出错，太多设置可以忽略。

如果您决定走这条路，请阅读有关安全 PHP 配置和[Apache Privilege Separation](http://wiki.apache.org/httpd/PrivilegeSeparation)的大量信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:44:21.417

由于 PHP 是服务器端脚本，我相信您会发现很难正确保护您的系统。话虽如此，您可以通过由无权访问其他目录的用户运行 apache 服务器来限制这些文件，请查看[SElinux](http://en.wikipedia.org/wiki/Security-Enhanced_Linux)以获取更多信息。请注意，这样做真的很难，你甚至可能忘记一个文件，以后可以用来破解系统。

更好的方法可能是在虚拟机上运行这些服务器，这样即使有人劫持了虚拟机，你也可以随时关闭它并恢复它的数据。

# javascript - Javascript 在 apache 服务的 html 中不起作用

> ID：15457835
> 
> 赞同：1
> 
> 时间：2013-03-17T05:29:10.200
> 
> 标签：javascript, html, apache

我在 gentoo 上设置了一个 apache 服务器，我希望能够在 apache 提供的 html 文件中运行 javascript 代码。

如果我在 Chrome 中手动打开位于 apache 服务器上的 html 文件，则 javascript 可以正常工作。如果我通过 apache 使用服务器地址浏览到 html 文件，它不会执行。这是我的测试 html，非常简单：

```
<html>
    <h2>js test</h2>
    <script>
        alert("Hey");
    </script>
</html> 
```

我以前从未见过这种行为。有任何想法吗？

编辑：手动打开并使用服务器地址的意思是：

```
file:///mnt/server/path/to/file.html (opening manually)
http://server/path/to/file.html (browsing to apache server) 
```

编辑 2：apache 的 error_log 中没有错误。起初我使用 jquery 来尝试做一些 ajax 的东西，但我试图将这个问题的所有内容都简化到最大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:35:25.260

正如@Blender 所指出的，HTML 缺少典型的 head.../head 和 body.../body 部分。也许这对正确加载 HTML 和触发脚本部分的浏览器很重要。

此外，像 alert() 这样的弹出窗口可以被浏览器中的弹出窗口阻止程序阻止，这些阻止程序可以区分站点和文件 url。

# windows-8 - 从 soundcloud 和 reverbnation 获取 Windows 8 应用程序的数据

> ID：15457837
> 
> 赞同：0
> 
> 时间：2013-03-17T05:29:16.410
> 
> 标签：windows-8

我正在尝试为将歌曲存储在 Reverbation 和 soundcloud 上的特定乐队创建一个 Windows [8](http://www.reverbnation.com/)应用[程序](https://soundcloud.com)。我的问题是我不知道如何从这些站点获取这些内容...我尝试使用 feedburner 创建一个 rss 提要，但失败了。有什么方法可以获取我的应用程序的提要或数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:03:11.533

SoundCloud 有一个有[据可查的 API](http://developers.soundcloud.com/docs)。您可以自行检查您需要的功能是否可用。

另一方面，ReverbNation[目前似乎没有可用的公共 API](http://support.reverbnation.com/reverbnation/topics/reverbnation_web_service_api_for_developers)。页面页脚中只有一个 API 链接，它打开一个对话框，用于通过电子邮件订阅有关该消息的任何新闻。

# java - 通过UI实现数据转换规则有什么好的框架

> ID：15457839
> 
> 赞同：2
> 
> 时间：2013-03-17T05:30:02.723
> 
> 标签：java, user-interface, transform

让我描述一下这个问题。许多供应商以各种格式（带有各种标题）向我们发送数据文件。我们无法控制数据格式（供应商发送给我们的列）。然后这个数据需要转换成我们的标准交易（这个标准是不变的，由我们定义）。

这里的挑战是我们无法控制供应商在他们的文件中向我们发送哪些列。目标标准是恒定的。现在我被要求开发一个框架，最终用户可以通过它通过 UI 定义自己的数据转换规则。（假设目标事务中的字段 A 等于 columnX+columnY 或输入文件中 columnZ 的前 3 个字符）。会有很多这样的数据转换规则。

目标是用户应该能够添加所有这些供应商文件（并以最少的代码更改将他们的所有数据从前端 UI 转换为我的公司数据）。请为此建议我一些框架（最好是基于java的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:30:36.450

之前在类似的领域工作过。不确定我是否会信任客户/供应商正确使用这样的工具并设计 100% 防弹转换。映射列是一回事，但是日期、货币值等的格式问题如何呢？无论如何，您可能需要手动检查他们的创建，否则您最终会遇到一些非常讨厌的数据一致性问题。错误的数据转换导致的错误是隐藏在黑暗中并在您最不需要它们时向您扑来的小野兽。

如果您只需要一种相对简单的图形化方式来设计数据对话，请查看 Talend Open Studio 之类的工具（只需 google 一下）。它称自己为 ETL 工具，但我们用于各种东西。

# arrays - 在 VB 中错误地使用数组 - 不知道如何解决

> ID：15457845
> 
> 赞同：0
> 
> 时间：2013-03-17T05:30:46.017
> 
> 标签：arrays, vb.net

自从我接触 vb.net 以来已经有很长时间了，我遇到了问题.. 它应该是一个简单的问题，但我迷路了。我想创建一个循环字符串，但在此之前我正在尝试学习如何使用字符串数组。

以下代码是我所拥有的，但在 g(1,0)=t 行总是有错误它不是对象实例。如何才能做到这一点？

代码：

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Dim g(,) As String
        Dim t As String = "ok"
        g(1, 0) = t
        MsgBox(g(1, 0))
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:34:04.783

你需要给你的数组一个大小。例如：

```
Dim g(100, 100) As String 
```

[http://msdn.microsoft.com/en-us/library/vstudio/wak0wfyt.aspx#BKMK_CreatingAnArray](http://msdn.microsoft.com/en-us/library/vstudio/wak0wfyt.aspx#BKMK_CreatingAnArray)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T05:59:31.960

试试这个，

```
 Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Dim g(,) As String= {{"Hai","Hello"},{"ok","then"}}
        MsgBox(g(1, 0))
    End Sub 
```

有关更多信息，请参阅[此。](http://msdn.microsoft.com/en-us/library/0sxy840k%28v=vs.80%29.aspx)

**编辑：**

你可以像这样遍历你的数组

```
 Dim g(1,1) As String

   for i as integer=0 to 1
      for j as integer=0 to 1
         g(i,j)="Your text"
      next
   next 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T15:52:44.837

在尝试重新确定数组的维度（更改大小）之前，请使用 REDIM 语句（重新维度）。

就像是

```
REDIM g(10, 10) 
```

# android - 所有示例中的 Facebook Android 3.0 空白登录页面

> ID：15457847
> 
> 赞同：4
> 
> 时间：2013-03-17T05:31:23.847
> 
> 标签：android, facebook

在模拟器上尝试 FB android 3.0 SDK。尝试运行不同的示例，但所有示例都停留在空白 webview 上。下面是我启动 FriendPickerSampleActivity 时的 logact。

日志猫：

```
 03-17 10:56:12.653: D/FacebookSDK.WebDialog(457): Webview loading URL:   https://m.facebook.com/dialog/oauth?type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess&display=touch&client_id=370546396320150 
```

已经 2 天尝试了多种选择，但都是徒劳的。任何帮助？

我从来没有在模拟器上安装或使用过 FB。这里空白意味着全白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:21:31.310

将沙盒选项更改为禁用。( 设置 -> 基本信息 )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:51:48.860

正如我在这里回答的那样[Android Facebook API 显示白色空白页](https://stackoverflow.com/questions/15471493/android-facebook-api-shows-white-blank-page)

添加

webView.resumeTimers();

在 com.facebook.widget.WebDialog.setUpWebView() 结束时为我工作。（Facebook SDK 3.0+）

# sql - SQL 连接表和显示数据

> ID：15457848
> 
> 赞同：0
> 
> 时间：2013-03-17T05:31:27.717
> 
> 标签：sql, join

我有 3 张桌子与我遇到麻烦的医院有关。

[![http://postimage.org/image/hi2c4yrrf/](../Images/1dcd2c85c8b8e25d0c7f142d9ecee516.png)](https://i.stack.imgur.com/a5eMj.jpg)

**入院**包含患者ID、入院日期、出院日期和病房。
**医生**，姓，名和病房。
**Ward** wardid，姓名和顾问（博士）

我已经能够做很多教程要求我做的事情，但是我找不到任何关于如何执行以下操作的指导或答案：

我希望找到患者未使用的医生的姓氏，并显示患者使用的姓氏。我猜想加入医生和病房表，并以某种方式入院以表明医生 530 没有被任何患者使用。

然后我应该有一个 AND 来显示病房表中与顾问对应的医生的姓氏。

要查找未治疗任何患者的医生的详细信息，我将加入 Doctor with Ward 并显示不在顾问列中的医生的详细信息。我理解这个理论，我只是不确定如何在 SQL 中正确地解决它。

我欢迎任何讨论或帮助，因为我真的很想了解这一步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:04:34.823

**患者不使用的医生**

```
select distinct d.number, d.surname
from doctor d
left join ward w on w.consultant = d.number
left join admission ad on ad.ward = w.code
left join patient p on p.code = ad.patient
where p.code is null 
```

**患者使用的医生**

```
select distinct d.number, d.surname
from doctor d
join ward w on w.consultant = d.number
join admission ad on ad.ward = w.code
join patient p on p.code = ad.patient 
```

**架构（用于测试）：**

```
select * into patient
from (
  select 'A102' [code], 'Harris' [surname], 'Lucy' [lastname] union all 
  select 'B372', 'Rossini', 'Peter' union all
  select 'B534', 'Johnson', 'Nadia' union all
  select 'B444', 'Johnson', 'Juigi' union all
  select 'S555', 'Rose', 'Jean') as p

select * into admission
from (
  select 'A102' [patient], null [admitted], NULL [discharged], 'A' [ward] union all
  select 'A102', null, NULL, 'A' union all
  select 'S555', null, NULL, 'B' union all
  select 'B444', null, NULL, 'B' union all
  select 'S555', null, NULL, 'A') as ad

select * into doctor
from (
  select 203 [number], 'Black' [surname], 'Peter' [firstname], 'A' [ward] union all
  select 574, 'Blis', 'Mavis', 'B' union all
  select 461, 'Boyne', 'Steve', 'B' union all
  select 530, 'Clark', 'Nicola', 'C' union all
  select 405, 'Mizzi', 'Nicola', 'A' union all
  select 501, 'Mount', 'Mavis', 'A') as d

select * into ward
from (
  select 'A' [code], 'Surgical' [name], 203 [consultant] union all
  select 'B', 'Paediatric', 574 union all
  select 'C', 'Medical', 530) as w 
```

# android - 滚动视图在方向更改后不滚动

> ID：15457851
> 
> 赞同：1
> 
> 时间：2013-03-17T05:32:10.213
> 
> 标签：android, android-fragments

我的布局开始如下：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollView01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/Black"
        android:focusable="true"
        android:focusableInTouchMode="true" > 
```

我正在使用 Fragments，当我旋转设备时，滚动不起作用，但屏幕顶部的按钮仍然可以使用。

我让活动在方向更改时重新启动，我只是根据传递给片段的参数重新填充我的所有元素。

在我的`onCreateView`我有这个片段：

```
if (getArguments() != null) {
    String s = getArguments().getString("bookId"); 
```

如果它不是空字符串，这允许我重新填充我的所有元素。元素确实得到了正确的重新填充，因此除了滚动之外一切正常。

每当我旋转设备时，阻止滚动工作的问题可能是什么？

# java - 建议通过接口声明常量

> ID：15457852
> 
> 赞同：3
> 
> 时间：2013-03-17T05:32:25.457
> 
> 标签：java, inheritance, interface, serialversionuid

我一直在为我的一个小宠物项目使用可序列化接口有一段时间了，我经常注意到一个关于我应该如何定义 static final long 的警告`serialVersionID`。

我一直在寻找一种方法让我自己的接口产生类似的警告（强制/建议在任何实现它的类中声明一个常量），但到目前为止还没有找到任何东西。该`Seralizable`界面只是一个标记界面，因此它实际上不包含任何内容，而我最接近回答我的问题的是[在 dreamincode 上的这个线程](http://www.dreamincode.net/forums/topic/101673-how-do-i-inherit-a-variable-from-interface-or-parent-class/)。

任何人都可以提供帮助，因为这听起来像是一个非常有用的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:35:59.307

最简单的方法是简单地声明一个值。就像是：

```
private static final long serialVersionUID = 1L; 
```

这样做的原因是为了控制对象的序列化/反序列化。如果您序列化一个没有 的类的实例，`serialVersionUID`系统会从当前的类定义中生成一个。如果您以任何重要的方式更改类，系统生成的 id 将会改变。反过来，这将阻止您反序列化使用旧 id 序列化的对象。

如果您正在序列化对象但不持久化它们，那么定义 ID 可能是不必要的（除了摆脱编译器警告）。

有关更多信息，请参阅[此线程](https://stackoverflow.com/questions/285793/what-is-a-serialversionuid-and-why-should-i-use-it)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:40:01.827

`serialVersionID`(a field)**未**声明为[Serializable](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)接口的成员。字段名称只是一个约定，并且在运行时通过反射访问该字段。不能使用[接口](http://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html)来定义字段契约。

警告是“编译器魔法”，它知道在遇到实现 Serializable 的类型但没有这样的字段时应该发出警告。此警告行为*不能*仅在应用程序代码中的其他字段中模拟 - 获得类似警告需要使用了解所需启发式的 [自定义] 编译器或 lint/代码检查器。

# c++ - 如何在 C++ 中使用类函数？

> ID：15457853
> 
> 赞同：5
> 
> 时间：2013-03-17T05:32:58.100
> 
> 标签：c++, class, friend

当一个类`error: 'func' does not name a type`的成员函数尝试返回一个类时，我得到一个：`func``B``C`

```
class A {
    public:
        class B {
            public:
                C func() const {
                    ...
                }
            private:
                friend class A;
        }

        class C {
            public:
                ...
            private:
                friend class A;
        }
    private:
        ...
} 
```

而如果`func`是 A 的成员函数，则以下内容不会产生此错误：

```
class A {
    public:
        class B {
            public:
                ...
            private:
                friend class A;
        }

        C func() const {
            ...
        }

        class C {
            public:
                ...
            private:
                friend class A;
        }
    private:
        ...
} 
```

如何修复它以使第一个版本正常工作？

我在[这里](https://stackoverflow.com/questions/2133250/does-not-name-a-type-error-in-c)找到了一个很好的例子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T05:34:24.487

在 B 类“上方”定义 C 类，或向前声明它。

# html - 当 AJAX 值返回更改值时，有什么方法可以触发“onchange”函数调用？

> ID：15457855
> 
> 赞同：0
> 
> 时间：2013-03-17T05:33:01.057
> 
> 标签：html, ajax, onchange

我有几个下拉菜单

```
<... onchange="callthisfunction(...)"...> 
```

当用户手动更改值时，该函数很容易被调用，但是当我使用 ajax 调用将保存的数据加载回我的页面时，它不会将下拉值注册为被更改，并且不会触发函数调用。有没有办法确保在通过 ajax 更改值时触发它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:59:54.027

您可以使用：

```
document.getElementById("id").onchange() 
```

以编程方式生成 onchange 事件，或者您甚至可以在您的 ajax 调用更改下拉列表时调用“callthisfunction()”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:21:34.287

```
 onchange:function(){
 //temp()
}

 afterAjaxSuccess:function(){
 //temp();
}

temp:function(){
//code when dropdown is changed or after a service call is made to trigger this function
} 
```

# vb.net - 验证文本框以仅接受最多 8 个位置的数字

> ID：15457860
> 
> 赞同：1
> 
> 时间：2013-03-17T05:33:30.687
> 
> 标签：vb.net, visual-studio-2010

我有一个必须输入电话号码的文本框 我想将在文本框中输入的数字限制为最多 8 个位置 怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:43:02.960

您可以订阅`KeyDown`事件以查看按下了哪个键，然后只允许`Numeric`&`backspace key`

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    TextBox1.MaxLength = 8
    AddHandler TextBox1.KeyDown, AddressOf HandleTbKeyDown

End Sub

Private Sub HandleTbKeyDown(ByVal sender As Object, ByVal e As KeyEventArgs)
    If Not ((e.KeyValue >= 48 AndAlso e.KeyValue <= 57) OrElse e.KeyValue = 46) Then
        e.Handled = True
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:38:54.080

对于只有数字的文本框，您可以这样做：-

```
if(!((e.keyCode>=48&&e.keyCode<=57)||(e.keyCode==46))) 
```

您也可以检查长度为 8 喜欢

```
Texbox MaxLength = 8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T05:46:00.263

使用 MaskedTextBox。请参阅此[链接](http://www.c-sharpcorner.com/uploadfile/mahesh/maskedtextbox-in-C-Sharp/)。尽管该示例适用于 C#，但它的工作原理类似。您的**Mask**属性将为**00000000**

例如

```
myMaskTextBox.Mask = "00000000"; 
```

您可以使用它为日期、货币等格式化数据。还有一个方便的**BeepOnError**属性。再次参见示例末尾。

# c# - 如何将文件写入 Internet Explorer Mobile 的响应？

> ID：15457862
> 
> 赞同：3
> 
> 时间：2013-03-17T05:33:54.827
> 
> 标签：c#, asp.net, internet-explorer, windows-phone-8, windows-phone

我正在尝试将文件写入响应以供下载。我用：

```
 Response.Clear();
      Response.AddHeader("content-disposition", "attachment;filename=" + name);
      Response.ContentType = GetMimeType(path);
      Response.BinaryWrite(File.ReadAllBytes(path).ToArray());
      Response.End(); 
```

这适用于多个桌面浏览器。但是，在 Windows Phone 8 设备上的 Internet Explorer Mobile 10 上，它会失败。正如预期的那样，我得到一个带有“点击打开”消息的屏幕。

但是，当我点击该消息时，它会导航到一个空白页面，其 url 为“Default[x].htm”。到目前为止，“x”一直是 1、2 和 3。如果我将该页面添加到我的收藏夹，我可以看到 Default[x].html 的完整 URL 是“file://C:\Data\Users\DefApps\AppData\INTERNETEXPLORER\INetCache\WNW0K564\Default[x]。 .htm”。

无论文件的扩展名或 MIME 类型是什么，这都是一样的。我很困惑为什么会这样。是否有另一种方法可以将文件写入与 IE Mobile 兼容的响应？

正如我所说，无论文件扩展名或 MIME 类型如何，这都会失败。例如，我验证的情况是：

```
filename: themes.ppt, MIME Type: application/vnd.ms-powerpoint 
```

如果直接链接到所有文件下载都很好，但出于安全原因我不能这样做。我不希望制作文件的临时副本并链接到这些副本，但如果我找不到将它们写入响应的方法，我将不得不这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:02:25.887

我弄清楚是什么导致了这个问题。为了到达我正在向客户端写入文件的页面，我使用了

```
Response.Redirect("downloadfile.aspx?" + ...); 
```

出于某种原因，这导致了 Windows Phone 设备上的问题。我对其进行了更改，以便在客户端完成页面更改。这解决了这个问题。您可能可以使用 javascript 来执行此操作：

```
location.href = "downloadfile.aspx?" + ...; 
```

但我最终只是使用链接直接链接到我的下载页面（downloadfile.aspx）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:37:18.460

这解决了带有 .NET 4.5 和 WP 8 的 IIS 8 上的问题：

它在调试模式下工作，但不能在 debug="false" 下工作。页面执行不需要 90 秒，但我必须手动设置 ScriptTimeout：

```
Server.ScriptTimeout = 120; 
```

或在 web.config 中：

```
<configuration>
    <system.web>
        <compilation debug="false" targetFramework="4.5" />
    </system.web>
</configuration> 
```

非调试模式下的默认值为 90 秒。

# jquery - jquery 获取具有 id 属性的第一个父 div 的 id

> ID：15457870
> 
> 赞同：0
> 
> 时间：2013-03-17T05:34:40.623
> 
> 标签：jquery

假设我有一些看起来像这样的 HTML：

```
<div>
   <div id="test">
     <div>
       <div>
         <div>
           <div id="SomeDiv"> 
```

现在假设我有`TheDiv = $('#SomeDiv');`，从那里，我想获得第一个有 id 的父 div 的 id，在这种情况下`"test"`。

遍历父母以使用 jquery 查找 ID 的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T05:37:10.660

这是通过[最近](http://api.jquery.com/closest/)的选择器完成的

```
$("#SomeDiv").closest("div[id]"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T05:36:49.860

使用`.parents('[id]')`. 并获得第一个对象，例如。

```
TheDiv = $('#SomeDiv');
firstDivParent = TheDiv.parents('[id]')[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T05:37:41.770

试试这个：

```
$("div#SomeDiv").closest("div[id]") 
```

或交替

```
$("div#SomeDiv").parents("div[id]") 
```

希望这会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T06:58:05.123

var firstParent = TheDiv.parent().parent().parent().parent().attr('id'); 每次使用 parent () 时，他都会爬上一个 div。

# javascript - 在javascript中使用日期

> ID：15457875
> 
> 赞同：0
> 
> 时间：2013-03-17T05:36:29.760
> 
> 标签：javascript, date

我在 Javascript 中使用日期时遇到问题，在 PHP 中你使用 date("Ymd H:is") 之类的东西来检索特定的日期和时间，我怎样才能在 Javascript 中实现这一点？getMonth() 方法只返回 1 位数，我真的需要它们是 2 位数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:43:32.987

由于我对几乎所有答案都发表了评论，因此我最好发表我的建议

[演示](http://jsfiddle.net/mplungjan/Yy7Ft/)

```
function pad(num) { return ("0"+num).slice(-2); }

function getDisplayDate() {
  var date = new Date();
  return date.getFullYear()+
    "-"+pad(date.getMonth()+1)+
    "-"+pad(date.getDate())+
    " "+pad(date.getHours())+
    ":"+pad(date.getMinutes())+
    ":"+pad(date.getSeconds());
}    
setInterval(function() {
    document.getElementById("time").innerHTML=getDisplayDate(); 
},500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:09:20.243

这段代码是根据@mplungjan 给出的指针进行调整的——（请归功于他）另请查看他的解决方案，这是一个更好的与日期数字一起使用的解决方案。

```
var str = 10; // month-digit from getMonth()

function pad(val) {
     return "0" + val;
}

var month =  str < 10 ? pad(str) : str;
console.log(month); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T05:43:14.103

为什么你在得到 <10 之前不加 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T05:44:44.853

尝试这个 ：

```
function dateToYMD(date) {
var d = date.getDate();
var m = date.getMonth() + 1;
var y = date.getFullYear();
return '' + y + '-' + (m<=9 ? '0' + m : m) + '-' + (d <= 9 ? '0' + d : d) + ' ' + date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds();
}
var d = new Date();
alert(dateToYMD(d)); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-17T05:40:53.767

您可以从 Date 类中获取年、分钟等。您可以使用下面的示例获得 2 位数的月份。例如

```
Date.prototype.getLongMonth = function() {
    var month = this.getMonth();
    if (String(month).length == 1) month = '0'.concat(month);
    return month;
}

var now = new Date();
var theDate = now.getFullYear() + '-' + now.getLongMonth() + '-' + now.getDate() + ' ' + now.getHours() + ':' + now.getMinutes() + ':' + now.getSeconds();
console.log(theDate); // result : 2013-02-17 12:41:2 
```

# javascript - 计算给定多项式的反向多项式以计算 CRC

> ID：15457877
> 
> 赞同：0
> 
> 时间：2013-03-17T05:36:57.913
> 
> 标签：javascript, crc

我正在编写一个用于从给定生成多项式计算反向多项式的 javascript 代码，但似乎存在一些错误，它适用于少数 CRC 方法（CRC-8、CRC-16、CRC-CCITT、CRC-32、CRC-32C）但不是所有的人..请指出我哪里出错了。

```
<input type="text" name="poly" id="poly" onkeyup="getRevPoly()">
<input type="text" name="rpoly" id="rpoly" disabled>

<script type="text/javascript">
function getRevPoly() {
  var poly = document.getElementById('poly').value;
  var bin = convertBase(poly, 16, 2);
  bin = pad(bin, (poly.length));
  bin = bin.split('').reverse().join('');
  var hex2 = convertBase(bin, 2, 16);
  document.getElementById('rpoly').value = hex2.toUpperCase();
}
function convertBase(num, baseA, baseB) {
          return parseInt(num, baseA).toString(baseB);
}

function pad(num, size) {
      var s = num;
      while (s.length < (size * 4)) s = "0" + s;
      return s;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:51:24.013

该代码仅适用于长度为四位的倍数的 CRC。因此，它不适用于您（最后）在问题评论中提到的 CRC-5。事实上，没有任何代码可以采用无高项的多项式的十六进制表示并神奇地推断出位数。您需要另一个输入，即 CRC 中的位数。

# java - Codenameone/ Java：将罐子添加到项目中

> ID：15457878
> 
> 赞同：0
> 
> 时间：2013-03-17T05:37:07.523
> 
> 标签：java, encryption, codenameone

我试图将“rt.jar”和“bouncycastle-jce-jdk13-112.jar”添加到我的代号一个项目中。

但这会产生错误（示例）：

```
Caused by: java.lang.LinkageError: loader constraint violation: loader (instance of <bootloader>) previously initiated loading for a different type with name "javax/accessibility/AccessibleContext"
    at java.lang.ClassLoader.findBootstrapClass(Native Method)
    at java.lang.ClassLoader.findBootstrapClassOrNull(ClassLoader.java:1061)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:412)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:410) 
```

任何人都可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:29:48.173

您不能将 JAR 直接添加到 Codename One 项目中，因为翻译过程需要使用以特定方式编译的字节码。Codename One 具有库项目支持，可以以 Codename One 可以使用的方式编译源代码，并且还提供本地库集成。

# php - 为什么我的 htaccess 规则仍然产生 gtmetrix, yslow expire headers 错误？

> ID：15457881
> 
> 赞同：1
> 
> 时间：2013-03-17T05:37:12.497
> 
> 标签：php, .htaccess, browser-cache

我在 WordPress 网站上的 .htaccess 中设置了一条规则。它看起来像这样：

```
# manual caching - force use of browser cache 
FileETag MTime Size 
<ifmodule mod_expires.c>   
   <filesmatch "\.(jpg|gif|png|css|js|ico|pdf|swf)$">
      ExpiresActive on
      ExpiresDefault "access plus 1 year"
   </filesmatch>
</ifmodule> 
```

从我读过的东西来看，这应该处理所有到期标题。但是当我运行 gtmetrix 或 yslow 测试时，它们仍然给我这样的错误：

> ```
> http://fonts.googleapis.com/css?family=Anonymous+Pro%3Aregular%2Citalic%2Cbold%2Cbolditalic%7C&ver=3.5.1
> http://www.thisismydomain.org/wp-content/plugins/wp-ui/css/css.php?styles=wpui-light%7Cwpui-blue%7Cwpui-red%7Cwpui-green%7Cwpui-dark%7Cwpui-quark%7Cwpui-alma%7Cwpui-macish%7Cwpui-redmond%7Cwpui-sevin&ver=3.5.1
> http://assets.pinterest.com/images/PinExt.png
> http://0.gravatar.com/avatar/41ff57b7b930a31656ab460e5a56d425?s=100&d=wavatar&r=G
> http://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic,700,700italic&subset=latin,latin-ext
> http://0.gravatar.com/css/hovercard.css?ver=201311ac
> http://0.gravatar.com/css/services.css?ver=201311ac
> http://0.gravatar.com/js/gprofiles.js?ver=201311ac
> http://1.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=25&d=wavatar&forcedefault=y&r=G 
> ```

其他页面显示到期标题的类似错误：

> ```
> http://easyrotator.s3.amazonaws.com/.../FFF_arrow10_export.png (expiration not specified)
> http://s7.addthis.com/js/300/addthis_widget.js (expiration not specified)
> http://search.twitter.com/search.json?... (15 seconds)
> http://connect.facebook.net/en_US/all.js (5 minutes)
> https://apis.google.com/js/plusone.js (30 minutes)
> http://c520866.r66.cf2.rackcdn.com/1/js/easy_rotator.min.js (33.2 minutes)
> http://intensedebate.com/js/wordpressTemplateLinkWrapper2.php?... (60 minutes)
> http://i.po.st/share/script/post-widget.js (3 hours)
> http://www.thisismydomain.org/wp-content/plugins/wp-ui/css/css.php?styles=wpui-light%7Cwpui-blue%7Cwpui-red%7Cwpui-green%7Cwpui-dark%7Cwpui-quark%7Cwpui-alma%7Cwpui-macish%7Cwpui-redmond%7Cwpui-sevin&ver=3.5.1 (20 hours) 
> ```

我认为这是因为那些特定的 css 和 js 不在我的域中？在这种情况下，我能做些什么来解决这个问题并提高我的速度分数吗？或者我还应该做些什么来获得更好的结果？而 thisismydomain 的那个...文件扩展名是 css.php，所以我不确定如何在 htaccess 中设置一个过期时间。感谢任何人都可以提供的任何指导！

# asp.net-mvc - GetFullHtmlFieldId 返回不正确的 id 属性值

> ID：15457883
> 
> 赞同：0
> 
> 时间：2013-03-17T05:37:16.917
> 
> 标签：asp.net-mvc

我正在使用 ASP.NET MVC 2，但我认为我没有听说过 MVC 3 或 4 中已修复此问题，但无论如何：

这是我的测试视图代码：

```
<br />
<%= Html.LabelFor( m => m.FieldFoo ) %>
<%= Html.TextBoxFor( m => m.FieldFoo ) %>

<br />
<%= Html.LabelFor( m => m.CustomFieldValues[0].Value ) %>
<%= Html.TextBoxFor( m => m.CustomFieldValues[0].Value ) %> 
```

这就是渲染的内容：

```
<br />
<label for="FieldFoo">Foo?</label>
<input id="FieldFoo" name="FieldFoo" type="text" value="foo" />

<br />
<label for="CustomFieldValues[0]_Value">Value</label>
<input id="CustomFieldValues_0__Value" name="CustomFieldValues[0].Value" type="text" value="bar" /> 
```

发现差异：索引属性`CustomFieldValues`没有将其`[`和`]`字符替换`_`为`for=""`属性。为什么？

我走进了`LabelFor`代码，看到它调用了，`html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(htmlFieldName));`而 MVC 的内部`InputHelper`有自己的逻辑，`TagBuilder.CreateSanitizedId()`这解释了为什么它得到不同的`id=""`属性值。

在 MVC 2 中是否有任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:31:30.387

ASP.NET MVC 2 没有带有 htmlAttributes 参数的 LabelFor 扩展方法。请参阅此[博客文章](http://weblogs.asp.net/imranbaloch/archive/2010/07/03/asp-net-mvc-labelfor-helper-with-htmlattributes.aspx)。我们可以创建一个扩展来添加此参数并解决您的上述问题。这是示例，

```
public static class MyTagBuilder
{
    public static string CreateSanitizedId(string originalId)
    {
        return CreateSanitizedId(originalId, HtmlHelper.IdAttributeDotReplacement);
    }

    public static string CreateSanitizedId(string originalId, string invalidCharReplacement)
    {
        if (String.IsNullOrEmpty(originalId))
        {
            return null;
        }

        if (invalidCharReplacement == null)
        {
            throw new ArgumentNullException("invalidCharReplacement");
        }

        char firstChar = originalId[0];
        if (!Html401IdUtil.IsLetter(firstChar))
        {
            // the first character must be a letter
            return null;
        }

        StringBuilder sb = new StringBuilder(originalId.Length);
        sb.Append(firstChar);

        for (int i = 1; i < originalId.Length; i++)
        {
            char thisChar = originalId[i];
            if (Html401IdUtil.IsValidIdCharacter(thisChar))
            {
                sb.Append(thisChar);
            }
            else
            {
                sb.Append(invalidCharReplacement);
            }
        }

        return sb.ToString();
    }

    private static class Html401IdUtil
    {
        private static bool IsAllowableSpecialCharacter(char c)
        {
            switch (c)
            {
                case '-':
                case '_':
                case ':':
                    // note that we're specifically excluding the '.' character
                    return true;

                default:
                    return false;
            }
        }

        private static bool IsDigit(char c)
        {
            return ('0' <= c && c <= '9');
        }

        public static bool IsLetter(char c)
        {
            return (('A' <= c && c <= 'Z') || ('a' <= c && c <= 'z'));
        }

        public static bool IsValidIdCharacter(char c)
        {
            return (IsLetter(c) || IsDigit(c) || IsAllowableSpecialCharacter(c));
        }
    }

}
public static class LabelExtensions
{
    public static MvcHtmlString LabelFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, object htmlAttributes)
    {
        return LabelFor(html, expression, new RouteValueDictionary(htmlAttributes));
    }
    public static MvcHtmlString LabelFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, IDictionary<string, object> htmlAttributes)
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
        string htmlFieldName = ExpressionHelper.GetExpressionText(expression);
        string labelText = metadata.DisplayName ?? metadata.PropertyName ?? htmlFieldName.Split('.').Last();
        if (String.IsNullOrEmpty(labelText))
        {
            return MvcHtmlString.Empty;
        }

        TagBuilder tag = new TagBuilder("label");
        tag.MergeAttributes(htmlAttributes);
        tag.Attributes.Add("for", MyTagBuilder.CreateSanitizedId(html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(htmlFieldName)));
        tag.SetInnerText(labelText);
        return MvcHtmlString.Create(tag.ToString(TagRenderMode.Normal));
    }
}

<%@ Import Namespace="NameSpaceOfTheExtensionMethodClass" %>

<%= Html.LabelFor(m => m.CustomFieldValues[0].Value, new { })%>
<%= Html.TextBoxFor( m => m.CustomFieldValues[0].Value )%> 
```

# asp.net - 为什么我的 asp.net 网站在退出前要求保存解决方案文件？

> ID：15457885
> 
> 赞同：1
> 
> 时间：2013-03-17T05:37:48.600
> 
> 标签：asp.net, visual-studio

每当我创建一个网站项目时，在退出 Visual Studio 之前，它总是要求保存一个解决方案文件。现在我已经保存了解决方案，每次我打开一个网站，它都会进入一个解决方案！有人能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:57:43.507

保存 Solution( `.sln`) 文件后，它将在同一解决方案下重新打开。您也可以通过直接双击`solution`文件来重新打开您的项目。解决方案只是项目的容器，因此如果您的项目处于解决方案之下，则没有任何问题。

# vim - 如何为 vim 设置语法？

> ID：15457887
> 
> 赞同：8
> 
> 时间：2013-03-17T05:38:05.873
> 
> 标签：vim, syntastic

所以我 git 将存储库克隆到`~/.vim/bundle`并安装了病原体。我可以肯定病原体工作正常，因为我捆绑的其他插件都工作正常。谷歌搜索了一段时间后，似乎 syntastic 对于 c 代码应该是开箱即用的。我还检查了我是否拥有在`syntastic/syntax_checkers/c/`.

这是我的 .vimrc 文件的一部分：

```
" syntastic
let g:syntastic_auto_loc_list=1
let g:syntastic_disabled_filetypes=['html']
let g:syntastic_enable_signs=1 
```

当我打开 *.c 文件并执行`:SyntasticCheck`时，没有任何反应。没有错误抱怨未找到命令，因此已加载 syntastic。但是，即使当前打开的 *.c 文件包含错误语法错误，syntastic 也不会显示任何内容。

这是我第一次使用 syntastic，所以我真的不知道调用它的正确方法。

我也尝试过`:SyntasticCheck [c]`，我收到以下错误消息：

```
Error detected while processing function <SNR>_22_UpdateErrors..<SNR>22_CacheErrors:
line 16:
E121: Undefined variable: checkers
E15: Invalid expression: checkers 
```

有人能告诉我我做错了什么以及如何调用语法吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T06:36:12.713

尝试将其添加到您的 vimrc 中：

```
let g:syntastic_check_on_open=1
let g:syntastic_enable_signs=1 
```

（这是直接从[我的 vimrc](https://github.com/EvanHahn/dotfiles/blob/0c63f509a83b4cc555c763639004e47bc800aea9/resources/vimrc#L266-L287)中提取的，如果您愿意，它还有一些其他 Syntastic 设置。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T06:15:50.660

我不太明白原因，但是当我用`./install.sh --clang-completer`. Syntastic 就像魅力一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-31T03:00:27.903

安装 clang 和/或 ctags 包为我解决了这个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-03T19:39:57.607

我做了两件事，然后 Syntastic 开始像预期的那样处理 JS 文件和 ESlint。不知道是哪一个成功了：

1-在项目目录中运行`eslint --init`。

2- 开始 vim 打开没有 -S 标志的文件。

在它静默失败之前，没有错误也没有诊断。这就是没有配置文件时 ESlint 的行为方式。

# playframework - Fixtures.loadModels 在 PlayFramework 中不起作用

> ID：15457888
> 
> 赞同：0
> 
> 时间：2013-03-17T05:38:11.170
> 
> 标签：playframework, playframework-1.x

我正在使用 PlayFramework 1.2.5 并且正在开发如下所示的功能测试

```
public class CaseFoldersControllerTests extends FunctionalTest {

  @Before
  public void setup() {
    Fixtures.deleteDatabase();
    Fixtures.loadModels("data.yml");
  }

  @After
  public void teardown() {
  }

 ...

  @Test
  public void createAction() {
    ....
    Request request = newRequest();
    request.path = "/case/create";
    request.body = new ByteArrayInputStream(json.getBytes());
    Response response = makeRequest(request);

    //Verify response is OK
    assertStatus(200, response);
  }
} 
```

在执行我的测试（createAction）期间，data.yml 中的数据不可用。但是，我的测试完成后，数据*就*在数据库中。

如果我将数据加载语句从 @Before 方法移动到 @After 方法......那么测试成功（因为现在数据已被清理并从先前的测试中重置）。

我假设这是与 JPA 会话相关的，但在 Fixtures.loadModels() 之后添加以下内容并没有帮助：

```
JPA.em().flush(); 
```

另外，有趣的是 @Before 方法是从我的单元测试中复制的，它可以正常工作。只有FunctionalTest我遇到了问题。

TIA, M2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:41:05.243

首先，我们需要确保您的 setUp 确实被调用，所以我建议在您的方法中使用 Logger 来了解这一点。如果它真的被调用了，那么我建议您在不使用该请求的情况下测试您的 yml，也许可以通过为您尝试使用 yml 插入的模型创建一个 findAll()。通过这种方式，我们可以确定弄乱代码的不是您的要求。

** 这曾经发生在我身上......我的@Before 没有运行，因为我导入了 play.MVC.Before，你必须导入 org.junit.Before

# java - Java：负数右移

> ID：15457893
> 
> 赞同：26
> 
> 时间：2013-03-17T05:39:29.067
> 
> 标签：java, bit-manipulation, bitwise-operators, bit-shift, negative-number

我对负数的右移操作很困惑，这里是代码。

```
int n = -15;
System.out.println(Integer.toBinaryString(n));
int mask = n >> 31;
System.out.println(Integer.toBinaryString(mask)); 
```

结果是：

```
11111111111111111111111111110001
11111111111111111111111111111111 
```

为什么将负数右移 31 而不是 1（符号位）？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-17T05:42:59.723

因为在 Java 中没有无符号数据类型，所以有两种类型的右移：[算术移位](http://en.wikipedia.org/wiki/Bitwise_operation#Arithmetic_shift) `>>`和[逻辑移位](http://en.wikipedia.org/wiki/Bitwise_operation#Logical_shift) `>>>`。[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)

算术移位`>>`将保留符号位。
![算术移位](../Images/a72ddcbd6308c0056d7fee09ceae63ad.png)

无符号移位`>>>`不会保留符号位（因此填充`0`s）。
![逻辑移位](../Images/9e45c5774f89554d306aaf9f24831ac2.png)

（图片来自维基百科）

* * *

顺便说一下，算术左移和逻辑左移的结果是一样的，所以只有一个左移`<<`。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-17T05:42:01.940

运算符`>>`称为有**符号右移**，将所有位右移指定次数。重要的是`>>` 在移位后将最左边的符号位（Most Significant Bit MSB）填充到最左边的位。这称为*符号扩展*，用于在您向右移动负数时 *保留负数的符号。*

下面是我的图解表示，并带有一个示例来说明它是如何工作的（一个字节）：

例子：

```
i = -5 >> 3;  shift bits right three time 
```

五的补码形式是`1111 1011`

内存表示：

```
 MSB
+----+----+----+---+---+---+---+---+
|  1 |  1 | 1  | 1 | 1 | 0 | 1 | 1 |   
+----+----+----+---+---+---+---+---+
   7    6   5    4   3   2   1   0  
  ^  This seventh, the left most bit is SIGN bit 
```

下面是，如何`>>`工作？当你这样做`-5 >> 3`

```
 this 3 bits are shifted 
                         out and loss
 MSB                   (___________)      
+----+----+----+---+---+---+---+---+
|  1 |  1 | 1  | 1 | 1 | 0 | 1 | 1 |   
+----+----+----+---+---+---+---+---+
  | \                 \  
  |  ------------|     ----------|
  |              |               |
  ▼              ▼               ▼
+----+----+----+---+---+---+---+---+
|  1 |  1 | 1  | 1 | 1 | 1 | 1 | 1 |
+----+----+----+---+---+---+---+---+
(______________)
 The sign is        
 propagated 
```

注意：最左边的三位是一位，因为在每个移位符号位都被保留并且每个位也是正确的。我写*了符号被传播*，因为所有这三位都是因为符号（而不是数据）。

也因为三个右移最右边的三位被损失掉了。

右两个箭头之间的位从`-5`.

我认为如果我也写一个正数的例子会很好。下一个例子是`5 >> 3`和五是一个字节是`0000 0101`

```
 this 3 bits are shifted 
                         out and loss
 MSB                   (___________)      
+----+----+----+---+---+---+---+---+
|  0 |  0 | 0  | 0 | 0 | 1 | 0 | 1 |   
+----+----+----+---+---+---+---+---+
  | \                 \  
  |  ------------|     ----------|
  |              |               |
  ▼              ▼               ▼
+----+----+----+---+---+---+---+---+
|  0 |  0 | 0  | 0 | 0 | 0 | 0 | 0 |
+----+----+----+---+---+---+---+---+
(______________)
 The sign is        
 propagated 
```

再看看我写*的符号是传播的*，所以最左边的三个零是由于符号位。

所以这就是运算符有`>>` **符号右移**所做的，保留左操作数的符号。

**[您的答案]**
在您的代码中，您使用运算符`-15`向右移动`31`几次，`>>`因此您最右边的`31`位被松开，结果是所有位`1`实际上`-1`是数量级的。

你有没有注意到 In this way `-1 >> n`相当于不是一个语句。
[我相信如果有人这样做`i = -1 >> n`，它应该`i = -1`由 Java 编译器优化，但那是另一回事]

接下来，有趣的是，在 Java 中还有一个右移运算符可用，`>>>`称为**Unsigned Right Shift**。它在逻辑上工作并为每个移位操作从左填充零。`>>>`因此，如果您对负数和正数都使用无符号右移运算符，那么在每次右移时，您总是会在最左边得到一个零位。

例子：

```
i = -5 >>> 3;  Unsigned shift bits right three time 
```

下面是我的图表，它演示了表达式是如何`-5 >>> 3`工作的？

```
 this 3 bits are shifted 
                         out and loss
 MSB                   (___________)      
+----+----+----+---+---+---+---+---+
|  1 |  1 | 1  | 1 | 1 | 0 | 1 | 1 |   
+----+----+----+---+---+---+---+---+
  | \                 \  
  |  ------------|     ----------|
  |              |               |
  ▼              ▼               ▼
+----+----+----+---+---+---+---+---+
|  0 |  0 | 0  | 1 | 1 | 1 | 1 | 1 |
+----+----+----+---+---+---+---+---+
(______________)
  These zeros
  are inserted 
```

您会注意到：这次我不是在写传播的符号位，而是实际上是`>>>`运算符插入零。因此`>>>`不保留符号而是进行逻辑右移。

据我所知，无符号右移在 VDU（图形编程）中很有用，虽然我没有使用过它，但在过去读过它。

我建议您阅读以下内容：[*>>> 和 >> 之间的区别*](https://stackoverflow.com/questions/2811319/difference-between-and)：`>>`是算术右移，`>>>`是逻辑右移。

**编辑**：

关于无符号右移运算`>>>`符的一些有趣的操作。

*   无符号右移运算符`>>>`产生一个纯值，该值是左操作数右移零`0`扩展，其右操作数指定的位数。

*   与`>>`and一样`<<`，运算符`>>>`也运算符从不抛出异常。

*   无符号右移运算符的每个操作数的类型必须是整数数据类型，否则会发生编译时错误。

*   `>>>`运算符可以对其操作数进行类型转换；与算术二元运算符不同，每个操作数都是独立转换的。如果操作数的类型是 byte、short 或 char，则该操作数会在计算运算符的值之前转换为 int。

*   无符号右移运算符产生的值的类型是其左操作数的类型。`LEFT_OPERAND >>> RHIGT_OPERAND`

*   如果左操作数的转换类型为 int，则仅将*右操作数*的值的**最低 5 位**用作移位距离。（*即 2* *⁵* *= 32 位 = int 中的位数*） 因此，移位距离在 0 到 31 的范围内。

     *在这里，由 产生的值`r >>> s`与以下内容相同：

    ```
    s==0 ? r : (r >> s) & ~(-1<<(32-s)) 
    ```* 
**   如果左操作数的类型是长的，那么只有右操作数的值的六个最低有效位被用作移位距离。（*即 2 ⁵ = 64 位 = long 中的位数*）

    这里，由 产生的值`r >>> s`与以下相同：

    ```
    s==0 ? r : (r >> s) & ~(-1<<(64-s)) 
    ```* 

 *一个有趣的参考： [[第 4 章] 4.7 移位运算符](http://doc.sumy.ua/prog/java/langref/ch04_07.htm)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-17T05:42:35.053

因为 >> 被定义为算术右移，它保留了符号。要获得您期望的效果，请使用逻辑右移，即 >>> 运算符。*

# c++ - 防止从 unique_ptr 分配给 shared_ptr

> ID：15457897
> 
> 赞同：1
> 
> 时间：2013-03-17T05:40:18.833
> 
> 标签：c++, templates, stl

我想阻止这样的代码：

```
unique_ptr<ClassA> captr = unique_ptr<ClassA>(new ClassA());
....
shared_ptr<Base> sptr = move(captr); 
```

此代码应该会生成编译器错误，但它会在运行时编译并生成双重释放和其他奇怪的错误。将 unique_ptr 分配给 shared_ptr 根本没有意义。如果某些东西被声明为 unique_ptr，则它并不意味着共享。但是如果允许将 unique_ptr 分配给 shared_ptr，那么这个限制就消失了。

不幸的是，当一些函数返回 unique_ptr 而一些函数将 shared_ptr 作为参数时，这个错误太容易犯了。

问题是：我如何禁止对 unique_ptr 和 shared_ptr 的所有模板化变体进行这些分配，而不管它们被模板化为的特定类？

我正在考虑将赋值运算符声明为已删除，但我不确定这样的声明会是什么样子。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T11:16:35.180

```
unique_ptr<ClassA> captr = unique_ptr<ClassA>(new ClassA());
....
shared_ptr<Base> sptr = move(captr); 
```

这确实是正确的代码。这里发生的是：

1.  通过`unique_ptr`in捕获资源`captr`。
2.  该资源稍后被移动到 `shared_ptr sptr`使您为`captr`空。
3.  该资源现在归`sptr`.
4.  的析构函数`unique_ptr`不会破坏该资源，因为它不再拥有它。

也许这是简化的代码，您正在使用自定义删除器`unique_ptr<ClassA>`而不是在`shared_ptr`的构造函数中使用该删除器？或者，也许您的`Base`班级和`Derived`班级内部有资源处理错误？另一种选择可能是您在这两段代码之间做错了什么。

# java - 在客户端机器上部署 java(swing, oracle) 项目时出错... java.lang.ClassNotFoundException:oracle.jdbc.driver.oracleDriver

> ID：15457903
> 
> 赞同：0
> 
> 时间：2013-03-17T05:41:19.167
> 
> 标签：java, oracle, swing, classpath, classnotfoundexception

我使用过 oracle 10g 数据库和 jdk 1.5 。我正在使用日食。我已将项目导出到`.jar`文件中（文件没问题）。

当我在客户端机器上运行 jar 文件时，我得到

```
java.lang.ClassNotFoundException:oracl.jdbc.driver.OracleDri..... 
```

我已经在客户端机器上导入了我的数据库。

我的连接代码是：

```
 public void register(){
        try
          {
           // load oracle driver
          Class.forName("oracle.jdbc.driver.OracleDriver");
          // connect using Thin driver
         con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","forbesmarshall","mukeshsir");

         //t1.setText("Connected");
          //con.close();
          }
          catch(Exception ex)
          {
     //         String lo= ex.toString();
              JOptionPane.showMessageDialog(m, ex.toString(),             "Incorrect value", JOptionPane.INFORMATION_MESSAGE);
                ex.printStackTrace();
          }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:13:06.767

嘿伙计们，感谢您的回复和有用的建议，我得到了与 jar 创建和一些代码问题有关的答案。我直接将其制作为 jar 并且它是错误的，我们需要创建 Runnable jar ..并加载我们需要使用的驱动程序以下代码..

```
 try {
      //Class.forName("oracle.jdbc.driver.OracleDriver");
     DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
      }catch(Exception ex){
          JOptionPane.showMessageDialog(m, ex.toString(),"Incorrect value", JOptionPane.INFORMATION_MESSAGE);
          ex.printStackTrace();

      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:07:49.047

您是否正确定义了类路径？您用于开发项目的 IDE 是什么？我建议检查 1\. jdbc 类路径 2\. 目录的权限问题 3\. 有时可能是 java 版本的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T06:10:52.633

您应该导入`import oracle.jdbc.*;`并设置指向的类路径`ojdbc6.jar`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T06:20:55.767

看起来 oracle 驱动程序不在您的类路径中，您在代码中拼错了驱动程序类名称。您问题中的错误消息包含不正确的包名称：`oracl.jdbc.driver.OracleDri.....`，但代码示例中的包名称是正确的：`oracle.jdbc.driver.OracleDriver`。此外，您提到您从源代码构建 JAR 文件。确保在您运行应用程序时，您的 claspath 不仅包含此 JAR，还包含您的应用程序所依赖的所有其他 JAR，包括 Oracle JDBC Driver JAR 文件。

通过使用服务提供者机制，现代版本的 Oracle JDBC 驱动程序根本不需要您这样做`Calss.forName`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T08:31:55.763

您需要放置 oracle jdbc jar “ojdbc6.jar”，您的问题将得到解决。

# caching - What is a distributed cache?

> ID：15457910
> 
> 赞同：62
> 
> 时间：2013-03-17T05:42:06.217
> 
> 标签：caching, concept

I am confused about the concept of Distributed Cache. I kinda know what it is from google search. A distributed cache may span multiple servers so that it can grow in size and in transactional capacity. However, I do not really understand how it works or how it distribute the data.

For example, let's say we have **Data 1, 2, 3, 4, 5, 6, 7, 8, 9, 10** and **2 cache servers A and B**. If we use distributed cache, then one of possible solution is that Data 1, 3, 5, 7, 9 are stored in Cache Server A, and 2, 4, 6, 8, 10 are stored in cache Server B.

So is this correct or did I misunderstand it?

Second question is that I usually heard the word **server node**. What is it? In the above example, Server A is a server node, right?

Third question, if a server (let's say Server A) goes down, what can we do about that? I mean if my example above is correct, we cannot get the data 1, 3, 5, 7, 9 from cache when Server A is down, then what could Cache Server do in this case?

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-17T05:48:29.497

1.  Yes, half the data on server a, and half on server b would be a distributed cache. There are many methods of distributing the data, though some sort of hashing of the keys seems to be most popular.

2.  The terms server and node are generally interchangeable. A node is generally a single unit of some collection, often called a cluster. A server is generally a single piece of hardware. In erlang, you can run multiple instances of the erlang runtime on a single server, and thus you'd have multiple erlang nodes... but generally you'd want to have one node per server for more optimum scheduling. (For non-distributed languages and platforms you have to manage your processes based on your needs.)

3.  If a server goes down, and it is a cache server, then the data would have to come from its original source. EG: A cache is usually a memory based database designed for quick retrieval. The data in the cache sticks around only so long as its being used regularly, and eventually will be purged. But for distributed systems where you need persistence, a common technique is to have multiple copies. EG: you have servers A, B, C, D, E, and F. For data 1, you would put it on A, and then a copy on B and C. Couchbase and Riak do this. For data 2, it could be on B, and then copies on C and D. This way if any one server goes down you still have two copies.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-06-04T06:33:07.197

I have been using Distributed caching solutions for quite some time now (NCache , AppFabric etc) and I am going to answer all three questions based on my experience with Distributed caching.

1: Distributed caching solution allows you to keep data on all the servers by creating a cache cluster. Lets say you have 2 cache servers(server nodes) and you have added 10 items in your cache. Ideally 5 items should be present in both of the server nodes since the data load gets distributed between the number of servers in your cache cluster. This is usually achieved with help of hashing and intelligent data distribution algorithms. As a result, your data request load also gets divided between all cache servers and your achieve linear growth in transnational capacity as you as more servers in the cache cluster.

2: A cache cluster can contain many server machines which are also called server nodes. Yes, Server A is a server node or server machine in your example.

3: Typically Distributed caching system are very reliable using replication support. If one or more servers go down and you had the replication turned on then there will be no data lose or downtime. NCache has different typologies to tackle this such as replicated topology and Partition of replica topology where data of each server is replicated over to the other server as well. In case one server goes down, the replicated data of that server is automatically made available from the surviving server node.

In your example, the data of server A(1, 3, 5, 7, 9) is replicated to server B(2, 4, 6, 8, 10) and vice versa. If server A goes down, the data of server A that is present on Server B will be made available and used from there so that no data lose occurs. So if server A goes down and the application requests for data (1), this data will get retrieved from Server B as Server B contains backup of all the data of Server A. This is seamless to your applications and is managed automatically by the caching system.

# c# - 大型系统的分区单一解决方案模型

> ID：15457911
> 
> 赞同：3
> 
> 时间：2013-03-17T05:42:19.517
> 
> 标签：c#, architecture, visual-studio-2012, ef-code-first, projects-and-solutions

我从来不确定多解决方案系统是否可行，`Visual Studio`但现在在阅读了[结构化解决方案和项目](http://msdn.microsoft.com/en-us/library/ee817674.aspx)和[演练：将现有的 Visual Studio 解决方案添加到另一个解决方案后，](http://blogs.msdn.com/b/habibh/archive/2009/06/24/walkthrough-adding-an-existing-visual-studio-solution-to-another-solution.aspx)我完全相信。很遗憾，msdn 文章是不久前写的，我找不到我们最新技术（Visual Studios 2010/2012）的后续内容。

无论如何，我非常有兴趣尝试文章中解释的**大型系统的分区单一解决方案模型，**`MSDN`但我认为在我承诺之前，我应该尝试做更多的研究。现在，当我创建一个新的 mvc 应用程序时，我通常会在其中创建 3 个项目（`Domain, UnitTests and WebUI`）。

这是我想做的一个例子：

```
ParentSolution
----Parent.Domain
----Parent.UnitTests
----Parent.WebUI

----ChildASolution
--------ChildA.Domain
--------ChildA.UnitTests
--------ChildA.WebUI

--------GrandChildASolution
------------GrandChildA.Domain
------------GrandChildA.UnitTests
------------GrandChildA.WebUI

----ChildBSolution
--------ChildB.Domain
--------ChildB.UnitTests
--------ChildB.WebUI 
```

**第一个问题：**子解决方案在父解决方案内部，但它们不依赖于父解决方案。然而，大子解决方案将从子解决方案项目中提取一些数据以发挥作用。这种结构可行吗？

**第二个问题：**每个解决方案，包括父解决方案都有自己的解决方案`ConnectionString`吗？

**第三个问题：**每个解决方案，包括父解决方案都有自己的解决方案`Database`吗？

**第四个问题：**如果我添加了依赖项，Master 解决方案中的 Membership 用户是否可以访问 Child 和 GrandChild 解决方案中的受限操作？

# c - C 数据类型的内存分配

> ID：15457913
> 
> 赞同：0
> 
> 时间：2013-03-17T05:42:42.720
> 
> 标签：c

```
#include <stdio.h>

struct node
{
     unsigned color : 2;
};

void main()
{
     struct node n; 
     n.color = 1;
     printf("size is :%d\n", (int)sizeof(n));
} 
```

编译器如何为这种类型的分配分配内存？

printf 给出的输出大小为：4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T05:54:13.920

编译器通常会在结构的两个成员之间分配一些空白空间，以加快访问每个成员的速度。这称为填充。对齐的大小主要取决于处理器架构。

```
struct data_struct
{
    char a;
    int b;
}; 
```

如果我们在 i386 上使用 sizeof 运算符获得结构的大小，它将为 8。但 sizeof(char) 为 1，sizeof(int) 为 4，因此总共需要 5 个字节，但编译器分配了 8 个字节。实际上它也为 char 成员分配了 4 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T05:47:35.767

编译器填充结构以进行对齐。这不是可移植的，因为它取决于机器的架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T05:51:37.653

它分配足够的空间来存储位域声明中指定的类型，而不考虑位数。在您的情况下，无符号整数大小为 4 个字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T06:18:57.940

> 结构或联合的成员可以具有除可变修改类型之外的任何完整对象类型。此外，可以声明成员由指定数量的位组成（包括符号位，如果有的话）。这样的成员称为**位域**，其宽度前面有一个冒号
> 
> 实现可以分配任何大到足以容纳位域的可寻址存储单元。**如果有足够的空间剩余，紧跟在结构中另一个位域之后的位域将被打包到同一单元的相邻位中。如果剩余空间不足，则将不适合的位域放入下一个单元还是与相邻单元重叠是实现定义的。**单元内位域的分配顺序（高位到低位或低位到高位）是实现定义的。未指定可寻址存储单元的对齐方式。
> 
> **在结构对象中，非位域成员和位域所在的单元的地址按声明顺序递增**。一个指向结构对象的指针，经过适当的转换，指向它的初始成员（或者如果该成员是位域，则指向它所在的单元），反之亦然。结构对象中可能有未命名的填充，但不是在其开头。

*——ISO/IEC 9899:201x 6.7.2.1*

> 当 sizeof 应用于类型为 char、unsigned char 或 signed char（或其限定版本）的操作数时，结果为 1。当应用于具有数组类型的操作数时，结果为数组.103)**当应用于具有结构或联合类型的操作数时，结果是此类对象中的总字节数，包括内部和尾随填充**

*——ISO/IEC 9899:201x 6.5.3.4.4*

# c - 存储大随机数的最佳哈希函数是什么？

> ID：15457914
> 
> 赞同：0
> 
> 时间：2013-03-17T05:42:43.987
> 
> 标签：c, algorithm, data-structures

我想在数据结构中存储大量数字，为此，我想使用哈希函数，以便插入、删除或搜索可以快速。但我无法决定我应该使用哪个哈希函数？

总的来说，我想知道如何确定哈希函数对任何特定问题都有好处？

**编辑：**我认为人们对使用“随机”一词感到困惑。在这里随机，我的意思是，我没有任何特定的数字范围，我必须从中选择[任何 32 位整数]，但我有总数将被存储在数据结构中，比如大约 5000 个数字. 所以建议我在这种情况下最好的散列函数，为什么你认为它是最好的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T05:44:27.727

如果数字是均匀随机的，只需使用选择低位的哈希函数。

```
unsigned hash_number(long long x)
{
    return (unsigned) x;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:55:25.227

即使您的输入数字是完全随机的，使用 h(x) = x 仍可能会带来性能问题。假设您的数字是从 0、2、4、...、2k 中随机选择的，尽管是随机的，但它们都不会映射到哈希表的第一个存储桶（存储桶 0），假设两个存储桶大小的幂。因此，真正重要的是输入数字的信息熵。

在您的情况下，一个很好的选择是 Thomas Wang 的整数散列函数，它是可逆的并保持良好的雪崩效应 ( [http://en.wikipedia.org/wiki/Avalanche_effect](http://en.wikipedia.org/wiki/Avalanche_effect) )。有一篇文章描述了 Thomas Wang 的哈希函数及其逆： http: [//naml.us/blog/2012/03](http://naml.us/blog/2012/03)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T12:33:45.987

Your question doesn't make sense to me. Using a hashing algorithm to store some random numbers is overkill. If there is something more to the problem, the choice of data structure will depend on what this something more is (which you don't say).

If these numbers really are random or pseudorandom then all you need is a stack or circular buffer - the capability to add (push) a new random number into the data structure and the capability to remove (pop) an existing random number from the structure. If you want to retrieve them in order, use a circular buffer. A hashing function is worse in every respect than a simple stack (or circular buffer) for holding a list of random numbers - it is more complex, runs slower, and uses more memory.

Most languages/environments provide hash functions which can be used (or are provided as) "dictionary" classes, and these come with guidance as to efficiency. Generally, you can make dictionary classes faster by allocating more memory - they slow down when hash keys collide. So the "density" of actual numbers amongst all possible numbers matters.

So if you had to hold 100 such numbers, you could use a hash function which looked only at the last 12 bits. This gives 2^12 = 4096 possible hashes, so collisions will only occur 100/2048 of the time, less than 5%. On the other hand, you are using over 20 times as much memory as you should. (This function is the same as taking the modulus of the number to base 2^12, and is similar to what Epp suggested.)

Writing a storage class based on a hash function which properly handles hash collisions (as it must), gracefully handles duplicated data, won't freak if you chuck it bad data (like every number the same), and is efficient, is not a trivial task.

On the other hand, implementing a stack or circular buffer is extremely simple, very efficient, and has entirely predictable behaviour.

Are you sure you aren't making this more complicated than it needs to be?

# django - 如何使用 django 和 STATIC_URL 链接到 .ipa 文件（通过空中 ios 应用程序安装）？

> ID：15457915
> 
> 赞同：0
> 
> 时间：2013-03-17T05:42:51.540
> 
> 标签：django, ipa, ota, django-staticfiles

我在开发中设置了一个 django 服务器。它基本上是你能想象到的最简单的“应用商店”。我现在终于可以使用 STATIC_URL 作为前缀来提供静态图像了。

但是，我无法启用 .ipa 文件的无线安装。

当我在我的 iPhone 或 iPad 上单击我的链接时，我收到一个 404 错误，这让我认为我的 .ipa 路径不正确。除了我认为我的路径是正确的：>

谁能指出我需要什么神奇的路径？

谢谢！

在我的 django 模板中，我所做的只是提供一个指向应用程序的链接，如下所示：

以下都不起作用：

```
<a href="itms-services://?action=download-manifest&url=http://192.168.1.109:8000/appstore/static/binaries/coolRunner.plist">Cool Runner </a>

<a href="itms-services://?action=download-manifest&url={{STATIC_URL}}binaries/coolRunner.plist">Cool Runner </a>

<a href="{{STATIC_URL}}binaries/coolRunner.plist">Cool Runner </a> 
```

所以第三次尝试，链接到我的 plist 并找到它，但是当我在我的 iPHone 上的移动 Safari 中单击它时，它只显示 pList 的内容。我应该链接到 pList 而不是 .ipa，对吗？

```
 <a href="{{STATIC_URL}}binaries/coolRunner.ipa">Cool Runner </a> 
```

第四次尝试（在我链接到 ipa 的正上方）提示我下载 ipa，然后移动 Safari 允许我在 Evernote 或其他一些应用程序中打开链接。不完全是我想要的。

在完全相同的模板中，为了进行完整性检查，我提供了指向 mp3 和 iphone 配置文件的链接，它们都可以工作（单击 iphone 配置文件链接确实会启动 iPhone 的设置应用程序并要求我正确安装配置文件)

```
<a href="{{STATIC_URL}}binaries/test.mp3">cool song</a>

<a href="{{STATIC_URL}}binaries/coolRunner.mobileconfig>Cool Runner Configuration Profile</a> 
```

我的实际 ipa 文件是否有问题，例如，它可能没有正确配置？我使用 XCode 4.5 并将其存档，然后按照死的简单向导，将其分发给企业/临时部署，用我的身份对其进行代码签名（我拥有所有特权，除了我不是团队代理，但我是管理员），并填写了需要应用程序 URL 的表格（我说的是`http://192.168.1.109:8000/appstore/static/binaries/coolRunner.plist`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:16:26.993

好吧，我忽略的一件事是这样做的方法：

```
<a href="itms-services://?action=download-manifest&url=http://192.168.1.109:8000/static/binaries/coolRunner.plist">Cool Runner </a> 
```

这样可行。对于可能追随我的其他人，让我解释一下，当您在 django 的开发服务器中的默认 /static/ 中定义了 STATIC_URL 时，您可以在域名和端口号旁边找到您的静态文件：（例如，`http://192.168.1.109:8000/static/captain_obvious.png`）

另请注意，我不必在开发服务器上或我的标签中添加 type="application/octet-stream" 或 type="text/xml" 。我看过一些帖子说你需要它，尽管这些帖子可能指的是生产。

# javascript - 无法将 HighCharts 车速表强制归零

> ID：15457921
> 
> 赞同：0
> 
> 时间：2013-03-17T05:43:38.583
> 
> 标签：javascript, ajax, highcharts, meter

我正在使用[highcharts speedometer](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/gauge-speedometer/)。我基本上是在伪造一个连接表。如果连接良好，那么仪表将在 30 到 100 之间打勾。如果连接返回 4 和 200 以外的任何值（Ajax 调用），它应该下降到零。我的电话正在通过...当服务器启动时，一切都很好。当我关闭 Apache 时，它​​不会归零。我已经在函数（图表）上测试了几个场景，看看它是否简单（我确信它仍然是我只是没有看到它）。没有任何效果。我已将图表点降至 0。但它仍然不会归零。有什么建议么？请上帝，我希望如此。我很想明天把它包起来，然后经过一些调整后我就可以将它实际用于工作了。

```
<!DOCTYPE HTML>
<html>
        <head>
                <meta http-equiv="content-type" content="text/html; charset=UTF-8" >
                <title>Sales Meter</title>

                <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
                <script type="text/javascript">
var flag;
var xmlhttp;
var url="http://192.168.0.5/ajax_info.txt"+'?_dc='+(new Date()).getTime();
//ajax call
function loadXMLDoc(url, cfunc){
   if(window.XMLHttpRequest){
      xmlhttp=new XMLHttpRequest();
   }
   else {
      xmlhttp=new ActiveObject("Microsoft.XMLHTTP");
   }
   xmlhttp.onreadystatechange=cfunc;
   xmlhttp.open("GET",url, true);
   xmlhttp.send();
}

function myFunction(){
   loadXMLDoc(url, function(){
      if(xmlhttp.readyState==4 && xmlhttp.status==200){
         flag = 1;
      }
   });
}

$(function () {

    var chart = new Highcharts.Chart({

            chart: {
                renderTo: 'container',
                type: 'gauge',
                plotBackgroundColor: null,
                plotBackgroundImage: null,
                plotBorderWidth: 0,
                plotShadow: false
            },

            title: {
                text: 'Sales-O-Meter'
            },

            pane: {
                startAngle: -150,
                endAngle: 150,
                background: [{
                    backgroundColor: {
                        linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                        stops: [
                            [0, '#FFF'],
                            [1, '#333']
                        ]
                    },
                    borderWidth: 0,
                    outerRadius: '109%'
                }, {
                    backgroundColor: {
                        linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                        stops: [
                            [0, '#333'],
                            [1, '#FFF']
                        ]
                    },
                    borderWidth: 1,
                    outerRadius: '107%'
                }, {
                    // default background
                }, {
                    backgroundColor: '#DDD',
                    borderWidth: 0,
                    outerRadius: '105%',
                    innerRadius: '103%'
                }]
            },

            // the value axis
            yAxis: {
                min: 0,
                max: 100,

                minorTickInterval: 'auto',
                minorTickWidth: 1,
                minorTickLength: 2.5,
                minorTickPosition: 'inside',
                minorTickColor: '#666',

                tickPixelInterval: 15,
                tickWidth: 1,
                tickPosition: 'inside',
                tickLength: 5,
                tickColor: '#666',
                labels: {
                    step: 5,
                    rotation: 'auto'
                },
                title: {
                    text: 'sales/min'
                },
                plotBands: [{
                    from: 0,
                    to: 10,
                    color: '#DF5353' // green
                }, {
                    from: 10,
                    to: 20,
                    color: '#DDDF0D' // yellow
                }, {
                    from:20,
                    to: 100,
                    color: '#55BF3B' // red
                }]
            },

            series: [{
                name: 'Speed',
                data: [80],
                tooltip: {
                    valueSuffix: ' sales/sec'
                }
            }]

        },
        // Add some life
        function (chart) {
            flag = 0;
            myFunction();
            setInterval(function () {
                if(flag==1){
                var point = chart.series[0].points[0],
                    newVal,
                    inc = Math.round((Math.random() - .5) * 20);

                newVal = point.y + inc;
                if (newVal < 0 || newVal > 100) {
                    newVal = point.y - inc;
                }

                point.update(newVal);
                }
                else{

                   var point = chart.series[0].points[0],
                      newVal = 0,
                      inc = 0;
                   point.update(newVal);
                }
            }, 1000);
        });
});
                </script>
        </head>
        <body>
<script src="highcharts.js"></script>
<script src="highcharts-more.js"></script>
<!--<script src="exporting.js"></script>-->

<div id="container" style="width: 500px; height: 400px; margin: 0 auto"></div>

        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:25:25.310

看起来您需要在 SETI 热函数中调用我的函数，因为需要调用它来设置标志。

```
 function (chart) {
        flag = 0;    
        setInterval(function () {
            myFunction();
            if(flag==1){ 
```

# apache - ProxyPreserveHost 似乎对我没什么用

> ID：15457923
> 
> 赞同：13
> 
> 时间：2013-03-17T05:44:06.463
> 
> 标签：apache, mod-proxy

我在网上看到很多人提到使用`ProxyPreserveHost On`来确保代理后端接收原始调用者的主机名。我正在使用它来加强我的 Web 应用程序的安全性（Java、Tomcat），而如果我的日志能够显示用户实际所在的位置也会很好。我的 Tomcat 日志现在显示了这一点——非常没用：

```
127.0.0.1 - - [17/Mar/2013:06:32:13 +0100] "GET /webapp/frontend/app/partials/welcome.html HTTP/1.1" 200 54 
```

这是我的配置，显然不能按预期工作：

“/etc/apache2/sites-enabled/000-default”

```
<VirtualHost *:80>
ProxyPreserveHost On
ProxyPass /webapp http://localhost:8080/webapp
ProxyPassReverse /webapp http://localhost:8080/webapp
RewriteEngine On
RewriteRule ^/$            /webapp/frontend/app/ [proxy]
RewriteRule ^/webapp/$     /webapp/frontend/app/ [redirect]
RewriteRule ^/webapp/app/$ /webapp/frontend/app/ [redirect] 
```

（从这里开始是在默认的东西`000-default`）

启用的模块：

```
sudo a2enmod proxy
sudo a2enmod proxy_http
sudo a2enmod rewrite 
```

这是运行 Apache HTTPD 2.2.22 的 Ubuntu 12.10。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T00:36:01.387

我假设您担心的是您的访问日志在客户端字段中仍然包含 127.0.0.1 。这不受`ProxyPreserveHost`; 这是连接到 Apache 的网络端点的 IP 地址。对于来自另一台服务器的代理连接，这将始终是 localhost。

另外，`ProxyPreserveHost`是关于保留`Host`客户端发送的标头，而不是关于保留客户端的原始 IP。换句话说，这是关于信息朝着错误的方向发展的信息；它保留了客户端发送的服务器名称，而不是客户端的 IP。

我认为您的问题与[此问题](https://stackoverflow.com/questions/760283/apache-proxypass-how-to-preserve-original-ip-address)相同。我会添加额外的说明，您可以在配置`X-Forwarded-For`中使用日志中记录标题。`%{X-Forwarded-For}i``CustomLog`

# javascript - 返回 jQuery 对象数组时，jQuery 如何调用对象的方法？

> ID：15457928
> 
> 赞同：1
> 
> 时间：2013-03-17T05:44:33.070
> 
> 标签：javascript, jquery

将字符串“选择器”传递给 jQuery 函数后：

```
$('#onenode') 
```

返回一个 jQuery 对象的数组。

这些对象的方法之一是“html”，这就是为什么：

```
$('#onenode').html('hello!'); 
```

作品。

然而...

这：

```
$('.somenodes') 
```

返回一个jQuery对象数组，这个数组中的每个对象都有方法“html”。

那么如何：

```
$('.somenodes').html('hello'); 
```

工作？“html”方法必须是返回的 Array Object 的方法。

因此，我假设 Array 对象的“html”方法与此类似：

```
html: function(value) {
   for(var i=0; i<this.length; i+=1) {
      this[i].html(value);
   }
} 
```

这些都是假设，我几乎是在猜测。

**我正在尝试创建自己的使用“选择器”的小型库，但我正在努力解决这部分问题。我知道这可能是不正确的——有人可以解释一下 jQuery 是如何做到的吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T06:06:58.390

jQuery 基本上是`prototype`一大堆方法，你正在使用的 jQuery 实例在`return this`哪里。`this`

> 我正在尝试创建自己的使用“选择器”的小型库

这是在现代浏览器中工作的类 jQuery 模式的一个非常简化的示例：

```
(function(win, doc) {

  var __slice = [].slice;

  function jQuery(selector) {
    this.el = this._init(selector);
    this.length = this.el.length;
  }

  function $(selector) {
    return new jQuery(selector);
  }

  jQuery.prototype = {

    _init: function(selector) {
      return __slice.call(doc.querySelectorAll(selector));
    },

    each: function(fn) {
      return this.el.some(fn), this;
    },

    map: function(fn) {
      return this.el.map(fn), this;
    }

  };

  win.$ = $;

}(window, document)); 
```

您可以使用它来构建类似 jQuery 的库。它的工作方式与 jQuery 完全一样：

```
$('p').each(function() {
  console.log(this);
}); 
```

一个柯里化函数，`each`是`map`你开始所需要的一切。这些是 jQuery 几乎在任何地方都使用的方法来操作 DOM 元素。`this.el`是元素数组，而`this`是 jQuery 实例。只是不要忘记，您需要`return this`在每个将被链接的方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T05:49:37.977

`$('.somenodes')`不返回数组，它只是一个 jquery 对象，它具有本机数组的一些功能..

前段时间我也有类似的疑问，请检查我的问题的答案.. [https://stackoverflow.com/a/11158649/1114536](https://stackoverflow.com/a/11158649/1114536)

jQuery 对象目前支持 3 种数组方法：

```
var methods = 'pop push reverse shift sort splice unshift concat join slice toString indexOf lastIndexOf filter forEach every map some reduce reduceRight'.split(' ')
var implemented = $.grep(methods, function(m) {
    return $.prototype[m] == Array.prototype[m];
});
console.log(implemented); // => ["push", "sort", "splice"] 
```

它们也有切片，但它与数组的切片不同：

```
$.prototype.slice === Array.prototype.slice // => false 
```

# c# - 如果只需要进行微小的更改，如何在不复制完整方法的情况下实现重载？

> ID：15457932
> 
> 赞同：0
> 
> 时间：2013-03-17T05:44:46.700
> 
> 标签：c#, java, coding-style

考虑这些方法（`int`用作参数输入以简化示例。但它可以是任何数据类型，并且不能相同）

```
 public int Multiply(int a, int b)
        {
            int c=1;
            return (a * b * c);
        }
        public int Multiply(int a, int b, int c)
        {
            return (a * b * c);
        } 
```

假设这些方法写得很长，那我怎么能避免复制完整的方法呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T05:46:14.427

重载的方法可以相互调用，因此您可以通过扩展功能来**避免复制完整的方法，例如：**

```
public int Multiply(int a, int b)
{
        return Multiply(a,b,1);
}
public int Multiply(int a, int b, int c)
{
        return (a * b * c);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T05:52:54.307

在 C# 中，您可以使用带有默认值的可选参数：

```
public int Multiply(int a, int b, int c = 1)
{
     return (a * b * c);
} 
```

并且可以像这样使用：

```
int a = Multiply(2, 3);    // 2 * 3 * 1 = 6
int b = Multiply(2, 3, 4); // 2 * 3 * 4 = 24 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T05:50:17.183

就像是 ：

```
private static int Multiply(params int[] nums)
{
    int result = 1;
    foreach (int num in nums)
    {
        result *= num;
    }
    return result;
} 
```

上面的方法可以用Linq写

```
private static int Multiply(params int[] nums)
{
    return nums.Aggregate(1, (current, num) => current*num);
} 
```

例子 ：

```
 public static void Main()
    {
        int ans1 = Multiply(1, 2, 3, 4);         // 24
        int ans2 = Multiply(1, 2, 3, 4, 5);      // 120
        int ans3 = Multiply(1, 2, 3, 4, 5, 6);   // 720

    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-17T06:00:58.960

如果将一个调用缩减为具有适当参数的另一个更通用的调用，那么这是首选选项。（参见 Inisheer 和 Jeremy Thompson 的建议）。

然而，在一般情况下，如果无法做到这一点，我建议将大型操作分解为更小的有意义的操作。这样，可以在子类中实现不同的操作变体，而无需重复太多代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-17T07:13:01.603

好吧，您可以使用带有 varg 参数的方法覆盖它。由于已经可用的方法涵盖了 2 和 3 参数，因此可以使用 1、2、3 来表示任意数量的输入。

这是一个示例代码，它重用了重载方法。

**代码**

```
/**
 * @author Sudhakar Duraiswamy
 *
 */
public class Reuse {

    public static void main(String[] args) {
        Reuse r = new Reuse();
        int[] rr = {1,2,3};

        System.out.println(r.Multiply(rr));

        int[] rr1 = {1,2,3,3};
        System.out.println(r.Multiply(rr1));

        int[] rr2 = {1,2,3,3,2};
        System.out.println(r.Multiply(rr2));
    }

    public int  Multiply(int... arg){
        int result = 1;
        if(null != arg && arg.length >0){

            if(arg.length ==1){
                result =  arg[0];
            }else if(arg.length ==2){

                result =  Multiply(arg[0],arg[1]);
            }else if(arg.length >=3){               
                int remainingSize  = arg.length % 3;

                for(int i=0;i< arg.length-remainingSize ;i= i+3){                   
                    result = result * Multiply(arg[i], arg[i+1], arg[i+2]);                 
                }

                if(remainingSize == 2){             
                    result =result * Multiply(arg[arg.length-2], arg[arg.length-1]);
                }else if(remainingSize == 1){
                    result = result * arg[arg.length-1];
                }
            }
        }

        return result;
    }

    public int Multiply(int a, int b)
    {
        int c=1;
        return (a * b * c);
    }
    public int Multiply(int a, int b, int c)
    {
        return (a * b * c);
    }
} 
```

# java - 在春季将会话范围应用于 bean 时出错

> ID：15457935
> 
> 赞同：0
> 
> 时间：2013-03-17T05:45:17.303
> 
> 标签：java, spring, session, spring-annotations

我尝试使用 @Scope 注释更改 bean 的范围。该 bean 实际上用作 MessageSource 并用于国际化目的。

mvc-dispacher-servlet.xml 中的架构如下：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
     xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd 
        http://www.springframework.org/schema/aop 
        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd"> 
```

控制台中描述的异常如下：

> `SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Cannot locate BeanDefinitionParser for element [scoped-proxy]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:46:17.340

行。如果它是一个普通的 bean，那么很可能您只是缺少范围标记的 xml 解析器。为了能够使用范围代理，您需要注册 aop:scoped-proxy。

SO上有一个类似的问题： [Accessing a session-scoped bean inside a controller](https://stackoverflow.com/questions/5928265/accessing-a-session-scoped-bean-inside-a-controller)

结果是：

[http://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-factory-scopes-other-injection](http://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-factory-scopes-other-injection)

否则你应该很容易通过谷歌找到一些关于这个主题的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-31T19:09:57.130

很可能您在 bean 之外有一个 bean 范围的选项（我犯了这样的错误并得到了像您一样的错误消息）：

```
<beans>
...
<aop:config proxy-target-class="true"/>
<aop:scoped-proxy proxy-target-class="true"/>
<aop:aspectj-autoproxy proxy-target-class="true"/>
... 
```

只需将该选项放在 bean 声明中：

```
<bean ... target="step">
    <aop:scoped-proxy proxy-target-class="true"/>
</bean> 
```

还有一件事——我只对范围内的 bean 有这样的错误。

# c# - 密封类性能

> ID：15457938
> 
> 赞同：2
> 
> 时间：2013-03-17T05:45:33.643
> 
> 标签：c#, performance

我阅读了有关[密封](http://msdn.microsoft.com/en-us/library/88c54tsw%28v=vs.71%29.aspx)类的信息，并且知道密封类不能被继承。

如果我在不需要从密封类继承时用密封装饰类，我会获得更多性能吗？

```
// cs_sealed_keyword.cs
// Sealed classes
using System;
sealed class MyClass 
{
   public int x; 
   public int y;
}

class MainClass 
{
   public static void Main() 
   {
      MyClass mC = new MyClass(); 
      mC.x = 110;
      mC.y = 150;
      Console.WriteLine("x = {0}, y = {1}", mC.x, mC.y); 
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T06:36:21.290

曾几何时，在 OO 的早期，非虚拟方法通过避免 vtable 访问而提供了显着的性能优势。然而，如今，修饰符背后的基本原理`sealed`更多地是关于设计选择，控制客户端代码与库的交互方式。

就像标记一个方法`private`可以让您保留实现细节以供将来改进一样，标记一个类`sealed`可以保证（除非有阴暗的反射恶作剧）您的库的用户将无法将他们的代码插入到您的调用图中以发生意外，可能是灾难性的通过不明智地将您的实现子类化的方式。

这在安全情况下尤其重要，在这种情况下，严格控制的类结构可能会被单个闯入者子类完全撤消。因此，您会在 System.Security 命名空间中找到大量密封类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:52:58.353

使用密封改性剂时，性能几乎没有改善。编译器在最低级别进行微优化。

JIT 编译器可以通过非虚拟方式调用方法来生成更高效的代码

也看看这个[线程](https://stackoverflow.com/questions/2134/do-sealed-classes-really-offer-performance-benefits)

# php - CakePHP：指向同一模型的多个链接

> ID：15457939
> 
> 赞同：0
> 
> 时间：2013-03-17T05:45:48.043
> 
> 标签：php, cakephp, cakephp-model

假设每本书都有 AuthorA 和 AuthorB 字段。这两个字段都是`authors`表的外键。

具有字段的表作者：id | 姓名

带字段的表书：id | 姓名 | a_author_id | b_author_id |

控制器、模型和视图应该如何设置才能创建一本书，其中“作者 a”和“作者 b”的下拉列表都来自作者表？author-a（和 author-b）的表单输入在 Book 模型的“添加”视图中看起来如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:08:22.683

您需要在`Book`模型中使用不同的`Author`模型别名设置 2 个 belongsTo 关联。

```
public $belongsTo = array(
    'AAuthor' => array(
        'className' => 'Author',
        'foreignKey' => 'a_author_id'
    ),
    'BAuthor' => array(
        'className' => 'Author',
        'foreignKey' => 'b_author_id'
    )
); 
```

用于`$this->Book->AAuthor->find('list')`获取作者列表并将数组设置为查看和指定相同的数组，使用和字段的选项中的`'options'`键。`Form->input()``a_author_id``b_author_id`

# google-app-engine - 以编程方式删除 GAE 应用程序版本

> ID：15457940
> 
> 赞同：1
> 
> 时间：2013-03-17T05:45:58.233
> 
> 标签：google-app-engine

有没有办法以编程方式删除最旧版本的 GAE 应用程序？

更新：[现在可以使用 appcgf 删除旧版本的应用程序](http://code.google.com/p/googleappengine/issues/detail?id=2723#makechanges)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:52:43.687

没有 api 可以以编程方式删除已部署的版本。

# android - 加载布局 xml 失败

> ID：15457943
> 
> 赞同：0
> 
> 时间：2013-03-17T05:46:03.903
> 
> 标签：android, xml

我想我应该展示整个布局结构，以便您找出问题所在。我是 Android 编程新手，不确定我在做什么是正确的。我用 listview 加载了 main.xml。然后我有一个菜单，当按下菜单时，我加载 add.xml 以将新列表添加到列表视图。它如下，工作正常。

```
final View addView = getLayoutInflater().inflate(R.layout.add, null);

    new AlertDialog.Builder(this).setTitle("New Tracker").setView(addView)
            .setPositiveButton("ADD", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    addWord((TextView) addView.findViewById(R.id.IDeditText));
                }
            }).setNegativeButton("Cancel", null).show(); 
```

*add.xml*有一个 EditText 视图。当用户点击 EditText 时，我想加载另一个名为 description.xml 的 XML 布局。这样做如下 -

```
private void add() {
    final View addView = getLayoutInflater().inflate(R.layout.add, null);

    EditText DescEditTxt = (EditText) addView.findViewById(R.id.descriptionEdit);
    if(DescEditTxt != null)
    {
        DescEditTxt.setOnFocusChangeListener(new View.OnFocusChangeListener() {
            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                final View descriptionView = getLayoutInflater().inflate(R.layout.description, null);
                setContentView(descriptionView);        

            }
       });
    }

    new AlertDialog.Builder(this).setTitle("New Tracker").setView(addView)
            .setPositiveButton("ADD", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    addWord((TextView) addView.findViewById(R.id.IDeditText));
                }
            }).setNegativeButton("Cancel", null).show();
} 
```

当用户关注 EditText 视图时，我尝试加载*description.xml*但程序在`setContentView(descriptionView);`

我的查询是

*   这对我正在做的事情有意义吗？有没有更好的方法呢？

*   程序崩溃可能是什么问题？

LOGCAT

```
03-17 06:15:24.918: E/InputEventReceiver(2093): Exception dispatching input event.
03-17 06:15:24.928: E/MessageQueue-JNI(2093): Exception in MessageQueue callback: handleReceiveCallback
03-17 06:15:25.048: E/MessageQueue-JNI(2093): java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.app.ListActivity.onContentChanged(ListActivity.java:243)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:292)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:279)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.app.Activity.setContentView(Activity.java:1901)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at sg.SanThit.TrackMe.MainActivity$1.onFocusChange(MainActivity.java:117)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.View.onFocusChanged(View.java:4587)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.widget.TextView.onFocusChanged(TextView.java:7325)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.View.handleFocusGainInternal(View.java:4375)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.View.requestFocusNoSearch(View.java:6660)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.View.requestFocus(View.java:6639)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.View.requestFocus(View.java:6606)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.View.requestFocus(View.java:6585)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.View.onTouchEvent(View.java:8184)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.widget.TextView.onTouchEvent(TextView.java:7377)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.View.dispatchTouchEvent(View.java:7239)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1953)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1405)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.app.Dialog.dispatchTouchEvent(Dialog.java:740)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1901)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.View.dispatchPointerEvent(View.java:7419)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3220)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3165)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4292)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4271)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4363)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:179)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.os.MessageQueue.nativePollOnce(Native Method)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.os.MessageQueue.next(MessageQueue.java:125)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.os.Looper.loop(Looper.java:124)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at android.app.ActivityThread.main(ActivityThread.java:5039)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at java.lang.reflect.Method.invokeNative(Native Method)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at java.lang.reflect.Method.invoke(Method.java:511)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-17 06:15:25.048: E/MessageQueue-JNI(2093):   at dalvik.system.NativeStart.main(Native Method)
03-17 06:15:25.048: D/AndroidRuntime(2093): Shutting down VM
03-17 06:15:25.062: W/dalvikvm(2093): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
03-17 06:15:25.168: E/AndroidRuntime(2093): FATAL EXCEPTION: main
03-17 06:15:25.168: E/AndroidRuntime(2093): java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.app.ListActivity.onContentChanged(ListActivity.java:243)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:292)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:279)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.app.Activity.setContentView(Activity.java:1901)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at sg.SanThit.TrackMe.MainActivity$1.onFocusChange(MainActivity.java:117)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.View.onFocusChanged(View.java:4587)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.widget.TextView.onFocusChanged(TextView.java:7325)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.View.handleFocusGainInternal(View.java:4375)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.View.requestFocusNoSearch(View.java:6660)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.View.requestFocus(View.java:6639)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.View.requestFocus(View.java:6606)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.View.requestFocus(View.java:6585)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.View.onTouchEvent(View.java:8184)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.widget.TextView.onTouchEvent(TextView.java:7377)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.View.dispatchTouchEvent(View.java:7239)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1953)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1405)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.app.Dialog.dispatchTouchEvent(Dialog.java:740)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1901)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.View.dispatchPointerEvent(View.java:7419)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3220)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3165)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4292)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4271)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4363)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:179)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.os.MessageQueue.nativePollOnce(Native Method)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.os.MessageQueue.next(MessageQueue.java:125)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.os.Looper.loop(Looper.java:124)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at java.lang.reflect.Method.invokeNative(Native Method)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at java.lang.reflect.Method.invoke(Method.java:511)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-17 06:15:25.168: E/AndroidRuntime(2093):     at dalvik.system.NativeStart.main(Native Method)
03-17 06:20:25.548: I/Process(2093): Sending signal. PID: 2093 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:05:55.347

> （1）这对我所做的有意义吗？有没有更好的方法呢？

在我看来，你的部分问题是你正在膨胀并试图使用太多`Layouts`. 充气没`Views`问题，但似乎你试图使用太多（到目前为止我可以看到 3 个）。如果你需要的话，如果你打电话给`setContentView()`你的`onCreate()`then 可能会更简单和更干净。如果您希望所有这些都合二为一并且使用 API 11 或更高版本，那么您可能需要考虑使用[Fragments](http://developer.android.com/guide/components/fragments.html)`inflate``View``Activity`

很难准确地描绘出你所拥有的东西，但如果每个人里面`layout`没有很多`Views`东西，那么将它们放在一个中`layout`并设置`visibility`到`gone`你需要的时候可能会更容易，`view`然后将其更改为`visible`

```
What could be the problem due to which the program crashed? 
```

**编辑**

错误是因为您有 a`ListActivity`但您`ListView`的 xml 中没有具有正确 id 的 a 。你需要有类似的东西

```
<ListView
android:id="@android:id/list"
.../> 
```

如果您只扩展`Activity`和创建自己的`listview`，那么您不需要这个。但是如果你扩展`ListActivity`，那么你需要`ListView`在你的 xml 中使用它。您的 logcat 中的以下行是您如何知道这一点的

```
java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

# asp.net-mvc-3 - How Would One Unit Test an HtmlHelper Which Actually Uses the helper in the Extension Method

> ID：15457954
> 
> 赞同：2
> 
> 时间：2013-03-17T05:47:17.393
> 
> 标签：asp.net-mvc-3, unit-testing, moq

I've spent the better half of this afternoon trying to figure out how to mock (using MOQ) up the relevant bits and pieces to unit test the following HtmlHelper, which users the UrlHelper class to create img tags:

```
 public static IHtmlString Image(this HtmlHelper helper, string id, string url, string alternateText, object htmlAttributes)
    {
        // Instantiate a UrlHelper
        var urlHelper = new UrlHelper(helper.ViewContext.RequestContext);

        // Create tag builder
        var builder = new TagBuilder("img");

        // Create valid id
        builder.GenerateId(id);

        // Add attributes
        builder.MergeAttribute("src", urlHelper.Content(url));
        builder.MergeAttribute("alt", alternateText);
        builder.MergeAttributes(new RouteValueDictionary(htmlAttributes));

        // Render tag
        return new MvcHtmlString(builder.ToString(TagRenderMode.SelfClosing));
    } 
```

Has anyone solved this problem already in their work?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:54:04.203

You should test the end result. If you know that you helper should rerurn something like, lets say:

```
<img src="test.jpg" id="testId" alt="something" /> 
```

Then your Assertion should be by comparing this string against the actual result. You should not care whether it is using helper internally itself or not.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:42:50.883

When I run into .NET types which are not unit test friendly I usually write my own interface (with only the methods that I need) and a shim class implementing the interface which just forwards method/property calls to the original class. The shim is testable by inspection.

Then I write all of the code that I need to unit test against this interface (so I depend on abstractions, not concretions). This includes extension methods, which extend the interface rather than the original concrete type. In this respect, testing extension methods is as easy as `new Mock<IHtmlHelper>() ...` - you can make `IHtmlHelper` do anything you like because you have total control of its behaviour in your unit tests.

Typing out the interface and the shim is a little bit tedious for classes with larger interfaces, but mostly I find the overhead is very low. It also means that I end up doing fewer weird tricks to make things testable, so my code is more consistent and easy to follow (dependencies are always injected the same way, tests are always written the same way).

I think the point that Husein Roncevic is making is that you should be testing the *clients* of `HtmlHelper` in terms of observable state rather than behaviour. In other words, the unit tests for the client code should not be aware of which methods were called (extension methods or otherwise). It sounds like you want to unit test the extension method itself, which is a perfectly reasonable thing to do.

# scheme - # 在输出

> ID：15457972
> 
> 赞同：1
> 
> 时间：2013-03-17T05:49:43.473
> 
> 标签：scheme, closures

我正在编写一个函数来将列表的最后一个元素切换到开头：

```
(define last-elem
    (lambda (l)
        (car (reverse l))))

(define all-but-last
    (lambda (l) 
            (reverse (cdr (reverse l)))))

(define (last-to-first x) (append (list last-elem x) (all-but-last x)))

(last-to-first '(1 2 3 4 5 6)) 
```

它没有用，我知道为什么。我忘了把括号放在周围`list last-elem x`

问题是，我很好奇输入错误代码的输出：

```
(#<Closure> (1 2 3 4 5 6) 1 2 3 4 5) 
```

如果这是什么意思？它是怎么出现的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T12:45:27.300

在 Racket 中，输出为

```
'(#<procedure:last-elem> (1 2 3 4 5 6) 1 2 3 4 5) 
```

这更清楚一点。

对函数的引用总是与它的引用环境一起存储，也就是作为闭包，并且您的 Scheme 实现选择以这种方式显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:42:08.570

```
(list last-elem x) 
```

不调用函数`last-elem`。它只返回一个包含两个元素的列表：变量的值`last-elem`（它是一个过程）和参数的值`x`。你要：

```
(list (last-elem x)) 
```

但首先没有理由列出清单。尝试：

```
(define (last-to-first x)
  (cons (last-elem x) (all-but-last x))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:48:53.673

在 Scheme 中，所有标识符都表示句法关键字（绑定到“转换器”）或变量（绑定到值）。在您的代码`last-elem`中表示绑定到您定义的函数的变量。当你写：

```
(list last-elem x) 
```

解释器/编译器生成一个值为`last-elem`and的列表`x`。因此，`#<Closure>`列表中的结果。

# javascript - javascript - 无法更改对象位置

> ID：15457982
> 
> 赞同：2
> 
> 时间：2013-03-17T05:50:49.537
> 
> 标签：javascript, position

```
var img = new Image();
img.className = "block";
img.src = "http://db.tt/xCGgJN48";
img.style.left = x + "px";
img.style.top = y + "px";
var array = [];
array.push(img);
document.getElementById("mydiv").appendChild(array[0]);
//imagine some delay here
array[0].style.left = (array[0].style.left + 10) + "px"; 
```

我无法让图像移动。顺便说一句，那不是实际的代码，最后一行代码是什么没有移动它，而且我之间还有其他代码位。它出什么问题了？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T05:54:28.510

这行代码是问题所在：

```
(array[0].style.left + 10) + "px"; 
```

`array[0].style.left`正在返回类似的东西`100px`。所以，添加到那`10`将是`100px10`，然后添加到那`px`将是`100px10px`。你需要做的是使用`parseInt`隐蔽的`100px`to `100`，然后添加`10`will be `110`，添加`px`到 that 会给你正确的`110px`。

```
array[0].style.left = parseInt(array[0].style.left) + 10 + "px"; 
```

# sql - 按多列分组，在第一个按列分组时求和

> ID：15457983
> 
> 赞同：0
> 
> 时间：2013-03-17T05:51:01.943
> 
> 标签：sql, sql-server-2008, tsql

我正在编写一个分组两列的查询。这意味着，它将把 Col1 和 Col2 放在同一个组中。

如何根据 Group Col1 对记录进行 SUM？

到目前为止我有这个：[http ://sqlfiddle.com/#!3/eada2/1](http://sqlfiddle.com/#!3/eada2/1)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:11:15.120

在我看来，这是一个看起来更简洁的解决方案 - 它不需要连接并使用“分区依据”来计算个人计数：

```
WITH activityCounts as (
    select
        activityId,
        docuType,
        count(activityId) OVER(PARTITION BY activityId) as activityIdCount,
        count(docuType) OVER(PARTITION BY activityId, docuType) as docuTypeCount,
        SUM(CASE WHEN [sent] != '1-1-1900' THEN 1 END) OVER(PARTITION BY activityId, docuType) AS [Sent],
        SUM(CASE WHEN [approved] != '1-1-1900' THEN 1 END) OVER(PARTITION BY activityId, docuType) AS [Approved]
    from ER
)
SELECT
    activityId,
    docuType,
    docuTypeCount,
    CONVERT(DECIMAL(16,2), (COUNT(docuTypeCount) * 100.00 / activityIdCount)) as [Total DocuType in Activity],
    [Sent],
    [Approved]
FROM activityCounts
GROUP BY
    activityId,
    docuType,
    activityIdCount,
    docuTypeCount,
    [Sent],
    [Approved] 
```

这是[**sqlfiddle 的链接**](http://sqlfiddle.com/#!3/eada2/23)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:20:36.590

我能够解决它如下：

```
WITH cteActivityIds (activityId, allDocuByActivity)
AS
  (SELECT activityId, COUNT(*) AS allDocuByActivity FROM #ER GROUP BY activityId)
SELECT
      E.activityId AS [Actiivty ID],
      docuType AS [Docu Type],
      COUNT(docuType),
      CONVERT(DECIMAL(16,2), (COUNT(docuType) * 100.00 / t.allDocuByActivity)) [Total     DocuType in Activity],
      SUM(CASE WHEN [sent] != '1-1-1900' THEN 1 END) AS [Sent],
      SUM(CASE WHEN [approved] != '1-1-1900' THEN 1 END) AS [Approved]
FROM
      #ER AS E
INNER JOIN cteActivityIds AS t 
  ON E.activityId = t.activityId
GROUP BY
     E.activityId, docuType, t.allDocuByActivity 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:58:14.077

你只需要放一个聚合函数`t.allDocuByActivity`

```
MIN(t.allDocuByActivity) AS [Total DocuType in Activity], 
```

但是，由于您的标签是`DocuType`. 你不需要`DISTINCT`吗？