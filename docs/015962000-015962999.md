# StackOverflow 问答 15962000-15962999

# c++ - 类中的静态函数，内存将如何处理？

> ID：15962000
> 
> 赞同：0
> 
> 时间：2013-04-12T02:15:22.380
> 
> 标签：c++, function, memory, static, static-functions

我想使用以下静态函数。该函数将依次计算输入和 std::cout 一个结果。在调用静态函数并从堆栈中取出后，与该类关联的所有内存是否都会被释放？这是否等同于在 main 范围内创建此类的实例，还是仅在此函数调用期间存在？假设该函数在主函数中被调用，如下所示。此外，进一步的阅读链接会很棒。

```
typedef std::vector< std::vector<int> > matrix;    
    class LCS
        {
            public:
                static void getLCS(std::string,std::string);
            private:
                void compute_alignment();
                std::vector<std::string> f1,f2;
                matrix cost,link;
        };
int main(int argc, char* argv[])
{
    //check command line args
    if(argc != 3){std::cout<<"usage: ./exe file1.txt file2.txt";exit(1);}
    //compute
    LCS::getLCS(argv[1],argv[2]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:24:12.240

严格从您的问题来看，如果在堆栈上声明了所有在 getLCS 中声明的变量（没有*任何类型的**裸变量），那么它们将在函数完成后消失`new`*。除此以外，别无其他。调用静态函数也不会创建一个新`LCS`类：类上的静态函数的行为几乎与自由函数完全一样，只是它们可以在其上放置访问修饰符以在类内限定范围。[静态数据和方法独立于它们的类运行，除非您在成员函数中显式使用和混合它们](https://stackoverflow.com/questions/2992948/static-class-data-members-and-constructors?rq=1)。

编辑：

请注意，所有 C++ 函数都是如此。当该函数/范围死亡时，在堆栈上创建的对象和原语将死亡/超出范围。作为额外的乐趣，您甚至可以通过在一些代码周围随意`scope`添加一些大括号来创建！`{ /* ... */ }`但通常没有必要做这样的事情。

祝你好运！

# ruby-on-rails - 在 Rails 控制台中访问表的第一条记录导致 NoMethodError

> ID：15962005
> 
> 赞同：1
> 
> 时间：2013-04-12T02:15:57.720
> 
> 标签：ruby-on-rails

我在 RVM 等中使用 Rails 3.2.12 和 Roby 2.0.0-p0。在`rails console`执行后出现以下错误`u = Users.first`：

```
u = Users.first
Loading production environment (Rails 3.2.12)
2.0.0p0 :001 > u = Users.first
NoMethodError: undefined method `first' for Users:Module
    from (irb):1
    from /usr/local/rvm/gems/ruby-2.0.0-p0@discourse/gems/railties-3.2.12/lib/rails/commands/console.rb:47:in `start'
    from /usr/local/rvm/gems/ruby-2.0.0-p0@discourse/gems/railties-3.2.12/lib/rails/commands/console.rb:8:in `start'
    from /usr/local/rvm/gems/ruby-2.0.0-p0@discourse/gems/railties-3.2.12/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我能够使用将要使用的用户 rails 通过 psql 控制台访问数据库并查看记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:18:26.133

如果您已经定义了用户模型，请尝试使用 User.first 而不是 Users.first。

# python - 单例设计模式替代方案？

> ID：15962008
> 
> 赞同：0
> 
> 时间：2013-04-12T02:16:01.643
> 
> 标签：python, authentication, reporting-services, singleton

我有一个包含以下类的门户：

*   授权
*   查询
*   报告生成

对于所有这些，单例设计模式似乎效果最好，但我被告知使用它是非常不可取的。但是，我也看到我只需要认证一次，多次查询和报告（但每次功能都是一样的）。有没有办法解决这个问题并使用更多的 OOP 方法？顺便说一句，我正在用 Python 编程。我知道有很多关于此的帖子，但**在你大喊“重复！”之前** 请考虑我的具体情况。对于我是否应该使用它，我真的只需要一个是或否的答案。我已经阅读了大量的文档，但我仍然不确定。

谢谢你。

# c++ - 是否有可能在没有“新”的结构内有一个 boost::variant ？

> ID：15962014
> 
> 赞同：0
> 
> 时间：2013-04-12T02:17:06.740
> 
> 标签：c++, boost, struct, variant

我已经创建了结构

```
struct Event
{
  int key;
  boost::variant<int, float> value;
}; 
```

是否可以像这样创建事件：

```
Event e; 
```

我已经尝试过了，但是遇到了编译器错误。这是可能的还是我必须做的：

```
Event e = new Event(); 
```

**编辑：**这是我得到的错误：错误C2061：语法错误：标识符'storage_'（在variant.hpp中）

variant.hpp 中有一些注释，但我无法理解它们，因为“第一个绑定类型是 int ？？？

> ```
>  // NOTE TO USER :
>     // Compile error from here indicates that the first bound
>     // type is not default-constructible, and so variant cannot
>     // support its own default-construction.
>     // 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:24:19.597

对的，这是可能的。文档 ( [http://www.boost.org/doc/libs/1_53_0/doc/html/variant/tutorial.html](http://www.boost.org/doc/libs/1_53_0/doc/html/variant/tutorial.html) ) 中的示例之一是：

```
boost::variant< int, std::string > v; 
```

它指出：

> 默认情况下，变体默认构造其第一个有界类型，因此 v 最初包含 int(0)。如果不希望这样做，或者如果第一个有界类型不是默认可构造的，则可以直接从任何可转换为其有界类型之一的值构造变体”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T02:24:51.047

以下为我编译（VS2012）：

```
#include "boost/variant.hpp"

struct Event
{
  int key;
  boost::variant<int, float> value;
};

int main()
{
   Event e;
   return 0;
} 
```

所以，是的，可以在没有`new`. 如果您需要进一步的帮助，我建议显示演示问题的完整代码以及编译器错误消息。

# c - 如何查看#include 中包含的标头的位置？

> ID：15962020
> 
> 赞同：2
> 
> 时间：2013-04-12T02:17:52.307
> 
> 标签：c, gcc

我希望能够在编译时查看实际包含哪个标头。例如，我有两个非常不同的 check.h 文件（一个是 linux-header 的东西，另一个来自单元测试系统）。

gcc 或某些语言命令/宏中是否有设置可以显示包含头文件的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:22:51.647

您可以使用该`-E`标志。

```
gcc -E source.c 
```

这将向您显示“带注释”的预处理源，包括包含使用的标头的绝对路径和包含使用`<>`的标头的相对路径`""`。请记住，这将是一个艰难的过程，特别是如果您包含很多系统头文件（这些头文件又包括特定于实现的头文件等）。

使用 grep，您可以通过以下方式过滤这些结果：

```
gcc -E source.c | grep '^# 1 ' 
```

这`# n`是一个注释，描述当前包含的文件的行号，它始终`# 1`位于文件的开头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T02:25:07.343

您可以尝试添加`-MD`到您的编译命令。这会生成一个依赖文件（适用于 Make），它将告诉您源代码所依赖的所有包含文件。

这可以添加到现有的编译命令中，而不必担心破坏编译，因为它会生成依赖文件作为正常编译的副作用。

# php - PHP Exec 函数不适用于 cd Ubuntu 命令

> ID：15962023
> 
> 赞同：-1
> 
> 时间：2013-04-12T02:18:01.650
> 
> 标签：php, ubuntu

你知道为什么脚本执行时我的 exec() 更改目录不起作用吗？

```
$test = exec('cd /var/www/mysite.com/mysite.com', $output);
echo $test;

$ls = exec('ls');
echo $ls; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:20:27.087

如果您想更改您正在使用的[`chdir()`](http://us3.php.net/manual/en/function.chdir.php)目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:20:55.037

`exec()`用于单个命令。`cd`将更改目录，但随后将其丢弃以供将来调用`exec()`.

但这会起作用，因为可以将路径参数提供给`ls`：

```
echo exec('ls /var/www/mysite.com/mysite.com'); 
```

# css - 带文本/按钮的全屏图像（响应式）

> ID：15962034
> 
> 赞同：1
> 
> 时间：2013-04-12T02:19:51.423
> 
> 标签：css, image, skeleton-css-boilerplate

我正在为客户做一个复杂的项目。我设计了一个全屏登录页面，需要在所有大小的 windows/mobile 上兼容（响应式）。目前我无法定位图像以覆盖整个页面。div (slider-full-width) 需要跨越整个窗口。我提供了一张图片来展示我想要实现的目标。我正在使用骨架框架。[http://www.getskeleton.com/](http://www.getskeleton.com/)在这个全屏登陆页面之后，您必须能够继续向下滚动才能看到页面的其余内容。

![这必须占据所有设备上的整个屏幕](https://i.stack.imgur.com/eDGG3.png)

我的 HTML：

```
 <div id="slider-full-width">
<div class="container">
  <h2>Seeking a refreshening management service?</h2>
  <h2>You've come to the right place</h2>
  <div id="button-bg">
  <a href="properties.html" class="presentation-button">Properties</a>
  <a href="#body-span-class" class="presentation-button">See why</a>
</div> 
```

我的 CSS：

```
 #slider-full-width{
width: 100%;
background-image: url('../img/slide-01.jpg');
position:relative;
text-align: center;}
    #slider-full-width h2 {
color: #efefef; 
```

}

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:27:24.907

我不知道为什么它会在顶部留下空白的间隙，但我为您创建了一个 jsfiddle 来展示我为删除它所做的工作：http: [//jsfiddle.net/sKzCc/](http://jsfiddle.net/sKzCc/)

**HTML：**

> ```
> <div id="slider-full-width"> <div class="container">   <h2>Seeking a
> refreshening management service?</h2>   <h2>You've come to the right
> place</h2>   <div id="button-bg">   <a href="properties.html"
> class="presentation-button">Properties</a>
>   <a href="#body-span-class" class="presentation-button">See why</a>   </div> 
> ```

**CSS：**

> ```
> #slider-full-width{ max-width: 100%; min-height:800px; background: url('http://www.wherelionsroam.co.uk/image/two.jpg') no-repeat center
> center fixed; -webkit-background-size: cover; -moz-background-size:
> cover; -o-background-size: cover; background-size: cover;
> position:relative; text-align: center; } #slider-full-width h2 {
> color: #efefef; margin-top:-20px; font-size: 25.29pt; padding-top:
> 285px; text-shadow: 1px 1px 1px #000; } 
> ```

我为所有主要浏览器添加了`background-size:cover`标签，以确保最大的跨浏览器兼容性。我希望这个解决方案对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:28:11.873

如果您希望背景图像覆盖 div，您可以在选择器中使用它：

```
#slider-full-width {
    /* Your code */
    background-size: cover;
} 
```

# python - Pygame Sprite 不会重置

> ID：15962044
> 
> 赞同：1
> 
> 时间：2013-04-12T02:20:34.847
> 
> 标签：python, pygame, sprite

我正在制作一个平台类型的游戏，但我遇到了两个问题。

1.  我的 Sprite 被限制在窗口中心的一个小盒子里。我怎么做才能让他覆盖整个窗户？

2.  当我移动旧精灵时，不会删除。看起来在精灵后面有一条尾巴。

对任何一个的帮助将不胜感激！

```
 import random, sys, copy, os, pygame, time, math
from pygame.locals import *

TILESIZE = 20
WINDOWWIDTH = 1280
WINDOWHEIGHT = 720
FPS = 30
floorx = (WINDOWHEIGHT - (TILESIZE))
floory = (WINDOWWIDTH / TILESIZE)
TileOffset = 20
tilesNeeded = (WINDOWWIDTH / TILESIZE)
floorSize = TILESIZE * 2
OUTSIDE_DECORATION_PCT = 20
HALF_WINDOWHEIGHT = (WINDOWHEIGHT / 2)
HALF_WINDOWWIDTH = (WINDOWWIDTH / 2)
CAMERASLACK = 25
MOVERATE = 9
BOUNCERATE = 6
BOUNCEHEIGHT = 30
INVULTIME = 2
GAMEOVERTIME  = 4
MAXHEALTH = 3
STARTSIZE = 30 

BLACK =         (  0,   0,   0)
WHITE =         (255, 255, 255)
LIGHTGRAY =     (174, 174, 174)
DARKGRAY =      ( 41,  41,  41)
MEDGRAY =       (101, 101, 101)
SKYBLUE =       (200, 210, 255)
DARKTURQUOISE = (  3,  54,  73)
GREEN =         (  0,  92,   7)
LIGHTGREEN =    (  0, 135,  15)
BGCOLOR = LIGHTGRAY
TEXTCOLOR = BLACK

UP = 'up'
DOWN = 'down'
LEFT = 'left'
RIGHT = 'right'

def main():
    global FPSCLOCK, DISPLAYSURF, BASICFONT, TILESIZE, floorx, floory, floorCovered, tilesNeeded, OUTSIDEDECOMAPPING, L_Monster, R_Monster, BGIMAGE

    pygame.init()
    DISPLAYSURF = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))
    FPSCLOCK = pygame.time.Clock()

    pygame.display.set_caption('Alpha One')
    # Set up the background image.
    boardImage = pygame.image.load('bg.png')
    # Use smoothscale() to stretch the board image to fit the entire board:
    boardImageRect = boardImage.get_rect()
    boardImageRect.topleft = (0, 0)
    BGIMAGE = pygame.image.load('bg.png')
    # Use smoothscale() to stretch the background image to fit the entire window:
    BGIMAGE = pygame.transform.smoothscale(BGIMAGE, (WINDOWWIDTH, WINDOWHEIGHT))
    BGIMAGE.blit(boardImage, boardImageRect)
    #Draw the background    
    DISPLAYSURF.blit(BGIMAGE, BGIMAGE.get_rect())
    #Draw the Floor
    drawFloor()

    L_Monster = pygame.image.load('monster.png')
    L_Monster = pygame.transform.scale(L_Monster, (1000, 600))
    R_Monster = pygame.transform.flip(L_Monster, True, False)

    pygame.display.flip()

    #Main Game Loop
    while True:
        runGame()

        #pygame.display.update()

def runGame():
    invulnerableMode = False
    invulnerableStartTime = 0
    gameOverMode = False
    gameOverStartTime = 0
    winMode = False

    camerax = 0
    cameray = 0

    playerObj = {'surface': pygame.transform.scale(L_Monster,(STARTSIZE, STARTSIZE)),
                 'facing': LEFT,
                 'size': STARTSIZE,
                 'x': HALF_WINDOWWIDTH,
                 'y': HALF_WINDOWHEIGHT,
                 'bounce':0,
                 'health': MAXHEALTH}

    moveLeft = False
    moveRight = False
    moveUp = False
    moveDown = False

    while True:
        DISPLAYSURF.blit(BGIMAGE, BGIMAGE.get_rect())
        drawFloor()
        #DISPLAYSURF.fill(WHITE)
        if invulnerableMode and time.time() - invulnerableStartTime > INVULNTIME:
            invulnerableMode = False

        playerCenterx = playerObj['x'] + int(playerObj['size'] / 2)
        playerCentery = playerObj['y'] + int(playerObj['size'] / 2)
        if (camerax + HALF_WINDOWWIDTH) - playerCenterx > CAMERASLACK:
            camerax = playerCenterx + CAMERASLACK - HALF_WINDOWWIDTH
        elif playerCenterx - (camerax +HALF_WINDOWWIDTH) > CAMERASLACK:
            camerax = playerCenterx - CAMERASLACK - HALF_WINDOWWIDTH
        if (cameray + HALF_WINDOWHEIGHT) - playerCentery > CAMERASLACK:
            cameray = playerCentery + CAMERASLACK - HALF_WINDOWHEIGHT
        elif playerCentery - (cameray +HALF_WINDOWHEIGHT) > CAMERASLACK:
            cameray = playerCentery - CAMERASLACK - HALF_WINDOWHEIGHT

        flashIsOn = round(time.time(), 1) * 10 % 2 == 1
        if not gameOverMode and not (invulnerableMode and flashIsOn):
            playerObj['rect'] = pygame.Rect((playerObj['x'] - camerax,
                                             playerObj['y'] - cameray - getBounceAmount(playerObj['bounce'], BOUNCERATE, BOUNCEHEIGHT),
                                             playerObj['size'],
                                             playerObj['size']))
            DISPLAYSURF.blit(playerObj['surface'], playerObj['rect'])

        for event in pygame.event.get():
            if event.type == QUIT:
                terminate()

            elif event.type == KEYDOWN:
                if event.key in (K_UP, K_w):
                    moveDown = False
                    moveUp = True
                elif event.key in (K_DOWN, K_s):
                    moveUp = False
                    moveDown = True
                elif event.key in (K_LEFT, K_a):
                    moveRight = False
                    moveLeft = True
                    if playerObj['facing'] == RIGHT:
                        playerObj['surface'] = pygame.transform.scale(L_Monster, (playerObj['size'], playerObj['size']))
                    playerObj['facing'] == LEFT
                elif event.key in (K_RIGHT, K_d):
                    moveLeft = False
                    moveRight = True
                    if playerObj['facing'] == LEFT:
                        playerObj['surface'] = pygame.transform.scale(R_Monster, (playerObj['size'], playerObj['size']))
                    playerObj['facing'] = RIGHT
                elif winMode and event.key == K_r:
                    return
            elif event.type == KEYUP:
                if event.key in (K_LEFT, K_a):
                    moveLeft = False
                elif event.key in (K_RIGHT, K_d):
                    moveRight = False
                elif event.key in (K_UP, K_w):
                    moveUp = False
                elif event.key in (K_DOWN, K_s):
                    moveDown = False 

                elif event.key == K_ESCAPE:
                    terminate()

        if not gameOverMode:
            if moveLeft:
                playerObj['x'] -= MOVERATE
            if moveRight:
                playerObj['x'] += MOVERATE
            if moveUp:
                playerObj['y'] -= MOVERATE
            if moveDown:
                playerObj['y'] += MOVERATE
            if (moveLeft or moveRight or moveUp or moveDown) or playerObj['bounce'] != 0:
                playerObj['bounce'] += 1

            if playerObj['bounce'] > BOUNCERATE:
                playerObj['bounce'] = 0 

        else:
            # game is over, show "game over" text
            DISPLAYSURF.blit(gameOverSurf, gameOverRect)
            if time.time() - gameOverStartTime > GAMEOVERTIME:
                return

        if winMode:
            DISPLAYSURF.blit(winSurf, winRect)
            DISPLAYSURF.blit(winSurf2, winRect2)

        pygame.display.update()
        FPSCLOCK.tick(FPS)

def getBounceAmount(currentBounce, bounceRate, bounceHeight):

    return int(math.sin( (math.pi / float(bounceRate)) * currentBounce ) * bounceHeight)

def getRandomOffCameraPos(camerax, cameray, objWidth, objHeight):
    # create a Rect of the camera view
    cameraRect = pygame.Rect(camerax, cameray, WINDOWWIDTH, WINDOWHEIGHT)
    while True:
        x = random.randint(camerax - WINDOWWIDTH, camerax + (2 * WINDOWWIDTH))
        y = random.randint(cameray - WINDOWHEIGHT, cameray + (2 * WINDOWHEIGHT))
        # create a Rect object with the random coordinates and use colliderect()
        # to make sure the right edge isn't in the camera view.
        objRect = pygame.Rect(x, y, objWidth, objHeight)
        if not objRect.colliderect(cameraRect):
            return x, y

def isOutsideActiveArea(camerax, cameray, obj):

    boundsLeftEdge = camerax - WINDOWWIDTH
    boundsTopEdge = cameray - WINDOWHEIGHT
    boundsRect = pygame.Rect(boundsLeftEdge, boundsTopEdge, WINDOWWIDTH * 3, WINDOWHEIGHT * 3)
    objRect = pygame.Rect(obj['x'], obj['y'], obj['width'], obj['height'])
    return not boundsRect.colliderect(objRect)        

def checkForQuit():
    for event in pygame.event.get(QUIT): # get all the QUIT events
        terminate() # terminate if any QUIT events are present
    for event in pygame.event.get(KEYUP): # get all the KEYUP events
        if event.key == K_ESCAPE:
            terminate() # terminate if the KEYUP event was for the Esc key
        pygame.event.post(event)

def drawFloor():
    #Open the image used for tiles and initialize N
    floorTile = pygame.image.load('tile.png')
    N = 0

    while (N < tilesNeeded):  
        DISPLAYSURF.blit(floorTile,((20 * N, (floorx + (TILESIZE/4)) - TILESIZE)), )
        DISPLAYSURF.blit(floorTile,(20 * N, (floorx + (TILESIZE/4))))
        N = N + 1

    #Updates the display
    pygame.display.flip()

def checkCollide():
    FLOOR_SURF = pygame.Rect( 0, (WINDOWHEIGHT - (TILESIZE * 2)), WINDOWWIDTH, WINDOWHEIGHT)

def terminate():
    pygame.quit()
    sys.exit()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:41:53.563

你得到你的精灵的“尾巴”的原因是因为你没有在开始绘制新帧之前清除屏幕。处理此问题的一种方法是在 runGame() 的开头输入类似以下内容：

```
DISPLAYSURF.fill(white) 
```

这将通过用白色覆盖所有内容来“清除”表面。当您开始为该帧绘制图像时，它们将被绘制在一个空白的白色表面上。需要注意的是，您需要重绘屏幕上的每个精灵，而不仅仅是在最后一帧中移动的精灵。

对于第一个问题，如果您要问如何缩放图像的大小，您可以使用 pygame.transform 中的 scale 函数

```
L_monster = pygame.transform.scale(L_monster, (500, 500)) 
```

这通过将给定表面转换为元组给定的新大小来创建一个新表面。

[http://www.pygame.org/docs/ref/transform.html#pygame.transform.scale](http://www.pygame.org/docs/ref/transform.html#pygame.transform.scale)

# magento - 错误 WSDL：SOAP-ERROR：解析 WSDL：无法从

> ID：15962046
> 
> 赞同：17
> 
> 时间：2013-04-12T02:20:54.507
> 
> 标签：magento, soap

我的问题很常见。我阅读了关于这个问题的几乎所有关于 stackoverflow 的主题，但仍然无法完成工作。我的代码是：

```
ini_set("soap.wsdl_cache", "0");
ini_set("soap.wsdl_cache_enabled", "0");
$proxy = new SoapClient('http://Myhostname/api/soap?wsdl'); 
```

我有这个错误：

```
Error WSDL: SOAP-ERROR: Parsing WSDL: Couldn't load from 
'http://Myhostname/api/soap?wsdl' : failed to load external entity 
"http://Myhostname/api/soap?wsdl" 
```

在浏览器中的 URL

```
http://Myhostname/api/soap?wsdl 
```

效果很好（返回一个 xml 响应）

我尝试使用此代码查看 PHP 是否可以访问此 URL：

```
if (file_get_contents('http://Myhostname/api/soap?wsdl') === false) {
    echo "ERROR: file_get_contents <br/>";
} 
```

它显示我的错误“错误：file_get_contents”，所以它不起作用。在论坛上，我看到要解决这个问题，我必须将主机名添加到操作系统“主机”文件中。所以我做到了。在我的主机文件中，我添加了这一行 127.0.0.1 Myhostname

但它仍然不起作用。然后我将代码中的 URL 更改为

```
http://localhost/Myhostname/api/soap?wsdl 
```

但它也不起作用。

我尝试了另一种在互联网上找到的解决方案。对某些人来说，它起作用了。在我的网址中，我更改了“？” 字符为 '.'。所以我的新网址变成了

```
http://localhost/Myhostname/api/soap.wsdl 
```

但它也不起作用。

我看到了[官方 SOAP 文档](http://www.php.net/manual/fr/soapclient.soapclient.php)！并尝试以不同的方式创建 SoapClient 对象（使用“proxy_host”和“proxy_port”等选项）。但这对我没有帮助。

这是我尝试解决这个问题的第二天，但我做不到。我正在实习，我没有很多经验，所以也许我没有尝试我找到正确的解决方案。也许有人可以帮忙。我会很高兴的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:53:15.413

Few steps to check

Have a ping to Myhostname. It would give the ip. Use ip instead and see

Check if the services are enabled `S0AP, php_openssl, openssl, curl`

Hope you would get it :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:14:06.197

我有类似的问题，我从 .htaccess 文件中取消注释 -MultiViews，然后从本地网站的 Apache 配置中解决它。

我的工作 Apache 配置是：

```
<Directory /var/www/>
        Options Indexes FollowSymLinks -MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
</Directory> 
```

您也可以尝试网址：

```
http://localhost/Myhostname/api.php?type=soap&wsdl 
```

如果您使用社区版。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-28T17:41:58.430

而不是*$proxy = new SoapClient( `'http://Myhostname/api/soap?wsdl'`);*
尝试*$proxy = new SoapClient(WSDLFILENAME);*
其中 WSDLFILENAME 是 WSDL 文件的操作系统名称。这具有减少一个客户端-服务器往返的额外好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-24T12:00:20.893

我在本地主机上尝试了`SOAP Web Services`它，它工作正常。无法对请求做出响应的原因`Magento`是它无法`SSL Certificates`在网站上验证启用。

我解决它的方法是允许自签名`SSL verification`：

```
$opts = [
    'http' =>
     [
         'header' => "Authorization: Bearer ".$token
        ],
'ssl' => [
    'allow_self_signed' => true , 
    'verify_peer' => false, 
    'verify_peer_name' => false]
];
$context = stream_context_create($opts); 
```

我希望它有所帮助。;)

# c# - 简单的绘制应用程序：在鼠标移动时引用 Cairo 上下文

> ID：15962051
> 
> 赞同：1
> 
> 时间：2013-04-12T02:21:38.077
> 
> 标签：c#, mono, gtk#, cairo

我正在尝试将 Cairo 与 GTK# 一起使用来创建一个简单的绘画应用程序。给我带来麻烦的功能是在两点之间画一条线。单击绘图区域后，应出现一条线，并跟随光标直到释放鼠标按钮，此时绘图区域更新，可以绘制另一条线。它应该是 MS Paint 等程序中熟悉的功能。

现在，[我被告知](http://www.mono-project.com/Mono.Cairo)在开罗执行此类更新的方法是使用开罗上下文`.Save();`和`.Restore()`方法来处理状态。问题是，除了创建它的事件处理程序之外，我找不到一种方法来继续在事件处理程序中引用相同的上下文，因此我在画线后恢复状态的所有尝试都没有成果。

在下面的最小（但仍然是一种巨大的，抱歉）工作代码示例中，非解决方案是在每个 Draw 上创建一个新的上下文。这给出了如下结果： ![绘画应用程序的当前状态](https://i.stack.imgur.com/AvvJ0.png)

笔（左侧）表现良好。这条线显然没有，因为移动鼠标后无法恢复到以前的状态，所以它们都留在屏幕上以形成如图所示的扇形图案。

```
using Gtk;
using Cairo;
using System;

public class Paint : Gtk.Window
{

    bool isDrawing = false;
    bool isDrawingLine = false;
    bool isDrawingWithPen = false;

    double Point_l1x;
    double Point_l1y;
    double Point_l2x;
    double Point_l2y;

    double Point_p1x;
    double Point_p1y;

    Button line;
    Button pen;

    static DrawingArea area;
    Cairo.Context ctx;

    void OnDrawingAreaExposed (object source, ExposeEventArgs args)
    {   
        DrawingArea area = (DrawingArea) source;
        ctx = Gdk.CairoHelper.Create (area.GdkWindow);

        ((IDisposable) ctx.Target).Dispose();
        ((IDisposable) ctx).Dispose ();
    }

    public void DrawImage ()
    {
        //Shouldn't this be referencing an external context?
        using (Cairo.Context ctx = Gdk.CairoHelper.Create (area.GdkWindow))
        {
            ctx.Color = new Cairo.Color (0, 0, 0);

            if(isDrawingLine)
            {
                ctx.MoveTo (new PointD (Point_l1x, Point_l1y));
                ctx.LineTo (new PointD (Point_l2x, Point_l2y));
                ctx.Stroke ();
            }

            else if(isDrawingWithPen)
            {
                ctx.Rectangle(Point_p1x, Point_p1y, 1, 1);
                ctx.Stroke();
            }
        }
    }

    public void LineClicked(object sender, EventArgs args)
    {
        isDrawingLine = true;
        isDrawingWithPen = false;
    }

    public void PenClicked(object sender, EventArgs args)
    {
        isDrawingLine = false;
        isDrawingWithPen = true;
    }

    void OnMousePress (object source, ButtonPressEventArgs args)
    {
        isDrawing = true;
        if (isDrawingLine)
        {
            Point_l1x = args.Event.X;
            Point_l1y = args.Event.Y;
        }
        else if (isDrawingWithPen)
        {
            Point_p1x = args.Event.X;
            Point_p1y = args.Event.Y;
        }
    }

    void OnMouseRelease (object source, ButtonReleaseEventArgs args)
    {
        isDrawing = false;
        DrawImage ();
    }

    void OnMouseMotion (object source, MotionNotifyEventArgs args)
    {
        if (!isDrawing)
        {
            return;
        }

        if (isDrawingLine)
        {
            Point_l2x = args.Event.X;
            Point_l2y = args.Event.Y;
        }
        else if (isDrawingWithPen)
        {
            Point_p1x = args.Event.X;
            Point_p1y = args.Event.Y;
        }
        DrawImage();
    }

    public Paint () : base("Painting application")
    {   
        area = new DrawingArea ();
        area.ExposeEvent += OnDrawingAreaExposed;

        area.AddEvents (
                (int)Gdk.EventMask.PointerMotionMask
                | (int)Gdk.EventMask.ButtonPressMask
                | (int)Gdk.EventMask.ButtonReleaseMask);

        area.ButtonPressEvent += OnMousePress;
        area.ButtonReleaseEvent += OnMouseRelease;
        area.MotionNotifyEvent += OnMouseMotion;

        DeleteEvent += delegate { Application.Quit(); };

        SetDefaultSize(500, 500);
        SetPosition(WindowPosition.Center);

        VBox vbox = new VBox();
        vbox.Add(area);
        HBox hbox = new HBox();

        line = new Button("Line");
        pen = new Button("Pen");
        hbox.Add(line);
        hbox.Add(pen);

        Alignment halign = new Alignment(1, 0, 0, 0);
        halign.Add(hbox);

        vbox.Add(hbox);
        vbox.PackStart(halign, false, false, 3);

        line.Clicked += LineClicked;
        pen.Clicked += PenClicked;

        Add(vbox);
        ShowAll();
    }

    public static void Main()
    {
        Application.Init();
        new Paint();
        Application.Run();
    }
} 
```

如果我修改 DrawImage 方法以引用 OnDrawingAreaExposed 中定义的 Context，整个事情就会崩溃，并提供我无法真正理解的堆栈跟踪：

```
Stacktrace:

at (wrapper managed-to-native) Cairo.NativeMethods.cairo_set_source_rgba (intptr,double,double,double,double) <0xffffffff>
at Cairo.Context.set_Color (Cairo.Color) <0x0002b>
at Paint.DrawImage () <0x000a3>
at Paint.OnMouseMotion (object,Gtk.MotionNotifyEventArgs) <0x001af>
at (wrapper runtime-invoke) <Module>.runtime_invoke_void__this___object_object (object,intptr,intptr,intptr) <0xffffffff>
at (wrapper managed-to-native) System.Reflection.MonoMethod.InternalInvoke (System.Reflection.MonoMethod,object,object[],System.Exception&) <0xffffffff>
at System.Reflection.MonoMethod.Invoke (object,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) <0x0018b>
at System.Reflection.MethodBase.Invoke (object,object[]) <0x0002a>
at System.Delegate.DynamicInvokeImpl (object[]) <0x001a3>
at System.MulticastDelegate.DynamicInvokeImpl (object[]) <0x0003b>
at System.Delegate.DynamicInvoke (object[]) <0x00018>
at GLib.Signal.ClosureInvokedCB (object,GLib.ClosureInvokedArgs) <0x0014f>
at GLib.SignalClosure.Invoke (GLib.ClosureInvokedArgs) <0x0002f>
at GLib.SignalClosure.MarshalCallback (intptr,intptr,uint,intptr,intptr,intptr) <0x0050b>
at (wrapper native-to-managed) GLib.SignalClosure.MarshalCallback (intptr,intptr,uint,intptr,intptr,intptr) <0xffffffff>
at (wrapper managed-to-native) Gtk.Application.gtk_main () <0xffffffff>
at Gtk.Application.Run () <0x0000b>
at Paint.Main () <0x00027>
at (wrapper runtime-invoke) object.runtime_invoke_void (object,intptr,intptr,intptr) <0xffffffff>

Native stacktrace:

        mono() [0x4961e9]
        mono() [0x4e6d1f]
        mono() [0x41dcb7]
        /lib/x86_64-linux-gnu/libpthread.so.0(+0xfcb0) [0x7f3fd2f07cb0]
        /usr/lib/x86_64-linux-gnu/libcairo.so.2(cairo_set_source_rgba+0x1) [0x7f3fcaaccc71]
        [0x41a28dbd] 
```

我是否在正确的轨道上，试图引用该上下文？Cairo Contexts 甚至可以这样工作吗？如果没有，我怎样才能让这条线不断地重新渲染？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:51:26.770

未来的访问者可能有兴趣知道我最终确实为这个问题拼凑了一个解决方案。注意委托的使用。结果如下：

截屏： ![工作应用程序](https://i.stack.imgur.com/UsN5h.png)

源代码：

```
using Gtk;
using Cairo;
using System;

public class Paint : Gtk.Window
{
    delegate void DrawShape(Cairo.Context ctx, PointD start, PointD end);

    ImageSurface surface;
    DrawingArea area;
    DrawShape Painter;
    PointD Start, End;

    bool isDrawing;
    bool isDrawingPoint;

    Button line;
    Button pen;

    public Paint() : base("Painting application")
    {
        surface = new ImageSurface(Format.Argb32, 500, 500);
        area = new DrawingArea();

        area.AddEvents(
            (int)Gdk.EventMask.PointerMotionMask
            |(int)Gdk.EventMask.ButtonPressMask
            |(int)Gdk.EventMask.ButtonReleaseMask);

        area.ExposeEvent += OnDrawingAreaExposed;
        area.ButtonPressEvent += OnMousePress;
        area.ButtonReleaseEvent += OnMouseRelease;
        area.MotionNotifyEvent += OnMouseMotion;
        DeleteEvent += delegate { Application.Quit(); };

        Painter = new DrawShape(DrawLine);

        Start = new PointD(0.0, 0.0);
        End = new PointD(500.0, 500.0);
        isDrawing = false;
        isDrawingPoint = false;

        SetDefaultSize(500, 500);
        SetPosition(WindowPosition.Center);

        VBox vbox = new VBox();
        vbox.Add(area);
        HBox hbox = new HBox();

        line = new Button("Line");
        pen = new Button("Pen");
        hbox.Add(line);
        hbox.Add(pen);

        Alignment halign = new Alignment(1, 0, 0, 0);
        halign.Add(hbox);

        vbox.Add(hbox);
        vbox.PackStart(halign, false, false, 3);

        line.Clicked += LineClicked;
        pen.Clicked += PenClicked;

        Add(vbox);

        Add(area);
        ShowAll();
    }

    void OnDrawingAreaExposed(object source, ExposeEventArgs args)
    {
        Cairo.Context ctx;

        using (ctx = Gdk.CairoHelper.Create(area.GdkWindow))
        {
            ctx.Source = new SurfacePattern(surface);
            ctx.Paint();
        }

        if (isDrawing)
        {
            using (ctx = Gdk.CairoHelper.Create(area.GdkWindow))
            {
                Painter(ctx, Start, End);
            }
        }
    }

    void OnMousePress(object source, ButtonPressEventArgs args)
    {
        Start.X = args.Event.X;
        Start.Y = args.Event.Y;

        End.X = args.Event.X;
        End.Y = args.Event.Y;

        isDrawing = true;
        area.QueueDraw();
    }

    void OnMouseRelease(object source, ButtonReleaseEventArgs args)
    {
        End.X = args.Event.X;
        End.Y = args.Event.Y;

        isDrawing = false;

        using (Context ctx = new Context(surface))
        {
            Painter(ctx, Start, End);
        }

        area.QueueDraw();
    }

    void OnMouseMotion(object source, MotionNotifyEventArgs args)
    {
        if (isDrawing)
        {
            End.X = args.Event.X;
            End.Y = args.Event.Y;

            if(isDrawingPoint)
            {
                using (Context ctx = new Context(surface))
                {
                    Painter(ctx, Start, End);
                }
            }
            area.QueueDraw();
        }
    }

    void LineClicked(object sender, EventArgs args)
    {
        isDrawingPoint = false;
        Painter = new DrawShape(DrawLine);
    }

    void PenClicked(object sender, EventArgs args)
    {
        isDrawingPoint = true;
        Painter = new DrawShape(DrawPoint);
    }

    void DrawLine(Cairo.Context ctx, PointD start, PointD end)
    {
        ctx.MoveTo(start);
        ctx.LineTo(end);
        ctx.Stroke();
    }

    void DrawPoint(Cairo.Context ctx, PointD start, PointD end)
    {
        ctx.Rectangle(end, 1, 1);
        ctx.Stroke();
    }

    public static void Main()
    {
        Application.Init();
        new Paint();
        Application.Run();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-20T13:47:32.690

删除事物的一种老派（大约 xlib）方法是将它们异或到屏幕上。然后再次执行完全相同的操作以擦除它们。我记得在位图图形中这样做。Cairo好像有xor，我没试过。[https://www.cairographics.org/operators/](https://www.cairographics.org/operators/)

我在 xlib 中有一个示例，位于[https://www.raspberrypi.org/forums/viewtopic.php?p=1317849](https://www.raspberrypi.org/forums/viewtopic.php?p=1317849) 您写入屏幕的所有坐标和值都需要保存在缓冲区中，这样您就可以完全做到同样的东西再次抹去。

# java - 使用 jar 时抛出异常

> ID：15962059
> 
> 赞同：0
> 
> 时间：2013-04-12T02:22:45.313
> 
> 标签：java

我在netbeans中创建了一个项目，使用SQLite作为DB。当我在netbeans中运行它时，当我使用“java -jar .jar”运行jar时它会完美运行它会抛出这个异常

> H:>java -jar Remote_PC_Manger.jar com.halorpm.main.MainForm 的 com.halorpm.main.LocalDB.checkAnonymous(LocalDB.java:74) 的线程“AWT-EventQueue-0”中的 java.lang.NullPointerException 异常。 initComponents(MainForm.java:172) 在 com.halorpm.main.MainForm.(MainForm.java:137) 在 com.halorpm.main.Core.(Core.java:32) 在 com.halorpm.main.Core $3。 run(Core.java:142) at java.awt.event.InvocationEvent.dispatch(Unknown Source) at java.awt.EventQueue.dispatchEventImpl(Unknown Source) at java.awt.EventQueue.access$200(Unknown Source) at java。 awt.EventQueue$3.run(Unknown Source) at java.awt.EventQueue$3.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1。doIntersectionPrivilege(Unknown Source) at java.awt.EventQueue.dispatchEvent(Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy （未知来源）在 java.awt.EventDispatchThread.pumpEvents（未知来源）在 java.awt.EventDispatchThread.pumpEvents（未知来源）在 java.awt.EventDispatchThread.run（未知来源）pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.run(Unknown Source)pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.run(Unknown Source)

```
MainForm.java

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.halorpm.main;

import java.awt.SystemTray;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.sql.SQLException;

/**
 *
 * @author Abhijith S
 */
public class MainForm extends javax.swing.JFrame {

    public String fullname;
    public String key;
    public int status;

    public MainForm() {

        Thread getinfo = new Thread() {

          @Override
          public void run() {

                try {

        // Send the request
        URL url = new URL("http://demiracles.com/halo/cgi/getmisc.php?uname="+Login.username+"&key=name");
        URL url1 = new URL("http://demiracles.com/halo/cgi/getmisc.php?uname="+Login.username+"&key=skey");
        URLConnection conn = url.openConnection();
        URLConnection conn1 = url1.openConnection();

        conn.setDoOutput(true);
      //  OutputStreamWriter writer = new OutputStreamWriter(conn.getOutputStream());

        //write parameters
       // writer.write(data);
      //  writer.flush();

        // Get the response
        StringBuilder answer = new StringBuilder();
        StringBuilder answer1 = new StringBuilder();
        BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        BufferedReader reader1 = new BufferedReader(new InputStreamReader(conn1.getInputStream()));
        String line;
        while ((line = reader.readLine()) != null) {
            //System.out.println(line);
            answer.append(line);
        }
        while ((line = reader1.readLine()) != null) {
            //System.out.println(line);
            answer1.append(line);
        }

       // writer.close();
        reader.close();
        reader1.close();

        //Output the response
        //System.out.println(answer.toString());
        fullname = answer.toString();
        key = answer1.toString();

        regname.setText(fullname);
        lic.setText(key);
        expire.setText("2018-November-20");

    } catch (MalformedURLException ex) {
        ex.printStackTrace();
    } catch (IOException ex) {
        ex.printStackTrace();
    }

          }

        };
        getinfo.start();

        /* Thread mainer = new Thread(){

                 public void run(){

                    System.out.println("out");

               while(true){
                try{
                                    System.out.println("sasasa");
                    URL url = new URL("http://demiracles.com/halo/cgi/java_checker.php?uname="+Login.username+
                                            "&pwd="+Login.password);
                    URLConnection urlcon = url.openConnection();
                    BufferedReader bf = new BufferedReader(new InputStreamReader(urlcon.getInputStream()));
                    String xresponse = bf.readLine();
        System.out.println("In ThreadCheck"+xresponse);
        new Functions(xresponse);
        break;

           }catch(Exception x){     

               System.out.println(x);

           }
                    }   

               }

            };
            mainer.start();

        */

        initComponents();

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        buttonGroup2 = new javax.swing.ButtonGroup();
        buttonGroup3 = new javax.swing.ButtonGroup();
        regname = new javax.swing.JLabel();
        jCheckBox1 = new javax.swing.JCheckBox();
        lic = new javax.swing.JLabel();
        expire = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel1 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setMinimumSize(new java.awt.Dimension(640, 480));
        setResizable(false);
        getContentPane().setLayout(null);
        getContentPane().add(regname);
        regname.setBounds(400, 40, 210, 20);

        jCheckBox1.setText("Anonymous");
        LocalDB ob = new LocalDB();
        int res = ob.checkAnonymous();
        if(res==1) {

            jCheckBox1.setSelected(true);

        }
        jCheckBox1.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                jCheckBox1ItemStateChanged(evt);
            }
        });
        jCheckBox1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jCheckBox1ActionPerformed(evt);
            }
        });
        getContentPane().add(jCheckBox1);
        jCheckBox1.setBounds(40, 190, 81, 23);
        getContentPane().add(lic);
        lic.setBounds(400, 70, 210, 20);
        getContentPane().add(expire);
        expire.setBounds(400, 100, 210, 20);

        jLabel2.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jLabel2.setText("Registered to : ");
        getContentPane().add(jLabel2);
        jLabel2.setBounds(310, 40, 90, 15);

        jLabel3.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jLabel3.setText("License         : ");
        getContentPane().add(jLabel3);
        jLabel3.setBounds(310, 70, 90, 15);

        jLabel4.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jLabel4.setText("Expire on      :");
        getContentPane().add(jLabel4);
        jLabel4.setBounds(310, 100, 90, 15);

        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/halorpm/main/bg_main.png"))); // NOI18N
        getContentPane().add(jLabel1);
        jLabel1.setBounds(0, 0, 640, 480);

        pack();
    }// </editor-fold>

    private void jCheckBox1ActionPerformed(java.awt.event.ActionEvent evt) {                                           

    }                                          

    private void jCheckBox1ItemStateChanged(java.awt.event.ItemEvent evt) {                                            

  FileManager ob = new FileManager();
  LocalDB db = new LocalDB();

        if(jCheckBox1.isSelected()== true) {

           db.addUpdate(1);

           ob.createFile();
            this.setVisible(false);

            if(Core.appStatus==0) {

                Core.runTray();

            }

        }else {

            db.addUpdate(0);
            ob.deleteFile();

        }

    }                                           

    public  void viewDisplay() {

        setVisible(true);

    }

    /**
     * @param args the command line arguments
     */

    // Variables declaration - do not modify
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.ButtonGroup buttonGroup2;
    private javax.swing.ButtonGroup buttonGroup3;
    private javax.swing.JLabel expire;
    protected javax.swing.JCheckBox jCheckBox1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel lic;
    private javax.swing.JLabel regname;
    // End of variables declaration
}

enter code here
enter code here

LocalDB.java

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.halorpm.main;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

/**
 *
 * @author Abhijith S
 */
public class LocalDB {

    private Connection con;
    protected Statement st;
  //  protected ResultSet res;
    int status;
    String uname;
    String pass;

    public LocalDB() {

            try {
         // sqlite driver
  Class.forName("org.sqlite.JDBC");
  // database path, if it's new database,
  // it will be created in the project folder
  con = DriverManager.getConnection("jdbc:sqlite:halodb.db");

  try{

        st = con.createStatement();
       // String qry3 = "UPDATE userlog SET anonymous=1";

      // 

        //System.out.println("done");

        }catch(SQLException e) {

        }

        }catch(ClassNotFoundException | SQLException e) {

        }

    }

    public int checkAnonymous(){

        try {

            String qry1 = "SELECT * FROM userlog";

      // st.executeUpdate(qry3);
      ResultSet  res = st.executeQuery(qry1);
         while(res.next()) {

         status = res.getInt("anonymous");

         System.out.println("Anonymous = "+status);

         }

    }catch(SQLException e){

    }

    return status;
    }
   public void addUpdate(int a) {

        try {
                // String table = "CREATE  TABLE userlog (uname VARCHAR, pass VARCHAR, anonymous INTEGER, normal INTEGER)";
                 //String qry = "INSERT INTO userlog values('abi','12345',0,1)";
                 String qry3 = "UPDATE userlog SET anonymous="+a;
                 st.executeUpdate(qry3);

             }catch(SQLException e) {

                 e.printStackTrace();

             }

   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:50:04.143

当您使用`-jar`命令行选项时，它会忽略 CLASSPATH。我怀疑您的 Netbeans 项目具有所有依赖项，当您转到命令行时这些依赖项都丢失了。尝试再次运行：

```
java -cp %CLASSPATH%;Remote_PC_Manger.jar <main-class> 
```

在 CLASSPATH 中设置所有库依赖项（如 SQLite）（或者也将它们直接添加到命令行）。

**编辑：**

仔细观察后，我认为您的异常（LocalDB 中的第 74 行）似乎是这一行：

```
ResultSet  res = st.executeQuery(qry1); 
```

这意味着`st`为空 - 这意味着`st = con.createStatement();`进一步失败。您正在捕获这些异常并且没有对它们做任何事情（正如 Hovercraft 所指出的）。至少记录它们。我想你会发现你得到的异常是由于早期的问题。

我怀疑当你从罐子里跑出来时，这条线`Class.forName("org.sqlite.JDBC");`正在抛出。`ClassNotFoundException`

# asp.net - 如何在 BeginForm() 中发送列表？

> ID：15962063
> 
> 赞同：1
> 
> 时间：2013-04-12T02:23:11.240
> 
> 标签：asp.net, asp.net-mvc-3, razor

有人可以帮我解决这个问题吗？在页面加载之前的视图底部，我创建了一组复选框，如下所示：

```
foreach (var course in courses.Select((x, i) => new { Data = x, Index = i }))
 {
  int currentIndex = course.Index;
  String selectedday = "";
  String selectedteacher = "";

  if (cnt++ % 4 == 0)
   {
    @:  </tr> <tr>
   }
  @: <td >  
     <br /><br /><br />
 <input type="checkbox"  id="checkbox"
                       name="selectedCourses"  
                      value="@course.Data.CourseID"  
                   @(Html.Raw(course.Data.Assigned ? "checked=\"checked\"" : ""))
                   /> 
```

我使用相同的循环将分配的状态添加到这样的列表中：

```
bool theNewString=course.Data.Assigned ;
String a=theNewString.ToString();
assignedCourses.Add(a); 
```

我在页面顶部定义了一个列表变量，以便可以像这样在表单范围内访问它：

```
 @{List<String> assignedCourses =new List<String>(); } 
```

现在我想将该变量发送到控制器，这就是事情变得混乱的地方。如果我发送这样的字符串，它可以正常工作：

剃刀标记

```
String postedData = "literalString";
@using (Html.BeginForm("Action", "Controller", new { assigned = @ postedData })) 
```

行动

```
[HttpPost]
public ActionResult Edit(int id,List<String> assigned){} 
```

现在如果我试试这个：

```
@{List<String> assignedCourses =new List<String>(); }
@using (Html.BeginForm("Action", "Controller", new { assigned = @assignedCourses })) 
```

并且没有任何东西通过控制器。这就像列表在发布之前被清空。如何将我的列表发送到控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:31:25.003

我认为您尝试使用列表为表单创建查询字符串/回发 url 的方式是错误的，并且不会生成格式正确的字符串。

也许尝试这样的事情：

```
@{

    List<string> ExampleList = new List<string>();
    ExampleList.Add("True");
    ExampleList.Add("False");

    string param = string.Join("&", ExampleList.ToArray());

    }
@using (Html.BeginForm("index", "home", new { @someparam = (new HtmlString(param)) })) { } 
```

这将要求您在操作方法接收到单个字符串时将其拆分为一个数组。

或者，您可以尝试使用`RouteValueDictionary`而不是列表，但这不支持重复键。

同样对于复选框创建尝试使用@Html.CheckBox()，因为这将自动创建第二个隐藏输入设置为false。HTML 表单在未选中时不会回发复选框值，因此第二个具有相同名称的隐藏输入将被发回，您将知道它已被取消选中或未选中。当仅回发具有“False”值的隐藏输入时，MVC 会将相同表单键/输入名称的“True, False”值解释为 True 和 False。

# java - Xtext - 内容提议匹配上下文缩进

> ID：15962065
> 
> 赞同：4
> 
> 时间：2013-04-12T02:23:20.170
> 
> 标签：java, eclipse, xtext

使用 XText，有没有办法让文本与内容提议一起添加以匹配它被插入的格式（当前缩进）？

我现在应该做什么：

1）创建将用于内容提案的模型

2）我得到内容提议字符串：

`EObject myelement`生成的代码可以插入到我的 Xtext 文档中。

```
class MyContentProposalProvider extends AbstractContentProposalProvider
{

 private void acceptProposal(
   ContentAssistContext context,
   ICompletionProposalAcceptor acceptor,
   ElementContentProposal contentProposal,
   EObject myElement) {
        final String proposalString = context.getResource().getSerializer().serialize(myElement);
        final String proposalDisplayCode = proposalString.replaceAll("(\\r|\\n)", "");
        final ICompletionProposal completionProposal = createCompletionProposal(proposalString,
                    String.format("%s : %s", proposalDisplayCode, p.getDescription()), null,
                    context);
        acceptor.accept(completionProposal);
  }
} 
```

3) 在 Xtext 编辑器中选择一个提案。

4）缩进很远。一切都向左走。

5）到目前为止，我认为解决此问题的唯一方法是在提案后格式化整个文档；但是，这可能会产生不必要的副作用。

有没有办法让上面生成的提议字符串的缩进与提议的上下文一致？（这意味着，从首选项中保留缩进设置，例如空格而不是制表符）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-25T15:26:27.013

在 Xtext 2.9 中，序列化程序将能够产生格式化输出。

# asp.net - Gridview_SelectedIndexChanged 在刷新页面时持续存在？

> ID：15962066
> 
> 赞同：0
> 
> 时间：2013-04-12T02:23:31.140
> 
> 标签：asp.net, gridview

我有一个gridview，当我选择一行时，Gridview_SelectedIndexChanged 中的代码将发生。但是，我注意到当我刷新时，调试器仍然进入这个方法？因此，当我刷新或返回页面时，就像用户单击了他离开的行一样。这是我的 .aspx gridview 代码：

```
 <asp:GridView ID="gridview1" CellPadding="8" runat="server" AllowPaging="True"
    AutoGenerateColumns="False" DataSourceID="testdb" onclick="RowCommand" 
    onselectedindexchanged="MsgInbox_SelectedIndexChanged" PageSize="25" 
    AllowSorting="True" OnRowCreated="Gridview_RowCreated" 
    OnRowDataBound =   "MsgInbox_RowDataBound" DataKeyNames = "primaryKey" 
```

# kineticjs - Kinetic JS - 加载灰度图像

> ID：15962069
> 
> 赞同：0
> 
> 时间：2013-04-12T02:24:15.433
> 
> 标签：kineticjs, grayscale

我正在尝试按照此示例加载灰度图像[http://www.html5canvastutorials.com/advanced/html5-canvas-grayscale-image-colors-tutorial/](http://www.html5canvastutorials.com/advanced/html5-canvas-grayscale-image-colors-tutorial/)。由于我的舞台有许多其他对象，我尝试使用以下脚本：

```
var dImage1 = new Kinetic.Image({
                drawFunc: function (canvas) {
                    var context2 = canvas.getContext();
                    var x = 0;
                    var y = 0;
                    context2.drawImage(imageObj, x, y);
                    var imageData = context2.getImageData(x, y, imageObj.width, imageObj.height);
                    var data = imageData.data;

                    for (var i = 0; i < data.length; i += 4) {
                        var brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];
                        data[i] = brightness;
                        data[i + 1] = brightness;
                        data[i + 2] = brightness;
                    }
                    context2.putImageData(imageData, x, y);
                }
            });
            layer1.add(dImage1);
            stage.add(layer1);

            var imageObj = new Image();
            imageObj.onload = function () {
                drawImage(this);
            };
            imageObj.src = .....; 
```

我收到了这个错误：TypeMismatchError。我会很感激你的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:54:10.237

我在您的代码中看到了几个问题...

首先，即使规范说它是可选的，您也需要指定上下文模式（“2d”）

```
// must specify "2d"

var context2 = canvas.getContext("2d"); 
```

其次，您需要在 Kinetic.Image 中使用之前完全加载您的图像

所以把 Kinetic.Image 的创建放在一个函数中，在 imageObj.onload 中调用：

```
function makeKineticImage(){

    var dImage1 = new Kinetic.Image({
        drawFunc: function (canvas) {
            var context2 = canvas.getContext("2d");
            var x = 0;
            var y = 0;
            context2.drawImage(imageObj, x, y);
            var imageData = context2.getImageData(x, y, imageObj.width, imageObj.height);
            var data = imageData.data;

            for (var i = 0; i < data.length; i += 4) {
                var brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];
                data[i] = brightness;
                data[i + 1] = brightness;
                data[i + 2] = brightness;
            }
            context2.putImageData(imageData, x, y);
        }
    });
    layer1.add(dImage1);
}

stage.add(layer1);

// you must create your Kinetic.Image AFTER your image is loaded

var imageObj = new Image();
imageObj.onload = function () {
    makeKineticImage();
};
imageObj.src = .....; 
```

# c# - c#中RichtextBox中添加的控件，但不能与其他文本一起滚动

> ID：15962071
> 
> 赞同：1
> 
> 时间：2013-04-12T02:24:19.877
> 
> 标签：c#, richtextbox

我在我的程序中使用 RichTextbox 以 c 格式显示多行字符串。我还需要添加可点击的控件，如按钮、标签等。我可以通过以下网址在 RichTextBox 中正确添加控件：

[http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/33dd0de0-1e30-4f68-a3e2-7b4b2f2170af/](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/33dd0de0-1e30-4f68-a3e2-7b4b2f2170af/)

```
Button b = new Button();
b.Text = "123";
b.Size = new Size(30, 30);
b.Location = new Point(50, 50);
b.Click += delegate(object sender, EventArgs e)
{
    this.richTextBox1.Text += "123";
};
this.richTextBox1.Controls.Add(b); 
```

但是当我滚动 RichTextBox 时，控件不会随着文本一起移动。有什么方法可以移动控件以及文本？谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:41:15.157

这是不正确的。您对这段代码所做的只是将一个控件添加到充当容器的 RTB 中。它不是下面的 RTF 文档的一部分。

您可以在其中绘制按钮......通过使用一些 Shape-Drawing RTF。[我将向您指出如何做到这一点的 RTF 规范。](http://www.biblioscape.com/rtf15_spec.htm)

但是，至于将点击事件连接到那些 RTF 按钮。不幸的是，我不知道。

（PS，为此您最好使用 WPF `FlowDocument`，这应该可以满足您的需求，但需要更多的学习）

# c++ - C++ 函数返回一个向量/字符串，但不是一个数组

> ID：15962079
> 
> 赞同：1
> 
> 时间：2013-04-12T02:25:16.843
> 
> 标签：c++, function, vector

我读过这个问题“[为什么 C++ 不支持返回数组的函数？](https://stackoverflow.com/questions/5157439/why-doesnt-c-support-functions-returning-arrays) ”。据说当我们试图从这个函数外部（通过返回值）访问数组时，我们遇到了一个问题，因为我们试图访问不在您正在使用的范围内的内存（函数调用的堆栈）。

当我们返回在函数内部声明的 std::string 或 std::vector 或 C++ 制作字符串或向量的副本并将副本返回给调用者以使字符串或向量不超出范围。

```
vector<int> foo(const vector<int> a)
{
  vector<int> b = a;
  return b;
} 

int main()
{
   vector<int> a;
   vector<int> c = foo(a);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:29:20.600

它正在制作 std::vector 对象的副本。std::vector 用于存储其数据的内存在堆上分配（并且也被复制）。

（一些编译器优化意味着副本并不总是在幕后发生；例如，在您的示例代码中，我认为大多数编译器将从 to 复制`a`到`b`inside `foo()`，但`b`将成为`c`in`main()`而不是再次被复制。）

进一步阅读：[http](http://en.wikipedia.org/wiki/Copy_elision) ://en.wikipedia.org/wiki/Copy_elision和[http://en.wikipedia.org/wiki/Return_value_optimization](http://en.wikipedia.org/wiki/Return_value_optimization) （感谢 millsj 的建议）更有效的 C++ 的第 20 条，Scott Meyers，也涵盖了这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T02:30:42.243

是的，在您的示例中，它将调用复制构造函数进行复制，原始副本将超出范围，但返回的副本不会并且可用于对其进行操作，例如分配给`main`. 由于现在编译器会进行返回值优化[RVO](http://en.wikipedia.org/wiki/Return_value_optimization)或命名返回值优化，因此该成本已降至最低。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T02:44:42.237

添加到其他人已经提到的内容。

**当优化开启时：** NRVO 或 RVO 确保返回值是就地计算的，而不是复制回调用者。

**当所有优化都关闭时：**返回一个向量或一个字符串就像返回一个对象（具体来说，一个容器类型的对象，其大小对于编译器来说是已知的）。因为，编译器知道返回对象的大小，所以它有足够的信息来为按值复制分配所需的堆栈空间。

如果您尝试返回一个数组（任何类型），编译器如何知道要在堆栈上分配多少大小？是否应该强制 C++ 返回一个固定大小的数组？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T02:50:50.017

返回一个对象将触发一个复制构造函数具有临时向量对象，该对象将作为复制构造函数分配给 b。源对象超出范围后将被销毁。

大多数现代编译器都有一种称为“返回值优化”（简称 RVO）的优化。C++11 RValue 引用允许保证 ROV 的向量实现。

# java - 如何制作Java反编译器？

> ID：15962081
> 
> 赞同：-3
> 
> 时间：2013-04-12T02:25:21.740
> 
> 标签：java, decompiling, decompiler

作为某个时间点的一个项目，我想制作自己的 Java 反编译器来将字节码转换回纯文本。

我用谷歌搜索了一些可以让我这样做的 API，但我找不到任何 API。

所以我的问题是：**如何反编译类文件？**
如果有 API 但我错过了，请告诉我。

*我知道这本书的问题是不受欢迎的，但是您认为[Godfrey Nolan 的《反编译 Java 语言》](https://rads.stackoverflow.com/amzn/click/com/1590592654)是一个很好的起点吗？*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T03:02:35.597

> 所以我的问题是：如何反编译类文件？

*   通过编写大量的 Java 代码来实现反编译器……或者
*   通过从现有的开源反编译器开始并对其进行修改。（但您需要了解并遵守许可证......）

这些步骤之前需要进行背景研究/阅读以了解领域、制定要求、设计等。这超出了 SO Question 的范围。

> 如果有 API 但我错过了，请告诉我。

AFAIK，没有。

但是您应该能够找到其他形式的源代码。（任何人都猜测它的可重用性。但是，嘿，这是你的项目。）

（皱眉！）

我没有读过那本书，但它可能值得一读，特别是如果学习的唯一选择是逆向工程现有代码库。尝试去您最喜欢的在线书店，阅读评论、ToC 等等……然后自己决定是否值得购买。

# jquery - jquery 每个都不能正常工作

> ID：15962088
> 
> 赞同：2
> 
> 时间：2013-04-12T02:26:34.017
> 
> 标签：jquery, google-maps

我正在尝试遍历一个集合并尝试在循环中设置一个全局变量。由于某种原因，循环在其他代码完成执行后执行。

样本

在就绪函数之外声明的是

```
var lt1,lt2; 
```

循环

```
lt1="opp";
$('#map_block').gmap().bind('init', function(ev, map) {
    $.each(places,function(i, val) {
        lt2 = val['h_longitude'];   
        lt1 = (val['h_latitude']);
        clientPosition1 = new google.maps.LatLng(val['h_latitude'], val['h_longitude']);  
        console.log(lt1);
        $('#map_block').gmap('addMarker', {'position': clientPosition1 , 'bounds': false, 'icon':hicon }).click(function() {$('#map_block'). gmap('openInfoWindow', {'content':' Test'});
    });
});
console.log(lt1); 
```

控制台显示如下

```
opp
41.222
42.4455
43.5566 
```

似乎循环在最后执行代码之后执行`console.log(lt1)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:31:11.787

这是因为地图是异步加载的。“当地图完全初始化（有边界）时，它将触发'init'事件。” [来源](https://code.google.com/p/jquery-ui-map/wiki/jquery_ui_map_v_3_sample_code)

结果，您的第一个输出是底部的 console.log ，结果为`opp`. 稍后，地图被加载，并触发 init 事件，执行回调匿名函数。该函数使用定义的`each`循环进行迭代并输出其结果。这就是为什么你会看到事件发生的顺序。

如果您需要在 init 之后执行代码，请考虑在 init 回调中调用的函数中执行该代码。

# iphone - 如何在 2 个 UIViewControllers 上使用自动调整大小？

> ID：15962090
> 
> 赞同：-3
> 
> 时间：2013-04-12T02:26:41.333
> 
> 标签：iphone, ios, uiview, uiviewcontroller

我有 2`UIViewController`秒：

```
UIViewControllers1
UIViewControllers2 
```

`UIViewControllers2.view`作为 subView 添加到`UIViewControllers1.view`.

问题是在调整大小`UIViewControllers2.view`时不想自动`UIViewControllers1.view`调整大小（`UIViewControllers1 setFrame:frame`）。

```
[UIViewControllers1.view setAutoresizesSubViews:YES]
[UIViewControllers1.view setAutoResizeMask:(UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight)]
[UIViewControllers1.view addSubview:UIViewControllers2.view]; 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:31:37.500

好吧，部分问题在于这是非法的：

```
[UIViewControllers1.view addSubview:UIViewControllers2.view]; 
```

你绝不能随意地将一个视图控制器的视图添加到另一个视图控制器的视图中。只有一种方法可以在内置的父子结构之外为您执行此操作（UINavigationController、UITabBafController、UIPageViewController），那就是当您创建*自己的*精心定制的父子结构时 - 您不这样做。我的书中描述了这样做所需的架构：

[http://www.aeth.com/iOSBook/ch19.html#_container_view_controllers](http://www.apeth.com/iOSBook/ch19.html#_container_view_controllers)

需要明确的是，将视图添加到另一个视图没有任何问题！让视图来来去去的能力对于 iOS 来说是至关重要的。问题是你不能将*视图控制器的视图*添加到另一个视图中，除非在父子视图控制器架构下，内置或自定义。

# python - 在 django 模型中投射对象

> ID：15962093
> 
> 赞同：1
> 
> 时间：2013-04-12T02:27:17.643
> 
> 标签：python, django

我正在使用具有以下代码的 models.py 制作一个 django 项目：

```
class Record(models.Model):
    id = models.AutoField(primary_key=True)

class TTAMRecord(Record):
    client = models.ForeignKey(TTAMClient)

class TTAMClient(models.Model):
      ...

class Account(models.Model):
     records = models.ManyToManyField(Record)
      ... 
```

我还有以下代码可以将 a 插入`TTAMRecord`到a`records`中`Account`：

```
account = Account.objects.get(...)
client = TTAMClient.objects.create(...)
record = TTAMRecord.objects.create(..., client = client, ...)
account.records.add(record) 
```

我想做（但不能）是在帐户的记录对象中调用客户；例如：

```
account = Account.objects.get(...)
for record in account.records.all():
      client = record.client
         ... 
```

但是，如果我不允许这样做，因为`record`这里存储为`Record`（没有客户端）类型而不是`TTAMRecord`（有客户端）类型......

知道如何投射物体吗？我想使用更通用`Record`的而不是`TTAMRecord`用于此处未说明的某些目的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:36:36.083

由于`Record`不是抽象模型，它与其他模型一样有自己的表和生命周期。但是，您可以将相应的客户端对象访问为`record.ttamclient`，因此您可以将您的行更改为

```
account = Account.objects.get(...)
for record in account.records.all():
    client = record.ttamclient
    ... 
```

但是，如果您有多个派生类，这会有点麻烦。在这种情况下，您必须知道您指的是哪个派生类并使用相应的属性名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:36:05.097

如果我理解您的“演员”概念，它将不会按照您描述的方式工作。

但是，要使模型继承起作用，您需要使用[抽象模型（请参阅文档）](https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance)

```
class Record(models.Model):
    # Some generic fields
    class Meta:
        abstract = True

class TTAMRecord(Record):
    client = models.ForeignKey(TTAMClient) 
```

如果您需要两者`Record`并`TTAMRecord`存储在其中`Account`，则需要使用多态关系，在 Django 中它被称为[通用关系（请参阅文档）](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#id1)

您将需要一个中间模型来存储这些通用关系。所以，基本上你会有一个`AccountRecord`和一个`Account`模型：

```
class AccountRecord(models.Model):
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')

class Account(models.Model):
    records = models.ManyToManyField(AccountRecord) 
```

所以你可以这样做：

```
account = Account.objects.get(...)
for record in account.records.all():
    record_content = record.content_object
    if isinstance(record_content, TTAMRecord):
        client = record_content.client
    else:
        # No client available 
```

# php - Jquery.ajax() 抛出错误

> ID：15962094
> 
> 赞同：0
> 
> 时间：2013-04-12T02:27:27.327
> 
> 标签：php, jquery, ajax

试试这个链接：[http ://humberinteractive.com/2013/api/index.php?fname=keo](http://humberinteractive.com/2013/api/index.php?fname=keo)

您可以看到它使用 $_GET['fname'] 并打印出我需要的内容。

我试过了：

```
$.ajax({
    type: 'GET',
    url: 'http://humberinteractive.com/2013/api/index.php?fname=keo',
    success: function(data) {
        alert(data);
    }
}); 
```

但它不起作用...

jsfiddle：http: [//jsfiddle.net/3V8VP/](http://jsfiddle.net/3V8VP/)

帮助帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:48:01.330

我不知道如何评论和回复你。但这绝对是一些原产地政策。

以下消息是 Chrome 控制台中显示的内容。

XMLHttpRequest 无法加载[http://humberinteractive.com/2013/api/index.php?fname=keo](http://humberinteractive.com/2013/api/index.php?fname=keo)。Access-Control-Allow-Origin 不允许来源[http://fiddle.jshell.net 。](http://fiddle.jshell.net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:32:42.420

在您的 Fiddle 中，它失败了，因为不允许跨域源 ajax 请求。一种常见的解决方法是改用 JSONP。如果您的最终应用位于同一个域中，这将不是问题。JSONP 代码如下所示：

```
<?php

  $data = array("some" => "data"); // make this part yourself
  $callback_name = $_REQUEST["callback"];

  echo $callback_name . "(" . encode_json($data) . ")";

?> 
```

其次，数据格式不可用。要将数据从 PHP 传递到 Javascript，您应该使用 JSON。使用 php，将数组/对象转换为 JSON 格式的函数是[json_encode](http://php.net/manual/fr/function.json-encode.php)。

最后，确保在使用 JSON 对象回答时发送正确的 mime 类型。`header()`（具有正确参数的PHP 函数应该可以）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T02:32:56.033

如果您在不同的域上执行此操作，它可能会被阻止为同源策略。

那么您可以尝试使用 JSONP 来执行此操作。

通过这种方式，指定`dataType: "jsonp"`ajax 方法的参数，然后 jquery 将为您的成功方法创建一个别名，`xxxxxxxx`并且 AJAX 请求将使用参数发送`callback=xxxxxxxxxx`。

在服务器端，您需要捕获回调名称，并输出与现在使用回调名称相同的 json 数据`xxxxxxxxx({....})`

最后，您的客户端将直接运行此输出。

例如：

js：

```
$.ajax({
    type: 'GET',
    dataType: 'jsonp',
    url: 'http://humberinteractive.com/2013/api/index.php?fname=keo',
    success: function(data) {
        alert(data);
    }
}); 
```

服务器端，例如php：

```
<?php
    // some logic ......
    $json_string = encode_json($data_you_wanna_output);
    echo $_GET['callback'] ."(". $json_string .")";
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T02:37:21.257

尝试这个：

```
$.ajax({type: "POST", 
         url: 'http://humberinteractive.com/2013/api/index.php', 
        data: {'fname': 'keo'}
    }).done(function( data) {alert(data);}); 
```

# embedded - 板级支持包

> ID：15962098
> 
> 赞同：0
> 
> 时间：2013-04-12T02:27:52.467
> 
> 标签：embedded, windows-ce

目前我们的 BSP 是使用 Visual Studio 2005 构建的。我想至少更新它以使用 VS 2010，最好是 2012 年。我找不到任何可以让我这样做的东西。我尝试将项目升级到 VS 2008，但无法加载项目。我想知道是否有人有一些想法，或者至少可以为我指出正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:44:42.280

**Visual Studio 2008**确实支持 Platformbuilder 插件和为 Win CE 创建应用程序，但是导入向导并不完美，您可能需要手动更改一些设置。

**Visual Studio 2010**不支持为 Win CE 创建 BSP 或应用程序。

**Visual Studio 2012**将支持为 Windows Embedded Compact 2013 创建 BSP 和应用程序。它还包括一个新的更快版本的 .Net Compact Framework。

[http://blogs.msdn.com/b/windows-embedded/archive/2012/11/14/windows-embedded-compact-v-next-uncovered.aspx](http://blogs.msdn.com/b/windows-embedded/archive/2012/11/14/windows-embedded-compact-v-next-uncovered.aspx)

[http://channel9.msdn.com/Events/Visual-Studio/Visual-Studio-2012-Virtual-Launch/Visual-Studio-2012-support-for-Windows-Embedded-Compact](http://channel9.msdn.com/Events/Visual-Studio/Visual-Studio-2012-Virtual-Launch/Visual-Studio-2012-support-for-Windows-Embedded-Compact)

# c - 在C中生成范围内的随机整数值

> ID：15962102
> 
> 赞同：-1
> 
> 时间：2013-04-12T02:28:27.737
> 
> 标签：c, random, numbers, integer, generator

如何在 C 语言中生成一个范围（在本例中为 1-12，包括 1 和 12）之间的随机整数值？

我已经阅读了有关播种 (srand()) 和在一定范围内使用 rand() 的信息，但不确定如何去做。

编辑：这是我到目前为止所拥有的

```
# include <stdio.h>
# include <stdlib.h>
# include <time.h>

// Craps Program
// Written by Kane Charles
// Lab 2 - Task 2

// 7 or 11 indicates instant win
// 2, 3 or 12 indicates instant los
// 4, 5, 6, 8, 9, 10 on first roll becomes "the point"
// keep rolling dice until either 7 or "the point is rolled"
//      if "the point" is rolled the player wins
//      if 7 is rolled then the player loses

int wins = 0, losses = 0;
int r, i;
int N = 1, M = 12;
int randomgenerator();

main(void){

  /* initialize random seed: */
  srand (time(NULL));
  /* generate random number 10,000 times: */
  for(i=0; i < 10000 ; i++){
     int r = randomgenerator();
     if (r = 7 || 11) {
        wins++;
     }
     else if (r = 2 || 3 || 12) {
        losses++;
     }
     else if (r = 4 || 5 || 6 || 8 || 9 || 10) {
        int point = r;
        int temproll;
        do
        {
            int temproll = randomgenerator();

        }while (temproll != 7 || point);

        if (temproll = 7) {
            losses++;
        }
        else if (temproll = point) {
            wins++;
        }
     }
  }
    printf("Wins\n");
    printf("%lf",&wins);
    printf("\nLosses\n");
    printf("%lf",&losses);
}

int randomgenerator(){
    r = M + rand() / (RAND_MAX / (N - M + 1) + 1);
    return r;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:30:22.323

简单的方法是

```
#include <stdlib.h>
#include <sys/time.h>

int main(void)
{
    struct timeval t1;
    gettimeofday(&t1, NULL);
    srand(t1.tv_usec * t1.tv_sec);

    int a = 1, b = 12;

    int val = a + (b-a) * (double)rand() / (double)RAND_MAX + 0.5;

    return 0;
} 
```

编辑，因为有人问：您确实必须使用浮点运算才能使其正确（或尽可能正确地考虑`rand()`到它们的限制）。任何纯粹依赖整数运算并且`rand()`必须使用`\`or的解决方案`%`，当这种情况发生时，您将得到舍入错误——其中 c 和 d 被声明`int`并且 c = 5 和 d = 2，例如 c/d == 2和 d/c == 0。当从一个范围进行采样时，发生的情况是在将范围压缩`[0, RAND_MAX]`到 时`[a, b]`，您必须进行某种除法运算，因为前者比后者大得多。然后舍入会产生偏差（除非你真的很幸运并且事情平分秋色）。不是一个真正彻底的解释，但我希望能传达这个想法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T02:33:27.630

你应该使用：[M + rand() / (RAND_MAX / (N - M + 1) + 1)](http://c-faq.com/lib/randrange.html)

不要使用`rand() % N`（它试图返回从 0 到 N-1 的数字）。它很差，因为许多随机数生成器的低位是非随机的。（[见问题 13.18。](http://c-faq.com/lib/notveryrand.html)）

示例代码：

```
#include <stdio.h>      /* printf, scanf, puts, NULL */
#include <stdlib.h>     /* srand, rand */
#include <time.h>       /* time */
int main ()
{
  int r, i;
  int M = 1,
      N = 12;
  /* initialize random seed: */
  srand (time(NULL));

  /* generate number between 1 and 12: */
  for(i=0; i < 10 ; i++){ 
     r = M + rand() / (RAND_MAX / (N - M + 1) + 1);
     printf("\n%d", r);
  }
  printf("\n") ;
  return EXIT_SUCCESS;
} 
```

它在[codepad](http://codepad.org/zfAyc24z)工作。

# html - 无法防止背景被掩盖

> ID：15962105
> 
> 赞同：0
> 
> 时间：2013-04-12T02:28:43.390
> 
> 标签：html, css

我正在为学校做一个项目，我无法让我的背景不被掩盖。在 div 标签内，我有两列（左和右） 如果我编辑右列中的文本，它会很好地调整背景，但是如果我编辑左列中的文本，它会溢出背景并进入页脚。如果需要，我有代码，关于我的 html/css 可能有什么问题的任何建议？

这是html

```
 <!DOCTYPE html>
<html>

<head>

<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>///</title>
<link href="css/default.css" rel="stylesheet" type="text/css" />

</head>

<body>

<header> 
    <img alt="Wright State University Logo" src="images/WSU.jpg" />
</header>

<nav class="horizontal">
<ul>
    <li><a href="final_project.html">Home</a></li>
    <li><a href="biography.html">Biography</a></li>
    <li><a href="courses.html">Course Information</a></li>
    <li><a href="contact.html">Contact</a></li>
    <li><a href="page_one.html">Important Links</a></li>
</ul>
</nav>

<div id="wrapper">

    <div id="columnleft">

    <aside class="asideleft">
        test test test test test test testtest test test test test test     testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test test test test

    </aside>
    </div>

    <div id="columnright">

        <img alt="///" src="//////////////////////"/>

        <aside class="asideright">

            <h3 class="h3">Recent News</h3>

            <p>test test test test test test testtest test test test  test test testtest test test test test test testtest test test test test test testtest test test test test test testtest test test test </p>

        </aside>

    </div>

</div>

<footer>&copy; Wright State University
&bull;3640 Colonel Glenn Hwy, Dayton, OH 45435 &bull;cse-dept@wright.edu &bull;
(937) 775-5131</footer>

 </body>

 </html> 
```

这是CSS

```
 body{
font-family: "Arial Unicode MS";
background-image:url('../images/grid.png');
background-repeat:repeat; 
-webkit-background-repeat:repeat;
-moz-background-repeat:repeat;
-ms-background-repeat:repeat;
}

div#wrapper {
background-color:gold;
border-radius: 5px;
width: 980px;
margin: 0 auto;
height: auto;
 }

 header{
width: 980px;
padding-left: 420px; 
 }
h1, h2, h3, h4, h5, h6{
border: 1px solid #FFF;
border-radius: 5px; 
margin-left: 5px;
margin-right: 5px;
}

nav.horizontal{
height:60px;
width:100%; 

}

 nav.horizontal ul li{
border: 2px #006600 solid;
font-size:16px;
height:50px;
line-height:50px;
width:180px;
display:block;
float:left;
margin-left:5px;
margin-right:5px;
text-align:center;
}

 nav.horizontal ul li a{
display:block;
background-color:gold; /*b */
color:RBG(16, 83, 55);
font-size: large;

-webkit-border-radius:30px / 25px;
-moz-border-radius:30px / 25px;
-ms-border-radius:30px / 25px;
text-decoration:none;
}

 nav.horizontal ul li a:hover{
background-color:lightslategrey;
color:#000;
}

nav.horizontal ul li a:visited{
color: RGB(16, 83, 55);
}

 #columnleft{
float: left; 
width: 740px;
margin-top: 13px;
padding-left: 15px;
padding-right: 10px;
margin-left: 15px;   
 }

.h3{
border: 3px #FFF solid;
}

 #columnright{
float: none; 
width: 165px; /** sets width of this column to 700px/980px**/
margin-right: 10px;
padding-top: 13px;
padding-left: 810px;
padding-bottom: 5px;

 }

 .asideleft{
background-color: RGB(16,83,55);
border-radius: 5px;
border-color: #FFF;
color:#FFF;
text-align: center;
padding-bottom: 10px;
padding-left: 10px;
padding-right: 10px;
padding-top: 1px;

}

.asideright{
padding-top: 1px;
padding-bottom: 4px;
padding-left: 5px;
padding-right: 5px;
background-color: RGB(16,83,55);
border-radius: 5px;
border-color: #FFF;
color:#FFF;
text-align: center;

}   

 footer{
 margin: 0 auto;
width: 980px;
color: #FFF;
font-size: medium;
background-color: gold;
border-radius: 5px;
text-align: center;
color:#2E71c0;
margin-top: 10px;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:35:30.590

我怀疑您需要像这样设置`body`and`html`元素的高度：

```
html, body { height: 100%; } 
```

[这是一篇](http://www.tutwow.com/htmlcss/quick-tip-css-100-height/)更详细的文章。

**编辑**

根据您的代码示例，我看到您没有清除`float`左列的规则。一种经典的方法是添加此样式规则：`.clear { clear: both; }`，并将其应用于空元素`<div>`或`<br>`浮动元素的兄弟元素。

[MDN 上概述](https://developer.mozilla.org/en-US/docs/CSS/clear)的更现代的解决方案是`::after`在包装元素上使用伪选择器，如下所示：

```
#wrapper::after { 
  content: "";
  display: block; 
  visibility: hidden; 
  clear: both;
} 
```

在任何一种情况下，您都需要删除`float:none`from `#columnright`。这是示例：http: [//jsfiddle.net/ckundo/vNyNY/1/](http://jsfiddle.net/ckundo/vNyNY/1/)

# matlab - 如何在matlab中计算这个无限和？

> ID：15962109
> 
> 赞同：1
> 
> 时间：2013-04-12T02:29:32.523
> 
> 标签：matlab

对于给定的 x 和 tau，我想在 Matlab 中计算以下无限和：

[![信息总和](https://i.stack.imgur.com/dSgqw.jpg)](https://i.stack.imgur.com/dSgqw.jpg)

在给定 x=0.5 和 tau=1 的情况下，我尝试了以下代码：

```
symsum((8/pi/pi)*sin(n*pi*0.5)*sin(n*pi*0.5)*exp(-n*n*pi*pi)/n/n,1,inf) 
```

但我明白了：

```
(228155022448185*sum((exp(-pi^2*n^2)*((exp(-(pi*n*i)/2)*i)/2 - (exp((pi*n*i)/2)*i)/2)^2)/n^2, n == 1..Inf))/281474976710656 
```

我想要一个明确的值，假设总和收敛。我究竟做错了什么？返回 symsum 结果时，Matlab 似乎不计算 exp() 。如何告诉 Matlab 计算评估指数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:32:52.640

转换成双倍

```
double(symsum(...)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T08:04:32.157

只是为了向您展示一种不同的方式，一种不需要符号工具箱的方式，

```
summ  = 0;
summP = inf;
n = 1;
while abs(summP-summ) > 1e-16
    summP = summ;    
    summ = summ + sin(n*pi*0.5)*sin(n*pi*0.5)*exp(-n*n*pi*pi)/n/n;
    n = n + 1;
end

8/pi/pi * summ 
```

它仅在 1 次迭代后收敛（很明显，因为`exp(-4*6.28..)/n/n`它是如此之小，并且`sin(..)`总是在某处`[-1 1]`）。因此，给定`tau==1`和`x==0.5`，无限和本质上是 的值`n==1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T07:45:54.167

您应该首先使用 syms 定义变量“n”。然后，您可以将此变量包含在您的 symsum 代码中。

这是我所做的：

```
syms n; AA = symsum((8/pi/pi)*sin(n*pi*0.5)*sin(n*pi*0.5)*exp(-n*n*pi*pi)/n/n,n,1,inf); BB = double(AA)
BB = 4.1925e-05 
```

# r - 在教程示例中使用 R 中的应用函数时出错

> ID：15962111
> 
> 赞同：6
> 
> 时间：2013-04-12T02:29:51.603
> 
> 标签：r, apply

我正在尝试了解如何使用 apply 功能，我遇到了本教程：http : [//nsaunders.wordpress.com/2010/08/20/a-brief-introduction-to-apply-in-r/](http://nsaunders.wordpress.com/2010/08/20/a-brief-introduction-to-apply-in-r/)看起来简洁明了，但我马上就遇到了问题。他们给出的第一个例子来证明 apply 是：

```
> # create a matrix of 10 rows x 2 columns
> m <- matrix(c(1:10, 11:20), nrow = 10, ncol = 2)
> # mean of the rows
> apply(m, 1, mean)
 [1]  6  7  8  9 10 11 12 13 14 15 
```

这似乎很基本，但我想我会试一试。这是我的结果：

```
> # create a matrix of 10 rows x 2 columns
> m <- matrix(c(1:10, 11:20), nrow = 10, ncol = 2)
> # mean of the rows
> apply(m, 1, mean)
Error in FUN(newX[, i], ...) : unused argument(s) (newX[, i]) 
```

不用说，我迷路了……

为了提供更多信息，我尝试了教程中提供的另一个示例并得到了正确的结果。这种情况的不同之处在于该函数在 apply 函数中被明确说明：

```
apply(m, 1:2, function(x) x/2)
      [,1] [,2]
 [1,]  0.5  5.5
 [2,]  1.0  6.0
 [3,]  1.5  6.5
 [4,]  2.0  7.0
 [5,]  2.5  7.5
 [6,]  3.0  8.0
 [7,]  3.5  8.5
 [8,]  4.0  9.0
 [9,]  4.5  9.5
 [10,]  5.0 10.0 
```

sessionInfo() 输出如下：

```
R version 2.15.3 (2013-03-01)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] tools_2.15.3 
```

以及冲突的输出（详细信息 = TRUE）

```
$.GlobalEnv
[1] "edit" "mean"

$`package:utils`
[1] "edit"

$`package:methods`
[1] "body<-"    "kronecker"

$`package:base`
[1] "body<-"    "kronecker" "mean" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T02:16:31.333

正如其他人所指出的那样，这可能是因为您在`mean`. 当你调用任何东西（函数、对象）时，R 会遍历搜索路径，直到找到它（如果没有找到，R 会相应地抱怨）：

```
> search()
[1] ".GlobalEnv"        "tools:RGUI"        "package:stats"    
[4] "package:graphics"  "package:grDevices" "package:utils"    
[7] "package:datasets"  "package:methods"   "Autoloads"        
[10] "package:base" 
```

如果您是 R 的新手，请注意，当您创建一个函数时，除非您另外指定，否则它通常会存在于`".GlobalEnv"`. R 在继续之前先查看那里，因此明智地命名您的函数非常重要，以免与常用函数（例如`mean`, `plot`, `summary`）发生冲突。

偶尔从干净的会话开始可能是个好主意。在调试阶段命名变量`x`或`y`（为了方便而不是提供信息而选择名称......毕竟我们只是人类）是相当普遍的，这可能会出乎意料地出现问题。当您的工作区相当拥挤时，发生冲突的可能性会增加，因此（a）仔细选择名称和（b）重新启动而不恢复将是我的建议。

# ios - 如何在 iOS 中获取日期并提取日期”

> ID：15962113
> 
> 赞同：4
> 
> 时间：2013-04-12T02:29:53.510
> 
> 标签：ios, date

我有一个以这种格式返回日期的网络服务：

```
2013-04-14 
```

我如何确定这对应于哪一天？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T02:37:30.567

此代码将获取您的字符串，将其转换为 NSDate 对象并提取日期（14）和日期名称（星期日）

```
NSString *myDateString = @"2013-04-14";

// Convert the string to NSDate
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.dateFormat = @"yyyy-MM-dd";
NSDate *date = [dateFormatter dateFromString:myDateString];

// Extract the day number (14)
NSDateComponents *components = [[NSCalendar currentCalendar] components:NSDayCalendarUnit fromDate:date];
NSInteger day = [components day];

// Extract the day name (Sunday)
dateFormatter.dateFormat = @"EEEE";
NSString *dayName = [dateFormatter stringFromDate:date];

// Print
NSLog(@"Day: %d: Name: %@", day, dayName); 
```

注意：此代码适用于 ARC。如果是 MRC，则在末尾添加 [dateFormatter release]。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-12T02:47:35.173

获取工作日的另一种方法是：

```
NSString *myDateString = @"2013-04-14";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd"];

NSDate *date = [dateFormatter dateFromString:myDateString];
NSDateComponents *components = [[NSCalendar currentCalendar] components:NSWeekdayCalendarUnit fromDate:date];

NSInteger weekday = [components weekday];
NSString *weekdayName = [dateFormatter weekdaySymbols][weekday - 1];

NSLog(@"%@ is a %@", myDateString, weekdayName); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-30T12:18:22.483

您可以使用此代码为我工作。

```
NSString *dateString = @"2013-04-14";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd"];
NSDate *dateFromString = [[NSDate alloc] init];
dateFromString = [dateFormatter dateFromString:dateString];
[dateFormatter setDateFormat:@"EEEE"];
NSLog(@"%@", [dateFormatter stringFromDate:dateFromString]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T02:34:15.853

如果你已经`2013-04-14`存储在一个`NSString`被调用的`date`，那么你可以这样做......

```
NSArray *dateComponents = [date componentsSeperatedByString:@"-"];
NSString *day = [dateComponents lastObject]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-05T01:18:48.083

## **斯威夫特 3：**

* * *

```
let datFromat = DateFormatter()

datFormat.dateFormat = "EEEE"

let name = datFormat.string(from: Date()) 
```

**奖励**：如果您想设置自己的日期模板而不是使用`Date()`上面的：

```
let datFormat = DateFormatter()

datFormat.dateFormat = "yyyy-MM-dd'T'HH:mm:ssZZZZZ"

let thisDate = datFormat.date(from: "2016-10-13T18:00:00-0400") 
```

然后在此之后调用第一个代码。

# java - Android应用程序崩溃，找不到原因

> ID：15962114
> 
> 赞同：0
> 
> 时间：2013-04-12T02:30:04.147
> 
> 标签：java, android, xml

所以我一直在这里寻找我的应用程序崩溃的解决方案/原因。此外，我的 logcat 将无法工作。当它确实工作时，它报告主要活动有问题，但我提供了所有代码。如果有人可以帮助我，将不胜感激。

主要活动：

```
 import android.os.Bundle;
     import android.app.Activity;
     import android.view.Menu;
     import android.view.View;
     import android.widget.*;
     import android.widget.AdapterView.OnItemClickListener;

 public class MainActivity extends Activity { 
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final GridView gridview = (GridView) findViewById(R.id.gridView1);
        Table t=new Table((Double) null, null);
        gridview.setAdapter(new ImageAdapter(this, t));

        gridview.setOnItemClickListener(new OnItemClickListener() 
        {
             @Override
             public void onItemClick(AdapterView<?> parent, View v, int position, long id) 
             {
                 Toast.makeText(gridview.getContext(), "" + position, Toast.LENGTH_SHORT).show();
             }

        });
   }

} 
```

图像适配器：

```
package com.example.myspending;

import java.util.ArrayList;
import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.TextView;

public class ImageAdapter extends BaseAdapter 
{
    private Context mContext;
    private ArrayList<String> texts;
    public ImageAdapter(Context context, Table t) 
    {
        mContext=context;
        for(int i=0; i<t.size(); i++)
        {
        texts.add((t.table.get(i).name)+" $"+(t.table.get(i).money));
        }
    }
    @Override
    public int getCount() 
    {
        return texts.size();
    }
    @Override
    public Object getItem(int position) 
    {
         return null;
    }
    @Override
    public long getItemId(int position) {
        return 0;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        TextView tv;
        if(convertView==null){
            tv=new TextView(mContext);
            tv.setLayoutParams(new GridView.LayoutParams(85,85));
        }
        else{
            tv=(TextView)convertView;
        }
        tv.setText(texts.get(position));
        tv.setTextSize(30);
        return tv;
    }

} 
```

桌子：

```
package com.example.myspending;

import java.util.*;

public class Table
{
        public ArrayList<spending> table= new ArrayList<spending>();
    double price;
    String name;
    double total;
    public Table(double p, String n)
    {
        price=p;
        name=n;
        total+=price;
        table.add(new spending(total, "Total"));
        table.add(new spending(price, name));
    }
    public void insert(double p, String n)
    {
        total+=p;
        table.add(new spending(p, n));
    }
    public void delete(String n)
    {
       for(int i=0; i<table.size(); i++)
       {
            if(table.get(i).name==n)
            {
                total-=table.get(i).money;
                table.remove(i);
            }
       }
    }
    public void reset()
    {
        for(int i=0; i<table.size(); i++)
        {
                table.remove(i);
        }
    }
    public int size()
    {
        return table.size();
    }
}
class spending
{
    public double money;
    public String name;
    public spending(double m, String n)
    {
        money=m;
        name=n;
           if(!(name=="deposit"||name=="Deposit"||name=="add"||name=="Add"||name=="added"||name=="Added"))
        {
            money=money*(-1);
        }
    }
 } 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.example.myspending"
     android:versionCode="1"
     android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.myspending.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
         </activity>
    </application>

</manifest> 
```

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <GridView
        android:id="@+id/gridView1"
        android:layout_width="match_parent"
        android:layout_height="325sp"
        android:layout_toRightOf="@+id/textView1"
        android:numColumns="3" >

    </GridView>

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/gridView1"
        android:ems="10"
        android:inputType="text" />

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/gridView1"
        android:layout_below="@+id/editText1"
        android:text="add" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_alignLeft="@+id/editText1"
        android:ems="10"
        android:inputType="numberDecimal" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:57:11.220

```
class spending
{
    public double money;
    public String name;

    public spending(double m, String n)
    {
        money=m;
        name=n;

        if(name.equalsIgnoreCase("deposit") == false && 
           name.equalsIgnoreCase("add") == false  && 
           name.equalsIgnoreCase("added") == false)
        {
            money *= -1;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:03:43.920

拿出你的`(Double) null`，你想在那里完成什么？另外，使用项目的上下文，而`gridview`不是

```
public class MainActivity extends Activity
{ 
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        final GridView gridview = (GridView) findViewById(R.id.gridView1);

        Table t = new Table(-1d, null);

        gridview.setAdapter(new ImageAdapter(this, t));

        gridview.setOnItemClickListener(new OnItemClickListener() 
        {
             public void onItemClick(AdapterView<?> parent, View v, int position, long id) 
             {
                 Toast.makeText(v.getContext(), Integer.toString(position), Toast.LENGTH_SHORT).show();
             }
        });
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T14:28:37.523

一些一般性的评论：

1.  如此大范围地发布代码会使其他人难以分析，因此您获得真正有用​​的答案（tm）的机会减少了。
2.  在将您的代码缩减为一个简短的、自包含的、可编译的示例（参见[http://sscce.org/](http://sscce.org/)）的过程中，您也可以更轻松地解决问题。在这个阶段经常发生作者自己发现缺陷的情况。
3.  如果问题是可重现的，即每次运行都会发生 - 这是一个好消息；因为你需要更少的跑步来固定它
4.  使用调试工具；如果您没有/不知道调试器，只需输出中间结果或什至简单的消息，如“达到里程碑 1”，您就可以界定程序中出现错误的部分
5.  从头开始编写代码（可能会在绝望中浮现在您的脑海中）长期而言并不好，因为即使您获得了工作代码，您也永远不会知道这里出了什么问题以及如何处理程序中的编程错误未来。

# sublimetext3 - 我可以对 Sublime Text 中的选择进行数学运算吗？

> ID：15962115
> 
> 赞同：12
> 
> 时间：2013-04-12T02:30:12.460
> 
> 标签：sublimetext3, sublimetext2, sublimetext

没有编写我自己的插件来做到这一点，是否存在一种机制，我可以从多个选定的数字中添加/减去？

我需要将相同的方程（在这种情况下，减去 5）应用于许多值；我宁愿不单独做。这可能是另一个程序的工作吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-06-08T01:15:49.790

如果您已经使用 Emmet（我强烈建议），请使用它的[Evaluate Math 函数](http://docs.emmet.io/actions/evaluate-math/)。无需安装更多插件。唯一的问题是它将结果削减为 2 位小数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T15:45:31.040

There's plugin called [Sublime-Evaluate](https://github.com/jbrooksuk/Sublime-Evaluate) which allows you to evaluate bits of Python, and output it straight into your buffer. For example, `[i for i in range(5)]` evaluated turns itself into `[0, 1, 2, 3, 4]`. That can be used for arithmetic operations as well, just use those multiple selections and write +5 after each value, then select it all and evaluate. The plugin usually screws positions of your cursors, don't get confused by that.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-19T20:51:19.850

Sublime Calculate 评估选定的文本，看起来非常适合小型计算，尤其是与`replace`选项配对：[https ://github.com/colinta/SublimeCalculate](https://github.com/colinta/SublimeCalculate)

如前所述，Sublime Evaluate 涵盖了 python 评估：[https ://github.com/jbrooksuk/Sublime-Evaluate](https://github.com/jbrooksuk/Sublime-Evaluate)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T02:21:20.383

昨天看到这个，以为我会拍它。基本上和 Sublime-Evaluate 做同样的事情（可惜我之前没看到，本来可以节省一些时间）。无论如何，我的好处是它允许您预定义要运行的 python 片段。它还对光标选择的内容进行一些变量替换。它不会进行任何扩展，因此您必须选择要插入的内容。我正在考虑创建一个设置来修改插件的单词分隔符，但还没有决定。如果您对此有意见，请告诉我。

[https://github.com/skuroda/EvalInsert](https://github.com/skuroda/EvalInsert)

# wpf - WPF 自定义控件 EventTrigger 不触发或动画不工作

> ID：15962117
> 
> 赞同：0
> 
> 时间：2013-04-12T02:30:23.467
> 
> 标签：wpf, grid, storyboard, custom-controls, eventtrigger

我正在尝试创建一个自定义控件（它只是一个从 Grid 派生的自定义网格，我想将它保留为一个 Grid，因为我想尝试其他一些事情），我的问题是故事板为什么不当我尝试从 EventTrigger 触发它时工作，但在正常触发器下工作正常，我的代码如下：

```
<Style TargetType="{x:Type local:GridEx}">
    <Setter Property="Width" Value="100" />
    <Setter Property="Height" Value="100" />

    <Style.Triggers>
        <EventTrigger RoutedEvent="MouseRightButtonDown">
            <BeginStoryboard>
                <Storyboard >
                    <DoubleAnimation Storyboard.TargetProperty="Width" To="300" Duration="0:0:1" FillBehavior="HoldEnd" />
                    <DoubleAnimation Storyboard.TargetProperty="Height" To="300" Duration="0:0:1" FillBehavior="HoldEnd" />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
        <Trigger Property="IsMouseOver" Value="True" >
            <!--<Trigger.EnterActions>
                <BeginStoryboard>
                    <Storyboard >
                        <DoubleAnimation Storyboard.TargetProperty="Width" To="300" Duration="0:0:1" FillBehavior="HoldEnd" />
                        <DoubleAnimation Storyboard.TargetProperty="Height" To="300" Duration="0:0:1" FillBehavior="HoldEnd" />
                    </Storyboard>
                </BeginStoryboard>
            </Trigger.EnterActions>
            <Trigger.ExitActions>
                <BeginStoryboard>
                    <Storyboard >
                        <DoubleAnimation Storyboard.TargetProperty="Width" To="100" Duration="0:0:1" FillBehavior="HoldEnd" />
                        <DoubleAnimation Storyboard.TargetProperty="Height" To="100" Duration="0:0:1" FillBehavior="HoldEnd" />
                    </Storyboard>
                </BeginStoryboard>
            </Trigger.ExitActions>-->
            <Setter Property="Effect" Value="{StaticResource LiftEffect}"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <TranslateTransform X="-1" Y="-1" />
                </Setter.Value>
            </Setter>
            <Setter Property="Panel.ZIndex" Value="10" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

当用户按住鼠标右键时，这个想法非常简单，我只是希望网格的大小增加。我知道动画有效，因为如果我从触发器“IsMouseOver”开始它工作正常，但如果我按住鼠标没有任何反应？
不，这不是评论问题：P

我的自定义控件来自网格。

*添加了编辑代码*

使用 System.Windows；使用 System.Windows.Controls；

```
namespace WPFCCLIB
{

    public class GridEx : Grid
    {
        public static readonly RoutedEvent LeftMouseDoubleClickEvent = EventManager.RegisterRoutedEvent("LeftMouseDoubleClick",RoutingStrategy.Bubble,typeof(RoutedEventHandler), typeof(GridEx));

        public event RoutedEventHandler LeftMouseDoubleClick
        {
            add { AddHandler(LeftMouseDoubleClickEvent, value); }
            remove { RemoveHandler(LeftMouseDoubleClickEvent, value); }
        }

        static GridEx()
        {
           DefaultStyleKeyProperty.OverrideMetadata(typeof(GridEx), new FrameworkPropertyMetadata(typeof(GridEx)));
        }

        void RaiseLeftMouseDoubleClickEvent()
        {
            RoutedEventArgs newEventArgs = new     RoutedEventArgs(GridEx.LeftMouseDoubleClickEvent);
            RaiseEvent(newEventArgs);
        }    
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:36:34.017

xml:

```
<Window x:Class="WpfApplication10.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication10"
        Title="MainWindow" Height="325" Width="422" Name="UI">
    <Window.Resources>
        <Style TargetType="{x:Type local:GridEX}">
            <Setter Property="Width" Value="100" />
            <Setter Property="Height" Value="100" />
            <Style.Triggers>
                <EventTrigger RoutedEvent="MouseRightButtonDown">
                    <BeginStoryboard>
                        <Storyboard >
                            <DoubleAnimation Storyboard.TargetProperty="Width" To="300" Duration="0:0:1" FillBehavior="HoldEnd" />
                            <DoubleAnimation Storyboard.TargetProperty="Height" To="300" Duration="0:0:1" FillBehavior="HoldEnd" />
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <local:GridEX Background="Blue" />

</Window> 
```

代码：

```
namespace WpfApplication10
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }

    public class GridEX : Grid
    {
        public static readonly RoutedEvent LeftMouseDoubleClickEvent = EventManager.RegisterRoutedEvent("LeftMouseDoubleClick", RoutingStrategy.Bubble, typeof(RoutedEventHandler), typeof(GridEX));

        public event RoutedEventHandler LeftMouseDoubleClick
        {
            add { AddHandler(LeftMouseDoubleClickEvent, value); }
            remove { RemoveHandler(LeftMouseDoubleClickEvent, value); }
        }

        static GridEX()
        {
            DefaultStyleKeyProperty.OverrideMetadata(typeof(GridEX), new FrameworkPropertyMetadata(typeof(GridEX)));
        }

        void RaiseLeftMouseDoubleClickEvent()
        {
            RoutedEventArgs newEventArgs = new RoutedEventArgs(GridEX.LeftMouseDoubleClickEvent);
            RaiseEvent(newEventArgs);
        }
    }
} 
```

# google-apps-script - 谷歌驱动器脚本文件夹位置

> ID：15962118
> 
> 赞同：1
> 
> 时间：2013-04-12T02:30:35.300
> 
> 标签：google-apps-script

我有一个 GApp，它从头开始构建一个新的 GDrive 电子表格。我出现在我的根目录中。我想将新的 SS 放在一个特定的文件夹中。

我似乎无法找到如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:39:08.380

来自[API 参考](https://developers.google.com/apps-script/reference/docs-list/file#addToFolder%28Folder%29)

```
// This example creates a new file and adds it to a folder
// Note: This can also be used on a folder to add it to another folder
var file = DocsList.createFile('my test file', 'test file contents');
var folder = DocsList.createFolder('My Test Folder');
file.addToFolder(folder);
Logger.log(file.getParents()[0].getName()); // logs 'My Test Folder' 
```

请注意，根据您创建电子表格的方式，您可能会遇到困难，`DocumentApp.create()`并且`file`似乎是不同的对象类型。不过不用担心，`file`有自己的创建方法（`DocsList.createFile(name, contents)`），可以参考[这里](https://developers.google.com/apps-script/reference/docs-list/)

希望有帮助。

# sockets - 将 bytearray 与 socket.recv_into 一起使用

> ID：15962119
> 
> 赞同：15
> 
> 时间：2013-04-12T02:30:36.077
> 
> 标签：sockets, python-2.7, bytearray

我正在做一些套接字 IO，并使用 bytearray 对象作为缓冲区。我想使用 csock.recv_into 接收带有偏移量的数据，如下所示，以避免创建中间字符串对象。不幸的是，似乎不能以这种方式使用字节数组，并且下面的代码不起作用。

```
buf    = bytearray(b" " * toread)
read   = 0
while(toread):
  nbytes = csock.recv_into(buf[read:],toread)
  toread -= nbytes
  read   += nbytes 
```

所以我使用下面的代码，它*确实*使用了一个临时字符串（并且有效）......

```
buf    = bytearray(b" " * toread)
read   = 0
while(toread):
  tmp = csock.recv(toread)
  nbytes = len(tmp)
  buf[read:] = tmp
  toread -= nbytes
  read   += nbytes 
```

有没有更优雅的方法来做到这一点，不需要复制中间字符串？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-12T06:25:20.040

使用 a`memoryview`包装你的`bytearray`：

```
buf = bytearray(toread)
view = memoryview(buf)
while toread:
    nbytes = sock.recv_into(view, toread)
    view = view[nbytes:] # slicing views is cheap
    toread -= nbytes 
```

# javascript - Node.js 和 Backbone.js 的集成

> ID：15962121
> 
> 赞同：25
> 
> 时间：2013-04-12T02:30:52.000
> 
> 标签：javascript, node.js, mongodb, backbone.js, express

我对 Node.js 和 Backbone.js 都做了相当多的阅读；我已经阅读了一些教程并在 Code School 上完成了相关课程。我觉得我对每种技术在 Web 应用程序上下文中所提供的功能有了一个很好的了解。

我的问题是我真的不知道如何整合这两种技术并串联使用它们。如果有人能指出我使用 Node、MongoDB 和 Backbone 完成整个应用程序开发的资源，我将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-12T02:52:35.327

这是一个很好的教程，展示了如何设置整个堆栈。

[http://backbonetutorials.com/nodejs-restify-mongodb-mongoose/](http://backbonetutorials.com/nodejs-restify-mongodb-mongoose/)

简而言之...

### 节点.js

您可以使用像[restify](http://mcavage.github.io/node-restify/)这样的库来为您的客户端 Backbone 应用程序提供一个 Restful API。它还可以为您的 Backbone 应用程序提供静态资产。该示例使用 restify，但可以使用 express 等其他库来[完成](http://expressjs.com/)。

### 猫鼬

[Mongoose](http://mongoosejs.com/)是 MongoDB 的 javascript 抽象层。这提供了一种从 Node.js 与 MongoDB 交互的简单方法。

### 骨干

您的 Backbone 应用程序可以利用您的**restify** node.js 后端来处理模型同步。您应该有足够的控制权来通过**restify**以让 Backbone 满意的方式设置路由。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T14:15:01.347

这本电子书可能很有用（它在 Backbone 上，但后端使用 Node）：

[http://addyosmani.github.io/backbone-fundamentals/](http://addyosmani.github.io/backbone-fundamentals/)

您可能还想看看这本书：

[http://www.amazon.com/Building-Node-Applications-MongoDB-Backbone/dp/1449337392](https://rads.stackoverflow.com/amzn/click/com/1449337392)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T23:46:32.887

还有[Node Cellar Source](http://coenraets.org/blog/2012/10/nodecellar-sample-application-with-backbone-js-twitter-bootstrap-node-js-express-and-mongodb/)。

关于代码的解释不多，但是应用程序足够简单，可以入门并了解节点/主干的基本布局

我认为它介于“Hello World”代码和完整应用程序之间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-15T16:16:15.193

我在主干 yeoman [https://github.com/yeoman/generator-backbone](https://github.com/yeoman/generator-backbone)中使用 ap ，你也将它与 node.js 一起使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-07T14:35:54.180

这是一个关于使用 Nodejs、Mongodb 和 expressjs 构建自己的博客的综合教程 [http://howtonode.org/express-mongodb](http://howtonode.org/express-mongodb) 它很旧，但只需稍加努力，您就可以让它同时工作和学习

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-10T07:20:53.290

创建休息api：[http ://coenraets.org/blog/2012/10/creating-a-rest-api-using-node-js-express-and-mongodb/](http://coenraets.org/blog/2012/10/creating-a-rest-api-using-node-js-express-and-mongodb/)

客户端上的代码主干：http: [//coenraets.org/blog/2012/10/nodecellar-sample-application-with-backbone-js-twitter-bootstrap-node-js-express-and-mongodb/](http://coenraets.org/blog/2012/10/nodecellar-sample-application-with-backbone-js-twitter-bootstrap-node-js-express-and-mongodb/)

该backbonetutorials.com 修复一个已过时。最好使用 express，特别是如果您打算进行任何授权。它也被更广泛地使用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-25T11:59:20.660

[我发现这是将 Backbone.js 与节点http://amzn.to/1DygKlJ](http://amzn.to/1DygKlJ)一起使用的最新材料

# debugging - 如何跳转到 IntelliJ 中的下一个断点？

> ID：15962122
> 
> 赞同：77
> 
> 时间：2013-04-12T02:30:54.337
> 
> 标签：debugging, intellij-idea, ide

如何在 IntelliJ 中跳转到下一个断点，就像在 Visual Studio 中按 一样`F5`？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-04-12T02:32:43.983

在调试模式下，并且在两个断点之间，按下`F9`键。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-01-11T14:27:08.777

AFAIK，在 Visual Studio 中没有直接的 F5 可以在没有光标指向的情况下跳转到下一个断点。最接近的是**跳转到光标处的 ALT+F9**。

为了快速参考，最常用的调试键盘快捷键是：

*   `F8`跨过去
*   `F7`踏入
*   `Shift`+`F7`智能步入
*   `Shift`+`F8`走出去
*   `Alt`+`F9`运行到光标
*   `Alt`+`F8`评估表达
*   `F9` *(Mac: Cmd + ALT + R)*恢复程序
*   `Ctrl`+ `F8` *(Mac: Cmd + F8)*切换断点
*   `Ctrl`+ `Shift`+ `F8` *(Mac: Cmd + Shift + F8)*查看断点

请注意，Mac 和 Win/Linux 之间存在一些键盘快捷键差异。以下是对 PDF 备忘单的完整参考。

*   Mac 键盘映射：[https ://www.jetbrains.com/idea/docs/IntelliJIDEA_ReferenceCard_Mac.pdf](https://www.jetbrains.com/idea/docs/IntelliJIDEA_ReferenceCard_Mac.pdf "Mac 键盘映射 PDF")

*   Win/Linux 键盘映射：[https ://www.jetbrains.com/idea/docs/IntelliJIDEA_ReferenceCard.pdf](https://www.jetbrains.com/idea/docs/IntelliJIDEA_ReferenceCard.pdf "Win/Linux 键盘映射 PDF")

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-18T11:44:02.770

在 Windows 中使用`F9`键移动下一个调试

# vb.net - 从文本文件中获取数据打印到标签

> ID：15962126
> 
> 赞同：1
> 
> 时间：2013-04-12T02:31:40.293
> 
> 标签：vb.net, visual-studio-2010

为了简短起见，我正在开发一个简单的游戏，可以与世界上任何对此感兴趣的人一起玩，并且因为我正在创建所说的游戏，所以我决定为该游戏开发一个简单的启动器，该启动器可以 ping 网站版本，使用已安装游戏的存储文本文件检查该版本，并查看其版本是否不同。如果版本不同，启动器会下载游戏。如果此人尚未安装游戏，则会为他们下载游戏。

现在对于我为什么要在此处发布的问题，我试图从 AppData 目录中获取已存储在计算机上的文本文件，以供启动器读取，并将其用作与网站上的版本进行比较。这就是我在发布时所拥有的：

启动时：

```
Private Sub MainForm_Load(sender As Object, e As EventArgs) Handles MyBase.Load
Dim wc As New Net.WebClient

Text = wc.DownloadString("https://dl.dropboxusercontent.com/u/47132467/version.txt")

If My.Computer.FileSystem.FileExists("C:\Program Files\SC\SC.exe") Then
    StartBtn.Enabled = True
    StartBtn.Visible = True
Else
    StartBtn.Enabled = False
    StartBtn.Visible = False
End If

If My.Computer.FileSystem.FileExists("C:\Program Files\SC\Readme.txt") Then
    ReadMeBtn.Visible = True
Else
    ReadMeBtn.Visible = False
End If
End Sub 
```

简而言之，我试图弄清楚如何从存储在 AppData 下的计算机本身制作一个文本文件，`Environ("AppData") & "\SC\version.txt"`一直在试图弄清楚如何让程序读取本地存储的文本文件并将其作为一个变量，程序将比较它与在线文本文件。先谢谢了！抱歉，如果我让任何人感到困惑，我的大脑正处于 derp 模式，现在试图弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:41:11.407

这里有 2 个读和写​​函数：

```
Public Function GetFileContents(ByVal FullPath As String, _
   Optional ByRef ErrInfo As String = "") As String

    Dim strContents As String
    Dim objReader As StreamReader
    Try

        objReader = New StreamReader(FullPath)
        strContents = objReader.ReadToEnd()
        objReader.Close()
        Return strContents
    Catch Ex As Exception
        ErrInfo = Ex.Message
    End Try
End Function

Public Function SaveTextToFile(ByVal strData As String, _
 ByVal FullPath As String, _
   Optional ByVal ErrInfo As String = "") As Boolean

    Dim Contents As String
    Dim bAns As Boolean = False
    Dim objReader As StreamWriter
    Try

        objReader = New StreamWriter(FullPath)
        objReader.Write(strData)
        objReader.Close()
        bAns = True
    Catch Ex As Exception
        ErrInfo = Ex.Message

    End Try
    Return bAns
End Function 
```

称呼：

```
Dim File_Path as string = Environ("AppData") & "\SC\version.txt"
Dim versionStr as String = GetFileContents("File_Path")
Label1.text = versionStr
Label1.text.refresh ''// Sometimes this may be required depending on what you are doing! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T19:55:25.660

如果您想直接阅读版本而不是文本文件，请查看以下代码：

```
 If My.Computer.FileSystem.FileExists(fn) Then

        Dim fv As FileVersionInfo = FileVersionInfo.GetVersionInfo(fn)

        If fv Is Nothing Then Return -1 'file has no version info

        Return fv.FileMajorPart * 100000 + fv.FileMinorPart * 1000 + fv.FileBuildPart

    Else
        Return 0 'file does not exist
    End If 
```

# php - 在 PHP 和 Javascript AJAX 中返回一个数组

> ID：15962131
> 
> 赞同：2
> 
> 时间：2013-04-12T02:32:15.713
> 
> 标签：php, javascript, html, arrays, return-value

**第 1 节**

我正在尝试从 PHP 返回一个数组（在使用 fwrite 创建文件之后）

我将该文件包含在我的下一个 .load 方法中（在 Div 中），新的 PHP 文件包含一个`include 'somefile.php';`有我的数组......我会简单地尝试从 PHP 收集并将它与 JS 一起使用数组......

我曾经见过这样的东西......

```
$(function(){
alert('<?php for_each($array as $key => $value){
         echo $value;     // Just an example
}
?>')
}); 
```

我是动态编写这段代码的，所以可能会有一些语法错误；

在 JS 中使用 PHP 可以正常工作...

我不确定我是否先听到 PHP 加载然后 JS ？还是相反？

**第 2 节**

在 PHP 中使用 JS 怎么样？例如 ....

```
<?php

echo "var myArray = New Array();"
echo "myArray = ('Apple','Banana','Orange','Kiwis');"
echo "return myArray";

?> 
```

然后能够用 JS 获取数据海峡？

```
<script type="text/javascript">
    for(i=0;i<myArray.length;i++){
       alert(myArray[i]);
</script> 
```

那么，在返回数组方面，我可以多么容易地操作这两种语言，以便它可以在全局范围内使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:47:05.553

PHP 在服务器上运行，所以从 Javascript 的角度来看（在客户端的浏览器中运行），就好像 PHP 从来没有出现过一样。

`json_encode()`您可以使用 PHP 的函数轻松地将 PHP 数组传递给 Javascript ：

```
$yourPHPArray = array("blah","blah","blah");

echo "var theArray=" . json_encode($yourPHPArray) . ";";

echo "for(var i=0;i<theArray.length;i++)";
echo "{";
echo "     window.alert(theArray[i]);";
echo "}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:35:14.220

**在 JS 中使用 PHP**：简而言之，您可以`echo`在 JS 代码中取值，例如

```
window.location = '<?php echo $url; ?>'; 
```

**在 PHP 中使用 JS**：您可以使用 AJAX。将值发布到 PHP 脚本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T02:36:23.910

PHP 首先运行，因此您可以使用它来编写 JavaScript 代码，一旦页面被浏览器处理，该代码就会运行。

这将使用 PHP 的数组构建 JavaScript 代码：

```
<script>
var myArray = <?php echo json_encode(array('apple', 'orange', 'kiwi'); ?>;

myArray.forEach(alert)
</script> 
```

反过来，将数据从 JavaScript 传递到 PHP，只能通过某种形式的 AJAX 来完成。

# javascript - Codeigniter Datatables/表添加数据

> ID：15962132
> 
> 赞同：0
> 
> 时间：2013-04-12T02:32:17.997
> 
> 标签：javascript, json, codeigniter, jquery, datatables

我是网络编程和数据表的新手，我正在尝试使用 fnAddData() 将新数据添加到我的表中，但它不起作用

这是我的代码

```
$('#btn_ubahbj').click( function() {

                //inisialisasi table upproses

                Otableupproses=$('#tableupproses').dataTable( {
                'sDom': 't',
                "bServerSide": false,
                "sServerMethod": "POST",
                "fnServerParams": function ( aoData ) {
                        aoData.push( { "name": "idbom", "value": window.id_bom } );
                    },
                "sAjaxSource": "<?=base_url()?>index.php/master_bj/ambilbomproses",
                "sAjaxDataProp": "callback",
                "bDestroy": true,
                "bAutoWidth": false,
                "aoColumns":    [
                                    { "sTitle": "ID Proses",   "mDataProp": "id_proses_produksi"},
                                    { "sTitle": "Nama Proses",  "mDataProp": "nama"},
                                    { "sTitle": "Lama Proses", "mDataProp": "waktu"},
                                    { "sTitle": "Jumlah Mesin",  "mDataProp": "jumlah_mesin"},
                                ]
                } );

            } );

$('#btnuptambahproses').click(

                Otableupproses.fnAddData( [$('#prosesupbj').val(),$("#prosesupbj option:selected").text(),$('#txtuplamaproses').val(),$('#txtupjmlmesin').val()]
                );
             }); 
```

我的控制器名称 master_bj

```
function ambilbomproses()
{
    $idbom= $this->input->post('idbom');
    $res['dataproses']=$this->bom_punya_proses_model->getbomproses($idbom);

    echo json_encode(array("callback" => $res['dataproses']));
} 
```

我怎样才能动态地添加新行？我使用 fnAddData() 它不起作用，因为我从 json 获取数据请帮助

我的模型类名称 bom_punya_proses_model

```
function getbomproses($idbom)
{
    $sql=   "SELECT proses_produksi_punya_bom.id_proses_produksi, proses_produksi.nama, proses_produksi_punya_bom.waktu, proses_produksi_punya_bom.jumlah_mesin
            FROM proses_produksi_punya_bom
            INNER JOIN proses_produksi ON proses_produksi_punya_bom.id_proses_produksi = proses_produksi.id_proses_produksi
            WHERE proses_produksi_punya_bom.id_bom =  '".$idbom."'";
    $result=  $this->db->query($sql);
    if($result->num_rows() > 0){
            return $result->result_array();
    }else
        return false;
} 
```

我的查询和控制器没有问题，因为 json 已正确执行，但问题是当我尝试向表中添加新行数据时，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:01:14.230

您的模型似乎根本没有使用 codeigniter 框架的活动记录部分。

查看 CI 网站上的教程并查看活动记录帮助页面： [http ://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

# mysql - 有项目继承时处理订购项目的数据库表设计

> ID：15962135
> 
> 赞同：0
> 
> 时间：2013-04-12T02:32:34.927
> 
> 标签：mysql, database-design

我对数据库有以下要求。它需要能够存储物品。项目有一个 id、标识符和标题。每个项目可以有零个或多个小部件和零个或多个 dodad。每个小部件和每个 dodad 都有一个标题和一个类型。Dodads 也有一个默认值。还需要保存小部件和 doda 的顺序。

我有以下表格可以做到这一点：

```
items  widgets  dodads
-----  -------  ------
id     id       id
ident  itemId   itemId
title  title    title
       type     type
       order    order
                default 
```

所以现在我希望能够拥有继承权。这很容易，将 parentId 添加到 items 表中。现在的问题是小部件和 dodad 表中的订单列。

继承的排序应该起作用，即父项的项目必须与父项的顺序相同，但子项的项目可以是interwhoven。这应该是可行的：

```
P1
P2
C1
C2
P3
P4
C3 
```

所以问题是如何存储小部件和 dodads 的整体顺序？我想我需要另一张桌子，但不确定最好的方法。如果表结构可以处理多个父母，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:46:38.983

订单不是数据库概念，而是表示概念（就像数据在屏幕或报告中的显示方式一样）。听起来您正在根据一种特定的数据向用户显示的方式设计存储结构，这通常表明您的数据设计有问题。我无法确定您到底在寻找什么，因为您的 P1/P2/C1/C2 示例没有显示任何小部件或装饰物，但我认为这就是您遇到问题的级别。

半相关：如果小部件和装饰物之间的唯一区别是“默认”列，为什么不将它们与其他类型或类别列放在同一个表中？如果问题的一部分是在同一个列表中对小部件和装饰物进行排序，这将有所帮助。

# git - Gitblit 使用大量空间来存储数据

> ID：15962142
> 
> 赞同：3
> 
> 时间：2013-04-12T02:33:18.850
> 
> 标签：git, gitblit

我有一个 Gitblit 服务器（Debian），一切都会好起来的，只是我看到 Gitblit 上的 Git 存储库的磁盘空间异常增加。当我推送一个文件（只有 40Kb）时，Gitblit 会增加 300M，我检查了很多时间。同样的问题。

有人遇到过这个问题吗？

# c# - 订阅/取消订阅（添加/删除）扩展方法中的事件

> ID：15962145
> 
> 赞同：2
> 
> 时间：2013-04-12T02:33:44.447
> 
> 标签：c#, events, c#-4.0, extension-methods, presenter-first

我想创建一个流畅的扩展方法来订阅（不太重要的是取消订阅）一个事件。那是使用`.RespondBy(Method)`代替 a的扩展`+= new Eventhandler(Method)`

我想做这个：`object.WhenSomethingChanges.RespondBy(DoingThisOtherThing);`

而不是这个：`object.WhenSomethingChanges += new EventHandler(DoingThisOtherThing);`

我做了一堆谷歌搜索，虽然我没有完全掌握错综复杂的细节，但我现在明白这与你是访问本地领域还是公共活动有关。

话虽如此，我只是对“如何”做到这一点感兴趣，而不关心“为什么”我的第一次尝试没有奏效。解决方法失败，至少是一个明确的“***你不能这样做......永远。*** ”也将是有用的信息......

**[通信状态演示者（图片）](https://i.stack.imgur.com/RDCDK.png)**

[![尝试使用的图像，无法编译](https://i.stack.imgur.com/RDCDK.png)](https://i.stack.imgur.com/RDCDK.png)

**CommuncationsStatusPresenter（代码）**

```
using System;
using InspectionStation.Models;
using InspectionStation.Views;
using MachineControl.OPC;

namespace InspectionStation.Presenters
{
    public class CommuncationsStatusPresenter
    {
        // Fields
        private ICommunicationsModel m_model;
        private ICommunicationsView m_view;

        // Constructor
        public CommuncationsStatusPresenter
            (ICommunicationsModel p_model, ICommunicationsView p_view)
        {
            m_model = p_model;
            m_view = p_view;
            HookEvents();
        }
        private void HookEvents()
        {
            m_model
                .When_Communications_Pulses_Heartbeat
                .RespondBy(Setting_the_state_of_an_Indicator);
        }

        // Eventhandler
        void Setting_the_state_of_an_Indicator(Tag sender, EventArgs e)
        {
            bool State = sender.BooleanValue;
            m_view.Set_Communications_Status_Indicator = State;
        }
    }
} 
```

**响应者**

```
using System;

namespace Common.Extensions
{
    public static partial class ExtensionMethods
    {
        public static
            void RespondBy<TSender, TEventArgs>(this
            GenericEventHandler<TSender, TEventArgs> p_event,
            GenericEventHandler<TSender, TEventArgs> p_handler
            ) where TEventArgs : EventArgs
        {
            p_event += new GenericEventHandler<TSender, TEventArgs>(p_handler);
        }
    }
} 
```

[**通用事件处理程序**](https://stackoverflow.com/questions/1046016/event-signature-in-net-using-a-strong-typed-sender)

```
using System;

namespace Common
{
    [SerializableAttribute]
    public delegate void GenericEventHandler<TSender, TEventArgs>
        (TSender sender, TEventArgs e)
        where TEventArgs : EventArgs;
} 
```

**通信模型**

```
using System;
using Common;
using MachineControl.OPC;

namespace InspectionStation.Models
{
    public interface ICommunicationsModel
    {
        event GenericEventHandler<Tag, EventArgs>
            When_Communications_Pulses_Heartbeat;
    }
} 
```

**ICommunicationsView**

```
namespace InspectionStation.Views
{
    public interface ICommunicationsView
    {
        bool Set_Communications_Status_Indicator { set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:42:35.580

由于 C# 编译器严格要求**在类外**使用的事件必须后跟一个`+=`or `-=`，即处理程序的附加和分离命令，因此无法**在类外扩展和使用它。**

但是，如果您愿意在类本身上构建更具体的方法，例如：

```
object.RespondWhenSomethingChangesBy(DoingThisOtherThing); 
```

那么您可以在该方法内部利用扩展方法，因为该类定义了事件。我知道这意味着您将为事件构建大量样板代码，但如果这是您真正想要的，那么上述内容可能会比以下内容更加精简：

```
object.WhenSomethingChanges.RespondBy(DoingThisOtherThing); 
```

我完全理解你在这里的立场，并希望微软选择允许将来扩展事件（我能想到一些我会使用它的有趣原因），但在那之前我想我们只需要解决它。老实说，我相信有一些**很好的理由**首先没有实施它，微软在考虑这些事情方面做得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:10:57.273

鉴于[Michael Perrenoud](https://stackoverflow.com/users/1195080/michael-perrenoud)的回答，我已决定将以下内容作为我的模式的一部分......

```
 public class CommuncationsStatusPresenter
    {
        ...

        private void HookEvents()
        {
            m_model.
                When_Communications_Pulses_Heartbeat += new EventHandler<Tag, EventArgs>(
                Set_the_state_of_an_Indicator);
        }

        // Eventhandler
        void Set_the_state_of_an_Indicator(Tag sender, EventArgs e)
        {
            ...
        }
    }
} 
```

没什么特别的......只是基于新行的一致自动格式化，但似乎是目前最好的解决方案（即，我*几乎*可以大声阅读代码以快速确定其意图，而无需求助于广泛的注释描述）。

**注意**：我将 long 重命名为`GenericEventHandler`simple `EventHandler`，因为不需要特殊名称。

# python - 来自模型数据的 django 报告 - 打印多个表格

> ID：15962146
> 
> 赞同：1
> 
> 时间：2013-04-12T02:33:46.327
> 
> 标签：python, django, templates

我正在尝试以表格格式打印出一份报告；但是当特定列发生更改时，需要打破表并开始一个新表。

示例数据（在模型中）

```
item1 value group1
item2 value group1
item3 value group2
item4 value group3 
```

输出：

```
For Group1
- Item1 value
- Item2 value
For Group2
- Item3 value
For Group3
- Item4 value 
```

我从 mysql 数据库中获取这些数据...我正在尝试在模板中输出这些数据并使用标签使用模板进行所有格式化...我尝试了 ifchanged，ifequal（首先获取唯一组列表）...但两者都不能很好地工作（或根本没有）......

什么是最有效的方法（因为在无数/无数组中可能有数百条记录 - 所以我认为对数据库进行多次调用并构建一个包含数组的模型数组是不好的每组结果

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:03:43.533

您可以在模板中使用循环：

```
{% for item in group1 %}
    {{ item.value }}
{% endfor %}

{% for item in group2 %}
    {{ item.value }}
{% endfor %}

{% for item in group3 %}
    {{ item.value }}
{% endfor %} 
```

如果您可以从您的角度发布代码，这将有助于我回答这个问题。

# php - SQL 错误：1054：未知列 'Array' cakephp 1.3

> ID：15962148
> 
> 赞同：0
> 
> 时间：2013-04-12T02:33:59.810
> 
> 标签：php, cakephp

我正在使用[https://github.com/dilab/CakePHP-Photo-Behavior](https://github.com/dilab/CakePHP-Photo-Behavior)上的 CakePHP-Photo-Behavior并收到以下错误。

SQL 错误：1054：“字段列表”中的未知列“数组”[CORE\cake\libs\model\datasources\dbo_source.php，第 684 行]

查询： INSERT INTO `photos`( `title`, `description`, `photo_dir`, `photo`, `school_id`, `user_id`, `is_slider`, `modified`, `created`) VALUES ('skjg', 'lkhg', '', Array, 1, 1, 1, '2013-04-12 01:14:09', '2013 -04-12 01:14:09')

模型：

```
var $actsAs = array('Photo'=>array(
                    'dir'=>array('upload_directory'),
                    'file_field'=>array('photo'),
                    'file_db_file'=>array('photo'),
                    'thumb'=>array(true),
                    'thumb_size'=>array(array("100x100"))
)); 
```

看法：

```
<?php echo $this->Form->create('Photo', array('type' => 'file')); ?>
<?php echo $this->Form->input('Photo.title'); ?>
<?php echo $this->Form->input('Photo.description', array('type' => 'textarea', 'rows' => 3)); ?>
<?php echo $this->Form->input('Photo.photo', array('type' => 'file')); ?>
<?php echo $this->Form->input('Photo.photo_dir', array('type' => 'hidden')); ?>
<?php echo $this->Form->end(__('Upload', true));?> 
```

控制器：

```
function admin_add_slider() {
    debug($this->params);

    if (!empty($this->data)) {

        //set the school id
        $session_school_id = $this->Session->read('Userinfo.currentSchoolid');
        $session_user_id = $this->Session->read('Userinfo.id');
        $this->data['Photo']['school_id'] = $session_school_id;
        $this->data['Photo']['user_id'] = $session_user_id;
        $this->data['Photo']['is_slider'] = 1;
        $this->Photo->create();
        if ($this->Photo->save($this->data)) {
            $this->Session->setFlash(__('The Photo has been saved', true));
            $this->redirect(array('action' => 'view_slider'));
        } else {
            $this->Session->setFlash(__('The Photo could not be saved. Please, try again.', true));
        }
    }

} 
```

调试：

```
data] => Array
    (
        [Photo] => Array
            (
                [title] => skjg
                [description] => lkhg
                [photo_dir] => 
                [photo] => Array
                    (
                        [name] => PLDMonth6Student_img_2.jpg
                        [type] => image/jpeg
                        [tmp_name] => C:\xampp\tmp\phpBA8C.tmp
                        [error] => 0
                        [size] => 42085
                    )

            )

    ) 
```

表： `id`, `title`, `description`, `small`, `large`, `is_slider`, `created`, `modified`, `school_id`, `user_id`, `photo`,`photo_dir`

谢谢罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:02:06.533

在配置数组中添加**“dbColumn”字段。**仅当**"allowEmpty"**为**TRUE**时才有效。此字段应与您的数据库列名称相同。就我而言，它是“图像”

```
public $actsAs = array( 
'Uploader.Attachment' => array(
    'image' => array(
            'baseDir'       => '',
            'uploadDir'     => 'files/uploads/',
            'overwrite'     => true,
            'stopSave'      => true,
            'allowEmpty'    => true,
            'dbColumn' => 'image'                           
    )
  )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:56:22.203

我没有使用过这种行为，但你确定你的设置不应该是：

```
var $actsAs = array('Photo'=>array(
    'dir'=>'upload_directory',
    'file_field'=>'photo',
    'file_db_file'=>'photo',
    'thumb'=>true,
    'thumb_size'=>array("100x100")
)); 
```

# c++ - 将两个字节转换为 16 位值的最有效方法？

> ID：15962156
> 
> 赞同：1
> 
> 时间：2013-04-12T02:35:15.307
> 
> 标签：c++, byte, 16-bit, 8-bit

说第一个字节 = 2（十进制）和第二个字节 = 1（十进制）。

因此，第一个字节表示 257（十进制）。因此第二个字节代表 1（十进制）。

所以（总）16 位值是 258（十进制）。

所以如果我这样做：

```
 (byte1*256)+byte2 
```

这是“正确”的做法吗？或者，还有更好的方法？

谢谢，T。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T02:39:31.713

对于大多数现代优化器，没有“正确”的方法：您的代码将被转换为系统上最快的任何东西，其中可能包括

*   **将字节分别加载到下部和上部部分寄存器**中 - 不进行任何转换，字节直接加载到它们各自的位置。
*   **移位顶部字节并在低字节中进行 OR-ing** - 类似于`byte1<<8 | byte2`
*   **移位顶部字节并添加低字节**- 与上面相同，除了用 a`+`而不是 an`|`
*   **在您的系统上快速运行的完全不同的东西**- 不同的架构可能具有上述未描述的特定于架构的优化。

在您的源代码中，您应该专注于让人类读者清楚地了解您的意图：如果乘以`256`对您的读者最有意义，那么使用乘法；如果是位移位，则使用位移位。编译器将负责使您的代码尽可能高效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T02:38:15.663

这应该有效：

```
(byte1<<8) | byte2 
```

但我认为这里可能有一个问题。如果您的`byte1`和`byte2`数据类型的大小只有 1 个字节（即 8 位），则移位可能无济于事。

我认为你所做的方式应该完全没问题。但是，对于踢球，这样的事情也可能会起作用：

```
int16 total = byte1;
total = (total<<8) | byte2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T02:38:57.177

您可以使用移位运算符，它移位： (byte1 << 8) + byte2

左移与乘以 2 的幂相同。在上面的示例中，

(2 << 8) 与 (0b 0000 0010 << 8) 相同，即 (0b 10 0000 0000)。

我们移位 8 位，因为一个字节中有 8 位。

# php - 不允许 CodeIgniter 上传类 PDF 文件类型

> ID：15962158
> 
> 赞同：3
> 
> 时间：2013-04-12T02:35:22.343
> 
> 标签：php, codeigniter, file-upload, mime-types

在本地工作，但在我尝试过的两台服务器上显示相同的错误消息。使用 Codeigniter 2.1.3

```
private function upload_file(){
    $config['upload_path'] = './uploads/';
    $config['allowed_types'] = 'jpg|png|jpeg|gif|pdf';
    $config['max_width']  = '0';
    $config['max_height']  = '0';
    $config['encrypt_name']  = true;
    $this->load->library('upload', $config);
    var_dump($_FILES);
    if ( ! $this->upload->do_upload()){
        $error = array('error' => $this->upload->display_errors());
        var_dump($error);
        die();
        return $error;
    } else {
        $data = array('upload_data' => $this->upload->data());
        var_dump($data);
        die();
        return $data;
    }
} 
```

在执行此操作时，`var_dump($_FILES);`它会显示正确的信息 `array(1) { ["userfile"]=> array(5) { ["name"]=> string(8) "0002.pdf" ["type"]=> string(14) "aplication/pdf" ["tmp_name"]=> string(27) "C:\Windows\Temp\php9454.tmp" ["error"]=> int(0) ["size"]=> int(29295) } }`

`var_dump($error)`放出`array(1) { ["error"]=> string(64) " The filetype you are attempting to upload is not allowed. " }`

使用 png 和 jpg 进行了测试，这些作品非常出色。

正确的 mime 类型在配置文件中`config/mimes.php`

```
 'pdf'  =>  array('application/pdf', 'application/x-download'), 
```

编辑：如果这意味着什么，本地服务器是 MAC，两个遥控器是 Windows。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:16:21.377

因此，即使代码全部正确，错误实际上也出在 PHP 本身上。那里的 MIME 类型有拼写错误。当`var_dump($_FILES)`它吐出时`["type"]=> string(14) "aplication/pdf"`注意“应用程序”拼写错误。

检查了同事机器和他的正确性，所以可能是 php >5.3.5 的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T18:07:54.163

由于某种原因，我在这里遇到了同样的问题，我无法上传 pdf 文件快速故障排除是显示错误

```
$msg = $this->upload->display_errors('<p>', '</p>');
echo $msg; 
```

我收到了无效文件类型的错误消息，所以我添加了新的代码行来显示有关要上传的文件的完整信息。

```
$msg = $this->upload->display_errors('<p>', '</p>');
$msg.=print_r($this->upload->data());
echo $msg; 
```

然后我将文件类型复制到 config/mime.php

```
'pdf'   =>  array('application/pdf'), 
```

并确保使用相同的 mime 类型作为我上传文件的 mime 类型。有趣的是，错误在于 mime.php 中有一个错字:)

由于从互联网复制过去而没有注意使用的引号，因此使用撇号而不是单引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-20T08:18:16.827

代替

```
$this->load->library('upload',$config); 
```

尝试这个

`$this->load->library('upload'); $this->upload->initialize($config);`

这对我有用

# delphi - 在组件中使用 FThumbnaiWidth 与 Get 和 Set

> ID：15962164
> 
> 赞同：1
> 
> 时间：2013-04-12T02:36:40.543
> 
> 标签：delphi

你应该使用：

```
property ThumbnailWidth: integer read FThumbnailWidth 
  write FThumbnailWidth default 170;
property ThumbnailHeight: integer read FThumbnailHeight 
  write FThumbnailHeight default 120; 
```

或者

```
property ThumbnailHeight: Integer read GetThumbnailHeight 
  write SetThumbnailHeight;
property ThumbnailWidth: Integer read GetThumbnailWidth 
  write SetThumbnailWidth; 
```

两种方式都可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T02:46:31.177

这取决于。:-)

如果不需要副作用，您有时可以直接访问私有变量，就像在您的第一个示例中一样。

通常，当属性值更改时，您还需要执行其他操作，例如更新屏幕、进行计算、更改其他内部值等等。在这种情况下，需要`getter`and `setter`(`read`和`write`Delphi 中的方法)。

大多数时候我更喜欢首先使用这些方法，因为 Delphi 对组件用户隐藏了它们。很多时候，他们只是直接访问内部值而没有其他影响，但是如果我以后需要更改它，那么要做的工作就更少了。

使用这些方法还有其他用途。如果您需要更改*其他属性*，有时您需要触发（或避免）它们具有的副作用，您可以通过访问`published`属性在您的方法中执行此操作（例如，`ThumbnailHeight`当您更改缩略图宽度以保持比例时，并且需要更新显示），或者在您不这样做时访问内部字段（通过`FThumbnailHeight`直接使用内部）。

[有关直接访问](http://docwiki.embarcadero.com/RADStudio/XE3/en/Direct_Access)和[访问方法](http://docwiki.embarcadero.com/RADStudio/XE3/en/Access_Methods_%28properties%29)之间的区别，请参阅文档中的[定义属性](http://docwiki.embarcadero.com/RADStudio/XE3/en/Defining_Properties)（尽管后者没有为第一个添加太多信息，但那里有几个链接可以读取/写入方法）。

# android-ndk - 如何在编译过程中寻求 ndk-build 运行时配置

> ID：15962165
> 
> 赞同：0
> 
> 时间：2013-04-12T02:36:42.160
> 
> 标签：android-ndk

如何在构建控制台提示符下查看 ndk-build 配置？

我想在 ndk-build 时看到如下的真实/完整编译行

```
gcc -o XXX -IYYY/ZZZ  -IAAA/BBB -std=c++0x 
```

确认混淆的包含路径、构建选项等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:29:34.480

您可以运行`ndk-build -n`以显示“真实”命令。来自`ndk-build --help`：

```
-n      Don't actually run any commands; just print them. 
```

# android - 在 Ubuntu 12.04 64 位上安装最新的 Android SDK 时出错

> ID：15962166
> 
> 赞同：0
> 
> 时间：2013-04-12T02:36:46.393
> 
> 标签：android, linux, sdk

我在 Ubuntu 12.04 上。[我从http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)下载了 android adt ：

![在此处输入图像描述](https://i.stack.imgur.com/wKNga.png)

下载`android-sdk_r21.1-linux.tgz`64 位 Linux 发行版并解压：

![在此处输入图像描述](https://i.stack.imgur.com/4wfoF.png)

然后直接从命令行运行**Android SDK Manager**：

![在此处输入图像描述](https://i.stack.imgur.com/spxLe.png)

安装 Android 工具和最新的 Android 版本：

![在此处输入图像描述](https://i.stack.imgur.com/quKgz.png)

**错误！**：

![在此处输入图像描述](https://i.stack.imgur.com/SoIE9.png)

但是亚行*就*在那里！我发誓！：

![在此处输入图像描述](https://i.stack.imgur.com/2nSvw.png)

模拟器**甚至没有启动**：

![在此处输入图像描述](https://i.stack.imgur.com/EiZLA.png)

ADB“无法运行程序”错误的原因是什么，为什么我无法启动模拟器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:40:26.290

`ia32-libs`通过apt安装包。找不到文件有点误导，但如果您尝试在没有 32 位支持的情况下运行 32 位二进制文​​件，基本上会发生这种情况。

# javascript - 使用表单 json 更新对象

> ID：15962167
> 
> 赞同：1
> 
> 时间：2013-04-12T02:36:49.457
> 
> 标签：javascript, json, forms

我正在尝试将数据转换为 json，然后将该数据附加到一些 javascript 函数中，例如`.push`一个对象。

我有一个将表单数据附加到 html 的示例。相反，我需要将 json 推送到一个对象。

```
$(function() {
    $('form').submit(function() {
       $('#result').text(JSON.stringify($('form').serializeObject()));
        return false;
    });
}); 
```

[http://jsfiddle.net/sxGtM/3/](http://jsfiddle.net/sxGtM/3/)

代替：

```
$('#result').text(JSON.stringify($('form').serializeObject())); 
```

我可不可以做：

```
var object = JSON.stringify($('slideForm').serializeObject());
someObject.someArray.push(object); 
```

当我尝试它时，它似乎不起作用。

# java - 使用 servlet，如何从数据库中下载多个文件并将其压缩以供客户端下载

> ID：15962172
> 
> 赞同：5
> 
> 时间：2013-04-12T02:37:25.733
> 
> 标签：java, jsp, servlets, zipoutputstream

我有一个 jsp/servlet Web 应用程序，客户端可以在其中通过下拉框选择“课程”和“作业”，然后单击按钮下载该课程/作业组合下列出的数据库中的所有文件。servlet 代码不能正常工作，因为 zip 文件没有作为附件发送到浏览器。我确实有一次下载一个文件的工作代码，但是这个压缩文件的代码卡住了一些东西。数据库中的所有文件实际上都是 zip 文件本身，所以我试图压缩一堆 zip 文件。我认为这不会要求对它们进行不同于压缩任何其他格式的文件的处理。任何人都可以看到缺少什么吗？这是我在处理下载的 servlet 中的 doGet 方法代码。大部分代码是在 stackoverflow 上找到的。请注意，FileSubmitted 对象是我的 DOA，其中包含数据库中每个文件的所有文件信息，包括 Blob 本身：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    List<FileSubmitted> fileList = new ArrayList<FileSubmitted>();
    String course= request.getParameter("course");
    String assignment = request.getParameter("assignment");

    java.sql.PreparedStatement pstmt = null;
    java.sql.Connection conn = null;
    ResultSet rs;
    String queryString;

    try {
        conn = ConnectionManager.getConnection();
        conn.setAutoCommit(false);

        queryString = "SELECT * FROM files WHERE courseID=\""+course+"\" AND assignmentID=\""+assignment+"\";";
        pstmt = conn.prepareStatement(queryString);
        rs = pstmt.executeQuery(queryString);
        while(rs.next())
        {
            fileList.add(new FileSubmitted(rs.getString("username"),
                                           rs.getString("courseID"),
                                           rs.getString("assignmentID"),
                                           rs.getString("fileName"),
                                           rs.getString("mimeType"),
                                           (Blob) rs.getBlob("contents")));
        }

        response.setContentType("application/zip");
        response.setHeader("Content-Disposition", "attachment; filename=\"allfiles.zip\"");

        ZipOutputStream output = null;
        byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];

        try {
            output = new ZipOutputStream(new BufferedOutputStream(response.getOutputStream(), DEFAULT_BUFFER_SIZE));

            for (FileSubmitted file : fileList)
            {
                InputStream input = null;
                try {
                        input = new BufferedInputStream(file.getContents().getBinaryStream(), DEFAULT_BUFFER_SIZE);
                        output.putNextEntry(new ZipEntry(file.getFileName()));
                        for (int length = 0; (length = input.read(buffer)) > 0;)
                        {
                            output.write(buffer, 0, length);
                        }
                    }//try
                    catch (SQLException e) {e.printStackTrace();}
                    finally{}
                    output.closeEntry();
            }//for
          }//try
          finally{}
     } 
     catch (Exception e1) {e1.printStackTrace();}
     finally{}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T16:01:41.687

如果这对其他人有帮助，我找到了问题的答案。上面发布的代码实际上非常适合从数据库下载多个文件并创建一个 zip 文件供客户端下载。问题是我通过ajax调用servlet，显然你不能通过ajax调用下载文件。所以我将我的jsp页面更改为通过提交表单来调用servlet，然后下载完美地到达了浏览器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T05:04:23.360

首先创建一个包含所有 zip 文件的 zip 文件。

使用**`ServletOutputStream`**而不是**`ZipOutputStream`**.

然后使用下面的代码

```
protected void doGet(final HttpServletRequest request, final HttpServletResponse response) {
        final String filename = "/usr/local/FileName" + ".zip";

        BufferedInputStream buf = null;
        ServletOutputStream myOut = null;

        try {
            myOut = response.getOutputStream();

            File myfile = new File(filename);

            if (myfile.exists()) {
                //myfile.createNewFile();
                //set response headers
                response.setHeader("Cache-Control", "max-age=60");
                response.setHeader("Cache-Control", "must-revalidate");
                response.setContentType("application/zip");

                response.addHeader("Content-Disposition", "attachment; filename=" + filename);

                response.setContentLength((int) myfile.length());

                FileInputStream input = new FileInputStream(myfile);
                buf = new BufferedInputStream(input);
                int readBytes = 0;

                //read from the file; write to the ServletOutputStream
                while ((readBytes = buf.read()) != -1) {
                    myOut.write(readBytes);
                }
            }

        } catch (Exception exp) {
        } finally {
            //close the input/output streams
            if (myOut != null) {
                try {
                    myOut.close();
                } catch (IOException ex) {
                }
            }
            if (buf != null) {
                try {
                    buf.close();
                } catch (IOException ex) {
                }
            }

        }
    } 
```

# javascript - 如何动态更改 jquery ui 手风琴的内容选项卡

> ID：15962179
> 
> 赞同：0
> 
> 时间：2013-04-12T02:38:16.557
> 
> 标签：javascript, jquery, jquery-ui

我有下一个代码：

```
<div id="accordion">
    <h3>Row 1</h3>
    <div id="1"></div>
    <h3>Row 2</h3>
    <div id="2"></div>
    <h3>Row 3</h3>
    <div id="3"></div>
</div>

$("#accordion").accordion({
    autoHeight: false,
    clearStyle: true,
    active: 0,
    change: function(event, ui) {
    $("div#2").append('<p>Test</p>');
    }
}); 
```

当在另一行中单击手风琴时，我想`<div id="2">`用数据填充。在更改事件中，我正在尝试这个：

```
$("div #2").append('<p>Test</p>'); 
```

但是文本“测试”打印在 h3 内而不是 div 内......我怎样才能实现在 div 上打印文本？

我正在使用 jquery 1.9.0

这似乎是一个错误[http://bugs.jqueryui.com/ticket/4469#comment:4](http://bugs.jqueryui.com/ticket/4469#comment:4)不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:40:32.067

您必须重做为`id`属性设置的值。尝试：

```
<div id="accordion">
    <h3 id="header1">Row 1</h3>
    <div id="content1"></div>
    <h3 id="header2">Row 2</h3>
    <div id="content2"></div>
    <h3 id="header3">Row 3</h3>
    <div id="content3"></div>
</div> 
```

这样，您可以轻松地定位：

```
$("#content2").append('<p>Test</p>'); 
```

（或实际使用`.append()`）

这是因为`id`属性必须是唯一的，才能定位到您真正想要的元素。jQuery 将使用本机`document.getElementById`方法返回第**一个**找到的元素`id`。

**更新：**

根据您的新编辑，您需要使用不带空格的选择器：

```
$("div#2").append('<p>Test</p>'); 
```

虽然您不需要包含`div`选择器的部分。只需使用：

```
$("#2").append('<p>Test</p>'); 
```

虽然 HTML5 确实允许`id`以数字开头（并且长度为 1 个字符），但我建议使用更具描述性的`id`，就像我之前说的：“content1”等。

**更新 2：**

再看一遍，`$("div #2")`实际上应该也可以工作，因为带有`id`“2”**的**元素在 a 中`<div>`。所以从技术上讲，选择器应该可以工作。尽管如此，我仍然建议使用不是数字且更具描述性的选择器。

使用您的代码，无论如何我都可以使用更具描述性的选择器：http: [//jsfiddle.net/BrRPz/2/](http://jsfiddle.net/BrRPz/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:47:52.480

尝试`$("div#2").append('<p>Test</p>');`

`$("div #2")`将以元素`id='2'`内部为目标`<div>`，而以 a为`$("div#2")`目标。`<div>``id='2'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T02:41:31.770

在 css 中，id 选择器是唯一元素。所以不要在页面中重复相同的 id

```
<div id="accordion">
    <h3 id="1">Row 1</h3>
    <div class="1"></div>
    <h3 id="2">Row 2</h3>
    <div class="2"></div>
    <h3 id="3">Row 3</h3>
    <div class="3"></div>
</div> 
```

使用脚本作为

```
$("div.2").append('<p>Test</p>'); 
```

注意： **id 选择器是唯一元素。**

# paypal - 获取 Paypal 账户接受的货币

> ID：15962183
> 
> 赞同：2
> 
> 时间：2013-04-12T02:38:35.903
> 
> 标签：paypal

是否有一个 api 可以检索给定帐户电子邮件地址和名称的 paypal 帐户接受的货币？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:07:12.967

没有 API 可以为您提供 PayPal 帐户的可接受货币。

# wpf - WPF MahApps.Metro - 将资源字典放在哪里？

> ID：15962184
> 
> 赞同：5
> 
> 时间：2013-04-12T02:38:52.070
> 
> 标签：wpf, xaml, microsoft-metro, resourcedictionary

我正在使用适用于 .NET 4.5 的 MahApps.Metro 版本 0.11.0.9-ALPHA。并想知道引用他们的资源字典的最佳方式。

有人告诉我，我不应该将它们作为 App.xaml 中的合并字典引用。如果不是这种情况，我是否需要将它们添加为每个窗口的 Window.Resources？

我正在这样做：

```
 <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Red.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>

</Application.Resources> 
```

这样做的问题是某些控件的行为很奇怪，例如窗口上的最小化、最大化和关闭按钮显示为没有文本的黑色块。当我将这些资源字典引用为 Window.Resources 时，一切正常...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T09:17:00.703

我只是使用每个窗口都引用的共享资源字典。

GeneralResources.xaml：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.AnimatedTabControl.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <other shared resources... />
</ResourceDictionary> 
```

每个窗口：

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="GeneralResources.xaml" />
        </ResourceDictionary.MergedDictionaries>

        <other window resources... />
   </ResourceDictionary>
</Window.Resources> 
```

# nosql - neo4j中如何有效检索每个人的两个朋友

> ID：15962188
> 
> 赞同：-1
> 
> 时间：2013-04-12T02:39:10.747
> 
> 标签：nosql, neo4j, cypher

例如，我有一个这样的 neo4j 图：

```
n1 -> n1
n1 -> n2
n1 -> n3
n2 -> n4
n2 -> n5
n3 -> n6 
```

预期结果是：

```
n1 -> n1
n1 -> n2
n2 -> n4
n2 -> n5
n3 -> n6 
```

Cypher 查询或 REST API 都可以。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:25:47.777

在当前版本（2.0.0-M01）中有点难看。

```
match a:Person-->b:Person 
return a, head(collect(b)), head(tail(collect(b))) 
```

很快你就可以做范围了，这可能是

```
match a:Person-->b:Person 
return a, collect(b)[0..1] 
```

请参阅[https://groups.google.com/forum/?fromgroups=#!searchin/neo4j/subset/neo4j/nnihjVqMHbQ/PVbCe_3z85oJ](https://groups.google.com/forum/?fromgroups=#!searchin/neo4j/subset/neo4j/nnihjVqMHbQ/PVbCe_3z85oJ)

对于它的实际工作副本：

[https://github.com/mneedham/neo4j/commits/](https://github.com/mneedham/neo4j/commits/)

# python - 是否可以在服务器上加盐或散列 HOTP/TOTP 秘密？

> ID：15962195
> 
> 赞同：15
> 
> 时间：2013-04-12T02:39:47.317
> 
> 标签：python, authentication, encryption, google-authenticator

我正在构建一个基于 TOTP/HOTP 的双因素身份验证系统。为了验证 otp，服务器和 otp 设备都必须知道共享密钥。

由于 HOTP 密码与用户密码非常相似，因此我认为应该应用类似的最佳实践。具体来说，强烈建议不要存储未加密的密码，只保留密码的加盐哈希。

RFC 和 HOTP/TOTP 的 python 实现似乎都没有涵盖这方面。

有没有办法使用 OTP 共享密钥的单向加密，或者这是一个愚蠢的想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T16:45:16.120

> 有没有办法使用 OTP 共享密钥的单向加密......？

并不真地。您可以使用可逆加密机制，但可能没有多大意义。

如果客户端通过网络发送完整的未散列 HMAC 密钥进行身份验证，您只能在服务器上散列[HMAC](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)密钥，这通常是基于密码的身份验证的工作方式，但这很容易受到重放攻击，这正是 HOTP/ TOTP 旨在避免。

> 为什么我们在存储密码之前将单向函数应用于密码（盐+哈希）......？

这实际上是一个好问题。

我认为这源于早期版本的 Unix 操作系统将其所有密码信息存储在“世界可读”`/etc/passwd`文件中，因此显然必须以某种方式对其进行混淆，而 salt+hash 恰好是方法他们选择了。

如今，人们通常不会免费提供他们的密码文件，因此可以说根本不需要散列它们。

然而，混淆它们还有另一个原因，那就是密码通常是由人类选择的，因此，为了方便起见，他们通常会为多个系统选择相同的密码。我怀疑 HMAC 密钥也是如此，它们（希望）是使用加密更强的机制选择的。

因此，如今散列密码的主要原因与其说是为了提高系统的安全性，不如说是为了降低在您的系统受到威胁时损害您的用户在**其他**系统上的安全性的风险。

如果攻击者可以从您的系统中读取明文密码，那么这对他们来说可能没有多大用处，因为他们可能也可以读取系统上的所有其他内容。

但是，如果在另一个系统上也使用了相同的密码，那么您可能已经为攻击者提供了破坏该系统的手段。

如果可以信任人类不会对多个系统使用相同的密码，那么可能根本不需要对它们进行哈希处理，但我认为假设这可能会发生有点乐观。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:20:32.250

定义：`HOTP(K,C) = Truncate(HMAC(K,C)) & 0x7FFFFFFF`- 其中`K`是密钥，`C`是计数器。它的设计是为了让黑客无法获得`K`，`C`如果他们有 HOTP 字符串，因为 HMAC 是单向哈希（不是双向加密）。

`K`&`C`需要受到保护，因为丢失会危及整个 OTP 系统。话虽如此，如果`K`在字典中找到并且我们知道`C`（例如：当前时间），我们可以生成 HOTP/TOTP 的整个字典并找出`K`.

将一种方式加密应用于 HOTP/TOTP（即：双重加密）在数学上会使其更难解码，尽管它不能防止其他形式的攻击（例如：击键记录）或将相同的加密应用于 HOTP/ 的字典列表托普。

为所有内容重复使用同一组易于记住的密码是人类的天性，因此需要在数字设备上或通过互联网传输时隐藏此密码。

安全程序或协议的实施也很重要，这就像选择一个好的密码`K`但把它放在桌子上供每个人使用，或者服务器持有`K`（对于 HMAC）不在受几层防火墙保护的专用网络内。

# jquery - 如何处理来自ajax调用的json响应

> ID：15962196
> 
> 赞同：1
> 
> 时间：2013-04-12T02:39:51.420
> 
> 标签：jquery, html, ajax, rest, jersey

我的网络服务返回一个 JSON 对象，如下所示

```
["abc","xyz","option_3"] 
```

即当我把这个地址放在 chrome 浏览器中时，`http://localhost:8088/rest/getOptions`我得到了上面。

我正在尝试在浏览器中阅读此内容，以便我可以创建一个下拉选项......但我从下面的代码中一无所获：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript">
        url="http://localhost:8088/rest/getOptions";
        var ajaxResult = null;
        function getData(yt_url){
            $.ajax
            ({
                type: "GET",
                url: yt_url,
                dataType:"json",
                async: false,
                success: function(response){
                    ajaxResult = response;
                }
            });
        }
        getData(url);

    alert(ajaxResult);

    </script>
</head>
<body>
</body>
</html> 
```

我总是进入`null`警报框。我用 fiddler2 仔细检查了 web 服务请求/响应是否正常，我什至可以拦截 web 服务和浏览器之间的 json 对象。

我也试过

```
var obj = JSON.parse(ajaxResult);
alert(obj); 
```

我再次获得空值。

我已经看过[Ajax call for the json response](https://stackoverflow.com/questions/10261576/ajax-call-for-the-json-response)和类似的问题。请看我的 JSON 有点不同，所以这些解决方案要么不适用于我的案例，要么我没有遵循它们。

我是 AJAX 和 Java 脚本的新手，请指教。

**编辑：** 添加服务于这个 rest/getOptions 端点的 JERSEY 网络服务代码

```
@GET
@Path("getOptions")
@Produces(MediaType.APPLICATION_JSON)
public List<String> getOptionsJson() {
    //build alloptions List<String>
    return alloptions ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:43:54.243

**更新**

您编辑了问题；您不能使用`dataType: 'json'`，因为跨域问题只能通过在同一域上使用代理或通过[CORS](http://www.w3.org/TR/cors/)来克服。

使用`dataType: 'jsonp'`时不能使用`async: false`；这是因为它并没有真正使用`XMLHttpRequest`，而是使用`<script>`标签使其跨域。我相信 jQuery 只是忽略了`async`设置而不发出警告。

因此，`alert()`将始终为空，您应该将其移动到成功回调中。

要支持 JSONP，您的 Web 服务必须将返回的数据包装到由`callback`GET 参数标识的函数调用中，例如

```
callback([1, 2, 3]) 
```

如果您的网络服务不支持这一点，如前所述，您将需要使用[CORS](http://www.w3.org/TR/cors/)，例如添加此响应标头：

```
Access-Control-Allow-Origin: * 
```

# c# - 用 toString 格式化，以便我得到一个图表

> ID：15962198
> 
> 赞同：0
> 
> 时间：2013-04-12T02:40:06.877
> 
> 标签：c#, java, formatting, tostring

我正在尝试制作一个格式如下的 toString 方法：

```
10001 Lumia 900        3     $450.00   $1350.00 
```

`int`当我使用： , `string`, `int`, `double`,遍历自定义对象的数组列表时，这需要使用不同长度的字符串进行格式化`double`。

但是我不知道如何格式化返回的字符串，以便它总是看起来像这样，它自己的小列中的每一件事。也不确定如何将标准双格式从`0.0`. `0.00`,

我想出的最好的是：

```
return "\t" + this.item.getSKU()+ "\t" + this.item.getDesc() +"\t\t" + 
this.getQuantity() + "\t" + this.item.getPrice() + "\t" + 
this.getExtensionPrice(); 
```

它现在格式正确，但我仍然不确定如何获得`double`2 位小数的 to 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:34:09.643

试试这个

```
this.item.getPrice().ToString("$#,0.00"); 
```

自定义数字格式字符串

[http://msdn.microsoft.com/en-us/library/0c899ak8.aspx](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:52:22.730

### 一致的空白

您可以避免使用常规空格并使用制表符分隔符`\t`.

```
return "SKU:\t" + this.item.getSKU() + "\t\t" + "Price:\t" + this.item.getPrice(); 
```

（编辑...）

或者，您可能需要使用填充值，以便它们具有一致的宽度。例如，您需要取 $20.00 并用空格填充它，以便它与最大长度值（$4000.00）对齐。

```
price:  __$20.00
price:  $4000.00 
```

...其中下划线表示添加的空格。

这可以通过首先遍历所有元素并找到所有元素子组的最长长度来实现。一旦你有最大的已知长度，你可以用差异填充剩余的元素。

### 四舍五入小数位

```
inputValue = Math.Round(inputValue, 2); 
```

# jquery - 2 列，1 列具有固定宽度，另一列变化以适应行的其余部分

> ID：15962200
> 
> 赞同：0
> 
> 时间：2013-04-12T02:40:21.930
> 
> 标签：jquery, html, css

我有一个简单的 2 块列：

```
<div id="wrap">
    <div class="column_1"></div>
    <div class="column_2"></div>
</div> 
```

我想`column_2`固定宽度，比如说60px。两列都向左浮动。列的组合总（可变）宽度等于换行总宽度：

```
#wrap { width: 100%; }
.column_1, .column_2 { float: left; }
.column_2 { width: 60px; } 
```

注意：换行会改变宽度，因为它嵌套在不同大小的块内。

一个很好的使用示例是 column_1 中的文本输入，column_2 中有一个按钮。自然地，按钮保持相同的大小，而 column_1 内的输入将相应地拉伸。

怎么办？

**注意：**我更喜欢 CSS 解决方案，但如果这真的不可能，我愿意使用 jquery 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:58:32.643

这取决于您希望支持旧浏览器落后多远。您可以进行一些检测，如果他们支持`flexbox`则使用它，否则使用`jquery`. Javascript 将始终为它工作，但它会添加另一层处理。如果您想尝试使用新`flexbox`规范，可以查看此[http://www.adobe.com/devnet/html5/articles/working-with-flexbox-the-new-spec.html](http://www.adobe.com/devnet/html5/articles/working-with-flexbox-the-new-spec.html)

# jquery - 我与 maximage 和 hoverIntent 有插件冲突

> ID：15962208
> 
> 赞同：0
> 
> 时间：2013-04-12T02:41:13.323
> 
> 标签：jquery, hoverintent

有没有人遇到过 hoverIntent 和 maximage 插件的问题？

这一切都适用于基本`hover()`但当我改变`hover()`它`hoverIntent()`打破了页面上的所有 jQuery。

我正在使用这个 jQuery：

```
ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js?v=1.4.4" 
```

对于最大化。

```
code.jquery.com/jquery.js" 
```

对于悬停意图。

我对 jQuery 比较陌生！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:35:47.813

## 在代码中包含 hoverIntent 插件

`<script type="text/javascript" src="http://cherne.net/brian/resources/jquery.hoverIntent.js"></script>`

# android - Action Bar Sherlock Holo.Light 蜂巢主题

> ID：15962217
> 
> 赞同：0
> 
> 时间：2013-04-12T02:42:49.430
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在尝试使我的应用程序与 3.0+ 的所有 android 版本兼容。我的操作栏在 4.0+ 版本中运行良好，但是当我尝试在蜂巢模拟器上运行它时出现此错误：

> 04-12 03:28:49.525: E/AndroidRuntime(1447): 致命异常: main 04-12 03:28:49.525: E/AndroidRuntime(1447): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. example.chartviewer/com.example.chartviewer.JsonActivity}：java.lang.IllegalStateException：您必须使用 Theme.Sherlock、Theme.Sherlock.Light、Theme.Sherlock.Light.DarkActionBar 或衍生产品。04-12 03:28:49.525: E/AndroidRuntime(1447): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815) 04-12 03:28:49.525: E/AndroidRuntime(1447): 在 android. app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831) 04-12 03:28:49.525: E/AndroidRuntime(1447): 在 android.app.ActivityThread.access$500(ActivityThread.java:122) 04-12 03:28 ：49.525：E/AndroidRuntime（1447）：在 android.app.ActivityThread$H。在 dalvik.system.NativeStart.main(Native Method) 04-12 03:28:49.525: E/AndroidRuntime(1447): Caused by: java.lang.IllegalStateException: You must use Theme.Sherlock, Theme.Sherlock.Light, Theme.Sherlock.Light.DarkActionBar 或衍生产品。04-12 03:28:49.525: E/AndroidRuntime(1447): 在 com.actionbarsherlock.internal.ActionBarSherlockCompat.generateLayout(ActionBarSherlockCompat.java:1003) 04-12 03:28:49.525: E/AndroidRuntime(1447): 在com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(ActionBarSherlockCompat.java:915) 04-12 03:28:49.525: E/AndroidRuntime(1447): 在 com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:849) 04 -12 03:28:49.525: E/AndroidRuntime(1447): 在 com.actionbarsherlock.app.SherlockActivity.setContentView(SherlockActivity.java:

这是我的操作条码：

```
<style name="Theme.mmcv" parent="@android:style/Theme.Holo.Light">

   <item name="android:actionBarItemBackground">@drawable/selectable_background_mmcv</item>
    <item name="android:actionBarStyle">@style/mmcv_solid_ActionBar</item>
    <item name="android:actionBarTabStyle">@style/mmcv_ActionBarTabStyle</item>

</style>

<style name="mmcv_solid_ActionBar" parent="@android:style/Widget.Holo.Light.ActionBar.Solid">
  <item name="android:background">@drawable/ab_solid_mmcv</item>
    <item name="android:backgroundStacked">@drawable/ab_stacked_solid_mmcv</item>
    <item name="android:backgroundSplit">@drawable/ab_bottom_solid_mmcv</item>

</style>

<style name="mmcv_ActionBarTabStyle" parent="@android:style/Widget.Holo.Light.ActionBar.TabView">
    <item name="android:background">@drawable/tab_indicator_ab_mmcv</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:32:36.497

根据错误消息：

> 您必须使用 Theme.Sherlock、Theme.Sherlock.Light、Theme.Sherlock.Light.DarkActionBar 或衍生产品

而不是你当前的 Theme.Holo.Light

我建议查看[ActionBarSherlock 主题](http://actionbarsherlock.com/theming.html)页面或查看来自[主题生成器](http://jgilfelt.github.io/android-actionbarstylegenerator/)的结果以获取适当的 ActionBarSherlock 属性。

# c++ - glPolygonMode 的问题 - GL_FILL“跳过”顶点

> ID：15962218
> 
> 赞同：3
> 
> 时间：2013-04-12T02:43:17.397
> 
> 标签：c++, opengl, 2d, glut

在尝试绘制多边形并用特定颜色填充它时，我遇到了一个奇怪的问题：

如果我将多边形模式设置为：

`glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);`

多边形渲染得很好：

![将多边形填充模式设置为 GL_LINE 后渲染的多边形](https://i.stack.imgur.com/mPeC4.png)

但是，只要我用以下内容替换该行：

`glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);`

多边形没有正确填充，但似乎大多数线都被投影到它的第一个顶点，或者沿着这些线：

![在此处输入图像描述](https://i.stack.imgur.com/BosyO.png)

我显然做错了什么。我想要做的是将颜色保持在多边形内，但它似乎忽略了几个顶点。可能有什么问题？

这是我的代码中可能感兴趣的一些选定部分。我跳过了一些数据结构加载和其他可能不太相关的内容：

```
int main(int argc, char **argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE);

    glutInitWindowSize(640, 480);
    glutInitWindowPosition(150, 100);
    glutCreateWindow("CR-View GL");

    glutDisplayFunc(display);

    glutMainLoop();
    return 0;
}

void display(void) {
    glClearColor(0, 0, 0, 0);
    glClear(GL_COLOR_BUFFER_BIT);
    /* Set drawing color */
    glColor3f(1, 0, 1);

    drawPolys(currentDrawingMode);

    /* Clear screen and draw */
    glutSwapBuffers();
}

// Draws the polygons
void drawPolys (int id) {   
    int poly, vertex;
    // set wireframe mode (if an empty polygon is required)
    if (id == 0) {
        glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);
    }

    //Sets color fill mode
    if (id == 1) {
        glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);
    }

    // Draw each polygon...
    for (poly = 0; poly < polyCount; poly++) {

        glBegin(GL_POLYGON);
            // Draw each vertex...
        for (vertex = 0; vertex < Polygons[poly].vertexCount; vertex++) {
            glVertex2f((float)Polygons[poly].vertices[vertex].x, (float)Polygons[poly].vertices[vertex].y);
        }
        glEnd();
    } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T02:55:47.183

如果您正在使用请`GL_POLYGON`注意它仅支持[*凸*](http://en.wikipedia.org/wiki/Convex_and_concave_polygons#Convex_polygons)多边形。

# ruby-on-rails - Rails，是否可以部分使用 SSL

> ID：15962221
> 
> 赞同：0
> 
> 时间：2013-04-12T02:43:34.713
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

是否可以将 http 用于某些请求，将 https 用于一个 Rails 服务器的其他请求，例如

```
http://i.mysite.com/ 
```

和

```
https://mysite.com/ 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:46:56.547

是的：

```
before_filter :https_redirect

def https_redirect
  if request.ssl? && !use_https? || !request.ssl? && use_https?
    protocol = request.ssl? ? "http" : "https"
    flash.keep
    redirect_to protocol: "#{protocol}://", status: :moved_permanently
  end
end

def use_https?
  controller_name == "abc"
end 
```

（我从某个地方获取此代码，我不记得了，所以我不能给出学分......但我在一个项目中使用它并且它有效）。

更新：我从 RailsCasts 获取代码，哈哈，感谢 Ryan Bates。

# php - ajax 成功函数（使用 html 方法）只触发一次

> ID：15962222
> 
> 赞同：0
> 
> 时间：2013-04-12T02:43:43.813
> 
> 标签：php, jquery, ajax

我在使用 ajax 回调时遇到了一些问题，希望能得到一些帮助。基本上，这个脚本用archive.php替换了#inbox div（通常会生成消息和匹配的模态，但为了简单起见，我只包含了通用模态）。

关闭模式时会触发 ajax 回调。它当前返回模态 ID。但是，这只适用于一次 - 这就是我遇到问题的地方。问题似乎出在 jQuery html 命令上。我已经用 alert(id) 替换了它，脚本将运行任意多次。有什么建议么？如果我需要澄清更多，请告诉我。谢谢。

HTML / JavaScript：

```
<div id="inbox"> <!-- Content should be put between this div -->
      <?php include_once('archive.php'); ?>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    $('#inbox .modal').on('hidden', function() {
      id = $(this).attr('id');
        $.ajax({
          type: "POST",
          url: "archive.php",
          data: {message_id : id},
          cache: false,
          success: function(data) {
            $('#inbox').html(data); // problem is here
          }
        });
    });
  });
</script> 
```

PHP（存档.php）：

```
<?php echo $_POST['message_id']; // I've also used SQL inserts, which work fine when I'm not using the jQuery HTML command ?>

<!-- Modal 1 -->

<a href="#modalOne" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

<div id="modalOne" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div>

<!-- Modal 2 -->
<a href="#modalTwo" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

<div id="modalTwo" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div>

<!-- Modal 3 (etc...) --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:50:37.533

当你运行这个：

```
$('#inbox .modal').on('hidden', function() { 
```

它找到当前`'#inbox .modal'`对象并将事件处理程序绑定到它们。

当你这样做时：

```
$('#inbox').html(data); 
```

它用新的 DOM 对象替换了这些 DOM 对象，并且您不再有任何事件处理程序在这些新对象上处于活动状态。

您有两种选择来修复它：

1.  您可以使用与动态创建的对象一起使用的委托事件处理。
2.  您可以在替换 HTML 后重新绑定事件处理程序。

我不知道`hidden`您正在使用的事件，但如果它适用于委托事件处理，那么您可以更改为使用委托事件处理：

```
$('#inbox').on('hidden', '.modal', function() { 
```

在这里，事件绑定到`#inbox`未重新创建的对象，然后它检查冒泡的事件以查看它们是否源自`.modal`对象。这就是委托事件处理的工作方式，它适用于在事件处理程序安装在父对象上之后动态创建的子对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T02:51:17.367

您已将事件绑定到`$('#inbox .modal')`，因此当您替换内容时，`$('#inbox').html(data)`您也会删除（替换）事件绑定到的元素。而是尝试`$('#inbox').on('hidden', '.modal', function() {`绑定您的事件。

# ajax - 使用对话框完成 AJAX 调用后，如何重新加载页面？

> ID：15962223
> 
> 赞同：10
> 
> 时间：2013-04-12T02:43:44.787
> 
> 标签：ajax, jquery, jquery-ui-dialog, jquery-dialog

因此，一旦用户单击打开的链接，我就会有一个带有表单的对话框 UI。一旦他们单击“添加按钮”，它就会创建一个 AJAX 调用，将数据提交到数据库中。我需要添加的是刷新页面的 reload() 函数。

如何添加重新加载功能？

我试图添加 windows.localtion.reload(); 你可以看到我的代码。那条线由于某种原因不起作用

```
//Update contact dialog box
    $( "#contact-edit" ).dialog({
    resizable: false,
    width: 500,
    modal: true,
    autoOpen: false,
    buttons: {
        "Update Info": function(e) {

        var formData = $('#edit-form').serialize();

        //submit record
        $.ajax({    
            type: 'POST',
            url: 'ajax/handler-contact-update.php',     
            data: formData,
            dataType: 'json',
            cache: false,
            timeout: 7000,
            success: function(data) {           

                $('#response-edit').removeClass().addClass((data.error === true) ? 'errorBox' : 'passBox').html(data.msg).fadeIn('fast');   

                if ($('#response-edit').hasClass('passBox')) {
                    $('#response-edit').fadeIn('fast');
                    $('#edit-form').hide();
                        $( "#contact-edit" ).dialog("close");
                        windows.localtion.reload();
                }       
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {

                $('#response-edit').removeClass().addClass('errorBox')
                            .html('<p>There was an<strong> ' + errorThrown +
                                  '</strong> error due to a<strong> ' + textStatus +
                                  '</strong> condition.</p>').fadeIn('fast');           
            },              
            complete: function(XMLHttpRequest, status) {            
                    $('form')[0].reset();
                    //$( this ).dialog( "close" );

            }
        }); 

        },
        Cancel: function() {
            $( this ).dialog( "close" );
        },
        Submit: function(){
            $('form')[0].submit();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-12T02:45:58.163

你有一个错字：

```
windows.localtion.reload(); 
```

应该

```
window.location.reload(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-12T03:51:30.693

你可以尝试很多方法来重新加载页面，我尝试过很少，至少有几个可以帮助别人。

```
location.reload()

location.reload(false)

window.location = window.location

window.location.reload(); 
```

如果您使用链接，请使用此链接：

```
location.href = location.href 
```

# javascript - Sinatra api 的 Ember 数据映射问题

> ID：15962225
> 
> 赞同：0
> 
> 时间：2013-04-12T02:44:09.807
> 
> 标签：javascript, ember.js, sinatra

我对 ember 很陌生，目前正在开发一个由 sinatra api 支持的（非常）轻量级的 ember 应用程序。我在将我的 api 提供的 JSON 映射到实际的 ember 对象时遇到了一些问题。每当我尝试使用此数据呈现模板时，我都会收到“未捕获的错误：断言失败：您的服务器返回了一个带有密钥 0 的哈希，但您没有它的映射”

这是我的 API 的 JSON 格式：

```
[{"sha":"c1133d9ec33"},{"sha":"2b2d4dd4590"}.....] 
```

我的 Ember 代码片段如下：

```
App.Store = DS.Store.extend({
  LOG_TRANSITIONS: true,
  revision: 12,
});

App.Router.map(function(){
  this.resource('commits', function(){
    this.route('commits', {path: '/:sha'});
  });
});

//COMMITS
App.CommitsRoute = Ember.Route.extend({
  model: function(){
    return App.Commit.find(); //pulls all commts at /commits
  }
});

//COMMIT
App.CommitRoute = Ember.Route.extend({
  model: function(params){
    return App.Commit.find(params.sha);
  }
});

App.Commit = DS.Model.extend({
  sha: DS.attr('string'),
  image_url: function() {
    return 'http://localhost:9393/commits' + this.get('sha');
  }.property('sha')
}); 
```

关于为什么会发生这种情况的任何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:19:29.947

Ember Data 期望您的 API 以命名的根返回。

您需要更新您的 API 以返回带有根的 JSON

`{"commits": [{"sha":"c1133d9ec33"},{"sha":"2b2d4dd4590"}.....]}`

# c# - 如何根据日期范围生成 listView？

> ID：15962226
> 
> 赞同：0
> 
> 时间：2013-04-12T02:44:25.800
> 
> 标签：c#, wpf, listview

我怎么能设法根据日期范围做一个列表视图？

![生成列表视图](https://i.stack.imgur.com/5wwiU.jpg)

有可能做这件事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:14:23.553

在 XAML 中：

```
<ListView>
    <ListView.View>
        <GridView x:Name="myView">
        </GridView>
    </ListView.View>
</ListView> 
```

在 YourForm.cs 中

```
private void CreateColumns()
{
    var startDate = new DateTime(2013, 05, 07);
    var endDate = new DateTime(2013, 05, 17);

    //// Ensure that startDate < endDate, no validation in this example.

    var tmp = startDate;
    while (tmp <= endDate)
    {
        GridViewColumn gc = new GridViewColumn();
        gc.Header = tmp.ToShortDateString();
        gc.Width = 100;
        this.myView.Columns.Add(gc);
        tmp = tmp.AddDays(1);
    }
} 
```

# java - Java：抛出异常会杀死它的方法吗？

> ID：15962228
> 
> 赞同：38
> 
> 时间：2013-04-12T02:45:45.010
> 
> 标签：java, exception, exception-handling

例如：

```
public String showMsg(String msg) throws Exception {
    if(msg == null) {
        throw new Exception("Message is null");
    }
    //Create message anyways and return it
    return "DEFAULT MESSAGE";
}

String msg = null;
try {
    msg = showMsg(null);
} catch (Exception e) {
    //I just want to ignore this right now.
}
System.out.println(msg); //Will this equal DEFAULT MESSAGE or null? 
```

在某些情况下，我需要基本上忽略异常（通常当一个方法可以抛出多个异常，而在特定情况下一个无关紧要），所以尽管我为了简单起见使用了可怜的例子，但 showMsg 中的返回仍然会运行还是 throw 实际上会返回该方法？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-04-12T02:50:49.767

如果抛出异常，该`return`语句将*不会运行。*抛出异常会导致程序的控制流立即转到异常的处理程序（*），从而跳过任何其他方式。因此，`msg`如果.`null``showMsg`

(*) 除了`finally`块中的语句将运行，但这在这里并不真正相关。

# c++ - 如果语句导致程序因递归而崩溃

> ID：15962236
> 
> 赞同：0
> 
> 时间：2013-04-12T02:46:57.330
> 
> 标签：c++, if-statement, recursion, artificial-intelligence

我不得不删除我所有的课程代码，对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:54:01.047

你没有在你的函数中做任何边界检查，所以假设它`board`只是一个标准数组或一个没有边界检查的类，那么你什么时候`x<=1`会越界并直接进入未定义的行为。

在没有看到更多代码的情况下，最明显的检查和修复将是：

```
else if( x > 1 && (board[x-1][y] == 'S' && board[x-2][y] == '.') ) 
```

`if`您的语句也有边界检查问题，如果`x >= 4`那么您也将超出范围：

```
if( x <= 4 && (board[x+1][y] == 'S' && board[x+2][y] == '.') ) 
```

如果您决定更改它，拥有某种定义 max 的变量会很有帮助。

# java - 在Android游戏开发中学习OpenGL ES需要学习Canvas吗？

> ID：15962239
> 
> 赞同：3
> 
> 时间：2013-04-12T02:47:19.973
> 
> 标签：java, android, opengl-es, android-canvas

我目前正在关注 Zechner 和 Green 的《Beginning Android Games》一书，我想知道是否可以跳过教授 Canvas 的部分并直接进入 OpenGL ES？可以吗，或者我会错过一些与 Android 相关的技术内容？

# ruby - Ruby Regex：如果行不以>开头，则扫描字符串

> ID：15962245
> 
> 赞同：0
> 
> 时间：2013-04-12T02:47:57.677
> 
> 标签：ruby, regex, exit

我需要扫描文本文件以查找不以 > 开头的行上是否出现“附加”。如果我找到附加，我退出 1，否则，一个 0

这是一个例子：

```
>hello!
>foo
>bag
>whatever
attach 
```

该示例将以 1 退出。

```
>attach
>foo
>too 
```

此示例将以 0 退出，因为唯一出现的附加出现在以 > 开头的行上。

这是我到目前为止所拥有的大纲，但是对于我如何使用 Ruby Regex 执行此操作，语法使我无法理解：

```
text = IO.read(ARGV[0]).scan(/^"[attach]"/)exit!(1)
exit(0) 
```

所以这里的想法是我满足扫描正在做的任何需求，如果我发现附加，则立即以 1 退出。

所以任何见解都会很棒！（注意：我不允许使用循环！）

注意：“附加”只需要出现在一行中的任意位置。所以一行看起来像这样：

```
file hello attach hi 
```

会以 1 退出。

编辑：

以下是我正在运行的当前 test.txt 文件。我运行它的语法是，在 1.9.3 下，

ruby attach.rb test.txt

然后我回显返回：

回声$？

这是名为 test.txt 的文件

```
> attach
> hello!
> how are you?
attach 
```

该文件应该返回 1。

使用该文件，这是我想看到的：

```
-bash-4.1$ ruby attach.rb test.txt
-bash-4.1$ echo $?
0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T03:00:03.433

```
text = IO.read(ARGV[0]).scan(/^(?!>).*?attach/) 
```

零宽度负前向断言允许您匹配 not-> 而不消耗源的一部分（在第一个示例中，可能是附加的“a”）。

要求的成绩单：

```
julian@maw learn $ cat f
> attach
> hello!
> how are you?
attach
julian@maw learn $ irb
2.0.0-p0 :001 > text = IO.read('f').scan(/^(?!>).*?attach/)
 => ["attach"] 
2.0.0-p0 :002 > 

julian@maw learn $ cat g
> attach
> hello!
> how are you?
> also >'d attach
julian@maw learn $ irb
2.0.0-p0 :001 > text = IO.read('g').scan(/^(?!>).*?attach/)
 => [] 
2.0.0-p0 :002 > 
```

# ios - 有没有办法在 iOS 中读取“响铃振动”用户设置？

> ID：15962248
> 
> 赞同：1
> 
> 时间：2013-04-12T02:48:03.910
> 
> 标签：ios, vibration

我正在寻找 iOS 中“响铃振动”设置的价值。能够读取“静音振动”的值也很好。有谁知道如何访问这些值？

# python - How do I sleep a dedicated python thread for task scheduling?

> ID：15962249
> 
> 赞同：0
> 
> 时间：2013-04-12T02:48:08.440
> 
> 标签：python, multithreading, function, scheduled-tasks, sleep

I'm writing a library that will connect to sockets and manage them, process its data, and do stuff based on that.

My problem lays on sending b"\r\n\x00" to the socket every 20 seconds. I thought that if I started a new thread for the ping function, that would work.

..however, time.sleep() seems to pause the whole entire program instead of what I thought would be just that thread.

here's my code thus far:

```
def main(self):
  recvbuf = b""
  self.connect(self.group, self.user, self.password)
  while self.connected:
    rSocket, wSocket, error = select.select([x[self.group] for x in self.conArray], [x[self.group] for x in self.conArray], [x[self.group] for x in self.conArray], 0.2) #getting already made socket connections
    for rChSocket in rSocket:
      while not recvbuf.endswith(b"\x00"): #[-1] doesnt work on empty things... and recvbuf is empty.
        recvbuf += rChSocket.recv(1024) #need the WHOLE message ;D
      if len(recvbuf) > 0:
        dataManager.manage(self, self.group, recvbuf)
        recvbuf = b""
    for wChSocket in wSocket:
      t = threading.Thread(self.pingTimer(wChSocket)) #here's what I need to be ran every 20 seconds.
      t.start()
  x[self.group] for x in self.conArray.close() 
```

and here's the pingTimer function:

```
def pingTimer(self, wChSocket):
  time.sleep(20)
  print(time.strftime("%I:%M:%S %p]")+"Ping test!") #I don't want to mini-DDoS, testing first.
  #wChSocket.send(b"\r\n\x00") 
```

Thanks :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:50:01.517

This:

```
t = threading.Thread(self.pingTimer(wChSocket)) 
```

Does not do what you expect. It calls `self.pingTimer` in the same thread and passes the return value to `threading.Thread`. That's not what you want. You probably want this:

```
t = threading.Thread(target=self.pingTimer, args=(wChSocket,)) 
```

# java - Java：打开带有 IP 的 URL

> ID：15962254
> 
> 赞同：1
> 
> 时间：2013-04-12T02:48:51.663
> 
> 标签：java, url, ip

我正在构建一个网络爬虫。[读完这篇](http://nlp.stanford.edu/IR-book/html/htmledition/dns-resolution-1.html)我明白 DNS 解析很慢，所以我们应该分离出 DNS Resolver。

所以说你有 String urlString [http://google.com](http://google.com) 你可以通过这样做将它转换成一个 ip

```
URL url = new URL(urlString)
InetAddress ip = InetAddress.getByName(url.getHost()); 
```

但是，您如何下载实际的网站本身呢？

使用 url，我们可以像这样：

```
String htmlDocumentString = new Scanner(new url.openStream(), "UTF-8").useDelimiter("\\A").next(); 
```

但是如果我们要使用解析后的IP，是不是必须手动重构带有ip的URL呢？没有`url.setHost()`办法，就是有点乱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:50:48.860

从 URL 读取很简单：

```
public class URLReader {
public static void main(String[] args) throws Exception {

    URL oracle = new URL("http://www.oracle.com/");
    BufferedReader in = new BufferedReader(
    new InputStreamReader(oracle.openStream()));

    String inputLine;
    while ((inputLine = in.readLine()) != null)
        System.out.println(inputLine);
    in.close();
} 
```

取自：[http ://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html](http://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:14:24.780

试试这个：

```
 URL oracle = new URL("http://www.oracle.com/");
  URLConnection urlc = oracle.openConnection();
  urlc.setDoInput(true);
  urlc.setRequestProperty("Accept", "text/text");
  InputStream inputStream = urlc.getInputStream();
  String myString = IOUtils.toString(inputStream, "UTF-8"); 
```

...使用上面 Apache Commons 的 IOUtils：

[http://commons.apache.org/io/api-1.4/org/apache/commons/io/IOUtils.html#toString(java.io.InputStream,%20java.lang.String)](http://commons.apache.org/io/api-1.4/org/apache/commons/io/IOUtils.html#toString(java.io.InputStream,%20java.lang.String))

# jquery - 没有导航的 jQuery 选项卡可能 ?

> ID：15962257
> 
> 赞同：0
> 
> 时间：2013-04-12T02:49:23.440
> 
> 标签：jquery, css, jquery-tabs

我遇到的所有 jQuery Tab 系统都使用`<ul>`with 链接，它与选项卡内容 div 是分开的。有没有办法编写以下代码（我在这里使用伪代码）......

```
<div class="tab"><a href="#tab1">Tab1</a></div>
<div class="tab-content" id="tab1">Content for Tab 1 here .......</div>
<div class="tab"><a href="#tab2">Tab2</a></div>
<div class="tab-content" id="tab2">Content for Tab 2 here .......</div> 
```

布局如下所示：

**[Tab1] [Tab2] [Tab3] [Tab4]**
[选项卡内容固定在选项卡下方]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:27:46.013

不，标签标题需要在顶部分组。一些小部件，如手风琴，让您指定标题的元素类型，但即便如此，标记也必须是某种方式。您是否有一些限制阻止您执行 jQuery 所需的操作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:11:40.400

您也许可以使用`ol`标签，但我不确定这是否会有所帮助。如果您正在制作标签，您也可以尝试创建一个表格。

# c++ - 无法使用 UTF-8 设置时源代码中的汉字

> ID：15962259
> 
> 赞同：1
> 
> 时间：2013-04-12T02:49:49.830
> 
> 标签：c++, visual-c++, character-encoding, cjk, multibyte

这是场景：

*   我只能使用`char*`字符串的数据类型，不能`wchar_t *`
*   我的 MS Visual C++ 编译器必须设置为 MBCS，而不是 UNICODE，因为我拥有的第三方源代码正在使用 MBCS；将其设置为 UNICODE 将导致数据类型问题。
*   我正在尝试在需要获取字符串以便正确打印的打印机上打印中文字符

我应该如何处理这一行以使代码正确：`char * str = "你好";`

也许将其转换为十六进制序列？如果是，如何？非常感谢。

```
char * str = "你好";
size_t len = strlen(str) + 1;

wchar_t * wstr = new wchar_t[len];
size_t convertedSize  = 0;
mbstowcs_s(&convertedSize, wstr, len, str, _TRUNCATE);
cout << convertedSize;

if(! ExtTextOutW(resource->dc, 1,1 , ETO_OPAQUE, NULL, wstr ,  convertedSize, NULL))
{
  return 0;
} 
```

**更新**：让我们以另一种方式提出问题

我有这个，char * str 包含 UTF-8 代码单元序列，对于 2 个汉字你好，ExtTextOutW 仍然无法正确执行 wstr，因为我认为我的 mbstowcs_s 代码仍然无法正常工作。知道为什么吗？

```
char * str = "\xE4\xBD\xA0\xE5\xA5\xBD";    
    size_t len = strlen(str) + 1;
    wchar_t * wstr = new wchar_t[len];
    size_t convertedSize  = 0;
    mbstowcs_s(&convertedSize, wstr, len, str, _TRUNCATE);
    if(! ExtTextOutW(resource->dc, 1,1 , ETO_OPAQUE, NULL,  wstr ,  len, NULL))
    {
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T06:31:12.817

事实是，`你好`是一个 Unicode 字符序列。您将需要使用 Unicode 字符集以确保其正确显示。

唯一可能的例外是，如果您使用的多字节字符集在基本字符集中包含这两个字符。既然您说您无论如何都无法为 MBCS 进行编译，那可能是一个解决方案。为了使其工作，您必须将系统语言设置为包含此字符的语言。您执行此操作的确切方式会在每个操作系统版本中发生变化。我认为他们正在尝试“改进”它。至少在 Windows 7 上，他们称之为“非 Unicode 程序的语言”设置，可在“区域和语言”控制面板中访问。

如果没有将这些字符作为基本字符集的一部分提供的系统语言，那么您基本上就不走运了。

即使您尝试使用使用该`char`数据类型的 UTF-8 编码（Windows 本身不支持，而是更喜欢 UTF-16 来支持其 Unicode），很可能您正在连接的任何其他应用程序/库with 将无法处理它。Windows 应用程序假定 a`char`包含当前 ANSI/MB 字符集中的字符。Unicode 字符在 a 中`wchar_t`，并且由于您不能使用它，这表明该应用程序根本不支持 Unicode。（顺便说一句，这意味着它已经坏了——是时候升级了。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:01:26.463

作为对 MYMNeo 所说的改编，我建议这样做可行：

```
wchar_t *str = L"你好";
fputws(str, stdout); 
```

附言。这可能不是 C: `cout << convertedSize;`。

# java - 在 Java 中使用构造函数进行深度复制

> ID：15962263
> 
> 赞同：0
> 
> 时间：2013-04-12T02:50:11.067
> 
> 标签：java, arraylist, deep-copy

我将这些说明用于该方法：构造函数 public ProgrammingTeam(ProgrammingTeam p)，它将 ProgrammingTeam p 作为参数并构造 p 的深层副本。不要只写 meet = p.meets;。要进行深拷贝，必须调用 ArrayList 的拷贝构造函数： meet = new ArrayList();。

```
 public ProgrammingTeam( ProgrammingTeam p ) {
    teamName = p.teamName;
    teamMembers = new String [ p.teamMembers.length ];
    for (int i = p.teamMembers.length - 1; i >= 0; i--) {

    }
    meets = new ArrayList < Competition >();
} 
```

我无法弄清楚我应该如何撰写然后完成深层副本。我知道它需要一个 for 循环来实际复制每个对象，但我不知所措，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:04:42.943

关于字符串数组...

字符串是不可变的，因此只需复制数组就足够了，例如使用[`Arrays.copyOf()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28T%5B%5D,%20int%29)实用方法：

```
teamMembers = Arrays.copyOf( p.teamMembers, p.teamMembers.length ); 
```

* * *

至于名单，这取决于...

如果`Competition`是[*immutable*](http://en.m.wikipedia.org/wiki/Immutable_object)，请使用 ArrayList 的复制构造函数：

```
meets = new ArrayList<Competition>(p.meets); 
```

如果`Competition`是可变的，则需要调用它的复制构造函数（如果需要，定义它）。

```
meets = new ArrayList<Competition>();
for (Competition c : p.meets) {
    meets.add(new Competition(c));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:57:25.367

您需要创建所有 ProgrammingTeam 参数 p 属性的深层副本。

您可以执行以下操作：

```
for(int i = 0; i < p.teamMembers.length -1; i++){
        TeamMember teamMember = new TeamMember();
        // set attributes
        teamMember.setAttribute1(p.teamMembers[i].getAttribute1());
        ...
        teamMember.setAttributeN(p.teamMembers[i].getAttributeN());
         this.teamMembers[i] = teamMember;
 } 
```

当然，您可以简单地为列表中需要深度复制的任何对象创建一个复制构造函数。复制构造函数本质上需要完成我在 for 循环中描述的相同类型的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T02:58:52.773

做一个深拷贝`String[] teamMembers`使用`java.util.Arrays.copyOf(teamMembers, teamMembers.length)`

至于`List<Competition> meets`您可以使用的深层副本，`new ArrayList<Competition>(meets)`但只有在竞争不可变的情况下才会好

# r - 并行R比串行慢？

> ID：15962265
> 
> 赞同：0
> 
> 时间：2013-04-12T02:50:23.503
> 
> 标签：r, parallel-processing

我正在使用 R 并行包在我的笔记本电脑上进行并行计算：

```
> library(parallel)
> x = matrix(rep(1,2000), nrow=2)
> cl <- makeCluster(getOption("cl.cores", 8))
> system.time(replicate(5000, parApply(cl, x, 1, paste, collapse="-")))
   user  system elapsed 
  7.950   0.966  13.562 
> stopCluster(cl)
> system.time(replicate(5000, apply(x, 1, paste, collapse="-")))
   user  system elapsed 
  8.357   0.001   8.355 
```

我在这里犯了什么错误吗？我唯一不太确定的是如何使用`makeCluster`.

更新：为了减少并行化的开销成本，使用更大的矩阵`x`并删除`replicate`并在基准测试尽管如此，并行和串行之间的差异仍然很小，有时并行速度较慢。

# r - 在 R 中创建形状文件

> ID：15962277
> 
> 赞同：10
> 
> 时间：2013-04-12T02:51:25.843
> 
> 标签：r, gis, shapefile

我正在尝试在 R 中创建一个 shapefile，稍后将其导入到 Fusion Table 或其他一些 GIS 应用程序中。

首先，我导入了一个包含加拿大所有人口普查区的空白 shapefile。我已根据 CT 的唯一 ID 将其他数据（以表格格式）附加到 shapefile，并映射了我的结果。目前，我只需要温哥华的那些，我想导出一个仅包含温哥华 CT 以及我新附加的属性数据的 shapefile。

这是我的代码（由于隐私原因省略了一些部分）：

```
shape <- readShapePoly('C:/TEST/blank_ct.shp') #Load blank shapefile
shape@data = data.frame(shape@data, data2[match(shape@data$CTUID, data2$CTUID),]) #data2 is my created attributes that I'm attaching to blank file
shape1 <-shape[shape$CMAUID == 933,] #selecting the Vancouver CTs 
```

我见过其他使用这个的例子：**writePolyShape**来创建 shapefile。我试过了，它在一定程度上奏效了。它创建了 .shp、.dbf 和 .shx 文件。我缺少 .prj 文件，我不确定如何创建它。有没有更好的方法来创建 shapefile？

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T03:16:41.077

使用`rgdal`和`writeOGR`。`rgdal`将保留投影信息

就像是

```
library(rdgal)

shape <- readOGR(dsn = 'C:/TEST', layer = 'blank_ct')
# do your processing
shape@data = data.frame(shape@data, data2[match(shape@data$CTUID, data2$CTUID),]) #data2 is my      created attributes that I'm attaching to blank file
shape1 <-shape[shape$CMAUID == 933,]
writeOGR(shape1, dsn = 'C:/TEST', layer ='newstuff', driver = 'ESRI Shapefile') 
```

请注意，这`dsn`是包含文件的`.shp`文件夹，并且是不带扩展`layer`名的 shapefile 的名称。`.shp`它将读取 ( `readOGR`) 并写入 ( `writeOGR`) 所有组件文件 ( `.dbf`,`.shp`等`.prj`)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T14:54:04.517

问题解决了！再次感谢帮助过的人！

这是我最终做的事情：

正如 Mnel 所写，这一行将创建 shapefile。

```
writeOGR(shape1, dsn = 'C:/TEST', layer ='newstuff', driver = 'ESRI Shapefile') 
```

但是，当我运行此行时，它返回此错误：

```
Can't convert columns of class: AsIs; column names: ct2,mprop,mlot,mliv 
```

这是因为我的属性数据不是数字，而是字符。幸运的是，我的属性数据都是数字，所以我运行了 transform() 来解决这个问题。

```
shape2 <-shape1
shape2@data <- transform(shape1@data, ct2 = as.numeric(ct2),
mprop = as.numeric(mprop),
mlot = as.numeric(mlot),
mliv = as.numeric(mliv)) 
```

我再次尝试了 writeOGR() 命令，但仍然没有得到我正在寻找的 .prj 文件。问题是我在导入文件时没有指定 shapefile 的坐标系。由于我已经知道坐标系是什么，我所要做的就是在导入时定义它。

```
readShapePoly('C:/TEST/blank_ct.shp',proj4string=CRS("+proj=longlat +datum=WGS84") 
```

之后，我重新运行了我想对 shapefile 和 writeOGR 行进行导出的所有操作。就是这样！

# android - 在操作栏上的下一个活动中执行注销

> ID：15962278
> 
> 赞同：0
> 
> 时间：2013-04-12T02:51:37.580
> 
> 标签：android, facebook

我正在使用[本](http://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/)教程。我在 MainActivity 中通过 facebook 登录和注销，问题是如何在下一个（主页）活动中执行注销？对于 HomeActivity ，我自己创建（通过创建新活动）。

**这是家庭活动的代码**

```
package com.innoark.motivator;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Button;

import com.facebook.Session;

public class Home extends Activity {

    Button button;
    MenuItem logout , writepost , send;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);

    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        Session session = Session.getActiveSession();
        if (session != null && session.isOpened()) {
            if (menu.size() == 0) {
                writepost = menu.add(R.string.writepost);
                logout = menu.add(R.string.settings);

            }
            return true;
        } else {
            menu.clear();
            logout = null;
            writepost = null;
        }
    return true;
    }

//  @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.equals(logout)) {

            return true;
        }
        if (item.equals(writepost)){
            Intent intent = new Intent (this,MainActivity.class);
            startActivity(intent);
        }
        return true;
    }

} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:35:05.777

这是注销的代码，您可以检查它............

```
 signoutbtn = (Button) findViewById(R.id.signout_btn);
    signoutbtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            SharedPreferences mSharedPreference =getSharedPreferences("SharedData",Context.MODE_PRIVATE);
            SharedPreferences.Editor mSaveState = mSharedPreference.edit();
            mSaveState.putBoolean("LoginSession", false);
            mSaveState.commit();
            Intent signout = new Intent(HotTaxiTabActivity.this,Login.class);
            signout.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(signout);
        }
    });

 if (item.equals(logout)) 
  {

        SharedPreferences mSharedPreference =getSharedPreferences("SharedData",Context.MODE_PRIVATE);
            SharedPreferences.Editor mSaveState = mSharedPreference.edit();
            mSaveState.putBoolean("LoginSession", false);
            mSaveState.commit();
            Intent signout = new Intent(HotTaxiTabActivity.this,Login.class);
            signout.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(signout);

    }
     return true; 
```

# java - 如何防止对象 ArrayList 中的重复项

> ID：15962279
> 
> 赞同：0
> 
> 时间：2013-04-12T02:51:55.893
> 
> 标签：java, arraylist, duplicates, duplicate-removal

我有一个自定义对象数组列表，该对象必须在一个数组列表中，但是我在列表中有一些重复项，我想在添加到列表之前进行检查。这怎么可能实现。受害者社会安全号码是唯一的。下面是我的代码：

**代码**

```
while (rs.next()){

       Citizens victims = new Citizens();
       victims.setSocialSecurityNumber(rs.getInt("victimSocialSecurityNumber"));

       victims.setfName(rs.getString("victimFName"));

       victims.setlName(rs.getString("victimLName"));

       victims.setPhoto(rs.getString("victimPhoto"));

       victims.setName(rs.getString("victimFName") +" "+ rs.getString("victimLName"));

       crime.getVictims().add(victims); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:53:09.883

您可以将arraylist转换为set并返回以消除重复项或直接使用仅允许排序的唯一元素的结构：LinkedHashSet

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T03:06:06.040

假设公民覆盖等于，你可以这样做

```
 if (!crime.getVictims().contains(victims)) {
       crime.getVictims().add(victims);  
 } 
```

虽然通常当不允许重复时，解决方案是 Set

如果您对如何覆盖 equals / hashCode 有疑问，请阅读[http://javarevisited.blogspot.com/2011/10/override-hashcode-in-java-example.html](http://javarevisited.blogspot.com/2011/10/override-hashcode-in-java-example.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T03:08:11.183

您可以使用哈希集来添加对象并将其转换为 Arraylist。这可以帮助您检查受害者是否是唯一的。

代码

设置 hashset = new HashSet();

而（rs.next（））{

```
 Citizens victims = new Citizens();
   victims.setSocialSecurityNumber(rs.getInt("victimSocialSecurityNumber"));

   victims.setfName(rs.getString("victimFName"));

   victims.setlName(rs.getString("victimLName"));

   victims.setPhoto(rs.getString("victimPhoto"));

   victims.setName(rs.getString("victimFName") +" "+ rs.getString("victimLName"));

   hashset.add(victims); 
```

}

List list = new ArrayList(hashset);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T03:06:20.153

我在这里可能完全错了，但是 for 循环不能解决您的问题吗？您可以只比较您将要添加到数组列表中所有元素的内容，如果没有匹配项添加它，如果没有匹配项？

# php - 保护站点媒体播放器和内容

> ID：15962282
> 
> 赞同：1
> 
> 时间：2013-04-12T02:52:21.013
> 
> 标签：php, data-protection

我有一个网站，在过去的几年里发展迅猛。该网站每月访问量超过 1000 万，每月请求超过 1 亿。该站点的主要重点是流式音频和一些视频内容。

目前，我在播放器启动时写了一个 cookie，在显示我当前的特价商品时有一个 15 秒的倒计时页面。当音频播放器加载时，它会检查以确保 cookie 存在，然后加载播放器并删除 cookie。大约 1 年前所有这些都很好，但是现在，当播放器加载时，我想任何人都可以查看包含 2 帧的页面源，1 帧用于文本内容，1 帧用于音频播放器，然后简单地将其嵌入到他们的自己的网站。

保护音频播放器页面的最佳方法是什么？加载播放器的页面是静态的并且始终相同，因此在加载之前检查播放器 iframe 是否由该特定页面/域引用是最佳做法吗？任何人都可以看到此解决方案可能存在的问题吗？

抱歉，请求很长，只是想详细说明一下，以便我能得到一个明智的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:04:49.267

音频播放器框架是 PHP 页面吗？您可以添加一些代码来检查页面的引用者。只需`$_SERVER['HTTP_REFERER']`针对您的域验证变量即可。

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

# javascript - 包括来自 javascript 函数调用的 knockout.js 或 html

> ID：15962287
> 
> 赞同：0
> 
> 时间：2013-04-12T02:52:50.560
> 
> 标签：javascript, html, knockout.js

我正在尝试了解有关 javascript 的更多信息，并且我一直在检查 olark 等公司的一些代码，其中包括您网站上的消息传递系统。

我注意到的一件事是，当您在服务器上安装他们的软件时，它只是一些 javascript 的简单复制/粘贴，然后您在安装的任何页面上都有一个样式化的窗口。这意味着返回了一些 HTML/CSS，对吧？

我的问题是，您如何使用 javascript 并返回或引用表单，例如 knockout.js？例如，在最简单的意义上，假设我有以下 HTML 页面。我可以使用`<script>`标签调用将返回表单的服务器吗？

```
//page1.html
<body>
    ...some html here
    <script> function call which will return a knockout.js form/table/whatever along with referencing the file containing the viewmodel</script>
</body> 
```

据我了解，`<script>`标签中的任何内容都不受同源策略的影响。这是否意味着我可以使用 javascript 来调用外部 knockout.js 表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:33:25.883

使用像这样的脚本 type="javascript/text" src="your javascript knockout.js path" 在 script 标签的 src 中定义你的 knockout.js 路径，你可以从你的 knockout.js 访问该函数。

# r - 跨列使用 `rank` 创建新变量

> ID：15962291
> 
> 赞同：1
> 
> 时间：2013-04-12T02:53:43.313
> 
> 标签：r

我有一个我想不通的问题，我几乎可以肯定涉及到`rank`。假设我有一个`df`具有 3 个具有整数值的变量的宽格式。

```
id   var1   var2  var3
1    23     8     30
2    1      2     3
3    4      5     1
4    100    80    60 
```

我想创建三个新变量，它们的值从大到小依次为`var1`、`var2`和。`var3`例如，

```
id   var1   var2  var3   var1_rank   var2_rank   var3_rank
1    23     8     30      2          3            1
2    1      2     3       3          2            1 
3    4      5     1       2          1            3
4    100    80    60      1          2            3 
```

我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T03:12:37.140

获取示例数据：

```
test <- read.table(text="id   var1   var2  var3
1    23     8     30
2    1      2     3
3    4      5     1
4    100    80    60",header=TRUE) 
```

获取排名部分并适当地重命名（注意`-x`反转排名，因此它与减小而不是增加大小有关 - 这将`data.frame`适用于用作输入的任何大小）：

```
ranks <- t(apply(test[,-1], 1, function(x) rank(-x) ))
colnames(ranks) <- paste(colnames(ranks), "_rank", sep="") 
```

加入旧数据框。

```
data.frame(test, ranks) 
```

结果：

```
> data.frame(test,ranks)
  id var1 var2 var3 var1_rank var2_rank var3_rank
1  1   23    8   30         2         3         1
2  2    1    2    3         3         2         1
3  3    4    5    1         2         1         3
4  4  100   80   60         1         2         3 
```

要使用 base R 获得@mnel 的答案，您还可以执行以下操作：

```
testres <- data.frame(test["id"],stack(test[2:4]))
testres$rank <- ave(testres$values,testres$id,FUN=function(x) rank(-x) )

> testres
   id values  ind rank
1   1     23 var1    2
2   2      1 var1    3
3   3      4 var1    2
4   4    100 var1    1
5   1      8 var2    3
6   2      2 var2    2
7   3      5 var2    1
8   4     80 var2    2
9   1     30 var3    1
10  2      3 var3    1
11  3      1 var3    3
12  4     60 var3    3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T03:38:36.233

我认为以`long`格式工作更容易（并且内存效率更高，因为`apply`将强制转换为`matrix`. 这是一种使用`reshape`和的方法`data.table`

```
library(data.table)
tlong <- reshape(data.table(test), direction ='long', varying = list(2:4), 
                 times = paste0('var',1:3), v.names = 'value')

# calculate the rank within each `id`

tlong[, rank := rank(-value), by = id]
tlong

##     id time value rank
##  1:  1 var1    23    2
##  2:  2 var1     1    3
##  3:  3 var1     4    2
##  4:  4 var1   100    1
##  5:  1 var2     8    3
##  6:  2 var2     2    2
##  7:  3 var2     5    1
##  8:  4 var2    80    2
##  9:  1 var3    30    1
## 10:  2 var3     3    1
## 11:  3 var3     1    3
## 12:  4 var3    60    3

# reshape to wide (if you want)

oldname <- paste0('var1',1:3)

twide <- reshape(tlong, direction = 'wide', timevar = 'time', idvar = 'id')
# reorder from value.var1, rank.var1,... to value.var1, value.var2,....rank.var1, rank.var2

setcolorder(twide, c('id', paste('value', oldname, sep ='.'), paste('rank', oldname, sep = '.')) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T03:05:26.170

这是一种方法：

```
data.frame(dat, 4 - t(apply(dat[, -1], 1, rank)))

## > data.frame(dat, 4 - t(apply(dat[, -1], 1, rank)))
##   id var1 var2 var3 var1.1 var2.1 var3.1
## 1  1   23    8   30      2      3      1
## 2  2    1    2    3      3      2      1
## 3  3    4    5    1      2      1      3
## 4  4  100   80   60      1      2      3 
```

# c# - Intellisense的定位

> ID：15962295
> 
> 赞同：1
> 
> 时间：2013-04-12T02:54:28.690
> 
> 标签：c#, visual-studio

如何定位上下文提示？像这样的东西：

![http://i.stack.imgur.com/iFuaq.png](https://i.stack.imgur.com/lFRql.png)

使用此代码的文本下方：

```
Point point = this.rtb.GetPositionFromCharIndex(rtb.SelectionStart);
        this.lb.Location = point; 
```

注意上面的代码输出是上下文提示，否则 Intelliense 将在 rtb 中键入的文本旁边。不在下方，因为我是在选择开始时进行的，但我只想添加 + "\n" 之类的内容，以便将其放在下方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:04:44.950

给你，把它放在以下`KeyUp`事件中`RichTextBox`：

```
using (Graphics g = this.rtb.CreateGraphics()) {
    point.Y += (int)g.MeasureString("A", rtb.Font).Height + 10; // the 10 is padding
}
this.lb.Location = point; 
```

这将测量字体的高度以计算移动它的距离。然后添加 10 用于填充。

不过，对于更大的字体，您可能需要一些额外的逻辑。

# ckeditor - ckeditor：在 div 标签内添加 span

> ID：15962297
> 
> 赞同：1
> 
> 时间：2013-04-12T02:54:36.697
> 
> 标签：ckeditor, html

我正在尝试在 div 标签内添加跨度，但到目前为止我尝试过的代码一次只创建一个`div`或一个`span`元素。这是我正在尝试的代码：

```
style : new CKEDITOR.style( {
    // element :'div',
    // attributes : { 'itemscope' : '' },
    element : 'span',
    attributes : { 'itemscope' : '', 'itemprop' : parts[ 1 ], 'name' :  parts[0] },
} ),

onClick : function() {
    this.style.apply( editor.document );
} 
```

# php - 在内部使用带有通配符的 MySQL REGEX 锚点

> ID：15962299
> 
> 赞同：0
> 
> 时间：2013-04-12T02:55:06.003
> 
> 标签：php, mysql, regex

假设我有带有“**超级计算机**”一词的数据库内容。我想使用以下搜索：

```
select * from content where content REGEXP '[[:<:]]super*[[:>:]]'; 
```

我希望进行搜索的用户能够添加通配符，例如？和 *。我想要全词搜索，除非用户按照我上面解释的那样做，所以使用 [ REGEX 'super' ] 不是一个选项。

我认为这会起作用，但我想我还是不熟悉使用表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:14:54.760

通配符`*`在正则表达式中意味着不同的东西（有点）。它表示一个序列可以重复零次或多次，而不是有一些长度为零或更多的文本可以替换它。

如果您希望用户能够使用这样的通配符，您将不得不进行一些预处理，但您可以简单地将 any 替换`*`为表达式：`\w*`。这表示您期望零个或多个单词字符，而不是空格或标点符号。所以完整的表达式看起来像：

```
select * from content where content REGEXP '[[:<:]]super.*[[:>:]]'; 
```

这表示您想要任何以“super”开头且仅包含单词字符并被单词边界包围的序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:01:39.327

**这最终成为我搜索的最终 PHP / MySQL 解决方案。**

```
$bCustom = (strpos($search, "*") !== false && strpos($search, "?") !== false) ? false : true;

$sql = "SELECT content.*, users.user, users.lastname, users.firstname FROM content INNER JOIN users ON content.created_by=users.id ";

$search = (trim($get['SEARCH']) === "") ? "*" : trim($get['SEARCH']);

if ($bCustom) {
    $search = str_replace("*", ".*", $search);
    $search = str_replace("?", ".", $search);
    $sql .= "WHERE content.name REGEXP '[[:<:]]" . $search . "[[:>:]]' OR content.content REGEXP '[[:<:]]"
            . $search . "[[:>:]]' ORDER BY content.name ASC; ";
} else {
    if ($search !== "") {
        $sql .= "WHERE MATCH (name, content) AGAINST ('" . $search . "')";
    } else {
        $sql .= "ORDER BY content.name ASC; ";
    }
} 
```

# ios - 使用 UITableView 和 Core Data 从数据库中删除一条记录

> ID：15962300
> 
> 赞同：0
> 
> 时间：2013-04-12T02:55:09.877
> 
> 标签：ios, xcode, uitableview, core-data

我正在编写一个简单的应用程序，它允许用户向数据库添加条目。数据显示在 UITableView 中。我不知道如何使用表格视图的滑动删除功能从数据库中删除一条记录。我知道代码采用这种方法：

```
-(void)setEditing:(BOOL)editing animated:(BOOL)animated {

    [super setEditing:editing animated:animated];

} 
```

但我不知道如何获取填充已刷过的单元格的数据库记录。

我有一个方法可以在用户单击导航栏上的按钮时删除所有单元格：

```
-(void)deleteAll {

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Parameters" inManagedObjectContext:context];
[fetchRequest setEntity:entity];

NSError *error;
NSArray *items = [context executeFetchRequest:fetchRequest error:&error];

for (NSManagedObject *managedObject in items) {
    [context deleteObject:managedObject];
}
if (![context save:&error]) {

}

[self.tableView reloadData];
} 
```

但我不知道如何自定义此代码以一次删除一条记录。任何让我开始的帮助将不胜感激。

我也有这种方法...我认为这会永久删除记录，但不会...

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:        (UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete) {

    // Delete the row from the data source
    [self.arr removeObjectAtIndex:indexPath.row];

    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
}
else if (editingStyle == UITableViewCellEditingStyleInsert) {
    // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
}

[self.tableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:36:17.817

我使用[MCSwipeTableCell进行了相同的滑动以删除功能](https://github.com/alikaragoz/MCSwipeTableViewCell)

要使用动画从表中删除特定行，请执行以下操作：

```
 //I am passing 0,0 so you gotta pass the row that was deleted.
 NSIndexPath *indexPath=[NSIndexPath indexPathForRow:0 inSection:0]

 [self.yourTable deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; 
```

要从核心数据中删除，请执行以下操作：

```
YourCustomModel *modelObj;

NSManagedObjectContext *context= yourmanagedObjectContext;
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"YourCustomModel" inManagedObjectContext:context]];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"yourField == %@", passTheFieldValueOfTheRowDeleted];
[request setPredicate:predicate];

NSError *error = nil;
NSArray *results = [context executeFetchRequest:request error:&error];

if ([results count]>0)
{
    modelObj = (Customers *)[results objectAtIndex:0];
}

[context deleteObject:modelObj];

if (![context save:&error])
{
    NSLog(@"Sorry, couldn't delete values %@", [error localizedDescription]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:39:49.923

你快到了.. 只需在 fetch 请求中添加一个谓词。

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(somePropertyInParameters = %d)",value]; 
   [fetchRequest setPredicate:predicate];` 
```

此外，您可以在此方法中获取滑动单元格（和 Parameter 对象）的索引路径

```
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath` 
```

# android - 如何感知AlarmManager的预定时间在重新启动时已通过

> ID：15962301
> 
> 赞同：0
> 
> 时间：2013-04-12T02:55:11.640
> 
> 标签：android

例如，设置了一个使用日历在早上 7 点计算数字的警报管理器。

但是用户在早上 6 点关闭 android 并在早上 8 点打开。所以程序不算数。

如果我在 BOOT COMPLETED 的接收器上重置 AlarmManager，我认为我无法避免这种情况。

请告诉我在这种情况下计算确切数字的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:53:33.637

你必须做一些工作。将下一次警报的时间保存在永久存储（文件、共享首选项或数据库）中。每当发生警报时，更新此值。设置一个 BOOT_COMPLETED 监听器。当启动完成的侦听器启动时，让它获取当前时间并检查它是否晚于您存储的下一个警报的时间。如果是这样，你错过了。如果没有，你没事。

现在，如果您不得不担心错过多个警报，它会变得更加复杂，但想法是一样的。

# iphone - 让这也适用于 iPad 吗？

> ID：15962305
> 
> 赞同：0
> 
> 时间：2013-04-12T02:56:00.053
> 
> 标签：iphone, image, ipad, load

如何使它也适用于 iPad？它在 iphone 上运行良好，但 Apple 要求所有应用程序都应在 ipad 上运行。有什么帮助吗？

```
 - (IBAction)chooseImage:(id)sender
    {
        self.imagePicker = [[UIImagePickerController alloc] init];
        self.imagePicker.delegate = self;
        [self.imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];

        [self presentViewController:self.imagePicker animated:YES completion:nil];
        }

    - (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
    {
        self.image = info[UIImagePickerControllerOriginalImage];
        [self.imageView setImage:self.image];
        [self dismissViewControllerAnimated:YES completion:nil];
    }

    - (void) imagePickerControllerDidCancel:(UIImagePickerController *)picker
    {
    [self dismissViewControllerAnimated:YES completion:nil];

    } 
```

* * *

现在我已经走到这一步了！现在，当我使用 ipad 从照片库中选择图像时，它不再崩溃了。问题是图像没有被选中？

有什么建议么？

```
- (IBAction)chooseImage:(id)sender
{

self.imagePicker = [[UIImagePickerController alloc] init];
self.imagePicker.delegate = self;
[self.imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){

    _popover = [[UIPopoverController alloc] initWithContentViewController:_imagePicker];
    _popover.delegate = self;
    [_popover setPopoverContentSize:CGSizeMake(320, 460)];
    [_popover presentPopoverFromBarButtonItem:[[UIBarButtonItem alloc]initWithCustomView:(UIButton*)sender] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
}

[self presentViewController:self.imagePicker animated:YES completion:nil];

}
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
if
    (self.popover && self.popover.popoverVisible) {
    [self.popover dismissPopoverAnimated:YES];
}
else
    self.image = info[UIImagePickerControllerOriginalImage];
[self.imageView setImage:self.image];
[self dismissViewControllerAnimated:YES completion:nil];
}

- (void) imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
[self dismissViewControllerAnimated:YES completion:nil];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:03:42.677

这是我关于 UIImagePickerController 的书中的部分：

[http://www.aeth.com/iOSBook/ch30.html#_uiimagepickercontroller](http://www.apeth.com/iOSBook/ch30.html#_uiimagepickercontroller)

好的，抱歉，没有通用代码。但它在架构上的工作方式与 MPMediaPickerController 的工作方式相同，为此我提供了代码来展示如何在 iPhone 和 iPad 上执行此操作：

[http://www.aeth.com/iOSBook/ch29.html#EXmodalOrPop](http://www.apeth.com/iOSBook/ch29.html#EXmodalOrPop)

这很棘手，因为弹出框管理与呈现的视图控制器管理非常不同。该代码向您展示了您必须担心的一些问题...

这是我刚刚编写的通用应用程序的*实际*代码：

```
- (IBAction)doPickAPicture:(id)sender {

    UIImagePickerControllerSourceType type = UIImagePickerControllerSourceTypePhotoLibrary;
    BOOL ok = [UIImagePickerController isSourceTypeAvailable:type];
    if (!ok) {
        return;
    }
    UIImagePickerController* picker = [UIImagePickerController new];
    picker.sourceType = type;
    picker.mediaTypes = @[(__bridge NSString*)kUTTypeImage];
    picker.delegate = self;

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
        [self presentViewController:picker animated:YES completion:nil];
    else {
        UIPopoverController* pop = [[UIPopoverController alloc] initWithContentViewController:picker];
        [pop presentPopoverFromRect:[sender bounds] inView:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
        self.currentPop = pop;
    }
}

-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {
    [self dismissViewControllerAnimated:YES completion:nil];
}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    if (self.currentPop && self.currentPop.popoverVisible) {
        [self.currentPop dismissPopoverAnimated:YES];
    } else {
        [self dismissViewControllerAnimated:YES completion:nil];
    }
    [CATransaction setCompletionBlock:^{
        self.currentPop = nil;
        // do more stuff
    }];
} 
```

# batch-file - 如何检查用户是否是管理员？

> ID：15962307
> 
> 赞同：3
> 
> 时间：2013-04-12T02:56:32.643
> 
> 标签：batch-file, cmd

由于我经常使用批处理脚本，我花费了大量时间在网上搜索纯批处理实现，**它不依赖于错误级别读取**，以检查当前或指定用户的管理员权限。

如何检查用户是否是管理员？

注意：这个问题不是重复的，因为我不想依赖错误级别的读数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:56:32.643

由于没有找到不尝试将文件写入系统目录或依赖的批处理脚本`errorlevel`，我编写了以下脚本以在其他脚本中使用或作为独立工具使用。

您可以更改代码以在脚本中工作，或将用户名传递给程序以确定用户是否为管理员。如果没有指定用户名，程序会检查当前用户的管理员身份。

```
@echo off
setlocal EnableDelayedExpansion
if "%~1" == "" (set user=%username%) ELSE (set user=%~1)
net user %user% | find "Local Group Memberships">temp.tmp
for /f %%a in ('findstr /i "Administrators" temp.tmp') do (
    echo.
    echo %user% is Admin...
    echo.
    set isadmin=y
    del temp.tmp
    pause
    goto:eof
)
echo.
echo %user% is not Admin...
echo.
set isadmin=n
del temp.tmp
pause
goto:eof 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:13:29.187

有一种简单的方法可以检查管理员权限。只需使用 OPENFILES 命令并检查状态。它需要管理员权限，因此您可以将输出通过管道传输到 nul 并检查结果。我建议您使用 2>nul，因为 2012 Server 和 Windows 8 返回 ERRORLEVEL 0 但输出“错误：无法检索数据”。这对我来说似乎是错误的（没有错误；但仍然是错误消息），但是......

```
OPENFILES >nul 2>nul
IF ERRORLEVEL 1 (
   ECHO.Right click on this file and select 'Run as administrator'.
   PAUSE
   GOTO :eof
   ) 
```

# excel - 如何使用宏在工作簿中查找单词出现？

> ID：15962311
> 
> 赞同：0
> 
> 时间：2013-04-12T02:56:53.400
> 
> 标签：excel, vba

我正在尝试在 Excel 中编写一个宏来列出给定单元格范围内的唯一单词及其出现次数。

有没有最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:37:29.583

1.  从 mehow 的评论中复制：将范围值粘贴到数组中 这是一个好的开始
2.  创建一个 Scripting.Dictionary 对象（需要参考**Microsoft Scripting Runtime**）
3.  一旦你有了字典 - 遍历数组并：

    *   检查条目是否存在 ( `Dictionary.Exists`)
    *   如果没有 - 添加键/值对 ( `Dictionary.Add`)，其中键是您的单词，值是 1
    *   如果确实如此 - 增加值 ( `Dictionary(key) = Dictionary(key) + 1`)，其中 key 是您的单词。
4.  之后，您将知道您有多少个唯一单词 ( `Dictionary.Count`)，并且您可以检查每个单词的出现次数。

# php - php PDO插入查询错误

> ID：15962313
> 
> 赞同：0
> 
> 时间：2013-04-12T02:57:02.610
> 
> 标签：php, mysql

我正在尝试运行此代码以在“问题”表中插入新行：

```
$sql = "INSERT INTO questions (id,quiz_id,question,image,type,option,answer,explanation,date) 
        VALUES (:id, :quiz_id, :question, :imagesstring, :type, :optionsstring, :answer, :explanation, :date)";
$query = $db->prepare($sql);
$results = $query->execute(array(
    ":id" => $id,
    ":quiz_id" => $quiz_id,
    ":question" => $question,
    ":imagesstring" => $imagesstring,
    ":type" => $type,
    ":optionsstring" => $optionsstring,
    ":answer" => $answer,
    ":explanation" => $explanation,
    ":date" => $date 
)); 
```

它说附近有语法错误，但我找不到。我多次检查表格，列与我插入的变量相对应。变量也具有分配给它们的正确值。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T02:58:25.750

`OPTION`是保留关键字。如果您不想收到任何语法错误，则需要使用反引号将其转义，

```
INSERT INTO questions (id, quiz_id, question, image, type, 
                       `option`, answer, explanation, date)
VALUES(...) 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

# python - How to implement bank/cross-order type updates scalably and safely

> ID：15962315
> 
> 赞同：0
> 
> 时间：2013-04-12T02:57:10.497
> 
> 标签：python, google-app-engine

I'm working on a small project on Google App Engine, trying to implement a site that allows participants to buy and sell fake goods, similarly to a stock market where the system will show real time-ish BID/ASK spreads.

As a quick example:

*   A Seller places and order to sell 10 Boxes for 8.00 (Order 1)
*   A Buyer places then an order to purchase 5 boxes for up to 9.00 (Order 2)

When the second order is placed, the system will need to do multiple tasks, all contingent on all of the tasks completing successfully.

*   Take the funds (8.00 x 5) to pay for the boxes from the Buyer and give them to the Seller
*   Take the boxes (5) from the Seller and give them to the Buyer
*   Update the orders as complete (OID 2 ) or update as partially filled (OID 1) so that they cannot be double matched
*   Take a fee from each of the participants and add it to a system account

If all that I needed was to move funds from one participant to another, I can do that safely even if the system were to fail in the middle. But to ensure that all of the tasks above complete correctly, and roll-back if any of them fail seems overly complex in App Engine.

Additionally, my "Order Book" and order matching engine are single threaded right now (using Mutexes for locking.) This seems to go against the whole point of using App Engine, but I'm not sure I see a way around it.

So (finally) - My questions are:

*   Is there a best practice when using App Engine where there are multiple steps that all depend on every step completing correctly?
*   Does anyone have any suggestions as how to either, allow the order book to be multi-threaded, or if it remains single threaded - is there a best practice to not have this core piece block the use of the site as it scales? I've thought about using tasks to queue the order adds/updates/cancels to keep the book separate from direct participant input.

Thank you, I look forward to your help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:07:57.843

I think if you can sequence the orders on a commodity, then you can clear orders offline. By "offline", I mean you can come to me at the end of the day, tell me the sequence of the orders, and I can tell you which trades happened. The one snag is, what if a buyer does not have the funds when a transaction should have cleared? You can address this in two ways:

1.  Put the funds in an escrow so that any orders that can clear do.
2.  Drop buy orders when you try to clear them if the funds are not available.

As you suggested, you'll probably need cross-entity group transactions in order to make sure the fund transfers are correct (i.e. funds are neither created nor destroyed).

You can sequence orders by time (e.g. paced_at = db.DateTimeProperty(auto_now_add=True)). If two orders have the same time, then use something (preferably something fair and deterministic) to break the tie. Hash (for fairness) of the numeric id (for determinism) might not be a bad choice here.

App Engine is inherently multithreaded in the sense that an app can have many concurrent instances (instances are not necessarily threads within the same process though). Instances are created automatically, and there is currently no way to cap the number of instances at 1\. If the state of your app is in Datastore (as opposed to local memory, memecache, or somewhere else), and your transactions are correct, then your app will be multithreaded "for free". Of course, your transactions being correct is not trivial.

Another tool to keep in mind is that tasks can be transactional. This may come in handy if you want to do offline book clearing using tasks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:29:36.410

For others that stumble upon this -

It seems that Cross-Group Transactions are now possible in Google App Engine:

[https://developers.google.com/appengine/docs/python/datastore/transactions#Using_Cross_Group_Transactions](https://developers.google.com/appengine/docs/python/datastore/transactions#Using_Cross_Group_Transactions)

This means that you can, within a single transaction concurrently read, perform logic, and then write to multiple entities at once.

I believe that this solves the first issue that I proposed in my question.

The second question - is there was way to have an order book that is not single threaded, is still open.

Thank you!

# c++ - ~vector() 退出时导致 SIGSEGV

> ID：15962317
> 
> 赞同：0
> 
> 时间：2013-04-12T02:57:11.950
> 
> 标签：c++, valgrind

这就是谷歌代码堵塞的商店信用问题。 [https://code.google.com/codejam/contest/351101/dashboard#s=p0](https://code.google.com/codejam/contest/351101/dashboard#s=p0)

我的代码在运行大型测试后给出了一个 SIGSEGV。但答案是正确的！

```
#include <cstdio>
#include <algorithm>
#include <vector>
using namespace std;
int ps[1000]={0};
vector<int> indice[1000];
int main() {
  int cases; scanf("%d", &cases);
  for(int j=1;j<=cases;j++) {
    printf("Case #%d: ", j);
    int c, is; scanf("%d%d", &c, &is);
    for(int i=0;i<=c;i++) ps[i]=0;
    for(int i=0;i<=c;i++) indice[i].clear();
    for (int i = 0; i < is; i++) {
      int it; scanf("%d", &it);
      indice[it].push_back(i+1);
      ps[it]=1;
      if (c-it>0&&ps[c-it]) {
        int a, b;
        a = indice[it][0];
        b = indice[c-it][0];
        if(c==2*it&&indice[it].size()>1) {
          b=indice[it][1];
        }

        if (a!=b) {
          printf("%d %d\n", min(a,b),max(a,b));
        }
      }
    }
  }
  return 0;
} 
```

所以我使用 valgrind 来找出发生了什么.. 但似乎这不是我的问题。

```
==17599== Invalid free() / delete / delete[] / realloc()
==17599==    at 0x4C2A4BC: operator delete(void*) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==17599==    by 0x401669: __gnu_cxx::new_allocator<int>::deallocate(int*, unsigned long) (new_allocator.h:98)
==17599==    by 0x4013CD: std::_Vector_base<int, std::allocator<int> >::_M_deallocate(int*, unsigned long) (stl_vector.h:156)
==17599==    by 0x400F60: std::_Vector_base<int, std::allocator<int> >::~_Vector_base() (stl_vector.h:142)
==17599==    by 0x400D8D: std::vector<int, std::allocator<int> >::~vector() (stl_vector.h:351)
==17599==    by 0x400C48: __tcf_0 (a.cpp:6)
==17599==    by 0x5383900: __run_exit_handlers (exit.c:78)
==17599==    by 0x5383984: exit (exit.c:100)
==17599==    by 0x5369773: (below main) (libc-start.c:258)
==17599==  Address 0x1 is not stack'd, malloc'd or (recently) free'd
==17599== 
==17599== 
==17599== HEAP SUMMARY:
==17599==     in use at exit: 128 bytes in 1 blocks
==17599==   total heap usage: 4,527 allocs, 4,527 frees, 113,664 bytes allocated
==17599== 
==17599== LEAK SUMMARY:
==17599==    definitely lost: 0 bytes in 0 blocks
==17599==    indirectly lost: 0 bytes in 0 blocks
==17599==      possibly lost: 0 bytes in 0 blocks
==17599==    still reachable: 128 bytes in 1 blocks
==17599==         suppressed: 0 bytes in 0 blocks
==17599== Rerun with --leak-check=full to see details of leaked memory
==17599== 
==17599== For counts of detected and suppressed errors, rerun with: -v
==17599== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 2 from 2) 
```

我很困惑......谁能告诉我发生了什么事？我是 C++ 的新手 .. 非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:14:30.220

据我了解 valgrind，它无法检测到您正在编写超出静态分配的数组范围的内容。所以让我们在堆上分配它们。

```
vector<int> *indice = new vector<int>[1000];
int *ps = new int[1000]; 
```

然后，您会看到 valgrind 出现错误。包含：

```
==7168== Invalid read of size 8
==7168==    at 0x4008D6: main (stl_vector.h:735)
==7168==  Address 0x4c39e10 is 8 bytes after a block of size 24,008 alloc'd
==7168==    at 0x4A07152: operator new[](unsigned long) (vg_replace_malloc.c:363)
==7168==    by 0x400791: global constructors keyed to indice (foo.cc:6)
==7168==    by 0x400C35: ??? (in /tmp/foo)
==7168==    by 0x4005F2: ??? (in /tmp/foo)
==7168== 
==7168== Invalid read of size 8
==7168==    at 0x4008DA: main (stl_vector.h:735)
==7168==  Address 0x4c39e18 is 16 bytes after a block of size 24,008 alloc'd
==7168==    at 0x4A07152: operator new[](unsigned long) (vg_replace_malloc.c:363)
==7168==    by 0x400791: global constructors keyed to indice (foo.cc:6)
==7168==    by 0x400C35: ??? (in /tmp/foo)
==7168==    by 0x4005F2: ??? (in /tmp/foo)
==7168== 
```

并且使用 gdb，我可以看到 SIGSEGV 在您访问时发生`indice[1433]`，这超出了`indice`.

我还认为您的实际问题是对于大型数据集，变量边界列为：

```
N = 50
3 ≤ I ≤ 2000 
```

你确定你不应该分配 2001 个元素，而不是 1000 个？

# r - tnsping 解决但无法使用脚本连接

> ID：15962321
> 
> 赞同：0
> 
> 时间：2013-04-12T02:57:28.970
> 
> 标签：r, oracle11g, rodbc

我无法从我的 R/Python 脚本连接到 Oracle 数据库。以下是代码。TNSPing 实用程序能够使用 LDAP 解析数据库。我也在粘贴 TNSPING 输出。

**TNSPing 输出**

```
C:\Windows\System32>tnsping UHK00500_SECCOMPAS_APPL

TNS Ping Utility for 32-bit Windows: Version 11.2.0.2.0 - Production on 12-APR-2
013 10:26:26

Copyright (c) 1997, 2010, Oracle.  All rights reserved.

Used parameter files:
c:\apps\oracle\network\admin\sqlnet.ora

Used LDAP adapter to resolve the alias
Attempting to contact (DESCRIPTION = (SDU = 8192) (TDU = 8192) (ADDRESS_LIST = (
ADDRESS = (PROTOCOL = TCP)(HOST = PHKLOD2002-SCAN.ap.hedani.net)(PORT = 1522)) (
LOAD_BALANCE = on) (FAILOVER = on ) ) (CONNECT_DATA = (SERVICE_NAME = UHK00500_S
ECCOMPAS_APPL.WORLD) (FAILOVER_MODE = (TYPE = session) (METHOD = basic) (RETRIES
 = 20) (DELAY = 5))))
OK (60 msec) 
```

**R 脚本输出**

**Oracle 11g 驱动程序**

> chan <- odbcDriverConnect("driver=Oracle in OraHome112_32;DBQ=UHK00500_SECCOMPAS_APPL;UID=toolkit;PWD= ****** ") 警告信息：1：在 odbcDriverConnect("driver=Oracle in OraHome112_32;DBQ=UHK00500_SECCOMPAS_APPL;UID=toolkit;PWD = ****** ") : [RODBC] 错误：状态 08004，代码 12154，消息 [Oracle][ODBC][Ora]ORA-12154：TNS：无法解析指定的连接标识符 2：在 odbcDriverConnect("driver=Oracle in OraHome112_32;DBQ=UHK00500_SECCOMPAS_APPL;UID=toolkit;PWD= ****** ") : ODBC 连接失败

**ODBC 驱动程序输出**

> chan <- odbcDriverConnect("Driver={Microsoft ODBC for Oracle};Server=UHK00500_SECCOMPAS_APPL;Uid=toolkit;Pwd= ****** ") 警告消息：1：在 odbcDriverConnect("Driver={Microsoft ODBC for Oracle};Server=UHK00500_SECCOMPAS_APPL ;Uid=toolkit;Pwd= ***** ") : [RODBC] 错误：状态 08001，代码 12154，消息 [Microsoft][Oracle 的 ODBC 驱动程序][Oracle]ORA-12154：TNS：无法解析指定的连接标识符 2：在 odbcDriverConnect("Driver={Microsoft ODBC for Oracle};Server=UHK00500_SECCOMPAS_APPL;Uid=toolkit;Pwd= ****** ") : ODBC 连接失败

有人可以建议我应该在这里检查什么来纠正这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:28:05.787

不知道问题是什么，但重新启动我的 R 实例后，连接很好。

# ios - Facebook - 如何获得

> ID：15962322
> 
> 赞同：-1
> 
> 时间：2013-04-12T02:57:50.193
> 
> 标签：ios, facebook, ios5, ios6, sharekit

我希望为 iOS 应用程序实现 ShareSdk。它需要这些参数：

```
#define SHKFacebookUseSessionProxy  NO 
#define SHKFacebookKey              @""
#define SHKFacebookSecret           @""
#define SHKFacebookSessionProxyURL  @"" 
```

并提供此网址： http: [//www.facebook.com/developers](http://www.facebook.com/developers)

但我没有找到如何在那里获取这些参数。谁能解释获取这些参数的步骤？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:11:30.107

转到[Facebook 应用页面](https://developers.facebook.com/apps/)，创建一个新应用，获取您的密钥。

# graph - Networkx PageRank - 具有不同权重的相同排名

> ID：15962324
> 
> 赞同：2
> 
> 时间：2013-04-12T02:57:52.890
> 
> 标签：graph, networkx, pagerank

我有一个关于 PageRank 的问题，这可能表明我不太了解它。如果我有一个包含两个节点“A”和“B”的图，并且链接 A --> B 权重 1.0 和 B --> A 权重 2.0，那么 A 的排名不应该更高，因为它的入度权重更高吗？

当我从networkx尝试PageRank时似乎不是这种情况，但我不知道为什么。

```
>>> from networkx import nx 
>>> DG = nx.DiGraph()
>>> DG.add_weighted_edges_from([("A", "B", 1.0),("B", "A",2.0)])
>>> pr = nx.pagerank(DG)
>>> pr
{'A': 0.5, 'B': 0.5} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-02T06:03:12.120

有向图的 PageRank 可以被认为是所有节点上的概率分布，即随机冲浪者在沿着有向边数次随机跳跃后最终到达的位置（随机传送以解决断开连接和悬空的节点）。在每一跳，随机冲浪者跟随特定边的概率是其权重除以离开当前节点的所有边的权重之和。

在您的示例中，每个节点上的随机冲浪者只有 1 个链接可以跳到另一个链接，因此无论您在这 2 个链接上放置什么权重，PageRank 将始终给出 (0.5,0.5)。

# html - SVG 中的 MathJax

> ID：15962325
> 
> 赞同：26
> 
> 时间：2013-04-12T02:58:07.157
> 
> 标签：html, svg, mathjax

我正在写一些使用 MathJax 来渲染数学的文章。我偶尔也会包含由 javascript 动态生成的 SVG 图表。这些 SVG 图表偶尔会包含数学。

我希望使用 MathJax 呈现这些 SVG 图表中的文本元素。我知道如何[渲染动态数学](http://docs.mathjax.org/en/latest/typeset.html)。但是，mathjax 输出在`<span>`s 中，它不是有效的 SVG 并且不显示。

当我将 MathJax 配置为使用 SVG 输出模式时，这种情况仍然存在，尽管这可能是由于 SVG 输出模式使用不当造成的。我通过 MathJax CDN 链接更改为`http://cdn.mathjax.org/mathjax/2.1-latest/MathJax.js?config=TeX-AMS-MML_SVG`，它没有产生 SVG 输出。我还不能哄 MathJax 实际输出 SVG 元素。

我考虑过使用`<foreignObject>`不理想的 SVG 标签，因为（据我所知）我必须指定宽度和高度，这很不方便。

有没有更好的方法在 HTML 中的 SVG 中包含 MathJax 呈现的文本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T14:11:29.330

目前，在 SVG 图表中包含 MathJax 的唯一方法是通过`<foreignObject>`. 是的，这并不理想，不仅因为您需要提供大小，还因为 IE9+ 不支持`<foreignObject>`.

至于 SVG 输出，如果您使用 MathJax 上下文菜单来选择数学渲染，那将覆盖文档中的渲染器选择，因此您可能仍然会看到 HTML-CSS 输出。该值存储在 cookie 中，以便在会话之间记住它。您可以删除 cookie 以移除设置，或再次使用 MathJax 菜单选择 SVG 渲染。

但是请注意，这也对您没有帮助，因为 MathJax 的 SVG 输出不仅仅是可以包含到更大 SVG 文件中的 SVG 片段，还包含一些 HTML 和`<svg>`元素本身。此外，MathJax 需要周围的 HTML 来确定要使用的字体大小和其他一些因素，因此它不能直接放入您的 SVG 图表中。

该`<foreignObject>`方法确实是目前唯一可靠的方法。

**编辑**：这是一个完整的例子：

```
<!DOCTYPE html>
<html>
<head>
<title>MathJax in SVG diagram</title>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"></script>
</head>
<body>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="1000" height="500">
  <circle cx="100" cy="100" r="99" fill="yellow" stroke="red" />
  <circle cx="100" cy="100" r="3" fill="blue" />
  <foreignObject x="100" y="100" width="100" height="100">
    <div xmlns="http://www.w3.org/1999/xhtml" style="font-family:Times; font-size:15px">
    \(\displaystyle{x+1\over y-1}\)
    </div>
  </foreignObject>
</svg>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-21T00:55:45.353

有一种方法可以在 SVG 图表中包含 MathJax SVG 元素，而无需`foreignObject`. 该技术的完整演示位于[http://puzlet.com/m/b00b3](http://puzlet.com/m/b00b3)。

假设您的网页中有这样的 SVG 图（并包含任何 SVG 元素）：

```
<svg id="diagram" xmlns='http://www.w3.org/2000/svg' 
    xmlns:xlink="http://www.w3.org/1999/xlink"
    version='1.1' width='720' height='100'>
</svg> 
```

和以下 MathJax：

```
<div id="mathjaxSource">
$\Omega$
</div> 
```

使用这个 CoffeeScript（加上 jQuery）将 MathJax 元素集成到您的 SVG 图表中：

```
diagram = $("#diagram")  # SVG diagram
obj = new MathJaxObject "mathjaxSource"  # MathJax object (see class definition below)
obj.appendTo diagram  # Append MathJax object to diagram
obj.translate 100, 200  # Position MathJax object within diagram 
```

您还可以使用`width()`和`height()`方法进行居中和垂直对齐。

```
class MathJaxObject

    constructor: (@divId, @scale=0.02) ->
        @source = $("##{@divId}").find ".MathJax_SVG"
        @svg = @source.find "svg"
        g = @svg.find "g"
        @group = $(g[0]).clone()
        @translate 0, 0

    viewBox: -> @svg[0].viewBox

    width: -> @scale * @viewBox().baseVal.width

    height: -> @scale * @viewBox().baseVal.height

    translate: (@dx, @dy) ->
        dy = @dy + (-@scale * @viewBox().baseVal.y)
        @group[0].setAttribute "transform", 
            "translate(#{@dx} #{dy}) scale(#{@scale}) matrix(1 0 0 -1 0 0)"

    appendTo: (diagram) ->
        diagram.append @group 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-24T20:02:16.500

我使用了以下内容，它定义了一个函数，该函数将乳胶代码作为输入并将 MathJax 处理的 svg 附加到目标 SVG 元素。

```
// First create a new element to hold the initial Latex code
// and eventual MathJax generated SVG. This element isn't added
// to the main docuemnt, so it's never seen.
let mathBuffer = document.createElement("div");

// Then define a function that takes LaTeX source code
// and places the resulting generated SVG in a target SVG element.
mathSVG = function (latex, target) {
  // Update the buffer with the source latex.
  mathBuffer.textContent = latex;
  // Get MathJax to process and typeset.
  MathJax.Hub.Queue(["Typeset", MathJax.Hub, mathBuffer]);
  // Queue a callback function that will execute once it's finished typesetting.
  MathJax.Hub.Queue(function () {
    // This (svg) is the generated graphics.
    const svg = mathBuffer.childNodes[1].childNodes[0];
    // The next line is optional, play with positioning as you see fit.
    svg.setAttribute("y", "-11pt");
    // Move the generated svg from the buffer to the target element.
    target.appendChild(svg);
    // Clear the buffer.
    mathBuffer.textContent = "";
  });
}; 
```

在上面，我假设一个带有 svg 元素的 html 宿主文档。它也应该在 svg 主机文档中工作。

# c# - 代表日历事件

> ID：15962328
> 
> 赞同：1
> 
> 时间：2013-04-12T02:58:29.773
> 
> 标签：c#, .net, data-structures

是否有任何 .Net 类可用于表示涵盖两者的日历事件：

*   单次活动（例如 8 月 21 日星期四晚上 8 点）
*   重复事件（例如每周一上午 9 点或每年 4 月 1 日）

# asp.net-mvc - 在 post 方法中，如何获取紧凑参数而不是所有对象属性

> ID：15962330
> 
> 赞同：1
> 
> 时间：2013-04-12T02:58:49.597
> 
> 标签：asp.net-mvc, asp.net-mvc-4, controller

也许标题不是那么明确。让我解释一下我的情况

我的控制器中有一个 get 和 post 方法。在 GET 方法中，从数据库上下文中获取实体

```
 [HttpGet]
    public ActionResult RecheckAssignment(short id)
    {
        var assignment = db.Assignments.Find(id);
        Session["QuestionList"] = QuestionRepositoryManager.GetAllPossibleQuestionsFromJson(assignment.Content);  // it's a list!

        return View(Session["QuestionList"]);
    } 
```

分配实体包含 10 个属性。当我在模型中显示此实体时，它显示使用了所有属性，但是当用户发布时，在 POST 方法中应该只从中获取两个属性（Id 字符串，Changed bool）。

我没有在方法参数里面放什么。

```
 [HttpPost]
    public ActionResult RecheckAssignment(...)
    {
        return View();
    } 
```

我将所有内容都放在会话变量中，因为稍后我必须再次获取实体，我想这是使用 Session 的一个不错的选择，但我不确定。

那么，我应该在方法内部写什么来仅获取 Id 和 Changed 属性来更新实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:09:30.087

当 ASP.NET MVC`<form>`在 a 期间将 a 映射回 Action 时`POST`，它将填写它可以填写的内容。考虑这样一个类：

```
public class Car
{
    public string Make { get; set; }
    public string Model { get; set; }
    public int Year { get; set; }
} 
```

现在考虑这种形式：

```
@using (Html.BeginForm("ActionName", "ControllerName", FormMethod.Post))
{
    Html.TextBoxFor(m => m.Make)
} 
```

现在考虑这个动作：

```
public ActionResult ActionName(Car model)
{
    // the values of Car will look like this
    model.Make   // this will be what was in the text box
    model.Model  // this will be null
    model.Year   // this will be 0
} 
```

并注意`null`和`0`是这些类型的默认值。因此，如果我想要`POST`该属性`Model`，我需要以表格形式获取它。我可以用 来做到这一点`@Html.TextBoxFor`，但如果我不希望用户看到它怎么办？好吧，我也可以这样做：

```
Html.HiddenFor(m => m.Model); 
```

所以现在当表单被`POST`编辑时，它将`Model`用它下载的值填充。因此，只需确保您需要的所有属性都**以某种方式出现在表单中。**

# java - 用 SQL 数据库中的数据填充 JTable

> ID：15962332
> 
> 赞同：2
> 
> 时间：2013-04-12T02:58:53.630
> 
> 标签：java, swing, sql-server-2005, select, jtable

[这个](https://stackoverflow.com/questions/15921676/select-statement-in-java)问题与我之前问过的这个问题有关，这个问题有点解决了我的问题，但又出现了另一个问题，我问自己“为什么会这样？”。

这是代码（顺便说一句我`r2xml.jar`在这个项目中使用）：

```
private void search() throws Exception{
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    String url = "jdbc:odbc:*****";
    String user = "*****";
    String pass = "*****";
    Connection conn =  DriverManager.getConnection(url, user, pass);
    PreparedStatement ps;   
    ResultSet rs;
    String custname = "SELECT pIDNo AS 'Patient ID',pLName AS 'Last Name', pFName AS 'First Name',pMI AS 'M.I.',pSex AS 'Sex',pStatus AS 'Status', pTelNo AS 'Contact No.', pDocID AS 'Doctor ID', pAddr AS 'St. No.',pStreet AS 'St. Name',pBarangay AS 'Barangay',pCity AS 'City', pProvince AS 'Province', pLNameKIN AS 'Last Name',pFNameKIN AS 'First Name',pMIKIN AS 'M.I.',pRelationKIN AS 'Relation',pTotalDue AS 'Total Due' FROM dbo.Patients where pIDNo LIKE '" + "%'";
    ps = conn.prepareStatement(custname);
    rs = ps.executeQuery();
    tblPatient.setModel(DbUtils.resultSetToTableModel(rs));
} 
```

现在这是我对我提供的链接的关注，我无法让`TotalDue`列数据显示在我`JTable`不知道是否是因为`DATA TYPE`它具有`MONEY`. 但是在使用上面的代码之后，我设法显示它，但现在的问题是其他列现在丢失了，除了`TotalDue`. 对此有什么解释吗？有解决办法吗？我`r2xml.jar`以前用过它，它工作正常，但现在我不知道是什么问题，或者我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:59:38.050

然后最好继续努力，这是一种魅力。

```
DefaultTableModel tbl = (DefaultTableModel) tblPatient.getModel();
ResultSetMetaData rm = rs.getMetaData(); // this line is useless if you know the column count. (I was too lazy to count :P )
int size = rm.getColumnCount();

while(rs.next()){
  Object[] obj = new Object[size];
  for(int i=0;i<size;i++){
    obj[i] = rs.getObject(i+1);
  }
  tbl.addRow(obj);
} 
```

# list - LISP：力评估

> ID：15962338
> 
> 赞同：0
> 
> 时间：2013-04-12T02:59:54.323
> 
> 标签：list, lisp, quote

我使用单引号 (') 将列表名称作为输入，但是在执行了一些操作之后，我想实际评估它而不是将其视为原子。

例如，为了简单起见，我有以下列表：

```
(setf LT '(A B C)) 
```

我有一个名为`SEP`. 要运行该功能，我必须将其作为`(SEP 'LT)`. 如您所见，LISP 将解释`LT`为原子而不是将其评估为列表，这不是我想要的。

所以本质上，我想`(SEP 'LT)`真正成为`(SEP '(A B C))`某种方式。

输入格式无法更改。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:02:30.323

如果`LT`是一个顶级变量，用 定义`defvar`，那么你可以这样得到它的值`symbol-value`：

```
* (symbol-value 'lt)
(A B C)

* (defun sep (name)
    (assert (symbolp name))
    (let ((value (symbol-value name)))
      ... 
```

# java - 非静态变量 this 不能从静态上下文中引用

> ID：15962339
> 
> 赞同：8
> 
> 时间：2013-04-12T02:59:56.240
> 
> 标签：java, static, non-static

错误来自这一行 BoardState addme = new BoardState();

由于某种原因，它指向的非静态变量是“新的”。我不清楚如何解决这个错误，因为 new 并不是一个变量，也不是。

查看 stackoverflow 记录，此错误通常来自非静态方法，通常通过将方法设为静态或完全绕过该方法来解决。吨

下面的这段代码是为了参考这个语句之前和之后发生的事情。

```
public class IntelligentTicTacToe extends TicTacToe {

public class BoardState{
    public String TTTState;
    public int[][] defensiveOppsArray;
    public int[][] offensiveOppsArray;
    public String str;
    public int cnt;
}

public static ArrayList<BoardState> memory = new ArrayList<BoardState>();

public static boolean makeMove(){
    char[] oArray = new char[TicTacToeArray.length];
    int[][] defensiveOppsArray = new int[TicTacToeArray.length][TicTacToeArray.length];
    int[][] offensiveOppsArray = new int[TicTacToeArray.length][TicTacToeArray.length];
    int[][] sumOppsArray = new int[TicTacToeArray.length][TicTacToeArray.length];
    //converts our Array into a String
    String x = convertTTTArrayToString();

    //Goes through the conditions to see if we have it in memory or if we must go through all the conditions
    boolean matchFound = false;
        for(int i=0; i < memory.size(); i++){
            BoardState element = memory.get(i);
            if(element.str.equals(x)){
                System.out.println("Match Found");
                matchFound = true;
            }}
        if(!matchFound){
        BoardState addme = new BoardState();
        addme.str = x;
        addme.cnt = 1;
        memory.add(addme);

        } 
```

}....

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-12T03:06:32.280

它不起作用的原因是因为您的类`BoardState`是`IntelligentTicTacToe`. 这意味着当引用它时，您将引用该类的一个实例；该实例在静态上下文中不可用。

一种解决方案是将该类声明为：

```
public static class BoardState { 
```

[您可以在此处](https://stackoverflow.com/questions/70324/java-inner-class-and-static-nested-class)阅读有关内部类的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T03:02:14.513

不要像你正在做的那样嵌套类。没有必要，它要做的就是要求您在 IntelligentTicTacToe 实例之上创建一个 BoardState 对象，即

```
BoardState addme = new IntelligentTicTacToe(). new BoardState(); 
```

但这不应该是您的程序的要求。

解决方案：将 BoardState 类放在它所属的位置，放在它自己的文件中。或者让 BoardState 成为一个枚举，但它应该只保存常量。

# clojure - 宏引用和取消引用

> ID：15962345
> 
> 赞同：0
> 
> 时间：2013-04-12T03:00:40.540
> 
> 标签：clojure

我正在尝试编写一个宏来以编程方式要求一些命名空间，以便传入参数的结果为`(require 'value-of-argument)`. 如果我说 (defmacro r [x] `(require ~x)) 那么我得到`(require value-of-x)`了预期的结果，但我不知道如何在那里获得报价。

编辑：这是我的问题的一个更简单的例子：

```
(defmacro q [x] `(str ~x))

=> (map (fn [e] (q e)) (map symbol ["x" "y" "z"]))
=> ("x" "y" "z") 
```

然而，

```
(defmacro q [x] `(str '~x))

=> (map (fn [e] (q e)) (map symbol ["x" "y" "z"]))
=> ("e" "e" "e") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:43:39.793

您只需要再次引用该论点，如下所示：

```
(defmacro r [x] `(require '~x)) 
```

它应该可以解决问题。

编辑：上述内容不起作用，因为 x 在编译时未知，当宏展开时。

但是，现在我想一想，为什么不直接调用 require 而不使用宏呢？

这似乎有效：

```
(require (symbol "clojure.walk")) 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:55:59.857

```
(defmacro r [x] `(require (quote ~x))) 
```

# algorithm - 用最少的颜色为图形着色

> ID：15962348
> 
> 赞同：3
> 
> 时间：2013-04-12T03:01:43.753
> 
> 标签：algorithm, graph

我想为图着色，以便**对于任何顶点 v [1]和 v [2]**，如果它们之间有 n 条路径：

p [1] = (v [1] , p [11] ,p [12] ,v [2] )
p [2] = (v [1] , p [21] ,p [22] ,v [2] )
...
p [n] = (v [1] , p [n1] ,p [n2] ,v [2] )

（p [11] ,p [12]是路径的顶点，路径有四个顶点）

p [i]表示一条路径， p [i1]和 p [i2是 v] [1]和 v [2]之间的两个顶点。

不能存在两条路径 p [i]和 p [j]使得 c(p [i1] ) = c(p [j1] ) 和 c(p [i2] ) = c(p [j2] )，其中 c(v) 表示顶点 v 的颜色。

简单来说，v [1]和 v [2]之间的路径应该是可区分的。

我们的目标是尽量减少颜色的数量。

是否有满足上述条件的着色算法？星形着色绝对满足条件，但需要更多颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T14:56:19.513

鉴于我如何理解您的问题，这是我的回答。您正在尝试找出可用于连接**N** 2 个顶点路径的最少颜色数。

尝试解决相反的问题：给定**x**颜色，您可以生成多少条独特的路径。从问题中不清楚第一个和第二个顶点是否可以是相同的颜色，所以我将采取两种可能性：

1.  允许相同的颜色（置换置换）

    给定**x**颜色 max **x ²**排列可以生成。所以**N**条路径至少需要**√N**种颜色。

    颜色 = RGB 顶点 = RR,RG,RB,GR,GG,GB,BR,BG,BB

2.  不允许相同颜色（无替换排列）

    给定**x**颜色 max **^x P [2]**可以生成排列。即 x ² -x ≥ N。求解二次不等式会给你

    **x** ≥ (1 ± √(1 + 4 **N** ))/2

    **x** = 地板((1 + √(1 + 4 **N** ))/2)

    对于颜色 = RGB 顶点 = RG、RB、GR、GB、BR、BG（给定 7 条路径，您需要 4 种颜色）

# php - 为自定义布局编辑 woocommerce 模板文件

> ID：15962352
> 
> 赞同：1
> 
> 时间：2013-04-12T03:02:25.957
> 
> 标签：php, wordpress, woocommerce

我正在尝试使用 woocommerce 插件向 Wordpress 主题添加一些自定义。我正在尝试对商店页面进行风格化，以便在产品顶部或左侧有一个类别列表。当您从 woocommerce 管理设置中的目录页面启用类别选项时，它会利用 content_product_cat2.php 模板文件在 woocommerce 产品循环中显示产品类别缩略图。我已经移动了那个 php 文件并开始编辑它并获得结果。我已删除缩略图，但我无法将标题从网格格式或循环之外取出。我愿意为我的functions.php添加一些钩子，但我没有在woocommerce钩子参考中看到任何看起来像他们会做的钩子。可能是编辑此模板并使用挂钩将其放置在循环之前的组合。[这是该页面的链接。](http://www.primroseandcompany.com/shop/)我正在使用它，这里是 php 文件的内容：

```
<?php
/**
 * The template for displaying product category thumbnails within loops.
 *
 * Override this template by copying it to yourtheme/woocommerce/content-product_cat.php
 *
 * @author      WooThemes
 * @package     WooCommerce/Templates
 * @version     1.6.4
 */

global $woocommerce_loop;

// Custom Edits

if ( is_shop() && in_array( $category->slug, array( 'fakeie' ) ) ) {
return;
}

// Store loop count we're currently on
if ( empty( $woocommerce_loop['loop'] ) )
$woocommerce_loop['loop'] = 0;

// Store column count for displaying the grid
if ( empty( $woocommerce_loop['columns'] ) )
$woocommerce_loop['columns'] = apply_filters( 'loop_shop_columns', 4 );

// Increase loop count
$woocommerce_loop['loop']++;
?>
<li class="product <?php
if ( $woocommerce_loop['loop'] % $woocommerce_loop['columns'] == 0 )
    echo 'last';
elseif ( ( $woocommerce_loop['loop'] - 1 ) % $woocommerce_loop['columns'] == 0 )
    echo 'first';
?>">

<?php do_action( 'woocommerce_before_subcategory', $category ); ?>

<a href="<?php echo get_term_link( $category->slug, 'product_cat' ); ?>">

    <h3 style="float:left;">
        <?php echo $category->name; ?>
        <?php if ( $category->count > 0 ) : ?>
            <mark class="count">(<?php echo $category->count; ?>)</mark>
        <?php endif; ?>
    </h3>

    <?php
        /**
         * woocommerce_after_subcategory_title hook
         */
        do_action( 'woocommerce_after_subcategory_title', $category );
    ?>

</a>

<?php do_action( 'woocommerce_after_subcategory', $category ); ?>

</li> 
```

谢谢伙计们......我知道有人会有这方面的经验。

编辑-好的，所以我意识到编辑 content_product_cat.php 文件可能不是最好的方法。Jay 在下面提到最好编辑 content_product.php 文件。虽然我最初认为这也是一个很好的解决方案，但我意识到它不会完成我想要做的事情。编辑 content_product.php 只会在循环内进行编辑，我需要在循环之前显示我的类别，这样它们就不会落入循环的网格格式.....任何新想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T03:24:56.803

一种替代方法是您可以禁用默认的 woocommerce 类别视图并且不使用模板。相反，您可以编写自定义代码并获取类别列表并按照您想要的方式设置样式并将其添加到 woocommerce 产品网格中。下面是你如何做到的。

```
<?php $all_categories = get_categories( 'taxonomy=product_cat&hide_empty=0&hierarchical=1' );
                    foreach ($all_categories as $cat) {
                        if($cat->category_parent == 23) {                           
                                                        $category_id = $cat->term_id;
                            $thumbnail_id   = get_woocommerce_term_meta( $cat->term_id, 'thumbnail_id', true );
                            $image = wp_get_attachment_url( $thumbnail_id );
                                echo '<li><a href="'. get_term_link($cat->slug, 'product_cat') .'"><img src="'.$image.'" alt="'. $cat->name .'"/><div>'. $cat->name .'</div></a>';
                        }
                    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T21:59:05.510

您可以添加到您的functions.php：

```
add_action('woocommerce_before_shop_loop','showcats');

function showcats()
{
    //list terms in a given taxonomy using wp_list_categories (also useful as a widget if using a PHP Code plugin)

$taxonomy     = 'product_cat';
$orderby      = 'name';
$show_count   = 0;      // 1 for yes, 0 for no
$pad_counts   = 0;      // 1 for yes, 0 for no
$hierarchical = 1;      // 1 for yes, 0 for no
$title        = '';

$args = array(
  'taxonomy'     => $taxonomy,
  'orderby'      => $orderby,
  'show_count'   => $show_count,
  'pad_counts'   => $pad_counts,
  'hierarchical' => $hierarchical,
  'title_li'     => $title
);

?>
<ul>
<?php wp_list_categories( $args ); ?>
</ul>
<?
}

function showcatlist()
{
    if(is_shop()) showcats();
} 
```

功能 showcats 来自：[http](http://wordpress.org/support/topic/plugin-woocommerce-excelling-ecommerce-category-list) ://wordpress.org/support/topic/plugin-woocommerce-excelling-ecommerce-category-list 。阅读更多：[http](http://codex.wordpress.org/Template_Tags/wp_list_categories) ://codex.wordpress.org/Template_Tags/wp_list_categories 。要更改列表的样式，您将阅读：

> 您可以通过将 title_li 参数设置为空字符串来删除最外层的项目和列表。您需要自己将输出包装在有序列表 (ol) 或无序列表中（参见上面的示例）。如果您根本不想要列表输出，请将样式参数设置为无。

除了 wp_list_categories，您还可以使用 get_categories [http://codex.wordpress.org/Function_Reference/get_categories](http://codex.wordpress.org/Function_Reference/get_categories)并自己编写 html 输出。这与首先​​提供正确答案的[Jay Bhatt](https://stackoverflow.com/users/2076598/jay-bhatt)所做的相同。

# spring - 如何在服务器启动期间加载缓存表中存在的数据

> ID：15962353
> 
> 赞同：0
> 
> 时间：2013-04-12T03:02:27.167
> 
> 标签：spring, bootstrapping

我正在开发一个 java web 应用程序，我想在服务器启动期间缓存表中存在的所有数据。

此外，如果数据库值有任何变化，我希望刷新缓存（无需重新启动服务器）。

我正在寻找一些春天的材料，可以帮助我实现这一目标。但我无法弄清楚。

请帮助我如何实现同样的目标。另外我想在服务器启动时初始化一些bean。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:06:57.083

首先阅读以下文档，这些文档将帮助您入门。

参考 Spring 文档[http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/cache.html](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/cache.html)

还要检查这个简单的教程[http://viralpatel.net/blogs/cache-support-spring-3-1-m1/](http://viralpatel.net/blogs/cache-support-spring-3-1-m1/)

关于您的 bean 初始化，您可以在 bean 类的方法上使用 @PostConstruct 注释。Spring 将在构造 bean 后调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:09:16.710

您计划构建的应用程序并非易事。根据我的经验，创建这样的应用程序需要具备以下知识：
1\. Spring
2\. Ehcache
3\. JMX
4\. Servlet Listeners

# php - FPDF 水印不出现

> ID：15962358
> 
> 赞同：2
> 
> 时间：2013-04-12T03:02:53.317
> 
> 标签：php, fpdf

我有这个示例代码：

```
<?php
    session_start();
    define('FPDF_FONTPATH', 'font/');
    require('fpdf/rotation.php');

    class PDF extends PDF_Rotate
    {
        function Header()
        {
            //Put the watermark
            $this->SetFont('Arial','B',50);
            $this->SetTextColor(255,192,203);
            $this->RotatedText(35,190,'Preview Only!',45);
        }

        function RotatedText($x, $y, $txt, $angle)
        {
            //Text rotated around its origin
            $this->Rotate($angle,$x,$y);
            $this->Text($x,$y,$txt);
            $this->Rotate(0);
        }
    }

    $pdf = new FPDF();
    $pdf->AddPage();
    $pdf->SetFont('Arial','B',12);
    $pdf->Cell(40,10,'Sample line');
    $pdf->Output();
?> 
```

它确实显示 PDF 文件，但不显示水印。我究竟做错了什么？请帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:11:48.807

我只需要更改`$pdf = new FPDF();`为`$pdf = new PDF();`

# websocket - Websockify 错误“客户端必须支持‘二进制’或‘base64’协议”

> ID：15962359
> 
> 赞同：6
> 
> 时间：2013-04-12T03:02:56.277
> 
> 标签：websocket

我正在尝试使用 websockify 允许在浏览器中执行的 javascript 与我的手写服务器对话。使用最新版本的 Chrome 和 Firefox 时，我从 websockify 收到以下错误消息：Client must support 'binary' or 'base64' protocol

查看代码后，我确定 websockify 传递此消息并在这两个协议都未能出现在从客户端收到的 Sec-Websocket-Protocol 标头下时关闭套接字。当我查看 Chrome 传输的原始数据时，它甚至不会发送此标头。这是 Chrome 或 websockify 的问题，还是我在 javascript 中打开 websocket 时未能提供一些信息？还是有其他解释？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T15:35:07.023

您需要提供协议列表作为对象构造函数的一部分：

```
var ws = new WebSocket(uri, ['binary', 'base64']); 
```

如果您使用 websockify 附带的 websock.js 库，那么它将为您处理。但是，请注意 websock.js 不提供标准的 WebSocket API，而是提供面向流的 API。即使您使用原始 WebSocket 连接到 websockify，请注意您仍然需要进行消息重构，因为普通 TCP 没有消息的概念，因此来自 onmessage 的消息分块基本上是“任意的”。

# java - 转换为 CNF

> ID：15962367
> 
> 赞同：0
> 
> 时间：2013-04-12T03:03:45.357
> 
> 标签：java, algorithm, cnf

这是为了一个任务。我必须将一组语句转换为 CNF 并实现它们。我知道我需要先将前缀符号中的输入转换为中缀，然后重复应用德摩根定律。但是，在将其转换为中缀符号后，我不知道如何继续执行。

1.  我必须将其转换为中缀还是有更好的过程来做到这一点？
2.  我一直在[这里](http://www.cs.utah.edu/%7Etylers/PyBool.cgi)从 Python 的实现中阅读 BDD 。我正在用 Java 编码，我想自己做，而不使用任何外部库。关于实现算法的任何指针？我是否朝着正确的方向将其转换为中缀？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:35:48.560

无需将其转换为中缀 - 例如，您希望尽快离开字符串域

```
public abstract class Expression
public abstract class BinaryExpression extends Expression {
    private Expression expr1;
    private Expression expr2;
    public Expression getExpr1() { return expr1; }
    public void setExpr1(Expression expr) { expr1 = expr; }
}
public abstract class UnaryExpression extends Expression
public class Or extends BinaryExpression
public class Not extends UnaryExpression 
```

等等。要将输入解析为您可能会发现使用[Recursive Descent Parser](http://www.cs.uky.edu/~lewis/essays/compilers/rec-des.html)`Expressions`很有用，尽管这肯定不是解析输入的唯一方法。将输入转换为符号格式后，应用布尔定律将其转换为 CNF 应该会容易得多。`Expression`

# php - 简单的 mysqli 查询不起作用

> ID：15962368
> 
> 赞同：0
> 
> 时间：2013-04-12T03:03:46.273
> 
> 标签：php, mysql, mysqli

我正在尝试从数据库中获取简单信息并将其回显到屏幕上，但这对我不起作用。

```
$con=mysqli_connect("SERVER.COM","USERNAME","PASSWORD", "DATABASE");

function GetTeamFixtures($team)
{
    $queryget = mysqli_query($con, "SELECT * FROM 'mlsfixtures' WHERE team='$team' LIMIT 1");
    $row = mysqli_fetch_assoc($queryget);
    $gw1 = $row['gw1'];
    $gw2 = $row['gw2'];

    echo $team.' '.$gw1.' '.$gw2.'<br>';
}

$team = "Chicago Fire"; GetTeamFixtures($team);
$team = "Chivas USA"; GetTeamFixtures($team);
$team = "Colorado Rapids"; GetTeamFixtures($team);
//continue for all teams - removed for simplicity 
```

这是我收到的错误消息（第 46 行是 $queryget= one，第 49 行是 $row = one）。

`Warning: mysqli_query() expects parameter 1 to be mysqli, null given in server.com\teamfix.php on line 46`

`Warning: mysqli_fetch_assoc() expects parameter 1 to be mysqli_result, null given in server.com\teamfix.php on line 49`

知道为什么吗？我不确定是否有更简单的方法来做同样的事情，但对于 19 个不同的团队。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:05:25.837

除了解释连接的两个用户之外，我发现的错误之一是单引号的无效使用。

表名不应该用单引号括起来，因为它们是标识符而不是字符串文字。删除单引号，它应该可以工作，

```
SELECT * FROM mlsfixtures WHERE team='$team' LIMIT 1 
```

*   [MySQL - 何时使用单引号、双引号和反引号？](https://stackoverflow.com/questions/11321491/mysql-when-to-use-single-quotes-double-quotes-and-backticks)

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T03:10:28.597

访问函数外部变量而不是使用的另一种方法`global variables`是将其添加到其参数中

例如

```
function GetTeamFixtures($team,$con)
{
   // query inside
} 
```

也如`J W`您的查询中所说，删除“”或用“反引号”替换它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T03:21:25.080

*（这是我以简洁的方式组合所有其他答案的尝试。）*

有两个问题。

[首先，如果没有语句](http://php.net/manual/en/language.variables.scope.php#language.variables.scope.global)`$con`，则无法从函数中访问全局变量。该语句可用于在您的函数中创建对from 的[引用。](http://www.php.net/manual/en/language.references.whatdo.php)[`global`](http://php.net/manual/en/language.variables.scope.php#language.variables.scope.global)`global``$con`

```
global $con; // is equivalent to:
$con =& $GLOBALS['con']; 
```

其次，表名不能用单引号括起来。删除引号。

```
// By the way, this should be using mysqli::prepare and mysqli_stmt::bind_param
// to prevent SQL injection
$queryget = mysqli_query($con, "SELECT * FROM mlsfixtures WHERE team='$team' LIMIT 1"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T03:05:29.810

您无权`$con`从您的功能中访问。这应该有效：

```
$con = mysqli_connect("SERVER.COM","USERNAME","PASSWORD", "DATABASE");

function GetTeamFixtures($team)
{
    global $con;
    $queryget = mysqli_query($con, "SELECT * FROM `mlsfixtures` WHERE `team`='$team' LIMIT 1");
    $row = mysqli_fetch_assoc($queryget);
    $gw1 = $row['gw1'];
    $gw2 = $row['gw2'];

    echo $team.' '.$gw1.' '.$gw2.'<br>';
} 
```

**PS**如果`$team`你传入的`GetTeamFixtures`来自用户输入，你应该[准备好你的语句](http://php.net/manual/en/mysqli.prepare.php)，以防止SQL注入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T03:05:59.137

`$con`在函数中不可见。如果你想让一个全局变量在一个函数的范围内，你必须声明它`global`：

```
function GetTeamFixtures($team) {
  global $con;
  # ...
} 
```

# quickblox - 访问存储在公共 blob 中的图像的直接 URL — iOS 内容模块

> ID：15962375
> 
> 赞同：0
> 
> 时间：2013-04-12T03:05:14.530
> 
> 标签：quickblox

当我知道它的 blob.ID 时，有没有办法访问公共图像的直接 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:20:56.660

您可以上传 blob 并将其公开

```
[QBContent TUploadFile:file fileName:@"Great Image" contentType:@"image/png" isPublic:YES delegate:self];

// QuickBlox queries delegate
- (void)completedWithResult:(Result *)result{
    // success result
    if(result.success){
        if([result isKindOfClass:QBCFileUploadTaskResult.class]){
            QBCFileUploadTaskResult *res = (QBCFileUploadTaskResult *)result;
            NSString *publicUrl = res.uploadedBlob.publicUrl;
        }
    }
} 
```

# c# - 试图让我的文本字段在按下按钮时作为 FormCollection 传递，但 FormCollection 以 null 的形式传递

> ID：15962381
> 
> 赞同：2
> 
> 时间：2013-04-12T03:05:36.883
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, formcollection

我有一个包含自动生成`input`的类型框的视图`text`。当我单击“电子邮件结果”按钮时，代码会将您带到 CalculatedResults 控制器中的 EmailResults 操作。到现在为止还挺好。但是，即使我将 FormCollection 作为 EmailResults Action 中的参数，它仍然以 null 的形式出现，我不知道为什么。我需要能够从表单中捕获文本框 - 请帮助！在我下面的查看代码中，生成的文本框有点过了一半。

**我的查看代码**

```
@using (Html.BeginForm("EmailResults", "CalculatedResults", FormMethod.Post, new { data_ajax = "false" }))
        {
            <table>
                <thead>
                    <tr>
                        <td>Ingredient</td>
                        <td>Qty (gm)</td>
                    </tr>
                </thead>
                @foreach (var i in Model)
                {
                    if (Convert.ToDecimal(i.Qty) < 0)
                    {
                        <tr>
                            <td style="border: 1px solid red; color: red;">@i.Ingredient</td>
                            <td style="border: 1px solid red; color: red;">@i.Qty</td>
                        </tr>
                    }

                    else if (Convert.ToDecimal(i.Qty) == 0m)
                    {
                        continue;
                    }

                    else
                    {
                        if (i.Ingredient.Contains("Active"))
                        {
                        <tr>
                            <td>@i.Ingredient<br />
                                <input type="text" name="actives" /></td>
                            <td>@i.Qty</td>
                        </tr>
                        }
                        else
                        {
                        <tr>
                            <td>@i.Ingredient</td>
                            <td>@i.Qty</td>
                        </tr>
                        }
                    }
                }

            </table>
        }
        <div style="float: left">
            @Html.ActionLink("Email Results", "EmailResults", "CalculatedResults", new { crpk = @ViewBag.crpk }, new { data_icon = "arrow-r", data_role = "button" })
        </div> 
```

**我的控制器代码**

```
public ViewResult EmailResults(int crpk, FormCollection collection)
{
    CapWorxQuikCapContext context = new CapWorxQuikCapContext();

    //List<string> variables = new List<string>();
    //foreach (var item in Request.Form)
    //{
    //    variables.Add(item.ToString());
    //}

    CalculatedResults cr = (from i in context.CalculatedResults where i.Pk == crpk select i).SingleOrDefault();
    Helpers.Email.EmailResults(cr);

    return View();
} 
```

**这是一个屏幕截图：**

![在此处输入图像描述](https://i.stack.imgur.com/iS2x1.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T03:24:19.377

formCollection 只会在您将表单提交给控制器时遇到。任何一个

1.  采用`<input type="submit" value="Email Results" />`
2.  将 jquery 处理程序连接到您创建的为您提交表单的 ActionLink。

# ruby-on-rails - Carrierwave 未设置 content_type

> ID：15962382
> 
> 赞同：1
> 
> 时间：2013-04-12T03:05:53.163
> 
> 标签：ruby-on-rails, carrierwave, plupload

我正在使用载波上传图像。我遇到的问题是 content_type 没有保存到数据库中。我可以看到 content_type 被传递到请求中（如下所示），但它似乎没有进入数据库。

**上传.rb**

```
class Upload < ActiveRecord::Base
  mount_uploader :file, FileUploader
  attr_accessible :file
end 
```

**文件上传器.rb**

```
require 'carrierwave/processing/mime_types'

class FileUploader < CarrierWave::Uploader::Base
  include CarrierWave::MimeTypes

  storage :fog
  process :set_content_type
end 
```

**uploads_controller.rb**

```
 def create
    @upload = Upload.new params[:upload]
    if @upload.save
        render :json => @upload
    end
  end 
```

**架构.rb**

```
 create_table "uploads", :force => true do |t|
    t.date     "expired_at"
    t.datetime "created_at",        :null => false
    t.datetime "updated_at",        :null => false
    t.string   "file"
    t.text     "slug"
    t.string   "file_content_type"
  end 
```

**POST 请求**

```
Started POST "/uploads" for 127.0.0.1 at 2013-04-11 22:54:56 -0400
Processing by UploadsController#create as */*
  Parameters: {"name"=>"IMG_0004.JPG", "authenticity_token"=>"00kuSJQvgkWmCo+bWBQQzhzwC2qWdsF6T3K6DLuv0l8=", "upload"=>{"file"=>#<ActionDispatch::Http::UploadedFile:0x007fcb34399570 @original_filename="IMG_0004.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"upload[file]\"; filename=\"IMG_0004.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/var/folders/9f/zccg30y961g1kl0zc_kzkfw00000gn/T/RackMultipart20130411-90625-1je1uyu>>}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:31:24.777

将您的列名更改为`:content_type`，它应该开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T09:53:36.927

在我安装上传器的模型文件中尝试过同样的问题

```
 before_save :set_mime_type                   

    def set_mime_type
      self.mimetype = Mime::Type.lookup_by_extension(File.extname(self.cf_filename.to_s)[1..-1]) 
    end 
```

注意：您需要在表中有一个 mimetype 字段

# qt - 试图获取窗口的屏幕截图

> ID：15962385
> 
> 赞同：4
> 
> 时间：2013-04-12T03:06:10.240
> 
> 标签：qt

我正在尝试运行此代码：

```
QPixmap ss = QScreen::grabWindow((WId) FindWindow(NULL, L"Blacklight Retribution"));
ss.save("haystack.png", "png"); 
```

但我收到此错误：

```
error: C2352: 'QScreen::grabWindow' : illegal call of non-static member function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-28T16:57:31.427

你可以尝试这样的事情：

```
QScreen *screen = QGuiApplication::primaryScreen();
if (screen)
{
    QPixmap ss = screen->grabWindow((WId) FindWindow(NULL, L"Blacklight Retribution"));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-23T12:19:49.480

Qt 5 更新了 Screenshot 示例，shootScreen 函数如下所示：

```
void Screenshot::shootScreen()
{
    QScreen *screen = QGuiApplication::primaryScreen();
    if (const QWindow *window = windowHandle())
        screen = window->screen();
    if (!screen)
        return;

    originalPixmap = screen->grabWindow(0);
    updateScreenshotLabel();
} 
```

# sql-server - 如何从 SQL Server 上的 XML 获取表

> ID：15962386
> 
> 赞同：0
> 
> 时间：2013-04-12T03:06:11.470
> 
> 标签：sql-server, xml, tsql

我有以下xml

```
set @Informe  = '<Table>
<Row>
<Cell>Data1.1</Cell>
<Cell>Data1.2</Cell>
<Cell>Data1.3</Cell>
<Cell>Data1.4</Cell>
<Cell>Data1..n</Cell>
</Row>
<Row>
<Cell>Data2.1</Cell>
<Cell>Data2.2</Cell>
</Row>
<Row>
<Cell>Data3.1</Cell>
<Cell>Data3.2</Cell>
</Row>
</Table>' 
```

我想得到以下表格作为我的查询结果

```
Cell       
-----------
Data1.1
Data1.2
Data1.3
Data1.4
Data1..n 
```

只想从第一个“行”中获取数据。

有人可以帮忙查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:05:54.307

尝试这样的事情：

```
SELECT 
    Cells.value('.', 'varchar(25)')
FROM 
    @Informe.nodes('/Table/Row[1]/Cell') AS XTbl(Cells) 
```

# php - 如何在表单中缓存用户输入

> ID：15962392
> 
> 赞同：0
> 
> 时间：2013-04-12T03:06:35.927
> 
> 标签：php, html, caching, input

我正在尝试在我的表单中缓存用户输入。我的代码是：

```
 echo '
<form method="POST">
    Name:<br /><input class="contact_name" type="text" name="contact_name" maxlength="32" placeholder="Enter Name" /><br />
    Email:<br /><input class="contact_email" type="text" name="contact_email" maxlength="50" placeholder="Email Address" /><br />
    Subject:<br /><input class="contact_subject" type="text" name="contact_subject" maxlength="50" placeholder="Subject Line" /><br />
    Message:<br /><textarea class="message_area" name="contact_message" rows="10" cols="50" maxlength="1000" placeholder="Message ..." /></textarea><br />
    <input class="submit_button" name="submit_button" type="submit" value="Send" />
</form>
'; 
```

我试图寻找答案，我发现的唯一一件事是添加：

```
<?php if(isset($contact_name)) { echo $contact_name; } ?> 
```

然而，这对我不起作用，因为我的表单在 PHP 回显中，我正在尝试制作一个基本的 wordpress 插件。每当我将表单带出 echo and 时，样式就会混乱，表单样式本身也会中断。所以我想知道我是否可以将我的表单与占位符一起保存在我的回声中，并能够缓存用户输入，因此当错误显示导致他们没有填写其中一个位置时，它不会删除所有内容。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:10:03.177

然后，只需放下`echo`并切换到 HTML 模式：

```
?>
<form method="post">
Name:<br /><input ... value="<?php echo (isset($contact_name) ? htmlspecialchars($contact_name, ENT_QUOTES, 'UTF-8') : ''; ?>" />
...
<?php 
```

如果你需要它作为一个字符串，你可以使用输出缓冲：

```
ob_start();
?>
<input ... />
<?php

echo ob_get_clean(); 
```

# linq - 使用LINQ从多列的多行中获取最大值？

> ID：15962396
> 
> 赞同：1
> 
> 时间：2013-04-12T03:07:43.487
> 
> 标签：linq, linqpad

我`LINQPad`用来评估我的 linq 查询。我的查询是这样的：

```
from o in MyTableFirst
join p in MyTableSecond on o.TheName equals p.TheName
where p.TheName == "CBA-123" && !p.Removed && 
   (o.ReturnPeriod ==100 || o.ReturnPeriod ==10)
select new {
   HMax1 = o.MaxValue1,
   HMax2 = o.MaxValue2,
   HMax3 = o.MaxValue3
} 
```

此查询可以返回 0 或一些行数。

在 LINQPad 中，它返回给我的是这样的：

**HMax1**    **HMax2**    **HMax3**
21.1         *null*          22.5
*null*          24.6 11.5

现在，我将如何获得这些返回行和列的最大值？
我期待**24.6**的回报。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:41:38.890

这个怎么样：

```
(from o in db.MyTableFirsts
 join p in db.MyTableSeconds on o.TheName equals p.TheName
 where p.TheName == "CBA-123" && !p.Removed &&
 (o.ReturnPeriod == 100 || o.ReturnPeriod == 10)
  select new
  {
    Maximum = Math.Max(
       Math.Max((float)(o.MaxValue1 ?? 0), (float)(o.MaxValue2 ?? 0)),
       (float)(o.MaxValue3 ?? 0)
    )
  }).OrderByDescending(o => o.Maximum).FirstOrDefault(); 
```

或者代替 .OrderByDescending(o => o.Maximum).FirstOrDefault()，您可以使用 .Max(o => o)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T06:44:40.117

尝试这个：

```
(
 from o in MyTableFirst
 join p in MyTableSecond on o.TheName equals p.TheName
 where p.TheName == "CBA-123" && !p.Removed && 
 (o.Level ==100 || o.Level ==10)

 //combine all of the numbers into one list
 let listOfNumbers = new List<double?>{o.MaxValue1,o.MaxValue2,o.MaxValue3}

 //select the list
 select listOfNumbers
)
.SelectMany(c => c) //combine all the lists into one big list
.Max(c => c) //take the highst number 
```

# android - 分析进入 Android 应用的 Admob 横幅

> ID：15962399
> 
> 赞同：0
> 
> 时间：2013-04-12T03:08:17.847
> 
> 标签：android, admob

有没有办法分析进入我的 Android 应用程序的 admob 横幅？我想获取“添加源”、“时间”、“类别”等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:06:15.947

除了时间（你可以从广告到达你的 AdListener 的时间得到） 答案是否定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:54:10.127

我在许多应用程序中集成了 admob 网络。但我无法找到相关广告的分析器。

你可以设置你`time to refresh`的广告。因为谷歌是手动提供广告的。

# c++ - 使用类输出时遇到问题

> ID：15962400
> 
> 赞同：0
> 
> 时间：2013-04-12T03:08:17.963
> 
> 标签：c++, class, gcc

我在问题的输出部分遇到问题，我在右下角、左上角和尺寸的行上遇到错误。我究竟做错了什么？我已经尝试了很多东西，但我只是不知道如何让它正常工作，而且我们还没有在课堂上讨论过类似这样的输出：

```
#include <iostream>
#include <cmath>

using namespace std;

class Point
{
private:
double px;
double py;

public:
void setX(const double x);
void setY(const double y);
double getX() const;
double getY() const;
};

class Triangle
{
private:
Point blPoint;
double length, height;

public:
// member functions
void setBottomLeftX(const double x);
void setBottomLeftY(const double y);
void setLength(const double inLength);
void setHeight(const double inHeight);

Point getBottomLeft() const;
Point getBottomRight() const;
Point getTopLeft() const;
double getLength() const;
double getHeight() const;

double perimeter() const;
double hypotenuse() const;
void scaleLength(const double sx);
void scaleHeight(const double sy);
void display() const;
};

// FUNCTION PROTOTYPES GO HERE:
double read_triangle(Triangle & tri);

int main()
{
// Define local variables
Triangle tri;
double sx, sy;

//Prompt the user for triangle information and fill Class Triangle object, tri,
//with this information
read_triangle(tri);

// Display triangle information
tri.display();

// Prompt and read scale factors to change length and height
cout << "Enter scale factor in x direction: ";
cin >> sx;

cout << "Enter scale factor in y direction: ";
cin >> sy;

// Apply scale factors
tri.scaleLength(sx);
tri.scaleHeight(sy);

// Display triangle information
tri.display();

return 0;
}

// FUNCTION DEFINITIONS GO HERE:

// CLASS MEMBER FUNCTION DEFINITINOS GO HERE:

void Point::setX(const double x)
{
px = x;
}

void Point::setY(const double y)
{
py = y;
}

double Point::getX() const
{
return (px);
}

double Point::getY() const
{
return (py);
}

void Triangle::setBottomLeftX(const double x)
{
/* INSERT YOUR CODE */
 blPoint.setX(x);
}

void Triangle::setBottomLeftY(const double y)
{
/* INSERT YOUR CODE */
blPoint.setY(y);
}

void Triangle::setLength(const double inLength)
{
/* INSERT YOUR CODE */
length=inLength;
}

void Triangle::setHeight(const double inHeight)
{
/* INSERT YOUR CODE */
height=inHeight;
}

Point Triangle::getBottomLeft() const
{
/* INSERT YOUR CODE */
return (blPoint);
}

Point Triangle::getBottomRight() const
{
/* INSERT YOUR CODE */
Point getBottomRight;
double mx = (blPoint.getX()+ length);
getBottomRight.setX(mx);
return(getBottomRight);
}

Point Triangle::getTopLeft() const
{
/* INSERT YOUR CODE */
Point getTopLeft;
double my = (blPoint.getY()+ height);
getTopLeft.setY(my);
return (getTopLeft);
}

double Triangle::getLength() const
{
/* INSERT YOUR CODE */
return (length);
}

double Triangle::getHeight() const
{
/* INSERT YOUR CODE */
return (height);
}

double Triangle::hypotenuse() const
{
/* INSERT YOUR CODE */
//hypotenuse = (sqrt((height * height)+(length * length)));
return (sqrt((height * height)+(length * length)));
}

double Triangle::perimeter() const
{
/* INSERT YOUR CODE */
 //perimeter = ((sqrt((height * height)+(length * length)))+ height + length);
 return ((sqrt((height * height)+(length * length)))+ height + length);
}

void Triangle::scaleLength(const double scalefact)
{
/* INSERT YOUR CODE */

 length = scalefact * length;
}

void Triangle::scaleHeight(const double scalefact)
{
/* INSERT YOUR CODE */
height = scalefact * height;
}

void Triangle::display() const
{
/* INSERT YOUR CODE */
cout <<"---------------------------------------" << endl;
cout << "Lower Left Vertex (" << blPoint.getX() << ", " << blPoint.getY() << ')' <<endl;
cout << "Top Left Vertex (" << blPoint.getX() << ", " << getTopLeft.getY() << ')' << endl;
cout << "Bottom Right Vertex (" << getBottomRight.getX() << ", " << blPoint.getY() << ')' << endl;
cout << "Dimensions (" << getBottomRight.getX()- blPoint.getX() << ", " << getTopleft.getY() - blPoint.getY() << ')' << endl;
cout << "Hypotenuse = " << hypotenuse() << endl;
cout << "Perimeter = " << perimeter() << endl;
cout <<"---------------------------------------" << endl;
}

double read_triangle(Triangle & tri)
{
/* INSERT YOUR CODE */
double x, y, inLength, inHeight;
cout << "Enter bottom left x coordinate: ";
cin >> x;
tri.setBottomLeftX(x);

cout << "Enter bottom left y coordinate: ";
cin >> y ;
tri.setBottomLeftY(y);

cout << "Enter length: ";
cin >> inLength;
tri.setLength(inLength);

cout << "Enter Height: ";
cin >> inHeight;
tri.setHeight(inHeight);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:12:09.173

您正在使用函数，就像它们是需要添加`()`才能正确调用它们的变量一样：

```
cout << "Top Left Vertex (" << blPoint.getX() << ", " << getTopLeft().getY() << ')' << endl;
                                                                   ^^  
cout << "Bottom Right Vertex (" << getBottomRight().getX() << ", " << blPoint.getY() << ')' << endl;
                                                 ^^
cout << "Dimensions (" << getBottomRight().getX()- blPoint.getX() << ", " << getTopLeft().getY() - blPoint.getY() << ')' << endl;
                                        ^^                                             ^^ 
```

此外，`read_triangle`没有*return 语句*，但您声明它返回*double*。*从值返回*函数的末尾流出是[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)，因此您不能依赖结果。它看起来不像您正在使用结果，因此您可能只想更改要返回的函数`void`，这将修复它。

# mysql - 为什么 SQL 查询有时不能完全加载表？

> ID：15962401
> 
> 赞同：0
> 
> 时间：2013-04-12T03:08:42.713
> 
> 标签：mysql, loading, create-table

```
CREATE TABLE Food_journal (f_entry_number INT NOT NULL, date DATE, type VARCHAR(40), 
fat_g DECIMAL(5,1), carb_g DECIMAL(5,1),
protein_g DECIMAL(5,1), alcohol_g DECIMAL(5,1), calories INT, pssn INT,
PRIMARYKEY(f_entry_number), FOREIGN KEY(pssn) REFERENCES Patient(ssn));    

LOAD DATA LOCAL INFILE '/home/0/hemeyerj/CSE3241/food_journal.txt' INTO TABLE Food_journal; 
```

food_journal.txt：

```
1   2013-01-27  carrots 0   15  3   0   72  142969229   
2   2013-02-25  meat    3   0   24  0   124 825324470   
1   2013-01-27  meat    5   0   32  0   173 142969299   
1   2013-02-14  fruit   0   20  1   0   84  507663448   
1   2013-04-01  twinky  4.5 27  1   0   150 812654040 
```

它仅将前两行加载到表中。我检查了标签，甚至完全重新输入了东西，但它不起作用。我不知道该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:13:36.270

看起来第一列 f_entry_number 被设置为 PRIMARYKEY，这意味着它必须是唯一的。输入的第 3 行的值 1 已在第一行使用，因此失败。尝试将您的 f_entry_number 更改为唯一。

# css - Css：从单独的文件中悬停时显示更大的图像（更好的质量）

> ID：15962404
> 
> 赞同：0
> 
> 时间：2013-04-12T03:09:02.357
> 
> 标签：css, image, resize, hover

所以我玩弄当用户将鼠标悬停在我的缩略图上时显示更大（质量更好的图像）的想法。不是它在点击时链接到的全尺寸版本，但仍然是一个显示更多细节的尺寸，前提是它不会增加我的画廊的页面加载时间。

如果可以只在鼠标悬停时加载图像而不是在页面加载时预加载，那就更好了，因为这会阻碍我的速度努力。

这会很难做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:21:27.167

您可以使用 CSS 轻松完成此操作，使用`background: transparant url('') no-repeat;`悬停操作：http: [//jsfiddle.net/stidged/DqCcP/](http://jsfiddle.net/stidged/DqCcP/)。我对 JS 插件不够熟悉，无法推荐其中的任何一个，但我确信它们就在那里！

我的观点是，当您请求非预加载图像时，您有一个简短的实例，其中低分辨率图像消失了，而更好的图像被请求并加载，使其在尚未缓存时闪烁一次。Sprites 弥补了悬停状态图标的错误印象。诚然，这不是世界末日，但它并不理想。

哦，如果您对性能感兴趣，您可能需要查看 Chrome 的 PageSpeed 扩展程序以了解您的网站的运行情况。它也进行图像优化分析，如果有改进的空间，您可以直接从插件中获取优化的图像。此外，了解图像格式和最佳 Photoshop 质量设置可以帮助您在不降低用户体验的情况下节省一些宝贵的千字节。

这是否回答你的问题？

# git - .gitignore 未能忽略新创建的文本文件

> ID：15962412
> 
> 赞同：1
> 
> 时间：2013-04-12T03:10:18.410
> 
> 标签：git, msysgit

我似乎无法弄清楚为什么我的 .gitignore 没有忽略一个简单的文本文件。我已经阅读了手册，并且我认为我已经完成了所有必需的步骤。

首先，我创建了一个这样的新仓库：

```
C:\> mkdir test
C:\> cd test
C:\test> git init 
```

然后我创建并提交了一个 .gitignore ，它忽略了一个名为 junk.txt 的文件

```
C:\test [master]> touch .gitignore
C:\test [master +1 ~0 -0 !]> echo 'junk.txt' >> .gitignore
C:\test [master +1 ~0 -0 !]> git add .gitignore
C:\test [master +1 ~0 -0]> git commit -m 'ignoring junk.txt' 
```

现在我假设如果我有一个名为 junk.txt 的文件，git 会忽略它。但是为什么它仍然说是一个未跟踪的文件？

```
C:\test [master]> touch junk.txt
C:\test [master +1 ~0 -0 !]> git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       junk.txt 
```

我正在使用 msysgit

```
C:\test [master +1 ~0 -0 !]> git --version
git version 1.8.0.msysgit.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:30:12.257

Gerrytan，您在不使用 bash 语法的系统上使用 bash 语法。

具体来说，当您执行以下操作时：

```
echo 'junk.txt' >> .gitignore 
```

你已经告诉 git 忽略文件 'junk.txt'*包括*引号。

如果您使用过 bash 或任何与 sh 兼容的 shell，那么该命令会告诉 git 忽略*不包括*引号的 'junk.txt'，因为在这些 shell 中，引号表示单词边界，但它们没有特殊含义在 cmd.exe（Windows 中的标准命令行）中的含义。

我建议您在编辑器中打开 .gitignore 并查看条目。

# windows-7 - 如何拆卸我的驱动程序？

> ID：15962414
> 
> 赞同：1
> 
> 时间：2013-04-12T03:10:41.583
> 
> 标签：windows-7, kernel, driver, windbg

我正在尝试使用 vmware 和 windbg 进行内核调试。我已经连接了两个操作系统并且所有符号都已成功加载。如果我想在内存中查看我的驱动程序，我该如何反汇编它？我试过 lm 命令和 lmvm 命令

```
kd> lmvm comint32
start    end        module name
88da9000 88daf000   comint32   (private pdb symbols)  C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\comint32.pdb\653387D894B4412FA9E30659E58DD47C1\comint32.pdb
    Loaded symbol image file: comint32.sys
    Image path: \SystemRoot\System32\Drivers\comint32.sys
    Image name: comint32.sys
    Timestamp:        Thu Apr 11 20:10:55 2013 (51677B3F)
    CheckSum:         0000CACF
    ImageSize:        00006000
    Translations:     0000.04b0 0000.04e4 0409.04b0 0409.04e4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:40:49.503

`x comint32!*`应该转储模块的所有符号及其在内存中的地址。

然后您可以使用`u`命令（使用名称（例如`comint32!DriverEntry`）或函数的地址作为参数）反汇编到主窗口中，或者您可以打开反汇编窗口并将名称/地址粘贴到其中并浏览反汇编代码那里。

有关详细信息，请参阅您的 windbg 参考。

# javascript - 如何区分动态加载的脚本和普通的src脚本

> ID：15962415
> 
> 赞同：1
> 
> 时间：2013-04-12T03:10:51.773
> 
> 标签：javascript

如何区分使用 src 属性包含的动态加载脚本和普通脚本？例如

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
  <script src="static.js" type="text/javascript"></script>
  <script type="text/javascript">
  document.getElementsByTagName('head')[0].appendChild(document.createElement('script').src = 'dynamic.js');
  </script>
</head>
<body>
<script type="text/javascript">
// I want to distinguish dynamic.js and static.js script tags
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T03:14:12.287

向动态脚本添加特定的 HTML5`data-*`属性：

```
var script = document.createElement("script");
script.setAttribute("data-is-dynamic", "true");
script.id = "script1";
script.src = "dynamic.js";
document.getElementsByTagName('head')[0].appendChild(script); 
```

获取`<head>`元素的一个选项是使用`document.head`，尽管旧浏览器不支持它。这是 MDN 文档 - [https://developer.mozilla.org/en-US/docs/DOM/document.head](https://developer.mozilla.org/en-US/docs/DOM/document.head)

然后稍后区分，使用：

```
var someScript = document.getElementById("script1"); // or any script tag you want to analyze
if (someScript.getAttribute("data-is-dynamic") === "true") {
    // is dynamic
} else {
    // is static
} 
```

当然，同时，您可以在静态脚本标签上设置一个属性，例如`data-is-static`，然后以相反的方式进行检查。

这允许您在稍后可以检索的脚本标签上有效地设置“标志”。

# vim - 如何禁用草稿预览窗口？

> ID：15962421
> 
> 赞同：35
> 
> 时间：2013-04-12T03:11:38.743
> 
> 标签：vim, autocomplete

在编写 Python 代码时，我喜欢 Vim 的omnicompletion 功能，但我不希望 Scratch Window 在顶部弹出。

我怎样才能禁用它？

（我正在使用 gVim 7.3）

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-04-12T05:06:46.620

此行为由选项`preview`值中的存在定义。`'completeopt'`

默认值为：

```
menu,preview 
```

要删除`preview`，只需将此行添加到您的`~/.vimrc`或修改现有`completeopt`行：

```
set completeopt-=preview 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-12-28T15:15:40.280

如果您不太介意预览窗口，但想轻松关闭它，可以使用`:pclose`命令或`CTRL-W z`键盘组合查看`:help :pclose`。

# sql - SORTING '1 of 20% item' Firebird2.1 SQL

> ID：15962426
> 
> 赞同：0
> 
> 时间：2013-04-12T03:12:02.613
> 
> 标签：sql, vb.net, firebird2.1

我有一个存储自定义项目的 Firebird2.1 表 - 一个名为 'PARTICLARS' 的 varchar(35) 列，它是这样的：

```
1 of 20% item
5 of 20% item
3 of 20% item
4 of 20% item
7 of 20% item
2 of 20% item
.
.
. 
```

我想以这样的自然方式对它们进行排序：

```
1 of 20% item
2 of 20% item
3 of 20% item
4 of 20% item
5 of 20% item
7 of 20% item
.
.
. 
```

我已经完成了许多 sql 命令，例如：

```
select * from TABLE order by 1
select * from TABLE order by PARTICULARS asc nulls last
select * from TABLE order by '00000000000000000000000000000000000'+trim(PARTICULARS)(35)
select * cast(PARTICULARS as varchar(35)) from TABLE order by 1 
```

但我仍然得到上面的同一张表。我是一个新手 vb.net 程序员，自从我开始工作以来已经有几天了。有人会帮助我吗。先感谢您。

迈克酷盖！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:18:22.127

> select * from table_name order by cast (PARTICULARS as int) asc

**您应该键入 cast varchar 到 int 或 float 来排序。**.

希望它对你有好处。

# bash - Bash Script：在单行中执行多个命令&&获取返回码

> ID：15962429
> 
> 赞同：-1
> 
> 时间：2013-04-12T03:12:35.510
> 
> 标签：bash, shell, command-line

我有一个 bash 脚本文件来处理一些东西。

控制.sh：

```
c_command="echo 'Hello'; echo ', Stack Overflow';exit 9";
$c_command;
stat=$?;

if [ $stat -eq 0 ];then
      echo 'Do something....'
elif [ $stat -eq 9 ];then
      echo 'The system will be rebooting...';
else
      echo "..."
fi 
```

我使用变量 $c_command 来执行命令，我得到的退出代码是 0 而不是 9。如果我将它粘贴到命令行中是完美的，但是当我在脚本中运行时非常糟糕。

通常，当我在脚本中执行“退出”命令时，脚本将退出。而且我只希望命令完成而不是脚本并从执行的命令中获取退出代码。

**我解决了这个问题：**

我将 $c_command 中的代码放入脚本文件并运行它。

```
c_command="echo 'Hello'; echo ', Stack Overflow';exit 9";
echo "${c_command}" > tmp.sh;
/bin/bash tmp.sh;
stat=$?;

if [ $stat -eq 0 ];then
      echo 'Do something....'
elif [ $stat -eq 9 ];then
      echo 'The system will be rebooting...';
else
      echo "..."
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:30:16.893

看看你的脚本实际打印了什么，这应该会给你一个关于为什么退出状态为 0 的线索：

```
$ bash ./control.sh
'Hello'; echo ', Stack Overflow';exit 9
Do something.... 
```

在`c_command`展开之后，分号不被视为命令分隔符，而是被视为文字字符。结果，您有一个`echo`退出 0 的命令，而不是一个`echo`命令后跟的一对`exit`命令。

您应该使用一个函数，而不是将代码存储在字符串中：

```
c_command () {
    echo 'Hello'; echo ', Stack Overflow';return 9 
}
c_command
stat=$? 
```

# ruby - After_save, After_create (order) (Ruby on rails)

> ID：15962431
> 
> 赞同：1
> 
> 时间：2013-04-12T03:12:38.953
> 
> 标签：ruby, ruby-on-rails-3

（轨道上的红宝石）

我有一个注册表单，可以将表单中的数据保存到一个表和另一个表中。在用户注册后，我使用钩子、" `after_save :process_field_to_another_table`" 和 " `after_create :send_registration_email`" 向用户发送电子邮件。

不幸的是，“ `after_create`”在“ `after_save`”之前工作，但我需要`:send_registration_email`在保存过程发生后工作。我本来想`:process_field_to_another_table`在“ `after_create`”中运行，但比它连续运行两次，这没有多大意义。

在这种情况下，有什么想法可以指示“ ”在“”`after_save`之前运行吗？`after_create`还是有更好的建议？我试过“ `before_save`”和“ `before_create`”，但它似乎没有正确处理。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T03:53:29.470

你可以把两个钩子合二为一。

```
after_save :foo

def foo
  process_field_to_another_table
  send_registration_email if id_changed?  # id will change only for new record.
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T03:49:56.107

`after_create`您可以使用和`after_update`回调的组合来分隔调用。

```
after_create :process_field_to_another_table, :send_registration_email
after_update :process_field_to_another_table 
```

这种方式，`process_field_to_another_table`在之前被调用`send_registration_email`。

# php - 谷歌地图显示蓝屏

> ID：15962435
> 
> 赞同：0
> 
> 时间：2013-04-12T03:13:16.660
> 
> 标签：php, google-maps, google-maps-markers

我正在尝试在我的网站中实现谷歌地图标记。但它只显示一个蓝屏和一个标记。我在那里看不到任何地图。请在下面查看我的代码。我已经用 mykey 替换了 apikey。

```
 <?

define("MAPS_HOST", "maps.google.com");

define("KEY", "mykey"); // Place your API Key here...

// Get our address (from a database query or POST

$address = "india";

// Build our URL from the above...

$base_url = "http://" . MAPS_HOST . "/maps/geo?q=" . $address . "&output=csv" . "&key=" . KEY;

// Initalise CURL

$c = curl_init();

// Get the URL and save the Data

curl_setopt($c, CURLOPT_URL, $base_url);

curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);

// Save location data

$csvPosition = trim(curl_exec($c));

// Close the connection

curl_close($c);

// Split pieces of data by the comma that separates them

list($httpcode,$elev, $lat, $long) = preg_split("/[,]+/", $csvPosition);

?>

<!DOCTYPE html>

<html>

<head>

<title>Geocoding Example - WinSysAdminBlog.com</title>

<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

<style type="text/css">

  #map_canvas { height: 512px; width: 512px; }

</style>

<script type="text/javascript"

    src="http://maps.googleapis.com/maps/api/js?sensor=false">

</script>

<script type="text/javascript">

  function initialize() {

    var latlng = new google.maps.LatLng(<?php echo $lat; ?>, <?php echo $long; ?>);

    var addressMarker = new google.maps.LatLng(<?php echo $lat; ?>, <?php echo $long; ?>);

    var myOptions = {

      zoom: 16,

      center: latlng,

      mapTypeId: google.maps.MapTypeId.ROADMAP

    };

    var map = new google.maps.Map(document.getElementById("map_canvas"),

        myOptions);

    marker = new google.maps.Marker({ map:map, position: addressMarker });

  }

</script>

</head>

<body onload="initialize()">

<h2>Geocoding Example</h2>

  <div id="map_canvas"></div>

</body>

</html> 
```

提前致谢。真诚的，苏尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:26:36.973

这只是一个猜测，但我会说您的地图请求格式不正确，否则 Google 无法找到您正在搜索的地址（这似乎不太可能）。尝试将格式完整的 URL 粘贴到浏览器中，然后手动检查您返回的 CSV 数据。

如果 Google 无法为您的地址提供地理编码，您将返回 0, 0 作为纬度/经度，即非洲海岸多哥下方的海洋。可能会解释你看到的蓝色方块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:49:09.267

看起来您正在尝试使用[已弃用的 v2 geocoder](http://googlegeodevelopers.blogspot.com.au/2013/03/an-update-on-geocoding-api-v2.html)。请改用[v3 地理编码服务](https://developers.google.com/maps/documentation/geocoding/)

[已报告 API 的 v2 版本存在问题](https://stackoverflow.com/questions/15288244/google-geocoding-v2-api-stopped-working-suddenly)

# ruby-on-rails - Ruby on rails：创建动作不起作用，而新建、编辑和更新（与创建中的形式相同！）动作起作用 - 为什么？

> ID：15962440
> 
> 赞同：2
> 
> 时间：2013-04-12T03:13:40.833
> 
> 标签：ruby-on-rails, ruby, forms, methods

我有实现模型：

```
# encoding : utf-8
class Realization < ActiveRecord::Base
  attr_accessible :city, :street, :title, :work, :photo, :date

  has_attached_file :photo
end 
```

控制器：

```
# encoding : utf-8
class RealizationsController < ApplicationController
  before_filter :admin_required, :except => [:index,:show]

  # GET /realization/new
  def new
    @realization = Realization.new
    @realization.date = Time.now.__send__(:to_date).to_s
  end

  # POST /realization
  def create
    @realization = Realization.new(params[:realization])

    if @realization.save
      redirect_to @realization, notice: 'realization was successfully created.'
    else
      render action: "new"
    end
  end

(...) others 
```

表格视图：

```
<%= form_for @realization, :html => { :multipart => true } do |f| %>
    <% if @realization.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@realization.errors.count, "error") %> prohibited this realization from being saved:</h2>

          <ul>
            <% @realization.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
    <% end %>

    <div class="field">
      <%= f.label :title %><br />
      <%= f.text_field :title %>
    </div>
    (...)
        <div class="field">
            <%= f.file_field :photo %>
        </div>

    <div class="actions">
      <%= f.submit "Submit" %>
    </div>
<% end %> 
```

和路线：

```
resources :realizations 
```

而WEBrick服务器信息是：

```
Started POST "/realizacje" for 127.0.0.1 at 2013-04-12 12:26:35 +0200
Processing by RealizationsController#index as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"zK5jP4ChBBY+R21TjrZkp4xGvCHViTFJ+8Fw6Og28YY=", "realization"=>{"title"=>"wwwwww", "street"=>"", "city"=>"", "work"=>"", "date"=>"2013-04-12"}, "commit"=>"Submit"}
   (1.0ms)  SELECT COUNT(*) FROM "realizations" 
  Realization Load (2.0ms)  SELECT "realizations".* FROM "realizations" ORDER BY created_at DESC LIMIT 7 OFFSET 0
  User Load (1.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Rendered realizations/index.html.erb within layouts/application (156.0ms)
Completed 200 OK in 340ms (Views: 333.0ms | ActiveRecord: 4.0ms) 
```

当我使用表单并推送提交时，它重定向/randers 实现/索引，甚至没有通知或错误！我完全不知道为什么？特别是它以前工作过......也许后来添加的javascript可能是原因？回形针在更新中运行良好，所以不是......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:50:33.037

您可以检查您的新操作以查看您传递给 form_for 的内容。

您希望传入您的实现模型的全新实例。

即在新操作中，您应该有一行显示@realization = Realization.new

我建议这样做的原因是因为 form_for 在您提供给它的对象上调用了一个方法（#new_record？），并将根据该方法调用返回 true 还是 false 来提交 post 或 put 请求。

# php - 使用变量定义 PHP 函数参数

> ID：15962442
> 
> 赞同：0
> 
> 时间：2013-04-12T03:14:00.930
> 
> 标签：php, function

这是我的问题，我想要一个字符串来定义我的函数参数，如下所示：

```
 function blabla($param1, $param2){
  my cool code . $param1 . $param2;
 }

 $params = 'param1, param2';
 blabla($params); 
```

问题是当我这样做时，他使用字符串'param1，param2'作为一个参数，而不是像我想要的那样两个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T03:19:00.437

这是一件非常落后的事情，但您可能会通过将字符串分解为值数组并使用`call_user_func_array`将这些值作为参数传递给函数来做到这一点。

```
function blah($x, $y) {
  echo "x: $x, y: $x";
}

$xy = "4, 5";

$params = explode(", ", $xy);

# Just like calling blah("4", "5");
call_user_func_array('blah', $params); 
```

我会再次警告您，但是您可能选择了错误的解决方案来解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T03:19:59.900

你想怎么做，你做不到。但是，请注意[`call_user_func_array`](http://php.net/manual/en/function.call-user-func-array.php)它可能会解决您正在尝试做的事情。演示如下：

```
function blabla($param1, $param2){
  echo "my cool code $param1 $param2";
}

$params = 'does,work';
call_user_func_array('blabla', explode(',', $params)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T03:18:03.850

使用`explode()`php函数

```
function blabla($param){
  $params = explode(',', $param);
  $param1 = $params[0];
  $param2 = $params[1]; 
 }

 $params = 'param1, param2';
 blabla($params); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T03:32:00.957

PHP 将其解释为一个参数，因为您指定了一个字符串，该字符串恰好包含一个逗号；只是为了将来要记住的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T03:50:32.580

非常简单的事情是：

```
function blabla($param1, $param2){
  my_cool_code . $param1 . $param2;
}

blabla($param1, $param2); 
```

首先，函数名不能有“$”。其次，你只有 2 个参数，你可以通过函数传递这两个参数，就像上面一样。

该代码现在很好用:)

# php - 需要更多详细信息将 Session_start() 绑定到 select 语句

> ID：15962443
> 
> 赞同：1
> 
> 时间：2013-04-12T03:14:02.100
> 
> 标签：php, session-variables

仍在敲我的头，但我认为答案可能会帮助我了解事情的真正运作方式。我一直很讨厌语言，但我想在你的帮助下，我可以强行做到这一点。

因此，我将发布整个代码，以免引起混淆。

```
<html>
<head>
<title>Change a player</title>
</head>
<BODY >
<?php
 include "inc.php";
 session_start();

 print 'Select week for season: ';
   print $this_season;
##the week drop down query#
$wquery=
"select week_num,week_name
from stats_week
where season=$this_season
order by week_num";
    $wresult=mysql_query($wquery);
print'<form action="changeplayer_2.php" method="post">';
    session_start();
        print"<select name='Week_select'> <br>";
        while ($wrow=mysql_fetch_array($wresult))
    { 
    print '<option value="'.$wrow['week_num'].'">'.'week             '.$wrow['week_num'].'     '.$wrow['week_name'].'</option><br>\n';  
    }
print "</select><br><br>";#
print'<button type="submit" >Next</button>';
$varWeek=$_POST['Week_select'];
    print"</form>";
$_SESSION['week'] = $varWeek;
?>  
</body>
</html> 
```

所以，我不知道如何将 'Week_select' 分配给 $_SESSION['week']。上面的代码是我最后的努力。其次，一旦我为 Session 分配了一些东西，我以后如何清除它，这样它就不会一直弹出？奖金问题

```
print 'Select week for season: ';
   print $this_season; 
```

是我可以同时显示语句和变量的唯一方法。当我做

```
print 'Select week for season: '$this_season; 
```

我没有显示变量，当我这样做时

```
print 'Select week for season: $this_season'; 
```

我得到 Select week for season: $this_season 显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:21:55.480

当显示（打印/回显）具有特定字符串的变量时，您必须用“.”（点）将两者连接起来

```
print 'Select week for season: ' . $this_season; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T03:19:10.733

Session unset and destroy: [here](https://stackoverflow.com/questions/5697822/session-unset-or-session-destroy) 或者您可以只注销一个变量：`session_unregister($week)`

是的，理想情况下，在输出任何内容之前，每页应该只有一次 session_start。正确的打印方式是连接：

```
print "Select week for season: " . $this_season; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T03:32:53.047

将 session_start() 放在 html 的顶部。删除页面中的第二个 session_start()。

尝试打印/回显您的 $_SESSION['week'] 以检查它是否具有值。

```
print $_SESSION['week']; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T03:42:35.973

**你的第一个问题：**

**第1部分**

要设置会话，应在 HTML 标记之前插入代码。阅读下面的代码：

```
<?php
session_start();
$_SESSION['week'] = $this_season;
?>

<html>
<head>
//your code here
</head>
<body>
//your code here
</body>
</html> 
```

**第2部分**

如果要完全删除会话，可以使用以下代码，这将破坏会话：

```
<?php session_destroy(); ?> 
```

或者，如果您只想清除会话，可以使用以下代码：

```
<?php unset($_SESSION['week']); ?> 
```

它将清除会话值。

**你的第二个问题：**

要将两种打印语法合并在一起，您需要使用点“。” . 在某些其他语言中，使用“+”。该过程称为串联

您的新代码应该是：

```
print 'Select week for season: ' . $this_season; 
```

这意味着您要打印字符串 'Select week for season:' 后跟变量 $this_season。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T03:19:47.060

session_start() 应该放在输出或任何 $_SESSION 交互之前。而且只有一次。

```
<?php
session_start();
?>
<html>
<head>
<title>Change a player</title>
</head>
<BODY >
<?php
 include "inc.php";
// etc...
?>
</body>
</html> 
```

**UPDv1：**

如果您需要从会话中删除某些内容，那么您可以执行：

```
<?php unset($_SESSION['something']); ?> 
```

**UPDv2：**

如果您需要将整个**选择**放入 $_SESSION，您可以这样做：

```
ob_start();

print "<select name='Week_select'>";

while ($wrow=mysql_fetch_array($wresult))
    { print '<option value="'.$wrow['week_num'].'">week '.$wrow['week_num'].' '.$wrow['week_name'].'</option>'.PHP_EOL; }

print "</select>";

$_SESSION['something'] = ob_get_clean();

// var_dump($_SESSION); 
```

# c - 即使使用 EOF，C 分段错误

> ID：15962446
> 
> 赞同：1
> 
> 时间：2013-04-12T03:14:14.540
> 
> 标签：c, segmentation-fault, eof

我正在将文件加载到内存中，并且使用以下语句执行此操作：

```
 if ((ch = fread(&temp[i],1,1,loadDict)) == EOF)
            break; 
```

但我收到分段错误。使用 gdb 检查后，我确认故障发生在这一行（if 语句，在中断之前）。为什么它看不到它会出错（使用 EOF 的全部意义）？

我认为这可能是我在 if 语句中而不是在 while() 语句中使用 EOF。是否可以在 if 语句中使用 EOF？

更新：更多代码

```
bool load(const char* dictionary)
{
FILE* loadDict = fopen(dictionary, "r");

char* new = malloc(sizeof(char)); // for storing the "new-line" character
*new = 0x0A;

// defines a node, which containes one word and points to the next word
typedef struct node
{
char* word;
struct node* next;
}
node;

    node* head = malloc(sizeof(node));
    node* temp = malloc(sizeof(node));
    head->next=temp;

    // copies a word from the dictionary file into a node

    int* numStore = malloc(sizeof(int)); //count for number of words in dictionary
    int num = 0;
    int ch = 0; // to hold for EOF
    int flag = 0; // for breaking out of while loop
    while(true)
    {
    node* newNode = malloc(sizeof(node));
    temp->next=newNode;
    temp->word=malloc(46);

        int i = -1;

        do
        {
        i++;
        if (!feof(loadDict) || !ferror(loadDict))
        {
            flag = 1;
            break;
        }
        fread(&temp[i],1,1,loadDict);

        if  (memcmp (new, &temp[i], 1) == 0)
            num += 1;
        }
        while(memcmp (new, &temp[i], 1) != 0);

    temp=newNode;

    if (flag == 1)
        break;
    }

   numStore = &num;

return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:49:50.613

```
typedef struct node
{
char* word;
struct node* next;
} 
```

您定义的结构可能会崩溃，至少我见过的实现会崩溃。节点内的 char* 没有固定值。所以当你这样做时：

```
node* head = malloc(sizeof(node)); 
```

malloc() 将分配 5 个字节的内存（char 指针占用 1 个字节，node 占用一个 int 大小指针，在 32 位机器上默认为 4 个字节）。当您读取超过 5 个字节时会发生什么？

此外，你不必要地使这个复杂化：

```
int* numStore = malloc(sizeof(int)); 
```

如果您想在字典中存储单词的数量，请立即使用`int numstore`，减少头痛:)

```
 while(true)
    {
        node* newNode = malloc(sizeof(node));
        temp->next=newNode;
        temp->word=malloc(46);
        ...
    } 
```

现在，这是一个有趣的概念。如果你想读到文件末尾，你有两个选择：1）`feof()` 在循环结束时使用 2），试试这个：

```
 while(true)
   {
       ....
       if(fgetc(loadDict)==EOF) break; else fseek(loadDict,-1,SEEK_CUR);
   } 
```

另外，这一行：`temp->word=malloc(46);` 你为什么要手动分配 46 个字节？

Armin 是正确的，&temp[i]，虽然 i 确实被分配到 0，但 do{...}while(); 完全没有必要。

同样来自 man fread ： http: [//www.manpagez.com/man/3/fread/](http://www.manpagez.com/man/3/fread/) 您正在阅读对我来说看起来像 1 个字符的内容。

在我看来，尝试这样的事情：

设置一个字长的最大值（如 50，实际用途更多） 用 fscanf 读入它 用 fscanf 获取它的长度 分配内存

此外，您不需要为 *head 分配内存；它可以保留为我几乎忘记的迭代器符号，如果您返回 bool，您将如何使用返回的列表，并且 *head 丢失了，从而造成内存泄漏，因为您无法释放其余部分？除非你使用 c99，否则 c 不支持 bool

```
/*Global declaration*/

typedef struct node
{
    char* word;
    struct node* next;
}node;

node *head, *tmp;
/* for the bool if you really want it*/
typedef enum { false, true } bool;

node* load(const char* dictionary)
{
    FILE* loadDict = fopen(dictionary, "r");
    char word[50];
    int num = 0;       
    int len;
    node *old;  
    while(true)
    {
    /*node* newNode = malloc(sizeof(node));
    temp->next=newNode;
    temp->word=malloc(46);*/
        fscanf(loadDict,"%s ",word);
        len = strlen(word);
        tmp = malloc(len + sizeof(node));
        strcpy(tmp->word,word);
        tmp->next = NULL;
        if(head==NULL)
        {
            head = tmp;
            old = head;
        }
        else
            old->next = tmp;
        old = tmp; 
        num++;
        if(fgetc(loadDict)==EOF) break; else fseek(loadDict,-1,SEEK_CUR);    
    }
    printf("number of counted words::\t%d\n",num);
    fclose(loadDict);
    return head;
} 
```

另外，请记住，我只考虑了每个单词之间用一个空格分隔的行为，所以请像那样加载文件 t=，或更改算法 :) 另外，请务必在使用程序后释放内存！

```
void freeDict()
{
    node *i;
    while(head!=NULL)
    {
        i = head;
        head = head->next;
        free(i);
    }
} 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T04:23:54.287

这编译...我现在也运行它了。分配失败的错误处理是应受谴责的；它至少应该给出一条错误消息，并且可能应该释放所有分配的节点并从函数中返回 0（NULL）（并关闭文件）。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct Node
{
    char        *word;
    struct Node *next;
} Node;

Node *dict_load(const char *dictionary)
{
    FILE *loadDict = fopen(dictionary, "r");

    if (loadDict == 0)
        return 0;

    Node *head = 0;
    char line[4096];
    while (fgets(line, sizeof(line), loadDict) != 0)
    {
        size_t len = strlen(line);           // Includes the newline
        Node *node = malloc(sizeof(*node));
        if (node == 0)
            exit(1);    // Reprehensible
        node->word = malloc(len);
        if (node->word == 0)
            exit(1);    // Reprehensible
        memmove(node->word, line, len - 1);  // Don't copy the newline
        node->word[len-1] = '\0';            // Null terminate the string - tweaked!
        node->next = head;
        head = node;
    }

    fclose(loadDict);
    return head;
} 
```

如果您必须`bool`从函数返回 a ，那么您可能需要：

```
static bool dict_load(const char *dictionary, Node **head) 
```

如果参数列表仅固定在文件名上，那么您将被迫使用全局变量，这对设置练习的人来说是令人讨厌的。这是“可行的”，但“丑陋如罪”。

上面的代码确实有效（注意调整后的行）；添加函数`dict_free()`并`dict_print()`发布字典并打印字典以及适当的错误处理，`dict_load()`并且一个简单的`main()`允许我在自己的源代码上对其进行测试，并且它可以工作（向后打印源代码）。它也从中获得了一份干净的健康[`valgrind`](http://valgrind.org/)证明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:25:08.117

您使用 temp[i] 会引起怀疑，您可能正在访问外部内存。
引用 K&R 的话：

```
If pa points to a particular element of an array, then by definition pa+1 points 
to the next element, pa+i points i elements after pa, and pa-i points i elements
before. 

These remarks are true regardless of the type or size of the variables in
the array a. The meaning of ``adding 1 to a pointer,'' and by extension,
all pointer arithmetic, is that pa+1 points to the next object, and pa+i
points to the i-th object beyond pa. 
```

# c++ - 使用数组访问函数时，c++ 是如何思考的？

> ID：15962454
> 
> 赞同：-5
> 
> 时间：2013-04-12T03:15:14.940
> 
> 标签：c++, arrays, function, output

我对 c++ 如何读取以下内容感到困惑，我不明白它如何访问函数以及它如何输出 4 3 2 1 0;

```
int q1 (int x[], int &y, int z){ 
    for (int i = z; i >= 0; i--){ 
        x[i] = y++;   

    } 
    z += 1; 
    return z - 2;    

} 

int main (void) {

int b = 0, c = 4, d; 
int a[5] = {0}; 
d = q1(a, b, c); 

for (int i = 0; i <= c; i++){ 
    cout <<  a[i] << " "; 
} 
cout << endl; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:24:42.667

1.  `int q1 (int x[], int &y, int z)`. 您将`a`（指向数组开头的指针）传递给`q1`，因此在函数中`x`也是如此。从这个意义上说，变化就是变化。`a``q1``x``a`

2.  `y++`. 每一次迭代，`y`都会得到`1`更多。所以？

# c++ - c++ pimpl 和抽象类在一起

> ID：15962457
> 
> 赞同：0
> 
> 时间：2013-04-12T03:15:36.833
> 
> 标签：c++, abstract-class, pimpl-idiom

请看下面的代码（一个代码值一千字）：

形状.hpp

```
class Shape {
public:
    double area() const;
private:
    class ShapeImpl;
    ShapeImpl* pimpl;
}; 
```

* * *

形状.cc

```
// ABS
class Shape::ShapeImpl {
public:
    double area() const = 0;
};

class Circle : public Shape::ShapeImpl { // error: Shape::ShapeImpl is private
public:
    double area() const {return pi*r*r;}
};

double Shape::area() const {
    return pimpl->area();
} 
```

* * *

我知道错误来自哪里，但我更关心良好做法。我的问题：

1.  在上述代码的情况下，将 Pimpl 与 ABC 混合是一个坏主意吗？

2.  如果没有，避免错误的最佳方法是什么（保持封装等）？

3.  如果是，我必须做什么才能在向用户隐藏实现的同时获得多态性（在我的`Shape`场景中）？

Obs：假设性能不是问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:34:35.193

1.  这是个好主意。作为参考，这里是字母/信封成语，由于 Coplien。[ 你可以用一个`enum`代替；显然需要处理错误等。并行的是基本类型是公共的并且实现是隐藏的。见下文。

2.  我只是将最初的`ShapeImpl`声明公之于众；这会导致什么问题？

请参阅： [带有形状的示例](http://www.panix.com/~elflord/cpp/envelope/ex2/)

# javascript - 停止修改 HTML 元素

> ID：15962459
> 
> 赞同：1
> 
> 时间：2013-04-12T03:15:47.327
> 
> 标签：javascript, html, dom

我有一个恶意广告问题。

我的网站包含我们从 2-3 个广告网络填充的一堆广告位。

最近，浏览器中出现了大量插件/扩展（用户以某种方式安装它们），当页面加载时，他们会查看所有此类广告位并将自己的广告代码注入其中。

这对我的收入产生了影响，更重要的是他们注入了色情广告，这让我失去了读者。

**现在我拥有的一种方法是以某种方式保护广告代码，使封装它的 div 不可更改。（可以做到这一点吗？）或者关于如何阻止这种情况的任何其他方法/观点？**

更新 1：正如@ShivaRaptor 指出的，由于跨域安全限制，父 JS 无法修改 iframe 文档中的 DOM 结构。- 这样就可以处理试图修改页面 DOM 的恶意程序。

现在还有另外一种情况——恶意广告者只是检测到 div 上的位置并将他们的广告粘贴到我的广告位顶部。制作包含 DIV 最大 32 位值的 z-index 会阻止他们这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:25:24.763

如果这个恶意软件是浏览器中的插件或扩展，那么您无法阻止它们修改您的页面。当用户允许将它们安装在浏览器中时，它们为任何类型的页面修改打开了大门。

首先，我建议你真的应该收集一些关于问题实际规模的指标，以确定它是否真的应该花费工程时间。我毫不怀疑你有关于这种情况的真实报道，但你知道你的观众中有多少百分比实际上正在折磨这件事？如果它只是您的观众的一小部分，那么您的时间可能最好花在您的网站上以吸引更多观众，而不是尝试处理这个特定的恶意软件。

我能想到的你可以做的事情是：

1.  检测您的页面是否已以特定方式修改，您可以撤消他们所做的事情，删除/隐藏他们注入的内容，或者只是尝试将您的页面恢复原状。
2.  尝试检测插件是否已安装或在修改您的页面时处于活动状态，并警告您的查看者他们有恶意软件正在修改网站，并提供有关如何删除恶意软件的说明。
3.  更多地了解为什么您的查看者允许安装此恶意软件，并查看是否有一些教育或其他途径可以关闭，以降低安装恶意软件的可能性。例如，如果它声称可以提供您的网站所缺乏的一些好处，那么您可能需要该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:27:49.023

一旦您的网页请求被填满并且您的服务器发送它，这就是您对它的控制的结束。在客户端，所有这些都可以更改，您无能为力。

这就是网络的本质。

# performance - 访问 DataTable/DataRowsCollection 的更快方法是什么？

> ID：15962465
> 
> 赞同：1
> 
> 时间：2013-04-12T03:17:01.670
> 
> 标签：performance, datatable, dataset

我有一个包含 100,000 多个 DataRow 的数据表。哪种方法访问集合更快？有没有更快的方法来处理行集合？方法一：

```
var rows= dsDataSet.Tables["dtTableName"].Rows;
int rowCount = dsDataSet.Tables["dtTableName"].Rows.Count;

for (int c = 0; c < rowCount; c++)
{
    var theRow = rows[c];        
    //process the dataRow 
} 
```

方法二：

```
for (int c = 0; c < dsDataSet.Tables["dtTableName"].Rows.Count; c++)
{
    var theRow = dsDataSet.Tables["dtTableName"].Rows[c];
    //process the dataRow 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:30:02.013

值得注意的是，访问*单元格*最直接的方法是通过`DataColumn`索引器；数据实际上存储在列中，而不是行中（否：真的）。

所以像：

```
var table = dataSet.Tables["dtTableName"];

// HERE: fetch the DataColumn of those you need, for example:
var idCol = table.Columns["Id"];
var nameCol = table.Columns["Name"];

// now loop
foreach(DataRow row in table.Rows)
{
    var id = (int)row[idCol];
    var name = (string)row[nameCol];
    // ...
} 
```

但是，坦率地说，如果你想要最好的性能，我会先说“不要使用`DataSet`/ `DataTable`”。这实际上是一个非常复杂的模型，旨在实现各种灵活，具有更改跟踪、规则执行等功能。如果你想要*快速*，我会使用 POCO 和类似“dapper”的东西，例如：

```
public class Foo {
    public int Id {get;set;}
    public string Name {get;set;}
}
...
string region = "North";
foreach(var row in conn.Query<Foo>("select * from [Foo] where Region = @region",
         new { region })) // <=== simple but correct parameterisation
{
    // TODO: do something with row.Id and row.Name, which are direct
    // properties of the Foo row returned
    var id = row.Id;
    var name = row.Name;
    // ...
} 
```

甚至通过以下方式跳过类型`dynamic`：

```
string region = "North";
foreach(var row in conn.Query("select * from [Foo] where Region = @region",
         new { region })) // ^^^ note no <Foo> here
{
    // here "row" is dynamic, but still works; not quite as direct as a
    // POCO object, though
    int id = row.Id;        // <=== note we can't use `var` here or the
    string name = row.Name; // variables would themselves be "dynamic"
    // ...
} 
```

# numpy - spsolve和solve的意外差异

> ID：15962466
> 
> 赞同：2
> 
> 时间：2013-04-12T03:17:08.417
> 
> 标签：numpy, scipy, sparse-matrix

我需要解决不同大小的线性方程。有时大小可能是 0 或 1，在这种情况下会发生一些错误。例如，

```
import numpy as np
from numpy.linalg import solve
from scipy.sparse.linalg import spsolve
A1 = np.array([[1,2],[2,1]])
b1 = np.array([[1],[1]])
A2 = np.array([[1]])
b2 = np.array([[1]]) 
```

调用 spsolve 或 solve 时会出现一些意想不到的结果：

```
sage: solve(A1,b1)
array([[ 0.33333333],
       [ 0.33333333]])
sage: solve(A2,b2)
array([[ 1.]])
sage: spsolve(A1,b1)
array([ 0.33333333,  0.33333333])
sage: spsolve(A2,b2)
ValueError: object of too small depth for desired array 
```

请注意，“spsolve(A1,b1)”的调用实际上产生了一个行向量，是否有强制它成为列向量？此外，调用“spsolve(A2,b2)”的错误也很奇怪，因为 A1 和 b1 的大小不为零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:43:10.113

`spsolve`不返回二维数组，而是返回一维向量。

用于`numpy.atleast_2d`膨胀向量，例如，在您的示例中

```
In [10]: np.atleast_2d(spsolve(A1,b1)).T
Out[10]: 
array([[ 0.33333333],
       [ 0.33333333]]) 
```

并`.T`得到一个列（2d）向量。这可能也解决了您的第二个问题，与结果向量的深度有关。

（我不使用圣人，所以我无法重现您的错误。）

# python - 为什么任何一个都不接受多个参数，比如最小值和最大值？

> ID：15962469
> 
> 赞同：-1
> 
> 时间：2013-04-12T03:17:32.670
> 
> 标签：python, parameters, language-design

功能`min`和`max`非常灵活；它们可以采用任意数量的参数，或者一个可迭代的参数。`any`并且`all`在采用任何大小的迭代方面是相似的，但它们不采用多个参数。这种行为差异是否有原因？

我意识到这个问题似乎无法回答，但增强 Python 的过程是相当开放的；许多看似武断的设计决定都是公共记录的一部分。我在过去看到过类似的问题的回答，我希望这个问题也可以。

受这个问题的启发：[Python](https://stackoverflow.com/questions/15959500/is-there-a-builtin-function-version-of-and-and-or-or-in-python)[中是否有内置函数版本`and`和/或？`or`](https://stackoverflow.com/questions/15959500/is-there-a-builtin-function-version-of-and-and-or-or-in-python)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:52:37.330

Python 中的许多特性都是根据用户的需求量来推荐的，但它们也必须符合语言的风格。人们经常需要这样做：

```
max_val = 0
for x in seq:
    # ... do complex calculations
    max_val = max(max_val, result) 
```

这保证了使用多个参数。它看起来也不错。我没有听说有人需要使用它，`any(x, y, z)`因为它最常用于序列。对于少数值，您可以只使用`and`/`or`逻辑运算符，而对于很多值，您确实应该使用列表，否则您的代码会变得混乱。我敢肯定，对此没有太多考虑，因为它真的不会使任何人受益，它的需求量并不大，因此 Python 开发人员不必担心。

# javascript - 玉：文本框改变值=“...”

> ID：15962474
> 
> 赞同：1
> 
> 时间：2013-04-12T03:18:50.270
> 
> 标签：javascript, html, node.js, express, pug

我是 Jade 和 Html 的初学者，我正在尝试在 Jade 中构建一个表单。我遇到的问题是一个基本的文本框，如下所示：

```
input(type='text', name='sessionID', value = 'valueID') 
```

当我需要`sessionID`在我的代码中进行修改时，我只是这样做`sessionID = //some command.` 但这不起作用`valueID = //some command.`

有没有可能以任何方式改变`valueID`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T06:13:27.057

看起来翡翠只是对价值很挑剔。

```
input(type='text', name='sessionID', value=valueID) 
```

强制它使用 valueID 作为变量

我在这里做了一个工作案例：[http ://runnable.com/UWekeMufwudHAACH](http://runnable.com/UWekeMufwudHAACH)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:29:11.200

玉只是一种生成静态 html 的模板语言，它不会将数据绑定到对象。如果要更改 html 标记的值，则需要使用 javascript 并选择元素，然后更新它的值。

```
document.querySelector('input[name=sessionID]').value = 'some new value'; 
```

# android - Android如何在一个Horizo ntalScrollView中排列多行

> ID：15962485
> 
> 赞同：0
> 
> 时间：2013-04-12T03:21:05.517
> 
> 标签：android, scrollview

我正在寻找在滚动视图中设置多行的解决方案。

我有 15 个按钮 (3*5)，想向右滚动，所以还有 15 个按钮。

我已经得到了什么：所有按钮都排成一排（至少，滚动自己工作）。

然后我尝试在最高层（XML 中的第 1 行）设置 Horizo​​ntalScrollView，然后设置一个包含 3 个其他 LinearLayout 的 LinearLayout，因此树如下所示：

```
 <HorizontalScrollView
  <LinearLayout
     <LinearLayout
       (buttonABCDEF)
     </LinearLayout>
     <LinearLayout
       (button01234)
     </LinearLayout>
     <LinearLayout
       (button56789)
     </LinearLayout>
  </LinearLayout>
</HorizontalScrollView> 
```

然后我得到的是一个（~80x80）矩形（ScrollView 中的线性布局），它显示了一个文本（我的布局中的第一个视图）和一个按钮（buttonA - 第一个）每个字符都写入一个新行。（字母数=行数=按钮高度）。这根本不可滚动。

我试图只发布相关的代码。注意： android:layout 的东西对你来说并不重要，因为它不能在线性布局中工作：

```
 <HorizontalScrollView

                   xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
     xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
       android:screenOrientation="landscape" 
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
    android:layout_width="match_parent"
    android:layout_height="match_parent"

        android:id="@+id/horizontalScrollView1"

         tools:context=".MainActivity"
    android:background="@android:color/black"
        >

         <LinearLayout
             android:layout_width="match_parent"
                         android:layout_height="match_parent"
            android:orientation='vertical'  > 
             android:layout_width="9dp"

         <LinearLayout
             android:layout_width="match_parent"
                         android:layout_height="match_parent" > 
             android:layout_width="9dp"

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="0dp"
        android:textColor="@android:color/white"
       android:text="text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Button
        android:id="@+id/buttonA"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/buttonB"
        android:layout_toRightOf="@+id/textView1"
          android:width="70dp"
        android:text="A" />

    <Button
        android:id="@+id/buttonE"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/buttonD"
        android:layout_alignBottom="@+id/buttonD"
        android:layout_toRightOf="@+id/buttonD"
           android:width="70dp"
      android:text="B" />

    <Button
        android:id="@+id/buttonF"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/buttonE"
        android:layout_alignBottom="@+id/buttonE"
        android:layout_toRightOf="@+id/buttonE"
        android:text="C" />

</LinearLayout>
      <LinearLayout

             android:layout_width="match_parent"
                         android:layout_height="match_parent"
                    > 

    <Button
        android:id="@+id/button0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:layout_marginTop="15dp"
          android:background="@drawable/eins"
        android:text="0" /> 
/LinearLayout>
/LinearLayout>
</HorizontalScrollView> 
```

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:12:39.803

我修复了它，使布局变得全新。即使那当然不是最好的方法，它似乎比搜索错误更快

# oracle11g - BYPASS_RECURSIVE_CHECK oracle 提示目的？

> ID：15962486
> 
> 赞同：5
> 
> 时间：2013-04-12T03:21:07.903
> 
> 标签：oracle11g, hint

有人知道这个未记录的 oracle 提示的目的：

```
BYPASS_RECURSIVE_CHECK 
```

为什么要使用或不使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T03:37:42.787

你永远不应该使用那个提示。它没有记录是有原因的。如果您打算使用它，它将被记录在案。

据我所知，偶尔会出现优化器在优化递归 SQL 语句时生成不同计划的情况。此提示旨在影响这一点。实际上，除非您是为 Oracle 工作的开发人员，并且正在与优化器小组讨论为什么您的某些递归 SQL 语句没有生成您期望的计划，或者您是具有 Oracle 支持的开放式 SR 的开发人员被指示使用此提示来解决优化器错误，您几乎肯定最好忽略此提示以及您遇到的任何其他未记录的提示。

如果您真的想了解更多信息，可以查看 MOS ID 398605.1，其中包含一些相关错误的链接。

# scala - Mixin SynchronizedSet 与 SortedSet 具有隐式排序对象

> ID：15962490
> 
> 赞同：1
> 
> 时间：2013-04-12T03:21:35.787
> 
> 标签：scala, collections, implicit

我似乎无法创建一个也混入 SynchronizedSet 的 SortedSet。问题的症结在于 SortedSet 需要一个隐式的 Ordering 对象。

```
val orderByIdThenName = Ordering[(Int, String)].on[Foo](foo => foo.id -> foo.name)
new mutable.TreeSet[Foo]()(orderByIdThenName) // <- Works fine and is Ordered
new mutable.HashSet[Foo] with mutable.SynchronizedSet[Foo] // <- Mixin works
new mutable.TreeSet[Foo]()(orderByCount) with mutable.SynchronizedSet[Foo] // Fail! 
```

最后一行给出错误“无法创建对象，因为 scala.collection.SortedSetLike 中的成员 Ordering[A] 未定义。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:45:01.880

这看起来是 IntelliJ 中的一个错误。我能够重现该问题并在编辑器中看到错误，但编译时没有错误或警告。

因为没有给出 orderByCount 的定义，所以我假设它类似于：

```
val orderByCount = Ordering[Int].on[Foo](_.count)
new mutable.TreeSet[Foo]()(orderByCount) with mutable.SynchronizedSet[Foo] 
```

**更新**：想出了一种通过覆盖来消除 IntelliJ 错误的方法`ordering`：

```
new mutable.TreeSet[Foo]()(orderByCount) with mutable.SynchronizedSet[Foo] {
    implicit override val ordering: Ordering[Foo] = orderByCount
} 
```

# c++ - 如何初始化一系列不可移动、不可复制的对象？

> ID：15962491
> 
> 赞同：5
> 
> 时间：2013-04-12T03:21:39.327
> 
> 标签：c++, constructor, compile-time

假设我有一个既不能移动也不能复制的类型：

```
struct foo
{
  explicit foo( size_t ){}
  ~foo(){}

  foo( foo const & ) = delete;
  foo( foo && ) = delete;
  foo& operator=( foo const & ) = delete;
  foo& operator=( foo & ) = delete;
}; 
```

现在给定一个在编译时已知的数字（称为 N），有什么方法可以在堆栈上创建这些“序列”，每个都用数字 0 到 N-1 初始化？`foo[N]`我会对 C 风格的数组、a`std::array< foo, N >`或什`std::tuple`至某种类型的a 感到满意。

我试图避免的是写出：

```
foo f0( 0 ), f1( 1 ), ... fNminus1( N-1 ); 
```

当感觉这是编译器应该能够为我做的事情时。我能想到的最好的方法是使用`boost::optional`.

```
boost::optional< foo > f[N];

for( size_t i = 0U; i < N; ++i )
  f[i] = boost::in_place( i ); 
```

但这依赖于运行时逻辑，即使所有必需的信息在编译时都可用。另外，我还剩下一些行为类似于指针数组的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T03:59:19.703

```
// create a type with the proper alignment
typedef std::aligned_storage<sizeof(foo), std::alignment_of<foo>::value>::type buffer_type;

const int N = 10;
// create an array of uninitialized raw data
buffer_type storage_buffer[N];

// initialize each foo object with placement new
for (size_t i=0; i<N; ++i)
    new (storage_buffer + i) foo(i);

foo * fp = (foo*)(&storage_buffer);
// access your foo objects via fp

// you must manually call the destructor of each object
for (size_t i=0; i<N; ++i)
    fp[i].~foo(); 
```

如果这看起来很麻烦，那就是。但是您可以轻松地将该功能封装在一个类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:27:42.353

虽然不是严格意义上的数组，但您可以通过模板递归来完成此操作

```
template< typename T, size_t N >
struct type_array : public type_array< T, N-1 > {
    // this is the Nth element
    T elem;
    // it is constructed with N
    type_array() : elem( N ) {}

    // member function to return the Nth element
    T & get( size_t n ) {
        if ( n == N ) {
            return elem;
        } else {
            return type_array< T, N-1 >::get( n );
        }
    }
};

// base case when N == 0
template< typename T >
struct type_array<T, 0> {
    T elem;
    type_array() : elem( 0 ) {}
    T & get( size_t n ) {
      return elem;
    }
}; 
```

用法：

```
type_array< foo, 100 > foo_array;   // construct 100 foos
foo_array.get(1);                   // foo with n == 1
foo_array.get(2);                   // foo with n == 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-05T20:07:56.227

就像本杰明林德利的回答一样，但在课堂上打包：

```
#include <type_traits>
#include <utility>
#include <new>

template<typename T>
class uninitialized {
public:
  constexpr uninitialized() { }

  ~uninitialized() {
    get().~T();
  }

  explicit uninitialized(const uninitialized& other) {
    construct(other);
  }

  explicit uninitialized(uninitialized&& other) {
    construct(std::move(other));
  }

  template<class... Args>
  explicit uninitialized(Args&&... args) { 
    construct(std::forward<Args>(args)...);
  }

  template<class... Args>
  void construct(Args&&... args) noexcept {
    static_assert(std::is_nothrow_constructible<T, Args...>::value, "constructor should not throw!");
    ::new(getPointer()) T (std::forward<Args>(args)...);
  }

  uninitialized& operator = (const T& t) { 
    get() = t;
    return *this;
  }

  uninitialized& operator = (T&& t) {
    get() = std::move(t);
    return *this;
  }

  T* operator -> () { return getPointer(); }    
  T& operator * () { return get(); }    
  T* operator & () { return getPointer(); }    
  T* getPointer() { return reinterpret_cast<T*>(&data); }    
  T& get() { return *reinterpret_cast<T*>(&data); }

  const T* operator -> () const { return getPointer(); }    
  const T& operator * () const { return get(); }    
  const T* operator & () const { return getPointer(); }    
  const T* getPointer() const { return reinterpret_cast<const T*>(&data); }    
  const T& get() const { return *reinterpret_cast<const T*>(&data); }

private:
  std::aligned_storage<sizeof(T), std::alignment_of<T>::value>::type data;
}; 
```

现在事情变得简单了一点：

```
uninitialized<foo> f[N];

for (size_t i = 0; i < N; ++i)
  f[i].construct(i);

for (const auto& fooref : f)
  fooref->bar();

// foo::~foo is called for you 
```

# php - 刷新并重新填充选择框

> ID：15962492
> 
> 赞同：0
> 
> 时间：2013-04-12T03:21:49.863
> 
> 标签：php, javascript, jquery, ajax

我使用下面的 php 代码填充我的选择框，我现在的问题是我有我的参考表单，它向这个选择框添加了新项目。我想要的是当我从我的参考中添加新的抽屉项目时，我只想刷新这个选择框而不影响整个页面。我阅读了有关 ajax/jquery/js 解决方案的信息，但我不知道如何集成它。

```
<td>Drawer</td>
        <td>
            <select name="municipality" class="country" style="width: 200px;">
              <option selected="selected"></option>
              <?php
                    $sql=mysql_query("select idDrawer,drawerName from drawer");
                    while($row=mysql_fetch_array($sql))
                    {
                    $id=$row['idDrawer'];
                    $data=$row['drawerName'];
                    echo '<option value="'.$id.'">'.$data.'</option>';
                     }
                ?>
            </select>*
        </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:33:07.907

你的问题引发了广泛的讨论。我建议遵循这些参考：

[http://www.youtube.com/watch?v=0CMTQtnZ0G0](http://www.youtube.com/watch?v=0CMTQtnZ0G0)

[http://www.youtube.com/watch?v=SbQUJdimia4](http://www.youtube.com/watch?v=SbQUJdimia4)

[http://www.youtube.com/watch?v=GVHphoGi5dY](http://www.youtube.com/watch?v=GVHphoGi5dY)

# sage - 命令 partial_fraction(x) 和 coefficient(x,n) 的组合

> ID：15962495
> 
> 赞同：1
> 
> 时间：2013-04-12T03:22:08.680
> 
> 标签：sage

我正在尝试进行一些迭代计算，其中每次 SAGE 构造一个分数并列出该分数的部分分数分解中的系数。我意识到象征性地做每一件事，SAGE 想要尽可能地保持整数。所以它的作用是简化分数，比如`1/(x-3/2)`as `2/(2x-3)`，然后当我要求

> f.coefficient(x-3/2,-1)

它回来了`0`，而我希望它回来`1`。

我试图用数字来解决问题，但有两个问题：

1.  每次迭代后错误变得非常大
2.  计算它需要更长的时间

非常感谢任何让 SAGE 解决此问题的建议。

# mongodb - mongodump 忽略一些指定的集合

> ID：15962496
> 
> 赞同：48
> 
> 时间：2013-04-12T03:22:37.033
> 
> 标签：mongodb, mongodump

我试图在产品服务器上备份我的 mongo 数据库。然后恢复然后回到登台服务器。这里出现了一些问题，数据库中有很多集合，我想删除一些我不想在登台服务器上恢复的集合。

我可以通过转储暂存数据库，转储生产数据库，然后使用**--drop**选项将产品恢复到暂存来解决此问题。并在 staging db 中恢复指定的集合。呃。。真的很糟糕。

**1.转储生产数据库**

```
mongodump --host product-server-host --username abcd --password bcda -d db -o pruduct-dump-dir 
```

**2.转储暂存数据库**

```
mongodump --host staging-server-host --username abcd --password bcda -d db -o staging -dump-dir 
```

**3\. 恢复所有集合，然后将集合恢复** 恢复 pruduct-dump-dir 到登台服务器

```
mongorestore --host staging-server-host --username abcd --password bcda --drop pruduct-dump-dir

mongorestore --host staging-server-host --username abcd --password bcda --drop --collection coll pruducting-dump-dir 
```

当我倾倒时，有没有像忽略收集这样的选项？任何建议将不胜感激：3

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2015-03-10T23:32:38.667

现在可从版本 3.0.0 开始

```
--excludeCollection <collection_name>
--excludeCollectionsWithPrefix <collection_prefix> 
```

重复排除超过 1 个

查看[文档](https://docs.mongodb.com/v4.2/reference/program/mongodump/#cmdoption-mongodump-excludecollection)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-10-02T16:13:38.023

```
mongodump --db test --excludeCollection=users --excludeCollection=salaries 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-12T09:18:51.467

您可以添加`--collection COLLECTION_NAME`以转储您需要的集合。默认情况下，如果您未指定要从数据库转储的集合，[MongoDump](http://docs.mongodb.org/manual/reference/mongodump/#cmdoption-mongodump--collection)将转储该数据库中的所有集合。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-11-14T23:02:33.883

从 Mongo 3.4 开始，您现在`--nsExclude <namespace pattern>`可以在从 Mongo 数据库转储恢复时指定一个选项，这将从恢复操作中排除指定的命名空间。这在`mongodump`操作已经发生时特别有用。

官方文档在这里：[https ://docs.mongodb.com/manual/reference/program/mongorestore/#cmdoption-nsexclude](https://docs.mongodb.com/manual/reference/program/mongorestore/#cmdoption-nsexclude)

您可以使用通配符排除多个集合：

```
mongorestore --db test --nsExclude 'test.*_tmp' 
```

或者，指定多个`--nsExclude`选项也可以：

```
mongorestore --db test --nsExclude 'test.collection1' --nsExclude 'test.collection2' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-19T15:11:00.380

在备份 mongo 数据库时我必须这样做。如果您使用 python（或任何其他语言），您也可以使用类似的方法。完成 mongodump 后，您只需删除不需要的集合的 bson 和 metadata.json 文件。

```
 import os
    EXCLUDE_COLLECTIONS = ['collection_1', 'collection_2']
    db_dump_path = "/Path/to/mongodump"
    db_name = "name_of_db"
    for collection_name in EXCLUDE_COLLECTIONS:
        bson_file_path = os.path.join(db_dump_path, db_name, '{}.bson'.format(collection_name)
        meta_file_path = os.path.join(db_dump_path, db_name, '{}.metadata.json'.format(collection_name)
        if os.path.exists(bson_file_path) and os.path.exists(meta_file_path):
            os.remove(bson_file_path)
            os.remove(meta_file_path) 
```

# mysql - MySQL - 多个连接的 1064 问题

> ID：15962499
> 
> 赞同：0
> 
> 时间：2013-04-12T03:23:23.820
> 
> 标签：mysql, join, pdo

以下是我所涉及的数据库表的简要总结：

培训班

*   课程编号
*   学校编号
*   学科 ID
*   姓名

学校

*   学校编号
*   姓名

学科

*   学科 ID
*   姓名

（表中还有其他列，但它们与问题并不真正相关）

我正在尝试选择 Courses.SchoolId = 给定 SchoolId 的所有课程，从 Schools 中选择所述学校的名称，与每门课程相关的所有学科的名称，并按 Disciplines.Name 排序。如果这个摘要没有意义，也许我的查询会：

```
 $prep = $pdo->prepare('SELECT Courses.*, Disciplines.Name as Discipline, Schools.Name as School
                        FROM Courses
                        JOIN Courses AS C ON Courses.SchoolId = :schoolId
                        AND Schools ON Schools.SchoolId = :schoolId
                        AND Disciplines ON Disciplines.DisciplineId = Courses.DisciplineId
                        ORDER BY Disciplines.Name ASC');
$prep->bindParam(':schoolId', $schoolId, PDO::PARAM_INT);

if(!$prep->execute()){
    print_r($pdo->ErrorInfo());
} 
```

这是错误：

```
Warning: PDOStatement::execute(): SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ON Schools.SchoolId = '115773' AND Disciplines ON Disciplines.Disciplin' at line 4 in /Users/foremanjordan/Web Dev/Cleerly/src/scripts/addCourse.php on line 24 
```

我一生都无法弄清楚为什么会这样。我对使用 JOIN 还是很陌生，所以我确信这与我的无知有关，但据我目前的理解，这应该有效吗？

另外，作为一个附带问题，有人理解为什么我必须在第一行 JOIN 行中为 Courses 起别名吗？否则我会收到一个非唯一错误，但我不明白为什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:27:13.897

`JOIN`不使用指定的关键字`AND`

```
SELECT Courses.*, 
       Disciplines.Name as Discipline, 
       Schools.Name as School
FROM   Courses
       INNER JOIN Schools 
          ON Courses.SchoolId = Schools.SchoolId
       INNER JOIN Disciplines 
          ON Disciplines.DisciplineId = Courses.DisciplineId
WHERE  Courses.SchoolId = :schoolId
ORDER  BY Disciplines.Name ASC 
```

排序时，使用`ORDER BY`not`SORT`

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# mobile - 三星 Galaxy Note II 跌幅或 devicePixelRation

> ID：15962501
> 
> 赞同：0
> 
> 时间：2013-04-12T03:23:45.287
> 
> 标签：mobile, galaxy, samsung-mobile

Samsun Galaxy Note II 的分辨率是`1280*720`，但不知道是`devicePixelRation`还是`device-independent pixels`。

有人说跌幅是**320px**，也有人说是**360px**。确切的值是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T10:03:57.023

这是我的第一次回复，希望我给你想要的正确答案...@@

由wiki定义：<a href="http://en.wikipedia.org/wiki/Pixel_density" rel="nofollow">监视器PPI的计算

Dp = sqrt(Wp*Wp+Hp*Hp)

在哪里

*   Dp 是以像素为单位的对角线分辨率
*   Wp 是以像素为单位的宽度分辨率（Note2 中为 720px）
*   Hp 是以像素为单位的高度分辨率（Note2 中为 1280px）

和

PPI = (Dp / Di)

*   Di 是以英寸为单位的对角线尺寸（这是作为显示器尺寸宣传的数字）（注 2 中为 5.55 英寸）

所以你可以得到你的 dp = sqrt(720*720+1280*1280) = 1468.60

您的 PPI（并不总是与 DPI 相同，但在我们的情况下您可以认为它们是相同的）PPI = (1468.60 / 5.55) = 264（物理上），应该位于 hdpi...

比率应为 264/160 = 1.65，宽度上与设备无关的像素应为 (720/1.65) = 436.36 dip（& on height=>775.76 dip）

你提到有人说下降是 320 像素，我认为他们的意思是 DPI 是 320 或 360 ......在公式中，DPI 是 264（物理）......

我在[XDA-Developer 上看到的说](http://forum.xda-developers.com/showthread.php?t=2243799)：</p>

> DPI 是屏幕的像素密度，可以对其进行软修改以使您的显示“看起来”不同。有许多应用程序实际上可以更改您的 DPI。Note 2 的 DPI 默认为 320。240 DPI 是此类屏幕尺寸的最佳 IMO。

希望这个答案可以帮助你...

# monit - 在Monit中存在文件的警报

> ID：15962502
> 
> 赞同：6
> 
> 时间：2013-04-12T03:23:52.247
> 
> 标签：monit

我一直在使用monit 一段时间，但如果文件存在，我想报警。这是与[主文档](http://mmonit.com/monit/documentation/monit.html#existence_testing)相反的用例。

这里的文档说：

```
IF [DOES] NOT EXIST [[<X>] <Y> CYCLES] THEN action [ELSE IF SUCCEEDED [[<X>] <Y> CYCLES] THEN action]
action is a choice of "ALERT", "RESTART", "START", "STOP", "EXEC" or "UNMONITOR". 
```

这给了我“如果文件丢失就吓坏了”的秘诀。但我想“如果文件在那里就吓坏了”。行动的选择意味着没有“什么都不做”的行动。我可以选择无操作，但这对于“什么都不做”的标准情况来说真的很愚蠢。

我猜了一些基本情况：

```
IF EXISTS THEN alarm
IF EXIST THEN ALARM 
```

那么，有没有标准的方法`IF IT DOES EXIST`呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-15T22:43:24.427

我最近正在寻找与您相同的解决方案，不幸的是，我无法在monit中找到一种方法。

我的情况与您的情况略有不同，所以如果文件不存在，我最终会感到震惊，如果存在则执行一个 shell 脚本。和你一样，我不想仅仅因为文件不存在而生成一个 shell，并且在 /var/log/messages 中显示“文件不存在”对我来说没什么大不了的。

我知道您说过您可以选择无操作，因此您可能不需要以下内容，但我正在为可能遇到相同问题但不知道如何操作的人添加它。

```
check file testfile with path /path/to/file
    if not exist then exec "/bin/bash -c 'echo dne > /dev/null'" else if succeeded then alarm 
```

请注意，您必须执行 /bin/bash 才能将 echo 的输出写入 /dev/null，否则 monit 将逐字地回显“dne > /dev/null”

编辑：由于灾难引起了我的注意，新版本的 Monit 使用警报而不是警报，所以检查看起来像这样：

```
check file testfile with path /path/to/file
    if not exist then exec "/bin/bash -c 'echo dne > /dev/null'" else if succeeded then alert 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-07T09:10:32.100

从 monit 5.21.0 开始，直接支持更改存在：

```
check file testfile with path /path/to/file
    if exist then alert 
```

请参阅更改日志[https://mmoni.com/monit/changes/#5.21.0](https://mmonit.com/monit/changes/#5.21.0)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-12T15:34:56.030

请检查：

```
check program not_exist_file_root_test with path "/bin/ls /root/test"

if status = 0 then alert 
```

* * *

或者

```
check program not_exist_file_root_test with path /bin/sh -c "test -f /root/test"

if status = 0 then alert 
```

我的 2 美分

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-01T16:29:49.233

renab，至少在我的版本（5.2.5）中，您的检查应该以“然后警报”而不是“然后警报”结尾。

```
testfile with path /path/to/file
  if not exist then exec "/bin/bash -c 'echo dne > /dev/null'" else if succeeded then alert 
```

# php - 从 PHP5 (Windows) 调用 MAXMIND geoip.dat 时出现意外字符/T_STRING 错误

> ID：15962506
> 
> 赞同：-1
> 
> 时间：2013-04-12T03:24:13.650
> 
> 标签：php, maxmind

我在尝试从他们的示例 PHP 脚本中调用 MAXMIND 的 geoip.dat 时遇到了一个奇怪的错误 - [http://dev.maxmind.com/geoip/downloadable](http://dev.maxmind.com/geoip/downloadable)

```
*Warning*: Unexpected character in input: '
in*C:\Inetpub\wwwroot\clients\geoip\GeoIP.dat*on line*983*
*Parse error*: syntax error, unexpected T_STRING
in*C:\Inetpub\wwwroot\clients\geoip\GeoIP.dat*on line*983* 
```

[Geoip.dat 是一个二进制文件，必须从http://dev.maxmind.com/geoip/geolite](http://dev.maxmind.com/geoip/geolite)单独下载。请注意，还有一个我没有使用的 CSV 版本。

我的代码与示例脚本几乎完全相同，除了路径：

```
<?php

// This code demonstrates how to lookup the country by IP Address

include("GeoIP.dat");

// Uncomment if querying against GeoIP/Lite City.
// include("geoipcity.inc");

$IPaddress=$_SERVER['REMOTE_ADDR'];

$gi =
geoip_open("C:\Inetpub\wwwroot\clients\geoip\GeoIP.dat",GEOIP_STANDARD);

echo geoip_country_code_by_addr($gi, $IPaddress) . "\t" .
geoip_country_name_by_addr($gi, $IPaddress) . "\n";
echo geoip_country_code_by_addr($gi, $IPaddress) . "\t" .
geoip_country_name_by_addr($gi, $IPaddress) . "\n";

geoip_close($gi);

?> 
```

这是我的 PHP 信息输出：

```
PHP Version 5.2.6

System  Windows NT 5.2 build 3790
Build Date  May 2 2008 18:01:20
Configure Command   cscript /nologo configure.js "--enable-snapshot-build" "--with-gd=shared" "--with-extra-includes=C:\Program Files (x86)\Microsoft SDK\Include;C:\PROGRA~2\MICROS~2\VC98\ATL\INCLUDE;C:\PROGRA~2\MICROS~2\VC98\INCLUDE;C:\PROGRA~2\MICROS~2\VC98\MFC\INCLUDE" "--with-extra-libs=C:\Program Files (x86)\Microsoft SDK\Lib;C:\PROGRA~2\MICROS~2\VC98\LIB;C:\PROGRA~2\MICROS~2\VC98\MFC\LIB"
Server API  ISAPI
Virtual Directory Support   enabled
Configuration File (php.ini) Path   C:\WINDOWS
Loaded Configuration File   C:\Parallels\Plesk\Additional\PleskPHP5\php.ini
PHP API 20041225
PHP Extension   20060613
Zend Extension  220060519
Debug Build no
Thread Safety   enabled
Zend Memory Manager enabled
IPv6 Support    enabled
Registered PHP Streams  php, file, data, http, ftp, compress.zlib, https, ftps
Registered Stream Socket Transports tcp, udp, ssl, sslv3, sslv2, tls
Registered Stream Filters   convert.iconv.*, string.rot13, string.toupper, string.tolower, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:34:12.247

`GeoIP.dat`不是 PHP 文件，因此您不能使用该`include`语句包含它。包括`geoip.inc`（无论在哪里），您的代码应该可以工作。

# javascript - JS 未按预期运行

> ID：15962508
> 
> 赞同：0
> 
> 时间：2013-04-12T03:24:28.920
> 
> 标签：javascript, jquery

我正在使用一个名为[Sticky Floating Box](http://dropthebit.com/74/sticky-floating-box/)的 jQuery 插件来创建一个浮动但包含在另一个 div 中的 div。它似乎可以工作，但它不会停留在包含的 div 中。我查看了脚本[演示页面](http://dropthebit.com/demos/stickyfloat/stickyfloat.html)，但无法弄清楚我做错了什么。

这是 JS 初始化代码：

```
$(function() {
   jQuery('.addthis').stickyfloat('update',{ duration:0});
}); 
```

这是一个显示问题的[jsFiddle](http://jsfiddle.net/Lynda333/CGMXG/1/)。

HTML和CSS如下：

```
<div class="header"> HEADER </div>
 <div class="container"> 
  <div class="addthis">
    <!-- AddThis Button BEGIN -->
      <div class="addthis_toolbox addthis_floating_style addthis_32x32_style">
            <a class="addthis_button_facebook"></a>
            <a class="addthis_button_twitter"></a>
            <a class="addthis_button_google_plusone_share"></a>
            <a class="addthis_button_pinterest_share"></a>
            <a class="addthis_button_compact"></a>
            <a class="addthis_button_email"></a>
      </div>
      <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=undefined"></script>
      <!-- AddThis Button END -->
  </div>
  <p>ICONS SHOULD STAY <BR> WITHIN THIS GRAY BOX<p>
</div>
<div class="footer"> SHOULD NOT GO BELOW THIS LINE</div> 

.header{
width:400px;
background: #F00;
height:100px;
margin:0 auto;
}
.container{
position:relative;
height:400px;
width:400px;
margin:0 auto;
background: #999;
}
.footer{
height:700px;
width:400px;
background: #F0F;
margin:0 auto;
}
.addthis{
position:absolute;
top:0;
left:-50px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:50:35.803

我必须做三件事才能让 jsFiddle 正常工作：

`stickyfloat`页面准备好后需要调用函数（并删除`'update'`部分）。

```
jQuery(document).ready(function() {
    jQuery('.addthis').stickyfloat({ duration:0});
}); 
```

添加以下CSS规则：

```
.addthis_floating_style
{
    position:inherit !important;
} 
```

给`.addthis`div 一个明确的高度和宽度：

```
.addthis
{
    position:absolute;
    top:0;
    left:-50px;
    width :36px;
    height:222px;
} 
```

# html - 当视频在 IE9 中工作时，它在其他任何地方都没有

> ID：15962509
> 
> 赞同：0
> 
> 时间：2013-04-12T03:24:30.140
> 
> 标签：html, internet-explorer, video

我似乎无法让我的视频在所有浏览器中播放。

下面的代码在任何地方都可以使用，但在 IE9 中，它会在视频所在的位置显示一个黑框，然后在其下方播放 IE 视频。

如果我将视频标签设置为除 IE 之外的所有标签，它在 Chrome 或 FF 中不起作用，但 IE 很好。

帮助？？

```
<video controls="controls" width="315" height="186" >
    <source src="/video/Ryan2.mp4" type="video/mp4" codecs="avc1.42E01E, mp4a.40.2"'/>
    <source src="/video/Ryan2.ogv" type="video/ogg" />
</video>

<!--[if lte IE 9]>
<object type="application/x-shockwave-flash" data="http://player.longtailvideo.com/player.swf" width="315" height="186">
    <param name="movie" value="http://player.longtailvideo.com/player.swf" />
    <param name="flashVars" value="controlbar=over&amp;file=/video/Ryan2.mp4" />
    <param name="wmode" value="transparent" />
</object>
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:26:00.573

长尾视频播放器正在 IE 9 中显示，因为您的条件注释声明“如果小于**或等于**IE 9”。您应该使用`[if lt IE 9]`IE 8 及以下版本。但话虽如此，更好的解决方案是将长尾播放器嵌入视频元素 itef 中。它将在不支持该`<video>`元素的旧版浏览器上自动显示。像这样：

```
<video controls="controls" width="315" height="186" >
  <source src="/video/Ryan2.mp4" type="video/mp4" codecs="avc1.42E01E, mp4a.40.2"'/>
  <source src="/video/Ryan2.ogv" type="video/ogg" />
  <object type="application/x-shockwave-flash" data="http://player.longtailvideo.com/player.swf" width="315" height="186">
    <param name="movie" value="http://player.longtailvideo.com/player.swf" />
    <param name="flashVars" value="controlbar=over&amp;file=/video/Ryan2.mp4" />
    <param name="wmode" value="transparent" />
  </object>
</video> 
```

我不知道为什么 mp4 不能在 IE 9 中播放。当您将视频文件直接拖放到 IE9 浏览器窗口中时会播放吗？您的服务器 MIME 类型设置是否正确？

# php - PHP在匿名函数中获取分配的变量名

> ID：15962512
> 
> 赞同：1
> 
> 时间：2013-04-12T03:24:35.580
> 
> 标签：php, function, variables, methods

我知道您可以在声明的方法中找到方法名称，例如：

```
function getFunction() {
    return __METHOD__;
}
echo getFunction(); // 'getFunction' 
```

但是如何找到匿名函数的变量名，例如下面的示例？

```
$anonymous = function() {
    return __VARIABLE__
}
echo $anonymous; // 'anonymous 
```

# c++ - 如何读取另一个进程内存中的每个字节？

> ID：15962514
> 
> 赞同：-1
> 
> 时间：2013-04-12T03:24:48.917
> 
> 标签：c++, windows, debugging, winapi, readprocessmemory

我们如何读取进程内存中的每个字节？读完之后，我们如何对进程进行“十六进制”转储？

例如：

进程A.exe：

```
00400000: 00 00
00400002: 74 05
... 
```

扫描：

```
00 74 05 ... 
```

将 A.exe 转储到 A.txt：

```
00 74 05 
```

我的编译器是visual c++ 2010，我打算编写一个win32应用程序，它将使用这个函数。我将使用的操作系统是 Window 8。但是，我的应用程序应该适用于 Windows 8 并且至少适用于 Window XP。

到目前为止，这就是我所拥有的......

```
#include <windows.h>

void ScanForBytes( const char* TargetName, DWORD dwFromAddress, DWORD dwToAddress ) {
    HANDLE hProc; // I guess we will be needing the handle to the process.
   //And this is where I stopped and asked for help...
}

int main() {
   ScanForBytes( "Chrome.exe", 0x00400000, 0x00400001 );
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:48:16.850

您正在寻找的功能是`ReadProcessMemory`. [您可以在 MSDN 上](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553.aspx)找到该功能的文档。

该函数将特定进程的指定地址范围内的数据复制到指定的缓冲区中。您需要确保您的应用程序以适当的权限运行以执行此操作。通常，这就是调试权限——只有调试器需要读取和/或修改其他进程的私有内存。*如果您在整个*指定的内存块上没有所需的权限，则该功能将失败。您可以[在 MSDN 上](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684880.aspx)找到有关访问权限的更多信息。如果您还不熟悉这里工作的安全模型，我建议您仔细阅读文档。

自然，您的进程还需要匹配您希望读取其内存的进程的位数。换句话说，如果您想从 Chrome 进程中读取内存，Chrome 被编译为 32 位应用程序，因此您的应用程序也需要是一个。如果要从另一个 64 位应用程序转储内存，则需要重新编译为 64 位应用程序。这让 MSDN 页面上的许多评论者感到困惑。

不用说，您需要检查所有返回值并适当地处理错误。这种事情在一般情况下应该会*失败*。

成功返回后，您指定的数组将`ReadProcessMemory`包含请求的数据。从那里开始，您可以随心所欲地使用它，例如将其写入文本文件。

# javascript - 在 require.js 中定义一个全新的模块时使用导出是否合适？

> ID：15962524
> 
> 赞同：0
> 
> 时间：2013-04-12T03:25:50.907
> 
> 标签：javascript, requirejs, amd

由于 require.js 是 AMD 模块加载器，同时定义一个新模块，如：

```
定义（[“jquery”]，函数（$）{
   var _private;
   变量 obj = {
       发布函数：...
   }
   返回对象；
});

```

或者

```
定义(["jquery","exports"],function($,exports){
 变量 pubFunc;
 出口.pubFunc = pubFunc;

});

```

Require.js 定义新模块是不是第二个不合适？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:34:37.407

**TL;DR：**首先是 RequireJS 的设计方式（使用那个）；第二个不是。

**更多信息：**

看起来您将 RequireJS 与 Node 的 require 混淆了。

在第二个中，您几乎通过向后导出（到应该是依赖项的内容）来反转依赖链的方向。

这实际上大部分时间都有效：

```
exports.pubFunc = pubFunc; 
```

在此范围内：

*   JavaScript 对象是通过引用传递的，所以属性会被添加到`exports`RequireJS 持有的 Object 中；和
*   RequireJS 将在需要时继续分发修改后的`exports`对象`exports`。

然而，这完全依赖于 RequireJS 的缓存。作为优化，RequireJS 存储模块的导出，而不是每次都加载文件；因此缓存版本`exports`被重新分发（与您添加的属性一起完成）。

因此，当缓存的对象没有被传递时，这会中断，例如在不同的 RequireJS[上下文中](http://requirejs.org/docs/api.html#config-context)。

您应该将导入视为不可变的，即使您可以修改它们。

# android - 注销后的 GCM 仍然收到通知

> ID：15962525
> 
> 赞同：3
> 
> 时间：2013-04-12T03:25:52.770
> 
> 标签：android, push-notification, google-cloud-messaging

用户单击按钮后，我想取消注册 GCM。我尝试了以下代码来取消注册，但即使在所有这些初始化之后，我仍然设法将通知推送到设备。如果我在这里遗漏任何东西，请告诉我。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) {
        case R.id.options_logout:
            ServerUtilities.unregister(getApplicationContext(), ServerUtilities.registrationID);
            unRegisterGCM();
            return true;
        case R.id.options_exit:
            finish();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}

@Override
protected void onDestroy() {
    Log.i(TAG,"onDestroy.........");
    helper.close();
    if (mRegisterTask != null) {
        mRegisterTask.cancel(true);
    }
    unregisterReceiver(mHandleMessageReceiver);
    super.onDestroy();
}

public void unRegisterGCM(){
    Intent unregIntent = new Intent("com.google.android.c2dm.intent.UNREGISTER");
    unregIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    startService(unregIntent);

    Intent intent = new Intent(MessageList.this, LoginScreen.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(intent);
    finish();
} 
```

**日志**

```
04-12 16:20:23.039: I/MessageList(1912): onDestroy.........
04-12 16:20:26.523: V/GCMBroadcastReceiver(1912): onReceive: com.google.android.c2dm.intent.REGISTRATION
04-12 16:20:26.523: V/GCMBroadcastReceiver(1912): GCM IntentService class: com.mon.GCMIntentService
04-12 16:20:26.523: V/GCMBaseIntentService(1912): Acquiring wakelock
04-12 16:20:26.531: V/GCMBaseIntentService(1912): Intent service name: GCMIntentService-0987654321-2
04-12 16:20:26.531: E/GCMRegistrar(1912): internal error: retry receiver class not set yet
04-12 16:20:26.531: V/GCMRegistrar(1912): Registering receiver
04-12 16:20:26.535: D/GCMBaseIntentService(1912): handleRegistration: registrationId = null, error = null, unregistered = com.mon
04-12 16:20:26.535: D/GCMRegistrar(1912): resetting backoff for com.fl.monitor
04-12 16:20:26.535: V/GCMRegistrar(1912): Saving regId on app version 1
04-12 16:20:26.621: I/GCMIntentService(1912): Device unregistered
04-12 16:20:26.621: V/GCMRegistrar(1912): Is registered on server: false
04-12 16:20:26.621: I/GCMIntentService(1912): Ignoring unregister callback
04-12 16:20:26.621: V/GCMBaseIntentService(1912): Releasing wakelock
04-12 16:20:58.156: V/GCMBroadcastReceiver(1912): onReceive: com.google.android.c2dm.intent.RECEIVE
04-12 16:20:58.156: V/GCMBroadcastReceiver(1912): GCM IntentService class: com.mon.GCMIntentService
04-12 16:20:58.156: V/GCMBaseIntentService(1912): Acquiring wakelock
04-12 16:20:58.160: V/GCMBaseIntentService(1912): Intent service name: GCMIntentService-1234567890-3
04-12 16:20:58.164: I/GCMIntentService(1912): Received message
04-12 16:20:58.167: I/GCMIntentService(1912): project:GHI 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:12:01.683

首先，要取消注册，您应该使用以下代码：

> 从 GCM 注销
> 
> 要从 GCM 注销，请执行以下操作：
> 
> ```
> Intent unregIntent = new Intent("com.google.android.c2dm.intent.UNREGISTER");
> unregIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
> startService(unregIntent); 
> ```

在您的代码中，您放置了 SENDER_ID 而不是“app”。

其次，我不确定是什么`GCMRegistrar.unregister(this)`（我不使用它），但我认为这是一个捷径，与上面的 3 行代码相同，所以调用两者没有意义。

第三，假设您使用的代码与我用于 IntentService 的代码相似（我有一个扩展 Google 的类`C2DMBaseReceiver`），`onUnregistered`应该在取消注册完成时调用。如果未调用，则您的设备仍处于注册状态。我建议您使用调试器运行应用程序并查看调用了哪些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T07:56:58.673

把下面的 2 行注销您的 GCM。

```
GCMRegistrar.unregister(NotificationsActivity.this);
GCMRegistrar.onDestroy(NotificationsActivity.this); 
```

# c++ - 如何在配置文件中隐藏数据库密码

> ID：15962527
> 
> 赞同：5
> 
> 时间：2013-04-12T03:26:45.837
> 
> 标签：c++, database, passwords, configuration-files

我正在开发一个需要访问数据库以读取其输入的 C++ 项目。

到目前为止，我们在基于 xml 的配置文件中使用了默认用户名（postgres）和存储的“固定明文”密码以及许多其他设置。

*现在我需要在提供配置文件时对用户隐藏密码。*

*仅供参考：开发区是linux，数据库是postgresql。我们想给用户配置文件以连接到数据库并在不知道密码的情况下使用它*

如果您建议快速简便的参考，我将不胜感激。（小型阅读材料也很棒）

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T03:38:54.053

如果您以任何形式向他发送包含该密码的程序，则您无法阻止恶意用户以某种方式获得此密码。

但有两种可能的解决方案：

1.  程序附带的用户和密码对数据库具有只读访问权限；

2.  该程序不直接连接到数据库。它将数据请求到服务器应用程序，该应用程序不仅可以从实际数据库中获取此数据而无需给用户任何密码，还可以进行适当的安全检查以确保该用户仅访问他打算访问的数据等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T03:36:45.643

您可以使用另一个“硬编码”密码，用于加密配置文件中的密码。因此，您将加密的数据库密码 (db_password) 写入配置文件，然后，当您需要访问数据库时，您使用硬编码的密码解密 db_password。当然，仍然可以使用反编译器来恢复您的密码，但这并不容易。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-04-12T03:28:14.267

我们使用 MD5 对配置文件中的密码进行加密。

# python - python try/except 与 urllib2 抛出奇怪的异常

> ID：15962530
> 
> 赞同：0
> 
> 时间：2013-04-12T03:27:06.090
> 
> 标签：python, urllib2

函数看起来像：

```
def fetchurl(url):
    timeout = 10

    try:
        res = urllib2.urlopen(url, timeout=timeout)
        reader = csv.reader(res)
        reader.next() # Trim the CSV header
        return reader
    except urllib2.URLError, e:
        print 'bailing on %s (timeout of %s exceeded)' % (url, timeout)
        return None 
```

异常看起来像：

```
 File "scrape.py", line 35, in fetchurl
    reader.next() # Trim the CSV header
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 530, in next
    line = self.readline()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 447, in readline
    data = self._sock.recv(self._rbufsize)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 541, in read
    return self._read_chunked(amt)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 601, in _read_chunked
    value.append(self._safe_read(chunk_left))
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 647, in _safe_read
    chunk = self.fp.read(min(amt, MAXAMOUNT))
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 380, in read
    data = self._sock.recv(left)
socket.timeout: timed out 
```

为什么 try/except 块没有捕获`socket.timeout`异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:31:45.220

因为它与 urllib2.URLError 无关，与文件“scrape.py”中的异常有关。

您用于 csv.reader 的文件“scrape.py”中的错误情况没有得到很好的处理。

[您按照此处](http://heyman.info/2010/apr/22/python-urllib2-timeout-issue/)的规定使用以下内容：

```
import socket

try:
    resp = urllib2.urlopen(req, timeout=5)
except urllib2.URLError:
    print "Bad URL or timeout"
except socket.timeout:
    print "socket timeout" 
```

# php - PHP 会话 ID 相同，但会话变量消失了

> ID：15962531
> 
> 赞同：0
> 
> 时间：2013-04-12T03:27:09.717
> 
> 标签：php, session, session-variables

我遇到了会话变量消失的最奇怪的问题。

首先，`Firefox`是我看到问题的唯一浏览器。`IE9`并且`Chrome`工作得很好。

现在上下文：加载后，我的页面每分钟开始`Javascript XHR`在我的服务器上执行以刷新状态。现在，经过一段时间（我已经看到`10`了`30`几分钟之间的任何时间），请求进入我的`php`文件，会话开始（与前一个请求具有相同的会话 ID（当然是相同的客户端）），但是会话变量都未设置！

会话超时是默认`24`分钟，但每个请求都会更新一个`$_SESSION['time']`变量以保持会话处于活动状态。

所以简而言之，会话不应该过期并且正确的会话ID正在穿越，但是在（相当随机的）时间段之后，会话变量消失了。

关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:07:48.370

好的。所以我终于喜欢上了那个神秘问题的原因。现在一切都清楚了。

我的网络托管服务让我在我的域上安装一个错误库，我这样做了。

bugbase 安装在其自己的目录中，可在[http://mydomain.com/bugbase上访问](http://mydomain.com/bugbase)

问题是 bugbase 是基于 PHP 的，我的实际站点也是如此。

所以因为它们都在同一个域（mydomain.com）上，如果我从同一个浏览器访问它们，它们将共享同一个 PHP 会话。所以从一个注销，也会杀死另一个的会话。

瞧！

一旦我发现这个问题，我可以确认在我打开我的网站和错误库的任何浏览器中都可以看到问题。

我还没有尝试过，但问题的解决方案可能是在子域上安装 bugbase。

# java - 主要方法是如何工作的？

> ID：15962535
> 
> 赞同：4
> 
> 时间：2013-04-12T03:27:34.163
> 
> 标签：java, methods, main

我是一些教学失败的产物，我需要一些帮助。我知道在 Java 中有一种叫做“主要方法”的东西，我相信其他编程语言。我知道你需要一个来让你的代码运行，但是你如何使用它来运行你的代码呢？它有什么作用，您需要将它放入其中以使您的代码运行？

我知道它应该看起来像这样。但几乎仅此而已。

```
static void main(String[] args){

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T03:45:30.153

对于一般情况，逐点分解：

1.  所有 Java 应用程序都从一个方法开始处理`main()`；
2.  中的每条语句都`main`按顺序执行，直到到达结尾`main`——这是你的程序终止的时候；
3.  是什么`static`意思？`static`意味着您不必实例化一个类来调用该方法；
4.  `String[]`args 是一个`String`对象数组。如果要在命令行上运行程序，则可以将参数作为参数传递。然后可以像访问数组中的元素一样访问这些参数`args[0]...args[n]`：
5.  `public`表示该方法可以被任何对象调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T03:29:46.507

它是任何 java 程序的入口点，它会做任何你告诉它做的事情。您需要做的就是在您的源 java 文件之一中声明它，编译器会找到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T03:39:07.497

首先应该是`public static void main(String[] args){...}`。

肯定是`public`

看看[主要方法](http://docs.oracle.com/javase/tutorial/getStarted/application/#MAIN)

JVM 在运行你的类时会寻找这个方法签名......

```
java helloWorld.HelloWorld 
```

它代表您的应用程序的入口点。您应该将所有必需的初始化代码放在这里，以使您的应用程序运行。

以下是一个简单的示例（可以使用上面的命令执行）

```
package helloWorld;

public class HelloWorldApp {
    public static void main(String[] args) {
        System.out.println("Hello World!"); // Display the string.
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T03:30:59.303

## 概括

`void`表示该方法不返回任何值。`String[] args`表示传递给程序的 Array 类型的参数字符串。`main`是大多数 Java 程序的单一入口点。

## 扩展

Java 中的方法（等效于其他语言中的函数（或子函数））为什么应该是这样`public static void...`的（如果没有门把手，你就不会建造一扇门），它有一个返回类型。碰巧`main`Java中的方法必须返回void。在 C 或 C++ 中，main 方法可以`return`并且`int`通常这表示已完成程序的代码状态。的`int`值`0`是成功完成的标准。

为了在 Java 中获得相同的效果，我们使用`System.exit(intValue)`

`String[] args`是一个参数的字符串数组，传递给主函数，通常用于特定的应用程序使用。通常这些用于修改默认行为或用于短命令行可执行应用程序中的标志。

`main`只是对JVM来说，从这里开始！C 和 C++ 中的同名（可能更多）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T03:36:11.687

当你执行你的类时，主方法中的任何东西都会运行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-12T03:57:51.823

你应该有一个**主类**和一个**主方法**。如果你想在控制台中找到一些东西，你至少需要在方法中有一个输出命令，比如：

*System.out.println("Hello World!");*

这使得代码运行**起来很生动**。

# java - SQL 数据库连接未与 DMZ 中的 java Web 应用程序服务器建立

> ID：15962539
> 
> 赞同：2
> 
> 时间：2013-04-12T03:27:52.383
> 
> 标签：java, sql-server-2000

我有一个部署在 DMZ 服务器上的 Java Web 应用程序。我已经为 Web 应用程序中的本地计算机数据库连接建立编写了以下代码

```
url= jdbc:microsoft:sqlserver://" + ipAddress + ":1433;databaseName=" + loginForm.getDbName();
conn = DriverManager.getConnection(url, loginForm.getDbUserName(), loginForm.getDbPWD()); 
```

现在我通过互联网访问应用程序并传递本地机器的 ipAddress、本地机器 dB、用户名、密码。

但收到以下错误：

```
java.sql.SQLException: [Microsoft][SQLServer 2000 Driver for JDBC]Error establishing socket. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:36:10.753

你可以尝试一些事情：

1.  检查您的服务器是否正在侦听该端口
2.  检查您的服务器是否允许该端口上的流量
3.  检查任何其他中间防火墙是否允许该端口上的流量
4.  ping 服务器
5.  看看你是否可以telnet到服务器/端口
6.  查看您是否可以访问服务器上的任何其他服务（网络、电子邮件等）

该错误似乎表明服务器是可联系的，但它要么没有在端口上监听，要么拒绝与你交谈——你检查了服务器日志吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T03:36:57.243

**Web 应用程序根本无法与指定的数据库建立 TCP/IP 连接。**

IP 地址在`ipAddress`变量中的机器应该可以从 Web 应用程序服务器访问（通过网络）。

`ipAddress`您可以从**Web 应用程序机器**上 telnet 的 1433 端口吗？

检查是否：

*   数据库在（默认）1433 端口在线；
*   数据库正在接受传入的 TCP/IP 连接（[查看此链接以了解如何启用它](http://support.microsoft.com/kb/841252/en-us)）；
*   Web 应用程序服务器和数据库服务器之间没有防火墙。

此外，当您似乎是`ipAddress`从表单输入时，请检查最终的拼写错误和`String`转换。

# iphone - AvPlayer 广播电台后台应用

> ID：15962542
> 
> 赞同：-3
> 
> 时间：2013-04-12T03:28:31.470
> 
> 标签：iphone, objective-c

我正在创建一个在线广播电台，当我关闭应用程序时它停止工作。我一直在寻找有关在后台运行的信息，但没有找到太多。

```
 - (IBAction)Play:(id)sender {
    if (Clicked == 0) {
        Clicked = 1;
        NSString *url = @"http://xxxxxxxxxxxxxx";
        NSURL *urlStream = [NSURL URLWithString:url];
        AudioPlay = [[AVPlayer alloc] initWithURL:urlStream];
        [AudioPlay play];
        [start setTitle:@"Stop" forState:UIControlStateNormal];
    } else {
        [AudioPlay pause];
        [start setTitle:@"Start" forState:UIControlStateNormal];
        Clicked = 0;
    }
} 
```

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:55:33.767

看看iOS[`UIBackgroundModes`](http://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW22)

有一个后台模式`audio`，您只需在您的`Info.plist`:

> 音频：应用在后台播放有声内容。

这就是你的 .plist 中的样子：

```
<key>UIBackgroundModes</key>
<array>
        <string>audio</string>
</array> 
```

# javascript - Jquery 自动完成的正确监听器

> ID：15962544
> 
> 赞同：3
> 
> 时间：2013-04-12T03:28:39.437
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jquery 自动完成 API，我试图在选择后从文本框中获取值。我应该使用哪个侦听器从 textbox 获取值。我尝试了 .focus 但它仅在再次单击文本框后才有效。我需要在选择下拉列表中的值时触发此事件（与在文本框中键入的搜索词相反）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:03:00.913

如果我正确理解了您的问题，也许您需要绑定到自动完成小部件的关闭事件。

```
$("#autocomplete").autocomplete({
    source: ["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby"],
    close: function (event, ui) {
        alert($(this).val());
    }
}); 
```

**[演示](http://jsfiddle.net/maheshsapkal/6mLJs/)**

# javascript - 溢出-x：隐藏；溢出-y：继承

> ID：15962547
> 
> 赞同：0
> 
> 时间：2013-04-12T03:28:41.253
> 
> 标签：javascript, jquery, css

我有一个`div (id="c_content)`我想根据内容的长度垂直扩展而不显示水平溢出的内容。
我目前正在使用以下代码，但它似乎不起作用：-

```
#c_content {
        min-height: 645px;
        max-height: 2000px;
    overflow-y: inherit; overflow-x: hidden;
} 
```

当我使用上面的代码时，垂直溢出的内容被隐藏了。应该发生的是，div 应该垂直扩展以显示内容。但这似乎并没有发生。

编辑：当我设置`overflow-y: visible;`而不是`overflow-y: inherit;`，我得到一个 y 轴滚动条（[http://prntscr.com/108wsm](http://prntscr.com/108wsm)） - 仍然不是我想要的。

我想知道是否有任何方法可以解决此问题，即使我必须使用其他代码，例如`Java`或`Jquery`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:17:30.970

使用跨浏览器最小高度技巧..它会在必要时扩展 div。

```
#c_content { 
   min-height: 645px; 
   height:auto !important; 
   height: 645px;
   max-height:2000px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:45:26.697

`inherit``overflow-y`不是该属性的有效值。尝试将其设置为`overflow-y:visible;`

# wpf - UI/Tree 节点不会在 RadTreeListView 上更新

> ID：15962548
> 
> 赞同：1
> 
> 时间：2013-04-12T03:28:50.893
> 
> 标签：wpf, telerik, treelistview

我有一个使用 RadTreeListView 绑定并显示为树的应用程序。ItemSource 与 ViewModel 绑定，类型为 RadObservableCollection 并声明：

```
ItemsSource="{Binding HistoryList, Mode=TwoWay,
UpdateSourceTrigger=PropertyChanged,
NotifyOnSourceUpdated=True,
NotifyOnTargetUpdated=True}" 
```

问题是当我向 HistoryList 添加一个新节点然后调用 HistoryList 的 RaisePropertyChange 时，即使添加了数据，RadTreeListView 的 UI 也不会更新。

```
this.HistoryList.Add(treeViewItem);
this.RaisePropertyChanged(x => x.HistoryList); 
```

然后，如果我使用 RadObservableCollection 的 reset() 方法，UI 会更新，但会浮在视图顶部。所以问题是我该如何处理它？我的意思是我要保持我选择的节点的状态/位置..不跳转或浮动。

该视频让您更好地理解：[http ://screencast.com/t/iLa3XWsa](http://screencast.com/t/iLa3XWsa)

谢谢

# javascript - “将 foo 转换为 bar”的函数名称约定

> ID：15962550
> 
> 赞同：10
> 
> 时间：2013-04-12T03:29:13.437
> 
> 标签：javascript, python, ruby, clojure, lisp

我有一个非常常见的“给定 a `Foo`，返回 a `Bar`”的模式，例如，给定 a `user_id`，返回 a `User`。

这类函数是否有传统的命名模式？在[Joel on Software](http://www.joelonsoftware.com/articles/Wrong.html)之后，我个人使用了很多`bar_from_foo()`，但我很少看到其他人这样做，它很快就变得冗长，例如

```
widgets = user_widgets_from_user(user_from_param_map(params)) 
```

有没有一种传统的方式来命名，或者`User.from_map()`以任何流行的语言命名或命名空间（例如）？我对 Python 特别感兴趣，但你能想到的任何语言都会很有用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T03:45:16.923

我会利用 Clojure 的命名灵活性并将其称为：

```
(defn foo->bar [] ...) 
```

对我来说，这使意图很清楚，而且很短。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-12T03:49:15.583

在 Python 和其他各种 OO 语言中，这应该是 Bar 上的构造函数，它以单个 Foo 作为其唯一参数。由于 Python 不进行方法重载（并且尝试模拟它通常很脆弱），如果`Bar.__init__`已经采用不同的签名，那么约定正是您的最后一个。重要的是，这通常被定义为*类*方法而不是静态方法（为了子类的利益）：

```
 class Bar:
      @classmethod
      def from_foo(cls, f):
          '''Create a new Bar from the given Foo'''
          ret = cls()
          # ... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-12T03:43:39.957

如果你想把一个东西转换成另一个东西，例如一个字符串到一个整数，方法是在接收器上定义的，因此它的类是明确的，所以你不应该把接收器类作为方法名称的一部分：`String#to_i`，不是`String#string_to_i`。这是面向对象编程的核心思想之一（多态性）。

如果接收者过于笼统而无法分配这样的方法，例如 if`user_id`只是一个字符串，并且定义一个`String`将其转换为 a的方法`User`看起来不正确，那么您应该在您期望返回的类上定义一个构造函数方法值为：`User.new`或`User.from_id`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-12T08:04:15.233

我认为这在很大程度上取决于上下文和选择一个有意义的隐喻。例如 ActiveRecord 使用类方法“find”来查找数据库中的记录，这是一个比“输入 user_id，输出用户”更有意义的想法。例如：

```
User.find(user_id)
User.find_by_email(user_email) 
```

对于转换，我通常喜欢编写转换方法以使其易于在高阶函数中使用。例如在 ruby​​ 中，转换通常使用`to_*`实例方法完成，例如将 a 转换`Foo`为 a对所有 foo`Bar`都有一个`to_bar`方法是有意义的，因此您可以编写：

```
foo = Foo.new(...)   # make a new Foo
bar = foo.to_bar     # convert it to a Bar 
```

然后要转换一堆 foo，您可以简单地：

```
bars = foos.map(&:to_bar) 
```

Ruby 也倾向于`Foo.parse(str)`将字符串转换为对象。

* * *

对于 javascript，我喜欢使用类方法（我从标准 ml 中获得），例如：

```
Foo.toBar = function(foo) {
   return new Bar(...);
}; 
```

然后你也可以映射它（在这个例子中使用下划线）：

```
var bars = _.map(foos, Foo.toBar); 
```

* * *

标准 ML 约定是结构（类）方法。示例 fn 类型：

```
Foo.toBar : foo -> bar
Foo.fromBar : bar -> foo 
```

你会像这样使用它：

```
val bar = Foo.toBar foo;
val bars = map Foo.toBar foos; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T20:24:03.773

为什么将参数的类型放在函数的名称中？我认为这会更清楚一些

```
a_bar = bar_from(a_foo) 
```

那么您可以在许多语言中依赖动态调度或重载......例如，在 Python 中，实现可以尝试调用（`x.toBar()`如果存在），或者它可以检查全局注册表，如`Bar_builders[type(x)](x)`; 在 Lisp 中，你可以依赖方法；在 C++ 中关于重载...

# html - 当我向键盘发送垃圾邮件时，文本隐藏

> ID：15962552
> 
> 赞同：1
> 
> 时间：2013-04-12T03:29:22.253
> 
> 标签：html, css

我在 div 内执行此操作，但是当我向键盘发送垃圾邮件时，文本突然隐藏在第二行，我知道这`overflow:hidden`不是导致它的原因。

为什么它会导致隐藏是否有任何替代解决方案？

顺便说一句，文字是`contenteditable`

![在此处输入图像描述](https://i.stack.imgur.com/crmlS.png)

这里是小提琴：http: [//jsfiddle.net/xR9Xx/](http://jsfiddle.net/xR9Xx/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:33:57.317

# 选项1

将`overflow`from设置`hidden`为`auto`, 以获得以下样式。如果您正在寻找滚动条出现。

```
.profilestatus .statusTextBox {
    height: 100px;
    left: 60px;
    outline: medium none;
    overflow: auto;
    position: absolute;
    text-align: center;
    width: 400px;
} 
```

# 选项：#2

将`word-wrap`和`width`属性添加到以下样式。

```
.profilestatus .statusTextBox .statusText {
    position:relative;
    font-family:Calibri, Arial;
    font-size:95%;
    top:20px;
    font-weight:400;
    word-wrap: break-word;
    width:400px;
} 
```

**[演示](http://jsfiddle.net/maheshsapkal/xR9Xx/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:40:57.577

如果可以，而不是`position:relative;`成功`float:left;`

```
 .profilestatus .statusTextBox .statusText {
          float:left;
          text-align:center;
            font-family:Calibri,Arial;
            font-size:95%;
            font-weight:400;
        } 
```

工作[**演示**](http://jsfiddle.net/jhunlio/xR9Xx/8/)

# c++ - 2-3-4 泄漏的析构函数

> ID：15962556
> 
> 赞同：1
> 
> 时间：2013-04-12T03:29:54.853
> 
> 标签：c++, destructor, 2-3-4-tree

如果我没记错的话，在销毁 a 时，`2-3-4 tree`它应该类似于二叉树，只有 4 个孩子（递归）。下面我有我的析构函数特定代码，带有一个简单的递归删除。

问题是我仍然有泄漏。该文件仅包含我的 2-3-4 树。

我相信这是为`2-3-4 tree`s 实现析构函数的正确方法，但我的实现似乎不正确。谁能指出我的逻辑错误？我做过图表，看起来很合理。

```
//Destructor    
template < typename KEY , typename T >
Map< KEY , T >::~Map(){

    destructCode();
}

//Common code for deallocation
template < typename KEY , typename T >
void Map< KEY , T >::destructCode(){
    destruct( _root );
}

//Recursive delete helper
template < typename KEY , typename T >
void Map< KEY , T >::destruct( Elem* node ){
    if( node -> cOne )
        destruct( node -> cOne );

    if( node -> cTwo )
        destruct( node -> cTwo );

    if( node -> cThree )
        destruct( node -> cThree );

    if( node -> cFour )
        destruct( node -> cFour );

    delete node;
} 
```

我的节点设计：

```
Elem {
    KEY k1, k2, k3;
    T t1, t2, t3;

    //Children
    Elem *cOne, *cTwo, *cThree, *cFour;

    Elem *parent;

    //numChildren = #node type
    //Contains numChildren - 1 data items
    int _numChildren;
}; 
```

我的插入代码。我目前还没有实现删除功能。

```
//Sorts the keys of the node to include the new keyvalue pairing
template < typename KEY , typename T >
void Map< KEY , T >::keyAdding( KEY k , T t , Elem * node , Elem * smaller , Elem * bigger ){

    if( node -> _numChildren == 4 )//3 keys already
        cout << "Problem; adding a key to a 4-node" << endl;

    else if( node -> _numChildren == 3 ){//2 keys

        if( k < node -> k1 ){//Smallest of the three

            node -> k3 = node -> k2;
            node -> t3 = node -> t2;
            node -> k2 = node -> k1;
            node -> t2 = node -> t1;
            node -> k1 = k;
            node -> t1 = t;

            node -> cFour = node -> cThree;
            node -> cThree = node -> cTwo;
            node -> cTwo = bigger;
            node -> cOne = smaller;         
        }

        else if( k < node -> k2 ){//Mid

            node -> k3 = node -> k2;
            node -> t3 = node -> t2;
            node -> k2 = k;
            node -> t2 = t;

            node -> cFour = node -> cThree;
            node -> cThree = bigger;
            node -> cTwo = smaller;
        }

        else{//Largest

            node -> k3 = k;
            node -> t3 = t;

            node -> cFour = bigger;
            node -> cThree = smaller;
        }
        node -> _numChildren++;
    }

    else{//1 key

        if( k < node -> k1 ){

            node -> k2 = node -> k1;
            node -> t2 = node -> t1;
            node -> k1 = k;
            node -> t1 = t;

            node -> cThree = node -> cTwo;
            node -> cTwo = bigger;
            node -> cOne = smaller;
        }

        else{

            node -> k2 = k;
            node -> t2 = t;

            node -> cThree = bigger;
            node -> cTwo = smaller;
        }
        node -> _numChildren++;
    }   
}

//Sorts the keys of the node to include the new keyvalue pairing
template < typename KEY , typename T >
void Map< KEY , T >::keyAdding( KEY k , T t , Elem * node ){

    if( node -> _numChildren == 4 )//3 keys already
        cout << "Problem; adding a key to a 4-node" << endl;

    else if( node -> _numChildren == 3 ){//2 keys

        if( k < node -> k1 ){//Smallest of the three

            node -> k3 = node -> k2;
            node -> t3 = node -> t2;
            node -> k2 = node -> k1;
            node -> t2 = node -> t1;
            node -> k1 = k;
            node -> t1 = t; 
        }

        else if( k < node -> k2 ){//Mid

            node -> k3 = node -> k2;
            node -> t3 = node -> t2;
            node -> k2 = k;
            node -> t2 = t;
        }

        else{//Largest

            node -> k3 = k;
            node -> t3 = t;
        }
        node -> _numChildren++;
    }

    else{//1 key

        if( k < node -> k1 ){

            node -> k2 = node -> k1;
            node -> t2 = node -> t1;
            node -> k1 = k;
            node -> t1 = t;
        }

        else{

            node -> k2 = k;
            node -> t2 = t;
        }
        node -> _numChildren++;
    }   
}

//Insert, return true if successful.
template < typename KEY , typename T >
bool Map< KEY , T >::insert(KEY k , T t ){

    if( _root == 0 ){//Empty

        _root = new Elem;

        _root -> _numChildren = 2;
        _root -> cOne = NULL;
        _root -> cTwo = NULL;
        _root -> cThree = NULL;
        _root -> cFour = NULL;
        _root -> k1 = k;
        _root -> t1 = t;
        _size++;

        return true;
    }

    else
        return insert( k , t , _root );
}

//Recursive insert helper
template < typename KEY , typename T >
bool Map< KEY , T >::insert(KEY k , T t , Elem * rRoot ){

    Elem * temp = rRoot;

    if( temp -> _numChildren == 4 ){//4-node

        //Save middle value.
        KEY kTemp = temp -> k2;
        T tTemp = temp -> t2;

        //Remove middle value, making a 3-node.
        temp -> k2 = temp -> k3;
        temp -> t2 = temp -> t3;
        //temp -> k3 = NULL;
        //temp -> t3 = NULL;
        temp -> _numChildren--;

        //Split the (now) 3-node into a pair of 2-nodes
        Elem * twoNode1 = new Elem;
        twoNode1 -> _numChildren = 2;
        twoNode1 -> parent = temp -> parent;
        twoNode1 -> cOne = temp -> cOne;
        twoNode1 -> cTwo = temp -> cTwo;
        twoNode1 -> k1 = temp -> k1;
        twoNode1 -> t1 = temp -> t1;

        if( twoNode1 -> cOne )
            twoNode1 -> cOne -> parent = twoNode1;

        if( twoNode1 -> cTwo )
            twoNode1 -> cTwo -> parent = twoNode1;

        //2-nodes do not have values for these.
        twoNode1 -> cThree = NULL;
        twoNode1 -> cFour = NULL;
        //twoNode1 -> k2 = NULL;
        //twoNode1 -> t2 = NULL;
        //twoNode1 -> k3 = NULL;
        //twoNode1 -> t3 = NULL;

        //Second 2-node...
        Elem * twoNode2 = new Elem;
        twoNode2 -> _numChildren = 2;
        twoNode2 -> parent = temp -> parent;
        twoNode2 -> cOne = temp -> cThree;
        twoNode2 -> cTwo = temp -> cFour;
        twoNode2 -> k1 = temp -> k3;
        twoNode2 -> t1 = temp -> t3;

        if( twoNode2 -> cOne )
            twoNode2 -> cOne -> parent = twoNode1;

        if( twoNode2 -> cTwo )
            twoNode2 -> cTwo -> parent = twoNode1;

        //2-Nodes do not have values for these.
        twoNode2 -> cThree = NULL;
        twoNode2 -> cFour = NULL;
        //twoNode2 -> k2 = NULL;
        //twoNode2 -> t2 = NULL;
        //twoNode2 -> k3 = NULL;
        //twoNode2 -> t3 = NULL;

        //We're at the root node.
        if( temp == _root ){

            _root -> _numChildren = 2;
            _root -> parent = NULL; //Root has no parent, silly.
            _root -> cOne = twoNode1;
            _root -> cTwo = twoNode2;
            _root -> k1 = kTemp;
            _root -> t1 = tTemp;

            //2-Nodes do not have values for these.
            _root -> cThree = NULL;
            _root -> cFour = NULL;
            //_root -> k2 = NULL;
            //_root -> t2 = NULL;
            //_root -> k3 = NULL;
            //_root -> t3 = NULL;

            //Update split node's parent
            twoNode1 -> parent = _root;
            twoNode2 -> parent = _root;

            //Height has increased.
            _height++;

            //Ascend to root.
            temp = _root;
        }

        //A generic 4-node somewhere in the tree.
        else{

            Elem * ntemp = temp;
            temp = temp -> parent;

            //Update split node's parent
            twoNode1 -> parent = temp;
            twoNode2 -> parent = temp;

            keyAdding( kTemp , tTemp , temp , twoNode1 , twoNode2 );
        }
    }//4-node end

    //Check if leaf
    if( temp -> cOne == 0 && temp -> cTwo == 0 && temp -> cThree == 0 && temp -> cFour == 0 ){

        keyAdding( k , t , temp );
        _size++;
        return true;
    }

    else{

        if( temp -> _numChildren == 4 ){

            cout << "Should not have a 4-node in leaf-checking.\n";
            return -5;
        }

        else if( temp -> _numChildren == 3 ){

            if( k < temp -> k1 )
                insert( k , t , temp -> cOne );

            else if( k < temp -> k2 )
                insert( k , t , temp -> cTwo );

            else
                insert( k , t , temp -> cThree);
        }

        else{

            if( k < temp -> k1 )
                insert( k , t , temp -> cOne );

            else
                insert( k , t , temp -> cTwo );
        }   
    }
} 
```

* * *

瓦尔格林：

```
-bash-4.2$ valgrind -v ./a.out
==18357== Memcheck, a memory error detector
==18357== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==18357== Using Valgrind-3.6.1 and LibVEX; rerun with -h for copyright info
==18357== Command: ./a.out
==18357== 
--18357-- Valgrind options:
--18357--    -v
--18357-- Contents of /proc/version:
--18357--   Linux version 3.6.11-1.fc16.i686.PAE (mockbuild@bkernel02) (gcc version 4.6.3 20120306 (Red Hat 4.6.3-2) (GCC) ) #1 SMP Mon Dec 17 21:31:29 UTC 2012
--18357-- Arch and hwcaps: X86, x86-sse1-sse2
--18357-- Page sizes: currently 4096, max supported 4096
--18357-- Valgrind library directory: /usr/lib/valgrind
--18357-- Reading syms from /home/csu/jan99/Documents/CS515/A8/a.out (0x8048000)
--18357-- Reading syms from /usr/lib/valgrind/memcheck-x86-linux (0x38000000)
--18357--    object doesn't have a dynamic symbol table
--18357-- Reading syms from /lib/ld-2.14.90.so (0x463f2000)
--18357--   Considering /usr/lib/debug/.build-id/6f/895b79f95b39ef92d24ff50a16ff774b34b527.debug ..
--18357--   .. build-id is valid
--18357-- Reading suppressions file: /usr/lib/valgrind/default.supp
--18357-- REDIR: 0x4640b610 (strlen) redirected to 0x38052c08 (vgPlain_x86_linux_REDIR_FOR_strlen)
--18357-- REDIR: 0x4640b390 (index) redirected to 0x38052be3 (vgPlain_x86_linux_REDIR_FOR_index)
--18357-- Reading syms from /usr/lib/valgrind/vgpreload_core-x86-linux.so (0x4001000)
--18357-- Reading syms from /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so (0x4004000)
==18357== WARNING: new redirection conflicts with existing -- ignoring it
--18357--     new: 0x4640b390 (index               ) R-> 0x04008270 index
==18357== WARNING: new redirection conflicts with existing -- ignoring it
--18357--     new: 0x4640b610 (strlen              ) R-> 0x040086d0 strlen
--18357-- Reading syms from /usr/lib/libstdc++.so.6.0.16 (0x46971000)
--18357--   Considering /usr/lib/debug/.build-id/19/bce624dda8659f770012166d85bc075fb23f1a.debug ..
--18357--   .. build-id is valid
--18357-- Reading syms from /lib/libm-2.14.90.so (0x465e7000)
--18357--   Considering /usr/lib/debug/.build-id/b8/362b3b5d82f212d77d69fff8e503ae6fdcfe9b.debug ..
--18357--   .. build-id is valid
--18357-- Reading syms from /lib/libgcc_s-4.6.3-20120306.so.1 (0x4663f000)
--18357--   Considering /usr/lib/debug/.build-id/4b/65b2ab36082e9552ad2014fac436421c4f65ad.debug ..
--18357--   .. build-id is valid
--18357-- Reading syms from /lib/libc-2.14.90.so (0x46417000)
--18357--   Considering /usr/lib/debug/.build-id/ea/4850e94d2deab52b8469f1e68a98f4d6229e48.debug ..
--18357--   .. build-id is valid
--18357-- REDIR: 0x46498a40 (__GI_strrchr) redirected to 0x40080d0 (__GI_strrchr)
--18357-- REDIR: 0x46498780 (__GI_strlen) redirected to 0x40086b0 (__GI_strlen)
--18357-- REDIR: 0x46497fb0 (strcmp) redirected to 0x40014c0 (_vgnU_ifunc_wrapper)
--18357-- REDIR: 0x46562db0 (__strcmp_ssse3) redirected to 0x4009250 (strcmp)
--18357-- REDIR: 0x46498730 (strlen) redirected to 0x40014c0 (_vgnU_ifunc_wrapper)
--18357-- REDIR: 0x4649f3e0 (__strlen_sse2_bsf) redirected to 0x4008690 (strlen)
--18357-- REDIR: 0x46a24350 (operator new(unsigned int)) redirected to 0x4007820 (operator new(unsigned int))
--18357-- REDIR: 0x46499fa0 (memcpy) redirected to 0x40014c0 (_vgnU_ifunc_wrapper)
--18357-- REDIR: 0x4655ab70 (__memcpy_ssse3) redirected to 0x4009420 (memcpy)
--18357-- REDIR: 0x464994c0 (bcmp) redirected to 0x40014c0 (_vgnU_ifunc_wrapper)
--18357-- REDIR: 0x46565c10 (__memcmp_ssse3) redirected to 0x4009fd0 (bcmp)
1
1
1
1
1
1
1
one
five
ten
twenty
twenty-five
thirty
One-hundred
Delete
--18357-- REDIR: 0x46a221d0 (operator delete(void*)) redirected to 0x4006b10 (operator delete(void*))
Delete
Delete
Delete
--18357-- REDIR: 0x464943e0 (free) redirected to 0x4006e80 (free)
==18357== 
==18357== HEAP SUMMARY:
==18357==     in use at exit: 86 bytes in 3 blocks
==18357==   total heap usage: 12 allocs, 9 frees, 375 bytes allocated
==18357== 
==18357== Searching for pointers to 3 not-freed blocks
==18357== Checked 97,132 bytes
==18357== 
==18357== LEAK SUMMARY:
==18357==    definitely lost: 48 bytes in 1 blocks
==18357==    indirectly lost: 38 bytes in 2 blocks
==18357==      possibly lost: 0 bytes in 0 blocks
==18357==    still reachable: 0 bytes in 0 blocks
==18357==         suppressed: 0 bytes in 0 blocks
==18357== Rerun with --leak-check=full to see details of leaked memory
==18357== 
==18357== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
==18357== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
-bash-4.2$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:35:36.927

您最好的选择是将原始指针替换为`std::unique_ptr< Elem >`. 这样你就根本不需要析构函数。注意这`Elem::parent`可能是一个非拥有的指针，所以不应该被替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:53:55.710

正如 Synxis 所提到的，对于您的代码泄漏，valgrind 在这里是一件很棒的事情。你提到它没有用，但那是因为你没有阅读它的输出，它建议添加**--leak-check=full**选项。

完整的`valgrind --leak-check-full`输出（对我来说）包括这个，

```
==4327== HEAP SUMMARY:
==4327==     in use at exit: 376 bytes in 8 blocks
==4327==   total heap usage: 42 allocs, 34 frees, 2,036 bytes allocated
==4327== 
==4327== Searching for pointers to 8 not-freed blocks
==4327== Checked 186,824 bytes
==4327== 
==4327== 156 (96 direct, 60 indirect) bytes in 1 blocks are definitely lost in loss record 7 of 8
==4327==    at 0x4C2AF8E: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==4327==    by 0x401FB2: Map<std::string, std::string>::insert(std::string, std::string, Map<std::string, std::string>::Elem*) (code.cpp:272)
==4327==    by 0x401B79: Map<std::string, std::string>::insert(std::string, std::string) (code.cpp:249)
==4327==    by 0x401177: main (code.cpp:411)
==4327== 
==4327== 220 (96 direct, 124 indirect) bytes in 1 blocks are definitely lost in loss record 8 of 8
==4327==    at 0x4C2AF8E: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==4327==    by 0x4020C4: Map<std::string, std::string>::insert(std::string, std::string, Map<std::string, std::string>::Elem*) (code.cpp:296)
==4327==    by 0x401B79: Map<std::string, std::string>::insert(std::string, std::string) (code.cpp:249)
==4327==    by 0x401177: main (code.cpp:411)
==4327== 
==4327== LEAK SUMMARY:
==4327==    definitely lost: 192 bytes in 2 blocks
==4327==    indirectly lost: 184 bytes in 6 blocks
==4327==      possibly lost: 0 bytes in 0 blocks
==4327==    still reachable: 0 bytes in 0 blocks
==4327==         suppressed: 0 bytes in 0 blocks
==4327== 
```

更有帮助，因为它试图显示泄漏内存的来源。

关于如何分配新节点，您的逻辑似乎存在根本问题。

首先，您的 4 叶验证代码会显示一个警告，但不会对传递的指针做任何事情，这意味着您传递的指针不会被处理并且您会丢失您传递的 Elem。您需要正确处理错误情况。

其次，在您的大部分代码中，您在 cOne、cTwo、cThree 和 cFour 指针周围混洗，没有任何验证或考虑可能存在的内容。

例如，这里

```
node -> cFour = node -> cThree; 
```

如果 cFour 实际上持有一个有效的对象，那么您就失去了指向它的任何链接。在覆盖它们之前，尝试输入代码来检查它们是否真的有 NULL。

您需要在**new**、**delete**和**指针分配**代码周围放置一些调试代码，并仔细检查您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T16:10:45.020

尝试这个：

```
template<typename KEY, typename T> inline Map<Key, T>::~Map() 
{ 
  DestroyTree(_root); 
}

template<typename KEY, typename T> void Map<Key, T>::DestroyTree(Elem *current)
{
  if (current == nullptr) {

    return;
  }

  switch (current->_numChildren) {

  case 2: // two node
        DestroyTree(current->cOne);

        DestroyTree(current->cTwo);

        delete current;

        break;

  case 3: // three node
        DestroyTree(current->cOne);

        DestroyTree(current->cTwo);

        DestroyTree(current->cThree);

        delete current;

        break;

  case 4: // four node
        DestroyTree(current->cOne);

        DestroyTree(current->cTwo);

        DestroyTree(current->cThree);

        DestroyTree(current->cFour);

        delete current;

        break;
  }

} 
```

# c++ - iOS文件共享，无法写入文档文件夹

> ID：15962559
> 
> 赞同：1
> 
> 时间：2013-04-12T03:30:16.770
> 
> 标签：c++, ios, file-io

嗨，我发现自己无法写入 ios 上的文件。这是路径：

知道我做错了什么吗？应用程序支持 iTunes 文件共享设置为 YES。

/var/mobile/Applications/BB0464AB-2F13-4B23-81BF-FBA0D5A40D9A/MyApp.app/Documents/a.txt

```
 ofstream myfile;
        myfile.open ("/var/mobile/Applications/BB0464AB-2F13-4B23-81BF-FBA0D5A40D9A/MyApp.app/Documents/a.txt");
        myfile << "Writing this to a file.\n";
        myfile.close();

        string line;
        ifstream myfile2 ("/var/mobile/Applications/BB0464AB-2F13-4B23-81BF-FBA0D5A40D9A/MyApp.app/Documents/a.txt");
        if (myfile2.is_open())
        {
            while ( myfile2.good() )
            {
                getline (myfile2,line);
                cout << line << endl;
            }
            myfile2.close();
        } else std::cout << "Unable to open file"; 
```

# javascript - 从同一命名空间内通过其完全限定名称调用命名空间函数

> ID：15962562
> 
> 赞同：1
> 
> 时间：2013-04-12T03:30:50.830
> 
> 标签：javascript, namespaces, javascript-namespaces, revealing-module-pattern

您是否有任何理由想要调用在命名空间内定义的函数，该命名空间是使用显示模块模式使用其完全限定名称创建的？例如，下面的 A 与 B？

### 示例 A。

```
var namespace = (function defineNamespace() {

    function sayNoThankYou() { }

    function callMeMaybe() {
        sayNoThankYou();
    }

    return {
        callMeMaybe: callMeMaybe,
        sayNoThankYou: sayNoThankYou
    };

}()); 
```

### 示例 B。

```
var namespace = (function defineNamespace() {

    function sayNoThankYou() { }

    function callMeMaybe() {
        namespace.sayNoThankYou();
    }

    return {
        callMeMaybe: callMeMaybe,
        sayNoThankYou: sayNoThankYou
    };

}()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:34:20.427

`namespace.sayNoThankYou();`您的`sayNoThankYou();`示例之间只有一个区别：函数`this`内部的`sayNoThankYou`值。如果你不在`this`函数内部使用，它们是相同的。

# scala - Scala中简单表达式的非法开始

> ID：15962563
> 
> 赞同：13
> 
> 时间：2013-04-12T03:30:54.840
> 
> 标签：scala, syntax

我刚开始学习scala。尝试实现递归函数时，我在 Eclipse 中收到错误“非法开始简单表达式”：

```
def foo(total: Int, nums: List[Int]): 
  if(total % nums.sorted.head != 0)
    0
  else 
    recur(total, nums.sorted.reverse, 0)

def recur(total: Int, nums: List[Int], index: Int): Int =
  var sum = 0 // ***** This line complained "illegal start of simple expression"
              // ... other codes unrelated to the question. A return value is included. 
```

谁能告诉我在（递归）函数中定义变量时我做错了什么？我在网上进行了搜索，但无法解释此错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T03:43:54.380

变量声明 ( `var`) 不返回值，因此您需要以某种方式返回值，代码如下所示：

```
object Main {

  def foo(total: Int, coins: List[Int]): Int = {

    if (total % coins.sorted.head != 0)
      0
    else
      recur(total, coins.sorted.reverse, 0)

    def recur(total: Int, coins: List[Int], index: Int): Int = {
      var sum = 0
      sum
    }

  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T03:42:59.503

缩进似乎暗示 that `recur`is inside `count`，但由于您没有放置`{`和`}`包围它，`count`所以只是 if-else，并且`recur`只是`var`（这是非法的 - 你必须返回一些东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-29T18:39:51.047

我有一个类似的问题。在书中找到示例 8.1，如下所示：

```
object LongLines {

def processFile(filename: String, width: Int) **{**
  val source = Source.fromFile(filename)
  for (line <- source.getLines) 
    processLine(filename, width, line)
**}** 
```

注意："def processFile(filename: String, width: Int) {" 和结尾 "}"

我用 {} 包围了“方法”主体，scala 编译它时没有错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-20T16:05:59.257

我有一个类似的问题，我正在做类似的事情

```
nums.map(num =>
  val anotherNum = num + 1
  anotherNum
) 
```

修复它的方法是添加花括号：

```
nums.map { num =>
  val anotherNum = num + 1
  anotherNum
} 
```

我认为这些表达式在 Scala 中是等价的，但我想我错了。

# css - 输入样式似乎不适用于 iPad

> ID：15962565
> 
> 赞同：1
> 
> 时间：2013-04-12T03:31:04.113
> 
> 标签：css, ipad, safari

我有几个文本输入字段，其中两个被禁用，它们在 PC 浏览器上看起来正确，但是当我在 iPad 上查看它时，文本的颜色并没有改变它的意思。

![在此处输入图像描述](https://i.stack.imgur.com/Qa6mH.png)

我在禁用字段上有这种风格：

```
input[disabled='disabled']
{
    color:#555;
} 
```

但 iPad 似乎并没有注意到这一点。

有任何想法吗？所有禁用的输入文本字段都会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:38:28.913

这个 safari 版本**不**支持你的 css 很遗憾你必须在你的领域使用额外的类，比如`class="disabled"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T02:25:16.680

您可以尝试覆盖不透明度，它对我有用。

```
input:disabled {
   -webkit-text-fill-color: rgba(0, 0, 0, 1); 
   -webkit-opacity: 1; 
} 
```

# c - 发出中断时不调用中断处理程序

> ID：15962566
> 
> 赞同：1
> 
> 时间：2013-04-12T03:31:09.937
> 
> 标签：c, linux

我正在为在 ARM 上运行的设备编写驱动程序。

这是 probe() 和 interrupt_handler() 的代码：

```
static irqreturn_t interrupt_handler(int irq, void *dev_id){
    printk(KERN_ALERT "MY_IRQ: Interrupt handler executed!\n");
    return IRQ_HANDLED;
}

static int mydevice_probe (struct platform_device *pdev) {
    printk("-----------------------------------------PROBE CALLED \n");
    r = platform_get_resource(pdev, IORESOURCE_MEM, 0);
    if(r == NULL) {
        printk("platform_get_resource failed\n");
        return -ENODEV;
    }
    irq = platform_get_irq(pdev,0);
    if (irq < 0) {
        printk("platform_get_irq failed\n");
        return -ENODEV;
    }

    ret = request_irq(irq, interrupt_handler, IRQF_SHARED, pdev->name, &dev_num);
    ret = misc_register(&mydevice_miscdevice);
    return 0;
} 
```

`request_irq`成功返回 0 并将 IRQ #17 分配给驱动程序。问题是，当中断发出时，中断处理程序没有得到执行。

任何想法？我错过了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:58:53.370

首先，一个良好实践的问题 - 呼吁`request_irq`和`misc_register`应该受到`if`条款的保护`printk`和`return -EIO`失败。

也许您没有启用中断。您可能应该添加代码以清除，然后在调用`request_irq`.

# javascript - 关于创建元素的最佳方式的意见

> ID：15962567
> 
> 赞同：1
> 
> 时间：2013-04-12T03:31:22.617
> 
> 标签：javascript, jquery, html, click, mootools

嘿伙计们，我需要你的建议和想法。我有一个看起来像这样的菜单

```
<span class="options">Option 1</span>
<div class="more">More</div>
<span class="options">Option 1</span>
    <div class="more">More</div>
<span class="options">Option 1</span>
    <div class="more">
         <div id="slider" class="slider">
              <div id="knob" class="knob"></div>
              </div>
      </div>
<span class="options">Option 1</span>
    <div class="more">More</div>
<span class="options">Option 1</span>
    <div class="more">More</div> 
```

是隐藏的`.more`，当用户单击任何`.options`跨度时，它会将 HTML 放入我制作的“弹出窗口”中。这是我做的快速JS

```
$(function() {
   $('.options').click(function() {
      var theHTML = $(this).next('.more').html();
        $('.popup').html(theHTML);
     }); 
```

好吧，这不是我想要的方式，因为当我向它添加更多细节时（.more 在其中没有说更多），例如 MooTools Drag/Slider，它不起作用，因为我正在复制 html。我也尝试了 APPEND 并且在我 APPEND 之后，整个事情都变成了数组......关于我应该做什么的任何想法？如果您需要更好的示例，请告诉我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:46:15.373

它不起作用，因为您在整个 Jquery 插件完成加载和附加后附加了新的 HTML。您应该必须重新绑定/重新附加您想要的插件。

# gridview - 更新gridview而不重建整个页面

> ID：15962568
> 
> 赞同：5
> 
> 时间：2013-04-12T03:31:22.807
> 
> 标签：gridview, postback

我有一个复杂的页面，上面有面板和许多控件。该页面包括一组过滤器和一个网格视图。通过选择不同的过滤器，我为我的 gridview 收到了不同数量的项目。这一切都有效，但更新速度很慢，即当我更改过滤器并按下更新按钮时。我需要找到一个解决方案来加快这个动作！所以这里有一个问题：是否可以只更新gridview的数据源而不重建整个页面。想法是尽快更新网格视图；网格中可能有超过 10,000 个项目。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-08T09:23:49.373

我建议将 GridView 和过滤器控件放入页面上的 UpdatePanel 中：

```
<asp:UpdatePanel runat="server" id="upData">
    <ContentTemplate>
        <div id="filterControls">
            <asp:TextBox runat="server" id="txtFilter"></asp:TextBox>
            <asp:Button runat="server" id="btnFilter" Text="Filter" />
        </div>

        <asp:GridView runat="server" id="gvItems">
            <EmptyDataTemplate>No results to display</EmptyDataTemplate>
        </asp:GridView>
    </ContentTemplate>
</asp:UpdatePanel> 
```

完成后，您可以简单地再次获取数据。正如您未指定的那样，我已经为 vb 和 c# 提供了代码：

**C＃**

```
protected void Page_Load(object sender, EventArgs e)
{
    // get the data initially on page load
    if (!IsPostBack)
    {
        loadDataGrid();
    }
}

protected void btnFilter_Click(object sender, EventArgs e)
{
    loadDataGrid();
}

private void loadDataGrid()
{
    // call a procedure to get the data. This is what I use:
    // execDB(string commandText, string commandType, List<SqlParameter> args, bool newConnection);
    using (Database db = new Database())
    {
        List<SqlParameter> args = new List<SqlParameter>();
        args.Add(new SqlParameter("@filter1", SqlDbType.VarChar));
        args(args.Count - 1).Value = txtFilter1.Text;

        DataTable dt = db.execDB("Users_GetAll", "SP", args.ToArray(), false);

        if (dt.Rows.Count > 0)
        {
            gvItems.DataSource = dt;
            gvItems.DataBind();
        }
    }
} 
```

**VB**

```
Protected Sub Page_Load(sender As Object, e As EventArgs)
    ' get the data initially on page load
    If Not IsPostBack Then
        loadDataGrid()
    End If
End Sub

Protected Sub btnFilter_Click(sender As Object, e As EventArgs)
    loadDataGrid()
End Sub

Private Sub loadDataGrid()
    ' call a procedure to get the data. This is what I use:
    ' execDB(string commandText, string commandType, List<SqlParameter> args, bool newConnection);
    Using db As New Database()
        Dim args As New List(Of SqlParameter)()
        args.Add(New SqlParameter("@filter1", SqlDbType.VarChar))
        args(args.Count - 1).Value = txtFilter1.Text

        Dim dt As DataTable = db.execDB("Users_GetAll", "SP", args.ToArray(), False)

        If dt.Rows.Count > 0 Then
            gvItems.DataSource = dt
            gvItems.DataBind()
        End If
    End Using
End Sub 
```

这基本上会导致过滤器按钮更新 GridView，只获取它所需的数据，并且因为它位于 UpdatePanel 中，它还避免了回发整个页面，这应该会提高页面的整体速度。

希望这可以帮助！

# ruby - #!/usr/bin/env ruby 在 cron 中找不到

> ID：15962573
> 
> 赞同：10
> 
> 时间：2013-04-12T03:31:45.353
> 
> 标签：ruby, bash, cron

我有一个简单的红宝石脚本`hello.rb`：

```
#!/usr/bin/env ruby
puts 'hello' 
```

它在命令行运行正常：

```
# /usr/local/src/hello/hello.rb
hello 
```

但是，如果我把它放在`cron`：

```
* * * * * /usr/local/src/hello/hello.rb >> /usr/local/src/hello/hello.log 2>&1 
```

日志文件中有错误：

```
/usr/bin/env: ruby: No such file or directory
/usr/bin/env: ruby: No such file or directory
...
/usr/bin/env: ruby: No such file or directory 
```

`/usr/bin/env ruby`虽然在命令行运行正常：

```
# /usr/bin/env ruby -v
ruby 1.8.7 (2012-10-12 patchlevel 371) [i686-linux] 
```

如何修复环境错误`cron`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-12T03:37:47.287

问题是环境不是你所期望的。

您没有说 cron 是以您的用户身份运行还是以 root 身份运行，但是，无论哪种情况，您都可以通过添加另一个 cron 条目来测试环境的样子：

```
* * * * * /usr/bin/env > /path/to/your/home/directory/env.txt 
```

让它运行一次，然后将其拉出并查看文件。

与其使用`/usr/bin/env`尝试查找 Ruby 来运行您的代码，不如明确定义 Ruby：

```
* * * * * /path/to/the/ruby/you/want /usr/local/src/hello/hello.rb >> /usr/local/src/hello/hello.log 2>&1 
```

您可以使用以下方法找出您想要的 Ruby：

```
which ruby 
```

或者，而不是依赖`/usr/bin/env`于你的 #! 行，在那里定义你的 Ruby。

`/usr/bin/env ruby`当您使用 RVM 或 rbenv 之类的东西并在 Ruby 版本之间切换时，在您的代码中使用会很方便。当您将某些东西投入“生产”时，这不是一个好的选择，无论是在您自己帐户中的计算机上，还是在以 root 身份运行的生产主机上。

如果您使用的是 Linux 或 Mac OS，请尝试`man 5 crontab`了解更多信息。另外，“[我在哪里可以设置 crontab 将使用的环境变量？](https://stackoverflow.com/questions/2229825/where-can-i-set-environment-variables-that-crontab-will-use) ”应该非常有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T03:37:45.763

env 仅在现有的 PATH 变量中搜索。crond 创建以您的用户名运行的进程。所以PATH是最小的。您必须在脚本本身中设置环境变量

# c# - 如何忽略必填字段验证中的第一个索引

> ID：15962580
> 
> 赞同：1
> 
> 时间：2013-04-12T03:32:21.273
> 
> 标签：c#, asp.net

我正在做必填字段验证检查，首先我将“选择一个项目”硬编码到我的`ddllocation`，但是当我点击提交按钮时，系统不会提示我必填字段消息。我错过了什么吗？

**代码背后**

```
 ddlLocation.DataSource = dsResult.Tables[0];
  ddlLocation.DataTextField = "location_nm";
  ddlLocation.DataValueField = "location_id";
  ddlLocation.DataBind();
  ddlLocation.Items.Insert(0, "----Select an Item----"); 
```

**HTML**

```
<asp:RequiredFieldValidator ID="rfvLocation" runat="server" 
ControlToValidate="ddlLocation"Display="Dynamic" CssClass="ErrorMsg"
ErrorMessage="Mandatory" InitialValue="1"></asp:RequiredFieldValidator> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T03:38:02.103

你应该设置 `InitialValue`：

```
InitialValue = "----Select an Item----" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T03:57:08.563

改变

```
 ddlLocation.Items.Insert(0, "----Select an Item----"); 
```

到

```
ddlLocation.Items.Insert(0, new ListItem("----Select an Item----", "1")); 
```

因为你给的初始值为`RequiredFieldValidator`1

您可以提供不会在您绑定到下拉列表的数据中的初始值

如果您在不创建列表项的情况下插入项目，则该项目的值字段将为空值。那么你不能给初始值字段赋值`RequiredFieldValidator`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T03:55:02.153

首先你应该通过这种方式在列表中插入项目

```
ddlLocation.Items.Insert(0, new ListItem("-select item-","0" )); 
```

`RequiredFieldValidator` 然后你可以像这样设置初始值

```
InitialValue = "0" 
```

0 是首选，因为 1 可以是 中任何其他位置的 id `dropdown`。

# jquery - 如何显示/隐藏 PhotoSwipe 工具栏

> ID：15962582
> 
> 赞同：1
> 
> 时间：2013-04-12T03:32:46.717
> 
> 标签：jquery, plugins, toolbar, photoswipe

我正在构建一个基于 Photoswipe 的项目。

有没有一种方法可以创建外部调用来按需显示或隐藏工具栏？（即，如果用户定义的外部事件甚至发生）

有没有一种用于 Photoswipe 的 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-11T05:53:51.327

它没有记录，但是您可以访问 PhotoSwipe UI 的内部方法。

假设`gallery`是你的主要对象

```
var gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options); 
```

隐藏用户界面

```
gallery.ui.hideControls(); 
```

显示 UI

```
galleru.ui.showControls(); 
```

# cmis - 如何知道 CMIS 属性是否可修改？

> ID：15962593
> 
> 赞同：0
> 
> 时间：2013-04-12T03:34:16.150
> 
> 标签：cmis, opencmis, dotcmis

我知道如何阅读 CMIS 文档的属性。

但是如何判断哪个属性是可修改的，哪个属性是只读的呢？
使用 OpenCMIS/DotCMIS。

例如，CMIS Workbench 似乎知道，因为在其属性编辑器中，它只列出了字段`cmis:name`，而不列出其他字段（如`cmis:id`）。

![在此处输入图像描述](https://i.stack.imgur.com/x3gwQ.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:46:48.990

PropertyDefinition 对象提供属性的可更新性。使用 OpenCMIS，您可以像这样检索“cmis:name”可更新性：

```
TypeDefinition typeDef = session.getTypeDefinition("cmis:document");
Map<String,PropertyDefinition<?>> propertyDefs = typeDef.getPropertyDefinitions();
PropertyDefinition namePropertyDef = propertyDefs.get("cmis:name");
Updatability nameUpdatability = namePropertyDef.getUpdatability();

if (Updatability.READONLY.equals(nameUpdatability)
    throw new Exception("This field can not be upated"); 
```

您可以查看[OpenCMIS javadoc](http://chemistry.apache.org/java/0.8.0/maven/apidocs/)以了解有关可更新性值的详细信息

# php - 从字符串中去除单端标签（img、hr 等）

> ID：15962594
> 
> 赞同：0
> 
> 时间：2013-04-12T03:34:19.210
> 
> 标签：php, regex, preg-replace

```
function stripSingleEndedTag($content, $allowed = array()){
(array)$allowed;
$singletags = array('<meta>','<img>','<input>','<hr>','<br>','<link>','<isindex>','<base>','<meta>','<nextid>','<bork>');

$stripthese = arrayfilterout ($singletags, $allowed);
$stripthese = str_replace(array('<','>'),'',$stripthese);

$pattern = '/<('. implode('|', $stripthese) .')[^>]+\>/i'; 

$content = preg_replace($pattern, "", $content);
return $content;
} 
```

我在这里得到的将去掉一个单尾标签，`<bork />`但前提是在“bork”之后和“>”之前有一些字符。 `<bork >`并被`<bork/>`剥离，但不是`<bork>`

顺便说一句，不能使用`strip_tags()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:50:28.503

**您可以使用：**

```
$pattern = '/\<('. implode('|', $stripthese) .')[^>]*\>/i'; 
```

***原答案：***

你想摆脱`<bork />`and `<bork/>`，而不是`<bork>`and`<bork >`吗？

看起来你想要的是：

```
$pattern = '/<('. implode('|', $stripthese) .').*\\\>/i'; 
```

*更新：*修复贪婪匹配：

```
$pattern = '/<('. implode('|', $stripthese) .').*?\\\>/i';
$pattern = '/<('. implode('|', $stripthese) .')[^>]*\\\>/i'; 
```

# html - 表格/表格格式

> ID：15962598
> 
> 赞同：0
> 
> 时间：2013-04-12T03:34:36.950
> 
> 标签：html, css, html-table

传统上，我总是通过设置每个属性的样式来布置表单，但我最近阅读了很多关于使用表格设置表单的内容。我的问题是，对于一个表格，当一个单元格相当大时，该列中的所有其他单元格都变成相同的宽度。在编辑它们时，我最终遇到的问题是输入字段之间的间隙很大，因为它们上方放置了一个大单元格，或者当您调整屏幕大小时，事情变得太近而无法舒适。

我尝试`<td>`单独设置宽度，但这不起作用。我创建了一个小提琴，看看是否有人能让我朝着正确的方向前进。

非常感谢大家！

[http://jsfiddle.net/uFwkd/](http://jsfiddle.net/uFwkd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:39:36.537

使用 div 和 table 布局表单之间存在争议。对此有一些经验法则：

*   仅用于展示的表格
*   使用 div 作为表单布局

在您的情况下，您可以考虑[将表格转换为 div](https://stackoverflow.com/questions/1760820/how-to-switch-from-table-to-div-for-form-layout)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:18:41.403

jsfiddle 中的表（这似乎是问题的真正含义）包含具有不同单元格数量的行，例如

```
<tr>
<td><input type="text" name="street" id="street" value="" size="20" /></td>
</tr>

<tr>
<td>City:</td>
<td>State:</td>
<td>Zip:</td>
</tr> 
```

这在实践中导致了相当不可预测的渲染。

`colspan`您可以通过使用单元格上的属性（在上面的第一行，使用`<td colspan="3">`. ）确保所有行具有相同数量的槽（在本例中为 3包含两个单元格：其中一个需要跨越两列。

这会有些不自然（列中的单元格不会真正相互关联，只是*放在*同一列中）并且会暗示可访问性问题。表单的更好的表格结构对于每个输入控件（一个字段，例如一个`input`元素）有一行，一列中带有标签，控件本身在另一列中，因此您可以从类似的内容开始

```
<table>
<tr><td><label for="org">Organization name:</label></td>
    <td><input type="text" name="org" id="org" value="" size="20" /></td>
    </tr> 
```

# jquery - jQuery fadeOut：淡出文本，但保留周围的文本位置

> ID：15962604
> 
> 赞同：3
> 
> 时间：2013-04-12T03:35:16.713
> 
> 标签：jquery, jquery-animate

我正在使用标准淡出/淡入来替换文本。但是这个文本被替换在我标题中其他文本的中间。就像是：

```
$('#flashable').fadeOut('slow', function(){
    $(this).delay(500);
    $(this).html(someNewText);
    $(this).fadeIn('slow);
}); 
```

当我这样做时，它工作得很好，除了 DOM 移动以删除以前的文本，然后移动回 put in `someNewText`。有什么方法可以在没有发生的情况下做到这一点？用户看起来像这样

起初：

> 敏捷的棕色狐狸跳过了懒狗。

淡出开始：

> 棕色的狐狸跳过了懒惰的狗。

淡入淡出：

> 聪明的棕色狐狸跳过了懒惰的狗。

注意：我要替换的文本始终是相同数量的字母。因此，由于插入`someNewText`的长度与之前在`$('#flashable').html()`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T03:54:49.010

您可以替换`fadeOut`为，[`fadeTo`](http://api.jquery.com/fadeTo/)因为`fadeOut`意味着`display: none;`在动画结束时设置，这将导致元素 box-model 从渲染页面中删除。但是，仅设置`fadeTo`动画`opacity`并保持元素的位置和框大小，因此以下元素将保持其原始位置：

```
$('#flashable').fadeTo(600, 0, function () {
    $(this).delay(600);
    $(this).html('smart');
    $(this).fadeTo(600, 1);
}); 
```

[jsFiddle](http://jsfiddle.net/ArieShout/3YwtZ/1/)上的示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T03:41:02.900

你能告诉我你的HTML结构吗？

好吧，你想做这个吗？[http://jsfiddle.net/ericdum/AkJ9J/](http://jsfiddle.net/ericdum/AkJ9J/)

```
$('#flashable').fadeTo('slow', 0, function(){
    $(this).delay(500);
    $(this).html("smart");
    $(this).fadeTo('slow', 1);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T03:39:48.330

我刚刚发现：[jQuery text fade/transition from a text to another?](https://stackoverflow.com/questions/3670487/jquery-text-fade-transition-from-one-text-to-another)

它使用动画/不透明度。对于其他搜索者，我上面描述的称为“跳跃”影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T03:44:41.887

您不能使用`fadeOut()`并且`fadeIn()`因为它们会在动画完成时隐藏文本块，这会导致它从页面布局中移除并且事情会发生变化。

相反，您可以使用[`fadeTo()`](http://api.jquery.com/fadeTo/)which 将文本块留在原处并仅更改其不透明度，但是您还需要构建 HTML 以使两个文本块彼此重叠。

这是一个工作演示：http: [//jsfiddle.net/jfriend00/ahbyh/](http://jsfiddle.net/jfriend00/ahbyh/)

# android - YesNo DialogFragment 上的按钮单击处理程序 [Mono for Android]

> ID：15962607
> 
> 赞同：0
> 
> 时间：2013-04-12T03:35:27.517
> 
> 标签：android, mono, fragment, android-alertdialog, dialogfragment

我有一个 ListFragment 上面有复选框......

```
public class ViewOrderLineFragment : ListFragment {
      public override bool OnOptionsItemSelected(IMenuItem item){
            switch (item.TitleFormatted.ToString()){
                case "Add":
                   //stuff here
                    break;
                case "Edit":
                        var dialog = new ConfirmationFragment(Activity);
                        dialog.Show(FragmentManager, null);
                    break;
            }

            return base.OnOptionsItemSelected(item);
        }
       public void DoPositiveClick(){=
           DeletedSelectedItems();=
        }

        public void DoNegativeClick()={
            // Do stuff here.
            //Log.Info("FragmentAlertDialog", "Negative click!");
        }

        void DeletedSelectedItems={
           //do stuff here
         }
} 
```

当我选择一些项目并按下删除按钮时，它会提示用户“你确定吗？”

这是我的 DialogFragment 代码。

```
public class ConfirmationFragment : DialogFragment { 
Context _context;
        public ConfirmationFragment(Context context) {
            _context = context;   
        }
public override Dialog OnCreateDialog(Bundle savedState){
 return new AlertDialog.Builder(Activity)
                //.SetIcon(Resource.Drawable.alert_dialog_icon)
                //.SetTitle(title)
            .SetPositiveButton("Yes", (sender, e) =>
            {
                ((ViewOrderLineFragment)Activity).DoPositiveClick();
            })
            .SetNegativeButton("No", (sender, e) =>
            {
                ((ViewOrderLineFragment)Activity).DoNegativeClick();
            }).Create();
        }
} 
```

错误： `Cannot convert type 'Android.App.Activity' to 'OTCMobile.Screens.ViewOrderLineFragment'`

在线的`((ViewOrderLineFragment)Activity).DoPositiveClick();`

我按照这个示例[这个链接](https://github.com/xamarin/monodroid-samples/blob/master/Support4/Support4/Activities/FragmentAlertDialogSupport.cs)

任何替代解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:25:52.480

我报废了 ConfirmationFragment ..

这对我有用。

```
public override bool OnOptionsItemSelected(IMenuItem item) {
        switch (item.TitleFormatted.ToString()) {
            case "Add":
               //some stuff
                break;
            case "Edit":
              var confirmDialog = new AlertDialog.Builder(this.Activity)
                        //.SetIcon(Resource.Drawable.alert_dialog_icon)
                        .SetTitle("Are you sure you want to delete all selected?")
                    .SetPositiveButton("Yes", (sender, e) =>
                    {
                        DoPositiveClick();
                    })
                    .SetNegativeButton("No", (sender, e) =>
                    {
                        DoNegativeClick();
                    }).Create();
                    confirmDialog.Show();

                }
                break;
        }
        return base.OnOptionsItemSelected(item);
    } 
```

# object - 如何在 HPCloud-PHP 1.20 上删除 Container 中的所有对象

> ID：15962616
> 
> 赞同：0
> 
> 时间：2013-04-12T03:36:20.967
> 
> 标签：object, cloud, containers, removeall

[http://hpcloud.github.io/HPCloud-PHP/doc/api/html/class_h_p_cloud_1_1_storage_1_1_object_storage_1_1_container.html#af7c3ea3150164bc92700134803f277be](http://hpcloud.github.io/HPCloud-PHP/doc/api/html/class_h_p_cloud_1_1_storage_1_1_object_storage_1_1_container.html#af7c3ea3150164bc92700134803f277be)

它们提供了删除对象的 API，但无法删除容器中的所有对象。因为在规则中。如果我想删除容器，我必须先让容器为空。目前为了处理它，我必须获取容器中的所有对象并删除它们中的每一个，这意味着我的站点可能会执行许多请求，只是为了删除一个非空容器。

我之前已经发布了一些关于 HpCloud-PHP 的未回答的问题，但也许直到现在它仍然是新事物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T22:55:09.910

无论容器内容如何，​​都可以使用 CLI 工具强制删除容器：

```
hpcloud containers:remove :demorama --force 
```

可以在[此处找到有关 UNIX](http://docs.hpcloud.com/cli/unix/object-storage)对象存储 CLI 的文档。可以在[此处](http://docs.hpcloud.com/cli)找到 CLI 的主要文档页面。祝你好运——戴夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T21:50:46.123

抱歉，Swift 中没有 API 调用来删除非空容器。您必须遍历容器中的所有对象并单独删除它们才能删除容器。

[在api.openstack.org](http://api.openstack.org/)上有很多关于所有 OpenStack API 的文档，因为 PHP 绑定几乎是对 API 调用的直接映射。

# regex - 标记非间距 (MNS) Unicode 类别和 \b

> ID：15962625
> 
> 赞同：0
> 
> 时间：2013-04-12T03:37:01.737
> 
> 标签：regex, unicode, pcre, diacritics, word-boundary

在 PCRE `non-spacing mark characters`中导致字边界。结果`Åström`字符串有 2 个`\b`位置，`Åström`（分解的字符）有 6 个`\b`位置。这是预期的行为还是不正确的实现？

# android - 尝试显示列表视图（包含来自数据库的内容）时，CursorAdapter 崩溃的应用程序 - 内部的 logcat

> ID：15962626
> 
> 赞同：0
> 
> 时间：2013-04-12T03:37:24.557
> 
> 标签：android, database, listview, cursor, simplecursoradapter

在我的应用程序中，单击“收藏夹”按钮应该会打开一个新窗口，其中包含一个列表视图，其内容来自数据库。单击此按钮时出现 NullPointerException。

以下是相关代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_favorites_list_view);

    dbHelper = new DatabaseAdapter(this);
    dbHelper.open();        
    displayListView();
}

private void displayListView() {

    c = dbHelper.findFavoritesInTable();
    displayCursor();

}

private void displayCursor() {

    String[] columns = new String[] { DatabaseAdapter.FAV_NAME,
            DatabaseAdapter.FAV_CAT1, DatabaseAdapter.FAV_CAT2,
            DatabaseAdapter.FAV_CAT3, DatabaseAdapter.FAV_CUISINE };
    int[] to = new int[] { R.id.name, R.id.cat1, R.id.cat2, R.id.cat3,
            R.id.cuisine };
    cursorAdapter = new SimpleCursorAdapter(this, R.layout.poi_info, c,
            columns, to, 0);

    ListView listView = (ListView) findViewById(R.id.poilistview);
    // Assign adapter to ListView
    listView.setAdapter(cursorAdapter);

    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        // When we click on elements :
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Intent i = new Intent(getApplicationContext(),
                    POIActivity.class);

            String name = ((TextView) view.findViewById(R.id.name))
                    .getText().toString();
            String street = ((TextView) view.findViewById(R.id.street))
                    .getText().toString();
            String website = ((TextView) view.findViewById(R.id.website))
                    .getText().toString();
            String telephone = ((TextView) view
                    .findViewById(R.id.telephone)).getText().toString();
            String remarks = ((TextView) view.findViewById(R.id.remarks))
                    .getText().toString();
            String price = ((TextView) view.findViewById(R.id.price))
                    .getText().toString();
            String mobile = ((TextView) view.findViewById(R.id.mobile))
                    .getText().toString();
            String cat1 = ((TextView) view.findViewById(R.id.cat1))
                    .getText().toString();
            String cat2 = ((TextView) view.findViewById(R.id.cat2))
                    .getText().toString();
            String cat3 = ((TextView) view.findViewById(R.id.cat3))
                    .getText().toString();
            String cuisine = ((TextView) view.findViewById(R.id.cuisine))
                    .getText().toString();

            i.putExtra(ID_NAME, name);
            i.putExtra(ID_STREET, street);
            i.putExtra(ID_WEBSITE, website);
            i.putExtra(ID_TELEPHONE, telephone);
            i.putExtra(ID_REMARKS, remarks);
            i.putExtra(ID_PRICE, price);
            i.putExtra(ID_MOBILE, mobile);
            i.putExtra(ID_CAT1, cat1);
            i.putExtra(ID_CAT2, cat2);
            i.putExtra(ID_CAT3, cat3);
            i.putExtra(ID_CUISINE, cuisine);

            startActivity(i);
        }

    }); 
} 
```

我的 logcat 的这一部分显示了问题的出处：
![在此处输入图像描述](https://i.stack.imgur.com/WU5ml.jpg)

当我注释掉这一行时，没有更多的 NPE（但当然没有任何工作）：

```
listView.setAdapter(cursorAdapter); 
```

让我感到困惑的是，在这个应用程序中，我有另一个按钮打开另一个窗口，其中包含一个列表视图，其内容来自数据库的另一个表，并且运行良好。代码非常相似，我只是更改了变量的名称。
**那么，为什么我可以在一种情况下很好地打开我的列表视图并单击元素，而在这种情况下，我得到了一个具有类似代码的 NPE？！**我不知道它来自哪里，也许是我数据库中的表？感谢您的帮助，我在这里真的很挣扎。
**编辑：**这是完整的 logcat：

```
04-12 11:45:03.779: W/dalvikvm(2998): threadid=1: thread exiting with uncaught exception (group=0x40a95390)
04-12 11:45:03.779: E/AndroidRuntime(2998): FATAL EXCEPTION: main
04-12 11:45:03.779: E/AndroidRuntime(2998): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.asiatypeapplicationbeta/com.example.asiatypeapplicationbeta.FavoritesListView}: java.lang.NullPointerException
04-12 11:45:03.779: E/AndroidRuntime(2998):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1964)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1989)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at android.app.ActivityThread.access$600(ActivityThread.java:126)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1155)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at  android.os.Handler.dispatchMessage(Handler.java:99)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at android.os.Looper.loop(Looper.java:137)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at android.app.ActivityThread.main(ActivityThread.java:4482)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at java.lang.reflect.Method.invoke(Method.java:511)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at dalvik.system.NativeStart.main(Native Method)
04-12 11:45:03.779: E/AndroidRuntime(2998): Caused by: java.lang.NullPointerException
04-12 11:45:03.779: E/AndroidRuntime(2998):     at com.example.asiatypeapplicationbeta.FavoritesListView.displayCursor(FavoritesListView.java:62)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at com.example.asiatypeapplicationbeta.FavoritesListView.displayListView(FavoritesListView.java:46)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at com.example.asiatypeapplicationbeta.FavoritesListView.onCreate(FavoritesListView.java:40)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at android.app.Activity.performCreate(Activity.java:4465)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-12 11:45:03.779: E/AndroidRuntime(2998):     at  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1928)
04-12 11:45:03.779: E/AndroidRuntime(2998):     ... 11 more 
```

我的 DatabaseAdapter.class ：

```
public class DatabaseAdapter {

public static final String DATABASE_POITABLE = "tblpoisurvey";
public static final String DATABASE_FAVTABLE = "tblfavorites";

public static final String KEY_ROWID = "_id";
public static final String POI_NAME = "name";
public static final String POI_CAT1 = "cat1";
public static final String POI_CAT2 = "cat2";
public static final String POI_CAT3 = "cat3";
public static final String POI_SUBCAT = "subcat";
public static final String POI_STREET = "street";
public static final String POI_WEBSITE = "website";
public static final String POI_REMARKS = "remarks";
public static final String POI_TELEPHONE = "telephoneNo";
public static final String POI_MOBILE = "mobileNo";
public static final String POI_PRICE = "priceLevel";
public static final String POI_DATEFRIENDLY = "dateFriendly";
public static final String POI_PAYMENT = "paymentOptions";
public static final String POI_CUISINE = "cuisine";
// public static final String COL_X = "x";
// public static final String COL_Y = "y";

public static final String FAV_ID = "_id";
public static final String FAV_NAME = "name";
public static final String FAV_CAT1 = "cat1";
public static final String FAV_CAT2 = "cat2";
public static final String FAV_CAT3 = "cat3";
public static final String FAV_STREET = "street";
public static final String FAV_WEBSITE = "website";
public static final String FAV_REMARKS = "remarks";
public static final String FAV_TELEPHONE = "telephoneNo";
public static final String FAV_MOBILE = "mobileNo";
public static final String FAV_PRICE = "priceLevel";
public static final String FAV_DATEFRIENDLY = "dateFriendly";
public static final String FAV_PAYMENT = "paymentOptions";
public static final String FAV_CUISINE = "cuisine";

private Context myContext;
private static SQLiteDatabase myDatabase;
private DatabaseHelper dbHelper;
private Cursor c;

// Constructor
public DatabaseAdapter(Context context) {
    this.myContext = context;
}

public DatabaseAdapter open() throws SQLException {
    dbHelper = new DatabaseHelper(myContext);
    try {
        dbHelper.createDatabase();
    } catch (IOException e) {
        e.printStackTrace();
    }
    myDatabase = dbHelper.getWritableDatabase();
    return this;
}

public void close() {
    if (c != null) {
        c.close();
    }
    try {
        dbHelper.close();
        myDatabase.close();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

// Method findPoiInTable, called when the user clicks on a level2 icon
// button to open the listview
public Cursor findPoiInTable(String categoryInterval) {
    String where = POI_CAT1 + " IN " + categoryInterval + " OR " + POI_CAT2
            + " IN " + categoryInterval + " OR " + POI_CAT3 + " IN "
            + categoryInterval;

    Cursor c = myDatabase.query(DATABASE_POITABLE, new String[] {
            KEY_ROWID, POI_NAME, POI_STREET, POI_WEBSITE, POI_PAYMENT,
            POI_TELEPHONE, POI_PRICE, POI_REMARKS, POI_DATEFRIENDLY,
            POI_MOBILE, POI_CAT1, POI_CAT2, POI_CAT3, POI_CUISINE }, where,
            null, null, null, POI_NAME);
    return c;
}

public Cursor findFavoritesInTable() {

    Cursor c = myDatabase.rawQuery("select * from tblfavorites",null);
    return c;
}

public static long insertInTable(String ID_NAME, String ID_CAT1,
        String ID_CAT2, String ID_CAT3, String ID_CUISINE) {
    ContentValues data = new ContentValues();
    data.put(FAV_NAME, ID_NAME);
    data.put(FAV_CAT1, ID_CAT1);
    data.put(FAV_CAT2, ID_CAT2);
    data.put(FAV_CAT3, ID_CAT3);
    data.put(FAV_CUISINE, ID_CUISINE);
    if (myDatabase == null) {

    }
    return myDatabase.insert("DATABASE_FAVTABLE", "nullColumnHack", data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:45:04.283

试试这个方法。

```
 //check DatabaseAdapter is your database name with single parameter constructor
    DatabaseAdapter DdbHelper = new DatabaseAdapter(this);
     dbHelper.open();  
     Cursor c = dbHelper.findFavoritesInTable();
     if(c.getCount()!=0){
         System.out.println("CURSOR VALUE:"+c.getCount());
         displayCursor();
     }
     c.close();
     dbHelper.close();
    } 
```

您可以先查找光标值是否不为空，然后您的`displayCursor()`is 调用。

如果您没有得到解决方案，请发表评论。

# css - 参数的框阴影顺序

> ID：15962630
> 
> 赞同：3
> 
> 时间：2013-04-12T03:37:44.083
> 
> 标签：css

来自[https://github.com/orderedlist/minimal/blob/master/stylesheets/styles.css](https://github.com/orderedlist/minimal/blob/master/stylesheets/styles.css)：

```
box-shadow:inset #fff 0 1px 0, inset rgba(0,0,0,0.03) 0 -1px 0; 
```

来自[http://www.w3schools.com/cssref/css3_pr_box-shadow.asp](http://www.w3schools.com/cssref/css3_pr_box-shadow.asp)：

```
box-shadow: h-shadow v-shadow blur spread color inset; 
```

因此，除其他外，排序似乎有点不同。在 github.com 示例中，插图排在第一位，而 w3schools.com 则排在最后。顺序不重要还是什么？或者也许那些可以与其他属性消除歧义的属性无关紧要？

我猜 0 是 h-shadow，1px 是 v-shadow，最后 0 是模糊？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T03:48:38.297

一般来说，只有相同类型的参数才有固定的顺序。`h-shadow`, `v-shadow`, `blur`and`spread`因此必须按此顺序出现（并且您只能从末尾省略），但`inset`and`colour`可以放在任何地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-11T11:37:52.417

通常，box-shadow 的参数顺序为 `horizontal-offset` `vertical-offset` `blur` `spread` `color` 和 `inset`。其中，您可以 在列表中的任何位置`inset` 放置 。`color`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T04:32:00.690

显然，您可以放在`inset`最后或最后（但其他所有内容的顺序，如水平阴影、垂直阴影、模糊、扩散和颜色确实很重要。正如您在[w3c 规范](http://www.w3.org/TR/css3-background/#the-box-shadow)中看到的那样，它们`inset?`在语法的开头显示在你发现它们在最后被使用的例子。

# nginx - Nginx 或 PHP FPM 忽略 php.ini 中的 memory_limit

> ID：15962634
> 
> 赞同：21
> 
> 时间：2013-04-12T03:37:50.367
> 
> 标签：nginx, php

服务器信息：Ubuntu 服务器、Nginx、PHP FPM

在`/etc/php5/fpm/php.ini`我有：`memory_limit = 512M` 在`/etc/php5/fpm/php-fpm.conf`我有：`php_admin_value[memory_limit] = 512M`

```
php_value[memory_limit] = 512M 
```

## 我的 phpinfo 看起来像：

PHP 版本 5.3.10-1ubuntu3.6

## 系统构建日期

Linux snserver 3.2.0-40-generic #64-Ubuntu SMP Mon Mar 25 21:22:10 UTC 2013 x86_64 Mar 11 2013 14:34:24

## 服务器 API

`FPM/FastCGI`

## 虚拟目录支持

禁用

## 配置文件 (php.ini) 路径

```
/etc/php5/fpm 
```

## 加载的配置文件

`/etc/php5/fpm/php.ini`

扫描此目录以获取其他 .ini 文件 `/etc/php5/fpm/conf.d`

## `.ini`解析的附加文件

`/etc/php5/fpm/conf.d/curl.ini, /etc/php5/fpm/conf.d/gd.ini, /etc/php5/fpm/conf.d/mcrypt.ini, /etc/php5/fpm/conf.d/memcache.ini, /etc/php5/fpm/conf.d/mysql.ini, /etc/php5/fpm/conf.d/mysqli.ini, /etc/php5/fpm/conf.d/pdo.ini, /etc/php5/fpm/conf.d/pdo_mysql.ini` ...

此服务器受 Suhosin 补丁 0.9.10 版权所有 (c) 2006-2007 Hardened-PHP Project 版权所有 (c) 2007-2009 SektionEins GmbH

此程序使用 Zend 脚本语言引擎：Zend Engine v2.3.0，版权所有 (c) 1998-2012 Zend Technologies with Xdebug v2.2.2，版权所有 (c) 2002-2013，Derick Rethans

...

## 内存限制

128M

## 上传最大文件大小

20M

在 /etc/nginx/nginx.conf 中：

```
 user www-data;

worker_processes 2;

pid /var/run/nginx.pid;

events {
    worker_connections 768;
    # multi_accept on;
}

http {
    client_max_body_size 20M;

    ##

    # Basic Settings

    ##
    fastcgi_buffers 16 16k;

    fastcgi_buffer_size 32k;

    proxy_buffers 4 512k;

    proxy_buffer_size 256k;

    proxy_busy_buffers_size 512k;

    fastcgi_read_timeout 3600;

    sendfile on;

    tcp_nopush on;

    tcp_nodelay on;

    keepalive_timeout 300;

    keepalive_requests 50;

    #ssl_ciphers HIGH:!aNULL:!MD5:!kEDH;

        #ssl_prefer_server_ciphers on;

        #ssl_protocols TLSv1;

        #ssl_session_cache shared:SSL:10m;

        #ssl_session_timeout 10m;

    types_hash_max_size 2048;

    # server_tokens off;

    # server_names_hash_bucket_size 64;

    # server_name_in_redirect off;

    include /etc/nginx/mime.types;

    default_type application/octet-stream;

    ##
    # Logging Settings
    ##

    access_log /var/log/nginx/access.log;

    error_log /var/log/nginx/error.log;

    ##
    # Gzip Settings
    ##

    gzip on;
    gzip_disable "msie6";

    # gzip_vary on;
    # gzip_proxied any;
    # gzip_comp_level 6;
    # gzip_buffers 16 8k;
    # gzip_http_version 1.1;
    # gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    ##
    # nginx-naxsi config
    ##
    # Uncomment it if you installed nginx-naxsi
    ##

    #include /etc/nginx/naxsi_core.rules;

    ##
    # nginx-passenger config
    ##
    # Uncomment it if you installed nginx-passenger
    ##

    #passenger_root /usr;
    #passenger_ruby /usr/bin/ruby;

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
} 
```

* * *

问题是当我更改 `upload_max_filesize`大小时，`phpinfo`将显示新值，但是当我更改时，`memory_limit`没有任何变化。我猜在某个地方 memory_limit 被覆盖了。但我找不到它。谁能帮我？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-02-22T20:11:01.607

在`/etc/php5/fpm/php-fpm.conf`我有`php_admin_value[memory_limit] = 512M`

这对我有用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-12-02T15:58:24.067

问题可能在于**fpm**进程重复，即使您更改 /etc/php5/fpm/php.ini 也没有效果。

*   使用 (ubuntu) 停止 php5-fpm： sudo service php5-fpm stop
*   检查是否没有更多的 fpm 进程：sudo ps ax | grep fpm
*   如果有的话用以下命令杀死它：sudo kill -9 pid
*   确保杀死所有 fpm 进程
*   重启：sudo service php5-fpm restart

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-05-05T00:17:55.677

您可以将 Nginx 排除在外，它只是传递请求，它在 php-fpm 中运行您的 php 代码。

你可以检查你的 suhosin 设置，suhosin.memory_limit。

当您看到您的 phpinfo 输出时，应该有 2 列，master 和 local 用于 memory_limit，这些分别显示什么？

128M 是 php 5.3 中 memory_limit 的默认值

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-09-20T22:42:24.607

对我来说，它也忽略了 php.ini，我必须执行以下操作：

```
vim /etc/php-fpm.d/www.conf

php_admin_value[memory_limit] = 10000M ;128M 
```

然后重启php-fpm：

```
service php-fpm restart 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-08-02T16:13:14.770

仅供参考，

您还应该检查**/etc/php5/fpm/pool.d**中的任何文件。

它只是发生在我身上，无论我在 /etc/php5/fpm/php-fpm.conf 上写了什么，它都会被 /etc/php5/fpm/pool.d/www.conf 覆盖！

因此，如果上述答案都不适合您，您应该检查一下（我刚刚为此浪费了半个小时）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-01-24T04:30:36.980

现在也遇到了这个问题，想在 DigitalOcean 液滴中增加我们服务器的内存

总而言之，这就是我所做的

```
sudo nano /etc/php5/fpm/php-fpm.conf

-- press Ctrl-W to do a search in nano text editor
-- if php_admin_value[memory_limit] is there, change it
php_admin_value[memory_limit] = 512M

sudo service php5-fpm restart 
```

您不需要重新启动nginx，只需重新启动**php**就足够了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-18T02:54:42.003

好的，这很愚蠢，但我将 memory_limit 设置为 2GB，这是不明白的。当我将其更改为 2000M 时，它起作用了！

# scala - 如何替换 Dispatch 中的默认线程池？

> ID：15962637
> 
> 赞同：2
> 
> 时间：2013-04-12T03:38:17.383
> 
> 标签：scala, scala-dispatch

如何替换 Dispatch 中的默认线程池？我在这里看到了实例化 CachedThreadPool 的[https://github.com/dispatch/dispatch/blob/master/futures/src/main/scala/Futures.scala 。](https://github.com/dispatch/dispatch/blob/master/futures/src/main/scala/Futures.scala)我想改用 FixedThreadPool 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:07:54.787

好吧，对不起，伙计们。快速查看 Dispatch 的来源表明我可以通过`setExecutorService`of传递我的线程执行程序`Http.configure`。

例如

```
val pool: ExecutorService = Executors.newFixedThreadPool(4)
val httpClient: Http = Http.configure(_.setAllowPoolingConnection(true).setFollowRedirects(true).setConnectionTimeoutInMs(1000).setExecutorService(pool)) 
```

# javascript - javascript代码（新行，循环）

> ID：15962639
> 
> 赞同：0
> 
> 时间：2013-04-12T03:38:20.120
> 
> 标签：javascript, loops, newline, space

所以我正在做一项任务，我现在难以置信地卡住了几步，直到完成。这是我到目前为止的代码，我需要做的是首先将“var week”放在一个新行上，我尝试了多种 /n 方法，但每次它要么破坏脚本，要么什么都不做。另外我需要做的另一件事是创建一个循环，它将显示每月的每一天（例如，周一 1、周二、周三 3 等，直到显示四月的所有日子），对于我的一生，我可以不知道如何做到这一点，所以任何人都可以帮助我提供一些关于如何将它们组合在一起的提示吗？是的，我已经搜索了很长时间关于如何创建空间的问题，但没有任何结果有帮助。

编辑：我更新了代码我终于想出了如何显示日期，但我不知道如何显示它们之后的数字，我也想出了如何换行，对于大量的文字感到抱歉。

```
 <script>
    var monthArray=["January","February","March","April","May","June","July","August","September","October","November","December"];
    var weekDaysArray=["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"];
    //The comments below are for the current date but I was not sure if we were supposed to show that
    //var todaysDate=new Date();
        //document.write(todaysDate);
    var currMon=monthArray[3];
        document.write(currMon);
        document.write("\n");
    var d = new Date();
    var currYr = d.getFullYear();
        document.write(currYr +"<br>");
    var week="Week 1 of April.";
        document.write(week +"<br>");
    for (var i=0;i<weekDaysArray.length;i++)
    { 
        document.write(weekDaysArray[i] + "<br>");
    }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:41:49.067

在 HTML 中，空格是压缩的。如果您在源代码中编写换行符，它不会显示在 HTML 中（除非您使用 CSS 或`<pre>`）。这同样适用于 JavaScript 生成的换行符。

尝试`document.write("<br>");`

# responsive-design - 创建响应式网站的最佳框架？

> ID：15962644
> 
> 赞同：0
> 
> 时间：2013-04-12T03:39:00.887
> 
> 标签：responsive-design

我需要很多时间来创建响应式网站。需要在使用媒体查询对 css 进行自定义后创建普通网站。我想我可以保证我的时间。有时我浏览并找到一个框架：[amazium](http://www.amazium.co.uk/)。我的问题是，最好的框架或任何其他方法可以轻松快速地创建任何响应式网站吗？我需要任何建议来确保我的时间安全。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T03:44:13.150

你可以使用像[Zurb Foundation 4](http://foundation.zurb.com/)这样的框架，这是一个强烈推荐的响应式前端框架。它具有*流畅的布局*、*响应式设计*和*网格系统*。

*   入门文档： http: [//foundation.zurb.com/docs/](http://foundation.zurb.com/docs/)
*   Marakana TechTv 视频：[http ://www.youtube.com/watch?v=1HvE1h9gN8M](http://www.youtube.com/watch?v=1HvE1h9gN8M)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T03:43:01.367

这取决于您的需求，但您应该查看[Bootstrap](http://twitter.github.com/bootstrap/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T03:42:32.787

[Bootstrap](http://twitter.github.io/bootstrap/)将是我的首选。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T03:42:49.473

响应式网站与框架无关。大部分时间是关于如何组织网页以及如何使用框架。

# android - Android- Thread.join() 导致应用程序挂起

> ID：15962646
> 
> 赞同：10
> 
> 时间：2013-04-12T03:39:10.090
> 
> 标签：android, multithreading

我有一个处理我的游戏循环的线程，当我在这个线程上调用 .join() 时，应用程序停止响应。我一直在尝试解决程序永远无法访问代码的问题，即线程永远不会结束。

```
System.out.println("YAY"); 
```

我的游戏循环线程：

该线程成功打印出“游戏结束”，但似乎从未完成。

```
Runnable startGameLoop = new Runnable() {//game loop
          @Override
          public void run() {

              AiFactory ai = new AiFactory();
              final Button play = (Button) findViewById(R.id.Play);
              final Button pass = (Button) findViewById(R.id.Pass);

              while(finish==false){
                  try {
                        Thread.sleep(500);
                  } catch (InterruptedException e) {
                        e.printStackTrace();
                  }
                  currentPlayer = game.getPlayer();

                  if(currentPlayer.isPlayer()==false){

                      //System.out.println("passCount:" +game.getPasscount());
                      ai.decide(nextPlay, game.getPreviousPlayed(), currentPlayer, game.getPasscount() );
                      if(nextPlay.size()!=0){
                          runOnUiThread(new Runnable(){
                            public void run(){
                                changeArrow();
                                if(nextPlay.size() ==1){
                                    play1Card();
                                }
                                else if(nextPlay.size()==2){
                                    play2Card();
                                }
                                else if(nextPlay.size()==3){
                                    play3Card();
                                }
                                else if(nextPlay.size()==5){
                                    play5Card();
                                }
                            }
                      }
                      else{
                          game.addPassCount();
                          game.nextTurn();
                          runOnUiThread(new Runnable(){
                                public void run(){
                                    changeArrow();
                                }
                            });
                      }     
                   }
                   else if (currentPlayer.isPlayer()==true){
                      runOnUiThread(new Runnable(){
                            public void run(){
                                changeArrow();
                                play.setClickable(true);
                                 if(game.getPasscount()==3){
                                     pass.setClickable(false);
                                 }
                                 else{
                                     pass.setClickable(true);
                                 }
                            }
                        });
                  }

             }
             System.out.println("Game Ended");
          }
     }; 
```

启动线程并将其加入主线程：

```
 Thread myThread = new Thread(startGameLoop);

     myThread.start();
     try {
        myThread.join();
    } catch (InterruptedException e) {
            // TODO Auto-generated catch block
        e.printStackTrace();
    }

     System.out.println("YAY");
} 
```

据我了解 .join() 使当前线程等到新线程完成后再继续。

抱歉，如果这是一个愚蠢的问题，我对线程很陌生。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T03:41:21.093

Thread.join 使当前线程等待，直到您调用它的线程结束。它不会导致您调用它的线程结束。因此，如果该线程永无止境（如您在顶部所说），则调用 join 将使其永远挂起。

如果您想真正结束线程，请在其上调用取消。但这需要您的线程偶尔调用 isCanceled() 并在返回 true 时退出其运行函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-12T05:23:23.600

当您`myThread.join()`在内部调用时，`Activity.onCreate`您会阻塞主 UI 线程。当然，看起来您的应用程序已停止响应，因为 UI 线程是负责重绘 UI 的线程。您的所有调用都`runOnUiThread`不会发生，因为您的 UI 线程正忙于等待您的游戏循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T04:46:38.973

mythread.join() 不能确保您的“mythread”结束。

您需要在游戏循环中放置一个 notify()。

……

```
System.out.println("Game Ended");
synchronized(mythread){
    mythread.notify();
} 
```

基本上，当您调用 wait() 时，代码会在线程的监视器上等待，而对 notify() 的调用会导致在对象的监视器上等待的线程被唤醒。此外，您可以使用 notifyAll() 唤醒所有等待的线程。

或者，您可以使用 wait() 的超时版本，线程等待直到收到通知或超时。

# json - 使用标头 application-json 在 curl 请求中发送文件

> ID：15962654
> 
> 赞同：0
> 
> 时间：2013-04-12T03:40:13.517
> 
> 标签：json, curl

我正在尝试在 curl 请求中以 json 格式发送数据。所以我的身体是这样的

```
$body = json_encode($array);
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');
curl_setopt($ch, CURLOPT_POSTFIELDS, $body);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
'Content-Type: application/json',
'Content-Length: ' . strlen($body),
'Content-Md5: ' . base64_encode(md5($body, true))
)); 
```

我可以通过这种方式设置内容标头 --header "Content-Type: application/json" 但是当我的内容主体有要发送的文件时，内容类型标头 application/json 会起作用吗？如果我的正文中有文件，我需要更改内容类型标题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:13:35.237

不，是的，如果您正在谈论模拟浏览器以“选择”文件并将它们“上传”到服务器，那么标题将更改为

```
Content-Type: multipart/form-data; 
```

另一方面，如果您正在谈论在命令行上使用文本文件代替长字符串，那么不会。[使用 curl 命令行在 send/post xml 文件](https://stackoverflow.com/questions/3007253/send-post-xml-file-using-curl-command-line)中阅读答案中的注释

# python - Windows 上 Python 的“easy_install” - HtmlCSSInclude

> ID：15962662
> 
> 赞同：0
> 
> 时间：2013-04-12T03:42:15.577
> 
> 标签：python

我刚刚在我的 Windows 2003 服务器上安装了 Python 2.7 和 easy_install-2.7.exe，然后将 %PATH% 设置为 C:\Python27;C:\Python27\Scripts;。然后我尝试用easy_install安装python包，但是easy_install失败了。失败如下：

```
C:\>easy_install HtmlCssInclude
Searching for HtmlCssInclude
Reading http://pypi.python.org/simple/HtmlCssInclude/
Best match: HtmlCssInclude 0.1.2
Downloading http://pypi.python.org/packages/source/H/HtmlCssInclude/HtmlCssInclu
de-0.1.2.tar.gz#md5=0b4438bf62ae66842a514dcff67c0cd7
Processing HtmlCssInclude-0.1.2.tar.gz
Running HtmlCssInclude-0.1.2\setup.py -q bdist_egg --dist-dir c:\docume~1\admini
~1\locals~1\temp\1\easy_install-qpossf\HtmlCssInclude-0.1.2\egg-dist-tmp-haku7q
C:\Python27\Lib\distutils\dist.py:267: UserWarning: Unknown distribution option:
 'auther'
  warnings.warn(msg)
warning: no files found matching 'testdata'
error: Setup script exited with error: can't copy 'sample.css': doesn't exist or
 not a regular file 
```

任何人请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:47:41.477

我尝试编辑这个包并安装它。下载包并编辑 HtmlCssinclude.py。此外，我发现此软件包安装不需要对“sample.css”和“testdata”的引用。所以我也删除了那些参考。这有助于我从本地文件夹安装软件包。

# c# - How to share one value among multiple objects? C#

> ID：15962663
> 
> 赞同：2
> 
> 时间：2013-04-12T03:42:23.253
> 
> 标签：c#

Is it possible to have some variable shared between some objects of the same class such that, when the value is changed in one object, it will also change in the other object? Static variables would not work in this case, because there could be 2 objects that all have some related variable and another 2 objects that have a different related variable.

For example, say I have 4 squares that are arranged to make one large square, and the squares coordinates lie in an x,y,z plane. When the 4 squares are together, they would all have a point that lies in the center of the biggest square.

![](https://www.math.ucla.edu/~ronmiech/Calculus_Problems/32B/chap13/section6/865d11/IMG00002.GIF)

Pretend this square also has a z coordinate. Now, the squares will all share the point that lies in the center. The top left square's bottom right corner, the top right square's bottom left corner, etc., will all have the same (x, y, z) value.

Now what I want, is such that if the z value of one square changes, they will all change without any extra code, like they all point to the same memory location, so they "automatically" update in a sense.

Is something like this possible?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:18:58.303

Here is one way you could do this. Each square's data property is pointing to the same reference.

```
class Square 
{
     private SharedData Data;

     public Square(SharedData data)
     {
        this.Data = data;
     }
}

class SharedData
{
     public double Z { get; set; }
} 
```

* * *

```
SharedData data = new SharedData() { Z = 100.0 }

Square topLeft = new Square(data);
Square topRight = new Square(data);
Square bottomLeft = new Square(data);
Square bottomRight = new Square(data); 
```

* * *

You can put `SharedData` behind an interface that provides read-only access to the squares if you wish. If the squares are not supposed to modify the value of Z this would be a safer approach.

```
interface IReadOnlyData
{
    double GetZ();
}

class SharedData : IReadOnlyData
{
     public double Z { get; set; }
     IReadOnlyData.GetZ() { return Z; }
}

class Square
{
    private IReadOnlyData Data;

    public Square(IReadOnlyData data)
    {
        this.Data = data;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T03:48:19.903

I think you are thinking about this the wrong way. If all of the squares are to be treated as logically one object, make one object that encapsulates all of them and provides the logic you want. You shouldn't have objects sneakily mutating other objects' values behind their backs, IMO.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T12:25:19.167

Implement the observable pattern.

Check this post: [Super-simple example of C# observer/observable with delegates](https://stackoverflow.com/questions/1249517/super-simple-example-of-c-sharp-observer-observable-with-delegates)

Hope it helps you.

# ruby-on-rails - heroku ssl 端点添加证书给出内部错误，更新首先给出未定义的 nil

> ID：15962664
> 
> 赞同：1
> 
> 时间：2013-04-12T03:42:30.047
> 
> 标签：ruby-on-rails, ssl, heroku, endpoint

我的 SSL 证书过期了，所以我按照说明创建了一个 csr，激活我更新的证书，并将密钥和证书放在一起。从comodo到namecheap。现在更新说：

> $ heroku certs:update reserver.pem reserver.key c:/Program Files (x86)/Heroku/lib/heroku/command/certs.rb:110:in `current_endpoint': undef ined method`first' for nil:NilClass (NoMethodError) from c:/Program Files (x86)/Heroku/lib/heroku/command/certs.rb:79:in `update' from c:/Program Files (x86)/Heroku/lib/heroku/command.rb:148:in`run' from c:/Program Files (x86)/Heroku/lib/heroku/cli.rb:9:in `start' from c:/Program Files (x86)/Heroku/bin/heroku:28:in`'

并现在添加与其他问题 [Heroku SSL EndPoint 相同的内容 - 更新证书给出内部服务器错误](https://stackoverflow.com/questions/14945971/heroku-ssl-endpoint-update-cert-gives-internal-server-error) ：

> $ heroku certs:add reserver.pem reserver.key 将 SSL 端点添加到

大多数其他 heroku certs 命令也存在与 nil 的未定义方法有关的问题。

我已经多次重复这个过程，我相信我的证书是好的。欢迎其他想法进行故障排除或修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:27:41.863

对我有用的解决方案是在新计算机上重新开始并下载并安装最新的 heroku 工具箱（并手动更新路径以使用新的 heroku 命令）。我怀疑在旧电脑上做同样的事情也会解决这个问题。

# asp.net-mvc - ASP MVC SimpleMembership 和 WebSecurity

> ID：15962675
> 
> 赞同：0
> 
> 时间：2013-04-12T03:43:22.587
> 
> 标签：asp.net-mvc, security, membership

我正在为一个学校项目构建一个大型应用程序，分为几层，分别是表示层（使用 asp mvc 4 的 Web 服务器）、逻辑层和数据层。

我对asp mvc有点陌生，并且对注册/登录机制有一个想法。到目前为止，使用新项目模板中的 simplemembership 和 websecurity 似乎非常好。但是问题来了：上面提到的需要连接到数据库才能完成它的工作，而 Web 服务器不会直接使用数据库，而是逻辑层 api 方法来验证和创建新用户。我应该使用什么来实现与 WebSecurity 类似的功能来管理所有登录/注册和会话相关的东西？

# r - 关于在 minpack.lm 包中使用 NLS.LM 的问题

> ID：15962677
> 
> 赞同：0
> 
> 时间：2013-04-12T03:43:39.490
> 
> 标签：r, parameters, calibration, par

我正在尝试使用 R 中的 minpack.lm 包。特别是 NLS.LM 函数。我正在翻阅手册和帮助文件，但设置它的要求有点超出我目前的能力。非常感谢任何指导。这是我的代码，以及我得到的错误声明，如下所示。

代码：

```
# Thomas P. Taggart
# ERE445/645
# Spring 2013 - Calibration Presentation

# Lumped parameter rainfall-runoff model for the Susquehanna River at Conklin, NY. 
# Outlined in Haith's (1987) GWLF model. The model uses the SCS curve 
# number runoff technique to determine runoff, with snowpack, unsaturated zone, and 
# saturated zone mass balances. Evapotranspiration is to be determined using Hamon’s 
# method with average monthly values for daylight hours. 
# In this model we assume the following constants, which are determined through calibration:
# Baseflow Recession Coefficient, Kb
# Field capacity, FCAP
# Curve number for average moisture conditions, CN2 
# Initial antecedent moisture conditions, iAMC
# Initial snow accumulation, iSNt
# Initial saturated zone storage, iSATt
# No deep groundwater seepage

# including needed functions
source("Functions.R")
source("distributionFunctions.R")
source("GWLF_Model.R")

require(ggplot2)
require(reshape)
library(minpack.lm)
library(scales)  

###############################################################################################
# USGS Discharge data for Conklin, NY - Gage on the Susquehanna

# Reading in the input file
dischargeInput <- read.csv("USGS_DailyDischarge_ConklinNY_01503000_A.csv", header=TRUE)

###############################################################################################
# Weather Data

# Read in input file
weatherInput = read.csv("Conklin_NY_WeatherData_Edit.csv")

###############################################################################################
# Setting up the model inputs - inital Run

# Baseflow Recession, Kb 
Kb <- 0.90

# Initial unsaturated storage is at field capacity, FCAP (cm)
FCAP <- 10

# Curve number for average moisture conditions, CN 
CN <- 65.7

# Initial antecedent moisture conditions, AMC 
AMC <- 1.5

# Initial saturated zone storage, SATt 
iSATt <- 0.45

# Snowmelt constant, K
K <- 0.45

parameters <- c(Kb, FCAP,CN, AMC, iSATt, K)

# Calling the Model - 1st time to see the initial outputs
# GWLF(parameters, dischargeInput, weatherInput)

###############################################################################################
# Calibrating the model

guess <- c("Kb"=0.1, "FCAP"=1,"CN"=50, "AMC"=0, "iSATt"=0, "K"=0.5)

out <- nls.lm(par = guess, fn = GWLF(parameters, dischargeInput, weatherInput)) 
```

这是错误消息：

```
Error in function (par)  : could not find function "fn" 
```

我需要如何设置标准杆？还是我在 nls.lm 中调用的函数中的第一个参数？GWLf 函数被传递了 6 个参数，这些参数在函数中用作常量。这些是我希望校准的 6 个参数。

谢谢，汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:52:54.560

从阅读`?nls.lm`

您需要传递函数，而不是调用函数

```
out <- nls.lm(par = guess, fn = GWLF, dischargeInput, weatherInput) 
```

注意额外的参数（我假设是数据）在内部传递`...`

使用您希望它们包含的任何参数名称来命名这些参数会更安全`GWLF`。

# c# - 使用排序的整数数组键快速查找整数索引值

> ID：15962679
> 
> 赞同：2
> 
> 时间：2013-04-12T03:43:39.850
> 
> 标签：c#, hash, map, dictionary

我正在寻找使用排序整数数组键查找整数值的最快解决方案。

Keys 是整数数组，固定长度为 3，每个数组都经过排序。
值是一个整数。

我的数据保证只有一个或两个具有相同内容的排序数组。每个数组都有一个唯一的索引。

我正在尝试找到匹配的数组对。

我的想法是使用字典（我在 C# 中进行原型设计并将转向 C++）

对于每个数组，我会在字典中查找它是否已经存在。如果是，我将其从字典中删除。如果我在字典中没有找到它，那么它要么是单例，要么是匹配对中的第一个，所以我会将它添加到字典中。

我的问题是——然后对数据给出非常具体的保证，最好的容器是什么——因为速度是我最关心的问题？此外，任何关于适当（快速）散列函数或排序整数数组比较函数的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:12:42.023

当你使用 C++ 时，迁移到这个

[http://sparsehash.googlecode.com/svn/trunk/doc/dense_hash_map.html](http://sparsehash.googlecode.com/svn/trunk/doc/dense_hash_map.html) （项目[在这里](http://code.google.com/p/sparsehash/?redir=1)。）

这是我遇到过的最快的 hashmap 实现之一。

同时，对于 C#，等价物将是这样的：http: [//msdn.microsoft.com/en-us/library/xfhwa508.aspx](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx) 我想有更快的字典实现可用，但由于 C# 不是最终的容器，它应该做得很好。

您可能想考虑在您的项目中包含 berkeleydb。它非常快，并且在数据集增长时也可以管理存储。它还支持多种平台。

# bit-manipulation - 按位检查数字是否为 -1

> ID：15962682
> 
> 赞同：2
> 
> 时间：2013-04-12T03:44:10.573
> 
> 标签：bit-manipulation

我必须创建一个函数来检查输入数字是否为-1。这是要求

```
isTmin - returns 1 if x is the minimum, two's complement number, and 0 otherwise 
Legal ops: ! ~ & ^ | +
Max ops: 10
Rating: 1 
```

首先我试试这个：

```
int isTmin(int x) {
  return !(x^(0x01<<31));
} 
```

这种方法有效，但我不允许使用移位运算符。有什么想法如何在不使用移位运算符的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:01:07.810

```
int isTmin(unsigned x) {
    return !x ^ !(x+x);
} 
```

请注意，您需要`unsigned`在 C 中使用二进制补码数学和正确的包装——`int`及其实现/未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:52:02.233

如果它唯一需要检查的是它是否为 0xffff ffff，那么：

```
return x^0xffffffff == 0 
```

仅当 x 也是 时才成立`0xffffffff`。

# angularjs - RangeError：超出最大调用堆栈大小

> ID：15962684
> 
> 赞同：20
> 
> 时间：2013-04-12T03:44:19.300
> 
> 标签：angularjs

我想这意味着有一个循环引用，但对于我的生活，我无法猜测如何解决它。

有人有想法么？

[http://plnkr.co/edit/aNcBcU?p=preview](http://plnkr.co/edit/aNcBcU?p=preview)

检查 Chrome 中的调试控制台（例如），您会看到错误。违规行是

```
 scope.map = map; 
```

scope.map 正在控制器上通过“$watched”

```
$scope.$watch("options.map", function (map) { ... }, true); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-12T05:01:18.063

这是因为您正在比较对象是否相等而不是参考。`$watch`将您的声明更改为：

```
$scope.$watch("options.map", function (map) {
    if (map === undefined) {
        alert("map has no value");
    } else {
        alert("map is defined");
    }
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-05-03T14:34:31.407

我也遇到了这个问题，发现我正在比较的对象有循环引用。（尝试`JSON.stringify()`抛出“TypeError：将循环结构转换为 JSON”）。

当我编辑我的对象以使其没有循环结构时，我解决了这个问题，并且不是通过引用而是通过属性值来比较对象，这正是我所需要的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-11T02:45:05.833

$watch 函数的第三个参数告诉如何比较被监视的对象。仅参考比较是**错误的。****真正**的递归相等比较，如果一个对象包含循环引用，那么超过最大堆栈大小。例如：

```
var a = {ref:b};
var b = {ref:a};
$scope.$watch('b', function(){
  //code here will never called, because stack overflow when comparing the object b. 
}, true) 
```

# ssis - ssis oledb 源，未找到 as400 参数

> ID：15962687
> 
> 赞同：0
> 
> 时间：2013-04-12T03:44:25.697
> 
> 标签：ssis

我正在使用 ssis 2008，并且正在尝试从 as400 数据库中获取数据。

我有一个数据流任务，在其中，我有一个 Oledb 源，在那里，我有 Sql 命令的数据访问模式，我有一个查询：

```
select *
from table1
where name = ? 
```

然后我单击“参数”按钮并为我的参数名称设置“name1”。当我运行 ssis 时，出现错误：

> 错误：SQL 命令需要一个名为“00001”的参数，在参数映射中找不到该参数。

所以我将参数名称更改为 ""00001"" 并且 ssis 工作正常。

现在，问题是同样的 ssis 需要在另一台 as400 服务器上运行，而且更旧的服务器，当它运行时显示错误：

> 错误：SQL 命令需要一个名为“”的参数，在参数映射中找不到该参数。

因此，现在其他服务器需要不同的参数名称。

为了避免这个问题，是否有另一种使用不同于 Oledb Source 的东西来完成这个过程的方法？

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:33:09.580

我们正在使用 sql 2012 和 as400 系统，我们使用 as400 的 ODBC 源。对于我们的设置，它似乎正在工作。所以试试 ODBC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T22:25:39.620

好吧，这似乎是一个 as400 错误，如下所示：[链接] [http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/5d6ef4f9-1a67-45d1-8a49-eb08becf1408/](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/5d6ef4f9-1a67-45d1-8a49-eb08becf1408/)

在该线程上，一位用户说：“此错误与 IBM Client Access Tools 的 IBMDA400 直接相关。驱动程序将参数传递给 AS/400 时存在错误。我已经使用 HiT Software 的第三方驱动程序证明了这一点. 使用他们的驱动程序传递 00001 是正确的。”

因此，正如我所见，您使用的方法无关紧要，为了使其正常工作需要做的是传递具有 AS400 所需名称的参数。如果传递了具有正确名称的参数，则查询将正常工作。

# java - Java 文件服务器/套接字

> ID：15962695
> 
> 赞同：0
> 
> 时间：2013-04-12T03:45:41.797
> 
> 标签：java, fileserver

对于一个项目，我正在制作一个文件服务器套接字。套接字连接工作得很好。但是，当客户端连接到服务器时，服务器应该将包含某个目录（在我的情况下为 -docs/- 目录）中的所有文件名的字符串传递给客户端。有人可以向我指出一些有用的代码，其中所有文件名都被检索并作为单个字符串传递给客户端吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:48:31.663

使用 File 类从目录中获取文件列表。遍历文件以形成要传回客户端的字符串（文件名）。

在这些线上尝试一些东西-

```
 final File folder = new File("docs");
    final File[] files = folder.listFiles();
    final StringBuilder filenames = new StringBuilder();
    for(File file : files) {
        filenames.append(file.getName());
        // append separator if required
    } 
```

# memory-management - 页面错误，二级内存地址存储在哪里

> ID：15962698
> 
> 赞同：0
> 
> 时间：2013-04-12T03:46:06.473
> 
> 标签：memory-management, operating-system, hardware, paging, tlb

当发生 TLB 未命中，并且该页面未驻留在物理内存中时，该页面将被写回物理内存并更新页表和 TLB。

但是辅助存储器的地址存储在哪里？它如何知道在磁盘上哪里可以找到数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T06:29:57.417

内存管理器维护一个数据结构，在这个数据结构中，给定一个虚拟地址，它可以在磁盘/交换文件中找到相应的位置。

显然，搜索键不仅仅是地址，它是当前地址空间或当前进程的地址和 ID 的对（您需要区分进程 1 中的地址 0x8000 和错误在进程 2 中使用相同的地址 0x8000，因为它们可能不会在 0x8000 处共享内存）。

页表条目在这里可能很有用。当虚拟到物理映射有效时，它们存储物理地址。当它无效时（因为换出到磁盘），地址可以设置为您喜欢的任何内容。您可以将磁盘上的位置存储在其位置。但是，如果您想避免每次重用页面时都将未更改页面的内容写入磁盘，并且它们的内容先前已写入磁盘并且仍然与内存中的内容匹配，那么这不是一个好主意。PTE 不能同时拥有两个不同的地址（物理地址和磁盘）。因此，应使用专用数据结构而不是 PTE。

# c# - 不连续地从 IBM MQ Queue 读取消息

> ID：15962699
> 
> 赞同：2
> 
> 时间：2013-04-12T03:46:12.360
> 
> 标签：c#, .net, ibm-mq

当我在导入队列中有 2000 条消息时，当我通过这样的方式阅读它时

```
MQQueue mqQueue = null; 
MQQueueManager mqQMgr=null;  
try
{
  //Create connection to queue manager
   mqQMgr = new MQQueueManager("Queue Manager name", properties);
  //Access the queue
    mqQueue = mqQMgr.AccessQueue(QueueName, MQC.MQOO_FAIL_IF_QUIESCING | MQC.MQOO_INPUT_SHARED | MQC.MQOO_BROWSE);
   for(int i=1;i<2000;i++)
  {
    //read the messages
    mqMsg=new MQMessage();
    mqQueue.Get(mqMsg);
  }
}
catch(MQException mqe)
{  
  //If no messages in the queue , break. (if not, catch any error)
}
finally
{
     mqQueue.Close(); //Close the MQ Queue
     mqQMgr.Disconnect(); //Disconnect the MQ Manager
} 
```

每次我阅读时，经理都会随机处理，例如前 800 条消息，然后它会返回

> “MQRC_HANDLE_NOT_AVAILABLE”（comp 代码：2，原因代码：2017）。

我没有在上面的代码中关闭队列/管理器吗？请分享您的想法，以便处理所有消息。我通过 MQ.net 类使用 7.5 MQ 客户端。日志文件包含以下信息。

> AMQ9051：WebSphere MQ 找不到安全策略定义。Compcode 2：原因 2017 解释：未定义安全策略定义。操作：必须在此操作之前定义安全策略定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:29:37.747

我尝试了您的示例代码片段，对我来说效果很好。我没有看到 2017 年的错误。

错误日志中的条目可能与您的问题有关。您是否为队列设置了安全策略并期望将签名/签名和加密的消息放入/获取/从队列中？与 IBM 开票/PMR 可能是值得的。

# jquery - 单击自身后如何更改按钮颜色？

> ID：15962703
> 
> 赞同：2
> 
> 时间：2013-04-12T03:46:26.877
> 
> 标签：jquery, jquery-mobile, themeroller

我在[http://jquerymobile.com/themeroller/](http://jquerymobile.com/themeroller/)上创建了 3 个主题。每个主题都有不同的按钮颜色。我尝试将以下按钮主题从数据主题 a 更改为数据主题 c：

```
<button data-icon="star" data-theme="a" data-form="ui-btn-up-a" id="btnA" class="ui-btn-hidden" data-disabled="false">0,2 m3</button> 
```

使用此功能：

```
$("#btnA").click(function()
{
    $("#btnA").buttonMarkup({theme: 'c'});
}); 
```

但颜色`btnA`不变。我该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:39:35.963

一旦你在按钮上设置了主题，你需要`refresh`像下面这样调用它......

```
$("#btnA").click(function() {
    $(this).attr("data-theme","c").button('refresh');
}); 
```

享受...

# android - 在 GridView 或 ListView 的底部添加额外的空间

> ID：15962705
> 
> 赞同：5
> 
> 时间：2013-04-12T03:46:37.697
> 
> 标签：android, android-gridview

是否可以在 GridView 的底部添加额外的空间（有点像空行）？

我想要它，所以当您向下滚动到 GridView 的底部时，会有额外的 50dp 空白空间。我尝试设置`paddingBottom`为 50dp，但它似乎没有改变任何东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-09-12T07:19:11.810

如果我理解正确，它应该是这样的：

![](https://i.stack.imgur.com/W1ALT.gif)

为此，Maciej 在这里提到了一个简单的解决方案：[如何在 GridView 的底部添加额外的空间](https://stackoverflow.com/questions/25788383/how-to-add-extra-space-inside-at-the-bottom-of-a-gridview)

您只需要在 GridView 布局中添加以下内容：

```
<GridView
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="50dp"
android:clipToPadding="false"/> 
```

最重要的部分是必须设置为 false 的 clipToPadding 属性。

您还可以查看来自 Google 的相应博客文章，其中提到了此解决方案：https: [//plus.google.com/+AndroidDevelopers/posts/LpAA7q4jw9M](https://plus.google.com/+AndroidDevelopers/posts/LpAA7q4jw9M)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T07:58:22.073

您可以实现自己的 GridViewAdapter 扩展 ArrayAdapter 并且：

```
@Override
public int getCount() {
    return gridArray.size();
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    //...
    if (getCount()-1 == position) {
        convertView.setPadding(0, 0, 0, 50);
    } else {
        convertView.setPadding(0, 0, 0, 0);;
    }
    return convertView;
} 
```

其中 50 是以像素为单位的底部填充，[请参阅 View.setPadding(int, int, int, int)](http://developer.android.com/reference/android/view/View.html#setPadding%28int,%20int,%20int,%20int%29)

你 GridItemView 布局桅杆是 **android:layout_height="wrap_content"**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:55:27.903

使用 ListView 可以添加页脚，不幸的是 GridView 不支持它。我建议添加一个具有您想要的高度的空行是最干净的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T03:50:37.923

尝试将 paddingBottom 添加到其内部的容器中。列表视图上的 PaddingBottom 将不起作用，因为列表视图会将其添加到其最后一个元素之后，该元素不会出现在屏幕上。它有点假装它有无限的高度。

另一种解决方案是使用RelativeLayout 并推动一个具有固定高度但在底部和GridView 之间没有图形元素的视图，并将GridView 设置为该视图的layout_above。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T03:51:25.333

尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:orientation="vertical" >

        <GridView
            android:id="@+id/gridUsers"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:clipChildren="true"
            android:columnWidth="100dp"
            android:fastScrollEnabled="true"
            android:gravity="center"
            android:numColumns="auto_fit"
            android:scrollbars="none"
            android:stretchMode="columnWidth" >
        </GridView>

        <TextView
            android:id="@android:id/empty"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:padding="10dp"
            android:textColor="#f1f1f1"
            android:textSize="15sp"
            android:textStyle="bold"
            android:visibility="gone" >
        </TextView>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linlaProgressBar"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:gravity="center"
        android:orientation="horizontal" >
    </LinearLayout>

</LinearLayout> 
```

我在一个应用程序中使用它，其中`LinearLayout`id`linlaProgressBar`用作`ProgressBar`加载更多数据时的容器。

此示例显示 a`GridView`但将其替换为 a`ListView`将获得相同的结果。

# java - 只能导入一个类型。ABC 解析为一个包

> ID：15962709
> 
> 赞同：11
> 
> 时间：2013-04-12T03:47:21.850
> 
> 标签：java, jsp

（我已经阅读了有关此主题的其他问题，但没有一个有帮助）

好的，我正在尝试将 Java 类导入到我的 JSP 文件中，但是 Tomcat 给了我错误：

> org.apache.jasper.JasperException：无法为 JSP 编译类：
> 
> ```
> An error occurred at line: [16] in the generated java file: [I:\path\to\index_jsp.java]
> Only a type can be imported. org.runas.XKCDUtils resolves to a package
> 
> An error occurred at line: 7 in the jsp file: /index.jsp
> XKCDUtils cannot be resolved 
> ```

```
4:  String data = null;
5:  int finalComic = 1;
6:  int comicNo = 1;
7:  finalComic = XKCDUtils.getFinalComic();
8: 
9:  if (request.getParameter("page") != null)
10:         comicNo = Integer.parseInt(request.getParameter("page")); 
```

我的 JSP 文件中的导入语句是：

```
<%@page import="java.io.*, java.net.*, org.runas.XKCDUtils" %> 
```

我的目录结构的相关部分是：

```
webapps
`-ROOT
 `-index.jsp
 |-WEB-INF
  `-web.xml
  |-classes
   `-org
    `-runas
     `-XKCDUtils.class 
```

我很困惑`org.runas.XKCDUtils resolves to a package`，因为它显然是一个类文件，在我认为是正确的目录中。

请帮忙！

（不要因为我使用脚本而责备我，我正在尝试清理它们！）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T07:17:00.540

好吧，这很奇怪。我将导入分为三个导入，

```
<%@page import="java.io.*" %>
<%@page import="java.net.*" %>
<%@page import="org.runas.XKCDUtils" %> 
```

它神奇地决定起作用。然后当我把进口改回来时，

```
<%@page import="java.io.*, java.net.*, org.runas.XKCDUtils" %> 
```

它神奇地决定继续工作。

也许它与重新启动Tomcat有关？好吧，无论如何，它现在可以工作了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-23T11:25:57.823

我有同样的问题; 通过停止服务器（在我的情况下为 Tomcat）并重建项目来解决。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-11T16:10:20.643

我不知道究竟是什么导致了错误，但我改变了

```
<%@page import="java.io.*, java.net.*, org.runas.XKCDUtils" %> 
```

至

```
<%@page import="java.io.*, java.net.*, org.runas.*" %> 
```

它奏效了。我对错误的解释是，由于某种原因，Tomcat 认为 XKCDUtils 是一个包，而不是包中的一个类。使用 * 导入则可以明确表示它正在导入类。

# css - 停止动画并在悬停时开始过渡

> ID：15962710
> 
> 赞同：22
> 
> 时间：2013-04-12T03:47:22.540
> 
> 标签：css

我有一个使用背景颜色运行无限动画的链接。我想停止动画并在悬停时过渡到不同的背景颜色。

```
.startlink{
    background-color:#206a9e;
    color:#fff;
    border-radius:15px;
    font-family: 'Myriad Pro';
    -webkit-animation:changeColor 3.4s infinite;
    -webkit-transition:all 0.2s ease-in;
}

.startlink:hover{
    -webkit-animation-play-state: paused;
    background-color: #014a2a;
}

@-webkit-keyframes changeColor 
{
    0%   {background:#206a9e;}
    50%  {background:#012c4a;}
    100%   {background:#206a9e;}
} 
```

为什么这段代码不起作用？还有其他方法可以完成这项工作吗？（最好没有Javascript）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-12T04:24:38.820

试试`-webkit-animation: 0;`。[演示在这里](https://codepen.io/rishabhp/pen/mXgYpy?editors=1100)。`0`是默认值`animation`或必须设置以禁用任何现有的 CSS3 动画。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-07T19:23:12.040

-webkit-animation-play-state：暂停和-webkit-animation-play-state：正在运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T04:28:33.247

找到了另一种方法来实现这一点。

编写另一个动画关键帧序列并在悬停时调用它。

```
.startlink{
background-color:#206a9e;
color:#fff;
border-radius:15px;
font-family: 'Myriad Pro';
-webkit-animation:changeColor 3.4s infinite;
-webkit-transition:all 0.2s ease-in;
}

.startlink:hover{
-webkit-animation:hoverColor infinite;
}

@-webkit-keyframes changeColor 
{
0%   {background:#206a9e;}
50%  {background:#012c4a;}
100%   {background:#206a9e;}
}
@-webkit-keyframes hoverColor 
{
background: #014a2a;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-05T00:03:33.760

我有同样的问题，我找到的解决方案如下。

创建您想要的动画，并为您和每个元素分配一个不同的类。

然后使用 [.mouseover()](https://api.jquery.com/mouseover/)或[.mouseenter()](https://api.jquery.com/mouseenter/) jQuery 事件在您分配给每个动画的类之间切换。

它类似于您用于汉堡菜单的内容，只是使用了不同的处理程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-26T14:16:28.300

我试图实现同样的事情，在尝试动态更改关键帧等之后，我通过使用基本 css 找到了一个奇怪的解决方案，请参见[fiddle](https://jsfiddle.net/gfvs6pqn/) here。它不是很优雅，但正是我（和你，我希望）想要的。

```
#menu, #yellow{
  position: fixed;
  top: 2.5vw;
  right: 2.5%;
  height: 25px;
  width: 25px;
  border-radius: 30px;
}

#menu{
  animation: blink 2s infinite;
	transition: 1s;
}

@keyframes blink{
  0% { background-color: grey; }
  50% { background-color: black; }
  100% { background-color: grey; }
}

#yellow{
	background-color: rgba(255, 0, 0, 0);
	transition: 1s;
}

#disque:hover #yellow{
	pointer-events: none;
	background-color: rgba(255, 0, 0, 1);
}

#disque:hover #menu{
	opacity: 0;
}
```

```
<div id="disque">
  <div id="menu"></div>
  <div id="yellow"></div>
</div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-23T09:11:46.187

对于那些对动画幻灯片感兴趣的人，在 2 个图像之间停止

```
var NumImg = 1; //Img Number to show
var MaxImg = 3; //How many Img in directory ( named 1.jpg,2.jpg ...)

function AnimFond() {
  NumImg = NumImg> MaxImg ? 1 : NumImg +=1;
  var MyImage = "http://startinbio.com/Lib/Images/Fond/" + NumImg + ".jpg";
  $("#ImgFond1").attr("src", MyImage);
  $("#ImgFond2").fadeOut(3000, function() {
    $("#ImgFond2").attr("src", MyImage);
    $("#ImgFond2").fadeIn(1);
  });
}

setInterval("AnimFond()", 10000); //delay between 2 img
```

```
#AnimFond {
  position: fixed;
  height: 100%;
  width: 100%;
  margin: 0 0 0 -8;
}

#AnimFond img {
  position: absolute;
  left: 0;
  height: 100%;
  width: 100%;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.2.3/jquery.min.js"></script>
<div id="AnimFond">
  <img id="ImgFond1" src="http://startinbio.com/Lib/Images/Fond/1.jpg" />
  <img id="ImgFond2" src="http://startinbio.com/Lib/Images/Fond/1.jpg" />
</div>
```

# google-sheets - Google 电子表格（显示过去一年）

> ID：15962712
> 
> 赞同：0
> 
> 时间：2013-04-12T03:47:37.303
> 
> 标签：google-sheets

我熟悉`=Today()`Google 电子表格中的功能。我将它作为我正在创建的报告的“结束日期”存储在一个单元格中。

想知道是否有一个功能可以让我显示从我的“结束日期”开始正好 1 年的过去，例如。`=Today()`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:32:48.210

找到了..很酷：

EDATE（开始日期，月）

我用 =EDATE(F5, -12)

f5 是 =Today()

现在显示两个日期...365 天

[https://support.google.com/drive/bin/static.py?hl=en&topic=25273&page=table.cs&ctx=tooltip](https://support.google.com/drive/bin/static.py?hl=en&topic=25273&page=table.cs&ctx=tooltip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:06:15.233

您还可以使用以下公式来完成此操作：

`=DATE(YEAR(A1)-1;MONTH(A1);DAY(A1))`

因为该`EDATE`功能仅限于几个月。

# javascript - 添加 DOM 元素，正确的做法是什么？

> ID：15962713
> 
> 赞同：18
> 
> 时间：2013-04-12T03:47:48.107
> 
> 标签：javascript, html, dom

*这个问题可能很愚蠢，也可能很基础。*

有人可以解释添加 DOM 元素的最佳方法吗？我们有这两种添加 DOM 元素的方法。

**场景：**需要`<strong>Hi</strong>`在现有的`<div id="theEl"></div>`.

1.  通过编辑其中的 HTML。

    ```
    document.getElementById("theEl").innerHTML = '<strong>Hi</strong>'; 
    ```

2.  通过使用`document.createElement()`.

    ```
    var hi = document.createTextNode("Hi"),
    strong = document.createElement("strong");
    strong.appendChild(hi);
    mydiv = document.getElementById("theEl");
    document.body.insertBefore(strong, mydiv); 
    ```

**问题**

1.  最好的方法是什么？一个是单行，另一个是大约五行。
2.  性能方面是什么？
3.  什么是正确的方法或最佳做法？
4.  整个代码之间有什么区别吗？

*如果这个问题根本没有意义，请告诉我，我很乐意关闭它甚至删除它。谢谢。*

* * *

**更新**

对于亲密的选民来说，这**不会**是那个问题的重复。我刚刚注意到的一件事是，使用`createElement()`保留了附加到元素的事件处理程序。尽管这是一个很好的观点，但任何类型的基本网页中也有 jQuery，它提供了委托和这样的东西，即使在 HTML 更改之后，我也可以将事件附加到元素上。

* * *

*伙计们，请在近距离投票时保持冷静。一种研究。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T04:07:56.557

没有“最佳”或“最佳实践”。它们是添加具有不同特征的内容的两种不同方法。你选择哪一个取决于你的具体情况。

对于创建大量元素，一次设置一个 HTML 块通常比创建和插入大量单个元素更快。尽管如果您真的关心这方面的性能，您将需要在 jsperf 之类的工具中测试您的特定情况。

对于创建具有大量精细控制的元素、从变量设置类、从变量设置内容等...，通过`createElement()`您可以直接访问每个元素的属性而无需构造字符串通常更容易做到这一点.

如果您真的不知道这两种方法之间的区别，并且看不到在特定情况下使用其中一种方法的明显理由，那么请使用更简单且代码更少的方法。我就是做这个的。

在回答您的具体问题时：

1.  没有“最好”的方式。选择最适合您的情况的方法。
2.  您将需要测试您的特定环境的性能。在某些情况下，通过设置一个大字符串`.innerHTML`而不是单独创建一个插入所有对象，大量的 HTML 已被证明更快。
3.  没有“正确方法”或“最佳实践”。请参阅答案#1。
4.  如果对这两种方法进行编码以创建相同的最终结果，则这两种方法创建的最终结果没有区别。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T04:06:58.670

我实际上喜欢两者的结合：`createElement`对于外部元素，您不会删除任何事件处理程序，`innerHTML`对于该元素的内容，为了方便和性能。例如：

```
var strong = document.createElement('strong');
strong.innerHTML = 'Hi';
document.getElementById('theEl').appendChild(strong); 
```

当然，当您添加的内容更复杂时，这种技术会更有用；那么您可以`innerHTML`正常使用（外部元素除外），但您不会删除任何事件侦听器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T04:11:33.177

> 1\. 最好的方法是什么？一个是单行，另一个是大约五行。

这取决于上下文。根据经验，您可能希望`innerHTML`谨慎使用。

> 2\. 什么是性能方面？

DOM 操作明显优于 DOM `innerHTML`，但浏览器似乎在不断提高`innerHTML`性能。

> 3\. 什么是正确的方法或最佳做法？

见#1。

> 4\. 代码整体有区别吗？

是的。innerHTML 示例将替换现有元素的内容，而 DOM 示例将新元素放在旧元素旁边。您可能打算写`mydiv.appendChild(strong)`，但这仍然不同。现有元素的子节点被追加而不是替换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T04:20:40.413

你说的最好是什么意思？仅在一次 DOM 操作中，一切都很好，并且表现出相同的性能。但是当你需要多个 DOM 插入时，事情就不同了。

**背景**

每次插入 DOM 节点时，浏览器都会渲染页面的新图像。因此，如果您在 DOM 节点中插入多个子节点，浏览器会多次呈现它。该操作是您将看到的最慢的操作。

**解决方案**

所以，我们需要一次追加大多数孩子。使用一个空的 dom 节点。内置的是`createDocumentFragment();`

```
var holder = createDocumentFragment();
// append everything in the holder
// append holder to the main dom tree 
```

**真正的答案**

如果是您所描述的情况，我更喜欢最短的解决方案。因为在一次 dom 操作中没有性能损失

# linux - 如何允许 GIT 存储库的组访问（Ubuntu）

> ID：15962725
> 
> 赞同：0
> 
> 时间：2013-04-12T03:49:12.707
> 
> 标签：linux, git, ubuntu, permissions

*   所以我有一个由 Gitosis 托管的 GIT 存储库。
*   我有一个名为 user1 的用户，当然还有用户 root。
*   user1 属于组'dev'
*   /var/www 由 root 拥有，并分组到 'dev'
*   该组的权限是 rwx
*   user1 已确认访问 git 存储库。我已经克隆了它，效果很好。

但是，当我尝试让 user1 在 /var/www 上提取 repo 时，我得到了

```
error: cannot open .git/FETCH_HEAD: Permission denied 
```

那么我还缺少什么。GIT 存储库已经是一个 --shared 存储库。出于某种原因，我无法让该用户使用 /var/www ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:55:53.557

事实证明，答案是将 .git 文件夹的 GROUP 更改为用户的 GROUP。我没有意识到 .git/FETCH_HEAD 是一个程序，并且访问被拒绝运行它。我认为这是一个 gitosis 的事情，但事实并非如此。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:11:42.740

您可以追溯修复它们（之后您将不需要配置设置）

```
chmod -R user:group /path/to/shared.git
find /path/to/shared.git -type d |xargs chmod 2775   # or 2770 if you don't want it public
find /path/to/shared.git -type f |xargs chmod 444    # or 440
find /path/to/shared.git/hooks   |xargs chmod ugo+x  # or ug+x 
```

# python - 在 Python 2.7 中保存带有嵌套类实例的字典

> ID：15962727
> 
> 赞同：0
> 
> 时间：2013-04-12T03:49:23.943
> 
> 标签：python, pickle, class-instance-variables

我试图让这个尽可能简单。基本上我希望将数据保存到一个文件中，然后检索它，以便 questor.py 工作并且可以“记住”它曾经在你的机器上教过的所有内容。原始代码可在网络上获得，网址为[http://www.strout.net/info/coding/python/questor.py](http://www.strout.net/info/coding/python/questor.py) 如果我没看错代码，您最终会得到一个类似于`{key:{key:{key:class instance},class instance},class instance}`. （粗略估算）

请忽略未捕获的方法 Save，一旦我弄清楚如何在不丢失任何嵌入实例的情况下腌制字典，我就正在努力解决这个问题。

以下是我尝试通过pickler保存字典的尝试。一些代码未完成，但你应该能够了解我想要做什么。到目前为止，我所能做的就是检索最后一个问题/答案集。我的泡菜没有保存嵌入的实例，或者当我保存泡菜时它们实际上并不存在。我尽可能地遵循意大利面条线，但似乎无法弄清楚如何设置一种保存到文件而不丢失任何内容的方法。此外，我的文件不必是 .txt 最初我打算将 .data 用于泡菜。

```
# questor.py 

# define some constants for future use
kQuestion = 'question'
kGuess = 'guess'
questfile = 'questfile.txt'

## Added
import cPickle as p
# create a file for questor
def questor_file():
    try:
        questor = open(questfile,'rb')
        try:
            q = p.Unpickler(questor)
            quest = q.load()
            questor.close()
            return quest
        except:
            print 'P.load failed'
    except:
        print 'File did not open'
        questor = open('questfile.data', 'wb')
        questor.close()
    return Qnode('python')

# define a function for asking yes/no questions
def yesno(prompt):
    ans = raw_input(prompt)
    return (ans[0]=='y' or ans[0]=='Y')

# define a node in the question tree (either question or guess)
class Qnode:

    # initialization method
    def __init__(self,guess):
        self.nodetype = kGuess
        self.desc = guess

    ##Added
    ## Not sure where I found this, but was going to attempt to use this as a retreival method
    ## haven't gotten this to work yet
    def Load(self):
        f = open(self.questfile,'rb')
        tmp_dict = cPickle.load(f)
        f.close()    
        self.__dict__.update(tmp_dict) 

    ##Added
    # was going to use this as a save method, and call it each time I added a new question/answer
    def Save(self,node):
        f = open(self.questfile,'wb')
        quest = p.pickler(f)

    # get the question to ask 
    def query(self):
        if (self.nodetype == kQuestion):
            return self.desc + " "
        elif (self.nodetype == kGuess):
            return "Is it a " + self.desc + "? "
        else:
            return "Error: invalid node type!"

    # return new node, given a boolean response
    def nextnode(self,answer):
        return self.nodes[answer]

    # turn a guess node into a question node and add new item
    # give a question, the new item, and the answer for that item
    def makeQuest( self, question, newitem, newanswer ):

        # create new nodes for the new answer and old answer
        newAnsNode = (Qnode(newitem))
        oldAnsNode = (Qnode(self.desc))

        # turn this node into a question node
        self.nodetype = kQuestion
        self.desc = question

        # assign the yes and no nodes appropriately
        self.nodes = {newanswer:newAnsNode, not newanswer:oldAnsNode}
        self.save(self.nodes)

def traverse(fromNode):
    # ask the question
    yes = yesno( fromNode.query() )

    # if this is a guess node, then did we get it right?
    if (fromNode.nodetype == kGuess):
        if (yes):
            print "I'm a genius!!!"
            return
        # if we didn't get it right, return the node
        return fromNode

    # if it's a question node, then ask another question
    return traverse( fromNode.nextnode(yes) )

def run():
    # start with a single guess node
    # This was supposed to assign the data from the file
    topNode = questor_file()

    done = 0
    while not done:
        # ask questions till we get to the end
        result = traverse( topNode )

        # if result is a node, we need to add a question
        if (result):
            item = raw_input("OK, what were you thinking of? ")
            print "Enter a question that distinguishes a",
            print item, "from a", result.desc + ":"
            q = raw_input()
            ans = yesno("What is the answer for " + item + "? ")
            result.makeQuest( q, item, ans )
            print "Got it."

        # repeat until done
        print
        done = not yesno("Do another? ")
    # Added
    # give me the dictionary    
    return result

# immediate-mode commands, for drag-and-drop or execfile() execution
if __name__ == '__main__':
    print "Let's play a game."
    print 'Think of something, just one thing.'
    print 'It can be anything, and I will try to guess what it is.'
    raw_input('Press Enter when ready.')
    print
    questdata = run()
    print
    # Added
    # Save the dictionary
    questor = open(questfile,'wb')
    q = p.Pickler(questor)
    q.dump(questdata)
    questor.close()
    raw_input("press Return>")
else:
    print "Module questor imported."
    print "To run, type: questor.run()"
    print "To reload after changes to the source, type: reload(questor)"

# end of questor.py 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:04:31.240

想到的一种方法是创建所有节点的列表并保存......他们应该自己保留内部指针。

在文件顶部声明一个节点列表（并使用泡菜......只是因为我更熟悉那个）

```
import pickle
kQuestion = 'question'
kGuess = 'guess'
questfile = 'questfile.txt'
nodes = []
.... 
```

将您的加载方法更改为类似

```
def questor_file():
    global nodes
    try:
        questor = open(questfile,'rb')
        try:
            nodes= pickle.load(questor)
            quest = nodes[0]
            questor.close()
            return quest
        except:
            print 'P.load failed'
            nodes = []

    except:
        print 'File did not open'
        nodes = []
    return Qnode('python') 
```

更改您的类构造函数，以便将每个节点添加到节点

```
class Qnode:
    # initialization method
    def __init__(self,guess):
        self.nodetype = kGuess
        self.desc = guess
        nodes.append(self) 
```

在它说 #added save dictionary 的最后，保存您的节点列表

```
questor = open(questfile,'wb')
q = pickle.dump(nodes,questor) 
```

确保在出现提示时键入 no 退出程序...

您也可以将其保存到数据库或其他任何地方，但您仍然必须存储每个节点，并且可能会更复杂......我认为这种方法应该真的很好，（尽管可能有一种更自然的方法来保存一棵树结构体） ...

# javascript - 是否可以在谷歌浏览器中更改 navigator.appname？

> ID：15962728
> 
> 赞同：0
> 
> 时间：2013-04-12T03:49:25.880
> 
> 标签：javascript, google-chrome, internet-explorer-8

我的大学网亭有这个幼稚的问题，它只能在 IE 中打开。这是我最近发现的代码

> **if (navigator.appName=='Netscape' || navigator.appName=='Firefox' || navigator.appName=='Google Chrome' || navigator.appName=='Safari' || navigator.appName=='Opera ' || navigator.appName=='Opera') { alert('这个网站只能用 Internet Explorer 浏览'); window.history.go(-1); // window.history.forward(1); }**

有什么方法可以欺骗 chrome 中的 navigator.appname 属性吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:37:02.797

您可以从 google chrome 检查器工具更改用户代理。按 F12 并打开 chrome 检查器单击设置图标（应该在右下角）在页面中转到覆盖 - >然后从那里选择您的用户代理作为 IE 9 / 8 / 7

现在，当您检查 navigator.appName 时，它​​将显示您的 Netscape。

# lucene.net - Google like autosuggest with Lucene.net

> ID：15962733
> 
> 赞同：2
> 
> 时间：2013-04-12T03:50:01.020
> 
> 标签：lucene.net

我有一个存储客户的 Lucene 索引，该索引基本上包括一个视图模型（已存储但未编入索引的文档字段）、一个 ID（已存储并编入索引以允许查找和更新文档的字段）以及 google 涵盖的术语列表- 类似搜索（名称 Term 的多个字段实例）。术语可能是视图模型中的字段，也可能不是。

这适用于按术语实际搜索文档。问题是我如何实现自动建议，基本上得到一个 Term（字段，而不是 Lucene Term）值的列表，这些值可能是输入值的延续（即“Co”可能会导致“Colorado”、“Coloring Book” "等，因为这些是至少一个文档的术语字段中的实际值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:35:06.303

有很多方法可以做到这一点，但如果您需要一种快速简单的方法来做到这一点，请使用`TermEnum`.

只需将这个小代码示例粘贴到一个新的 C# 控制台应用程序中，然后检查它是否适合您开始使用。

```
RAMDirectory dir = new RAMDirectory();
IndexWriter iw = new IndexWriter(dir, new KeywordAnalyzer(), IndexWriter.MaxFieldLength.UNLIMITED);

Document d = new Document();
Field f = new Field("text", "", Field.Store.YES, Field.Index.ANALYZED);
d.Add(f);

f.SetValue("abc");
iw.AddDocument(d);

f.SetValue("colorado");
iw.AddDocument(d);

f.SetValue("coloring book");
iw.AddDocument(d);

iw.Commit();
IndexReader reader = iw.GetReader();

TermEnum terms = reader.Terms(new Term("text", "co"));
int maxSuggestsCpt = 0;
// will print:
// colorado
// coloring book
do
{
    Console.WriteLine(terms.Term.Text);
    maxSuggestsCpt++;
    if (maxSuggestsCpt >= 5)
        break;
}
while (terms.Next() && terms.Term.Text.StartsWith("co"));

reader.Dispose();
iw.Dispose(); 
```

# c# - 网格视图中的重复行

> ID：15962735
> 
> 赞同：2
> 
> 时间：2013-04-12T03:50:17.990
> 
> 标签：c#, asp.net

在我有关于如何（从 ASP.NET 网格视图动态添加和删除行）的问题之前，我通过使用文章（[http://www.codeproject.com/Articles/467788/Dynamically-adding-and-deleting -来自 ASP-NET 的行](http://www.codeproject.com/Articles/467788/Dynamically-adding-and-deleting-rows-from-ASP-NET)）。在本文中，当我们按类型（手工）完成字段时，我们会添加行。现在我喜欢在从下拉列表中选择值后完成行的一些字段，所以我使用了

```
 public static List<string> Docprpp = new List<string>(3); 
```

对于添加第一行我没有问题，当我从下拉列表中选择文档时，我可以在字段中使用（文档编号，rev，title），对于其他字段，我可以手动填写。

```
dtCurrentTable.Rows[i - 1]["Col1"] = Docprpp[0];
                dtCurrentTable.Rows[i - 1]["Col2"] = Docprpp[1];
                dtCurrentTable.Rows[i - 1]["Col3"] = Docprpp[2];
                dtCurrentTable.Rows[i - 1]["Col4"] = TextBoxsh.Text;
                dtCurrentTable.Rows[i - 1]["Col5"] = DrpStatus.SelectedValue;
                dtCurrentTable.Rows[i - 1]["Col6"] = DrpClass.SelectedValue;
                rowIndex++;
            }
            dtCurrentTable.Rows.Add(drCurrentRow);
            ViewState["CurrentTable"] = dtCurrentTable;

            grvdocumentDetails.DataSource = dtCurrentTable;
            grvdocumentDetails.DataBind();

        }
    }
    else
    {
        Response.Write("ViewState is null");
    }

    Docprpp.Clear();
    SetPreviousData();

} 
```

但是我喜欢添加第二行或更多行并使用下拉列表中的不同值，但它可以根据图片处理所有行（旧的、新的）相同的（文档编号、版本、标题）。

```
 (public static List<string> Docprpp = new List<string>(3);) 
```

请帮助我如何使用这个变量并解决我的问题。 ![在此处输入图像描述](https://i.stack.imgur.com/b7Ebl.jpg)

```
 protected void ddlProjectDocument_SelectedIndexChanged(object sender, EventArgs e)
{
    using (_DataContext = new EDMSDataContext())
    {
        int x = Convert.ToInt32(ddlProjectDocument.SelectedValue);
        var subject = from y in _DataContext.tblDocuments
                      where y.DocId == x
                      select y.TITLE;

        var docno = from z in _DataContext.tblDocuments
                    where z.DocId == x
                    select z.DocumentNo;

        Docprpp.Add(docno.SingleOrDefault().ToString());

        var MaxRev = _DataContext.tblTransmittalls.Where(rev => rev.DocID == x).Max(rev => rev.REV);
        int newRev = (MaxRev == null) ? 0 : Convert.ToInt32(MaxRev) + 1;

        Docprpp.Add(newRev.ToString());

        var MaxReview = _DataContext.Project_Documents.Where(rev => rev.DocId == x && rev.Rev == Convert.ToInt32(MaxRev)).Max(rev => rev.Review);
        int newReview = (MaxReview == null) ? newReview = 1 : Convert.ToInt32(MaxReview) + 1;

        Docprpp.Add(subject.SingleOrDefault().ToString());

    }
}

 private void AddNewRow()
{
    int rowIndex = 0;

    if (ViewState["CurrentTable"] != null)
    {
        DataTable dtCurrentTable = (DataTable)ViewState["CurrentTable"];
        DataRow drCurrentRow = null;
        if (dtCurrentTable.Rows.Count > 0)
        {
            for (int i = 1; i <= dtCurrentTable.Rows.Count; i++)
            {
                TextBox TextBoxsh = (TextBox)grvdocumentDetails.Rows[rowIndex].Cells[4].FindControl("txtsh");
                DropDownList DrpStatus = (DropDownList)grvdocumentDetails.Rows[rowIndex].Cells[5].FindControl("drpStatus");
                DropDownList DrpClass = (DropDownList)grvdocumentDetails.Rows[rowIndex].Cells[6].FindControl("drpClass");
                drCurrentRow = dtCurrentTable.NewRow();
                drCurrentRow["RowNumber"] = i + 1;

                dtCurrentTable.Rows[i - 1]["Col1"] = Docprpp[0];
                dtCurrentTable.Rows[i - 1]["Col2"] = Docprpp[1];
                dtCurrentTable.Rows[i - 1]["Col3"] = Docprpp[2];
                dtCurrentTable.Rows[i - 1]["Col4"] = TextBoxsh.Text;
                dtCurrentTable.Rows[i - 1]["Col5"] = DrpStatus.SelectedValue;
                dtCurrentTable.Rows[i - 1]["Col6"] = DrpClass.SelectedValue;
                rowIndex++;
            }
            dtCurrentTable.Rows.Add(drCurrentRow);
            ViewState["CurrentTable"] = dtCurrentTable;

            grvdocumentDetails.DataSource = dtCurrentTable;
            grvdocumentDetails.DataBind();

        }
    }
    else
    {
        Response.Write("ViewState is null");
    }

    Docprpp.Clear();
    SetPreviousData();

}

 private void SetPreviousData()
{
    int rowIndex = 0;
    if (ViewState["CurrentTable"] != null)
    {
        DataTable dt = (DataTable)ViewState["CurrentTable"];
        if (dt.Rows.Count > 0)
        {
            for (int i = 0; i < dt.Rows.Count; i++)
            {
                Label TextBoxDoc = (Label)grvdocumentDetails.Rows[rowIndex].Cells[1].FindControl("txtDoc");
                Label TextBoxRev = (Label)grvdocumentDetails.Rows[rowIndex].Cells[2].FindControl("txtRev");
                Label TextBoxtitle = (Label)grvdocumentDetails.Rows[rowIndex].Cells[3].FindControl("txttitle");
                TextBox TextBoxsh = (TextBox)grvdocumentDetails.Rows[rowIndex].Cells[4].FindControl("txtsh");
                DropDownList DrpStatus = (DropDownList)grvdocumentDetails.Rows[rowIndex].Cells[5].FindControl("drpStatus");
                DropDownList DrpClass = (DropDownList)grvdocumentDetails.Rows[rowIndex].Cells[6].FindControl("drpClass");
                // drCurrentRow["RowNumber"] = i + 1;

                grvdocumentDetails.Rows[i].Cells[0].Text = Convert.ToString(i + 1);
                TextBoxDoc.Text = dt.Rows[i]["Col1"].ToString();
                TextBoxRev.Text = dt.Rows[i]["Col2"].ToString();
                TextBoxtitle.Text = dt.Rows[i]["Col3"].ToString();
                TextBoxsh.Text = dt.Rows[i]["Col4"].ToString();
                DrpStatus.SelectedValue = dt.Rows[i]["Col5"].ToString();
                DrpClass.SelectedValue = dt.Rows[i]["Col6"].ToString();

                rowIndex++;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:55:12.023

将您的 Docprpp 创建/初始化移动到 AddNewRow() 中，并且不要使用静态。

# php - 在没有 TimThumb 的情况下加载拇指 - Wordpress

> ID：15962741
> 
> 赞同：0
> 
> 时间：2013-04-12T03:50:46.757
> 
> 标签：php, wordpress, content-management-system, timthumb

timthumb 有什么替代品吗？

或者我如何在没有它的情况下将图像调用到 div 中？

```
<img class="centerimage" src="<?php bloginfo('stylesheet_directory'); ?>/timthumb.php?src=<?php get_image_url(); ?>&amp;h=250&amp;w=200&amp;zc=1" alt=""  /> 
```

我做了一个自定义模板，基于另一个模板，它仍然使用 tmthumb，没有它有没有办法加载图像？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:10:02.540

使用 WP 3.5 的原生图像大小调整。

**见** [http://matthewruddy.github.io/Wordpress-Timthumb-alternative/](http://matthewruddy.github.io/Wordpress-Timthumb-alternative/)

```
$url = 'http://yourwordpressdomain.com/wp-content/uploads/01/image1.png';// Required
$width = 300;                                      // Optional. Defaults to '150'
$height = 200;                                     // Optional. Defaults to '150'
$crop = true;                                      // Optional. Defaults to 'true'
$retina = false;                                   // Optional. Defaults to 'false'

// Call the resizing function (returns an array)
$image = matthewruddy_image_resize( $url, $width, $height, $crop, $retina );

// Outputs resized image URL, http://yourwordpressdomain.com/wp-content/uploads/01/image1-300x200.png
echo $image['url']; 
```

# java - 在 Java 7 中使用非参数化泛型类型有什么问题？

> ID：15962742
> 
> 赞同：0
> 
> 时间：2013-04-12T03:51:00.223
> 
> 标签：java, generics, types

如果我想要一个变量，比如说一个列表，它可以用任何类型实例化怎么办？

所以，给定：

```
List list; 
```

我可以做任何这些：

```
list = new ArrayList<String>();
list = new Vector<Integer>();
list = new LinkedList<HashMap>(); 
```

**编辑**：或者，我可能正在使用返回原始列表的库。例如，在休眠中：

```
List result = session.createQuery( "from Event" ).list(); 
```

当我想使用 Eclipse 时，会向我发出警告`List list`：

> List 是一种原始类型。对泛型类型的引用`List<E>`应该被参数化

为什么要避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:14:52.557

> 当我想要执行上述操作时，Eclipse 给了我这个错误：

我相信eclipse会给你一个警告（黄色下划线），而不是一个错误（红色下划线）。

> List 是一种原始类型。对泛型类型 List 的引用应该被参数化
> 
> **为什么要避免这种情况？**

对泛型类型的引用应该被参数化，因为它们提供了**更强的类型**。这将帮助您在编译时检测到一些问题，否则这些问题只能在执行时检测到。

例如：

```
List myIntegerList = new ArrayList();
myIntegerList.add(1);
myIntegerList.add("bad bad String"); 
```

将毫无问题地编译；但会在执行时给你一个错误。另一方面：

```
List<Integer> myIntegerList = new ArrayList<Integer>();
myIntegerList.add(1);
myIntegerList.add("bad bad String"); // compiler will show an error here 
```

永远不会编译，因为在尝试将 a 添加`String`到 a时它会显示一个明显`Integer`的错误`List`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T03:56:31.530

根据 Java 语言，这不是错误，您的 Eclipse 可能已配置为将其标记为错误。`Strings`现在，您能否确定一个您有时希望保持相同变量的用例`Integer`？至于为什么会出现此错误，您从中得到的任何东西都必须转换为正确的类型，并存在运行时错误的风险：

```
List list = new ArrayList<Integer>();
list.add("string"); // no error from compiler
Map m = (Map) list.get(0); // no error from compiler, but runtime error 
```

将此与

```
List<Integer> list = new ArrayList<Integer>();
list.add("string"); // compile error
Map m = (Map) list.get(0); // compile error 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T04:04:16.890

仅仅因为你可以做某事并不意味着它是明智的。在什么情况下，你会有一个对象在不同的​​时间可能是 a `ArrayList<String>`、 a`Vector<Integer>`和 a ？`LinkedList<HashMap>`不同类型的对象有不同的用途。您可能想要一个具有`List<String>`实例变量、`List<Integer>`实例变量和`List<Map<K, V>>`实例变量的类。然后问题就消失了。

做你建议的事情对你的同事来说将是一个巨大而令人不快的惊喜。让他们开心；不要惹恼他们以展示你的良好记忆力。而且，从现在起六个月后，您是否期望理解您今天编写的代码？谷歌或在这个网站上查找*IOCCC*。这些程序被编写为聪明，而不是最佳实践的范例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T03:56:48.123

您收到此警告是因为您仅参数化了 arraylist 而不是列表对象。所以是通用和非通用的混合体。这可能会导致运行时强制转换异常，从而无法达到泛型的目的。

```
List<String> list = new ArrayList<>();  //If JDK7, not back comptible

List<String> list = new ArrayList<String>();  //If <=JDK7, back compatible 
```

例如

```
List<Integer> list1 = new ArrayList<>();
List list2 = new ArrayList<Integer>(); 
```

就在您尝试对两个列表执行添加功能时，您可以看到不同之处，

```
list1.add("sdfsdfd"); //Takes only integer inputs, compilation error
list2.add(obj); //Takes object type, since obj is not integer type, so will throw classcastexception 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T04:17:44.957

试试这个，它会接受任何将 Object 扩展到您的列表的东西。

```
List<? extends Object> list;
list = new ArrayList<String>();
list = new Vector<Integer>();
list = new LinkedList<Map>(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-12T04:27:05.703

下面的代码应该没问题：

`List<`?`> list;` 或者

`List<`?` extends Object> list;`

关于java中问号（?）的用法，可以参考[Wildcard (Java)](http://en.wikipedia.org/wiki/Wildcard_%28Java%29)。

# scala - “消极地”使用上下文边界来确保类型类实例不在范围内

> ID：15962743
> 
> 赞同：19
> 
> 时间：2013-04-12T03:51:24.507
> 
> 标签：scala, typeclass, implicit, scalaz, higher-kinded-types

**tl;博士**：我该如何做类似下面的代码：

```
def notFunctor[M[_] : Not[Functor]](m: M[_]) = s"$m is not a functor" 
```

' `Not[Functor]`'，是这里的组成部分。
我希望它在提供的“m”不是 Functor 时成功，否则编译器会失败。

**已解决**：跳过问题的其余部分，直接进入下面的答案。

* * *

粗略地说，我要完成的是“负面证据”。

伪代码看起来像这样：

```
// type class for obtaining serialization size in bytes.
trait SizeOf[A] { def sizeOf(a: A): Long }

// type class specialized for types whose size may vary between instances
trait VarSizeOf[A] extends SizeOf[A]

// type class specialized for types whose elements share the same size (e.g. Int)
trait FixedSizeOf[A] extends SizeOf[A] {
  def fixedSize: Long
  def sizeOf(a: A) = fixedSize
}

// SizeOf for container with fixed-sized elements and Length (using scalaz.Length)
implicit def fixedSizeOf[T[_] : Length, A : FixedSizeOf] = new VarSizeOf[T[A]] {
  def sizeOf(as: T[A]) = ... // length(as) * sizeOf[A]
}

// SizeOf for container with scalaz.Foldable, and elements with VarSizeOf
implicit def foldSizeOf[T[_] : Foldable, A : SizeOf] = new VarSizeOf[T[A]] {
  def sizeOf(as: T[A]) = ... // foldMap(a => sizeOf(a))
} 
```

请记住，这`fixedSizeOf()`在相关时更可取，因为它为我们节省了遍历集合的时间。

这样，对于仅`Length`定义（但未定义`Foldable`）的容器类型，以及定义了 a 的元素`FixedSizeOf`，我们可以提高性能。

对于其余的情况，我们会检查集合并汇总各个大小。

我的问题是在为容器定义和`Length`为元素定义的情况下。这是一个非常常见的情况（例如：已经定义了两者）。`Foldable``FixedSizeOf``List[Int]`

例子：

```
scala> implicitly[SizeOf[List[Int]]].sizeOf(List(1,2,3))
<console>:24: error: ambiguous implicit values:
 both method foldSizeOf of type [T[_], A](implicit evidence$1: scalaz.Foldable[T], implicit evidence$2: SizeOf[A])VarSizeOf[T[A]]
 and method fixedSizeOf of type [T[_], A](implicit evidence$1: scalaz.Length[T], implicit evidence$2: FixedSizeOf[A])VarSizeOf[T[A]]
 match expected type SizeOf[List[Int]]
              implicitly[SizeOf[List[Int]]].sizeOf(List(1,2,3)) 
```

我想要的是`Foldable`只有在`Length`+`FixedSizeOf`组合不适用时才能依赖类型类。

为此，我可以更改`foldSizeOf()`接受`VarSizeOf`元素的定义：

```
implicit def foldSizeOfVar[T[_] : Foldable, A : VarSizeOf] = // ... 
```

现在我们必须填写有问题的部分，即`Foldable`包含`FixedSizeOf`元素*且未`Length`定义*的容器。我不知道如何解决这个问题，但伪代码看起来像：

```
implicit def foldSizeOfFixed[T[_] : Foldable : Not[Length], A : FixedSizeOf] = // ... 
```

' `Not[Length]`' 显然是这里的组成部分。

**我知道的部分解决方案**

1）为低优先级隐式定义一个类并扩展它，如' `object Predef extends LowPriorityImplicits`'所示。最后一个隐式 ( `foldSizeOfFixed()`) 可以在父类中定义，并将被后代类的替代覆盖。

我对这个选项不感兴趣，因为我希望最终能够支持递归使用`SizeOf`，这将防止低优先级基类中的隐含依赖于子类中的那些（我的理解是否正确？编辑: 错误！隐式查找从子类的上下文中工作，这是一个可行的解决方案！）

2）一种更粗略的方法是依赖于`Option[TypeClass]`（例如：`Option[Length[List]]`。其中一些，我可以只写一个大的隐式，选择`Foldable`和`SizeOf`作为强制性和`Length`和`FixedSizeOf`作为可选，如果它们可用，则依赖于后者。（来源：[在这里](http://www.scala-lang.org/node/8773)）

这里的两个问题是缺乏模块化和在找不到相关类型类实例时回退到运行时异常（这个例子可能可以与这个解决方案一起工作，但这并不总是可能的）

编辑：这是我能够通过可选隐式获得的最好的。它还没有：

```
implicit def optionalTypeClass[TC](implicit tc: TC = null) = Option(tc)
type OptionalLength[T[_]] = Option[Length[T]]
type OptionalFixedSizeOf[T[_]] = Option[FixedSizeOf[T]]

implicit def sizeOfContainer[
    T[_] : Foldable : OptionalLength,
    A : SizeOf : OptionalFixedSizeOf]: SizeOf[T[A]] = new SizeOf[T[A]] {
  def sizeOf(as: T[A]) = {

    // optionally calculate using Length + FixedSizeOf is possible
    val fixedLength = for {
      lengthOf <- implicitly[OptionalLength[T]]
      sizeOf <- implicitly[OptionalFixedSizeOf[A]]
    } yield lengthOf.length(as) * sizeOf.fixedSize

    // otherwise fall back to Foldable
    fixedLength.getOrElse { 
      val foldable = implicitly[Foldable[T]]
      val sizeOf = implicitly[SizeOf[A]]
      foldable.foldMap(as)(a => sizeOf.sizeOf(a))
    }
  }
} 
```

除了这与`fixedSizeOf()`之前的冲突，这仍然是必要的。

感谢您的任何帮助或观点:-)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-13T01:10:17.590

我最终使用基于歧义的解决方案解决了这个问题，该解决方案不需要使用继承进行优先级排序。

这是我试图概括这一点。

我们使用类型`Not[A]`来构造负类型类：

```
import scala.language.higherKinds

trait Not[A]

trait Monoid[_] // or import scalaz._, Scalaz._
type NotMonoid[A] = Not[Monoid[A]] 

trait Functor[_[_]] // or import scalaz._, Scalaz._
type NotFunctor[M[_]] = Not[Functor[M]] 
```

...然后可以用作上下文边界：

```
def foo[T: NotMonoid] = ... 
```

我们继续确保 Not[A] 的每个有效表达式都将获得至少一个隐式实例。

```
implicit def notA[A, TC[_]] = new Not[TC[A]] {} 
```

该实例被称为 'notA' -- 'not' 因为如果它是为 'Not[TC[A]]' 找到的唯一实例，则发现负类型类适用；'A' 通常用于处理扁平类型（例如 Int）的方法。

我们现在引入一个歧义来拒绝应用不需要的类型类*的*情况：

```
implicit def notNotA[A : TC, TC[_]] = new Not[TC[A]] {} 
```

这与“NotA”几乎完全相同，除了这里我们只对“TC”指定的类型类的实例存在于隐式范围内的类型感兴趣。该实例被命名为“notNotA”，因为仅通过匹配被查找的隐式，它将与“notA”产生歧义，导致隐式搜索失败（这是我们的目标）。

让我们看一个使用示例。我们将使用上面的“NotMonoid”否定类型类：

```
implicitly[NotMonoid[java.io.File]] // succeeds
implicitly[NotMonoid[Int]] // fails

def showIfNotMonoid[A: NotMonoid](a: A) = a.toString

showIfNotMonoid(3) // fails, good!
showIfNotMonoid(scala.Console) // succeeds for anything that isn't a Monoid 
```

到现在为止还挺好！但是，上述方案尚不支持形状为 M[_] 的类型和形状为 TC[_[_]] 的类型类。让我们也为它们添加隐式：

```
implicit def notM[M[_], TC[_[_]]] = new Not[TC[M]] {}
implicit def notNotM[M[_] : TC, TC[_[_]]] = new Not[TC[M]] {}

implicitly[NotFunctor[List]] // fails
implicitly[NotFunctor[Class]] // succeeds 
```

很简单。请注意，Scalaz 有一个针对由处理多种类型形状而产生的样板的解决方法——查找“取消应用”。我无法将它用于基本情况（形状 TC[_] 的类型类，例如 Monoid），即使它像魅力一样在 TC[_[_]]（例如 Functor）上工作，所以这个答案不包括那个。

如果有人感兴趣，这里是一个片段中所需的一切：

```
import scala.language.higherKinds

trait Not[A]

object Not {
  implicit def notA[A, TC[_]] = new Not[TC[A]] {}
  implicit def notNotA[A : TC, TC[_]] = new Not[TC[A]] {}

  implicit def notM[M[_], TC[_[_]]] = new Not[TC[M]] {}
  implicit def notNotM[M[_] : TC, TC[_[_]]] = new Not[TC[M]] {}
}

import Not._

type NotNumeric[A] = Not[Numeric[A]]
implicitly[NotNumeric[String]] // succeeds
implicitly[NotNumeric[Int]] // fails 
```

我在问题中要求的伪代码看起来像这样（实际代码）：

```
// NotFunctor[M[_]] declared above
def notFunctor[M[_] : NotFunctor](m: M[_]) = s"$m is not a functor" 
```

**更新：**应用于隐式转换的类似技术：

```
import scala.language.higherKinds

trait Not[A]

object Not {
  implicit def not[V[_], A](a: A) = new Not[V[A]] {}
  implicit def notNot[V[_], A <% V[A]](a: A) = new Not[V[A]] {}
} 
```

我们现在可以（例如）定义一个函数，该函数仅在其类型不可按 Ordered 显示时才接受值：

```
def unordered[A <% Not[Ordered[A]]](a: A) = a 
```

# android - 在 View 的背景中画一个半圆

> ID：15962745
> 
> 赞同：19
> 
> 时间：2013-04-12T03:51:32.773
> 
> 标签：android

我正在尝试创建一个背景为半圆的 TextView。我使用 ShapeDrawable 创建了一个椭圆。我尝试通过使用 ScaleDrawable 将椭圆的垂直大小加倍并剪辑它来创建一个半圆。但是，ScaleDrawable 没有效果。为什么不？在视图背景中绘制半圆的最佳方法是什么？

**资源/布局/activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >
    <TextView
        android:id="@+id/main_view"
        android:background="@drawable/semicircle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:gravity="center_horizontal"
    />
    </RelativeLayout> 
```

**res/drawable/semicircle.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<scale xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/circle"
    android:scaleGravity="top|clip_vertical"
    android:scaleHeight="200%"
    android:scaleWidth="100%" >
</scale> 
```

**res/drawable/circle.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval"
    <solid
        android:color="#444" />
</shape> 
```

**src/.../MainActivity.java**

```
//...
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activity);
        findViewById(R.id.main_view).getBackground().setLevel(10000);
    }
//... 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-10-25T20:54:50.130

要剪辑椭圆形，只需将其嵌入到 ClipDrawable 中，如下所示：

**res/drawable/semicircle.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<clip
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:clipOrientation="vertical"
    android:gravity="bottom">
    <shape android:shape="oval">
        <solid android:color="#444"/>
    </shape>
</clip> 
```

[`ClipDdrawable`](http://developer.android.com/reference/android/graphics/drawable/ClipDrawable.html)共同目的是创建自定义进度条。它会剪切一部分内容，并在其“级别”属性在 [0; 10000]（0=隐藏，10000=完全显示）。

*   `clipOrientation`是剪辑进度的方向。
*   `gravity`是剪辑进度开始边/边。

要获得半圆，请将其设置`ClipDrawable`为您的视图背景，并以编程方式调整其“级别”：

```
//...
findViewById(R.id.my_view).getBackground().setLevel(5000)
//... 
```

适用于所有 Android 版本（*“在 API 级别 1 中添加”*）并且不需要自定义视图。

;-)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-12T05:18:06.280

您可以实现自己的 Drawable。但这不能从 XML 夸大。您需要使用 View.setBackgroundDrawable() 从代码设置可绘制对象；

请参阅我的示例实现以使用 drawable 绘制半圆。

```
public class SemiCircleDrawable extends Drawable {

    private Paint paint;
    private RectF rectF;
    private int color;
    private Direction angle;

    public enum Direction
    {
        LEFT,
        RIGHT,
        TOP,
        BOTTOM
    }

    public SemiCircleDrawable() {
        this(Color.BLUE, Direction.LEFT);
    }

    public SemiCircleDrawable(int color, Direction angle) {
        this.color = color;
        this.angle = angle;

        paint = new Paint();
        paint.setColor(color);
        paint.setStyle(Style.FILL);
        paint.setAntiAlias(true);

        rectF = new RectF();
    }

    public int getColor() {
        return color;
    }

    /**
     * A 32bit color not a color resources.
     * @param color
     */
    public void setColor(int color) {
        this.color = color;
        paint.setColor(color);
    }

    @Override
    public void draw(Canvas canvas) {
        canvas.save();

        Rect bounds = getBounds();

        if(angle == Direction.LEFT || angle == Direction.RIGHT)
        {
            canvas.scale(2, 1);
            if(angle == Direction.RIGHT)
            {
                canvas.translate(-(bounds.right / 2), 0);
            }
        }
        else
        {
            canvas.scale(1, 2);
            if(angle == Direction.BOTTOM)
            {
                canvas.translate(0, -(bounds.bottom / 2));
            }
        }

        rectF.set(bounds);

        if(angle == Direction.LEFT)
            canvas.drawArc(rectF, 90, 180, true, paint);
        else if(angle == Direction.TOP)
            canvas.drawArc(rectF, -180, 180, true, paint);
        else if(angle == Direction.RIGHT)
            canvas.drawArc(rectF, 270, 180, true, paint);
        else if(angle == Direction.BOTTOM)
            canvas.drawArc(rectF, 0, 180, true, paint);

        canvas.restore()
    }

    @Override
    public void setAlpha(int alpha) {
        // Has no effect
    }

    @Override
    public void setColorFilter(ColorFilter cf) {
        // Has no effect
    }

    @Override
    public int getOpacity() {
        // Not Implemented
        return PixelFormat.UNKNOWN;
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-22T19:45:33.280

我做了这门课，希望对你有帮助，所有变量都是西班牙语，但很简单，

构造函数 SemiCirculo 将半圆的 rgb 和分辨率（半圆的三角形数量）用作参数

CalcularPuntosPorcentaje 方法使用圆心、起始角度、角度宽度和无线电作为参数。

ImprimeCirculo 方法使用画布作为参数，它用于绘制半圆，一旦它已经用前面提到的方法计算了半圆的点。

CalcularPuntosPorcentaje 方法与 CalcularPuntosPorcentaje 方法类似，但它使用从 0 到 100 的 % 的起始角和宽度角参数

最后，SetOffset 和 SetColor 用于更改半圆的角度和颜色的默认起始位置参考

```
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;

public class SemiCirculo {

    private Path circulo;
    private Paint color;
    private float px, py, radio, anguloI, anchoa,offset;
    private int r, g, b;
    private int resolucion;
    private float puntox[],puntoy[];

    public SemiCirculo(int r1, int g1, int b1, int resolucion1) {

        this.offset = 0;
        this.color = new Paint();
        this.r = r1;
        this.g = g1;
        this.b = b1;
        this.color.setColor(Color.rgb(r, g, b));
        color.setAntiAlias(true);
        circulo = new Path();
        this.resolucion = resolucion1;
        this.puntox = new float[this.resolucion];
        this.puntoy = new float[this.resolucion];
        this.anguloI = 0;
        this.anchoa = 1;

    }

    public void SetOffset(float off) {
        this.offset = off;
    }

    public void SetColor(int r1,int g1, int b1){        
        this.r=r1;
        this.g=g1;
        this.b=b1;
        this.color.setColor(Color.rgb(r, g, b));
    }

    public void CalcularPuntosPorcentaje(float px1, float py1,
            float porcentaje, float radio1) {
        this.anguloI = 0 + this.offset;
        this.px = px1;
        this.py = py1;
        this.radio = radio1;
        this.anguloI = 0;
        this.anchoa = porcentaje / 100 * 360;

        this.CalcularPuntos(px, py, anguloI, anchoa, radio);
    }

    public void CalcularPuntos(float px1, float py1, float anguloI1,
            float anchoangulo, float radio1) {
        this.anguloI = anguloI1 + this.offset;

        this.anchoa = anchoangulo;
        this.px = px1;
        this.py = py1;
        this.radio = radio1 ;

        float angulo = 360 - this.anguloI - this.anchoa;

        for (int i = 0; i < resolucion; i++) {
            this.puntox[i] = this.px - (float) Math.sin(Math.toRadians(angulo))
                    * this.radio;
            this.puntoy[i] = this.py - (float) Math.cos(Math.toRadians(angulo))
                    * this.radio;
            angulo = (360 - this.anguloI - this.anchoa)
                    + ((this.anchoa / (float) (this.resolucion)) * (i + 2));
        }

        this.circulo.reset();

        this.circulo.moveTo(this.px, this.py);
        for (int i = 0; i < resolucion; i++) {
            this.circulo.lineTo(this.puntox[i], this.puntoy[i]);
        }

    }

    public void ImprimeCirculo(Canvas canvas) {

        canvas.drawPath(this.circulo, this.color);

    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T04:14:36.403

相反，您可以使用图像设置为背景...

1>使用绘画设计任何图像并将其保存为任何支持的格式，例如 .jpg 或 .png 即这将是您想要的半圆形图像。

2>将图像保存在res/drawable文件夹中

3>使用设置你的文本视图背景到该图像`android:background="@drawable/yourimage.jpg"`

希望这可以帮助...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-25T00:49:24.217

您可以使用矢量可绘制。我在 Affinity 设计中创建了它。

[![在此处输入图像描述](https://i.stack.imgur.com/4wU7l.png)](https://i.stack.imgur.com/4wU7l.png) [![在此处输入图像描述](https://i.stack.imgur.com/t6Bez.png)](https://i.stack.imgur.com/t6Bez.png)

放到`drawable`文件夹里`ic_cemicircle.xml`

```
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="48dp"
    android:height="48dp"
    android:viewportWidth="48"
    android:viewportHeight="48">

    <path
        android:fillColor="#FF000000"
        android:pathData="M-0.0005,0.0004C13.2462,0.0004 23.9991,10.7533 23.9991,24C23.9991,37.2467 13.2462,47.9996 -0.0005,47.9996L-0.0005,0.0004Z" />

</vector> 
```

并且还在布局 xml 中添加下一个属性

```
android:adjustViewBounds="true"
android:scaleType="fitXY" 
```

# php - 需要帮助从复制/粘贴的 if 语句中循环

> ID：15962747
> 
> 赞同：0
> 
> 时间：2013-04-12T03:51:48.523
> 
> 标签：php, html, if-statement

我有一个页面，它从数据库中获取信息并将其显示在表格中。它确实有效，但它非常麻烦。

```
//Table header here
echo "<tr><td>".$teamname."</td>";

//For Gameweek 7
if ($gw7 == "") 
{ 
    //The team has no game - highlight the cell in red
    echo "<td align='center' style='background: #FF0000'>"; 
}
    elseif (strpos($gw7,'/') !== false) 
{ 
    //The team has 2 games this week - highlight it in green
    echo "<td align='center' style='background: #00FF00'>"; 
}
else
{
    //this means the team has a single game this week - normal cell.
    echo "<td align='center'>";
}
echo $gw7."</td>";
echo "</tr>";

//for gameweek 8 to 36, the above for loop is just repeated (mostly copy/pasted)

//Table footer here 
```

有更清洁的方法吗？我不喜欢多次复制/粘贴相同的代码。

比赛周称为`$gw7`、`$gw8`、等`$gw9`，`$gw10`并以文本格式包含球队面临的对手。$gw7 中的 7 代表本赛季的第 7 套比赛。它们被分组到游戏周中。如果不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:11:18.830

```
 $team_array=array("team1","team2","team3","team4"); //as many teams you want
 foreach($team_array as $teamname)
 {
    $rows=getfixturesfromdb($teamname);
    //if fixtures are like $rows['gw1'],$rows['gw2']....etc
    foreach($row as  $gw)
    {
       echo "<tr><td>".$teamname."</td>";
       if ($gw == "") 
     { 
          //The team has no game - highlight the cell in red
          echo "<td align='center' style='background: #FF0000'>"; 
     }
         elseif (strpos($gw,'/') !== false) 
     { 
        //The team has 2 games this week - highlight it in green
        echo "<td align='center' style='background: #00FF00'>"; 
      }
        else
      {
         //this means the team has a single game this week - normal cell.
         echo "<td align='center'>";
      }
         echo $gw."</td>";
         echo "</tr>";
     }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T03:56:39.297

像这样创建函数

```
function gw($week) {
    //For Gameweek 7
    if ($week == "") 
    { 
        //The team has no game - highlight the cell in red
        echo "<td align='center' style='background: #FF0000'>"; 
    }
    elseif (strpos($week,'/') !== false) 
    { 
        //The team has 2 games this week - highlight it in green
        echo "<td align='center' style='background: #00FF00'>"; 
    }
    else
    {
        //this means the team has a single game this week - normal cell.
        echo "<td align='center'>";
    }
    echo $week."</td>";
}

//Table header here
echo "<tr><td>".$teamname."</td>";
gw($gw7); // call here function for $gw7 for others as well
echo "</tr>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T03:56:41.327

您将游戏周放在一个数组中，遍历并调用数组索引高于 6 的自定义代码。

```
function table_cell($color) {
    echo "<td align='center' style='background: $color'>"; 
}

//Table header here
echo "<tr><td>".$teamname."</td>";

//For Gameweek 7
if ($gw7 == "") 
{ 
    table_cell('#FF0000');
    //The team has no game - highlight the cell in red

}
    elseif (strpos($gw7,'/') !== false) 
{ 
    table_cell('#00FF00');
    //The team has 2 games this week - highlight it in green
}
else
{
    //this means the team has a single game this week - normal cell.
    echo "<td align='center'>";
}
echo $gw7."</td>";
echo "</tr>"; 
```

# android - 使用 RSS 进行 Android XML 解析

> ID：15962749
> 
> 赞同：0
> 
> 时间：2013-04-12T03:52:10.483
> 
> 标签：android, android-layout, android-intent

我有我的 Rss 文件项目：

```
<item >
<title>Prasad</title>
<link>http://www.tele.com/rssHostDescr.php?hostId=15</link>
<guid isPermaLink="false">http://www.tele.com/rssHostDescr.php?hostId=14</guid>
<pubDate>2013-04-10</pubDate>
<description>Prasad</description>
<media:thumbnail width='66' height='49' url='http://www.tele.com/hos/Panthi-image.jpg'></media:thumbnail>
</item>
<item>
........................
</item>

etc..................... 
```

我正在尝试解析上述文件，我能够获取所有信息（标题、链接、日期），但我的要求是获取 url 属性值。如何从 media:thumbnail 标签中获取 URL 值？有人可以帮忙吗？

这是我的代码：

```
public class AndroidXMLParsingActivity extends ListActivity {

    // All static variables
    static final String URL = "http://www.tele.com/RSSFeed/toriHos.php";
    // XML node keys
    static final String KEY_ITEM = "item"; // parent node
    static final String KEY_TITLE=  "title";

    static final String KEY_LINK = "link";
    static final String KEY_PUBDATE = "pubDate";
    static final String KEY_MEDIA = "media:thumbnail";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        NodeList n=doc.getElementsByTagName(KEY_MEDIA);

        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_LINK, parser.getValue(e, KEY_LINK));
            map.put(KEY_PUBDATE, parser.getValue(e, KEY_PUBDATE));
            map.put(KEY_MEDIA, parser.getValue(e, KEY_MEDIA));//Here I'm not getting any value

            // adding HashList to ArrayList
            menuItems.add(map);
        }
    }
} 
```

**注意：map.put(KEY_MEDIA, parser.getValue(e, KEY_MEDIA));//这里我没有得到任何值**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:11:34.643

```
Element e = (Element) nl.item(i);
String urlStr = e.getAttribute("url"); 
```

希望这会帮助你。

# hibernate-search - 休眠搜索 - 更新关联对象时重新索引

> ID：15962752
> 
> 赞同：2
> 
> 时间：2013-04-12T03:52:26.997
> 
> 标签：hibernate-search

我正在使用休眠搜索。我有两个类文章和出版商。

```
public class Publisher {
    private String name;
}

public class Article {
    private Publisher publisher;
    private String title;
    private String description;
} 
```

我想为包含 Article 类中的所有字段和Publisher 类中的*name*字段的合并字段创建索引。

一个要求是，当发布者名称更改并保存到数据库时，该发布者的所有文章也需要重新索引。我该如何做到这一点？非常感谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:32:17.087

您将使用@IndexedEmbedded 和@ContainedIn。前者在*Article中的**publisher*上，后者在*Publisher中的**文章*上。*目前您在Publisher*中没有*文章*字段，但要完成这项工作，您需要一个双向链接。

# javascript - Javascript：如何从数组中的对象获取对象

> ID：15962756
> 
> 赞同：-1
> 
> 时间：2013-04-12T03:53:05.877
> 
> 标签：javascript

样本数据：

```
{
  "data": [
    {
      "name": {
        "full": "JOHN",
        "rank": "SENIOR"
      },
      "mobile": "12345"
    },
    {
      "name": {
        "full": "HENRY",
        "rank": "SENIOR"
      },
      "mobile": "67890"
    },
    {
      "name": {
        "full": "SAM",
        "rank": "JUNIOR"
      },
      "mobile": "54321"
    }
  ]
} 
```

我正在尝试从上面的数据样本中获取高级成员的总数，并且我可以获取**data.name**和**data.mobile**，但我无法从父“name”对象中获取“ **rank ”数据。**谁能指导我获取排名数据。下面是我的javascript：

```
function countRank(rank) {
    var i;
    for (i in rank.data) {
        if (rank.data[i] == "SENIOR") {
            i++;
        }
        document.getElementById('senior').innerHTML = 'Total senior members: ' + i;
    }
}
<div id="senior"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:56:42.333

试试这个 [JSFIDDLE](http://jsfiddle.net/RMfLe/1/)

```
 function countRank(rank) {
    var k=0;
    for (var i=0; i< rank.data.length; i++) {
        if (rank.data[i].name.rank == "SENIOR") {
            k++;
        }
        document.getElementById('senior').innerHTML = 'Total senior members: ' + k;
    }
}
countRank(rank); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:06:25.760

```
function countRank(rank) {
    var count = 0;
    var arr = rank.data;
    for (var i=0; i<arr.length; i++) {
        var name = arr[i].name;
        if (name.rank == "SENIOR") {
            count++;
        }
    }
    alert(count);
} 
```

我检查了它，它运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:09:55.380

你可以做这样的事情

```
var rank = {
    "data": [{
        "name": {
            "full": "JOHN",
            "rank": "SENIOR"
        },
        "mobile": "12345"
    }, {
        "name": {
            "full": "HENRY",
            "rank": "SENIOR"
        },
        "mobile": "67890"
    }, {
        "name": {
            "full": "SAM",
            "rank": "JUNIOR"
        },
        "mobile": "54321"
    }]
};

function countRank(rank) {
    var i = 0,
        arr = rank.data;
    for (var j = 0; j < arr.length; j++) {
        for (var prop in arr[j]) {
            if (arr[j][prop].rank == "SENIOR") {
                i++;
            }
            document.getElementById('senior').innerHTML = 'Total senior members: ' + i;
        }
    }
}

countRank(rank); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T04:11:26.120

使用 jQuery，您可以轻松地从上述数据中找到排名。jsFiddle 上的结帐示例

[http://jsfiddle.net/uBnfu/](http://jsfiddle.net/uBnfu/)

```
$.each(jsonData.data, function (index, value) {
                    alert(value.name['rank']);
                }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T03:57:58.900

```
myObject.data[0].name.rank
>>> "SENIOR" 
```

假设整个对象被称为`obj`：

```
var i=0;
for (i=0; i < obj.data.length; i++) {
    console.log(obj.data[i].name.rank);
} 
```

# mysql - 按日期重复查询

> ID：15962757
> 
> 赞同：0
> 
> 时间：2013-04-12T03:53:07.160
> 
> 标签：mysql, datetime

我的应用程序中有一个存储用户详细信息的表。在这些字段中，用户正在保存他们的警报设置。即，我们将提醒用户他们保存的日期。

我的桌子看起来像

```
id   |    Username     |   name    |    alert_date            |     repeat_on
--------------------------------------------------------------------------------
12   |    user_name    |   name    |  2013-08-12 00:00:00     |     30
15   |    user_nam2    |   name    |  2013-05-12 00:00:00     |     45
-------------------------------------------------------------------------------- 
```

通过 cronjob，我们向用户发送提醒电子邮件和 SMS。喜欢

```
select * from users where date(alert_date)=CURRENT_DATE 
```

它工作正常，但可以选择根据“repeat_on”天数重复警报。就像我们必须从 alert_date 开始每隔 '30' 天（或其他任何时间）重复警报。我被困在这里的查询。

这是执行相同操作的表的正确结构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:59:14.307

尝试：

```
SELECT * FROM users 
WHERE alert_date <= CURRENT_DATE AND DATE_ADD(alert_date, INTERVAL repeat_on DAY) >= CURRENT_DATE 
```

# python - 如何将模块名称分配给变量？

> ID：15962760
> 
> 赞同：-1
> 
> 时间：2013-04-12T03:53:31.803
> 
> 标签：python, python-2.7, import, module

我想动态地让用户选择他/她想要使用的数据主体。为此，在用户确定他们选择的“语料库”后，我必须导入适当的语料库。（我在 Python 2.7.3 上运行）

```
corpora_ls = ["gutenberg","inaugural","movie_reviews","state_union"]
import_validation = False

while not import_validation:
    print "Corpora Options: \"gutenberg\", \"inaugural\", \"movie_reviews\", \"state_union\"."
    import_option = str(raw_input("What corpus would you like to import? "))

    if import_option in corpora_ls:
        import_validation = True

        if import_option == "gutenberg":
            fname = "gutenberg"
            from nltk.corpus import gutenberg as DATA
        elif import_option == "inaugural":
            fname = "inaugural"
            from nltk.corpus import inaugural as DATA
        elif import_option == "movie_reviews":
            fname = "movie_reviews"
            from nltk.corpus import movie_reviews as DATA
        elif import_option == "state_union":
            fname = "state_union"
            from nltk.corpus import state_union as DATA
    else:
        print "Please enter one of the available corpora as listed.\n" 
```

坦率地说，这段代码对我来说看起来很麻烦。我希望能够简单地说几句：

```
if import_option == "gutenberg":
    fname = "gutenberg"
elif import_option == "inaugural":
    fname = "inaugural"

   etc....

from nltk.corpus import import_option as DATA 
```

而不必`from nltk.corpus...etc.`为每个`if/elif`

这样的事情可能吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T03:56:58.697

是的。您可以使用`getattr`：

```
import nltk.corpus
corpus_data = getattr(nltk.corpus, corpus_name) 
```

# php - 如何获取表上最后插入的 id 以在另一个表上的另一个插入中使用它？

> ID：15962774
> 
> 赞同：1
> 
> 时间：2013-04-12T03:55:20.943
> 
> 标签：php, mysql, insert

我试图在一个名为的表上获取最后插入的 id 的 id，`authors`以便在另一个插入到名为 的表中使用它`mail`。

正如你所看到的，这是在 table 中插入一个新作者`authors`，并且在插入之后它必须在 table 中插入一条欢迎消息给新作者`mail`。

我正在使用`mysql_insert_id()`但它不起作用。没有任何内容保存到数据库中，也不会发生错误。

**我知道我不应该使用 mysql_query 但没关系，这不是重点，请忽略这个。**

```
if(!isset($row[email])){

    $sql = "INSERT INTO authors VALUES (NULL, 0, '".$email."', '".$username."', NULL, '".$first."', '".$fullname."', '".$first."', NULL, NULL, NULL, NULL,'http://www.gravatar.com/avatar/".md5(strtolower(trim($email)))."', 0);";
    mysql_query($sql);

    $sqlmsg = "INSERT INTO mail VALUES (NULL, 1, mysql_insert_id(), 'Welcome', Hello! Welcome to the website!', 'unread', NOW, 0, 0)";
    mysql_query($sqlmsg);

} 
```

为什么插入新作者时没有任何反应？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:46:48.933

尝试将其保存在临时变量中，然后再在下一个查询中使用它。

```
<?php
if(!isset($row[email])){

  $sql = "INSERT INTO authors VALUES (NULL, 0, '".$email."', '".$username."', NULL, '".$first."', '".$fullname."', '".$first."', NULL, NULL, NULL, NULL,'http://www.gravatar.com/avatar/".md5(strtolower(trim($email)))."', 0);";
  mysql_query($sql);

  $author_id = mysql_insert_id();

  $sqlmsg = "INSERT INTO mail VALUES (NULL, 1, $author_id, 'Welcome', Hello! Welcome to the website!', 'unread', NOW, 0, 0)";
  mysql_query($sqlmsg);

}   
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T03:56:28.903

您需要在字符串中连接它，

```
$sqlmsg = "INSERT INTO mail VALUES (NULL, 1, " . mysql_insert_id() . ", 'Welcome', Hello! Welcome to the website!', 'unread', NOW, 0, 0)"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:33:43.377

在表上使用选择查询并按 'id' desc 排序，限制为 1

```
select `id` from `authors` order by `id desc limit 1 
```

如果它是自动递增的，将返回最后一个 id。

# actionscript-3 - 动作脚本移动项目。如何添加日期微调器

> ID：15962775
> 
> 赞同：0
> 
> 时间：2013-04-12T03:55:22.930
> 
> 标签：actionscript-3

我应该如何将 dateSpinner 组件添加到动作脚本移动项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:10:18.350

作为 Flex 组件，`DateSpinner`只能从`spark.components`包中获得；因此，不包含在纯 ActionScript 项目中。

在 Flex 框架内实现的微调器是从 Flash 呈现的，以便在多个平台上无处不在的交付。

尽管可能存在本机扩展，但 AIR 不会公开诸如 UIDatePicker 之类的本机控件。

如果您使用的是 Adob​​e Flash Builder，而不是 ActionScript 移动项目，则可以创建一个基于 Flex 的应用程序：

![弹性移动项目](https://i.stack.imgur.com/iJyYp.png)

一个示例 MXML 实现：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               applicationDPI="160">

    <s:DateSpinner id="dateSpinner"
                   displayMode="dateAndTime"
                   selectedDate="{new Date(2013, 3, 12)}"
                   minDate="{new Date(2013, 0, 1)}"
                   maxDate="{new Date(2013, 11, 31)}"
                   minuteStepSize="5" />

</s:Application> 
```

然后会产生以下内容：

![日期微调器](https://i.stack.imgur.com/tL5Pa.png)

# ember.js - Ember.JS：您的服务器返回了一个带有密钥 id 的哈希，但您没有它的映射

> ID：15962783
> 
> 赞同：3
> 
> 时间：2013-04-12T03:56:01.750
> 
> 标签：ember.js, ember-data, sails.js

考虑这个 Ember JS 模型：

```
App.User = DS.Model.extend({
    firstName: DS.attr('string')
}); 
```

我能够使用它作为 XHR 请求成功地将模型保存在服务器上：

```
{ 
   "user": {
     "first_name":"dude"
   }
} 
```

但由于某种原因，它在返回此 XHR 响应时给了我一个错误：

```
{
    "id":1,
    "user":{
        "first_name":"dude"
    },
    "createdAt":"2013-04-12T03:13:52.382Z",
    "updatedAt":"2013-04-12T03:13:52.382Z"
} 
```

错误说：***您的服务器返回了一个带有密钥 id 的哈希，但您没有它的映射***

Ember 期望输出如下所示：

```
{ 
   "user": {
     "id":1,
     "first_name":"dude",
     "createdAt":"2013-04-12T03:13:52.382Z",
     "updatedAt":"2013-04-12T03:13:52.382Z"
   }
} 
```

我认为问题在于请求本身，但我不确定。请注意，我使用 Sails API 作为后端。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T16:28:25.777

您可以使用控制器将数据格式编组为您需要的任何格式——但这提出了一个有趣的问题，即向 API 蓝图添加对不同前端约定的支持。目前，Sails.js API 蓝图支持开箱即用的 Backbone，但如果您使用 Ember，显然这对您没有多大好处 :) 我在这里创建了一个问题[https://github.com/ balderdashy/sails/issues/317](https://github.com/balderdashy/sails/issues/317)。

这是一个 hacky 示例，说明您如何使用自定义控制器今天使用 Sails 以这种格式发送回数据：

```
// api/controllers/UserController.js
module.exports = {

  // Create action: (e.g. using default route, you'd POST to /user/create)
  create: function (req,res) {
    // Grab attributes from request using Ember conventions
    var newAttributes = req.param('user');

    // Create the user object in the datastore
    User.create(newAttributes, function (err, newUser) {
      // If there was an error, handle it
      if (err) return res.send(err,500);

      // Respond with the user object using Ember conventions
      res.json({
         user: newUser
      });
    });
  }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T05:13:45.487

这是一个格式怪异的 JSON 响应。您有权访问服务器吗？Ember 期望响应为带有根键的哈希值

```
{ 
   "user": {
     "id":1,
     "first_name":"dude",
     "createdAt":"2013-04-12T03:13:52.382Z",
     "updatedAt":"2013-04-12T03:13:52.382Z"
   }
} 
```

# asp.net - 在不损失质量的情况下调整 JPEG 图像的大小

> ID：15962795
> 
> 赞同：0
> 
> 时间：2013-04-12T03:57:06.777
> 
> 标签：asp.net, c#-4.0

我有这段代码可以将图像大小调整为 300x300。但是在调整大小后，图像仍然失去了它的质量。我已经尝试过在其他网站上发布的其他解决方案，这些解决方案与此代码具有相同的代码实现，但它对我不起作用。请帮我解决一下这个。

```
Stream ream = FileUploadPic.FileContent;
            System.Drawing.Image i = new Bitmap(ream);

            Bitmap Orig_Photo = new Bitmap(i);
            Bitmap resize_Photo = new Bitmap(300,300);
            Graphics thumbnailGraph = Graphics.FromImage(resize_Photo);
            thumbnailGraph.CompositingQuality = CompositingQuality.HighQuality;
            thumbnailGraph.SmoothingMode = SmoothingMode.AntiAlias;
            thumbnailGraph.InterpolationMode = InterpolationMode.HighQualityBicubic;
            thumbnailGraph.PixelOffsetMode = PixelOffsetMode.HighQuality;

            var imageRectangle = new Rectangle(0, 0, 300, 300);
            thumbnailGraph.DrawImage(i, imageRectangle);
            System.Drawing.Image ii = new Bitmap(resize_Photo); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:40:54.867

我用过这个代码一次，所以你可以试试这个，这是c#版本

```
 Bitmap img = new Bitmap(newW, newH);
        using (Graphics g = Graphics.FromImage(img))
        {
            g.SmoothingMode = SmoothingMode.HighQuality;
            g.InterpolationMode = InterpolationMode.HighQualityBicubic;
            g.PixelOffsetMode = PixelOffsetMode.HighQuality;
            g.DrawImage(srcImage, new Rectangle(0, 0, newW, newH));
        } 
```

这里是您要重新调整图像大小的新高度和宽度`newW`。`newH`

您还需要包括`using System.Drawing;`名称空间。

# sqlite - 为什么 sqlite3_bind_* 从索引 1 开始，但 sqlite3_column_* 从 0 开始？

> ID：15962798
> 
> 赞同：5
> 
> 时间：2013-04-12T03:57:12.930
> 
> 标签：sqlite

在 sqlite3.h 的评论中：

对于 sqlite3_bind_ *，** ^如果需要，可以使用 ** [sqlite3_bind_parameter_index()] API 查找命名参数的索引。^“?NNN”参数的索引**是NNN的值。** ^NNN 值必须介于**1**和 [sqlite3_limit()]之间

for sqlite3_column_* ** ^结果集中最左边的列的索引为 0。 ** ^结果中的列数可以使用 ** [sqlite3_column_count()] 确定。

为什么会有这么奇怪的矛盾？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T05:04:42.940

没有奇怪的不一致。

这些`sqlite3_bind_*()`函数将值与 printf 样式的格式说明符（SQLite3 自己的术语中的“主机参数名称”）相关联。具有与函数参数类似的功能，它符合从 1 开始编号的约定（“第一个参数”，“第二个参数”，...）。

相似之处：在 POSIX C 中，该`printf()`函数接受可以使用`%N$c`语法修改转换顺序的格式字符串，其中`c`是实际的转换说明符字符或 char 序列，并且`N`是**从 1 开始的数字。**

但是，这些列不是类似参数的实体。它们是可索引数据结构中的项目。例如，它们更类似于数组的元素，这就是为什么从零开始索引它们是有意义的。

# android - CursorLoader 和 Cursor accsss 在循环内

> ID：15962804
> 
> 赞同：0
> 
> 时间：2013-04-12T03:58:27.420
> 
> 标签：android, android-contentprovider, android-cursor, android-loadermanager, android-cursorloader

我正在构建一个 ListView，ListView 中的每个项目都有来自几个不同游标的数据。我有一个对象，它包含 ListView 中每个项目的所有数据。我正在使用这些对象的 ArrayList 来填充 ListView。

我现在实现它的方式是，我首先获得一个指向 ContentProvider A 中所有行的游标。我遍历这个游标，将它的三个字段添加到 ArrayList 中的每个对象。在此循环的每次迭代中，都会创建一个新游标，以根据 ContentProvider A 中的字段从 ContentProvider B 中提取一个字段。该字段用于在 ContentProvider C 中提取另一个字段。因此，本质上，创建了很多游标，并且后续游标的查询依赖于来自先前游标的数据。

据我了解，使用 CursorLoaders 和 LoaderManager 在单独的线程中生成游标并正确管理它们的生命周期是理想的。我不确定如何翻译这种方法，或者实际上是否有更好的方法可以首先最小化游标的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:17:13.640

我认为`CursorLoader`在这种情况下，简单的解决方案不是正确的解决方案。我想你可能有两种可能：

*   `CursorLoader`首先使用 a并在 ListAdapter 的方法中`Cursor`使用-chaining。使用-chaining 我的意思是调用 你的方法。`CursorLoader``getView()``CursorLoader``initLoader()``onLoadfinished()`
*   在您需要的对象树中使用`AsyncTaskLoader`并创建。`AsyncTask`

在这两种解决方案中，我认为第二种可能更好——除非列表很长。这是 ContentProviders 不足的一个领域。您基本上必须查询 n+1 次（在您的情况下为 n+2 次）一次连接就足够了。

如果您的列表很长，则第二种方法不可用，您的 AsyncTask 将花费很长时间让用户接受它。

如果您听说过（或发现自己）有更好的解决方案，请在此处联系我。

# python - 从 python 列表项创建有序列表

> ID：15962805
> 
> 赞同：3
> 
> 时间：2013-04-12T03:58:31.997
> 
> 标签：python, html, jinja2

有一个`whatever`我想在 Jinja 中逐项列出的列表：

```
<ol>
{% for item in whatever %}
<tr>
    <td>
       <li> {{ item }}</li>
    </td>
</tr>
{% endfor %}
</ol> 
```

但是，当我以这种方式实现时，我得到无序列表输出而不是序列号，即

*   第 1 项
*   第 2 项
*   等等

而不是

1.  第 1 项
2.  第 2 项
3.  等等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:03:25.573

这实际上是您的 html（而不是 python / jinja）的问题。如果您删除`tr`/`td`标签就可以了。

更新：如果您坚持使用 table 标签，请删除`ol`/`li`标签，并使用jinja循环`loop`中隐式定义的对象。`for`那是，

```
<td>{{loop.index}}. {{item}}</td> 
```

会给你枚举项。

# php - 选择两个日期之间的记录

> ID：15962806
> 
> 赞同：0
> 
> 时间：2013-04-12T03:58:35.663
> 
> 标签：php, mysql

我有一个 php 文件，它将从另一个 php 文件获取输入并在 html 表中显示数据，但是在 sql 语句中我没有得到过滤的日期字段，可能是日期格式不正确。请在这件事上给予我帮助

我的代码如下

```
<?php
$con = mysql_connect("localhost","root","");
if (!$con)
 {
 die('Could not connect: ' . mysql_error());
 }

 mysql_select_db("marketnews", $con);

$date1 = explode('/', $_POST['ADate']);
$time = mktime(0,0,0,$date1[0],$date1[1],$date1[2]);
$mysqldate = date( 'Y-m-d H:i:s', $time );

$date2 = explode('/', $_POST['BDate']);
$time = mktime(0,0,0,$date2[0],$date2[1],$date2[2]);
$mysqldate1 = date( 'Y-m-d H:i:s', $time );

$sec= "$_POST[id]";

echo "<br>";
echo "$mysqldate1";
echo "<br>";
echo "$sec";*/

$result = mysql_query("SELECT * FROM mktnews where security = '$sec' and eventdate    between '$mysqldate' and '$mysqldate1'");
echo '<a href="main.html"><b>BACK</b></a>';
echo "<br>";
echo "<table border='2' BORDERCOLOR=GREEN align='center' >
<tr>
<th>Firm</th>
<th>Name</th>
<th>NIC</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['eventdate'] . "</td>";
  echo "<td>" . $row['news'] . "</td>";
  echo "<td>" . $row['security'] . "</td>";
   echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
```

这个 MySql 表的日期格式是这样的

2013-04-11

请在这件事上给予我帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:04:36.907

根据表的结构，您的日期格式看起来正确，但是您的 mysql 语句中缺少引号。

应该是这样的：

```
 $result = mysql_query("SELECT * FROM mktnews where security = '".$sec."' and eventdate    between '".$mysqldate."' and '".$mysqldate1."'"); 
```

我相信你知道，你也应该逃避你的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:36:49.637

您必须更改日期格式才能与 mysql 表中的日期格式进行比较

利用

```
$mysqldate = date( 'Y-m-d', $time ); instead of $mysqldate = date( 'Y-m-d H:i:s', $time ); 
```

和

```
$mysqldate1 = date( 'Y-m-d', $time ); instead of $mysqldate1 = date( 'Y-m-d H:i:s', $time ); 
```

将根据需要返回结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:58:56.943

改变

```
$mysqldate = date( 'Y-m-d H:i:s', $time ); 
```

至

```
 $mysqldate = date( 'Y-m-d', $time ); 
```

和同样的`$mtsqldate1`

你的php时间格式和mysql时间格式不一样

# c# - 按 Enter 发送命令选项卡时为多个文本框制作代码更好

> ID：15962808
> 
> 赞同：0
> 
> 时间：2013-04-12T03:58:38.077
> 
> 标签：c#, tabs, textbox, keypress, enter

当用户在键盘上按 Enter 键时，我已经有代码，它返回选项卡并“跳转”到下一个字段，它工作得很好，它可能使它用于 2 或 3 个文本框，当需要在多个文本框上制作时出现问题，例如每个文本框 20 个形式，它只是不起作用。

见代码：

```
// Detect if Enter key is pressed on each text box, mute sound enter "ding"  sound and replace Enter for tab (problem that have make it for each textbox)
        private void txtAltura_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (e.KeyChar == (char)Keys.Enter)
            {
                e.Handled = true; //Silenciar Enter
                SendKeys.Send("{TAB}");
            }
        }

        private void txtLargura_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (e.KeyChar == (char)Keys.Enter)
            {
                e.Handled = true; //Silenciar Enter
                SendKeys.Send("{TAB}");
            }
        }

        private void txtProfundidade_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (e.KeyChar == (char)Keys.Enter)
            {
                e.Handled = true; //Silenciar Enter
                SendKeys.Send("{TAB}");
            }
        }

//execute keypress command when enter is typed on textbox 
    private void txtProfundidade_TextChanged(object sender, EventArgs e)
            {
                if (txtProfundidade.Text != "") { foreach (char c in txtProfundidade.Text.ToCharArray()) txtProfundidade_KeyPress(sender, new KeyPressEventArgs(c)); }

            }

            private void txtLargura_TextChanged(object sender, EventArgs e)
            {
                if (txtLargura.Text != "") { foreach (char c in txtLargura.Text.ToCharArray()) txtLargura_KeyPress(sender, new KeyPressEventArgs(c)); }
            }

            private void txtAltura_TextChanged(object sender, EventArgs e)
            {
                if (txtAltura.Text != ""){foreach (char c in txtAltura.Text.ToCharArray()) txtAltura_KeyPress(sender, new KeyPressEventArgs(c));}
            } 
```

希望让它变得更好。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:17:35.647

据我了解，您正试图找出一种将事件处理程序分配给多个文本框控件的方法，并且不想为每个控件编写一个处理程序。如果是这种情况，试试这个：

```
private void Form1_Load(object sender, EventArgs e)
{
    foreach (TextBox textBox in this.Controls.OfType<TextBox>())
    {
        textBox.KeyDown += new KeyEventHandler(textBox_KeyDown);
    }
}

void textBox_KeyDown(object sender, KeyEventArgs e)
{
   if (e.KeyCode == Keys.Enter)
   {
      e.Handled = true;
      SendKeys.Send("{TAB}");
   }
} 
```

这将为表单上的每个文本框控件分配一个处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:21:09.677

如果它的 windows 窗体应用程序可以使用它，这将用 Enter 键替换 tab 键

```
protected override bool ProcessKeyPreview(ref Message m)
            {
                if (m.Msg == 0x0100 && (int)m.WParam == 13)
                {
                    this.ProcessTabKey(true);
                }
                return base.ProcessKeyPreview(ref m);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:14:38.423

那效果很好。

我还必须在每个文本框上重复此操作，以检查是否所有代码都已填写并更新状态栏：

```
 private void txtAltura_TextChanged(object sender, EventArgs e)
        {
            testePreenchidoecalculo();
        }

        private void txtLargura_TextChanged(object sender, EventArgs e)
        {
            testePreenchidoecalculo();
        }

        private void txtProfundidade_TextChanged(object sender, EventArgs e)
        {
            testePreenchidoecalculo();
        } 
```

有可能让它变得更好吗？

# .net - .net GridView OnRowUpdating 没有获取 TextBox 的当前值

> ID：15962809
> 
> 赞同：2
> 
> 时间：2013-04-12T03:58:51.047
> 
> 标签：.net, gridview, webforms

根据这个文档，我添加了一个 gridview 并实现了 onupdate。 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowediting.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowediting.aspx)

我打开页面并单击编辑，这将设置 editinex 并重新绑定：

```
protected void rowEdit(object sender, GridViewEditEventArgs e)
{
    EditProducts.EditIndex = e.NewEditIndex;
    EditProducts.DataBind();
} 
```

在第三列中，我更改了值（假设它是“hello”，我将其更改为“goodbye”）。然后点击“更新”。（第一列是用于编辑和删除或更新和取消的按钮列，第二列显示 id）。

调用 onrowupdate 方法，我尝试根据 msdn 中的示例代码（第二个数据列）获取第 3 列的值：

```
protected void RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridViewRow row = EditProducts.Rows[e.RowIndex];
    String previousValue= ((TextBox)(row.Cells[2].Controls[0])).Text;
    String actualValue = Request.Params["EditProducts$ctl02$ctl03"]; 
```

字符串 previousValue 不是“再见”；它仍然是“你好”

在 Firefox 中，我可以看到“再见”已提交，但 rowUpdating 中 TextBox 控件的值是“hello”。必须从视图状态中错误地获取。

所以我添加了获取 request.params 的实际值，并将其设置为“再见”。

我有以下问题：

msdn上提供的代码错了吗？

TextBox 控件不应该代表提交时输入包含的值的 Text 属性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:20:48.930

你应该在页面加载事件上绑定你的gridview

```
 if (!IsPostBack)
        {
        } 
```

**绑定控件会覆盖值，并且您确实在页面加载中绑定了它而没有检查回发。**

# php - 将图像描述悬停在图像上

> ID：15962811
> 
> 赞同：1
> 
> 时间：2013-04-12T03:58:55.740
> 
> 标签：php, javascript, jquery, hover

我不是 PHP、javascript 和 js 方面的专家；所以我希望有人可以用简单的语言帮助我。我刚刚开发了我的第一个 wordpress 网站并极大地更改了代码，使用这个论坛 - 到目前为止非常感谢！

网站：[http ://www.heritageglass.com.au](http://www.heritageglass.com.au)

**我的要求：文本（媒体库中的图像描述）悬停在图像上。**

就像这个[网站](http://www.redearth.com/complexion/primer.html)或这个[插件](http://coryschires.com/jquery-hover-caption-plugin/)一样，我在这个网站上发现了几个与我的问题有关的问题，但它们似乎没有帮助，或者我不知道把它放在哪里，因为它正在抓取`the_title`并且我想要`the_description`。有这样的说法吗？

**Portfolio.php 模板中的 PHP 代码：**

```
<div data-id="post-<?php the_ID(); ?>" data-type="<?php
  $categories = get_the_category();
  $count = count($categories);
  $i=1;
  foreach($categories as $category) {
      echo str_replace('-', '', $category->slug);
      if ($i<$count) echo ' '; $i++;} ?>" class="post-<?php the_ID(); ?>
      <?php
        $categories = get_the_category();
        foreach($categories as $category) {
            echo str_replace('-', '', $category->slug).' '; } ?> project portfolio-item-wrap">
    <div class="portfolio-item">
        <?php if ( has_post_thumbnail() ) { ?>
        <a class="portfolio-item-img" href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_post_thumbnail( 'portfolio-image' ); ?></a>
        <?php } ?>

        <h4><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h4>
        <p>
            <?php
            $categories = get_the_category(); 
            $temp = array();
            foreach($categories as $category) {
                if ($category->category_parent == 0) continue;
                $temp[] = str_replace('-', '', $category->name); 
            } 
            echo implode(", ", $temp);
            ?>
        </p>
    </div>
</div> 
```

我发现了这个：[Text over image using jquery and css](https://stackoverflow.com/questions/11031602/text-over-image-using-jquery-and-css) ，并在 header.php 中添加了脚本。并使用我的 .portfolio-item 和 .portfolio-item-img 而不是 .wrapper 和 .description - 但这并没有做任何事情。

希望有人能引导我朝着正确的方向前进吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:03:11.267

编辑帖子时，添加两个自定义字段，一个用于标题，一个用于描述。我们的代码是这样的：

```
$dataType = '';
$divClass = '';

$categories = get_the_category();
$count = count($categories); 
$i=1; 
foreach($categories as $category) {
    $dataType .= str_replace('-', '', $category->slug); 
    $divClass .= str_replace('-', '', $category->slug).' ';
    if ($i<$count) $dataType.= ' ';
    $i++;
}

$metaList = get_post_meta(get_the_ID());
$title = isset($metaList['title']) ? $metaList['title'] : '';
$description = isset($metaList['description']) ? $metaList['description'] : '';

// now we have title and description for the thumb!
?>
<div data-id="post-<?php the_ID(); ?>" data-type="<?php echo $dataType;?>"
    class="post-<?php the_ID(); echo $divClass;?>  project portfolio-item-wrap">
    <div class="portfolio-item">
        <?php if ( has_post_thumbnail() ) { ?>
            <a class="portfolio-item-img" href="<?php the_permalink(); ?>" title="<?php the_title(); ?>">
                <?php the_post_thumbnail( 'portfolio-image' ); ?>
            </a>
        <?php } ?>

        <h4><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h4>
        <p>
            <?php
                $temp = array();
                foreach($categories as $category) {
                    if ($category->category_parent == 0) continue;
                    $temp[] = str_replace('-', '', $category->name); 
                } 
                echo implode(", ", $temp);
            ?>
        </p>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:35:32.063

我想它会帮助你......

[http://www.net-kit.com/10-jquery-caption-plugins/#](http://www.net-kit.com/10-jquery-caption-plugins/#)

[http://www.inwebson.com/jquery/jquery-image-hover-effects/](http://www.inwebson.com/jquery/jquery-image-hover-effects/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T04:47:44.507

经过大量研究，我找到了答案。

这就是答案：[如何从我的 wordpress 页面获取特色图片描述？](https://stackoverflow.com/questions/11907810/how-do-i-get-the-featured-image-description-from-my-wordpress-page)

输入 the_post_thumbnail_caption(); 在跨度标签中并在 CSS 中设置您的跨度标签类。

完毕。

感谢大家的帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T04:34:15.973

[在四年前的WordPress 论坛](http://wordpress.org/support/topic/post-image-4)上进行搜索时，我发现了这个，不确定它是否是您需要的，但它可能会为您指明正确的方向。

```
$img_desc = $image->post_excerpt; 
```

# cocoa - 如何在 mac os x 中获得浮动窗口

> ID：15962813
> 
> 赞同：1
> 
> 时间：2013-04-12T03:59:18.227
> 
> 标签：cocoa

抱歉，我不知道那个窗口叫什么。我认为它更像是一个对话框。Mac 应用程序备忘单 ( [http://www.cheatsheetapp.com/CheatSheet/](http://www.cheatsheetapp.com/CheatSheet/) ) 或 keycue ( [http://www.ergonis.com/products/keycue/](http://www.ergonis.com/products/keycue/) ) 都有。如何使用这种窗口构建应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:51:52.897

查看 Apple 的 RoundTransparentWindow 示例代码： [https ://developer.apple.com/library/mac/#samplecode/RoundTransparentWindow/Introduction/Intro.html](https://developer.apple.com/library/mac/#samplecode/RoundTransparentWindow/Introduction/Intro.html)

此外，这里有一个旧教程：http: [//www.cocoawithlove.com/2008/12/drawing-custom-window-on-mac-os-x.html](http://www.cocoawithlove.com/2008/12/drawing-custom-window-on-mac-os-x.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T06:44:28.630

你想制作一个 NSPanel 并设置它的窗口级别。试用 CGWindowLevel.h 中定义的可用窗口级别，看看哪一个最适合您的应用程序。

# javascript - jQuerys event.PreventDefault(); 怎么样？完毕？

> ID：15962816
> 
> 赞同：-1
> 
> 时间：2013-04-12T03:59:25.740
> 
> 标签：javascript

我现在正在尝试学习`Javascript`，我正在做一些小事，当我点击`Anchor`我不想刷新页面时，我添加了一个，`href='#'`但如果我是，页面仍然会跳到顶部在底部，然后单击`Anchor`。我试图避免这种情况，我尝试使用谷歌搜索，但我一生都找不到任何东西，我在没有 jQuery 的情况下搜索了“event.preventDefault”，什么也没有。任何信息都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:02:21.020

`preventDefault`实际上不是 jQuery 的东西。当您添加事件侦听器时，您的处理程序将获得一个与 jQuery 事件参数不同的事件参数。jQuery 简单地包装了它以使其在跨浏览器中更加一致，但是`preventDefault`存在于普通的非 jQuery 浏览器中。

例如：

```
document.getElementById('my_link').addEventListener('click', function(e) {
    e.preventDefault();  // No jQuery needed!
}, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:01:35.757

只需像这样将 javascript:void(0) 添加到 href

```
 <a href='javascript:void(0)' onclick="doSomething()" /> 
```

有了它，您甚至可以根据需要使锚链接运行 javascript 函数。或者只是简单

```
 <a href='javascript:void(0)' /> 
```

你不需要 jQuerys event.PreventDefault(); 处理那些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:05:03.050

阻止导航的最简单方法是从单击处理程序返回 false：

```
<a href="#" onclick="return false;" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T04:00:59.127

它跳到顶部，因为你告诉它。

试试`href="javascript:;"`。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-12T04:01:08.463

您正在寻找：

```
$("#anchorID").click(function() {
  return false;
}); 
```

或 $("#anchorID").click(function(d) { d.PreventDefault(); });

# java - 在 servlet 过滤器中同步代码

> ID：15962820
> 
> 赞同：3
> 
> 时间：2013-04-12T04:00:13.013
> 
> 标签：java, multithreading, servlets, servlet-filters, synchronized

我有一个 servlet 过滤器，在其中我需要使一些代码成为线程安全的。

我给出了抽象代码：

```
doFilter() {
{
......
if (condition1) {
TestClass testObj = StaticTestClass.getTestObj();
testObj = testObj.setTestStr(testObj.getTestStr() + "Success");
StaticTestClass.setTestObj(testObj);
}
.....
} 
```

我想让它线程安全。条件 1 很少为真，因此由于同步而对性能的影响可以忽略不计。所以我可以做以下任何事情：

```
doFilter() {
{
......
if (condition1) {
TestClass testObj = StaticTestClass.getTestObj();
synchronized(this) {
testObj = testObj.setTestStr(testObj.getTestStr() + "Success");
StaticTestClass.setTestObj(testObj);
}}
......
} 
```

或者

```
doFilter() {
{
......
if (condition1) {
TestClass testObj = StaticTestClass.getTestObj();
synchronized(testObj) {
testObj = testObj.setTestStr(testObj.getTestStr() + "Success");
StaticTestClass.setTestObj(testObj);
}}
......
} 
```

根据我的理解，从概念上讲，第二个更准确，因为它锁定了 testObj。但是第一个也是正确的，因为容器中只有一个 servlet 过滤器实例。

请让我知道是否有人有不同的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:14:54.053

您的理解是正确的：第二个选项是两者中更正确的一个，因为同步语句的目标是访问`testObj`，而不是`this`。

如果在未来的某个时间点您需要在您的应用程序中实现新功能并添加其他访问权限`testObj`，您将必须启用该同步`testObj`，而**不是**启用该同步`this`。所以你不妨从一开始就做到这一点。

# ios - 有没有更好的方法来深度复制 UIWebView？

> ID：15962822
> 
> 赞同：4
> 
> 时间：2013-04-12T04:00:15.467
> 
> 标签：ios, objective-c, uiwebview, deep-copy

我设法通过将 a`UIWebView`加载到`NSURLRequest`新的`UIWebView`. 我还设法使用 javascript 复制了“scrollTo”位置。现在我正在考虑复制历史，可能还有很多其他的东西。

是否有记录的方法可以正确执行此操作，或者我快到了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:19:42.767

不幸的是，没有直接的方法来实现这一点。

由于`UIWebView`不符合`NSCopying`协议，我相信你的方法到目前为止是有效的。

如果您想使其可重用，您可能会考虑子类化并在协议方法`UIWebView`的方法中实现您的复制算法。`copyWithZone:``NSCopying`

如果这样做，您可以随后使用标准`copy`方法来深度复制您的对象。

举个例子

### UICopyableWebView.h

```
@interface UICopyableWebView : UIWebView <NSCopying>
@end 
```

### UICopyableWebView.m

```
#import "UICopyableWebView.h"

@implementation UICopyableWebView
- (id)copyWithZone:(NSZone *)zone {
     id copy = [[[self class] alloc] init];

     if (copy) {
         // copy the relevant features of the current instance to the copy instance
     }
     return copy;
}
@end 
```

# c# - 从字节流打印 XPS 文件

> ID：15962823
> 
> 赞同：0
> 
> 时间：2013-04-12T04:00:28.117
> 
> 标签：c#, .net, xps, printqueue

我想用 C# 打印一个 XPS 文件。我将 XPS 文件作为字节流获取。我试图用课堂上`AddJob`提供的不同方法来实现这一点，但`PrintQueue`遇到了以下问题

*   `AddJob(String)`

这接受一个字节流并进行打印。但是这种方法会使文件假脱机很长时间，所以不能使用它。

*   `AddJob(String, PrintTicket)`

这需要 XPS 文件的物理文件位置。因为我的文件是字节流，所以不能使用这个

*   `AddJob(String, String, Boolean)`

此方法还需要物理文件位置

*   `AddJob(String, String, Boolean, PrintTicket)`

需要物理文件位置

因此**，如何从字节流中打印 XPS 文件**。我不想为此使用任何 3rd 方库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:47:43.763

您是否尝试过以下重载：

**AddJob** () - 将一个新的（通常命名的）打印作业，其内容是一个字节数组，插入到队列中。

从 MSDN 获得的一些示例代码如下

```
// Create the printer server and print queue objects
LocalPrintServer localPrintServer = new LocalPrintServer();
PrintQueue defaultPrintQueue = LocalPrintServer.GetDefaultPrintQueue();

// Call AddJob
PrintSystemJobInfo myPrintJob = defaultPrintQueue.AddJob();

// Write a Byte buffer to the JobStream and close the stream
Stream myStream = myPrintJob.JobStream;
Byte[] myByteBuffer = UnicodeEncoding.Unicode.GetBytes("This is a test string for the print job stream.");
myStream.Write(myByteBuffer, 0, myByteBuffer.Length);
myStream.Close(); 
```

# tags - 如何使用 Cassandra 在宽列中设计多标记？

> ID：15962824
> 
> 赞同：0
> 
> 时间：2013-04-12T04:00:49.783
> 
> 标签：tags, cassandra

我正在设计一个带有动态列的时间序列数据库。我想知道，如何支持每列的标记。

# javascript - Backbone - 可以从模型中获取集合

> ID：15962826
> 
> 赞同：17
> 
> 时间：2013-04-12T04:01:06.260
> 
> 标签：javascript, backbone.js

我想知道是否有办法从其中一个模型中获取对集合的引用。例如，如果以下集合中的任何人以某种方式知道属于一个集合或多个集合。 [小提琴](http://jsfiddle.net/jelatin/aZcJV/11/)

```
(function() {
window.App = {
    Models: {},
    Views: {},
    Collections: {}
};

App.Models.Person = Backbone.Model.extend({
    defaults: {
        name: 'John',
        phone: '555-555-5555'
    }
});

App.Views.Person = Backbone.View.extend({
    tagName: 'li',

    template: _.template("<%= name %> -- <%= phone %>"),

    render: function(){
        var template = this.template( this.model.toJSON() );

        this.$el.html( template );

        return this;
    }
});

App.Collections.People = Backbone.Collection.extend({
    model: App.Models.Person 
});

App.Views.People = Backbone.View.extend({
    tagName: 'ul',

    add: function(person){
        var personView = new App.Views.Person({ model: person });

        this.$el.append( personView.render().el );

        return this;
    },

    render: function() {
        this.collection.each(this.add, this);

        return this;
    }
});

})();

var peeps = [ { name: 'Mary' }, { name: 'David' }, { name: 'Tiffany' } ];

var people = new App.Collections.People(peeps);

var peopleView = new App.Views.People({ collection: people });

peopleView.render().$el.appendTo('body'); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-12T04:12:23.453

每个模型都有一个名为 的属性`collection`。在您的小提琴中，添加`console.log(people.models[0].collection)`将打印出集合。

查看源代码，看起来这是用于在`destroy()`调用模型的方法时从集合中删除模型之类的操作。

更新：查看[这个更新的小提琴](http://jsfiddle.net/ctasims/vfSxQ/2/)，它创建了三个人物模型和两个集合。它将它们打印到控制台。看起来`model.collection`只指该人被添加到的第一个集合，而不是第二个。

# java - 带有 Nimbus 的 TableHeaderRenderer

> ID：15962832
> 
> 赞同：0
> 
> 时间：2013-04-12T04:01:43.033
> 
> 标签：java, swing, nimbus, tablecellrenderer, jtableheader

我有一个自定义表头渲染器，它将在 JComponent 中具有标准标签和一个按钮。

我遇到的问题是默认渲染器返回的标签。对默认渲染器的调用提供了标准标签。如果我按原样返回，它看起来像预期的那样。如果我尝试修改背景或边框，则没有任何变化。但是，修改前景确实具有预期的效果。我不想查看排序图标，所以我试图构建一个看起来相同的 JLabel，减去图标。那也不能正常工作。我的 JLabel 不透明。

```
JLabel l = (JLabel)table.getTableHeader().getDefaultRenderer().getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
this.lbl.setBackground(l.getBackground());
return this.lbl; 
```

我查看了 DefaultTableHeaderRenderer 的源代码，但找不到默认类正在执行的任何特殊操作。

我也试过以下没有效果。

```
this.lbl.setOpaque(true);
this.lbl.setFont(UIManager.getFont("TableHeader.font"));
this.lbl.setBorder(UIManager.getBorder("TableHeader.cellBorder"));
this.lbl.setBackground(UIManager.getColor("TableHeader.background"));
this.lbl.setForeground(UIManager.getColor("TableHeader.foreground"));
return this.lbl; 
```

编辑：澄清。上面的两个代码片段都在我的自定义渲染器的 getTableCellRenderComponent() 中。我已经尝试了两种方法，但都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:38:09.423

尝试`UIManager`直接使用 s 值。

```
TableHeader.background = DerivedColor(color=214,217,223 parent=control offsets=0.0,0.0,0.0,0 pColor=214,217,223
TableHeader.font = javax.swing.plaf.FontUIResource[family=SansSerif,name=sansserif,style=plain,size=12]
TableHeader.foreground = DerivedColor(color=0,0,0 parent=text offsets=0.0,0.0,0.0,0 pColor=0,0,0
TableHeader.opaque = true 
```

像这样`UIManager.getColor("TableHeader.background")`的东西

我想你会发现边框实际上是由 UI 委托直接绘制的。

**更新了示例**

![在此处输入图像描述](https://i.stack.imgur.com/iAJip.png)

从包含的图像中，很明显 using`UIManager`确实提供了一些基本信息需要获取标题使用的值，但它确实突出了渲染器正在执行一些特殊的绘画来获取阴影。

第二列是默认渲染器，第三列是厚脸皮。它基本上是直接从表头中窃取单元格渲染器......

```
package testcellrenderer;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.Font;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;

public class TestCellRenderer {

    public static void main(String[] args) {
        new TestCellRenderer();
    }

    public TestCellRenderer() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            DefaultTableModel model = new DefaultTableModel(
                            new Object[][]{{"Testing", "Testing", "Testing"}},
                            new Object[]{"Test A", "Test B", "Test C"}
                            );
            JTable table = new JTable(model);
            table.getColumn("Test A").setCellRenderer(new TestTableCellRenderer());
            table.getColumn("Test C").setCellRenderer(table.getTableHeader().getDefaultRenderer());

            setLayout(new BorderLayout());
            add(new JScrollPane(table));
        }

    }

    protected class TestTableCellRenderer extends DefaultTableCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column); 

            Color background = UIManager.getColor("TableHeader.background");
            Color foreground = UIManager.getColor("TableHeader.foreground");
            Font font = UIManager.getFont("TableHeader.font");
            boolean opaque = UIManager.getBoolean("TableHeader.opaque");

            setBackground(background);
            setForeground(foreground);
            setFont(font);
            setOpaque(opaque);

            return this;
        }       
    }   
} 
```

# ios - 适用于 iOS 相机边界的 Google Maps SDK

> ID：15962835
> 
> 赞同：1
> 
> 时间：2013-04-12T04:02:00.833
> 
> 标签：ios, google-maps, google-maps-sdk-ios

有没有办法在相机上设置边界，以便像在 Android API 中那样自动设置缩放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:59:27.447

这里有一个类似的问题：

[如何使用适用于 iOS 的 google maps sdk 设置区域？](https://stackoverflow.com/questions/15040409/how-to-setregion-with-google-maps-sdk-for-ios)

这里还有一个将其添加到 SDK 的功能请求：

[https://code.google.com/p/gmaps-api-issues/issues/detail?id=4950](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4950)

# unity3d - 无法根据鼠标位置将光线从相机向下投射到对象

> ID：15962837
> 
> 赞同：0
> 
> 时间：2013-04-12T04:02:00.993
> 
> 标签：unity3d, raycasting

我有一个相机俯视我的游戏世界。我想让用户点击对象。以下脚本附加到 MainCamera。

```
void Update () {
    if (holdingSomething)
    {
        if (Input.GetMouseButtonUp(0))
        {
            holdingSomething = false;   
        }
    }
    else if (Input.GetMouseButtonDown(0))
    {
        RaycastHit hit;
        Vector3 mousePos = new Vector3(Input.mousePosition.x,Input.mousePosition.y,0);
        Vector3 rayOrigin = new Vector3(Camera.main.ScreenToWorldPoint(mousePos).x,Camera.main.ScreenToWorldPoint(mousePos).y,Camera.main.transform.position.z);
        Vector3 rayDirection = new Vector3(Camera.main.transform.rotation.x,Camera.main.transform.rotation.y,Camera.main.transform.rotation.z);
        Debug.Log("Mouse button is down" + mousePos);
        Debug.Log("rayOrigin " + rayOrigin);
        Debug.Log("rayDirection " + rayDirection);
        Ray ray = new Ray(rayOrigin,rayDirection);
        if (Physics.Raycast(ray, out hit))
        {
            Debug.Log("We just touched " + hit.collider);
        }
    }
} 
```

这条线`Debug.Log("We just touched " + hit.collider);`永远不会被调用。我不认为我的光线构建正确。这是其他调试消息的输出。在每条消息中，它们的 rayOrigin 都是相同的，即使 mousePos 发生了变化。

```
Mouse button is down(418.7, 195.1, 0.0)
rayOrigin (0.0, 6.2, -7.3)
rayDirection (0.3, 0.0, 0.0)

Mouse button is down(417.7, 278.0, 0.0)
rayOrigin (0.0, 6.2, -7.3)
rayDirection (0.3, 0.0, 0.0) 
```

那么我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:19:14.423

我会这样定义你的 Ray：

```
Ray ray = Camera.Main.ScreenPointToRay(Input.mousePosition); 
```

至于您的代码，我现在无法测试您的代码，所以我不知道到底出了什么问题。因为您应该能够按照您的描述进行操作，即使我的回答是一个更简单的选择。

您可以使用[Debug.DrawLine](http://unity3d.com/support/documentation/ScriptReference/Debug.DrawLine.html)绘制您使用的光线投射的一条线。然后，您可以在运行时在调试器中看到您的光线投射的样子。然后你可以看到你的光线投射是如何定位的。您将能够看到射线的起点和终点。如果其中一个关闭，您可以在知道哪一部分出错的同时检查您的代码。

# java - 贾斯珀报告 JAVA 摇摆

> ID：15962842
> 
> 赞同：2
> 
> 时间：2013-04-12T04:02:30.250
> 
> 标签：java, swing, jasper-reports

我正在尝试使用 java swing 创建一个报告，该报告能够打印我在我的 SQL 数据库中的数据，我在谷歌搜索我的问题并按照分步教程进行操作后发现[了这个](http://www.youtube.com/watch?v=Fq7ZsuQZM_w)，一切都很顺利，没有错误发生了，起初看起来不错，但是在我输入这些代码之后（这将生成我想要的报告）：

```
public void reportviewer() {
            try{
            String report = "C:\\Users\\cleanfuel\\Documents\\NetBeansProjects\\StringManipulation\\src\\stringmanipulation\\report1.jrxml";
            JasperReport jasp_report = JasperCompileManager.compileReport(report);
            JasperPrint jasp_print = JasperFillManager.fillReport(jasp_report, null, con);
            JasperViewer.viewReport(jasp_print);
            }
            catch (Exception e) {System.out.print(e);}
        }enter code here 
```

在我运行程序并单击按钮报告后，发生错误并打印：

![在此处输入图像描述](https://i.stack.imgur.com/enXyO.jpg)

谁能告诉我如何解决这个问题？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:15:01.047

只需创建一个`log4j.properties`并将其放入您的类路径中：

```
#
# connector logging configuration
#
# From most to least verbose: TRACE, DEBUG, INFO, WARN, ERROR, OFF
log4j.rootCategory=INFO, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%p [%c{1}] - %m%n 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T04:15:52.010

基本上它只是`log4j`抱怨没有附加程序可以输出它的输出。

除非您真的关心 Jasper Reports 代码的输出，否则您不必太担心它。

如果您想要快速修复，您可以在执行任何其他操作之前将以下内容添加到您的代码中。

```
PatternLayout pl = new PatternLayout("[%-5p] %C.%M:%L: %m%n");
ConsoleAppender appender = new ConsoleAppender(pl);
Logger.getRootLogger().addAppender(appender); 
```

它基本上会添加一个控制台附加程序，将输出发送到控制台。

查看[log4j](http://logging.apache.org/log4j/1.2/manual.html)了解更多详细信息。

**更新了示例**

```
import org.apache.log4j.ConsoleAppender;
import org.apache.log4j.Logger;
import org.apache.log4j.PatternLayout;

public class Test {

    public static void main(String[] args) {
        PatternLayout pl = new PatternLayout("[%-5p] %C.%M:%L: %m%n");
        ConsoleAppender appender = new ConsoleAppender(pl);
        Logger.getRootLogger().addAppender(appender);
        // The rest of your code...
    }
} 
```

# servicestack - 从 Razor 调用 ServiceStack 服务

> ID：15962845
> 
> 赞同：3
> 
> 时间：2013-04-12T04:03:33.967
> 
> 标签：servicestack

这里有一个边缘案例：我需要从 razor 调用 servicestack 服务（同一个网站）现在我正在做

```
CheckIfConfiguredResponse aResponse= new JsonServiceClient("http:\\localhost:2000").Get<CheckIfConfiguredResponse>("/CheckIfConfigured"); 
```

这是正确的方法吗？还是有更好的？另外，如何避免手动指定网址并让它自动填充主机（因为它是同一个网站）

在此先感谢，威尔。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T04:48:36.147

您永远不想仅仅为了调用 ServiceStack 服务而对自己进行 HTTP 调用。

与其他框架不同，ServiceStack 中的服务只是自动连接的 C# 类型，您可以像其他所有已注册的 IOC 依赖项一样从 IOC 访问它们。即在 Razor 视图中，您可以简单地解决它并直接从 IOC 调用它：

```
var response = base.Get<CheckIfConfiguredService>().Get(new CheckIfConfigured()); 
```

这会像正常的自动连接 C# 依赖项一样解析和调用服务，但不会注入当前请求上下文。如果您的服务确实需要它，您可以改用[AppHostBase.ResolveService](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/AppHostBase.cs#L163)，例如：

```
var response = AppHostBase
  .ResolveService<CheckIfConfiguredService>(HttpContext.Current)
  .Get(new CheckIfConfigured()); 
```

# node.js - 选择跳过和限制项目数组

> ID：15962846
> 
> 赞同：-1
> 
> 时间：2013-04-12T04:03:39.053
> 
> 标签：node.js, mongodb

```
user {
        [
            _id: xyz...,
            Statuss["id1", "id2", "id3", "id4", "id5", "id6", "id7", "id8", "id9", "id10"]
        ]
    } 
```

我要选择`Statuss` `skip(0).limit(5)`

试过：

```
collection.findOne({_id: id}, {Statuss: {$slice: [0, 5]} 
```

但结果是：

```
Statuss["id1", "id2", "id3", "id4", "id5"] 
```

想要这个结果：

```
Statuss["id10", "id9", "id8", "id7", "id6"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:48:59.720

试过这个：

```
collection.findOne({_id: id}, {Statuss: {$slice: [5, 5]} 
```

# python - Python 3.3 中的 Py_FlushLine 发生了什么？

> ID：15962847
> 
> 赞同：2
> 
> 时间：2013-04-12T04:04:00.007
> 
> 标签：python, c, api, python-3.x

我正在将 python C 模块从 2.7.x 移植到 python 3.3。我遇到的一个问题是，`Py_FlushLine`据我所知，它没有在 python 标头中定义。

应该如何修改以下代码片段以在 python 3.3 中工作？

```
 if (Py_FlushLine()) PyErr_Clear(); 
```

更有趣的是，搜索在线 python 文档并没有显示任何关于这个`Py_FlushLine`函数的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:23:15.407

`Py_Flushline`以前看起来像这样：

```
int
Py_FlushLine(void)
{
       PyObject *f = PySys_GetObject("stdout");
       if (f == NULL)
               return 0;
       if (!PyFile_SoftSpace(f, 0))
               return 0;
       return PyFile_WriteString("\n", f);
} 
```

由于 Py3k 不再有软空间的概念，我猜这个决定是这个函数是多余的，应该直接将 EOL 写入标准输出。

# php - 尝试创建“AND” php 代码但不断出现语法错误？

> ID：15962848
> 
> 赞同：-3
> 
> 时间：2013-04-12T04:04:04.890
> 
> 标签：php

我有以下要修改的 PHP 代码：

```
<?php if (($membership))  { ?>
    <?php theme_template( 'form-review.php' ); ?>
    <?php } ?>
<?php endif; ?> 
```

进入这个：

```
<?php if (($membership)) && get_current_user_id() == get_the_author_meta('ID') )  { ?>
    <?php theme_template( 'form-review.php' ); ?>
    <?php } ?>
<?php endif; ?> 
```

我知道我可以使用 && 或 || 但在这种情况下两者都不起作用。不确定下一步是什么，因为搜索结果对“添加 php”代码没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:18:00.573

我忘记了 php 查看内容的顺序，但如果你在 == 部分加上括号，我会感觉更好。

```
if ($membership && (get_current_user_id() == get_the_author_meta('ID'))) {
//stuff 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:05:51.830

看起来你的括号太多了。尝试这个：

```
<?php if ( $membership && get_current_user_id() == get_the_author_meta('ID') )  { ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:21:01.323

尝试这个

```
<?php 
    if ( $membership && get_current_user_id() == get_the_author_meta('ID') )  {
        theme_template( 'form-review.php' );
     }
?> 
```

# python - matplotlib - 从一个图形复制到另一个图形？

> ID：15962849
> 
> 赞同：11
> 
> 时间：2013-04-12T04:04:10.993
> 
> 标签：python, matplotlib

我对 matplotlib 有点陌生。我想做的是编写代码，将几个数字保存到 eps 文件中，然后生成一个复合数字。基本上我想做的是有类似的东西

```
def my_plot_1():
    fig = plt.figure()
    ...
    return fig.

def my_plot_2():
    fig = plt.figure()
    ...
    return fig

def my_combo_plot(fig1,fig2):
    fig = plt.figure()
    gs = gridspec.GridSpec(2,2)
    ax1 = plt.subplot(gs[0,0])
    ax2 = plt.subplot(gs[0,1])
    ax1 COPY fig1
    ax2 COPY fig2
    ... 
```

然后我可以在哪里做类似的事情

```
my_combo_plot( my_plot_1() , my_plot_2() ) 
```

并从前两个函数返回的图中复制所有数据和设置，但我不知道如何使用 matplotlib 完成此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T04:21:14.380

由于 pyplot 有点像状态机，我不确定你所要求的是否可行。相反，我会考虑出绘图代码，如下所示：

```
import matplotlib.pyplot as plt

def my_plot_1(ax=None):
    if ax is None:
        ax = plt.gca()
    ax.plot([1, 2, 3], 'b-')

def my_plot_2(ax=None):
    if ax is None:
        ax = plt.gca()
    ax.plot([3, 2, 1], 'ro')

def my_combo_plot():
    ax1 = plt.subplot(1,2,1)
    ax2 = plt.subplot(1,2,2)
    my_plot_1(ax1)
    my_plot_2(ax2) 
```

# ios - MKMapView 初始化在包含 Google Maps SDK 的应用程序中失败

> ID：15962850
> 
> 赞同：1
> 
> 时间：2013-04-12T04:04:13.540
> 
> 标签：ios, crash, mkmapview, mapkit, google-maps-sdk-ios

我现在正在测试一些地图服务提供商。
首先，我有一个包含两个提供程序的 tableview：“Map Kit”，“Google Maps SDK”。
当我进入地图套件样本，然后出去，然后进入谷歌地图样本时，一切正常。

但是，当我先进入谷歌地图样本，然后退出，然后进入地图套件样本时，它崩溃了。

调试时，我发现它崩溃了`[[MKMapView alloc] init]`

为什么会发生这种情况？

虽然在真正的App中，我们不会有两个地图服务商，但我还是想知道原因。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:40:58.550

有几个现有的问题涵盖了这一点：

[同一应用程序中的 Google Maps SDK 和 Mapkit 导致崩溃](https://stackoverflow.com/questions/15052952/google-maps-sdk-mapkit-in-the-same-app-cause-crash)

[在同一应用中切换 Google Maps SDK 和 Mapkit 会导致崩溃](https://stackoverflow.com/questions/15442119/switch-google-maps-sdk-mapkit-in-the-same-app-cause-crash)

但是，这与Google 在 1.1.2 版（3 月 26 日发布）中修复的[这个错误](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4752)有关- 所以请确保您拥有最新版本的 SDK。

否则，如其他问题中所述，您可能需要在调用 MapKit 之前清除或保存/恢复 OpenGL 上下文。

# javascript - 如何计算 HTML 页面中文本框的数量并将其存储在 html 标签中，以便可以在另一个 Servlet 页面中使用？

> ID：15962852
> 
> 赞同：1
> 
> 时间：2013-04-12T04:04:19.453
> 
> 标签：javascript, html

我必须数数。html 页面中的文本框，并在另一个 servlet 页面中使用它，该页面作为 html 中的表单标记的操作给出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:05:53.063

您可以使用获取长度`getElementsByTagName`

```
var count = document.getElementsByTagName('textarea').length;

save it in your form filed. 
```

# salesforce - Salesforce 触发序列

> ID：15962853
> 
> 赞同：0
> 
> 时间：2013-04-12T04:04:29.573
> 
> 标签：salesforce, apex-code, apex

我在一个对象上有两个触发器。

一个是托管包，我无法看到或修改触发器内的内容。

一个是我设计的。

我想在受管软件包触发器之前运行我自己创建的触发器。我可以控制触发器的执行顺序吗？

因为它现在总是首先运行受管软件包触发器。我想先运行我的触发器。我已经思考了几天。我公司的所有同事都不知道如何实现这个目标。如果不解决此问题，我将无法继续我的工作。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T18:42:08.047

在系统中没有办法控制调用触发的顺序，我认为这是不安全编程的限制。您可以访问包触发器吗？在一个对象上拥有多个触发器是一种非常糟糕的方法，更好的解决方案是使用一个触发器来调用各种处理程序。然后，在处理程序级别，您可以管理此处理程序的顺序..

例如，这是一个简单的触发器，它在不同的事件上被调用，并以不同的逻辑调用不同的方法：

```
trigger ContactTrigger on Contact (before insert, before update) {

    /* Before Update*/  
    if(Trigger.isUpdate && Trigger.isBefore){
         /*
         here you can invoke different methods of different classes
         (trigger handlers) in different sequences
         */
    }

    /* Before Insert*/
    if(Trigger.isInsert && Trigger.isBefore){
        //on other events you can use it too
    }
}
} 
```

为了保证一个handler只有在前一个handler执行完毕后才能被调用，可以使用handler结束时会改变值的状态变量，在调用其他handler之前可以检查一下。我希望这对您将来有所帮助:)

# c - 打印堆的所有叶子

> ID：15962855
> 
> 赞同：-1
> 
> 时间：2013-04-12T04:04:33.970
> 
> 标签：c, pointers, heap, nodes

我需要打印出一堆的所有叶子，但我不确定我是否做得正确。

例如：数组 {A,B,C,D,E,F,G,H,I,J}

```
 A
              B       C
           D    E   F   G
          H I  J 
```

所以我的函数应该打印：HIJFG

这个对吗？

```
void leafdisplay(node *p)
{
    if(p->left ==NULL && p->right ==NULL)
    {
        cout<<p->info;  //  display the node
    }
    else if (p->left==NULL&&p->right!=NULL)
        leafdisplay(p->right);
    else if(p->left!=NULL&&p->right==NULL)
        leafdisplay(p->left);
    else if(p->left!=NULL&&p->right!=NULL)
        leafdisplay(p->left);       
    leafdisplay(p->right);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:09:03.487

缺少`{ }`最后一个 else if 循环

```
else if(p->left!=NULL&&p->right!=NULL)
{
    leafdisplay(p->left);       
    leafdisplay(p->right);
} 
```

你可以像这样优化你的代码

```
void leafdisplay(node *p)
{
  if(p->left ==NULL && p->right ==NULL) 
  {
    cout<<p->info;  //  display the node
  }
  else if (p->left==NULL)
    leafdisplay(p->right); 
  else if(p->right==NULL)
    leafdisplay(p->left); 
  else
  {
    leafdisplay(p->left);       
    leafdisplay(p->right);
  }
} 
```

# c# - 正则表达式拆分PDF文件中的文本

> ID：15962857
> 
> 赞同：1
> 
> 时间：2013-04-12T04:04:46.483
> 
> 标签：c#, regex

我有一个 PDF 文件，我使用在线工具将其转换为 .txt。现在我想解析其中的数据并使用正则表达式对其进行拆分。我快完成了，但停留在 1 点。

数据示例如下：

```
00 41 53 Bid Form – Design/Build (Single-Prime Contract)

27 05 13.23 T1 Services 
```

我想像这样拆分它：`00 41 53 Bid Form – Design/Build (Single-Prime Contract)`而其他的是`27 05 13.23 T1 Services`

我正在使用的正则表达式是`[0-9](\d|\ |\.)*(\D)*`

它可以有带空格和/或点的数字，然后是可以是（字母、点、逗号、、、、和`(`数字）的文本。`)``-`

如果字符串中有数字（如上面的“T1 服务”），我无法匹配该字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:16:51.163

如果我理解正确，您正在尝试按换行符拆分。这是在 C# 中。

```
string[] Result = Regex.Split(inputText, "[\r\n]+"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:29:23.813

你也可以不使用正则表达式来做到这一点：

```
string phrase = ".......\n,,,,.ll..\r\n....";
string[] words;

words = phrase.Split(new string []{"\n","\r"}), StringSplitOptions.RemoveEmptyEntries); 
```

如果您只想要正则表达式，请使用@mhasan 解决方案。

# javascript - 基本代数的javascript算法？

> ID：15962858
> 
> 赞同：0
> 
> 时间：2013-04-12T04:04:46.567
> 
> 标签：javascript, algorithm, algebra

有人知道可以应用于 javascript 来解决基本代数的算法吗？例如：

> x + 5 = 11

然后返回 x，即 6。

# python - 溢出错误：用户 ID 太大

> ID：15962861
> 
> 赞同：1
> 
> 时间：2013-04-12T04:05:19.550
> 
> 标签：python, linux, macos

运行环境：

Mac OS X 10.8.3 英特尔 64 位

Python 2.7.3

**如何解决 setuid 无人长度问题？**

重击

```
$ id nobody
uid=4294967294(nobody) gid=4294967294(nobody) groups=4294967294(nobody),12(everyone),61(localaccounts)

$ cat /etc/password
nobody:*:-2:-2:Unprivileged User:/var/empty:/usr/bin/false 
```

Python

```
>>> import pwd
>>> import os
>>> uid = pwd.getpwnam('nobody')
>>> uid
pwd.struct_passwd(pw_name='nobody', pw_passwd='*', pw_uid=4294967294, pw_gid=4294967294, pw_gecos='Unprivileged User', pw_dir='/var/empty', pw_shell='/usr/bin/false')
>>> uid = pwd.getpwnam('nobody')[2]
>>> uid
4294967294
>>> os.setuid(uid)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OverflowError: user id too big 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:34:49.820

此问题已在 Python 2.7.4、3.2.4 和 3.3.1 中修复（请参阅[http://bugs.python.org/issue4591](http://bugs.python.org/issue4591)）。

# android - 将上下文传递给另一个类时，我得到一个致命异常

> ID：15962863
> 
> 赞同：3
> 
> 时间：2013-04-12T04:05:45.333
> 
> 标签：android, android-mediaplayer

有人能告诉我为什么这个类在我的主要活动中调用时会返回一个致命的异常吗？

```
package com.b1ackjosh.kana;

import android.content.Context;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.widget.TextView;

public class SoundThread extends Thread  implements Runnable, OnCompletionListener       {

    Thread t = null;
    int place, lvl;
    boolean tStatus = false;
        Context context;

    SoundThread(int l, int p, Context c)  {
        p = place;
        c = context;
        l = lvl;
    };

    public void run() {

         MediaPlayer audioQuestion = MediaPlayer.create(context, QuestionArray.audioArray[lvl][place]);

         audioQuestion.setOnCompletionListener(this);
         audioQuestion.start();

    };

    public void pause() {
        tStatus = false;

        try {
            t.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        t = null;
    }

    public void onCompletion(MediaPlayer mp) {
        // TODO Auto-generated method stub
        mp.release();
    }

} 
```

这就是我在主要活动中运行它的方式：

```
public void playQuizAudio(final int i) {
    new SoundThread(lvl, i, this).start();
} 
```

我只是将一个整数传递给此方法，每次运行它时，我的应用程序都会失败并崩溃到主屏幕。这很烦人，但如果我在我的主要活动中包含相同的代码，它运行良好，但我认为我还有一些其他线程问题，这就是为什么我选择创建一个单独的类来管理它。此外，如果我使用音频中的静态链接，它也会失败，所以我知道它必须是上下文。对此的任何帮助将不胜感激。

这也是我从 LogCat 得到的：

```
04-12 03:52:43.981: E/AndroidRuntime(3129): FATAL EXCEPTION: Thread-98
04-12 03:52:43.981: E/AndroidRuntime(3129): java.lang.NullPointerException
04-12 03:52:43.981: E/AndroidRuntime(3129):     at android.media.MediaPlayer.create(MediaPlayer.java:731)
04-12 03:52:43.981: E/AndroidRuntime(3129):     at com.b1ackjosh.kana.SoundThread.run(SoundThread.java:23) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:12:26.280

> **java.lang.NullPointerException** 04-12 03:52:43.981: E/AndroidRuntime(3129): 在 android.media.MediaPlayer.create(MediaPlayer.java:731) 04-12 03:52:43.981: E/AndroidRuntime(3129 ): 在 com.b1ackjosh.kana.SoundThread.run( **SoundThread.java:23** )

您在`NullPointerException`以下行中得到一个：

```
MediaPlayer audioQuestion = MediaPlayer.create(context, QuestionArray.audioArray[lvl][place]); 
```

假设`context`,`lvl`和`place`变量均设置正确，则 (static) 字段在执行此行时`QuestionArray.audioArray`可能未初始化（因此）。`null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:21:29.057

糟糕，你有：

```
SoundThread(int l, int p, Context c)  {
    p = place;
    c = context;
    l = lvl;
}; 
```

那是背对背！它应该是：

```
SoundThread(int l, int p, Context c)  {
    place = p;
    context = c;
    lvl = l;
}; 
```

编译器应该已经警告过你，所以请注意它。此外：

```
public class SoundThread extends Thread  implements Runnable 
```

是多余的。选择其中一个，建议通常是`Runnable`：

```
public class SoundThread implements Runnable 
```

# javascript - 使用鼠标上下绘制画布

> ID：15962868
> 
> 赞同：1
> 
> 时间：2013-04-12T04:06:15.720
> 
> 标签：javascript, canvas

我是画布新手，并以示例为标题

这是我的代码：

```
<DOCTYPE html>
<html>
<head>
    <title>Canvas Test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>
    <form name="Show">
    X <input type="text" name="MouseX" value="0" size="4"><br>
    Y <input type="text" name="MouseY" value="0" size="4"><br>
    </form>
    <canvas id="canvas" width="300" height="300">
        Your browser does not support Canvas !!
    </canvas>

<script language="JavaScript">
    var IE = document.all?true:false;
    if (!IE) document.captureEvents(Event.MOUSEMOVE)

    document.onmousemove = getMouseXY;
    var tempX = 0;
    var tempY = 0;
    var pos= new Array();

    function getMouseXY(e) {
    if (IE) { // grab the x-y pos.s if browser is IE
    tempX = event.clientX + document.body.scrollLeft;
    tempY = event.clientY + document.body.scrollTop;
    }
    else {  // grab the x-y pos.s if browser is NS
    tempX = e.pageX;
    tempY = e.pageY;
    }  
    if (tempX < 0) {
    tempX = 0;
    }
    if (tempY < 0) {
    tempY = 0;
    }  
    document.Show.MouseX.value = tempX;
    document.Show.MouseY.value = tempY;

    pos[0]= tempX;
    pos[1]= tempY;
    return true;
    }
    $("#canvas").mousedown(function(){
    getMouseXY;
    startX= pos[0];
    startY= pos[1];
    })
    $("#canvas").mouseup(function(){
    getMouseXY;
    endX= pos[0];
    endY= pos[1];
    draw(startX, startY, endX, endY);
    })
    function draw(startX, startY, endX, endY)   {
    ctx= $("#canvas")[0].getContext('2d');

    ctx.beginPath();
    ctx.moveTo(startX, startY);
    ctx.lineTo(endX, endY);
    ctx.stroke();
    }
</script>
</body>
</html> 
```

我的问题是：代码是wokerd，但是作为光标绘制不正确，绘制总是与光标的实际位置有距离。

那么问题是什么，请帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:11:57.763

添加：

```
tempX -= $("#canvas").offset().left;
tempY -= $("#canvas").offset().top; 
```

这是因为您的鼠标坐标是相对于窗口的，而您正在相对于画布进行绘制。

[http://jsfiddle.net/75uT2/](http://jsfiddle.net/75uT2/)

# php - 如何在数据库表中自动生成的字段值中添加前缀？

> ID：15962875
> 
> 赞同：1
> 
> 时间：2013-04-12T04:07:07.590
> 
> 标签：php, mysql, database

我们在数据库表中有一个自动生成的字段，我们想在自动生成的值中添加前缀，如 AVL0001。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:19:11.947

所以你可以用几种方法来做......这是数据库中的自动索引字段吗？如果它是整数类型，那么您将无法像上面提到的那样包含数据，但是，如果它是从脚本生成的，只需在插入之前连接数字和前缀即可。您也可以使用数据库上的触发器来执行此操作。任何其他详细信息都将有助于改进此答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:21:13.033

```
$currentdbvalue = 'example';
$prefix = 'AVL0001';

$newvalue = $prefix.$currentdbvalue; 
```

输出“AVL0001example”

或者如果你想要一个下划线，你可以使用：

```
$newvalue = $prefix."_".$currentdbvalue; 
```

这将输出“AVL0001_example”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:24:54.130

让`id`成为您的表格列。您可以通过在 sql 查询中连接两者来`AVL`提前添加。`id`

即在`Mysql`,

```
$yourid="1";

INSERT INTO table( id ) 
VALUES (
CONCAT( "AVL", $yourid, id  )
) 
```

或者您可以在将 AVL`yourid`插入数据库之前将其连接起来，例如，

```
$yourid="AVL"."1"; 
```

**无论哪种方式，您都无法将其添加到自动递增字段中。因为它的类型是`INT`.**

# android - 传回在单独线程中创建的变量？安卓

> ID：15962876
> 
> 赞同：1
> 
> 时间：2013-04-12T04:07:14.673
> 
> 标签：android, web-services

我一直在尝试使用 JSON/Php Web 服务层通过我的 android 应用程序访问 MySQL 数据库并且它可以工作（从日志中我可以看到变量保存了正确的信息）但是当我尝试将值传回到他们没有被存储的主线程？

```
public class ViewErrands extends Activity {
public String result = "";
InputStream is;
String json = "lol"; //set as lol to begin with, to be overwritten with string from DB
TextView tv; 
public int iss;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_view);
    tv = (TextView) findViewById(R.id.tvtv);
    sendPostRequest();
    tv.setText(json + "LOL" + iss); // the "lol" + "LOL" + 0 (should be 6) appear
}

public void sendPostRequest() {
    class runCode extends AsyncTask<String, String, String> { // seperate task

        @Override
        protected String doInBackground(String... params) {
            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("idnum", "1"));

            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://192.168.1.182/FYP/xshowall.php"); // PHP script to show all where id > POST
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            } catch (Exception e) {
                Log.e("log_tag", "error in http conn " + e.toString());
            }

            try {
                BufferedReader reader = new BufferedReader(new InputStreamReader(is), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();
            } catch (Exception e) {
                Log.e("log_tag", "error converting " + e.toString());
            }

            try {
                JSONArray jArray = new JSONArray(result);
                for (int i = 0; i < jArray.length(); i++) {
                    JSONObject json_data = jArray.getJSONObject(i);
                    json = "id: " + json_data.getInt("ID") + ", title: " + json_data.getString("TITLE")
                            + ", content: " + json_data.getString("CONTENT");

                        );

                }
            } catch (JSONException e) {
                Log.e("log_tag", "Error parsing data " + e.toString());
            }
            return null;
        }
    }
    runCode sendPostReqAsyncTask = new runCode();
    sendPostReqAsyncTask.execute();
} 
```

首先，当我尝试复制一个值时，json 变量保持为“lol”，就好像它从未更改过一样。这与单独的进程有关吗？我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:41:30.810

您已经解析了数据，但从未再次设置为 textview。

您可以在 onPostExecute 中执行此操作，此方法将在 UI 线程上调用，因此它是安全的。（切勿尝试在 doInBackground 中设置任何会导致异常的视图属性）

```
public void sendPostRequest() {
    class runCode extends AsyncTask<String, String, String> { // seperate task

        @Override
        protected String doInBackground(String... params) {
            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("idnum", "1"));

            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://192.168.1.182/FYP/xshowall.php"); // PHP script to show all where id > POST
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            } catch (Exception e) {
                Log.e("log_tag", "error in http conn " + e.toString());
            }

            try {
                BufferedReader reader = new BufferedReader(new InputStreamReader(is), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();
            } catch (Exception e) {
                Log.e("log_tag", "error converting " + e.toString());
            }

            try {
                JSONArray jArray = new JSONArray(result);
                for (int i = 0; i < jArray.length(); i++) {
                    JSONObject json_data = jArray.getJSONObject(i);
                    json = "id: " + json_data.getInt("ID") + ", title: " + json_data.getString("TITLE")
                            + ", content: " + json_data.getString("CONTENT");

                        );

                }
            } catch (JSONException e) {
                Log.e("log_tag", "Error parsing data " + e.toString());
            }
            return null;
        }
      @Override
      protected void onPostExecute(String result) {   
            tv.setText(json);
      }
    }
    runCode sendPostReqAsyncTask = new runCode();
    sendPostReqAsyncTask.execute();
} 
```

# html - 在图像周围环绕文本

> ID：15962877
> 
> 赞同：0
> 
> 时间：2013-04-12T04:07:27.313
> 
> 标签：html, css, text, styling, multiple-columns

我在为客户设计的 Web 应用程序上包装文本时遇到了一些问题。您可以在下面看到我遇到问题的地方：

![文字换行问题](https://i.stack.imgur.com/LMyrl.png)

因此，理想情况下，我希望此文本以统一的方式包裹在其上方的文本之下。不在图片下方。您可以在下面看到我为此使用的 HTML 代码：

```
<ul>
    <div class="grid">

        <div class="col-1">

            <li class="howDoPadding">

                <label for="id_delivery_0">

                              <img src="{{ STATIC_URL }}rd/images/message_icon.png" class="byAppointment" />

                       <input checked="checked" type="radio" id="id_delivery_0" value="chat" name="delivery" />

                           Answer<div class="lightBlueText">Chat</div> By Appointment (Fastest)

                </label>

            </li><!-- .howDoPadding -->

        </div><!-- .col-1 -->

        <div class="col-1">

            <li>

                <label for="id_delivery_2">

                    <img src="{{ STATIC_URL }}rd/images/message_fly_right.png" class="mailASAP" />

                    <input type="radio" id="id_delivery_2" value="email" name="delivery" />

                    Answer<div class="lightBlueText">Mail</div> ASAP (Within 1-2 days)

                </label>

            </li>

        </div><!-- .col-1 -->

    </div><!-- .grid -->

</ul> 
```

所有的CSS都在下面：

```
/* Form */
.col-1 li.howDoPadding { padding-bottom: 10px!important; }

.byAppointment { margin: 0 0 -4px 10px;}

.offlineForm .lightBlueText { 
    color: #80A9BD; 
    display: inline;
}

.mailASAP { margin: 0 0 -4px 18px; }

/* Grid */
*, *:after, *:before {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
}

.grid:after {
    clear: both;
    content: "";
    display: table;
}

/* Grid Gutters */
[class*='col-'] {
    float: left;
    padding-right: 20px;
}

[class*='col-']:last-of-type { padding-right: 0; }

.col-1 { width: 100%; } 
```

您还可以在以下位置查看一个工作示例：http: [//jsfiddle.net/Mjs2u/](http://jsfiddle.net/Mjs2u/)

非常感谢您的任何帮助。对此，我真的非常感激！让我知道你们是否需要我详细说明其他任何内容，或者您​​需要/想要更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:53:20.400

您的 HTML 代码格式不正确。忘记`ol`，`ul`如果没有列表，请列出。`ol`应该只`li`作为其子元素。`<ol><div><li></li></div></ol>`是不好的做法。

基本上，如果你想把某物放在某物之下，你可以将它们组合成一个`div`或其他块元素。不要使用`float`布局，`div`否则如果前一个元素比您的 div 短，您将拥有与示例类似的布局。

您可以使用一些灵活的布局模式。使用带有 wide 的包装器 div `padding-left`，其中将放置图像和单选按钮。并将标签和文本放在div的主体中。像[这样](http://jsfiddle.net/ArieShout/c2eKZ/)的东西：

```
<div class="flexible-layout">
    <div class="left-content">
        Image
    </div>
    <div class="main-content">
        You text goes here<br />
        Second line goes here
    </div>
</div>

<style type="text/css">
.flexible-layout {
    padding-left: 80px;
    position: relative;
}
.flexible-layout .left-content {
    position: absolute;
    left: 0;
    top: 0;
    width: 80px;
}
</style> 
```

对于您的具体代码示例，我根据您提供的内容进行了一些重构，您可以查看[jsFiddle](http://jsfiddle.net/ArieShout/WjjBM/)看看它是否是您想要的。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:04:38.473

```
<form class="offlineForm">
  <ul>
    <li class="howDoPadding">
      <label for="id_delivery_0">
      <img src="http://i.imgur.com/RVmh2rz.png" class="byAppointment" />
      <input checked="checked" type="radio" id="id_delivery_0" value="chat" name="delivery" />
      <div class="label">Answer <span class="lightBlueText">Chat</span> By Appointment (Fastest)</div>
      </label>
    </li>       
    <li>
      <label for="id_delivery_2">
      <img src="http://i.imgur.com/8J0SEVa.png" class="mailASAP" />
      <input type="radio" id="id_delivery_2" value="email" name="delivery" />
      <div class="label">Answer <span class="lightBlueText">Mail</span>ASAP (Within 1-2 days)</div>
      </label>
    </li>
  </ul>
</form>

body { font-family: Arial, Helvetica, sans-serif; font-size: 12px; }

ul li { list-style: none; }

* { margin: 0; padding: 0; }

*, *:after, *:before { box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; }

form.offlineForm { width: 200px; margin: 0 auto; padding: 30px; }

label { padding-left: 25px; display: block; position: relative; }

label img { position: absolute; left: -25px; }

label .lightBlueText { color: #80A9BD; }

label div.label { display: inline; }

li.howDoPadding { padding-bottom: 20px; } 
```

[http://jsfiddle.net/4faQk/](http://jsfiddle.net/4faQk/)

希望它会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:27:32.563

尝试这个：

然后在要移动的文本中`span`添加名称`class``position:relative;`

下面我添加`<span class="text">`

**html:**

```
<li class="howDoPadding">
  <label for="id_delivery_0">
    <img src="http://i.imgur.com/RVmh2rz.png" class="byAppointment" />
    <input checked="checked" type="radio" id="id_delivery_0" value="chat" name="delivery" />Answer
    <div class="lightBlueText">Chat</div> <span class="text">By Appointment (Fastest)<span>
  </label>
</li>

<li>
  <label for="id_delivery_2">
    <img src="http://i.imgur.com/8J0SEVa.png" class="mailASAP" />
    <input type="radio" id="id_delivery_2" value="email" name="delivery" />Answer
    <div class="lightBlueText">Mail</div> <span class="text">ASAP (Within 1-2 days)</span>
  </label>
</li> 
```

**CSS：**

```
.text {
    position:relative;
    left:15px;
} 
```

希望这对你有帮助

# c++ - c和c ++中sizeof运算符的工作是否不同

> ID：15962882
> 
> 赞同：9
> 
> 时间：2013-04-12T04:08:00.323
> 
> 标签：c++, c

我写了一个小的 printf 语句，它在 C 和 C++ 中的工作方式不同：

```
 int i;
    printf ("%d %d %d %d %d \n", sizeof(i), sizeof('A'), sizeof(sizeof('A')),    sizeof(float), sizeof(3.14)); 
```

上述程序在 c 中使用 gcc 编译器的输出是 4 4 8 4 8

上述程序在 c++ 中使用 g++ 编译器的输出是 4 1 8 4 8

我预计 4 1 4 4 8 在 c。但结果并非如此。

printf sizeof(sizeof('A')) 中的第三个参数是 8

谁能给我这个的理由

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T04:12:59.870

这与运营商无关`sizeof`；相反，C 中字符文字的大小与 C++ 不同，因为 C 中的字符文字是 type `int`，而在 C++ 中它们是 type `char`。

请参阅[为什么 C 字符文字是整数而不是字符？](https://stackoverflow.com/questions/433895/why-are-c-character-literals-ints-instead-of-chars)了解更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T04:15:03.580

是的，它是特定于实现的。`sizeof()`返回`size_t`无符号整数。它的大小取决于机器（32 位与 64 位）以及实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T04:12:47.483

如[C/C++ 中字符大小 ('a') 中所述](https://stackoverflow.com/questions/2172943/size-of-character-a-in-c-c)：

在 C 中，`char`是一个字节，但它`'a'`是一个`int`常量（在您的情况下，取决于您编译的架构！）四个字节宽。在 C++ 中，两者`char`和`'a'`都是`char`一个字节大小。

最重要的信息是**C++ 不是 C 的超集。它有很多像这样的小的突破性变化。**

# ios - iOS：修复它替换“ " 与 ""libxm/xmlversion.h""

> ID：15962884
> 
> 赞同：0
> 
> 时间：2013-04-12T04:08:44.860
> 
> 标签：ios, xcode, libxml2

看到这些图片，我该如何解决这个问题？谢谢！

![在此处输入图像描述](https://i.stack.imgur.com/IMaNm.png)

![在此处输入图像描述](https://i.stack.imgur.com/gXMpK.png)

![在此处输入图像描述](https://i.stack.imgur.com/SHf0I.png)

![在此处输入图像描述](https://i.stack.imgur.com/E7xhh.png)

![在此处输入图像描述](https://i.stack.imgur.com/qehZI.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:27:24.990

在图 2 中，它应该是“Header Search Paths”，而不是“User Header Search Paths”

# c - 当队列中没有连接时，C 套接字 accept() 失败

> ID：15962887
> 
> 赞同：1
> 
> 时间：2013-04-12T04:09:06.053
> 
> 标签：c, sockets, gcc

我正在阅读一本关于 c 中套接字的书，并且正在制作一个非常简单的服务器程序。我逐字复制代码。目前还没有尝试连接到该服务器程序，并且已经多次更改端口以确保。

该程序在第一次运行循环时在接受方法上失败。根据我在手册页中阅读的内容，accept 应该阻止调用者直到建立连接，并且如果队列中没有像它正在做的连接，则不会失败。是否有任何理由接受会返回小于 0 的值？我会将代码发布到失败的地方：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

//Max number of outstanding connection requests
#define MAXPEDNING 5
#define NONE
#define BUFSIZE 1024

int main(int argc, char **argv)
{
    in_port_t servPort;

    #ifdef CMDLINE
        if(argc != 2)
        {
            puts("Error! Usage is <Server Port>");
            return 0;
        }

        servPort = atoi(argv+1);
    #endif //CMDLINE

    #ifdef NONE
        servPort = 2549;
    #endif //NONE

    int servSock;
    if((servSock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) < 0)
    {
        puts("socket() failed");
        return 0;
    }

    struct sockaddr_in servAddr;

    memset(&servAddr, 0, sizeof(servAddr));
    servAddr.sin_family = AF_INET;
    servAddr.sin_addr.s_addr = htonl(INADDR_ANY);
    servAddr.sin_port = htons(servPort);

    printf("Port in network order: %d\nPort in host order:%d\n", servAddr.sin_port, ntohs(servAddr.sin_port));

    if((bind(servSock, (struct sockaddr*) &servAddr, sizeof(servAddr)))<0)
    {
        puts("bind failed");
        return 0;
    }

    while(1)
    {
        struct sockaddr_in clntAddr;
        socklen_t clntAddrLen = sizeof(clntAddr);

        int clntSock = accept(servSock, (struct sockaddr*) &clntAddr, &clntAddrLen);

        if(clntSock < 0)
        {
            puts("accept failed");
            return 0;
        } 
```

它达到接受失败并退出。我的设置唯一奇怪的是我在 Debian VM (VirtualBox) 上，我想知道网络操作是否以一种奇怪的方式处理。我什至不应该试图接受任何东西，因为没有任何联系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:12:01.077

您需要在和`listen()`之间调用。`bind()``accept()`

# javascript - 如何在不使用 jQuery 的情况下从 json 数组中删除项目？

> ID：15962888
> 
> 赞同：1
> 
> 时间：2013-04-12T04:09:52.583
> 
> 标签：javascript

我有以下数组：

```
$scope.myData = [
                 {id: 1, age: 50},
                 {id: 2, age: 43},
                 {id: 8, age: 27},
                 {id: 9, age: 29}
                ]; 
```

如果给定行 id 值，我想做的是删除一行。我知道我可以使用类似的东西：

```
$scope.myData.splice(0,1); 
```

但是，例如，如果给定我，我如何确定行号：

```
var idToRemove = 8; 
```

这是我得到的一个使用 jQuery 的解决方案。不幸的是，我不使用 jQuery，所以我正在寻找一个 javascript 解决方案。

```
 function remove(array, property, value) {
        $.each(array, function(index, result) {
            if (result[property] == value) {
                array.splice(index, 1);
            }
        });    
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:43:07.853

这是一种可行的方法，向后循环（以防您定位的同一属性多次匹配）：

```
function remove(array, property, value) {
    var i, j, cur;
    for (i = array.length - 1; i >= 0; i--) {
        cur = array[i];
        if (cur[property] === value) {
            array.splice(i, 1);
        }
    }
} 
```

**演示：http:** [//jsfiddle.net/RbfTt/2/](http://jsfiddle.net/RbfTt/2/)

`while`循环也是一样的：

```
function remove(array, property, value) {
    var i = array.length,
        j, cur;
    while (i--) {
        cur = array[i];
        if (cur[property] === value) {
            array.splice(i, 1);
        }
    }
} 
```

**演示：http:** [//jsfiddle.net/RbfTt/3/](http://jsfiddle.net/RbfTt/3/)

当可能匹配多个项目时，需要向后循环，因为`.splice()`会更改数组并弄乱循环。

如果多个项目不匹配，则正常的递增`for`循环将起作用，但您可能需要放入 a`break;`以确保它不会继续循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:15:17.970

我的版本..

```
function remove(property, num, arr) {
    for (var i in arr) {
        if (arr[i][property] == num)
            arr.splice(i, 1);
    }
} 
```

用法：

```
remove('id', 8, myData); 
```

# javascript - JavaScript 正则表达式 /shorthand/ vs Regexp(string)

> ID：15962891
> 
> 赞同：3
> 
> 时间：2013-04-12T04:10:06.013
> 
> 标签：javascript, regex

我有我认为相同的表达式，一个是 sorthand 正则表达式格式，另一个是带有字符串的 RegExp 对象。我希望它们都是真的，但这不是我所看到的。

```
/^key$|^key([;,]\skey)+$/.test('key, key; key') //true

var rgxStr = '^key$|^key([;,]\skey)+$'; //
(new RegExp(rgxStr)).test('key, key; key'); //false 
```

到底是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:13:49.687

看这里：

```
var rgxStr = '^key$|^key([;,]\skey)+$';
//                           ^ whoa, a backslash! 
```

在正则表达式文字中，JavaScript 将该反斜杠解释为正则表达式的一部分。
在普通的字符串文字中，JavaScript 不知道如何处理`\s`并丢弃反斜杠。

要修复它，请在字符串文字中转义反斜杠：

```
var rgxStr = '^key$|^key([;,]\\skey)+$'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T04:14:07.773

一旦您在字符串中定义正则表达式 - 您必须转义反斜杠

```
var rgxStr = '^key$|^key([;,]\\skey)+$'; 
```

# ios - 确定 UIImage 的主要颜色和次要颜色

> ID：15962893
> 
> 赞同：5
> 
> 时间：2013-04-12T04:10:29.227
> 
> 标签：ios, objective-c, image-processing, uiimage

我想知道是否有人可以帮助我弄清楚如何确定 UIImage 中的主要原色和次要颜色。我无法在 Google 中找到任何非常有用的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-12-30T18:53:59.003

[![在此处输入图像描述](https://i.stack.imgur.com/5sEAJ.jpg)](https://i.stack.imgur.com/5sEAJ.jpg)

基于上面的 Panic 博客，这是一种快速方法（<10ms，具体取决于变量）。

接受 UIImage 输入和输出：

*   背景色
*   原色
*   二次色

将 UIImage 传递给方法时，也要传递一个“边缘”。这是指图像的哪一部分暴露于视图的其余部分（请参见下图以进行说明）：

*   边缘 = 0 = 顶部
*   边 = 1 = 左
*   边缘 = 2 = 底部
*   边 = 3 = 右

**

步骤1。

** 设置维度。这是指图像上下应有多少像素。

**步骤 2.**根据输入的尺寸调整图像大小（例如 20 x 20 = 400px）。

**步骤 3.**创建一个颜色数组，从步骤 2 中创建的原始数据中提取 RGB 值。另外收集沿所选边缘运行的像素。

**步骤 4.**计算边缘或背景颜色。根据 Panic 博客，这稍后用于对比强调色。

**第 5 步：**检查收集到的颜色（RGB 值）并确定它们是否与边缘/背景颜色充分对比。如果不这样做，则所需的最低对比度会降低。此外，对于每个颜色对象，将其“距离”设置为其他颜色。这是对颜色与图像中其他颜色的相似程度的粗略估计。

**Step 6.**按距离对重音进行排序（最短距离表示最相似），最相似的颜色出现在顶部。将最常见的颜色设置为原色。

**第 7 步**：检查剩余的颜色并确定与原色对比最大的颜色。然后设置你的辅助颜色。

**警告：**我确信该方法可以改进，但这是一个快速的起点。例如，您可以确定图像右上角或左上角的像素颜色（通常放置后退图标等），并为那里的图标建议对比色。

这是代码：

```
-(NSDictionary *)coloursForImage:(UIImage *)image forEdge:(int)edge {

    NSLog(@"start");

    //1\. set vars
    float dimension = 20;

    //2\. resize image and grab raw data
    //this part pulls the raw data from the image
    CGImageRef imageRef = [image CGImage];
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *rawData = (unsigned char*) calloc(dimension * dimension * 4, sizeof(unsigned char));
    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * dimension;
    NSUInteger bitsPerComponent = 8;
    CGContextRef context = CGBitmapContextCreate(rawData, dimension, dimension, bitsPerComponent, bytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);
    CGContextDrawImage(context, CGRectMake(0, 0, dimension, dimension), imageRef);
    CGContextRelease(context);

    //3\. create colour array
    NSMutableArray * colours = [NSMutableArray new];
    float x = 0, y = 0; //used to set coordinates
    float eR = 0, eB = 0, eG = 0; //used for mean edge colour
    for (int n = 0; n<(dimension*dimension); n++){

        Colour * c = [Colour new]; //create colour
        int i = (bytesPerRow * y) + x * bytesPerPixel; //pull index
        c.r = rawData[i]; //set red
        c.g = rawData[i + 1]; //set green
        c.b = rawData[i + 2]; //set blue
        [colours addObject:c]; //add colour

        //add to edge if true
        if ((edge == 0 && y == 0) || //top
            (edge == 1 && x == 0) || //left
            (edge == 2 && y == dimension-1) || //bottom
            (edge == 3 && x == dimension-1)){ //right
            eR+=c.r; eG+=c.g; eB+=c.b; //add the colours
        }

        //update pixel coordinate
        x = (x == dimension - 1) ? 0 : x+1;
        y = (x == 0) ? y+1 : y;

    }
    free(rawData);

    //4\. calculate edge colour
    Colour * e = [Colour new];
    e.r = eR/dimension;
    e.g = eG/dimension;
    e.b = eB/dimension;

    //5\. calculate the frequency of colour
    NSMutableArray * accents = [NSMutableArray new]; //holds valid accents

    float minContrast = 3.1; //play with this value
    while (accents.count < 3) { //minimum number of accents
        for (Colour * a in colours){

            //NSLog(@"contrast value is %f", [self contrastValueFor:a andB:e]);

            //5.1 ignore if it does not contrast with edge
            if ([self contrastValueFor:a andB:e] < minContrast){ continue;}

            //5.2 set distance (frequency)
            for (Colour * b in colours){
                a.d += [self colourDistance:a andB:b];
            }

            //5.3 add colour to accents
            [accents addObject:a];
        }

        minContrast-=0.1f;
    }

    //6\. sort colours by the most common
    NSArray * sorted = [[NSArray arrayWithArray:accents] sortedArrayUsingDescriptors:@[[[NSSortDescriptor alloc] initWithKey:@"d" ascending:true]]];

    //6.1 set primary colour (most common)
    Colour * p = sorted[0];

    //7\. get most contrasting colour
    float high = 0.0f; //the high
    int index = 0; //the index
    for (int n = 1; n < sorted.count; n++){

        Colour * c = sorted[n];
        float contrast = [self contrastValueFor:c andB:p];
        //float sat = [self saturationValueFor:c andB:p];

        if (contrast > high){
            high = contrast;
            index = n;
        }
    }
    //7.1 set secondary colour (most contrasting)
    Colour * s = sorted[index];

    NSLog(@"er %i eg %i eb %i", e.r, e.g, e.b);
    NSLog(@"pr %i pg %i pb %i", p.r, p.g, p.b);
    NSLog(@"sr %i sg %i sb %i", s.r, s.g, s.b);

    NSMutableDictionary * result = [NSMutableDictionary new];
    [result setValue:[UIColor colorWithRed:e.r/255.0f green:e.g/255.0f blue:e.b/255.0f alpha:1.0f] forKey:@"background"];
    [result setValue:[UIColor colorWithRed:p.r/255.0f green:p.g/255.0f blue:p.b/255.0f alpha:1.0f] forKey:@"primary"];
    [result setValue:[UIColor colorWithRed:s.r/255.0f green:s.g/255.0f blue:s.b/255.0f alpha:1.0f] forKey:@"secondary"];

    NSLog(@"end");
    return result;

}
-(float)contrastValueFor:(Colour *)a andB:(Colour *)b {
    float aL = 0.2126 * a.r + 0.7152 * a.g + 0.0722 * a.b;
    float bL = 0.2126 * b.r + 0.7152 * b.g + 0.0722 * b.b;
    return (aL>bL) ? (aL + 0.05) / (bL + 0.05) : (bL + 0.05) / (aL + 0.05);
}
-(float)saturationValueFor:(Colour *)a andB:(Colour *)b {
    float min = MIN(a.r, MIN(a.g, a.b)); //grab min
    float max = MAX(b.r, MAX(b.g, b.b)); //grab max
    return (max - min)/max;
}
-(int)colourDistance:(Colour *)a andB:(Colour *)b {
    return abs(a.r-b.r)+abs(a.g-b.g)+abs(a.b-b.b);
} 
```

Color 对象是一个简单的自定义类：

```
@interface Colour : NSObject
@property int r, g, b, d;
@end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T04:54:44.957

Panic 的工程师编写了一种算法，用于进行类似于 iTunes 11 中的颜色分析（以确定良好的主要颜色、次要颜色和细节颜色）。[他们在博客上](http://www.panic.com/blog/2012/12/itunes-11-and-colors/)发布了它的工作原理和代码的解释。

# android - 天空盒中的模糊？

> ID：15962895
> 
> 赞同：1
> 
> 时间：2013-04-12T04:10:39.517
> 
> 标签：android, opengl-es, textures, skybox

我用以下课程制作了一个天空盒，图像在天空和草地的某些部分变得模糊，我试图弄清楚如何修复它，谢谢你的时间。 ![图片来自模拟器](https://i.stack.imgur.com/XPx60.png)

```
public class SkyBox {
private static final String TAG = "skybox";
private FloatBuffer vertexBuffer;  // Vertex Buffer
private FloatBuffer texBuffer;     // Texture Coords Buffer

private int numFaces = 6;
private int[] imageFileIDs = {  // Image file IDs
  R.drawable.skybox,
  R.drawable.skybox1,
  R.drawable.skybox2,
  R.drawable.skybox3,
  R.drawable.skybox4,
  R.drawable.skybox5
};
private int[] textureIDs = new int[numFaces];
private Bitmap[] bitmap = new Bitmap[numFaces];
private float cubeHalfSize = 2f;

// Constructor - Set up the vertex buffer
public SkyBox(Context context) {
  // Allocate vertex buffer. An float has 4 bytes
  ByteBuffer vbb = ByteBuffer.allocateDirect(12 * 4 * numFaces);
  vbb.order(ByteOrder.nativeOrder());
  vertexBuffer = vbb.asFloatBuffer();

  // Read images. Find the aspect ratio and adjust the vertices accordingly.
  for (int face = 0; face < numFaces; face++) {
     bitmap[face] = BitmapFactory.decodeStream(
           context.getResources().openRawResource(imageFileIDs[face]));
     int imgWidth = bitmap[face].getWidth();
     int imgHeight = bitmap[face].getHeight();
     float faceWidth = 2.0f;
     float faceHeight = 2.0f;
     // Adjust for aspect ratio

        faceHeight = faceHeight * imgHeight / imgWidth; 

        faceWidth = faceWidth * imgWidth / imgHeight;

     float faceLeft = -faceWidth*20;
     float faceRight = -faceLeft;
     float faceTop = faceHeight*20;
     float faceBottom = -faceTop;

     // Define the vertices for this face
     float[] vertices = {
        faceLeft,  faceBottom, 0.0f,  // 0\. left-bottom-front
        faceRight, faceBottom, 0.0f,  // 1\. right-bottom-front
        faceLeft,  faceTop,    0.0f,  // 2\. left-top-front
        faceRight, faceTop,    0.0f,  // 3\. right-top-front
     };
     vertexBuffer.put(vertices);  // Populate
  }
  vertexBuffer.position(0);    // Rewind

  // Allocate texture buffer. An float has 4 bytes. Repeat for 6 faces.
  float[] texCoords = {
     0.0f, 1.0f,  // A. left-bottom
     1.0f, 1.0f,  // B. right-bottom
     0.0f, 0.0f,  // C. left-top
     1.0f, 0.0f   // D. right-top
  };
  ByteBuffer tbb = ByteBuffer.allocateDirect(texCoords.length * 4 * numFaces);
  tbb.order(ByteOrder.nativeOrder());
  texBuffer = tbb.asFloatBuffer();
  for (int face = 0; face < numFaces; face++) {
     texBuffer.put(texCoords);
  }
  texBuffer.position(0);   // Rewind
 }

 // Render the shape
 public void draw(GL10 gl) {
  gl.glFrontFace(GL10.GL_CCW);

  gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
  gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
  gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
  gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, texBuffer);

  // front
  gl.glPushMatrix();
  gl.glTranslatef(0f, 0f, cubeHalfSize);
  gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[0]);
  gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);
  gl.glPopMatrix();

  // left
  gl.glPushMatrix();
  gl.glRotatef(270.0f, 0f, 1f, 0f);
  gl.glTranslatef(0f, 0f, cubeHalfSize);
  gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[1]);
  gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 4, 4);
  gl.glPopMatrix();

  // back
  gl.glPushMatrix();
  gl.glRotatef(180.0f, 0f, 1f, 0f);
  gl.glTranslatef(0f, 0f, cubeHalfSize);
  gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[2]);
  gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 8, 4);
  gl.glPopMatrix();

  // right
  gl.glPushMatrix();
  gl.glRotatef(90.0f, 0f, 1f, 0f);
  gl.glTranslatef(0f, 0f, cubeHalfSize);
  gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[3]);
  gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 12, 4);
  gl.glPopMatrix();

  // top
  gl.glPushMatrix();
  gl.glRotatef(270.0f, 1f, 0f, 0f);
  gl.glTranslatef(0f, 0f, cubeHalfSize);
  gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[4]);
  gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 16, 4);
  gl.glPopMatrix();

  // bottom
  gl.glPushMatrix();
  gl.glRotatef(90.0f, 1f, 0f, 0f);
  gl.glTranslatef(0f, 0f, cubeHalfSize);
  gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[5]);
  gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 20, 4);
  gl.glPopMatrix();

  gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
  gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
 }

 // Load images into 6 GL textures
 public void loadTexture(GL10 gl) {
  gl.glGenTextures(6, textureIDs, 0); // Generate texture-ID array for 6 IDs

  Log.d(TAG, "gen number = " + textureIDs[0]);
  // Generate OpenGL texture images
  for (int face = 0; face < numFaces; face++) {
      Log.d(TAG, "gen number " + face + " = " + textureIDs[face]);
     gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[face]);
     gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST_MIPMAP_LINEAR);
     gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

     // Build Texture from loaded bitmap for the currently-bind texture ID
     GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap[face], 0);
     bitmap[face].recycle();
  }
  }
} 
```

# angularjs - 使用 ngInclude 加载到多个 DOM 位置

> ID：15962897
> 
> 赞同：0
> 
> 时间：2013-04-12T04:10:44.103
> 
> 标签：angularjs

我正在 AngularJS 中构建一个应用程序，用户在其中创建一些应用程序状态，然后有许多不同的方式来呈现它。（举个蹩脚的例子，假设他们要输入三个数字，然后他们可以选择将它们呈现为折线图或饼图。）

每种渲染类型都存在于不同的 HTML 文件中，我让用户选择一个带有 <select> 的渲染器，该渲染器驱动 ng-include 的 src 以加载不同的渲染器。到目前为止，这工作正常。

现在，一些渲染模式有额外的控制；例如，饼图可能有一个“3D”复选框。不同的渲染器将具有完全不同的控件。所以我希望这些包含的文件也可以创建用于自定义其演示文稿的控件。

这是我的问题：如何加载单个文件并让它在 DOM 中的一个位置创建附加控件，同时将其主要内容放入 DOM 中的另一个位置？附加控件不能与 DOM 中呈现的内容相邻出现：它位于完全不同的位置。

这是一个示例：[http](http://plnkr.co/edit/1RXVVu?p=preview) ://plnkr.co/edit/1RXVVu?p=preview 。我希望在 a.html 和 b.html 中，能够在 <hr> 上方的 DOM 中实例化它们的弹出控件，同时将它们的文本内容放在 <hr> 下方。（虽然在示例中可以只在 a.html 和 b.html 中分别放置一个 hr 标记，但真正的 DOM 结构要复杂得多，而且无法承受。）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:54:30.463

我创建了一个指令来将元素移动到另一个容器。这是我从你的笨拙中改变的。

我添加了 jQuery 和指令：

```
<script type="text/javascript">
  (function() {
    var app = angular.module('myapp', []);

    app.directive('myContainer', [function() {
      return {
        restrict:'A',
        link: function(scope, elem, attrs) {
          angular.element(attrs.myContainer).replaceWith(elem);
          //angular.element(attrs.myContainer).html(elem);
          //angular.element(attrs.myContainer).appendTo(elem);
          //etc...
        }
      };
    }]);
  })();
</script> 
```

我在 hr 上方添加了一个容器：

```
<div id="#container"></div> 
```

我在 a.html 和 b.html 中用容器 id 指定了指令属性：

```
<select ng-model="color" ng-options="c for c in ['red', 'blue']" data-my-container="#container"></select> 
```

容器 id（或选择器）可以动态地来自模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:16:39.747

我在这里将 Plunker 变成了一个完整的解决方案：http://tdierks.github.io/angular-element-mover/ [，](http://tdierks.github.io/angular-element-mover/)代码在这里：[https](https://github.com/tdierks/angular-element-mover) ://github.com/tdierks/angular-element-mover 。

关键指令是：

```
(function() {
  var app = angular.module('controlMover', []);
  app.directive('moveTo', [function() {
    return {
      restrict: 'A',
      link: function(scope, elem, attrs) {
        elem.appendTo(angular.element(attrs.moveTo));
        scope.$on("$destroy", function() {
          elem.remove();
        });
      }
    };
  }]);
})(); 
```

注意：我必须在范围内监听 $destroy 事件，以在窗格更改时删除移动的 DOM 元素。我还没有检查以确保这里没有泄漏，但这是一个问题。

我偶然遇到的其他事情，用于教育他人：

*   JQuery 需要在Angular*之前加载。*
*   这个带有指令的应用扩展需要在 HTML 中的 ng-app 指令上命名。

# wpf - 如何设置：数据网格高度和宽度

> ID：15962900
> 
> 赞同：0
> 
> 时间：2013-04-12T04:11:13.177
> 
> 标签：wpf, c#-4.0, wpf-controls

如何以编程方式将 WPF 的 Data Gide 控件的高度和宽度设置为 Auto。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:55:12.717

要`Auto`在后面的代码中设置元素的宽度/高度，您只需将值设置为`double.NaN`

```
myControl.Width= double.NaN;
myControl.Height = double.NaN; 
```

# python - 将产品数量与库存相关联 - 自定义模块 - OpenErp

> ID：15962908
> 
> 赞同：1
> 
> 时间：2013-04-12T04:11:44.623
> 
> 标签：python, module, openerp, product

我有一个使用项目、产品、货币、单位等的模块。

我需要当我在 openerp 的数据库中提出申请或购买产品时，它会自动将数量从系统的数据库中删除。

我在“product.product”中看到有一些函数/字段被调用

```
_product_qty_available
_product_virtual_available
_product_outgoing_qty
_product_incoming_qty 
```

我是否应该继承这些功能来管理我模块中的产品，并像申请或采购订单一样在系统中更新它们？

我的 module.py 的代码

```
import time
from datetime import datetime
from osv import osv, fields
from openerp.tools import DEFAULT_SERVER_DATE_FORMAT, DEFAULT_SERVER_DATETIME_FORMAT, DATETIME_FORMATS_MAP
import openerp.addons.decimal_precision as dp
from openerp.tools.translate import _

class certificados(osv.osv):

_name = 'certificados.certificados'
_description="Certificados de No Produccion"

_columns = {
            'Registro_Numero' : fields.integer('Registro Numero'),
            'Fecha_de_Emision': fields.date('Fecha de Emision', required=True, select=True),
            'Fecha_de_Solicitud': fields.date('Fecha de Solicitud', required=True, select=True),
            'Fecha_del_Documento': fields.date('Fecha del Documento', required=True, select=True),
            'Vigencia' : fields.integer('Vigencia'), 'cert_ids' : fields.one2many('certificados.line','requisicion_id','Items del Certificado'),
            'descripcion' : fields.text('Descripcion'),
            'notas' : fields.text('Notas'),
            }

class certificados_line(osv.osv):

_name = "certificados.line"
_description="Certificados No Produccion"
_inherit = ['mail.thread', 'ir.needaction_mixin']

_columns = {
    'Item' : fields.integer('Item'),
    'Codigo_Arancelario' : fields.integer('Codigo Arancelario'),
    'product_id' : fields.many2one('product.product', 'Material'),
    'Descripcion_Arancelaria' : fields.char('Descripcion Arancelaria', size=42, required = True, translate = True), 
    'Especificaciones_Tecnicas' : fields.char('Especificaciones Tecnicas', size=60, required = True, translate = True), 
    'Cantidad' : fields.float('Cantidad'), 'Unidad_de_Medida': fields.many2one('product.uom', 'Unidad de Medida'),
    'Precio_Unitario_Declarado' : fields.float('Precio Unitario Declarado'), 'Moneda' : fields.many2one('res.currency', 'Moneda'),
    'Valor_En_Divisas' : fields.float('Valor En Divisas'),
    'requisicion_id' : fields.many2one('certificados.certificados', 'Certificados de No Produccion', ondelete='cascade'),
    'Cantidad_Consumida' : fields.float('Cantidad Consumida'), 'Cantidad_Disponible' : fields.float('Cantidad Disponible'),

}
certificados_line() 
```

我希望我自己解释一下，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:00:45.663

如果你想在你的模块中使用 product_id，你只需通过 many2one 继承它。该产品的库存将由 OpenERP 自动维护。如果您出售它，该产品的库存将减少，如果您购买它，该产品的库存将增加。您还可以根据需要设置该产品的初始库存。

# sql-server - 用于根据列中的第一个单词（文本）将记录分组在一起的 SQL QUERY

> ID：15962909
> 
> 赞同：1
> 
> 时间：2013-04-12T04:11:54.333
> 
> 标签：sql-server

我试图以这样一种方式显示表中的记录，即它们根据列中的第一个单词（文本）进行分组和计数。

我的 SQL Server 表如下所示：

```
BinID   BinName
2070     (for item PMI-67281)
3078    1 (for item PMI-14233)
2914    1 (for item PMI-1600537)
5272    1702 (for item 004908A)
5004    1702 (for item 0332002225BLK)
4019    1702 (for item 0332204204)
1208    1A1 (for item BWB2)
1662    1A1 (for item BWB27)
1212    1A1 (for item BWB31)
1213    1A1 (for item BWB35-S)
2583    1A2 (for item BWBT359)
1234    1A2 (for item BWBT364)
1266    1A3 (for item BWB1438)
2418    1A5 (for item 1006101)
2008    1A5 (for item 107794X)
1281    1ATOP (for item BWPA3493)
1218    1B1 (for item BWB161-S) 
```

我需要的结果如下：

```
BinID   BinName Count
5272    1702 (for item 004908A) 
5004    1702 (for item 0332002225BLK)   
4019    1702 (for item 0332204204)  3
1208    1A1 (for item BWB2) 
1662    1A1 (for item BWB27)    
1212    1A1 (for item BWB31)    
1213    1A1 (for item BWB35-S)  4
2583    1A2 (for item BWBT359)  
1234    1A2 (for item BWBT364)  2
1266    1A3 (for item BWB1438)  1
2418    1A5 (for item 1006101)  
2008    1A5 (for item 107794X)  2
1281    1ATOP (for item BWPA3493)   1
1218    1B1 (for item BWB161-S) 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:25:15.560

您可以通过使用 LEFT 和 CHARINDEX 函数来做到这一点 - 使用它来查找第一个空格，并按它排序，或对其进行分组，或任何您想做的事情。

```
SELECT    BinID
         ,BinName
FROM      TABLE
ORDER BY  LEFT(BinName,CHARINDEX(' ', BinName)-1) 
```

# c# - 杀死进程后释放COM端口

> ID：15962915
> 
> 赞同：1
> 
> 时间：2013-04-12T04:12:08.680
> 
> 标签：c#, serial-port

我有一个使用 D-Link GSM 调制解调器发送/接收 SMS 消息的 C# 应用程序。

现在由于某种原因，D-Link USB 会在一段时间后自动断开并重新连接（随机）。当它重新连接时，它会打开保留 COM4 的 D-Link 连接管理器。

现在，当我的应用程序运行并尝试发送 SMS 时，它会失败，因为它找不到任何可用的（已经在使用我的 D-Link 管理器）。

当我在应用程序加载时尝试是否存在 D-Link 进程时，我正在使用 process.kill() 将其杀死。这会杀死应用程序，但仍然无法访问 COM4。

有没有办法以编程方式终止进程并释放 COM 端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:24:53.337

杀死一个进程并没有给它清理的机会。如果客户端异常终止，COM 端口很容易挂断。

尝试[Process.CloseMainWindow](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.closemainwindow%28v=vs.100%29.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)。希望该进程会通过正常关闭并关闭 COM 端口来做出响应。但是，您必须给它一些时间来关闭它，您可以使用[Process.WaitForExit](http://msdn.microsoft.com/en-us/library/ty0d8k56%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:41:01.840

该类`SerialPort`实现`IDisposable`正是出于这个原因：当端口变量超出范围时清理非托管资源（如端口本身）。

```
using (var serialPort = new SerialPort())
{
    // Set the read/write timeouts
    serialPort.ReadTimeout = 500;
    serialPort.WriteTimeout = 500;

    serialPort.Open();

    // do something
} 
```

当你终止进程时，它并不总是被清理干净，但这样，你就给了它一个战斗的机会。

# mongodb - MongoSkin 不能加一

> ID：15962916
> 
> 赞同：1
> 
> 时间：2013-04-12T04:12:22.107
> 
> 标签：mongodb

我很难尝试使用 MongoSkin 将值增加一个。

```
var client = mongoskin.db( // mongodb://server/database?options
    'mongodb://localhost/database?auto_reconnect=true&poolSize=1',
    {safe: true}
); 
```

我将以下对象（文档）添加到我的数据库中 - 我已验证该对象在数据库中并且可以使用 $set 进行更新。

{登录计数：0}

当我尝试更新 loginCount 时，没有任何反应。

```
client.collection("user").findOne(user_id.toString(), 
    {$set: { $inc: { loginCount: 1 }}}, function (err, data) {}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:08:34.027

我已经解决了这个问题：

```
client.collection("users").updateById(
  user_id.toString(),
  $inc: {loginCount: 1},
  $set: {anotherfield: anothervalue},
  function (err) {
    // handle error here
  }
} 
```

$set 运算符独立于 $inc 运算符使用。似乎 $inc, 将增加并设置值。

# android - 根据语音输入切换按钮

> ID：15962919
> 
> 赞同：0
> 
> 时间：2013-04-12T04:12:28.687
> 
> 标签：android, android-widget, android-button

我正在尝试创建一个可以根据语音输入切换按钮的应用程序。但是我从来没有处理过这样的要求。

该应用程序就像：我有一个 3 个切换按钮，一个用于打开/关闭风扇，另一个用于打开/关闭灯泡，另一个功能尚待设计。

我恳请读者提供有用的建议或答案以继续进行相同的操作。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:45:26.627

您可以使用[RecognizerIntent](http://developer.android.com/reference/android/speech/RecognizerIntent.html)进行语音输入，并使用结果来切换按钮。[这](http://viralpatel.net/blogs/android-speech-to-text-api/)是一个很好的教程。[这](https://stackoverflow.com/questions/11789791/android-speech-to-text-example)也可能对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:26:38.257

您需要编写语音识别器服务，否则如果 Google 识别器应用程序不理解或超时错误，则用户必须按再次说话按钮才能说话。您可以在我的回答[Android Speech Recognition as a service on Android 4.1 & 4.2中获得语音识别器服务的工作代码](https://stackoverflow.com/questions/14940657/android-speech-recognition-as-a-service-on-android-4-1-4-2/14950616#14950616)

# iphone - 无法更新数据库

> ID：15962920
> 
> 赞同：1
> 
> 时间：2013-04-12T04:12:34.303
> 
> 标签：iphone, ios, sqlite

我无法更新一个字段。请建议我的代码中有什么问题。

```
Code:

- (int) updateTaskDoneDate:(double)donedate ontaskid:(int)taskId
{
    sqlite3 *database;
    @try {
        if (sqlite3_open([self.databasePath UTF8String], &database) == SQLITE_OK)
        {
            NSString *sql_str = [NSString stringWithFormat:@"update task set donedate='%f' where taskid=%d ", donedate ,taskId];
            NSLog(@"sql str: %@",sql_str);
            const char *sql = [sql_str UTF8String];

            sqlite3_stmt *statement;
            statement = [self PrepareStatement:sql];

            NSDate *myDate;
            myDate=[NSDate date];

            int a1 = sqlite3_bind_double(statement, 1, [myDate timeIntervalSince1970]);
            int a2 = sqlite3_bind_int(statement, 2, taskId);
            NSLog(@"a1a2 %d, %d", a1, a2);
            if (statement)
            {
                if (a1 != SQLITE_OK ||  a2 != SQLITE_OK)
                {
                    sqlite3_finalize(statement);
                    return 0;
                }
                sqlite3_step(statement);
            }
            sqlite3_finalize(statement);
        }
    }
    @catch (NSException *exception){
        [self showException:exception];
    }
    @finally {
        sqlite3_close(database);
        return 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:21:46.090

几点观察：

1.  您正在使用`sqlite3_bind_xxx`（这很好，比使用构建 SQL 好得多`stringWithFormat`），但您的 SQL 中没有任何`?`占位符。您的 SQL 大概应该是：

    ```
    NSString *sql_str = @"update task set donedate=? where taskid=?"; 
    ```

    您不需要`stringWithFormat`调用，因为您正在绑定变量。您也不需要双精度值的引号。

2.  你没有显示准​​备语句，但如果它失败了，你在记录`sqlite3_errmsg`吗？

3.  同样在您的绑定语句中，如果它们不是`SQLITE_OK`，则您没有记录`sqlite3_errmsg`。

4.  你根本没有检查它的返回码，如果不是`sqlite3_step`，更不用说记录了。`sqlite3_errmsg``SQLITE_DONE`

最重要的是，您必须与占位符绑定，`?`并且因为您没有登录`sqlite3_errmsg`失败而盲目飞行。

# c - C 中联合的例子

> ID：15962925
> 
> 赞同：-1
> 
> 时间：2013-04-12T04:12:59.173
> 
> 标签：c

```
/* Example in unions */

#include <stdio.h>   // standard header file
#include <ctype.h>   // for atoi function
#include <stdlib.h>  // for malloc function
#include <assert.h>  // for assert macro

#define MAX 512      // for fgets()

typedef enum {National, Alien} PERSON_KIND;

typedef struct date {
    int month;
    int day;
    int year;
} DATE;

typedef struct {
    char countryOfOrigin[30];
    DATE * dateOfEntry;  // so you get comfortable with pointers
    enum { Worker, Tourist, Student} visaStatus;
    char portOfEntry[30];
} ALIEN;

typedef struct {
    char placeOfBirth[30];
    char ssn[20];
} CITIZEN;

typedef union {
    ALIEN alien;
    CITIZEN citizen;
} PERSON_INFO;

typedef struct person {
    char name[30];
    DATE * dateOfBirth;  // just to make it interesting
    PERSON_KIND personKind;
    PERSON_INFO info;
} PERSON;

void fillInfo(PERSON *);
void printInfo(const PERSON *);

int main()  {

    printf("sizeof(int) is %u\n", (unsigned) sizeof(int) );
    printf("sizeof(PERSON_KIND) is %u\n", (unsigned) sizeof(PERSON_KIND) );
    printf("sizeof(DATE) is %u\n", (unsigned) sizeof(DATE) );
    printf("sizeof(ALIEN) is %u\n", (unsigned) sizeof(ALIEN) );
    printf("sizeof(CITIZEN) is %u\n", (unsigned) sizeof(CITIZEN) );
    printf("sizeof(PERSON_INFO) is %u\n", (unsigned) sizeof(PERSON_INFO) );
    printf("sizeof(PERSON) is %u\n", (unsigned) sizeof(PERSON) );

    /* fillInfo(&p1);
    printf("\nThe infomation you entered is given below:\n");
    printInfo(&p1);

    fillInfo(&p2);
    printf("\nThe infomation you entered is given below:\n");
    printInfo(&p2);  */

    return 0;
}

/* void fillInfo(PERSON *p)   {
    char buf[MAX], i;

    printf("Please enter the person's name: ");

    printf("Please enter the birth month: ");

    printf("Please enter the birth date: ");

    printf("Please enter the birth year: ");

    printf("Please enter 1 if the person is a National or 2\n");
    printf("if the person is an alien: ");
    // get the value from the user and store it as an integer in i

    if (i == 1) p -> personKind = National;
    else p -> personKind = Alien;

    if (p -> personKind == National) {
        printf("Please enter the place of birth: ");

        printf("Please enter the ssn: ");

    }

    if (p -> personKind == Alien) {
        printf("Please enter the country of origin: ");

        printf("Please enter the month the person entered this country: ");

        printf("Please enter the day of the month the person entered this country: ");

        printf("Please enter the year the person entered this country: ");

        printf("Please enter the person's immigration status : \n");
        printf("\t1 for Worker:\n");
        printf("\t2 for Tourist:\n");
        printf("\t3 for Student: \n");
        fgets(buf, MAX, stdin);
        i = atoi(buf);

        switch (i) {
             case 1 :
                p -> info.alien.visaStatus = Worker;
                break;
             case 2 :
                p -> info.alien.visaStatus = Tourist;
                break;
             case 3 :
                p -> info.alien.visaStatus = Student;
        }

        printf("Please enter the port of entry: ");

    }
}

void printInfo(const PERSON *p)  {
    printf("Name:         %s\n", p -> name);

    printf("Date of Birth: %2d/%2d/%4d\n", );

    printf("Status: ");
    if ( p -> personKind == National) printf("National\n");
    else printf("Alien\n");

    if ( p -> personKind == National) {
        printf("Place of birth: %s\n", );
        printf("SSN: %s\n", );
    }

    if ( p -> personKind == Alien) {
        printf("Country of origin: %s\n", );

        printf("Date of Entry: %2d/%2d/%4d\n",  );

         printf("Immigration status: ");

        switch (p -> info.alien.visaStatus) {
             case Worker :
                printf("Worker\n");
                break;
             case Tourist :
                printf("Tourist\n");
                break;
             case Student :
                printf("Student\n");
        }
        printf("Port of Entry: %s\n\n", );
    }
} // print_info */ 
```

预期输出：

```
sizeof(int) is 4
sizeof(PERSON_KIND) is 4
sizeof(DATE) is 12
sizeof(ALIEN) is 80
sizeof(CITIZEN) is 50
sizeof(PERSON_INFO) is 80
sizeof(PERSON) is 128
Please enter the person's name: John Doe
Please enter the birth month: 10
Please enter the birth date: 31
Please enter the birth year: 1989
Please enter 1 if the person is a National or 2
if the person is an alien: 1
Please enter the place of birth: Worcester
Please enter the ssn: 012345678

The infomation you entered is given below:
Name:         John Doe

Date of Birth: 10/31/1989
Status: National
Place of birth: Worcester

SSN: 012345678

Please enter the person's name: Jane Smith
Please enter the birth month: 2
Please enter the birth date: 20
Please enter the birth year: 1970
Please enter 1 if the person is a National or 2
if the person is an alien: 2
Please enter the country of origin: Libya
Please enter the month the person entered this country: 10
Please enter the day of the month the person entered this country: 23
Please enter the year the person entered this country: 2009
Please enter the person's immigration status : 
    1 for Worker:
    2 for Tourist:
    3 for Student: 
1
Please enter the port of entry: New York

The infomation you entered is given below:
Name:         Jane Smith

Date of Birth:  2/20/1970
Status: Alien
Country of origin: Libya

Date of Entry: 10/23/2009
Immigration status: Worker
Port of Entry: New York 
```

取消注释所有注释代码时的编译器错误：

```
Example_union.c: In function ‘main’:
Example_union.c:56:12: error: ‘p1’ undeclared (first use in this function)
Example_union.c:56:12: note: each undeclared identifier is reported only once for each function it appears in
Example_union.c:60:12: error: ‘p2’ undeclared (first use in this function)
Example_union.c:62:20: error: expected expression before ‘/’ token
Example_union.c: In function ‘printInfo’:
Example_union.c:132:41: error: expected expression before ‘)’ token
Example_union.c:139:34: error: expected expression before ‘)’ token
Example_union.c:140:23: error: expected expression before ‘)’ token
Example_union.c:144:37: error: expected expression before ‘)’ token
Example_union.c:146:43: error: expected expression before ‘)’ token
Example_union.c:160:35: error: expected expression before ‘)’ token
Example_union.c:65:1: warning: control reaches end of non-void function [-Wreturn-type] 
```

我不熟悉工会……因为我只熟悉结构。想知道如何完成上面的代码/联合示例，以便产生正确的输出，如上所示。我还列出了未完成代码的当前编译器错误。希望你能帮忙，因为我急需。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:18:29.653

p1 未声明，但有调用将指针 p1 取消引用为 &p1 与 p2 相同。先解决这个问题。

# android - android中的asyntask参数有什么区别？

> ID：15962929
> 
> 赞同：2
> 
> 时间：2013-04-12T04:13:04.640
> 
> 标签：android, android-asynctask

正如我的问题所说，我指的是[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

它告诉我

```
 Asyntask <params, progress, result> 
```

但我没有使用进度。是按照你的安排的吗？或者它有一个规则？

例如：

```
 class loadingdata extends AsyncTask<?,?,?>
   protected void onPreExecute() {}
   protected String doInBackground(String... args) {} 
   protected void onPostExecute() {} 
```

所以我应该将 3 参数插入为

```
asyntask <void String void> ? 
```

或者它有一个规则

```
<preExecute, postExecute, doInBackground> or so fourth? 
```

请帮助我，我是初学者，我不明白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:35:10.140

异步任务由 3 个泛型类型（称为）和`Params, Progress and Result`4 个步骤（称为`onPreExecute`、`doInBackground`和）定义。`onProgressUpdate``onPostExecute`

AsyncTask 的泛型类型：

异步任务使用的三种类型如下：

```
 Params -> the type of the parameters sent to the task upon execution.
 Progress -> the type of the progress units published during the background computation.
 Result -> the type of the result of the background computation. 
```

并非所有类型都始终由异步任务使用。要将类型标记为未使用，只需使用类型 Void：

```
 private class MyTask extends AsyncTask<Void, Void, Void> { ... } 
```

AsyncTask 并实现了 4 个方法：

**1\. doInBackground：**执行长时间运行的代码在这个方法中。当 onClick 方法在单击按钮时执行时，它会调用 execute 方法，该方法接受参数并自动调用 doInBackground 方法并传递参数。

**2\. onPostExecute：**在doInBackground方法完成处理后调用该方法。doInBackground 的结果被传递给这个方法。

**3\. onPreExecute：**在调用doInBackground方法之前调用该方法。

**4\. onProgressUpdate：**这个方法是通过在doInBackground调用这个方法的任何时候调用publishProgress来调用的。

```
 Overriding onPostExecute, onPreExecute and onProgressUpdate is optional. 
```

**要记住的要点：**

```
 1\. Instance of Async Task needs to be created in UI thread. As shown in  onClick method a new instance of LongOperation is created there. Also execute method with parameters should be called from UI thread.

  2\. Methods onPostExecute, onPreExecute and onProgressUpdate  should not be explicitly called.

 3\. Task can be executed only once. 
```

让我们看一个示例类 LongOperation，它扩展了下面的 AsyncTask：查看源打印？

```
 private class LongOperation extends AsyncTask<String, Void, String> {
   @Override
   protected String doInBackground(String... params) {
          // perform long running operation operation
          return null;
   }
   /* (non-Javadoc)
   * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
   */
   @Override
   protected void onPostExecute(String result) {
          // execution of result of Long time consuming operation
   }
   /* (non-Javadoc)
   * @see android.os.AsyncTask#onPreExecute()
   */
   @Override
   protected void onPreExecute() {
   // Things to be done before execution of long running operation. 
   //For example showing ProgessDialog
   }
   /* (non-Javadoc)
   * @see android.os.AsyncTask#onProgressUpdate(Progress[])
   */
   @Override
   protected void onProgressUpdate(Void... values) {
          /* Things to be done while execution of long running operation 
          is in progress.
          For example updating ProgessDialog */
          }
   } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T04:32:41.280

如果您不需要一个或多个`AsyncTask`参数，请使用`Void`（注意大写的 V 是`Void`而不是`void`）。

的签名中`AsyncTask<params, progress, result>`，第一个是传递给的数组`doInBackground()`类型，第二个是调用`publishProgress()`which调用时使用的数组类型，第三个是返回并传递给`onProgressUpdate()`的数据类型。`doInBackdround()``onPostExecute()`

例如...

```
private class MyAsyncTask extends AsyncTask<String, Integer, Boolean> 
```

...这意味着方法签名将是...

```
doInBackground(String... params)
onProgressUpdate(Integer... progress)
onPostExecute(Boolean result) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:16:55.550

由于 AsyncTask 具有通用参数，因此您*必须*提供所有这些参数。如果您不使用它们中的任何一个，那么您提供的类型并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T04:24:57.327

类型是通用的，因此您可以使用任何类或原始类型。当你想要执行时 AsyncTasks 中的语句通过创建它的实例来使用它，然后为该实例调用 execute()。

转到： http: [//mysecretishelloworld.blogspot.in/2013/04/asynctask-usage-guide.html](http://mysecretishelloworld.blogspot.in/2013/04/asynctask-usage-guide.html)

有关 AsyncTask 的更详细使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T04:31:46.380

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

AsyncTask 的泛型类型

异步任务使用的三种类型如下：

1.  **Params**，执行时发送给任务的参数类型。

2.  进度，在后台计算期间发布的进度单元的类型。

3.  **Result**，后台计算结果的类型。

并非所有类型都始终由异步任务使用。**要将类型标记为未使用，只需使用类型 Void：**

私有类 MyTask 扩展 AsyncTask { ... }

例子

```
 private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
    protected Long doInBackground(URL... urls) {
     int count = urls.length;
     long totalSize = 0;
     for (int i = 0; i < count; i++) {
         totalSize += Downloader.downloadFile(urls[i]);
         publishProgress((int) ((i / (float) count) * 100));
         // Escape early if cancel() is called
         if (isCancelled()) break;
     }
     return totalSize;
 }

 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
     showDialog("Downloaded " + result + " bytes");
 }
 }

 URL parameter for doInBackground(URL... urls)
 You call publishProgress((int)somevalue) in doinBackground() to update progress.
 Integer parameter for onProgressUpdate(Integer... progress)  
 Long (result) parameter for onPostExecute(). The result is received from doInBackground(). 
```

用法

```
 new DownloadFilesTask().execute(url1, url2, url3); 
```

# java - Parse.com - 解析 long 的值而不是名称/标题

> ID：15962931
> 
> 赞同：1
> 
> 时间：2013-04-12T04:13:11.827
> 
> 标签：java, android, json, parsing, rest

我正在尝试发送 long 的值（在本例中为 long mStartTX），但是每次我尝试这样做时，long (mStartTX) 的标题/名称都会出现在我的数据浏览器中，而不是 long 代表的数据（自应用程序启动以来使用的数据总字节数）

如何纠正这种情况，以便 long 表示的值出现在 parse.com 中？我敢肯定这很简单。我似乎无法使用以下方法发送我需要的数据：

```
 testObject.put("time", Long.valueOf(mStartTX)); 
```

完整来源：

```
public class ParseStarterProjectActivity extends Activity {
TextView textSsid, textSpeed, textRssi;

public Handler mHandler = new Handler();
public long mStartRX = 0;
public long mStartTX = 0;

/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.parser);
textSsid = (TextView) findViewById(R.id.Ssid);
textSpeed = (TextView) findViewById(R.id.Speed);
textRssi = (TextView) findViewById(R.id.Rssi);
Long.toString(mStartTX);
ParseAnalytics.trackAppOpened(getIntent());
ParseObject testObject = new ParseObject("TestObject");
testObject.put("time", Long.valueOf(mStartTX));
testObject.saveInBackground();

mStartRX = TrafficStats.getTotalRxBytes();
mStartTX = TrafficStats.getTotalTxBytes();
if (mStartRX == TrafficStats.UNSUPPORTED || mStartTX == TrafficStats.UNSUPPORTED)     AlertDialog.Builder alert = new AlertDialog.Builder(this);
alert.setTitle("Uh Oh!");
alert.setMessage("Your device does not support traffic stat monitoring.");
alert.show();
} else {
mHandler.postDelayed(mRunnable, 1000);
}
}
private final Runnable mRunnable = new Runnable() {
public void run() {
TextView RX = (TextView)findViewById(R.id.RX);
TextView TX = (TextView)findViewById(R.id.TX);
long rxBytes = TrafficStats.getTotalRxBytes()- mStartRX;
RX.setText(Long.toString(rxBytes));
long txBytes = TrafficStats.getTotalTxBytes()- mStartTX;
TX.setText(Long.toString(txBytes));
mHandler.postDelayed(mRunnable, 1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:37:28.320

难怪，`"mStartTX"`是一个`String`字面量，`mStartTX`是一个类型的变量`long`。不带引号使用`mStartTX`，如果方法不接受 long 作为参数，请使用`Long.toString(mStartTX)`，然后使用`Long.valueOf(mStartTXStr)`. 希望这可以帮助。

# twitter-bootstrap - Ember 应用程序中的引导轮播

> ID：15962933
> 
> 赞同：1
> 
> 时间：2013-04-12T04:13:54.203
> 
> 标签：twitter-bootstrap, ember.js, handlebars.js, carousel

我对 ember 有点陌生。我的应用程序基本上按照我想要的方式设置，但现在我需要在页面上添加一个轮播。我将以下示例（取自 bootstrap 的示例）添加到我的模板中：

```
<div id="myCarousel" class="carousel slide">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
    </ol>
    <!-- Carousel items -->
    <div class="carousel-inner">
        <div class="active item">A</div>
        <div class="item">B</div>
        <div class="item">C</div>
    </div>
    <!-- Carousel nav -->
    <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
    <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div>
<div id="saveCancelBar" class="saveCancelBar"></div> 
```

然后，当我单击下一个或上一个按钮时，我的日志中出现以下错误：

```
Uncaught Error: No route matched the URL 'myCarousel' ember-1.0.0-rc.2.js:22641
Router.handleURL ember-1.0.0-rc.2.js:22641
Ember.Router.Ember.Object.extend.handleURL ember-1.0.0-rc.2.js:23409
(anonymous function) ember-1.0.0-rc.2.js:23385
(anonymous function) ember-1.0.0-rc.2.js:25142
(anonymous function) ember-1.0.0-rc.2.js:4360
Ember.handleErrors ember-1.0.0-rc.2.js:411
invoke ember-1.0.0-rc.2.js:4358
tryable ember-1.0.0-rc.2.js:4547
Ember.tryFinally ember-1.0.0-rc.2.js:1102
Ember.run ember-1.0.0-rc.2.js:4551
(anonymous function) ember-1.0.0-rc.2.js:25136
jQuery.event.dispatch jquery-1.9.1.js:3074
elemData.handle 
```

我需要做一些特别的事情来告诉 ember 来完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:56:29.197

它看起来像是您的“myCarousel”模板的缺失路线。

**更新**

*模板*

```
<script type="text/x-handlebars" data-template-name="application">
    {{outlet}}
</script>
<script type="text/x-handlebars" data-template-name="myCarousel">
    myCarousel
    <div id="myCarousel" class="carousel slide">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
    </ol>
    <!-- Carousel items -->
    <div class="carousel-inner">
        <div class="active item">A</div>
        <div class="item">B</div>
        <div class="item">C</div>
    </div>
    <!-- Carousel nav -->
    <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
    <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div>
<div id="saveCancelBar" class="saveCancelBar"></div>
</script> 
```

*JS*

```
App = Ember.Application.create({});

App.IndexRoute = Ember.Route.extend({
    redirect: function(){
        this.transitionTo('myCarousel')
    }
});

App.Router.map( function() {
    this.resource('myCarousel');
}); 
```

JSFiddle：http: [//jsfiddle.net/theremin/C3U5R/](http://jsfiddle.net/theremin/C3U5R/)

# facebook - 您如何在您的应用程序中将 twitter 帐户连接到 facebook 帐户？

> ID：15962938
> 
> 赞同：0
> 
> 时间：2013-04-12T04:14:14.240
> 
> 标签：facebook, twitter

假设有人在 facebook 上注册。然后他想在推特上发布一个地方。好吧，我需要将他的 facebook 帐户与他使用 twitter 创建的帐户连接起来。

是常做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:49:22.783

通常，自定义应用程序有自己的本地用户帐户数据库，然后每个本地用户帐户都可以与外部服务帐户相关联。比如说，您的用户可以将他们的 Facebook 帐户和 Twitter 帐户与他们在您的应用程序中的本地帐户相关联，然后与这些外部服务进行交互。

# iphone - 如何在目标c中将gps北和gps西转换为纬度/经度

> ID：15962939
> 
> 赞同：0
> 
> 时间：2013-04-12T04:14:15.303
> 
> 标签：iphone, ios, ios6, gps, location

我从服务器获得了这些值：

```
<gps_n>34.22.123</gps_n>
<gps_w>81.59.345</gps_w> 
```

我想在 Objective C 中将这些值转换为纬度/经度。您能给我一个指导吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:19:15.917

纬度/经度 (n/w) 的公式为：

> 度+（分/60）+（秒/3600）

从这个页面：

[http://webmaster10.com/ldr/lat-long-conversion.html](http://webmaster10.com/ldr/lat-long-conversion.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T12:37:42.687

您给出的示例已经是纬度/经度坐标。有许多这样的纬度，经度格式，您想要的是**十进制度**的纬度/经度坐标，可能带有表示 N/S 或 E/W 的符号。

使用上面的公式： ( `Degrees+(minutes/60)+(seconds/3600)`) 并在给定 S 时将纬度乘以 -1。当给出“W”时，将经度乘以 -1。

# reporting-services - 如何通过 TFS 使用 SSRS 解决方案

> ID：15962943
> 
> 赞同：2
> 
> 时间：2013-04-12T04:14:36.727
> 
> 标签：reporting-services, tfs, sql-server-2012, ssdt-bi

我正在使用 SQL Server 2012。我在 SSDT（Sql 服务器数据工具）中创建了一个 SSRS 解决方案。我想将它添加到 TFS Visual Studio 2010 中。它仅用于所有团队成员的同步目的。因此，每个人都可以通过每天获取最新信息来获取所有报告。不同模块大约有 300 份报告。我想通过 TFS 使用 SSRS 解决方案。以前的项目我面临所有团队成员同步的问题。因为个人创建了自己的解决方案，并在完成报告后将其上传到报告服务器上。

我不想再做一次。

我想使用 TFS 为所有报告同步所有团队成员。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:39:21.913

每当发生更改或添加报告时，TFS 将允许您的团队成员将报告本地同步到他们的计算机。您的团队成员只需要从 TFS 获取最新信息到他们的本地工作区。

听起来您需要为您的团队创建一个流程来遵循并教育他们应该如何添加或修改报告。

例如，如果您在 TFS 中有一个名为报告的文件夹，那么任何时候开发人员需要进行更改或添加报告时，他们都会将其添加到此解决方案和文件夹中。锁定将报告直接部署到服务器的能力，直到获得批准，因此开发人员无法绕过 TFS。

开发人员为确保更新或更改最新报告而采取的步骤：

*   开发者在本地从 TFS 拉下最新的报告文件夹
*   开发人员进行更新和更改
*   在开发人员签入任何更改之前，他们再次拉下最新的以确保他们不会覆盖任何新更改。如果报告在开发人员开始处理后发生更改，则可能需要合并。
*   开发人员检查 TFS 的更改
*   一旦对报告的更改获得批准，则报告将部署到报告服务器。这可以通过 TFS 构建来完成。

希望这可以帮助。如果我误解了您的问题或问题，请告诉我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T04:44:12.510

看起来您需要制作一个自定义插件，以便在签入时将您的报告同步到其他团队

# python - 如何在 python 代码中使用带参数的存储过程

> ID：15962946
> 
> 赞同：0
> 
> 时间：2013-04-12T04:14:45.437
> 
> 标签：python, sql-server, pyodbc

我想在 python 代码中使用存储过程，如下所示。

```
import pyodbc
conn = pyodbc.connect('Trusted_Connection=yes', driver = '{SQL Server}',
                      server = 'ZAMAN\SQLEXPRESS', database = 'foy3') 

def InsertUser(studentID,name,surname,birth,address,telephone):
    cursor = conn.cursor()
    cursor.execute("exec InserttoDB studentID,name,surname,birth,address,telephone")
    rows = cursor.fetchall() 
```

我在部分代码下面有问题。如何使用 InserttoDB（存储过程）将函数参数发送到 DB

```
cursor.execute("exec InserttoDB studentID,name,surname,birth,address,telephone") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:02:41.140

我不确定您使用的是什么数据库，但我认为这应该可以完成这项工作。

```
cursor.execute("call SP_YOUR_SP_NAME(params)") 
```

# java - 结合String构造Enum值

> ID：15962947
> 
> 赞同：0
> 
> 时间：2013-04-12T04:14:49.900
> 
> 标签：java, enums

只是想知道这是否是构造枚举值的好习惯。

```
public enum SomeConstant{

     ENUM_ONE("this is my "),
     ENUM_TWO(ENUM_ONE.getSomeConstant() + " enum");

     private final String constant;

     private SomeConstant(String constant){
         this.constant = constant;
     }

     private String getSomeConstant(){
         return constant;
     }

} 
```

# facebook - 带有客户端登录的 Facebook 扩展访问令牌服务器端

> ID：15962950
> 
> 赞同：1
> 
> 时间：2013-04-12T04:14:57.470
> 
> 标签：facebook, facebook-graph-api

我正在使用客户端 sdk 进行登录，并在服务器端 php sdk 中使用图形 api 对触发的操作进行“墙发布”（我将它与 offline_access 一起使用，但现在我知道它已被弃用）。

如何使用客户端 sdk 在服务器端获取***扩展访问令牌***，以便我可以在服务器端使用扩展令牌，

我知道[这里](https://stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation/9035036#9035036)有一些答案，但他们使用服务器端登录并从 $_REQUEST['code'] 获取扩展令牌，他们得到响应，

我有什么方法可以使用客户端登录获取 $_REQUEST['code'] 的值吗？

**更新：**

我的客户端登录代码支持 oAuth：

```
FB.init({
  appId      : 'MYAPPID', // App ID
  status     : true,  // check login status
  cookie     : true,  // enable cookies to allow the server to access  the session
  xfbml      : true,  // parse XFBML
  oauth      : true   // enable OAuth 2.0
});  

FB.login(function() {
   FB.api('/me', {'fields': "some coma seperated fields"},
      function(response){ 
        //Function that sends data to server
        Pass_data_to_server( response );
      });    
}, scope:'some scope values'); 
```

**服务器端代码：**

```
<?php
  $settings = array
  (
    'appId'  => FB_APP_ID,
    'secret' => FB_APP_SECRET,
    'cookie' => true,
    'oauth'  => true
  );    

  // Get facebook object from facebook sdk class
  $facebook  = new Facebook($settings); 

  if ($facebook)
  {                              
    $user_id   = $facebook->getUser();      

    $facebook->setExtendedAccessToken(); //long-live access_token 60 days
    $token     = $facebook->getAccessToken();            
    try 
    {                      
      $response = $facebook->api('me/og.like', 'POST',{ $MYCUSTOMDATA});
      return $response;
    }
    catch (FacebookApiException $e) 
    {
      print_r($e)
      return false;          
    }        
  }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:37:39.270

您可以使用 Facebook PHP SDK 方法[扩展您的访问令牌](https://developers.facebook.com/docs/howtos/login/extending-tokens/)

```
setExtendedAccessToken() 
```

这将通过调用端点自动扩展您的短期扩展访问令牌

```
https://graph.facebook.com/oauth/access_token?             
client_id=APP_ID&
client_secret=APP_SECRET&
grant_type=fb_exchange_token&
fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

然后，您可以保存此访问令牌以授权接下来 60 天的请求。

# oracle10g - 如何将表的列名传递给 Oracle 10g 中的表值函数？

> ID：15962957
> 
> 赞同：0
> 
> 时间：2013-04-12T04:15:46.633
> 
> 标签：oracle10g

在表中，我有逗号分隔的值，我必须将这些值更改为行。

例如：MSGVALUES 列

145,24,56,78 23,45,67

预期输出

```
MSGVALUES column
145
24
56
78
23
45
67 
```

我使用谷歌搜索中的表值函数（CSV）得到了上述结果。

```
select * from table (CSV('10,20,'34',',') 
```

如果我执行 CSV 函数，那么我会得到类似的结果

```
1
20
34 
```

现在我的实际要求是我必须将上述 CSV 函数应用于我的列名 ie.MSG VALUE 列。假设我的表名是 CODEDESC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:43:51.663

所以你可以将`table()`演员加入你的桌子，比如：

```
select csv.*
  from your_tab t, table(csv(t.msgvalues, ',')) csv; 
```

# actionscript-3 - 是否可以从其他包访问包外的类？

> ID：15962959
> 
> 赞同：1
> 
> 时间：2013-04-12T04:16:00.487
> 
> 标签：actionscript-3, flash, class, namespaces, package

我有这样的课

```
package test{
    class Test{}
}
class TestInnerClass{} 
```

我可以从 Test 类访问 TestInnerClass，但我也需要从其他类访问 TestInnerClass（作为类，而不是它的实例）。而且我真的不想让 TestInnerClass 成为一个独立的类，因为它只包含一些变量。

有什么方法可以从外部测试类访问该类？

[编辑] 更具体地说，我需要访问以下代码才能工作。

```
 registerClassAlias("TestInnerClass",TestInnerClass); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:25:38.313

如果您有一个类，除非公共类在内部访问，否则您可以将其定义为内部。

内部类对当前包内的引用可见。

在您的示例中，`TestInnerClass`仅对`Test`.

否则，要访问类或注册类别名，必须在其自己的 .as 文件中将其定义为 public。

包有助于在层次结构中对代码进行排序和分类。通常，我会将值对象或数据传输对象保存在它们自己的包中，例如：

```
 com.jasonsturges.model.vo 
```

这有助于将较小的模型类组合在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:30:57.040

如果你想让一个类在它包含的包之外可见，你的类将被定义为：

```
// SampleCode.as file 
package samples{
public class SampleCode {} 
}

 // CodeFormatter.as file 
package samples{
class CodeFormatter {} 
} 
```

SampleCode 类可见，而 CodeFormatter 类不可见。

希望我已经回答了你的问题

# data-structures - 给定一个超过 50,000 的大型数据库，我如何快速搜索所需的点

> ID：15962961
> 
> 赞同：0
> 
> 时间：2013-04-12T04:16:03.900
> 
> 标签：data-structures

我有一个超过 50,000 个点的数据库。每个点都有 3 个维度。让我们标记它们 [i,j,k]

我希望以其他方式寻找比其他点更好的点。

例如，对象 A [10 10 3]、对象 B[1 1 4]、对象 C[1 1 1]、对象 D[1 1 10]

那么所需的输出将是 A 和 D（因为 C 比它们都差，并且 B 在维度 [k] 中击败 A，但 D 在维度 [k] 中击败 B）

我尝试了一些基本的比较算法（即 if else 语句），这些算法在我减少数据库大小时确实有效。但是有 50,000，需要 10 多分钟才能找到所需的输出，这当然不是一个好的解决方案。

有人可以推荐我一两种方法来以最快的方式做到这一点吗？

谢谢

编辑：

谢谢 我想我明白了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:42:09.610

您正在寻找帕累托最优点。这些形成一个凸包。这在二维中最容易看到。使用迭代算法确定前 N 个点的帕累托最优点。对于 N=1，这只是第一点。对于 N=2，下一个点要么被第一个控制（丢弃第 2 个），控制第一个（丢弃第 1 个），位于左上方或右下方（因此也是帕累托最优）。

您可以通过保持凸包的简化上限和下限来加速分类，例如，仅单点`{minX, minY, minZ}`和`{maxX, maxY, maxZ}`. 如果`P={x,y,z}`由`{minX, minY, minZ}`then 支配，则到目前为止它由所有帕累托最优点支配并且可以被丢弃。如果 P 支配`{maxX, maxY, maxZ}`，它也支配了迄今为止帕累托最优的所有点，您可以丢弃所有这些点。

一个快速的 O(log N) 初始步骤是首先按 X 顺序对集合进行排序以找到最大 X 的点，然后 Y 找到最大 Y 的点，最后找到最大 Z 的点。在 ths 中找到帕累托最优点N=3 子集很容易，并且可以硬编码。然后，您可以将此集合用作第一个近似值。

一个更精细的解决方案是然后按`X+Y`、和排序`X+Z`，并找到这些最大值。同样，这产生了很好的初始候选点，因为它们将支配许多其他点。`Y+Z``X+Y+Z`

例如，在您的情况下，按 X 排序和按 Y 排序都会产生点 A；按 Z 排序会产生 D 点，两者都不占优势，然后您可以快速丢弃 B 和 C。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T04:51:38.153

您可以对代码进行许多优化：

```
{
vector<bool> isinterst(n, true);

for (int i=0; i<n; i++) {
  for (int j=0; j<n; j++) {

    if (isinterst[i]) {
        bool worseelsewhere=false;

        for (int k=0; k<d; k++)
        {
            if (point[i][k]<point[j][k])
            {
                worseelsewhere=true; 
                break;   //you can exit for loop if worseelsewhere is set to true
            }
        }                          
        if(worseelsewhere == false)
        {
              continue; //skip the rest if worseelsewhere is false
        }

        bool worse=true;
        for (int k=0; k<d; k++)
        {
            if (point[i][k]>point[j][k])
            {
                worse=false;
                break; //you can exit for loop if worse is set to false
            }
        }

        if (worseelsewhere && worse) {
            isinterst[i]=false;
            //cout << i << " Not desirable " << endl; 
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T07:27:57.277

在不知道您对“更好”的定义的情况下，在这里提出具体建议有点困难。但是，我注意到您似乎在使用空间数据。处理空间数据时经常使用的数据结构是 R-Tree ( [http://en.wikipedia.org/wiki/R-tree](http://en.wikipedia.org/wiki/R-tree) )。这为多维信息提供了有效的索引。

也许 boost::geometry 库有一些可以提供帮助的工具：http: [//www.boost.org/doc/libs/1_53_0/libs/geometry/doc/html/geometry/introduction.html](http://www.boost.org/doc/libs/1_53_0/libs/geometry/doc/html/geometry/introduction.html)

# jquery - jQuery - 想要显示/隐藏切换（使用 .previous） - 我哪里出错了？

> ID：15962962
> 
> 赞同：0
> 
> 时间：2013-04-12T04:16:05.333
> 
> 标签：jquery, show-hide, closest, siblings

我想做一个简单的显示/隐藏切换。

当您单击什么是“添加” div 时，它应该显示上一个兄弟。然而，尽管这看起来很简单，但它不会起作用。我想不通。任何帮助表示赞赏。谢谢！

edit* 删除了我解决的部分问题（我得到了 .hide() 部分的工作），但仍然无法让我上面提到的部分工作。

[http://jsfiddle.net/ghnne/12/](http://jsfiddle.net/ghnne/12/)

```
<div class='sideRowStackedInputSideNarrow'>

    <div class='sideRowCreateAdditionalInput'></div>

    <div class='sideRowCreateAdditionalInputNext'>
        <div class='sideRowCreateAdditionalInputNextClose'></div>
    </div>

     <div class='sideRowCreateAdditionalInputNext'>
        <div class='sideRowCreateAdditionalInputNextClose'></div>
    </div>

    <div class='sideRowCreateAdd'></div>

</div>

$('.sideRowCreateAdd').click(function(){

        $(this).previous('.sideRowCreateAdditionalInputNext').show();

    });

    $('.sideRowCreateAdditionalInputNextClose').click(function(){

        $(this).closest('.sideRowCreateAdditionalInputNext').hide();

    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:26:36.917

它应该是`.prev()`而*不是* `.previous()`

文档：[http ://api.jquery.com/prev/](http://api.jquery.com/prev/)

```
$('.sideRowCreateAdd').click(function(){
    $(this).prev('.sideRowCreateAdditionalInputNext').show();
}); 
```

更新小提琴：http: [//jsfiddle.net/ghnne/16/](http://jsfiddle.net/ghnne/16/)

# vim - 如何提取带有图案的线条并将它们放在文件的末尾

> ID：15962964
> 
> 赞同：0
> 
> 时间：2013-04-12T04:16:12.110
> 
> 标签：vim

假设我有以下文本。

```
a test1
b test2
a test3
b test4 
```

用于提取以字母 a 开头的行并将它们放在文件末尾的命令是什么？

```
b test2
b test4

a test1
a test3 
```

当我使用 :g/^a/d 和 p 时，粘贴了唯一的最后一个匹配项：

```
b test2
b test4

a test3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T04:26:19.327

您只看到`a test3`最后，因为`:d`设置（而不是附加）默认寄存器。由于`:g`每行匹配模式执行一次给定命令，因此粘贴时只有最后一行在默认寄存器中。

执行此操作的规范方法是使用`:move`（缩写为`:m`）命令 -- `:g/^a/m $`。对于匹配 的每一行`^a`，将其移到最后一行 ( `$`) 之后。

对您的初始方法稍作修改是`:d`附加到寄存器，然后粘贴该寄存器。

```
:let @a=''  " Clear register a
:g/^a/d A   " For every line that matches ^a, delete it
            " and append the contents to register a
:$put a     " Paste the contents of register a after the last line 
```

最后一部分也可以使用正常模式命令完成`"ap`。

# jquery - 如何找到最近元素的特定类？

> ID：15962966
> 
> 赞同：1
> 
> 时间：2013-04-12T04:16:26.467
> 
> 标签：jquery

我正在尝试从最近的元素中找到特定的类匹配

```
 $(this).closest("tr"); 
```

我需要从这一点找出这个 tr 是否有一个类名 testlog3 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:17:36.023

您可以使用最接近的函数，如下所示：

```
$(this).closest('tr.testlog3'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T04:17:48.050

使用[`hasClass`](http://api.jquery.com/hasClass)：

```
if($(this).closest('tr').hasClass('testlog3')) {
    // ... 
```

# javascript - 根据记录数显示寻呼机

> ID：15962969
> 
> 赞同：0
> 
> 时间：2013-04-12T04:16:47.907
> 
> 标签：javascript, asp.net-mvc, kendo-ui

我正在使用剑道网格。我已经定义了，

```
$("#grid").kendoGrid({
            dataSource:datasource, 
           pageable: true,
            columns: [
                    { field: "ProductId", title: "ProductId" },
                    { field: "ProductType", title: "ProductType" },
                    { field: "Name", title: "Name" },
                    { field: "Created", title: "Created" }
                ],
          });
    }); 
```

我可以在我的网格中显示寻呼机。但是我想要的是如果网格中的记录超过 20，那么我只想显示寻呼机，否则不想显示寻呼机，你能告诉我怎么做这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:39:17.960

基本上不支持这个。您可以尝试使用一些 JavaScript 来解决它。例如，初始化 Grid 后的以下脚本应该实现类似的行为：

```
$(function(){
     if($('#gridName').data().kendoGrid.dataSource.total()>20){
          $('#gridName .k-grid-pager').hide();
     }
}) 
```

# android - 安卓应用崩溃

> ID：15962981
> 
> 赞同：3
> 
> 时间：2013-04-12T04:17:52.383
> 
> 标签：android

我的应用程序运行良好，但突然在模拟器中我的应用程序崩溃了，但我没有对代码进行任何更改

以供参考

```
04-12 09:41:05.079: W/ActivityManager(879): Activity destroy timeout for ActivityRecord{b5aaca48 com.bostonmediatech.gayatrimantra/.Main}
04-12 09:41:05.079: W/ActivityManager(879): Activity destroy timeout for ActivityRecord{b5c6ea90 com.bostonmediatech.gayatrimantra/.Home}
04-12 09:41:06.449: I/ActivityManager(879): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.bostonmediatech.gayatrimantra/.Main} from pid 1008
04-12 09:41:06.449: W/WindowManager(879): Failure taking screenshot for (180x300) to layer 21005
04-12 09:41:06.459: D/dalvikvm(1466): Not late-enabling CheckJNI (already on)
04-12 09:41:06.459: D/dalvikvm(786): GC_EXPLICIT freed 35K, 4% free 8982K/9283K, paused 0ms+4ms
04-12 09:41:06.470: D/dalvikvm(786): GC_EXPLICIT freed <1K, 4% free 8982K/9283K, paused 1ms+0ms
04-12 09:41:06.470: D/dalvikvm(786): GC_EXPLICIT freed <1K, 4% free 8982K/9283K, paused 0ms+0ms
04-12 09:41:06.470: I/ActivityManager(879): Start proc com.bostonmediatech.gayatrimantra for activity com.bostonmediatech.gayatrimantra/.Main: pid=1466 uid=10039 gids={}
04-12 09:41:06.479: W/NetworkManagementSocketTagger(879): setKernelCountSet(10039, 1) failed with errno -2
04-12 09:41:06.479: D/dalvikvm(1466): GC_FOR_ALLOC freed 67K, 3% free 9021K/9283K, paused 0ms
04-12 09:41:06.479: I/dalvikvm-heap(1466): Grow heap (frag case) to 9.450MB for 614412-byte allocation
04-12 09:41:06.509: D/dalvikvm(1466): GC_CONCURRENT freed 0K, 4% free 9621K/9927K, paused 0ms+1ms
04-12 09:41:06.571: D/gralloc_goldfish(1466): Emulator without GPU emulation detected.
04-12 09:41:06.619: I/ActivityManager(879): Displayed com.bostonmediatech.gayatrimantra/.Main: +170ms (total +12s176ms)
04-12 09:41:06.629: W/InputManagerService(879): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@b5c2dfa0 (uid=10012 pid=1008)
04-12 09:41:07.207: W/NetworkManagementSocketTagger(879): setKernelCountSet(10012, 0) failed with errno -2
04-12 09:41:07.789: W/ThrottleService(879): unable to find stats for iface rmnet0
04-12 09:41:07.789: E/ThrottleService(879): Error reading data file
04-12 09:41:08.689: I/ActivityManager(879): START {act=com.bostonmediatech.gayatrimantra.CLEARSCREEN cmp=com.bostonmediatech.gayatrimantra/.Home} from pid 1466
04-12 09:41:08.689: W/WindowManager(879): Failure taking screenshot for (180x300) to layer 21010
04-12 09:41:08.699: D/dalvikvm(1466): GC_FOR_ALLOC freed 4K, 3% free 9640K/9927K, paused 3ms
04-12 09:41:08.699: I/dalvikvm-heap(1466): Grow heap (frag case) to 10.054MB for 614412-byte allocation
04-12 09:41:08.719: D/dalvikvm(1466): GC_CONCURRENT freed <1K, 4% free 10240K/10567K, paused 0ms+0ms
04-12 09:41:08.731: D/AndroidRuntime(1466): Shutting down VM
04-12 09:41:08.731: W/dalvikvm(1466): threadid=1: thread exiting with uncaught exception (group=0xb508f180)
04-12 09:41:08.731: E/AndroidRuntime(1466): FATAL EXCEPTION: main
04-12 09:41:08.731: E/AndroidRuntime(1466): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.bostonmediatech.gayatrimantra/com.bostonmediatech.gayatrimantra.Home}: android.view.InflateException: Binary XML file line #8: Error inflating class android.widget.ListView
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.os.Looper.loop(Looper.java:137)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at java.lang.reflect.Method.invoke(Method.java:511)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at dalvik.system.NativeStart.main(Native Method)
04-12 09:41:08.731: E/AndroidRuntime(1466): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class android.widget.ListView
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.view.LayoutInflater.createView(LayoutInflater.java:606)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.app.Activity.setContentView(Activity.java:1835)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at com.bostonmediatech.gayatrimantra.Home.onCreate(Home.java:26)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.app.Activity.performCreate(Activity.java:4465)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-12 09:41:08.731: E/AndroidRuntime(1466):     ... 11 more
04-12 09:41:08.731: E/AndroidRuntime(1466): Caused by: java.lang.reflect.InvocationTargetException
04-12 09:41:08.731: E/AndroidRuntime(1466):     at java.lang.reflect.Constructor.constructNative(Native Method)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.view.LayoutInflater.createView(LayoutInflater.java:586)
04-12 09:41:08.731: E/AndroidRuntime(1466):     ... 24 more
04-12 09:41:08.731: E/AndroidRuntime(1466): Caused by: java.lang.RuntimeException: Don't call setOnClickListener for an AdapterView. You probably want setOnItemClickListener instead
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.widget.AdapterView.setOnClickListener(AdapterView.java:761)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.view.View.<init>(View.java:3018)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.view.ViewGroup.<init>(ViewGroup.java:385)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.widget.AdapterView.<init>(AdapterView.java:234)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.widget.AbsListView.<init>(AbsListView.java:734)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.widget.ListView.<init>(ListView.java:141)
04-12 09:41:08.731: E/AndroidRuntime(1466):     at android.widget.ListView.<init>(ListView.java:137)
04-12 09:41:08.731: E/AndroidRuntime(1466):     ... 27 more
04-12 09:41:08.731: W/ActivityManager(879):   Force finishing activity com.bostonmediatech.gayatrimantra/.Home
04-12 09:41:08.759: D/dalvikvm(879): GC_CONCURRENT freed 347K, 12% free 11209K/12615K, paused 0ms+1ms
04-12 09:41:09.199: I/Process(879): Sending signal. PID: 1466 SIG: 3
04-12 09:41:09.199: I/dalvikvm(1466): threadid=3: reacting to signal 3
04-12 09:41:09.199: I/dalvikvm(1466): Wrote stack traces to '/data/anr/traces.txt'
04-12 09:41:09.239: W/ActivityManager(879): Activity pause timeout for ActivityRecord{b5c736d0 com.bostonmediatech.gayatrimantra/.Home}
04-12 09:41:09.239: I/Process(879): Sending signal. PID: 1466 SIG: 3
04-12 09:41:09.239: I/dalvikvm(1466): threadid=3: reacting to signal 3
04-12 09:41:09.239: I/dalvikvm(1466): Wrote stack traces to '/data/anr/traces.txt'
04-12 09:41:09.249: W/NetworkManagementSocketTagger(879): setKernelCountSet(10012, 1) failed with errno -2
04-12 09:41:09.301: W/NetworkManagementSocketTagger(879): setKernelCountSet(10039, 0) failed with errno -2
04-12 09:41:09.323: D/dalvikvm(1008): GC_FOR_ALLOC freed 2466K, 29% free 17654K/24647K, paused 5ms
04-12 09:41:09.499: D/dalvikvm(1008): GC_CONCURRENT freed 1766K, 28% free 17895K/24647K, paused 0ms+0ms
04-12 09:41:09.529: D/dalvikvm(1008): GC_FOR_ALLOC freed 1568K, 26% free 18277K/24647K, paused 17ms
04-12 09:41:09.531: D/dalvikvm(1008): GC_CONCURRENT freed 310K, 26% free 18312K/24647K, paused 1ms+1ms
04-12 09:41:10.199: I/Process(1466): Sending signal. PID: 1466 SIG: 9
04-12 09:41:10.199: I/WindowManager(879): WIN DEATH: Window{b5be9ae0 com.bostonmediatech.gayatrimantra/com.bostonmediatech.gayatrimantra.Main paused=true}
04-12 09:41:10.199: I/ActivityManager(879): Process com.bostonmediatech.gayatrimantra (pid 1466) has died.
04-12 09:41:10.269: W/InputManagerService(879): Got RemoteException sending setActive(false) notification to pid 1466 uid 10039
04-12 09:41:19.301: W/ActivityManager(879): Activity destroy timeout for ActivityRecord{b5c0f358 com.bostonmediatech.gayatrimantra/.Main}
04-12 09:41:19.301: W/ActivityManager(879): Activity destroy timeout for ActivityRecord{b5c736d0 com.bostonmediatech.gayatrimantra/.Home} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:24:20.373

> java.lang.RuntimeException：不要为 AdapterView 调用 setOnClickListener。你可能想要 setOnItemClickListener

这是例外，因为您为 ListView 设置了 onClickListener，但您应该设置 onItemClickListener。

并发布您的代码以识别其他问题。

并确保它是`AdapterView.OnItemClickListener()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T04:34:06.927

从布局中删除 onClick 或 onItemClick

# c++ - 如何在 VC++ 中将 HTML Unicode 文本设置为剪贴板？

> ID：15962982
> 
> 赞同：2
> 
> 时间：2013-04-12T04:17:54.620
> 
> 标签：c++, visual-c++, clipboard

我是 C++ 的新手。我想获取剪贴板的内容，其中可能包含 Unicode 字符，附加一个 div 标签，其中包含一些 HTML 格式的内容，然后将其设置回剪贴板。

*我已成功获取内容并附加它。*但无法将其*作为 HTML 文本设置回剪贴板*。我已经实现了简单文本的设置。这是我的代码：

```
#include <shlwapi.h>
#include <iostream>
#include <conio.h>
#include <stdio.h>

using namespace std;

wstring getClipboard(){
    if (OpenClipboard(NULL)){
        HANDLE clip = GetClipboardData(CF_UNICODETEXT);
        WCHAR * c;
        c = (WCHAR *)clip;
        CloseClipboard();
        return (WCHAR *)clip;
    }
    return L"";
}

bool setClipboard(wstring textToclipboard)
{
    if (OpenClipboard(NULL)){
        EmptyClipboard();
        HGLOBAL hClipboardData;
        size_t size = (textToclipboard.length()+1) * sizeof(WCHAR);
        hClipboardData = GlobalAlloc(NULL, size);
        WCHAR* pchData = (WCHAR*)GlobalLock(hClipboardData);
        memcpy(pchData, textToclipboard.c_str(), size);
        SetClipboardData(CF_UNICODETEXT, hClipboardData);
        GlobalUnlock(hClipboardData);
        CloseClipboard();
        return true;
    }
    return false;
}

int main (int argc, char * argv[])
{
   wstring  s =  getClipboard();
   s += std::wstring(L"some extra text <b>hello</b>");
   setClipboard(s);
   getch();
   return 0;
} 
```

我确实尝试使用[此处描述的代码并阅读](http://support.microsoft.com/kb/274308)[此处](http://msdn.microsoft.com/en-us/library/aa767917.aspx)的文档。但我无法让它工作。我尝试的可能是偏离轨道或完全错误的。

**更新：**下面的代码是我在 Cody Gray 建议的对[此处](http://support.microsoft.com/kb/274308)提供的原始代码进行修改后尝试的代码：

```
bool CopyHTML2(WCHAR *html ){

    wchar_t *buf = new wchar_t [400 + wcslen(html)];
    if(!buf) return false;

    static int cfid = 0;
    if(!cfid) cfid = RegisterClipboardFormat("HTML Format");

        // Create a template string for the HTML header...
    wcscpy(buf,
        L"Version:0.9\r\n"
        L"StartHTML:00000000\r\n"
        L"EndHTML:00000000\r\n"
        L"StartFragment:00000000\r\n"
        L"EndFragment:00000000\r\n"
        L"<html><body>\r\n"
        L"<!--StartFragment -->\r\n");

    // Append the HTML...
    wcscat(buf, html);
    wcscat(buf, L"\r\n");
    // Finish up the HTML format...
    wcscat(buf,
        L"<!--EndFragment-->\r\n"
        L"</body>\r\n"
        L"</html>");

    wchar_t *ptr = wcsstr(buf, L"StartHTML");
    wsprintfW(ptr+10, L"%08u", wcsstr(buf, L"<html>") - buf);
    *(ptr+10+8) = L'\r';

    ptr = wcsstr(buf, L"EndHTML");
    wsprintfW(ptr+8, L"%08u", wcslen(buf));
    *(ptr+8+8) = '\r';

    ptr = wcsstr(buf, L"StartFragment");
    wsprintfW(ptr+14, L"%08u", wcsstr(buf, L"<!--StartFrag") - buf);
    *(ptr+14+8) = '\r';

    ptr = wcsstr(buf, L"EndFragment");
    wsprintfW(ptr+12, L"%08u", wcsstr(buf, L"<!--EndFrag") - buf);
    *(ptr+12+8) = '\r';

    // Open the clipboard...
    if(OpenClipboard(0)) {
        EmptyClipboard();
        HGLOBAL hText = GlobalAlloc(GMEM_MOVEABLE |GMEM_DDESHARE, wcslen(buf)+4);
        wchar_t *ptr = (wchar_t *)GlobalLock(hText);
        wcscpy(ptr, buf);
        GlobalUnlock(hText);
        SetClipboardData(cfid, hText);
        CloseClipboard();
        GlobalFree(hText);
    }

    // Clean up...
    delete [] buf;
    return true;
} 
```

此代码编译成功，但我在 SetClipboardData 收到以下错误：`HEAP[Project1.exe]: Heap block at 007A8530 modified at 007A860A past requested size of d2 Project1.exe has triggered a breakpoint.`

请指导我如何进行。我在 Windows 8 上使用 Visual Studio Express 2012。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:06:29.823

您不匹配 ANSI（窄）和 Unicode（宽）字符串。

与`wcscpy`函数不同的是`w`，`wsprintf`函数中的 不代表“wide”，它代表“Windows”。它是 Win32 API 的一部分，而不是 C 运行时库。所有处理字符串的 Win32 API 函数都有两个版本，一个以`A`处理 ANSI 字符串为后缀，另一个以`W`处理宽字符串为后缀。标题用宏对你隐藏了所有这些。我在[这里](https://stackoverflow.com/questions/15458312/how-do-i-properly-call-the-copyfile-function-in-visual-c/15458564#15458564)更详细地解释了所有这些——推荐阅读。

无论如何，这里的简单解决方法是显式调用该函数的宽变体，因为您在其他任何地方都正确使用了宽字符串。使所有调用`wsprintf`看起来像这样：

```
wchar_t *ptr = wcsstr(buf, L"StartHTML");
wsprintfW(ptr+10, L"%08u", wcsstr(buf, L"<html>") - buf);
*(ptr+10+8) = L'\r'; 
```

或者，您可以使用`swprintf`C 运行时库提供的函数而不是 Win32 版本。这与您在其他地方使用的`wcsstr`and函数一样工作。`wcscpy`名字`w`中的意思是“宽”。这一系列功能的文档在[这里](http://msdn.microsoft.com/en-US/library/ybk95axf.aspx)。

另请注意，当您使用字符或字符串文字时，它们也需要是宽字符。您可以通过在它们前面加上`L`. 您在某些地方这样做，但在其他地方却错过了。确保你始终如一地这样做。

不过，编译器应该警告您所有这些。您只需要确保提高警告级别并且不要忽略任何警告。还要确保为您的项目全局定义了`UNICODE`和`_UNICODE`预处理器符号。这将确保您始终调用 Unicode/宽版本的函数。尽管这应该是所有新项目的默认设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T10:21:03.837

这是我[在 codeproject.com 的 Jochen Arndt](http://bit.ly/139Rmkg)的帮助下提出的功能。希望这可以帮助某人。[这是一个完整的工作代码](http://bit.ly/10c1M3e)，如果您有兴趣检查一下。

~~它仍然存在一个问题。也就是说，当单独粘贴到 onenote 时，它​​会在锚标记后粘贴乱码。Word、PowerPoint 或 Excel 不会发生这种情况。对于普通的英文文本，它没有这个问题。如果您对此有解决方案，请告诉我。~~问题似乎出在 OneNote 上。不是用代码。

```
bool setClipboard(LPCWSTR lpszWide){
    int nUtf8Size = ::WideCharToMultiByte(CP_UTF8, 0, lpszWide, -1, NULL, 0, NULL, NULL);
    if (nUtf8Size < 1) return false;

    const int nDescLen = 105;
    HGLOBAL hGlobal = ::GlobalAlloc(GMEM_MOVEABLE, nDescLen + nUtf8Size);
    if (NULL != hGlobal)
    {
        bool bErr = false;
        LPSTR lpszBuf = static_cast<LPSTR>(::GlobalLock(hGlobal));
        LPSTR lpszUtf8 = lpszBuf + nDescLen;
        if (::WideCharToMultiByte(CP_UTF8, 0, lpszWide, -1, lpszUtf8, nUtf8Size, NULL, NULL) <= 0)
        {
            bErr = true;
        }
        else
        {
            LPCSTR lpszStartFrag = strstr(lpszUtf8, "<!--StartFragment-->");
            LPCSTR lpszEndFrag = strstr(lpszUtf8, "<!--EndFragment-->");
            lpszStartFrag += strlen("<!--StartFragment-->") + 2;

            int i = _snprintf(
            lpszBuf, nDescLen,
            "Version:1.0\r\nStartHTML:%010d\r\nEndHTML:%010d\r\nStartFragment:%010d\r\nEndFragment:%010d\r\n",
            nDescLen, 
            nDescLen + nUtf8Size - 1,       // offset to next char behind string
            nDescLen + static_cast<int>(lpszStartFrag - lpszUtf8), 
            nDescLen + static_cast<int>(lpszEndFrag - lpszUtf8));
        }
        ::GlobalUnlock(hGlobal);
        if (bErr)
        {
            ::GlobalFree(hGlobal);
            hGlobal = NULL;
        }

        // Get clipboard id for HTML format...
        static int cfid = 0;
        cfid = RegisterClipboardFormat("HTML Format");
        // Open the clipboard...
        if(OpenClipboard(0)) {
            EmptyClipboard();
            HGLOBAL hText = GlobalAlloc(GMEM_MOVEABLE |GMEM_DDESHARE, strlen(lpszBuf)+4);
            char *ptr = (char *)GlobalLock(hText);
            strcpy(ptr, lpszBuf);
            GlobalUnlock(hText);
            ::SetClipboardData(cfid, hText);
            CloseClipboard();
            GlobalFree(hText);
        }
    }

    return NULL != hGlobal;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-10T15:26:43.917

您的问题来自在引用的示例中使用**wchar_t**而不是**char**，这使您在偏移计算上出错。

但是，我建议您避免使用*wchar_t*将*UNICODE*文本传输到剪贴板。实际上，*UTF-8* char 可以使用 1 到 4 个字节之间的字节序列进行编码，而Windows 上的*wchar_t*是固定的 2 个字节类型。

正如您的电子邮件中提到的 Microsoft 文档中所述，剪贴板的内容应为 UNICODE，恰好与剪贴板内存标题中包含的字符的 ASCII 相同。

要在剪贴板中传输 UNICODE，您可以使用标准**char** C++ 函数来准备发送到剪贴板的内容（例如*std::string*。）

虽然引用的示例有效，但请在此处找到另一个使用 C++ 框架的代码示例，它实际上可以将 UTF-8 字符以 HTML 格式复制到剪贴板：

```
void copyHTMLtoClipboard(const std::string& html) {

std::string contextStart("Version:0.9\r\nStartHTML:0000000000\r\nEndHTML:0000000000\r\nStartFragment:0000000000\r\nEndFragment:0000000000\r\n<html><body>\r\n<!--StartFragment -->\r\n");
std::string contextEnd("\r\n<!--EndFragment -->\r\n</body></html>");

std::stringstream aux;
aux << contextStart << html << contextEnd;
std::string res = aux.str();

size_t htmlStart = 105 * sizeof(char);
size_t fragmentStart = 119 * sizeof(char);
size_t htmlEnd = res.size() * sizeof(char);
size_t fragmentEnd = htmlEnd - 35 * sizeof(char);

aux.fill('0');
aux.width(10);
aux.seekp(23);
aux << htmlStart;

aux.seekp(43);
aux.fill('0');
aux.width(10);
aux << htmlEnd;

aux.seekp(69);
aux.fill('0');
aux.width(10);
aux << fragmentStart;

aux.seekp(93);
aux.fill('0');
aux.width(10);
aux << fragmentEnd;

res = aux.str();

HGLOBAL hdst = GlobalAlloc(GMEM_MOVEABLE | GMEM_DDESHARE, htmlEnd + sizeof(char));
LPSTR dst = (LPSTR)GlobalLock(hdst);
memcpy(dst, res.c_str(), htmlEnd);
dst[htmlEnd] = 0;
GlobalUnlock(hdst);

OpenClipboard(NULL);
EmptyClipboard();
SetClipboardData(RegisterClipboardFormat(L"HTML Format"), hdst);
CloseClipboard();

GlobalFree(hdst);

} 
```

请注意，此代码是在定义宏*_UNICODE*和*UNICODE*时编译的。

# ios - CGAffineTransformScale 和方向变化

> ID：15962983
> 
> 赞同：2
> 
> 时间：2013-04-12T04:17:55.473
> 
> 标签：ios, uiinterfaceorientation, cgaffinetransform

晚上好，

我使用 CGAffineTransformScale 缩小 UIView。

```
[UIView animateWithDuration:0.3 animations:^{
            gridContainerView.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.2, 0.2);
            gridContainerView.alpha = 0.0;
        } completion:^(BOOL finished) {
            // show UIView B
        }]; 
```

并将其缩放回原来的大小：

```
[UIView animateWithDuration:0.3 animations:^{
    gridContainerView.transform = CGAffineTransformIdentity;
    gridContainerView.alpha = 1.0;
} completion:^(BOOL finished) {
    // remove UIView B
}]; 
```

这工作正常。gridContainerView 被缩小到屏幕的中心。但是，如果我更改设备方向（到 ae 横向），中心会以某种方式移动到左下角。一旦我改变方向，转换就不会再到屏幕的中心了。解决此问题的唯一方法是释放 gridContainerView 并重新分配/初始化它。但不幸的是，目前这对我来说不是一个选择。

任何帮助都非常感谢。

# javascript - 如何从 HtmlUnit 中的特定 url 过滤 javascript

> ID：15962990
> 
> 赞同：1
> 
> 时间：2013-04-12T04:19:10.260
> 
> 标签：javascript, automation, htmlunit

HtmlUnit 需要花费大量时间来执行 javascript，我想知道是否有可能使 HtmlUnit 不从 url 正则表达式过滤器加载 javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:58:30.237

不完全是，您不能只禁用整个 javascript（可能您已经知道它）：

```
final WebClient webClient = new WebClient();
webClient.getOptions().setJavascriptEnable(false); 
```

但是您可以使用[ScriptPreProcessor](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/ScriptPreProcessor.html) javascript，并删除您不想要的内容：

```
webClient.setScriptPreProcessor(new ScriptPreProcessor() {

        @Override
        public String preProcess(HtmlPage htmlPage, String sourceCode, String sourceName, int lineNumber, HtmlElement htmlElement) {
            if (match...)
            return "";
        }
    }); 
```

# iphone - SKype 集成并从 ios 中的 skpeaccount 获取所有详细信息

> ID：15962993
> 
> 赞同：0
> 
> 时间：2013-04-12T04:19:17.950
> 
> 标签：iphone, ios, skype

是否可以集成 Skype 是 IOS 应用程序。我知道可以使用以下代码：-

```
- (IBAction)skypeMe:(id)sender
{
  BOOL installed = [[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"skype:"]];
  if(installed)
  {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"skype:echo123?call"]];
  }
  else
  {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://itunes.com/apps/skype/skype"]];
  }
} 
```

但是是否可以从 skpye 帐户中获取通话详细信息或联系方式或聊天记录。

或者要获取 skpye 中使用的 Skype 名称、ID 和密码，可以通过应用程序获取并存储在数据库中。

就像我们在 facebook.through facebook API.Fetching contact details 等一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:01:14.797

您可以查看[Skype 开发人员](http://dev.skype.com/desktop-api-reference)网站以获取更多帮助。

[禁止在移动设备上使用 Skype SDK 和 API](http://devforum.skype.com/t5/Developer-Corner/Integrating-in-mobile-apps/td-p/13340)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T05:09:05.330

目前没有任何可用于 Skype 的 ios 的公共 api。所以，你无法实现你的愿望，尽管你可以参考[Skype URI 教程：iOS 应用程序](http://dev.skype.com/skype-uri/skype-uri-tutorial-ios)

享受编程！

# integration - 快书在线互动

> ID：15962998
> 
> 赞同：1
> 
> 时间：2013-04-12T04:20:06.387
> 
> 标签：integration, quickbooks-online

我有一个需要与 quickbooks 在线版通信的网络应用程序。我能够连接和接收数据。问题是我得到的回复不是 xml 格式，甚至更好的是 json 格式。我怎样才能让它以其中一种格式回复？这是我的代码：

```
function request($xml, $certificate = null, $debug = false){
    $ch = curl_init(); 

    $header[] = 'Content-Type: application/x-qbxml'; 
    $header[] = 'Content-Length: ' . strlen($xml); 

    $params = array();
    $params[CURLOPT_HTTPHEADER] = $header; 
    $params[CURLOPT_POST] = true; 
    $params[CURLOPT_RETURNTRANSFER] = true; 
    $params[CURLOPT_URL] = $this->gateway; 
    $params[CURLOPT_TIMEOUT] = 30; 
    $params[CURLOPT_POSTFIELDS] = $xml; 
    $params[CURLOPT_VERBOSE] = $debug; 
    $params[CURLOPT_HEADER] = true;

    // This is only for the HOSTED security model
    if (file_exists($certificate))
    {
        $params[CURLOPT_SSL_VERIFYPEER] = false; 
        $params[CURLOPT_SSLCERT] = $certificate; 
    }

    // Some Windows servers will fail with SSL errors unless we turn this off
    $params[CURLOPT_SSL_VERIFYPEER] = false;
    $params[CURLOPT_SSL_VERIFYHOST] = 0;        

    // Diagnostic information: https://merchantaccount.quickbooks.com/j/diag/http
    // curl_setopt($ch, CURLOPT_INTERFACE, '<myipaddress>');

    $ch = curl_init();
    curl_setopt_array($ch, $params);
    $response = curl_exec($ch);

    if (curl_errno($ch)) 
    {
        $errnum = curl_errno($ch);
        $errmsg = curl_error($ch);

        _log('CURL error: ' . $errnum . ': ' . $errmsg, $debug);

        return false;
    } 

    // Close the connection 
    @curl_close($ch);

    // Remove the HTTP headers from the response
    $pos = strpos($response, "\r\n\r\n");
    $response = ltrim(substr($response, $pos));

    return $response;       
}
function item_list(){

    $xml = 
        '<?xml version="1.0"?>
        <?qbxml version="6.0"?>
        <QBXML>
            <SignonMsgsRq>
                <SignonTicketRq>
                    <ClientDateTime>' . date('Y-m-d') . 'T' . date('H:i:s') . '</ClientDateTime>
                    <SessionTicket>' . $this->session . '</SessionTicket>
                    <Language>English</Language>
                    <AppID>' . $this->application_id . '</AppID>
                    <AppVer>1</AppVer>
                </SignonTicketRq>
            </SignonMsgsRq>
            <QBXMLMsgsRq onError="stopOnError">
                <ItemQueryRq> 
                    <OwnerID>0</OwnerID>
                </ItemQueryRq>

            </QBXMLMsgsRq>
        </QBXML>';
        $response = $this->request($xml, null, true);
        echo $response;

} 
```

谢谢

这是我的 xml 请求： $xml = ' ' 。日期（'Ymd'）。'T'。日期（'H：i：s'）。' ' 。$这个->会话。' 英语 ' 。$this->application_id 。' 1 0

```
 </QBXMLMsgsRq>
</QBXML>'; 
```

这是我的回复：

2013-04-12T12:28:11 V1-115-Q03kydq32h22tnfqnd5izf:689712285 1 2013-04-10T06:02:40 2013-04-10T06:02:40 0 销售 0 0 1 销售 2 20103-04-10T21:2 :43 2013-04-10T21:20:43 0 测试产品 测试产品 0 0 1 销售

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:17:41.590

我的愚蠢错误。我正在将我的结果回显到将 xml 标签解释为 html 标签的浏览器。我用 $xml = simplexml_load_string($response); print_r($xml); 在浏览器中查看响应。