# StackOverflow 问答 15103000-15103999

# codeigniter - 使用 codeigniter 和 twig 进行缓存

> ID：15103001
> 
> 赞同：0
> 
> 时间：2013-02-27T02:13:54.250
> 
> 标签：codeigniter, caching, twig

我正在尝试缓存我的输出。我正在使用 Codeigniter 的内置功能 $this->output->cache() 但它不起作用。我的猜测是因为我使用的是树枝。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:09:14.780

我找到了答案，可能对经过这里的人有用。

```
$output = $this->twig->render('template.html'); // use render instead of display
$this->output->set_output($output); // use CI's output (autoloaded by default) manually
$this->output->cache(5); // cache for 5 minutes, doesn't matter where this line is in the function. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:39:45.177

正如您自己发现的那样，您应该`Output`通过适当的方法之一将输出映射到类，以便利用其内置的缓存功能。请注意，目前在 Github 上开发的 CI 3.0 有一些您可能喜欢的更新（例如，保留所有输出标头的 gzip 缓存文件）。

您可以使用自定义方法扩展`Loader`库`view()`，并在那里执行逻辑，而不是在每个控制器中需要 2+ 行（如果您想加载多个文件，则每次都必须调用`render()`then ）。`append_output()`

[我](https://github.com/cryode/CodeIgniter_Smarty)使用 Smarty 模板库正是这样做的。应该能够用 Twig 做类似的事情。（我也一直想把它移植过来，但没有时间。）

# c++ - 我不明白的 C++ 错误：语法缺失 ';' 在标识符之前

> ID：15103004
> 
> 赞同：4
> 
> 时间：2013-02-27T02:13:59.913
> 
> 标签：c++, class, identifier

```
class Dialogue
{
public:
    int id;
    int trigger;
    Question descendants[5]; // Max questions per dialogue
    string text;
};

class Question
{
public:
    int id;
    int descendant;
    int ancestor;
    string text;
}; 
```

当我尝试构建它时，它会说问题后代位的以下错误？：

> 错误 1 ​​错误 C2146：语法错误：缺少 ';' 在标识符“后代”之前 c:\users**\documents\visual studio 2012\projects\game\game\dialogue.h 8 1 游戏错误 2 错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持 default-int c:\users**\documents\visual studio 2012\projects\game\game\dialogue.h 8 1 Game

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T02:19:10.817

或者您可以转发声明您的课程。当它们都相互依赖时，这很方便：

```
`class Question;
class Dialogue;

class Dialogue
{
public:
    int id;
    int trigger;
    Question descendants[5]; // Max questions per dialogue
    string text;
};` 

`class Question
{
public:
    int id;
    int descendant;
    int ancestor;
    string text;
};` 
```

* * *

 `## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:15:31.550

您需要切换定义，以便`Question`编译器在`Dialogue`.

这将编译：

```
class Question
{
public:
    int id;
    int descendant;
    int ancestor;
    string text;
};

class Dialogue
{
public:
    int id;
    int trigger;
    Question descendants[5]; // Max questions per dialogue
    string text;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T02:15:48.920

类 Question 的定义应该在类 Dialogue 之后。

```
class Question
{
public:
    int id;
    int descendant;
    int ancestor;
    string text;
};

class Dialogue
{
public:
    int id;
    int trigger;
    Question descendants[5]; // Max questions per dialogue
    string text;
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T02:16:11.110

类声明的交换顺序：

```
class Question
{
public:
    int id;
    int descendant;
    int ancestor;
    string text;
};

class Dialogue
{
public:
    int id;
    int trigger;
    Question descendants[5]; // Max questions per dialogue
    string text;
}; 
````

# django - 是否可以显示 django celery 任务的进度条？

> ID：15103007
> 
> 赞同：3
> 
> 时间：2013-02-27T02:14:10.993
> 
> 标签：django, celery, django-celery, djcelery

我在 django celery 中使用数据库后端。任务信息存储在名为：`celery_taskmeta`in database 的表中。这是我的任务：

```
@celery.task
def file_transfer(password, source12, destination):
    result = subprocess.Popen(['sshpass', '-p', password, 'rsync', '-az', source12, destination], 
                                    stderr=subprocess.PIPE, stdout=subprocess.PIPE).communicate()[0]
    return result 
```

我这样称呼任务：

```
file_transfer.s(password, source12, destination) 
```

现在我想向用户展示他们在 Django 模板中的任务进度和剩余时间。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T10:54:49.710

[也许我对Django-Celery 进度条](https://stackoverflow.com/questions/7380373/django-celery-progress-bar)的回答会有所帮助（还将代码发布到 DjangoSnippets，这就是我为那几行[http://djangosnippets.org/snippets/2898/](http://djangosnippets.org/snippets/2898/)感到自豪）

# c++ - V8 的 objects.h 中的“enum InstanceType”如何排序？

> ID：15103013
> 
> 赞同：0
> 
> 时间：2013-02-27T02:15:08.733
> 
> 标签：c++, enums, v8

我对 V8 源代码中的某些内容感到困惑。

在**objects.h**中，有 enum InstanceType 描述了实例的类型。并且一部分是为JS类型定义的，比如日期和数组。

```
enum InstanceType {
  ...

  // All the following types are subtypes of JSReceiver, which corresponds to
  // objects in the JS sense. The first and the last type in this range are
  // the two forms of function. This organization enables using the same
  // compares for checking the JS_RECEIVER/SPEC_OBJECT range and the
  // NONCALLABLE_JS_OBJECT range.
  JS_FUNCTION_PROXY_TYPE,  // FIRST_JS_RECEIVER_TYPE, FIRST_JS_PROXY_TYPE
  JS_PROXY_TYPE,  // LAST_JS_PROXY_TYPE

  JS_VALUE_TYPE,  // FIRST_JS_OBJECT_TYPE
  JS_DATE_TYPE,
  JS_OBJECT_TYPE,
  JS_CONTEXT_EXTENSION_OBJECT_TYPE,
  JS_MODULE_TYPE,
  JS_GLOBAL_OBJECT_TYPE,
  JS_BUILTINS_OBJECT_TYPE,
  JS_GLOBAL_PROXY_TYPE,
  JS_ARRAY_TYPE,
  JS_SET_TYPE,
  JS_MAP_TYPE,
  JS_WEAK_MAP_TYPE,

  JS_REGEXP_TYPE,

  JS_FUNCTION_TYPE,  // LAST_JS_OBJECT_TYPE, LAST_JS_RECEIVER_TYPE

  ...
}; 
```

然后我看到了 JS_OBJECT_TYPE 的静态检查。这里 Internals::kJSObjectType 在 v8.h 中定义为 0xaa。

```
STATIC_CHECK(JS_OBJECT_TYPE == Internals::kJSObjectType); 
```

那么，InstanceType 中的 TYPE 是如何排序的呢？为什么 JS_DATE_TYPE 在 JS_OBJECT_TYPE 之前， JS_ARRAY_TYPE 在之后？

如果是任意排序，V8为什么要检查JS_OBJECT_TYPE的个数呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:14:42.747

主要原因是当您在`JS_VALUE_TYPE`or上使用索引运算符时正确落入运行时`JS_OBJECT_TYPE`，生成的代码无法正确处理它。见[`GenerateKeyedLoadReceiverCheck`](https://code.google.com/p/v8/source/browse/trunk/src/ia32/ic-ia32.cc?r=13473#247)。

签入`v8.h`验证从 V8 手动导出并通过此公共 API 文件中的内联函数使用的常量与内部常量匹配。`v8.h`不能依赖于内部，`objects.h`因此它具有重复的这些常量。如果没有检查，如果有人更改`objects.h`但忘记更新，这些内联函数将开始以奇怪的方式中断`v8.h`。

# cs-cart - 如何在 cscart 的头部添加元标记？

> ID：15103017
> 
> 赞同：0
> 
> 时间：2013-02-27T02:15:26.007
> 
> 标签：cs-cart

在`..skins/basic/customer/common_templates/image.tpl`我添加代码：

```
{hook name="index:meta"}
<meta property="og:image" content="{$config.current_location}{$config.full_host_name}{$icon_image_path|default:$config.no_image_path}" />
{/hook} 
```

=> 结果无法在头部添加元标记，它是在正文标记上添加 => 如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:33:47.213

检查皮肤中的 index.tpl 文件，确保 meta.tpl 包含在头部而不是身体内。那就是钩子插入的地方，所以只要它在头部内部，那么它就没有理由出现在外面。

# ruby-on-rails - omn iauth openid 无效凭据

> ID：15103019
> 
> 赞同：1
> 
> 时间：2013-02-27T02:15:33.373
> 
> 标签：ruby-on-rails, openid, omniauth

我正在使用omniauth 并使用open_id 策略登录谷歌和雅虎。这工作正常，直到我在我的网站上启用 SSL。有几个问题。首先，正在生成的 URL 仍然指向 http 而不是 https。我使用来自其他帖子的猴子补丁修复了这个问题（[Omniauth 和 open_id 在以 SSL 模式在 nginx 后面运行时损坏了 Google](https://stackoverflow.com/questions/10032249/omniauth-and-open-id-with-google-broken-when-running-behind-nginx-in-ssl-mode)，[OpenID 用于 Apache 后面的 rails 应用程序](https://stackoverflow.com/questions/4051577/openid-for-rails-app-behind-apache)）

现在看起来 URL 没问题，但现在我总是遇到无效凭据失败。我正在使用 nginx 和 unicorn 并在 EC2 上托管，如果有任何相关的话。我在我的独角兽日志中看到了这一点：

```
(google) Request phase initiated.
WARNING: making https request to https://www.google.com/accounts/o8/id without verifying server certificate; no CA path was specified.
Generated checkid_setup request to https://www.google.com/accounts/o8/ud with assocication ...
(google) Callback phase initiated.
(google) Authentication failure! invalid_credentials encountered. 
```

*注意我删除了上面的关联，因为我不确定那是不是一些私钥或其他东西。

此外，我看到谷歌发布到我的回调“/auth/google/callback”。

最后，关于在不验证服务器证书的情况下发出请求的警告，我在另一篇文章中看到我应该添加以下内容：

```
require "openid/fetchers"
OpenID.fetcher.ca_file = "/etc/ssl/certs/ca-certificates.crt" 
```

我这样做了，消息消失了，但并没有解决我的问题。我应该将其指向我的 ssl 证书吗？

只是对正在发生的事情感到困惑，并且没有找到好的日志输出来识别问题......

# java - 如何从此代码中删除 eclipse 中的原始类型警告？

> ID：15103020
> 
> 赞同：2
> 
> 时间：2013-02-27T02:15:33.690
> 
> 标签：java, java-6

我目前压制了 eclipse 关于在这个片段中使用原始类型的唠叨

```
@SuppressWarnings({ "rawtypes" })
List doSomething(Integer arg1, ...) {
    ....
} 
```

我实际上正在返回`List`从旧版本的 Hibernate 生成的原始类型。有没有办法改变这个API返回：

```
List<Object[]> 
```

我只是将列表投射到上面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:22:25.590

您可以将方法签名更改为：

```
List<Object> doSomething(Integer arg1, ...) {
    ....
} 
```

对任何呼叫客户都***没有负面影响。***当然，这只是消除了`@SuppressWarnings`在该方法本身上使用注释的需要。对于您必须在使用`List`该类的原始版本的代码的其他部分中获得的所有警告，它没有任何作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:33:57.560

您通常可以将 raw 替换`List`为`List<?>`.

如果您明确知道这些项目是`Object[]`，您可以简单地施放

```
List<Object[]> doSomething(Integer arg1, ...) {
    List rawList = ...
    @SuppressWarnings("unchecked")
    List<Object[]> cookedList = (List<Object[]>)rawList;
    return cookedList;
} 
```

# android - 用于 MIPS 和 x86 架构的 android mupdf

> ID：15103022
> 
> 赞同：4
> 
> 时间：2013-02-27T02:15:41.807
> 
> 标签：android, mupdf

我目前`MuPDF`在我的android应用程序中使用，当我从源代码（基于ReadMe.txt）构建它时，它只为and而不是and生成`.so`文件，当我在arm arch设备（Samsung Galaxy Tab 7）上运行应用程序时，它看起来不错. 但不是在拱门。我的问题是如何生成和共享目标文件？如果有其他解决方案，我将不胜感激...`armeabi``armeabi-v7a``x86``MIPS``mips``x86``MIPS`

PS：我正在使用`android ndk r8d`，我试图改变`android-ndk-r6b`但我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T10:49:43.837

如果您在 mupdf 源代码中查看 android/jni/Application.mk，您将看到一行：

```
APP_ABI = armeabi armeabi-v7a 
```

你可以这样做：

```
APP_ABI = armeabi armeabi-v7a x86 mips 
```

甚至：

```
APP_ABI = all 
```

启用其他架构。

这将导致当前的问题，因为 android/jni/Core.mk 和 android/jni/Core2.mk 文件定义了 -DARCH_ARM 和 -DARCH_THUMB（在编写它们时，Android 仅支持 ARM 处理器）。这需要预处理器的一些魔力：

```
ifeq ($(TARGET_ARCH),arm)
LOCAL_CFLAGS += -DARCH_ARM -DARCH_THUMB -DARCH_ARM_CAN_LOAD_UNALIGNED
ifdef NDK_PROFILER
LOCAL_CFLAGS += -pg -DNDK_PROFILER -O2
endif
endif
LOCAL_CFLAGS += -DAA_BITS=8 
```

我会为这些修复 - 在接下来的几天里观看我们的 git repo。编辑：修复现已提交。

# r - 如何按十分之一列出数字列表？

> ID：15103023
> 
> 赞同：2
> 
> 时间：2013-02-27T02:15:47.280
> 
> 标签：r

我知道 1:10 会给我一个从 1 到 10 的所有整数的向量，但是我怎样才能让从 1 到 2 的数字上升十分之一（即 1.0、1.1、1.2、...、2.0）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T02:17:09.257

尝试`seq`

```
> seq(1, 2, by = 0.1)
 [1] 1.0 1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 2.0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T05:27:54.950

只是本着不止一种做事方式的精神，另一种选择是：

```
> (10:20)/10
 [1] 1.0 1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 2.0 
```

# affinetransform - 在Java中给定图像和旋转图像导出旋转/变换矩阵？

> ID：15103025
> 
> 赞同：1
> 
> 时间：2013-02-27T02:16:03.490
> 
> 标签：affinetransform

需要一些建议并指出我正确的方向。

我的对象检测系统读取此图像（见下文）并返回一些检测结果的边界框坐标（在本例中为锤子）

[http://i1116.photobucket.com/albums/k572/Ruihong_Zhou/z3IJx-1.png](http://i1116.photobucket.com/albums/k572/Ruihong_Zhou/z3IJx-1.png)

但是，我希望通过向系统提供原始图像的旋转图像来检查同一图像的检测结果的准确性，并允许它检测并返回检测结果的坐标（如果有）。

例如：

[http://i1116.photobucket.com/albums/k572/Ruihong_Zhou/myJQA-1.jpg](http://i1116.photobucket.com/albums/k572/Ruihong_Zhou/myJQA-1.jpg)

假设找到了黄点的坐标（在上图中），但它是相对于旋转的参考系而言的。我如何实际变换/旋转这些坐标并找出它们相对于原始参考框架在原始图像中的实际位置。

有人向我指出我应该使用仿射变换，但我不知道如何去做，因为老实说这是我第一次听说仿射变换，我现在仍在努力强行学习它.

进一步的研究表明，我需要原始图像中的原始坐标集和旋转图像中的相同坐标集来得出变换矩阵，但我只有旋转图像中检测到的坐标集。

# cordova - 无法在设备上触发 db.transaction

> ID：15103027
> 
> 赞同：1
> 
> 时间：2013-02-27T02:16:08.253
> 
> 标签：cordova

我尝试在我的设备上运行此示例代码，它只能返回“设备就绪！”。它似乎没有运行 db.transaction，因为它没有提醒其余的 msg。但是当我尝试在 Web 浏览器上运行它时，它能够在控制台日志上显示所有警报和数据库结果。请帮忙。我真的不知道怎么了。提前致谢！

```
// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady(), false);

// Populate the database 
//
function populateDB(tx) {
    alert("Populate DB!");
    tx.executeSql('DROP TABLE IF EXISTS DEMO');
    tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
    tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
    tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
}

// Query the database
//
function queryDB(tx) {
    alert("Database Query!");
    tx.executeSql('SELECT * FROM DEMO', [], querySuccess, errorCB);
}

// Query the success callback
//
function querySuccess(tx, results) {
    alert("Success!");
    var len = results.rows.length;
    console.log("DEMO table: " + len + " rows found.");

    for (var i=0; i<len; i++){
       console.log("Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).data);

    }

    }

// Transaction error callback
//
function errorCB(err) {
    alert("Error Occured!");
    console.log("Error processing SQL: "+err.code);
}

// Transaction success callback
//
function successCB() {
    alert("Open Database!");
    db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
    db.transaction(queryDB, errorCB);
}

// Cordova is ready
//
function onDeviceReady() {
    alert("Device Ready!");
    var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
    db.transaction(populateDB, errorCB, successCB);
} 
```

# java - 处理代码不起作用（线程、draw()、noLoop() 和 loop()）

> ID：15103033
> 
> 赞同：0
> 
> 时间：2013-02-27T02:16:26.190
> 
> 标签：java, processing

下面的代码应该使形状闪烁两次，我从根目录检查了三次方法，我 99% 确定这些方法是正确的（如果需要，我会发布该代码）。使当前 root 状态在屏幕上暂停几秒钟的最佳方法是什么？

```
 noLoop();      
root.setVal(newVal);
root.highlight(0,255,0);
root.setopacity(200);
redraw();
try {Thread.sleep((long)1500);} 
catch (InterruptedException ex) {println("Error!");}
root.setopacity(0);
redraw();
try {Thread.sleep((long)1500);} 
catch (InterruptedException ex) {println("Error!");}
root.setopacity(200);
root.clearHL();//just to make sure I repeated these methods
root.highlight(0,255,0);
redraw();
try {Thread.sleep((long)1500);} 
catch (InterruptedException ex) {println("Error!");}
root.clearHL();
redraw();
loop();
return root; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:19:44.423

您只能有一个线程进行绘图，如果您将该线程与`sleep`etc 卡住，它将“挂起”，直到它有机会退出您的代码并返回到 JRE 中呈现代码。有很多关于它的教程，谷歌是你的朋友！

例如：[http ://www.java-tips.org/java-se-tips/java.awt/how-to-create-animation-paint-and-thread.html](http://www.java-tips.org/java-se-tips/java.awt/how-to-create-animation-paint-and-thread.html)

把它想象成你在一个页面上绘图，并且不时地从你的笔记本中拉出页面来显示。不管你花 10 秒钟画一个圆圈，然后把它擦掉。重要的是页面上显示的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T05:14:46.337

我不确定我是否遇到了您的问题，并且代码不可运行，但是...也许您需要一种更简单的方法？自己做的小计时器？问题是 draw() 在 draw() 结束渲染帧之前执行所有指令。因此，如果您停止 draw()，它将暂停，不进行任何绘制，然后继续进行所有更改并在最后绘制。我的意思是，如果我这样做：

```
draw(){
fill(0);
ellipse(10,10,10,10);
delay(1000);
fill(255,255,0);
ellipse(10,10,10,10);
} 
```

我永远不会看到黑色椭圆，因为它在渲染发生之前被黄色覆盖......在绘制结束时。但是程序会每帧暂停一秒钟......

所以也许一个简单的计时器可以为你做。这是一个计时器的一般示例，您可以尝试适应您的需求：

```
PFont font;
String time = "000";
int initialTime;
int interval = 1000;
int times;
color c = color(200);

void setup() {
  size(300, 300);
  font = createFont("Arial", 30);
  background(255);
  fill(0);
  smooth();

  //set the timer as setup is done
  initialTime = millis();
}

void draw()
{
  background(255);

  //compare elapsed time if bigger than interval...
  if (millis() - initialTime > interval)
  {
    //display the time
    time = nf(int(millis()/1000), 3);

    // reset timer
    initialTime = millis();

    //increment times
    times++;
  }

  // an arbitrary ammount
  if (times == 3) {

    //do somethng different
    c = color(random(255), random(255), random(255));

    // reset times
    times = 0;
  }

  //draw
  fill(0);
  text(time, width/2, height/2);
  fill(c);
  ellipse(75, 75, 30, 30);
} 
```

# php - 具体5显示电子商务产品属性

> ID：15103034
> 
> 赞同：0
> 
> 时间：2013-02-27T02:16:40.173
> 
> 标签：php, content-management-system, e-commerce, concrete5

我想显示电子商务插件的自定义属性。我知道如何显示产品名称、数量、价格，但不知道这些属性是如何工作的。我想显示产品的特定属性。

这可以显示属性吗？如果是这样，谁能给我的语法？

```
<?php   if ($displayNameP) { ?>
  <p><?php echo$link_before.$product->getProductName().$link_after?></p>
<?php   } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:45:22.303

如果它类似于 coreconcrete5 对象（页面、用户、文件），那么你会这样做：

```
$product->getAttribute('attribute_handle') 
```

# performance - Eclipse 中的 Android 开发工具包

> ID：15103037
> 
> 赞同：1
> 
> 时间：2013-02-26T17:12:32.523
> 
> 标签：performance, eclipse, android, sdk

所以我对 Eclipse 和 Android Dev Kit 有一些问题。

首先，Eclipse 的速度慢得令人难以置信，有时它会变得毫无用处。（它甚至滞后于切换标签！！！。）

我尝试修改 .ini 文件并尝试将其分配到 2gb-3gb 内存。还是没有起色。

有没有办法让它达到 Visual Studio 的效率？当我在调试并且我想在手表的一个类中查看一个值时，它滞后于显示一个简单的 2 位整数！说真的，W*F 同意了吗？VS 即时显示集合中的 100 个对象，没有滞后。

调试也非常缓慢，真的很烦人！从一条线走到另一条线大约需要 2 秒！

我的笔记本电脑有这个规格：

```
Core i7-2670QM 2.2GHz (turbo up to 3.1GHz)
8GB DDR3 RAM
500GB HDD
GeForce GT630M 1GB (Dedicated) 
```

这台笔记本电脑可以毫无问题地处理一些要求最苛刻的软件和游戏，并且 Eclipse 滞后！

另一个问题，当我启动 Android 模拟器时，我的声音下降了大约一半（对于所有内容）。我使用内部声卡（集成）。知道如何修复它吗？

非常感谢

丹尼尔·沃丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:33:18.917

在删除与 Eclipse 相关的所有内容并安装 x86 版本而不是 x64 后，我解决了这个问题，现在性能好多了！

这一定是 IDE 中的设计错误。

# python - 在python中换行：打破参数字符串

> ID：15103042
> 
> 赞同：5
> 
> 时间：2013-02-27T02:17:30.993
> 
> 标签：python, syntax, word-wrap

我有一个脚本，其中一个很长的类型参数`str`被传递给一个函数：

```
parser = argparse.ArgumentParser(description='Auto-segments a text based on the TANGO algorithm (Rie Kubota Ando and Lillian Lee, "Mostly-Unsupervised Statistical Segmentation of Japanese Kanji Sequences" (Natural Language Engineering, 9(2):127-149, 2003)).') 
```

我想将此脚本中的行长限制为 79 个字符，这意味着在相关字符串的中间换行。简单地在 79 处换行会产生类似这样的结果，这在语法上是错误的：

```
parser = argparse.ArgumentParser(description="Auto-segments a text based on 
    the TANGO algorithm (Rie Kubota Ando and Lillian Lee, 'Mostly-Unsupervis
    ed Statistical Segmentation of Japanese Kanji Sequences' (Natural Langua
    ge Engineering, 9(2):127-149, 2003)).") 
```

[PEP 8](http://www.python.org/dev/peps/pep-0008/#maximum-line-length)有在各种非参数字符串内部位置换行的指南，但是有没有办法在参数字符串中间换行？

（相关但不太重要的问题：在（python）脚本中打破自然语言文本中间词的明智/传统方法是什么？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T02:22:00.087

文字字符串可以彼此相邻出现，并将编译为单个字符串。因此：

```
parser = argparse.ArgumentParser(description="Auto-segments a text based on "
    "the TANGO algorithm (Rie Kubota Ando and Lillian Lee, 'Mostly-Unsupervised "
    "Statistical Segmentation of Japanese Kanji Sequences' (Natural Language "
    "Engineering, 9(2):127-149, 2003)).") 
```

根据需要调整以适合 80。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:21:22.160

```
>>>longarg = "ABCDEF\
GHIJKLMNOPQRSTUVW\
XYZ"

>>>print longarg
ABCDEFGHIJKLMNOPQRSTUVWXYZ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T02:35:04.823

`argparse`无论如何都会重新格式化描述字符串，因此如果您使用带有额外空格的多行字符串，它不会改变结果：

```
import argparse

parser = argparse.ArgumentParser(description='''Auto-segments a text based on the
    TANGO algorithm (Rie Kubota Ando and Lillian Lee, "Mostly-Unsupervised
    Statistical Segmentation of Japanese Kanji Sequences" (Natural Language
    Engineering, 9(2):127-149, 2003)).''')

args = parser.parse_args() 
```

* * *

```
% test.py -h

usage: test.py [-h]

Auto-segments a text based on the TANGO algorithm (Rie Kubota Ando and Lillian Lee,
"Mostly-Unsupervised Statistical Segmentation of Japanese Kanji Sequences" (Natural
Language Engineering, 9(2):127-149, 2003)).

optional arguments:
  -h, --help  show this help message and exit 
```

# jquery - toggleClass 在 ajax 情况下无法正常工作

> ID：15103043
> 
> 赞同：4
> 
> 时间：2013-02-27T02:17:32.957
> 
> 标签：jquery, css, ajax

下面是我的简单代码，其中想要像 Gmail 样式的代码添加书签。

> $(this).toggleClass('favorited');

上述声明不起作用。得到 ajax 响应后，star 不会变成黄色。但是如果你把上面的语句放在 ajax 之外会阻止它工作。无法理解为什么会这样。

```
<html>
<head>
<style>
.star {
    background-color: transparent;
    background-image: url('http://www.technicalkeeda.com/img/images/star-off.png');
    background-repeat:no-repeat;
    display: block;  
    height:16px;
    width:16px;
    float:left;
}   

.star.favorited {
     text-indent: -5000px;
    background-color: transparent;
    background-image: url('http://www.technicalkeeda.com/img/images/star-on.png');
    background-repeat:no-repeat;   
    height:16px;
    width:16px;
    float:left;
}

span{
color: #2864B4;
}
</style>

<script type="text/javascript" src="http://www.technicalkeeda.com/js/javascripts/plugin/jquery.js"></script>
<script>
    $(document).ready(function(){
         $('.star').click(function() {
                var id = $(this).parents('div').attr('id');             

                $.ajax({
                        type: "post",
                        url: "http://www.technicalkeeda.com/demos/bookmark",
                        cache: false,               
                        data:{'bookmarkId': id},
                        success: function(response){
                            alert('response' +response);
                             if(response=='true'){                                  
                                 $(this).toggleClass('favorited');                                               
                            }else{
                                alert('Sorry Unable bookmark..');
                            }   

                        },
                        error: function(){                      
                            alert('Error while request..');
                        }
                     });
          });
    });
</script>
</head>
<body>
<div id="1000"><a href="javascript:void(0);" class="star" ></a><span>Php CodeIgniter Server Side Form Validation Example</span></div>
<div id="2000"><a href="javascript:void(0);" class="star"></a><span>Live Search Using Jquery Ajax, Php Codeigniter and Mysql</span></div>
<div id="3000"><a href="javascript:void(0);" class="star"></a><span>Voting system Using jQuery Ajax and Php Codeigniter Framework</span></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T02:20:12.850

`this`ajax 回调中的不是`.star`元素，它是一个jqXHR 对象。做这个：

```
$(".star").click(function () {
    var $this = $(this);
    /* snip */
    if (response == 'true') {
        $this.toggleClass('favorited');
    /* snip */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T02:20:26.337

$(this) 不再在您的回复范围内。你可以像这样引用它......

```
$('.star').click(function() {
    var elem = $(this); 
```

然后在您的响应电话中

```
elem.toggleClass('favorited'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T02:32:10.620

要保持（几乎所有内容）相同，请设置 ajax 调用的上下文：

$.ajax({ context: this, success: function () {...} });

另一方面，关于如何设置点击事件，我刚刚完成了与其他人类似的推荐...

```
$('document.body').on('click', '.star', function () {....}); 
```

将为您提供相同的功能，提高性能并自动容纳添加或删除到带有星类的文档中的任何项目。

# linux - Hadoop：将 cgroups 用于 TaskTracker 任务

> ID：15103046
> 
> 赞同：2
> 
> 时间：2013-02-27T02:17:48.207
> 
> 标签：linux, hadoop, linux-kernel, cgroups

`cgroups`是否可以通过将 TaskTracker 生成的每个进程分配给特定 cgroup 的方式来配置Hadoop？

我想使用`cgroups`. 可以将 cgroup 分配给 TaskTracker，但如果作业造成严重破坏，TaskTracker 也可能会被 杀死，`oom-killer`因为它们在同一个组中。

假设我的机器上有 8GB 内存。我想为 DataNode 和系统实用程序保留 1.5GB，并让 Hadoop TaskTracker 使用 6.5GB 内存。现在我使用流式 API 开始一个作业，生成 4 个映射器和 2 个减速器（理论上每个都可以使用 1GB RAM），它们占用的内存超出了允许的范围。现在`cgroup`将达到内存限制，并且 oom-killer 开始终止作业。我宁愿为每个 Map 和 Reduce 任务使用一个 cgroup，例如一个`cgroup`限制为 1GB 内存的 cgroup。

这是一个真实的或更理论上的问题吗？真的会`oom-killer`杀死 Hadoop TaskTracker 还是会先杀死分叉的进程？如果后者在大多数情况下是正确的，我的想法可能会奏效。如果不是 - 一个糟糕的工作仍然会杀死所有集群机器上的 TaskTracker 并需要手动重新启动。

使用 cgroups 时还有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:21:51.570

您是否查看过允许为 tasktracker 的子进程（任务）设置和最大化堆分配的 hadoop 参数，并且不要忘记查看 jvm 的重用可能性。

有用的链接：

[http://allthingshadoop.com/2010/04/28/map-reduce-tips-tricks-your-first-real-cluster/](http://allthingshadoop.com/2010/04/28/map-reduce-tips-tricks-your-first-real-cluster/)

[http://developer.yahoo.com/hadoop/tutorial/module7.html](http://developer.yahoo.com/hadoop/tutorial/module7.html)

[运行 Hadoop 时如何避免 OutOfMemoryException？](https://stackoverflow.com/questions/3383402/how-to-avoid-outofmemoryexception-when-running-hadoop)

[http://www.quora.com/Why-does-Hadoop-use-one-JVM-per-task-block](http://www.quora.com/Why-does-Hadoop-use-one-JVM-per-task-block)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:36:10.097

如果您有很多学生和教职员工访问 Hadoop 集群以提交作业，您可能可以查看 Hadoop 中的作业调度。

以下是您可能感兴趣的一些类型的要点 -

**公平调度器：** 公平共享调度器背后的核心思想是将资源分配给作业，这样随着时间的推移，每个作业平均获得可用资源的平等份额。为了确保公平，每个用户都被分配到一个池中。通过这种方式，如果一个用户提交了许多作业，他或她可以获得与所有其他用户相同的集群资源份额（与他们提交的工作无关）。

**容量调度器：** 在容量调度中，创建了几个队列而不是池，每个队列都有可配置数量的 map 和 reduce 槽。每个队列还分配有保证容量（其中集群的总容量是每个队列容量的总和）。容量调度是为大型集群定义的，这些集群可能有多个独立的消费者和目标应用程序。

由于时间不够，这是我无耻复制上述内容的链接。 [http://www.ibm.com/developerworks/library/os-hadoop-scheduling/index.html](http://www.ibm.com/developerworks/library/os-hadoop-scheduling/index.html)

要配置 Hadoop，请使用此链接：[http ://hadoop.apache.org/docs/r1.1.1/fair_scheduler.html#Installation](http://hadoop.apache.org/docs/r1.1.1/fair_scheduler.html#Installation)

# excel - 从 Excel VBA 中的 URL 计算网页上的数据

> ID：15103048
> 
> 赞同：1
> 
> 时间：2013-02-27T02:18:01.687
> 
> 标签：excel, vba, webpage, filepath

是否可以从 excel 中的超链接读取网页并直接计算网页的可读性分数、与号和感叹号，而无需通过更改此 VBA 代码将数据查询回 excel？也有可能来自文件路径？这一切都在一个电子表格中。

```
Option Compare Text

Sub Display_Stylometric_Scores()
    Dim Words As String
    Dim Characters As String
    Dim Paragraphs As String
    Dim Sentences As String
    Dim Sentences_per_paragraph As String
    Dim Words_per_sentence As String
    Dim Characters_per_word As String
    Dim Ratio_of_passive_sentences As String
    Dim Flesch_Reading_Ease_score As String
    Dim Flesch_Kincaid_Grade_Level_score As String
    Dim Coleman_Liau_Readability_Score As String
    Dim Ampersands As Long
    Dim Exclamations As Long
    Dim row As Integer
    Dim column As Integer
    Dim ActiveDocument As Object
    Dim RS As Object
    Dim txt As String

    row = 3

    Set ActiveDocument = CreateObject("Word.Document")

    Do While Worksheets("Sample_Output_2").Cells(row, 1) <> ""

        txt = Worksheets("Sample_Output_2").Cells(row, 2).Value
        ActiveDocument.Content = txt

        Set RS = ActiveDocument.Content.ReadabilityStatistics

        Words = RS(1).Value
        Characters = RS(2).Value
        Paragraphs = RS(3).Value
        Sentences = RS(4).Value
        Sentences_per_paragraph = RS(5).Value
        Words_per_sentence = RS(6).Value
        Characters_per_word = RS(7).Value
        Ratio_of_passive_sentences = RS(8).Value
        Flesch_Reading_Ease_score = RS(9).Value
        Flesch_Kincaid_Grade_Level_score = RS(10).Value
        Ampersands = CountChar(txt, "&")
        Exclamations = CountChar(txt, "!")

        Worksheets("Sample_Output_2").Cells(row, 4).Resize(1, 12).Value = 
            Array(Words, Characters, Paragraphs, Sentences, Sentences_per_paragraph, _               
                Words_per_sentence, Characters_per_word, Ratio_of_passive_sentences, _
                Flesch_Reading_Ease_score, Flesch_Kincaid_Grade_Level_score, _
                Ampersands, Exclamations)

        row = row + 1
    Loop

End Sub

Function CountChar(txt As String, char As String) As Long
    CountChar = Len(txt) - Len(Replace(txt, char, ""))
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:25:47.773

是的，您可以使用 MXSML 发出 http 请求。这是一个示例和对现有代码的一些重构

```
Sub Main()

    Dim vaWrite As Variant
    Dim hDoc As MSHTML.HTMLDocument
    Dim xHttp As MSXML2.XMLHTTP

    'Set a reference to MSXML2
    'Open a webpage using GET
    Set xHttp = New MSXML2.XMLHTTP
    xHttp.Open "GET", "http://stackoverflow.com/questions/15103048/count-data-on-webpage-from-url-in-excel-vba"
    xHttp.send

    'Wait for the web page to finish loading
    Do Until xHttp.readyState = 4
        DoEvents
    Loop

    'If the web page rendered properly
    If xHttp.Status = 200 Then
        'Create a new HTMLdocument
        Set hDoc = New MSHTML.HTMLDocument
        'Put the GET response into the doc's body
        hDoc.body.innerHTML = xHttp.responseText

        'Get an array back containing the readability scores
        vaWrite = Display_Stylometric_Scores(hDoc.body.innerText)

        'Write that array to a worksheet
        Sheet1.Range("A2").Resize(UBound(vaWrite, 1), UBound(vaWrite, 2)).Value = vaWrite
    End If

End Sub

Function Display_Stylometric_Scores(ByRef sText As String) As Variant

    Dim aReadStats(1 To 1, 1 To 12) As Double
    Dim wdDoc As Object
    Dim wdRs As Object
    Dim i As Long
    Dim vaSpecial As Variant

    Const lMAXIDX As Long = 10

    vaSpecial = Array("&", "!")

    Set wdDoc = CreateObject("Word.Document")
    wdDoc.Content = sText

    Set wdRs = wdDoc.Content.ReadabilityStatistics

    For i = 1 To lMAXIDX
        aReadStats(1, i) = wdRs(i).Value
    Next i

    For i = LBound(vaSpecial) To UBound(vaSpecial)
        aReadStats(1, lMAXIDX + 1 + i) = CountChar(sText, vaSpecial(i))
    Next i

    Display_Stylometric_Scores = aReadStats

End Function

Function CountChar(ByRef sText As String, ByVal sChar As String) As Long
    CountChar = Len(sText) - Len(Replace(sText, sChar, vbNullString))
End Function 
```

# google-cloud-datastore - 与旧数据存储属性相比，NDB JsonProperty 配额影响？

> ID：15103052
> 
> 赞同：2
> 
> 时间：2013-02-27T02:18:36.507
> 
> 标签：google-cloud-datastore, app-engine-ndb

我似乎记得旧的数据存储属性每个存储有 2 个**数据存储写入操作**(DWO)，可能还有更多，具体取决于它们的索引方式。

在旧数据存储中，我经常将不需要索引的所有内容存储在 JSON 字符串中，并将其存储为 TextProperty 以保存多次写入。

习惯于直接从数据存储中以 JSON 格式保存和处理所有内容后，在切换到 NDB 以获取新应用程序时，我自然而然地使用了 NDB JsonProperty。

像往常一样，当我第一次检查我的配额限制（典型的免费配额限制用户体验？）时，我对优化变得偏执，并注意到所有数据存储写入（完全由只有 JsonProperties 的模型组成）正在加速很多 DWO 配额。

我立即想知道：GAE DataStore 是否根据 JsonProperty 的结构进行多次写入？或者它只是将整个属性 blob 存储到数据存储中，就像“blob”存储所需的一样少的 DWO？

我认为是后者，并记得在文档中这样读过，但是大量的配额消耗（典型的免费配额限制用户偏执狂？），让我想知道使用 JsonProperty 是否不如使用旧数据存储和保存 JSON 高效作为 TextProperty 的字符串——它们肯定是非结构化的 blob。

如果可以彻底清除这将是一件好事，这样我就可以回到*只关注应用程序的“appengine 承诺”。*:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T03:47:57.920

数据存储区与运行时无关，并且不知道有诸如 JSON 或 JSON 之类的东西`python`，`ndb`因此它无法根据您的数据进行不同的索引/写入。在[实现](https://code.google.com/p/appengine-ndb-experiment/source/browse/ndb/model.py?r=30c578bfe60c63d858aefaeb8e48a63e64ee872e#1680)中，`JsonProperty`是一个`BlobProperty`并且仅用于`json`序列化和反序列化数据：

```
class JsonProperty(BlobProperty):
  def __init__(self, name=None, compressed=False, json_type=None, **kwds): 
```

A`BlobProperty` [可以是](https://code.google.com/p/appengine-ndb-experiment/source/browse/ndb/model.py?r=30c578bfe60c63d858aefaeb8e48a63e64ee872e#1500) `indexed`或不是，也可以是或`compressed`不是：

```
class BlobProperty(Property):
  _indexed = False
  _compressed = False
  def __init__(self, name=None, compressed=False, **kwds): 
```

看来您可能正在将`compressed`was`True`与默认的`False`. 尝试将其设置为`True`并发布一些原始数字以进行比较（甚至是案例中的一些数字`db`以了解情况）。

# 更新：

我不确定我对此是否足够清楚，在 Guido 的评论之后，很明显我不是。**为您的 blob 属性写入的数据存储将与为您的`ndb`blob 属性写入的数据存储完全相同`db`。**这些数字根据实体是否存在以及属性是否被索引而变化。我的评论`compressed`是为了解决您可能感到困惑的任何其他性能/带宽/大小问题。

如果您查看[计费页面](https://developers.google.com/appengine/docs/billing)，则会发现从高级操作到低级操作的映射。与您所询问的内容相关，我们有：

*   **新实体放置（每个实体，无论实体大小）**：2 次写入 + 每个索引属性值 2 次写入 + 每个复合索引值 1 次写入
*   **现有实体放置（每个实体）**：1 次写入 + 每个修改的索引属性值 4 次写入 + 每个修改的复合索引值 2 次写入

# c++ - 这个函数是原子线程安全的吗

> ID：15103053
> 
> 赞同：6
> 
> 时间：2013-02-27T02:18:37.077
> 
> 标签：c++, c++11, atomic

我正在尝试学习如何使用原子:)

```
class foo {
  static std::atomic<uint32_t> count_;
  uint32 increase_and_get() {
    uint32 t = count_++;
    return t;
  }
} 
```

函数是`increase_and_get()`线程安全的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T02:21:00.407

是的，它是安全的：增量是原子的，并且本地`t`不能被并发线程更改。您可以进一步简化代码以完全消除临时变量：

```
uint32 increase_and_get() {
    return count_++;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T02:22:37.870

是的，这将是线程安全的。当然，假设实现中没有错误`std::atomic`- 但通常并不难做到正确。

这正是我们`std::atomic`应该做的。

# php - PHP DOMDocument“从空值创建默认对象”

> ID：15103055
> 
> 赞同：0
> 
> 时间：2013-02-27T02:18:59.837
> 
> 标签：php, object, default, domdocument

```
$dom->getElementsByTagName($key)->item(0)->nodeValue = (string) $value; 
```

我有这条线会引发此错误。我与 DOMDocument 合作多年，以前从未经历过。实际上，我之前正在测试 $dom 只是为了确保一切正常：

```
if (gettype($dom) === "object") {
    if ($dom instanceof DOMDocument) { 
```

# findbugs - findbugs 中优先级/置信度的实际含义是什么？

> ID：15103063
> 
> 赞同：8
> 
> 时间：2013-02-27T02:20:10.007
> 
> 标签：findbugs

当我使用 fingbugs-eclipse 插件或 findbugs-ant 插件时，需要设置一个置信度选项。

![在此处输入图像描述](../Images/7aa9f4a0f34a2a3d69f6e302e8a73837.png)

但根据 findbugs 文档，错误的等级为 1-20，并分为最可怕（等级 1-4）、可怕（等级 5-9）、令人不安（等级 10-14）和关注（等级 15）的类别-20)。那么 priority/confidence 的实际含义是什么？和Bug Rank有关系吗？如果有，怎么理解？不是，为什么 findbug 为每个 bug 定义一个置信度？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-27T16:14:05.757

规则`confidence`衡量它标记了一个真正的错误的可能性。使用来自单个或两个指令的证据或检测众所周知的错误来源的简单规则比使用推理、检查来自多种方法的指令或标记在许多情况下完全合理的代码的规则更有可能找到真正的错误.

在[版本 2](http://findbugs.sourceforge.net/findbugs2.html) `confidence`之前被称为`priority`，但由于大多数开发人员对这个词的理解，这引起了混淆`priority`：

> [M]任何人都对 FindBugs 报告的优先级感到困惑，并认为所有高优先级问题都很重要。为了反映问题的这个属性的实际 [原文] 含义，它已重新命名为信心。应该通过排名来比较不同错误模式的问题，而不是他们的信心。

规则`rank`衡量问题的严重性。它从 20（最低）到 1（最高）不等，UI 将值分为四类：`scariest`、`scary`、`troubling`和`of concern`。

例如，磨损的刹车片可能会收到`rank`10 分，而切断刹车线会得到 1。您的机械师可能会报告`confidence`说您的刹车线通过简单的检查就被切断了，但`confidence`他在引擎中听到的敲击声表明活塞损坏了。

# javascript - 如果使用backbone.js 或ember.js，如何隐藏应用程序逻辑？

> ID：15103067
> 
> 赞同：2
> 
> 时间：2013-02-27T02:20:13.763
> 
> 标签：javascript, backbone.js, ember.js

我很高兴使用 Backbone.js 和 Ember.js，但我想知道如果你的应用程序逻辑都是用 javascript 编写的，那么你如何才能让用户隐藏你的应用程序逻辑。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T02:25:23.963

使用 Backbone.js 和 Ember.js 等 JavaScript 库的问题在于，您的代码在客户端（在浏览器中）执行。为此，您必须将代码交付给浏览器，这意味着您的用户有一份副本。没有办法向他们“隐藏”代码（有混淆技术和最小化可以使它变得困难，但并非不可能）。

你应该在 Backbone.js 或 Ember.js 中做的是*显示*逻辑。您的所有数据处理、验证、清理、存储*业务逻辑*都发生在您的服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:23:13.353

您的服务器端应用程序仍应进行*一些*处理，例如验证、清理和完整性检查。

# jquery - Datatable 中的单选按钮无法在 Safari/Firefox 中呈现

> ID：15103068
> 
> 赞同：0
> 
> 时间：2013-02-27T02:20:25.577
> 
> 标签：jquery, html, css

我的 html 文件有问题。我在页面中有一个数据表，表中的每一行都有一个包含两个单选按钮的列。应始终选择一个单选按钮。

现在的问题是在 IE8 下一切正常，但是当我切换到 IE9+/Safari/FireFox 时，表中的第一对单选按钮似乎没有被选中。我检查了源代码，它确实说明了这一点

```
<input type="radio" checked  name="radio_10" onchange="chgRadio('aaa','2')" value="2"></input>
<input type="radio" name="radio_10" onchange="chgRadio('aaa','1')" value="1"></input> 
```

所以有点奇怪，为什么选中的按钮不能在页面上呈现？

这里我附上这个html文件的源代码，在代码中我在javascript中包含了一个jquery文件，一旦我删除了这个文件，即使在Safari/Firefox下，所有的单选按钮也可以正确呈现。所以我只是想知道 jquery 和浏览器版本之间的兼容性是否存在问题？对css进行一些更改是否有帮助？

```
<!DOCTYPE html>
<html>
<head>

 <meta charset="utf-8">

  <link href="jquery/ui/css/sunny/jquery-ui-1.8.16.custom.css" rel="stylesheet" type="text/css">

<link href="jquery/datatables/css/mrbs-page.css" rel="stylesheet" type="text/css">
<link href="jquery/datatables/css/mrbs-table.css" rel="stylesheet" type="text/css">
<link href="jquery/datatables/css/ColReorder.css" rel="stylesheet" type="text/css">
<link href="jquery/datatables/css/ColVis.css" rel="stylesheet" type="text/css">

<link rel="stylesheet" href="css/mrbs.css.php" type="text/css">
    <link rel="stylesheet" media="print" href="css/mrbs-print.css.php" type="text/css">
<!--[if IE]>
<link rel="stylesheet" href="css/mrbs-ie.css" type="text/css">
<![endif]-->
    <!--[if IE 8]>
<link rel="stylesheet" href="css/mrbs-ie8.css" type="text/css">
<![endif]-->
<!--[if lte IE 8]>
<link rel="stylesheet" href="css/mrbs-ielte8.css" type="text/css">
<![endif]-->
<!--[if lte IE 7]>
<link rel="stylesheet" href="css/mrbs-ielte7.css.php" type="text/css">
<![endif]-->
<!--[if lte IE 6]>
<link rel="stylesheet" href="css/mrbs-ielte6.css" type="text/css">
<![endif]-->

<meta name="robots" content="noindex">

<script type="text/javascript" src="jquery/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="jquery/ui/jquery-ui-1.8.22.custom.min.js"></script>
<script type="text/javascript" src="jquery/ui/jquery-ui-i18n.js"></script>
<script type="text/javascript" src="jquery/ui/jquery-ui-datepicker-en.js"></script>
<script type="text/javascript" src="jquery/ui/jquery-ui-datepicker-en-US.js"></script>

<script type="text/javascript">
//<![CDATA[
var lteIE6 = false;
//]]> 
</script>
<!--[if lte IE 6]>
<script type="text/javascript">
//<![CDATA[
var lteIE6 = true;
//]]>
</script>
<![endif]-->

<script type="text/javascript">
//<![CDATA[
var lteIE7 = false;
//]]>
</script>
<!--[if lte IE 7]>
<script type="text/javascript">
//<![CDATA[
var lteIE7 = true;
//]]>
</script>
<![endif]-->

<script type="text/javascript">
  //<![CDATA[
  var lteIE8 = false;
  //]]>
</script>
<!--[if lte IE 8]>
<script type="text/javascript">
  //<![CDATA[
  var lteIE8 = true;
  //]]>
</script>
<![endif]-->

<script type="text/javascript">
  //<![CDATA[
    function init(params)
  {
  }
</script>

  <script type="text/javascript" src="jquery/datatables/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="jquery/datatables/js/ColReorder.min.js"></script>
    <script type="text/javascript" src="jquery/datatables/js/ColVis.mrbs.min.js"></script>
    <script type="text/javascript" src="jquery/datatables/js/FixedColumns.mrbs.js"></script>
  <script type="text/javascript" src="jquery/datatables/js/plugins.js"></script>

  <script type="text/javascript" src="js/datatables.js.php?area="></script>

    <script type="text/javascript" src="js/edit_users.js.php?area="></script>
  <script type="text/javascript" src="js/functions.js.php?area="></script>
<script type="text/javascript" src="js/datepicker.js.php?area="></script>
<script type="text/javascript" src="js/general.js.php?area="></script>

</head>

<body class="non_js edit_users">
<script type="text/javascript">
  //<![CDATA[
  $('body').addClass('js').removeClass('non_js');
  //]]>
</script> 

<div id="contents">
<script type="text/javascript">
       var changes = new Array();
       function delConfirm(id,name) {
          var r = confirm("Are you sure to delete user "+name+" ?");
          if (r)
               window.location="edit_users.php?Action=Delete&Id="+id;
        }
       function delAlert(){
          alert("This is the last admin in the system, you cannot delete it!")
       } 
       function chgRadio(name,role){
             var group = new Array();
             var exist = false;
             for(i=0;i<changes.length;i++){
                  if(changes[i][0]==name){
                       changes[i].push(role==1?"user":"admin");
                       exist = true;
                   }
             }
             if (!exist){  
                group.push(name,role==1?"user":"admin");
                changes.push(group);
             }
       }
       function chgConfirm(Action){
             var makechg = false;
             if (changes.length==0){
                   var s="No users selected to change roles.";
             }
             else {
                var s="Change\n";
                for (i=0; i<changes.length; i++) { 
                   var name= changes[i];
                   if(name.length == 2){
                         s+=name[0]+" to be "+name[1]+"\n";
                         makechg=true;
                   }
                   else{
                         if(changes.length==1) {
                            if(name[1]!=name[name.length-1]){
                                s="No users selected to change roles";
                                continue;
                             }
                             else{
                                 s+=name[0]+" to be "+name[name.length-1]+"\n";
                                 makechg=true;
                             } 
                          }
                         else{
                            if(name[1]!=name[name.length-1]){
                                continue;
                             }
                             else{
                                 s+=name[0]+" to be "+name[name.length-1]+"\n";
                                 makechg=true; } 
                         }
                      }
                  }
             }
             if (!makechg){
                   alert(s);
                   return false;
             }
             else {
                 var r = confirm(s);
                 if (r)
                      document.location.reload(true);
                 else{
                      document.getElementById("Action").value="nochg";
                      document.location.reload(true);
                 }
             }
       }
       </script><br><br><h1 align="center">User list</h1>
<form id="form_user_list" class="form_user_list" name = "form_user_list" method="post" 

action="edit_users.php">
<div id="user_list" class="datatable_container">
<table class="admin_table display" id="users_table">
<thead>
<tr>
<th rowspan="2">Name</th>
<th colspan="2">Current Role</th><th rowspan="2" width="50">Delete User</th>
</tr>
<tr><th width="80">Admin</th>
<th width="80">User</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a title="igor">igor</a></td>
<td><div><input type="radio" checked  name="radio_10" onchange="chgRadio('igor','2')" value="2"></input></td>
<td><input type="radio" name="radio_10" onchange="chgRadio('igor','1')" value="1"></input></div></td>
<td><img src="images/delete.png" width="16" height="16" alt="Delete" title="Delete" onclick="delConfirm('10','igor')"></a>
</td>
</tr>
<tr>
<td>
<a title="nate">nate</a></td>
<td><div><input type="radio" checked  name="radio_9" onchange="chgRadio('nate','2')" value="2"></input></td>
<td><input type="radio" name="radio_9" onchange="chgRadio('nate','1')" value="1"></input></div></td>
<td><img src="images/delete.png" width="16" height="16" alt="Delete" title="Delete" onclick="delConfirm('9','nate')"></a>
</td>
</tr>
<tr>
<td>
<a title="shahm6">shahm6</a></td>
<td><div><input type="radio" checked  name="radio_4" onchange="chgRadio('shahm6','2')" value="2"></input></td>
<td><input type="radio" name="radio_4" onchange="chgRadio('shahm6','1')" value="1"></input></div></td>
<td><img src="images/delete.png" width="16" height="16" alt="Delete" title="Delete" onclick="delConfirm('4','shahm6')"></a>
</td>
</tr>
<tr>
<td>
<a title="test">test</a></td>
<td><div><input type="radio" checked  name="radio_11" onchange="chgRadio('test','2')" value="2"></input></td>
<td><input type="radio" name="radio_11" onchange="chgRadio('test','1')" value="1"></input></div></td>
<td><img src="images/delete.png" width="16" height="16" alt="Delete" title="Delete" onclick="delConfirm('11','test')"></a>
</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:34:42.147

.尝试删除第一个单选按钮中选中的单词。尝试测试它是否有效。因为我无法理解您想要表达的想法，因为您没有包含链接，例如jsfiddle.net ..

快乐的编码...

# wpf - WPF+MVVM：当需要 DependencyProperty 时如何使用普通的旧 ViewModelBase

> ID：15103080
> 
> 赞同：1
> 
> 时间：2013-02-27T02:21:52.183
> 
> 标签：wpf, mvvm, viewmodel, dependency-properties, dependencyobject

我正在使用第 3 方 WPF 控件，其 MVVM 支持依赖于它所绑定的 VM 上的依赖项属性。控件附带的示例使用派生自 DependencyObject 的 ViewModelBase 类，因此一切正常。

我的 ViewModelBase 实现了 INotifyPropertyChanged，由于各种原因，将其更改为 DependencyObject 是不现实的。

我的问题是如何将我的 ViewModels 与这个 WPF 控件一起使用？我想我需要的是在普通的旧 ViewModel 中“嵌入依赖对象”或“插入依赖属性”之类的东西。

顺便说一句，我的 MVVM 应用程序是基于接口的，即 SomeViewModel 到处都是 ISomeViewModel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:26:39.890

一般来说，设计合理的*控件*不需要绑定到 a `DependencyProperty`，因为 DP 可以毫无问题地绑定到任何属性。因此，我将首先重新审视这是否真的是控制实现中的一个错误，并纠正它。

但是，如果您必须这样做，请意识到您将违反 MVVM -`DependencyObject`在 ViewModel 中使用本质上是将视图特定的框架元素注入 VM。一旦您决定可以这样做，您始终可以让您的 ViewModel 将 DependencyObject 作为属性公开，并绑定到在该 DependencyObject 上定义的 DependencyProperty，而不是直接绑定到 VM 的属性。

# django - Django 从站点模型中删除不会级联删除相关模型

> ID：15103082
> 
> 赞同：2
> 
> 时间：2013-02-27T02:21:58.163
> 
> 标签：django, model, cascade

我有一个 django 项目，目前托管多个站点，现在我需要将它们拆分为具有不同数据库的不同项目。

所以我克隆了项目，并认为删除站点模型中的记录将级联删除与我正在删除的站点相关的所有数据，并留下与我正在保留的站点记录相关的数据。

我在管理命令中有以下代码来删除站点：

```
Site.objects.filter(~Q(domain=options.get("domain"))).delete() 
```

但我收到这样的错误：

```
django.db.utils.IntegrityError: update or delete on table "django_site" violates foreign key constraint "core_staticpage_site_id_fkey" on table "core_staticpage"
DETAIL:  Key (id)=(4) is still referenced from table "core_staticpage". 
```

此错误适用于 ForeignKey 和 ManyToManyField，Django 版本为 1.4.3

# windows - 本地主机上的通配符子域使用主机文件

> ID：15103084
> 
> 赞同：4
> 
> 时间：2013-02-27T02:22:03.273
> 
> 标签：windows, iis, dns, localhost, subdomain

我正在尝试在我的开发机器上设置子域，该机器在 Windows 7 上运行 IIS 7。

看起来可以 通过添加如下行来编辑`hosts`文件：`C:\Windows\System32\drivers\etc`

```
127.0.0.1 localhost
127.0.0.1 abc.localhost 
```

我想知道这是否可以在不为每个子域添加配置的情况下完成？

[这里给出](https://stackoverflow.com/a/872914/37759)的答案听起来可能是可能的，但我不清楚......

# uiactivityviewcontroller - UIActivityViewController 创建单独的邮件图标

> ID：15103088
> 
> 赞同：0
> 
> 时间：2013-02-27T02:22:15.413
> 
> 标签：uiactivityviewcontroller

我正在尝试创建一个 UIActivityViewController，让用户发送有关正在查看的当前网页的反馈。我希望有一个与邮件图标分开的按钮，以弹出一个包含收件人集、主题集和消息正文的撰写窗口，以包含一些文本和当前 URL（我得到的 URL 为： NSURL *urlStringToShare = _webView .request.URL；在 RootViewController 中）。任何想法如何做到这一点？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:01:44.787

例如，我已经有一个执行此操作的 IBAction：

```
- (IBAction)showEmail:(id)sender {
    // Email Subject
    NSString *emailTitle = @"Feedback on your latest column from the GlennKessler App:";
    // Email Content
    NSString *messageBody3 = @"I disagree with your latest Fact Check and the number of pinocchios you gave. This is what I would rate it instead and why:";
    // To address
    NSArray *toRecipents = [NSArray arrayWithObject:@"blah@la.com"];

    MFMailComposeViewController *mc = [[MFMailComposeViewController alloc] init];
    mc.mailComposeDelegate = self;
    [mc setSubject:emailTitle];
    [mc setMessageBody:messageBody3 isHTML:NO];
    [mc setToRecipients:toRecipents];

    // Present mail view controller on screen
    [self presentViewController:mc animated:YES completion:NULL];

} 
```

有什么方法可以将其转换为带有图标的 UIActivityViewController 项目？谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T06:07:40.913

尝试使用它，您可以使用此链接中的库创建许多自定义活动，例如邮件：

[https://github.com/imulus/OWActivityViewController](https://github.com/imulus/OWActivityViewController)

# php - 从上一页获取 ID 到下一页的字段（CodeIgniter）

> ID：15103089
> 
> 赞同：1
> 
> 时间：2013-02-27T02:22:18.237
> 
> 标签：php, forms, codeigniter, session

基本上我想要做的就是从我的视图页面中显示特定的文章，然后有一个删除链接到一个页面，该页面带有一个字段和一个用于删除该字段中显示的 id 的文章的按钮。

在过去的几天里，我尝试将 id 放在 URL 链接中，即“delete?id=20”并尝试使用 $_GET 访问它，然后我尝试了“delete/20”和 URI段。然后我尝试使用会话等，但我不确定哪个是最好的，因为我没有让它们中的任何一个工作。

我决定展示我未修改的代码并从头开始这是我的代码：

**视图.php**

```
<?php 
echo '<h2>'.$news_item['title'].'</h2>';
echo '<p>'.$news_item['text'].'</p>'; 
?><br><br>

<a href="http://website.com/CodeIgniter/index.php/news">
Go to latest news</a>

<a href = "http://website.com/CodeIgniter/index.php/news/delete">Delete</a><br> 
```

**删除.php**

```
<h2>Delete a news item</h2>

<?php echo validation_errors(); ?>
<?php echo form_open('news/delete') ?>

<form>
<label for="delete">Article Number</label><br> 
<input name="id" class="resizedTitlebox" value="id" /><br>      
<br>

<input type="submit" name="submit" value="Delete news item" /></form> 
```

**news.php（控制器）**

```
 <?php

 class News extends CI_Controller {

public function __construct()
{
    parent::__construct();
    $this->load->model('news_model');
}

public function view($slug)

    {

$data['news_item'] = $this->news_model->get_news($slug);

   if (empty($data['news_item']))
   {
    show_404();
   }

$data['title'] = $data['news_item']['title'];

$this->load->view('templates/header', $data);
$this->load->view('news/view', $data);
$this->load->view('templates/footer');

    }

    public function delete() {
    {   
      $this->load->helper('form');
      $this->load->library('form_validation');

      $data['title'] = 'Delete news item';

      $this->form_validation->set_rules('id',  'required');

      if ($this->form_validation->run() === FALSE)
      {
                $this->load->view('templates/header', $data);   
                $this->load->view('news/delete');
                $this->load->view('templates/footer');

      }
      else
      {
            $data['id'] = $this->news_model->delete('id');
            $this->load->view('news/success');
              }
             }
         } 
```

**news_model.php（模型）**

```
 <?php

    class News_model extends CI_Model {

public function __construct()   {

    $this->load->database();
}

   public function get_news($slug = FALSE){

     $this->load->helper('text');

 if ($slug === FALSE){
     $this->db->order_by('id', 'desc');
    $query = $this->db->get('news');
     return $query->result_array();
 }

 $query = $this->db->get_where('news', array('slug' => $slug));
 return $query->row_array();
     } 

     public function set_news(){

     $this->load->helper('url');

     $slug = url_title($this->input->post('title'), 'dash', TRUE);

     $data = array(
         'id' => $this->input->post('id'),
          'title' => $this->input->post('title'),
          'slug' => $slug,
          'text' => $this->input->post('text'));

      return $this->db->insert('news', $data);
        }

    public function delete ($id)  {

          $this->db->where('id',$this->input->post('id'));
          $this->db->delete('news');
      }
     } 
```

**路由.php（配置）**

```
 $route['news/(:any)'] = 'news/view/$1';
    $route['news/delete'] = 'news/delete';
    $route['news'] = 'news';
    $route['default_controller'] = 'news';
    $route['404_override'] = ''; 
```

## 提前感谢您提供的任何帮助！

@jeroen 回答

“您没有在删除链接中传递任何值；您应该在路径或查询字符串中添加一个 ID” - 我假设您的意思是

```
 <a href = "http://website.com/CodeIgniter/index.php/news/delete?article_id=<?php echo $news_item['id']; ?>">Delete</a> 
```

所以使用article_id。那我可以在delete控制器中定义article_id吗？我不确定如何做到这一点。

答案：$this->input->get(article_id)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:41:14.090

我认为他们不需要删除视图页面。您可以直接从新闻列表页面中删除新闻项目

```
<a href = "http://website.com/CodeIgniter/index.php/news/delete">Delete</a><br> 
```

而不是这条线使用这个

```
<a href = "<?php echo site_url("news/delete/".$news_item['id']); ?>Delete</a> 
```

在你的控制器中

```
public function delete($id){
    $this->news_model->delete($id);
    $this->load->view('news/success');
  } 
```

在你的模型中使用这个

```
function Delete($id){
        $this->db->where('id', $id);
        if($this->db->delete("news"))
           return true;
        else
           return false;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:30:40.137

您的删除过程似乎很奇怪，并且有一些错误：

1.  您没有在表单中指定方法，因此默认为`GET`但在您使用的删除功能中`$this->input->post('id')`。您应该将表格更改为`<form action="" method="POST">`;
2.  您正在将一个变量发送到您不使用的删除函数：`$id`。这是您的控制器中的一个字符串，尽管模型中的名称似乎暗示了一个 ID。但是你无论如何都不会使用它......
3.  当您在控制器中调用 delete 函数时，您期望它有一个返回值，但您不会从函数中返回任何内容。
4.  您没有在删除链接中传递任何值；您应该在路径或查询字符串中添加一个 ID，但`$id`如果您使用相同的控制器，请注意不要使用相同的名称，因为表单将在没有确认的情况下验证；
5.  您没有在`delete`控制器中获得任何 ID 值并将其传递给视图以填充 ID 字段的值。

顺便说一句，没有输入类型`id`，但这不会导致任何问题，因为它默认为`text`.

# python - 嵌套函数作为Python中的属性

> ID：15103097
> 
> 赞同：1
> 
> 时间：2013-02-27T02:23:07.563
> 
> 标签：python, unit-testing, python-2.7

不确定这是否是骗局。就这样吧。

我需要编写一些 Python 代码，如下所示：

```
class TestClass:
    def test_case(self):
     def get_categories(self):
      return [“abc”,”bcd”]
     # do the test here 
```

然后有一个测试引擎类扫描所有这些测试类，加载所有 test_case 函数，并为每个调用 get_categories 来确定测试是否属于特定运行的感兴趣组。

问题是 get_categories 不被视为 test_case 的属性，即使我手动分配它

```
class TestClass:
    def test_case(self):
     def get_categories(self):
      return [“abc”,”bcd”]
     # do the test here
     test_case.get_categories = get_categories 
```

这只会在 test_case 第一次运行时发生，对我来说太晚了。

这个函数不能在类上运行的原因（或者至少为什么我希望它在每个函数级别也可用）是因为一个 TestClass 可以有多个测试用例。由于这是一个已经存在的测试基础设施，并且类别机制有效（除了不太重要的功能类别场​​景之外），因此计划中没有重写。

非常感谢语言技巧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:27:36.270

嵌套函数不会像任何其他赋值一样成为属性。

如果不支持（并且使用旧式类！），我怀疑您的测试基础设施正在做一些非常奇怪的事情，但您可以这样做：

```
class TestClass:
    def test_case(self):
        # ...

    def _get_categories(self):
        return [...]
    test_case.get_categories = _get_categories
    del _get_categories 
```

类主体是与任何其他块一样的可执行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:35:11.600

你需要的是嵌套类。函数不是用来做你想做的事，所以你必须提高一个档次。函数属性主要用作标记，而类可以有任何你想要的东西。

```
class TestClass(object):
    class TestCase(object):
         @classmethod
         def get_categories(cls):
             return ['abc', 'efg'] 
```

请注意，我使用`@classmethod`它是为了您可以在不实例化的情况下使用它`TestCase()`；如果你想做就修改`test_case = TestCase()`。

# php - 如何使用他们的 Facebook 帐户自动验证用户，前提是他们之前已连接到我的网站

> ID：15103098
> 
> 赞同：0
> 
> 时间：2013-02-27T02:23:07.307
> 
> 标签：php, facebook, authentication

更新：这似乎是[一个重复的问题](https://stackoverflow.com/questions/7827287/how-can-one-securely-log-users-in-automatically-after-previous-facebook-authenti?rq=1)。很抱歉在发布之前没有彻底搜索。

我正在使用 PHP 构建一个网站，允许用户通过他们的 Facebook 帐户登录。一切正常，除了用户总是需要点击一个按钮重新登录。我注意到像[goodreads.com](http://goodreads.com)这样的网站可以自动检测我的 Facebook 帐户，即使在我删除了所有 cookie 之后也是如此。你知道怎么做吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:25:47.417

其中一些使用嵌入式 iframe，将用户发送到 Facebook，然后返回您的网站，并且此 iframe 中的代码与父窗口通信，告诉它您是哪个用户

但 Facebook 的返回 url 应该与您的网站在同一个域中

# vb.net - 列表取决于值选择

> ID：15103100
> 
> 赞同：0
> 
> 时间：2013-02-27T02:23:18.257
> 
> 标签：vb.net, winforms, combobox

我有 2 `combobox`。两个`comboBox`值都来自`dataset`。

`cb1`包含数字列表`eg : 10, 20, 30`
`cb2`包含数字列表`eg : 10.2, 11.3, 20.5, 24.8, 34.5`

`Cb2`必须在选择 cb1 时过滤列表

> 例如：10 -> 10.2,11.3 20 -> 20.5, 24.8 30 -> 34.5

如何使用 vb.net 对这些进行编码？我正在使用 mssql，所有数据都存储在表和 Visual Studio 2005 vb.net 中

```
cb1 = BilletSize
cb2 = BilletUnitWt 
```

**编辑**：

到目前为止尝试的代码

```
Private Sub cbBilletSize_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cbBilletSize.SelectedIndexChanged 
    Dim SqlStr As String SqlStr = "SELECT tbBilletUnitWt.BilletUnitWtCode FROM tbBilletUnitWt WHERE tbBilletUnitWt.BilletSizeCode = " & Me.cbBilletSize.SelectedValue & ";" 
    Me.cbUnitWt.SelectedValue.RowSource = SqlStr Me.cbUnitWt.SelectedValue.Requery()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:12:55.173

我用列表而不是数据集快速尝试了这个。你能看看你是否可以调整它以使其适合你吗？

我认为您应该主要只需将列表操作替换为等效的数据集操作...

```
Public Class Form1

    Dim combobox1Items As List(Of Integer) = New List(Of Integer)
    Dim combobox2Items As List(Of Double) = New List(Of Double)

    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

        Me.combobox1Items.Add(10)
        Me.combobox1Items.Add(20)
        Me.combobox1Items.Add(30)

        Me.combobox2Items.Add(10.2)
        Me.combobox2Items.Add(11.3)
        Me.combobox2Items.Add(20.5)
        Me.combobox2Items.Add(24.8)
        Me.combobox2Items.Add(34.5)

        With Me.ComboBox1
            .DataSource = Me.combobox1Items
        End With

    End Sub

    Private Sub ComboBox1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ComboBox1.SelectedIndexChanged

        Dim bindingList As New List(Of Double)

        For Each item As Double In Me.combobox2Items
            If item > CInt(Me.ComboBox1.Items(Me.ComboBox1.SelectedIndex)) Then
                Call bindingList.Add(item)
            End If
        Next

        With Me.ComboBox2
            .DataSource = bindingList
        End With

    End Sub

End Class 
```

# android - 尝试膨胀一个自定义的viewpage android

> ID：15103101
> 
> 赞同：6
> 
> 时间：2013-02-27T02:23:24.027
> 
> 标签：android, viewpage

我扩展了 Viewpage 类，但问题是我总是得到 java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pindak.sarito/com.pindak.sarito.ui.ws.MagazineReaderActivity}: android.view.InflateException: Binary XML 文件第 2 行：膨胀类 com.pindak.sarito.util.HackyViewPager 时出错。当试图给它充气时。

这是我的布局

```
<?xml version="1.0" encoding="utf-8"?>
<com.pindak.sarito.util.HackyViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/magazinepager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

这是我在活动中的 onCreate 的一些代码

```
HackyViewPager pager = (HackyViewPager) findViewById(R.id.magazinepager); 
```

在 com.pindak.sarito.util 我有 HackyViewPager.java

```
package com.pindak.sarito.util;

import android.content.Context;
import android.support.v4.view.ViewPager;
import android.view.MotionEvent;

public class HackyViewPager extends ViewPager {

    public HackyViewPager(Context context) {
        super(context);
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        try {
            return super.onInterceptTouchEvent(ev);
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
            return false;
        }
    }

} 
```

任何想法为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T02:29:19.563

您是否尝试过添加与两个超级构造函数匹配的构造函数？

```
public HackyViewPager(Context context) {
    super(context);
}

public HackyViewPager(Context context, AttributeSet attrs) {
    super(context, attrs);
} 
```

# android - 使用自定义 InstrumentationTestRunner 添加 Android JUnit 测试

> ID：15103103
> 
> 赞同：2
> 
> 时间：2013-02-27T02:23:43.797
> 
> 标签：android, testing, junit, automated-tests

我想将[参数化测试添加到我的 Android 应用程序测试套件](https://stackoverflow.com/questions/15017784/parameterized-junit-tests-in-android-test-project)中。在回答我之前的问题时，@dtmilano 建议我实现一个测试运行器，它可以将参数传递给我的参数化测试。我想将这些传递给测试的构造函数，而不是直接[通过 getter 方法检索它们](https://stackoverflow.com/questions/14820175/how-to-pass-an-argument-to-a-android-junit-test-parameterized-tests/14821971#14821971)。作为一个简单的例子，我扩展了 InstrumentationTestRunner：

```
public class ExampleTestRunner extends InstrumentationTestRunner {

    @Override
    public TestSuite getAllTests() {
        TestSuite suite = super.getAllTests();
        suite.addTest(new TestRunnerActivityTest()); // line 22
        return suite;
    }
} 
```

我还更新了测试项目的清单：

```
<instrumentation android:name="codeguru.example.testrunner.ExampleTestRunner"
                 android:targetPackage="codeguru.example.testrunner"
                 android:label="Tests for codeguru.example.testrunner"/> 
```

当我运行这个测试时

```
$ adb shell am instrument -w codeguru.example.testrunner.tests/codeguru.example.testrunner.ExampleTestRunner 
```

我明白了

```
E/AndroidRuntime（880）：java.lang.RuntimeException：在 ComponentInfo{codeguru.example.testrunner.tests/codeguru.example.testrunner.ExampleTestRunner} 的 onCreate（）中引发异常：java.lang.NullPointerException
E/AndroidRuntime(880): 在 android.app.ActivityThread.handleBindApplication(ActivityThread.java:4145)
E/AndroidRuntime(880): 在 android.app.ActivityThread.access$1300(ActivityThread.java:130)
E/AndroidRuntime(880): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1255)
E/AndroidRuntime(880): 在 android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime（880）：在 android.os.Looper.loop（Looper.java:137）
E/AndroidRuntime(880): 在 android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime(880): 在 java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime（880）：在 java.lang.reflect.Method.invoke（Method.java:511）
E/AndroidRuntime（880）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run（ZygoteInit.java:786）
E/AndroidRuntime（880）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:553）
E/AndroidRuntime（880）：在 dalvik.system.NativeStart.main（本机方法）
E/AndroidRuntime(880): 引起: java.lang.NullPointerException
E/AndroidRuntime（880）：在 codeguru.example.testrunner.ExampleTestRunner.getAllTests（ExampleTestRunner.java:22）
E/AndroidRuntime（880）：在 android.test.InstrumentationTestRunner.getTestSuite（InstrumentationTestRunner.java:581）
E/AndroidRuntime（880）：在 android.test.InstrumentationTestRunner.onCreate（InstrumentationTestRunner.java:360）
E/AndroidRuntime(880): 在 android.app.ActivityThread.handleBindApplication(ActivityThread.java:4142)
E/AndroidRuntime(880): ... 10 更多
```

显然，我得到一个 NPE，因为`super.getAllTests()`返回`null`. 我当然可以创建一个`new TestSuite()`并将我的测试添加到这个。理想情况下，我想将我的参数化测试添加到我已经拥有的其余“正常”测试中。有谁知道我可以做到这一点的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:22:35.740

对我有用的解决方案虽然不完全令人满意，但将调用替换 `super.getAllTests()`为`new TestSuite()`.

# vhdl - VHDL：从逻辑表达式创建有限状态机

> ID：15103104
> 
> 赞同：0
> 
> 时间：2013-02-27T02:23:49.737
> 
> 标签：vhdl, fsm

我被要求使用 one-hot 编码创建一个有限状态机，它将检测输入 w 上的四个 1 或 0 的序列。我已经使用 case 语句编写了代码，但我还必须通过提供逻辑表达式作为 9 个触发器的输入来完成它。我在 z 上没有得到正确的输出，我也不太明白为什么。

到目前为止，我已经为 D 触发器编写了以下代码

```
library ieee;
use ieee.std_logic_1164.all;

entity dflipflop is
    port (D, clk, reset: in std_logic;
        Q: out std_logic);
end dflipflop;

architecture behavior of dflipflop is
begin
process(clk)
begin
    if reset <= '0' then 
        Q <= '0';
    elsif rising_edge(clk) then
        Q <= D;
    end if;
end process;
end behavior; 
```

然后我把它作为我的代码的其余部分，这就是我认为问题所在。

```
library ieee;
use ieee.std_logic_1164.all;

entity part1 is 
port (clk, w, reset : in std_logic;
        z: out std_logic);
end part1;

architecture behavior of part1 is
    component dflipflop 
    port (D, clk, reset: in std_logic; 
            Q: out std_logic);
    end component;

    signal A, B, C, D, E, F, G, H, I: std_logic;
    signal Y1, Y2, Y3, Y4, Y5, Y6, Y7, Y8, Y9: std_logic;

   dff1: dflipflop port map (clk=>clk, reset=>reset, D=>Y1, Q=>A);
   dff2: dflipflop port map (clk=>clk, reset=>reset, D=>Y2, Q=>B);
   dff3: dflipflop port map (clk=>clk, reset=>reset, D=>Y3, Q=>C);
   dff4: dflipflop port map (clk=>clk, reset=>reset, D=>Y4, Q=>D);
   dff5: dflipflop port map (clk=>clk, reset=>reset, D=>Y5, Q=>E);
   dff6: dflipflop port map (clk=>clk, reset=>reset, D=>Y6, Q=>F);
   dff7: dflipflop port map (clk=>clk, reset=>reset, D=>Y7, Q=>G);
   dff8: dflipflop port map (clk=>clk, reset=>reset, D=>Y8, Q=>H);
   dff9: dflipflop port map (clk=>clk, reset=>reset, D=>Y9, Q=>I);

begin
process(clk);
begin
if rising_edge(clk) then
    Y1 <= (((not w) and C) or ((not w) and G) or ((not w) and H) or ((not w) and I) or (w and B) or (w and D) or (w and E) or (w and F));
    Y2 <= ((not w) and A);
    Y3 <= (w and A);
    Y4 <= ((not w) and B);
    Y5 <= ((not w) and D);
    Y6 <= (((not w) and E) or ((not w) and F));
    Y7 <= (w and C);
    Y8 <= (w and G);
    Y9 <= ((w and H) or (w and I));
end if;
end process;
z <= (Y6 OR Y9);

end behavior; 
```

任何人都可以就我可能做错的事情提供任何提示或见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T05:49:10.087

## 初步评论（查看您的源代码）：

*   您的**dflipflop**描述似乎很好，尽管我没有看到使用异步复位的任何理由。考虑将其更改为[同步复位触发器，](http://www.asic-world.com/code/vhdl_examples/dff_sync_reset.vhd)除非您的设计确实需要一些 FF 来异步复位。

*   你已经把你的组合逻辑语句放在了一个时钟过程中。现在，如果您要在结构上实例化触发器，所有这些句子都不应该在一个内部，因为它们已经被触发器计时了。

*   您应该更明智地使用信号名称，否则您的代码将很难阅读和调试，特别是对于更复杂的设计。此外，如果您想分别使用高电平有效或低电平有效复位，请使用`reset= '1'`或`reset='0'`代替。`reset <='0'`

## 我该怎么做：

我相信您正在寻找具有以下图形表示的位检测器的简单有限状态机 (FSM) 的结构描述，总共有 9 个状态。One-hot 编码意味着您需要为每个状态分配一个触发器。![](../Images/1c4ab8ad0e8ef6c6deb5cf5c49f30cbc.png)

首先，声明 9 个 std_logic 信号，其中每个信号代表一个热编码 FSM 中的一个状态。这些将是 9 个 FF 的输出信号：

```
 signal init : std_logic;  -- Initial/reset state            
 signal zeros_1 : std_logic;  -- 1 zero  detected
 signal zeros_2 : std_logic;  -- 2 zeros detected
 signal zeros_3 : std_logic;  -- 3 zeros detected
 signal zeros_4 : std_logic;  -- 4 zeros detected
 signal ones_1  : std_logic;  -- 1 one   detected
 signal ones_2  : std_logic;  -- 1 one   detected
 signal ones_3  : std_logic;  -- 1 one   detected
 signal ones_4  : std_logic;  -- 1 one   detected 
```

声明额外的 9 个 std_logic 信号，以保存相应状态触发器的下一个值。这些将是 9 个 FF 的输入信号：

```
 signal go_to_init   : std_logic;
 signal go_to_zeros_1 : std_logic;  
 signal go_to_zeros_2 : std_logic;  
 signal go_to_zeros_3 : std_logic;  
 signal go_to_zeros_4 : std_logic;  
 signal go_to_ones_1  : std_logic;  
 signal go_to_ones_2  : std_logic;  
 signal go_to_ones_3  : std_logic;  
 signal go_to_ones_4  : std_logic; 
```

将 9 个触发器映射到相应的信号。

请注意，如果您想使用 RESET 信号初始化状态机，则需要一个 D 触发器，该触发器在 RESET 时为高电平。您可以使用**dflipflop**的描述，更改`if reset='1' then Q <='0'`为 `if reset='1' then Q <='1'`并使用它来实现新的**dflipflop_RH**。

```
init_ff   : dflipflop_RH port map (clk=>clk, reset=>reset,D=> go_to_init, Q=> init);
zeros_1_ff: dflipflop port map (clk=>clk, reset=>reset,D=> go_to_zeros_1, Q=> zeros_1 );
zeros_2_ff: dflipflop port map (clk=>clk, reset=>reset,D=> go_to_zeros_2, Q=> zeros_2 );
zeros_3_ff: dflipflop port map (clk=>clk, reset=>reset,D=> go_to_zeros_3, Q=> zeros_3 );
zeros_4_ff: dflipflop port map (clk=>clk, reset=>reset,D=> go_to_zeros_4, Q=> zeros_4 );
ones_1_ff : dflipflop port map (clk=>clk, reset=>reset,D=> go_to_ones_1, Q=> ones_1 );
ones_2_ff : dflipflop port map (clk=>clk, reset=>reset,D=> go_to_ones_2, Q=> ones_2 );
ones_3_ff : dflipflop port map (clk=>clk, reset=>reset,D=> go_to_ones_3, Q=> ones_3 );
ones_4_ff : dflipflop port map (clk=>clk, reset=>reset,D=> go_to_ones_4, Q=> ones_4 ); 
```

最后，添加组合逻辑以根据当前状态和输入信号“w”计算下一个状态。由于它是一个非常简单的 FSM，您只需要将 FSM 图形表示转换为 VHDL 代码：

```
 go_to_init <= '0';  -- never go to init (only when reset='1') 

 go_to_zeros_1 <= (init or ones_1 or ones_2 or ones_3 or ones_4  ) and (not w);
 go_to_zeros_2 <= zeros_1 and (not w);
 go_to_zeros_3 <= zeros_2 and (not w);
 go_to_zeros_4 <= (zeros_3 or zeros_4) and (not w);

 go_to_ones_1 <= (init or zeros_1 or zeros_2 or zeros_3 or zeros_4) and w;
 go_to_ones_2 <= ones_1 and w;
 go_to_ones_3 <= ones_2 and w;
 go_to_ones_4 <= (ones_3 or ones_4) and w;

 z <= ones_4 or zeros_4; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:29:35.563

我会为这样一个小任务编写更具可读性的代码：

```
library ieee;
use ieee.std_logic_1164.all;

entity part1 is 
port (
    clk     : in  std_logic;
    w       : in  std_logic;
    reset_n : in  std_logic; -- mark low active signals with suffix _n
    z       : out std_logic
);
end part1;

architecture rtl of part1 is
     signal sreg : std_logic_vector(3 downto 0);
begin
     process
     begin
         wait until rising_edge( clk);

         -- shift register
         sreg <= sreg(2 downto 0) & w;

         if sreg = "0000" or sreg = "1111" then
             z <= '1';
         else
             z <= '0';
         end if;

         -- do we really need a reset?
         if reset_n = '0' then
             sreg <= "0000";
         end if;
     end process;
end architecture rtl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:26:47.530

复位后，dflipflops 的所有输出都为“0”。

```
if reset <= '0' then 
    Q <= '0'; 
```

所以，A、B、C、D、E、F、G、H 和我都在“0”。

由于分配 Yn 信号的布尔逻辑，Yn 将始终为“0”。

例如

```
Y2 <= ((not w) and A); -- A is at '0' => Y2 will always be '0'. 
```

输出“z”将始终为“0”：

```
z <= (Y6 OR Y9); -- Y6 is always '0', Y9 is always '0' => Z will always be '0'. 
```

顺便说一句：注册组件的输出是一个很好的设计规则。我会把`z <= (Y6 OR Y9);`这个过程放在里面。

难道是dflipflop的输出在复位时必须是'1'？

# java - 为什么此代码会生成不正确的数据？

> ID：15103105
> 
> 赞同：0
> 
> 时间：2013-02-27T02:23:52.337
> 
> 标签：java, android, timestamp

我的项目中有这段代码

```
 Calendar subval = Calendar.getInstance();
    final int WOY= subval.WEEK_OF_YEAR; 
```

当我检查它的 WOY 值时，它现在输出 3，现在是 2013 年 2 月 25 日，我知道周数不是三。我存储此值以帮助设置自动刷新时间，以便我能够强制刷新以确保设备具有最新数据。在刷新期间，一些关键数据存储在本地。现在我需要一个可靠的固定时间段，如果一年中的一周与一年中的一周的存储值不同，我基本上每周选择一次设置数据，以便在下次机会时刷新，然后在设备上存储当前一周。我在 1 周内开始编写代码，所以我还没有过渡到新的一周，所以我不确定它是否正常工作，但三个的值让我害怕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T02:26:31.580

WEEK_OF_YEAR 是用于 get() 方法的标志。它的价值永远不会改变。你像这样使用它：

```
Calendar subval = Calendar.getInstance();
final int WOY= subval.get(Calendar.WEEK_OF_YEAR); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T02:25:57.033

[Calendar.WEEK_OF_YEAR](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#WEEK_OF_YEAR)是一个常量，用于指定从您的`Calendar`实例返回的字段。无需将值分配给固定值，您需要调用`Calendar#get`：

```
int WOY = subval.get(Calendar.WEEK_OF_YEAR); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T02:27:19.770

Calendar.WEEK_OF_YEAR 是一个静态常量。

你需要打电话`calendar.get(Calendar.WEEK_OF_YEAR)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T02:26:46.943

你需要像这样得到它

```
 Calendar subval = Calendar.getInstance();
   int year=subval.get(Calender.Calendar.WEEK_OF_YEAR); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T02:43:43.773

根据 java oracle 文档，子类定义一年中第一周前几天的 WEEK_OF_YEAR

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Calendar.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Calendar.html)

见：week_of_year

# python - Pyparsing 是否支持上下文相关语法？

> ID：15103106
> 
> 赞同：5
> 
> 时间：2013-02-27T02:23:52.843
> 
> 标签：python, parsing, pyparsing, ply

如果我有不正确的术语，请原谅我；也许仅仅用“正确”的词来描述我想要的就足以让我自己找到答案。

我正在开发 ODL（对象描述语言）的解析器，据我所知，这是一种神秘的语言，现在只有 NASA PDS（行星数据系统；这是 NASA 向公众提供其数据的方式）使用。幸运的是，PDS 终于转向 XML，但我仍然必须为在截止日期前落下的任务编写软件。

ODL 以类似以下方式定义对象：

```
OBJECT              = TABLE
  ROWS              = 128
  ROW_BYTES         = 512 
END_OBJECT          = TABLE 
```

我正在尝试使用 编写解析器`pyparsing`，并且在进行上述构造之前我做得很好。

我必须创建一些规则，以确保 OBJECT 行的右侧值与 END_OBJECT 的 RHV 相同。但我似乎无法将其纳入`pyparsing`规则。我可以确保两者都是语法上有效的值，但我不能采取额外的步骤来确保值相同。

1.  我的直觉是否正确，这是一种上下文相关的语法？这是我应该用来描述这个问题的短语吗？
2.  无论是理论上的哪种语法，都`pyparsing`能够处理这种结构吗？
3.  如果`pyparsing`无法处理它，是否有另一个 Python 工具能够这样做？怎么样（ /`ply`的 Python 实现）？`lex``yacc`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T04:23:25.257

它实际上是一种上下文敏感语言的语法，经典地抽象为`wcw`w 在 (a|b)* 中的位置（请注意`wcw'`，`'`表示反转的，是上下文无关的）。

解析表达式语法能够通过使用语义谓词来解析 wcw 类型的语言。PyParsing 为此目的提供了`matchPreviousExpr()`和`matchPreviousLiteral()`辅助方法，例如

```
w = Word("ab")
s = w + "c" + matchPreviousExpr(w) 
```

所以在你的情况下，你可能会做类似的事情

```
table_name = Word(alphas, alphanums)
object = Literal("OBJECT") + "=" + table_name + ... +
  Literal("END_OBJECT") + "=" +matchPreviousExpr(table_name) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T03:47:58.563

作为一般规则，解析器被构建为上下文无关的解析引擎。如果存在上下文敏感性，则在解析后（或至少在相关解析步骤完成后）进行嫁接。

在您的情况下，您想编写上下文无关的语法规则：

```
 head = 'OBJECT' '=' IDENTIFIER ;
  tail = 'END_OBJECT'  '=' IDENTIFIER ;
  element = IDENTIFIER '=' value ;
  element_list = element ;
  element_list = element_list element ;
  block = head element_list tail ; 
```

检查头部和尾部构造是否具有匹配的标识符在技术上不是由解析器完成的。

然而，许多解析器允许在识别句法元素时发生语义动作，通常是为了构建树节点。在您的情况下，您希望使用它来启用额外的检查。对于*element*，您要确保*IDENTIFIER*不是块中已有内容的副本；这意味着对于遇到的每个*元素*，您都需要捕获相应的*IDENTIFIER*并制作一个特定于块的列表以启用重复检查。对于块，您要捕获*头部**IDENTIFIER*，并检查它是否与*尾部**IDENTIFIER* 匹配。

如果您在进行过程中构建表示解析的树，并将各种上下文相关值挂在树上的各个位置（例如，将实际*IDENTIFIER*值附加到*head*子句的树节点），这是最简单的。在为*尾部*构造构建树节点时，应该很简单地沿着树向上走，找到*头*树，然后比较标识符。

如果您想象首先构建整个树，然后对树进行后处理传递来进行此检查，那么这更容易考虑。懒惰的人实际上是这样做的：-} 我们所做的只是将可以在后处理步骤中完成的工作推入附加到语义动作的树构建步骤中。

这些概念都不是特定于 python 的，PyParsing 的细节会有所不同。

# mysql - Mysql 按时间聚类结果分组

> ID：15103108
> 
> 赞同：0
> 
> 时间：2013-02-27T02:24:34.593
> 
> 标签：mysql, sql

我在一个带有随机条目的 mysql 表中有一个 DATETIME 字段。我想选择对象组，并在有四个小时的间隔时将它们分开。理想情况下，我可以返回数组（或子组？）中每个组内的所有 ID。

这似乎超出了我的 SQL 技能。

有什么有趣的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:18:07.880

您可以使用 MySQL`DATE_FORMAT`子句。

**例子**

```
SELECT CAST(DATE_FORMAT(date,'%Y-%m-%d %k:00:00') AS DATETIME) hour
  FROM table
 WHERE date = CURRENT_DATE - INTERVAL 4 HOUR
  GROUP BY CAST(DATE_FORMAT(date,'%Y-%m-%d %k:00:00') AS DATETIME) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:38:20.603

SQL 旨在对数据执行集合操作，而您所要求的涉及顺序处理。

所以，我建议按顺序处理它，而不是试图扭曲 SQL 来尝试这样做。我相信你有两个基本的选择：

1.  在存储过程中从表中选择数据，使用游标处理结果。

2.  从您选择的外部独立语言（Java、C#、Python、PHP ......无论您喜欢什么）执行一个 select 语句，并在那里对数据进行适当的分组。

# module - 如何为自定义模块设置自定义主题？

> ID：15103109
> 
> 赞同：0
> 
> 时间：2013-02-27T02:24:38.393
> 
> 标签：module, themes, sugarcrm

我是 Sugar 的新手，我已经创建了我的自定义模块。我想知道如何为我的自定义模块设置自定义主题。这意味着该主题仅适用于我的模块。我正在使用 SugarCE-6.5.9。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T13:18:53.230

创建以下文件夹结构：/custom/themes/custom.less。在 custom.less 文件中，您可以添加自己的 css 样式。请注意，这适用于 SugarCRM 7。我没有在 SugarCRM 6 上测试过。

# c# - 在 .NET Framework 中获取国家/地区调用代码

> ID：15103113
> 
> 赞同：2
> 
> 时间：2013-02-27T02:25:17.683
> 
> 标签：c#, .net, internationalization

在我的程序中，我需要获取特定国家/地区的货币符号和国家/地区呼叫代码。

我可以从 RegionInfo 类中获取货币符号

```
new RegionInfo(abbreviation).CurrencySymbol 
```

但我找不到从 .NET Framework 获取国家/地区调用代码的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-04-11T23:35:05.907

对于原始海报来说已经晚了几年，但是如果有人偶然发现这个并想要一些代码来保存自己创建一个来自维基百科的拨号代码列表，一个开源项目（我的）有这个 C# 文件：

[https://github.com/mcshaz/SimPlanner/blob/master/SP.DTOs/ProcessBreezeRequests/ISO3166.cs](https://github.com/mcshaz/SimPlanner/blob/master/SP.DTOs/ProcessBreezeRequests/ISO3166.cs)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-20T17:17:59.380

```
 public List<CountryTelCode> TelCodes { get; set; }
        //*****************************************************************
        public class CountryTelCode
        //*****************************************************************
        {
            public string Pfx { get; set; }
            public  string Iso { get; set; }
            public int Priority { get; set; }

            public CountryTelCode(string pfx, string iso, int priority = 0)
            {
                Pfx = pfx;
                Iso = iso;
                Priority = priority;
            }
        }

        //-----------------------------------------------------------------
        public void InitTelCodes()
        //-----------------------------------------------------------------
        {

            TelCodes = new List<CountryTelCode>
            {
                  new CountryTelCode("+93", "AF"),
        new CountryTelCode("+355", "AL"),
        new CountryTelCode("+213", "DZ"),
        new CountryTelCode("+1-684", "AS"),
        new CountryTelCode("+376", "AD"),
        new CountryTelCode("+244", "AO"),
        new CountryTelCode("+1-264", "AI"),
        new CountryTelCode("+672", "AQ"),
        new CountryTelCode("+1-268", "AG"),
        new CountryTelCode("+54", "AR"),
        new CountryTelCode("+374", "AM"),
        new CountryTelCode("+297", "AW"),
        new CountryTelCode("+61", "AU"),
        new CountryTelCode("+43", "AT"),
        new CountryTelCode("+994", "AZ"),
        new CountryTelCode("+1-242", "BS"),
        new CountryTelCode("+973", "BH"),
        new CountryTelCode("+880", "BD"),
        new CountryTelCode("+1-246", "BB"),
        new CountryTelCode("+375", "BY"),
        new CountryTelCode("+32", "BE"),
        new CountryTelCode("+501", "BZ"),
        new CountryTelCode("+229", "BJ"),
        new CountryTelCode("+1-441", "BM"),
        new CountryTelCode("+975", "BT"),
        new CountryTelCode("+591", "BO"),
        new CountryTelCode("+387", "BA"),
        new CountryTelCode("+267", "BW"),
        new CountryTelCode("+55", "BR"),
        new CountryTelCode("+246", "IO"),
        new CountryTelCode("+1-284", "VG"),
        new CountryTelCode("+673", "BN"),
        new CountryTelCode("+359", "BG"),
        new CountryTelCode("+226", "BF"),
        new CountryTelCode("+257", "BI"),
        new CountryTelCode("+855", "KH"),
        new CountryTelCode("+237", "CM"),
        new CountryTelCode("+1", "CA"),
        new CountryTelCode("+238", "CV"),
        new CountryTelCode("+1-345", "KY"),
        new CountryTelCode("+236", "CF"),
        new CountryTelCode("+235", "TD"),
        new CountryTelCode("+56", "CL"),
        new CountryTelCode("+86", "CN"),
        new CountryTelCode("+61", "CX"),
        new CountryTelCode("+61", "CC"),
        new CountryTelCode("+57", "CO"),
        new CountryTelCode("+269", "KM"),
        new CountryTelCode("+682", "CK"),
        new CountryTelCode("+506", "CR"),
        new CountryTelCode("+385", "HR"),
        new CountryTelCode("+53", "CU"),
        new CountryTelCode("+599", "CW"),
        new CountryTelCode("+357", "CY"),
        new CountryTelCode("+420", "CZ"),
        new CountryTelCode("+243", "CD"),
        new CountryTelCode("+45", "DK"),
        new CountryTelCode("+253", "DJ"),
        new CountryTelCode("+1-767", "DM"),
        new CountryTelCode("+1-809", "DO"),
        new CountryTelCode("+1-829", "DO"),
        new CountryTelCode("+1-849", "DO"),
        new CountryTelCode("+670", "TL"),
        new CountryTelCode("+593", "EC"),
        new CountryTelCode("+20", "EG"),
        new CountryTelCode("+503", "SV"),
        new CountryTelCode("+240", "GQ"),
        new CountryTelCode("+291", "ER"),
        new CountryTelCode("+372", "EE"),
        new CountryTelCode("+251", "ET"),
        new CountryTelCode("+500", "FK"),
        new CountryTelCode("+298", "FO"),
        new CountryTelCode("+679", "FJ"),
        new CountryTelCode("+358", "FI"),
        new CountryTelCode("+33", "FR"),
        new CountryTelCode("+689", "PF"),
        new CountryTelCode("+241", "GA"),
        new CountryTelCode("+220", "GM"),
        new CountryTelCode("+995", "GE"),
        new CountryTelCode("+49", "DE"),
        new CountryTelCode("+233", "GH"),
        new CountryTelCode("+350", "GI"),
        new CountryTelCode("+30", "GR"),
        new CountryTelCode("+299", "GL"),
        new CountryTelCode("+1-473", "GD"),
        new CountryTelCode("+1-671", "GU"),
        new CountryTelCode("+502", "GT"),
        new CountryTelCode("+44-1481", "GG"),
        new CountryTelCode("+224", "GN"),
        new CountryTelCode("+245", "GW"),
        new CountryTelCode("+592", "GY"),
        new CountryTelCode("+509", "HT"),
        new CountryTelCode("+504", "HN"),
        new CountryTelCode("+852", "HK"),
        new CountryTelCode("+36", "HU"),
        new CountryTelCode("+354", "IS"),
        new CountryTelCode("+91", "IN"),
        new CountryTelCode("+62", "ID"),
        new CountryTelCode("+98", "IR"),
        new CountryTelCode("+964", "IQ"),
        new CountryTelCode("+353", "IE"),
        new CountryTelCode("+44-1624", "IM"),
        new CountryTelCode("+972", "IL"),
        new CountryTelCode("+39", "IT"),
        new CountryTelCode("+225", "CI"),
        new CountryTelCode("+1-876", "JM"),
        new CountryTelCode("+81", "JP"),
        new CountryTelCode("+44-1534", "JE"),
        new CountryTelCode("+962", "JO"),
        new CountryTelCode("+7", "KZ"),
        new CountryTelCode("+254", "KE"),
        new CountryTelCode("+686", "KI"),
        new CountryTelCode("+383", "XK"),
        new CountryTelCode("+965", "KW"),
        new CountryTelCode("+996", "KG"),
        new CountryTelCode("+856", "LA"),
        new CountryTelCode("+371", "LV"),
        new CountryTelCode("+961", "LB"),
        new CountryTelCode("+266", "LS"),
        new CountryTelCode("+231", "LR"),
        new CountryTelCode("+218", "LY"),
        new CountryTelCode("+423", "LI"),
        new CountryTelCode("+370", "LT"),
        new CountryTelCode("+352", "LU"),
        new CountryTelCode("+853", "MO"),
        new CountryTelCode("+389", "MK"),
        new CountryTelCode("+261", "MG"),
        new CountryTelCode("+265", "MW"),
        new CountryTelCode("+60", "MY"),
        new CountryTelCode("+960", "MV"),
        new CountryTelCode("+223", "ML"),
        new CountryTelCode("+356", "MT"),
        new CountryTelCode("+692", "MH"),
        new CountryTelCode("+222", "MR"),
        new CountryTelCode("+230", "MU"),
        new CountryTelCode("+262", "YT"),
        new CountryTelCode("+52", "MX"),
        new CountryTelCode("+691", "FM"),
        new CountryTelCode("+373", "MD"),
        new CountryTelCode("+377", "MC"),
        new CountryTelCode("+976", "MN"),
        new CountryTelCode("+382", "ME"),
        new CountryTelCode("+1-664", "MS"),
        new CountryTelCode("+212", "MA"),
        new CountryTelCode("+258", "MZ"),
        new CountryTelCode("+95", "MM"),
        new CountryTelCode("+264", "NA"),
        new CountryTelCode("+674", "NR"),
        new CountryTelCode("+977", "NP"),
        new CountryTelCode("+31", "NL"),
        new CountryTelCode("+599", "AN"),
        new CountryTelCode("+687", "NC"),
        new CountryTelCode("+64", "NZ"),
        new CountryTelCode("+505", "NI"),
        new CountryTelCode("+227", "NE"),
        new CountryTelCode("+234", "NG"),
        new CountryTelCode("+683", "NU"),
        new CountryTelCode("+850", "KP"),
        new CountryTelCode("+1-670", "MP"),
        new CountryTelCode("+47", "NO"),
        new CountryTelCode("+968", "OM"),
        new CountryTelCode("+92", "PK"),
        new CountryTelCode("+680", "PW"),
        new CountryTelCode("+970", "PS"),
        new CountryTelCode("+507", "PA"),
        new CountryTelCode("+675", "PG"),
        new CountryTelCode("+595", "PY"),
        new CountryTelCode("+51", "PE"),
        new CountryTelCode("+63", "PH"),
        new CountryTelCode("+64", "PN"),
        new CountryTelCode("+48", "PL"),
        new CountryTelCode("+351", "PT"),
        new CountryTelCode("+1-787", "PR"),
        new CountryTelCode("+1-939", "PR"),
        new CountryTelCode("+974", "QA"),
        new CountryTelCode("+242", "CG"),
        new CountryTelCode("+262", "RE"),
        new CountryTelCode("+40", "RO"),
        new CountryTelCode("+7", "RU"),
        new CountryTelCode("+250", "RW"),
        new CountryTelCode("+590", "BL"),
        new CountryTelCode("+290", "SH"),
        new CountryTelCode("+1-869", "KN"),
        new CountryTelCode("+1-758", "LC"),
        new CountryTelCode("+590", "MF"),
        new CountryTelCode("+508", "PM"),
        new CountryTelCode("+1-784", "VC"),
        new CountryTelCode("+685", "WS"),
        new CountryTelCode("+378", "SM"),
        new CountryTelCode("+239", "ST"),
        new CountryTelCode("+966", "SA"),
        new CountryTelCode("+221", "SN"),
        new CountryTelCode("+381", "RS"),
        new CountryTelCode("+248", "SC"),
        new CountryTelCode("+232", "SL"),
        new CountryTelCode("+65", "SG"),
        new CountryTelCode("+1-721", "SX"),
        new CountryTelCode("+421", "SK"),
        new CountryTelCode("+386", "SI"),
        new CountryTelCode("+677", "SB"),
        new CountryTelCode("+252", "SO"),
        new CountryTelCode("+27", "ZA"),
        new CountryTelCode("+82", "KR"),
        new CountryTelCode("+211", "SS"),
        new CountryTelCode("+34", "ES"),
        new CountryTelCode("+94", "LK"),
        new CountryTelCode("+249", "SD"),
        new CountryTelCode("+597", "SR"),
        new CountryTelCode("+47", "SJ"),
        new CountryTelCode("+268", "SZ"),
        new CountryTelCode("+46", "SE"),
        new CountryTelCode("+41", "CH"),
        new CountryTelCode("+963", "SY"),
        new CountryTelCode("+886", "TW"),
        new CountryTelCode("+992", "TJ"),
        new CountryTelCode("+255", "TZ"),
        new CountryTelCode("+66", "TH"),
        new CountryTelCode("+228", "TG"),
        new CountryTelCode("+690", "TK"),
        new CountryTelCode("+676", "TO"),
        new CountryTelCode("+1-868", "TT"),
        new CountryTelCode("+216", "TN"),
        new CountryTelCode("+90", "TR"),
        new CountryTelCode("+993", "TM"),
        new CountryTelCode("+1-649", "TC"),
        new CountryTelCode("+688", "TV"),
        new CountryTelCode("+1-340", "VI"),
        new CountryTelCode("+256", "UG"),
        new CountryTelCode("+380", "UA"),
        new CountryTelCode("+971", "AE"),
        new CountryTelCode("+44", "GB"),
        new CountryTelCode("+1", "US"),
        new CountryTelCode("+598", "UY"),
        new CountryTelCode("+998", "UZ"),
        new CountryTelCode("+678", "VU"),
        new CountryTelCode("+379", "VA"),
        new CountryTelCode("+58", "VE"),
        new CountryTelCode("+84", "VN"),
        new CountryTelCode("+681", "WF"),
        new CountryTelCode("+212", "EH"),
        new CountryTelCode("+967", "YE"),
        new CountryTelCode("+260", "ZM"),
        new CountryTelCode("+263", "ZW"),

            };

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T02:33:26.637

如果您正在谈论电话呼叫代码，则必须建立一个查找表。

我建议查看此调用代码列表：[Wikipedia](http://en.wikipedia.org/wiki/List_of_country_calling_codes)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-17T08:42:54.613

还有一个非常方便的 ReST API。我建议将数据本地复制到 json 文件或其他文件中，而不是依赖第三方服务。

获取[https://restcountries.eu/rest/v2/all](https://restcountries.eu/rest/v2/all)

# php - 您如何知道您的 Web 应用程序是在 Facebook 内部（画布）还是外部（独立）打开？

> ID：15103114
> 
> 赞同：1
> 
> 时间：2013-02-27T02:25:19.577
> 
> 标签：php, facebook, facebook-canvas

我正在用 PHP 为我的应用程序创建一个登录页面。我的应用程序使用 fconnect 登录。现在，

如果我单独打开 Web 应用程序 (www.acdef.com)，它应该显示 fconnect 登录。如果它在 facebook (apps.facebook.com/myapp) 中打开，它不应该显示 fconnect 登录，并且根据哪个用户，应该显示 fb 权限或应用登录页面。这是我所做的

```
if( (isset($_SERVER['HTTP_REFEREER']) && strpos($_SERVER['HTTP_REFEREER'], "facebook.com") !==false) || (isset($this->request->get['ref']) && strpos($this->request->get['ref'], "facebook.com") !==false))
{ 
   // I am in canvass
}
{
   // I am not in canvass
} 
```

但是，它并不总是有效。很多时候，即使在画布中，我也会看到 fblogin 按钮。

什么是最好的解决方案？

-阿杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:43:01.807

如果您的应用是在画布内打开的，那么您已经`$_REQUEST['signed_request']`设置好了。

```
if( isset($_REQUEST['signed_request']) )
{ 
   // I am in canvass
}
else
{
   // I am not in canvass
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T09:38:32.760

您可以检查应用程序是否在`iframe`（fb 画布）中并采取相应的行动：

```
<script type="text/javascript"> 
    if(window==window.top){ 
        top.location.href = '<?=$redirect_url?>';
    } 
</script> 
```

# javascript - 使用 jQuery 更改 jTicker 消息

> ID：15103117
> 
> 赞同：0
> 
> 时间：2013-02-27T02:25:39.767
> 
> 标签：javascript, jquery, html, message, ticker

嘿，所以我正在尝试使用 jTicker 说出可以对用户输入做出反应的消息。jTicker 的工作方式，它影响 html 元素标签之间的文本。

在这个例子中，我正在尝试使用 jQuery 来修改一组特定的标签之间的文本，这些标签是多少？通过 jTicker。问题是每当我尝试更改文本时，jTicker 只使用页面首次加载时标签之间的文本，而不是新文本。如何修复此代码，以便可以即时更改 jTicker 正在影响的文本？

Javascript：

```
<script src="jquery.jticker.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $("#messageId").ticker({
            rate: 40,
            delay: 900,
            transition: "fade",
        });
        $(".stop").click(function(){
            $("#messageId").trigger("stop");
            return false;
        });
        $(".play").click(function(){
            $("#messageId").trigger("play");
            return false;
        }); 
    });

function test() {
    $('#theMessage').text('New text!');
}
</script> 
```

html:

```
<body>
    <div id="messageId">
        <p id="theMessage">Old text</p>
    </div>
    <div>
        <input type="button" value="Test"
        class="play" onClick="test();" />
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:41:27.713

```
function test() {
    $('#theMessage').text($("#messageId").text());
} 
```

# wpf - 未使用样式设置 WPF TextBlock 背景

> ID：15103129
> 
> 赞同：0
> 
> 时间：2013-02-27T02:27:05.697
> 
> 标签：wpf, textblock

我正在学习 WPF。我试图申请`Background`和`Foreground`使用`TextBlock`. `Style.Trigger`根据我的定义`Trigger`，我可以注意到 Foreground 正在更改`MouseOver`，但不是`Background`。你能帮忙吗？下面是我的 XAML：

```
<Window x:Class="WpfApplication1.ApplyingStyle"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ApplyingStyle"
        Height="300"
        Width="300">
  <Window.Resources>
    <Style x:Key="myStyle">
      <Setter Property="Control.Background"
              Value="Red" />
      <Setter Property="Control.FontFamily"
              Value="Times New Roman" />
      <Setter Property="Control.FontSize"
              Value="25" />
      <Style.Triggers>
        <Trigger Property="Control.IsMouseOver"
                 Value="True">
          <Setter Property="Control.Foreground"
                  Value="HotPink" />
          <Setter Property="Control.Background"
                  Value="Blue" />
        </Trigger>
      </Style.Triggers>
    </Style>
  </Window.Resources>
  <Grid ShowGridLines="True">
    <Grid.RowDefinitions>
      <RowDefinition   Height="*" />
      <RowDefinition />
      <RowDefinition />
    </Grid.RowDefinitions>
    <TextBlock Name="myTextBlock"
               Grid.Row="1"
               Grid.Column="0"
               Style="{StaticResource myStyle}">Hello</TextBlock>
  </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:03:51.627

我建议使用`Style.TargetType`，这允许

1.  缩短`Setter.Property`值
2.  防止正常属性和附加属性之间的歧义
3.  如果目标类型实际上具有该属性，则获取一些 IDE 验证

`TextBlock`不是这就是为什么这不起作用*。*`Control`使用`TargetType="TextBlock"`并更改`Control.Background`为`Background`或使用`TextBlock.Background`.

（在使用样式时还要注意[值优先级](https://msdn.microsoft.com/en-us/library/ms743230%28v=vs.100%29.aspx)，如果您`Background`在其`TextBlock`本身上设置了，则您有一个完全覆盖样式的**本地值）**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:58:52.823

尝试使用您尝试在样式声明中应用样式的控件类型，而不是使用`Control.Background`use`TextBlock.Background`或仅将 设置`TargetType`为`TextBlock`。当我将您的样式设置为这样时，它似乎起作用了。

```
<Window x:Class="WpfApplication1.ApplyingStyle"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ApplyingStyle" Height="300" Width="300">
    <Window.Resources>
        <Style x:Key="myStyle" TargetType="TextBlock">
            <Setter Property="Background" Value="Red" />
            <Setter Property="FontFamily" Value="Times New Roman" />
            <Setter Property="FontSize" Value="25" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True"  >
                    <Setter Property="Background" Value="Blue" />
                    <Setter Property="Foreground" Value="HotPink" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid ShowGridLines="True" >
        <Grid.RowDefinitions>
            <RowDefinition   Height="*" />
            <RowDefinition/>
            <RowDefinition />
        </Grid.RowDefinitions>

        <TextBlock Name="myTextBlock"  
                   Grid.Row="1" 
                   Grid.Column="0" 
                   Style="{StaticResource myStyle}">Hello</TextBlock>
    </Grid>
</Window> 
```

# information-retrieval - 移除 pagerank 中的 sink 节点

> ID：15103130
> 
> 赞同：0
> 
> 时间：2013-02-27T02:27:14.587
> 
> 标签：information-retrieval, pagerank

为什么在考虑使用 pagerank 算法的页面重要性的同时，我们不完全删除 sink 节点？为什么我们关心汇节点并考虑Z矩阵以补偿概率转移矩阵M中的所有零列（汇）？如果保留它们有什么重要原因，谁能告诉它是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:33:12.823

它可能包含真实或虚假信息，我们无法确定使用算法

# jquery - 基本 jQuery Slider (bjqs) 响应问题

> ID：15103132
> 
> 赞同：6
> 
> 时间：2013-02-27T02:27:24.843
> 
> 标签：jquery, css, slider

我正在使用这个[Basic jQuery Slider](http://basic-slider.com/) (bjqs) 并试图让它响应式地工作。他们的变更日志说它的响应能力处于“测试版”，所以我猜这就是它有点古怪的原因。

这是我正在实现的滑块的网址：http: [//test.hetzelcreative.com/hybrid/](http://test.hetzelcreative.com/hybrid/)

它基本上有两个问题，它们都与以小屏幕尺寸（手机宽度）加载页面有关：

1.  图像不按比例加载，也不适合 100%
2.  当您调整浏览器的大小时，定位变得一团糟，甚至开始复制图像并垂直堆叠它们。页面刷新可以解决这个问题，但这当然是不可接受的

此外，`bjqs-1.3.min.js`我将宽度设置为 854 像素，高度设置为 481 像素。它最初设置为 400x300 或其他东西。我想知道这是否是我问题的根源。如果我删除了那些 w & h 属性，尽管整个事情都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-24T07:02:11.007

我有类似的问题（关于调整浏览器窗口的大小） - 但最后我已经修复了它（或破解，你的名字）：

当您初始化插件时，您可以定义`width`滑块的尺寸（例如） - 您应该在那里放置最大可能的值，因为它将是您页面上单个幻灯片的*最大*尺寸（遗憾的是官方文档没有描述它这种方式） - 所以它应该是你的（设备）屏幕尺寸：

```
width: window.screen.width, 
```

并且不要忘记让它响应：

```
responsive: true, 
```

并且在滑块初始化之后（它可以放在文档的末尾）你应该触发`resize`事件来调整你的滑块到当前浏览器的大小（因为如果窗口不会被最大化，滑块会比它更大并且在 100 中不可见%):

```
$(window).trigger('resize'); 
```

它适用于我最新的 firefox 和 chrome - 未在 IE 和其他东西上测试。

PS。如果您使用滑块分页项目符号并且您希望它们保持水平居中您应该在触发调整大小事件之前添加此代码：

```
$(window).resize(function(){
  $('yourSliderId .bjqs-markers.h-centered').css({'left':0});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T15:16:45.037

我遇到的问题是，除了在较小的屏幕上（例如智能手机）上的初始负载之外，我的所有内容都可以响应式地工作。当我缩小屏幕时，您可以在浏览器中看到问题。不过，当我调整窗口大小时，它会被修复。它只是在初始负载上不起作用。

我找到了一个对我有用的修复程序。我抓住了 bjqs-1.3.js 的未缩小版本并快速添加。第 175 行是这样开始的：

```
var conf_responsive = function() { 
```

然后`if`在该函数中有一个语句说：

```
if(settings.animtype === 'slide'){ 
```

我在那个声明中放了一些东西`if`，因为我的动画类型是“幻灯片”。`if(settings.animtype === 'fade'){`如果您使用淡入淡出，您可能必须对条件执行类似的操作。

但无论如何，如果有条件，在 之下`$(window).resize(function() {})`，我这样称呼它：

```
$(document).ready(
function() {
$(window).trigger('resize'); 
 }
); 
```

这似乎解决了我遇到的问题。不确定这与此处发布的问题完全相同，但它可能会帮助寻找相关问题的解决方案的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T14:50:23.477

我在几个不同的浏览器中试了一下。我会说它在响应能力方面有不止一两个小错误。

与尝试解决所有问题相比，bjqs 您是否考虑过寻找从一开始就为响应而设计的问题？

*   **[SequenceJS](http://www.sequencejs.com/)**，看起来非常活跃，并且有大量的 github 关注
*   **[FlexSlider](https://github.com/woothemes/FlexSlider)**，也有大量的 github 关注，但问题列表看起来有点长，具体取决于您所针对的浏览器/等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-18T13:49:40.743

For those who look for the solution, here it is :

take the solution above to fix the width problem

for the height problem, just apply a x factor existing between the height and the width

example : if your slider images are twice larger than longer then apply this :

```
$(function () {
    $('#banner-slide').bjqs({
        animtype: 'slide',
        width: $("#banner-slide").width(),
        height: $("#banner-slide").width() /2,
        responsive: true,
        randomstart: true
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T14:25:10.807

我建议设置滑块类的宽度以匹配插件的最大宽度。

即在这种情况下你有它在 100%，它应该是 854px。

然后添加`overflow:hidden;`到滑块类，这样你就不会得到你所说的堆栈效果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-22T18:07:27.983

要解决宽度问题，您可以在初始化中获取容器 div 宽度：

```
$(function () {
    $('#banner-slide').bjqs({
        animtype: 'slide',
        height: 445,
        width: $("#banner-slide").width(),
        responsive: true,
        randomstart: true
    });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T17:23:13.077

由于时间限制，我没有深入研究过剧本。但是，我要做的是确保脚本位于具有设定宽度和高度的包装器中。然后将脚本设置为 100% 宽度和 100% 高度。

# php - Laravel 大规模作业

> ID：15103138
> 
> 赞同：1
> 
> 时间：2013-02-27T02:28:00.880
> 
> 标签：php, laravel

Yii 提供了一种对模型进行大规模分配的便捷方式。我在谷歌上搜索，找不到任何关于 Laravel 大规模分配的信息。那么，Laravel 是否提供相同的功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T03:08:26.033

是的：http: [//laravel.com/docs/eloquent#mass-assignment](http://laravel.com/docs/eloquent#mass-assignment)

但请绝对确保将您的属性列入白名单，否则您将面临严重的安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:43:30.780

我还没有尝试过 laravel，但是快速浏览一下 github 告诉我有一个功能：

```
 /**
 * Hydrate the model with an array of attributes.
 *
 * @param  array  $attributes
 * @param  bool   $raw
 * @return Model
 */
public function fill(array $attributes, $raw = false) 
```

我想你可以做类似的事情

`$product->fill($_POST['Product']);`

就像你`$product->attributes = $_POST['Product']`在 Yii做的那样

# android - 如何在 Facebook 应用程序的消息部分添加类似加号按钮的按钮？

> ID：15103139
> 
> 赞同：-5
> 
> 时间：2013-02-27T02:28:06.340
> 
> 标签：android

我想添加固定位置的按钮，即使我向下或向上滚动它的位置也不会像屏幕右下角的蓝色加号按钮那样改变。

![在此处输入图像描述](../Images/6cdfd5b4d7fc94780b190ff40506c2b2.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:29:43.647

不要将按钮保留在 ScrollView 中并在 google 中下载相同类型的图像并将其设置为按钮的背景资源..

# javascript - WebView saveState() 是否保留 Javascript 变量/环境？

> ID：15103141
> 
> 赞同：7
> 
> 时间：2013-02-27T02:28:33.423
> 
> 标签：javascript, android, variables, webview, savestate

我已经搜索了很多线程，但仍然找不到我的问题的答案。我正在开发一个`Android`使用`WebView`.

我使用`onSaveInstanceState()`and`onRestoreInstanceState()`来保存这样的`WebView`状态：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    webView.saveState(savedInstanceState);
} 
```

和

```
@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    webView.restoreState(savedInstanceState);
} 
```

我的也有这个`onCreate()`：

```
public void onCreate(Bundle savedInstanceState) {
    ... other code ...
    if(savedInstanceState != null){
        webView.saveState(savedInstanceState);
    }else{
        webView.loadUrl("http://mypage");
    }
} 
```

**问题：**似乎恢复`WebView`根本不会恢复`Javascript`变量/环境/工作区。当应用程序在后台被杀死然后恢复时，整个 Javascript 以及所有对象/变量都消失了。javascript 代码是名称空间的，即`window.utilitiesPack`, `window.eventHandlers`,`window.automation`等，它们是未定义的。还`JQuery`使用了其他 javascript 插件：在恢复状态后，它们似乎都未定义。基本上整个Javascript都没有恢复。

有人可以确认或反驳这就是它的真实情况（未保存Javascript）吗？如果没有保存整个 Javascript 工作区，那么究竟`WebView.saveState()`保存了什么？是否有一些简单/优雅的方法可以使用现有 API 来保留 Javascript 对象？

//================================================= ======

**Update1：**​​所以问题仍然存在。最大的困难在于：

我正在启动相机`Intent`以获得结果。拍照后，应用程序恢复`WebView`活动，并应该使用 Javascript`LocalStorage`使用一些数据变量更新 HTML5。

在显示 Camera Activity 时，主 Activity`WebView`被杀死，所以当我们回到 WebView 时，不再有 Javascript，也没有我可以从 Android 代码调用的函数。每次都会发生这种情况`Galaxy S3`。它仍然发生在其他手机上，但并非每次都在拍照时发生。

不知道在这里做什么。不知何故，我必须使用 WebView 制作主 Activity，以在使用 Camera Intent 拍摄照片时保留状态。有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-26T20:05:28.183

正如 user2113581 评论的那样，将 WebView 移动到应用程序的上下文而不是 Activity 是一个潜在的解决方案。这仍然有 user2113581 提到的所有缺陷，包括`<select>`不工作（因为它创建了一个窗口，但应用程序上下文没有窗口令牌）。

我已经扩展了我的应用程序来管理我的 webview...

我的应用程序.java：

```
public class MyApplication extends Application {
  private WebView mWebView;
  private boolean mWebViewInitialized;
  // ...

  @Override public void onCreate() {
    super.onCreate();
    mWebView = new WebView(this);
    mWebViewInitialized = false; // we do some initialization once in our activity.
  }

  public WebView getWebView() { return mWebView; }
  public boolean isWebViewInitialized() { return mWebViewInitialized; }
  public void setWebViewInitialized(boolean initialized) {
    mWebViewInitialized = initialized;
  }
} 
```

在我们的活动中：

```
@Override protected void onCreate(Bundle savedInstanceState) {
  // ...
  MyApplication app = (MyApplication) getApplication();
  mWebView = app.getWebView();
  if (!app.isWebViewInitialized()) { 
    /* first time initialization */ 
    app.setWebViewInitialized(true);
  }
} 
```

最后，在您的 Activity 中，您将希望在`mWebView`有意义的生命周期事件期间将其添加到容器视图（FrameLayout 或类似）。当活动被暂停或停止时，您需要将其从容器中删除。我用过`onResume`，`onPause`效果很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-09T08:44:59.717

找到的信息很少，只有这一行：

> 请注意，此方法不再存储此 WebView 的显示数据。如果从不调用 restoreState(Bundle)，则先前的行为可能会泄漏文件。

这行：

> 返回用于保存状态的后退/前进列表的相同副本。

在 javadoc 中为[`WebView.saveState(Bundle)`](http://developer.android.com/reference/android/webkit/WebView.html#saveState(android.os.Bundle)).

# php - 合并后php数组按日期排序

> ID：15103142
> 
> 赞同：0
> 
> 时间：2013-02-27T02:29:02.680
> 
> 标签：php, arrays, sorting

嗨，我有一个数组，它是 2 个独立数组的组合，产生相同的结果，以下是合并后的数组：

```
Array
(
    [0] => Array
        (
            [event_id] => 16
            [user_id] => 3
            [date_created] => 20130227095010

        )

    [1] => Array
        (
            [event_id] => 15
            [user_id] => 2
            [date_created] => 20130227101734

        )

    [2] => Array
        (
            [event_id] => 16
            [user_id] => 2
            [date_created] => 20130227094856

        )

) 
```

从这里开始，如何在不使用之前合并的 2 个数组的情况下根据 date_created desc 或 asc 再次排序？

更新：先前的数组结果

数组1：

```
Array
(
    [0] => Array
        (
            [event_id] => 15
            [user_id] => 2
            [date_created] => 20130227101734

        )

    [1] => Array
        (
            [event_id] => 16
            [user_id] => 2
            [date_created] => 20130227094856

        )

) 
```

数组 2：

```
Array
(
    [0] => Array
        (
            [event_id] => 16
            [user_id] => 3
            [date_created] => 20130227095010

        )

) 
```

我如何在这些函数中使用循环来为上述每个数组提取 date_created

```
usort($array,function($a, $b) { return $a['date_created'] - $b['date_created']; }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:31:53.363

很容易用类似的东西[`usort()`](http://php.net/manual/en/function.usort.php)。

```
usort($array,
      function($a, $b) { return $a['date_created'] - $b['date_created']; }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:31:33.583

您可以创建自己的**排序函数回调**并将其与`usort`方法一起使用。需要重新使用前 2 个数组。

```
usort($yourMergedArray, yourCallBackSort); 
```

和

```
function yourCallBackSort($firstEntry, $secondEntry)
{
    // Do some stuff to compare your values and return -1, 0 or 1
    // depend if $firstEntry id <, = or > to $secondEntry
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:38:55.120

尝试这个，

```
$sort = array();
foreach($your_combined_array as $k=>$v) {
    $sort['date_created'][$k] = $v['date_created'];
}

array_multisort($sort['date_created'], SORT_DESC, $your_combined_array);

echo "<pre>";
print_r($your_combined_array); 
```

# java - 将 CSV 文件转换为 2D 数组 Java

> ID：15103153
> 
> 赞同：0
> 
> 时间：2013-02-27T02:30:04.177
> 
> 标签：java, arrays, csv, multidimensional-array

我在将 CSV 文件转换为 Java 中的二维数组时遇到了一些问题。我可能会走最长的路，但我似乎无法弄清楚我为什么会出错。每行和每列应该有 25 个元素。这是我的代码：

```
BufferedReader CSVFile = new BufferedReader(new FileReader(fileName));

String dataRow = CSVFile.readLine();
// Read first line.
// The while checks to see if the data is null. If 
// it is, we've hit the end of the file. If not, 
// process the data.

while (dataRow != null) {
    dataRow.split(",");
    list.add(dataRow);
    dataRow = CSVFile.readLine();

    // Read next line of data.
}
// Close the file once all data has been read.
CSVFile.close();

String[] tokens = null;
Object[] test = list.toArray();

String[] stringArray = Arrays.copyOf(test, test.length, String[].class); //copies the object array into a String array 

//splits the elements of the array up and stores them into token array

for (int a = 0; a < test.length; a++) {
    String temp = stringArray[a];
    tokens = temp.split(",");

}

//converts these String tokens into ints

int intarray[] = new int[tokens.length];

for (int i = 0; i < tokens.length; i++) {

    intarray[i] = Integer.parseInt(tokens[i]);

}

//attempts to create a 2d array out of a single dimension array
int array2d[][] = new int[10][3];

for (int i = 0; i < 25; i++) {
    for (int j = 0; j < 25; j++) {
        array2d[i][j] = intarray[(j * 25) + i];

    }
} 
```

我相信错误是当 ArrayList 被复制到第一个 String 数组时，但我不能确定。该文件有 25 列和 25 行。我不断得到的错误是数组在索引 25 处超出范围。任何输入将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T02:32:50.770

```
for (int a = 0; a < test.length; a++) {
    String temp = stringArray[a];
    tokens = temp.split(","); //< -- OLD VALUE REPLACED  WITH NEW SET OF TOKENS

} 
```

`tokens` **将仅包含使用的最后一个字符串的标记**，*而不是*到目前为止看到的所有标记。因此`tokens.length == 25`，访问`tokens[25]`是一个`ArrayOutOfBounds`例外。

您应该进行以下更改

```
ArrayList<String> tokens = new ArrayList<String>();
...
tokens.addAll(Arrays.asList(temp.split(","))); 
```

[Create ArrayList from array](https://stackoverflow.com/questions/157944/how-to-create-arraylist-arraylistt-from-array-t-in-java)解释了如何将元素数组添加到 arrayList。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:19:56.317

顺便说一句，自己进行 CSV 解析可能不是最有效地利用您的时间（除非这是家庭作业）。有很多很棒的库可以处理这个问题（opencsv，commons-lang3），它们可以处理引用、空标记、可配置分隔符等问题。

以下是 commons-lang3 的示例：

```
StrTokenizer tokenizer = StrTokenizer.getCSVInstance();

while (...) {
    tokenizer.reset(dataLine);
    String tokens[] = tokenizer.getTokenArray();
    ...
} 
```

现在，您可以自由地专注于您想要对数据执行的实际逻辑，而不是解析它的平凡行为。

如果您只是对收集令牌作为平面列表感兴趣：

```
StrTokenizer tokenizer = StrTokenizer.getCSVInstance();
List<String> allTokens = new ArrayList<String>();
while (...) {
    tokenizer.reset(dataLine);
    allTokens.addAll(tokenizer.getTokenList());
    ...
} 
```

# ubuntu - Ubuntu 12.10 Crontab 启动 Vino VNC Server

> ID：15103154
> 
> 赞同：1
> 
> 时间：2013-02-27T02:30:07.937
> 
> 标签：ubuntu, crontab, vnc, xserver

我想在 Ubuntu 12.10 上重新启动时从 crontab 启动 vino VNC 服务器（ vino-server ）。

我的 crontab 条目如下所示：

```
## Start the vino server
@reboot sleep 20 ; /home/user/Desktop/start_vino_vnc.sh 
```

我的脚本看起来像：

```
#! /bin/bash

export DISPLAY=:0.0
xhost +
nohup /usr/lib/vino/vino-server > /home/user/Desktop/vino_log.txt 
```

我的日志文件中经常出现以下错误：

```
user@user:~/Desktop$ cat vino_log.txt 
No protocol specified
Cannot open display: 
Run 'vino-server --help' to see a full list of available command line options 
```

从命令行，如果我尝试在不使用 SSH 转发 X 服务器的情况下运行服务器，那么我会收到相同的错误：

```
user@user:~/Desktop$ /usr/lib/vino/vino-server 
No protocol specified
Cannot open display: 
Run 'vino-server --help' to see a full list of available command line options 
```

我怎样才能做到这一点？我需要通过 crontab 来实现，并且在无头 Ubuntu 服务器上没有监视器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:33:50.957

有一个用于设置显示的命令行选项 - 对我来说，它可以设置该选项：

```
#! /bin/bash

export DISPLAY=:0.0
xhost +
nohup /usr/lib/vino/vino-server --display=:0.0 > /home/pclass/Desktop/vino_log.txt 
```

# jquery - jquery事件没有第二次触发

> ID：15103155
> 
> 赞同：0
> 
> 时间：2013-02-27T02:30:08.247
> 
> 标签：jquery

我的文本区域有一个类似 twitter 的倒计时，它是表单的一部分：

```
<form method="post" id="myemailform" action="">
<label for="ReferralMessage">Optional message:</label><textarea class="message" name="message"></textarea>
    <span class="countdown"></span>
</form> 
```

我的 jQuery 1.8.3 代码：

```
function updateCountdown() {

    var remaining = 300 - jQuery('.message').val().length;
    jQuery('#myemailform button[type="submit"]').attr('disabled', false);
    if (remaining < 0){
        jQuery('.countdown').text(remaining).css({'color': 'red'});
        jQuery('#myemailform button[type="submit"]').attr('disabled', true);
    }
    if (remaining >= 0){
        jQuery('.countdown').text(remaining).css({'color': 'black'});
    }
}

jQuery(function() {

    var remaining = 300;
    //print amount currently
    jQuery('.countdown').text(remaining);
    //now update with changes
    jQuery('.message').on('input tap', updateCountdown);
}); 
```

在提交表单之前，这很好用。页面已刷新，但现在倒计时不再起作用。

虽然如果我手动刷新它会再次开始工作。为什么初始表单提交后没有触发事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:48:42.753

啊。代码没有错。这与我的选择器发生冲突。我用作`message`我的文本框的名称。它似乎与其他事物发生冲突。如此简单的修复就是改变它：

```
<form method="post" id="myemailform" action="">
<label for="ReferralMessage">Optional message:</label><textarea class="optionalmessage" name="optionalmessage"></textarea>
    <span class="countdown"></span>
</form> 
```

# matlab - 向矩阵 MATLAB 添加随机数

> ID：15103157
> 
> 赞同：2
> 
> 时间：2013-02-27T02:30:32.177
> 
> 标签：matlab, random, matrix

我想用 3 个数字 -1,1 和 0 生成 100x1 矩阵。我希望能够控制分配了多少 1 和 -1。我尝试使用

```
 Y = rand(10,1)<0.1 
```

但这只会给我 0 和 1。但我能够控制矩阵中 1 的数量。是否有类似类型的函数可用于添加和控制 -1 和 1 的数量以及默认值 0。对不起，我是新的 matlab env。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T02:58:44.907

首先初始化你的数组：

```
x = [-1*ones(30,1); zeros(25,1);ones(45,1)]; 
```

然后使用 matlab 的精彩索引`randperm`：

```
y= x(randperm(100));
plot (y, 'o') 
```

# c# - 淘汰购物车，计算物品的最终价格和所有物品的小计

> ID：15103159
> 
> 赞同：0
> 
> 时间：2013-02-27T02:30:36.610
> 
> 标签：c#, javascript, .net, json, knockout.js

查看我当前的工作示例：http: [//jsfiddle.net/6vBsm/1/](http://jsfiddle.net/6vBsm/1/)

如何计算每一行的最终价格？

计算应为数量 * 价格 - 折扣 %

它也应该是动态的，以便对数量、价格或折扣的任何更改都会重新计算最终价格。

最后，如何将我的小计指向新的最终价格而不是基本价格？

当前计算小计的代码：

```
 // Computed data
    self.totalSurcharge = ko.computed(function () {
        var total = 0;
        for (var i = 0; i < self.SelectedComponents().length; i++)
        total += self.SelectedComponents()[i].Price;
        return total;
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:06:53.417

您的问题是您的字段不可观察，我使用 ko.mapping 插件自动使事物可观察。

[http://jsfiddle.net/keith_nicholas/dzZLW/](http://jsfiddle.net/keith_nicholas/dzZLW/)

所以你的javascript现在是：-

```
function ViewModel() {
        var self = this;

        self.Components = [{
            "ID": "1",
                "Name": "Tennis Ball",
                "Description": "Basic Yellow Tennis Ball 9",
                "Quantity": 0,
                "Price": 1.99,
                "Discount": 0.0
        }, {
            "ID": "2",
                "Name": "Hockey Stick",
                "Description": " Premium Carbon Fiber Construction",
                "Quantity": 0,
                "Price": 67.99,
                "Discount": 0.0
        }, {
            "ID": "3",
                "Name": "Cycling Helmet",
                "Description": " For going fast.",
                "Quantity": 0,
                "Price": 226.99,
                "Discount": 0.0

        }];

        self.componentToAdd = ko.observable();
        self.SelectedComponents = ko.observableArray([]);

        // Computed data
        self.totalSurcharge = ko.computed(function () {
            var total = 0;
            for (var i = 0; i < self.SelectedComponents().length; i++)
            {                        
              total += self.SelectedComponents()[i].Price() * self.SelectedComponents()[i].Quantity() *  (100-self.SelectedComponents()[i].Discount())/100;
            }
            return total;
        });

        //Operations
        self.addComponent = function () {        

            var mycopy = {};
            ko.mapping.fromJS(self.componentToAdd(), {}, mycopy);
            self.SelectedComponents.push(mycopy);
        };

    } 
```

你的html需要是

```
<div data-bind="visible: SelectedComponents().length > 0">
    <table class="koSubTable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Discount %</th>

                <th>Final Price</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: SelectedComponents">
            <tr>
                <td data-bind="text: Name" style="width:90px;"></td>
                <td data-bind="text: Description" style="width:300px;"></td>
                <td style="width:90px;">
                    <input data-bind="value: Quantity" size="5" />
                </td>
                <td style="width:90px;">
                    <input data-bind="value: Price().toFixed(2)" size="8" />
                </td>
                <td style="width:90px;">
                    <input data-bind="value: Discount" size="5" />
                </td>

                <td style="width:120px;">???</td>
            </tr>
        </tbody>
    </table>
    <div>
        <br>Subtotal $<span data-bind="text: totalSurcharge().toFixed(2)"></span>

    </div>
</div>
<br>
<!--Bind Json List to this drop down-->
<select id="myComponent" data-bind="options: Components, optionsText: 'Name', value:  componentToAdd"></select>
<!--Click on this button-->
<button data-bind="click: addComponent">Add to list</button> 
```

# java - 如何用Java创建一个桶填充？

> ID：15103161
> 
> 赞同：0
> 
> 时间：2013-02-27T02:30:55.423
> 
> 标签：java, paint, graphics2d, fill, bucket

我正在尝试创建一个类似油漆的程序，我目前正在实施一个桶填充工具。我正在存储已绘制的所有点并使用 Graphics2D`drawLine`绘制实际线，因此我不想存储桶填充的所有点（所以我不想进行洪水填充）。

对于桶填充，到目前为止，我已经使用 a`BufferedImage`来填充不在我的列表中但仍在绘制的点。

我想做的一件事是只存储最外层的点，然后我可以使用 Graphics2D`fillPolygon`使用这些点。唯一的问题是我不确定如何找到这些点。

我被困在这里，所以有人有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T02:58:23.237

可能有很多不同的方法可以实现这一点，就个人而言，我会使用 2D Graphics Shape API ...

![在此处输入图像描述](../Images/aadc2e6256df20575b3961b3a27351e0.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Path2D;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class BucketFill {

    public static void main(String[] args) {
        new BucketFill();
    }

    public BucketFill() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private List<Point> points;

        public TestPane() {
            points = new ArrayList<Point>(25);

            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    points.add(e.getPoint());
                    repaint();
                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            if (points.size() > 0) {

                Graphics2D g2d = (Graphics2D) g.create();
                g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
                g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
                g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
                g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
                g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
                g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);

                List<Point> proxy = new ArrayList<>(points);

                Path2D.Double path = new Path2D.Double();
                Point p = proxy.remove(0);
                path.moveTo(p.getX(), p.getY());
                while (proxy.size() > 0) {
                    p = proxy.remove(0);
                    path.lineTo(p.getX(), p.getY());
                }

                g2d.setColor(Color.RED);
                g2d.fill(path);
                g2d.setColor(Color.BLACK);
                g2d.draw(path);
                g2d.dispose();

            }
        }
    }
} 
```

**使用 fillPolygon 更新**

您可以简单地通过删除对形状的引用并使用类似以下内容来替换`Shape`实现。`fillPolygon`

```
List<Point> proxy = new ArrayList<>(points);
int[] xPoints = new int[proxy.size()];
int[] yPoints = new int[proxy.size()];
int nPoints = proxy.size();

int index = 0;
while (proxy.size() > 0) {
    Point p = proxy.remove(0);
    xPoints[index] = p.x;
    yPoints[index] = p.y;
    index++;
}

g2d.setColor(Color.RED);
g2d.fillPolygon(xPoints, yPoints, nPoints);
g2d.setColor(Color.BLACK);
g2d.drawPolygon(xPoints, yPoints, nPoints); 
```

这将生成所谓的封闭多边形（即，您可以看到所有线都连接在一起）。

![在此处输入图像描述](../Images/70c879a0baa66bae3907868865941403.png)

您可以通过在绘制之后和之前`Shape`调用来实现使用。`path.closePath()``while-loop`

**更新了多个多边形**

![在此处输入图像描述](../Images/dfad8f35af9f8ebf2c50e5c24fb1bffb.png)

很多都取决于您认为的多边形以及如何存储这些值，但是您可以使用 an`Area`并从中减去相交的多边形...

```
public class BucketFill {

    public static void main(String[] args) {
        new BucketFill();
    }

    public BucketFill() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private List<List<Point>> points;

        public TestPane() {
            points = new ArrayList<>(25);

            MouseAdapter ma = new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent e) {
                    List<Point> newShape = new ArrayList<>(25);
                    newShape.add(e.getPoint());
                    points.add(newShape);
                }

                @Override
                public void mouseReleased(MouseEvent e) {
                }

                @Override
                public void mouseDragged(MouseEvent e) {
                    List<Point> newShape = points.get(points.size() - 1);
                    newShape.add(e.getPoint());
                    repaint();
                }
            };

            addMouseListener(ma);
            addMouseMotionListener(ma);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            if (points.size() > 0) {

                Graphics2D g2d = (Graphics2D) g.create();
                g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
                g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
                g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
                g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
                g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
                g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);

                g2d.setColor(Color.BLUE);
                List<Shape> shapes = new ArrayList<>(25);
                for (List<Point> subPoints : points) {

                    if (subPoints.size() > 0) {

                        List<Point> proxy = new ArrayList<>(subPoints);

                        Path2D path = new Path2D.Float();
                        Point startPoint = proxy.remove(0);
                        path.moveTo(startPoint.x, startPoint.y);
                        for (Point p : proxy) {
                            path.lineTo(p.x, p.y);
                        }
                        path.closePath();
                        shapes.add(path);
                        path = null;

                    }

                }

                for (Shape master : shapes) {
                    Area area = new Area(master);
                    for (Shape inner : shapes) {
                        if (inner != master) {
                            area.subtract(new Area(inner));
                        }
                    }
                    g2d.setColor(Color.RED);
                    g2d.fill(area);
                    g2d.setColor(Color.BLACK);
                    g2d.draw(area);
                }

                g2d.dispose();

            }
        }
    }
} 
```

# arrays - 有没有办法在 perl 中创建一个包含两个数组的哈希？

> ID：15103172
> 
> 赞同：1
> 
> 时间：2013-02-27T02:32:19.710
> 
> 标签：arrays, perl, hash

我是 Perl 的新手，所以我遇到了一些麻烦。假设我有两个数组：

```
@num = qw(one two three);
@alpha = qw(A B C);
@place = qw(first second third); 
```

我想创建一个哈希，第一个元素作为键，其余作为值作为数组，无论它们有 3 个还是 3000 个元素

所以哈希本质上是这样的：

```
%hash=(
    one => ['A', 'first'],
    two => ['B', 'second'],
    third => ['C', 'third'],
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T02:39:24.293

```
use strict;
use warnings;

my @num   = qw(one two three);
my @alpha = qw(A B C);
my @place = qw(first second third);

my %hash;
while (@num and @alpha and @place) {
  $hash{shift @num} = [ shift @alpha, shift @place ];
}

use Data::Dump;
dd \%hash; 
```

**输出**

```
{ one => ["A", "first"], three => ["C", "third"], two => ["B", "second"] } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T02:45:19.437

```
use strict;
use warnings;
use Data::Dumper;

my %hash;
my @num   = qw(one two three);
my @alpha = qw(A B C);
my @place = qw(first second third);

$hash{ $num[$_] } = [ $alpha[$_], $place[$_] ] for 0 .. $#num;

print Dumper \%hash 
```

输出：

```
$VAR1 = {
          'three' => [
                       'C',
                       'third'
                     ],
          'one' => [
                     'A',
                     'first'
                   ],
          'two' => [
                     'B',
                     'second'
                   ]
        }; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T03:59:24.240

```
use strict;
use warnings;
use Algorithm::Loops 'MapCarE';

my @num = qw(one two three);
my @alpha = qw(A B C);
my @place = qw(first second third);

my %hash = MapCarE { shift, \@_ } \@num, \@alpha, \@place; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T02:42:38.113

```
use strict; use warnings;
my @num = qw(one two three);
my @alpha = qw(A B C);
my @place = qw(first second third);

my %h;
push @{ $h{$num[$_]} }, $alpha[$_], $place[$_] for 0..$#num;

use Data::Dumper;
print Dumper \%h; 
```

## 输出

```
$VAR1 = {
          'three' => [
                       'C',
                       'third'
                     ],
          'one' => [
                     'A',
                     'first'
                   ],
          'two' => [
                     'B',
                     'second'
                   ]
        }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T16:42:48.300

```
use List::UtilsBy qw( zip_by );

my @num = qw(one two three);
my @alpha = qw(A B C);
my @place = qw(first second third);

my %hash = zip_by { shift, [ @_ ] } \@num, \@alpha, \@place; 
```

输出：

```
$VAR1 = {
      'three' => [
                   'C',
                   'third'
                 ],
      'one' => [
                 'A',
                 'first'
               ],
      'two' => [
                 'B',
                 'second'
               ]
    }; 
```

# grails - 获取域类字段名称

> ID：15103173
> 
> 赞同：6
> 
> 时间：2013-02-27T02:32:31.060
> 
> 标签：grails, groovy

我想获取一个类的字段名称，并可能将其存储在一个列表中。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-30T14:08:29.390

你可以试试这个来获取域类的字段名。

```
YourClass.declaredFields.each {
  if (!it.synthetic) {
    println it.name
  }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-07T22:07:01.937

您可以`gormPersistentEntity`用于任何域对象，这至少适用于 Grails 2.4.4：

```
def names = Person.gormPersistentEntity.persistentPropertyNames
//returns ['firstName', 'lastName'...] 
```

你也可以`GrailsNameUtils`像这样获得自然名称：

```
def naturalNames = Person.gormPersistentEntity.persistentPropertyNames.collect {
        grails.util.GrailsNameUtils.getNaturalName(it)
}
//returns ['First Name', 'Last Name'...]

def capitilizedNames = Person.gormPersistentEntity.persistentProperties.collect{
    it.capitilizedName
}
//returns ['FirstName', 'LastName'...] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T02:47:34.917

刚发现，这个有效：

```
def names = grailsApplication.getDomainClass('com.foo.Person').persistentProperties.collect { it.name } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T02:44:03.557

您可以像这样遍历类的字段。

```
YourClass.fields.each { println it.name } 
```

如果您需要将它们放入列表中，您可以使用 collect() 或在每个列表中填充它。

[http://groovy.codehaus.org/JN3535-Reflection](http://groovy.codehaus.org/JN3535-Reflection)

# javascript - 如何安全地传递javascript？

> ID：15103174
> 
> 赞同：1
> 
> 时间：2013-02-27T02:32:31.443
> 
> 标签：javascript, security

我正在创建一个应用程序，用户可以在其中传递代码。我的问题是 jsfiddle 或 jsbin 之类的网站如何确保人们保存并相互传递的代码对接收客户端没有恶意？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T02:33:36.870

他们真的不能。`iframe`他们以违反同源政策的方式运行代码，以保护他们自己的网站。除此之外，它由最终用户承担风险。

就安全性而言，这与访问 Internet 上任何不受信任的站点实际上是一样的。

# android - 如何在应用程序中模拟键盘事件

> ID：15103175
> 
> 赞同：0
> 
> 时间：2013-02-27T02:32:33.143
> 
> 标签：android

我需要在我的活动中使用按钮而不是 android 键盘。我找到示例（[http://developer.android.com/guide/topics/text/creating-input-method.html](http://developer.android.com/guide/topics/text/creating-input-method.html)）：

```
InputConnection ic = getCurrentInputConnection();

    ic.deleteSurroundingText(4, 0);

    ic.commitText("Hello", 1);

    ic.commitText("!", 1); 
```

但我不明白如何在我的应用程序中使用它。我应该在哪里创建扩展 InputMethodService 的类，以及这个类必须有什么。请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:51:19.577

您必须创建一个扩展 EditText 的类。然后您可以覆盖 onCreateInputConnection 方法。

# android - 否定小于 0 的值

> ID：15103177
> 
> 赞同：0
> 
> 时间：2013-02-27T02:32:48.960
> 
> 标签：android

我在 if else 语句中有这段代码......我试图阻止 textview 值低于 0，但它仍然低于 0。

```
else if(iv1.getDrawable().getConstantState().equals(getResources().getDrawable(R.drawable.airplane2).getConstantState())){
                    int e =Integer.parseInt(textView5.getText().toString());
                    int f = e-1;
                    String s3 = String.valueOf(f);
                    textView5.setText(s3);
                    int dInt = Integer.parseInt(textView5.getText().toString());
                    if(dInt <= 0)
                                  {

                                       Toast.makeText(getApplicationContext(), "GameOver",Toast.LENGTH_SHORT).show();

                                  }

                } 
```

PS对不起我的英语我已经减少了我的代码，但它仍然是负值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:37:36.577

Math.max 做你想做的事。

```
int b = Math.max(a - 2, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:45:53.470

```
if  (iv1.getDrawable().getConstantState().equals(getResources().getDrawable(R.drawable.airplane1).getConstantState())) {{
                    int a=Integer.parseInt(textView5.getText().toString());
                    int b=a+12;
                    String s1 = String.valueOf(b);
                    textView5.setText(s1);

                    Toast.makeText(getApplicationContext(), "Correct",
                            Toast.LENGTH_SHORT).show();
                }
                } int aInt = Integer.parseInt(textView5.getText().toString());
                 if(aInt <= 0) 
                 {
                     Toast.makeText(getApplicationContext(), "WrongWa",
                                Toast.LENGTH_SHORT).show();
                    } else if   (iv1.getDrawable().getConstantState().equals(getResources().getDrawable(R.drawable.airplane2).getConstantState())){

                     int c=Integer.parseInt(textView5.getText().toString());
                         int  d=c-2;
                      String s1 = String.valueOf(d);
                     textView5.setText(s1);
                     {
                     Toast.makeText(getApplicationContext(), "Wrong",
                                Toast.LENGTH_SHORT).show();
                     }
                    }
            }

            }); 
```

我已经尝试过了，它实际上以我希望 ito 成为 @Pragnani 的方式工作，感谢您的评论

# delphi - ADODB 组件导致 Win7/Server 2008 上的访问冲突

> ID：15103180
> 
> 赞同：3
> 
> 时间：2013-02-27T02:32:58.330
> 
> 标签：delphi, adodb, delphi-2005

我有一段用 Delphi 2005 编写的代码，用于在 LDAP 中搜索用户的特定属性。当它在 Windows 7 或 Server 2008 上运行时出现访问冲突，但在 XP 或 2003 上没有。

```
Function IsSSOUser(UserId: String): Boolean;
var
  S : string;
  ADOQuery : TADOQuery;
  ADOConnectionSSO: TADOConnection;
begin
  result := false;
  Setdomainname;
  ADOQuery := TADOQuery.Create(nil);
  ADOConnectionSSO := TADOConnection.Create(nil);
  try
    ADOConnectionSSO.LoginPrompt := false;
    ADOConnectionSSO.Mode := cmRead;
    ADOConnectionSSO.Provider := 'ADsDSOObject';
    ADOQuery.Connection := ADOConnectionSSO;
    ADOQuery.ConnectionString := 'Provider=ADsDSOObject;Encrypt Password=False;Mode=Read;Bind Flags=0;ADSI Flag=-2147483648';
    ADOQuery.SQL.Clear;
    try
      S := 'SELECT AdsPath, CN, SN, SSOguid FROM '''
           + LDAPString + ''' WHERE objectClass=''user'' and CN = ''' + UserId + ''' ';
      ADOQuery.SQL.Add(S);
      ADOQuery.Open;
      ADOQuery.ExecSQL;
      if trim(ADOQuery.FieldByName('SSOguid').AsString) = '' then
        result := false
      else
        result := true;
    except
      on e:Exception do
        if e.ClassType <> EOleException then
          Showmessage(format('[%s] Exception in IsSSOUser: [%s]',[e.ClassType.ClassName, e.Message]));
    end;
  finally
    ADOQuery.Close;
    ADOConnectionSSO.Close;
    ADOQuery.free;
    ADOConnectionSSO.free;
  end;
end; 
```

此代码在 Windows XP 和 Windows Server 2003 上运行良好，但我在 Windows 7 和 Server 2008 上都遇到了访问冲突。我在网上看到了许多关于更改 ADODB 接口如何破坏下游操作系统的线程，但我似乎有相反的问题。我在 Windows 7 机器上构建，代码仅适用于以前版本的 Windows。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T06:31:11.613

您将不得不添加

```
AdoQuery.ParamCheck := false; 
```

在你之前

```
ADOQuery.SQL.Add(S); 
```

因为您的 LDAPString 可能包含冒号 ( `:`) 例如。`"LDAP://...."`这会导致查询尝试为其创建参数对象。此外没有必要`ADOQuery.ExecSQL`after `ADOQuery.Open`。

# python - python中的正则表达式，匹配html标签之外的单词

> ID：15103181
> 
> 赞同：1
> 
> 时间：2013-02-27T02:33:06.967
> 
> 标签：python, html, regex

我正在尝试使用正则表达式匹配一个短语，只要该短语中的任何单词都没有出现在 html 标记中。

对于此示例，我使用以下网址：

```
 url = "http://www.sidley.com/people/results.aspx?lastname=B" 
```

我正在使用的正则表达式是：

```
 regexp = "Babb(?!([^<]+)?>).+?Jonathan(?!([^<]+)?>).+?C(?!([^<]+)?>)"
   page = urllib2.urlopen(url).read()
   re.findall(regexp, page, re.DOTALL) 
```

使用该正则表达式，我得到以下输出：

```
 [('', '', '')] 
```

当我将正则表达式更改为（*注意外部括号）时：

```
 regexp = "(Babb(?!([^<]+)?>).+?Jonathan(?!([^<]+)?>).+?C(?!([^<]+)?>))"
   page = urllib2.urlopen(url).read()
   re.findall(regexp, page, re.DOTALL) 
```

我得到：

```
 [('Babb, Jonathan C', '', '', '')] 
```

我很困惑为什么会这样。

1）为什么我会得到这些空字符串作为匹配项？2）为什么对于第一个正则表达式，我没有得到实际匹配？

最后，

我该如何解决？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T02:40:50.283

您得到空字符串的原因是您使用的是*non-greedy*。如果您不想要该信息，只需删除一些括号。事实上，你真的应该研究非分组括号或只是一些无关的对。

* * *

我将使用（用于整个过程）的最终代码是

```
import re
import urllib2

url = 'http://www.sidley.com/people/results.aspx?lastname=B'
regexp = 'Babb(?!<+?>).+?Jonathan(?!<+?>).+?C(?!<+?>)'

page = urllib2.urlopen(url).read()
re.findall(regexp, page, re.DOTALL) 
```

正则表达式的细分：

*   我们选择第一个词。 `Babb`
*   我们*不想*匹配任何 HTML 标签，所以我们使用了一个不能匹配的反组。`(?!)`
*   在其中，我们放置了一个选择 HTML 标记的正则表达式（不太清楚为什么是这个特定的表达式有效，而不是`.+?>`）。`<+?>`
*   我们非贪婪地选择至少一个字符。`.+?`
*   我们对其他每个单词（`Jonathan`和`C`）重复这个过程。

# ruby-on-rails-3.2 - 显示脚本的输出而不路由到新视图 [Rails]

> ID：15103182
> 
> 赞同：0
> 
> 时间：2013-02-27T02:33:12.400
> 
> 标签：ruby-on-rails-3.2

我有一个简单的 Rails 应用程序，其中用户在 form_tag 表单中提交一个整数，一个 Ruby 脚本找到整数的素数，输出显示在一个新视图中。我怎样才能使输出显示在与表单相同的视图中而不是新的视图中？

这是我当前的代码：

**路线.rb**：

```
 match '/primes', to: 'programs#primes'
  post '/factors', to: 'programs#factors' 
```

**primes.html.erb**：

```
 <%= form_tag('/factors') do %>
  <div class="field">
   <p>Enter an integer greater than 1:</p>
   <p><%= text_field_tag :number %></p>
  </div>
  <div class="actions">
   <p><%= submit_tag("Find factors") %></p>
  </div>
  <% end %> 
```

**程序控制器.rb**：

```
 def factors
    n = Integer(params[:number])
    .
    .
    .
    # script finds prime factors, stores output in @output
  end 
```

**因素.html.erb**：

```
 <%= @output %> 
```

所以我希望应用程序做的是在“/primes”中呈现@output，而不是路由到“/factors”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:10:22.277

您可以告诉因子控制器动作使用与素数控制器动作相同的视图，如下所示：

```
def factors
  # script finds prime factors, stores output in @output
  render :action => 'primes'
end 
```

您还需要移动`<%= @output %>`到 primes.html.erb 以使其显示在那里

# javascript - 页面没有脚本

> ID：15103189
> 
> 赞同：-1
> 
> 时间：2013-02-27T02:33:58.397
> 
> 标签：javascript, html

出于某种原因，我的 javascript 无法正常工作。当我在 Firebug 中查看它时，当我清楚地有一个 javascript 时，它会说“页面上没有脚本”。我的页面位于[http://thomaswd.com/maze/highscores/delete.php](http://thomaswd.com/maze/highscores/delete.php)。请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:49:55.040

页面上的 javascript 调用存在几个问题。对于初学者，您的所有 Deleteqry(name) 调用都需要将参数放在引号中，例如 Deleteqry("name")。这些类型的错误将使您的 javascript 无法运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:46:44.400

当我加载页面时，firebug 在“head”中显示 jquery 和 bleh.js javascrpit 文件，并显示它们的内容。也许 Firefox 缓存了页面尝试关闭和打开 Firefox 或清除缓存。

为了让浏览器表单缓存 javascript，您可以在页面处于开发阶段时执行以下操作

```
<script src="bleh.js?<?php echo time(); ?>" type="text/javascript" language="javascript"></script> 
```

这是一个巧妙的技巧，可以让浏览器认为它是一个不同的 js 文件。

# c# - 强制复选框被选中

> ID：15103192
> 
> 赞同：-6
> 
> 时间：2013-02-27T02:34:14.370
> 
> 标签：c#, checkbox

我使用此代码，但它不起作用：

```
private void checkcheck()
{
    if (checkBox1.Text == "ON")
    {
        checkBox1.Checked = true;
        checkBox1.ForeColor = Color.DeepSkyBlue;
    }
    else
    {
        checkBox1.Checked = false;
        checkBox1.ForeColor = Color.Silver;
    }
} 
```

我从表单加载事件中调用此方法。

```
 private void Form3_Load(object sender, EventArgs e)
    {
        cn.Open();
        SqlCommand cmd = new SqlCommand("SELECT * FROM contacts WHERE id = '" + label2.Text  + "' ", cn);
        SqlDataReader reader = cmd.ExecuteReader();
        if (reader.HasRows)
        {
            while (reader.Read())
            {
                textBox1.Text = reader[1].ToString();
                textBox2.Text = reader[2].ToString();
                textBox3.Text = reader[3].ToString();
                textBox4.Text = reader[4].ToString();
                checkBox1.Text = reader[5].ToString();
            }
        }
        cn.Close();
        checkcheck();
    } 
```

就是这样，表单加载，然后复选框根据数据更改，然后它会更改，当我运行它时它会完美获取数据，并将复选框更改为开/关但没有颜色或检查

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:44:20.580

由于您的第一个条件始终为真，因此代码未执行 else 部分。

# javascript - 防止表单刷新页面

> ID：15103201
> 
> 赞同：1
> 
> 时间：2013-02-27T02:34:53.433
> 
> 标签：javascript

嘿，我正在尝试使用表单通过 JavaScript 提交数据，但是当我不想要它时它会不断刷新页面。

我的表格是这样的：

```
<form name="myForm" method="post">

<input type="text" name="name"/>
<input type="submit" name="add" value="Add Resource" onclick="insert(); return false;"/>

</form> 
```

我的 JS 函数有：

```
function insert(e){
e.preventDefault();
    var name = document.myForm.name;
    console.log(name);    
} 
```

有人告诉我防止默认是你如何停止表单的默认操作，但它仍然发生在我身上。我如何解决它 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T02:38:26.203

虽然你没有通过`e`。相反，最好使用 JavaScript 绑定到表单而不是使用属性：

```
document.querySelector('[name=myForm]').addEventListener('submit', function (e) {
    e.preventDefault();
}); 
```

您还可以绑定到`click`提交输入的事件

# javascript - 如何编辑节点图？

> ID：15103208
> 
> 赞同：2
> 
> 时间：2013-02-27T02:35:57.687
> 
> 标签：javascript, d3.js, force-layout

`d3js`可以可视化节点图，就像这个[例子](http://bl.ocks.org/MoritzStefaner/1377729)

![在此处输入图像描述](../Images/2a0e67959721e27be38b90cba5bbe404.png)

现在我想让用户与图表进行交互。必须能够：

*   创建/删除节点和边
*   通过单击将数据附加到节点/边缘。
*   将数据推送到服务器，使其持久化

有可能做到这一点`d3js`吗？有没有其他工具可以提供这种功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:53:03.537

当然，所有这些事情都相对容易做到`d3`。[您可以在http://bl.ocks.org/mbostock](http://bl.ocks.org/mbostock)看到许多不同的力导向图示例。以下是您可能会发现有用的一对：

向图中添加节点和边：

*   [http://bl.ocks.org/mbostock/929623](http://bl.ocks.org/mbostock/929623)
*   [http://bl.ocks.org/rkirsling/5001347](http://bl.ocks.org/rkirsling/5001347)

从 XML 文件加载数据以创建布局

*   [http://bl.ocks.org/mbostock/1080941](http://bl.ocks.org/mbostock/1080941)

监听鼠标悬停

*   [http://bl.ocks.org/mbostock/2706022](http://bl.ocks.org/mbostock/2706022)

从个人经验来看，我会说这`d3`将是做这类事情的最佳工具。我建议玩一下，然后在遇到问题时提出更具体的问题。

# c++ - fstream 不写入文件

> ID：15103209
> 
> 赞同：1
> 
> 时间：2013-02-27T02:36:10.423
> 
> 标签：c++, fstream

我在 fstream 位于特定位置时无法写入我的文件时遇到问题。在下面的代码中，当注释行被取消注释时，文件被写入，但是当它被注释时，文件根本没有被写入。我添加了一堆控制台输出，它表示“outputFile << newWord << endl;”周围的两个输出 已完成，但从未实际写入该文件。

```
void write_index( string newWord )
{
fstream outputFile( "H:\\newword.txt", ios::app );
int same = 0;
string currWord;
currWord.resize(5);
//outputFile << newWord << endl;
while( !outputFile.eof() )
{
    getline( outputFile, currWord );
    cout << "Checking if " << newWord << "is the same as " << currWord << endl;
    if( newWord == currWord )
    {
        cout << "It is the same" << endl;
        same = 1;
        break;
    }
}
if( same != 1 )
{
    cout << "Writing " << newWord << "to file" << endl;
    outputFile << newWord << endl;
    cout << "Done writing" << endl;
}
outputFile.close(); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:55:33.387

我有点相信你正在寻找这些方面的东西：

```
void write_index( const string& newWord )
{
    fstream outputFile( "H:\\newword.txt", ios::in);
    bool same = false;

    if (outputFile)
    {
        string currWord;
        while (getline(outputFile, currWord))
        {
            cout << "Checking if " << newWord << " is the same as " << currWord << endl;
            same = (newWord == currWord);
            if (same)
            {
                cout << "It is the same" << endl;
                break;
            }
        }
    }

    if (!same)
    {
        outputFile.close();
        outputFile.open("H:\\newword.txt", ios::app);

        cout << "Writing " << newWord << "to file" << endl;
        outputFile << newWord << endl;
        cout << "Done writing" << endl;
    }

    outputFile.close();
} 
```

有更好的方法可以做到这一点，但这可能是一个不错的起点。

# javascript - 如何使用 UTF-8 编码数据执行融合表请求？

> ID：15103211
> 
> 赞同：0
> 
> 时间：2013-02-27T02:36:29.410
> 
> 标签：javascript, google-apps-script, google-fusion-tables

我使用这个 fusionRequest 函数，但我无法保存重音字符。

我认为我们必须使用 UTF-8 加密，但我的代码有问题。

这里是 ：

```
function fusionRequest(method, sql) {

  var url = "https://www.google.com/fusiontables/api/query";

  if (USE_OAUTH) {

    var fetchArgs = googleOAuth_();
  }
  else {
    var fetchArgs = new Object();
    fetchArgs.headers = {
      "Authorization": "GoogleLogin auth=" + getAuthToken_()
    };
  }

  fetchArgs.method = method;

  if (method == 'get') {

    url += '?sql=' + sql;
    fetchArgs.payload = null;
  }
  else {
    fetchArgs.payload = 'sql=' + sql;
  }

  fetchArgs.charset = '"UTF-8"';

  var response = UrlFetchApp.fetch(url, fetchArgs);

  var responseText = response.getContentText();

  return response.getContentText();

} 
```

提前感谢您的宝贵帮助...

BR

帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:47:27.360

对于 POST，您可以尝试：

```
fetchArgs.headers["Content-Type"] = "application/x-www-form-urlencoded;charset=UTF-8"; 
```

还没有测试过，但让我知道它是否有效。否则，您可以尝试：

```
fetchArgs.headers["Accept-Charset"] = "UTF-8"; 
```

# javascript - 使具有特定 ID 的链接可见

> ID：15103219
> 
> 赞同：0
> 
> 时间：2013-02-27T02:37:31.307
> 
> 标签：javascript, ruby-on-rails

我在 Rails 应用程序中的每个用户个人资料页面 /views/users/show.html.erb 上都有来自 Question 模型的项目列表。项目列表是您希望在 /views/questions/index.html.erb 中找到的信息。我已经对其进行了安排，以便当用户单击显示链接时，它会在同一页面 /views/users/show.html/ 中显示内容。如果用户单击另一个显示链接，它只是将显示的内容替换为下一个链接单击的问题的 id。但是，用户点击show后，无法取消关闭数据，除非用户刷新主页等；因此，一旦用户单击显示链接（假设有 10 个链接的列表），我希望能够在单击的条目旁边显示一个链接（而不是列表中的 9 个）t) 允许用户隐藏数据。我知道如何隐藏数据（即它只是返回同一页面的链接），但是，我不知道如何使链接出现在被点击的条目旁边。我使用问题的 id 给每个链接一个唯一的类 id，所以我可以区分链接，但我被困在哪里去。你能建议我做什么吗？

```
<td><%= link_to "Show", {:controller => 'users', :action =>'show', :question_id =>"#{question.id}"}, {:class => "question #{question.id}"}%></td> 
```

![在此处输入图像描述](../Images/78a3d1d4b4c3083d47f39a8e8932f823.png)

更新。我不能在每个项目旁边放置一个隐藏链接，然后将可见性设置为“隐藏”，所以我只需要一种方法将与单击的显示链接对应的隐藏链接的 css 设置为可见。

更新，当我点击显示链接（比如问题 24）时，它在 currentTarget 属性中提供了这些信息

```
currentTarget: a.question 24

http://localhost:3000/users/28?question_id=24 
```

因此，我需要使与“close 24”类的链接可见。是否有一个正则表达式可以用来确保我从 currentTarget 获得 id 和只有 id？

```
showHide: function(e){

      e.currentTarget

      $('close' + id ).css('visibility', 'visible')

    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:36:25.643

在您的链接中，您可以为问题 ID 添加数据属性

```
link_to 'text', url, data: { qid: question.id } 
```

然后在你的js中

```
showHide: function(e) {
  $('.close' + e.currentTarget.data('qid')).css('visibility', 'visible')
} 
```

# android - 在没有预定义大小的情况下动态绘制静态图像的最佳方法

> ID：15103222
> 
> 赞同：0
> 
> 时间：2013-02-27T02:37:40.717
> 
> 标签：android

如果用户选择一个选项，我正在编写一个需要渲染图像的应用程序。图像将读取一个数据文件，并根据数据文件的内容呈现适当数量的矩形、线条和文本（我正在可视化数据）。我阅读了这个站点[Drawables 或 Canavs](http://developer.android.com/guide/topics/graphics/2d-graphics.html)，如果我理解正确，它说我应该使用 drawables。但是我不明白（没有找到或错过它）是我定义绘制形状的空间的地方。因为我不知道形状的数量以及整个可视化的大小，直到我阅读数据文件，我不知道我需要多大的合成图像（渲染所有形状和线条所需的大小）。

所以我有三个问题。

我应该使用drawables来完成我需要做的事情吗？该方法是否`mDrawable.setBounds`定义了我正在使用的可视化的“大小”我可以用drawables画线和插入文本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:46:09.417

要显示 Drawable，您可以使用 Source 设置为 drawable 的 ImageView，或将背景设置为 drawable 的其他 UI 组件，或者覆盖您自己的自定义 UI View 的 onDraw 方法并使用 Drawable#draw( Canvas) 调用以将 Drawable 绘制到画布上，从而将使用该画布绘制自身的视图绘制到画布上。Drawable#setBounds 方法定义了 Drawable#draw 方法在画布上绘制的位置。

通常，在您的情况下，根本不会使用 Drawable 。相反，您只需将 View 子类化，覆盖 onDraw(Canvas)，然后直接在 Canvas 对象上进行绘图调用。这个对象有drawBitmap、drawLines、drawText等方法： http:
[//developer.android.com/reference/android/graphics/Canvas.html#drawText(java.lang.String,%20float,%20float,%20android.图形.油漆）](http://developer.android.com/reference/android/graphics/Canvas.html#drawText(java.lang.String,%20float,%20float,%20android.graphics.Paint))

# c# - 更改下拉列表的值

> ID：15103223
> 
> 赞同：0
> 
> 时间：2013-02-27T02:37:46.407
> 
> 标签：c#, asp.net, html

`click`我正在尝试使用事件处理程序上的以下代码更改下拉列表的值 。按下按钮时实际上没有任何变化。我错过了什么？这是正确的方法吗？

```
HtmlDocument document = webBrowser1.Document;
HtmlElement salutation = document.GetElementById("status");
salutation.SetAttribute("value", "Mr"); 
```

这是html

```
<select id="status">
<option selected="selected" value="">Select</option>
<option value="Mr">Mr.</option>
<option value="Mrs">Mrs.</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:47:40.340

你可以试试这个（根据你的代码）

```
 HtmlDocument document = webBrowser1.Document;
        HtmlElement salutation = document.GetElementById("status");

        var option = salutation.Children.Cast<HtmlElement>().First(x => x.GetAttribute("value").Equals("Mr"));
        option.SetAttribute("selected", "selected"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:51:13.723

你在选择`<select>`标签吗？如果是这样，请不要使用它。选择`<option>`，就像这样：

```
<select>
  <option value="volvo">Volvo</option>
  <option value="saab" selected="selected">Saab</option>
  <option value="vw">VW</option>
  <option value="audi">Audi</option>
</select> 
```

要查看它的实际效果：请参阅此[链接](http://jsfiddle.net/jQnxM/)

### 使用来自 Scartag 的一些代码，这个怎么样：

```
HtmlElement salutation = document.GetElementById("status");

var option = salutation.Children.Cast<HtmlElement>().
             Where(x => x.GetAttribute("selected").Equals("selected")).First();

if (option != null) option.SetAttribute("value","Mr,"); 
```

# jquery - jQuery UI 时间选择器

> ID：15103224
> 
> 赞同：1
> 
> 时间：2013-02-27T02:37:54.230
> 
> 标签：jquery, wordpress, jquery-ui, jquery-ui-datepicker

我试图将 jQuery UI [timepicker 插件添加](http://trentrichardson.com/examples/timepicker/)到我的 datepicker 函数中。这些正在我的 Wordpress 安装的管理部分中加载。

脚本和样式表正在加载到标题中。我的问题是时间选择器功能没有初始化。

日期选择器在点击时显示良好。我是否以某种方式弄乱了这里的语法？

```
function my_admin_init() {
wp_enqueue_script('jquery');
wp_enqueue_script('jquery-ui-core');
wp_enqueue_script('jquery-ui-datepicker', get_stylesheet_directory() . 'js/jquery-ui-1.10.1.custom.min.js', array('jquery', 'jquery-ui-core') );
wp_enqueue_script('jquery-ui-datetimepicker', get_stylesheet_directory() . 'js/timepicker.js', array('jquery', 'jquery-ui-core') );
wp_enqueue_style('jquery.ui.theme', get_stylesheet_directory_uri() . '/css/jquery-ui-1.10.1.custom.min.css');
wp_enqueue_style('jquery.timepicker.theme', get_stylesheet_directory_uri() . '/css/timepicker.css');
}
add_action('admin_init', 'my_admin_init');

function my_admin_footer() {
?>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery('#pyre_open').datepicker({
        dateFormat : 'DD, d MM, yy'
    });
    jQuery('#pyre_open').datetimepicker();
});
</script>
<?php
}
add_action('admin_footer', 'my_admin_footer'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-22T07:35:20.207

我知道这是一篇旧帖子，但也许其他人正在遇到这个问题。

首先，您没有正确初始化库。不需要为 datetimepicker 排入完整的 jquery-ui-core 队列。在我的 functions.php 中，代码如下所示：

```
wp_register_script( "timepicker", get_stylesheet_directory_uri().'/pathTo/jquery-ui-timepicker-addon.min.js', array( 'jquery', 'jquery-ui-datepicker', 'jquery-ui-slider' ), false, true );
...

//and later
wp_enqueue_script( 'timepicker' );
wp_enqueue_script( 'jquery-ui-datepicker' );
wp_enqueue_script( 'jquery-ui-spinner' ); 
```

在 wp_register_script 中，我们将包含的 jquery-ui 类引用到 datetimepicker - 请参阅此处以获取完整列表[Wordpress 参考/wp 注册脚本](https://codex.wordpress.org/Function_Reference/wp_register_script)

其次，您的 datetimepicker 不起作用，因为在调用 datetimpicker 时，datepicker 已加载并已显示在#pyre_open 上。删除以下行应该可以解决问题，或者为时间/日期选择器选择另一个 html 元素。

```
jQuery('#pyre_open').datepicker({
    dateFormat : 'DD, d MM, yy'
}); 
```

# sql - ORA-01861 文字与 SELECT 语句上的格式字符串不匹配

> ID：15103230
> 
> 赞同：0
> 
> 时间：2013-02-27T02:38:31.503
> 
> 标签：sql, oracle, sqlexception

再会。

我正在执行查询并遇到：

```
ORA-01861 literal does not match format string error. 
```

我执行了这个查询并且它工作了。

```
SELECT * FROM GCACC_OPERATION_DETAIL WHERE id_notice in (75078741) 
AND id_analytical_center in (100000002) 
AND interface_date = '2013-06-30' 
AND generic_client = 'someGenClient' 
AND document_class = 'DOCCLA0001' 
AND accounting_tag_identifier = 1 
AND generated_actual_acc_doc 
IN (select id_accounting_document 
from gcacc_accounting_document 
where document_status = 'DOCSTA0001'); 
```

我的另一个查询写在下面，它不起作用。

```
SELECT * FROM GCACC_OPERATION_DETAIL WHERE id_notice IN (75078741) 
AND id_analytical_center in (100000002) 
AND generic_client = 'someGenClient' 
AND document_class = 'DOCCLA0001' 
AND accounting_tag_identifier = 1 
AND interface_date = '2013-06-30' 
AND ind_pending_process = 1 
AND operation_type 
IN (select cod_develop from gcacc_operation_type where ind_operation = 'B'); 
```

这真的很奇怪，因为错误发生在日期部分，但我正在为日期部分编写相同的语法。我可能在这里错过了一些愚蠢的东西，需要更新鲜的眼睛。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T02:49:39.620

我不知道具体问题是什么，但假设“interface_date”是 DATE 类型，在查询日期时使用文字是不好的做法。这假设默认 NLS_DATE_FORMAT 与您的日期文字一致。那会回来咬你。为确保您的日期约束是可移植的，请更改为：

```
AND interface_date = to_date('2013-06-30','YYYY-MM-DD') 
```

# gruntjs - Grunt 似乎在第一次运行时跳过了一些任务

> ID：15103231
> 
> 赞同：2
> 
> 时间：2013-02-27T02:38:36.300
> 
> 标签：gruntjs

请原谅我咕哝的小白。我已经正确安装了 grunt 0.4 并且可以正常工作，我很喜欢它。

但是，我不明白为什么我的默认任务总是在第一次跳过一些子任务。

这是 Gruntfile 的相关部分：

```
// Project configuration.
grunt.initConfig({
  pkg: grunt.file.readJSON('package.json'),

  copy: {
    main: {
      files: [
        {src: ['src/**'], dest: 'temp/'} // includes files in path and its subdirs
      ]
    }
  },

  uglify: {
    main: {
      files: grunt.file.expandMapping(['temp/**/*.js', '!temp/**/*min.js'], './')
    }
  },

  imagemin: {
    main: {
      files: grunt.file.expandMapping(['temp/**/*.png', 'temp/**/*.jpg'], './')
    }
  },

  compress: {
    main: {
      options: {
        archive: 'archive.zip'
      },
      files: [
        {expand: true, cwd: 'temp/src/', src: ['**'], dest: './'} // makes all src relative to cwd
      ]
    }
  },

  clean: ["temp", "archive.zip"]

});

// Load the plugins
grunt.loadNpmTasks('grunt-contrib-copy');
grunt.loadNpmTasks('grunt-contrib-uglify');
grunt.loadNpmTasks('grunt-contrib-imagemin');
grunt.loadNpmTasks('grunt-contrib-compress');
grunt.loadNpmTasks('grunt-contrib-clean');

// Default task(s).
grunt.registerTask('default', ['clean', 'copy', 'uglify', 'imagemin', 'compress']);
grunt.registerTask('test', ['clean', 'copy', 'uglify']); 
```

在第一次运行时`grunt`，uglify 和 imagemin 任务都不处理（和输出）任何东西。如果我再次启动它一切正常。如果我手动删除“temp”文件夹并重新启动`grunt`，uglify 和 imagemin 不会再做任何事情。

请帮助我找出我做错了什么。节点版本为 0.8.2，gruntcli 0.1.6，grunt 0.4.0

谢谢阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:46:32.037

原因是 grunt.file.expandMapping （在两个任务中都使用）在加载 gruntfile 时运行，而不是在运行实际任务时运行。因此通过其他任务生成的文件将无法用于您的 imagemin/uglify-task。

您应该像在其他任务中一样使用文件对象！

# html - 如何使 div 调整大小以填充整个浏览器窗口？

> ID：15103233
> 
> 赞同：1
> 
> 时间：2013-02-27T02:38:45.353
> 
> 标签：html, css, dynamic, resize

请到这里： [http ://demo.thecogworks.co.uk/umbraco/login.aspx](http://demo.thecogworks.co.uk/umbraco/login.aspx)

使用此帐户登录： 用户：demo 密码：password

现在尝试调整浏览器窗口的大小，并查看随着浏览器窗口调整的 div 大小。我想它不适用于仅CSS。我对么？我怎样才能创造出这样的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T03:11:54.827

它仅适用于 css（如果您希望它在移动设备上正确显示，也可能与“viewport”元标记一起使用。）。

如果您希望您的 html 页面表现得像这样，您必须使用 % 作为宽度（例如宽度：100%）。在这种情况下，div 的宽度将基于（相关）视口的大小。

这就是所谓的灵活布局。它是创建响应式网页的方式之一。

你可以在这里阅读更多 ：

*   [http://www.flexiblewebbook.com](http://www.flexiblewebbook.com)。（这是一本关于不同类型布局的书）
*   [http://alistapart.com/article/responsive-web-design](http://alistapart.com/article/responsive-web-design)（作为开始）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T03:13:50.270

您是对的，您提供的示例中的页面没有使用普通的 css，而是使用 javascript 在窗口调整大小时呈现 css。

您的示例中的一行（在 html 输出中具有内联样式）：

```
<div id="treeWindow" class="panel" style="height:380px;width:200px;"> 
```

因此，示例文档样式中的所有度量都分配有绝对单位 - 以 px 为单位，并且不会在浏览器窗口大小调整时进行调整。因此，就调整大小而言，它使用类似的东西

```
var clientWidth=jQuery(window).width();
var leftWidth=parseInt(clientWidth*0.25); 
```

获取新的浏览器窗口宽度和类似的高度

```
var clientHeight=jQuery(window).height()-48;
var treeHeight=parseInt(clientHeight-5); 
```

和功能

```
function resizeGuiWindow(windowName,newWidth,newHeight,window){
   resizePanelTo(windowName,false,newWidth,newHeight);
} 
```

然后应用于 treeWindow 对象

```
resizeGuiWindow("treeWindow",leftWidth,treeHeight); 
```

这可以在示例页面的源代码中找到。但是，您可以通过在样式中使用相对单位，在 css 中完成所有这些操作。

阅读有关响应式设计、自适应 CSS 和流畅布局的更多信息。

**编辑：**我几乎与 Georgii 同时发布了答案。尽管他没有直接回答有关您的示例页面的问题，但他所说的一切都是正确的，并且他添加了一些关于灵活布局的良好资源，您可以在其中找到所有信息以仅使用 css 构建类似页面。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T03:42:27.593

在研究了流式布局之后，我终于能够在 CSS 中创建整个布局（没有 javascript）。这是 jsfiddle 中的工作版本：http: [//jsfiddle.net/Yv4ja/](http://jsfiddle.net/Yv4ja/)供以后可能需要它的任何人使用：

CSS：

```
 .left{
    position:absolute;
    width:30%;
    background:red;
    left:0;
    bottom:0px;
    top:100px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}
.right{
    overflow:hidden;
    background:green;
    position:absolute;
    right:0;
    width:70%;
    bottom:0px;
    top:100px;
}

html, body{
    min-height:100%;
    height:100%;
    padding:0px;
    margin:0px;
    position:relative;
}

.header{
    width:100%;
    height:100px;
    background:yellow;
}

.left .content {
    background:blue;
    position:absolute;
    top:5px;
    left:5px;
    right:5px;
    bottom:100px;
    overflow:auto;
    padding:5px;
    border:1px solid yellow;
}

.left .bottom-content {
    height:100px;
    position:absolute;
    left:5px;
    right:5px;
    bottom:5px;
    background:black;
} 
```

HTML：

```
<div class="header">header</div>
<div class="wrapper">
    <div class="left">
        <div class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin aliquam adipiscing augue a porta. Sed fringilla sodales nisl ut iaculis. Aenean eu arcu lectus. Vivamus ut felis nibh, eu rutrum magna. In auctor varius ullamcorper. In diam turpis, ornare id pellentesque at, blandit et magna. Integer eget dolor tortor, sed vehicula magna. Quisque metus turpis, mollis porta feugiat vel, condimentum in eros. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec eu mi est, vel euismod velit. Vestibulum ante odio, molestie ut imperdiet eget, aliquet nec elit. Aenean arcu massa, vestibulum eu convallis ut, porttitor ut orci. Fusce eget sem augue, vitae placerat velit. Suspendisse interdum, nulla eget pharetra cursus, nunc elit iaculis nisl, vitae fringilla massa purus nec nunc. Quisque rutrum ornare turpis quis blandit. Mauris venenatis convallis elementum.

Etiam ut magna dolor. Sed eget purus ut nulla feugiat egestas. Quisque quam ligula, dapibus non cursus quis, commodo at quam. Vivamus porttitor, urna nec ultricies scelerisque, massa purus congue ligula, in egestas lectus magna eget est. Ut commodo viverra augue non semper. Suspendisse potenti. In mollis ultrices posuere. Integer mollis, lacus et pretium molestie, elit felis tincidunt elit, at pellentesque turpis diam lacinia quam.

Aenean vehicula, lorem et adipiscing molestie, orci nisl vulputate dui, et tempor erat nibh eget dolor. Nullam posuere lorem eu diam imperdiet et molestie arcu lobortis. Mauris vestibulum mollis lacus non imperdiet. Morbi tortor tortor, pulvinar nec viverra vitae, laoreet nec urna. Quisque in urna turpis. Nullam vel diam dui. Nunc scelerisque, arcu id pulvinar consectetur, purus elit euismod justo, in convallis lacus nisi vel velit.

Aliquam porttitor condimentum sapien at consectetur. Integer ac diam id felis semper pretium. Integer elementum venenatis nunc, ac molestie mauris suscipit sed. Nunc porttitor eleifend ipsum, sit amet ornare lacus dapibus a. Integer adipiscing, quam sed malesuada vehicula, eros erat egestas quam, eu rutrum sem turpis sit amet elit. Pellentesque metus nisl, malesuada et sagittis at, molestie a sapien. Duis vestibulum porta lacus et ultrices.

In auctor vulputate vestibulum. Integer porta quam ante, sed molestie leo. Aliquam cursus enim in augue euismod id porta eros gravida. Mauris lectus ipsum, luctus sit amet consectetur non, venenatis eget ligula. Suspendisse potenti. Vestibulum consequat accumsan orci ut lobortis. Maecenas velit diam, dapibus sit amet tincidunt eu, cursus in erat. Phasellus ac interdum lectus. Phasellus placerat, lacus vitae condimentum placerat, nisl dui varius ipsum, in eleifend metus diam sit amet libero. Vestibulum nec dolor at augue malesuada vestibulum. Praesent euismod, nibh a imperdiet convallis, est leo cursus elit, nec interdum ipsum mauris id urna. Integer at augue diam. Suspendisse tincidunt accumsan porta. Sed vehicula imperdiet velit et sagittis.</div>
        <div class="bottom-content"></div>
        </div>

    <div class="right">right</div>
</div> 
```

# java - 3DES的ECB加密算法

> ID：15103237
> 
> 赞同：0
> 
> 时间：2013-02-27T02:39:38.687
> 
> 标签：java, des

数据将被加密：`5140000000080401AEBFFFFFFFF7FBFE`

关键是：`00000000000000000000000000000000`

和最终结果：`DBBE8A87A4E37D95B5EDDD2BE6A4151F`

```
//SecretKey to save data
    private SecretKey desKey;

    //Complete encryption and decryption work
    private Cipher c;

    //Save encryption results
    private byte[] cipherResultByte;

    private final static String Algorithm = "DESede/ECB/NoPadding";//Encryption method/operation mode

    private static DESedeKeySpec dks;

    private static SecretKeyFactory keyFactory;   

    public DESeseTest02() {

        Security.addProvider(new com.sun.crypto.provider.SunJCE());

        try {

            dks = new DESedeKeySpec("00000000000000000000000000000000".getBytes());   

             keyFactory = SecretKeyFactory.getInstance("DESede");

            //Generate key
            desKey=keyFactory.generateSecret(dks);

            //Generate Cipher object, specify its support DES algorithm
            c=Cipher.getInstance(Algorithm);

        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        } catch (NoSuchPaddingException e) {
            e.printStackTrace();
        } catch (InvalidKeyException e) {
            e.printStackTrace();
        } catch (InvalidKeySpecException e) {
            e.printStackTrace();
        }
    }

    public byte[] createEncryptor(byte[] b){

        try {

//          System.out.println(str);
            //根据密钥，对Cipher进行初使化，DECRYPT_MODE加密模式
            c.init(Cipher.ENCRYPT_MODE, desKey);

//          byte[] input=str.getBytes();
//          System.out.println(input.length);

            //Encryption, the results will be preserved
            cipherResultByte=c.doFinal(b);

        } catch (InvalidKeyException e) {
            e.printStackTrace();
        } catch (IllegalBlockSizeException e) {
            e.printStackTrace();
        } catch (BadPaddingException e) {
            e.printStackTrace();
        }
        return cipherResultByte;
    } 
```

但结果并不如预期，为什么？任何人的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:13:16.860

代替

```
"00000000000000000000000000000000".getBytes() 
```

和

```
new byte[34] 
```

"0".getBytes() 与 new byte[]{0} 不同

# php - 在两个 html 文件之间用 php 交换元素

> ID：15103238
> 
> 赞同：-2
> 
> 时间：2013-02-27T02:39:38.793
> 
> 标签：php, html, copy-and-swap

我有一个我想用 php 解决的问题，但我在 php 编程方面完全是菜鸟问题是，我正在用 jquery 修改一个 html 表，我接下来要做的是交换这个另一个 html 文件中带有另一个精确表的表（某些单元格的类除外）

假设第一个文件名为 scheduleAdmin.html，并且有我想要“转移”到另一个文件（位于同一目录中）的表，名为 schedule.html。这两个文件都有这个带有 id='schedule' 的表。

我相信这对 php 来说是一件容易的事，但我真的没有取得太大进展。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:20:45.357

> 功能的一部分。这样做的目的是让老师更新她的日程安排。她进入此页面进行更改，这些更改反映在主页中，供潜在学生查看

这很简单......基本上你只需要输出数据，并使用稍微不同的标记。因此，您需要做的第一件事是拆分容器和内容，然后重命名文件，以便您可能拥有：

在`scheduleAdmin.php`：

```
<?php include(__DIR__ . '/functions.php'); // include path/to/this/files/folder/functions.php ?>
<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <!-- your html -->
          <?php // use the special include function to include the partial for the table ?>
          <?php include_partial('_scheduleTable.php', array('mode' => 'admin')); ?>
        <!-- the rest of your html -->
    </body>
</html> 
```

然后在`schedule.php`：

```
<?php include(__DIR__ . '/functions.php'); // include /path/to/this/files/folder/functions.php ?>
<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <!-- your html -->
          <?php // use the special include function to include the partial for the table ?>
          <?php include_partial('_scheduleTable.php', array('mode' => 'admin')); ?>
        <!-- the rest of your html -->
    </body>
</html> 
```

现在我们需要创建`include_partial`函数，它将采用“部分”（一个 html 片段）的名称和在该“部分”中可用的命名变量数组：

```
// functions.php

/**
 * Directly renders a partial to the screen
 * 
 * @param string $file the filesystem path to the partial
 * @param array $vars variables that should be available to the partial
 */
function include_partial($file, $vars = array()) {
   // let get_partial do all the work - this is just a shortcut to 
   // render it immediately
   echo get_partial($file, $vars);
}

/**
 * Get the contents of a partial as a string
 * 
 * @param string $file the filesystem path to the partial
 * @param array $vars variables that should be available to the partial
 * @return string
 */
function get_partial($file, $vars = array()) {
    // open a buffer
    ob_start();

    // import the array items to local variables
    // ie 'someKey => 'someValue' in the array can be accessed as $someKey
    extract($vars);

    // include the partial file
    include($file);

    // get the contents of the buffer and clean it out
    // then return that
    return ob_get_clean();
} 
```

所以现在我们有了这个集合，我们只需要创建部分文件`_scheduleTable.php`：

```
<?php $classnname = isset($mode) && $mode == 'admin' ? 'the_css_class_for_admin' : 'the_other_css_class'; ?>
<table id="schedule">
  <tr class="<?php echo $classname ?>" >
    <!-- your td's and what not - jsut needed something to show you how to echo the classname -->
  </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:27:07.730

也许这会奏效。

在您的第一个文件中：

```
<?php ob_start(); ?>

    <table id="schedule">
    ...

<?php ob_end_flush();?>

<?php 
    $contents = ob_get_contents();
    file_put_contents('schedule.html',$contents);
?> 
```

# javascript - 检查是否是一个对象

> ID：15103239
> 
> 赞同：5
> 
> 时间：2013-02-27T02:39:42.147
> 
> 标签：javascript

我需要检查变量是否是纯 Object 实例。例如：一个 HTMLElement 是*instanceof* Object。但我真的需要检查它是否*只是*一个对象，就像`{a: true, b: false}`是。它不能验证数组。

***注意**：如果更好的话，我可以使用 Chrome 的更新功能。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T02:41:59.350

检查构造函数。[似乎适用于所有浏览器](http://jsfiddle.net/zEWYY/)

```
if (a.constructor === Object)
// Good for arrays
([]).constructor === Object => false
// Good for HTMLElements
document.body.constructor === Object => false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T02:45:04.153

```
var proto = Object.getPrototypeOf(obj);

var protoproto = Object.getPrototypeOf(proto);

if (proto === Object.prototype && protoproto === null) {
    //plain object
} 
```

如果您要使用`null`原型创建对象，则可以去掉`protoproto`, 并与`proto`or`Object.prototype`进行比较`null`。

这样做的危险在于它不能防止`Object.prototype`自己被传递，可能会导致`Object.prototype`.

* * *

像这样更短更安全：

```
var proto = Object.getPrototypeOf(obj);

if (proto && Object.getPrototypeOf(proto) === null) {
    // plain object
} 
```

* * *

# java - Eclipse 插件自动获取

> ID：15103240
> 
> 赞同：0
> 
> 时间：2013-02-27T02:39:42.440
> 
> 标签：java, eclipse, maven, plugins, m2e

我有一个 Eclipse 项目（通过 maven 原型生成并需要 m2e），我想将其部署给许多用户。目前我告诉他们这样做的方式非常手动，（即下载这个插件，下载那个插件，下载这个m2e连接器）。有没有办法在我的项目中写下插件依赖项，以便在导入项目时 Eclipse 会告诉用户“这个项目取决于你是否安装了这些 Eclipse 插件，你希望 Eclipse 为你自动获取插件吗？ "

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:46:34.573

是的，Eclipse 成员公司创建了几个工具（包括免费使用和付费版本），它们可以完全满足您的需求。这两种产品都有“配置文件”的概念，它是 Eclipse 插件的预设配置（基本上是一个可用的包加上一堆插件）。然后，一旦您配置了此配置文件，您就可以通过电子邮件或产品提供的任何共享机制与我们的团队自由共享它。一旦您的团队成员接受并开始“使用”配置文件，这些软件产品将准确地提供每个人运行 Eclipse 项目所需的依赖项。

### 来自 Genuitec 的[脉冲](http://www.poweredbypulse.com)

根据您团队的需求，他们有[社区版](http://www.poweredbypulse.com/community_edition.php)和[托管团队版。](http://www.poweredbypulse.com/managed_team.php)

### 来自[EclipseSource的 Yoxos](http://eclipsesource.com/en/products/yoxos/)

如果您想公开分享您的个人资料，他们有一个[免费计划。](https://yoxos.eclipsesource.com/)如果您想让它们保密，他们有一个[定价计划](https://yoxos.eclipsesource.com/plans.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:55:54.637

请先阅读有关部署 eclipse 插件的信息，所有这些都在 eclipse 的基础架构中可用。

每当您通过 Eclipse 中的更新管理器安装某些东西时，您都不会安装插件，而是安装功能，这些功能是插件组以及对其他功能的依赖关系。因此，在为插件创建功能时，您必须做两件事：

*   在特征编辑器中列出所有相关特征。
*   在“要访问的站点”选项卡上，您必须列出相关功能的更新站点 URL。

P2 更新管理器将在之后的插件安装过程中自动神奇地发现所需的一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T03:20:49.033

不确定这有多大帮助，但如果 Eclipse Marketplace 可用，为什么不使用它。节省您手动下载和安装插件的工作。

# resize - PySide：QGraphicsView 中可调整大小的场景

> ID：15103242
> 
> 赞同：0
> 
> 时间：2013-02-27T02:39:54.163
> 
> 标签：resize, pyside, qgraphicsview, qgraphicsscene

我正在尝试找到一种方法来**标记 a 的边框`QGraphicsScene`，并使其在 a 内可调整大小`QGraphicsView`，以创建类似于 Microsoft Paint 的东西。**

* * *

换句话说，我的当前`QGraphicsView`看起来像这样：

![当前的 QGraphicsView](../Images/24b6de2a6d1bb5f01c881de7a5cfcae0.png)

但是我的图像只有这么大，如红框所示：

![红色框表示的图像大小。 背景不算作图像的一部分。](../Images/8a6120c6b7ba5f806d2972aa10bc0f90.png)

**我希望我`QGraphicsView`是这样**的（小黑框是用于调整画布大小的抓角器）：

![最终可调整大小的 QGraphicsView](../Images/2c104e7fe66fa144e691a011557ae024.png)

* * *

**在功能上，我希望它类似于 MS Paint**： ![MS 油漆示例](../Images/b9a3f4f4d2b8a2163251192a369a5cf6.png)

画布（场景）可调整大小，窗口（视图）上的滚动条会在需要时出现。蓝色背景颜色（纯灰色背景）出现在画布后面。

我将如何实现这一目标？

* * *

为了尝试获得灰色背景，我一直在尝试使用`QGraphicsView.setBackgroundBrush()`and `QGraphicsScene.setBackgroundBrush()`。我了解到，如果设置了背景画笔，则它`QGraphicsView`的背景画笔将完全覆盖`QGraphicsScene`的背景画笔。即使我只为 设置背景画笔`QGraphicsScene`，该背景画笔也会延伸到图像的原始边界。

* * *

这是**[我的测试代码的链接](http://pastie.org/6376354)**。帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:56:28.733

我必须与您的构造函数斗争......不知道它是否适用于 Windows，但必须使其适用于 Linux。尝试 ：

```
def setPixmap(self, pixmap):
    if self.pixmap_item:
        self.removeItem(self.pixmap_item)

    self.pixmap_item = self.addPixmap(pixmap)

    self.setPixBackGround()

def setPixBackGround(self):
    # put Background rect for image
    pixR = self.pixmap_item.pixmap().rect()
    bgRectangle = self.addRect(pixR.x()-10, pixR.y()-10, 
                    pixR.width()+20, pixR.height()+20)
    # set color and Z value to put it behind image
    bgColor = QColor(58, 176, 176)
    bgRectangle.setBrush(bgColor)
    bgRectangle.setZValue(-.1)
    # take coordinates for brabbers
    bgR = bgRectangle.rect()
    grab1R = QRect(-5,-5,10,10)
    # put grabbers as wish...
    grab1 = self.addRect(grab1R)
    grab1.setPos(bgR.topLeft())

    grab2 = self.addRect(grab1R)
    grab2.setPos(bgR.topRight())
    # ....etc.... 
```

# mongodb - SQL 到 MapReduce：计算多对一关系中的唯一键？

> ID：15103247
> 
> 赞同：0
> 
> 时间：2013-02-27T02:40:21.987
> 
> 标签：mongodb, mapreduce

最初，像往常一样，我有一个订单有许多订单项而许多订单项只有一个订单的关系。

使用 mongoDB，我做了这个文档来表示它：

```
{
    "_id" : ObjectId("511b7d1b3daee1b1446ecdfe"),
    "l_order" : {
        "_id" : ObjectId("511b7d133daee1b1446eb54d"),
        "o_orderkey" : NumberLong(1),
        "o_totalprice" : 173665.47,
        "o_orderdate" : ISODate("1996-01-02T03:00:00Z"),
        "o_orderpriority" : "5-LOW",
        "o_shippriority" : 0,
    },
    "l_linenumber" : 1,
    "l_shipdate" : ISODate("1996-03-13T03:00:00Z"),
    "l_commitdate" : ISODate("1996-02-12T03:00:00Z"),
    "l_receiptdate" : ISODate("1996-03-22T03:00:00Z"),
} 
```

我的意图是翻译这个 sql 查询：

```
select
    o_orderpriority, 
    count(*) as order_count
from 
    orders
where 
    o_orderdate >= date '1993-07-01'
    and o_orderdate < date '1993-07-01' + interval '3' month
    and exists (
        select 
        *
        from 
        lineitem
        where 
        l_orderkey = o_orderkey
        and l_commitdate < l_receiptdate
    )
group by 
    o_orderpriority
order by 
    o_orderpriority; 
```

为此，请使用两个 mapreduce 函数：

*第一的*

```
db.runCommand({
    mapreduce: "lineitem",
    query: {
        "l_order.o_orderdate": {'$gte': new Date("July 01, 1993"), '$lt': new Date("Oct 01, 1993")}
    },
    map:    function Map() {
                if(this.l_commitdate < this.l_receiptdate){
                    emit( this.l_order.o_orderkey, this.l_order.o_orderpriority );
                }   
            },
    out: 'query004a'
}); 
```

*第二*

```
db.runCommand({
    mapreduce: "query004a",
    map:    function Map() {
                /*Remenbering, the value here will be this.l_order.o_orderpriority from the previous mapreduce function*/
                emit( this.value, 1 );
            },
    reduce: function(key, values) {
                return Array.sum(values);
            },
    out: 'query004b'
}); 
```

首先，我将日期范围内的文档片段分开并尊重比较，将它们分组为订单键以避免重复。在第二个中，我将 o_orderpriority 和 sum 分组。

令我惊讶的是，答案比我预期的要大。但是为什么以及在哪里发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:50:27.190

在您的第一个 map 函数中，您应该使用 'oderpriority' 作为键和 'orderkey' 作为值 - 这会将集合减少为您在第二个 mapReduce 中想要的键。（需要指定reduce函数，否则mapReduce会报错）。

所以，这可能看起来像这样：

```
OrderDateMin = new Date("1996-01-01");
OrderDateMax = new Date("1996-04-01");
// first where on oderdate
query = {
    "l_order.o_orderdate": {$gte: OrderDateMin, $lt: OrderDateMax}
}
map1 = function() {
    //second "where" on commitdate < receiptdate
    if ( this.l_commitdate < this.l_receiptdate ) {
        // emit orderpriority as key, "1" as counter
        emit( this.l_order.o_orderpriority, this.l_order.o_orderkey );
    }
};
reduce1 = function(key, values) {
    return 1;
}
db.runCommand({
    mapReduce: "xx",
    query: query,
    map: map1,
    reduce: reduce1,
    out: 'query004a',
})
map2 = function() {
    //_id is ordepriority
    emit( this._id, 1 );
};
reduce2 = function(key, values) {
    // count entries per orderpriority
    count = 0;
    values.forEach( function(value) { count += value; } );
    return count;
}
db.runCommand({
    mapReduce: "query004a",
    map: map2,
    reduce: reduce2,
    out: 'query004b',
}) 
```

现在，可以使用一个更快的聚合命令来实现相同的效果（在 C 中实现，而不是在 JavaScript 中实现）：

```
db.xx.aggregate([
    // first "where", this will use an index, if defined
    { $match: { 
        "l_order.o_orderdate": { $gte: OrderDateMin, $lt: OrderDateMax }
    }},
    // reduce to needed fields, create a field for decision of second "where"
    { $project: { 
        "key": "$l_order.o_orderkey",  
        "pri": "$l_order.o_orderpriority",
        okay: { $cond: [ {$lt: ["l_commitdate", "l_receiptdate"]}, 1, 0 ] }
    }},
    // select second where condition matched
    { $match: { "okay": 1 } },
    // group by priority and key
    { $group: { _id: { "pri": "$pri", "key": "$key" } } },
    // group by priority - count entries
    { $group: { _id: "$_id.pri", "count": { $sum: 1 } } },
]) 
```

这将返回类似：

```
{ "result" : [ { "_id" : "5-LOW", "count" : 1 } ], "ok" : 1 } 
```

最后但并非最不重要的一点：关于设计的建议：

如果您的结构反过来会更简单：一个“订单”集合，其中订单项目嵌入为项目数组。这将避免在整个集合中出现重复的订单数据。

更多信息：

[http://docs.mongodb.org/manual/reference/command/mapReduce/#mapReduce](http://docs.mongodb.org/manual/reference/command/mapReduce/#mapReduce)

[http://docs.mongodb.org/manual/reference/aggregation](http://docs.mongodb.org/manual/reference/aggregation)

这有帮助吗？

干杯

罗纳德

# java - 如何将运算符作为参数传递？

> ID：15103252
> 
> 赞同：3
> 
> 时间：2013-02-27T02:41:08.957
> 
> 标签：java, arguments, operators

我想将四个运算符（+、-、*、/）之一传递给一个方法，并让它根据传递的运算符对两个整数执行操作。

```
static int op(String oper) {
    eval = 8 oper 4;
} 
```

例如，如果我用 调用它`op("+");`，它会添加`8`and `4`。

现在，我只是`;`在`8`.

我应该使用其他语法吗？我只是想减少一些代码的大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T02:50:40.180

在 Java 8 中，我们将能够做类似的事情

```
foo(IntBinaryOperator oper) 

    eval = oper.apply(8, 4); 
```

然后

```
foo(Integer::sum);

IntBinaryOperator times = (a,b)->a*b;
foo(times);

foo( (a,b)->a/b ); 
```

# racket - Drracket 列出仅添加数字而忽略其他数据类型

> ID：15103254
> 
> 赞同：-2
> 
> 时间：2013-02-27T02:41:33.633
> 
> 标签：racket

您好，我需要创建一个函数，该函数使用一个列表，该列表仅汇总列表中的数字并忽略任何其他类型的数据（字符串等）

示例（仅添加数字（cons 5 (cons "b" (cons 2 (cons "whatsup" empty)))））应该出来（cons 7 (cons "b" (cons "whatsup" empty)））

在收集数字并将它们全部相加时，保持所有字符串或其他数据类型的顺序。

如果没有数字，只有字符串，那么前面应该是 0

示例（仅添加数字 (cons "eb" (cons "b" ( cons (make posn 5 0) (cons "whatsup" empty)))））应该出现在 (cons 0 (cons "eb" (cons “b”（缺点（使 posn 5 0）（缺点“whatsup”为空）））））

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:52:09.960

由于这闻起来有点像家庭作业，我会让你走上正轨：

```
#!/usr/bin/racket
#lang racket

(define (sum lst)
  (foldl (lambda (num sum)
           (if (number? num) (+ sum num) sum))
         0
         lst))

(sum '(1 2 "hello")) 
```

所以这将返回一个平面列表的总和......应该是一个更简单的步骤来将它推到列表的前面。

请注意，该[`foldl`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket/private/list..rkt%29._foldl%29%29)函数采用一个函数来应用每个元素、起始值和列表。

# ios - 接管音频会话

> ID：15103255
> 
> 赞同：8
> 
> 时间：2013-02-27T02:41:42.433
> 
> 标签：ios, events, playback, avplayer, remote-control

我的应用程序支持来自外部音乐应用程序（如 Pandora）的音频或从应用程序内部播放，使用 AVPlayer 播放 iPod 库中的 AVPlayerItem。

在我的 AppDelegate 中，我调用： - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

```
AudioSessionInitialize(NULL, NULL, interruptionListenerCallback, self);
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: nil];

UInt32 otherAudioIsPlaying;
UInt32 propertySize = sizeof (otherAudioIsPlaying);

AudioSessionGetProperty (
                         kAudioSessionProperty_OtherAudioIsPlaying,
                         &propertySize,
                         &otherAudioIsPlaying
                         );

if (otherAudioIsPlaying) {
    NSLog(@"Allow Mixing for background music (like Pandora,...)");
    UInt32 allowMixing = true;
    AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof (allowMixing), &allowMixing);
}

[[AVAudioSession sharedInstance] setActive: YES error: NULL]; 
```

...

请注意，我也注册了中断。

因此，如果应用程序在 Pandora 播放时启动，Pandora 将继续播放。

稍后，如果用户决定播放 iPod 库中的音乐，我调用： [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback withOptions: 0 error: nil]; 为了确保我收到远程控制事件，我调用： [self becomeFirstResponder]; [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];

直到这里，一切正常：应用程序现在播放 iPod 库中的音乐（当将类别设置为播放时，Pandora 已停止）。

单击耳机上的中心按钮时出现我的问题。在上面描述的序列中，当点击中心按钮时，interruptListenerCallback 被调用！我期待调用 remoteControlReceivedWithEvent 回调。

所以，我的问题是：你如何确保外部音乐播放器不再处理远程控制事件，并且我的应用程序得到它们？

在以前从未玩过 Pandora 的不同用例中，一切正常：我的应用程序按预期接收远程控制事件；所以我知道这部分代码有效。

谢谢

# html - 纯 SVG Javascript 库

> ID：15103258
> 
> 赞同：4
> 
> 时间：2013-02-27T02:41:59.290
> 
> 标签：html, svg

我正在寻找一个可以加快 HTML5 SVG 编写和操作对象的库。我想要可以利用所有 SVG 功能的强大功能的东西。

我使用的是 Raphael，但令人讨厌的是它（严重）将功能限制为 VML。我不关心跨浏览器的兼容性，我只想要 SVG 的完整 javascript 抽象。我不关心转换为 flash，我不关心转换为 2d Canvas，......你明白了！

有哪些选择？还是我应该习惯于原始的 SVG 声明和操作？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T10:02:40.140

[有一个名为svg.js](http://svgjs.com/)的新紧凑库，它提供了更简单的 svg 操作，并且没有像[Raphaël](http://raphaeljs.com)那样的任何 VML 遗留代码/限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T08:28:46.773

如果您的图形以某种方式从数据生成，我会尝试 D3.js。

即使你需要的数据权重很低，我认为看看它会很有用。

好的一面是它生成绝对标准的 svg，标准 css 样式，因此您可以轻松检查正在发生的事情。您甚至可以使用它来生成 svg，然后将您的 svg 复制/粘贴到没有 D3.js 的另一个项目中。

另一个优点是对过渡的支持，这是非常好的恕我直言。

[关联](http://d3js.org/)

# macros - 评估宏体内传递的参数

> ID：15103279
> 
> 赞同：1
> 
> 时间：2013-02-27T02:44:03.087
> 
> 标签：macros, lisp, common-lisp

我对如何评估传递给宏的参数有疑问，详情如下。

这个宏定义

```
(defmacro test-macro (xlist)
    `(* ,@xlist)) 
```

并且有这个全局变量`(defvar *test-list* '(1 100 2 200))`。

`*test-list*`传递给此宏时`(test-macro *test-list*)`，将返回此错误 -

```
value *TEST-LIST* is not of the expected type LIST.
   [Condition of type TYPE-ERROR] 
```

但是如果函数被修改为这个，则返回列表

```
(defmacro test-macro (xlist)
    `(,@xlist)) ;; removed the * operator 
```

`(test-macro *test-list*)`将返回`(1 100 2 200)`。

所以我的疑问是为什么`,@xlist`在第一种情况下没有得到评估，即在`*`应用运算符时。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:01:29.830

调试宏时，正确的方法是使用[`macroexpand`](http://www.lispworks.com/documentation/HyperSpec/Body/f_mexp_.htm)，而不是评估宏形式。例如，在您的情况下：

```
(defmacro test-macro1 (xlist) `(* ,@xlist))
(macroexpand '(test-macro1 foo))
==> (* . FOO)
(defmacro test-macro2 (xlist) `(,@xlist))
(macroexpand '(test-macro2 foo))
==> FOO 
```

两者都不是你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T04:08:36.113

令人困惑的是宏是一个**预处理器**：它没有知道运行时值的内置机制。因此，当您使用该术语时：

```
(test-macro test-list) 
```

宏看到的只是标识符`test-list`：它预先不知道运行时值是一个列表，只知道源程序使用了这个变量标识符。

宏是源到源的重写器：它不知道程序的动态。更聪明的编译器可能能够看到 test-list 是一个常量并进行内联，但宏扩展器并不那么聪明。

您可以做的可能是这样的：

```
(defmacro test-macro (xlist)
  (cond
    (;; If we see test-macro is being used with a quoted list of things
     ;; then we can rewrite that statically.
     (and (pair? xlist)
          (eq? (car xlist) 'quote)
          (list? (cadr xlist)))
     `(list 'case-1 (* ,@(cadr xlist))))

    (;; Also, if we see test-macro is being used with "(list ...)"
     ;; then we can rewrite that statically.
     (and (pair? xlist)
          (eq? (car xlist) 'list))
     `(list 'case-2 (* ,@(cdr xlist))))

    (else
     ;; Otherwise, do the most generic thing:
     `(list 'case-3 (apply * ,xlist)))))

;; This hits the first case:
(test-macro '(3 4 5))

;; ... the second case:
(test-macro (list 5 6 7))

;; ... and the third case:
(defvar test-list '(1 100 2 200))
(test-macro test-list) 
```

* * *

关于您的第二个版本：宏：

```
(defmacro test-macro (xlist)
  `(,@xlist)) 
```

相当于：

```
(defmacro test-macro (xlist)
  xlist) 
```

所以这就是为什么您没有收到在第一个版本中收到的错误。

# php - 如何计算和存储未来几天定期安排的双日活动的时间？

> ID：15103284
> 
> 赞同：-2
> 
> 时间：2013-02-27T02:44:48.657
> 
> 标签：php, mysql, date, datetime, time

在我的一个网站上，我需要为用户提供一种选择未来几天（包括今天）上午 11 点和下午 4 点时间段的方法，共有 8 个选项。当然，如果今天已经过了上午 11 点或下午 4 点，那么我不应该向他们展示过期选项。

因此，例如，如果现在是 2 月 28 日中午，那么我需要向用户显示以下 8 个选项：

```
28-Feb-13 at 4pm 
01-Mar-13 at 11am 
01-Mar-13 at 4pm 
02-Mar-13 at 11am 
02-Mar-13 at 4pm 
03-Mar-13 at 11am 
03-Mar-13 at 4pm 
04-Mar-13 at 11am 
```

此外，我需要一种将这些选项存储在 MySQL 中的方法，以便我现在可以将他们选择的日期/时间与他们的注册信息一起保存到数据库中。

这听起来很容易用语言解释，但我很难弄清楚如何用 PHP 进行编程。

我将如何使用`DateTime()`课程来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:49:40.043

这应该给你它的要点

```
$datetime = new DateTime();
$num_options = 8;
for ($i=0; $i<8; $i++)
{
    echo $datetime->format("d-M-y \a\\t ga") . "<br>";
    $datetime->modify("+12 hours");
} 
```

[看到它在行动](http://codepad.viper-7.com/NwQ514)

# django - 创建标签索引 Django

> ID：15103287
> 
> 赞同：1
> 
> 时间：2013-02-27T02:45:26.160
> 
> 标签：django, tags

我使用[django-taggit](https://github.com/alex/django-taggit)为博客创建标记系统。您如何分离和过滤对象，以便只显示带有选定标签的对象？如果你点击 django，有点像 StackOverflow 上的样子![标签](../Images/ab1a1893e999c17201920e8e5f665ac5.png)

它会给你所有标记为 django 的问题。我已经尝试过[这篇博](http://infostub.com/django/better-django-tagging-with-django-taggit)文中描述的方法，但我得到了一个`IndexError: tuple index out of range`. 这是我正在使用的代码：

```
url(r'^tagged/(?P<tag>[\w-]+)/$', TagView.as_view(), name='tag_url'),

class TagView(ListView):
    context_object_name = 'blog'
    template_name = 'links/index.html'
    def get_queryset(self):
        return Blog.objects.filter(tags__name__in=[self.args[0]])
    def get_context_data(self, **kwargs):
        context = super(TagView, self).get_context_data(**kwargs)
        context['requested_tag'] = self.args[0]
        return context

<a href='{% url tag_url tag=tag %}'>{{ tag.name }}</a> 
```

我是否缺少使这种方法起作用的东西？

这似乎是一种非常普遍的编程需求。也许您知道更好的方法...感谢您的想法！

* * *

编辑：TagView 基于@catherine 的建议：

```
class TagView(ListView):
    model = Blog
    context_object_name = 'blog_list'
    template_name = 'tag-list.html'
    def get_queryset(self):
        queryset = super(TagView, self).get_queryset()
        return queryset.filter(tags__name__in=self.kwargs['tags'])

class Blog(models.Model):
    name = models.CharField(max_length=50)
    date = models.DateTimeField()
    slug = models.SlugField()
    article = models.TextField()
    tags = TaggableManager()
    def __unicode__(self):
        return self.name 
```

标签列表.html：

```
{% block content %}
  stuff
{% for blog in blog_list %}
  {{ blog.article }}
  {{ blog.name }}
{% endfor %}
{% endblock %} 
```

模板中不存在 blog_list，并且没有可用的博客对象。相反，只有“东西”被呈现给模板。任何想法表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:30:35.290

```
class TagView(ListView):
    model = Blog
    ......

    def get_queryset(self):
        # Fetch the queryset from the parent get_queryset
        queryset = super(TagView, self).get_queryset()
        return queryset.filter(tags__name__in=self.kwargs['tag']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:52:42.577

此答案基于“编辑：基于@catherine 建议的 TagView：”。

你有一个错字，在`get_queryset`方法：

```
return queryset.filter(tags__name__in=self.kwargs['tags']) 
```

你使用`tag`而不是`tags`因此它应该是：

```
return queryset.filter(tags__name__in=[self.kwargs['tag']]) 
```

# ruby-on-rails-3 - 由于重定向，设计 JSON API 返回 406 而不是 401

> ID：15103288
> 
> 赞同：0
> 
> 时间：2013-02-27T02:45:34.867
> 
> 标签：ruby-on-rails-3, api, authentication, devise, warden

当我试图在没有适当身份验证的情况下请求端点时，我试图设计返回 401 和错误消息。

目前这是正在发生的事情：

在 2013 年 2 月 27 日 02:40:22 +0000 由 HomeController#index 处理为 JSON 完成 401 未授权在 0 毫秒内开始 GET "/api/v1/home/index.json"

在 2013 年 2 月 27 日 02:40:22 +0000 由 SessionsController#new 作为 JSON 处理 127.0.0.1 开始 GET "/api/v1/sign_in.json" 在 1ms 内完成 406 Not Acceptable (ActiveRecord: 0.0ms)

我怎样才能停止设计让我跳到 sign_in 而是让它只返回一个 401/json 响应。

我认为这可能与我尝试过的 CustomFailureApp 有关，但我不确定在这种特定情况下是否调用了 CustomFailureApp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-22T23:21:42.093

您可以制作自定义故障应用程序。

```
class JsonFailureApp < Devise::FailureApp
  def respond
    self.status = 401
    self.content_type = 'json'
    self.response_body = '{"error" : "Authentication error"}'
  end
end 
```

将此添加到您的设计初始化程序

```
config.warden do |manager|
  manager.failure_app = JsonFailureApp
end 
```

# jquery - jQuery.validate.js onkeyup = true 错误

> ID：15103289
> 
> 赞同：19
> 
> 时间：2013-02-27T02:45:38.517
> 
> 标签：jquery, jquery-validate

使用我的 jquery 验证配置，将 onkeyup 设置为 true 时出现以下错误。如果我将其设置为 false，它会起作用，但在模糊字段之前我不会得到验证反馈，我希望在每个 keyup 上得到验证：

```
$("#signupForm").validate({
        onkeyup: true,        
        onclick: false
        // rules omitted for brevity
    } 
```

我收到以下错误：

```
TypeError: validator.settings[eventType].call is not a function
validator.settings[eventType].call(validator, this[0], event);
jquery.validate.js line 391 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-27T03:20:34.143

您实际上需要将`onkeyup`选项设置为接受正在验证的元素作为参数的函数，因此请尝试更改：

```
onkeyup: true, 
```

到

```
onkeyup: function(element) {$(element).valid()} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-02-27T04:10:46.947

`onkeyup`默认启用，因此您无需将其设置为`true`. 如果这样做，您会破坏插件中已经内置的功能。

**你有三个选择：**

* * *

**1)** 将`onkeyup`选项排除在外`.validate()`。这会默认**启用**`onkeyup`功能。（编辑：“默认情况下”意味着*只有在*字段最初由另一个事件验证之后，才会在每个“key-up”事件上进行验证。）

 *****演示**：http: [//jsfiddle.net/ZvvTa/](http://jsfiddle.net/ZvvTa/)

* * *

**2)** `onkeyup`可以设置`false`为**禁用**此选项。

**演示**：http: [//jsfiddle.net/ZvvTa/1/](http://jsfiddle.net/ZvvTa/1/)

* * *

**3）** 替换`onkeyup`为您自己的回调函数以**修改**其操作方式。（Demo使用默认功能）

**演示**：http: [//jsfiddle.net/ZvvTa/2/](http://jsfiddle.net/ZvvTa/2/)

下面是**默认**的、**未修改**的`onkeyup`回调函数：

```
onkeyup: function( element, event ) {
    if ( event.which === 9 && this.elementValue(element) === "" ) {
        return;
    } else if ( element.name in this.submitted || element === this.lastElement ) {
        this.element(element);
    }
} 
```

* * *

请参阅： [http ://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

* * *

**编辑**：

*默认情况下，在*该字段最初由另一个事件 验证之前，插件不会执行任何“key-up”验证。*（“懒惰”验证）*

所以这里有一个更适当修改的`onkeyup`回调函数版本，它将提供*即时* `onkeyup`验证。 *（“渴望”验证）*

**演示：http: [//jsfiddle.net/QfKk7/](http://jsfiddle.net/QfKk7/)**

```
onkeyup: function (element, event) {
    if (event.which === 9 && this.elementValue(element) === "") {
        return;
    } else {
        this.element(element);
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-27T03:18:26.947

@Sparky 是对的，正确的答案是删除该`onkeyup`选项，我的小提琴正在工作，因为我删除了该`onkeyup`选项，而不是因为我将其更改为`keyup`.

默认情况下，验证将在 keyup 事件上发生，如果您想关闭此功能，则必须添加设置`onkeyup: false`。

请参阅更新的演示。

演示：[小提琴](http://jsfiddle.net/arunpjohny/p7Vg9/3/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T03:21:55.150

布尔值不是 onkeyup 事件的有效值。而是添加一个功能，关于需要做什么。尝试类似：

```
 onkeyup: function(element) {
           $(element).valid(); 
    }
    onblur: function(element) { 
         $(element).valid(); 
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-02T08:32:39.920

如何扩展onkeyup：

```
 $('#signup-form').validate({

        onkeyup: function(element) {
            var element_id = $(element).attr('id');
            if (this.settings.rules[element_id].onkeyup !== false) {
                $(element).valid();
            }
        }, 
```

所以现在在规则内你可以这样做：

```
 rules: {
            username: {
                required: true,
                minlength: 3,
                maxlength: 25,
                onkeyup: false, /* on blur validation */
            },
            password: {
                required: true,                   
                passwordmeter: true,
                onkeyup: true, /* on keyup validation */
            }, 
```

通过扩展**onkeyup**我们使其成为默认行为，因此粘贴`onkeyup: true`是可选的。***

# windows-phone-7 - 在也有 BackgroundAgent 的前台项目中引用 Caliburn.Micro

> ID：15103291
> 
> 赞同：0
> 
> 时间：2013-02-27T02:45:45.363
> 
> 标签：windows-phone-7, windows-phone-8, caliburn.micro

**哑巴：在下面回答。我猜对后代有用。**

我原以为这会很常见，我会找到一些关于此的信息，但到目前为止搜索还没有运气。

我有一个使用 Caliburn.Micro 的简单项目。我在共享库 ( )中拆分了一些共享**的非 Caliburn 依赖代码。****然后我创建了一个后台代理并仅**`Core`引用了 Core 。我还需要在我的前台项目中引用后台代理项目。

 ****只有我的前台项目依赖于 Caliburn**。

该应用程序构建、运行，并且我的代理在我的手机上运行。但是，XAP 验证失败：

```
[ERROR]: Unsupported API cannot be used by a background agent. Assembly Caliburn.Micro.dll was trying to use [whatever] 
```

现在，我知道我的共享库是否正在调用 Caliburn 但它没有依赖关系，这只是 Caliburn 包含在`bin\Release`XAP 中和内部。

我不敢相信**没有人**发布过没有后台代理的 Caliburn 驱动的应用程序，那么我该如何解决这个问题呢？我可以理解将不受支持的 API 代码拆分到一个单独的库中，但没有从代理调用代码*或* `Core`调用 Caliburn API。

作为参考，我的项目结构：

```
Core
 ^
 |_______________BackgroundAgent    
 |_WP71___v________^          ^
 |        |                   |
 |_WP80 __|___________________|
          v
       Caliburn 
```

抱歉，ASCII 艺术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:49:15.110

哦，上帝，我是个白痴。

为后代：

如果您*以前*在 BackgroundAgent 中引用过 Caliburn，因为您和我一样不了解情况，请**清理整个解决方案**。清除所有 bin 目录后，XAP 验证现在通过。

啊。**

# asterisk - 在星号拨号计划中搜索特定上下文名称

> ID：15103292
> 
> 赞同：0
> 
> 时间：2013-02-27T02:45:46.990
> 
> 标签：asterisk

当我为星号拨号计划使用vim编辑器时，有没有办法直接访问星号拨号计划中的特定上下文名称，我记得使用了一些带有\的命令，但不知道究竟是什么。感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:36:31.010

搜索文件是正斜杠

/搜索词

# java - 根据 ArrayList 中列的顺序生成 SQL

> ID：15103293
> 
> 赞同：0
> 
> 时间：2013-02-27T02:45:53.020
> 
> 标签：java, sql, random

我有一个名为的类`TableConnectionInfo`，其中包含有关表的详细信息，例如`tableName`它的`columns`. 我编写了一个方法，我应该使用`table.getColumns()`每个表的方法中的列值来生成随机选择 sql。

假设 table1 它有 10 列，例如 -

```
col1
col2
col3
col4
col5
col6
col7
col8
col9
col10 
```

下面是我尝试使用`table.getColumns()`. 这`table`是`TableConnectionInfo`对象。

```
private static Random random = new SecureRandom();

private String generateRandomSQL(TableConnectionInfo table) {

    int rNumber = random.nextInt(table.getColumns().size());

    List<String> shuffledColumns = new ArrayList<String>(table.getColumns());
    Collections.shuffle(shuffledColumns);

    String columnsList = "";

    for (int i = 0; i < rNumber; i++) {
        columnsList += ("," + shuffledColumns.get(i));
    }

    final String sql = "SELECT ID, CREATION_DATE, LAST_MODIFIED_DATE" + columnsList + "  from " + table.getTableName() + " where id = ?";

    return sql;
} 
```

下面是我的`TableConncectionInfo`课程，`tableName`它的`columns`列表

```
public class TableConnectionInfo {

    public String tableName;
    public ArrayList<String> columns;

    public ArrayList<String> getColumns() {
        return columns;
    }

    public void setColumns(ArrayList<String> columns) {
        this.columns = columns;
    }

    public String getTableName() {
        return tableName;
    }

    public void setTableName(String tableName) {
        this.tableName = tableName;
    }
} 
```

**问题陈述：-**

所以上述方法的问题是，它会随机打乱所有列，我会得到这样的结果-

```
`SELECT ID, CREATION_DATE, LAST_MODIFIED_DATE, col3, col1, col5 from table1 where id = ?`
`SELECT ID, CREATION_DATE, LAST_MODIFIED_DATE, col7, col2, col3, col1 from table1 where id = ?`
`SELECT ID, CREATION_DATE, LAST_MODIFIED_DATE, col8, col1, col2, col6 from table1 where id = ?`
... Other possible combinations 
```

我正在寻找这样的东西。在 ArrayList 中插入列的方式 - 假设这是顺序 -

`col1, col2, col3, col4, col5, col6, col7, col8, col9, col10`

那么我的列`SELECT SQL`应该是相同的顺序。意义-

```
`SELECT ID, CREATION_DATE, LAST_MODIFIED_DATE, col1, col3, col5 from table1 where id = ?`
`SELECT ID, CREATION_DATE, LAST_MODIFIED_DATE, col7, col8, col9, col10 from table1 where id = ?`
`SELECT ID, CREATION_DATE, LAST_MODIFIED_DATE, col1, col4, col5, col6, col10 from table1 where id = ?` 
```

它不应该是随机的，例如`col1`, then `col5`, then `col2`（这是错误的）。它应该是-

```
col5, col7, col10
col3, col6, col8, col10

other options 
```

**基本上，我希望在我的 SELECT sql 中以插入 ArrayList 的方式但以随机顺序插入列。Like- 按插入顺序选择任意 4 个或按插入顺序选择任意 6 个或按插入顺序选择任意 7 个**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:55:35.293

1 解决方法如下

```
private static String getColumns(final List<String> columns) {
    List<String> copy = new ArrayList<String>(columns);
    Collections.shuffle(copy);

    int rNumber = random.nextInt(columns.size());

    List<String> subList = copy.subList(0, rNumber);
    Collections.sort(subList, new Comparator<String>() {

        @Override
        public int compare(String o1, String o2) {
            return columns.indexOf(o1) < columns.indexOf(o2) ? -1 : 1;
        }
    });
    return StringUtils.join(subList, ",");
} 
```

我正在使用来自[commons-lang 的](http://commons.apache.org/proper/commons-lang//api/index.html)[StringUtils](http://commons.apache.org/proper/commons-lang//api/org/apache/commons/lang3/StringUtils.html)

# ruby-on-rails - Rails 协会难题

> ID：15103295
> 
> 赞同：0
> 
> 时间：2013-02-27T02:45:59.643
> 
> 标签：ruby-on-rails, activerecord, associations

我正在创建一项存储食品食谱的服务，并且我正在尝试创建一个成分列表，其中包含每种成分的可选首选品牌。因此，例如，我可能会说意大利面食谱使用去皮的西红柿，而首选品牌是 Cento。我的成分存储在分层类别树中，因此首选成分是该树中成分的子级。

这是我的简化数据库设置：

```
recipes
- name
- instructions

ingredients
- name

recipe_ingredients
- recipe_id
- ingredient_id
- preferred_ingredient_id
- amount 
```

和协会：

```
class Recipe < ActiveRecord::Base
  has_many :recipe_ingredients
  has_many :ingredients, :through => :recipe_ingredients
  has_many :preferred_ingredients, :through => :recipe_ingredients
end

class Ingredient < ActiveRecord::Base
end

class RecipeIngredient < ActiveRecord::Base
  belongs_to :recipe
  has_one :ingredient
  has_one :preferred_ingredient
end 
```

我不确定如何处理 preferred_ingredient_id 和 ingredients_id 都指向同一个模型，并且 :preferred_ingredients 实际上并不作为符号存在。我需要以不同的方式设置我的关联吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:51:11.837

假设您将成分参考存储在 RecipeIngredient 中，

```
belongs_to :preferred_ingredient, class_name: 'Ingredient' 
```

我还认为您引用了 RecipeIngredient 中的成分，因此您也想将其更改`has_one`为`belongs_to`那里。（如果配方被删除，成分被破坏是否有意义？）

但是考虑到您实际上可能对特定成分有很多选择，您可能正在寻找更像这样的东西：

配方成分：

```
belongs_to :recipe
belongs_to :preferred_ingredient, class_name: 'Ingredient'
has_many :ingredient_options
has_many :ingredients, through: :ingredient_options 
```

成分选项

```
belongs_to :recipe_ingredient
belongs_to :ingredient 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:08:01.277

你也可以看看@ [self-referential-association](http://railscasts.com/episodes/163-self-referential-association)

这也可能对你有帮助 [Rails Associations - has_many => :through - 但相同的模型](https://stackoverflow.com/questions/6559164/rails-associations-has-many-through-but-same-model)

# c - C - 递归地将字符串从一个文件反转到另一个文件

> ID：15103297
> 
> 赞同：1
> 
> 时间：2013-02-27T02:46:07.870
> 
> 标签：c, string, recursion, reverse

我正在尝试使用递归将文本文件中的字符串反转到另一个文本文件中。反转的字符串将存储在 char 数组中，缓冲区将成为该数组。然后缓冲区将被 fprintf 编辑到新文件中。这就是我到目前为止所拥有的。

```
 #include <stdio.h>
        #include <stdlib.h>
        #include <string.h>

        int
        reverse(char *ch, char *str)    //receives "buffer" as argument. str traverses ch
        {
            char array[20]; //will store the reversed string

            if(*str == '\0')
                return 0;   //arrived at end of string
            return(reverse(ch, str+1) + 1);      //don't know if this is correct
        }

//I want to use the returned number as the index number. For example, if I have
//string "abcd", string[0]='d', string[1]='c', string[2]='b', string[3]='a'. Problem is,
//how do I do it?

        int main(int argc, char *argv[])    //argv[1] is input file. argv[2] is output file printed backwards
        {   
            FILE *fp1, *fp2;
            char *p, buffer[20];    //p points to buffer

            fp1 = fopen("a.txt", "r");
            if(fp1 == NULL)
            {
                printf("The file does not exist.\n");
                return 0;
            }

            p = buffer;
            while(fgets(buffer, 20, fp1) != NULL)   //reads the first 20 characters of file.txt into buffer
            {
                reverse(buffer, p); //passes "buffer" as argument
                fprintf(fp2, "%s\n", buffer);
            }

            printf("File %s has been successfully reversed into file %s!\n", argv[1], argv[2]);
            fclose(fp1);
            fclose(fp2);
            return 0;
        } 
```

由于我是递归新手，所以我对如何实现我的反向函数只有最微弱的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:01:54.397

通过迭代循环反转字符串更容易和更快，但是要创建递归函数，您可以让函数反转开始和结束字符，然后用较小的字符串重复该过程

```
abcde 
^   ^  first call
 ^ ^   next call
  ^    end

---

void reverse(char *s, char *e) {
  char tmp = *s;
  *s++ = *e;
  *e-- = tmp;
  if (e > s) reverse (s, e);
} 
```

其中*s*指向第一个字符，*e*指向最后一个字符。请注意，初始字符串的长度必须 > 0（或者可以将测试添加到函数中）。

示例

```
int main () {
    char x[] = "abcde";  
    reverse(x, x+strlen(x)-1);  
    printf("%s\n", x);  
    return 0;  
} 
```

输出`edcba`。

# java - 元胞数组方法返回

> ID：15103300
> 
> 赞同：3
> 
> 时间：2013-02-27T02:46:20.977
> 
> 标签：java, arrays, methods, return, cell

我知道返回时的方法将是您想要返回的类型。

```
public int numbers(){
    return number;
}

public String sentence(){
    return sentence;
} 
```

但如果它是 a `Cell[]`，返回类型是什么？我想`Cell[]`从一个方法返回整个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:49:08.653

也许我错过了一些东西，但为什么不呢

```
public Cell[] cells(){
    return cells;
} 
```

# xcode4.5 - 让数字键盘变小？

> ID：15103301
> 
> 赞同：0
> 
> 时间：2013-02-27T02:46:28.783
> 
> 标签：xcode4.5

根据屏幕： ![重叠的文本字段](../Images/0ff7b010782cd7e24ce0d68288ac84b4.png) 只要数字键盘弹出，您就可以看到。它与我在应用程序中的一些文本字段重叠。此外，它还没有完成或返回按钮，以便我可以让小键盘消失。我已经制作了让键盘消失的按钮，但我想要一些更专业的方式。

请建议。如何使用键盘添加返回或完成按钮，如果有另一种可能的方法可以减小键盘的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:00:44.657

据我所知，不可能使键盘更小，但是您可以做的是在您点击 UITextField 后使您的视图向上移动，此代码将帮助您

```
- (void)textFieldDidBeginEditing:(UITextField *)textField 
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.25];
    self.view.frame = CGRectMake(0,-10,320,400);
    [UIView commitAnimations];
} 
```

现在到下一个问题，您必须关闭我喜欢制作的键盘，以便用户只需点击背景，它就会退出第一响应者。你可以这样做

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] 
                                   initWithTarget:self
                                   action:@selector(dismissKeyboard)];

[self.view addGestureRecognizer:tap]; 
```

在dismissKeyboard

```
-(void)dismissKeyboard 
{
   [aTextField resignFirstResponder];
} 
```

希望这可以帮助

# iphone - 缩放包含 ViewController 的 UIScrollView

> ID：15103305
> 
> 赞同：0
> 
> 时间：2013-02-27T02:47:16.503
> 
> 标签：iphone, ios, objective-c, xcode

我正在尝试缩放并且在它使用滚动视图中的图像之前。现在我试图用 ViewController 替换该图像并放大该 ViewController 中的对象。它不工作。

viewDidLoad：

```
- (void)viewDidLoad
{
self.boardView = [[BoardViewController alloc] init];
[self.scrollView addSubview:self.boardView.view];

[self.scrollView setContentSize:(CGSizeMake(320, 320))];

UITapGestureRecognizer *doubleTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(scrollViewDoubleTapped:)];
doubleTapRecognizer.numberOfTapsRequired = 2;
doubleTapRecognizer.numberOfTouchesRequired = 1;
[self.scrollView addGestureRecognizer:doubleTapRecognizer]; 
```

viewForZoomingInScrollView：

```
- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {
return [self.scrollView.subviews objectAtIndex:0]; 
```

doubleTapped 方法：（当我在其中输入日志时它正在调用它，它只是没有缩放。

```
- (void)scrollViewDoubleTapped:(UITapGestureRecognizer*)recognizer {

CGPoint pointInView = [recognizer locationInView:self.boardView.view];

CGFloat newZoomScale = self.scrollView.zoomScale * 3.0f;
if (self.scrollView.zoomScale > self.scrollView.minimumZoomScale){
newZoomScale = MIN(newZoomScale, self.scrollView.minimumZoomScale);
}
else {
    newZoomScale = MIN(newZoomScale, self.scrollView.maximumZoomScale);
}

CGSize scrollViewSize = self.scrollView.bounds.size;

CGFloat w = scrollViewSize.width / newZoomScale;
CGFloat h = scrollViewSize.height / newZoomScale;
CGFloat x = pointInView.x - (w / 2.0f);
CGFloat y = pointInView.y - (h / 2.0f);

CGRect rectToZoomTo = CGRectMake(x, y, w, h);

[self.scrollView zoomToRect:rectToZoomTo animated:YES]; 
```

我不明白它有什么问题。

# java - 使用 Java 的 SQL 语法错误

> ID：15103314
> 
> 赞同：1
> 
> 时间：2013-02-27T02:48:35.580
> 
> 标签：java, sql

```
public boolean setgame(int botid, int gameid, String name, String ip, int spoofed, int reserved, int loadingtime, int left, String leftreason, int team, int colour, String spoofedrealm) {
    try {
        Connection connection = connection();
        PreparedStatement statement = connection.prepareStatement("INSERT INTO gameplayers (id, botid, gameid, name, ip, spoofed, reserved, loadingtime, left, leftreason, team, colour, spoofedrealm) VALUES (NULL, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
        statement.setInt(1, botid);
        statement.setInt(2, gameid);
        statement.setString(3, name);
        statement.setString(4, ip);
        statement.setInt(5, spoofed);
        statement.setInt(6, reserved);
        statement.setInt(7, loadingtime);
        statement.setInt(8, left);
        statement.setString(9, leftreason);
        statement.setInt(10, team);
        statement.setInt(11, colour);
        statement.setString(12, spoofedrealm);
        statement.execute();
        connectionReady(connection);
        return true;
    } catch (SQLException e) {
        if (Main.DEBUG) {
        }
        Main.println("[SQLThread] Unable to add bot ban to MySQL database: " + e.getLocalizedMessage());
    }
    return false;
} 
```

* * *

`insert`我创建了一个 main 方法来添加所有数据，但在语句中看不到任何错误。

我收到此错误：

```
[SQLThread] Fail: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'left, leftreason, team, colour, spoofedrealm) VALUES (NULL, 2, 146, 'Teste', '120.32' at line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:54:56.967

`LEFT`是 MySQL 中的保留字；你必须逃避它：

```
INSERT INTO gameplayers (
     id, botid, gameid, name, ip, spoofed, reserved, loadingtime, `left`, ...
                                                        ----------^----^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:55:04.403

`LEFT`是[MySql 中的保留字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)（如`LEFT OUTER JOIN...`）。您需要使用引号将其用作标识符。

更好的是，考虑重命名字段以不使用保留字作为标识符。

# windows-phone-7 - Windows Phone：如何在可写位图上绘制数字？

> ID：15103315
> 
> 赞同：1
> 
> 时间：2013-02-27T02:48:52.387
> 
> 标签：windows-phone-7

我有一个可写的位图（160x160）和一个字符串中的数字。代码如下所示：

```
WriteableBitmap pic1 = selectedPhoto.Crop(0, 0, 160, 160);
String s = "1"; 
```

我想将字符串 s 绘制到 pic1 上。

我能怎么做？？

你能告诉我解决我的问题的方法吗？

非常感谢！

输入：

1.  可写位图
2.  细绳

输出：在这里查看：[https ://lh3.googleusercontent.com/-2rX1vOBpbdw/US1zu88qOfI/AAAAAAAAAGs/hcsi2Jw3gDs/s512/p5.png](https://lh3.googleusercontent.com/-2rX1vOBpbdw/US1zu88qOfI/AAAAAAAAAGs/hcsi2Jw3gDs/s512/p5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:56:24.860

看看使用[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)库。它是一系列扩展方法，允许您将文本或形状写入`WriteableBitmap`.

# sql - 创建具有 2 个以上索引的表的 ORACLE 数据字典

> ID：15103322
> 
> 赞同：0
> 
> 时间：2013-02-27T02:49:30.843
> 
> 标签：sql, oracle

我在尝试在 ORACLE 数据字典中找出一个表是否有超过 2 个索引时遇到了麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:01:48.313

您可以从查看[ALL_INDEXES](http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_1096.htm#i1578369)之类的字典表开始，然后尝试以下操作：

```
SELECT TABLE_NAME
  FROM USER_INDEXES
  GROUP BY TABLE_NAME
  HAVING COUNT(*) > 2; 
```

我没有尝试过代码，也没有详细阅读过文档，看看是否有出现两次的情况，但它应该会让你走上正轨。

# c# - 当我说一个或多个 2 音节词时，如何只显示一个输出（“已识别，OK”）

> ID：15103326
> 
> 赞同：0
> 
> 时间：2013-02-27T02:49:45.813
> 
> 标签：c#, visual-studio-2010, speech-recognition

我只想让我的程序说“已识别，OK！” 如果它听到的话。有一个或多个音节词的词。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Speech.Recognition;

namespace SpeechRecognitionExample
  {
     public partial class Form1 : Form
          {
           private SpeechRecognitionEngine recognitionEngine;

    public Form1()
    {
        InitializeComponent();

        recognitionEngine = new SpeechRecognitionEngine();
        recognitionEngine.SetInputToDefaultAudioDevice();
        recognitionEngine.SpeechRecognized += (s, args) =>
        {
            foreach (RecognizedWordUnit word in args.Result.Words)
            {
                if (word.Confidence > 0.0f)
                    txtOutput.Text += "Recognized, OK!";
            }
            txtOutput.Text += Environment.NewLine;
        };
        recognitionEngine.LoadGrammar(new DictationGrammar());
    }

    private void btnStart_Click(object sender, EventArgs e)
    {
        recognitionEngine.RecognizeAsync(RecognizeMode.Multiple);
    }

    private void btnStop_Click(object sender, EventArgs e)
    {
        recognitionEngine.RecognizeAsyncStop();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }
} 
```

}

请帮我。谢谢你。因为当我说一个有两个或三个音节的单词时，它会显示“已识别，OK！” 也有两三遍。但是，如果我说，例如“开始”，它只会返回 1 个输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:59:35.060

你的意思是，如果有的话。程序应该说“已识别，OK！”？

如果是这样，请使用：

```
recognitionEngine.SpeechRecognized += (s, args) =>
    {

        if (!args.Result.Words.Any() && word.Confidence <= 0.0f) return;

        txtOutput.Text += "Recognized, OK!";
        txtOutput.Text += Environment.NewLine;
    }; 
```

# ruby-on-rails - Ctrl-C 不适用于 Ruby-on-Rails

> ID：15103327
> 
> 赞同：0
> 
> 时间：2013-02-27T02:49:50.907
> 
> 标签：ruby-on-rails

我在 Windows 7 上运行 rails 3.2.1，但我无法使用 Ctrl-C 杀死我现有的服务器。我必须在任务管理器中找到它并结束任务。我读了几个地方，这是 Ruby on Rails 中的一个错误，但没有看到任何真正的修复。我确实看到的一个解决方案是尝试使用 Ctrl-Pause/Break。不幸的是，我的笔记本电脑没有暂停/中断键。任何提示将不胜感激。

[注意：我已经尝试过这里](https://stackoverflow.com/questions/9660426/rails-server-doesnt-shutdown-with-ctrc-in-windows-7?lq=1)列出的其他解决方案，但它们都不适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:09:11.170

尝试使用 ctrl + Pause break ..

# sql-server-2008 - 无法从 Linux 连接到 SQL Server

> ID：15103331
> 
> 赞同：4
> 
> 时间：2013-02-27T02:50:23.050
> 
> 标签：sql-server-2008, unixodbc, strace, isql, sqlncli

我正在尝试连接到 CentOS 5.8 上的 SQL Server 2008。我正在使用 unixODBC 2.3.0 和 SQL Server ODBC 驱动程序 (www.microsoft.com/en-us/download/details.aspx?id=28160)。

当我尝试通过运行测试连接时：

```
isql -v mydsn username password 
```

它给了我：

```
[S1T00][unixODBC][Microsoft][SQL Server Native Client 11.0]Login timeout expired
[08001][unixODBC][Microsoft][SQL Server Native Client 11.0]A network-related or instance-specific error has occurred while establishing a connection to SQL Server. Server is not found or not accessible. Check if instance name is correct and if SQL Server is configured to allow remote connections. For more information see SQL Server Books Online.
[08001][unixODBC][Microsoft][SQL Server Native Client 11.0]TCP Provider: Error code 0x2726
[ISQL]ERROR: Could not SQLConnect 
```

端口是开放的，服务器是可访问的。

我试图进一步诊断问题，但被困在这里：

```
 strace -e trace=network isql -v mydsn username password
socket(PF_FILE, SOCK_STREAM, 0)         = 3
connect(3, {sa_family=AF_FILE, path="/var/run/nscd/socket"...}, 110) = -1 ENOENT (No such file or directory)
socket(PF_FILE, SOCK_STREAM, 0)         = 3
connect(3, {sa_family=AF_FILE, path="/var/run/nscd/socket"...}, 110) = -1 ENOENT (No such file or directory)
socket(PF_FILE, SOCK_STREAM, 0)         = 3
connect(3, {sa_family=AF_FILE, path="/var/run/setrans/.setrans-unix"...}, 110) = 0
sendmsg(3, {msg_name(0)=NULL, msg_iov(5)=[{"\1\0\0\0", 4}, {"\1\0\0\0", 4}, {"\1\0\0\0", 4}, {"\0", 1}, {"\0", 1}], msg_controllen=0, msg_flags=0}, MSG_NOSIGNAL) = 14
socket(PF_FILE, SOCK_STREAM, 0)         = 4
connect(4, {sa_family=AF_FILE, path="/var/run/nscd/socket"...}, 110) = -1 ENOENT (No such file or directory)
socket(PF_FILE, SOCK_STREAM, 0)         = 4
connect(4, {sa_family=AF_FILE, path="/var/run/nscd/socket"...}, 110) = -1 ENOENT (No such file or directory)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument)
socket(PF_INET, 0x80001 /* SOCK_??? */, IPPROTO_TCP) = -1 EINVAL (Invalid argument) 
```

显然，建立连接时出现了问题。

谁能帮我？如果您需要任何其他信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T17:38:33.413

在使用 linux 和 odbc 连接到 Microsoft 的 SQL Server 并使用 Microsoft 的 linux 驱动程序时，一个“问题”是 odbc.ini 中服务器的字符串也必须包含端口。

```
 Server = [protocol:]server[,port] 
```

根据[http://msdn.microsoft.com/en-us/library/hh568455.aspx](http://msdn.microsoft.com/en-us/library/hh568455.aspx) 这是与使用该约定的大多数其他设置不同的`port = <portnumber>`约定。如果未配置，您将看到“无法 SQLConnect”错误。

还要确保使用了正确的 odbc 文件。

```
odbcinst -j 
```

将显示配置的源及其位置。

您稍后可能会遇到的另一个问题是，SQL Server 驱动程序会忽略 odbc.ini 中的用户和密码信息（如果它是纯文本），因此请确保您的应用程序能够处理这些信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-17T09:19:03.360

要调试问题，请尝试以下步骤：

1.  远程登录 <1433>
2.  转到 SQL Server 网络配置
3.  TCP/IP 设置
4.  右键单击并打开*属性*
5.  切换到*网络属性*选项卡
6.  在`IPAll`属性下将动态端口设置为空白并将端口设置为`1433`
7.  重启 SQL 服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-21T15:35:55.513

问题是我将EL6驱动程序与EL5一起使用。安装正确的版本后，一切正常。感谢大家的回复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T01:10:24.980

您可以打开 odbc 跟踪并使用 tcpdump 捕获网络包。我认为 odbc 跟踪会提供帮助。

# php - 数组到变量

> ID：15103335
> 
> 赞同：0
> 
> 时间：2013-02-27T02:50:58.800
> 
> 标签：php, arrays, variables, loops

我正在用 PHP 编程，我有一个巨大的数组，其中包含很多 ID。我需要所有这些 ID 都是变量，以便我可以在另一个函数中使用它们。我对 PHP 中的循环进行了大量研究，但我可以找到一个将数组“转换”为可以在另一个函数中使用的变量的方法。到目前为止，我有一个`foreach`循环处理整个数组并分为`$persons`. 但是当我`$persons`在下一个函数中使用它时，它只使用最后一个数组。我的代码如下：

```
$retrieved_id_array=explode(",",$retrieved_id_string);

foreach($retrieved_id_array as $persons)
    $retrieved_string=file_get_contents("https://HDXLfansite.com/$persons"); 
```

所以问题是如何创建一个循环，为我提供可以在另一个函数中使用的几个变量？还是我应该使用其他方法/代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T02:54:55.213

`$retrieved_string`那是因为你在循环中覆盖你的变量，你可以这样做：

```
foreach($retrieved_id_array as $persons) {
   //add it in array
    $retrieved_string[] =file_get_contents("https://HDXLfansite.com/$persons");
} 
```

# android - android全屏模式（ICS），第一次触摸显示导航栏

> ID：15103339
> 
> 赞同：10
> 
> 时间：2013-02-27T02:51:44.687
> 
> 标签：android

在我的视频播放应用程序中，我使用这个标志：`SYSTEM_UI_FLAG_HIDE_NAVIGATION`使导航栏消失，但是当我触摸屏幕时，导航栏出现，第一次触摸后，我的触摸事件和其他事件工作正常。

我的问题是我怎样才能接管第一次接触？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T03:27:39.620

你不能真正接管第一个事件。您可以实现[View.OnSystemUiVisibilityChangeListener](http://developer.android.com/reference/android/view/View.OnSystemUiVisibilityChangeListener.html)并在导航栏再次显示或隐藏时收到通知，然后根据其当前状态在第一次触摸时执行您想要的操作，如果可能的话。

[但是，如SYSTEM_UI_FLAG_HIDE_NAVIGATION](http://developer.android.com/reference/android/view/View.html#SYSTEM_UI_FLAG_HIDE_NAVIGATION)的文档中所述，您无法完全接管第一次触摸：

> 有一个限制：因为导航控件非常重要，所以最少的用户交互会导致它们立即重新出现。发生这种情况时，此标志和 SYSTEM_UI_FLAG_FULLSCREEN 都将自动清除，以便两个元素同时重新出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-04T22:45:49.613

对于遇到此帖子的任何人，如果您的意图是隐藏导航/状态栏并且在您触摸屏幕时不让它回来，请查看此处描述的不同“沉浸式”配置：[https://developer .android.com/training/system-ui/immersive](https://developer.android.com/training/system-ui/immersive)

例如：

```
currentActivity?.window?.decorView?.systemUiVisibility = View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY or
                    View.SYSTEM_UI_FLAG_FULLSCREEN or
                    View.SYSTEM_UI_FLAG_HIDE_NAVIGATION 
```

无论用户与屏幕进行任何交互，这都会有效地将您的屏幕置于“全屏”模式

要再次显示导航/状态栏，只需将其更改回：

```
currentActivity?.window?.decorView?.systemUiVisibility = View.SYSTEM_UI_FLAG_VISIBLE 
```

# sparql - 在 sqarql GET 请求中编码/提供字符串和整数值

> ID：15103344
> 
> 赞同：1
> 
> 时间：2013-02-27T02:52:23.830
> 
> 标签：sparql, semantic-web

我有一个带有`FILTER`如下语句的 sparql 查询：

```
FILTER ((?dayOfWeek = ?day) && (?start >= ?startTime) && (?finish <= ?finishTime)) 
```

如果我用文字值替换并在 snorql 上执行，我知道这个查询可以正确运行：

```
FILTER ((?dayOfWeek = "Wed") && (?start >= 720) && (?finish <= 820)) 
```

我想改为通过 GET 请求提供值，例如：

```
...sparql?query=<query>&day=Wed&startTime=720&finishTime=820 
```

但是，上述请求不起作用（它返回一个空数据集）。我试过指定 and 的类型`startTime`，`finishTime`即

```
...sparql?query=<query>&day=Wed&startTime=720&startTime_type=integer&finishTime=820&finishTime_type=integer 
```

但这并不能解决问题。

在查询字符串中提供适用于 snorql 的文字值也会导致一个空数据集，这真的让我感到困惑。

我假设我必须以错误的方式提供值，或者对它们进行错误编码。查询字符串本身已被百分比转义（字符集：）`!*'();:@&=+$,/?%#[]`。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:46:28.780

如果您使用的是 SPARQL 协议，则用法为

```
...sparql?query=PREFIX .. SELECT... 
```

即完整的 SPARQL 查询（编码为在 URL 中）。

# c# - 如何创建在 Window Server 上运行的后台应用程序

> ID：15103345
> 
> 赞同：0
> 
> 时间：2013-02-27T02:52:26.077
> 
> 标签：c#, windows-services, scheduled-tasks, background-process, concept

我需要编写一个在后台运行的应用程序（即用户不可见）。无论用户登录还是关闭，它都应该在服务器开启时始终运行。或者至少它应该按计划运行（例如，每小时）。它也应该在服务器关闭并再次打开后仍然运行。

该应用程序用于将一些数据从一台服务器（linux）备份到应用程序运行的本地服务器（windows服务器）。

根据我的研究，许多人建议使用 Window Service。但我是 C# 的新手，也是 Window Service 等领域的新手。

谁能指导我应该从哪里开始？Window Service 是一个合适的解决方案吗？或者如果有更好的解决方案？请解释。

先感谢您。

[已关闭] 感谢所有回复的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:55:47.273

是的，最佳实践是 Windows 服务。

但是，如果您的操作足够简单，可以写入 DOS 批处理文件。您可以在 Windows 任务计划程序中安排您的任务。它将节省大量时间并且易于设置。

**更新（仅供参考）**

我有一个需要在每天凌晨 1 点执行的 batch_update.sql 文件。我在 C:\bat 中创建了 batch_update.sql 文件和批处理文件 batch_update.bat。

batch_update.sql 包括所有 SQL 操作。batch_update.bat 调用 batch_update.sql 文件执行如下。

sqlcmd -U adminuser -P 密码 -S (本地) -i C:\bat\batch_update.bat -o C:\bat\batch_update.txt

然后我在 Windows 任务调度程序中创建了一个任务，在凌晨 1 点运行，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:54:57.187

Windows 服务听起来绝对是长期的解决方案。然而，为简单起见，您可以在 C# 中创建一个命令行项目，然后使用 Windows 调度程序以您喜欢的任何时间间隔运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T02:55:09.417

[我也推荐windows服务，你可以在这里](http://www.codeproject.com/Articles/3990/Simple-Windows-Service-Sample)找到一些信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T02:55:54.263

是的，Windows 服务是您正在寻找的解决方案。这是 MSDN 上的一个很好的[起点](http://msdn.microsoft.com/en-us/library/zt39148a%28v=vs.110%29.aspx)。

# html - 列表类型圆圈的 HTML 特殊字符

> ID：15103349
> 
> 赞同：2
> 
> 时间：2013-02-27T02:52:56.797
> 
> 标签：html, html-lists, special-characters, unordered

我决定将我的无序列表重做一个表格。但是，我希望每一行的开头都具有与无序列表相同的圆圈字符，这样我的表格仍然看起来像页面上的其他列表。

我查看了许多带有 ASCI/HTML 特殊字符的网页，但找不到这个字符！是否有一个或有没有以某种方式将无序列表作为表格（我怀疑这个）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:35:00.293

浏览器用来呈现`ul`元素的默认列表项目符号不是字符而是图形符号。您可以通过更改页面上的字体系列设置来看到这一点：默认列表项目符号的形状不会改变。此外，默认列表项目符号的形状在规范中没有定义，可能因浏览器而异。大多数浏览器将其呈现为黑色圆圈，但相对大小可能会有所不同。（浏览器实际上*可以*通过从某种字体中提取字形来呈现列表项目符号，但这超出了作者的控制范围，因此实际上它不是字符。）

因此，您不能使字符与默认列表项目符号匹配。要在不同的上下文中获得相似的项目符号，您需要使用相同的技术：要么`ul`或字符。

试图找到一个合理的匹配，我发现以下在 Windows 上的 Firefox 和 Chrome 上给出了：

```
<style>
.bull { 
  font-family: Arial;
  font-size: 1.35em;
  position: relative; 
  top: 0.15em;
}
</style>
<span class=bull>&bull;</span> 
```

但是，IE 使用了一个本质上更小尺寸的默认列表项目符号，因此，上面的代码会生成一个比这大得多的项目符号。

如果您使用字符作为列表项目符号，最合乎逻辑的选择是 U+2022 BULLET “•”，在 HTML 中可以表示为`&bull;`（或这样）。它也非常安全，因为它几乎存在于所有字体中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:00:43.080

仅使用图像怎么样。一个圆圈很容易制作和插入页面。还有一种方法可以使用带有边框半径或径向渐变的 CSS3。

# java - 如何在 JAVA 中将二进制值转换为 ASCII？

> ID：15103353
> 
> 赞同：0
> 
> 时间：2013-02-27T02:53:12.803
> 
> 标签：java, binary, ascii

这是我无法绕开的家庭作业。我必须手动完成，所以不能使用“getBytes()”。另外，我必须先转换为十进制格式，然后再将十进制转换为 ASCII（例如 {0,1,1,0,0,0,1,0} = 98 为十进制格式，即 'b'） . 我已将二进制代码排列成一个数组，并希望使用 for 循环逐个位置遍历数组。但是，我不确定我是否为 for 循环使用了正确的参数，也不确定如何将代码分成“8”位。另一件事，如何将十进制值转换为 ASCII？我是否应该列出我知道我会得到的所有可能的字母，然后使用 if-else 循环引用它们？或者我可以将小数转换为字符吗？到目前为止，这是我的代码......（有点乱，抱歉）

```
class Decoder
{
    public void findCode(Picture stegoObj)
    {
    Pixel pixTar = new Pixel(stegoObj,0,0);
    Pixel [] pixelArray = stegoObj.getPixels();
    int blueVal = 0;

    for(int length = 0; length < pixelArray.length; length++)
    {
        blueVal = pixTar.getBlue();                
    }
    System.out.println(blueVal);
    stegoObj.explore();
    }

    public void decode(int [] binary)
    {
        int binaryLen = binary.length;
        int totVal = 0;
        int newVal = 0;
        int bitVal = 0;

        for(int x = binaryLen - 1; x >= 0; x--)
        {
            bitVal = binary[x];
            int exp = x - (binaryLen - 1);
            totVal += (pow(bitVal, exp));
        }

        System.out.println(totVal);
     }
}
public class DecodeImage
{
    public static void main(String[] args)
    {
        Picture stegoObj = new Picture("SecretMessage.bmp");
        Decoder deco = new Decoder();
        int[] binArray =     {0,1,0,1,0,1,0,0,0,1,1,0,1,0,0,0,0,1,1,0,0,1,0,1,0,0,1,0,0,0,0,0,0,1,1,1,0,1,1,1,0,1,1,0,1,1,1,1,0,1,1,1,0,0,1,0,0,1,1,0,1,1,0,0,0,1,1,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,1,0,1,0,0,1,0,1,1,1,0,0,1,1,0,0,1,0,0,0,0,0,0,1,1,0,1,1,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,1,1,0,0,1,1,0,0,1,0,1,0,0,0,0,1,1,0,1,0,0,0,0,1,0,1,0};
        //int[] binArray = {0,1,1,0,0,0,1,0};
        //deco.findCode(stegoObj);
        deco.decode(binArray);        
    }
} 
```

编辑：

好的，所以我想出了这么多，在解码器类下，在解码块中，在 for 循环中：

```
for(int x = binaryLen - 1; x >= 0; x--)
{
    bitVal = binary[x];
    preVal = bitVal * base;
    totVal += preVal;
    base = base * 2;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:06:45.843

你有正确的想法`decode`。我不明白为什么您的代码不起作用，尽管我在`pow`任何地方都看不到实现。

将十进制转换为 ascii 很容易，只需将值转换为 char：

```
int v = ...;       // decimal value
char c = (char)v;  // ascii value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:19:48.097

```
 int[] bValue = {1,0,0,0,1,0,1};

    int iValue = 0;
    // convert binary to decimal
    for (int i = 0, pow = bValue.length - 1 ; i < bValue.length ; i++, pow--)
        iValue += bValue[i]*Math.pow(2, pow);

    // gets the value as a char
    char cValue = (char)iValue;

    System.out.println("Int value: "+iValue +", Char value : "+cValue); 
```

如果您需要整个 ASCII 表，您可以将值放入 M​​ap 中，其中键是整数值，值是对应的 ASCII 条目。

# url - 如何在 Java MessageDialog 中创建超链接 url 字符串？

> ID：15103354
> 
> 赞同：1
> 
> 时间：2013-02-27T02:53:14.330
> 
> 标签：url, hyperlink, rcp, messagedialog

一个简单的 MessageDialog（或 MessageBox，任何方法都可以打开一个对话框），如下所示： MessageDialog.openInformation(shell, "Test", "Get help form this link www.google.com"); 有没有办法让 www.google.com 成为超链接？点击网址并打开浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T11:47:21.130

开箱即用是不可能的。我创建了一个自己的类，名为 MyMessageDialog 来执行此操作：

[https://gist.github.com/andydunkel/8914008](https://gist.github.com/andydunkel/8914008)

它基本上是 MessageDialog 的所有源代码。然后我覆盖了 createMessageArea 方法并添加了一个 Link 而不是标签并添加了一个事件侦听器：

```
protected Control createMessageArea(Composite composite) {
    // create composite
    // create image
    Image image = getImage();
    if (image != null) {
        imageLabel = new Label(composite, SWT.NULL);
        image.setBackground(imageLabel.getBackground());
        imageLabel.setImage(image);
        //addAccessibleListeners(imageLabel, image);
        GridDataFactory.fillDefaults().align(SWT.CENTER, SWT.BEGINNING)
                .applyTo(imageLabel);
    }
    // create message
    if (message != null) {
        linkLabel = new Link(composite, getMessageLabelStyle());
        linkLabel.setText(message);

        linkLabel.addSelectionListener(new SelectionAdapter(){
            @Override
            public void widgetSelected(SelectionEvent e) {
                   System.out.println("You have selected: "+e.text);
                   try {
                    //  Open default external browser 
                    PlatformUI.getWorkbench().getBrowserSupport().getExternalBrowser().openURL(new URL(e.text));
                  } 
                 catch (PartInitException ex) {
                    // TODO Auto-generated catch block
                     ex.printStackTrace();
                } 
                catch (MalformedURLException ex) {
                    // TODO Auto-generated catch block
                    ex.printStackTrace();
                }
            }
        });

        GridDataFactory
                .fillDefaults()
                .align(SWT.FILL, SWT.BEGINNING)
                .grab(true, false)
                .hint(
                        convertHorizontalDLUsToPixels(IDialogConstants.MINIMUM_MESSAGE_AREA_WIDTH),
                        SWT.DEFAULT).applyTo(linkLabel);
    }
    return composite;
} 
```

现在可以使用其中的 HTML 代码调用 MessageDialog：

```
MyMessageDialog.openError(parent.getShell(), "Hehe", "<a href=\"http://google.com\">Google.com</a> Test"); 
```

不是一个非常理想的解决方案，但它有效：

![在此处输入图像描述](../Images/6757b38eb24f31c311f0c7e49b804d37.png)

安迪

# java - 奇怪的 file.nextLine() 行为

> ID：15103355
> 
> 赞同：0
> 
> 时间：2013-02-27T02:53:20.787
> 
> 标签：java, file-io

好的，所以我遇到了一个奇怪的问题，我试图获取一个文件来为几个类提供输入。这里是方法，大部分都被注释掉了。在指定点，我需要输入一个多字字符串。但是，虽然 .next() 有效，但 .nextLine() 失败。

java新手，很抱歉，如果这很明显。

```
public void readWeeklyData (String fileName) 
{
  try{
        File file = new File(fileName);
        Scanner fileReader = new Scanner(file);

        _leagueName = fileReader.nextLine(); //Outputs String properly despite spaces
        _leagueID = fileReader.nextInt();
        _numTeams = fileReader.nextInt();
       _numWeek = fileReader.nextInt();

      int i = 0;
      int j = 0;

       // while(i < _numTeams)
       // {
            Team team = new Team();
            team.setTeamID(fileReader.nextInt());
            System.out.println(team.getTeamID()); //Outputs 1011 properly
            team.setTeamName(fileReader.nextLine()); //Outputs nothing, with or without the while loops in comments. Yet when changed to fileReader.next(), it gives the first word of the team name.
           // team.setGamesWon(fileReader.nextInt());
          //  team.setGamesLost(fileReader.nextInt());
          //  team.setRank(fileReader.nextInt());

          // while(j < 3)
          //  {
           //     Bowler bowler = new Bowler();
         //       bowler.setBowlerId(fileReader.nextInt());
           //     bowler.setFirstName(fileReader.nextLine());
           //     bowler.setLastName(fileReader.nextLine());
          //      bowler.setTotalGames(fileReader.nextInt());
           //     bowler.setTotalPins(fileReader.nextInt());

           //     team.setBowler(j, bowler);
           //     j++;
           // }   

           // j = 0;

          //  _teams[i] = team; 
          //  i++;
        //}

   }

   catch(IOException ex)
    {
        System.out.println("File not found... ");
   }
} 
```

该文件（忽略额外的输入，因为它们只是用于格式化。这只是团队的 2 次迭代。）：

```
Friday Night Strikers
27408
4
0
1001
Fantastic Four
0
0
0
10011
Johnny
Blake
0
0
10012
Donald
Duck
0
0
10013
Olive
Oil
0
0
10014
Daffy
Duck
0
0
1002
The Showboats
0
0
0
10021
Walter 
Brown
0
0
10022
Ty
Ellison
0
0
10023
Gregory
Larson
0
0
10024
Sharon
Neely
0
0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:36:33.807

因为`Scanner#nextInt`不消耗换行符，紧随其后的换行符`1001`将传递给`nextLine`语句，您的团队名称将显示为空。

您需要在阅读下一行之前使用此字符。您可以使用：

```
fileReader.nextLine(); // consume newline
team.setTeamName(fileReader.nextLine()); 
```

# c# - 将字符串转换为 sql 图像类型

> ID：15103356
> 
> 赞同：0
> 
> 时间：2013-02-27T02:53:23.910
> 
> 标签：c#, sql, image

我有带有 sql 数据库的 c# 应用程序，在 sql 字段类型中是图像，但我的 c# 应用程序变量是字符串，如何将字符串 var 存储到 sql 数据库中的图像类型？

```
parameters[10] = new OleDbParameter("@LONG_DESCRIPTION", sLongDes);
// sLongDes is string type, LONG_DESCRIPTION in sql is imag type
parameters[10].OleDbType = OleDbType.LongVarBinary; 
```

这段代码是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:56:19.827

您需要将字符串转换为`Byte Array`

```
byte[] array = Encoding.ASCII.GetBytes(sLongDes); // supports other encoding
parameters[10] = new OleDbParameter("@LONG_DESCRIPTION", array);
parameters[10].OleDbType = OleDbType.LongVarBinary; 
```

# c - 使用函数指针作为参数

> ID：15103357
> 
> 赞同：0
> 
> 时间：2013-02-27T02:53:38.273
> 
> 标签：c, pointers, singly-linked-list

我正在尝试使用以下方法将节点添加到链表的前面：

```
struct Node *addFront(struct List *list, void *data) { 
```

到目前为止，我有以下内容：

```
struct Node *front = (struct Node *) malloc(sizeof(struct Node)){
    if(front == NULL) {
        return NULL;
    }

    front->data = data;

    if(list->head == 0) {
        list->head = front;
        front->next = NULL;
    }
    else {
        list->head = front;
        *front->next =*
    }

    return front;
} 
```

如果添加的节点不是要创建的第一个节点，我对添加的节点将指向什么感到困惑......我想说的是：front->next = list; 但是 list 是 List 类型，所以我确定我会得到一些不兼容的分配错误..这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:55:56.613

```
Node *oldHead = list->head;
list->head = front;
front->next =oldHead; 
```

存储旧头，并将其分配给`front->next`.

要不就

```
front->next =list->head;
list->head = front; 
```

就足够了。

# jquery - jQuery中的实时搜索

> ID：15103358
> 
> 赞同：2
> 
> 时间：2013-02-27T02:53:43.610
> 
> 标签：jquery

我正在尝试构建一个模拟实时搜索的页面 - 搜索结果显示为用户类型。下面的插件运行良好，除了我想在开头隐藏结果（有序列表）并在用户键入时显示每个匹配的项目符号。

[http://www.designchemical.com/blog/index.php/jquery/live-text-search-function-using-jquery/](http://www.designchemical.com/blog/index.php/jquery/live-text-search-function-using-jquery/)

jQuery

```
$(document).ready(function(){
    $("#filter").keyup(function(){

        // Retrieve the input field text and reset the count to zero
        var filter = $(this).val(), count = 0;

        // Loop through the comment list
        $(".commentlist li").each(function(){

            // If the list item does not contain the text phrase fade it out
            if ($(this).text().search(new RegExp(filter, "i")) < 0) {
                $(this).fadeOut();

            // Show the list item if the phrase matches and increase the count by 1
            } else {
                $(this).show();
                count++;
            }
        });

        // Update the count
        var numberItems = count;
        $("#filter-count").text("Number of Comments = "+count);
    });
}); 
```

HTML

```
<form id="live-search" action="" class="styled" method="post">
   <fieldset>
       <input type="text" class="text-input" id="filter" value="" />
   </fieldset>
</form>

<ol class="commentlist">
   <li>Comment #1</li>
   <li>Comment #2</li>
</ol> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T03:08:33.167

如果评论是预加载的，您最初可以通过两种方式隐藏它。

1.  在 dom 就绪时调用 $('.commentlist li').hide()

2.  添加样式`.commentlist li { display: none}`

我建议的另一个小调整是在循环语句之外创建一个正则表达式变量

```
$(document).ready(function(){
    $("#filter").keyup(function(){

        // Retrieve the input field text and reset the count to zero
        var filter = $(this).val(), count = 0;
        if(!filter){ // hide is no text
            $(".commentlist li").hide();
            return;
        }

        var regex = new RegExp(filter, "i"); // Create a regex variable outside the loop statement

        // Loop through the comment list
        $(".commentlist li").each(function(){

            // If the list item does not contain the text phrase fade it out
            if ($(this).text().search(regex) < 0) { // use the variable here
                $(this).hide();

            // Show the list item if the phrase matches and increase the count by 1
            } else {
                $(this).show();
                count++;
            }
        });

        // Update the count
        var numberItems = count;
        $("#filter-count").text("Number of Comments = " + count);
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/t9aBg/1/)

您显然可以使用像`fadeIn('slow')`and之类的动画`fadeOut('slow')`来代替`show()`and`hide()`来为项目的显示设置动画，在我看来它看起来不错，因为许多项目将一起制作动画。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T03:08:23.357

在 CSS 中添加

```
.commentlist li{display:none;} 
```

然后在你的 js 中，第一个 if

```
if(filter == 0){$(this).fadeOut();} 
```

然后在最后，而不是 $(this).show() 添加 $(this).fadeIn('slow')

```
$(this).fadeIn('slow'); 
```

您在此处的更新代码：http: [//tinyurl.com/a972s6t](http://tinyurl.com/a972s6t)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T03:13:25.263

这应该为你做：

```
$(document).ready(function(){
    $('#filter').keyup(function() {
        var f = $(this).val();
        var regex = new RegExp(f, 'gi');

        $('.commentlist li').hide()
            .each(function() {
                if($(this).html().match(regex)) {
                    $(this).show();
                }
            });
    });
}); 
```

如果你想要淡入淡出动画：

```
$(document).ready(function(){
    $('#filter').keyup(function() {
        var f = $(this).val();
        var regex = new RegExp(f, 'gi');

        $('.commentlist li').fadeOut()
            .each(function() {
                if($(this).html().match(regex)) {
                    $(this).stop().show();
                }
            });
    });
}); 
```

实际脚本演示：[http](http://www.glow-raspberry.com/where-to-buy) ://www.glow-raspberry.com/where-to-buy 。例如输入“广场”。

# delphi - 如何获取 Windows 中任何文件的关联图标 (.ICO) 并在 Delphi 中显示所有图标图像大小？

> ID：15103361
> 
> 赞同：3
> 
> 时间：2013-02-27T02:54:05.183
> 
> 标签：delphi, file, icons

我想要一个函数，它采用 Windows 中的任何文件路径（任何文件系统对象——文件、文件夹、驱动器、快捷方式等）并返回关联的 .ICO 文件（或带有所有图像大小表示的图标的一些句柄） . 例如，如果我在 Windows 7 中指定了“C:\MyTextFile.txt”，我将在位于 imageres 的 .ICO 文件中获得 .txt 文件的所有 256x256、48x48、32x32 和 16x16 表示。偏移量 102 处的 dll：

![imageres.dll 中的文本文件图标](../Images/69ff654e2d1f865b3db1096dd6d6b724.png)

^ Stardock IconPackager 安装的图标选项卡，用于定位文件系统对象的图标

从我目前的研究来看，这似乎并不容易。有这个`ExtractIconEx`功能，但它只给出 16 和 32 像素的表示。还有[这篇文章](https://stackoverflow.com/questions/1703186/can-48x48-or-64x64-icons-be-obtained-from-the-vista-shell)展示了如何获取`SHIL_SMALL`、`SHIL_LARGE`、`SHIL_EXTRALARGE`和`SHIL_JUMBO`尺寸，它们通常分别为 16、32、48 和 256 像素。但是，这并不一定涵盖将存储在 .ICO 文件中的其他大小。例如，一些图标存储 10 个或更多不同的大小，而不仅仅是四个。

所以，我试图：

1.  找到文件系统对象图标的位置，然后
2.  从 DLL、EXE 或任何封装它的资源中检索它。

我想一个问题是：这是 Windows 注册表的任务吗？如下所示，注册表的 txtfile->DefaultIcon 值包含 .txt 文件类型的图标位置。

![Windows 注册表中的 txt 文件](../Images/2ef9762e060b3b8fe723a4a534284a0e.png)

但是，也有独立的 .exe 文件，例如，它包含一个不会存储在注册表中的图标。

最终，我想在一个 TImage 中显示所有不同的大小，并可能将它们一起输出到一个 .ICO 文件中。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:34:00.730

作为一个选项，有一个`IShellItemImageFactory`界面提供有关`IShellItem`（文件）缩略图的信息。这个界面可以返回所需的大小，但它需要一些图标透明度的魔力。有 2 个选项 - 缩略图或图标。因为`Folder` 它总是返回相同的图像（**更新：不是真的，文件夹缩略图还包含文件的小预览，它包含**）。但例如，`png`它返回带有标志的小预览图像和带有`thumbnail`标志的 png-image-icon `icon`（0 是默认值）。对于您的任务，您应该使用`SIIGBF_ICONONLY`标志来获取文件/文件夹/驱动器系统图标。

这是示例代码，它加载不同大小的图像。

```
type
    TIconSize = (is16, is32, is48, is64, is96, is128, is256);
const
    ICON_SIZE : array[TIconSize] of integer = (16,32,48,64,96,128,256); 
```

我在表格上添加了`SizeRadioGroup : TRadioGroup`和`Image1 : TImage`。`Image1.Size`设置为 256。`SizeRadioGroup` 单击事件处理程序将缩略图加载到`Image1`：

```
procedure TForm7.SizeRadioGroupClick(Sender: TObject);
const FILE_NAME = 'd:\_projects\';
var icoSize : TIconSize;
    wh : integer;
    siif : IShellItemImageFactory;
    size : TSize;
    icon_handle : HBitmap;
    bm : TBitmap;
begin
    icoSize := TIconSize(SizeRadioGroup.ItemIndex);
    wh := ICON_SIZE[icoSize];

    SHCreateItemFromParsingName(FILE_NAME, nil, IID_IShellItemImageFactory, siif);

    size.cx := wh;
    size.cy := wh;

    siif.GetImage(size, 0 {SIIGBF_THUMBNAILONLY}{SIIGBF_ICONONLY}, icon_handle);
    bm := TBitmap.Create();
    bm.PixelFormat := pf32bit;
    try
        bm.Handle := icon_handle;
        Image1.Picture.Assign(bm);
    finally
        bm.Free();
    end;
end; 
```

# java - find(Class,id) 和 JPQL 得到不同的对象 (JPA)

> ID：15103366
> 
> 赞同：2
> 
> 时间：2013-02-27T02:54:49.120
> 
> 标签：java, hibernate, jpa, jpql

我使用 Hibernate 4.1.10.Final 作为我的 JPA 提供程序 Spring 和 Spring MVC。有两个实体：

```
@Entity
@Table(name = "a")
public class A {
    @Id
    private String id;

    @OneToMany(mappedBy = "a", cascade = CascadeType.ALL, fetch = FetchType.EAGER)
    private Set<B> bs;
}

@Entity
@Table(name = "b")
public class B {
    @Id
    private String id;

    @ManyToOne
    @JoinColumn(name = "fk_a_id")
    private A a;
} 
```

我需要得到一个`A`和它的`b`s，所以我使用`find(A.class,id)`EntityManager。

```
A a1 = em.find(A.class, id);
a1.getBs().size(); 
```

结果是：`b`s的大小为零（这意味着没有关联的B）。但我确信数据库中有很多关联的 B，并且确实可以在通过控制台检查时从数据库中加载数据。

当我使用查询时：

```
Query query = em.createQuery("SELECT a FROM A AS a WHERE a.id = ?1",A.class);
query.setParameter(1, id);
A a= (A) query.getSingleResult();
a.getBs().size(); // = 22 
```

相反，我得到一个 size = 22。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:17:28.860

由于您在 中使用了`mappedBy`属性`@OneToMany`，因此关系的所有者是 B 而不是 A。这就是为什么当您加载 A 的实例时，不会加载相应的 B。尝试使用以下内容修改您的注释：

在 A 类：

```
@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
@JoinColumn(name="fk_a_id")
private Set<B> bs; 
```

在 B 类：

```
@ManyToOne
@JoinColumn(name = "fk_a_id", insertable=false, updatable=false)
private A a; 
```

# delphi - 如何锁定文件直到下次重新启动？

> ID：15103372
> 
> 赞同：1
> 
> 时间：2013-02-27T02:55:06.090
> 
> 标签：delphi, file, file-io, restart

在delphi上我发现我可以像这样锁定一个文件：

```
aHandle     := CreateFile(PChar(aFileName),GENERIC_READ, 0, nil, OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,0); // get the handle of the file
aFileSize   := GetFileSize(aHandle,nil); //get the file size for use in the  lockfile function
Win32Check(LockFile(aHandle,0,0,aFileSize,0)); //lock the file 
```

但是有没有办法让文件保持锁定直到下次重新启动*而不让应用程序运行到那时*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T03:12:15.967

哇，我会对这个用例感兴趣！

如果您真的想保持文件锁定，您可能只需要保持应用程序运行。

但是，最好退回到您尝试解决的实际*问题，而不是提出**解决方案。*假设解决方案必须采取特定形式的人通常不考虑所有选项而对自己不利。

如果您的意图是阻止人们修改文件，最好使用权限来执行此操作，因为无论程序是否在任何给定时间锁定文件，这都会起作用。

但是，如果你*必须*这样做并且你想防止人们杀死你的应用程序来解锁文件，你可以使用[RobinHood/FriarTuck 方法](http://www.csd.uwo.ca/staff/magi/personal/humour/Computer_Folklore/Robin%20Hood%20And%20Friar%20Tuck.html)使其更“安全”。

让一个程序（Robin）锁定文件并启动第二个程序（Tuck）。如果在任何时候 Tuck 退出，让 Robin 立即重新启动它。

同样，Tuck 将跟踪 Robin 的状态，并在它退出时立即重新启动它。

这绝不是*完全*安全的，但它严重减少了可以修改文件的窗口，因为 Robin 和 Tuck 相互保护。

它也是*邪恶的，*所以你可能想在释放它之前确定你想要这个功能。

# java - 子数组中的最大堆

> ID：15103379
> 
> 赞同：2
> 
> 时间：2013-02-27T02:55:43.990
> 
> 标签：java, algorithm, heap, max, heapsort

我有以下实现最大堆的 Java 代码。它运行正确，

数字列表：4、1、3、2、16、9、10、14、8、7

最大堆结果：

16 14 10 8 7 9 3 2 4 1

我想要的是更改此代码，以便通过提供索引使 Max-Heap 仅成为数组的一部分。

例如，如果我给 index=4

它不应该影响前 4 个元素：4 1 3 2，而是用剩余的元素 16、9、10、14、8、7 创建一个最大堆

所以最终的结果应该是

4 1 3 2 16 14 10 9 8 7

不应使用其他数组，而只能使用给定的数组：

```
public class Heapify {

    public static int[] Arr = {
        4, 1, 3, 2, 16, 9, 10, 14, 8, 7
    };
    public static int counter = 0;

    public static void main(String[] args) {

        heapMe();
        for (int krk = 0; krk < Arr.length; krk++) {
            System.out.println(Arr[krk]);
        }
    }

    public static void heapMe() {
        int kk;
        for (kk = (Arr.length) / 2 - 1; kk >= 0; kk--) {
            heapify(Arr, kk);
        }
    }

    public static void heapify(int[] Arr, int i) {
        int largest;
        int left = 2 * i + 1;
        int right = 2 * i + 2;
        if (((left < Arr.length) && (Arr[left] > Arr[i]))) {
            largest = left;
        } else {
            largest = i;
        }

        if (((right < Arr.length) && (Arr[right] > Arr[largest]))) {
            largest = right;
        }
        if (largest != i) {
            swap(i, largest);
            heapify(Arr, largest);
        }
    }

    private static void swap(int i, int largest) {
        int t = Arr[i];
        Arr[i] = Arr[largest];
        Arr[largest] = t;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:02:40.590

您需要为`n`引用 的函数添加一个额外的参数`Arr.length`，并将所有对 的引用替换`Arr.length`为`n`。当您传递`4`到`heapMe`时，它将在前四个元素上堆积：

```
public static void heapMe(int n) {
    int kk;
    for (kk = n / 2 - 1; kk >= 0; kk--) {
        heapify(Arr, n, kk);
    }
}

public static void heapify(int[] Arr, int n, int i) {
    ... // Replace Arr.length with n throughout the body of the function
} 
```

# dompdf - 如何让 dompdf 忽略条件内容？

> ID：15103382
> 
> 赞同：0
> 
> 时间：2013-02-27T02:55:54.630
> 
> 标签：dompdf

我有一个 CakePHP 脚本，它打印包含大量条件内容的报告，如下所示：

```
<?php if(in_array('Medical', $filter) || in_array('All', $filter)){ ?>
<div class="title_col_cell" align="left">Medical</div>
<div class="title_col_cell1" align="right">Visits</div>
<div class="title_col_cell1" align="right">Unduplicated Clients</div>
<div class="title_col_cell1" align="right">Prescription Assistance</div>
<div class="title_col_cell1" align="right">Vaccinations</div>
<?php } ?> 
```

当我创建此报告的打印视图时，dompdf 似乎将条件内容呈现为空白。有没有办法让 dompdf 不渲染那些东西？有太多可能的组合，我无法为每个组合单独创建一个视图。我怎样才能以不同的方式编码呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:08:15.630

DOMPDF pdf 将仅为已发送给它的代码创建 pdf。在发送到 dompdf 对象之前，最好将整个代码放在一个字符串中，然后将其显示在屏幕上以检查是否存在所有必需的 html。例如 ：

```
 $str="<div class="title_col_cell" align="left">Medical</div>
       <div class="title_col_cell1" align="right">Visits</div>
       <div class="title_col_cell1" align="right">Unduplicated Clients</div>
       <div class="title_col_cell1" align="right">Prescription Assistance</div>
       <div class="title_col_cell1" align="right">Vaccinations</div>";

 $dompdf = new DOMPDF();
 $dompdf->load_html($str);
 $dompdf->set_paper('letter', 'landscape');
 $dompdf->render();
 $dompdf->stream("dompdf_out.pdf", array("Attachment" => false));

 exit(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:55:18.383

如果您查看文档，屏幕上显示的任何内容都将进入 dompdf 生成的文档。如果您在 html 文档中看不到它 - 那么它将被隐藏。在将文档传递给标准浏览器中的 dompdf 之前查看您的文档，以查看其中的内容。

# django - Offline compression (django_compressor app) error after django upgrade

> ID：15103385
> 
> 赞同：5
> 
> 时间：2013-02-27T02:56:09.683
> 
> 标签：django, django-compressor

I just upgrade Django 1.4.2 to 1.5 and I started to get an error on **django_compressor**.

```
You have offline compression enabled but key "eb225276268ea55d3b90c71df63109d9" is missing from offline manifest. You may need to run "python manage.py compress". 
```

Also, I updated django_compressor to the last version (actual 1.2), and still getting the same error.

When I try `python manage.py compress` I am noticed that:

```
c:\python27\lib\site-packages\django\utils\hashcompat.py:9: DeprecationWarning: django.utils.hashcompat is deprecated; use hashlib instead DeprecationWarning) 
```

Is this notice related with the offline compression error?

**[UPDATED]** I am finding another interesting thing...

In the template that I am having problem I removed all css that should be compressed:

```
 {% extends "base.html" %}
    {%  block head %}
        {% load compress %}
        {% compress css %}

        {% endcompress %}
    {% endblock %}
... 
```

I ran python manage:

```
python manage.py compress 
python manage.py collectstatic   --noinput 
```

without errors.

But... The problem still happen.

```
You have offline compression enabled but key "e764a8b7e7e314ed8c98aa5d25fc76b4" is missing from offline manifest. You may need to run "python manage.py compress".
1   {% extends "base.html" %}
2   {% block head %}
3   {% load compress %}
4   {% compress css %}
5   
6   {% endcompress %}
7   {% endblock %}
8 
```

Another important information: the .html file was listed when I ran `python manage.py compress`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T18:28:10.967

Well, I had to remove all `{% load compress %}` block from the internal pages, and included every js and css in the base.html. Now it worked. But I still finding very strange that this issue just happened after django update.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-03T19:31:20.047

I had the same issue, i tried every possible solution that i found in internet, but in vain every time i run python manage.py compress i used to get the same error.

At last i thought instead of finding solution's why don't i debug by reading compress.py (the path of the file was there in the error console), by doing this i figured out that there were compress tags inside compress tag.

{% compress js%} {% compress js%}

{% endcompress %}

{% endcompress %}

So the key was always not their in the manifest.json file.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T07:18:27.510

No.

The error is telling you that, although you have offline compression enabled, the process has never been run, or the cache is empty.

Basically, if you tell compressor NOT to try to compress files on every HTTP request (offline compression), it will look to Django's cache system to find the path to the compressed version of your assets.

If offline compression is enabled, and it can't find the path to the files the cache says should be there, it freaks out.

# iphone - 如何在iphone中获取gmsmapview的坐标中心

> ID：15103390
> 
> 赞同：26
> 
> 时间：2013-02-27T02:56:33.623
> 
> 标签：iphone, ios, google-maps-sdk-ios

我正在使用适用于 iOS 的新 Google Maps SDK

我能得到真正的坐标形式 GMSMapView.center 吗？现在它返回一个 CGPoint 的值，但它不是真正的坐标。

感谢和问候。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-03T23:42:54.007

使用mapview的`projection`方法`- (CLLocationCoordinate2D)coordinateForPoint:(CGPoint)point`将地图中的一个点转换为地理坐标

```
CGPoint point = mapView.center;
CLLocationCoordinate2D coor = [mapView.projection coordinateForPoint:point]; 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-03-31T21:31:26.093

我建议使用`[yourMapView.camera target]`代替Jing的解决方案。

Jing 的解决方案在 iOS 6 上运行良好，但在 iOS 7/7.1 上可能有问题，投影可能会报告错误的坐标（有点向下移动）！我已经检查了地图边界和填充是否正确，两者的结果都`[projection pointForCoordinate: coordinate]`可以`[projection coordinateForPoint:point]`相互对比，不知道问题出在哪里......

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-05-15T21:24:49.427

这是如何做到这一点 `Swift 4`

```
let coordinate = mapView.projection.coordinate(for: mapView.center) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-02-27T08:01:34.070

你在找`mapView.camera.target`吗？这是一个`CLLocationCoordinate2D`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-22T15:48:28.367

如果允许用户与地图交互，也许更好的方法是使用地图的 did-become-idle 委托方法。在这里您可以获得每次相机更改后的中心坐标。

```
func mapView(_ mapView: GMSMapView, idleAt position: GMSCameraPosition) {
    print(position.target)
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-08T05:17:37.980

> 斯威夫特 4

```
let point = mapView.center
let coordinate = mapView.convert(point, toCoordinateFrom: mapView) 
```

# android - 安卓移动应用

> ID：15103392
> 
> 赞同：-5
> 
> 时间：2013-02-27T02:56:41.310
> 
> 标签：android, sql-server, mobile

我想做一个连接到 SQL 服务器并将数据带到移动设备的小型应用程序。有人知道从 A 到 Z 的好样本吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:00:00.257

为了将您的 android 应用程序连接到服务器，您需要发出一个 HTTP 请求，该请求将运行您的服务器端脚本（例如 php），查询数据库并将响应作为 JSON 对象返回给 android 设备。检查这个详细的教程：

[http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

它展示了如何使用 android、php 和 mysql 数据库的示例。

# java - Maven 依赖项在默认包中找不到类

> ID：15103395
> 
> 赞同：2
> 
> 时间：2013-02-27T02:57:03.643
> 
> 标签：java, maven

maven 有一些我不明白的地方，我没有找到任何答案。所以我在这里问它，希望得到答案。
我添加了一个 jar 作为系统范围的项目的 maven 依赖项。
当我`analyze-only`在依赖插件上运行目标时，它确实找到了它。但是每当我想使用这个 jar 中默认包中的类时，它就不会编译。
我对来自同一个提供程序的具有相同类的 jar 做了同样的事情，但这次它位于一个包中，而不是默认包，它可以编译。
有什么明显的我错过或有人已经遇到过同样的问题吗？

不值得发布代码，因为我只是尝试导入系统依赖类之一。
我的 POM（系统依赖）

```
 <?xml version="1.0" encoding="UTF-8"?>
 <project>
  <modelVersion>4.0.0</modelVersion>

  <groupId>edu.algo</groupId>
  <artifactId>algorithms</artifactId>
  <version>1.0</version>
  <properties>
    <lib.path>C:/lib</lib.path>
  </properties>

  <dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>edu.princeton.cs</groupId>
        <artifactId>stdlib</artifactId>
        <version>1.0</version>
        <scope>system</scope>
        <systemPath>${lib.path}/stdlib/stdlib.jar</systemPath>
    </dependency>
  </dependencies>
  <build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.6</version>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
    </plugins>
  </build>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T23:24:34.167

很抱歉打扰你们，感谢您的帮助。
我找到了我的问题的答案，它与 Maven 无关。对于 1.4 以上的 java 版本，您不能从命名包中导入默认包中的类，我使用的是 1.7 版本进行编译。
[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4989710](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4989710)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:03:32.850

您是否提供了它正在寻找的 JAR？听起来它找不到要编译的 JAR。

你读过这个吗？

[http://docs.codehaus.org/display/MAVENUSER/Dependency+Scopes](http://docs.codehaus.org/display/MAVENUSER/Dependency+Scopes)

它指出：

> system：此依赖项在项目生命周期的某个阶段是必需的，但特定于系统。不鼓励使用此范围：这被认为是一种“高级”功能，只有在您真正了解其使用的所有后果时才应使用，如果不是实际上无法量化，这可能会非常困难。根据定义，此范围使您的构建不可移植。在某些边缘情况下可能是必要的。系统范围包括指向此依赖项在本地机器上的物理位置的元素。因此，它用于指代预期会出现在给定本地机器上而不是存储库中的某些工件；并且其路径可能因机器而异。systemPath 元素可以引用其路径中的环境变量：例如 ${JAVA_HOME}。

因此，除非您有充分的理由使用它，否则最好将工件部署到存储库中并像任何其他工件一样引用它？

# java - 填满屏幕时对话框不可滚动

> ID：15103396
> 
> 赞同：0
> 
> 时间：2013-02-27T02:57:12.260
> 
> 标签：java, android, dialog, android-alertdialog

我正在开发一个安卓应用程序。在其中一项活动中，我有一个服务列表，我希望用户对每项服务进行评分。这些服务在一个`TableLayout`（每个服务在它自己的行中）。在行的末尾，我有一个 Rate `button`。当用户点击它时，会`Dialog`弹出一个带有`ratingBar`,`EditView`和底部的两个按钮。我的问题是，当键盘在按钮上弹出时，用户在`EditText`框中写了几行，关键字隐藏了按钮。因此，用户无法按下按钮，用户需要将键盘最小化才能看到按钮。

**现在**，我看到了关于这个话题的几个问题，但他们都有`xml`解决方案。就我而言，对话框都是代码，在这种情况下我不使用 xml 布局。（我不确定这是正确的方法，但它可以满足我的需要）

**这是一张图片** ![这是发生的事情的例子](../Images/52f2b3b23e1d032ef5228e3f19f2ab98.png)

**这是对话框的代码**。这是点击费率按钮时发生的情况。有任何想法吗？

```
 e.setOnClickListener(new View.OnClickListener() {

             public void onClick(View v) {
                 boolean same = false;
                 TableRow row = new TableRow(QAListActivity.this); 
                 RatingBar ratingBar = new RatingBar(QAListActivity.this);;
                 Dialog rankDialog = new Dialog(QAListActivity.this);

                 rankDialog.setContentView(R.layout.qa_rate);
                 rankDialog.setCancelable(true);
                 rankDialog.setCanceledOnTouchOutside(true);

                 TableLayout table1 = new TableLayout(QAListActivity.this);
                 ArrayList<RatingBar> ratingBars = new ArrayList<RatingBar>();
                 EditText comment = new EditText(QAListActivity.this);

                 for(int z = 0; z < tour.QAList.size(); z++){
                     if(tour.QAList.get(z).getServiceType().equalsIgnoreCase(tour.voucherList.get(position).getServiceType())){
                         rankDialog.setTitle("Rate " + tour.voucherList.get(position).getDescription());
                         same = true;
                         row = new TableRow(QAListActivity.this); 
                         TextView text = new TextView(QAListActivity.this);
                         ratingBar = new RatingBar(QAListActivity.this);
                         ratingBars.add(ratingBar);
                         text.setText(tour.QAList.get(z).getQualityDesc());
                         text.setTextSize(20);
                         text.setHeight(40);
                         text.setGravity(Gravity.CENTER_VERTICAL);

                         row.addView(text);
                         row.addView(ratingBar);
                         row.setGravity(Gravity.CENTER);
                         table1.addView(row,new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
                         tour.voucherList.get(position).voucher_rating.add(tour.QAList.get(z));
                     }
                 }

                 if(same){

                     String type = tour.voucherList.get(position).getServiceType();

                     if (type.equalsIgnoreCase("CNV")){

                         String[] qa_bus = {"Bus Make","Bus Year","Number of Seats","Bus Company","Bathroom on Bus?","Driver's Name",
                                 "Driver speaks English","Helpfulness of driver (on/off bus)","Were there Gate1 signs on the bus?"};
                         TableLayout table_bus = new TableLayout(QAListActivity.this);

                         for(int count = 0; count < qa_bus.length; count++){
                             TableRow row_make = new TableRow(QAListActivity.this);
                             EditText make = new EditText(QAListActivity.this);
                             make.setHint(qa_bus[count]);
                             make.setWidth(table.getWidth()/2+50);
                             row_make.addView(make);
                             row_make.setGravity(Gravity.CENTER);
                             table_bus.addView(row_make, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,LinearLayout.LayoutParams.FILL_PARENT));
                         }
                         table1.addView(table_bus);     
                     }
                     else{
                         TableLayout table_comment = new TableLayout(QAListActivity.this);
                         TableRow row_comment = new TableRow(QAListActivity.this);
                         comment = new EditText(QAListActivity.this);

                         comment.setHint("Remarks");
                         comment.setWidth(table.getWidth()/2+50);

                         row_comment.addView(comment);
                         row_comment.setGravity(Gravity.CENTER);
                         table_comment.addView(row_comment, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,LinearLayout.LayoutParams.FILL_PARENT));
                         table1.addView(table_comment);     
                     }

                     TableLayout table_buttons = new TableLayout(QAListActivity.this);
                     TableRow save_row = new TableRow(QAListActivity.this); 
                     Button save = new Button(QAListActivity.this);
                     save.setText("Save");
                     save_row.addView(save);    
                     save_row.setGravity(Gravity.CENTER);

                     final Dialog rankDialogTemp = rankDialog;
                     final ArrayList<RatingBar> ratingBarsTemp = ratingBars;
                     final EditText remarksTemp = comment;
                     save.setOnClickListener(new View.OnClickListener() {

                         public void onClick(View v) {
                             for(int xx = 0; xx < ratingBarsTemp.size(); xx++){
                                 Log.d("ratingBar", "" + ratingBarsTemp.get(xx).getRating());
                                 tour.voucherList.get(position).voucher_rating.get(xx).setRating(ratingBarsTemp.get(xx).getRating());
                             }
                             tour.voucherList.get(position).setQAcompleted(true);
                             tour.voucherList.get(position).setRemarks(remarksTemp.getText().toString());
                             rowTemp.setBackgroundColor(Color.GREEN);
                             getInfo.saveOfflineData(QAListActivity.this, new Gson().toJson(TourListActivity.TourList), DateFormat.getDateTimeInstance().format(new Date()));
                             rankDialogTemp.dismiss();   
                         }
                     });

                     Button back = new Button(QAListActivity.this);
                     back.setText("Back");
                     save_row.addView(back);    
                     back.setOnClickListener(new View.OnClickListener() {
                         public void onClick(View v) {
                             rankDialogTemp.dismiss();   
                         }
                     });                             
                     table_buttons.addView(save_row);
                     table1.addView(table_buttons); 

                 }
                 rankDialog.addContentView(table1, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

                 //now that the dialog is set up, it's time to show it    
                 rankDialog.show();                
             }
         }); 
```

我的`qa_rate.xml`代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
             android:id="@+id/qa_rate"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content" >
    <TableLayout  
        android:id="@+id/rating"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:stretchColumns="*"
        android:paddingRight="5dp"
        android:orientation="vertical" >

    </TableLayout >
    </ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:02:14.337

也许玩 windowSoftInputMode

[http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)

或者也许将您的按钮放在滚动视图中，以便用户可以向下滚动到它。

# matlab - 在 Matlab 中具有单个值的 hist

> ID：15103397
> 
> 赞同：0
> 
> 时间：2013-02-27T02:58:03.560
> 
> 标签：matlab, histogram

当您像这样使用 hist 函数时：

```
[h x] = hist(data, 1000) 
```

只要数据长于一，就可以正常工作`length(data) > 1`。

但如果是的`= 1`话，它会这样做：

![在此处输入图像描述](../Images/8cefde3fe411b7474cc44f0021e6dd7b.png)

数据在 -500 到 500 之间传播。有没有办法阻止它这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T05:03:25.303

您使用的函数形式`hist(data,1000)`（一个有意义的范围）。这是[文档](http://www.mathworks.com/help/matlab/ref/hist.html)中的简介：

> n = hist(Y,nbins) 其中 nbins 是一个标量，使用 nbins 个 bin。

有一些选项可以使它“更好”（用引号括起来，因为除了你之外没有人知道你想要什么）：

1）您可以使用不同形式的函数来指定垃圾箱的位置：

> n = hist(Y,x) 其中 x 是一个向量，返回 Y 在长度 (x) 个 bin 中的分布，其中中心由 x 指定。例如，如果 x 是一个 5 元素向量，则 hist 将 Y 的元素分布到以 x 轴为中心在 x 中的元素处的五个 bin 中，其中没有一个可以是复数。注意：如果指定 bin 边缘而不是中心更自然，请使用 histc。

2）如果小于某个最小值，您可以将箱数限制为数据向量中的元素数：

```
hist(data, min(1000, numel(data))) 
```

3）您可以检查特殊情况（例如 N = 1）-您提到这是不可取的，但是使用脚本/函数这根本不是困难，因此您可能必须澄清为什么这是不可接受的.

4）您可以在绘图后适当地缩放 x 轴（类似于@Parag 的答案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:54:57.327

您可以使用[find](http://www.mathworks.com/help/matlab/ref/find.html)函数或逻辑索引找到数据的范围，然后使用[此处](http://www.mathworks.com/help/matlab/ref/axis.html)`axis([xmin xmax ymin ymax])`描述的属性

# javascript - 试图用 jQuery 过滤所有非类型

> ID：15103398
> 
> 赞同：-1
> 
> 时间：2013-02-27T02:58:09.753
> 
> 标签：javascript, jquery, filter, addclass

我有一个功能，只要我点击一年就可以添加类灯

```
$('#options li a').click(function() {
    var $this = $(this),
        type = $this.attr('class');

    $links.children('li')
        .removeClass('light')
        .filter('.' + type)
        .addClass('light')
    return false;
}); 
```

我想做相反的事情：

```
.filter.not('.' + type) 
```

但这似乎不起作用

有没有办法告诉 jquery 选择不属于 X 类的所有内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T03:03:51.643

在您的情况下，您应该能够简单地使用 jQuery 的`not()`函数而不是`filter()`.

```
$('#options li a').click(function() {
    var $this = $(this),
        type = $this.attr('class');

    $links.children('li')
        .removeClass('light')
        .not('.' + type) // <-- *Modified Line*
        .addClass('light')
    return false;
}); 
```

如果您需要更多信息，请查看 jQuery 文档的[这一部分](http://api.jquery.com/not/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:09:47.370

使用[filter()](http://api.jquery.com/filter/)你可以这样做：

```
$links.children('li')
  .removeClass('light').filter(function(){
      return $(this).attr("class") !== type;
  }).addClass('light'); 
```

# wordpress - 打印类别打印数组？

> ID：15103399
> 
> 赞同：0
> 
> 时间：2013-02-27T02:58:14.423
> 
> 标签：wordpress, categories

我正在尝试使用此代码打印类别并继续打印数组？

```
<?php $posts = get_posts('category=1&orderby=desc'); foreach($posts as $post) { ?>
            <a href="<?php the_permalink() ?>" target="_parent"><?php the_title(); ?></a><br /><?php print(get_the_category($id)); ?>
        <?php } ?> 
```

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:04:08.293

一篇文章可能属于多个类别，因此进一步返回一个数组，它是一个对象数组。这是文档中的一个示例。

```
<?php
$categories = get_the_category();
$separator = ' ';
$output = '';
if($categories){
    foreach($categories as $category) {
        $output .= '<a href="'.get_category_link($category->term_id ).'" title="' . esc_attr( sprintf( __( "View all posts in %s" ), $category->name ) ) . '">'.$category->cat_name.'</a>'.$separator;
    }
echo trim($output, $separator);
}
?> 
```

# javascript - 如何截断无序列表并允许用户单击以显示全部？

> ID：15103404
> 
> 赞同：0
> 
> 时间：2013-02-27T02:58:25.887
> 
> 标签：javascript, jquery, html-lists

我有一个很长的无序列表，我想在加载时隐藏除前 3 个之外的所有内容，然后在点击时展开全部。

到目前为止，这是我的 jQuery：

```
$('#myList').find('li:gt(3)').addClass('togglr').hide().end().append(
    $('<li class="show_more_btn">Read more »</li>').click(function(){
        $(this).siblings('.togglr').toggle();
        if ($(this).hasClass('expanded')){
            $(this).text('View All');
            $(this).removeClass('expanded');
        } else{
            $(this).text('View Less');
            $(this).addClass('expanded');
        }
    }); 
```

还有我的html：

```
<ul id="myList">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
    <li>Item 5</li>
    <li>Item 6</li>
    <li>Item 7</li>
    <li>Item 8</li>
</ul> 
```

这是一个 jsFiddle：http: [//jsfiddle.net/t2jrZ/](http://jsfiddle.net/t2jrZ/)

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:03:47.877

你快到了！也许只是想太多了；）

当前代码的问题是`});`当前脚本末尾的最后一个，将其替换为`}));`

HTML

```
<ul id="info">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
    <li>Item 5</li>
    <li>Item 6</li>
    <li>Item 7</li>
    <li>Item 8</li>
</ul>
<button type="button" onclick="showAll();">Show All</button> 
```

Javascript：

```
var limit = 3;
$('#info li:lt(' + limit + ')').show();
$('button').click(function(){
     $('#info li').show();
}); 
```

[http://jsfiddle.net/t2jrZ/2/](http://jsfiddle.net/t2jrZ/2/)

# c++ - 试图清除 QT C++ 中的文本编辑框（使用 QT Creator）

> ID：15103409
> 
> 赞同：3
> 
> 时间：2013-02-27T02:59:11.940
> 
> 标签：c++, qt, textedit

我是 QT 新手，对编程很年轻，并且不了解 QT 课程的所有帮助材料。

我有以下代码，它在单击按钮时执行，插入文本。这工作正常，但我想先清除 textEdit，然后插入新文本。谁能在这里指出我正确的方向？任何帮助深表感谢。

```
QTextCharFormat textFormat;
QTextCursor cursor(ui->textEdit->textCursor());
cursor.insertText("<some text to insert", textFormat); 
```

看来我必须使用 setPosition() 和 movePosition() 来选择文本，然后 removeSelectedText() 来清除它。我不知道如何确定文档中的第一个和最后一个位置。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T03:27:26.750

QTextEdit 有一个清除功能，可以删除所有文本。在文档中，它被列为插槽。

[QTextEdit::clear()](http://qt-project.org/doc/qt-4.8/qtextedit.html#clear)

# python - 无法将字典元素（字符串）转换为 int

> ID：15103411
> 
> 赞同：0
> 
> 时间：2013-02-27T02:59:20.147
> 
> 标签：python, converter

将字典内元组中的两个元素转换为 int 值时遇到了一些麻烦。字典的键是国家名称，信息元组是（地区，人口）。这是我到目前为止所拥有的：

```
def _demo_fileopenbox():        
    msg  = "Pick A File!"
    msg2 = "Select a country to learn more about!"
    title = "Open files"
    default="*.py"
    f = fileopenbox(msg,title,default=default)
    writeln("You chose to open file: %s" % f)

    countries = {}

    with open(f,'r') as handle:
        reader = csv.reader(handle, delimiter = '\t')  
        for row in reader:
            countries[row[0]] = (row[1].replace(',', ''), row[2].replace(',', ''))
            for i in countries:
                int((countries[i])[0]) 
                int((countries[i])[1])
        #while 1:
        #    reply = choicebox(msg=msg2, choices= list(countries.keys()) )
        #    writeln(reply + "-\tArea: " + (countries[reply])[0] + "\tPopulation: " + (countries[reply])[1] ) 
```

但我不断收到此错误：

```
 int((countries[i])[0]) 
ValueError: invalid literal for int() with base 10: '' 
```

任何想法如何解决这个问题或更好的方法来做到这一点：

# eclipse - eclipse 导航在目录层次结构而不是包中显示 java 源代码

> ID：15103415
> 
> 赞同：0
> 
> 时间：2013-02-27T02:59:41.390
> 
> 标签：eclipse

由于某种原因，我发现在显示源时，我的导航器从右侧（首选）变为左侧，需要更多点击才能访问源文件。我记得我确实在不知不觉中接受了一些机会，结果导致了这种不愉快的变化，却找不到回去的路……

谢谢你的帮助！

![在此处输入图像描述](../Images/9236623799659365513eefc5b022f681.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:05:17.900

eclipse 中你最好的朋友是 CTRL+3（快速访问），按下它然后搜索你想要的，尝试透视和视图，见下文。

## 观点

检查你（现在）的观点。在 Eclipse 的右上角有一个视角列表。有时，当您执行一项操作时，它会询问您是否要改变观点。这可以改变您的视图/布局。您可能需要 Java 或 Java EE 透视图。

## 意见

您的文件有多个视图。ComputeBench 显示的选项卡的名称是什么？尝试打开“项目资源管理器”或“包资源管理器”视图。

# c# - 从超过 2 个表中绑定 gridview

> ID：15103417
> 
> 赞同：0
> 
> 时间：2013-02-27T02:59:59.460
> 
> 标签：c#, sql, gridview

[我正在尝试从一个表中绑定一个gridview并在另一个表中更新记录]

实际上我有两个 sql 表，分别命名为 mtblVehicle_Booking 和 mtblLog_Book。在这两个表中，所有列都相同，但 mtblLog_Book 有 2 个多列 KM_Start 和 KM_End。

实际上，我正在从 mtblVehicle_Booking 表（没有 KM_Start 和 KM_End 列）中绑定 gridview。另一方面，我在 gridview 中给出了编辑选项，但是当我需要编辑这个 gridview 时，列 KM_Start 和 KM_End 应该作为编辑表单出现在该 gridview 中，并且在更新 gridview 后，应该在 gridview 中看到更新的信息。

我怎样才能做到这一点。

您可以将其视为与一个表绑定的 Gridview，但是当它更新时，它应该与另一个具有更新信息的表部分绑定，其余的 gridview 应与第一个表绑定。

假设如果 gridview 有 5 行来自 table1 一个，并且如果我编辑两行以更新 table2，那么 gridview 应该显示来自 table2 的这 2 行和来自 table1 的其余行，实际上已经更新了机器人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:00:54.293

所以我不知道我们在谈论什么样的数据存储库，但是：

1）当您完成前端数据更新时，为什么不直接绑定到 mtbLog_Book 并协调与 mtbVehicle_Booking 的差异？

2）或加入两个对象：

```
class Program
{
    static void Main(string[] args)
    {
        var obj1 = new List<SomeOBject1>();
        var obj2 = new List<SomeOBject2>();
        var randomData1 = new SomeOBject1 { Id1 = 1, SomeData1 = "one" };
        var randomData2 = new SomeOBject2 { Id2 = 1, SomeData2 = "two", End = DateTime.Now, Start = DateTime.Now };
        obj1.Add(randomData1);
        obj2.Add(randomData2);

        var bound = obj1.Join(obj2, o1 => o1.Id1, o2 => o2.Id2, (o1, o2) => new {o1, o2.Start, o2.End});

    }

}

public class SomeOBject1
{
    public int Id1 { get; set; }
    public string SomeData1 { get; set; }

}
public class SomeOBject2
{
    public int Id2 { get; set; }
    public string SomeData2 { get; set; }
    public DateTime Start { get; set; }
    public DateTime End { get; set; }

} 
```

3) 或在将数据拉入 c# 之前在 sql 中创建连接。（对不起，我的 sql 代码由于某种原因没有显示出来）

```
Select vb.*,lg.start,lg.end from mtblVehicle_Booking vb join mtblLog_Book lg on vb.whateverKeyTheyShare = lg.whateverKeyTheyShare 
```

4）或在您的 mtblVehicle_Booking 对象上创建一个带有两个额外列的部分类。然后协调 mtbLog_Book。

# perl - 解析大型文本文件并将检索到的信息置于正则表达式中

> ID：15103419
> 
> 赞同：0
> 
> 时间：2013-02-27T03:00:26.897
> 
> 标签：perl

我的输入文件以这种方式包含以下信息

```
>V063O:34:49 length=314
GAGATGACTCCCAGGGGGGGGGGATGAAACCCAGACCTGGCACCATGGGATCAGCCATTC
CATCTTGACCAAAGGGGGGGGGGAAAGAAAGTGTAATTAATAAAGTACAGTGGCAGAGAG
AGTTCAAATAGTTGCGAGTCTACTCTGGAGGTTGCTGTTGTGCTAAGCTTCAGGTTATAC
CTTGACCCTACCATACCCCCCAAACCAGGACAATTCCAAGCCCAAATCCGTAAAAGAAAC
ACCTAAGGCAATATATAAGATTCTACAGGTCATACATCTAGACTACTTACTAACAATCCG
TAACAACCTCAGAT
>V063O:35:44 length=104
GCTCTTTTTTTTTTTAGCAAAAACCGTTAGCCAATCCCTACCCAACCCCTGGCACCTGGG
GGGGGGTGCCCGAGCGCCGGTGGGAGAACGGAGGAAACGCACTC 
```

序列（低于 ID 和长度 = 的数据字符串）将受到以下正则表达式的影响

```
 #Search sequence for a combination of 2 values of ACGT that are repeated at least 10 times
        my $regex1 = qr/( ([ACGT]{2}) \2{9,} )/x;
    #Search sequence for a combination of 3 values of ACGT that are repeated at least 7 times
        my $regex2 = qr/( ([ACGT]{3}) \2{6,} )/x;
    #Search sequence for a combination of 4 values of ACGT that are repeated at least 7 times
        my $regex3 = qr/( ([ACGT]{4}) \2{6,} )/x;
for my $regex ($regex1, $regex2, $regex3) {
    next unless $seq1 =~ $regex;
    printf "Matched %s exactly %d times\n", $2, length($1)/length($2);
    printf "Length of sequence: $number \n";
} 
```

当前，这会将仅包含单个序列的示例文本文件的结果返回到命令行

我需要能够将在文件和上面的正则表达式中找到的以下元素打印到文本文件中每个序列的单个文件中（因此在文本文件中找到的所有序列都有一个文件）。

```
ID (example: V0630:34:49) , The elements that are repeating (example; GCT), the number of repeats (example; 13), and the length of the entire sequence. 
```

条件是 BioPerl 不是一个选项（用户不是 Perl 精通的，所以这意味着最终用户尽可能容易而不必下载模块）并且输入文件本质上非常大（300MB 或更多）。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:23:51.707

从您的评论看来，这可能是家庭作业。你是打算自己解决这个问题吗？

```
use strict;
use warnings;
use autodie;

my @regexes = (
  qr/( ([ACGT]{2}) \2{9,} )/x,
  qr/( ([ACGT]{3}) \2{6,} )/x,
  qr/( ([ACGT]{4}) \2{6,} )/x,
);

open my $fh, '<', 'data.txt';

my $seq;
my $id;

while (<$fh>) {

  if (/^>(\S+)/) {
    process_sequence($id, $seq) if $seq;
    $id = $1;
    $seq = ''
  }
  else {
    chomp;
    $seq .= $_;
  }
}
process_sequence($id, $seq) if $seq;

sub process_sequence {
  my ($id, $seq) = @_;
  for my $regex (@regexes) {
      next unless $seq =~ $regex;
      printf "Sequence ID %s matched %s exactly %d times\n", $id, $2, length($1)/length($2);
      printf "Length of sequence: %s \n", length $seq;
      print "\n";
  }
} 
```

# android - 如何使用 facebook api 在 facebook 帖子中设置图标？

> ID：15103421
> 
> 赞同：1
> 
> 时间：2013-02-27T03:00:38.370
> 
> 标签：android, facebook

![在此处输入图像描述](../Images/c8b169ae6244205d0c9e32916ba98764.png)

我使用下面显示的捆绑包在 facebook 上发布了一条消息。

```
Bundle postParams = new Bundle();
postParams.putString("name", "Facebook SDK for Android");
postParams.putString("caption", "Build great social apps and get more installs.");
postParams.putString("description", "The Facebook SDK for Android makes it easier and faster to develop Facebook integrated Android apps.");
postParams.putString("link", "https://developers.facebook.com/android");
postParams.putString("picture", "https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png");
Request request = new Request(Session.getActiveSession(), "me/feed", postParams, 
                                  HttpMethod.POST, null);
RequestAsyncTask task = new RequestAsyncTask(request);
task.execute(); 
```

[如何使用 facebook api 在 facebook 帖子中设置图标并添加操作？](https://stackoverflow.com/questions/5300128/how-to-set-an-icon-and-add-an-action-in-a-facebook-post-using-facebook-api) 我试过了，解决方案帮不了我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:55:07.710

您不能为您发布的每条消息设置它。那里出现的图标是您在开发人员仪表板中设置的图标。

# function - Flexslider 停止工作。Firebug 显示 TypeError: $(...).flexslider is not a function

> ID：15103424
> 
> 赞同：0
> 
> 时间：2013-02-27T03:00:33.903
> 
> 标签：function, animation, slide, typeerror, flexslider

我正在为我们的客户开发一个单页 wordpress 网站。我在标题部分和其他一些 jquery 插件中使用了 flexslider。他们都一直工作到今天早上，但现在我发现 flexslider 停止工作了。
我无法找出原因。请帮我解决这个问题，因为我今天必须提交这个项目。

在 Firebug 控制台上发现错误：TypeError: $(...).flexslider 不是函数
动画：“幻灯片”
-/Demo/website/（第 34 行）

我怎样才能解决这个问题？任何帮助将不胜感激..

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:08:33.970

jquery.flexslider.js 未加载。尝试`defer`从中删除关键字或添加关键字 `type="text/javascript"`，看看它是否有效。您当前的来源：

```
<script defer src="http://www.yourwebsite.com/Demo/allabout/wp-content/themes/twentytwelve/js/jquery.flexslider.js"></script> 
```

我建议你试试

```
<script type="text/javascript" src="http://www.yourwebsite.com/Demo/allabout/wp-content/themes/twentytwelve/js/jquery.flexslider.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T07:39:12.217

试试这个..希望这会奏效。

```
(function($) {
$(window).load(function(){
$('.flexslider').flexslider({
--------- YOUR CONFIGURATIONS --------
});
});
})(jQuery); 
```

# ruby-on-rails - rails 从 gem 返回的 hashie 中提取变量

> ID：15103425
> 
> 赞同：1
> 
> 时间：2013-02-27T03:01:08.897
> 
> 标签：ruby-on-rails, ruby, api, rails-console

我正在使用一个名为[Desk](http://github.com/zencoder/desk)的 gem从desk.com 的 API 返回数据。当我运行`Desk.customers(:custom_external_id => temp.id)`它时，它会返回一组可爱的数据。

我正在寻找整数 71095620 从`id=71095620`.

```
 => #<Hashie::Rash count=20 page=1 results=[#<Hashie::Rash customer=#<Hashie::Rash addresses=[] custom_external_id="58749" emails=[#<Hashie::Rash email=#<Hashie::Rash created_at="2013-02-13T15:59:26-08:00" email="CENSORED" i
d=33622514 updated_at="2013-02-13T15:59:26-08:00" verified_at=nil>>] first_name="CENSORED" id=68712186 language=nil last_name="CENSORED" phones=[#<Hashie::Rash phone=#<Hashie::Rash created_at="2013-02-13T16:00:45-08:00" id=1301079 phone="CENSORED" updated_at="2013-02-13T16:00:45-08:00">>] twitters=[nil]>>, #<Hashie::Rash customer=#<Hashie::Rash addresses=[] custom_external_id="58749"  emails=[] first_name="CENSORED" id=71095620 language=nil last_name="CENSORED" phones=[] twitters=[nil]>>] total=2> 
```

这显然有多个 id 字段，我不确定哪种方法最好提取该整数。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:11:00.303

根据[Hasie::Rash 自述文件](https://github.com/tcocca/rash)，您可能可以这样做

```
response = Desk.customers(:custom_external_id => temp.id)
response.results[1].customer.id 
```

# css - 修改 <%= f.submit %> 的默认 CSS 输入类

> ID：15103426
> 
> 赞同：0
> 
> 时间：2013-02-27T03:01:29.070
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3

我一直在尝试以`<%= f.submit %>`与我的其他“按钮”相同的方式连续出现，但运气不佳。我发现这篇关于修改 类的[有用帖子](https://stackoverflow.com/questions/5315967/add-a-css-class-to-f-submit)`f.submit`，但在浏览器中检查它的元素时意识到它采用了类`input`，而不管我添加了哪些附加类作为选项参数，从而限制了它的外观。

本质上，我的其他每个按钮都具有以下形式：

```
<div class="sort-nav">
  <ul>
    <li><h4><%= link_to "Some stuff", some_link_path %></h4></li>
  </ul>
</div> 
```

我想知道是否有一种方法可以将所有这些样式压缩到一个类中，并`input`覆盖`f.submit`. 谢谢。

* * *

为了启迪，这个按钮将成为我的“关注”/取消关注按钮，用于创建或销毁关系，我首先打算`_follow_form`使用以下代码呈现部分：

```
 <% if current_user.following?(@course) %>
    <%= render 'unfollow' %>
  <% else %>
    <%= render 'follow' %>
  <% end %> 
```

每个单独的`_follow`部分如下所示：

```
<%= form_for(current_user.relationships.build(followed_id: @course.id)) do |f| %>
  <%= f.hidden_field :followed_id %>
  <%= f.submit "Follow course" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:22:53.327

有点骇人听闻，但您始终可以使用 js 提交表单，因此不要使用`f.submit`，将其更改为

```
<div class="sort-nav">
  <ul>
    <li>
      <h4><%= link_to_function "Some stuff", '$(this).closest("form").submit()' %></h4
    </li>
  </ul>
</div> 
```

# java - 分治算法

> ID：15103429
> 
> 赞同：0
> 
> 时间：2013-02-27T03:01:44.287
> 
> 标签：java, recursion, divide-and-conquer

我得到了一块 2^k * 2^k 大小的木板，其中一块瓷砖被随机移除，使其成为一块有缺陷的木板。任务是用“trominos”填充，这是一个由 3 个瓷砖组成的 L 形图形。

解决它的过程并不太难。如果棋盘是 2x2，那么只需要一个 tromino 就可以填满它。对于任何更大的尺寸，它必须被分成四等分（制作四块 2^(k-1) 大小的木板），在中心点放置一个 tromino，因此每个象限都有一个填充瓷砖。之后，可以递归地填充棋盘，直到每个图块都填充有随机颜色的 tromino。

我的主要问题实际上是实现代码。我的 Java 编程技能通常很薄弱，而且我常常很难找到一个开始的地方。唯一要做的工作是在 tiling 类中的 tile 方法中，该方法将有缺陷的板作为输入进行平铺，开始平铺的行和列，以及要填充的瓷砖数量。这是一个家庭作业问题，所以我只是在寻找一些指导或开始的地方 - 任何帮助将不胜感激。

```
public class BoardViewer extends JFrame {

private static final int WIDTH = 1024;
private static final int HEIGHT = 768;
private static final int OFFSET = 30;

public static final int UPVERT = 1;
public static final int DNVERT = 2;
public static final int RHORIZ = 4;
public static final int LHORIZ = 8;
public static final int FILL = 16;

private Color [][] board;

public BoardViewer(DeficientBoard db) {
    super();
    setSize(WIDTH + (OFFSET*2), HEIGHT + (OFFSET*2));
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setResizable(false);

    board = db.getBoardColor();
}

public void paint(Graphics g) {
    super.paint(g);

    int width = WIDTH/board[0].length;
    int height = HEIGHT/board.length;

    for (int r = 0; r < board.length; r++)
        for (int c = 0; c < board[r].length; c++) {
            g.setColor(board[r][c]);

            int x = c*width + OFFSET;
            int y = r*height + OFFSET + (OFFSET/2);

            g.fillRect(x+1, y+1, width-1, height-1);
        }
} 
```

}

```
public class DeficientBoard {

private int n;
private Color board[][];

// The four rotations of the tile.
// UL is XX
//       X
// UR is XX
//        X
// LL is X
//       XX
// LR is  X
//       XX
public final int UL = 0;
public final int UR = 1;
public final int LL = 2;
public final int LR = 3;

/**
 * Create a 2^k x 2^k deficient board.
 * 
 * @param k power
 */
public DeficientBoard(int k) {
    n = (int)Math.pow(2, k);
    createBoard(Color.LIGHT_GRAY);
}

/**
 * Actually create an n x n deficient board.
 * 
 * @param color background color
 */
private void createBoard(Color color) {
    board = new Color[n][n];
    for (int r = 0; r < board.length; r++)
        for (int c = 0; c < board[0].length; c++)
            board[r][c] = color;

    int d_row = (int)(Math.random() * n);
    int d_col = (int)(Math.random() * n);
    board[d_row][d_col] = Color.BLACK;
}

/**
 * Given a row and column and shape based on that point
 * place a tromino of the given color.
 * 
 * @param r row
 * @param c column
 * @param s shape (UL, UR, LL, LR)
 * @param theColor a Color
 */
public void placeTromino(int r, int c, int s, Color theColor) {
    if (s == UL) {
        board[r][c] = theColor; 
        board[r][c+1] = theColor;
        board[r+1][c] = theColor;
    } else if (s == UR) {
        board[r][c] = theColor;
        board[r][c+1] = theColor;
        board[r+1][c+1] = theColor;
    } else if (s == LL) {
        board[r][c] = theColor;
        board[r+1][c] = theColor;
        board[r+1][c+1] = theColor;
    } else {
        board[r+1][c] = theColor;
        board[r+1][c+1] = theColor;
        board[r][c+1] = theColor;
    }
}

/**
 * Get the 2^k x 2^k board.
 * 
 * @return the Color board.
 */
public Color[][] getBoardColor() {
    return board;
}

/**
 * Find and return the deficient row.
 * 
 * @param row row
 * @param col column
 * @param sz size of the baord
 * @return the row the deficient block is located
 */
public int getDeficientRow(int row, int col, int sz) {

    for (int r = row; r < (row + sz); r++)
        for (int c = col; c < (col + sz); c++)
            if (board[r][c] != Color.LIGHT_GRAY)
                return r;

    return -1;
}

/**
 * Find and return the deficient column.
 * 
 * @param row row
 * @param col column
 * @param sz size of the baord
 * @return the row the deficient block is located
 */
public int getDeficientCol(int row, int col, int sz) {
    for (int r = row; r < (row + sz); r++)
        for (int c = col; c < (col + sz); c++)
            if (board[r][c] != Color.LIGHT_GRAY)
                return c;

    return -1;
}

/**
 * Get the size of the deficient board.
 * 
 * @return the size
 */
public int getSize() {
    return n;
}

/**
 * Display information about the deficient board.
 */
public String toString() {
    return ("Deficient board of size " 
             + n + "x" + n
             + " with position missing at (" 
             + getDeficientRow(0, 0, n) + "," + getDeficientCol(0, 0, n) +").");
} 
```

}

```
public class Tiling {

private static Color randColor() {
    int r = (int)(Math.random() * 256);
    int g = (int)(Math.random() * 256);
    int b = (int)(Math.random() * 256);

    return new Color(r, g, b);
}

public static void tile(DeficientBoard db, int row, int col, int n) {

}

public static void main(String[] args) {

    DeficientBoard db = new DeficientBoard(3);
    System.out.println(db);

    tile(db, 0, 0, db.getSize());

    BoardViewer bv = new BoardViewer(db);
    bv.setVisible(true);

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:46:13.430

一般来说，当递归函数实现分治算法时，它必须处理两种基本情况：

*   基本*情况*。这是你完成分裂的情况，需要征服一点。在您的作业中，基本情况是*n* = 2 的情况，在这种情况下，您只需要找到四个瓷砖中的哪一个缺失/涂漆（使用`DefectiveBoard.getDeficientRow`和`DefectiveBoard.getDeficientCol`）并添加适当的 triomino 以覆盖其他三个瓷砖。
*   *递归*情况。这是您*没有*完成除法的情况，因此您需要除法（即递归），并且（取决于算法）可能需要在递归之前或之后进行一些征服。在您的作业中，递归情况是*n* > 2 的情况。在这种情况下，您需要做两件事：
    *   找出四个象限中的哪一个有缺失/上漆的瓷砖，并添加适当的三格板以覆盖其他三个象限中的每一个的一个瓷砖。
    *   递归，称自己四次（每个象限一次）。

一个好的起点是写“这是基本情况吗？” 检查，并实施基本情况。

之后，如果你不知道如何写递归的情况，一种方法是*暂时*写一个“高于基础”的情况（*n* = 4），看看你是否可以概括它。如果不是，您可能会*暂时*写一个“比基础高二”的情况（*n* = 8），依此类推。（一旦你的递归算法工作起来，你就可以删除这些特殊情况，因为它们完全被一般递归情况所覆盖。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T04:14:04.660

嗯，这是一个更难解决的问题。但是，鉴于您编写了多少代码，我会说您具有技能，因此我不会对此有任何自觉。

我没有制定完整的解决方案，但我认为如果您从移除的瓷砖开始并在其两侧放置一个 trominos。然后继续将 trominos 放在最后一个 trominos 的两侧。您正在“舀”您上次放在板上的 tromino。一旦你这样做到板的边缘。剩下的就是tromino 形状的位置。这是我的意思的一个例子（X是掉落的瓷砖，即间隙，Y是trominos）：

```
 _ _ _ _
|_|_|_|_|
|_|Y|Y|_|
|_|Y|X|Y|
|_|_|Y|Y|

 _ _ _ _
|Y|Y|_|_|
|Y|Y|Y|_|
|_|Y|X|Y|
|_|_|Y|Y| 
```

一旦棋盘被填满，你就可以开始在棋盘的其余部分投下炸弹，就像炸弹一样。我觉得这里有一种模式，你可以在填充对角线的同时填充第二部分，这是可重复的。但是，如果您找不到，则创建一个递归例程，将间隙勺到边缘，然后过渡到以对角线模式添加 trominos。提示您必须仅在第一个堆栈帧中进行转换。

祝你好运。

# excel - 如何在 IIS 7 中从 csv 或 excel 批量导入 301 重定向

> ID：15103433
> 
> 赞同：1
> 
> 时间：2013-02-27T03:02:03.233
> 
> 标签：excel, redirect, iis-7, import, bulk

有没有办法从 excel 或 csv 文件在 IIS 7 中导入/更新 100 个 301 重定向

Excel文件格式目前由两列组成，第一列由旧网址组成，第二列由新网址组成，有点像这种格式

[https://support.3dcart.com/Knowledgebase/Article/View/297/12/how-do-i-import-my-301-redirects](https://support.3dcart.com/Knowledgebase/Article/View/297/12/how-do-i-import-my-301-redirects)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-27T03:25:39.077

从 web.config 文件中复制 XML 格式的重定向，例如：

```
<configuration>
  <location path="services.htm">
    <system.webServer>
      <httpRedirect enabled="true" destination="http://domain.com/services" httpResponseStatus="Permanent" />
    </system.webServer>
  </location>
  <location path="products.htm">
    <system.webServer>
      <httpRedirect enabled="true" destination="http://domain.com/products" httpResponseStatus="Permanent" />
    </system.webServer>
  </location>
</configuration> 
```

将其粘贴到新的记事本文档中。将其另存为 web.xml。在 Excel 中打开它。Excel 应该会自动创建一个模式，并且它应该以与您想要的格式相似的格式出现。如果需要，可以进一步格式化。将其保存为 CSV。

# android - Android手机，睡眠模式下哪些设备被关闭

> ID：15103435
> 
> 赞同：2
> 
> 时间：2013-02-27T03:02:04.000
> 
> 标签：android, sleep-mode

我有一个场景，android 设备通过漫游服务与 FTP 服务器交换数据。我希望通过在数据传输过程中设置 WakeLock 类型使操作系统进入正确的睡眠模式，因为它确实与最终用户没有交互。

我正在通过睡眠线程并尝试验证哪些单元将在睡眠模式下关闭以防止数据发送。到目前为止，没有官方文档表明它们。

那么，请您帮我解答一下问题：当Android进入睡眠模式时，哪些组件会停止工作，例如WIFI，数据漫游？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:18:41.637

当 Android 进入睡眠模式时，几乎所有东西都会关闭。仅保留基本系统应用程序和 GSM/CDMA 无线电来接收短信、电话、推送通知等。服务、活动全部关闭，CPU 进入低功耗模式。根据用户在 wifi 设置中选择的内容，wifi 连接可能会或可能不会切换到移动数据或完全关闭。

如果您想继续处理，但不需要屏幕与用户交互，您应该获取一个[PARTIAL_WAKE_LOCK](http://developer.android.com/reference/android/os/PowerManager.html#PARTIAL_WAKE_LOCK)，其中屏幕和键盘关闭，但 CPU 保持打开。但是，请记住在完成后释放`PARTIAL_WAKE_LOCK`唤醒锁，这是 CPU 将继续运行的四个唤醒锁中唯一一个，直到您释放它或您的应用程序被终止。忘记释放唤醒锁可能会极大地消耗用户的电池电量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T05:26:09.217

当用户按下电源关闭按钮（灯熄灭）时，手机进入睡眠模式。

睡眠模式意味着 CPU 将处于睡眠模式，并且只接受来自无线电接口层的命令和警报。CPU 将在几分之一秒内进入睡眠模式。

当我们只需要打开 CPU 并关闭其他东西时，我们会使用 PARTIAL_WAKE_LOCK ，它非常适合您的场景。天气这个锁通常用于 mp3 播放器等应用程序。

由于您希望在此模式下进行数据传输，因此您必须通过允许在此模式下打开某些功能来覆盖 PowerManager 类中已经给定的方法。

# php - 如何在文本框中检索值并显示

> ID：15103436
> 
> 赞同：0
> 
> 时间：2013-02-27T03:02:14.017
> 
> 标签：php, forms, post, text

我有一个文本框。如何获取用户在文本框中输入的值并在同一页面和同一表单中显示。我的代码不起作用。

**我的代码**

```
<input name="bulan" type="text" id="bulan" value="00" size="2" maxlength="2" />
      Bulan</td>
<? $bulan = $_POST['bulan'];
      echo $bulan;?> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:04:21.503

例如，您可以为此使用 jQuery：

```
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type="text/javascript">
            $(function() {
                $("#bulan").keyup(function() {
                    var bulan = $("#bulan").val()
                    $(".bulan").text(bulan);
                });
            });
        </script>

    </head>
    <body>
        <input name="bulan" type="text" id="bulan" value="00" size="2" maxlength="2" />
        <div class="bulan"></div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:04:21.280

```
<input name="bulan" **disabled="disabled"** type="text" id="bulan" value="00" size="2" maxlength="2" value="<?=$_POST['bulan']?>" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:52:47.733

如果您使用的是 PHP，那么我会这样做。.

```
<form action=<?=$_SERVER['PHP_SELF']?> method="POST" >
    <b>Bulan : </b><input name="bulan" type="text" id="bulan" value="00" size="2" maxlength="2" />
    <input type="submit" value="submit" />
</form>
<?php
$bulan = $_POST['bulan'];
echo $bulan;
?> 
```

并始终使用`<?php`此标签打开 php.ini。不是短的`<?`。

# testing - 是什么让我无法使用 Ember.testing = true？

> ID：15103438
> 
> 赞同：1
> 
> 时间：2013-02-27T03:02:19.723
> 
> 标签：testing, ember.js

我想`Ember.testing = true`为我的单元测试设置。我在关闭它的情况下写了很多测试（`false`），现在当我尝试打开它时，我得到了

> “null”不是对象（评估“loop.schedule”）

当然，我可以`Ember.testing = false`针对特定的测试进行设置，但我想找出根本问题。我在与此设置不兼容的测试中做了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:37:27.280

你可能仍然需要 User Ember.run() 来运行东西。

您可能会发现[这篇文章](http://darthdeus.github.com/blog/2013/02/19/testing-ember-dot-js-part-1/)很有帮助。

# mongodb - 使用 Mongoid 创建索引后，模型无法在 mongodb 中持久化

> ID：15103439
> 
> 赞同：0
> 
> 时间：2013-02-27T03:02:20.967
> 
> 标签：mongodb, ruby-on-rails-3.2, mongoid

我有一个非常奇怪的问题。

这是堆栈：

*   Mongoid 3.0.0
*   Rails 3.2.11 堆栈
*   mongoid_token ~> 1.1.0
*   MongoDB 2.2.0.

我运行了 rake 命令`rake db:mongoid:create_indexes`，看起来索引都是这样创建的：

```
MONGOID: Created indexes on Mongoid::GridFS::Fs::Chunk:
MONGOID: Index: {:files_id=>1, :n=>-1}, Options: {:unique=>true}
MONGOID: Created indexes on Mongoid::GridFS::Fs::File:
MONGOID: Index: {:filename=>1}, Options: {:unique=>true}
...
...
MONGOID: Created indexes on User:
MONGOID: Index: {:token=>1}, Options: {:unique=>true}
... 
```

然后我创建一个用户：

```
u = User.create!(params)
u.persisted?
 => true 
```

如果我然后使用`mongo`外壳，我可以清楚地看到没有任何东西被持久化。同样， User.count 也不会返回正确的数字。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:40:55.853

我发现了问题。这更多地与一个陷阱有关，所以我想我会发布它以防万一其他人有类似的问题。原来这是我使用 Mongoid 的方式。

我有一个这样的基类：

```
class PersistentModel
  include Mongoid::Document
  ..
  # Common class and instance methods that I need across any persistent model
  ..
end

class User < PersistentModel
  # User methods
end 
```

事实证明，这可以正常工作，因为您不会注意到 Ruby 端的任何故障。一切都会坚持下去。

但是，如果您在 mongodb 端进行挖掘，您会发现所有内容都保存在 persistent_models 集合中，鉴于存在单独的用户模型，这不是您所期望的。它还会对您的索引造成严重破坏，因为所有索引都是针对一个集合生成的，从而导致冲突和问题（即另一个症状是 rake db:mongoid:create_indexes 命令将报告在没有的模型上创建的多个索引在这些字段上指定的任何索引）。

解决方案是这样做...

```
module PersistentModel
  def self.included(base)
    base.instance_eval do
      include Mongoid::Document
      ..
      # Common class and instance methods that I need across any persistent model
      ..          
    end
  end
end

class User
  include PersistentModel
  ..
end 
```

这样，您仍然可以在任何 mongoid 模型中放置您可能需要的“通用”方法，并且 Mongoid::Document 混合到真正的模型类中，在 mongodb 端生成正确的集合。

## 方便的故障排除技巧

这些是一些提示，如果我早点知道的话，会为我节省一些时间……

1.  将您的 mongoid.yml 配置文件中的安全模式设置为 true
    *   我没有打开它，这就是保存成功的原因，即使存在潜在错误。错误是无法生成索引，因为该值为 nil。
2.  使用 mongo shell 并查看持续存在的 mongoid
3.  检查您的 mongoid 正在生成的索引

# path - MATLAB：将当前文件夹设置为脚本的位置

> ID：15103440
> 
> 赞同：6
> 
> 时间：2013-02-27T03:02:25.707
> 
> 标签：path, matlab

我在不同的文件夹中有一些脚本和数据，我`addpath`经常使用相对路径。我的问题是，这仅在我当前的文件夹是我执行的脚本所在的位置时才有效。例如，如果我执行添加路径 X 的脚本 A，然后执行位于路径 X 中的脚本 B，则 Matlab 不会自动更改文件夹，并且脚本 B 中指定的相对路径不再起作用。

有没有办法自动将我的当前文件夹设置为我正在执行的脚本的位置？

/edit：我应该注意，我在具有不同驱动器名称的不同计算机上使用这些脚本，因此使用绝对路径可能无济于事。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T03:12:45.983

在脚本中放入以下行，它将设置当前目录=脚本目录

```
cd(fileparts(mfilename('fullpath'))) 
```

# dependency-injection - angular.mock.inject() 方法什么时候立即执行？

> ID：15103444
> 
> 赞同：0
> 
> 时间：2013-02-27T03:02:43.827
> 
> 标签：dependency-injection, angularjs, jasmine, karma-runner

我一直在`angular.mock.$httpBackend`为使用`$http`. 我遇到了一些与注入所有依赖项相关的问题，因为我的测试用例需要访问该服务，而该服务又需要访问`$httpBackend`.

但是，现在让我感到困惑的具体问题是，有时`angular.mock.inject()`便捷方法会立即执行它包装的函数，有时它只是返回函数的副本。我在源代码中看到这是基于一个名为 currentSpec.isRunning 的属性。这是什么意思？这是睾丸还是茉莉花财产？我还没有在兔子洞里走那么远……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T21:16:39.007

最后我检查了一下， angular.mock.inject() 的返回值基于你所处的 Jasmine 上下文类型（我假设他们在 1.2 中通过添加 mocha 支持对其进行了一些更改）。

本质上，如果您在规范中（实际上是在传递给 beforeEach 的回调中）：

```
beforeEach(function () {
    inject(function () { });
}); 
```

然后它会立即执行注入；但是，如果您仍在定义规范：

```
beforeEach(inject(function () { })); 
```

然后它会返回一个函数。否则它将在您的测试运行之前执行，并且不是非常有用。这似乎只是作为一种更方便/不那么冗长的语法提供的。

# php - 存储在 php 变量中的 html 代码中的 php 代码，这是如何工作的？

> ID：15103448
> 
> 赞同：0
> 
> 时间：2013-02-27T03:03:12.323
> 
> 标签：php, html, echo

我目前正在制作一个简单的网站，我有一个名为“functions.php”的文件，其中存储了一些简单的函数和这段代码

```
<div id=\"topContactPan\">

<div id=\"topMenuPan\">
  <div id=\"topMenuLeftPan\"></div>

  <div id=\"topMenuMiddlePan\">
<a href= <?Php if(!admin_class::isadmin()){ 
echo "\"userprofile.php\" >User Profile</a></li>";} 
else { echo "\"adminprofile.php\" >Admin</a>"; } ?> 
```

我需要转义所有“所以它会正确解释，因为这是在一个 php 文件中，所有这些都存储在一个变量 $top 中，所以每当我创建我的网站的新页面时，我只是 echo $top 和 echo $底部和顶部页眉和底部页脚，仅缺少内容。

但是使用上面的代码，我希望导航栏上的链接之一切换 is 指向的位置，具体取决于登录的是管理员还是普通用户。但似乎只有当我单击链接时，标题变为`http://localhost/YMMLS/<?Php`.

有什么建议么？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:10:54.203

制作2个文件。

header.php 和 footer.php

在其中的每一个里面像往常一样写你的html - 然后在你的索引或任何页面上说

```
include('header.php');
<p>YOUR HTML PAGE AND DOC<p>
include('footer.php'); 
```

无需逃避一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:29:58.090

我会在你的functions.php中这样做：

```
<?php
function template() {
    ?>
    <div id="topContactPan">

    <div id="topMenuPan">
    <div id="topMenuLeftPan"></div>

    <div id="topMenuMiddlePan">

    <a href="<?php checklink(); ?>"> <?php checkuser(); ?></a>
    <?php   
}

function checklink() {
    if(!admin_class::isadmin()) {
        echo "userprofile.php";
    } else {
        echo "adminprofile.php";
    }
}
function checkuser() {
    if(!admin_class::isadmin()) {
        echo "User Profile";
    } else {
        echo "Admin";
    }
}
?> 
```

然后在您的文件中，您只需包含它并调用它的函数：

```
<?php
include('functions.php');
template();
?> 
```

这可能不是最好的解决方案。:D

# ios - iOS Control 可以像 Toucharcade 应用那样覆盖细节

> ID：15103449
> 
> 赞同：0
> 
> 时间：2013-02-27T03:03:18.990
> 
> 标签：ios, user-interface, uiviewcontroller

我一直在寻找一个 UI 控件，但不知道它叫什么，这很难找到对吗？iOS 5 或 6 中的哪些 UI 控件提供了可以滑动的视图覆盖？与滑出式导航视图相反。我以 TouchArcade 应用程序为例，点击一个项目，它会滑出带有文章或评论的叠加层。它也可能有几个可以向右滑动以删除的覆盖层。这是自定义控件吗？我知道这一定是一个简单的问题，我只是不知道它叫什么，因此，我的术语在 Google 中没有多大帮助。我发现的最接近的是 ShinobiControls Overlays：[http ://www.shinobicontrols.com/shinobiessentials/](http://www.shinobicontrols.com/shinobiessentials/)

我宁愿自己做也不愿依赖别人的图书馆，我必须保持最新。另一方面，那个看起来确实不错，可以节省我的时间。

**编辑：** TouchArcade 的图片作为示例覆盖视图。您看到文章在下面的列表视图中是如何呈现的吗？在 iOS 中有哪些控件可以做到这一点？当您进一步单击每个项目时，它还允许多个叠加层。您可以通过向右滑动它们来消除它们，将它们拖出视野。 ![在此处输入图像描述](../Images/29b1c8a7e1b2560efadbc18f4af755af.png)

# c++ - 对 libjpeg 感到困惑：jpeg_read_scanlines

> ID：15103457
> 
> 赞同：3
> 
> 时间：2013-02-27T03:04:20.293
> 
> 标签：c++, jpeg, rgb, libjpeg

我对 libjpeg 的[**`jpeg_read_scanlines`**](http://refspecs.linuxbase.org/LSB_3.1.0/LSB-Desktop-generic/LSB-Desktop-generic/libjpeg.jpeg.read.scanlines.1.html)工作方式感到困惑。据我了解，它逐行解压缩 JPEG，并创建解压缩的像素缓冲区。

典型用法如下：

```
jpeg_decompress_struct cinfo;

...

unsigned char* image = new unsigned char[cinfo.image_width  * cinfo.image_height];
unsigned char* ptr = image; 
int row_stride = cinfo.image_width;

while (cinfo.output_scanline < cinfo.image_height) 
{
    jpeg_read_scanlines(&cinfo, &ptr, 1);
    ptr += row_stride;
} 
```

**问题：**我对*输出缓冲区大小*感到困惑。在我看到的所有[示例代码](http://download.blender.org/source/chest/blender_2.03_tree/jpeg/example.c)`jpeg_read_scanlines`中，输出缓冲区的大小是`width X height`，其中宽度和高度指的是 JPEG 文件的尺寸。因此，对于 10x10 JPEG 文件，我们将有一个 100 字节的输出缓冲区。

但是……每个 RGB 像素的大小不是*3 个字节*（24 位）吗？那么未压缩的数据实际上不应该是`width X height X 3`字节吗？

为什么不是？

我注意到对于使用的代码，`jpeg_write_scanlines`要压缩的缓冲区*是* `width X height X 3`。那么为什么只使用缓冲区`jpeg_read_scanlines`呢`width X height`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-08T21:50:55.270

您一次只能阅读 1 行

`jpeg_read_scanlines(&cinfo, &ptr, 1);`

所以你只需要这条线

`unsigned char* image = new unsigned char[cinfo.image_width * cinfo.image_height];`

成为

`unsigned char* image = new unsigned char[cinfo.image_width * cinfo.image_components];`

缓冲区的开始被重新用于每个扫描线。您当前的大部分缓冲区实际上都未使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T05:22:00.530

对于 RGB 数据，`output_components`将为 3 (R,G,B)。

[以下是libjpeg.txt](https://github.com/Windower/libjpeg/blob/master/libjpeg.txt)的一些相关文档：

```
 output_width     image width and height, as scaled
   output_height
   out_color_components # of color components in out_color_space
   output_components    # of color components returned per pixel
   colormap     the selected colormap, if any
   actual_number_of_colors      number of entries in colormap

output_components is 1 (a colormap index) when quantizing colors; otherwise it
equals out_color_components.  It is the number of JSAMPLE values that will be
emitted per pixel in the output arrays.

Typically you will need to allocate data buffers to hold the incoming image.
You will need output_width * output_components JSAMPLEs per scanline in your
output buffer, and a total of output_height scanlines will be returned. 
```

# javascript - 格式正确的 HTML 字符串上的 jQuery() 会导致语法错误、无法识别的表达式

> ID：15103460
> 
> 赞同：10
> 
> 时间：2013-02-27T03:04:45.993
> 
> 标签：javascript, jquery

我有一个完整的 HTML 文档，我正在使用它`$.ajax()`，我的`.done()`回调如下所示：

```
function (data, text_status, jq_xhr) {
  var $what_i_want = $(data).find('#what-i-want');
} 
```

where`data`是一个字符串，其中包含完整的格式良好的 HTML 文档。此代码永远不会到达`.find()`.

后`$(data)`，我得到：

```
`Uncaught Error: Syntax error, unrecognized expression: <!DOCTYPE html>`... 
```

事实：

*   我正在使用 jQuery 1.9.0
*   根据 W3C 验证器，该文档是格式良好的 HTML5。

我曾经`jQuery()`将许多 HTML 字符串对象化，所以我很惊讶这不起作用。诚然，我不记得曾经尝试过完整的文档。鉴于错误，我猜，也许我需要以某种方式转义这个字符串。但我不确定如何。

顺便说一句，**这有效**：

```
var $what_i_want = $('#what-i-want', $.parseHTML(data)) 
```

但我无法弄清楚为什么第一种方法会失败。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-13T21:19:03.123

在处理各种其他页面的情况下，我遇到了同样的问题。对我来说，他们的关键是阅读 Brian 在升级指南上的链接。问题是这一页之前有一个空行，所以即使我只是尝试插入返回的 html 的一部分，它也没有考虑返回的数据是 html。从升级指南

> 从 1.9 开始，只有以小于 ("<") 字符开头的字符串才被认为是 HTML。

由于它以空行而不是 < 开头，因此不被视为 html。我想我会添加这个贡献，因为我一直在试图找出问题所在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T03:12:57.447

DOCTYPE 不是普通的 html 标签；我认为它需要被删除。

它也可能有问题`body`，因为您不能将整个文档嵌入到另一个文档中。IIRC jquery 中的内部方法只是动态创建一个跨度并更新innerHTML。

# c# - 扩展方法仅在调试时抛出异常

> ID：15103461
> 
> 赞同：0
> 
> 时间：2013-02-27T03:04:59.513
> 
> 标签：c#, exception, extension-methods

我正在使用以下扩展方法（[来自现有的 StackOverflow 问题](https://stackoverflow.com/questions/438188/split-a-collection-into-n-parts-with-linq)）将现有的可枚举拆分为两个：

```
public static IEnumerable<IEnumerable<T>> Split<T>(this IEnumerable<T> list, int parts)
{
    int i = 0;
    var splits = from item in list
                 group item by i++ % parts into part
                 select part.AsEnumerable();
    return splits;
} 
```

我正在使用这样的方法：

```
//accountIds is simply an IEnumerable<string>
var foo = accountIds.Split(2).ToList(); 
```

当我运行我的应用程序时，该方法似乎工作正常。但是，当我调试我的应用程序时，这行代码总是会引发异常：

`Object reference not set to an instance of an object.`

我很困惑为什么这个方法只在我调试时抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:18:47.813

我不确定这一点，但我认为你应该先评估一下。您可以使用`.ToArray()`或`.ToList()`方法。

查看 Jon Skeet关于捕获变量的[博客。](http://msmvps.com/blogs/jon_skeet/archive/2007/10/15/fun-with-captured-variables.aspx)

# android - 如何在 Android 中使用 Web 视图访问本地主机服务器

> ID：15103463
> 
> 赞同：8
> 
> 时间：2013-02-27T03:05:10.370
> 
> 标签：android, web, view, webview, android-webview

我有一个 Android 应用程序，我需要访问我的网络服务器并将我的 Android 应用程序连接到网络上的另一个程序。我的网络程序正在运行，当我将它的 IP 地址放在 Android FIrefox 或浏览器上时它正在运行，但是当我用我的 webview 调用它的 IP 地址时（webView.loadUrl（我的网络程序 IP 地址）它不起作用。有人可以帮我在哪里是我的错吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T04:31:24.243

确保您没有使用应用程序中的“localhost”（一个非常常见的错误）。

如果您从 wifi 访问本地服务器，您只需要检查您的服务器分配的 IP 并在应用程序中使用它。

如果您使用的是模拟器，请尝试使用 10.0.2.2

请参阅此处[从 Android 模拟器访问 localhost:port](https://stackoverflow.com/questions/6760585/accessing-localhostport-from-android-emulator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-16T21:13:38.840

我也有同样的问题。假设 IP 地址是 216.58.216.164。我使用以下方法对其进行了纠正

```
webView.loadUrl("http://216.58.216.164/") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-17T13:24:16.347

在您的活动中：

```
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        // you should be to put localhost and port number
      //webView.loadUrl("http://local_host:<port-number>/index.html")
        //example
        webView.loadUrl("http://10.66.0.89:8080/index.html")
        webView.settings.cacheMode = WebSettings.LOAD_NO_CACHE
        webView.settings.setAppCacheEnabled(false)
    }
} 
```

在您的清单中：

```
<uses-permission android:name="android.permission.INTERNET"/>
    <application
       ...
        android:usesCleartextTraffic="true"> 
```

# php - 如何在总价计算旁边添加文字？

> ID：15103464
> 
> 赞同：0
> 
> 时间：2013-02-27T03:05:16.000
> 
> 标签：php, html

当您选择您的数量..并单击经销商按钮时，您会收到带有总价格的消息..但它只是数字..我可以在此消息中显示的旁边添加文本吗？像 21 美元或 $ 或类似的东西？或者我可以让这个总价出现在没有按钮的表格下方的文本中吗？（详细描述我该怎么做..我没有PHP背景，也没有编写任何这些代码..只想在价格编号消息旁边添加单词

[http://jsfiddle.net/HcPYM/](http://jsfiddle.net/HcPYM/)

我使用jquery：

```
eval( $( 'td:nth-child(3)' ).map( function( td, $this ){
    return ( ( parseFloat( ( $this = $( this ) ).text() ) || 0 )
        * ( parseFloat( $this.parent().find( 'select' ).val() ) || 0 ) );
} ).get().join( '+' ) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:13:38.413

你可以尝试类似的东西

```
eval('(' + $(..your map on your objects returning an array of string...).get().join('+') + ') + "$"') 
```

为了运行：

```
eval('(3+4+5+6) + "$"') 
```

但是，作为建议：避免使用`eval`对性能不利的。

因此，这是一个使用简单 jQuery 并避免任何评估的工作示例：

[JSFiddle 中的示例](http://jsfiddle.net/9WZtQ/1/) （正如 Michael Irigoyen 坚持的那样……：p）

# r - 如何将 data.frame 中的单列乘以数字

> ID：15103465
> 
> 赞同：10
> 
> 时间：2013-02-27T03:05:16.243
> 
> 标签：r

我想知道如何从我使用脚本读取的 txt 文件中将单个列乘以 5。我只知道如何将所有列乘以一个数字，而不是一列。这是我读取 txt 文件的脚本：

```
d = read.table(file="tst1.txt",header=TRUE) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-01T20:45:20.523

假设您的数据框`d`有一个名为“数字”的列（您可以使用 来查看数据框中列的实际名称`str(d)`）。要将列“数字”乘以 5，请使用：

```
# You are referring to the column "number" within the dataframe "d"
d$number * 5

# The last command only shoes the multiplication.

# If you want to replace the original values, use
d$number <- d$number * 5

# If you want to save the new values in a new column, use
d$numberX5 <- d$number * 5 
```

此外，请尝试参考标准 R 文档，您可以在[官方页面](http://www.r-project.org/)中找到该文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T20:44:56.940

`d[,i]<-d[,i]*5`. `?Extract`有关提取部分对象的更多信息，请参阅。

# sql - vba中的sql语法错误以过滤组合框

> ID：15103467
> 
> 赞同：0
> 
> 时间：2013-02-27T03:05:30.573
> 
> 标签：sql, ms-access, vba

我需要根据当前记录 [AllocID] 的 IDKey 过滤组合框的可用选项

在组合框的 Rowsource 中直接尝试各种版本的 WHERE 子句未成功后，我遇到了一个解决方案，建议我在表单的 On Current 事件中设置行源：

```
Private Sub Form_Current()
MSMgeID.RowSource = "SELECT[MSMge].[PrjID] ... FROM MSMge WHERE [PrjID] ='" & Me.AllocID & " '"
End Sub 
```

[PrjID] 和 [AllocID] 都是 Long Integer 类型的数字字段，但我得到“标准表达式中的数据不匹配”。

我在我的 SQL 语法中所做的事情是否将其中一个字段混淆为文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:15:30.913

试试这个：

```
MSMgeID.RowSource = "SELECT [MSMge].[PrjID] ... FROM MSMge WHERE [PrjID] =" & CStr(Me.AllocID) 
```

这是一个解释：

正如 OP 所说，[MSMge].[PrjID] 和 Me.AllocID 都是数值。`Where [PrjID] = '<some value>'`因此，我们需要使用函数将`Me.AllocID`VB 代码转换为字符串，而不是使用（这将触发 Access 中的类型不匹配错误）。`CStr()`上面的语句将被翻译成`Where [PrjID] = <some numeric value>`（注意我已经去掉了单撇号）

# spring-mvc - org.slf4j.helpers.MessageFormatter.format 使用 hector 时出现异常

> ID：15103470
> 
> 赞同：-1
> 
> 时间：2013-02-27T03:05:49.623
> 
> 标签：spring-mvc, cassandra, slf4j, thrift, hector

我正在为 cassandra 使用 hector 客户端，但出现以下错误。我正在使用 hecor 从 spring mvc 内部访问 cassandra。

```
java.lang.NoSuchMethodError: org.slf4j.helpers.MessageFormatter.format(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)Lorg/slf4j/helpers/FormattingTuple;
at org.slf4j.impl.Log4jLoggerAdapter.info(Log4jLoggerAdapter.java:345)
at me.prettyprint.cassandra.connection.CassandraHostRetryService.<init>   (CassandraHostRetryService.java:47)
at me.prettyprint.cassandra.connection.HConnectionManager.<init>(HConnectionManager.java:70)
at me.prettyprint.cassandra.service.AbstractCluster.<init>(AbstractCluster.java:67)
at me.prettyprint.cassandra.service.ThriftCluster.<init>(ThriftCluster.java:21)
at me.prettyprint.hector.api.factory.HFactory.createCluster(HFactory.java:192)
at me.prettyprint.hector.api.factory.HFactory.getOrCreateCluster(HFactory.java:139)
at me.prettyprint.hector.api.factory.HFactory.getOrCreateCluster(HFactory.java:128)
at com.test.server.db.cassandra.ConnectionFactoryImpl.getCluster(ConnectionFactoryImpl.java:23)
at com.test.spring.controller.LoginController.signup(LoginController.java:65)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:859)
at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1555)
at java.lang.Thread.run(Thread.java:619) 
```

这是我的 POM.xml

```
<!--- Cassandra Dependency-->

<dependency>
<groupId>org.apache.thrift</groupId>
<artifactId>libthrift</artifactId>
<version>0.7.0</version>
</dependency>

<dependency>
<groupId>me.prettyprint</groupId>
<artifactId>hector-core</artifactId>
<version>1.0-2</version>
</dependency>

<dependency>
<groupId>org.apache.cassandra</groupId>
<artifactId>cassandra-clientutil</artifactId>
<version>1.2.1</version>
</dependency>

<dependency>
<groupId>org.apache.cassandra</groupId>
<artifactId>cassandra-thrift</artifactId>
<version>1.2.1</version>
</dependency>    

<!-- Spring 3 dependencies -->
<dependency>
<groupId>org.springframework</groupId>
<artifactId>spring-core</artifactId>
<version>${spring.version}</version>
</dependency>

<dependency>
<groupId>org.springframework</groupId>
<artifactId>spring-web</artifactId>
<version>${spring.version}</version>
</dependency>

<dependency>
<groupId>org.springframework</groupId>
<artifactId>spring-webmvc</artifactId>
<version>${spring.version}</version>
</dependency>

<!-- Spring Security -->
<dependency>
<groupId>org.springframework.security</groupId>
<artifactId>spring-security-core</artifactId>
<version>${spring.version}</version>
</dependency>

<dependency>

<groupId>org.springframework.security</groupId>
<artifactId>spring-security-web</artifactId>
<version>${spring.version}</version>
</dependency>

<dependency>
<groupId>org.springframework.security</groupId>
<artifactId>spring-security-config</artifactId>
<version>${spring.version}</version>
</dependency> 
```

怎么了？？将 cassandra1.2.1 与 hector 一起使用的正确依赖项是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:07:10.483

我做的。我只是清理并重建项目并解决问题。

# c++ - 如何在测试运行程序可执行文件中链接来自静态库的测试？

> ID：15103474
> 
> 赞同：0
> 
> 时间：2013-02-27T03:06:08.207
> 
> 标签：c++, visual-studio-2012, linker, static-libraries, unittest++

我有一个这样组织的 Visual Studio 解决方案：

```
ProjectA // A static library I'm working on
ProjectB // A static library containing UnitTest++ test suites for ProjectA
ProjectC // An executable test runner which links to ProjectA and ProjectB 
```

ProjectB 包含两个文件，如下所示：

```
// RunTests.h

#ifndef RUNTESTS_H
#define RUNTESTS_H

#include "UnitTest++.h"

int runAllTests();

#endif 
```

和这个：

```
// RunTests.cpp

#include "RunTests.h"
int runAllTests()
{
   return UnitTest::RunAllTests();
} 
```

以及包含测试套件的几个文件，例如：

```
// FooTests.cpp

#include "RunTests.h" // 
#include "Foo.h" // From ProjectA
TEST(SomeTest)
{
   CHECK(true);
} 
```

ProjectC 由一个文件组成：

```
// main.cpp

#include "RunTests.h" // from ProjectB

int main()
{
   return runAllTests();
} 
```

我将测试和测试运行程序分开的原因是我有另一个项目，它使用相同的测试来分析代码覆盖率，我需要保持分开，因为它不是跨平台的，而测试运行程序是。

问题是，当我编译和运行 ProjectC 时，实际上没有运行任何测试（UnitTest++ 运行，但测试为零）。这是因为 ProjectC 不引用与来自 ProjectB 的测试相关的任何符号，因此链接器不会链接来自 ProjectB.lib 的目标文件。

我的理解是，如果 ProjectB 是可执行文件，我不会遇到这个问题（大概是因为链接器会链接所有目标文件），根据文档：

> 一般的想法是保留一个带有调用 RunAllTests() 的入口点的 Main.cpp 文件。
> 
> 然后，您可以随意编译和链接新的 .cpp 文件，通常每个测试套件一个。
> 
> 每个 Test*.cpp 文件都将包含一个或多个带有相关测试代码的 TEST 宏指令。Main.cpp 和 Test*.cpp 之间没有源代码级别的依赖关系，因为 TEST 宏处理 RunAllTests() 所需的注册和设置，以查找编译到同一最终可执行文件中的所有测试。

我怎样才能解决这个问题，而不必在 ProjectC 可以看到的头文件中声明所有测试（这会扼杀 UnitTest++ 的易用性）？我在 Visual Studio 中注意到的一种可能性是：

项目设置 > 配置属性 > 链接器 > 输入 > 强制符号引用

然而，每次我编写一个新的单元测试时，都必须添加每个符号是相当乏味的。有什么方法可以强制它包含 ProjectB.lib 的全部内容？或者也许是一些基于代码的解决方案？

编辑：我正在寻找的是这样的东西，[但](https://stackoverflow.com/questions/805555/ld-linker-question-the-whole-archive-option)对于 Visual Studio。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:18:28.793

我试图以与您描述的方式相同的方式使用 UnitTest++，但遇到了同样的问题。我在另一个论坛上遇到了一个似乎适用于我的 unittest 可执行文件（即 ProjectC）的建议。

对于 ProjectC：项目设置 > 通用属性 >（选择 ProjectB）> 使用库依赖输入：True

这对我有用。我认为这样做可以有效地将任何对象文件从 ProjectB 链接到 ProjectC（而不是链接库）。

# string - Ada 返回字符串的连接字符串

> ID：15103475
> 
> 赞同：1
> 
> 时间：2013-02-27T03:06:27.300
> 
> 标签：string, types, concatenation, record, ada

我正在努力完成一项家庭作业，并且已经到了最后一部分。首先，我将向您展示我正在处理的类型：

```
TYPE Book_Collection IS
  RECORD
     Books        : Book_Collection_Array;
     Max_Size     : Integer;
     Size : Integer;
  END RECORD;

TYPE Book_Type IS
  RECORD
     Title,
     Author,
     Publisher : Title_Str;
     Year      : Year_Type;
     Edition   : Natural;
     Isbn      : Isbn_Type;
     Price     : Dollars;
     Stock     : Natural;
     Format    : Format_Type;
  END RECORD; 
```

Book_Collection_Array 是 book_type 的数组。这些是私有类型，因此数组是有界的（1..200）。

在提供给我们的单独包中有一个名为 ToString 的函数，它以 book_type 作为输入，并返回 book_type 的所有元素的字符串。我需要创建一个函数，它接受 book_collection 是一个参数，并返回一个字符串，该字符串连接由提供的 ToString 函数返回的所有字符串，用于该 book_collection 中存在的 book_types。我进行了多次尝试，但经常遇到范围检查失败。谁能指出我正确的方向？

***编辑：感谢你们俩的帮助。我走的是使用无界字符串的路线，并将每个字符串附加到它，然后声明一个输出字符串并将其设置为等于无界字符串的 To_String 的常量字符串。***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:21:23.210

我给你一个提示。

理想情况下，Ada 字符串根本不像 C 或 Java 字符串那样被处理或处理。C 字符串依靠尾随的 nul (0) 字符来指定缓冲区中数据的结尾。Java 字符串会跟踪自己的长度，如果需要，会动态地重新分配自己以保持适当的长度。因此，这些语言中典型的字符串处理习语并没有考虑逐步修改字符串变量。

相反，Ada 字符串在创建时应该是**完美大小的。**大多数例程将假定字符串数组中的每个元素都包含有效的字符数据，并且您将数据分配到的任何目标字符串都将具有完美的大小以容纳它。如果不是这种情况，通常会引发异常（并且很可能您的程序崩溃）。

在构建字符串时，有几种方法可以解决这个问题。一种方法是创建一个非常大的字符串对象作为缓冲区，并保留一个单独的长度变量来告诉您的代码始终存在多少数据。然后，当您调用 Ada 字符串例程时，您可以只向它们提供有效字符串中的数据片段。例如：`Put_line (My_New_String(1..My_String_Length));`

更好的方法是只处理完美大小的常量字符串。例如，如果你想一起行动`String1`，`String2`安全的 Ada 方法是：

```
My_New_String : constant String := String1 & String2; 
```

`String3`然后，如果您以后想要一个带有附加的字符串，该字符串是：

```
My_New_New_String : constant String := My_New_String & String3; 
```

有关这方面的更多信息，我建议您查看此浏览器窗口右侧“相关”标题下的一些链接。我看到里面有很多好东西。

# c++ - 排列算法

> ID：15103476
> 
> 赞同：3
> 
> 时间：2013-02-27T03:06:27.380
> 
> 标签：c++, vector, permutation

这是一个类，所以请不要太具体，但我正在寻找一种方法来列出数字数组的所有排列。

我们必须在不同的柱子（如锁）上排列不同的数字来解锁密码。4根柱子上可能有6个数字。但它应该适用于 r 上的任何 n，只要 n>r。

我有办法随机生成组合，并有条不紊地在列表中查找它，但我无法生成生成所有排列的算法。

我可以在 C++ 中使用它来获得数字 1-6 的所有组合：

```
//n = number of digits - 1; list = list of digits to work with; 
//number=finalized list of digits
void permute(int n, vector<int> list, vector<vector<int>>* number)
{
    if(n==1)
    {
        number->push_back(list);

    }else
    {
        for(int i = 1;i<n;i++)
        {
            permute(n-1,list, number);
            if(n%2 == 0)
            {
                swap(list[1],list[n]);
            }else
            {
                swap(list[i],list[n]);
            }
        }
    }

}; 
```

但是然后我得到一个列表，例如 123456 163452 等，其中 1 始终是第一个数字，但我还需要在第一个数字切换并且只有 4 个数字存在时获得。

例子

6341

4163

等等，其中有 4 位数字，范围为 1-6，并且您拥有所有可能的组合。

谁能指出我正确的方向，以另一种算法来补充这个左右？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T03:09:45.843

C++为此提供了一个完美的解决方案——它[`std::next_permutation`](http://en.cppreference.com/w/cpp/algorithm/next_permutation)（你需要包含`<algorithms>`它才能使用它）。

```
vector<int> list;
std::sort(list.begin(), list.end());
do {
    // use the current permutation of the list
} while (std::next_permutation(list.begin(), list.end())); 
```

关于此函数要记住的重要一点是，如果您想遍历范围的*所有*排列，则必须在第一次调用之前对该范围进行排序`next_permuration`，否则您将在用尽所有排列之前停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:09:34.247

如果您需要自己实现，这可能无济于事，但 C++ 已`next_permutation`内置。

[http://www.cplusplus.com/reference/algorithm/next_permutation/](http://www.cplusplus.com/reference/algorithm/next_permutation/)

这里解释了这个函数背后的算法：[std::next_permutation Implementation Explanation](https://stackoverflow.com/questions/11483060/stdnext-permutation-implementation-explanation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T03:21:28.233

从 N 项列表递归生成 N 长度排列的通用算法是：

对于列表中的每个元素 x

复制没有元素 x 的列表；称它为 newList 查找 newList 的所有排列（这就是递归，顺便说一句）

将元素 x 添加到 newList 的每个排列的开头

```
#include <iostream>
#include <list>

typedef std::list<int> IntList;
void iterlist(IntList& lst)
{
    for (IntList::iterator it=lst.begin(); it!=lst.end(); it++)
        cout << " " << *it;
    cout << endl;
}

std::list<IntList> permute(IntList& L1)
{
    if (L1.size() == 1)
        return std::list<IntList>(1,L1);

    std::list<IntList> res;
    for (IntList::iterator i = L1.begin(); i != L1.end();)
    {
        // remember this
        int x = (*i);

        // make a list without the current element
        IntList tmp(L1.begin(), i++);
        tmp.insert(tmp.end(), i, L1.end());

        // recurse to get all sub-permutations
        std::list<IntList> sub = permute(tmp);

        // amend sub-permutations by adding the element
        for (std::list<IntList>::iterator j=sub.begin(); j!=sub.end();j++)
            (*j).push_front(x);

        // finally append modified results to our running collection.
        res.insert(res.begin(), sub.begin(), sub.end());
    }
    return res;
}

int main()
{
    IntList lst;
    for (int i=0;i<4;i++)
        lst.push_back(i);
    std::list<IntList> res = permute(lst);
    for (std::list<IntList>::iterator i=res.begin(); i!=res.end(); i++)
        iterlist(*i);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T06:44:01.993

首先，让我们谈谈你的问题是打印集合 {1,2,3,4,5,6} 中的所有**P(6,4)**数组，但是 std::next_permutation 只会适应所有元素的排列( **P(6,6)** )，不适合您的问题 ( **P(6,4)** )。我认为使用 std::next_permutation 可以很容易地得到组合，而且我们知道 `P(6,4)=C(6,4)*P(4,4)`，简单的代码实现可能是这样的：

```
 1 #include <iostream>
  2 #include <vector>
  3
  4 int main()
  5 {
  6     std::vector<int> list;
  7     std::vector<int> subList;
  8     std::vector<bool> flag;
  9
 10     for (int i=1; i<=6; ++i)
 11         list.push_back(i);
 12     flag.insert(flag.end(),4,1);
 13     flag.insert(flag.end(),2,0);
 14     std::sort(flag.begin(), flag.end());
 15     do
 16     {
 17         subList.clear();
 18         for(int i=0; i<flag.size(); ++i)
 19         {
 20             if(flag[i])
 21             {
 22                 subList.push_back(list[i]);
 23             }
 24         }
 25         do
 26         {
 27             for(std::vector<int>::iterator it=subList.begin(); it!=subList.end(); ++it)
 28             {
 29                 std::cout << *it << " ";
 30             }
 31             std::cout << std::endl;
 32         }while(std::next_permutation(subList.begin(), subList.end()));
 33         std::cout << std::endl;
 34     } while(std::next_permutation(flag.begin(), flag.end()));
 35     return 0;
 36 } 
```

这显然是寻找**C(6,4)**的外循环，寻找**P(4,4)**的内循环。没有花太多时间在你的代码上，对于组合，你可以像**DFS**一样使用搜索方法，参考：[combinations of](https://stackoverflow.com/questions/8078653/combinations-of)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-30T00:50:57.290

此函数使用 bitset 列出所有排列

```
#include <iostream>
#include <string>
#include <bitset>

using namespace std;

const int N = 3;

void permute(string_view s, bitset<N> &mask, string &pref)
{
    if (mask.all()) {
        cout << pref << endl;
        return;
    }
    for (int i = 0; i < N; i++) {
        if (!mask[i]) {
            mask.set(i);
            pref.push_back(s[i]);
            permute(s, mask, pref);
            pref.pop_back();
            mask.reset(i);
        }
    }
}

int main()
{
    string pref;
    bitset<N> mask;
    permute(string("abc"), mask, pref);
    return 0;
} 
```

并进行一些修改，它会打印所有组合

```
#include <iostream>
#include <string>
#include <bitset>

using namespace std;

const int N = 3;
const int M = 2;

void permute(string_view s, bitset<N> &mask, string &pref)
{
    if (pref.size() == M) {
        cout << pref << endl;
        return;
    }
    for (int i = 0; i < N; i++) {
        if (!mask[i]) {
            mask.set(i);
            permute(s, mask, pref);
            pref.push_back(s[i]);
            permute(s, mask, pref);
            pref.pop_back();
            mask.reset(i);
            break;
        }
    }
}

int main()
{
    string pref;
    bitset<N> mask;
    permute(string("abc"), mask, pref);
    return 0;
} 
```

# variables - 使用 awk 进行匹配

> ID：15103477
> 
> 赞同：0
> 
> 时间：2013-02-27T03:06:44.270
> 
> 标签：variables, awk, pattern-matching

我有两个文件，一个是包含 IP 和主机信息的“主列表”，另一个是动态填充 IP 和用户代理字符串。请参见下面的示例。

### 示例文件 1：

```
24.143.206.32   Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0)
66.39.66.63     Dalvik/1.6.0 (Linux; U; Android 4.2.1; Nexus 7 Build/JOP40D) 
```

### 示例文件 2：

```
24.143.206.32 # New Host US,city,44.8824996948,-99.6440963745
66.39.66.63 # New Host US,city,44.8824996948,-99.6440963745
and on and on 
```

我需要找到两个 AND 输出匹配与 BOTH 的尾随信息之间的 IP 匹配。

```
24.143.206.32 Browser: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0) LOCATION: New Host US,city,44.8824996948,-99.6440963745

66.39.66.63  Browser: Dalvik/1.6.0 (Linux; U; Android 4.2.1; Nexus 7 Build/JOP40D) LOCATION: New Host US,city,44.8824996948,-99.6440963745 
```

目前我正在使用它进行 IP 匹配：

```
awk 'FNR==NR{ a[$1]=$0;next } ($1 in a)' file1 file2 > matchesfile 
```

我一遍又一遍地尝试，只是无法获得我需要的所有信息。你能提供任何帮助还是这太复杂了？我不确定这个方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:19:01.717

```
awk '
FNR==NR{ a[$1]=$0; next }
$1 in a {
   sub(/[[:space:]]+/,"&Browser: ",a[$1])
   sub(/[^[:space:]]+[[:space:]]+#/,"LOCATION:")
   print a[$1], $0
}
' file1 file2 > matchesfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:12:32.050

这就是我的做法：

*   对于每一行，存储第一个字段中的 IP 地址并将其从行中删除。
*   对于第一个文件中的每一行，将浏览器详细信息存储在以 IP 地址为键的数组中。
*   对于任何后续文件中的每一行，如果在数组中找到 IP 地址，则打印一个格式化字符串，其中包含 IP 地址、与之关联的浏览器以及该行上的任何其他内容。

### 例子：

```
% awk ' {
    IP = $1
    $1 = ""
}
FNR == NR {
    browser[IP] = $0
}
FNR != NR && IP in browser {
    printf "%s Browser:%s Location:%s\n", IP, browser[IP], $0
}
' file[12]
24.143.206.32 Browser: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0) Location: # New Host US,city,44.8824996948,-99.6440963745
66.39.66.63 Browser: Dalvik/1.6.0 (Linux; U; Android 4.2.1; Nexus 7 Build/JOP40D) Location: # New Host US,city,44.8824996948,-99.6440963745 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T03:13:51.503

如果您想要来自两个输出的数据，那么您需要打印信息，并进行稍微不同的测试，我认为：

```
awk 'FNR == NR { a[$1] = $0; next }
     { if ($1 in a) print $0 " " a[$1] }' file1 file2 > matchesfile 
```

这与您所拥有的非常接近；不过印刷不一样。`print $0`您隐式调用。`awk`至少使用 GNU ，您可以使用条件作为模式：

```
awk 'FNR == NR { a[$1] = $0; next }
     ($1 in a) { print $0 " " a[$1] }' file1 file2 > matchesfile 
```

如果您想将“浏览器：”和“位置：”标签添加到输出中，则需要更多的工作：

```
awk 'FNR == NR { for (i = 2; i < NF; i++) a[$1] = a[$i] " " $i; next }
     ($1 in a) { for (i = 2; i < NF; i++) loc = loc " " $i;
                 print $1 " Browser: " a[$1] " Location: " loc }
    ' file1 file2 > matchesfile 
```

第一个`for`循环`file1`将 IP 地址之后的浏览器字段连接到`a[$1]`. 第二个`for`循环对来自`file2`into variable的位置信息执行相同的操作`loc`。然后`print`吐出数据。您可以微调格式以满足您的要求。

还有其他方法可以达到相同的结果......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T06:06:27.473

```
awk 'FNR==NR{f=$1;$1=$2="";a[f]=$0;next}($1 in a ){$2="Browser: "$2;print $0,a[$1]}' file2 file1 
```

# javascript - 扩展 .js 文件不显示在 Chrome 调试器中

> ID：15103481
> 
> 赞同：5
> 
> 时间：2013-02-27T03:06:59.300
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-chrome-devtools

当我右键单击开发中扩展程序的图标并单击检查弹出窗口（或者当我单击图标并选择“检查元素”时）并在“源”选项卡下查看时，我的 .js 文件无处可见- 只有一长串可检查的文件，如 apitest、devtools、json_schema 等。但是，我可以通过 .html 文件中的链接通过 Elements 选项卡找到代码，但这并没有带到任何地方我可以实际调试。

我还加载了 Google 教程提供的“Hello, world”扩展，当我检查那个扩展时，它的 .js 文件就在那里。我无法想象我所做的与教程示例不同的原因是什么。

它是在 Linux VM 中运行的 Chrome 版本 22.0.1229.94。如果我应该提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T03:32:42.973

在控制台中键入 location.reload(true)。

[http://developer.chrome.com/extensions/tut_debugging.html](http://developer.chrome.com/extensions/tut_debugging.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T03:17:13.843

如果我理解你的问题，

在源选项卡下，还有两个选项卡，一个显示源，另一个显示内容脚本。您需要单击内容脚本选项卡，在那里您会找到您要查找的内容。

![在此处输入图像描述](../Images/8dd60190af02cc3bece48835dcb06fda.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T04:03:10.560

好的，所以我想通了，只需单击您的扩展图标，就会弹出一个小对话框，然后右键单击它并单击检查元素。我想你可以从那里弄清楚。（如果它是一个内容脚本，我的另一个答案会很好，但这是一个弹出脚本。）

![在此处输入图像描述](../Images/ff09073d2131375c7b9fa7780e8e6a66.png)

# bash - BASH getopt 命令返回它自己的参数而不是命令行参数

> ID：15103482
> 
> 赞同：0
> 
> 时间：2013-02-27T03:07:09.837
> 
> 标签：bash, parameters, options, flags, getopt

我正在创建一个 BASH 脚本并使用 BASH`getopt`命令来解析命令行参数。不是返回命令行上提供的参数，而是返回提供给命令`getopt`的参数`getopt`。我不确定会发生什么，因为我的代码运行良好，而且似乎不知从何而来，它已经停止正常工作（不，我没有更新任何东西或更改任何代码或环境设置）。我不能使用`getopts`（带有额外的's'），因为出于某种未知原因，它没有安装在将运行此脚本的机器上。

即使脚本提供了零个命令行参数，getopt 命令出于某种原因返回我提供的所有参数，减去`-o`标志，而不是指示选项结束的预期`--`值。我拥有的代码如下：

```
SHORT_OPTS=":hvso:l:d:n:p:t:"
LONG_OPTS="help,version,submit-job,output:,library:,job-dir:"
LONG_OPTS="${LONG_OPTS},num-nodes:,num-procs:,max-time:"
OPTS=$(getopt -o "${SHORT_OPTS}" -l "${LONG_OPTS}" -a -n "${PROG_NAME}" -- "${@}")

# Check for invalid command line options and arguments
if [[ ${?} -ne ${SUCCESS} ]] ; then
    echo -e "${PROG_NAME}: error: Invalid option or argument\n" >&2
    usage ; exit ${FAILURE}
else
    echo "BEFORE $@"
    eval set -- ${OPTS}
    echo "AFTER $@"
fi

# Process command line options and their arguments
while true ; do
    case "${1}" in
        -h | --help) 
            # Display script usage information and exit
            usage ; exit ${SUCCESS} ;;
        -v | --version) 
            # Display script version information and exit
            echo "${PROG_NAME} v${PROG_VERSION}" ; exit ${SUCCESS} ;;
        -s | --submit-job) 
            # Enable automatic submission of the Moab job
            JOB_AUTO_SUBMIT="${PREF_YES}" ; shift 1 ;;
        -o | --output) 
            # Set the base name for output file names
            TARGET="${2}" ; shift 2 ;;
        -l | --library) 
            # Set the library to use for NWChem atomic configurations
            NW_LIB="${2}" ; shift 2 ;;
        -d | --job-dir) 
            # Ensure the specified directory for the Moab job exists
            if [[ -e "${2}" ]] ; then
                JOB_WORK_DIR=$(resolvePath "${2}") ; shift 2
            else
                echo -e "${PROG_NAME}: error: -d ${2}: No such directory\n"
                usage ; exit ${FAILURE}
            fi ;;
        -n | --num-nodes) 
            # Ensure the number of compute nodes is greater than zero
            if positiveInt "${2}" ; then
                JOB_NODES="${2}" ; shift 2
            else
                echo -n "${PROG_NAME}: error: -n ${1}: Number of "
                echo -e "job nodes must be a positive integer\n"
                usage ; exit ${FAILURE}
            fi ;;
        -p | --num-procs) 
            # Ensure the number of processors per node is greater than zero
            if positiveInt "${2}" ; then
                JOB_PROCS="${2}" ; shift 2
            else
                echo -n "${PROG_NAME}: error: -p ${2}: Number of "
                echo -e "processors per node must be a positive integer\n"
                usage ; exit ${FAILURE}
            fi ;;
        -t | --max-time) 
            # Ensure the maximum job runtime is in the correct format
            if [[ "${2}" == [0-9][0-9]:[0-9][0-9]:[0-9][0-9] ]] ; then
                JOB_MAX_TIME="${2}" ; shift 2
            else
                echo -n "${PROG_NAME}: error: -t ${2}: Invalid time "
                echo -e "format, please use hh:mm:ss format\n"
                usage ; exit ${FAILURE}
            fi ;;
        --) 
            # No more options to process
            shift ; break ;;
    esac
done

# Check to see if POTCAR and CONTCAR locations were specified
if [[ ${#} -eq 2 ]] ; then
    # Regular expressions for identifying POTCAR and CONTCAR files
    PCAR_REGEX="[Pp][Oo][Tt][Cc][Aa][Rr]"
    CCAR_REGEX="[Cc][Oo][Nn][Tt][Cc][Aa][Rr]"

    # Attempt to identify POTCAR and CONTCAR argument ordering
    if [[ ${1} =~ ${PCAR_REGEX} && ${2} =~ ${CCAR_REGEX} ]] ; then
        POTCAR="${1}" ; CONTCAR="${2}" ; shift 2
    else
        POTCAR="${2}" ; CONTCAR="${1}" ; shift 2
    fi
# Accept exactly two or zero command line arguments
elif [[ ${#} -ne 0 ]] ; then
    echo "${PROG_NAME}: error: ${#}: Invalid argument count, expected [2|0]"
    echo "$@"
    exit ${FAILURE}
fi 
```

给定此代码并运行应用程序，我得到以下输出：

```
BEFORE 
AFTER -- :hvso:l:d:n:p:t: -l help,version,submit-job,output:,library:,job-dir:,num-nodes:,num-procs:,max-time: -a -n vasp2nwchem --
vasp2nwchem: error: 7: Invalid argument count, expected [2|0]
:hvso:l:d:n:p:t: -l help,version,submit-job,output:,library:,job-dir:,num-nodes:,num-procs:,max-time: -a -n vasp2nwchem -- 
```

因此，代码进入代码的`while`循环部分，跳转到最后一种情况，并从第一种情况转移`--`，留下我提供给的所有参数`getopt`，减去`-o`标志。

任何人都可以解决这个难题，我们将不胜感激，因为它真的要把我送到边缘，特别是因为这段代码至少在 3 分钟前就可以正常工作，现在已经完全停止工作了！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:06:22.863

我看不出有什么不对。我将 GNU`getopt`安装为`/usr/gnu/bin/getopt`（和 BSD`getopt`中`/usr/bin`），所以这个脚本 ( `chk.getopt.sh`) 几乎等同于你的开始，尽管我确实设置了`PROG_NAME`变量。这或多或少是您相当充实的脚本的 SSCCE（[简短、自包含、完整示例](http://sscce.org/)）。

```
#!/bin/bash

PROG_NAME=$(basename $0 .sh)
SHORT_OPTS=":hvso:l:d:n:p:t:"
LONG_OPTS="help,version,submit-job,output:,library:,job-dir:"
LONG_OPTS="${LONG_OPTS},num-nodes:,num-procs:,max-time:"
OPTS=$(/usr/gnu/bin/getopt -o "${SHORT_OPTS}" -l "${LONG_OPTS}" -a -n "${PROG_NAME}" -- "$@")

# Check for invalid command line options and arguments
if [[ ${?} -ne ${SUCCESS} ]] ; then
    echo -e "${PROG_NAME}: error: Invalid option or argument\n" >&2
    usage ; exit ${FAILURE}
else
    echo "BEFORE $@"
    eval set -- ${OPTS}
    echo "AFTER $@"
fi 
```

当我运行它时，这是输出：

```
$ bash -x chk.getopt.sh  -ooutput -nnumber -pperhaps -ppotato -- -o oliphaunt
++ basename chk.getopt.sh .sh
+ PROG_NAME=chk.getopt
+ SHORT_OPTS=:hvso:l:d:n:p:t:
+ LONG_OPTS=help,version,submit-job,output:,library:,job-dir:
+ LONG_OPTS=help,version,submit-job,output:,library:,job-dir:,num-nodes:,num-procs:,max-time:
++ /usr/gnu/bin/getopt -o :hvso:l:d:n:p:t: -l help,version,submit-job,output:,library:,job-dir:,num-nodes:,num-procs:,max-time: -a -n chk.getopt -- -ooutput -nnumber -pperhaps -ppotato -- -o oliphaunt
+ OPTS=' -o '\''output'\'' -n '\''number'\'' -p '\''perhaps'\'' -p '\''potato'\'' -- '\''-o'\'' '\''oliphaunt'\'''
+ [[ 0 -ne '' ]]
+ echo 'BEFORE -ooutput' -nnumber -pperhaps -ppotato -- -o oliphaunt
BEFORE -ooutput -nnumber -pperhaps -ppotato -- -o oliphaunt
+ eval set -- -o ''\''output'\''' -n ''\''number'\''' -p ''\''perhaps'\''' -p ''\''potato'\''' -- ''\''-o'\''' ''\''oliphaunt'\'''
++ set -- -o output -n number -p perhaps -p potato -- -o oliphaunt
+ echo 'AFTER -o' output -n number -p perhaps -p potato -- -o oliphaunt
AFTER -o output -n number -p perhaps -p potato -- -o oliphaunt
$ 
```

这一切看起来都是正确的；双破折号之前的选项已经从它们的参数中分离出来，双破折号之后的选项是可以的。

因此，您的代码存在问题并不明显。即使使用空字符串作为程序名称，它对我来说也可以。

也许你应该在你的机器上显示这么多脚本的输出？

# regex - 如何使用正则表达式分隔字符串中的数字和字符，如“30M1000N20M”

> ID：15103484
> 
> 赞同：5
> 
> 时间：2013-02-27T01:50:06.197
> 
> 标签：regex, python

我正在尝试将这些字符串中的`[0-9]`和分开：`[A-Z]`

```
100M
20M1D80M
20M1I79M
20M10000N80M 
```

我尝试使用 Python`re`模块，以下是我使用的代码：

```
>>>import re
>>>num_alpha = re.compile('(([0-9]+)([A-Z]))+')
>>>str1="100M"
>>>n_a_match = num_alpha.match(str1)
>>>n_a_match.group(2), n_a_match.group(3)

100,M   #just what I want

>>>str1="20M10000N80M"
>>>n_a_match = num_alpha.match(str1)
>>>n_a_match.groups()

('80M', '80', 'M')  #only the last one, how can I get the first two?
#expected result ('20M','20','M','10000N','10000','N','80M','80','M') 
```

此正则表达式适用于仅包含一个匹配项但不包含多组匹配项的字符串。我如何使用正则表达式来处理它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T03:41:16.333

我建议使用`re.findall`. 如果您打算迭代结果，而不是构建列表，则可以`re.finditer`改用。这是一个如何工作的示例：

```
>>> re.findall("(([0-9]+)([A-Z]))", "20M10000N80M")
[('20M', '20', 'M'), ('10000N', '10000', 'N'), ('80M', '80', 'M')] 
```

如果您不想要组合的数字+字母字符串，您可以从匹配中删除外括号并获取单独的部分：

```
>>> re.findall("([0-9]+)([A-Z])", "20M10000N80M")
[('20', 'M'), ('10000', 'N'), ('80', 'M')] 
```

或者，如果您根本不需要元组（并且您不必担心格式错误的输入，例如连续有多个字母的字符串），您可以将模式更改为交替，并通过一：

```
>>> re.findall("([0-9]+|[A-Z])", "20M10000N80M")
['20', 'M', '10000', 'N', '80', 'M'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T03:02:33.977

尝试使用以下`split`方法：

```
>>> str1="20M10000N80M"
>>> num_alpha = re.compile('(([0-9]+)([A-Z]))')
>>> l = num_alpha.split(str1)
>>> l
['', '20M', '20', 'M', '', '10000N', '10000', 'N', '', '80M', '80', 'M', ''] 
```

请注意，我删除了`+`正则表达式中的 。

并删除空字符串，列表生成器：

```
>>> l_without_empty = [x for x in l if x != '']
['20M', '20', 'M', '10000N', '10000', 'N', '80M', '80', 'M'] 
```

* * *

编辑：

或者，正如评论中所说：

```
>>> l_without_empty = [x for x in l if x]
['20M', '20', 'M', '10000N', '10000', 'N', '80M', '80', 'M'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T03:42:47.990

另一种选择是`re.findall`改为：

```
>>> string = "20M10000N80M"
>>> groups = re.findall(r'((\d+)(\D+))', string)
[('20M', '20', 'M'), ('10000N', '10000', 'N'), ('80M', '80', 'M')] 
```

因此，您可以看到作为元组返回的不同组，然后，如果您真的希望它作为您呈现的元组 - 您可以将其展平：

```
>>> from itertools import chain
>>> tuple(chain.from_iterable(groups))
('20M', '20', 'M', '10000N', '10000', 'N', '80M', '80', 'M') 
```

# kendo-ui - 处理多个 kendo-ui 下拉列表

> ID：15103487
> 
> 赞同：0
> 
> 时间：2013-02-27T03:07:59.940
> 
> 标签：kendo-ui

我有以下 JSFiddle 示例。如何处理 KendoUI DropDownList？ [http://jsfiddle.net/bryanb/bWRTm/1/](http://jsfiddle.net/bryanb/bWRTm/1/)

我没有运气就尝试了以下方法：

```
supplier: <input id="suppliers1" class="suppliers" value="2" />
<br />
supplier: <input id="suppliers2" class="suppliers" value="2" />
<br />
<button id="dispose">Dispose</button> 
```

js：

```
function comboboxDispose() {
    $(".suppliers").each(function () {
        var combobox = $(this).data("kendoComboBox"),
            popup = combobox.popup,
            element = popup.wrapper[0] ? popup.wrapper : popup.element;

        //remove popup element;
        element.remove();

        //unwrap element
        combobox.element.show().insertBefore(combobox.wrapper);
        combobox.wrapper.remove();

        combobox.element.removeData("kendoComboBox");
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:31:07.870

我想通了。初始化 kendoui 组合框后，我的选择器选择了错误的元素。这是修复：

```
function comboboxDispose() {
    $("input[class='suppliers']").each(function () {

        var combobox = $(this).data("kendoComboBox"),
            popup = combobox.popup,
            element = popup.wrapper[0] ? popup.wrapper : popup.element;

        //remove popup element;
        element.remove();

        //unwrap element
        combobox.element.show().insertBefore(combobox.wrapper);
        combobox.wrapper.remove();

        combobox.element.removeData("kendoComboBox");
    });
} 
```

工作示例：http: [//jsfiddle.net/bryanb/bWRTm/2/](http://jsfiddle.net/bryanb/bWRTm/2/)

# ios - 在 iOS 程序中使用情节提要向下钻取 UITableView

> ID：15103488
> 
> 赞同：0
> 
> 时间：2013-02-27T03:08:06.873
> 
> 标签：ios, objective-c

我正在尝试开发一个向下钻取 UITable 视图的 iOS 应用程序。我得到了一个向下钻取表视图教程，但 UITableViews 的数量是静态的。我需要的是动态的。我的要求很简单。我需要访问 FTP 服务器并获取目录层次结构（我想我需要将其存储在 NSDictionary 或 xml 文件中）并在 UITableView 中显示内容。如果它是一个文本文件，我需要在某个视图中显示它，否则我需要在同一个 UITableView 中显示所选文件夹的内容，并且它一直持续到目录层次结构的底部。

我需要使用情节提要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:21:46.830

我必须做出与您在我之前处理的应用程序中谈论的内容非常相似的东西。

在那里，我在表格视图单元格内创建了表格视图，顶部有一个按钮，可以使用单元格高度展开和折叠视图。

这工作得很好，但从那时起，我找到了简单地以编程方式将 ui 元素添加到表格视图单元格或视图的最佳方法。

在这两种情况下，我都使用父子架构创建了一个管理系统来保存您的信息。

我希望这能让你朝着正确的方向前进:)

# python - 用 mayavi 或 vtk 绘制凹面物体

> ID：15103489
> 
> 赞同：3
> 
> 时间：2013-02-27T03:08:14.513
> 
> 标签：python, graphics, 3d, vtk, mayavi

我刚开始在 python 中使用 mayavi，对 3d 图形编程不太了解。我想绘制一个凹面/物体，但是当我尝试它时，它会像这样连接：

![发生了什么](../Images/c2db38043b990e0d7c3ebe179a46bb20.png)

你看不到图片，但它是由平行平面形成的（也不是我想要的）

当我尝试绘制具有这种形状的结构时：

![我要绘制的内容](../Images/824d4eb1911d805734a663b991a13e51.png)

所以这就是我为获得积分和情节所做的事情：

```
#extract the black in the image
x,y,z = np.where(quest == 0)
#make z1,z2 the right size(y*0) and value(+12)
z1 = y*0
z2 = y*0+12
x,y,z1,z2= np.atleast_2d(x,y,z1,z2)
#duplicate the shape at z1 and z2
x = np.concatenate((x,x))
y = np.concatenate((y,y))
z = np.concatenate((z1,z2))
#plot the mesh
mlab.mesh(x,y,z)
mlab.show() 
```

我注意到你的数据点的顺序对于使用网格很重要，因为它会从每个连续的点画一条线。

有没有更简单的方法可以以某种方式组织我的观点？

还有一种方法可以使形状填充点之间的区域吗？

感谢所有帮助，谢谢

后续问题：

有没有更好的python 3d 库可以达到这个目的？

我正在考虑用 vtk 来做，但同样的问题是像这样切掉问号的凹面部分：

![vtk中的同样问题](../Images/cdf135bf5cf6599b772cf0a684c39145.png)

更长的代码是：

```
#create the points
points = vtk.vtkPoints()
for i, j in zip(x,y):
    points.InsertNextPoint(i,j,0)
#create a polygon
polygon = vtk.vtkPolygon()
polygon.GetPointIds().SetNumberOfIds(len(x))
for i in range(len(x)):
    polygon.GetPointIds().SetId(i,i)
#add it to a cell array
polygons = vtk.vtkCellArray()
polygons.InsertNextCell(polygon)
#make the poly data
polyData = vtk.vtkPolyData()
polyData.SetPoints(points)
polyData.SetPolys(polygons)
#set up the window
mapper = vtk.vtkPolyDataMapper()
mapper.SetInput(polyData
actor = vtk.vtkActor()
actor.SetMapper(mapper)
renderer = vtk.vtkRenderer()
rWindow = vtk.vtkRenderWindow()
rWindow.AddRenderer(renderer)
rWindowInteractor = vtk.vtkRenderWindowInteractor()
rWindowInteractor.SetRenderWindow(rWindow)
renderer.AddActor(actor)
renderer.SetBackground(.5,.3,.31)
rWindow.Render()
rWindowInteractor.Start() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-24T08:06:38.783

这篇文章已经有一年多了，但它可能对其他人仍然有用。

我遇到了同样的问题，我通过使用[`vtkTriangleFilter`](http://www.vtk.org/doc/nightly/html/classvtkTriangleFilter.html#details). 此过滤器将输入多边形转换为三角形，对于 OpenGL 更易于理解。

这是一个快速脚本，我在其中创建了一个凹形（“看起来像”大象），并在开始时提供了一个布尔值来过滤形状。

```
#!/usr/bin/env python

from vtk import *

# switch to False if you don't want to filter the shape
FILTER = True

# x and y values of points to create a concave shape
x = [-2.25032, -3.04773, -3.06125, -2.69633, -2.52063, -2.16923, -1.72322, -1.47994, -1.85837, -1.04745, -0.68253, 1.25018, 1.81783, 3.20992, 2.15571, 1.99353, 2.72336, 3.35859, 3.57483, 3.60186, 3.69647, 4.18303, 4.29115, 3.87217, 2.87203, 2.07462, 1.43939, 1.10151, 0.912292, 0.466283, 1.27721, 0.723076, -1.22315]

y = [-1.3371, -0.671689, 0.094162, 0.081607, -0.4457, -0.960452, -0.797238, 0.0313873, 1.43754, 1.76397, -0.00627746, -0.295041, 1.42498, 1.36221, -0.39548, -1.21155, -1.57564, -1.57564, -1.03578, -0.47081, 0.244821, 0.169492, -0.822348, -1.98996, -2.7307, -2.96924, -3.20778, -2.89391, -2.56748, -2.12806, -1.93974, -1.65097, -1.60075]

# creation of the source
positions = zip(x, y)

triFilter = vtkTriangleFilter()

pts = vtkPoints()
polygon = vtkPolygon()
polygon.GetPointIds().SetNumberOfIds(len(positions))

for k, l in enumerate(positions):
    pts.InsertNextPoint(float(l[0]), float(l[1]), 1)
    polygon.GetPointIds().SetId(k, k)

polygons = vtkCellArray()
polygons.InsertNextCell(polygon)

polygonPolyData = vtkPolyData()
polygonPolyData.SetPoints(pts)
polygonPolyData.SetPolys(polygons)

# let's filter the polydata
triFilter.SetInputData( polygonPolyData)
triFilter.Update()

polygonPolyDataFiltered = triFilter.GetOutput()

# map it
mapper = vtkPolyDataMapper()

if VTK_MAJOR_VERSION <= 5:

    if FILTER:
        mapper.SetInput(polygonPolyDataFiltered)
    else:
        mapper.SetInput(polygonPolyData)
else:
    if FILTER:
        mapper.SetInputData(polygonPolyDataFiltered)
    else:
        mapper.SetInputData(polygonPolyData)

# render it

actor =  vtkActor()
actor.SetMapper(mapper)

ren = vtkRenderer()
ren.AddActor(actor)

renwin = vtkRenderWindow()
renwin.AddRenderer(ren)

iren = vtkRenderWindowInteractor()
iren.SetRenderWindow(renwin)

iren.SetInteractorStyle(vtkInteractorStyleTrackballCamera())
iren.Initialize()
iren.Start() 
```

# php - IIS 7.5 中的致命 PHP 错误

> ID：15103496
> 
> 赞同：1
> 
> 时间：2013-02-27T03:08:54.280
> 
> 标签：php, ajax, error-handling, iis-7.5

我想看看发生的任何 PHP 错误，即`"Expected ; on line 5 of myfile.php"`那种事情。不幸的是，我似乎无法弄清楚如何查看这些信息。

我已将 E_ALL、display_errors 设置为 ON，友好的错误消息已关闭，IIS 设置为错误传递，我错过了什么？

用于在任何页面上按上述方式显示的语法错误；他们不再这样做了。我们将服务器移至 localhost 进行开发，我想并没有完全模仿服务器配置。现在我难住了。

在 IE 和 Chrome 上试过，都没有显示错误。

错误记录在 PHP 的日志文件中，但我仍然希望它们显示在页面上；至少现在。

**更新：**

刚刚尝试`ini_set('display_errors', 'on');`直接添加到请求的页面中，它现在可以工作了.. 但是为什么呢？为什么需要在本地设置？我的 PHP.ini 文件已经声明了这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:15:23.707

回答问题的第一部分；查看使用 ajax 时的错误：您可以使用浏览器的开发人员工具查看服务器的确切响应。

例如，在 FireBug for Firefox 中，您转到`Net`选项卡，在那里您会看到所有 ajax 请求在它们发生时弹出。打开其中一个请求将为您提供包含更多选项卡（如`Response`和）的概览`HTML`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:30:20.600

尝试使用：

```
error_reporting (-1); 
```

对于 php < 5.4，E_ALL 并不是真正的“全部”。

另外，确保设置了“display_errors”。

```
ini_set( 'display_errors', 1 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:38:43.430

好吧，看起来这一半是我自己的愚蠢，一半是自动安装的混乱。

原来有两个 php.ini 文件，并且 IIS 使用位于`iis express`主驱动器目录中的一个，而不是常规`PHP`目录。

因此，对于遇到此问题的其他任何人，我提供了您必须通过才能获得所需错误的废话的完整列表：

**1）** [关闭IIS默认错误页面](https://stackoverflow.com/questions/2345532/turn-iis7-http-error-handling-off)

**2）** [禁用“友好的错误消息”](http://technet.microsoft.com/en-us/library/cc778248%28v=ws.10%29.aspx)

**3)**确保您使用的是正确的 php.ini 文件，并根据需要更改参数。具体[`error_reporting`和`display_errors`](http://php.net/manual/en/errorfunc.configuration.php)。

在浏览器中看到您需要的所有错误消息之前，所有这些都是必要的。

# git - 如何嫁接远程分支？

> ID：15103497
> 
> 赞同：2
> 
> 时间：2013-02-27T03:09:19.427
> 
> 标签：git

这个问题的设置需要一些谨慎的措辞。

从最简单的存储库开始：一次提交（如果需要，可以为空）。

从这个原始的 one-commit repo 中，分别制作两个单独的克隆 in`/path/to/repo1`和`/path/to/repo2`。现在想象一下，这两个克隆中的每一个都独立于另一个，演变为一个简单的线性历史。

如果`A`是 克隆时原始存储库中的单个提交`repo1`，`repo2`则情况可能如下所示：

```
repo1:

A-----B-----C-----D-----E-----F-----G-----H-----I-----J-----K-----L

repo2:

A-----M-----N-----O-----P-----R-----S-----T-----U-----V 
```

现在我想组合两个克隆，以便生成的提交图如下所示：

```
 ,--B-----C-----D-----E-----F-----G-----H-----I-----J-----K-----L
  /
 A
  \
   `--M-----N-----O-----P-----R-----S-----T-----U-----V 
```

我尝试了很多方法，但我从来没有得到像上面那样的图表......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:13:24.957

这对我有用，没有任何黑客：

```
git clone -o repo1 path/to/repo1 target
cd target
git remote add repo2 path/to/repo2
git fetch repo2
git branch master2 repo2/master 
```

此时，您将拥有 2 个本地分支：`master`tracking`repo1/master`和`master2`tracking `repo2/master`。

如果你`git log master`，它看起来像`L`, `K`, `J`, ..., `C`, `B`, **`A`**.

如果你`git log master2`，它看起来像`V`, `U`, `T`, ..., `N`, `M`, **`A`**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:25:22.463

看起来没那么难。

首先，如果要将它们合并到一个 repo 中，则必须有两个分支。

只需将 clone1 推送到远程调用 branch1

并将 clone2 推送到远程调用 branch2

稍后，返回任何 repo 并获取最新代码。

兄弟，蒂姆

# c# - 使用 HtmlAgilityPack 从 web 获取信息遇到错误 403

> ID：15103505
> 
> 赞同：1
> 
> 时间：2013-02-27T03:09:47.487
> 
> 标签：c#, html-agility-pack

我想从网上获取一些信息，`HtmlAgilityPack`在我使用应用程序从[该](http://zh.wikipedia.org/wiki/%E6%97%A5%E6%9C%AC%E5%85%83%E5%B8%85%E5%88%97%E8%A1%A8)页面获取数据之前，应用程序是正常的，错误的编号是`403`，我的代码如下：

```
string wikipageurl = geturl.Text;
WebClient wc1 = new WebClient();
Stream stream1 = wc1.OpenRead(wikipageurl);
StreamReader sr1 = new StreamReader(stream1, Encoding.UTF8);
showhtml.Text = sr1.ReadToEnd(); 
```

我使用 showhtml 文本框向我展示应用程序获得的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:23:29.753

这是使用**HtmlAgilityPack 的方法：**

```
HtmlDocutment doc;
HtmlWeb web = new HtmlWeb();

web.OverrideEncoding = Encoding.UTF8;
web.UserAgent = "Mozilla/5.0 (Windows NT 6.2; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0";
doc = web.Load("http://zh.wikipedia.org/wiki/%E6%97%A5%E6%9C%AC%E5%85%83%E5%B8%85%E5%88%97%E8%A1%A8");
showhtml.Text = doc.DocumentNode.OuterHtml; 
```

如果你想使用 WebClient 检查**Oscar Mederos**答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:30:48.457

只需尝试模拟您通过网络浏览器访问它。为此，您使用`User-Agent`标题：

```
...
WebClient wc1 = new WebClient();
wc1.Headers.Add(
     "User-Agent", 
     "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0"
);
Stream stream1 = wc1.OpenRead(wikipageurl);
... 
```

# ruby-on-rails - 制作自定义路线

> ID：15103506
> 
> 赞同：1
> 
> 时间：2013-02-27T03:09:50.930
> 
> 标签：ruby-on-rails, routes, ruby-on-rails-3.2

目标是为 GET、REST API 创建一个这样的 URL：

```
/manager/someID/report
example: /manager/2/report 
```

如果这样做，我可以让它显示在 rake 路线中：

```
get 'manager/:id/report', to: 'report#show' 
```

但是在我阅读的一些博客中，不熟练的开发人员就是这样写他们的路线的！并且看起来更好的方法是使用“嵌套资源”，所以我将头撞到桌子上以使嵌套资源以相同的方式工作......但没有成功

这是我到目前为止所写的：

```
 resources :manager, only: [:show] do
    resources :report, only: [:show], controller: 'report' do
     member do
       ## WAT ?!
     end
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:45:15.493

首先，如果他们称这样的路线为“不熟练”，您可能需要考虑阅读不同的博客。

考虑到它是非标准的 RESTful 路线，您提出的建议实际上很好，在某些情况下甚至可能更可取。如果你想要一种替代方法，你有几个不同的选择。我不认为任何一个比另一个更正确，但我更喜欢第一个，因为它占用的垂直空间更少。

```
resources :manager, only: [:show] do
  get 'report' => 'report#show', on: :member
end 
```

或者

```
resources :manager, only: [:show] do
  member do
    get 'report' => 'report#show'
  end
end 
```

# python - 每个赛季篮球队/比赛/得分的数据库。表结构

> ID：15103510
> 
> 赞同：2
> 
> 时间：2013-02-27T03:10:15.997
> 
> 标签：python, mysql, sql, relational-database

我正在为篮球赛季创建一个数据库。在这一点上，我保持简单，并存储表：

-**联赛**id[PK]、名称->（NBA、NCAAM 等）

-**年份**id[PK], League_id[FK], year->(2012-2013, 2011-2012, etc)

- **Team** id[PK], League_id[FK], name->(Bulls, Lakers, etc)

-**游戏**id[PK], home_team[FK], away_team[FK]

-**得分**id[PK], game_id[FK], home_score, away_score

我的问题是关于表结构。我对 sql 有点陌生，但我希望能够根据数据库信息进行计算。例如：

A 队在客场对阵 B 队，A 队的客场平均得分为 x，B 队的主场平均得分为 y... 以此类推

任何你看到的尖叫都不要那样做？只是想让你们快速浏览一下。

最终想开发一个类似这样的跨运动数据库：

[http://www.bc.edu/content/dam/files/schools/cas_sites/cs/local/bach/2008/08LawrenceChang.pdf](http://www.bc.edu/content/dam/files/schools/cas_sites/cs/local/bach/2008/08LawrenceChang.pdf)

但是想从这里开始获得一个基本的抓取算法，以及一些基本的统计数据。让我知道你的想法。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:21:25.543

乍一看，我会将分数放在游戏表中并添加游戏日期字段。我会将年表重命名为季节，并包括开始和停止日期。还可以考虑在游戏表中添加季节 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:29:28.330

Year 和 Score 表对我来说似乎都没有必要。它们可以很容易地添加到游戏表中（包括年份的日期和季节字段）。

另外我不明白为什么需要在 League 表上生成自动增量主键。联盟名称本身就可以很好地工作，或者更好的是完全摆脱 League 表，只需在 Team 表的联盟字段上使用[ENUM](http://dev.mysql.com/doc/refman/5.0/en/enum.html)。

# javascript - underscore.js 过滤一个对象数组，基于另一个

> ID：15103511
> 
> 赞同：23
> 
> 时间：2013-02-27T03:10:25.550
> 
> 标签：javascript, underscore.js

我正在尝试根据另一个对象过滤一组对象。公共属性 id `id`。我不确定 filter + each 是最好的方法还是 map reduce。无论如何，下面的代码不能像`out`空列表一样工作。

```
var aaa = [
    {name: "AAA", id: 845},
    {name: "BBB", id: 839},
    {name: "CCC", id: 854}
];
var bbb = [
    {id: 839},
    {id: 854}
];

var out = _.filter(aaa, function(val){
    return _.each(this, function(val2){
        return val['id'] === val2['id']
    });
}, bbb); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-27T03:23:35.970

只需创建一个有效 id 的“集合”并使用该“集合”进行过滤：

```
var aaa = [
    {name: "AAA", id: 845},
    {name: "BBB", id: 839},
    {name: "CCC", id: 854}
];
var bbb = [
    {id: 839},
    {id: 854}
];

var ids = {};
_.each(bbb, function (bb) { ids[bb.id] = true; });

var out = _.filter(aaa, function (val) {
    return ids[val.id];
}, bbb); 
```

填充`ids`速度很快，它在 n *[摊销](https://stackoverflow.com/questions/3949217/time-complexity-of-hash-table)O(1) 中，即 O(n)。同样适用于过滤。

如果您`each(…)`在内部循环中使用，您将拥有 O(n²)。对于更大的数据集，这将变得非常慢。此外，额外的嵌套使代码乍一看更难阅读/理解。

看到代码在行动中被剪断：http: [//jsfiddle.net/SMtX5/](http://jsfiddle.net/SMtX5/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-27T03:36:57.903

你可以`_.find`用来过滤：

```
_.filter(aaa, function(a){
    return _.find(bbb, function(b){
        return b.id === a.id;
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T03:34:33.093

您可以使用[`_.some(list, [iterator], [context])`](http://underscorejs.org/#some).

**如果列表**中的任何值通过**迭代器**真值测试，则返回*true 。*

 ****```
var out = _.filter(aaa, function(val){
    return _.some(this,function(val2){
        return val2['id'] === val['id'];
    });
}, bbb); 
```

这是jsfiddle。[http://jsfiddle.net/h98ej/](http://jsfiddle.net/h98ej/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-01T14:29:59.860

```
bbb = bbb.map(_ => _.id) && aaa.filter(_ => bbb.indexOf( _.id ) > -1) 
```

假设您的用例，您只需要纯 JS 数组函数即可。****

# c# - HttpWebResponse.Cookies 为空，尽管 Set-Cookie 标头（无重定向）

> ID：15103513
> 
> 赞同：32
> 
> 时间：2013-02-27T03:10:45.203
> 
> 标签：c#, cookies, httpwebrequest

我正在努力弄清楚这里出了什么问题。我正在发送登录信息，我可以在 Header 中看到 Set-Cookie 的值正确，但是 Cookies 集合没有被填充。

这是 HTTPS，登录自动重定向，但我使用 AllowAutoRedirect=false 禁用它以尝试解决此问题。

在此屏幕截图中，您可以轻松查看调试信息以及应该设置 cookie。我正在将我的 httpWebRequest.Cookie 设置为新的 CookieCollection。

![右键单击并选择查看图像以查看全尺寸。](../Images/d4c340177635f34c78dbde14f143b5df.png)

```
HttpWebRequest httpRequest;
CookieContainer reqCookies = new CookieContainer();
string url = "https://example.com";
string[] email = user.Split('@');
email[0] = System.Web.HttpUtility.UrlEncode(email[0]);
user = email[0] + "@" + email[1];
pass = System.Web.HttpUtility.UrlEncode(pass);

string postData = "email=" + user + "&password=" + pass;
byte[] byteData = Encoding.UTF8.GetBytes(postData);

httpRequest = (HttpWebRequest)WebRequest.Create(url);
httpRequest.Method = "POST";
httpRequest.Referer = url;
httpRequest.CookieContainer = reqCookies;
httpRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1003.1 Safari/535.19";
httpRequest.Accept = "text/html, application/xhtml+xml, */*";
httpRequest.ContentType = "application/x-www-form-urlencoded";
httpRequest.ContentLength = byteData.Length;
using (Stream postStream = httpRequest.GetRequestStream())
{
    postStream.Write(byteData, 0, byteData.Length);
    postStream.Close();
}

httpRequest.AllowAutoRedirect = false;
HttpWebResponse b = (HttpWebResponse)httpRequest.GetResponse(); 
```

[尝试连接到http://www.yahoo.com](http://www.yahoo.com)的完全相同的代码，cookie 被放入我的收藏中......啊......

这是 Set-Cookie 标头值：

> s=541E2101-B768-45C8-B814-34A00525E50F；域=example.com；路径=/; 版本=1

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-04T12:21:08.460

**五年后的更新**，实际上有人提到了正确的方法：首先正确设置 CookieContainer 并让它处理所有事情。请进一步参考 Sam 的解决方案。

在读取由 C# ASP.NET 应用程序创建的 C# 中的 Cookie 时，我也发现了这个问题...... ;)

不确定它是否与它有关，但我发现在我的案例中设置的两个 Cookie 写在一个 Set-Cookie 标头中，Cookie 有效负载用逗号分隔。因此，我调整了 AppDeveloper 的解决方案来处理这个多 cookie 问题，并修复了我在评论中提到的名称/值问题。

```
private static void fixCookies(HttpWebRequest request, HttpWebResponse response) 
{
    for (int i = 0; i < response.Headers.Count; i++)
    {
        string name = response.Headers.GetKey(i);
        if (name != "Set-Cookie")
            continue;
        string value = response.Headers.Get(i);
        foreach (var singleCookie in value.Split(','))
        {
            Match match = Regex.Match(singleCookie, "(.+?)=(.+?);");
            if (match.Captures.Count == 0)
                continue;
            response.Cookies.Add(
                new Cookie(
                    match.Groups[1].ToString(), 
                    match.Groups[2].ToString(), 
                    "/", 
                    request.Host.Split(':')[0]));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-07-06T03:47:56.513

除非在上设置 ，否则该`Cookies`属性将为空。因此，正确的方法是在检索响应之前设置成员：`CookieContainer``HttpWebRequest``CookieContainer`

```
var request = (HttpWebRequest)HttpWebRequest.Create(..);
request.CookieContainer = new CookieContainer();

var response = request.GetResponse();
// ..response.Cookies will now contain the cookies sent back by the server. 
```

您不需要手动解析`Set-Cookie`.

有关更多信息，请参阅[文档](https://docs.microsoft.com/en-us/dotnet/api/system.net.httpwebresponse.cookies?view=netcore-3.1#remarks)。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-27T03:17:55.700

网站发送的标头似乎`Set-Cookie`格式错误（不是应有的典型格式）。

在这种情况下，您需要手动解析 cookie 并将其保存到`CookieContainer`.

```
for (int i = 0; i < b.Headers.Count; i++)
{
    string name = b.Headers.GetKey(i);
    string value = b.Headers.Get(i);
    if (name == "Set-Cookie")
    {
        Match match = Regex.Match(value, "(.+?)=(.+?);");
        if (match.Captures.Count > 0)
        {
            reqCookies.Add(new Cookie(match.Groups[1].Value, match.Groups[2].Value, "/", "example.com"));
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-11-19T19:59:17.123

`CookieContainer`在[这个答案](https://stackoverflow.com/a/1055883/2675154)中使用 a 。对我来说，让这些正则表达式方法出错的是`expires=Tue, ...`.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-10-04T23:43:39.393

查看其他答案，我改进了不正确的 cookie 处理。与那些答案不同，这个答案会自动处理所有 cookie 属性（例如过期、安全等）并适用于所有范围的 cookie（即使有超过 1 个不正确的 cookie）。

它作为扩展方法实现，可以通过以下方式使用：

```
//...
            using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
            {
                request.FixCookies(response);
//... 
```

`FixCookies()`扩展方法：

```
using System;
using System.Collections.Generic;
using System.Net;

namespace AG.WebHelpers
{
    static public class ExtensionMethods
    {
        static public void FixCookies(this HttpWebRequest request, HttpWebResponse response)
        {
            for (int i = 0; i < response.Headers.Count; i++)
            {
                string name = response.Headers.GetKey(i);
                if (name != "Set-Cookie")
                    continue;
                string value = response.Headers.Get(i);
                var cookieCollection = ParseCookieString(value, () => request.Host.Split(':')[0]);
                response.Cookies.Add(cookieCollection);
            }
        }

        static private CookieCollection ParseCookieString(string cookieString, Func<string> getCookieDomainIfItIsMissingInCookie)
        {
            bool secure = false;
            bool httpOnly = false;

            string domainFromCookie = null;
            string path = null;
            string expiresString = null;

            Dictionary<string, string> cookiesValues = new Dictionary<string, string>();

            var cookieValuePairsStrings = cookieString.Split(';');
            foreach(string cookieValuePairString in cookieValuePairsStrings)
            {
                var pairArr = cookieValuePairString.Split('=');
                int pairArrLength = pairArr.Length;
                for (int i = 0; i < pairArrLength; i++)
                {
                    pairArr[i] = pairArr[i].Trim();
                }
                string propertyName = pairArr[0];
                if (pairArrLength == 1)
                {
                    if (propertyName.Equals("httponly", StringComparison.OrdinalIgnoreCase))
                        httpOnly = true;
                    else if (propertyName.Equals("secure", StringComparison.OrdinalIgnoreCase))
                        secure = true;
                    else
                        throw new InvalidOperationException(string.Format("Unknown cookie property \"{0}\". All cookie is \"{1}\"", propertyName, cookieString));
                    continue;
                }

                string propertyValue = pairArr[1];
                if (propertyName.Equals("expires", StringComparison.OrdinalIgnoreCase))
                    expiresString = propertyValue;
                else if (propertyName.Equals("domain", StringComparison.OrdinalIgnoreCase))
                    domainFromCookie = propertyValue;
                else if (propertyName.Equals("path", StringComparison.OrdinalIgnoreCase))
                    path = propertyValue;
                else
                    cookiesValues.Add(propertyName, propertyValue);
            }

            DateTime expiresDateTime;
            if (expiresString != null)
            {
                expiresDateTime = DateTime.Parse(expiresString);
            }
            else
            {
                expiresDateTime = DateTime.MinValue;
            }
            if (string.IsNullOrEmpty(domainFromCookie))
            {
                domainFromCookie = getCookieDomainIfItIsMissingInCookie();
            }

            CookieCollection cookieCollection = new CookieCollection();
            foreach (var pair in cookiesValues)
            {
                Cookie cookie = new Cookie(pair.Key, pair.Value, path, domainFromCookie);
                cookie.Secure = secure;
                cookie.HttpOnly = httpOnly;
                cookie.Expires = expiresDateTime;

                cookieCollection.Add(cookie);
            }
            return cookieCollection;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-11T12:54:40.100

这可能有点晚了，但你可以使用函数 SetCookies

```
var cHeader = responce.Headers.Get("Set-Cookie");
var cookie = new CookieContainer();
cookie.SetCookies(new Uri("[...]"), cHeader); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-28T14:39:18.743

我知道这个问题很老，但我遇到了一些正确解析“Set-Cookie”标头的代码。它处理以逗号分隔的 cookie 并提取每个 cookie 的名称、到期时间、路径、值和域。

这段代码比微软自己的 cookie 解析器工作得更好，这确实是官方 cookie 解析器应该做的。我不知道为什么微软还没有解决这个问题，因为这是一个非常常见的问题。

这是原始代码： [http ://snipplr.com/view/4427/](http://snipplr.com/view/4427/)

我在这里发布它以防链接在某些时候断开：

```
public static CookieCollection GetAllCookiesFromHeader(string strHeader, string strHost)
{
    ArrayList al = new ArrayList();
    CookieCollection cc = new CookieCollection();
    if (strHeader != string.Empty)
    {
        al = ConvertCookieHeaderToArrayList(strHeader);
        cc = ConvertCookieArraysToCookieCollection(al, strHost);
    }
    return cc;
}

private static ArrayList ConvertCookieHeaderToArrayList(string strCookHeader)
{
    strCookHeader = strCookHeader.Replace("\r", "");
    strCookHeader = strCookHeader.Replace("\n", "");
    string[] strCookTemp = strCookHeader.Split(',');
    ArrayList al = new ArrayList();
    int i = 0;
    int n = strCookTemp.Length;
    while (i < n)
    {
        if (strCookTemp[i].IndexOf("expires=", StringComparison.OrdinalIgnoreCase) > 0)
        {
            al.Add(strCookTemp[i] + "," + strCookTemp[i + 1]);
            i = i + 1;
        }
        else
        {
            al.Add(strCookTemp[i]);
        }
        i = i + 1;
    }
    return al;
}

private static CookieCollection ConvertCookieArraysToCookieCollection(ArrayList al, string strHost)
{
    CookieCollection cc = new CookieCollection();

    int alcount = al.Count;
    string strEachCook;
    string[] strEachCookParts;
    for (int i = 0; i < alcount; i++)
    {
        strEachCook = al[i].ToString();
        strEachCookParts = strEachCook.Split(';');
        int intEachCookPartsCount = strEachCookParts.Length;
        string strCNameAndCValue = string.Empty;
        string strPNameAndPValue = string.Empty;
        string strDNameAndDValue = string.Empty;
        string[] NameValuePairTemp;
        Cookie cookTemp = new Cookie();

        for (int j = 0; j < intEachCookPartsCount; j++)
        {
            if (j == 0)
            {
                strCNameAndCValue = strEachCookParts[j];
                if (strCNameAndCValue != string.Empty)
                {
                    int firstEqual = strCNameAndCValue.IndexOf("=");
                    string firstName = strCNameAndCValue.Substring(0, firstEqual);
                    string allValue = strCNameAndCValue.Substring(firstEqual + 1, strCNameAndCValue.Length - (firstEqual + 1));
                    cookTemp.Name = firstName;
                    cookTemp.Value = allValue;
                }
                continue;
            }
            if (strEachCookParts[j].IndexOf("path", StringComparison.OrdinalIgnoreCase) >= 0)
            {
                strPNameAndPValue = strEachCookParts[j];
                if (strPNameAndPValue != string.Empty)
                {
                    NameValuePairTemp = strPNameAndPValue.Split('=');
                    if (NameValuePairTemp[1] != string.Empty)
                    {
                        cookTemp.Path = NameValuePairTemp[1];
                    }
                    else
                    {
                        cookTemp.Path = "/";
                    }
                }
                continue;
            }

            if (strEachCookParts[j].IndexOf("domain", StringComparison.OrdinalIgnoreCase) >= 0)
            {
                strPNameAndPValue = strEachCookParts[j];
                if (strPNameAndPValue != string.Empty)
                {
                    NameValuePairTemp = strPNameAndPValue.Split('=');

                    if (NameValuePairTemp[1] != string.Empty)
                    {
                        cookTemp.Domain = NameValuePairTemp[1];
                    }
                    else
                    {
                        cookTemp.Domain = strHost;
                    }
                }
                continue;
            }
        }

        if (cookTemp.Path == string.Empty)
        {
            cookTemp.Path = "/";
        }
        if (cookTemp.Domain == string.Empty)
        {
            cookTemp.Domain = strHost;
        }
        cc.Add(cookTemp);
    }
    return cc;
} 
```

# ios - iOS 推送通知提供商的证书

> ID：15103516
> 
> 赞同：0
> 
> 时间：2013-02-27T03:10:52.833
> 
> 标签：ios, apple-push-notifications, provider

我需要在我的应用程序中实现 iOS 推送通知。我已经尝试了一段时间，并完成了所需的 iOS 端代码更改。我能够从 APNS 获取设备令牌。但我坚持提供者端的实现。

我正在使用 java 提供程序并使用 JAVAPNS 库来实现提供程序端逻辑。令我困惑的是提供商所需的证书安装和东西。

我的提供程序在 unix/windows 机器上运行，我不确定如何在此处继续安装 SSL 证书。

我已经从苹果开发者网站获得了推送通知的 SSL 证书。但是我该如何处理 p12 文件呢？

尽管有很多关于推送通知的 iOS 端实现的讨论和教程，但我在网上没有找到很多解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:39:47.730

如果您使用的是 JavaPNS，则很简单：

```
 import javapns.Push;

 public class PushTest {

      public static void main(String[] args) {

                Push.alert("Hello World!", "keystore.p12", "keystore_password", false, "Your token");

      }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:12:22.467

SSL 证书用于从您的服务器端代码建立到 gateway.push.apple.com 的套接字连接。以下是一些 Ruby 代码作为示例：

```
 APN_SSL_KEY_FILE = 'lib/SSLCert_Private_Key.pem'
  APN_SSL_HOST     = 'gateway.push.apple.com'
  APN_SSL_PORT     = 2195
  APN_SSL_PASSWORD = '<password>'

  def configure_apn_cert
    @@apn_cert         = File.read(File.join(RAILS_ROOT, APN_SSL_KEY_FILE))
    @@apn_context      = OpenSSL::SSL::SSLContext.new
    @@apn_context.key  = OpenSSL::PKey::RSA.new(@@apn_cert, APN_SSL_PASSWORD)
    @@apn_context.cert = OpenSSL::X509::Certificate.new(@@apn_cert)
  end

  def create_and_configure_apn_server
    configure_apn_cert if not @@apn_cert
    puts "APN Service: Configuring APN SOCKET and SSL connection"
    @apn_socket       = TCPSocket.new(APN_SSL_HOST, APN_SSL_PORT)
    @apn_ssl          = OpenSSL::SSL::SSLSocket.new(@apn_socket, @@apn_context)
    @apn_ssl.sync     = true
    @apn_ssl.connect
    @apn_is_active = false;    # reopen the TCP/SSL sockets for now
  end 
```

你会得到一个 .pem 文件：

```
$ openssl pkcs12 -in myfile.p12 -out myfile.pem 
```

# f# - 函数与方法

> ID：15103519
> 
> 赞同：4
> 
> 时间：2013-02-27T03:11:05.357
> 
> 标签：f#

我对 F# 很陌生。我注意到的第一件事是集合操作被定义为函数而不是方法。

作为一个实验，我定义了几个方法`list`：

```
type List<'a> with
    member this.map f = List.map f this
    member this.filter f = List.filter f this 
```

然后，给定这些助手：

```
let square x = x * x

let isEven n = n % 2 = 0 
```

这是使用这些方法的示例：

```
[1 .. 10].filter(isEven).map(square) 
```

这是传统的方式：

```
[1 .. 10] |> List.filter isEven |> List.map square 
```

所以简洁显然不是选择函数而不是方法的理由。:-)

从库设计的角度来看，为什么选择函数而不是方法？

我的猜测是，这是因为您可以传递`List.filter`，但不能真正传递该`filter`方法，除非它“绑定”到列表或包装在匿名函数中（即`(fun (ls : 'a list) -> ls.filter)`有效地将`filter`方法转换回函数 on `list`）。

然而，即使有这个原因，直接调用操作的最常见情况似乎会偏爱方法，因为它们更简洁。所以我想知道是否还有其他原因。

编辑：

我的第二个猜测是功能专业化。即专业化很简单`List.filter`（例如`let evens List.filter isEven`）。`evens`必须定义一个方法似乎更冗长。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T14:13:35.663

函数比方法更重要的是函数专业化和它实现的简单分解。

这是涉及函数的示例表达式：

```
let square x = x * x

let isEven n = n % 2 = 0

[1 .. 10] |> List.filter isEven |> List.map square 
```

让我们分解出一个称为`evens`过滤偶数的函数：

```
let evens = List.filter isEven 
```

现在让我们分解出一个对整数列表求平方的函数：

```
let squarify = List.map square 
```

我们原来的表达现在是：

```
[1 .. 10] |> evens |> squarify 
```

现在让我们回到原来的基于方法的表达式：

```
[1 .. 10].filter(isEven).map(square) 
```

在这种情况下，对偶数进行过滤并不是那么简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T18:26:17.193

我认为你的猜测是正确的。撇开简洁不谈，能够将其`List.filter`视为可以传递（您的第一个猜测）和部分应用（您的第二个猜测）的一流事物是关键。这是一种以动词而非名词为导向的看待世界的方式。我认为[史蒂夫·耶格说得最好](http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html):)

# opencv - 在 OpenCV 上进行抖动校正的图像校正

> ID：15103524
> 
> 赞同：1
> 
> 时间：2013-02-27T03:11:49.147
> 
> 标签：opencv, shake, homography

我有两张来自未校准相机的同一场景的照片。这些照片的角度和比例（缩放）略有不同，我想将它们叠加起来，拒绝任何形式的震动。换句话说，我应该改变它们，使震动变得难以察觉，做一个运动补偿。

我已经尝试使用简单的 SURF（特征）检测器和 Homography，但有时结果并不令人满意。所以我正在考虑尝试**图像校正**来补偿运动。- 它是否适用于轻微的变化，例如用户摇晃？- 拒绝这 2 帧的抖动真的有效吗？对于更大的图片缓冲区（可能是 10 个）？- 任何人都知道它是否会修复比例差异（图像中的不同缩放）？- 算法到底做了什么？它会将两张图片都转换为第三方向吗？

如果有更好的解决方案，我会很高兴知道 =)

编辑

我的目标不是补偿模糊运动，而是位移本身。例如，在[这个文件](http://www.sci.utah.edu/~gerig/CS6320-S2012/Materials/CS6320-CV-F2012-Rectification.pdf)中，作者通过 Image Rectification 补偿了两个相机之间的角度差异。它实际上是如何工作的？它是否总是创建一个中间图片方向，或者我可以指定其中一张图片保持静止？ ![在此处输入图像描述](../Images/57b7f71ee7422ad9ad6aba693d216a2f.png)

另外，我能否将其应用于许多框架，或者它总是会为我放入的每两个框架找到一个中间方向？

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:36:55.537

我不确定叠加图像的效果如何。从图像中去除模糊（包括应该在手持相机设备中占主导地位的运动模糊）的另一种方法是盲反卷积。它基本上是一种找到实际应用（相机抖动）到真实图像的模糊过滤器的倒数的方法。网上有很多技术。我在本文中使用算法的修改版本取得了很好的效果：[http ://www.cse.cuhk.edu.hk/~leojia/all_final_papers/motion_deblur_cvpr07.pdf](http://www.cse.cuhk.edu.hk/~leojia/all_final_papers/motion_deblur_cvpr07.pdf)

它还在网络上的某个地方附带了一个可执行文件，因此您可以查看它是否适合您的目的。

祝你好运！

# java - 让ant运行java文件

> ID：15103527
> 
> 赞同：0
> 
> 时间：2013-02-27T03:12:08.713
> 
> 标签：java, ant

我在创建简单的东西时遇到了麻烦，而且似乎没有任何网站清楚地说明如何做到这一点，老实说，我认为它应该很简单。

我有一堆用于项目的java文件。我想编译所有这些，然后使用特定参数运行每个文件。

基本上我希望操作的顺序是这样的

```
javac prob1.java
javac prob2.java

java prob1 parameter
java prob2 parameter 
```

但我希望在 ant (build.xml) 中使用它。

我可以很好地完成编译部分

```
<project default="compile"> 
    <target name="compile"> 
    <javac srcdir="." /> 
    </target> 
</project> 
```

我只是不能让它运行说`prob1`有一个论点。我想这非常容易，但是我找到的每个解决方案似乎都不起作用。另请注意 prob1.class 和 prob2.class 位于同一目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:16:45.480

这应该有效：

```
<target name="run">
    <java classname="prob1">
       <classpath>
           <pathelement location="."/>
        </classpath>
        <arg value="parameter" />
    </java>
    <java classname="prob2">
        <classpath>
           <pathelement location="."/>
        </classpath>
        <arg value="parameter" />
    </java>
</target> 
```

# javascript - 如何在 Durandal 视图上触发退出/停用逻辑？

> ID：15103529
> 
> 赞同：1
> 
> 时间：2013-02-27T03:12:30.770
> 
> 标签：javascript, viewmodel, setinterval, durandal

我有我的 Durandal 视图模型，激活效果很好

```
define(function (require) {

var vm = {
    activate: activate
};
// ========= 
// snip snip 
// ========= 

function activate() {
    // Setup here

}; 
```

但是在退出视图模型时，我想拆除一些东西，文档中有一个停用方法，但我无法让它工作。

```
function deactivate(isClose) {
    // Teardown here
}; 
```

Durandal 视图模型是否没有停用方法或正在做任何明显错误的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:23:45.893

我又看了看我的代码，我没有在我的视图模型中指定停用：

所以 ...

```
var vm = {
    activate: activate
}; 
```

变成...

```
var vm = {
    activate: activate,
    deactivate: deactivate,
}; 
```

# java - Javafx webengine任意错误执行javascript

> ID：15103538
> 
> 赞同：2
> 
> 时间：2013-02-27T03:13:00.457
> 
> 标签：java, javafx-2

我在 Swing 应用程序上运行 javafx 2.2.5 的 webengine 有问题，所以想用 webengine 登录 ebay，我可以这样做，问题是执行点击时有时会引发 javascript 错误。这是一小部分时间，通常它工作正常。所以让我们说这段代码：

```
 final StackPane root = new StackPane();
 WebView browser = new WebView();
 WebEngine webEngine = browser.getEngine();
 final String url ="https://signin.ebay.co.uk/ws/eBayISAPI.dll?SignIn";
 //load the url
 webEngine.load(url);
 final Scene scene = new Scene(root, 500, 400);
 root.getChildren().add(browser);
 //addlistener for state
  webEngine.getLoadWorker().stateProperty().addListener(new ChangeListener() {
        @Override
        public void changed(ObservableValue ov, Object t, Object t1) {              
            Worker.State state = (Worker.State)t1;

            if(state==Worker.State.SUCCEEDED){
                         Document doc = webEngine.getDocument();
                         Element u = (Element) doc.getElementById("userid");
                         u.setAttribute("value", username);
                         Element p = (Element)doc.getElementById("pass");
                         p.setAttribute("value", pass);
            //now execute the click, as the load succeeded the button should be clickable
            webEngine.executeScript("document.getElementById('but_sgnBt').click()");
            }   
}
}); 
```

好吧，大多数时候它都可以工作，但有时由于未知原因它不起作用，我也尝试了很多变体，看看我是否可以重新加载页面并重试，但每次第一次出错时，其他调用像 reload() 和 load() 一样，继续同样的问题。我尝试这样做：

```
final StackPane root = new StackPane();
WebView browser = new WebView();
WebEngine webEngine = browser.getEngine();
String url ="https://signin.ebay.co.uk/ws/eBayISAPI.dll?SignIn";
//load the url
webEngine.load(url);
 final Scene scene = new Scene(root, 500, 400);
root.getChildren().add(browser);
//addlistener for state
 webEngine.getLoadWorker().stateProperty().addListener(new ChangeListener() {
        @Override
        public void changed(ObservableValue ov, Object t, Object t1) {              
            Worker.State state = (Worker.State)t1;

            if(state==Worker.State.SUCCEEDED){

                         Document doc = webEngine.getDocument();
                         Element u = (Element) doc.getElementById("userid");
                         u.setAttribute("value", username);
                         Element p = (Element)doc.getElementById("pass");
                         p.setAttribute("value", pass);
            //now execute the click, as the load succeeded the button should be clickable
            try{
            webEngine.executeScript("document.getElementById('but_sgnBt').click()");
           }catch(Exception ex){
            webEngine.getLoadWorker().cancel();
            //with both is the same outcome
            //  webEngine.reload();
                webEngine.load(url);
           }
            }   
}
}); 
```

有了这个，如果第一次执行javascript失败，代码将继续循环，它加载，成功并抛出一个错误，我试图让线程休眠，看看问题是否是页面没有完全加载，但这并没有t 似乎是问题所在，据我所知，当状态成功时，页面已正确加载。我已经花了很多时间来解决这个问题，现在我对如何解决这个问题甚至问题是什么都没有更多的想法，最糟糕的是，我必须尝试运行代码几次，直到出现错误，这使得调试更加困难。

有问题的错误是::

netscape.javascript.JSException：TypeError：'null' 不是 com.sun.webpane.platform.WebPage.twkExecuteScript（本机方法）中的对象

所以我的问题是，有人知道为什么会这样吗？或者解决这个问题的方法？

非常感谢

# matlab - Matlab：“whos”返回的总内存使用量与“memory”返回的“Memory used by Matlab”不匹配

> ID：15103541
> 
> 赞同：1
> 
> 时间：2013-02-27T03:13:45.630
> 
> 标签：matlab, memory-management

我有一个脚本有时会崩溃，有时会返回“内存不足”消息。在调查过程中，我发现将分配给我的变量的内存加起来，由“whos”返回，我总共得到大约 380 MB。另一方面，“memory”返回 1196 MB 作为 Matlab 使用的总内存。我知道程序本身会占用一些内存，但我认为它不应该超过 800 MB。有谁知道我的其余内存在哪里使用？提前感谢您的任何建议。

*   史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:43:30.360

其余的内存可能由 MATLAB 程序本身使用。不幸的是，MATLAB 可能会消耗 800 MB，因为它可能存在内存泄漏。

# c++ - 如何使用特定的 VC++ 运行时编译 boost？

> ID：15103542
> 
> 赞同：0
> 
> 时间：2013-02-27T03:13:46.637
> 
> 标签：c++, boost, boost-build

我正在尝试为分发获得一致的 VC++ 运行时，但我找不到任何迫使 boost/bjam 合作的东西。

我已经使用此链接中的方法成功编译了 libcurl 和 UnitTest++。

[避免 VC2005 SP1 安全更新 KB971090 出现问题](http://tedwvc.wordpress.com/2009/08/10/avoiding-problems-with-vc2005-sp1-security-update-kb971090/)

一般策略是将此标头包含在所有 cpp 文件中。

```
#ifndef __midl
#define _SXS_ASSEMBLY_VERSION "8.0.50727.762"
#define _CRT_ASSEMBLY_VERSION _SXS_ASSEMBLY_VERSION
#define _MFC_ASSEMBLY_VERSION _SXS_ASSEMBLY_VERSION
#define _ATL_ASSEMBLY_VERSION _SXS_ASSEMBLY_VERSION
#ifdef __cplusplus
extern "C" {
#endif
__declspec(selectany) int _forceCRTManifest;
__declspec(selectany) int _forceMFCManifest;
__declspec(selectany) int _forceAtlDllManifest;
__declspec(selectany) int _forceCRTManifestRTM;
__declspec(selectany) int _forceMFCManifestRTM;
__declspec(selectany) int _forceAtlDllManifestRTM;
#ifdef __cplusplus
}
#endif
#endi 
```

`b2`具有设置 cxxflags 的选项，尽管它们似乎不尊重我的`/FI`编译选项来使用标头并强制正确的运行时。我假设他们正在使用其他东西。我想 boost 不使用 msvc 标志？

我想`8.0.50727.762`专门编译 boost 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:27:54.753

显然 bjam 对哪些标志有前导`--`破折号很挑剔。

```
bjam ^
    toolset=msvc-8.0 ^
    link=static ^
    cxxflags=/FI"C:/boost_1_44_0/sxs_header.h" ^
    --with-thread ^
    --with-date_time ^
    --with-system ^
    -d2 
```

将产生正确的编译器标志：

```
file bin.v2\libs\thread\build\msvc-8.0\release\link-static\threading-multi\win32\thread.obj.rsp
"libs\thread\src\win32\thread.cpp"
 -Fo"bin.v2\libs\thread\build\msvc-8.0\release\link-static\threading-multi\win32\thread.obj"
    -TP
 /O2
 /Ob2
 /W3
 /GR
 /MD
 /Zc:forScope
 /Zc:wchar_t
 /wd4675
 /EHs
 /FIC:/boost_1_44_0/sxs_header.h
 -c

-DBOOST_ALL_NO_LIB=1

-DBOOST_THREAD_BUILD_LIB=1

-DNDEBUG

"-I."

compile-c-c++ bin.v2\libs\thread\build\msvc-8.0\release\link-static\threading-multi\win32\thread.obj

    call "C:\Program Files (x86)\Microsoft Visual Studio 8\VC\vcvarsall.bat" x86 >nul
cl /Zm800 -nologo @"bin.v2\libs\thread\build\msvc-8.0\release\link-static\threading-multi\win32\thread.objp"

thread.cpp 
```

您可以通过创建一个测试应用程序来验证这一点，该应用程序使用需要 boost 来链接的东西，然后检查中间目录中的清单文件。

```
<?xml version='1.0' encoding='UTF-8' standalone='yes'?>
<assembly xmlns='urn:schemas-microsoft-com:asm.v1' manifestVersion='1.0'>
  <dependency>
    <dependentAssembly>
      <assemblyIdentity type='win32' name='Microsoft.VC80.CRT' version='8.0.50727.762' processorArchitecture='x86' publicKeyToken='1fc8b3b9a1e18e3b' />
    </dependentAssembly>
  </dependency>
</assembly> 
```

您应该只看到`assemblyIdentity`具有正确版本的那个，否则您通常会有一对更高的数字。

# c# - 计算一个字符串的所有可能组合，有一个扭曲

> ID：15103545
> 
> 赞同：4
> 
> 时间：2013-02-27T03:13:58.440
> 
> 标签：c#, algorithm

我试图允许用户在文本框中输入文本，并让程序生成它的所有可能组合，除了最少 3 个字符和最多 6 个字符。我不需要像“as”这样的无用词， 'a'、'i'、'to' 等使我的数组变得混乱。我还将根据字典检查每个组合，以确保它是一个真实的单词。

我有完整的字典（精心生成，[这里有一个链接作为](http://pastebin.com/V9ZWsPX4)回报（警告：巨大的加载时间（对我来说）！）

无论如何，如果用户输入“ABCDEF”（没有特别的顺序），我怎么能生成，例如：

```
'ABC'
'BAC'
'CAB'
...
'ABD'
'ABE'
'ABF' 
```

等等......每一种可能的组合，不管什么顺序？我知道这些组合的数量很多，但只需要计算一次，所以我不太担心。

我发现代码示例可以递归地查找固定宽度字符串（ABCDEF、ABCDFE ... ACDBFE 等）的组合（不是排列，我不需要那些）。他们没有做我需要的事情，我什至不知道从哪里开始这个项目。

这不是家庭作业，它开始是我的一个个人项目，它逐渐占据了我的生活，解决了一个如此简单的问题......我不敢相信我无法解决这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:21:47.360

听起来你在描述[Power Set](http://www.mathsisfun.com/sets/power-set.html)

这是我在我的个人图书馆周围的一个实现：

```
// Helper method to count set bits in an integer
public static int CountBits(int n)
{
    int count = 0;
    while (n != 0)
    {
        count++;
        n &= (n - 1);
    }
    return count;
}

public static IEnumerable<IEnumerable<T>> PowerSet<T>(
    IEnumerable<T> src, 
    int minSetSize = 0, 
    int maxSetSize = int.MaxValue)
{
    // we want fast random access to the source, so we'll
    // need to ToArray() it
    var cached = src.ToArray();
    var setSize = Math.Pow(2, cached.Length);
    for(int i=0; i < setSize; i++)
    {
        var subSetSize = CountBits(i);
        if(subSetSize < minSetSize || 
           subSetSize > maxSetSize)
        {
            continue;
        }
        T[] set = new T[subSetSize];

        var temp = i;
        var srcIdx = 0;
        var dstIdx = 0;
        while(temp > 0)
        {
            if((temp & 0x01) == 1)
            {
                set[dstIdx++] = cached[srcIdx];
            }
            temp >>= 1;
            srcIdx++;            
        }
        yield return set;
    }
    yield break;
} 
```

还有一个快速测试台：

```
void Main()
{
    var src = "ABCDEF";
    var combos = PowerSet(src, 3, 6);

    // hairy joins for great prettiness
    Console.WriteLine(
        string.Join(" , ", 
            combos.Select(subset => 
                string.Concat("[", 
                    string.Join(",", subset) , "]")))
    );
} 
```

输出：

```
[A,B,C] , [A,B,D] , [A,C,D] , [B,C,D] , [A,B,C,D] , [A,B,E] , [A,C,E] , [B,C,E] , [A,B,C,E] , 
[A,D,E] , [B,D,E] , [A,B,D,E] , [C,D,E] , [A,C,D,E] , [B,C,D,E] , [A,B,C,D,E] , [A,B,F] , 
[A,C,F] , [B,C,F] , [A,B,C,F] , [A,D,F] , [B,D,F] , [A,B,D,F] , [C,D,F] , [A,C,D,F] , 
[B,C,D,F] , [A,B,C,D,F] , [A,E,F] , [B,E,F] , [A,B,E,F] , [C,E,F] , [A,C,E,F] , [B,C,E,F] , 
[A,B,C,E,F] , [D,E,F] , [A,D,E,F] , [B,D,E,F] , [A,B,D,E,F] , [C,D,E,F] , [A,C,D,E,F] , 
[B,C,D,E,F] , [A,B,C,D,E,F] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:28:10.103

假设，您还想要“AAB”之类的东西，您的一组字母的“叉积”应该是它。

生成可以像 LINQ 一样简单：

```
 string myset = "ABCDE";
            var All = (from char l1 in myset 
                   from char l2 in myset 
                   from char l3 in myset 
                   select new string(new char[] { l1, l2, l3})).ToList(); 
```

注意：构造许多字符串和字符数组**并不快**。您可能希望用自定义类替换新字符串和新字符 []，如下所示：

```
select new MyCustomClass(l1, l2, l3).ToList(); 
```

如果您不想要“AAB”（或“EEL”）之类的东西，那么我会将您指向维基百科的“组合”。

要从固定长度变为“从 3 到 6 的任何长度”，请加入多个集合，如果限制是动态的，则使用循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T03:29:06.050

最好的方法是使用 for 循环并将每个字符从 int 转换为 char 并将它们连接在一起形成一个字符串。

例如：

```
for(int i = 0; i < 26; i++)
{
    Console.WriteLine((char)i + 'A');        
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T03:35:32.560

从这个[链接](http://blog.noldorin.com/2010/05/combinatorics-in-csharp/)（在麻省理工学院许可下）

```
using System;
using System.Collections.Generic;
using System.Diagnostics;

// Copyright (c) 2010 Alex Regueiro
// Licensed under MIT license, available at <http://www.opensource.org/licenses/mit-license.php>.
// Published originally at <http://blog.noldorin.com/2010/05/combinatorics-in-csharp/>.
// Version 1.0, released 22nd May 2010.
public static class CombinatoricsUtilities
{
    // Error messages
    private const string errorMessageValueLessThanZero = "Value must be greater than zero, if specified.";
    private const string errorMessagesIndicesListInvalidSize = "List of indices must have same size as list of elements.";

    /// <summary>
    /// Gets all permutations (of a given size) of a given list, either with or without reptitions.
    /// </summary>
    /// <typeparam name="T">The type of the elements in the list.</typeparam>
    /// <param name="list">The list of which to get permutations.</param>
    /// <param name="action">The action to perform on each permutation of the list.</param>
    /// <param name="resultSize">The number of elements in each resulting permutation; or <see langword="null"/> to get
    /// premutations of the same size as <paramref name="list"/>.</param>
    /// <param name="withRepetition"><see langword="true"/> to get permutations with reptition of elements;
    /// <see langword="false"/> to get permutations without reptition of elements.</param>
    /// <exception cref="ArgumentNullException"><paramref name="list"/> is <see langword="null"/>. -or-
    /// <paramref name="action"/> is <see langword="null"/>.</exception>
    /// <exception cref="ArgumentException"><paramref name="resultSize"/> is less than zero.</exception>
    /// <remarks>
    /// The algorithm performs permutations in-place. <paramref name="list"/> is however not changed.
    /// </remarks>
    public static void GetPermutations<T>(this IList<T> list, Action<IList<T>> action, int? resultSize = null,
        bool withRepetition = false)
    {
        if (list == null)
            throw new ArgumentNullException("list");
        if (action == null)
            throw new ArgumentNullException("action");
        if (resultSize.HasValue && resultSize.Value <= 0)
            throw new ArgumentException(errorMessageValueLessThanZero, "resultSize");

        var result = new T[resultSize.HasValue ? resultSize.Value : list.Count];
        var indices = new int[result.Length];
        for (int i = 0; i < indices.Length; i++)
            indices[i] = withRepetition ? -1 : i - 1;

        int curIndex = 0;
        while (curIndex != -1)
        {
            indices[curIndex]++;
            if (indices[curIndex] == list.Count)
            {
                indices[curIndex] = withRepetition ? -1 : curIndex - 1;
                curIndex--;
            }
            else
            {
                result[curIndex] = list[indices[curIndex]];
                if (curIndex < indices.Length - 1)
                    curIndex++;
                else
                    action(result);
            }
        }
    }

    /// <summary>
    /// Gets all combinations (of a given size) of a given list, either with or without reptitions.
    /// </summary>
    /// <typeparam name="T">The type of the elements in the list.</typeparam>
    /// <param name="list">The list of which to get combinations.</param>
    /// <param name="action">The action to perform on each combination of the list.</param>
    /// <param name="resultSize">The number of elements in each resulting combination; or <see langword="null"/> to get
    /// premutations of the same size as <paramref name="list"/>.</param>
    /// <param name="withRepetition"><see langword="true"/> to get combinations with reptition of elements;
    /// <see langword="false"/> to get combinations without reptition of elements.</param>
    /// <exception cref="ArgumentNullException"><paramref name="list"/> is <see langword="null"/>. -or-
    /// <paramref name="action"/> is <see langword="null"/>.</exception>
    /// <exception cref="ArgumentException"><paramref name="resultSize"/> is less than zero.</exception>
    /// <remarks>
    /// The algorithm performs combinations in-place. <paramref name="list"/> is however not changed.
    /// </remarks>
    public static void GetCombinations<T>(this IList<T> list, Action<IList<T>> action, int? resultSize = null,
        bool withRepetition = false)
    {
        if (list == null)
            throw new ArgumentNullException("list");
        if (action == null)
            throw new ArgumentNullException("action");
        if (resultSize.HasValue && resultSize.Value <= 0)
            throw new ArgumentException(errorMessageValueLessThanZero, "resultSize");

        var result = new T[resultSize.HasValue ? resultSize.Value : list.Count];
        var indices = new int[result.Length];
        for (int i = 0; i < indices.Length; i++)
            indices[i] = withRepetition ? -1 : indices.Length - i - 2;

        int curIndex = 0;
        while (curIndex != -1)
        {
            indices[curIndex]++;
            if (indices[curIndex] == (curIndex == 0 ? list.Count : indices[curIndex - 1] + (withRepetition ? 1 : 0)))
            {
                indices[curIndex] = withRepetition ? -1 : indices.Length - curIndex - 2;
                curIndex--;
            }
            else
            {
                result[curIndex] = list[indices[curIndex]];
                if (curIndex < indices.Length - 1)
                    curIndex++;
                else
                    action(result);
            }
        }
    }

    /// <summary>
    /// Gets a specific permutation of a given list.
    /// </summary>
    /// <typeparam name="T">The type of the elements in the list.</typeparam>
    /// <param name="list">The list to permute.</param>
    /// <param name="indices">The indices of the elements in the original list at each index in the permuted list.
    /// </param>
    /// <returns>The specified permutation of the given list.</returns>
    /// <exception cref="ArgumentNullException"><paramref name="list"/> is <see langword="null"/>. -or-
    /// <paramref name="indices"/> is <see langword="null"/>.</exception>
    /// <exception cref="ArgumentException"><paramref name="indices"/> does not have the same size as
    /// <paramref name="list"/>.</exception>
    public static IList<T> Permute<T>(this IList<T> list, IList<int> indices)
    {
        if (list == null)
            throw new ArgumentNullException("list");
        if (indices == null)
            throw new ArgumentNullException("indices");
        if (list.Count != indices.Count)
            throw new ArgumentException(errorMessagesIndicesListInvalidSize, "indices");

        var result = new T[list.Count];
        for (int i = 0; i < result.Length; i++)
            result[i] = list[indices[i]];
        return result;
    }
} 
```

# iphone - iOS 视图在第一次运行时为空

> ID：15103547
> 
> 赞同：0
> 
> 时间：2013-02-27T03:14:11.687
> 
> 标签：iphone, ios, uiview, uiinterfaceorientation

`NSLog`问题是，当我第一次运行它时，我的应用程序不会显示里面的日志。但是当我将方向更改为横向时，文本出现了。顺便说一下，应用程序的默认视图是纵向的。

`viewDidLoad:`

```
- (void)viewDidLoad
{
    [super viewDidLoad];
} 
```

但是如果我在我的`viewDidLoad:`

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIInterfaceOrientation toInterfaceOrientation = [[UIApplication sharedApplication] statusBarOrientation];
    NSTimeInterval duration = 0.0;

    [self willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];
} 
```

它可以顺利地显示日志。

问题是，我是否以正确的方式显示日志？

我的`willAnimateRotationToInterfaceOrientation:toInterfaceOrientation:`

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    CGFloat height = CGRectGetHeight([[UIScreen mainScreen] bounds]);
    CGFloat width = CGRectGetWidth([[UIScreen mainScreen] bounds]);

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        switch (toInterfaceOrientation) {
            case UIInterfaceOrientationPortrait:
                NSLog(@"iPhone/Portrait");
                break;

            case UIInterfaceOrientationLandscapeLeft:
                NSLog(@"iPhone/Landscape/Left");
                break;

            case UIInterfaceOrientationLandscapeRight:
                NSLog(@"iPhone/Landscape/Right");
                break;

            default:
                break;
        }
    }

    else {
        switch (toInterfaceOrientation) {
            case UIInterfaceOrientationPortrait:
                NSLog(@"iPad/Portrait");
                break;

            case UIInterfaceOrientationPortraitUpsideDown:
                NSLog(@"iPad/Upside Down");
                break;

            case UIInterfaceOrientationLandscapeLeft:
                NSLog(@"iPad/Landscape/Left");
                break;

            case UIInterfaceOrientationLandscapeRight:
                NSLog(@"iPad/Landscape/Right");
                break;

            default:
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:15:09.460

Scott Roth 的回答成功了：[willAnimateRotationToInterfaceOrientation not called on popViewControllerAnimated](https://stackoverflow.com/questions/3595471/willanimaterotationtointerfaceorientation-not-called-on-popviewcontrolleranimate)

添加`updateLayoutForNewOrientation:`

```
- (void)updateLayoutForNewOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    CGFloat height = CGRectGetHeight([[UIScreen mainScreen] bounds]);
    CGFloat width = CGRectGetWidth([[UIScreen mainScreen] bounds]);

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation)) {
            NSLog(@"Portrait");
        }

        else if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {
            NSLog(@"Landscape");
        }
    }

    else {
        if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation)) {
            NSLog(@"Portrait");
        }

        else if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {
            NSLog(@"Landscape");
        }
    }
} 
```

将我的更改`willAnimateRotationToInterfaceOrientation:`为

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [self updateLayoutForNewOrientation:toInterfaceOrientation];
} 
```

并添加`[self updateLayoutForNewOrientation:[self interfaceOrientation]];`到`viewDidLoad:`

# c# - 当仅为分配给委托而创建时，使用方法或只读委托是最佳选择吗？

> ID：15103549
> 
> 赞同：1
> 
> 时间：2013-02-27T03:14:25.193
> 
> 标签：c#, delegates, readonly

readonlyAction 和 Method 都必须定义一次，但假设我将多次分配给 variableAction：

```
Action variableAction;
readonly Action readonlyAction;
void Method() {} 
```

哪个更适合任务、只读委托或方法？我认为在一种情况下可能会发生一些优化，但也许还有语义问题需要考虑？

```
variableAction = readonlyAction;
variableAction = Method; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:38:19.543

如果您是设置方法或操作（预编译）的人（如果您不这样做，您可能不会问这个），那么我会假设在性能方面没有很大差异。但是，如果你想要确切的答案，你应该看看 IL。无论如何，编译器可能只是为静态操作创建一个方法或内联。话虽如此，那时我会更关注可读性。试着想象一个新的开发者试图阅读代码，如果一种方式使它更难阅读，那么使用另一种方式......我个人可能会倾向于一种方法。可能应该为以下场景保留操作：

否则，`Action`可能是在构造时传入的东西，所以你必须使用，`Action`因为无论如何你直到运行时才知道实现。但是，我怀疑这就是你问的原因，因为`Method`无论如何在这种情况下使用是不可能的。

# c - 了解这行 C 代码的声明、malloc 和其他部分

> ID：15103550
> 
> 赞同：-3
> 
> 时间：2013-02-27T03:14:30.037
> 
> 标签：c

我刚开始使用 C，遇到了一行我不明白的代码。有人可以解释它的作用吗？

```
short int * work = (short int *) malloc(1000*16); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T03:17:25.730

你不明白什么？代码声明了`short int*`一个指向一个或多个 16 位（*至少*16 位）有符号整数的指针。它将它初始化为由 返回的指针`malloc`，这是一块足够大以容纳`1000 * 16`字节的内存。

现在，他们为什么使用`1000 * 16`? 我不知道。通常，您会按照`num_elements * sizeof(element)`，即 ，进行分配`num_elements * sizeof(short int)`。

更规范地说，`num_elements * sizeof(*work)`如果您更改指针的类型，请使用这样您的代码不会中断。

另请注意，[将 malloc 的返回值转换为 C 是一个坏主意](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T03:21:01.430

让我们分解一下：

*   `short int * work`

这声明了一个指向 的指针`int`，称为`work`。它被声明为 a `short int`，这意味着它必须是：

*   长度至少为 16 位（或两个 8 位字节），并且
*   不比平原大`int`。

通常，当 a`int`可能太大时，使用短裤。维基百科在此处对 C 数据类型进行了出色的细分： [http ://en.wikipedia.org/wiki/C_data_types](http://en.wikipedia.org/wiki/C_data_types)

*   `= (short int *) malloc(1000*16);`

这会分配 1000*16 字节，并将其分配给指针。`malloc()` [您可以在`malloc()`手册页](http://www.manpagez.com/man/3/malloc/)中阅读更多信息。这条特定的行是不良风格的一个例子，因为：

*   没有必要强制转换 malloc 的结果 - 请参阅[Do I cast the result of malloc?](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)
*   因为`short int`标准中没有定义 a 的大小，所以不能保证这条线会产生任何特定数量的`short int`s。

最好改为写：

```
short int * work = malloc(sizeof(short int) * NUMBER_OF_SHORT_INTS_REQUIRED); 
```

或者，甚至更好：

```
short int * work = malloc(sizeof(work[0]) * NUMBER_OF_SHORT_INTS_REQUIRED); 
```

`NULL`在对`work`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T03:23:34.763

您正在使用 malloc 保留（动态 = 在运行时）1000 * 16 = 16000 字节。使用 malloc 得到的是一个指针，指向已保留的 16000 个字节的第一个字节的地址。您将结果存储到名为“work”的短整数的指针中。通常，每个短整数的大小为 2 个字节，因此，基本上 malloc 为 8000 个短整数保留了空间（假设它成功了）。

如果 malloc 未能分配空间，则返回 NULL。

最后，强制转换 malloc 返回的内容是不好的做法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T04:23:51.963

在您的标题中看到“声明”。

他们有一个非常好的复杂声明网站。[这里](http://cdecl.org/)

# javascript - Ajax 将 javascript 日期发布为 UTC 或服务器时间

> ID：15103551
> 
> 赞同：3
> 
> 时间：2013-02-27T03:14:30.890
> 
> 标签：javascript, asp.net-mvc, json, datetime, utc

我正在尝试将创建的日期发布到 ASP.Net MVC 控制器，而不用序列化程序修改日期。我正在寻找某种方法在客户端上执行此操作。

日期正在构建如下：

```
var priceDate = new Date(name.split("-")[1], name.split("-")[0]-1, 1); 
```

日期是有效的，问题是序列化程序正在添加我不想要的时区偏移量。javascript 日期应该是 UTC，但这似乎是不可能的。

这个问题在各地以不同的方式表达，各种解决方案似乎都太过分了。是否可以制作 javascript 日期 UTC 或没有来自客户端的时区信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-28T03:15:56.173

有[toISOString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)函数以标准化格式返回日期，并且始终执行零时区。

服务器接受本地区域中的日期，因此您需要执行 next `date.ToUniversalTime()`。

所以 javascript`date.toISOString()`等于 c# `date.ToUniversalTime()`。

# javascript - 使用 javascript 删除 iframe

> ID：15103552
> 
> 赞同：19
> 
> 时间：2013-02-27T03:14:33.370
> 
> 标签：javascript, html, regex, iframe

我正在尝试删除文档中的 iFrame 标签。这就是功能。但它似乎不起作用。这是我的示例代码

```
<script>
function removeiframe() {
            alert("Hello Lovely World");
            var markup = document.body.innerHTML;

            var filtered=markup.replace(/(<iframe.*?>.*?<\/iframe>)/g,"");
            alert("he: " + markup);
//markup = Regex.Replace(markup, @"<script.*?/script>", "", RegexOptions.IgnoreCase);
//markup = Regex.Replace(markup, @"<iframe.*?/iframe>", "", RegexOptions.IgnoreCase);
markup = filtered;
document.body.innerHTML = markup + "<hr><hr>HELLO";
        }
</script>
<body onload="removeiframe()">

        <iframe marginheight="0" src="http://www.hotelanswer.com" marginwidth="0" frameborder="0" height="180" scrolling="no" width="210"></iframe><br>
</body> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-27T03:23:53.400

这是一个您可以运行的脚本，它将从您的文档中删除所有 iframe。这是这个工作的一个例子：http: [//jsfiddle.net/5hh9H/](http://jsfiddle.net/5hh9H/)

```
var iframes = document.querySelectorAll('iframe');
for (var i = 0; i < iframes.length; i++) {
    iframes[i].parentNode.removeChild(iframes[i]);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T06:24:20.977

您没有提到为什么需要在文档中删除 iframe。

我这样做是为了防止点击劫持攻击。但它在任何情况下都有效。

你需要这个：

```
<style id="defendClickjack" type="text/css">body{display:none;}</style> 
```

进而

```
<script type="text/javascript">
    if (self === top) {
        var defendClickjack = document.getElementById("defendClickjack");
        antiClickjack.parentNode.removeChild(defendClickjack);
    }
    else {
        top.location = self.location;
    }
</script> 
```

您可以在这里找到更多信息：

*   [https://www.owasp.org/index.php/Clickjacking](https://www.owasp.org/index.php/Clickjacking)
*   [http://en.wikipedia.org/wiki/Clickjacking](http://en.wikipedia.org/wiki/Clickjacking)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-01-13T12:34:42.233

纯Javascript代码：

```
document.querySelectorAll('iframe').forEach(
  function(elem){
    elem.parentNode.removeChild(elem);
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-04-16T18:11:27.600

如果您只想在移动设备上执行此操作，请在此处对[Matt 的](https://stackoverflow.com/a/15103641/15626554)原始示例进行轻微改进。对我来说，用例是我在我的网站上使用嵌入的 Vimeo 来创建视频背景。我需要放弃移动设备上的视频以获得性能。这可以完成工作。

```
$( document ).ready(function() {      
    let isMobile = window.matchMedia("only screen and (max-width:650px)").matches;
        if (isMobile) {
            var iframes = document.querySelectorAll('iframe');
            for (var i = 0; i < iframes.length; i++) {
            iframes[i].parentNode.removeChild(iframes[i]);
            }
        }
    }); 
```

s.ermakovich 关于代码无法在多个 iframe 上正常工作的评论并不是“错误”，而是有点误导......并且取决于具体情况。我的 Vimeo iFrame 有一个子框架在 DOM 完成后继续发出请求。马特的代码**确实**摧毁了两者。

在我的情况下，我的***第二个 iframe***是***parent***的***直接孩子***。如果页面上有多个 iframe 不是同一父级的直接子级，并且您只是复制并粘贴该代码，则该代码可能不起作用。在这种情况下，您需要更具体：

 **如果您的页面上有多个 iFrame，您可以为查询选择器添加特异性。您根据情况选择是否要使用 querySelectorAll()，但我认为没有任何理由不能使用 querySelector()。

```
document.querySelector(".foo > bar iframe")
document.querySelector("foo bar > iframe") 
```

如果你有一个 iframe 网格，可能有几个嵌入的视频连续

```
document.querySelectorAll("foo > .bar > iframe") 
```

或者可能来自相同的数据源更好......

```
document.querySelectorAll("iframe[data-src]") 
```

如果我在某个地方错了，请有人纠正我

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T03:20:17.653

您应该将 iframe 放在 div 元素内。

```
<div id="kk">
  //your iframe
</div> 
```

然后使用 jQuery 删除 iframe。

```
$('#kk').click(function(){
   $(this).html("");
}); 
```

这是一个可能的解决方案。**

# java - 油漆（）和油漆组件（）之间的区别？

> ID：15103553
> 
> 赞同：14
> 
> 时间：2013-02-27T03:14:43.750
> 
> 标签：java, swing, paint, paintcomponent

我已经尝试过这方面的教程，但我仍然不太明白。基本上我的问题是哪种方法更好，为什么？我应该使用`paint`or`paintComponent`吗？

请尽量保持答案简单，谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-27T03:39:03.150

`paint()`从方法的文档中引用

> 该方法实际上将绘画工作委托给了三个受保护的方法：paintComponent、paintBorder 和paintChildren。... 只想专门化 UI（外观和感觉）委托的绘制方法的子类应该重写paintComponent。

看起来该`paint()`方法实际上绘制了组件，包括边框和子项。如果您只想自定义组件的外观，不包括边框和子项，则使用`paintComponent()`.

[http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paint(java.awt.Graphics)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paint(java.awt.Graphics))

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-27T03:48:07.593

一般来说，在 Swing 中绘制时，建议覆盖`paintComponent`.

有很多原因，其中一个是`paintComponent`在底层绘制，这意味着您不会意外擦除在绘制过程中渲染的任何组件 - 这种情况经常发生在在这里发帖的人身上。

有很多次你可能需要覆盖`paint`，但我总是鼓励你先尝试让它工作`paintComponent`。

查看

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)（+1 到垃圾神）

# c++ - 从同一文件中读取字符串和整数

> ID：15103557
> 
> 赞同：0
> 
> 时间：2013-02-27T03:15:00.487
> 
> 标签：c++, string

给定输入形式为

```
fifteen,7,fourth-four,2,1,six
66,eight-six,99,eighteen
6,5,4,3,2,1 
```

我可以用什么将其读入我可以解析的格式？目标是能够对数字进行排序，然后按顺序将它们以与给我相同的格式打印出来。例如，以下内容应打印为

```
 1,2,six,7,fifteen,forty-four
    eighteen,66,eighty-six,99
    1,2,3,4,5,6 
```

我对应该如何进行排序有一个想法，我只是在找出读取输入的最佳方式时遇到了麻烦。目前，我正在这样做：

```
#include <iostream>
#include <string>
using namespace std;

int main() {
    char word;
    char arr[20];

    int count = 0;

    while (cin >> word) {
        if (word == '\n') {
            cout << "Newline detected.";
        }
        cout << "Character at: " << count << " is " << word << endl;
        count++;
    }
} 
```

这不起作用，因为从来没有`\n`读入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:23:53.840

IMO 最简单的方法是使用 std::istream 的 getline 函数，将“，”作为分隔符。

例如，类似的东西。

```
char dummystr[256];
int count = 0;
while (cin.getline(dummystr, 256, ',')) {
    cout << "Character at: " << count << " is " << dummystr << endl;
    ++count;
} 
```

对于每行带有逗号分隔符的换行符分隔符（你真的应该只选择一个）：

```
char dummystr[256]; // not max size for the string
int count = 0;
while (cin.getline(dummystr, 256, '\n')) {
    std::stringstream nested(dummystr);
    char dummystr2[256];
    while (nexted.getline(dummystr2, 256, ',')) {
        cout << "Character at: " << count << " is " << dummystr << endl;
        ++count;
    }
} 
```

# r - 按年和月对年月列进行排序

> ID：15103562
> 
> 赞同：5
> 
> 时间：2013-02-27T03:15:29.250
> 
> 标签：r, date, sorting, yearmonth

我正在尝试订购存储在数据框中的一系列时间数据。格式为：

```
"%Y-%b" 
```

看起来像`"2009-Sep"`等等。

到目前为止，我已经设法找到这种方法：

```
ds[order(as.Date(ds$yearmonth, format = "%Y-%b")),] 
```

但它只按年份排序，然后按字母顺序排列月份，给我一个,`2009-Jan`等的顺序。我很困惑这不是一个容易解决的问题。`2009-Jul``2009-Jun`

请帮忙...

最佳卡斯帕

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T03:33:01.593

**包zoo**中的`as.yearmon()`函数（和`"yearmon"`类）是为这种数据设计的：

 **```
dat <- c("2009-Sep","2009-Feb","2009-Jan")
require(zoo)
d2 <- as.yearmon(dat, "%Y-%b")
> sort(d2)
[1] "Jan 2009" "Feb 2009" "Sep 2009"
> order(d2)
[1] 3 2 1
> d2[order(d2)]
[1] "Jan 2009" "Feb 2009" "Sep 2009" 
```

您当然可以在每个日期上安排一天并通过`paste0()`以下方式强迫上课，但对我来说似乎更自然：`"Date"``as.Date()``as.yearmon()`

```
> as.Date(paste0(dat, "-01"), "%Y-%b-%d")
[1] "2009-09-01" "2009-02-01" "2009-01-01" 
```

`"yearmon"`请注意，您可以通过将对象强制为 class来生成相同的结果`"as.Date"`，例如：

```
> as.Date(d2)
[1] "2009-09-01" "2009-02-01" "2009-01-01" 
```**

# php - 显示某个字段的所有结果和一个用于内部连接的其余结果

> ID：15103565
> 
> 赞同：0
> 
> 时间：2013-02-27T03:15:56.853
> 
> 标签：php, mysql, sql

我需要在创建的区域中显示商店以及下订单的日期。我创建了第三个表来加入两个已经在这里的表（商店和区域），并通过内部连接加入。首先，我得到这样的结果：

```
area name: name1
shops: shop1
date: date1

area name: name1
shops: shop2
date: date1 
```

我需要：

```
area name: name1
shops: shop1, shop2
date: date1 
```

然后我找到了一些代码并将其包含在脚本中，但它仅适用于一行（下面代码中的名称）。如果我尝试使用 elseif 获取该代码的日期，则会显示错误。代码如下。

```
<?php
include('db.php'); 
$result = mysql_query("SELECT * FROM area INNER JOIN area_join ON area.id = area_join.area_id INNER JOIN shops ON area_join.shops_id = shops.id ") or die("Error: " . mysql_error());; 
while($data = mysql_fetch_assoc($result)){
if($data['name'] != $groupname){
echo "<br><hr>Area name: ".$data['name']."<br />Shops: ";
$groupname = $data['name'];
}
echo "".$data['shop_name'].", ";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:20:08.743

你试过 group_concat 吗？（现在无法测试，但我认为是这样）

```
SELECT areaname,group_concat(shops) FROM area INNER JOIN area_join ON area.id =    area_join.area_id INNER JOIN shops ON area_join.shops_id = shops.id
Group by areaname 
```

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:18:23.457

使用`GROUP_CONCAT`，

```
SELECT  areaName,
        GROUP_CONCAT(DISTINCT shopname) shopList
FROM    area 
        INNER JOIN area_join 
            ON area.id = area_join.area_id 
        INNER JOIN shops 
            ON area_join.shops_id = shops.id 
GROUP   BY  areaName 
```

将*列名*更改为在表格中找到的原始名称。

# java - 带有 switch 方法的默认 java 方法

> ID：15103570
> 
> 赞同：-2
> 
> 时间：2013-02-27T03:16:29.580
> 
> 标签：java, switch-statement

我试图找到一个使用 switch 语句的（内置）java 方法。

为了澄清我的问题，我不是在问如何使用 Java switch 语句。我意识到我可以创建自己的方法并将 switch 语句放入其中。

我正在寻找一种在 Java 中将此类语句合并到其代码中的方法。

为了进一步澄清我的问题，我想在 Java API 中找到一个方法： [http](http://docs.oracle.com/javase/7/dofucs/api/) ://docs.oracle.com/javase/7/dofucs/api/使用 switch 语句。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T03:33:15.670

这是源代码中所有提到“switch”的 .java 文件的列表（它们中的大多数似乎都在使用 switch 语句，尽管有些似乎只是在评论中讨论它）。

[http://pastebin.com/grBqEjBE](http://pastebin.com/grBqEjBE)

但要回答最初的问题：在众多示例中，这里有一个来自`JLabel.java`：

```
 public String getAtIndex(int part, int index) {
        if (index < 0 || index >= getCharCount()) {
            return null;
        }
        switch (part) {
        case AccessibleText.CHARACTER:
            try {
                return getText(index, 1);
            } catch (BadLocationException e) {
                return null;
            }
        case AccessibleText.WORD:
            try {
                String s = getText(0, getCharCount());
                BreakIterator words = BreakIterator.getWordInstance(getLocale());
                words.setText(s);
                int end = words.following(index);
                return s.substring(words.previous(), end);
            } catch (BadLocationException e) {
                return null;
            }
        case AccessibleText.SENTENCE:
            try {
                String s = getText(0, getCharCount());
                BreakIterator sentence =
                    BreakIterator.getSentenceInstance(getLocale());
                sentence.setText(s);
                int end = sentence.following(index);
                return s.substring(sentence.previous(), end);
            } catch (BadLocationException e) {
                return null;
            }
        default:
            return null;
        }
    } 
```

这在 Java API中确实[可用。](http://docs.oracle.com/javase/6/docs/api/javax/swing/JLabel.AccessibleJLabel.html#getAtIndex%28int,%20int%29)

# angularjs - AngularJS HTML 模板/片段管理

> ID：15103574
> 
> 赞同：1
> 
> 时间：2013-02-27T03:16:45.900
> 
> 标签：angularjs, ngboilerplate

我是来自 Backbone+Marionette+Require 的 Angular 菜鸟。

如果你的应用有一堆视图和一堆指令，每个都有自己的 HTML，你把所有的 HTML 片段放在哪里？我看到的大多数示例都是将它们内联存储在它们自己的脚本标签中，或者异步加载。我喜欢 RequireJS 的一件事是模板可以存在于它们自己的文件中，但可以编译到主 JS 文件中用于生产。我假设有一个繁重的任务或类似的东西？也许是从单个文件中获取 HTML 并在构建时将它们嵌入到合并 HTML 文件中的单个脚本标签中？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T03:33:23.730

确实有一个 Grunt 任务可以做到这一点！最初由[Angular-UI Bootstrap](http://angular-ui.github.com/bootstrap)团队创建，该[`html2js`](https://github.com/joshdmiller/ng-boilerplate/blob/master/build/grunt-html2js.js)任务将获取您的模板并将它们编译成一个 JavaScript 文件（使用 angular's [`$templateCache`](http://docs.angularjs.org/api/ng.%24templateCache)），该文件可以与您的其余脚本连接以形成单个有效负载。

我还没有发布它，因为我还在添加文档，但是看看[ngBoilerplate](https://github.com/joshdmiller/ng-boilerplate)，一个 AngularJS 项目 kickstarter，在上下文中查看它。

**更新（2013 年 2 月 28 日）：**我刚刚发布了 ngBoilerplate。你可以在这里查看官方网站：http: [//bit.ly/ngBoilerplate](http://bit.ly/ngBoilerplate)。

# ios - UIButton 的 titleLabel 无法根据上下文访问

> ID：15103575
> 
> 赞同：0
> 
> 时间：2013-02-27T03:16:49.290
> 
> 标签：ios

在我的一门课上，我可以跑

```
UIButton *testButton = [UIButton buttonWithType:UIButtonTypeCustom];
NSLog(@"testButton's titleLabel is %@", testButton.titleLabel); 
```

它打印 titleLabel 就好了：

```
2013-02-26 19:11:49.223 Facebook[82876:c07] testButton's titleLabel is <UIButtonLabel: 0x1aad39f0; frame = (0 0; 0 0); clipsToBounds = YES; hidden = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1aad3a90>> 
```

然而，在测试期间的一个类中，`EXC_BAD_ACCESS`当我尝试访问 testButton 的 titleLabel 时，即使我使用的是相同的两行代码。

有任何想法吗？

# python - 在 wxPython 中拖动和复制图像

> ID：15103576
> 
> 赞同：3
> 
> 时间：2013-02-27T03:16:51.343
> 
> 标签：python, drag-and-drop, copy, wxpython

我正在尝试从 wxPython 示例中修改 DragImage 演示，以便拖动图像会产生一个可拖动的新副本，而不是仅仅移动图像*，*而保留原始的“源”图像。一个不错的类比是原始图像就像一组可供选择的小部件；单击并拖动其中任何一个都会生成一个小部件，您可以将其放置在任何地方（这可以多次完成），而源小部件仍然存在。

```
import os
import glob

import wx
import wx.lib.scrolledpanel as scrolled

class MainWindow(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent)
        frm_pnl = MainPanel(self)

        self.Show()

class DragShape:
    def __init__(self, bmp):
        self.bmp = bmp
        self.pos = (0,0)
        self.shown = True
        self.text = None
        self.fullscreen = False

    def HitTest(self, pt):
        rect = self.GetRect()
        return rect.InsideXY(pt.x, pt.y)

    def GetRect(self):
        #return wx.Rect(self.pos[0], self.pos[1], self.bmp.GetWidth(), self.bmp.GetHeight())
        return wx.Rect(self.pos[0], self.pos[1], self.bmp.GetWidth()/2, self.bmp.GetHeight()/2)

    def Draw(self, dc, op = wx.COPY):
        if self.bmp.Ok():
            memDC = wx.MemoryDC()
            memDC.SelectObject(self.bmp)

            #dc.Blit(self.pos[0], self.pos[1],
            #        self.bmp.GetWidth(), self.bmp.GetHeight(),
            #        memDC, 0, 0, op, True)

            dc.Blit(self.pos[0], self.pos[1],
                    self.bmp.GetWidth()/2, self.bmp.GetHeight()/2,
                    memDC, 0, 0, op, True)

            return True
        else:
            return False

class MainPanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent, -1, size = (900, 700))

        self.shapes = []

        #panel for mechanisms
        mechPnl = MechanismPanel(self)

        mechSzr = wx.BoxSizer(wx.HORIZONTAL)
        mechSzr.Add(mechPnl, 1)

        selfSizer = wx.BoxSizer(wx.VERTICAL)
        selfSizer.Add(mechSzr, 0, wx.EXPAND)
        selfSizer.Layout()
        self.SetSizer(selfSizer)

        self.dragImage = None
        self.dragShape = None
        self.hiliteShape = None

        self.SetCursor(wx.StockCursor(wx.CURSOR_ARROW))

        #self.Bind(wx.EVT_ERASE_BACKGROUND, self.OnEraseBackground)
        self.Bind(wx.EVT_PAINT, self.OnPaint)
        mechPnl.Bind(wx.EVT_LEFT_DOWN, self.OnLeftDown)
        mechPnl.Bind(wx.EVT_LEFT_UP, self.OnLeftUp)
        mechPnl.Bind(wx.EVT_MOTION, self.OnMotion)
        mechPnl.Bind(wx.EVT_LEAVE_WINDOW, self.OnLeaveWindow)

    # The mouse is moving
    def OnMotion(self, evt):
        print "On motion!"

        # Ignore mouse movement if we're not dragging.
        if not self.dragShape or not evt.Dragging() or not evt.LeftIsDown():
            return

        # if we have a shape, but haven't started dragging yet
        if self.dragShape and not self.dragImage:

            # only start the drag after having moved a couple pixels
            tolerance = 2
            pt = evt.GetPosition()
            dx = abs(pt.x - self.dragStartPos.x)
            dy = abs(pt.y - self.dragStartPos.y)
            if dx <= tolerance and dy <= tolerance:
                return

            # refresh the area of the window where the shape was so it
            # will get erased.
            self.dragShape.shown = False
            self.RefreshRect(self.dragShape.GetRect(), True)
            self.Update()

            if self.dragShape.text:
                self.dragImage = wx.DragString(self.dragShape.text,
                                              wx.StockCursor(wx.CURSOR_HAND))
            else:
                self.dragImage = wx.DragImage(self.dragShape.bmp,
                                             wx.StockCursor(wx.CURSOR_HAND))

            hotspot = self.dragStartPos - self.dragShape.pos
            self.dragImage.BeginDrag(hotspot, self, self.dragShape.fullscreen)

            self.dragImage.Move(pt)
            self.dragImage.Show()

        # if we have shape and image then move it, posibly highlighting another shape.
        elif self.dragShape and self.dragImage:
            onShape = self.FindShape(evt.GetPosition())
            unhiliteOld = False
            hiliteNew = False

            # figure out what to hilite and what to unhilite
            if self.hiliteShape:
                if onShape is None or self.hiliteShape is not onShape:
                    unhiliteOld = True

            if onShape and onShape is not self.hiliteShape and onShape.shown:
                hiliteNew = True

            # if needed, hide the drag image so we can update the window
            if unhiliteOld or hiliteNew:
                self.dragImage.Hide()

            if unhiliteOld:
                dc = wx.ClientDC(self)
                self.hiliteShape.Draw(dc)
                self.hiliteShape = None

            if hiliteNew:
                dc = wx.ClientDC(self)
                self.hiliteShape = onShape
                self.hiliteShape.Draw(dc, wx.INVERT)

            # now move it and show it again if needed
            self.dragImage.Move(evt.GetPosition())
            if unhiliteOld or hiliteNew:
                self.dragImage.Show()

    # Left mouse button up.
    def OnLeftUp(self, evt):
        print "On left up!"

        if not self.dragImage or not self.dragShape:
            self.dragImage = None
            self.dragShape = None
            return

        # Hide the image, end dragging, and nuke out the drag image.
        self.dragImage.Hide()
        self.dragImage.EndDrag()
        self.dragImage = None

        if self.hiliteShape:
            self.RefreshRect(self.hiliteShape.GetRect())
            self.hiliteShape = None

        # reposition and draw the shape

        # Note by jmg 11/28/03 
        # Here's the original:
        #
        # self.dragShape.pos = self.dragShape.pos + evt.GetPosition() - self.dragStartPos
        #
        # So if there are any problems associated with this, use that as
        # a starting place in your investigation. I've tried to simulate the
        # wx.Point __add__ method here -- it won't work for tuples as we
        # have now from the various methods
        #
        # There must be a better way to do this :-)
        #

        self.dragShape.pos = (
            self.dragShape.pos[0] + evt.GetPosition()[0] - self.dragStartPos[0],
            self.dragShape.pos[1] + evt.GetPosition()[1] - self.dragStartPos[1]
            )

        self.dragShape.shown = True
        self.RefreshRect(self.dragShape.GetRect())
        self.dragShape = None

    # Fired whenever a paint event occurs
    def OnPaint(self, evt):
        print "On paint!"

        dc = wx.PaintDC(self)
        self.PrepareDC(dc)
        self.DrawShapes(dc)

    # Left mouse button is down.
    def OnLeftDown(self, evt):
        print "On left down!"

        # Did the mouse go down on one of our shapes?
        shape = self.FindShape(evt.GetPosition())

        # If a shape was 'hit', then set that as the shape we're going to
        # drag around. Get our start position. Dragging has not yet started.
        # That will happen once the mouse moves, OR the mouse is released.
        if shape:
            self.dragShape = shape
            self.dragStartPos = evt.GetPosition()

    # Go through our list of shapes and draw them in whatever place they are.
    def DrawShapes(self, dc):
        for shape in self.shapes:
            if shape.shown:
                shape.Draw(dc)

    # This is actually a sophisticated 'hit test', but in this
    # case we're also determining which shape, if any, was 'hit'.
    def FindShape(self, pt):
        for shape in self.shapes:
            if shape.HitTest(pt):
                return shape
        return None

    # Clears the background, then redraws it. If the DC is passed, then
    # we only do so in the area so designated. Otherwise, it's the whole thing.
    def OnEraseBackground(self, evt):
        dc = evt.GetDC()
        if not dc:
            dc = wx.ClientDC(self)
            rect = self.GetUpdateRegion().GetBox()
            dc.SetClippingRect(rect)
        self.TileBackground(dc)

    # tile the background bitmap
    def TileBackground(self, dc):
        sz = self.GetClientSize()
        w = self.bg_bmp.GetWidth()
        h = self.bg_bmp.GetHeight()

        x = 0

        while x < sz.width:
            y = 0

            while y < sz.height:
                dc.DrawBitmap(self.bg_bmp, x, y)
                y = y + h

            x = x + w

    # We're not doing anything here, but you might have reason to.
    # for example, if you were dragging something, you might elect to
    # 'drop it' when the cursor left the window.
    def OnLeaveWindow(self, evt):
        pass

class MechanismPanel(scrolled.ScrolledPanel):
    def __init__(self, parent):
        scrolled.ScrolledPanel.__init__(self, parent, -1, size = (400, 140))
        self.SetBackgroundColour((211, 211, 211))

        mechPnlSzr = wx.BoxSizer(wx.HORIZONTAL)

        os.chdir("./figures")
        position = 50
        for file in glob.glob("icon*.png"):
            print file
            imgIcon = wx.Image(file, wx.BITMAP_TYPE_PNG).ConvertToBitmap()
            staticBitmap = wx.StaticBitmap(self, -1, imgIcon, (position, 50), (50, 50))
            shape = DragShape(staticBitmap.GetBitmap())
            shape.pos = (position, 50)
            position = position + 100
            shape.fullscreen = True
            parent.shapes.append(shape)
            mechPnlSzr.Add(staticBitmap, 0, wx.FIXED, border = 20)

        self.SetSizer(mechPnlSzr)

        self.SetAutoLayout(1)
        self.SetupScrolling()#scroll_y = False)

app = wx.App(False)
frame = MainWindow(None, "Trading Client")
app.MainLoop() 
```

# r - googleVis LineChart中的日期x轴

> ID：15103580
> 
> 赞同：5
> 
> 时间：2013-02-27T03:17:30.130
> 
> 标签：r, datetime, google-visualization

我一直在尝试让 x 轴支持使用`gvisLineChart`. 麻烦的是，它总是被解释为一个字符。

```
library(googleVis)
dat <- data.frame(time=as.POSIXct(c("2012-09-23 12:00:00", "2012-04-25 18:00:00", "2011-03-01 02:34:00")), 
                  x=rnorm(3), y=rnorm(3))

plot(gvisLineChart(dat)) 
```

如何将 x 轴正确解释为日期？我相当确定`options=list(hAxis.format:"...")`以某种方式解决了问题，但是包括“yyyy-MM-dd HH:mm:ss”在内的各种格式，但它们似乎根本无法解决我的问题。

总之，我想要一个连续的日期时间轴，如[Google Chart Tools docs](https://developers.google.com/chart/interactive/docs/gallery/linechart)中所建议的那样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T01:43:27.443

我联系了包的作者 Markus Gesmann，他设法解决了这个问题。问题是 googleVis (0.3.3) 的 CRAN 版本不接受日期或日期时间列（在 R、POSIX 和 Date 类中）。

以下代码在 0.3.3 下不会产生预期结果：

```
library(googleVis)
x <- as.Date(c(Sys.Date()+sample(1:100, 3)))

df <- data.frame(country=c("US", "GB", "BR"),
                 val1=c(1,3,4),
                 val2=c(23,12,32),
                 year=2011:2013,
                 num=c(1.2, 2.3, 3.4),
                 date=x)

Line4 <- gvisLineChart(df, xvar="date", yvar=c("val1", "val2"))

plot(Line4) 
```

但它确实会在当前的开发版本[0.4.1 下](http://code.google.com/p/google-motion-charts-with-r/source/browse/?r=364)产生一个连续的时间轴。

# jquery - jQuery Uncaught Typerror：对象的属性“$”不是函数

> ID：15103583
> 
> 赞同：1
> 
> 时间：2013-02-27T03:17:57.163
> 
> 标签：jquery, content-management-system, syntax-error

`Uncaught TypeError: Property '$' of object [object Object] is not a function`尝试运行以下 jQuery 代码时收到错误 ( )：

```
$(document).ready(function(){
  $('.login').click(function(){
    $.getJSON('https://www.cloudflare.com/api_json.html', $('form').serialize())
  });
}); 
```

我在我设置[的测试页面](http://domainmanager.tech-bytes.org)上没有收到这个错误，我只在[我的实际站点](http://tech-bytes.org/domain-manager)上收到它。我试过用我的第一行代码替换

```
jQuery(document).ready(function ($) { 
```

*因为其他帖子表明我的 CMS 正在以无冲突*模式加载 jQuery ，它只是返回了一个不同的错误（`Uncaught ReferenceError: jquery is not defined`）。有没有人有任何有用的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:22:50.330

应该`jQuery`不是`jquery`。

jQuery 变量区分大小写。

你用过`jquery(document).ready(function($){`小箱子`q`，应该是`jQuery(document).ready(function($){`

您可以将其缩短为

```
jQuery(function($){
            $('.submit-login-info').click(function(){
                $.getJSON('https://www.cloudflare.com/api_json.html', $('.logininfo').serialize())
            });
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:21:55.447

首先确保`jQuery`js 已加载。

还要检查与`jQuery $`.

并使用`jQuery.noConflict();`

**官方文档**：[http ://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T03:22:28.500

JS 区分大小写：

```
jquery(document).ready(function($){
 ^__ This should be capitalized 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T03:23:43.063

在您的源代码中，jQuery 都是小写的“jquery”。这似乎是你的问题。将其更改为“jQuery”，看看它是否有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-25T22:06:58.950

```
<script type="text/javascript">
$(document).ready(function() { 

    $('a[href=#top]').click(function(){
        $('html, body').animate({scrollTop:0}, 'slow');
        return false;
    });

});     
</script> 
```

然后您可以在该函数的范围内使用 $，而不会与范围外的其他库发生冲突

# asp.net - 如何查询查询结果？

> ID：15103590
> 
> 赞同：0
> 
> 时间：2013-02-27T03:18:50.043
> 
> 标签：asp.net, sql-server

我创建了查询来获取最畅销的产品。现在，**我想查询这个结果**，例如，**SerialNo 的**前 100 个产品订单或**SellingQty 的前 100 个产品订单**......等等。

这是我的查询，它通过 totalOrders 为所有产品排序：

```
 SELECT tblProducts.skuCode,tblProducts.productCode, tblProducts.productName, COUNT(tblOrders_Products.delivered) as totalOrder
    FROM tblOrders_Products INNER JOIN tblProducts ON tblOrders_Products.productID = tblProducts.productID
    WHERE tblProducts.productName is not null
    GROUP BY tblOrders_Products.delivered, tblOrders_Products.productID, tblProducts.skuCode,     tblProducts.productName,tblProducts.productCode
    ORDER BY totalOrder 
```

我考虑创建一个视图。但是很多帖子都说，使用带有视图的 Order By 子句，有时[是有害的](http://blogs.msdn.com/b/queryoptteam/archive/2006/03/24/560396.aspx)或不给出结果，所以，我想知道如何做到这一点？

我可以通过排序在 .NET 中执行此操作`DataTable`，并将其用作数据源。但是如何在 SQL SERVER 中完成呢？

哪种方式更快？在 SQL Server 或`DataTable`? 我正在使用 SQL SERVER 2005。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:55:24.940

这应该为您提供 SerialNo 订购的前 100 种产品（我认为它是 tblProducts 的一部分）。

您可以切换 Order By 参数以使其对其他字段进行排序。

```
SELECT a.skuCode, a.productCode, a.productName, a.totalOrder, a.SerialNo
FROM
(
SELECT TOP 100 tblProducts.skuCode,tblProducts.productCode, tblProducts.productName, COUNT(tblOrders_Products.delivered) as totalOrder, tblProducts.SerialNo
    FROM tblOrders_Products INNER JOIN tblProducts ON tblOrders_Products.productID = tblProducts.productID
    WHERE tblProducts.productName is not null
    GROUP BY tblOrders_Products.delivered, tblOrders_Products.productID, tblProducts.skuCode,     tblProducts.productName,tblProducts.productCode
    ORDER BY totalOrder) a
ORDER BY a.SerialNo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:56:57.417

这样的事情应该这样做：

```
WITH TopProducts AS
(
    SELECT TOP 100 tblProducts.productID, COUNT(tblOrders_Products.delivered) as totalOrder
    FROM tblOrders_Products INNER JOIN tblProducts ON tblOrders_Products.productID = tblProducts.productID
    WHERE tblProducts.productName is not null
    GROUP BY tblProducts.productID 
    ORDER BY COUNT(tblOrders_Products.delivered) DESC
)
SELECT * 
FROM TopProducts INNER JOIN tblProducts ON TopProducts.productID = tblProducts.productID
ORDER BY tblProducts.SerialNo 
```

TopProducts 在 SQL Server 中称为公用表表达式，它是重用查询部分的一种巧妙方法。

在 .NET 中对 DataTable 进行排序也可以。您可能不会注意到仅 100 行的性能差异。在用户可能希望以不同方式对结果进行排序（例如通过单击网格中的列标题）的情况下，在客户端上进行排序实际上是更可取的，因为这可以在没有单独的数据库调用的情况下完成。

# c++ - Qt 串行端口 - 一致地读取数据

> ID：15103599
> 
> 赞同：7
> 
> 时间：2013-02-27T03:20:18.260
> 
> 标签：c++, qt, serial-port, qtserialport

我正在通过我的串行端口向设备发送（写入）字节。我正在使用 QSerialPort ( [http://qt-project.org/wiki/QtSerialPort](http://qt-project.org/wiki/QtSerialPort) ) 模块来实例化设备 IO 支持。当我向我的 INSTEON 调制解调器（串行）发送消息时，设备在读取我的消息后会发回我的消息副本 + 0x06（ACK 字节），然后是状态消息。

我已经使用 DockLight ( [http://www.docklight.de/](http://www.docklight.de/) ) 测试了我的消息。我发送以下消息来查询设备的状态：

```
 02 62 1D E9 4B 05 19 00 
```

使用 Docklight，我收到响应：

```
 02 62 1D E9 4B 05 19 00 06 02 50 20 CB CF 1E DA F7 21 00 FF 
```

返回的消息正是我所期望的，即设备已打开。如果关闭，如果设备关闭，调制解调器将在最后一个字节位置发回 0x00。现在，我的问题 - 我必须没有正确设置我的函数来发送然后接收响应字节。我尝试了许多不同的示例和配置，目前我正在使用以下内容：

设置信号槽连接：

```
QObject::connect(&thread, SIGNAL(sendResponse(QByteArray)), 
    this, SLOT(handleResponse(QByteArray)));
QObject::connect(&thread, SIGNAL(error(QString)), 
    this, SLOT(processError(QString)));
QObject::connect(&thread, SIGNAL(timeout(QString)), 
    this, SLOT(processTimeout(QString))); 
```

用于遍历设备 QList 的函数。如果设备是所需的类型（“Light”），那么我们将设备 ID 格式化为预期的 QByteArray 消息结构。将消息传递给线程以进行发送。（从 QSerialPort`BlockingMaster`示例修改的线程。

```
void Device::currentStatus(QList<Device *> * deviceList){
    QString devID, updateQry;
    int devStatus, updateStatus;
    updateStatus=0;
    QSqlQuery query;
    for(int i=0; i<deviceList->size(); i++){
        if(deviceList->at(i)->type == "Light"){
            devStatus = deviceList->at(i)->status;
            devID = deviceList->at(i)->deviceID;
            QByteArray msg;
            bool msgStatus;
            msg.resize(8);

            msg[0] = 0x02;
            msg[1] = 0x62;
            msg[2] = 0x00;
            msg[3] = 0x00;
            msg[4] = 0x00;
            msg[5] = 0x05;
            msg[6] = 0x19;
            msg[7] = 0x00;
            msg.replace(2, 3, QByteArray::fromHex( devID.toLocal8Bit() ) );
            qDebug() << "Has device " << deviceList->at(i)->name << "Changed?";
            //send(msg,&msgStatus, &updateStatus);
            //msg.clear();
            thread.setupPort("COM3",500,msg);
            if(devStatus!=updateStatus){
                qDebug() << deviceList->at(i)->name << " is now: " << updateStatus;
                updateStatus = !updateStatus;
            }
        }
    }
} 
```

`SetupThread`用于设置局部线程变量并执行（运行）线程的函数。

```
void serialThread::setupPort(const QString &portName, int waitTimeout, const QByteArray &msg){
    qDebug() << "Send Message " << msg.toHex();
    QMutexLocker locker(&mutex);
    this->portName = portName;
    this->waitTimeout = waitTimeout;
    this->msg = msg;
    if(!isRunning())
        start();
    else
        cond.wakeOne();
} 
```

`Run`功能 - 处理发送和接收

```
void serialThread::run(){
    bool currentPortNameChanged = false;
    qDebug() << "Thread executed";
    mutex.lock();
    QString currentPortName;
    if(currentPortName != portName){
        currentPortName = portName;
        currentPortNameChanged = true;
    }

    int currentWaitTimeout = waitTimeout;
    QByteArray sendMsg = msg;
    mutex.unlock();
    QSerialPort serial;

    while(!quit){
        if(currentPortNameChanged){
            serial.close();
            serial.setPortName("COM3");

            if (!serial.open(QIODevice::ReadWrite)) {
                emit error(tr("Can't open %1, error code %2")
                           .arg(portName).arg(serial.error()));
                return;
            }

            if (!serial.setBaudRate(QSerialPort::Baud19200)) {
                emit error(tr("Can't set baud rate 9600 baud to port %1, error code %2")
                           .arg(portName).arg(serial.error()));
                return;
            }

            if (!serial.setDataBits(QSerialPort::Data8)) {
                emit error(tr("Can't set 8 data bits to port %1, error code %2")
                           .arg(portName).arg(serial.error()));
                return;
            }

            if (!serial.setParity(QSerialPort::NoParity)) {
                emit error(tr("Can't set no patity to port %1, error code %2")
                           .arg(portName).arg(serial.error()));
                return;
            }

            if (!serial.setStopBits(QSerialPort::OneStop)) {
                emit error(tr("Can't set 1 stop bit to port %1, error code %2")
                           .arg(portName).arg(serial.error()));
                return;
            }

            if (!serial.setFlowControl(QSerialPort::NoFlowControl)) {
                emit error(tr("Can't set no flow control to port %1, error code %2")
                           .arg(portName).arg(serial.error()));
                return;
            }
        }

        //write request
        serial.write(msg);
        if (serial.waitForBytesWritten(waitTimeout)) {
            //! [8] //! [10]
            // read response
            if (serial.waitForReadyRead(currentWaitTimeout)) {
                QByteArray responseData = serial.readAll();
                while (serial.waitForReadyRead(10)){
                    responseData += serial.readAll();
                }

                QByteArray response = responseData;
                //! [12]
                emit this->sendResponse(response);
                //! [10] //! [11] //! [12]
            } else {
                emit this->timeout(tr("Wait read response timeout %1")
                             .arg(QTime::currentTime().toString()));
            }
            //! [9] //! [11]
        } else {
            emit timeout(tr("Wait write request timeout %1")
                         .arg(QTime::currentTime().toString()));
        }
        mutex.lock();
        cond.wait(&mutex);
        if (currentPortName != portName) {
            currentPortName = portName;
            currentPortNameChanged = true;
        } else {
            currentPortNameChanged = false;
        }
        currentWaitTimeout = waitTimeout;
        sendMsg = msg;
        mutex.unlock();
    }
    serial.close();
} 
```

`handleResponse`函数，接收响应信号的 SLOT

```
void Device::handleResponse(const QByteArray &msg){
    qDebug() << "Read: " << msg.toHex();
} 
```

我收到以下输出：

```
Has device  "Living Room Light" Changed? 
Send Message  "02621de94b051900" 
Has device  "Bedroom Light" Changed? 
Send Message  "026220cbcf051900" 
Thread executed 
Read:  "026220cbcf05190006" 
Polling for changes... 
Has device  "Living Room Light" Changed? 
Send Message  "02621de94b051900" 
Has device  "Bedroom Light" Changed? 
Send Message  "026220cbcf051900" 
Read:  "025020cbcf1edaf721000002621de94b05190006" 
Polling for changes... 
Has device  "Living Room Light" Changed? 
Send Message  "02621de94b051900" 
Has device  "Bedroom Light" Changed? 
Send Message  "026220cbcf051900" 
Read:  "02501de94b1edaf72100ff02621de94b05190006" 
```

这里有两个问题。

1.  我从未收到关于第二个设备（卧室灯）的任何回复，这是第二个发送的消息。似乎发送被阻止了，你会建议我如何格式化我的发送，以便在收到第一次发送的响应后发送？只有 1 个 COM 端口可用于发送/接收。我相信我应该向设备 1 发送消息，接收设备 1 响应，发送到设备 2，接收设备 2。我最终会看到大量设备的巨大交通拥堵并使用等待条件，即。在执行设备 2 的通信进程之前等待设备 1 的通信进程完成？

2.  第一次读取包含接收的适当前半部分。`Read: "026220cbcf05190006"`第二次接收包含第一个响应的第二半，然后是第二个响应的第一半：读取 2 -`Read: "025020cbcf1edaf721000002621de94b05190006"`适当的完整响应是`02621DE94B05190006 025020CBCF1EDAF72100FF` （注意`20CBCF`是完整响应示例中的设备 2 的 ID）

应该对我从串口接收数据的方式进行哪些更正？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:50:26.100

1.  请参阅存储库中的 BlockingMaster 示例并阅读有关阻塞 I/O 的文档。此外，不要不必要地使用阻塞 I/O。

2.  使用 bytesAvailable() 获取可供读取的数据数量，因为您不会立即收到完整的响应包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T03:00:58.047

我相信我的问题已经从这个问题的范围转移了。在 Kuzulis 的帮助下，我实现了写入/读取功能，以成功地一致地发送和读取串行消息。Kuzulis 建议使用同步阻塞通信模式，但后来决定异步非阻塞方法最适合我的应用程序。

我的实现紧跟 QSerialPort 源文件提供的“主”示例。

我`CurrentStatus`用来遍历`Device`对象的 QList。对于设备列表中的每个灯，我都会格式化一个 8 字节的消息来查询设备的当前状态（开/关）。

```
void Device::currentStatus(QList<Device *> * deviceList){
    QString devID, updateQry;
    int devStatus, updateStatus;
    updateStatus=0;
    QSqlQuery query;
    for(int i=0; i<deviceList->size(); i++){
        if(deviceList->at(i)->type == "Light"){
            devStatus = deviceList->at(i)->status;
            devID = deviceList->at(i)->deviceID;
            QByteArray msg;
            msg.resize(8);

            msg[0] = 0x02;
            msg[1] = 0x62;
            msg[2] = 0x00;
            msg[3] = 0x00;
            msg[4] = 0x00;
            msg[5] = 0x05;
            msg[6] = 0x19;
            msg[7] = 0x00;
            msg.replace(2, 3, QByteArray::fromHex( devID.toLocal8Bit() ) );
            qDebug() << "Has device " << deviceList->at(i)->name << "Changed?";

            emit writeRequest(msg);

            if(devStatus!=updateStatus){
                qDebug() << deviceList->at(i)->name << " is now: " << updateStatus;
                updateStatus = !updateStatus;
            }
        }
    }
} 
```

在 Device 类构造函数中，我连接了信号和插槽：

```
Device::Device(){

    serialTimer.setSingleShot(true);
    QObject::connect(&serial, SIGNAL(readyRead()),
                     this, SLOT(handleResponse()));
    QObject::connect(&serialTimer, SIGNAL(timeout()),
                     this, SLOT(processTimeout()));
    QObject::connect(this, SIGNAL(writeRequest(QByteArray)),
                     this, SLOT(writeSerial(QByteArray)));
} 
```

`currentStatus`在准备好要发送的消息后，`emit writeRequest(msg);`调用。这会调度一个连接到 slot 的信号`writeRequest`。writeRequest 用于设置消息并将消息实际写入串行端口。

```
void Device::writeSerial(const QByteArray &msg){
    if (serial.portName() != "COM3") {
        serial.close();
        serial.setPortName("COM3");

        if (!serial.open(QIODevice::ReadWrite)) {
            processError(tr("Can't open %1, error code %2")
                         .arg(serial.portName()).arg(serial.error()));
            return;
        }

        if (!serial.setBaudRate(QSerialPort::Baud19200)) {
            processError(tr("Can't set rate 19200 baud to port %1, error code %2")
                         .arg(serial.portName()).arg(serial.error()));
            return;
        }

        if (!serial.setDataBits(QSerialPort::Data8)) {
            processError(tr("Can't set 8 data bits to port %1, error code %2")
                         .arg(serial.portName()).arg(serial.error()));
            return;
        }

        if (!serial.setParity(QSerialPort::NoParity)) {
            processError(tr("Can't set no patity to port %1, error code %2")
                         .arg(serial.portName()).arg(serial.error()));
            return;
        }

        if (!serial.setStopBits(QSerialPort::OneStop)) {
            processError(tr("Can't set 1 stop bit to port %1, error code %2")
                         .arg(serial.portName()).arg(serial.error()));
            return;
        }

        if (!serial.setFlowControl(QSerialPort::NoFlowControl)) {
            processError(tr("Can't set no flow control to port %1, error code %2")
                         .arg(serial.portName()).arg(serial.error()));
            return;
        }
    }
    qDebug() << "Message written";
    this->msgRequest = msg;
    serial.write(msgRequest);
    serialTimer.start(400);
} 
```

设置好串口后，我将当前消息保存到`msgRequest`. 如果出现错误，这可能必须用于重新发送消息。调用后`serial.write()`，我设置了一个 400 毫秒的计时器。一旦这个计时器到期，我检查从串口读取的内容。

`handleResponse()`是一个每次 QSerialPort 发出`readyRead()`信号时调用的槽。`readyRead()`将任何可用数据附加到 QByteArray `response`。

```
void Device::handleResponse(){
    response.append(serial.readAll());  
} 
```

400ms 后，serialTimer（one shot Timer）会发出`timeout()`信号。`serialTimer`在将我们请求的消息写入串行端口后立即启动。`processTimeout()`是我们在发送消息后最终检查从 PowerLinc 调制解调器收到的响应的地方。当消息发送到 INSTEON PowerLinc 调制解调器 (PLM) 时，PLM 会回显消息并附加 0x06（肯定 ACK）或 0x15（NACK）。在`processTimeout()`我检查以确保收到的最后一个字节是 ACK 字节，如果不是 - 重新发送我们最初请求的消息。

```
void Device::processTimeout(){
    qDebug() << "Read: " << response.toHex();
    int msgLength = this->msgRequest.length();
    if(response.at(msgLength)!=0x06){
        qDebug() << "Error, resend.";
        emit writeRequest(msgRequest);
    }
    response.clear();
} 
```

我使用串行端口监视器 4.0（Eltima 软件）来验证串行端口上的写入和读取事务。下面，您可以看到 1 个示例事务的日志打印输出。

```
20:44:30:666 STATUS_SUCCESS 02 62 1d e9 4b 05 19 00   <--- Send
20:44:30:669 STATUS_SUCCESS 02 62 1d e9 4b 05 19 00 06   <--- Receive
20:44:30:875 STATUS_SUCCESS 02  <--- Receive
20:44:30:881 STATUS_SUCCESS 50 1d e9 4b 1e da f7 21 00 ff   <--- Receive 
```

对于 20 次发送，我收到了相同的响应。因此，我可以肯定地说我的数据到达不一致的问题已经解决。现在我正在为多个写入请求而苦苦挣扎，但我相信这是一个需要调查的单独问题。我感谢大家的支持。

# mysql - SQL INSERT INTO 将另一个表中的数据与常量组合

> ID：15103601
> 
> 赞同：1
> 
> 时间：2013-02-27T03:20:40.303
> 
> 标签：mysql, sql

我正在尝试构建一个表，将来自多个其他表的数据汇总在一起。我需要将四条信息带入这个新表（日期、金额、人员、描述）。对于我的一些源表，这很简单，我可以使用：

```
$example = mysql_query("
INSERT INTO bigtable (Date, Amount, Person, Description)
   SELECT PayDate, Amount, Payee, Description
   FROM Payments
   WHERE Payee=Bob  
"); 
```

但是对于其中一些，Description 字段不存在，但可以通过对通过此特定查询添加的所有项目使用相同的值来创建。所以问题是这样的：我知道如何使用值插入一条记录，但是我如何以编程方式插入一堆记录，以便从另一个表中动态提取某些字段（如上），而其他字段是我指定的值（例如，来自 A 流的收入）。我不完整的努力如下。

```
$combiner3 = mysql_query("
INSERT INTO ".$name."accttemptable (Date, Amount)
SELECT PayDate, Cash 
FROM IncomeStreamA  
"); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:26:37.597

如果理解正确，您可以使用`UNION ALL`.

```
INSERT INTO bigtable (`Date`, Amount, Person, Description)
SELECT PayDate, Amount, Payee, Description
  FROM Payments
 WHERE Payee='Bob' 
 UNION ALL
SELECT PayDate, Cash, 'Bob', 'Your description'
  FROM IncomeStreamA
 UNION ALL
SELECT SomeDate, SomeAmount, Firstname, 'Description'
  FROM Table3
... 
```

第二个选择只是一个示例，并假设来自 Bob 的所有内容都`IncomeStreamA`与 Bob 有关。适当地改变它。

您可以使用`CASE WHEN`. 例如

```
SELECT SomDate,
       SomeAmount,
       CASE somecolumn 
           WHEN 1 THEN 'Bob' 
           WHEN 2 THEN 'Jhon' 
           ELSE 'Other'
       END Person, 
       'Your description' Description
 FROM SomeTable 
```

您可以根据需要链接尽可能多的选择来实现您的目标。

# php - 从 php 脚本运行 webkit2png 在终端中有效，但在浏览器中无效

> ID：15103608
> 
> 赞同：0
> 
> 时间：2013-02-27T03:21:12.037
> 
> 标签：php, macos, qtwebkit

我有一个以下 php 脚本 -

```
<?php
$command = "python webkit2png/webkit2png -D screenshots http://stackoverflow.com";
$command = escapeshellcmd($command);
system($command); 
```

当通过终端运行时

```
php test.php 
```

它会生成网站截图，但是在浏览器中打开 test.php 不会带来任何结果。

python 和 php 脚本都归 _www 用户所有，apache 在该用户下运行。我什至尝试在终端的 _www 下运行 test.php，它仍然有效。有什么我想念的吗？

感谢@amccausl，我在 apache 日志中找到了这个 -

```
Wed Feb 27 07:12:03 mini.local python[83331] <Error>: kCGErrorFailure: Set a breakpoint @ CGErrorBreakpoint() to catch errors as they are logged.
_RegisterApplication(), FAILED TO establish the default connection to the WindowServer, _CGSDefaultConnection() is NULL.
Traceback (most recent call last):
  File "webkit2png/webkit2png", line 353, in <module>
    if __name__ == '__main__' : main()
  File "webkit2png/webkit2png", line 324, in main
    AppKit.NSBorderlessWindowMask, 2, 0)
objc.error: NSInternalInconsistencyException - Error (1002) creating CGSWindow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:20:25.267

您正在使用的库正在尝试建立与您的 xserver 的连接以呈现 png。这在终端上工作正常，因为您有一个可用的连接，但会因为 ssh 或 apache 会话而中断，因为它们没有。

您可以创建一个供他们使用`xvfb`

[这个问题](https://stackoverflow.com/questions/6927217/error-cannot-connect-to-x-server-with-python-program-webkit2png)中使用的方法对您来说是一个很好的例子（您可以忽略解决方案）。

```
<?php
$command = "xvfb-run -a -s '-screen 0 640x480x16' python webkit2png/webkit2png -D screenshots http://stackoverflow.com";
$command = escapeshellcmd($command);
system($command); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:28:23.380

你应该使用绝对路径`/usr/local/php53/bin/php`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T20:58:12.347

如果您没有被迫使用 python 并且可以安装其他东西，我建议您[http://phantomjs.org/](http://phantomjs.org/)。它在制作网页截图方面更好更强大，并且不需要 xserver（但 node.js）

# javascript - TinyMCE 自定义按钮，上面有文字

> ID：15103613
> 
> 赞同：4
> 
> 时间：2013-02-27T03:21:33.670
> 
> 标签：javascript, tinymce

有没有办法将自定义按钮添加到 TinyMCE 工具栏，上面只有文本（没有图像）？尝试删除设置图像路径部分，现在它有一个空白按钮。这是我现有的代码：

```
<script language="javascript" type="text/javascript">
        tinyMCE.init({
            mode: "textareas",
            theme: "advanced",
            theme_advanced_buttons1: "bold,italic,underline,separator,strikethrough,justifyleft,justifycenter,justifyright, justifyfull,bullist,numlist,undo,redo,link,unlink",
            theme_advanced_buttons2: "mybutton",
            theme_advanced_buttons3: "",
            theme_advanced_toolbar_location: "top",
            theme_advanced_toolbar_align: "left",
            theme_advanced_statusbar_location: "bottom",
            setup: function (ed) {
                // Add a custom button
                ed.addButton('mybutton', {
                    title: 'My button',
                    onclick: function () {

                        ed.focus();
                        ed.selection.setContent('SampleText');
                    }
                });
            }
        });
</script> 
```

如何在没有图像的按钮上设置文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-22T19:38:41.300

只需将工具栏“mybutton”放入您的工具栏，然后将其添加到 tinymce.init 中：

```
setup: function(editor) {
editor.addButton('mybutton', {
                type: 'menubutton',
                text: 'My button',
                icon: false,
                menu: [
                    {text: 'Menu item 1', onclick: function() {editor.insertContent('Menu item 1');}},
                    {text: 'Menu item 2', onclick: function() {editor.insertContent('Menu item 2');}}
                ]
            });
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T03:31:51.337

尝试设置`label`属性。

```
ed.addButton('mybutton', {
    title: 'My button',
    onclick: function () {
        ed.focus();
        ed.selection.setContent('SampleText');
        ed.label = 'My Button';
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-11T16:41:36.867

我不得不将 label 属性从 onclick 函数中移出，才能让它为我工作。

```
ed.addButton('mybutton', {
    title: 'My button',
    label: 'My Button',
    onclick: function () {
        ed.selection.setContent('SampleText');
    }
}); 
```

# mysql - mysql选择问题，多表

> ID：15103614
> 
> 赞同：1
> 
> 时间：2013-02-27T03:21:40.970
> 
> 标签：mysql, sql, select, join

虽然我之前问过一个与此类似的问题，但我尝试将相同的技术应用于它，但它只是没有按应有的方式工作，并且出现错误和各种问题。

我为此创建了一个 sqlfiddle；[http://sqlfiddle.com/#!2/b1a29](http://sqlfiddle.com/#!2/b1a29)

我正在尝试创建一个选择函数，它将返回 animal_id、animal_name、animal_type_name、shelter_name、animal_type_id 和 location_name。

我试图用下面的代码来擅长它，但显然我错过了一些东西；

```
$query = $this->db->query('SELECT animal_id, animal_name, animal_type_name, shelter_name, shop_id, location_name
                                FROM animals a
                                INNER JOIN shelter s ON s.shop_id = a.shop_id
                                INNER JOIN location l ON l.location_id = s.location_id
                                INNER JOIN animal_types at ON at.animal_type_id = a.animal_type_id'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:24:43.493

问题是您选择的列名不明确或存在于多个表中。在这种情况下，它是`shop_id`. 为了很好地执行查询，您需要指定列`shop_id`应该来自哪里，

```
SELECT animal_id, animal_name, animal_type_name, 
       shelter_name, s.shop_id, location_name
FROM animals a
INNER JOIN shelter s ON s.shop_id = a.shop_id
INNER JOIN location l ON l.location_id = s.location_id
INNER JOIN animal_types at ON at.animal_type_id = a.animal_type_id 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/b1a29/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:25:50.597

当我运行您的代码时，它会生成错误：

> 字段列表中的列“shop_id”不明确：SELECT animal_id、animal_name、animal_type_name、shelter_name、shop_id、location_name FROM animals a INNER JOIN shutter s ON s.shop_id = a.shop_id INNER JOIN location l ON l.location_id = s.location_id INNER在 at.animal_type_id = a.animal_type_id 处加入 animal_types

从错误中：您的`shop_id`列属于多个表，因此您必须使用表名/表别名对其进行限定。

将您的查询更改为：

```
SELECT animal_id, animal_name, animal_type_name, shelter_name, s.shop_id, location_name
                                FROM animals a
                                INNER JOIN shelter s ON s.shop_id = a.shop_id
                                INNER JOIN location l ON l.location_id = s.location_id
                                INNER JOIN animal_types at ON at.animal_type_id = a.animal_type_id 
```

# wcf - UserNamePasswordValidator 和会话管理

> ID：15103620
> 
> 赞同：0
> 
> 时间：2013-02-27T03:22:14.550
> 
> 标签：wcf, ws-security

我正在使用带有 HTTPS (.NET 4.5) 的 WCF 自定义验证器。验证成功返回我想稍后使用的客户对象。目前，我可以使用我希望尽可能避免的静态变量来做到这一点。我尝试使用在主线程中变为 null 的 HttpContext 。我的理解*Validate*在不同的线程下运行。有什么方法可以在不涉及数据库或文件共享的情况下共享会话信息。[在此处](https://stackoverflow.com/questions/2298620/wcf-custom-validator-how-to-initialize-a-user-object-from-custom-validator)和[此处](https://stackoverflow.com/questions/4070579/httpcontext-is-null-in-wcf-service-running-in-asp-net-compatibility-mode)查看相关主题。

在 Authentication.cs 中

```
public class CustomValidator : UserNamePasswordValidator
{ 
      public override void Validate(string userName, string password)
      {
       //If User Valid then set Customer object
      }
} 
```

在 Service.cs 中

```
 public class Service
  {
      public string SaveData(string XML)
      {
       //Need Customer object here. Without it cannot save XML. 
       //HttpContext null here.
      }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:43:45.177

我可以建议你另一种方法。假设 WCF 服务在 ASP.Net 兼容模式下运行，并且您将客户对象保存到会话存储中。创建一个类，例如`AppContext`

代码看起来像这样

```
public class AppContext {
public Customer CurrentCustomer {
  get {
    Customer cachedCustomerDetails = HttpContext.Current.Session[CUSTOMERSESSIONKEY] as Customer;
        if (cachedCustomerDetails != null)
        {
            return cachedCustomerDetails;
        }
        else
        {
            lock (lockObject)
            {
                if (HttpContext.Current.Session[CUSTOMERSESSIONKEY] != null)        //Thread double entry safeguard
                {
                    return HttpContext.Current.Session[CUSTOMERSESSIONKEY] as Customer;
                }

                Customer CustomerDetails = ;//Load customer details based on Logged in user using HttpContext.Current.User.Identity.Name
                if (CustomerDetails != null)
                {
                    HttpContext.Current.Session[CUSTOMERSESSIONKEY] = CustomerDetails;
                }

                return CustomerDetails;
            }
        }
  }
} 
```

这里的基本思想是在 WCF 和 ASP.Net 管道都已执行且 HTTPContext 可用时进行数据的延迟加载。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:02:18.210

好吧，这应该更容易。由于 UserNamePasswordValidator 的工作方式，我需要使用自定义授权将 UserName/Password 传递给主线程并再次从数据库中获取客户信息。这是一个额外的数据库调用，但目前可以接受的解决方法。[请从Rory Primrose 的天才博客条目](http://www.neovolve.com/post/2008/04/07/wcf-security-getting-the-password-of-the-user.aspx)下载代码。

# python - 如何运行python函数

> ID：15103626
> 
> 赞同：0
> 
> 时间：2013-02-27T03:22:50.800
> 
> 标签：python, linux

你如何运行python函数。例如，如果我有一个名为 test.py 的文件和里面的函数

```
def closest_to(l,v):
    num = l[0]
    diff_min = abs(l[0] - v)
    for i in xrange(1,len(l)):
        diff = abs(l[i] - v)
        if diff < diff_min:
            diff_min = diff
            num = l[i]
    return num 
```

我将如何测试函数closest_to？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T03:40:38.347

来自：[if __name__ == "__main__": 怎么办？](https://stackoverflow.com/questions/419163/what-does-if-name-main-do)

> 当您的脚本通过将其作为命令传递给 Python 解释器来运行时，python myscript.py 将执行缩进级别为 0 的所有代码。已定义的函数和类已经定义好了，但是它们的代码都没有运行。

因此，如果您的脚本内容如下：

```
def closest_to(l,v):
    num = l[0]
    diff_min = abs(l[0] - v)
    for i in xrange(1,len(l)):
        diff = abs(l[i] - v)
        if diff < diff_min:
            diff_min = diff
            num = l[i]
    return num

if __name__ == '__main__':
    val1 = 10
    val2 = 200

    print 'Closes to %s, %s =' % val1, val2,
    print closest_to(val1, val2) 
```

当你跑步时

```
$ python script.py 
```

它将调用并输出您的函数的结果。或者我尝试使用 doctests，如果我想尝试小方法，它更容易管理。

例如：

```
def mysum(*args):
    """Returns the sum of all given arguments

    >>> mysum(1,2,3,4)
    10
    >>> mysum(1,2)
    3
    >>> mysum(1, -1)
    0
    >>> mysum(1)
    1
    """
    return sum(*args)

if __name__ == "__main__":
    import doctest
    doctest.testmod() 
```

运行它并试一试：

```
$ python mysum_script.py 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T03:25:07.477

全局范围内函数之外的任何内容都将作为脚本的一部分执行：

```
def closest_to(l,v):
    num = l[0]
    diff_min = abs(l[0] - v)
    for i in xrange(1,len(l)):
        diff = abs(l[i] - v)
        if diff < diff_min:
            diff_min = diff
            num = l[i]
    return num

result = closest_to(val1, val2)
print result 
```

如果您希望 test.py 仅包含函数定义并希望从另一个文件调用这些函数，则可以通过从需要使用任何函数的文件中导入 test.py 来实现。

```
# Some-other-file.py
import test
result = test.closest_to(val1, val2)
print result 
```

如果 test.py 包含很多函数并且你知道你只会使用其中的几个，你可以导入这些特定的几个。

```
# Another-file.py
from test import closest_to, farthest_to
result = closest_to(val1, val2)
print result
farthest_to(val1, val2) 
```

我假设函数**farthest_to**没有任何返回值，因此不尝试存储或打印它。如果您尝试存储/打印这样的值，您将得到**none**。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-27T03:32:47.123

我将启动 python 解释器并导入文件。然后你可以测试所有你喜欢的:)

# codeigniter - 向 PyroCMS / Codeigniter 添加 OAuth 服务器支持？

> ID：15103630
> 
> 赞同：0
> 
> 时间：2013-02-27T03:23:11.980
> 
> 标签：codeigniter, oauth, pyrocms

我正在寻找一种将 PyroCMS 扩展到 OAuth2.0 服务器的方法。我希望我的用户能够使用中央身份验证系统登录我的“客户”网站。

我查看了[https://github.com/alexbilbie/CodeIgniter-OAuth-2.0-Server](https://github.com/alexbilbie/CodeIgniter-OAuth-2.0-Server)但在计划如何将其与 PyroCMS 集成时遇到了麻烦。我不想触及核心身份验证，所以我正在考虑构建一个在当前身份验证系统之上执行此操作的模块。

关于如何做到这一点的任何提示/想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:35:18.700

我可以看到这里已经有一个用于 pyrocms 的 OAuth[模块](https://github.com/pyrocms/social "这里")

涵盖 OAuth 1 和 OAuth 2.0

# node.js - socket.io 广播太多数据包

> ID：15103633
> 
> 赞同：1
> 
> 时间：2013-02-27T03:23:33.257
> 
> 标签：node.js, socket.io

我正在尝试向所有连接的客户广播为产品更新的简单价格。有用。这意味着广播成功并且我可以更新我的值，但是广播的是问题。

Socket.io 广播自服务器启动以来的所有消息，而不是仅发送最后一条消息。我似乎找不到如何将广播限制为最新更新的价格。

服务器：

```
// Broadcast new price
io.sockets.on('connection', function (socket) {
  socket.on('bidAction', function(from, msg){
    socket.broadcast.emit('bid', { price: new_price, product_id: productID });
  });
}); 
```

客户：

```
var socket = io.connect('http://localhost');
socket.on('bid', function (data) {
  console.log(data);

  // We get the element with price
  $('span.price').html(data.price.toFixed(2)) ;
});

// Now when the price is changed
$('.bid').click(function(){
  // We emit the bidding
  socket.emit('bidAction', {data: 'stuff'});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T17:36:44.570

我不确定你是故意还是错误地这样做了。现在你有一个

```
function(from, msg) 
```

并尝试广播

```
price: new_price, product_id: productID 
```

new_price 和 productID在您的示例中均未**定义。**

您能否将您的代码更改为以下内容，以便更有意义？

客户端：

```
socket.emit('bidAction', {new_price: 'stuff' , productID : 'stuff'}); 
```

服务器端：

```
io.sockets.on('connection', function (socket) {
  socket.on('bidAction', function(data){
    socket.broadcast.emit('bid', { price: data.new_price, product_id: data.productID });
  });
}); 
```

# objective-c - 在持久存储中使用 SQLCipher 数据库

> ID：15103636
> 
> 赞同：1
> 
> 时间：2013-02-27T03:23:37.520
> 
> 标签：objective-c, xcode, sqlcipher

我已经到了可以使用 SQLCipher 创建数据库的加密副本的地步，现在我正在尝试将它集成到我的项目中。我尝试在我的应用程序委托中使用以下代码来解密数据库...

```
 NSString *databasePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES) objectAtIndex:0]
                          stringByAppendingPathComponent: @"encrypted.db"];

if (sqlite3_open([databasePath UTF8String], &db) == SQLITE_OK) {
    const char* key = [@"BIGSecret" UTF8String];
    sqlite3_key(db, key, strlen(key));
    if (sqlite3_exec(db, (const char*) "SELECT count(*) FROM sqlite_master;", NULL, NULL, NULL) == SQLITE_OK) {
        // password is correct, or, database has been initialized
        NSLog(@"correct password");

    } else {
        // incorrect password!
        NSLog(@"incorrect password");
    } 
```

然后稍后在持久存储中，我使用以下代码。

```
if (__persistentStoreCoordinator != nil) {
    return __persistentStoreCoordinator;
}

NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"encrypted.db"];

NSError *error = nil;
__persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) { 
```

创建数据库后第一次加载程序时，我会得到一个“密码正确”的日志，但之后的任何时候我都会得到一个“密码错误”，但数据库仍然可用，这让我相信数据库被覆盖什么的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:34:26.403

CoreData 不能直接与 SQLCipher 一起使用，因为它直接使用设备中的 SQLite。您可能会查看使用 SQLCipher 和自定义 NSIncrementalStore 来提供类似功能的加密核心数据项目 ( [https://github.com/project-imas/encrypted-core-data )。](https://github.com/project-imas/encrypted-core-data)

# actionscript-3 - AS3 Starling stagewebview 无法访问内容

> ID：15103648
> 
> 赞同：0
> 
> 时间：2013-02-27T03:24:50.827
> 
> 标签：actionscript-3, air

我已经设置了一个八哥项目并添加了 stagewebview 来嵌入谷歌地图。我已经使用 Facebook 测试了该项目，它似乎正确加载了[http://facebook.com](http://facebook.com)。我遇到的问题是我无法访问该页面（单击链接、登录等）。

我不知道我是否了解 stagewebview 的使用，或者是否有其他原因阻止我访问内容。我的理解是您可以将外部页面加载到项目/设备中。

该项目将用于使用地图的移动应用程序中。如果有人知道在移动设备（iOS 和 Android）中使用谷歌地图（或任何其他地图软件）的更好方法，我会全力以赴。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:09:55.723

将 Google 地图加载到 stageWebView 中当然是可能的。虽然我使用了 StageWebViewBridge，因为我需要 ActionScript 和 JavaScript 之间的双向通信。

[StageWebViewBridge 加载并与在线页面通信](https://stackoverflow.com/questions/8449596/stagewebviewbridge-loading-and-communicating-with-online-page)

请注意，尽管 stageWebView 不会出现在 Starling (Stage3D) 显示列表中。它需要位于 Flash NativeStage 的上方。

对于移动设备，您可以考虑使用 ANE 访问映射 API。

[http://sleepydesign.blogspot.co.uk/2012/07/ane-free-air-native-extensions.html](http://sleepydesign.blogspot.co.uk/2012/07/ane-free-air-native-extensions.html)

[http://code.google.com/p/air-maps-ane/](http://code.google.com/p/air-maps-ane/)

或者 Distriqt 销售一系列 ANE，包括映射。

[http://labs.distriqt.com/native-extensions](http://labs.distriqt.com/native-extensions)

# c++ - 使用平方根计算素数和算法构建查询

> ID：15103656
> 
> 赞同：0
> 
> 时间：2013-02-27T03:25:47.877
> 
> 标签：c++, algorithm, for-loop, square-root

下面是素数的计算。我试图解构它以更好地理解循环。另外，我想通过将数字与其平方根进行比较来调整此函数以找到素数，而不是这样：

（假设在 int main 之前进行了适当的声明）

//判断数字是否为素数

```
bool isPrime (long n)
{
    int a;

    if (n == 1)
    {
        return false;
    }

    for (a = 2; a <= (n / 2); a++)
    {
        if ((n % a) == 0)
        {
            return false;
        }

    }
    return true;
} 
```

然而，观察这个循环，我有一个问题，看看我是否正确地观察了这个函数。从我所见，它看起来像是`int a;`计数器，它从 2 开始，因为 0 和 1 不是素数。n 应该是形式变量。它指出，对于每个除以 2 时小于或等于自身的数字，如果余数大于零，则为 bool 返回 true。同时，如果一个数被 2 整除（所以没有余数），则它不被视为素数（布尔返回 false）。那个听起来是对的吗？如果没有，请让我知道我在哪里拐错了。如果我做对了，就进入程序的后半部分。

现在在这里，主要`primeCount;`是有限的`primeCount (2, 50000);`，但第一个函数在这里输入：

// 使用 isPrime 函数计算和组织素数

```
long primeCount (long x, long y)
{
    bool prime;
    int b;
    int c = 1000;
    int counter = 0;
    int totalSum = 0;

    for (b = 1; b <= y; b++)
    {
        prime = isPrime (b);

        if (prime == true)
        {
            counter++;
        }
        if (b == c)
        {
            cout << setw(10) << left << (b - 999) << setw(10) << left << b << setw(12) << counter << endl;
            cout << fixed << showpoint << setprecision(2) << endl;
            totalSum = totalSum + counter;
            counter = 0;
            c = c + 1000;
        }
    } 
```

现在，我认为 x 和 y 是形式变量，但我不知道 x 应该代表什么。它代表`int c;`吗？该函数中的 for 循环完全让我感到困惑。我不明白。任何可以阐明的光都将不胜感激。

至于平方根查询，我是否需要使用 3 个嵌套的 for 循环才能获得素数？像这样：

```
 for (a > m => b)

  for (a==m => b==m)

    for (a < m => b>m) 
```

以这种方式定位素数会比这里说明的方式复杂吗？我知道这需要解决很多问题。如果你们建议我把它分成单独的帖子，我会编辑这个并将后半部分发布在另一个帖子中。感谢您的协助！只是一个试图从这些东西中脱颖而出的大一 C++ 程序员 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:56:43.980

第一个函数`isPrime()`做了它应该做的事情。如果一个数是素数，则返回真，如果不是，则返回假。循环变量`a`只运行直到`n/2`的原因是因为任何数字`n`都不能有一个大于`n/2`（除了它自己）的因子。例子？`6 -- 1, 2, 3 and 6`, `12 -- 1, 2, 3, 4, 6 and 12`. 该循环只是试图查看是否`a`有任何因素（将其除以而不留下余数的数字）。如果是，则不是素数 ( `return false`)，否则是 ( `return true`)。

但是我觉得这`primeCount()`并没有完全达到预期的效果。

根据我的定义，我认为它是为了计算从到`primeCount()`的素数总数（在你的情况下是 2 到 50000，因为你提到了调用）。但是，要做到这一点，必须将循环更改为此`x``y``main()``primeCount(2, 50000)``for`

`for (b = x; b <= y; b++)`

这里变量的作用`c`是对循环变量的每千分之一值进行检查`b`。

请注意，在第一次运行时，`b = 1000`即`b == c`程序打印到现在为止遇到的素数数量（`counter`）。之后，`counter`重置为现在。`0`然后，从to继续，同样的事情重复，直到50000。`c``2000``b``1001``2000``b`

`2`总的来说，这个想法是打印从到的每 1000 个自然数中存在的素数的数量`50000`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:56:37.690

```
for (a = 2; a <= (n / 2); a++)
{
    if ((n % a) == 0)
    {
        return false;
    }

} 
```

这是您使用的“for”循环。它在除以每个“a”时检查 n 的余数，从 2 迭代到 n/（n 的一半（整数除法））。如果这些余数中的任何一个为零，则 n 是复合数，并且没有继续向前的意义。我们只是返回一个假——这个数字不是素数。

可以安全地假设，如果直到 (n/2) 之前我们还没有找到 n 的除数，那么这个数字是素数，所以在我们尝试所有可能的除数猜测之后，如果我们得到了那么远，我们返回数字 IS主要。

# c++ - 在 Ubuntu 12.10 下使用 Boost 序列化链接的未解析符号

> ID：15103657
> 
> 赞同：6
> 
> 时间：2013-02-27T03:25:48.593
> 
> 标签：c++, linux, linker, ld

我首先要说我今晚感觉自己像个白痴。我试图通过 Boost 序列化最小化重现我在 RHEL5.6、gcc 4.1.2、boost 1.44.0 下遇到的工作问题。

我遇到*这个*问题的环境是 Ubuntu Server（安装了开发包）、gcc 4.7.2 和 boost 1.44.0 的构建（针对系统编译器、包等）。

我的代码编译得很干净，但我得到了无数与`boost::archive`各种类型相关的未定义符号。在我的 make 上运行 strace，我看到它获取了预期的 boost_serialization 库：

```
668 43569 stat("/usr/local/boost/1.44.0/lib/libboost_serialization.so", {st_mode=S_IFREG|0755, st_size=700481, ...}) = 0
669 43569 open("/usr/local/boost/1.44.0/lib/libboost_serialization.so", O_RDONLY) = 8 
```

我的makefile是：

```
default: test-app
all: test-app

BOOST := /usr/local/boost/1.44.0

CPPFLAGS := -fPIC -Wall -Wextra -Werror
INCDIRS := -isystem$(BOOST)/include
.LIBDIRS. := $(BOOST)/lib
.LIBS. :=boost_serialization
LIBS := $(foreach lib,$(.LIBS.),-l$(lib))
LIBDIRS := $(foreach dir,$(.LIBDIRS.),-L$(dir))
CPPFLAGS += $(INCDIRS)

base.o : base.cpp base.hpp
        g++ $(CPPFLAGS) --compile $< -o $@ -g

derived.o : derived.cpp base.hpp derived.hpp
        g++ $(CPPFLAGS) --compile $< -o $@ -g

main.o: main.cpp derived.hpp
        g++ $(CPPFLAGS) --compile $< -o $@ -g

test-app: main.o derived.o base.o
        g++ -o $@ $(LIBDIRS) $(LIBS) $^

clean:
        rm -f *.o test 
```

我得到的链接器错误的一个（非常）小样本如下：

> base.o：在函数`void boost::archive::basic_text_oprimitive<std::ostream>::save<boost::archive::class_id_reference_type>(boost::archive::class_id_reference_type const&)': /usr/local/boost/1.44.0/include/boost/archive/basic_text_oprimitive.hpp:91: undefined reference to` boost::archive::archive_exception::archive_exception(boost::archive::archive_exception::exception_code, char const*, char const*)' /usr/local/boost/1.44.0/include/ boost/archive/basic_text_oprimitive.hpp:91: 未定义对 `boost::archive::archive_exception::~archive_exception()' /usr/local/boost/1.44.0/include/boost/archive/basic_text_oprimitive.hpp:91: undefined reference to` boost::archive::archive_exception::~archive_exception()' 的引用 base.o: 在函数`void boost::archive::basic_text_oprimitive<std::ostream>::save<boost::archive::tracking_type>(boost::archive::tracking_type const&)': /usr/local/boost/1.44.0/include/boost/archive/basic_text_oprimitive.hpp:91: undefined reference to` boost::archive::archive_exception::archive_exception(boost::archive:: archive_exception::exception_code, char const*, char const*)' /usr/local/boost/1.44.0/include/boost/archive/basic_text_oprimitive.hpp:91: 未定义对 `boost::archive::archive_exception::~archive_exception()' /usr/local/boost/1.44.0/include/boost/archive/basic_text_oprimitive.hpp:91: undefined reference to` boost::archive::archive_exception::~的引用archive_exception()' base.o：在函数中`void boost::archive::basic_text_oprimitive<std::ostream>::save<unsigned int>(unsigned int const&)': /usr/local/boost/1.44.0/include/boost/archive/basic_text_oprimitive.hpp:91: undefined reference to` boost::archive::archive_exception::archive_exception(boost::archive::archive_exception::exception_code, char const*, char const*)' /usr/local/boost/1.44.0/include/boost/archive/basic_text_oprimitive. hpp:91: 未定义对 `boost::archive::archive_exception::~archive_exception()' /usr/local/boost/1.44.0/include/boost/archive/basic_text_oprimitive.hpp:91: undefined reference to` boost::archive::archive_exception::~archive_exception()' 的引用

同样，如果我对引用的 .so 进行符号转储，我会看到所需的符号：

> objdump -t /usr/local/boost/1.44.0/lib/libboost_serialization.so | c++过滤器| grep "boost::archive::archive_exception::~archive_exception()" 000000000004e670 g F .text 0000000000000065
> boost::archive::archive_exception::~archive_exception() 000000000004e6e0 g F .text 000000000000000 虚拟到 boost:archive:9 Archive_exception :: 〜Archive_exception（）00000000000004E6F0 G F .TEXT 0000000000000012
> BOOST :: Archive :: Archive_exception :: 〜Archive_exception（
> 〜Archive_exception（〜Archive_exception（） 0000000000000009 虚拟 thunk 到 boost::archive::archive_exception::~archive_exception()

我已经把头撞在桌子上一段时间了……希望有人能帮忙。我不认为具体的来源很重要，但如果需要，我可以发布它。

**其他环境细节：**

> g++ --version g++ (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2 版权所有 (C) 2012 Free Software Foundation, Inc. 这是免费软件；查看复制条件的来源。没有保修；甚至不考虑适销性或特定用途的适用性。
> 
> ```
> ld --version
> GNU ld (GNU Binutils for Ubuntu) 2.22.90.20120924
> Copyright 2012 Free Software Foundation, Inc.
> This program is free software; you may redistribute it under the terms of
> the GNU General Public License version 3 or (at your option) a later version.
> This program has absolutely no warranty. 
> ```

此外，这是在 Windows 8 上的 Hyper-V 下运行的 VM 上，不过，我认为这在这里并不重要。

**完整的链接行：** g++ -L/usr/local/boost/1.44.0/lib -lboost_serialization -o test-app main.o derived.o base.o

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-29T11:47:51.960

我遇到了同样的问题，把 -lboost_serialization 放在最后

> g++ -L/usr/local/boost/1.44.0/lib -o test-app main.o derived.o base.o -lboost_serialization

应该解决它

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T05:56:43.260

二进制对象 .o 未与库链接。
首先验证**/usr/local/boost/1.44.0/lib**中有文件的 lib boost_serialization。
接下来，注册该库：
sudo ldconfig -v | grep boost_serialization
如果没有，则使用 root 用户在**/etc/ld.so.conf.d中创建文件****boost1.44.0.conf 。**使用这个 usr/local/boost/1.44.0/lib 然后启动这个命令 sudo ldconfig -v | grep boost_serialization

# javascript - 动态添加和删除表格行

> ID：15103661
> 
> 赞同：0
> 
> 时间：2013-02-27T03:26:03.087
> 
> 标签：javascript, jquery, html-table, dom-traversal, jquery-traversing

我正在使用 jQuery 添加和删除表行。我可以轻松添加行，但在删除已创建的行时遇到问题。

您可以在此处查看正在运行的页面：http: [//freshbaby.com/v20/wic/request_quote.cfm](http://freshbaby.com/v20/wic/request_quote.cfm)，相关代码粘贴在下面。

**HTML**

```
<table style="width:600px;" id="product-list" summary="Lists details about products users wish to purchase">
    <thead valign="top" align="left">
        <tr>
            <th>Products</th>
            <th>Language</th>
            <th>Quantity</th>
            <th></th>
        </tr>
    </thead>
    <tbody valign="top" align="left">
        <tr>
            <td>
                <cfselect query="getProductListing" name="product" size="1" display="name" value="name" queryPosition="below">
                    <option value=""></option>
                </cfselect>
            </td>
            <td>
                <select name="language" size="1">
                    <option value="English">English</option>
                    <option value="Spanish">Spanish</option>
                </select>
            </td>
            <td>
                <cfinput name="quantity" required="yes" message="Enter your desired quantity" size="10" maxlength="3" mask="999">
            </td>
            <td valign="bottom"><a href="javascript://" class="addrow">Add Another Product</a></td>
        </tr>
    </tbody>
</table> 
```

**JavaScript：**

```
<script>
        $(function() {
            var i = 1;
            $(".addrow").click(function() {
                $("table#product-list tbody > tr:first").clone().find("input").each(function() {
                    $(this).attr({
                      'id': function(_, id) { return id + i },
                      'value': ''               
                    });
                }).end().find("a.addrow").removeClass('addrow').addClass('removerow').text('< Remove This Product')
                .end().appendTo("table#product-list tbody");
                i++;
                return false;
            });

            $("a.removerow").click(function() {
                    //This should traverse up to the parent TR
                $(this).parent().parent().remove();
                return false;
            });
        });
    </script> 
```

当我单击链接以删除包含该链接的行时，没有任何反应。没有脚本错误，所以它必须是逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:35:25.723

试试这个

```
$("#product-list").on('click','a.removerow',function(e) {
    e.preventDefault();
    //This should traverse up to the parent TR
    $(this).closest('tr').remove();
    return false;
}); 
```

这将确保可以删除新创建的元素。当您使用它时，`$("a.removerow").click(..` 它只会影响存在的元素（无），而不影响将动态创建的元素。

# linux - 使用过多 CPU 查找进程的命令

> ID：15103662
> 
> 赞同：8
> 
> 时间：2013-02-27T03:26:05.267
> 
> 标签：linux, shell, operating-system, cpu

我可以使用什么命令来查找使用大量 CPU 的进程？我可以在不安装新东西的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-27T03:31:04.237

或者使用其他一些你可以做的工具：

```
ps aux | sort -rk 3,3 | head -n 5 
```

更改 head 的值以获取您想要查看的进程数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T03:28:55.343

尝试这样做：

```
top -b -n1 -c 
```

如果您想要占用最多 %CPU 时间的进程：

```
top -b -n1 -c  | awk '/PID *USER/{print;getline;print}' 
```

或者

```
top -b -n1 -c  | grep -A 2 '^$' 
```

# php - 检查 PHP 中可选参数的类型

> ID：15103665
> 
> 赞同：1
> 
> 时间：2013-02-27T03:26:24.753
> 
> 标签：php

我正在检查 PHP 中可选参数的类型，如下所示：

```
/**
 * Get players in the team using limit and
 * offset.
 *
 *
 * @param TeamInterface $participant
 * @param int $limit
 * @param int $offset
 * @throws \InvalidArgumentException
 * @return Players of a team
 */
public function getPlayers(TeamInterface $team, $limit = null, $offset = null)
{
    if (func_num_args() === 2 && !is_int($limit) ){
        throw new \InvalidArgumentException(sprintf('"Limit" should be of int type, "%s" given respectively.', gettype($limit)));
    }
    if (func_num_args() === 3 && (!is_int($limit) || !is_int($offset))){
        throw new \InvalidArgumentException(sprintf('"Limit" and "Offset" should be of int type, "%s" and "%s" given respectively.', gettype($limit), gettype($offset)));
    }
//.....

} 
```

这可行，但有两个主要问题：

1/ 如果我需要检查相同类型的 4/5 可选参数的`int`类型，代码会变得不必要的长。任何想法如何使这段代码更易于维护？（也许只使用一个`if`语句来检查两者的相同类型`$limit`和`$offset`）

2/`getPlayers($team, 2, null)`抛出异常。知道该函数实际上可以在这里处理一个`null`值，这可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:40:39.233

您可以使用 args 数组执行 for 循环。就像是：

```
$args = func_get_args();
for ($i = 1; $i < 4; $i++) {
    if ($args[$i] !== null and !is_int($args[$i])) {
        throw ...
    }
} 
```

当然，根据需要检查的参数数量调整 for 条件。

或者...

```
$args = func_get_args();
// skip first
array_shift($args);
foreach ($args as $arg) {
    if ($arg !== null and !is_int($arg)) {
        throw ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:41:53.060

对于 1) 我会单独检查每个变量并为每个变量抛出异常：

```
 if (!is_int($limit)){
        //Throw
    }
    if (!is_int($offset))){
        //Throw
    } 
```

这仍然需要每个变量的 if 语句，但不那么冗长。

对于 2）如果允许空值，您可以将检查更改为：

```
if ($offset && !is_int($offset))){
    //Throw
} 
```

最后，我不建议检查`func_num_args()`. 在您的示例代码中，使用太多参数调用您的函数会绕过验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T03:46:22.007

就我个人而言，我更喜欢每个函数只有一个参数（除非函数非常简单），例如函数可以采用`$request`, 并返回一棵数据树`$response`。它使以后循环和扩展更容易：

```
function dostuff( $request ) {

   $team   = @$request['team'];
   $limit  = @$request['limit'];
   $offset = @$request['offset'];

   // ...
   return $response;
} 
```

然后为了验证，您可以在函数顶部编写一组规则，例如

```
 // define validation rules
   $rules = array( 'required' => array('team'),      
                   'depends' => array('offset' => 'limit'),      
                   'types' => array('offset' => 'int', 'limit' => 'int' ),
            ); 
```

并在一次调用中集中所有错误检查：

```
 // can throw exception
   argcheck( array( 'request' => $request, 'rules' => $rules ) ); 
```

这可能需要优化，但是当您增加函数的复杂性时，一般方法有助于控制膨胀。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T03:47:26.523

PHP 还没有标量的类型提示。

## 重新设计

当您开始在函数中使用大量可选参数时，您会产生代码异味。出了点问题，有一个对象等待出现。

将所有可选参数构建为 Object 并在其上使用 validate 方法。

我认为您想要一个 GameParameters 对象并在其上有一个 validate 方法。

```
getPlayers($gameParameters) {
} 
```

将参数验证移至该对象，您可以在其中将其构建到每个 setter 中或具有全面的 validate() 函数。

## 组合问题

就检查的爆炸式增长而言，我会构建一个错误数组并在有错误时抛出它。这可以在有或没有重新设计的情况下完成。

```
if ($limit != null && !is_int($limit){
  #add to the errors array      
}

if ($offset != null && !is_int($offset){
  #add to the errors array      
}

if (errors) {
  throw new \InvalidArgumentException(sprintf('"Limit" and "Offset" should be of int type, "%s" and "%s" given respectively.', gettype($limit), gettype($offset)));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T03:34:54.967

使用 switch 对特定功能进行编码。

```
switch(gettype($limit)) {
    case "integer":
        //do other processing
    break;
} 
```

你不能让你的代码像那样容易受到攻击。至于克服漏洞的安全解决方案。像这样创建一个安全列表。

```
public function getPlayers(TeamInterface $team, $limit = null, $offset = null) {
    $safelist = array("var1" => "TeamInterface", "var2" => "integer", "var3" => "integer");
    $args = function_get_args();
    $status = true;
    foreach($args as $key => $var) {
        if(gettype($var)!=$safelist["var".$key]) {
             $status = false;
             break;
        }
    }
    if(!$status) break;

    //...........
} 
```

# ios - 从 UITableViewCell 中删除单元格？

> ID：15103668
> 
> 赞同：0
> 
> 时间：2013-02-27T03:27:04.273
> 
> 标签：ios, iphone, uitableview, cell

我面临一个小问题。我的单元格上有一个 UIButton ，按下时我希望删除单元格。我已经尝试过了，但给出了错误。

```
- (IBAction)deleteCell:(NSIndexPath *)indexPath {
MainViewController *view = [[MainViewController alloc] initWithNibName:@"MainViewController" bundle:nil];
[view.nameArray removeObjectAtIndex:indexPath.row];
[view.priceArray removeObjectAtIndex:indexPath.row];
[view.mainTable deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight];
} 
```

我有一种感觉，我没有正确指定 indexPath，不知道怎么做。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:42:10.307

我会这样做的。我有自己的 MyCustomCell 类，其中每个单元格都有按钮。

```
//MyCustomCell.h

@protocol MyCustomCellDelegate <NSObject>

-(void)deleteRecord:(UITableViewCell *)forSelectedCell;

@end

@interface MyCustomCell : UITableViewCell {

}
@property (nonatomic, strong) UIButton *deleteButton;
@property (unsafe_unretained) id<MyCustomCellDelegate> delegate;
@end

//MyCustomCell.m

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
 {
    self = [super initWithStyle:UITableViewCellStyleDefault reuseIdentifier:reuseIdentifier];
    if (self) {
     self.deleteButton = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 150, 44)];
    [self.deleteButton setTitle:@"Delete your record" forState:UIControlStateNormal];
    [self.deleteButton setContentHorizontalAlignment:UIControlContentHorizontalAlignmentLeft];
    [self.deleteButton addTarget:self action:@selector(editRecord:) forControlEvents:UIControlEventTouchUpInside];
    }
 }

-(IBAction)editRecord:(id)sender {
    [self.delegate deleteRecord:self]; // Need to implement whoever is adopting this protocol
} 
```

--

```
// .h

@interface MyView : UIView <UITableViewDataSource, UITableViewDelegate, MyCustomCellDelegate> {

NSInteger rowOfTheCell; 
```

**注意：不要忘记将委托 MyCustomCellDelegate 设置为您的单元格。**

```
// .m

-(void)deleteRecord:(UITableViewCell*)cellSelected
{
     MyCustomCell *selectedCell = (MyCustomCell*)cellSelected;
     UITableView* table = (UITableView *)[selectedCell superview];
     NSIndexPath* pathOfTheCell = [table indexPathForCell:selectedCell]; //current indexPath
     rowOfTheCell = [pathOfTheCell row];  // current selection row

     [view.nameArray removeObjectAtIndex:rowOfTheCell];
     [view.priceArray removeObjectAtIndex:rowOfTheCell];
     [view.mainTable deleteRowsAtIndexPaths:[NSArray arrayWithObject:pathOfTheCell]    withRowAnimation:UITableViewRowAnimationRight];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:10:22.927

将参数作为整数传递。

```
- (IBAction)deleteCell:(NSInteger)indexPath {
MainViewController *view = [[MainViewController alloc] initWithNibName:@"MainViewController" bundle:nil];
[view.nameArray removeObjectAtIndex:indexPath];
[view.priceArray removeObjectAtIndex:indexPath];
[view.mainTable reloadData];
} 
```

# r - 将原始数据文件转换为 RData 文件

> ID：15103670
> 
> 赞同：0
> 
> 时间：2013-02-27T03:27:16.530
> 
> 标签：r, file, input, rdata

我正在尝试从原始数字空格分隔的文本文件制作一个 RData 文件，即

```
11 33 55
22 33 45
25 78 00 
44 87 99 .... 
```

我有另一个 R 脚本，它需要加载这个新的 RData 文件并使用 mapreduce (rhipe) 对数据执行线性回归。因此，当我保存这个 RObject 时，我需要以这种方式读回它：

```
data <- strsplit(unlist(map.values)," ")

#so that I can run regression like:
y<- unlist(lapply(data,"[[",1))
x1<-unlist(lapply(data,"[[",2))
x2<-unlist(lapply(data,"[[",3))
lm(y~x1+x2) 
```

我尝试了很多方法将我的数据保存到 RData 对象中，包括表、列表和 as.character，但没有成功，因此我可以使用上述方法读取它。我怎样才能保存我的原始文件，以便我可以按照上面的方式阅读它？谢谢你。

（ps。我不能使用 load / read.table 函数，因为我正在从映射器内的 HDFS 文件中读取）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:36:27.913

如果我理解正确，您希望您的存储对象是一堆形式为 "number - space - number" 的字符串。在这种情况下，使用`sprintf`

```
foo <- sprintf('%d %d %d',my_data[1,]) 
```

作为创建第一行的示例。运行一个循环或`*apply`构建整个数组。将该字符串数组保存到`RData`文件中。这至少应该接近你想要的。
注意：我想建议改进执行数据排序和回归的远端代码是徒劳的？

# silverstripe - SilverStripe 3：控制器功能中的图像对象

> ID：15103677
> 
> 赞同：0
> 
> 时间：2013-02-27T03:28:30.293
> 
> 标签：silverstripe

我正在尝试编写一个函数来显示来自 Holder Page 上子页面的图像。

因为 SilverStripe 在模板上缺少一些功能，所以我认为最好在控制器中处理它们。

我需要一些条件语句，它们只能在 php.ini 中完成。

控制器.php

```
public function LatestWork() {

$works = WorkPage::get();

$i = 1;
$html = "";
foreach ($works as $work) {

  //Build the IMage Object so we can add it to the Work Object
  $ImageObj = File::get()->byID($work->FeaturedImageID);

  if ($this->is_odd($i)) {
    $html .= "<div class='row'>";
    $span = "span8";
  } else {
    $span = "span4";
  }
  $html .= "<div class = '$span'>" . $ImageObj->croppedImage(200,100)  . "</div>";
  if ($this->is_even($i)  || $i == $works->Count()) {
    $html .= "</div>";
  }
  $i++;
}

return $html;
} 
```

当它在视图中处理时，div 和 span 存在，但图像不存在。代码中有更多条件，但这只是基本版本。它改为显示“Image_Cached”。

我怎样才能让它显示图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:59:23.353

控制器：

```
public function LatestWork() {
    $rows=new ArrayList();
    foreach(WorkPage::get() as $workPage){
        if (!isset($bucket)){
              $bucket = new ArrayList();
              $bucket->push($workPage);
              $rows->push($bucket);
        } else {
              $bucket->push($workPage);
              unset($bucket);
        }
    }
    return $rows;
} 
```

模板：

```
<% loop LatestWork %>
    <div class="row">
    <% if Odd %>
        <div class="span-8">
            <% with $Me.First %>$FeaturedImage.CroppedImage(200,100)<% end_with %>
        </div>
        <div class="span-4">
            <% with $Me.Last %>$FeaturedImage.CroppedImage(100,50)<% end_with %>
        </div>
    <% else %>
        <div class="span-4">
            <% with $Me.First %>$FeaturedImage.CroppedImage(100,50)<% end_with %>
        </div>
        <div class="span-8">
            <% with $Me.Last %>$FeaturedImage.CroppedImage(200,100)<% end_with %>
        </div>
    <% end_if %>
    </div>
<% end_loop %> 
```

将是 SS 的方式，这样你的显示逻辑就不会弄乱你的控制器

# magento - 如何在magento中创建依赖属性

> ID：15103680
> 
> 赞同：3
> 
> 时间：2013-02-27T03:28:47.813
> 
> 标签：magento, magento-1.7

在magento中有什么方法可以创建依赖属性，例如颜色取决于大小，大小取决于制造商？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:34:08.567

让我假设您通过简单地说属性来表示产品属性。

**要回答您的问题，无法在“管理属性”下直接或直接创建相关产品属性。但是您可以通过创建可配置产品使您的属性相互依赖。**

假设您有 2 种颜色（黑色和蓝色）和 2 种尺寸（L、XL），并且您想让颜色取决于尺寸。

1.  首先在管理属性下创建 2 个属性大小和颜色类型下拉菜单，并创建属性选项和值。并将其分配给正确的属性集。

2.  现在创建简单的产品，假设产品 A 的尺寸为 L，颜色为黑色，产品 B 的颜色为蓝色，尺寸为 XL。

3.  现在创建一个可配置的产品让我们说 AB 并将这两个简单的产品 A 和 B 关联起来。保存产品。

如果客户打开产品 AB，如果他们选择 L 码，他们只能找到黑色。这就是您可以使您的产品属性相互依赖的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T20:57:15.463

可配置产品是依赖选项的最佳途径（除非您有大量选项，因为可配置产品在失败之前只能分配数百个简单产品）。

还有一些扩展允许您对简单产品的自定义选项执行此操作。请参阅： http: [//www.magentocommerce.com/magento-connect/dependent-custom-options.html](http://www.magentocommerce.com/magento-connect/dependent-custom-options.html) [http://www.magentocommerce.com/magento-connect/advanced-product-options.html](http://www.magentocommerce.com/magento-connect/advanced-product-options.html)

# cakephp - mod_rewrite 404 错误

> ID：15103684
> 
> 赞同：0
> 
> 时间：2013-02-27T03:29:08.310
> 
> 标签：cakephp, mod-rewrite, configuration, http-status-code-404

我一直在查看用于修复 mod_rewrite 以用于 CakePHP（以及 CakePHP 文档）的帖子和一些 Google Groups 资料，但我似乎无法让 mod_rewrite 正常工作。

CakePHP 安装得很好，我得到了主页，我得到：![在此处输入图像描述](../Images/74a1f02a323a7233ce19cf9921ad80d3.png) 然后我创建了一个模型 app/Model/Format.php：

```
<?php

    /**
     * File: app/Model/Format.php
     *
     * Format Model
     */
    class Format extends AppModel
    {
        var $name = 'Format';

        // <hasMany>
        var $hasMany = array(
                                'DVD' => array('className' => 'DVD')
                            );
    }

    ?> 
```

带有方法的控制器 app/Controller/FormatsController.php：

```
function index()
    {           // Ignore Format -related- data
        $this->Format->recursive = 0;

        // Get all formats from the database that have a status of '1'
        $formats = $this->Format->find('all', array(
                                                        'conditions' => array('Format.status' => '1')
                                                    ));

        // Save the Formats in a variable for display from the View
        $this->set('formats', $formats);
    } 
```

最后是 View app/View/Formats/index.ctp：

```
<?php
    // File: app/Views/Formats/index.ctp
?>

<div class='formats index'>

    <table>
        <thead> 
            <tr>
                <th> Format Name</th>
                <th> Description </th>
                <th> Actions </th>
            </tr>
        </thead>
        <tbody>
            <?php

            ?>
        </tbody>
    </table>

</div> 
```

我在 cakephp 根目录、应用程序根目录、webroot 目录中的 .htaccess 文件都符合 CakePHP 建议 @ [http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Installation.html](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Installation.html)。

我还将 RewriteBase [path to my app dir] 添加到每个 .htaccess 文件中，因为 Google 小组中的某个人说它对他们有用。

但是，每当我尝试加载“cakecms/Formats/index”时，我都会得到：

![在此处输入图像描述](../Images/f123c4d697597e7914d191cdfd383698.png)

有人对我缺少的东西有任何想法吗？我今天在一台新笔记本电脑上，这*一切*都在我的最后一台上工作。我必须错过一些东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:24:27.190

如果您有 url 重写问题，您通常会在默认主页上收到一条错误消息，而您没有，所以这可能不是问题。您应该检查的网址是`cakecms/formats`（注意小写“f”）。“索引”部分对于索引操作是可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:47:18.280

[解决了]

我*终于*弄清楚我错过了什么。我从未更改过默认值

```
<Directory [DocumentRoot] />
....
</Directory> 
```

我的 httpd.conf 文件中的目录。

当我在我的更具体的`<Directory...>`列表中允许覆盖时，我在我的默认 DocumentRoot 中拒绝它们。一旦我更改为`AllowOverride All`httpd.conf 中的默认 DocRoot 目录，Cake/Apache URL 路由就可以完美运行。

# c# - 无法从 C# 中的另一个项目引用项目

> ID：15103686
> 
> 赞同：2
> 
> 时间：2013-02-27T03:29:21.697
> 
> 标签：c#, wpf, visual-studio

我有一个工作 C# 应用程序。在此应用程序中，我需要添加对名为 WPF Notification的以下项目[链接的支持。](http://www.codeproject.com/Articles/36468/WPF-NotifyIcon#about_article)我想使用它的功能。

现在我已经将此项目添加到我的解决方案中。我无法在我的项目中正确引用它。所以我的解决方案文件是这个

```
Solution 
      Project 1 ( My Project )
      Project 2 ( WPF Project ) 
```

尝试按照[此处](http://www.codeproject.com/Articles/36468/WPF-NotifyIcon#about_article)链接中给出的说明进行操作@教程第 1 部分：基础知识我收到一条错误消息，提示

```
" The TaskbarIcon does not exist in the namespace "http://www.hardcodet.net/taskbar" 
```

XAML 代码：

```
<Window x:Class="bbb"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:tb="http://www.hardcodet.net/taskbar"
   <Grid>
    ...
       <tb:TaskbarIcon
      IconSource="/Icons/Error.ico"
      ToolTipText="hello world" />
    </Grid> 
```

注意： IconSource 可能会抛出错误，但没关系。一旦 TaskbarIcon 被识别，它就会被修复。

我对 C# 很陌生，所以我不确定如何解决这个问题。可能有一个简单的方法来解决，但我无法得到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:06:31.023

我可能只是编译您的 WpfTaskBar 项目，然后转到您的工具箱，右键单击它并选择选择项目，然后浏览到具有 Wpf-notifyicon 源的目录。然后，您需要向下钻取`wpf-notifyicon\NotifyIconWpf\bin\Release`并选择`Hardcodet.Wpf.TaskbarNotification.dll`这会将控件添加到您的工具箱中，然后您可以将其拖放到您的窗口中。如果这不可用，您可能需要先编译 wpf-notifyicon 项目以生成 dll。回想起来，这可能是您当前遇到的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:41:35.460

添加对项目的引用（由@Mark Hall 在评论中指定）可以做到

# objective-c - OS X 比重复调用 [NSFileManager attributesOfItemAtPath...] 更快的文件系统 API？

> ID：15103690
> 
> 赞同：2
> 
> 时间：2013-02-27T03:30:05.330
> 
> 标签：objective-c, c, performance, cocoa, nsfilemanager

如果我只需要知道文件是否是文件夹/符号链接及其大小，是否可以使用更快的文件系统 API。我目前正在使用 [NSFileManager attributesOfItemAtPath...] 并且只有 NSFileSize 和 NSFileType。

我应该使用任何批量文件系统枚举 API 吗？我怀疑这可能会更快，而不必跳入和跳出用户代码。

我的目标是通过目录快速递归以获得文件夹的真实文件大小，当前调用 attributesOfItemAtPath 是我 95% 的瓶颈。

我目前正在使用的一些代码：

```
NSDictionary* properties = [fileManager attributesOfItemAtPath:filePath error:&error];
long long fileSize = [[properties objectForKey:NSFileSize] longLongValue];
NSObject* fileType = [[properties objectForKey:NSFileType isEqual:NSFileTypeDirectory]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T05:05:51.860

如果你想变得更复杂，Mac OS 内核实现了一个独特的[`getdirentriesattr()`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/10.5/man2/getdirentriesattr.2.html)系统调用，它将返回指定目录中的文件*和*属性列表。设置和调用很麻烦，并且并非所有文件系统都支持它（！），但如果你能让它为你工作，它可以显着加快速度。

还有一个密切相关的[`searchfs()`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/10.5/man2/searchfs.2.html)系统调用，可用于快速搜索文件。它受制于大多数相同的陷阱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:47:21.803

是否更快我不确定，但`NSURL`会通过以下方式为您提供此信息[`getResourceValue:forKey:error:`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html%23//apple_ref/occ/instm/NSURL/getResourceValue:forKey:error:)

```
NSError * e;
NSNumber * isDirectory;
BOOL success = [URLToFile getResourceValue:&isDirectory
                                    forKey:NSURLIsDirectoryKey 
                                     error:&e];
if( !success ){
   // error
}

NSNumber * fileSize;
BOOL success = [URLToFile getResourceValue:&fileSize
                                    forKey:NSURLFileSizeKey
                                     error:&e]; 
```

如果您并不真正关心错误，您可能还会发现将其包装起来很方便：

```
@implementation NSURL (WSSSimpleResourceValueRetrieval)

- (id)WSSResourceValueForKey: (NSString *)key
{
    id value = nil;
    BOOL success = [self getResourceValue:&value
                                   forKey:key 
                                    error:nil];
    if( !success ){
        value = nil;
    }

    return value;
}

@end 
```

这是作为已弃用的文件管理器功能的替代品，该功能用于[旧 Cocoa-dev 线程](http://www.cocoabuilder.com/archive/cocoa/136498-obtain-directory-size.html#136503)[`FSGetCatalogInfo()`](http://developer.apple.com/library/mac/documentation/Carbon/Reference/File_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/FSGetCatalogInfo)中的解决方案，Dave DeLong 对此表示[赞许](https://stackoverflow.com/a/1276033/603977)。

对于枚举部分，文件系统编程指南有一节[“Getting the Contents of a Directory in a Single Batch Operation”](http://developer.apple.com/library/mac/documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/AccessingFilesandDirectories/AccessingFilesandDirectories.html#//apple_ref/doc/uid/TP40010672-CH3-SW27)，讨论使用[`contentsOfDirectoryAtURL:includingPropertiesForKeys:options:error:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/contentsOfDirectoryAtURL:includingPropertiesForKeys:options:error:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T04:53:22.047

您可以使用[stat](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/stat.2.html)和`lstat`. 查看[此答案](https://stackoverflow.com/a/14998984/944634)以计算目录大小。
[CPU 使用 attributesOfItemAtPath:error 引发：](https://stackoverflow.com/questions/10580422/cpu-raises-with-attributesofitematpatherror)

# jquery - 如何 jquery 获取元素并存储在数组中以备后用？

> ID：15103693
> 
> 赞同：1
> 
> 时间：2013-02-27T03:30:28.077
> 
> 标签：jquery, arrays

我正在尝试收集一组`<li>`我想稍后在循环中使用的特定元素。但是，我似乎没有正确的语法：调试控制台告诉我我的对象未定义。有人可以告诉我我做错了什么吗？

```
var all_help_triggers = [];
$(".canned-triggers > li").each(function() { all_help_triggers.push($(this)) });
all_help_triggers[0].click(function(){alert('hi!');}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T03:33:07.010

你可以简单地这样做：

```
// save selected jQuery objects into variable
var all_help_triggers = $(".canned-triggers > li");

// get first element in jQuery object, and assign a click handler
all_help_triggers.eq(0).click(function(){
    alert('hi!');
}); 
```

**编辑**（基于附加评论）：

要获取索引，请使用[`.index()`](http://api.jquery.com/index/)

```
$('.canned-content > li').hide();

$('.canned-triggers > li').click(function() {
    var i = $(this).index();
    $('.canned-content > li').eq(i).show();
}); 
```

[http://jsfiddle.net/samliew/erp2J/11/](http://jsfiddle.net/samliew/erp2J/11/)

如果您想在页面加载时隐藏列表，您应该在 CSS 中进行。代替：

```
$('.canned-content > li').hide(); 
```

删除该行并添加此 CSS：

```
.canned-content > li { display: none; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:34:41.447

当您使用 each() 时，“this”值指的是它迭代的“每个”元素。所以代替使用额外的数组，你应该尝试类似的东西......

```
$(".canned-triggers > li").each(function() { 
    $(this).click(function( {
       alert('hi!')
    });
}); 
```

刚刚注意到你的评论：

参见小提琴示例：http: [//jsfiddle.net/ScRqc/](http://jsfiddle.net/ScRqc/)

```
<ul class="canned-triggers">
    <li data-element="#li1">heyo1</li>
    <li data-element="#li2">heyo2</li>
    <li data-element="#li3">heyo3</li>
</ul>

<ul class="canned-content">
    <li id="li1">I'm heyo content 1</li>
    <li id="li1">I'm heyo content 2</li>
    <li id="li2">I'm heyo content 3</li>
</ul>

$('.canned-content > li').hide();

$('.canned-triggers > li').click(function() {
    var toggleElement = $(this).data("element");
    $(toggleElement).show();
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T03:35:28.427

您应该检查您的选择器是否返回任何内容。

此外，jQuery 集合类似于数组，这意味着您不需要将其显式转换为数组……您可以`for`毫无问题地循环遍历它。

但是，如果您仍然需要一个 JavaScript 数组，您可以使用以下代码来实现：

```
var all_help_triggers = $.makeArray( $(".canned-triggers > li") ); 
```

`$.makeArray`有关该方法的更多文档[here](http://api.jquery.com/jQuery.makeArray/)

# linux - 如何在 linux mint 上选择性地升级 jre

> ID：15103708
> 
> 赞同：0
> 
> 时间：2013-02-27T03:33:28.853
> 
> 标签：linux, ubuntu, package-management

我刚开始使用 linux mint（完全是 linux）。

我已经在上面安装了两个 jre 版本。一个 openjdk 和另一个 oracle jdk。这是我的 update-alternatives --config java 输出的内容 -

```
There are 2 choices for the alternative java (providing /usr/bin/java).

Selection    Path                                            Priority   Status

------------------------------------------------------------
0            /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java   1071      auto mode
1            /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java   1071      manual mode
* 2            /usr/lib/jvm/jre1.7.0_13/bin/java                2         manual mode 
```

我想升级上面 #2 中列出的 oracle jre。有没有办法选择性地升级它？

这是我尝试过的：
1\. 我尝试在包管理器中找到这个 jre，但我找不到它，可能是因为我手动安装了它。
2\. 'apt-get update' 并试图在 'apt-cache search' 中找到 oracle java，以便我可以从那里升级，但在搜索中再次找不到 oracle java。

我正在考虑尝试的最后一种方法是下载最新版本并将其与 1.7.0_13 一起安装并做出选择。但是，我想要一种升级现有的方法。

有什么输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:45:32.217

Ubuntu 和其他 Linux 发行版通常提供自定义的 linux 版本（例如 openJDK）。要安装官方版本，我建议你使用这个站点： http: [//www.devsniper.com/ubuntu-12-04-install-sun-jdk-6-7/](http://www.devsniper.com/ubuntu-12-04-install-sun-jdk-6-7/)，我从那里安装了它的步骤在我的机器上。

还有这个选项，专门讨论 Linux Mint 并且类似：http: [//www.vivaolinux.com.br/dica/Instalando-Java-no-Linux-Mint-Ubuntu-e-derivados](http://www.vivaolinux.com.br/dica/Instalando-Java-no-Linux-Mint-Ubuntu-e-derivados)

# ios - UIButton文本缩写？

> ID：15103711
> 
> 赞同：0
> 
> 时间：2013-02-27T03:34:15.510
> 
> 标签：ios, objective-c, xcode

好吧，这太简单了，以至于让我很烦恼。我正在尝试将按钮的文本从“文本”更改为“文本 (1)”。这么容易对吧？IB 中的文本设置为“文本”，我通过一个操作将文本更改为以下字符串来告诉它：

```
- (IBAction)textChange {

  button.titleLabel.text = @"Text (1)";

} 
```

然而，一些愚蠢的事情正在发生。当它更改文本时，按钮文本被缩写为“Te ...）”。如果我可以在 IB 的按钮中输入值“文本 (1)”并且它适合并显示应有的文本，为什么会这样做？按钮的宽度为 207，字体大小设置为 15..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:05:49.607

将您的文本设置为：

```
[button setTitle:@"Text (1)" forState:UIControlStateNormal]; 
```

并在：

```
[button setTitle:@"Text (1)" forState:UIControlStateSelected]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:38:16.113

有时，当您在 XCode 的设计工具中时，文本提要，但当您构建和运行时，会出现缩写。它以前发生在我身上。尝试放大按钮，然后重试。

# php - 增加文件上传大小 Wordpress / IIS 7

> ID：15103717
> 
> 赞同：5
> 
> 时间：2013-02-27T03:35:00.627
> 
> 标签：php, wordpress, iis-7, web-config

我正在尝试增加 Wordpress 博客中的文件上传大小，以允许管理员发布他的电子书和大型 PDF 文件。该站点托管在 GoDaddy / IIS 7 上。我尝试了以下操作，但没有成功：web.config： `<configuration><system.webServer><security><requestFiltering><requestLimits maxAllowedContentLength="10000000"/></requestFiltering></security></system.webServer></configuration>`

站点根目录中的 php.ini： `upload_max_filesize = 64M`

任何意见是极大的赞赏。谢谢，肖恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-05-24T11:17:13.407

在这里找到的解决方案：

步骤1：

> 首先，您需要编辑服务器的 PHP.ini 文件。这可以在您的 PHP 安装目录中找到，例如 c:\program files\php\php.ini 并设置以下值：
> 
> upload_max_filesize = 64M post_max_size
> = 64M
> max_execution_time = 300
> max_input_time = 300
> 
> 这允许 PHP 处理高达 64MB 的文件，并允许 PHP 脚本在超时前运行长达 5 分钟。

第2步：

> 最后，IIS 7 的默认文件上传限制为 30MB。任何比这更大的东西都会导致 IIS 返回一个非常无用的 404 状态。您可以在 [http://www.iis.net/ConfigReference/system.webServer/security/requestFiltering/requestLimits了解更多信息](http://www.iis.net/ConfigReference/system.webServer/security/requestFiltering/requestLimits)
> 
> 要覆盖这一点，您需要更改（每个）站点的 web.config 设置。（这里唯一的问题是限制应该以字节而不是千字节为单位。）以下是 MSDN 文档中的一些 copypasta：

不要忘记回收您的应用程序池，以便 IIS 获取您的 PHP.ini 更改。

就是这样！

[http://refactored.tumblr.com/post/4609761388/wordpress-iis7-uploads](http://refactored.tumblr.com/post/4609761388/wordpress-iis7-uploads)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T04:41:59.587

您将不得不修改活动的 php.ini，您可以从 phpinfo() 获取并相应地更改 post_max_size 和 upload_max_filesize。完成后重启iis

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-06T03:53:40.907

我不得不调整上面的第一个解决方案，因为我使用的是 Windows Share HostGator 站点。我在 httpdocs 中有一个名为：.user.ini 的文件，我添加了该文件：

```
upload_max_filesize = 256M
post_max_size = 256M
max_execution_time = 600
max_input_time = 600 
```

因为我需要它更大。我还补充说：

```
<security><requestFiltering><requestLimits maxAllowedContentLength="268435456"/> 
</requestFiltering></security> 
```

所以这允许我上传更大的文件。我希望能够上传大型视频或 mp3 文件。

# svg - Raphael.js + qTip2 多工具提示循环问题

> ID：15103719
> 
> 赞同：0
> 
> 时间：2013-02-27T03:35:25.937
> 
> 标签：svg, tooltip, raphael, qtip2

我让 Raphael + qTip2 制作 Pie SVG + Tooltip 悬停。

我遇到的问题是，当您将鼠标悬停在 SVG 扇区上时，它会显示代码中每个其他扇区的工具提示。我尝试将工具提示移到循环之外，并通过 .each 函数推送但无法解决问题。

基本标记如下：

```
<ul>
  <li>
    <a href="">Sector Title</a>
    <div>Tooltip</div>
  </li>
</ul> 
```

JSFiddle 应该说明一切：http: [//jsfiddle.net/MUFV7/4/](http://jsfiddle.net/MUFV7/4/)

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:18:55.883

使用以下方法修复了问题：

```
$(sector.node).qtip({ 
```

# python - Matplotlib PDF 后端慢？

> ID：15103724
> 
> 赞同：4
> 
> 时间：2013-02-27T03:36:14.717
> 
> 标签：python, matplotlib, pdf-generation

我正在使用 matplotlib 将一千个图写入 PDF。我已经优化了绘图代码，即。重用图形/轴/线并仅更改 y 数据。

大部分剩余时间都花在了 save_figure 上。

相比之下，R 似乎将绘图输出到 PDF 的速度大约快了 2 倍。在 R 中，所有零数据的绘图似乎更快，而在 Python 中它们的速度相同。

我设置了 pdf.compression = 0，这是一个小的改进。

尝试栅格化数据，它对绘图速度没有影响（尽管它使用了大量的 RAM）。

还有什么我可以尝试使用 PDF 后端加速 matplotlib，或者我应该考虑任何替代后端吗？我试图击败R。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:26:33.087

必须尝试Gael Varoquaux的[pyreport吗？](http://gael-varoquaux.info/computers/pyreport/)您在脚本上调用它，然后它会收集对 的所有调用`pylab.show()`，为每个调用创建一个 png，然后从中创建一个 PDF。

它最终使用乳胶，所以你需要这个。但我预计这可能会更快，因为 PDF 创建委托给 Latex。

# selenium - 为什么我的 selenium 网格集线器只接受 1 个 Firefox 实例

> ID：15103726
> 
> 赞同：0
> 
> 时间：2013-02-27T03:36:30.850
> 
> 标签：selenium, selenium-grid

我不明白为什么我无法让 Selenium Grid Hub 接受多个 Firefox 会话实例。据我所知，我正确配置了它，我得到的只是一个只需要 1 个实例的集线器。

```
java.exe -jar selenium-server-standalone-2.30.0.jar -role hub -browser 
"browserName=firefox,version=19,firefox_binary=C:\Program Files (x86)\Mozilla
 Firefox\firefox.exe ,maxInstances=5, platform=WINDOWS" -debug 
```

它显示一个错误，说它只能采用 1 个实例：

```
java version "1.6.0_38"
Java(TM) SE Runtime Environment (build 1.6.0_38-b05)
Java HotSpot(TM) Client VM (build 20.13-b02, mixed mode, sharing)

Feb 26, 2013 7:31:56 PM org.openqa.grid.selenium.GridLauncher main
INFO: Launching a selenium grid server
2013-02-26 19:32:02.605:INFO:osjs.Server:jetty-7.x.y-SNAPSHOT
2013-02-26 19:32:02.643:INFO:osjsh.ContextHandler:started o.s.j.s.ServletContextHandler{/,null}
2013-02-26 19:32:02.649:INFO:osjs.AbstractConnector:Started SocketConnector@0.0.0.0:4444
Feb 26, 2013 7:32:05 PM org.openqa.grid.internal.BaseRemoteProxy <init>
WARNING: Max instance not specified. Using default = 1 instance 
```

什么？？？？

[更详细的日志在这里](https://gist.github.com/djangofan/5044872)。

我的中心起始文件[在 GitHub 上](https://github.com/djangofan/WebDriverTestingTemplate/tree/master/root)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:57:01.727

AFAIK 集线器不需要使用浏览器详细信息启动。它是需要以浏览器规范启动的节点。

对于集线器启动，您只需要 java -jar selenium-server-standalone-2.xx.0.jar -role hub。

# jquery - 带有文本触发器的同一页面上的 Jquery 多个手风琴

> ID：15103727
> 
> 赞同：0
> 
> 时间：2013-02-27T03:36:33.117
> 
> 标签：jquery, jquery-ui, accordion

我需要在我的页面上有 4 个单独的 div（区域）。在这四个领域中的每一个领域我都有一个清单。列表需要是手风琴。他们不使用默认的 h3 标题作为触发器，触发器需要是每个列表正下方的文本链接，上面写着“扩展 +”。

因此，当您在相应的 div 中单击“Expand+”时，将出现列表。然后“Expand+”会变成“Close-”

所有的手风琴都需要在开始时关闭。

jqueryUI 和手风琴有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:47:40.277

对的，这是可能的。请参阅[`accordion`](http://api.jqueryui.com/accordion/)文档中的以下选项。

> [`active`](http://api.jqueryui.com/accordion/#option-active)：当前打开的是哪个面板。设置`active`为 false 将折叠所有面板。这要求`collapsible`选项为真。
> 
> [`header`](http://api.jqueryui.com/accordion/#option-header)：标题元素的选择器，通过`.find()`主手风琴元素应用。内容面板必须是紧跟在其相关标题之后的兄弟。

但是，您需要编写一些定制代码来处理文本更改。

可以在这里找到一个例子：http: [//jsfiddle.net/GoranMottram/dP5mn/](http://jsfiddle.net/GoranMottram/dP5mn/)

# mongodb - 如何在mongodb中进行这种查询

> ID：15103732
> 
> 赞同：1
> 
> 时间：2013-02-27T03:37:00.230
> 
> 标签：mongodb

假设我有 s mongo 数据库：

```
[
    {
        name: tom,
        tags: ["a","b"]
    }
    {
        name: lee,
        tags: ["b","c", "d"]
    }
    {
        name: jack,
        tags: ["c","d"]
    }
] 
```

我想找到标签包含的对象`b`，如上面`tom`和`lee`

那么我可以使用什么查询语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:38:52.637

```
db.collection.find({ tags: "b" }) 
```

就那么简单。

# image - 列出图像横幅的正确方法

> ID：15103733
> 
> 赞同：2
> 
> 时间：2013-02-27T03:37:39.253
> 
> 标签：image, html, html-lists, semantics

我想问一下使用'ul'的正确方法是什么？可以使用“ul”列出一些图像横幅吗？前任。我有 3 个带有标题的图像横幅，并且都向左浮动。我以前每次都会遇到这种情况，我想出的方法是第一个使用'ul'的标记。

是否可以使用以下标记：

```
<section class="banners">
   <ul>
      <li>
         <figure>
             <a href="#">
                  <img src="" width="" height="" alt="" />
               </a>
         </figure>
         <a href="#">title here</a>
      </li>
      <li>
         <figure>
             <a href="#">
                <img src="" width="" height="" alt="" />
             </a>
         </figure>
         <a href="#">title here</a>
      </li>
      <li>
         <figure>
         <a href="#">
            <img src="" width="" height="" alt="" />
         </a>
         </figure>
         <a href="#">title here</a>
      </li>
     </ul>
    </section> 
```

或者我应该使用：

```
 <section class="banners">
       <figure>
           <a href="#">
               <img src="" width="" height="" alt="" />
           </a>
           <figcaption>
               <a href="#">title here</a>
           </figcaption>
        </figure>
        <figure>
           <a href="#">
               <img src="" width="" height="" alt="" />
           </a>
               <figcaption>
                   <a href="#">title here</a>
               </figcaption>
         </figure>
         <figure>
           <a href="#">
               <img src="" width="" height="" alt="" />
           </a>
               <figcaption>
                   <a href="#">title here</a>
               </figcaption>
         </figure>
     </section> 
```

它们都代表语义编码吗？

这是图像横幅的示例 ![在此处输入图像描述](../Images/fafb2d858510baa8c2194f3469d8b65d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:47:52.793

由于 HTML5 规范如此反复无常，而且语义在实际中似乎并没有发挥重要作用，所以很难说。但是，根据您的图像，这看起来像是一个导航部分。因此，您可能希望将其与`<nav>`.

`<ul>`规格：[http](http://www.w3.org/TR/html5/grouping-content.html#the-ul-element)
`<figure>` ://www.w3.org/TR/html5/grouping-content.html#the-ul-element规格： http: [//www.w3.org/TR/html5/grouping-content.html#the -数字元素](http://www.w3.org/TR/html5/grouping-content.html#the-figure-element)

我不认为这些有多大帮助。它们都用于对内容进行分组。顺序无关紧要`<ul>`。

从我读过的内容来看，在我看来，它的目的`<figure>`是用于文档注释——描述相关图像等。规范特别指出这些可以移动到其他地方，比如附录，但这似乎不是适用于您的情况。

我认为`<figure>`这里不合适。相反，使用`<nav>`. 如果需要，您可以使用`<ul>`for 样式——它没有提供太多语义含义（只是一个有点通用的分组内容元素）。

# string - Python中的while循环将整数转换为字符串？

> ID：15103735
> 
> 赞同：0
> 
> 时间：2013-02-27T03:37:53.657
> 
> 标签：string, python-3.x, while-loop, integer

所以我似乎无法得到这个。如果没有“while”循环，这段代码可以正常工作，但是一旦我应用循环，它就会停止正常工作。由于某种原因，它将 x 视为字符串。就像 x 是 2 一样，它会将 y 打印为 '2222' 而不是 16。我还是新手，有人能告诉我为什么吗？谢谢！

```
go = 'y'

while go == 'y':

    print('enter x')
    x = input()

    y = x * 4

    print(y)
print('go again?')

go = input() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:46:56.657

Python 3 的`input`函数总是返回一个字符串。这是与 Python 2 的一个变化，后者`input`根据用户输入的内容返回不同类型的 Python 对象。Python 3 的版本等同于 Python 2 的`raw_input`.

考虑到这一背景，很容易修复您的代码。只需调用`int`构造函数将您的字符串转换为整数。或者，如果您想支持非整数值（如`1.4`），请`float`改用。

顺便说一句，由于您的代码当前在问题中被格式化，它有一个无限循环。`go`您的逻辑是否真的在顶层更改变量？如果是这样，它在循环期间永远不会改变，它将永远运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:46:40.243

这实际上取决于您的 python 版本。 `input`如果找到一个，它将自动将您的字符串转换为整数。为防止这种情况，请使用`raw_input`python < 3 中的函数。对于 python 3 及更高版本，我相信这是默认行为。

# sas - 如何在sas中显示更多小数

> ID：15103736
> 
> 赞同：1
> 
> 时间：2013-02-27T03:37:57.727
> 
> 标签：sas

我使用了 reg 或 robustreg 程序并得到了一个参数估计表，但是，其中一个系数是 0.0016，这是一个非常重要的系数，因为我不想将值除以 100 以获得更好的数据，有没有让 sas 在上述过程中包含更多小数的方法（reg/robustreg）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:49:47.983

1.  用于`ODS OUTPUT`将结果放入数据集中

2.  `format`您的结果输出`proc print` 用于获得显示所需的精度。

有关示例（使用参数估计），请参见[SAS 知识库。](http://support.sas.com/kb/37/106.html)

# iphone - UILabel 导致其他对象在 iOS 上重置位置

> ID：15103737
> 
> 赞同：0
> 
> 时间：2013-02-27T03:38:11.533
> 
> 标签：iphone, ios, uilabel

我正在学习为 iPhone 编程，并且正在制作一个简单的球反弹游戏，其中一个球在平台上向上反弹。游戏正常运行，当球到达屏幕顶部 1/4 时，球似乎向上移动（屏幕上的平台向下移动，类似于 Doodle Jump），但是我在尝试实现计分器时遇到问题。当球到达屏幕顶部的 1/4 时，我添加分数并运行以下两行代码：

```
NSString *nssScore = [NSString stringWithFormat:@"%i", score];
lblScore.text = nssScore; 
```

lblScore 是一个 UILabel 并链接到视图中的文本标签。每次屏幕上的文本更新时，球和所有平台都会返回到它们的起始位置，但球会保持其速度。逐行运行调试器时，我可以毫无错误地运行两行代码，问题在于下次刷新时屏幕上的文本发生变化。主游戏循环和帧速率使用以下代码行运行：

```
[NSTimer scheduledTimerWithTimeInterval:1.0/60 
   target:self selector:@selector(gameLoop) userInfo:nil repeats:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:12:20.730

这是布局约束的问题。这个问题实际上与标签没有任何关系，只是设置标签的值会触发重绘（或布局，我不确定到底调用了哪个方法）。最简单的解决方案是关闭 IB 中的自动布局（从屏幕右侧最左侧的选项卡开始）。或者，您可以通过为其约束设置动画而不是设置框架来移动球。

# javascript - Javascript：多次使用 document.getElementById(id).appendChild()？

> ID：15103740
> 
> 赞同：0
> 
> 时间：2013-02-27T03:38:23.043
> 
> 标签：javascript, document, appendchild

`document.getElementById(id).appendChild(img)`在以下代码中使用会导致浏览器出现问题吗？我想知道我是否在文档的生命周期内多次使用 appendChild() 更新图像可能会产生内存问题，或者只会创建一个节点？我知道下面的代码只加载一次图像，但我计划扩展代码以将图像随机更改为动画。`document.getElementById(id).appendChild(img)`在文档的生命周期中，文档会多次看到调用 。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Untitled Document</title>
    <script type="text/javascript">

    var img = document.createElement("IMG");      
    images = new Array(); 

    function random_image(id) 
    {
        var i = 0;              

            for(i = 0; i < 7; i++) 
            {               
              images[i] = "image" + i + ".jpg"
            }       

        var random = (Math.floor(Math.random()*7)); 
        img.src = images[random];
        document.getElementById(id).appendChild(img);
    }
    </script>
    </head>
    <body onload = "random_image('image')">
    <div id="image"></div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:41:31.930

如果您将其作为动画进行，则最好只使用适当的图像 url 更改图像标签的 src，而不是替换图像标签本身。

***根据第一条评论进行编辑***

您已经拥有所需的代码，但您所做的是每次都将图像重新附加到文档中。我的建议是更改您已经拥有的图像的 src 。

```
var img = document.createElement("IMG");      
images = new Array(); 
var i = 0;              
for(i = 0; i < 7; i++){               
    images[i] = "image" + i + ".jpg"
}  

function onLoad(){
    random_image('image');
    document.getElementById(id).appendChild(img);
}

function random_image(id){
    var random = (Math.floor(Math.random()*7)); 
    img.src = images[random];
}
window.onload = onLoad; 
```

请注意，我有点假设文档加载 evnet 不是您调用该函数的唯一时间。如果是这样，那么你的问题是没有实际意义的，因为你问的是经常调用它的影响。按照我展示的方式进行操作，您首先从文档中获取代码（一件好事），并使其成为任何调用代码都可以替换由该图像标签提供的图像文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:42:34.980

如果您使用 removeChild 从#image div 中删除图像，则不会。当您从文档中删除图像时，垃圾收集会迅速释放内存。因此，只要您不保留隐藏在 DOM 中某处的图像，就没有什么可担心的。

更好的想法是更改现有 img 标签的来源，这将替换图像而不创建或破坏新元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T03:42:57.147

如果你只做一次没关系

如果多次这样做，它将添加许多图像

# r - R igraph：如何找到最大的社区？

> ID：15103744
> 
> 赞同：4
> 
> 时间：2013-02-27T03:38:49.270
> 
> 标签：r, igraph

我使用 fastgreedy.community 生成一个社区对象，其中包含 15 个社区。但是如何才能提取出这 15 个社区中最大的一个社区呢？

```
Community sizes
1    2    3    4    5    6    7    8    9   10   11   12   13   14 
1862 1708  763  974 2321 1164  649 1046    2    2    2    2    2    2 
15 
2 
```

在此示例中，我想提取社区 5 以供进一步使用。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T09:33:46.523

假设您的 community 对象已命名`community.object`，则`which(membership(community.object) == x)`提取 community 中顶点的索引`x`。如果您想要最大的社区，您可以设置`x`为`which.max(sizes(community.object))`. 最后，您可以使用`induced.subgraph`将该特定社区提取到单独的图中：

```
> x <- which.max(sizes(community.object))
> subg <- induced.subgraph(graph, which(membership(community.object) == x)) 
```

# sql-server - 企业架构师数据库抽象

> ID：15103747
> 
> 赞同：-2
> 
> 时间：2013-02-27T03:39:03.887
> 
> 标签：sql-server, enterprise-architect

是否有不依赖于插件模型的企业架构师可用的数据层抽象？

我正在尝试将 EA 集成到构建系统中，但希望避免直接进入支持数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:25:47.937

是：EA 的对象模型。

对象模型不依赖于插件模型（反之亦然）。对象模型 API 在 Java 和 .NET 中可用，并提供对模型和 EA 存储库中的大多数其他信息的完全访问权限。

换句话说，您可以编写一个独立的应用程序，使用这些 API：s 而不是 SQL，从 EA 外部（即不是插件）访问 EA 存储库。

实际上，存储库数据库模式没有公开记录，不能保证不会在 EA 版本之间发生变化，也不打算用于适应开发。您可以这样做，但正如您所指出的，这是一个坏主意。

# salesforce - APEX Salesforce 中列表的最大大小

> ID：15103748
> 
> 赞同：3
> 
> 时间：2013-02-27T03:39:29.987
> 
> 标签：salesforce, apex-code, soql

我创建了一个 DataBase.Batchable 类，我在其中插入了一个名为**Event__c的自定义对象**

```
public class BatchCreateGCalendars implements Database.Batchable<SObject>, Database.Stateful, Database.AllowsCallouts {
 private List<Event__c> event_id;
} 
```

例如，我正在创建 1000 条类型事件的记录，然后使用该语句

```
insert event_id; 
```

这很好，还是一个一个地插入每个元素更合适？在我的自定义对象中，我只创建了一个 text(255) 类型的自定义字段，列表的最大大小是多少？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T04:06:03.363

列表的大小没有定义的限制。我认为您最终会遇到的限制是堆大小，目前批处理作业为 12 MB。但是，您需要注意可以通过 DML 处理的记录数量，目前为 10,000。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T07:43:36.760

两个问题结合在一起。

1）是的，如果可以的话，总是用一个对象列表来做 DML 语句。这将执行得更快，并将帮助您避免州长限制。（如果你没有，你真的应该检查[一下）](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_gov_limits.htm)

2）**编辑**：几年前曾经是 1K，现在它只是 Jeremy 所写的堆大小。您仍然有 1K 的集合传递给 visualforce（如果它是具有 readonly="true" 的页面，则为 10K），并且在所有查询中最多返回 50K 行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-05T14:16:38.703

Salesforce 对 visualforce 组件保留了 1000 个限制，因为大型数据表的重新渲染性能非常糟糕，并且可能使浏览器冻结，这是需要注意的事情。

随着列表开始变大，您需要注意的解决方法是**堆大小。**如果数据太大，我建议使用过滤（on `SOQL`）来减少需要返回给浏览器的数据。（`Select2`会成功的）

有几种方法可以解决问题。这是其中的几个...

*- 使用行和第一个参数来设置显示数据的偏移量和限制：*

```
<apex:repeat value="{!myCollection}" var="item" rows="1000" first="0">
{!item.text}
</apex:repeat>
<apex:repeat value="{!myCollection}" var="item" rows="1000" first="1000">
{!item.text}
</apex:repeat>
<apex:repeat value="{!myCollection}" var="item" rows="1000" first="2000">
{!item.text}
</apex:repeat> 
```

*- 使用包装：*

视觉力量页面：

```
 <apex:page controller="thousandLimit">    
        <apex:pageBlock >
            <apex:repeat value="{!thousandBlocks}" var="block">
                <apex:pageBlockTable value="{!block.Accounts}" var="a">
                    <apex:column value="{!a.Name}"/>                
                </apex:pageBlockTable>
            </apex:repeat>
        </apex:pageBlock>  
    </apex:page> 
```

控制器：

```
public class thousandLimit
    {
        private limitWrapper[] thousandBlocks = new limitWrapper[]{};

        private final integer listLimit;

        public thousandLimit()
        {
            listLimit = 999;
        }

        public limitWrapper[] getthousandBlocks()
        {
            thousandBlocks = new limitWrapper[]{};

            integer counter = 0;
            integer loopCount = 0;
            Account[] tmpAccount = new Account[]{};

            for(Account a:[SELECT Id, Name FROM Account])
            {
                if(counter < listLimit)
                {
                    tmpAccount.add(a);
                    counter++;
                }
                else
                {
                    loopCount++;
                    thousandBlocks.add(new limitWrapper(tmpAccount,loopCount));
                    tmpAccount = new Account[]{};
                    tmpAccount.add(a);
                    counter = 0;
                }            
            }

            if(thousandBlocks.size() == 0)
            {
                loopCount++;
                thousandBlocks.add(new limitWrapper(tmpAccount,loopCount));
            }

            return thousandBlocks;
        }

        public class limitWrapper
        {
            public Account[] accounts {get;set;}
            public integer blockNumber {get;set;}
            public limitWrapper(Account[] accs, integer i)
            {
                accounts = accs;
                blockNumber = i;
            }

        }
    } 
```

*- 您可以将用户`readonly`标签从**1k 增加到 10k**：*

```
<apex:page controller="thousandLimit" readonly="true">
   <apex:pageBlock >
      <apex:repeat value="{!thousandBlocks}" var="block">
            <apex:pageBlockTable value="{!block.cases}" var="c">
            <apex:column value="{!c.CaseNumber}"/>
            <apex:column value="{!c.owner.name}"/>
            <apex:column value="{!c.App_Process__c}"/>
            <apex:column value="{!c.Load__c}"/>
            <apex:column value="{!c.subject}"/>
            <apex:column value="{!c.Estimated_Completion_Date__c}"/>   
            <apex:column value="{!c.Complete__c}"/>
            <apex:column value="{!c.Priority}"/>
            <apex:column value="{!c.Case_Age_Days__c}"/>                    
            </apex:pageBlockTable>
        </apex:repeat>
     </apex:pageBlock>  
</apex:page> 
```

# objective-c - 在某些情况下使用双引号解析 CSV

> ID：15103749
> 
> 赞同：0
> 
> 时间：2013-02-27T03:39:30.907
> 
> 标签：objective-c, parsing, csv

我有带有格式的csv：

a1, a2, a3, "a4,a5", a6

只有带 , 的字段才会有引号

使用Objective-C，如何轻松解析这个？我尽量避免使用开源 CSV 解析器作为公司政策。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:19:30.533

我同意 rmaddy 的观点，即完整的 csv 解析算法超出了 SO 的范围，但是，这是解决此问题的一种可能方法：

1.  将整行提取为`NSString`
2.  遍历`NSString`，将每个字符推回另一个字符串。
3.  当遇到逗号时，保存存储的字符串，忽略逗号并创建一个新的空白字符串。
4.  重复直到行尾。
5.  设置一个标志来标识是否找到了双引号。如果设置了标志，则忽略步骤 3。当找到第二组引号时，取消设置标志并像以前一样继续。

这通常适用于任何语言（使用它们各自的本机字符串类），并且这种算法可以构成完整 CSV 解析器的小基础。但是，在这种特殊情况下，您可能不需要比这更多的功能。

对于一些示例代码，我鼓励您查看[我对这个与 CSV 相关的问题的回答，](https://stackoverflow.com/questions/14447425/reading-a-csv-into-nsobjects-and-then-sorting-them-by-different-criterias/14514060#14514060)因为它演示了一种在 Objective-C 中拆分和存储字符串的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-26T19:31:56.787

这个片段对我来说非常有用......

```
 BOOL quotesOn = false;
    NSString* line = @"a1, a2, a3, "a4,a5", a6";
    NSMutableArray* lineParts = [[NSMutableArray alloc] init];
    NSMutableString* linePart = [[NSMutableString alloc] init];
    for (int i = 0; i < line.length; i++)
    {
        unichar current = [line characterAtIndex: i];
        if (current == '"')
        {
            quotesOn = !quotesOn;
            continue;
        }
        if (!quotesOn && current == ',')
        {
            if (linePart.length > 0)
                [lineParts addObject: linePart];
            linePart = [[NSMutableString alloc] init];
        }
        if (quotesOn || current != ',')
            [linePart appendString: [line substringWithRange: NSMakeRange(i, 1)]];
    }
    if (linePart.length > 0)
        [lineParts addObject: linePart]; 
```

我的 5 个元素在 lineParts 数组中......

# javascript - 非常简单的 D3：如何绘制圆弧？

> ID：15103752
> 
> 赞同：6
> 
> 时间：2013-02-27T03:40:07.703
> 
> 标签：javascript, svg, d3.js

学习D3会很好。看了很多例子，我想我明白了。我的第一个项目是制作一个色轮，为简单起见没有过渡。但对于我的第一个项目来说，这似乎还不够简单！对于零项目，我试图在屏幕上显示一些东西。希望我写的东西（亲爱的阅读已经修复），而不是一个例子。

我做错了什么？ [http://jsfiddle.net/aGdMX/1/](http://jsfiddle.net/aGdMX/1/)

```
var arc = d3.svg.arc()
    .innerRadius(40)
    .outerRadius(100)
    .startAngle(0)
    .endAngle(1)
    ;

var chart = d3.select("body").append("svg:svg")
    .attr("class", "chart")
    .attr("width", 420)
    .attr("height", 420).append("svg:g")
    .attr("transform", "translate(200,200)")
    ;

chart.selectAll("path")
    .data(data)
    .enter().append("svg:path")
    .attr("fill", function(d, i){
        return d3.rgb("black");
    })
    .attr("d", arc)
    ; 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T04:34:28.233

您在此处的示例没有定义任何数据。如果您只想静态绘制 svg，请跳过 selectAll() 和 data() 绑定：

```
chart
    .append("svg:path")
    .attr("fill", function(d, i){
        return d3.rgb("black");
    })
    .attr("d", arc)
    ; 
```

或者定义一些数据并使用它来驱动绘图：

[http://jsfiddle.net/findango/aGdMX/2/](http://jsfiddle.net/findango/aGdMX/2/)

（加上`.attr("fill"`......应该是`.style("fill"`......）

# apache-flex - 如何在项目渲染器中选中/勾选复选框？

> ID：15103753
> 
> 赞同：0
> 
> 时间：2013-02-27T03:40:15.487
> 
> 标签：apache-flex, datagrid, itemrenderer

我有一个包含船舶对象的网格表（数据提供者接受船舶对象的数组集合），并在网格表中仅显示船舶名称和日期。我的船对象有一个名为 checkList 的布尔值属性，用作我的复选框项目渲染器中的数据绑定。（使复选框，勾选和取消勾选）

当我将 Image 对象添加到容器中时，我想检查我的复选框。被添加到容器中的 Image 对象有一个 id。我想将该图像 ID 与数据网格表中的 shipId 匹配，并选中该特定记录的复选框。

所以我的 Image 对象会监听 add 事件，所以当 Image 对象被添加到容器时。它调用 addHandler() 函数获取图像的 id，并通过数据网格表循环查找匹配的 id 并检查 CheckBox。我的循环工作得很好。使用 Alert.show() 我可以看到它与 id 匹配并将布尔值设置为 true，以便勾选复选框。但是该复选框未勾选。

这些是我的代码。即使该特定记录的 checkList 属性设置为 true。复选框未勾选。我不知道问题是什么。我是一名学生，刚接触 flex。有人可以帮帮我吗？

我的 MXML 视图：我的网格表

```
<s:DataGrid id="arrivalTable" x="-1" y="-1" width="302" height="205" requestedRowCount="4" 
                dataProvider="{myArrivalShips}" >               
        <s:columns>
            <s:ArrayList>                   
                <s:GridColumn dataField="shipName" headerText="Arrival Ships" itemRenderer="DesignItemRenderer.myCustomToolTipRenderer" width="130" ></s:GridColumn>
                <s:GridColumn dataField="ETA" headerText="ETD" itemRenderer="DesignItemRenderer.myCheckBoxRenderer"></s:GridColumn>                                                         
            </s:ArrayList>                  
        </s:columns>                
    </s:DataGrid> 
```

我的 Image 对象侦听添加事件。

```
displayImg.addEventListener(FlexEvent.ADD,addHandler); 
```

这是我的 addHandler() 事件函数：

```
protected function addHandler(event:FlexEvent):void
{
    var ImageShipId:String = Image(event.currentTarget).id;             
    var destination:BorderContainer = Image(event.currentTarget).owner as BorderContainer;
    var destinationId:String = destination.id;          

    if( destinationId == "bct_HoldingArea" ){

        for(var j:int = 0; j<arrivalTable.dataProvider.length; j++){

            var myShip:Ship = arrivalTable.dataProvider.getItemAt(j) as Ship;
            var myShipId:String = myShip.shipID.toString();

            if(StringUtil.trim(myShipId) == StringUtil.trim(ImageShipId)){                          
                myShip.checkList = true;
                Alert.show("The ship name : " + myShip.shipName +"\n" + "The Ship selected : " + myShip.checkList);
            }
        }           
    }               
} 
```

我的复选框项目渲染器：

```
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx" clipAndEnableScrolling="true">    
<s:HGroup>
    <s:Label text="{data.ETD}"  paddingTop="8"/>        
    <s:CheckBox id="myCheckBox" enabled="false" selected="{data.checkList}"  />
</s:HGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:37:23.497

更新对象后，您应该使用数据提供者的“刷新”方法：

```
(arrivalTable.dataProvider as ArrayCollection).refresh(); 
```

所以你的函数看起来像这样：

```
protected function addHandler(event:FlexEvent):void
{
var ImageShipId:String = Image(event.currentTarget).id;             
var destination:BorderContainer = Image(event.currentTarget).owner as BorderContainer;
var destinationId:String = destination.id;          

if( destinationId == "bct_HoldingArea" ){

    for(var j:int = 0; j<arrivalTable.dataProvider.length; j++){

        var myShip:Ship = arrivalTable.dataProvider.getItemAt(j) as Ship;
        var myShipId:String = myShip.shipID.toString();

        if(StringUtil.trim(myShipId) == StringUtil.trim(ImageShipId)){                          
            myShip.checkList = true;

            (arrivalTable.dataProvider as ArrayCollection).refresh();

            Alert.show("The ship name : " + myShip.shipName +"\n" + "The Ship selected : " + myShip.checkList);
        }
    }           
}               
} 
```

**//EDIT** 中间行的问题似乎是所谓的“中间行错误”。我在[这里](https://issues.apache.org/jira/browse/FLEX-28138)找到了一些信息。

为避免这种奇怪的事情，请尝试以这种方式更改您的渲染器代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx" clipAndEnableScrolling="true">   
<fx:Script>
    <![CDATA[
        import mx.utils.ObjectUtil;

        [Bindable]override public function get data():Object
        {
            return ObjectUtil.copy(super.data);;
        }

        override public function set data(value:Object):void
        {
            super.data = value;
        }

    ]]>
</fx:Script>

<s:HGroup>
    <s:Label text="{data.ETD}"  paddingTop="8"/>
    <s:CheckBox id="myCheckBox" enabled="false" selected="{data.checkList}"/>
</s:HGroup> 
</s:GridItemRenderer> 
```

**//编辑**

对这个技巧的简短解释：我发现除了中间行之外的每一行都会发生数据更新。我试图遵循数据网格的源代码。我认为负责此操作的代码行是：

```
renderer.data = dataItem; 
```

在 GridLayout.as 类中。

此行会导致除中间行之外的每一行的数据更新。为什么？Flex 比较这个表达式的两边，如果它们相等则什么都不做。在我们的例子中，它们并不相等，但它似乎是一个真正的错误。无论如何...我们需要等到 Flex 团队纠正问题。

作为一种临时解决方法，我通过在“get”函数中克隆对象来粗暴地更改表达式的左侧。因此，在任何情况下，比较现在都应该返回 FALSE，并且应该为每一行更新数据属性。

set 函数可以删除，但它是调试相同问题的好地方。

这不是一个好方法，但总比没有好。

# javascript - 无法使用 jQuery 更改 CSS 底部

> ID：15103755
> 
> 赞同：2
> 
> 时间：2013-02-27T03:40:29.533
> 
> 标签：javascript, jquery

我无法让这个工作的“其他”位。有谁知道问题是什么？

```
var navOpen = false;
                if (navOpen == false) {
                    $("nav").click(function() {
                        $(this).css("bottom","0");
                        navOpen = true;
                    });
                } else {
                    $("nav").click(function() {
                        $(this).css("bottom","-84");
                        navOpen = false;
                    });
                } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T03:45:07.193

条件是在错误的地方。

```
 var navOpen = false;
 $("nav").click(function() {
      if (navOpen == false) {
           $(this).css("bottom","0");
           navOpen = true;
      } else {
           $(this).css("bottom","-84px");
           navOpen = false;
      }
 }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T03:43:35.883

您将多个处理程序绑定到同一个元素，您可以使用`css`方法：

```
$("nav").click(function() {
   $(this).css("bottom", function(i, bottom) {
      return bottom === '0px' ? '-84px' : '0px';
     // return navOpen ? '-84px' : '0px';
   });
}) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T03:42:26.733

尝试

```
$(this).css("bottom","-84px"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-27T03:44:29.687

您需要定义计量（例如 px、%）。CSS 不仅仅支持像 HTML 属性那样的数字参数。

# jquery - 识别父复选框元素的值（不管它是否被选中）

> ID：15103762
> 
> 赞同：0
> 
> 时间：2013-02-27T03:41:16.633
> 
> 标签：jquery, checkbox, nested, return-value, parent

无论是否已选中，如何识别父复选框元素的值？

我正在使用带有复选框的 jQuery 嵌套菜单来创建一系列嵌套的伪选择元素。如果用户在嵌套菜单中选择了一个复选框，我想在父菜单中显示他们的选择以及相关复选框的值（即，如果用户选择*`name="bother_shoulders" value="Too_small"`*，则显示的文本应该是 'Shoulders' *（父值）* +' Too_small' *（选定的值）*）。

下面函数中的第一行标识了所选元素的值，但我不知道如何创建一个类似的函数来标识未选中的父元素的值。

JS

```
$(".dropdown_container ul li a").click(function () {
    var text = $(this).find("input").val();
    var currentHtml = $(".dropdown_box span").html();
    $(".dropdown_box span").html(currentHtml.replace(currentHtml, ''));
    $(".dropdown_box span").append(text);
}); 
```

HTML

```
<div class="dropdown_box"><span>1st Priority</span></div>
<div class="dropdown_container">
<ul>
    <li><a href="#"><label><input type="checkbox" name="first_dislike" value="Shoulders" />Shoulders</label></a>
    <ul>               
        <li><a href="#"><label><input type="checkbox" name="bother_shoulders" value="Too_small" class="goal-increase"/>Too Small</label></a></li>                
        <li><a href="#"><label><input type="checkbox" name="bother_shoulders" value="Too_big" class="goal-decrease"/>Too Big</label></a></li>
    </ul>  
    </li>  
    <li><a href="#"><label><input type="checkbox" name="first_dislike" value="Waist" />Waist</label></a>
    <ul>               
        <li><a href="#"><label><input type="checkbox" name="bother_waist" value="Too_defined" class="goal-increase"/>Too Defined</label></a></li>                
        <li><a href="#"><label><input type="checkbox" name="bother_waist" value="Not_defined" class="goal-decrease"/>Not Defined</label></a></li>
    </ul>  
    </li> 
    <!-- More List Items with Nested Menu Items --!>
</ul>
</div> 
```

* * *

**更新 -**

它几乎可以工作了:-) 我已经获得了两个非常棒的解决方案*（感谢@Madbreaks 和@Samuel Liew）*，用于在检查父元素或子元素时识别正确的值，但我仍然遇到最终问题功能的一部分 - 取消选中项目时删除这些值。

**@Madbreaks 的解决方案为父元素***和*`<li>`子`<ul>`元素*（父子元素**）*添加了类*`class="dislike"``class="reason"`*

```
$(".dropdown_container ul li.dislike a").click(function () {
    var dislike = $(this).find("input").val();
    var dislike_formatted = dislike.replace(/_/g, " ");
    var currentHtml = $(".dropdown_box span").html();
    $(".dropdown_box span").html(currentHtml.replace(currentHtml, ''));
    $(".dropdown_box span").append(dislike_formatted);
});
$("ul.reason a").click(function () {
    var reason = $(this).find("input").val();
    var dislike = $(this).parents('li.dislike').find("input").val();
    var reason_formatted = reason.replace(/_/g, " ");
    var dislike_formatted = dislike.replace(/_/g, " ");
    var currentHtml = $(".dropdown_box span").html();
    $(".dropdown_box span").html(currentHtml.replace(currentHtml, ''));
    $(".dropdown_box span").append(dislike_formatted + ': ' + reason_formatted);
}); 
```

在这里发布了一个工作小提琴：[jsfiddle.net/chayacooper/Ejqp9](http://jsfiddle.net/chayacooper/Ejqp9)

**@Samuel Liew 的解决方案**替换`var currentHtml = $(".dropdown_box span").html();`为：

```
var currentHtml = '';
var $parent = $(this).parent().parents('li');
if($parent[0]) {
    var text2 = $parent.find("input").val();
    currentHtml = text2 + ': ' + currentHtml;
} 
```

在这里发布了一个工作小提琴：[jsfiddle.net/samliew/H3n6m/11/](http://jsfiddle.net/samliew/H3n6m/11/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:51:31.480

在您的点击处理程序中，执行以下操作：

```
var parentVal = $(this).parents('li').eq(1).find('input').val(); 
```

这会在 DOM 层次结构中搜索被点击元素的祖先，节点类型为`li`。然后它说“给我第二个最远的元素”，然后在其中找到输入。正如我在评论中所说，我建议[验证您的 HTML](http://validator.w3.org/)。我还建议适当缩进它，因为它可以帮助解决这些问题更明显。

**编辑**

我的建议是`class`为您的元素添加一些属性。这使得解决这些类型的问题几乎是微不足道的。例如（使用正确缩进的代码）-

```
<div class="dropdown_box"><span>1st Priority</span></div>
<div class="dropdown_container">
    <ul>
        <li class="dislike">
            <a href="#"><label><input type="checkbox" name="first_dislike" value="Shoulders" />Shoulders</label></a>
            <ul class="reason">               
                <li><a href="#"><label><input class="area" type="checkbox" name="bother_shoulders" value="Too_small" class="goal-increase"/>Too Small</label></a></li>                
                <li><a href="#"><label><input type="checkbox" name="bother_shoulders" value="Too_big" class="goal-decrease"/>Too Big</label></a></li>
            </ul>  
        </li>  
        <li class="dislike">
            <a href="#"><label><input type="checkbox" name="first_dislike" value="Waist" />Waist</label></a>
            <ul class="reason">               
                <li><a href="#"><label><input type="checkbox" name="bother_waist" value="Too_defined" class="goal-increase"/>Too Defined</label></a></li>                
                <li><a href="#"><label><input type="checkbox" name="bother_waist" value="Not_defined" class="goal-decrease"/>Not Defined</label></a></li>
            </ul>  
        </li> 
    </ul>
</div> 
```

注意`class="dislike"`和`class="reason"`属性。现在，您可以更轻松地确定单击处理程序的范围并引用其他节点。我上面的第一个例子：

```
$('ul.reason a').on('click', function(){
    // The sublist item was clicked, do something with the value:
    var reason  = $('input', this).val(),
        dislike = $(this).parents('li.dislike').find('.goal-increase').val();

    // Do something with the values...
}); 
```

`<a>`现在做一些类似的事情，一个包装`.goal-increase`复选框的点击处理程序。

有很多方法可以解决这个问题，但希望你能看到这是有帮助的。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:54:21.187

```
$(".dropdown_container ul li a").click(function () {
    var text = $(this).find("input").val();
    var currentHtml = ''; // reset display text

    var $parent = $(this).parent().parents('li');
    // if parent list item exists
    if($parent[0]) {
        // search for the text box
        var text2 = $parent.find("input").val();
        currentHtml = text2 + ': ' + currentHtml;
    }
    $(".dropdown_box span").html(currentHtml);
    $(".dropdown_box span").append(text);
}); 
```

[http://jsfiddle.net/samliew/H3n6m/11/](http://jsfiddle.net/samliew/H3n6m/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T03:51:21.673

如果您所追求的是在当前复选框`<li>`之前的检查中`<ul>`，那么您可以像这样得到：

```
$(".dropdown_container ul ul li a").click(function () {
    var checkboxVal = $(this).closest("ul").prev("li")
                        .find("input:checkbox").val();
}); 
```

这将获取 parent `<ul>`，然后获取它`<li>`之前的，然后在 that 中找到复选框`<li>`，然后获取该复选框的值。

# c - 是否应该将“initCount”变量声明为“volatile”？

> ID：15103765
> 
> 赞同：0
> 
> 时间：2013-02-27T03:41:28.817
> 
> 标签：c, multithreading

```
static int initCount = 0;

int objInit(void)   
{ 

    int i;

    /* Check for reentrancy */

    TaskLock ();
    i = initCount++;
    TaskUnlock ();

    if (i > 0)
        {
        while (!initialized)
            TaskDelay (100);

        return (OK);
        }
    ......
} 
```

`initCount`应该声明变量`volatile`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:43:42.197

不，它不需要`volatile`。然而`TaskLock ()`，必须施加某种内存屏障以确保操作按该顺序执行，即首先锁定，然后加载`initCount`。您的锁定原语可能已经这样做了。

* * *

[易失性：对于多线程编程几乎没用](http://software.intel.com/en-us/blogs/2007/11/30/volatile-almost-useless-for-multi-threaded-programming)。

# python - 如何在 python 中访问 IEEE 754 中定义的舍入模式？

> ID：15103768
> 
> 赞同：3
> 
> 时间：2013-02-27T03:41:36.707
> 
> 标签：python, floating-point, decimal, ieee-754, floating-point-precision

我需要在 Python 中精确计算单精度浮点数。

我尝试过的选项是`decimal.Decimal`和`numpy.float32`。但是`Decimal`，它不基于 IEEE 754，并且`float32`不允许使用舍入模式。令人惊讶的是，舍入模式是 IEEE 754 的标准特性，但 Python 中不存在它的内置实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:49:13.640

gmpy2库会做你想做的[事。](https://code.google.com/p/gmpy/)

```
>>> import gmpy2                                                                                                                  
>>> gmpy2.set_context(gmpy2.ieee(32))
>>> ctx=gmpy2.get_context()
>>> ctx
context(precision=24, real_prec=Default, imag_prec=Default,
        round=RoundToNearest, real_round=Default, imag_round=Default,
        emax=128, emin=-148,
        subnormalize=True,
        trap_underflow=False, underflow=False,
        trap_overflow=False, overflow=False,
        trap_inexact=False, inexact=False,
        trap_invalid=False, invalid=False,
        trap_erange=False, erange=False,
        trap_divzero=False, divzero=False,
        trap_expbound=False,
        allow_complex=False)
>>> gmpy2.const_pi().digits(2)
('110010010000111111011011', 2, 24)
>>> ctx.round=gmpy2.RoundDown
>>> gmpy2.const_pi().digits(2)
('110010010000111111011010', 2, 24)
>>> ctx.round=gmpy2.RoundUp
>>> gmpy2.const_pi().digits(2)
('110010010000111111011011', 2, 24)
>>> 
```

gmpy2 提供对 GMP、MPFR 和 MPC 任意精度库的访问。MPFR 支持用户可定义的精度和指数限制的正确舍入算术。

免责声明：我维护 gmpy2。

# meteor - Meteor 用户属性

> ID：15103770
> 
> 赞同：4
> 
> 时间：2013-02-27T03:41:55.993
> 
> 标签：meteor

我希望能够在 Meteor 身份验证系统中将用户标记为“管理员”，并允许该用户做一些特殊的事情，以及显示一些如果他们不是管理员我不会显示的 gui 元素。我已经尝试在用户对象上设置一个“管理”属性，这在服务器端可以正常工作（对于管理操作的 RPC），但是我需要在客户端访问它以更改渲染页面，并且似乎只有电子邮件是使用 Meteor.user() 对象发送的。

基本问题：如何分配服务器和客户端都可以看到的用户特定属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T03:52:34.613

对于未来的任何人，只需在数据库的用户表中分配值。您可以使用以下命令向用户发布其他字段：

```
Meteor.publish("userData", function () {
     return Meteor.users.find({_id: this.userId}, {fields: {'admin': 1}});
}); 
```

在客户端：

```
Meteor.subscribe("userData"); 
```

噗。直接来自[文档](http://docs.meteor.com/#meteor_user)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T15:08:13.157

您还可以在用户的​​“配置文件”属性中添加属性。profile 属性已经填充到客户端：

```
Meteor.users.update({_id: userId}, {$set: {'profile.admin': 1}});

//on client side
Meteor.user().profile.admin 
```

# javascript - JavaScript 文本框是空的吗？

> ID：15103772
> 
> 赞同：0
> 
> 时间：2013-02-27T03:41:58.237
> 
> 标签：javascript, html

提交表单时如何检查 JavaScript 中的输入字段是否为空？

html:

```
<input type="text" name="start_name" id="start_name"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:49:46.633

参考[http://www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp)

将您的表单标签设置为

```
<form name="myForm" action="demo_form.asp" onsubmit="return validateForm()" method="post"> 
```

接下来，有一个javascript函数

```
<script>
function validateForm()
{
var x=document.forms["myForm"]["start_name"].value;
if (x==null || x=="")
  {
  alert("Start name must be filled out");
  return false;
  }
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:47:07.740

```
var start_name = document.getElementById('start_name');
if( start_name.value.length > 0 ){
// Then there is something there.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T03:49:16.873

尝试。

```
<script type="text/javascript">
    function checkme()
    {
        var inputVal = document.getElementById("start_name").value;
        if(inputVal == "")
        {
            //code
        }
    }
</script>

<form action="" method="post" onSubmit = "checkme();">
    <input type="text" name="start_name" id="start_name">
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T06:17:52.440

仅检查 'if (x==null || x=="")' 不足以验证空文本框。去正则表达式检查空文本框。

```
/^\s*[0-9a-zA-Z][0-9a-zA-Z ]*$/ 
```

确保至少一个字符不是空格并且是允许的字符之一。

使用`/[a-z]/i`此正则表达式仅在至少有一个字母字符时才匹配。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-27T03:47:34.400

```
<form action="someActionUrl" onsubmit="return validate('first_name')">
<input id="first_name" name="first_name" />
</form>

<script>
    function validate(inputId){
        var val = document.getElementById(inputId).value;

        if(val.length>0){
          // do something
           return true;
        }
        return false;
    }
</script> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-27T03:48:45.657

试试这个： var x = document.getElementById("start_name"); if(x.value== "") { //你的限制代码在这里 } else { //继续！}

注意：请检查语法是否正确。我直接在这里编写代码，没有在IDE上检查过。

# google-sheets - 尝试为此示例查找 Google 电子表格公式或查询

> ID：15103774
> 
> 赞同：0
> 
> 时间：2013-02-27T03:42:15.817
> 
> 标签：google-sheets

```
 A | B |  C  |  D  |  E   |  F  | G
name|num|quant|item|quant2
car | 5 | 100 |
    |   |     |wheel| 4
    |   |     |axel | 2
    |   |     |engine|1
truck| 2 | 20 |   
    |   |     |wheel| 6
    |   |     |bed  | 1
    |   |     | axel| 2 
```

我需要一个可以做 B*C*E 的公式。表格看起来像这样，所以它需要是这样的

=b$2*c$2*e3 然后拖.... 然后是下一组 b$6*c$6*e7 和拖，等等，但我想知道如何获得顶峰之类的东西。如果 b5 为空，则查看上面的每一个，直到找到未填充的那个。

我正在尝试使用它来获取每辆汽车、卡车等的零件总量......然后按部分分组。

我没有一组数据库表来执行此操作，只有一个电子表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:42:32.553

我不得不添加一些额外的信息来解决这个问题。

我在想有一种方法可以做一个谷歌脚本来做这个并更新文件，但我似乎找不到它。

我首先总结了每个组项目：

```
=b$3*e4 
```

并为该分组拖动。

然后，我去了一个空间选择并写了一个查询。

```
=query(D:F, "select D,sum(F) group by D") 
```

# android - AVD - PANIC：无法打开... - 不是路径问题

> ID：15103782
> 
> 赞同：37
> 
> 时间：2013-02-27T03:42:59.563
> 
> 标签：android, emulation, avd

我想编写一个 Android 应用程序，我今天早上开始*加载 JDK、eclipse、SDK*等，所有这些都`adt-bundle-windows-x86_64-20130219`来自[http://developer.android.com](http://developer.android.com)。

我现在的问题：

> [2013-02-27 13:36:26 - Test2] Android 发布！
> [2013-02-27 13:36:26 - Test2] adb 运行正常。
> [2013-02-27 13:36:26 - Test2] 执行 com.example.test2.MainActivity 活动启动
> [2013-02-27 13:37:27 - Test2] 使用虚拟设备“droidX2”启动新模拟器
> [2013 -02-27 13:37:27 - 模拟器] 恐慌：无法打开：droidX2

我整个上午都在筛选网络上有关**AVD**的帖子，但我还没有看到不涉及路径被弄乱并且`.ini`找不到的帖子。我不认为我有路径问题。AVD 正在寻找文件`D:\USERS\XXX\.android\avd`，这就是文件所在的位置。所以不明白为什么模拟器打不开。

我已经完成了最基本的操作，例如删除并重新安装所有内容，阅读 orace 上的注释等。基本上我被卡住了。这里有什么建议吗？

`adt-bundle-windows-x86_64-20130219`是我在 Windows 7（32 位）上加载的。

我愿意在连接到 PC 的移动设备上进行测试，但我也无法让它工作！

任何方向表示赞赏。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-27T04:22:58.993

这已经被问过几次了，试试这些：

> 创建一个名为：ANDROID_SDK_HOME 的环境变量并将其设置为 C:\Users\Administrator 打开 Eclipse > Window > Preferences 并单击 Run/Debug and String Substitution 添加一个名为：user.home 的新变量并将其设置为 C:\Users\管理员 创建一个 AVD 并运行它。

[科林的原始答案](https://stackoverflow.com/a/9010020/1221203)

一个android项目成员[在这里](https://code.google.com/p/android/issues/detail?id=19084)说：

> 作为一种解决方法，您可以定义环境变量 ANDROID_SDK_HOME 以指向包含您的 .android 目录的目录。模拟器和 SDK 管理器会正确选择它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-04T02:51:05.400

验证`avd`搜索的位置与实际创建的位置不同。请查看下面的屏幕截图以获取更多信息。

![Android Virtual Devices Manager - 虚拟设备的位置](../Images/c6b9051c97fc9e022190a8cd1a051699.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-12T04:13:42.057

另一种选择：符号链接...

在命令提示符（具有管理员权限）中，将目录（“cd”）更改为“ **C:\Users\YourUserName.android** ”，然后使用以下命令创建指向 avd 目录的符号链接（注意斜杠的方向） ：

 ****```
mklink /D avd D:\_MyLibrariesDir\.android\avd 
```** 

**其中“ **_MyLibrariesDir** ”是您的库（照片、文档等）文件夹所在的目录。**

 **你完成了！

* * *

说明：这与选项具有相同的效果，`ANDROID_SDK_HOME`只是您现在可以浏览到**[C:\Users\YourUserName\.android\avd\*]**和**[D:_MyLibrariesDir\.android\avd\*]**并且两者都会带您到同一个地方。

这与快捷方式的不同之处在于快捷方式不充当目录，因此如果您只有“avd”文件夹的快捷方式，则无法像它那样转到“ **C:\Users\YourUserName\.android\avd*** ”产生文件未找到错误，如果您尝试单击 avd 快捷方式文件，它会将您带到**[D:_MyLibrariesDir\.android\avd\*]**而不是将您保留在 C 驱动器上。符号链接以对用户和软件透明的方式充当位置之间的桥梁。很方便:)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-12-23T02:50:11.577

我通过以管理员身份运行 Eclipse 修复了 AVD Panic 问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-13T15:22:40.463

在 Ubuntu 上，如果您以 root (sudo) 身份运行 eclipse，请检查当前用户 eclipse 找不到 /root/.android 设置用户主页

```
user.home /home/<user>/ 
```

并将 AVD 文件复制到新目录中，而不是更改权限

```
cd /home/<user>/
chgrp <user> -R .android
chgrp <user> -R .android 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-27T18:06:02.347

简单地说，如果没有什么适合您，只需将`avd`您可以在文件夹中找到的`.android`文件夹复制到`C:\Users\<user name>\.android`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-20T17:01:53.733

请在您的“.android”文件夹中检查一次，可能已经创建了另一个/重复的“.android”文件夹。如果“是”是你的答案，那么做这件事，因为在我的情况下，这件事发生了。简单地说，我只在这个目录“C:\Users\USER NAME\”中保留了最新的“.android”文件夹（删除了重复的），然后模拟器开始为我工作。干杯

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-06T09:02:22.573

尝试使用英语添加新的 Windows 管理员用户 它只对我有用 用户名应该是英文字母

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-28T11:16:14.870

找到了一个简单的方法来让它工作 - 值得一试： 1\. 如果你还没有它 - 如果你看到覆盖警告 - 用有问题的名称创建一个新的 AVD（在本例中为 droidX2） - 覆盖它。2\. 删除您刚刚在步骤 1 中创建的新 AVD。 3\. 如果您有另一个 AVD，那没关系，如果没有 - 创建一个。4\. 重新尝试将 Eclipse 项目作为 Android 应用程序运行 - 现在它应该可以运行了

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-10T19:37:23.470

单独设置`ANDROID_SDK_HOME`环境变量适用于 Win7 及更早版本，但在 Win8 上对我没有帮助。

对于那些使用 Windows 8 垃圾的可怜的受折磨的灵魂，请转到您安装了 Android SDK（例如`C:\SDK\Android`或）的任何地方，并`C:\Users\JoeCitizen\AppData\Local\Android\android-sdk`确保两者都设置为以管理员身份对所有用户运行。一旦我这样做了，它就工作得很好。`AVD Manager.exe``SDK Manager.exe`

另一个具有欺骗性的问题 - 不应该是由完全失败引起的问题，即大约 Windows 8 的权限管理。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-10-09T22:25:20.400

使用 Windows 7、Eclipse、Android SDK 工具 23.0.4

我第一次按照[http://developer.android.com/training/index.html](http://developer.android.com/training/index.html)上的确切说明进行操作时， 每当“启动”模拟器时出现错误“恐慌：无法打开..”。

解决方法：弹出系统属性/环境变量/系统变量，添加新条目 **name="ANDROID_SDK_HOME", value = "D:\DATA\Users\ThisUser\"** 然后开始工作！

“D:\DATA\Users\ThisUser\”是“.android/avd”文件夹所在的父文件夹。这里的avd文件夹路径是“D:\DATA\Users\ThisUser.android\avd”

请注意，您必须输入“D:\DATA\Users\ThisUser\”，而不是“D:\DATA\Users\ThisUser**.android**”****

# python - 这个赋值语句中的逗号有什么作用？

> ID：15103786
> 
> 赞同：2
> 
> 时间：2013-02-27T03:43:42.387
> 
> 标签：python, tuples, variable-assignment

我正在查看我发现的一个有趣的示例脚本（在[这个站点](http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/)，最后一个示例行 124），我正在努力理解逗号之后`particles`在这一行中实现的内容：

```
particles, = ax.plot([], [], 'bo', ms=6) 
```

如果省略逗号，脚本将出错，但语法（似乎类似于解包语句）对我来说没有多大意义，并且像这样的语句

```
a, = [2,3] 
```

失败，这似乎是反对拆包理论的论据。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T03:44:24.027

需要解包 1 元组（或任何其他长度为 1 的序列）。例子：

```
>>> a,b = (1,2)
>>> print a
1
>>> print b
2
>>> c, = (3,)
>>> print c
3
>>> d = (4,)
>>> print d
(4,) 
```

注意 c 和 d 之间的区别。

注意：

```
a, = (1,2) 
```

失败，因为您需要左侧的项目数量与右侧的可迭代项包含的项目数量相同。Python 3.x 在某种程度上缓解了这一点：

```
Python 3.2.3 (v3.2.3:3d0686d90f55, Apr 10 2012, 11:09:56) 
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> a,*rest = (1,2,3)
>>> a
1
>>> rest
[2, 3] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T03:51:01.617

看看`plot`调用返回什么。在您的情况下，它是一个包含一个元素的列表：

```
>>> import matplotlib.pyplot as plt
>>> ax = plt.gca()
>>> ax.plot([], [], 'bo', ms=6)
[<matplotlib.lines.Line2D object at 0x353d6d0>] 
```

现在，在这种情况下，在实际 Line2D 对象上使用句柄会更有用，使用解包`h, = ax.plot(...)` 而不是像你会得到的那样围绕它的虚假容器

`h = ax.plot([], [], 'bo', ms=6)`

后者将需要您稍后采取额外的步骤，例如

```
h[0].set_data(...) 
```

plot 的返回值始终是一个列表，因为有时它需要返回多个 line 对象。甚至在列表中返回单行更有意义，这样客户端代码就不必以不同的方式处理每种情况。

* * *

解包`a, = [2,3]`失败的原因是右侧有 2 个要解包的东西，并且只有一个变量。你需要用它`a,b = [2,3]`来解压。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T03:54:29.237

为了教育起见，我将把它写得有点长。

在 Python 中，元组用括号分隔，例如：`(1, 2, 3)`.

不幸的是，如果指定为 simple ，则仅由单个元素组成的元组 like`1`将是模棱两可的（从解析的角度来看）`(1)`，因为这可能意味着表达式中间括号内的*整数1。*

为了克服这个问题，您可以指定一个只有一个元素的元组，该元素后跟一个逗号，如`(1,)`. （为了清楚起见，*逗号*是使它成为元组的原因，而不是括号，当事情不模棱两可时我们可以省略它，这就是我在下面所做的）。毫无疑问，元组包含一个单一`1`的元素作为其元素，如下面的示例所示：

```
>>> a = (1)
>>> a
1
>>> b = (1,)
>>> b
(1,)
>>> b[0]
1
>>> c, = b
>>> c
1
>>> 
```

您提到的是一种“解包”元组的方法，即访问元组的特定元素。您使用的语法的一种替代方法是用 0 对元组中的元素进行索引，就像`b[0]`上面示例中的我一样。

对于具有多个元素的元组，您只需指定与元组具有*相同数量*的元素的属性即可解压缩它们：

```
>>> x, y = (1, 2)
>>> x
1
>>> y
2 
```

如果在解包元组时不使用相同数量的元素，则会引发异常：

```
>>> z, = (1, 2, 3)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: too many values to unpack
>>> 
```

在解包理论“失败”的“示例”中，您可以简单地使用：

```
>>> a, _ = [2, 3]
>>> a
2 
```

请注意`_`那里，这是 Python 中用于表示“我们不在乎”的常用变量。

作为附录，请注意在 中，您正在从一个可变类型的*列表*`a, _ = [2,3]`隐式创建一个不可变类型的*元组。*（请注意，这种“隐式”转换是概念性的，因为 Python 解释器可能不会在字节码中生成指令）。请注意以下归因中的微妙之处：*`BUILD_TUPLE`*

 *```
>>> a, b = [2, 3]
>>> a
2
>>> b
3
>>> a, b
(2, 3)
>>> c, d = tuple([2, 3])
>>> c
2
>>> d
3
>>> e = [2, 3]
>>> type(e)
<type 'list'>
>>> type((a, b))
<type 'tuple'> 
```*

# javascript - 是否可以从我的页面中获取另一个标签 URL？

> ID：15103788
> 
> 赞同：2
> 
> 时间：2013-02-27T03:43:47.470
> 
> 标签：javascript, html

我的浏览器选项卡中有谷歌或其他一些网站。在另一个选项卡中，我有我的 html 页面。我想在我的 html 页面中获取该 google 页面的 url。请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:08:32.017

否 无法获取用户打开的其他选项卡的 URL 它违反隐私和安全威胁，您只能通过使用 `window.location` 和`window.location.search`获取查询字符串来访问当前选项卡的 URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:37:10.390

好吧，我不确定您所说的“共同浏览概念”是什么意思，但就像 vignesh 所说，这是对网页的安全威胁。可能你最好的选择是写一个扩展。方法如下：（[Chrome](http://developer.chrome.com/extensions/getstarted.html)、[Firefox](http://blog.mozilla.org/addons/2009/01/28/how-to-develop-a-firefox-extension/)）。

**编辑：**实际上，对于 Firefox，这会容易得多：[https ://addons.mozilla.org/en-US/developers/](https://addons.mozilla.org/en-US/developers/)

希望这可以帮助！

# angularjs - 如何在 Angular UI 引导对话框中使用模板？

> ID：15103789
> 
> 赞同：2
> 
> 时间：2013-02-27T03:43:50.113
> 
> 标签：angularjs, angularjs-directive

我正在使用[Angular UI 引导模块](https://github.com/angular-ui/bootstrap/tree/master/src/dialog)来打开一个对话框。

有一个选项可以提及模板的路径，例如

```
$scope.opts = {
            backdrop: true,
            keyboard: true,
            backdropClick: true,
            template: '<p>Template</p>',
            controller: 'TestDialogController'
          } 
```

我的应用程序在 `site/app` 那时`js , partials`

我无法找到它如何找到模板

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T02:56:14.663

Angular UI 引导对话框采用内联模板，

```
template: '<p>This is a inline template</p>'; 
```

或者模板 url 可以指定为相对路径和绝对路径。

```
templateUrl: '/relative/path/dialog.html'; 
```

*尝试首先打开指向您的模板的浏览器选项卡，当您成功导出路径后，您可以尝试将其添加到您的 templateUrl。*

[您可以在此处](http://angular-ui.github.com/bootstrap/#/dialog)阅读有关正确使用该指令的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T16:36:10.450

有一个`<script>`用作指令的用途，它允许您采用混合方法。

Angular 文档提到，如果您在 html 中使用如下声明：

```
<script type="text/ng-template" id="/tpl.html">
  Content of the template.
</script> 
```

然后，您可以将其用作指令（例如`ngInclude`or `ngView`，甚至是`$route`. [你可以在这个 fiddle](http://jsfiddle.net/johnwun/wW58G/)中看到这个工作。

# c# - 使用 LINQ 从 xml 读取 CDATA 未返回预期结果

> ID：15103790
> 
> 赞同：0
> 
> 时间：2013-02-27T03:43:51.760
> 
> 标签：c#, xml, linq, linq-to-xml, windows-applications

我正在尝试使用 LINQ 在 xml 文件中读取“查询”元素值（定义为 CDATA），但是，当我运行应用程序时，我将返回以下值：

**System.Linq.Enumerable+WhereSelectEnumerableIterator`2[System.Xml.Linq.XElement,System.String]**

我对获取 CDATA 值缺少什么感到困惑。

XML 文档如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<dbprocedurestruct>
  <variables id="vars">
    <variable id="ooid">
      <name>OrigOrgID</name>
      <pseudo>Original Organization ID</pseudo>
      <type>System.Int32</type>
      <visible>true</visible>
    </variable>
    <variable id="noid">
      <name>NewOrgID</name>
      <pseudo>New Organization(s) ID</pseudo>
      <type>System.Int32</type>
      <visible>true</visible>
    </variable>
    <variable id="nssid">
      <name>NewSysSubID</name>
      <pseudo>New System Subscription ID</pseudo>
      <type>System.Int32</type>
      <visible>false</visible>
    </variable>
  </variables>
  <scripts>
    <script name="createscript">
      <query>
        <![CDATA[
        SELECT 
        SystemSubscriptionID, 
        'INSERT INTO dbo.Subscriptions 
        (
        SubscriptionID, 
        SystemSubscriptionTierID, 
        IsCustomized, 
        SubscriptionPrice, 
        DownloadPrice, 
        PlansPrice, 
        SpecsPrice, 
        SubscriptionStartDate, 
        SubscriptionDuration, 
        AutoRenewSubscription, 
        IsActive, 
        SubscriptionStatus, 
        CreatedBy, 
        CreatedOn, 
        LastEditBy, 
        LastEditOn)
        VALUES (' + 
        CAST(SubscriptionID AS VARCHAR(50)) + ',' + 
        CAST(SystemSubscriptionTierID AS VARCHAR(50)) + ',' +
        CAST(IsCustomized AS VARCHAR(50)) + ',' + 
        CAST(SubscriptionPrice AS VARCHAR(50)) + ',' + 
        CAST(DownloadPrice AS VARCHAR(50)) + ',' + 
        CAST(PlansPrice AS VARCHAR(50)) + ',' + 
        CAST(SpecsPrice AS VARCHAR(50)) + ',''' + 
        CAST(GetDate() AS VARCHAR(50)) + ''',' + 
        CAST(SubscriptionDuration AS VARCHAR(50)) + ',' + 
        CAST(AutoRenewSubscription AS VARCHAR(50)) + ',' + 
        CAST(IsActive AS VARCHAR(50)) + ',' + 
        CAST(SubscriptionStatus AS VARCHAR(50)) + ', 2, ''' + 
        CAST(GetDate() AS VARCHAR(50)) + ''', 2, ''' + 
        CAST(GetDate() AS VARCHAR(50)) + ''') '  
        FROM Subscriptions WHERE SystemSubscriptionID IN 
        (SELECT SystemSubscriptionID FROM SubscriptionMappings WHERE ReferenceID = {0});
        SELECT IDENT_CURRENT('Subscriptions')
        ]]>
      </query>
    </script>
    <script name="mappingscript">
      <query>
        <![CDATA[
        INSERT INTO SubscriptionMappings 
        (SystemSubscriptionID,
        ReferenceID,
        SubscriptionTypeID,
        SystemId,
        IsActive,
        CreatedBy) 
        SELECT 
        {0},
        {1},
        CAST(SubscriptionTypeID AS VARCHAR(50)),
        2,
        CAST(IsActive AS VARCHAR(50)),
        2 FROM SubscriptionMappings 
        WHERE ReferenceID = {2} 
        AND 
        SystemSubscriptionID = {3}
        ]]>
      </query>
    </script>
  </scripts>
</dbprocedurestruct> 
```

这是我读取 xml 文件的代码片段：

```
 SQLConnectivity _sc = new SQLConnectivity();
    DataTable dt = new DataTable();
    string xmlitem = (from scripts in xfile.Descendants("scripts") where scripts.Element("script").Value == "createscript" select scripts.Element("script").Element("query").Value).ToString();
    //String tempquery = xmlitem.Elements("query").ToString();
    String finalquery = String.Format(xmlitem, _ooid);

    _sc.RunExecuteSQL(finalquery, ref dt);
    return dt; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:08:27.603

查询的结果是一个[`IEnumerable`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)实例。如果您想要单个字符串结果，则需要使用[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.firstordefault.aspx)或[`SingleOrDefault`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.singleordefault.aspx)。此外，在搜索指定的“createscript”元素时，您需要使用“name”属性。

```
var sql = (from scripts in xfile.Root.Elements("scripts")
           from script in scripts.Elements("script")
           let name = script.Attribute("name")
           where name != null && name.Value == "createscript"
           from query in script.Elements("query")
           select query.Value).FirstOrDefault(); 
```

**编辑：**前导和尾随回车和缩进可以从 SQL 中剥离 和 的[`string.Trim`](http://msdn.microsoft.com/en-us/library/system.string.trim.aspx)组合[`Regex.Replace`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace.aspx)。

```
var cleanSql = Regex.Replace(sql.Trim(), @"^\s+", "", RegexOptions.Multiline); 
```

# php - 无法使用刷新令牌离线获取数据 - 需要登录错误 - Google API PHP 客户端？

> ID：15103792
> 
> 赞同：4
> 
> 时间：2013-02-27T03:43:57.683
> 
> 标签：php, oauth-2.0, google-analytics-api, google-oauth, google-api-php-client

我有`auth.php`一个链接供我授权访问 Google Analytics 并获取刷新令牌，将其存储到文本文件`token.txt`中。我得到了刷新令牌并保存了它`token.txt`。
然后我会`test.php`从中获取刷新令牌`token.txt`并尝试离线访问 Google Analytics（以便我可以向我网站的访问者显示综合浏览量）。之后`$client->refreshToken($refreshToken)`，`$client->getAccessToken()`似乎成功了，因为我可以打印出访问令牌，例如`{"access_token":"ya29.AHES6ZRZKhDxMMpTrzif-xXaTQMhYNTlFLu1hQgdb45b0sZ8w8eSJQ","expires_in":3600,"created":1361934280}`

但是，当我尝试发送获取请求时，我得到了

```
Error calling GET https://www.googleapis.com/analytics/v3/data/ga?ids=ga%xxx&start-date=2012-01-06&end-date=2013-02-27&metrics=ga%3Apageviews&filters=ga%3ApagePath%3D%3D%2Fsome-article%2F&max-results=1&key=AIzaSyC6G0bDA-zsBGKRAHEj4JnSgF95dt_nE6g: (403) User does not have sufficient permissions for this profile. 
```

将GET url复制并粘贴到我的浏览器上，我得到了

```
{"error":{"errors":[{"domain":"global","reason":"required","message":"Login Required","locationType":"header","location":"Authorization"}],"code":401,"message":"Login Required"}} 
```

我也尝试使用 Google OAuth 2.0 Playground，在第 2 步，我输入我的刷新令牌并单击“刷新访问令牌”，我得到了未授权客户端错误。

我在这里想念什么？

**测试.php**

```
<?php
require_once dirname(__FILE__).'/src/Google_Client.php';
require_once dirname(__FILE__).'/src/contrib/Google_AnalyticsService.php';

$client = new Google_Client();
$client->setApplicationName("Google Analytics PHP Starter Application");

$client->setClientId('xxxx.apps.googleusercontent.com');
$client->setClientSecret('yyyy');
$client->setRedirectUri('http://app.tickledmedia.com/google/auth.php');
$client->setDeveloperKey('zzzz');

$myFile = "token.txt";
$fh = fopen($myFile, 'r');
$refreshToken = fread($fh, filesize($myFile));
fclose($fh);

$client->setAccessType('offline');
$client->refreshToken($refreshToken);

$service = new Google_AnalyticsService($client);

if ($client->getAccessToken()) {
    print_r($client->getAccessToken());

    $ids = "ga:xxxx";
    $start_date = "2012-01-06";
    $end_date = date("Y-m-d");
    $metrics = "ga:pageviews";
    //$dimensions = "ga:browser";
    $filters = "ga:pagePath==/some-article/";
    $maxresults = 1;
    $optParams = array('filters'=>$filters, 'max-results' => $maxresults);
    $data = $service->data_ga->get($ids,$start_date,$end_date, $metrics, $optParams);

    print_r($data);

} else {
  $authUrl = $client->createAuthUrl();
  print "<a class='login' href='$authUrl'>Connect Me!</a>";
}

?> 
```

**授权文件**

```
<?php
require_once dirname(__FILE__).'/src/Google_Client.php';
require_once dirname(__FILE__).'/src/contrib/Google_AnalyticsService.php';
session_start();

$client = new Google_Client();
$client->setApplicationName("Google Analytics PHP Starter Application");

$client->setClientId('xxxx.apps.googleusercontent.com');
$client->setClientSecret('yyyy');
$client->setRedirectUri('http://app.mydomain.com/google/auth.php');
$client->setDeveloperKey('zzzz');
$service = new Google_AnalyticsService($client);

if (isset($_GET['logout'])) {
  unset($_SESSION['token']);
}

echo "the refresh token stored is ";
if ($_SESSION["refresh_token"]) echo $_SESSION["refresh_token"];
else {
    $myFile = "token.txt";
    $fh = fopen($myFile, 'r');
    $refreshToken = fread($fh, filesize($myFile));
    fclose($fh);
    echo $refreshToken;
}

if (isset($_GET['code'])) {
  $client->authenticate();
  $token = $client->getAccessToken();

  //var_dump($token);
  $my_token = json_decode($token, true);
  $_SESSION["my_token"] = $my_token;

  $refreshToken = $my_token["refresh_token"];
  $_SESSION["refresh_token"] = $my_token["refresh_token"];
  $myFile = "token.txt";
  $fh = fopen($myFile, 'w') or die("can't open file");
  fwrite($fh, $refreshToken);
  fclose($fh);

  $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
  header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}

if (isset($_SESSION['token'])) {
  $client->setAccessToken($_SESSION['token']);
}

if ($client->getAccessToken()) {
  $props = $service->management_webproperties->listManagementWebproperties("~all");
  print "<h1>Web Properties</h1><pre>" . print_r($props, true) . "</pre>";

  $_SESSION['token'] = $client->getAccessToken();
  print_r($_SESSION["my_token"]);
} else {
  $authUrl = $client->createAuthUrl();
  print "<a class='login' href='$authUrl'>Connect Me!</a>";
}

?> 
```

# objective-c - 背景颜色属性的未知图案颜色

> ID：15103793
> 
> 赞同：5
> 
> 时间：2013-02-27T03:43:59.500
> 
> 标签：objective-c, interface-builder

获得编译器警告：

```
Unsupported Configuration: 
Unknown pattern color for the Background Color attribute 
```

在我的 xib 上尝试将 UIView 的背景颜色设置为在界面生成器中清除时。我发誓我过去没有任何麻烦地明确了 UIView。谷歌没有给我任何有用的东西。我觉得这里有一个简单的答案，但在键盘上 14 小时后（不是在这个问题上），我疲惫的头脑并没有弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-14T09:20:12.077

我对同样的问题有很多问题。我通过这种方式解决了这个问题“在界面构建器中选择 UIView，背景颜色首先在选项中**设置默认颜色**并构建它”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T11:44:26.110

更新到 Mavericks 和 Xcode 5.1.1 后，我开始收到此警告

我在其他地方读到 clearColor 是导致此警告的原因，但在我的情况下，它的模式与您在更新 iPhone 后看到的标准 Apple 深灰色风格背景非常相似。不知道它是如何到达那里的，不记得曾经要求图案而不是颜色，也不记得如何在颜色选择器弹出窗口中选择图案。也许它是由 IB 选择的，因为我的原始代码中缺少某些内容。

我将其更改为默认值，重建并且警告没有返回。唯一的问题是遍历每个 UIView，直到我找到导致警告的那个，因为属性中的背景预览 Dropbox 控件很小。

一旦意识到这一点，就可以看到图案而不是颜色

![背景选择控制](../Images/60fff95b7423424ad72a7abffc457ddc.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T10:36:00.730

这将是 XCode 8 (beta) 中的编译时错误。故事板甚至无法打开。因此，我们需要在 XCode 7.x 中以编辑器模式打开故事板并搜索“模式”文本并按照@Gordon Dove 的建议找到视图，并通过将模式更改为纯色来修复它。 [![在此处输入图像描述](../Images/f75e2d1a53869fef38fae79aad1a4f8d.png)](https://i.stack.imgur.com/6r0dY.png)

# java - 这个键绑定有什么问题？

> ID：15103808
> 
> 赞同：1
> 
> 时间：2013-02-27T03:45:33.517
> 
> 标签：java, swing, action, key-bindings, keystrokes

```
public void buttons(){
     int c = WHEN_IN_FOCUSED_WINDOW;

        Action right = new AbstractAction() {
            public void actionPerformed(ActionEvent e) {
                player.setVX(2);
            }
        };
        Action stop = new AbstractAction() {
            public void actionPerformed(ActionEvent e) {
                player.setVX(0);
                player.setVY(0);
            }
        };

        Action up = new AbstractAction() {
            public void actionPerformed(ActionEvent e) {
                player.setVY(-2);
            }
        };
           getInputMap(c).put(KeyStroke.getKeyStroke("D"), "pressed");
           getActionMap().put("pressed", right);
           getInputMap(c).put(KeyStroke.getKeyStroke("released D"), "released");
           getActionMap().put("released", stop);
           getInputMap(c).put(KeyStroke.getKeyStroke("W"), "pressed");
           getActionMap().put("pressed", up);
           getInputMap(c).put(KeyStroke.getKeyStroke("released W"), "released");
           getActionMap().put("released", stop);

 } 
```

为什么当我按W或D时它会上升...

问题是什么？

D应该向右

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:14:58.503

您正在覆盖操作图中的值，因为您对向上和向右操作使用相同的操作名称“按下”。

```
getInputMap(c).put(KeyStroke.getKeyStroke("D"), "pressed");
getActionMap().put("pressed", right);
getInputMap(c).put(KeyStroke.getKeyStroke("released D"), "released");
getActionMap().put("released", stop);
getInputMap(c).put(KeyStroke.getKeyStroke("W"), "pressed");
getActionMap().put("pressed", up); // this overwrites the "pressed" action name above with the up action
getInputMap(c).put(KeyStroke.getKeyStroke("released W"), "released");
getActionMap().put("released", stop); // similarly, this is redundant because you have the same thing above 
```

以下应该解决它：

```
getInputMap(c).put(KeyStroke.getKeyStroke("D"), "right");
getInputMap(c).put(KeyStroke.getKeyStroke("released D"), "stop");
getInputMap(c).put(KeyStroke.getKeyStroke("W"), "up");
getInputMap(c).put(KeyStroke.getKeyStroke("released W"), "stop");
getActionMap().put("right", right);
getActionMap().put("up", up);
getActionMap().put("stop", stop); 
```

# php - 如何在 PHP 中获取类名？

> ID：15103810
> 
> 赞同：120
> 
> 时间：2013-02-27T03:45:38.970
> 
> 标签：php

```
public class MyClass {

} 
```

在Java中，我们可以通过`String className = MyClass.class.getSimpleName();`

如何在 PHP 中做到这一点？我已经知道了[`get_class()`](http://php.net/manual/function.get-class.php)，但它只适用于对象。目前我在 Active Record 工作。我需要像`MyClass::className`.

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2014-09-24T13:06:25.887

**从 PHP 5.5 开始**，您可以通过**ClassName::class**使用类名解析。

查看[PHP5.5 的新特性](http://php.net/manual/migration55.new-features.php#migration55.new-features.class-name)。

```
<?php

namespace Name\Space;

class ClassName {}

echo ClassName::class;

?> 
```

如果要在类方法中使用此功能，请使用**static::class**：

```
<?php

namespace Name\Space;

class ClassName {
   /**
    * @return string
    */
   public function getNameOfClass()
   {
      return static::class;
   }
}

$obj = new ClassName();
echo $obj->getNameOfClass();

?> 
```

**对于旧版本的 PHP**，您可以使用[get_class()](http://php.net/manual/en/function.get-class.php)。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-02-27T03:47:42.307

您可以`__CLASS__`在类中使用来获取名称。

[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-02-27T04:11:44.123

听起来您回答了自己的问题。`get_class`将为您提供班级名称。这是程序性的，也许这就是造成混乱的原因。看看 php 文档[`get_class`](http://php.net/manual/en/function.get-class.php)

这是他们的例子：

```
 <?php

 class foo 
 {
     function name()
     {
         echo "My name is " , get_class($this) , "\n";
     }
 }

 // create an object
 $bar = new foo();

 // external call
 echo "Its name is " , get_class($bar) , "\n"; // It's name is foo

 // internal call
 $bar->name(); // My name is foo 
```

为了使它更像您的示例，您可以执行以下操作：

```
 <?php

 class MyClass
 {
       public static function getClass()
       {
            return get_class();
       }
 } 
```

现在你可以这样做：

```
 $className = MyClass::getClass(); 
```

但是，这有点有限，因为如果我的课程被扩展，它仍然会返回“MyClass”。我们可以改用[`get_called_class`](http://www.php.net/manual/en/function.get-called-class.php)它，它依赖于相对较新的特性[Late Static Binding](http://php.net/manual/en/language.oop5.late-static-bindings.php)，并且需要 PHP >= 5.3。

```
<?php

class MyClass
{
    public static function getClass()
    {
        return get_called_class();
    }

    public static function getDefiningClass()
    {
        return get_class();
    }
}

class MyExtendedClass extends MyClass {}

$className = MyClass::getClass(); // 'MyClass'
$className = MyExtendedClass::getClass(); // 'MyExtendedClass'
$className = MyExtendedClass::getDefiningClass(); // 'MyClass' 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-10-25T09:38:23.197

要获取类名，您可以使用 ReflectionClass

```
class MyClass {
    public function myNameIs(){
        return (new \ReflectionClass($this))->getShortName();
    }
} 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2019-02-03T11:23:16.067

它看起来[`ReflectionClass`](http://php.net/manual/ru/class.reflectionclass.php)是一个非常有成效的选择。

```
class MyClass {
    public function test() {
        // 'MyClass'
        return (new \ReflectionClass($this))->getShortName();
    }
} 
```

基准：

```
Method Name      Iterations    Average Time      Ops/second
--------------  ------------  --------------    -------------
testExplode   : [10,000    ] [0.0000020221710] [494,518.01547]
testSubstring : [10,000    ] [0.0000017177343] [582,162.19968]
testReflection: [10,000    ] [0.0000015984058] [625,623.34059] 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-02-27T04:27:35.440

现在，我的问题有了答案。感谢[Brad的链接，我在](https://stackoverflow.com/users/362536/brad)[这里](http://www.php.net/manual/en/language.constants.predefined.php#84050)找到了答案。感谢[J.Money](https://stackoverflow.com/users/1038726/j-money)的想法。我的解决方案：

```
<?php

class Model
{
    public static function getClassName() {
        return get_called_class();
    }
}

class Product extends Model {}

class User extends Model {}

echo Product::getClassName(); // "Product" 
echo User::getClassName(); // "User" 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-06-22T09:28:45.707

我认为在 PHP 中提及“self”和“static”之间的细微差别很重要，因为“最佳答案”使用“static”，这可能会给某些人带来混乱的结果。

```
<?php
class X {
    function getStatic() {
        // gets THIS class of instance of object
        // that extends class in which is definied function
        return static::class;
    }
    function getSelf() {
        // gets THIS class of class in which function is declared
        return self::class;
    }
}

class Y extends X {
}
class Z extends Y {
}

$x = new X();
$y = new Y();
$z = new Z();

echo 'X:' . $x->getStatic() . ', ' . $x->getSelf() . 
    ', Y: ' . $y->getStatic() . ', ' . $y->getSelf() . 
    ', Z: ' . $z->getStatic() . ', ' . $z->getSelf(); 
```

结果：

```
X: X, X
Y: Y, X
Z: Z, X 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-02-11T11:38:00.723

即使使用命名空间，这也会返回纯类名：

```
echo substr(strrchr(__CLASS__, "\\"), 1); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-08T14:02:19.613

`end(preg_split("#(\\\\|\\/)#", Class_Name::class))`

`Class_Name::class`：返回具有命名空间的类。所以之后只需要创建一个数组，然后获取数组的最后一个值。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-02-16T21:35:24.867

```
<?php
namespace CMS;
class Model {
  const _class = __CLASS__;
}

echo Model::_class; // will return 'CMS\Model' 
```

适用于**PHP 5.5之前的版本**

# macos - Delphi gettimeofday for OSX（相当于win下的timeGetTime）

> ID：15103816
> 
> 赞同：1
> 
> 时间：2013-02-27T03:45:52.527
> 
> 标签：macos, delphi, timer, cross-platform, delphi-xe3

我正在转换一个线程定时器池单元以供跨平台使用。当前单元使用 timeGetTime 来确保高精度，并在调用计时器事件时报告实际经过的时间间隔。

我以前在 OSX 中使用过 gettimeofday 来获得高分辨率计时器，但找不到任何在 Delphi XE3 中使用的参考。

寻求有关如何在 Delphi 中调用它的帮助或另一种跨平台方式来获得高分辨率计时器。我想要毫秒精度（我知道它依赖于操作系统）。

在此先感谢，马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:32:53.643

一个更好的选择，多平台就绪，可能是使用[`TStopWatch`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Diagnostics.TStopwatch)来自[System.Diagnostics](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Diagnostics)单元的记录。

如果可用，TStopWatch 是一个真正的高分辨率计时器，在这种情况下具有接近纳秒的精度（取决于操作系统和硬件），如果不可用（在 Windows 中），则使用标准计时器函数来提供毫秒精度。

如果您只想要毫秒精度，请使用 ElapsedMilliseconds 属性，如下所示：

```
var
  sw : TStopWatch;
  ElapsedMilliseconds : Int64;
begin
  sw := TStopWatch.Create() ;
  try
    sw.Start;
    Whatever();
    sw.Stop;

    ElapsedMilliseconds := sw.ElapsedMilliseconds;
  finally
    sw.Free;
  end;
end; 
```

TStopWatch 依赖于Windows 中的[QueryPreformanceFrequency](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644905%28v=vs.85%29.aspx) / [QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)函数和OS-X 上的[mach_absolute_time](http://www.macresearch.org/tutorial_performance_and_time)

# php - Concrete5在链接点击时从文件集中显示fancybox？

> ID：15103819
> 
> 赞同：0
> 
> 时间：2013-02-27T03:46:22.380
> 
> 标签：php, fancybox, concrete5, fileset

我不知道从哪里开始显示文件集中的文件，以便在点击时显示一个花式画廊。我想从链接打开画廊。单击时显示图库，即具有相同 rel 但设置为 display:none 的图像（由我的 css 轻松控制）。我可以通过选择一个图像来做到这一点，但不确定如何将图像从文件集中传递到视图中（我假设我需要在我的控制器中创建某种函数来获取 fsID，只是不确定如何） . 我只需要在页面上显示第一张图像（缩略图），然后单击链接，它会显示更多全尺寸图像。

基本上，如果你知道 Concrete5，我希望它像图像块一样，除了管理员可以选择一个文件集而不是一个图像。

这是我的view.php

```
$picture = $this->controller->getPicture();
if ($picture) {
    $bigPicture = $image->getThumbnail($picture,600,600)->src;
    $smallPicture = $image->getThumbnail($picture,200,200)->src;

    echo "<img src=" . $smallPicture . " alt=" . $imageTitle . " title=" . $imageTitle . "/>";//thumbnail picture
echo "<div id=\"image-modal\">";
echo "<a href=" . $bigPicture . " class=\"fancybox-thumb\" rel=" . $title . " title=" . $imageTitle . ">{$linkText}</a>";//open fancybox from link
echo "<div class=\"hiddenGallery\"  style=\"display:none;\">";//hidden images
    echo "<a href=\"images/pattern/t-103-n.jpg\" class=\"fancybox-thumb\" rel=" . $title . " title=" . $imageTitle . ">";
echo "<img src=\"images/pattern/t-103-n.jpg\" class=\"fancybox-thumb\" />";
echo "</a>";
    echo "</div>";
echo "</div>";
} 
```

我的控制器.php

```
function getPicture() {
        if ($this->fIDpicture > 0) {
            return File::getByID($this->fIDpicture);
        }
        return null;
    } 
```

我的 add.php

```
$al = Loader::helper('concrete/asset_library');
echo $al->image('ccm-b-image', 'fIDpicture', t('Choose File'),
    $this->controller->getPicture());
echo '</div>'; 
```

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:53:01.297

我有一些代码可以处理这个等式的整个后端（添加/编辑/控制器）部分： [https ://github.com/jordanlev/c5_designer_gallery](https://github.com/jordanlev/c5_designer_gallery)

这是一个解释如何使用它的教程（以 FlexSlider 为例，但如果你知道 Fancybox 是如何工作的，那么它应该不难理解发生了什么）： [http ://c5blog.jordanlev.com/blog/ 2011/12/建立幻灯片块/](http://c5blog.jordanlev.com/blog/2011/12/build-a-slideshow-block/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:52:07.930

好吧，有两件事：

*   您必须将`class="fancybox-thumb"`AND`rel`属性设置为`<a>`标签！！，而不是`<img />`标签。
*   如果您打算隐藏画廊的其余元素，请不要`display: none;`为每个元素设置 css 属性，而是将它们包装在一个隐藏的`<div>`容器中，例如：

    ```
    <div style="display: none;">
      <a class="fancybox-thumb" rel="gallery" href="images/02.jpg"></a>
      <a class="fancybox-thumb" rel="gallery" href="images/03.jpg"></a>
      <a class="fancybox-thumb" rel="gallery" href="images/04.jpg"></a>
      ... etc
    </div> 
    ```

我正在使用渲染的 html，这很重要。

# php - 尝试通过 HTML 表单保存用户输入，然后稍后再参考

> ID：15103824
> 
> 赞同：0
> 
> 时间：2013-02-27T03:46:56.087
> 
> 标签：php, html

我目前正在设计一个计算机辅助学习包。欢迎屏幕只要求用户在文本字段中输入他们的姓名，然后单击一个按钮，将他们引导到“主题选择”页面。我将如何存储用户输入，如果可能的话，我如何在单独的 html 页面上引用存储的值？

```
<div id="inputbox">
  <form>
     <input type="text" name="field" class="textInput" />
  </form>
</div>
<div id="introsubmit">
    <a href="newgame.html" title="New Game" id="introsubmit"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:49:41.513

**HTML：**

```
<div id="inputbox">
  <form action="script.php">
     <input type="text" name="field" class="textInput" />
  </form>
</div>
<div id="introsubmit">
    <a href="newgame.html" title="New Game" id="introsubmit"></a>
</div> 
```

这会将表单发送到 script.php （如果没有定义“动作”，它将把表单发送到同一个页面，如果该 html 在里面，`script.php`那么它将工作相同，如果没有定义“方法”，如果将使用 GET，您可以设置`<form action="script.php" method="POST">`更改它）：

**脚本.php：**

```
<?php
session_start();

$_SESSION['name'] = $_GET['name'];
?> 
```

然后你在同一个会话中重用该变量，记住总是`session_start()`在你的任何输出之前调用`php`。

# ruby - 为什么 Net::FTP 无法连接到服务器？

> ID：15103830
> 
> 赞同：13
> 
> 时间：2013-02-27T03:47:21.620
> 
> 标签：ruby, net-ftp

我正在尝试创建一个脚本来使用 Ruby 从 FTP 服务器列出和下载数据。我是 Ruby 新手，所以我查找了如何使用 Net::FTP 的文档。我很难理解为什么这不起作用：

```
require 'net/ftp'

server = "ftp.server.com"
user = "myuser"
password = "mypassword"

Net::FTP.open(server, user, password) do |ftp|
        files = ftp.chdir('mydirectory/')
        files = ftp.list
        puts "list out of directory:"
        puts files
end 
```

这不起作用，返回此错误：

```
/home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:298:in `getresp': 425 >建立连接失败。（网络::FTPTempError）
    来自 /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:325:in `block in sendcmd'
    来自 /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
    来自 /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:323:in `sendcmd'
    来自 /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:402:in `transfercmd'
    来自 /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:478:in `retrlines 中的块（2 级）'
    来自 /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:178:in `with_binary'
    来自 /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:477:in `block in retrlines'
    来自 /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
    来自 /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:476:in `retrlines'
    来自 /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:722:in `list'
    来自 test_ftp.rb:10:in `block in '
    来自 /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:116:in `open'
    来自 test_ftp.rb:8:in `'

```

谁能解释我的脚本有什么问题？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-27T04:50:08.860

你的代码对我来说很好。我怀疑问题可能是由于`Net::FTP`连接模式，默认情况下是活动的。尝试使用被动模式连接，以下代码示例 -

```
ftp = Net::FTP.new(server)
ftp.passive = true
ftp.login user, password
files = ftp.chdir('mydirectory/')
files = ftp.list
puts "list out of directory:"
puts files
ftp.close 
```

如果您好奇，以下是主动模式和被动模式之间的[区别（来自维基百科）。](http://en.wikipedia.org/wiki/File_Transfer_Protocol#Communication_and_data_transfer)

1.  在**主动**模式下，客户端创建一个到服务器的 TCP 控制连接并向服务器发送客户端的 IP 地址和任意客户端端口号，然后等待服务器通过 TCP 向该客户端 IP 地址和客户端端口号发起数据连接. 在客户端位于防火墙后面并且无法接受传入 TCP 连接的情况下，可以使用被动模式。
2.  在**被动**模式下，客户端使用控制连接向服务器发送 PASV 命令，然后从服务器接收服务器 IP 地址和服务器端口号，然后客户端使用这些 IP 地址和服务器端口号打开从任意客户端端口到服务器的数据连接收到的 IP 地址和服务器端口号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T04:43:47.810

以下脚本可在我的机器上运行，并且基于您的机器，并进行了少量清理：

```
require 'net/ftp'

Net::FTP.open('ftp.linuxjournal.com', 'anonymous', 'anonymous@google.com') do |ftp|
  ftp.chdir('pub/')
  files = ftp.list
  puts "list out of directory:"
  puts files
end 
```

这是我得到的输出：

```
list out of directory:
lrwxrwxrwx   1 root     ftp            32 Jul 12  2010 00-README-TO-UPLOAD-FILES.txt -> ../00-README-TO-UPLOAD-FILES.txt
drwxr-sr-x   3 root     ftp            21 Mar  7  2001 elj
drwxr-sr-x   3 root     ftp          4096 Jan  6  2004 lg
drwxr-sr-x   8 root     ftp           113 Jun 21  2010 lj
drwxr-sr-x   5 root     users         112 Oct  2  2007 ssc
drwxr-sr-x   2 root     ftp          4096 Jan  3 17:21 tux 
```

我会说代码有效，问题出在其他地方。

因为`425 >Failed to establish connection`我认为您应该检查您的 DNS 和/或防火墙。

# python - 学习循环和列表

> ID：15103835
> 
> 赞同：1
> 
> 时间：2013-02-27T03:47:38.043
> 
> 标签：python, loops, for-loop

我是 Python 初学者，目前正在学习 Zed Shaw 的课程“Learn Python the Hardway”

因此，在练习 32 中，我们被告知：

> 如何制作二维 (2D) 列表？那是这样的列表中的列表： [[1,2,3],[4,5,6]]

我这样做了：

```
# Extra 1
global_list = [[1, 2, 3]]
inside_list = []
for i in global_list[0]:
    inside_list.append(i)

global_list.append(inside_list)
print(global_list) 
```

但我并不完全相信这是正确的方法。我的问题是：有没有办法在不离开 for i 循环的情况下获得相同的结果？

我也试过这个，没有用。

```
global_list = [[1, 2, 3]]
inside_list = []
for i in global_list[0]:
    inside_list.append(i)
    global_list.append(inside_list)
    print(global_list) 
```

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:53:13.623

列表可以像任何其他对象一样附加并插入到列表中，例如：

```
outer_list = []
print(outer_list)
inner_list1 = [1, 2, 3]
outer_list.append(inner_list1)
print(outer_list)
inner_list2 = [4, 5, 6]
outer_list.append(inner_list2)
print(outer_list) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:17:08.733

我不确定你是否已经完成了列表理解。但是，做你正在做的事情的一种好方法是：

```
>>> global_list = [[1,2,3]]

>>> global_list.append([i + 3 for i in global_list[0]])

>>> print global_list

[[1, 2, 4], [4, 5, 6]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T03:51:27.763

问题是“如何制作二维 (2D) 列表？”。给出的答案是“这是这样的列表中的一个列表：`[[1,2,3],[4,5,6]]`”。从字面上看，这就是答案：

```
>>> a = [[1, 2, 3], [4, 5, 6]]
>>> print a
[[1, 2, 3], [4, 5, 6]] 
```

你也可以这样做：

```
>>> a = [[1, 2, 3]]
>>> a.append([4, 5, 6])
>>> a
[[1, 2, 3], [4, 5, 6]] 
```

您不需要 for 循环即可将列表附加到另一个列表中：

```
>>> a = [[1, 2, 3]]
>>> a[0]
[1, 2, 3]
>>> a.append(a[0])
>>> a
[[1, 2, 3], [1, 2, 3]] 
```

但是，这使得列表列表的第二个元素与第一个元素相同，因此如果您更改一个元素，则会更改另一个元素：

```
>>> a[0] is a[1]
True
>>> a[0][0] = 4
>>> a
[[4, 2, 3], [4, 2, 3]] 
```

制作列表副本的方法是`list(a[0])`：

```
>>> a = [[1, 2, 3]]
>>> a[0]
[1, 2, 3]
>>> a[0] is a[0]
True
>>> list(a[0])
[1, 2, 3]
>>> a[0] is list(a[0])
False
>>> a.append(list(a[0]))
>>> a
[[1, 2, 3], [1, 2, 3]] 
>>> a[0] is a[1]
False
>>> a[0][0] = 4
>>> a
[[4, 2, 3], [1, 2, 3]] 
```

# iphone - iPhone故事板如何识别当前模式视图控制器时单击了哪个按钮

> ID：15103846
> 
> 赞同：0
> 
> 时间：2013-02-27T03:48:36.020
> 
> 标签：iphone, uibutton, storyboard

我正在使用情节提要制作 iPhone 应用程序。
我在主视图控制器上放置了 2 个按钮，并添加了动作以在情节提要上呈现模态新的 TestViewController。
单击 2 个按钮时，将显示相同的 TestViewController，但我想知道在 TestViewController viewdidload 中单击了哪个按钮。
有什么建议或帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:55:42.230

@Richard Brown 的建议很好。

将标签分配给按钮并使用如下：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"ChooseAPlayer"]) {
       TestViewController = [segue destinationViewController];
        TestViewController.variablename = buttontag;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:52:46.353

为每个按钮分配不同的 segue 名称，在 prepareForSegue 方法中，您可以使用该信息将您想要的内容传递给新的 ViewController。

# ruby-on-rails - Rails 服务器无法在 Mountain Lion 上启动

> ID：15103847
> 
> 赞同：0
> 
> 时间：2013-02-27T03:48:36.507
> 
> 标签：ruby-on-rails, ruby, osx-lion

好的，我刚刚创建了一个新项目。我做了捆绑安装。Rails 服务器将无法启动。它给了我这一切：

/usr/local/Cellar/ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11/lib/mysql2.rb:9:in `require': dlopen(/usr/local/Cellar/ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle, 9): Library not loaded: libmysqlclient.18.dylib (LoadError) Referenced from: /usr/local/Cellar/ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle Reason: image not found - /usr/local/Cellar/ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle from /usr/local/Cellar/ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11/lib/mysql2.rb:9:in`'来自/usr/local/Cellar /ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/runtime.rb:72:in `require' from /usr/local/Cellar/ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/runtime.rb:72:in`block (2 levels) in require' from /usr/ local/Cellar/ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/runtime.rb:70:in `each' from /usr/local/Cellar/ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/runtime.rb:70:in`block in require' from /usr/local /Cellar/ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/runtime.rb:59:in `each' from /usr/local/Cellar/ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/runtime.rb:59:in`require'来自/usr/local/Cellar/ ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler.rb:132:in `require' from /Users/foximusprime/Sites/simple_cms/config/application.rb:7:in`'来自/usr/local/Cellar/ruby/1.9.3- p392/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:53:in`require' from /usr/local/Cellar/ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:53:in``tap' from /usr/local/Cellar/ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:50:in`从 /usr/local/Cellar/ruby/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:50:in中阻止脚本/rails:6:in `require' from script/rails:6:in`'

我不知道是怎么回事。就在一个小时前，服务器还在工作。关闭一切，下班回家，现在它给了我所有这些垃圾。我不知道该怎么做。

# azure-storage - Azure 表实体名称更改

> ID：15103848
> 
> 赞同：0
> 
> 时间：2013-02-27T03:48:42.113
> 
> 标签：azure-storage, azure-table-storage

我刚刚**修改**了 Azure 上表的属性名称。它反映为**全新的**财产，这是有道理的。我的问题是，有没有办法在不迭代每条记录的情况下更改 Azure 表上的属性名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:58:54.403

不，每个实体都是它自己的一组属性名称和值。在您认为 RDBMS 表中的列相同的意义上，实际上没有“表属性”这样的东西。大多数存储浏览器工具遍历实体并为每个实体构建所有属性的集合，然后将它们显示为“列”，这就是为什么属性看起来与表本身相关的原因。如果要更改现有实体的属性名称，则需要遍历每个实体并进行更改。

# mongodb - 如何创建大型mongodb数据库的slave

> ID：15103854
> 
> 赞同：-1
> 
> 时间：2013-02-27T03:49:25.353
> 
> 标签：mongodb

众所周知，mongodb 的 oplog 是有限的。

如果我只是创建一个新的从站，那么数据库中的所有内容都还没有同步。数据库中的所有内容都比任何 oplog 都大。

那么我该如何解决呢？这是否意味着我们不能创建一个比 oplog 更大的新从站？除了那个oplog，mongodb还有其他同步数据库的机制吗？

如果是真的，那么它是如何完成的？

所以有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:13:34.787

如果您的数据库大小合理，并且您有快照，则可以复制文件（由启动时的 --dbpath 标志或在配置文件中指定）以允许新的副本集成员更快地上线。但是，仍可能会发生初始同步。

从概念上讲，会发生以下事情

1.  启动新成员作为副本集的一部分
2.  将其添加到 rs.conf()
3.  新的副本集与最近的副本集同步（可能是主副本或辅助副本），并将开始从中提取数据（初始同步）并在 oplog 中标记一个点以供其自己参考。
4.  然后，新的辅助节点将从它自己的时间戳应用 oplog，该时间戳是从其他副本集成员复制的。

如果同步失败，将发生另一个初始同步（从一开始）。对于非常大的数据集，同步可能需要一些时间。

回复您的问题

***这是否意味着我们不能创建一个比 oplog 更大的新从站？***

您可以创建和添加比 oplog 更大的新成员

***除了那个oplog，mongodb还有其他同步数据库的机制吗？*** 是的，上面提到的初始同步和文件副本。

# c# - 仅按开始日期排序日期时间

> ID：15103864
> 
> 赞同：-1
> 
> 时间：2013-02-27T03:50:23.000
> 
> 标签：c#

我已经问过一个关于[排序日期时间](https://stackoverflow.com/questions/15100233/sorting-date-and-time)的不同问题，并得到了另一个用户的帮助来传递我的值。我正在使用像下面这样的 for 循环，但这里肯定是错误的，因为代码将值一一带来，而不是排序。

```
public class Break
{
    public DateTime MealStart { get; set; }
    public DateTime MealEnd { get; set; }
} 
```

我的主要课程

```
IList<DateTime> starts = new List<DateTime>();
IList<DateTime> ends = new List<DateTime>();
DateTime breakStart1 = new DateTime(2012, 02, 15, 12, 30, 00);  // 15/02/12 12.30PM
DateTime breakEnd1 = new DateTime(2012, 02, 15, 13, 30, 00);  // 15/02/12 01.30PM
DateTime breakStart2 = new DateTime(2012, 02, 15, 11, 00, 00);  // 15/02/12 11.00AM
DateTime breakEnd2 = new DateTime(2012, 02, 15, 12, 00, 00);  // 15/02/12 12.00PM
DateTime breakStart3 = new DateTime(2012, 02, 15, 12, 00, 00);  // 15/02/12 12.00PM
DateTime breakEnd3 = new DateTime(2012, 02, 15, 01, 00, 00);  // 15/02/12 01.00PM
starts.Add(breakStart1);
starts.Add(breakStart2);
starts.Add(breakStart3);
ends.Add(breakEnd1);
ends.Add(breakEnd2);
ends.Add(breakEnd3);
for (int i = 0; i < starts.Count; i++)
{
    var breaks = new List<Break>()
    {
        //for (int j= 0; j<starts.Count; j++)
        //{
        new Break()
        {
            MealStart = starts[i],
            MealEnd = ends[i]

        }
        // }
    };

    var ordered = breaks.OrderBy(s => s.MealStart);
    foreach (var ord in ordered)
    {
        System.Console.WriteLine(ord.MealStart);
        System.Console.WriteLine(ord.MealEnd);
    }
} 
```

我期待如下结果

```
breakStart1 = 15/02/12 11.00AM
breakEnd1= 15/02/12 12.00PM
breakStart2 = 15/02/12 12.00PM
breakEnd2= 15/02/12 01.00PM
breakStart3 = 15/02/12 12.30PM
breakEnd3= 15/02/12 01.30PM 
```

但这不是因为 for 循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T03:55:27.343

您正在创建`breaks`循环后，您需要在循环之外执行此操作，如下所示：

```
IList<DateTime> starts = new List<DateTime>();
IList<DateTime> ends = new List<DateTime>();
DateTime breakStart1 = new DateTime(2012, 02, 15, 12, 30, 00);  // 15/02/12 12.30PM
DateTime breakEnd1 = new DateTime(2012, 02, 15, 13, 30, 00);  // 15/02/12 01.30PM
DateTime breakStart2 = new DateTime(2012, 02, 15, 11, 00, 00);  // 15/02/12 11.00AM
DateTime breakEnd2 = new DateTime(2012, 02, 15, 12, 00, 00);  // 15/02/12 12.00PM
DateTime breakStart3 = new DateTime(2012, 02, 15, 12, 00, 00);  // 15/02/12 12.00PM
DateTime breakEnd3 = new DateTime(2012, 02, 15, 01, 00, 00);  // 15/02/12 01.00PM
starts.Add(breakStart1);
starts.Add(breakStart2);
starts.Add(breakStart3);
ends.Add(breakEnd1);
ends.Add(breakEnd2);
ends.Add(breakEnd3);
List<Break> breaks = new List<Break>();
for (int i = 0; i < starts.Count; i++)
{
    breaks.Add(new Break()
    {
        MealStart = starts[i],
        MealEnd = ends[i]
    });
}
var ordered = breaks.OrderBy(s => s.MealStart);
foreach (var ord in ordered)
{
    System.Console.WriteLine(ord.MealStart);
    System.Console.WriteLine(ord.MealEnd);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T04:04:44.257

由于@Corylulu 在基本问题上击败了我，这里有一个稍微短一些的不同方法：

```
IEnumerable<Break> breaks = 
    starts.Zip(ends, (s, e) => new Break { MealStart = s, MealEnd = e })
    .OrderBy(b => b.MealStart);

foreach (Break brk in breaks)
    Console.WriteLine("Start: {0}\tEnd: {1}", brk.BreakStart, brk.BreakEnd); 
```

该`IEnumerable.Zip`方法采用一对`IEnumerable`s 和一个变换函数，并生成一个输出`IEnumerable`，其中包含使用每个输入的成员调用变换函数的结果`IEnumerable`。当然，您可以在最后将其转换为`List<Break>`a `ToList()`。

# javascript - 如何使用 jQuery 或 JavaScript 使多个项目拖放

> ID：15103865
> 
> 赞同：2
> 
> 时间：2013-02-27T03:50:24.047
> 
> 标签：javascript, jquery, drag-and-drop, draggable

[通过参考此页面http://skfox.com/jqExamples/SortableSelectable.html](http://skfox.com/jqExamples/SortableSelectable.html)上的拖放功能 ，我完成了一个与示例完全相同的脚本。但我的问题是，我想让我的用户一次轻松地拖放多个项目。如何通过编辑示例脚本来做到这一点？

为了允许多次拖放，我可以想到两种方法：

1.  Ctrl+选择第一个列表中的多个项目，然后拖放到第二个列表中

2.  将复选框添加到第一个列表。用户将选中复选框，然后单击“添加”按钮 - 这会将所有选中的项目添加到第二个列表中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-27T04:01:38.970

这能解决你的问题吗？

[http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)

我不认为这同时支持多个拖动，但你可以这样做：每当一个元素被 ctrl-clicked 时，被添加到一个全局数组中，然后当你拖动它们中的最后一个时，所有元素该列表的一部分被附加到一个可拖动的不可见 div 中。这样，您就可以模拟多次拖动。

# java - 使用 Java 绘制楼梯

> ID：15103866
> 
> 赞同：0
> 
> 时间：2013-02-27T03:50:26.507
> 
> 标签：java

我正在 Java JPanel 上从`(0,0)`到坐标绘制楼梯`(JComponent.getWidth(), JComponent.getHeight())`。
水平和垂直长度将保持不变取决于常数`NUM_STAIRS`。
初始绘图将是一条水平线。我猜这将使用 while 和 if 语句（可能是嵌套的），但我不确定如何生成这个算法。

我的想法：

版本一：当y轴满足要求时，
先画一条长度为的水平线。 记住画线的端点坐标，画出 长度为in的垂直线，然后在端点的x坐标处画下一条等长的水平线 重复这个动作，直到y=JComponent.getHeight()。`JComponent.getWidth()/NUM_STAIRS`
`(y=n x JComponent.getHeight()/NUM_STAIRS, where 0< n<=NUM_STAIRS)`
`JComponent.getHeight()/NUM_STAIRS`

`y = 1 x JComponent.getHeight()/NUM_STAIRS.`

版本2：
做2个循环，分别画水平线和垂直线，想法和版本1差不多。但是我对如何将这个想法写成一些代码感到困惑。

有人可以帮帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:12:03.423

可能有很多方法可以实现这一点......这个解决方案存在一个四舍五入的问题，但这个概念会让你感动......

![在此处输入图像描述](../Images/097c72fa03287ebb26ff69a346bc9f45.png)

正如您所说，基本思想是每个步骤的宽度和高度是可用空间的百分比。

每个步骤从步骤的宽度/高度乘以当前步骤的位置开始。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Insets;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.EmptyBorder;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class StairWayToHeven {

    public static void main(String[] args) {
        new StairWayToHeven();
    }

    public StairWayToHeven() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private int numSteps = 4;

        public TestPane() {
            setBorder(new EmptyBorder(4, 4, 4, 4));
            setLayout(new BorderLayout());

            final JSlider slider = new JSlider(2, 20);
            slider.setOpaque(false);
            slider.setValue(4);
            add(slider, BorderLayout.SOUTH);
            slider.addChangeListener(new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent e) {
                    numSteps = slider.getValue();
                    repaint();
                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); 

            Insets insets = getInsets();
            int width = getWidth() - (insets.left + insets.right);
            int height = getHeight() - (insets.top + insets.bottom);

            int stepWidth = Math.round((float)width / (float)numSteps);
            int stepHeight = Math.round((float)height / (float)numSteps);

            g.setColor(Color.BLACK);
            for (int step = 0; step < numSteps; step++) {
                int fromX = insets.left + (stepWidth * step);
                int fromY = insets.top + (stepHeight * step);
                int toX = insets.left + (stepWidth * (step + 1));
                int toY = insets.top + (stepHeight * (step + 1));

                g.drawLine(fromX, fromY, toX, fromY);
                g.drawLine(toX, fromY, toX, toY);
            }
        }
    }
} 
```

# php - 生成标记、jquery 或 php 哪个更快？

> ID：15103868
> 
> 赞同：-1
> 
> 时间：2013-02-27T03:50:37.757
> 
> 标签：php, javascript, jquery, css

在查看服务器端 (PHP) 实现与客户端 (jquery) 实现时，通过编写呈现标记的函数库来生成网页有什么含义？

服务器端：客户端发出请求，服务器通过运行php程序渲染标记，将标记发送给客户端，浏览器加载并显示网页。

```
function makeTitle( $text ) {
    echo <<<HTML
    <style>
    #title {
    color:red;
    }
    </style>
    <div id = "title">{$text}</div>
    HTML;
}

makeTitle("This appears as red text"); 
```

客户端：客户端发出请求，将 javascript 以 .html 文件的形式发送给客户端，客户端的浏览器渲染标记，加载并显示网页。

```
var text; 
function title(text) {
$('body').html(function() {
  return '<div id = "title">'+text +'</div>';
});
 $("#title").css("color","red");
}

title("This appears as red text"); 
```

哪种实现会更高效，这样用户将不得不等待更少的时间，无论是服务器运行 php 程序还是浏览器运行 javascript 程序，以及在什么情况下每个实现在生成静态 css 方面最有效和HTML？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T03:57:00.453

在服务器上生成会很快，但您提到了 jQuery 中对 .html 文件的请求。为什么不使用 jQuery 即时生成 html？您可以通过向 jQuery 对象传递一个封闭的 HTML 标记来创建 DOM 元素，例如`$('<div/>')`. 这是使用您提供的示例的实现。

```
function makeTitle(text) {
    $('body').append(
        $('<div/>', {
            id: 'title'
        }).css({
            color: 'red'
        })
    );
}

makeTitle("This will appear as red text"); 
```

如果您正在寻找一个简单的模板解决方案，PHP 将是一个不错的选择，但如果您想创建一个无需刷新页面即可频繁更改内容的 Web 应用程序或页面，我发现使用 PHP 生成非常简单和快速数据和 jQuery 生成标记。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T03:59:45.357

使用 javascript 呈现标记时的另一个含义是您的标记对网络爬虫来说是不可见的。如果 SEO 是一个问题，这不是最好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T03:54:02.010

我认为通过 PHP 生成标记更可靠，就像在浏览器上禁用 javascript 一样，可能不会呈现任何标记。

除此之外，客户端机器可能具有不同的配置，这将进一步影响标记生成响应时间。所以我认为通过 PHP 进行标记会更有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T03:54:48.550

我会选择 PHP。处理时间的差异很小，但它也适用于没有启用 javascript 的客户，并且如果它没有在其他地方使用，它不需要下载 jQuery 的开销。

# android - CustomAutoCompleteTextView 删除内容 onclick

> ID：15103872
> 
> 赞同：1
> 
> 时间：2013-02-27T03:51:15.530
> 
> 标签：android

我在底部有自定义列表视图的自动完成视图。当我搜索任何单词并单击它时，我可以成功将该单词添加到我的列表视图中，但同时我想从自动完成视图中删除该文本或该索引，但它不起作用请帮助

```
String[] from = {"field","subject","topic"};

  int[] to = {R.id.field,R.id.subject,R.id.topic};

  adapter = new SimpleAdapter(getBaseContext(), aList, R.layout.autocomplete_layout, from, to);        

  CustomAutoCompleteTextView autoComplete = (CustomAutoCompleteTextView) findViewById(R.id.autocomplete);

  OnItemClickListener itemClickListener = new OnItemClickListener()
  {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long id) {

        HashMap<String, String> hm = (HashMap<String, String>) arg0.getAdapter().getItem(position);

        code=hm.get("topicCode");
        topicCode.add(code);
        mySQLiteAdapter.openToRead();
        c = mySQLiteAdapter.selectRaw(code);

        if(c.getCount() > 0)
        {
            startManagingCursor(c);
            String un = c.getString(4);

            boolean exist=false;

            for(int i=0;i<topicsList.size();i++)
            {
                if(topicsList.get(i).getCode().equals(un)){
                    exist=true;
                    break;
                }
            }

           if(exist==false)
           {
             Topics topics = new Topics(un);
             topicsList.add(topics);
             dataAdapter.notifyDataSetChanged();
            }
        }

            //I tried this two line but its not working for me
        aList.remove(hm);
        adapter.notifyDataSetChanged();

    }
    };
  autoComplete.setOnItemClickListener(itemClickListener);
  autoComplete.setAdapter(adapter); 
```

# javascript - 如何在javascript中的if中将OR切换为AND

> ID：15103873
> 
> 赞同：1
> 
> 时间：2013-02-27T03:51:17.157
> 
> 标签：javascript, if-statement

现在我寻找荷兰合作银行或理想，我希望他们都成立，所以我想编辑条件。

```
if (/(Rabobank)|(ideal)/i.test (document.body.innerHTML) ) 
```

试过：`if (/(Rabobank)||(ideal)/i.test (document.body.innerHTML) )`

和`if (/(Rabobank)&&(ideal)/i.test (document.body.innerHTML) )`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T03:58:20.437

只需使用`indexOf`：

```
var text = document.body.textContent.toLowerCase();

if ((text.indexOf('rabobank') !== -1) && (text.indexOf('ideal') !== -1)) {
    ...
} 
```

如果您*绝对*需要正则表达式，只需将其分成两个测试，如其他答案中所述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T03:59:32.897

正则表达式不能那样工作。尝试：

```
if(/Rabobank/i.test(...) && /ideal/i.test(...)){ ... } 
```

取出正`AND`则表达式，让 JS 处理逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T03:58:26.287

您需要将其拆分为两个不同的正则表达式：

```
var html = document.body.innerHTML;
if ( /Rabobank/i.test(html) && 
     /ideal/i.test(html) )
{
   // do something
} 
```

# c# - RDLC 报告问题

> ID：15103878
> 
> 赞同：1
> 
> 时间：2013-02-27T03:51:37.757
> 
> 标签：c#, sql-server, visual-studio-2010, rdlc, rdl

使用 rdlc 报告时出现编译错误，错误如下：

> 报表定义具有无法升级的无效目标命名空间“ [http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition ”。](http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition)

我将 Visual Studio 2010 与 SQL Server 2008 一起使用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:04:55.530

VS 2008 只支持 ReportViewer 2008，它只支持 RDL 2005 Schema。您列出的报告中声明的命名空间使用 RDL 2008 和 RDL 2010。这些仅与 ReportViewer 2010 及更高版本兼容，并且只有 VS 2010 具有对 ReportViewer 2010 和 RDL 2008+ 架构的设计器支持。

尝试将命名空间更改为用于 SQL Reporting Services 2008 的命名空间。

```
<Report xmlns:rd="http://schemas.microsoft.com/SQLServer/reporting/reportdesigner" xmlns="http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition"> 
```

# maven - 当我在 Maven 项目中添加对域层的任何调用时，我的 web 层不起作用

> ID：15103879
> 
> 赞同：0
> 
> 时间：2013-02-27T03:51:38.990
> 
> 标签：maven

我有一个 maven 项目作为一个宁静的设计，我分离了每一层：我有一个域层、数据层和一个 web 层。我的问题是：每当我向域层添加域类（实体）时，我的 web 层都不起作用，我得到一个 404 异常，仅此而已。我有三个项目。

```
1) domain_layer(所有实体)
2）data_layer（所有服务和存储库）
3）web_layer（所有控制器）。

```

即使我使用命令：

```
mvn clean install eclipse:clean eclipse:eclipse
```

```
mvn clean package eclipse:clean eclipse:eclipse
```

没有帮助。

但是当我删除新类时，它又可以工作了。

任何机构怎么知道这个问题？

这是我在 web 层的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>....weblayer</groupId>
<artifactId>weblayer</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>SpringMVC Maven Webapp</name>
<url>http://maven.apache.org</url>

<!-- Shared version number properties -->
<properties>
    <spring.version>3.0.6.RELEASE</spring.version>
    <org.springframework.version>3.1.2.RELEASE</org.springframework.version>
    <org.aspectj-version>1.6.9</org.aspectj-version>
</properties>

<dependencies>

<!--          all other dependencies-- >

    <!-- dependencies for domain and data-layer -->

    <dependency>
        <groupId>domainlayer</groupId>
        <artifactId>domain</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>datalayer</groupId>
        <artifactId>datalayer</artifactId>
        <version>1.0</version>
    </dependency>

<repositories> 
    <!-- For main Spring releases -->
    <repository>
        <id>org.springframework.maven.release</id>
        <name>Spring Maven Release Repository</name>
        <url>http://maven.springframework.org/release</url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>

    <!-- For testing against latest Spring snapshots -->
    <repository>
        <id>org.springframework.maven.snapshot</id>
        <name>Spring Maven Snapshot Repository</name>
        <url>http://maven.springframework.org/snapshot</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>

    <!-- For developing against latest Spring milestones -->
    <repository>
        <id>org.springframework.maven.milestone</id>
        <name>Spring Maven Milestone Repository</name>
        <url>http://maven.springframework.org/milestone</url>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>
</repositories>

<build>
    <finalName>weblayer</finalName>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.8</version>
            <configuration>
                <wtpmanifest>true</wtpmanifest>
                <wtpversion>2.0</wtpversion>
                <useProjectReferences>false</useProjectReferences>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>install</id>
                    <phase>install</phase>
                    <goals>
                        <goal>sources</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:45:51.480

解决了。实体类中缺少@Id 每个实体类都必须有一个@Id 注释。

# iphone - 在自动释放 ios 项目中保留变量

> ID：15103884
> 
> 赞同：0
> 
> 时间：2013-02-27T03:52:19.490
> 
> 标签：iphone, ios, variables, retain, autorelease

我是ios编程的初学者，我的项目将它设置为自动释放，现在我遇到了自动释放功能的问题。我展示了我的代码，希望你能支持我避免这种情况

```
- (void)initPhotoImage
{
    photoImage = [[MyPhotoImageView alloc] initWithFrame:CGRectMake(5, 30, 0, 0)];
    photoImage.photoViewController = self;
    [photoView addSubview:photoImage];

    UISwipeGestureRecognizer *gesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(didSwipeLeft:)];
    gesture.direction = UISwipeGestureRecognizerDirectionLeft;
    [photoView addGestureRecognizer:gesture];
    UISwipeGestureRecognizer *gesture1 = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(didSwipeRight:)];
    gesture1.direction = UISwipeGestureRecognizerDirectionRight;
    [photoView addGestureRecognizer:gesture1];

}

-(void)didSwipeLeft:(UIGestureRecognizer *)gestureRecognizer {

    if(self.nextViewController != NULL){
        [UIView animateWithDuration:1 animations:^{
            self.view.frame = CGRectMake(-1*self.view.frame.size.width, 0, self.view.frame.size.width, self.view.frame.size.height);
        }];
        NSLog(@"next");
    }else{
        NSLog(@"next view is null");
    }
} 
```

这两个函数在同一个类中，我在 init 函数中打印 self.nextViewController，它打印一个地址，但在 swip 函数中，我再次打印 self.nextViewController 但它打印空地址，在 .h 文件中我定义它保留

```
@property (retain, nonatomic) MyPhotoViewController *nextViewController; 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-27T03:56:28.517

改变这个

```
if(self.nextViewController != NULL) 
```

至

```
if(self.nextViewController != nil) 
```

# django - 如何正确使用 Django CSRF 令牌？

> ID：15103889
> 
> 赞同：0
> 
> 时间：2013-02-27T03:52:50.027
> 
> 标签：django

我按照 django 文档了解如何使用 CSRF 令牌。（[https://docs.djangoproject.com/en/dev/ref/contrib/csrf/](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)）

我理解前两个步骤，但我对第 3 步感到困惑。在第 3 步中，有两个选项。

选项 1：使用请求上下文。

选项 2：手动生成 CSRF 令牌并将其添加到模板上下文中。

如果我想使用选项 1 并从基本视图类实现一个视图类，我是否需要做额外的工作来生成令牌？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T04:03:48.327

设置

```
MIDDLEWARE_CLASSES = [
    //other middlewares

    'django.middleware.csrf.CsrfViewMiddleware',

] 
```

模板

```
<form method="post">
    {% csrf_token %}
    ......
</form> 
```

意见

```
def view_name(request):
    if request.method == 'POST':
        ..... 
```

# javascript - 提交今天的日期作为隐藏表单输入值

> ID：15103890
> 
> 赞同：3
> 
> 时间：2013-02-27T03:53:01.807
> 
> 标签：javascript, forms, date

我需要通过隐藏的表单输入字段以 yyyymmdd 格式发送当前日期。

我用这个 javascript 格式化了我想要的日期

```
function getDate()
{
var today = new Date();
var dd = today.getDate();
var mm = today.getMonth()+1; //January is 0!
var yyyy = today.getFullYear();
if(dd<10){dd='0'+dd} if(mm<10){mm='0'+mm} today = yyyy+mm+dd;
} 
```

这是我的表单输入字段

```
<input type="hidden" name="startdate" onload="this.value = getDate();"/> 
```

我尝试了几种方法将上面的日期分配给我的 var startdate 并将其发送到服务器，但没有任何成功。

你能告诉我如何在页面加载时将日期传递给我的隐藏输入字段吗？

我想知道这是否对安全和黑客有任何问题？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T03:54:59.627

```
<input type="hidden" name="startdate" id="todayDate"/>
<script type="text/javascript">
function getDate()
{
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth()+1; //January is 0!
    var yyyy = today.getFullYear();
    if(dd<10){dd='0'+dd} if(mm<10){mm='0'+mm}
    today = yyyy+""+mm+""+dd;

    document.getElementById("todayDate").value = today;
}

//call getDate() when loading the page
getDate();
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T04:06:40.087

如果您将日期用于某种验证，那么为了安全起见，您最好使用服务器端脚本；这样客户就不能欺骗日期。

此外，`<input>`即使您使用服务器端生成日期，也不应该使用 ，因为您仍然可以使用 Firebug 或许多其他 Web 开发人员工具来欺骗时间。提交的 HTTP POST（或其他）可能包含欺骗数据。最后，没有什么是 100% 安全的。

# android - 日历应用程序中的取消完成按钮 - 它是操作栏的一部分吗？

> ID：15103895
> 
> 赞同：10
> 
> 时间：2013-02-27T03:53:37.730
> 
> 标签：android, android-ui

![谷歌日历应用](../Images/4211115c8f842def746863c85ad00fa4.png)

嗨，我指的是日历应用程序中的取消/完成按钮。这 2 个按钮固定在顶部，即使您滚动底部的“表单”，它们也始终可见。

我可以知道，它是 Action Bar 的一部分吗？如果是这样，实现应该如何？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T04:32:59.773

请记住，Android 是开源的，并且大多数预装在运行 aosp 的 android 设备上的应用程序都是开源的。

这是项目：[https ://github.com/android/platform_packages_apps_calendar](https://github.com/android/platform_packages_apps_calendar)

是的，这是一个自定义的 ActionBar 设置，这是 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal"
android:divider="?android:attr/dividerVertical"
android:dividerPadding="12dip
android:showDividers="middle">

<!-- id must match corresponding menu item id -->
<LinearLayout
    android:id="@+id/action_cancel
    style="@style/EditEventCustomActionButton">

<ImageView
    android:src="@drawable/ic_menu_cancel_holo_light"
    style="@style/EditEventCustomActionButtonImage" />
    <TextView
        android:text="@string/discard_label"
        style="@style/EditEventCustomActionButtonText" />

</LinearLayout>

<!-- id must match corresponding menu item id -->
<LinearLayout
    android:id="@+id/action_done"
    style="@style/EditEventCustomActionButton">

    <ImageView
        android:src="@drawable/ic_menu_done_holo_light"
        style="@style/EditEventCustomActionButtonImage" />
    <TextView
        android:text="@string/save_label"
        style="@style/EditEventCustomActionButtonText" />

    </LinearLayout
</LinearLayout> 
```

稍后在运行时设置：

```
View actionBarButtons = inflater.inflate(R.layout.edit_event_custom_actionbar,
new LinearLayout(mContext), false);
View cancelActionView = actionBarButtons.findViewById(R.id.action_cancel);
cancelActionView.setOnClickListener(mActionBarListener);
View doneActionView = actionBarButtons.findViewById(R.id.action_done);
doneActionView.setOnClickListener(mActionBarListener);
mContext.getActionBar().setCustomView(actionBarButtons); 
```

希望有帮助

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-15T21:52:15.783

只是为了分享......为了实现一个夏洛克片段，使用的 LayoutInflater 是来自 oncreateView 方法的一个：

```
 setHasOptionsMenu(true);
    View actionBarButtons = inflater.inflate(R.layout.edit_event_custom_actionbar, new LinearLayout(getActivity()), false);

    View cancelActionView = actionBarButtons.findViewById(R.id.action_cancel);
    cancelActionView.setOnClickListener(mActionBarListener);

    View doneActionView = actionBarButtons.findViewById(R.id.action_done);
    doneActionView.setOnClickListener(mActionBarListener);

    getSherlockActivity().getSupportActionBar().setHomeButtonEnabled(false);
    getSherlockActivity().getSupportActionBar().setDisplayShowHomeEnabled(false);
    getSherlockActivity().getSupportActionBar().setDisplayHomeAsUpEnabled(false);
    getSherlockActivity().getSupportActionBar().setDisplayShowTitleEnabled(false);

    getSherlockActivity().getSupportActionBar().setDisplayShowCustomEnabled(true);
    getSherlockActivity().getSupportActionBar().setCustomView(actionBarButtons); 
```

动作栏监听器在哪里

```
private final View.OnClickListener mActionBarListener = new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        onActionBarItemSelected(v.getId());
    }
};

private boolean onActionBarItemSelected(int itemId) {
    switch (itemId) {
    case R.id.action_done:
        save();
        break;
    case R.id.action_cancel:
        System.err.println("cancel");
        getActivity().onBackPressed();
        break;
    }
    return true;
} 
```

并且布局与之前的帖子相同：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal"
android:divider="?android:attr/dividerVertical"
android:dividerPadding="12dip
android:showDividers="middle">

<!-- id must match corresponding menu item id -->
<LinearLayout
    android:id="@+id/action_cancel
    style="@style/EditEventCustomActionButton">

<ImageView
    android:src="@drawable/ic_menu_cancel_holo_light"
    style="@style/EditEventCustomActionButtonImage" />
    <TextView
        android:text="@string/discard_label"
        style="@style/EditEventCustomActionButtonText" />

</LinearLayout>

<!-- id must match corresponding menu item id -->
<LinearLayout
    android:id="@+id/action_done"
    style="@style/EditEventCustomActionButton">

    <ImageView
        android:src="@drawable/ic_menu_done_holo_light"
        style="@style/EditEventCustomActionButtonImage" />
    <TextView
        android:text="@string/save_label"
        style="@style/EditEventCustomActionButtonText" />

    </LinearLayout
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-19T16:29:20.657

根据 daniel_c05 的回答，我能够在我的应用程序中使用它，但是我需要一些额外的步骤，这些步骤在任何一个现有答案中都没有记录，以使其正常工作。

1）您需要检索布局本身，为方便起见，引用如下，最初来自： [https ://github.com/android/platform_packages_apps_calendar/blob/master/res/layout/edit_event_custom_actionbar.xml](https://github.com/android/platform_packages_apps_calendar/blob/master/res/layout/edit_event_custom_actionbar.xml)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:divider="?android:attr/dividerVertical"
    android:dividerPadding="12dip
    android:showDividers="middle">

    <!-- id must match corresponding menu item id -->
    <LinearLayout
        android:id="@+id/action_cancel
        style="@style/EditEventCustomActionButton">

        <ImageView
            android:src="@drawable/ic_menu_cancel_holo_light"
            style="@style/EditEventCustomActionButtonImage" />

        <TextView
            android:text="@string/discard_label"
            style="@style/EditEventCustomActionButtonText" />

    </LinearLayout>

    <!-- id must match corresponding menu item id -->
    <LinearLayout
        android:id="@+id/action_done"
        style="@style/EditEventCustomActionButton">

        <ImageView
            android:src="@drawable/ic_menu_done_holo_light"
            style="@style/EditEventCustomActionButtonImage" />

        <TextView
            android:text="@string/save_label"
            style="@style/EditEventCustomActionButtonText" />

    </LinearLayout>
</LinearLayout> 
```

2）您还需要使用它的样式，下面引用为方便起见，最初来自： [https ://github.com/android/platform_packages_apps_calendar/blob/master/res/values/styles.xml](https://github.com/android/platform_packages_apps_calendar/blob/master/res/values/styles.xml)

```
<style name="EditEventCustomActionButton" parent="android:style/Widget.Holo.Light.ActionButton">
    <item name="android:layout_height">match_parent</item>
    <item name="android:layout_width">0dp</item>
    <item name="android:layout_weight">1</item>
    <item name="android:focusable">true</item>
    <item name="android:orientation">horizontal</item>
</style>

<style name="EditEventCustomActionButtonImage">
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_width">wrap_content</item>
    <item name="android:padding">4dp</item>
</style>

<style name="EditEventCustomActionButtonText">
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_width">wrap_content</item>
    <item name="android:textAppearance">?android:attr/actionMenuTextAppearance</item>
    <item name="android:textColor">?android:attr/actionMenuTextColor</item>
    <item name="android:orientation">horizontal</item>
    <item name="android:singleLine">true</item>
    <item name="android:ellipsize">none</item>
    <item name="android:padding">4dp</item>
</style> 
```

3）您还需要获取按钮drawables，或者用您自己的替换它们，它们可以在此处的各种drawable文件夹中找到： [https ://github.com/android/platform_packages_apps_calendar/tree/master/res](https://github.com/android/platform_packages_apps_calendar/tree/master/res)

4) 现在唯一缺少的是您可以在上面的链接中找到的字符串资源，尽管我只是用我已经定义的自己替换了它们。

5）要真正让它正常工作，我必须做的不仅仅是给它充气。以下是我必须在 OnCreate 中投入的最低金额才能使其正常工作。我正在使用 Xamarin，但为了方便起见，我已经放了 Java 和 Xamarin 版本。公平警告：我还没有测试 Java 版本。

爪哇

```
// Inflate the custom view and add click handlers for the buttons
View actionBarButtons = inflater.inflate(R.layout.edit_event_custom_actionbar,
    new LinearLayout(mContext), false);

View cancelActionView = actionBarButtons.findViewById(R.id.action_cancel);
cancelActionView.setOnClickListener(mActionBarListener);

View doneActionView = actionBarButtons.findViewById(R.id.action_done);
doneActionView.setOnClickListener(mActionBarListener);

// Retrieve an instance of the Activity's ActionBar
ActionBar actionBar = mContext.getActionBar();

// Hide the icon, title and home/up button
actionBar.setDisplayShowHomeEnabled(false);
actionBar.setDisplayHomeAsUpEnabled(false);
actionBar.setDisplayShowTitleEnabled(false);

// Set the custom view and allow the bar to show it
actionBar.setCustomView(actionBarButtons);
actionBar.setDisplayShowCustomEnabled(true); 
```

Xamarin C#

```
// Inflate layout for custom action bar with save & cancel buttons
var actionBarLayout = (LinearLayout)LayoutInflater.Inflate(
    Resource.Layout.ActionBarSave, new LinearLayout(BaseContext), false);

var saveButton = actionBarLayout.FindViewById<LinearLayout (Resource.Id.action_done);
saveButton.Click += saveButton_Click;

var cancelButton = actionBarLayout.FindViewById<LinearLayout>(Resource.Id.action_cancel);
cancelButton.Click += cancelButton_Click;

// Hide the icon, title and home/up button
ActionBar.SetDisplayShowHomeEnabled(false);
ActionBar.SetDisplayHomeAsUpEnabled(false);
ActionBar.SetDisplayShowTitleEnabled(false);

// Set the custom view and allow the bar to show it
var layoutParams = new ActionBar.LayoutParams(
    ActionBar.LayoutParams.MatchParent,
    ActionBar.LayoutParams.MatchParent);
ActionBar.SetCustomView(actionBarLayout, layoutParams);
ActionBar.SetDisplayShowCustomEnabled(true); 
```

这就是我让它工作所需要的一切。我试图尽可能全面，希望这将使某人免于使用谷歌搜索来尝试找到其他答案中缺少的步骤。

# telerik-mvc - Telerik asp.net mvc 扩展的级联下拉列表

> ID：15103896
> 
> 赞同：0
> 
> 时间：2013-02-27T03:53:58.003
> 
> 标签：telerik-mvc

我希望能够让我们说两个下拉列表，其中从第二个下拉列表中检索到的数据取决于第一个下拉列表的选定值。

我知道我会在第一个控制器中执行一个 html.beginform 执行特定的操作方法，但我无法根据第二个值找出一种方法来执行它。

我还需要一种方法来获取已检查项目的 selectedindex。

有人可以帮助我并告诉我如何做到这一点吗？

代码片段将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:27:01.047

为什么不使用级联功能？您需要了解和配置的所有内容都包含在此[演示](http://demos.telerik.com/aspnet-mvc/combobox/cascadingcombobox)中。

# java - '.class' 预期错误

> ID：15103898
> 
> 赞同：0
> 
> 时间：2013-02-27T03:54:01.400
> 
> 标签：java, arrays, class, object, loops

嗨，我正在开发碰碰车游戏，但出现错误

```
P:\162>javac bumpercardemo.java 
```

bumpercardemo.java:13: 错误: '.class' 预期 printGrid(bcar[], NUMCARS); ^ bumpercardemo.java:34: 错误：预期的公共静态无效 printGrid(bcar[], int NUMCARS) ^ 2 个错误

我是新程序员，从未见过这种类型的错误。

```
import java.util.Random;

public class bumpercardemo
{
public static void main (String args[])
{
    final int NUMCARS = 16;
    bumpercar bcar[] = new bumpercar[NUMCARS];
    createcars(NUMCARS, bcar);
    printGrid(bcar[], NUMCARS);
}

public static void createcars(int NUMCARS, bumpercar bcar[])
{
    int x=0;
    int y=0;
    Random generator = new Random();
    char symbol = 'A';

    for (int i=0; i<NUMCARS; i++)
    {
        bcar[i] = new bumpercar(x, y, symbol);
        symbol++;

        x = generator.nextInt(bcar[0].getCarSymbol());
        y = generator.nextInt(bcar[0].getCarSymbol());
    }
}

public static void printGrid(bumpercar bcar[], int NUMCARS)
{
    //nested loop
    for(int j = 0; j < 16; j++)
    {
    System.out.printf("\n");
        for(int k = 0; k<16; k++)
        {
            for(int l = 0; l<NUMCARS; l++)
            {
            if((bcar[l].getX() == k) && bcar[l].getY() == j)
            System.out.printf("%s", bcar[l].getCarSymbol());
            else
            System.out.printf("- ");
            }
        }
    }
}

} 
```

我认为它与 [] 有关，但由于我传入一个数组，我不确定还能做什么。

我检查了[为什么我会收到“.class”预期错误？简单的数组脚本](https://stackoverflow.com/questions/7535073/why-am-i-getting-a-class-expected-error-simple-array-script)，但我无法完全理解它与我的程序的关系。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T03:57:29.977

取出`[]`. 由于您要传递数组，因此您只需传递变量名。

```
printGrid(bcar, NUMCARS); 
```

您在调用 时做得正确 `createcars()`，所以只需模仿那种风格。

# php - 在php中注销后会话不会破坏

> ID：15103901
> 
> 赞同：0
> 
> 时间：2013-02-27T03:54:13.140
> 
> 标签：php

我进行了很多研究，但我还没有找到解决问题的方法。我为用户单击一个链接以注销用户，然后将其重定向到登录页面。问题是当用户被重定向时它仍然登录。这是我注销用户的代码。

```
session_start();
  $_SESSION = array(); //destroy all of the session variables
  unset($_SESSION['valid']);
  unset($_SESSION['userid']);
  unset($_SESSION['username']);
  session_destroy();
  Header("Location:login.php");
  exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:02:47.013

确保登录和注销页面的子域相同

因为会话的 cookie 默认是基于域的，除非你改变它。

```
session_set_cookie_params ( int $lifetime [, string $path [, string $domain [, bool $secure = false [, bool $httponly = false ]]]] ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T07:36:47.383

我遇到了类似的问题，是的，我发现我的 cookie 已设置；所以只需添加以下代码就可以帮助我摆脱它：

```
if(isset($_COOKIE[session_name()])):
setcookie(session_name(), '', time()-7000000, '/'); 
```

万一;

# scala - 如何使用 Play2/scala 获取我自己的类名的记录器？

> ID：15103902
> 
> 赞同：2
> 
> 时间：2013-02-27T03:54:16.423
> 
> 标签：scala, logging, playframework, playframework-2.1

在 Play 2 中，我使用以下代码获取记录器：

```
public class LoggerHelper {
    public static Logger getLogger() {
        final Throwable t = new Throwable();
        t.fillInStackTrace();
        final String fullClassName = t.getStackTrace()[1].getClassName();
        return Logger.getLogger(fullClassName);
    }
}

public class MyController {
    private final static Logger logger = LoggerHelper.getLogger();
} 
```

在 Play 2 中，我找到的用于获取记录器的代码示例如下所示：

```
class MyController {
  private val log = Logger(classOf[MyController])
  ...
} 
```

我怎样才能使它不包括类名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T06:49:38.597

也许我误读了你的问题，但看起来你所需要的只是

```
class MyController {
  private val log = Logger(this.getClass)
  ...
} 
```

还是我误解了您的需求？

# ruby-on-rails - 创建子记录：NilClass:Class 的未定义方法“model_name”

> ID：15103905
> 
> 赞同：0
> 
> 时间：2013-02-27T03:54:25.427
> 
> 标签：ruby-on-rails, class, methods, ruby-on-rails-3.2

当我访问我的一个控制器的“新”操作时，我收到了可怕的错误：“NilClass:Class 的未定义方法 `model_name'”。当我访问 /works/new 时发生错误。一个用户 has_many 作品。这是 Works 控制器：

```
class WorksController < ApplicationController

  def index
    @works = Work.all

respond_to do |format|
  format.html # index.html.erb
  format.xml  { render :xml => @works }
end

def create
@work = current_user.works.build(params[:works])
    if @work.save
      redirect_to root_url
    else
      render 'home'
    end
  end

def new
  @work = Work.new
end

def destroy
  @work.destroy
  redirect_to root_url
end

end
  def show
    @work = Work.find(params[:id])
    @user = User.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @work }
    end
  end
end 
```

在 new.html.erb 视图文件中，我使用以下循环创建表单，以便提交填写的字段将为用户创建新的工作记录：

```
 <%= form_for(@work) do |f| %> 
```

我有一种感觉，这是错误的根源，因为我没有告诉 Rails 创建新的 Work 时要考虑到用户关系。我是否正确假设这是问题所在？如果是这样，我该如何解决上述循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:11:14.340

我建议更改您的新方法，以便将 Work 对象的范围限定为当前用户。虽然我不确定这是你的问题......

```
def new
  @work = current_user.works.new
end 
```

**更新：**

看起来您的方法定义在控制器中被搞砸了。`create`, `new`, 并且`destroy`实际上是在您的`index`方法中定义的。您需要将位于`end`该`show`方法正上方的那个移动到该方法的正上方`create`。

# macos - 如何判断“ls”中的目录是否是符号链接？

> ID：15103912
> 
> 赞同：21
> 
> 时间：2013-02-27T03:55:10.120
> 
> 标签：macos, unix, terminal, symlink

我正在使用 Mac OS X 终端。如何判断“ls”返回的目录是符号链接还是实际目录？如果它是符号链接，我如何检查它链接到的位置或修改它？

我实际上试图对此进行大量研究，但我发现的一切都是关于创建符号链接的。我最接近的是能够在我的终端中为几件事设置颜色。我假设有一个实际的命令可以获取有关目录或文件的信息。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-27T03:59:01.030

利用`ls -l`

示例输出：

```
-rwxr-xr-x 1 foo staff  642 Nov 22  2010 getCactiImages.sh
lrwxr-xr-x 1 foo staff   36 Aug 29 15:29 imgopt -> ../Projects/imgopt/imgopt 
```

`imgopt`是符号链接，`getCactiImages.sh`是普通文件

你也可以使用`stat filename`

例子：

```
 File: ‘imgopt’ -> ‘../Projects/imgopt/imgopt’
  Size: 36          Blocks: 8          IO Block: 4096   symbolic link
Device: 1000005h/16777221d  Inode: 7743835     Links: 1
Access: (0755/lrwxr-xr-x)  Uid: (  501/  foo)   Gid: (   20/   staff)
Access: 2012-08-29 15:29:19.000000000 -0700
Modify: 2012-08-29 15:29:19.000000000 -0700
Change: 2012-08-29 15:29:19.000000000 -0700
 Birth: 2012-08-29 15:29:19.000000000 -0700 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T03:58:34.577

`ls -al`会告诉你。符号链接将被标记为：`target -> source`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T03:59:51.470

使用“ls -F”命令，文件名将以“@”作为后缀。要查看链接，请使用“ls -l”。您可能会发现定义起来很方便

```
alias ls='ls -F'
alias ll='ls -l' 
```

# c# - Xamarin.IOS 导入现有情节提要

> ID：15103913
> 
> 赞同：4
> 
> 时间：2013-02-27T03:55:09.777
> 
> 标签：c#, ios, objective-c, xcode, xamarin

我正在使用 Xamarin.IOS 开发 iOS 移动应用程序。我有一个正在尝试使用的现有原生 Storyboard。是否可以将现有的 Xcode Storyboard 导入 Xamarin 项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T15:27:38.723

这将使您开始：

1.  将情节提要文件添加到您的项目中
2.  打开项目选项；在 IOS 应用程序中添加对故事板的引用 => iPhone / iPod 部署信息 => 主界面
3.  将属性 [Register ("YourViewController")] 添加到类声明中。添加网点等

如果您希望项目具有与 Xamarin Studio 创建项目的方式相似的结构，请将 Register 属性和插座等放在名为 YourViewController.designer.cs 的单独部分类文件中，并将其移动到主类文件下（将其拖到主类文件上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T06:55:29.087

我进行了重命名解决方案的练习。目前这是不可能的。因此，我创建了一个新的解决方案（使用我想要的最终名称）。在 Xamarin Studio 中，我添加了文件（视图控制器连同`designer.cs`文件、情节提要......）。不要仅仅因为它以某种方式存储在项目选项中而将其复制到文件结构中。这些`designer.cs`文件必须放在视图控制器文件下才能获得 Xamarin 使用的相同结构。

为了让一切正常工作，您必须`namespace`在视图控制器和`designer.cs`文件中进行调整！正如 Terry Westley 所说，您应该确保已加载正确的故事板（项目选项 -> iOS 应用程序 -> iPhone/iPod 部署信息 -> 主界面）。

您还可以通过代码加载情节提要

```
Storyboard = UIStoryboard.FromName ("MainStoryboard_iPhone", null); 
```

现在我的视图控制器和情节提要按预期工作。

# c# - 在可视化 Web 开发人员中上传图像并保存到 SQL 数据库

> ID：15103914
> 
> 赞同：0
> 
> 时间：2013-02-27T03:55:11.890
> 
> 标签：c#, sql, sql-server, visual-studio-2010, vwdexpress

我已经在数据库中创建了一个用于添加图像的存储过程，但现在的问题是，我需要在客户端获取图像数据并转换为字节以插入数据库，这是我正在使用的代码：

```
 public static void AddImg (string asImgName, string asFilePath, string asUser, string asRemarks)
    {
        cmd = new SqlCommand("sp_InsertImage", SqlConnect.con);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add("@Image_Name", SqlDbType.NVarChar).Value = asImgName;
        cmd.Parameters.Add("@Image", SqlDbType.VarBinary).Value = File.ReadAllBytes(asFilePath);
        cmd.Parameters.Add("@Uploader", SqlDbType.NVarChar).Value = asUser;
        cmd.Parameters.Add("@Remarks", SqlDbType.NVarChar).Value = asRemarks;
        cmd.Parameters.Add("@UploadDate", SqlDbType.DateTime).Value = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss");
        cmd.ExecuteNonQuery();
    } 
```

现在我面临一个问题：在代码的第5行 `"cmd.Parameters.Add("@Image", SqlDbType.VarBinary).Value = File.ReadAllBytes(asFilePath);"` 它只读取服务器端路径，那么我需要进行哪些更改才能上传图像？

谢谢

======================================= 我通过使用VWD中的上传文件控制解决了这个问题

```
fileUpload1.FileBytes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:27:49.540

您是否尝试在设置命令之前读取字节数组？

```
public static void AddImg (string asImgName, string asFilePath, string asUser, string asRemarks)
{
    var bytes = File.ReadAllBytes(asFilePath);
    ...
    cmd.Parameters.Add("@Image", SqlDbType.VarBinary).Value = bytes;
    ...
    cmd.ExecuteNonQuery();
} 
```

我假设客户端是调用上述方法的人。不能肯定这会解决您的问题，但值得一试。无论如何，预先读取字节更容易阅读，您应该进行此更改。

# ios - 关于“对多”和谓词

> ID：15103927
> 
> 赞同：0
> 
> 时间：2013-02-27T03:56:48.757
> 
> 标签：ios, core-data, nspredicate, one-to-many

我有两个具有“对多”关系的实体

![在此处输入图像描述](../Images/3a1c7500cdf30bf8f6664f289ff5d4d5.png)

现在我想获取所有只有**最喜欢**（isFavorite）食谱的类别。

这就像：

```
SELECT c.*  
FROM zcategories c, zrecipes r
where 
    r.zisfavorite = 1
    and r.zincategory = c.z_pk
group by c.zname; 
```

我试过

```
 - (NSFetchedResultsController *)fetchedResultsController
{
    if (__fetchedResultsController != nil) {
        return __fetchedResultsController;
    }

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    self.checkedMOC = appDelegate.managedObjectContext;

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Categories" inManagedObjectContext:self.checkedMOC];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ALL recipes.isFavorite == %@", [NSNumber numberWithInt:1]];
    [fetchRequest setEntity:entity];
    [fetchRequest setPredicate:predicate];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.checkedMOC sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __fetchedResultsController;
} 
```

但发生错误**“此处不允许使用多对多键”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:21:18.830

如果您想要具有一个或多个收藏夹食谱的类别实例，请尝试使用`ANY`关键字

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY recipes.isFavorite == %@", [NSNumber numberWithInt:1]]; 
```

如果您想要只有收藏夹食谱的类别实例，您可以使用`ALL`关键字：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ALL recipes.isFavorite == %@", [NSNumber numberWithInt:1]]; 
```

# javascript - 使用 EmberJS 进行本地化

> ID：15103934
> 
> 赞同：1
> 
> 时间：2013-02-27T03:57:30.347
> 
> 标签：javascript, ember.js

我有一个 I18n 应用程序，它本质上使用返回 JSON 的 ajax 调用加载语言环境的翻译。

现在，它将 JSON 放入 Em.STRINGS。在 HTML 中，我有一个把手标签，上面写着这样的内容

> ```
> {{translate context key="LOGOUT_LABEL"}} 
> ```

我在我的 JS 中写了一个看起来像这样的助手

```
Ember.Handlebars.registerHelper('translate', function(property, options) {
    var key = options.hash && options.hash.key, 
    replacants = options.hash && options.hash.values, value;
    if (key) {
        value = Em.String.loc(key, replacants ? Em.String.w(replacants) : []); 
        return value ;
    }
}); 
```

当它运行时，首先绘制我的 HTML，然后进行 AJAX 调用。所以，翻译实际上没有出现！我该如何解决？

这是小提琴网址：http: [//jsfiddle.net/infinityat0/gBa7T/](http://jsfiddle.net/infinityat0/gBa7T/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:35:14.970

这不起作用：

```
var App = Em.Application.create({
    locale: 'en_US',
    init: function () {
        var locale = this.get('locale') || 'en_US';
        $.get("http://localhost:8000/translations.json", {
            locale: locale
        }, function (data) {
            Ember.STRINGS = data;
        });
    }
}); 
```

实际上，如果您更换 AJAX-Call，您的小提琴就可以工作。对 localhost 的 Ajax-Call 无法正常工作。[在此处](http://jsfiddle.net/mavilein/gBa7T/1/)查看工作版本。

**更新：** 如果您想为此用例编写自己的助手，则必须创建一个绑定助手。这在最新的 ember 版本 ( [ember doc](http://emberjs.com/api/classes/Ember.Handlebars.html#method_registerBoundHelper) ) 中可用。您的代码可能如下所示：

```
Em.Handlebars.registerBoundHelper('translate', function (property, options) {
    var key = options.hash && options.hash.key,
        replacants = options.hash && options.hash.values,
        value;
    if (key) {
        value = Em.String.loc(key, replacants ? Em.String.w(replacants) : []);
        console.log(value);
        console.log(Ember.STRINGS);
        return value;
    }
}, "Ember.STRINGS"); 
```

**注意：** 有一个名为[ember-i18n](https://github.com/jamesarosen/ember-i18n)的项目。您可能应该以此为基础，而不是使用如此低级的 api。

# algorithm - 应该使用什么类型的遍历来找到二叉树的总和？

> ID：15103935
> 
> 赞同：4
> 
> 时间：2013-02-27T03:57:53.997
> 
> 标签：algorithm, binary-tree, depth-first-search, tree-traversal

以下问题出现在我的导师几年前进行的一次测试中。他提供了答案，但没有提供令人满意的解释。我已经用谷歌搜索了这个主题，但我没有找到太多。我希望社区可以帮助我理解这个概念。

> 为了找到二叉树中所有整数的总和，将使用哪种类型的遍历？
> 
> (A) 广度优先
> (B) 深度优先顺序
> (C) 深度优先后序
> (D) 深度优先前序

我的导师说答案是（C）深度优先后序，但我不明白为什么。似乎他们都会工作。我将不胜感激您可能拥有的任何见解。

谢谢。

编辑：我终于明白了为什么我的导师认为答案是（C）。

如果您要在单个语句中编写一个带有加法的 sum 函数，例如：

```
 int addup(Node n)
    {
        if (n == nil) return 0;
        return addup(n.left) + n.value + addup(n.right);
    } 
```

无论总和中的项的顺序如何，遍历都是后序的。这是因为这两个函数在加法发生之前首先被评估。然而，正如 Keith Randall 在他的回答中所表明的那样，强制进行预排序或有序遍历是微不足道的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:48:46.067

任何遍历顺序都可以工作，因为 sum 是关联的和对称的。例如，深度优先顺序：

```
int addup(Node n) {
    if (n == nil) return 0;
    int sum = addup(n.left);
    sum += n.value;
    sum += addup(n.right);
    return sum;
} 
```

所有的遍历都承认一个简单的求和实现。

# html - CSS Bootstrap 导航栏间距问题

> ID：15103936
> 
> 赞同：0
> 
> 时间：2013-02-27T03:57:58.020
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Bootstrap 创建导航栏，但我有一个小问题。导航栏下方有一个小空间，可将元素推到其下方。我想删除空间，同时保持导航栏完好无损。在不影响我的导航栏中的样式的情况下，这是否可能？任何意见将是有益的。

我想补充一点：我指的是 Bootstrap 在底部添加空间。我看过萤火虫，但在更改样式时遇到了麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:02:48.327

在 bootstrap.css 的第 4290 行删除导航栏的默认边距，即

```
.navbar {
   *position: relative;
   *z-index: 2;
   margin-bottom: 20px;
  overflow: visible;
  } 
```

您可以执行以下操作来覆盖它：

```
.navbar {
         margin-bottom:2px; or any thing you like 
        } 
```

# ios - 滚动uitableview时单元格子视图消失

> ID：15103937
> 
> 赞同：0
> 
> 时间：2013-02-27T03:58:04.903
> 
> 标签：ios, uitableview, ios6

我正在做下面的代码。问题是，当我滚动一个单元格将进入不可见部分时，当它再次进入可见部分时，单元格的子视图就像标签等一样消失了。

代码 ：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"playcell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
    }
    if (indexPath.section == 0) {
        if (indexPath.row == 0) {
            [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"header.png"] forState:UIControlStateNormal];
            cell.backgroundCellBtn.userInteractionEnabled = NO;
            cell.nameTextLbl.hidden = YES;
            cell.playtimeLbl.hidden = YES;
            cell.lineSperatorImageView.hidden = YES;
        }else if (indexPath.row == self.yourTurnPlayList.count +1) {
            [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"footer.png"] forState:UIControlStateNormal];
            cell.backgroundCellBtn.userInteractionEnabled = NO;
            cell.nameTextLbl.hidden = YES;
            cell.playtimeLbl.hidden = YES;
            cell.lineSperatorImageView.hidden = YES;

        }
        else {
            int pathValue = indexPath.row  -1 ;
            if (pathValue > (-1) && pathValue < self.yourTurnPlayList.count) {
                [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"sample.png"] forState:UIControlStateNormal];
                [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"sample.png"] forState:UIControlStateHighlighted];
                [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"sample.png"] forState:UIControlStateSelected];

                GamePlay *gamePlay = [self.yourTurnPlayList objectAtIndex:pathValue];
                cell.backgroundCellBtn.tag = pathValue;
                cell.nameTextLbl.text = [self getCurrentPlayerFormattedName:gamePlay];
                cell.playtimeLbl.text = [NSString stringWithFormat:@"played %@",[Helper getLastPlayedStringFromUnixTime:gamePlay.lastMoveTime]];
            }
        }
    } else if (indexPath.section == 1) {
        if (indexPath.row == 0) {
            [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"header2"] forState:UIControlStateNormal];
            cell.backgroundCellBtn.userInteractionEnabled = NO;
            cell.nameTextLbl.hidden = YES;
            cell.playtimeLbl.hidden = YES;
             cell.lineSperatorImageView.hidden = YES;
        }else if (indexPath.row == self.theirTurnPlayList.count +1) {
            [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"footer2.png"] forState:UIControlStateNormal];
            cell.backgroundCellBtn.userInteractionEnabled = NO;
            cell.nameTextLbl.hidden = YES;
            cell.playtimeLbl.hidden = YES;
            cell.lineSperatorImageView.hidden = YES;

        }
        else {
            int pathValue = indexPath.row  -1 ;
            if (pathValue > (-1) && pathValue < self.theirTurnPlayList.count) {
                 [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"sample.png"] forState:UIControlStateNormal];
                [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"sample.png"] forState:UIControlStateHighlighted];
                [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"sample.png"] forState:UIControlStateSelected];
                cell.backgroundCellBtn.userInteractionEnabled = NO;
                GamePlay *gamePlay = [self.theirTurnPlayList objectAtIndex:pathValue];
                cell.nameTextLbl.text = [self getCurrentPlayerFormattedName:gamePlay];
                cell.playtimeLbl.text = [NSString stringWithFormat:@"%@",[Helper getLastPlayedStringFromUnixTime:gamePlay.lastMoveTime]];
            }
        }
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:02:43.460

因为细胞被你隐藏了。当它们重用时，它们是隐藏的，所以你应该将隐藏设置为NO，当重用时

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"playcell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
    }
    if (indexPath.section == 0) {
        if (indexPath.row == 0) {
            [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"header.png"] forState:UIControlStateNormal];
            cell.backgroundCellBtn.userInteractionEnabled = NO;
            cell.nameTextLbl.hidden = YES;
            cell.playtimeLbl.hidden = YES;
            cell.lineSperatorImageView.hidden = YES;
        }else if (indexPath.row == self.yourTurnPlayList.count +1) {
            [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"footer.png"] forState:UIControlStateNormal];
            cell.backgroundCellBtn.userInteractionEnabled = NO;
            cell.nameTextLbl.hidden = YES;
            cell.playtimeLbl.hidden = YES;
            cell.lineSperatorImageView.hidden = YES;

        }
        else {
            int pathValue = indexPath.row  -1 ;
            if (pathValue > (-1) && pathValue < self.yourTurnPlayList.count) {
                [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"sample.png"] forState:UIControlStateNormal];
                [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"sample.png"] forState:UIControlStateHighlighted];
                [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"sample.png"] forState:UIControlStateSelected];

                GamePlay *gamePlay = [self.yourTurnPlayList objectAtIndex:pathValue];
                cell.backgroundCellBtn.tag = pathValue;
                cell.nameTextLbl.text = [self getCurrentPlayerFormattedName:gamePlay];
                cell.playtimeLbl.text = [NSString stringWithFormat:@"Last played %@",[Helper getLastPlayedStringFromUnixTime:gamePlay.lastMoveTime]];

               //add these
               cell.nameTextLbl.hidden = NO;
               cell.playtimeLbl.hidden = NO;
               cell.lineSperatorImageView.hidden = NO;
            }
        }
    } else if (indexPath.section == 1) {
        if (indexPath.row == 0) {
            [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"header2"] forState:UIControlStateNormal];
            cell.backgroundCellBtn.userInteractionEnabled = NO;
            cell.nameTextLbl.hidden = YES;
            cell.playtimeLbl.hidden = YES;
             cell.lineSperatorImageView.hidden = YES;
        }else if (indexPath.row == self.theirTurnPlayList.count +1) {
            [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"footer2.png"] forState:UIControlStateNormal];
            cell.backgroundCellBtn.userInteractionEnabled = NO;
            cell.nameTextLbl.hidden = YES;
            cell.playtimeLbl.hidden = YES;
            cell.lineSperatorImageView.hidden = YES;

        }
        else {
            int pathValue = indexPath.row  -1 ;
            if (pathValue > (-1) && pathValue < self.theirTurnPlayList.count) {
                 [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"sample.png"] forState:UIControlStateNormal];
                [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"sample.png"] forState:UIControlStateHighlighted];
                [cell.backgroundCellBtn setBackgroundImage:[UIImage imageNamed:@"sample.png"] forState:UIControlStateSelected];
                cell.backgroundCellBtn.userInteractionEnabled = NO;
                GamePlay *gamePlay = [self.theirTurnPlayList objectAtIndex:pathValue];
                cell.nameTextLbl.text = [self getCurrentPlayerFormattedName:gamePlay];
                cell.playtimeLbl.text = [NSString stringWithFormat:@"%@",[Helper getLastPlayedStringFromUnixTime:gamePlay.lastMoveTime]];

               //add these
               cell.nameTextLbl.hidden = NO;
               cell.playtimeLbl.hidden = NO;
               cell.lineSperatorImageView.hidden = NO;
            }
        }
    }

    return cell;
} 
```

# java - 在 Java 中检索数据

> ID：15103944
> 
> 赞同：2
> 
> 时间：2013-02-27T03:58:39.160
> 
> 标签：java, data-structures, web-scraping, data-extraction

我是一个java新手。是否可以从网站获取数据，然后将其存储在某种数据结构中？例如，该程序在给定时间从 yahoo Finance 获取股票的价值并将其存储。就像我说的，我对 Java 不是很精通，我想知道这是否可以做到。如果可以的话，是不是很难做到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:48:34.260

```
 public class GetYahooData
    {
        public ArrayList<JSONObject> getOutputFromUrl(String url) 
        {
            ArrayList<JSONObject> output = new ArrayList<JSONObject>();
            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            HttpResponse response;
            StringBuilder builder= new StringBuilder();
            JSONObject myjson ;
            JSONArray the_json_array;
            try 
            {
                response = httpClient.execute(httpPost);
                BufferedReader in = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
                char[] buf = new char[8000];
                int l = 0;
                    while (l >= 0) 
                    {
                        builder.append(buf, 0, l);
                        l = in.read(buf);
                    }
                myjson = new JSONObject("{child:"+builder.toString()+"}");
                JSONObject mmm = new JSONObject(builder.toString());
                JSONArray mmmArr = mmm.getJSONArray("status");
                the_json_array = myjson.getJSONArray("child");
                for (int i = 0; i < the_json_array.length(); i++) 
                {
                    JSONObject another_json_object =  the_json_array.getJSONObject(i);//the_json_array.getJSONObject(i);
                    output.add(another_json_object);
                }
            } catch (ClientProtocolException e) {
                System.out.println("ClientProtocolException :"+e);
                e.printStackTrace();
            } catch (IOException e) {
                System.out.println("IOException :"+e);
                e.printStackTrace();
            } catch (JSONException e) {
                System.out.println("JSONException hussain :"+e);
                e.printStackTrace();
            }
            return output;
        }
    }

public class useYahoo
{
    public static void main(String args[])
    {
        String url = "the url you want the response from";
        getYahooData object = new GetYahooData();
        ArrayList<JSONObject> output = object.getOutputFromUrl(url);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:39:40.990

我已经广泛使用[JSoup](http://jsoup.org/)。如果您只需要定制一个程序来从一个布局或结构不经常变化的网站中提取数据，`JSoup`那就足够了，而且很方便。

假设您了解有关如何编程的基础知识（不一定熟悉`Java`）并了解 Web 的组成部分（例如，什么是`html`，等等），我希望您能很快`dom`掌握如何进行 Web 抓取。`JSoup`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:03:46.157

是的，您可以将任意网页下载到 Java 字符串中并解析内容，但是这样的解决方案并不可靠。如果作者更改网站的结构，您的代码将立即中断。

进行这种集成的流行方式是通过[RESTful Web 服务](http://en.wikipedia.org/wiki/Representational_state_transfer)。数据提供者将有一组 URL 和参数，您可以调用它们，并返回股票价格数据（以 xml 或 JSON 格式）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T04:05:00.263

是的，在 web 服务的帮助下是可能的。

1.  雅虎或其他将公开网络服务。
2.  您的程序将使用该 Web 服务，并将获取数据并在您结束时进行操作

# apache - Apache vhost 覆盖配置？

> ID：15103945
> 
> 赞同：4
> 
> 时间：2013-02-27T03:58:56.073
> 
> 标签：apache, vhosts

我在我的 VPS 上安装了 Apache。它在上面托管一个站点，我们称之为 demo.com（位于 /var/www/html/demo.com），但我在 /var/www/html 中也有文件，我想通过指向浏览器来查看到VPS的IP。目前看来如果我想去

```
http://vpsIP/demofile.php 
```

它将是 404，所以我假设它正在查看虚拟主机目录。

以下是我的 httpd.conf 中的一些设置：

```
DocumentRoot "/var/www/html"
<VirtualHost *:80>
    ServerName www.demo.com
    ServerAlias demo.com *.demo.com

    DocumentRoot /var/www/html/demo.com
    <Directory "/var/www/html/demo.com">
        Order allow,deny
        Allow from all
        Allowoverride all
    </Directory>

    <IfModule mod_rewrite.c>
        RewriteEngine on
    </IfModule>
</VirtualHost> 
```

我是否必须指定 VPS 的 IP 的另一个虚拟主机才能查看我想要的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:22:30.780

只需添加另一个虚拟主机即可解决此问题。呃。

```
<VirtualHost IP:80>
DocumentRoot /var/www/html
</VirtualHost> 
```

# celery - 在芹菜中，让多个工人处理同一个队列的目的是什么？

> ID：15103947
> 
> 赞同：16
> 
> 时间：2013-02-27T03:59:04.573
> 
> 标签：celery, task-queue, celeryd, celery-task

在 celeryd-multi 的文档中，我们找到了这个例子：

```
# Advanced example starting 10 workers in the background:
#   * Three of the workers processes the images and video queue
#   * Two of the workers processes the data queue with loglevel DEBUG
#   * the rest processes the default' queue.
$ celeryd-multi start 10 -l INFO -Q:1-3 images,video -Q:4,5 data
    -Q default -L:4,5 DEBUG 
```

（从这里：[http](http://docs.celeryproject.org/en/latest/reference/celery.bin.celeryd_multi.html#examples) ://docs.celeryproject.org/en/latest/reference/celery.bin.celeryd_multi.html#examples ）

什么是一个实际的例子，说明为什么在一个主机上让多个工作人员处理同一个队列会很好，就像上面的例子一样？这不是设置并发的目的吗？

更具体地说，以下两行（A和B）之间是否有任何实际区别？：

A：

```
$ celeryd-multi start 10 -c 2 -Q data 
```

乙：

```
$ celeryd-multi start 1 -c 20 -Q data 
```

我担心由于我不理解这种实际差异而错过了一些关于任务队列的宝贵知识，如果有人能启发我，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-20T15:44:58.320

> 什么是一个实际的例子，说明为什么在一个主机上让多个工作人员处理同一个队列会很好，就像上面的例子一样？

答：</p>

> 因此，如果出现以下情况，您可能希望在同一机器节点上运行多个工作程序实例：
> 
> *   您正在使用多处理池并希望并行使用消息。一些报告使用多个工作程序实例而不是运行具有多个池工作程序的单个实例具有更好的性能。
>     
>     
> *   您正在使用 eventlet/gevent（并且由于臭名昭著的 GIL，也是“线程”）池），并且您希望在多个 CPU 内核上执行任务。

参考：[http://www.quora.com/Celery-distributed-task-queue/What-is-the-difference-between-workers-and-processes](http://www.quora.com/Celery-distributed-task-queue/What-is-the-difference-between-workers-and-processes)

# javascript - 设置窗口大小 asp vb javascript

> ID：15103948
> 
> 赞同：0
> 
> 时间：2013-02-27T03:59:07.327
> 
> 标签：javascript, asp.net, vb.net

嗨，我有这个代码，以便下一页将在 IE 的新标签页中打开，但是我想设置新标签页的大小并禁用某些项目。我该怎么做呢？

```
If e.CommandName = "View" Then
        Session("VisitorReport") = hdnSelectedTab.Value
        Session("VisitID") = e.CommandArgument
        ClientScript.RegisterStartupScript(Page.GetType(), "NewTab", "window.open('ViewVisitor.aspx');", True)
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:16:18.907

查看[window.open](http://www.w3schools.com/jsref/met_win_open.asp)并[使用 JavaScript 在新选项卡（而不是新窗口）中打开 URL](https://stackoverflow.com/questions/4907843/open-url-in-new-tab-using-javascript)

**注意：**如果没有用户干预，您无法从浏览器控制客户端功能，例如在新选项卡中打开新窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:02:53.717

```
 ClientScript.RegisterStartupScript(Page.GetType(), "NewTab", "window.open('ViewVisitor.aspx','','toolbar=yes,location=no,width=1050,height=750');", True) 
```

# javascript - webkitTransitionEnd 没有触发

> ID：15103949
> 
> 赞同：1
> 
> 时间：2013-02-27T03:59:07.720
> 
> 标签：javascript, css, webkit-transform

我不确定到底发生了什么，但我很确定这在某一时刻是有效的。

事件只是没有触发（或者我没有正确捕捉它）

```
var $zoomBox = $('#zoomBox');
$zoomBox.bind('webkitTransitionEnd', function(e) {
    alert("test");
});
$('.button').click(function (e) {
    $zoomBox.css('-webkit-transform', 'matrix(2,1,1,2,300, 100)');
}); 
```

见下面的小提琴。框完成转换后，应弹出警报，但未显示警报。

[http://jsfiddle.net/cGwb4/1/](http://jsfiddle.net/cGwb4/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T04:14:23.133

CSS 中没有指定过渡，所以你根本没有得到过渡。您只是在更改没有`webkitTransitionEnd`事件的 CSS。

请参阅此处的固定示例（在 Chrome 或 Safari 中）：http: [//jsfiddle.net/jfriend00/75Mh2/](http://jsfiddle.net/jfriend00/75Mh2/)我在其中添加了：

```
-webkit-transition: -webkit-transform 3s; 
```

# javascript - 以前的尝试失败时，Firefox 未完成一系列调用

> ID：15103952
> 
> 赞同：2
> 
> 时间：2013-02-27T03:59:30.253
> 
> 标签：javascript, jquery, firefox

我有一个使用 GET 方法 ping 一系列 url 的脚本。我只想对它们每次 ping 一次并且不期望得到响应。我的脚本适用于 Chrome 和 Safari，但 Firefox 不会完成后面的请求。

有没有办法触发 Firefox 进行一系列调用（准确地说是五个），而不关心它们是否失败？当第一个请求失败时，Firefox 似乎不会完成这一系列请求。

我正在使用 javascript 和 jQuery，并添加了一些 jQuery.ajax()。我进行了搜索，但无济于事，并且已经达到了我初学者技能的极限。任何见解将不胜感激。

（如果您对完整范围感兴趣，请参阅[基于 jquery 的独立端口敲击器](https://stackoverflow.com/questions/15097036/jquery-based-standalone-port-knocker)的代码）

谢谢你。

* * *

更新：

经过进一步研究，我认为问题在于 Firefox 并没有真正异步处理调用。我的代码版本通过 img 调用、iframe url 调用和 ajax 调用在 Chrome 和 Safari 中工作，但在 Firefox 中它们的行为不像我需要的那样。

我们的服务器监控敲击序列应该会看到请求依次到达端口 1、2、3、4、5（就像使用 Chrome 或 Safari 时一样）但是在 Firefox 中，无论我尝试过哪种方法，我都会看到第一个尝试 ping 端口 1 两次，然后是端口 2，在随后的尝试中，我只看到它 ping 端口 1。我的状态更新按预期显示，但服务器没有按照它需要的顺序接收调用。似乎 Firefox 正在重试失败的调用，而不是按顺序执行每个调用一次，这是我需要它做的。

这是我使用简单 jquery.ajax 调用方法的脚本示例。它适用于 Safari 和 Chrome，但在 Firefox 中无法达到预期的效果。虽然我的所有代码都运行并且我可以看到状态更新（使用 jquery.append 函数生成），但请求不会每次都按顺序发送到我的服务器。

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$('button').click(function(){
    $('#knocks').append('<p>Knocking...</p>');
    setTimeout(function(){
        $.ajax({url: 'https://example.sample.com:1111'});
        $('#knocks').append("<p>Knock 1 of 5 complete...</p>");
        }, 500);    
    setTimeout(function(){
        $.ajax({url: 'https://example.sample.com:2222'});
        $('#knocks').append("<p>Knock 2 of 5 complete...</p>");
        }, 3500);
    setTimeout(function(){
        $.ajax({url: 'https://example.sample.com:3333'});
        $('#knocks').append("<p>Knock 3 of 5 complete...</p>");
        }, 6500);
    setTimeout(function(){
        $.ajax({url: 'https://example.sample.com:4444'});
        $('#knocks').append("<p>Knock 4 of 5 complete...</p>");
        }, 9500)
    setTimeout(function(){
        $.ajax({url: 'https://example.sample.com:5555'});
        $('#knocks').append("<p>Knock 5 of 5 complete...</p>");
        }, 12000);
    setTimeout(function(){
        $('#knocks').append("<p>Knocking is complete... <br>Proceed to site: <a href='http://example-url.sample-url.com'>http://example-url.sample-url.com</a></p>");
        }, 13000);
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:30:02.300

看到您的问题没有真正的答案，您可能想继续前进，但我想给您一些建议作为起点。

为了使您的函数调用真正按顺序（或*同步*、*中序*、*阻塞*等）执行，您必须确保在处理请求完成后发出所有后续函数调用（在您的情况下为 AJAX 请求） （成功或失败，在这种情况下，您可能不想继续下一个按顺序调用并发出完全单独的响应）。

你现在做的方式不被认为是*同步*的，相反它实际上是*异步的，延迟的*（或“在后台”超时）。当您希望 AJAX 调用在服务器端同步执行（阻塞）时，这可能会导致各种问题。从浏览器重新发出失败或超时的请求（出于各种原因，取决于它们的功能集以及它们如何处理失败的请求、缓存等）到在启用某些预取器时抢先发出请求和缓存结果（或但是他们在 FF 中调用它），然后在预取器失败时再次重新发布它们。我相信这与您在 Firefox 中观察到的情况相似，并且可能是这种意外行为的主要原因。由于您无法控制最终用户在其浏览器中启用或禁用哪些功能，或者他们在未来版本中实现了哪些新功能，因此您可以`setTimeout`，即使它们似乎在其他浏览器中这样做（可能是因为您的服务器响应速度足够快，以至于它们看起来如此）。

在您的代码中，第二个调用似乎只*同步*执行（等待第一个完成）长达半秒，第三个请求长达 3 秒半，依此类推。但即使`setTimeout`是阻塞执行（它没有），它会等待哪个外部请求？第一个，还是第二个？我想你明白我想说什么以及为什么你的代码不能按预期工作。

相反，您应该通过服务器的响应发出后续的 AJAX 调用（这实际上是使用 AJAX 的目的，否则不需要它），或者最好创建一个外部侦听器函数，该函数将根据状态和/处理这些调用或返回您之前的外部调用的值。如果您还需要处理失败的请求并继续执行，那么外部侦听器（具有预设的执行堆栈超​​时）是可行的方法，因为您显然无法依赖失败请求的响应。

您会看到，浏览器发出多个并发请求并延迟它们`setTimout`并不会阻止预取器尝试缓存它们的响应以供以后使用。它也不会以阻塞方式发出请求，下一个请求会等待前一个请求完成，正如您所期望的那样。大多数人会很乐意使用一定数量的并发连接（在客户端机器上大约 10 个，在服务器上更多）以加快下载和/或页面渲染过程，有些显然更先进出于同样的原因，缓存机制到位，Firefox 只是其中之一。

我希望这能让事情变得更清楚，您将能够重写您的代码以按预期工作。由于我们不知道您的服务器端代码应该如何工作，因此您必须自己编写它。然而，SE 上有很多线程讨论您可能决定使用的类似技术，如果您遇到困难，您可以随时提出另一个问题，我们很乐意提供帮助。

干杯!

# java - Android / Java：修剪地图视图的纬度

> ID：15103954
> 
> 赞同：0
> 
> 时间：2013-02-27T03:59:38.960
> 
> 标签：java, android, android-mapview

我已将数据库中的纬度和经度存储为字符串，例如 23.563987,120.761719

我怎样才能将它们修剪成两个单独的整数，以便它可以适合我的代码？谢谢！

[对不起，我是java新手......]

我的地图代码如下：

```
GooglePlayServicesUtil
            .isGooglePlayServicesAvailable(getApplicationContext());
    mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
            .getMap();

    mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
    mMap.addMarker(new MarkerOptions().position(
            new LatLng(23.563987,120.761719)).title("Marker"));
    mMap.setMyLocationEnabled(true);

    CameraUpdate center = CameraUpdateFactory.newLatLng(new LatLng(
            23.563987,120.761719));
    CameraUpdate zoom = CameraUpdateFactory.zoomTo(15);

    mMap.moveCamera(center);
    mMap.animateCamera(zoom); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:06:48.013

您可以拆分字符串并将其转换回双打。

```
String locationString = *from DB*
String[] latLongStrings = locationString.split(",");
double lat = Double.parseDouble(latLongStrings[0]);
double long = Double.parseDouble(latLongStrings[1]); 
```

但是，您可能希望将数据库架构调整为具有两`REAL`列而不是一列`TEXT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:02:50.617

你为什么想要？修剪为整数会损失很多准确度——你可能会偏离 0.5 度，或者在任一方向上偏离 35 英里。

# r - 计算大 df2 的 F 值

> ID：15103956
> 
> 赞同：3
> 
> 时间：2013-02-27T03:59:41.963
> 
> 标签：r, statistics

如果这不是发布此问题的正确位置，我深表歉意，它与 R 中统计数据计算的数值稳定性有关。

我正在尝试计算非常高的 df2 值的 F 值，但它看起来在数值上不稳定：

```
nrange <- 350000:450000
f <- qf(1e-8, 8, nrange, lower.tail=FALSE)
plot(f ~ nrange) 
```

看起来像这样：![F 值图](../Images/5146521fec6fa3725b82bdd9390b8025.png)

基本上在附近`df2=400000`它不再准确。问题是 - 有人知道我如何解决这个问题吗？例如，F 分布可以近似为两个卡方（*例如*http://en.wikipedia.org/wiki/F-distribution#Related_distributions_and_properties），并且在它的文档中`qf`说明了有关使用`qchisq`大 d2 的内容。实际上`qchisq`在这些值上看起来确实是准确的，但对我来说如何实现这一点并不明显。例如

```
qf(0.05, 8, 100, lower.tail=FALSE) 
```

和

```
(qchisq(0.05, 8, lower.tail=FALSE)/8) / (qchisq(0.05, 100, lower.tail=FALSE)/100) 
```

不要给出相同的结果。

那么，问题是如何获得大 df2 的准确 F 值？任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:19:31.817

关于开源项目的一件有用的事情是它们是开源的

```
fortune(250)

As Obi-Wan Kenobi may have said in Star Wars: "Use the source, Luke!"
   -- Barry Rowlingson (answering a question on the documentation of some implementation details)
      R-devel (January 2010) 
```

如果您查看源代码`qf`

[https://svn.r-project.org/R/trunk/src/nmath/qf.c](https://svn.r-project.org/R/trunk/src/nmath/qf.c)

特别是这一点

```
/* fudge the extreme DF cases -- qbeta doesn't do this well.
   But we still need to fudge the infinite ones.
 */

if (df1 <= df2 && df2 > 4e5) {
if(!R_FINITE(df1)) /* df1 == df2 == Inf : */
    return 1.;
/* else */
return qchisq(p, df1, lower_tail, log_p) / df1;
} 
```

您会看到它们在伪造高于 4e5 的值。`df2`（通过假设与 df2 == Inf 时相同的结果而完全忽略）

# c# - 使用实体框架中的附加字段建模多对多关系

> ID：15103958
> 
> 赞同：2
> 
> 时间：2013-02-27T03:59:47.953
> 
> 标签：c#, entity-framework, code-first

我一直在寻找，但到目前为止还没有找到任何解决方案。

我有 3 个概念表：

```
Case
-------------
CaseId
ExternalCaseId

ExtraField
-------------
ExtraFieldId
Name
Type
RegExValidationString

ExtraFieldRef
--------------
Id
CaseId
ExtraFieldId
Value 
```

有了这个，我可以为表单动态创建字段并保存给定的值。我遇到的麻烦是如何使用代码优先模型与 EF 建立这种关系。

任何帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:08:18.373

贾斯汀，

我强烈建议您搜索已经解决了类似情况的其他帖子。针对您的问题，对我进行了简单的搜索：[Create Code First Many to Many With Additional Fields](https://stackoverflow.com/questions/7050404/create-code-first-many-to-many-with-additional-fields-in-association-table)

为了您的帖子不会被关闭或标记下来（在您失去积分的地方），请帮自己一个忙，阅读[常见问题解答](https://stackoverflow.com/faq)并像“The Dude”一样遵守。如果您完成常见问题解答中的每个部分，您甚至可以获得徽章！

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T04:10:59.990

未经测试，但类似这样的东西应该作为模型的起点：

```
public class Case
{
   public int CaseId {get;set;}
   public virtual Case ExternalCase {get;set;}
}

public class ExtraField
{
   public int ExtraFieldId {get;set;}
   public String Name {get;set;}
   public String Type {get;set;}
   public String RegexValidationString {get;set;}
   public virtual IEnumerable<ExtraFieldRef> ExtraFieldRefs {get;set;}
}

public class ExtraFieldRef
{
   public int Id {get;set;}
   public virtual Case Case {get; set;}
   public virtual ExtraField {get;set;}
   public int Value {get;set;}
} 
```

# sql - 在 Oracle SQL 中创建视图

> ID：15103960
> 
> 赞同：0
> 
> 时间：2013-02-27T03:59:52.420
> 
> 标签：sql, oracle

我正在尝试在我的数据库上创建一个视图，但我不断收到 ORA-00934：

> 此处不允许使用组功能错误

有什么帮助吗？

这是我的代码：

```
CREATE VIEW MY_PRODUCTS_CE2_SELECT_MBILI
AS SELECT PROD_NAME,PROD_CATEGORY,PROD_SUBCATEGORY 
FROM MY_PRODUCTS_CE2
WHERE PROD_LIST_PRICE > AVG(PROD_LIST_PRICE)    
WITH CHECK OPTION CONSTRAINT MyProductsCE2SelectMbili_Cnst; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:06:02.480

您不能将聚合函数放在`WHERE`子句中。

将您的查询更改为：

```
CREATE VIEW MY_PRODUCTS_CE2_SELECT_MBILI 
AS SELECT PROD_NAME,PROD_CATEGORY,PROD_SUBCATEGORY 
FROM MY_PRODUCTS_CE2 WHERE PROD_LIST_PRICE > (SELECT AVG(PROD_LIST_PRICE) FROM MY_PRODUCTS_CE2)
WITH CHECK OPTION CONSTRAINT MyProductsCE2SelectMbili_Cnst; 
```

更多：[Oracle/PLSQL：ORA-00934 错误](http://www.techonthenet.com/oracle/errors/ora00934.php)

# json - struts 2 json插件抛出错误未定义结果类型

> ID：15103962
> 
> 赞同：1
> 
> 时间：2013-02-27T03:59:59.347
> 
> 标签：json, struts2, jsonp

我正在使用 struts 2 json 插件来使用自动完成功能。我写了一个动作

在 struts.xml 中

```
<package name="example" extends="json-default">

    <result-types>
        <result-type name="json" class="com.googlecode.jsonplugin.JSONResult"/>
    </result-types>

      <action name="searchIndustryaction"  class="com.sample.action.GetStartedAction"  method="searchIndustry">
        <result name="success" type="json"></result>
      </action>

    </package> 
```

当我看穿萤火虫时，它在响应中显示错误

```
<html>
<head>
    <title>Struts Problem Report</title>
    <style>
        pre {
            margin: 0;
            padding: 0;
        }    
    </style>
</head>
<body>
    <h2>Struts Problem Report</h2>
    <p>
    Struts has detected an unhandled exception:
    </p>

<div id="exception-info">
<table>
    <tr>
        <td><strong>Messages</strong>:</td>
        <td>
                    <li>No result defined for action com.cpt.fundation.action.GetStartedAction and result input</li>
        </td>
    </tr>
    <tr>
        <td><strong>File</strong>:</td>
        <td>file:/D:/eclipse-indigo/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/Fundation/WEB-INF/classes/struts.xml</td>
    </tr>
    <tr>
        <td><strong>Line number</strong>:</td>
        <td>70</td>
    </tr>
    <tr>
        <td><strong>Column number</strong>:</td>
        <td>119</td>
    </tr>

</table>
</div>

        <div id="snippet">
        <hr />

                    <pre>    &lt;/result-types&gt;</pre>
                    <pre>    </pre>
                        <pre style="background:yellow">      &lt;action name=&quot;searchIndustryaction&quot;  class=&quot;com.cpt.fundation.action.GetStartedAction&quot;  method=&quot;searchIndustry&quot;<span style="background:red">&gt;</span></pre>
                    <pre>       &lt;result name=&quot;success&quot; type=&quot;json&quot;&gt;&lt;/result&gt;</pre>
                    <pre>      &lt;/action&gt;</pre>
        </div>

<div id="stacktraces">
<hr />
<h3>Stacktraces</h3>
<div class="stacktrace" style="padding-left: 0em">
    <strong>No result defined for action com.cpt.fundation.action.GetStartedAction and result input - action - file:/D:/eclipse-indigo/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/Fundation/WEB-INF/classes/struts.xml:70:119</strong>
    <div>
    <pre>
    com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:350)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:253)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:167)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:206)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:115)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:143)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:121)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:170)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:422)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Thread.java:662)
    </pre>
    </div>
</div>
</div>

<div class="footer">
<hr />
<p>
You are seeing this page because development mode is enabled.  Development mode, or devMode, enables extra
debugging behaviors and reports to assist developers.  To disable this mode, set:
<pre>
  struts.devMode=false
</pre>
in your <code>WEB-INF/classes/struts.properties</code> file.
</p>
</div>
</body>
</html> 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:18:45.567

您正在获得验证或类型转换异常，因此它会查找`"input"`结果。

修复验证/类型转换异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:01:19.577

```
 <result name="success" type="json">You need to specify result here</result>

  you did not specify any thing as result 
```

# php - 如何从方法列表中排除继承的方法，反射（PHP）

> ID：15103963
> 
> 赞同：1
> 
> 时间：2013-02-27T04:00:26.460
> 
> 标签：php, class, reflection

我正在尝试使用反射列出 PHP 中类的所有方法/属性。简单的清单有效。

但它也列出了基类的属性和方法。我该如何过滤这个？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:08:52.733

注意[`ReflectionMethod`](http://www.php.net/manual/en/class.reflectionmethod.php)有方法[`getDeclaringClass()`](http://www.php.net/manual/en/reflectionmethod.getdeclaringclass.php)。此方法返回该方法所在的类。也只显示在您的类中声明的方法，您应该尝试以下操作：

```
$class = new ReflectionClass('YourClass');

foreach($class->getMethods() as $m) {
    if($m->getDeclaringClass()->getName() === 'YourClass') {
        echo $m->getName(), PHP_EOL;
    }
} 
```

`YourClass`像这样的东西在哪里：

```
class YourClass extends DOMDocument {

    public function doSomething() {
        // ...
    }

    public function doSomethingElse() {
        // ...
    }

} 
```

# c# - C# 变量名转字符串

> ID：15103964
> 
> 赞同：7
> 
> 时间：2013-02-27T04:00:34.213
> 
> 标签：c#

我有变量

```
public string MyVariable; 
```

我需要使用变量名作为字符串。例子：

```
var a = MyVariable.NameVariable();
// a = "MyVariable" 
```

我该怎么做？

我想创建你的 miniORM（NHibernate 太重了，需要一个单独的库）。目前的问题是我必须指出一堆常量。例如：

```
public const string FieldIdRules = "idRules" 
```

然后在关系 samonapisannom profiler 中进行交易。我看到Hibernate不需要指定文本值（对于字段的比率）。我想实现相同的。

对不起我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:25:53.350

哈克的方法，你可以通过`Expression`：

```
string myVariable = string.Empty;
Expression<Func<object>> expression = () => myVariable;

string name = (expression.Body as MemberExpression).Member.Name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:01:39.220

如果您可以按名称访问变量，则您已经有了它的名称，因此请键入`"MyVariable"`。

如果您已重新分配它，这是不可能的。值不会在某处保留变量名称的历史记录。

* * *

因此，为了处理字段到列的映射，我建议使用`Dictionary`. 反射是一种可能性，但对于像这样的简单任务来说，反射是不必要的复杂。

# cakephp - 在 cakephp 2 中获取表单元素属性值

> ID：15103968
> 
> 赞同：0
> 
> 时间：2013-02-27T04:01:23.837
> 
> 标签：cakephp, cakephp-2.0

我来自 symfony 背景。在 symfony 中，要获取 symfony 生成的任何表单元素属性，我会执行诸如 form.username.vars.id 、 form.username.vars.full_name 之类的操作来获取该字段的 id、name 属性。

我想知道如何在 cakephp2 中做到这一点。例如在 cakephp 中：

```
 echo $this->Form->input('username'); 
```

会产生：

```
 <input type="text" required="required" id="UserUsername" value="admin" maxlength="50" name="data[User][username]"> 
```

我只想获取由 cakephp 生成的 id 和名称，以便我可以在 javascript 中使用。我怎样才能做到这一点 ？有帮手吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:52:17.833

命名这些属性的约定是一致的。

*   名字永远是`data[ModelName][field]`
*   身份证永远是`ModelNameField`

您还可以在回显元素时选择 ID：

```
echo $this->Form->input('username', array('id' => 'username')); 
```

您也可以更改名称（您猜对了，`'name' => 'name'`），但这肯定会影响 CakePHP 中的表单处理。

# less - 如何生成动态 LESS 样式表？

> ID：15103974
> 
> 赞同：1
> 
> 时间：2013-02-27T04:01:43.253
> 
> 标签：less

我想导入一个由 DB 生成的变量 less 文件，以供我的其他 less 文件使用。这将为我的应用程序提供一些高级变量。导入这些的最佳方法是什么？我尝试过类似`@import "http://server.com/foo.less"`没有成功的事情。

该文件如下所示：

```
@fontColor: #EEE;
@fontSize: 10px; 
```

产生于

```
@fontColor: {{fontColor}}
@fontSize: {{fontSize}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T15:08:40.267

使用 Asp.net，您的服务器可以动态生成 less 文件。但我认为其他技术也可以。

家庭控制器

```
 //
    // GET: /Home/

    public ActionResult Index()
    {
        return View();
    }

    public ActionResult StyleMeFromCshtml()
    {
        Response.ContentType = "text/css";
        return View(new StyleModel());
    } 
```

索引.cshtml

```
<!DOCTYPE html>

<html>
<head>
    <title>test less</title>
    <link rel="stylesheet/less" type="text/css" href="/Home/StyleMeFromCshtml" />
    <script src="~/Scripts/less-1.4.2.js"></script>

</head>
<body>
    <div class="styleMeLess">
        I'm styled
    </div>
</body>
</html> 
```

样式模型.cs

```
public class StyleModel
    {
        public string BackgroundColor
        {
            get
            {
                // or get the value from the DB
                var random = new Random();
                var toArgb = Color.FromArgb(random.Next(256), random.Next(256), random.Next(256));
                return toArgb.Name.Remove(6, 2);
            }
         }
    } 
```

StyleMeFromCshtml.cshtml 在 cshtml 中的伪装较少

```
@model lessTest.Models.StyleModel

@{
    Layout = null;
}

.styleMeLess{
    background-color: #@Model.BackgroundColor
} 
```

每次调用索引都会在服务器上生成随机颜色。但颜色值也可能来自数据库。诀窍是在响应中 contentType 设置为“text/css”。

或者直接返回 less 字符串：

```
 public ActionResult StyleMe()
        {
            var random = new Random();
            var toArgb = Color.FromArgb(random.Next(256), random.Next(256), random.Next(256));
            string style = String.Format(".styleMeLess{{ background-color: #{0} }}",     toArgb.Name.Remove(6,2));
            return Content(style, "text/css");
         } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T10:12:54.820

您需要使用 url() “函数”来执行此操作

```
@import url("http://localhost/foo.less"); 
```

**这将在编译时**导入您的 less 文件，这会根据您的请求得到响应的速度减慢进程。之后，此文件中的所有**变量**都将可用于您当前的范围。很可能，这也适用于**mixins**，但我没有对此进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:28:35.863

假设您有权获取`server.com`文件（我假设您这样做），并且您的路径是正确的（并且我假设是正确的），在我看来，需要更正的一个错误是文件应该看起来像（注意冒号的添加）：

```
@fontColor: #EEE;
@fontSize: 10px; 
```

我不知道这是否意味着您需要将生成代码更改为：

```
@fontColor: {{fontColor}}
@fontSize: {{fontSize}} 
```

我对双括号的含义不够熟悉`{{...}}`，但我认为这就是数据库如何从中提取信息以放入`.less`正在生成的文件中的方式。如果是这样，那么在那里添加冒号应该可以解决 LESS 期望变量定义的内容，并且可以解决您的问题。

# c++ - 我的 std::hash for std::tuples ...有什么改进吗？

> ID：15103975
> 
> 赞同：0
> 
> 时间：2013-02-27T04:02:07.910
> 
> 标签：c++, templates, c++11, variadic-templates, stdhash

有些人可能已经注意到 std::hash 不支持元组。所以我添加了一个看起来比我到目前为止看到的解决方案“更好”的重载。任何人有想法进一步减少此代码？请注意，这是一个编译器杀手！唯一可以编译它的是“Clang 3.2”......英特尔编译器 13.1 没有得到专门化，并一直告诉“C++ 标准不支持哈希 blabla”。而且我们不需要谈论原始的 Microsoft 编译器。

顺便说一句，我的解决方案支持递归元组，`std::tuple<std::tuple<int,int>,int>`所以我不确定这是否也适用于我今天看到的现有解决方案。

```
namespace std
{
    template<typename... TTypes>
    class hash<std::tuple<TTypes...>>
    {
    private:
        typedef std::tuple<TTypes...> Tuple;

        template<int N>
        size_t operator()(Tuple value) const { return 0; }

        template<int N, typename THead, typename... TTail>
        size_t operator()(Tuple value) const
        {
            constexpr int Index = N - sizeof...(TTail) - 1;
            return hash<THead>()(std::get<Index>(value)) ^ operator()<N, TTail...>(value);
        }

    public:
        size_t operator()(Tuple value) const
        {
            return operator()<sizeof...(TTypes), TTypes...>(value);
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:56:23.730

看过之后就很明显了：

```
template<int N, typename THead, typename... TTail>
size_t operator()(Tuple value) const
{
  constexpr int Index = N - sizeof...(TTail) - 1;
  return hash<THead>()(std::get<Index>(value)) ^ operator()<N, TTail...>(value);
} 
```

# backbone.js - 在需要 js 中使用 mobiscroll datepicker

> ID：15103976
> 
> 赞同：1
> 
> 时间：2013-02-27T04:02:12.143
> 
> 标签：backbone.js, requirejs, mobiscroll

我有一个主干 jquery 移动应用程序，我想在其中使用 mobiscroll 日期选择器。我尝试将其包含在`head`标签中。

```
TypeError: Cannot read property 'widget' of undefined 
```

但我收到了这个错误。

mobiscroll 需要 js 兼容吗？我如何加载它以直接在我的视图中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T15:38:26.773

确保在Jquery Mobile**之后**包含 Mobi Pick 的 JS 文件。

我是 jQuery Mobile 的新手，并意识到我刚才犯了那个错误。这为我解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T07:32:28.583

Just include mobiscroll the same way you include jquery and set the dependency on jquery. I'm posting here an example how you can include mobiscroll with require.js:

```
require.config({
    paths: {
      jquery: 'vendor/jquery/jquery.min'
      mobiscroll: 'vendor/mobiscroll/mobiscroll..min'
    },
    shim: {
       jquery:{
          exports: "jquery"
       },
       mobiscroll:{
          deps: ['jquery'],
          exports: "mobiscroll"
       }
    }
});
require(['domReady','app', 'mobiscroll'],
   function(domReady, App){
   ...
}); 
```

# matlab - 在MATLAB中以逆时针方向排列3D凸多边形平面的顶点

> ID：15103978
> 
> 赞同：1
> 
> 时间：2013-02-27T04:02:19.773
> 
> 标签：matlab, polyhedra

我有一个 3D 凸多边形。为简单起见，让它成为一个有顶点的正方形，`(0,0,0),(1,1,0),(1,1,1),(0,0,1).`。我需要按逆时针顺序排列这些顶点。我在[这里](https://stackoverflow.com/questions/2778805/arrange-points-in-sequence)找到了解决方案。建议确定多边形中心的角度并对其进行排序。我不清楚这将如何工作。有没有人有办法解决吗？我需要一个**强大**的解决方案，甚至在顶点非常接近时也可以工作。

一个示例 MATLAB 代码将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:39:25.757

这实际上是一个相当乏味的问题，所以我没有实际执行它，而是要解释我将如何执行它。首先[找到平面方程](http://www.jtaylor1142001.net/calcjat/Solutions/VPlanes/VP3Pts.htm)（您只需要为此使用 3 个点），然后找到您的[旋转矩阵](https://stackoverflow.com/questions/2306665/how-to-efficiently-rotate-and-translate-a-plane-in-3d)。然后在新的旋转空间中找到你的向量。在那之后， [找到你的点在哪个象限](http://www.purplemath.com/modules/plane3.htm)，如果在特定象限中 n > 1，那么你必须找到每个点的角度 (theta = arctan(y/x))。然后只需按每个象限的角度对每个象限进行排序（可以说，您可以通过 pi 而不是象限进行分离（当 y 分量（旋转后）大于零时将点排序）。

抱歉，我没有时间实际测试它，但试一试，随时发布您的代码，如果您愿意，我可以帮助调试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:33:44.653

幸运的是，您有一个凸多边形，因此您可以使用角度技巧：在内部找到一个点（例如，找到两个不相邻点的中点），然后将向量绘制到所有顶点。选择一个向量作为基础，计算与其他向量的角度并排序。您可以使用点积计算角度： A · B = AB cos θ = |A||B| 系数θ。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T23:46:52.077

以下是我遵循的步骤。

1.  [可以使用已知公式](http://en.wikipedia.org/wiki/Rotation_matrix)将 3D 平面多边形旋转到 2D 平面。使用**Rotation matrix from axis and angle**部分下的那个。

2.  然后如@Glenn 所示，需要计算一个内部点来找到角度。我将该内部点作为`mean`顶点位置的 。

3.  使用 x 轴作为参考轴，可以使用[此处](http://www.mathworks.com/matlabcentral/newsreader/view_thread/151925)解释的函数计算每个顶点的`0`按比例缩放的角度。`2pi``atan2`

    从向量 a 到向量 b 逆时针测量的非负角度，在范围`[0,2pi]`，如果`a = [x1,y1]`和`b = [x2,y2]`，由下式给出：

    `angle = mod(atan2(y2-y1,x2-x1),2*pi);`

4.  最后，对角度进行排序，`[~,XI] = sort(angle);`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T18:57:44.777

因此，如果您想使用 convhull，这是另一个答案。通过将一个坐标设置为零，可以轻松地将多边形投影到轴平面中。例如，在 (0,0,0),(1,1,0),(1,1,1),(0,0,1) 中设置 y=0 得到 (0,0),(1, 0),(1,1),(0,1)。现在你的问题是二维的。

如果您的多边形平面与某个轴正交，您可能需要做一些工作来选择正确的坐标，如果是，请选择该轴。标准是确保您的投影点不会在一条线上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T11:01:33.993

我使用它已经很长时间了，所以我可能是错的，但我相信该命令`convhull`可以满足您的需要 - 它返回一组点的凸包（因为您说您的点是凸集，所以应该是点本身），按逆时针顺序排列。

请注意，MathWorks 最近提供了一个新类`DelaunayTri`，旨在取代`convhull`其他较旧的计算几何材料的功能。我相信它更准确，尤其是当点非常接近时。不过我没试过。

希望有帮助！

# python - Python：格式化列表（包含列表）以进行打印

> ID：15103983
> 
> 赞同：3
> 
> 时间：2013-02-27T04:03:06.280
> 
> 标签：python

我正在做一个将输入翻译成 Pig Latin 的项目（是的，我敢肯定你以前从未见过*这个*......）并且在格式化我的输出时遇到了问题。

（对于以下内容，sentence = 一个包含用户输入（短语）的列表，由 phrase.split() 分割）

```
sentence.remove(split)
final = map(str,sentence)
print "Final is (before formatting:", final
final = [sentence[0].capitalize()] , sentence[1:]
#finalFormat = ' '.join(final)
print "Final is", str(final).strip('[]')
#print "FinalFormat is", finalFormat
print "In Pig Latin, you said \"", ' '.join(map(str, final)), "\". Oink oink!" 
```

我得到的是：“在 Pig Latin 中，你说“['Firstword'] ['secondword', 'thirdword'] ”

我正在寻找的是：“在 Pig Latin 中，您说的是“Firstword secondword thirdword”。

根据我的调试打印语句，看起来我的问题仍然存在（从底部算起 5）：

```
 final = [sentence[0].capitalize()] , sentence[1:] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:04:53.833

更改此行：

```
final = sentence[0].capitalize() , sentence[1:] 
```

对此：

```
final = [sentence[0].capitalize()] + sentence[1:] 
```

您将字符串和列表的元组映射到字符串，而不是列表。

注意：`'single"'`在这里使用引号将避免`"this\""`丑陋。

# ruby-on-rails - Rspec说实现的方法没有实现

> ID：15103992
> 
> 赞同：0
> 
> 时间：2013-02-27T04:04:03.727
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rspec

下面是我正在运行的一个 rspec 测试，以测试我制作的另一个类。不幸的是，我尝试测试的方法 ( `delete`) 似乎不起作用。让我感到震惊的是，我从 Termianl 收到的错误消息是：

`/Users/user/Ruby/localWikiClient/localwiki_client/spec/delete_spec:11:in 'block (2 levels) in <top (required)>': undefined method 'delete' for #<Proc:0x007fe4739a5448> (NoMethodError)`

但是，此方法是在类中定义的。下面是代码：

```
require 'faraday'
require 'json/pure'

module Localwiki

  ##
  # A client that wraps the localwiki api for a given server instance
  #
  class Client

    attr_accessor :hostname       # hostname of the server we'd like to point at
    attr_reader   :site_name      # site resource - display name of wiki
    attr_reader   :time_zone      # site resource - time zone of server, e.g. 'America/Chicago'
    attr_reader   :language_code  # site resource - language code of the server, e.g. 'en-us'

    def initialize hostname, user=nil, apikey=nil
      @hostname = hostname
      @user = user
      @apikey = apikey
      create_connection
      collect_site_details
    end

   ##
   # Get site resource and set instance variables
   #
   def collect_site_details
       site = fetch('site','1')
       @site_name = site['name']
       @time_zone = site['time_zone']
       @language_code = site['language_code']
   end

   ##
   # create Faraday::Connection instance and set @site
   #
   def create_connection
      @site = Faraday.new :url => @hostname
   end

   ##
   # delete a specific resource
   # resources are "site", "page", "user", "file", "map", "tag", "page_tag"
   # identifier is id, pagename, slug, etc.
  def delete(resource,identifier)
    case resource
    when resource == "site"
      @hostname = identifier
      create_connection
    when resouce == "user"
      @hostname = list(identifier)   
    end  

    http_delete()
  end

  def http_delete()
    response = @site.delete
    puts response.to_s
  end 
```

这是我正在尝试运行的 rspec 测试：

```
$LOAD_PATH.unshift File.expand_path("../../lib", __FILE__)
require 'localwiki_client'

describe '<siteinfo>.amazonaws.com/bears' do

  subject { Localwiki::Client.new '<siteinfo>.compute-1.amazonaws.com/bears', '<username>', '[myApiKey]' }

  context '#fetch' do
    subject.delete('page', 'bears')
  end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:07:26.230

您不能在上下文块中访问这样的主题。您将需要将它放在之前的块中或实际的测试块中（它/指定）：

```
describe '<siteinfo>.amazonaws.com/bears' do

  subject { Localwiki::Client.new '<siteinfo>.compute-1.amazonaws.com/bears', '<username>', '[myApiKey]' }

  context '#fetch' do
    it "deletes the bears page" do
      subject.delete('page', 'bears')
    end
  end

end 
```

# jquery - .eq() 和 .get() 和 :nth-child() 之间的区别？

> ID：15103994
> 
> 赞同：2
> 
> 时间：2013-02-27T04:04:15.753
> 
> 标签：jquery, function, events

我最近一直在考虑优化我的编码，以使其更整洁、更紧凑，但我在路上遇到了一些小问题。

我不能 100% 确定何时应该使用`.eq()`over`.get()`或`:nth-child()`.

使用其中一个对我有什么好处，例如，最适合说什么，重复发生的事件或多个功能或仅使用一个功能等。我可以在某些情况下阅读它们的使用events 和 have but sources 只告诉我这么多，甚至在某些情况下，有人可能会使用一个，而另一个来源会使用另一个，但做完全相同的事情。

这是我需要澄清的“灰色”区域。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T04:07:32.660

*   `.eq(n)`检索第 n-1^个 *jQuery 对象*。
*   `.get(n)`检索第 n-1^个 *DOM 元素*。这就像在做`.eq(n)[0]`。
*   `:nth-child()`适用于更复杂的选择器，例如`:nth-child(2n+1)`.

    您*可以*使用它代替`:eq()`选择器字符串，但我倾向于远离它并使用它`.eq()`来使选择器更具可读性：

    ```
    $('ul.parent > li.child:nth-child(2)')
    $('ul.parent > li.child:eq(2)')
    $('ul.parent > li.child').eq(2) 
    ```

# java - 代号一 包含列表的列表

> ID：15103996
> 
> 赞同：0
> 
> 时间：2013-02-27T04:04:30.620
> 
> 标签：java, list, user-interface, nested, codenameone

注意：我`List`在这个问题中提到的任何地方，我都在谈论`com.codename1.ui.List`.

我可以使用 Codename One 的 GUI Designer 将 a 放入 a`List`中`List`，然后用自己的数据填充每个子列表吗？

我可以`Container`在 GUI 设计器中定义 a 并将其放入`List`其中（我将其称为 InnerList）然后将其设置`Container`为`Renderer`另一个`List`（我将其称为 OuterList。） OuterList 的特定单元格中的 InnerList 的数据。当我在 GUI 中修改 OuterList`ListItems`时，InnerList 甚至没有出现在键列表中，而且我也没有找到从代码中填充 InnerList 的方法。

为了解决这个问题，我必须定义两个实现`ListCellRenderer`（和扩展`Container`）的用户类，并在代码中将它们分别设置为 OuterList 和 InnerList 的渲染器。在 GUI 设计器中，只有 OuterList 没有明显`Renderer`的 . 这可行，但它并不真正适合定义 GUI 其余部分的方式，并且会增加混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:35:53.510

不。

这没有任何意义。Codename One 列表渲染器是“橡皮图章”，这意味着它们没有状态，因此您将无法改变元素的大小或访问其中的单个组件。您需要做的是使用 Component->Container 层次结构来实现您正在寻找的功能。

# c# - 如何自定义 Soap 消息？

> ID：15103999
> 
> 赞同：0
> 
> 时间：2013-02-27T04:04:46.560
> 
> 标签：c#, .net, winforms, visual-studio-2010, web-services

我有一个从 WSDL 生成的自动生成代码。我想在 Soap Body 中发送一个附加参数。请求是以这种方式发送的，但我想实现`<position>`and `<positionvar>`，其余代码都实现了（我想在未实现的请求中发送甚至 position 和 positionvar 。

```
<svc:getSomething>
 <module>
     ...........
     ..............
     .................
     ..................
 <position>a</position>
 <positionvar>b</positionvar>
 .............
 </module> 
```

在这里我想添加`<position>`和`<positionvar>`。

我正在使用 VS 2010 C# win 表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:11:47.273

您是否要修改 WSDL 模式以便可以在 Soap 主体中添加另一个元素？您需要在 WSDL 模式中添加这样的元素：

```
<s:element name="getSomething">         
   <s:complexType>      
     <s:sequence>
            ... 
            <s:element minOccurs="0" maxOccurs="1" name="position" type="s:string"/>
            <s:element minOccurs="0" maxOccurs="1" name="positionvar" type="s:string"/>
     </s:sequence>  
   </s:complexType>     
</s:element> 
```

然后为visualstudio重新添加WSDL来解析它。

以上只是我从您的 SOAP 主体派生的一个示例。根据需要为您自己的 WSDL 调整它。