# StackOverflow 问答 13096000-13096999

# java - Java url-pattern 所有子域重定向

> ID：13096002
> 
> 赞同：1
> 
> 时间：2012-10-27T00:12:23.883
> 
> 标签：java, redirect, subdomain, url-pattern

Java的web.xml中是否有可能将所有子域重定向到一个servlet？

例如：

```
<url-pattern>*.</url-pattern> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T00:16:26.170

你绝对可以这样做，但我认为你想使用`*.ext`或`*.*`如下定义你的 URL 模式：

```
 <url-pattern>*.*</url-pattern> 
```

这也被一些流行的 MVC 框架使用，例如`struts`UL 模式

```
 <servlet-mapping>
        <servlet-name>action</servlet-name>
        <url-pattern>*.do</url-pattern>
   </servlet-mapping> 
```

映射到 Struts 控制器 servlet。

# android - 预加载所有片段的视图？

> ID：13096007
> 
> 赞同：4
> 
> 时间：2012-10-27T00:13:15.990
> 
> 标签：android, android-fragments, android-tabs

**初始情况：**

嗨，我目前正在为现有应用程序进行更新，并且在一项特定活动方面遇到问题。它包含 7 个选项卡，在这些选项卡中，有几个用于不同方法的图像按钮和文本视图。

在应用程序的原始版本中，我使用了一个 tabhost，基本上在一个 xml 文件和一个 java 文件中包含了所有必要的内容，但是不可能横向滑动 tabcontent 来更改选项卡，所以我用片段再次创建了整个东西.

**挑战：**

在 ActionBar 中，我有一个过滤器按钮，它应该通过检查一个标志然后调用所有 7 个片段类中的方法来隐藏所有选项卡中的某些文本视图和图像按钮，然后将它们的 rootView 中的视图设置为 GONE 并且如果切换再次，可见。

**问题：**

如果用户首先滚动浏览所有选项卡，则此 ActionBar 按钮工作正常，但如果单击应用程序的冷启动，它将导致应用程序崩溃并出现 NullPointer 异常。我怀疑这是因为尚未加载所有片段。

**问题：**

我应该在活动开始时预加载所有片段吗？如果是这样，我将如何做到这一点以及将在哪个文件中完成？是否有另一种可能更好的方法来确保我可以操作 ActionBar 中的所有选项卡/片段，即使我不知道之前打开过哪些片段？我应该将所有这些方法混合在一个全局方法中吗？它会放在什么文件中？

目前，它只有在您先滚动浏览所有选项卡时才有效，然后我可以根据需要随时切换过滤器。

**代码：**

这在 Activity 类中调用：

```
 public void toggleintroonly() {
    MenuItem toggle = menu.findItem(R.id.mtoggle);

    if (visible == 1) {
        Fragments1.toggleintroonly();
        Fragments2.toggleintroonly();
        Fragments3.toggleintroonly();
        Fragments4.toggleintroonly();
        Fragments5.toggleintroonly();
        Fragments6.toggleintroonly();
        Fragments7.toggleintroonly();
        toggle.setTitle(getString(R.string.menu4toggled));
        toggle.setIcon(R.drawable.ic_action_showall);
        visible = 0;
    } else {
        Fragments1.showall();
        Fragments2.showall();
        Fragments3.showall();
        Fragments4.showall();
        Fragments5.showall();
        Fragments6.showall();
        Fragments7.showall();
        toggle.setTitle(getString(R.string.menu4));
        toggle.setIcon(R.drawable.ic_action_filter);
        visible = 1;
    }
} 
```

这是来自 Fragments1.toggleintroonly() 的示例：

```
public static void toggleintroonly() {
    rootView.findViewById(R.id.tv1x02).setVisibility(View.GONE);
    rootView.findViewById(R.id.bplay1x02).setVisibility(View.GONE);
    rootView.findViewById(R.id.bshare1x02).setVisibility(View.GONE);
    rootView.findViewById(R.id.binfo1x02).setVisibility(View.GONE);
    rootView.findViewById(R.id.bring1x02).setVisibility(View.GONE);
} 
```

这是在 Activity 启动后单击 ActionBar 中的 Filter Button 时的错误：

```
10-27 16:43:34.923: E/MediaPlayer(16946): mOnCompletionListener is null. Failed to send MEDIA_PLAYBACK_COMPLETE message.
10-27 16:43:49.433: D/AndroidRuntime(16946): Shutting down VM
10-27 16:43:49.433: W/dalvikvm(16946): threadid=1: thread exiting with uncaught exception (group=0x40c511f8)
10-27 16:43:49.448: E/AndroidRuntime(16946): FATAL EXCEPTION: main
10-27 16:43:49.448: E/AndroidRuntime(16946): java.lang.NullPointerException
10-27 16:43:49.448: E/AndroidRuntime(16946):    at com.cheftony.psychsoundboard.Fragments3.toggleintroonly(Fragments3.java:225)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at com.cheftony.psychsoundboard.NicknamesNew.toggleintroonly(NicknamesNew.java:121)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at com.cheftony.psychsoundboard.NicknamesNew.onOptionsItemSelected(NicknamesNew.java:90)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at android.app.Activity.onMenuItemSelected(Activity.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at android.support.v4.app.FragmentActivity.onMenuItemSelected(FragmentActivity.java:353)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at com.android.internal.view.menu.ActionMenuView.invokeItem(ActionMenuView.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at com.android.internal.view.menu.ActionMenuItemView.onClick(ActionMenuItemView.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at android.view.View.performClick(View.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at android.view.View$PerformClick.run(View.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at android.os.Handler.handleCallback(Handler.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at android.os.Handler.dispatchMessage(Handler.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at android.os.Looper.loop(Looper.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at android.app.ActivityThread.main(ActivityThread.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at java.lang.reflect.Method.invokeNative(Native Method)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at java.lang.reflect.Method.invoke(Method.java:511)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java)
10-27 16:43:49.448: E/AndroidRuntime(16946):    at dalvik.system.NativeStart.main(Native Method) 
```

该错误似乎是在 Fragments3 类中引起的，因为在 Activity 启动时，Fragments1 处于活动状态，并且它的直接邻居 Fragments2 也被预加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:57:26.283

几个建议：

1.  如果您使用 7 个选项卡，则可以考虑使用 a `ViewPager`。这将有助于加快用户体验。:)

2.  确保您的 s在被调用之前`Fragment`不要假定`Activity`已创建。`onActivityCreated()`这可能就是您获得`NullPointerException`.

3.  你`Fragment`的 s 应该作为独立的 UI 组件。如果您`Fragment`的 s 彼此交互，您可能需要重新考虑您的设计，因为这可能会使事情复杂化。

4.  除非您`Fragment`的 s 需要很长时间才能创建/显示，否则我不确定`Fragment`是否需要预加载 s。使用 7 个选项卡，用户可能不会使用所有`Fragment`s，因此加载所有选项卡可能会很浪费。预加载几个选项也没有任何意义，因为您永远无法知道用户接下来会选择哪个选项卡。在我看来，最好的解决方案是`Fragment`在用户单击选项卡时初始化一个新的并用它填充选项卡的视图。

# php - 如何在 public_html 之外上传文件？

> ID：13096008
> 
> 赞同：0
> 
> 时间：2012-10-27T00:13:19.363
> 
> 标签：php, public-html

我有一个这样的文件夹结构：

```
etc
files
public_html
tmp 
```

我希望我网站的用户能够上传文件，并将这些文件存储在`files`文件夹中（而不是将它们存储在 中的某个文件夹中`public_html`）。这是出于安全原因。我是一个新手，我无法弄清楚如何将上传的文件存储到文件`files`夹中。这是我的代码（相关部分？）：

```
$path = dirname( __FILE__ ) ."/" . 'files/my_file.pdf';
$success = move_uploaded_file( $tmp_name, $path ); 
```

我应该如何更改`$path`才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T00:17:47.497

知道价值`FRAMEWORK_PATH`是什么，很难说你的文件被上传到哪里。如果您特别想将文件放在您选择的位置，只需明确指定它，例如：

```
$path = '/path/to/files/';
$filename = 'name_you_want_to_give_upload';

$success = move_uploaded_file($tmp_name, $path . $filename); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-19T00:53:39.917

如果要将文件保存在**upload.php**文件所在的位置之外，则需要`../`在要保存它的文件路径的 beaning 处添加，例如：

如果您的**upload.php**文件位于此根目录中：

```
public_html/files/php/upload.php 
```

但是，您想将上传的文件保存在名为**upFiles**且位于 php 文件夹之外的文件夹*中（在这种情况下）*，您可以这样编写路径：

```
../upFiles/ 
```

如果您也想将其保存在子文件夹中，则可以使用此方法：

```
../files/anotherFolder/upFiles 
```

# asp-classic - 如何从代码中获取带有 ASP Classic 的时间戳？

> ID：13096012
> 
> 赞同：0
> 
> 时间：2012-10-27T00:13:28.910
> 
> 标签：asp-classic, vbscript

我在用：

```
<%= time %> 
```

它回来了：

**5:12:19**

我现在是晚上 8:12:19

我怎样才能让它打印当地时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T08:17:20.833

在调用时间之前，您必须为自己的时区设置 LocaleId（Session.LCID 或 SetLocale(lcid)）。在此页面上查看有关[SetLocale 和 LocaleID 的更多信息](http://www.w3schools.com/vbscript/func_setlocale.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T01:09:04.777

```
<% myDateTime = DateAdd("h", 3, Time) %> 
```

# css - css 子项 >

> ID：13096014
> 
> 赞同：0
> 
> 时间：2012-10-27T00:14:00.167
> 
> 标签：css, parent-child

我正在尝试将`margin-left:20px`其类包含编辑的表单中的所有 div 分配给以下内容：

```
form.edit > div  {
    margin-left:20px;
} 
```

我的想法是：`form`标识元素，标识分配`.edit`了类的所有表单，并为所有 div 子项设置样式。但它不起作用，所以我一定是错的！知道如何实现这一目标吗？`edit``> div`

PS这里是html，我想将上述样式分配给以下代码（`id="address"`）中的最后一个div：

```
<form class="edit" action="edit.php" method="post" name="edit" id="edit" enctype="multipart/form-data">
  <div class="row">
   <ul class="breadcrumb">
        <li>Data</li>
   </ul>   
   <div class="span8 well">
    <input type="text" name="lastname" id="lastname" class="span7">
    <div id="address">
        // many more divs after this one 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T00:15:15.143

`>`是直接后代的标识符，因此在下面只有顶层将由您的 css 分配：

```
<form class="edit">
    <div>
        <div>
        </div>
    </div>
</form> 
```

删除`>`将导致样式应用于表单下的所有 div。

# linux - freeTDS bash：在 Microsoft SQL 服务器中执行 sql 查询

> ID：13096018
> 
> 赞同：6
> 
> 时间：2012-10-27T00:14:37.453
> 
> 标签：linux, tsql, bash, shell, freetds

我可以通过 Mint Linux VM 连接到 Microsoft SQL Server 2008 实例，使用 freeTSD 和命令行在其上执行 sql 语句。现在我想在 bash 脚本中自动执行此操作。我能够成功登录我的 bash 脚本：

```
TDSVER=8.0 tsql -H servername -p 1433 -D dbadmin -U domain\\Administrator -P password 
```

然后我有我的 SQL 查询：

```
USE dbname GO delete from schema.tableA where ID > 5 GO delete from schema.tableB where ID > 5 GO delete from schema.tableC where ID > 5 GO exit 
```

这在通过 freeTSD 命令行手动执行时有效，但在我放入 bash 文件时无效。我关注了这篇文章：[freeTSD & bash](https://stackoverflow.com/questions/5445374/bash-script-makes-connection-using-freetds-interacts-doesnt-exit-just-hangs)。

这是我的 bash 脚本示例：

```
echo "USE dbname GO delete from schema.tableA where userid > 5 go delete from schema.tableB where userid > 5 go delete from schema.tableC where ID > 5 GO exit" > tempfile | TDSVER=8.0 tsql -H servername -p 1433 -D dbname -U domain\\Administrator -P password < tempfile 
```

bash 脚本的输出是：

```
locale is "en_US.UTF-8"
locale charset is "UTF-8"
Default database being set to sbdb
1> 2> 3> 4> 5> 6> 7> 8> 
```

然后我的脚本的其余部分被执行。

有人可以逐步回答我的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T21:45:52.503

我不确定你的样本是如何工作的。

这是我的 bash 脚本示例：

```
echo "USE dbname .... exit" > tempfile | TDSVER=8.0 tsql -H servername -p 1433 -D dbname -U domain\\Administrator -P password < tempfile
# ------------------------------------^^^^ ---- pipe char? 
```

尝试使用';' 字符。

```
echo "USE dbname .... exit" > tempfile ; TDSVER=8.0 tsql -H servername -p 1433 -D dbname -U domain\\Administrator -P password < tempfile
# ------------------------------------^^^^ ---- semi-colon 
```

更好的是，使用 shell 的“这里文档”。

```
TDSVER=8.0 tsql -H servername -p 1433 -D dbname -U domain\\Administrator -P password <<EOS
     USE dbname 
     GO 
     delete from schema.tableA where userid > 5 
     go 
     delete from schema.tableB where userid > 5 
     go 
     delete from schema.tableC where ID > 5 
     GO 
     exit
  EOS 
```

IHTH。

当前命令行输入：

```
echo "delete from table where userid > 5
go
delete from table where userid > 5
go
delete from table where ID > 5
GO
exit" < /tmp/tempfile; TDSDUMP=/tmp/freetds.log TDSVER=8.0 tsql -H servername -p 1433 -D dbname -U Administrator -P password <<EOS 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-14T21:22:07.813

旧线程，但这似乎有效..

```
printf  "use mydbname\ngo\nselect * from mytable\ngo\nexit\n"|tsql -I freetds.conf -S profileName -U user -P 'password'

1> 2> 1> 2> ID  stringtest  integertest
1   test    50
2   teststring2 60
3   test3   70
(3 rows affected) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:50:06.500

尝试

```
 echo "USE dbname\n GO\n delete from schema.tableA where ID > 5\n GO\n delete from schema.tableB userid > 5\n go\n delete from schema.tableC where ID > 5\n GO\n exit\n" 
```

该字符串的其余部分可能有效

并尝试

```
 echo "USE dbname;\n delete from schema.tableA where ID > 5;\n delete from schema.tableB userid > 5;\n delete from schema.tableC where ID > 5;\n exit\n" 
```

并尝试

```
 echo "USE dbname; delete from schema.tableA where ID > 5; delete from schema.tableB userid > 5; delete from schema.tableC where ID > 5; exit" 
```

如果您使用的是 odbc，我建议您进行第二次试用。如果您使用“go”字作为 sql 句子分隔符向 sql 发送命令，也许第一个更好。也许是第三个……谁知道……只有反复试验才能告诉我们……

# php - Socket_set_nonblock 错误

> ID：13096019
> 
> 赞同：0
> 
> 时间：2012-10-27T00:15:05.020
> 
> 标签：php, sockets

好的，所以我有一个使用的类，`while(true)`它使用套接字连接。现在我的问题是，当我使用 socket_set_nonblock 它没有连接它时，它会以“无法连接。”而死。当我在发送数据包后放置它时，它会从头开始并重新完成所有操作。

这是我的连接功能：

```
function connect($ip, $port) {
        if($this->soc!=null) socket_close($this->soc);
        $this->soc = socket_create(AF_INET,SOCK_STREAM,SOL_TCP);
        if(!$this->soc) die(socket_strerror(socket_last_error($this->soc)));
        if(!socket_connect($this->soc,$ip,$port)) die("Could not connect."); 

    } 
```

这是尝试使用 socket_set_nonblock 时的函数

```
function connect($ip, $port) {
        if($this->soc!=null) socket_close($this->soc);
        $this->soc = socket_create(AF_INET,SOCK_STREAM,SOL_TCP);
        socket_set_nonblock($this->soc);
        if(!$this->soc) die(socket_strerror(socket_last_error($this->soc)));
        if(!socket_connect($this->soc,$ip,$port)) die("Could not connect."); 

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:08:55.977

首先，您需要告诉我们为什么要将套接字置于非阻塞模式。主要原因有两个：

*   在单个线程上多路复用多个文件描述符/套接字（取决于语言/平台）。
*   为操作设置超时。

无论如何，非阻塞有两个阶段`connect()`：

*   启动连接。在 php 中，使用 完成`socket_connect()`，通常会以`SOCKET_EINPROGRESS`;失败。在这种情况下，您需要第二阶段：
*   等待连接完成，然后检查状态。等待部分用 完成`socket_select()`，您可以在其中多路复用您正在等待事件的多个套接字。当它返回时，您需要遍历它返回的套接字；当您到达等待成功连接的套接字时，您可以使用`socket_get_option($socket, SOL_SOCKET, SO_ERROR)`.

# c# - 使用 Objective C 从 MS 数据库中获取数据？

> ID：13096020
> 
> 赞同：2
> 
> 时间：2012-10-27T00:15:08.297
> 
> 标签：c#, asp.net, objective-c, ios, xml

所以我一直在做研究，我知道我需要创建一个 aspx 脚本并在 aspx 中运行一个查询。然后将数据转换成 XML 格式供目标 C 解析。

我的问题是任何人都可以详细说明一下吗？我对xml和aspx知之甚少。

例如 example.com/test.aspx 查询一个用户表，然后我可以让它显示在浏览器上。但接下来呢？转换成xml格式？那么我的应用程序将如何检索 xml？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T00:19:41.600

查看 asp.net web api -[这包括如何公开 CRUD 操作](http://www.asp.net/web-api/overview/creating-web-apis/creating-a-web-api-that-supports-crud-operations)。服务器 web-api 将使用 ado.net 直接查询数据库并填充对象，然后通过网络进行序列化，或者您可以使用[实体框架](http://msdn.microsoft.com/en-us/data/ef.aspx)或[NHibernate](https://stackoverflow.com/questions/959270/what-is-nhibernate)之类的东西从数据库中获取对象。

在 iOS/Cocoa Objective-c 中，您将使用NSURLConnection 向Web api 服务器 [发出请求。](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

如果服务器配置为返回 XML（您的请求将接受标头设置为 application/xml），那么在 Objective-c 中您将[使用 NSXMLParser](http://codesofa.com/blog/archive/2008/07/23/make-nsxmlparser-your-friend.html)。

但是，更网络友好/现代的方法是 http 服务器可以返回[json](http://en.wikipedia.org/wiki/JSON)（请求集接受标头到 application/json）作为数据，在 iOS 5 及更高版本中，有一个 JSON 解析器：[http ://www.raywenderlich.com /5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

# css - 专注于不同表单时更改 div 的宽度

> ID：13096021
> 
> 赞同：0
> 
> 时间：2012-10-27T00:15:11.957
> 
> 标签：css

我无法让它工作

```
#searchform:hover, #s:focus #searchform {width: 195px;} 
```

当#s 聚焦时，这不应该告诉#searchform 有195px 的宽度吗？我在这里错过了什么吗？

#searchform 是#s 的父级，这就是原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T00:17:40.100

> #searchform 是#s 的父级，这就是原因吗？

是的，您不能仅使用 CSS 根据其子级的状态来选择父级。

# prolog - swi-prolog [列表]

> ID：13096023
> 
> 赞同：-1
> 
> 时间：2012-10-27T00:15:38.930
> 
> 标签：prolog

嘿，我正在研究这个小方法，我猜你称他们为在大学一周左右分配我的大项目之前试图让我掌握 swi-prolog。很明显它说的是“颜色（黄色，F）。它会给我香蕉，柠檬等等......

```
colors(C,F):-fruits(F,C) 
```

现在我的问题是我知道我可以使用 list_to_set(F, (something else)) 将输出变成一个列表，而不必点击“;” 得到所有的水果。虽然...无论如何我可以将列表制作合并到实际方法中吗？

干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T01:43:23.187

好的，了解如何：

```
colors(C,F):-findall(C,fruits(F,C),C). 
```

很简单，只要把它贴在那里。不管怎么说，多谢拉！

# mysql - SQL左外连接的意外输出

> ID：13096025
> 
> 赞同：3
> 
> 时间：2012-10-27T00:15:48.407
> 
> 标签：mysql, sql

我有这些表， `rolls`并且`rollsout`. 我想执行左外连接。

### 劳斯莱斯

```
 |type|height|weight|Rate|
          -------------------------
          |RP  |2ft   | 200  | 100|
          |RP  |2ft   | 200  | 100|
          |RP  |2ft   | 200  | 100|
          |LD  |2ft   | 100  | 130| 
```

### 推出

```
 |type|height|weight|Rate|
          -------------------------
          |RP  |2ft   | 200  | 100|
          |RP  |2ft   | 200  | 100| 
```

SUMing、JOINing 和 GROUPings 之后的预期输出 ==>

```
 |type|height|SUM(rolls.weight)|SUM(rollsout.weight)|
          ----------------------------------------------------
          |RP  |2ft   | 600             | 400                |
          |LD  |2ft   | 100             | NILL               | 
```

* * *

我的代码：

```
 SELECT rolls.hight,rolls.type,SUM(rolls.weight),SUM(rollsout.weight)
 FROM rolls 
 LEFT OUTER JOIN rollsout 
 ON rolls.hight = rollsout.hight AND rolls.type= rollsout.type 
 GROUP BY rolls.hight,rolls.type 
```

但上述代码的 O/P 是

```
 |type|height|SUM(rolls.weight)|SUM(rollsout.weight)|
          ----------------------------------------------------
          |RP  |2ft   | 1200            | 1200               |
          |LD  |2ft   | 100             | NILL               | 
```

我不知道我哪里出错了——你能解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T00:36:22.227

你没有做错任何事。这就是 JOIN 的行为

它是左侧的行数 X 右侧的行数，在您的情况下，它是 3 x 2 = 6。并且`6 x 200 = 1200`

试试这个

```
Select rolls.height,rolls.type, SUM(rolls.weight) as W, rollsout.Ww
 FROM rolls 
 LEFT JOIN
       (Select height,type, SUM(weight) as Ww 
         From rollsout GROUP BY height, type
       ) as rollsout
ON rolls.height = rollsout.height AND 
rolls.type= rollsout.type 
GROUP BY rolls.height,rolls.type 
```

## [SQLFiddle](http://sqlfiddle.com/#!2/d15cc/19)

我知道这在 SQL Server 中不起作用，但它适用于 MySQL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T00:28:02.120

它将 Rollsout 中每一行的所有 Rolls 与类型 RP 相加。您需要从 rollsout 中获取不同的行：

```
SELECT rolls.hight,rolls.type,SUM(rolls.weight),SUM(R2.weight)
 FROM rolls 
 LEFT OUTER JOIN (SELECT DISTINCT * FROM rollsout) AS R2 ON  
 ON rolls.hight = R2.hight AND rolls.type= R2.type 
 GROUP BY rolls.hight,rolls.type 
```

# android - ListView + textview 下面的布局问题

> ID：13096034
> 
> 赞同：-2
> 
> 时间：2012-10-27T00:16:49.060
> 
> 标签：android, android-layout

所以我有这个布局场景，我还没有找到任何理想的解决方案。我已经画了它，我希望它可以理解。

![在此处输入图像描述](../Images/381b0d7c50a232201363dd462054110a.png)

现在我的 ListView 总是在底部的 LinearLayout 之上。当 ListView 的项目很少时，TextView 就在下方，看起来还不错。但是，当它有很多项目时，它会压碎介于 LW 和底部容器之间的 TextView，无论如何，它应该始终存在。

谁能给我一个实现这一点的xml示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T00:25:38.037

您可以将`ListView`内部 a包裹起来`LinearLayout`，并将权重设置为 this `Linearlayout`、the`TextView`和 bottom `LinearLayout`。（您必须将 ListView 包装在 a 中`LinearLayout`，因为您不能将权重应用于 a `ListView`）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-27T02:25:20.530

If I don't missundestand you, You try to create a `ListView` such as `wrap_content`? and the `TextView` is always below the `ListView`? If i'm not wrong, so, this is what you need:

```
 <LinearLayout // Your list view and TextView in a same linear layout
    android:layout_alignParentTop="true"
    android:layout_width="fill_parent"
    android:layout_height="400dp" // With this specific height, your TextView will
                                  // always in this range!
    android:orientation="vertical" >

    <ListView
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0.1" >
    </ListView>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="91dp"
        //layout_gravity = "right"?? I'm not sure, you should make it right alignment 
    />
</LinearLayout>

<LinearLayout /> // This is your linear layout at the Bottom, 2 Lineary layout is 
                 // putted in a Relative layout 
```

The layout above give you a ListView at the top, and the TextView is below, the LinearLayout at the Bottom. Try it out!!

# ruby - Rails 应用程序控制器中的语法错误

> ID：13096038
> 
> 赞同：3
> 
> 时间：2012-10-27T00:17:22.063
> 
> 标签：ruby, ruby-on-rails-3, twitter-bootstrap-rails

我为我的新的简单 Rails 应用程序使用了 twitter 引导库，并为产品模型使用了一些脚手架，我更新了 GemFile 以及 bundle 命令和 rails g 引导程序。当我运行网页时，我收到以下错误：

```
SyntaxError in ProductsController#index

/Library/Ruby/Gems/1.8/gems/twitter-bootstrap-rails-2.1.4/app/helpers/glyph_helper.rb:9: syntax error, unexpected ':'
...   content_tag :i, nil, class: names.map{|name| "icon-#{name... 
```

我不知道为什么会这样！

这是我的 GemFile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.7'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

gem 'json'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'twitter-bootstrap-rails'
end

gem 'jquery-rails' 
```

控制器代码：

```
class ProductsController < ApplicationController
  # GET /products
  # GET /products.json
  def index
    @products = Product.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @products }
    end
  end

  # GET /products/1
  # GET /products/1.json
  def show
    @product = Product.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render :json => @product }
    end
  end

  # GET /products/new
  # GET /products/new.json
  def new
    @product = Product.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render :json => @product }
    end
  end

  # GET /products/1/edit
  def edit
    @product = Product.find(params[:id])
  end

  # POST /products
  # POST /products.json
  def create
    @product = Product.new(params[:product])

    respond_to do |format|
      if @product.save
        format.html { redirect_to @product, :notice => 'Product was successfully created.' }  
        format.json { render :json => @product, :status => :created, :location => @product }
      else
        format.html { render :action => "new" }
        format.json { render :json => @product.errors, :status => :unprocessable_entity }
      end
    end
  end

  # PUT /products/1
  # PUT /products/1.json
  def update
    @product = Product.find(params[:id])

    respond_to do |format|
      if @product.update_attributes(params[:product])
        format.html { redirect_to @product, :notice => 'Product was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render :action => "edit" }
        format.json { render :json => @product.errors, :status => :unprocessable_entity }
      end
    end
  end

  # DELETE /products/1
  # DELETE /products/1.json
  def destroy
    @product = Product.find(params[:id])
    @product.destroy

    respond_to do |format|
      format.html { redirect_to products_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T01:06:19.370

解决方案似乎很简单。我猜您正在使用的某些 gem 的版本需要 ruby​​ 版本> 1.9.0，因为符号功能所以您可以这样做`bar: foo`而不是`:bar => foo`

因此，如果您更改为 ruby​​ 1.9.2 或 1.9.2，该问题就会消失！

# drools - 如何从几个流口水决策表中创建分数？

> ID：13096040
> 
> 赞同：1
> 
> 时间：2012-10-27T00:17:25.593
> 
> 标签：drools

我是流口水的新手，并试图使用 guvnor 构建一个简单的[弗雷明汉分数](http://www.nhlbi.nih.gov/guidelines/cholesterol/risk_tbl.htm)计算器。

一个例子是：假设你是一个 30 岁的男性，你从 -9 分开始。总胆固醇180加4分，吸烟者加8分，HDL胆固醇超过60加1分，血压135加1分。给你+3的结果。

记分表上的表格看起来像是一个流口水决策表的好场景。

我无法弄清楚如何将各个分数数字相加。
我开始为我的结果列创建一个新的“FraminghamScore”事实，但随后我需要将这些事实加在一起。

我试图将所有表合并为 1，但这很快变得复杂和冗余。

看起来如果我要在 java 中创建我的 FraminghamScore，我可以有一个可以调用的 incrementValue(int) 方法，但是我不知道如何将一个数字传递给它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T20:19:45.240

如果您决定重构您的应用程序以改用drools，并且如果其他人正在寻找类似问题的解决方案，这里是我的两分钱drools 知识。

你的事实可能是这样的

```
// Fact for the scoring
class FraminghamScore {
  private int total;

  public void increment( int value ) { total += value; }
  public int getTotal() { return total; }
}

// Fact for the subject
class Person {
  public enum Gender{ MALE, FEMALE };
  private Gender gender;
  private int age;
  private int cholesterol;
  private boolean smoker;
  // Rest of the fields + getter/setters as needed
} 
```

您的决策表如下所示。正如我所看到的，例如年龄检查中会有一些重复，我想不出一种方法来摆脱这些。

```
Condition                    | Condition                    |  Action
-----------------------------------------------------------------------------------
                      $p : Person()                         |
                      $s : FraminghamScore()                |
-----------------------------------------------------------------------------------
p.gender                     | $param                       |  s.increment($param);
                             |                              |  update(s);
-----------------------------------------------------------------------------------
MALE                         | p.age >= 20 && p.age <= 34   |  -9
MALE                         | p.age >= 35 && p.age <= 39   |  -5
-- Rest of the age groups + same for females

Condition                    | Condition          |  Action
-----------------------------------------------------------------------------------
                      $p : Person()               |
                      $s : FraminghamScore()      |
-----------------------------------------------------------------------------------
p.gender                     | p.smoker           |  s.increment($param);
                             |                    |  update(s);
-----------------------------------------------------------------------------------
MALE                         | true               |  -9
MALE                         | false              |  -5 
```

等等。

现在看看表格，我发现年龄检查会有很多重复。不过暂时想不出更好的办法。希望这至少有一点帮助。

**编辑**

您可以让 FraminhamScore 事实仅用于保存每条规则的点数，而不是将它们加在一起。使用此选项，您可以为每个规则的工作内存添加一个分数事实，并[使用查询最终获取它们](http://docs.jboss.org/drools/release/5.3.0.Final/drools-expert-docs/html_single/#d0e6233)，然后进行数学运算。这可能会使您的决策表更整洁。

# java - 将 ScrollPane 添加到 JTextArea

> ID：13096045
> 
> 赞同：1
> 
> 时间：2012-10-27T00:17:53.803
> 
> 标签：java, swing, user-interface, jscrollpane, jscrollbar

我正在为我的大学课程做一个项目。我只是想知道是否有人知道如何将滚动条添加到 JTextArea。目前我的 GUI 布局正确，唯一缺少的是滚动条。

这就是 GUI 的样子。正如您在第二个 TextArea 上看到的，我想添加滚动条。

![图形用户界面](../Images/8b9ac22d4b2a93ced25204c086f99279.png)

这是我创建窗格的代码。但似乎什么都没有发生...... t2 是我想将它添加到的 JTextArea。

```
scroll = new JScrollPane(t2);
    scroll.setBounds(10,60,780,500);
    scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS); 
```

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T07:15:15.620

当您的文本超出视图区域的范围时，滚动条就会出现。不要使用[Absolute Positioning](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)，对于这样的闲聊，总是更喜欢[Layout Managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)，请阅读第一个链接的第一段，以了解使用 Layout Manager 的优势。

您只需要使用这个东西：

```
JTextArea msgArea = new JTextArea(10, 10);
msgArea.setWrapStyleWord(true);
msgArea.setLineWrap(true);      

JScrollPane msgScroller = new JScrollPane();        
msgScroller.setBorder(
    BorderFactory.createTitledBorder("Messages"));
msgScroller.setViewportView(msgArea);

panelObject.add(msgScroller); 
```

这是一个小程序供您理解：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class JTextAreaScroller
{
    private JTextArea msgArea;
    private JScrollPane msgScroller;
    private JTextArea logArea;
    private JScrollPane logScroller;
    private JButton sendButton;
    private JButton terminateButton;
    private Timer timer;
    private int counter = 0;
    private String[] messages = {
                                    "Hello there\n",
                                    "How you doing ?\n",
                                    "This is a very long text that might won't fit in a single line :-)\n",
                                    "Okay just to occupy more space, it's another line.\n",
                                    "Don't read too much of the messages, instead work on the solution.\n",
                                    "Byee byee :-)\n",
                                    "Cheers\n"
                                };

    private ActionListener timerAction = new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            if (counter < messages.length)
                msgArea.append(messages[counter++]);
            else
                counter = 0;
        }
    };

    private void displayGUI()
    {
        JFrame frame = new JFrame("Chat Messenger Dummy");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BorderLayout(5, 5));

        JPanel centerPanel = new JPanel();
        centerPanel.setLayout(new GridLayout(0, 1, 5, 5));

        logArea = new JTextArea(10, 10);
        logArea.setWrapStyleWord(true);
        logArea.setLineWrap(true);      

        logScroller = new JScrollPane();        
        logScroller.setBorder(
            BorderFactory.createTitledBorder("Chat Log"));
        logScroller.setViewportView(logArea);

        msgArea = new JTextArea(10, 10);
        msgArea.setWrapStyleWord(true);
        msgArea.setLineWrap(true);      

        msgScroller = new JScrollPane();        
        msgScroller.setBorder(
            BorderFactory.createTitledBorder("Messages"));
        msgScroller.setViewportView(msgArea);

        centerPanel.add(logScroller);
        centerPanel.add(msgScroller);

        JPanel bottomPanel = new JPanel();

        terminateButton = new JButton("Terminate Session");
        terminateButton.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent ae)
            {
                if (timer.isRunning())
                    timer.stop();
                else
                    timer.start();
            }
        });
        sendButton = new JButton("Send");

        bottomPanel.add(terminateButton);
        bottomPanel.add(sendButton);

        contentPane.add(centerPanel, BorderLayout.CENTER);
        contentPane.add(bottomPanel, BorderLayout.PAGE_END);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);

        timer = new Timer(1000, timerAction);
        timer.start();
    }

    public static void main(String... args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new JTextAreaScroller().displayGUI();
            }
        });
    }
} 
```

这是相同的结果：

![JTEXTAREA 滚动条](../Images/98d047536a52527688c02d3a01f0c586.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T00:31:16.047

默认情况下，仅当内容超出可用可视区域时才会显示滚动条

您可以通过[`JScrollPane#setVerticalScrollBarPolicy`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html#setVerticalScrollBarPolicy%28int%29)方法更改它，传递它`ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS`

# c# - 在 linq 方法语法中连接两个表，MVC EntityFramework

> ID：13096058
> 
> 赞同：0
> 
> 时间：2012-10-27T00:19:16.067
> 
> 标签：c#, sql, asp.net-mvc, entity-framework, linq

我正在使用两个表：CI_CLIENTRISK（SCD 类型 2）...和 ​​QB_INVOICES_HEADER（[edmx screenshot](http://i47.tinypic.com/x42c69.png)）。

它们可以通过 ClientID 加入。我想基本上复制这个查询：

```
SELECT a.ClientID,
    MAX(b.InvoiceDt) AS MaxInvoiceDt
    (omitted for brevity)
FROM CI_CLIENTRISKADJS a
INNER JOIN QB_INVOICES_HEADER b
ON a.ClientID = b.ClientID
WHERE a.IsActive = 1
GROUP BY a.ClientID
ORDER BY MaxInvoiceDt DESC 
```

这是我到目前为止所拥有的。它不返回任何记录。

```
using (var db = new PLOGITENS01Entities())
        {
        var rvClientRiskAdjs = db.CI_CLIENTRISKADJS
            .Take(50)
            .Join(db.QB_INVOICES_HEADER,
                a => a.ClientID,
                b => b.ClientID,
                (a, b) => new { Risk = a, Invoices = b })
            .Where(a => a.Risk.IsActive == 1)
            .OrderByDescending(o => o.Invoices.InvoiceDt)
            .Select(c => new ClientRiskModel()
            {
                ClientRiskId = c.Risk.ClientRiskID,
                ClientName = c.Risk.CI_CLIENTLIST.ClientName,
                ClientId = c.Risk.ClientID,
                ClientRiskAdjs = c.Risk.ClientRiskAdjs,
                RecordValidStartDt = c.Risk.RecordValidStartDt,
                RecordValidEnddt = c.Risk.RecordValidEnddt,
                IsActive = c.Risk.IsActive
            })
            .ToList();

        return View(new GridModel(rvClientRiskAdjs));
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T01:12:33.923

试着把你的`.Take(50)`方法放在你的决赛之后`.Select`和之前`.ToList()`。实际上，您只获取第一个表的前 50 条记录，然后从那里加入。我假设在第一个表的前 50 条记录中没有连接到第二个表；因此，您的结果将有 0 条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T02:01:31.453

我通过阅读这篇文章偶然发现了这个解决方案：[https ://stackoverflow.com/a/157919/1689144](https://stackoverflow.com/a/157919/1689144)

```
var rvClientRiskAdjs = (from ri in db.CI_CLIENTRISKADJS
                        join qb in
                            (from qb in db.QB_INVOICES_HEADER
                             orderby qb.InvoiceDt ascending
                             group qb by qb.ClientID into grp
                             select new
                             {
                                 InvoiceDt = grp.Max(s => s.InvoiceDt),
                                 ClientID = grp.Key
                             })
                        on ri.ClientID equals qb.ClientID
                        orderby qb.InvoiceDt descending
                        where ri.IsActive == 1
                        select new ClientRiskModel()
                        {
                            ClientRiskId = ri.ClientRiskID,
                            ClientName = ri.CI_CLIENTLIST.ClientName,
                            ClientId = ri.ClientID,
                            ClientRiskAdjs = ri.ClientRiskAdjs,
                            RecordValidEnddt = ri.RecordValidEnddt,
                            RecordValidStartDt = ri.RecordValidStartDt
                        })
                        .ToList(); 
```

# php - php rand(5,15) 给出 7771 但 7771 >15？

> ID：13096059
> 
> 赞同：-7
> 
> 时间：2012-10-27T00:19:18.810
> 
> 标签：php, random, max, min

```
<?php
echo rand() . "\n";
echo rand() . "\n";

echo rand(5, 15);
?>
The above example will output something similar to:
7771
22264
11 
```

在 php**文档**中，他们说 *5 是最小值* *& 15 是最大值 * ＆它将返回它们之间的数字

**但如果它给了 7771 但 7771 >15 ??**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T00:21:14.777

您只在对 rand() 的一次调用中指定了 5,15，其他两个也需要它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-27T00:21:37.073

```
echo rand() . "\n"; 
```

输出 7771

```
echo rand() . "\n"; 
```

输出 22264

```
echo rand(5, 15); 
```

输出 11 介于 5 和 15 之间

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-27T00:21:37.083

您没有限制前 2 个调用。您拥有的第三个结果是 11，它*在*范围内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T00:54:05.090

首先，如果你只问你知道答案的问题，你会得到更多的尊重。这可能解释了反对票。

鉴于 5 应该是最小值，而 15 应该是最大值，您的示例

```
rand(5, 15)
// returns 11 
```

似乎是对的。但是这些

```
rand();
rand(); 
```

似乎返回的东西几乎是随机的？:) 你在这两个中缺少“最小”和“最大”。

# powershell - 在新的、干净的 PowerShell 实例中调用 PowerShell 脚本（从另一个脚本中）

> ID：13096061
> 
> 赞同：8
> 
> 时间：2012-10-27T00:19:34.183
> 
> 标签：powershell

我有很多脚本。进行更改后，我喜欢将它们全部运行以查看是否有任何损坏。我编写了一个脚本来遍历每个脚本，并在新数据上运行它。

在我的循环中，我目前正在运行`powershell.exe -command <path to script>`. 我不知道这是否是最好的方法，或者这两个实例是否完全分开。

在干净的 PowerShell 实例中运行脚本的首选方法是什么？还是我应该说“会话”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T07:41:09.920

使用`powershell.exe`似乎是一种很好的方法，但当然也有其优点和缺点。

优点：

*   每个脚本都在单独的干净会话中调用。
*   即使崩溃也不会停止整个测试过程。

缺点：

*   调用`powershell.exe`有点慢。
*   测试取决于退出代码，但 0 并不总是意味着成功。

没有提到的缺点是一个潜在问题。

演示脚本如下。它已经通过 PS v2 和 v3 进行了测试。脚本名称可能包含特殊字符，如空格、撇号、方括号、反引号、美元。注释要求中提到的一项是能够在其代码中获取脚本路径。使用建议的方法，脚本可以获得自己的路径 `$MyInvocation.MyCommand.Path`

```
# make a script list, use the full paths or explicit relative paths
$scripts = @(
    '.\test1.ps1' # good name
    '.\test 2.ps1' # with a space
    ".\test '3'.ps1" # with apostrophes
    ".\test [4].ps1" # with brackets
    '.\test `5`.ps1' # with backticks
    '.\test $6.ps1' # with a dollar
    '.\test ''3'' [4] `5` $6.ps1' # all specials
)

# process each script in the list
foreach($script in $scripts) {
    # make a command; mind &, ' around the path, and escaping '
    $command = "& '" + $script.Replace("'", "''") + "'"

    # invoke the command, i.e. the script in a separate process
    powershell.exe -command $command

    # check for the exit code (assuming 0 is for success)
    if ($LastExitCode) {
        # in this demo just write a warning
        Write-Warning "Script $script failed."
    }
    else {
        Write-Host "Script $script succeeded."
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-27T02:13:28.083

如果您使用的是 PowerShell 2.0 或更高版本，则可以使用作业来执行此操作。每个作业在单独的 PowerShell 进程中运行，例如：

```
$scripts = ".\script1.ps1", ".\script2.ps1"

$jobs = @()
foreach ($script in $scripts)
{
    $jobs += Start-Job -FilePath $script
}

Wait-Job $jobs

foreach ($job in $jobs)
{
    "*" * 60
    "Status of '$($job.Command)' is $($job.State)"
    "Script output:"
    Receive-Job $job
} 
```

此外，请查看[PowerShell 社区扩展](http://pscx.codeplex.com)。它有一个`Test-Script`命令可以检测脚本文件中的语法错误。当然，它不会捕获运行时错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-10T05:12:15.423

给 PowerShell V3 用户的一个提示：我们（PowerShell 团队）在 Runspace 类上添加了一个名为 ResetRunspace() 的新 API。此 API 将全局变量表重置回该运行空间的初始状态（以及清理其他一些东西）。它不做的是清除函数定义、类型和格式文件或卸载模块。这允许 API 更快。另请注意，必须使用 InitialSessionState 对象而不是 RunspaceConfiguration 实例创建运行空间。ResetRunspace() 作为工作流功能的一部分添加到 V3 中，以支持脚本中有效的并行执行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-27T00:46:40.837

这两个实例是完全独立的，因为它们是两个不同的进程。通常，为每个脚本运行启动 Powershell 进程并不是最有效的方法。根据脚本的数量以及重新运行它们的频率，它可能会影响您的整体性能。如果不是，我会保持原样。

另一种选择是在同一个运行空间中[运行](https://serverfault.com/questions/10732/what-are-runspaces-in-windows-powershell-2-0)（这是一个正确的词），但每次都清理所有内容。请参阅[此答案](https://stackoverflow.com/a/9961604/897326)以获取方法。或使用以下提取物：

```
$sysvars = get-variable | select -Expand name
function remove-uservars {
 get-variable |
   where {$sysvars -notcontains $_.name} |
     remove-variable
} 
```

# vbscript - VBscript 中不再使用 Sleep 操作了吗？

> ID：13096063
> 
> 赞同：5
> 
> 时间：2012-10-27T00:19:39.823
> 
> 标签：vbscript

互联网上许多地方（包括本论坛的此处）所述的“睡眠”命令不起作用。它现在是一个过时的命令吗？

我正在编写这样的 VBScript 代码：

```
sub button1_onclick()
Wscript.Sleep 1000
div1.innerHTML = textbox1.value
end sub 
```

它应该等待 1 秒，然后执行那个简单的命令。这是一个非常简单的声明，但它不起作用。干净利落。每次说的时候都会报错：

> 所需对象：'Wscript'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T06:14:50.647

[关于上下文是这里的关键，丹尼尔的回答](https://stackoverflow.com/a/13096168/249624)是绝对正确的。尽管您没有`WScript`可用的方法，但您确实拥有完整的浏览器 DOM，包括该[`window.setTimeout`](http://msdn.microsoft.com/en-us/library/ie/ms536753%28v=vs.85%29.aspx)方法。使用 VBScript，将代码传递给的语义与`setTimeout`JavaScript 略有不同，但仍有可能：

```
Sub button1_onclick()
    window.setTimeout GetRef("Delayed"), 1000
End Sub

Sub Delayed()
    div1.innerHTML = textbox1.value
End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T10:57:27.823

另一种选择是（ab）使用`ping`（如果你想避免额外的脚本）：

```
Sub Sleep(seconds)
  CreateObject("WScript.Shell").Run "%COMSPEC% /c ping 127.0.0.1 -n " _
    & seconds+1, 0, True
End Sub 
```

`ping`以（大约）1 秒的间隔发送回显请求，因此您可以通过发送回显请求来获得`n`- 秒的延迟。`n+1`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T00:38:02.120

从浏览器运行时，VBScript 代码没有 Wscript 对象。这仅适用于独立 VBS。因此，Wscript.Sleep 并没有过时，它只是不能在没有解决方法的浏览器中工作。

[该线程](http://us.generation-nt.com/answer/wscript-sleep-html-help-53532232.html#53532612)建议了一个潜在的解决方法。这篇文章的其余部分来自 mayayana 在链接页面上的条目：

如果您的安全性可以允许 WScript.Shell 运行，您可以这样做 -

网页中的脚本子：

```
<SCRIPT LANGUAGE="VBScript">
Sub Sleep(NumberSeconds)
Dim SH, Ret
Set SH = CreateObject("WScript.Shell")
Ret = SH.Run("sleeper.vbs " & NumberSeconds, , True)
End Sub
</SCRIPT> 
```

在与网页相同的文件夹中，放置一个名为 sleeper.vbs 的文件，并将以下代码放入其中：

```
Dim Arg
on error resume next
Arg = WScript.Arguments(0) * 1000
WScript.sleep Arg 
```

然后你可以调用类似的东西：

`Sleep 5`'——暂停 5 秒。

# jquery - MVC jquery调用控制器方法不起作用

> ID：13096067
> 
> 赞同：0
> 
> 时间：2012-10-27T00:19:49.450
> 
> 标签：jquery, asp.net-mvc

我想根据另一个下拉列表的选择填充一个下拉列表。

我知道这是一个相当普遍的问题，整整两天我一直在尝试我在网上找到的不同样本，但无济于事！

这是我的代码：

控制器：

```
 public List<SelectListItem> listTestCases(string id)
    {
        IQueryable<SelectListItem> A = repository.listTestCases(id);
        return (A.toList());
    }

    public JsonResult listTestCases_2(string id)
    {
        IQueryable<SelectListItem> A = repository.listTestCases(id);
        return Json(A);
    } 
```

我有两种方法，一种返回 List，另一种返回 JSONResults，我用这两种方法尝试了我在网上找到的所有方法。脚本：

```
<script>
$(document).ready(function() {
    $('select#testCategoriesUniqueId').change(function() {

        var testCategory = $(this).val();
        $.ajaxSetup({ cache: false });
        alert(testCategory);

        $.getJSON("TestInput/listTestCases/" ,  {id: testCategory}, function(data) {
            alert("here");
        });

    });
}); 
```

使用上面的代码，代码通过listTestCases，并得到结果，但它没有进入成功函数。（不提醒）

我试过了：

```
 $.getJSON("TestInput/listTestCases/" + testCategory, null, function(data) {
            alert("here");
        }); 
```

毫不奇怪，相同的结果。

我什至尝试过：（json-p）

```
 $.ajax({
            url: "TestInput/listTestCases/" + testCategory,
            dataType: "json-p",
            success: function(data) {
                alert(data.length);
                var S = "";
                $("#testCasesUniqueId").removeOption(/./);
                for (var i = 0; i < data.length; i++) {
                    S += data[i];
                    var val = data[i].Value;
                    var text = data[i].Text;
                    $("#testCasesUniqueId").addOption(val, text, false);
                }
                alert(S);
            }
        }
        ); 
```

结果是一个字符串（System.collections.List[...SelectListItem]。并没有给我列表的对象。所以我用listTestCases2尝试了它，它甚至没有调用该方法。

我在某处读到需要使用 post 而不是 get，甚至尝试过 postJSON。没有结果。

基本上我迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T00:50:48.803

确保您从 Web 根目录引用您的 ajax 调用（在 URL 前加上“/”）。如所写，您正在相对引用该调用。我建议不要在 jquery/javascript 中使用双引号。此外，不要混合结果类型。假设您的控制器是 TestInput，请尝试：

```
 $.ajax({
        url: '/TestInput/listTestCases_2/' + testCategory,
        type: 'get',
        dataType: 'json',
        success: function(data) {
            alert(data.length);
            var S = '';
            $('#testCasesUniqueId').removeOption(/./);
            for (var i = 0; i < data.length; i++) {
                S += data[i];
                var val = data[i].Value;
                var text = data[i].Text;
                $('#testCasesUniqueId').addOption(val, text, false);
            }
            alert(S);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T03:34:31.197

尝试`testCategory`使用调用`data:`设置传递您的参数`$.ajax`：

```
 $.ajax({
            url: "TestInput/listTestCases",
            data: { id: testCategory },
            dataType: "json",
            success: function(data) {
                alert(data.length);
                var S = "";
                $("#testCasesUniqueId").removeOption(/./);
                for (var i = 0; i < data.length; i++) {
                    S += data[i];
                    var val = data[i].Value;
                    var text = data[i].Text;
                    $("#testCasesUniqueId").addOption(val, text, false);
                }
                alert(S);
            }
        }
        ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T21:17:07.247

在某处我读到我需要使用“发布”方法来达到我的目的。

```
 $.ajax({
            url: "TestInput/listTestCases_2/" + testCategory,
            dataType: "json",
            type: 'post',
            success: function(data) {
                alert(data.length);

            }
        }); 
```

为我工作。