# StackOverflow 问答 16134000-16134999

# php - 在 linux 中启用 apache 服务器的错误报告

> ID：16134000
> 
> 赞同：0
> 
> 时间：2013-04-21T17:22:23.107
> 
> 标签：php, linux, apache

我在本地主机中创建了一个 php 文件，但是当我尝试对其进行测试时，我从 navigator 收到了这条消息：

> # 服务器错误
> 
> 该网站在检索 时遇到错误 `http://localhost/ex_exam_2012/affiche_note.php?cin=SY3422`。它可能因维护而停机或配置不正确。

通常 apache 服务器应该告诉我哪里有问题，在 Windows 中我从来没有遇到过这个问题，但这是我第一次在 Linux 中测试一个 php 文件，我对 itg 进行了搜索，我发现了这个问题以启用显示错误：

> [PHP 生产服务器 - 打开错误消息](https://stackoverflow.com/questions/1824282/php-production-server-turn-on-error-messages)

所以我将其更改为值：

```
error_reporting = E_ALL 
```

和 ：

```
display_errors = On 
```

但我仍然有这个问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:37:20.300

这只是一条通用消息，告诉您存在问题。您需要查看 Apache 的`error_log`文件以了解发生了什么。它经常在 中找到`/var/log/apache`，但不同的 Linux 发行版有时会更改此错误日志的位置。

# css - CSS 媒体查询，只针对比手机大的屏幕

> ID：16134001
> 
> 赞同：3
> 
> 时间：2013-04-21T17:22:25.483
> 
> 标签：css, media-queries

我正在尝试进行一个 css 媒体查询，该查询仅适用于比 iPhone 更大的屏幕，而我的谷歌搜索并没有解决它。

因此，我希望我的媒体查询仅针对设备平板电脑尺寸及以上。智能手机不应成为目标。

这是我尝试过的：

```
 @media only screen 
    and (min-device-width : 1136px) and (min-width:561px) 
```

但它似乎不适用于我的 iphone 5；手机仍然执行查询中的 css。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T17:29:03.193

试试这个：

```
@media (min-width:641px) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:16:02.020

也许这个解决方案可以帮助你。这是针对 iPhone 4 的。

```
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

# linux - 用 sed 替换多行变量

> ID：16134005
> 
> 赞同：2
> 
> 时间：2013-04-21T17:22:31.497
> 
> 标签：linux, bash, sed, replace

我必须创建一个脚本来替换 apache`httpd.conf`文件中的几行。我有2个问题。首先，如何将多行保存到一个变量中？我试过这个，但它没有用

```
replace="#ErrorLog "logs/error_log" '\n' ErrorLog "|<apache_location>/bin/rotatelogs <apache_location>/logs/error.%Y.%m.%d.log 86400" 
```

`'\n'`无法添加换行符。然后我的想法是像这样使用*sed* (1) ：

```
sed -i "s#ErrorLog "logs/error_log"#$replace#g" $apache_httpd 
```

我不知道这是否会奏效。

* * *

我能够用几行创建变量：
`VAR="#ErrorLog \"logs/error_log\""`
`VAR="$VAR"$'\n'"ErrorLog \"|<apache_location>/bin/rotatelogs <apache_location>/logs/error.%Y.%m.%d.log 86400\""`

`replace="ErrorLog \"logs/error_log\""`

现在问题出现在 sed 上，我不得不使用不同的分隔符（[http://backreference.org/2010/02/20/using-different-delimiters-in-sed/](http://backreference.org/2010/02/20/using-different-delimiters-in-sed/)）。但它一直失败。
`sed -i "s;$replace;$VAR;g" /root/daniel/scripts/test3/httpd.conf`
sed: -e 表达式 #1, char 54: 未终止的 `s' 命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:38:33.373

从我在这里看到的情况来看，您的问题是，您没有正确转义变量赋值和 sed 单行中的双引号。

**问题一**：

如果有的话，你必须**转义**引号：

```
kent$  r="foo\n\"bar\"\nbaz"
kent$  echo $r
foo
"bar"
baz 
```

**问题 2**：

您的 sed 行中也需要**转义引号：**

例如：

```
kent$  cat file
keep the lines before
---
foo and "this"
---
keep the following lines

kent$  sed "s#foo and \"this\"#$r#" file
keep the lines before
---
foo
"bar"
baz
---
keep the following lines 
```

# c# - 在 ViewModel 之外更改 TextBox.Text

> ID：16134007
> 
> 赞同：2
> 
> 时间：2013-04-21T17:22:54.450
> 
> 标签：c#, wpf, xaml

我将 TextBox 的文本绑定到 ViewModel 类中的一个属性，如下所示：

```
Text="{Binding Display, Mode=OneWay}" 
```

问题是我需要在不更改 ViewModel 中的支持 Display 属性的情况下格式化 TextBox 的文本（我需要保持字符串的精度）。我可以在 ViewModel 中创建另一个属性，但在 View 类中更改它对我来说似乎更干净一些。问题是，第一次从 View 类更新 Text 后，数据绑定丢失，并且没有进一步的更新发生。

如何在操作 Text 属性后恢复数据绑定，为下一次 Display 属性更改做好准备？

```
 private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        const int maxForDisplay = 12;
        TextBox _display = sender as TextBox;
        if (_display.Text.Length > maxForDisplay)
        {
            _display.Text = _display.Text.Substring(0, maxForDisplay);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:31:26.920

你不应该做那样的事情。

如果您需要以`format`不同方式在 TextBox 中输出 - 使用`Converter`, 例如

```
Text="{Binding Display, Mode=OneWay, Converter={StaticResource myconverter}}" 
```

（转换器还支持转换`back`，因此将您输入的值转换为 Display - 例如，不确定这是否是您想要的，但您可以在输出到屏幕时添加额外的格式，并在“存储”回属性时将其删除）

或者，如果可能的话，只需使用`{Binding Display, StringFormat=...}"`

# javascript - Node.js：较新版本中存在严重的内存泄漏错误？

> ID：16134010
> 
> 赞同：1
> 
> 时间：2013-04-21T17:23:24.843
> 
> 标签：javascript, node.js, debugging, memory, memory-leaks

# 有什么问题？

首先，我认为我的 node.js 模块或代码有问题，因为当我访问我的页面时，每次访问后内存都会减少并且它没有被释放回来。经过数小时的调试，我找不到任何问题，因此我尝试了默认的 node.js 服务器示例，以查看问题是在我的代码中还是在 node.js 本身中。

## 如何重复问题：

所以我创建了这样的服务器：

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(80);
console.log('Server running at port 80'); 
```

我反复访问`mydomain.com`并点击刷新，可用内存一直在下降，即使我释放刷新后，内存仍然保持在同一水平，所以node.js保持它。

## 那么这里有什么问题呢？

**环境**

我在`ubuntu 12`, `max os x 10.8.3`, `node v0.9.0`, `node v0.10.0`,`v0.10.2`上测试存在问题的地方以及`v0.10.4`它正常工作的地方，这就是为什么我说它可能是较新版本中的错误。`v0.11.1``node v0.8.21`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:49:11.890

`V8`将在**需要**时调用**GC**，此时应减少内存使用量。

 **为了确保**GC**进程正常工作，我建议您使用参数运行**node**`--expose-gc`并使用以下内容检查内存使用情况：

```
var http = require('http'),
    util = require('util');

http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World\n');

    global.gc();
    console.log('Memory Usage:');
    console.log(util.inspect(process.memoryUsage()));
}).listen(8080); // changed the port to 8080 because I didn't want to run the server as root

console.log('Server running at port 8080'); 
```**

# java - Java - 不可变的局部变量

> ID：16134011
> 
> 赞同：3
> 
> 时间：2013-04-21T17:23:34.740
> 
> 标签：java, exception, exception-handling, coding-style, immutability

`final`默认情况下创建局部变量是很常见的“好习惯” 。不知道 Eclipse，但在 IDEA 中，“创建局部变量”对话框中甚至还有一个复选框。但是有一个问题不允许我每次都使用它。以这段代码为例：

```
...
final Foo foo = null;
try{
    foo = getFromSomewhere();
} catch (IDontCareException e) {
    log.info(e, "looks like foo is not there);
}

if (foo != null) {
    doSomethingWithFoo(foo);
}

doSomethingElse();
... 
```

问题是`IDontCareException`没有扩展 `RuntimeException`......还有什么方法可以使用`final`变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:30:16.323

尝试

```
final Foo foo;
try{
    foo = getFromSomewhere();
} catch (IDontCareException e) {
    log.info(e, "looks like foo is not there);
    foo = null;
}

if (foo != null) {
    doSomethingWithFoo(foo);
} 
```

编辑：它不编译。试试这个

```
Foo tmp;
try{
    tmp = getFromSomewhere();
} catch (IDontCareException e) {
    log.info(e, "looks like foo is not there);
    tmp = null;
}
final Foo foo = tmp;

if (foo != null) {
    doSomethingWithFoo(foo);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T17:32:03.473

final 的定义是您不能更改它所引用的内容。和`foo = getFromSomewhere()`你一起做。你不能那样做。一种选择是将所有内容都放在 try-block 中，如下所示：

```
try{
    final Foo foo = getFromSomewhere();
    doSomethingWithFoo(foo); //If getFromSomewhere() always returns a non-null value, otherwise you will still need the null-check
} catch (IDontCareException e) {
    log.info(e, "looks like foo is not there);
}

doSomethingElse();
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T17:29:50.463

是的。编写一个辅助方法：

```
private Foo getFooOrNull() {
   try {
     return getFromSomewhere();
   } catch (Exception e) { return null;}
} 
```

然后在你的课上：

```
private final Foo myFoo = getFooOrNull(); 
```

这将使 try/catch 块移开并提高代码可读性，此外还允许 yuo 让您保持最终状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T17:40:18.333

如果它以某种方式改进您的代码，那么这种做法是好的。不加思索地为所有变量添加 final 肯定不是一个好习惯。顺便说一句，局部变量已经在方法中限定了范围，并且大多数时候寿命很短。为什么要让它们成为最终的？这又是一种微优化吗？老实说，您对此一无所获。而且您使代码的可读性降低。

final 表示您的变量是常量，这里不是这种情况，因为您重新分配了变量。
对我来说，这里的好答案是：不要使这个变量最终！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T17:30:34.130

例如，您可以尝试：

```
private void myMethod(){
   try{
      final Foo foo = getFromSomewhere();
      if(foo != null){
         doSomethingWithFoo(foo);
      }
  } catch (IDontCareException e) {
   log.info(e, "looks like foo is not there);
  }
  doSomethingElse();
} 
```

# amazon-web-services - 如何解压旧的 Amazon AMI？

> ID：16134013
> 
> 赞同：3
> 
> 时间：2013-04-21T17:23:45.567
> 
> 标签：amazon-web-services, amazon-ec2

很久以前，我组装了一个在 EC2 场上运行的非常复杂（但构建速度很快）的 Web 应用程序。在某个时候，我放弃了它，关闭了农场，我的本地桌面上有了一个 Web 应用程序代码的副本。在我有机会将其复制到安全的地方之前，我发生了严重的崩溃，并且丢失了这些文件。我以为他们永远消失了。

最近，我在我的 S3 存储桶中四处挖掘，发现了我在 EC2 上创建的 Apache AMI 的备份。它由一个 manifest.xml 文件和 85 x 10.5MB 段组成：

*   appname-apache_x64-201103310802.manifest.xml
*   appname-apache_x64-201103310802.part.00 ~ 84

有没有办法从这个 AMI 中提取文件？我已经挖了一点，我已经看到了一些关于 ec2-unbundle 的文档，但看起来我可能需要一个私钥，我不确定我是否或在哪里仍然拥有它（或者我是否可以重新生成它）。或许是我想多了？

非常感谢任何帮助！

**更新：**我尝试按照一些人的建议重新启动 AMI。我进入我的 AWS 控制台，然后在 EC2 控制台下注册一个新的 AMI。当我输入 manifest.xml 文件的路径（尚未移动）时，出现以下错误：

> URL scalr-images-us-972708971173.s3.amazonaws.com:80/... 的 HTTP 301（永久移动）响应：检查您的清单路径是否正确且位于正确的区域。

奇怪的是，如果我将错误中的 URL 复制并粘贴到浏览器中（在对文件设置打开权限之后），浏览器下载 XML 文件没有问题。那么为什么 AWS 没有看到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:25:54.093

这是你应该做的：

*   从该 AMI 启动一个微型实例（我希望它已在您的帐户中注册）。
*   让设置完成。
*   登录到该实例。
*   将您想要的文件抓取到本地计算机。
*   杀死/终止此实例。
*   完毕！

# python - dummy_threading 是做什么的？

> ID：16134017
> 
> 赞同：4
> 
> 时间：2013-04-21T17:24:13.783
> 
> 标签：python, multithreading, python-2.7, python-multithreading

我什么时候用`dummy_threading`？

我曾认为它可能会用模拟线程替换系统级线程，以防 Python 无法使用系统级线程。

但是当我运行这个时：

```
import dummy_threading as threading

semaphore = threading.Semaphore()
def f(i):
    semaphore.acquire()
    print i
for i in xrange(10):
    threading.Thread(target=f, args=(i,)).start()
for _ in xrange(10):
    semaphore.release() 
```

我得到`0`了，程序没有终止。不仅如此，Python 还莫名其妙地继续吞噬我电脑的内存，直到它一无所有。

当我运行这个：

```
import threading

semaphore = threading.Semaphore()
def f(i):
    semaphore.acquire()
    print i
for i in xrange(10):
    threading.Thread(target=f, args=(i,)).start()
for _ in xrange(10):
    semaphore.release() 
```

我得到`0 1 3 5 7 9 2 4 6 8`了预期。

我一定是误会了`dummy_threading`。我什么时候使用它？

仅供参考，我在 Windows 7 和 Fedora 18 上进行了比较，得到了相同的结果。

编辑：但是，以下给出`0 1 2 3 4 5 6 7 8 9`：

```
import dummy_threading as threading

event = threading.Event()
def f(i):
    event.wait()
    print i
for i in xrange(10):
    threading.Thread(target=f, args=(i,)).start()
event.set() 
```

最大的问题是：做`dummy_threading` *什么*，或者什么时候会给出与 相同的行为`threading`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T17:38:15.843

该模块旨在在您的平台上可用且不可用时`thread`使用`threading`。

您传递给它的函数被*同步*调用，并且您`.start()`立即调用。第一个函数获取信号量，打印，然后调用第二个函数并阻塞。它同步运行并且永不返回。

从[`dummy_thread`文档](http://docs.python.org/2/library/dummy_threading.html)中：

> 注意不要使用这个模块，因为正在创建的线程可能会发生死锁，阻塞等待另一个线程被创建。这通常发生在阻塞 I/O 上。

并来自[EFF-bot 帖子](http://effbot.org/librarybook/dummy-threading.htm)（否则很短并且缺少工作链接）：

> 帮助程序使编写使用支持的线程的代码变得更容易，但仍然在没有线程支持的 Python 版本上运行。虚拟模块只是按顺序运行线程。

注意*使它更容易*的部分；如果没有实际的线程，您不能期望代码运行`dummy_threading`时不会像您的示例中那样死锁。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T17:52:23.380

在`dummy_threading`中，线程只是函数包装器，它们是按顺序执行的。

第二个片段的问题是`dummy_threading.Thread.start()`直到相应的`f`调用退出才返回。线程`0`将获取信号量，然后线程`1`将尝试获取它并阻塞。没有任何东西会释放信号量，因为只有一个线程被阻塞。

更新：对虚拟事件行为进行了一些研究。

事实上，所有的`Semaphore`,`Event`等都`Condition`与`dummy_threading`正常情况完全相同，`threading`只是它们使用了虚拟锁（为此做了一些导入魔法。）因此，当您调用 时`event.wait()`，底层锁永远不会阻塞线。两者都不会阻塞 使用的锁`Semaphore`，而是在内部信号量循环，直到资源可用：

```
 while self.__value == 0:  # Here it will loop forever
    if not blocking:
        break
    ....
    self.__cond.wait() 
```

我认为，虚拟事件违反了这样的假设，即无论何时在`wait`没有参数的情况下调用返回，这意味着该事件已设置，但不确定是否可以轻松帮助。

# python - Django中的设置命名空间

> ID：16134018
> 
> 赞同：3
> 
> 时间：2013-04-21T17:24:15.377
> 
> 标签：python, django, coding-style, django-apps

我正在编写可重用的 Django 应用程序。将自己的设置添加到的最佳实践是什么`settings.py`？我是否需要在每个设置前面加上我的 app_name，或者我应该只制作一个设置字典。我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:09:47.450

您应该尝试仅在所涉及的包中定义应用程序设置，尤其是在您考虑使用可重用包时。坚持使用唯一的全局名称（实际上是哪些设置）总是一个好主意。看看[PEP-8 全局变量](http://www.python.org/dev/peps/pep-0008/#id31)。

如果您正在创建一个可重用的包，最好先尝试从设置模块导入属性，以查看用户是否用自己的常量覆盖它。

例如

```
from django.conf import settings

MY_CONSTANT = getattr(settings, 'MY_CONSTANT', True)

def foo(*args, **kwargs):
    if MY_CONSTANT:
        return 'hello'
    else:
        return 'goodbye' 
```

这样，用户可以`MY_CONSTANT = False`在他的设置模块中进行设置，以便应用程序将返回`'goodbye'`而不是默认值`'hello'`

大多数软件包确实按照您的建议使用软件包名称作为前缀，这里有几个例子：

[FEINCMS](https://github.com/feincms/feincms/blob/master/feincms/default_settings.py) ,[美味派](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/models.py#L53)

# ruby-on-rails - to_json 在 Rails 中返回字符串而不是 json

> ID：16134022
> 
> 赞同：14
> 
> 时间：2013-04-21T17:24:31.720
> 
> 标签：ruby-on-rails, json, string, gem

以下代码应该返回一个 json：

```
 @series = @series.map do |serie| {
    :name => serie.name,
    :id => serie.id
  }

  @series.to_json 
```

它的回报如下：

```
"[{\"name\":\"Barra\",\"id\":3},{\"name\":\"Botafogo 1\",\"id\":1},{\"name\":\"Botafogo 2\",\"id\":2},{\"name\":\"Tijuca\",\"id\":4}]" 
```

为什么它返回一个字符串而不是一个json？

'json' gem 在我的 .rb 文件的顶部安装和需要

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-21T19:24:02.557

我刚刚解决了我的问题。出于某种原因`as_json`，做我想要的，而不是`to_json`. 我不太明白为什么。如果我发现，我会更新我的答案。这很奇怪，因为`to_json`在我将开发数据库形式 sqlite 3 更改为 postgresql 之前工作过。但我不认为这可能是问题，因为它与 Heroku 的 postgre 数据库配合得很好。

# php - 无法保存我的元框数据

> ID：16134026
> 
> 赞同：0
> 
> 时间：2013-04-21T17:25:00.730
> 
> 标签：php, wordpress

我正在尝试保存一些数据，但我不能。问题是保存的数据不是我期望的，而是一个空数组。

这是代码。请问，有什么问题？...我要疯了！

PS：我正在学习 PHP，所以也许这是一个愚蠢的问题......有没有办法在发送之前控制变量 $_POST ？

```
<?php
/*
Plugin Name: nw_Page_Gallery

*/

class NW_mb{

    var $post_meta = array("image1","image2");
    var $id;

    public function __construct(){

    }

    public function add_Box(){

        add_meta_box("nw_meta_box","Sfondo pagina",array($this, 'add_html'),"page");

    }

    public function add_Html($post){

        $post_meta = get_post_meta($post->ID, "nw_meta_boxes");
        $this->id = $post->ID;

        print_r($post_meta);

        ?>

        <label>Indirizzo immagine</label>
        <input type="text" id="nw_image1" name="nw_image1" value="<?php echo $post_meta[0] ?>" />

        <label>Indirizzo immagine</label>
        <input type="text" id="nw_image2" name="nw_image2" value="<?php echo $post_meta[1] ?>" />

        <label>Indirizzo immagine</label>
        <input type="text" id="nw_image3" name="nw_image3" value="<?php echo $post_meta[2] ?>" />

        <label>Indirizzo immagine</label>
        <input type="text" id="nw_image4" name="nw_image4" value="<?php echo $post_meta[3] ?>" />

        <label>Indirizzo immagine</label>
        <input type="text" id="nw_image5" name="nw_image5" value="<?php echo $post_meta[4] ?>" />

        <?

    }

    public function save_Box(){

        $boxes = array(
            isset($_POST['nw_image1']),
            isset($_POST['nw_image2']),
            isset($_POST['nw_image3']),
            isset($_POST['nw_image4']),
            isset($_POST['nw_image5'])
        );

        update_post_meta($this->id, 'nw_meta_boxes', $boxes);

    }

}

add_action("add_meta_boxes", function(){
    $NW_mb_istance = new NW_mb;

    $NW_mb_istance->add_Box();
});

add_action("save_post", array($NW_mb_istance,"save_Box")); 
```

# javascript - 如何阻止 dojo 滚动以形成焦点小部件？

> ID：16134032
> 
> 赞同：-1
> 
> 时间：2013-04-21T17:25:42.573
> 
> 标签：javascript, dojo, dijit.form

所有表单小部件都从其扩展，`dijit.form._FormWidgetMixin`当它获得焦点时，窗口将滚动到小部件。

我个人发现这种行为使大多数小部件无法使用。我怎样才能阻止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:25:42.573

Dojo 允许您使用`dojo/_base/lang::extend`. 只需确保在任何加载的 require 调用之前都需要此模块`dijit/form/_FormWidgetMixin`

```
// Dojo 1.7+ (AMD)
define([
    "dojo/_base/lang",
    "dijit/form/_FormWidgetMixin"
], function(lang, _FormWidget){
    lang.extend(_FormWidget, {
        scrollOnFocus:false
    });
}); 
```

AMD 之前的 dojo 也是如此：

```
// Dojo < 1.7
dojo.require("dijit.form._FormWidget");
dojo.extend(dijit.form._FormWidget, {
    scrollOnFocus:false
}); 
```

# javascript - 为刚刚使用 javascript 加载的图像添加淡入效果

> ID：16134034
> 
> 赞同：0
> 
> 时间：2013-04-21T17:25:45.133
> 
> 标签：javascript

我有一个主图像，用户单击链接可以将其更改为五个不同图像之一。在这种情况下，链接“一”、“二”、“三”、“四”或“五”。

因此，单击链接“三”会将主图像更改为显示第三个图像。

这一切正常，但我正在寻找淡入而不是立即出现的图像。这可以通过快速修改下面的代码来实现吗？

提前谢谢了，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Image Change Demo</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<script type="text/javascript">
function changeIt(objName)
{
//The image object accessed through its id we mentioned in the DIV block which is going to be visible currently
var obj = document.getElementById(objName);

//An array that hold the IDs of images that we mentioned in their DIV blocks
var objId = new Array();

//Storing the image IDs into the array starts here
objId[0] = "image1";
objId[1] = "image2";
objId[2] = "image3";
objId[3] = "image4";
objId[4] = "image5";
//Storing the image IDs into the array ends here

//A counter variable going to use for iteration
var i;

//A variable that can hold all the other object references other than the object which is going to be visible
var tempObj;

//The following loop does the display of a single image based on its ID. The image whose ID we passed into this function will be the
//only image that is displayed rest of the images will be hidden based on their IDs and that part has been handled by the else part
//of the if statement within this loop.
for(i=0;i<objId.length;i++)
{
    if(objName == objId[i])
    {
        obj.style.display = "block";
        rotate.nu=i;
    }
    else
    {
        tempObj = document.getElementById(objId[i]);
        tempObj.style.display = "none";
    }
}
return;
}

function rotate()
{

//An array that hold the IDs of images that we mentioned in their DIV blocks
var objId = new Array();

//Storing the image IDs into the array starts here
objId[0] = "image1";
objId[1] = "image2";
objId[2] = "image3";
objId[3] = "image4";
objId[4] = "image5";
rotate.nu=rotate.nu||0;
document.getElementById(objId[rotate.nu]).style.display = "none";
rotate.nu=++rotate.nu%objId.length;
document.getElementById(objId[rotate.nu]).style.display = "block";
}

</script>
</head>

<body>
<div id="image1" onmouseup="rotate();" >
<img src="dimming/1.jpg" border="0" alt="one" />
</div>

<div id="image2" style="display:none" onmouseup="rotate();">
<img src="dimming/2.jpg" border="0" alt="two" />
</div>

<div id="image3" style="display:none" onmouseup="rotate();">
<img src="dimming/C.jpg" border="0" alt="three" />
</div>

<div id="image4" style="display:none" onmouseup="rotate();">
<img src="dimming/D.jpg" border="0" alt="four" />
</div>

<div id="image5" style="display:none" onmouseup="rotate();">
<img src="dimming/E.jpg" border="0" alt="five" />
</div>
<br><br>
<a id="one" href="#" onclick="changeIt('image1');">one</a>
<a id="two" href="#" onclick="changeIt('image2');">two</a>
<a id="three" href="#" onclick="changeIt('image3');">three</a>
<a id="four" href="#" onclick="changeIt('image4');">four</a>
<a id="five" href="#" onclick="changeIt('image5');">five</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:36:34.633

如果您正在寻找简单的方法，您可能会使用 jQuery 框架。像这样的用法：

```
$('.image').fadeIn(1000) 
```

# php - PHP 我的主题下载页面

> ID：16134035
> 
> 赞同：0
> 
> 时间：2013-04-21T17:25:51.413
> 
> 标签：php

当我的用户购买“主题”时，购买完成后，我将主题添加到 theme_purchases MySQL 表中。

像这样：

**PurchaseID——用户ID——主题ID**

**1 -- 44 -- 4**

有一个名为 mythemes.php 的页面将显示该用户购买的所有主题。用户将能够通过单击“下载”按钮下载主题。

我想处理这个答案中的下载：

[https://stackoverflow.com/a/15951217/1761494](https://stackoverflow.com/a/15951217/1761494)

就我而言（使用用户和他自己的主题），我是否需要使用令牌（根据我上面发布的答案）。

有没有其他解决方案可以提供下载页面，保护下载链接？使用可以随时下载他的主题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:11:15.427

我不确定我是否也理解你的问题。但是，如果你想通过隐藏它们的真实文件夹来保护主题文件，也许这可能是个好方法：如果文件是 zip，你只需编写一个下载的 php 文件，用 GET 方法给出主题 id。在下载文件中你可以检查它是否有权下载它，如果是，你发送一个标题和文件，可能是这样的：

```
$filename = "thiszip.zip"; 
header('Content-type: application/zip'); 
header('Content-Disposition: attachment; filename="' . $filename . '"'); 
header("Content-length: " . filesize($filename));
readfile($filename); 
```

# android - Android应用程序中的搜索界面问题

> ID：16134043
> 
> 赞同：1
> 
> 时间：2013-04-21T17:26:56.997
> 
> 标签：android, search

您好我正在尝试为 android 应用程序创建搜索界面。我已经按照 android 开发人员教程进行操作，但我仍然遇到错误。不知道哪里出错了，求大神帮忙！我正在尝试将搜索小部件集成到我的应用程序的布局中。以下是我到目前为止所做的：

清单.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.amazonsearch"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
           <activity
            android:name="com.example.amazonsearch.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
           <!-- this is the searchable activity; it performs searches -->
    <activity android:name=".SearchableActivity" android:launchMode="singleTop">
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>
        <meta-data android:name="android.app.searchable"
                   android:resource="@xml/searchable"/>
    </activity>

    <!-- this activity enables the search dialog to initiate searches
         in the SearchableActivity -->
    <activity android:name=".OtherActivity" >
        <!-- enable the search dialog to send searches to SearchableActivity -->
        <meta-data android:name="android.app.default_searchable"
                   android:value=".SearchableActivity" />
    </activity>
    </application>

</manifest> 
```

MainActivity.java

```
package com.example.amazonsearch;

import android.os.Bundle;
import android.app.Activity;
import android.app.SearchManager;
import android.content.Context;
import android.view.Menu;
import android.view.MenuInflater;
import android.widget.SearchView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the options menu from XML
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.options_menu, menu);

        // Get the SearchView and set the searchable configuration
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
        // Assumes current activity is the searchable activity
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(false); // Do not iconify the widget; expand it by default

        return true;
    }

} 
```

SearchableActivity.java

```
package com.example.amazonsearch;

import android.app.ListActivity;
import android.app.SearchManager;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;

public class SearchableActivity extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.searchresults);

        final Intent queryIntent = getIntent();
        final String queryAction = queryIntent.getAction();
        if (Intent.ACTION_SEARCH.equals(queryAction)) {
            String searchKeywords = queryIntent.getStringExtra(SearchManager.QUERY);
            Log.i("YOU ENTERED", searchKeywords);
        }
    }
} 
```

可搜索的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android" >
    android:label="@string/app_label"
    android:hint="@string/search_hint" >
</searchable> 
```

这些是以下错误：

```
[2013-04-21 16:03:36 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for E:\Workspace\AmazonSearch\AndroidManifest.xml: Element type "activity" must be followed by either attribute specifications, ">" or "/>".
[2013-04-21 16:03:36 - AmazonSearch] Error in an XML file: aborting build.

Description Resource    Path    Location    Type
menu_search cannot be resolved or is not a field    MainActivity.java   /AmazonSearch/src/com/example/amazonsearch  line 28 Java Problem

Description Resource    Path    Location    Type
options_menu cannot be resolved or is not a field   MainActivity.java   /AmazonSearch/src/com/example/amazonsearch  line 24 Java Problem

Description Resource    Path    Location    Type
searchresults cannot be resolved or is not a field  SearchableActivity.java /AmazonSearch/src/com/example/amazonsearch  line 15 Java Problem 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:42:35.250

您的可搜索有两个右括号。尝试这个

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_label"
    android:hint="@string/search_hint" >
</searchable> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:43:50.833

您的 XML 格式不正确。检查 XML 中的错误。有一个额外的关闭>。您似乎没有为您的 XML 元素提供 ID。

# c# - GridView 编辑上的行更新

> ID：16134044
> 
> 赞同：0
> 
> 时间：2013-04-21T17:26:59.597
> 
> 标签：c#, asp.net, list, gridview, datatable

我使用此代码返回`DataTable`：

```
public static DataTable ListBooks(this List<classes.Book> objs)
    { 
        DataTable table = new DataTable();

        table.Columns.Add("id");
        table.Columns.Add("name");
        table.Columns.Add("dewey");
        table.Columns.Add("subject");
        table.Columns.Add("reg");
        table.Columns.Add("pub");
        var values = new object[6];
        if (objs != null)
            foreach (classes.Book item in objs)
            {
                values[0] = item.Id;
                values[1] = item.Name;
                values[2] = item.Dewey;
                values[3] = item.Subject;
                values[4] = IntToDateTime(item.RegDate);
                if (item.PubDate != null)
                    values[5] = IntToDateTime(item.PubDate);
                else
                    values[5] = "";
                table.Rows.Add(values);
            }
        return table;
    } 
```

以及将此代码提供给`GridView`：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        DataTable dt = Converter.ListBooks(new classes.Book().GetAll());
        Session["dt"] = dt;
        res.DataSource = dt;
        res.DataBind();

    } 
```

`aspx`：

```
<asp:GridView ID="res" runat="server" CellPadding="4" ForeColor="#333333" 
    GridLines="None" AutoGenerateColumns="False" Width="965px" 
    OnRowEditing="res_RowEditing"  OnRowCancelingEdit="res_RowCancelingEdit" 
    OnRowUpdating="res_RowUpdating"
    OnPageIndexChanging="res_PageIndexChanging" AllowPaging="True" >
    <AlternatingRowStyle BackColor="White" />
    <Columns>
        <asp:CommandField DeleteText="del" HeaderText="           " 
            ShowDeleteButton="True" />
        <asp:CommandField EditText="edit" HeaderText="                             " 
            ShowEditButton="True" />
        <asp:BoundField DataField="reg" HeaderText="reg date" ReadOnly="true">
        <HeaderStyle Wrap="False" />
        </asp:BoundField>
        <asp:BoundField DataField="pub" HeaderText="pub date" ReadOnly="true"/>
        <asp:BoundField DataField="subject" HeaderText="subject" />
        <asp:BoundField DataField="dewey" HeaderText="dewey" />
        <asp:BoundField DataField="name" HeaderText="title" />
    </Columns>
    <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
    <RowStyle BackColor="#FFFBD6" ForeColor="#333333" HorizontalAlign="Center" />
    <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
    <SortedAscendingCellStyle BackColor="#FDF5AC" />
    <SortedAscendingHeaderStyle BackColor="#4D0000" />
    <SortedDescendingCellStyle BackColor="#FCF6C0" />
    <SortedDescendingHeaderStyle BackColor="#820000" />
</asp:GridView> 
```

以及此行更新代码：

```
 protected void res_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        //Retrieve the table from the session object.
        DataTable dt = (DataTable)Session["dt"];
        GridViewRow row =res.Rows[e.RowIndex];
        res.Visible = false;
        *dt.Rows[row.DataItemIndex]["name"] = ((TextBox)(row.Cells[1].Controls[0])).Text;
        dt.Rows[row.DataItemIndex]["dewey"] = ((TextBox)(row.Cells[2].Controls[0])).Text;
        dt.Rows[row.DataItemIndex]["subject"] = ((TextBox)(row.Cells[3].Controls[0])).Text;
        res.DataBind();
    } 
```

但是在更新行时，此错误发生在上面带有 * 的代码中：

> 无法将“System.Web.UI.WebControls.DataControlLinkBut​​ton”类型的对象转换为“System.Web.UI.WebControls.TextBox”类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:48:06.597

`Cells`的索引是错误的；因为当您要访问`Cells`第一个索引时包含编辑和删除`LableButton`，所以：

```
 dt.Rows[row.DataItemIndex]["name"] = ((TextBox)(row.Cells[6].Controls[0])).Text
 dt.Rows[row.DataItemIndex]["dewey"] = ((TextBox)(row.Cells[5].Controls[0])).Text;
 dt.Rows[row.DataItemIndex]["subject"] = ((TextBox)(row.Cells[4].Controls[0])).Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:16:19.273

尝试这个：

```
 {
    DataTable dt = (DataTable)Session["dt"];
    GridViewRow row =res.Rows[e.RowIndex];
    res.Visible = false;
    dt.Rows[row.DataItemIndex]["name"] = ((LinkButton)(row.Cells[1].Controls[0])).Text;
    dt.Rows[row.DataItemIndex]["dewey"] = ((TextBox)(row.Cells[2].Controls[0])).Text;
    dt.Rows[row.DataItemIndex]["subject"] = ((TextBox)(row.Cells[3].Controls[0])).Text;
    res.DataBind();
} 
```

# django - 如何获取 Django 中所有视图的默认数据集？

> ID：16134049
> 
> 赞同：0
> 
> 时间：2013-04-21T17:27:29.390
> 
> 标签：django

假设我有一个项目列表（比如类别），需要在我的基本模板的标题栏中显示。

基本模板将有一个内容块，这样不同的视图将提供不同的内容。问题是我不想让所有视图都将类别列表返回到页面。这将导致维护问题。

有没有办法让所有视图都返回一个特定的对象列表，这样我就不需要在响应的上下文字典中添加它了？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:46:20.620

您可以为此使用[上下文处理器](https://docs.djangoproject.com/en/1.5/ref/templates/api/)，但最好的选择可能是使用[包含标签](https://docs.djangoproject.com/en/1.5/howto/custom-template-tags/)来呈现块。

# c# - 动态绑定 MenuItem

> ID：16134050
> 
> 赞同：1
> 
> 时间：2013-04-21T17:27:34.710
> 
> 标签：c#, .net, wpf, xaml

我正在尝试`MenuItem`动态绑定。

我有`public List<string> LastOpenedFiles { get; set; }`是我的数据源。我尝试运行的命令是`public void DoLogFileWork(string e)`

```
<MenuItem Header="_Recent..."
          ItemsSource="{Binding LastOpenedFiles}">
  <MenuItem.ItemContainerStyle>
    <Style TargetType="MenuItem">
      <Setter Property="Header"
              Value="What should be here"></Setter>
      <Setter Property="Command"
              Value="What should be here" />
      <Setter Property="CommandParameter"
              Value="What should be here" />
    </Style>
  </MenuItem.ItemContainerStyle>
</MenuItem> 
```

我希望在每个条目`LastOpenedFiles`上单击它以 `DoLogFileWork`使用我单击的条目值运行。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:40:21.303

```
<Setter Property="Header" Value="What should be here"></Setter> 
```

没什么，你已经在上面设置了`_Recent...`

```
<Setter Property="Command" Value="What should be here"/>
<Setter Property="CommandParameter" Value="What should be here"/> 
```

您使用的是 MVVM 方法吗？如果是这样，您将需要`ICommand`在 Window/Control 绑定到的 ViewModel 上公开，请查看[本文](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)`RelayCommand`中提到的内容（或者我相信在 VS2012 中是本机的）。

这是您在 VM 中设置的那种东西：

```
 private RelayCommand _DoLogFileWorkCommand;
    public RelayCommand DoLogFileWorkCommand {
        get {
            if (null == _DoLogFileWorkCommand) {
                _DoLogFileWorkCommand = new RelayCommand(
                    (param) => true,
                    (param) => { MessageBox.Show(param.ToString()); }
                );
            }
            return _DoLogFileWorkCommand;
        }
    } 
```

然后在您的 Xaml 中：

```
<Setter Property="Command" Value="{Binding ElementName=wnLastOpenedFiles, Path=DataContext.DoLogFileWorkCommand}" />
<Setter Property="CommandParameter" Value="{Binding}"/> 
```

因此，在这里，您将 绑定`Command`到`MenuItem`上面`DoLogFileWorkCommand`声明的，并`CommandParameter`绑定到 MenuItem 绑定到的 List 中的字符串。

# android - Android客户端套接字正在连接但服务器套接字不接受？

> ID：16134055
> 
> 赞同：1
> 
> 时间：2013-04-21T17:27:59.147
> 
> 标签：android, sockets, client-server, client

我正在尝试通过 wifi 连接两个 android 设备并发送一些数据。在客户端，套接字显示已连接，但服务器并未提前接受。我什至不确定这怎么可能。下面是我的服务器和客户端代码。我已经使用在其中一台设备上运行的 wifi 热点连接了这两个设备。

服务器端：

```
 try
    {
          ServerSocket servsock = new ServerSocket(4149);

              Log.d("VR","Waiting");
                text.setText("waiting"); //code reaching upto here

              Socket sock = servsock.accept();
              //System.out.println("Accepted connection11 : " + sock);
              text.setText("this is acc"+servsock); 
              //Log.d("VR","Accepted");
                text.setText("accepted");

           // receive file
                byte [] mybytearray  = new byte [filesize];
                InputStream is = sock.getInputStream();
                FileOutputStream fos = new FileOutputStream("/sdcard/WebOffice.jpg"); // destination path and name of file
                BufferedOutputStream bos = new BufferedOutputStream(fos);
                bytesRead = is.read(mybytearray,0,mybytearray.length);
                current = bytesRead;

                do {
                   bytesRead =
                      is.read(mybytearray, current, (mybytearray.length-current));
                   if(bytesRead >= 0) current += bytesRead;
                } while(bytesRead > -1);

                bos.write(mybytearray, 0 , current);
                bos.flush();

                long end = System.currentTimeMillis();
                System.out.println(end-start);
                bos.close();

              sock.close();

              Log.d("VR","Socket closed");

                  Log.d("VR","image should be loaded by now");
                    text.setText("image should be loaded by now");

                Intent i  = new Intent(this,ImageDisplay.class);
                startActivity(i);

    }
    catch (Exception e) {
        // TODO: handle exception
    } 
```

客户端：

尝试 {

```
 ThreadPolicy tp = ThreadPolicy.LAX;
                    StrictMode.setThreadPolicy(tp);
                    ip = et.getText().toString();
                    sock = new Socket("192.168.43.182",4149); 

                    status.setText("connecting");
                    status.setText("connected"+sock);

                    System.out.println("Connecting...");

                     // sendfile
                          File myFile = new File (selectedImagePath); 
                          byte [] mybytearray  = new byte [(int)myFile.length()];
                          FileInputStream fis = new FileInputStream(myFile);
                          BufferedInputStream bis = new BufferedInputStream(fis);
                          bis.read(mybytearray,0,mybytearray.length);
                          OutputStream os = sock.getOutputStream();
                          System.out.println("Sending...");
                          os.write(mybytearray,0,mybytearray.length);
                          os.flush();

                        sock.close();

                        //Intent i  = new Intent(Sender.this,ImageReceive.class);
                        //startActivity(i);
                } catch (UnknownHostException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:13:49.330

您自己的评论说代码在接受后到达行，所以我不知道您在问什么。但是，您的复制循环应如下所示：

```
while ((count = in.read(buffer)) >= 0)
{
  out.write(buffer, 0, count);
} 
```

在写入任何输出之前，没有理由通过将所有输入读入一个巨大的缓冲区或 ByteArrayInputStream 来引入延迟和浪费内存。“缓冲区”可以是任何合理的大小，例如 2k。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:55:52.543

我设法解决了这个问题..没有服务器IP地址开始..由于某种原因android 4.2没有将套接字绑定到设备IP地址...当我尝试在姜饼上运行相同的代码时它工作了..我得出的结论是果冻豆不再支持套接字编程..可能是谷歌强迫我们使用 wifidirect api 来实现临时网络而不是服务器客户端编程..

# java - mvn eclipse:eclipse 不会在 Mac OS X 中下载其他依赖项

> ID：16134056
> 
> 赞同：0
> 
> 时间：2013-04-21T17:28:08.133
> 
> 标签：java, macos, maven

当我在 Windows 中运行相同的命令 (mvn eclipse:eclipse) 时，它会获取依赖 jar 的所有子依赖。在 Mac 中，它没有得到它们。使用相同的 pom.xml 文件。

Apache Maven 3.0.3 (r1075438; 2011-03-01 01:31:09+0800)
Maven 主页：/usr/share/maven
Java 版本：1.6.0_43，供应商：Apple Inc.
Java 主页：/System/Library/ Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
默认语言环境：en_US，平台编码：MacRoman
操作系统名称：“mac os x”，版本：“10.8.3”，arch：“x86_64”，家族：“mac”

# c++ - C++静态分配双端队列实现

> ID：16134057
> 
> 赞同：5
> 
> 时间：2013-04-21T17:28:17.950
> 
> 标签：c++, templates, stl, embedded, containers

STL有[deque实现](http://www.cplusplus.com/reference/deque/deque/)，Boost [deque实现](http://www.boost.org/doc/libs/1_50_0/libs/fusion/doc/html/fusion/container/deque.html)；但是它们都使用了序列容器的 STL 方式（使用分配器进行动态分配）。

我正在寻找一种可靠、快速且静态分配的双端队列实现。看起来像这样：

```
template<typename T, unsigned int S>
class StaticDeque
{
   T m_elements[S];
}; 
```

所以所有元素都是静态分配的。

注意 1：我已经有了基于 STL 的解决方案（使用自定义分配器，它为向量和双端队列静态分配数据），但我正在寻找更好的解决方案（更低的执行时间）。

注意2：我需要静态分配的内存，因为我在内存中的预定义（快速访问）区域中处理数据。所以对象会这样声明：`#pragma DATA_SECTION("fast_memory")` `StaticDeque<int, 10> payloads;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:28:50.963

您可以使用 Howard Hinnant 的[堆栈分配器，它通过](http://howardhinnant.github.io/stack_alloc.html)[修改后的分配器](http://howardhinnant.github.io/short_alloc.h)重用现有`std::deque`实现。您可以为分配器的构造函数提供任何内存，包括一个所谓的 arena 对象，它在堆栈上保存一个字符数组。您还可以通过对 arena 类进行少量修改来使用包含堆上静态分配的内存的 arena 对象。

但是请注意，目前它不是 100% 静态方案，因为当 arena 对象持有的内存量用尽时，`::operator new`会调用 来在堆上分配额外的内存。也许在具有运行时大小的数组的 C++14 中，这可以得到缓解。目前，只需确保为您的`std::deque`（基于分析您的应用程序）预先分配和保留足够的内存。

优点是您可以将此分配器与任何 STL 容器一起使用，并且您可以只专注于内存问题，而不必担心让容器正确和高效。

# javascript - 在 DC 中为 D3 绘制多维

> ID：16134058
> 
> 赞同：1
> 
> 时间：2013-04-21T17:28:18.197
> 
> 标签：javascript, d3.js, dc.js

我想使用 dc.js 制作两个图我的数据与多个会话相关（每个会话通常发生在单独的一天）。每个会话都有多个练习，这些练习根据各种参数进行评分。

地块：

1.  选择型图。我绘制所有会话（按时间或会话 ID），然后使用过滤器允许用户选择一个范围。
2.  聚合型图。这将显示所选会话中所有锻炼参数数据的平均值。

这个想法是用户可以更改所选范围并寻找性能变化的趋势。

我的 json 格式数据如下所示：

```
 "Data": [
        {
            "excerciseId": 1,
            "startTime": "01-Jan-2013 10:10:00",
            "stopTime": "01-Jan-2013 10:13:00",
            "numberReps": 11,
            "power": 6.3345681,
            "control": 4.180355137,
            "stability": 0.4893870991,
            "rate": 4.375298413,
            "session": 1,
        },
        {
            "excersiseId": 2,
            "startTime": "01-Jan-2013 10:30:00",
            "stopTime": "01-Jan-2013 10:33:00",
            "numberReps": 12,
            "power": 5.118183368,
            "control": 9.957258023,
            "stability": 9.752985592,
            "rate": 3.202822695,
            "session": 1,
        },
        {
            "excersiseId": 1,
            "startTime": "02-Jan-2013 10:30:00",
            "stopTime": "02-Jan-2013 10:33:00",
            "numberReps": 4,
            "power": 5.597765864,
            "control": 4.512012222,
            "stability": 8.563329462,
            "rate": 7.23380183,
            "session": 2,
        },
        ...
        ...
        ...] 
```

但是，我将它重新组织成一个扁平结构，以便与交叉过滤器很好地配合使用。

我创建了一个这样的组和维度：

```
var sessionDimension = ndx.dimension(function(d) { return d.session; });
var numRepsBySession = sessionDimension.group().reduceSum(function(d) { return d.numReps; }); 
```

我有一个很好的条形图，如下所示：

```
var sessionsByDateBarChart = dc.barChart("#sessions-By-Date-Bar-Chart");
    sessionsByDateBarChart.width(500)
    .height(150)
    .dimension(sessionDimension)
    .group(numRepsBySession)
    .gap(1)
    .x(d3.scale.linear().domain([0, 5])) 
```

我的问题是制作一个图表来显示所选会话的性能摘要。我真正想要的是`dc.rowChart`绘制功率、控制、稳定性的平均值。我对如何组织数据感到困惑。如何`reduceSum`在多个维度上进行分组？我的图表需要有多个维度，但权力、控制等不能分组，因为它们不是同一事物/单位？

我确信我在组织我的数据时遗漏了一个技巧。. . 谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T08:59:06.207

您可以[融合](https://github.com/jrideout/melt.js)您的数据以创建一个“变量”或“指标”列，您可以从中创建一个维度，然后为汇总统计信息执行自定义分组归约。

# mysql - cakephp 和 PDO 限制错误

> ID：16134059
> 
> 赞同：0
> 
> 时间：2013-04-21T17:28:18.863
> 
> 标签：mysql, cakephp, pdo

大家好，我有一个在 cakephp 中开发的网站，我在 pdo 中有一个查询，我想在其中插入一个限制值。我尝试过这种模式：

```
$max_result = 10;
$search = "test";
$product_alias = $this->ProductAlias->query(
'SELECT DISTINCT * 
   FROM product_aliases 
   WHERE product_aliases.alias 
   LIKE :search LIMIT :limit_search'
 ,array('search' => '%'.$search.'%','limit_search' => intval(trim($max_result)))
); 
```

我也试过：

```
...
WHERE product_aliases.alias 
  LIKE :search 
  LIMIT :limit_search'
,array('search' => '%'.$search.'%','limit_search' => intval($max_result))); 
```

和

...

```
WHERE product_aliases.alias 
  LIKE :search 
  LIMIT :limit_search'
,array('search' => '%'.$search.'%','limit_search' => $max_result)); 
```

但总是给我这个错误： `You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '10' at line 1`

我已经看到有绑定，但我不知道如何应用于这种情况。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:34:43.320

不确定 CakePHP API，但你可以试试这个：

```
$product_alias = $this->ProductAlias->prepare('SELECT DISTINCT * 
    FROM product_aliases 
    WHERE product_aliases.alias LIKE :search 
    LIMIT :limit_search');
$product_alias->bindParam( 'search', '%'.$search.'%', PDO::PARAM_STR );
$product_alias->bindParam( 'limit_search', (int) intval(trim($max_result)), PDO::PARAM_INT ); 
```

* * *

在检查 CakePHP 的文档时，他们也提供`PDOStatement`了 s：[http ://api.cakephp.org/2.2/class-PDOStatement.html](http://api.cakephp.org/2.2/class-PDOStatement.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:17:17.377

你**不必**做这一切。（你**不应该这样**做）。手动编写所有查询基本上会使整个框架无用。

阅读手册的这一部分[检索数据](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-all)

要在 CakePHP 中检索您的数据，请使用它；

```
$product_alias  = $this->ProductAlias->find('all', array(
    'conditions' => array(
        'ProductAlias.alias LIKE' => '%' . $search . '%',
    ),
    'limit' => $max_result
)); 
```

# css - 链接到 div 的 ID 从 div 的顶部下方开始？

> ID：16134061
> 
> 赞同：0
> 
> 时间：2013-04-21T17:28:31.367
> 
> 标签：css, html, href

我有一个通过 'href="#divId"' 链接到的 div，而不是链接到 div 的顶部，它下降了大约 100 像素。我知道它从 div 的顶部下方开始，因为 div 的背景延伸到页面链接的上方。这是一个已知问题吗？

```
 #homepage_aboutstrip {
        background:url('home/images/gradient-about-background.png');
        background-repeat:repeat-x;
        background-size: auto 100%;
        position:absolute;
        margin-top:200px;
        width:100%;
        height:1050px;
        z-index:1;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:14:36.813

我在 IE10、IE9、FF 和 Chrome 中尝试了以下代码，但没有 100px 有趣的业务......

```
 <!DOCTYPE html>
    <html>
    <head>
        <style>
             #homepage_aboutstrip {
               background:url('home/images/gradient-about-background.png');
               background-repeat:repeat-x;
               background-size: auto 100%;
               position:absolute;
               margin-top:200px;
               width:100%;
               height:1050px;
               z-index:1;
               border:1px solid red; /*threw this in to see if the border aligned w/text, and it does*/
               }
        </style>
    </head>

    <body>
    <a style="clear:both;" href="#homepage_aboutstrip">ABOUT STRIP</a>

    <div style="height:500px;">
    The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog 
    </div>

    <div id="homepage_aboutstrip">
    II - The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog The quick brown fox jumped over the lazy dog 
    </div>
    </body>
    </html> 
```

我的代码与您的代码唯一不同的变量是我的代码中没有 gradient-about-background.png。.png 可能存在大小问题，在 css 中未考虑到该问题。

# java - Java：制作基于网格的棋盘游戏

> ID：16134062
> 
> 赞同：1
> 
> 时间：2013-04-21T17:28:33.200
> 
> 标签：java, grid, imageview, javafx

我需要制作一个棋盘游戏，用户可以在其中选择图像并将其用作棋盘。图像部分很简单，但我需要帮助来了解如何根据用户输入制作大小相等的网格。例如，可能有 10x10 网格或 50x50。

我目前的方法是让 StackPane 在 ImageView 上有一个 GridPane。所有这些都在 ScollPane 中，因此图像可以尽可能大。

还有其他更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:13:39.307

是的，为您的电路板使用[GridPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/GridPane.html)。

* * *

我在[井字游戏中](https://gist.github.com/jewelsea/5115901)使用了相同的方法——效果很好。

```
class BoardSkin extends GridPane {
  BoardSkin(Board board) {
    getStyleClass().add("board");

    for (int i = 0; i < 3; i++) {
      for (int j = 0; j < 3; j++) {
        add(board.getSquare(i, j).getSkin(), i, j);
      }
    }
  }
} 
```

* * *

正如您在问题中提到的那样，您可以使用[StackPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/StackPane.html)和[ImageView](http://docs.oracle.com/javafx/2/api/javafx/scene/image/ImageView.html)分层在您的板网格正方形后面，但这并不是绝对必要的。

相反，我会使用之前链接的井字游戏中的一些更新的 css。要将棋盘图像分层放在网格方块后面，请将棋盘图像设置为网格的背景图像。

```
.board {
  -fx-hgap: 10px;
  -fx-vgap: 10px;
  -fx-background-image: url('http://www.woodge.com/books/maps/map_Narnia.jpg');
  -fx-background-size: cover;
  -fx-background-position: center;
}

.square {
  -fx-padding: 10px;
  -fx-background-color: rgba(100, 100, 100, 0.4);
} 
```

![桌游背景](https://i.stack.imgur.com/TQOdo.png)

# lisp - 这个简单的“buggy-sum”代码有什么问题？

> ID：16134065
> 
> 赞同：1
> 
> 时间：2013-04-21T17:29:02.917
> 
> 标签：lisp, scheme

我明天要考试，这是我做错的作业题。我已经被困了一段时间了，有人可以告诉我解决方案是什么吗？

问题是，您如何修复此代码：

```
(define (buggy-sum lst)
  (+ (car lst) (buggy-sum (cdr lst))))

(buggy-sum (list 1 2 3 4)) 
```

我的解决方案如下，但它是错误的：

```
(define (buggy-sum lst)
  (cond [(null? lst) '()]
        [else (+ (car lst) (buggy-sum (cdr lst)))]))

(buggy-sum (list 1 2 3 4)) 
```

有人可以告诉我正确的解决方案是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T17:33:41.790

你的边缘情况是错误的。如果列表为空，您将返回另一个空列表，并且您应该返回一个 int。只需替换`[(null? lst) '()]`为`[(null? lst) 0]`.

# php - 子查询在 php 中返回超过 1 行

> ID：16134067
> 
> 赞同：0
> 
> 时间：2013-04-21T17:29:05.250
> 
> 标签：php, mysql

```
INSERT INTO orders( Copy_ID, CustID ) 
VALUES (
(

SELECT Copy_ID
FROM cart
), (

SELECT c.Cust_ID
FROM customers AS c, accounts AS a, cart AS ca
WHERE c.Cust_ID = a.Cust_ID
AND a.Username = ca.Customer
)
) 
```

**我想通过 php 运行这个查询，但是 mysql 返回超过 1 行**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:32:46.927

因为当你在做

```
SELECT Copy_ID
FROM cart 
```

查询返回所有`Copy_ID`存储的值，`cart`同时，下一个查询也返回一个集合。

MySQL 没有找到应该插入到`orders`表中的一对值。您将不得不找到一个查询，其中您将`INSERT`一些特定的值集放入表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:34:26.963

试试这个：

```
INSERT INTO `orders` (`Copy_ID`,`Cust_ID`)
    SELECT `cart`.`CopyID`, `customers`.`CustID`
        FROM `customers`
        JOIN `accounts` USING (`Cust_ID`)
        JOIN `cart` ON `accounts`.`Username`=`cart`.`Customer` 
```

# shell - 用于回答 SSH 密钥生成问题的 Bash shell 脚本

> ID：16134068
> 
> 赞同：-1
> 
> 时间：2013-04-21T17:29:09.907
> 
> 标签：shell, scripting, public-key-encryption, ssh-keys, openssh

我想回答出现在 bash shell 中的问题

前任：

在脚本

```
#!/bin/bash
ssh-keygen -t rsa

#it will appear a question >> Enter file in which to save the key 
# (/root/.shh/id_rsa) so how  can i read answer from the user(which is the path)
# and **enter it to be the answer of the question. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:06:52.703

尝试这样做（无需使用`STDIN`）：

```
rm -f ~/.ssh/id_rsa*
ssh-keygen -q -t rsa -P MyOwnPassPhrase -f ~/.ssh/id_rsa 
```

你有没有读过

```
man ssh-keygen 
```

? =)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-24T19:21:32.157

如果您已经知道要存储输出的文件的名称，则可以在脚本的命令行中指定，如下所示：

```
ssh-keygen -t rsa -f keyfile 
```

否则，您可以要求用户指定名称，否则使用提供的参数。如果他们没有在命令行上传递名称，此方法将允许他们指定名称。（用法是：你的脚本名密钥文件名）

```
if [ $# -eq 0 ]; then
        read -p "Enter filename for key: " keyfile
        ssh-keygen -t rsa -f $keyfile  
else
        ssh-keygen -t rsa -f $1 
fi 
```

# excel - EXCEL VBA，更改单元格组和 Worksheet_Change 事件

> ID：16134069
> 
> 赞同：2
> 
> 时间：2013-04-21T17:29:13.420
> 
> 标签：excel, worksheet, vba

我怀疑这并不是那么复杂，但我没有太多运气找到合适的谷歌条款......所以我来找专家！

所以我正在尝试实现一个`Worksheet_Change`事件。这非常简单，我基本上只想做以下事情：

如果 C 列中的值发生变化，并且 D 中的值（在该行中）具有特定格式（NumberFormat = "$ 0.00"），则 E 列（在该行中）是这两个值的乘积。简单的。实际上，我只想要在 E 列中使用公式的 VBA 等效项。这是我正在使用的代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)

If Target.Column = 3 And Target.Value <> "" Then
    If Target.Offset(0, 1).NumberFormat = "$ 0.00" Then
        Target.Offset(0, 2).Value = Target.Value * Target.Offset(0, 1).Value
        End If
        End If   
end sub 
```

当我尝试将多个值粘贴到 c 列的多行中时，我的问题出现了。即，我将一列数据（> 1 行）复制到 C 中，但出现类型不匹配错误。我将做出巨大的飞跃，因为它不能很好地处理这个问题，因为“目标”旨在成为单个单元格而不是一个组。我希望有一种简单的方法来处理这个问题，每次工作表上的单元格或其他东西发生变化时都不会涉及一些疯狂的循环。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:49:01.413

这是你正在尝试的吗？

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim aCell As Range

    On Error GoTo Whoa

    Application.EnableEvents = False

    If Not Intersect(Target, Columns(3)) Is Nothing Then
        For Each aCell In Target
            If aCell.Value <> "" And aCell.Offset(0, 1).NumberFormat = "$ 0.00" Then
                aCell.Offset(0, 2).Value = aCell.Value * aCell.Offset(0, 1).Value
            End If
        Next
    End If

Letscontinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume Letscontinue
End Sub 
```

您可能还想阅读[这个](https://stackoverflow.com/questions/13860894/ms-excel-crashes-when-vba-code-runs/13861640#13861640)？

虽然您只想捕获 Col C 粘贴，但这里还有另一种情况，用户在多列中粘贴（其中一个是 Col C）

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim aCell As Range

    On Error GoTo Whoa

    Application.EnableEvents = False

    If Not Intersect(Target, Columns(3)) Is Nothing Then
        If Not Target.Columns.Count > 1 Then
            For Each aCell In Target
                If aCell.Value <> "" And aCell.Offset(0, 1).NumberFormat = "$ 0.00" Then
                    aCell.Offset(0, 2).Value = aCell.Value * aCell.Offset(0, 1).Value
                End If
            Next
        Else
            MsgBox "Please paste in 1 Column"
        End If
    End If

Letscontinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume Letscontinue
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:20:49.090

本着完整性和协作的精神，我在这里发布了 Siddharth Rout 方法的变体；不同之处在于，这不依赖于“要作用的单元格”都在一个列中。这使它更干净一些，并且更容易适应其他场景。

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim aCell As Range
    Dim onlyThese As Range   ' collection of ranges that, if changed, trigger some action
    Dim cellsToUse As Range  ' cells that are both in "Target" and in "onlyThese"

    On Error GoTo Whoa

    Application.EnableEvents = False

    Set onlyThese = Range("C:C") ' in this instance, but could be anything - even a union of ranges
    Set cellsToUse = Intersect(onlyThese, Target)
    If cellsToUse Is Nothing Then GoTo Letscontinue

    ' loop over cells that were changed, and of interest:
    For Each aCell In cellsToUse
        If aCell.Value <> "" And aCell.Offset(0, 1).NumberFormat = "$ 0.00" Then
            aCell.Offset(0, 2).Value = aCell.Value * aCell.Offset(0, 1).Value
        End If
    Next

Letscontinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume Letscontinue
End Sub 
```

# android - Android中的Hammer.js捏事件

> ID：16134071
> 
> 赞同：1
> 
> 时间：2013-04-21T17:29:23.963
> 
> 标签：android, jquery-mobile, pinch, hammer.js

在 jquery mobile 上使用 Hammer.js 时，它的“Pinch”事件在 Android 中运行不佳，但在 iOS 中运行良好。

我正在开发像 Gmail 这样的移动邮件系统，因此电子邮件的详细信息页面将使用 jquery-mobile 和hammer.js 放大/缩小。

此外，还需要启用垂直滚动动作，包括应用 Hammer 的 div 区域。

下面是示例代码。

```
// Pinch Event
var ham = $('.mail_body').hammer({
    drag: true,
    drag_block_vertical: false,
    drag_block_horizontal: false,
    drag_lock_to_axis: false, 
    prevent_default: false,
    prevent_mouseevents: true,
    show_touches: false,
    stop_browser_behavior: {},
    swipe: false,
    touch: true
}); 
```

谁能帮我？

预先感谢您的帮助。

# c++ - 从字符串中删除一个空格

> ID：16134074
> 
> 赞同：0
> 
> 时间：2013-04-21T17:29:37.180
> 
> 标签：c++, string, spaces

我试图编写一个函数来获取带空格的字符串并返回不带空格的字符串。

例如：

```
str = "   a  f  "; 
```

将被替换为“af”；

我的函数不起作用，它将字符串替换为：“af f”。

这是我的功能：

```
void remove_space(string& str) {
    int len = str.length();
    int j = 0, i = 0;
    while (i < len) {
        while (str.at(i) == ' ') i++;
        str.at(j) = str.at(i);
        i++;
        j++;
    }
}

int main ()
{
string str;
    getline(cin, str);
    remove_space(str);
    cout << str << endl;
return 0;
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:38:46.220

## 边界检查！

您忘记检查内部循环中的边界访问：`while (str.at(i) == ' ') i++;`.

我重写了代码：

```
void remove_space(string& str)
{
    int len = str.length();
    int j = 0;

    for (int i = 0; i < len;)
    {
        if (str.at(i) == ' ')
        {
            i++;
            continue;
        }

        str.at(j++) = str.at(i++);
    }
    str.resize(j);
} 
```

此外，您可以使用以下代码删除空格（建议在[cppreference.com](http://en.cppreference.com/w/cpp/algorithm/remove)中）：

```
str.erase(std::remove(str.begin(), str.end(), ' '), str.end()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T17:40:02.757

如果可以使用[Boost](http://www.boost.org/doc/libs/1_35_0/doc/html/string_algo/usage.html#id1290573)，则可以执行以下操作：

```
#include<boost/algorithm/string.hpp>
...
erase_all(str, " "); 
```

否则，我会建议这个替代方案：

```
#include<cctype>
#include<algorithm>
...
str.erase(std::remove (str.begin(), str.end(), ' '), str.end()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T17:33:08.130

您可以使用久经考验的[erase remove idiom](http://en.wikipedia.org/wiki/Erase-remove_idiom) ，而不是实现自己的解决方案：

```
#include <string>
#include <algorithm>
#include <iostream>

int main()
{
  std::string s("a b c d e f g");
  std::cout << s << "\n";
  const char_to_remove = ' ';
  s.erase(std::remove(s.begin(), s.end(), char_to_remove), s.end() );
  std::cout << s << "\n";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T17:34:13.273

您需要在处理后调整字符串大小。例如在末尾添加一行`remove_space`：

```
str.resize(j); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-21T17:31:54.873

```
#include<cctype>
#include<algorithm>

bool my_isspace(char c) {
    return std::isspace(c);
}

str.erase(remove_if(str.begin(), str.end(), my_isspace), str.end()); 
```

应该做的工作。

* * *

关于你的功能

```
void remove_spaces(string& str)
{
    int len = str.length();
    int j = 0, i = 0;

    while (j < len) 
    {
        if (str.at(i) == ' ') {
          ++j;
        }
        str.at(i) = str.at(j);
        ++i;
        ++j;
    }

    // You are missing this
    str.erase(i,len);
} 
```

# django - SWIG：python 模块仅在部署到 Apache 时才会崩溃

> ID：16134077
> 
> 赞同：0
> 
> 时间：2013-04-21T17:29:44.010
> 
> 标签：django, apache, mod-wsgi, swig

这个问题很连贯，让我发疯。任何帮助表示赞赏！

我们有一些底层 C 代码，它们将被 Python 模块调用（Python 2.6 版，`Django`框架，1.4 版）。我们已经通过`SWIG`2.0.9 构建了 Python 绑定。我们已经从`python manage.py shell`提示中使用了它们。他们运作良好。

**如果我们运行`python manage.py runserver 0.0.0.0:8001`，一切仍然运行良好。但是当我们将应用程序部署为 Apache 虚拟主机时，Python 绑定突然失败（其他网页不使用 C 代码也可以）。它的网址类似于[http://hostname.com/basic](http://hostname.com/basic)**。这是我们的`conf`文件：

```
#Listen 80
<VirtualHost *:80>
  ServerName hostname.com/basic
  ServerAdmin caisj@example.com

  ProxyRequests Off
  <Proxy *>
    Order deny,allow
    Allow from all
  </Proxy>

  DocumentRoot /home/browser/BASIC/basic

  Alias /static/admin /home/browser/BASIC/_py/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/contrib/admin/static/admin
  Alias /static /home/browser/BASIC/basic/static

  WSGIScriptAlias /basic /home/browser/BASIC/basic/basic.wsgi
  ErrorLog /home/browser/BASIC/basic/log/basic.error.log

  <Directory /home/browser/BASIC/basic>
    <Files basic.wsgi>
      Order deny,allow
      Allow from all
    </Files>
  </Directory>

  LogLevel info
  CustomLog /home/browser/BASIC/basic/log/basic.access.log combined 
```

我们需要查询 C 代码两次。第一个仍然有效并返回正确的结果。但是第二次审判就崩溃了。代码停止并且没有返回任何内容。一些代码片段：

```
from some.basic import rmq       # this is the Python binding created by SWIG
class Maxi:
  @staticmethod
  @contextmanager
  def open(rmqfile):
    driver = None
    try:
      driver = Maxi(rmqfile)
      yield driver
    finally:
      if driver: driver.close()

  def __init__(self, rmqfile):
    with open(rmqfile) as f:
      self.rmqfile = yaml.load(f)
    self.handlers = dict()

  # The rmq.i:
  # int       rmq_query (rmq_track t, unsigned int p, unsigned int q);
  # rmq_track rmq_load (char filename[]);
  def query(self, chrom, start, end):
    h = rmq.rmq_load(self.rmqfile[chrom]))
    rs = rmq.rmq_query(h, start-1, end-1)       # It works and result is correct
    rs = rmq.rmq_query(h, start-1+1, end-1+1)   # !!! Crashes here !!!
    return rs

  def close(self):
      for h in self.handlers.itervalues():
          rmq.rmq_unload(h)

# ==== Django views code ====
driver = Maxi('yaml_config_file_to_load')
result.append(driver.query('chr1', 1, 100000) 
```

我猜这是由一些文件权限问题引起的。但是即使我将所有 Python 绑定文件都设置为 777，它在作为 Apache 虚拟主机工作时仍然会失败。

我确实尝试删除该`dirver.close()`声明，但仍然失败。在代码跟踪之后，`close()`永远不会调用该方法。

也许有一些配置会导致 python 绑定的生命周期管理不正确。但我无法查明原因。

请帮忙。非常感谢。

===================

更新：

阅读[http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Python_Simplified_GIL_State_API](http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Python_Simplified_GIL_State_API)后，我添加到我的`conf`文件中：

```
WSGISocketPrefix /var/run/wsgi
WSGIApplicationGroup %{GLOBAL}
WSGIPythonHome /home/browser/BASIC/_py
<VirtualHost *:80>
  ......
  WSGIApplicationGroup %{GLOBAL}
  WSGIDaemonProcess hostname.com/basic processes=2 threads=15 display-name=%{GROUP}
  WSGIProcessGroup hostname.com/basic
  ......
</VirtualHost> 
```

但它报告错误：

```
Premature end of script headers: basic.wsgi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:32:39.993

此处记录的 SWIG 问题的解决方案：

*   [http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Python_Simplified_GIL_State_API](http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Python_Simplified_GIL_State_API)

还要确保您阅读：

*   [http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html](http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:12:21.683

最后！经过大量搜索和尝试，我解决了这个问题。这是我的`conf`文件：

```
# Important! My http.conf does not contain this line. So Apache seems to 
#  load the mod_wsgi.so from somewhere else, which is unluckily not compatible 
#  with my C codes.
LoadModule wsgi_module modules/mod_wsgi.so
# Place to store file for socket communications. I created the folder manually.
WSGISocketPrefix /var/run/wsgi
<VirtualHost *:80>
  ......
  # My wsgi configuration file
  WSGIScriptAlias /basic /home/browser/BASIC/basic/basic.wsgi
  # Make the virtual host using only one Python sub interpreter.
  WSGIApplicationGroup %{GLOBAL}
  # Make it run under the daemon mode
  WSGIDaemonProcess hostname.com/basic processes=1 threads=15 display-name=%{GROUP} \
    python-path=/home/browser/BASIC/_py/lib/python2.6/site-packages
  WSGIProcessGroup hostname.com/basic
  ......
</VirtualHost> 
```

# ruby-on-rails - 如何获取我关注者的所有评论？

> ID：16134078
> 
> 赞同：0
> 
> 时间：2013-04-21T17:29:45.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用名为 `acts_as_commentable_with_threading`( [https://github.com/elight/acts_as_commentable_with_threading](https://github.com/elight/acts_as_commentable_with_threading) ) 和`acts_as_follower`( [https://github.com/tcocca/acts_as_follower](https://github.com/tcocca/acts_as_follower) )的 gem

到目前为止，一切正常。我所有的追随者和追随者都可以正常工作。

现在，我正在尝试获取所有关注用户的所有评论。所以我尝试了这个

```
@users = current_user.following_users
@comments = @users.comment_threads.order("updated_at DESC").page(params[:page]).per(10) 
```

但是，它返回此错误。

```
NoMethodError (undefined method `comment_threads' for #<ActiveRecord::Relation:0x0000000d1b7a58>): 
```

为什么以及如何解决这个问题？ `acts_as_commentable_with_threading`不支持数组对象？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:13:41.383

根据[代码](https://github.com/elight/acts_as_commentable_with_threading/blob/master/lib/acts_as_commentable_with_threading.rb#L37)，您可能需要这样的东西：

```
user_ids = current_user.following_users.map(&:id)
commentable = User.base_class.name.to_s
@comments = Comment.where(:user_id => user_ids, :commentable_type => commentable).order('created_at DESC') 
```

以上将获得一组 user_ids 的评论，而不仅仅是一个用户

# php - CakePHP：如何使用表单助手同时更新多条记录

> ID：16134085
> 
> 赞同：5
> 
> 时间：2013-04-21T17:30:31.390
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1

在模型测试的编辑页面上，我希望能够更新来自同一表单的所有相关（通过 hasMany）问题的“Questions.order”字段。

我已经准备[好书中关于 saveMany()/saveAll() 的 Cake book 章节](http://book.cakephp.org/2.0/en/models/saving-your-data.html)，我正在使用`Model.0.field syntax`但我不知道如何告诉 CakePHP*哪个*记录对应于*哪个*输入。`#`in是否应该`Model.#.field`对应于问题的 id 字段？这是我目前正在做的事情：

```
 echo $this->Form->create( 'Question', array('action'=>'order'));

$n = 0;
foreach ($questions_array as $question) : ?>
        <?php echo $this->Form->input('Question.'.$n.'.order' ); ?>
        <?php echo $this->Form->input('Question.'.$n.'.id', array('type'=>'hidden', 'value'=>$question['Question']['id']) ); ?>
        <input type="submit" value="Save" />
...
$n++;
endforeach;
$this->Question->Form->end(); 
```

表单提交并显示为保存，但更新的`order`值与正确的问题记录不对应。我究竟做错了什么？

**更新**：

这是`order`我的控制器中的操作：

```
public function admin_order() {
    $data = $this->request->data;
    $this->Question->saveAll($data['Question']);
    $this->Session->setFlash( "Order saved.");
    $this->redirect( $this->referer() );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:08:50.860

CakePHP 将所有具有相同“索引”的字段关联为数据库中的单个“记录”。'index'（即`0`in `Foo.0.id`）与记录的 'id'*没有*任何关系，它只是一个数字。

例如;

```
Foo.0.id   = 123
Foo.0.name = 'hello';
Foo.1.id   = 124
Foo.1.name = 'world'; 
```

正如我的答案开头所提到的，索引本身并不重要，这段代码将*完全*一样：

```
Foo.12345.id   = 123
Foo.12345.name = 'hello';
Foo.54321.id   = 124
Foo.54321.name = 'world'; 
```

只要*同一*记录的字段具有*相同*的“索引”，CakePHP 就会理解它们属于“一起”。

提交此数据并使用保存时；

```
$this->Foo->saveMany($this->data['Foo']); // Just $this->data will probably work as well 
```

CakePHP 通过`Foo`模型更新两行；

表'foos'；

```
id     name
------------------------
123    hello
124    world 
```

您的代码似乎对每一行使用*相同*的“id”（`$qset['Qset']['id']`），这可能不是更新这些记录的正确 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T16:15:06.443

```
As we can see at CakePHP Book, the instruction is:

// Create: id isn't set or is null
$this->Recipe->create();
$this->Recipe->save($this->request->data);

// **Update**: id is set to a numerical value
$this->Recipe->id = 2;
$this->Recipe->save($this->request->data); 
```

> 考虑到 2014 年仍有人在寻找这个答案，您必须在
> **视图**中使用：/*（考虑到 $n 计数器）*/
> $this->input('Question.'.$n.'.order');
> $this->input('问题。'.$n.'.id');
> **控制器**：$this->Question->updateAll->($this->request->data['Question']);

# javascript - Javascript 新手 - 处理 DRY 问题

> ID：16134087
> 
> 赞同：0
> 
> 时间：2013-04-21T17:30:45.297
> 
> 标签：javascript, jquery

如果可能的话，任何人都可以指出如何缩短此代码的方向吗？

```
if($(".row-member0").is(":visible")){
    if($("#TeamMember_0_name").val()==="") i=false;
    if($("#TeamMember_0_email").val()==="") i=false;
    if($("#TeamMember_0_phone").val()==="")i=false;
    if($("#TeamMember_0_birthdate").val()==="") i=false;
    if( !validateEmail($("#TeamMember_0_email").val())) { 
        i=false;
    }    
}

if($(".row-member1").is(":visible")) {
    if($("#TeamMember_1_name").val()==="") i=false;
    if($("#TeamMember_1_email").val()==="") i=false;
    if($("#TeamMember_1_phone").val()==="") i=false;
    if($("#TeamMember_1_birthdate").val()==="") i=false;
    if( !validateEmail($("#TeamMember_1_email").val())) { 
            i=false;
    }
}

if($(".row-member2").is(":visible")) {
    if($("#TeamMember_2_name").val()==="") i=false;
    if($("#TeamMember_2_email").val()==="") i=false;
    if($("#TeamMember_2_phone").val()==="") i=false;
    if($("#TeamMember_2_birthdate").val()==="") i=false;
    if( !validateEmail($("#TeamMember_2_email").val())) { 
        i=false;
    }
} 
```

我知道也许应该使用交互。只是不确定如何。

我想：

**1）在顶部元素上放置一个 .row-member 类，然后：**

```
$('.row-member input').each(
    function(index, value) {
        if($(this).val()==="") i=false; 
    }
); 
```

我可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T17:38:56.940

您可以使用[StartsWith](http://api.jquery.com/attribute-starts-with-selector/)选择器和[each()](http://api.jquery.com/jQuery.each/)来遍历您的类：

```
$("[class^='row-member']").each(function(index) {
    if($("#TeamMember_" + index + "_name").val()==="" || $("#TeamMember_" + index + "_email").val()==="" || $("#TeamMember_" + index + "_phone").val()==="" || $("#TeamMember_" + index + "_birthdate").val()==="" ||  !validateEmail($("#TeamMember_" + index + "_email").val())) { 
        i=false;
    } 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:32:36.403

我建议使用通用类而不是唯一类。这就是 ID 的用途。

如果你这样做，那么它可以像这样缩短：

```
i = $(".row-member:visible input").toArray()
                                  .every(function(el) {
                                       return el.value !== "";
                                   }); 
```

你需要一个补丁`.every()`。

* * *

如果您不想 patch `.every()`，那么您可以像这样使用 jQuery 来完成：

```
$(".row-member:visible input").each(function(_, el) {
                                        if (el.value === "") {
                                            i = false;
                                            return false; // to short circuit 
                                        }
                                    }); 
```

* * *

或者，假设`i`开始了`true`，你可以这样做：

```
$(".row-member:visible input").each(function(_, el) {
                                        return i = (el.value !== "");
                                    }); 
```

* * *

所有这三种技术都提供了短路功能，因此您无需在找到第一个空值后保留测试值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T17:34:24.887

```
if($(".row-member0").is(":visible")){
    if($("#TeamMember_0_name").val()==="" || $("#TeamMember_0_email").val()==="" || $("#TeamMember_0_phone").val()==="" || $("#TeamMember_0_birthdate").val()==="" ||  !validateEmail($("#TeamMember_0_email").val())) { 
        i=false;
    }    
} 
```

休息时做同样的事情

# css - 如何进行 sass-only 评论

> ID：16134088
> 
> 赞同：3
> 
> 时间：2013-04-21T17:30:49.427
> 
> 标签：css, sass

有没有办法发表`sass-only`评论`SASS`？你知道，所以输出`.css`文件没有那些注释

例如，

```
/* global variables */

$mainColor: #666;

/* Layout */
body {...} 
```

将输出

```
/* global variables */
/* Layout */
body {...} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T18:10:45.820

您可以考虑三个选项。

1) 使用以 开头的单行注释`//`，就像**heylookltsme**​​ 已经建议的那样：

```
// This comment will not be included 
// in the compiled css! 
```

*2) 使用压缩* [输出样式](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#output_style)编译 SASS 。那么传统`/* ... */`的注释将无法进入 CSS。

可以使用 vanilla SASS 编译不同的输出样式，但我也建议尝试[Compass](http://compass-style.org/help/)。

请注意，您可以通过以感叹号开头来覆盖输出样式并强制注释始终出现在生成的 CSS 代码中：

```
/*!I really want this to appear in CSS at all times.*/ 
```

3) 使用 Compass，您可以使 SASS 省略所有注释：两者`// ...`和`/* ... */`. 我已经在这个答案中解释了如何做到这一点：[https ://stackoverflow.com/a/15766439/901944](https://stackoverflow.com/a/15766439/901944)

不过，您应该有充分的理由这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T17:41:08.043

单行注释不会包含在编译的 css 中，使用 //

```
// This comment will not be included 
// in the compiled css! 
```

[http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#comments](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#comments)

# twitter-bootstrap - 在引导程序中填充

> ID：16134089
> 
> 赞同：11
> 
> 时间：2013-04-21T17:30:50.240
> 
> 标签：twitter-bootstrap, twitter-bootstrap-2

我使用引导程序：

```
<div id="main" class="container" role="main">
<div class="row">
    <div class="span6">
        <h2>Welcome</h2>
        <p>Hello and welcome to my website.</p>
    </div>
    <div class="span6">
        Image Here (TODO)
    </div>
</div> 
```

Main 也有灰色背景。页面背景为白色。我遇到的问题是文本正好在灰色背景的边缘。我想要一些填充，但是当我添加它时，图像跨度会转到下一行。

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-21T17:36:41.473

我没有使用过 Bootstrap，但我在 Zurb Foundation 工作过。我曾经在上面添加这样的空间。

```
<div id="main" class="container" role="main">
    <div class="row">

        <div class="span5 offset1">
            <h2>Welcome</h2>
            <p>Hello and welcome to my website.</p>
        </div>
        <div class="span6">
            Image Here (TODO)
        </div>
    </div> 
```

访问此链接：[http](http://getbootstrap.com/2.3.2/scaffolding.html) ://getbootstrap.com/2.3.2/scaffolding.html 并阅读部分：偏移列。

我想我知道你做错了什么。如果您将填充应用于`span6`这样的：

```
<div class="span6" style="padding-left:5px;">
    <h2>Welcome</h2>
    <p>Hello and welcome to my website.</p>
</div> 
```

这是错误的。您需要做的是向里面的元素添加填充：

```
<div class="span6">
    <h2 style="padding-left:5px;">Welcome</h2>
    <p  style="padding-left:5px;">Hello and welcome to my website.</p>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T17:50:43.400

如果对您有用，@Dawood 的建议很好。

如果您需要比这更多的微调，一种选择是在文本元素上使用填充，这是一个示例：http: [//jsfiddle.net/panchroma/FtBwe/](http://jsfiddle.net/panchroma/FtBwe/)

**CSS**

```
p, h2 {
    padding-left:10px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-15T19:44:02.520

各种类都内置了填充。

例如：

一个 asp.net 网络表单应用程序：

```
<asp:CheckBox ID="chkShowDeletedServers" runat="server" AutoPostBack="True" Text="Show Deleted" /> 
```

上面的这段代码会将“显示已删除”的文本放置在离复选框太近的地方，以至于我看到的东西很好看。

但是使用引导程序

```
<div class="checkbox-inline">
    <asp:CheckBox ID="chkShowDeletedServers" runat="server" AutoPostBack="True" Text="Show Deleted" />
</div> 
```

这创造了空间，如果你不想要文本加粗，那个 class=checkbox

Bootstrap 非常灵活，所以在这种情况下我不需要 hack，但有时你需要。

# jquery - 具有可变宽度的jQuery触摸滑块插件

> ID：16134091
> 
> 赞同：0
> 
> 时间：2013-04-21T17:31:22.753
> 
> 标签：jquery, plugins, jquery-plugins, slider

我花了大半个下午的时间在谷歌上搜索这个没有运气，所以不得不在这里问。

我正在寻找具有以下功能的 jQuery 滑块插件：

*   反应灵敏
*   触摸/ios友好
*   将允许可变宽度幻灯片

我在这里找到了一个接近我需要但不支持触摸的方法：http: [//jquery.lemmonjuice.com/plugins/slider-variable-widths.php](http://jquery.lemmonjuice.com/plugins/slider-variable-widths.php)

我目前正在处理的网站在这里：http: [//joeholt.co.uk/design/lilys-kitchen/](http://joeholt.co.uk/design/lilys-kitchen/)。这显示了最终结果的外观，但目前它不允许可变宽度幻灯片。我目前正在使用[http://bxslider.com/](http://bxslider.com/)。在一个完美的世界中，我也可以在那里放置 vimeo 嵌入，但我可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-04T14:57:47.693

This one should work too (variableWidth: true): [http://kenwheeler.github.io/slick/](http://kenwheeler.github.io/slick/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:39:18.263

[这个](http://flexslider.woothemes.com/)很好用！它也很好地支持触摸。

编辑：

使用[这个 jQuery touch swipe 插件](https://github.com/mattbryson/TouchSwipe-Jquery-Plugin)，下面的代码可能会起作用。

```
$('.slider-wrapper').swipe({
    swipeRight:function() {
        $('.bx-prev').click();
    },  
    swipeLeft:function() {
        $('.bx-next').click();
    }
}); 
```

我知道它很原始，但它可能只是完成这项工作。

# delphi - Delphi，如何使形状停止移动

> ID：16134093
> 
> 赞同：-3
> 
> 时间：2013-04-21T17:31:27.407
> 
> 标签：delphi, move, shape

我正在尝试使用 2 个形状和 2 个计时器使一个形状朝着另一个方向移动，但我真的看不到。我刚在想：

一开始，我会让形状 1 计算形状 2 的距离，然后朝它移动，这就是我所做的，我还添加了注释以帮助您理解代码，因为它有点令人困惑：

```
procedure TForm1.Timer1Timer(Sender: TObject);
begin
timer1.Interval:=100;           //set interval=200
                            //begin
if shape1.Left=shape2.Left then
begin
shape1.Left:=shape1.left         //If shape's 1 coordinates = shape's 2 then
end else                        //shape1.left:=stop moving else do
begin                           //find if shape 2 is right or left from shape 1
if shape1.left>shape2.Left then
begin
shape1.Left:=shape1.Left-5;
end else shape1.Left:=shape1.Left+5;
//Moving to shape2.left until shape1.left:=shape2.left

end;
end;

procedure TForm1.Timer2Timer(Sender: TObject);
begin
timer2.Interval:=100;      //the same method as timer1

if shape1.top=shape2.top then
begin
shape1.top:=shape1.top
end else
begin
if shape1.top>shape2.top then
begin
shape1.top:=shape1.top-5;
end else shape1.top:=shape1.top+5;

end;
end;

end. 
```

shape1 现在做的是向形状 2 移动，但它并没有停止移动，我的意思是它坚持形状 2，但它仍在倒置移动，但不是从形状 2 左右移动。我检查了计时器的 2 代码并没有错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:11:41.543

尝试以下代码（分配`OnCreate`和`OnPaint`形式并将计时器设置为 30 毫秒间隔）：

```
unit Unit5;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls;

type
  TVector = record
    X, Y: real;
  end;

  TForm5 = class(TForm)
    Timer1: TTimer;
    procedure FormPaint(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
  private
    { Private declarations }
    FPosA, FPosB: TVector;
    v: TVector;
  public
    { Public declarations }
  end;

var
  Form5: TForm5;

implementation

uses Math;

{$R *.dfm}

const RADIUS = 16;

function RealPoint(X, Y: real): TVector;
begin
  result.X := X;
  result.Y := Y;
end;

function RoundPoint(P: TVector): TPoint;
begin
  result.X := round(P.X);
  result.Y := round(P.Y);
end;

procedure TForm5.FormCreate(Sender: TObject);
var
  DX, DY: real;
begin
  FPosA := RealPoint(32, 32);
  FPosB := RealPoint(500, 200);

  DX := FPosB.X - FPosA.X;
  DY := FPosB.Y - FPosA.Y;

  v.X := DX / 100;
  v.Y := DY / 100;
end;

function EllipseRectFromPoint(P: TVector): TRect;
var
  ScreenPoint: TPoint;
begin
  ScreenPoint := RoundPoint(P);
  result.Left := ScreenPoint.X - RADIUS;
  result.Right := ScreenPoint.X + RADIUS;
  result.Top := ScreenPoint.Y - RADIUS;
  result.Bottom := ScreenPoint.Y + RADIUS;
end;

procedure TForm5.FormPaint(Sender: TObject);
begin

  // Draw ball A
  Canvas.Brush.Color := clSkyBlue;
  Canvas.Ellipse(EllipseRectFromPoint(FPosA));

  // Draw ball B
  Canvas.Brush.Color := clMoneyGreen;
  Canvas.Ellipse(EllipseRectFromPoint(FPosB));

end;

procedure TForm5.Timer1Timer(Sender: TObject);
begin
  FPosA.X := FPosA.X + V.X;
  FPosA.Y := FPosA.Y + V.Y;
  Invalidate;

  if Hypot(FPosA.X - FPosB.X, FPosA.Y - FPosB.Y) < 0.1 then
  begin
    Timer1.Enabled := false;
    ShowMessage('We''re there!');
  end;
end;

end. 
```

两个球：

```
unit Unit5;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls;

type
  TVector = record
    X, Y: real;
  end;

  TForm5 = class(TForm)
    Timer1: TTimer;
    procedure FormPaint(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
  private
    { Private declarations }
    AreWeThereYetA, AreWeThereYetB: boolean;
    FPosA, FPosB, FPosC: TVector;
    vA, vB: TVector;
  public
    { Public declarations }
  end;

var
  Form5: TForm5;

implementation

uses Math;

{$R *.dfm}

const RADIUS = 16;

function RealPoint(X, Y: real): TVector;
begin
  result.X := X;
  result.Y := Y;
end;

function RoundPoint(P: TVector): TPoint;
begin
  result.X := round(P.X);
  result.Y := round(P.Y);
end;

procedure TForm5.FormCreate(Sender: TObject);
var
  DX, DY: real;
begin
  FPosA := RealPoint(32, 32);
  FPosB := RealPoint(132, 32);
  FPosC := RealPoint(500, 200);

  DX := FPosC.X - FPosA.X;
  DY := FPosC.Y - FPosA.Y;
  vA.X := DX / 100;
  vA.Y := DY / 100;

  DX := FPosC.X - FPosB.X;
  DY := FPosC.Y - FPosB.Y;
  vB.X := DX / 200;
  vB.Y := DY / 200;

end;

function EllipseRectFromPoint(P: TVector): TRect;
var
  ScreenPoint: TPoint;
begin
  ScreenPoint := RoundPoint(P);
  result.Left := ScreenPoint.X - RADIUS;
  result.Right := ScreenPoint.X + RADIUS;
  result.Top := ScreenPoint.Y - RADIUS;
  result.Bottom := ScreenPoint.Y + RADIUS;
end;

procedure TForm5.FormPaint(Sender: TObject);
begin

  // Draw ball A
  Canvas.Brush.Color := clSkyBlue;
  Canvas.Ellipse(EllipseRectFromPoint(FPosA));

  // Draw ball B
  Canvas.Brush.Color := clMoneyGreen;
  Canvas.Ellipse(EllipseRectFromPoint(FPosB));

  // Draw ball C
  Canvas.Brush.Color := clRed;
  Canvas.Ellipse(EllipseRectFromPoint(FPosC));

end;

procedure TForm5.Timer1Timer(Sender: TObject);
begin

  if not AreWeThereYetA then
  begin
    FPosA.X := FPosA.X + VA.X;
    FPosA.Y := FPosA.Y + VA.Y;
  end;

  if not AreWeThereYetB then
  begin
    FPosB.X := FPosB.X + VB.X;
    FPosB.Y := FPosB.Y + VB.Y;
  end;

  Invalidate;

  if Hypot(FPosA.X - FPosC.X, FPosA.Y - FPosC.Y) < 0.1 then
    AreWeThereYetA := true;

  if Hypot(FPosB.X - FPosC.X, FPosB.Y - FPosC.Y) < 0.1 then
    AreWeThereYetB := true;

  if AreWeThereYetA and AreWeThereYetB then
  begin
    Timer1.Enabled := false;
    ShowMessage('We are there!');
  end;
end;

end. 
```

使用数组和记录，很容易推广到`N`具有自定义属性（颜色、半径等）的球，甚至是随机属性。实现弹跳也很容易。此外，在这里使用真正的矢量类型会很好。

# c# - 类库错误不包含适合入口点的静态“主要”方法

> ID：16134096
> 
> 赞同：2
> 
> 时间：2013-04-21T17:31:43.633
> 
> 标签：c#, .net, entity-framework, visual-studio-2012

我有两个本质上是类库项目的项目。一个 (Net.Data.Entities) 包含我使用的实体的定义，而另一个类 Project(Net.Data.DataContexts) 包含我的应用程序要使用的数据上下文对象。Net.Data.DataContects 项目具有对 Net.Data.Entities 项目的引用。当我构建我的库时，这两个库都在属性部分设置为类库，我收到以下错误消息

**错误 2 元数据文件 'C:...\XXX\XXXXX\Net.Data.Entities\bin\Debug\Net.Data.Entities.exe' 找不到

错误 1 ​​程序 'c:...\XXX\XXXXX\Net.Data.Entities\obj\Debug\Net.Data.Entities.exe' 不包含适合入口点的静态 'Main' 方法**

上面到底是什么意思，请问我该如何解决这个问题？我正在使用 Entity Framework 5 和 .NET 4.5 在 Windows 7 机器上的 Visual Studio 2012 中运行或工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T17:38:05.483

右键单击项目选择**属性**并选择**应用程序**，然后将**输出类型**更改为类库。

# mysql - 使用同一表中的子选择更新查询

> ID：16134097
> 
> 赞同：0
> 
> 时间：2013-04-21T17:31:43.763
> 
> 标签：mysql, sql-update, sql-subselect

我正在尝试创建一个查询来`rank`根据同一个表中的值更新表中所有记录的字段。

我设法获得了一个`SELECT`计算排名的有效查询，但我很难将其转换为`UPDATE`. 这是查询：

```
SELECT
  ((views_count + comments_count) * (172800 / elapsed)) AS rank
FROM (
  SELECT
    p.views_count,
    (UNIX_TIMESTAMP(NOW()) - UNIX_TIMESTAMP(p.createdAt)) AS elapsed,
    (SELECT COUNT(*) FROM `comments` AS c WHERE c.photo_id = p.id) AS comments_count
  FROM `photos` AS p
) AS m 
```

如何将其植入`UPDATE`查询中，以更新每条记录的`rank`值？

谢谢！:)

## 编辑：

我的数据库结构：

```
[Photo]
id
user_id
views_count
rank
createdAt

[Comment]
id
photo_id
content 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:50:11.523

只是一个猜测，但这样的事情应该有效：

```
UPDATE `photos`
FROM (
   SELECT id
        , (views_count + comments_count) * (172800 / elapsed) AS rank
   FROM (
      SELECT p.id
           , p.views_count
           , (  UNIX_TIMESTAMP(NOW()) 
              - UNIX_TIMESTAMP(p.createdAt)) AS elapsed
           , (SELECT COUNT(*) 
              FROM `comments` AS c 
              WHERE c.photo_id = p.id) AS comments_count
      FROM `photos` AS p
      ) AS m
   ) AS z
SET rank=z.rank
WHERE `photos`.id=z.id 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T17:56:09.030

您应该将新排名写入临时表并使用它来更新原始表。尝试

```
CREATE TEMPORARY TABLE tmp_tbl AS (
   SELECT ((views_count + comments_count) * (172800 / elapsed)) AS rank, m.id
      FROM (SELECT
         p.views_count,
         (UNIX_TIMESTAMP(NOW()) - UNIX_TIMESTAMP(p.createdAt)) AS elapsed,
         (SELECT COUNT(*) FROM `comments` AS c WHERE c.photo_id = p.id) AS comments_count
         FROM `photos` AS p
      ) AS m); 
```

接着

```
UPDATE photos, tmp_tbl SET photos.rank = tmp_tbl.rank WHERE photos.id=tmp_tbl.id; 
```

最后

```
DROP TABLE tmp_tbl; 
```

[看到这个类似的stackoverflow问题](https://stackoverflow.com/questions/5859391/create-temporary-table-from-select-statement-without-using-create-table)

# php - MYSQL + PHP比较存储在数据库中的实时时间和日期时间

> ID：16134102
> 
> 赞同：0
> 
> 时间：2013-04-21T17:31:55.360
> 
> 标签：php, mysql, voting

```
<?php
define('INCLUDE_CHECK',true);
error_reporting(0);
session_name('tzLogin');
session_start();
$user = $_SESSION['name'];

if($user or die('Please login to continue')) {      

   mysql_connect("localhost","root","password");
   mysql_select_db('db_account');
   require_once 'Functions/Import.php';

   $l = isset ( $_GET [ 'l' ] ) ? $_GET [ 'l' ] : null ;

   if ( ! is_null ( $l ) ) {
$gd= mysql_query("SELECT * FROM t_account WHERE name='$user' AND (now() - INTERVAL 6 HOUR > lastvoted)");

          if($gd or die("Come back later you still have time left to vote"))
          {
$qry = "UPDATE t_account SET `vo` = `vo` + 1, `lastvoted` = now() WHERE name='$user'";
$result = @mysql_query($qry);
}
else {

}
          header ( 'Location: ' . base64_decode ( $l ) , true , 301 ) ;

          exit ;

    }

        }
?> 
```

我没有得到所需的结果。

嗯，我试过你告诉我的，我用这种方式编写代码

但仍然执行查询而不是给出消息“稍后回来”查询应该只在存储时间比实时时间早 6 小时时才有效

:(请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:57:49.813

您的查询是完全错误的。`date()`在 MySQL 中，不会像在 PHP 中那样将日期值“格式化”为字符串。MySQL`date()`提取日期时间值的日期部分并将其作为字符串返回，例如

```
date('2013-04-21 12:00:00') -> '2013-04-21' 
```

不要像那样混合 php 和 mysql 日期逻辑**。**MySQL 完全能够通过`now()`和`CUR_DATE`以及各种其他函数生成“现在”日期。

```
SELECT ... WHERE (now() - INTERVAL 6 HOUR > lastvoted)

UPDATE ... `lastvoted` = now() 
```

是你所需要的全部。

# c - 不断获得垃圾价值

> ID：16134105
> 
> 赞同：0
> 
> 时间：2013-04-21T17:32:03.347
> 
> 标签：c, joystick

我正在开发一个程序，该程序从 USB 操纵杆获取轴值并通过 TCP 发送它。我所做的是首先让 TCP 程序正常工作，这样我就可以发送按预期工作的消息。然后我编写了另一个程序来从操纵杆获取值并将它们打印到屏幕上，这也按预期工作。

我最近尝试将这两个独立的程序合并为一个，这样我就有了一个`server`程序和一个`client`程序。那就是我的问题开始的地方，我在编译期间没有收到任何错误。程序似乎不再从操纵杆获取值并将它们存储在变量`axis[0]`中。

现在我的过程是在`server.c`连接了操纵杆的计算机上启动文件。然后我将`client.c`在应该接收值的计算机上启动文件。在此过程中，我有几个`printf`陈述可以告诉我脚本到目前为止的进展情况。当我执行`server.c`脚本时，它告诉我操纵杆被检测到并且有 6 个轴和 12 个按钮。然后它将循环等待，直到尝试来自客户端的连接。

`client.c`程序执行后会打印出`The value is -1093458243`. 在它下面它将打印出`Incoming connection from 192.168.254.15 - sending welcome.`客户端程序然后退出，这就是所有发生的事情。

那行`The value is:`应该是-32768和32767之间的数字。所以它从某个地方得到了一个垃圾值。我迷路了，一整天都在尝试解决这个问题，但没有运气。我已经包含了几个代码示例、工作 TCP`server`和`client`脚本以及工作`joystick`脚本以及我尝试将两者结合起来的代码。任何人都可以在我的代码中发现任何错误，或者给我一些指示吗？

这是组合代码`server.c`：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/socket.h>

//joysick libraries
#include <sys/ioctl.h>
#include <stdio.h>
#include <fcntl.h>
#include <linux/joystick.h>

//Joysick device
#define JOY_DEV "/dev/input/js0"

//TCP Port number
#define PORTNUM 2343

int main(int argc, char *argv[])
{

//TCP connect
    struct sockaddr_in dest; /* socket info about the machine connecting to us */
    struct sockaddr_in serv; /* socket info about our server */
    int mysocket;            /* socket used to listen for incoming connections */
    socklen_t socksize = sizeof(struct sockaddr_in);

    memset(&serv, 0, sizeof(serv));           /* zero the struct before filling the fields */
    serv.sin_family = AF_INET;                /* set the type of connection to TCP/IP */
    serv.sin_addr.s_addr = htonl(INADDR_ANY); /* set our address to any interface */
    serv.sin_port = htons(PORTNUM);           /* set the server port number */    

    mysocket = socket(AF_INET, SOCK_STREAM, 0);

    /* bind serv information to mysocket */
    bind(mysocket, (struct sockaddr *)&serv, sizeof(struct sockaddr));

    /* start listening, allowing a queue of up to 1 pending connection */
    listen(mysocket, 1);
    int consocket = accept(mysocket, (struct sockaddr *)&dest, &socksize);

//TCP variable
         char msg1[10];

//Joystick variables
        int xAxis;
    int yAxis;
        int xSpeed;
        int ySpeed;

//Joystick initialize
    int joy_fd, *axis=NULL, num_of_axis=0, num_of_buttons=0, x;
    char *button=NULL, name_of_joystick[80];
    struct js_event js;

    if( ( joy_fd = open( JOY_DEV , O_RDONLY)) == -1 )
    {
        printf( "Couldn't open joystick\n" );
        return -1;
    }

//Get number of axes, buttons and name of joystick. Print results to screen
        ioctl( joy_fd, JSIOCGAXES, &num_of_axis );
    ioctl( joy_fd, JSIOCGBUTTONS, &num_of_buttons );
    ioctl( joy_fd, JSIOCGNAME(80), &name_of_joystick );

    axis = (int *) calloc( num_of_axis, sizeof( int ) );
    button = (char *) calloc( num_of_buttons, sizeof( char ) );

    printf("Joystick detected: %s\n\t%d axis\n\t%d buttons\n\n"
        , name_of_joystick
        , num_of_axis
        , num_of_buttons );

//Use non blocking mode for joystick
    fcntl( joy_fd, F_SETFL, O_NONBLOCK );   /* use non-blocking mode */

    while(1) {
//Test to read joystick state
            /* read the joystick state */
        read(joy_fd, &js, sizeof(struct js_event));

            /* see what to do with the event */
        switch (js.type & ~JS_EVENT_INIT)
        {
            case JS_EVENT_AXIS:
                axis   [ js.number ] = js.value;
                break;
            case JS_EVENT_BUTTON:
                button [ js.number ] = js.value;
                break;
        }
//Give msg1 variable the value of axis[0]
    sprintf(msg1, "%d", axis[0]);

    //char msg1 = axis[0];
//TCP send
    while(consocket)
    {
    printf("Value is: %6d\n", axis[0]);
        printf("Incoming connection from %s - sending welcome\n", inet_ntoa(dest.sin_addr));
        send(consocket, msg1, strlen(msg1), 0); 
        consocket = accept(mysocket, (struct sockaddr *)&dest, &socksize);
    }

    close(consocket);
    close(mysocket);
    return EXIT_SUCCESS;

//Print joystick state to screen
    printf("Value is: %d", axis[0]);
    //printf(" \r");
    //fflush(stdout);   
    }

//Joystick close
    close( joy_fd );    /* too bad we never get here */
    return 0;

//TCP message
    //printf("Please enter info\n");
    //fgets(msg1, 20, stdin);

} 
```

这是旧的工作`server.c`文件：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/socket.h>

#define PORTNUM 2343

int main(int argc, char *argv[])
{
    char msg1[] = "Hello World !\n";

    struct sockaddr_in dest; /* socket info about the machine connecting to us */
    struct sockaddr_in serv; /* socket info about our server */
    int mysocket;            /* socket used to listen for incoming connections */
    socklen_t socksize = sizeof(struct sockaddr_in);

    memset(&serv, 0, sizeof(serv));           /* zero the struct before filling the fields */
    serv.sin_family = AF_INET;                /* set the type of connection to TCP/IP */
    serv.sin_addr.s_addr = htonl(INADDR_ANY); /* set our address to any interface */
    serv.sin_port = htons(PORTNUM);           /* set the server port number */    

    mysocket = socket(AF_INET, SOCK_STREAM, 0);

    /* bind serv information to mysocket */
    bind(mysocket, (struct sockaddr *)&serv, sizeof(struct sockaddr));

    /* start listening, allowing a queue of up to 1 pending connection */
    listen(mysocket, 1);
    int consocket = accept(mysocket, (struct sockaddr *)&dest, &socksize);

    while(consocket)
    {
        printf("Incoming connection from %s - sending welcome\n", inet_ntoa(dest.sin_addr));
        send(consocket, msg1, strlen(msg1), 0); 
        consocket = accept(mysocket, (struct sockaddr *)&dest, &socksize);
    }

    close(consocket);
    close(mysocket);
    return EXIT_SUCCESS;
} 
```

这是`client.c`文件：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/socket.h>

#define MAXRCVLEN 500
#define PORTNUM 2343

int main(int argc, char *argv[])
{
   char buffer[MAXRCVLEN + 1]; /* +1 so we can add null terminator */
   int len, mysocket;
   struct sockaddr_in dest; 

   mysocket = socket(AF_INET, SOCK_STREAM, 0);

   memset(&dest, 0, sizeof(dest));                /* zero the struct */
   dest.sin_family = AF_INET;
   dest.sin_addr.s_addr = inet_addr("192.168.254.16"); /* set destination IP number */ 
   dest.sin_port = htons(PORTNUM);                /* set destination port number */

   connect(mysocket, (struct sockaddr *)&dest, sizeof(struct sockaddr));

   len = recv(mysocket, buffer, MAXRCVLEN, 0);

   /* We have to null terminate the received data ourselves */
   buffer[len] = '\0';

   printf("Received %s (%d bytes).\n", buffer, len);

   close(mysocket);
   return EXIT_SUCCESS;
} 
```

这是`joystick`获取值并将它们打印到屏幕上的文件：

```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/ioctl.h>
#include <linux/joystick.h>
#include <wiringPi.h>
#define JOY_DEV "/dev/input/js0"

int main()
{
    int xAxis;
    int yAxis;
        int xSpeed;
        int ySpeed;

    FILE *fp;
        fp = fopen("/dev/servoblaster","w");
        if (fp == NULL) {
        printf("Error opening file");
        exit(0);
    }

    int joy_fd, *axis=NULL, num_of_axis=0, num_of_buttons=0, x;
    char *button=NULL, name_of_joystick[80];
    struct js_event js;

    if( ( joy_fd = open( JOY_DEV , O_RDONLY)) == -1 )
    {
        printf( "Couldn't open joystick\n" );
        return -1;
    }

    ioctl( joy_fd, JSIOCGAXES, &num_of_axis );
    ioctl( joy_fd, JSIOCGBUTTONS, &num_of_buttons );
    ioctl( joy_fd, JSIOCGNAME(80), &name_of_joystick );

    axis = (int *) calloc( num_of_axis, sizeof( int ) );
    button = (char *) calloc( num_of_buttons, sizeof( char ) );

    printf("Joystick detected: %s\n\t%d axis\n\t%d buttons\n\n"
        , name_of_joystick
        , num_of_axis
        , num_of_buttons );

    fcntl( joy_fd, F_SETFL, O_NONBLOCK );   /* use non-blocking mode */

    while( 1 )  /* infinite loop */
    {

            /* read the joystick state */
        read(joy_fd, &js, sizeof(struct js_event));

            /* see what to do with the event */
        switch (js.type & ~JS_EVENT_INIT)
        {
            case JS_EVENT_AXIS:
                axis   [ js.number ] = js.value;
                break;
            case JS_EVENT_BUTTON:
                button [ js.number ] = js.value;
                break;
        }

            /* print the results */

        //printf( "X: %6d  Y: %6d  ", axis[0], axis[1] );

        int xAxis = axis[0] / 327;
        int yAxis = axis[1] / 327;
        int ySpeed = 150-0.3*yAxis;
        int xSpeed = 150-0.3*xAxis;
        printf( "X is equal to: %d  Y is equal to: %d  Y speed is: %d ", xAxis, yAxis, ySpeed);

        fprintf(fp, "2=%d\n", ySpeed);
        fprintf(fp, "1=%d\n", xSpeed);
            printf("  \r");
        fflush(stdout);
    }

    close( joy_fd );    /* too bad we never get here */
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:36:36.610

对我来说看起来有点奇怪（我认为这可能是你的问题的原因）

```
fcntl( joy_fd, F_SETFL, O_NONBLOCK );   /* use non-blocking mode */

while( 1 )  /* infinite loop */
{

        /* read the joystick state */
    read(joy_fd, &js, sizeof(struct js_event)); 
```

您正在使用非阻塞模式，但没有检查*read* 调用是否实际读取任何内容。由于它是非阻塞的，即使操纵杆设备尚无可用数据，它也会返回。

# google-apps-script - 当只有一个项目时如何使列表框触发处理程序？

> ID：16134106
> 
> 赞同：0
> 
> 时间：2013-04-21T17:32:13.700
> 
> 标签：google-apps-script

这是一个演示我遇到的问题的脚本（[在这里在线测试](https://script.google.com/macros/s/AKfycbzzaWHQFMCMvyeAm93pNrogOhjksaKvzF32hIbFTbzCX1bYPJAx/exec)）

```
var lbArray1 = ['item1', 'item2', 'item3', 'item4', 'item5'];

function doGet(e){
  var app = UiApp.createApplication();
  var vPanel = app.createVerticalPanel().setStyleAttribute('padding','20px')
  app.add(vPanel);
  var lb1 = app.createListBox().setName('lb1').setId('lb1').setVisibleItemCount(1);
  var lb2 = app.createListBox().setName('lb2').setId('lb2').setVisibleItemCount(4);
  var lb3 = app.createListBox().setName('lb3').setId('lb3').setVisibleItemCount(1);
  lb3.addItem(lbArray1[0]);
    for(var i in lbArray1){
      lb1.addItem(lbArray1[i]);
      lb2.addItem(lbArray1[i]);
      }
  var msg = app.createLabel('waiting for trigger').setId('msg');
  vPanel.add(lb1).add(lb2).add(lb3).add(msg);
  var Handler = app.createServerHandler('test').addCallbackElement(vPanel);
  lb1.addChangeHandler(Handler);
  lb2.addClickHandler(Handler);
  lb3.addClickHandler(Handler);// I tried different trigger modes without success
  return app;
}

function test(e){
  var app = UiApp.getActiveApplication();
  var msg = app.getElementById('msg');
  msg.setText('triggered by '+e.parameter.source)
  return app;
} 
```

ListBox 3 只有一个项目并且只显示一个项目*（我在一个应用程序中遇到这种情况，它使用弹出窗口显示文件夹内容，同时调整列表大小以适应其内容，有时我可以在一个文件夹中只有一个文件）*

除非我将 ListBox 3 更改`setVisibleItemCount`为 2 或更多...

我用来调整列表大小的代码就像这样：

```
...
ODlist.setVisibleItemCount(numItem > 6 ? 6 : numItem > 1 ? numItem : 2)
... 
```

而且我真的更愿意将最后一个数字设置为 1，它看起来会很好 ;-) 但我不能。

任何解决方法的想法？

* * *

编辑：现在我发现 using `lb3.addMouseOverHandler(Handler);`是一个可用的解决方案，但是当多个项目可见时，此处理程序会导致一些问题......我宁愿找到更优雅的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:46:14.160

我了解这是否不是您想要的，但这是我解决问题的方法。我只是简单地添加了一个列表项，它是一个用户提示，例如：“选择电子表格”。从我的代码：

```
var files = DocsList.getFolder("Incoming Product Data").getFiles();
fileChooser.addItem("Select a Spreadsheet"); 
 for (var i = 0; i < files.length; i++) {
    fileChooser.addItem(files[i].getId()); 
```

我唯一要做的另一件事是在触发器中构建一个 if 语句，这样如果有人选择了一个文件，然后切换回提示“选择电子表格”，它不会通过尝试处理来引发错误提示作为实际的 fileId。

我能做的最好的。

# android - Android - 有没有办法知道用户何时将新联系人添加到他的手机？

> ID：16134107
> 
> 赞同：1
> 
> 时间：2013-04-21T17:32:17.130
> 
> 标签：android, android-intent, contact

我想知道每次用户将新联系人添加到他的联系人列表时是否存在一种方式（意图等）。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:36:57.890

使用[ContentObserver](https://www.google.com.bd/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CC8QFjAA&url=http://developer.android.com/reference/android/database/ContentObserver.html&ei=AiN0UfbWKYiIrQfS_oCICg&usg=AFQjCNFXwFGxVOY49yjkipyZXo_OSIfNIQ&sig2=AtC9M7iZCLKS2BvW78LcSw&bvm=bv.45512109,d.bmk)在内容提供程序中进行更改时得到通知。以下可用于了解通讯录的变化

声明内容观察者

```
private final ContentObserver contentObserver = new ContentObserver(null) {

    @Override
    public void onChange(boolean selfChange) {
                  super.onChange(selfChange);
                  perform your task;
            }
    } 
```

向 android.provider.ContactsContract.Contacts.CONTENT_URI 注册观察者，以便收到有关联系人更改的通知

```
 this.getApplicationContext()
            .getContentResolver()
            .registerContentObserver(
                    android.provider.ContactsContract.Contacts.CONTENT_URI,
                    true, contentObserver); 
```

不要忘记在 onDestroy 中取消注册

```
 this.getApplicationContext().getContentResolver()
            .unregisterContentObserver(contentObserver); 
```

每当系统电话簿发生变化时，都会通过 onChange 回调方法通知您。

但一个问题是您不仅会收到添加通知，还会收到任何更改（编辑/删除）的通知。我不确定是否有任何具体的简单方法（作为最糟糕的方法，你可以自己跟踪联系人）。

# javascript - 带有 JavaScript 对象的人物猜测程序

> ID：16134110
> 
> 赞同：0
> 
> 时间：2013-04-21T17:32:28.067
> 
> 标签：javascript, html

我正在尝试学习 JavaScript，所以我正在做这个项目来练习。我试图弄清楚这些对象和所有这些是如何工作的。基本上我想要的是一个人列表，作为对象，每个人都分配了某些属性。然后它会问一堆问题，直到它猜到你在想的那个人。我已经四处搜索，但无法真正找到如何做到这一点。这是我到目前为止所拥有的：

```
function person(name,age,eyecolor,gender,eyeglasses)
{
    this.name=name;
    this.age=age;
    this.eyecolor=eyecolor;
    this.gender=gender;
    this.eyeglasses=eyeglasses;
}

var Dad=new person("Dad",45,"blue","male",true);
var Mom=new person("Mom",48,"blue","female",false);
var Brother=new person("Brother",16,"blue","male",false);
var Sister=new person("Sister",15,"green","female",false);

function askQuestion (){

}

function begin(){
    askQuestion();
} 
```

现在我想要的是一种方法，我可以在`askQuestion`函数中根据我们迄今为止对该人的了解从列表中选择一个问题。然后重新计算可能是谁，然后选择另一个问题来问，直到我们知道它是谁。希望我已经说清楚了。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:05:25.830

这有点像游戏“[猜猜谁？](http://en.wikipedia.org/wiki/Guess_Who%3F "猜猜是谁？ - 维基百科，免费的百科全书") ”不是吗？好的，这就是你要做的：

首先，您为一个人创建一个构造函数。你说对了。

```
function Person(name, age, eyecolor, gender, eyeglasses) {
    this.name = name;
    this.age = age;
    this.eyecolor = eyecolor;
    this.gender = gender;
    this.eyeglasses = eyeglasses;
} 
```

然后你创建可能的人列表。列表意味着一个数组。

```
var people = [
    new Person("Dad", 45, "blue", "male", true),
    new Person("Mom", 48, "blue", "female", false),
    new Person("Brother", 16, "blue", "male", false),
    new Person("Sister", 15, "green", "female", false)
]; 
```

然后你不断地问问题来猜测这个人是谁。不断询问意味着使用循环。我们将继续循环，直到列表中只剩下一个人（我们正在寻找的人）：

```
while (people.length > 1) askQuestion(); 
```

接下来我们定义`askQuestion`函数。首先，我们需要选择要问的问题。所以我们列了一个问题清单。这又是一个数组。我们还将存储要测试的属性以及结果`true`和`false`条件。

```
var questions = [
    ["eyecolor", "blue", "green", "Does the person have blue eyes?"],
    ["gender", "male", "female", "Is the person a male?"],
    ["eyeglasses", true, false, "Does the person wear eyeglasses?"]
]; 
```

这三个问题是您确定此人是谁所需要知道的。接下来我们记录当前正在询问的问题（0、1 或 2）。

```
var question_no = 0; 
```

最后，我们提出问题以确定此人是谁：

```
function askQuestion() {
    var question = questions[question_no++];
    var answer = confirm(question[3]) ? question[1] : question[2];
    var predicate = question[0];

    people = people.filter(function (person) {
        return person[predicate] === answer;
    });
} 
```

在这里，我们问用户一个问题，确定他选择了哪个答案，并使用该信息来过滤与给定描述匹配的人。最后我们得到一个人：

```
alert("The person you're thinking about is " + people[0].name + "."); 
```

在此处查看工作演示：http: [//jsfiddle.net/9g6XU/](http://jsfiddle.net/9g6XU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:24:55.000

这就是我将如何做到的。它比 Aadit 的答案要短，而且在我看来，它更简单、更容易理解。

列出人员名单。使用数组文字：

```
var people = [Dad, Mom, Brother, Sister]; 
```

我喜欢结构化我的代码，所以我会将问题放在一个对象中：

```
var questions = {
    "Are they male or female?" : 'gender',
    "What is their eye color?" : 'eyecolor',
    "Do they wear glasses?" : 'eyeglasses'
}; 
```

可以根据需要使用任意数量的属性对其进行扩展。

然后：

```
for (question in questions) { //This is how you loop through an object
    var property = questions[question]; //This gets the second part of the object property, e.g. 'gender'
    var answer = prompt(question);

    //filter is an array method that removes items from the array when the function returns false.
    //Object properties can be referenced with square brackets rather than periods. This means that it can work when the property name (such as 'gender') is saved as a string.

    people = people.filter(function(person) { return person[property] == answer });

    if (people.length == 1) {
        alert("The person you are thinking of is " + people[0].name);
        break;
    }
    if (people.length == 0) {
        alert("There are no more people in the list :(");
        break;
    }
} 
```

我也给你做了个小提琴。[这里是。](http://jsfiddle.net/aGb4W/1/)

# php - PHP - 会话变量的问题

> ID：16134119
> 
> 赞同：0
> 
> 时间：2013-04-21T17:33:22.713
> 
> 标签：php, ajax, session-variables

我的网站有问题。我没有发布任何代码，因为我认为没有任何相关的东西可以展示，而且我已经做过好几次类似的事情了。我的问题只是关于逻辑。

我有一个向其他两个 php 文件发送 ajax 请求的页面。这些文件使用会话变量来构建一些 JSON。

问题是一些会话变量只能被一个 php 文件看到。当我检查输出时，`var_dump($_SESSION)`我可以看到一个文件看到了所有会话变量，而另一个文件只能看到它在之前的调用中设置的那些。当我检查会话 ID 时，我可以看到两个文件具有不同的会话 ID。

您对可能是什么问题有任何想法，或者只是跟踪跟踪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:36:08.427

`session_start()`在使用 sission 变量之前检查您是否在两个页面中都有

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:46:06.860

我终于解决了。问题与域名有关。当您使用子域或不添加“www”时，浏览器会认为它是一个不同的域并且不发送 cookie，然后启动一个新会话。

# c# - 如何使外部库中的注释在引用它的代码中可用

> ID：16134120
> 
> 赞同：2
> 
> 时间：2013-04-21T17:33:29.637
> 
> 标签：c#, visual-studio-2010

Visual Studio / monodevelop 有很棒的功能，可以让您在每个函数/变量上方指定 xml 注释，然后当您滚动它、单击它等时，它会显示为该函数的描述。

```
 /// <summary>
    /// This is example for stack overflow
    /// </summary>
    public void Foo()
    {

    } 
```

这很酷，但它仅适用于您的本地代码（在 1 个项目中）我如何才能使这些注释在外部库中的函数中，在另一个项目中引用，在那个项目中也可用？这应该是可能的，因为它适用于 .Net 程序集（当您引用 .Net 库时，您将能够看到该库中函数的这些描述）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:35:57.597

您可以使用 Visual Studio 为您的库文档生成 xml，请在[此处查看](http://msdn.microsoft.com/en-us/library/vstudio/x4sa0ak0%28v=vs.100%29.aspx)。

> 生成 XML 文档文件属性确定是否在编译期间生成 XML 文件。您可以在项目设计器的编译页面（对于 Visual Basic）或构建页面（对于 Visual C#）上设置此属性。选择此选项后，XML 文档会自动发送到一个 XML 文件中，该文件将与您的项目具有相同的名称和 .xml 扩展名[Reference](http://msdn.microsoft.com/en-us/library/vstudio/x4sa0ak0%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T17:37:15.417

您可以使用`/doc`生成的文档并将其与您的程序集捆绑在一起：

[http://msdn.microsoft.com/en-us/library/3260k4x7.aspx](http://msdn.microsoft.com/en-us/library/3260k4x7.aspx)

# html - 页面底部的空白区域

> ID：16134122
> 
> 赞同：5
> 
> 时间：2013-04-21T17:34:01.200
> 
> 标签：html, css

请访问~~[本网站](http://www.iamvishal.com/pureecn)~~。

底部有一个空白区域。我检查了一下，我的 css 中没有提到最小高度。

我怀疑它在身体的 css 细节中，如下所示：

```
 body {
        line-height: 1.5;
        font-size: 87.5%;
        word-wrap: break-word;
        margin-top: 0px;
        margin-left: 0px;
        margin-right: 0px;
        padding: 0;
        border: 0;
        outline: 0;
        background: none repeat scroll 0 0 #EFEFEF;
    }

    html, body, #page {
        height: 100%;
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T17:45:30.647

这消除了我在 Safari 中的流血`6.0.3`；

```
#footer-wrapper {
    margin-top: 40px;
    background: url("../images/footer.png") repeat-x scroll 0 0;
    overflow: hidden;
} 
```

您可能希望根据其中的内容以不同的方式处理溢出。但这应该修复空白。

我只是通过从 DOM 自下而上删除节点来解决这个问题。它必须在`#footer-wrapper`. 由于 margin-bottom 不起作用并且您使用的是相对定位，我认为这是该元素中的一些阴影样式。

**更新（更好的修复）**

刚刚找到问题的真正问题；

```
.clearfix::after {
    content: "";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
} 
```

更改`content: ".";`为`content: "";`，它是固定的。或者完全删除该样式，因为在这种情况下它似乎没有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-11T12:10:55.580

```
"overflow: hidden" 
```

让事情变得更难，但尝试，

```
"overflow: auto" 
```

为了能够在你需要的时候流动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-15T23:31:08.077

我在这里的节目迟到了，但它可能会对我的情况有所帮助我在顶部有一个空白空间我添加了 margin-top=-20px 现在底部的空白空间，尝试了我在这些和很多线程，什么都没有。决定通过一些 HTML 验证器运行它，但其中一些没有被拾取，但是在几个人在标签末尾发现一个额外的字符（`）之后，就是这样，所以这是用户的笨拙，拿了那个东西现在我的页面被转移了，得到了负边距，一切都很好。所以尝试一个验证器并寻找类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T17:39:06.687

```
margin-bottom: 0px; 
```

顺便说一句..不错的网站老兄:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-11T12:56:09.273

有时，是由第三方服务创建的一些 iframe/对象创建了这个空白空间。就我而言，谷歌 Adwords 和谷歌分析正在创造这个。所以，我通过添加这个 CSS 来删除：

```
object[type="application/gas-events-cef"],
iframe[name="google_conversion_frame"] {
    display: none !important;
    height: 0 !important;
    width: 0 !important;
    line-height: 0 !important;
    font-size: 0 !important;
    margin-top: -13px;
    float: left;
} 
```

也许您需要为您的案例添加一些额外的规则。希望有帮助。

# c# - 如何使用 Mono C# 获取有关专注于 Linux 的窗口的信息

> ID：16134124
> 
> 赞同：1
> 
> 时间：2013-04-21T17:34:07.143
> 
> 标签：c#, linux, mono

我已经使用 Windows 用户组件 (user32.dll) 开发了一个 C# .NET WindowsForms 应用程序，该组件在每次用户更改焦点时保存活动窗口（具有焦点的窗口）的标题。

现在我打算在 Linux 上使用 Mono C# 来做同样的事情。可能吗？

如果是的话，我在找什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:44:39.673

我决定看一下`gnome-screenshot`具有这样功能的源代码（仅截取活动窗口的屏幕截图）：

```
static GdkWindow *
screenshot_find_active_window (void)
{
  GdkWindow *window;
  GdkScreen *default_screen;

  default_screen = gdk_screen_get_default ();
  window = gdk_screen_get_active_window (default_screen);

  return window;
} 
```

当上面没有返回任何内容时，它有一些逻辑可以回退到“鼠标指针下的窗口”：

```
GdkWindow *
do_find_current_window (void)
{
  GdkWindow *current_window;
  GdkDeviceManager *manager;
  GdkDevice *device;

  current_window = screenshot_find_active_window ();
  manager = gdk_display_get_device_manager (gdk_display_get_default ());
  device = gdk_device_manager_get_client_pointer (manager);

  /* If there's no active window, we fall back to returning the
   * window that the cursor is in.
   */
  if (!current_window)
    current_window = gdk_device_get_window_at_position (device, NULL, NULL);

  if (current_window)
    {
      if (screenshot_window_is_desktop (current_window))
    /* if the current window is the desktop (e.g. nautilus), we
     * return NULL, as getting the whole screen makes more sense.
         */
        return NULL;

      /* Once we have a window, we take the toplevel ancestor. */
      current_window = gdk_window_get_toplevel (current_window);
    }

  return current_window;
} 
```

据我所知，以上所有内容都依赖于 libgdk-pixbuf。如果这不是一个选项，您可以随时查看 Gdk 源代码中这些功能的实现。

# javascript - 如何在鼠标悬停时获取元素 ID 并将其分配给变量？

> ID：16134143
> 
> 赞同：0
> 
> 时间：2013-04-21T17:35:42.723
> 
> 标签：javascript, jquery, jquery-ui

我开始学习如何使用 jQuery 并正在创建一个小型项目管理应用程序。在应用程序中，您可以将员工从列表中拖放到不同的项目中以分配给他们。

在每个项目 div 中都有一个 ul，我希望将员工附加到该 ul 中。目前的问题是我可以将员工添加到 div 中，但他们添加到 ul 之外。我尝试设置一个变量来从项目 div 中获取元素 id 并将其分配给一个变量。然后该变量将在 appendTo() 调用中连接以将项目添加到正确的列表中。这是我遇到问题的地方。该变量一直作为 [object Object] 返回。

感谢您提前提供任何帮助。这里也是[JSFiddle](http://jsfiddle.net/imauld/2VU5j/9/)的链接。

HTML

```
<ul class='employee-list'>
    <li class='employee'>Ian</li>
    <li class='employee'>Danny</li>
</ul>
<div id='task-list'>
    <div id="task-1234" class='task'>
        <h3>Design new email</h3>
        <ul id="task-1234-employees" class='tasked-employees'></ul>
    </div>
    <div id ="task-4321" class='task'>
        <h3>Update Cart Code</h3>
        <ul id ="task-4321-employees" class='tasked-employees'></ul>
    </div>
</div> 
```

脚本

```
$(document).ready(function () {
$(function () {
    var $taskID = $('.task').mouseover(function() {return this.id;});
    $(".employee").draggable({
        revert: 'invalid'
    }, {
        snap: '.task-slot',
        snapMode: 'inner'
    }, {
        appendTo: 'body',
        helper: 'clone'
    });
    $('.task').droppable({
        activeClass: "ui-state-default",
        hoverClass: "ui-state-hover",
        accept: ":not(.ui-sortable-helper)",
        drop: function (event, ui) {
            $(this).find(".placeholder").remove();
            $("<li class='task-slot'></li>").text(ui.draggable.text()).appendTo("#" + $taskID +"-employees");
        }
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:43:30.677

基本上你一开始就不需要`mouse over`。

**该方法的ui**和**event**参数中提供了所有必需的信息`drop`。

试试这个

```
$(document).ready(function () {
    $(function () {
        $(".employee").draggable({
            revert: 'invalid'
        }, {
            snap: '.task-slot',
            snapMode: 'inner'
        }, {
            appendTo: 'body',
            helper: 'clone'
        });
        $('.task').droppable({
            activeClass: "ui-state-default",
            hoverClass: "ui-state-hover",
            accept: ":not(.ui-sortable-helper)",
            drop: function (event, ui) {
                var employee = ui.draggable.text();
                $(this).find(".placeholder").remove();
                $("<li class='task-slot'></li>").text(employee)
                    .appendTo($(event.target).find('ul.tasked-employees'));
            }
        });
    });
}); 
```

**[检查小提琴](http://jsfiddle.net/msuqk/)**

# javascript - 每个会话触发一次 javascript（灯箱）

> ID：16134145
> 
> 赞同：0
> 
> 时间：2013-04-21T17:36:03.267
> 
> 标签：javascript, jquery

嘿，我有一个快速的 javascript 问题！试图对其进行排序感到沮丧......现在我的模态 div 会在 10 秒后显示，这是正确的，但我只想在每个会话中显示**一次。**这是我当前的代码：

```
<script type="text/javascript">
 $(function() { // wait for the DOM
setTimeout(function () {
    var $modal = $('#free-awesome'); // your selector; cache it; only query the DOM once!

    $modal.modal('show'); // show modal; this happens after 10 seconds 

    setTimeout(function () {
        $modal.modal('hide'); // hide modal; 
    }, 50000);    
}, 10000);
});
</script> 
```

有什么想法可以使该javascript在每次访问/会话中显示一次吗？

我对 javascript 很陌生，所以如果你能让我确切地知道用什么来交换上面的内容，那就太好了！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:48:43.503

您可以使用[会话存储](https://developer.mozilla.org/en-US/docs/DOM/Storage)：

```
if(!sessionStorage.hidemodal) {
    // your code ...

    sessionStorage.hidemodal = true;
} 
```

# java - JPA存储库中的双向关联不起作用

> ID：16134148
> 
> 赞同：0
> 
> 时间：2013-04-21T17:36:10.257
> 
> 标签：java, spring, hibernate, jakarta-ee, jpa

这是我的表：

**命令**

```
CREATE TABLE ORDER_DETAILS (
       ID INT NOT NULL AUTO_INCREMENT
     , ORDER_ID VARCHAR(60) NOT NULL
     , ADDRESS_ID  INT 
--     , DRIVER_ID  INT 
     , BARCODE_ID  INT
     , CUSTOMER_ID  VARCHAR(60) 
     , CUSTOMER_PIN  VARCHAR(60) 
     , UNIQUE UQ_ORDER_ID_1 (ORDER_ID)
, FOREIGN KEY(BARCODE_ID) REFERENCES public.BARCODE(ID)
     , PRIMARY KEY (ID)
); 
```

和**条码**

```
CREATE TABLE BARCODE (
   ID INT NOT NULL AUTO_INCREMENT
 , BARCODE_DETAILS VARCHAR(60) NOT NULL
 , DRIVER_ID  INT 
 , VERSION INT NOT NULL DEFAULT 0
 , UNIQUE UQ_BARCODE_ID_1 (BARCODE_DETAILS)
 , PRIMARY KEY (ID)); 
```

订单到条码是多对一的关系，即多个订单可以有一个条码

这是我的存储库

**订单仓库**

```
package com.eppvd.application.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import com.eppvd.application.domain.Address;
import com.eppvd.application.domain.Customer;
import com.eppvd.application.domain.Driver;
import com.eppvd.application.domain.Order;

public interface OrderRepository extends JpaRepository<Order, Long> {

    Order findByOrderId(String orderId);
//  Order findByBarcode(String barcode);
    Order findByCustomerPin(String customerPin);

//  Order findByDriver(Driver driver);
    Order findByAddress(Address address);
    Order findByCustomer(Customer customer);

} 
```

和**BarcodeRepository**

```
package com.eppvd.application.repository;

import org.springframework.data.jpa.repository.JpaRepository;

import com.eppvd.application.domain.Barcode;

public interface BarcodeRepository extends JpaRepository<Barcode, Long> {

    Barcode findByBarcode(String barcode);
} 
```

这是我的 ServiceImpls

**OrderServiceImpl**

```
package com.eppvd.application.service.jpa;
/** imports **/

@Service("OrderService")
@Repository
@Transactional
public class OrderServiceImpl implements OrderService {

    /** Other Methods **/

    @Override
    @Transactional(propagation=Propagation.REQUIRED, readOnly=false)
    public Order save(Order order) {
        return orderRepository.save(order);
    }

    @Override
    public void flush(){
        orderRepository.flush();
    }

} 
```

和**BarcodeServiceImpl**

```
package com.eppvd.application.service.jpa;
@Service(value="barcodeService")
@Repository
@Transactional
public class BarcodeServiceImpl implements BarcodeService{

    @Autowired
    BarcodeRepository barcodeRepository;
    @Override
    @Transactional(propagation=Propagation.REQUIRED,readOnly=false)
    public Barcode save(Barcode barcode) {

        return barcodeRepository.save(barcode);
    }

} 
```

和实体

```
package com.eppvd.application.domain;
@Entity
@Table(name = "order_details")
public class Order implements Serializable {
    private Barcode barcode;

    @ManyToOne(optional = false)
    @JoinColumn(name="BARCODE_ID")
    public Barcode getBarcode() {
        return barcode;
    }   
    public void setBarcode(Barcode barcode) {
        this.barcode = barcode;
    }
}

package com.eppvd.application.domain;

@Entity
@Table(name = "barcode")
public class Barcode implements Serializable {

private static final long serialVersionUID = 3202943305655732979L;
private Long id;
private int version;
private String barcode_details;
private Set<Order> orders ;

@Column(name="BARCODE_DETAILS")
public String getBarcodeDetails() {
    return barcodeDetails;
}

public void setBarcodeDetails(String barcode) {
    this.barcodeDetails = barcode;
}

@OneToMany(cascade=CascadeType.ALL,mappedBy="barcode",fetch=FetchType.EAGER)
public Set<Order> getOrders() {
    return orders;
}

public void setOrders(Set<Order> orders) {
    this.orders = orders;
} 
```

}

和应用上下文

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.0.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <jdbc:embedded-database id="dataSource" type="H2">
        <jdbc:script location="classpath:schema.sql"/>
<!--         <jdbc:script location="classpath:test-data.sql"/>     -->
    </jdbc:embedded-database>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="emf"/>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
        </property>        
        <property name="packagesToScan" value="com.eppvd.application.domain"/>
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.H2Dialect</prop>
                <prop key="hibernate.max_fetch_depth">3</prop>
                <prop key="hibernate.jdbc.fetch_size">50</prop>
                <prop key="hibernate.jdbc.batch_size">10</prop>
                <prop key="hibernate.show_sql">true</prop> 
                <prop key="hibernate.hbm2ddl.auto">create</prop>             
            </props>        
        </property>
    </bean>    

    <context:annotation-config/>    

    <jpa:repositories base-package="com.eppvd.application.repository"
                      entity-manager-factory-ref="emf"
                      transaction-manager-ref="transactionManager"/>  

<!--      <bean id="customerService" class="com.eppvd.application.service.jpa.CustomerServiceImpl"> -->
<!--  </bean>   -->
    <context:component-scan base-package="com.eppvd.application.service.jpa"></context:component-scan>

</beans> 
```

和 JUNit 测试

```
package com.eppvd.application.service;

import static org.junit.Assert.*;
@ContextConfiguration(locations="classpath:datasource-tx-jpa.xml")
@RunWith(SpringJUnit4ClassRunner.class)
@Transactional
public class OrderServiceTest {

    @Autowired
    private OrderService orderService;

    @Autowired
    private BarcodeService barcodeService;

    @Before
    public void createAddressCustomerDriver(){

        Barcode barcode = new Barcode();
        barcode.setBarcodeDetails("1234");
        barcodeService.save(barcode);
    }

    @Test
    public void testCreateOrder() {
        Barcode barcode = barcodeService.findByBarcode("1234");

        Order order = new Order();
        order.setOrderId("OD001");
        order.setBarcode(barcode);
        order.setCustomerPin("1234");
        order.setCustomer(customerService.findByFirstName("Abhijit"));
        order.setAddress(addressService.findByStreet("BTM Layout"));

        orderService.save(order);
        orderService.flush();
        Set<Order> orders = barcode.getOrders();
assertEquals("1234", orderService.findByOrderId("OD001").getBarcode().getBarcodeDetails()); /**Works **/
        assertEquals(1, orders.size()); /**FAILS **/

    }
} 
```

我试图尽可能详细。所以它变得有点长。任何帮助将不胜感激。我试图从逻辑上弄清楚一切，但不太确定我错过了什么。这方面的文档很少

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:04:32.830

您创建了一个订单，并初始化了它的条形码。但是您从未将订单添加到条形码的订单集中。所以它的条形码集是空的。这是预期的。

如果您希望它们是连贯的，那么您应该保持关联的两个方面。

# mysql - 在mysql中使用IF在两个表中搜索

> ID：16134153
> 
> 赞同：0
> 
> 时间：2013-04-21T17:36:38.020
> 
> 标签：mysql, select

我在mysql中有两个表。我想检查第一个表中的一个字段。如果字段不为空，则在同一个表中搜索，否则在另一个表中搜索。例如

```
CREATE TABLE IF NOT EXISTS `crm_list` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`name` varchar(22) NOT NULL,
`status` int(22) NOT NULL DEFAULT '1',
`dateupdated` date NOT NULL,
 PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=9 ;

 CREATE TABLE IF NOT EXISTS `test` (
   `id` int(22) NOT NULL AUTO_INCREMENT,
  `rec` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `myname` varchar(22) NOT NULL,
   `list_id` int(22) NOT NULL
  PRIMARY KEY (`id`)
 ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ; 
```

在第一个表中，我想检查名称是否不为空/空

```
WHERE crm_list.status=1 AND crm_list.dateupdated=2012-04-13 
```

否则检查第二个表，如

```
 WHERE test.myname='abc' 
```

关系是第二个表中的list_id，它是第一个表的id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:55:05.183

这是一种方法。条件只是在`where`子句中表达：

```
select cl.*
from crm_list cl
where (cl.status=1 AND cl.dateupdated=2012-04-13 and coalesce(cl.name, '') <> '') or
      (coalesce(cl.name, '') = '' and
       cl.list_id in (select list_id from test where myname - 'abc'
      ) 
```

# jsp - 如何在不使用 scriptlet 的情况下删除请求属性？

> ID：16134154
> 
> 赞同：0
> 
> 时间：2013-04-21T17:36:38.097
> 
> 标签：jsp

```
<%request.removeAttribute("name"); %> 
```

如何在jsp中删除具有请求范围的“名称”属性？（没有scriptlet）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:41:21.210

JSTL 有一个`<c:remove>`标签：

```
<c:remove var="name" scope="request"/> 
```

也就是说，JSP 是视图组件，用于生成标记。他们应该读取属性，而不是设置和删除它们，恕我直言。

# javascript - 根据窗口位置访问 div 元素的内容

> ID：16134156
> 
> 赞同：0
> 
> 时间：2013-04-21T17:36:45.470
> 
> 标签：javascript, jquery, html

我的页面上有两个 div 元素，它们的位置使得两个 div 与页面顶部的距离相同，但相隔一定的水平距离。两个 div 元素都有一些使用 Javascript/jQuery 动态输入的文本。我想以这样一种方式访问​​两个 div 中的文本，当两个 div 包含相同（或匹配）的文本时，我可以执行一些操作。有没有办法根据使用 Javascript/jQuery 的 div 的位置来做到这一点？由于某些限制，我不能使用明显的 id 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:46:00.593

如果您希望根据 div 的位置使用来识别您的 div`.offset()`

- [.offset() 的 API 文档](http://api.jquery.com/offset/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:46:59.700

假设您想要的两个 div 位于 100, 100 和 100, 300 ：

```
var all_divs = $("div");
var div1;
var div2;

for (var i=0; i<all_divs.length; i++){
    var o = $(all_divs[i]).offset();

    if (o.top == 100 && o.left == 100) {
        div1 = all_divs[i];
    }

    if (o.top == 100 && o.left == 300) {
        div2 = all_divs[i];
    }
}

var polling = setInterval(function(){
    if ($(div1).text() == $(div2).text()) {
        perform_some_action();
        clearInterval(polling);
    }
}, 500); 
```

# web-services - rest webservice - DAO层和webservice集成，sessionfactory null异常

> ID：16134157
> 
> 赞同：0
> 
> 时间：2013-04-21T17:36:51.193
> 
> 标签：web-services, spring, rest, dao, sessionfactory

我们用 Java 在 mvc 中开发一个项目。我们想在我们的项目中添加一个 REST Web 服务，但是当我们想访问 DAO 层时，我们得到 sessionFactory is null 异常。我们如何通过 Web 服务注入 DAO？

你可以看到下面的代码

Web.java - 网络服务代码

```
package tr.com.server.webservice;

import java.util.ArrayList;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.transaction.annotation.Transactional;

import tr.com.server.model.Admin;
import tr.com.server.persistance.admin.AdminDAO;

@Path("/rota")
public class Web{
    @Autowired
    @GET
    @Produces(MediaType.TEXT_PLAIN)
    @Path("/add")
    @Transactional
    public String adminadd() throws Exception{

        Admin m = new Admin();
        m.setAdminname("John");
        m.setAdminpass("123456");
        AdminDAO a = new AdminDAO();
        a.add(m);

        return "added";
    }
} 
```

AdminDAO.java - DAO 类

```
package tr.com.server.persistance.admin;

import java.util.List;

import org.hibernate.Criteria;
import org.hibernate.SessionFactory;
import org.hibernate.criterion.Order;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import tr.com.server.model.Admin;

@Repository
public class AdminDAO implements IAdminDAO {

    @Autowired
    private SessionFactory sessionFactory;

    public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    @Autowired
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    @Autowired
    @Transactional
    @Override
    public Admin add(Admin entity) throws Exception {
        try {

            getSessionFactory().getCurrentSession().save(entity);
            getSessionFactory().getCurrentSession().flush();
            getSessionFactory().getCurrentSession().refresh(entity);
            return entity;
        } catch (RuntimeException e) {

            throw new Exception(e);
        }
    }
} 
```

iAdminDAO.java - AdminDAO 接口

```
package tr.com.server.persistance.admin;

import java.util.List;

import org.springframework.transaction.annotation.Transactional;

import tr.com.server.model.Admin;

@Transactional
public interface IAdminDAO {

    Admin add(Admin entity) throws Exception;

} 
```

/WEB-INF/xml/admin.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean id="iAdminBusinessManager" class="tr.com.server.business.admin.AdminBusinessManager">
    <property name="iAdminDAO" ref="iAdminDAO"></property>
    </bean>

    <bean id="iAdminDAO" class="tr.com.server.persistance.admin.AdminDAO">
    <property name="sessionFactory" ref="sessionFactory"></property>
    </bean>     

</beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>Index</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/application-config.xml</param-value>
    </context-param>

    <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener>
    <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
    </listener> 

    <servlet>
        <servlet-name>springapp</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>springapp</servlet-name>
        <url-pattern>*.htm</url-pattern>
    </servlet-mapping>
    <filter>
        <filter-name>hibernateFilter</filter-name>
        <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
        <init-param>
            <param-name>singleSession</param-name>
            <param-value>false</param-value>
        </init-param>
        <init-param>
            <param-name>sessionFactoryBeanName</param-name>
            <param-value>sessionFactory</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>hibernateFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <session-config>
        <session-timeout>45</session-timeout>
    </session-config>

    <servlet>
        <servlet-name>Jersey REST Service</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>tr.com.server.webservice</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
            <param-value>true</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey REST Service</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

休眠配置.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- HIBERNATE CONFIGURATION START POINT -->

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean" >
        <property name="packagesToScan" value="tr.com.server.model" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.connection.pool_size">10</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.connection.release_mode">auto</prop>
                <prop key="hibernate.connection.characterEncoding">utf-8</prop>

                <!--HSQL -->
                <prop key="hibernate.connection.datasource">db2pool</prop>
                <prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JTATransactionFactory
                </prop>
                <prop key="hibernate.dialect">org.hibernate.dialect.DB2Dialect</prop>
            </props>
        </property>
    </bean>

    <!-- HIBERNATE CONFIGURATION END POINT -->

</beans> 
```

springapp-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

</beans> 
```

应用程序配置.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <import resource="hibernate-config.xml" />

    <context:annotation-config />
    <tx:annotation-driven transaction-manager="transactionManager" />
    <aop:aspectj-autoproxy proxy-target-class="true" />
    <context:component-scan base-package="tr.com.server.webservice" />

    <import resource="xml/admin.xml" />

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:52:50.687

我在发布的代码中注意到两件事：

1.  AdminDAO a = new AdminDAO(); 不是通过弹簧工厂实例化。所以依赖的spring bean（包括会话工厂）将不会被连接。从 spring 上下文查找或自动连接中获取 AdminDAO bean。

2.  @Transactional 注解不会通过接口实现或子类化传播。也用 @Transactional 注释每个 DAO 类。

# google-app-engine - GWT 会话中的 getLastAccessedTime() 返回 0

> ID：16134160
> 
> 赞同：0
> 
> 时间：2013-04-21T17:37:10.490
> 
> 标签：google-app-engine, session, gwt

我正在尝试向 GWT 会话添加超时，方法是使用以下代码检查会话是否处于活动状态：

```
public boolean isSessionAlive() {
     return System.currentTimeMillis() - getThreadLocalRequest().getSession()
.getLastAccessedTime() < timeout;
} 
```

我将此代码基于我在网上看到的 GWT 会话的许多示例，例如[this](http://itsecrets.wordpress.com/category/gwt-rpc/)。

上面的代码在本地网络服务器上运行时效果很好，但在将项目部署到 App Engine 后就不行了。以下在 App Engine 上始终返回 0：

```
getThreadLocalRequest().getSession().getLastAccessedTime() 
```

据我了解，每次 RPC 调用都会更新上次访问时间。我打了几个电话，但这个值仍然为零，并且返回了不正确的结果。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:13:19.387

**部署到 GAE 后情况会发生变化**

就在今天参加了@roman irani 的应用引擎会议。

> 请记住，App Engine 是一种分布式架构，因此与 Java EE 的不同之处在于，在请求处理期间，您永远无法保证与前一个请求相同的应用程序服务器实例。虽然对象在 memcache 中被正确序列化，但由于内存不共享，您仍然必须每次调用 setAttribute()。

[**此处清除图片以处理会话**](http://afewguyscoding.com/2011/02/httpsession-google-app-engine/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:12:15.497

我找到了一种解决方法。在 war/WEB-INF/web.xml 中添加以下代码将导致会话在 30 分钟后过期：

```
<!--  timeout in minutes -->
<session-config>
    <session-timeout>30</session-timeout>
</session-config> 
```

参考：[GWT RPC 调用的会话超时](http://itsecrets.wordpress.com/2011/07/20/session-timeouts-with-gwt-rpc-calls/)。

# jquery - Jquery ajax json获取Flask Web框架传递的调用-调用失败

> ID：16134164
> 
> 赞同：1
> 
> 时间：2013-04-21T17:37:22.317
> 
> 标签：jquery, ajax, json, jsonp, flask

我正在尝试一个简单的 jquery ajax 调用来获取 json 数据。但是，通话失败，我不能很好地理解为什么。

代码如下。对我来说，这似乎没问题。

```
$(document).ready(function() {

    function onDataReceived (data){
        alert('test');
    };

    $("button").click(function(){
        $.ajax({
            url: "/test",
            type: "GET",
            dataType: "jsonp",
            success: onDataReceived
        }); 
    });
}); 
```

编辑烧瓶使用

这里的问题是我正在使用 Flask 并返回一个 json 对象。但是，一旦您尝试使用 jquery 进行 ajax 调用，返回纯 json 会产生跨域冲突。因此，如果您从烧瓶视图输出 jsonp 会容易得多。为此，您可以使用下面的代码片段（来自这里： http: [//flask.pocoo.org/snippets/79/](http://flask.pocoo.org/snippets/79/)）。javascript部分可以参考上面的，我只是把dataType从json改成了jsonp。

```
import json
from functools import wraps
from flask import redirect, request, current_app

def support_jsonp(f): 
"""Wraps JSONified output for JSONP"""
@wraps(f)
 def decorated_function(*args, **kwargs):
  callback = request.args.get('callback', False)
  if callback:
   content = str(callback) + '(' + str(f().data) + ')'
   return current_app.response_class(content, mimetype='application/json')
  else:
   return f(*args, **kwargs)
  return decorated_function

# then in your view
@default.route('/test', methods=['GET'])
@support_jsonp
def test():
 return jsonify({"foo":"bar"}) 
```

我不确定是否有办法使用烧瓶中的直接 json，可能有。但是，由于 jsonp 也更安全，所以我认为最好还是这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:19:40.837

这不起作用，因为远程脚本返回 JSON，而不是 JSONP。为了能够执行跨域 AJAX 调用，远程服务器需要支持 CORS 或 JSONP。联系您尝试使用的远程 API 的作者，或阅读文档以了解它是否支持它。

您在请求中指定的事实`dataType: "jsonp"`使 jQuery 向`callback`远程域发送一个查询字符串参数，期望它将响应包装在其中。如果不支持，则远程域不支持 JSONP，或者回调参数的调用方式不同。

# html - 带有 css 的 CrossBrowser 透明文本

> ID：16134166
> 
> 赞同：4
> 
> 时间：2013-04-21T17:37:30.397
> 
> 标签：html, css

我所拥有的是一个带有背景图像的 div，在这样的 div 中我有另一个更小且背景颜色为白色的元素。在这个元素里面我有我不想透明的文本，所以我们可以看到第一个 div 的背景图像。

尝试申请`color: transparent;`，但似乎不起作用。是否有可靠的 css 方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:39:47.797

你不能。做这样的事情的唯一方法是让“带文本的背景”成为您放在背景图像顶部的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:48:50.950

实际上，这仅适用于 CSS。在带有白色背景的较小元素中，您可以将 CSS3 与 IE 6-8 的后备一起使用。对于后备，您可以使用透明的 PNG。

白色 bg 的 CSS3 代码将是：

```
background-color: rgba(255,255,255,0.5) 
```

我为您设置了一个 codepen 以查看运行中的代码。 [http://codepen.io/DheerG/pen/tkkqC](http://codepen.io/DheerG/pen/tkKqC)

此外，如果您希望较小元素中的所有内容都是透明的，则可以只使用 css`opacity`元素。

```
opacity: 0.6;
/* IE 8 */
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
/* IE 5-7 */
filter: alpha(opacity=60); 
```

# c# - 如何以编程方式确定 XML 节点是否为叶节点？

> ID：16134167
> 
> 赞同：3
> 
> 时间：2013-04-21T17:37:40.387
> 
> 标签：c#, xml

我有一个大的 XML 树，如下所示：

```
<CategoryArray>
  <Category Name="Antiques" ID="20081">
    <Category Name="Antiquities" ID="37903">
      <Category Name="The Americas" ID="37908" />
      <Category Name="Byzantine" ID="162922" />
      <Category Name="Celtic" ID="162923" />
      <Category Name="Egyptian" ID="37905" />
      ... 
```

我想遍历所有节点以填充控件，并在这样做时检查：**此节点是父节点的传单**吗？最简单的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T17:43:37.960

叶节点是没有子节点的节点，因此您可以简单地检查它是否有子节点。根据您加载 XML 文档的方式，有多种方法可以执行此操作。例如，您可以使用[HasChildNodes](http://msdn.microsoft.com/en-gb/library/system.xml.xmlnode.haschildnodes.aspx)属性。

```
if (myXmlNode.HasChildNodes) 
    //is not a leaf  
else 
    //is a leaf 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T17:41:25.160

子节点的数量将为您提供答案 - 0 个子节点（或仅文本子节点，取决于您使用的类/查询）意味着它是叶子。

即 XElement 示例表单 MSDN: [Find a List of Child Elements](http://msdn.microsoft.com/en-us/library/bb675159.aspx)

```
XDocument cpo = XDocument.Load("PurchaseOrders.xml");
XElement po = cpo.Root.Element("PurchaseOrder").Element("Address");

// list1 contains all children of PurchaseOrder using  LINQ to XML query
IEnumerable<XElement> list1 = po.Elements();

// list2 contains all children of PurchaseOrder using XPath expression
IEnumerable<XElement> list2 = po.XPathSelectElements("./*"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T18:39:37.977

我将首先`flatten`使用层次结构 - 例如使用这篇文章中的代码
[如何使用 LINQ to Entity 选择递归嵌套实体](https://stackoverflow.com/questions/5422735/how-do-i-select-recursive-nested-entities-using-linq-to-entity/5423024#5423024)

然后像这样的事情......

```
using (XmlReader reader = XmlReader.Create(new StringReader(this.XML)))
{
    XElement xml = XElement.Load(reader);

    var all = xml.Elements("Category").Flatten(x => x.Elements("Category"));
    var leafs = from cat in all
                where cat.Elements("Category").Any() == false
                select cat;

    // or go through all...
    var categories =
        from cat in all
        select new
        {
            Name = cat.Attribute("Name"),
            ID = cat.Attribute("ID"),
            IsLeaf = cat.Elements("Category").Any() == false,
            SubCount = cat.Elements("Category").Count(),
            // Subs = cat.Elements("Category").Select(x => x.Attribute("Name").ToString()).ToArray(),
        };

    // or put into dictionary etc.
    var hash = categories.ToDictionary(x => x.Name);
} 
```

# android - 提取证书 - 未知密码

> ID：16134170
> 
> 赞同：0
> 
> 时间：2013-04-21T17:38:28.717
> 
> 标签：android, certificate, x509certificate, keystore, keychain

当开始一个`Activity`in `KeyManager`我得到一个`java.lang.NullPointException`

```
public class KeyManager extends Activity implements OnClickListener{
public KeyManager() {
    super();
}

public KeyPair createKeyPair(Context c)
{
    KeyPairGenerator kpg;
    KeyPair kp=null;
    try 
    {
        kpg = KeyPairGenerator.getInstance("RSA");
        kpg.initialize(1024);//1024 bits
        kp = kpg.genKeyPair();

        this.savePrivateKeyInKeyChain(kp, c);
        this.savePublicKeyInSharedPreferences(kp, c);

    } catch (NoSuchAlgorithmException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (CertificateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return kp;
}

///////////////////////////////////////
//////////// KEY CHAIN ////////////////
///////////////////////////////////////

public void savePublicKeyInSharedPreferences(KeyPair kp, Context c)
{
    SharedPreferences sharedPreferences = c.getSharedPreferences("Keys", Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();

    PublicKey pk=kp.getPublic();
    byte [] pkEncoded=pk.getEncoded();
    Log.i("Public Key", "original encoded:"+pkEncoded);

    String publicKeyString=Base64.encodeToString(pkEncoded,false);
    Log.i("Public Key", "encodeToString:"+publicKeyString);

    editor.putString("public", publicKeyString);

    editor.commit();
}

public static void savePrivateKeyInKeyChain (KeyPair kp, Context c) throws CertificateException
{
    Intent intent = KeyChain.createInstallIntent(); 
    byte [] cert=this.getCertificateForPrivateKey(kp);
    Log.i("CERT",""+cert);
    intent.putExtra(KeyChain.EXTRA_CERTIFICATE, cert);
    intent.putExtra(KeyChain.EXTRA_PKCS12, kp.getPrivate().getEncoded());
    c.startActivity(intent);
}

public static byte [] getCertificateForPrivateKey(KeyPair kp) throws CertificateException
{
    X500Name name=new X500Name("CN=" + "setichat" + ", OU=None, O=None L=None, C=None");
    BigInteger num=new BigInteger("1");
    Date now=new Date(System.currentTimeMillis() - 1000L * 60 * 60 * 24 * 30);
    Date after=new Date(System.currentTimeMillis() + (1000L * 60 * 60 * 24 * 365*10));
    PublicKey pubk=kp.getPublic();
    PrivateKey prik = kp.getPrivate();

    X509v3CertificateBuilder builder= new X509v3CertificateBuilder(name, num, now, after, name, SubjectPublicKeyInfo.getInstance(pubk.getEncoded()));
    byte[] certBytes=null;

    try 
    {
        certBytes = builder.build(new JCESigner(prik,"SHA256withRSA")).getEncoded();

    } catch (IOException e) 
    {
        e.printStackTrace();
    }

    CertificateFactory certificateFactory = CertificateFactory.getInstance("X.509");
    X509Certificate certificate = (X509Certificate) certificateFactory.generateCertificate(new ByteArrayInputStream(certBytes));

    return certificate.getEncoded();
}

public void saveAliasInSharedPreferences(String alias)
{
    SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences("Alias", Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();

    editor.putString("alias", alias);
    Log.i("Alias saved", alias);
    editor.commit();
}

public String getAliasFromSharedPreferences()
{
    SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences("Alias", Context.MODE_PRIVATE);

    String a=sharedPreferences.getString("alias", null);
    Log.i("Alias get", a);
    return a;
}

public String getPrivateKeyFromAlias()
{
    String alias=getAliasFromSharedPreferences();
    PrivateKey pk=null;
    String result=null;

    try 
    {
        pk = KeyChain.getPrivateKey(getApplicationContext(), alias);
        byte [] pkEncoded=pk.getEncoded();
        result=Base64.encodeToString(pkEncoded,false);
        Log.i("Private Key Alias", "encodeToString:"+result);

    } catch (KeyChainException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return result;
}

   public boolean hasKeys(Context c)
{
    boolean result=false;
    SharedPreferences sharedPreferences = c.getSharedPreferences("Alias", Context.MODE_PRIVATE);
    String p=sharedPreferences.getString("alias", null);
    if(p!=null)
        result=true;

    return result;
}

@Override
public void onClick(DialogInterface arg0, int arg1) {
    // TODO Auto-generated method stub
    KeyChain.choosePrivateKeyAlias(this,
            new KeyChainAliasCallback() {
                public void alias(String alias) {
                //Remember the alias selection for future use.
                if (alias != null) saveAliasInSharedPreferences(alias);
                }
            },
            null, // List of acceptable key types. null for any
            null, // issuer, null for any
            null, // host name of server requesting the cert, null if unavailable
            -1, // port of server requesting the cert, -1 if unavailable
            null); // alias to preselect, null if unavailable
}

public X509Certificate[] getCertificateFromAlias(String alias) throws KeyChainException, InterruptedException
{
    X509Certificate[] chain= KeyChain.getCertificateChain(getApplicationContext(), alias);
    return chain;
}
 }

class JCESigner implements ContentSigner {

private static final AlgorithmIdentifier PKCS1_SHA256_WITH_RSA_OID = new AlgorithmIdentifier(new ASN1ObjectIdentifier("1.2.840.113549.1.1.11"));

private Signature signature;
private ByteArrayOutputStream outputStream;

public JCESigner(PrivateKey privateKey, String signatureAlgorithm) {
    if (!"SHA256withRSA".equals(signatureAlgorithm)) {
        throw new IllegalArgumentException("Signature algorithm \"" + signatureAlgorithm + "\" not yet supported");
    }
    try {
        this.outputStream = new ByteArrayOutputStream();
        this.signature = Signature.getInstance(signatureAlgorithm);
        this.signature.initSign(privateKey);
    } catch (GeneralSecurityException gse) {
        throw new IllegalArgumentException(gse.getMessage());
    }
}

@Override
public AlgorithmIdentifier getAlgorithmIdentifier() {
    if (signature.getAlgorithm().equals("SHA256withRSA")) {
        return PKCS1_SHA256_WITH_RSA_OID;
    } else {
        return null;
    }
}

@Override
public OutputStream getOutputStream() {
    return outputStream;
}

@Override
public byte[] getSignature() {
    try {
        signature.update(outputStream.toByteArray());
        return signature.sign();
    } catch (GeneralSecurityException gse) {
        gse.printStackTrace();
        return null;
    }
} 
```

返回的值为`KeyChain.createInstallIntent()`：

```
04-21 18:31:41.054: I/Intent(1645): Intent { act=android.credentials.INSTALL cmp=com.android.certinstaller/.CertInstallerMain } 
```

SettingsFragment.onListItemClick 中的代码是：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {

    CheckedTextView textview = (CheckedTextView)v;
    textview.setChecked(!textview.isChecked());

    if(position==0)
    {
        if(textview.isChecked())
        {
            encrypted=true;
            System.out.println("Encrypted true");
        }
        else
        {   
            encrypted=false;
            System.out.println("Encrypted false");
        }
    }
    else if(position==1)
    {

        if(textview.isChecked())
        {
            signed=true;
            System.out.println("Signed True");

            if(!KeyManager.hasKeys(l.getContext())){
                KeyManager.createKeyPair(l.getContext());
                SeTIKeyUpload upload = new SeTIKeyUpload();
                String setiUpload = upload.keyUploadString(l.getContext());
                SeTIChatService mService = SeTIChatServiceBinder.getService();
                mService.sendMessage(setiUpload);
            }
        }
        else
        {
            signed=false;
            System.out.println("Signed False");
        }   
    }
    System.out.println(position+"position"+", encrypted: "+encrypted+", signed: "+signed);
    SharedPreferences sharedPreferences = v.getContext().getSharedPreferences("Settings", MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putBoolean("encrypted", encrypted);
    editor.putBoolean("signed", signed);
    editor.commit();
} 
```

我检查了 Certificate 和 PKCS12 不为空，所以 Intent 不为空。

错误控制台：

```
04-21 17:17:31.524: E/AndroidRuntime(927): FATAL EXCEPTION: main
04-21 17:17:31.524: E/AndroidRuntime(927): java.lang.NullPointerException
04-21 17:17:31.524: E/AndroidRuntime(927):  at android.app.Activity.startActivityForResult(Activity.java:3370)
04-21 17:17:31.524: E/AndroidRuntime(927):  at android.app.Activity.startActivityForResult(Activity.java:3331)
04-21 17:17:31.524: E/AndroidRuntime(927):  at android.app.Activity.startActivity(Activity.java:3566)
04-21 17:17:31.524: E/AndroidRuntime(927):  at android.app.Activity.startActivity(Activity.java:3534)
04-21 17:17:31.524: E/AndroidRuntime(927):  at es.uc3m.setichat.utils.KeyManager.savePrivateKeyInKeyChain(KeyManager.java:288)
04-21 17:17:31.524: E/AndroidRuntime(927):  at es.uc3m.setichat.utils.KeyManager.createKeyPair(KeyManager.java:188)
04-21 17:17:31.524: E/AndroidRuntime(927):  at es.uc3m.setichat.activity.SettingsFragment.onListItemClick(SettingsFragment.java:102)
04-21 17:17:31.524: E/AndroidRuntime(927):  at android.app.ListFragment$2.onItemClick(ListFragment.java:160)
04-21 17:17:31.524: E/AndroidRuntime(927):  at android.widget.AdapterView.performItemClick(AdapterView.java:298)
04-21 17:17:31.524: E/AndroidRuntime(927):  at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
04-21 17:17:31.524: E/AndroidRuntime(927):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
04-21 17:17:31.524: E/AndroidRuntime(927):  at android.widget.AbsListView$1.run(AbsListView.java:3423)
04-21 17:17:31.524: E/AndroidRuntime(927):  at android.os.Handler.handleCallback(Handler.java:725)
04-21 17:17:31.524: E/AndroidRuntime(927):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-21 17:17:31.524: E/AndroidRuntime(927):  at android.os.Looper.loop(Looper.java:137)
04-21 17:17:31.524: E/AndroidRuntime(927):  at android.app.ActivityThread.main(ActivityThread.java:5039)
04-21 17:17:31.524: E/AndroidRuntime(927):  at java.lang.reflect.Method.invokeNative(Native Method)
04-21 17:17:31.524: E/AndroidRuntime(927):  at java.lang.reflect.Method.invoke(Method.java:511)
04-21 17:17:31.524: E/AndroidRuntime(927):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-21 17:17:31.524: E/AndroidRuntime(927):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-21 17:17:31.524: E/AndroidRuntime(927):  at dalvik.system.NativeStart.main(Native Method) 
```

我在我的 AndroidManifest 中定义了这个类，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="es.uc3m.setichat"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_CONTACTS"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/setichat_icon"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
       .
       .
       .
        <activity android:name=".utils.KeyManager"></activity>
    </application>

</manifest> 
```

**编辑**：

现在我可以启动 Intent，但应用程序在“提取证书”窗口中要求输入密码，并且在创建证书时我没有设置任何密码。有什么提示吗？

我尝试使用 KeyStore 存储它，但输入密码时没有区别：

```
KeyStore ks = KeyStore.getInstance("BKS");
char [] password={'P', 'A', 'S', 'S'};
ks.load(new ByteArrayInputStream(certBytes), password);
ks.setKeyEntry("hostname", kp.getPrivate(), password, new java.security.cert.Certificate[] { certificate });
File keystore = new File("keystore");
FileOutputStream fos = new FileOutputStream(keystore);
ks.store(fos, password);
fos.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:09:28.057

您的活动上下文很可能在`savePrivateKeyInKeyChain()`执行时消失了。我猜您的函数是通过后台线程的回调执行的，或者它是在活动的生命周期准备好其上下文之前执行的。

`getContext()`您可以通过调试该函数的结果来轻松检查是否是这种情况。如果它给`null`，那是你的问题。

# ios - iOS - 发现漫游网络的 RN-42 BTLE 芯片

> ID：16134174
> 
> 赞同：1
> 
> 时间：2013-04-21T17:38:39.653
> 
> 标签：ios, bluetooth

我正在做一个项目，我必须发现 Roving Networks - [RN-42](http://www.rovingnetworks.com/Apple_iOS_Support)提供的蓝牙芯片。开发套件附带一个 ios 应用程序，它显示了如何与芯片通信，但首先我们必须使用 iOS 设置连接/配对（手动）与芯片。它使用 EAAccessory 框架并且工作正常。我想要的是从我的应用程序中发现蓝牙芯片，然后自动连接/配对，但我找不到如何做到这一点的方法。我正在使用 CoreBluetooth 框架来发现芯片，但什么也没出现。这是我尝试使用 CBCentralManager 扫描 BT 设备的方法

```
[self.centralManager scanForPeripheralsWithServices:nil
                                            options:nil]; 
```

但是我在回调中没有得到任何回报。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:40:42.577

CoreBluetooth 框架只允许您发现支持蓝牙 LE 的设备，根本不显示经典蓝牙（BT3.0 和更早版本）设备。

Apple 有 API 调用来发现经典的蓝牙设备，但我认为它们最近已被删除。

您需要这样的产品才能进行应用配对和连接： http: [//www.bluegiga.com/BLE113_Bluetooth_Smart_module](http://www.bluegiga.com/BLE113_Bluetooth_Smart_module)

# java - Primefaces 3.5 仪表板组件

> ID：16134177
> 
> 赞同：0
> 
> 时间：2013-04-21T17:38:47.940
> 
> 标签：java, eclipse, jsf, primefaces

我想实现我在我的页面中使用的 pf 3.5[仪表板组件](http://www.primefaces.org/showcase/ui/dashboard.jsf)`*.xhtml`：

```
 <p:growl id="growl" showDetail="true" />

                <p:dashboard id="board" model="#{dashboardBean.model}">
                    <p:ajax event="reorder" listener="#{dashboardBean.handleReorder}"
                        update="growl" />

                    <p:panel id="products" header="Products">
                        <h:outputText value="Product Content" />
                    </p:panel>

                    <p:panel id="plans" header="Plans">
                        <h:outputText value="Plans Content" />
                    </p:panel>

                    <p:panel id="notes" header="Notes">
                        <h:outputText value="Notes Content" />
                    </p:panel>
                </p:dashboard> 
```

作为我的后端：

我正在使用与上面[链接](http://www.primefaces.org/showcase/ui/dashboard.jsf)相同的 bean ，并且：

```
public DashboardBean() {  
    model = new DefaultDashboardModel();  
    DashboardColumn column1 = new DefaultDashboardColumn();  
    DashboardColumn column2 = new DefaultDashboardColumn();  
    DashboardColumn column3 = new DefaultDashboardColumn();  

    column1.addWidget("products");  

    column2.addWidget("plans");  

    column3.addWidget("notes");  

    model.addColumn(column1);  
    model.addColumn(column2);  
    model.addColumn(column3);  
} 
```

但是，当我在服务器上打开我的页面时，什么都没有显示。我的html输出：

```
<form id="form" enctype="application/x-www-form-urlencoded" action="/ProductOverview.xhtml" method="post" name="form">
<input type="hidden" value="form" name="form">
<span id="form:growl"></span>
<div id="form:board" class="ui-dashboard"></div>
<input id="j_id1:javax.faces.ViewState:0" type="hidden" autocomplete="off" value="-5329509311621774370:-4596343252720161135" name="javax.faces.ViewState">
</form> 
```

我真的很感谢你的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T05:08:06.247

添加一个  `@ManagedBean` 和 `@SessionScoped`  （例如）注释，

像这样

```
@ManagedBean 
@SessionScoped 
public DashboardBean(){ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T20:16:17.377

您的 xhtml 页面可能有错误。您正在引用`#{dashboardBean.handleReorder}`我在您的代码中看不到的内容（除非您没有发布它），如果您的 bean 中没有方法 handleReorder 那么它将无法正确构建您的页面。

所以删除 listener 方法或 create it 方法。

# java - 为什么在更新资源时在 URI 中有一个 id 参数？

> ID：16134181
> 
> 赞同：5
> 
> 时间：2013-04-21T17:39:18.497
> 
> 标签：java, spring, rest, jakarta-ee

我正在创建一个 API，我想知道为什么在 PUT 的 URI 中有一个 id 参数很常见？

比如`PUT /cars/5` 为什么没有`PUT /cars`？请求实体包含一个 id 字段还不够吗？我可以从该实体获取 id，还是这样做有一些缺点，这样做是否被认为不好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:48:49.847

因为如果您要向 发送`PUT`请求`/cars`，从语义上讲，这意味着您正在尝试修改有关*汽车集的*属性，而不是修改*单个汽车的*属性。RESTful API 中的 URI 应指示操作所针对的确切资源，因此如果您正在修改资源，您的 URI 应准确指示该资源。

此外，来自[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.6)：

> PUT 请求中的 URI 标识了请求中包含的实体——用户代理知道 URI 的意图，服务器不得尝试将请求应用于其他资源。

因此规范表明，如果客户端知道资源的唯一 ID，则应将其包含在 URI 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T17:44:11.587

这来自[休息](http://en.wikipedia.org/wiki/REST_API)“意识形态”。

这个想法是一个 url 唯一地代表一个实体 - 所以你必须将你正在创建/编辑的实体放到该实体的 url 中。

引用维基百科页面：

> **资源识别**
> 
> 在请求中标识单个资源，例如在基于 Web 的 REST 系统中使用 URI。资源本身在概念上与返回给客户端的表示是分开的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T17:46:35.927

`PUT`旨在更新一个精确的实体。

仅使用`/cars`，您就不会专注于特定实体。

与您所写的相反，您的完整实体不是在基本字符串 (URI) 中传递的。

除非您的目标方法专注于硬编码`car` `id`......但我不这么认为......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-21T17:49:20.470

它归结为API接口。API 设计有多种方法。而且，就像您建议的那样，您可以将 id 排除在请求之外。但是，由于许多 API 设计都是按照您描述的方式构建的，例如 PUT /cars/5，因此它被认为是一种很好的做法。

基本上，您有 8 种方式与您的 API 进行交互。GET、POST、PUT、DELETE 和一个可选的 HEAD。（如果你算头，总数将是 9 或 10，具体取决于交互）。

因此，要清除它，您有两种 GET 方式。GET /cars 将检索所有汽车，GET /cars/5 将检索任何 ID 为 5 的汽车。因此，您有两种使用 GET 的方法。POST、PUT 和 DELETE 也是如此。4*2 = 8 对吗？

现在，有人会说 PUT /cars 会模棱两可，但是如果没有额外的 ID 字段，您完全可以这样做，因为正如您所提到的，您已经在请求中传递了 ID 字段。

Apigee 的人研究 API 设计已经有一段时间了。我建议观看他们的一些视频，以更好地理解 API 设计的含义以及为什么某些论点有效，而另一些则无效。

[Apigee 最佳做法](http://apigee.com/about/api-best-practices)

# cuda - Simpson 将实值函数与 CUDA 集成的方法

> ID：16134188
> 
> 赞同：2
> 
> 时间：2013-04-21T17:39:53.780
> 
> 标签：cuda, integral

我正在尝试通过辛普森的方法在 CUDA 中进行代码集成。

这是辛普森规则的公式

![在此处输入图像描述](https://i.stack.imgur.com/CDH9k.png)

哪里`x_k = a + k*h`。

这是我的代码

```
 __device__ void initThreadBounds(int *n_start, int *n_end, int n, 
                                        int totalBlocks, int blockWidth)
    {
        int threadId = blockWidth * blockIdx.x + threadIdx.x;
        int nextThreadId = threadId + 1;

        int threads = blockWidth * totalBlocks;

        *n_start = (threadId * n)/ threads;
        *n_end =  (nextThreadId * n)/ threads;
    }

    __device__ float reg_func (float x)
    {
        return x;
    }

    typedef float (*p_func) (float);

    __device__ p_func integrale_f = reg_func;

    __device__ void integralSimpsonMethod(int totalBlocks, int totalThreads, 
                    double a, double b, int n, float p_function(float), float* result)
    {
        *result = 0;

        float h = (b - a)/n; 
        //*result = p_function(a)+p_function(a + h * n);
        //parallel
        int idx_start;
        int idx_end;
        initThreadBounds(&idx_start, &idx_end, n-1, totalBlocks, totalThreads);
        //parallel_ends
        for (int i = idx_start; i < idx_end; i+=2) {
            *result +=  ( p_function(a + h*(i-1)) + 
                          4 * p_function(a + h*(i)) + 
                          p_function(a + h*(i+1)) ) * h/3;

        }   
    } 

    __global__ void integralSimpson(int totalBlocks, int totalThreads,  float* result)
    {
        float res = 0;

        integralSimpsonMethod(totalBlocks, totalThreads, 0, 10, 1000, integrale_f, &res);
        result[(blockIdx.x*totalThreads + threadIdx.x)] = res;

        //printf ("Simpson method\n");
    }

    __host__ void inttest()
    {

        const int blocksNum = 32;
        const int threadNum = 32;

        float   *device_resultf; 
        float   host_resultf[threadNum*blocksNum]={0};

        cudaMalloc((void**) &device_resultf, sizeof(float)*threadNum*blocksNum);
            integralSimpson<<<blocksNum, threadNum>>>(blocksNum, threadNum, device_resultf);
        cudaThreadSynchronize();

        cudaMemcpy(host_resultf, device_resultf, sizeof(float) *threadNum*blocksNum, 
                      cudaMemcpyDeviceToHost);

        float sum = 0;
        for (int i = 0; i != blocksNum*threadNum; ++i) {
            sum += host_resultf[i];
            //  printf ("result in %i cell = %f \n", i, host_resultf[i]);
        }
        printf ("sum = %f \n", sum);
        cudaFree(device_resultf);
    }

int main(int argc, char* argv[])
{

   inttest();

    int i;
    scanf ("%d",&i);

} 
```

`n`问题是：当小于 100000时它工作错误。对于从`0`到的积分`10`，结果是`~99`，但是当`n = 100000`或更大时它工作正常，结果是`~50`。

怎么了，伙计们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T10:11:05.480

这里的基本问题是您不了解自己的算法。

您的`integralSimpsonMethod()`函数被设计成每个线程在积分域中的每个子区间至少采样 3 个正交点。因此，如果选择 n 使其小于内核调用中线程数的四倍，则每个子区间不可避免地会重叠，从而导致积分不正确。您需要确保代码检查并缩放线程数或 n，以便在计算积分时它们不会产生重叠。

如果您这样做不是为了自我教育，那么我建议您查看辛普森规则的*复合*版本。这更适合并行实现，如果正确实现，性能会大大提高。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-22T21:18:24.113

我会提出一种使用 CUDA Thrust 来集成 Simpson 的方法。你基本上需要五个步骤：

1.  生成辛普森的正交权重；
2.  生成函数采样点；
3.  生成函数值；
4.  计算正交权重和函数值之间的元素乘积；
5.  将上述产品相加。

第 1 步需要创建一个元素重复多次的数组，即`1 4 2 4 2 4 ... 1`对于 Simpson 的情况。这可以通过在[cuda 推力库重复向量中多次](https://stackoverflow.com/questions/16900837/cuda-thrust-library-repeat-vector-multiple-times)借用 Robert Crovella 的方法来实现。

步骤 #2 可以通过使用 couting_iterators 并[在 CUDA Thrust library 中的目的和使用counting_iterators 中](https://stackoverflow.com/questions/18705190/purpose-and-usage-of-counting-iterators-in-cuda-thrust-library)借用talonmies 方法来完成。

步骤 #3 是`thrust::transform`.

步骤#4 和#5 可以一起完成`thrust::inner_product`。

**当其他正交积分规则**感兴趣时，也可以利用这种方法。

这是代码

```
#include <thrust/iterator/counting_iterator.h>
#include <thrust/iterator/transform_iterator.h>
#include <thrust/iterator/permutation_iterator.h>
#include <thrust/iterator/counting_iterator.h>
#include <thrust/iterator/constant_iterator.h>
#include <thrust/inner_product.h>
#include <thrust/functional.h>

#include <thrust/fill.h>
#include <thrust/device_vector.h>
#include <thrust/host_vector.h>

// for printing
#include <thrust/copy.h>
#include <ostream>

#define STRIDE 2
#define N 100

#define pi_f  3.14159265358979f                 // Greek pi in single precision

struct sin_functor
{
    __host__ __device__
    float operator()(float x) const
    {
        return sin(2.f*pi_f*x);
    }
};

template <typename Iterator>
class strided_range
{
    public:

    typedef typename thrust::iterator_difference<Iterator>::type difference_type;

    struct stride_functor : public thrust::unary_function<difference_type,difference_type>
    {
        difference_type stride;

        stride_functor(difference_type stride)
            : stride(stride) {}

        __host__ __device__
        difference_type operator()(const difference_type& i) const
        {
            return stride * i;
        }
    };

    typedef typename thrust::counting_iterator<difference_type>                   CountingIterator;
    typedef typename thrust::transform_iterator<stride_functor, CountingIterator> TransformIterator;
    typedef typename thrust::permutation_iterator<Iterator,TransformIterator>     PermutationIterator;

    // type of the strided_range iterator
    typedef PermutationIterator iterator;

    // construct strided_range for the range [first,last)
    strided_range(Iterator first, Iterator last, difference_type stride)
    : first(first), last(last), stride(stride) {}

    iterator begin(void) const
    {
        return PermutationIterator(first, TransformIterator(CountingIterator(0), stride_functor(stride)));
    }

    iterator end(void) const
    {
        return begin() + ((last - first) + (stride - 1)) / stride;
    }

    protected:
        Iterator first;
        Iterator last;
        difference_type stride;
};

int main(void)
{
    // --- Generate the integration coefficients
    thrust::host_vector<float> h_coefficients(STRIDE);
    h_coefficients[0] = 4.f;
    h_coefficients[1] = 2.f;

    thrust::device_vector<float> d_coefficients(N);

    typedef thrust::device_vector<float>::iterator Iterator;
    strided_range<Iterator> pos1(d_coefficients.begin()+1, d_coefficients.end()-2, STRIDE);
    strided_range<Iterator> pos2(d_coefficients.begin()+2, d_coefficients.end()-1, STRIDE);

    thrust::fill(pos1.begin(), pos1.end(), h_coefficients[0]);
    thrust::fill(pos2.begin(), pos2.end(), h_coefficients[1]);

    d_coefficients[0]       = 1.f;
    d_coefficients[N-1]     = 1.f;

    // print the generated d_coefficients
    std::cout << "d_coefficients: ";
    thrust::copy(d_coefficients.begin(), d_coefficients.end(), std::ostream_iterator<float>(std::cout, " "));  std::cout << std::endl;

    // --- Generate sampling points
    float a     = 0.f;
    float b     = .5f;

    float Dx    = (b-a)/(float)(N-1);

    thrust::device_vector<float> d_x(N);

    thrust::transform(thrust::make_counting_iterator(a/Dx),
        thrust::make_counting_iterator((b+1.f)/Dx),
        thrust::make_constant_iterator(Dx),
        d_x.begin(),
        thrust::multiplies<float>());

    // --- Calculate function values
    thrust::device_vector<float> d_y(N);

    thrust::transform(d_x.begin(), d_x.end(), d_y.begin(), sin_functor());

    // --- Calculate integral
    float integral = (Dx/3.f) * thrust::inner_product(d_y.begin(), d_y.begin() + N, d_coefficients.begin(), 0.0f);

    printf("The integral is = %f\n", integral);

    getchar();

    return 0;
} 
```

# android - 如何在 android 4.0 中创建全屏？

> ID：16134189
> 
> 赞同：1
> 
> 时间：2013-04-21T17:40:01.610
> 
> 标签：android, android-4.0-ice-cream-sandwich

**您好，** 我需要在 android 4.0 中全屏显示（我必须隐藏后退按钮、主页...）我使用过`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"` 但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:40:58.770

主页按钮和后退按钮无法隐藏...用户始终需要访问这些按钮，因此黑条将始终显示在屏幕上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:44:26.470

就像在一个[相关问题](https://stackoverflow.com/questions/11394843/how-can-i-disable-android-4-0-home-button)中写 K_Anas 一样，出于安全原因并且因为是一个简单的反模式解决方案，在 Android 4.0 中不可能隐藏 Homebutton 和 backbutton。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T17:57:41.327

您可以使用[SYSTEM_UI_FLAG_HIDE_NAVIGATION](http://developer.android.com/reference/android/view/View.html#SYSTEM_UI_FLAG_HIDE_NAVIGATION)暂时隐藏系统导航，但是当用户触摸屏幕时它总是会重新出现。触摸屏幕时，甚至通知栏也会重新出现。

出于安全原因，您不能使用主页按钮完全隐藏系统栏。

# c++ - 为什么我会收到错误“浮点异常”？

> ID：16134190
> 
> 赞同：0
> 
> 时间：2013-04-21T17:40:02.093
> 
> 标签：c++, perfect-numbers

我正在尝试编写一个找到低于用户输入的完美数字的代码。正确输出示例：

> 输入一个正整数：100
> 6 是完美数
> 28 是完美数
> 没有小于或等于 100 的完美数

但是当我运行我的代码时，我得到了错误`Floating point exception`

并且不知道为什么。我究竟做错了什么？

这是我的代码：

```
#include <iostream>

using namespace std;

bool isAFactor(int, int);

int main(){
    int x, y;
    int countOut, countIn;
    int userIn;
    int perfect = 0;

    cout << "Enter a positive integer: ";
    cin >> userIn;

    for(countOut = 0; countOut < userIn; countOut++){
        for(countIn = 1; countIn <= countOut; countIn++){
            if(isAFactor(countOut, countIn) == true){
                countOut = countOut + perfect;
            }
        }

        if(perfect == countOut){
            cout << perfect << " is a perfect number" << endl;
        }

        perfect++;
    }

    cout << "There are no more perfect numbers less than or equal to " << userIn << endl;

    return 0;
}

bool isAFactor(int inner, int outer){
    if(outer % inner == 0){
        return true;
    }

    else{
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:14:47.840

只是交换了论点。您正在调用该函数，因为`isAFactor(countOut, countIn)`您应该调用`isAFactor(countIn, countOut)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:27:02.087

为了澄清@Aki Suihkonen 的评论，在执行时： `outer % inner` 如果`inner`为零，您将得到*除以零的*错误。

这可以通过调用来追溯`isAFactor(0, 1)`。
它在你的`for`循环中`main`。

第一个参数 to在最外层循环 `isAFactor(countOut, countIn)`中赋值：`for``for (countOut = 0; ...`

请注意您正在初始化的值`countOut`。

**编辑1：**

```
Change your `isAFactor` function to:  

    if (inner == 0)
    {
       cerr << "Divide by zero.\n";
       cerr.flush();
       return 0;
    }
    if (outer % inner ... 
```

`cerr`在上面的任一行放置一个断点。
当执行在那里停止时，查看*Stack Trace*。一个好的调试器还允许您检查跟踪中每个点的参数/值。

# ef-code-first - 实体框架 5、代码优先、全文搜索但可通过 CreateQuery 查询？

> ID：16134193
> 
> 赞同：3
> 
> 时间：2013-04-21T17:40:08.157
> 
> 标签：ef-code-first, full-text-search, iqueryable, createquery

我正在使用带有 Code First 方法的 .NET 4.5 和 EF 5，现在我需要实现全文搜索。我已经阅读了很多关于它的内容，到目前为止，我的结论是：

*   存储过程和表值函数不能用 Code First 映射。

*   我仍然可以使用动态 sql 调用它们

    *dbContext.Database.SqlQuery<电影>（Sql，参数）*

但这会返回 IEnumerable 并且我想要 IQueryable 以便在从数据库服务器获取数据之前进行更多过滤。我知道我可以将这些参数发送到 Db 函数，但我不希望这样。

*   我发现可以满足我需求的是来自 IObjectContextAdapter 的 CreateQuery 函数，它看起来像这样（全选仅用于测试）：

    *IQueryable<Movie> 结果 = ((IObjectContextAdapter)dbContext).ObjectContext.CreateQuery<Movie>("SELECT * FROM Movie");*

*   但是执行此操作会引发异常" 'System.Data.EntitySqlException 未处理 HResult=-2146232006 消息=查询语法无效。近期'*'，第 1 行，第 9 列。'

所以问题是：

*   为什么我会得到这个异常并且可以修复它？

*   如果没有，Code First 有什么方法可以执行返回 IQueryable 的 FTS 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:35:11.407

像这样试试

```
ObjectQuery<Movie> query = 
    objectContext.CreateQuery<Movie>(@"SELECT VALUE movie FROM Movies"); 
```

至于`why`看到这些链接

> 与 Transact-SQL 的区别 与 Transact-SQL 不同，Entity SQL 不支持在 SELECT 子句中使用 * 参数。反而

[实体 SQL 参考 - SELECT](http://msdn.microsoft.com/en-us/library/bb399554.aspx)
["SELECT VALUE" - LINQ/实体框架查询中的值关键字](https://stackoverflow.com/questions/15386766/select-value-value-keyword-in-linq-entity-framework-query)

# php - 如何在另一个文件中扩展一个类

> ID：16134197
> 
> 赞同：0
> 
> 时间：2013-04-21T17:40:41.727
> 
> 标签：php, oop

所以我一直在做一些 OOP，但遇到了障碍。我正在尝试在另一个 PHP 文件中扩展一个类。扩展类应该动态加载。我是这样设置的：

**bootstrap.php**文件：

```
<?php
class bootstrap{

    public $lang;
    public $page;
    public $action;
    public $id;
    public $message;

    public function __construct() {
       $this->buildPage();
    }

    public function buildPage() {       
        if($this->page == 'home'){
            require_once CONTR . 'view.php';
            new view($this->lang, $this->page, $this->action, $this->id, $this->message);
        }
    }
} 
```

和**view.php**文件：

```
class view extends bootstrap{

    public $lang;
    public $page;
    public $action;
    public $id;
    public $message;

    public function __construct($lang, $page, $action, $id, $message) {
        parent::__construct();
        $this->lang = $lang;
        $this->page = $page;
        $this->action = $action; 
        $this->id = $id; 
        $this->message = $message;
        $this->showPage();
    }

    public function showPage() {
        require_once VIEW . 'header.php';

        //echo VIEW . 'header.php';

        //prepare SQL statements
        $page = $this->page;
        $name = "name_" . $this->lang;

        //SQL statement
        $selectdata = mysql_query("SELECT * FROM pages WHERE $name = '$page'");
        $result = mysql_fetch_array($selectdata);

        //Echo content
        if($result["content_$this->lang"] == NULL){
            echo "no content";
        } else {
            echo $result["content_$this->lang"];
        }

        //Debugging
        echo '<br>' . $this->lang;
        echo '<br>' . $this->page;
        echo '<br>' . $name;
        echo '<br>' . $page;

        require_once VIEW . 'footer.php';
    }
} 
```

--> 索引.php

```
require('front/config.php');
require('front/bootstrap.php');

 $site = new bootstrap(); 
```

完成此操作后，我尝试使用扩展通过引导类调用视图类。

我一直在尝试很多不同的事情，但我认为我已经很接近了。有谁知道如何解决这个问题？当我把它放在 bootstrap 类中时，showpage 函数确实有效，但是当我把它放在视图类中时，什么都不起作用。提前致谢！

# php - 如何访问使用 cloudflare 的网站？

> ID：16134203
> 
> 赞同：0
> 
> 时间：2013-04-21T17:41:00.793
> 
> 标签：php, cloudflare

我的 curl 脚本在访问具有 cloudflare 的网站时遇到问题。

当网站不使用 cloudflare 之前，它可以正常工作。

我的脚本中还有我正在使用的浏览器。

```
curl_setopt ($ch2, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
```

当我打开 php 脚本时。

我被困在

```
Checking your browser before accessing xrshellbooter.com.
DDoS protection by CloudFlare 
```

所以它不允许我访问该网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-30T03:25:47.417

CloudFlare 有一个由网站所有者打开的启用 javascript 的页面，旨在仅允许启用了 javascript 的实际工作浏览器进入该网站。您需要让 CloudFlare 帐户的所有者将您尝试发出请求的 IP 列入白名单。您的配置和代码应该在那之后工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T00:36:22.723

这似乎有点旧......但我会回应......

无论您在做什么都会触发 DDoS 触发器，并且您看到的插页式页面正在检查以确保您不是机器人。您应该让网站所有者将呼叫来源的 IP 列入白名单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T16:11:36.453

如果您拥有该域，您可以在 CloudFlare 中将您自己的服务器 IP 列入白名单，并且您应该不会再次看到 DDoS 保护屏幕。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-04-21T17:50:32.433

如果站点是[http://www.example.com](http://www.example.com)，您可以使用[http://direct.example.com](http://direct.example.com)

# c# - 使用 c# 和 API 将回复插入到现有的 SugarCRM 案例中

> ID：16134210
> 
> 赞同：0
> 
> 时间：2013-04-21T17:41:43.147
> 
> 标签：c#, .net, sugarcrm

我有以下代码通过 C# 在 SugarCRM 中创建案例。

我在问，有人知道我将如何通过 c# 将这个案例的回复添加到 SugarCRM api 吗？

```
NameValueCollection fieldListCollection = new NameValueCollection();

fieldListCollection.Add("id", string.Empty);
fieldListCollection.Add("name", "Something went wrong");
fieldListCollection.Add("description", "This software is not working");
fieldListCollection.Add("status", "test"); //New, Assigned, Closed, Pending Input, Rejected, Duplicate
fieldListCollection.Add("priority", "test"); //High, Medium, Low
fieldListCollection.Add("account_id", AccountId); // Don't pass this if you don't want to associate an account with it
fieldListCollection.Add("contact_id", ContactId); // Don't pass this if you don't want to associate with this contact with it

SugarCRM.name_value[] fieldList = new SugarCRM.name_value[fieldListCollection.Count];

int count = 0;
foreach (string name in fieldListCollection)
{
   foreach (string value in fieldListCollection.GetValues(name))
   {
      SugarCRM.name_value field = new SugarCRM.name_value();
      field.name = name; field.value = value;
      fieldList[count] = field;
   }
   count++;
}

SugarCRM.new_set_entry_result result = SugarClient.set_entry(SessionID, "Cases", fieldList); //Accounts, Incidents, Contacts, Cases
Console.WriteLine("New ID: " + result.id); 
```

# applescript - 使用 applescript 为所有用户退出 iTunes

> ID：16134212
> 
> 赞同：0
> 
> 时间：2013-04-21T17:41:57.187
> 
> 标签：applescript, itunes

我在 iMac 上安装了 iTunes，以便在两个不同的用户之间共享一个 iTunes 库。这意味着如果一个人忘记退出 iTunes，另一个用户必须登录到另一个帐户并退出 iTunes，然后才能在自己的帐户上使用它。

那么有没有办法使用applescript为所有用户退出应用程序？我知道告诉它退出当前用户的应用程序很容易，但无法弄清楚是否可以让它退出另一个用户的该应用程序实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:25:08.483

我目前不在我的 Mac 上，因此无法进一步研究。

但是，如果您关闭快速用户切换，它可能会更好。这样做不会阻止两个或更多用户登录，但会隐藏它的 GUI。

创建 Automator 服务或应用程序或 Applecript/应用程序或脚本。运行此 AppleScript 代码。

```
tell application "iTunes" to quit
do shell script "'/System/Library/CoreServices/Menu Extras/User.menu/Contents/Resources/CGSession' -suspend" 
```

此代码应退出 iTunes，然后显示登录屏幕。下一个用户可以登录的地方。其他用户不会被注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:40:53.727

您可以简单地使用 shell（终端）命令。

您可以`killall iTunes`在终端中输入，也可以`do shell command "killall iTunes"`在 Applescript 中输入。

这听起来不太健康，但实际上只是“强制退出”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:44:28.453

由于我还不能回复，我就这样做：

马克亨特：

做那个

```
tell application "iTunes" to quit
do shell script "'/System/Library/CoreServices/Menu\\ Extras/User.menu/Contents/Resources/CGSession' -suspend" 
```

# ios - 在 2 页 UIPageViewController 中实现缩放和平移

> ID：16134214
> 
> 赞同：2
> 
> 时间：2013-04-21T17:42:14.117
> 
> 标签：ios, uipageviewcontroller

我正在尝试在横向模式下在 2 页 UIPageViewController 上实现缩放和平移。我已将滚动视图设置为 pageviewcontroller 的父视图控制器的视图。这允许 pageviewcontroller 缩放，但不能平移。这是为 UIPageViewcontroller 实现缩放和平移的正确方法还是我应该采取什么方法？

# vb.net - vb.net 创建一个正方形以显示由颜色对话框选择的颜色

> ID：16134216
> 
> 赞同：1
> 
> 时间：2013-04-21T17:42:18.837
> 
> 标签：vb.net, colordialog

我想要一个小方块来显示颜色对话框当前选择的颜色。

它应该是这样[的： 我想要的图片](http://imgur.com/AusfdWo)

而绿色框，当他们选择一个时，应该更新为另一种颜色。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:45:20.593

```
Using colorDialog As New ColorDialog
    'If the user actually selected a color Then
    If colorDialog.ShowDialog() = DialogResult.OK Then
        'Set the background color of the picture box = color selected from the color dialog
        PictureBox1.BackColor = colorDialog.Color
    End If
End Using 
```

将此代码放在您的`Button_Click`事件处理程序中。

# django - Django - 意外删除超级用户

> ID：16134219
> 
> 赞同：0
> 
> 时间：2013-04-21T17:42:31.877
> 
> 标签：django, django-users

我正在使用 Django 1.4.5 并意外删除了超级用户。如何为现有项目重新创建超级用户帐户？我找到了在最初设置项目时显示的教程，但无法弄清楚如何为现有项目创建超级用户。

我确实`django-admin.py createsuperuser`在终端尝试过，但没有任何运气

我很感激时间和反馈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T17:49:18.350

您可以通过 manage.py 调用此命令

```
./manage.py createsuperuser 
```

# java - 在 Java 中将输入流转换为数组的最佳方法是什么？

> ID：16134223
> 
> 赞同：1
> 
> 时间：2013-04-21T17:42:52.887
> 
> 标签：java, multithreading, serial-port, arduino

我正在编写代码，它将接受来自 arduino 的字节值，将它们存储为数组，执行一些数学计算，然后将值发送回 arduino。现在我可以向 Arduino 发送 127 个值并返回 127 个值，但它们是字符串类型，任何尝试使用 Integer 类转换这些字符串都会导致程序挂起。我相信缓冲区有时会提供空字符串，而 parseInt() 不知道该怎么做。有没有人有什么建议？我是java的初学者，愿意接受更好的解决方案。

这是我的代码：

```
package GridMap;

import gnu.io.CommPort;
import gnu.io.CommPortIdentifier;
import gnu.io.SerialPort;
import gnu.io.SerialPortEvent;
import gnu.io.SerialPortEventListener;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

/**
 *
*/
public class SerialWriter implements Runnable {

OutputStream out;
byte array[] = new byte[10];
byte c;

public SerialWriter(OutputStream out, byte[] in) {
    this.out = out;
    array = in;
}

public void run() {

        try {
            int index = 0;
            c = array[index];
            while ((c) > -1) {
                this.out.write(c);
                System.out.println("sent " + c);
                if (index == 64){
                    Thread.sleep(2);
                }
                index++;
                c = array[index];
            }
            TwoWaySerialComm.recieve();
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(-1);
        }

}
}

public class SerialReader implements Runnable {
static byte[] output = new byte[128];
private InputStream in;
private int[] buffer = new int[11];
static SerialPort thisSerialPort;
static OutputStream thisOut;
static String total = new String("333");

public SerialReader(InputStream in) {
    this.in = in;

    for (byte i = 0; i < 127; i++) {
            output[i] = i;
        }
    output[127] = - 1;
}
public void run ()
    {
        byte[] buffer = new byte[1024];
        int len = -1;
        int index = 0;
        int value;
        try
        {
            Thread.sleep(200);

            while (( len = this.in.read(buffer)) > -1 && index < 200)
            {

                String string = new String(buffer, 0, len);
                //value = Integer.getInteger(string, len);
               // System.out.print(value);
                //System.out.println("buffer" + value);
                System.out.print(string);
                index++;

            }

            TwoWaySerialComm.send(output);
        }
        catch (Exception e )
        {
            e.printStackTrace();
        } 
    }
public static int byteArrayToInt(byte[] b) 
{
return   b[3] & 0xFF |
        (b[2] & 0xFF) << 8 |
        (b[1] & 0xFF) << 16 |
        (b[0] & 0xFF) << 24;
}

}
public class TwoWaySerialComm {

static SerialPort serialPort;
static OutputStream out = null;
static InputStream in;
static Thread receiveThread;
static Thread sendThread;
static byte[] output = new byte[11];

public TwoWaySerialComm() {
    super();
}

void connect(String portName) throws Exception {
    CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(portName);
    if (portIdentifier.isCurrentlyOwned()) {
        System.out.println("Error: Port is currently in use");
    } else {
        CommPort commPort = portIdentifier.open(this.getClass().getName(), 2000);

        if (commPort instanceof SerialPort) {
            serialPort = (SerialPort) commPort;
            serialPort.setSerialPortParams(114400, SerialPort.DATABITS_8, SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);

        } else {
            System.out.println("Error: Only serial ports are handled by this example.");
        }
    }

}

static void send(byte[] output) {
    try {
        out = serialPort.getOutputStream();
        sendThread = new Thread(new SerialWriter(out, output));
        sendThread.start();
        //sendThread.join();
    } catch (Exception e) {
        System.out.println("Port Not Avaialable (send) ");
    }
}

static void recieve(){
    try {
    in = serialPort.getInputStream();
    receiveThread = new Thread(new SerialReader(in));
    receiveThread.start();
    receiveThread.join();
    } catch (Exception e) {

    }
}

public static void main(String[] args) {
    try {

        (new TwoWaySerialComm()).connect("COM3");

        for (byte i = 0; i < 10; i++) {
            output[i] = i;
        }
        output[10] = -1;
        send(output);  

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public static SerialPort returnSerialPort(){
    return serialPort;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:46:36.680

我不太明白描述。
但是关于这个问题的标题的答案就在这里。
[在 Java 中将 InputStream 转换为字节数组](https://stackoverflow.com/questions/1264709/convert-inputstream-to-byte-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:47:12.153

从 corsiKa 对[确定 String 是否为 Integer in Java](https://stackoverflow.com/questions/5439529/determine-if-a-string-is-an-integer-in-java)的回答中，您可以检查 String 是否是这样的有效 int：

```
public static boolean isInteger(String s) {
    try { 
        Integer.parseInt(s); 
    } catch(NumberFormatException e) { 
        return false; 
    }
    // only got here if we didn't return false
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T18:17:37.083

如果您想从流中获取 int，使用 BuffereInputStream 并使用返回 int 的 read() 方法更容易 -> 不需要转换。将此添加到您的 SerialReader 类中：

```
 Thread.sleep(200);
  BufferedInputStream input = new BufferedInputStream(in);

  while ((value = input.read()) != 1 && index < 200)
  {
    compute(value);
    index++;
  }
  input.close(); 
```

读取所有数据后，不要忘记关闭（）您的流。这在您编写时更为重要，因为如果您不关闭（），则不会写入所有数据（除非您之前刷新（））。

# vb.net - Vb.Net - 动态更改文本框背景颜色的类

> ID：16134227
> 
> 赞同：2
> 
> 时间：2013-04-21T17:43:11.873
> 
> 标签：vb.net, class, validation, textbox, backcolor

我想知道如何创建一个类来更改表单内的每个文本框 BackColor。更加具体：

1.  当文本框为空时，文本框背景颜色等于白色。
2.  当文本框获得焦点时，文本框的背景颜色发生变化。
3.  当文本框有任何文本时，文本框 BackColor 会发生变化。
4.  当文本框失去焦点时，文本框的背景颜色发生变化。

目前，我正在这样做。

```
Private Sub tb_Login_Enter(sender As Object, e As EventArgs) Handles tb_Login.Enter
    tb_Login.BackColor = Color.LightCyan
End Sub

Private Sub tb_Login_Leave(sender As Object, e As EventArgs) Handles tb_Login.Leave
    If tb_Login.Text <> "" Then
        tb_Login.BackColor = Color.LightGreen
    Else
        tb_Login.BackColor = Color.White
    End If 
```

但是，我的 from 中有很多 TextBox，那么，如何为它创建一个 Class 呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:41:19.343

您需要做的就是从 TextBox 控件继承。

```
Public Class TextBoxEx
    Inherits TextBox

    Private Sub TextBoxEx_Enter(sender As Object, e As EventArgs) Handles Me.Enter
        Me.BackColor = Color.LightCyan
    End Sub

    Private Sub TextBoxEx_Leave(sender As Object, e As EventArgs) Handles Me.Leave
        If Me.Text <> "" Then
            Me.BackColor = Color.LightGreen
        Else
            Me.BackColor = Color.White
        End If
    End Sub
End Class 
```

构建您的项目，然后用新的 TextBoxEx 控件替换您的 TextBox 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:24:50.230

您可以创建一个具有一组文本框控件的类。您可以通过 Form 或用户控件的 Controls 属性获取此集合，并验证控件的类型。在内部，该类必须订阅您列出的文本框控件集合的事件。最后，在处理事件的方法上，您必须编写相应地更改颜色的逻辑。请记住，句柄事件方法具有在第一个参数上触发事件的控件。

如果您有更多疑问，我可以更详细地介绍。

# cordova - 如何使用phonegap通过不同的页面继续录制到相同的音频文件？

> ID：16134232
> 
> 赞同：1
> 
> 时间：2013-04-21T17:43:31.880
> 
> 标签：cordova, asynchronous, audio-recording

我需要我的**phonegap**应用程序在其工作时在后台进行录音。为此，该`Media`对象工作得很好，问题是一旦我导航到新页面它就会停止记录。我没有找到任何方法来暂停和继续录制，即使可能我也不想这样做，因为录制会被剪掉。

我需要开始编写插件吗？

```
function startAudioRec() {
  var src = "rec.amr";
  audioRec = new Media(src, recordOnSuccess, recordOnError);
  audioRec.startRecord();
  circleBlink();
  console.log("test");

}
function recordOnError() {}
function recordOnSuccess() {}

var visible = true;
var recInterval;

function circleBlink() {
  recInterval = setInterval(blink, 1000);
  function blink() {
    var circle = document.getElementById('recCircle');
    if (visible) {
      circle.setAttribute("style", "visibility: hidden;");
      visible = false;
    } else {
      circle.setAttribute("style", "visibility: visible;");
      visible = true;
    }
  }
}
function stopAudioRec() {
  audioRec.stopRecord();
  clearInterval(recInterval);
  document.getElementById("recCircle").setAttribute("style", "visibility: hidden;");
  audioRec.release();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:51:52.300

也许您可以使用像 Dojo 这样的框架并将您的应用程序构建为[单页应用程序](http://en.wikipedia.org/wiki/Single-page_application)。然后当你导航到一个新页面时，它基本上会为你换掉 DOM 元素。从理论上讲，您将停留在同一个 HTML 页面上，因此在您告诉它之前它不应该停止录制。虽然只是一个想法......这是一个有趣的问题，请让我们知道你最终会做什么。祝你好运！

下面是一个在 Dojo 中构建的单页应用程序的简单示例：http: [//demos.dojotoolkit.org/demos/mobileSlideShow/demo.html](http://demos.dojotoolkit.org/demos/mobileSlideShow/demo.html)

应用程序测试中还有更多：http: [//archive.dojotoolkit.org/nightly/checkout/dojox/app/tests/](http://archive.dojotoolkit.org/nightly/checkout/dojox/app/tests/) 并非所有这些都是单页 Web 应用程序。我知道其他框架会为你做这可能更容易学习，抱歉我没有任何链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:50:55.693

到目前为止，我唯一的想法是动态删除所有 html 元素并使用 javascript 和 DOM 在同一页面上替换它们，从而在整个应用程序中保持在同一页面上而根本无需导航。更好的东西吗？我希望能够导航，我的解决方案并不直观。

```
 var page1=document.getElementsByName("page1");
    var size=page1.length;
    for(var i=0;i<size;i++){
        page1.removeChild(page1[0]);
    }
    var a=document.createElement("button");
    a.setAttribute("name","page2"); 
```

# android-ndk - android应用程序中的libjpeg-turbo不使用SIMD

> ID：16134237
> 
> 赞同：1
> 
> 时间：2013-04-21T17:44:19.240
> 
> 标签：android-ndk, simd, libjpeg-turbo

我按照此处的配方在我的 android 应用程序中成功编译了 libjpeg-turbo 库：[libjpeg-turbo for android](https://stackoverflow.com/questions/12260149/libjpeg-turbo-for-android)。

为了评估库中 NEON SIMD 指令的性能改进，我尝试启用/禁用 NEON 支持。有趣的是，没有区别。

挖掘代码，看起来`init_simd()`in`jsimd_arm.c`永远不会在运行时执行。

`libjpeg_arch_specific_init()`首次加载库时调用此函数。

我相信故障源于这个库是静态的而不是动态的，因此从未“加载”（请参阅​​本线程末尾的 DRC 评论：http: [//sourceforge.net/p/libjpeg-turbo/patches/26/](http://sourceforge.net/p/libjpeg-turbo/patches/26/)）

是否有意义？其他人看到这个问题吗？

谢谢！

# ruby-on-rails - 如何在 Rails 控制台中编写多行命令

> ID：16134240
> 
> 赞同：1
> 
> 时间：2013-04-21T17:44:28.047
> 
> 标签：ruby-on-rails

我是 Rails 和 linux 世界的新手。问题看起来很简单，但我很难在控制台中编写一些长命令。说，我必须运行一些活动记录查询才能在控制台中查看结果，下面的行完美

```
User.find(1) 
```

但是我不能在下面输入查询，因为最后 3 个字符会被截断

```
Category.includes(:posts => [{:comments => :guest}, :tags]).find(1) 
```

或发生如下奇怪的事情

```
nd(1)-p327 :009 > Category.includes(:posts => [{:comments => :guest}, :tags]).fin 
```

我需要做什么才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:53:35.323

如果您以句点结束一行 IRB 将假定它是一个多行命令：

```
Category.
includes(:posts => [{:comments => :guest}, :tags]).
find(1) 
```

奇怪的是它被截断了。您使用的是哪个终端应用程序？

# lua - 大文件中的查找功能错误

> ID：16134241
> 
> 赞同：0
> 
> 时间：2013-04-21T17:44:30.253
> 
> 标签：lua

我有一个关于 lua 和 io 库的问题。

我有这个简单的函数来获取文件大小：

```
function checkisoLIMG(file)
    local iso = assert(io.open(file, "rb"));
    if (iso) then
        local size = iso:seek("end");
        iso:close();
        return size;
    else
        return "error";
    end
end 
```

当我尝试获取大文件的大小（大约 3GB 或 4GB）时，该函数返回 nil 或 -1，但小文件可以正常工作。有人知道如何解决这个问题吗？或任何脚本来获取文件大小。

问题是 io.seek，因为程序打开文件没有问题，我可以寻找低于 2147483647 的位置（仅比 2GB 少 1 个字节），但是当我尝试查看 2GB 或更大的位置时会失败。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:39:23.820

这取决于 Lua 版本和操作系统。

```
-- Program
print(io.open[[D:\_Best Films\The Grudge 1,2\Proklyatie.2004.x264.BDRip.720p.mkv]]:seek'end')

-- Output on Lua 5.2.1 / Windows
5706609998

-- Output on Lua 5.1.4 / Windows
nil     Invalid argument        22 
```

对于这个问题，这不是纯粹的 Lua 解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:51:20.070

我不知道是什么导致了代码中的特定错误，但如果我想知道文件的大小，我会使用[LuaFilesystem](http://keplerproject.github.io/luafilesystem/manual.html#reference)库。它不是基本 Lua 标准库的一部分，但它是我所知道的最常用的文件系统库。它与 LuaForWindows 发行版捆绑在一起，也很容易与 Luarocks 一起安装。

```
local lfs = require 'lfs'

function getFileSize(filename)
   local attrs = lfs.attributes(filename)
   if not attrs then error("File not found") end
   return attrs.size
end 
```

# spring - 简单的 JSP-Spring 3 下拉列表不起作用

> ID：16134243
> 
> 赞同：0
> 
> 时间：2013-04-21T17:44:46.593
> 
> 标签：spring, jsp, spring-mvc

我知道这应该很容易，但是在尝试了几件事后我被卡住了。我只是想在我的 jsp 中显示一个基本的下拉列表。Spring 版本是 3，所以我希望一切都可以使用注释。

带有下拉列表的 JSP 表单：

```
<form:form method="post" commandName="countryForm">
                    <table>
                        <tr>
                            <td>Country :</td>
                            <td><form:select path="country">
                                    <form:option value="Select" label="Select" />
                                </form:select>
                            </td>

                        <tr>
                            <td colspan="3"><input type="submit" /></td>
                        </tr>
                    </table>
                </form:form> 
```

CountryForm.java 是一个普通对象，具有单个字符串属性“country”，以及它的 getter 和 setter。

处理 GET 请求的控制器如下：

```
@Controller
public class CountryFormController {

@RequestMapping(value = "MainView", method = RequestMethod.GET)
    public String showForm(Map model) {
        CountryForm cform = new CountryForm();
        model.put("countryForm", cform);
        return "MainView";
    }
} 
```

但是，当我重定向到 JSP“MainView”时，我得到了典型的错误：

```
org.apache.jasper.JasperException: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'countryForm' available as request attribute
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:502)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:424)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:20:55.017

我在[GitHub 上](https://github.com/hth/StatusInvoke)有示例代码，请尝试让我知道。查看[landing.jsp](https://github.com/hth/StatusInvoke/blob/master/WebContent/WEB-INF/jsp/landing.jsp)和[UserController](https://github.com/hth/StatusInvoke/blob/master/src/com/example/UserController.java)

```
<form:select path="users[${status.index}].type" >
  <form:option value="NONE" label="--- Select ---"/>
  <form:options itemValue="name" itemLabel="description" />
</form:select> 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:04:46.813

Spring TagLib 中的`select`标签需要提供一个集合、映射或选项数组。我不确定你希望这些是什么，所以我会做一些假设。

您需要在控制器中包含对象的集合、映射或数组。理想情况下，您将拥有一个`Country`类并为一组国家/地区创建新实例。对于使用您的代码的示例，我刚刚创建了一个国家的静态列表。将列表添加到您的模型中，然后修改`select`标签，`options`将`${countries}`. 假设`country`是一个类型为`String`on`CountryForm`且具有适当的 get/set 方法的字段，则该国家/地区应在提交表单时将数据绑定到该字段。

**控制器**

```
@Controller
public class CountryFormController {

@RequestMapping(value = "MainView", method = RequestMethod.GET)
    public String showForm(Map model) {

        List<CountryForm> cfs = new ArrayList<CountryForm>();
        cfs.add("United States");
        cfs.add("Canada");
        model.put("countries", cfs);
        model.put("countryForm", cform);
        return "MainView";
    }
} 
```

**JSP**

```
<form:select path="countryForm.country" options="${countries}"/> 
```

# node.js - 如何使用 elastic.js 客户端索引文档？

> ID：16134244
> 
> 赞同：3
> 
> 时间：2013-04-21T17:44:46.690
> 
> 标签：node.js, elasticsearch, elasticjs

到目前为止，我还没有找到任何关于如何将 elastic.js 客户端 api ( [https://github.com/fullscale/elastic.js](https://github.com/fullscale/elastic.js) ) 用于索引文档的示例。这里和那里有一些线索，但还没有具体的线索。

*   [http://docs.fullscale.co/elasticjs/ejs.Document.html](http://docs.fullscale.co/elasticjs/ejs.Document.html)
*   Document ( index, type, id ): 用于创建、替换、更新和删除文档的对象
*   Document > doIndex(fnCallBack)：将文档存储在给定的索引和类型中。如果没有设置 id，则在索引期间创建一个。
*   Document > source (doc)：设置源文档。

谁能提供一个示例代码片段来展示如何实例化文档对象并用于索引数据？

谢谢！

## 更新#1（2013 年 4 月 21 日星期日，CDT 时间下午 12:58）

[https://gist.github.com/pulkitsinghal/5430444](https://gist.github.com/pulkitsinghal/5430444)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-21T08:28:28.337

elastic.js 现在只实现了 Query DSL，所以不能再用于这种场景了。[请参阅此提交](https://github.com/fullscale/elastic.js/commit/86fa9b74db97fafb16ab46bf2004dbab4f15df77)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T20:00:08.457

你的主旨是正确的。

您创建 ejs.Document 对象，指定索引、类型和可选的要索引的文档的 id。如果您不指定 id，elasticsearch 会为您生成一个。

您将源设置为您想要索引的 json 对象，然后调用 doIndex 方法指定回调（如果需要）。node 示例不索引文档，但 angular 和 jquery 示例显示了一个基本示例，并且可以轻松地与 node 客户端一起使用。

[https://github.com/fullscale/elastic.js/blob/master/examples/angular/js/controllers.js#L30](https://github.com/fullscale/elastic.js/blob/master/examples/angular/js/controllers.js#L30)

还可以看看测试：

[https://github.com/fullscale/elastic.js/blob/master/tests/index_test.js#L265](https://github.com/fullscale/elastic.js/blob/master/tests/index_test.js#L265)

# ios - 覆盖整个单元格的 UITableView 重新排序按钮

> ID：16134247
> 
> 赞同：0
> 
> 时间：2013-04-21T17:45:15.793
> 
> 标签：ios, objective-c, uitableview, cgaffinetransform

我一直在尝试使用[本教程](http://b2cloud.com.au/how-to-guides/reordering-a-uitableviewcell-from-any-touch-point)使重新排序按钮覆盖整个单元格。它工作得很好，直到单元格从视图中消失。一旦你回到单元格，重新排序按钮已经移动了很多。

在这张图片中，红色代表重新排序按钮。 ![图片](https://dl.dropboxusercontent.com/s/32zug80x61eepao/Screen%20Shot%202013-04-21%20at%2012.33.09%20PM.png?token_hash=AAHtVA7T2rIusisjhg_7r5pT4rUY7FroUaTM3SxLx9Eb9g&dl=1)

这是教程中使用的代码。

```
- (void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    //  Grip customization code goes in here...
    for(UIView* view in cell.subviews)
    {
         if([[[view class] description] isEqualToString:@"UITableViewCellReorderControl"])
        {
                UIView* resizedGripView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, CGRectGetMaxX(view.frame), CGRectGetMaxY(view.frame))];
            [resizedGripView addSubview:view];
            [cell addSubview:resizedGripView];
            [resizedGripView release];

            CGSize sizeDifference = CGSizeMake(resizedGripView.frame.size.width - view.frame.size.width, resizedGripView.frame.size.height - view.frame.size.height);
            CGSize transformRatio = CGSizeMake(resizedGripView.frame.size.width / view.frame.size.width, resizedGripView.frame.size.height / view.frame.size.height);

            //  Original transform
            CGAffineTransform transform = CGAffineTransformIdentity;

            //  Scale custom view so grip will fill entire cell
            transform = CGAffineTransformScale(transform, transformRatio.width, transformRatio.height);

            //  Move custom view so the grip's top left aligns with the cell's top left 
            transform = CGAffineTransformTranslate(transform, -sizeDifference.width / 2.0, -sizeDifference.height / 2.0);

            [resizedGripView setTransform:transform];

            for(UIImageView* cellGrip in view.subviews)
            {
                if([cellGrip isKindOfClass:[UIImageView class]])
                    [cellGrip setImage:nil];
            }
        }
    }
} 
```

如何防止重新排序控件向左移动？我试图再次翻译转换，但这只是让重新排序控制完全脱离屏幕。使它向左移动的代码有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:13:52.033

我想出了怎么做！我必须向 viewController 添加一个属性，该属性存储了 resizedGripView 的初始帧。事实证明，每次调用该方法时（每次单元格再次出现），重新排序按钮都会从其当前位置移动，因此我必须存储它的初始位置。

```
UIView* resizedGripView = [[UIView alloc] init];
if (!initialFrame.size.height)
   [resizedGripView setFrame: CGRectMake(0, 0, CGRectGetMaxX(view.frame), CGRectGetMaxY(view.frame))];
else
   [resizedGripView setFrame: initialFrame];

if (!initialFrame.size.height)
   [self setInitialFrame: resizedGripView.frame]; 
```

# android - 设置安卓键盘类型

> ID：16134251
> 
> 赞同：1
> 
> 时间：2013-04-21T17:45:33.677
> 
> 标签：android, android-layout, android-emulator, android-keypad

我是 Android 开发的新手。因此，如果这是一个愚蠢的问题，我深表歉意。老实说，我试图弄清楚这一点并阅读了许多相关问题，但没有成功。

我有一个基本的应用程序正在运行![安卓3.1模拟器](https://i.stack.imgur.com/9IBx9.png)。从屏幕截图中，您可以看到专注于数字的键盘是如何显示的。我只想展示基本的 qwerty-esque 键盘。对于我的生活，我不知道该怎么做。目前，我已将 imeOption 设置为正常的想法。我还尝试将 inputType 设置为“正常”，但没有任何运气。这是我的 Android 布局文件的相关部分。

```
<EditText
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:imeOptions="normal"
  android:inputType="text"
  ...
/> 
```

我究竟做错了什么？如何在 Android 中显示基本的 qwerty 风格键盘？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:16:20.677

正如 TanjaV 所说，此键盘适用于具有物理键盘的设备，无论您的输入类型如何，avd 都不会更改它。

将您的 AVD 设备更改为 Nexus4 或 Nexus One（如果您想要旧型号），那么您应该会看到键盘发生了变化。

# c#-4.0 - 如果封闭方法即将返回，我是否需要停止秒表？

> ID：16134253
> 
> 赞同：9
> 
> 时间：2013-04-21T17:45:41.513
> 
> 标签：c#-4.0, garbage-collection, stopwatch

考虑以下方法：

```
DoTimeIntensiveOperation()
{
    var t = new Stopwatch();

    foreach(var element in a_very_long_array)
    {
        DoATimeConsumingTask(element);
    }

    Console.WriteLine("Took me " + t.Elapsed);
    return;
} 
```

我需要`t.Stop()`在返回之前打电话吗？

据我所知，垃圾收集器将销毁任何没有返回主方法的引用链的东西。对 created 的唯一引用`Stopwatch`是`t`, 所以当`DoTimeIntensiveOperation`,`t`将被释放并且`Stopwatch`应该有资格被销毁。但是它仍然“滴答作响”的事实是否会干扰 GC？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T18:00:45.453

不，我抛出了这个快速测试，似乎一旦运行 GC，秒表就会被破坏。（请随时更正代码）

```
 static void Main(string[] args)
 {
      DoTimeIntensiveOperation();

      GC.Collect();
      while (swRef.IsAlive)
      {
      }
      Console.WriteLine("Destroyed");
 }

 static WeakReference swRef = null;
 static void DoTimeIntensiveOperation()
 {
     Stopwatch sw = new Stopwatch();
     sw.Start();
     swRef = new WeakReference(sw);
     return;
 } 
```

输出`Destroyed`是`GC.Collect`调用的时间。当然，在实际程序中，您不太可能显式调用`GC.Collect`，但这是为了表明 Stopwatch 对象一旦超出方法范围就会被销毁，即使`Stop`没有被调用。

# system-verilog - 在systemverilog中的模块接口上连接解压阵列的最简单方法

> ID：16134255
> 
> 赞同：2
> 
> 时间：2013-04-21T17:45:50.697
> 
> 标签：system-verilog

下面是一个例子

```
module a_mod ( u );
input bit [2:0] u [1:0];
...
endmodule

module b_mod ();

bit [2:0] c1, c2;
a_mod a_mod_inst ( 
  .u ( {c1,c2} ) // won't work
);

endmodule 
```

进行 u[0] == c2 和 u[1] == c1 的连接的最简单方法是什么？

顺便说一句，我知道我可以做我下面展示的，但是寻找一个更优雅的选择

```
bit [2:0] tmp_u [1:0];
assign tmp_u[0] = c2;
assign tmp_u[1] = c1;

a_mod a_mod_inst (
.u ( tmp_u )  // works for sure
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:18:20.113

尝试：

```
bit [2:0] c1, c2;
a_mod a_mod_inst ( 
  .u ( '{c1,c2} ) // note the single quote before the open curly bracket
); 
```

请参阅 IEEE1800-2012 第 10.9 节。`'{`用于分配或传递未打包的数组。

# css - 获取溢出：自动元素以自动滚动

> ID：16134257
> 
> 赞同：2
> 
> 时间：2013-04-21T17:45:52.800
> 
> 标签：css, overflow

我有一个大 div，里面有文字：

```
#big-div {
    height: 400px;
    overflow: auto;
} 
```

我怎样才能使它在新内容添加到 div 时（并且发生溢出），div 自动滚动到底部。换言之，最新添加的内容始终可见。终端仿真器具有相同的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:54:09.560

您需要使用 JavaScript 强制它。

```
var myDiv = document.getElementById("big-div");
myDiv.scrollTop = myDiv.scrollHeight; 
```

# qt -

> ID：16134259
> 
> 赞同：0
> 
> 时间：2013-04-21T17:46:09.953
> 
> 标签：qt, qlist, qsettings

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:52:13.373

那不管用。QSettings.setValue() 围绕 QVariant 类操作，所以在你可以存储之前

```
typedef QList<YouClass*> myListType; 
```

您应该实现所有需要的包装器来将 myListTyoe 与 QVariant 相互转换。

# php - 我是否正确消毒/逃生？

> ID：16134260
> 
> 赞同：-2
> 
> 时间：2013-04-21T17:46:11.193
> 
> 标签：php, mysql, input, output, mysql-real-escape-string

我在 PHP 中制作了一个简单的搜索脚本，用于搜索 mySQL 数据库并输出结果。这是如何工作的：

*   用户通过搜索表单搜索“jack's”。
*   我的 PHP 脚本`GET`是这个搜索，并对其进行清理。
*   然后脚本使用`SELECT`and`LIKE`得到结果。
*   然后脚本将结果输出给用户。
*   最后，脚本告诉用户“jack 已返回 x 个结果”。在逃跑的帮助下。

我想问的是，我做得对吗？

这就是我之前`SELECTING`从数据库中清理的方式：

```
if(isset($_GET['q'])){
  if(strlen(trim($_GET['q'])) >= 2){
    $q = trim(mysql_real_escape_string(addcslashes($_GET['q'], '%_')));
    $sql = "SELECT name, age, address FROM book WHERE name LIKE '%".$q."%'";
  }
} 
```

这就是我在输出“jack's returned x results”之前逃脱的方式。

```
echo htmlspecialchars(stripslashes($q)) . " returned x results."; 
```

这是正确的方法吗？

顺便说一句，我知道 PDO 和 mySQLi 是首选，因为它们通过使用准备好的语句来清理自己，但我对它们没有任何实际经验。但我很乐意看看，如果你们可以链接我一些新手教程/解释。此外，我听说了，`magic_quotes`并且`charset`可能以某种方式导致注射——这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:03:33.613

出于某种原因，我们也需要[转义反斜杠](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)。
所以，我相信正确的代码是

```
if(isset($_GET['q'])){
  $_GET['q'] = trim($_GET['q']);
  if(strlen($_GET['q']) >= 2){
    $q = $_GET['q'];
    $q = '%'.addCslashes($q, '\%_').'%';
    // now we have the value ready either for escaping or binding
    $q = mysql_real_escape_string($q);
    $sql = "SELECT name, age, address FROM book WHERE name LIKE '$q'";
    //or 
    $sql = "SELECT name, age, address FROM book WHERE name LIKE ?";
    $stm = $pdo->prepare($sql);
    $stm->execute(array($q));
    $data = $stm->fetchAll();
  }
} 
```

对于输出，使用

```
echo htmlspecialchars($_GET['q']); 
```

这里不需要stripslashes。

> 此外，我听说 magic_quotes 和 charset 可能会以某种方式导致注入 - 这是正确的吗？

如果您不使用魔术引号，它们不会损害您的安全。
charset 在一些极其罕见的编码的情况下是危险的，但只有在设置不正确的情况下。if`mysql(i)_set_charset`或 DSN（在 PDO 的情况下）被用于此目的 - 你又安全了。

至于 PDO，我相信一个[标签 wiki](https://stackoverflow.com/tags/pdo/info)对于初学者来说应该足够了

# asp.net - 执行权限被拒绝 - 'aspnet_Roles_RoleExists'

> ID：16134262
> 
> 赞同：1
> 
> 时间：2013-04-21T17:46:26.377
> 
> 标签：asp.net, sql-server-2008, blogengine.net

我正在使用 SQL Server (MSSQLBlogProvider) 在主网站下的虚拟目录中安装应用程序 (BlogEngine)。BlogEngine 有它自己的数据库。

一切正常，这意味着我从 SQL 数据库获得了默认页面。

然后我使用 ASP.net 网站管理工具\Security 来创建用户（如视频所示[http://www.nyveldt.com/misc/BE13SQLMembership.html](http://www.nyveldt.com/misc/BE13SQLMembership.html)大约 7 分钟左右。解释得很好，简单快捷看看他在做什么，如果你点击视频的时间线）

执行这些步骤后，我收到错误：

对象“aspnet_Roles_RoleExists”、数据库“Blog”、模式“dbo”的 EXECUTE 权限被拒绝。我玩弄访问规则，但没有成功。

请注意，我使用的是“集成安全性”。

我并不完全确定要查找和修改的位置。非常感谢任何帮助。

堆栈跟踪：

```
[SqlException (0x80131904): The EXECUTE permission was denied on the object 'aspnet_Roles_RoleExists', database 'Blog', schema 'dbo'.]
   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +388
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +688
   System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady) +4403
   System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +6665097
   System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite) +6667096
   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite) +577
   System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite) +735
   System.Data.SqlClient.SqlCommand.ExecuteNonQuery() +290
   System.Web.Security.SqlRoleProvider.RoleExists(String roleName) +967
   System.Web.Security.Roles.RoleExists(String roleName) +336
   BlogEngine.Core.Right.InitRightForBlogInstance() in j:\Projects\BlogEngine_2_7_0_0\blogengine_4f5eed923a57\BlogEngine\BlogEngine.Core\Security\Right.cs:612
   BlogEngine.Core.Right.get_RightsByRole() in j:\Projects\BlogEngine_2_7_0_0\blogengine_4f5eed923a57\BlogEngine\BlogEngine.Core\Security\Right.cs:600
   BlogEngine.Core.Right.EnsureBlogInstanceDataLoaded() in j:\Projects\BlogEngine_2_7_0_0\blogengine_4f5eed923a57\BlogEngine\BlogEngine.Core\Security\Right.cs:566
   BlogEngine.Core.Right..cctor() in j:\Projects\BlogEngine_2_7_0_0\blogengine_4f5eed923a57\BlogEngine\BlogEngine.Core\Security\Right.cs:113

[TypeInitializationException: The type initializer for 'BlogEngine.Core.Right' threw an exception.]
   BlogEngine.Core.Right..ctor() in j:\Projects\BlogEngine_2_7_0_0\blogengine_4f5eed923a57\BlogEngine\BlogEngine.Core\Security\Right.cs:539

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +159
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +256
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +127
   System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes, StackCrawlMark& stackMark) +14376269
   System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) +200
   System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture) +28
   System.Web.HttpRuntime.CreateNonPublicInstance(Type type, Object[] args) +83
   System.Web.HttpApplication.BuildIntegratedModuleCollection(List`1 moduleList) +335
   System.Web.HttpApplication.GetModuleCollection(IntPtr appContext) +1262
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +133
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +304
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +404
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +475

[HttpException (0x80004005): Exception has been thrown by the target of an invocation.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +12881540
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +159
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +12722601 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T03:37:41.850

打开 Internet 信息服务管理器
检查您的 IIS 网站正在使用哪个应用
程序池 转到应用程序池
查看您的应用程序池在哪个身份下运行

打开 SQL Server Management Studio
连接到您的 SQL Server 实例
为您的数据库打开一个新查询
运行此脚本：
GRANT SELECT、EXECUTE、UPDATE、INSERT ON SCHEMA :: dbo TO
[NT AUTHORITY\NETWORK SERVICE]

*将 [NT AUTHORITY\NETWORK SERVICE] 替换为您的应用程序池运行的任何身份。

返回 IIS 管理器
回收您的应用程序池
浏览您的网站

# php - /var/www 内的 php 文件无法执行 /var/www 外的任何 shell 脚本

> ID：16134266
> 
> 赞同：0
> 
> 时间：2013-04-21T17:46:44.690
> 
> 标签：php, bash, web-applications, permissions, lamp

我已经安装了**LAMP**服务器、Ubuntu 12.04、php 5、apache 2。我想从 /var/www 中的 php 文件运行位于**/home/home/Desktop/Project文件夹中的一些****shell 脚本**（testproject.php）和**java 文件**，即简而言之，什么时候会刷新 shell 和 java 文件应该被执行。**`**http://localhost/testproject.php**`**

 **这是我在 testproject.php 中使用的以下行：

```
$output = shell_exec('bash /home/home/Desktop/Project/print.sh');
echo $output 
```

最初，当我将**print.sh**的权限更改为 777 时，它运行良好，但在我的项目中创建了许多无法手动更改权限的自动生成文件。

所以我需要一些方法来执行位于任何可能目录中的这些 java 和 shell 脚本。

提前致谢**

# php - 保护网站的最佳方法和方法

> ID：16134269
> 
> 赞同：0
> 
> 时间：2013-04-21T17:47:00.027
> 
> 标签：php, mysql, file, security, web

我几乎准备好将我的网站转移到我的虚拟主机上，但在此之前，我希望尽可能地对其进行保护。我听说过 MySQL 注入和您可能面临的其他问题，我将如何保护我的网站、MySQL 数据库和文件免受它们的侵害？

我打算从 mysql 扩展更改为 mysqli 或 PDO，你推荐哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:56:57.587

我个人会使用 PDO，它比 mysqli 更好。如果您不知道 mysql 注入是将原始数据插入到这样的查询中：

```
$query = "SELECT * FROM users WHERE username='" .$_GET['user']. "' AND password='" .$_GET['password']. "'"; 
```

在不清理输入的情况下，如果有人输入 admin 作为用户名和`' OR '1'='1`密码，则查询变为：

```
SELECT * FROM users WHERE username='admin' AND password='' OR '1'='1' 
```

这会导致查询忽略密码并以管理员身份登录，只要 1=1，它总是这样做。只需使用 mysql，您就可以`mysql_real_escape_string($_GET['user'])`转义任何可能影响查询的内容，例如数据库可以理解的“将变为 \”。请注意，攻击者可以做比以管理员身份登录更糟糕的事情，例如，他们可以使用 drop 命令删除您的整个数据库结构并在其后注释掉代码，或者实际上使用非常奇怪的 shellcode 影响您的 Web 服务器。

使用 PDO 或 MySQLi 之类的东西，准备好的语句首先告诉数据库查询将是什么，然后发送信息，而不是像这样在查询中实际包含它：

```
$stm = $pdo->prepare("SELECT * FROM users WHERE username=? AND password=?");
$stm->execute(array($_GET['user'], $_GET['password'])); 
```

编辑：还有一件事，我认为仍然可以使用 pdo 进行 mysql 注入，但我不知道它是如何工作的，所以我建议做更多的研究，看看你是否能找到任何东西。

# visual-studio-2010 - 在源代码中放置超链接

> ID：16134270
> 
> 赞同：2
> 
> 时间：2013-04-21T17:47:01.543
> 
> 标签：visual-studio-2010

在 Visual Studio 中，是否可以在源文件中创建跳转到文件特定行的超链接？我想创建一个指向特定行的链接，如下所示：

```
// [[#DoStuff|Clicking here will take you to the method "doStuff."]]
//
//
//
//
// #DoStuff
//clicking the hyperlink should jump to the line above.
function doStuff(){

} 
```

有什么方法可以在评论中创建超链接以跳转到特定方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:32:45.237

看起来有[一个名为 HyperAddin 的 Visual Studio 插件可以做到这一点](http://hyperaddin.codeplex.com)。不幸的是，它看起来只适用于 Visual Studio 2005 和 Visual Studio 2008。

# c - 为什么我不能释放结构内的数组？

> ID：16134271
> 
> 赞同：-4
> 
> 时间：2013-04-21T17:47:01.833
> 
> 标签：c

我有这个结构：

```
typedef struct {
    TypeCon *Pags;
    // Some stuff
}TypeMem; 
```

我有一个函数可以分配这个指针，称为 Pags。

```
void StartsTypeMem(TypeMem *Mem, int memorySize){
    Mem->Pags = (TypeCon*) malloc(memorySize);
   // Some stuff
} 
```

然后我在我的代码中使用这个 TypeMem，但是当我完成后我不能在 Pags 上使用 free() 。据我了解，您不能在另一个函数中释放 malloc 的数组...但我不知道...我做错了什么？

在主（）：

```
TypeMem Memo; 
StartsTypeMem(&Memo, size); 

// Some stuff using the TypeMem 

KillTypeMen(&Memo); 
```

KillTypeMen 可能是：

```
void KillTypeMem(TypeMem *Mem){
    free(Mem->Pags);
    // Some stuff
} 
```

* * *

错误消息（取自评论到一个答案）：

*** 检测到 glibc****./smv: free(): invalid next size (fast): 0x098db448 ** * smv: malloc.c:2451: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av) ->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof (size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' 失败。Abortado (imagem do núcleo gravada)*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:48:34.487

你可以：

```
void KillTypeMem(TypeMem *Mem){
    free(Mem->Pags);
   // Some stuff
} 
```

但是您需要确保正确跟踪结构的生命周期，并且在释放它之后永远不要使用某些东西。而且您还需要确保它仅在分配或初始化后才被释放`NULL`（我认为调用它是合法的，如果我错`free`了，请纠正我）。`NULL`

此外，如果您`TypeMem`是动态分配的，那么您显然需要在 free`Mem->Pags`之前 free `Mem`。

**编辑**

问题不在于`StartsTypeMem`and`KillTypeMem`函数，它们绝对没问题。以下示例编译并运行没有错误：

```
#include <stdlib.h>
#include <stdio.h>
typedef struct { int i; } TypeCon;

typedef struct {
    TypeCon *Pags;
}TypeMem;

void StartsTypeMem(TypeMem *Mem, int memorySize){
    printf("Allocate\n");
    Mem->Pags = (TypeCon*) malloc(memorySize);
}

void KillTypeMem(TypeMem *Mem){
    printf("free\n");
    free(Mem->Pags);
}

int main(){
    TypeMem Memo;
    StartsTypeMem(&Memo, 10*sizeof(TypeCon));
    KillTypeMem(&Memo);
    printf("done\n");
} 
```

您需要隔离错误。没有代码我们无法为您提供帮助，但错误不是来自分配或免费问题`TypeMem.Pags`。

仔细检查所有“一些东西”。

一个快速的想法：你确实`sizeof(TypeCon)`在你的代码中使用过，对吧？您不是`malloc`直接使用数组大小​​调用，例如`Mem->Pags = (TypeCon*) malloc(10)`，因为如果您这样做，那绝对是您的问题的根源。*

# php - 无法在 Web 服务器 codenvy 中创建文件

> ID：16134274
> 
> 赞同：1
> 
> 时间：2013-04-21T17:47:23.183
> 
> 标签：php, webserver, codenvy

我只是在 codenvy 中制作了一个 Web 服务器。我制作了一个 fwrite 的 php 文件来制作 .txt 文件 运行该 php 后，codenvy 项目中没有创建 .txt 文件。

但是，如果我在 1 个 php 文件中的 fprintf 之后 fscanf，它会打印我刚刚 fwrite 的 .txt 文件的内容。

我应该为codenvy项目中的make .txt文件做什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T07:23:34.707

运行应用程序时无法创建永久文件。当您运行应用程序时，您总是会获得新的测试环境，并且该环境会在您的应用程序停止后消失。运行功能！= 托管，但有机会在将其部署到某个地方之前尝试您的应用程序。

# javascript - 我可以使用 javascript 而不是 apache 配置为 js、图像和 css 设置过期标头吗？

> ID：16134279
> 
> 赞同：0
> 
> 时间：2013-04-21T17:47:58.667
> 
> 标签：javascript, http, http-headers

我阅读了有关过期标头以提高网站性能的信息，我的所有搜索都表明只能使用 apache 配置。有没有办法用javascript做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:52:10.700

Javascript 在**客户端**上运行。
HTTP 标头与来自服务器的资源一起发送。

除非您编写 Node.js 服务器，否则您不能这样做。

# objective-c - How to sort distance in sectional table view?

> ID：16134280
> 
> 赞同：0
> 
> 时间：2013-04-21T17:48:06.387
> 
> 标签：objective-c, uitableview, sorting

I'm making app with section tableview.The section header display district through keyArray. To row of table view, it will display all information including of name, address and distance. I can make it by below code.

Now, I'm going to sort ascending distance in tableview. How can I sort it in 'cellForRowAtIndexPath' method?

My second thought is create NSArray at the outside of cellForRowAtIndexPath method. One is to load plist data and calculate distance. And then, sort it through NSSortDescriptor. If I go to this method, I am not sure how to populate it in section tableview correctly?

Can someone give me some idea or suggestion?

In key array, I use below code to create it in ViewDidLoad and put it into section header.

```
 //location info draw from plist
     NSArray*tempArray=[[NSArray alloc]init];
     tempArray=[dataDictionary allKeys];
     self.keyArray=[tempArray mutableCopy]; 
```

In cellForRowAtIndexPath, it calculate distance between target location and user location. And then display all information in table view row.

```
 NSString*sectionHeader=[keyArray objectAtIndex:indexPath.section];

    NSArray*sectionHeaderArray=[dataDictionary objectForKey:sectionHeader];

    NSDictionary*targetLat=[sectionHeaderArray objectAtIndex:indexPath.row];
    NSDictionary*targetLong=[sectionHeaderArray objectAtIndex:indexPath.row];

    //location info draw from plist
    CLLocation *targetLocation = [[CLLocation alloc] initWithLatitude:[[targetLat objectForKey:@"latitude"] floatValue] longitude:[[targetLong objectForKey:@"longitude"] floatValue]];

    double distance = [self.myLocation distanceFromLocation:targetLocation]/1000;

    UITableViewCell*cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell==nil) {
    cell=[[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitlereuseIdentifier:CellIdentifier] autorelease];
    }
    UILabel*nameLabel=(UILabel*)[cell viewWithTag:100];
    UILabel*addLabel=(UILabel*)[cell viewWithTag:101];
    UILabel*latLabel1=(UILabel*)[cell viewWithTag:102];
    UILabel*longLabel1=(UILabel*)[cell viewWithTag:103];
    UILabel*disLabel=(UILabel*)[cell viewWithTag:106];

    NSDictionary*name=[sectionHeaderArray objectAtIndex:indexPath.row];

    NSDictionary*address=[sectionHeaderArray objectAtIndex:indexPath.row];

    nameLabel.text=[name objectForKey:@"name"];

    addrLabel.text=[address objectForKey:@"address"];

    latLabel1.text=[NSString stringWithFormat:@"%f",self.myLocation.coordinate.latitude];
    longLabel1.text=[NSString stringWithFormat:@"%f",self.myLocation.coordinate.longitude];

    disLabel.text=[NSString stringWithFormat:@"%0.2f km",distance];

    return cell;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:47:50.800

I jumped to conclusions and posted an answer that was flawed. I see now that you have a multitude of issues in your process.

You assign the same object, [sectionHeaderArray objectAtIndex:indexPath.row], to several different variables and are expecting different results from each. To start with, I would make the following changes to your existing code:

```
 NSString*sectionHeader=[keyArray objectAtIndex:indexPath.section];

   NSArray *locationsForSection = [self.dataDictionary objectForKey:sectionHeader];

   NSDictionary *thisLocationInfo = [locationsForSection objectAtIndex:indexPath.row];
   float thisLat = [[thisLocationInfo objectForKey:@"latitude"] floatValue];
   float thisLong = [[thisLocationInfo objectForKey:@"longitude"] floatValue];

   //location info draw from plist
   CLLocation *targetLocation = [[CLLocation alloc] initWithLatitude:thisLat longitude:thisLong];

   double distance = [self.myLocation distanceFromLocation:targetLocation]/1000;

   UITableViewCell*cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
   if (cell==nil) {
      cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitlereuseIdentifier:CellIdentifier];
   }
   UILabel*nameLabel=(UILabel*)[cell viewWithTag:100];
   UILabel*addLabel=(UILabel*)[cell viewWithTag:101];
   UILabel*latLabel1=(UILabel*)[cell viewWithTag:102];
   UILabel*longLabel1=(UILabel*)[cell viewWithTag:103];
   UILabel*disLabel=(UILabel*)[cell viewWithTag:106];

   NSDictionary*name=[sectionHeaderArray objectAtIndex:indexPath.row];

   NSDictionary*address=[sectionHeaderArray objectAtIndex:indexPath.row];

   latLabel1.text=[NSString stringWithFormat:@"%f",thisLat];
   longLabel1.text=[NSString stringWithFormat:@"%f",thisLong];

   disLabel.text=[NSString stringWithFormat:@"%0.2f km",distance];

   return cell;
} 
```

For your sorting issue, I would say to go back to your dataDictionary. Iterate through each of the sectionHeader arrays. Replace each array with a copy that is sorted by the distance from myLocation. You could add the key, distance, to each dictionary there and take that out of the cellForRowAtIndexPath method entirely.

```
-(NSDictionary *)dataDictionary
{
   if (_dataDictionary) {
      return _dataDictionary;
   }

   NSMutableDictionary *resultDictionary = [[NSMutableDictionary alloc] init];
   for (NSString *sectionHead in self.keyArray) {
      NSMutableArray *sectionArrayWithDistances = [[NSMutableArray alloc] init];
      NSArray *thisSectionArray = [sourceDictionary objectForKey:sectionHead];
      for (NSDictionary *theLocationDict in thisSectionArray) {
         // Calculate the distance
         float thisLat = [[theLocationDict objectForKey:@"latitude"] floatValue];
         float thisLong = [[theLocationDict objectForKey:@"longitude"] floatValue];
         CLLocation *targetLocation = [[CLLocation alloc] initWithLatitude:thisLat longitude:thisLong];
         double distance = [self.myLocation distanceFromLocation:targetLocation]/1000;

         // Insert modified dictionary into the resulting section array
         NSMutableDictionary *thisLocationWithDistance = [NSMutableDictionary dictionaryWithDictionary:theLocationDict];
         [thisLocationWithDistance insertObject:[NSNumber numberWithDouble:distance] ForKey:@"distance"];
         [sectionArrayWithDistances addObject:[NSDictionary dictionaryWithDictionary:thisLocationWithDistance]];
      }
      // Sort the resulting array for this section and insert in dataDict
      NSSortDescriptor *sortByDistance = [[NSSortDescriptor alloc] initWithKey:@"distance" ascending:YES];
      NSArray *sortDescriptors = [NSArray arrayWithObjects:sortByDistance, nil];
      [sectionArrayWithDistances sortWithDescriptors:sortDescriptors];

      [resultDictionary insertObject:[NSArray arrayWithArray:sectionArrayWithDistances] forKey:sectionHead];
   }

   // Set result and return
   self.dataDictionary = [NSDictionary dictionaryWithDictionary:resultDictionary];
   return _dataDictionary;
} 
```

Total Air Code and turned out to be more than I bargained for. Possible errors in syntax and what not but this is the basic idea as I see it for your purposes.

# python - Python 从导入的模块中模拟一个函数

> ID：16134281
> 
> 赞同：174
> 
> 时间：2013-04-21T17:48:07.593
> 
> 标签：python, unit-testing, python-unittest, python-mock

我想了解如何`@patch`从导入的模块中获取功能。

这是我到目前为止的地方。

**应用程序/模拟.py：**

```
from app.my_module import get_user_name

def test_method():
  return get_user_name()

if __name__ == "__main__":
  print "Starting Program..."
  test_method() 
```

**应用程序/my_module/__init__.py：**

```
def get_user_name():
  return "Unmocked User" 
```

**测试/模拟测试.py：**

```
import unittest
from app.mocking import test_method 

def mock_get_user():
  return "Mocked This Silly"

@patch('app.my_module.get_user_name')
class MockingTestTestCase(unittest.TestCase):

  def test_mock_stubs(self, mock_method):
    mock_method.return_value = 'Mocked This Silly')
    ret = test_method()
    self.assertEqual(ret, 'Mocked This Silly')

if __name__ == '__main__':
  unittest.main() 
```

这不像我预期的那样工作**。**“已修补”模块仅返回`get_user_name`. 如何模拟要导入到正在测试的命名空间的其他包中的方法？

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2013-04-21T18:35:36.790

当您使用包中的`patch`装饰器时，您是在正在测试的命名空间（在这种情况下）中**修补它**，而不是从导入函数的命名空间（在这种情况下）。`unittest.mock`**`app.mocking.get_user_name``app.my_module.get_user_name`**

 **要执行您描述的操作，请`@patch`尝试以下操作：

```
from mock import patch
from app.mocking import test_method 

class MockingTestTestCase(unittest.TestCase):

    @patch('app.mocking.get_user_name')
    def test_mock_stubs(self, test_patch):
        test_patch.return_value = 'Mocked This Silly'
        ret = test_method()
        self.assertEqual(ret, 'Mocked This Silly') 
```

标准库文档包含一个有用的[部分](https://docs.python.org/3/library/unittest.mock.html#where-to-patch)来描述这一点。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-02-20T12:21:39.207

虽然 Matti John 的回答解决了您的问题（也帮助了我，谢谢！），但是，我建议将原始 'get_user_name' 函数的替换本地化为模拟函数。这将允许您控制何时替换该功能以及何时不替换。此外，这将允许您在同一测试中进行多次替换。为此，请以非常相似的方式使用“with”语句：

```
from mock import patch

class MockingTestTestCase(unittest.TestCase):

    def test_mock_stubs(self):
        with patch('app.mocking.get_user_name', return_value = 'Mocked This Silly'):
            ret = test_method()
            self.assertEqual(ret, 'Mocked This Silly') 
```**

# jquery - CSS / JQuery：将href设置为背景图片

> ID：16134282
> 
> 赞同：2
> 
> 时间：2013-04-21T17:48:28.360
> 
> 标签：jquery, css

背景图像有一些令人羡慕的 CSS 属性，我想将它们用于照片库——也就是说，`background-size: cover;`让`background-position: center center;`您可以使用任何纵横比的图像并将其与固定大小的容器完美匹配。

但是，我真的不认为设置带有内容的背景图像是理想的。我宁愿拥有`<a href="url.jpg"><img src="url.jpg"/></a>`内容而不是`<a href="url.jpg" style="background-image: url(url.jpg);"><img src="url.jpg"/></a>`. 我认为采用前者并编写后者的脚本是理想的。

给出如下所示的代码：

```
<a href="http://thesundaybe.st/media/from-earth-phone-23.jpg"></a>
<a href="http://thesundaybe.st/media/from-earth-phone-24.jpg"></a>
<a href="http://thesundaybe.st/media/from-earth-phone-26.jpg"></a>
<a href="http://thesundaybe.st/media/from-earth-phone-27.jpg"></a>
<a href="http://thesundaybe.st/media/from-earth-phone-28.jpg"></a>
<a href="http://thesundaybe.st/media/from-earth-phone-29.jpg"></a>
<a href="http://thesundaybe.st/media/from-earth-phone-30.jpg"></a> 
```

我正在尝试编写一个 JQuery 脚本来获取 href URL 并将其设置为背景图像。基本上，把上面的代码变成这样：

```
<a href="http://thesundaybe.st/media/from-earth-phone-23.jpg" style="background-image: url(http://thesundaybe.st/media/from-earth-phone-23.jpg);"></a>
<a href="http://thesundaybe.st/media/from-earth-phone-24.jpg" style="background-image: url(http://thesundaybe.st/media/from-earth-phone-24.jpg);"></a>
<a href="http://thesundaybe.st/media/from-earth-phone-26.jpg" style="background-image: url(http://thesundaybe.st/media/from-earth-phone-26.jpg);"></a>
<a href="http://thesundaybe.st/media/from-earth-phone-27.jpg" style="background-image: url(http://thesundaybe.st/media/from-earth-phone-27.jpg);"></a>
<a href="http://thesundaybe.st/media/from-earth-phone-28.jpg" style="background-image: url(http://thesundaybe.st/media/from-earth-phone-28.jpg);"></a>
<a href="http://thesundaybe.st/media/from-earth-phone-29.jpg" style="background-image: url(http://thesundaybe.st/media/from-earth-phone-29.jpg);"></a>
<a href="http://thesundaybe.st/media/from-earth-phone-30.jpg" style="background-image: url(http://thesundaybe.st/media/from-earth-phone-30.jpg);"></a> 
```

这是一个带有基本 HTML/CSS 设置的 jsfiddle，只需要一点 JQuery：http: [//jsfiddle.net/MRSallee/tv3q8/3/](http://jsfiddle.net/MRSallee/tv3q8/3/)

从理论上讲，这就是脚本发挥作用时的样子：http: [//jsfiddle.net/MRSallee/tv3q8/](http://jsfiddle.net/MRSallee/tv3q8/)

我非常接近这一点 JQuery，但它似乎只是使用第一个 href 作为所有`<a>`标签的背景图像。

```
$('a').css({'background-image': 'url(' + $('a').attr('href') + ')'}); 
```

任何帮助是极大的赞赏。干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T17:54:32.443

你可以试试这个：

```
$('a').css('background-image', function() {
    return 'url(' + this.href + ')';
}); 
```

`each`循环将在内部使用，因此它相当于`$('a').each`+`$(this).css`组合。

### [演示](http://jsfiddle.net/tv3q8/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:51:05.323

```
$('a').each(function(){
   $(this).css({'background-image': 'url(' + $(this).attr('href') + ')'});
}); 
```

[http://jsfiddle.net/mohammadAdil/tv3q8/8/](http://jsfiddle.net/mohammadAdil/tv3q8/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T17:52:18.527

```
$('a').each(function(){    
 $(this).css({'background-image': 'url(' + this.href + ')'});
}); 
```

这里`this`指的是迭代中的当前元素。

[http://jsfiddle.net/x5kbA/](http://jsfiddle.net/x5kbA/)

# windows - 在 Windows 8 数据模板中运行故事板动画

> ID：16134293
> 
> 赞同：0
> 
> 时间：2013-04-21T17:49:25.617
> 
> 标签：windows, xaml, windows-runtime, microsoft-metro, winrt-xaml

我正在尝试在 Windows 8 XAML 中创建一个待办事项列表。当我完成一个项目时，我想要一个故事板来擦除已完成的项目。如何让情节提要在数据模板中的项目上运行？当我从 C# 运行情节提要时，我收到一条错误消息：WinRT 信息：无法解析 TargetName rectangleToDelete。

我的故事板如下所示：

```
<Page.Resources>
    <Storyboard x:Name="AnimateDelete">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="rectangleToDelete">
            <EasingDoubleKeyFrame KeyTime="0" Value="-0.333"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.5" Value="-327.5"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="rectangleToDelete">
            <EasingDoubleKeyFrame KeyTime="0" Value="0.333"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.5" Value="-163.25"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</Page.Resources> 
```

我的 Listview 模板如下所示：

```
<ListView.ItemTemplate>
  <DataTemplate>

    <Grid>
      <StackPanel Orientation="Horizontal"
                  Margin="0,0,-393,-15">
        <CheckBox x:Name="CheckBoxComplete"
                  IsChecked="{Binding Complete, Mode=TwoWay}"
                  Checked="CheckBoxComplete_Checked"
                  Content="{Binding Text}"
                  Margin="10,5"
                  VerticalAlignment="Center"
                  MinWidth="300" />
        <Button x:Name="ButtonDelete"
                Click="ButtonDelete_Click"
                Content="Delete" />
      </StackPanel>
      <Rectangle x:Name="rectangle"
                 Fill="#FFF4F4F5"
                 Stroke="Black"
                 StrokeThickness="0"
                 RenderTransformOrigin="0.5,0.5"
                 Margin="319,2,-300,-14"
                 Height="34"
                 VerticalAlignment="Top">
        <Rectangle.RenderTransform>
          <CompositeTransform ScaleX="-1" />
        </Rectangle.RenderTransform>
      </Rectangle>
    </Grid>
  </DataTemplate>
</ListView.ItemTemplate> 
```

我的代码隐藏如下所示：

```
 Button btn = (Button)sender;
        TodoItem item = btn.DataContext as TodoItem;

        StackPanel stk = (StackPanel)btn.Parent;
        Grid grd = (Grid)stk.Parent;
        Rectangle rect = (Rectangle)grd.Children[1];
        rect.Name = "rectangleToDelete";
        AnimateDelete.Begin(); 
```

如您所见，我尝试找到矩形并为其指定正确的名称，但我得到了同样的错误。

任何帮助，将不胜感激！

谢谢，汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:49:01.737

DataTemplate 具有与外部任何东西不同的名称范围。您可以将该 DataTemplate 和 Storyboard 的内容放在它们自己的 UserControl 中以使其工作。

# crystal-reports - 将一个项目的“分数”分配给 Crystal Reports 中的另一个项目的公式

> ID：16134296
> 
> 赞同：0
> 
> 时间：2013-04-21T17:49:32.257
> 
> 标签：crystal-reports, formula

我有三个名为“UniqueID”“关系”和“分数”的字段。

关系：

```
Self 
Boss 
Peer 
Direct Report 
Other 
```

我需要将“Others”和“Peer”中的分数合并到标记为“Peers”的一组中，我需要将“Others”和“Peer”中的“UniqueID”合并到“Peers”的“UniqueID”中

本质上，我想将“其他人”合并为“同行”

这似乎是一件容易的事，但经过 2 小时的尝试，我想我会寻求帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:42:27.650

而不是使用关系字段，而是创建一个公式并使用它：

`if {table.relationship}="Other" then "Peer" else {table.relationship}`

# django - 为每天服务 9,000,000 个页面的应用程序设计 django/PostgreSQL

> ID：16134298
> 
> 赞同：0
> 
> 时间：2013-04-21T17:49:56.010
> 
> 标签：django, google-app-engine, postgresql, heroku, amazon

我正在考虑将 django/PostgreSQL 用于具有以下特征的应用程序：

*   9,000,000 页/天。大多数页面包含大量图像
*   230,000 名访客/天。只有大约 30% 的人会在网站上登录
*   数据库中最大的表可能包含 +/- 10 亿行。这个表可以被分区，每个查询只能访问 2 个 mio 行。数据库不包含图像。

该应用程序的棘手方面（我认为）是我可以选择：

*   经常查询10亿行的表
*   或者在登录时将一些用户数据存储在会话中。每个用户在会话中存储的数据大小约为 100Kbytes 数据。这意味着如果我有 7,000 个并发用户登录，这将意味着大约 700 Mb 的缓存数据。

考虑到这些要求，我很想收到您对以下问题的反馈：

*   您是将 100Kbytes 的数据/用户存储在会话缓存中，还是查询 10 亿条记录表？
*   您认为 django/PostgreSQL 堆栈是一个不错的选择吗？
*   您会推荐哪些托管服务（Heroku / Amazon、GAE、...）？

非常感谢您的反馈！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:51:30.430

1.  绝对尽可能多地缓存。
2.  是的，它们都经过了良好的测试并在生产中使用。
3.  这实际上取决于您的要求和您的价格敏感度。请注意，亚马逊是 Iaas，这意味着它们托管基础设施，但您需要管理自己的堆栈（操作系统、框架、数据库）。Heroku/GAE 是 PaaS，这意味着它们管理整个 SW 堆栈——你只需上传代码，它们就可以扩展。GAE 支持 django 但不支持 Postgresql（它带有自己的数据存储）。

# javascript - jQuery AutoComplete 插件 - minLength 无效

> ID：16134299
> 
> 赞同：0
> 
> 时间：2013-04-21T17:49:58.473
> 
> 标签：javascript, jquery, datatables, jquery-autocomplete

自动完成工作正常，但它显示带有 1 个字符的自动建议框，我想将其更改为仅在输入 >=3 时显示自动建议框。

我一直在尝试插入“minLength”选项，但它没有任何效果。

我试图将第六行修改为：

```
.autocomplete(conf.opts, minLength: 3 || {}); 
```

但没有成功。

* * *

这是我的 JS 文件：

```
var myEditor;
// AutoComplete FieldType
$.fn.dataTable.Editor.fieldTypes.autoComplete = $.extend(true, {}, $.fn.dataTable.Editor.models.fieldType, {
    "create": function (conf) {
        conf._input = $('<input type="text" id="' + conf.id + '">')
        .autocomplete(conf.opts || {});

        return conf._input[0];
    },

    "get": function (conf) {
        return conf._input.val();
    },

    "set": function (conf, val) {
        conf._input.val(val);
    },

    "enable": function (conf) {
        conf._input.autocomplete('enable');
    },

    "disable": function (conf) {
        conf._input.autocomplete('disable');
    },

    // Non-standard Editor method - custom to this plug-in
    "node": function (conf) {
        return conf._input;
    }
});

$(document).ready(function () {
    myEditor = new $.fn.dataTable.Editor({
        "ajaxUrl": "./php/pTreinamentos.php",
        "domTable": "#example",
        "fields": [{
            "label": "Tema",
            "name": "tema",
            "type": "autoComplete",
            "opts": {
            "source": ['banana']
            }
        }
        ]
    });

    // DataTable
    var oTable = $('#example').dataTable({
        "sDom": "<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
        "sAjaxSource": "./php/pTreinamentos.php",
        "bFilter": true,
        "bAutoWidth": false,
        "iDisplayLength": 20,
        "aoColumns": [{
            "mData": "tema"
            }
        ],
        "oTableTools": {
            "sSwfPath": "../../TableTools/media/swf/copy_csv_xls_pdf.swf",
            "sRowSelect": "single",
            "sPaginationType": "bootstrap",
            "aButtons": [{
                "sExtends": "editor_create",
                "editor": myEditor
                }, {
                "sExtends": "editor_edit",
                "editor": myEditor
                }, {
                "sExtends": "editor_remove",
                "editor": myEditor
                }
            ]
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:42:54.450

解决方案是在字段结构中添加选项。

```
"fields": [{
    "label": "Data",
    "name": "data",
    "type": "autoComplete",
    "opts": {
    "source": ['banana'],
    "minLength": 3
    } 
```

# android - 将消息放入android中的消息框

> ID：16134303
> 
> 赞同：-4
> 
> 时间：2013-04-21T17:50:10.727
> 
> 标签：android, messages, inbox

嗨，我想知道是否有办法在应用程序启动时在收件箱中放置一条消息。我想做的是，当我运行我的应用程序时，我希望来自号码的消息说是 034556343，消息的正文将是“应用程序已启动”应该在我的手机收件箱中。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:54:10.030

如果您想手动将一些带有发件人姓名的短信发送到您的收件箱，

```
ContentValues my_values = new ContentValues();
values.put("address", "034556343");//sender name
values.put("body", "Application has started");
getContentResolver().insert(Uri.parse("content://sms/inbox"), my_values); 
```

您还需要以下权限：

```
<uses-permission android:name="android.permission.READ_SMS"/>
<uses-permission android:name="android.permission.WRITE_SMS"/> 
```

请记住，SMS 内容提供程序实际上并不是 SDK 的一部分，并且不能保证此代码适用于所有过去、现在和未来的设备。

# sml - ML 中 ref 函数的使用

> ID：16134306
> 
> 赞同：3
> 
> 时间：2013-04-21T17:50:20.157
> 
> 标签：sml, ml

考虑到 ref 运算符，我很难理解它的应用和以下说明的含义：

**1.**

在这个定义中，我在定义什么？

```
 - val ref x=ref 9;

 val x = 9 : int 
```

**2.**

我在用 ref x:= ref 12 做什么？

```
 - val x= ref 8;

 val x = ref 8 : int ref

 - ref x := ref 12; 

 val it = () : unit

 - x;

 val it = ref 8 : int ref 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T18:31:18.463

`val ref x = ref 9`定义`x`为`9`- 就像你写的一样`val x = 9`。这是因为`ref`它是一个构造函数，所以它是模式匹配值与绑定到 9`ref 9`的模式。当然，像这样写而不是仅仅写是没有意义的。`ref x``x``val x = 9`

当您编写时`ref x := ref 12`，您创建了一个新`ref`的（类型`int ref ref`）来引用`x`. 然后，您立即将该 new 更改`ref`为引用`ref 12`而不是`x`. 由于`ref`您创建的新内容永远不会存储在您可能访问的任何地方，因此这不会产生明显的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-28T17:06:28.947

@newacct, @sepp2k 我看到这是几年前的事了，但我发现讨论很有用，并希望贡献以下输出`Standard ML of New Jersey v110.79 [built: Tue Aug 8 16:57:33 2017]`：

```
- val ref x = ref 9;
val x = 9 : int 
```

# php - mysql_connect() localhost 和 127.0.0.1 的区别

> ID：16134314
> 
> 赞同：2
> 
> 时间：2013-04-21T17:51:08.413
> 
> 标签：php, mysql

现在我有一个配置文件如下：

```
<?php
return array(
    'server'=>'localhost',
    'username'=>'root',
    'password'=>'123456',
    'dbname'=>'duxiu',
    'charset'=>'utf8'
); 
```

我对使用以下两种方法连接 mysql 所花费的时间感到困惑：

1.

```
<?php
class Mysql{
    private $conn;

    public function __construct($c){
        $this->conn=mysql_connect($c['server'],$c['username'],$c['password'],true) or die("连接出错");   
        mysql_select_db($c['dbname'],$this->conn);
        if(isset($c['charset'])){
            mysql_query("set names ".$c['charset'],$this->conn);
        }
    }
}
$c=require('config.php');
var_dump($c);
$db=new Mysql($c); 
```

它花费了 1.012 秒。

2.当我使用如下：

```
<?php
class Mysql{
    private $conn;

    public function __construct($c){
        $this->conn=mysql_connect($c['server'],$c['username'],$c['password'],true) or die("connect error");   
        mysql_select_db($c['dbname'],$this->conn);
        if(isset($c['charset'])){
            mysql_query("set names ".$c['charset'],$this->conn);
        }
    }
}
$c=array('server'=>'127.0.0.1','username'=>'root','password'=>'123456','dbname'=>'duxiu','charset'=>'utf8');
var_dump($c);
$db=new Mysql($c); 
```

现在它花费了 0.012 秒。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:55:55.243

区别：当您使用 127.0.0.1 而不是 localhost 时，PHP 将尝试建立与 mysql 的 TCP 连接，而不是使用 UNIX 域套接字。

通常，使用 UNIX 域套接字应该更快，但在您的应用程序中似乎并非如此，因为使用 UNIX 域套接字连接需要很长时间。您是否修改了 php.ini 值`mysql.default_socket`或`pdo_mysql.default_socket`？默认情况下它应该是空的。如果不是，您可以发布该值吗？

# javascript - jQuery UI Datepicker 和 Rails 不能一起玩？

> ID：16134315
> 
> 赞同：0
> 
> 时间：2013-04-21T17:51:08.967
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, jquery-ui, datepicker

我正在使用 Rails 3.2 和 jQuery datepicker。

问题是我无法让任何格式/自定义工作。

我在 posts.js.coffee 中的代码：

```
 jQuery ->
     $('#post_date').datepicker()
     dateFormat: "dd/mm/yy"
     minDate: "1w" 
```

如果我在[http://jsfiddle.net/y2wgK/](http://jsfiddle.net/y2wgK/)测试它一切正常。我也尝试过纯 Java 脚本。同样的事情也会发生。Rails 忽略除日期选择器之外的所有内容。换句话说，日期选择器工作正常，但对于每个实用程序函数，如 maxdate、mindate、dateFormat 什么都没有发生。

请告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:07:36.743

Coffee 脚本应该是（见括号）：

```
 $('#post_date').datepicker (dateFormat: 'dd-mm-yy') 
```

我不知道 Railscasts #213 日历（修订版）是如何工作的，因为 Ryan 根本不使用方括号。

# android - 如何在android上使用小按钮并仍然显示文本？

> ID：16134316
> 
> 赞同：0
> 
> 时间：2013-04-21T17:51:16.797
> 
> 标签：android

我正在设计一个计算器应用程序，我需要一些“不太重要”的按钮变小。我有一个 LinearLayout 并且我已将按钮的高度设置为 16dp。我还将字体设置为 10sp，但如果我不 wrap_content，文本将不会显示。

我还阅读了有关填充可能是一个问题的信息，并且我确保它等于零。

反正有一个小按钮并且仍然在上面显示文字吗？

按钮的代码：

```
 <Button
                   android:id="@+id/SIN"
                   android:layout_width="fill_parent"
                   android:layout_height="16dp"
                   android:layout_marginBottom="@dimen/button_marg"
                   android:layout_marginLeft="@dimen/button_marg"
                   android:layout_marginRight="@dimen/button_marg"
                   android:layout_marginTop="@dimen/button_marg"
                   android:background="@drawable/keypad1"
                   android:minHeight="12dp"
                   android:minWidth="0dp"
                   android:onClick="onClick"
                   android:text="sin"
                   android:textSize="@dimen/spec_button_text_size" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:54:54.700

如果没有必要，请不要使用`android:padding="0dp"`边距

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:57:13.580

减小文本大小，对于 layout_width 和 layout_height，换行内容应该可以解决。您可以将 layout_weight 属性用于按钮。假设您有 5 个按钮，如果您没有为它们指定 layout_weight，Android 会自动将 LinearLayout 划分为 5 个部分，每个按钮将容纳相同的大小，但您可以自己指定此属性以使按钮更小，例如在 4 个按钮上指定 0.1最后一个按钮为 0.6。

PS 通常总数应等于 1 但如果您也想更改它，您可以在名为 layout_weightSum="" 的 LinearLayout 属性中指定它

# python - LXML网页抓取，格式错误的html

> ID：16134319
> 
> 赞同：0
> 
> 时间：2013-04-21T17:51:26.400
> 
> 标签：python, xml, web-scraping

我正在尝试从该网站[http://sana.sy/eng/21/2013/01/07/pr-460536.htm](http://sana.sy/eng/21/2013/01/07/pr-460536.htm)抓取文章文本，但其 HTML 格式错误。谁能告诉我如何正确处理。

```
this is the code
import urllib2
from lxml import etree
import StringIO

speachesurls = ["http://sana.sy/eng/21/2013/01/07/pr-460536.htm", "http://sana.sy/eng/21/2012/06/04/pr-423234.htm", "http://sana.sy/eng/21/2012/01/12/pr-393338.htm"]

# scrape the speaches

for url in speachesurls:
    result = urllib2.urlopen(url)
    html = result.read()
    parser = etree.HTMLParser()
    tree = etree.parse(StringIO.StringIO(html), parser)
    xpath = "//html/body/table[3]/tbody/tr[3]/td[4]/table[2]/tbody/tr/td[2]/table/tbody/tr/td/table/tbody/tr[2]/td/div/table/tbody/tr[2]/td/div/p"
    a = tree.find(xpath)
    print a.text_content() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:01:10.187

这不是 lxml 或格式错误的 html 的问题，lxml 的 html 解析器*可以*处理。

您的代码工作正常，只是您的 xpath 表达式不匹配任何内容，`a`因此`None`.

# c++ - 如何从 C++ 代码中绘制类图

> ID：16134320
> 
> 赞同：1
> 
> 时间：2013-04-21T17:51:34.573
> 
> 标签：c++, uml, class-diagram

我有一些无法编译的 C++ 代码，我想从中绘制类图。我可以使用一些非常基本的东西（没有什么花哨的只是简单的骨头）吗？我在linux上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:13:33.317

根据代码的损坏程度，您可能需要查看[Umbrello UML Modeler](http://uml.sourceforge.net/)。它处理将 C++ 转换为 UML 图以及代码生成和更新。处理不完全使用普通编译器构建的源代码也是众所周知的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:56:06.027

ArgoUML ( [http://argouml.tigris.org/](http://argouml.tigris.org/) ) 是一个非常好的多平台 UML 图表工具。

或者，如果您不关心实际遵循严格的 UML 约定，有几个通用的在线图表服务，如 LucidChart ( [https://www.lucidchart.com/](https://www.lucidchart.com/) )，可以让您创建与 UML 兼容但不兼容的类图真的（也不会强迫您尝试保持兼容）。

*编辑：我刚刚意识到您的意思是从*代码中实际创建图表的工具，在这种情况下，我只能真正想到 Doxygen，它将生成图表作为为您的代码生成文档的副作用。除了以下内容之外，谷歌搜索并没有真正给我太多其他信息：http: [//www.codedrawer.com/](http://www.codedrawer.com/)但我没有亲自检查过。

您可能还会在这里找到一些额外的东西（感谢上校恐慌的链接）：[Generating UML from C++ code?](https://stackoverflow.com/questions/405953/generating-uml-from-c-code)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T18:01:21.143

[BOUML](http://www.bouml.fr/)不是目前最漂亮的 UML 建模程序，但它非常强大，可以从源代码绘制图表，并从图表生成代码。

编辑：哦，看来您现在需要付费了，以前它是免费的……您可能仍然可以在 Internet 上的某个地方找到旧的免费版本。

# c# - 我在非静态方法上得到“非静态字段需要对象引用”异常......我做错了什么？

> ID：16134325
> 
> 赞同：3
> 
> 时间：2013-04-21T17:52:03.413
> 
> 标签：c#, asp.net, .net

我有一个默认页面和一个分析页面，在默认情况下，我有一些单选按钮来更改表格，但是在编译时我得到一个“非静态字段需要对象引用”异常，一切都是非静态的，我还没弄清楚为什么会出现这个错误。

这是 _Default 的代码：

```
public partial class _Default : System.Web.UI.Page {
    public bool Carro {
        get { return radCarroSi.Checked ;}
    }
} 
```

这是分析的代码：

```
public partial class Analisis : System.Web.UI.Page {
    protected void Page_Load(object sender, EventArgs e) {
        if (!IsPostBack) {
        _Default prevPage = PreviousPage as _Default;
            if (prevPage != null) {
                if (_Default.Carro == true) {
                    row8.Visible = false;
                }
            }
        }
    }
} 
```

你能帮助我吗？我相信这很容易，但由于我是 asp 的新手，所以我还没有看到问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:54:03.193

您没有以下实例`_Default`：

您只是指类名，而不是类的实例。

进一步详细说明。

```
public class YourClass 
{
  public bool Carro { get; set; } 
}

YourClass instance = new YourClass();  // this would create a new instance of `YourClass`. 
```

您可以通过使用来引用它，`instance.Carro`就像您所做的那样`_Default.Carro`

但是我相信您正在尝试确定是否`Carro`已在页面中检查了 的值，`ASP.NET`但不能像这样工作，您需要了解如何管理客户端和服务器之间的状态。这可以通过`ViewState, Session, Cookies and Query Strings`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:56:35.983

您无法检查是否在其他页面中选中了单选按钮，因此该行在分析页面中不起作用（此外，您甚至没有 _Default 的实例）：

```
 if (_Default.Carro == true) {
        row8.Visible = false;
    } 
```

您需要使用[Session](http://msdn.microsoft.com/en-us/library/ms972338.aspx)、[Querystring](http://www.codeproject.com/Articles/5876/Passing-variables-between-pages-using-QueryString)或其他方法在页面之间传递单选按钮值

# android - 在 Android 中，有没有办法在联系人的照片发生变化时（通过接收器、侦听器等）获得通知？

> ID：16134333
> 
> 赞同：2
> 
> 时间：2013-04-21T17:52:29.783
> 
> 标签：android, photo, contact, photos

我的应用程序使用自定义布局来显示所有联系信息，包括照片。它旨在处理大量的联系人（在 1000 年代），并且我为联系人照片创建了一个缓存，以使其加载速度更快。但是，当在手机上更新联系人照片时，我遇到了问题。由于我使用的是缓存照片，因此新照片不会出现在应用程序中，直到它被强制关闭然后重新启动。而且我不想使用上次访问时间戳之类的东西来刷新缓存的照片，因为这样做会在每次需要刷新时显着减慢应用程序的速度。

因此，理想情况下，每当联系人照片发生更改时，我都希望得到通知（通过广播接收器之类的东西），然后我可以在缓存中更新该照片。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:58:43.793

用户[CursorLoader](http://developer.android.com/reference/android/content/CursorLoader.html)来自动更新您的 gui。[在这里](http://www.codeproject.com/Articles/525313/Using-Cursor-Loader-in-Android)你可以看到一个教程。显然还有很多其他的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T11:07:54.397

您可以使用 ContentObserver。

```
public class ContractObserv extends Activity {

MyContentObserver observer;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    observer=new MyContentObserver();
    getApplicationContext().getContentResolver().registerContentObserver(ContactsContract.Contacts.CONTENT_URI, true, observer);

}

  private class MyContentObserver extends ContentObserver {

        public MyContentObserver() {
            super(null);
        }

        @Override
        public void onChange(boolean selfChange) {
            super.onChange(selfChange);
            Log.d("Androider", "INSIDE ONcHANGE");
        }

    }} 
```

令人惊奇的是，一旦您运行它并且每次联系人更改时，都会调用 OnChange 直到您取消注册它。

# c# - 带有 Matlab 代码的 C# GUI

> ID：16134334
> 
> 赞同：1
> 
> 时间：2013-04-21T17:52:32.960
> 
> 标签：c#, matlab

我试图找出为一堆 Matlab 代码创建 C# 前端的最佳方法。大多数 Matlab 代码已经编写好并处理处理巨大的矩阵，所以如果有某种方法可以只引用 Matlab 代码而不是每次都将其编译到库文件中（尽管我什至没有确定这是否可能）。我对 C# 不是很熟悉，但我正在尝试创建一个 GUI，它将接受输入，使用该输入调用 Matlab 函数，然后在 GUI 中绘制结果。我一直无法让 deploytool 工作，我尝试在 Visual Studios 中将 Matlab 设置为 COM 端口，所以如果有任何关于如何使这些工作为我希望他们做的事情（或全新可行的建议），那太棒了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:09:38.170

我建议从matlab直接启动.net函数

您可以在 matlab 中加载程序集，然后打开对话框。

您可以在此处找到功能的完整文档：http: [//www.mathworks.de/de/help/matlab/using-net-libraries-in-matlab.html](http://www.mathworks.de/de/help/matlab/using-net-libraries-in-matlab.html)

我希望你有最新的 matlab 版本，因为特别是在 2012 版本中，它们在 matlab 中包含了更多的转换函数/.net 支持

# java - 浮点数的输入验证（在 Try-Catch 块内）

> ID：16134335
> 
> 赞同：0
> 
> 时间：2013-04-21T17:52:33.100
> 
> 标签：java, try-catch, validation

我试过搜索谷歌和几个这样的网站来找到我的问题的答案，但我没有任何运气。我在大学的第二级 Java 课程中，我试图弄清楚如何在使用 try-catch 块时对浮点数进行输入验证。该场景的要点如下：

驱动程序将调用方法promptForMotherHeight()，该方法应该将用户的条目作为浮点数拉入。问题在于，使用 try-catch 块时，如果扫描器检测到非浮点数，它不会将数据转储出扫描器的缓冲区。这会导致无限循环。I've tinkered with adding a Scanner.next() inside my catch block, but any data entered after the first attempt will not validate properly (meaning that I can enter in something such as 5.55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555 and it will accept this as a valid input) .

这是我正在使用的代码（我已经在类的顶部导入了我需要的所有东西，而 MotherHeight 是类顶部的私有浮点实例变量）：

```
public void promptForMotherHeight()
{    
    String motherHeightPrompt = "Enter mother's height in inches: ";
    String motherError1 = "Invalid entry. Must be positive.";
    String motherError2 = "Invalid entry. Must be a decimal number.";    
    boolean valid = false;

    do
    {
        System.out.print(motherHeightPrompt);
        try 
        {
            motherHeight = stdIn.nextFloat(); 
            valid = true;
        }
        catch (InputMismatchException e)
        {
            System.out.println(motherError2);
            stdIn.next();        
        }
    } while(!valid);
} 
```

任何关于我如何完成正确输入验证的指针或提示将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T10:28:40.313

You could do the floating point number validation in the `try-catch` like this.

```
do {
    System.out.print(motherHeightPrompt);
    try {
        motherHeight = Float.parseFloat(stdIn.nextLine()); // This will read the line and try to parse it to a floating value
        valid = true;
    } catch (NumberFormatException e) { // if it was not a valid float, you'll get this exception
        System.out.println(motherError2);
            // You need not have that extra stdIn.next()
            // it loops again, prompting the user for another input
    }
} while (!valid); // The loop ends when a valid float is got from the user 
```

# java - Netbeans GUI builder 中的 Enclose In 选项灰显

> ID：16134336
> 
> 赞同：1
> 
> 时间：2013-04-21T17:52:45.133
> 
> 标签：java, swing, netbeans, jpanel, right-mouse-button

使用 Netbeans IDE 构建 Java GUI 应用程序。我在其中创建了一个 JPanel。添加了很多字段后，我还想在其中添加一个 JscrollPane。我发现，如果我们右键单击窗格，我们可以选择将其封闭在一个容器中，该容器可以是滚动窗格或拆分窗格等。

问题是，当我右键单击面板时，封闭的按钮是灰色的。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T18:38:46.723

我遇到过同样的问题。经过实验，您似乎只能`Enclose In`在 Layout 设置为 时使用`Free Design`。

然而，我发现完成同样事情的另一种方法是创建空的 JPanel 和您想要在其中的组件，所有这些都在 TopComponent 中的同一级别。然后使用显示组件层次结构的导航器窗口将所需的组件拖放到 JPanel 中。

例如，这里我创建了一个 JPanel 和一个 JRadioButton 作为兄弟，然后我将 JRadioButton 拖放到 JPanel 中，这样 JPanel 就是父级。

![JRadioButton 和 JPanel 是兄弟姐妹](https://i.stack.imgur.com/7fvA6.png)

结果：

![现在 JRadioButton 是 JPanel 的孩子](https://i.stack.imgur.com/1DIYW.png)

# mobile - 移动设备中 Bootstrap 中的嵌套下拉菜单

> ID：16134341
> 
> 赞同：2
> 
> 时间：2013-04-21T17:53:25.943
> 
> 标签：mobile, twitter-bootstrap, drop-down-menu, nested

我正在使用引导程序构建[这个网站。](http://kmaxat.com/mobilemap/index.html)

问题是我有嵌套的下拉菜单。下拉菜单看起来不错，并且在桌面版本中没有混乱。

![桌面版中的嵌套下拉菜单](https://i.stack.imgur.com/wZsV2.jpg)

然而，这就是它在移动设备中的外观：

![移动版中的嵌套下拉菜单](https://i.stack.imgur.com/IKicx.png)

它们看起来很杂乱，你不能折叠/展开最深层次的下拉菜单。它只是不允许这样做。

我认为有更好的方法可以在移动视图中表示信息。我的方法是当人们触摸“建筑物/土地”选项卡时，我用建筑物/土地的内容替换底部导航栏，从而减少一级下拉菜单。

问：我真的没有开发 UI 的经验。我的方法是否足够？ **我应该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T04:53:22.700

我使用了一个可以很好地与 Bootstrap 配合使用的甜蜜 JS 插件，称为[Snap.js](https://github.com/jakiestfu/Snap.js/)。如果您曾经使用过 Facebook iOS 应用程序，您就会熟悉这种布局。这里有一些很棒的[演示。](http://jakiestfu.github.io/Snap.js/demo/apps/default.html)

# redirect - 如何将特定路径重定向到 nginx 中的另一个路径？

> ID：16134346
> 
> 赞同：0
> 
> 时间：2013-04-21T17:53:55.903
> 
> 标签：redirect, nginx

我需要重定向一个特定的路径：

```
mydomain.com/old-path/ 
```

永久地走向新的道路：

```
mydomain.com/new-path/ 
```

我正在使用 elgg 软件 (elgg.org)，目前当有人导航到 /old-path/ 文件夹时，他们会查看一个页面（而不是文件夹列表） - 因此没有使用特定的页面名称。

我尝试了各种重定向方法，这些方法可以通过 google 为 nginx 找到，但到目前为止都没有任何效果。它们主要用于特定页面或目录，但我正在做的，我想，从技术上讲，既不是特定页面也不是目录..

有谁知道如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:04:15.630

您可以使用 nginx [HttpRewriteModule](http://wiki.nginx.org/HttpRewriteModule)来执行此操作。

```
rewrite ^/old-directory/(.*)$ /new-directory/$1 last; 
```

# javascript - JQuery滑动代码不起作用

> ID：16134350
> 
> 赞同：0
> 
> 时间：2013-04-21T17:54:09.123
> 
> 标签：javascript, jquery, animation, iframe, jquery-animate

我是 JQuery 的新手，正在尝试让 div 从右向左滑出，然后从左向右滑回。我正在使用的代码是：

```
 function addListeners()
   {
     document.getElementById('save_li').addEventListener('click', function () {

            $('#frame_div').animate({width:'toggle'});
            document.getElementById('frame_opened').src = "save.php";
            $('#frame_div').animate({width:'toggle'});
            }, false);  
      document.getElementById('recover_li').addEventListener('click', function () {
            $('#frame_div').hide("slide",{direction:"right"},1000);
            document.getElementById('frame_opened').src="recover.php";
            //$('#frame_div').animate({width:'toggle'});
            $('#frame_div').show("slide",{direction:"left"},1000);
            }, false);
   }
    window.onload=addListeners; 
```

HTML：

```
<div src="save.php" class="frame_div" style="height: 500px; width: 574px; padding-left: 146px;">
  <iframe id="frame_opened" style="width: 100%;" height="100% overflow-x:hidden; overflow-y:hidden;" scrolling="no">
</div> 
```

Firefox 上的 FireBug 或 WebDeveloper 均未显示错误，但代码不起作用。`iframe`源更改没有动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:03:50.660

我清理了您的代码，并将其全部设为 jQuery。确保您在页面中包含`jquery.js`（`jquery.min.v1.9.1.js`或类似内容）。如果您保留需要 jQuery UI 的行（请参阅代码中的注释），请确保包含 jQuery UI 的 CSS 和 JS 文件。

jQuery：

```
$(document).ready(function(){
    $('#save_li').click(function () {
        $('#frame_div').animate({width:'toggle'}, 1000);
        $('#frame_opened').attr('src','save.php');
        $('#frame_div').animate({width:'toggle'}, 1000);
    }); 
    $('#recover_li').click(function () {
        $('#frame_div').hide("slide",{direction:"right"}, 1000); // this line requires jQuery UI
        $('#frame_opened').attr('src','recover.php');
        $('#frame_div').show("slide",{direction:"left"}, 1000); // this line requires jQuery UI
    });
}); 
```

您缺少一些必需的属性，例如动画的长度。（我将它设置`1000`为 1 秒。）

如果你想省略 jQuery UI，使用这个：

```
$(document).ready(function(){
    $('#save_li').click(function () {
        $('#frame_div').hide(1000).show(1000);
        $('#frame_opened').attr('src','save.php');
    }); 
    $('#recover_li').click(function () {
        $('#frame_div').hide(1000).show(1000);
        $('#frame_opened').attr('src','recover.php');
    });
}); 
```

HTML：

```
<div id="frame_div" style="height: 500px; width: 574px; padding-left: 146px;">
  <iframe src="save.php" id="frame_opened" style="width: 100%;" height="100% overflow-x:hidden; overflow-y:hidden;" scrolling="no"></iframe>
</div> 
```

该`src`属性在`iframe`元素上。如果可能，请将样式改为 CSS。

演示： http: [//jsfiddle.net/vy5AW/5/](http://jsfiddle.net/vy5AW/5/)使用 jsfiddle.net/vy5AW/2/ 中 OP 提供的 HTML/CSS

# compiler-errors - ICC无法打开头文件

> ID：16134354
> 
> 赞同：0
> 
> 时间：2013-04-21T17:54:28.337
> 
> 标签：compiler-errors, header-files, icc

我正在尝试编译带有自己的 makefile 的代码（不是我的；使用 C 与 cuda 通信），我收到以下错误消息：

```
icc  -fPIC  -vec-report1 -g  -O3 -fno-strict-aliasing -DNDEBUG -I. -I/include -DUNIX -DCPU_RECOMPUTE=1 -DFULL_DOUBLE=0 -c classify_functions.cpp -o classify_functions.o

classify_functions.cpp(4): catastrophic error: cannot open source file "cuda_runtime.h"
  #include <cuda_runtime.h>
                           ^

compilation aborted for classify_functions.cpp (code 4)

make: *** [classify_functions.o] Error 4 
```

我使用“定位”并检查 /usr/local/cuda/include/cuda_runtime.h 是否存在；然后我尝试在变量 PATH、LD_LIBRARY_PATH 和 C_INCLUDE_PATH 中将它添加到我的 .bashrc 中，但似乎没有任何效果。icc头文件的路径是否还有另一个变量？如果不是，为什么编译器不能打开文件？

（我可以提供更多信息，但我真的不知道在这种情况下什么是相关的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-09T16:46:24.930

在 Linux（可能还有 MacOS）中，编译器包含路径是*

```
/opt/intel/compilers_and_libraries_2018.0.128/linux/compiler/include 
```

库路径是

```
/opt/intel/compilers_and_libraries_2018.0.128/linux/compiler/lib 
```

所以您只需要确保该`cuda_runtime.h`文件（以及其他必要的头文件）在编译器路径中。

*假设Intel的编译器icc安装正确，安装路径保持默认。

# asp.net-mvc-4 - 在 ASP.NET Web Api 中自定义绑定

> ID：16134356
> 
> 赞同：2
> 
> 时间：2013-04-21T17:54:38.823
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我在 ASP.NET Web Api 中遇到以下问题。假设我的代码中有以下代码`ApiController`：

```
public void Post(Person person)
{
    // Handle the argument
} 
```

我想做的是接受以下 JSON 请求：

```
{
    "person": {
        "name": "John Doe",
        "age": 27
    }
} 
```

我想为每个模型创建一些持有对象，只是为了正确绑定传入的数据。在以前的 MVC 版本中，可以定义类似 Prefix 的东西来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:23:40.563

让我报告我已经能够解决这个实施`CustomJsonMediaTypeFormatter`：

```
public class EmberJsonMediaTypeFormatter : JsonMediaTypeFormatter
{
    public override System.Threading.Tasks.Task<object> ReadFromStreamAsync(
        Type type,
        System.IO.Stream readStream,
        System.Net.Http.HttpContent content,
        IFormatterLogger formatterLogger)
    {
        return base.ReadFromStreamAsync(
            typeof(JObject),
            readStream,
            content,
            formatterLogger).ContinueWith<object>((task) =>
        {
            var data = task.Result as JObject;
            var prefix= type.Name.ToLower();

            if (data[prefix] == null)
            {
                return GetDefaultValueForType(type);
            }

            var serializer = JsonSerializer.Create(SerializerSettings);

            return data[prefix].ToObject(type, serializer);
        });
    }
} 
```

并替换默认值`JsonMediaTypeFormatter`。`GlobalConfiguration`

# jquery - 字段“日期”必须是日期 MVC 4

> ID：16134357
> 
> 赞同：8
> 
> 时间：2013-04-21T17:54:51.827
> 
> 标签：jquery, asp.net-mvc-4, jquery-validate

我在使用我的 jQuery datepicker 时遇到了这个错误。

jQuery：

```
$( ".datepicker" ).datepicker({ 
    defaultDate: +7,
    autoSize: true,
    dateFormat: 'dd.mm.yy',
}); 
```

模型：

```
[DisplayName("Date")]
[DisplayFormat(DataFormatString = "{0:dd.MM.yyyy}", ApplyFormatInEditMode = true)]
[Required(ErrorMessage = "Date is required")]
public DateTime Date { get; set; } 
```

所以我希望日期格式类似于`dd.MM.yyyy`，并且当我使用日期选择器选择日期时，它会正确添加到字段中。但也在同一秒钟内，出现验证错误，说`The field 'Date' must be a date`.

我确实通过手动编写格式的日期进行了测试，`dd/MM/yy`然后看起来它正在工作。因此，验证器在某处寻找该格式，但我无法找到修改它的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-17T14:11:55.933

你在用铬吗？可能是 jquery.validate.js 问题，请查看此[Jquery Datepicker Chrome](https://stackoverflow.com/questions/5966244/jquery-datepicker-chrome)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T00:09:30.030

DisplayFormat 不会是验证中接受的格式。如果您想要其中带有句点的内容，我建议您使用正则表达式来验证这一点。

```
[DisplayName("Date")]
[DisplayFormat(DataFormatString = "{0:dd.MM.yyyy}", ApplyFormatInEditMode = true)]
[Required(ErrorMessage = "Date is required")]
[RegularExpression(@"PUT REGEX HERE", ErrorMessage = "Invalid Date")] // below is a link
public DateTime Date { get; set; } 
```

[这里有一些常用的表达方式。](http://answers.oreilly.com/topic/226-how-to-validate-traditional-date-formats-with-regular-expressions/)

另外，我建议从 c# 到 js 时格式保持一致。

**你在 JS 中有：**

```
dateFormat: 'dd.mm.yy' 
```

**你可能想要：**

```
dateFormat: 'dd.mm.yyyy' 
```

您也可以将模型上的 DisplayFormat 属性也更改为 dd.MM.yy。只是一个想法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T12:58:05.647

[修改https://stackoverflow.com/a/17968454/4955259](https://stackoverflow.com/a/17968454/4955259)上提供的答案似乎对我来说适用于日期格式 dd.mm.yy（在 jquery.validate.js 之后添加脚本）。

```
jQuery.validator.methods.date = function (value, element) {
    var d = value.split(".");
    return this.optional(element) || !/Invalid|NaN/.test(new Date((/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())) ? d[1] + "." + d[0] + "." + d[2] : value));
}; 
```

# ios - 如何以编程方式调用视图控制器？

> ID：16134361
> 
> 赞同：72
> 
> 时间：2013-04-21T17:55:11.580
> 
> 标签：ios, objective-c, uiviewcontroller, uistoryboard, presentviewcontroller

我已经查看了我可以找到的所有教程，但我仍然没有答案。我需要从代码中调用另一个视图。我正在使用`UIStoryboards`. 我已经通过控制拖拽改变了很多次视图`UIButtons`，但现在它必须来自代码。如果这是用户第一次打开应用程序，我正在尝试从主菜单调用信息页面。但是，我似乎找不到从代码中更改视图的方法。我所有的视图都由相同的文件（**ViewController2**）控制。我的`identifier`主菜单是**ViewControllerMain**，`identifier`信息页面是**ViewControllerInfo**。首先我尝试了这个：

```
[ViewControllerMain presentViewController: ViewControllerInfo 
                                 animated:YES 
                               completion: NULL]; 
```

然后我尝试`UIViewControllers`为每个人做不同的事情并说：

```
[ViewController2 presentViewController: ViewController 
                              animated:YES 
                            completion: NULL]; 
```

都没有奏效。对于第一个，它说：

> 使用未声明的标识符 ViewControllerMain。

在第二个中，它说：

> 意外的接口名称“ViewController”：预期的标识符。

我能做些什么？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-04-21T18:29:50.527

创建视图控制器：

```
UIViewController * vc = [[UIViewController alloc] init]; 
```

调用视图控制器（必须从另一个视图控制器中调用）：

```
[self presentViewController:vc animated:YES completion:nil]; 
```

一方面，使用 nil 而不是 null。

* * *

从情节提要加载视图控制器：

```
NSString * storyboardName = @"MainStoryboard"; 
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:storyboardName bundle: nil];
UIViewController * vc = [storyboard instantiateViewControllerWithIdentifier:@"IDENTIFIER_OF_YOUR_VIEWCONTROLLER"];
[self presentViewController:vc animated:YES completion:nil]; 
```

`Identifier`您的视图控制器的名称等于您的视图控制器的类名，或者您可以在情节提要的身份检查器中分配的情节提要 ID。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-21T21:00:32.707

您需要从情节提要中实例化视图控制器，然后显示它：

```
ViewControllerInfo* infoController = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewControllerInfo"];
[self.navigationController pushViewController:infoController animated:YES]; 
```

此示例假定您有一个导航控制器以便返回到前一个视图。你当然也可以使用 presentViewController:animated:completion:。要点是让您的故事板使用目标视图控制器的 ID 实例化您的目标视图控制器。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-06-10T04:44:34.113

# 迅速

这会从情节提要中获取一个视图控制器并呈现它。

```
let storyboard = UIStoryboard(name: "Main", bundle: nil)
let secondViewController = storyboard.instantiateViewController(withIdentifier: "secondViewControllerId") as! SecondViewController
self.present(secondViewController, animated: true, completion: nil) 
```

根据需要更改情节提要名称、视图控制器名称和视图控制器 ID。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-21T12:18:41.597

你可以用这种方式调用 ViewController，如果你想用 NavigationController

![在此处输入图像描述](https://i.stack.imgur.com/gRKoW.png)

**1.在当前屏幕：加载新屏幕**

```
VerifyExpViewController *addProjectViewController = [[VerifyExpViewController alloc] init];
[self.navigationController pushViewController:addProjectViewController animated:YES]; 
```

**2.1 在加载视图中：在 .h 文件中添加以下内容**

```
@interface VerifyExpViewController : UIViewController <UINavigationControllerDelegate> 
```

**2.2 在加载视图中：在 .m 文件中添加以下内容**

```
 @implementation VerifyExpViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationController.delegate = self;
    [self setNavigationBar];
}
-(void)setNavigationBar
{
    self.navigationController.navigationBar.backgroundColor = [UIColor clearColor];
    self.navigationController.navigationBar.translucent = YES;
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"B_topbar.png"] forBarMetrics:UIBarMetricsDefault];
    self.navigationController.navigationBar.titleTextAttributes = @{NSForegroundColorAttributeName: [UIColor whiteColor]};
    self.navigationItem.hidesBackButton = YES;
    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"Btn_topback.png"] style:UIBarButtonItemStylePlain target:self action:@selector(onBackButtonTap:)];
    self.navigationItem.leftBarButtonItem.tintColor = [UIColor lightGrayColor];
    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"Save.png"] style:UIBarButtonItemStylePlain target:self action:@selector(onSaveButtonTap:)];
    self.navigationItem.rightBarButtonItem.tintColor = [UIColor lightGrayColor];
}

-(void)onBackButtonTap:(id)sender
{
    [self.navigationController popViewControllerAnimated:YES];
}
-(IBAction)onSaveButtonTap:(id)sender
{
    //todo for save button
}

@end 
```

希望这对那里的人有用:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-21T21:16:44.357

有两种方法可以做到这一点：

1，如我在此处的回答中所述，在 Storyboard 中为您的 ViewController 创建一个转场：[如何在 iOS 5 中执行与用户输入无关的转场？](https://stackoverflow.com/questions/7964712/how-to-perform-a-segue-that-is-not-related-to-user-input-in-ios-5/8452602#8452602)

2，给你的 ViewController 和标识符，并在这里使用我的答案中的代码调用它：[Call storyboard scene programmatically (without need segue)?](https://stackoverflow.com/questions/10522957/call-storyboard-scene-programmatically-without-needing-segue/10523076#10523076)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-13T13:40:49.797

这背后的主要逻辑是_，

```
NSString * storyboardIdentifier = @"SecondStoryBoard";

UIStoryboard *storyboard = [UIStoryboard storyboardWithName:storyboardIdentifier bundle: nil];

UIViewController * UIVC = [storyboard instantiateViewControllerWithIdentifier:@"YourviewControllerIdentifer"];

[self presentViewController:UIVC animated:YES completion:nil]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-11T09:54:43.723

```
 UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone_iOS7" bundle:nil];
            AccountViewController * controller = [storyboard instantiateViewControllerWithIdentifier:@"accountView"];
            //            [self presentViewController:controller animated:YES completion:nil];

        UIViewController *topRootViewController = [UIApplication sharedApplication].keyWindow.rootViewController;
        while (topRootViewController.presentedViewController)
        {
            topRootViewController = topRootViewController.presentedViewController;
        }

        [topRootViewController presentViewController:controller animated:YES completion:nil]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-24T07:40:11.653

导入要显示的视图控制器类并使用以下代码

```
KartViewController *viewKart = [[KartViewController alloc]initWithNibName:@"KartViewController" bundle:nil];
[self presentViewController:viewKart animated:YES completion:nil]; 
```

# javascript - 有哪些可能的用途：onresize="window.location.reload(false);"？

> ID：16134365
> 
> 赞同：3
> 
> 时间：2013-04-21T17:55:53.800
> 
> 标签：javascript, html

我在一些 HTML 中遇到了这段代码，但我不确定它的意义是什么：

```
onresize="window.location.reload(false);" 
```

我对JavaScript不是很精通，但看起来它基本上只是......在调整大小时重新加载浏览器窗口？这还有效吗？这似乎很奇怪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T17:59:38.637

正如您所怀疑的那样，它确实会重新加载页面，尽管`false`传递给的参数`reload`表明应该尽可能从缓存中重新加载页面，以最大限度地减少加载时间。有关更多详细信息，请参阅 Mozilla 的[`window.location`](https://developer.mozilla.org/en-US/docs/DOM/window.location)文档。

我怀疑这是为了强制浏览器重新布局页面，以防调整窗口大小改变它的呈现方式。通常这不是必需的，特别是如果网站采用[响应式网页设计](https://developer.mozilla.org/en-US/docs/DOM/window.location)技术，但有些网站可能会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:28:22.783

我同意斯图尔特的观点。您拥有此代码吗？换句话说，您可以更改代码并将其部署到某个测试环境吗？如果是这样，请尝试评论该行，看看会发生什么。当某些特定的浏览器无法正确处理窗口大小调整事件时，可能会添加这条线。可能已经不需要了。

# java - java饼图高度没有正确放置

> ID：16134367
> 
> 赞同：1
> 
> 时间：2013-04-21T17:56:03.770
> 
> 标签：java, swing, charts, jfreechart, pie-chart

我正在使用 JFreeChart 在我的程序中制作图表。我的问题是我无法正确设置高度。我已经尝试了所有我能想到的命令，我已经将它放在其他面板中，但是，没有任何效果。我希望能够把它放在角落的某个地方……或者真正的任何地方，并且能够设置宽度和高度。我也尝试过使用 setPreferedSize，但它只适用于宽度。

代码 ：

```
DefaultPieDataset result = new DefaultPieDataset();
    result.setValue("TotalSwag", totalSwag);
    result.setValue("TotalYolo", totalYolo);
    result.setValue("TotalCool", totalCool);
    result.setValue("TotalLame", totalLame);
    JFreeChart chart = ChartFactory.createPieChart3D("Swag-O-meter", result, true, true, false);
    PiePlot3D plot = (PiePlot3D) chart.getPlot();
    plot.setStartAngle(290);
    plot.setDirection(Rotation.CLOCKWISE);
    plot.setForegroundAlpha(0.5f);
    ChartPanel chartPanel = new ChartPanel(chart, W, H, W, H, W, H,
            false, true, true, true, true, true);
    chartPanel.setMaximumSize(new Dimension(150, 150));

    charPanel.add(chartPanel);
    charPanel.setSize(W, H);
    contentPane.add(charPanel, BorderLayout.WEST); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:18:39.877

A `JFreeChart` is not a `JComponent`, but a `ChartPanel` is. You can control the size using any appropriate approach mentioned [here](https://stackoverflow.com/a/10277372/230513).

> *I'd like all windows to be the same size*.

In this case, I'd override `getPreferredSize()` to return a `Dimension` having equal `width` and `height`. You can use `PiePlot#setCircular()` to preserve the aspect ratio of the `PiePlot`.

This [example](https://stackoverflow.com/a/7602126/230513) shows a `GridLayout(1, 0)` of charts each having a `ThermometerPlot`:

![image](https://i.stack.imgur.com/YTBqP.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:31:57.183

我已经找到了解决方法，我所要做的就是不使用 flowLayout，而是使用 grouplayout，因为面板正在放大图表，就像你在 flowLayout 中放置一个按钮一样，它会变成大小它的包含区域。感谢大家的惊人帮助。

# javascript - javascript中的跳跃动画？

> ID：16134372
> 
> 赞同：1
> 
> 时间：2013-04-21T17:56:42.913
> 
> 标签：javascript, html5-canvas

我正在尝试用 javascript 组合一个简单的游戏，但我无法让跳跃工作：

```
function jump()
 {
     isJumping=true;

    var jumpint= setInterval(function() {
    ypos=ypos-5;
    }, 10);
    if(ypos==150)
    {
        isJumping == false;
        clearInterval(jumpint);
        jumpint = 0;
        alert("it works");
        return;

    }

 } 
```

每当我调用此函数时，它都会提供动画，并且角色会朝正确的方向移动，但不会停止。一旦 ypos 等于 150，它就会继续移动并且不执行 if 语句，我不知道为什么。很明显，我会在里面做一些方程式，但我想在继续之前让这个跳跃执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:58:10.827

将 if 语句*放在*中`setInterval`，否则只会执行一次。

```
var jumpint = setInterval(function() {
    ypos=ypos-5;
    if(ypos==150)
    {
        isJumping == false;
        clearInterval(jumpint);
        alert("it works");
    }
}, 10); 
```

此外，您可能希望将条件更改为`ypos <= 150`. 假设`ypos`是 157。如果你继续减少 5，它将变为 157 -> 152 -> 147 并跳过条件。要修复它，只需将 if 语句的条件更改为`ypos <= 150`.

# javascript - Node.js 和 mysql 回调：查询回调中的查询

> ID：16134378
> 
> 赞同：9
> 
> 时间：2013-04-21T17:57:02.230
> 
> 标签：javascript, mysql, node.js, node-mysql

如果我的数据库没有，我想做的就是插入一些数据，所以我将插入 SQL 放入我的 Select SQL 的回调函数中，但我得到了这样的错误：

> { [错误：调用退出后无法排队查询。] 代码：'PROTOCOL_ENQUEUE_AFTER_QUIT'，致命：false }

我的代码片段在这里：

```
db.query('SELECT count(*) as Resultcount FROM tablename WHERE email = ? and password = ?', [post.email, post.password], function(error, result){
    if (result[0].Resultcount == 0){
        var query2 = db.query('INSERT INTO tablename SET ?', [post], function(err, result) {
            if(err){
              console.log(err);
           }
             console.log(result);
          });
    }
    else{
        console.log('have data already');
    }
}); 
```

有人可以给我一些建议吗？谢谢

- - 更新 - -

其实 select SQL 的回调函数并不是匿名函数，我的 db.end() 代码片段是这样的：

```
var QueryResults = new queryResultFuntion(Back_results);

    db.query('SELECT count(*) as Resultcount FROM tablename WHERE email = ? and password = ?', [post.email, post.password], QueryResults.queryResult );

    db.end(); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-21T18:06:41.197

一旦完成，您`db.end()`调用将排队关闭连接`SELECT`，因此当您尝试执行内部`INSERT`查询时，数据库连接将已关闭，因此错误 PROTOCOL_ENQUEUE_AFTER_QUIT，因为您尝试在连接关闭后排队新命令.

根据您创建连接的方式，您应该将调用移到`db.end()`回调中，或者`db.end()`如果在程序启动时打开连接，则根本不调用。

# ruby-on-rails - 使用正则表达式验证逗号分隔单词字符串的格式

> ID：16134379
> 
> 赞同：1
> 
> 时间：2013-04-21T17:57:05.687
> 
> 标签：ruby-on-rails, ruby, regex, validation, format

我正在尝试使用正则表达式从 ruby​​ 类中的文本字段中验证一串逗号分隔的单词。以下内容应该是有效的：

```
word

word, word, word

word,word,word 
```

以下内容应该是无效的：

```
word word word 
```

我以为这行得通

```
/([a-z]+){1}(,\s*[a-z]+)*/i 
```

在 Rubular 上，它似乎是有效的，但是当我在我的类中进行如下验证时，它接受应该是无效的字符串。

```
@tag_regex = /([a-z]+){1}(,\s*[a-z]+)*/i

validates :tags, 
:allow_blank => true,
:format => { :with => @tag_regex, :message => "Invalid tag format." } 
```

我不确定我的问题在于正则表达式还是验证方法本身。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:59:09.713

你忘了使用`^`（字符串的开头）和`$`（字符串的结尾）

所以，应该是

```
/^([a-z]+)(,\s*[a-z]+)*$/i 
```

* * *

没有`^`，`$`它将匹配字符串之间的任何位置..With `^`，`$`您将使其完全**匹配**

# java - Playframework 2.1.1 在生产服务器上部署

> ID：16134382
> 
> 赞同：12
> 
> 时间：2013-04-21T17:57:20.220
> 
> 标签：java, playframework-2.1

我应该采取哪些步骤才能在生产服务器上正确部署 Playframework 2.1.1 网站？更具体的问题：

1) 我应该在我的生产服务器上安装 Play 吗？

2）在本地使用很清楚，`play run`但在生产中我需要 24/7 运行它，如果服务器已重新启动，则再次重新启动它。这是如何工作的？一些outostart或什么？

3) 如何在 mydomain.com（端口 80）上的 Ubuntu 12.04（Apache2）服务器上部署它？4) 我应该为生产更改/添加哪些配置设置以禁用调试等？

我非常感谢有关 Playframework 2.1.1 的默认部署工作流程的信息

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-21T18:36:11.357

首先使用 . 创建项目的可部署版本`play clean compile dist`。文档[建议](http://www.playframework.com/documentation/2.1.1/Production) `play clean compile stage`，但该[`dist`](http://www.playframework.com/documentation/2.1.1/ProductionDist)命令会生成一个不错的 ZIP 文件，并且执行基本相同的操作。

然后将该文件加载到您的服务器上并将其解压缩到所需的文件夹。`start`现在使用为您创建的文件 Play启动 Play 服务器。

播放默认为 TCP 端口 9000，就像在调试模式下一样，但您可以使用选项更改它`-Dhttp.port=80`。监听特定 IP 地址可以通过`-Dhttp.address=127.0.0.1`.

但我所做的是使用 nginx 作为反向代理来控制链接 GZIP 压缩和监听特定主机名。只需在网上搜索有关反向代理的更多详细信息。

您应该有一个自己的配置文件供您的生产使用，因为您需要关闭进化、更改数据库服务器以及您在开发过程中添加的一些其他内容。更多关于生产配置的信息可以[在文档](http://www.playframework.com/documentation/2.1.1/ProductionConfiguration)中找到。

# php - MYSQL 查询不起作用？

> ID：16134383
> 
> 赞同：-2
> 
> 时间：2013-04-21T17:57:26.723
> 
> 标签：php, html, mysql, insert

您好，我正在尝试将数据插入到一些列中，但它不起作用。有人可以帮忙吗？

我有这个

```
<form  action="member.php?id=<?php echo $data["id"];?>" method="post" style="display:inline-block; font-size:14px">

<input type="submit" value="Add" class="btn btn-primary" name="add"  />

</form> 
```

接着：

```
if(isset($_POST["add"])){
$reciver = $data["username"];
$sender = $_SESSION['name'];
$query = $pdo->prepare("INSERT INTO friend-request(reciver, sender, timestamp) VALUES (?,?,?)");
$query->bindValue(1, $reciver);
$query->bindValue(2, $sender);
$query->bindValue(3, time());
$query->execute();
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:00:34.920

`timestamp`是 MySQL 中的保留字。你必须用反引号逃脱：

```
INSERT ... ,`timestamp`) ...
            ^--       ^-- 
```

您不检查`->execute()`调用的返回值，因此您永远不会看到 mysql 试图告诉您查询失败。**永远不要**假设查询已经成功。**始终**检查错误。现在你的代码相当于把手指伸进你的耳朵然后“lalalala 听不到你的声音”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:00:40.297

我会说写这样的东西：

```
$reciver = $_POST["username"]; 
```

将数据插入数据库时​​要小心 SQL 注入。

并确保您的表单中有用户名输入字段

# python - Beautifulsoup 功能在特定情况下无法正常工作

> ID：16134384
> 
> 赞同：2
> 
> 时间：2013-04-21T17:57:40.547
> 
> 标签：python, beautifulsoup, urllib2, html5lib

我正在尝试使用 urllib2 读取以下 url：http: [//frcwest.com/](http://frcwest.com/)，然后搜索元重定向的数据。

它读取以下数据：

```
 <!--?xml version="1.0" encoding="UTF-8"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml"><head><title></title><meta content="0;url= Home.html" http-equiv="refresh"/></head><body></body></html> 
```

将其读入 Beautifulsoup 效果很好。但是由于某种原因，没有一个功能适用于这个特定的 senarious，我不明白为什么。Beautifulsoup 在所有其他情况下都对我很有效。但是，当简单地尝试时：

```
 soup.findAll('meta') 
```

不产生任何结果。

我的最终目标是运行：

```
 soup.find("meta",attrs={"http-equiv":"refresh"}) 
```

但如果：

```
 soup.findAll('meta') 
```

甚至不工作然后我被卡住了。任何煽动这个谜团的人将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:25:08.913

是注释和文档类型将解析器抛到这里，然后是 BeautifulSoup。

甚至 HTML 标签也似乎“消失”了：

```
>>> soup.find('html') is None
True 
```

然而它仍然存在于`.contents`可迭代对象中。您可以通过以下方式再次找到内容：

```
for elem in soup:
    if getattr(elem, 'name', None) == u'html':
        soup = elem
        break

soup.find_all('meta') 
```

演示：

```
>>> for elem in soup:
...     if getattr(elem, 'name', None) == u'html':
...         soup = elem
...         break
... 
>>> soup.find_all('meta')
[<meta content="0;url= Home.html" http-equiv="refresh"/>] 
```

# javascript - 限制 html5 type="number" 输入字段中的小数位数（使用 Angularjs 模型）

> ID：16134391
> 
> 赞同：15
> 
> 时间：2013-04-21T17:58:06.377
> 
> 标签：javascript, html, angularjs

请找到小提琴 [http://jsfiddle.net/q2SgJ/5/](http://jsfiddle.net/q2SgJ/5/)

```
<div ng-app="">
  <div ng-controller="Ctrl">

      WANTS:  {{val | number:2}} in "input" elelent<br>
    2 decimal in input:  <input  ng-model='val'> <br>
    2 decimal in input:  <input  type="number" step="0.01" ng-model='val'><br>
    2 decimal in input:  <input  ng-model='val' value="{{val |number:2}}"> <br>

  </div>
</div> 
```

如何在 INPUT 字段中将小数位限制为 2 位。与示例中的一样`{{val | number:2}}`，但不确定如何使用它来格式化附加到字段的 ng-model。我本可以格式化数据/模型本身，但我有几个值我想保留额外的小数，但只显示 2 个小数。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T01:02:57.793

您可以编写指令来控制此功能。它不是 angular 附带的东西，但指令可以控制页面上的外观和工作方式。

我写了一个简单的：http: [//jsfiddle.net/q2SgJ/8/](http://jsfiddle.net/q2SgJ/8/)

这是可以解决问题的链接函数：

```
 link:function(scope,ele,attrs){
        ele.bind('keypress',function(e){
            var newVal=$(this).val()+(e.charCode!==0?String.fromCharCode(e.charCode):'');
            if($(this).val().search(/(.*)\.[0-9][0-9]/)===0 && newVal.length>$(this).val().length){
                e.preventDefault();
            }
        });
    } 
```

这适用于将输入限制为 2 位小数，但不会将输入格式化为 2 位小数。无论如何，这是一个起点。我相信您可以查找其他示例并编写自己的指令来按照您想要的方式处理它。关于 Angular 的问题在于，它不是一个对所有问题都有答案的框架，而是一个允许您创建比 HTML5 单独提供的功能更多的功能并使其非常简单的框架。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-08T14:27:50.407

您可以在没有 JQuery 和指令的情况下执行此操作。您最初的 step 尝试非常接近。我发现[这个网站](http://gsferreira.com/archive/2015/02/angularjs-input-number-with-two-decimal-places/)展示了如何使用 HTML5 输入来限制使用 step 和 AngularJS 正则表达式输入过滤器。

```
<div ng-app="app">
    <div ng-controller="Ctrl"> @*Just an empty controller in this example*@
        <form name="myForm">
            <input type="number" name="myDecimal" placeholder="Decimal" ng-model="myDecimal" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" step="0.01" /><br />
            Is a valid decimal?<span ng-show="!myForm.myDecimal.$valid">{{myForm.myDecimal.$valid}}</span>
        </form>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-07T15:08:37.317

在确定要限制的小数位数时，我扩展了已接受的答案以查看 step 属性。

```
directive('forcePrecision', function () {
    return {
        restrict: 'A',
        scope: {
           step: '@'
        },
        link: function (scope, element, attrs) {
            if (!scope.step || scope.step == 'any') {
               return;
            }

            var prec = 1;
            for (var i = scope.step; i != 1; i *= 10) {
                prec *= 10;
            }

            element.on('keypress', function (e) {
                var val = Number(element.val() + (e.charCode !== 0  ? String.fromCharCode(e.charCode) : ''));

                if (val) {
                    var newVal = Math.floor(val * prec) / prec;

                    if (val != newVal) {
                        e.preventDefault();
                    }
                }
            });
        }
    };
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-12T20:48:12.397

我已经扩展了蒂姆的小提琴，以防有人正在寻找可行的解决方案

[http://jsfiddle.net/q2SgJ/653/](http://jsfiddle.net/q2SgJ/653/)

修改了按键事件以根据光标位置检索原始键入的值

```
ele.bind('keypress',function(e){
        var value = $(this).val();
                    var decimalPointPosition = value.indexOf(".");
                    if(!((e.charCode === 46) || (e.charCode > 47 && e.charCode <= 57)))
                        e.preventDefault();

                    else if (decimalPointPosition >= 0) {
                        var decimalCount = value.substring(decimalPointPosition + 1).length;
                        if ((decimalCount == 2 && $(this).prop("selectionStart") > decimalPointPosition)) {
                            e.preventDefault();                     
            }
           }       

        } 
```

# go - 没有方案的网址抛出错误

> ID：16134392
> 
> 赞同：1
> 
> 时间：2013-04-21T17:58:07.937
> 
> 标签：go

我写了一个代理，问题是网站上的某些链接没有方案，例如谷歌：

```
<a class="ab_dropdownlnk" href="//www.google.com/support/websearch/?source=g&amp;hl=en"> 
```

我通过 Client.Do() 获取 url
如何在 Go 中解析此类 url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:43:55.513

如果没有方案，则使用合理的默认值。例如，

```
package main

import (
    "fmt"
    "io/ioutil"
    "log"
    "net/http"
    "net/url"
)

func main() {
    href := "//www.google.com/support/websearch/?source=g&amp;hl=en"
    url, err := url.Parse(href)
    if err != nil {
        log.Fatal(err)
    }
    if url.Scheme == "" {
        url.Scheme = "http"
    }
    req, err := http.NewRequest("GET", url.String(), nil)
    if err != nil {
        log.Fatal(err)
    }
    client := http.Client{}
    res, err := client.Do(req)
    if err != nil {
        log.Fatal(err)
    }
    websearch, err := ioutil.ReadAll(res.Body)
    res.Body.Close()
    if err != nil {
        log.Fatal(err)
    }
    fmt.Printf("%s\n", websearch)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T22:45:23.560

缺少的方案允许浏览器选择协议，并且对于同时提供 http 和 https 的站点很方便。然后浏览器根据他如何到达页面来选择使用哪个协议。您可以使用 https 或 http 作为默认值，也可以像浏览器一样使用并选择用于获取页面的协议。

例如，像这样：

```
for _, parsedLink := range parsedLinks {
    parsedLink.Scheme = requestUrl.Scheme
} 
```

# c# - 构建 .NET 项目的问题

> ID：16134395
> 
> 赞同：0
> 
> 时间：2013-04-21T17:58:10.527
> 
> 标签：c#, .net, entity-framework, msbuild, entity-framework-migrations

我在构建 .NET 项目时遇到了非常奇怪的问题。我正在使用最新的 Visual Studio 2012。

当我尝试构建整个解决方案时，它会显示“构建成功”。我有几个正在解决的项目，问题出在其中一个上。它构建成功。但是逻辑没有更新（比如一些 .NET 程序集缓存）......我也无法调试它。

该项目包含实体框架代码优先上下文和实体、迁移。

我试过了：

*   检查解决方案配置（我选中了相应的复选框）
*   构建/清理/重建
*   Visual Studio 重新启动，以管理员权限重新启动

我错过了什么？伙计们，请帮忙。这让我感到沮丧，让我生气:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:03:08.073

有时清洁并不能完全清洁一切。发生这种情况时，我会根据您的解决方案的配置手动删除`bin/Debug`or的所有内容。`bin/Release`如果您打算扩展干净的目标，[这](http://sedodream.com/PermaLink,guid,670b78b1-4968-46b1-905b-3ae903f3d9cb.aspx)是最好的来源之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T18:08:57.033

尝试删除项目之间的任何引用，然后重建任何库项目并再次添加引用。

你说逻辑没有更新，可能是它......

# facebook - 如何从 facebookmail 向我的应用用户发送电子邮件？

> ID：16134405
> 
> 赞同：0
> 
> 时间：2013-04-21T17:59:12.200
> 
> 标签：facebook, email

我想从 Facebookmail 向我的应用程序用户发送一封电子邮件，我收到了来自另一个应用程序的此类电子邮件，我想为我的应用程序用户做同样的事情。
我收到的电子邮件来自这个发件人“apps+kr4m4XXXXX5x@facebookappmail.com”

有人可以告诉它怎么做吗？（我知道我可以直接向他们发送电子邮件，但我希望直接从 facebookmail 发送他们..？） * 另一点要提到的是单击电子邮件上的“取消订阅”链接 - 这是链接：

[http://www.facebook.com/n/?editaccount.php¬ifications&block=376XXXXXX2389556&t=1366XXXXX53&l=b&mid=7ddd6d3G5af3eff255b6G0G27&bcode=1.136XXXXX853.AbkyMvZyA7-3FDDD&n_m=my_email@url.com](http://www.facebook.com/n/?editaccount.php&notifications&block=376XXXXXX2389556&t=1366XXXXX53&l=b&mid=7ddd6d3G5af3eff255b6G0G27&bcode=1.136XXXXX853.AbkyMvZyA7-3FDDD&n_m=my_email@url.com)

因此我很确定它可以完成....任何人？？？

**（我添加的 XXXXX 是为了不识别发件人）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:27:41.580

您可以使用将被弃用的 REST API。不幸的是，无法通过 GRAPH API 通过 Facebook 发送电子邮件。 [https://developers.facebook.com/docs/reference/rest/notifications.sendEmail/](https://developers.facebook.com/docs/reference/rest/notifications.sendEmail/)

上面的链接坏了

看起来像这样

```
https://api.facebook.com/method/notifications.sendEmail?recipients=USER_ID&subject=YOUR_SUBJECT&text=YOUR_EMAIL_BODY&callback=YOUR_CALLBACK_URL&access_token=YOUR_ACCESS_TOKEN_HERE 
```

# matlab - Matlab：'矩阵尺寸必须一致'小于运算符（<）？

> ID：16134407
> 
> 赞同：-1
> 
> 时间：2013-04-21T17:59:29.923
> 
> 标签：matlab

一个快速的问题，因为我担心可能已经有了答案（尽管我找不到）

我收到错误消息：矩阵尺寸必须一致。

因为我正在使用'<'

现在对于所有其他运营商来说，有一种方法可以解决这个问题，或者输入“。” 在前面或使用不同的公式。那么人们对小于运算符做了什么？？？？我不明白为什么大于或等于 (>=) 有效但小于无效！？

我是不是很愚蠢，错过了一些非常明显的东西？

代码片段 矩阵 1 代表 16 个数字的数组 矩阵 2 可以代表 10 到 20 个数字之间的任意位置

idx = (matrix2 >= matrix1 * 0.1 & matrix2 < matrix1 * 1.5);

任何有关该主题的帮助指导或建议将不胜感激！谢谢你！

编辑我知道矩阵的大小不同，但是有没有办法在不同大小的数组中使用更少？因为我不关心数组的大小，而是关心其中的数字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:40:28.727

如果您想比较矩阵的某些部分，例如`M(1:3,10:12)>A(5:7,1:3)`，您可能必须使用函数`squeeze()`：

```
squeeze(M(1:3,10:12))>squeeze(A(5:7,1:3)) 
```

此功能可远程控制单件尺寸，之后一切正常。

# mysql - 使用 nodejs 在 mysql 上使用 mapreduce

> ID：16134412
> 
> 赞同：1
> 
> 时间：2013-04-21T18:00:19.497
> 
> 标签：mysql, node.js, mapreduce

如何在不先将所有数据从 MySQL 加载到 node.js的情况下使用`mapreduce`for ？`node.js`

我正在使用这个： http: [//www.mapjs.org/](http://www.mapjs.org/)

# iphone - 延迟加载 iPhone 图片

> ID：16134414
> 
> 赞同：1
> 
> 时间：2013-04-21T18:00:30.227
> 
> 标签：iphone, objective-c, uitableview, uiscrollview, lazy-loading

**如果我想像google+**或**facebook**应用程序（甚至可能是 9gag）那样进行延迟加载，我应该使用`UITableView`或`UIScrollView`吗？

目标是加载全新的单元格或`scrollview`页面集（不仅仅是像 apple 这样的缩略图`lazyloading` `tableview`）。如果您有 facebook 应用程序，请尝试快速向下滚动，您会明白我的意思。

任何示例也会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:47:34.880

使用 Grand Central Dispatch，您可以做到这一点。

以下链接可能有用。

[http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:39:50.703

你可以试试这个：`https://github.com/nicklockwood/AsyncImageView`。这是异步加载图像的最佳示例。该库还可用于独立于 UIImageView 加载和缓存图像，因为它提供对底层加载和缓存类的直接访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T18:11:15.407

为此，您应该更喜欢表格视图。使用 tableview ，您可以使用可重复使用的 customcell。tableview 可用于横向模式下的自动布局，如果应用程序是通用的，则 tableview 更有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T19:06:29.453

看看[SDWebImage](https://github.com/rs/SDWebImage)，真的好用，支持缓存和异步加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T18:31:30.417

我会使用 uicollection 视图。这是一个使用 uitableview 的示例，但您可以对其进行一些修改以使用集合视图。

[http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

如果您想使用第三方库，我建议您查看[**AFNetworking它是使用率最高的库之一，并且具有扩展 UIImageView**](https://github.com/AFNetworking/AFNetworking) [**LINK**](https://github.com/AFNetworking/AFNetworking#image-request)的非常易于使用的功能[](https://github.com/AFNetworking/AFNetworking#image-request)

 **同样作为仅供参考，滚动视图是表格视图的一部分。**

# java - 下载后过期的临时 URL

> ID：16134418
> 
> 赞同：0
> 
> 时间：2013-04-21T18:00:41.167
> 
> 标签：java, php, download

我想为我正在开发的 Java 游戏创建一个启动器，该启动器需要用户登录才能下载游戏本身。我的想法是让启动器将凭据发送到我的网络服务器，如果凭据正确，网络服务器将输出临时文件的位置。但是，鉴于以下情况，这将有点棘手/效率低下：

1.  每次有人更新时，服务器都需要复制游戏文件，并且
2.  网络服务器不知道文件何时完成下载。

也许启动器可以向单独的脚本发送请求以删除给定临时名称的文件？这样做的问题是启动器很容易被反编译和修改为不发送请求，从而破坏了创建新文件的目的。

关于这个想法及其问题的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:07:58.207

我会使用一个数据库，如下所示：

urlgenerator.php

```
 <?php

 // generate code
 $code = uniqid();

 // save code to database
 db_save($code);

 // write link
 echo '<a href="download.php?code=' . $code . '">Download</a>'; 
```

下载.php

```
<?php

// get code from url
$single_use_code = $_GET['code'];

// check if the code is in the db
if(db_get_code($single_use_code)) {
   // remove code from database as it is single use only
   db_remove($single_use_code);
   // start download
   start_download();
} else {
   // the code is not valid
   die('BAD code');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:09:16.207

尝试这样的事情：

```
// Define a random key
$key = 'kgjiowtjiohgjiut09ig90im09yig90mi903i490ti209tgwgt';  
$secondsValid = 300;

if($_GET['action'] == 'download')
{
  $time = $_GET['time'];
  if(time() - $time > $secondsValid)
    die('Code has expired, please try again');
  if($_GET['validation'] != md5($time.$key))
    die('Invalid validation code');
  DownloadFile();
  die;
}
elseif(CredentialsAreCorrect())
{
  $time = time();
  header('Location: '.$_SERVER['REQUEST_URI'].'?action=download&time='.$time.'&validation='.md5($time.$key));
  die;
}
else
  die('Invalid credentials'); 
```

这是一种简单的方法，可以为经过验证的用户提供定时炸弹 URL（在这种情况下有效 5 分钟），无需任何讨厌的复制/符号链接/涉及任何内容，无需数据库，只需使用基本设施，只要密钥是安全的，就不会被黑客入侵. 只要确保你的密钥有足够的熵（40+ 随机按键应该做到这一点），所以没有彩虹表或暴力攻击是可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T18:05:27.023

简单的解决方法：在 unix 系统上，您可以在文件正在使用时删除它，而不会影响该文件上当前打开的文件句柄。所以

1.  用户请求下载
2.  脚本在 documentroot 中的某个位置创建一个符号链接，该链接指向文件实际存储的位置（文档根目录之外的某个位置）
3.  符号链接的 URL 作为参数发送给用户。
4.  用户点击下载链接，例如`http://example.com?get=path/of/symlink`
5.  下载脚本 fopen() 是符号链接并开始输出文件的内容
6.  脚本在 fopen()'d 后删除符号**链接**

现在符号链接消失了，不能再重复使用了，但是下载脚本仍然会向用户发送数据，因为它在删除之前打开了符号链接/文件。

# c# - 检查数组中一行中的数据的最简单且可能最有效的方法

> ID：16134421
> 
> 赞同：2
> 
> 时间：2013-04-21T18:00:49.827
> 
> 标签：c#

我正在用 C# 制作 Connect 4 控制台游戏。除了功能之外，我已经设置了所有应用程序并正常工作`hasGameBeenWon()`。该函数在 Main do...while 循环中调用，并在游戏尚未获胜时返回 false。

```
 static bool gameHasEnded(int currentTurn)
    {
        int currentTurnPiece;

        if (currentTurn.Equals(1))
        {
            currentTurnPiece = BLUE;
        }
        else if (currentTurn.Equals(2))
        {
            currentTurnPiece = RED;
        }

        return false;
    } 
```

（显然，这段代码是不完整的）

...是它当前的样子，`currentTurn`var 是当前玩家回合的 int 值（可以是 1 或 2）。BLUE 和 RED 是分配了值 1 和 2 的常量，当应用程序打印到控制台时，它们在板上转换为蓝色和红色。

现在我被困在如何检查游戏是否有效且尽可能简单。该板存储在一个名为 的数组中`board`，我需要检查是否有一组 4 个相同的值向上/向下、向左/向右以及在所有方向上对角线。向上/向下和向左/向右检查并不难，但我认为每次检查对角线可能有点慢。

无论如何，我是否可以加快检查整个电路板或可能完全跳过检查整个电路板并可能只搜索相关区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:34:31.960

我将假设这只是一些带有and`board`的二维值数组，并且您想要“连接”（在您的示例中是）。`enum Cell {NONE, BLUE, RED}``width``height``N``N``4`

一个简单的向量类：

```
class Vec
{
    public int i;
    public int j;
    public Vec(int i, int j) { this.i = i; this.j = j; }
} 
```

描述胜利的模式/模板类型：

```
var winTemplates = new List<List<Vec>>
{
    Enumerable.Range(0, N).Select(x => new Vec(x, 0)).ToList(),
    Enumerable.Range(0, N).Select(x => new Vec(0, x)).ToList(),
    Enumerable.Range(0, N).Select(x => new Vec(x, x)).ToList(),
    Enumerable.Range(0, N).Select(x => new Vec(N - x - 1, x)).ToList()
}; 
```

是否有一个`(Cell, List<Vec>)`元组描述了 position 的胜利`p`？

```
Func<Vec, Tuple<Cell, List<Vec>>> getWin = p => winTemplates
    .SelectMany(winTemplate => winTemplate
        .Select(q => new Vec(p.i + q.i, p.j + q.j))
        .GroupBy(v => board[v.i, v.j])
        .Where(g => g.Key != Cell.NONE && g.Count() == N)
        .Select(g => Tuple.Create(g.Key, g.ToList())))
    .FirstOrDefault(); 
```

棋盘上的任何地方都赢了吗？

```
Func<Tuple<Cell, List<Vec>>> findWin = () => Enumerable.Range(0, height - N)
    .SelectMany(i => Enumerable.Range(0, width - N).Select(j => new Vec(i, j)))
    .Select(p => getWin(p))
    .FirstOrDefault(); 
```

这只是浏览器代码，因此可能有拼写错误。如果您需要更多帮助来理解它，请在评论中告诉我。

# r - 从 ggplot2 中的 geom_smooth 中删除线

> ID：16134425
> 
> 赞同：8
> 
> 时间：2013-04-21T18:01:22.383
> 
> 标签：r, ggplot2

我试图从 geom_smooth 中删除回归线，只保留置信区间。我尝试过`size = 0`,`size = NULL`和`size = NA`, 但没有任何效果。有没有人知道的简单解决方法？

```
baseball <- ddply(x, .(id), transform, bat.avg = h/ab)
hank <- subset(baseball, id == 'aaronha01')
ggplot(hank, aes(x = year, y = bat.avg)) +
  geom_line(size = 1.2, color = '#336699') +
  geom_smooth(fill = '#bf3030', size = NA) +
  labs(x = '', y = '') 
```

![汉克亚伦的击球率](https://i.stack.imgur.com/lDhWN.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-21T18:05:16.100

您可以`linetype=0`在里面`geom_smooth()`设置删除线。

```
ggplot(mtcars,aes(wt,mpg))+geom_smooth(linetype=0) 
```

![在此处输入图像描述](https://i.stack.imgur.com/FmbgI.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-08T16:05:17.793

设置`size=0`也会删除该行。显然`size= NA`也是如此。

```
ggplot(mtcars,aes(wt,mpg))+geom_smooth(size=0) 
```

# android - 子元素上的 RelativeLayout 背景渲染

> ID：16134427
> 
> 赞同：1
> 
> 时间：2013-04-21T18:01:29.477
> 
> 标签：android, android-layout

我有这个（简化的）布局。-

```
<RelativeLayout xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background_pattern" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="@dimen/dimen5"
        android:layout_marginTop="@dimen/dimen15"
        android:background="@drawable/background_grey" >

        <ImageView
            android:id="@+id/logo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:contentDescription="@string/app_logo"
            android:src="@drawable/app_logo" />

    </RelativeLayout>

</RelativeLayout> 
```

哪个在 Eclipse 布局编辑器中表现良好：我的`app_logo`图像 over `background_grey`，它在`background_pattern`图像上。但是当我在设备上运行时，会按预期`background_grey`渲染，但也会渲染它的 child 。`background_pattern``app_logo`

**嵌套多个具有背景属性的布局时，我做错了什么还是这是某种错误？**

作为一种解决方法，我想我可以替换 的背景属性`ImageViews`，但我很确定这可能有效，而且我遗漏了一些明显的东西。

**使用最新的ADT**
*并在 Nexus 4 上部署，4.2.2*
*`background_grey`是一个 9 补丁映像*

# malloc - 如何在C中的malloc内存中写入数据

> ID：16134431
> 
> 赞同：0
> 
> 时间：2013-04-21T18:02:13.107
> 
> 标签：malloc, strcpy

假设我有

```
void * space= malloc(500) //alloc a block of memory 
```

我需要写两个字符串和一个int：“Hello world”，“Goodbye friend”，5在内存地址50,150,380，对应空间。我尝试了这种方法：

```
int * insert = (int *)(space +380);
*insert = 5;

char * insert2 = (char *)(space+50);
*insert2 = "Hello world";

char * insert3 = (char *)(space + 150);
strcpy(insert3,"Goodbye friend"); 
```

int 没有问题，但是这两个字符串会抛出错误信息。那么正确的方法是什么？此外，您如何检查这些输入之间是否存在内存重叠（输入的字符串可以任意长？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:17:45.203

首先，使用 strcpy 我可以编译你的代码。

```
void * space= malloc(500); //alloc a block of memory
int * insert = (int *)(space +380);
*insert = 5;

char * insert2 = (char *)(space+50);
strcpy(insert2 , "Hello world");

char * insert3 = (char *)(space + 150);
strcpy(insert3,"Goodbye friend"); 
```

我会使用 strlen 来获取字符串的长度，然后是 sizeof(char)。要获得分配多少：

```
malloc(sizeof(int)+sizeof(char)*(1+strlen(string1))); // 1+ since you need to count the \0\. 
```

[http://www.cplusplus.com/reference/cstring/strlen/](http://www.cplusplus.com/reference/cstring/strlen/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:31:51.613

看着[这个](https://stackoverflow.com/questions/2172943/size-of-character-a-in-c-c#2172948)，我很确定您试图将**int**`"H"`类型的（在 C 中是一个常量）存储到 insert2 中。换句话说，您试图将类型（在我的编译器上）存储到 char（）中。从那里开始，由您的编译器决定是否允许这种行为或引发错误。Plus是一个不可变的字符串，仅位于 ROM 中，因此无论如何您都不能直接修改该字符串。**`int``sizeof("H") == 2``sizeof(char) == 1``"Hello world"`**

 **为了演示，我跑了：

```
printf("val:%d\n", "H");
printf("val:%d\n", "He");
printf("val:%d\n", "He");\\note 2nd instance the same
printf("val:%d\n", "Hel");
printf("val:%d\n", "Hell");
printf("val:%d\n", "Hello");
printf("val:%d\n", "Hello ");
printf("val:%d\n", "Hello W");
printf("val:%d\n", "Hello Wo");
printf("val:%d\n", "Hello Wor");
printf("val:%d\n", "Hello Worl");
printf("val:%d\n", "Hello World"); 
```

产量：

```
val:4196404
val:4196406
val:4196406\\note 2nd instance the same
val:4196409
val:4196413
val:4196418
val:4196424
val:4196431
val:4196439
val:4196448
val:4196458
val:4196469 
```

正如@Rasmus 所说：

```
char * insert2 = (char *)(space+50);
strcpy(insert2 , "Hello world\0");// the '\0' if changing strings 
```

应该解决问题。

但是，除了模糊/难以辨认，更不用说浪费内存（除非你把它全部计算出来）之外，我没有看到太多实际用途，所以我建议只使用`struct`：

```
struct blockOfMem{
    int num;
    char* str1;
    char* str2;
};
....
struct blockOfMem space;
space.num = 5;
strcpy(space.str1, "Hello world\0");// the '\0' if changing strings
strcpy(space.str2, "Goodbye friend\0");// the '\0' if changing strings 
```

这使您的代码更具可读性和实用性。**

# php - 如何清理 MySQL 的字符串

> ID：16134432
> 
> 赞同：2
> 
> 时间：2013-04-21T18:02:30.360
> 
> 标签：php, mysql, pdo

到目前为止，我一直在使用 mysql_real_escape_string，但它似乎不适用于 GoDaddy Hostings。我应该如何清理数据库的字符串？我找到了一个 PDO::quote 但手册说

“如果您使用此函数构建 SQL 语句，强烈建议您使用 PDO::prepare() 来准备带有绑定参数的 SQL 语句，而不是使用 PDO::quote() 将用户输入插入到 SQL 语句中。准备好的带有绑定参数的语句不仅更便携、更方便、不受 SQL 注入的影响，而且执行起来通常比插值查询快得多，因为服务器端和客户端都可以缓存查询的编译形式。”

这是否意味着 prepare + bind_params 正在做同样的事情？对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:48:04.737

不幸的是，PHP 手册经常不清楚、错误或具有欺骗性。

带有绑定参数的预处理语句是

*   更便携（不正确）
*   更方便（这是唯一正确的说法），
*   免疫 SQL 注入（`quote()`也使事物免疫），
*   通常执行速度*要快得多*（只是谎言）

因此，您可以使用任何一种方式，但准备好的语句让您拥有更短的代码：

```
$id   = $pdo->quote($id);
$name = $pdo->quote($name);
$stm  = $pdo->query("SELECT * FROM t WHERE id=$id AND name=$name"); 
```

对比

```
$stm  = $pdo->query("SELECT * FROM t WHERE id=? AND name=?");
$stm->execute(array($id,$name)); 
```

虽然这不是唯一的原因：请参阅我对[为什么应该使用准备好的语句所做的一些解释](https://stackoverflow.com/a/15952010/285587)

# javascript - 将值从一个 html 页面传递到 PHONEGAP 中的另一个 html 页面？

> ID：16134434
> 
> 赞同：1
> 
> 时间：2013-04-21T18:02:30.857
> 
> 标签：javascript, android, html, cordova, parameter-passing

我在网上找到的答案以及我已经实现的答案如下..

```
window.location.href=href='2ndpage.html?var id=results.rows.item(1).id'; 
```

*results.rows.item(1).id-**这是我从数据库中获取的值——它将是数据库中元素的 id 值。**

为了获得价值，我实现了这段代码..

```
 function onDeviceReady() 
    {var db =  window.sqlitePlugin.openDatabase("Database", "1.0", "Database",1000000); 
     console.log("processing onDeviceReady");
     db.transaction(getParameter,queryDB,errorCB);  
    }           

    function getParameter(paramName) 
    {   console.log("processsinggg parameter loop ");
    var searchString = window.location.search.substring(1),
        i, val, params = searchString.split("&");

         for (i=0;i<params.length;i++) {
                val = params[i].split("=");
            if (val[0] == paramName) {
            return unescape(val[1]);
        }
    console.log("valueeesss: "+val[1]);

  }return null;
} 
```

**它一直处理到这个循环并停止......认为我没有调用其他函数......我调用了queryDB（）；**

当它在代码中处理 queryDB

```
function queryDB(tx) 
{       tx.executeSql('SELECT * FROM table_name', [], querySuccess, errorCB);
        console.log("processing queryDB");
} 
```

它说因为 tx 没有定义..

我尝试打印输出...o/p 是..

```
results.rows.item(1).id 
```

我发现很难实现它......**可能也是因为我的错误......但是......**

我尝试的另一种方法是**FORM 方法**

```
<form name="2ndpart"  method="post">
id: <input type="hidden" name="id">
<input type="submit" value="results.rows.item(0).id">
</form> 
```

在第二页，我给了

```
function getUrlVars() {
var vars = {};
var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m,key,value) {
    vars[key] = value;
});
return vars; 
```

}

它没有进入第二页它自己..因为它说不是一个功能。

哪种方法正确且最容易实施？

# postgresql - Windows 上的 postgresql 中的分号转义

> ID：16134435
> 
> 赞同：3
> 
> 时间：2013-04-21T18:02:37.140
> 
> 标签：postgresql

我有一个`sql`脚本在`create_database_function.sql`文件中定义一个函数：

```
CREATE OR REPLACE FUNCTION increment_display_count(in_host_id int, in_host_owner_id int, in_date_ date) RETURNS void as $$
BEGIN
    UPDATE display_count set display_count = display_count + 1 
    WHERE host_id = in_host_id AND host_owner_id = in_host_owner_id AND date_ = in_date_;
    IF FOUND THEN
        RETURN;
    END IF;
    BEGIN
        INSERT INTO display_count (host_id, host_owner_id, date_, display_count) VALUES (in_host_id, in_host_owner_id, in_date_, 1);
    EXCEPTION WHEN OTHERS THEN
        UPDATE display_count set display_count = display_count + 1
                WHERE host_id = in_host_id AND host_owner_id = in_host_owner_id AND date_ = in_date_;
    END;
    RETURN;
END;
$$
LANGUAGE plpgsql; 
```

我想在**Windows**上执行。为此，我运行一个常用命令：

```
psql -h localhost -U postgres -d database -f create_database_function.sql 
```

但是这个脚本给了我大量的语法错误。一个小时的谷歌搜索没有结果。但我继续修改这个脚本，最终发现了问题。

解决方案是在所有分号`;`符号前加上反斜杠`\`。

虽然这解决了问题，但它引入了另一个问题。我和另一个人一起做这个项目。但他在 Linux 上工作。在他的情况下，脚本应该`\`在分号之前没有。

那么，为什么我需要在 Windows 上`;`添加前缀呢？`\`这可以以某种方式避免或以其他方式完成吗？

我用谷歌搜索了很多，没有发现任何类似的问题。

* * *

### 更新

我使用`\;`而不是时的输出`;`：

```
C:\Xubuntu_shared\pixel\pixel\src\main\scripts>psql -h localhost -U postgres -d
pixel_test -f create_database_function.sql
Password:
CREATE FUNCTION 
```

当我在没有反斜杠转义的情况下执行脚本时出现错误的输出：

```
C:\Xubuntu_shared\pixel\pixel\src\main\scripts>psql -h localhost -U postgres -d
pixel_test -f create_database_function.sql
Password:
psql:create_database_function.sql:4: ERROR:  unterminated dollar-quoted string a
t or near "$$
BEGIN
    UPDATE display_count set display_count = display_count + 1
    WHERE host_id = in_host_id AND host_owner_id = in_host_owner_id AND date_ =
in_date_;" at character 121
psql:create_database_function.sql:6: ERROR:  syntax error at or near "IF" at cha
racter 5
psql:create_database_function.sql:7: ERROR:  syntax error at or near "IF" at cha
racter 9
psql:create_database_function.sql:9: ERROR:  syntax error at or near "INSERT" at
 character 19
psql:create_database_function.sql:12: ERROR:  syntax error at or near "EXCEPTION
" at character 5
psql:create_database_function.sql:13: WARNING:  there is no transaction in progr
ess
COMMIT
psql:create_database_function.sql:14: ERROR:  syntax error at or near "RETURN" a
t character 5
psql:create_database_function.sql:15: WARNING:  there is no transaction in progr
ess
COMMIT
psql:create_database_function.sql:17: ERROR:  unterminated dollar-quoted string
at or near "$$
LANGUAGE plpgsql;" at character 1 
```

其他可能重要的信息：

`create_database_function.sql`编码是`UTF-8`，没有`BOM`。行尾是 Windows 格式。

* * *

### 更新 2

版本

```
pixel=> SELECT version();
                           version
-------------------------------------------------------------
 PostgreSQL 9.2.3, compiled by Visual C++ build 1600, 32-bit
(1 row)

pixel=> 
```

* * *

### 更新 3

命令的输出`output of select name, setting, source from pg_settings where source <> 'default';`：

```
Oleg@OLEG-PC /C/Xubuntu_shared/pixel/pixel/src/main/scripts (pixel-dev2)
$ psql -U postgres
Password:
Welcome to psql.exe 7.4.6, the PostgreSQL interactive terminal.

Type:  \copyright for distribution terms
       \h for help with SQL commands
       \? for help on internal slash commands
       \g or terminate with semicolon to execute query
       \q to quit

Warning: Console codepage (866) differs from windows codepage (1251)
         8-bit characters will not work correctly. See PostgreSQL
         documentation "Installation on Windows" for details.

postgres=# select name,setting,source from pg_settings where source <> 'default'
;
            name            |                       setting
   |        source
----------------------------+---------------------------------------------------
---+----------------------
 config_file                | C:/Program Files/PostgreSQL/9.2/data/postgresql.co
nf | override
 data_directory             | C:/Program Files/PostgreSQL/9.2/data
   | override
 DateStyle                  | ISO, MDY
   | configuration file
 default_text_search_config | pg_catalog.english
   | configuration file
 hba_file                   | C:/Program Files/PostgreSQL/9.2/data/pg_hba.conf
   | override
 ident_file                 | C:/Program Files/PostgreSQL/9.2/data/pg_ident.conf
   | override
 lc_collate                 | C
   | override
 lc_ctype                   | C
   | override
 lc_messages                | C
   | configuration file
 lc_monetary                | C
   | configuration file
 lc_numeric                 | C
   | configuration file
 lc_time                    | C
   | configuration file
 listen_addresses           | *
   | configuration file
 log_destination            | stderr
   | configuration file
 log_line_prefix            | %t
   | configuration file
 log_timezone               | Europe/Moscow
   | configuration file
 logging_collector          | on
   | configuration file
 max_connections            | 100
   | configuration file
 max_stack_depth            | 2048
   | environment variable
 port                       | 5432
   | configuration file
 server_encoding            | UTF8
   | override
 shared_buffers             | 4096
   | configuration file
 TimeZone                   | Europe/Moscow
   | configuration file
 transaction_deferrable     | off
   | override
 transaction_isolation      | read committed
   | override
 transaction_read_only      | off
   | override
 wal_buffers                | 128
   | override
(27 rows) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:28:56.033

对于那些可能遇到这个罕见问题的人。

它与 Postgres 服务器和客户端版本不匹配有关。我正在使用版本的服务器和版本的`9.2.3`客户端`7.4.6`。

重要的是要提到 Windows 的 Postgres 安装程序已经包含`psql`客户端。所以没有必要再安装一个。

我不记得为什么我安装了一个单独的客户端，但我猜是因为`psql`没有从控制台启动。我认为它可以通过在安装 PosrgreSQL 后重新启动 Windows 来解决（因为这种操作系统解决了很多问题）或手动添加`psql.exe`到环境路径变量的路径。

因此，如果您遇到同样的问题，请检查服务器和客户端的版本。如果它们不匹配，请将路径环境变量设置为原始 PosgreSQL 交付的正确客户端。

# xcode - XCode 完成在手机上运行应用程序

> ID：16134436
> 
> 赞同：0
> 
> 时间：2013-04-21T18:02:40.137
> 
> 标签：xcode

我无法在我的 iPhone 上调试任何应用程序。XCode 编译应用程序，将其部署到 iPhone，说它正在运行应用程序，然后我立即看到消息“在 iDevice 上运行 x.app 完成”。虽然应用程序崩溃，但它会被复制到手机中。在这次崩溃之后，我可以毫无问题地在手机上启动应用程序，但似乎无法在手机上调试任何项目。没有旧项目，没有新项目，一切似乎都被打破了。

有很多建议可以解决这个问题，但没有一个对我有帮助。

我在 Mac OSX 10.8.2 上使用 XCode 4.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T08:28:27.707

当我更改项目名称和应用程序名称时遇到了同样的问题。我已经多次重置模拟器'ios模拟器'->'重置......'。试试看，也尝试删除设备和模拟器中的旧应用程序，执行“产品”->“清洁”，然后重试。

这听起来很傻，但当我遇到同样的问题时它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T08:57:08.353

1.  尝试将 XCode 中应用程序目标中“部署目标”中的版本号更改为其他内容。

2.  它在您的模拟器中运行吗？

3.  尝试在其他设备上运行（其他设备版本，如 4S 或 4）

4.  是 iPad 还是 iPhone 的问题，还是两者都有？

# php - PHP cURL 问题：HTTP 代码 0

> ID：16134437
> 
> 赞同：2
> 
> 时间：2013-04-21T18:02:46.247
> 
> 标签：php, curl

我正在尝试通过 cURL 和 PHP 建立一个网站/API。无论我尝试什么 URL，我都会得到一个 0 的 HTTP 代码。我尝试了几个不同的 URL。无论我尝试什么，我都会返回以下 curl_getinfo（见下文）。我已经验证在 PHP.ini 文件中启用了 cURL。

代码：

```
 // create a new cURL resource
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "http://www.yahoo.com");
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);

$report=curl_getinfo($ch);
print_r($report);

// grab URL and pass it to the browser
curl_exec($ch);

if(curl_errno($ch)) {
   echo 'Curl error: ' . curl_error($ch);
}

print curl_error($ch);

// close cURL resource, and free up system resources
curl_close($ch); 
```

cURL_getinfo：

```
 Array
(
[url] => http://www.yahoo.com
[content_type] => 
[http_code] => 0
[header_size] => 0
[request_size] => 0
[filetime] => 0
[ssl_verify_result] => 0
[redirect_count] => 0
[total_time] => 0
[namelookup_time] => 0
[connect_time] => 0
[pretransfer_time] => 0
[size_upload] => 0
[size_download] => 0
[speed_download] => 0
[speed_upload] => 0
[download_content_length] => -1
[upload_content_length] => -1
[starttransfer_time] => 0
[redirect_time] => 0
[certinfo] => Array
    (
    )

[primary_ip] => 
[primary_port] => 0
[local_ip] => 
[local_port] => 0
[redirect_url] => 
 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:12:17.423

您需要先调用`curl_exec($ch);`，`curl_getinfo($ch);`因为这是与服务器的实际连接：

标志中也不需要，`CURLOPT_POST`因为它是一个 get 调用：

```
// create a new cURL resource
$ch = curl_init();

//for post calls:
//$post = 'a=b&d=c';
//$headers[] = 'Content-type: application/x-www-form-urlencoded;charset=utf-8';
//$headers[] = 'Content-Length: ' . strlen($post);

//for get calls:
$headers = array();
$headers[] = 'Content-type: charset=utf-8'; 

$headers[] = 'Connection: Keep-Alive';

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "http://www.yahoo.com");
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
//curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);

curl_exec($ch);
$report=curl_getinfo($ch);
print_r($report);

// grab URL and pass it to the browser

if(curl_errno($ch)) {
   echo 'Curl error: ' . curl_error($ch);
}

print curl_error($ch);

// close cURL resource, and free up system resources
curl_close($ch); 
```

# ios - 一次只能识别一个手势

> ID：16134441
> 
> 赞同：2
> 
> 时间：2013-04-21T18:03:16.043
> 
> 标签：ios, cocoa-touch, gesture

我需要在我的应用程序中一次识别一个手势。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:05:02.213

尝试这个

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
return NO;
} 
```

# java - 没有经验的 java 用户请求类的建议

> ID：16134442
> 
> 赞同：1
> 
> 时间：2013-04-21T18:03:18.433
> 
> 标签：java, class

我创建了一个发送单个数据报包的类，该数据包被另一个程序成功接收。

```
import java.net.*;

public class UDPServer {
    public static void main(final String args[]) throws Exception {
        final String sendID = "level1";
        final int val = 2;
        final DatagramSocket serverSocket = new DatagramSocket(7474);
        byte[] sendData = new byte[1024];
        final InetAddress IPAddress = InetAddress.getLocalHost();
        final String sentence = sendID + new String(" ")
                + new Integer(val).toString();
        final String capitalizedSentence = sentence.toUpperCase();
        sendData = capitalizedSentence.getBytes();
        final DatagramPacket sendPacket = new DatagramPacket(sendData,
                sendData.length, IPAddress, 7470);
        serverSocket.send(sendPacket);
    }
} 
```

我的问题是如何从另一个运行此代码，传递变量 for`sendID`和`val`. 这最终会将信息从游戏发送到音频编程软件，以创建算法分数。

如果代码错误/格式错误，我深表歉意，我不是程序员！

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T18:07:05.917

Juste创建一个带有两个参数的方法Send

```
public class UDPServer {
    public void send(final String sendID, final int val) throws Exception {

            final DatagramSocket serverSocket = new DatagramSocket(7474);
            byte[] sendData = new byte[1024];
            final InetAddress IPAddress = InetAddress.getLocalHost();
            final String sentence = sendID + new String(" ")
                  + new Integer(val).toString();
            final String capitalizedSentence = sentence.toUpperCase();
            sendData = capitalizedSentence.getBytes();
            final DatagramPacket sendPacket = new DatagramPacket(sendData,
                  sendData.length, IPAddress, 7470);
            serverSocket.send(sendPacket);
     }
} 
```

现在来自另一个班级

```
UDPServer server = new UDPServer();
server.send("level1", 2); 
```

**对您的代码的评论很少：**

避免使用首字母大写的变量（即IPAddress）。通常类以大写字母开头，而不是变量。

您可以简化：

```
byte[] sendData = new byte[1024];
sendData = capitalizedSentence.getBytes(); 
```

经过

```
byte[] sendData = capitalizedSentence.getBytes(); 
```

和

```
final String sentence = sendID + new String(" ")
                  + new Integer(val).toString(); 
```

经过

```
final String sentence = String.format("%s %d", sendID, val); 
```

# wpf - 打印 WPF 网格被裁剪

> ID：16134443
> 
> 赞同：1
> 
> 时间：2013-04-21T18:03:22.280
> 
> 标签：wpf

我找到了打印 Wpf 网格内容的功能，但打印被裁剪。有人能知道为什么吗？

功能：

```
private void PrintTest()
        {
            FlowDocument document;
            Window window;
            CreateWindowToPrint(out document, out window);    
            PrintDialog printDialog = new PrintDialog();   
            window.Show();
            IDocumentPaginatorSource dps = document;
            if (printDialog.ShowDialog() == true)
            {
                printDialog.PrintDocument(dps.DocumentPaginator, "test");
            }
        } 
```

和：

```
 private void CreateWindowToPrint(out FlowDocument document, out
 Window window)
         {
             document = new FlowDocument {  };
             var test = new PrintedTest() { DataContext = this.DataContext };
             document.Blocks.Add(new BlockUIContainer { Child = test });
             window = new Window {Content = document, Visibility =       System.Windows.Visibility.Hidden };
         } 
```

UserControl PrintedTest 包含我的网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:53:34.507

我真的没有太多在 WPF 中打印的经验，但我想我会尝试一下。我可以重现您的问题，但到目前为止我无法解决。但在我的研究中，我找到了一种替代方法，它更简单地打印网格：

```
 var printDialog = new PrintDialog();
        var result = printDialog.ShowDialog();
        if (result.HasValue && result.Value)
        {
            var testControl = new PrintedTest() { DataContext = this.DataContext };
            printDialog.PrintVisual(testControl, "My WPF printing a DataGrid");
        } 
```

而不是发送 PrintTest 您实际上可以直接发送网格。

# python - 使用 exec() 和用户定义的字符串 - If 语句？

> ID：16134444
> 
> 赞同：0
> 
> 时间：2013-04-21T18:03:25.470
> 
> 标签：python, python-3.x

只是为了实验，我想看看我是否可以制作一个用户可以输入字符串的程序，然后可以将其作为 Python 代码执行。但是，我似乎无法让 if/while/for 语句正常工作。那么，有没有一种我想念的方法呢？

我的源代码：

```
prog = []

while True:
    varCommand = input(':')
    if varCommand == 'shell':
        code = ' '
        while code[len(code)-1] != 'end':
            code = [input('>>>>')]
            prog += code
        del prog[len(prog)-1]

    if varCommand == 'run':
        for i in range(len(prog)):
            exec(prog[i])

    if varCommand == 'view':
        for i in range(len(prog)):
            print('>>>>' + prog[i])

    if varCommand == 'delete':
        prog = [] 
```

例如，如果我尝试这样做：

```
for i in range(1,11): 
```

由于 EOF 指向冒号，尝试使用上述程序运行它会导致运行时错误。有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:13:13.870

问题在这里：

```
if varCommand == 'run':
    for i in range(len(prog)):
        exec(prog[i]) 
```

使用此循环会导致程序运行用户一次输入一行的内容。所以第一个`exec`只看到for循环，不知道后面有什么。`exec`需要查看输入代码的全部内容。

您想要的是执行一次输入的所有内容，每个字符串由换行符分隔。将以上内容替换为：

```
if varCommand == 'run':
    exec('\n'.join(prog)) 
```

所以我现在可以做

```
:shell
>>>>for i in range(10):
>>>>    print(i)
>>>>
>>>>end
:run
0
1
2
3
4
5
6
7
8
9 
```

# xml - 导入 Drools/Guvnor 存储库导出文件时出现异常

> ID：16134450
> 
> 赞同：0
> 
> 时间：2013-04-21T18:04:24.127
> 
> 标签：xml, xml-parsing, drools, drools-guvnor

我试图将规则和资产导入新的 drool/guvnor 安装，但出现以下错误： ![导入时出现错误/异常](https://i.stack.imgur.com/uGxvz.jpg)

我使用的是 RedHat JBoss 版本 5.3.1.BRMS，我正在以这种方式导入：管理-> 导入/导出 --> 选择文件“repository_export.zip”或 repository_export.xml）。

此错误发生在 Windos 7 Ultimate 64bits+Java 1.7.0_09u 中。

我尝试使用相同的 BRMS 并在其他机器（Win7Business 64bits+Java 1.6.0_35）中导出相同的 zip 文件，并且导入得很好。

有谁知道我该如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:19:32.930

我刚刚卸载了 PC 中的两个 jdk 之一（在本例中为 jdk 1.6），现在它工作正常。

# javascript - Javascript：无法解析 json 响应

> ID：16134453
> 
> 赞同：1
> 
> 时间：2013-04-21T18:04:30.893
> 
> 标签：javascript, jquery, json, spring

Spring 正在返回一个具有四个属性的 json 编码对象。其中之一是名为“array”的属性。我想要这个数组的内容。

这是整个 json 响应：

```
ee
{"map":null,"array":[{"id":2,"description":"Cloud For Dev","businessSize":2,"businessType":9,"businessLocation":3},{"id":3,"description":"Cloud For Prod","businessSize":2,"businessType":9,"businessLocation":3}],"string":null,"bool":false}
0 
```

我实际上不确定“ee”或 0 是什么意思......无论如何，我试图像这样解析它：

```
$.ajax({
    type: "GET",
    url: "/ajax/rest/teamService/list",
    dataType: "json",
    success: function (response) {
        var teamArray = response.array;

        var $el = $("#teamSelect");
        $el.empty(); 

        $.each(teamArray[0], function(team) {
                alert(team.description);
                $el.append($("<option></option>").attr("value", team.id).text(team.description));
        });

        // Reattach the plugin
        $("#teamSelect").selectbox("detach");
        $("#teamSelect").selectbox("attach");
    },
    error: function (jqXHR, textStatus, errorThrown) {
        if (textStatus === 'error') {
            setTimeout(function() { window.location = '/do/login'; }, 7000);
        }
    }
}); 
```

而且我弹出警报框 6 次（应该是 2 次），每次都显示“未定义”而不是实际描述。

选择框本身有四个空选项。

好像我正在迭代 json 编码对象的四个参数，而不是封闭数组的两个内容。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:07:46.513

试试这个 - `teamArray[0]`应该只是`teamArray`

```
$.each(teamArray, function(i,team) {
    alert(team.description);
    $el.append($("<option></option>").attr("value", team.id).text(team.description));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:24:44.700

现在，您正在循环 的键`teamArray[0]`，因此有六个警报。循环过去`teamArray`。此外，`$.each`的回调[需要`indexInArray, valueOfElement`](http://api.jquery.com/jQuery.each/). 也可以不通过 jQuery：

```
for(var i = 0; i < teamArray.length; i++) {
    var team = teamArray[i];
    ...
} 
```

# vim - 插入换行符而不进入插入模式，vim

> ID：16134457
> 
> 赞同：78
> 
> 时间：2013-04-21T18:04:37.940
> 
> 标签：vim, newline, key-bindings, keymapping

`Shift-Enter`我想在 vim 中使用and以正常模式插入换行符`Ctrl-Enter`。我尝试了一些来自[Vim Wikia 的解决方案和混合解决方案 - 在不进入插入模式的情况下插入换行符，](http://vim.wikia.com/wiki/Insert_newline_without_entering_insert_mode)`Shift-Enter`但没有`Ctrl-Enter`响应：

```
" put a new line before or after to this line
nnoremap <S-CR> m`o<Esc>``
nnoremap <C-CR> m`O<Esc>``

" reverse J command
nnoremap <C-J> vaW<Esc>Bi<CR><Esc>k:s/\s\+$//<CR>$ 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-21T20:57:20.147

我的替代方法是使用`oo`(resp. `OO`) 通过此映射在 (resp. over) 电流下插入一个新行： `nmap oo o<Esc>k` (resp. `nmap OO O<Esc>j`)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-04-10T10:44:38.573

拉出一个空行并移位粘贴：

从空行上的光标开始：

```
yy + (shift + p) 
```

"yy" 拉出该行，然后 "shift + p" 将其插入下面，而不进入插入模式。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-21T18:40:56.077

由于键盘输入在内部处理的方式，不幸的是，这在今天通常是不可能的。（不过，这种特殊情况应该可以在 GVIM 中使用。）某些组合键，如`Ctrl`+`non-alphabetic`无法映射，并且`Ctrl`+`letter`与`Ctrl`+ `Shift`+`letter`无法区分。（除非您的终端为它发送一个不同的*termcap*代码，而大多数人不会。）在插入或命令行模式下，尝试键入组合键。如果没有任何反应/插入，则不能使用该组合键。这也适用于`<Tab>`/ `<C-I>`, `<CR>`/ `<C-M>`/ `<Esc>`/`<C-[>`等。（唯一的例外是`<BS>`/`<C-H>`.) 这是一个已知的痛点，也是 vim_dev 和 #vim IRC 频道上各种讨论的主题。

一些人（最重要的是 Paul LeoNerd Evans）想要解决这个问题（即使是支持此功能的终端中的控制台 Vim），并提出[了各种建议](https://groups.google.com/forum/#!topic/vim_dev/Ym6D-kWIsyo)。

但是截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-02T12:52:26.173

这就是我使用的：

```
nmap <CR> :a<CR><CR>.<CR> 
```

我试过`nmap <CR> o<Esc>`了，但它在切换到插入模式并返回时使 UI 出现故障。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-25T02:20:15.097

如果您只是不想按 ESC 怎么办

```
yypd$ 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-10T04:17:01.883

我使用 :s/\n/\r\r/g （用两个换行符替换换行符，与“o”相同）。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-07-29T16:47:27.077

您可以使用 hack 来执行此操作。

在编辑模式下，您可以使用`p`粘贴当前剪贴板。由于`o`添加了换行符，您可以使用`o<ESC>ddp`在光标下方添加新行；从那里开始，`p`将添加一个新行，直到您删除其他内容。

# java - JXTitledPanel 渐变效果

> ID：16134458
> 
> 赞同：1
> 
> 时间：2013-04-21T18:04:42.397
> 
> 标签：java, swing, look-and-feel, swingx, substance

我正在使用 SwingX JXTitledPanel，我想要一个渐变效果，如 SwingX 演示中所示。

我目前的理解是由外观管理器（我使用的是 Insubstance）来决定是否应该应用任何渐变。

这个对吗？在标题背景中强制使用渐变效果的任何解决方法？

非常感谢，托马斯

# xml - XML/XSD 如何创建密钥

> ID：16134460
> 
> 赞同：1
> 
> 时间：2013-04-21T18:04:58.667
> 
> 标签：xml, xsd, key

我在定义 XML 模式中的键时遇到问题。

**代码：**

XSD：

```
 <xsd:element name="players">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="player" minOccurs="0" maxOccurs="unbounded">
                <xsd:complexType>
                    <xsd:all>
                        <xsd:element name="date-of-birth" type="xsd:date"></xsd:element>
                        <xsd:element name="gender">
                            <xsd:simpleType>
                                <xsd:restriction base="xsd:string">
                                    <xsd:enumeration value="MALE" />
                                    <xsd:enumeration value="FEMALE" />
                                </xsd:restriction>
                            </xsd:simpleType>
                        </xsd:element>
                    </xsd:all>
                    <xsd:attribute name="username" type="xsd:string" use="required" />
                </xsd:complexType>
                <xsd:key name="playerkey">
                    <xsd:selector xpath="players/player" />
                    <xsd:field xpath="username" />
                </xsd:key>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 
```

请注意，这只是完整代码的摘录，但它显示了所有必要的信息。

XML

```
<t:players>
    <t:player username="Super Mario">
        <t:gender>FEMALE</t:gender>
        <t:date-of-birth>1995-11-29</t:date-of-birth>
    </t:player>
    <t:player username="Super Mario">
        <t:date-of-birth>1991-10-12</t:date-of-birth>
        <t:gender>MALE</t:gender>
    </t:player>
</t:players> 
```

**问题：**

如您所见，我创建了两个名为“超级马里奥”的玩家。由于密钥应该是唯一的，因此应该抛出错误，但 xmllins 确实正确验证了文件

**问题：**

如何正确定义键，元素必须是唯一的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:57:57.660

1.  将键声明移动到它适用的级别，在这种情况下，我假设您希望每个 <player> 在所有 <players> 中都是唯一的
2.  您的架构中的 Xpath 表达式错误；用户名是一个属性，必须有一个`@`前缀。
3.  如果键选择的元素具有非空命名空间，则 xapth 表达式也必须使用这些命名空间进行限定。

> ```
>  <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
>     elementFormDefault="qualified" targetNamespace="xyzzy" xmlns:t="xyzzy">
>     <xsd:element name="players">
>        <xsd:complexType>
>             ...
>     </xsd:complexType>
>     <xsd:key name="playerkey">
>         <xsd:selector xpath="t:player" />
>         <xsd:field xpath="@username" />
>     </xsd:key>
>     </xsd:element>
> </xsd:schema> 
> ```

更新了命名空间限定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:53:35.077

在 XSD 中，如果您希望某个元素 R 中的每个元素 E 都具有唯一的 F 值，那么 R 的声明需要包含一个键定义，其中选择器从 R 中选择 E，并且字段从 E 中选择 F。

# sql - SQL Server Compact 批量插入问题

> ID：16134463
> 
> 赞同：0
> 
> 时间：2013-04-21T18:05:03.290
> 
> 标签：sql, csv, sql-server-ce, bulkinsert, sql-server-ce-toolbox

我有一个这样创建的表：

![在此处输入图像描述](https://i.stack.imgur.com/8v3wX.jpg)

在我的 CSV 文件中是这样的：

```
34650326,Mr,John,Doe,Some Street Some City Some Country,33445566,77889900,jdoe@yahoo.com,120.33 
```

出于某种原因，我不会从 CSV 批量导入 SQL，一直说

> 无法创建脚本，第一行的一个或多个字段名无效：列名错误：

任何人都可以看到 CSV 有什么问题吗？

# security - 签名的 Java 小程序 + JNI - JRE 7 21 安全异常

> ID：16134464
> 
> 赞同：3
> 
> 时间：2013-04-21T18:05:08.550
> 
> 标签：security, applet, java-native-interface, java

我的公司使用需要 JNI 来访问某些 PKI 功能的小程序。

这是一个非常稳定（+4 年）的解决方案，并且已经在多个客户中投入生产。

它是一个签名的（Thawte 证书）小程序，在 JRE7 21 之前它工作正常 - 现在出现了一个安全异常（我们拥有的所有 Applet JNI 解决方案都存在相同的问题）。

我检查了[Java 小程序在更新到 JRE 7u21 后停止工作，](https://stackoverflow.com/questions/16084324/java-applet-stopped-working-after-update-to-jre-7u21)并且[无法使用 Java 7u21 启动小程序](https://stackoverflow.com/questions/16083405/cannot-launch-applet-using-java-7u21)。我已经检查了[Java 7 Update 21 Security Improvements in Detail](http://blog.eisele.net/2013/04/java-7-update-21-security-improvements.html)，但它没有提到任何关于 JNI 的内容。

我已经尝试过使用 TurstedLibrary 并使用 JDK7 21 重新编译它，但它仍然会弹出安全异常。

如果你们有同样的问题，我想和你们核实一下，如果有人能够再次使用 Java + JNI（不知道是否有一些新的东西来签署 DLL 或类似的东西）..

更新：

工作 - 通过[http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/mixed_code.html#trusted_library得到它](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/mixed_code.html#trusted_library)

添加正确的受信任库清单使其停止提示错误-记住您需要使用JDK7 21。

# javascript - Jquery .getJSON 和 ASP.NET MVC

> ID：16134466
> 
> 赞同：2
> 
> 时间：2013-04-21T18:05:23.160
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc

我有这个：

```
$.getJSON("https://scyk.pl/Account/GetSid").done(function (sid) {
    settings.parameters.sid = sid;
}); 
```

和这个：

```
public JsonResult GetSid()
{
    return Json(SomeString);
} 
```

jquery 的 .done 函数没有执行 - 为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:16:00.113

使用该选项的覆盖`Json`并将其`JsonRequestBehavior`设置为`AllowGet`

```
return Json("string", JsonRequestBehavior.AllowGet); 
```

要仅允许发布请求，请将您的控制器操作更改为：

```
[HttpPost]
public JsonResult GetSid()
{
    return Json(SomeString);
} 
```

# c++ - 在 C++ 中使用 Boost 正则表达式缩小 HTML

> ID：16134469
> 
> 赞同：4
> 
> 时间：2013-04-21T18:05:29.073
> 
> 标签：c++, regex

# 问题

如何使用 C++ 缩小 HTML？

## 资源

外部库可能是答案，但我更希望改进我当前的代码。尽管我对其他可能性充满了兴趣。

## 当前代码

这是我在 c++ 中[对以下答案的解释](https://stackoverflow.com/a/5324014/570796)。

*我必须从原始帖子中更改的唯一部分是顶部的这部分：“（？ix）”*
*......以及一些逃生标志*

```
#include <boost/regex.hpp>
void minifyhtml(string* s) {
  boost::regex nowhitespace(
    "(?ix)"
    "(?>"           // Match all whitespans other than single space.
    "[^\\S ]\\s*"   // Either one [\t\r\n\f\v] and zero or more ws,
    "| \\s{2,}"     // or two or more consecutive-any-whitespace.
    ")"             // Note: The remaining regex consumes no text at all...
    "(?="           // Ensure we are not in a blacklist tag.
    "[^<]*+"        // Either zero or more non-"<" {normal*}
    "(?:"           // Begin {(special normal*)*} construct
    "<"             // or a < starting a non-blacklist tag.
    "(?!/?(?:textarea|pre|script)\\b)"
    "[^<]*+"        // more non-"<" {normal*}
    ")*+"           // Finish "unrolling-the-loop"
    "(?:"           // Begin alternation group.
    "<"             // Either a blacklist start tag.
    "(?>textarea|pre|script)\\b"
    "| \\z"         // or end of file.
    ")"             // End alternation group.
    ")"             // If we made it here, we are not in a blacklist tag.
  );

  // @todo Don't remove conditional html comments
  boost::regex nocomments("<!--(.*)-->");

  *s = boost::regex_replace(*s, nowhitespace, " ");
  *s = boost::regex_replace(*s, nocomments, "");
} 
```

只有第一个正则表达式来自原始帖子，另一个是我正在研究的东西，应该被认为远未完成。它应该希望能很好地了解我试图完成的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T05:53:34.093

Regexps are a powerful tool, but I think that using them in this case will be a bad idea. For example, regexp you provided is maintenance nightmare. By looking at this regexp you can't quickly understand what the heck it is supposed to match.

You need a html parser that would tokenize input file, or allow you to access tokens either as a stream or as an object tree. Basically read tokens, discards those tokens and attributes you don't need, then write what remains into output. Using something like this would allow you to develop solution faster than if you tried to tackle it using regexps.

I *think* you might be able to use xml parser or you could search for xml parser with html support.

In C++, libxml (which might have HTML support module), Qt 4, tinyxml, plus libstrophe uses some kind of xml parser that could work.

Please note that C++ (especially C++03) might not be the best language for this kind of program. Although I strongly dislike python, python has "Beautiful Soup" module that would work very well for this kind of problem.

Qt 4 might work because it provides decent unicode string type (and you'll need it if you're going to parse html).

# php - php mysql填充几个动态下拉列表

> ID：16134470
> 
> 赞同：0
> 
> 时间：2013-04-21T18:06:08.227
> 
> 标签：php, mysql, drop-down-menu

我正在创建 3 个基于彼此选择的下拉列表，因此第一个选择是正常的，但第二个取决于第一个选择，第三个取决于第二个选择这是表格结构

类别子类别和子子类别

# 这是代码

```
<?php

require "config.php"; //  Database details 
?>

<!doctype html public "-//w3c//dtd html 3.2//en">

<html>

<head>
<title>Demo of Three Multiple drop down list box from plus2net</title>
<meta name="GENERATOR" content="Arachnophilia 4.0">
<meta name="FORMATTER" content="Arachnophilia 4.0">
<SCRIPT language=JavaScript>
function reload(form)
{
var val=form.cat.options[form.cat.options.selectedIndex].value; 
self.location='dd3.php?cat=' + val ;
}
function reload3(form)
{
var val=form.cat.options[form.cat.options.selectedIndex].value; 
var val2=form.subcat.options[form.subcat.options.selectedIndex].value; 

self.location='dd3.php?cat=' + val + '&cat3=' + val2 ;
}

</script>
</head>

<body>
<?

$quer2=mysql_query("SELECT DISTINCT category,cat_id FROM category order by category"); 

$cat=$_GET['cat']; 
if(isset($cat) and strlen($cat) > 0){
$quer=mysql_query("SELECT DISTINCT subcategory,subcat_id FROM subcategory where cat_id=$cat order by subcategory"); 
}else{$quer=mysql_query("SELECT DISTINCT subcategory,subcat_id FROM subcategory order by subcategory"); } 

$cat3=$_GET['cat3'];
if(isset($cat3) and strlen($cat3) > 0){
$quer3=mysql_query("SELECT DISTINCT subcat2 FROM subcategory2 where subcat_id=$cat3 order by subcat2"); 
}else{$quer3=mysql_query("SELECT DISTINCT subcat2 FROM subcategory2 order by subcat2"); } 

echo "<form method=post name=f1 action='dd3ck.php'>";

echo "<select name='cat' onchange=\"reload(this.form)\"><option value=''>Select one</option>";
while($noticia2 = mysql_fetch_array($quer2)) { 
if($noticia2['cat_id']==@$cat){echo "<option selected value='$noticia2[cat_id]'>$noticia2[category]</option>"."<BR>";}
else{echo  "<option value='$noticia2[cat_id]'>$noticia2[category]</option>";}
}
echo "</select>";

echo "<select name='subcat' onchange=\"reload3(this.form)\"><option value=''>Select one</option>";
while($noticia = mysql_fetch_array($quer)) { 
if($noticia['subcat_id']==@$cat3){echo "<option selected value='$noticia[subcat_id]'>$noticia[subcategory]</option>"."<BR>";}
else{echo  "<option value='$noticia[subcat_id]'>$noticia[subcategory]</option>";}
}
echo "</select>";

echo "<select name='subcat3' ><option value=''>Select one</option>";
while($noticia = mysql_fetch_array($quer3)) { 
echo  "<option value='$noticia[subcat2]'>$noticia[subcat2]</option>";
}
echo "</select>";

echo "<input type=submit value='Submit the form data'></form>";
?>

</body>

</html> 
```

谁能帮我 ？？

# 这是我运行此代码时的输出

```
0){ $quer=mysql_query("SELECT DISTINCT subcategory,subcat_id FROM subcategory where cat_id=$cat order by subcategory"); }else{$quer=mysql_query("SELECT DISTINCT subcategory,subcat_id FROM subcategory order by subcategory"); } $cat3=$_GET['cat3']; if(isset($cat3) and strlen($cat3) > 0){ $quer3=mysql_query("SELECT DISTINCT subcat2 FROM subcategory2 where subcat_id=$cat3 order by subcat2"); }else{$quer3=mysql_query("SELECT DISTINCT subcat2 FROM subcategory2 order by subcat2"); } echo "
"; echo ""; echo ""; echo ""; echo "
"; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:12:06.113

在较低的 php 代码的开头只有一个`<?`not a ，我认为 if 语句中的 > 结束了它。`<?php`但这可能不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:12:30.480

可能是您的服务器中禁用了 PHP 短标签。因此，如果您对 PHP 使用短标签，它将无法正常工作。

检查此链接以了解如何在 PHP 中启用短标签。[http://www.tomjepson.co.uk/enabling-short-tags-in-php/](http://www.tomjepson.co.uk/enabling-short-tags-in-php/)

但是如果你不能启用短标签，那么你需要正确打开PHP标签

`<?`应该是错的`<?php`。在您的代码中更改它。完整的代码将是：

```
<?php

require "config.php"; //  Database details 
?>

<!doctype html public "-//w3c//dtd html 3.2//en">

<html>

<head>
<title>Demo of Three Multiple drop down list box from plus2net</title>
<meta name="GENERATOR" content="Arachnophilia 4.0">
<meta name="FORMATTER" content="Arachnophilia 4.0">
<SCRIPT language=JavaScript>
function reload(form)
{
var val=form.cat.options[form.cat.options.selectedIndex].value; 
self.location='dd3.php?cat=' + val ;
}
function reload3(form)
{
var val=form.cat.options[form.cat.options.selectedIndex].value; 
var val2=form.subcat.options[form.subcat.options.selectedIndex].value; 

self.location='dd3.php?cat=' + val + '&cat3=' + val2 ;
}

</script>
</head>

<body>
<?php

$quer2=mysql_query("SELECT DISTINCT category,cat_id FROM category order by category"); 

$cat=$_GET['cat']; 
if(isset($cat) and strlen($cat) > 0){
$quer=mysql_query("SELECT DISTINCT subcategory,subcat_id FROM subcategory where cat_id=$cat order by subcategory"); 
}else{$quer=mysql_query("SELECT DISTINCT subcategory,subcat_id FROM subcategory order by subcategory"); } 

$cat3=$_GET['cat3'];
if(isset($cat3) and strlen($cat3) > 0){
$quer3=mysql_query("SELECT DISTINCT subcat2 FROM subcategory2 where subcat_id=$cat3 order by subcat2"); 
}else{$quer3=mysql_query("SELECT DISTINCT subcat2 FROM subcategory2 order by subcat2"); } 

echo "<form method=post name=f1 action='dd3ck.php'>";

echo "<select name='cat' onchange=\"reload(this.form)\"><option value=''>Select one</option>";
while($noticia2 = mysql_fetch_array($quer2)) { 
if($noticia2['cat_id']==@$cat){echo "<option selected value='$noticia2[cat_id]'>$noticia2[category]</option>"."<BR>";}
else{echo  "<option value='$noticia2[cat_id]'>$noticia2[category]</option>";}
}
echo "</select>";

echo "<select name='subcat' onchange=\"reload3(this.form)\"><option value=''>Select one</option>";
while($noticia = mysql_fetch_array($quer)) { 
if($noticia['subcat_id']==@$cat3){echo "<option selected value='$noticia[subcat_id]'>$noticia[subcategory]</option>"."<BR>";}
else{echo  "<option value='$noticia[subcat_id]'>$noticia[subcategory]</option>";}
}
echo "</select>";

echo "<select name='subcat3' ><option value=''>Select one</option>";
while($noticia = mysql_fetch_array($quer3)) { 
echo  "<option value='$noticia[subcat2]'>$noticia[subcat2]</option>";
}
echo "</select>";

echo "<input type=submit value='Submit the form data'></form>";
?>

</body>

</html> 
```

# url-rewriting - 是否可以通过使用提要标题使用 Yahoo Pipes 构建 URL？（项目.标题）

> ID：16134472
> 
> 赞同：-1
> 
> 时间：2013-04-21T18:06:47.437
> 
> 标签：url-rewriting, rss, title, yahoo-pipes

使用 Yahoo Pipes，我知道有很多方法可以从字符串中获取某些内容并将其插入到提要中。我想知道是否有可能反过来。到目前为止，我一直未能成功地将某些内容（例如标题（item.title））转换为字符串。

我想要完成的是从 RSS 描述中获取单词并将它们放入 url。对于 URL 生成器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T02:00:14.840

使用 Fetch feed 模块获取原始 feed。

然后使用循环模块，并在其中放置一个字符串生成器。将字符串生成器中的源设为 item.description。如果您想将其他部分与它连接在一起，请将它们也添加到字符串构建器中。将该值分配给 item.link （或您想要的任何位置）。

如果您需要进一步处理 URL，可以在其中使用正则表达式重复循环。

# ruby-on-rails - 为什么 Omniauth-twitter 仅在我取消选中“使用 Twitter 登录”时才有效？

> ID：16134475
> 
> 赞同：1
> 
> 时间：2013-04-21T18:06:57.643
> 
> 标签：ruby-on-rails, twitter, omniauth

这篇文章是关于使用 Omniauth 实现的社交媒体登录功能的 Ruby on Rails 开发。

# 这似乎有点违反直觉，但是如果我在开发人员设置中选中“使用 twitter 登录”，为什么 Omniauth (Omniauth-Twitter) 不起作用？

我所做的是：我去 Twitter 开发人员 -> 我的应用程序（右上角） -> 我的应用程序 -> 设置 -> 取消选中“允许此应用程序用于使用 Twitter 登录”

另一方面，如果我禁用“使用 Twitter 登录”，使用 Twitter 登录功能将按预期工作：-Q！！！

由于我是新手，Stackoverflow 不允许我发布图片，这里有一个指向我的博客的链接，上面有 Wordpress 上的屏幕截图。

[http://sexyadventure.wordpress.com/2013/04/21/twitter-sign-in-problem-solved-in-a-rather-odd-n-simple-way/](http://sexyadventure.wordpress.com/2013/04/21/twitter-sign-in-problem-solved-in-a-rather-odd-n-simple-way/)

我正在试验的代码来自这里：[https](https://github.com/jamiew/omniauth-rails-app) ://github.com/jamiew/omniauth-rails-app 我所做的只是在不更改任何代码的情况下输入我自己的 Twitter api 密钥和密码。

# php - 使用带有 gmdate 或类似功能的偏移量

> ID：16134478
> 
> 赞同：0
> 
> 时间：2013-04-21T18:07:06.720
> 
> 标签：php, datetime, gmt

最近我们注意到我们的数据库使用多个时区来记录数据，或者传递数据，因此数据开始不同步。所以最近我们对数据进行了一些更改（接受某些时候数据会误导或损坏，因为它不是 100% 准确的。（至少是旧的东西））也就是说，我们已经开始做我们想做的一切可以使用 GMT 作为进/出时间 现在的问题是尝试根据预定义列表中的用户定义偏移量来使用偏移量。

所以我可以相应地查询并相应地显示给用户。假设我在太平洋时区有一个来自美国西部的用户，偏移量为 -8，就好像我在东部时区有一个用户，偏移量为 -5

目前，日期的进出是基于用户的偏好，因为所有内容都存储在数据库中的 GMT 中，所以我如何可以`-N`相应地传递给类似的东西，`gmdate()`以便我可以正确查询并正确显示？我希望这对某人有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:11:19.000

您不能只期望时区相隔固定的小时数。首先，夏令时会打破这个概念，但除此之外，还有一些时区不是小时对齐的。

看看这个帖子：

[您如何处理 PHP 中的时区差异计算？](https://stackoverflow.com/questions/4299183/how-do-you-handle-timezone-difference-calculation-in-php)

（stackexchange上有很多类似的问题。）

您可能想快速浏览一下[程序员认为关于时间](http://infiniteundo.com/post/25326999628/falsehoods-programmers-believe-about-time)的谎言，并[跟进更多关于时区的谎言](http://infiniteundo.com/post/25509354022/more-falsehoods-programmers-believe-about-time-wisdom)。

# jquery - 如何使用 jquery 获得悬停效果以处理 ajaxed 数据？

> ID：16134479
> 
> 赞同：0
> 
> 时间：2013-04-21T18:07:16.220
> 
> 标签：jquery, jquery-hover

当我查看特定网页时，我有以下 jquery 脚本可以正常工作。该网页允许我通过 ajax 更改数据。问题是当我“ajax”一些新数据时，脚本不再适用于这些新数据。为什么？

查询：

```
<script>
$(function() {
    $('body').on('hover','.hover_class',function(){
        $(this).find('.class1').css('background-color','#000000');
        $(this).find('.class2').stop().addClass('my_class',400);
    },
    function(){
        $(this).find('.class1').css('background-color','#ffffff');
        $(this).find('.class2').removeClass("my_class",100);
    }
    );
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:09:52.713

试试这个：

```
$(function () {
    $(document).on('mouseenter', '.hover_class', function () {
        $(this).find('.class1').css('background-color', '#000000');
        $(this).find('.class2').stop().addClass('my_class');
    }).on('mouseleave', '.hover_class', function () {
        $(this).find('.class1').css('background-color', '#ffffff');
        $(this).find('.class2').removeClass("my_class");
    });
}); 
```

# c++ - 类继承——堆叠方法

> ID：16134484
> 
> 赞同：0
> 
> 时间：2013-04-21T18:07:47.220
> 
> 标签：c++, class, inheritance

我见过这个一次，但我不记得如何让它再次工作。假设我有三个课程：

```
class CRoot { ... };

class CLevelOne { ... };

class CLevelTwo { ... }; 
```

现在，我有了 main 函数，我想通过使用以下语法更深入地了解：

```
int main (void)
{
  CRoot myRoot ("This is root.");
  myroot.AddLevelOne("This is level one.").AddLevelTwo("This is level two.");
} 
```

所以我的类的最终构造如下所示：

```
+- This is root.
|+- This is level one.
||+- This is level two. 
```

如何实现它以便我可以使用语法`something.Method1().Method2().MethodN(). ...;`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:17:46.740

尝试这个：

```
struct Level2
{
    // See class Level1 below
};

struct Level1
{
    std::string               m_name;
    boost::shared_ptr<Level2> p_level2;
    Level1(const std::string name)
        : name(m_name)
    { ; }

    Level2& add_level_two(const std::string& name)
    {
      p_level2 = new Level2(name);
    }
};

struct Root
{
    boost::shared_ptr<Level1> p_level1;
    Level1& add_level_one(const std::string& name)
    {
      p_level1 = new Level1(name);
    }
}; 
```

稍加思考，一个基类，可以更通用地创建它。此外，级别编号必须从方法名称中移出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:11:35.107

像这样的东西：

```
struct CLevelTwo { };

struct CLevelOne {
    CLevelTwo * AddLevelTwo() {
        return new CLevelTwo();
    }
};

struct CRoot {
    CLevelOne * AddLevelOne() {
        return new CLevelOne();
    }
};

int main(){
    CRoot *root = new CRoot();
    root->AddLevelOne()->AddLeveTwo();
} 
```

您可以用引用替换指针，但要注意内存泄漏。请注意，此代码也会泄漏，但它更易于管理，并且管理对象的生命周期应该不是一个大问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T18:09:45.430

只需`SomeMethod`返回一个参考`*this`：

```
struct Foo
{
    Foo& Add(SomeOtherThing& thing)
    {
        // Do the "add"...
        return *this;
    }
}; 
```

现在你可以这样做：

```
Foo myFoo;
myFoo.Add(...).Add(...).Add(...); 
```

这就像赋值运算符重载的工作方式一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T18:13:07.530

**编辑**在与 Thibaut 审查后，我提出以下解决方案：

```
class Node
{
private:
    std::string _name;
    std::list<Node*> _nodes;

public:
    Node(const std::string& name) : _name(name)
    {
    }; // eo ctor

    virtual ~Node()
    {
        for(std::list<Node*>::iterator it(_nodes.begin());
            it != _nodes.end();
            ++it);
            delete *it;
    }; // eo dtor

    Node* Add(const std::string& name)
    {
        Node* newNode = new Node(name);
        _nodes.Add(newNode);
        return newNode;
    }; // eo Add
}; // eo class Node 
```

# objective-c - 如何检测用户是否购买了我的应用程序？

> ID：16134488
> 
> 赞同：2
> 
> 时间：2013-04-21T18:08:22.337
> 
> 标签：objective-c

我最近向 AppStore 提交了我的应用程序（等待审核；），我希望能够检测 /var/mobile/Applications/MyApp.app/iTunesMetaData.plist 上是否有元数据文件

如果有，则该应用已被购买，如果没有，则该应用已被盗版。现在我的主要问题是：苹果会允许这样做吗？我看到一些关于越狱检测的应用程序被 App Store 拒绝的帖子。

其次，我可以用这段代码吗？

```
NSString *filePath = @"/Var/Mobile/Applications/SystemOfADown.app/iTunesMetaData.plist";
if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
// AlertView or killall this app

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:11:16.603

你应该看看[Crackify](https://github.com/itruf/crackify)。它做你想做的事。使用 Crackify，您可以检查您的应用程序是否已被破解。不过没用过，不知道是不是一直有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T18:11:53.190

你能行的。您只是在检查文件是否存在。如果应用程序被盗版，App Store 中有许多应用程序会显示警报。

# java - Slick2d | TextField 字符传递

> ID：16134489
> 
> 赞同：0
> 
> 时间：2013-04-21T18:08:30.187
> 
> 标签：java, keylistener, slick2d

## 问题：

我为我的游戏写了一些 GUI 东西（一个按钮）。但我坚持创建 TextField，因为 KeyListener 不起作用。我试图实现 KeyListener 但没有奏效。
我应该怎么办？

**链接：**

> [***游戏（完）***](https://www.dropbox.com/s/dhvf5vbqj25sgyw/game.jar)

**编码：**

```
public class TextField extends GUI implements KeyListener {
    private boolean focused = false;
    private String text = "";

    public TextField(int x, int y, int width, int height) {
        super(x, y, width, height);
    }

    public boolean isFocused() {
        return focused;
    }

    public void setFocused(boolean focused) {
        this.focused = focused;
    }

    public void append(String text) {
        this.text = this.text + text;
    }

    public void delete() {
        if (text.length() > 0) {
            text = text.substring(0, text.length() - 1);
        }
    }

    @Override
    public void render(GameContainer gc, Graphics g) {
        if (!focused) {
            g.setColor(Color.gray);
        } else {
            g.setColor(Color.orange);
        }
        g.fillRect(x - width / 2, y - height / 2, width, height);

        g.setColor(Color.darkGray);
        g.fillRect(x - width / 2 + 5, y - height / 2 + 5, width - 10, height - 10);

        g.setColor(Color.white);
        g.drawString(text, x - g.getFont().getWidth(text) / 2, y - g.getFont().getHeight(text) / 2);
    }

    @Override
    public void setInput(Input input) {
    }

    @Override
    public boolean isAcceptingInput() {
        return false;
    }

    @Override
    public void inputEnded() {
    }

    @Override
    public void inputStarted() {
    }

    @Override
    public void keyPressed(int i, char c) {
        System.out.println("This is not working");
    }

    @Override
    public void keyReleased(int i, char c) {
    }
} 
```

**这就是我创建 TextField 的方式：**

```
ipField = new TextField(width / 2, height / 2 - 60, 200, 50);
ipField.add(new ActionHandler() {
    @Override
    public void pressed() {
        ipField.setFocused(true);
    }

    @Override
    public void hover() {
    }

    @Override
    public void notHover() {
        if (input.isMousePressed(0)) {
            ipField.setFocused(false);
        }
    }
});
guiManager.add(ipField); 
```

**我发现，我可以为此使用内置的 TextField：*

```
org.newdawn.slick.gui.TextField 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:31:35.173

参考 JavaDoc，`KeyListener`方法具有以下语法：

`void keyPressed(KeyEvent e)`
`void keyReleased(KeyEvent e)`
`void keyTyped(KeyEvent e)`

查看您的代码，您的语法是：
`public void keyPressed(int i, char c)`
`public void keyReleased(int i, char c)`

这将在编译时被标记为错误。

此外，*理想情况下*，您应该为您的事件创建一个单独的处理程序类。
`TextField`是将*生成*事件的对象，并且必须有人来听它。`addKeyListener()`您需要通过调用该方法并将处理程序类的对象作为参数传递 来指定谁将监听。

*PS：切换到Swing。改用 JTextField*

参考：[http](http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyListener.html)
://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyListener.html 教程：[http ://docs.oracle.com/javase/tutorial/uiswing/events/keylistener .html](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)
事件委托模型：[http](http://wiki.answers.com/Q/What_is_delegation_event_model_in_java)
://wiki.answers.com/Q/What_is_delegation_event_model_in_java swing 的优势：[https ://softwareengineering.stackexchange.com/questions/112482/advantage-of-using-swing-over-awt](https://softwareengineering.stackexchange.com/questions/112482/advantage-of-using-swing-over-awt)

# security - 访问控制中按功能对url的具体访问

> ID：16134494
> 
> 赞同：0
> 
> 时间：2013-04-21T18:08:55.243
> 
> 标签：security, symfony

我需要找到一种方法来按函数设置对 url 的访问。

例如，我可以这样在 security.yml 中设置“访问控制”吗：

```
access_control:
    - { path: ^/admin$, function: checkadmin() } 
```

换句话说，symfony 运行 'checkadmin()' 函数，并且该函数返回一个布尔值，所以检查访问路径。

还是存在其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:04:38.577

您必须`role`在配置访问控制规则时提供。安全包的那部分（授权）只关心将请求与所需角色匹配。

使用该具体规则，定义一个自定义角色，如下所示：

```
access_control:
    - { path: ^/admin$, role: CHECK_ADMIN } 
```

那么问题就变成了，如何动态地为用户添加角色？

答案是**安全选民**：

*   [http://kriswallsmith.net/post/15994931191/symfony2-security-voters](http://kriswallsmith.net/post/15994931191/symfony2-security-voters)（最好的解释）
*   [为用户动态添加角色](https://stackoverflow.com/questions/8879221/dynamically-adding-roles-to-a-user/8883269)
*   [http://symfony.com/doc/current/cookbook/security/voters.html](http://symfony.com/doc/current/cookbook/security/voters.html)

# python - Python multiprocessing.Process 对象的行为就像它持有对另一个进程中对象的引用。为什么？

> ID：16134496
> 
> 赞同：3
> 
> 时间：2013-04-21T18:09:08.923
> 
> 标签：python, process, multiprocessing, shared-memory

```
import multiprocessing as mp

def delay_one_second(event):
    print 'in SECONDARY process, preparing to wait for 1 second'
    event.wait(1)
    print 'in the SECONDARY process, preparing to raise the event'
    event.set()

if __name__=='__main__':
    evt = mp.Event()
    print 'preparing to wait 10 seconds in the PRIMARY process'
    mp.Process(target = delay_one_second, args=(evt,)).start()
    evt.wait(10)
    print 'PRIMARY process, waking up' 
```

这段代码（在 cmd.exe 中使用“python module.py”命令在模块内部运行良好）产生了令人惊讶的结果。

主进程显然只等待 1 秒钟就醒了。为此，这意味着辅助进程引用了主进程中的对象。

怎么会这样？我原以为必须使用 multiprocessing.Manager() 在进程之间共享对象，但这怎么可能呢？

我的意思是进程不是线程，它们不应该使用相同的内存空间。有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:18:28.643

简短的回答是共享内存不是由单独的进程管理的。它由操作系统本身管理。

如果您花一些时间浏览`multiprocessing`源代码，您可以了解它是如何工作的。您会看到一个[`Event`](http://hg.python.org/releasing/2.7.4/file/9290822f2280/Lib/multiprocessing/synchronize.py#l299)对象使用 a[`Semaphore`](http://hg.python.org/releasing/2.7.4/file/9290822f2280/Lib/multiprocessing/synchronize.py#l108)和 a [`Condition`](http://hg.python.org/releasing/2.7.4/file/9290822f2280/Lib/multiprocessing/synchronize.py#l195)，这两者都依赖于[`SemLock`](http://hg.python.org/releasing/2.7.4/file/9290822f2280/Lib/multiprocessing/synchronize.py#l72)对象提供的锁定行为。这反过来又包装了一个[`_multiprocessing.SemLock`](http://hg.python.org/releasing/2.7.4/file/9290822f2280/Modules/_multiprocessing/semaphore.c)对象，该对象在 c 中实现并依赖于[`sem_open`](http://hg.python.org/releasing/2.7.4/file/9290822f2280/Modules/_multiprocessing/semaphore.c#l195)(POSIX) 或[`CreateSemaphore`](http://hg.python.org/releasing/2.7.4/file/9290822f2280/Modules/_multiprocessing/semaphore.c#l35)(Windows)。

这些是允许访问由操作系统本身管理的共享资源的 c 函数——在本例中，称为信号量。它们可以在线程*或*进程之间共享；操作系统负责一切。发生的情况是，当一个新的信号量被创建时，它被赋予了一个*句柄*。然后，当创建需要访问该信号量的新进程时，它会获得句柄的副本。然后它将句柄传递给[`sem_open`](http://man7.org/linux/man-pages/man3/sem_open.3.html)or [`CreateSemapohre`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682438%28v=vs.85%29.aspx)，操作系统让新进程访问原始信号量。

所以内存*是*共享的，但它是作为操作系统对同步原语的内置支持的一部分而共享的。换句话说，在这种情况下，您不需要打开一个新进程来管理共享内存；操作系统接管该任务。但这只是可能的，因为`Event`不需要比信号量更复杂的东西来工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T18:31:13.640

文档说*多处理*模块遵循线程 API。我的猜测是它使用了类似于“fork”的机制。如果您分叉一个线程，您的操作系统将创建当前进程的副本。这意味着它复制了堆和堆栈，包括所有变量和全局变量，这就是您所看到的。

~~如果您将下面的函数传递给新进程，您可以自己查看它。~~

```
def print_globals():
    print globals() 
```

# node.js - 如何从 next() 停止 Express.js 路由？

> ID：16134499
> 
> 赞同：5
> 
> 时间：2013-04-21T18:09:14.330
> 
> 标签：node.js, express, mongoose

我有一个奇怪的情况...

我有一个 Express.js、Node.js 和 Mongoose 网络应用程序。

其中一条路由有一个调用 response.send(...) 的 mongoose 回调。但是，由于回调之后没有其他内容，我怀疑它会自动转到 next() 路由。

前任：

```
//getItem 
app.get('/api/ItemOne', isUserValid, routes.getItem); 
//getAnotherItem
app.get('/api/getAnotherItem', isUserValid, routes.getAnotherItem);

//Routes
exports.getItem = function (req, res) {
  //console.log ('In getItem'); 
   getItem .findOne({ some_id : some_id}, function(err, getItem ){
      //console.log ('In getItem callback');
      res.send({
         itemName : getItem .itemName,
         itemValue : getItem .itemValue;
      });
   })
});

exports.getAnotherItem = function (req, res) { 
   //console.log ('In getAnotherItem');
   getAnotherItem.findOne({ some_id : some_id}, function(err, getAnotherItemRet){
      //console.log ('In getAnotherItem Callback');
      res.send({
         itemName : getAnotherItemRet.itemName,
         itemValue : getAnotherItemRet.itemValue;
      });
   })
}); 
```

我在控制台上收到以下消息序列...

```
In getItem
In getAnotherItem
In getItem callback
In getAnotherItem callback 
```

我假设因为路线没有完成，它会自动调用 next() 。

Q：如何防止第二条路由被自动调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:22:30.727

尝试反转`req`和`res`：

```
// wrong
exports.getItem = function (res, req) {
// right
exports.getItem = function (req, res) { 
```

（和同样的`getAnotherItem`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T21:52:06.520

为了了解您为何按此顺序收到消息，我们需要知道您调用哪个 url 来生成该消息。

但无论如何，“/api/getItem”不调用“/api/getAnotherItem”有两个原因：

1.  如果你在“/api/getItem”中调用next，它将调用下一个匹配的路由，在这种情况下，它将匹配“/api”、“/”上的路由或什么都不匹配。next() 函数基本上调用路由的“父级”。
2.  Next() 必须显式调用，如果您不返回答案，express 将无限期地等待直到 res.send 被调用（这是它处理异步函数的方式）。

您可能有某种中间件（IE 与 app.use 一起使用而不是 app.get）可以调用类似的东西，但最有可能的是，您以某种方式同时调用两个 url。

# c# - 处理选择不存在的记录以避免空异常错误的更花哨的方法

> ID：16134504
> 
> 赞同：0
> 
> 时间：2013-04-21T18:09:35.027
> 
> 标签：c#, mysql

这让我很烦恼，为什么当我想选择一条不存在的记录时，这`??`两个都不起作用。`== null`例如，如果我这样做

```
var foo = db.Where(k => k.ID == 9) ?? bar; 
```

它工作正常，但是`Object reference not set to an instance of an object`当我想要`select`单个字段时它会崩溃（错误）：

```
var foo = db.Where(k => k.ID == 9).Select(k => k.Field).FirstOrDefault() ?? bar;
//or
var foo = bar;
if (db.Where(k => k.ID == 9) != null)
    foo = db.Where(k => k.ID == 9).Select(k => k.Field).FirstOrDefault() 
```

在这两种情况下，它都会崩溃，这似乎很合乎逻辑。

通常我不介意做

```
if (Order.A_Data.Where(k => k.FieldID == 9).Count() > 0)
    writeText(cb, Order.A_Data.Where(k => k.FieldID == 9).
        Select(k => k.Content).
        FirstOrDefault().ToString(), 
    left_margin, top_margin - 24, f_cn, 10);
    //this looks more like the actual code, but in fact it has multiple 'where' conditions and more tables connected with an external key, that's why I don't want to write the same thing over and over again
    //or creating new variables 
```

但遗憾的是，我必须重新创建真正复杂的 PDF 文档，其中包含数百个字段*，例如从数十个表中获取数据，因此每一种“棘手的方式”都会非常有帮助。此外，它非常缓慢。

*或者，也许有一个 keep-your-null-exception-errors-for-yourself-and-just-return-an-empty-string 开关？*

* * *

* *278 更具体。所以我要么找到简单的方法来做到这一点，要么再准备一桶咖啡，叹气，做我的工作*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:35:45.207

问题似乎在这里

```
if (Order.A_Data.Where(k => k.FieldID == 9).Count() > 0)
    writeText(cb, Order.A_Data.Where(k => k.FieldID == 9).
        Select(k => k.Content).
        FirstOrDefault().ToString(), 
    left_margin, top_margin - 24, f_cn, 10); 
```

你选择where `ID=9`，只取`Content`然后`FirstOrDefault`。到目前为止一切顺利，如果有匹配项，您将获得订单。但如果没有匹配，`FirstOrDefault`将返回 null，因此`ToString`将引发异常。尝试这个：

```
var order = Order.A_Data.SingleOrDefault(k => k.FieldID == 9); // Get the order
if(order != null){ // and check if we have a match
    writeText(cb, order.Content.ToString(), // write the Content of the match
    left_margin, top_margin - 24, f_cn, 10);
}else{
    // handle however you want when there are no orders matching
} 
```

请注意，我使用`SingleOrDefault`的是`FirstOrDefault`. 这是因为我假设您只有一个`FieldID`等于 9 的订单。如果您可以有更多，请`FirstOrDefault`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:24:29.843

作为对您的编辑的响应，数据库`nvarchar`通常映射到`String`一个引用类型。

但是当数据库`nvarchar`是.NET 时`null`，它会返回`DBNull.Value`到 .NET 客户端而不是`null`. （一定是所有 .NET 中最令人困惑的事情。）

尝试：

```
var foo = bar;
var row = db.FirstOrDefault(k => k.ID == 9);
if (row != null && row.Field != DBNull.Value)
    foo = row.Field; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T18:14:27.480

你不能只使用：

```
var foo = db.Where(k => k.ID == 9).FirstOrDefault().Field; 
```

`null`如果没有找到行，它应该返回一个带有属性的默认对象。

**编辑**现在我明白了。你想要这样的东西：

```
var foo = db.Where(k => k.ID == 9).DefaultIfEmpty(bar).First().Field; 
```

# jquery - 如何在一页中使用来自不同来源的多个脚本？

> ID：16134507
> 
> 赞同：0
> 
> 时间：2013-04-21T18:09:47.013
> 
> 标签：jquery

晚上好，

我遇到了关于脚本的问题，我无法让两个脚本同时工作，在我的页面上我有 2 个脚本，每个脚本都引用了不同的 jquery 文件，问题是当我运行页面时其中一个将起作用，如果我重新排列脚本的位置（一个在另一个之上），第二个将运行。

如果有人可以帮助我解决这个问题，我将不胜感激......

这是我的脚本：

```
<link rel="stylesheet" type="text/css" href="jquery_imgzoom/css/imgzoom.css" />
<link rel="stylesheet" type="text/css" href="orbit/orbit.css" />

<script src="orbit/jquery.min.js" type="text/javascript"></script>
<script src="orbit/jquery.orbit.min.js" type="text/javascript"></script>
<script type="text/javascript" >
 $(window).load(function() {
     $('#featured').orbit();
 });
</script>

<script type="text/javascript" src="jquery_imgzoom/scripts/jquery.min.js"></script> 
<script type="text/javascript" src="jquery_imgzoom/scripts/jquery.imgzoom.pack.js"></script>
<script type="text/javascript">
 $(document).ready(function () {
$('img.thumbnail').imgZoom(); 
```

});

和标记：

```
<div id="featured"> 
          <img src="orbit/img1.jpg" alt="..." />
          <img src="orbit/img2.jpg"  alt="..." />
 </div>

         <a href="jquery_imgzoom/scripts/pic1_thum.jpg"><img class="thumbnail" src="jquery_imgzoom/scripts/pic1.jpg" alt="Picture1r" /></a>
        <a href="jquery_imgzoom/scripts/pic2_thumb.jpg"><img class="thumbnail" src="jquery_imgzoom/scripts/pic2.jpg" alt="Picture2" /></a> 
```

我试图将 SRC 嵌入到一个脚本中并将这两个函数移动到该脚本标记，但似乎没有什么好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:12:25.013

您不需要多次导入 jquery，只需导入一次，然后再导入任何其他脚本

```
<script src="orbit/jquery.min.js" type="text/javascript"></script>
<script src="orbit/jquery.orbit.min.js" type="text/javascript"></script>
<script type="text/javascript" >
 $(window).load(function() {
     $('#featured').orbit();
 });
</script>

<script type="text/javascript" src="jquery_imgzoom/scripts/jquery.imgzoom.pack.js"></script> 
```

# batch-file - 递归将文件移动到根文件夹

> ID：16134508
> 
> 赞同：3
> 
> 时间：2013-04-21T18:09:47.043
> 
> 标签：batch-file, cmd, file-management

我更习惯于使用 unix shell 而不是 CMD，我不确定如何让它工作。我有一个目录，其中包含其他几个包含 .xml 文件的子目录。我想将所有文件递归移动到根目录。我知道用 unix 这样做是这样的：

```
find FOLDERPATH -type f -name '*.xml' -exec mv -i {} FOLDERPATH \; 
```

然而，我似乎找不到能以同样方式工作的东西。XCOPY 看起来很有希望，但它不只复制文件夹，它复制整个结构，因此我得到了这些我不想要的子目录。有没有人有任何其他建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T03:39:55.390

这将在 CMD 提示符下工作。在要将文件移动到的文件夹中运行它，它将处理该文件夹中的子目录。

它没有提供优雅地处理文件名冲突的机制。

```
for /R /D %f in (*) do move "%f\*.xml" . 
```

这将在批处理文件中工作。

```
@echo off
for /R /D %%f in (*) do move "%%f\*.xml" . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:39:30.367

尝试这个：

```
set FOLDERPATH=...
for /R "%FOLDERPATH%" %%f in (*.xml) do move "%%~ff" "%FOLDERPATH%" 
```

# java - 我应该在 Java 中使用不同的方法名还是重载参数？

> ID：16134511
> 
> 赞同：-1
> 
> 时间：2013-04-21T18:10:03.437
> 
> 标签：java

我想出了两种不同的方法来在我的类中实现一些方法：

```
class Zoo {

    public void addTiger(Tiger tiger);
    public void addEmu(Emu emu);
    // ...
}

class Zoo {

    public void add(Tiger tiger);
    public void add(Emu emu);
} 
```

我可以看到，两者之间的唯一区别是冗长——但我是否遗漏了一些更基本的东西？一种方法会使将来的事情变得更加困难吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:11:46.363

添加老虎和添加鸸鹋有什么区别？为什么不做一个 Animal 接口呢？

我会做类似的事情：

```
class Tiger implements Animal { }

class Emu implements Animal { }

class Zoo {
    void add(Animal animal) { }
}

Zoo zoo = new Zoo();
zoo.add(new Tiger());
zoo.add(new Emu()); 
```

但是你的两种方法不会有太大的区别，它们都是对或错的，因为违反了[SOLID](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)原则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:19:22.150

如果将来您决定通过使 Emu 和 Tiger 实现相同的接口或扩展相同的类来合并 Emu 和 Tiger，并因此合并这两个方法，使用

```
class Zoo {

    public void add(Tiger tiger);
    public void add(Emu emu);
} 
```

将减轻您的工作，因为您不需要在使用您的方法的地方进行任何更改。
所以是的，第一种方法可能会使将来的事情变得更加困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T18:28:45.080

基于您正在使用的上下文。

在这种情况下，老虎和鸸鹋都是动物。我更喜欢使用重载方法，这很有意义。而且，如果 Tiger 和 Emu 都继承自 Animal 类。你可以声明一个动物数组：

```
Animal[] zoo; 
```

这个动物园里有老虎和鸸鹋。你可以这样做 ：

```
for (int i = 0; i < zoo.length; i++) {
    BigZoo.add(zoo[i]);
} 
```

在 OOP 中，我们说这是多态性。

但是，如果那些东西是两个不同的意思。例如，A 服务器有两件事要添加：`User`和`Data`. 这说得通 ：

```
addUser(User user);
addData(Data data); 
```

而不是：

```
add(User user);
add(Data data); 
```

希望这对你有帮助:)

# c - 我的数组被相同的值覆盖？

> ID：16134523
> 
> 赞同：1
> 
> 时间：2013-04-21T18:11:46.563
> 
> 标签：c, arrays, string

所以我有一个不断被新值覆盖的数组。例如，这是输出：

```
instruc[0] = PRINTNUM
instruc[1] = PRINTNUM
instruc[2] = PRINTNUM 
```

其中 PRINTNUM 应该是数组中的最后一个元素，而前两个元素应该是其他元素。

这是我针对特定部分的代码：

```
 //array of instructions
char** instruc = malloc(numLines * 200); 

c = fgets(inputString, 200, in_file);

while (c != NULL){
    instruc[i]=inputString;     
    i++;
    c = fgets(inputString, 200, in_file);
}

//print out what's in the array
i=0;
for (i=0; i<numLines; i++){
    printf("instruc[%d] = %s\n", i, instruc[i]);
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:17:08.657

您将数组中的每个索引都指向相同的内存地址。我认为你最好使用 strcpy

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:41:23.147

没有分配内存来存储从文件中读取的行。是的，分配了内存但`instruc`属于类型`char **`，并且程序正在使用此内存，就好像`instruc`属于`char *`类型一样。

如果您希望将指向文件中所有记录的指针存储在文件内存中，则不仅必须分配内存以将数据存储在文件中，而且还需要内存来存储指向每个记录开头的指针。

在此代码中，文件记录的长度固定为 200 字节。一个变量指向的指针数组`char **`并不是绝对必要的——只需将 200 个字节添加到 char * 指针，指向从文件读取的数据的开始，就可以确定下一条记录的开始。

要存储指向每条记录开头的指针，需要像这样：

```
char **fileRecPtrs = malloc(sizeof(char *) * numLines);
char *instruc = malloc(200 * numLines); 
```

然后在循环中读取文件的每条记录——：

```
c = fgets(instruc, 200, in_file);     
while (c != NULL) {
    fileRecPtrs[i] = instruc;
    instruc += 200;
    i++;
    c = fgets(instruc, 200, in_file);
} 
```

# ruby-on-rails - 你如何显示上传文件的加载时间

> ID：16134528
> 
> 赞同：2
> 
> 时间：2013-04-21T18:12:17.023
> 
> 标签：ruby-on-rails, ruby

我想知道是否可以显示，仅使用`form_tag`. 这样的事情可能吗？你怎么做？

```
<%= form_tag({ :action => :upload }, multipart: true) do %>
<%= file_field_tag :doc %>
<%= submit_tag "upload" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:56:57.697

是的，这是可能的，但严格来说没有任何跨浏览器的方式来处理它。

HTTP 1.0 或 1.1 在处理 POST 请求时没有任何中间响应状态和进度报告。

这个问题可能会归结为文件上传速度测量任务。

没有任何插件的最简单方法是 HTML5 FileAPI，但[它远非](http://caniuse.com/fileapi)跨浏览器状态。

[本主题](https://stackoverflow.com/questions/5861156/ajax-php-upload-file-with-uploading-percentage)可以为您提供有关进一步解决方法所需的所有信息。

# php - 回声不显示但显示在数据库中

> ID：16134538
> 
> 赞同：0
> 
> 时间：2013-04-21T18:13:22.960
> 
> 标签：php, database, variables, echo

我目前正在做一个电子商务网站。

当您上传新产品时，它会全部添加到数据库并显示在主页上（标题、价格、描述、条件等）

我最近也在我的数据库中添加了“股票”，并在主页上回显 $stock，但它没有出现。（您可以在数据库中看到库存数量）但它没有在主页上显示库存。

```
 while(list($id, $name, $price, $category, $description, $condition, $stock) = mysql_fetch_array($result)) {   

 echo '<div class="imaging">';
  echo "<img src='../images/"."$id".".jpg' class='imaging'/>" ;
  echo '</div>';

   echo '<div class="box">';

    echo '<div class="title">';
    echo("Title: " . "$name");
    echo '</div>';

    echo '<div class="stock">';
    echo("s: " . "$stock");
    echo '</div>';

    echo '<div class="detail">';
    echo("Detail: " ."$description");
    echo'</div>'; 
```

^^ 只是代码的一个示例，（除了库存，所有内容都显示）

我的 sql 查询是 SELECT * FROM ... 所以它应该已经被选中了。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:21:38.907

div的等显示吗？所以你确定你已经更新了服务器上的代码。

无论如何，您的代码并没有太大帮助，如果您也可以显示完整的 SQL，那就太好了！

list() 没有抱怨也很奇怪..

您应该确保 db 中 stock 的值不为空。

# android - 未定义 SimpleCursorAdapter 类型的 swapCursor(Cursor)

> ID：16134541
> 
> 赞同：0
> 
> 时间：2013-04-21T18:13:41.083
> 
> 标签：android, android-listview, cursor, simplecursoradapter, android-cursoradapter

创建 CursorLoader 时，我收到“swapCursor(Cursor) 未定义”错误。我已经导入了 android.support.v4（app.LoaderManager、app.LoaderManager.Loader、Content.CursorLoader、content.Loader）。不知道我能做些什么来纠正这个问题。请指教。

装载机：

```
 import android.support.v4.app.Fragment;
 import android.support.v4.app.FragmentActivity;
 import android.support.v4.app.LoaderManager;
 import android.support.v4.content.CursorLoader;
 import android.support.v4.content.Loader;
 import android.support.v4.app.ListFragment;
 import android.support.v4.widget.CursorAdapter;

 public class LoginList extends FragmentActivity implements OnClickListener,      AdapterView.OnItemClickListener, LoaderManager.LoaderCallbacks<Cursor> {

private ListView loginList;
private Button webLogin;
private SimpleCursorAdapter adapter;

@Override 
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.login_listview);

loginList = (ListView)findViewById(R.id.loginlist);
loginList.setOnItemClickListener(this);

webLogin = (Button)findViewById(R.id.button3);
webLogin.setOnClickListener(this);

//Specify fileds to display in the list
String[] from = new String[] { ListProvider.COLUMN_NAME_SITE };

//Bind fields to listview
int[] to = new int[] {R.id.loginlist};

// Create CursorAdapter and set it to display
adapter = new SimpleCursorAdapter(this, R.layout.login_listview, null, from, to);

loginList.setAdapter(adapter);

getSupportLoaderManager().initLoader(0, null, this);
}

/*@Override
public void onViewCreated(View view, Bundle savedInstanceState) {

super.onViewCreated(view, savedInstanceState);
setEmptyText(getResources().getString(string.app_name));
rwgisterForContextMenu(getListView());
setHasOptionsMenu(true);
    } */

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
// TODO Auto-generated method stub
Toast.makeText(getApplicationContext(), "Selected ID :" + arg2, Toast.LENGTH_SHORT).show();

    Intent updateDeleteLoginInfo = new Intent (this, UpdateDeleteLoginList.class);

    Cursor clickedObject = (Cursor)loginList.getItemAtPosition(arg2);

Bundle loginBundle = new Bundle();
loginBundle.putString("clickedWebSite",((LoginDetails) clickedObject).getsName());
loginBundle.putString("clickedWebAddress",((LoginDetails) clickedObject).getwUrl());
loginBundle.putString("clickedUserName",((LoginDetails) clickedObject).getuName());
loginBundle.putString("clickedPassWord",((LoginDetails) clickedObject).getpWord());
loginBundle.putString("clickedNotes",((LoginDetails) clickedObject).getlNotes());

updateDeleteLoginInfo.putExtras(loginBundle);

startActivityForResult(updateDeleteLoginInfo, 0); 
 }

 @Override
 public void onClick(View arg0) {
// TODO Auto-generated method stub
Intent webLoginIntent = new Intent (this, LoginPlusActivity.class);
startActivity(webLoginIntent);
}

@Override
public Loader<Cursor> onCreateLoader(int ignored, final Bundle args) {
return new CursorLoader(this, ListProvider.CONTENT_URI, null, null, null, null);
 }

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
adapter.swapCursor(cursor); /* swapCursor error: The method swapCursor(Cursor) is undefined for the type SimpleCursorAdapter */

 }

 @Override
 public void onLoaderReset (Loader<Cursor> loader) {
adapter.swapCursor(null); /* swapCursor error: The method swapCursor(Cursor) is undefined for the type SimpleCursorAdapter */

  }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T16:51:35.163

问题已通过导入 v4.widget.simplecursoradapter 得到解决。

```
import android.support.v4.widget.SimpleCursorAdapter; 
```

# sql-server - 解决多对多关系

> ID：16134544
> 
> 赞同：0
> 
> 时间：2013-04-21T18:14:10.553
> 
> 标签：sql-server, database, foreign-keys, entity-relationship, relationship

我有 3 个表，我试图弄清楚如何设置关系。该数据库用于跟踪调查问题和答案。一个用户可以回答很多问题，一个问题可以有很多答案，一个答案只能与一个问题相关联。许多用户可以使用一个答案。

用户：用户ID、姓名等......

答案：答案 id、AnswerText、QuestionId

问题：QuestionId、QuestionText

我正在考虑添加一个表来打破：

USER_QUESTION_ANSWER: id, AnswerId, QuestionId, Userid

Answerid、questionid 和 userid 都将是各自表的 FK。然而，这似乎是不正确的。它似乎应该只是：

QUESTION_ANSWER: id, QuestionId, Answerid

但我遇到的问题是我需要跟踪用户给出了什么答案。ANSWER 表已经跟踪了哪些问题的答案。我应该添加2个新表吗？

USER_ANSWER: id、Userid、Answerid

QUESTION_ANSWER: id, QuestionId, Answerid

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:24:21.927

我`USER_QUESTION_ANSWER`个人会坚持使用这张桌子。它不是 100% 规范化的，因为您`QuestionId`在`ANSWER`表中和表中都有 ，`USER_QUESTION_ANSWER`但这种类型的反规范化并不罕见。它使查询和报告更容易。您的 PRIMARY KEY on`USER_QUESTION_ANSWER`将在`UserId, AnswerId`列上，因为就唯一性而言，这`QuestionId`是无关紧要的。

基本上你最终会得到的是：

![在此处输入图像描述](https://i.stack.imgur.com/tfmAd.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:27:07.710

我认为你需要 4 个表：USER、QUESTION、ANSWER（Id、description）和表如何记录关系：UQA（id user、id question、id answer）

易于计数（用户有多少答案）和不同的（一个用户有很多问题，一个问题一个答案）

# java - How to make a splash screen for GUI?

> ID：16134549
> 
> 赞同：11
> 
> 时间：2013-04-21T18:14:44.173
> 
> 标签：java, swing, user-interface, awt, splash-screen

Hi there I'm new to GUIs in Java and was trying to make a splash screen or an image appear for 3 seconds. Then after that it it will go onto my main program. Does anyone have an ideas how to do this or can link me to any tutorials?

So far I have done this but not sure where to go from here.

```
public static void main(String[] args)
{
    splashInit();           // initialize splash overlay drawing parameters
    appInit();              // simulate what an application would do 
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T18:49:39.130

Simplest one , is to create `JFrame` and add your `screen` on it then use `Thread.Sleep(long millies)`

Try this code:

```
JWindow window = new JWindow();
window.getContentPane().add(
    new JLabel("", new ImageIcon(new URL("http://docs.oracle.com/javase/tutorial/uiswing/examples/misc/SplashDemoProject/src/misc/images/splash.gif")), SwingConstants.CENTER));
window.setBounds(500, 150, 300, 200);
window.setVisible(true);
try {
    Thread.sleep(5000);
} catch (InterruptedException e) {
    e.printStackTrace();
}
window.setVisible(false);
JFrame frame = new JFrame();
frame.add(new JLabel("Welcome"));
frame.setVisible(true);
frame.setSize(300,100);
window.dispose(); 
```

**Or** you can [Create a Splash Screen](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html) by using [**SplashScreen**](http://docs.oracle.com/javase/7/docs/api/java/awt/SplashScreen.html) class

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-22T13:55:11.810

See also [How to Create a Splash Screen](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html) for the AWT based splash functionality.

![splash image](https://i.stack.imgur.com/mmMAW.gif)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-08-06T16:46:26.823

This works fine for me.The functions such as getScreenSize() ,getWidth() and getHeight() can be replaced by own values.

```
public class splash extends JWindow 
{
  public splash()
  {
     JWindow j=new JWindow();

     Dimension d=Toolkit.getDefaultToolkit().getScreenSize();

     Icon img= new ImageIcon(this.getClass().getResource("2.jpg"));
     JLabel label = new JLabel(img);
     label.setSize(200,300);
     j.getContentPane().add(label);
     j.setBounds(((int)d.getWidth()-722)/2,((int)d.getHeight()-401)/2,722,401);
     j.setVisible(true);
     try
     {
        Thread.sleep(6000);
     }
    catch(InterruptedException e)
    {
        e.printStackTrace();
    }
     j.setVisible(false);

  }
  public static void main(String[] args)
  {
    splash s=new splash();
  }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-09-24T17:18:12.453

I use this code. Maybe you need to change some parts:

```
import javax.swing.*;
import java.awt.*;

public class SplashScreen {
    private final JWindow window;
    private long startTime;
    private int minimumMilliseconds;

    public SplashScreen() {
        window = new JWindow();
        var image = new ImageIcon("C:\\example.jpg");
        window.getContentPane().add(new JLabel("", image, SwingConstants.CENTER));
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        window.setBounds((int) ((screenSize.getWidth() - image.getIconWidth()) / 2),
                (int) ((screenSize.getHeight() - image.getIconHeight()) / 2),
                image.getIconWidth(), image.getIconHeight());
    }

    public void show(int minimumMilliseconds) {
        this.minimumMilliseconds = minimumMilliseconds;
        window.setVisible(true);
        startTime = System.currentTimeMillis();
    }

    public void hide() {
        long elapsedTime = System.currentTimeMillis() - startTime;
        try {
            Thread.sleep(Math.max(minimumMilliseconds - elapsedTime, 0));
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        window.setVisible(false);
    }
} 
```

And here is how to use it:

```
 var splash = new SplashScreen();
    splash.show(2000);

    // Initializing...

    splash.hide(); 
```

This will show the splash at least 2 seconds.

# java - acos没有给出角度的值吗？

> ID：16134553
> 
> 赞同：0
> 
> 时间：2013-04-21T18:14:53.560
> 
> 标签：java, android

我有一个程序，它具有余弦值。我希望使用这个值来找到它对应的角度。然而，acos 实际上并没有给我一个角度值（arcos 通常是这样工作的）。相反，我得到了这个（见下文）。为什么会出现这种情况，acos 是这样工作的吗？

```
 double r,cos,sin,angVal;
                String temp = real.getText().toString();
                double a = Double.parseDouble(temp);
                temp=imag.getText().toString();
                double b =Double.parseDouble(temp);
                r=Math.sqrt(a*a + b*b);
                cos = a/r;
                sin = b/r;
                angVal = Math.acos(cos);
                ans.setText("r = "+r+"\ncos = "+cos+"\nsin = "+sin+"\nThe angle = "+angVal+""); 
```

![](https://i.stack.imgur.com/DtrzZ.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T18:18:52.867

是的，[`Math.acos()`](http://developer.android.com/reference/java/lang/Math.html#acos%28double%29)给出了角度，但在`radians`（即在范围内`[0..pi]`）。

要将其转换为度数，请使用：

```
angVal = Math.toDegrees(Math.acos(cos)); 
```

# c# - 创建一个文件，然后创建一个 zip 并将其移动到另一个目录

> ID：16134555
> 
> 赞同：0
> 
> 时间：2013-04-21T18:15:06.353
> 
> 标签：c#, zip

我将这个简单的代码用于日志文件。

```
 private string LogFile
    {
        get
        {
            if (String.IsNullOrEmpty(this.LogFile1))
            {
                string fn = "\\log.txt";
                int count = 0;
                while (File.Exists(fn))
                {
                    fn = fn + "(" + count++ + ").txt";
                }
                this.LogFile1 = fn;
            }
            return this.LogFile1;
        }
    } 
```

如何将每个日志文件移动到另一个目录（文件夹）并使其像 .zip 一样存档？这将运行一次，我每天将有一个文件。

文件移动：

```
public static void Move()
    {
        string path = "";
        string path2 = "";
        try
        {
            if (!File.Exists(path))
            {
                using (FileStream fs = File.Create(path)) { }
            }
            if (File.Exists(path2))
                File.Delete(path2);

            File.Move(path, path2);
        }
        catch (Exception e)
        {
            Console.WriteLine("The process failed: {0}", e.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:20:40.337

对于移动文件，可以使用 File 类的静态方法[Move](http://msdn.microsoft.com/pt-br/library/system.io.file.move.aspx)。对于 zip 文件，您可以查看[GZipStream](http://msdn.microsoft.com/pt-br/library/system.io.compression.gzipstream.aspx)或[ZipArchive](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive.aspx)类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-04T13:08:12.820

如果你想要windows zipping。然后检查一下： [https ://msdn.microsoft.com/en-us/library/system.io.compression.zipfile(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.io.compression.zipfile(v=vs.110).aspx)

```
using System;
using System.IO;
using System.IO.Compression;

namespace ConsoleApplication
{
class Program
{
    static void Main(string[] args)
    {
        string startPath = @"c:\example\start";
        string zipPath = @"c:\example\result.zip";
        string extractPath = @"c:\example\extract";

        ZipFile.CreateFromDirectory(startPath, zipPath);

        ZipFile.ExtractToDirectory(zipPath, extractPath);
    }
 }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-02T21:17:17.190

```
 // for moving
 File.Move(SourceFile, DestinationFile); // store in dateTime directory  to move file. 
```

//压缩文件的方法

```
private static void CompressFile(string path)
           {
               FileStream sourceFile = File.OpenRead(path);
               FileStream destinationFile = File.Create(path + ".gz");

               byte[] buffer = new byte[sourceFile.Length];
               sourceFile.Read(buffer, 0, buffer.Length);

               using (GZipStream output = new GZipStream(destinationFile,
                   CompressionMode.Compress))
               {
                   Console.WriteLine("Compressing {0} to {1}.", sourceFile.Name,
                       destinationFile.Name, false);

                   output.Write(buffer, 0, buffer.Length);
               }

               // Close the files.
               sourceFile.Close();
               destinationFile.Close();
           } 
```

# android - 无法访问 android-Galaxy S3 中的图片文件

> ID：16134560
> 
> 赞同：0
> 
> 时间：2013-04-21T18:15:22.517
> 
> 标签：android, android-file

我想访问外部存储中公共文件夹中的图片文件。这是我的代码：

```
 if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {
          java.io.File pictureDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
          ///storage/sdcard0/Pictures
          boolean canRead = pictureDir.canRead();
          //Above gives false
          java.io.File[] picFiles = pictureDir.listFiles();
          //null is returned for the file though I've atleast three picture files at this location
      } 
```

它为我提供了指向公用文件夹的正确指针，但 canRead() 方法返回 false。当我尝试在图片目录下列出文件时，它给了我空值。

如果您需要更多详细信息，请告诉我。

**[更新]**

AndroidManifest.xml 中的权限

```
<uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" /> 
```

**[更新 2]** 这看起来像是一个特定于设备的问题，因为它在模拟器上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-29T21:22:29.640

我只是插话“设备特定”问题的另一点。我有一个中兴代客，我试图访问外部目录以进行读取，但遇到相同的问题，以下权限导致 getExternalFilesDir( ) 返回空值：

```
<uses-permission
    android:name="android.permission.READ_EXTERNAL_STORAGE"
    android:maxSdkVersion="18"
    /> 
```

上面提到的技巧（使用 WRITE_EXTERNAL_STORAGE 权限）确实导致文件被 getExternalFilesDir() 返回...奇怪..太奇怪了...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:55:31.603

您在 AndroidManifest.xml 中声明了错误的权限。您实际上正在使用外部存储。从 API 16 开始，如果您使用外部存储，则需要新的权限：

[http://developer.android.com/reference/android/Manifest.permission.html#READ_EXTERNAL_STORAGE](http://developer.android.com/reference/android/Manifest.permission.html#READ_EXTERNAL_STORAGE)

> 您可以通过在运行 Android 4.1 或更高版本时在 Android Emulator 上运行您的应用程序或在运行 Android 4.1 或更高版本的设备上的设置应用程序中的开发人员选项下启用保护 USB 存储来使用强制执行的权限测试您的应用程序。

可能在您的设备中设置了保护 USB 存储，在这种情况下您需要使用`READ_EXTERNAL_STORAGE`权限。顺便`WRITE_EXTERNAL_STORAGE`会盖`READ_EXTERNAL_STORAGE`。

# html - 带有浮动子项的中心父 div

> ID：16134562
> 
> 赞同：1
> 
> 时间：2013-04-21T18:15:36.223
> 
> 标签：html, css, grid, responsive-design, centering

我正在尝试创建一个响应式网格。我有一个包含浮动子级的“父级”div。根据页面宽度，每个“行”显示可变数量的子项。孩子们应该居中。

为了让“父” div 适合我`display:table`在父 div 上设置的孩子。

请看下面的小提琴：

[http://jsfiddle.net/dwjbosman/cXuQ6/5/](http://jsfiddle.net/dwjbosman/cXuQ6/5/)

CSS：

```
.page {
    background: #a00;
    width:700px;
    margin: 20px;
}
.Parent {
    background: #ccc;
    border: 1px solid black;
    display: table;
    margin-left: auto;
    margin-right:auto;
}
.Child {
    float: left;
    width: 150px;
    height: 50px;
    background:red;
    margin: 5px;
}
.br {
    clear: both;
} 
```

html:

```
<div class='page'>O1
<div class="Parent">
    <div class="Child">a</div>
    <div class="Child">b</div>
    <div class="Child">c</div>
    <div class="Child">d</div>
</div> 
```

示例 O1 按预期工作。但是我希望它可以与更多漂浮的孩子一起使用。

`clear: both`示例 O2：如果我在一行孩子之后手动插入 a 则有效。这当然会破坏布局的响应性。

如果我省略了“清除”，它将不再起作用，结果是示例 O3。父 div 变得太宽，孩子不再居中。

有没有办法在保持响应行为的同时获得示例 O2 行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:38:55.493

使用 CSS3，您可以每 4 次清除一次`.Child`，从 #5 开始：

```
div.Child:nth-child(4n+5){
    clear: both;
    background-color: #ddf;
} 
```

浏览器支持并不可怕：[https ://developer.mozilla.org/en-US/docs/CSS/:nth-child#Browser_compatibility](https://developer.mozilla.org/en-US/docs/CSS/:nth-child#Browser_compatibility)

我叉了你的小提琴：http: [//jsfiddle.net/ghodmode/y8g2V/](http://jsfiddle.net/ghodmode/y8g2V/)

# c - C编程switch case有什么问题？

> ID：16134563
> 
> 赞同：-5
> 
> 时间：2013-04-21T18:15:54.770
> 
> 标签：c

我必须使用 switch case 编写一个程序，该程序查找一个数字是否小于 10、等于 10、大于 10 且小于 100，并且与上述选项不同。数字由用户给出。我试过这个：

```
#include <stdio.h>
int main ()

switch ( 4*(n >= 100) + 2*(n >= 10) + (n <= 10) )
{
case 1: printf( "%d is less than 10\n", n); break;

case 3: printf( "%d is equal to 10\n", n); break;

case 2: printf( "10 < %d < 100\n", n); break;

default: printf(" %d is not in an identified range\n", n); break;
} 
```

但是当我尝试编译它时，它说：

```
ERROR IN "switch ( 4*(n >= 100) + 2*(n >= 10) + (n <= 10) ) ". 
```

错误在哪里？我需要在switch中写这个。

错误：`D:\comparison.c syntax error before "switch"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:36:00.027

如果这是您的*确切*代码，则以下错误：

*   声明之后没有左大括号`main()`。因此没有函数*体*，您的代码现在位于全局命名空间的中间。
*   也没有声明变量`n`，因此它也会导致编译错误。
*   最后， 没有返回值`main()`，这虽然不是编译错误（除非警告足够迂腐），但它是一个逻辑错误，并留下了`main()`未定义行为的返回值。

这有效：

```
#include <stdio.h>
int main( int argc, char* argv[] )
{ // <<==== note: added opening curly brace

    int n=65; // <<==== note: added declaration of n

    switch ( 4*(n >= 100) + 2*(n >= 10) + (n <= 10) )
    {
        case 1: printf( "%d is less than 10\n", n); break;
        case 3: printf( "%d is equal to 10\n", n); break;
        case 2: printf( "10 < %d < 100\n", n); break;
        default: printf(" %d is not in an identified range\n", n); break;
    }

    return 0; // <<==== note: added return value
} // <<== note: added closing curly brace 
```

我将您条件中的实际表达是否`switch`正确留给您（我不认为它们是正确的，但我不熟悉您的任务）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:21:06.353

如果这是您的全部代码，那么您缺少大括号`{`和`}`函数周围。

您还应该`return 0;`在函数末尾添加一条语句，因为您声明该函数返回一个整数。如果你不带任何参数，你应该用`void`参数声明函数。

# android - 我在上面通过哪个视图？

> ID：16134569
> 
> 赞同：0
> 
> 时间：2013-04-21T18:16:14.910
> 
> 标签：android

我在每个单元格中有一个带有 TextViews 的 TableLayout：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@android:color/darker_gray"
android:orientation="vertical"
tools:context=".SopitaActivity" >

<TableLayout
    android:id="@+id/tableLayout"
    android:layout_width="wrap_content"
    android:layout_height="0dip"
    android:layout_margin="50dip"
    android:layout_weight="0.7" >

    <TableRow>
        <TextView android:text="00" 
            android:padding="10dip"/>
        <TextView android:text="01"
            android:padding="10dip" />
        <TextView android:text="02"
            android:padding="10dip" />
    </TableRow>

    <TableRow>
        <TextView android:text="10"
            android:padding="10dip" />
        <TextView android:text="11"
            android:padding="10dip" />
        <TextView android:text="12"
            android:padding="10dip" />
    </TableRow>

    <TableRow>
        <TextView android:text="20"
            android:padding="10dip" />
        <TextView android:text="22"
            android:padding="10dip" />
        <TextView android:text="23"
            android:padding="10dip" />
    </TableRow>
</TableLayout>
</LinearLayout> 
```

而且我想通过长按（或另一个）来检测我正在通过哪个。
我试图为每个文本视图分配一个`OnTouchListener`和`OnLongClickListener`一个标签，然后检测它们何时被触摸，但不是在改变视图时检测。

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    Log.v("CCC", "i:   " + v.getTag());
}
@Override
public boolean onLongClick(View v) {
    // TODO Auto-generated method stub
    Log.v("DDD", "ii:   " + v.getTag());
    return false;
} 
```

非常感谢大家！

问题是在 LogCat 中只出现第一个 Textview 点击。
如果我做这个动作：

![在此处输入图像描述](https://i.stack.imgur.com/BssWE.png)

我想在 logcat 中看到（例如）：

```
ii: 00
ii: 10
ii: 20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:51:57.627

在每个文本视图中添加 android:onClick="myFunction"

然后创建一个名为 myFunction(...) 的函数，它将响应每次点击。

```
<TableRow>
        <TextView android:text="00" 
            android:padding="10dip"
            android:onClick="myFunction"/>
        <TextView android:text="01"
            android:padding="10dip"
            android:onClick="myFunction" />
        <TextView android:text="02"
            android:padding="10dip"
            android:onClick="myFunction" />
    </TableRow>

public void myFunction(final View view) {
    Toast.makeText(this,"clicked",2).show();
} 
```

这仅适用于 onclicks 而不是 longClicks。如果您需要 Longclicks，我认为您的 gonig 必须在运行时遍历表并找到每个文本视图并以编程方式设置 onLongClickListener。请指教。

# javascript - 带有 MIME 类型文本的 JS 页面。

> ID：16134572
> 
> 赞同：0
> 
> 时间：2013-04-21T18:16:36.880
> 
> 标签：javascript, google-chrome, mime-types

Chrome 给我以下错误

```
Resource interpreted as Script but transferred with MIME type text/plain: 
```

该文件显然是从以下代码调用的 .js 文件

文件应该具有 MIME 类型 text/plain 是否有任何理由？有什么办法可以改变吗？

如果这有什么不同，我正在我的笔记本电脑上进行本地处理？

# c++ - 使用 Dev-C++ 在 C++ 中分离编译和链接

> ID：16134576
> 
> 赞同：0
> 
> 时间：2013-04-21T18:16:56.707
> 
> 标签：c++, linker, compiler-errors, dev-c++

感谢朋友们对我之前帖子的回复。

我现在可以做课堂上的事情，但我的道路上仍然有一个绊脚石，我必须摆脱它。

我现在对头文件没有任何问题，但是实现文件。问题是这样的，如果我尝试为我的班级编译实现文件，我会收到以下错误消息：

> 在函数“主”中：
> 
> [链接器错误] c:/crossdev/src/mingw-w64-svn/mingw-w64-crt/crt/crt0_c.c:18: 未定义对“WinMain@16”的引用
> 
> C:\Users\Chuks Joe\Desktop\myC++Class\collect2.exe [错误] ld 返回 1 退出状态

如果我尝试编译主程序，我会收到以下错误消息：

> 在函数“主”中：
> 
> [链接器错误] C:/Users/Chuks Joe/Desktop/carTest.cpp:6: undefined reference to `car::car(float, std::string, std::string)'
> 
> [链接器错误] C:/Users/Chuks Joe/Desktop/carTest.cpp:8: undefined reference to `car::read_prop() const'
> 
> [链接器错误] C:/Users/Chuks Joe/Desktop/carTest.cpp:11: undefined reference to `car::change_spd(float)'
> 
> [链接器错误] C:/Users/Chuks Joe/Desktop/carTest.cpp:14: undefined reference to `car::change_clr(std::string)'
> 
> [链接器错误] C:/Users/Chuks Joe/Desktop/carTest.cpp:17: undefined reference to `car::read_prop() const'
> 
> C:\Users\Chuks Joe\Desktop\collect2.exe [错误] ld 返回 1 退出状态

即使我添加代码：

```
int main(){} 
```

到实现文件，它编译时没有任何错误消息，但是当我尝试运行主程序时，它仍然给我与上述相同的错误消息。

但是当我将主程序放入实现文件时，它编译并运行成功。

请朋友们，我应该检查哪些设置来纠正这个问题，因为我更喜欢我的类实现代码在一个单独的文件中，而主程序在另一个文件中。

正在使用的编译器是 Dev-C++

提前致谢。

# java - 在 Android 布局中显示结果

> ID：16134587
> 
> 赞同：1
> 
> 时间：2013-04-21T18:18:08.453
> 
> 标签：java, android, layout

我对此完全陌生，并试图弄清楚如何在 android 的布局中实际显示这个小功能的结果。一直在搜索和搜索，我无法弄清楚它到底需要什么。

```
package com.example.proyectoparteb;

import java.io.IOException;
import java.io.RandomAccessFile;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        readUsage();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    private float readUsage() {
        try {
            RandomAccessFile reader = new RandomAccessFile("/proc/stat", "r");
            String load = reader.readLine();

            String[] toks = load.split(" ");

            long idle1 = Long.parseLong(toks[5]);
            long cpu1 = Long.parseLong(toks[2]) + Long.parseLong(toks[3]) + Long.parseLong(toks[4])
                  + Long.parseLong(toks[6]) + Long.parseLong(toks[7]) + Long.parseLong(toks[8]);

            try {
                Thread.sleep(360);
            } catch (Exception e) {}

            reader.seek(0);
            load = reader.readLine();
            reader.close();

            toks = load.split(" ");

            long idle2 = Long.parseLong(toks[5]);
            long cpu2 = Long.parseLong(toks[2]) + Long.parseLong(toks[3]) + Long.parseLong(toks[4])
                + Long.parseLong(toks[6]) + Long.parseLong(toks[7]) + Long.parseLong(toks[8]);

            return (float)(cpu2 - cpu1) / ((cpu2 + idle2) - (cpu1 + idle1));

        } catch (IOException ex) {
            ex.printStackTrace();
        }

        return 0;
    } 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:49:52.377

好吧，这是一个模糊的问题，但这里有一个你可以做的事情的例子。

在 main_activity.xml 或您命名的任何内容中将 TextView 添加到您的布局中。

将 id 设置为@+id/myTextView。

在您的代码中，使用以下命令导入 TextView 小部件：

```
import android.widget.TextView; 
```

然后在你的方法中初始化它：

```
TextView cpu = (TextView) findViewById(R.id.myTextView); 
```

并将文本设置为：

```
cpu.setText(readUsage().toString()); 
```

你去吧。与任何语言一样，请确保您玩弄一些东西来学习它。您可以使用 Eclipse 图形编辑器添加小部件并更改文本大小和颜色等属性。

# javascript - 如何从 javascript 中的字符串数组中搜索字符串？

> ID：16134590
> 
> 赞同：0
> 
> 时间：2013-04-21T18:18:21.420
> 
> 标签：javascript, regex, search

我有一个字符串`'a'`，并且想要所有具有`'a'`字符串数组的结果。

```
var searchquery = 'a';
var list = [temple,animal,game,match, add]; 
```

我想要`result = [animal,game,match,add];`所有名称中包含的元素`'a'`。我该如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:25:17.540

```
<div id="display"></div>

var searchquery = 'a';
var list = ["temple", "animal", "game", "match", "add"];
var results = list.filter(function(item) {
    return item.indexOf(searchquery) >= 0;
});

document.getElementById("display").textContent = results.toString(); 
```

在[jsfiddle上](http://jsfiddle.net/bmywG/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T18:21:12.453

您可以[过滤](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)列表：

```
var searchquery = 'a';
var list = ['temple', 'animal', 'game', 'match', 'add'];
var results = list.filter(function(item) {
    return item.indexOf(searchquery) >= 0;
});
// results will be ['animal', 'game', 'match', 'add'] 
```

（请注意，您需要引用`list`数组中的字符串。）

# python - Python/Numpy/Scipy：用不同的 lambda 绘制泊松随机值

> ID：16134591
> 
> 赞同：6
> 
> 时间：2013-04-21T18:18:22.483
> 
> 标签：python, random, numpy, scipy, poisson

我的问题是以最有效的方式提取 N Poisson 随机值 ( `RV`)，每个值都有不同的 mean/rate `Lam`。基本上是`size(RV) == size(Lam)`.

这是一个幼稚（非常慢）的实现：

```
import numpy as NP

def multi_rate_poisson(Lam):
    rv = NP.zeros(NP.size(Lam))
    for i,lam in enumerate(Lam):
        rv[i] = NP.random.poisson(lam=lam, size=1)
    return rv 
```

那，在我的笔记本电脑上，有 1e6 个样本给出：

```
Lam = NP.random.rand(1e6) + 1
timeit multi_poisson(Lam)
1 loops, best of 3: 4.82 s per loop 
```

是否有可能从中改进？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T05:40:47.950

尽管文档字符串没有记录此功能，但[来源](http://docs.scipy.org/numpy/source/numpy/numpy/random/mtrand/mtrand.pyx#3611)表明可以将数组传递给 numpy.random.poisson 函数。

```
>>> import numpy
>>> # 1 dimension array of 1M random var's uniformly distributed between 1 and 2
>>> numpyarray = numpy.random.rand(1e6) + 1 
>>> # pass to poisson
>>> poissonarray = numpy.random.poisson(lam=numpyarray)
>>> poissonarray
array([4, 2, 3, ..., 1, 0, 0]) 
```

[泊松随机变量](http://en.wikipedia.org/wiki/Poisson_distribution)返回 1的离散倍数，并在 lambda 超过 1 时近似为钟形曲线。

```
>>> import matplotlib.pyplot
>>> count, bins, ignored = matplotlib.pyplot.hist(
            numpy.random.poisson(
                    lam=numpy.random.rand(1e6) + 10), 
                    14, normed=True)
>>> matplotlib.pyplot.show() 
```

这种将数组传递给泊松生成器的方法似乎非常有效。

```
>>> timeit.Timer("numpy.random.poisson(lam=numpy.random.rand(1e6) + 1)",
                 'import numpy').repeat(3,1)
[0.13525915145874023, 0.12136101722717285, 0.12127304077148438] 
```

# mysql - 在子查询中使用查询结果返回意外结果

> ID：16134592
> 
> 赞同：1
> 
> 时间：2013-04-21T18:18:22.757
> 
> 标签：mysql, subquery

表包含（pid、玩家、排名、月份、季节）

我正在尝试创建一个查询，显示每个玩家，他们玩了哪些月份，他们当月的排名以及当月有多少玩家玩。

这是我正在尝试的

```
SELECT name as Name
     , month as Month
     , rank as Rank
     , (select count(*) from results where month='month') as TotalPlayers 
FROM `results` 
WHERE season=CurrentSeason 
  and name="Player" 
```

我的子查询正在返回第 0 个月的结果。我如何才能得到正确的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:03:14.957

您的子查询返回第 0 个月的结果，因为`month`它是一个整数，但`'month'`它是一个字符串。MySQL 尝试将字符串转换为整数。因为没有前导数字，所以整数为 0。

相反，您想使用别名来区分 table 的两个引用`results`。这样，您可以说两者是相等的。

```
SELECT name as Name,
       month as Month,
       rank as Rank,
       (select count(*) from results r2 where r.month=r2.month) as TotalPlayers 
FROM `results` r
WHERE season=CurrentSeason 
  and name="Player" 
```

子查询的这种结构称为“相关子查询”，因为内部子查询引用外部查询中的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:31:33.417

只是猜测，但也许这就是你想要的：

```
SELECT name as Name
     , month as Month
     , rank as Rank
     , TotalPlayers 
FROM `results` r
JOIN (
   SELECT month
        , COUNT(*) as TotalPlayers 
   FROM results
   GROUP BY month
   ) m
ON m.month=r.month
WHERE season=CurrentSeason 
  and name="Player" 
```

# c# - WebForm读取xml文件问题

> ID：16134594
> 
> 赞同：0
> 
> 时间：2013-04-21T18:18:45.777
> 
> 标签：c#, .net, webforms

我的网站中有一个 WebForm，我尝试从本地计算机读取 xml 文件：

```
XDocument doc = XDocument.Load(@"C:\ServerXml\Message.xml");
XmlNodeList NodeList = doc.GetElementsByTagName("message"); 
```

当我运行这个方法时，我得到了异常：

```
Could not find file 'C:\ServerXml\Message.xml' 
```

该文件肯定存在于此路径中。

为什么找不到文件？这是因为我需要在 iis 中定义一些东西吗？我在本地运行这个在 VS2010 中运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:11:18.217

检查您正在运行的用户是否具有给定文件夹的正确授权。

# r - 使用刻面反转堆叠条的填充顺序

> ID：16134596
> 
> 赞同：1
> 
> 时间：2013-04-21T18:18:52.123
> 
> 标签：r, ggplot2

我不知道如何让填充订单反转。基本上，我试图让指南和填充匹配单词从正面到负面的内在顺序：

从上到下的指南和成交单应该是：

*   “比我预期的要好得多”，（填充在最顶部，在图例的顶部）
*   “比我预期的好一点”，
*   “关于我的预期”，
*   “比我预想的差一点”，
*   “比我预期的要差得多”（填充在最底部，在图例的底部）

您需要样本数据：

```
dat <- structure(list(Banner = structure(c(2L, 2L, 2L, 2L, 2L, 1L, 1L, 
1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 
2L, 2L, 1L, 1L, 1L, 1L, 1L), .Label = c("Other", "Some Company"
), class = "factor"), Response = structure(c(1L, 2L, 3L, 4L, 
5L, 1L, 2L, 3L, 4L, 5L, 1L, 2L, 3L, 4L, 5L, 1L, 2L, 3L, 4L, 5L, 
1L, 2L, 3L, 4L, 5L, 1L, 2L, 3L, 4L, 5L),
 .Label = c(
"Far better than I expected", 
"A little better than I expected", 
"About what I expected", 
"A little worse than I expected", 
"Far worse than I expected"), class = "factor"), Frequency = c(1L, 
6L, 9L, 0L, 0L, 29L, 71L, 149L, 32L, 6L, 1L, 7L, 16L, 1L, 0L, 
38L, 90L, 211L, 24L, 6L, 0L, 0L, 8L, 1L, 1L, 6L, 13L, 109L, 35L, 
9L), Proportion = c(6, 38, 56, 0, 0, 10, 25, 52, 11, 2, 4, 28, 
64, 4, 0, 10, 24, 57, 7, 2, 0, 0, 80, 10, 10, 3, 8, 63, 20, 5
), Phase = c("Phase 1", "Phase 1", "Phase 1", "Phase 1", "Phase 1", 
"Phase 1", "Phase 1", "Phase 1", "Phase 1", "Phase 1", "Phase 2", 
"Phase 2", "Phase 2", "Phase 2", "Phase 2", "Phase 2", "Phase 2", 
"Phase 2", "Phase 2", "Phase 2", "Phase 3", "Phase 3", "Phase 3", 
"Phase 3", "Phase 3", "Phase 3", "Phase 3", "Phase 3", "Phase 3", 
"Phase 3")), .Names = c("Banner", "Response", "Frequency", "Proportion", 
"Phase"), 
row.names = c(NA, 30L), 
sig = character(0), 
comment = "Overall, my experience was...  by  Company", q1 = "", q2 = "", 
class = c("survcsub", "data.frame")) 
```

位置标签

```
dat <- ddply(dat, .(Banner, Phase), function(x) {
   x$Pos <- (cumsum(x$Proportion) - 0.5*x$Proportion)
   x
}) 
```

阴谋

```
ggplot(dat, aes(Banner, Proportion/100, fill=Response,
  label=ifelse(Proportion > 5, percent(Proportion/100), ""))) + 
  geom_bar(position="fill", stat="identity") + 
  geom_text(aes(Banner, Pos/100)) + 
  facet_grid(~Phase) + 
  scale_y_continuous(labels=percent) +
  labs(x="\nCompany", y="\nProportion") 
```

我试过的：

```
dat$Response <- factor(dat$Response, levels=rev(dat$Response)) 
# No dice, reverses the colour of the scale but not the position of the fill 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:40:57.913

要更改堆积条形图中值的顺序，您应该使用of`order=`中的参数并设置排序所需的列名称（在这种情况下）。使用功能，您可以设置条的相反顺序。`aes()``geom_bar()``Response``desc()`

使用您的原始数据框（没有最后一行`factor()`）。

```
ggplot(dat, aes(Banner, Proportion/100, fill=Response,
                label=ifelse(Proportion > 5, percent(Proportion/100), ""))) + 
  geom_bar(position="fill", stat="identity",aes(order=desc(Response))) + 
  geom_text(aes(Banner, Pos/100)) + 
  facet_grid(~Phase) + 
  scale_y_continuous(labels=percent) +
  labs(x="\nCompany", y="\nProportion") 
```

为了正确放置标签，更改了位置计算：

```
dat <- ddply(dat, .(Banner, Phase), function(x) {
  x$Pos <- (100-cumsum(x$Proportion) + 0.5*x$Proportion)
  x
}) 
```

![在此处输入图像描述](https://i.stack.imgur.com/gInbN.png)

# android - 我在使用 VideoView 时遇到的这个错误是什么：MediaPlayer(29449): Error (1,-1004) in android

> ID：16134598
> 
> 赞同：1
> 
> 时间：2013-04-21T18:18:57.070
> 
> 标签：android, android-mediaplayer, android-videoview, http-live-streaming

我想播放实时流，`VideoView`但我收到错误是什么错误：

```
04-21 21:13:27.326: D/MediaPlayer(29449): Couldn't open file on client side, trying server side
04-21 21:13:27.529: D/dalvikvm(29449): GC_CONCURRENT freed 81K, 2% free 9218K/9328K, paused 5ms+3ms, total 28ms
04-21 21:14:17.654: E/MediaPlayer(29449): error (1, -1004)
04-21 21:14:17.654: E/MediaPlayer(29449): Error (1,-1004)
04-21 21:14:17.654: D/VideoView(29449): Error: 1,-1004 
```

我播放直播的代码：

```
public  class VideoStreamingActivity  extends Activity implements OnPreparedListener,OnErrorListener{

    private Vibrator vibrator;
    private boolean readyToPlay;
    private ProgressBar progress;
    private ProgressDialog loading;
    private TextView mediaTimeElapsed;
    private TextView mediaTime;
    private TextView mediaInfo;
    private Button play;
    private Button stop;
    private String url;
    private VideoView vvStreaming;
    private CountDownTimer timer;

    /** Called when the activity is first created.*/
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        setContentView(R.layout.activity_video_streaming);

        //variables init
        vvStreaming = (VideoView)findViewById(R.id.vvStreaming);

        url ="http://www.ted.com/talks/download/video/8584/talk/761";
        play = (Button)findViewById(R.id.btnPlay);
        stop = (Button)findViewById(R.id.btnPause);

        mediaInfo = (TextView) findViewById(R.id.tvMediaInfo);
        mediaTime = (TextView)findViewById(R.id.tvTime);
        mediaTimeElapsed = (TextView)findViewById(R.id.tvTimeElapsed);

        progress = (ProgressBar) findViewById(R.id.progressBar1);
        loading = new ProgressDialog(this);
        loading.setMessage("Loading...");

        vibrator =   (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);

        //flag indicating that content is ready for playback
        readyToPlay = false;

        // listeners for VideoView:

        //vvStreaming.setOnPreparedListener(this);
        //vvStreaming.setOnErrorListener(this);

        vvStreaming.setVideoURI(Uri.parse(url));
        vvStreaming.setMediaController(new MediaController(this));
        vvStreaming.start();

    }

    @Override
    public boolean onError(MediaPlayer mp, int what, int extra) {
        loading.hide();
        return false;
    }

    @Override
    public void onPrepared(MediaPlayer mp) {
        Log.d(this.getClass().getName(), "prepared");
        mp.setLooping(true);
        loading.hide();

        //onVideoSizeChangedListener declaration
        /*  mp.setOnVideoSizeChangedListener(new OnVideoSizeChangedListener() {
            @Override
            public void onVideoSizeChanged(MediaPlayer mp, int width, int height) {
                if(width!=0 && height!=0) {
                    Log.d(this.getClass().getName(), "logo off");
                    logo.setVisibility(ImageView.INVISIBLE);
                } else {
                    Log.d(this.getClass().getName(), "logo on");
                    logo.setVisibility(ImageView.VISIBLE);
                }               
            }
        });*/

        //onBufferingUpdateListener declaration
        mp.setOnBufferingUpdateListener(new OnBufferingUpdateListener()
        {
            // show updated information about the buffering progress
            @Override
            public void onBufferingUpdate(MediaPlayer mp, int percent) {
                Log.d(this.getClass().getName(), "percent: " + percent);
                progress.setSecondaryProgress(percent);
            }
        });

        //onSeekCompletionListener declaration
        mp.setOnSeekCompleteListener(new OnSeekCompleteListener() {

            //show current frame after changing the playback position
            @Override
            public void onSeekComplete(MediaPlayer mp) {
                if(mp.isPlaying()) {
                    //  playMedia(null);
                    //  playMedia(play);
                } else {
                    //  playMedia(null);
                    //  playMedia(play);
                    //  playMedia(null);
                }
                //  mediaTimeElapsed.setText(countTime(vvStreaming.getCurrentPosition()));
            }
        });

        mp.setOnCompletionListener(null);

        readyToPlay = true;
        int time = vvStreaming.getDuration();
        int time_elapsed = vvStreaming.getCurrentPosition();
        progress.setProgress(time_elapsed);

        timer = new CountDownTimer(time, 500) {

            @Override
            public void onTick(long millisUntilFinished) {
                //  mediaTimeElapsed.setText(countTime(vvStreaming.getCurrentPosition()));
                float a = vvStreaming.getCurrentPosition();
                float b = vvStreaming.getDuration();
                progress.setProgress((int)(a/b*100));
            }

            @Override
            public void onFinish() {
                //  stopMedia(null);

            }
        };
        //onTouchListener declaration
        progress.setOnTouchListener(new OnTouchListener() {

            // enables changing of the current playback position
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                ProgressBar pb = (ProgressBar) v;

                int newPosition = (int) (100 * event.getX() / pb.getWidth());
                if (newPosition > pb.getSecondaryProgress()) {
                    newPosition = pb.getSecondaryProgress();
                }

                switch (event.getAction()) {
                // update position when finger is DOWN/MOVED/UP
                case MotionEvent.ACTION_DOWN:
                case MotionEvent.ACTION_MOVE:
                case MotionEvent.ACTION_UP:
                    pb.setProgress(newPosition);
                    vvStreaming.seekTo((int) newPosition * vvStreaming.getDuration() / 100);
                    break;
                }
                return true;
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T15:21:31.060

检查您的清单用户权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# ruby-on-rails - Mongoid：如何反转 1-N 关系，并将外键存储在父级上？

> ID：16134600
> 
> 赞同：1
> 
> 时间：2013-04-21T18:19:05.977
> 
> 标签：ruby-on-rails, mongodb, mongoid

我正在创建一个描述一个人的**个人资料。**此描述中包含有关他们从事的**行业的信息（即“计算机与 IT”）。**因此，该关系被定义为：

`"A Profile has an Industry, but an Industry does not belong to a Profile."`

浏览[这个 Mongoid 文档](http://mongoid.org/en/mongoid/docs/relations.html#has_many)，我使用以下内容设置了我的模型：

```
class Profile
  include Mongoid::Document

  has_one :industry
end

class Industry
  include Mongoid::Document

  field :name,      type: String, default: ''
end 
```

现在我知道通常你会`belongs_to :profile`在**Industry**类中添加一个。但是，根据文档，它将外键添加到子项（行业），而不是父项（配置文件）：

```
# The parent profile document.
{ "_id" : ObjectId("4d3ed089fb60ab534684b7e9") }

# The child industry document.
{
  "_id" : ObjectId("4d3ed089fb60ab534684b7f1"),
  "profile_id" : ObjectId("4d3ed089fb60ab534684b7e9")
} 
```

这是有问题的，因为我不希望行业链接到个人资料，我希望个人资料链接到行业。**我怎样才能让它看起来像这样？**：

```
# The parent profile document.
{ "_id" : ObjectId("4d3ed089fb60ab534684b7e9")
  "industry_id" : ObjectId("4d3ed089fb60ab534684b7f1")
}

# The child industry document.
{
  "_id" : ObjectId("4d3ed089fb60ab534684b7f1"),
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:34:19.753

我发现 Mongoid 中关系名称的选择令人困惑，但它反映了 ActiveRecord，所以你去吧。你要：

```
class Industry 
    has_many :profiles 
end

class Profile 
    belongs_to :industry
end 
```

`belongs_to`具有 FK 字段 的类。`has_one`并`has_many`创建关联以在另一个类中找到 FK。

# ruby - Ruby/Rails 和 R 兼容性、统计包

> ID：16134601
> 
> 赞同：1
> 
> 时间：2013-04-21T18:19:20.853
> 
> 标签：ruby, r, compatibility

我们目前有一个基于 R 的图表，并希望将其集成到我们的 Rails 应用程序中。几个问题：

1) RSRuby 作为一个选项仍然有效吗？上一次 gem 更新和关于它的大部分文章是从 2009 年开始的，所以我担心它的可维护性，尤其是 Ruby 2 已经问世（我们仍然在 Ruby 1.9.3 上进行记录）。2) 与 R 的稳健性相比，Rails 是否有可靠的统计选项，甚至是原生的统计选项？

欢迎任何花絮或您过去如何处理此问题。

# matlab - 多项式约束最小二乘曲线拟合与matlab

> ID：16134604
> 
> 赞同：3
> 
> 时间：2013-04-21T18:19:33.023
> 
> 标签：matlab, constraints, curve-fitting, polynomial-math

我想拟合并绘制一条受以下边界条件约束的曲线：

```
diff (yfit)<=0 
```

其中`yfit`是 度 的多项式拟合函数`n`。

该条件确保多项式的任意次数的斜率对于所有 都是非正的`x`。

如何使用“ `polyfit`”函数或任何其他多项式拟合函数应用条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T07:16:25.993

从我有限的数学观点来看，例如，2 次多项式函数根据定义具有正斜率和负斜率的区域。您可以尝试的一件事是使用绝对值：构建自己的拟合（即最小二乘很容易 = polyfit）并且不要使用多项式函数，而是使用其绝对函数。

最小平方：取 0 = d/da ( sum( func-point)^2 ) 并且这个对于每个订单.. Wikipedia 和其他人提供了深入的描述。

# c++ - Assimp 不导入纹理

> ID：16134605
> 
> 赞同：4
> 
> 时间：2013-04-21T18:19:54.307
> 
> 标签：c++, opengl, assimp

我正在使用 assimp 在我的游戏引擎中导入 3d 模型。出于某种原因，无论我使用什么模型或模型格式，assimp 都不会报告任何纹理。为什么是这样？

以下是使用 assimp 的非常简单的设置：

```
const aiScene* scene = importer.ReadFile(asset, aiProcessPreset_TargetRealtime_Quality);

if (scene->HasMaterials())
        {
            for (unsigned int i = 0; i < scene->mNumMaterials; i++)
            {
                const aiMaterial* material = scene->mMaterials[i];
                aiString texturePath;

                unsigned int numTextures= material->GetTextureCount(aiTextureType_DIFFUSE);   // always 0

                if (material->GetTextureCount(aiTextureType_DIFFUSE) > 0 && material->GetTexture(aiTextureType_DIFFUSE, 0, &texturePath) == AI_SUCCESS) 
                {
                   // never happens..
                   // scene->mNumTextures is always 0 aswell.
                }
            }
        } 
```

我正在使用我认为具有纹理的各种模型，例如教程中的模型，这些模型是为使用 assimp 加载纹理模型的特定原因而设计的。（例如，[http://www.lighthouse3d.com/cg-topics/code-samples/importing-3d-models-with-assimp](http://www.lighthouse3d.com/cg-topics/code-samples/importing-3d-models-with-assimp)）

这可能是什么原因？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-18T22:25:27.993

我知道这已经很老了，但过去几天我遇到了这个确切的问题并设法解决了这个问题，所以这里有一个适合正在寻找的人的解决方案。

纹理未加载的可能原因有两个：

1.  纹理被嵌入。

或者

1.  您的模型材料文件有问题。

如果是案例 #1，那么它就不起作用，因为 GetTexture 和 GetTextureCount 不适用于嵌入材料。嵌入的材料通常只是简单的颜色。如果您想知道如何导入嵌入材料，请查看 ASSIMP 示例代码或 AssimpView 的源代码。

您的问题很可能是第 2 种情况：您的材料文件有问题。例如，.OBJ 模型文件带有相应的 .MTL 文件，如果它们有纹理的话。如果 .MTL 文件丢失，则不会加载纹理。如果 .MTL 文件有问题，纹理也不会加载。

因此，请确保您的所有 .mtl 文件和任何其他材质文件（包括纹理本身的图像）都在那里。如果它们在那里，那么您接下来要做的就是使用 AssimpView 工具打开模型。确保模型的所有纹理都正确加载。如果没有，要么是材料文件有问题（下面的解决方案），要么是模型文件有问题，Assimp 根本无法加载它（或者 Assimp 存在根本问题）。如果加载正确，您应该会在 AssimpView 的右侧看到漫反射纹理的名称。

因此，如果所有这些都检查出来并且程序中的 Assimp 导入器仍然无法识别模型中的纹理（即使 AssimpView 可以），那么您要做的下一件事实际上就是使用记事本之类的工具打开 .MTL 文件。你会看到这样的东西：

```
# 3ds Max Wavefront OBJ Exporter v0.97b - (c)2007 guruware
# File Created: 06.10.2013 19:40:35

newmtl 01___Default
Ns 10.0000
illum 2
Ka 0.0000 0.0000 0.0000
Kd 0.5882 0.5882 0.5882
Ks 0.0000 0.0000 0.0000
Ni 1
d 0
map_Kd MoonMap2_2500x1250.jpg 
```

这些文件有很多问题。请注意，map_Kd 定义了用于漫反射纹理的图像文件。有时，您会看到相对于制作模型的计算机的完整目录路径，而不是正确的路径或文件名（即，它会说类似 C:/Users/blah blah blah/MoonMap2 ...）。您可以通过删除目录路径并仅保留图像文件名（并将图像与模型保存在同一文件夹中）轻松解决此问题，或者您可以放置​​自己的自定义路径并将纹理放在那里。

您可能会看到的另一种问题是在 .MTL 文件中列出的变量实际上没有被赋予值。

例如：

```
# 3ds Max Wavefront OBJ Exporter v0.97b - (c)2007 guruware
# File Created: 06.10.2013 19:40:35

newmtl 01___Default
Ns 10.0000
illum 2
Ka 0.0000 0.0000 0.0000
Kd 0.5882 0.5882 0.5882
Ks 0.0000 0.0000 0.0000
Ni 1
d 0
map_Kd MoonMap2_2500x1250.jpg
map_Ka 
```

注意最后的“map_Ka”。它旁边没有任何东西。这不仅会阻止纹理被正确识别，实际上还会阻止 AssimpView 加载模型。当它们旁边没有值时，只需删除您看到的任何此类属性。

最后，如果这些都不起作用，那么您可能只需要尝试 .MTL 文件 - 其中可能列出了一个属性/变量，由于某种原因导致了麻烦，因此请尝试删除您绝对确定不这样做的行不需要（注意，Kd 代表漫反射纹理，Ka 代表环境纹理，Ks 代表镜面反射等）。我在这里用作示例的 .MTL 文件包含我认为 MTL 文件应该具有的最少行，以便能够加载到漫反射纹理中。

希望这可以帮助。如果这些都不起作用，我会怀疑您的 ASSIMP 库存在根本问题。如果您的模型文件没有材料文件很好......那是您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-21T10:53:08.493

继续马特关于材料文件有效的说法，我发现了另一个可能的问题，即材料未加载以及解决方案。

在 obj 文件中有对材料文件和该文件中的材料名称的引用。如果您已重命名该文件，这些将不匹配并且它不会找到该材料。

在 obj 文件中，您将找到如下所示的一行

```
mtllib deer-obj.mtl 
```

这是材料文件的名称。如果您已重命名材料，您也必须在此处重命名。

在同一个文件中，您将找到对材料文件中定义的材料名称的引用，如下所示：

```
usemtl deer 
```

这必须与材料文件中的材料名称相匹配。在 mtl 文件中，我定义了这个：

```
newmtl deer 
```

“usemtl”名称和“newmtl”名称必须匹配才能找到材料。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-28T15:36:28.623

对 assimp 来源的探索表明，OBJ 导入器中根本没有 mNumTextures++。因此，导入 OBJ 文件永远不会积极。

加载纹理的正确方法是在 apply_material() 的末尾添加下一个代码（D 语言）：

```
aiString path;
if(aiReturn_SUCCESS == aiGetMaterialTexture(mtl, aiTextureType_DIFFUSE, 0, &path))
{
    string p = (cast(const(char)*)(path.data)).to!(string)();

    GLuint texture_name;
    glGenTextures(1, &texture_name);// generate GL-textures ID's
    glBindTexture(GL_TEXTURE_2D, texture_name);// Binding of texture name
    //
    //redefine standard texture values
    //
    // We will use linear interpolation for magnification filter
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    // tiling mode
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, true ? GL_REPEAT : GL_CLAMP);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, true ? GL_REPEAT : GL_CLAMP);

    auto image = IMG_Load(p.toStringz);
    if (!image)
    {
        throw new Exception(format("Error while loading texture: %s", p));
    }

    // Texture specification
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, image.w, image.h, 0, GL_RGBA, GL_UNSIGNED_BYTE,
            image.pixels);
} 
```

并显示此纹理添加到 glColor4fv 和 glNormal3fv 之间的 recursive_render() 下一行：

```
glTexCoord2f(mesh.mTextureCoords[0][index].x, 1.0-mesh.mTextureCoords[0][index].y); 
```

# java - 这个多线程 Java 代码中真的存在竞争条件吗？

> ID：16134608
> 
> 赞同：1
> 
> 时间：2013-04-21T18:20:22.583
> 
> 标签：java, multithreading, synchronization, race-condition, producer-consumer

[我在这个问题](https://stackoverflow.com/q/8974638/1733060)中看到了一段我无法理解的代码片段（很可能是因为我是该领域的初学者）。这个问题谈到了“一个**明显**的竞争条件，有时生产者会完成，发出信号，而 ConsumerWorkers 会在消费队列中的所有内容之前停止。”

1.  据我了解，只有在生产者决定不再在队列中添加项目后，才会在消费者身上设置“isRunning”。因此，如果消费者线程将 isRunning 视为 FALSE，然后看到 inputQueue 为空，那么将来就不可能再将任何东西添加到队列中。显然，我错了并且遗漏了一些东西，因为没有人回答这个问题，说这个问题的场景是不可能的。那么，有人可以解释一下导致这种竞争状况的事件顺序吗？

2.  事实上，我看到了其他问题。例如，如果多个消费者线程看到生产者正在运行，并说队列有一个项目，那么许多线程可能会进入阻塞的“获取”。如果生产者现在停止，虽然一个线程会从“take”中出来，但其他线程将永远被阻塞在“take”上。有趣的是，回答这个问题的人也没有指出这个问题。所以，我对此的理解也可能是错误的？！

我不想在那个问题中添加这个作为评论，因为这是一个老问题，我的疑问可能永远不会得到回答！我在此处复制/放置该问题的代码以供快速参考。

```
public class ConsumerWorker implements Runnable{

private BlockingQueue<Produced> inputQueue;
private volatile boolean isRunning = true;

public ConsumerWorker(BlockingQueue<Produced> inputQueue) {
    this.inputQueue = inputQueue;
}

@Override
public void run() {
    //worker loop keeps taking en element from the queue as long as the producer is still running or as 
    //long as the queue is not empty:
    while(isRunning || !inputQueue.isEmpty()) {
        System.out.println("Consumer "+Thread.currentThread().getName()+" START");
        try {
            Object queueElement = inputQueue.take();
            //process queueElement
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

//this is used to signal from the main thread that he producer has finished adding stuff to the queue
public void setRunning(boolean isRunning) {
    this.isRunning = isRunning;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:03:59.577

我认为原始问题的 OP 可能意味着

```
while(isRunning && !inputQueue.isEmpty()) 
```

而不是

```
while(isRunning || !inputQueue.isEmpty()) 
```

前者清楚地产生了原始海报（*）描述的问题，而后者确实存在您在第二点中描述的问题。那里有一个简单的疏忽，但现在我们可以注意到这两种方法都是不正确的。

[(*) 并以某种方式假设队列永远不会为空。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:10:15.283

你在这两个问题上都是正确的。是`&&`的是正确的，`||`不是。至于第二个问题，答案是使用`poison pill`或超时，两种方式都可以解决问题。

至于我，我将创建新的同步类，它聚合队列和`isRunning`变量，以便更改`isRunning`会导致异常，`take()`从而发出工作结束的信号。

# r - 条形图上的 ggplot 误差线位置错误

> ID：16134610
> 
> 赞同：1
> 
> 时间：2013-04-21T18:20:29.180
> 
> 标签：r, ggplot2

当我使用以下代码生成图表时，误差线处于奇怪的位置。你能告诉我如何让错误栏显示在条形图中每个栏的顶部吗？我知道这是基本的，但我已经盯着它看了好几个小时了。谢谢。

```
library(ggplot2)
df <- data.frame(gender=c("male","male","female","female"),
             trait=c("height","weight","height","weight"),
             value=c(70,150,65,120),
             sd = c(5,15,4,10))

gg <- ggplot(df,aes(x=trait,y=value,fill=trait))
gg <- gg+ geom_bar(stat="identity",position=position_dodge())
gg <- gg + facet_wrap(~ gender, ncol=1)

limits <- aes(ymax=df$value+df$sd, ymin=df$value-df$sd)                                                                                               
gg <- gg + geom_errorbar(limits)
#gg <- gg + geom_pointrange(limits)                                                                                                                                                                       
gg 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:53:57.983

你得到错误条的奇怪位置，因为你`df$value`在位置设置中使用（它使位置相同）。您应该将位置设置`aes()`为`value-sd`（不带`df$`），并且可以设置`ymin`和`ymax`内部`ggplot()`调用。

```
ggplot(df,aes(x=trait,y=value,fill=trait,ymin=value-sd,ymax=value+sd))+
       geom_bar(stat="identity",position=position_dodge())+
       facet_wrap(~ gender, ncol=1)+
       geom_errorbar() 
```

![在此处输入图像描述](https://i.stack.imgur.com/npTLq.png)

# c - 将时间信息从 NTP 服务器传递到 strftime 函数

> ID：16134614
> 
> 赞同：2
> 
> 时间：2013-04-21T18:21:03.320
> 
> 标签：c, linux, posix, strftime

[我通过参考此处](http://www.abnormal.com/~thogard/ntp/ntpdate.c)的网页使用底部的代码 ntp 客户端代码。`YYYYMMDDHHMM`代码接收时间信息然后我想存储时间信息`201304211405`。代码从 NTP 服务器接收时间信息，但我很难找出如何将该信息传递给`strftime`，我应该如何将收到的时间信息传递给`strftime`？

这是代码的相关部分

```
i=recv(s,buf,sizeof(buf),0);

tmit=ntohl((time_t)buf[10]);    //# get transmit time
tmit-= 2208988800U;
printf("tmit=%d\n",tmit);

//#compare to system time
printf("Time is time: %s",ctime(&tmit));
char buffer[13];
struct tm * timeinfo;
timeinfo = ctime(&tmit);

strftime (buffer,13,"%04Y%02m%02d%02k%02M",timeinfo);
printf("new buffer:%s\n" ,buffer); 
```

这是我正在使用的完整代码

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>

void ntpdate();

int main() {
    ntpdate();
    return 0;
}

void ntpdate() {
char    *hostname="79.99.6.190 2";
int portno=123;     //NTP is port 123
int maxlen=1024;        //check our buffers
int i;          // misc var i
unsigned char msg[48]={010,0,0,0,0,0,0,0,0};    // the packet we send
unsigned long  buf[maxlen]; // the buffer we get back
//struct in_addr ipaddr;        //
struct protoent *proto;     //
struct sockaddr_in server_addr;
int s;  // socket
int tmit;   // the time -- This is a time_t sort of

//use Socket;
proto=getprotobyname("udp");
s=socket(PF_INET, SOCK_DGRAM, proto->p_proto);

memset( &server_addr, 0, sizeof(server_addr));
server_addr.sin_family=AF_INET;
server_addr.sin_addr.s_addr = inet_addr(hostname);
server_addr.sin_port=htons(portno);
// send the data
i=sendto(s,msg,sizeof(msg),0,(struct sockaddr *)&server_addr,sizeof(server_addr));

/***************HERE WE START**************/
// get the data back
i=recv(s,buf,sizeof(buf),0);

tmit=ntohl((time_t)buf[10]);    //# get transmit time
tmit-= 2208988800U;
printf("tmit=%d\n",tmit);

//#compare to system time
printf("Time is time: %s",ctime(&tmit));
char buffer[13];
struct tm * timeinfo;
timeinfo = ctime(&tmit);

strftime (buffer,13,"%04Y%02m%02d%02k%02M",timeinfo);
printf("new buffer:%s\n" ,buffer);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:48:12.597

问题出在线路...

```
timeinfo = ctime(&tmit); 
```

如果`timeinfo`是 type `struct tm *`，你不能只将它指向由 .`char *`返回的人类可读的字符串`ctime()`。

如果要转换为`struct tm *`，则需要使用`gmtime()`或`localtime()`，具体取决于您希望`struct tm *`是 UTC 时间，还是相对于您的本地时区表示。

由于`ctime()`使用本地时区，我假设你想要那样，所以用...替换该行

```
timeinfo = localtime(&tmit); 
```

# java - PhoneGap 手柄后退按钮不关闭应用程序

> ID：16134618
> 
> 赞同：0
> 
> 时间：2013-04-21T18:21:23.340
> 
> 标签：java, android, cordova, back-button

我有 index.html 和 page.html

index.html 有一个指向 page.html 的锚点

我会按下后退按钮并询问用户是否真的想返回 index.html

这是我的代码：

索引.html

```
<!DOCTYPE HTML>
<html>
  <head>
    <title>First App</title>
    <script src="cordova-2.6.0.js"></script>
    <script>
     function onLoad(){
          document.addEventListener("deviceready",onDeviceReady, true);
     }

     function onDeviceReady(){
        navigator.notification.alert("PhoneGap is working!!");
     }
  </script>
  </head>
  <body onload="onLoad();">
       <h1>Welcome to PhoneGap</h1>
       <h2>Edit assets/www/index.html</h2>
        <a href="page.html">Go to page</a>
  </body>
</html> 
```

page.html

```
<!DOCTYPE HTML>
<html>
  <head>
    <title>First App</title>
  <script src="cordova-2.6.0.js"></script>
  <script>
     function onLoad(){
          document.addEventListener("deviceready",onDeviceReady, true);
        document.addEventListener("backbutton", onBackKeyDown, false);
     }

     function onDeviceReady(){
navigator.notification.alert("PhoneGap is working!!");
     }

function onBackKeyDown(e) {        
        navigator.notification.alert("PhoneGap back is working!!");
}
  </script>
  </head>
  <body onload="onLoad();">
       <h1>Welcome to PhoneGap Page</h1>
       <h2>Edit assets/www/page.html</h2>
  </body>
</html> 
```

问题是没有处理后退按钮按下，但是因为我显示了警报框，所以正确加载了科尔多瓦。

我做错了什么？

我有一台搭载 Android 4.2.2 的三星 Google Nexus

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:08:22.620

将您的后退按钮侦听器放在 onDeviceReady 函数中。

# c++ - 块矩阵转置

> ID：16134620
> 
> 赞同：2
> 
> 时间：2013-04-21T18:21:24.253
> 
> 标签：c++, algorithm, caching, matrix

我想通过将输入矩阵分成块然后转置它们来实现矩阵的转置。我参考了相应的帖子[A Cache Efficient Matrix Transpose Program?](https://stackoverflow.com/questions/5200338/a-cache-efficient-matrix-transpose-program) 并像这样编写我的代码：

```
#include<iostream>
#include<stdlib.h>
#define m 4
#include<sys/time.h>
#include<time.h>
#include<malloc.h>

using namespace std;

int **a, **b, **c;
int count = 0;
clock_t t1, t2;    
int blocksize = 2;

int main(){
    a = (int **)malloc(m*sizeof(int *));
    for(int i = 0;i<m;i++){
            a[i] = (int *)malloc(m*sizeof(int));
    }
    b = (int **)malloc(m*sizeof(int *));
    for(int i = 0;i<m;i++){
            b[i] = (int *)malloc(m*sizeof(int));
    }
    for(int i=0; i<m; i++){
            for(int j =0; j<m; j++){
                    a[i][j]=(2*i)+(3*j);
            }
    }
    for(int i=0; i<m; i++){
            for(int j =0; j<m; j++){
                    cout << a[i][j] << "\t";
            }
            cout << "\n";
     }
    cout << "\n";
    t1 = clock();
    // MAIN BLOCK TRANSPOSE CODE
    for (int i = 0; i < m; i += blocksize) {
        for (int j = 0; j < m; j += blocksize) {
                    for (int k = i; k < i + blocksize; ++k) {
                            for (int l = j; l < j + blocksize; ++l) {
                                    b[k + l*m] = a[l + k*m];
                            }
                    }
            }
    }
    t2 = clock();
    for(int i=0; i<m; i++){
            for(int j =0; j<m; j++){
                    cout << b[i][j] << "\t";
            }
            cout << "\n";
     }
    free(a);
    free(b);
    cout << "\n";
    cout << (double)(t2-t1)/CLOCKS_PER_SEC << "\n";
return 0;
} 
```

但是，代码没有按预期工作。我实现了据说在相应帖子中工作的代码。如果可能，请提供帮助。

输入数组：

```
0       3       6       9
2       5       8       11
4       7       10      13
6       9       12      15 
```

预期输出数组：

```
0       2       4       6
3       5       7       9  
6       8       10      12  
9       11      13      15 
```

获得的结果：

```
0       3       6       9
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:32:10.210

我认为您的矩阵应该编码在单个数组中，而不是数组数组中（请参阅链接问题的编辑 2）。

您可能想尝试一下：

```
int *a, *b, *c;

a = (int *)malloc(m*m*sizeof(int));
b = (int *)malloc(m*m*sizeof(int));
for(int i=0; i<m; i++){
        for(int j =0; j<m; j++){
                a[i*m+j]=(2*i)+(3*j);
        }
}
for(int i=0; i<m; i++){
        for(int j =0; j<m; j++){
                cout << a[i*m+j] << "\t";
        }
        cout << "\n";
 }
cout << "\n"; 
```

# java - 在 Java 中加载类有哪些不同的方法

> ID：16134621
> 
> 赞同：3
> 
> 时间：2013-04-21T18:21:24.923
> 
> 标签：java, classloader

我正在学习java，并且在通过ClassNotFoundException概念的过程中，我遇到了术语`Class.forName("xyz");`. 我知道这是加载类的一种方式。我的问题是，在java中加载类的不同方法是什么？什么时候用哪一个？什么比其他更受欢迎？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T18:28:54.140

我将从最简单的开始（这里我假设类定义在类路径中可用并且 JVM 可以加载它）：

1.  引用代码中的类名。当 JVM 找到该引用时，该类将被最新加载。

    ```
    SomeClass someInstance = null; 
    ```

2.  [Class.forName(String)](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName%28java.lang.String%29)，加载和初始化类。它使用当前类的类加载器。

    ```
     Class.forName("XYZ"); 
    ```

3.  [ClassLoader#loadClass(String)](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#loadClass%28java.lang.String%29)，加载类，但不初始化。您可以获取该实例的实例`ClassLoader`并在该实例上调用`loadClass()`，可以是自定义类加载器或系统类加载器。

    ```
    ClassLoader.getSystemClassLoader().loadClass("XYZ"); 
    ```

4.  重载[Class.forName()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName)，允许您指定要显式使用的类加载器和`initialize`参数来指定是否必须初始化类。

    ```
    Class.forName(String name, boolean initialize, ClassLoader loader) 
    ```

对于`JDBC`，我们需要加载驱动程序类并对其进行初始化。通过运行一些静态初始化程序，驱动程序类在 JDBC 驱动程序管理器中注册（尽管我还没有看到内部工作代码）。因此，我们需要使用类加载机制来加载驱动程序类并运行其静态初始化块。因此，最优选的方式是`Class.forName()`。

# ruby-on-rails - 创建用户时在其他表中创建数据

> ID：16134624
> 
> 赞同：0
> 
> 时间：2013-04-21T18:21:35.463
> 
> 标签：ruby-on-rails

再会。

我的数据库（PostgeSQL）中有 2 个表：“用户”和“文件夹”。文件夹是`belongs_to :user`和用户`has_many :folders`。我需要用户，在创建他的帐户时自动在文件夹表中创建一个文件夹`name: "Default", id: 1, user_id: current_user.id`。据我了解，我需要`create`在`users_controller`

这是我的`user.rb`

```
# == Schema Information
#
# Table name: users
#
#  id              :integer          not null, primary key
#  name            :string(255)
#  email           :string(255)
#  created_at      :datetime         not null
#  updated_at      :datetime         not null
#  password_digest :string(255)
#  remember_token  :string(255)
#  admin           :boolean          default(FALSE)
#

class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password
  has_many :folders, dependent: :destroy

  before_save { email.downcase! }
  before_save :create_remember_token

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX }, uniqueness: { case_sensitive: false }
  validates :password, length: { minimum: 6 }
  validates :password_confirmation, presence: true

  private

  def create_remember_token
    self.remember_token = SecureRandom.urlsafe_base64
  end
end 
```

这是`folder.rb`

```
# == Schema Information
#
# Table name: folders
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  user_id    :integer
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

class Folder < ActiveRecord::Base
  attr_accessible :name
  belongs_to :user
  has_many :bookmarks, dependent: :destroy

  validates :user_id, presence: true
  validates :name, presence: true
end 
```

这是`create`来自的方法`users_controller.rb`

```
def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      redirect_to @user
      flash[:success] = "Welcome to Timio Bookmarks!"
    else
      if signed_in?
        redirect_to root_path
      else
        render 'new'
      end
    end
  end 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:26:30.847

尝试类似：

```
@user.folders << Folder.new 
```

在您对 @user.save 进行保存之前

# jquery - 使用 iframe 调整大小的 div

> ID：16134625
> 
> 赞同：1
> 
> 时间：2013-04-21T18:21:36.120
> 
> 标签：jquery, html, iframe, resizable

我有一个可调整大小的 div 和另一个 div 旁边有一个 iframe。当鼠标悬停在 iframe 上时，可调整大小的 div 不会正确调整大小。任何修复的想法？

示例：http: [//jsfiddle.net/36S7p/1/](http://jsfiddle.net/36S7p/1/)

```
$("#cont").resizable({
    handles: "e"
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T22:07:32.990

一个有点老套的方法，如果你仍然需要它：http: [//jsfiddle.net/36S7p/4/](http://jsfiddle.net/36S7p/4/)

每当调整框架大小时，我都会在鼠标周围添加一个边框和一些边距，这样可以保护鼠标免受 iFrame 的影响，如果这有意义的话。

基本上，将其添加到 jQuery：

```
 helper: "ui-resizable-helper" 
```

并添加这一点 CSS：

```
.ui-resizable-helper{
    border: 75px solid rgba(239, 239, 239, .9);
    margin: -75px;    
} 
```

# visual-studio-2008 - glutBitmapCharacter() 太慢了，在 OpenGL 程序中使用字体的任何替代方法？

> ID：16134627
> 
> 赞同：4
> 
> 时间：2013-04-21T18:21:45.863
> 
> 标签：visual-studio-2008, opengl, freeglut, freetype

我正在开发一个 3D 应用程序，试图在屏幕上呈现一些文本。

但是如果文本超过 10 个字符，则 FPS 会下降到 2，这真的很烦人。

我的程序经常使用 glutPostRedisplay() 函数，这就是它肯定会变慢的原因。

有什么方法可以让我的程序使用 glutBitmapCharacter() 显示字体并且没有任何延迟。

我在 win7 x64 上使用 VC++ 2008。

PS：我尝试在 VC++ 中安装 Freetype for OpenGL，但最终放弃了。如果我指出一些在 VC++ 2008 中安装任何字体库的“白痴”指南，我也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T17:31:40.787

如果您不需要矢量字体，那么文本显示的简单方法是使用位图字体纹理（固定间距样式）。您可以通过从 GDI 渲染来自己创建字体图像，或者在 MSPaint 中手动编辑它......或从 inet 下载

对于简单的文本，我现在使用 16x16 像素字体，...在图像中组织为 16x16 字符数组（纹理应该是正方形大小，因此您不需要使用扩展名）。

通过混合，您可以实现类似字符的精灵，或者使用 glColor 实现透明度，您可以更改文本和/或 alpha 的颜色，以这种方式呈现最佳外观的文本是使用非透视投影矩阵和纹理过滤 GL_LINEAR。

当然你必须编写你的 char 和 text 绘制函数，但它们并不复杂（char 是简单的方形四边形，你只需要从 ASCII 计算纹理坐标，并且文本是单一的，用于调用 char 和位置更新）

# java - 为什么我的 Android 项目会崩溃？

> ID：16134628
> 
> 赞同：0
> 
> 时间：2013-04-21T18:21:54.423
> 
> 标签：java, android, eclipse, android-emulator, crash

我正在 Eclipse 中编写一个使用 RitaWordNet 查找单词的同义词的 Android 应用程序。它可以编译，但在运行时会崩溃。是否有可能应用程序崩溃并且我收到消息“不幸的是 RitaWord 已停止工作”。是不是因为我添加到构建路径以使应用程序工作的 jar 文件太大（> 10 MB）？该程序是：

```
package com.example.ritaword;
import java.util.Arrays;
import android.*
import rita.wordnet.*;
public class MainActivity extends Activity {
TextView A, B; 
Button ok; 
String[] synonyms; 
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ok = (Button)findViewById(android.R.id.button1);
    A = (TextView)findViewById(R.id.textView1);  
    B = (TextView)findViewById(R.id.textView2); 
    B.setText("");
    RiWordnet wordnet = new RiWordnet();
    String word = wordnet.getRandomWord("a");
    synonyms = wordnet.getAllSynonyms(word, "a", 1);
}
public void onClick(View view) {
    switch (view.getId()) {
    case (R.id.button1): 
        if (synonyms != null) {
            Arrays.sort(synonyms);
            B.setText(synonyms[0]);
        } 
        else            
            B.setText("No synyonyms!");
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

如果有帮助，我收到的最后几个错误日志是：

```
>04-20 22:25:08.239: E/ActivityThread(730):     at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
04-20 22:25:08.239: E/ActivityThread(730):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
04-20 22:25:08.239: E/ActivityThread(730):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
04-20 22:25:08.239: E/ActivityThread(730):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
04-20 22:25:08.239: E/ActivityThread(730):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-20 22:25:08.239: E/ActivityThread(730):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-20 22:25:08.239: E/ActivityThread(730):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-20 22:25:08.239: E/ActivityThread(730):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-20 22:25:08.239: E/ActivityThread(730):  at java.lang.Thread.run(Thread.java:856)
04-20 22:25:08.319: E/StrictMode(730): null
04-20 22:25:08.319: E/StrictMode(730): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cea428 that was originally bound here
04-20 22:25:08.319: E/StrictMode(730):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
04-20 22:25:08.319: E/StrictMode(730):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
04-20 22:25:08.319: E/StrictMode(730):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
04-20 22:25:08.319: E/StrictMode(730):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
04-20 22:25:08.319: E/StrictMode(730):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
04-20 22:25:08.319: E/StrictMode(730):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
04-20 22:25:08.319: E/StrictMode(730):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
04-20 22:25:08.319: E/StrictMode(730):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
04-20 22:25:08.319: E/StrictMode(730):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
04-20 22:25:08.319: E/StrictMode(730):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
04-20 22:25:08.319: E/StrictMode(730):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
04-20 22:25:08.319: E/StrictMode(730):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
04-20 22:25:08.319: E/StrictMode(730):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-20 22:25:08.319: E/StrictMode(730):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-20 22:25:08.319: E/StrictMode(730):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-20 22:25:08.319: E/StrictMode(730):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-20 22:25:08.319: E/StrictMode(730):  at java.lang.Thread.run(Thread.java:856) 
```

# android - Android：从服务修改文本视图

> ID：16134629
> 
> 赞同：0
> 
> 时间：2013-04-21T18:22:04.200
> 
> 标签：android, android-service

在我的项目中，我有一个扩展 VpnService 类的类。由于我无法调用 findViewById() 方法，如何从此类修改布局中的文本视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:35:43.393

你不能。你以某种方式告诉活动，如果它仍然存在，更新`TextView`. 可能的方法包括：

*   使用`LocalBroadcastManager`
*   使用像[Otto这样的事件总线](http://square.github.io/otto/)
*   使用`Messenger`绑定到`Handler`
*   等等。

请注意，通常不能保证此活动存在，除非服务仅在活动处于前台时运行。

# macos - 如何在打开命令中或文件名

> ID：16134631
> 
> 赞同：-1
> 
> 时间：2013-04-21T18:22:09.043
> 
> 标签：macos, perl, file-io

我想在文件打开命令中传递两个文件名，这样如果一个文件不存在，它应该打开另一个文件。有没有办法在一个打开的命令中做到这一点？下面是我的代码：

```
open FILE, "/Library/xampp/Documents/$var" 
```

我想传递 $var 使其具有 xxx | /图书馆/文档/xyz。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:26:34.420

这有帮助吗？

```
my $fh;

open $fh, '<', '/Library/xampp/Documents/xxx'
    or open $fh, '<', '/Library/Documents/xyz'
    or die "Unable to open files for reading: $!"; 
```

也许

```
use List::Util 'first';

my @files = qw( /Library/xampp/Documents/xxx /Library/Documents/xyz );

open my $fh, '<', first { -f } @files or die $!; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:26:43.730

如果我正确理解了这个问题，是的，您可以提供`$var`为“../../../any/arbitrary/file”并打开一个不在“/Library/xampp/Documents”下的文件（尽管如果图书馆， xampp 或 Documents 是链接而不是文件，您可能需要不同数量的 ..s）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T20:15:34.780

您正在尝试查找给定绝对路径或相对于当前工作目录以外的目录的路径的文件的路径。

```
use Path::Class qw( dir file );

my $file_qfn = 'xxx';                        # /Library/xampp/Documents/xxx
   -or-
my $file_qfn = '/Library/Documents/xyz';     # /Library/Documents/xyz
   -or-
my $file_qfn = '../Docs/zzz';                # /Library/Docs/xampp/zzz

my $abs_file_qfn = file($file_qfn)->absolute(dir('/Library/xampp/Documents'));

open(my $fh, '<', $abs_file_qfn)
   or die("Can't open \"$abs_file_qfn\": $!\n"); 
```

你也`chdir`可以`/Library/xampp/Documents`，但我不喜欢那样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T19:45:31.010

首先检查文件是否存在，如果它没有选择不同的路径。然后打开那条路

```
my $path= -e $ARGV[0] ? $ARGV[0] : "default"

open(my $fh, $path) || die "$path $!" 
```

# css - 我需要使用“Math.floor(Math.random()”从我的 css 页面中随机选择一种样式。

> ID：16134632
> 
> 赞同：0
> 
> 时间：2013-04-21T18:22:12.737
> 
> 标签：css, random

我在一个基本的 HTML/Javascript 类中，我无法弄清楚如何“修改以下 JavaScript，以便它在每次调用时随机选择一个样式类”。下面的代码有效，但不是随机的。任何的意见都将会有帮助。先感谢您！

```
<html>

<head>
<title>HTML and JavaScript</title>
<link href="capstone.css" rel="stylesheet" type="text/css"></link>
<script>
var index = 0;

function stylize()
{
  index++;
  if (index > 7) index =1;
  var s = "myStyle" + index;
  var e = document.getElementById("MessageText");
  e.className = s;
  setTimeout("stylize()", 1500);
  return;
}
 </script>
 </head>

 <body onLoad="stylize()">
  <table align="center" border="1" bordercolor="black">
   <tr>
    <td align="center">
     <font size="3"><b>STYLE CLASS VIEWER</b></font>
    </td>
   </tr>
   <tr>
    <td align="center" height="100" width="400">
     <div id="MessageText" class="myStyle1">
      Hello World Wide Web!
     <div>
    </td>
   </tr>
  </table>
 </body>

</html> 
```

我的 CSS 页面是：.....

```
.myStyle1 {font-family:Impact; color:black; font-size:100}
.myStyle2 {font-family:Georgia; color:black; font-size:18}
.myStyl31 {font-family:Tahoma; color:black; font-size:24}
.myStyle4 {font-family:Verdana; color:black; font-size:48}
.myStyle5 {font-family:Impact; color:red; font-size:30}
.myStyle6 {font-family:Marlett; color:green; font-size:65}
.myStyle7 {font-family:Arial; color:blue; font-size:46}
.myStyle8 {font-family:Courier Sans MS Bold; color:blue; font-size:60}
.myStyle9 {font-family:Impact; color:blue; font-size:35}
.myStyle10 {font-family:Arial Italic; color:blue; font-size:10}
.myStyle11 {font-family:Times New Roman; color:blue; font-size:50}
.myStyle12 {font-family:Tahoma; color:blue; font-size:38}
.myStyle13 {font-family:Verdana; color:white; font-size:30}
.myStyle14 {font-family:Marlett; color:blue; font-size:70}
.myStyle15 {font-family:Impact; color:blue; font-size:24}
.myStyle16 {font-family:Georgia; color:blue; font-size:24}
.myStyle17 {font-family:Impact; color:blue; font-size:35}
.myStyle18 {font-family:Georgia; color:black; font-size:12;}
.myStyle19 {font-family:Arial; color:blue; font-size:20;}
.myStyle20 {font-family:Tahoma; color:blue; font-size:55} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:24:55.180

如果您的代码正常工作，您所需要的只是其中的随机函数：

```
function getRandomInt (min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

做就是了：

```
index = getRandomInt(1, 20); 
```

现在你会得到一个随机数。

# json - 如何使用 jsonpath 列出对象键名？

> ID：16134635
> 
> 赞同：23
> 
> 时间：2013-04-21T18:22:40.287
> 
> 标签：json, node.js, jsonpath

我正在使用带有[jsonpath的](http://nodejs.org/)[nodejs](http://npmjs.org/package/JSONPath)。我有这个json结构：

```
{
  things:{
    books: [
      {name: "book1"},
      {name: "book2"},
      {name: "book3"},
      {name: "book4"},
    ],
    movies: [
      {name: "movie1"},
      {name: "movie2"},
      {name: "movie3"},
      {name: "movie4"},
    ]
  }
} 
```

我想知道返回带有`things`对象键名的数组的 jsonpath 表达式。那将是：

```
["books","movies"] 
```

现在，我正在这样做：

```
Object.keys(jsonpath.eval(jsonStructure,"$.things").pop()); 
```

但我不觉得它很优雅......当我只需要键名时，我不需要获取整个结构的副本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-11-20T17:11:08.247

jsonPath 有新的更新 jsonpath-plus jsonpath-plus 扩展了原始规范，添加了一些额外的操作符，并明确了一些原始规范没有说明的行为。

`^`获取匹配项的父项 `~`获取匹配项的属性名称（作为数组）

因此要获得正确的输出，请使用此查询`things.*~` ，您也可以在此处尝试[https://jsonpath.com/](https://jsonpath.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-19T23:44:02.173

我不相信有比你自己更好的解决方案：

```
Object.keys(jsonpath.eval(jsonStructure,"$.things").pop()); 
```

我认为这里的主要误解是您不必担心这个片段“获取整个结构的副本”，因为您没有复制整个结构。您已经将整个对象加载到内存中，jsonpath 不会创建新副本，它只是返回对现有对象的引用，即：

```
jsonpath.eval(jsonStructure,"$.things").pop() === jsonStructure.things //true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-18T02:01:27.603

Not exactly what you are asking for, but might still be relevant.

We use [object-scan](https://github.com/blackflux/object-scan) for this kind of task as it is much better suited for data processing and analyzing. Once you wrap your head around it that is (:

Anyways, here is how you could answer your question if you are willing to add another dependency

```
// const objectScan = require('object-scan');

const data = { things: { books: [ { name: 'book1' }, { name: 'book2' }, { name: 'book3' }, { name: 'book4' } ], movies: [ { name: 'movie1' }, { name: 'movie2' }, { name: 'movie3' }, { name: 'movie4' } ] } };

console.log(objectScan(['things.*'], { rtn: 'property' })(data));
// => [ 'movies', 'books' ]
```

```
.as-console-wrapper {max-height: 100% !important; top: 0}
```

```
<script src="https://bundle.run/object-scan@13.7.1"></script>
```

*Disclaimer*: I'm the author of [object-scan](https://www.npmjs.com/package/object-scan)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-01-15T15:27:42.470

您用于 give 的语法是错误的，无法在 json 路径中使用**"$.*~"** ex 获取键。 **输入**：{“firstName”：“John”、“lastName”：“doe”、“age”：26 } **输出**：[“firstName”、“lastName”、“age”]

# android - 创建发送广播的快捷方式

> ID：16134636
> 
> 赞同：2
> 
> 时间：2013-04-21T18:22:42.493
> 
> 标签：android, android-intent, android-broadcast

我的应用程序可以选择创建主屏幕快捷方式。

我创建这样的快捷方式：

```
Intent intent = new Intent();
intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT,
new Intent(ShortcutCreateActivity.this, ShortcutCreateActivity.class).putExtra(EXTRA_PROFILE_ID, profileId).putExtra(EXTRA_PROFILE_ACTION, item));
intent.putExtra(Intent.EXTRA_SHORTCUT_NAME, profileTitle);
intent.putExtra(Intent.EXTRA_SHORTCUT_ICON, bitmap); 
```

这按预期工作......当用户单击快捷方式时，将启动 ShortcutCreateActivity 并且我会做我需要的事情。

然而！我想避免打开活动的需要。相反，我想创建一个发送广播的快捷方式。

我尝试将意图替换为：

```
intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT,
    new Intent(INTENT_ACTION_THAT_I_WANT) 
```

但是当我单击快捷方式时，它会显示一个 Toast“未安装应用程序”。

是否可以创建发送广播而不是启动活动的主屏幕快捷方式？

（开始活动并快速完成它不是一种选择）。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T18:33:42.933

> 是否可以创建发送广播而不是启动活动的主屏幕快捷方式？

严格来说，没有。

但是，您可以让它指向一个使用 设置的活动，`Theme.NoDisplay`在该活动中，您可以在不调用的情况下`onCreate()`发送广播和`finish()`调用`setContentView()`。从视觉上看，这与让快捷方式发送广播本身没有区别。

# excel - 在 X++ 中快速访问 Excel 数据

> ID：16134638
> 
> 赞同：1
> 
> 时间：2013-04-21T18:22:49.857
> 
> 标签：excel, office-interop, axapta, x++

有人可以给我一个线索，我怎样才能快速访问 Excel 数据。目前，excel 包含超过 20 万条记录，当我从 X++ 代码中检索时，检索所有记录需要花费大量时间。

以下是我用来检索数据的类。1 - SysExcelApplication、SysExcelWorksheet 和 SysExcelCells。

我正在使用下面的代码来检索单元格。

```
excelApp.workbooks().open(filename);
excelWorksheet  = excelApp.worksheets().itemFromName(itemName);
excelCells      = excelWorkSheet.cells();
///pseudo code
loop
    excelCells.item(rowcounter, column1);
    similar for all columns;
end of loop 
```

如果需要在这里设置任何特殊属性，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T17:37:36.860

**如果您可以使用CSV 文件**，整体性能会好很多（巨大！）。如果您被迫使用 Excel 文件，您可以简单直接地**将这个 excel**文件转换为 csv 文件，然后读取 csv 文件。**如果您不能那样工作，您可以通过ODBC**（使用查询字符串，如连接到数据库）读取 excel 文件，这将比 Office API 执行得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:49:06.583

首先，读取 Excel 文件（和任何其他文件）需要一段时间才能读取 20 万条记录。

[您可以使用ExcelIo](http://www.axaptapedia.com/index.php?title=ExcelIo)读取 Excel 文件，但没有性能保证 :)

正如我所看到的，您有 3 个选项（首先列出了最佳性能）：

1.  将您的 Excel 文件转换为 CSV 文件，然后使用[CommaIo](http://msdn.microsoft.com/da-dk/library/commaio.aspx)读取。
2.  使用 C# 读取 Excel 文件，然后调用 X++
3.  接受事实并花时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:35:45.437

使用 CSV，它更快，下面是代码示例：

```
 /* Excel Import*/
#AviFiles

#define.CurrentVersion(1)
#define.Version1(1)
#localmacro.CurrentList
#endmacro

FilenameOpen    filename;

CommaIo         file;
Container       con;

/* File Open Dialog */
Dialog  dialog;
dialogField dialogFilename;
dialogField dialogSiteID;
dialogField dialogLocationId;
DialogButton dialogButton;
InventSite objInventSite;
InventLocation objInventLocation;
InventSiteID objInventSiteID;
InventLocationId objInventLocationID;
int row;
str sSite;
NoYes IsCountingFound;
int iQty;
Counter insertCounter;
Price itemPrice;
ItemId _itemid;
EcoResItemColorName _inventColorID;
EcoResItemSizeName _inventSizeID;

dialog              =   new Dialog("Please select file");
dialogSiteID        =   dialog.addField(extendedTypeStr(InventSiteId), objInventSiteId);
dialogLocationId    =   dialog.addField(extendedTypeStr(InventLocationId), objInventLocationId);
dialogFilename      =   dialog.addField(extendedTypeStr(FilenameOpen));

dialog.filenameLookupFilter(["@SYS100852","*.csv"]);
dialog.filenameLookupTitle("Please select file");
dialog.caption("Please select file");
dialogFilename.value(filename);

if(!dialog.run())
return;

objInventSiteID = dialogSiteID.value();
objInventLocationID = dialogLocationId.value();

/*----- validating warehouse*/
while
select maxof(InventSiteId) from objInventLocation where objInventLocation.InventLocationId == objInventLocationId
{
    If(objInventLocation.InventSiteID != objInventSiteID)
    {
        warning("Warehouse not belongs to site. Please select valid warehouse." ,"Counting lines import utility");
        return;
    }
}

filename  =   dialogFilename.value();
file = new commaIo(filename,'r');
file.inFieldDelimiter(',');

try
{

    if (file)
    {
        ttsbegin;
        while(file.status() == IO_Status::OK)
        {

           con = file.read();

            if (con)
            {
                row ++;

                if(row == 1)
                {
                    if(
                       strUpr(strLtrim(strRtrim( conpeek(con,1) ))) != "ITEM"
                    || strUpr(strLtrim(strRtrim( conpeek(con,2) ))) != "COLOR"
                    || strUpr(strLtrim(strRtrim( conpeek(con,3) ))) != "SIZE"
                    || strUpr(strLtrim(strRtrim( conpeek(con,4) ))) != "PRICE"
                    )
                    {
                        error("Imported file is not according to given format.");
                        ttsabort;
                        return;
                    }
                }
                else
                {

                    IsCountingFound = NoYes::No;
                    _itemid = "";
                    _inventColorID = "";
                    _inventSizeID = "";

                    _itemid = strLtrim(strRtrim(conpeek(con,1) ));
                    _inventColorID = strLtrim(strRtrim(conpeek(con,2) ));
                    _inventSizeID = strLtrim(strRtrim(conpeek(con,3) ));
                    itemPrice = any2real(strLtrim(strRtrim(conpeek(con,4) )));

                }
           }
         }

         if(row <= 1)
         {
            ttsabort;
            warning("No data found in excel file");
         }
         else
         {
            ttscommit;

         }
    }
 }
catch
{
    ttsabort;
    Error('Upload Failed');
} 
```

# android - 如何将网页保存在sd卡中？

> ID：16134639
> 
> 赞同：0
> 
> 时间：2013-04-21T18:22:49.943
> 
> 标签：android, webview

我想将 webview 内容保存在 sd 卡中。我试图保存喜欢`capturePicture`并将其保存在 sd 中，但对于一些大型网站，它只会杀死我的应用程序，因为堆太高。我听说，保存像 .pdf 文件这样的网站，但我找不到任何好的建议。

实际上，我想让它像在 pc 中一样发生。例如，firefox 创建带有图像的 .htm 文件和文件夹。我怎样才能轻松做到这一点，然后在 webview 中获取带有图像的 .htm 文件？

# jquery - jQuery .on 点击 第二次不起作用

> ID：16134640
> 
> 赞同：1
> 
> 时间：2013-04-21T18:23:10.220
> 
> 标签：jquery, jquery-mobile

```
var elms = $('.selector', list);
elms.off();
elms.on('vclick', function(event, ui) {
        event.preventDefault();
        var elm = $(this);
        customEventHandler(elm, elm.attr("id"));
}); 
```

如果我将点击事件绑定`$('.selector', list).on('click',...)`到列表中的元素，它工作正常。

如果我在列表中添加元素`.append()`并再次调用，`$('.selector', list).on('click',...)`则不会触发点击。即使我使用`.off()`before 删除旧事件。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T18:33:50.280

试试这种方式： -`[Fiddle](http://jsfiddle.net/W3pnJ/)`

```
$('.container').on('click', '.selector', function(event, ui) {
        event.preventDefault();
        var elm = $(this);
        alert(elm.index());
}); 
```

您可以使用方法来实现这一点`delegated events`。

> **委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件**。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，该元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。在加载任何其他 HTML 之前，文档元素在文档的头部是可用的，因此在此处附加事件是安全的，而无需等待文档准备好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:30:20.653

终于找到问题了，只好在调用list.trigger("create");后绑定事件 而不是以前，也许这对任何人都有帮助......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T18:34:42.750

替换`c.onclick`为“点击”。使用正确的格式。

```
$('.container').on('click', '.selector', function(event, ui) {
    event.preventDefault();
    var elm = $(this);
    alert(elm.index());
}); 
```

# image - 如何保存透明背景的图形

> ID：16134642
> 
> 赞同：15
> 
> 时间：2013-04-21T18:23:16.587
> 
> 标签：image, matlab, visualization

我在 Matlab 中有一个情节，并通过以下方式将背景设置为透明：

```
set(gcf, 'Color', 'None');
set(gca, 'Color', 'None'); 
```

当我尝试保存图像（从查看器）时，我保存为“.png”，但它保存为白色背景。如何使用透明背景保存它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T18:48:05.433

令人失望的是，MATLAB 的默认值`saveas`和`print`命令不能很好地处理透明的事情。您必须使用一些背景保存它，然后通过`imread`/`imwrite`或其他工具对其进行转换。

有一些工具可能会有所帮助：

*   出口无花果[http://www.mathworks.com/matlabcentral/fileexchange/23629](http://www.mathworks.com/matlabcentral/fileexchange/23629)
*   svg 导出[http://www.mathworks.com/matlabcentral/fileexchange/7401-scalable-vector-graphics-svg-export-of-figures](http://www.mathworks.com/matlabcentral/fileexchange/7401-scalable-vector-graphics-svg-export-of-figures)

我更喜欢矢量图形，所以在需要透明度时使用 svg 导出。如果确实有位图，请使用`imwrite(bitmapData, 'a.png', 'png', 'transparency', backgroundColor)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-26T21:14:38.003

自 MATLAB 2014b 发布以来，情况发生了变化。新实现的图形系统（所谓的 HG2，用于 Handle Graphics 版本 2）在透明度方面做得更好。

现在它至少可以正确地将透明度保存到 SVG！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-23T07:49:52.483

所以我仍然想要一些简单的东西，不需要我安装任何其他东西（不允许使用公司电脑：/）。我偶然发现了[这个链接](https://groups.google.com/forum/#!topic/latex-guide/MYMq_NjbTYc)，说：

> 您所要做的就是以下

1）在matlab文件中添加命令以使用透明背景格式化您的图形

```
 set(gcf, 'color', 'none');
 set(gca, 'color', 'none'); 
```

并以eps格式保存或导出生成的图形。（比如 Bspline.eps）

2) 在记事本中打开 Bspline.eps

3）看第一行。例如`%!PS-Adobe-3.0 EPSF-3.0`. 最后一个数字 3.0 表示 Postscript 级别。对于第 3 级，搜索字符串`rf`。您会在这样的一行中找到（四个数字后跟`rf`）

0 0 3025 2593 rf %使用 % 注释该行。

（对于 2 级搜索字符串`pr`而不是`rf`）

保存文件。

现在您可以使用 eps 文件，也可以将其转换为 pdf 然后使用。无论如何它都会有透明的背景

**额外的**

对我来说，这是两条线`re`和两条线，尽管我`%!PS-Adobe-3.0 EPSF-3.0`紧随其后。但结果是`Figure`现在是透明的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-23T14:21:11.930

作为[Memming](https://stackoverflow.com/a/16134889/1536976)答案的补充。Matlab 2020`exportgraphics`支持透明背景，但仅适用于矢量化输出（不适用于渲染内容）。对于以透明度导出渲染数据，您仍然不能以透明度保存它。但是，您可以通过保存具有两种不同背景颜色（例如白色和黑色）的渲染数据，然后加载两个临时图像，求解一个简单的方程系统，从而检索透明度和原始颜色数据，然后将其全部保存到一个 RGBA png 文件。

关键是要意识到Matlab保存的渲染输出是透明度乘以图像数据+（1-透明度）乘以背景颜色。从单个输出中无法恢复图像数据和透明度，但可以从具有不同背景颜色的两个输出中恢复。如果 Matlab 在渲染输出中支持透明背景颜色会更容易，但这种方式也可以。

示例脚本：

```
% create example data
g = -10:0.1:10;
[x, y, z] = ndgrid(g, g, g);
v = (x.^2 + y.^2 - 10).^2 + (z.^2 - 5).^2;

% render in 3D with transparency
fig = figure();

% one surface fully opaque
fv = isosurface(x, y, z, v, 20);
p = patch(fv, 'FaceColor', [1, 0, 0], 'FaceAlpha', 1, 'EdgeColor', 'none');

% another surface with transparency
fv = isosurface(x, y, z, v, 80);
p = patch(fv, 'FaceColor', [0, 1, 1], 'FaceAlpha', 0.5, 'EdgeColor', 'none');

fig.Children.Color = 'none'; % transparent background of figure axis
view([40 40]);
pbaspect([1,1,1]);
camlight;
lighting('gouraud');

% save figure in different ways

% save as vector format, doesn't produce nice output see for example https://stackoverflow.com/questions/61631063
exportgraphics(fig, 'test.pdf', 'ContentType', 'vector', 'BackGroundColor', 'none');
% prints warning: Warning: Vectorized content might take a long time to create,
% or it might contain unexpected results. Set 'ContentType' to 'image' for better performance.

% save as rendered output with transparent background not work
exportgraphics(fig, 'test.png', 'ContentType', 'image', 'BackGroundColor', 'none');
% prints warning: Warning: Background transparency is not supported; using white instead.

% now our solution, export with two background colors
exportgraphics(fig, 'test1.png', 'ContentType', 'image', 'BackgroundColor', 'k'); % black background
exportgraphics(fig, 'test2.png', 'ContentType', 'image', 'BackgroundColor', 'w'); % white background

% load exported images back in and scale to [0,1]
u = imread('test1.png');
u = double(u) / 255;
v = imread('test2.png');
v = double(v) / 255;

% recover transparency as a
a = 1 - v + u;
a = mean(a, 3);
a = max(0, min(1, a));
m = a > eps;

% recover rgb
c = zeros(size(u));
for i = 1 : 3
    ui = u(:, :, i);
    ci = c(:, :, i);
    ci(m) = ui(m) ./ a(m);
    c(:, :, i) = ci;
end
c = max(0, min(1, c));

% store again
imwrite(uint8(c*255), 'test.transparent.png', 'Alpha', a);

% temporary files test1.png and test2.png can now be deleted 
```

这是两个具有白色和黑色背景的临时图像。 [![在此处输入图像描述](https://i.stack.imgur.com/dnKZbm.png)](https://i.stack.imgur.com/dnKZbm.png) [![在此处输入图像描述](https://i.stack.imgur.com/Fy0C0m.png)](https://i.stack.imgur.com/Fy0C0m.png)

这是生成的透明图像。要查看该图像，请保存图像并使用合适的查看器查看它。

[![在此处输入图像描述](https://i.stack.imgur.com/1rmdL.png)](https://i.stack.imgur.com/1rmdL.png)

最后一条评论：对于高质量的生产图形，您可能希望关闭（将 Visible 属性设置为关闭）所有具有透明度的渲染部件并将轴和标签保存为矢量化输出，然后反转可见性，即关闭所有轴和标签并且只显示具有透明度的渲染部分并使用两种不同的背景颜色保存它们，然后重建透明度并覆盖矢量化轴和标签以及具有透明度的渲染部分并将它们组合起来。从 Matlab 2020b 开始，Matlab 无法自行完成此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-30T12:34:02.430

可以这样操作，Matlab2020a或更高版本有效！

```
x = 0:.1:2*pi;
y = sin(x);

figure;
plot(x,y,'LineWidth',4);

% save to transparented image
set(gcf, 'color', 'none');    
set(gca, 'color', 'none');
exportgraphics(gcf,'transparent.emf',...   % since R2020a
    'ContentType','vector',...
    'BackgroundColor','none') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-18T11:09:34.127

根据 Matlab 工作人员的说法 exportgraphics(gca,'plot.png','BackgroundColor','none') 和类似的东西应该在 2020a 版本中工作，但是当你尝试时，在大多数情况下你会得到美丽的错误：

警告：不支持背景透明度；改用白色。

我也收到警告：当设置为“矢量”以进行图像输出时，“ContentType”参数将被忽略。尝试兴崔代码。

# python - oAuth 验证将 Twitter API 与 Python 一起使用

> ID：16134645
> 
> 赞同：0
> 
> 时间：2013-04-21T18:23:28.573
> 
> 标签：python, oauth, twitter, twitter-oauth

我正在尝试按照此处所述获取 Twitter 的 oauth request_token，并调用“oauth/request_token”：[https ://dev.twitter.com/docs/auth/implementing-sign-twitter](https://dev.twitter.com/docs/auth/implementing-sign-twitter)

我在这里使用 encode_params 函数生成参数：[https ://github.com/sixohsix/twitter/blob/master/twitter/oauth.py](https://github.com/sixohsix/twitter/blob/master/twitter/oauth.py)

然后我用他们的键“授权”将返回的字符串包装在一个字典中，并将其转储到我正在使用 python 请求库发出的 Post 请求的 Headers 中。这是我用来创建请求的两行代码。

```
ep = "OAuth " + auth.encode_params(baseUrl, method, params)
response = requests.post(baseUrl+method, headers={ "Authorization" : ep}) 
```

最终的标题看起来像这样（修改了consumer_key）：

```
{'Accept': '*/*',
 'Accept-Encoding': 'gzip, deflate, compress',
 'Authorization': 'OAuth oauth_callback=http%253A%252F%252Fec2-54-244-189-248.us-west-2.compute.amazonaws.com%252Fct%252Ftwitter_login_handler%252F&oauth_consumer_key=xxx&oauth_nonce=14937468581358710045&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1366568033&oauth_version=1.0&oauth_signature=kiYucZzPY%2FXy2WyJliJ6YcggVzQ%3D',
 'Content-Length': '0',
 'User-Agent': 'python-requests/1.2.0 CPython/2.7.3 Linux/3.5.0-21-generic'} 
```

但是，我仍然收到 401 响应，上面写着：“无法验证 oauth 签名和令牌”

知道我做错了什么吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:30:46.703

我无法谈论您引用的脚本，但如果您愿意尝试另一个库作为[rauth](https://github.com/litl/rauth)的作者，我可以推荐它。这是[一个有效的 Twitter 示例](https://github.com/litl/rauth/blob/master/examples/twitter-timeline-cli.py)。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T20:04:06.740

我最终使用了[python-oauth2](https://github.com/simplegeo/python-oauth2)。他们的说明有点过时了，所以我更新了他们并提交了一个拉取请求。截至目前，它尚未被接受，但这里有一个指向带有更新说明的[分叉回购的链接。](https://github.com/mkaziz/python-oauth2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T16:45:30.263

Hopefully this helps someone else... From the code referenced by maxcountryman - it has a comment that I had not found elsewhere till then :

`# Get a real consumer key & secret from https://dev.twitter.com/apps/new`

That helped me progress a lot... Cheers, Ian .

# xslt - 如何返回没有子节点文本的节点文本

> ID：16134646
> 
> 赞同：4
> 
> 时间：2013-04-21T18:23:40.240
> 
> 标签：xslt, return

我有像这样的xml：

```
<item id="1">
        <items>
            <item id="2">Text2</item>
            <item id="3">Text3</item>
        </items>Text1
</item> 
```

如何返回`<item id="1">`（'Text1'）的文本？ `<xsl:value-of select="item/text()"/>`什么都不返回。

我的 XSLT 是：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="w3.org/1999/XSL/Transform">

  <xsl:template match="/">
    <html>
      <body>
         <xsl:apply-templates select="item"/>
     </body>
    </html>
  </xsl:template>

  <xsl:template match="item">
     <xsl:value-of select="text()"/>
  </xsl:template>
</xsl:stylesheet> 
```

我不知道还要输入什么来提交我的编辑

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T23:13:40.197

> 如何返回`<item id="1">`（'Text1'）的文本？`<xsl:value-of select="item/text()"/>`什么都不返回。

该`item`元素有多个文本节点子节点，其中第一个恰好是全空白节点——这就是你得到“无”的原因。

测试节点的字符串值是否不是全空白的一种方法是使用该`normalize-space()`函数。

**在单个 Xpath 表达式中，您需要这样**：

```
/*/text()[normalize-space()][1] 
```

**这是一个完整的转换，其结果是所需的文本节点：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <xsl:copy-of select="text()[normalize-space()][1]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<item id="1">
        <items>
            <item id="2">Text2</item>
            <item id="3">Text3</item>
        </items>Text1
</item> 
```

**产生了想要的正确结果：**

```
Text1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T19:04:48.830

这通常应该有效：

```
<xsl:apply-templates select="item/text()" /> 
```

合并到您的 XSLT 中：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:key name="item_key" match="item" use="."/>
  <xsl:strip-space elements="*" />

  <xsl:template match="/">
    <html>
      <body>
        <ul>
          <xsl:apply-templates select="item"/>
        </ul>
      </body>
    </html>
  </xsl:template>
  <xsl:template match="item">
    <li>
      <xsl:apply-templates select="text()"/>
    </li>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，结果是：

```
<html>
  <body>
    <ul>
      <li>Text1
</li>
    </ul>
  </body>
</html> 
```

或者，这也应该有效：

```
<xsl:copy-of select="item/text()" /> 
```

# php - 我们如何在 mongodb 的子数组中删除一个项目？

> ID：16134649
> 
> 赞同：0
> 
> 时间：2013-04-21T18:24:18.140
> 
> 标签：php, mongodb

我有一个结构如下的用户文档：

```
{
"_id" : ObjectId("5173b10fd0aa9af00d06395c"),
"customer_id" : 1,
"customer_fullname" : "Douglas E. Kelly",
"customer_email" : "1@1.com",
"customer_cityid" : "1",
"customer_selections" : [15, 952, 17347, 343102, 20380, 51757, 235961, 119824, 134011,   168251, 297596, 175792, 196010, 210349, 226945, 250102, 274064, 328834, 354893, 472868,  555878]
} 
```

所以我想删除“客户选择”中的一个数字/一个项目。我们应该怎么做？

**更新：** 我正在使用这个查询。但它不会删除数字

```
 $response=$collection->update(array('customer_id' =>1), array('$pull' => array('customer_selections'=>$selectedcompanyid))); 
```

var_dump($response);

```
 array(5) { ["updatedExisting"]=> bool(true) ["n"]=> int(1) ["connectionId"]=> int(3) ["err"]=> NULL ["ok"]=> float(1) } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:27:22.613

通过使用 $pull

[http://docs.mongodb.org/manual/reference/operator/pull/](http://docs.mongodb.org/manual/reference/operator/pull/)

```
db.yourColl.update( { id: ObjectId("5173b10fd0aa9af00d06395c") }, { $pull: { customer_selections: 952 } } ) 
```

# c++ - 使用变量创建字符串

> ID：16134650
> 
> 赞同：0
> 
> 时间：2013-04-21T18:24:27.710
> 
> 标签：c++, string

我想为我的游戏制作一个输出字符串。这涉及获取对象 ID 以及能级。有没有办法把它变成一个字符串

```
string Ouput = objects[x]->getIdentifier() + "Had the greater energy -> object" + objects[i]->getIdentifier() + "was deleted" + endl; 
```

谢谢

JG

编辑： getIdentifier() 的返回是一个字符。它的排序，所以 A,B...Z

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:31:56.660

不要`+`到`endl`一个字符串。如果您想要换行符，请`'\n'`改用。

```
#include <string>
using namespace std;

...

string Ouput = objects[x]->getIdentifier() + .... + "was deleted\n";
                                                                ^^ 
```

如果返回类型`getIdentifier()`是一个数字，你可以使用[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)它来转换它。

```
string Ouput = to_string(objects[x]->getIdentifier()) + .... + "was deleted\n";
               ^^^^^^^^^ 
```

如果是，`char`您可以使用以下方式：

```
string Ouput = string(1, objects[x]->getIdentifier()) + .... + "was deleted\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:36:51.457

如果您希望标识符同时接受字符串和 int，请通过函数将其传入。你可以说无效

```
 void  getIdentifier(int id, string description)
{
cout << "What is the id\n";
cin >> id;

cout << "What is the description\n";
cin >> description;
} 
```

然后 cout 他们两个。

我希望这有帮助。

# git - Git：提交部分更改

> ID：16134656
> 
> 赞同：25
> 
> 时间：2013-04-21T18:24:54.937
> 
> 标签：git

Stack Overflow 上存在多个问题，解决了仅从文件中暂存和提交部分的问题。但是，我无法让它工作。

*   [如何在 git 中只提交文件的一部分](https://stackoverflow.com/q/1085162/95592)

假设我们想在 php 中实现一个虚拟数学类（语言无关紧要），使用一些基本方法，如：`add`、、和`subtract``multiply``divide.`

让我们从类定义开始：

```
<?php
    class Math {
    }
?> 
```

现在：

```
$ git add math.php
$ git commit -m "Create Math class." 
```

在下一步中，我们实现了这两种方法`add`和`subtract`四种方法：

```
<?php
    class Math {
        public function add($a, $b) {
            return $a + $b;
        }

        public function subtract($a, $b) {
            return $a - $b;
        }
    }
?> 
```

但是现在我们要在单独的提交中提交the`add`和方法的实现。`subtract`

这可能吗？

**我试过的**

`$ git add -p`

出现以下内容：

![在此处输入图像描述](https://i.stack.imgur.com/TNtNH.jpg)

我很想把大块分成更小的块，所以我按`s`，然后出现以下内容：

![在此处输入图像描述](https://i.stack.imgur.com/QJV1S.jpg)

似乎 git 没有把它分成更小的块。

现在让我们尝试手动编辑当前的块。所以我按：`e`。

我的默认文本编辑器（崇高文本）打开，在这里我可以编辑大块：

![在此处输入图像描述](https://i.stack.imgur.com/SCVeM.jpg)

我尝试简单地删除第 8,9,10,11 行 - 因为我只想暂存该`add`函数。我保存，关闭编辑器，但 git 说：

`Your edited hunk does not apply. Edit again (saying "no" discards!) [y/n]?`

我真的是`git add -p`交互式舞台的新手，所以也许这是我做错了，或者根本不可能是我想要的，真的希望一些更有经验的 git 用户有一些说明，也许对我来说也是一个解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-21T18:29:16.980

你所做的正是我过去所做的，我什至在一台 UNIX 机器上重新创建了你的整个实验，它按预期工作。

我怀疑您的编辑器在保存时更改了 diff hunk 中的行尾。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-21T22:27:05.217

这感觉不像是绝对的“git方式”，因为 git 喜欢命令行，但这就是我所做的：

Git 捆绑在一起`git gui`——您可以通过运行该命令来启动它。在那里你可以选择你的未暂存文件，标记你想要提交的行，然后点击“stages lines for commit”。如果你想让它更像一个命令行工具，你可以运行`git gui citool`，它的效果是当你提交时 ui 将关闭。

![使用 git gui 进行部分暂存](https://i.stack.imgur.com/tfKNE.png)

请注意，此工具已与 git 正确集成。您无需在此 ui 中进行提交。您可以只暂存相关行，关闭它，也许做更多`git add`，然后通过命令行提交。

总的来说，我喜欢 git 命令行界面，尽管我不一定是 shell 粉丝，但我只是在一段时间后就喜欢上了它。我尝试了多个 GUI 并将它们全部扔掉，因为它们无法与 git 命令行界面竞争。但是因为`git add -p`我肯定会说这是 GUI 的任务。使用`git gui`. 复杂的历史浏览也是如此。`gitk`（也与 git 一起提供）在那里做得比`git log --graph -p`（只要你真的需要了解树并且现在不太了解历史状态）做得更好。

*笔记：*但你似乎做的一切都是正确的——我尝试了你所做的并且必须同意本杰克逊的观点。那肯定行得通。你的编辑一定搞砸了。

**最后说明**：您似乎正在使用带有标准 Windows`cmd`终端的 git 命令行。我强烈建议切换到[mintty](https://code.google.com/p/mintty/)。下载 msys 版本，将其放在您的`Program Files\Git\bin`目录中并使用`mintty -`. 这将为您提供相同的外壳，但具有更好的一切（尤其是更好的调整大小和复制粘贴）。

# jquery - if (jQuery)(函数 ($) { . . .})(jQuery); 插件格式

> ID：16134659
> 
> 赞同：2
> 
> 时间：2013-04-21T18:24:56.297
> 
> 标签：jquery, jquery-plugins

我在看一个具有格式的插件

```
if (jQuery)(function ($) { 
        -- plugin code --
})(jQuery); 
```

我明白那个

```
(function ($) { 
        -- plugin code --
})(jQuery); 
```

是确保 $ 指的是 jQuery 而不是我们函数内部的 Prototype，但是

```
if (jQuery) 
```

为我们做什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:26:06.677

该`if(jQuery)`部分只是确保在尝试执行插件代码之前已加载 jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:26:12.737

它确保 jQuery 被正确加载。另外值得一提的是，它是一个自动执行的函数，会被自动调用。

# javascript - 是否可以使用

> ID：16134665
> 
> 赞同：1
> 
> 时间：2013-04-21T18:25:18.030
> 
> 标签：javascript, href, photo, title, viewer

我正在创建一个网站，上面有我和我朋友的一些照片。为了能够快速查看这些照片，我已将 Milkbox javascript 添加到我的网站（[Milkbox Site](http://reghellin.com/milkbox/)）。您可以像这样添加照片：

```
<a href="img01.png" data-milkbox="albumsorting" title="Photo description goes here."><img src="thumbs/thumbimg01.png" /></a> 
```

在标题中，我想为照片添加下载链接。这应该是这样的：

```
<a href="img01.png" data-milkbox="albumsorting" title="<a href="img01.png">Download photo</a> | Photo description goes here."><img src="thumbs/thumbimg01.png /></a> 
```

有没有人有任何使用 Milkbox 的经验以及在描述中添加下载链接的这种方式（或另一种方式）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:31:23.317

Milbox 确实支持它，它甚至在文档中。

使用 html 实体来转换您的文本 - 在您的情况下是“<a href="img01.png">下载照片</a>`：

```
<a href="img01.png" data-milkbox="albumsorting" title="&lt;a href=&quot;img01.png&quot;&gt;Download photo&lt;/a&gt;  | Photo description goes here."><img src="thumbs/thumbimg01.png /></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:32:32.143

不可以。所有属性`alt`都只接受纯文本。

[但是，您可以使用来自 javascript 库（如bootstrap](http://twitter.github.com/bootstrap) ）的自定义工具提示来实现您的目标。

`alt`用作旧浏览器在原始浏览器不兼容时显示内容的一种方式。

例子：

```
<div alt="<div> your browser cannot display the content"> <intricate content/></div> 
```

**编辑：** Milkbox 对此提供支持。

# sql - 返回两个外国 ID 组合在 Where - Rails 子句中

> ID：16134667
> 
> 赞同：0
> 
> 时间：2013-04-21T18:25:31.137
> 
> 标签：sql, ruby-on-rails, ruby, activerecord

我怎样才能在 Rails 上做这样的事情：

```
Follow.where("user_id = ? AND forum_id = ?", current_user.id , params[:id]) 
```

我想在用户不关注论坛时显示按钮关注，并在用户已经关注时隐藏。我用谷歌搜索了 2 天，找不到任何解决方案。希望在这里我找到解决方案的方法。谢谢

# hadoop - Hadoop：连接到服务器时出错，ipc.hbaserpc：60020

> ID：16134669
> 
> 赞同：0
> 
> 时间：2013-04-21T18:25:42.353
> 
> 标签：hadoop, hbase

“连接到服务器 60020 的 ipc.hbaserpc 问题”

我使用了 Hadoop 框架，其中我有一个主设备和几个从设备。我的框架工作正常，但今天早上，我突然发现我收到了这个错误”并且 hadoop 无法正常工作。

我检查了master的ip，它没有改变。

```
**netstat -nlpt | grep 60020**
tcp6       0      0 172.17.13.29:60020      :::*                    LISTEN      2766/java 
```

> vi /etc/hosts

```
127.0.0.1       localhost
172.17.13.29    master
172.17.13.18    slave
127.0.1.1       bt.foo.org      bt

# The following lines are desirable for IPv6 capable hosts
::1     localhost ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts 
```

> vi /root/hbase/conf/regionservers

```
master
slave

~                                                                               
~                                                                               
~                                                                               
~ 
```

请指导我正确的方向，了解问题可能出在哪里。

这是我看到的完整错误消息：

```
root@master:~/hbase/bin# ./hbase shell
HBase Shell; enter 'help<RETURN>' for list of supported commands.
Type "exit<RETURN>" to leave the HBase Shell
Version 0.94.6, r1456690, Thu Mar 14 16:32:05 PDT 2013

hbase(main):001:0> get 'profile', 'pranshu'
COLUMN                CELL                                                      
13/04/22 10:05:04 INFO ipc.HBaseRPC: Problem connecting to server: master/172.17.13.29:60020
13/04/22 10:06:06 INFO ipc.HBaseRPC: Problem connecting to server: master/172.17.13.29:60020 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:44:30.367

从所有机器上的 /etc/hosts 文件中注释掉“127.0.1.1 bt.foo.org bt”行并重试。提供完整的错误日志总是更好。

# macos - 将 CC/CFLAGS/LDFLAGS 从 Makefile 传递到 ./configure 的 Tk/Tcl

> ID：16134677
> 
> 赞同：1
> 
> 时间：2013-04-21T18:26:39.077
> 
> 标签：macos, makefile, tcl, configure, tk

我正在尝试编译一个库（xcrysden，基于 Make 文件），它在编译期间执行外部依赖项的 ./configure - Tk 和 Tcl 8.5 - 并编译它们。

所以，结构大致是这样的：

主 Makefile：

```
...
cd external/src; make; 
```

外部依赖项（预）makefile（Tk）：

```
include ../Make.sys
cd /unix
./configure
make
make install 
```

Make.sys 包含在外部 makefile 中：

```
...
CFLAGS =...
CC     =... 
```

显然，configure 会生成另一个 makefile`/external/src/unix`供 Tk 使用。在 Tk 文档中是这样写的：

`If you wish to specify a particular compiler, set the CC environment variable before calling configure. You can also specify CFLAGS prior to configure and they will be used during compilation.`

但是从生成的 Makefile 中我肯定看到既没有使用定义的编译器（CC）也没有使用标志（CFLAGS）。当它在另一个make文件中设置时，它是否符合“环境变量”的条件？

我实际上在编译 Tk 时遇到问题，所以我不仅尝试传递编译器，还尝试传递链接信息 `LDFLAGS = -L/opt/local/lib -lfontconfig`。我想以一种简洁的方式进行（即仅修改依赖于 Tk 的库的 Make.sys）。但是后来我面临的问题是，我不仅不知道如何传递`LDFLAGS`给 Tk 配置，甚至`CC/CFLAGS`不知道。我不确定这是否特定于使用 ./configure 的特定库 (Tk)，或者我误解了 ./configure 的一般用法。

p/s/ 我正在使用 gnu 编译器在 OS-X 上编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:35:41.197

问题是您在其中定义的变量`../Make.sys`当前对于处理`include`;的 shell 是本地的。`configure`and在`make`子进程中运行，并且不会发现您有任何偏好。正确的做法是添加：

```
export CFLAGS CC 
```

在`include`和对 的调用之间`./configure`。

你也可以把它放在里面`Make.sys`，或者调用`configure`as `CFLAGS=$CFLAGS CC=$CC ./configure`。您可能不应该直接在`make`虽然的调用中设置值；设置编译器可能意味着还需要不同的其他标志。

# c# - 无法将类型“WebApplication4.SqlConnection”隐式转换为“System.Data.SqlClient.SqlConnection”~AddUser.aspx.cs

> ID：16134680
> 
> 赞同：0
> 
> 时间：2013-04-21T18:27:01.240
> 
> 标签：c#, asp.net, sql, sql-server

我尝试了很多类型，我不知道如何插入。

sql server 有问题吗？

请快点帮我..

```
SqlConnection con = new SqlConnection( "Data Source=localhost/SQLEXPRESS.Polaris.dbo;Initial Catalog=Polaris;Integrated Security=True;Pooling=False");

protected void Page_Load(object sender, EventArgs e)
{
        con.Open();
}

protected void Button3_Click(object sender, EventArgs e)
{
    con.Open();

    SqlDataReader rdr = null;
    //string s1 = "insert into Login values('" + TextBox1.Text + "','" + TextBox2.Text + "','" + DropDownList1.SelectedItem.Value + "'";
    SqlCommand cmd1 = new SqlCommand("insert into Login values('" + TextBox1.Text + "','" + TextBox2.Text + "','" + DropDownList1.SelectedItem.Value + "'");
    cmd1.Connection = con;
    rdr = cmd1.ExecuteReader();
    Label2.Visible = true;
    //EndEventHandler.RemoveAll();
 }

 protected void Button2_Click(object sender, EventArgs e)
 {
        Response.Redirect("WebForm1.aspx");
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:14:19.283

> 无法将类型“WebApplication4.SqlConnection”隐式转换为“System.Data.SqlClient.SqlConnection”

根据错误，您在 WebApplication4 命名空间中有名为 SqlConnection 的类。您可能错误地生成了该类。您需要先删除该类，然后添加对 `System.Data.SqlClient`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:44:34.793

以下是您可以执行的操作：

```
SqlConnection con = new SqlConnection( "Data Source=localhost/SQLEXPRESS.Polaris.dbo;Initial Catalog=Polaris;Integrated Security=True;Pooling=False");
protected void Button3_Click(object sender, EventArgs e)
{
    con.Open();
    string s1 = "insert into Login values('" + TextBox1.Text + "','" + TextBox2.Text + "','" + DropDownList1.SelectedItem.Value + "'";
    SqlCommand cmd = new SqlCommand(s1, con);
    cmd.ExecuteNonQuery();
} 
```

# android - 如何将 LatLng 实例发送到新意图

> ID：16134682
> 
> 赞同：8
> 
> 时间：2013-04-21T18:27:05.380
> 
> 标签：android, maps

我需要将 LatLng 类的实例传递给另一个意图。我该怎么做？这是代码。

```
LatLng fromPosition = new LatLng(23.4555453556, 11.145315551);
LatLng toPosition = new LatLng(12.1115145311, 99.333455333);

Intent i= new Intent(Maps.this, Routes.class);
        startActivity(i); 
```

请帮帮我。

路线类：

```
 public class Routes extends FragmentActivity {
GoogleMap mMap;
 GMapV2Direction md;
 private String provider;
 double lati;
 double longi;
 String name;
 Location location;

Document doc;
PolylineOptions rectLine;

Bundle bundle = getIntent().getParcelableExtra("bundle");
LatLng fromPosition = bundle.getParcelable("from_position");
LatLng toPosition = bundle.getParcelable("to_position");

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.maps2);

    md = new GMapV2Direction();
    mMap = ((SupportMapFragment)getSupportFragmentManager()
                    .findFragmentById(R.id.map)).getMap();

    LatLng coordinates = fromPosition;      
    mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(coordinates, 16));

    mMap.addMarker(new MarkerOptions().position(fromPosition).title("Start"));
    mMap.addMarker(new MarkerOptions().position(toPosition).title("End"));

    new ParseXML().execute();
}

private class ParseXML extends AsyncTask<Void, Void, Document> {         
  @Override
  protected Document doInBackground(Void... params) {
    doc = md.getDocument(fromPosition, toPosition,
    GMapV2Direction.MODE_DRIVING);
    ArrayList<LatLng> directionPoint = md.getDirection(doc);
    rectLine = new PolylineOptions().width(3).color(Color.RED);

    for (int i = 0; i < directionPoint.size(); i++) {
        rectLine.add(directionPoint.get(i));
    }
    return null;    
  }

   @Override
   protected void onPostExecute(Document result) {
            // TODO Auto-generated method stub
       mMap.addPolyline(rectLine);     
   }  
}
} 
```

这是我的路线课程。我不知道问题所在。帮帮我。似乎可以很好地发送捆绑包，但在接收时出现错误。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-21T18:34:27.623

使用 putParcelable 方法将 LatLng 对象附加到 Bundle：

```
Bundle args = new Bundle();
args.putParcelable("from_position", fromPosition);
args.putParcelable("to_position", toPosition); 
```

现在将其附加到您的意图：

```
i.putExtra("bundle", args); 
```

要在您的新活动中使用它：

```
Bundle bundle = getIntent().getParcelableExtra("bundle");
LatLng fromPosition = bundle.getParcelable("from_position");
LatLng toPosition = bundle.getParcelable("to_position"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-29T10:16:13.157

更简单的方法，因为 LatLng 是可包裹的：

在调用方：

```
LatLng position = new LatLng(16.099108, -22.812924); // Boa Vista
intent.putExtra("Pos", position); 
```

在接收方

```
LatLng position = getIntent().getExtras().getParcelable("Pos"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-29T06:10:25.150

我们还有另一种方法可以在活动中使用意图来获取 LatLng

```
 intent.putExtra(Constants.LOCATION, latLng);

   LatLng latLng = getIntent().getParcelableExtra(Constants.LOCATION); 
```

# c++ - qmobilityglobal.h：没有这样的文件或目录

> ID：16134683
> 
> 赞同：0
> 
> 时间：2013-04-21T18:27:15.027
> 
> 标签：c++, qt, compiler-errors, qt-mobility

我正在尝试编译 QtMobility 的样本之一 - [hapticsplayer](http://harmattan-dev.nokia.com/docs/library/html/qtmobility/hapticsplayer.html)，但我什至无法编译它，因为编译器找不到 Qt Mobility 的标头。

由于这是 Qt SDK 附带的示例之一，我假设有关项目配置/源/等的所有内容。是正确的。所以我必须在我的 Qt 安装中**缺少 Qt Mobility**，或者类似的东西。

这是Maintain Qt SDK的包管理器的截图：

![在此处输入图像描述](https://i.stack.imgur.com/zaSQe.png)

在这里我粘贴编译器错误：

```
In file included from ..\hapticsplayer\hapticsplayer.cpp:41:
..\hapticsplayer\/hapticsplayer.h:41:29: error: qmobilityglobal.h: No such file or directory
..\hapticsplayer\/hapticsplayer.h:45:31: error: qfeedbackactuator.h: No such file or directory
..\hapticsplayer\/hapticsplayer.h:46:29: error: qfeedbackeffect.h: No such file or directory
In file included from ..\hapticsplayer\hapticsplayer.cpp:41:
..\hapticsplayer\/hapticsplayer.h:53: error: expected constructor, destructor, or type conversion before 'class' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:21:03.250

我发现了问题——这是因为我选择了构建目标。

我一直在为 Symbian Anna 构建，但是当我切换到为 Symbian S60 构建时（这是我实际上想要构建的目标），项目编译成功。创建新项目时默认选择 Symbian Anna，这就是我为它而不是为 S60 构建的原因。

# c# - 游戏最小化时 RenderTarget 内容发生变化

> ID：16134684
> 
> 赞同：0
> 
> 时间：2013-04-21T18:27:14.900
> 
> 标签：c#, xna, rendertarget

所以我正在为 XNA 开发一个 GUI 库，我遇到了一个我找不到解决方案的问题。我经常使用渲染目标，这本身很烦人，但我有一个非常奇怪和具体的问题。

在我的 ProgressBar 类中，当元素经过验证并且对象大小已更改时，我正在绘制各个组件。如果对象已验证但对象大小未更改，则我使用填充的渲染目标作为纹理将最终产品绘制到缓冲区纹理（同样是渲染目标）上。现在，每当我最小化应用程序并再次使用 Tab 时，进度条的背景层都会在其上方留下条纹纹理的印记。渲染目标设置为保留内容，我确保设置了正确的渲染目标。还清除 graphicsDevice（就在“实际绘图”行下方）不会做任何事情。为什么？

所以基本上游戏会创建该区域的屏幕截图，并将其绘制到我的纹理中。我勒个去？

这是进度条的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
namespace PixLib
{
    public class ProgressBar : UIElement
    {
        private float stripeThickness = 5;
        private float stripeGapFactor = 3f;
        private float animationSpeed = 1f;
        private float at = 0;
        private RenderTarget2D stripesBg, stripes;
        private Coordinate2 lastSize;
        protected override Coordinate2 InnerArea
        {
            get { return Coordinate2.Zero; }
        }
        protected Color color;
        public Color Color
        {
            get
            {
                return color;
            }
            set
            {
                color = value;
                Invalidate();
            }
        }
        protected float value;
        public float Value
        {
            get
            {
                return value;
            }
            set
            {
                float t = Math.Min(1, Math.Max(0, value));
                if (t != this.value)
                {
                    this.value = t;
                    Invalidate();
                }

            }
        }
        public ProgressBar(string name,Color color, Rectangle elementRect, bool localPos = true)
            : base(name, elementRect, localPos)
        {
            lastSize = new Coordinate2();
            this.color = color;
            value = 0;
            at = 0;
        }
        protected override void OnUpdate(MouseState mouseState, KeyboardState keyboardState)
        {

        }
        protected override void OnInit()
        {

        }
        protected override void Redraw(SpriteBatch spriteBatch)
        {

            if (lastSize.X != Width || lastSize.Y != Height)
            {

                Console.WriteLine("Redrawing Progressbar");
                //redraw textures!
                stripesBg = new RenderTarget2D(graphicsManager.GraphicsDevice, Width, Height, false, graphicsManager.GraphicsDevice.DisplayMode.Format, DepthFormat.Depth24, 1, RenderTargetUsage.PreserveContents);
                stripes = new RenderTarget2D(graphicsManager.GraphicsDevice, Width, Height * 2, false, graphicsManager.GraphicsDevice.DisplayMode.Format, DepthFormat.Depth24, 1, RenderTargetUsage.PreserveContents);

                spriteBatch.Begin();
                spriteBatch.Draw(pixel, new Rectangle(0, 0, Width, Height), Color.White);
                spriteBatch.End();

                SetRenderTarget(stripesBg);
                spriteBatch.Begin();
                spriteBatch.Draw(pixel, new Rectangle(0, 0, Width, Height), Color.White);
                spriteBatch.End();

                /*SetRenderTarget(border);
                spriteBatch.Begin();
                int si = (int)(stripeThickness*0.5f + 0.5f);
                DrawLine(new Coordinate2(si, 0), new Coordinate2(Width, 0), spriteBatch, Color.White, si);
                DrawLine(new Coordinate2(si, Height - si), new Coordinate2(Width, Height - si), spriteBatch, Color.White, si);
                DrawLine(new Coordinate2(si, 0), new Coordinate2(si, Height), spriteBatch, Color.White, si);
                DrawLine(new Coordinate2(Width, 0), new Coordinate2(Width, Height - si), spriteBatch, Color.White, si);
                spriteBatch.End();*/

                SetRenderTarget(stripes);
                spriteBatch.Begin();
                int fy = (int)(stripeThickness +0.5f);
                int s = (Height + fy) * 2;
                int fx = -s;
                at = 0;
                while (fx < Width + stripeThickness * stripeGapFactor)
                {

                    DrawLine(new Coordinate2(fx, -fy), new Coordinate2(fx+s, s-fy), spriteBatch, Color.White, stripeThickness);
                    fx += (int)(stripeThickness * stripeGapFactor);
                }
                spriteBatch.End();

                SetRenderTarget(null);

                lastSize.X = Width;
                lastSize.Y = Height;
            }

            //actual drawing
            spriteBatch.Begin();
            spriteBatch.Draw(pixel, SizeRect, Darken(color, 2));
            int cv = (int)(Value * Width + 0.5f);
            spriteBatch.Draw(stripesBg, new Rectangle(cv - Width, 0, Width, Height), Darken(Color));
            graphicsManager.GraphicsDevice.Clear(Color.Transparent);
            spriteBatch.Draw(stripes, new Rectangle(cv - Width, -(int)(at + 0.5f), Width, Height * 2), color);
            spriteBatch.End();

            at += animationSpeed;
            if (at >= Height)
                at -= Height - (int)(stripeThickness + .5f);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:45:52.273

好吧，看来这个问题的解决方案是让渲染目标不保留它们的内容，并在内容丢失时重新绘制整个该死的东西。

```
 if (lastSize.X != Width || lastSize.Y != Height || stripesBg.IsContentLost || stripes.IsContentLost)
            {

                Console.WriteLine("Redrawing Progressbar");
                //redraw textures!
                //stripesBg = new RenderTarget2D(graphicsManager.GraphicsDevice, Width, Height, false, graphicsManager.GraphicsDevice.DisplayMode.Format, DepthFormat.Depth24, 1, RenderTargetUsage.PreserveContents);
                //stripes = new RenderTarget2D(graphicsManager.GraphicsDevice, Width, Height * 2, false, graphicsManager.GraphicsDevice.DisplayMode.Format, DepthFormat.Depth24, 1, RenderTargetUsage.PreserveContents);
                stripesBg = new RenderTarget2D(graphicsManager.GraphicsDevice, Width, Height);
                stripes = new RenderTarget2D(graphicsManager.GraphicsDevice, Width, Height * 2);
[...] 
```

# java - 将日期转换为时间戳

> ID：16134687
> 
> 赞同：0
> 
> 时间：2013-04-21T18:27:37.227
> 
> 标签：java, jsf, primefaces

我有一个带有两个输入字段的 JSF 页面 - 日期和小时：

```
<tr>
    <td>Planned Maintenance Stop Date</td>                                        
    <p:calendar pattern="dd-MM-yyyy" value="#{DCProfileTabGeneralController.date1}"/>
</tr>
<tr>
    <td>Planned Maintenance Stop Hour</td>
    <td>
        <h:inputText value="#{ud.maintenanceStopHour}"/>
    </td>
</tr> 
```

当从日历中选择日期时，Primefaces 使用 Date Object 来存储日期。问题是我如何将日历中的日期和从第二个输入作为时间戳手动输入的小时存储到数据库中。

```
private Date maintenanceStartDate;         
private Date maintenanceStartHour; 
```

如何将两个日期转换为 java Timestamp？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:30:00.177

您可以随时转换`Date`为`Timestamp`with`new Timestamp(date.getTime());`

或者您可以指定自己的转换器，例如

```
<p:calendar>
    <f:converter converterId="timestampConverter" />
</p:calendar> 
```

这将完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:51:38.857

最简单的方法是使用

`<p:calendar value="#{calendarBean.date1}" pattern="MM/dd/yyyy HH:mm" />`

带时间的日期将存储在托管 bean 的 Date 对象中。您可以轻松地将其转换为时间戳，如下所示。

`new Timestamp(date1.getTime());`

# vba - MS Word 2007：WordBasic.SelectSimilarFormatting 产生错误

> ID：16134689
> 
> 赞同：0
> 
> 时间：2013-04-21T18:27:51.067
> 
> 标签：vba, ms-word

我的宏包含

```
WordBasic.SelectSimilarFormatting 
```

这条线工作了多年，甚至在 Word 2007 中，但现在它开始产生以下错误：

```
Run-time error '509':
This command is not available. 
```

我有两个问题：

*   一条一直正常工作的生产线突然停止工作会发生什么？
*   如何在 VBA 中重写这一行而不使用 WordBasic ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-01T18:24:40.973

我不得不打开一个选项`Keep track of formatting`。没有它，菜单选项`Select Text with Similar Formatting`和`WordBasic.SelectSimilarFormatting`宏命令将不起作用。

# parsing - 如何简化以下命令行选项解析代码？

> ID：16134692
> 
> 赞同：0
> 
> 时间：2013-04-21T18:28:08.593
> 
> 标签：parsing, haskell, command-line-arguments

我正在开发一个供个人使用的家庭作业管理器，使用 Haskell 开发它。作为开始，我制作了以下代码来解析命令行参数，这些代码我以后应该可以通过添加到`dispatch`. 函数本身是用于测试目的的虚拟对象。然而，我确实觉得这段代码可以变得更简单，更安全，尽管我不知道怎么做。代码是这样的：

```
module Main where

import System.Environment

main = getArgs >>= parse

parse :: [String] -> IO ()
parse [] = usage
parse (file:mode:[]) = if mode == "list"
                       then list file
                       else case lookup mode dispatch of
                         Just _ -> putStrLn "That mode requires arguments" >> usage
                         Nothing -> putStrLn "Please supply a valid mode" >> usage
parse (file:mode:args) = case lookup mode dispatch of
  Nothing -> do case lookup file dispatch of
                  Just _ -> putStrLn "Please supply a data file"
                  Nothing -> putStrLn "Please supply a valid mode"
                usage
  Just fun -> fun file args
parse (file:[]) = case lookup file dispatch of
  Just _ -> putStrLn "Please supply a datafile" >> usage
  Nothing -> list file

usage :: IO ()
usage = mapM_ putStrLn helptext

helptext :: [String]
helptext = ["Homework manager by Marcus Medom Ryding <mrok4a@gmail.com>"
           ,"Copyright 2013, licensed under BSD3"
           ,"Usage: homework filepath [mode] [arguments]"]

dispatch :: [(String, String -> [String] -> IO ())]
dispatch  = [("new",new)]

new :: String -> [String] -> IO ()
new file args = putStrLn ("NEW: " ++ file) >> mapM_ putStrLn args

list :: String -> IO ()
list file = putStrLn ("LIST: " ++ file) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:39:50.353

您应该使用库，而不是手动解析命令行。看看[cmdargs](http://hackage.haskell.org/package/cmdargs)。

它允许您以声明性方式定义命令行选项：

```
{-# LANGUAGE DeriveDataTypeable #-}

import System.Console.CmdArgs

data MyProg = New {comment :: String}
             | Delete {howMany :: Int}
               deriving (Show, Data, Typeable)

new = New {comment = "this is a parameter with a default value"}
delete = Delete {howMany = 10}

main = print =<< cmdArgs (modes [new, delete]) 
```

这给出了类似的东西：

```
% ./prog new -c "hello world"
New {comment = "hello world"}
% ./prog delete              
Delete {howMany = 10} 
```

您还可以免费获得帮助：

```
% ./prog --help      
The myprog program

myprog [COMMAND] ... [OPTIONS]

Common flags:
  -? --help          Display help message
  -V --version       Print version information

myprog new [OPTIONS]

  -c --comment=ITEM

myprog delete [OPTIONS]

  -h --howmany=INT 
```

作者也有一个[不错的教程](http://community.haskell.org/~ndm/darcs/cmdargs/cmdargs.htm)。您需要执行类似于“多种模式”部分的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:23:47.097

除了上述答案，仅根据您的代码：

```
module Main where

import System.Environment

main∷ IO ()
main = getArgs »= parse2

parse2 ∷ [String] → IO ()
parse2 [] = usage
parse2 (file:mode:[])
    | mode ≡ "list" = list file
    | mode ≠ "list" =
    case lookup mode dispatch of
        Just _ → putStrLn "That mode requires arguments" » usage
        Nothing → putStrLn "Please supply a valid mode" » usage
parse2 (file:mode:args) =
    case lookup mode dispatch of
        Nothing → err (lookup file dispatch) » usage
        Just fun → fun file args
        where err (Just _) = putStrLn "Please supply a data file"
              err Nothing = putStrLn "Please supply a valid mode"
parse2 (file:[]) =
    case lookup file dispatch of
        Just _ → putStrLn "Please supply a datafile" » usage
        Nothing → list file

usage ∷ IO ()
usage = mapM_ putStrLn helptext

helptext ∷ [String]
helptext = ["Homework manager by Marcus Medom Ryding <mrok4a@gmail.com>"
           ,"Copyright 2013, licensed under BSD3"
           ,"Usage: homework filepath [mode] [arguments]"]

dispatch ∷ [(String, String → [String] → IO ())]
dispatch  = [("new",new)]

new ∷ String → [String] → IO ()
new file args = putStrLn ("NEW: " ⧺ file) » mapM_ putStrLn args

list ∷ String → IO ()
list file = putStrLn ("LIST: " ⧺ file) 
```

# java - (Java) 在 JPanel 的 2D 数组上使用 GridLayout（可能是 GridBagLayout）

> ID：16134697
> 
> 赞同：1
> 
> 时间：2013-04-21T18:28:58.673
> 
> 标签：java, swing, jpanel, grid-layout, gridbaglayout

我正在尝试制作一个程序，允许用户通过鼠标交互来更改 JPanel 的颜色。我让 JPanel 阵列全部启动并运行（5x5），但无论大小，它们都可以扩展以适应整个主面板。关于如何给它们一个标准尺寸的任何想法，这样它们就不会填满整个窗口并很好地放在中间？

有人告诉我，我可能必须为此使用 GridBagLayout 而不是 GridLayout，但我对这种方法几乎没有经验，而且只是第一次听到这个名字，所以任何关于这方面的帮助也都是类的。

```
public void gridInit() {
        cell = new JPanel [x][x];
        setLayout(new GridLayout(5,5));
        for (int i = 0; i < x; i ++) {
            for (int j = 0; j < x; j ++) {
                cell [i][j] = new JPanel();
                cell [i][j].setBackground(new Color(i*40, j*30, 10));
                cell [i][j].setBorder(loweredetched);
                add(cell [i][j]);           
        } 
```

编辑：我刚刚意识到这是我的第一篇文章，而不是关于修复错误，这可能是向前迈出的一步 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:30:58.430

将您的单元格放入一个 GridLayout 中，使用创建的 JPanel 来保存它们，然后使用适合您的 GUI 的任何布局*将该JPanel 添加到主 JPanel。*请理解，您可以根据需要嵌套 JPanel，每个 JPanel 都使用自己的布局管理器，从而允许使用简单的布局管理器来创建复杂的布局。

例如，

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.*;

@SuppressWarnings("serial")
public class ColorGrid extends JPanel {
   private static final int PREF_W = 750;
   private static final int PREF_H = 550;
   private static final int GRID_ROWS = 5;
   private static final int GRID_COLS = 5;

   public ColorGrid() {
      JPanel gridPanel = new JPanel(new GridLayout(GRID_ROWS, GRID_COLS));
      for (int row = 0; row < GRID_ROWS; row++) {
         for (int col = 0; col < GRID_COLS; col++) {
            gridPanel.add(new ColorGridCell(row, col));
         }
      }

      setLayout(new GridBagLayout()); // to center component added
      add(gridPanel);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private static void createAndShowGui() {
      ColorGrid mainPanel = new ColorGrid();

      JFrame frame = new JFrame("ColorGrid");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

@SuppressWarnings("serial")
class ColorGridCell extends JPanel {
   private static final int PREF_W = 100;
   private static final int PREF_H = 75;
   private final static Color[] COLORS = { Color.red, Color.orange,
         Color.yellow, Color.green, Color.blue, Color.cyan, Color.darkGray,
         Color.magenta, Color.pink };
   private int colorIndex = (int) (Math.random() * COLORS.length);
   private int row;
   private int col;

   public ColorGridCell(int row, int col) {
      this.row = row;
      this.col = col;
      setBackground(COLORS[colorIndex]);

      addMouseListener(new MouseAdapter() {
         @Override
         public void mousePressed(MouseEvent e) {
            colorIndex++;
            colorIndex %= COLORS.length;
            setBackground(COLORS[colorIndex]);
         }
      });
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   public int getRow() {
      return row;
   }

   public int getCol() {
      return col;
   }
} 
```

# php - 如何使用将多个变量传输到 php 页面 这是我正在使用的代码。 <a href="delete_ac.php?id=<? echo $rows['id'];?>">delete</a></td> 基本上我想将它来自的表发送到： <a href="delete_ac.php?id=&l 问问题 问问题 2013-04-21T18:29:37.403 2301 次 This question shows research effort; it is useful and clear -1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 这是我正在使用的代码。 <a href="delete_ac.php?id=<? echo $rows['id'];?>">delete</a></td> 基本上我想将它来自的表发送到： <a href="delete_ac.php?id=<? echo $rows['id']"; table=<? echo $tbl_name>">delete</a></td> 像这样：与&操作员 <a href="delete_ac.php?id=<?php echo $rows['id'];?>&table=<?php echo $tbl_name; ?>">delete</a> 第一个参数：? 接下来的：& phphtml 4 3 回答 3 This answer is useful 2 更正 <a href="delete_ac.php?id=<? echo $rows['id']"; ?> &table=<? echo $tbl_name;?>">delete</a></td> 于 2013-04-21T18:33:50.003 回答 This answer is useful 2 像这样：与&操作员 <a href="delete_ac.php?id=<?php echo $rows['id'];?>&table=<?php echo $tbl_name; ?>">delete</a> 第一个参数：? 接下来的：& 于 2013-04-21T18:31:02.650 回答 This answer is useful 0 请检查这些代码！ 这是第一个代码： <a href="delete_ac.php?id=<?php echo $rows['id']; ?>">delete</a></td> 第二个代码： <a href="delete_ac.php?id=<?php echo $rows['id']; ?>&table=<?php echo $tbl_name; ?>">delete</a></td> 于 2013-04-21T19:03:57.273 回答 Related 1 php - PHP中的循环导航选项卡 2 android - 为什么 getLastLocation() 方法有时会导致位置过时？ 2 c# - 例如：将字符串写入日志文件时，对象引用未设置为对象的实例 1 java - 无法从客户端 x509 证书中检索主体 1 wicket - 使用 Hibernate 刷新视图 1 c++ - 为什么不调用私有成员的默认构造函数？ 1 svn - 如何安全地扁平化 svn 存储库结构 2 jquery - 使用 jQuery 过滤具有多个选择的表 1 java - 接收 预期错误，不知道为什么 4 jquery - 限制 for 循环结合 if 语句 jQuery Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16134702
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：php, html

这是我正在使用的代码。

```
<a href="delete_ac.php?id=<? echo $rows['id'];?>">delete</a></td> 
```

基本上我想将它来自的表发送到：

```
<a href="delete_ac.php?id=<? echo $rows['id']"; 
table=<? echo $tbl_name>">delete</a></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:33:50.003

更正

```
<a href="delete_ac.php?id=<? echo $rows['id']"; ?>
&table=<? echo $tbl_name;?>">delete</a></td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T18:31:02.650

像这样：与`&`操作员

```
<a href="delete_ac.php?id=<?php echo $rows['id'];?>&table=<?php echo $tbl_name; ?>">delete</a> 
```

*   第一个参数：`?`
*   接下来的：`&`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T19:03:57.273

请检查这些代码！

**这是第一个代码：**

```
<a href="delete_ac.php?id=<?php echo $rows['id']; ?>">delete</a></td> 
```

**第二个代码：**

```
<a href="delete_ac.php?id=<?php echo $rows['id']; ?>&table=<?php echo $tbl_name; ?>">delete</a></td> 
```

# php - MySQL中名为“like”的表

> ID：16134706
> 
> 赞同：0
> 
> 时间：2013-04-21T18:30:55.930
> 
> 标签：php, mysql, sql

当我构建我的表时，我没有意识到'like' 是 SQL 中的一个关键字。现在，当我尝试插入行时出现错误，因为“like”是 SQL 关键字。

*错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'like VALUES (DEFAULT, NOW(), 'kirkins@gmail.com', '12345678')' 附近使用正确的语法*

我可以修改我的插入以指定我的意思是名为 like 而不是 like 关键字的表吗？

```
$sql = "INSERT INTO like VALUES (DEFAULT, NOW(), '$email', '$post_id')"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:32:04.433

试试这样：

```
$sql = "INSERT INTO `like` VALUES (DEFAULT, NOW(), '$email', '$post_id')"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T18:31:58.427

用刻度转义表名：

```
$sql = "INSERT INTO `like` VALUES (DEFAULT, NOW(), '$email', '$post_id')"; 
```

# bash - 删除某个字符串后的所有字符

> ID：16134713
> 
> 赞同：1
> 
> 时间：2013-04-21T18:31:29.013
> 
> 标签：bash, sed, awk

嗨，我有以下文件：

```
>seq0 id345
FQTWEEFSRAAEKLYLADPMKVRVVLKYRHVDGNLCIKVTDDLVCLVYRTDQAQDVKKIEKF
>seq1 id1045
KYRTWEEFTRAAEKLYQADPMKVRVVLKYRHCDGNLCIKVTDDVVCLLYRTDQAQDVKKIEKFHSQLMRLME 
```

我试图删除 > 之后的任何字符，所以我得到：

```
>
FQTWEEFSRAAEKLYLADPMKVRVVLKYRHVDGNLCIKVTDDLVCLVYRTDQAQDVKKIEKF
>
KYRTWEEFTRAAEKLYQADPMKVRVVLKYRHCDGNLCIKVTDDVVCLLYRTDQAQDVKKIEKFHSQLMRLME 
```

我几乎得到了这个使用：

```
sed -e 's/>.*//' 
```

但是，这也会删除 > 符号，让我留下：

```
FQTWEEFSRAAEKLYLADPMKVRVVLKYRHVDGNLCIKVTDDLVCLVYRTDQAQDVKKIEKF

KYRTWEEFTRAAEKLYQADPMKVRVVLKYRHCDGNLCIKVTDDVVCLLYRTDQAQDVKKIEKFHSQLMRLME 
```

我如何保留 > 字符？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:33:25.370

最简单的解决方法是：

```
sed 's/>.*/>/' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T18:34:42.547

更复杂情况的可重用解决方案（使用捕获组）：

```
sed -r 's/(>).*/\1/' 
```

# php - while 循环不会在条件匹配时停止

> ID：16134719
> 
> 赞同：-1
> 
> 时间：2013-04-21T18:31:56.357
> 
> 标签：php, while-loop

我有一个不会停止的 WHILE 循环运行。如果我将 while 条件更改为 $x<50 它会按照我的预期进行，但会返回很多空结果。一旦没有更多数据，我想停止。

如果我通过设置 $x=20 检查条件并执行 $y 的 var_dump，它将返回 NULL，所以我无法弄清楚为什么当 $y==NULL 时循环不会停止。

我不断收到致命错误：允许的内存已耗尽。

我尝试将变量 $y 转换为字符串并检查 $y!=="" 和其他变体，但循环似乎无法识别条件并停止。

谢谢你的帮助。

```
$c=1;
$x=0;
$y=$xmlobj->simpleXML->table1->Detail_Collection->Detail[$x];

while($y!==NULL){
    $obj->table_data['country_' . $c] = array();
    $obj->table_data['country_' . $c]['country'] = (string)$xmlobj->simpleXML->table1->Detail_Collection->Detail->{$x}['COUNTRY'];
    $obj->table_data['country_' . $c]['fund_percentage'] = (string)$xmlobj->simpleXML->table1->Detail_Collection->Detail->{$x}['FUNDPCT'];
    $obj->table_data['country_' . $c]['index'] = (string)$xmlobj->simpleXML->table1->Detail_Collection->Detail->{$x}['Index'];

    ++$x;
    ++$c;

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:59:07.210

这可能需要解决，这取决于您的代码的其余部分以及 $y 是否是我假设的数组数组，但它应该让您重回正轨。

```
$count = 1;
$y=$xmlobj->simpleXML->table1->Detail_Collection->Detail[$x];

foreach($y as $row){
    $obj->table_data['country_' . $count] = array();
    $obj->table_data['country_' . $count]['country'] = $row['COUNTRY'];
    $obj->table_data['country_' . $count]['fund_percentage'] = $row['FUNDPCT'];
    $obj->table_data['country_' . $count]['index'] = $row['Index'];
    $count++;
} 
```

编码时这似乎是一件小事，但可读性应该是你所做的一切的关键。即使需要多一点时间来实现，可维护性也显着提高。

# directory - SFTP 目录列表到本地 txt 文件

> ID：16134722
> 
> 赞同：3
> 
> 时间：2013-04-21T18:32:02.860
> 
> 标签：directory, sftp, putty, ls

我在尝试将 sftp 服务器上的目录列出到本地 .txt 文件时遇到问题。

我需要使用命令行。所以我发现腻子几乎是唯一可以做到这一点的客户。

所以，使用腻子我开始努力解决这个问题。我设法列出了我想要的目录（在 psftp 和 pscp 中），它们是 putty sftp 客户端和 putty 安全文件上传/下载客户端。

在 pscp.exe 时使用此脚本（对于 .bat 脚本）：

```
start /WAIT D:\pscp.exe -sftp -v -batch -pw password -ls username@server.host:/directory/subdirectory/subdirectory 
```

这列出了目录。我尝试将“C:\filelist.txt”添加到它的末尾，但这只会创建一个空的本地文件，目录没有在其中列出。

并在 psftp.exe 时使用此脚本（也适用于 .bat 脚本）：

```
start /WAIT D:\psftp.exe username@server.host -v -be -bc -batch -pw password -b D:\listcommands.scr 
```

在 psftp 中调用 listcommand.scr 以启动更多命令的地方，它包含：

```
ls /directory/subdirectory/subdirectory > D:\listdir.txt 
```

但两者都不会将目录列表写入本地 .txt 文件。psftp.exe 命令甚至不会像 pscp.exe 命令那样创建一个空的 .txt 文件。listcommands.scr 命令在没有“>”的情况下也不起作用。

感谢任何对此有任何帮助的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:50:57.433

我认为“filelist.txt”文件是空的，因为您正在生成一个新命令，结果是`psftp`命令的输出被写入与您重定向到文件的标准输出不同的标准输出。

我刚刚尝试过`start /WAIT D:\pscp.exe -sftp -v -batch -pw password -ls username@server.host:/directory/subdirectory/subdirectory > c:\filelist.txt`，我也得到了一个空文件，但是如果我`start /WAIT`从命令行中删除 filelist.txt 现在包含正确的输出。

# python - 对 numpy 数组中存在的元组中的列进行切片

> ID：16134724
> 
> 赞同：3
> 
> 时间：2013-04-21T18:32:09.727
> 
> 标签：python, list, numpy, tuples

我已将文本文件导入到 numpy 数组中，如下所示。

```
data=np.genfromtxt(f,dtype=None,delimiter=',',names=None) 
```

其中 f 包含我的 csv 文件的路径

现在数据包含以下内容。

```
array([(534, 116.48482, 39.89821, '2008-02-03 00:00:49'),
   (650, 116.4978, 39.98097, '2008-02-03 00:00:02'),
   (675, 116.31873, 39.9374, '2008-02-03 00:00:04'),
   (715, 116.70027, 40.16545, '2008-02-03 00:00:45'),
   (2884, 116.67727, 39.88201, '2008-02-03 00:00:48'),
   (3799, 116.29838, 40.04533, '2008-02-03 00:00:37'),
   (4549, 116.48405, 39.91403, '2008-02-03 00:00:42'),
   (4819, 116.42967, 39.93963, '2008-02-03 00:00:43')],
    dtype=[('f0', '<i4'), ('f1', '<f8'), ('f2', '<f8'), ('f3', 'S19')]) 
```

如果我现在尝试列切片，即使用提取第一列或第二列

```
data[:,0] 
```

它说“索引太多”。我发现这是由于它的存储方式。所有行都存储为元组而不是列表/数组。我想过使用“最丑陋”的方式来执行切片，而不必使用迭代。那就是将每行中的元组转换为列表并将其放回 numpy 数组。像这样的东西

```
data=np.asarray([list(i) for i in data]) 
```

但是对于上述问题，我丢失了每一列的数据类型。每个元素都将存储为字符串，而不是在前一种情况下自动检测到的整数或浮点数。

现在，如果我想在不必使用迭代的情况下对列进行切片，有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T21:14:06.183

为您`np.genfromtext`创建的不是具有`object`dtype 的元组数组，而是一个记录数组。您可以从奇怪的 dtype 中看出：

```
dtype=[('f0', '<i4'), ('f1', '<f8'), ('f2', '<f8'), ('f3', 'S19')] 
```

该列表中的每个元组都包含相应字段的名称，其 dtype`<i4`是一个 little endian 4 字节整数、`<f8`一个 little endian 8 字节浮点数和`S19`一个 19 字符长的字符串。您可以按名称访问字段：

```
In [2]: x['f0']
Out[2]: array([ 534,  650,  675,  715, 2884, 3799, 4549, 4819])

In [3]: x['f1']
Out[3]: 
array([ 116.48482,  116.4978 ,  116.31873,  116.70027,  116.67727,
        116.29838,  116.48405,  116.42967]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T18:55:13.880

也许对于您的情况，您可以使用`zip`.

```
import numpy as np

x = np.array([(534, 116.48482, 39.89821, '2008-02-03 00:00:49'),
              (650, 116.4978, 39.98097, '2008-02-03 00:00:02'),
              (675, 116.31873, 39.9374, '2008-02-03 00:00:04'),
              (715, 116.70027, 40.16545, '2008-02-03 00:00:45'),
              (2884, 116.67727, 39.88201, '2008-02-03 00:00:48'),
              (3799, 116.29838, 40.04533, '2008-02-03 00:00:37'),
              (4549, 116.48405, 39.91403, '2008-02-03 00:00:42'),
              (4819, 116.42967, 39.93963, '2008-02-03 00:00:43')],
              dtype=[('f0', '<i4'), ('f1', '<f8'), ('f2', '<f8'), ('f3', 'S19')])

b = zip(*x) 
```

结果：

```
>>> b[0]
(534, 650, 675, 715, 2884, 3799, 4549, 4819)
>>> b[1]
(116.48482, 116.4978, 116.31873, 116.70027, 116.67726999999999, 116.29837999999999, 116.48405, 116.42967) 
```

# ios - 如何对 NSFetchedResultsControllerDelegate 进行单元测试？

> ID：16134729
> 
> 赞同：2
> 
> 时间：2013-04-21T18:32:42.467
> 
> 标签：ios, unit-testing, core-data, ocunit, ocmock

我正在尝试为实现[NSFetchedResultsControllerDelegate 协议](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html)的视图控制器编写单元测试。实现的第一个测试（在此视图控制器的一些其他测试之后）是验证在插入新对象时是否将表行插入到表视图中。

我的第一个测试实现是：

```
- (void) setUp {
    [super setUp];

    sut = [[JODataTableViewController alloc] init];
    fetchedResultsCtrlrMock = [OCMockObject niceMockForClass:[NSFetchedResultsController class]];
    NSError *__autoreleasing *err = (NSError *__autoreleasing *) [OCMArg anyPointer];
    [[[fetchedResultsCtrlrMock expect] andReturnValue:OCMOCK_VALUE((BOOL){YES})] performFetch:err];
    [sut setValue:fetchedResultsCtrlrMock forKey:@"fetchedResultsController"];
    [sut view]; // This invokes viewDidLoad.
}

- (void) tearDown {
    sut = nil;

    [super tearDown];
}

- (void) testObjectInsertedInResultsAddsARowToTheTable {
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    id tableViewMock = [OCMockObject mockForClass:[UITableView class]];
    sut.tableView = tableViewMock;
    [[tableViewMock expect] insertRowsAtIndexPaths:@[indexPath]
                                  withRowAnimation:UITableViewRowAnimationLeft];

    [sut controller:nil didChangeObject:nil
        atIndexPath:nil
      forChangeType:NSFetchedResultsChangeInsert
       newIndexPath:indexPath];

    [tableViewMock verify];
} 
```

当它试图在视图控制器中实现功能以移动到绿色状态（TDD）时，我编写了以下代码：

```
- (void) controllerWillChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView beginUpdates];
}

- (void) controller:(NSFetchedResultsController *)controller
    didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath
      forChangeType:(NSFetchedResultsChangeType)type
       newIndexPath:(NSIndexPath *)newIndexPath {
    UITableViewCell *cell;

    switch (type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertRowsAtIndexPaths:@[newIndexPath]
                                  withRowAnimation:UITableViewRowAnimationLeft];
            break;

    }
}

- (void) controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView endUpdates];
} 
```

但是，我无法让它通过，错误是：

```
Test Case '-[JODataTableViewControllerTests testObjectInsertedInResultsAddsARowToTheTable]' started.
Unknown.m:0: error: -[JODataTableViewControllerTests testObjectInsertedInResultsAddsARowToTheTable] : OCMockObject[UITableView]: unexpected method invoked: isKindOfClass:<??> 
Test Case '-[JODataTableViewControllerTests testObjectInsertedInResultsAddsARowToTheTable]' failed (0.001 seconds). 
```

我尝试在测试的准备部分添加一次或多次以下行，结果相同。

```
[[[tableViewMock expect] andReturnValue:OCMOCK_VALUE((BOOL){YES})] isKindOfClass:[OCMArg any]]; 
```

如您所见，我目前正在使用`OCUnit`and `OCMock`。仅当无法使用此工具集创建此类测试时，我才会考虑其他工具，在这种情况下，如果存在它们的局限性，我将不胜感激。

据我了解，即使被告知，模拟也无法对其班级的性质“撒谎”。此外，该错误未提供有关`UITableView`正在查找的类的信息。我知道使用 进行测试不是一个好习惯`-isKindOfClass:`，但这不是我的代码。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:12:31.987

我以前见过与`isKindOfClass:`调用相关的失败，它们通常是 Apple 在自己的代码中实现某个功能的结果。该标准`mockForClass:`将拒绝任何意外消息作为失败情况。一个简单的解决方案是将您的模拟切换到`niceMockForClass:`可以容忍此类意外消息的模拟。

添加对来自第三方代码的消息的期望将使您的测试与外部实现细节非常耦合。确保`isKindOfClass:`被调用显然不是您系统的明确要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:38:14.770

解决模拟隐藏了内部行为的对象的一种方法是使用部分模拟。在你的情况下：

```
id tableViewMock = [OCMock partialMockForObject:[[UITableView alloc] init]]; 
```

当我这样做时，我通常会稍微更改名称并调用它`tableViewPartial`

# ruby-on-rails - 使用Rspec测试一个方法没有命中数据库

> ID：16134730
> 
> 赞同：2
> 
> 时间：2013-04-21T18:33:08.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我正在为我的 Rails 3 应用程序中的缓存编写 Rspec 测试。我使用 Redis 作为缓存存储。

我有一个方法会尝试从 Redis 中提取数据，如果没有找到，将使用数据库。

有没有办法测试数据库没有被访问？（所以我确信数据是从 Redis 中提取的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:52:18.423

如果您使用[activerecord](/questions/tagged/activerecord "显示标记为“activerecord”的问题")和[rspec-mocks](/questions/tagged/rspec-mocks "显示标记为“rspec-mocks”的问题")，您可以模拟模型调用以引发错误。这是一个例子：

```
describe 'when cached' do
  it 'should not hit the database' do
    # first request should add the object to the cache
    get '/users/1'

    # make db calls fail
    expect(User).not_to receive(:find)

    # send the request again
    get '/users/1'
  end
end 
```

# javascript - HTML/JavaScript：提交时的简单表单验证

> ID：16134733
> 
> 赞同：21
> 
> 时间：2013-04-21T18:33:26.247
> 
> 标签：javascript, html, forms, validation

我正在尝试以最简单的方式验证我的表单，但不知何故它不起作用，当我单击提交时，它只会将我带到下一页而不会发出警报消息：

HTML：

```
<form name="ff1" method="post" onsubmit="validateForm();">
    <input type="text" name="email" id="fremail" placeholder="your@email.com" />
    <input type="text" name="title" id="frtitle" placeholder="Title" />
    <input type="text" name="url"   id="frurl"   placeholder="http://yourwebsite.com/" />

    <input type="submit" name="Submit" value="Continue" />
</form> 
```

JavaScript：

```
<script type="text/JavaScript">

function validateURL(url) {
    var reurl = /^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/;
    return re.test(url);
}

function validateForm()
{
    // Validate URL
    var url = $("#frurl").val();
    if (validateURL(url)) { } else {
        alert("Please enter a valid URL, remember including http://");
    }

    // Validate Title
    var title = $("#frtitle").val();
    if (title=="" || title==null) { } else {
        alert("Please enter only alphanumeric values for your advertisement title");
    }

    // Validate Email
    var email = $("#fremail").val();
    if ((/(.+)@(.+){2,}\.(.+){2,}/.test(email)) || email=="" || email==null) { } else {
        alert("Please enter a valid email");
    }
  return false;
}
</script> 
```

这里也在 jsfiddle [http://jsfiddle.net/CrLsR/](http://jsfiddle.net/CrLsR/)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-21T18:42:46.747

你有几个错误。

首先，您必须从 HTML 标记中的函数返回一个值： `<form name="ff1" method="post" onsubmit="return validateForm();">`

其次，在 JSFiddle 中，您将代码放在 onLoad 中，然后表单将无法识别它 - 最后，如果所有验证都成功，您必须从函数中返回 true - 我在更新中修复了一些问题：

[https://jsfiddle.net/mj68cq0b/](https://jsfiddle.net/mj68cq0b/)

```
function validateURL(url) {
    var reurl = /^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/;
    return reurl.test(url);
}

function validateForm()
{
    // Validate URL
    var url = $("#frurl").val();
    if (validateURL(url)) { } else {
        alert("Please enter a valid URL, remember including http://");
        return false;
    }

    // Validate Title
    var title = $("#frtitle").val();
    if (title=="" || title==null) {
        alert("Please enter only alphanumeric values for your advertisement title");
        return false;
    }

    // Validate Email
    var email = $("#fremail").val();
    if ((/(.+)@(.+){2,}\.(.+){2,}/.test(email)) || email=="" || email==null) { } else {
        alert("Please enter a valid email");
        return false;
    }
  return true;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-21T18:46:24.333

最简单的验证如下：

```
<form name="ff1" method="post">
  <input type="email" name="email" id="fremail" placeholder="your@email.com" />
  <input type="text" pattern="[a-z0-9\. -]+" title="Please enter only alphanumeric characters." name="title" id="frtitle" placeholder="Title" />
  <input type="url" name="url" id="frurl" placeholder="http://yourwebsite.com/" />
  <input type="submit" name="Submit" value="Continue" />
</form>
```

它使用[HTML5 属性](https://www.w3schools.com/html/html_form_attributes.asp)（如 as `pattern`）。

JavaScript：无。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-21T18:37:53.263

您需要返回验证函数。就像是：

```
onsubmit="return validateForm();" 
```

然后验证函数应该在错误时返回 false。如果一切正常，则返回 true。请记住，服务器也必须进行验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-25T22:08:36.993

披露：我写了 FieldVal。

这是使用[FieldVal](http://fieldval.com)的解决方案。通过使用 FieldVal UI 构建表单，然后使用 FieldVal 验证输入，您可以将错误直接传递回表单。

您甚至可以在后端运行验证代码（如果您使用的是[Node.js](https://en.wikipedia.org/wiki/Node.js)）并在表单中显示错误，而无需手动连接所有字段。

现场演示：[http ://codepen.io/MarcusLongmuir/pen/WbOydx](http://codepen.io/MarcusLongmuir/pen/WbOydx)

```
function validate_form(data) {
    // This would work on the back end too (if you're using Node)

    // Validate the provided data
    var validator = new FieldVal(data);
    validator.get("email", BasicVal.email(true));
    validator.get("title", BasicVal.string(true));
    validator.get("url", BasicVal.url(true));
    return validator.end();
}

$(document).ready(function(){

    // Create a form and add some fields
    var form = new FVForm()
    .add_field("email", new FVTextField("Email"))
    .add_field("title", new FVTextField("Title"))
    .add_field("url", new FVTextField("URL"))
    .on_submit(function(value){

        // Clear the existing errors
        form.clear_errors();

        // Use the function above to validate the input
        var error = validate_form(value);

        if (error) {
            // Pass the error into the form
            form.error(error);
        } else {
            // Use the data here
            alert(JSON.stringify(value));
        }
    })

    form.element.append(
        $("<button/>").text("Submit")
    ).appendTo("body");

    //Pre-populate the form
    form.val({
        "email": "user@example.com",
        "title": "Your Title",
        "url": "http://www.example.com"
    })
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-26T06:17:58.193

HTML 表单元素验证

运行功能

```
<script>
    $("#validationForm").validation({
         button: "#btnGonder",
         onSubmit: function () {
             alert("Submit Process");
         },
         onCompleted: function () {
             alert("onCompleted");
         },
         onError: function () {
             alert("Error Process");
         }
    });
</script> 
```

转到示例并下载*[https://github.com/naimserin/Validation](https://github.com/naimserin/Validation)*。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-10T22:48:03.743

我使用这个非常简单的小型 JavaScript 库在一行代码中验证完整的表单：

```
 jsFormValidator.App.create().Validator.applyRules('Login'); 
```

在这里检查：[jsFormValidator](https://github.com/Devniz/jsFormValidator)

这个工具的好处是您只需编写一个描述您的验证规则的 JSON 对象。没有必要写这样的一行：

```
 <input type=text name="username" data-validate placeholder="Username"> 
```

`data-validate`被注入到表单的所有输入字段中，但是当使用 jsFormValidator 时，您不需要这种繁重的语法，并且验证将一次性应用于您的表单，而无需触摸您的 HTML 代码。

# backbone.js - 如何使用 MarionetteJS 删除 CollectionView 的额外包装？

> ID：16134738
> 
> 赞同：1
> 
> 时间：2013-04-21T18:33:58.377
> 
> 标签：backbone.js, marionette, backbone-views

我遇到了与此处讨论的 LayoutView 类似的问题，即创建了[额外的包装器：Backbone 和 Marionette 中的额外包装器](https://stackoverflow.com/questions/11195242/extra-wrappers-in-backbone-and-marionette)

现在，我正在尝试使用 CollectionView 并看到类似的一些意外`div`出现。

我的 CollectionView 看起来像：

```
MA.Views.Composites.Movies = Backbone.Marionette.CollectionView.extend({

  模板：'合成/电影'，

});

MA.addInitializer(函数(){
  MA.collections.movi​​es = 新 MA.Collections.Movies();
  MA.composites.movi​​es = 新 MA.Views.Composites.Movies({
    itemView: MA.Views.Items.Movie,
    收藏：MA.collections.movi​​es
  });
  MA.collections.movi​​es.fetch();
});

```

模板：

```
 <div id="movies">
   movies
 </div> 
```

项目视图：

```
MA.Views.Items.Movie = Backbone.Marionette.ItemView.extend({
  模板：'项目/电影'，

  观看次数：{}
});

```

和 ItemView 模板：

```
<div class="item">
  {{ title }}
</div> 
```

生成的 HTML 如下所示：

![额外的包装](https://i.stack.imgur.com/EThjj.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:54:10.480

问题似乎是我将 CompositeView 与 CollectionView 混合在一起。通过在视图上添加`className`属性，解决方案很快变得可见。ItemView 不应包含包装`div`在模板中包含包装，因为这是由 ItemView 添加的。

# c# - 如何在代码中将 Selector.IsSelected 附加属性设置为 ListBox 项？

> ID：16134739
> 
> 赞同：0
> 
> 时间：2013-04-21T18:34:01.277
> 
> 标签：c#, wpf, xaml, listbox, attached-properties

参考 WPF 4 Unleashed 第 281 页：“选择器还支持两个可应用于单个项目的附加属性”。

```
<ListBox Name="listBox1">
    <sys:String>Fred</sys:String>
    <sys:String Selector.IsSelected="True">Wilma</sys:String>   <- Error
    <ListBoxItem Selector.IsSelected="True">
        <sys:String>Barney</sys:String>
    </ListBoxItem>
</ListBox> 
```

似乎我不能将 Selector.IsSelected 应用于第二项，因为它不是 DependencyObject 对吗？也不能从代码中做到这一点。

另一个问题，如果我想在 XAML 中将字符串添加到 Items 集合中，有没有办法将它们分开而不将它们包装在里面`<sys:String></sys:String>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:02:54.483

我能说什么

1）是的，您是正确的，您只能将附加属性附加到`DependencyObject`. 另一种方法是使用`<ListBox SelectedIndex="1"> ...`

2）您必须将字符串包裹在某些东西中，但它可能是：

```
<sys.String>Fred</sys.String>
<ListBoxItem>Fred</ListBoxItem> 
```

# php - 使用jquery在选择中转换列表

> ID：16134740
> 
> 赞同：2
> 
> 时间：2013-04-21T18:34:10.183
> 
> 标签：php, jquery, magento, select

我正在尝试转换：

```
<?php if($this->getCurrencyCount()>1): ?>
    <div class="currency">
        <?php foreach ($this->getCurrencies() as $_code => $_name): ?>
            <?php if($_code==$this->getCurrentCurrencyCode()): ?>
                <span title="<?php echo $_name ?> - <?php echo $_code ?>" class="currency-code" style="background-image: url(<?php echo $this->getSkinUrl('images/').$_code.'.png'?>);"><?php echo $_code ?></span>
            <?php else: ?>    
                <a href="<?php echo $this->getSwitchCurrencyUrl($_code) ?>" class="currency-code" style="background-image: url(<?php echo $this->getSkinUrl('images/').$_code.'.png'?>);" title="<?php echo $_name ?> - <?php echo $_code ?>"><?php echo $_code ?></a>
            <?php endif; ?>
        <?php endforeach; ?>

    </div>

<?php endif; ?> 
```

它在 Magento 的电子商务网站中显示货币，所有这些都在一行中，以供选择。

所以我先把代码改成无序列表：

```
<?php if($this->getCurrencyCount()>1): ?>
    <div class="currency"><ul class="selectdropdown">
        <?php foreach ($this->getCurrencies() as $_code => $_name): ?>
            <?php if($_code==$this->getCurrentCurrencyCode()): ?>
                <li class="selected"><span title="<?php echo $_name ?> - <?php echo $_code ?>" class="currency-code" style="background-image: url(<?php echo $this->getSkinUrl('images/').$_code.'.png'?>);"><?php echo $_code ?></span></li>
            <?php else: ?>    
                <li><a href="<?php echo $this->getSwitchCurrencyUrl($_code) ?>" class="currency-code" style="background-image: url(<?php echo $this->getSkinUrl('images/').$_code.'.png'?>);" title="<?php echo $_name ?> - <?php echo $_code ?>"><?php echo $_code ?></a></li>
            <?php endif; ?>
        <?php endforeach; ?>
    </ul>
    </div>

<?php endif; ?> 
```

然后，按照此处的说明进行操作：[https](https://stackoverflow.com/a/6760507) ://stackoverflow.com/a/6760507 我正在尝试将其转换为选择时加载新页面（在href中）的选择：

```
<script>
$('ul.selectdropdown').each(function(){
var list=$(this),
    select=$(document.createElement('select')).insertBefore($(this).hide()).change(function(){
  window.location.href=$(this).val();
});
$('>li a', this).each(function(){
  var option=$(document.createElement('option'))
   .appendTo(select)
   .val(this.href)
   .html($(this).html());
  if($(this).attr('class') === 'selected'){
    option.attr('selected','selected');
  }
});
list.remove();
});
</script> 
```

我找不到问题所在。Jquery 已正确导入。目前我只看到一个有序列表：

```
<ul class="selectdropdown">

                <li><a href="http://..." class="currency-code" style="background-image: url(...);" title="Dollaro Australiano - AUD">AUD</a></li>

                <li><a href="http://..." class="currency-code" style="background-image: url(...);" title="Dollaro Canadese - CAD">CAD</a></li>

...
                        </ul> 
```

然后，脚本

有人能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:49:11.757

jquery 是否与 magento 冲突。尝试无冲突。检查 jQuery 中的任何错误

# angularjs - 使用 ng-view 时出现 scrollTo 错误

> ID：16134747
> 
> 赞同：3
> 
> 时间：2013-04-21T18:34:36.600
> 
> 标签：angularjs

第一次将 ng-view 与 Angular 一起使用，并在 Angular js 与 ng-view 的全新应用程序中，我遇到了所有这些 scrollTo 错误。我怎样才能解决这个问题？我检查了 StackOverflow 和 Google，但找不到解决方案。即使是 Angular 种子应用程序我也有同样的问题。

**控制台错误**

```
TypeError: Property 'scrollTo' of object [object global] is not a function
    at scroll (http://localhost/angular/lib/angular.js:2946:26)
    at Object.Scope.$eval (http://localhost/angular/lib/angular.js:8685:28)
    at Object.Scope.$digest (http://localhost/angular/lib/angular.js:8548:23)
    at Object.Scope.$apply (http://localhost/angular/lib/angular.js:8771:24)
    at http://localhost/angular/lib/angular.js:986:15
    at Object.invoke (http://localhost/angular/lib/angular.js:2873:25)
    at resumeBootstrapInternal (http://localhost/angular/lib/angular.js:984:14)
    at bootstrap (http://localhost/angular/lib/angular.js:998:12)
    at angularInit (http://localhost/angular/lib/angular.js:959:5)
    at http://localhost/angular/lib/angular.js:16310:5 angular.js:6173
TypeError: Property 'scrollTo' of object [object global] is not a function
    at scroll (http://localhost/angular/lib/angular.js:2946:26)
    at <error: illegal access>
    at Object.Scope.$broadcast (http://localhost/angular/lib/angular.js:8935:28)
    at http://localhost/angular/lib/angular.js:7960:26
    at wrappedCallback (http://localhost/angular/lib/angular.js:7303:59)
    at wrappedCallback (http://localhost/angular/lib/angular.js:7303:59)
    at http://localhost/angular/lib/angular.js:7340:26
    at Object.Scope.$eval (http://localhost/angular/lib/angular.js:8685:28)
    at Object.Scope.$digest (http://localhost/angular/lib/angular.js:8548:23)
    at Object.Scope.$apply (http://localhost/angular/lib/angular.js:8771:24) 
```

如您所见，它更新了我的文件中的内容，因为它只是新的应用程序。

**索引.html**

```
<!doctype html>
<html lang="en" ng-app="app">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Mobile App</title>
    <link href="css/default.css" rel="stylesheet" type="text/css">
    <link href="css/bootstrap-min.css" rel="stylesheet" type="text/css">
</head>
<body>

    <div ng-view></div>

    <!--<script src="lib/angular-min.js"></script>-->
    <script src="lib/angular.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/directives.js"></script>
    <script src="js/services.js"></script>

</body>
</html> 
```

**应用程序.js**

```
var app = angular.module('app', ['Controllers', 'Directives', 'Services']); 
```

**控制器.js**

```
angular.module('Controllers', []); 
```

**指令.js**

```
angular.module('Directives', []); 
```

**服务.js**

```
angular.module('Services', []); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T20:39:09.943

简短的研究表明，问题可能是 chrome 弹出窗口阻止程序，禁用他可能会解决问题。请尝试在除 Chrome 之外的任何浏览器中运行您的应用程序，如果您看到其他行为，请禁用弹出窗口阻止程序。

希望有帮助。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T13:41:05.703

[仅供参考，这是更好的弹出窗口阻止程序的问题跟踪器中的票。](http://code.google.com/p/betterpopupblocker/issues/detail?id=1)自 2011 年以来开发人员未对其进行任何修改，因此它似乎不会很快得到修复。

# jquery - HTML5 Canvas 调整图片大小 点击放大

> ID：16134748
> 
> 赞同：5
> 
> 时间：2013-04-21T18:34:38.250
> 
> 标签：jquery, html, image, canvas, zooming

我在画布中有一张地图的图像，我想像使用 HTML5 和 jQuery 的谷歌地图界面一样。我想执行以下操作：

```
• Double click on pan in without changing the size of the containing div

• Click on a building to bring up a pop up of information on that building

• Click and drag to pan 
```

我现在拥有的代码是画布中的图像。我发现了几个在图像上显示“缩放”的代码，但要么调整容器 div 的大小，要么不是一种平滑且响应迅速的方式，它只是跳转到更大的尺寸，我希望缩放动画。

地图上将有几座建筑物被“固定”，用户可以点击这些建筑物来显示有关该建筑物的信息。

代码如下：

JS：

```
$( document ).ready( function() {
var canvas = document.getElementById( 'canvas' );
var context = null;
var map = null;

if( canvas.getContext )
{
    context = canvas.getContext( '2d' );

    $( '#map' ).load( function( evt ) {
        context.drawImage( evt.currentTarget, 10, 10 );
    } );

    map = new Image();
    map.onload = function() {
        context.drawImage( this, 20, 20 );
    };
    map.src = 'images/asu_poly_map.png';
} else {
    alert( 'Your browser does not support canvas.' );
}
} ); 
```

HTML：

```
<div id="map">

<canvas id="canvas" width="1055" height="600"></canvas>

</div> 
```

CSS：

```
#map {
margin:0 auto;
margin-top : 180px;
width : 1200px;
} 
```

编辑添加：我假设它会与此类似，但无法弄清楚如何将其应用于来自服务器的图像，该图像正在绘制到画布上。

[放大一个点（使用缩放和平移）](https://stackoverflow.com/questions/2916081/zoom-in-on-a-point-using-scale-and-translate?lq=1)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T20:19:55.017

繁荣！我将一堆 StackOverflow 引用组合成适合你的东西：http: [//jsfiddle.net/CMse5/1/](http://jsfiddle.net/CMse5/1/)

这是代码：

HTML：

```
<div id="map">
    <canvas id="canvas" width="300" height="300"></canvas>
</div> 
```

CSS：

```
canvas {
    border: 1px solid black;
} 
```

JS：

```
$( document ).ready( function() {
var canvas = document.getElementById("canvas");
var context = canvas.getContext("2d");
var scale = 1.5;
var originx = 0;
var originy = 0;
var imageObj = new Image(); 
    imageObj.src = 'http://placehold.it/300x300';

function draw(){
    // From: http://goo.gl/jypct
    // Store the current transformation matrix
    context.save();

    // Use the identity matrix while clearing the canvas
    context.setTransform(1, 0, 0, 1, 0, 0);
    context.clearRect(0, 0, canvas.width, canvas.height);

    // Restore the transform
    context.restore();

    // Draw on transformed context    
    context.drawImage(imageObj, 0, 0, 300, 300);

}
setInterval(draw,100);

canvas.onmousewheel = function (event){
    var mousex = event.clientX - canvas.offsetLeft;
    var mousey = event.clientY - canvas.offsetTop;
    var wheel = event.wheelDelta/120;//n or -n

    //according to Chris comment
    var zoom = Math.pow(1 + Math.abs(wheel)/2 , wheel > 0 ? 1 : -1);

    context.translate(
        originx,
        originy
    );
    context.scale(zoom,zoom);
    context.translate(
        -( mousex / scale + originx - mousex / ( scale * zoom ) ),
        -( mousey / scale + originy - mousey / ( scale * zoom ) )
    );

    originx = ( mousex / scale + originx - mousex / ( scale * zoom ) );
    originy = ( mousey / scale + originy - mousey / ( scale * zoom ) );
    scale *= zoom;
}

} ); 
```

此外，您提到以平滑的方式为缩放设置动画。为此，您将需要减轻每帧的缩放。因此，在您的绘图功能中，您将希望在原始比例与新比例之间缓和每一帧。您肯定会想要更改为 requestAnimationFrame，以便获得更好的帧速率。

使用画布/DOM 混合，并在图像上使用 CSS3 转换和动画可能会更简单，它会为您处理所有的缓动。如果需要，您可以覆盖任何必要的画布内容。

# android - EditText 提示未显示 (Java - android)

> ID：16134752
> 
> 赞同：1
> 
> 时间：2013-04-21T18:35:31.120
> 
> 标签：android, android-edittext, hint

我看到了很多关于这个主题的问题，但我找到了任何可以解决我问题的东西。我看到了不同的解决方案：

*   消除重力
*   删除 inputType
*   插入 android:ellipsize 属性

但是没有人工作过。这是我的代码示例：

```
<EditText
    android:id="@+id/edtNotesText"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/layoutNotesEditMenu"
    android:gravity="left|top"
    android:hint="@string/edt_text_notes_add_hint"
    android:inputType="textFilter|textMultiLine|textNoSuggestions"
    android:padding="6dp"
    android:scrollbars="vertical"
    android:textColor="@color/lightGrey"
    android:textSize="20sp" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T19:05:19.060

尝试更改编辑文本的颜色并设置适当的重力

```
android:textColorHint="#FFFFFF"
android:gravity="center"
android:ellipsize="end" 
```

这值得一试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T08:05:44.220

我发现了问题：我忘记了“setContentView”指令！可能是微不足道的，但也许可以帮助别人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-14T03:27:50.323

在我查看我的`.java`类文件代码之前，你提到的那些也没有对我有用。我有这个：

```
 poemTitle.setText(poemListItem.getTitle());
   poemText.setText(poemListItem.getPoem()); 
```

一旦我将这些注释掉，我的提示文本就会显示在我的两个`EditText`s. 我有这段代码可以利用模型类来获取文本，但实际上不需要它，因为我的应用程序的用户将编辑他们自己的文本。

# meteor - 为公共/目录中的项目自动添加/解释斜杠？

> ID：16134759
> 
> 赞同：0
> 
> 时间：2013-04-21T18:36:08.427
> 
> 标签：meteor

关于 Meteor 的公共目录和静态`index.html`文件的快速问题：

我的应用程序有一些静态页面。我没有设置整个路由，而是将它们放在 public/ 的子目录中。总的来说，它工作得很好：如果我有一个 HTML 文件，`<app root>/public/somedir/index.html`那么导航到`http://my-app.com/somedir/`将生成该页面。但是**，如果我去掉尾部斜杠，**它就不起作用：我最终回到我的应用程序的根目录，就好像我只是导航到`http://my-app.com/`.

处理这个问题的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:59:35.677

在 Meteor 中还没有标准的方法来做到这一点。

*如果*您对 Meteor 的内部有详细的了解*并且*知道如何编写[express](http://expressjs.com/)中间件，则可以自己进行操作:-) 请参阅 appcache 包源以获取示例（它拦截对“/app.manifest” URL 的调用并生成自己的回应）。

但就个人而言，我只是冒险并设置路线。Meteor 被设计为一个单一的网页框架，使用该模型开发您的应用程序将比与之抗衡更容易。

# android - Horizo ntalListView - 自定义图像文本视图

> ID：16134760
> 
> 赞同：1
> 
> 时间：2013-04-21T18:36:09.290
> 
> 标签：android, imagelist, horizontallist

我正在使用 dev-smart 的 Horizo​​ntalListView ( [from here](https://github.com/dinocore1/DevsmartLib-Android/blob/master/devsmartlib/src/com/devsmart/android/ui/HorizontalListView.java) ) 来实现图像的水平列表视图，其中包含如下的潜文本：

![我想要的是](https://i.stack.imgur.com/VTVuV.png).

问题是列表的每个项目视图都与屏幕的宽度一样宽。AdjustViewBounds 设置为 true 但不起作用......我明白了：

![我得到了什么](https://i.stack.imgur.com/PYqKx.png)

我试过了：

*   在 getView() 方法中固定图像的宽度和高度并转换视图
*   修复 XML 中图像和 RelativeLayout 的宽度
*   在 Horizo​​ntalListView 的方法中将宽度固定为子级

可能是 Horizo​​ntalListView 被窃听了？还有其他方法吗？以前我在水平 ListView 内使用水平 ListView 但这有一个问题。它会加载所有图片，即使它们从未见过。

有谁能够帮我？谢谢！！

这是我的自定义适配器的 getView() 方法：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.item_actor, null);

        holder.img = (ImageView) convertView.findViewById(R.id.actor_img);
        holder.tittle = (TextView) convertView.findViewById(R.id.actor_txt);
        convertView.setTag(holder);
    }

    else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.img.setImageResource(R.drawable.actor_thumb);
    holder.tittle.setText(getItem(position).getName());
    convertView.setLayoutParams(new LayoutParams(150,190));
    ImageDownloader.getInstance(mContext).download(getItem(position).getPhotoUrl(), holder.img,
            R.drawable.actor_thumb);
    return convertView;

} 
```

这，要膨胀的项目视图：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

<ImageView
    android:id="@+id/actor_img"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:adjustViewBounds="true"
    android:scaleType="centerCrop"
    android:src="@drawable/ic_launcher" />

<net.asturdroid.datamovie.widgets.TextViewRoboto
    android:id="@+id/actor_txt"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:background="@color/text_over_image_background"
    android:gravity="center"
    android:maxLines="3"
    android:textColor="@color/text_over_image" />

</RelativeLayout> 
```

而这，Horizo​​ntalList 项目：

```
 <com.devsmart.android.ui.HorizontalListView
            android:id="@+id/casting_view_list"
            android:layout_width="wrap_content"
            android:layout_height="190dp" /* wrap_content doesn't works. */>
        </com.devsmart.android.ui.HorizontalListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:11:40.830

我认为这是 Horizo​​ntalListView 类的错误。

我改变

```
child.measure(MeasureSpec.makeMeasureSpec(getWidth(), MeasureSpec.AT_MOST),
    MeasureSpec.makeMeasureSpec(getHeight(), MeasureSpec.AT_MOST)); 
```

至

```
child.measure(MeasureSpec.makeMeasureSpec(params.width, MeasureSpec.AT_MOST),
    MeasureSpec.makeMeasureSpec(params.height, MeasureSpec.AT_MOST)); 
```

在 Horizo​​ntalListView.java 上，它对我有用。

我希望能帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-13T02:35:08.420

我遇到了同样的问题，我所做的是将项目视图上每个元素的宽度更改为膨胀：

```
 <?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" >

   <ImageView
       android:id="@+id/actor_img"
       android:layout_width="150dp"
       android:layout_height="wrap_content"
       android:layout_centerHorizontal="true"
       android:layout_centerVertical="true"
       android:adjustViewBounds="true"
       android:scaleType="centerCrop"
       android:src="@drawable/ic_launcher" />

   <net.asturdroid.datamovie.widgets.TextViewRoboto
       android:id="@+id/actor_txt"
       android:layout_width="150dp"
       android:layout_height="wrap_content"
       android:layout_alignParentBottom="true"
       android:layout_centerHorizontal="true"
       android:background="@color/text_over_image_background"
       android:gravity="center"
       android:maxLines="3"
       android:textColor="@color/text_over_image" />

    </RelativeLayout> 
```

我希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-27T18:00:49.260

我使用了相同的 Horizo​​ntalListView。我已经用 MyAdapter 类的 getView() 方法中的以下代码解决了这个问题。

```
convertView = getLayoutInflator().inflate(R.layout.row_item, parent, false); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-29T08:18:08.187

也许你可以试试这个，它对我有用。这里是github的链接：[https ://github.com/TomIsYourName/Android-Horizo​​ntalListView](https://github.com/TomIsYourName/Android-HorizontalListView)

# jquery - 在 Jquery 函数中放置多个类

> ID：16134762
> 
> 赞同：0
> 
> 时间：2013-04-21T18:36:12.357
> 
> 标签：jquery

我正在抓取一个新闻网站，我需要提取一个具有多个类的元素。我的原始代码如下所示：

```
var index = $(this).attr('class'); 
```

然后将其作为文本附加到 span：

```
$('.element').append('<span>.'+index+'</span>'); 
```

这对单个类很有用，但是当给定多个类时它不起作用（意味着我不能做我的功能）。这样做的原因是 Jquery 语句应该有用逗号分隔的类。因此，在我的代码中调用多个类将如下所示：

```
<span> .class1 class2 class3 </span> 
```

但是 Jquery 需要像这样的逗号和点：

```
 <span> .class1, .class2, .class3 </span> 
```

我该怎么做才能添加逗号和点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:37:31.293

只需将字符串按*空格*拆分成一个数组，然后再将它们重新组合成一个字符串，就可以了。

```
var index = $('div').attr('class').split(' ');

for (var i = 0; i < index.length; i++) {
    index[i] = '.' + index[i];
}

index = index.join(', '); 
```

**[jsFiddle 演示](http://jsfiddle.net/Fu8QH/)**

结果将是`.class1, .class2, .class3`

# c++ - 使用 Boost.Python 和静态库构建

> ID：16134764
> 
> 赞同：0
> 
> 时间：2013-04-21T18:36:37.353
> 
> 标签：c++, python, boost, compilation, compiler-errors

我想制作一个可以处理 python 插件的 C++ 应用程序，所以我进入了 boost.python。我正在创建一些使用 CMake 构建的测试程序。

在我的测试程序中，我有一个简单的“库”，它提出了一个插件接口（使用 boost.python 将其公开给 python）和一个插件加载器（尚未编码，内部没有任何内容）。

当我尝试直接构建可执行文件（没有任何库）时，出现链接错误（我公开的模块称为 pythonPlugin）：

```
duplicate symbol _initpythonPlugin in:
    CMakeFiles/pythonPluginer.dir/main.cpp.o
    libcoreLib.a(PluginLoader.cpp.o)
duplicate symbol __Z24init_module_pythonPluginv in:
    CMakeFiles/pythonPluginer.dir/main.cpp.o
    libcoreLib.a(PluginLoader.cpp.o) 
```

当我构建一个中间静态库时，我得到了相同的结果。然而，当我把这个库变成一个共享库时，它工作得很好。这是一个子 CMakeList.txt ：

```
file(GLOB sources core/*.h core/*.cpp )

add_library(coreLib SHARED ${sources})
target_link_libraries(coreLib 
                      ${PYTHON_LIBRARIES} 
                      ${Boost_LIBRARIES})

add_executable(pythonPluginer main.cpp)
target_link_libraries(pythonPluginer 
                      coreLib) 
```

你对此有什么解释吗？是否可以在不使用共享库的情况下使用 boost/python 制作程序？

谢谢，丹尼斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:50:19.203

我会尝试从 file(GLOB...) 命令中删除 core/*.h 不需要编译头文件，这实际上可能会导致重复符号的问题。

# c++ - 汇编解密/反转？异或是一个问题吗？

> ID：16134765
> 
> 赞同：2
> 
> 时间：2013-04-21T18:36:47.510
> 
> 标签：c++, assembly, x86, encryption, xor

我有一个代码函数，我试图在没有运气的情况下扭转它的影响。我原来的功能是：

```
 ror al,1                      // rotates the al part of the eax register (the Ekey) bitwise by 1 bit, as 1 mod 8 = 1 (al = 2D)
      ror al,1                      // moves the rightmost bit from al (the end of the Ekey) and shifts everything along
      ror al,1                      // rotates al bitwise by 1 bit, as 1 mod 8 = 1 (al = 4B)
      ror al,1                      // rotates the end 8 bits of the Ekey bitwise by 1 bit, as 1 mod 8 = 1 (al = A5)
      push ecx                      // preserves the value of the encrypted character by pushing it on the stack, the stack pointer decrements by 4 to allow this
      not eax                       // completes the ones' complement on the Ekey, toggling the bits
      mov edx,eax                   // copies the current value of the Ekey register and places it in edx, for holding
      pop eax                       // restores original register value from stack
      xor eax,edx                   // completes a bitwise exclusive or on the Ekey, with the previous value of the Ekey that was stored in edx
      ror al,1                      // rotates the last 8 bits of the Ekey bitwise by 1 bit, as 1 mod 8 = 1
      ror al,1                      // rotates al bitwise by 1 bit, as 1 mod 8 = 1
      not eax                       // completes the ones' complement on the Ekey value, 'flipping' eax entirely
      add eax,0x20                  // adds the hex value of 20 (32 in base 10) to the current value in the Ekey 
```

我必须只反转上述代码的效果，而不是每一行。我尝试了各种事情......尝试1（这是错误的）：

```
 sub eax, 0x20
      not eax
      rol al, 2
      xor ecx, eax
      push eax
      mov eax, edx
      not eax
      pop ecx
      rol al, 4 
```

我的第二次尝试如下：

```
 sub eax, 0x20
      not eax
      rol al, 2 
      not eax
      xor ecx, eax 
```

这是怎么回事……异或的效果可以逆转吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:33:41.027

明显的顺序是这样的：

```
; inputs:
;     edx: ekey
;     eax: "encrypted" word
; 
not eax
rol al, 1
rol al, 1
not edx
xor eax, edx 
```

在我看来，原始代码也过于复杂。我想我会写一些更像这样的东西：

```
not eax
xchg eax, ecx
xor eax, ecx
rol al, 1
rol al, 1
not eax 
```

我认为更多的简化也是可能的，但我必须考虑一下才能确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T19:47:53.460

我保留了您的功能，但简化了解密：

```
unsigned int encrypt(unsigned int input, unsigned int key)
{
    _asm
    {
        mov ecx, input
        mov eax, key
        push ecx                      ; preserves the value of the encrypted character by pushing it on the stack, the stack pointer decrements by 4 to allow this
        not eax                       ; completes the ones' complement on the Ekey, toggling the bits
        mov edx,eax                   ; copies the current value of the Ekey register and places it in edx, for holding
        pop eax                       ; restores original register value from stack
        xor eax,edx                   ; completes a bitwise exclusive or on the Ekey, with the previous value of the Ekey that was stored in edx
        ror al,1                      ; rotates the last 8 bits of the Ekey bitwise by 1 bit, as 1 mod 8 = 1
        ror al,1                      ; rotates al bitwise by 1 bit, as 1 mod 8 = 1
        not eax                       ; completes the ones' complement on the Ekey value, 'flipping' eax entirely   
    }
}

unsigned int decrypt(unsigned int input, unsigned int key)
{
    _asm
    {
        mov eax, input 
        not eax
        rol al,1
        rol al,1
        mov edx, key
        not edx
        xor eax, edx
    }
}

int main()
{
    unsigned int data = 0xB84A35F2;
    unsigned int encrypted  = 0;
    unsigned int decrypted = 0;
    unsigned int key = 0x3DB76E8C2;

    encrypted = encrypt(data, key);
    decrypted = decrypt(encrypted, key);
    std::cout << "Original Data: " << data << "\nEncrypted Data: " << encrypted << "\nDecrypted Data: " << decrypted << "\n";
    system("PAUSE");
    return 0;
} 
```

# c# - 文本框一次只接受一个字符

> ID：16134769
> 
> 赞同：0
> 
> 时间：2013-04-21T18:37:13.487
> 
> 标签：c#, wpf, textbox

我需要让`TextBox`控件一次只接受一个字符。例如，如果我输入*"aaa"*，那么它只会接受*"a"*。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:42:22.287

TextBox 有一个`MaxLength`属性。`MaxLength`获取或设置可以手动输入到文本框中的最大字符数。

```
 <TextBox MaxLength="1" Width="120" Height="23" /> 
```

所以在这里，您只能手动输入一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:49:57.160

如果我理解正确，您不希望用户能够连续多次输入相同的密钥。这应该防止：

```
 private void textBox_KeyDown(object sender, KeyEventArgs e)
 {
     TextBox textBox = sender as TextBox;
     if(textBox != null)
     {
         if (!String.IsNullOrEmpty(textBox.Text))
         {
             //get the last character and convert it to a key
             char prevChar = textBox.Text[textBox.Text.Length - 1];
             Keys k = (Keys)char.ToUpper(prevChar);

             //compare the Key pressed to the previous Key
             if (e.KeyData == k)
             {
                 //suppress the keypress if the key is the same as the previous one
                 e.SuppressKeyPress = true;              
             }
         }
     }
 } 
```

# android - 从服务启动的 Android 对话框不运行动画

> ID：16134770
> 
> 赞同：0
> 
> 时间：2013-04-21T18:37:15.167
> 
> 标签：android, animation, service, dialog

我正在尝试将退出动画添加到从服务启动的对话框中。

```
 Dialog dialog = new Dialog(mContext);
    dialog.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ERROR);
    dialog.getWindow().getAttributes().windowAnimations = R.style.DialogAnimation;
    dialog.show(); 
```

当我调用 dialog.dismiss() 时，DialogAnimation 中定义的动画不会运行。但是，如果我在 Activity 中运行完全相同的代码，则动画会完美运行。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:31:56.480

我认为它是这样的。我最终使对话框透明，为对话框视图设置动画，然后在动画结束时关闭对话框

# ruby-on-rails - 服务器文件通过 scp

> ID：16134776
> 
> 赞同：2
> 
> 时间：2013-04-21T18:37:57.923
> 
> 标签：ruby-on-rails, ruby

我有一个多服务器设置。想象一个客户端、一个运行 Rails 的 Web 服务器和一个存储数据的实例。我需要一种通过网络服务器从客户端访问数据存储文件的方法。

目前我正在使用 scp 将文件下载到临时目录中的 Web 服务器，然后将客户端重定向到 tmp url。

我更希望能够通过 Web 服务器流式传输文件而不存储它们。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:49:03.577

一种替代方法是使用 sshfs 并挂载远程服务器（只读）

```
sshfs -o ro server:/path/to/files path/on/webserver/to/mount 
```

[http://www.howtogeek.com/howto/ubuntu/how-to-mount-a-remote-folder-using-ssh-on-ubuntu/](http://www.howtogeek.com/howto/ubuntu/how-to-mount-a-remote-folder-using-ssh-on-ubuntu/)

* * *

在通过您的问题进行流式传输方面：

你可以这样做：

```
data = `ssh server 'cat path/to/file/on/server'`
send_data(data) 
```

[http://apidock.com/rails/ActionController/Streaming/send_data](http://apidock.com/rails/ActionController/Streaming/send_data)

* * *

这里的技巧是使用 ssh 而不是 scp，从你的 shell 中尝试一下

```
ssh server 'cat path/to/file' > local_file 
```

这允许您在本地将文件发送到 STDOUT（不能通过 scp 完成。）

* * *

这允许您流式传输文件，但我不建议这样做。

1.  您正在将文件加载到 Ruby 中，这将不必要地使您的进程膨胀。
2.  您失去了 X-Sendfile 的好处，无法在 Rails 进程之外卸载下载
3.  **如果路径包含用户提供的数据，您将通过 shell 注入将自己（和服务器）介绍给一个充满伤害的世界。**

# android - 在多个项目中使用该类（Eclipse）

> ID：16134778
> 
> 赞同：0
> 
> 时间：2013-04-21T18:38:07.263
> 
> 标签：android, eclipse

我将在几个 Android 项目中使用一个类。导入类的命名空间后，第二个应用程序与父应用程序一起安装。有没有办法防止这种行为？我应该如何在 Eclipse 中设置项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:43:23.603

将多个应用程序中所需的所有代码移动到一个单独的项目中，并通过右键单击该项目将其标记为库项目，转到`Properties -> Android`并选中该`Is Library`选项。

然后只需将其作为库包含在您的其他项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:02:27.910

所以完整的答案如下： 1）该类应该放在一个单独的项目中，该项目应该标记为图书馆项目。2）要在其他项目中使用该类，应按照`Properties -> Android`此处所述选择创建的库：http: [//developer.android.com/tools/projects/projects-eclipse.html#ReferenceLibraryProject](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)

# zend-framework - 如何在zend studio中更改默认结构

> ID：16134780
> 
> 赞同：1
> 
> 时间：2013-04-21T18:38:11.830
> 
> 标签：zend-framework, zend-studio

当我在 zend studio 中创建一个新项目时，它会创建如下结构： application -controllers -models -views

我希望它遵循模块化模式 application -module -controllers -models -forms -views

因此，例如模块可能是默认的和管理员的。非常感谢任何帮助

# python - 用于组合重复元素的 Python 代码

> ID：16134782
> 
> 赞同：2
> 
> 时间：2013-04-21T18:38:35.763
> 
> 标签：python, duplicates

我有一个重复的一些元素的列表。我需要根据另一个重复的元素组合一些元素。

示例输入：

```
[
('Sig: 7126', '10.3.5.0', 4),
('Sig: 7126', '10.3.5.0', 1),
('Sig: 7126', '10.3.5.0', 1),
('Sig: 3326', '10.3.5.0', 7),
('Sig: 7126', '10.3.5.1', 3),
('Sig: 7126', '10.3.5.1', 1),
('Sig: 7126', '10.3.5.2', 5),
('Sig: 7126', '10.3.5.2', 1),
('Sig: 7126', '10.3.5.4', 2),
('Sig: 7126', '10.3.5.4', 1),
('Sig: 7126', '10.3.5.4', 1),
('Sig: 7126', '10.3.5.4', 1),
('Sig: 0559', '10.3.5.34', 1),
('Sig: 7126', '10.3.5.34', 1),
('Sig: 7126', '10.3.5.34', 1),
('Sig: 0559', '10.3.5.42', 1),
('Sig: 7126', '10.3.5.42', 1),
('Sig: 7126', '10.3.5.43', 2)
] 
```

目标是这样的：

```
[
('Sig: 7126', '10.3.5.0', 6),
('Sig: 3326', '10.3.5.0', 7),
('Sig: 7126', '10.3.5.1', 4),
('Sig: 7126', '10.3.5.2', 6),
('Sig: 7126', '10.3.5.4', 5),
('Sig: 0559', '10.3.5.34', 1),
('Sig: 7126', '10.3.5.34', 2),
('Sig: 0559', '10.3.5.42', 1),
('Sig: 7126', '10.3.5.42', 1),
('Sig: 7126', '10.3.5.43', 2)
] 
```

有没有简单的python代码来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:41:22.907

与[`itertools.groupby`](http://docs.python.org/3.3/library/itertools.html#itertools.groupby)：

```
 from itertools import groupby

l = [('Sig: 7126', '10.3.5.0', '4'), ('Sig: 7126', '10.3.5.0', '1')...]

def tuples_sum(iterable):
  return list(iterable[0][:-1]) + [sum(int(i[-1]) for i in iterable)]

for i, j in groupby(l, lambda x: (x[0], x[1])):
  print(tuples_sum(list(j))) 
```

这使：

```
['Sig: 7126', '10.3.5.0', 6]
['Sig: 3326', '10.3.5.0', 7]
['Sig: 7126', '10.3.5.1', 4]
['Sig: 7126', '10.3.5.2', 6]
['Sig: 7126', '10.3.5.4', 5]
['Sig: 0559', '10.3.5.34', 1]
['Sig: 7126', '10.3.5.34', 2]
['Sig: 0559', '10.3.5.42', 1]
['Sig: 7126', '10.3.5.42', 1]
['Sig: 7126', '10.3.5.43', 2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:45:50.907

假设您按前两列分组：

```
import itertools

grouping = itertools.groupby(data, key=lambda i: (i[0], i[1]))
summer = lambda group: sum(i[2] for i in group))
result = [(a, b, summer(group)) for (a, b), group in grouping] 
```

*   [itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)

如果您的输入没有按分组键排序，则需要先对其进行排序：

```
import itertools

grouper = lambda item: (item[0], item[1])
data.sort(key=grouper)
grouping = itertools.groupby(data, key=grouper)

summer = lambda group: sum(i[2] for i in group)

result = [(a, b, summer(group)) for (a, b), group in grouping] 
```

# python - 带有域字段问题的小部件 =“选择”

> ID：16134784
> 
> 赞同：0
> 
> 时间：2013-04-21T18:38:48.617
> 
> 标签：python, xml, openerp

这是我的视图 xml 部分

```
<field name="bpl_estate_id" placeholder="Estate" widget="selection" /> 
```

这是我的模型 python 部分

```
'bpl_company_id':fields.many2one('res.company', 'Company', help='Company'),
'bpl_estate_id':fields.many2one('bpl.estate.n.registration', 'Estate', 
domain="[('company_id','=',bpl_company_id)]"), 
```

我的问题是当我使用房地产字段时，带有小部件选项，然后没有过滤域？（显示所有记录）

请建议我实施这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T08:04:10.173

选择小部件不支持动态域，就这么简单

[https://lists.launchpad.net/openerp-india/msg03333.html](https://lists.launchpad.net/openerp-india/msg03333.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:51:40.413

您必须使用 an`onchange`来动态设置域。[看看这个](http://help.openerp.com/question/11253/how-to-create-dynamic-domain-on-many2one-fields-with-onchange-function/)。

# r - 模拟来自（非标准）密度函数的数据

> ID：16134786
> 
> 赞同：4
> 
> 时间：2013-04-21T18:38:57.557
> 
> 标签：r, simulation, probability

我想模拟来自非标准密度函数的数据。我已经找到了以下链接（[如何最好地使用其概率函数模拟任意单变量随机变量？](https://stackoverflow.com/questions/1594121/r-how-do-i-best-simulate-an-arbitrary-univariate-random-variate-using-its-proba)）。但是，这会产生奇怪的结果。不知何故，这个累积密度函数 ( cdf() ) 不能很好地工作。从某些值来看，它给出了非常奇怪的结果。例如，看看下面的代码：

```
density=function(x)(25*200.7341^25/x^26*exp(-(200.7341/x)^25))
cdf<-function(x) integrate(density,1,x)[[1]]

cdf(9701)
[1] 1

cdf(9702)
[1] 6.33897e-05 
```

所以我的问题是，我怎样才能创建一个“好的”CDF 函数？或者更直接地说，如何模拟 PDF 中的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T21:04:32.210

正如@pjs 所指出的，我们可以使用[拒绝采样](http://en.wikipedia.org/wiki/Acceptance-rejection_method)（有关详细信息，请查看 wiki）。

这是这种方法的一种实现。

最重要的一步是找到一个分布 g，我们可以从中进行采样，并且它存在于 M 中，使得所有点的 M * g > f

```
f <- function(x) (25 * 200.7341^25 / x^26 * exp(-(200.7341/x)^25))
g <- function(x) dnorm(x, mean = 200.7341, sd = 40)
M <- 5
curve(f, 0, 500)
curve(M * g(x), 0, 500, add = TRUE, lty = "dashed") 
```

![在此处输入图像描述](https://i.stack.imgur.com/73AIy.png)

现在，我们可以执行算法了

```
set.seed(42)
k <- 1
count <- 0
res <- vector(mode = "numeric", length = 1000)
while(k < 1001) {
          z <- rnorm(n = 1, mean = 200.7341, sd = 40)
          R <- f(z) / (M * g(z))
          if (R > runif(1)) {
              res[k] <- z
              k  <- k + 1
          }
          count <- count + 1
    }

(accept_rate <- (k / count) * 100)
## [1] 19.7086

require(MASS) ## for truehist
truehist(res)
curve(f, 0, 250, add = TRUE) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/BIblQ.png)](https://i.stack.imgur.com/BIblQ.png)

录取率不是很高。您可以尝试找到更好的包络函数或使用 Metropolis Hasting 算法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T19:10:47.277

如果积分区间很大，那么密度的峰值很难找到：`integrate`很容易错过它，并认为您正在积分的函数处处（几乎）为零。

如果你知道峰值在哪里，你可以将积分分成三个：峰值周围、之前和之后。

```
# Density
A <- 200.7341
f <- function(x) 25*A^25 / x^26 * exp( -(A/x)^25 )
a <- 150
b <- 400

# Numeric integration
F1 <- function(x) {
  if( x < a )      integrate(f, 1, x)[[1]] 
  else if( x < b ) integrate(f, 1, a)[[1]] + integrate(f, a, x)[[1]] 
  else             integrate(f, 1, a)[[1]] + integrate(f, a, b)[[1]] + integrate(f, b, x)[[1]] 
}

# Compare with the actual values
F2 <- function(x) exp( -(A/x)^25 )
F1(200); F2(200)
F1(1e4); F2(1e4)
F1(1e5); F2(1e5) # Imprecise if b is too low... 
```

在检查您的间隔是否足够大后，您可以删除“之前”和“之后”间隔：它们的贡献为零。

```
F1 <- function(x) {
  if( x < a )      0
  else if( x < b ) integrate(f, a, x)[[1]] 
  else             1
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T19:41:57.660

当我玩弄你的 CDF 时，很快发现大部分动作都是针对 180 到 350 之间的 x 进行的，我通过绘制该范围内的密度来确认这一点。

我很确定 x = 9702 处的结果反映了当您涉及 25 次方和 26 次方时计算的数值不稳定性。如果您不信任您的 CDF 或者它不可逆，则另一个基于 pdf 的选项是[接受/拒绝](http://en.wikipedia.org/wiki/Acceptance-rejection_method)。您应该能够使用一个最小值 = 180、最大值约为 300、众数约为 200 的简单三角形作为边界函数 g(x)，并遵循 Wikipedia 上描述的算法以获得相当好的结果。

一般来说，如果反转不适用于任意分布，您的其他选择是 1）基于 pdf 相对于边界函数的接受/拒绝，2）组合（您可以将分布解构为更易于生成的组件并选择一个使用条件概率的适当组件），或 3）“特殊技巧” - 是否存在卷积或参数化给出分布等价的情况（例如，N(0,1)^2 = chi-square(1), chi-square(k) = k 个独立卡方 (1) 的总和，exp(2) = 卡方 (2) 等...)。请参阅[Luc Devroye 的](http://luc.devroye.org/rnbookindex.html)关于非均匀随机变量生成的书，以全面了解您的选择。

# xaml - XAML路径几何的图标（.ico）？

> ID：16134787
> 
> 赞同：0
> 
> 时间：2013-04-21T18:39:07.503
> 
> 标签：xaml, icons, ico

我有一个现有的 Windows 图标 (.ico) 文件，我想在 WPF 应用程序中使用它。有没有什么好的工具可以将 .ico 图标转换为 XAML 路径几何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:02:31.893

XAML 路径是矢量格式，ICO 是位图，因此无法进行简单的转换。

您可以尝试在 Inkscape 等矢量软件中打开 ICO，使用 Paths 对其进行概述，然后将其导出为 XAML。

如果路径不是必需的，您也可以直接在 WPF 应用程序中使用 .ico：只需将其设置为 Image 的 Source。

```
<Image Source="test.ico"/> 
```

# javascript - Internet Explorer 中的 window.XMLHttpRequest 问题（适用于 Chrome）

> ID：16134789
> 
> 赞同：0
> 
> 时间：2013-04-21T18:39:18.833
> 
> 标签：javascript, internet-explorer, google-chrome, xmlhttprequest

我有一个简单的脚本，如下所示：

```
function functionName(code){
var xmlhttp;
if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
    }
else
    {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
xmlhttp.onreadystatechange=function()
    {
    if (xmlhttp.readyState==4)
        {
        var result=xmlhttp.responseText;
        if (result=="FAIL")
        {
            // Alert 
        }
        else
        {
            // Alert
        }
        }
}
xmlhttp.open("GET","script.php?q="+code,true);
xmlhttp.send();
} 
```

我在页面上有一个带有调用该函数的 onclick 命令的按钮：

```
<form action="">
<table><tr><td><input type="text" name="code" id="code" size="4"></td><td><a onclick="functionName(code.value)"><img src="images/button.png" /></a></td></tr></table><br /> 
```

如果 script.php 返回“FAIL”并在所有其他情况下返回另一个警报，则从表单输入中向其发送一个代码，该代码会给出一个响应（它所做的不止于此，但取出所有其他内容并使用警报进行故障排除）。该代码在 Chrome 中运行良好，但在 Internet Explorer 中运行良好。我对此很陌生，所以不知道如何调试它，有什么明显的东西会导致浏览器之间出现问题吗？谢谢你的帮助。

编辑：

我已将其范围缩小到实际上是导致问题的 onclick，因此我将研究为什么这在 IE 中不起作用...

编辑2：

原来它看起来像一个 IE10 怪癖 - 适用于所有其他版本，在兼容性视图中，不知道为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:16:54.653

`.open` clears any previously set `onreadystatechange` handler in IE. Your code should look like this:

```
var xmlhttp = ...;
xmlhttp.open(...);
xmlhttp.onreadystatechange = ...;
xmlhttp.send(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:47:56.057

当您使用 jquery 标记您的问题时 - 我建议您使用更简单的方法而不是复杂的方法（*让 jquery 管理跨浏览器兼容性*）

```
function functionName(code){
  $.get("script.php?q="+code,function(result){
    if (result=="FAIL"){
        // Alert 
    }
    else{
        // Alert
    }
  });
} 
```

**编辑 ：**

更新你的`a`

```
<a href='#' id='getCode'> 
```

**脚本：**

```
$(document).ready(function(){
   $('#getCode').on('click',function(){
      var code = $('#code').val();
      $.get("script.php?q="+code,function(result){
        if (result=="FAIL"){
            // Alert 
        }
        else{
            // Alert
        }
      });
   });
}); 
```

# eclipse - 知道 eclipse 社区的规模吗？

> ID：16134792
> 
> 赞同：0
> 
> 时间：2013-04-21T18:39:28.667
> 
> 标签：eclipse

可能这不是问的正确地方，但我不知道更好的地方。

我已经用谷歌搜索了有关`eclispe`社区贡献者数量的大致信息，但一无所获

任何机构都有线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:10:22.057

[这个网站](http://projects.eclipse.org/projects/eclipse)可以帮助你摆在首位。[此页面](http://projects.eclipse.org/projects/eclipse/developers)还显示了提交者列表。

# mysql - 使用“GROUP BY”和 MySQL 中的最新日期连接多个表

> ID：16134794
> 
> 赞同：1
> 
> 时间：2013-04-21T18:39:35.887
> 
> 标签：mysql, sql, select, join, left-join

我有 2 个 mysql 表

表 1 是“qualitaet-inventar”，有 3000 行，“sachnummer”为 AUTO_INCREMENT

[![](https://i.stack.imgur.com/KveC0.png)](https://i.stack.imgur.com/KveC0.png)

表 2 是“qualitaet”，有几行。这里“id”设置为 AUTO_INCREMENT，重要的是“sachnummer”可以存在很多次。（见图片中的红色标记）

[![](https://i.stack.imgur.com/6s1Kj.png)](https://i.stack.imgur.com/6s1Kj.png)

我想做的是从“qualitaet”到“qualitaet-inventar”的左连接

我想通过在“qualitaet”上显示“创建”的最新日期来对所有“sachnummer”进行分组

并且当“qualitaet”中没有“sachnummer”时，对“qualitaet-inventar”进行空连接

所以我有这个代码

```
SELECT 
    i.`sachnummer` AS id,
    MAX(q.`created`) AS letztemessung,
    i.`sachnummer-name` AS sachnummer
FROM
        `qualitaet-inventar` i
LEFT JOIN
        `qualitaet` q on i.`sachnummer` = q.`sachnummer`
GROUP BY
        sachnummer
ORDER BY
    sachnummer ASC 
```

问题是需要很长时间才能得到这个结果

[![](https://i.stack.imgur.com/98Mim.jpg)](https://i.stack.imgur.com/98Mim.jpg)

使用此代码，它可以更快地工作

```
SELECT 
    q.`sachnummer` AS id,
    MAX(q.`created`) AS letztemessung,
    i.`sachnummer-name` AS sachnummer
FROM
    qualitaet q
LEFT JOIN
    `qualitaet-inventar` i on q.`sachnummer` = i.`sachnummer`
GROUP BY
    sachnummer
ORDER BY
    sachnummer ASC 
```

但我没有得到这个代码的洞库存和空日期

[![](https://i.stack.imgur.com/kvdPD.jpg)](https://i.stack.imgur.com/kvdPD.jpg)

对于高表行，是否有可能以更快的方式获得此表？:D

[![](https://i.stack.imgur.com/8DNtk.jpg)](https://i.stack.imgur.com/8DNtk.jpg)

编辑：

这是我的索引

[![](https://i.stack.imgur.com/KyvvX.jpg)](https://i.stack.imgur.com/KyvvX.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:59:32.397

以下*不应该*比您现有的查询更快 - 但根据您的描述，*可能*会：

```
SELECT i.`sachnummer` AS id,
       MAX(q.`created`) AS letztemessung,
       i.`sachnummer-name` AS sachnummer
FROM `qualitaet-inventar` i
JOIN `qualitaet` q on i.`sachnummer` = q.`sachnummer`
GROUP BY sachnummer
UNION ALL
SELECT i.`sachnummer` AS id,
       q.`created` AS letztemessung,
       i.`sachnummer-name` AS sachnummer
FROM `qualitaet-inventar` i
LEFT JOIN `qualitaet` q on i.`sachnummer` = q.`sachnummer`
WHERE q.`sachnummer` IS NULL
ORDER BY sachnummer ASC 
```

另一种可能：

```
select id, max(letztemessung) as letztemessung, max(sachnummer) as sachnummer
from
(SELECT `sachnummer` AS id,
        `created` AS letztemessung,
        '' AS sachnummer
 FROM `qualitaet` q
 UNION ALL
 SELECT `sachnummer` AS id,
        cast(null as datetime) AS letztemessung,
        `sachnummer-name` AS sachnummer
 FROM `qualitaet-inventar` i
) sq
group by id 
ORDER BY sachnummer ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:46:27.060

这是一般的想法，表名更短。

```
select somefields
from table1 t1 left join table2 t2 on t1.something = t2.something
join (
select something, max(datetimefield) maxdt
from table1
where whatever
group by something
)  t3 on t1.something = t3.something
and t1.datetimefield = maxdt
where whatever 
```

# php - Smarty - 在 foreach 列表中添加 html 标签

> ID：16134799
> 
> 赞同：0
> 
> 时间：2013-04-21T18:39:57.547
> 
> 标签：php

我有一个加密脚本，我无法修改 PHP 文件，只能修改 HTML 模板文件，我正在尝试修改一些页面。

我想要做的是用一些类别填充一个列表，但是在一定数量的类别之后我想添加一个 HTML 标记。我在管理面板中有这个选项，但视频不是类别。对于视频我有这个代码：

```
 {foreach from=$array_recently_added_videos item=video name=videos}
<div class="video">
html code here..
</div>

        {if ($smarty.foreach.videos.index+1)%$aSettings.videos_cols==0}<br class="clear">{/if}
        {foreachelse}
          <center><br><b>No videos where found.</b><br></center>
        {/foreach} 
```

因此，如果我在管理面板中设置 5 列视频。在 5 个视频之后，它会宣传这段 html 代码

```
<br class="clear"> 
```

我想对类别做同样的事情。我在这里迷路了。这是我的代码。

```
{foreach from=$array_groups[$group_id] item=categ name=categs}

                                  <input type='checkbox' name='{$categ.category_id}' value='{$categ.category_id}'  id='{$categ.category_id}' ><label for='{$categ.category_id}' >{$categ.category_name}</label><br>

        {if ($smarty.foreach.categs.index+1)%$aSettings.videos_cols==0}</td><td valign='top' align='left'>{/if}               

{/foreach} 
```

它在 5 个类别之后添加了这段 HTML 代码`</td><td valign='top' align='left'>`，但我想为类别添加自定义编号，而不是为视频设置的编号。我不知道用什么来更改此代码`%$aSettings.videos_cols==0`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:48:32.293

改变，

```
 {if ($smarty.foreach.categs.index+1)%$aSettings.videos_cols==0}</td><td valign='top' align='left'>{/if} 
```

至

```
 {if ($smarty.foreach.categs.index+1)%5==0}</td><td valign='top' align='left'>{/if} 
```

只需更改数字 5。

# javascript - 尝试使用 JavaJascript 连接到 Google Profiles API（域的联系人）

> ID：16134800
> 
> 赞同：1
> 
> 时间：2013-04-21T18:40:09.240
> 
> 标签：javascript, google-api

我正在尝试连接到域配置文件，但没有用于此的 Javascript 库。

我已经尝试了很多东西，但无法让它发挥作用。

```
var xhr = new XMLHttpRequest();
var oauthToken = gapi.auth.getToken();
xhr.open('GET',
   'https://www.google.com/m8/feeds/profiles/domain/ditotest.com/full');
   xhr.setRequestHeader('Authorization','Bearer ' + oauthToken.access_token);
   xhr.setRequestHeader('Gdata-version', '3.0');
xhr.send(null);

console.log(xhr.status); 
```

这个错误：

```
Uncaught Error: InvalidStateError: DOM Exception 11 index.html:102
OPTIONS https://www.google.com/m8/feeds/profiles/domain/ditotest.com/full 405 (Method Not Allowed) index.html:100
XMLHttpRequest cannot load https://www.google.com/m8/feeds/profiles/domain/ditotest.com/full. Origin https://googledrive.com is not allowed by Access-Control-Allow-Origin. index.html:1 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:52:33.513

您不能对另一个域（跨域）执行 XMLHttpRequest。您将不得不尝试使用 JSONP，但不确定该 API 是否接受参数 &callback=

所以客户端，非常艰难。

您可以做的是“代理它”，当我需要来自其他域的浏览器中的信息时，我通常会这样做。创建一个调用远程 URL 的服务器脚本（例如 php）并使 javascript 调用本地服务器脚本。

祝你好运！

# iphone - Uimageview 多个

> ID：16134804
> 
> 赞同：0
> 
> 时间：2013-04-21T18:40:32.560
> 
> 标签：iphone, ios6

如何在单个页面上设置多个自定义 Ui 图像视图，使用户能够从相机胶卷中选择图像。之前在任何教程网站上都没有真正看到过这样做，希望有人知道 wgat 可以在这里做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:54:19.393

我认为最简单的方法是使用 UIButton 并在其中设置图像。

这为您提供了视图的触摸功能，并且可以很容易地知道按下了哪个按钮/图像。

链接：[https ://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html](https://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:12:35.520

我建议阅读 UICollectionViews。这正是它们的用途。每个单元格都是可点击的，这反过来又会调出 UIImagePicker，通过使用 cellForRowAtIndexPath 为该单元格选择不同的图像。看看几个[教程](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

# sql - 使用查询以天为单位显示

> ID：16134806
> 
> 赞同：1
> 
> 时间：2013-04-21T18:40:36.007
> 
> 标签：sql, ms-access-2007

很抱歉再次打扰你们，我正在寻找任何其他解决方案来解决我的问题，但我找不到一个或者我很着急。我有一个名为“Employee”的表，其中包含 id、name、login 和 logout。

像这样

```
EmpID NAME  Login               Logout
0   t1     2013-04-11 01:00:00  2013-04-11 01:01:00
1   t2     2013-04-11 01:00:00  2013-04-11 01:01:00
2   t3     2013-04-11 01:00:00  2013-04-11 01:01:00
0   t1     2013-04-13 01:00:00  2013-04-13 01:01:00
1   t2     2013-04-14 01:00:00  2013-04-14 01:01:00
1   t2     2013-04-15 01:00:00  2013-04-15 01:01:00
2   t3     2013-04-15 01:00:00  2013-04-15 01:01:00 
```

但我想像这样显示数据

```
EmpID NAME    11            13          14                15
0   t1      60              60  
1   t2      60                           60               60
2   t3      60                                            60 
```

已编辑：已使用此查询表代码示例在 MSaccess 中的数据透视表上创建了目标显示：

```
SELECT Employee.EmpID, Employee.EName, Sum(DateDiff("s",Punches.LogIN,Punches.LogOUT)) AS THours, day(Punches.LogIN) AS days
FROM Employee LEFT JOIN Punches ON Employee.EmpID = Punches.EmpID
GROUP BY Employee.EmpID, Employee.EName, day(Punches.LogIN)
ORDER BY Employee.EmpID; 
```

有人可以告诉我如何在我的程序中使用创建的数据透视表吗？喜欢查询？

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:21:59.417

搜索 Access Pivot。这将满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:43:09.180

您可以使用 MS Access TRANSFORM/PIVOT 来获得结果。基本语法将是：

```
TRANSFORM max(datediff("n", login, logout))
SELECT id, name
FROM yourtable
GROUP BY id, name
PIVOT format(login, "mm/dd/yyyy") 
```

# sorting - jQuery tablesorter 插件背后的多列排序的排序算法

> ID：16134813
> 
> 赞同：2
> 
> 时间：2013-04-21T18:41:11.067
> 
> 标签：sorting, tablesorter

我发现当我使用插件的多列排序功能时。第一行被正确排序，第一行项目相同的第二行项目被排序。

我有两列包含百分比，并希望将它们从最高的附加分数（从两列的总和）排序到最低。

```
So: 0.9 | 0.2    Rather then: 0.9 | 0.2
    0.6 | 0.4                 0.7 | 0.1
    0.6 | 0.3                 0.6 | 0.4
    0.7 | 0.1                 0.6 | 0.3
    0.3 | 0.4                 0.3 | 0.4 
```

在 jquery-tablesorter 中这种行为可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T18:38:12.440

我想我正在切换到 jQuery DataTables 插件。它允许定义自己的排序功能和其他花哨的东西。

# c# - 遍历 0 和 1 的 int[,] 数组

> ID：16134818
> 
> 赞同：3
> 
> 时间：2013-04-21T18:41:30.993
> 
> 标签：c#, multidimensional-array, int, 2d-games

**草书文字：较早的条目**

**普通文本：最新条目**

*好的，所以我有一个 2D 整数数组，更具体地说，是 0 和 1。最初这是一个 BMP 文件（黑白），我将其转换为一个整数数组。现在，矩阵表示一张地图，其中 0 是我可以站立的位置（如果你愿意的话，可以是地板），而 1 是深渊或墙壁（你不能站在 1 中）。所以我需要通过这个随机的整数数组，但我需要能够通过地图的所有 0。我是否多次访问“像素”都没关系这有什么意义？我有一种方法可以“隐藏”地图中的 4 个键，我的角色必须在地图中找到它们。我的角色只能上下左右移动。不允许对角线移动，显然也不允许传送。到目前为止，我有这个代码：*

```
public void goThrough(int[,] map, int[] pos)
{
    int i = pos[0], j = pos[1]  ;
    while( i < map.GetLength(0) && j < map.GetLength(1) )
    {
        int cont = 0;
        if (map[i, j] == 0) 
        { 
            if (map[i, j + 1] == 0 && cont == 0 ) { j++; cont++; }
            if (map[i + 1, j] == 0 && cont == 0) { i++; cont++; }
            if (map[i, j - 1] == 0 && cont == 0 ) { j--; cont++; }
            if (map[i - 1, j] == 0 && cont == 0 ) { i--; cont++; }
        }
        if (map[i, j] == 1)
        {
        }
    }
}

public int[] Position(int[,] map)
{
    int[] pos = { 0, 0 };

    for (int i = 0; i < map.GetLength(0) && map[pos[0], pos[1]] == 1; i++)
    {
        for (int j = 0; j < map.GetLength(1) && map[pos[0], pos[1]] == 1; j++)
        {
            pos[0] = i;
            pos[1] = j;
        }
    }
    return pos;
} 
```

*它显然有一些错误。请发送一些反馈！也许对这种代码有一些经验的人可以帮助我一点：D。*

*Edit1：很抱歉我没有指定语言。这是 C#。为了快速更新：我尝试创建另一个 int[,] （与第一个完全相同），每次我的“资源管理器”通过任何 (x,y) 时，我都会在这个位置添加一个 (1) （第二个，复制的）数组。通过这种方式，我可以制作一种方法来识别我何时完全“探索”地图。此外，使用这个“复制”数组，如果我处于探索者之前的位置，我可以选择另一个方向（那个点在第二个数组中不会是 0，实际上，每次探索者经过那个点时，它将向数组中的该位置添加一 (1)）。这个想法是让探险者在经过同一个地点一次、两次或更多次时表现不同……但所有这些都不起作用。我'*

EDIT2：现在我有这个代码：

```
 public void goThrough(int[,] map, int[] pos, bool[,] visited)
    {
        int x = pos[0];
        int y = pos[1];
        visited[x, y] = true;
        Console.WriteLine("Position -> Column: {0} || Row: {1}", x, y);
        // ShowAtPosition(x, y)
        if (y > 0 && map[x, y - 1] == 0 && !visited[x, y - 1])
        {
            goThrough(map, new[] { x, y + 1 },visited); // north
            // ShowAtPosition(x, y)
        }
        if (x < map.GetLength(0) - 1 && map[x + 1, y] == 0 && !visited[x + 1, y])
        {
            goThrough(map, new[] { x + 1, y }, visited); // east
            // ShowAtPosition(x, y)
        }
        if (y < map.GetLength(1) - 1 && map[x, y + 1] == 0 && !visited[x, y + 1])
        {
            goThrough(map, new[] { x, y - 1 }, visited); // south
            // ShowAtPosition(x, y)
        }
        if (x > 0 && map[x - 1, y] == 0 && !visited[x - 1, y])
        {
            goThrough(map, new[] { x - 1, y }, visited); // west
            // ShowAtPosition(x, y)
        }
        if (NoZeros(visited)) { Console.WriteLine("I went through everything!"); Console.ReadLine(); }

    } 
```

请注意我放置的 WriteLine，因此我可以跟踪此递归方法的每次迭代。这是输出：

```
Position -> Column: 1 || Row: 31
Position -> Column: 2 || Row: 31
Position -> Column: 3 || Row: 31
Position -> Column: 4 || Row: 31
Position -> Column: 5 || Row: 31
Position -> Column: 6 || Row: 31
Position -> Column: 7 || Row: 31
Position -> Column: 8 || Row: 31
Position -> Column: 9 || Row: 31
Position -> Column: 10 || Row: 31
Position -> Column: 10 || Row: 32
Position -> Column: 11 || Row: 31
Position -> Column: 12 || Row: 31
Position -> Column: 13 || Row: 31
Position -> Column: 13 || Row: 32
Position -> Column: 14 || Row: 31
Position -> Column: 15 || Row: 31
Position -> Column: 16 || Row: 31
Position -> Column: 16 || Row: 32
Position -> Column: 17 || Row: 31
Position -> Column: 18 || Row: 31
Position -> Column: 19 || Row: 31
Position -> Column: 20 || Row: 31
Position -> Column: 21 || Row: 31
Position -> Column: 22 || Row: 31
Position -> Column: 23 || Row: 31
Position -> Column: 24 || Row: 31
Position -> Column: 25 || Row: 31
Position -> Column: 25 || Row: 30
Position -> Column: 1 || Row: 30 
```

所以，首先，这个方法没有穿过所有的迷宫，甚至没有关闭（是的，0 都是连接的）。

其次，在最后一次迭代中（输出的最后 2 行），资源管理器从 (25,30) “传送”到 (1,30)。

顺便说一句，这是图像：

![白色 =0 和黑色 =1](https://i.stack.imgur.com/z2Lkp.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:51:12.597

起初听起来你只是在寻找一个[解决迷宫的算法](https://en.wikipedia.org/wiki/Maze_solving_algorithm)；类似于左手墙的追随者。

但是，您不是在寻找走出迷宫的路径，而是在寻找具有相同值的所有连续位置。所以基本上你可以使用[洪水填充算法](https://en.wikipedia.org/wiki/Flood_fill_algorithm)。

唯一的问题是您可能有多个`0`未连接的 s 池（除非您的原始位图被构造为使所有 0 都被连接，在这种情况下，您可以确保所有键都可以通过只放置它们来访问0 个细胞）。因此，您可能需要从多个起点进行洪水填充，以确保覆盖所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T22:57:06.793

您可以创建一棵树，其中包含您遇到的所有可能路径。每个节点代表地图中的某个点，所有子节点代表您可以前往的有效点。每个访问过的点都被标记，这样您就不会再次尝试访问它。如果您随后执行深度优先树搜索，您可以四处走动，直到您探索完所有可能的位置。每当您遇到访问过的节点时，您都​​不会再去那里。下面执行递归深度优先搜索。对于大型地图，您将需要一个非递归解决方案，否则您将获得 StackOverflowException。

```
private bool[,] visited; // needs to have same size as map
public void GoThrough(int[,] map, int[] pos) {
  int x = pos[0];
  int y = pos[1];
  visited[x, y] = true;
  // ShowAtPosition(x, y)
  if (y > 0 && map[x, y - 1] == 0 && !visited[x, y - 1]) {
    GoThrough(map, new [] {x, y - 1}); // north
    // ShowAtPosition(x, y)
  }
  if (x < map.GetLength(0) - 1 && map[x + 1, y] == 0 && !visited[x + 1, y]) {
    GoThrough(map, new [] {x + 1, y}); // east
    // ShowAtPosition(x, y)
  }
  if (y < map.GetLength(1) - 1 && map[x, y + 1] == 0 && !visited[x, y + 1]) {
    GoThrough(map, new [] {x, y + 1}); // south
    // ShowAtPosition(x, y)
  }
  if (x > 0 && map[x - 1, y] == 0 && !visited[x - 1, y]) {
    GoThrough(map, new [] {x - 1, y}); // west
    // ShowAtPosition(x, y)
  }
} 
```

它将遍历整个地图和所有可到达的图块，然后返回起点。

本质上，这是 Matthew Strawbridge 提到的洪水填充算法（当我输入答案时）。

# css - 如果您在 chrome 中缩小，菜单布局会中断

> ID：16134820
> 
> 赞同：0
> 
> 时间：2013-04-21T18:41:35.353
> 
> 标签：css

请访问[网站](http://www.iamvishal.com/pureecn/)

在 chrome 中，如果您放大到`75%`二级菜单，则如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/65OQb.png)

stackoverflow 上有很多相关的主题。我尝试了它们，但它对我不起作用。我尝试过的一些事情：

1.  `position: absolute`;
2.  将我的容器从 更改`div`为`span`;
3.  将字体从 更改`px`为`em`;

知道如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:52:55.013

似乎问题与财产有关`width`。如果您像这样删除或修改`#secondary_links`宽度为`100%`：

```
#secondary_links {
    color: #0076AB;
    font-family: Times New Roman,Times,serif;
    font-size: 17px;
    margin-top: 8px;
    padding-left: 228px;
    width: 100%;
    min-width: 764px;
    float: right;
    position: absolute;
} 
```

# c++ - 如何限制 C++ 中用户输入的最大字符数？

> ID：16134822
> 
> 赞同：2
> 
> 时间：2013-04-21T18:41:55.850
> 
> 标签：c++, cin, iomanip, setw

我想要这样当用户输入超过 5 个字符时，会发生一些事情，而不是跳过其余的。

在此代码中，如果您输入超过 5 个字符，它将只显示前 5 个字符。我想在这里放一个“if”语句，如果用户输入超过 5 个字符，它将显示错误或其他内容，而不仅仅是显示前 5 个字符。

```
#include <iostream>
#include <iomanip>

int main()
{
using namespace std;
string nationname;
int maxchar = 5;
cout << "What is the name of your nation?\n";

cin >> setw(maxchar) >> nationname;

cout << "The name of your nation is " << nationname;
cin.ignore();

return 0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:48:11.813

您可以先完整读取字符串，然后对其进行验证：

```
int main()
{
    using namespace std;

    const int maxchar = 5;
    string nationname;

    cout << "What is the name of your nation?" << endl;

    cin >> nationname;

    if (nationname.size() > maxchar)
    {
       err << "The input is too long." << endl;
       return 1;
    }

    // ...
} 
```

顺便说一句，您应该`std::endl`在提示时使用，而不仅仅是`\n`; 您要确保在开始等待用户输入之前将提示刷新到屏幕上。（编辑：正如 Loki Astari 在评论中指出的那样，这部分实际上并不是必需的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T06:18:47.510

**

```
#include <iostream>
#include <iomanip>
#include<string>
#include <conio.h>
int main() {
    using namespace std;
    const int maxchar = 6;
    string nationname;
    cout << "What is the name of your nation?" << endl;
    getline(cin, nationname);
    if (nationname.size() > maxchar)
    {
       cout << "The input is too Short." << endl;
    }   getch(); 
    return 0; 
} 
```

**

您可以使用此代码。这是完美的工作，没有任何错误。您也可以将其转换为最小字符输入，只需进行少量更改。

# vb.net - Rhino.Mocks 与 vb.net

> ID：16134824
> 
> 赞同：0
> 
> 时间：2013-04-21T18:41:56.973
> 
> 标签：vb.net, visual-studio-2010, rhino-mocks

我刚刚在 vs2010 中通过 nuget 包管理器安装了 rhinomocks。

我试图导入 rhino.mocks

```
Imports Rhino.Mocks 
```

但它一直在说

`"Namespace or type specificed in the Imports 'Rhino.Mocks' doesn't contain any public member or cannot be found. Make sure the namespace or the type is defined contains at least one public member. Make sure the imported element name doesn't use any aliases."`

有谁知道出了什么问题？

我检查了我的项目下的参考资料，我确实看到了 Rhino.Mocks 作为其中的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:56:20.653

嗯，我刚刚从该站点下载了 rhinomock 3.6 并手动添加了参考并工作。不知道为什么当我通过 nuget 添加它时它不起作用。但是问题解决了！

# jqgrid - 如何在 jqgrid 中使用 editData 或 onclickSubmit 发布可变数据

> ID：16134827
> 
> 赞同：1
> 
> 时间：2013-04-21T18:42:14.400
> 
> 标签：jqgrid

我无法获得 editData 或 onclickSubmit 来做我需要的事情。

我希望网格在更新后跟随添加或编辑的行。所以，我需要发布一些额外的信息，以便服务器可以返回添加/编辑记录的 id 和正确页面。

我可以使用 addfunc 和 editfunc 以及自定义表单来做到这一点，但我想用 jqgrid 生成的表单来做到这一点。

我在 DocumentReady 函数之前声明了一个全局变量。然后，我尝试在编辑参数中使用 editData 并在 beforeSubmit 或 beforeInitData 中设置变量。变量发布到服务器，但仅在它们最初声明时发布。似乎 editData 是在初始化时创建的，无法更新。我也尝试使用 onclickSubmit，但也无法正常工作。

这是一个经过编辑的示例：

```
var data2pass = {};
    data2pass['sortColumnName'] = '';
    data2pass['sortOrder'] = '';
    data2pass['rowNum'] = '';

$(document).ready(function(){

  $("#ProdGrid").jqGrid({
    url:'products_DAT.php?thespot=server_ProdGrid',
    datatype: 'json',
    mtype: 'POST',
    colNames:['ID','Product Name:','Category:','Unit Price:'],
    colModel :[ 
      {name:'ProductID', editable:true},
      {name:'ProductName', editable:true},
      {name:'CategoryID', editable:true, edittype:"select", editoptions: { dataUrl:  "products_DAT.php?thespot=select4_CategoryID" }},
      {name:'UnitPrice', align:'right', editable:true, formatter:'currency'}
    ],
    pager: '#ProdGrid_pager',
    rowNum: 15,
    sortname: 'ProductName',
    sortorder: 'asc',
    gridview: true,
    editurl: 'products_DAT.php?thespot=update_ProdGrid',
    height: 'auto'
  });

$("#ProdGrid").jqGrid('navGrid','#ProdGrid_pager', {},
{closeAfterEdit:true, reloadAfterSubmit: false, editData: data2pass,
    beforeInitData: function(formid) { 
    data2pass['sortColumnName'] = 'ProductName';
    data2pass['sortOrder'] = 'asc';
    data2pass['rowNum'] = '15';
    }
}, // Edit parameters
{}, // Add Parameters
{reloadAfterSubmit:true}, // Delete parameters
{}, // Search params
{} // View params
 ); 
```

但是，最初声明的 data2pass 变量是发布到服务器的内容。我应该使用什么事件来更新 data2pass 的值以发布到服务器？或者还有其他更好的方法吗？

任何意见是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T19:15:50.050

You can either define properties of `editData` using functions

```
editData: {
    sortColumnName: function () { return "ProductName"; },
    sortOrder: function () { return "asc"; },
    rowNum: function () { return 15; }
} 
```

or use callback `onclickSubmit` to extend the data posted to the server

```
onclickSubmit: function (options, postData) {
    return {
        sortColumnName: "ProductName",
        sortOrder: "asc",
        rowNum: 15
    };
} 
```

or use `serializeEditData` callback

```
serializeEditData: function (postData) {
    return $.extend(true, {}, postData, {
        sortColumnName: "ProductName",
        sortOrder: "asc",
        rowNum: 15
    });
} 
```

Every from above ways do the same. You can choose one way which you find the mostly convenient for your requirements.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:54:26.210

我认为这应该完全符合您的要求，它会更改发送到控制器的 postData 变量，然后触发重新加载。

```
$('#gridName').jqGrid('setGridParam', { postData: { KeyName: KeyValue } }).trigger('reloadGrid', [{ page: 1}]); 
```

如果您需要它作为编辑的一部分，您几乎可以做同样的事情

```
$(#gridName).jqGrid('editGridRow', rowid, { editData: { KeyName: KeyValue 
```

# android - 从 OS X 浏览 android 应用程序数据库

> ID：16134828
> 
> 赞同：0
> 
> 时间：2013-04-21T18:42:14.910
> 
> 标签：android, database

我想浏览嵌入在我的应用程序中的 sqlite3 数据库（在有根设备上）。我成功使用`adb shell`.

问题是，在`/data/data/com.myapp.foobar`我只找到 onde 文件夹 : `lib`。

如何`databases`从我的计算机终端 (OS X) 浏览丢失的文件夹？

问候

# orchardcms - 不同电脑上的Orchard源码版本（团队基础服务器）

> ID：16134831
> 
> 赞同：1
> 
> 时间：2013-04-21T18:42:19.787
> 
> 标签：orchardcms, orchardcms-1.6

在我的笔记本电脑上安装源 Orchard 时大约 450MB，而我的桌面上的 Orchard 超过 1.3 GIG。除了添加一个新主题以及一些模块和布局更改之外，我没有在 Orchard（桌面）上添加任何内容。

我已经在团队基础服务器上签入了我的 Orchard 项目，但无法让它在我的笔记本电脑上运行。

查看错误列表时，它显示了近 500 个错误（似乎我因为某种原因缺少了几个 Orchard 的核心部分？）。

下面是一些生成的错误（所有 Orchard 文件）。

```
The type or namespace name 'Autofac' could not be found (are you missing a using directive or assembly reference?)

The type or namespace name 'FluentHibernate' could not be found (are you missing a using directive or assembly reference?)

... 
```

在我的笔记本电脑上做了以下步骤：

1.  下载了 Orchard 的源代码版本（1.6）
2.  在 Visual Studio 中提取并运行 .sln 文件（到目前为止没有问题）
3.  在团队基础服务器上登录
4.  “获取最新版本”
5.  错误....

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:07:29.717

听起来您需要启用 Nuget 包还原，以便自动下载包而不是使用源代码签入。右键单击解决方案资源管理器中的解决方案，然后选择启用 Nuget 包还原。如果您启动包管理器控制台

> 工具 > 库包管理器 > 包管理器控制台

您应该会看到一条错误消息，指出您的解决方案缺少软件包。

# haskell - Haskell 无法访问的代码错误？

> ID：16134836
> 
> 赞同：6
> 
> 时间：2013-04-21T18:42:36.903
> 
> 标签：haskell, compiler-errors, gadt

假设我有以下（错误的）代码。

```
data A a b where
  APure ::  (A a b)
  AApply :: A (A b c) c

test :: (A a b) -> a -> b
test (APure) a = a
test AApply a = undefined 
```

然后 GHC 会给我这个错误：

```
Couldn't match type `b' with `A b1 b'
  `b' is a rigid type variable bound by
      the type signature for test :: A a b -> a -> b
Inaccessible code in
  a pattern with constructor
    AApply :: forall c b. A (A b c) c,
  in an equation for `test'
In the pattern: AApply
In an equation for `test': test AApply a = undefined 
```

这个错误信息不是完全错误的吗？该错误与 AApply 无关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T19:57:58.700

> 这个错误信息不是完全错误的吗？该错误与`AApply`.

不完全的。可以说，您收到该错误消息是一个错误，但它并非完全偏离基础。

看片断后一起看整体。

```
test (APure) a = a 
```

说我们有一个功能

```
test :: A a b -> r -> r 
```

把它和签名放在一起

```
test :: (A a b) -> a -> b 
```

并统一，忽略第一个方程的类型错误，类型被细化为

```
test :: A r r -> r -> r 
```

然后看方程

```
test AApply a = undefined 
```

看看在提炼的类型下是如何无法访问的，因为

```
AApply :: A (A b c) c 
```

将需要

```
c ~ A b c 
```

if`AApply`是一个有效的第一个参数。

# c++ - Windows 键钩冻结

> ID：16134850
> 
> 赞同：0
> 
> 时间：2013-04-21T18:44:14.783
> 
> 标签：c++, windows, visual-studio-2012, global, keyhook

当我运行这个程序时，我的计算机似乎死机并且无法执行任何操作。我认为这是因为我出于某种原因总是调用键盘辅助函数？这可能与我在程序底部的暂停有关还是更多。暂停头和函数中包含的所有内容都是**getchar()**

```
#include "pause.h"
#include <iostream>
#define null NULL
#include <Windows.h>
#pragma comment(lib,"user32.lib")

using namespace std;
HHOOK hHook=null;
char word[]="hello"; 

LRESULT CALLBACK KeyboardHelper(int nCode, WPARAM wParam,LPARAM lParam)
{
    return CallNextHookEx(hHook,nCode,wParam,lParam);
}

int main(void)
{

    hHook=SetWindowsHookEx(WH_KEYBOARD_LL,KeyboardHelper,null,0);
    if(hHook==null)
    {
        cout<< "Hook failed"<<endl;
    }else 
    {
        cout<< "Worked"<<endl;
    }
    pause();
} 
```

# c# - 用公钥解密，openssl_public_decrypt 之类的

> ID：16134851
> 
> 赞同：1
> 
> 时间：2013-04-21T18:44:24.380
> 
> 标签：c#, openssl, rsa

我有一个向我发送加密消息的服务器。
此消息使用服务器的私钥加密，我正在尝试使用公钥对其进行解密。
verify 方法不符合我的需要，因为它返回 true 或 false。

我发现 OpenSSL 有一个名为 openssl_public_decrypt 的方法。
我尝试使用 OpenSSL .Net 包装器并没有设法让它工作。

所以我在这里问是否有另一个库可以用公钥解密并返回解密的消息，比如 OpenSSL 的？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:16:24.880

Private key is usually intended for decryption, but in the situation you described, another approach is used. Server decrypts data with private key, and then sends it to the client. That way, when client encrypts the received message with public key, it gets the original data.

If you are developing server and client, you should try this approach. And if the server belongs to someone else, they probably use it already.

As for implementation, you can try built-in .Net classes for assymetric encryption. Assuming server uses RSA algorithm for encryption, you can use RSACryptoServiceProvider class.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:40:13.823

如果你想自己做加密，你可能想看看这里 [https://stackoverflow.com/a/15706744/706119](https://stackoverflow.com/a/15706744/706119)

我为另一个问题写了这个，但你可能可以在你的场景中使用它

这是一个使用 Bigint 的小型 RSA 实现......你必须自己处理填充，但你可以用这种方式解密......

# ruby-on-rails - Nokogiri-我如何将我的答案分成看起来干净的哈希？

> ID：16134852
> 
> 赞同：0
> 
> 时间：2013-04-21T18:44:26.933
> 
> 标签：ruby-on-rails, ruby, nokogiri

我正在使用 nokogiri 来解析一些 html 并给我页面上的所有结果。我想最终设置成一个像

```
:address => "xxx"
:unit => "xx"
:url => "www.xxx.com"
:price => "$xxx 
```

现在我的代码看起来像

```
def initialize(type, num)
@type = type
@url = "http://xxxx.com/ny/#{type}/location/status:open?page=#  {num}&sort_by=price_desc"
@num = num
@nodes = Nokogiri::HTML(open(@url + @type + @num))

end

def summary

listing_data = @nodes
        hash = ["listing_class",listing_data.css(
        'div#content div.content_inner div.section  
        div.supercolumn 
        div.column 
        div.block 
        div.items 
        div#pages 
        div.unsponsored 
        div.item.compact 
        div.item_inner 
        div.body 
        h3 
        a').text, 
        "address", 
        listing_data.css(
            'div#content 
            div.content_inner 
            div.section 
            div.supercolumn 
            div.column 
            div.block 
            div.items 
            div#pages 
            div.unsponsored 
            div.item.compact 
            div.item_inner 
            div.body 
            h3 
            a').text, 
        "unit", 
        listing_data.css(
            'div#content 
            div.content_inner 
            div.section 
            div.supercolumn 
            div.column 
            div.block 
            div.items 
            div#pages 
            div.unsponsored 
            div.item.compact 
            div.item_inner 
            div.body 
            h3 
            a').text, 
        "price", 
        listing_data.css(
            'div#content 
            div.content_inner 
            div.section 
            div.supercolumn 
            div.column 
            div.block 
            div.items 
            div#pages 
            div.unsponsored 
            div.item.compact 
            div.item_inner 
            div.more 
            h3 
            span').text]
a = Hash[*hash]

end
rentals = Listing.new("rentals", "1")
puts rentals.summary

end 
```

我遇到的问题是我的输出将所有内容混杂在一起，并且没有逗号分隔。

任何建议将不胜感激。

哦，输出看起来像 -

```
{"listing_class"=>["156 Sullivan Street192 Sixth Avenue77 Sullivan Street196 Sixth Avenue77 Sullivan535 Broadway67 Thompson Street145 Sixth Avenue"], "address"=>"156 Sullivan Street192 Sixth Avenue77 Sullivan Street196 Sixth Avenue77 Sullivan535 Broadway67 Thompson Street145 Sixth Avenue481 Greenwich Street109 Mercer Street", "unit"=>"156 Sullivan Street192 Sixth Avenue77 Sullivan Street196 Sixth Avenue77 Sullivan535 Broadway67 Thompson Street145 Sixth Avenue481 Greenwich Street109 Mercer Street", "price"=>"$4,295$2,550$5,500$4,300$5,600$10,000(NO FEE)$2,300$"} 
```

# java - 使用java rmi激活系统的主要目的是什么？

> ID：16134853
> 
> 赞同：3
> 
> 时间：2013-04-21T18:44:28.230
> 
> 标签：java, rmi

首先，我正在阅读关于rmi规范的java官方文档。 [http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/index.html](http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/index.html) [http://docs.oracle.com/javase/7/docs/platform/rmi/spec/rmi-activation2 .html](http://docs.oracle.com/javase/7/docs/platform/rmi/spec/rmi-activation2.html)

oracle网站列出的java rmi中的特性，除了rmi激活部分外，很容易理解。我已经阅读了rmi激活机制的详细文档，但对实际场景中的有用实践仍然一无所知。

因此，这些是几个真正让我困惑的问题如下：

1.  关于文档，rmid 是一个路由器，它指定远程 rmi 服务器，并且只将服务器信息返回给客户端一次。这看起来与 rmiregistry 类似的功能是服务器注册服务的地方。如果我们没有它有什么区别？
2.  此机制是否包括服务器自动恢复或故障转移功能？换句话说，我已经知道远程 rmi 服务器应该在 RMID 上注册，如果远程 rmi 服务器之一（可能在不同的机器上）崩溃了，RMID 可以检测到这个并触发这个远程 rmi 服务器弹跳吗？
3.  是否可以通过使用 rmi API 来实现 rmid 的功能，以便在我定制的独立服务器中运行相同的功能，而不是使用 JDK RMID 工具。例如，工具**rmiregistry**可以替换为 rmi API`LocateRegistry.createRegistry(regPort);`

请告知或提供相关材料，先谢谢了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-21T22:06:30.423

> 关于文档，rmid 是一个路由器，它指定远程 rmi 服务器，并且只将服务器信息返回给客户端一次。

不，文档没有这么说。'rmid' 是一个守护进程，如果远程对象尚未运行，它会启动它。

> 这看起来像 rmiregistry 的类似功能

不。

> 此机制是否包括服务器自动恢复或故障转移功能？

如果包含已激活远程对象的 JVM 退出，或者已激活的远程对象自行取消激活，rmid 将按需重新启动它。

> rmid 是否可以在独立服务器中运行，并通过 java API 而不是 rmi 工具进行初始化？

我不明白这个问题。

# facebook - Facebook 开发者、好友访问

> ID：16134858
> 
> 赞同：1
> 
> 时间：2013-04-21T18:44:57.477
> 
> 标签：facebook

我想开发一个 facebook 应用程序，但是我不确定 facebook 是否允许开发人员访问用户的朋友列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:25:05.747

`GET`您可以通过向 发出请求来获取用户的朋友`<user_fb_id>/friends`。在此处阅读更多信息：[图形 API 文档](http://developers.facebook.com/docs/reference/api/user/#friends)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:55:26.967

facebook 允许访问用户的朋友列表和他们的信息，如用户名、个人资料图片、电子邮件地址等。看看这个：[https](https://developers.facebook.com/docs/sdks/) ://developers.facebook.com/docs/sdks/ 我希望它能解决你的目的。

# c++ - Visual Studio 2012 中 strcspn 的奇怪问题

> ID：16134861
> 
> 赞同：1
> 
> 时间：2013-04-21T18:45:12.390
> 
> 标签：c++, visual-studio, c++11, visual-studio-2012

我`strcspn()`在 Visual Studio 2012 中遇到了这个奇怪的问题。

当我将以下代码编译为 32 位 Win32 控制台应用程序时，我得到了预期的结果 6。

```
#include <string>
#include <iostream>
#include <cstring>

int main( int argc, char **argv )
{
  char delimiter_ = ',';
  std::string css_ = "ESCAPE,,0,0";

  printf( "%s\n", css_.c_str(  ) );
  printf( "%d\n", strcspn( css_.c_str(  ), &delimiter_ ) );

  size_t lengthOfField = strcspn( css_.c_str(  ), &delimiter_ );
  printf( "%d\n", lengthOfField );

  std::cin.get(  );

  return 0;
} 
```

但是，如果我为 x64 编译相同的代码，我会得到 4 的意外结果。有什么我不应该做的，还是 VS2012 中的错误？使用其中一个`cstring`或`string.h`用于该`strcspn()`方法时存在此问题。

在一个单独的项目中，有时存在问题，但不是在 x64 中显示结果 4，而是在 Win32 中显示，但在 x64 中显示 6。在同一个项目的不同文件中，问题与上述相同。它似乎是某种 UB，但显然给出的代码可以重现这个问题，据我所知，我还没有在这里介绍任何 UB。

编辑：经过一些进一步的测试，使用`cout`而不是`printf`返回的值也是 0 和 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:51:37.367

to 的第二个参数`strcspn`应该是一个空终止的 c 字符串。您只是将单个字符的地址传递给它。它会将该单个字符视为 c 字符串的开头，向前扫描直到找到一个空终止符。但是由于它不是 c 字符串，并且您对第一个之后的任何字符都没有权限，所以它是未定义的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T18:51:43.533

strcspn 需要指向空终止字符串的指针作为两个参数，您需要按以下方式修复代码。

```
char delimiter_[] = ",";
printf( "%d\n", strcspn( css_.c_str(  ), delimiter_ ) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T18:53:09.337

的参数[`strcspn`](http://en.cppreference.com/w/cpp/string/byte/strcspn)应该是 C 风格的字符串，而不是单个字符。

```
size_t strcspn( const char *dest, const char *src ); 
```

然后在下面使用

```
std::string delimiter_ = ",";

strcspn(css_.c_str(), delimiter.c_str());
                      ^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T19:03:00.410

`css_.find(delimiter)`写起来容易得多。

# java - ProcessBuilder 重定向到标准输出

> ID：16134864
> 
> 赞同：25
> 
> 时间：2013-04-21T18:45:24.990
> 
> 标签：java, redirect, stream, processbuilder, inheritance

我想将 java 进程输出重定向到父 java 进程的标准输出。

使用 ProcessBuilder 类如下：

```
public static void main(String[] args) {
  ProcessBuilder processBuilder = new ProcessBuilder("cmd");
  processBuilder.directory(new File("C:"));   
  processBuilder.redirectErrorStream(true); // redirect error stream to output stream
  processBuilder.redirectOutput(ProcessBuilder.Redirect.INHERIT);
} 
```

我本来希望“cmd”的输出类似于：

Microsoft Windows [版本 6.1.7601] 版权所有 (c) 2009 Microsoft Corporation。Tous droits réservés。

显示在用于运行 java 程序的 DOS 控制台中。但是在 DOS 控制台中什么也没有显示。

在讨论的其他线程中，我看到了使用 BufferedReader 类的解决方案：但在这里我希望进程的输出直接显示在标准输出中，而不使用任何 BufferedReader 或“读取时循环”。可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-01-20T10:15:02.423

尝试`ProcessBuilder.inheritIO()`使用与当前 Java 进程相同的 I/O。另外，您可以[菊花链](http://en.wikipedia.org/wiki/Method_chaining#Java)方法：

```
ProcessBuilder pb = new ProcessBuilder("cmd")
    .inheritIO()
    .directory(new File("C:"));
pb.start(); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-27T02:34:03.030

您确实错过了一个关键部分，您实际上需要开始您的流程并等待您的输出。我相信这会奏效，

```
processBuilder.redirectOutput(ProcessBuilder.Redirect.INHERIT);
// Start the process.
try {
  Process p = processBuilder.start();
  // wait for termination.
  p.waitFor();
} catch (IOException e) {
  e.printStackTrace();
} catch (InterruptedException e) {
  e.printStackTrace();
} 
```

# angularjs - 推荐使用 $http.get 的地方在哪里

> ID：16134865
> 
> 赞同：3
> 
> 时间：2013-04-21T18:45:47.007
> 
> 标签：angularjs

我正在玩 angularjs 并具有以下 HTML：-

```
 <div ng-app="App">
      <div ng-controller="AppCtrl">
         <products></products>
      </div>
   </div> 
```

我的 js 看起来像这样：-

```
var app = angular.module('App', []);

app.controller("AppCtrl", function($scope, $http) {
   $http.get('/api/products')
      .then(function(res) {
         $scope.products = res.data;
   });
});

app.directive("products", function () {
   return {
      restrict: "E",
      template: "<h1>Products</h1><ul><li ng-repeat='product in products'>{{product.Name}} - <em>{{product.Category}}</em></li></ul>",
   };
}); 
```

这非常有效，但我不确定指令如何知道控制器在模板呈现结果之前已加载数据。所以我的问题是：-

是在这种情况下使用 a 的推荐方法`$http.get`（解释会很好），或者如果不是，那么推荐的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:18:46.613

I think this is a fine use of `$http.get`. At the end of the day, it's just a tool for doing ajax requests.

It seems your question stems from a fear that your directive will mysteriously break in different scenarios, which is understandable. The key, then, is to understand that data binding is Angular's secret weapon.

One way to think about it, Angular compiles everything and throws it into an event / digest loop. So, it is able to detect dependencies, watch for changes to variables, and call dependent methods (such as your products directive) when those variables change.

The Angular guide does a great job of providing conceptual diagrams for further understanding, and it's here: [http://docs.angularjs.org/guide/concepts](http://docs.angularjs.org/guide/concepts)

# java - 有人能告诉我为什么我得到这个输出吗？

> ID：16134866
> 
> 赞同：0
> 
> 时间：2013-04-21T18:45:48.470
> 
> 标签：java, algorithm, math, collatz

好的，所以我有一个由以下代码定义的 Collat​​z 序列长度：

```
 private static int count = 0;

    private static int collatz(int n){
        count++;
        if(n > 1){
            if(n % 2 == 0){
                return collatz(n/2);
            }
            return collatz(3*n+1);
        }
        return count-1;
    } 
```

现在，我检查了不同数字的输出（例如 print(collat​​z(3000)) => 48），以验证算法是否正常工作。我使用[了各种网站](http://www.freemotion.nl/reken/collatz.php)来做到这一点，但一个号码拒绝工作。而这个数字正是 ProjectEuler 第 14 个问题的解。这怎么可能，每隔一个数字我都会得到正确的结果（正确的链长度），而 837799 会产生不同的结果：58，而不是 524。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:04:37.763

正如评论中所指出的，这是一个溢出问题。您可以通过打印函数调用的参数来发现这一点。

更改`int`为`long`，甚至更好，以确保它不会溢出，请使用`BigInteger`：

```
private static int collatz(BigInteger n) {
    count++;
    if (n.compareTo(BigInteger.ONE) > 0) {
        if (!n.testBit(0)) // even
            return collatz(n.divide(BigInteger.valueOf(2)));

        else
            return collatz(n.multiply(BigInteger.valueOf(3)).add(BigInteger.ONE));
    }
    return count - 1;
}

public static void main(String[] args) {
    System.out.println("res: " + collatz(BigInteger.valueOf(837799)));
} 
```

# ruby-on-rails - 如何通过 https 从 Heroku 上托管的 Rails 应用程序访问 Google Drive 文档内容？

> ID：16134867
> 
> 赞同：3
> 
> 时间：2013-04-21T18:45:50.110
> 
> 标签：ruby-on-rails, heroku, https, google-drive-api

我有一个在 Heroku 上托管的 Rails 应用程序 ( [https://github.com/ddelruss/loops )。](https://github.com/ddelruss/loops)它使用 Rails 表单收集用户的 Google id、密码和文档 ID，用于登录 Google 驱动器、下载文档内容并呈现为 D3 可视化。一切正常 - 测试你是否喜欢（并相信当前的安全性）：

[http://young-eyrie-4632.herokuapp.com/](http://young-eyrie-4632.herokuapp.com/)

您可以使用公开的演示文档密钥：0AtOGnLq8Mf_ydGtmMmI5UjhEUmlqQ0d6UHFVaWN2TWc

没有存储任何用户信息，因为我希望尽可能保证网站的安全。缺陷是该站点当前是通过 http 访问的，我理解这意味着用户凭据是从 web 表单发送到未加密的 Heroku/Rails 的。

所以，我想通过 https 访问应用程序，Heroku 通过 ssl 搭载支持。实际上，该站点使用 https:// 加载，并将呈现可视化页面。问题是 Google 文档没有返回任何结果。登录成功，没有应用程序错误（根据heroku日志）......只是结果为空。

我可以做些什么来让我的应用程序通过 https 运行，包括从 Google 驱动器文档中获取结果？请注意，我不需要两者 - 如果 https 有效，我可以禁用 http 访问。

谢谢，

达米安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T23:08:01.820

我使用演示文档和带有 http 和 https 的 Hierarchy 选项运行您的应用程序，从查看 HTML 来看，内容似乎在两种情况下都存在，但在 https 的情况下不显示。也就是说，我相信谷歌正在正确地返回文件。

两种情况下生成的 HTML 我没有做完整的对比，但是快速浏览了一下，似乎[http://d3js.org/d3.v2.js](http://d3js.org/d3.v2.js) /script 节点在的情况下是不存在的https 访问，就像在 http 的情况下一样。

希望这可以帮助。

皮特

2013 年 4 月 25 日更新：查看 Chrome 上的控制台输出，我看到以下错误：

> [阻止] [https://young-eyrie-4632.herokuapp.com/loops/nodes的页面运行来自](https://young-eyrie-4632.herokuapp.com/loops/nodes)[http://mbostock.github.com/d3/d3.js](http://mbostock.github.com/d3/d3.js)的不安全内容。

我确认这个脚本没有出现在 Chrome 的“源”选项卡下，所以我认为它没有在 https 案例中加载。我不知道您是否可以将其更改为 https 引用，或者您是否必须将其添加到您的存储库中，以便 Rails 在启动时加载它。这仍然留下了对[http://d3js.org/d3.v2.js](http://d3js.org/d3.v2.js)的引用。我不知道那是从哪里来的。

# ios - 通过 UIImagePickerController 使用相机在 iPod 上崩溃

> ID：16134870
> 
> 赞同：2
> 
> 时间：2013-04-21T18:45:59.153
> 
> 标签：ios, uiimagepickercontroller, ipod

当我打开 iPod 上的相机时，我的应用程序崩溃了。我用`UIImagePickerController`这个。该应用程序在 iPhone 上运行良好。

什么可能导致错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:48:06.800

你可以在 UIImagePickerController 中使用 +isSourceTypeAvailable: 方法：

```
if ([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeCamera])
   // Has camera 
```

# java - 导出 jar 时如何包含库

> ID：16134871
> 
> 赞同：0
> 
> 时间：2013-04-21T18:46:03.560
> 
> 标签：java, eclipse

对于我的世界，我想在我的项目中使用 BoneCP。问题是，如果我将它导出到 jar 文件，服务器运行时会通知我缺少的类。

如何包含外部 .jar 以使它们在我自己的 .jar 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:47:58.540

只需在主程序的类路径中添加需要的jar

# ruby-on-rails - 在 Ruby 中解析街道地址

> ID：16134877
> 
> 赞同：6
> 
> 时间：2013-04-21T18:46:29.947
> 
> 标签：ruby-on-rails, ruby, regex, parsing

我正在将地址处理为数据库各自的字段格式。我可以得到门牌号码和街道类型，但试图确定最好的方法来获得没有号码和最后一句话的街道。收到的标准街道地址为：

```
 res[:address] = '7707 Foo Bar Blvd' 
```

截至目前，我可以解析以下内容：

```
 house = res[:address].gsub(/\D/, '')
    street_type = res[:address].split(/\s+/).last 
```

我的第一个挑战是如何获得“Foo Bar”。请注意，街道名称可以是一个、两个或三个单词。我正在努力在 Ruby 中找到一个单行表达式解决方案。

我的第二个问题是如何改进“房屋”代码以处理结尾有字母的门牌号码。例如，“7707B”。

最后，如果您可以参考一个很好的备忘单，其中包含这些表达式的示例，那将很有帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T18:52:23.713

如果可能，我建议为此使用库，因为地址解析可能很困难。查看[Indirizzo](https://github.com/daveworth/Indirizzo) Ruby gem，它使这很容易：

```
require 'Indirizzo'
address = Indirizzo::Address.new("7707 Foo Bar Blvd")
address.number
 => "7707"
address.street
 => ["foo bar blvd", "foo bar boulevard"] 
```

即使您*不*使用 Indirizzo 库本身，阅读其源代码也可能对了解它们如何解决问题非常有用。例如，它具有微调的正则表达式来匹配地址的不同部分：

```
Match = {
  # FIXME: shouldn't have to anchor :number and :zip at start/end
  :number   => /^(\d+\W|[a-z]+)?(\d+)([a-z]?)\b/io,
  :street   => /(?:\b(?:\d+\w*|[a-z'-]+)\s*)+/io,
  :city     => /(?:\b[a-z][a-z'-]+\s*)+/io,
  :state    => State.regexp,
  :zip      => /\b(\d{5})(?:-(\d{4}))?\b/o,
  :at       => /\s(at|@|and|&)\s/io,
  :po_box => /\b[P|p]*(OST|ost)*\.*\s*[O|o|0]*(ffice|FFICE)*\.*\s*[B|b][O|o|0][X|x]\b/
} 
```

这些来自其源代码的文件可以提供更多细节：

*   [https://github.com/daveworth/Indirizzo/blob/master/lib/indirizzo/address.rb](https://github.com/daveworth/Indirizzo/blob/master/lib/indirizzo/address.rb)
*   [https://github.com/daveworth/Indirizzo/blob/master/lib/indirizzo/constants.rb](https://github.com/daveworth/Indirizzo/blob/master/lib/indirizzo/constants.rb)
*   [https://github.com/daveworth/Indirizzo/blob/master/lib/indirizzo/numbers.rb](https://github.com/daveworth/Indirizzo/blob/master/lib/indirizzo/numbers.rb)

（但我通常也同意@drhenner 的评论，即为了让您自己更轻松，您可能只在单独的字段中接受这些数据输入。）

**编辑：**要给出关于如何删除街道后缀（例如“Blvd”）的更具体的答案，您可以使用 Indirizzo 的正则表达式常量（例如`Suffix_Type`from `constants.rb`），如下所示：

```
address = Indirizzo::Address.new("7707 Foo Bar Blvd", :expand_streets => false)
address.street.map {|street| street.gsub(Indirizzo::Suffix_Type.regexp, '').strip }
 => ["foo bar"] 
```

（请注意，我还传递`:expand_streets => false`给了初始化程序，以避免同时扩展“Blvd”和“Boulevard”替代项，因为无论如何我们都丢弃了后缀。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T19:35:54.443

您可以在正则表达式中使用命名捕获组快速而轻松地进行游戏

```
matches = res[:address].match(/^(?<number>\S*)\s+(?<name>.*)\s+(?<type>.*)$/)
number = matches[:number]
house = matches[:name]
street_type = matches[:type] 
```

或者，如果您希望您的正则表达式更准确地使用您可以替换的类型 `(?<type>.*)` 并 `(?<type>(Blvd|Ave|Rd|St))` 添加您想要的所有不同选项

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T18:53:38.800

你也许可以使用类似的东西：

`^\S+ (.+?) \S+$`

`\S`匹配任何非空白字符

`^`匹配字符串的开头

`$`匹配字符串的结尾

并`(.+?)`捕捉两者之间的任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-25T18:13:16.390

仔细检查您的数据集，以确保尚未为您处理此问题。

我花了相当多的时间首先创建一个可能街道名称结尾的分类法，使用正则表达式条件尝试从完整的地址字符串和所有内容中提取街道编号，结果发现我的 shapefile 的属性表**已经**分段了这些组件。

在继续解析地址字符串的过程之前，由于不可避免的奇怪变化（一些包裹地址用于内陆包裹并且有奇怪的地址等），这总是有点麻烦，请确保您的数据集还没有为你做了这个！！！

* * *

但如果你不这样做，遍历地址字符串，`address.split(" ")`创建一个“单词”数组。在大多数情况下，第一个“单词”是街道号码。这适用于我大约 95% 的地址。（注意：我的 :address 字符串不包含城市、县、州、邮编，它们只是本地地址）

我遍历了所有地址，并从每个地址中提取了最后一个“单词”并检查了这个数组并提取了任何不是“Lane”、“Road”、“Rd”或其他任何“单词”。从这个地址结尾列表中，我创建了这个巨大的匹配正则表达式对象

```
streetnm_endings = street_endings.map {|s| /#{s}/ }
endings_matches = Regexp.union(street_endings) 
```

我遍历了每个地址字符串，`shift`找出了第一个数组成员，因为那几乎总是街道号码。然后 gsub'd 出街道结尾以获得应该是没有街道号码或街道名称结尾的街道名称，数据库通常不喜欢这些：

```
parcels.each do |p|
  remainder = p.address.split(" ")
  p.streetnum = remainder.shift
  p.streetname = remainder.join(" ").gsub(endings_matches, "")
  p.save
end 
```

它并不总是有效，但大部分时间都有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-26T17:38:56.957

我目前只是将我得到的任何东西传递给 googlemaps，然后让他们发回一个很容易解析的格式化街道地址。

```
function addressReview(addressInput) {
geocoder = new google.maps.Geocoder();
var latlng = new google.maps.LatLng(-34.397, 150.644);
geocoder.geocode( { 'address': addressInput}, function(results, status) {
if (status == google.maps.GeocoderStatus.OK) {
  if (results[0]) {
    var addr = results[0].formatted_address;
    var latTi = results[0].geometry.location.lat();
    var lonGi = results[0].geometry.location.lng();
    $.post('/welcome/gcode',{ add: addr , la: latTi , lo: lonGi });
    $('#cust_addy').val(addr);
  } else {
    $('#cust_addy').attr("placeholder",'Cannnot determine location');
  }
} else {
  $('#cust_addy').attr("placeholder",'Cannnot determine location');
}
});
} 
```

在那之后，我只是把它分成红宝石。使用 .split(', ') 和 .split(' ')

# concurrency - Memcached 中如何处理并发更新？

> ID：16134883
> 
> 赞同：4
> 
> 时间：2013-04-21T18:47:16.693
> 
> 标签：concurrency, memcached, updates, consistency

我的理解是 Memcached 是无锁的（在其默认配置中），因此没有客户端可以阻止任何其他客户端的操作。如果是这样，那么 Memcached 如何处理两个或多个客户端同时尝试更新同一个对象？

Memcached 如何处理一个对象的多个版本？只需获取最后完成更新的版本并将其他版本从缓存中逐出？数据库是否主动使缓存在 Memcached 服务器上的对象失效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:56:53.760

Memcached 仅保存对象的最后一个版本。如果您获取、修改和放置，则无法保证放置适用于与获取相同的值。如果您需要同步，您可以使用 CAS 操作 ( `gets`, )。`cas`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-28T03:05:02.003

添加一些关于它如何工作的细节。CAS - 比较和交换或检查和设置。

Memcached 1.2.5 及更高版本提供了gets 和cas 命令，可以解决以上问题。如果您使用gets 命令查询某个键的缓存，它将返回该项目当前值的唯一标识符。如果你覆盖了这个item，想写回Memcached，可以通过cas命令把唯一ID发给Memcached。如果 Memcached 中存储的项目的唯一标识符与您提供的一致，则您的写入操作将成功。如果在此期间另一个进程也修改了该项目，则存储在 Memcached 中的项目的唯一标识符将发生变化，您的写入操作将失败。

Memcached 保存的键/值具有唯一标识符 casUnique。在进行incr/decr操作时，首先获取casUnique，执行incr，查看返回值是否为casUnique+1。如果是则更新，否则失败不更新！

[https://developpaper.com/question/why-does-incr-of-memcache-not-have-concurrency-problems/](https://developpaper.com/question/why-does-incr-of-memcache-not-have-concurrency-problems/)

# php - 如何输出一组图像？

> ID：16134884
> 
> 赞同：0
> 
> 时间：2013-04-21T18:47:46.727
> 
> 标签：php, image

我正在尝试在以下代码中列出（也重新调整大小）照片。所以我想输出所有带有“x”id的图像。

问题是我有一个包含在文档中的标题，所以我不能`header('Content-type: image/jpeg');`用来输出我想要显示的图像数组。但是如果我把它拿出来，它只会显示一堆随机字符，我知道这是字符串中的照片。我不知道如何使这项工作。我也计划将每张照片放在自己的 div 中。

```
<!DOCTYPE html>
    <html lang="en">
        <head>
            <meta charset="utf-8" />
            <?php include 'topheader.php'; ?>
        </head>

        <body>
            <?php
                ob_start();
                ini_set("gd.jpeg_ignore_warning", 1);
                $roomid = $_GET['room'];
                $query = "SELECT `photoname` FROM `roomsite`.`photos` WHERE `roomid`='$roomid'";
                $getphotos = $connect->prepare($query);
                if ($getphotos->execute()){
                    while ($array = $getphotos->fetch(PDO::FETCH_ASSOC)){

                        $image = imagecreatefromjpeg('userphotos/'.$array['photoname'].'');

                        list($image_width, $image_height, $type, $attr) = getimagesize('userphotos/'.$array['photoname'].'');

                        $new_size = ($image_width + $image_height)/($image_width*($image_height/100));
                        $new_width = $image_width * $new_size;
                        $new_height = $image_height * $new_size;

                        $new_image = imagecreatetruecolor($new_width, $new_height);
                        imagecopyresized($new_image, $image, 0, 0, 0, 0, $new_width, $new_height, $image_width, $image_height);
                        $imagearray = imagejpeg($new_image, null);

                        header('Content-type: image/jpeg'); 
                        echo $imagearray;

                    }
                } else { die('Query Error'); }
            ?>
        </body>

    </html> 
```

我可以做这样的事情

```
while ($array = $getphotos->fetch(PDO::FETCH_ASSOC)){
   echo '<img src="outputphotos.php">';
} 
```

但这意味着我将运行两次查询，这可能不是一个好主意？这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:51:13.100

HTTP 协议处理单个问题的单个答案。HTML 的工作方式是它在单个 HTML 文档中描述结构和内容，并允许通过引用加载辅助资源。`img`执行此操作的正确方法是在 HTML 中为需要显示的图片生成标签，还允许您设置它们的样式等。然后，在引用的 URL 中，您可以将参数传递给特定的图像。

伪代码：

```
while($row = $myQuery->nextRow())
    echo '<img src="/showimage.php?id='.$row->getId().
         ' alt="'.htmlentities($row->getName()).'">'; 
```

由于图像根据定义是独立文件，因此您不能以任何方式将它们发送到与引用文档相同的请求中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:08:09.493

如果您*确实*需要动态调整图像大小，您可以为此编写一个单独的脚本。就像是：

```
http://yourdomain.com/DynamicImage.php?image=foo.png&maxwidth=100&maxheight=100 
```

然后将所有 IMG 标签路由到那里：

```
<img src="http://yourdomain.com/DynamicImage.php?image=originalImageName.jpg&maxwidth=100&maxheight=100" /> 
```

您可以教脚本缓存生成的调整大小的图像，并在未来的请求中直接提供它们。

# sql - SQL查询效率——UNION ALL的影响

> ID：16134897
> 
> 赞同：2
> 
> 时间：2013-04-21T18:48:16.770
> 
> 标签：sql, sql-server-2008

我最近写了一个包含这部分的存储过程

```
select T.Id from Teams T
inner join 
(
    select SG.Team1Id, SG.Team2Id from SG
    union all
    select SP.Team1Id, SP.Team2Id from SP
) G
on T.Id in (G.Team1Id, G.Team2Id) 
```

我怀疑这个查询效率

`SG`此查询是否会从子查询中获取所有记录`SP`，然后应用连接条件？如果是，那么我认为这不是有效的

或者

Sql server 是否足够聪明，只能从两个表中获取符合联接条件的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:42:58.680

派生表`UNION ALL`中的 可能比替代公式**更有效**

```
SELECT T.Id
FROM   Teams T
       INNER JOIN SG
         ON T.Id IN ( SG.Team1Id, SG.Team2Id )
UNION ALL
SELECT T.Id
FROM   Teams T
       INNER JOIN SP
         ON T.Id IN ( SP.Team1Id, SP.Team2Id ) 
```

因为您问题中的版本只需要一次 pass through `Teams`。如果表`SP`和`SG`约束`Team1Id`不能相同，`Team2Id`并且各个列被索引，那么以下可能会执行得更好（对于某些数据分布，尤其`Teams`是与所涉及的其他表相比相对较大时）

```
SELECT T.Id
FROM   Teams T
       INNER JOIN (SELECT SG.Team1Id
                   FROM   SG
                   UNION ALL
                   SELECT SG.Team2Id
                   FROM   SG
                   UNION ALL
                   SELECT SP.Team1Id
                   FROM   SP
                   UNION ALL
                   SELECT SP.Team2Id
                   FROM   SP) G(TeamId)
         ON T.Id = G.TeamId 
```

# google-drive-api - 使用 XHR 从 JS 恢复上传到谷歌驱动器

> ID：16134901
> 
> 赞同：1
> 
> 时间：2013-04-21T18:48:41.117
> 
> 标签：google-drive-api

是否可以从 javascript（客户端代码）进行可恢复上传？我已按照以下说明操作：[https ://developers.google.com/drive/manage-uploads#resumable](https://developers.google.com/drive/manage-uploads#resumable) ://developers.google.com/drive/manage-uploads#resumable ，并且在第 3 步（上传文件）中出现跨域错误。如示例中所述，尝试使用 xhr（PUT 方法）上传文件时，我在浏览器中遇到跨域错误，xhr 返回状态为 0。飞行前似乎工作正常。谷歌驱动器上传是否支持 CORS？

如果可能，您是否有指向工作示例的链接？

如果不可能，什么时候可以提供支持？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:26:08.063

不，现在不是，对不起。

您正确收集的原因是 CORS 尚不支持上传。虽然它很快就会可用，但这对你现在没有帮助，所以，对不起。

# bash - 具有返回值和返回字符串的bash函数

> ID：16134903
> 
> 赞同：3
> 
> 时间：2013-04-21T18:49:00.930
> 
> 标签：bash, function, return, echo

首先我的源代码来测试bash函数的返回方法：

```
function oidev.fnc.bash.example.fncreturnstringvalue
{
  echo "ABC"
  return 1
} 
```

和调用者函数：

```
function oidev.fnc.bash.example.fncreturnstringvaluecaller
{
  local FNCVALUE
  local FNCSTRING
  FNCSTRING=$(oidev.fnc.bash.example.fncreturnstringvalue && FNCVALUE="$?" || FNCVALUE="$?")
   # String OK but Value empty
  echo "VALUE : $FNCVALUE" 
  echo "STRING: $FNCSTRING"
  unset FNCVALUE
  unset FNCSTRING
  oidev.fnc.bash.example.fncreturnstringvalue && FNCVALUE="$?" || FNCVALUE="$?"
    # Value OK and String on STDOUT
  echo "VALUE : $FNCVALUE" 
  echo "STRING: $FNCSTRING"
} 
```

bash 中的输出：
VALUE :
STRING: ABC
ABC
VALUE : 1
STRING: （肯定是空的，但从函数中回显）`

现在我的简单问题
是：是否可以通过 a 将返回字符串和返回值转换为两个不同的变量单线建设？

我不想使用全局变量，也不想使用 if $? 后分呼！
非常感谢您的帮助，并为我的德语英语感到抱歉！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:10:40.623

试试这个，也许有帮助：

```
func() {
    echo 'abc'
    return 111
}

read var1 var2 <<<$(func; echo $?)
echo "var1 $var1"
echo "var2 $var2" 
```

将打印：

```
var1 abc
var2 111 
```

“空间问题”的解决方法 - 现在，没有更好的主意，因为使用这样的辅助函数

```
func() {
    echo 'abc def'
    return 111
}

runner() {
    ret=$(func)
    echo $? $ret
}

read -r var2 var1 <<<$(runner func)
echo "var1 $var1"
echo "var2 $var2" 
```

或使用辅助变量并切换变量顺序

```
func() {
    echo 'abc def'
    return 111
}
read -r var2 var1 <<<$(res=$(func); echo $? $res)
echo "var1 $var1"
echo "var2 $var2" 
```

两者都会返回

```
var1 abc def
var2 111 
```

# javascript - 如何在 JavaScript 中转义单引号 ( ' )？

> ID：16134910
> 
> 赞同：204
> 
> 时间：2013-04-21T18:49:27.083
> 
> 标签：javascript, html, escaping

**更新：** 我想对这个问题给出一个更新的答案。首先，让我声明如果您尝试完成我在下面的内容，我建议您通过[添加事件侦听](https://developer.mozilla.org/en-US/docs/Talk:DOM/element.addEventListener)器来管理事件。我强烈建议您在项目中使用[jQuery](https://jquery.com/)，并使用它们的语法来[管理事件侦听](http://api.jquery.com/on/)器，而不是使用 DOM。

**问题**

好的，我基本上是这样做的：

```
document.getElementById("something").innerHTML = "<img src='something' onmouseover='change(\'ex1\')' />"; 
```

我不想要双引号（“）在我放 \' 的地方。我只想要一个单引号，所以我试图不让它在使用时放双引号。我试图在最终结果中达到这一点.

```
<img src="something" onmouseover="change('ex1')" /> 
```

逃避对我不起作用。

我标记的答案效果很好，但是，更清洁（并且更专业的方式，IMO）是 [loganfsmyth 的答案](https://stackoverflow.com/a/16134953/1754890)。

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2013-04-21T18:53:16.873

您应该始终考虑浏览器最终会看到什么。在这种情况下，它将看到：

```
<img src='something' onmouseover='change(' ex1')' /> 
```

换句话说，“onmouseover”属性只是`change(`，还有另一个“属性”被调用`ex1')'`，没有值。

事实是，HTML 不使用`\`转义字符。但它确实将`&quot;`和`&apos;`分别识别为转义引号和撇号。

有了这些知识，请使用：

```
document.getElementById("something").innerHTML = "<img src='something' onmouseover='change(&quot;ex1&quot;)' />"; 
```

...话虽如此，您可以只使用 JavaScript 引号：

```
document.getElementById("something").innerHTML = "<img src='something' onmouseover='change(\"ex1\")' />"; 
```

* * *

## 回答 #2

> 赞同：172
> 
> 时间：2013-04-21T18:52:21.137

这里的答案很简单：

您已经将它包含在双引号中，因此无需使用`\`.

如果要转义单引号字符串中的单引号：

```
var string = 'this isn\'t a double quoted string';
var string = "this isn\"t a single quoted string";
//           ^         ^ same types, hence we need to escape it with a backslash 
```

或者，如果您想转义`\'`，可以将 bashslash 转义为`\\`，并将引号转义为`\'`：

```
var string = 'this isn\\\'t a double quoted string';
//                    vvvv
//                     \ ' (the escaped characters) 
```

但是，如果您包含具有不同引号类型的字符串，则无需转义：

```
var string = 'this isn"t a double quoted string';
var string = "this isn't a single quoted string";
//           ^        ^ different types, hence we don't need escaping 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2013-04-21T18:52:53.947

`'`您可以在 JavaScript中转义 a`\'`

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-04-21T18:53:24.283

由于这些值实际上在 HTML 属性中，因此您应该使用`&apos;`

```
"<img src='something' onmouseover='change(&apos;ex1&apos;)' />"; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-21T20:21:42.967

```
 document.getElementById("something").innerHTML = "<img src=\"something\" onmouseover=\"change('ex1')\" />"; 
```

或者

```
 document.getElementById("something").innerHTML = '<img src="something" onmouseover="change(\'ex1\')" />'; 
```

它应该工作...

# windows - IAudioVolumeEndpoint setMute 将取消静音，但从不真正静音（在仍然听到声音时看起来静音）

> ID：16134911
> 
> 赞同：1
> 
> 时间：2013-04-21T18:49:36.620
> 
> 标签：windows, delphi, winapi

我有一段代码，它应该静音/取消静音。我已经修补了很多，所以现在它枚举所有渲染设备来切换它们的静音状态。但是，尽管它完全取消静音，但对于静音，混音器会显示设备已静音，但声音仍在播放。在我的笔记本电脑上，我有一个 LED 指示灯，它指示声音是否已静音，并且表明它也已静音...

我看过类似的 C++ 代码来实现相同的效果，但找不到区别......

```
var
  deviceEnumerator: IMMDeviceEnumerator;
  MMDevice: IMMDevice;
  EndpointVolume: IAudioEndpointVolume;

  Muted: BOOL;
  R: Integer;
  MMDC: IMMDeviceCollection;
  DC: UINT;
  I: Integer;
begin
  CoCreateInstance(CLSID_MMDeviceEnumerator, nil, CLSCTX_ALL, IID_IMMDeviceEnumerator, deviceEnumerator);
  if (deviceEnumerator.EnumAudioEndpoints(eRender, DEVICE_STATE_ACTIVE, MMDC) = S_OK) then
  begin
    if MMDC.GetCount(DC) = S_OK then
    begin
      for I := 0 to DC - 1 do
      begin
        if (MMDC.Item(I, MMDevice) = S_OK) then
        begin
          MMDevice.Activate(IID_IAudioEndpointVolume, CLSCTX_ALL, nil, @EndpointVolume);

          if EndpointVolume = nil then
          begin
            OutputDebugString('Unable to get endpoint!!!');
          end
          else
          begin
            R := EndpointVolume.GetMute(Muted); // R = S_OK, always
            R := EndpointVolume.SetMute(not Muted, nil); // R = S_OK always, too
          end;

        end;

      end;
    end;
  end
end; 
```

如果有人知道出了什么问题...没有一个呼叫失败，而且一切看起来都被静音了，所以我真的很困惑...我也使用类似的代码来提高和降低音量，它工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:24:25.303

这听起来很愚蠢 :) 因为你听到了声音，所以你没有静音。输出您正在静音的设备的名称；如果该列表与 C++ 代码中的列表不匹配，则该列表有效，那么您就知道问题出在哪里。

# javascript - jQuery 替换部分 URL

> ID：16134916
> 
> 赞同：0
> 
> 时间：2013-04-21T18:50:05.753
> 
> 标签：javascript, jquery

我有一个看起来像这样的 Vimeo URL：

```
<iframe src="https://player.vimeo.com/video/57418480?byline=0&portrait=0&autoplay=1" width="620" height="350" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> 
```

我想要做的是获取视频 ID，在本例中为 57418480 并将其替换为 onclick。我将通过类属性设置 ID。例如：

```
<li><a href="#" class="57418481">Ethics in Investing</a></li> 
```

单击上面的链接将仅替换数字 ID，因此它将如下所示：

```
<iframe src="https://player.vimeo.com/video/57418481?byline=0&portrait=0&autoplay=1" width="620" height="350" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:54:41.613

在链接中使用 data-url

```
<li><a href="#" data-url="https://player.vimeo.com/video/57418481?byline=0&portrait=0&autoplay=1" class="57418481">Ethics in Investing</a></li> 
```

**点击：**

```
$('a').on('click',function(){
  $('iframe').attr('src',$(this).data('url'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:07:54.530

```
$('a').click(function() {
    var newID = $(this).attr('class');
    var newURL = 'https://player.vimeo.com/video/' + newID + '?byline=0&portrait=0&autoplay=1';
    $('iframe').attr('src',newURL);
    return false;
}); 
```

[http://jsfiddle.net/Khpd7/](http://jsfiddle.net/Khpd7/)

# php - DialMyCalls 我在哪里放置 API 密钥

> ID：16134917
> 
> 赞同：0
> 
> 时间：2013-04-21T18:50:07.413
> 
> 标签：php, database, api, api-key

我正在尝试从 DialMyCalls 数据库中提取数据并向其中添加数据。他们给我发了一些代码，我找到了我的 API 密钥，但我不知道如何连接它。我将 PHP 代码上传到我的服务器并尝试运行它，但我没有得到任何结果，因为我不确定要编辑什么。我知道我需要编辑我认为的“空”区域，但我不完全确定。欢迎任何帮助。

这是他们发给我的代码，所以如果你能告诉我要编辑什么来从他们的数据库中提取信息，我将不胜感激。谢谢。

```
<?php
class RestRequest
{
protected $url;
protected $verb;
protected $requestBody;
protected $requestLength;
protected $apikey;
protected $acceptType;
var $responseBody;
protected $responseInfo;

public function __construct ($apikey = null) {

    $this->url              = null;
    $this->verb             = null;
    $this->requestBody      = null;
    $this->requestLength    = 0;
    $this->apikey           = $apikey;
    $this->acceptType       = 'application/json';
    $this->responseBody     = null;
    $this->responseInfo     = null;

}

public function flush ()
{
    $this->requestBody      = null;
    $this->requestLength        = 0;
    $this->verb             = 'POST';
    $this->responseBody     = null;
    $this->responseInfo     = null;
}

public function execute ($url = null, $verb = 'POST', $requestBody = null) {
    $ch = curl_init();
    $this->url              = "https://www.dialmycalls.com/api".$url;
    $this->verb             = $verb;
    $this->requestBody      = $requestBody;
    try
    {
        switch (strtoupper($this->verb))
        {
            case 'POST':
                $this->doExecute($ch);
                break;
            default:
                throw new InvalidArgumentException('Current verb (' . $this->verb . ') is an invalid REST verb.');
        }
    }
    catch (InvalidArgumentException $e)
    {
        curl_close($ch);
        throw $e;
    }
    catch (Exception $e)
    {
        curl_close($ch);
        throw $e;
    }

}
protected function doExecute (&$curlHandle) {
    curl_setopt($curlHandle, CURLOPT_POST, 1);
    $this->requestBody["apikey"] = $this->apikey;
    curl_setopt($curlHandle, CURLOPT_POSTFIELDS, $this->requestBody);
//  curl_setopt($curlHandle, CURLOPT_TIMEOUT, 60);
    curl_setopt($curlHandle, CURLOPT_URL, $this->url);
    curl_setopt($curlHandle, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curlHandle, CURLOPT_VERBOSE, 0);
    curl_setopt($curlHandle, CURLOPT_HTTPHEADER, array ('Accept: ' . $this->acceptType,'Expect:'));
    $this->responseBody = curl_exec($curlHandle);
    $this->responseInfo = curl_getinfo($curlHandle);
    curl_close($curlHandle);
}
}

?> 
```

再次感谢您的帮助，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:15:52.430

From what it looks like, you would just throw it in the constructor.

Example:

```
<?php
$rest = new RestRequest("yourAPIkey");

?> 
```

Then you can do the rest. I noticed this because in the constructor it has

```
public function __construct ($apikey = null) { 
```

Which means when you open the new class whatever variable is in the function __construct is what you would send in the new class.

Hope this helps.

# javascript - 如何在javascript中通过id获取angularjs模拟中的元素？

> ID：16134918
> 
> 赞同：5
> 
> 时间：2013-04-21T18:50:21.723
> 
> 标签：javascript, twitter-bootstrap, angularjs

假设我有按钮：

```
<button type="submit"
        value="Send" 
         id="btnStoreToDB"
         class="btn btn-primary start"             
         ng-click="storeDB()"
         ng-disabled="!storeDB_button_state"
         >
                <i class="icon-white icon-share-alt"></i>
                <span>Store to DB</span>
            </button> 
```

![在此处输入图像描述](https://i.stack.imgur.com/wOks7.png)

在 JS 中获取这个按钮，我只是这样做`var btn = $('#btnStoreToDB');`，现在可以使用这个按钮。所以我可以接受它`id`或`class`。

但是我怎样才能得到这个元素`angularjs`呢？

我想在加载过程中向按钮添加微调器，如此处所示[（小提琴）](http://jsfiddle.net/amilarox/JMskU/)。

由于我所有的项目都开始使用 angulajs，所以我尝试明智地使用它，并且不喜欢我怎么知道。

我想添加：`ng-model="btnStoreToDB"`并使用它：

```
 if($scope.btnStoreToDB){
      var spinner = new Spinner().spin();
      $scope.btnStoreToDB.appendChild(spinner.el);
  } 
```

但`$scope.btnStartUpload`未定义。假设有其他方法可以获取此按钮。

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T19:39:32.543

这是一个很好的问题，也是很常见的情况。

执行此操作的 Angular 方法是在按钮上或按钮内使用`ng-show`、`ng-hide`或`ng-class`。

一个想法可能是这样使用`ng-class`：

```
<button ng-class="{ useSpinner: btnStoreToDB }">...</button> 
```

这将在为 true`useSpinner`时将类添加到按钮`btnStoreToDB`，并在 btnStoreToDB 为 false 时删除类。

另一种方法是`ng-show`像这样使用：

```
<button ...>
    <i class="icon-white icon-share-alt"></i>
    <span>Store to DB</span>
    <div class="spinner" ng-show="btnStoreToDb">...</div>
</button> 
```

现在你的视图和控制器是分开的，你正在用 Angular 方式做事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T19:38:41.223

```
angular.element("#btnStoreToDB"); 
```

但这里有更多“棱角分明”的方式

**JS**

```
var app = angular.module('plunker', []);

app.controller('MainCtrl', function($scope) {
  $scope.loading = false;

  $scope.send = function(){
    $scope.loading = true;
    setTimeout(function(){
      alert('finished');
      $scope.$apply($scope.loading = false);
    }, 2000);

  };
}); 
```

**HTML**

```
<button ng-click="send()">
      <img ng-show="loading" src="http://farmville-2.com/wp-content/plugins/farmvilleajpl/img/loadingbig.gif" width='10'>
      Send!    
</button> 
```

**ps**图片来自自定义来源

**pps**个人我通常使用 Twitter Bootstrap 并且有一种方法可以更轻松地显示微调器。喜欢`<i class="icon-spin icon-spinner" ng-show="loading"></i>`

[参见 Plunker](http://plnkr.co/edit/XpqLGekdIMy5tiKiYCqt?p=preview)

# java - 选择要序列化的属性

> ID：16134920
> 
> 赞同：0
> 
> 时间：2013-04-21T18:50:34.157
> 
> 标签：java, xml, xml-serialization

在我的程序中，我需要将对象存储在 XML 中。但我不希望所有属性都序列化为 xml。我该怎么做？

```
public class Car implements ICar{
//all variables has their own setters and getters
private String manufacturer;
private String plate;
private DateTime dateOfManufacture;
private int mileage;
private int ownerId;
private Owner owner; // will not be serialized to xml
.....
}

//code for serialize to xml
public static String serialize(Object obj)
{
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    XMLEncoder encoder = new XMLEncoder(baos);
    encoder.writeObject(obj);
    encoder.close();        
    return baos.toString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:51:17.727

看看[这个链接](http://www.oracle.com/technetwork/java/persistence4-140124.html#transient)。这是一个更新的示例。

```
BeanInfo info = Introspector.getBeanInfo(Car.class);
PropertyDescriptor[] propertyDescriptors = info.getPropertyDescriptors();
for (int i = 0; i < propertyDescriptors.length; ++i) {
    PropertyDescriptor pd = propertyDescriptors[i];
    if (pd.getName().equals("dateOfManufacture")) {
        pd.setValue("transient", Boolean.TRUE);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:13:42.930

我选择使用带有注释的 JAXB 序列化。这是最好和最简单的选择。感谢大家的帮助。

```
public static String serialize(Object obj) throws JAXBException
{
    StringWriter writer = new StringWriter();
    JAXBContext context = JAXBContext.newInstance(obj.getClass());
    Marshaller m = context.createMarshaller();

    m.marshal(obj, writer);
    return writer.toString();
}

public static Object deserialize(String xml, Object obj) throws JAXBException
{
    StringBuffer xmlStr = new StringBuffer(xml);
    JAXBContext context = JAXBContext.newInstance(obj.getClass());
    Unmarshaller um = context.createUnmarshaller();

    return um.unmarshal(new StreamSource(new StringReader(xmlStr.toString())));
} 
```

# html - 如果谷歌缓存版本不可用，是否可以从本地加载 jQuery UI？

> ID：16134921
> 
> 赞同：0
> 
> 时间：2013-04-21T18:50:48.630
> 
> 标签：html, jquery-ui

我有一个使用 jQuery UI 的页面。理想情况下，如果可能，我想使用谷歌缓存版本，但如果不可用，我想使用本地版本。

这可能吗？我一直在寻找 html <script> 标记参考，但找不到任何可以检查和回退的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:17:59.833

You can do something like this (while of course changing the URLs to suit your needs):

```
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script>window.jQuery.ui || document.write('<script src="/libs/jquery-ui.js"><\/script>');</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:36:19.037

之前回答过这个问题： [Best way to use Google's hosting jQuery, but fall back to my hosting library on Google failed](https://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go)

当然，这同样适用于 jQueryUI。

```
<script src="/path/to/external/jqueryui"></script>
<script>
if (!window.jQuery.ui) {
    document.write('<script src="/path/to/local/jqueryui"><\/script>');
}
</script> 
```

# exception - 正确和不当使用异常处理？

> ID：16134923
> 
> 赞同：0
> 
> 时间：2013-04-21T18:50:54.033
> 
> 标签：exception

您好，我正在尝试更清楚地了解何时使用异常以及何时不使用它们。我将给出几个案例场景。你能告诉我哪些情况下我应该使用异常，并解释为什么我应该或不应该？（注意：这不是作业问题）。

场景 1：我设计了一个电脑游戏，其中每个单元都可以移动到棋盘上的一个正方形。但是，有些方格可以被挡住。我应该抛出一个 SquareIsBlockedException 来防止单元移动吗？

场景 2：我在数据库中插入了一条记录，但是它失败了，因为唯一 ID 已经存在。它抛出一个 DuplicateIDException。

为什么我应该为方案 2 使用例外，而不是为方案 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:56:53.223

1) 不。格子被挡住并不是一件*特别*的事情——可以假设它在你的游戏中很常见。当程序中发生不应该发生的事情时，应该触发异常。

2) 可能。将重复记录插入数据库是不应该正常发生的事情。它也可能暗示一个错误。

如果您触发异常，您将停止执行流程。这很好 - 在您的系统发现它正在插入重复的行之后，它应该怎么做？您很可能没有准备好系统在这种情况下正常运行。另外，您可以（在您的调试器、日志等中）查看出了什么问题，这使您更容易修复代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:00:39.197

这完全取决于用例，在您的两个示例中，是否使用异常可能是有意义的。

异常应该用于......异常。网络中有一些“错误代码”示例，其中异常用于流量控制。不要这样做。

所以 Ex1 对我来说听起来像是一个流控制，使用 if 或语言流控制。

在 Ex2 中，当需要首先点击数据库以查找 ID 是否已经存在时，对重复项的显式控制可能会导致更多代码。ID 是自动 id，请使用异常，因为正常情况是 autom。ID都是不同的。id 是用户可编辑的数据字​​段（例如名称），如果 Id 已经存在，则首先查找。

# c# - 使用 OLE DB .NET 提供程序插入数据库表将不起作用

> ID：16134926
> 
> 赞同：0
> 
> 时间：2013-04-21T18:51:05.537
> 
> 标签：c#, oledbcommand

当`INSERT INTO`命令到达`cmd.ExecuteNonQuery`.

重要的是我使用`string.Format`，并且结构尽可能接近当前结构。

```
 {
            OleDbConnection con = DAL.GetConnection();
            con.Open();
            if (con.State == ConnectionState.Open)
            {
                string s = string.Format("INSERT INTO DataTable1 (Username, Password, FName, LName, Bdate, Sex, City, Mail) VALUES ('{0}', '{1}', '{2}', '{3}', #{4}#, {5}, {6}, '{7}')", uname, pass, fname, lname, bd, sex, city, mail);
                OleDbCommand cmd = DAL.GetCommand(con, s);
                int check = cmd.ExecuteNonQuery();
                if (check == 0)
                {
                    con.Close();
                    Response.Redirect("Reg.aspx?err=-An error has occured. Please try again-");
                } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T19:00:21.610

可能您在传递的文本中有一些引号，请尝试使用参数...

```
string s = "INSERT INTO DataTable1 (Username) VALUES (@user)";
OleDbCommand cmd = DAL.GetCommand(con, s);
//Add the parameter ...
OleDbParameter nam = new OleDbParameter("@user",uname);
cmd.Parameters.Add(nam); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:05:23.233

如果您还没有，请查看[OleDbCommand.Parameters 。](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters%28v=vs.80%29.aspx)它更安全（根据@Mark B 的评论），它可能会清除您遇到的语法错误。

如果您坚持使用纯`String.Format`方法，只需输出`cmd.CommandText`以进行调试以查看语法错误在哪里。

# python - NDB/DB NoSQL 注入 Google 数据存储

> ID：16134927
> 
> 赞同：2
> 
> 时间：2013-04-21T18:51:07.503
> 
> 标签：python, security, google-app-engine, nosql, google-cloud-datastore

使用 NoSQL 时是否有任何 SQL 注入等效项或我应该注意的其他漏洞？

我在 Python2.7 中使用 Google App Engine DB，并注意到 Google 没有太多关于 Datastore 安全性的文档。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T05:46:25.497

标准 SQL 注入技术依赖于 SQL 具有各种查询或修改数据的语句这一事实。数据存储没有这样的功能。GQL（数据存储的查询语言）只能用于查询，不能修改。插入、更新和删除是使用不使用文本表达式的单独方法完成的。因此，数据存储不易受到此类注入技术的攻击。在最坏的情况下，攻击者只能更改查询以选择您不想要的数据，但永远不会更改它。

# c# - C#/SQL Server - 不能同时有两个连接到一个数据库？

> ID：16134928
> 
> 赞同：-3
> 
> 时间：2013-04-21T18:51:09.860
> 
> 标签：c#, sql, sql-server

如果我对我的数据库打开了 SQL Server Management Studio，我将无法在我的 C# 程序中打开数据库，因为它会引发错误。我必须在 Management Studio 中关闭连接。

有没有办法能够连接到具有多个连接的单个数据库？

这只是`.mdf`我正在使用的计算机上的一个本地文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:55:19.110

问题是您连接了一个用户实例，该实例仅是单用户并且通常仅用于开发：

> 用户实例场景包括：
> 
> *   不需要共享数据的任何单用户应用程序。

参考：http: [//msdn.microsoft.com/en-us/library/ms254504.aspx](http://msdn.microsoft.com/en-us/library/ms254504.aspx)

因此，您的默认 SQL Server 实例在 Management Studio 会话中打开了数据库。当您的程序创建一个新实例时，它无法访问数据库文件，因为它是用不同的实例打开的。

您可以尝试使用 Visual Studio 中的服务器工具而不是 Management Studio 来管理您的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:53:16.623

您应该避免直接连接到 .mdf 文件。让 SQL Server 托管数据库，然后从那里而不是文件连接到它。

# makefile - 使用“make run”执行

> ID：16134930
> 
> 赞同：1
> 
> 时间：2013-04-21T18:51:14.087
> 
> 标签：makefile

假设我有一个 makefile，在使用命令 make 编译时，它会生成一个名为“run”的可执行文件。

到目前为止，我知道'make'用于编译多个源代码，但我从未听说过你可以使用'make'来执行可执行文件。

是否可以稍后使用“make run”使用此命令执行二进制文件？

我认为这是一个基本问题，但我还没有找到答案。

对不起，如果它伤害了这里的一些人。=D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:01:04.913

您可以创建一个[`.PHONY`](http://www.gnu.org/software/make/manual/html_node/Phony-Targets.html)名为 run 的目标。

```
.PHONY: run
run:
        ./executableName 
```

`.PHONY`意味着makefile不会创建文件并且每次都会运行命令。

注意：很可能您的目标是制作可执行文件。不要为`.PHONY`目标指定与可执行文件相同的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:53:11.953

否，运行程序类型

```
./run 
```

# python - 捕获 xml 文件的选定部分

> ID：16134938
> 
> 赞同：0
> 
> 时间：2013-04-21T18:51:52.760
> 
> 标签：python, xml-parsing

我的xml文件是这样的

```
<S_Row>
     <S_Cell><S_CellBody></S_CellBody></S_Cell>
     <S_Cell><S_CellBody></S_CellBody></S_Cell>
     <S_Cell><S_CellBody></S_CellBody></S_Cell>
</S_Row> 
```

我在 python 中处理它是这样的：

```
for S_Cell in S_Row.findall('S_Cell'):
        for S_CellBody in S_Cell.getchildren():
              S_CellBody.text="ABC" 
```

这给了我在 xml 文件中这样的输出：

```
 <S_Row>
     <S_Cell><S_CellBody>ABC</S_CellBody></S_Cell>
     <S_Cell><S_CellBody>ABC</S_CellBody></S_Cell>
     <S_Cell><S_CellBody>ABC</S_CellBody></S_Cell>
   </S_Row> 
```

如果我想在第一行或第二行或第三行插入 ABC 怎么办？我怎样才能跟踪我得到的行，因为 S_Cell.getchildren() 给了我所有的行。

我想跟踪记录，通过它我可以在我选择的行（第一行、第二行或第三行）中插入文本。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:05:19.807

例如：

```
for i, S_Cell in enumerate(S_Row.findall('S_Cell')):
    for S_CellBody in S_Cell.getchildren():
          S_CellBody.text = str(i) 
```

您也可以将一些`if`s 语句放入循环中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:03:15.147

使用计数器变量：

```
i = 0
for S_CellBody in S_Cell.getchildren():
    i += 1
    if i == 2:
        S_CellBody.text = "ABC" 
```

# c++ - 将字符串数组传递给模板化搜索函数

> ID：16134940
> 
> 赞同：2
> 
> 时间：2013-04-21T18:52:05.553
> 
> 标签：c++, arrays, string, templates

在下面的代码中，我试图搜索传递给特定字符串的模板函数的字符串数组，但我收到错误“没有匹配函数调用 `arraySearch”。前两个函数调用 int 数组和 double 数组工作正常，似乎我只是缺少处理字符串数组的细节，我不知道它是什么。无论如何，它必须是一个数组（没有向量）。任何帮助将不胜感激！

```
#include<iostream>
#include<string>

using namespace std;

template<typename T>
bool arraySearch(T array[], int size, T thing)
{
     for(int i = 0; i < size; i++)
     {
          if(array[i] == thing)
          return true;
     }

     return false;
}         

int main()
{
    const int SIZE = 12;
    int intArray[] = {14, 3, 6, 76, 34, 22, 21, 54, 33, 23, 76, 234};
    cout << "The element was found: " << arraySearch(intArray, SIZE, 23) << endl;

    double doubleArray[] = {34.5, 65.56, 11.1, 45.4, 87.5, 98.3, 23.6, 15.5, 3.3, 5.44, 54.3, 99.9};
    cout << "The element was found: " << arraySearch(doubleArray, SIZE, 23.6) << endl;

    string stringArray[] = {"cool", "bug", "master", "katze", "republic", "randolph", "watermelon", "igloo", "sardine", "cream", "yellow", "rubber"};
    cout << "The element was found: " << arraySearch(stringArray, SIZE, "cool") << endl;

 system("pause");
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:54:37.737

你需要说：

```
cout << "The element was found: " << arraySearch(stringArray, SIZE, std::string("cool")) << endl; 
```

问题在于，这`"cool"`不是使用as`T`实例化模板时的实例。在 C++ 中，字符串文字是 C 字符数组，而不是.`T``std::string``std::string`

此外，您可以简单地使用`std::find`from`<algorithm>`来实现与您发布的代码相同的效果。 `std::find`可以使用 C 数组和指针以及 C++ 迭代器。

```
std::string* res = std::find(stringArray, stringArray + sizeof(stringArray) / sizeof(std::string), "cool"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T18:55:06.027

问题是从第一个论点和第二个论点`T`推导出来。`std::string``const char*`

因此，编译器不知道该选择哪一个。尝试做：

```
arraySearch(stringArray, SIZE, std::string("cool")) 
```

或者，或者，让函数模板接受不同类型的参数：

```
template<typename T, typename U>
bool arraySearch(T array[], int size, U thing) 
```

这不需要`std::string`显式构造对象：

```
arraySearch(stringArray, SIZE, "cool") 
```

如果您决定采用这种方式，您可能需要进一步 SFINAE 约束您的函数模板，以便它只接受可等式可比的类型：

```
template<typename T, typename U, 
         decltype(declval<T>() == declval<U>())* = nullptr>
bool arraySearch(T array[], int size, U thing) 
```

# php - Https导致太多重定向？

> ID：16134945
> 
> 赞同：1
> 
> 时间：2013-04-21T18:52:54.100
> 
> 标签：php, loops, redirect, https

如果我的 php 文件不存在，我有一个简单的代码可以重定向到 https，并且我不断收到太多重定向问题。

```
if(strtolower($_SERVER['HTTPS']) != 'on') {
redirect('https://domain.com/register.php');
} 
```

我能做些什么来解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:56:35.163

从[PHP 手册](http://php.net/manual/en/reserved.variables.server.php)`$_SERVER['HTTPS']`来看，`Set to a non-empty value if the script was queried through the HTTPS protocol.`不一定`on`。然后，您可能会陷入无限循环的重定向。

为避免这种情况，请使用[empty()](http://www.php.net/manual/en/function.empty.php)函数：

```
if ((!isset($_SERVER['HTTPS'])) || (empty($_SERVER['HTTPS']))
{
    redirect('https://domain.com/register.php');
} 
```

> **注意：**请注意，在 IIS 中使用 ISAPI 时，如果请求不是通过 HTTPS 协议发出的，则该值将关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:59:01.067

```
if(!isset($_SERVER['HTTPS'])){
 //redirect
} 
```

# jquery - jQuery的fadeOut回调fadeIn不起作用

> ID：16134954
> 
> 赞同：1
> 
> 时间：2013-04-21T18:53:26.827
> 
> 标签：jquery, fadein, jquery-callback

我正在尝试淡出一个 div，然后在第一个 div 消失后淡入下一个 div（阻止下一个 div 低于第一个 div，然后在前一个 div 消失后反弹）。我搜索了答案，人们建议使用回调函数。但是我正在使用以下代码，它会淡出第一个 div，但不会淡出下一个。有任何想法吗？

```
$(function() {
     $('.qc-answerA').toggle(
       function(event) {
         $(this).find('input').attr('checked', true);
         $(this).addClass("qc-answerSelected");
         $('.qc-answerB').removeClass("qc-answerSelected");
         $('.qc-answerC').removeClass("qc-answerSelected");
         $('.qc-answerD').removeClass("qc-answerSelected");
         $('.qc-answerE').removeClass("qc-answerSelected");
        //This is the fadeIn fadeOut function 
         $(this).parent('div').fadeOut("fast", function(){
            $(this).parent('div').next('div').fadeIn("fast");
        });
       },
       function(event) {
         $(this).find('input').attr('checked', false);
         $(this).removeClass("qc-answerSelected");
       }
     );
}); 
```

# java - 找不到 Java 错误变量符号

> ID：16134958
> 
> 赞同：0
> 
> 时间：2013-04-21T18:53:43.410
> 
> 标签：java

大家好，我的Java程序有问题，我已经在母项目中导入了io输入，这不是问题所在。错误是：

```
C:\Users\test\Desktop\Prodotto.java:26: cannot find symbol
symbol : variable input
location: class Prodotto
line=input.readLine();
^ 
```

这就是程序。我该如何解决？

```
public class Prodotto
{
String descrizione;
double prezzoVendita;
int giacenza;
String line;

Prodotto(){}

void Valore()
{
    System.out.print("Valore di magazzino = ");
    System.out.println(giacenza*prezzoVendita);
}

void Carico()
{
    int carico=0;
    String line;
    do
    {
        try
        {
            System.out.println("Di quanto è aumentata la giacenza?");
            line=input.readLine();
            carico=Integer.parseInt(line);
        }
        catch (Exception e)
        {
            System.out.println("il carico deve essere maggiore di 0");  
        }

        if(carico<=0)
        {

        }
        else
        {
            giacenza=giacenza+carico;   
        }
    }
    while(carico<=0);
}

void Scarico()
{
    int scarico=0;
    String line;
    do
    {
        try
        {
            System.out.println("Di quanto è diminuita la giacenza?");
            line=input.readLine();
            scarico=Integer.parseInt(line);
}
catch (Exception e)
{
System.out.println("la giacenza non può essere minore di 0");
}

if(scarico<=0)
{

}
else
{
giacenza=giacenza-scarico;
}
}
while(giacenza<=0);
}

void Visualizza()
{
System.out.println("Descizione prodotto = "+ descrizione);
System.out.println("Prezzo di vendita = "+ prezzoVendita);
System.out.println("giacenza = "+ giacenza);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:55:23.953

编译器是绝对正确的（正如我所期望的那样） - 你永远不会声明一个名为`input`. 想想你*为什么*期望它工作，你期望变量类型是什么，你期望它在哪里被初始化等等。

鉴于您从两种不同的方法中使用它，您可能希望它是一个*实例*变量......也许您希望它是一个[`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)? 不过，考虑这一点很重要——找出你期望它起作用的原因。如果您只是从其他地方复制代码，请考虑在将代码包含到您自己的程序之前真正理解代码的重要性。

此外，最好遵循 Java 命名约定，并缩进代码以提高可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:11:12.257

使用以下内容导入扫描仪类：

```
import java.util.Scanner; 
```

然后使用以下内容创建 Scanner 类的实例：

```
Scanner input = new Scanner(System.in); 
```

# database - 推荐系统处理大规模动态数据的最有效方法是什么？

> ID：16134960
> 
> 赞同：0
> 
> 时间：2013-04-21T18:53:50.667
> 
> 标签：database, database-design, database-schema, recommendation-engine, large-data

我们正在考虑基于大规模数据的推荐系统，同时也在寻找一种专业的方法来保持动态数据库结构以更快地工作。我们考虑了一些替代方法。一种是保存在普通的 SQL 数据库中，但与使用普通文件结构相比会慢一些。其次是使用 nosql 图形模型数据库，但它也与我们使用的算法不兼容，因为我们不断地将所有数据拉入矩阵。我们认为的最后一种方法是使用普通文件来保存数据，但由于没有查询方法或编辑器，因此更难跟踪和观察变化。因此有不同的方法和优缺点。你会选择什么，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:47:53.633

我不确定你为什么这么多次提到“文件”和“文件结构”，所以也许我遗漏了一些东西，但是为了高效的数据处理，你显然不想将东西存储在文件中。将数据读/写到磁盘是很昂贵的，而且很难在一个高效灵活的文件系统中找到查询文件的东西。

我想我会从已经提供建议的产品开始：

[http://mahout.apache.org/](http://mahout.apache.org/)

您可以从各种算法中进行选择，以在您的数据上运行以生成建议。

如果您想自己做，也许混合方法会起作用？您仍然可以使用图形数据库来表示关系，但是每个节点/顶点都可以是指向文档数据库或关系数据库的指针，其中存在更“完整”的数据表示。

# javascript - 淡入脚本不会淡出当前图像

> ID：16134962
> 
> 赞同：0
> 
> 时间：2013-04-21T18:53:54.577
> 
> 标签：javascript, jquery

我有一个脚本，当访问者点击缩略图时，它会淡入主图像。但是，主图像从白色背景淡入，我希望当前图像淡出，然后新图像淡入。

我下面的脚本可以做到这一点吗？

提前致谢，

```
<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
<meta charset="UTF-8" />
<title>A Simple jQuery Fade In/Fade Out</title>

<style>
#imageWrap { 
width: 640px; 
height: 420px; 
}
</style>

<script src="http://code.jquery.com/jquery-1.4.4.min.js" type="text/javascript">    </script>

<script type="text/javascript">
$(document).ready(function() {
$('.thumbnail').live("click", function() {
    $('#mainImage').hide();
    var i = $('<img />').attr('src',this.href).load(function() {
        $('#mainImage').attr('src', i.attr('src'));
        $('#imageWrap').css('background-image', 'none');
        $('#mainImage').fadeIn(1000);
    });
    return false; 
});
});
</script>

</head>
<body>

<a href="dimming/1.jpg" class="thumbnail"><img src="dimming/1.jpg" 
  alt="Image 1" width="20" height="20"/></a>
<a href="dimming/2.jpg" class="thumbnail"><img src="dimming/1.jpg" 
  alt="Thumbnail 2" width="20" height="20"/></a>

<div id="imageWrap">
<img src="dimming/C.jpg" alt="Main Image" id="mainImage"/>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:04:39.167

尝试这个 -

```
var i = $('<img />').attr('src',this.href).load(function() {
    $('#mainImage').fadeOut(1000,function(){  // fade out your main image first
       $('#mainImage').attr('src', i.attr('src'));
       $('#imageWrap').css('background-image', 'none');
       $('#mainImage').fadeIn(1000);  // fade in after your previous image is fadaOut
    });
}); 
```

# vb.net - Web 服务从函数中保存字符串值

> ID：16134963
> 
> 赞同：0
> 
> 时间：2013-04-21T18:53:56.677
> 
> 标签：vb.net, string, web-services, function, asmx

我只是想知道 Web 服务是否可以将我发送给它的内容保存为字符串，而无需在每次调用 WS 时都重置它？

```
<WebMethod()> _
Public Function sendLCDBrightnessLevel(ByRef command As String) As String
    'This reads a number for the LCD brightness level and store it
    'The phone will call this function every 5 minutes to see what the value is
    'android phone->WS
    Dim lcdLevel As String = ""

    If command <> "READ" Then
        lcdLevel = command
        Return "Stored: " & lcdLevel
    Else
        Return lcdLevel
    End If
End Function 
```

如果应用程序只是检查它，**lcdLevel**会保留**命令中的值吗？**

例子：

我为**命令**发送*30*并且由于它不是**READ**它将它存储在**lcdLevel**中。一旦 Android 手机进行**“每 5 分钟”**检查，它会读取*30*还是什么都没有？

 *******我在想我需要将**Dim lcdLevel As String = ""**移到函数之外，因为它每次都在函数调用的开头？我是否只需将其放在函数之外以保持存储的值，还是我还需要做其他事情？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:27:26.377

```
<WebMethod()> _
Public Function sendLCDBrightnessLevel(ByRef command As String) As String
    'This reads a number for the LCD brightness level and store it
    'The phone will call this function every 5 minutes to see what the value is
    'android phone->WS
    Dim lcdLevel As String = ""
    Dim path As String = "c:\temp\lcdValue.txt"

    If command <> "READ" Then
        lcdLevel = command
        Dim objWriter As New System.IO.StreamWriter(path, False, Encoding.UTF8)

        objWriter.WriteLine(lcdLevel)
        objWriter.Close()

        Return "Stored: " & lcdLevel
    Else
        Dim objReader As New System.IO.StreamReader(path, Encoding.UTF8)

        lcdLevel = objReader.ReadToEnd
        objReader.Close()

        Return lcdLevel
    End If
End Function 
```

猜猜这是在 WS 中轻松存储值的唯一方法吗？似乎也可以按我的需要工作。*******

# javascript - jQuery id 选择器不为不存在的元素返回空数组？

> ID：16134965
> 
> 赞同：0
> 
> 时间：2013-04-21T18:54:03.620
> 
> 标签：javascript, jquery, jquery-selectors

我看到一个 jQuery id 选择器为一个应该不存在的元素返回一个数组项。

`$('#bootstrap_alert_placeholder')`在我的函数返回中，（来自 Chrome 控制台）

```
[context: document, selector: "#bootstrap_alert_placeholder", jquery: "1.9.1", constructor: function, init: function…] 
```

但是当我在控制台中调用选择器以仔细检查输出时，我看到一个空数组，这是我所期望的。

有人知道这里发生了什么吗？我希望该函数以不同的 this 上下文执行，但我不知道这将如何影响选择器的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:03:56.430

在控制台中尝试这个，在这个页面上：

```
console.log($("#blah"));
//possible output in chrome: 
//[context: document, selector: "#blah_im_not_a_real_element", 
//constructor: function, init: function, selector: ""…]

//or in firefox: ({context:({}), selector:"#blah"})

 console.log($("#blah_im_not_a_real_element").length)
//outputs 0 
```

jQuery 对象不像`null`or中那样“空” `undefined`。它是空的，长度为 0，但仍然是一个 jQuery 对象

```
console.log($("#blah_im_not_a_real_element").constructor) 
```

# php - 如何显示前 2 段？然后是剩余的段落？- PHP

> ID：16134966
> 
> 赞同：0
> 
> 时间：2013-04-21T18:54:04.060
> 
> 标签：php

我在一个字符串中有 4 段文本。每个段落都用`<p></p>`.

1.  我的第一个目标是输出前 2 段。
2.  我的第二个目标是将剩余的段落输出到页面的其他位置。我有时可能会处理包含超过 4 个段落的字符串。

我已经在网上搜索了任何已经存在的东西。关于仅显示第一段的内容很多，但我找不到关于显示第 1-2 段然后显示其余段落的内容。有人可以在这里帮忙吗？

如果有的话，不确定使用哪个，substr、strpos 等......？

编辑 - 感谢您的回答，澄清一下，这些段落目前不包含 HTML，但是是的，我需要在每个段落中包含 HTML 的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:11:06.883

## 使用 DOMDocument

初始化：

```
$dom = new DOMDocument;
$dom->loadHTML($myString);
$p = $dom->getElementsByTagName('p'); 
```

如果每个都可以包含其他 HTML 元素（或不包含），请创建一个函数：

```
function getInner(DOMElement $node) {
    $tmp = "";
    foreach($node->childNodes as $c) {
        $tmp .= $c->ownerDocument->saveXML($c);
    }
    return $tmp;
} 
```

然后在需要这样的段落时使用该功能：

```
$p1 = getInner($p->item(0)); 
```

[你可以在这里](http://us2.php.net/manual/en/class.domdocument.php)阅读更多[`DOMDocument`](http://us2.php.net/manual/en/class.domdocument.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T19:02:00.283

使用正则表达式：

```
 $str = '<p style="color:red;"><b>asd</b>para<img src="afs"/>graph 1</p >
        <p>paragraph 2</p>
        <p>paragraph 3</p>
        <p>paragraph 4</p>
            ';

   // preg_match_all('/<p.*>([^\<]+)<\/p\s*>/i',$str,$matches);
    //for inside html like a comment sais:
    preg_match_all('/<p[^\>]*>(.*)<\/p\s*>/i',$str,$matches);

    print_r($matches); 
```

印刷：

```
Array
(
    [0] => Array
        (
            [0] => <p style="color:red;"><b>asd</b>para<img src="afs"/>graph 1</p >
            [1] => <p>paragraph 2</p>
            [2] => <p>paragraph 3</p>
            [3] => <p>paragraph 4</p>
        )

    [1] => Array
        (
            [0] => <b>asd</b>para<img src="afs"/>graph 1
            [1] => paragraph 2
            [2] => paragraph 3
            [3] => paragraph 4
        )

) 
```

# c++ - 百分比案例陈述

> ID：16134969
> 
> 赞同：0
> 
> 时间：2013-04-21T18:54:10.003
> 
> 标签：c++, percentage

我只是在写一个 if 语句来“生成”地图中的对象，我正在玩百分比，但我不确定我是否做得对。这就是我所拥有的：

```
int chance = rng_.nextInt(0, 100);
if(chance <= 20) // 20%
{
    // Spawn a chest
}
else if((chance > 20) && (chance <= 50)) // 30%
{
    // Spawn a monster
}
// Otherwise don't spawn nothing 
```

这是一个正确的方法还是我错了？

编辑：好的，我已经修复了代码，现在我认为问题已经解决了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:02:01.683

没有为什么

`30% + 70% + 30%` 超过`100%`

在您的代码中，*“生成怪物”*的机会`40%`不是`70%`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:05:02.577

假设 rng_.nextInt 生成一个 0 到 100 之间的数字，并且它是一个线性分布（0 到 99 之间的任何数字与任何其他数字一样可能），那么 0-19 将是一个胸部（20% 的机会）， 20-49 会是一个怪物（30% 的几率），而 50 到 99 之间的任何东西（50% 的几率）都不会生成任何东西。所以代码看起来像：

```
int chance = rng_.nextInt(0,100);
if ( chance < 20 ) 
{
  // spawn a chest
}
else if ( chance < 50 ) 
{
   // spawn a monster
}
else
{
  // Do other items if required.  
} 
```

所以 20+30+50 = 100 在随机数生成中相当于 0-99（100 个整数值）。

# git - 如何减少推送子树的不断增加的时间？

> ID：16134975
> 
> 赞同：21
> 
> 时间：2013-04-21T18:54:26.177
> 
> 标签：git, github, git-subtree

我正在使用[Git 子树](https://github.com/git/git/blob/master/contrib/subtree/git-subtree.txt)将几个子项目“链接”到主项目中（我来自“svn:externals”）。我已经使用了几个星期，但是将更改推送到远程子树的时间会增加每次提交。

```
$ git subtree push -P platform/rtos rtos master

git push using:  rtos master

1/    215 (0)2/    215 (1)3/    215 (2)4/    215 (3)5/    215 (4)6/    215 (5)7/    215 (6)8/    215 (7)9/    215 (8)10/    215 (9)11/    215 (9)12/    215 (10)13/    215 (11)14/    
...
20 more lines
...
(204)209/    215 (205)210/    215 (206)211/    215 (207)212/    215 (208)213/    215 (209)214/    215 (210)215/    215 (211)To https://github.com/rtos/rtos.git
   64546f..9454ce  9a9d34c5656655656565676768887899898767667348590 -> master 
```

有没有办法“清理”子树，从而减少推送更改的时间？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-22T04:16:39.837

尝试使用该`--rejoin`标志，以便在拆分后子树正确合并回您的主存储库。这样，每次拆分都不需要遍历所有历史记录。

```
git subtree split --rejoin --prefix=<prefix> <commit...> 
```

从[原始子树文档](https://github.com/apenwarr/git-subtree/blob/master/git-subtree.txt)：

> 拆分后，将新创建的合成历史合并回您的主项目。这样，未来的拆分只能搜索自最近一次 --rejoin 以来添加的历史记录部分。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-21T23:17:31.457

不，很遗憾没有。当您运行`git subtree push`时，它将重新创建此子树的所有提交。它必须这样做，因为他们的 SHA 依赖于先前的提交，并且需要这些 SHA 能够将新提交链接到旧提交。它可以缓存它，但它没有。

我想这是您使用子树与子模块所付出的代价。子树在您的存储库中是非常无状态的，一方面这很好，但另一方面会导致这些长时间的计算。子模块存储所有需要您管理的信息，但也使这样的事情变得更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-21T03:16:10.023

@LopSae 的答案有效，但是如果您使用 squash 合并/拉取，它将使您的仓库充满大量提交

这是避免这种情况的方法

```
git subtree split --rejoin --prefix=<subtree/path> --ignore-joins 
```

当你这样做时，你想推回你从中拉出的分支。否则您无法创建拉取请求。

至少有两个选项可以处理这个问题。

1.  变基

2.  在远程项目上创建一个新分支并将其拉回并推回该分支。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-11-02T11:27:33.107

也许这会有所帮助：我认为您可以`git subtree split`通过这样做来告诉您只返回 n 次提交

```
git subtree split --prefix XXX HEAD~n.. 
```

或通过指定您要开始的提交，例如

```
git subtree split --prefix XXX 0a8f4f0^.. 
```

这有助于减少时间，尽管它很不方便。

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2013-04-22T05:47:49.607

请注意，如果您决定切换到[`git submodule`](http://git-scm.com/docs/git-submodule)，现在可以，[因为 git1.8.2](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.2.txt) (2013-03-08)**跟踪子模块 repo 的最新提交**。

请参阅[git externals](https://stackoverflow.com/a/15943446/6309)。

> “git submodule”开始学习一种与远程分支的尖端集成的新模式（而不是与超级项目的 gitlink 中记录的提交集成）。

这可以加快推送速度，同时受益于子模块在子树上的附加信息（即子模块特定提交的轻量级记录）

您可以使用以下命令将该子模块更新为给定分支的最新版本：

```
git submodule update --remote 
```

> 此选项仅对`update`命令有效。
> 不要使用超级项目记录的 SHA-1 来更新子模块，而是使用子模块的远程跟踪分支的状态。

# java - 如何在android中显示日期格式？

> ID：16134977
> 
> 赞同：0
> 
> 时间：2013-04-21T18:54:33.550
> 
> 标签：java, android, date, simpledateformat

```
String date="21-04-2013"; 
```

在我的 android 应用程序中，我想以以下格式显示日期，例如“21”是一个单独的字符串，月份就像“Apr”作为单独的字符串，年份就像“13”作为单独的字符串，而不使用字符串函数。任何人都可以提供一些建议以这种格式转换吗？任何日期功能都可用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:15:02.373

您需要查看[`SimpleDateFormat`](http://developer.android.com/reference/java/text/SimpleDateFormat.html)用于解析日期字符串的类。为了在不使用字符串函数的情况下结束单独的字符串，您可能还需要多个格式化程序来输出。它看起来有点像这样：

```
String date = "21-04-2013";
SimpleDateFormat dateFormatter = new SimpleDateFormat("dd-MM-yyyy"); // input date
Date outDate = dateFormatter.parse(date);

SimpleDateFormat dayFormatter = new SimpleDateFormat("dd"); // output day
SimpleDateFormat monthFormatter = new SimpleDateFormat("MMM"); // output month
SimpleDateFormat yearFormatter = new SimpleDateFormat("yy"); // output year

String day = dayFormatter.format(outDate);
String monthy = monthFormatter.format(outDate);
String year = yearFormatter.format(outDate); 
```

如果您要使用`String.split()`，则可以摆脱上述代码段中的至少两个格式化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:56:38.630

这是您需要的课程：[DateFormat](http://developer.android.com/reference/java/text/DateFormat.html)

链接中提供了示例，但简而言之，您首先需要解析日期，然后再次格式化日期。

# javascript - 使用 Google Maps 自定义覆盖创建自定义图标（使用 Raphael JS）

> ID：16134981
> 
> 赞同：1
> 
> 时间：2013-04-21T18:54:45.837
> 
> 标签：javascript, oop, google-maps-api-3, raphael

我正在使用 Google Maps OverlayView 类创建自定义标记（使用 Raphael JS），并且在调用公共方法时访问我的新子类的某些属性时遇到问题。

我在这里遵循了谷歌相当简单的示例 ~ [https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays) ~ 创建了一个自定义标记类，包括它的“隐藏”和“显示”方法。

```
function MapCustomMarker(opts){
this.pos_ = opts.position;
this.map_ = opts.map;
this.div_ = null;
this.color_ = (!opts.color ? '#e32636' : opts.color);
this.height_ = 32;
this.width_ = 32;
this.scale_ = 1.2;

this.icons_ = {
    pinpoint:'M16,3.5c-4.142,0-7.5,3.358-7.5,7.5c0,4.143,7.5,18.121,7.5,18.121S23.5,15.143,23.5,11C23.5,6.858,20.143,3.5,16,3.5z M16,14.584c-1.979,0-3.584-1.604-3.584-3.584S14.021,7.416,16,7.416S19.584,9.021,19.584,11S17.979,14.584,16,14.584z',
    help: 'M12.558,15.254c2.362,0,4.277-1.916,4.277-4.279s-1.916-4.279-4.277-4.279c-2.363,0-4.28,1.916-4.28,4.279S10.194,15.254,12.558,15.254zM15.662,15.224c-0.875,0.641-1.941,1.031-3.103,1.031c-1.164,0-2.231-0.391-3.105-1.031c-0.75,0.625-1.498,1.519-2.111,2.623c-1.422,2.563-1.578,5.192-0.35,5.874c0.55,0.312,1.127,0.078,1.723-0.496c-0.105,0.582-0.166,1.213-0.166,1.873c0,2.938,1.139,5.312,2.543,5.312c0.846,0,1.265-0.865,1.466-2.188c0.201,1.311,0.62,2.188,1.462,2.188c1.396,0,2.544-2.375,2.544-5.312c0-0.66-0.062-1.291-0.167-1.873c0.598,0.574,1.174,0.812,1.725,0.496c1.228-0.682,1.069-3.311-0.353-5.874C17.159,16.742,16.412,15.849,15.662,15.224zM19.821,3.711l-1.414,1.414c1.499,1.499,2.428,3.569,2.428,5.851c0,2.283-0.929,4.353-2.428,5.853l1.413,1.412c1.861-1.86,3.015-4.43,3.015-7.265C22.835,8.142,21.683,5.572,19.821,3.711zM16.288,14.707l1.413,1.414c1.318-1.318,2.135-3.138,2.135-5.145c0-2.007-0.816-3.827-2.134-5.145l-1.414,1.414c0.956,0.956,1.547,2.275,1.547,3.731S17.243,13.751,16.288,14.707zM21.941,1.59l-1.413,1.414c2.042,2.042,3.307,4.862,3.307,7.971c0,3.11-1.265,5.93-3.308,7.972l1.413,1.414c2.405-2.404,3.895-5.725,3.895-9.386C25.835,7.315,24.346,3.995,21.941,1.59z'
}

this.popup_ = 'M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z';

this.icon_ = this.icons_[opts.icon];
this.setMap(opts.map);
}

MapCustomMarker.prototype = new google.maps.OverlayView();

MapCustomMarker.prototype.onAdd = function() {
// Create the DIV and set some basic attributes.
var div = document.createElement('div');
div.style.border = "none";
div.style.borderWidth = "0px";
div.style.position = "absolute";
div.style.cursor = "pointer";
div.style.width = this.width_+"px";
div.style.height = this.height_+"px";

var paper = Raphael(div,this.height_, this.width_);
var el = paper.path(Raphael.transformPath(this.icon_, 's'+this.scale_)).attr({fill: this.color_, stroke: "#333333"});   

// Set the overlay's div_ property to this DIV
this.div_ = div;

// We add an overlay to a map via one of the map's panes.
// We'll add this overlay to the overlayImage pane.
var panes = this.getPanes();
panes.overlayMouseTarget.appendChild(div);
}
MapCustomMarker.prototype.draw = function() {

// Size and position the overlay. 
var overlayProjection = this.getProjection();

// We'll use these coordinates to position the DIV.
var o = overlayProjection.fromLatLngToDivPixel(this.pos_);  
var l = o.x - Math.round(this.width_ / 2);
var t = o.y - this.height_;

this.div_.style.left = l + 'px';
this.div_.style.top = t + 'px';
}
MapCustomMarker.prototype.onRemove = function() {
  this.div_.parentNode.removeChild(this.div_);
  this.div_ = null;
}
MapCustomMarker.prototype.hide = function() {
  console.log(this.div_);
  console.log(this.color_);
  if (this.div_) {
   this.div_.style.visibility = "hidden";
  }
}

MapCustomMarker.prototype.show = function() {
  if (this.div_) {
    this.div_.style.visibility = "visible";
  }
}

MapCustomMarker.prototype.toggle = function() {
  if (this.div_) {
    if (this.div_.style.visibility == "hidden") {
      this.show();
    } else {
      this.hide();
    }
  }
} 
```

此类使用 Raphael 图标在我的地图上创建标记非常好。当我想隐藏或显示任何特定标记时，问题就来了。

```
var marker = new MapCustomMarker({position: pos, map: self.map, icon:'help', color:'#e32636'});
marker.hide(); 
```

marker.hide() 没有隐藏标记。

您会注意到在“隐藏”方法中，我有两个 console.log 命令测试 this.color_ 和 this.div_ 的值。console.log(this.color_) 返回对象启动时设置的颜色。console.log(this.div_) 返回 null，即使它在创建标记时在 'onAdd' 和 'draw' 方法中明显改变。

我不确定这是否是对 javascript 或其他内容中公共和私有属性的误解。我几乎完全使用了谷歌地图自定义叠加示例。

如果有人有任何想法，请传递给他们。（除了这个问题，我希望这段代码能帮助其他想要将 Raphael JS 功能与谷歌地图合并的人。）谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:07:39.407

因此，在实例化对象时，似乎在方法 'onAdd' 和 'draw' 有机会更改 this.div_ 变量之前调用了 marker.hide()。因为我希望所有标记在创建时都被隐藏，所以我要添加

```
div.style.visibility = "hidden"; 
```

到 onAdd 方法，稍后将调用 maker.show()，在所有标记都已加载之后。

# c++ - c++中虚方法的问题

> ID：16134982
> 
> 赞同：0
> 
> 时间：2013-04-21T18:54:53.940
> 
> 标签：c++, virtual

伙计们！我正在尝试使用断言进行一些测试，并且我想创建一个 InMemoryRepository 但我收到一个错误。这就是我想要做的：

```
void TestCaseMedicineInMemoryRepository::setUp(){
    this->medRepo = new MedicineInMemoryRepository(); //error
} 
```

错误：

```
Multiple markers at this line
    - The type 'MedicineInMemoryRepository' must implement the inherited pure virtual method 'MedicineInMemoryRepository::Save'
    - The type 'MedicineInMemoryRepository' must implement the inherited pure virtual method 'MedicineInMemoryRepository::getAll'
    - The type 'MedicineInMemoryRepository' must implement the inherited pure virtual method 
     'MedicineInMemoryRepository::findMedicineById'
    - The type 'MedicineInMemoryRepository' must implement the inherited pure virtual method 
     'MedicineInMemoryRepository::deleteMedicine'
    - The type 'MedicineInMemoryRepository' must implement the inherited pure virtual method 
     'MedicineInMemoryRepository::updateMedicine' 
```

虚拟医学资源库：

```
class MedicineRepository{
public:
    virtual void Save(Medicine* m) throw (RepositoryException) = 0;
    virtual void deleteMedicine(int ID) throw (RepositoryException) = 0;
    virtual void updateMedicine(Medicine* m) throw (RepositoryException) = 0;
    virtual List<Medicine*> getAll()=0;
    virtual Medicine* findMedicineById(int ID)=0;
}; 
```

InMemoryRepository.h：

```
#include "medicineRepository.h"

class MedicineInMemoryRepository : public MedicineRepository{
protected:
    List<Medicine*> medList;
public:
    MedicineInMemoryRepository();
    virtual ~MedicineInMemoryRepository();
    void Save(Medicine* m) throw (RepositoryException) = 0;
    void deleteMedicine(int ID) throw (RepositoryException) = 0;
    void updateMedicine(Medicine* m) throw (RepositoryException) = 0;
    //int containsName(string name)=0;
    List<Medicine*> getAll()=0;
    //int updateQuantity(Medicine* m) throw (RepositoryException) = 0;
    Medicine* findMedicineById(int ID)=0;
}; 
```

InMemoryRepository.cpp：

```
#include "InMemoryRepository.h"

MedicineInMemoryRepository::MedicineInMemoryRepository(){
}

MedicineInMemoryRepository::~MedicineInMemoryRepository(){
    for(int i=0; i < medList.getLen(); i++){
        delete medList.getElement(i);
    }
}

Medicine* MedicineInMemoryRepository::findMedicineById(int ID){
    for(int i=0; i < this->medList.getLen(); i++){
        Medicine* m = medList.getElement(i);
        if(m->getID()==ID){
            return m;
        }
    }
    return NULL;
}

List<Medicine*> MedicineInMemoryRepository::getAll(){
    return medList;
}

void MedicineInMemoryRepository::Save(Medicine* m) throw (RepositoryException){
    Medicine* med = findMedicineById(m->getID());
    if(med != NULL){
        medList.addElement(medList.getLen(), new Medicine(*m));
    }
    else{
        throw RepositoryException("There is a medicine with the given ID!");
    }
}

void MedicineInMemoryRepository::deleteMedicine(int ID) throw (RepositoryException){
    int i=0;
    while( i < medList.getLen() && medList.getElement(i)->getID()!=ID){
        i++;
    }
    if(i < medList.getLen()){
        Medicine* m = medList.deleteElementAtPos(i);
        delete m;
    }
    else{
        throw RepositoryException("There is no medicine with the given ID");
    }
}

void MedicineInMemoryRepository::updateMedicine(Medicine* m) throw (RepositoryException){
    Medicine* med = findMedicineById(m->getID());
    if (med != NULL){
        m->setQuantity(med->getQuantity());
        m->setName(med->getName());
    //          this->medList->getElementAtPosition(pos).setConcentration(m.getConcentration());
        deleteMedicine(med->getID());
        Save(m);
    }
} 
```

收到上述错误，我做错了什么？我想了3个小时，我不明白！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T18:56:49.413

```
 void Save(Medicine* m) throw (RepositoryException) = 0;
    void deleteMedicine(int ID) throw (RepositoryException) = 0;
    void updateMedicine(Medicine* m) throw (RepositoryException) = 0; 
```

移除`=0;`
虽然允许定义纯虚函数，但它们仍然保持纯虚函数，并且不允许非虚函数调用。

# camera - 如何在 Corona Simulator 中使用相机？

> ID：16134983
> 
> 赞同：2
> 
> 时间：2013-04-21T18:55:00.727
> 
> 标签：camera, lua, simulator, coronasdk

我想知道如何在 Corona Simulator 中使用相机。我想在模拟器上测试我的应用程序（需要摄像头），但我不知道如何启用摄像头的使用。无论如何设置我的网络摄像头作为模拟器摄像头？我只是想知道这是否可能，或者我只需将我的应用程序放在设备上以使用相机对其进行测试。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T17:00:08.863

要访问设备相机或照片库，您可以调用以下内容：

```
media.show( mediaSource, listener [, filetable] ) 
```

为了对此进行测试，您必须在手机上加载该应用程序。Corona 不允许您为模拟器使用网络摄像头。有关更多信息，请查看电晕文档@http [://docs.coronalabs.com/api/library/media/show.html](http://docs.coronalabs.com/api/library/media/show.html)

# clojure - 如何判断 Neo4j 嵌入式数据库是否是新创建的

> ID：16134985
> 
> 赞同：1
> 
> 时间：2013-04-21T18:55:04.897
> 
> 标签：clojure, neo4j

我有一个在嵌入式模式下使用 Neo4j 的 Clojure 应用程序。我用新路径调用 ( `new GraphDatabaseFactory).newEmbeddedDatabase`。我如何判断结果是否`GraphDatabaseService`是新创建的/为空的？

额外的问题：如果它不是新创建的，我如何读取数据库中的元数据来判断它是用什么版本的系统构建的？如果有人不小心传入了一个不是我的应用程序创建的有效 Neo4j 数据库的路径，我想抛出一个`Exception`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:15:54.703

完全披露：我不知道clojure。

以编程方式，我看不到确定这一点的方法，但您可以通过在调用`GraphDatabaseFactory`.

至于元数据，您可以通过将a`GraphDatabaseService`转换为 an`InternalAbstractGraphDatabase`并对其执行 a来执行`getConfig()`此操作。这将允许您访问`Config`该类，该类具有一个属性映射，其中包含可以向您显示版本以及其他内容的参数。

# python - 如何绘制numpy数组与行号

> ID：16134989
> 
> 赞同：2
> 
> 时间：2013-04-21T18:55:17.640
> 
> 标签：python, arrays, plot

假设我们有一个包含单列的 csv 文件。我可以用 ;

```
data = np.loadtxt(file)
test = data[:,0]
plot(test) 
```

它绘制测试与行号（条目）。但我想乘以这个行号以便我可以绘制；

```
plot(test,row[i]*25) 
```

我认为应该存在一种比排列行号更简单的方法。任何pythonic方式来处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T19:13:12.680

给定数据，您可以执行以下操作：

```
import matplotlib.pyplot as plt

data=[0,2,113,....,19,5]
x_coordinate = [ 25 * i for i in range(len(data)) ]
plt.plot(x_coordinate,data)
plt.show() 
```

您将拥有所有 x 标签索引为 25 的倍数

或使用 numpy 数组功能：

```
x_coordinates = 25 * np.arange(test.size) 
```

# python - python：e盘的os.walk不工作

> ID：16134995
> 
> 赞同：2
> 
> 时间：2013-04-21T18:55:34.007
> 
> 标签：python, os.walk

简单代码：

```
import os 

filenamelist = []
#path = "E:\blah\blah\blah"
path = "C:\Program Files\Console2"
for files in os.walk(path):
    filenamelist.append(files)
    print files 
```

以上工作。但是当我设置 path= "E:\blah\blah\blah" 脚本运行但什么也不返回。

```
1) C:\Users\guest>python "read files.py"

('C:\\Program Files\\Console2', [], ['console.chm', 'Console.exe', 'console.xml', 'ConsoleHook.dll', 'FreeImage.dll', 'FreeImagePlus.dll'])

2) C:\Users\guest>python "read files.py"

C:\Users\guest> 
```

知道为什么 os.walk() 在 E:\ 上遇到困难吗？我无法让它在 E: 上读取任何内容。我有一个外部驱动器映射到 E 驱动器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T18:58:23.847

这可能是因为 python 将`\`其视为转义符号，而您的组合实际上是 E: 磁盘路径的转义符号。

可以通过以下方式之一解决：

1.  原始字符串文字：（`r"E:\blah\blah\blah"`反斜杠不被视为转义符号）。
2.  双反斜杠：（`"E:\\blah\\blah\\blah"`转义符号自行转义）。
3.  斜线`"E:/blah/blah/blah"`（这也适用于 Windows）。

# javascript - 如何暂停和恢复 JavaScript 计时器

> ID：16134997
> 
> 赞同：4
> 
> 时间：2013-04-21T18:55:49.200
> 
> 标签：javascript, timer, resume

我有这个工作正常的计时器，但我需要能够在此之后暂停和恢复它。如果有人可以帮助我，我将不胜感激。

```
<html>
<head>
<script>
function startTimer(m,s)
    {
        document.getElementById('timer').innerHTML= m+":"+s;
        if (s==0)
            {
               if (m == 0)
                {
                    return;
                }
                else if (m != 0)
                {
                    m = m-1;
                    s = 60;
                }
        }
    s = s-1;
    t=setTimeout(function(){startTimer(m,s)},1000);
}

</script>
</head>

<body>
<button onClick = "startTimer(5,0)">Start</button>

<p id = "timer">00:00</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T19:08:14.417

我简直无法忍受看到`setTimeout(...,1000)`并期望它恰好是 1,000 毫秒。新闻快讯：不是。事实上，根据您的系统，它可能在 992 和 1008 之间的任何位置，并且这种差异会加起来。

我将向您展示一个可暂停的计时器，它具有增量计时以确保准确性。唯一不准确的方法是在中间更改计算机的时钟。

```
function startTimer(seconds, container, oncomplete) {
    var startTime, timer, obj, ms = seconds*1000,
        display = document.getElementById(container);
    obj = {};
    obj.resume = function() {
        startTime = new Date().getTime();
        timer = setInterval(obj.step,250); // adjust this number to affect granularity
                            // lower numbers are more accurate, but more CPU-expensive
    };
    obj.pause = function() {
        ms = obj.step();
        clearInterval(timer);
    };
    obj.step = function() {
        var now = Math.max(0,ms-(new Date().getTime()-startTime)),
            m = Math.floor(now/60000), s = Math.floor(now/1000)%60;
        s = (s < 10 ? "0" : "")+s;
        display.innerHTML = m+":"+s;
        if( now == 0) {
            clearInterval(timer);
            obj.resume = function() {};
            if( oncomplete) oncomplete();
        }
        return now;
    };
    obj.resume();
    return obj;
} 
```

并使用它来启动/暂停/恢复：

```
// start:
var timer = startTimer(5*60, "timer", function() {alert("Done!");});
// pause:
timer.pause();
// resume:
timer.resume(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T19:17:03.460

```
<p id="timer">00:00</p>
<button id="start">Start</button>
<button id="pause">Pause</button>
<button id="resume">Resume</button>

var timer = document.getElementById("timer");
var start = document.getElementById("start");
var pause = document.getElementById("pause");
var resume = document.getElementById("resume");
var id;
var value = "00:00";

function startTimer(m, s) {
    timer.textContent = m + ":" + s;
    if (s == 0) {
        if (m == 0) {
            return;
        } else if (m != 0) {
            m = m - 1;
            s = 60;
        }
    }

    s = s - 1;
    id = setTimeout(function () {
        startTimer(m, s)
    }, 1000);
}

function pauseTimer() {
    value = timer.textContent;
    clearTimeout(id);
}

function resumeTimer() {
    var t = value.split(":");

    startTimer(parseInt(t[0], 10), parseInt(t[1], 10));
}

start.addEventListener("click", function () {
    startTimer(5, 0);
}, false);

pause.addEventListener("click", pauseTimer, false);

resume.addEventListener("click", resumeTimer, false); 
```

on [jsfiddle](http://jsfiddle.net/Xotic750/wwg8H/)

There are a whole load of improvements that could be made but I'm sticking with the code that the OP posted for the OP's comprehension.

Here is an extended version to give you further ideas on [jsfiddle](http://jsfiddle.net/Xotic750/PFAcB/)

# java - 不能在 ArrayList 中使用对象的 toString() 方法

> ID：16134998
> 
> 赞同：4
> 
> 时间：2013-04-21T18:55:55.340
> 
> 标签：java, arrays, multidimensional-array, arraylist

我正在尝试使用`toString()`内部对象的方法`ArrayList`，它正在打印内存地址而不是预期值。我把我的课程翻译成英文，如果我忘记了什么，抱歉，如果你不明白，请追问。**让我们看看我的代码：**

### 安排课程（我抑制了 getter 和 setter）：

```
static Professor professor;
static Room room;
static Classroom classroom;

public String toString() {
        return "Schedule [getProfessor()=" + getProfessor() + ", getRoom()="
                + getRoom() + ", getClassRoom()=" + getClassRoom() + ", getClass()=" + getClass() + ", hashCode()="
                + hashCode() + ", toString()=" + super.toString() + "]";
} 
```

### 学校

```
ArrayList<Professor> professor = new ArrayList<Professor>();
ArrayList<Room> room = new ArrayList<Room>();
ArrayList<Classroom> classroom = new ArrayList<Classroom>(); 
public ArrayList<Schedule[][]> sched = new ArrayList<Schedule[][]>(); 
```

我正在使用遗传算法（目前我正在学习它，所以我不太了解），这是我的“人口生成器”：

### 人口

```
public static void generatePopulation(School school){

        // Shuffle the arraylist for generate a random population
        Collections.shuffle(school.getProfessor());
        Collections.shuffle(school.getClassroom());
        Collections.shuffle(school.getRoom());

        Schedule[][] sched1 = new Schedule[1][1];

        // Generate population (just a little test to see if it works)
        sched1[0][0].addEverything(school.getProfessor().get(0), school.getClassroom().get(0), school.getRoom().get(0));
        school.sched.add(sched); 
```

### 主要的

```
 (... school and associations created ...)
    Population.generatePopulation(school);
    System.out.println(school.getSched().isEmpty()); // it returns false, that is, isn't empty
    System.out.println(school.getSched().get(0).toString()); 
    // returns "[[Lentidades.Schedule;@40914272" (entidades = name of my package) 
```

那么，为什么我收到的是内存位置而不是预期值？我想我什么都没有忘记，但是如果您在这段代码中看到一些奇怪的东西，只需发送一个问题，我将解释/粘贴剩余的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T18:58:11.407

您收到的是`array`of `Schedule`s，因此您的`toString()`方法永远不会被使用。

查看输出的`[[`部分，这告诉您正在打印`[[Lentidades.Schedule;@40914272`二维。`array`

正如@JonSkeet 和@MarounMaroun 指出的那样，一种简单的打印`arrays`方法是使用[`Arrays.toString()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)for one-dimensional`arrays`或[`Arrays.deepToString()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#deepToString%28java.lang.Object%5B%5D%29)for multi-dimensional。

# iphone - 如何从 appdelegate 切换视图？

> ID：16134999
> 
> 赞同：0
> 
> 时间：2013-04-21T18:55:58.807
> 
> 标签：iphone, ios, objective-c, storyboard

此代码来自我的 AppDelegate 来自我的应用程序，它不使用故事板，并且此代码切换视图正常 -

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0)
    {
        LN_ShowNoteVC *showVC = [[LN_ShowNoteVC alloc] init];
        _iconBage = _iconBage - 1;
        showVC.number = _showP;
        NSLog(@"showVC.number = %i", _showP);
        _window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        _window.rootViewController = showVC;
        [_window makeKeyAndVisible];
    }
} 
```

现在，我使用 StoryBoard 重写了我的应用程序......并且这段代码不起作用......我得到黑色窗口

我如何从 AppDelegate 切换视图？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:17:56.170

This is answer)) I Get it) =)

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0)
    {
        LN_ShowNoteVC *showVC = [[LN_ShowNoteVC alloc] init];
        _iconBage = _iconBage - 1;
        showVC.numberPhoto = _showP;
        NSLog(@"showVC.numberPh = %i", _showP);            
        UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"ShowN"];
        vc.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        _window.rootViewController = vc;
        [_window makeKeyAndVisible];
    }
} 
```