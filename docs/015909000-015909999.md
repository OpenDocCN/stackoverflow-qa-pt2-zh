# StackOverflow 问答 15909000-15909999

# javascript - 用播放器隐藏 div 时停止 JWPlayer

> ID：15909006
> 
> 赞同：2
> 
> 时间：2013-04-09T17:49:57.450
> 
> 标签：javascript, jquery, jwplayer

我有一个网站，我在其中使用 JavaScript 添加或删除 css 类。使用这种方法，我可以根据需要隐藏一个 div 或显示一个 div。它工作得很好。

问题是一个 div 打开一个带有 JWplayer 的视频，当我隐藏“窗口”或者更好地说，div 时。声音仍在播放，所以当有人单击“隐藏”按钮或关闭按钮时，我需要一个代码来停止视频。

你是怎样做的？我不知道。

谢谢

HTML

```
 <div class="videoquon">
         <div class='my-video-close'></div>
<div id='my-video'></div>
<script type='text/javascript'>
    jwplayer('my-video').setup({
        file: 'qvideo.f4v',
        width: '600',
        height: '337'
    });
</script>
</div> 
```

JavaScript

```
 $('div.vidreveal a').click(
                function(event) {
                    event.stopPropagation();
                    $('div.videoquon').slideToggle(300);
                }
            );

   $('div.my-video-close').click(
                function(event) {
                    event.stopPropagation();
                    $('div.videoquon').slideToggle(300);
                }
            ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:59:14.443

我不认识 JW Player，但从[他们的文档](http://www.longtailvideo.com/support/jw-player/28850/using-the-javascript-api)来看，我会选择

```
$( 'div.my-video-close' ).click( function( event ) {
    event.stopPropagation();
    jwplayer( 'my-video' ).stop();
    $( 'div.videoquon' ).slideToggle( 300 );
}); 
```

...或`jwplayer( 'my-video' ).pause();`取决于所需的效果。

# graph-visualization - Gephi：如何创建动态图并动态更改节点的标签？

> ID：15909010
> 
> 赞同：0
> 
> 时间：2013-04-09T17:50:02.837
> 
> 标签：graph-visualization, gephi

我正在尝试做的是标签传播算法的可视化。我需要在一定时间内更改节点的标签，并根据该标签，节点需要采用该标签的颜色。

这里的技巧 Gephi 部分是如何从 gexf 文件动态更改标签，以便我可以设置 Gephi 以向不同的标签显示不同的颜色，或者我如何直接在文件上更改颜色（但根据时间戳，而不是以静态方式）。

我知道这个问题非常具体，但我之前在 SO 附近看到过一些 Gephi 用户。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T16:31:20.353

根据[GEXF Primer](http://gexf.net/1.2draft/gexf-12draft-primer.pdf) ，你不能有动态标签。但是您可以设置动态属性，并且在 Gephi 中您可以编辑用作标签的属性（默认属性当然是“标签”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T11:16:42.940

您需要在节点导入文件中添加一列，例如“标签”，并根据您想要“将节点分组为一种颜色”的方式给出数字。然后您可以选择通过新列为节点着色。

# c# - 是否可以向数据绑定的组合框的绑定源添加一行

> ID：15909016
> 
> 赞同：0
> 
> 时间：2013-04-09T17:50:26.797
> 
> 标签：c#, .net, winforms, data-binding

是否可以使用以下内容向绑定源添加一行：

```
"Please Select..."   <-- what it will display on the combobox
DbNull.Value   <-- Value 
```

我有一个组合框，它是绑定到绑定源的数据。我不想向数据库添加额外的行，而是有一个选项只显示在组合框中，因此当它读取上述内容时，它会在数据库中设置相应的值。另外因为还有其他组合框使用相同的数据成员和数据源，所以我只想将选项添加到那个特定的组合框。

以上是设计器文件 InitializeComponent() 方法的内容

```
 this.cmbSecCSR = new System.Windows.Forms.ComboBox();
        this.csrBindingSource2 = new System.Windows.Forms.BindingSource(this.components);
 this.cmbSecCSR.AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.SuggestAppend;
this.cmbSecCSR.AutoCompleteSource = System.Windows.Forms.AutoCompleteSource.ListItems;
// this.cmbSecCSR.Items.Insert(0, "Select");
this.cmbSecCSR.DataSource = this.csrBindingSource2;
this.cmbSecCSR.DisplayMember = "Name";
this.cmbSecCSR.FormattingEnabled = true;
this.cmbSecCSR.Location = new System.Drawing.Point(112, 26);
this.cmbSecCSR.Margin = new System.Windows.Forms.Padding(0);
this.cmbSecCSR.Name = "cmbSecCSR";
this.cmbSecCSR.Size = new System.Drawing.Size(184, 21);
this.cmbSecCSR.TabIndex = 2;
this.cmbSecCSR.ValueMember = "Username";
this.cmbSecCSR.TextChanged += new System.EventHandler(this.comboBox_TextChanged);
this.cmbSecCSR.Enter += new System.EventHandler(this.cmbBox_Entered);

// csrBindingSource2
// 
this.csrBindingSource2.DataMember = "CSR";
this.csrBindingSource2.DataSource = this.productionDS; 
```

//![检查此图像](https://i.stack.imgur.com/oZPqJ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:02:56.503

试试这个示例方式。

标记：

```
<asp:DropDownList ID="ddljobcategory" CssClass="txtborder" Width="175px" runat="server" Height="20px" >
</asp:DropDownList> 
```

代码隐藏：

```
DataView dvProduct = new DataView();
dvProduct = objcategory.GetCategoryType();
ddljobcategory.DataTextField = "CatName";
ddljobcategory.DataValueField = "CatId";
ddljobcategory.DataSource = dvProduct;
ddljobcategory.DataBind();
ddljobcategory.Items.Insert(0, "Select");//**Add your content instead of Select**
ddljobcategory.Items[0].Value = "0"; 
```

它是这样显示的：

![在此处输入图像描述](https://i.stack.imgur.com/oVvhl.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/TrmxN.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:37:33.063

如果您使用 SQL 创建您的 DataView UNION 一个包含所需值的 SELECT 语句：

```
 SELECT Rule_Number, Title FROM Rules 
          UNION
          SELECT '', '<Select>'
          ORDER BY 2 
```

# ios - 显示另一个 UIWindow 的麻烦

> ID：15909017
> 
> 赞同：3
> 
> 时间：2013-04-09T17:50:27.047
> 
> 标签：ios, ipad, uiwindow

我正在编写一个 iPad 应用程序，并试图`UIWindow`在我的应用程序的主窗口顶部显示第二个。我要做的主要事情是创建一个登录窗口（[如何使用 UISplitViewController 显示登录？](https://stackoverflow.com/q/15843030/1435520)），似乎在这里创建第二个窗口可能是一个不错的选择。

我制作了一个非常简单的应用程序来尝试一下。当用户点击一个按钮时，我试图显示第二个窗口。这是代码：

```
- (IBAction)showOtherWindow:(id)sender {
    UIWindow* otherWindow = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];

    otherWindow.hidden = NO;
    otherWindow.clipsToBounds = YES;
    otherWindow.windowLevel = UIWindowLevelStatusBar;
    otherWindow.backgroundColor = [UIColor redColor];
    [otherWindow makeKeyAndVisible];
} 
```

我期待在这里看到一个大的红色屏幕，但这并没有发生 - 没有任何变化。最终，我希望在顶部浮动一个较小的窗口。但现在我只想看到一扇窗户。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-09T17:53:58.110

如果您使用 ARC 代码，则您的窗口在`showOtherWindow:`返回后会立即被释放。尝试分配`otherWindow`给持久对象中的 ivar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:58:51.947

将窗口的指针分配给 __strong 实例变量 (ivar) 或强属性。关闭窗口后将 ivar 或属性设置为 nil。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T15:36:16.037

在 iOS 中，您有一个可以填满整个屏幕的窗口。要做你想做的事，你可以创建一个 UIViewController/UIView 并以模态模式打开它。

从您的主视图控制器中，您可以执行类似的操作

```
UILoginViewController *login = [[UILoginViewController alloc] init]; 
login.modalPresentationStyle = UIModalPresentationFormSheet; // or whatever you prefer

login.completionWithItemsHandler = hdl;

[self presentViewController:login animated:YES completion:nil]; 
```

# php - PHP 格式数字隐藏零

> ID：15909021
> 
> 赞同：1
> 
> 时间：2013-04-09T17:50:38.587
> 
> 标签：php, numbers, format, hide, zero

为了用大量值填充选项卡，我不想显示等于“0”的值。

例如，而不是：

```
Test USER   1   0   1   0
Sample USER 1   0   1   0 
```

我想要：

```
Test USER   1       1   
Sample USER 1       1 
```

我使用显示我的价值观`printf("<td>%d</td>", $value);`

我什至试过`printf("<td>%0d</td>", $dl_ends[0]);`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:52:06.947

尝试这个

```
printf("<td>%d</td>", $value != 0 ? $value : ''); 
```

**编辑**

如果还需要捕获空字符串，可以使用以下代码

```
printf("<td>%d</td>", $value != 0 && $value != '' ? $value : ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:13:27.963

```
<td><?php $value ? printf("%d", $value) : ''; ?></td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:45:49.720

有两种方法可以解决我的问题： `printf("<td>%s</td>", $value != 0 ? $value : '');`避免数字格式，或者 `$value != 0 ? printf("<td>%d</td>", $value) : printf("<td></td>");`更长但更精确。

# c# - 反应式扩展：Where() 的麻烦

> ID：15909023
> 
> 赞同：1
> 
> 时间：2013-04-09T17:50:46.857
> 
> 标签：c#, system.reactive

我喜欢 Rx，但我一直遇到一个问题。

假设我们有一个单独的上游`IObservable<Foo>`和`N`下游序列，每个序列只对满足一些简单谓词（比如`foo.bar == someKey`）的那些 Foo 感兴趣。

当然，这对`Where()`操作员来说是一项简单的工作：

```
IObservable<Foo> foos = ...;
foos.Where(foo => foo.bar == "abc").Subscribe(f => A(f));
foos.Where(foo => foo.bar == "xyz").Subscribe(f => B(f));
foos.Where(foo => foo.bar == "bla").Subscribe(f => C(f));
...
[many more subscriptions for different bar values] 
```

这里本质上会发生的是，对于每个`Foo`产生的上游，`Where()`谓词将被评估那个`Foo` `N`时间。它就像一个线性搜索来查找所有想要这个的订阅者`Foo`。这一切都很好，这正是我们（应该）`Where()`在这里使用的期望。

我遇到的问题是，就我而言，`N`可能非常大，但想要任何特定的订阅者子集`Foo`非常小。通常，每个`Foo`. 这意味着当我可以进行非常有效的查找以找到也`Foo`需要传播的少数下游序列时，我实际上是在进行缓慢的线性搜索。我的应用程序在性能非常关键的环境中运行，我无法承受这种低效率。

我绞尽脑汁试图找到一些更有效的优雅方法，但我只能提出涉及存储大量状态（映射订阅者等）并且必须非常小心地管理并发的解决方案，这打败了很多首先使用 Rx 的目的。就现有运营商而言，我更喜欢某种方式来处理这个问题。有没有人处理过这个问题，或者知道一个好的解决方案？我很乐意提供更多细节。

**编辑**

我想我的例子有点过于简单了。我不是在处理与某个已知范围内的数值匹配的情况。N 仅用于说明目的。更新了上面的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:44:21.853

在 Codeplex 的 Rx 讨论板上从 Dave Sexton 那里得到了一个很好的解决方案：

[https://rx.codeplex.com/discussions/439717](https://rx.codeplex.com/discussions/439717)

> **将GroupBy**或**GroupByUntil**与**Publish**一起使用怎么样？
> 
> 例如：（*未测试*）
> 
> ```
> IConnectableObservable<IGroupedObservable<string, Foo>> foosByBar = 
>     (from foo in foos
>      group foo by foo.bar)
>     .Publish();
> 
> foosByBar.Where(g => g.Key == "abc").Take(1).SelectMany(g => g).Subscribe(A);
> foosByBar.Where(g => g.Key == "xyz").Take(1).SelectMany(g => g).Subscribe(B);
> foosByBar.Where(g => g.Key == "bla").Take(1).SelectMany(g => g).Subscribe(C);
> 
> foosByBar.Connect(); 
> ```
> 
> **GroupBy**对每个键使用字典查找来找到推送值的适当可观察对象。
> 
> **Publish**广播 group-by，以便所有观察者共享字典查找操作。
> 
> **Where** / **Take**只执行一次谓词以定位适当的组，然后它接收该组中每个值的广播以及对同一键感兴趣的任何其他观察者。
> 
> 请注意，**GroupBy**不会重播**IGroupedObservable**，因此您必须在连接之前设置所有订阅。如果您宁愿使用**RefCount**而不是**Connect**，那么也许您应该考虑将**Replay运算符应用于****GroupBy**的结果 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:52:06.883

有些东西正在存储状态，现在它只是存储您通过 Wheres 添加的所有订阅者的可观察对象。不清楚你是否意识到这一点，但 foos 必须在每条消息上通知它的每个观察者。`Where`所做的只是让大多数观察者简单地检查谓词并返回，但每个谓词都会检查每条消息。

构建一个包含为观察者的处理程序地图不会太困难，并且应该为您带来所需的性能提升。只需根据需要注册尽可能多的处理程序，然后将地图订阅到源 observable。如果 a`Dictionary`不提供您需要的匹配语义，您将不得不提出一些其他方案来减少查找，但总体思路是相同的。请注意，如果它有多个应处理的输入，您可以多次注册同一个处理程序，并且您可以为同一输入注册多个处理程序。

```
class ObserverMap<T> : IObserver<T>
{
    ObserverMap(Action<Exception> onError, Action onCompleted)
    {
        _onError = onError;
        _onCompleted = onCompleted;
        _handlers = new Dictionary<T, List<Action<T>>>();
    }
    ObserverMap(Action<Exception> onError, Action onCompleted, IEqualityComparer<T> comparer) 
    {
        _onError = onError;
        _onCompleted = onCompleted;
        _handlers = new Dictionary<T, List<Action<T>>>(comparer);
    }

    int _stopped;
    Dictionary<T, List<Action<T>>> _handlers;
    Action<Exception> _onError;
    Action _onCompleted;

    public void OnCompleted()
    {
        if (System.Threading.Interlocked.Exchange(ref _stopped, 1) == 0)
        {
            if (_onCompleted != null) _onCompleted();
        }
    }

    public void OnError(Exception error)
    {
        if (System.Threading.Interlocked.Exchange(ref _stopped, 1) == 0)
        {
            if (_onCompleted != null) _onCompleted();
        }
    }

    public void OnNext(T value)
    {
        if (_stopped != 0) return;

        List<Action<T>> match;
        if (_handlers.TryGetValue(value, out match))
        {
            foreach (var handler in match)
            {
                handler(value);
            }
        }
    }

    public IDisposable RegisterHandler(T key, Action<T> handler)
    {
        if (handler == null) throw new ArgumentNullException("handler");

        List<Action<T>> match;
        if (!_handlers.TryGetValue(key, out match))
        {
            match = new List<Action<T>>();
            _handlers.Add(key, match);
        }
        match.Add(handler);

        return System.Reactive.Disposables.Disposable.Create(() => match.Remove(handler));
    }
} 
```

# asp.net-mvc - 在 HttpPost 视图中使用 MVC 3 访问动态下拉列表

> ID：15909029
> 
> 赞同：1
> 
> 时间：2013-04-09T17:51:04.613
> 
> 标签：asp.net-mvc, model-view-controller

我为传入视图的字符串列表中的每个项目动态生成 DropDownList，然后为一些标准选项生成下拉列表，下拉列表名称为字母“drp”+通过视图数据传入视图的字符串项目。我遇到的问题是我无法弄清楚如何访问视图中 HttpPost 中的单个下拉列表，因为项目的名称和数量各不相同。

这是我的视图的获取代码：

```
public ActionResult ModMapping()
        {

            ViewData["mods"] = TempData["mods"];
            return View();
        } 
```

这是我的视图生成：

```
<% using (Html.BeginForm()) { %>

<h2>Modifier Needing Mapping</h2>
<p>Please Choose for each modifier listed below what type of fee it is.  There is an ingore option if it is not a gloabl fee modifier, professional fee modifier, or technical fee modifier.</p>
<table>
    <tr>
        <th>Modifier</th>
        <th>Mapping Options</th>
    </tr>
        <% int i; 
           i=0;
           var modsList = ViewData["mods"] as List<String>;%>

        <% foreach (String item in modsList) { %>
            <% i++; %>
            <tr>
                <td>
                    <%: Html.Label("lbl" + item, item) %>
                </td>
                <td>
                    <%: Html.DropDownList("drp" + item, new SelectList(
                  new List<Object>{ 
                       new { value = "NotSelected" , text = "<-- Select Modifier Type -->"},
                       new { value = "Global" , text = "Global Fee" },
                       new { value = "Professional" , text = "Professional Fee"},
                       new { value = "Technical", text = "Technical Fee"},
                       new { value = "Ingore", text="Ingore This Modifier"}
                    },
                  "value",
                  "text",
                  "NotSelected")) %>
                </td>
            </tr>
        <% } %>
</table>
 <input type="submit" value="Done" />
<% } %></code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:04:19.383

如果您为视图使用模型，这非常简单，因为 MVC 会自动将所有下拉列表映射回您的模型。

如果你真的不想使用模型，[你可以像这样访问表单中的值](https://stackoverflow.com/questions/5088450/simple-mvc3-question-how-to-retreive-form-values-from-httppost-dictionary-or)：

```
// Load your modsList here.
foreach (String item in modsList)
{
   var dropDownValue = Request["drp" + item];
} 
```

另一种选择是编写一个接受 FormCollection 的控制器函数，它只是 POST 中所有值的简单字典：

```
[HttpPost]
public ActionResult ModMapping(FormCollection formCollection)
{
    // Load your modsList here.
    foreach (String item in modsList)
    {
       var dropDownValue = formCollection["drp" + item];
    }
} 
```

您可能可以简化一些事情，并通过 FormCollection 循环查找以“drp”开头的项目，具体取决于您的页面和要求的外观。

# perl - 替换大文件中的最后一个字符

> ID：15909031
> 
> 赞同：4
> 
> 时间：2013-04-09T17:51:21.767
> 
> 标签：perl

我有一个程序，它从许多其他文件中提取数据以形成一个大的（~200MB）批量 SQL 插入语句

```
INSERT INTO ...
VALUES
('a','b',1,2,3),
('c','d',4,5,6), 
```

不幸的是，最后一行需要以分号而不是逗号结尾。有没有办法（理想情况下在我的 perl 程序中）只将最后一个字符从 a`,`变成 a `;`？

我尝试过的事情：

1）文件完成并关闭后：

```
open(DAT,">>$output") || die("Cannot Open File");
seek(DAT, 2, SEEK_END); 
print DAT ";"; 
close(DAT); 
```

这只是在最后放置一个分号。

2）从我的 perl 程序中调用``perl -p -i -e 's/,$/;/g' $output`;`，但这是替换每个逗号。

3) 打印最后一行时，以分号而不是逗号结尾。但是，这不起作用，因为在写完该行之前，我实际上并不知道它是最后一行。

4) 将整个文件复制到一个新文件中，除了最后一个字符是 a`;`而不是 a `,`。然而，这很慢，因此并不理想。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T18:11:45.670

如果您知道要替换的 ',' 始终是文件中的倒数第二个字节（最后一个字节是“\n”），那么您可以试试这个：

```
my $fsize = -s $filename;  
# print $fsize."\n";
open($FILE, "+<", $filename) or die $!; 
seek $FILE, $fsize-2, SEEK_SET; # or 0 (numeric) instead of SEEK_SET
print $FILE ";";
close $FILE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:04:36.927

你试过

```
perl -p -i -e 's/,$/;/g' 
```

这将在文件中的每一行应用此替换。只做一次，使用`-0`开关 slurp 文件：

```
perl -0777 -pi -e 's/,$/;/' 
```

仅当最后一个字符是逗号（带有可选的尾随换行符）时才会匹配。如果您有尾随空格或其他字符，它将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:46:31.550

您使用了错误的偏移量。SEEK_END 将偏移量添加到 END 位置。所以使用“-2”作为偏移量。试试这个：

```
use strict;
use warnings;

open my $fh, "+<x.txt" or die;
seek $fh, -2, 2;
print $fh ";\n";
close $fh; 
```

或者更健谈一点：

```
use strict;
use warnings;
use Fcntl qw(SEEK_END);

open my $fh, "+<x.txt" or die;
seek $fh, -2, SEEK_END;
print $fh ";\n";
close $fh; 
```

# jms - HornetQ JMS 主题到主题桥

> ID：15909033
> 
> 赞同：0
> 
> 时间：2013-04-09T17:51:25.993
> 
> 标签：jms, hornetq, jms-topic

我正在尝试在两个主题之间架起一座桥梁。这个想法是这样的：

*   通知被发布到 HornetQ 服务器 A 上的主题
*   此通知被发送到 HornetQ 服务器 B 上的主题（通过网桥？）
*   客户端应用程序从服务器 B 获取通知。

我需要这样做的原因是，如果服务器 B 关闭，我们仍然希望主题向上并最终交付给订阅服务器。

我需要的是一个示例 hornetq-configuration.xml 和 hornetq-jms.xml 来证明这一点。还是我看错了，有更好的方法吗？

我正在使用 HornetQ 2.2.14.Final。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:15:41.463

话题不在核心层面，但你可以做到；请点击此链接： [https ://community.jboss.org/thread/177979](https://community.jboss.org/thread/177979)

# javascript - 从另一个站点接收数据

> ID：15909035
> 
> 赞同：0
> 
> 时间：2013-04-09T17:51:32.103
> 
> 标签：javascript

我想根据来自另一个站点的各种数据制作一个计算内容的小网页。比方说一个在线浏览器游戏。

我想从游戏的网页中获取一些具体的细节，但我什至不知道从哪里开始。

这对javascript可行吗（如果不是我想知道它是什么语言）？谁能给我一个关于如何做到这一点的一般指导方针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:52:24.483

我有一个使用 AJAX 动态获取信息的标准函数。我使用 PHP 作为我的听众。您的侦听器必须能够接受来自 URL 的变量，例如 PHP $_GET[]。

在下面的示例中，名为“source_url.php”的侦听器必须检查在 $_GET[field] 中接收到的值，然后简单地打印/回显结果。

JAVASCRIPT：

```
function get_(url, func)
{
 var http;
 try { http = new XMLHttpRequest(); } catch (e) { try { http = new ActiveXObject(\"Msxml2.XMLHTTP\"); } catch (e) { try { http = new ActiveXObject(\"Microsoft.XMLHTTP\"); } catch (e) { alert(\"Your browser broke!\"); return false; } } }

 http.open(\"GET\", url, true);
 http.onreadystatechange = function() { if(http.readyState == 4) { func(http); } }
 http.send(null);
}

function get_info(fieldname)
{
 get_("source_url.php?field=" + fieldname, showResult)
}

function showResult(h)
{
 alert("The result is: " + h.responseText);
} 
```

HTML

```
<button onClick='get_info("name");'>Get the ship Name</button>
<button onClick='get_info("reg");'>Get the Registration Number</button>
<button onClick='get_info("capt");'>Who is the Captain?</button> 
```

PHP

```
<?php
 if ($_GET[field] == "name") { print "U.S.S. Enterprise"; }
 if ($_GET[field] == "reg") { print "NCC - 1701"; }
 if ($_GET[field] == "capt") { print "Jean Luc Picard"; }
?> 
```

我一直在使用它，尽管我创建了一个具有身份验证安全性的更高级版本。如果您只是在学习 AJAX 的工作原理，那么您应该从这里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:16:54.463

您可以使用 AJAX 和 XMLHTTPRequest 的组合，但这些都受制于[同源策略](http://www.w3.org/Security/wiki/Same_Origin_Policy)。

当然，如果外部站点能够以[JavaScript Object Notation 格式 (JSON)](http://www.json.org/js.html)发回数据以提高可读性，这将变得容易得多。

这里有一个类似的问题询问如何使用 XMLHTTPRequest 获取外部站点的内容：[如何为 XMLHTTPRequest 指定外部网站](https://stackoverflow.com/questions/820905/how-to-specify-an-external-website-for-xmlhttprequest)

关于使用 XMLHTTPRequest 和 JSON 还有另一个类似的问题：[跨域 JSON 请求？](https://stackoverflow.com/questions/2055186/json-and-xmlhttprequest)

# java - ChartView 在 ViewPager/ScrollView 中被挤压/变形

> ID：15909037
> 
> 赞同：1
> 
> 时间：2013-04-09T17:51:38.053
> 
> 标签：java, achartengine

我的应用程序`Fragment`在一个`ViewPager`. 其中一个片段包含 a `ChartView`，当用户滑动以移动到相邻片段时，图表将被重新绘制和挤压，而不是像预期的那样保持原始宽度。这也发生在垂直的内部`ScrollView`。

下面是片段和刷卡时的片段的屏幕截图。

如果这有什么不同`ChartView`的话，它就在里面。`FrameLayout`的`FrameLayout`宽度设置为`fill_parent`。`FrameLayout`实际上是子类化，并以编程`ChartView`方式添加，如下所示：

```
public FrameLayoutSubclass(Context context, AttributeSet attributeSet)
{
    super(context, attributeSet);

    ...

    chartView = new GraphicalView(context, chart);
    addView(chartView);
} 
```

关于如何在图表滚动进出视图时将图表保持在原始尺寸的任何想法？

原图：

![原始图表](https://i.stack.imgur.com/qgPmY.png)

压缩图：

![压缩图表](https://i.stack.imgur.com/nUuLE.png)

**编辑**：丹的回答成功了：`renderer.setInScroll(true);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:32:00.827

一些值得尝试的想法：

*   `renderer.setInScroll(true);`设置渲染器时调用。
*   `chartView.repaint();`在 UI 重新绘制其他组件后调用。

# c++ - Qt -C++ 可搜索 DataTable 到 DataGrid 功能？

> ID：15909038
> 
> 赞同：1
> 
> 时间：2013-04-09T17:51:40.303
> 
> 标签：c++, qt

在 C# .net 中，您可以构建内存数据表并使用 LINQ 在其上运行类似 sql 的查询，然后在应用程序的 Datagrid 中显示结果。

在 QT C++ 中使用的等效工具是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:11:15.417

你可以看看[sqlite](https://stackoverflow.com/questions/1429782/qt-and-sqlite-examples)。

它不提供类似 LINQ 的语法，但它允许您将数据库保存在内存中。
您可以将您的演示者（例如 Datagrid）绑定到通过表/查询从该数据库提供的数据。

# c++ - 编译错误（g++ 和 make）

> ID：15909039
> 
> 赞同：0
> 
> 时间：2013-04-09T17:51:49.293
> 
> 标签：c++, g++, makefile

我试图将在 Visual Studio 2010 IDE 中编译的工作 C++ 库转换为可在任何标准编译器中编译的通用项目。自从我能够在 Ubuntu 12.10 下使用 Eclipse C++ IDE 进行编译以来，我显然在这个目标上取得了成功。

从那以后，我尝试在终端中使用 g++ 和 Makefile 进行编译。不幸的是，我没有遇到同样的成功。尽管我只收到以下错误，但我似乎非常接近良好的编译：

```
./liborbit.a(cOrbit.o): In function `Zeptomoby::OrbitTools::cEci::ScalePosVector(double)':
/home/tufts/Programs/workspace/orbitTools/Demo/../core/cEci.h:35: undefined reference to `Zeptomoby::OrbitTools::cVector::Mul(double)'
./liborbit.a(cOrbit.o): In function `Zeptomoby::OrbitTools::cEci::ScaleVelVector(double)':
/home/tufts/Programs/workspace/orbitTools/Demo/../core/cEci.h:36: undefined reference to `Zeptomoby::OrbitTools::cVector::Mul(double)'
./liborbit.a(cNoradBase.o): In function `Zeptomoby::OrbitTools::cNoradBase::FinalPosition(double, double, double, double, double, double, double, double)':
/home/tufts/Programs/workspace/orbitTools/Demo/../orbit/cNoradBase.cpp:265: undefined reference to `Zeptomoby::OrbitTools::cVector::Magnitude() const'
/home/tufts/Programs/workspace/orbitTools/Demo/../orbit/cNoradBase.cpp:285: undefined reference to `Zeptomoby::OrbitTools::cEciTime::cEciTime(Zeptomoby::OrbitTools::cVector const&, Zeptomoby::OrbitTools::cVector const&, Zeptomoby::OrbitTools::cJulian)'
collect2: ld returned 1 exit status
make: *** [compile] Error 1 
```

似乎库函数本身`orbit`使用库函数。`core`

# 文件系统组织：

```
orbitTools/
├── core
│   ├── cEci.cpp
│   ├── cEci.h
│   ├── cJulian.cpp
│   ├── cJulian.h
│   ├── coord.cpp
│   ├── coord.h
│   ├── coreLib.h
│   ├── cSite.cpp
│   ├── cSite.h
│   ├── cTle.cpp
│   ├── cTle.h
│   ├── cVector.cpp
│   ├── cVector.h
│   ├── exceptions.h
│   ├── globals.cpp
│   ├── globals.h
│   ├── stdafx.cpp
│   └── stdafx.h
├── Demo
│   ├── main.cpp
│   └── Makefile
└── orbit
    ├── cNoradBase.cpp
    ├── cNoradBase.h
    ├── cNoradSDP4.cpp
    ├── cNoradSDP4.h
    ├── cNoradSGP4.cpp
    ├── cNoradSGP4.h
    ├── cOrbit.cpp
    ├── cOrbit.h
    ├── stdafx.cpp
    └── stdafx.h 
```

注意`Makefile`.

# Makefile 本身是：

```
    # 编译器
    CC = g++

    # 包括文件目录
    主要 = $(PWD)/..
    编译 = $(主)/编译
    核心 = $(主)/核心
    轨道 = $(主)/轨道
    包括 = -I$（主）-I$（核心）-I$（轨道）-I。

    # 发展选项
    CFLAGS = -g -ansi

    编译：main.o 库
        $(CC) $(INCLUDE) $(CFLAGS) main.o -L。-lcore -lorbit -lm -o 演示

    主.o：
        $(CC) $(INCLUDE) $(CFLAGS) -c main.cpp

    # 核心库
    cEci.o:
        $(CC) $(INCLUDE) $(CFLAGS) -c $(CORE)/cEci.cpp

    cJulian.o:
        $(CC) $(INCLUDE) $(CFLAGS) -c $(CORE)/cJulian.cpp

    坐标.o：
        $(CC) $(INCLUDE) $(CFLAGS) -c $(CORE)/coord.cpp

    cSite.o：
        $(CC) $(INCLUDE) $(CFLAGS) -c $(CORE)/cSite.cpp

    cTle.o：
        $(CC) $(INCLUDE) $(CFLAGS) -c $(CORE)/cTle.cpp

    cVector.o：
        $(CC) $(INCLUDE) $(CFLAGS) -c $(CORE)/cVector.cpp

    全局变量.o：
        $(CC) $(INCLUDE) $(CFLAGS) -c $(CORE)/globals.cpp

    stdafx.o：
        $(CC) $(INCLUDE) $(CFLAGS) -c $(CORE)/stdafx.cpp

    核心：cEci.o cJulian.o coord.o cSite.o cTle.o cVector.o globals.o stdafx.o
        ar rcs libcore.a cEci.o cJulian.o coord.o cSite.o cTle.o cVector.o globals.o stdafx.o

    # 轨道图书馆
    cNoradBase.o：
        $(CC) $(INCLUDE) $(CFLAGS) -c $(ORBIT)/cNoradBase.cpp -lcore

    cNoradSDP4.o：
        $(CC) $(INCLUDE) $(CFLAGS) -c $(ORBIT)/cNoradSDP4.cpp -lcore

    cNoradSGP4.o：
        $(CC) $(INCLUDE) $(CFLAGS) -c $(ORBIT)/cNoradSGP4.cpp -lcore

    cOrbit.o：
        $(CC) $(INCLUDE) $(CFLAGS) -c $(ORBIT)/cOrbit.cpp -lcore

    轨道：cNoradBase.o cNoradSDP4.o cNoradSGP4.o cOrbit.o stdafx.o
        ar rcs liborbit.a cNoradBase.o cNoradSDP4.o cNoradSGP4.o cOrbit.o stdafx.o

    库：核心轨道

    干净的：
        rm *.o

    清除：
        rm *.a

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:08:37.923

如果`orbit`使用`core`，则`-lorbit` *必须*在*前面* `-lcore`。

如果`core`还使用`orbit`（循环依赖），那么你需要做类似的事情`-lorbit -lcore -lorbit`（列出其中一个两次）。

说明：

GNU 链接器（与大多数 UNIX 链接器一样）是“单通道链接器”。这意味着它从您的目标文件开始并记录任何未解析的符号。然后它查看链接行上的第一个库，并拉入任何可以满足一个或多个未解析符号的对象。同时，它会添加被它拉入的那些对象引用的任何新的未解析符号。然后它会转到链接行上的下一个库。等等。

如果它通过链接行上的所有库并且仍然存在未解析的符号，则链接失败。

因此，您需要订购您的库，以便不依赖任何其他内容的最基本的库位于*最后*。`g++`前端会自动在末尾添加C`-lc`运行时库——显然这是 MOST 基础库。除了基本库之外不依赖任何东西的库就在这些库之前。等等。

# jquery - Jquery 如何在可拖动对象上使用 .live

> ID：15909041
> 
> 赞同：7
> 
> 时间：2013-04-09T17:51:53.380
> 
> 标签：jquery

我正在使用 jquery ui 中的 dragabble 方法。如何在可拖动对象上应用 live()。

```
$("#image").draggable({ containment: [10, 150, 0, 0], scroll: false}); 
```

我试过的是这个

```
$("#image").live("draggable", function () {
.draggable({ containment: [10, 150, 0, 0], scroll: false}); 
```

但这不起作用。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T17:58:33.847

首先作为一个仅供参考，不推荐使用 live ，您应该使用 .on() 作为上述评论状态。

其次，您将无法在任何一种情况下执行您需要执行的操作，因为这些事件未包含在 on() 中。因此，我接近它的方法是在函数中执行事件附件：

```
function doDraggable() {
    $(".draggable").draggable({ containment: [0, finalHeight, 0, 0], scroll: false});
} 
```

然后在文档准备好以及 ajax 完成时初始化它：

```
$(document).ready(function () {
    doDraggable();
});
$(document).ajaxComplete(function () {
    doDraggable();
}); 
```

您可以比使用 ajaxComplete 事件的文档选择器更具体，这样它就不会为*每个*ajax 事件触发，但是您明白我的意思...

# jquery - 使用 Pagedlist 分页时在新页面中呈现部分视图

> ID：15909043
> 
> 赞同：1
> 
> 时间：2013-04-09T17:51:59.397
> 
> 标签：jquery, asp.net-mvc-3, pagedlist

在新页面上继续 [PartialView 渲染](https://stackoverflow.com/questions/15889007/partialview-rendering-on-new-page) 所以在修复上述问题后，我添加了分页。

我处理部分视图和分页的控制器方法是

```
public ActionResult CreateAdmin(string sortOrder, int? page)
    {
        int pageSize = 10;
        int pageNumber = 1;
        if (page != null)
            pageNumber = Convert.ToInt32(page);

        var result = SortResult(sortOrder);

        return PartialView("AdminSearchResult", result.ToPagedList(pageNumber, pageSize));
    } 
```

在我的部分观点中，我正在路过

```
@model PagedList.IPagedList<MyApplication.Models.Administration> 
```

用于动态渲染局部视图的 jquery 是

```
<script type="text/javascript">
$(document).ready(function (e) {
    $("#SearchResultbtn").click(function (e) {
        e.preventDefault();
        $("#searchResult").load('@Url.Action("AdminSearchResult", "Administration")');
    });
}); 
```

我的视图只是一个表格，如下所示

```
<table class="searchResult" border="1" width="100%">
    <thead>
        <tr>
            <th>
            </th>
            <th>
                @Html.ActionLink("Last Name", "AdminSearchResult", new { sortOrder = ViewBag.LastNameSortParm, currentFilter = ViewBag.CurrentFilter, @class = "linkClicked" })
            </th>
            <th>
                Middle Name
            </th>
            <th>
                @Html.ActionLink("First Name", "AdminSearchResult", new { sortOrder = ViewBag.FirstNameSortParm, currentFilter = ViewBag.CurrentFilter })
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr class="parent">                    
                <td>
                    @item.LastName
                </td>
                <td>
                    @item.MiddleName
                </td>
                <td>
                    @item.FirstName
                </td>
            </tr>
        }
    </tbody>        
</table> 
```

我的分页和排序工作正常。问题是，当我单击“名字”的 ActionLink 或任何听者对整个部分视图进行排序时，会在新页面中呈现。

我的猜测是 jquery 需要更新，但如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:08:36.110

从你提到的行为来看，我认为你只需要这样的东西：

```
@Ajax.ActionLink("First Name", "AdminSearchResult", new { sortOrder = ViewBag.FirstNameSortParm, currentFilter = ViewBag.CurrentFilter }, new AjaxOptions { UpdateTargetId = "searchResult" }, null) 
```

基本上是做页面的部分更新，而不是整页刷新？

要在 MVC 中成功使用 ajax 方法，您需要执行以下操作。将此键添加到 web.config 中的 appsettings：

```
 <appSettings>
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings> 
```

以及包含不显眼的 ajax 脚本：

```
<script src="/Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script> 
```

# apache - 设置本地虚拟机与实时服务器相同

> ID：15909045
> 
> 赞同：0
> 
> 时间：2013-04-09T17:52:02.063
> 
> 标签：apache, mod-rewrite, rewrite, vmware, relative-path

我曾经使用 XAMPP 进行本地开发，但现在切换到运行 Ubuntu 的 VMware 虚拟机进行本地开发。除了一件事之外，一切都已设置好并运行该站点的本地版本...... css/style.css.php 中有一个脚本，其中包含以下行，但需要根据它所在的服务器以不同方式编写上。

```
fopen("css/style.inc.css"); // Works on the live server

fopen("../css/style.inc.css"); // Works on the local server

fopen("/css/style.inc.css"); // DOES NOT work on either server 
```

实时机器和本地机器上的文件结构相同。
可能与该问题相关的是脚本不是直接请求的，而是在请求 /css/style.css 时通过 .htaccess 映射。.htaccess 文件看起来像这样

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} !=/favicon.ico
    RewriteRule ^(.*)$ rewrite.php?q=$1 [L,QSA]
</IfModule> 
```

rewrite.php 文件看起来像这样......

```
if($_GET["q"] == "css/style.css"){
    include("css/style.css.php");
} 
```

我如何开始诊断两台服务器上的哪些设置不同，以便我可以将它们设置为相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:56:46.403

第一个路径：`fopen("css/style.inc.css"); 建议您的 CSS 文件夹位于您的根目录中，如下所示：

```
-index.php //or whatever file has this line
-css
    -style.inc.css 
```

第二条路径建议以下结构

```
-css
    -style.inc.css
-some_web_folder
    -index.php 
```

创建相同的文件结构，一切都应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:35:00.963

解决了！首先，我偶然发现了这篇出色的文章[http://css-tricks.com/php-include-from-root/](http://css-tricks.com/php-include-from-root/)让我思考 $_SERVER['DOCUMENT_ROOT'] 的确切设置。所以我写了一个脚本，简单地将它打印到屏幕上，这帮助我诊断出我已经设置了我的本地虚拟机，地址末尾有一个斜杠。

```
/var/www/vhosts/example.com    <--- What the live site looked like
/var/www/vhosts/example.com/   <--- What the local site looked like 
```

所以我编辑了 /etc/apache2/sites-available/example.com 并从 DocumentRoot 中删除了斜线，然后重写了我的包含代码，如下所示：

```
$path = $_SERVER['DOCUMENT_ROOT'];
fopen($path.'/css/style.inc.css'); 
```

显然，这是未来更好的做法，所以我很高兴学到了一个新标准。

（我会因为回答自己的问题而获得徽章吗？*拍拍自己的背部*）

# html - 显示文本 svg 标签的问题

> ID：15909048
> 
> 赞同：0
> 
> 时间：2013-04-09T17:52:14.073
> 
> 标签：html, text, svg, tags

我对 SVG 文本标签有疑问。将坐标 x 设置为 20 并将坐标 y 设置为 80 的这个简单代码可以完美运行。

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
  <text id="test1" fill="red" x="20" y="80" font-size="30">my text</text>
</svg> 
```

当我将地图的实际值设置为 x 和 y 坐标（如`x=1156291`和）时，问题就来了`y=661770`。在这种情况下，我什么都看不到（并且我已经更新了视图框以适应新坐标）。

试图找出发生了什么，我在 SVG 插入 DOM 后使用 java scrip 检查了文本标签的 x 和 y 坐标，我发现两者都（神奇地）更改为`-214748.3648`.

有谁知道发生了什么，因为我快疯了……听起来好像有问题，因为 x 和 y 坐标太大，但我可以在我的地图中绘制一条具有该坐标的折线而`(1156291, 661770)`不会出现问题。

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T14:49:24.457

我在IE9下也有同样的问题，好像是IE9的bug。

例如，节点是 SVGTextElement：

```
var node = svgDocument.getElementById('oneidfortext');

node.setAttribute("x", 39400);
node.setAttribute("y", 394000); 
```

然后

```
var x = node.getAttribute("x");
var y = node.getAttribute("y");
//x here is going to be 39400
//y here is going to be -214748.3648 
```

我还没有找到解决方案。

# php - 在同一列上有 OR 时在 PHP/PDO 中设置命名绑定

> ID：15909055
> 
> 赞同：-1
> 
> 时间：2013-04-09T17:52:43.373
> 
> 标签：php, pdo, prepared-statement

我在我的 PHP 应用程序中使用 PDO 和准备好的语句。我将数组值绑定到查询中的占位符，如下所示：

```
// This method is called twice from somewhere in my app:
// setWhere ( 'col1', 50 );
// setWhere ( 'col2', 60 );

function setWhere ( $column, $value )
{
    $this->bindings[$column] = $value;
} 
```

然后我像这样执行我的查询：

```
// This query is constructed by the same class (sort of an ORM wrapper)
// $sql = "SELECT * FROM table WHERE col1 = :col1 OR col2 = :col2";
$stmt = $this->db->prepare ( $sql );
$stmt->execute ( $this->bindings ); 
```

它像这样工作得很好。但是当我需要`OR`在同一列上选择时我该怎么办？然后我基本上会在已经存在的数组中设置一个索引：

```
setWhere ( 'col1', 50 );
setWhere ( 'col1', 60 ); 
```

这基本上设置了`col1`两次索引：

```
$this->bindings['col1'] = 50;
$this->bindings['col1'] = 60; 
```

在这种情况下，它永远不会起作用。

我怎样才能避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:59:06.710

您的查询中不能有两个名称相同的参数。

查询和数据库表列中的参数名称不需要命名相同。PDO 只是简单地替换为参数值处理，它不会像任何 ORM 那样为您构建 SQL 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:53:48.960

呃……只是换个名字而已。据我所知，您正在使用绑定变量静态编写查询，而不是动态构建查询本身，因此：

```
$sql = "SELECT * FROM table WHERE col1 = :val1 OR col1 = :val2";
setWhere ( 'val1', 50 );
setWhere ( 'val2', 60 );
$stmt = $this->db->prepare ( $sql );
$stmt->execute ( $this->bindings ); 
```

如果您*正在*动态构建查询，则需要为您的条件存储 3 个值：

1.  列名，不必是唯一的。
2.  参数名称，必须是唯一的。
3.  您要绑定的值。

就像是：

```
function setWhere( $col, $param, $value ) {
  if( isset($this->bindings[$param]) ) {
    throw new Exception("Cannot double-bind parameter $param");
  }
  $this->bindings[$param] = array('col' => $col, 'val' => $value);
}

//function for $stmt->execute ( $this->getBindings );
function getBindings( ) {
  $ret = array();
  foreach($this->bindings as $key => $val) {
    $ret[$key] = $val['val'];
  }
  return $ret;
} 
```

# android - 具有多个构造函数/没有构造函数的异步任务

> ID：15909057
> 
> 赞同：0
> 
> 时间：2013-04-09T17:52:52.030
> 
> 标签：android, constructor, android-asynctask

我不能将多个构造函数与 asynctask 一起使用。我需要分别使用 FetchTask(category) 和 FetchTask(textview)。[ NOT FetchTask(category,textview) ]

是否可以使用多个构造函数？或者我可以为 asynctask 使用不同的构造函数/方法吗？

```
public class FetchTask extends AsyncTask<String, Void, String> {

    TextView Txt;
    private Category category;

    public FetchTask (final Category cat) {    
        this.category = cat;
    }

    public FetchTask(TextView outputTxt) {
        super();
        Txt = outputTxt;
    }

    @Override
    protected String doInBackground(String... str) {
        String Str = str[0];       
        return Str;
    }

    @Override
    protected void onPostExecute(String result) {
        Txt.setText(result);        
    }
} 
```

**致命异常：AsyncTask #2**

**java.lang.RuntimeException：执行 doInBackground() 时发生错误**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:04:11.013

您可以使用多个构造函数。这段代码编译很有趣，还有其他问题，但这与主题无关。

希望这会有所帮助，亚龙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:34:06.217

您可以使用多个构造函数。查看您的代码：

```
public FetchTask (final Category cat) {    
    this.category = cat;
} 
```

如果您使用上述构造函数启动`AsyncTask`，则会出现错误。看

```
 @Override
protected void onPostExecute(String result) {
    Txt.setText(result);        
} 
```

您没有`Txt`使用第一个构造函数进行初始化。而且我认为您无需`super();`从构造函数中调用。

# ios - 遍历带有子对象的 NSDictionary

> ID：15909059
> 
> 赞同：0
> 
> 时间：2013-04-09T17:52:54.043
> 
> 标签：ios, objective-c, nsdictionary

我有一个采用 NSDictionary 的方法：

```
-(id)initWithJSONDictionary:(NSDictionary *)dataDictionary{
     self = [super init];
     NSLog(@"********************************* %@ ",dataDictionary);
     for(NSString * key in dataDictionary){
         if([key isEqualToString:@"filters"]){
             NSDictionary * filtersSubDict = [dataDictionary objectForKey:key];
             for(NSString *sfKey in filtersSubDict){
                 NSLog(@"new filter: %@", sfKey );               
                 NSDictionary *filterObject = [filtersSubDict objectForKey:sfKey];
                 // this line is throwing some kind of thread exception
             }
          }
      }
      return self;
} 
```

关于为什么带有注释的行抛出异常的任何线索：**首先抛出调用堆栈：

```
(0x1d04012 0x1141e7e 0x1d8f4bd 0x1cf3bbc 0x1cf394e 0x1052b 0x137fe 0x259b3 0x4a6853f 0x4a7a014 0x4a6a7d5 0x1caaaf5 0x1ca9f44 0x1ca9e1b 0x1c5e7e3 0x1c5e668 0x85ffc 0x27fd 0x2725)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

显示整个 NSDictionary 的第一个 NSLog 显示了这一点：

```
{
    errorCode = 0;
    filters =     (
                {
            id = 1001;
            name = "Base Lenses";
            sequence = 1;
        },
                {
            id = 1002;
            name = "Standard Anti-Reflective";
            sequence = 2;
        },
                {
            id = 1003;
            name = "Premium Anti-Reflective";
            sequence = 3;
        },
                {
            id = 1004;
            name = "Enhanced Scratch Resistance";
            sequence = 4;
        },
                {
            id = 1005;
            name = Sun;
            sequence = 5;
        },
                {
            id = 1006;
            name = Tint;
            sequence = 6;
        },
                {
            id = 1007;
            name = "Clear To Dark";
            sequence = 7;
        }
    );
    lenses =     {
        Glass =         (
                        {
                fsv = 1;
                inStore = 1;
                lom = 0;
                price = 465;
                style = "Glass Std AR";
                styleFilters =                 (
                    1002
                );
                type = "Single Vision";
                visionCorrection = singleVision;
            },
                        {
                fsv = 1;
                inStore = 0;
                lom = 1;
                price = 395;
                style = "Prem Plastic Std AR";
                styleFilters =                 (
                    1002
                );
                type = "SV HD";
                visionCorrection = singleVision;
            }
        );
        "Plastic/Hi-index" =         (
                        {
                fsv = 1;
                inStore = 1;
                lom = 0;
                price = 395;
                style = "Prem Plastic Std AR";
                styleFilters =                 (
                    1002,
                    1006
                );
                type = "SV HD";
                visionCorrection = singleVision;
            },
                        {
                fsv = 1;
                inStore = 0;
                lom = 1;
                price = 465;
                style = "Glass Std AR";
                styleFilters =                 (
                    1002,
                    1006
                );
                type = "SV HD";
                visionCorrection = singleVision;
            }
        );
        Polycarbonate =         (
                        {
                fsv = 1;
                inStore = 1;
                lom = 0;
                price = 395;
                style = "FeatherWates Classic";
                styleFilters =                 (
                    1001
                );
                type = "SV Wrap";
                visionCorrection = singleVision;
            },
                        {
                fsv = 1;
                inStore = 0;
                lom = 1;
                price = 495;
                style = "FeatherWates Classic";
                styleFilters =                 (
                    1001
                );
                type = "SV Wrap";
                visionCorrection = singleVision;
            }
        );
    };
    materials =     (
        Polycarbonate,
        "Plastic/Hi-index",
        Glass
    );
} 
```

我正在尝试为“过滤器”中的每个节点创建一个新对象，以获取 id、名称和序列值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T18:04:48.930

在没有看到您的`NSLog`语句在说什么或不知道您的异常实际上是什么的情况下，这里所有*可能*在您的代码中引发异常的事情：

```
for(NSString *key in dataDictionary) { 
```

如果`dataDictionary`它实际上不是一个`NSDictionary`, 而是其他一些非`<NSFastEnumeration>`JSON 对象，比如一个`NSString`,`NSNumber`等，则这条线可能会抛出。

```
 if([key isEqualToString:@"filters"]){ 
```

`key`如果实际上不是 an`NSString`并因此没有实现 method ，则此行可能会抛出`-isEqualToString:`。

```
 NSDictionary *filtersSubDict = [dataDictionary objectForKey:key]; 
```

如果`dataDictionary`是一个可快速枚举的 JSON 对象，但实际上不是一个`NSDictionary`. （换句话说，它可能是一个`NSArray`，并且这一行会抛出一个“不识别选择器'objectForKey：'”异常）。

```
 for (NSString *sfKey in filtersSubDict) { 
```

像上面一样，这可能会抛出 if `filtersSubDict`is not an`NSArray`或 an `NSDictionary`。

```
 NSLog(@"new filter: %@", sfKey );
            NSDictionary *filterObject = [filtersSubDict objectForKey:sfKey]; 
```

这可能会抛出 if `filtersSubDict`is not an `NSDictionary`but is an `NSArray`（同上）。

```
 }
    }
} 
```

因此，如果它在线上抛出`filterObject = ...`，那么很可能这`filtersSubDict`实际上不是字典，并且您会得到一个无法识别的选择器异常。

# ruby-on-rails - 当我执行 redirect_to :back 时，如何使变量在视图中可用？

> ID：15909060
> 
> 赞同：0
> 
> 时间：2013-04-09T17:52:54.433
> 
> 标签：ruby-on-rails, redirect, controller

我可以`@variable`在一个常规的控制器动作中做一个，它会在视图中可用。但是当我这样做时`redirect_to :back`，变量不再可用。我如何传递它们，以便它们可以显示在视图中？

**更多信息**：用户在表单中提交某些内容（来自“显示”页面），然后将其传递给“提交”操作。文本被处理为结果。然后我想将两个文本返回到原始页面 - 提交本身和结果。

控制器：

```
def show     
//show submission and results if they exist
end

def submit
//do stuff with submission and return submission and results back
redirect_to :back
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:00:44.013

因此，如果您只想要一个值，您可以执行以下操作：

```
session[:name] = @variable.name 
```

如果您以后想要整个对象，您可以执行以下操作：

```
session[:variable_id] = @variable.id 
```

然后

```
@variable = Variable.find(session[:variable_id]) 
```

干杯!

# asp.net-mvc - 需要未实现的接口作为业务层的参数？

> ID：15909061
> 
> 赞同：1
> 
> 时间：2013-04-09T17:52:54.450
> 
> 标签：asp.net-mvc, architecture, interface, refactoring, viewmodel

**要求消费者实现一个接口只是为了传递参数是不是很糟糕？**

* * *

只是为了帮助形象化，我的具体情况是一个 ASP.NET C# MVC 网站，其汇编内容如下：

```
MyWebAssembly.Web
    Controllers
MyWebAssembly.Models
    PurchaseViewModel : IBillingAddress
        SubscribeViewModel : PurchaseViewModel
        AddCreditsViewModel : PurchaseViewModel
MyWebAssembly.BLL
    IBillingAddress
    BeginPurchase(IBillingAddress, etc.)
MyWebAssembly.Data
    Models 
```

我有大约 100 个与我的业务逻辑紧密耦合的 ViewModel。我已经将这些提取到接口（如上所示）以避免向自动映射添加另一层相同的模型，现在我终于将我的业务层与网站分离了。

我想这是这个过程中很好的第一步。这使我能够将业务逻辑移出程序集，但我觉得很脏，就像我所做的只是随机播放代码一样。并非我的所有 ViewModel 都是这样耦合的，但 IBillingAddress 只是多个示例之一。

**你认为要求消费者实现接口只是为了传递参数是不好的形式吗？**当我这样做时，我觉得我回到了 Win32 API 时代。我应该再向我的业务方法传递 10 个标准类型参数吗？我忽略的架构是否有一些明显的支点？

* * *

编辑：

我还在考虑这个。也许这个例子让我感到困惑的原因之一是因为 BillingAddress 似乎是一个相对固定的依赖接口。将其公开并将其构建到 ViewModel 中更有意义。我想如果它是一个潜在的移动目标（例如 ICustomer），映射交互会更有意义。仍然需要您的建议。

# python - 停止和等待算法的 Python 实现

> ID：15909064
> 
> 赞同：6
> 
> 时间：2013-04-09T17:53:00.590
> 
> 标签：python, for-loop, implementation, wait

我正在尝试实现停止和等待算法。我在发件人处实施超时时遇到问题。在等待接收者的 ACK 时，我正在使用 recvfrom() 函数。但是，这会使程序空闲，我无法按照超时重新传输。

**这是我的代码：**

```
import socket

import time

mysocket=socket.socket(socket.AF_INET,socket.SOCK_DGRAM)

while True:

   ACK= " "

    userIn=raw_input()
    if not userIn : break
    mysocket.sendto(userIn, ('127.0.0.01', 88))     
    ACK, address = mysocket.recvfrom(1024)    #the prog. is idle waiting for ACK
    future=time.time()+0.5   
    while True:
            if time.time() > future:
                    mysocket.sendto(userIn, ('127.0.0.01', 88))
                    future=time.time()+0.5
            if (ACK!=" "):
                    print ACK
                    break 
mysocket.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:15:11.333

套接字默认阻塞。使用套接字函数 setblocking() 或 settimeout() 来控制此行为。

如果你想做你自己的时间。

```
mysocket.setblocking(0)
ACK, address = mysocket.recvfrom(1024) 
```

但我会做类似的事情

```
import socket

mysocket = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
mysocket.settimeout(0.5)
dest = ('127.0.0.01', 88)

user_input = raw_input()

while user_input:
    mysocket.sendto(user_input, dest)     
    acknowledged = False
    # spam dest until they acknowledge me (sounds like my kids)
    while not acknowledged:
        try:
            ACK, address = mysocket.recvfrom(1024)
            acknowledged = True
        except socket.timeout:
            mysocket.sendto(user_input, dest)
    print ACK
    user_input = raw_input()

mysocket.close() 
```

# big-o - 对数与幂的渐近复杂度

> ID：15909068
> 
> 赞同：1
> 
> 时间：2013-04-09T17:53:14.893
> 
> 标签：big-o, logarithm, asymptotic-complexity

嘿伙计们，我正在从 Dasgupta 的算法书中解决一些大问题，并且被困在一些问题上。

1) f(n) = n^0.1 g(n) = (log n)^10

根据对[数和幂的渐近复杂性](https://stackoverflow.com/questions/7882915/asymptotic-complexity-of-logarithms-and-powers)的最佳答案，“对于任何正常数 a，b，log(n)^a 始终为 O(n^b)。” 所以对于 1)，f = omega(g)

2) f(n) = n^1.01 g(n) = n log^2 n 我的猜测是 f = omega(g)。这个例子是正确的还是不同的情况，因为 log 是平方并乘以 n？

请提供有关您为解决此类问题所采取的步骤的任何说明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T17:38:07.840

您对第一个问题的回答是正确的，您对该规则的应用也是如此。这是任何 a > 0 的 log(n) = O(n^a) 的证明（这显然等同于上述规则）：

```
The derivative of n^a is a*(n^(a-1))
The derivative of log(n) = 1/n
Therefore, for large enough n, the derivative of n^a is more than the derivative of log(n)
Therefore, for large enough n, n^a > log(n)
Therefore log(n) = O(n^a) 
```

你对第二个问题的回答是正确的。这是一个证明：

```
g(n) = O(f(n)) if and only if log(log(n)) = O(n^0.01)
log(log(n)) = O(log(n)) so log(log(n)) = O(O(n^0.01)) = O(n^0.01) 
```

# php - Opencart中的最小订单量

> ID：15909070
> 
> 赞同：0
> 
> 时间：2013-04-09T17:53:20.483
> 
> 标签：php, opencart, currency, checkout

我使用 Opencart 1.5.5.1，但我遇到了问题。我想要在我的商店中的最低订单量。但我使用两种货币（欧元和罗朗）。好吧，我添加的脚本效果很好，但是当我从 EUR 切换到 RON 时，脚本并没有改变。

前任。欧元的最低订购量为 230，RON 为 1000。当我订购 250E 左右的产品时，该消息不会出现。但我的结帐必须以 RON 货币重定向。($this->currency->set('RON');) 消息出现。“您必须订购 > 1000 RON”但从 EUR 到 RON 的转换等于或更大。

这是我的代码来理解它：

```
<?php if($this->session->data['currency'] == 'EUR') : ?>
   <?php if($this->cart->getSubtotal() < 230) : ?>
   <div class="warning"><center><?php echo $text_comandamin_eur; ?></center></div>
   <?php endif; ?>
<?php } elseif($this->session->data['currency'] == 'RON') : ?>
   <?php if($this->cart->getSubtotal() < 1000) : ?>
   <div class="warning"><center><?php echo $text_comandamin_ron; ?></center></div>
   <?php endif; ?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:09:36.097

尝试这个...

```
<?php if($this->session->data['currency'] == 'EUR') : ?>
    <?php if($this->cart->getSubtotal() < 230) : ?>
    <div class="warning"><center><?php echo $text_comandamin_eur; ?></center></div>
    <?php endif; ?>
<?php } elseif($this->session->data['currency'] == 'RON') : ?>
    <?php if($this->cart->getSubtotal() < 1000) : ?>
    <div class="warning"><center><?php echo $text_comandamin_ron; ?></center></div>
    <?php endif; ?>
<?php endif; ?> 
```

使用 less 更容易阅读，因为您没有空的 if 语句。

# grails - Grails/Gorm - 将域对象与自身关联 1:M

> ID：15909076
> 
> 赞同：2
> 
> 时间：2013-04-09T17:53:31.993
> 
> 标签：grails, grails-orm

我有一个遗留数据库，用于在 grails 2.2.1 应用程序中映射域对象。

我正在使用的表包含 FK 关系返回到它自己的孩子。幸运的是，我知道我只需要在层次结构中深入一层。

```
T_FOO
----------------------
I                 LONG
CHILD_FOO         LONG 
```

这是可能的结果集：

```
I  CHILD_FOO
-  ---------
1  NULL
2  NULL
3  1
4  1
5  2 
```

我的域对象如下所示：

```
class Foo {
    long instanceId
    static hasMany = [childFoos: Foo]

    static mapping {
        table 'T_FOO'
        id generator: 'assigned', name: 'instanceId', column: 'I', type: 'long'
        version false
        autoTimestamp false
        instanceId column: 'I'

        // I tried joining the table to itself and it didn't work
        childFoos joinTable [name: 'T_FOO', key: 'CHILD_FOO', column: 'I'
    }
} 
```

查询不起作用。Hibernate 将一个 t0.class 放入选择列表中，但它失败了。

有什么建议吗？

问候， 罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:52:51.410

这很混乱，但我最终通过创建另一个包含对原始类的引用的域类来解决这个问题。我想找到一种更好的方法，但这暂时可行。

我正在测试的数据库表：

```
mysql> desc t_foo;
+-------------+-------------+------+-----+---------+-------+
| Field       | Type        | Null | Key | Default | Extra |
+-------------+-------------+------+-----+---------+-------+
| I           | bigint(20)  | NO   | PRI | NULL    |       |
| Description | varchar(45) | YES  |     | NULL    |       |
| I_CHILDFOO  | bigint(20)  | YES  |     | NULL    |       |
+-------------+-------------+------+-----+---------+-------+

mysql> select * from t_foo;
+---+--------------+------------+
| I | Description  | I_CHILDFOO |
+---+--------------+------------+
| 1 | Parent 1     |       NULL |
| 2 | Parent 2     |       NULL |
| 3 | Child 1 of 1 |          1 |
| 4 | Child 1 of 1 |          1 |
| 5 | Child 1 of 2 |          2 |
+---+--------------+------------+ 
```

我的课程如下所示：

```
package db.legacy

class Foo {

    long instanceId
    String info

    static hasMany = [ kids: ChildFoo ]

    static constraints = {
    }

    static mapping = {
        table 'T_FOO'
        id generator: 'assigned', name: 'instanceId', column: 'I', type: 'long'
        version false
        autoTimestamp false
        instanceId column: 'I'
        info column: 'Description'
        kids column: 'I_CHILDFOO'
    }
}

class ChildFoo {

    long instanceId
    Foo parentFoo

    static mapping = {
        table 'T_FOO'
        id generator: 'assigned', name: 'instanceId', column: 'I', type: 'long'
        version false
        autoTimestamp false
        instanceId column: 'I'
        parentFoo column: 'I_CHILDFOO'
    }
} 
```

当我进行以下测试时，效果很好：

```
def foo = db.legacy.Foo.get(1)
foo.kids.each { bar -> 
    assert bar.parentFoo.instanceId == foo.instanceId
} 
```

这似乎是一个草率 / hacky 的解决方案。如果有人有任何想法或想法，我很想听听他们的意见。

谢谢

# ios - iOS - 跟踪我的安装来自哪些广告系列

> ID：15909077
> 
> 赞同：8
> 
> 时间：2013-04-09T17:53:34.420
> 
> 标签：ios, app-store

我在应用商店有一个 iOS 应用程序，并且正在运行一些广告活动（Google Adwords、FB Ads 等）。我怎么知道我的安装来自哪里？

我有一个等效的 Android 应用程序，Google Play 允许我将 ?ref 参数附加到 PlayStore URL，然后我可以使用应用程序中的广播接收器检索该参数。我可以附加诸如活动详细信息、点击时间等信息。

如何使用 Apple AppStore？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:58:42.277

你不能直接做。相反，通过您自己的网络服务器上的页面引导广告点击，该页面记录您的分析，然后立即重定向到应用商店 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T20:19:55.987

我一直在寻找同样的东西。我遇到了 Quora 的这个问题，它有很多答案。他们都声称提供了用户是否安装了该应用程序的答案。 [http://www.quora.com/How-can-you-track-referrals-that-go-through-the-Apple-App-Store](http://www.quora.com/How-can-you-track-referrals-that-go-through-the-Apple-App-Store)

# applescript - 通过 AppleScript 的 AirPlay 扬声器

> ID：15909078
> 
> 赞同：0
> 
> 时间：2013-04-09T17:53:38.637
> 
> 标签：applescript, itunes, airplay

我已经部分成功地让 Indigo 在 iTunes 11 中打开 Airplay 设备，但我需要一些帮助。我可以选择并打开一个扬声器，但我真的希望能够选择多个按钮，然后打开所有或部分扬声器。这是我所拥有的：

```
tell application "iTunes" to activate
tell application "System Events"
   tell window "iTunes" of process "iTunes"
      click (first UI element whose help is "Choose which speakers to use.")
      keystroke "Master Bedroom" & return
      --perform action "press" in radio button "Multiple" of window "iTunes"--
   end tell
end tell 
```

因此，该代码将其打开并突出显示 Master Bedroom 行，但它实际上并没有选中复选框，我玩弄了注释掉的行，但无法让它工作。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-26T20:42:54.817

Airplay 设备现在是一个可编写脚本的对象 - 不需要 UI 技巧。

例如

告诉应用程序“iTunes”获取 AirPlay 设备的名称

告诉应用程序“iTunes”将选择的 AirPlay 设备“主卧室”设置为 true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T01:22:46.913

这对我有用：

```
tell application "iTunes" to activate
tell application "System Events"
    tell window "iTunes" of process "iTunes"
        click (first UI element whose help is "Choose which speakers to use.")
        keystroke "Kitchen" & return
        delay 1
        key code 76
    end tell
end tell 
```

自从11问世以来，我一直在为此苦苦挣扎。键码 76 是回车键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:26:19.943

我现在没有 iTunes，但是选择带有系统事件的复选框的语法应该是`click checkbox "Multiple"`

# php - 查询仅显示具有值的列名

> ID：15909082
> 
> 赞同：-2
> 
> 时间：2013-04-09T17:53:45.453
> 
> 标签：php, sql, database, fetch

我正在开发一个过滤系统，它只会显示符合特定条件的结果。

用户制作他们的“过滤器”，将偏好添加到过滤器表中。列名是条件。

我想显示一个表，其中表头列仅显示与条件“on”匹配的列，并且当 off 为空时。

```
function get_filter_columns($filter_id) {

    $result = mysql_query('SELECT * FROM filters WHERE id="$filter_id"') or die(mysql_error());

    echo '<thead>
          <tr>';

         // echo mysql_fetch_array($result);

         echo count($result, COUNT_RECURSIVE); 

    while($row = mysql_fetch_array( $result )) {
        $counter++;

        echo '<th>'.$row['total'].'</th>';

        echo mysql_field_name($result, $counter);

    }

    echo '</tr>
          </thead>';        

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:01:10.013

换线

```
$result = mysql_query('SELECT * FROM filters WHERE id="$filter_id"') or die(mysql_error()); 
```

至

```
$result = mysql_query("SELECT * FROM filters WHERE id='".$filter_id."'") or die(mysql_error()); 
```

# php - 使用 PHP 进行 PayPal 相关编程，并参考定期（订阅）付款

> ID：15909084
> 
> 赞同：1
> 
> 时间：2013-04-09T17:53:52.383
> 
> 标签：php, paypal

在正常的 PayPal 流程中，对于一次性付款，首先我们尝试授权付款请求，然后下一步是完成授权请求。

根据 PayPal 文档，对于经常性（订阅）付款，文档提到首先我们必须像往常一样授权，然后我们必须设置订阅协议。

这些是我的问题——如果你能指出相关的 API（如果适用），那将是很好的（对于第 3 点和第 4 点，尤其是。）

1.  在正常流程中，所购买商品的详细信息与授权请求一起发送——我是否也为订阅做同样的事情？
2.  在初始授权（即第一步-->授权，第二步-->完成授权）完成后，我是否将用户发送到订阅协议请求？还是我这样做来代替第二步（即代替“完全授权”）？
3.  我可以修改现有的订阅协议——无论是在更改金额方面，还是在更改该订阅协议的描述方面？
4.  我可以只更改现有订阅中下一个经常性金额的描述吗？

# javascript - Typescript cordova 接口抛出参考错误“ReferenceError: Cordova is not defined”

> ID：15909085
> 
> 赞同：0
> 
> 时间：2013-04-09T17:53:57.333
> 
> 标签：javascript, mapping, typescript

我有一个非常简单的 d.ts 映射，如下所示：

```
interface CordovaClass {
    exec(success:Function, error:Function, ...rest:any[]);
}

declare var Cordova:CordovaClass; 
```

我后来在 NativeCordova.ts 中引用了它：

```
/// <reference path="../lib/cordova.d.ts" /> 
```

但是，当我在同一个文件中调用以下内容时：

```
Cordova.exec(success, error, tag, command, params); 
```

浏览器抛出此错误：

```
Uncaught ReferenceError: Cordova is not defined 
```

映射相当新，但从我可以从其他映射（如 jquery.d.ts）中得知，这应该可以工作。

任何帮助将不胜感激。:)

**更新**

我可以通过用小写的“C”声明 var 来完成这项工作：

```
declare var cordova:CordovaClass; 
```

然后这样称呼它：

```
cordova.exec(success, error, tag, command, params); 
```

这是因为这是 cordova 用来引用自身的变量，就像 jQuery d.ts 所做的那样。

*exec 不是您可以使用 Cordova 进行的真正调用，但这不是我遇到的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:30:20.560

TypeScript 定义文件只是告诉编译器应该已经存在什么。在运行时，您需要通过主机存在的任何脚本加载机制（例如，在浏览器中、`<script>`标签中）来呈现 Cordova 实现。

# java - 使用 Character 与 char 数组进行初始化

> ID：15909089
> 
> 赞同：8
> 
> 时间：2013-04-09T17:54:20.033
> 
> 标签：java, autoboxing

这打印**错误**

```
List vowelsList=Arrays.asList(new char[]{'a','e','i','o','u'});
System.out.println(vowelsList.contains('a'));//false 
```

这打印**真实**

```
List vowelsList=Arrays.asList(new Character[]{'a','e','i','o','u'});
System.out.println(vowelsList.contains('a'));//true 
```

`char`是`Character`我在 char 数组初始化程序中使用的自动装箱。为什么我得到不同的结果！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T17:55:44.497

也打印

`vowelsList.size();`

两者都有，你会看到区别;）

**剧透：**

第一种方法的通用类型是`char[]`，因此您将获得一个大小为 1 的列表。它的类型是`List<char[]>`. 您的第二个代码的通用类型是`Character`，因此您的列表将包含与数组一样多的条目。类型是`List<Character>`。

* * *

为了避免这种错误，不要使用原始类型！以下代码**将无法编译**：

```
List<Character> vowelsList = Arrays.asList(new char[]{'a','e','i','o','u'}); 
```

以下三行很好：

```
List<char[]> list1 = Arrays.asList(new char[]{'a','e','i','o','u'}); // size 1
List<Character> list2 = Arrays.asList(new Character[]{'a','e','i','o','u'}); // size 5
List<Character> list3 = Arrays.asList('a','e','i','o','u'); // size 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:59:31.790

正如@jlordo (+1) 所说，您的错误在于理解您的列表包含什么。在第一种情况下，它包含一个 type 元素`char[]`，因此它不包含`char`element `a`。在第二种情况下，它包含 5 个`Character`元素 'a','e','i','o','u'，所以结果是`true`.

# python - 为 Python GUI 应用程序选择 Youtube API v3 和 v2

> ID：15909094
> 
> 赞同：1
> 
> 时间：2013-04-09T17:54:53.117
> 
> 标签：python, youtube-api

我正在考虑编写一个 Python GUI 应用程序来使用 Youtube API。这个应用程序打算收集元数据并以各种方法将结果可视化，但是我不确定要使用哪个 API。V2 有大量在线文档并使用 XML，而 V3 仍处于试验阶段并使用 JSON。V2 的代码示例可以移植到 V3 吗？

链接：[Python - v2 文档](https://developers.google.com/youtube/1.0/developers_guide_python)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T20:34:21.710

YouTube v3 未标记为实验性。可以[在此处找到](https://developers.google.com/youtube/v3/code_samples/python)代码示例。

您的链接指向 1.0 文档。1.0 已被弃用。

# doctrine-orm - Silex 和学说 ORM

> ID：15909096
> 
> 赞同：9
> 
> 时间：2013-04-09T17:55:01.413
> 
> 标签：doctrine-orm, silex

我正在尝试将 Silex 与 Doctrine ORM（不仅仅是 DBAL）一起使用，但我无法正确配置。

作曲家.json

```
{
  "require": {
    "silex/silex": "1.0.*@dev",
    "symfony/monolog-bridge": "~2.1",
    "symfony/twig-bridge": "~2.1",
    "symfony/form": "~2.1",
    "symfony/yaml": "2.2.*",
    "symfony/form": "2.2.*",
    "symfony/translation": "~2.1",
    "symfony/config": "2.2.*",
    "dflydev/doctrine-orm-service-provider": "1.0.*@dev"
  },
  "autoload": {
    "psr-0": {
      "Entities": "src/"
    }  
  }
} 
```

bootstrap.php 位于我的项目根文件夹中

```
use Doctrine\ORM\Tools\Setup;
use Doctrine\ORM\EntityManager;

require_once __DIR__ ."/vendor/autoload.php";

$isDevMode = true;
$config = Setup::createAnnotationMetadataConfiguration(array(__DIR__."/src/Entities"), $isDevMode);

$params = array(
    'driver' => 'pdo_sqlite',
    'path' => __DIR__ . '/development.sqlite',
);

$entityManager = EntityManager::create($params, $config); 
```

cli-config.php 也位于根文件夹内

```
require_once "bootstrap.php";

$helperSet = new \Symfony\Component\Console\Helper\HelperSet(array(
    'db' => new \Doctrine\DBAL\Tools\Console\Helper\ConnectionHelper($entityManager->getConnection()),
    'em' => new \Doctrine\ORM\Tools\Console\Helper\EntityManagerHelper($entityManager)
)); 
```

位于 src/Entities 中的 Customer.php 实体

```
/**
 * @Entity @Table(name="customers")
 **/
class Customer {
    /** @Id @Column(type="integer") @GeneratedValue **/
    protected $id;
    /** @Column(type="string") **/
    protected $name;

    public function getName() {
        return $this->name;
    }

    public function setName($name) {
        $this->name = $name;
    }

    public function getId() {
        return $this->id;
    }
} 
```

我能够运行类似的命令`php vendor/bin/doctrine orm:schema-tool:create`并让它生成一个名为 custom 的表，就像它应该的那样。但是如何在我的 Silex 应用程序中加载该实体

这是我的 index.php

```
require_once __DIR__.'/../vendor/autoload.php';

$app = new Silex\Application();

use Symfony\Component\Yaml\Yaml;
$app['config'] = function () {
    $config = Yaml::parse(__DIR__ .'/../config.yml');

    return $config;
};

$app->register(new Silex\Provider\DoctrineServiceProvider(), array(
    'dns.options' => $app['config']['database']['development']
));
$app->register(new Dflydev\Silex\Provider\DoctrineOrm\DoctrineOrmServiceProvider, array(
    'orm.em.options' => array(
        'mappings' => array(
            array(
                'type' => 'annotation',
                'path' => __DIR__ .'/src/Entities',
            )
        )
    ),
));
$app->get('/', function () use ($app) {
    $customer = $app['orm.em']->getRepository('Customer');

return '<pre>'. $customer->getName() .'</pre>';
}); 
```

在我的浏览器中加载本地主机时的结果

```
Warning: class_parents() [function.class-parents]: Class Customer does not exist and could not be loaded in /Users/me/Documents/project/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/RuntimeReflectionService.php on line 40 
```

**更新** 我不确定这是解决此问题的正确方法，但通过使用以下方法问题得到解决，我现在可以在 Silex 中使用我的实体

```
$app['em'] = function ($app) {
    $config = Setup::createAnnotationMetadataConfiguration(array(__DIR__."/src/Entities"), true);
    $params = array(
        'driver' => 'pdo_sqlite',
      'path' => __DIR__ . '/../development.sqlite',
    );
    $entityManager = EntityManager::create($params, $config);

    return $entityManager;
}; 
```

我使用了依赖方法，因为这样我可以使用 $app['config'] 来存储数据库信息和其他特定于环境的配置。

```
$customer = new \Entities\Customer();
$customer->setName('Multi Corp '. uniqid());

$app['em']->persist($customer);
$app['em']->flush(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T12:52:13.900

我假设您的学说实体映射位于 namespace 中的“/src/Entities”下`\Entities`。使用您的自动加载器指令，它们应该可以作为`\Entities\MyMappingCls`.

您的问题似乎是您在获取存储库时没有提供映射类的 fq-name。您需要提供一个可由自动加载器解析的字符串。请试试：

```
$app['orm.em']->getRepository('Entities\Customer'); 
```

您也可以尝试运行`orm:generate-proxies`它们，因为它们仅在调试模式下动态生成（不太确定这是否相关）。

hth

# codeigniter - ci_merchant paypal 购买它可以工作，但钱没有到 paypal 帐户

> ID：15909100
> 
> 赞同：0
> 
> 时间：2013-04-09T17:55:19.197
> 
> 标签：codeigniter, paypal, ci-merchant

ci_merchant paypal 购买它可以工作，但钱没有到 paypal 帐户

```
 $this->load->library('merchant');
      $this->merchant->load('paypal_express');

      $settings = array(
    'username' => '***************************',
    'password' => '****************************',
    'signature' => '***************************',
    'test_mode' => true);

  $this->merchant->initialize($settings);

     $params = array(
               'amount' => 100.00,
                'currency' => 'USD',
                 'return_url' => 'http://127.0.0.1/freejoboard/index.php/empregos/payed',
                 'cancel_url' => 'http://127.0.0.1/freejoboard/index.php/empregos/canceled');

          $response = $this->merchant->purchase($params); 
```

贝宝打开，我输入信用卡号码，当我支付重定向到付费网页时一切正常，但钱永远不会到达商家测试账户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:47:43.400

确保您的凭据正确，并且您根据所使用的凭据指向正确的环境。如果您可以提供它应该去的帐户的电子邮件地址、进行付款的帐户的电子邮件地址和您返回的交易 ID，我可以查看我的此交易发生了什么.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:15:43.333

将付款记录在数据库中后，您需要使用 purchase_return() 方法确认付款。

# editor - 有没有好的伪代码编辑器？

> ID：15909103
> 
> 赞同：1
> 
> 时间：2013-04-09T17:55:22.843
> 
> 标签：editor, pseudocode

我必须创建一些伪代码，但希望它“看起来不错”并且格式一致。有没有什么东西可以让我用伪代码（我知道它不是真正的语言）做 if 语句，以便我始终保持相同的语法？

我不想在进行过程中意外地开始使用稍微不同的语法，因此编辑器可能会帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:59:10.617

[Notepad++](http://notepad-plus-plus.org/resources.html)不支持开箱即用的伪代码（任何其他编辑器 AFAIK 也不支持），但它确实有一个语法高亮编辑器，您可以使用它来定义伪代码的语法高亮和格式设置。

另请参阅[http://www.zoovio.com/image/view/2#!prettyPhoto](http://www.zoovio.com/image/view/2#!prettyPhoto)，其中 Stewart Venit 显示了他为 Notepad++ 为他的一本书编写的语法突出显示。

# javascript - onSubmit 在任何浏览器中都不起作用

> ID：15909104
> 
> 赞同：0
> 
> 时间：2013-04-09T17:55:27.787
> 
> 标签：javascript, html

我有一个简单的表格。我想使用我的简单公式计算表单隐藏字段的值（将下拉列表中的比率除以 100，然后将其与文本字段中的估计工资相乘。

但是由于某些奇怪的原因，onSubmit 无法处理表单。我想在提交表单但没有在任何浏览器上调用它时计算上述值。这真是一个奇怪的问题。

这是代码：

```
 <script type="text/javascript">
function calc1()
{
var a= document.getElementById('inf_custom_FLRaterClassCode0').value;
  var b = document.getElementById('inf_custom_FLRaterEstimatedPayroll').value; 
document.getElementById('inf_custom_EstimatedQuote').value=parseFloat(a)/100 * parseFloat(b) ; 

}

</script>

<form accept-charset="UTF-8" action="https://kg933.infusionsoft.com/app/form/process/968a6b704587136af8684f30cc8c5cf4" class="infusion-form" method="GET" onSubmit="calc1();">
    <input name="inf_form_xid" type="hidden" value="968a6b704587136af8684f30cc8c5cf4" />
    <input name="inf_form_name" type="hidden" value="Full Quote - Florida Rate" />
    <input name="infusionsoft_version" type="hidden" value="1.28.7.21" />
    <div class="infusion-field">
        <label for="inf_field_FirstName">First Name *</label>
        <input class="infusion-field-input-container" id="inf_field_FirstName" name="inf_field_FirstName" type="text" />
    </div>
    <div class="infusion-field">
        <label for="inf_field_LastName">Last Name *</label>
        <input class="infusion-field-input-container" id="inf_field_LastName" name="inf_field_LastName" type="text" />
    </div>
    <div class="infusion-field">
        <label for="inf_field_Company">Company *</label>
        <input class="infusion-field-input-container" id="inf_field_Company" name="inf_field_Company" type="text" />
    </div>
    <div class="infusion-field">
        <label for="inf_field_Email">Email *</label>
        <input class="infusion-field-input-container" id="inf_field_Email" name="inf_field_Email" type="text" />
    </div>
    <div class="infusion-field">
        <label for="inf_field_Phone1">Phone 1 *</label>
        <input class="infusion-field-input-container" id="inf_field_Phone1" name="inf_field_Phone1" type="text" />
    </div>
    <div class="infusion-field">
        <label for="inf_custom_FLRaterClassCode0">FL Rater - Class Code #2 *</label>
        <select id="inf_custom_FLRaterClassCode0" name="inf_custom_FLRaterClassCode0"><option value="">Please select one</option><option value="9519">9519</option><option value="5473">5473</option><option value="5472">5472</option><option value="9516">9516</option><option value="8393">8393</option><option value="8380">8380</option><option value="5188">5188</option></select>
    </div>
    <div class="infusion-field">
        <label for="inf_custom_FLRaterEstimatedPayroll">FL Rater - Estimated Payroll *</label>
        <input class="infusion-field-input-container" id="inf_custom_FLRaterEstimatedPayroll" name="inf_custom_FLRaterEstimatedPayroll" type="text" />
    </div>
    <input name="inf_custom_EstimatedQuote" type="hidden" value="" />
    <div class="infusion-submit">
        <input type="submit" value="Submit" />
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:04:11.907

问题是您试图通过 id 访问元素，但应该按名称访问。

代替

```
document.getElementById('inf_custom_EstimatedQuote').value=parseFloat(a)/100 * parseFloat(b) ; 
```

和

```
document.getElementsByName('inf_custom_EstimatedQuote')[0].value=parseFloat(a)/100 * parseFloat(b) ; 
```

或在发送表单之前为要更改的输入提供一个 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:57:41.453

它的“onsubmit”不是“onSubmit”

[event_form_onsubmit](http://www.w3schools.com/jsref/event_form_onsubmit.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:03:35.653

calc1() 在提交表单之前运行。但是，当您提交表单时，您会重新加载页面（到“ [https://kg933.infusionsoft.com/app/form/process/968a6b704587136af8684f30cc8c5cf4](https://kg933.infusionsoft.com/app/form/process/968a6b704587136af8684f30cc8c5cf4) ”），因此您永远看不到计算结果，因为打开了一个新网页.

# html - 有没有办法在没有 jQuery/javascript 的情况下将元素与其“祖父母”对齐？

> ID：15909110
> 
> 赞同：6
> 
> 时间：2013-04-09T17:55:51.467
> 
> 标签：html, css, alignment, parent, grandchild

我需要将一个元素与其“祖父母”的边缘对齐。

下面是代码示例：

```
<div id='grandparent'>
  <div class='parent' style='display:inline-block'>
    <div class='child'></div>
  </div>
  <div class='parent' style='display:inline-block'>
    <div class='child'></div>
  </div>
  <div class='parent' style='display:inline-block'>
    <div class='child'></div>
  </div>
  <div class='parent' style='display:inline-block'>
    <div class='child'></div>
  </div>
</div> 
```

因此 .parent 元素将被定位为内联，这将取决于 #grandparent 元素的宽度。我需要将每个 .child 元素定位到#grandparent 的左边缘。

如果没有javascript，这有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T18:04:14.700

将相对位置分配给祖父元素，将绝对位置分配给子元素。然后使用子元素的 top、left、bottom、right 属性（相对于祖父母边界）来获得您想要的效果。

# download - 如何获取 Mozilla 开发者网络站点的转储

> ID：15909114
> 
> 赞同：6
> 
> 时间：2013-04-09T17:56:09.830
> 
> 标签：download, wget, mozilla, dump

整个 Mozilla 开发者网络站点有多大？`api.jquery.com`通过`wget`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-19T20:53:17.927

根据[bugzilla 错误 757461](https://bugzilla.mozilla.org/show_bug.cgi?id=757461)和“[关于”页面的下载部分](https://developer.mozilla.org/en-US/docs/MDN/About#Downloading_content)，MDN 每周提供整个站点内容的快照，网址为：

（更新了链接，但在修复[此问题之前内容已过时。）](https://github.com/mozmeao/infra/issues/600)

[https://mdn-downloads.s3-us-west-2.amazonaws.com/developer.mozilla.org.tar.gz](https://mdn-downloads.s3-us-west-2.amazonaws.com/developer.mozilla.org.tar.gz)

内容大约为 8GB。

# c# - 处置类。我需要吗？

> ID：15909115
> 
> 赞同：0
> 
> 时间：2013-04-09T17:56:12.277
> 
> 标签：c#

我有以下邮件类：

```
public class Mail {
  public List<MailFile> Files { get; set; }
  public String Text { get; set; }
  // Other properties
}

public class MailFile {
  public Byte[] Data { get; set; }
  public String Mime { get; set; }
  public String Name { get; set; }
} // MailFile 
```

Mail 包含一个文件列表，其中每个 MailFile 包含一个属性 Data，该属性包含 File 二进制数据。然后我使用 Mailer 发送电子邮件。

```
public class Mailer : IMailer {

  private SmtpClient _client;

  public Mailer() {
    _client = new SmtpClient { UseDefaultCredentials = true };
  } // Mailer

  public void Send(Mail mail) {

    using (MailMessage message = new MailMessage()) {
      message.Text = mail.Text);
      // Define other fields
      foreach (MailFile file in mail.Files)
        message.Attachments.Add(new Attachment(new MemoryStream(x.Data), x.Name, x.Mime)));

      _client.Send(message);

    };

  } // Send

  public void Dispose() {
    Dispose(true);
  } // Dispose

  protected virtual void Dispose(Boolean disposing) {
    if (disposing) {
      if (_client != null)
        _client.Dispose();
    }
  } // Dispose

} // Mailer 
```

我将 MailMessage 包装在`using`

*   但在这种情况下，我是否需要处理邮件文件？
*   我的 Mail 和 Mail 文件不是由 GC 管理和处置吗？
*   也许我应该让 Mail 一次性并处理它的 MailFiles？
*   如果是，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:06:44.467

使用关键字`IDisposable`时需要实现。`using`资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)

> using 语句允许程序员指定使用资源的对象何时应该释放它们。提供给 using 语句的对象必须实现 IDisposable 接口。该接口提供了 Dispose 方法，该方法应该释放对象的资源。

要回答您的具体问题，我们需要查看更多代码。

如果您的`MailMessage`类包含任何非托管资源或流，您肯定必须从代码中释放实现`IDisposable`和调用`Dispose()`方法的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:01:29.727

如果要将它们包装在 using 语句中，则该类需要实现 IDisposable。如果你不这样做，它甚至不会编译。

如果内存不是托管的，您可能只需要释放内存，但是将内部托管引用设置为 null 应该可以满足您的需要。

要回答您的特定问题：

*   但在这种情况下，我是否需要处理邮件文件？

我认为您不需要这样做，但这不会造成伤害，并且会让 GC 清楚地知道对对象的引用少了一个。如果你有类似的东西：

```
String name;
using(MailFile mf = ...) {
    name = mf.Name;
}

// do something with name 
```

您仍然持有对实际字符串的引用，因此它不会被 GC 处理。mf 应该，但不能保证何时。

*   我的 Mail 和 Mail 文件不是由 GC 管理和处置吗？

是的，但只要对对象的引用保存在某处，它们就不会存在。将其设置为 null 且没有其他内容引用内存中的实际对象，这意味着 GC 最终会清理它，但不能保证它何时会发生。

*   也许我应该让 Mail 一次性并处理它的 MailFiles？

不是必需的，但一般来说是个好主意。只需让它实现 IDisposable 并在处理时将字段设置为 null 即可。

*   如果是，最好的方法是什么？

见上一点。

# php - php随机数组 - 做while时再次随机

> ID：15909116
> 
> 赞同：-3
> 
> 时间：2013-04-09T17:56:14.943
> 
> 标签：php, arrays, random, shuffle

现在，每次我做一段时间，它都会从我的阵列的顶部到底部。我怎样才能让它通过每个值，但以随机模式，而不是从上到下？

这是我所拥有的：

```
$xbb = array('avotf1',
'avotf2',
'avotf3',
'avotf4',
'avotf5',
'avotf6',
'avotf7',
'avotf8',
'avotf9',
'avotf11',
'avotf12',
'avotf13',
'avotf14',
'avotf15',
'avotf10');

foreach($xbb as $item)
{

echo "$item<br>";

} 
```

如何打乱我拥有的随机数组并仍然显示所有 15 个值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:57:05.367

随机播放[`shuffle()`](http://php.net/manual/en/function.shuffle.php)：

```
shuffle($xbb); 
```

顺便说一句，在Google 中搜索**php shuffle array**也会给你很多结果。

# javascript - 将特定上下文绑定到事件处理程序

> ID：15909124
> 
> 赞同：0
> 
> 时间：2013-04-09T17:56:39.437
> 
> 标签：javascript

我只是在学习 JavaScript 并阅读那本 Ninja Secrets 书，这就是他将点击事件绑定到按钮的方法。因此，由于我只是一个初学者，并且我想要学习的是这样做的最佳和最终方式（将点击处理程序添加到按钮），还是他只是以此作为示例来演示闭包，而这并不是真正的方式世界它完成了。

```
 <body>
    <button id="test">Click Me!</button>

    <script>
      function bind(context,name){                                 //#1
        return function(){                                         //#1
          return context[name].apply(context,arguments);           //#1
        };                                                         //#1
      }                                                            //#1

      var button = {
        clicked: false,
        click: function(){
          this.clicked = true;
          assert(button.clicked,"The button has been clicked");
          console.log(this);
        }
      };

      var elem = document.getElementById("test");
      elem.addEventListener("click",bind(button,"click"),false);     //#2

    </script>

  </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:59:51.237

他主要是在解释这是如何用于教育目的的。在现代 ECMAScript 5 中有一个本机`Function.bind` [（此处的文档）](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)，因此您可以执行以下操作：

```
elem.addEventListener("click", button.click.bind(button), false); 
```

# rrdtool - rrd4j 归档类型

> ID：15909125
> 
> 赞同：3
> 
> 时间：2013-04-09T17:56:43.340
> 
> 标签：rrdtool, rrd

我无法创建具有正确类型的存档。我错过了什么？[我的示例与https://code.google.com/p/rrd4j/wiki/Tutorial](https://code.google.com/p/rrd4j/wiki/Tutorial)上的官方示例非常相似

RRD 创建：

```
rrdDef.setStartTime(L - 300);
rrdDef.addDatasource("speed", DsType.GAUGE, 600, Double.NaN, Double.NaN);
rrdDef.addArchive(ConsolFun.MAX, 0.5, 1, 24);
rrdDef.addArchive(ConsolFun.MAX, 0.5, 6, 10); 
```

我添加了一些值：（每一步 1,2,3）

```
long x = L;
while (x <= L + 4200) {
   Sample sample = rrdDb.createSample();
   sample.setAndUpdate((x + 11) + ":1");
   sample.setAndUpdate((x + 12) + ":2");
   sample.setAndUpdate((x + 14) + ":3");
   x += 300;
} 
```

然后我拿它：

```
FetchRequest fetchRequest = rrdDb.createFetchRequest(ConsolFun.MAX, (L - 600), L + 4500);
FetchData fetchData = fetchRequest.fetchData();
String s = fetchData.dump(); 
```

我得到结果：（希望找到最大值）

```
920804100:  NaN  
920804400:  NaN  
920804700:  +1.0000000000E00  
920805000:  +1.0166666667E00  
920805300:  +1.0166666667E00  
...
920808600:  +1.0166666667E00  
920808900:  +1.0166666667E00  
920809200:  NaN 
```

我想在这里看到最大值。也尝试了total，我得到了相同的结果。

我必须改变什么，所以我得到了一步发送的最大值，或者得到了一步发送的值的总和。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T21:37:38.817

MAX 不是最大值输入，而是最大合并数据点。鉴于你的例子，你对 rrd 说的是

1.  在某个时间点，我将以 1 英里/小时的速度行驶
2.  一秒钟后，我将以 2 英里/小时的速度行驶
3.  两秒钟后，我将以 4 英里/小时的速度行驶

rrd 现在有 3 个数据点，覆盖 300 秒间隔中的 3 秒。rrd 应该存储什么？1、2 还是 3？以上都不需要以某种方式对数据进行归一化，即在 X 和 X+STEP 之间，速率为 Y。

使事情复杂化的是，您的 3 个数据点并不能确定在同一个 300 秒的时间间隔内。您的前 2 个数据点可能在一个间隔中，而 4MPH 可能在下一个间隔中。这是因为存储的起始数据点并不完全是 start+step。即，如果您从 14090812456 开始，即使您的步长为 300，它也可能类似于 14090812700

使用 GAUGE 存储准确输入值的唯一方法是在准确的步骤时间推送更新 rrd 存储数据点。我将在 x 处 1MPH，在 x+300 处 2MPH，在 x+300 处 4MPH，其中 x 从第一个数据点开始。

这是一个 bash 示例，显示了使用您的 rrd 设置进行这项工作，我使用的是恒定的开始时间，并且 x 从我知道的 rrd 的第一个数据点开始。

```
L=1409080000
rrdtool create max.rrd --start=$L DS:speed:GAUGE:600:U:U RRA:MAX:0.5:1:24 RRA:MAX:0.5:6:10
x=$(($L+200))
while [ $x -lt $(($L+3000)) ]; do
        rrdtool update max.rrd "$(($x)):1"
        rrdtool update max.rrd "$(($x+300)):2"
        rrdtool update max.rrd "$(($x+600)):3"
        x=$(($x+900))
done

rrdtool fetch max.rrd MAX -r 600 -s 1409080000
                          speed

1409080200: 1.0000000000e+00
1409080500: 2.0000000000e+00
1409080800: 3.0000000000e+00
1409081100: 1.0000000000e+00
1409081400: 2.0000000000e+00
1409081700: 3.0000000000e+00
1409082000: 1.0000000000e+00 
```

不是那么有用，但是如果您将分辨率提高到 1200 秒，您将开始在更大的时间间隔内获得最大值

```
rrdtool fetch max.rrd MAX -r 1200 -s 1409080000
                          speed

1409081400: 3.0000000000e+00
1409083200: 3.0000000000e+00
1409085000: nan
1409086800: nan
1409088600: nan 
```

# sql - 覆盖 SQL Server Maxrecursion？

> ID：15909127
> 
> 赞同：0
> 
> 时间：2013-04-09T17:56:48.360
> 
> 标签：sql, sql-server, tsql, recursion

我有一个结构像的表

```
name    properties
x       thing1, thing2, thing3
y       otherthing1, otherthing2, otherthing3 
```

我想将其映射到一对多的关系，例如

```
name  properties
x     thing1
x     thing2
x     thing3 
```

我有以下解决方案，但遇到了 SQL Server 中的 Maxrecursion 选项

```
;with tmp(brandName, drugList, genericName) as (
select brandName, LEFT(genericName, CHARINDEX(',',genericName+',')-1),
    STUFF(genericName, 1, CHARINDEX(',',genericName+','), '')
from eeeee
where LEN(genericName) - LEN(replace(genericName,',','')) < 100
union all
select brandName, LEFT(genericName, CHARINDEX(',',genericName+',')-1),
    STUFF(genericName, 1, CHARINDEX(',',genericName+','), '')
from tmp
where genericName > ''
)
select brandName,  drugList
from tmp
order by brandName 
```

where 子句是让我们运行这个查询的原因，因为多值列中有一些行在列表中有超过 100 个项目。有什么方法可以偷偷摸摸并覆盖 SQL Server 的 100 最大递归限制？还是最好继续将具有超过 100 个值的列分成两部分，然后进行递归？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:43:51.513

我可以在不使用递归的情况下提出更有效的解决方案 -

```
DECLARE @temp TABLE
(
      name NVARCHAR(50)
    , properties NVARCHAR(1000)
)

INSERT INTO @temp (name, properties)
VALUES 
    ('x', 'thing1, thing2, thing3'),
    ('y', 'otherthing1, otherthing2, otherthing3')

SELECT  
      data.name
    , property = LTRIM(data.property)
FROM (
    SELECT 
          name = p.value('(./n)[1]', 'NVARCHAR(50)')
        , property = p.value('(./s)[1]', 'NVARCHAR(1000)')
    FROM (
        SELECT field = CAST('<r><s>' + REPLACE(t.properties + ',', ',', '</s><n>' + t.name + '</n></r><r><s>') + '</s></r>' AS XML) 
        FROM @temp t
    ) d
    CROSS APPLY field.nodes('/r') t(p)
) data
WHERE data.name IS NOT NULL 
```

* * *

是的当然。表中的每个字符串都有一个固定的分隔符。我们将分隔符字符替换为 XML 结构的一部分。我们得到这样的行：

```
thing1, thing2, thing3 -> <r><s>thing1</s><s>thing2</s><s>thing3</s></r> 
```

将字符串转换为 XML 日期类型并解析形成的树：

```
<r>
 <s>thing1</s>
 <n>x</n>
</r>
<r>
 <s> thing2</s>
 <n>x</n>
</r>
<r>
 <s> thing3</s>
 <n>x</n>
</r> 
```

# php - prestashop 从产品列表中排除产品

> ID：15909128
> 
> 赞同：0
> 
> 时间：2013-04-09T17:57:01.590
> 
> 标签：php, smarty, prestashop

我想从产品列表中排除标记为“仅限在线”的项目。

product-list.tpl 的开头是：

```
<ul id="product_list" class="categorie_product clear">
    {foreach from=$products item=product name=products}
        <li class="ajax_block_product ........etc........> 
```

放入这个：

```
<li {if $product.online_only}style="display:none"{/if}> 
```

从列表中删除产品，但它们仍会占用列表中的空间。所以我认为唯一的方法是从 foreach 本身中排除设置为在线的产品，但我有点迷失了如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:52:14.697

编辑：啊，是的，我忘记了分页。看起来您必须从一开始就从 MySQL 查询中排除这些产品。

转到 classes/category.php 并找到函数 getProducts。

查找`if ($getTotal)`并替换最后一行： `'.($id_supplier ? 'AND p.id_supplier = '.(int)$id_supplier : '').' AND p.online_only = 0');` 这将返回 NOT（仅限在线）产品的数量，因此分页将正常工作。

在它的正下方，您将看到变量 $sql。将最后一行替换为： `'.($id_supplier ? 'AND p.id_supplier = '.(int)$id_supplier : '').' AND p.online_only = 0';` 以便只获取 NOT（仅限在线）产品。

它应该工作。现在您不需要我之前提到的 {continue}，因为只有那些不是（仅限在线）的产品才会从数据库中获取。

让我知道这是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:01:40.097

是的，这正是我所做的，但没有效果。category.php 中的部分：

```
 if ($getTotal)
    {
        $result = Db::getInstance(_PS_USE_SQL_SLAVE_)->getRow('
        SELECT COUNT(cp.`id_product`) AS total
        FROM `'._DB_PREFIX_.'product` p
        LEFT JOIN `'._DB_PREFIX_.'category_product` cp ON p.`id_product` = cp.`id_product`
        WHERE cp.`id_category` = '.(int)($this->id).($active ? ' AND p.`active` = 1' : '').'
        '.($id_supplier ? 'AND p.id_supplier = '.(int)$id_supplier : '').' AND p.online_only = 0');
        return isset($result) ? $result['total'] : 0;
    }

    $sql = '
    SELECT p.*, pa.`id_product_attribute`, pl.`description`, pl.`description_short`, pl.`available_now`, pl.`available_later`, pl.`link_rewrite`, pl.`meta_description`, pl.`meta_keywords`, pl.`meta_title`, pl.`name`, i.`id_image`, il.`legend`, m.`name` AS manufacturer_name, tl.`name` AS tax_name, t.`rate`, cl.`name` AS category_default, DATEDIFF(p.`date_add`, DATE_SUB(NOW(), INTERVAL '.(Validate::isUnsignedInt(Configuration::get('PS_NB_DAYS_NEW_PRODUCT')) ? Configuration::get('PS_NB_DAYS_NEW_PRODUCT') : 20).' DAY)) > 0 AS new,
        (p.`price` * IF(t.`rate`,((100 + (t.`rate`))/100),1)) AS orderprice
    FROM `'._DB_PREFIX_.'category_product` cp
    LEFT JOIN `'._DB_PREFIX_.'product` p ON p.`id_product` = cp.`id_product`
    LEFT JOIN `'._DB_PREFIX_.'product_attribute` pa ON (p.`id_product` = pa.`id_product` AND default_on = 1)
    LEFT JOIN `'._DB_PREFIX_.'category_lang` cl ON (p.`id_category_default` = cl.`id_category` AND cl.`id_lang` = '.(int)($id_lang).')
    LEFT JOIN `'._DB_PREFIX_.'product_lang` pl ON (p.`id_product` = pl.`id_product` AND pl.`id_lang` = '.(int)($id_lang).')
    LEFT JOIN `'._DB_PREFIX_.'image` i ON (i.`id_product` = p.`id_product` AND i.`cover` = 1)
    LEFT JOIN `'._DB_PREFIX_.'image_lang` il ON (i.`id_image` = il.`id_image` AND il.`id_lang` = '.(int)($id_lang).')
    LEFT JOIN `'._DB_PREFIX_.'tax_rule` tr ON (p.`id_tax_rules_group` = tr.`id_tax_rules_group`
                                               AND tr.`id_country` = '.(int)Country::getDefaultCountryId().'
                                               AND tr.`id_state` = 0)
    LEFT JOIN `'._DB_PREFIX_.'tax` t ON (t.`id_tax` = tr.`id_tax`)
    LEFT JOIN `'._DB_PREFIX_.'tax_lang` tl ON (t.`id_tax` = tl.`id_tax` AND tl.`id_lang` = '.(int)($id_lang).')
    LEFT JOIN `'._DB_PREFIX_.'manufacturer` m ON m.`id_manufacturer` = p.`id_manufacturer`
    WHERE cp.`id_category` = '.(int)($this->id).($active ? ' AND p.`active` = 1' : '').'
    '.($id_supplier ? 'AND p.id_supplier = '.(int)$id_supplier : '').' AND p.online_only = 0'; 
```

# jquery - 前端代码的 BDD？

> ID：15909131
> 
> 赞同：2
> 
> 时间：2013-04-09T17:57:15.813
> 
> 标签：jquery, design-patterns, bdd, jasmine

目前，我正在与我公司的程序员和 UX 合作，创建一个模式/组件库以在我们的软件中使用。把它想象成我们自己的版本，比如 Twitter Bootstrap、jQuery UI 或 Yahoo! 设计模式库。

我将使用 HTML5、CSS3 和 jQuery（可能使用 CoffeeScript）创建这个库。我应该使用像 Jasmine 这样的库来测试我的 js 吗？我问的原因是因为任何使用 jQuery 的组件都不会真正做比花哨的效果更多的事情。所以，我想，是否值得测试诸如“这个按钮在悬停时改变类吗？”之类的东西。或“我的手风琴菜单工作正常吗？”

我不熟悉简单前端代码的测试实践，所以我想要一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:02:42.993

我说在那里进行浏览器测试，您可以使用 Jasmine 或 Selenium（我尝试尽可能多地使用 Selenium）。

除了基本的“它是否像它应该的那样工作”测试之外，当对 jQuery 之类的东西进行重大更新时，您可以快速重新运行您的测试套件并查看失败的地方。这将为您节省大量时间，并且一旦您解决了问题（如果有的话），您就可以为下一个问题做好准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:07:24.697

如果你的 javascript 中有逻辑，那么单元测试是有意义的。为此保留一个测试套件。

此外，专注于测试端到端的东西的系统测试。在您的情况下，使用 selenium 之类的工具进行浏览器测试也很重要。这有助于解决库更新时的回归问题，特别是对于库更新频繁或有时库相互交换的 JS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:39:43.493

我发现将 BDD 与库和框架一起使用的最佳方法之一是创建一些实际使用该框架的小型应用程序。然后，这些还为需要知道如何使用它的任何其他人提供文档。这实际上是大多数 BDD 框架本身（JBehave、Cucumber 等）的设计方式。[你可以在这里](https://code.google.com/p/wipflash/)看到一个类似的例子，我使用宠物店来驱动自动化工具，并围绕宠物店编写场景。

为了美观，您可能无论如何都要手动测试它们，@ashutosh-raina 建议在这里对任何逻辑进行单元测试非常棒。当您为玩具应用程序编写场景时，请关注[他们可以做什么](https://code.google.com/p/wipflash/source/browse/Example.PetShop.Scenarios/PetRegistrationAndPurchase.cs)而不是他们如何做，您可能会发现您在全栈级别涵盖了大部分功能。不要担心强迫它，因为单元测试会完成其余的工作。我链接到的示例是 .NET，但应该让您了解我的意思。

玩具应用程序的另一个好处是，如果您收到新请求，通常可以找到一种方法来添加某些内容或更改应用程序以演示该请求，然后轻松添加并确保它有效。

如果您编写了太多场景，您的套件将很快变得无法维护，并使您的代码更难更改，这与您想要的完全相反。

# php - MySQL：在 SELECT 中添加条件

> ID：15909140
> 
> 赞同：0
> 
> 时间：2013-04-09T17:57:57.037
> 
> 标签：php, mysql, select, conditional-statements

我有一个巨大的 SELECT ，我需要在其中设置一些条件。

例如：

```
SELECT `t`.`title`, `t`.`price_paid`, `t`.`date_creation`, `t`.`date_upload` 
  FROM `table_name` AS `t`
 WHERE `t`.`date_creation` >= "'.$year.'-'.$month.'-01" 
   AND `t`.`date_creation` < "'.$year.'-'.($month+1).'-01" 
```

我在 PHP 中声明了 $year 和 $month 的值，我希望其余部分在 MYSQL 中进行（我有充分的理由可以在需要时详细说明）

我需要的是使`date_upload`空（null 或 0），`price`如果 date_upload 与`t`.`date_creation`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:33:27.783

不要那样做日期数学。`2013-13-01`如果你在 12 月，你会要求 MySQL在高端寻找。使用实际的 mysql 日期数学：

```
SELECT ...
WHERE t_date_creation BETWEEN (now() - INTERVAL 1 MONTH) AND (now() + INTERVAL 1 MONTH) 
```

至于您的查询，它将是一个 UPDATE 查询：

```
UPDATE yourtable
SET date_upload = NULL, price = NULL
WHERE date_restriction_logic_here. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:44:16.737

到目前为止的解决方案似乎是：

-> MySQL 在选择查询中嵌套“If”

> IF(条件，真值，假值)

就像是

> 选择`t`。`title`, 如果 ( `t`. `date_creation`>= "'.$year.'-'.$month.'-01" AND `t`. `date_upload`< "'.$year.'-'.($month+1).'-01" , `t`. `price_paid`, '0') 作为`price_paid`, `t`. `date_creation`, 如果 ( `t`. `date_creation`>= "'.$year.'-'.$month.'-01" AND `t`. `date_upload`< "'.$year.'-'.($month+1).'-01" , `t`. `date_upload`, ' ' )`date_upload` 从哪里来 。>= "'.$year.'-'.$month.'-01" AND . < "'.$year.'-'.($month+1).'-01"`table_name``t``t``date_creation``t``date_creation`

和其他解决方案似乎是控制流功能

> CASE 值 WHEN [compare_value] THEN 结果 [WHEN [compare_value] THEN 结果 ...] [ELSE 结果] END

[在http://komlenic.com/254/mysql-nested-if-in-select-queries/](http://komlenic.com/254/mysql-nested-if-in-select-queries/) 上找到[http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html)

# jquery - 位置绝对底部 0 iphone 滚动问题

> ID：15909142
> 
> 赞同：0
> 
> 时间：2013-04-09T17:58:07.550
> 
> 标签：jquery, ios, css

[http://bvh.delineamultimedia.com/?page_id=2](http://bvh.delineamultimedia.com/?page_id=2) -> 在此页面上，我有一个 jQuery 动画，当您单击右侧的箭头时显示页脚，它显示内容，然后在您再次单击箭头时关闭。一切正常，直到您在 iPhone 上查看它。

在 iphone 上，当您向上滚动并且不要单击箭头时，它会显示内容片刻然后捕捉到正确的位置……有没有办法避免这种情况？有没有其他人遇到过这个？

# tsql - Use SUBSTRING AND CHARINDEX to get last complete word in field

> ID：15909143
> 
> 赞同：3
> 
> 时间：2013-04-09T17:58:07.747
> 
> 标签：tsql, substring, reverse

I have a field in my database that I plan to truncate, for reporting purposes, to 50 characters with the statement below.

```
SELECT (CASE WHEN (LEN(Notes) > 50) THEN SUBSTRING(Notes, 0, 50) + '...' WHEN (LEN(Notes) < 50) THEN SUBSTRING(Notes, 0, LEN(Notes)) + '...' ELSE 'NO NOTES WERE ENTERED' END) AS Notes FROM MyTable 
```

This works great, however, I would like to complete the last word in the notes field so that a word isn't cut off so I would like to use CHARINDEX, SUBSTRING, REVERSE and possibly the RIGHT function to return the last complete word that is part of a string roughly 50 characters long.

I have experimented and I'm not having much luck.

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:27:51.963

If the length of your notes column is over 50, you can use `CHARINDEX` to find the next space after position 50 and `SUBSTRING` to that position. Here is a [SQL Fiddle](http://sqlfiddle.com/#!3/74ced/1/0).

```
SELECT RTRIM(
    CASE
        -- when the length is less than 50, or the character at position 50 is part of the last word, return the entire string
        WHEN LEN(notes) < 50 OR (SUBSTRING(notes,50,1) <> ' ' AND CHARINDEX(' ',notes,50) = 0)
            THEN notes
        -- when the character at position 50 is a space, return the first 50 characters of the string
        WHEN SUBSTRING(notes,50,1) = ' '
            THEN LEFT(notes, 50)
        -- when the character at position 50 is a word, cut off the string at the next space after 50
        WHEN SUBSTRING(notes,50,1) <> ' '
            THEN LEFT(notes,CHARINDEX(' ',notes,50))
    END) AS first_50
FROM tbl_notes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-08T07:53:45.667

In case you don't want to exceed the character limit you could have it like this:

```
DECLARE @Table TABLE
(
  String nvarchar(100)
)

DECLARE
  @Size int             = 25

INSERT @Table SELECT 'Lorem ipsum dolor sit ame'
INSERT @Table SELECT 'Lorem ipsum dolor sit ame tas'
INSERT @Table SELECT 'Lorem ipsum dolor sit am asd'
INSERT @Table SELECT 'Lorem ipsum dolor sita am'
INSERT @Table SELECT 'Lorem ipsum dolor sita a amet, consectetur adipiscing elit,'
INSERT @Table SELECT 'Lorem ipsum dolor sita'
INSERT @Table SELECT 'Lorem ipsum dolor sita asamet, consectetur adipiscing elit,'

SELECT
  LEN(R.LimitTruncation) AS LimitTruncationLen,
  R.LimitTruncation,
  LEN(String) AS StringLen,
  R.String
FROM
(
  SELECT
    String,
    --This is the main part
    CASE
      WHEN LEN(String) <= @Size THEN String
      WHEN CHARINDEX(' ', String, @Size) = @Size OR CHARINDEX(' ', String, @Size) = @Size + 1 THEN RTRIM(LEFT(String, @Size))
      ELSE REVERSE(SUBSTRING(REVERSE(LEFT(String, @Size)), CHARINDEX(' ', REVERSE(LEFT(String, @Size))), @Size))
    END AS LimitTruncation
  FROM
    @Table
) R 
```

# vb.net - Microsoft VB.NET 2010 - 分配一个键以在窗口最小化时启动进程

> ID：15909144
> 
> 赞同：-1
> 
> 时间：2013-04-09T17:58:08.033
> 
> 标签：vb.net, button, key, assign

这是我创建的自动说话器，但是在 10 毫秒输入文本时单击开始和停止不是很方便。所以我想创建一个键，按下时会启动自动打字机，也会停止它。我有一个框，用户可以在其中按下一个键来分配开始和停止自动输入。我会输入什么代码来点击分配？我想分配给：从 textbox5.text 获取密钥并将其用作开始垃圾邮件的快捷键。当垃圾邮件机器人的界面最小化时会按下该键，因此我不能使用“&Spambot”作为 S 作为快捷键。任何帮助，将不胜感激。请点击下面的链接查看图片

[http://s16.postimg.org/6xdxtjvg5/Interface.png](http://s16.postimg.org/6xdxtjvg5/Interface.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:11:33.607

我成功地使用了一些方法来读取 numkey 状态，打开时启动我的东西，再次关闭时停止它，也许你会喜欢那个解决方案。

```
If Control.IsKeyLocked(Keys.NumLock) Then ... 
```

您的替代方法是 1\. 使用 keyDown 事件（我认为它提供了比按键事件更多的按键信息），然后将其存储在局部变量中

最后使用外部 dll 来确定是否在 Windows 中的任何位置按下了任何键。如果，然后比较它是否是正确的键，然后触发你想触发的任何东西。

# plsql - 仅返回其他表中不存在值的行

> ID：15909147
> 
> 赞同：0
> 
> 时间：2013-04-09T17:58:18.720
> 
> 标签：plsql

我有一个带有 Id 列的**表 A。**

我有一个带有 Id1 和 Id2 列的**表 B。**

我想返回**表 b**中所有 Id1 或 Id2 都不存在于**表 A**中的行。**如果表 b**中的Id1 或 Id2 在**表 A**中有匹配项，我想返回该结果。

因此，如果**表 A**如下所示：

```
Id    
123
456
789 
```

表**B**如下所示：

```
Id1 Id2    
123 545
343 432
184 789 
```

不会返回第 1 行和第 3 行，因为它们在**表 A**中都有一个匹配项。但是，**表 b**中的第 2 行与两列都不匹配，因此将被返回。

我一直在绞尽脑汁，似乎无法弄清楚这个问题。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:02:22.080

假设您的 Id 列不为空：

```
select * from tableB 
where Id1 not in (select Id from tableA) 
and Id2 not in (select Id from tableA) 
```

或者

```
select b.* 
from tableB b
left join tableA a1 on b.id1=a1.id
left join tableA a2 on b.id2=a2.id
where a1.id is null and a2.id is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:33:53.277

当查找某些数据在另一个表中不*存在*的记录时，总是*存在 exists*子句，因此得名 ;-)

```
select * from tableB 
where not exists
(
  select *
  from tableA
  where id in (tableB.id1, tableB.id2)
); 
```

# sql - 为 sybase IQ 插入忽略替代项

> ID：15909148
> 
> 赞同：2
> 
> 时间：2013-04-09T17:58:21.957
> 
> 标签：sql, database, sap-iq

在 sybase IQ中**插入忽略**的替代方法是什么。

我希望插入通过而不会在重复的情况下失败，并插入所有非重复。该表在列上具有唯一键约束

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:28:23.607

试试这个`on existing skip`子句：

```
insert into mytable (col1, col2) 
   on existing skip 
   values ('a','b') 
```

# java - 从另一个列表分配后列表为空

> ID：15909150
> 
> 赞同：-2
> 
> 时间：2013-04-09T17:58:30.437
> 
> 标签：java, arraylist

我正在尝试处理我的 A 类列表。

方法：

```
public List<A> get(String var) {    
List  <A> list= new ArrayList <A>();
A obj = new A();
Session session = this.getHibernateTemplate().getSessionFactory().openSession();
Criteria criteria = session.createCriteria(A.class);
criteria.add(Restrictions.eq("name", var)); 
Iterator<A> it = (Iterator<A>) criteria.list().iterator();
while(it.hasNext())
{
obj = it.next();
list.add(obj);
}
return list;
} 
```

方法调用：

```
List  <A> list2= new ArrayList <A>();
list2 = get (var); 
```

在调试时，我可以看到列表值。问题是 list2 是空的。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:02:55.957

list2 是空的，因为

```
 public List<A> get(String var) 
```

返回空列表。

第一行

```
 List  <A> list2= new ArrayList <A>();
    list2 = get (var); 
```

被 get() 的结果覆盖。

**UPD**

你调用了 criteria.list() 两次！

删除这个：

```
Iterator<A> it = (Iterator<A>) criteria.list().iterator();
while(it.hasNext())
{
obj = it.next();
list.add(obj);
} 
```

您实际上应该得到 ConcurrentModificationException ，但无论如何这是错误的。

**UPD2**

试试这个：

```
public List<A> get(String var) {
    Session session = this.getHibernateTemplate().getSessionFactory()
            .openSession();
    Criteria criteria = session.createCriteria(A.class);
    criteria.add(Restrictions.eq("name", var));
    return criteria.list();
}

List<A> list2 = get (var); 
```

# cakephp - ACO 别名不适用于“控制器/控制器”值

> ID：15909151
> 
> 赞同：1
> 
> 时间：2013-04-09T17:58:32.823
> 
> 标签：cakephp, cakephp-2.3

我是 CakePHP 中的 ACL 新手。我相信我的管理员组设置正确，可以完全访问`'controllers'`ACO。但是，当我尝试转到任何未明确公开的控制器或操作时出现错误。

```
Warning (512): DbAcl::check() - Failed ARO/ACO node lookup in permissions check. Node references:
Aro: Array
(
    [User] => Array
        (
            [id] => 9
            [email] => Admin
            [group_id] => 3
            [is_active] => 1
            [created] => 2013-04-08 07:59:52
            [modified] => 2013-04-08 07:59:52
            [Group] => Array
                (
                    [id] => 3
                    [name] => Administrators
                    [user_count] => 2
                    [created] => 2013-04-08 06:34:58
                    [modified] => 2013-04-08 06:34:58
                )

        )

)

Aco: controllers/Users/index [CORE/Cake/Model/Permission.php, line 94] 
```

在我的`acos`表中有一个`'controllers/Users/index'`作为别名的条目。此条目有一个引用的 parent_id `'controllers/Users'`，而后者又具有一个引用的 parent_id `'controllers'`。

我的`'aros_acos'`表中只有一个条目授予管理员组完全权限。

基于上面的错误我做了一点挖掘，发现如果我直接尝试调用`$this->Acl->Aco->node('controllers/Users/index');`返回值是`false`. 但是，如果我对`$this->Acl->Aco->node('controllers');`返回的值进行相同的查询，则该数组是正确的。

某些东西显然无法正常运行，但我无法弄清楚我哪里出错了。我整天都在挖掘文档书和 API，但没有找到任何找不到`'controllers/Users/index'`的原因`'controllers'`。在这一点上，它似乎与`/`角色有关，但我不知道为什么。我在添加 Aco 时使用了相同的字符串，它正确保存。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:17:51.767

我通过在以下位置安装 ACL 插件发现了问题： [http ://www.alaxos.net/blaxos/pages/view/plugin_acl_2.0](http://www.alaxos.net/blaxos/pages/view/plugin_acl_2.0)

运行这个伟大的实用程序后，我发现我错误地使用别名中的填充路径添加了我的 ACO。事实证明，别名只是动作或控制器名称，并根据 parent_id 找到正确的路径。

这在 CakePHP 文档中没有很好地记录，但还有什么是新的。

例子：

我正在添加`'controllers/Users/index'`而不是`'index'`.

希望这可以帮助其他人解决这个问题！我浪费了一整天的时间。

# c++ - 无法为整数生成全范围的随机数

> ID：15909153
> 
> 赞同：3
> 
> 时间：2013-04-09T17:58:34.960
> 
> 标签：c++, file-io, random, ifstream

我正在尝试生成一个包含 0 到 100 000 之间的 10000 个整数的文件，以便稍后对它们进行 MergeSort。

当我使用 fstream 生成文件时，我从来没有得到超过 32760 的整数。

以下方法生成文件，然后将其读回并检查是否有任何超过 32750 的整数。我通常会得到介于 32750 和 32760 之间的 3-5 个整数。为什么会发生这种情况，我该如何解决？是种子问题还是Random函数的实际使用？

```
// sizeOfArray = 10000
void generateFile() {
    ofstream fout("unsorted.txt");
    srand(time(NULL));

    // Generating the file
    int num;
    for(int i = 0; i < sizeOfArray; i++) {
         num = rand() % 100000;
         if(i < sizeOfArray-1)
            //fout << i+1 << ": " << num << endl;
            fout << num << endl;
         else
            //fout << i+1 << ": " << num;
            fout << num;
    }

    // Reading the File Back
    ifstream fin("unsorted.txt");
    for(int i = 0; i < sizeOfArray; i++) {
        fin >> num;
        if(num > 32750)
            cout << num << endl;
    }

    cin.get();
} 
```

**已解决**
使用下面提供的答案，我生成了 500 次文件
，我收到的最高整数是 99931。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T18:01:19.297

您可以从中获得的最高随机值`rand()`是`RAND_MAX`，一个依赖于库的常数。在您的情况下，它似乎设置为`2^15-1`，这是适合有符号 16 位整数的最大正数。

当您需要生成大于 的数字时，请多次`RAND_MAX`调用，每次乘以。例如，在您的情况下，以下代码应该可以工作（我假设您有 32 位）：`rand()``RAND_MAX``int`

```
num = rand();
num *= RAND_MAX;
num += rand();
num %= 100000; 
```

请注意，仅将三个随机数相加以获得所需范围不会产生与乘法和加法相同的随机分布。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T18:06:21.513

您可以使用 C++11 引入的新随机数生成器之一来获得更大的范围：[http ://en.cppreference.com/w/cpp/numeric/random](http://en.cppreference.com/w/cpp/numeric/random)

如果您没有 C++11，您也可以从 Boost 获得它：http: [//www.boost.org/doc/libs/1_53_0/doc/html/boost_random.html](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_random.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T18:01:25.230

取决于您使用的是什么：[http ://www.cplusplus.com/reference/cstdlib/RAND_MAX/](http://www.cplusplus.com/reference/cstdlib/RAND_MAX/)

# reporting-services - 如何防止 NaN 出现在我的报告中？

> ID：15909154
> 
> 赞同：0
> 
> 时间：2013-04-09T17:58:37.900
> 
> 标签：reporting-services

以下代码`NaN`在没有记录的情况下返回 a。如何防止它显示在报告中？0 将是首选。

```
=FormatNumber(
((
(Code.NullSafeSplit(Fields!AvgLOSC1.Value, 0) * Code.NullSafeSplit(Fields!AvgLOSC1.Value, 1)) + 
(Code.NullSafeSplit(Fields!AvgLOSC2.Value, 0) * Code.NullSafeSplit(Fields!AvgLOSC2.Value, 1)) + 
(Code.NullSafeSplit(Fields!AvgLOSC3.Value, 0) * Code.NullSafeSplit(Fields!AvgLOSC3.Value, 1)) + 
(Code.NullSafeSplit(Fields!AvgLOSC4.Value, 0) * Code.NullSafeSplit(Fields!AvgLOSC4.Value, 1)) + 
(Code.NullSafeSplit(Fields!AvgLOSC5.Value, 0) * Code.NullSafeSplit(Fields!AvgLOSC5.Value, 1))
) / (
CInt(Code.NullSafeSplit(Fields!AvgLOSC1.Value, 1)) + 
CInt(Code.NullSafeSplit(Fields!AvgLOSC2.Value, 1)) + 
CInt(Code.NullSafeSplit(Fields!AvgLOSC3.Value, 1)) + 
CInt(Code.NullSafeSplit(Fields!AvgLOSC4.Value, 1)) + 
CInt(Code.NullSafeSplit(Fields!AvgLOSC5.Value, 1))
))
, 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:29:41.630

我认为下面的公式应该得到它。我没有对此进行测试，所以我可能会遗漏括号。当所有条目都为空时，问题可能来自除以零。在这种情况下，这会捕获并将除数设置为 1。

```
=FormatNumber(
   (
      (Code.NullSafeSplit(Fields!AvgLOSC1.Value, 0) * Code.NullSafeSplit(Fields!AvgLOSC1.Value, 1)) + 
      (Code.NullSafeSplit(Fields!AvgLOSC2.Value, 0) * Code.NullSafeSplit(Fields!AvgLOSC2.Value, 1)) + 
      (Code.NullSafeSplit(Fields!AvgLOSC3.Value, 0) * Code.NullSafeSplit(Fields!AvgLOSC3.Value, 1)) + 
      (Code.NullSafeSplit(Fields!AvgLOSC4.Value, 0) * Code.NullSafeSplit(Fields!AvgLOSC4.Value, 1)) + 
      (Code.NullSafeSplit(Fields!AvgLOSC5.Value, 0) * Code.NullSafeSplit(Fields!AvgLOSC5.Value, 1))
   )
/
   (
       IIF((
   CInt(Code.NullSafeSplit(Fields!AvgLOSC1.Value, 1)) + 
   CInt(Code.NullSafeSplit(Fields!AvgLOSC2.Value, 1)) + 
   CInt(Code.NullSafeSplit(Fields!AvgLOSC3.Value, 1)) + 
   CInt(Code.NullSafeSplit(Fields!AvgLOSC4.Value, 1)) + 
   CInt(Code.NullSafeSplit(Fields!AvgLOSC5.Value, 1))
      ) = 0,
      1,
      (
   CInt(Code.NullSafeSplit(Fields!AvgLOSC1.Value, 1)) + 
   CInt(Code.NullSafeSplit(Fields!AvgLOSC2.Value, 1)) + 
   CInt(Code.NullSafeSplit(Fields!AvgLOSC3.Value, 1)) + 
   CInt(Code.NullSafeSplit(Fields!AvgLOSC4.Value, 1)) + 
   CInt(Code.NullSafeSplit(Fields!AvgLOSC5.Value, 1))
      )
      )
, 0) 
```

# android - 使用什么 ContentProvider？对于最近的搜索建议和自定义建议

> ID：15909157
> 
> 赞同：1
> 
> 时间：2013-04-09T17:58:42.530
> 
> 标签：android, search, android-contentprovider

在 search.xml 文件中，我有

```
 android:searchSuggestAuthority="com.---.---.MyCustomSuggestionProvider" 
```

但是除非我弄错了，如果你想同时实现最近搜索和自定义搜索，你需要两个不同的内容提供者，那么你如何在你的配置文件中进行设置呢？

一个延伸`ContentProvider`，一个延伸`SearchRecentSuggestionsProvider`。这表明我需要两个不同的课程，这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:19:47.460

[`SearchRecentSuggestionsProvider`](http://developer.android.com/reference/android/content/SearchRecentSuggestionsProvider.html)实际上**是**一个`ContentProvider`，因为它扩展了`ContentProvider`。

您应该能够扩展您的类`SearchRecentSuggestionsProvider`并能够在这两种情况下使用它，而无需复制您的代码。

# c# - 通过控件循环清除 DropDownList

> ID：15909162
> 
> 赞同：0
> 
> 时间：2013-04-09T17:58:55.860
> 
> 标签：c#, asp.net

我正在尝试遍历面板中的每个控件并清除所有内容（如果它是 DropDownList）。

这是我所拥有的：

```
private void ClearOut()
{
    foreach (Control list in MainPanel.Controls)
    {
        if (list.ToString().Equals("System.Web.UI.WebControls.DropDownList"))
        {
            //Clear it out here
        }
    }
} 
```

这段代码确实找到了每个 DropDownList，但是一旦我到达那里，我就无法弄清楚如何清除它们。我不能使用像 selectedindex 或 items.clear() 这样的 DropDownList 的任何属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:00:52.147

```
using System.Linq;
using System.Web.UI.WebControls;

foreach (DropDownList list in MainPanel.Controls.OfType<DropDownList>())
{
    list.Items.Clear();
} 
```

或相同但手动：

```
foreach (Control c in MainPanel.Controls)
{
    DropDownList list = c as DropDownList;
    if (list != null)
    {
        list.Items.Clear();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:01:18.020

用这个：

```
if(list is DropDownList)
{
DropDownList DDL = list as DropDownList;
DDL.Items.Clear();
} 
```

# php - X-Cart 送货地址验证

> ID：15909164
> 
> 赞同：0
> 
> 时间：2013-04-09T17:59:02.877
> 
> 标签：php, javascript, jquery, x-cart

有谁知道在 X-Cart 中实现地址验证的最佳方法？验证应阻止用户继续订购流程，直到设置了有效的送货地址。也许我可以使用一项服务来执行此验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:03:10.363

我相信 UPS 提供这项服务... [http://www.ups.com/content/us/en/bussol/browse/addressvalidationstreetlevel.html](http://www.ups.com/content/us/en/bussol/browse/addressvalidationstreetlevel.html)

# file - Powershell - 将文件复制到共享

> ID：15909168
> 
> 赞同：3
> 
> 时间：2013-04-09T17:59:12.210
> 
> 标签：file, powershell, copying

这是我的第一篇文章，所以要温柔。

我开始使用 Powershell 并发现它非常直观，并且想要一些关于如何正确编写特定脚本而不是仅仅将文件从一个地方复制到另一个地方的建议/示例。

```
Files structure:

c:\backup\archive\

test_20130320_000711_backup.rar
test1_20130320_000711_backup.rar
test_20130320_001215_backup.rar
test1_20130320_001215_backup.rar
test_20130321_000811_backup.rar
test1_20130321_000811_backup.rar
test_20130321_001015_backup.rar
test1_20130321_001015_backup.rar

Unpacking directory:

c:\unpack_file\[contents of each rar goes here, one at a time]

destination:

E:\backup\archive\[date of file above e.g. 20130320 created]\[unpacked rar file contents here] 
```

我需要做的是按日期复制每个文件并解压每个文件，一次一个。然后将内容复制到目标文件夹并删除解压缩文件夹中的内容。呸！

我已经编写了一些基本的脚本，但这是一个真正的挑战，所以任何指针或示例都会令人惊叹！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:45:57.723

我不确定你为什么需要中间目录。这是一些帮助您入门的代码。

```
$rarExe = "C:\Program Files (x86)\7-Zip\7z.exe"
$srcDir = "C:\backup\archive"
$dstDir = "E:\backup\archive"

$rarFiles = gci $srcDir

foreach ($file in $rarFiles){
    $arcDate = $file.basename.Split("_")[1]
    New-Item "$dstDir\$arcDate" -type directory

    Write-Output "EXECUTING: $($startinfo.FileName) $($startinfo.Arguments)"
    $startinfo = new-object System.Diagnostics.ProcessStartInfo
    $startinfo.FileName = $rarExe
    $startinfo.Arguments = "e $($file.fullname) -o$dstDir\$arcDate"
    $process = [System.Diagnostics.Process]::Start($startinfo)

} 
```

# asp.net - 如何在asp页面中播放/暂停wav文件

> ID：15909172
> 
> 赞同：2
> 
> 时间：2013-04-09T17:59:24.690
> 
> 标签：asp.net, mov, audio-player

我需要在 asp.net 页面上播放和暂停一个 .wav 文件，但我不能使用 flash，它需要是可能存在的最轻量级的解决方案。我找到了如何播放声音，但我找不到阻止它的方法。

这是我的代码：（使用元素“embed”它在 IE 中不起作用，但使用“bgsound”它在 Chrome 中不起作用）

```
<html xmlns="http://www.w3.org/1999/xhtml">

<head runat="server">

    <title></title>

    <script type="text/javascript">

        var soundObject = null;

        function PlaySound() {

        if (soundObject != null) {

                document.body.removeChild(soundObject);
                soundObject = null;

            }

            soundObject = document.createElement("bgsound");

            soundObject.setAttribute("src", "C:/sound1.wav");

            soundObject.setAttribute("hidden", true);

            soundObject.setAttribute("autostart", true);

            document.body.appendChild(soundObject);
        }   

    </script>

</head>

<body>

    <form id="form1" runat="server">

        <input type = "button" onclick = "PlaySound()" value = "Play Sound" />

    </form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-14T05:07:19.007

您可以使用此命名空间“Microsoft.DirectX.AudioVideoPlayback”来执行此操作

这里，一个例子——http: [//msdn.microsoft.com/en-us/library/bb324497 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/bb324497(VS.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:14:08.293

这可以使用 asp.net [SoundPlayer 类](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx)

**页面：**

```
 <asp:Button ID="Button1" runat="server" Text="Play" />

    <asp:Button ID="Button2" runat="server" Text="Pause" /> 
```

HTML 标记，您需要在以前的版本中包含此标记，

```
 <object data="sound1.wav"></object> 
```

对于较新的 html5，您可以使用它：

```
<audio src="sound1.wav">
  <p>Your browser does not support the audio element.</p>
</audio> 
```

**文件后面的代码：**

```
protected void Button1_Click(object sender, EventArgs e)
    {
        SoundPlayer playthewavfile = new SoundPlayer(@"C:/sound1.wav");
        playthewavfile.Play();        
    }
protected void Button2_Click(object sender, EventArgs e)
    {
        SoundPlayer playthewavfile = new SoundPlayer(@"C:/sound1.wav");
        playthewavfile.Stop();        
    } 
```

**编辑：**

如果您想**纯粹使用 javascript 和 html**来执行此操作，请尝试以下操作：

我没有对此进行测试，因为自从 html5 出现以来，我对使用 embed 标记解析音频文件非常生疏，您可以尝试一下，让我知道它是否有效。

```
<HTML>
    <HEAD>
        <SCRIPT LANGUAGE="JavaScript">
            function play() {
                window.document.embeds[0].Play()
                window.document.embeds[1].Play()
            }
            function stop() {
                window.document.embeds[0].Stop()
                window.document.embeds[1].Stop()
            }
        </SCRIPT>
    </HEAD>
    <BODY>
    <EMBED SRC="sound1.wav" NAME="video" AUTOSTART="false">
        <EMBED SRC= "sound1.wav" AUTOSTART="false">
            <FORM>
                <INPUT TYPE="BUTTON" VALUE="Play" onClick="play()">
                <INPUT TYPE="BUTTON" VALUE="Pause" onClick="stop()">
            </FORM>
    </BODY>
</HTML> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T15:04:26.477

这不漂亮，但我设法终止了这样的声音。

```
function StopSound()
        {
             if (soundObject != null) {

                soundObject.setAttribute("src", "");
                soundObject = null;

            }
        } 
```

# c# - SaveChanges 在实体框架中没有做任何事情

> ID：15909174
> 
> 赞同：3
> 
> 时间：2013-04-09T17:59:33.847
> 
> 标签：c#, entity-framework

我有一个调用 EF 函数的 WCF。

当我从客户端调用该方法来插入用户时，什么也没有发生。

这是我正在调用的方法：

```
public void insertData(Users pUser)
{
    using (var context = new AMTEntitiesContainer())
    {
        var User = context.Users.Add(pUser);
        context.SaveChanges();
    }
} 
```

这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:02:57.190

我唯一看到错误的是不需要 var User。只需使用 context.Users.Add(pUser); 并保存更改。

另一种可能性是 AMTEntitiesContainer 不是正确的 DbContext。如果没有看到您的 AMTEntitiesContainer 类，则很难弄清楚这一点。

# windows - Windows 应用程序中使用的文件的工作目录

> ID：15909185
> 
> 赞同：1
> 
> 时间：2013-04-09T18:00:17.210
> 
> 标签：windows, search, directory, absolute-path

搜索文件时应用程序在哪里查找？它是在哪里创建的？总是指定绝对路径是不太现实的。例如，我尝试将要在 Visual Studio 2010 应用程序中使用的文本文件保存在项目解决方案的本地 bin 中，但总是出现运行时错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:28:04.137

它通常是调用它的文件夹。您可以使用以下方式找到它：http `_getcwd`: [//msdn.microsoft.com/en-us/library/sf98bd4y%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/sf98bd4y%28VS.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:28:22.047

如果您使用相对路径，则您提供的路径将与进程的工作目录相结合。

保持对 GUI 进程的工作目录的控制非常困难。这是因为 GUI 进程往往以许多不同的方式启动。更重要的是，文件对话框有改变工作目录的趋势。最后，工作目录在进程中的所有线程之间共享，并且可以被任何线程更改。有很多陷阱。

因此，在 GUI 过程中，我建议您永远不要使用相对路径。或者，如果您确实使用相对路径，则在使用它们之前将它们转换为绝对路径。并针对明确定义的根路径执行该转换。

除非您正在编写便携式应用程序，否则您不应期望能够保存到包含可执行文件的目录。在现代系统上，可执行文件通常位于只读目录中。

如果要保存用户设置，请将它们保存在用户配置文件中的适当位置。

另一方面，如果您想读取从未修改过的文件，那么将它们与可执行文件一起存储是合理的。但即使在这种情况下，也要使用完整的绝对路径打开文件。通过将包含可执行文件的目录与文件的相对路径相结合来创建该路径。

所以，总结一下，你说：

> 总是指定绝对路径是不太现实的。

但我不同意。我会反驳说，使用绝对路径通常是最好的选择。但是您不必对绝对路径进行硬编码。您可以而且应该在运行时创建它。

# php - 带有 php 表单的 iframe 在 IE 中不起作用

> ID：15909189
> 
> 赞同：1
> 
> 时间：2013-04-09T18:00:29.273
> 
> 标签：php, forms, internet-explorer, iframe

我更新了信息，以便您更好地理解：

当用户在 IE 中提交表单时，我有一个带有 PHP 表单的 iframe，它似乎没有发布数据。它适用于 Firefox 和 Chrome，但不适用于 IE 7、8 和 10。

发生的情况是，当我们在 IE、Firefox、Chrome 和 Safari 的服务器上测试 iframe php 表单时，它工作正常，但是当客户端将代码上传到他们的服务器并测试时，它在 IE 上对他们不起作用。奇怪的是我可以在他们的服务器上测试 iframe php 表单，它在所有使用 Windows 7 和 XP 的浏览器上都能正常工作。客户端在 Windows 7 和 XP 的 IE7、8、10 中测试 iframe php 代码。

还有一件重要的事情要知道。iframe html 页面仍然托管在我们的服务器上，因为客户端不在他们的服务器上使用 php。

这是 iframe 标记

```
<iframe id="iframe" frameborder="0" src="FullURL/reportBuilderForm.html"></iframe> 
```

这是 iframe 代码：

```
<!doctype html>
<!--[if IE 7]><html class="ie7" lang="en"><![endif]-->
<!--[if IE 8]><html class="ie8" lang="en"><![endif]-->
<!--[if gt IE 8]><!--><html lang="en"><!--<![endif]-->
<link rel="stylesheet" href="styles.css" type="text/css" media="screen" />
<head>
<meta charset="utf-8" />
<title>Website</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body id="reportForm">
<div class="row">
    <form  onsubmit="" name="report_form" id="report_form" action="generatePDF.php" method="POST" target="_blank">

    <div class="sixcol">
        <label class="blue">
            <input type="checkbox" name="leadership" id="leadership" class="noMargin"/>
            Leadership &mdash; Chairman's Messages</label>
        <br>
        <br>
        <label class="blue">
            <input type="checkbox" name="company" id="company" class="noMargin"/>
            Company</label>
        <br>
        <br>
        <label class="blue">
            <input type="checkbox" name="performance" id="performance" class="noMargin"/>
            Performance</label>
        <br>
        <br>
        <label class="blue">
            <input type="checkbox" name="solutions" id="solutions" class="noMargin"/>
            Solutions</label>
        <br>
        <br>
    </div>
    <div class="sixcol last">
        <label class="blue">
            <input type="checkbox" name="relationships" id="relationships" class="noMargin"/>
            Relationships</label>
        <br>
        <br>
        <label class="blue">
            <input type="checkbox" name="culture" id="culture" class="noMargin"/>
            Culture</label>
        <br>
        <br>
        <label class="blue">
            <input type="checkbox" name="responsibility" id="responsibility" class="noMargin"/>
            Responsibility</label>
        <br>
        <br>
        <label class="blue">
            <input type="checkbox" name="leadershipBoard" id="leadershipBoard" class="noMargin"/>
            Leadership &mdash; Board &amp; Sr. Management</label>
        <br>
        <br>
    </div>
    <div class="clear"></div>
    <hr />
    <input name="generateReportBtn" class="generateBtn" type="submit" tabindex="4" value="generate PDF" id="submit"/>
    </form>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:36:10.840

感谢您的评论，但我们最终做了一个不同的解决方案。我们决定在我们的服务器上托管带有 iframe 和 php 表单的页面。

# ios - iOS 格式指定类型 int 但参数类型为 int *

> ID：15909193
> 
> 赞同：0
> 
> 时间：2013-04-09T18:00:50.483
> 
> 标签：ios, objective-c

我有这样的方法：

```
-(void)processSomeNumeber:(int *)number
{
    NSLog(@"show me the number %d", number);
} 
```

但我收到了这个错误：

> “格式指定 int 类型，但参数的类型为 int *”

有谁知道为什么或如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T18:02:03.240

采用：

```
-(void)processSomeNumeber:(int )number
{
    NSLog(@"show me the number %d", number);   
} 
```

或者

```
-(void)processSomeNumeber:(int *)number
{
    NSLog(@"show me the number %d", *number);   
} 
```

# javascript - if 语句和弹出框

> ID：15909199
> 
> 赞同：0
> 
> 时间：2013-04-09T18:01:04.793
> 
> 标签：javascript, jquery, if-statement, popup

我有一个文本框。它的名字是电话号码。如果 len（输入值）=0，我想做一个弹出窗口。当我做一个标签它不起作用。（我在调试模式下查看）当我在另一个已经有效的 Jq 脚本中执行此操作时。它可以工作，但弹出窗口只停留几百万秒，所以我无能为力。我是编程新手，我还在学习。如果你帮助我，我会很高兴。谢谢。

```
<script type="text/javascript">
    $('#PhoneNumber').bind('keypress', function (e) {
        if (e.keyCode == 13) {
            var test = $('#PhoneNumber').val().length;
            if (test == 0) {
                alert('At Least');
                /*  $('a.login-window').one(function () {               
                    var loginBox = $(this).attr('href');
                    //Fade in the Popup and add close button
                    $(loginBox2).fadeIn(300);
                    //Set the center alignment padding + border
                    var popMargTop = ($(loginBox).height() + 24) / 2;
                    var popMargLeft = ($(loginBox).width() + 24) / 2;
                    $(loginBox).css({
                        'margin-top': -popMargTop,
                        'margin-left': -popMargLeft
                    });
                    // Add the mask to body
                    $('body').append('<div id="mask"></div>');
                    $('#mask').fadeIn(300);
                    return false;
                });

                // When clicking on the button close or the mask layer the popup closed
                $('a.close, #mask').live('click', function () {
                    $('#mask , .login-popup').fadeOut(300, function () {
                        $('#mask').remove();
                    });
                    return false;
                });*/    
            }
            else 
            {
                alert('At Least');
                $("#PhoneNumber").val("");
                $('#PhoneNumber').focus();
            }
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:26:38.647

始终将您的 jquery 代码放入：

```
$(document).ready(function() {
  //Your code 
}); 
```

这可以确保在将事件处理程序附加到元素时加载 DOM。

对我来说，看起来`return false`你的`one`回调函数在完成之前正在杀死fadeIn。

您可以将事件对象添加`e`为函数的参数，然后使用`e.stopPropagation()`and`e.preventDefault()`而不是`return false;`这样：

```
$('a.login-window').one(function (e) {      
    e.stopPropagation();
    e.preventDefault();
    //Your code   
}); 
```

# python - BeautifulSoup，简单的正则表达式问题

> ID：15909200
> 
> 赞同：3
> 
> 时间：2013-04-09T18:01:09.670
> 
> 标签：python, regex, python-2.7, beautifulsoup

我只是遇到了正则表达式的障碍，不知道为什么这不起作用。

这是 BeautifulSoup 文档所说的：

```
soup.find_all(class_=re.compile("itl"))
# [<p class="title"><b>The Dormouse's story</b></p>] 
```

这是我的html：

```
<a href="exam.com" title="Keeper: Jay" class="pos_text">Aouate</a></span><span class="pos_text pos3_l_4"> 
```

我正在尝试匹配`span`标签（最后一个位置）。

```
>>> if soup.find(class_=re.compile("pos_text pos3_l_\d{1}")):
        print "Yes"

# prints nothing - indicating there is no such pattern in the html 
```

所以，我只是在重复 BS4 文档，除了我的正则表达式不起作用。果然，如果我`\d{1}`用`4`（最初在 html 中）替换它就成功了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:19:27.943

在您的正则表达式中尝试“\\d”。它可能将“\d”解释为试图逃避“d”。

或者，原始字符串应该可以工作。只需在正则表达式前面放一个“r”，如下所示：

```
re.compile(r"pos_text pos3_l_\d{1}") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:19:54.330

我不完全确定，但这对我有用：

```
soup.find(attrs={'class':re.compile('pos_text pos3_l_\d{1}')}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T18:24:40.563

您匹配的不是一个类，而是一个特定顺序的特定类组合。

从[文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)中：

```
You can also search for the exact string value of the class attribute:

css_soup.find_all("p", class_="body strikeout")
# [<p class="body strikeout"></p>] But searching for variants of the string value won’t work:

css_soup.find_all("p", class_="strikeout body")
# [] 
```

因此，您应该对 post_text 进行第一次匹配，然后在结果中尝试与该搜索匹配中的正则表达式匹配

# jsf - 运行jsf + richfaces项目时出现classnotfound异常

> ID：15909206
> 
> 赞同：1
> 
> 时间：2013-04-09T18:01:22.343
> 
> 标签：jsf, tomcat, richfaces, classnotfoundexception

我有一个使用richfaces和jsf的eclipse项目。它绑定到服务器（apache tomcat 7.0）。当我运行时，我得到一个找不到类的错误。

这是我的图书馆：

```
commons-beanutils-1.8.3.jar
commons-codec-1.3.jar
commons-collections-3.2.jar
commons-digester-1.8.jar
commons-discovery-0.4.jar
commons-logging-1.1.1.jar
cssparser-0.9.7.jar
dom4j-1.6.1.jar
guava-14.0.1.jar
javax.servlet.jsp.jstl-1.2.1.jar
javax.servlet.jsp.jstl-api-1.2.1.jar
jcl-over-slf4j-1.6.1.jar
jstl-1.2.jar
myfaces-api-2.1.10.jar
myfaces-bundle-2.1.10.jar
myfaces-impl-2.1.10.jar
mysql-connector-java-5.1.22-bin.jar
org.springframework.binding-2.0.5.RELEASE.jar
oro-2.0.8.jar
richfaces-components-api-4.3.1.Final.jar
richfaces-components-ui-4.3.1.Final.jar
richfaces-core-api-4.3.1.Final.jar
richfaces-core-impl-4.3.1.Final.jar
sac-1.3.jar
slf4j-api-1.7.2.jar
tomahawk20-1.1.14.jar
xml-apis-1.0.b2.jar
xmlParserAPIs-2.0.2.jar 
```

我相信我应该拥有所有的图书馆......

我收到以下错误：

```
SEVERE: Error configuring application listener of class org.apache.myfaces.webapp.StartupServletContextListener
java.lang.ClassNotFoundException: org.apache.myfaces.webapp.StartupServletContextListener
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:527)
at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:509)
at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:137)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4823)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5381)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

还。我尝试重新创建该项目，但无济于事。

# css - CSS3 Card Flip 背面在变换结束时消失

> ID：15909208
> 
> 赞同：7
> 
> 时间：2013-04-09T18:01:28.780
> 
> 标签：css, css-transitions, css-transforms

我得到了一组简单的卡片，我需要在点击时翻转它们。问题是，当变换完成后，背面（蓝色面）消失了。它会在动画回到正面时出现。

我知道这可能是一个简单的解决方案和一些简单的东西，但它可能不是。我可以在 Chrome (Canary) 和 Safari 中复制结果。

我已经尝试了一些具有背面可见性的东西，使其不会消失，但是我可以使用 jQuery 侦听器单击它并将其翻转回前面。

这是小提琴：http: [//jsfiddle.net/9gPfz/1/](http://jsfiddle.net/9gPfz/1/)

这是 CSS：`.equipment-card-holder{ -webkit-perspective: 1000; }

.设备卡{高度：250px；宽度：222px；背景：#fff; 盒子阴影：0 1px 5px rgba(0,0,0,0.9); 向左飘浮; 边距：0 9px 30px；

```
-webkit-transform-style: preserve-3d;

-webkit-transition: all 1s ease-in-out;
transition: all 1s ease-in-out; 
}

.equipment-card .card-face{
    -webkit-backface-visibility: hidden;
    position: absolute;
    width: 100%;
    height: 100%;
    }

.equipment-card .card-front{
    -webkit-transform: rotateY(0deg);
    }

.equipment-card .card-back{
    -webkit-transform: rotateY(180deg);
    background-color: lightBlue;
    }

.equipment-card.flipped{
    -webkit-transform: rotateY(180deg);
    box-shadow: 0 15px 50px rgba(0,0,0,0.2);

    }

.span12{

width: 960px;
}
}` 
```

对于我正在使用的供应商前缀，您将需要一个基于 webkit 的浏览器。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-09T18:37:51.347

好的，所以我发现了问题，是的，这很简单。问题是我在卡片上设置了背景颜色（相对于卡片的两面）。我希望这个答案对将来可能在谷歌上搜索这个问题的人有用。

编辑：更准确的答案

css:8 去除卡片背景

```
background: #fff; 
```

只需将背景放在脸上

可以查看同一个小提琴[http://jsfiddle.net/9gPfz/2/的更新](http://jsfiddle.net/9gPfz/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-19T03:01:26.023

我正在做类似的事情，但接受的答案对我不起作用。所以我尝试了其他一些技巧。

发生的事情是“后退”类的背景以某种方式被“翻转”类的背景覆盖。

可以通过`background: transparent;`在翻转的类上添加 a 来纠正它。

请注意，这不是一个完美的解决方案。只是一种解决方法。

```
.equipment-card.flipped{
    -webkit-transform: rotateY(180deg);
    box-shadow: 0 15px 50px rgba(0,0,0,0.2);
    background: transparent;
} 
```

在此处查看更新的小提琴：http: [//jsfiddle.net/9gPfz/28/](http://jsfiddle.net/9gPfz/28/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-21T10:55:04.997

现有的答案都不适合我。我在卡片正面有一个子元素，它在翻转时消失了。

```
<div class="front">
    <div class="mytext">
        {{data.text}}
    </div>
</div> 
```

要修复它，我还必须将 transform 属性添加到孩子。

```
.front {
transform: rotateY(180deg);
display: flex;
justify-content: center;
align-items: center;
-webkit-backface-visibility:hidden;
backface-visibility:hidden;
.mytext {
    transform: rotateY(0deg);
    z-index: 1; 
```

}

# cloud-foundry - 安装 Cloud Foundry sts 和 eclipse 集成时的问题

> ID：15909210
> 
> 赞同：1
> 
> 时间：2013-04-09T18:01:32.770
> 
> 标签：cloud-foundry

我尝试在 STS 和 Eclipse 中完全按照说明安装 Cloud Foundry 集成扩展，但在两种安装中都出现了“MD5 哈希与预期不符”的问题。

对于 STS (3.2.0)，我做了 1\. 启动 STS，打开仪表板，单击扩展选项卡 2\. 在服务器和云下，选中“Cloud Foundry Integration for Eclipse”（这是唯一可用的复选框）。3.点击“安装”然后我得到：

收集要安装的项目时发生错误会话上下文是：（profile=DefaultProfile，phase=org.eclipse.equinox.internal.p2.engine.phases.Collect，operand=，action=）。下载工件时出现问题：org.eclipse.update.feature,org.cloudfoundry.ide.eclipse.server,1.4.0.201302222117-RELEASE。MD5 哈希值不如预期。预期：e693ee5b7151c7f0117230da1d180e8c 并找到 dfa4de929d56da0a5fefd3c1038cd839。

对于 Eclipse (Juno) 1\. 选择帮助 -> Eclipse Marketplace 2\. 在查找框中键入“cloud foundry”并单击“开始” 3\. 单击“Cloud Foundry Integration for Eclipse”的安装 4\. 确认功能“Cloud Foundry Integration for Eclipse” 5\. 单击完成然后出现此错误：

收集要安装的项目时发生错误会话上下文是：（profile=epp.package.jee，phase=org.eclipse.equinox.internal.p2.engine.phases.Collect，operand=，action=）。下载工件时出现问题：org.eclipse.update.feature,org.cloudfoundry.ide.eclipse.server, 1.4.0.201302222117-RELEASE。MD5 哈希值不如预期。预期：e693ee5b7151c7f0117230da1d180e8c 并找到 9370ec785777f7c2bb1f6982b68df921。

非常感谢你的帮助！！！

# bash - 使用 AWK 进行验证

> ID：15909213
> 
> 赞同：1
> 
> 时间：2013-04-09T18:01:36.287
> 
> 标签：bash, validation, unix, awk

```
a=1

echo -n "Enter book id: "; read book_id;
while [ $a -eq 1 ]
do
a=$(awk '{ if($3 == "$book_id") print 1; else print 0}' exercise1_data.txt)
echo $a
if [ $a -eq 1 ]; then
echo -n "Please enter unique book id: "; read book_id
fi
done 
```

我正在尝试检查用户输入的图书 ID 是否唯一。如果有任何“book_id”实例，我正在做的是检查文件“exercise1_data.txt”。将执行 while 循环，直到用户输入唯一的书本 ID。

我收到一个错误`Too many arguments`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:06:17.017

首先修复awk：

您需要将 shell 变量传递给`awk`使用该`-v`选项：

```
awk -v b_id="$book_id" '$3==b_id{print 1;exit}END{print 0}' exercise1_data.txt 
```

另外，如果您`$3==b_id`应该找到匹配项。仅当我们到达文件末尾时（未找到匹配项）。`print 1``exit``print 0`

* * *

其次是脚本：

```
$ cat file
book_1 orielly 100
book_2 wiley 101 
```

脚本：

```
#!/bin/bash

a=1

while [ "$a" -eq 1 ]; do
    echo -n "Please enter unique book id: "
    read book_id
    let a=$(awk -v b_id="$book_id" '$3==b_id{print 1;exit}END{print 0}' file)
    echo "$a"
done 
```

演示：

```
$ bash script.sh
Please enter unique book id: 100
1
Please enter unique book id: 101 
1
Please enter unique book id: 102
0 
```

笔记：

*   总是引用你的 shell 变量。

*   您在书籍文件中使用空格作为字段分隔符，这将不灵活，即书籍标题、作者等都有空格。

# nlp - CoreNLP 和 stanford 依赖解析器的不同 xsubj 依赖输出

> ID：15909216
> 
> 赞同：0
> 
> 时间：2013-04-09T18:01:49.570
> 
> 标签：nlp, stanford-nlp

我正在使用最新的 CoreNLP 1.3.5 。对于 xsubj 依赖“汤姆喜欢吃鱼”的例句，我没有得到依赖 xsubj(eat, Tom)。虽然我得到了一个依赖 xcomp（比如，吃）。

但是我可以在最新的 stanforddependecy parser 2.0.5 输出中看到同一句话的依赖 xsubj。我尝试将解析器、semgraph 和 Trees 的一些类从 stanford parser jar 复制到 coreNLP jar 中。但我仍然无法得到这个输出。谁能指导我，我该如何确定这种关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:09:14.080

两者都使用相同的模型吗？CoreNLP 附带了几个模型（用不同的语料库训练），尝试检查它们。

# android - onBind() 永远不会在服务中调用

> ID：15909217
> 
> 赞同：9
> 
> 时间：2013-04-09T18:01:58.660
> 
> 标签：android, service, binding

我正在编写一个带有绑定服务的基于服务的应用程序，并且该服务的 onBind() 方法似乎从未被调用（使用 Toasts 和 Logs 测试它）。

服务：

```
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Binder;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;
import com.gmail.zack.yovel.FlickAround.MyActivity;
import com.gmail.zack.yovel.FlickAround.R;
import org.json.JSONArray;
import org.json.JSONObject;

import java.util.ArrayList;

/**
 * Created with IntelliJ IDEA.
 * User: Ziky
 * Date: 09/04/13
 * Time: 19:06
 * To change this template use File | Settings | File Templates.
 */
public class UpdateService extends Service implements LocationListener, UpdatePhotosTask.OnHttpResponseListener {
    private final static String API_KEY = "5255c7b02750c0fa4b15bd8ad4ec1fb7";
    private final static String GET_PHOTOS_FOR_LOCATION_SCHEMA = "http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=" + API_KEY + "&lat=%d&lon=%d&format=json&nojsoncallback=1";
    private static final String KEY_PHOTOS = "photos";
    private static final String KEY_PHOTO = "photo";
    private int NOTIFICATION = R.string.update_service_started;
    private NotificationManager mNManager;
    private LocationManager mLManager;
    private String mProvider;
    private Location mLocation;
    private IBinder mBinder = new LocalBinder();
    private UpdatePhotosTask task;

    @Override
    public IBinder onBind(Intent intent) {
        Toast.makeText(this, "UpdateService.onBind()", Toast.LENGTH_LONG).show();
        Log.i("test", "UpdateService.onBind()");
        mLManager.requestLocationUpdates(mProvider, 0, 1000, this);
        return mBinder;
    }

    @Override
    public void onCreate() {
        mNManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        showNotification();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.i("LocalService", "Received start id " + startId + ": " + intent);
        mLManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        mProvider = mLManager.getBestProvider(criteria, false);
        mLocation = mLManager.getLastKnownLocation(mProvider);
        return START_STICKY;
    }

    @Override
    public void onDestroy() {
        mNManager.cancel(NOTIFICATION);
        Toast.makeText(this, R.string.update_service_stoped, Toast.LENGTH_SHORT).show();
    }

    private void showNotification() {
        CharSequence text = getText(R.string.update_service_active);
        Notification notification = new Notification(R.drawable.refresh, text, System.currentTimeMillis());
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, new Intent(this, MyActivity.class), 0);
        notification.setLatestEventInfo(this, getText(R.string.update_service_label), text, contentIntent);
        mNManager.notify(NOTIFICATION, notification);
    }

    @Override
    public void onLocationChanged(Location location) {
        beginUpdate(location);
    }

    private void beginUpdate(Location location) {
        Toast.makeText(this, "beginning update", Toast.LENGTH_LONG).show();
        String url = buildUrl(location);
        task = new UpdatePhotosTask(this);
        task.execute(url);
    }

    private String buildUrl(Location location) {
        return String.format(GET_PHOTOS_FOR_LOCATION_SCHEMA, location.getLatitude(), location.getLongitude());
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onHttpResponse(ArrayList<String> responses) {
        if (responses.size() > 0) {
            String response = responses.get(0);
            try {
                JSONObject jsonObject = new JSONObject(response);
                jsonObject = jsonObject.getJSONObject(KEY_PHOTOS);
                JSONArray jsonArray = jsonObject.getJSONArray(KEY_PHOTO);
                ArrayList<String> photos = new ArrayList<String>();
                for (int i = 0, length = jsonArray.length(); i < length; i++) {
                    jsonObject = jsonArray.getJSONObject(i);
                    Log.i("photo info", jsonObject.toString());
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    public class LocalBinder extends Binder {
        public UpdateService getService() {
            return UpdateService.this;
        }
    }
} 
```

异步任务：

```
import android.os.AsyncTask;
import android.util.Log;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

/**
 * Created with IntelliJ IDEA.
 * User: Ziky
 * Date: 09/04/13
 * Time: 07:38
 * To change this template use File | Settings | File Templates.
 */
public class UpdatePhotosTask extends AsyncTask<String, Void, ArrayList<String>> {

    private OnHttpResponseListener listener;

    public UpdatePhotosTask(OnHttpResponseListener listener) {
        this.listener = listener;
    }

    @Override
    protected ArrayList<String> doInBackground(String... urls) {
        ArrayList<String> responses = new ArrayList<String>();
        for (String url : urls) {
            StringBuilder response = new StringBuilder();
            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            try {
                HttpResponse execute = client.execute(httpGet);
                StatusLine statusLine = execute.getStatusLine();
                int statusCode = statusLine.getStatusCode();
                if (statusCode == 200) {
                    InputStream content = execute.getEntity().getContent();
                    BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
                    String s = "";
                    while ((s = buffer.readLine()) != null) {
                        response.append(s);
                    }
                    responses.add(response.toString());
                } else {
                    Log.e(this.getClass().toString(), "Failed to download photo list");
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return responses;
    }

    @Override
    protected void onPostExecute(ArrayList<String> responses) {
        listener.onHttpResponse(responses);
    }

    public interface OnHttpResponseListener {
        public void onHttpResponse(ArrayList<String> responses);
    }
} 
```

活动：

```
import android.app.Activity;
import android.content.ComponentName;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.IBinder;
import android.os.StrictMode;
import android.widget.Toast;
import com.gmail.zack.yovel.FlickAround.background.UpdateService;

public class MyActivity extends Activity {
    private UpdateService mUpdateService;
    private ServiceConnection mConnection = new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            mUpdateService = ((UpdateService.LocalBinder) service).getService();
            Toast.makeText(MyActivity.this, R.string.update_service_connected, Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {
            mUpdateService = null;
            Toast.makeText(MyActivity.this, R.string.local_service_disconnected, Toast.LENGTH_SHORT).show();
        }
    };
    private boolean mIsBound;

    void doBindService() {
        Toast.makeText(this, "MyActivity.doBindService()", Toast.LENGTH_LONG).show();
        bindService(new Intent(this, UpdateService.class), mConnection, BIND_AUTO_CREATE);
        mIsBound = true;
    }

    void doUnbindService() {
        if (mIsBound) {
            unbindService(mConnection);
            mIsBound = false;
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        doUnbindService();
    }

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Activate StrictMode
        StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
                .detectAll().penaltyLog().penaltyDeath().build());
        StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder().detectAll()
                .penaltyLog().penaltyDeath().build());
    }

    @Override
    protected void onStart() {
        super.onStart();
        doBindService();
    }
} 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T18:17:13.607

可能最常见的无提示绑定失败的原因是清单中没有列出服务。这不会引发异常，因此您的应用程序不会崩溃，但 LogCat 中应该有一条消息（警告，IIRC）指出您的问题。

# php - 使用屏蔽 URL 预填充表单

> ID：15909223
> 
> 赞同：1
> 
> 时间：2013-04-09T18:02:18.060
> 
> 标签：php, javascript, forms, url

有没有办法使用 PHP 或 javascript 预填充带有掩码 URL 的表单？

在 index.php 中，我使用了 base64_encode 函数将 firstname=peter&lastname=pan 屏蔽到一个变量并回显这个

example.php?randomstring

然后在 example.php 表单文件中，我使用 base64_decode 来解码随机字符串，但我只得到 firstname=peter&lastname=pan，并且无法将其用作 $_GET[firstname] 和 $_GET[lastname] 变量。那么有没有办法使用随机字符串变量在表单上预先填充它？

或任何其他简单的方法来预填充带有掩码 URL 的表单？

谢谢，

拍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:10:11.633

请检查：

```
$query = "firstname=peter&lastname=pan";
$encodedQuery = base64_encode($query);

parse_str(base64_decode($encodedQuery), $result);

$_GET = array_merge($_GET, $result);
print_r($_GET); 
```

然后你可以像往常一样填充。

# validation - 使 p:messages 的行为像 p:growl （等待几秒钟并隐藏）

> ID：15909224
> 
> 赞同：1
> 
> 时间：2013-04-09T18:02:18.877
> 
> 标签：validation, primefaces, components, messages

我`p:messages`的标题中有一个，`p:dialog` 我想在几秒钟后隐藏它（比如 的行为`p:growl`），它是：

```
<p:messages id="messages" globalOnly="true"  showDetail="true" /> 
```

可能吗

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:53:32.873

您可以使用 javascript，创建 javascript 函数并调用“oncomplete”函数，例如：

零件：

```
 <p:commandButton oncomplete="testfm()"  /> 
```

javascript:

```
function testfm(){
                window.setTimeout(function testfm1(){
                    $(".ui-message-error").hide();
                },5000);
            } 
```

# java - Java 菜单栏不出现

> ID：15909229
> 
> 赞同：0
> 
> 时间：2013-04-09T18:02:29.597
> 
> 标签：java, jmenubar

嘿伙计们，我正在尝试从其他班级为我的 JFrame 制作一个菜单栏，但它只是拒绝工作！我在死胡同...

我真的不知道出了什么问题，我尝试了其他一些方法，但它没有奏效......

```
The code is this :

  public Engine(int width, int height) {
    System.out.println("TEST ENGINE CLAASS");
    setTitle("Battleship Board - Place Your Ships");
    setSize(width, height);
    setLocation(624, 373);
    setDefaultCloseOperation(3);
    setResizable(false);
    setVisible(true);
    setLayout(null);

    System.out.println("TEST ENGINE clas2");
    Menu menu = new Menu(this);
    super.setJMenuBar(menu.getMenuBar());

    setDefaultCloseOperation(3);
} 
```

**在 Menu.class 处：**

```
public class Menu implements ActionListener {
    private Engine cc;
    private JMenuBar menuBar;
    private JMenu game;
    private JMenu help;
    private JMenuItem aboutItem;
    private JMenuItem quitItem;
    private JMenuItem newGameItem;

    public Menu (Engine cc) {
        System.out.println("testing menu class");
        this.cc = cc;
        this.menuBar = new JMenuBar();
        this.game = new JMenu("Game");
        this.help = new JMenu("Help");

        makeGameMenu();
        makeAboutMenu();

    }

   private void makeGameMenu() {
        System.out.println("Making game menu");
        this.newGameItem = new JMenuItem("New Game");
        this.game.add(this.newGameItem);
        this.newGameItem.addActionListener(this);
        this.game.addSeparator();

        this.quitItem.addActionListener(this);

        this.game.add(this.quitItem);
         this.menuBar.add(this.game);

    }

   private void makeAboutMenu() {
        this.aboutItem = new JMenuItem("About");
        this.help.add(aboutItem);
        this.menuBar.add(this.help);

    }

   public void actionPerformed(ActionEvent event) {
       JMenuItem source = (JMenuItem)event.getSource();

       //If user clicks new game then:
       if (source == this.newGameItem) {
           this.cc.newGame();
       }
       //If user clicks Quit then:
       else if (source == this.quitItem) {
           System.exit(0);
       }
       //If user clicks Help - About then:
       else if (source == this.aboutItem) {
           JOptionPane.showMessageDialog(null, "This Battleship Game was created by Manos Kontakis for Object Oriented Programming Lab", "About", 1);
       }
   }

   public JMenuBar getMenuBar()
  {
    return this.menuBar;
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:12:00.750

`JMenuItem` `quitItem`尚未在任何地方初始化，因此在可以将其添加到之前会引发`JMenuBar`异常`JFrame`：

```
quitItem = new JMenuItem("Quit Game");
quitItem.addActionListener(...); 
```

旁白：避免使用绝对定位（`null`布局）并始终使用布局管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:11:26.200

我认为您必须从 JMenuBar 扩展并将组件添加到“this”。

# c# - 从 ncftpput.exe 重定向标准/错误输出不稳定

> ID：15909239
> 
> 赞同：0
> 
> 时间：2013-04-09T18:02:59.300
> 
> 标签：c#, process, stream, redirectstandardoutput

我正在尝试从 ncftpput.exe 获取输出流并能够异步操作流。ncftpput.exe 不会逐行打印它的流，而是用新信息不断更新同一行（这可能是相关的）。它间歇性地工作 - 有时我会得到信息，有时我不会。

本质上，有没有一种方法可以让我经常刷新它的线路，以便以更安全和更常规的方式重定向？

这是我到目前为止所得到的（我已经对其进行了注释，消除了不相关的无关信息，但这是本质）：

```
class Program
{
    static int main()
    {
        internal Process m_Tool { get; set; }
        internal ProcessStartInfo m_StartInfo { get; set; }
        internal static string m_StandardData { get; set; }
        internal static string m_ErrorData { get; set; }

        m_Tool = new Process();
        m_StartInfo = new ProcessStartInfo();
        m_StartInfo.FileName = @"C:\utils\ncftpput.exe";
        m_StartInfo.UseShellExecute = false;
        m_StartInfo.RedirectStandardOutput = true;
        m_StartInfo.RedirectStandardError = true;
        m_StandardData = "";
        m_ErrorData = "";
        m_StartInfo.Arguments = /* Various starting args */
        m_Tool.StartInfo = m_StartInfo;
        m_Tool.Start();

        string standardLine;
        string errorLine;

        try
        {
            m_Tool.OutputDataReceived += ProcessStandardDataHandler;
            m_Tool.ErrorDataReceived += ProcessErrorDataHandler;

            m_Tool.BeginErrorReadLine();
            m_Tool.BeginOutputReadLine();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
        while (!m_Tool.HasExited)
        {
            System.Threading.Thread.Sleep(5000);
            standardLine = m_StandardData;
            errorLine = m_ErrorData;
        } 
    }
    private static void ProcessErrorDataHandler(object sendingProcess, DataReceivedEventArgs outLine)
    {

        if (!String.IsNullOrEmpty(outLine.Data))
        {
            // Add the text to the collected output.
            m_ErrorData = outLine.Data.ToString();
            m_DataReceived = true;

        }
    }

    private static void ProcessStandardDataHandler(object sendingProcess, DataReceivedEventArgs outLine)
    {

        if (!String.IsNullOrEmpty(outLine.Data))
        {
            // Add the text to the collected output.
            m_StandardData = outLine.Data.ToString();
        }
    }
} 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T10:53:15.273

最后我发现由于 ncftpput.exe 打印到控制台的方式，从重定向的输出中获取足够的信息是不可能的。所以我决定编写自己的 FTP 应用程序并使用它！这是一个比 ncftpput.exe 更简单的应用程序，但它可以满足我的需要。我使用了标准的 .NET 库，没什么特别的。

# java - 关闭 AbstractJmsListeningContainer 的最佳方法？

> ID：15909240
> 
> 赞同：2
> 
> 时间：2013-04-09T18:03:02.250
> 
> 标签：java, spring, queue, activemq

我读了[http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jms/listener/AbstractJmsListeningContainer.html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jms/listener/AbstractJmsListeningContainer.html)但我仍然不明白 destroy() 和 shutdown() 和我不明白 stop() 的作用。我测试了 stop() 并且容器仍在运行。有人可以解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:14:05.120

根据来源[https://src.springframework.org/svn/spring-maintenance/trunk/src/org/springframework/jms/listener/AbstractJmsListeningContainer.java](https://src.springframework.org/svn/spring-maintenance/trunk/src/org/springframework/jms/listener/AbstractJmsListeningContainer.java)

*   destroy() 和 shutdown() 做同样的事情（destroy() 正在调用 shutdown()）：必要时停止共享连接并关闭调用程序。
*   stop() ：仅停止共享连接。

所以最好的方法是调用shutdown（或destroy）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-25T04:25:28.197

关闭是一个阻塞调用。我相信停止是更好的选择

# java - 创建一个参数是类和通用 ArrayList 的方法

> ID：15909243
> 
> 赞同：1
> 
> 时间：2013-04-09T18:03:06.850
> 
> 标签：java, class, object, methods, arraylist

在我的程序中，我复制并粘贴了代码（显然是不允许的），因为我还没有弄清楚如何将我想要的参数传递给这个方法：

```
public String collectionToFormattedString() {
    String combined = "";
    for (Book b : LibObj.books) {
        combined =  combined + b.toString() + "<br />";
    }
    combined = "<HTML>" + combined +"</HTML>";
    return combined;
} 
```

我想传递参数来执行以下操作：

```
public String collectionToFormattedString(Object? XYZ, ArrayList ABC) {
    String combined = "";
    for (XYZ b : ABC) {
        combined =  combined + b.toString() + "<br />";
    }
    combined = "<HTML>" + combined +"</HTML>";
    return combined;
} 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T18:04:35.027

你可以这样做：

```
public <T> String collectionToFormattedString(T XYZ, List<T> ABC) {
    String combined = "";
    for (T b : ABC) {
        combined =  combined + b.toString() + "<br />";
    }
    combined = "<HTML>" + combined +"</HTML>";
    return combined;
} 
```

**编辑**

我刚刚意识到您甚至没有使用第一个参数，并且正如@rgettman 指出的那样，您没有使用任何特定于 的操作`T`，因此您可以将其简化为：

```
public String collectionToFormattedString(final List<?> list) {
    StringBuilder combined = new StringBuilder("<HTML>");
    for (Object elem : list) {
        combined.append(elem.toString()).append("<br />");
    }
    combined.append("</HTML>");
    return combined.toString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:34:49.333

```
public <T> String collectionToFormattedString(List<Book> XYZ) 
{
    StringBuilder combined = new StringBuilder();
    combined.Append("<HTML>");
    foreach (Book b in XYZ)
    {
        combined.Append(b.ToString() + "<br />");
    }
    combined.Append("</HTML>");

    return combined;
} 
```

从外观上看，您只需要制作一个书籍集合，然后通过该集合。如果您不喜欢列表，则可以使用带有增量器的 for 循环来使用数组。我喜欢字符串生成器，可以让你用它做一些花哨的事情，但是只需将一个字符串和 '+' 加在一起也可以。祝你好运。

编辑：很抱歉这个帖子，当我在打字过程中被拉离办公桌时得到了回答。

# mysql - MySQL插入和更新触发器问题

> ID：15909245
> 
> 赞同：0
> 
> 时间：2013-04-09T18:03:07.893
> 
> 标签：mysql, triggers

我试图通过分别捕获插入和更新的用户 ID 和时间戳来实现行级审计。但是由于某种原因，即使更新也会触发插入触发器，并且每次都会更新两个 insert_* 列（对于更新也是如此）。请帮忙。

桌子

```
create table test
(id varchar(30) primary key,
insert_id varchar(30),
insert_timestamp timestamp, 
update_id varchar(30), 
update_timestamp timestamp); 
```

BEFORE INSERT 触发器

```
 DELIMITER //
    create trigger ins_test 
    before insert on test 
    for each row 
    Begin
    set new.insert_id = session_user();
    set new.insert_timestamp = now();
    End;
    // 
```

更新前触发器

```
 DELIMITER //
    create trigger upd_test 
    before update on test 
    for each row 
    Begin
    set new.update_id = session_user();
    set new.update_timestamp = now();
    End;
    // 
```

-Ganesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:19:10.333

我在 SQL Fiddle 的 MySQL 5.5.30 中尝试了您的代码，并且触发器正常工作。

如果您不希望它们在插入时默认为 current_timestamp，则应将时间戳列明确定义为 NULL：

```
create table test
(
  id varchar(30) primary key,
  insert_id varchar(30) null,
  insert_timestamp timestamp null, 
  update_id varchar(30) null, 
  update_timestamp timestamp null
); 
```

试试这个[SQL Fiddle](http://sqlfiddle.com/#!2/c0eda/1)看看你的触发器是否正常工作。我在每个语句之间添加了 1 秒的睡眠时间，这样您就可以知道 insert_timestamp 在更新时不会改变。

# sql - 具有最大日期和次大日期的费用代码的 SQL 选择语句

> ID：15909250
> 
> 赞同：0
> 
> 时间：2013-04-09T18:03:18.213
> 
> 标签：sql, sql-server, subquery, max, aggregate

我正在尝试做的非常简单的查询。

我正在尝试选择具有两个日期的收费代码：

1) 最近/MAX 生效日期和 2) 表格中最近/MAX 日期之前的日期。

收费代码在表格中多次列出，并有各种对应的生效日期。有的收费代码列出一次，只有一个生效日期，而另一些收费代码列出了 8 次，有 8 个生效日期。

这是我正在尝试做的事情：

```
select 
         BP.[mnemonic] [Charge Code]
        ,MAX (BP.[std_effective_date]) [Max date] 
        ,BP2.[Date Prior to Max]

from
    [TABLE1] BP
    left outer  join
    (select distinct [mnemonic], MAX ([std_effective_date]) [Max Date] 
         from 
         [TABLE1] 
    where [std_effective_date] < BP.[std_effective_date] group by [mnemonic]) BP2
    ON BP.[mnemonic] = BP2.[mnemonic]  

where    
         BP.[mnemonic] IN ('38066','38073','38080')
         group by BP.[mnemonic] 
```

我知道我无法在联接的子查询中引用外部查询中的表（即使它是同一张表），但我将如何做类似的事情？或者你会如何建议获得第二个最大日期？

不幸的是，表中没有行号。

请帮忙。谢谢。

样本结果

费用代码 最大日期 最大日期之前的日期

38066 2013-02-01 2013-02-01

38073 2013-02-01 2013-02-01

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:14:17.590

```
SELECT t1.mnemonic
    , MAX(t1.std_effective_date) current
    , MAX(t2.std_effective_date) previous
FROM tbl1 t1
LEFT JOIN tb1 t2 ON t2.mnemonic = t1.mnemonic
                AND t2.std_effective_date < t1.std_effective_date
WHERE t1.mnemonic IN ('38066','38073','38080')
GROUP BY t1.mnemonic 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:16:20.270

假设 SQL Server（您的问题的语法似乎您正在使用它），您可以使用`OUTER APPLY`：

```
SELECT  A.[mnemonic] [Charge Code], 
        A.[Max date], 
        B.[std_effective_date] [Date Prior to Max]
FROM (  SELECT  [mnemonic],
                MAX([std_effective_date]) [Max date] 
        FROM TABLE1
        GROUP BY [mnemonic]) A
OUTER APPLY (SELECT TOP 1 [std_effective_date]
             FROM TABLE1
             WHERE [mnemonic] = A.[mnemonic]
             AND [std_effective_date] < A.[Max date]
             ORDER BY [std_effective_date] DESC) B 
```

[](http://sqlfiddle.com/#!3/d866f/1)**这是一个带有演示的[**sqlfiddle 。**](http://sqlfiddle.com/#!3/d866f/1)**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:16:55.207

试试这个

```
 Select b.mnemonic ChargeCode,
    b.std_effective_date Maxdate,
    b.DatePriortoMax
 from TABLE1 b
 Where std_effective_date =
     (Select Max(std_effective_date) From Table1
      Where mnemonic = b.mnemonic) 
  Or std_effective_date =
     (Select Max(std_effective_date) From Table1
      Where mnemonic = b.mnemonic
         And std_effective_date < b.std_effective_date) 
```**

# jquery - 将标签添加到表单字段 jquery

> ID：15909252
> 
> 赞同：0
> 
> 时间：2013-04-09T18:03:18.563
> 
> 标签：jquery, tag-it

我想做的是使用 tagit 插件添加无序列表元素。这工作如下面的代码所示。添加列表元素后，我想获取它们的值并将它们添加到提交时以逗号分隔的列表中的表单字段中。

列出的 jquery 用于我正在使用的 tagit 脚本，但不应影响列表附加部分。

这是我到目前为止所拥有的：

```
<script type="text/javascript">
        $(document).ready(function() {
            $("#myTags").tagit();
        });
        </script>

        <ul id="myTags">
            <!-- Existing list items will be pre-added to the tags -->
            <li>Tag1</li>
            <li>Tag2</li>
        </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:18:36.297

好吧...我想通了。我所做的是这样的：

```
<script type="text/javascript">
        $(document).ready(function() {
                $("#myTags").tagit();
            $('#submit_button').click(function() {
                var optionTexts = [];
                    $("ul li").each(function() { optionTexts.push($(this).text()) });
                var taglist = '' + optionTexts.join(', ') + '';
                $('#field1').val(taglist);
                $('#form1').submit();
            });
        });
        </script>

        <ul id="myTags">
            <!-- Existing list items will be pre-added to the tags -->
            <li>Tag1</li>
            <li>Tag2</li>
        </ul>
        <form method="post" action="test.cfm">
            <input type="hidden" name="field1" id="field1" value="" /> 
            <input type="submit" id="submit_button" value="Submit">
        </form> 
```

我认为它需要清理一下，但它填充了该字段。

# ruby-on-rails - 是否有一个很好的指南来解释如何允许用户在 Rails 上使用 Twitter 注册/登录？

> ID：15909256
> 
> 赞同：0
> 
> 时间：2013-04-09T18:03:30.543
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, twitter, twitter-oauth

我正在寻找分步指南。我在 youtube 上查看了各种视频，搜索了网络，阅读了文章并阅读了这里的主题，但我仍然遇到一些问题。我决定放弃我所拥有的东西，因为它们会导致错误并重新开始。

我已经在 dev.twitter.com 上注册了我的应用程序，并且正在尝试使用 Twitter 和 Oauth gems。我也在我的数据库中创建了这个：

```
create_table "twitter_accounts", :force => true do |t|
    t.integer  "user_id"
    t.boolean  "active",               :default => false
    t.text     "stream_url"
    t.string   "oauth_token"
    t.string   "oauth_token_secret"
    t.string   "oauth_token_verifier"
    t.text     "oauth_authorize_url"
    t.datetime "created_at",                              :null => false
    t.datetime "updated_at",                              :null => false
  end 
```

是否有易于遵循的良好使用指南？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:15:14.467

试试[`OmniAuth`](https://github.com/intridea/omniauth)哪个适用于 twitter、facebook 和其他 OAuth 提供程序。

这是一个不错的 Railscast，详细介绍了如何使用`omniauth` [http://railscasts.com/episodes/359-twitter-integration集成 twitter 登录](http://railscasts.com/episodes/359-twitter-integration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:19:02.613

是的，Rails 3 在行动书中。n 这本书非常详细地考虑了这个问题 在这本书中，你将使用 Twiter 和 Github 登录（但这本书有一些错误 -> 但你可以非常简单地修复这个错误）

# javascript - 禁用或启用多个输入

> ID：15909258
> 
> 赞同：2
> 
> 时间：2013-04-09T18:03:37.993
> 
> 标签：javascript

我正在尝试根据复选框禁用或启用多个输入。我创建了一个函数来执行此操作，但是当我多次调用该函数时。它只会更改最后一个调用的函数。

演示 [http://jsfiddle.net/SM8Nx/1/](http://jsfiddle.net/SM8Nx/1/)

html

```
<input type="checkbox" name="state" id="state"><br>

First name: <input type="text" name="fname" id="fnamex"><br>
Middle name: <input type="text" name="mname" id="mnamex"><br>
Last name: <input type="text" name="lname" id="lnamex"><br> 
```

js

```
function disable(action, affected) {
    if (document.getElementById(action).checked === false) {
        document.getElementById(affected).disabled = true;
    }

    document.getElementById(action).onclick = function () {
        if (document.getElementById(action).checked === true) {
            document.getElementById(affected).disabled = false;
        } else {
            document.getElementById(affected).disabled = true;
        }
    };
}

disable("state", "fnamex");
disable("state", "lnamex"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:14:52.237

我在这里做了自己的小提琴：http: [//jsfiddle.net/SM8Nx/5/](http://jsfiddle.net/SM8Nx/5/)

修改了您的一些代码，还使用了类。

```
function disable() {
    var elements = document.getElementsByClassName("d");
    document.getElementById("state").checked ? doIt(elements, true) : doIt(elements, false);
}

function doIt(elements, status) {
    for (var i = 0; i < elements.length; i++) {
        elements[i].disabled = status;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:21:12.913

[这是一个](http://jsfiddle.net/fernandosavio/SM8Nx/7/)**使用[addEventListener和 attachEvent 的](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)[**演示**](http://jsfiddle.net/fernandosavio/SM8Nx/7/)（用于 IE 兼容性）..**

 **```
function disable(action, affected) {
    var elem = document.getElementById(action),
        elemAffected = document.getElementById(affected);

    if (elem.checked === false) {
        elemAffected.disabled = true;
    }
    var handler = function () {
        if (elem.checked === true) {
            elemAffected.disabled = false;
        } else {
            elemAffected.disabled = true;
        }
    };
    if(elem.addEventListener) elem.addEventListener('click', handler);
    else elem.attachEvent('click', handler); // IE :(
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:15:46.783

用于`addEventListener`将事件附加到 DOM 元素。

```
document.getElementById(action).addEventListener('click', function () {
        if (document.getElementById(action).checked === true) {
            document.getElementById(affected).disabled = false;
        } else {
            document.getElementById(affected).disabled = true;
        }
    }); 
```

注意：为了兼容 IE，您必须使用`attachEvent`. [https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener#Compatibility](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener#Compatibility)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-26T05:13:04.347

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE> javascript Fuctions </TITLE>
<script language="JavaScript">
function copyCheckboxes(checkbx,priority, active, fDate, tDate){
                var idd=document.getElementById(checkbx).id;
if(document.getElementById(checkbx).checked==true){
                document.getElementById(priority+idd).disabled=false;
                document.getElementById(active+idd).disabled=false;
                document.getElementById(fDate+idd).disabled=false;
                document.getElementById(tDate+idd).disabled=false;
}else{
                document.getElementById(priority+idd).disabled=true;
                document.getElementById(active+idd).disabled=true;
                document.getElementById(fDate+idd).disabled=true;
                document.getElementById(tDate+idd).disabled=true;
}
}
</script>
</HEAD> 
<BODY>
<form method="post" action="tbl_row_delete.php" name="rowsDeleteForm">
  <table id="table_results" border="0" cellpadding="2" cellspacing="1">
    <!-- Results table headers -->
    <!-- Results table body -->
    <tr >
      <td width="16" align="center" valign="top" bgcolor="#D5D5D5">&nbsp; </td>
      <td align="right" valign="top"    bgcolor="#D5D5D5" class="nowrap">id</td>
      <td valign="top" bgcolor="#D5D5D5">rate</td>
      <td valign="top" bgcolor="#D5D5D5">priority</td>
      <td valign="top" bgcolor="#D5D5D5">active</td>
      <td valign="top" bgcolor="#D5D5D5">from_date</td>
      <td valign="top" bgcolor="#D5D5D5">to_date</td>
    </tr>
    <tr >
      <td width="16" align="center" valign="top" bgcolor="#D5D5D5"> <input type="checkbox" id="1" name="rows_to_delete1" onClick="copyCheckboxes(this.id,'priority','active','fromDate','toDate');"  />
      </td>
      <td align="right" valign="top"    bgcolor="#D5D5D5" class="nowrap">1</td>
      <td valign="top" bgcolor="#D5D5D5">50</td>
      <td valign="top" bgcolor="#D5D5D5"><select name="priority[]" id="priority1" disabled>
          <option value="1" selected>1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select></td>
      <td valign="top" bgcolor="#D5D5D5"><select name="active[]" id="active1" disabled>
          <option value="Y" selected>Y</option>
          <option value="N">N</option>
        </select></td>
      <td valign="top" bgcolor="#D5D5D5"><input name="fromDate[]" type="text" id="fromDate1" value="01-02-2007" size="10" maxlength="10" disabled></td>
      <td valign="top" bgcolor="#D5D5D5"><input name="toDate[]" type="text" id="toDate1" value="01-02-2007" size="10" maxlength="10" disabled></td>
    </tr>
    <tr>
      <td width="16" align="center" valign="top" bgcolor="#E5E5E5"> <input type="checkbox" id="3" name="rows_to_delete3"  onclick="copyCheckboxes(this.id,'priority','active','fromDate','toDate');"/>
      </td>
      <td align="right" valign="top"    bgcolor="#E5E5E5" class="nowrap">3</td>
      <td valign="top" bgcolor="#E5E5E5">50</td>
      <td valign="top" bgcolor="#E5E5E5"><select name="priority[]" id="priority3" disabled>
          <option value="1">1</option>
          <option value="2" selected>2</option>
          <option value="3">3</option>
        </select></td>
      <td valign="top" bgcolor="#E5E5E5"><select name="active[]" id="active3" disabled>
          <option value="Y" selected>Y</option>
          <option value="N">N</option>
        </select></td>
      <td valign="top" bgcolor="#E5E5E5"><input name="fromDate[]" type="text" id="fromDate3" value="01-02-2007" size="10" maxlength="10" disabled></td>
      <td valign="top" bgcolor="#E5E5E5"><input name="toDate[]" type="text" id="toDate3" value="01-02-2007" size="10" maxlength="10" disabled></td>
    </tr>
    <tr >
      <td width="16" align="center" valign="top" bgcolor="#D5D5D5"> <input type="checkbox" id="4" name="rows_to_delete4"  onclick="copyCheckboxes(this.id,'priority','active','fromDate','toDate');"/>
      </td>
      <td align="right" valign="top"    bgcolor="#D5D5D5" class="nowrap">4</td>
      <td valign="top" bgcolor="#D5D5D5">10</td>
      <td valign="top" bgcolor="#D5D5D5"><select name="priority[]" id="priority4" disabled>
          <option value="1" selected>1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select></td>
      <td valign="top" bgcolor="#D5D5D5"><select name="active[]" id="active4" disabled>
          <option value="Y" selected>Y</option>
          <option value="N">N</option>
        </select></td>
      <td valign="top" bgcolor="#D5D5D5"><input name="fromDate[]" type="text" id="fromDate4" value="01-02-2007" size="10" maxlength="10" disabled></td>
      <td valign="top" bgcolor="#D5D5D5"><input name="toDate[]" type="text" id="toDate4" value="01-02-2007" size="10" maxlength="10" disabled></td>
    </tr>
    <tr>
      <td width="16" align="center" valign="top" bgcolor="#E5E5E5"> <input type="checkbox" id="5" name="rows_to_delete5"  onclick="copyCheckboxes(this.id,'priority','active','fromDate','toDate');"/>
      </td>
      <td align="right" valign="top" bgcolor="#E5E5E5" class="nowrap">5</td>
      <td valign="top" bgcolor="#E5E5E5">50</td>
      <td valign="top" bgcolor="#E5E5E5"><select name="priority[]" id="priority5" disabled>
          <option value="1" selected>1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select></td>
      <td valign="top" bgcolor="#E5E5E5"><select name="active[]" id="active5" disabled>
          <option value="Y" selected>Y</option>
          <option value="N">N</option>
        </select></td>
      <td valign="top" bgcolor="#E5E5E5"><input name="fromDate[]" type="text" id="fromDate5" value="01-02-2007" size="10" maxlength="10" disabled></td>
      <td valign="top" bgcolor="#E5E5E5"><input name="toDate[]" type="text" id="toDate5" value="01-02-2007" size="10" maxlength="10" disabled></td>
    </tr>
  </table> 
   </form>
</BODY>
</HTML> 
```

更多详细信息请参阅[http://www.easycodingclub.com/disabled-multiple-input-fields-using-javascript/javascript-tutorials/](http://www.easycodingclub.com/disabled-multiple-input-fields-using-javascript/javascript-tutorials/)**

# java - 发送 HTTP POST 请求时方法签名无效

> ID：15909261
> 
> 赞同：0
> 
> 时间：2013-04-09T18:03:58.047
> 
> 标签：java, post, http-headers, httpurlconnection, last.fm

好吧，这真的很令人沮丧。我使用我的 API 密钥非常好。身份验证很好，生成令牌很好，会话密钥也可以。

但是当我运行时[`playlist.create`](http://www.last.fm/api/show/playlist.create)，播放列表没有创建。

我今天几乎从头开始，并重新编写了大部分代码。我成功创建了 16 个播放列表，没有错误。但是今天，相同的代码不起作用。我根本没有碰它，但是错误。

```
private static void buildPlaylist() {

    String mood = "Happy";
    System.out.println("\nMood is " + mood + "\n\n");

    String title = URLEncoder.encode(mood + " " + new Date().getTime(), "UTF-8");
    String description = URLEncoder.encode("For when you are " + mood + ". Created by MoodicPlayer.", "UTF-8");

    MessageDigest md = MessageDigest.getInstance("MD5");

    String apiSig = "api_key" + key + "description" + description + "methodplaylist.createsk" + sessionKey + "title" + title + secret;
    md.update(apiSig.getBytes());
    byte byteData[] = md.digest();
    //convert the byte to hex format
    StringBuffer sb = new StringBuffer();
    for (int i = 0; i < byteData.length; i++) {
        sb.append(Integer.toString((byteData[i] & 0xff) + 0x100, 16).substring(1));
    }
    String hashedSig = sb.toString();

    // FOR DEBUGGING
    System.out.println("api_key = " + key);
    System.out.println("api_sig = " + hashedSig);
    System.out.println("session key = " + sessionKey);
    // FOR DEBUGGING

    String urlParameters = "method=playlist.create&api_key="+ key + "&api_sig=" + hashedSig + "&description=" + description + "&sk=" + sessionKey + "&title=" + title;
    String request = "http://ws.audioscrobbler.com/2.0/";

    URL url = new URL(request);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();     
    connection.setDoOutput(true);
    connection.setDoInput(true);
    connection.setInstanceFollowRedirects(false); 
    connection.setRequestMethod("POST"); 
    connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
    connection.setRequestProperty("charset", "utf-8");
    connection.setRequestProperty("Content-Length", "" + Integer.toString(urlParameters.getBytes().length));
    connection.setUseCaches(false);

    DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
    wr.writeBytes(urlParameters);
    wr.flush();
    wr.close();

    InputStream is = null;
    Scanner s = null;
    try {
        if (connection.getResponseCode() != 200) {
            s = new Scanner(connection.getErrorStream());
        } else {
            is = connection.getInputStream();
            s = new Scanner(is);
        }
        s.useDelimiter("\\Z");
        String response = s.next();
        System.out.println("\nResponse: " + response + "\n\n");
        BufferedWriter out = new BufferedWriter(new FileWriter("requestCreate.xml"));
        out.write(response);
        out.close();
    } catch (IOException e2) {
        e2.printStackTrace();
    }

    // FOR DEBUGGING
    try {
        System.out.println("Response Code: " + connection.getResponseCode());
        System.out.println("Response Message: " + connection.getResponseMessage()); 
    } catch (IOException e) {
        e.printStackTrace();
    }
    // FOR DEBUGGING
    connection.disconnect();
} 
```

和输出：

```
Starting test for creating playlist...

Mood is Happy
api_key = xxxxx
api_sig = xxxxxx
session key = xxxxx

Response: <?xml version="1.0" encoding="utf-8"?>
<lfm status="failed">
<error code="13">
    Invalid method signature supplied
</error>
</lfm>

Response Code: 403
Response Message: Forbidden 
```

我检查了代码，但找不到任何错误。我的意思是代码在 16 小时前还不错，但突然就不行了！

* * *

出于安全考虑，我无法向您展示我的安全密钥。但是，我确实编写了一个快速程序来查找 last.fm 会话密钥：[http](http://github.com/thekarangoel/LastFMSessionKeyFinder) ://github.com/thekarangoel/LastFMSessionKeyFinder 只需在 last.fm/api 注册，在程序中输入您的 API 密钥和密码，您将拥有测试 API 调用所需的一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:03:57.137

生成 MD5 哈希时，您使用的是`title`和`description`值的 URL 编码版本。 [文档](http://www.last.fm/api/authspec#8)没有说要这样做。尝试使用非 URL 编码的值（尽管它们确实需要 UTF-8 编码）。URL 编码应该只用在实际的 URL 数据中（因此它的名字）。

尝试这个：

```
private static void buildPlaylist() {

    String mood = "Happy";
    System.out.println("\nMood is " + mood + "\n\n");

    String title = mood + " " + new Date().getTime();
    String description = "For when you are " + mood + ". Created by MoodicPlayer.";

    MessageDigest md = MessageDigest.getInstance("MD5");

    String apiSig = "api_key" + key + "description" + description + "methodplaylist.createsk" + sessionKey + "title" + title + secret;
    md.update(apiSig.getBytes("UTF-8"));
    byte byteData[] = md.digest();
    //convert the byte to hex format
    StringBuffer sb = new StringBuffer(byteData.length*2);
    for (int i = 0; i < byteData.length; i++) {
        sb.append(String.format("%02X", byteData[i]));    
    }
    String hashedSig = sb.toString();

    // FOR DEBUGGING
    System.out.println("api_key = " + key);
    System.out.println("api_sig = " + hashedSig);
    System.out.println("session key = " + sessionKey);
    // FOR DEBUGGING

    String urlParameters = "method=playlist.create&api_key="+ key + "&api_sig=" + hashedSig + "&description=" + URLEncoder.encode(description, "UTF-8") + "&sk=" + sessionKey + "&title=" + URLEncoder.encode(title, "UTF-8");
    String request = "http://ws.audioscrobbler.com/2.0/";

    URL url = new URL(request);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();     
    connection.setDoOutput(true);
    connection.setDoInput(true);
    connection.setInstanceFollowRedirects(false); 
    connection.setRequestMethod("POST"); 
    connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
    connection.setRequestProperty("charset", "utf-8");
    connection.setRequestProperty("Content-Length", "" + Integer.toString(urlParameters.getBytes().length));
    connection.setUseCaches(false);

    DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
    wr.writeBytes(urlParameters);
    wr.flush();
    wr.close();

    ...
} 
```

# java - 两个 onClickListener 以及它们之间的交互

> ID：15909268
> 
> 赞同：0
> 
> 时间：2013-04-09T18:04:18.440
> 
> 标签：java, android

假设我有两个 onClickListener，A 和 B，以及分配给它们的一些按钮。有没有办法让每个单击的按钮“属于” onClickListener A 来监听、等待或其他任何东西，直到单击下一个按钮，如果它来自 onClickedListener B 在此之后执行一些代码，那么什么并不重要，如果它来自 onClickListener A保持原样，只等待下一次单击并像上一个按钮一样等待，等等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:14:21.793

好的，所以我编辑了我的答案，以按照其他问题的要求进行操作。让我知道这是否有意义。我不会为你做这项工作，所以这是一个简单的例子，可以向你展示逻辑是什么。

```
//This is how you set the TAG so you have it. But I know you use getTag, so I am not sure     
//what you are using it for.
a1 = (Button) findViewById(R.id.bA1);
a2 = (Button) findViewById(R.id.bA2);
b1 = (Button) findViewById(R.id.bB1);
b2 = (Button) findViewById(R.id.bB2);
a1.setTag("A");
a2.setTag("A");
b1.setTag("B");
b2.setTag("B");

View.OnClickListener listener = new View.onClickListener() {
    public void onClick(View view) {
        String tag = (String)view.getTag();
        if(tag.equals("A")
            //example on one B button with assumed TAG of "B"
            someButton.setOnClickListener(listener);
            //deregister all your A Views, but again, I'll do one as an example
            //in this case I'll quickly just deregister the A button or view just clicked
            view.setOnClickListener(null);
        else
            if(tag.equals("B")) {
                /*I guess do your thing here but deregister all the B views again
                and register all the A views again*/
                someButton.setOnClickListener(null);
                otherAButton.setOnClickListener(listener);
            }
    }
}); 
```

所以我做了一些假设来缩短代码。例如。使用该方法将所有 A 设置`View`为`"A"`标签`setTag`，反之亦然`View`。另外我假设您希望 A 视图开始监听点击，因此当首次启动 Activity 或 Fragment 时，您`listener`可以通过`setOnClickListener`.

# python - 具有可选感兴趣区域、负坐标的画布

> ID：15909272
> 
> 赞同：1
> 
> 时间：2013-04-09T18:04:24.880
> 
> 标签：python, user-interface, drawing, tkinter

我想在画布上绘制填充的多边形（正方形和六边形），然后能够在感兴趣的区域上放大或缩小画布。

我基于 Tkinter 起草了以下演示程序：

```
#!/usr/bin/python
from Tkinter import *

def DrawSquare(canvas, orgx, orgy, size, filler):
  orgx=orgx*size
  orgy=orgy*size
  canvas.create_polygon(orgx, orgy, orgx+size, orgy, orgx+size, orgy+size, orgx, orgy+size, orgx, orgy, outline="black", fill=filler)

def main():
  w = Frame()
  w.pack(expand=YES, fill=BOTH)
  canvas = Canvas()
  canvas.pack(expand=YES, fill=BOTH)

  for x in range(-30,10):
    for y in range(-30,10):
      DrawSquare(canvas, x,y,20,"white")

  mainloop()

main() 
```

它在画布上绘制了许多正方形，但是，至少使用 Tkinter 画布的默认选项，我看不到负象限中的正方形。

那么问题是：

*   可以使 Tkinter.Canvas 滑动和缩放（最好使用内置函数）吗？
*   有没有我可以过渡到更合适的替代框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:41:03.050

默认情况下，左上角为 0,0。如果您想查看上方或左侧的内容，您只需滚动到画布的该部分即可。为此，您应该首先设置`scrollregion`属性，以便画布知道您希望能够看到其（伪）无限空间的哪一部分。

绘制所有对象后添加以下代码行：

```
canvas.configure(scrollregion=canvas.bbox("all")) 
```

[您可以通过调用scale](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.scale-method)方法来缩放画布，给它一个在 X 和 Y 方向上缩放所有内容的因素。

# jquery - 检查图像上的 alt 属性是否有价值并添加 里面有另一个图像

> ID：15909277
> 
> 赞同：0
> 
> 时间：2013-04-09T18:04:48.387
> 
> 标签：jquery, image, html, prepend, alt

我对 JQuery 和 Javascript 比较陌生，所以我需要一些关于我正在尝试编写的 JQuery 代码的帮助。我想要做的是编写一个函数来查看 Wordpress 中某个帖子中的所有图像并检查它们是否有`alt="watermark"`.

如果他们这样做，那么我想`<div>`围绕每个`<img>`. 此外，我想在另一个图像`<div>`之上放置第二个图像。我已经设法`div`基于`alt`. 我还能够在其中的现有图像上添加图像`div`。但是我无法重复最后一个动作。我的代码只将图像添加到第一个`<div>`.

```
$(document).ready(function(){
$("img[alt*='watermark']").wrap('<div id="watermark" />');  
$('#watermark').prepend("<img src='images/watermark.png'/>");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:10:25.193

您可以使用`before()`在当前图像之前添加图像：

```
$(document).ready(function(){
    $("img[alt*='watermark']").wrap('<div id="watermark" />');
                              .before("<img src='images/watermark.png'/>");
}); 
```

这个选择器：

```
$('#vannmerke_hvit') 
```

表示一个 ID，并且 ID 是唯一的，因此仅适用于一个元素，即第一个元素。您可以将其更改为一个类以使其与多个元素一起使用。

直到！

# python - 如果信息在列表中，如何打印有关列表的信息，否则如何打印错误消息

> ID：15909279
> 
> 赞同：0
> 
> 时间：2013-04-09T18:04:50.060
> 
> 标签：python

所以我得到了这段代码，如果列表中包含“名称”，它应该可以让你显示列表的信息。该列表`idel`由不同的函数加载`d = load_info('info.csv')`。

```
def display_info(name, info_list):
        for name[0] in info_list:
            if name[0] == name:
                print ' '.join(name)
                break
            else:
                print False 
```

此功能由此命令运行`display_info('Greyson', d)`

但是，我收到此错误

> TypeError：“str”对象不支持项目分配。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:13:09.990

```
def display_info(name, info_list):
        for i in info_list:
            if i == name:
                print ' '.join(name)
                break
            else:
                print False 
```

`name`是一个字符串，字符串是不可变的。所以你不能`name[0]`用来迭代 info_list，因为只有可变项可以用来迭代一个列表。更改`name[0]`为`i`（可变项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:19:33.083

```
def display_info(name, info_list):
    for each_info in info_list:
        if each_info[0] == name:
            print ' '.join(each_info)
            break
        else:
            print False 
```

# ruby - 将 URL 前缀重写为 HTTP 标头

> ID：15909288
> 
> 赞同：2
> 
> 时间：2013-04-09T18:05:24.223
> 
> 标签：ruby, url-rewriting, rewrite, rack

我正在尝试使用以下方式重写 URL `rack-rewrite`：

`/group1/feed`变成`/feed`, 带有标题`"GROUP_NAME" => "group1"`

目前，我正在使用[rack-rewrite](https://github.com/jtrupiano/rack-rewrite)的黑客版本，它允许我执行以下操作：

```
use Rack::Rewrite do
  rewrite /\/([^\/]*)\/(.+)/, '/$2',
  headers: lambda { |base, route| { 'GROUP_NAME' => base } }
end 
```

请注意，`base, route` 不提供给`headers`库存版本中的块`rack-rewrite`。

我想知道是否有一种不那么老套的方法来完成我正在寻找的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:22:36.627

如果您查看[源代码，则在哪里`rewrite`定义](https://github.com/jtrupiano/rack-rewrite/blob/v1.3.3/lib/rack/rewrite/rule.rb#L22)

```
def rewrite(*args)
  add_rule :rewrite, *args
end 
```

你可以看到它需要一些参数。[跟随它查看定义`add_rule`](https://github.com/jtrupiano/rack-rewrite/blob/v1.3.3/lib/rack/rewrite/rule.rb#L94)

```
def add_rule(method, from, to, options = {}) #:nodoc:
  @rules << Rule.new(method.to_sym, from, to, options)
end 
```

这些 splatted 参数之一是用于构建`Rule`实例的选项哈希。其中一个选项是`:headers`，它被[添加到一个名为 的变量`additional_headers`](https://github.com/jtrupiano/rack-rewrite/blob/v1.3.3/lib/rack/rewrite/rule.rb#L119)中。然后将其[合并到某些规则的标题中](https://github.com/jtrupiano/rack-rewrite/blob/v1.3.3/lib/rack/rewrite/rule.rb#L129)。

不幸的是，[`rewrite`它是少数几个***没有***合并到](https://github.com/jtrupiano/rack-rewrite/blob/v1.3.3/lib/rack/rewrite/rule.rb#L137). 这意味着您的问题的答案部分是“否”，因为当前的公共 API 无法帮助您解决这个问题。就个人而言，我看不出有任何理由决定不将选项与此规则合并，如果我是你，我会分叉库并添加它，然后发送拉取请求让他们将其添加到主分支. 在等待期间，您仍然可以执行以下操作：

```
rewrite /\/([^\/]*)\/(.+)/, '/$2', :headers => {"GROUP_NAME" => $1} 
```

从你自己的叉子。

# java - 从 URL 以编程方式在 Android 中下载 Mp3

> ID：15909291
> 
> 赞同：0
> 
> 时间：2013-04-09T18:05:30.683
> 
> 标签：java, android

我想用声音的 URL 从 Web 服务器下载 Mp3 声音。我不知道最好的方法是什么！我也看过这些问题。请引导我正确的方向。

[在android上以编程方式下载文件](https://stackoverflow.com/questions/1714761/downaload-a-file-programatically-on-android)

[在android中以编程方式从网络下载文件的最佳方法是什么？](https://stackoverflow.com/questions/4896457/what-is-best-way-to-download-files-from-net-programatically-in-android)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T07:07:27.140

试试这个代码，让我知道

```
File output = new File(Environment.getExternalStorageDirectory(),
    fileName);
if (output.exists()) {
  output.delete();
}

InputStream stream = null;
FileOutputStream fos = null;
try {

  URL url = new URL(urlPath);
  stream = url.openConnection().getInputStream();
  InputStreamReader reader = new InputStreamReader(stream);
  fos = new FileOutputStream(output.getPath());
  int next = -1;
  while ((next = reader.read()) != -1) {
    fos.write(next);
  } 
```

# python - 我的计算器 Python Tkinter 的按钮大小

> ID：15909292
> 
> 赞同：5
> 
> 时间：2013-04-09T18:05:32.223
> 
> 标签：python, tkinter

![在此处输入图像描述](https://i.stack.imgur.com/7anrA.png)

我是 python 和 tkinter 的新手。在过去的几天里，我一直在观看和研究一些教程，我的第一个项目是一个计算器。

后面的某个地方有点困惑。如果有人可以请告诉我如何让“0”按钮填补“。”之间的空白。按钮。还希望“+/-”与列的其余部分均匀匹配。

我在另一个与此类似的问题中看到一个人给出了答案

```
button1.config( height = WHATEVER, width = WHATEVER2 ) 
```

由于我将按钮放置在网格中，我可以实现它吗？如何实现？

```
bttn_0 = Button(calc, text = "0")
bttn_0["command"] = lambda: sum1.num_press(0)
bttn_0.grid(row = 5, column = 0, pady = 5) 
```

![在此处输入图像描述](https://i.stack.imgur.com/tKCtl.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:00:09.040

F3AR3DLEGEND 不正确，**可以**使用`grid`. 您需要使用`columnspan`关键字使小部件跨越多个列，例如

```
bttn_0.grid(row = 5, column = 0, pady = 5, columnspan = 2) 
```

例如，请参见[此处](http://effbot.org/tkinterbook/grid.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T19:27:31.360

要将“.”旁边的零设置`columnspan`为 2。您可能还希望将顶部条目小部件的列跨度设置为 4，以便它完全适合四列按钮（并设置`sticky`为以获得完美的对齐）。

您无法让 +/- 按钮与其他按钮均匀匹配，因为它更宽。但是，您可以使其他按钮适合 +/- 按钮。如果您使用`sticky="ew"`，按钮的宽度将全部扩大以填充它们的列（即：它们将“粘”在其单元格的东侧和西侧）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-09T18:08:25.303

```
bttn_0 = Button(calc, text = "0", height = my_height, width = my_width) 
```

要填补空白，只需尝试几个不同的值，或者根据窗口的宽度和每个其他按钮（在该行中）的宽度来计算它。

# python - python中的轴绘图 - matplotlib

> ID：15909293
> 
> 赞同：4
> 
> 时间：2013-04-09T18:05:34.633
> 
> 标签：python, graph, matplotlib, gridlines

我目前有一个数据图，红色的垂直线标记了“平均旋转次数”所在的点。我想知道是否可以将“百万旋转，百万”点的标记更改为蓝色/黑色细十字，并将主要/次要网格线放在两个轴上？所有可用的在线帮助似乎都来自我们没有的模块。另外，您如何将我绘制的红线标记为“平均旋转次数”？

非常感谢。

```
matplotlib.pyplot.scatter(millionspins,millions)
plt.xlabel("Number of spins")
plt.plot([averageiterations,averageiterations],[1000000,1500000],'r-')
plt.xlim(0,max(millionspins))
plt.ylim(1000000,max(millions))
plt.ylabel("Bank")
plt.xlim(0,max(millionspins))
plt.ylim(1000000,max(millions))
show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:29:45.143

用于`marker='+'`使[标记成为细十字](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.scatter)：

```
plt.scatter(millionspins, millions, c='b', marker='+') 
```

使用[plt.grid](http://matplotlib.org/api/axis_api.html#matplotlib.axis.Axis.grid)显示网格线：

```
plt.grid(True, which='both') 
```

* * *

顺便说一句，您可以使用`plt.axvline`创建红色垂直线。这样，如果用户重新缩放绘图，垂直线的端点将不会显示：

```
import matplotlib.pyplot as plt
import numpy as np
N = 100
millionspins = np.random.randint(10000000, size=N)
millions = np.random.randint(10000000, size=N)
averageiterations = millionspins.mean()

plt.scatter(millionspins, millions, marker='+')
plt.axvline([averageiterations], color='r')

plt.xlabel("Number of spins")
plt.ylabel("Bank")

plt.xlim(0,max(millionspins))
plt.ylim(1000000,max(millions))

plt.grid(True, which='both')
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/RRuNq.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:30:08.773

我想你想要的是：

```
ax = plt.gca()
ax.grid(True)
ax.plot(millionspins, millions, marker='+', color='b') 
```

除非您需要使每个标记具有不同的大小或颜色，否则我建议您使用`plot`而不是，`scatter`因为它更快并且您以后可以更轻松地修改它（如果您想做动画）。

# c# - C#类属性，通过索引获取

> ID：15909295
> 
> 赞同：2
> 
> 时间：2013-04-09T18:05:48.703
> 
> 标签：c#, class, attributes, indexing

是否可以通过索引访问属性？

以 Person 类为例，它可以具有属性“BirthNo”和“Gender”。如果我想访问 BirthNo 的值，是否可以以任何方式写 p.[0].Value 还是必须写 person.BirthNo.Value？

```
Person p = new Person
//I have this:
string birthNo = p.BirthNo.Value;
//I want this: 
string birthNo = p.[0].Value; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T18:09:30.333

`p.[0].Value`不是正确的 c# 代码，所以你绝对不能这样写。

您可以尝试使用[indexers](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)，但您必须自己编写很多逻辑，例如：

```
public T this[int i]
{
    get
    {
        switch(i)
        {
            case 0: return BirthNo;
            default: throw new ArgumentException("i");
        }
    }
} 
```

调用代码看起来是这样的：

```
p[0].Value 
```

然而，**这是可怕的事情，你甚至不应该考虑那样使用它！***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:37:58.127

您可以在 Person 类中包含一个字符串 Dictionary ，并在属性更改时将字符串值写入其中。像这样的东西：

```
class Person
    {
        Person()
        {
            properties.Add(0, "defaultBirthNo");
        }

        Dictionary<int, string> properties = new Dictionary<int,string>();

        private int birthNo;

        public int BirthNo
        {
            get { return birthNo;}
            set { 
                birthNo = value;
                properties[0] = birthNo.ToString();
            }
        }
    } 
```

当你设置属性

```
person.BirthNo = 1; 
```

例如，您可以使用以下方法检索它：

```
string retreivedBrithNo  = person.properties[0]; 
```

这非常混乱，我想不出你为什么要这样做，但无论如何这是一个答案！:)

# distribution - 在 Pentaho Kettle ETL 步骤中分发标签有什么作用？

> ID：15909308
> 
> 赞同：2
> 
> 时间：2013-04-09T18:06:44.190
> 
> 标签：distribution, etl, pentaho, kettle

`<distribute>Y</distribute>`和 和有什么不一样`<distribute>N</distribute>`？在 Spoon 用户界面中，该值如何变化？

```
 <step>
    <name>Not Empty</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1412</xloc>
      <yloc>492</yloc>
      <draw>Y</draw>
      </GUI>
    </step> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:54:08.557

在 wiki 上查看此页面：

[http://wiki.pentaho.com/display/EAI/Partitioning+data+with+PDI](http://wiki.pentaho.com/display/EAI/Partitioning+data+with+PDI)

另一个选项是将行复制到所有后续步骤。

# iphone - NSLog 在外部返回 nil (id)

> ID：15909313
> 
> 赞同：0
> 
> 时间：2013-04-09T18:06:52.747
> 
> 标签：iphone, ios, objective-c, nslog

我正在尝试访问`_urlS`外部`initWithURL:`。如果我 NSLog 在里面，我会得到一个值，但如果我`NSLog`在里面`websiteload:`，我会得到`(null)`.

真的很奇怪，有人有什么想法吗？

.h 文件：

```
@interface WebsiteViewController : UIViewController <UIPopoverControllerDelegate, UISplitViewControllerDelegate, MFMailComposeViewControllerDelegate, UIWebViewDelegate, UITextFieldDelegate> {
    UIPopoverController *popoverController;
    UIBarButtonItem *barButton;

    NSString *urlWeb;

    IBOutlet UIWebView *Website;

    UILabel *testLabel;

    IBOutlet UIButton *btn;

    IBOutlet UILabel *lbllong;

    IBOutlet UIActivityIndicatorView *activityIndicator;
}

@property (nonatomic, retain) IBOutlet UIPopoverController *popoverController;
@property (nonatomic, retain) IBOutlet UIBarButtonItem *barButton;
@property (nonatomic, retain) NSString *urlS;

- (void)addBarButtonItem:(UIBarButtonItem*)barButtonItem forPopoverController: (UIPopoverController*)pc;
- (void)removeBarButtonItem;

- (id)initWithURL:(NSString *)postURL;

@end 
```

.m 文件：

```
#import "WebsiteViewController.h"

@interface WebsiteViewController ()

@end

@implementation WebsiteViewController

@synthesize barButton, popoverController;
@synthesize urlS = _urlS;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (id)initWithURL:(NSString *)postURL
{
    self = [super init];
    if (self) {
        _urlS = [[postURL stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] retain];
        [lbllong setText:_urlS];
    }
    return self;
}

-(IBAction)websiteload:(id)sender {

    NSLog(@"%@", _urlS);

}

- (void)addBarButtonItem:(UIBarButtonItem*)barButtonItem forPopoverController: (UIPopoverController*)pc {

}
- (void)removeBarButtonItem {

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:10:35.187

您需要在分配对象时保留它，因为它 `stringByTrimmingCharactersInSet:`返回一个自动释放的实例，因此它会因为您不拥有它而被释放。

将分配更改为

```
_urlS = [[postURL stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] retain]; 
```

# c - 如果我们将递归函数设为内联会发生什么？

> ID：15909314
> 
> 赞同：7
> 
> 时间：2013-04-09T18:06:53.627
> 
> 标签：c, recursion, inline-functions

我对内联函数有疑问。内联函数不涉及任何函数调用，而只是在调用内联函数的地方替换函数定义。内联函数与宏不同，具有类型强制。如果递归函数内联会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T18:09:09.323

“内联”不是保证，而是请求。

您的递归内联函数（通常）不会是内联的。

*   正如一些评论者指出的那样，在*某些*特殊情况下（例如，使用编译器特定的编译指示）可以进行内*联*。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T18:10:21.833

`inline`只是对编译器的建议，并不保证函数会被内联。

显然，编译器无法无限内联递归函数。它可能根本不内联它，或者它可能只内联几级。

# android - 如何获取谷歌好友列表

> ID：15909316
> 
> 赞同：1
> 
> 时间：2013-04-09T18:07:03.087
> 
> 标签：android, google-plus

我正在尝试使用以下 URL 获取 Google plus 圈子好友列表

[https://www.googleapis.com/plus/v1/people/](https://www.googleapis.com/plus/v1/people/) {userid}/people/visible?key={apikey}

但发现以下错误

```
{
 "error": {`enter code here`
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "accessNotConfigured",
    "message": "Access Not Configured"
   }
  ],
  "code": 403,
  "message": "Access Not Configured"
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:19:31.910

听起来您没有使用 API 控制台来指示您的应用程序需要访问 Google+ API。有关您需要完成的步骤，请参阅[https://developers.google.com/+/web/people/和“开始之前”部分。](https://developers.google.com/+/web/people/)

具体而言，请参阅有关如何从 API 控制台获取客户端 ID 的步骤 3 和 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:32:38.050

重要的是要注意 people.list 只能在经过身份验证的用户上调用。如果问题来自 API 控制台设置，您可以在配置 Google+ 登录按钮时包含 API 控制台客户端 ID。但是，用户必须先登录到您的应用，然后您才能请求他们的圈出人员列表。这是因为当他们登录时，他们控制与您的应用程序共享哪些圈子，并且您的应用程序接收用户的平面列表 - 没有圈子名称。

# javascript - 如何使用填充有 AJAX 请求的 javascript 调用弹出窗口

> ID：15909317
> 
> 赞同：0
> 
> 时间：2013-04-09T18:07:07.207
> 
> 标签：javascript, ajax, jsf, popupwindow

我在 java 类中有以下代码来添加到表格网格的链接。以下代码特定于公司内部 API。

```
 /***MyLink.java*********/

  myLink.setOnClick( "getURL", return false;);
  addToolBarItem("myLink");

  /***MyLinkJSFPage.jsf****

  urlValue= "www.google.com"; 
```

在 jsf 页面中，我必须向 getURL javascript 发出 ajax 请求，这将打开一个带有来自 jsf 页面的 url 的弹出窗口。基本上，当用户单击链接时，应该会使用 ajax 请求填充 javascript 弹出窗口。我们该怎么做呢？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:39:30.613

我发现我更喜欢使用元素来实现相同的效果，而不是弹出窗口，因为现在大多数浏览器都有弹出窗口阻止程序。使用 div“弹出窗口”，没有什么可以阻止它。

首先，您需要在 HTML 代码中包含 div。哪里都好。这是您的内容将显示的区域。它必须有一个 id 标签（在本例中为“popup”）

```
<div id='popup' style='visibility: hidden; position: absolute; width: 500px; height: 300px;'></div> 
```

接下来，您需要将请求页面并从服务器接收响应的 javascript 代码。这是我的标准功能：

```
function get_(url, func)
{
 var http;
 try { http = new XMLHttpRequest(); } catch (e) { try { http = new ActiveXObject(\"Msxml2.XMLHTTP\"); } catch (e) { try { http = new ActiveXObject(\"Microsoft.XMLHTTP\"); } catch (e) { alert(\"Failed to load!\"); return false; } } }

 http.open(\"GET\", url, true);
 http.onreadystatechange = function() { if(http.readyState == 4) { func(http); } }
 http.send(null);
} 
```

对于此示例，我将只使用一个按钮来使弹出窗口起作用，以便您可以了解如何使用代码。以下是所有内容：

```
<html>
<head>
<script language='javascript'><!--

function get_(url, func)
{
 var http;
 try { http = new XMLHttpRequest(); } catch (e) { try { http = new ActiveXObject(\"Msxml2.XMLHTTP\"); } catch (e) { try { http = new ActiveXObject(\"Microsoft.XMLHTTP\"); } catch (e) { alert(\"Your browser broke!\"); return false; } } }

 http.open(\"GET\", url, true);
 http.onreadystatechange = function() { if(http.readyState == 4) { func(http); } }
 http.send(null);
}

function getPopup()
{
 get_("url_of_popup_source.html", showPopup);
}

function showPopup(h)
{
 var p = document.getElementById("popop");
 p.innerHTML = h.responseText;
 p.style.visibility = "visible";
}

function hidePopup()
{
 p.style.visibility = "hidden";
}

--></script>
</head>
<body>

<button onClick='showPopup();'>Click here</button>
<div id='popup' style='visibility: hidden; position: absolute; width: 500px; height: 300px; top:100px; left:200px;'></div>
</body>
</html> 
```

这显然是非常基本的。您也可以调整弹出窗口的大小和绝对位置。但主要思想是您不再使用实际的弹出窗口来获取信息给用户，因为它可能会被阻止。

我包含的额外功能“hidePopup”将关闭弹出窗口。我建议您在“url_of_popup_source.html”源中包含一个按钮，该按钮在单击时执行 hidePopup。这样，用户可以阅读信息，然后关闭弹出窗口，就像它是一个对话框一样。

# javascript - 对象 [对象对象] 没有方法 'nestedFields' - awesome_nested_fields gem - Rails 3.2 jquery-ui-1.9.2

> ID：15909319
> 
> 赞同：1
> 
> 时间：2013-04-09T18:07:12.123
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3.2, nested-forms, nested-attributes

我已经安装了这个[漂亮的 gem](https://github.com/lailsonbm/awesome_nested_fields)，并在过去的 2 个小时里试图让它工作。

我设法在父表单中显示嵌套字段并创建/更新记录。

但是，添加/删除 JS 链接不起作用。这是因为在控制台中给了我这个错误。

```
Uncaught TypeError: Object [object Object] has no method 'nestedFields' neste_attributes_forms.js:2
(anonymous function) neste_attributes_forms.    js:2
fire                                            jquery.js:1018
self.fireWith                                   jquery.js:1128
jQuery.extend.ready                             jquery.js:417
DOMContentLoaded 
```

我是 JS 的新手。所以，我不确定问题是什么。

我尝试了与 gem 页面上相同的代码：

```
$(document).ready(function(e) {
  $('FORM').nestedFields();
}); 
```

我也尝试过通过 div 的 id 调用。但是，无济于事。我检查了页面源并加载了这段代码。

你知道我错过了什么吗？非常感谢任何帮助！！！

形式的一部分：haml

```
= form_for(@event) do |f|
  ....somefields....

  #nested_layers   
    .items
      = f.nested_fields_for :details do |f|
        %fieldset.item
          = f.label :town
          = f.text_field :town
          %a.remove{:href => "#"} remove
          = f.hidden_field :id
          = f.hidden_field :_destroy
    %a.add{:href => "#"} add phone
  ..someOtherFields.... 
```

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui-1.9.2.custom.min
//= require jquery.nested-fields
.... 
```

已修复：Application.js 包含一个不应删除的非常聪明的句子： // 警告：第一个空白行标志着要处理的内容的结束，任何空白行都应该 // 遵循以下要求。因此，只需确保每个 //= require... 都在另一个下方。否则你会错过方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:14:32.913

似乎未加载所需的 javascript 库，因此请确保：

```
//= require jquery.nested-fields 
```

正确地包含在`app/assets/javascripts/application.js`

# java - 无法让正则表达式在 Java 中匹配

> ID：15909321
> 
> 赞同：0
> 
> 时间：2013-04-09T18:07:17.307
> 
> 标签：java, regex

我正在尝试仅将 URL 上的文件扩展名与图像匹配。我有这个正则表达式：

```
(?<=\.)(jpe?g|png|gif|bmp|tga|tiff)$ 
```

我已经在几个网站上对此进行了测试，它匹配得很好。但是当我尝试在 Java 中使用它时，我添加了一个额外的 \ 来转义 . 而且我认为我不应该添加更多？但这不起作用：

```
Pattern extensionPat = Pattern.compile("(?<=\\.)(jpe?g|png|gif|bmp|tga|tiff)$", Pattern.CASE_INSENSITIVE);
    Matcher findExtension = extensionPat.matcher(imageURL);
    String extension = findExtension.group(); 
```

其中 imageURL 是“ [https://www.google.com/images/srpr/logo4w.png](https://www.google.com/images/srpr/logo4w.png) ”

在同事的建议下，我尝试将管道逃逸到：

```
Pattern extensionPat = Pattern.compile("(?<=\\.)(jpe?g\\|png\\|gif\\|bmp\\|tga\\|tiff)$", Pattern.CASE_INSENSITIVE); 
```

我试过转义 $ 和 <，但似乎没有任何效果......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:08:50.133

您需要先调用[`findExtension.find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)，否则`findExtension.group()`不会返回任何内容。

# ios - 安装后从包中删除文件

> ID：15909330
> 
> 赞同：6
> 
> 时间：2013-04-09T18:08:01.697
> 
> 标签：ios, resourcebundle

我意识到你不能从 iOS 包中删除一个项目，因为它已经签名，但是有没有办法包含一个文件并且让它不是“签名”包的一部分，但在安装时仍然存在？

用例基本上是安装应用程序，读取文件内容，存储在钥匙串中，然后删除文件。

感谢您的任何帮助和指导。

注意 -> 该应用程序无法访问互联网来获取此文件。并且能够在阅读一次后删除文件（或擦除文件的内容）是我真正需要的。此外，我们在这里是临时分发，我们不经过任何 App Approval 流程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T18:52:53.273

简短的回答是否定的。应用程序包是只读的。

正如其他人所指出的，在需要可编辑的包中交付数据的通常解决方案是将数据从应用程序包复制到文档（或其他应用程序文件夹），以便您拥有可编辑的副本。但是，您仍然无法从捆绑包中删除任何内容。

由于您的项目存在无法通过 Internet 传输数据的限制，并且您正在通过 Ad-Hoc 分发交付应用程序，因此您似乎主要担心的是交付的文件无法访问，即使在越狱设备上也是如此。

由于您无法删除文件以使其不可读，因此下一个最佳选择是加密文件以使其不可读。您的应用程序可以解密内容、使用它并处置解密的版本。当然，这仍然不是防弹的，因为解密需要一个您必须保护的密钥，但它与您将获得的一样防弹。

# asp.net - XSD 数据集——在设计时和运行时使用来自另一个项目的连接字符串

> ID：15909332
> 
> 赞同：1
> 
> 时间：2013-04-09T18:08:03.200
> 
> 标签：asp.net, connection-string, strongly-typed-dataset, design-time, multiple-projects

我们有一个 VS2010 解决方案，其中包括一个 Web 应用程序（启动项目）和一个用于数据访问的类库。连接字符串存储在 web 应用程序的 connectionString.config 中，该文件在 web 应用程序的 web.config 中引用。类库中的现有代码使用 System.Data.SqlClient 来命中数据库。此代码通过以下方式获取连接字符串：

```
ConfigurationManager.ConnectionStrings["OurDbName"].ToString(); 
```

类 iibrary 中没有连接字符串设置，因此在运行时这会从 Web 应用程序的配置中提取连接字符串。

我想将“视觉”xsd 数据集添加到类库中。但是，要做到这一点，您需要在设计时定义一个连接字符串，并且设计器无法识别 Web 应用程序中的运行时默认配置。因此，就目前而言，要在类库中创建和使用 xsd 数据集，我需要在其中定义一个单独的连接字符串（通过项目的“设置”窗口）。如果我想要数据集设计器中的拖放和上下文菜单功能，至少我会这样做。

我知道如何在运行时设置连接字符串。我尝试过的几种方法在设计时都不可用。

有没有办法在数据访问类库之外的某个地方定义连接字符串，但在设计时仍然可以连接到类库中的 xsd 数据集？

我认为第一个明显的答案是在数据访问类库中进行连接配置，并在必要时让其他项目在那里引用它。不过，我目前无法保证这是一种选择。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-04T12:51:51.123

> “有没有办法在数据访问类库以外的地方定义连接字符串，但在设计时仍然可以连接到类库中的 xsd 数据集？”

[知道这是一个旧线程，但我遇到了同样的问题，在其他任何地方都没有找到完整的答案......所以，以供将来参考......]

我发现拥有 XSD 设计器的好处并能够更改登台和生产的连接设置的最佳方法如下： - 注意：这在 VS 2012 中有效......认为它也应该在 2010 年 - 也, DataSets 是通过从服务器资源管理器中拖动创建的，该资源管理器将连接信息保存在设计时使用的类库 app.config 和 Properties.Settings.settings 中。

1) 对于每个 DataTable，单击 TableAdapter 标题（在属性下方和方法上方）并查看属性 2) 将连接修饰符更改为**公共** 3) 然后，访问表的代码应类似于以下内容 (其中类库被命名为 DALib) ...

```
using DALib;
using System.Web.Configuration;

PriceData.averageSalePriceFDataTable priceTable;
DALib.PriceDataTableAdapters.averageSalePriceFTableAdapter priceAdapter
  = new DALib.PriceDataTableAdapters.averageSalePriceFTableAdapter();

priceAdapter.Connection.ConnectionString 
  =  WebConfigurationManager.ConnectionStrings["MyConnection"].ConnectionString;

priceTable = priceAdapter.GetData( ... parameters ...); 
```

这使用类库中的连接字符串进行设计，并在运行时从 Web.config 中选择它。

# workflow-foundation-4 - 如何完全折叠自定义活动设计器（标题下方没有白框）？

> ID：15909334
> 
> 赞同：2
> 
> 时间：2013-04-09T18:08:19.347
> 
> 标签：workflow-foundation-4, activitydesigner

对于我的一些活动，我希望它完全折叠，以便在用户折叠其设计器时仅显示标题栏。默认情况下，如果您使用[可折叠设计器的标准方式](http://msdn.microsoft.com/en-us/library/dd744850.aspx)（在 ShowExpanded 上使用 datatrigger），您仍然会在标题栏下方看到一个空白矩形 - 至少在带有 .NET 4.0.3 的 Win7 上

![截屏](https://i.stack.imgur.com/2YfhR.png)

我希望它像上面显示的延迟活动一样显示，标题下方没有**任何框。**

在我看来，这个烦人的白框是由资源*WorkflowElementDesignerDefaultTemplate*中定义的默认模板引起的，该模板有一个 Margin="7" 的 ContentPresenter：

```
 <ContentPresenter  x:Uid="ContentPresenter_1" Margin="7" Content="{Binding Path=Content, RelativeSource={RelativeSource AncestorType={x:Type swd:WorkflowViewElement}}}" Grid.Row="1">
                <ContentPresenter.Style>
                    <Style x:Uid="Style_10">
                        <Setter x:Uid="Setter_204" Property="ContentPresenter.Visibility" Value="Visible" />
                        <Style.Triggers>
                            <DataTrigger x:Uid="DataTrigger_237" Binding="{Binding Path=Content, RelativeSource={RelativeSource AncestorType={x:Type swd:WorkflowViewElement}}}" Value="{x:Null}">
                                <Setter x:Uid="Setter_213" Property="ContentPresenter.Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ContentPresenter.Style>
            </ContentPresenter> 
```

因此，即使我们在活动设计器 XAML 中定义的包含的内容完全折叠，这个 7 的边距仍然会显示出来。

有什么办法可以避免吗？当设计器显示为折叠时，将边距设置为 0（甚至更好，从默认模板触发包含 ContentPresenter 的 Visibility=Collapsed）？

（我希望这不会太混乱？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:48:58.390

从您的片段中，我无法确切地说出您在做什么。

无论如何，检查[这个](http://code.msdn.microsoft.com/Windows-Workflow-9e867448/sourcecode?fileId=44556&pathId=1687814483)设计师。

基本上你必须有两个`<DataTemplate>`，一个用于折叠模式，另一个用于展开模式。我猜该链接的示例是不言自明的。

# jpa - JPA：级联删除不会删除子项

> ID：15909336
> 
> 赞同：4
> 
> 时间：2013-04-09T18:08:20.483
> 
> 标签：jpa, cascade

编辑：修改问题以更好地反映问题。最初在[这里发布问题](http://pastebin.com/Z2tzh71G)

我有一个父 ( `Context`) 和一个子 ( `User`) 实体（ManyToOne 关系）。父级上的级联“删除”不会删除子级。代码如下：

```
//Owning side - child
@Entity
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;
    @Column(name = DBColumns.USER_NAME)
    private String name;
    @ManyToOne
    @JoinColumn(name = DBColumns.CONTEXT_ID)
    private Context context;
}

//parent
@Entity
public class Context {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;
    @Column(name = DBColumns.CONTEXT_NAME)
    private String name;
    @OneToMany(mappedBy = "context", fetch = FetchType.LAZY, cascade = CascadeType.REMOVE, orphanRemoval = true)
    private Set<User> users = new HashSet<User>();
}

//usage
Context sampleContext = new Context("sampleContext");
em.persist(sampleContext);
User sampleUser = new User(sampleContext, "sampleUser");
em.persist(sampleUser);
em.remove(sampleContext); //should remove user as well but throws foreign key dependency error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:23:11.980

我需要在删除实体之前刷新它：

```
em.refresh(sampleContext);
em.remove(sampleContext); 
```

早些时候，被删除的实体 ( `sampleContext`) 不知道`sampleUser`与之关联的实体（可能是因为`sampleContext`从缓存中获取）。执行`refresh`before`delete`可确保从数据库更新实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:34:24.727

您在 sampleUser 而不是 sampleContext 上调用 remove()，并且 User 不会将 remove 级联到 Context，因此您应该只看到被删除的 User。

如果您在 sampleContext 上调用 remove()，您还必须确保在创建用户时将用户添加到上下文的用户中。您很可能只设置用户的上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:28:12.030

不要将您的关系表映射为实体。使用`@ManyToMany`相反并使您的用户实体成为关系的所有者。

编辑 ：

所以你的关联表主键必须由两个外键组成。

请参阅此[http://giannigar.wordpress.com/2009/09/04/mapping-a-many-to-many-join-table-with-extra-column-using-jpa/](http://giannigar.wordpress.com/2009/09/04/mapping-a-many-to-many-join-table-with-extra-column-using-jpa/)

# c# - XNA 在更新时更新顶点在 VertexBuffer 中的位置

> ID：15909340
> 
> 赞同：0
> 
> 时间：2013-04-09T18:08:27.643
> 
> 标签：c#, 3d, xna-4.0

我正在尝试在 XNA 4.0 中制作的游戏中创建粒子系统。粒子在发射器初始化的世界中渲染。问题是我想在 Update() 上更新粒子的位置，但它不起作用，粒子被渲染但仅在位置 0、0、0 的世界中心。

每个粒子由一组带有纹理的顶点组成。

谁能帮我吗？这是粒子发射器的类：

```
public class ParticleEmitter : RenderableGameObject
{
    VertexBuffer vertexBuffer;
    VertexDeclaration vertexDeclaration;
    Effect bbEffect;

    VertexPositionTexture[] vertices;

    Texture2D texture;
    int noVertices = 0;

    struct Particle
    {
        public Vector3 position;
    }
    Particle[] particles = new Particle[5];

    public ParticleEmitter(Game1 game)
        : base(game)
    {
        SetupParticles();

        SetupVertices();

        bbEffect = game.Content.Load<Effect>("Effects/Particle");
        texture = game.Content.Load<Texture2D>("Textures/fire");
    }

    private void SetupVertices()
    {
        int vertexIndex = 0;
        vertices = new VertexPositionTexture[particles.Length * 6];

        for (int i = 0; i < particles.Length; ++i)
        {
            vertices[vertexIndex++] = new VertexPositionTexture(particles[i].position, new Vector2(0, 0));
            vertices[vertexIndex++] = new VertexPositionTexture(particles[i].position, new Vector2(1, 0));
            vertices[vertexIndex++] = new VertexPositionTexture(particles[i].position, new Vector2(1, 1));

            vertices[vertexIndex++] = new VertexPositionTexture(particles[i].position, new Vector2(0, 0));
            vertices[vertexIndex++] = new VertexPositionTexture(particles[i].position, new Vector2(1, 1));
            vertices[vertexIndex++] = new VertexPositionTexture(particles[i].position, new Vector2(0, 1));
        }

        noVertices = vertexIndex;

        vertexBuffer = new VertexBuffer(game.GraphicsDevice, typeof(VertexPositionTexture), vertices.Length, BufferUsage.WriteOnly);
        vertexBuffer.SetData(vertices);
        vertexDeclaration = new VertexDeclaration(VertexPositionTexture.VertexDeclaration.GetVertexElements());
    }

    private void SetupParticles()
    {
        for (int i = 0; i < particles.Length; ++i)
        {
            particles[i] = new Particle();
            particles[i].position = Position * i;
        }
    }

    private void UpdateVertices()
    {
        for (int i = 0; i < particles.Length; ++i)
        {
            vertices[i] = new VertexPositionTexture(particles[i].position, new Vector2(0, 0));
            vertices[i] = new VertexPositionTexture(particles[i].position, new Vector2(1, 0));
            vertices[i] = new VertexPositionTexture(particles[i].position, new Vector2(1, 1));

            vertices[i] = new VertexPositionTexture(particles[i].position, new Vector2(0, 0));
            vertices[i] = new VertexPositionTexture(particles[i].position, new Vector2(1, 1));
            vertices[i] = new VertexPositionTexture(particles[i].position, new Vector2(0, 1));
        }

        game.GraphicsDevice.SetVertexBuffer(null);
        vertexBuffer.SetData(vertices);
    }

    private void UpdateParticles()
    {
        for (int i = 0; i < particles.Length; ++i)
        {
            particles[i].position = Position;
        }
    }

    public override void Update(GameTime gameTime)
    {
        UpdateParticles();
        UpdateVertices();

        base.Update(gameTime);
    }

    public override void Draw()
    {
        DrawParticles(game.camera.viewMatrix);
    }

    private void DrawParticles(Matrix currentViewMatrix)
    {
        bbEffect.CurrentTechnique = bbEffect.Techniques["CylBillboard"];
        bbEffect.Parameters["xWorld"].SetValue(Matrix.Identity);
        bbEffect.Parameters["xView"].SetValue(currentViewMatrix);
        bbEffect.Parameters["xProjection"].SetValue(game.camera.projectionMatrix);
        bbEffect.Parameters["xCamPos"].SetValue(game.camera.Position);
        bbEffect.Parameters["xAllowedRotDir"].SetValue(new Vector3(0, 1, 0));
        bbEffect.Parameters["xBillboardTexture"].SetValue(texture);

        foreach (EffectPass pass in bbEffect.CurrentTechnique.Passes)
        {
            game.GraphicsDevice.BlendState = BlendState.AlphaBlend;

            pass.Apply();
            game.GraphicsDevice.SetVertexBuffer(vertexBuffer);
            int noTriangles = noVertices / 3;
            game.GraphicsDevice.DrawPrimitives(PrimitiveType.TriangleList, 0, noTriangles);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:49:14.077

在这种方法中，您实际上根本没有改变粒子位置：

```
private void UpdateParticles()
{
    for (int i = 0; i < particles.Length; ++i)
    {
        particles[i].position = Position;
    }
} 
```

您将每个粒子设置到相同的位置，大概是原点。

您可能想要做的是为每个粒子添加速度：

```
struct Particle
{
    public Vector3 position;
    public Vector3 velocity;
} 
```

然后用随机速度初始化每个粒子：

```
// Pass a shared, per-thread instance of Random into this method
private void SetupParticles(Random random)
{
    for (int i = 0; i < particles.Length; ++i)
    {
        particles[i] = new Particle() {
            position = Vector.Zero,
            velocity = new Vector3((float)(random.NextDouble() * 2 - 1),
                                   (float)(random.NextDouble() * 2 - 1),
                                   (float)(random.NextDouble() * 2 - 1))
        };
    }
} 
```

然后根据一些物理模型更新它们（即：随着时间的推移，重力引起的速度和加速度）。

```
Vector3 gravity = new Vector3(0, -9.8f, 0);

private void UpdateParticles(float time)
{
    for (int i = 0; i < particles.Length; ++i)
    {
        particles[i].velocity += gravity * time;
        particles[i].position += particles[i].velocity * time;
    }
} 
```

（注意：此答案中的所有代码都是手工编写的 - 注意语法错误等）

# javascript - 加载 svg 文件（xml）并使用 javascript 提取特定信息

> ID：15909343
> 
> 赞同：1
> 
> 时间：2013-04-09T18:08:32.560
> 
> 标签：javascript, jquery, xml, svg

我正在尝试使用 jquery/javascript svg 示例获取 svg 文件：

```
<svg width="111" height="123" xmlns="http://www.w3.org/2000/svg">
 <g>
  <title>Layer 1</title>
  <rect fill="#ffffff" stroke="#000000" stroke-width="3" x="1.5" y="1.5"width="108.00001" height="119.99999" id="svg_1" rescale="none" move="Static"/>
  <text text_pos="midcenter" xml:space="preserve" text-anchor="middle" font-family="Fantasy" font-size="14" id="Actor Role name" y="68" x="55" stroke-width="0" stroke="#000000" fill="#000000" rescale="none" move="Static">Actor Role</text>
</g>
</svg> 
```

并使用这样的东西从文件中提取数据

```
 $.get(file_url, function(data) {
              var teste=data;
           },'xml')// or use text instead of xml 
```

然后获取所有元素，例如 rect 或 text 并说获取类似的内容（排除内部 ' ' 只是为了知道值的来源）：

“元素”矩形，“重新缩放”无，“移动”静态

对于文本（不包括里面的''）：'Element' rect, 'rescale' none, 'move' static, 'text_pos' midcenter ,'id' Actor Role name, 'node value' Actor Role

**部分解决**

```
 $.get(file_url, function(data) {
       var teste=data; //all data
       rect1=$('<g>').append($(teste).find("text").attr("id")).html();
       rect2=rect1+"-"+$('<g>').append($(teste).find("text").attr("text_pos")).html();
       alert(rect2);
    });
    alert(rect2); 
```

问题发现它没有通过 $.get 之外的变量数据

首先`alert(rect2);`给出正确的数据

第二个`alert(rect2);`给我未定义

任何人都知道为什么它不提供全局变量：X 已经尝试在外部创建变量但也不起作用

很抱歉这忘了更改评论：f 现在它是正确的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-23T19:39:13.060

这就是我加载 SVG 文件的方式：

```
$( document ).ready( function() {
    $.get("path-to-svg.svg", null, function(data){
        var svgNode = $("svg", data);
        var docNode = document.adoptNode(svgNode[0]);
        var pageNode = $("#element-to-hold-svg");
        pageNode.html(docNode);
    }, 'xml');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:57:14.387

我将使用此处找到的代码：Ajax[或 JavaScript：根据服务器响应更改样式](https://stackoverflow.com/questions/3443374/ajax-or-javascript-changing-style-according-to-server-response)

```
 var XMLrequest = newXMLHttpRequest(); // new XML request
    XMLrequest.open("GET", myURL, false); // URL of the SVG file on server
    XMLrequest.send(null); // get the SVG file

    var mySVG = XMLrequest.responseXML.getElementsByTagName("svg")[0]; 
```

因此，您现在可以使用`jQuery(mySVG)`或纯 javascript 来提取属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-23T16:14:06.757

来自文档：[http ://api.jquery.com/jquery.parsexml/](http://api.jquery.com/jquery.parsexml/)

```
var xml = "<rss version='2.0'><channel><title>RSS Title</title></channel></rss>",
xmlDoc = $.parseXML( xml ),
$xml = $( xmlDoc ),
$title = $xml.find( "title" ); 
```

就我而言，svg 数据包括

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> 
```

所以对我来说，获得 SVG 是这样完成的：

```
var xml = "<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="2" height="2"><path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M 1 1 l 1 1"/></svg>",
xmlDoc = $.parseXML( xml ),
$xml = $( xmlDoc ),
$svg = $xml.find( "svg" ); 
```

尽管有人问到“g”元素。进行了快速测试，但无法使用您提供的数据获得结果，无论以下示例代码是否有帮助：

```
var xml = '<?xml version="1.0" standalone="no"?><\!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="5cm" height="5cm">  <desc>Two groups, each of two rectangles</desc>  <g id="group1" fill="red">    <rect x="1cm" y="1cm" width="1cm" height="1cm"/>    <rect x="3cm" y="1cm" width="1cm" height="1cm"/>  </g>  <g id="group2" fill="blue">    <rect x="1cm" y="3cm" width="1cm" height="1cm"/>    <rect x="3cm" y="3cm" width="1cm" height="1cm"/>  </g><\!-- Show outline of canvas using \'rect\' element -->  <rect x=".01cm" y=".01cm" width="4.98cm" height="4.98cm"  fill="none" stroke="blue" stroke-width=".02cm"/></svg>',
xmlDoc = $.parseXML( xml ),
$xml = $( xmlDoc ),
$g = $xml.find( "g" );
console.log($g); 
```

从[http://www.w3.org/TR/SVG/struct.html#Groups获得的 SVG 样本数据](http://www.w3.org/TR/SVG/struct.html#Groups)

# xml - 如何使用 XPath 判断元素是否存在且非空？

> ID：15909348
> 
> 赞同：21
> 
> 时间：2013-04-09T18:08:46.533
> 
> 标签：xml, xpath, mule

我在这一行有一个输入 XML 的东西：

```
<Holding id="12">
    <Policy>
        <HoldingForm tc="1">Individual</HoldingForm>
        <PolNumber>848433</PolNumber>
        <LineOfBusiness tc="1">Life</LineOfBusiness>
        <CarrierCode>67644</CarrierCode>
    </Policy>
</Holding> 
```

我对这个 XML 的操作取决于`<PolNumber>`（它是模式中的一个可选元素）是否具有值。我正在使用 Mule 3.3`xpath`求值器来执行此操作，我的 XPath 表达式如下所示：

```
<expression-filter expression="#[xpath('//acord:Holding/acord:Policy/acord:PolNumber').text != empty]"/> 
```

只要`<PolNumber>`元素存在或`<PolNumber/>`为空元素，它就可以正常工作。但是如果`<PolNumber>`不存在，上面的表达式会抛出异常。

我尝试使用[XPath 布尔](http://www.w3.org/TR/xpath/#function-boolean)函数，但它返回`true`. `<PolNumber/>`有没有更好的方法来检查元素是否存在且非空？

编辑：

这是我的 mule 配置中命名空间管理器的配置

```
<xm:namespace-manager includeConfigNamespaces="true">
    <xm:namespace prefix="acord" uri="http://ACORD.org/Standards/Life/2" />
    <xm:namespace prefix="soap" uri="http://schemas.xmlsoap.org/soap/encoding/" />
</xm:namespace-manager> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-10T02:38:46.623

**使用**：

```
boolean(//acord:Holding/acord:Policy/acord:PolNumber/text()[1]) 
```

这会产生`true()`if`//acord:Holding/acord:Policy/acord:PolNumber`有第一个文本节点子节点，`false()`否则。

**请注意**：这比仅将计数与 0 进行比较来计算所有文本节点子节点更有效。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-09T20:47:59.703

您可以`boolean(...)`用于检查它是否为空，但请确保*查看*元素内部。

```
boolean(//PolNumber/node()) 
```

如果包含其他节点，这也适用。如果要限制为文本节点，请替换`node()`为`text()`. 您可以改为使用`//text()`，然后查询也将为`<PolNumber/>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-17T18:19:16.230

怎么样`expression="#[?xpath('//acord:Holding/acord:Policy/acord:PolNumber').text != empty]"`？这应该适用于所有情况

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-01T07:39:35.907

也许我在这里有点晚了，但答案有点令人困惑。当文本为空白或有空格但没有字符时，此选项将始终返回 false。

```
boolean//Holding/Policy/PolNumber/child/text()[normalize-space()] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T18:11:30.220

如何使用`count`来获取文本节点的数量：

```
<expression-filter
    expression="#[xpath('count(//Holding/Policy/PolNumber/child::text())') != 0]"/> 
```

# java - 如何在 eclipse Juno 中打开 JSP 错误验证？

> ID：15909352
> 
> 赞同：0
> 
> 时间：2013-04-09T18:09:05.367
> 
> 标签：java, eclipse, jsp, eclipse-juno

我看到很多人问如何关闭验证，但我需要打开 JSP 验证，因为我们得到了错误的代码合并，这些代码合并在我们的系统中直到运行时才被检测到。

我在用：

*   面向 Web 开发人员的 Eclipse Java EE IDE。
*   版本：Juno Service Release 1
*   版本号：20120920-0800

我已按照有关创建新动态 Web 项目、安装 Tomcat 等的说明进行操作，但仍然一无所获……是否有插件可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:16:08.760

*   选择`Project`-> `Properties`-> `Validation`->`Configure Workspace Settings`
*   选择`JSP Syntax Validator`

# git - Git post-checkout - 如果 Composer 安装失败如何拒绝推送

> ID：15909353
> 
> 赞同：3
> 
> 时间：2013-04-09T18:09:08.517
> 
> 标签：git, bash, composer-php, githooks

所以我在我的服务器上设置了一个 post-checkout hook，它将运行 Composer

```
#!/bin/sh
# Composer Git Checkout Hook

PROJECT_NAME=example.com

cd /home/www/$PROJECT_NAME/htdocs

unset GIT_DIR

# Process composer.json if one exists.
if [ -f composer.json ]
then
    echo "Processing Composer"

    # Run the composer install
    composer.phar install
fi 
```

部署时，它可以工作。但是，由于是新服务器并且我忘记启用 cURL 模块，因此安装失败，但接受了推送。

```
$ git push deploy master

Counting objects: 5, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 348 bytes, done.
Total 3 (delta 2), reused 0 (delta 0)
remote: Processing Composer
remote: Loading composer repositories with package information
remote: Installing dependencies from lock file
remote: Your requirements could not be resolved to an installable set of packages.
remote: 
remote:   Problem 1
remote:     - Installation request for facebook/php-sdk dev-master -> satisfiable by facebook/php-sdk dev-master.
remote:     - facebook/php-sdk dev-master requires ext-curl * -> the requested PHP extension curl is missing from your system.
remote: 
To ssh://adam@my-server.net/home/www/example.com/git
   0fa8a61..afa63ae  master -> master 
```

如何获取 Composer 安装和退出的状态，以便远程存储库拒绝推送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:10:10.870

首先，你的设置有问题。如果`deploy`是一个非裸仓库并且主分支已签出（我假设），则您无法推送到该仓库。另请参见[此处](https://stackoverflow.com/questions/2816369/git-push-error-remote-rejected-master-master-branch-is-currently-checked)。

如果您希望能够拒绝推送，则需要在`pre-receive`或`update` [钩子](http://git-scm.com/book/en/Customizing-Git-Git-Hooks#Server-Side-Hooks)中这样做。您可以使用这些来检查 Composer 配置文件是否已更改（在这种情况下，它将在提交中），如[本问题](https://stackoverflow.com/questions/2569960/git-pre-receive-hook)所述。运行 Composer 本身需要检出，或者至少需要配置文件。运行 Composer 会减慢提交过程，因为 git 必须等到 Composer 完成才能向客户端报告。请注意，对于 post-receive 挂钩也是如此，即使它们不能拒绝推送。

你可以做的是使用`update`钩子，检查它是否包含`composer.json`在 master 分支中使用类似[这样](https://stackoverflow.com/questions/2569960/git-pre-receive-hook)的更新，如果它包含更新的文件然后运行 ​​Composer 以找出它是否包含错误。您可以专门为此目的创建一个文件夹。目前我手头没有 Composer。但是该过程的返回值通常`0`表示成功，非零表示失败。

# java - GWT 和 ScriptEngineManager

> ID：15909355
> 
> 赞同：3
> 
> 时间：2013-04-09T18:09:11.487
> 
> 标签：java, javascript, gwt

我有个问题。我正在尝试在我的 GWT 应用程序中使用 JavaScript eval 函数，我创建了正在创建管理器的类

```
ScriptEngineManager mgr = new ScriptEngineManager();
ScriptEngine engine = mgr.getEngineByName("JavaScript"); 
```

像这样使用 eval

```
engine.eval(calculate); 
```

每当我尝试与该经理一起使用方法时，我都会遇到错误：

```
No source code is available for type javax.script.ScriptException; did you forget to inherit a required module?
No source code is available for type javax.script.ScriptEngineManager; did you forget to inherit a required module?
No source code is available for type javax.script.ScriptEngine; did you forget to inherit a required module? 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:23:19.047

GWT 仅模拟完整 JRE 的一个子集，用于客户端，而`ScriptEngineManager`不是该集合的一部分。实际上，整体`javax.*`根本没有被模仿。通常，这是由于 javascript 中没有任何类型的反射对应物和/或线程/并发处理。

有关模拟类的列表，请参见[此处。](https://developers.google.com/web-toolkit/doc/1.6/RefJreEmulation)

我不明白您要做什么，但是如果您需要使用 javascript`eval()`函数评估 JSON 字符串，只需使用[`JSONParser.parse(String json)`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/json/client/JSONParser.html#parse%28java.lang.String%29), 或[`JsonUtils.safeEval(String json)`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/JsonUtils.html#safeEval%28java.lang.String%29).

# python - Python 循环或输出 - 仅在我的计算机上

> ID：15909361
> 
> 赞同：2
> 
> 时间：2013-04-09T18:09:29.723
> 
> 标签：python, web-crawler, beautifulsoup

我有一个奇怪的问题，我的计算机对这个 python 脚本的反应与其他人的计算机不同（我在 macOX Mountain Lion python v =2.7 上）。知道如何解决这个问题，或者请报告系统上的输出？我只得到一行输出，而其他人似乎正确地得到了所有行。不幸的是，它无法在我的系统上运行，而我正是需要它才能运行的人。我的系统打印出正在爬取的表格的最后一行：

```
import urllib
from bs4 import BeautifulSoup

#file_name = "/users/ripple/uspc-cpc.txt"
#file = open(file_name,"w")
i=125
while i==125:
    url = "http://www.uspto.gov/web/patents/classification/cpc/html/us" + str(i) + "tocpc.html"
    print 'Grabbing from: ' + url + '\n'
    i += 1
    #get the table data from the page
    data = urllib.urlopen(url).read()
    #send to beautiful soup
    soup = BeautifulSoup(data)
    table = soup.find("table", width='80%')
    for tr in table.findAll('tr')[2:]:
        col = tr.findAll('td')
        #print 'hi'
        uspc = col[0].get_text().encode('ascii','ignore').replace(" ","")
        cpc1 = col[1].get_text().encode('ascii','ignore').replace(" ","")
        cpc2 = col[2].get_text().encode('ascii','ignore').replace(" ","")
        cpc3 = col[3].get_text().encode('ascii','ignore').replace(" ","").replace("more...", "")
        record = uspc + ',' + cpc1 + ',' + cpc2 + ',' + cpc3 + '\n'
        print record
        #file.write(record)

#file.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T18:38:19.277

BeautifulSoup 可以使用多种不同的解析器。有关详细信息，请参阅[文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser)。但简短的版本是：

如果你有`lxml`，它会使用它。如果没有，它会尝试`html5lib`. 如果没有，它使用 stdlib `html.parser`。不同的人有不同版本`lxml`的. 另外，在 Python 2.7.2 和 2.7.3 之间发生了巨大的变化（特别是，它在 2.7.3 中更加宽松）。`libxml2``html5lib``html.parser`

我使用安装了 pip 的 BS 4.1.3 在 Mountain Lion 10.8.2 上运行了 64 位 Apple Python 2.7.2，使用的解析器数量与我周围的解析器一样多，这就是我得到的：

*   使用 Apple libxml2 2.7.8 安装 pip 的 lxml 3.1.0：69 行。
*   pip-installed lxml 3.1.0 和 Apple libxml2 2.7.8 在 XML 模式下：69 行。
*   使用 Homebrew libxml2 2.9.0 安装 pip 的 lxml 3.1.0：0 行。
*   在 XML 模式下安装了带有 Homebrew libxml2 2.9.0 的 pip 安装的 lxml 3.1.0：69 行。
*   pip 安装的 html5lib 0.95-dev：0 行。
*   标准库 html.parser 2.7.2：1 行。
*   向后移植的 html.parser 2.7.4：69 行。

因此，HTML 显然有问题，一些解析器可以处理，但其他解析器不能。为了看看它有什么问题，我将它输入[W3C 在线验证器](http://validator.w3.org/check?uri=http://www.uspto.gov/web/patents/classification/cpc/html/us125tocpc.html&charset=%28detect%20automatically%29&doctype=Inline&group=0)，它发现了 139 个错误，并且无法从中构建语义轮廓。

它适用于某些机器而不适用于其他机器的原因是 bs4 在这些机器上使用不同的解析器。特别是，在您的机器上，您可能没有安装任何第三方解析器，并且您使用的是 Apple 的 Python 2.7.2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:26:59.440

如果是完全相同的代码，请尝试删除 .pyc

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:03:21.473

谢谢大家的回复。我使用的是名为 TextWrangler 的 OS X 文本编辑器。我将我的代码复制到 Mac 的本机文本编辑器并将其粘贴回 textwrangler 并且完全相同的代码现在可以工作。很生气，但我不会争论。看起来可能是一些缩进问题。！！！请注意，TextWrangler 文本编辑器似乎经常对我造成此问题，并且还会将不可见字符放入代码中。

# css - 响应式设计：为什么高度为零和 padding-bottom 可以使 div 响应大小？

> ID：15909369
> 
> 赞同：8
> 
> 时间：2013-04-09T18:10:08.683
> 
> 标签：css, responsive-design, zurb-foundation

在查看了 Zurb Foundation 的代码后，我注意到他们正在使用这样的 CSS 方法来允许响应式方形 div：

```
.div{
    position:relative;
    width:33%;
    height:0;
    padding-bottom:33%;
}
.divInner{
    position:absolute;
    width:100%;
    height:100%;
} 
```

我一直在一些较新的项目中使用这种方法（仍在私人开发中），但不知道浏览器对它的支持，也不知道为什么高度甚至能够模仿宽度大小。有谁知道为什么会这样？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T19:06:29.437

第二个元素相对于容器绝对定位。这是相对定位的。

在 CSS 中，基于百分比的填充是相对于元素的宽度而言的。这就是产生方形效果的原因。

这也是为什么如果您向所有边添加相同大小的填充，所有边都具有相同百分比的填充。它与一个测量值（宽度）相关，而不是宽度和高度。如果元素不是方形的，这将导致填充倾斜。

# c# - DataRepeater Control WinForms 删除虚线

> ID：15909372
> 
> 赞同：3
> 
> 时间：2013-04-09T18:10:22.590
> 
> 标签：c#, .net, winforms, datarepeater

我`DataRepeater`在 WinForms 应用程序中有一个控件。

问题很简单：如何摆脱选择项目时总是出现的虚线？

![在此处输入图像描述](https://i.stack.imgur.com/JmVoa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-22T10:16:10.253

如果您设置`_dataRepeater.ItemHeaderVisible = false`. 由于项目标题不可见，中继器显示此虚线以显示哪个是中继器的当前项目。

事实证明，实际上有一种简单的方法可以实现这一点：

```
_dataRepeater.ItemHeaderVisible = true;
_dataRepeater.ItemHeaderSize = 0; 
```

这将实现相同但没有虚线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T20:32:38.200

不幸的是，删除虚线是“当前”不可能的。（可能永远不会）

`DataRepeater`control 是一个非常酷且有用的控件，但它似乎有一些问题和限制。

# android - 如何在Android中每5分钟刷新一次文件读取？

> ID：15909374
> 
> 赞同：1
> 
> 时间：2013-04-09T18:10:25.827
> 
> 标签：android, file, android-activity, refresh, inputstream

我试图每 5 分钟读取一次文件，但我真的不知道怎么做！

这是我的代码：

```
public class MainActivity extends Activity implements OnClickListener {

Button bVe, bCl, bCo, bAd;
File tarjeta = Environment.getExternalStorageDirectory();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    bVe = (Button) findViewById(R.id.bVehiculos);
    bCl = (Button) findViewById(R.id.bClientes);
    bAd = (Button) findViewById(R.id.bAdmin);

    bVe.setOnClickListener(this);
    bCl.setOnClickListener(this);
    bAd.setOnClickListener(this);

    File file1 = new File(tarjeta.getAbsolutePath()+"/.Info/Prices", "values.txt");        
    try {
        FileInputStream fIn1 = new FileInputStream(file1);   
        InputStreamReader archivo1 = new InputStreamReader(fIn1);
        BufferedReader br1 = new BufferedReader(archivo1);
        String linea1 = br1.readLine();
        String texto1 = "";
        while (linea1!=null)
        {
            texto1 = texto1 + linea1 + "\n";
            linea1 = br1.readLine();
        }
        br1.close();
        archivo1.close();

    } catch (IOException e) {
        Toast.makeText(this, "Cant read", Toast.LENGTH_SHORT).show();
    } 
```

我需要的是当我在这个活动中时，它每 5 分钟读取一次文件。

我将非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:20:26.353

为什么要每五分钟检查一次？您可以使用`FileObserver`：

```
FileObserver observer = 
new FileObserver(Environment.getExternalStorageState() +"/documents/") {
    @Override
    public void onEvent(int event, String file) {
        if(event == FileObserver.MODIFY && file.equals("fileName")){ 
            Log.d("TAG", "File changed");
            // do something
        }
    }
}; 
```

这不是更容易且更少的 CPU/电池消耗，是吗？[在https://gist.github.com/shirou/659180](https://gist.github.com/shirou/659180)查看另一个很好的例子。

ps 在您的情况下，您可能会使用...

```
new FileObserver(tarjeta.getAbsolutePath()+"/.Info/Prices/")

file.equals("values.txt") 
```

...可能还有更多的事件类型。

只是一个想法......干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:15:58.547

尝试这样的事情：

```
getHandler().post(new Runnable() {
    @Override
    void run() {
        (code to read file)
        getHandler().postDelayed(this,300000);
    }
}); 
```

它所做的是将此 Runnable 推送到 ui 线程中，该线程在 5 分钟（300000 毫秒）内将自身发布到同一线程中。

# ruby-on-rails - 分别验证多列的唯一性

> ID：15909375
> 
> 赞同：0
> 
> 时间：2013-04-09T18:10:29.040
> 
> 标签：ruby-on-rails

我有一个`user`带有`username`和`nickname`字段的模型。我想做的是创建一个`validations`规则，可以单独检查两个字段的唯一性，而不是作为组合（或我认为的范围）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:46:46.633

关于什么

```
validate do |r|
  if where("username LIKE ? OR nickname LIKE ?", r.username, r.username).first
    r.errors.add :username, "is already taken"
  end

  if where("username LIKE ? OR nickname LIKE ?", r.nickname, r.nickname).first
    r.errors.add :nickname, "is already taken"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:27:21.890

你不能这样做吗？

```
validates :username, :uniqueness => true
validates :nickname, :uniqueness => true 
```

# jquery - ASP MVC3 - BeginCollectionItem 返回空值

> ID：15909382
> 
> 赞同：6
> 
> 时间：2013-04-09T18:10:43.783
> 
> 标签：jquery, asp.net-mvc-3, asp.net-mvc-2, icollection

我正在尝试使用Steve Sanderson 的关于将集合项绑定到模型[的博客文章。](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)但是，我看到一些奇怪的行为，我在帖子或其他讨论中找不到答案。

在我的模型`BankListMaster`中，我有`ICollection`一个单独的模型对象`BankAgentId`。`BankListMaster`并且`BankListAgentId`在我们的 SQL 数据库中有一对多的关系。

我在`Edit`页面上遇到了问题。当页面加载时，我们当前与`BankListMaster`我正在使用的项目关联的三个代理 ID 会正确加载。但是，如果我点击“保存”，我会看到`ICollection`对象 ( `bankListAgentId`) 包含三个项目，但每个字段都包含一个`null`值。

如果我选择`Add another`，则按照[博客文章](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)中的说明，Ajax 会调用部分视图，该视图会正确附加到表中。

现在，如果我点击“保存”，我会看到`ICollection`对象计数增加了一个项目，计数为 4。最初加载的所有项目都`GET`包含`null`字段值，但新附加项目的`AgentId`和`StateCode`字段包含正确的信息（但是，新项目的所有其他字段都是`null`）。

对 ASP MVC 来说还是比较新的，所以我不确定发生了什么或看什么方向。

这是主视图中的表格。我已经在有和没有这些`@Html.Hidden`物品的情况下尝试过这个，并收到了相同的结果。

```
@model Monet.Models.BankListMaster

@{
    ViewBag.Title = "Edit";
}
    <fieldset>
        <legend>Stat(s) Fixed</legend>
        <table id="fixedRows">
            <thead>
                <tr>
                    <th>State Code</th>
                    <th>Agent ID</th>
                    <th></th>
                    <th></th>
                </tr>
           </thead>
           <tbody>

                @for (int i = 0; i < Model.Fixed.Count; i++)
                {
                     using (Html.BeginCollectionItem("BankListAgentId"))
                    {                        
                             @Html.HiddenFor(m => Model.Fixed[i].BankID)
                             @Html.HiddenFor(m => Model.Fixed[i].TableId)
                             @Html.HiddenFor(m => Model.Fixed[i].FixedOrVariable)   
                            <tr>
                                <td>
                                    @Html.DropDownListFor(m => Model.Fixed[i].StateCode,
                                        (SelectList)ViewBag.StateCodeList, Model.Fixed[i].StateCode)
                                </td>
                                <td>
                                    @Html.TextBoxFor(m => Model.Fixed[i].AgentId)
                                    @Html.ValidationMessageFor(m => Model.Fixed[i].AgentId)
                                </td>
                                <td>
                                    <a href="javascript:void(0)" class="deleteRow">delete</a>
                                </td>
                                @*<td><a href="#" onclick="$('#item-@Model.AgentId').parent().remove();" style="float:right;">Delete</a></td>*@
                            </tr>  

                    }
                }

           </tbody>

        </table>
        <br />
        <a href="javascript:void(0)" class="addFixed">Add Another</a>
    </fieldset> 
```

这是部分视图。同样，我尝试了使用和不使用这些`@Html.Hidden`项目并收到相同的结果。

```
@model Monet.Models.BankListAgentId

@{
    Layout = null;
}
@using (Html.BeginCollectionItem("BankListAgentId"))
{ 
    @Html.HiddenFor(model => model.TableId)        
    @Html.HiddenFor(model => model.BankID)
    @Html.HiddenFor(model => model.FixedOrVariable)

    <tr>
        <td>
            @Html.DropDownListFor(model => model.StateCode,
                (SelectList)ViewBag.StateCodeList, Model.StateCode)
        </td>
        <td>
            @Html.EditorFor(model => model.AgentId)
            @Html.ValidationMessageFor(model => model.AgentId)
        </td>
        <td>
            <a href="javascript:void(0)" class="deleteRow">delete</a>

        </td>
        @*<td><a href="#" onclick="$('#item-@Model.AgentId').parent().remove();" style="float:right;">Delete</a></td>*@
    </tr>
} 
```

这是 Ajax 调用

```
$(document).ready(function () {

    $(".addFixed").click(function () {
        $.ajax({
            url: '@Url.Action("BlankFixedRow", "BankListMaster")',
            dataType: 'html',
            cache: false,
            success: function (html) {
                $("#fixedRows > tbody").append('<tr>' + html + '</tr>');
            }
        });
    });
}); 
```

这是调用局部视图的控制器方法

```
 public ViewResult BlankFixedRow()
    {
        SelectList tmpList = new SelectList(new[] { "AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NA", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "PR", "RI", "SC", "SD", "TN", "TX", "UT", "US", "VT", "VI", "VA", "WA", "WV", "WI", "WY" });
        ViewBag.StateCodeList = tmpList;

        return View("FixedPartialView", new BankListAgentId());
    } 
```

这是`BankListMaster`模型

```
public partial class BankListMaster
{
    public BankListMaster()
    {
        this.BankListAttachments = new HashSet<BankListAttachments>();
        this.BankListAgentId = new HashSet<BankListAgentId>();
    }

    public int ID { get; set; }
    public string BankName { get; set; }
    public string LastChangeOperator { get; set; }
    public Nullable<System.DateTime> LastChangeDate { get; set; }

    public virtual ICollection<BankListAttachments> BankListAttachments { get; set; }
    public virtual ICollection<BankListAgentId> BankListAgentId { get; set; }
} 
```

这就是`BankListAgentId`模型

```
public partial class BankListAgentId
{
    public string AgentId { get; set; }
    public int BankID { get; set; }
    public string FixedOrVariable { get; set; }
    public string StateCode { get; set; }
    public int TableId { get; set; }

    public virtual BankListMaster BankListMaster { get; set; }
} 
```

这是通过 fiddler 从帖子上的表单发送回控制器的内容。索引为[1](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)、[2](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)和[3](https://i.stack.imgur.com/1jZ7b.png)的项目是最初从数据库中提取的项目。最后一项是通过对局部视图的 jQuery/Ajax 调用添加的。

![在此处输入图像描述](https://i.stack.imgur.com/1jZ7b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T07:21:04.277

我的解决方案是： html.beginCollectionItem 中使用的所有内容都必须在部分视图中。所以你的解决方案可能是这样的：

主视图

```
 @model Monet.Models.BankListMaster

 @{
     ViewBag.Title = "Edit";
 }
     <fieldset>
         <legend>Stat(s) Fixed</legend>
         <table id="fixedRows">
         <thead>
              <tr>
                   <th>State Code</th>
                   <th>Agent ID</th>
                   <th></th>
                   <th></th>
             </tr>
        </thead>
        <tbody>

            @for (int i = 0; i < Model.Fixed.Count; i++)
            {
                 @Html.Partial("name", item)     
            }

       </tbody>

    </table>
    <br />
    <a href="javascript:void(0)" class="addFixed">Add Another</a>
</fieldset> 
```

局部视图“名称”

```
 @model Monet.Models.BankListMaster

 using (Html.BeginCollectionItem("BankListAgentId"))
 {                        
      @Html.HiddenFor(m => Model.Fixed[i].BankID)
      @Html.HiddenFor(m => Model.Fixed[i].TableId)
      @Html.HiddenFor(m => Model.Fixed[i].FixedOrVariable)   
      <tr>
           <td>
                @Html.DropDownListFor(m => Model.Fixed[i].StateCode,
                  (SelectList)ViewBag.StateCodeList, Model.Fixed[i].StateCode)
           </td>
           <td>
                @Html.TextBoxFor(m => Model.Fixed[i].AgentId)
                @Html.ValidationMessageFor(m => Model.Fixed[i].AgentId)
           </td>
           <td>
                <a href="javascript:void(0)" class="deleteRow">delete</a>
           </td>
           @*<td><a href="#" onclick="$('#item-@Model.AgentId').parent().remove();" style="float:right;">Delete</a></td>*@
           </tr>  

 } 
```

这不是完整的解决方案，但你必须这样做，它对我有用。希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-19T13:38:57.883

我被困在一个类似的问题上几个小时。我的项目集合 (Choices) 在包含多个项目时将返回 null。但是，就像您一样，我的数据似乎渲染得很好：

```
{
    "QuestionTemplateId":"1",
    "Position":"0",
    "CardId":"1",
    "Label":"Question#1",
    "AdminComments":"",
    "Type":"ComboBox",
    "ModelType":"MyProject.Areas.DGM.Models.ViewModels.Controls.ComboBoxViewModel",
    "ComboQuestionId":"1",
    "Choices.Index": ["dc0e6eea-5a8e-4971-8f9f-4d6e1c290300","52f2b780-c21e-4633-b880-bdff5d815eaf"],
    "Choices[dc0e6eea-5a8e-4971-8f9f-4d6e1c290300].Label":"Choice #1",
    "Choices[dc0e6eea-5a8e-4971-8f9f-4d6e1c290300].Score":"4",
    "Choices[52f2b780-c21e-4633-b880-bdff5d815eaf].Label":"Choice #2",
    "Choices[52f2b780-c21e-4633-b880-bdff5d815eaf].Score":"7"
} 
```

然后我意识到我的问题可能与数据 POST 有关。当用户提交表单时，我会进行以下`AJAX`调用：

```
$("#questionForm").on('submit', function () {
    if ($(this).valid()) {
        var data = $(this).serializeObject(); // from here: http://stackoverflow.com/a/1186309/2835243
        $.ajax({
            type: 'POST',
            url: this.action,
            contentType: 'application/json',
            data: JSON.stringify(data) // this is what generated the above JSON
        });
    }
} 
```

对我来说似乎解决它的方法是将数据发送为（ jQuery 的 AJAX`x-www-form-urlencoded`的默认值）而不是. 因此，我将 AJAX 调用更改为以下内容：`contentType``json`

```
$.ajax({
    type: 'POST',
    url: this.action,
    data: $(this).serialize()
}); 
```

# liferay - 由于引用了虚拟主机，无法修改 Liferay 中的 Web 内容显示

> ID：15909383
> 
> 赞同：1
> 
> 时间：2013-04-09T18:10:45.483
> 
> 标签：liferay, virtualhost, liferay-6, web-content

我有以下配置：

*   Liferay Portal Community Edition 6.1 CE GA2 与 Tomcat 捆绑
*   同一 Liferay 门户实例下的 x2 个站点：

    **somewebsite.com**（在控制面板下为网站指定了虚拟主机）

    **mobile.somewebsite.com**（在控制面板下为网站指定虚拟主机）

当我以管理员用户身份登录 somewebsite.com 时，我应该能够根据站点页面部分和 Liferay 用户指南在以下 URL 编辑移动网站页面

[http://somewebsite.com/web/mobile](http://somewebsite.com/web/mobile)

我真的可以通过[http://somewebsite.com/web/mobile/home访问](http://somewebsite.com/web/mobile/home)[http://mobile.somewebsite.com/home](http://mobile.somewebsite.com/home)，但是当我将 Web 内容显示添加到页面并单击配置时，我收到“你可以没有所需的权限。”

当我查看控制台时，我发现它试图加载[http://mobile.somewebsite.com/home?p_p_auth=](http://mobile.somewebsite.com/home?p_p_auth=) .....

你能解释一下为什么会这样吗？对我来说更重要的是 - 如何解决这个问题？

管理员应该能够登录[http://somewebsite.com/](http://somewebsite.com/)并修改在门户控制面板下创建的任何站点。

期待任何建议。

# jquery - 循环跨度并重置/增加其文本

> ID：15909384
> 
> 赞同：1
> 
> 时间：2013-04-09T18:10:45.547
> 
> 标签：jquery

我有一张桌子，可以说是 5 行。在第一个元素中是带有行号的跨度。

```
<tr>
    <td><span name="rowNum">1</span></td>
    <td>...stuff...</td>
</tr>
<tr>
    <td><span name="rowNum">2</span></td>
    <td>...stuff...</td>
</tr>    
<tr>
    <td><span name="rowNum">3</span></td>
    <td>...stuff...</td>
</tr>    
<tr>
    <td><span name="rowNum">4</span></td>
    <td>...stuff...</td>
</tr>
<tr>
    <td><span name="rowNum">5</span></td>
    <td>...stuff...</td>
</tr> 
```

但是，我有一个可能会删除表行的 jquery 函数。

我想向删除函数添加一些代码，该函数循环遍历跨度并将内容重置为正确的行号。例如，如果您删除第一行，跨度 2 现在会说 1，等等。

我想我会设置一个计数器 = 1 来表示跨度值*应该*是什么，然后在跨度上循环，如果跨度文本不是 = 到计数器，则将其重置。然后计数器应递增。

我只是在弄清楚如何遍历跨度并获得它们的价值时遇到了麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:13:31.320

删除一行后，您可以使用方法更改跨度的文本内容`text`，它在`each`内部使用方法。

```
$('.rowNum span').text(function(index) {
   return ++index;
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:23:43.343

您只能使用 CSS，不需要 JavaScript：http: [//jsfiddle.net/brian_griffin/SNB89/](http://jsfiddle.net/brian_griffin/SNB89/)

### CSS

```
table { counter-reset: line-number;}
td:first-child:before {
content: counter(line-number) ".";
counter-increment: line-number;
padding-right: 0.3em; } 
```

或者`<OL>`按照上面的建议使用（编号列表）。

# c - Malloc 示例与 qsort 一起崩溃？

> ID：15909386
> 
> 赞同：2
> 
> 时间：2013-04-09T18:10:54.610
> 
> 标签：c, malloc, qsort

嘿，我找到了一个使用 malloc 和结构数组的示例，该数组非常适合我正在尝试做的事情，但是当我将它与 qsort 结合时，我需要按结构的“数字”值排序我是运气不好。该代码可以正常运行，没有错误，但实际上并没有运行，只是崩溃了。由于我是初学者，我不知道是什么导致了问题。如果有人可以对此有所了解，那就太好了！

```
// Example code from "a tutorial on 'dynamic' arrays in C"
// http://fydo.net

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct DATA{
    char *name;
    int number;
} DATA;

DATA    *the_array = NULL;
int     num_elements = 0; // To keep track of the number of elements used
int     num_allocated = 0; // This is essentially how large the array is
int  compare(struct DATA *, struct DATA *);
typedef int (*compfn)(const void*, const void*);

int compare(struct DATA *elem1, struct DATA *elem2)
{
   if ( elem1->number < elem2->number)
      return -1;

   else if (elem1->number > elem2->number)
      return 1;

   else
      return 0;
}

int AddToArray (DATA item)
{
    if(num_elements == num_allocated) { // Are more refs required?

        // Feel free to change the initial number of refs and the rate at which refs are allocated.
        if (num_allocated == 0)
            num_allocated = 3; // Start off with 3 refs
        else
            num_allocated *= 2; // Double the number of refs allocated

        // Make the reallocation transactional by using a temporary variable first
        void *_tmp = realloc(the_array, (num_allocated * sizeof(DATA)));

        // If the reallocation didn't go so well, inform the user and bail out
        if (!_tmp)
        {
            fprintf(stderr, "ERROR: Couldn't realloc memory!\n");
            return(-1);
        }

        // Things are looking good so far, so let's set the
        the_array = (DATA*)_tmp;
    }

    the_array[num_elements] = item;
    num_elements++;

    return num_elements;
}

int main()
{
    // Some data that we can play with
    char *names[6] = { "Steve", "Bill", "George", "fydo", "Dave", "Jim" };
    int numbers[6] = { 42, 33, 15, 74, 5, 20 };
    int i;

    // Populate!
    for (i = 0; i < 6; i++)
    {
        DATA temp;

        temp.name = malloc((strlen(names[i]) + 1) * sizeof(char));
        strncpy(temp.name, names[i], strlen(names[i]) + 1);
        temp.number = numbers[i];

        if (AddToArray(temp) == -1) // If there was a problem adding to the array,
            return 1;               // we'll want to bail out of the program. You
                                    // can handle it however you wish.
    }

    //sort by number:
    qsort((void *) &the_array, 6, sizeof(struct DATA), (compfn)compare );

    // Regurgitate!
    for (i = 0; i < 6; i++)
    {
        printf("%s's number is %d!\n", the_array[i].name, the_array[i].number);
    }

    // Deallocate!
    for (i = 0; i < 6; i++)
    {
        free(the_array[i].name);
    }

    free(the_array);

    // All done.
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:16:03.413

您以错误的方式传递数组。

它应该是

```
qsort(the_array, 6, sizeof(struct DATA), (compfn)compare ); 
```

[qsort](http://linux.die.net/man/3/qsort)期望作为第一个参数的指针指向要排序的数据开始的位置，这`the_array`不是它的地址`&the_array`，因为您已经以这种方式声明了它

```
DATA    *the_array = NULL; 
```

输出将是：

```
Dave's number is 5!
George's number is 15!
Jim's number is 20!
Bill's number is 33!
Steve's number is 42!
fydo's number is 74! 
```

发生的情况是[qsort](http://linux.die.net/man/3/qsort)认为数组从地址`the_array`开始并开始访问不允许访问的其他内存区域。

**编辑**

我已经用 4000 个单词尝试过了，但不能让它崩溃，这是我修改代码以从文件中读取的方法，（[strdup](http://linux.die.net/man/3/strdup)很方便等同于`malloc`+ `strcpy`）

```
char name[100];
while(1 == scanf("%s", name)) {
    DATA temp;
    temp.name = strdup(name);
    temp.number = rand();
    if (AddToArray(temp) == -1) 
        return 1;               
} 
```

像这样执行：

```
out.exe < lorem.txt 
```

数据正确排序、打印和释放

# .net - 为什么接口合同不适用于装配之外？

> ID：15909401
> 
> 赞同：3
> 
> 时间：2013-04-09T18:11:50.553
> 
> 标签：.net, unit-testing, generics, visual-studio-2012, code-contracts

我很难确保应用我使用代码合同为接口编写的（非常简单的）合同。

我在我们的一个项目中的“共享” dll 中有此代码。目的是我们的几个模块可以使用相同的基础架构并实现自己的处理程序和命令类型：

```
[ContractClass(typeof(CommandHandlerContracts<>))]
public interface ICommandHandler<TCommand>
    where TCommand : ICommand
{
    void Handle(TCommand _command);
}

[ContractClassFor(typeof(ICommandHandler<>))]
public class CommandHandlerContracts<TCommand> : ICommandHandler<TCommand>
    where TCommand : ICommand
{
    public void Handle(TCommand _command)
    {
        Contract.Requires<ArgumentNullException>(_command != null);
    }
} 
```

如果我然后像这样运行一个简单的测试，它会失败，因为没有抛出异常：

```
public class TestCommand : ICommand
{
    public string Field { get; set; }
}

public class TestHandler : ICommandHandler<TestCommand>
{
    public void Handle(TestCommand _command) { }
}

[TestClass]
public class UnitTest1
{
    [TestMethod]
    [ExpectedException(typeof (ArgumentNullException))]
    public void TestMethod1()
    {
        new TestHandler().Handle(null);
    }
} 
```

一旦我将接口和合同类定义从另一个 dll 复制/粘贴到测试类上，一切都会开始工作。接口与实现接口位于不同的 dll 中这一事实似乎存在问题。

我目前正在使用 Visual Studio 2012 和 Microsoft 测试类 ('Microsoft.VisualStudio.QualityTools.UnitTestFramework') 进行单元测试。应用程序和测试 dll 都针对 .net4.0 框架。

代码合同设置为“标准合同要求”，两个项目的合同参考程序集的完整运行时检查和“DoNotBuild”（起初我不确定单元测试项目是否需要它，但我也将它添加到徒劳无功）。

我认为这应该可以解决问题，我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:24:44.167

我对代码合同如何实际生成合同条款有错误的想法。事实证明，它需要为所有引用的程序集构建合同引用程序集，以确保运行时检查（在我的项目中它被设置为“DoNotBuild”）。

将“通用”项目设置为“构建”后，测试项目能够创建自己的合约，并且开始抛出异常。

关于这个问题的更多讨论可以在 [这里找到](http://social.msdn.microsoft.com/Forums/en-US/codecontracts/thread/5559422c-cbf7-41a7-858d-d77c5c93fd3f)

# three.js - 我遇到了 FlyControls.js 的问题

> ID：15909404
> 
> 赞同：0
> 
> 时间：2013-04-09T18:12:01.140
> 
> 标签：three.js

下面是我的代码：

```
<script type="text/javascript">
// Set scene size
var WIDTH = window.innerWidth, HEIGHT = window.innerHeight;
// WebGL's object
var container = null, renderer = null, scene = null, camera = null;
var controls = null, stats = null;
var clock = new THREE.Clock();
// Target geometry
var mesh = null;

// Initialize WebGL
function initWebGL() {
    setupRenderer();
    setupScene();
    setupCamera();
    setupLight();
}

// Initialize renderer
function setupRenderer() {
    // Create the canva element
    renderer = new THREE.WebGLRenderer({
        clearColor: 0x999999,
        clearAlpha: 1.0
    });
    renderer.setSize(WIDTH, HEIGHT);
    // Add the canvas into its container
    container = $('#canvas-container-1');
    container.append(renderer.domElement);
}

// Initialize scene
function setupScene() {
    scene = new THREE.Scene();
    render();
}

// Initialize camera
function setupCamera() {
    camera = new THREE.PerspectiveCamera(
            45,
            WIDTH / HEIGHT,
            0.1,
            1000
            );
    camera.position.set(-5, 13, 10);

    // Camera controls
    controls = new THREE.FlyControls(camera);
    controls.domElement = container;
    controls.movementSpeed = 10;
    controls.rollSpeed = Math.PI / 12;

    controls.dragToLook = true;

    scene.add(camera);
    camera.lookAt(scene.position);
}

// Add lights to the scene
function setupLight() {
    var light = new THREE.DirectionalLight(0x777777);
    light.position.set(10, 30, 20);
    scene.add(light);

    var light = new THREE.PointLight(0xFFFFFF);
    light.position.set(250, 250, 250);
    scene.add(light);
}

// Call animation loop
function update(loop) {
    // Update camera control
    controls.update(clock.getDelta());
    // Update renderer
    renderer.render(scene, camera);
    requestAnimationFrame(loop);
}

// Main mesh
function addMesh() {
    var loader = new THREE.JSONLoader();
    loader.load("models/demo/bmw.js", function(geometry) {
        // Init mesh's materials
        var materials = new THREE.MeshPhongMaterial();
        // Init mesh
        mesh = new THREE.Mesh(
                geometry,
                materials
                //geometry.materials
                );
        // Add mesh to the scene
        scene.add(mesh);
        // Animation
        (function loop() {
            //mesh.rotation.y += 0.005;
            update(loop);
        })();
    });
}

// Floor plane
function addFloor() {
    var floorTexture = new THREE.ImageUtils.loadTexture('models/textures/grey-concrete-texture-01.jpg');
    floorTexture.wrapS = floorTexture.wrapT = THREE.RepeatWrapping;
    floorTexture.repeat.set(100, 100);
    var floorMaterial = new THREE.MeshBasicMaterial({
        map: floorTexture,
        side: THREE.DoubleSide
    });
    var floorGeometry = new THREE.PlaneGeometry(200, 200);
    var floor = new THREE.Mesh(floorGeometry, floorMaterial);
    floor.position.y = 0;
    floor.rotation.x = Math.PI / 2;
    scene.add(floor);
}

// Rendering
function render() {
    // Mesh
    addMesh();
    // Floor
    addFloor();
}
</script> 
```

我的模型加载正常...但是发生了一些问题...

*   当`controls.dragToLook`属性是`false`......刷新网页，我可以看到我加载的模型，但是如果我移动鼠标，我所有的加载模型都消失了......
*   当`controls.dragToLook`属性是`true`……前面的问题已经结束，但是在场景中点了几下之后，一切又消失了……我无法处理这个问题……

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-17T15:47:18.130

只回复这个是因为我遇到了这个线程试图解决同样的问题。有一些运气更换：

```
controls = new THREE.FlyControls(camera);
controls.domElement = container; 
```

和

```
controls = new THREE.FlyControls(camera, container); 
```

请注意，这并没有使我的鼠标控件工作，它只是禁用它们并防止它们再次破坏我的项目。

# css - 将样式添加到 h1 标签而不进行编辑

> ID：15909407
> 
> 赞同：-2
> 
> 时间：2013-04-09T18:12:08.800
> 
> 标签：css

我是 html/css 的新手，想知道是否有人对我当前遇到的问题有建议。

对于我正在工作的网站，我在 h1 css 标签下有标题。我想为其添加填充，但我不想影响具有相同 h1 标记的其他页面上的所有其他标题。在 css 中向 h1 添加填充而不影响使用相同标签的所有其他标头的最佳方法是什么。

感谢您花时间阅读我的问题^^，对于这么简单的问题，我深表歉意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:17:55.447

# 方法一

您可以定义内联样式

```
<h1 style="padding-bottom: 10px">Header</h1> 
```

# 方法二

你可以创建一个类

```
<h1 class="specialHeader">Header</h1> 
```

然后你的 CSS 看起来像

```
h1.specialHeader {
    padding-bottom: 10px;    
} 
```

# 方法三

通过此页面独有的某些父 div 访问它。你的 CSS 将是

```
#mainPage h1{
    padding-bottom: 10px
} 
```

[提琴手](http://jsfiddle.net/73Gxu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:15:19.890

```
header h1{ /*Some sort of more specific selector*/
  padding: /*Value*/;
} 
```

将其插入您的 CSS 文件中，这应该适合您

这只会`h1`影响`header`. 所以你的 HTML 将是：

```
<header>
  <h1>Hello World!</h1>
</header> 
```

链接：[jsfiddle 来看看](http://jsfiddle.net/BRhe2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:15:26.583

为您的特定 h1 元素添加一个类（或 id）；例如：

HTML

```
<h1 class="header">blabla</h1> 
```

CSS

```
h1.header {
    padding: 2em;
} 
```

尽管对于标题，您应该使用 HTML5`<header>`元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T18:18:53.183

为了做到这一点，你可能需要给那个头一个类名。例如，如果您只希望样式反映在主页上，您应该指定一个类名：

```
h1.main {
  padding:5px;
} 
```

所有其他标题将使用默认样式。在您的 HTML 中，您只需添加类：

```
<h1 class="main">Title</h1> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-09T18:15:34.953

这假设您想要页面上的第一个 H1 标记。如果您提供周围的 HTML，我可以提供更好的选择器，但这将设置页面上 H1 标记的第一个实例的样式。

```
h1:nth-child(1) {
    padding: 1em;
} 
```

# java - jvm进程分配了多少内存

> ID：15909409
> 
> 赞同：0
> 
> 时间：2013-04-09T18:12:17.707
> 
> 标签：java

分配给 jvm 进程的总内存等于总堆、栈、本机堆。我知道有一些命令可以设置堆的最小和最大大小限制。

分配给jvm进程的总内存怎么样，是否有限制，或者它会随着创建的线程数量的增加而继续增加。

如果线程数没有限制，并且由于在创建新线程时会创建新堆栈，这是否会导致 jvm 继续增加其大小，直到 RAM 中没有更多内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:52:22.750

据我所知是这样。线程堆栈分配在 JVM 堆栈和操作系统特定。

您可以使用 -Xss 来控制默认堆栈大小，但不能控制其上限。

有趣的文章

[http://www.onkarjoshi.com/blog/209/using-xss-to-adjust-java-default-thread-stack-size-to-save-memory-and-prevent-stackoverflowerror/](http://www.onkarjoshi.com/blog/209/using-xss-to-adjust-java-default-thread-stack-size-to-save-memory-and-prevent-stackoverflowerror/)

[http://blog.codecentric.de/en/2010/01/the-java-memory-architecture-1-act/](http://blog.codecentric.de/en/2010/01/the-java-memory-architecture-1-act/)

[http://book.javanb.com/java-threads-3rd/jthreads3-CHP-13-SECT-6.html](http://book.javanb.com/java-threads-3rd/jthreads3-CHP-13-SECT-6.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:13:10.823

总堆。新线程使用堆内存。如果你有太多的话，你会OOME的。试试看？

# css - IE7 RTL 向右浮动，向左浮动

> ID：15909410
> 
> 赞同：1
> 
> 时间：2013-04-09T18:12:26.550
> 
> 标签：css, internet-explorer-7, right-to-left

我有一个 RTL 文档，其中包含一个元素，`float: left;`其中包含`float: right;`元素。IE7 无法正确呈现它。

查看演示和屏幕截图：

JS小提琴：[jsfiddle.net/R6aS5/](http://jsfiddle.net/R6aS5/)

火狐（正确）

![在此处输入图像描述](https://i.stack.imgur.com/6ueic.jpg)

IE 7 - 不正确 - 正确的浮动元素在其父容器之外

![在此处输入图像描述](https://i.stack.imgur.com/vEZ69.jpg)

向左浮动的元素（蓝色）必须保持流动。我知道添加类似的东西`width: 200px;`会修复它，但里面的浮动元素是动态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:41:07.993

通过更改内部元素的解决方法修复了`float: right;`- 删除了浮动并`display: inline;`用于`zoom: 1;`IE7。

JS 小提琴：http: [//jsfiddle.net/8pFsZ/](http://jsfiddle.net/LW5xS/)

呈现如下 -

火狐：

![在此处输入图像描述](https://i.stack.imgur.com/MsIjf.jpg)

IE7：

![在此处输入图像描述](https://i.stack.imgur.com/aV3sc.jpg)

或者，也可以使用 star hack 仅修复 < IE7，而不是删除所有浏览器的 float 属性：

```
li {
    float: right;
    *float: none;
    *display: inline;
    *zoom: 1;
    border: 1px solid green;
    padding: 5px;
} 
```

# android - 我可以在主线程（UI 线程）之外创建 UI 吗？

> ID：15909411
> 
> 赞同：1
> 
> 时间：2013-04-09T18:12:34.267
> 
> 标签：android, user-interface, views

出于充分的理由（计算数百个视图的测量值），我的 UI 生成时间很长（大约 20 秒）。我（想？）必须在主线程中创建它们，然后我运行一个进度对话框让用户等待。虽然，主线程已经被其他计算的创建超载了。然后我可以在主线程之外创建 UI，尽管我必须测量几个视图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:16:13.837

虽然有些人说他们已经让它工作了，但[Dianne 和 Romain 都说](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/e-Rz0qMy0K8)你不应该在讨论中这样做，因为整个 UI 树是单线程的。他们说它不能保证有效，应该避免。

我想不出任何需要同时实例化和绘制数百个视图的场景。也许您需要使用 ListView，或者在您的应用程序中实现某种延迟加载。

# cloud - ASP.NET Web 窗体和 ASP.NET MVC 中的多租户架构

> ID：15909414
> 
> 赞同：0
> 
> 时间：2013-04-09T18:12:47.167
> 
> 标签：cloud, multi-tenant

为学校创建一个包含 1000 名学生数据的 Web 应用程序。所有学校都将通过网络浏览器登录到同一个应用程序。

为此，我正在使用`MultiTenant architecture`. 问题是我们没有云平台方面的专业知识（工具是.Net）。那么，我们可以在云中 使用`Flexible Computing`/或部署它吗？`MultiTenancy``ASP.NET Web Forms``ASP.NET MVC`

我知道 ASP.NET Web 窗体和 ASP.NET MVC 应用程序可以部署在云上。但

> 它会带来云应用的味道还是会降低一些性能？

很多天我都在到处寻找帮助。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T06:14:35.973

毫无疑问，Asp.net MVC 是许多 SaaS 开发人员和软件供应商选择的设计模式，因为它的健壮性、RESTful URLS、无状态性质、SoC、TDD 等 [参考链接查看完整的好处 使用 ASP.Net 的最大优势MVC 与 Web 表单及其专门用于分布式应用程序的对比，不会有任何性能瓶颈，但完全取决于您来构建和开发您的应用程序。如果你错误地构建了你的应用程序，你最终可能会变得无法管理、不可读、无法增强。

除了选择技术，我建议您更多地关注架构、横切组件和非功能性需求，例如

1.  安全框架
2.  缓存
3.  异常处理/记录/审计
4.  水平分区
5.  租户管理
6.  许可证管理
7.  计量
8.  配置管理
9.  系统和安全设置等

开发了许多应用程序并与许多开发人员进行了交互，最大的优势是其持续的社区支持以及微软每年推出的技术和工具。祝你好运

# java - 修改 ConcurrentHashMap 中的值

> ID：15909425
> 
> 赞同：2
> 
> 时间：2013-04-09T18:13:21.097
> 
> 标签：java, java.util.concurrent, concurrenthashmap

在 ConcurrentHashMap 中有分段的概念。如果两个线程试图访问 ConcurrentHashMap 意味着什么，它们被分成两个块，块的默认大小为 16。

现在假设在 ConcurrentHashMap 只有两个元素并且有两个不同的线程出现并且 thread1 尝试修改第一个值而 thread2 尝试修改第二个值的场景中。在这种情况下 ConcurrentHashMap 是否会进行分段？

现在在不同的情况下，两个线程都尝试修改相同的值 ConcurrentHashMap 将如何处理这种情况？通过使用锁定机制还是有别的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T18:25:40.100

ConcurrentHashMap 有几个桶。键根据其哈希值映射到其中一个桶中。当您添加或检索值时，与该键关联的存储桶将被锁定。

对于您的第一个问题，有两种可能性：两个密钥都位于同一个存储桶中，或者它们位于不同的存储桶中。在第一种情况下，一次只能有一个线程工作——第一个获得锁的线程将抓住它并工作，第二个线程将等待轮到它。在第二种情况下，密钥位于不同的存储桶中，它们将各自获取独立的锁并同时执行它们的工作。

对于您的第二个问题，它是被锁定的*存储桶*，仅此而已。如果两个线程尝试为同一个键存储两个值，则 ConcurrentHashMap 承诺这两个值之一将与该键相关联。*即*，如果线程 A 运行`map.put("Answers",2);`并且线程 B 运行`map.put("Answers",10);`，则 ConcurrentHashMap 将确保映射是有效的并包含其中一个`2`或`10`for `"Answers"`，但它不会对这两个中的哪一个做出任何承诺。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T18:15:37.127

CHM 保证这些操作（例如`put`,`putIfAbsent`等）不会重叠，是的，这是通过锁定完成的。CHM 的每个段都有自己的锁，只要您修改该段，就会获取该锁。

（作为参考，正如@Affe 指出的那样，如果您正在修改中的值的*内容*`ConcurrentHashMap`，CHM 不会做 - 不能做 - 任何使该线程安全的事情。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-01T17:36:13.613

首先，CHM 的新实现根本不使用 Segments，它仍然使用节点数组，如果给定索引中的节点不存在并且两个线程试图插入两个条目，其哈希码等于给定索引，则 CHM使用 CAS ，否则如果节点存在，则 CHM 使用该节点的第一个元素上的锁定来放置新值。CHM 中的读取是非阻塞的，并且在 Unsafe 类的原子读取的帮助下使用发生在保证之前。查看我关于 CHM 的博客了解更多详情 [https://strogiyotec.github.io/pages/posts/chm.html](https://strogiyotec.github.io/pages/posts/chm.html)

# php - CID 未显示在 PHP/MySQL 上

> ID：15909426
> 
> 赞同：0
> 
> 时间：2013-04-09T18:13:27.540
> 
> 标签：php, mysql

我试图创建一个具有 categoryName 和 categoryDe​​scription 的链接。一旦我单击将我带到该类别的链接，url 上的 cid 就不会显示，它应该有类似 cid=1 的东西。

这是已编写的代码...

```
<div id="content">

    <?php

        include_once("connection.php");

        //category area
        $sql = "SELECT * FROM ecommerce_category_table ORDER BY categoryName ASC";
        $result = mysql_query($sql) or die(mysql_error());
        $categories = "";

        if (mysql_num_rows($result) > 0) {
            while ($row = mysql_fetch_assoc($result)) {
                $id = $row['$id'];
                $name = $row['categoryName'];
                $description = $row['categoryDescription'];
                $categories .= "<a href='view_category.php?cid=".$id."' class='cat_link'>".$name." - ".$description."</a>";
            }

            echo $categories;

        } else {
            echo "<p>There are no categories avaliable yet.</p>";
        }

    ?>

</div><!-- end content --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:15:27.687

在你的 while 循环改变

```
$id = $row['$id']; 
```

至

```
$id = $row['id']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:24:44.737

我只发现了这个错误..删除'id'之前的$符号并将这一行从

```
 $id = $row['$id']; 
```

至

```
 $id = $row['id']; 
```

# signalr - 单独 Dll 中的 Signalr Hub

> ID：15909430
> 
> 赞同：2
> 
> 时间：2013-04-09T18:13:31.897
> 
> 标签：signalr, signalr-hub

我在控制台应用程序中托管了一个集线器，并有一个 WPF 应用程序连接到它。它工作得很好。然后我将集线器移动到一个单独的项目中，并添加了从主机到新项目的引用。现在我收到 500 错误，没有其他详细信息。

为了从另一个组装/命名空间托管集线器，是否需要做任何不同的事情？

编辑：打开问题后我尝试了一些事情。这是我到目前为止所尝试的：

*   设置 HubName 属性。- 不工作。
*   将完整的命名空间 + 类传递给 HubConnection.CreateHubProxy。- 不工作。
*   将我的集线器类放入同一个项目但不同的命名空间。- 这行得通。

这是被传回的异常。“System.Net.WebException：远程服务器返回错误：（500）内部服务器错误。在 Microsoft.AspNet.SignalR.Client.Http.HttpHelper 的 System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)。<> *c_DisplayClass2 .b* _0(IAsyncResult ar) 在 System.Threading.Tasks.TaskFactory `1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction，Action `1 endAction, Task`1 承诺，布尔要求同步)"

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-06T08:02:57.480

这对我有用（在启动时）

```
AppDomain.CurrentDomain.Load(typeof(MyHub).Assembly.FullName); 
```

[引用项目中映射中心的](https://stackoverflow.com/questions/16779057/map-hubs-in-referenced-project)学分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:54:48.613

您是否已将呼叫转移到将集线器注册到新的 dll 中？即以下内容需要在您的新项目中（但仍从 global.asax 调用）：

```
RouteTable.Routes.MapHubs(); 
```

您可能还需要在新的 RegisterHubs 类中使用 [WebActivator PreApplicationStart 属性] ( [http://msdn.microsoft.com/en-us/library/system.web.preapplicationstartmethodattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.preapplicationstartmethodattribute.aspx) ) 以确保及时注册

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:50:35.480

尝试查看http响应消息

```
 try
        {
            hubConnection.Start().Wait();
        }
        catch (Exception error)
        {
            if (error.InnerException is WebException)
            {
                WebException webError = (WebException)error.InnerException;
                Console.WriteLine(webError.Status);
                Console.WriteLine(webError.Response);
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-14T01:14:57.070

确保单独的 DLL 具有对代码的引用`Microsoft.CSharp.dll`- 这是`dynamic`代码所必需的。

# android - Android 两栏布局

> ID：15909432
> 
> 赞同：0
> 
> 时间：2013-04-09T18:13:56.030
> 
> 标签：android, listview, gridview, sidebar

我想做一个如下图的布局，可以点击单独的列我调查listView两列，但是没有单独的行，只有一列点击GridView怎么样！？GridView可以这样做！？请帮助我，我对如何做到这一点没有理想，谢谢。 ![在此处输入图像描述](https://i.stack.imgur.com/Pcfw3.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:22:44.573

在我看来，您应该使用 TableLayout 来实现您的目标。您将在一行中放置 2 个按钮（然后您将获得 2 列）。您还应该将按钮的权重设置为 1 以获得两个相等的列。

这里有有用的链接：

1.  [Android TableLayout中的按钮宽度](https://stackoverflow.com/questions/4575155/button-width-in-android-tablelayout)
2.  [http://www.mkyong.com/android/android-tablelayout-example/](http://www.mkyong.com/android/android-tablelayout-example/)
3.  [http://developer.android.com/reference/android/widget/TableLayout.html](http://developer.android.com/reference/android/widget/TableLayout.html)
4.  [http://mobile.tutsplus.com/tutorials/android/android-sdk_table-layout/](http://mobile.tutsplus.com/tutorials/android/android-sdk_table-layout/)

# python - 无法将原始 RFID 数据转换为可用字符串

> ID：15909433
> 
> 赞同：2
> 
> 时间：2013-04-09T18:13:56.557
> 
> 标签：python, hex, rfid

我有这个[http://www.parallax.com/Portals/0/Downloads/docs/prod/audiovis/28140-28340-RFIDreader-v2.2.pdf](http://www.parallax.com/Portals/0/Downloads/docs/prod/audiovis/28140-28340-RFIDreader-v2.2.pdf) RFID 阅读器连接到树莓派。我尝试使用 Java 和 Python 获取 ID。我能够从两者中获取输出，但无法破译数据是什么，现在将其转换为实际 ID。

Java 代码：[http ://stephenjam.es/wp/wp-content/uploads/java/RFIDReaderBasic.java](http://stephenjam.es/wp/wp-content/uploads/java/RFIDReaderBasic.java)

Java 输出：0xc2 0xbd 0xc3 0x99 0xc2 0xae 0xc3 0xb6 0x76 0xc3 0x96 0x56 0x45 0xc2 0x8b 0x6b 0x56 0x00

我认为这是十六进制，但我不知道。

蟒蛇代码：

```
#!/usr/bin/env python
import serial
import time
ser = serial.Serial('/dev/ttyUSB0', 2400, timeout=1)
while True:
    string = ser.read(12)
    if len(string) == 0:
        print "Please insert a tag"
        continue
    else:
        print string 
```

Python 输出：?ٮ?v?VE?kV

我宁愿使用 python，但也愿意使用从该网站获得的 java 代码。我最大的问题是从哪里开始，我是将十六进制转换为 ascii，十六进制转换为十进制还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-17T17:32:17.443

可能是波特率错误。这就是它打印垃圾的原因。检查 RFID 阅读器的默认波特率。可能是4800或9600。

# java - JPDA Query and Play - 用户和角色 (JOIN)

> ID：15909434
> 
> 赞同：0
> 
> 时间：2013-04-09T18:14:07.933
> 
> 标签：java, jpa, playframework, jpql

我有两个玩 JPA 对象 User.java 和 UserRole.Java

```
 public User(String email, String password, String firstName, String lastName, Status status, List<UserRole> roles){
        this.email = email;
        this.password = password;
        this.firstName = firstName;
        this.lastName = lastName;
        this.status = status; 
        this.roles = roles;
    } 
```

用户角色

```
public UserRole(User user,RoleType roleType, Status status) {
         this.user = user;
         this.roleType = roleType;
         this.status = status;
     } 
```

UserRoles 通过以下方式映射到用户

```
@OneToMany(mappedBy="user",fetch=FetchType.EAGER)
public List<UserRole> roles; 
```

我希望编写一个播放 JPQL 查询，该查询将返回具有指定角色的所有用户 - 这是否可能，如果可以，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:35:36.700

因为你已经设计了这样的模型，有两个表`User.java`& `UserRole.java`)，所以实现你的目标并不复杂。

如果您的`User.java`模型扩展`play.db.jpa.Model`类，则解决方案可能如下所示：

```
// by using nested query to find all user that has admin role
List<User> userList = User.find(
    "id IN (SELECT user FROM models.UserRole WHERE roleType = ?)", 
    RoleType.ADMIN
).fetch(); 
```

上面的表达式与 SQL 查询相同：

```
SELECT * FROM "user" WHERE id IN (
    SELECT user_id FROM user_role WHERE role_type = 'ADMIN'
); 
```

# dos - 去除部分路径名

> ID：15909440
> 
> 赞同：0
> 
> 时间：2013-04-09T18:14:17.827
> 
> 标签：dos

希望有人能帮忙。我在 DOS 中工作（如果重要的话，Windows 7），并且得到了以下一小段代码：

```
@ECHO OFF

echo x:\junk\main\something\file1.txt     > temp.txt
echo x:\junk\main\something\file2.txt     >> temp.txt
echo x:\junk\main\else\file3.txt          >> temp.txt

set TMP=temp.txt

setlocal enabledelayedexpansion

  for /F %%I IN (%TMP%) DO (
     echo File is: %%I

     set CFile=%%I
     set CFile=%CFile:~13%
     echo File really is: %CFile%
  ) 
```

运行它，生成以下结果：

```
C:\temp>test
File is: x:\junk\main\something\file1.txt
File really is:
File is: x:\junk\main\something\file2.txt
File really is:
File is: x:\junk\main\else\file3.txt
File really is:

C:\temp> 
```

所以..我做错了什么？为什么不将值保存到 CFile 变量中？它似乎与 FOR 循环或 %%I 语法（与 %I% 相反）有关，但我不确定为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:38:09.747

您正在使用延迟的命令行扩展，因此您需要`!`在某些地方使用字符而不是`%`.

```
@ECHO OFF

echo x:\junk\main\something\file1.txt     > temp.txt
echo x:\junk\main\something\file2.txt     >> temp.txt
echo x:\junk\main\else\file3.txt          >> temp.txt

set TMP=temp.txt

setlocal enabledelayedexpansion

for /F %%I IN (%TMP%) DO (
   echo File is: %%I

   set CFile=%%I
   set CFile=!CFile:~13!
   echo File really is: !CFile!
   echo.
   set CRealFile=%%~nxI
   echo The filename is: !CRealFile!
) 
```

虽然，我不确定您是否真的想使用`!CFile:~13!`. 上面修改后的代码不再失去`CFile`价值，但看起来不太正确。我添加了几行来演示如何从`%%I`as中提取文件名`!CRealFile!`。

# html - 将信息推送到打开的网页

> ID：15909444
> 
> 赞同：1
> 
> 时间：2013-04-09T18:14:35.917
> 
> 标签：html, web

我想将信息实时推送到我的网页上。例如，如果我有一个计算访问过我网站的人数的自动收报机。

我希望每当有人实时打开页面而无需刷新页面时，该代码都会更改。

我想这可以使用 ajax 并每隔几秒钟检查一次更新的信息并异步更新页面来完成......但我觉得有一种更简单的方法。

有没有我可以用来完成这项任务的技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:16:49.293

看看[http://socket.io/](http://socket.io/) WebSockets 的实现。

# jquery - Jquery 示例不起作用（在 IE、CHROME 和 FIREFOX 上测试）

> ID：15909448
> 
> 赞同：-3
> 
> 时间：2013-04-09T18:14:49.307
> 
> 标签：jquery, html

我一直在尝试使这个示例工作，但根本没有成功（使用 vs2010）：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication1.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style type="text/css">
        #algo
        {
            width: 200px;
            height: 200px;
            color: White;
            background-color: Red;
            border: 4px solid black;
            margin: 100px 0px 0px 80px;
        }
    </style>
    <script type="text/javascript" src="jquery.js">
        $(document).ready(function () {
            $('#algo').animate({ 'margin-top': '300px', 'margin-left': '400px' }, 1000);
        }); </script>
</head>
<body>
    <form id="form1" runat="server">
    <div id="algo">
        <p>
            lol</p>
    </div>
    </form>
</body>
</html> 
```

我也尝试过缩小版本，但它仍然无法正常工作......我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:17:41.433

您应该拉出 src=jquery.js 引用并在其上方添加一个指向 jquery 的链接，如下所示：

```
 <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <script type="text/javascript">
            $(document).ready(function () {
//then do what ever you intend to do
            }); 
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:23:04.390

您缺少 JQuery 参考。尝试如下所示，它将对您有所帮助...

```
 <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
        $('#algo').animate({ 'margin-top': '300px', 'margin-left': '400px' }, 1000);
    }); 
    </script> 
```

# sql-server - 动态 SQL 的最佳方法？

> ID：15909450
> 
> 赞同：0
> 
> 时间：2013-04-09T18:15:08.780
> 
> 标签：sql-server, tsql, dynamic-sql

我的任务是构建一个查询（只是 where 子句）并将其存储在数据库中。然后它将由存储过程执行。

我想使用参数化动态查询，但是将查询与数据库中的参数分开存储、在 SQL 中读取并将参数与 where 子句联系起来很尴尬。尴尬在于参数的数量和类型是任意的。

我不想要未参数化的动态 SQL，因为搜索值是由用户提供的，而且我没有找到防止 SQL 注入的可靠方法。

有没有一种优雅的方法？

我正在使用 .NET 和 SQL Server。

* * *

我正在谈论的示例：

```
-- @filterId is passed to the SP

declare @sql nvarchar(max)
set @sql = 'select id, name, otherField from Items where' + whereClause 
           from Filters 
           where id = @filterId

create table #items {
  id int not null,
  name nvarchar(100),
  otherField nvarchar(200)
}

insert into #items exec(@sql)

-- do something with items and return result 
```

* * *

**编辑：**有人建议我避免使用主观术语以获得有意义的回应。我相信定义什么是“最佳”和“优雅”会做。因此，当我说“最佳”时，我正在寻找一种比其他解决方案更安全、快速、可读和可维护的解决方案。“优雅” - 用最少的代码完成任务，没有太多假设，例如，如果我需要处理任意参数集，我不想为可能的参数创建 20 个占位符或为所有可能的列创建一个表参数类型并通过合并获得正确的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:19:23.903

我会说你做错的一件事是

```
exec(@sql) 
```

指令本身没有任何问题，但是您很容易受到 SQL 注入的攻击。有人可以很容易地输入'select * from thing DROP TABLE Orders'。如果那个人有权利，他们就会放弃你的桌子。更好的方法是

```
exec sp_executesql @sql 
```

确保 @sql 是 unicode varchar，您在示例中已经这样做了。sp_executesql 还采用更灵活的选项参数参数。

另外请记住，如果您说“我正在使用 .NET”Linq 有一些非常酷的事情，它可以使用实体框架通过模型层将 SQL 从数据库中抽象出来，您还可以执行动态 Linq。这提供了一个抽象层来处理 SQL 之上的工作，这在您可以使用 .NET 枚举和列表对数据进行建模以及在整个过程中从不直接连接到数据库的层运行其他代码的方式上更可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-05T20:49:39.250

是的，我们可以在动态查询中使用执行@sql。当您使用动态查询进行动态搜索时，构建一个不允许单引号 ' 的正则表达式模式以防止 sql 注入。

# python - 烧瓶 url_for 产生错误的 URL

> ID：15909455
> 
> 赞同：3
> 
> 时间：2013-04-09T18:15:29.897
> 
> 标签：python, flask, url-for

烧瓶中的 url_for 生成器不适用于我的一个视图（它适用于其他视图）。生成器`/user/?name=Joe`在我期望的时候给出`/u/Joe`。

在模板中，我尝试使用以下方法获取用户页面的 URL：`{{ url_for('user', name = g.user.name ) }}`

这是对应的视图函数：

```
@app.route('/u/<name>')
@login_required
def user(name): 
```

起初这是可行的，但发生了一些变化。我尝试更改视图名称和 url，但没有成功。

有什么想法吗？我在这方面不知所措...

完整的应用程序可在 GitHub 上找到：[https ://github.com/joehand/weight-and-more-tracker](https://github.com/joehand/weight-and-more-tracker)

**编辑**：`@login_required`装饰是 Flask-login 提供的。

此外，删除`<name>`变量并不能解决问题。那么 URL 就是`/user`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:30:04.323

在 api.py 中，您正在注册一个名为“user”的视图，该视图可能与名为“user”的方法冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:53:22.507

`login_required`您是否在装饰器中“包装”了您的功能？在您的情况下`name`，作为查询字符串而不是烧瓶视图函数参数提供给 url - 也许烧瓶没有掌握装饰`user`视图函数的参数规范。

来自[文档](http://flask.pocoo.org/docs/patterns/viewdecorators/#login-required-decorator)：

> 所以让我们实现这样一个装饰器。装饰器是一个返回函数的函数。其实很简单。在实现这样的事情时，唯一需要记住的是更新函数的 **名称**、**模块**和其他一些属性。这通常会被遗忘，但您不必手动执行此操作，有一个函数可以像装饰器 ( `functools.wraps()`) 一样使用。
> 
> ```
> from functools import wraps
> from flask import g, request, redirect, url_for
> 
> def login_required(f):
>     @wraps(f)
>     def decorated_function(*args, **kwargs):
>         if g.user is None:
>             return redirect(url_for('login', next=request.url))
>         return f(*args, **kwargs)
>     return decorated_function 
> ```

# scala - Akka2.1/Scala - 在 actor 中创建的节点不会出现在 context.children 中？

> ID：15909458
> 
> 赞同：1
> 
> 时间：2013-04-09T18:15:38.627
> 
> 标签：scala, akka

我有一个抽象类，它是一个演员，它有一个像这样的方法

```
def getNewConnection(id: String): ActorRef

A class that subclasses it defines the method.

  override def getNewConnection(id: String): ActorRef = {
    val actorRef = system.actorOf(Props(new RsvpClusterableClientConnection(service, id)))
    actorRef ! Subscribe(clientConnectionId)
    actorRef
  } 
```

然后它存储那个actorRef。

问题是，当我去 context.children 时，它是空的。同样，如果子演员去 context.parent ！“嘿！” 父母不会收到消息。如果我查看路径，context.partent 显示 /users/ 并且真正的父演员实际上类似于 /users/$2b

我找不到有类似问题的人。这是在一个类似这样的测试中：

```
class ZombieTest extends TestKit(ActorSystem("zombietest")) with HelperSpec with ShouldMatchers {

  import ExecutionContext.Implicits.global
[...]
val conActor = system.actorOf(Props(new ConnectionActor(testService1)))
} 
```

编辑

AgileSteel 是正确的。从系统创建将创建一个顶级参与者。从上下文创建将创建一个孩子。

来自akka文档：

> 使用默认构造函数创建 Actor

```
object Main extends App {  
val system = ActorSystem("MySystem")   val myActor =
system.actorOf(Props[MyActor], name = "myactor") The call to actorOf 
```

> 返回一个 ActorRef 的实例。这是 Actor 实例的句柄，您可以使用它与 Actor 进行交互。ActorRef 是不可变的，并且与它所代表的 Actor 具有一对一的关系。ActorRef 也是可序列化的和网络感知的。这意味着您可以对其进行序列化、通过线路发送并在远程主机上使用它，并且它仍将通过网络在原始节点上表示同一个 Actor。
> 
> 在上面的示例中，actor 是从系统创建的。也可以使用演员上下文从其他演员创建演员。不同之处在于主管层次结构的排列方式。使用上下文时，当前演员将是创建的子演员的监督者。使用系统时，它将是一个顶级参与者，受系统监督（内部监护参与者）。

```
class FirstActor extends Actor {   val myActor =
context.actorOf(Props[MyActor], name = "myactor") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T18:50:44.013

您应该/必须调用`actorOf`而`context`不是`system`在创建孩子时调用。

# c# - 菜单栏中的代码消息

> ID：15909459
> 
> 赞同：0
> 
> 时间：2013-04-09T18:15:39.080
> 
> 标签：c#, menubar

我有一个 win forms 应用程序，并且用户想要一个滚动消息（如新闻自动收报机）。

我对自动收报机本身没意见 - 客户希望信息在菜单栏的未使用区域中滚动 - 沿着主窗口的顶部。

我不确定您是否可以在菜单栏顶部堆叠控件。

有谁知道这是否可以完成（在菜单栏上堆叠），如果您这样做 - 请提供一些指导。c# 请

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:02:57.130

奇怪的请求。这里有一些让你开始的东西：

```
public Form1() {
  InitializeComponent();
  menuStrip1.Paint += menuStrip1_Paint;
}

void menuStrip1_Paint(object sender, PaintEventArgs e) {
  int startLeft = 0;
  foreach (ToolStripMenuItem menu in menuStrip1.Items) {
    startLeft = Math.Max(startLeft, menu.Bounds.Right);
  }
  startLeft += 16;
  e.Graphics.DrawRectangle(Pens.Red,
                           new Rectangle(startLeft, 0, 
                                         menuStrip1.ClientSize.Width - startLeft - 1,
                                         menuStrip1.ClientSize.Height - 1));
} 
```

它会找到可用的菜单条部分。那就是您将使用计时器绘制的矩形。大概会闪烁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:14:51.863

这是我使用的课程....

它将在工具箱中创建一个自定义控件...将其拖到您想要的控件上，然后 walla

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System;
using System.Text;
using System.Drawing;
using System.ComponentModel;
using System.Windows.Forms;

namespace Winform_menu
{
  internal class NewsTicker : Panel
  {
     private Timer mScroller; // Scroll timer
     private int mOffset; // Offset of scrolled text
   private string mText; // Text to scroll
private Size mPixels; // Width of text in pixels
private Bitmap mBuffer; // Double-buffering buffer

public NewsTicker()
{
  mScroller = new Timer();
  mScroller.Interval = 30;
  mScroller.Enabled = false;
  mScroller.Tick += DoScroll;
}

[Browsable(true)]
public override string Text
{
  get { return mText; }
  set
  {
    mText = value;
    mScroller.Enabled = mText.Length > 0;
    mPixels = TextRenderer.MeasureText(mText, this.Font);
    mOffset = this.Width;
  }
}

private void DoScroll(object sender, EventArgs e)
{
  // Adjust offset and paint
  mOffset -= 1;
  if (mOffset < -mPixels.Width) mOffset = this.Width;
  Invalidate();
}

protected override void OnPaintBackground(PaintEventArgs e)
{
  // Do nothing
}

protected override void OnPaint(PaintEventArgs e)
{
  if (mBuffer == null || mBuffer.Width != this.Width || mBuffer.Height != this.Height)
    mBuffer = new Bitmap(this.Width, this.Height);
  Graphics gr = Graphics.FromImage(mBuffer);
  Brush bbr = new SolidBrush(this.BackColor);
  Brush fbr = new SolidBrush(this.ForeColor);
  gr.FillRectangle(bbr, new Rectangle(0, 0, this.Width, this.Height));
  gr.DrawString(mText, this.Font, fbr, mOffset, 0);
  e.Graphics.DrawImage(mBuffer, 0, 0);
  bbr.Dispose();
  fbr.Dispose();
  gr.Dispose();
     }
    }
 } 
```

# apache - Apache - 如何将 https 添加到以下内容

> ID：15909463
> 
> 赞同：0
> 
> 时间：2013-04-09T18:15:49.837
> 
> 标签：apache, mod-rewrite

我想将 https:// 添加到以下网址： [http ://www.createjobsforusa.org/donate](http://www.createjobsforusa.org/donate)

我怎样才能在 Apache 中做到这一点？

到目前为止，这是我正在做的，但不起作用：

```
 RewriteCond %{ENV:HTTPS} !on [NC]
  RewriteRule ^donate https://www.createjobsforusa.org/donate [R,L] 
```

我需要改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:18:20.140

您是否激活了重写引擎？

```
RewriteEngine On
RewriteCond %{HTTPS} !on [NC]
RewriteRule ^/?donate https://www.createjobsforusa.org/donate [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:20:02.093

请试试这个代码：

```
# once per htaccess file
RewriteEngine on

RewriteCond %{HTTPS} off
RewriteRule ^donate/?$ https://www.createjobsforusa.org/donate 
```

# heroku - 无论到期时间如何，每次测功机旋转时缓存都会到期吗？

> ID：15909465
> 
> 赞同：0
> 
> 时间：2013-04-09T18:15:58.870
> 
> 标签：heroku, memcached

在 Heroku 的免费应用程序层上，当测功机空闲时，所有缓存都会过期吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:30:50.530

由于临时文件存储，任何写入内存或磁盘的缓存都可能在空闲时或测功机循环时被清除。Dynos 大约每 24 小时循环一次。即使使用生产应用程序（2 个或更多测功机，生产级数据库），每个测功机都是隔离的，因此使用磁盘或内存无论如何都无法正常工作。

您应该使用外部支持服务进行缓存：

*   [https://devcenter.heroku.com/articles/memcachier](https://devcenter.heroku.com/articles/memcachier)
*   [https://devcenter.heroku.com/articles/caching-strategies](https://devcenter.heroku.com/articles/caching-strategies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:01:56.457

要回答您的确切问题：特别是在缓存方面没有做任何事情，但是如果您在测功机的内存或文件系统中存储了任何内容，那将被破坏。

具体来说，“空转”一词可能具有误导性；闲置的测功机实际上已被完全销毁，而空载实际上意味着启动一个新的测功机。

# git - 需要丢弃整个分支并再次合并 - 如何？

> ID：15909473
> 
> 赞同：0
> 
> 时间：2013-04-09T18:16:28.213
> 
> 标签：git

不确定这是否可能。Git新手在这里。

我们正在与两个分支机构合作。“ `dev`”和“主人”；" `dev`" 分支没问题。" `master`" 分支是一团糟。

我想删除“ `master`”分支上的所有内容，然后将“ `dev`”合并到那个“清理”的主分支？

这是可能的，还是可取的？

注意：我也在使用远程集线器存储库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:23:42.980

听起来您完全想丢弃`master`分支，在这种情况下，为什么不简单地删除它并分支`dev`呢？

```
git checkout dev
git branch -D master
git checkout -b master
git push origin +master 
```

最后一个`git push`将强制更新您的`origin`遥控器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:04:16.717

您可以执行以下简单步骤：

还原您的 master 中的所有更改并将新代码添加为第一次提交：

```
git revert HEAD~XXX (where XXX is the number fo the commits you wish to delete) 
```

现在将要添加的文件添加到分支

一旦你对你的状态感到满意推送更新的代码，你必须通过使用 + 强制对远程分支的更改，（+）符号是 update-force，它将分支的代码设置为更新的代码，不管你有什么远程的

```
git push origin +master 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:24:51.753

Git 中的分支实际上只是指向提交的指针。如果你这么想，那就很简单了。

```
git branch -d master
git checkout dev
git branch master 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-25T11:16:38.503

另一种解决方案是使用 stash：存储所有当前更改，以便 master 变得干净

[http://git-scm.com/book/en/Git-Tools-Stashing](http://git-scm.com/book/en/Git-Tools-Stashing)

# c++ - c++ gtkmm 3.0 如何访问argc、argv

> ID：15909480
> 
> 赞同：0
> 
> 时间：2013-04-09T18:16:51.550
> 
> 标签：c++, gtkmm

我正在尝试为我的第一个 gtk 应用程序获得正确的结构，该应用程序将模拟棋盘游戏。我有一个命令行参数，它是一个文件名。我将在我的 gtk 应用程序中阅读此文件。如何访问 main() 之外的参数？

这是我的 main() 例程。

```
int main(int argc, char* argv[]) {
  Glib::RefPtr<Gtk::Application> app = Gtk::Application::create(argc, argv, "org.gtkmm.example");
  ExampleWindow window;
return app->run(window);
} 
```

这是 ExampleWindow 的构造函数：

```
ExampleWindow::ExampleWindow() {
  Board bd = Board(argv[1]);
... 
```

我得到的错误是：

```
In constructor 'ExampleWindow::ExampleWindow()':
error: 'argv' was not declared in this scope 
```

我认为我的大部分逻辑都将在 ExampleWindow 中，因为它会监听事件。将在 ExampleWindow 构造函数中实例化一个 Board 类，该构造函数将保存我的数据结构。Board 类构造函数将文件名作为其构造函数的参数，读取描述文件，并根据文件输入设置成员变量。

我在这上面花了几个小时，发现文档稀疏而混乱。我正在使用 gtk 3.0 并将我的程序基于绘制细线示例。 [https://developer.gnome.org/gtkmm-tutorial/3.4/sec-cairo-drawing-lines.html.en](https://developer.gnome.org/gtkmm-tutorial/3.4/sec-cairo-drawing-lines.html.en)

对 gtkmm 初学者的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:01:19.957

Mabye 我走错了路，但为什么你不将 argc/argv 传递给你的窗口类？

```
int main(int argc, char* argv[]) {
  Glib::RefPtr<Gtk::Application> app = Gtk::Application::create(argc, argv,     "org.gtkmm.example");
  ExampleWindow window(argc,argv);
return app->run(window); 
```

}

```
ExampleWindow::ExampleWindow(int argc, char* argv[]) {
   Board bd = Board(argv[1]); 
```

# c# - 变量名不会被头部标签内的值替换

> ID：15909484
> 
> 赞同：0
> 
> 时间：2013-04-09T18:16:59.070
> 
> 标签：c#, asp.net

我的 asp.net 站点有一个导航，它使用 .active css 标签来更改活动页面上导航颜色的颜色。

这是在我的 site.master 标头中

```
.active
{
 background-color: #c62020; 
 border-right: 1px solid;
 margin-left: -1px;
}

</style> 
```

这工作得很好。但现在我希望它根据变量更改背景颜色，我在 Site.Master.cs 中有代码来执行此操作。

我知道我不能在标题中使用 <%= %> 。让它工作的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:30:55.127

为什么不把你的 css 类放在 head 之外并将它放在 body 中，然后你可以在那里使用服务器标签`<% %>`

另一种方法是通过 jQuery 或 javascript

```
$(document).ready(function(){
      $('.active').css("background-color","<%=serverVariable%>");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:43:35.510

我不知道这是不是最好的方法。我也是初学者。但我已经按照以下方式完成了这个..从你的 .cs 文件中的服务器端调用 JavaScript 函数，比如

```
 this.Page.ClientScript.RegisterStartupScript(this.GetType(), "keyforfun",fun_setHeadcolor(your_variable), true); 
```

然后在您的 site.master 页面中添加名为“fun_setHeadcolor”的 javaScript 函数，例如

```
function fun_setHeadcolor(var1)
{ 
  //do stuff here to change background color
  //for example   $('.active').css("background-color",var1);
} 
```

# optimization - 优化我的 CoffeeScript 代码

> ID：15909486
> 
> 赞同：1
> 
> 时间：2013-04-09T18:17:03.057
> 
> 标签：optimization, coffeescript

我目前正在学习 CoffeeScript，因为它比 JavaScript 更具“表现力”，因此，我想知道如何优化下面的代码

```
lastDay = 6
weekdays = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]
weeksToDivide = 0

for x in [1..9001] 
    if x % 5 == 0
        if x % 4 == 0
            if x % 3 == 0
                nextDay = x
                break               

totalDays = lastDay + nextDay
day = (totalDays -= 7 while totalDays > 7)
weekday = weekdays[day[day.length - 1] - 1]

alert "Days until next meeting: #{nextDay}"
alert "That day is on a #{weekday}" 
```

我主要是在寻找一种优化 if 嵌套的方法，但任何其他提示也将不胜感激。

提前致谢。

**编辑：**
我很愚蠢，忘记了数学是如何工作的，谢谢 Zeta。另外，感谢 Epidemia 的进一步优化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:55:16.670

这些优化与 CoffeeScript 关系不大：

首先，可以将嵌套`if`的 s 转换为链式`and`s，例如：

```
for x in [1..9001] 
  if x % 5 is 0 and x % 4 is 0 and x % 3 is 0 
    nextDay = x
    break 
```

但是询问一个数字“x”是否能被 5整除、被 4整除*和被 3 整除**与*询问它是否能被这三个数字的最小公倍数（即 60）整除是一样的。所以循环相当于：

```
for x in [1..9001] 
  if x % 60 is 0 
    nextDay = x
    break 
```

但是，那个循环总是会做同样的事情：分配`nextDay`给 60。所以它可以优化为一个单一的分配：

```
nextDay = 60 
```

如果 5、4 和 3 除数不是常数并且您的算法应该能够有不同的除数，您可以将它们设置`nextDay`为[最小公倍数](https://stackoverflow.com/questions/147515/least-common-multiple-for-3-or-more-numbers)。

然后，`(totalDays -= 7 while totalDays > 7)`循环创建一个数组，然后只使用它的最后一个元素。可以用模运算符替换逻辑：

```
totalDays = lastDay + nextDay - 1
weekday = weekdays[totalDays % 7] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:14:28.197

您可以将循环缩短为（尽管您也可以这样做`nextday = 60`;-)：

```
for x in [1..9001] when x % 60 is 0
  nextDay = x
  break 
```

# android - Android 上下文操作栏样式

> ID：15909488
> 
> 赞同：0
> 
> 时间：2013-04-09T18:17:09.997
> 
> 标签：android

我试图弄清楚如何在检查和标题之间的上下文操作栏中显示此分隔线，如下图所示。以前的开发人员删除了那个分隔线，我想把它拿回来。任何方向都会非常有帮助。谢谢！

![](https://i.stack.imgur.com/g1EkX.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T17:28:38.437

您正在主题中寻找“android:actionModeCloseButtonStyle”样式。类似于以下内容：

```
<item name="android:actionModeCloseButtonStyle">
  @style/Widget.Sherlock.ActionButton.CloseMode
</item> 
```

请参阅此线程：[上下文操作栏：完成按钮](https://stackoverflow.com/questions/17281509/contextual-action-bar-done-button)

# html - 两行文本溢出省略号

> ID：15909489
> 
> 赞同：174
> 
> 时间：2013-04-09T18:17:11.350
> 
> 标签：html, css

我知道您可以使用 CSS 规则的组合来使文本在溢出时以省略号 (...) 结尾（超出父级范围）。

是否有可能（随便说，不）达到相同的效果，但让文本换行不止一行？

[这是一个演示](http://jsfiddle.net/8kvWX/1/)。

```
div {
  width: 300px; 
  height: 42px; 
  overflow: hidden; 
  text-overflow: ellipsis; 
  white-space: nowrap;
} 
```

如您所见，当文本比 div 的宽度更宽时，文本以省略号结尾。但是，仍然有足够的空间让文本在第二行换行并继续。这被 打断`white-space: nowrap`，这是省略号起作用所必需的。

有任何想法吗？

PS：没有 JS 解决方案，如果可能的话，纯 CSS。

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2016-01-01T20:09:58.750

简单的 CSS 属性可以解决问题。以下是三行省略号。

```
display: -webkit-box;
-webkit-line-clamp: 3;
-webkit-box-orient: vertical;
overflow: hidden;
text-overflow: ellipsis; 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2015-06-19T14:28:09.530

看看这个纯css版本：[http ://codepen.io/martinwolf/pen/qlFdp](http://codepen.io/martinwolf/pen/qlFdp)

```
display: -webkit-box;
max-width: 400px;
height: 109.2px;
-webkit-line-clamp: 3;
-webkit-box-orient: vertical;
overflow: hidden;
text-overflow: ellipsis;
line-height: 1.625; 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-07-24T19:31:16.407

我不确定你是否看过这篇[**文章**](http://www.mobify.com/blog/multiline-ellipsis-in-pure-css/)，但是 Chris Coyier 的优秀 CSS-Tricks.com 不久前发布了一个指向这篇文章的链接，它是一个纯粹的 CSS 解决方案，可以完全满足你的需求。

[（点击查看CodePen）](http://codepen.io/romanrudenko/pen/ymHFh)

```
html,
body,
p {
  margin: 0;
  padding: 0;
  font-family: sans-serif;
}

.ellipsis {
  overflow: hidden;
  height: 200px;
  line-height: 25px;
  margin: 20px;
  border: 5px solid #AAA;
}

.ellipsis:before {
  content: "";
  float: left;
  width: 5px;
  height: 200px;
}

.ellipsis>*:first-child {
  float: right;
  width: 100%;
  margin-left: -5px;
}

.ellipsis:after {
  content: "\02026";
  box-sizing: content-box;
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  float: right;
  position: relative;
  top: -25px;
  left: 100%;
  width: 3em;
  margin-left: -3em;
  padding-right: 5px;
  text-align: right;
  background-size: 100% 100%;
  /* 512x1 image,gradient for IE9\. Transparent at 0% -> white at 50% -> white at 100%.*/
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAABCAMAAACfZeZEAAAABGdBTUEAALGPC/xhBQAAAwBQTFRF////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wDWRdwAAAP90Uk5TgsRjMZXhS30YrvDUP3Emow1YibnM9+ggOZxrBtpRRo94gxItwLOoX/vsHdA2yGgL8+TdKUK8VFufmHSGgAQWJNc9tk+rb5KMCA8aM0iwpWV6dwP9+fXuFerm3yMs0jDOysY8wr5FTldeoWKabgEJ8RATG+IeIdsn2NUqLjQ3OgBDumC3SbRMsVKsValZplydZpZpbJOQco2KdYeEe36BDAL8/vgHBfr2CvTyDu8R7esU6RcZ5ecc4+Af3iLcJSjZ1ivT0S/PMs3LNck4x8U7wz7Bv0G9RLtHuEq1TbJQr1OtVqqnWqRdoqBhnmSbZ5mXapRtcJGOc4t2eYiFfH9AS7qYlgAAARlJREFUKM9jqK9fEGS7VNrDI2+F/nyB1Z4Fa5UKN4TbbeLY7FW0Tatkp3jp7mj7vXzl+4yrDsYoVx+JYz7mXXNSp/a0RN25JMcLPP8umzRcTZW77tNyk63tdprzXdmO+2ZdD9MFe56Y9z3LUG96mcX02n/CW71JH6Qmf8px/cw77ZvVzB+BCj8D5vxhn/vXZh6D4uzf1rN+Cc347j79q/zUL25TPrJMfG/5LvuNZP8rixeZz/mf+vU+Vut+5NL5gPOeb/sd1dZbTs03hBuvmV5JuaRyMfk849nEM7qnEk6IHI8/qn049hB35QGHiv0yZXuMdkXtYC3ebrglcqvYxoj1muvC1nDlrzJYGbpcdHHIMo2FwYv+j3QAAOBSfkZYITwUAAAAAElFTkSuQmCC);
  background: -webkit-gradient(linear, left top, right top, from(rgba(255, 255, 255, 0)), to(white), color-stop(50%, white));
  background: -moz-linear-gradient(to right, rgba(255, 255, 255, 0), white 50%, white);
  background: -o-linear-gradient(to right, rgba(255, 255, 255, 0), white 50%, white);
  background: -ms-linear-gradient(to right, rgba(255, 255, 255, 0), white 50%, white);
  background: linear-gradient(to right, rgba(255, 255, 255, 0), white 50%, white);
}
```

```
<div class="ellipsis">
  <div>
    <p>
      Call me Ishmael. Some years ago – never mind how long precisely – having little or no money in my purse, and nothing particular to interest me on shore, I thought I would sail about a little and see the watery part of the world. It is a way I have of
      driving off the spleen, and regulating the circulation. Whenever I find myself growing grim about the mouth; whenever it is a damp, drizzly November in my soul; whenever I find myself involuntarily pausing before coffin warehouses, and bringing
      up the rear of every funeral I meet; and especially whenever my hypos get such an upper hand of me, that it requires a strong moral principle to prevent me from deliberately stepping into the street, and methodically knocking people's hats off –
      then, I account it high time to get to sea as soon as I can.
    </p>
  </div>
</div>
```

当然，作为一个纯 CSS 解决方案意味着它也是一个相当复杂的解决方案，但它可以干净优雅地工作。我将假设 Javascript 是不可能的，因为使用 Javascript 更容易实现（并且可以说更可降解）。

作为一个额外的好处，有一个完整的过程的可[下载 zip 文件](https://www.mobify.com/wp-content/uploads/2012/09/css-ellipses.zip)（如果你想了解它和所有），还有一个 SASS 混合文件，以便你可以将它折叠到你的过程中。

希望这可以帮助！

**[http://www.mobify.com/blog/multiline-ellipsis-in-pure-css/](http://www.mobify.com/blog/multiline-ellipsis-in-pure-css/)**

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2020-01-17T14:20:05.467

如果上述方法不起作用，请使用它

```
 display: -webkit-box;
 max-width: 100%;
 margin: 0 auto;
 -webkit-line-clamp: 2;
 /* autoprefixer: off */
 -webkit-box-orient: vertical;
 /* autoprefixer: on */
 overflow: hidden;
 text-overflow: ellipsis; 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2017-11-17T11:58:42.987

下面的CSS应该可以解决问题。

在第二行之后，文本将包含...

```
line-height: 1em;
max-height: 2em;
display: -webkit-box;
-webkit-box-orient: vertical;
-webkit-line-clamp: 2; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-09-04T21:02:12.270

我的解决方案重用了 amcdnl 之一，但我的后备方案包括使用文本容器的高度：

```
.my-caption h4 {
    display: -webkit-box;
    margin: 0 auto;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;

    height: 40px;/* Fallback for non-webkit */
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-11-16T11:39:11.393

结合两个类似乎更优雅。`two-lines`如果只需要查看一行，您可以放弃课程：

```
.ellipse {
          white-space: nowrap;
          display:inline-block;
          overflow: hidden;
          text-overflow: ellipsis;
       }
      .two-lines {
          -webkit-line-clamp: 2;
          display: -webkit-box;
          -webkit-box-orient: vertical;
          white-space: normal;
      }
      .width{
          width:100px;
          border:1px solid hotpink;
      }
```

```
 <span class='width ellipse'>
          some texts some texts some texts some texts some texts some texts some texts
       </span>

       <span class='width ellipse two-lines'>
          some texts some texts some texts some texts some texts some texts some texts
       </span>
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-03-11T10:44:15.160

对于那些在**scss**工作的人，您需要添加`!autoprefixer`到评论的开头，以便为 postcss 保留它：

我遇到了这个问题，这就是为什么在这里发布

```
line-height: 1em;
max-height: 2em;
display: -webkit-box;
/*! autoprefixer: off */
-webkit-box-orient: vertical;
-webkit-line-clamp: 2; 
```

[参考](https://github.com/postcss/autoprefixer/issues/776)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-07-07T14:01:47.557

您可以使用溶解出来的效果而不是省略号，纯 CSS 并且看起来更专业：

```
 <div style="width: 293px; height:48px; overflow: hidden; ">
        More than two line of text goes here-More than two line of text goes here
    </div>
    <div style="position: relative; top: -24px; width: 293px; height:24px; 
             background: linear-gradient(90deg, rgba(255,0,0,0) 40%, rgba(255,255,255,1) 99%);">
    </div> 
```

在这里，我假设您的背景颜色是白色。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-10-24T11:21:20.437

根据我在 stackoveflow 中看到的答案，我创建了这个 LESS mixin（[使用此链接生成 CSS 代码](http://less2css.org/#%7B%22less%22%3A%22.max-lines(%40lines%3A%203%3B%20%40line-height%3A%201.2)%20%7B%5Cn%20overflow%3A%20hidden%3B%5Cn%20text-overflow%3A%20ellipsis%3B%5Cn%20display%3A%20-webkit-box%3B%5Cn%20-webkit-box-orient%3A%20vertical%3B%5Cn%20-webkit-line-clamp%3A%20%40lines%3B%5Cn%20line-height%3A%20%40line-height%3B%5Cn%20max-height%3A%20%40line-height%20*%20%40lines%3B%5Cn%7D%5Cn%5Cn.example%7B%5Cn%5Ct.max-lines()%3B%5Cn%7D%22%7D)）：

```
.max-lines(@lines: 3; @line-height: 1.2) {
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: @lines;
  line-height: @line-height;
  max-height: @line-height * @lines;
} 
```

### 用法

```
.example-1 {
    .max-lines();
}

.example-2 {
    .max-lines(3);
}

.example-3 {
    .max-lines(3, 1.5);
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-01-16T15:46:39.353

几乎所有浏览器都可以限制为几行，但在 Firefox 和 IE 中不会显示省略号（3 个点）。演示 - [http://jsfiddle.net/ahzo4b91/1/](http://jsfiddle.net/ahzo4b91/1/)

```
div {
width: 300px;
height: 2.8em;
line-height: 1.4em;
display: flex;
-webkit-line-clamp: 2;
display: -webkit-box;
-webkit-box-orient: vertical;
overflow: hidden; 
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-03-01T09:50:26.717

在我的角度应用程序中，以下样式对我有用，以实现**第二行**文本溢出的**省略号**：

 **```
 <div style="height:45px; overflow: hidden; position: relative;">
     <span class=" block h6 font-semibold clear" style="overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box; 
        line-height: 20px; /* fallback */
        max-height: 40px; /* fallback */
        -webkit-line-clamp: 2; /* number of lines to show */
        -webkit-box-orient: vertical;">
        {{ event?.name}} </span>
 </div> 
```

希望它可以帮助某人。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-05-04T15:14:04.043

```
 text-overflow: ellipsis;
          overflow: hidden;
          text-overflow: ellipsis;
          display: -webkit-box;
          line-height: 36px;
          max-height: 18px;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical; 
```

我发现了 line-clamp 和 line-height 的组合：D

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-19T23:14:24.180

这是基于 Mahan Lamei 的建议的 Material-UI 褪色文本效果：

创建叠加样式

```
const useStyles = makeStyles((theme) =>
  createStyles({
    fadeText: {
      background: `linear-gradient( 180deg, #FFFFFF00, 0%, #FFFFFF06 30%, #FFFFFFFF 100%)`,
      pointerEvents: "none",
    }
  })
) 
```

接下来在固定高度的嵌套 Box 组件上叠加渐变

```
<Grid container justify="center">
  <Grid item xs={8} sm={6} md={4}>
    <Box>
      <Box
        component="div"
        overflow="hidden"
        display="flex"
        flexDirection="column"
        fontFamily="Roboto"
        fontSize="body1.fontSize"
        fontWeight="fontWeightLight"
        textAlign="justify"
        height={['8rem']}
      >
        <Box display="flex">
          Lorem ipsum dolor sit amet, consectetur adipiscing
          elit, sed do eiusmod tempor incididunt ut labore
          et dolore magna aliqua. Ut enim ad minim veniam,
          quis nostrud exercitation ullamco laboris nisi ut
          aliquip ex ea commodo consequat. Duis aute irure
          dolor in reprehenderit in voluptate velit esse
          cillum dolore eu fugiat nulla pariatur. Excepteur
          sint occaecat cupidatat non proident, sunt in
          culpa qui officia deserunt mollit anim id est
          laborum.
        </Box>
      </Box>
      <Box
        className={classes.fadeText}
        display="block"
        position="relative"
        top="-4rem"
        height="4rem"
      />
    </Box>
  </Grid>
</Grid> 
```

工作演示：[Codesandbox](https://codesandbox.io/s/mui-faded-text-ui6x2)

MUI 的默认主题使用缩写的 CSS 颜色 ( `#FFF`)，因此如果您想根据当前主题设置渐变，您需要使用完整的六个字符变体覆盖它们。

**示例：** *用于`theme`设置渐变（例如基于亮/暗主题）：*

```
const useStyles = makeStyles((theme: Theme) =>
  createStyles({
    fadeText: {
      background: `linear-gradient( 180deg, ${theme.palette.background.paper}00 0%, ${theme.palette.background.paper}06 30%, ${theme.palette.background.paper}FF 100%)`
    } 
  })
) 
```

*编辑：更新包括 Tony Bogdanov 的建议*

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2013-09-17T23:20:29.833

这是一个完全的黑客，但它有效：

[http://jsfiddle.net/2wPNG/](http://jsfiddle.net/2wPNg/)

```
div {
    width: 30%;
    float: left;
    margin-right: 2%;
    height: 94px;
    overflow: hidden;
    position: relative;
}

div:after {
     display: block;
      content: '...';
      width: 1em;
  height: 1.5em;
  background: #fff;
  position: absolute;
  bottom: -6px;
  right: 0;
    } 
```

它确实有问题......它可能会尴尬地切断一封信，并且在响应式网站上可能会产生一些奇怪的结果。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2017-06-07T08:04:55.893

这是一个使用 jQuery 管理省略号的简单脚本。它检查元素的真实高度，并创建一个隐藏的原始节点和一个截断节点。当用户单击它时，它会在两个版本之间切换。

最大的好处之一是“省略号”接近最后一个词，正如预期的那样。

如果您使用纯 CSS 解决方案，则三个点看起来与最后一个单词相距甚远。

```
function manageShortMessages() {

        $('.myLongVerticalText').each(function () {
            if ($(this)[0].scrollHeight > $(this)[0].clientHeight)
                $(this).addClass('ellipsis short');
        });

        $('.myLongVerticalText.ellipsis').each(function () {
            var original = $(this).clone().addClass('original notruncation').removeClass('short').hide();
            $(this).after(original);

            //debugger;
            var shortText = '';
            shortText = $(this).html().trim().substring(0, 60) + '...';
            $(this).html(shortText);
        });

        $('.myLongVerticalText.ellipsis').click(function () {
            $(this).hide();

            if ($(this).hasClass('original'))
            {
                $(this).parent().find('.short').show();
            }
            else
            {
                $(this).parent().find('.original').show();
            }
        });
    }

  manageShortMessages();
```

```
div {
 border:1px solid red;
 margin:10px;
}

div.myLongVerticalText {
  height:30px;
  width:450px;
}

div.myLongVerticalText.ellipsis {
 cursor:pointer;
}

div.myLongVerticalText.original {
  display:inline-block;
  height:inherit;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<body>
<div class="myLongVerticalText">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse sit amet quam hendrerit, sagittis augue vel, placerat erat. Aliquam varius porta posuere. Aliquam erat volutpat. Phasellus ullamcorper malesuada bibendum. Etiam fringilla, massa vitae pulvinar vehicula, augue orci mollis lorem, laoreet viverra massa eros id est. Phasellus suscipit pulvinar consectetur. Proin dignissim egestas erat at feugiat. Aenean eu consectetur erat. Nullam condimentum turpis eu tristique malesuada.

Aenean sagittis ex sagittis ullamcorper auctor. Sed varius commodo dui, nec consectetur ante condimentum et. Donec nec blandit mi, vitae blandit elit. Phasellus efficitur ornare est facilisis commodo. Donec convallis nunc sed mauris vehicula, non faucibus neque vehicula. Donec scelerisque luctus dui eu commodo. Integer eu quam sit amet dui tincidunt pharetra eu ac quam. Quisque tempus pellentesque hendrerit. Sed orci quam, posuere eu feugiat at, congue sed felis. In ut lectus gravida, volutpat urna vitae, cursus justo. Nam suscipit est ac accumsan consectetur. Donec rhoncus placerat metus, ut elementum massa facilisis eget. Donec at arcu ac magna viverra tincidunt.
</div>

<div class="myLongVerticalText">
One Line Lorem ipsum dolor sit amet.  
</div>
</body>
```

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2013-04-09T18:41:19.103

不确定您的目标是什么，但您希望文本出现在第二行吗？

这是您的 jsFiddle： http: [//jsfiddle.net/8kvWX/4/](http://jsfiddle.net/8kvWX/4/)刚刚删除了以下内容：

```
 white-space:nowrap; 
```

我不确定这是否是您正在寻找的东西。

问候，

面**

# php - Zend Framework 2 数据库测试 - 非对象上的 canCallMagicCall()

> ID：15909491
> 
> 赞同：2
> 
> 时间：2013-04-09T18:17:15.067
> 
> 标签：php, unit-testing, phpunit, zend-framework2

我一直在尝试使用本教程测试我的模型表：http: [//framework.zend.com/manual/2.1/en/tutorials/unittesting.html](http://framework.zend.com/manual/2.1/en/tutorials/unittesting.html)

我尝试将它们应用到我自己的应用程序中，实际上它与教程中的专辑非常相似，只是做了一些小的修改。

当我尝试运行 fetchAll() 测试时，出现以下错误：

```
PHP Fatal error:  Call to a member function canCallMagicCall() on a non-object in C:\Program Files (x86)\Zend\Apache2\htdocs\ukazka2\vendor\zendframework\zendframework\library\Zend\Db\TableGateway\AbstractTableGateway.php on line 470 
```

堆栈跟踪：

```
[09-Apr-2013 21:23:19 UTC] PHP Stack trace:
[09-Apr-2013 21:23:19 UTC] PHP   1\. {main}() C:\Program Files (x86)\Zend\ZendServer\bin\phpunit:0
[09-Apr-2013 21:23:19 UTC] PHP   2\. PHPUnit_TextUI_Command::main() C:\Program Files (x86)\Zend\ZendServer\bin\phpunit:46
[09-Apr-2013 21:23:19 UTC] PHP   3\. PHPUnit_TextUI_Command->run() C:\Program Files (x86)\Zend\ZendServer\bin\PEAR\PHPUnit\TextUI\Command.php:129
[09-Apr-2013 21:23:19 UTC] PHP   4\. PHPUnit_TextUI_TestRunner->doRun() C:\Program Files (x86)\Zend\ZendServer\bin\PEAR\PHPUnit\TextUI\Command.php:176
[09-Apr-2013 21:23:19 UTC] PHP   5\. PHPUnit_Framework_TestSuite->run() C:\Program Files (x86)\Zend\ZendServer\bin\PEAR\PHPUnit\TextUI\TestRunner.php:349
[09-Apr-2013 21:23:19 UTC] PHP   6\. PHPUnit_Framework_TestSuite->run() C:\Program Files (x86)\Zend\ZendServer\bin\PEAR\PHPUnit\Framework\TestSuite.php:705
[09-Apr-2013 21:23:19 UTC] PHP   7\. PHPUnit_Framework_TestSuite->runTest() C:\Program Files (x86)\Zend\ZendServer\bin\PEAR\PHPUnit\Framework\TestSuite.php:745
[09-Apr-2013 21:23:19 UTC] PHP   8\. PHPUnit_Framework_TestCase->run() C:\Program Files (x86)\Zend\ZendServer\bin\PEAR\PHPUnit\Framework\TestSuite.php:775
[09-Apr-2013 21:23:19 UTC] PHP   9\. PHPUnit_Framework_TestResult->run() C:\Program Files (x86)\Zend\ZendServer\bin\PEAR\PHPUnit\Framework\TestCase.php:776
[09-Apr-2013 21:23:19 UTC] PHP  10\. PHPUnit_Framework_TestCase->runBare() C:\Program Files (x86)\Zend\ZendServer\bin\PEAR\PHPUnit\Framework\TestResult.php:648
[09-Apr-2013 21:23:19 UTC] PHP  11\. PHPUnit_Framework_TestCase->runTest() C:\Program Files (x86)\Zend\ZendServer\bin\PEAR\PHPUnit\Framework\TestCase.php:831
[09-Apr-2013 21:23:19 UTC] PHP  12\. ReflectionMethod->invokeArgs() C:\Program Files (x86)\Zend\ZendServer\bin\PEAR\PHPUnit\Framework\TestCase.php:976
[09-Apr-2013 21:23:19 UTC] PHP  13\. BookTest\Model\BookTableTest->testFetchAllReturnsAllBooks() C:\Program Files (x86)\Zend\ZendServer\bin\PEAR\PHPUnit\Framework\TestCase.php:976
[09-Apr-2013 21:23:19 UTC] PHP  14\. Mock_TableGateway_26882600->expect() C:\Program Files (x86)\Zend\Apache2\htdocs\ukazka2\module\Book\test\BookTest\Model\BookTableTest.php:15
[09-Apr-2013 21:23:19 UTC] PHP  15\. Zend\Db\TableGateway\AbstractTableGateway->__call() C:\Program Files (x86)\Zend\Apache2\htdocs\ukazka2\module\Book\test\BookTest\Model\BookTableTest.php:15 
```

我的测试代码如下：

```
public function testFetchAllReturnsAllBooks(){
    $resultSet = new ResultSet();
    $mockTableGateway = $this->getMock('Zend\Db\TableGateway\TableGateway',
            array('select'), array(), '', false);
    $mockTableGateway->expect($this->once())
                     ->method('select')
                     ->with()
                     ->will($this->returnValue($resultSet));

    $bookTable = new BookTable($mockTableGateway);

    $this->assertSame($resultSet, $bookTable->fetchAll());
} 
```

这是我的 fetchAll() 函数：

```
public function fetchAll(){
    if(($resultSet = $this->cache->getItem('books')) == FALSE){
        $resultSet = $this->tableGateway->select();
        $resultSet = $resultSet->toArray();
        $this->cache->setItem('books', $resultSet);         
    }
    $books = array();
    $hydrator = new Hydrator\ArraySerializable();
    foreach($resultSet as $result){
        $books[] = $hydrator->hydrate($result, new Book());
    }
    return $books;
} 
```

您是否有任何提示该错误可能存在于何处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:38:23.817

你确定你调用的方法是正确的：

```
$mockTableGateway->expect($this->once()) 
```

从我在 Zend 文档中可以看到，它应该是`expects()`. 请尝试让我知道是否是这种情况。

# java - 将字符串转换为 int 进行求和，然后在必要时用逗号返回字符串

> ID：15909492
> 
> 赞同：-2
> 
> 时间：2013-04-09T18:17:22.217
> 
> 标签：java, string, int

我有一些表示为字符串的数字。其中一些格式是这样的，“12,309”。我需要将它们更改为整数，对它们求和，然后在适当的位置将它们改回带逗号的字符串。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:21:47.967

使用[`DecimalFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)该类以逗号指定格式。使用该`parse`方法将 a 解析`String`为 a `Number`，并使用该`format`方法将其转换回`String`带有逗号的 a 。

格式字符串“#,###”应该足以表示逗号分隔的数字，例如 1,234,567。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:21:39.753

对空格分隔的字符串使用正则表达式，这将起作用

```
String regex = "(?<=[\\d])(,)(?=[\\d])";
Pattern p = Pattern.compile(regex);

String str = "12,000 1,000 42";

int currentInt = 0;
int sum = 0; 
String currentStr = "";

for(int i = 0; i < commaDelimitedNumbers.length; i++){

    currentStr = commaDelimitedNumbers[i];

    Matcher m = p.matcher(currentStr);

    currentStr = m.replaceAll("");

    currentInt = Integer.parseInt(currentStr);

    sum  += currentInt;
}

System.out.println(sum); 
```

# php - PHP Formmail 不显示电话或电子邮件

> ID：15909499
> 
> 赞同：1
> 
> 时间：2013-04-09T18:17:54.017
> 
> 标签：php, html, forms, email

我在另一个网站上再次遇到 PHP Formemail 问题。

因此，每当我发布测试表时，我都会填写每个字段，但我只会得到姓名、兴趣和信息。该电子邮件应该在电子邮件中显示其余字段，并且作为发件人，它既不显示，电话也不显示。这是PHP代码：

```
<?php
$adminemail = 'info@info.com';

$controlvars = ' thankspage submitter ccsubmitter messagetosubmitter ';
$messagetoadmin = $_POST['Name'] ." has sent you the following message:

";

 else $messagetosubmitter = $_POST['messagetosubmitter'];

while(list($key, $value) = each($_POST))
{
 if (!stristr($controlvars, ' '. $key .' '))
 {
  $messagetoadmin .= $key .': '. $value .'

';
  $messagetosubmitter .= $key .': '. $value .'

';
 }
} 
$submitter = $_POST['Email'];
if ($submitter == '') $submitter = 'anon@anon.com';
if (strstr($submitter, "\n") || strlen($submitter) > 50) die("Begone, foul spammer.");

mail($adminemail, 'Message from site: '. stripslashes($_POST['subject']),     stripslashes($messagetoadmin), 'From: '. $submitter);

if ($_POST['ccsubmitter'] == 'yes')
{
 mail($Email, 'Message from site: '. stripslashes($_POST['subject']),     stripslashes($messagetosubmitter), 'From: '. $adminemail);
}
if ($autoresponse != '')
{
 $body = geturl($autoresponse);
 mail($Email, 'Re: '. stripslashes($_POST['subject']), stripslashes($body), 'From: '.     $adminemail);
}
header('Location: '. $_POST['thankspage']);
// just in case redirect doesn't work
die('<meta http-eqiv="refresh" content="0;url='. $_POST['thankspage'] .'">');

if (!function_exists('geturl'))
{
function geturl($url)
{
 if (extension_loaded('curl')) 
 {
    $user_agent = 'Mozilla/4.0 (compatible; MSIE 6.02; PHP)';
   $ch = curl_init(); 
   curl_setopt ($ch, CURLOPT_URL, $url); 
   curl_setopt ($ch, CURLOPT_USERAGENT, $user_agent); 
   curl_setopt ($ch, CURLOPT_HEADER, false); 
   curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true); 
   curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, 15);  // timeout after 5 seconds
   curl_setopt ($ch, CURLOPT_TIMEOUT, 15);  // timeout after 5 seconds   
   curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, true); 
   $result = curl_exec ($ch); 
   curl_close ($ch); 
// curl_error($ch); // for debugging
   return $result;  
 }

 if (version_compare("4.3.0", phpversion(), "<"))
 { 
  $filecontents = @file_get_contents($url);
 }
 else
 {
  $fd = @fopen($url, 'rb');
  $filecontents = "";
  do 
  {
   $data = @fread($fd, 8192);
   if (strlen($data) == 0) 
   {
    break;
   }
   $filecontents .= $data;
  } while(true); 
  @fclose ($fd);
 }
 return $filecontents;
}
}

?> 
```

这是表单的 HTML：

```
<form name="Contact" id="Contact" method="post" action="formemail.php"     onsubmit="return ValidateContactForm();">
            <input type="hidden" name="thankspage"     value="thankyou.html">
                <input type="hidden" name="ccsubmitter"     value="yes">

                <label><span>Name: *</span>
                    <input name="Name" type="text" >
                </label>
                <label><span>Email: *</span>
                    <input name-"Email" type="text" >
                </label>
                <label><span>Phone:</span>
                    <input name-"Phone" type="text" >
                </label>
                <label><span>Interests:</span>
                    <input name="interests" type="text" >
                </label>
                <label><span>Message:</span></label>
                    <label><textarea name="message"      cols="30"     rows="10" ></textarea>
                </label>
                <input type="submit" value="">
            </form> 
```

任何帮助都将不胜感激并永远记住。预先感谢您的好意！

ETA：我尝试​​将 id= 和 value= 添加到 HTML 表单字段，但这完全没有任何作用。它仍然只返回姓名、兴趣和消息，电子邮件显示它来自 anon@anon.com。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:29:37.803

它没有显示，因为它被写成`<input name-"Email" type="text">`而不是`<input name="Email" type="text">`. 作为一个建议，你为什么不把它写成`<input type="email" name="Email">`？

# ios - 避免在自定义 UIViewController 容器中加载数百个视图控制器

> ID：15909501
> 
> 赞同：2
> 
> 时间：2013-04-09T18:17:55.120
> 
> 标签：ios, model-view-controller, uiviewcontroller, uinavigationcontroller, viewcontroller

我编写了一个自定义 UIViewController 容器，其行为类似于 Flipboard 的页面。用户可以滑动/点击作为子视图控制器的“页面”。我觉得我写得很好，但我担心我会遇到可能有数百个子视图控制器的场景。我想避免将所有这些视图控制器加载到内存中（因为它们都有 UICollectionViews 和大量数据）。

由于存在用于滑动视图的手势交互，因此我需要将每个“下一个”和“上一个”视图添加到容器视图并加载，以便在用户开始在另一个页面上滑动时可见。

我怎样才能阻止每个视图控制器的 -viewDidLoad 发生，以便每个视图控制器只能在需要时加载？是否有任何“最佳实践”或示例 UIViewController 容器在那里我可以得到一些关于仅加载下一个/上一个子控制器的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:28:32.900

理论上你应该有一个容器`UIViewController`和两个`UIViewControllers`（就像你说的那样）。一个将是下一个，另一个将是前一个。然后，您可以保留对两者的引用，当您要转到下一个（例如）时，您只需更新它，例如：

```
- (void)updateViewController:(UIViewController *)viewController withDataSource:(NSDictionary *)dataSource; 
```

最后你有 3 `UIViewControllers`。其他解决方案也是可能的，您可以随时查看 GitHub 或 CocoaControls 以获得一些灵感。

# java - Java BufferedReader ，重置阅读器

> ID：15909510
> 
> 赞同：2
> 
> 时间：2013-04-09T18:18:37.463
> 
> 标签：java

我有一个特殊的方法，我想计算文本文件中的行数，然后读取文件我正在做的是通过迭代 read.nextLine() 然后重置缓冲区来计算文件中的行数并再次从文件的开头读取。我不确定我做错了什么

```
public void ReadFile() throws IOException{
 try{
    FileReader fr = new FileReader(path);
    BufferedReader read = new BufferedReader(fr);
    int numberOfLines=0;
    while(read.readLine()!= null)
    {
        numberOfLines++;  // Getting the number of lines

    }

    read.reset();
    System.out.println(numberOfLines + ": is the no of lines");
    baseString.append(read.readLine());
    baseString.append(read.readLine());
    baseString.append(read.readLine());
    System.out.println(baseString);
 }
 catch(IOException e){
        e.printStackTrace();
 }
} 
```

基本字符串只是一个字符串缓冲区

```
private StringBuffer baseString = new StringBuffer(); 
```

我明确需要计数来执行一些操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:24:29.803

[正如这里](https://stackoverflow.com/questions/262618/java-bufferedreader-back-to-the-top-of-a-text-file)提到的，**文件**是按顺序读取的`BufferedReader`，所以你不能用`reset`BufferedReader回到文件的开头

你必须创造新的`FileReader`和`BufferedReader`

或者

使用[RandomAccessFile](http://java.sun.com/j2se/1.4.2/docs/api/java/io/RandomAccessFile.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:29:29.023

您需要`mark()`在流上调用。`Reader.reset()`如果流之前没有被标记，则不能保证工作。特别是的`BufferedReader`实施`reset()`仅记录为返回到先前的标记。

# image - 如何在magento中标记产品图像？

> ID：15909514
> 
> 赞同：-3
> 
> 时间：2013-04-09T18:18:53.873
> 
> 标签：image, magento

我有一个新的需求，它有一个分组产品，并且分组产品的图像在每个简单产品的位置都有标记，如 1、2、3 等。单击这些标记时，它应该会显示一个弹出窗口，其中包含该简单产品的图像、名称以及添加到购物车按钮。是否有任何扩展功能可以做到这一点？如果没有，那我该怎么做？我使用的magento版本是1.7.0.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:27:23.493

好吧，我不确定这样的扩展是否可用。我的解决方案是使用任何 jQuery 或 Prototype 灯箱或弹出代码并将产品 ID 作为参数传递。使用查询字符串将产品添加到购物车。 [http://www.your_domain.com/checkout/cart/add?product=68&qty=1](http://www.your_domain.com/checkout/cart/add?product=68&qty=1)

# xpages - 无法从带有缩写名称的组合框中显示通用名称

> ID：15909515
> 
> 赞同：0
> 
> 时间：2013-04-09T18:18:54.607
> 
> 标签：xpages

我正在从@dblookup 公式中检索组合框的值。此公式以缩写格式返回名称值。但是，我想在组合框中将这些名称值显示为 Common Names [CN]。但在保存到文档时，所选值应以缩写格式保存。

我尝试使用自定义转换器完成此任务，但都是徒劳的。有可能通过这种方式吗？请帮忙 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T18:30:12.093

选择字段（组合、单选、复选框）支持管道别名。在您的选择项目公式中，循环遍历 @DbLookup 结果并将每个结果转换为别名字符串：

```
var result = [];
var abbreviatedNames = @DbLookup(...;
for (var i = 0; i < abbreviatedNames.length; i++) {
  var eachName = abbreviatedNames[i];
  result.push(@Name("[CN]",eachName) + "|" + eachName);
}
return result; 
```

用户将能够选择一个通用名称，但存储的实际值将是缩写名称。

# php - 将 php 变量转换为 javascript.Not 工作

> ID：15909528
> 
> 赞同：2
> 
> 时间：2013-04-09T18:19:38.743
> 
> 标签：php, javascript

```
<?php
header("Content-type: application/javascript");
?>
<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
<?php 

   $variable=10;
?>
<script>

   var myVar = "<?php echo $variable; ?>";
   alert(myVar);

</script>
</body>
</html> 
```

这是我的源代码，它不工作。我担心将 php 变量转换为 javascript 变量。警报将整行显示为字符串而不是打印值...也尝试过 json 函数。没用。我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T18:21:42.217

删除这一行：

```
header("Content-type: application/javascript"); 
```

这告诉浏览器将此页面输出为文本（即浏览器不会呈现它），JavaScript 应该加载到 HTML 文件中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T18:21:22.617

当浏览器实际上正在接收 HTML 时，您绝对不应该告诉浏览器它正在接收 JavaScript：

```
header("Content-type: text/html"); 
```

HTML 包含一个`<script>`标签，而标签本身包含 JavaScript，这一事实完全不同。

此外，在 JavaScript 中注入 PHP 变量的更好方法*是*

```
var myVar = <?php echo json_encode($variable); ?>; 
```

注意值周围没有引号 -`json_encode`根据需要自动引用。注入变量有一些优点，这使得这种方法和您的原始方法都不是防弹的，但`json_encode`作为默认选择要好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:21:51.180

我猜你的文件有 .php 扩展名。在这种情况下，一个简单的`<script>var myVar=<?php print $variable; ?></script>`就可以了，不需要用引号或双引号括起来：P

# scala - 奇怪的 weka 副作用

> ID：15909529
> 
> 赞同：4
> 
> 时间：2013-04-09T18:19:39.907
> 
> 标签：scala, machine-learning, nlp, weka, side-effects

我有一个成功的 weka 分类器（在 scala 中）。我正在尝试实现第二个分类器与它一起工作。

在训练期间，我正在为第一个分类器设置实例，如下所示：

```
val data = new Instances("Actions",attrs,10) 
```

这工作正常。然而，简单地添加以下行会破坏程序。

```
val tagdata = new Instances("Tags",tagattrs,10) 
```

添加此行时，程序*会在第一个分类器更新时*崩溃 从字面上看，工作和非工作之间的唯一变化是对该行的添加。Tagdata 从未使用过（所有使用它的内容都已被注释掉，对于那些阅读我最后一个问题的人），并且程序甚至不会在添加的行上崩溃。这使得创建第二组实例似乎有一些奇怪的副作用。分类器不能并排训练吗？

这是它抛出的错误：

```
java.lang.ArrayIndexOutOfBoundsException: 75
at weka.estimators.DiscreteEstimator.addValue(DiscreteEstimator.java:89)
at weka.classifiers.bayes.NaiveBayes.updateClassifier(NaiveBayes.java:322)
at Parser$.addInstance$1(Parser.scala:253)
... 
```

这是一个工作子样本（只要您在 ./lib/ 中有 weka.jar，在 ./resources/ 中有一个 conll 格式的测试文件）。取消注释该`val tagdata...`行将产生上述问题。

```
import scala.collection.mutable.Queue
import scala.collection.mutable.ListBuffer
import scala.collection.mutable.HashMap
import scala.collection.mutable.MultiMap
import scala.collection.mutable.MutableList
import scala.collection.mutable.Stack
import scala.actors.Actor
import scala.actors.Actor._
import scala.io.Source
import java.io.File
import scala.util.Random
import weka.core._
import weka.classifiers.bayes.NaiveBayesUpdateable
import java.net.URL

object Parser{
  //TypeDefs
  type Arc = (Int, String) //Index, Label
  type Tag = (String, Double) //Tag, probability
  type Token = (Int, String, Int, String) //Index, Word, Head, Label
  //Running params
  val testing = true
  var training = true
  var parsing = true
  val testFile = "test.conll"
  val chooser = new wekaChooser()
  //Data structs
  val storedTokens = MutableList[Token]()
  val buffer = Queue[Token]()
  var stack = Stack[Token]()
  val arcs = HashMap[Int, Arc]()
  val tags = HashMap[Int, String]()
  val classifier = new NaiveBayesUpdateable()
  val tagclassifier = new NaiveBayesUpdateable()
  val tagFrequencies = HashMap[String, List[Tag]]()
  val supplementalTagFrequencies = Map("eat" -> List(("VB", 1.0)), "beans" ->     List(("NN", 1.0)))
  val contextLists = Map("unknown" -> List(), "confirmation" -> List(("UH", 0.8), "right",     "correct", "right", "yes"))
  val context = ListBuffer[Tag]()
  val attrs = new FastVector(4)
  val tagattrs = new FastVector(4)
  var counter = 1

  def main(args: Array[String]){
    if(training) train(testFile)
  }

  def resetLists()={
    buffer.clear
    stack.clear
    stack.push((0, "ROOT", 0, "ROOT"))
    arcs.clear  
    storedTokens.clear
  }

  def applyAction(action:String, buffer:Queue[Token], stack:Stack[Token]):Unit= {
    action match{    
    case "QUIT" => {
      println("Could not parse :(")
      buffer.clear
      stack.clear
    }
    case "SHIFT" => {
      stack.push(buffer.front)
      buffer.dequeue
    }
    case "REDUCE" => {
     // tags.put(stack.top._1, 
       storedTokens += stack.pop
    }
    case x =>{
      x.split("~")match{
        case Array(action, label) => 
          if(action=="LEFTARC"){
            arcs.put(stack.top._1, (buffer.front._1, label))
            storedTokens += stack.pop
          }
          if(action=="RIGHTARC"){
            arcs.put(buffer.front._1, (stack.top._1, label))
            applyAction("SHIFT", buffer, stack)
          }}}}
      }

def train(testFile:String)={
  var wordsmap = HashMap[Int, String]()

def leftDependents(tokenindex:Int) = {
  arcs.filter(_._2._1==tokenindex).filterKeys(_<tokenindex).keys.toList
}

def addInstance(action:String)={
 val data = new Instances("Actions",attrs,10)
//     val tagdata = new Instances("Tags",tagattrs,10)
 data.setClassIndex(2)
 //tagdata.setClassIndex(2)
 val instance = new Instance(3)
//     val taginstance = new Instance(3)
 instance.setDataset(data)     
 //taginstance.setDataset(tagdata)     

 val wordshead = wordsmap.size match{
   case 0 => "NIL"
   case _ => {
     wordsmap(buffer.front._1)
   }
 }

 List(stack.top._2, buffer.front._2, action).zipWithIndex.foreach{
   case (attrString:String, index)=> attrs.elementAt(index) match{
     case attr:Attribute => {
       instance.setValue(attr,attrString)
        }
     }         
   }

 println(instance)
  //   println(taginstance)

//     tagclassifier.updateClassifier(taginstance)
 classifier.updateClassifier(instance)
 }

def setupClassifier = {
 val acts = List("LEFTARC~", "RIGHTARC~")  
 val List(words:List[String], cpostags:List[String], deprels:List[String]) =   Source.fromURL(getClass.getResource("resources/"+testFile)).getLines.toList.map{
   line => line.split("\t") match{
     case Array(id, word, _, cpostag, _, _, head, deprel, _, _) => (word, cpostag, deprel)
     case _ => ("","","")
   }
 }.unzip3.productIterator.toList.map{
   case x:List[String] => (x.toSet++Set("ROOT", "NIL")).toList
   case _ => List()
 }

 val classWords = new FastVector(words.length)
 for(word <- words) classWords.addElement(word)
 val classTags = new FastVector(cpostags.length)
 for(tag <- cpostags) classTags.addElement(tag)

 val stacktag = new Attribute("stacktag", classTags)
 val buffertag = new Attribute("buffertag", classTags)
 val wordattr = new Attribute("word", classWords)

 val fvaction = new FastVector(deprels.length*2+2)
 fvaction.addElement("SHIFT")
 fvaction.addElement("REDUCE")
 for(act <- acts; deprel <- deprels) fvaction.addElement(act+deprel)     
 val action = new Attribute("action", fvaction)

 attrs.addElement(stacktag)
 attrs.addElement(buffertag)
 attrs.addElement(action)     

 tagattrs.addElement(stacktag)
 tagattrs.addElement(wordattr)
 tagattrs.addElement(buffertag)

 val structure =  new Instances("Actions", attrs, 10)
 structure.setClassIndex(2)
 classifier.buildClassifier(structure)

 val tagstructure =  new Instances("Tags", tagattrs, 10)
 tagstructure.setClassIndex(2)
 tagclassifier.buildClassifier(tagstructure)
 }    
//The Code
println("training")
//Based on Malt's oracle prediction training. Assisted in finding that by Rehj.
val wordtaglist = HashMap[String, ListBuffer[String]]()
resetLists
setupClassifier    
Source.fromURL(getClass.getResource("resources/"+testFile)).getLines.foreach{
 line =>{
   if(!line.isEmpty)
     line.split("\t") match{
       case Array(id, word, _, cpostag, _, _, head, deprel, _, _) =>{
         wordtaglist.getOrElseUpdate(word, ListBuffer[String]())+=cpostag //update tag counts
         buffer+=((id.toInt, cpostag, head.toInt, deprel))
         wordsmap+=(id.toInt -> word)
         while(buffer.nonEmpty){
           val action = {
             if(!(stack.top._1==0) && (stack.top._3 == buffer.front._1))
               "LEFTARC~"+stack.top._4
             else if(buffer.front._3 == stack.top._1)
               "RIGHTARC~"+buffer.front._4
             else if(leftDependents(buffer.front._1).nonEmpty && leftDependents(buffer.front._1)(0) < stack.top._1)
               "REDUCE"
             else if(buffer.front._3 < stack.top._1) //&& buffer.front._3 is not root or handling roots normally
               "REDUCE"
             else "SHIFT"
           }
           addInstance(action)
           applyAction(action, buffer, stack)
         }
       }
       case _ => println("line didn't match")
     }else {
       resetLists
       wordsmap.clear
     }
 }
}
resetLists
tagFrequencies++=wordtaglist.map{ case(k,v) => (k, v.groupBy(x=>x).map(x=>((x._1,  x._2.length*1.0/v.length))).toList)}
training = false
}
} 
```

# android - 应用程序的 Drop_caches 不起作用

> ID：15909530
> 
> 赞同：0
> 
> 时间：2013-04-09T18:19:40.627
> 
> 标签：android, shell, command, runtime

我已经制作了这个脚本但不起作用：

```
package com.mkyong.android;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;
import java.io.IOException;
import com.example.toast.R;

public class MainActivity extends Activity {

private Button button;

public void onCreate(Bundle savedInstanceState) {
    final Runtime runtime = Runtime.getRuntime();
    try {
        runtime.exec("su");
    }
    catch (IOException e) {
        e.printStackTrace();
    }
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab1);

    button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new OnClickListener() {
        @SuppressLint("SdCardPath")
        @Override
        public void onClick(View arg0) {
            final Runtime runtime = Runtime.getRuntime();
            try {
                runtime.exec("echo 3 > /proc/sys/vm/drop_caches");
                Toast.makeText(MainActivity.this, "Script lanciato con `successo, memoria svuotata.", Toast.LENGTH_LONG).show();`
            }
            catch (IOException e) {
                e.printStackTrace();
            }
        }
    });
}
} 
```

不释放 RAM 内存 :( 但通过终端模拟器运行..如果我尝试更改命令，例如，使用 mkdir 创建一个目录，甚至写入文件 txt.. 有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:18:29.243

您`runtime.exec("su");`刚刚启动了一个 shell 进程。而且您的下一个`"runtime.exec("echo 3 > xxx")";`不会在第一个外壳中执行。

我的建议是坚持使用 java.lang.process，启动一个执行“su”的进程并使用重定向的标准输入向它写入你的命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T13:36:40.617

你可以试试这个。

```
try {
Process proc = Runtime.getRuntime().exec(new String[] { "su", "-c", "echo 3 > /proc/sys/vm/drop_caches" });
proc.waitFor();
} catch (Exception e) {
Log.d("Exceptions", "Exception dropping caches: "+e);
} 
```

或者

```
 Process p=null;
            try {
                p = new ProcessBuilder()
                .command("PathToYourScript")
                .start();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                if(p!=null) p.destroy();
            } 
```

# php - 登录时 Drupal 数组中的未定义语言消失

> ID：15909533
> 
> 赞同：0
> 
> 时间：2013-04-09T18:19:51.303
> 
> 标签：php, arrays, drupal, undefined

我正在尝试从我网站上的节点模板访问节点数组中的数据。当我登录时，一切正常；但是，一旦我注销数组结构就会发生变化。经过一番挖掘，我发现这是因为每当我注销时都会出现“und”数组。

我尝试了很多解决方案，例如 using `[$node->language]`，尝试通过`#items`数组访问数据并且 using`field_get_items`无济于事。我可以让它在这两种情况下工作的唯一方法是检查“und”是否存在，我发现这有点笨拙，只是为了检索一个简单的布尔值或其他数据点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:51:22.223

尝试这样的事情。我不确定您要访问的确切内容，但这将根据正在呈现的节点的语言获取字段值。

获取节点的语言：

```
$node_language = field_language("node", $form["#node"], "field_YOUR_FIELD"); 
```

对于默认字段值：

```
$field_value = $form["field_YOUR_FIELD"][$node_language][0]["CHECK_ARRAY_FOR_VALUE"]["#default_value"]; 
```

对于保存的字段值：

```
$field_value = $form["#node"]->field_YOUR_FIELD[$node_language][0]["CHECK_ARRAY_FOR_VALUE"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T19:13:06.633

对我来说，当我在 page.tpl.php(!) 中出于某些测试目的使用时，节点模板中的某些字段（不是全部）会发生这种行为

`dsm($node);`

（使用模块 Devel 7.x-1.5）。如果我拿走那条线，它会再次按预期工作。

# javascript - 将一个有点复杂的 javascript 函数的值返回给 silverlight 用户控件

> ID：15909534
> 
> 赞同：1
> 
> 时间：2013-04-09T18:19:52.890
> 
> 标签：javascript, jquery, silverlight, callback, deferred

我有一个 silverlight 用户控件，其中有一个文本框和一个按钮。此 silverlight 页面中可以有多个这些用户控件。

单击按钮时，我想启动一个调用 jquery 弹出窗口的 javascript 函数，以通过 iframe 在同一应用程序中打开另一个页面。在该页面中，用户进行搜索，数据需要一直传递到 silverlight 用户控件，并且文本框需要填充。

在 silverlight 中使用 HtmlPage Invoke 方法我可以调用 javascript 函数。在这个 javascript 中，我也可以调用 jquery 移动弹出窗口。但是，我无法从该功能返回搜索词。下面的函数立即返回空字符串。我使用了 setTimeout 和 defer 方法，但仍然没有成功。在弹出窗口中，当用户完成单词搜索并关闭窗口时，该弹出函数调用名为 setSearchWord() 的父函数。此功能在此页面中，用于设置 searchWord 变量。

```
var searchWord = '';

function calljquerymobilePopUp(){
$("$popupWin").popup('open'); 
  //what should I do here such that I can make sure 'searchWord' 
  //variable is not empty and return it to silverlight user control.
   return searchWord;
}

function setSearchWord(val){
  searchWord = val;     
  // I always get this value but its always too late. 
  // In silverlight user control, I end up getting empty string
  console.log(searchWord);

  $("$popupWin").popup('close'); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:54:31.203

Bobsov，我可以为您提供一条可能的前进道路，但恐怕不会比这更好：

由于它不能直接返回值，`openPopUp`需要返回一个 Promise，它会在解析时产生所需的值。对于 javascript/jQuery，这非常简单，尽管由于您的页面/iFrame 架构，它确实涉及全局变量/函数。

代码将是这样的（在全局命名空间中）：

```
var searchDfrd;

function openPopUp() {
    $("$popupWin").popup('open');
    searchDfrd = $.Deferred().done(function(val) {
        console.log(val);
    });
    return searchDfrd.promise();
}

function setSearchWord(val) {
    searchDfrd.resolve(val);
    $("$popupWin").popup('close');
} 
```

现在问题来了……`openPopUp()`不是返回到 javascript，而是返回到 Silverlight，从那里调用`HtmlPage.Invoke`.

没有任何关于 Silverlight 的丰富知识，我很有信心说 Silverlight 不能直接处理 jQuery Promise（它不是 javascript 环境）。Promise 需要进行某种翻译。

经过一番研究，我找到了一个名为[SilverQuery](http://code.google.com/p/silverquery/)的东西，它“通过 Silverlight 运行时和 jQuery JavaScript 库的托管代码桥将 jQuery 的强大功能和表现力与 .NET 的生产力相结合。”

不幸的是，我无法继续这样做，因为我无法在这台计算机上运行测试，也找不到 Silverquery 将桥接 jQuery 的 Deferreds/Promises 的证据。这些很可能是在编写 SilverQuery 之后引入的（SilverQuery 下载日期为 2009 年 9 月，当时 jQuery 大约是 1.3 或 1.4 IIRC，还没有包含 $.Deferred API）。

也许其他人知道 SilverQuery 是否可行，或者更简单的方法是否可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:33:34.943

JS 弹出功能都是异步的。他们不会等的。真的没有办法让 JS 等待弹出窗口关闭。

现在您可以通过另一种方式获得相同的结果。我假设您想阻止线程，因为您不想让用户在父页面上做任何事情？为什么不禁用父页面上的所有内容，直到弹出窗口关闭？您可以在弹出窗口正下方的整个页面上创建一个浮动 DIV，它将拦截所有鼠标事件并且什么都不做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:18:18.553

我想给自己一个“Pat”来解决这个问题。我所做的是 - 我在上面调用了相同的过程来启动弹出框，但是当 setSearchWord 函数（在 popupbox 中调用来设置 id 的函数）时，我在 silverlight 托管代码中创建了一个方法，该方法暴露给 javascript 并在我传递的地方调用该方法变量并设置 silverlight 文本框。

希望这是有道理的。基本上，我在托管代码中创建了另一个方法，并通过用 [ScriptableMember] 装饰它来将其暴露给 javascript。这使我可以从 javascript 调用此方法。问题解决了！！

感谢 Beetroot 和 Omar 的意见和建议，这些意见和建议让我继续前进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T03:38:16.657

```
$(document).on('tap', '.btnSelectWord', function(){
        if( typeof parent.setSearchWord === 'function'){
            parent.setSearchWord(selectedPointId)
        }else if (typeof window.opener.setSearchWord == 'function'){
            window.opener.setSearchWord(selectedPointId);
        }
        else {
            console.log('No function')
            alert('No callback in parent')
        }
    }); 
```

# xcode - xcode 4.6 中的自定义框架

> ID：15909536
> 
> 赞同：0
> 
> 时间：2013-04-09T18:19:55.700
> 
> 标签：xcode, frameworks, objective-c-2.0

我想创建自己的框架来隐藏类的实现并能够重用这些类。

他们是否在 4.6 中添加了创建这些的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:19:45.077

是的，有可能。查看Apple[的框架编程指南简介](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Frameworks.html#//apple_ref/doc/uid/10000183-SW1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T11:48:12.643

这是[一个链接](http://jaym2503.blogspot.in/2012/09/how-to-create-custom-ios-framework.html)！在 xcode 4.6 中创建框架的链接。它对我来说很好用

# c++ - C++调用接口方法导致VS2012中的指针不完整

> ID：15909538
> 
> 赞同：0
> 
> 时间：2013-04-09T18:20:17.670
> 
> 标签：c++, pointers, interface, incomplete-type

我在使用接口 A 时遇到问题。

在尝试对存储在向量 aVec VisualStudio 中的任何指针调用 Initialize() 函数时，会显示“错误：未完成的类类型指针无效”。

有谁知道如何以一种允许我在基本指针上调用接口函数而不将其转换为特定实现类型的方式来实现这个接口？

错误发生在 main.cpp 中。我已将整个来源附在下面：

A.hpp：

```
 #ifndef _A_HPP_
     #define _A_HPP_
     class A {
         private:
             int number;

         public:
             A();
             virtual ~A();
             virtual bool Initialize();

             int GetNumber();
             void SetNumber(int number);
     };
     #endif /* _A_HPP_ */ 
```

A.cpp：

```
 #include "A.hpp"
     A::A() {
     }

     A::~A() {
     }

     bool A::Initialize() {
        return true;
     }

     int A::GetNumber() {
        return this->number;
     }
     void A::SetNumber(int number) {
        this->number = number;
     } 
```

B.hpp：

```
 #ifndef _B_HPP_
     #define _B_HPP_
     class B : public A{
         private:
             char* abc;

        public:
            B();
            ~B();
            bool Initialize();      
     };
     #endif /* _B_HPP_ */ 
```

B.cpp：

```
 #include "B.hpp"
     B::B(){
     }

     B::~B(){
        delete[] abc;
     }

     bool B::Initialize(){
        this->abc = new char[10];
     } 
```

工厂.hpp

```
 #ifndef _AFACTORY_HPP_
     #define _AFACTORY_HPP_
     class A;

     class AFactory {
        public:
            static A* GetInstance(int index);
     };
     #endif /* _AFACTORY_HPP_ */ 
```

工厂.cpp

```
 #include "AFactory.hpp"
     #include "A.hpp"
     #include "B.hpp"
     A* AFactory::GetInstance(int index) {
        A* a;
        if(index == 0)a = new B();
        else a = 0;
        return a;
     } 
```

主文件

```
 #include "A.hpp"
     #include "B.hpp"
     #include "AFactory.hpp"
     #include <vector>
     using namespace std;

     int main() {
        vector<A*> aVec;
        aVec.push_back(AFactory::GetInstance(0));
        aVec.push_back(AFactory::GetInstance(0));
        aVec.push_back(AFactory::GetInstance(0));

        for(int i = 0; i < 3; i++) aVec[i]->Initialize();
     } 
```

非常感谢你！异种

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:47:36.243

评论者说的是对的，但可能不是那么清楚。

在您的 AFactory.hpp 文件中，您有`class A;`. 这种声明称为“前向声明”。它指出 A 是一个类，关于这个类的详细信息将在稍后给出。在您的文件 main.cpp 中，出于这个或那个原因，很可能是由于包含防止器，您的主体`#include "A.hpp"`不包含在内。

这意味着`A`仍然没有定义。编译器只知道这`A`是一个类，没有别的。因为那个编译器无法处理`aVec[i]->Initialize();`. 错误消息是这样说的。将您的包含防止器修改为其他内容，例如`_A_FILE_HPP_`.

# ios - 使用 class_getInstanceMethod - 类层次结构中实现的方法在哪里？

> ID：15909539
> 
> 赞同：8
> 
> 时间：2013-04-09T18:20:19.520
> 
> 标签：ios, objective-c, objective-c-runtime

是否可以在类层次结构中找到所检索的方法`class_getInstanceMethod`来自何处？例如，假设 A 类实现了 myMethod。现在说我在 A1 类中对 A 类进行了子类化。如果我打电话`class_getInstanceMethod(ClassA1, myMethod)`，是否可以判断结果方法是在 ClassA1 中被覆盖还是直接来自 A1？

我想如果您可以访问 ClassA 和 ClassA1，则可以比较 IMP 的内存地址，但我无法直接访问 A。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T18:24:43.153

您始终可以访问一个类的超类，因此您可以将它传递给相同的`class_getInstanceMethod`或`class_getMethodImplementation`与相同的`SEL`并比较`IMP`地址以查看该方法是否被子类覆盖。

如果您想获得定义此方法的根类，这会有点麻烦。

无论如何，这里是：

```
static inline BOOL isInstanceMethodOverridden(Class cls, SEL selector, Class *rootImpClass) {
    IMP selfMethod = class_getMethodImplementation(cls, selector);
    BOOL overridden = NO;
    Class superclass = [cls superclass];
    while(superclass && [superclass superclass]) {
        IMP superMethod = class_getMethodImplementation(superclass, selector);
        if(superMethod && superMethod != selfMethod) {
            overridden = YES;
            if(!rootImpClass) {
                //No need to continue walking hierarchy
                break;
            }
        }

        if(!superMethod && [cls respondsToSelector:selector])) {
            //We're at the root class for this method
            if(rootImpClass) *rootImpClass = cls;
            break;
        }

        cls = superclass;
        superclass = [cls superclass];
    }

    return overridden;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-04T03:51:48.547

这是我对 Jacob 代码的修改版本。我遇到了他的问题，因为 class_getMethodImplementation 返回一个 _objc_msgForward 导致方法被视为被覆盖。我也不需要 *rootImpClass 但它很简单，可以重新添加。

```
inline BOOL isInstanceMethodOverridden(Class cls, SEL selector)
{
    IMP selfImplementation = class_getMethodImplementation(cls, selector);

    BOOL overridden = NO;
    Class superclass = cls;

    while ((superclass = [superclass superclass]))
    {
        Method superMethod = class_getInstanceMethod(superclass, selector);
        if (superMethod && method_getImplementation(superMethod) != selfImplementation)
        {
            overridden = YES;
            break;
        }
    }

    return overridden;
} 
```

# sql - 如何在 SQL Server Management Studio 2012 上运行命令

> ID：15909544
> 
> 赞同：-1
> 
> 时间：2013-04-09T18:20:33.480
> 
> 标签：sql, sql-server

有人可以帮我创建这个表作为例子吗？我正在尝试自学，但我遇到了问题，如果我能看到一个例子，这对我来说会更容易。

*服装*表存储有关库存中每种服装的信息。*Costume*
表包括*CostumeID*、*Description*、*Size*、*RentalPrice*和*CategoryID*字段。 CostumeID字段对于每个服装*都是*唯一的，并用作表的主键。*描述*字段存储服装 的名称，例如海盗或蟾蜍。*尺寸*字段表示服装 的尺寸，例如小号、中号或大号。 RentalPrice*字段*存储服装的租赁价格， 而 ***********CategoryID*字段存储类别标识号。*CategoryID*值是从存储在*Category*表中的值列表中获得的。**********

 ***Customer*表存储有关每个客户的信息。*Customer*
表包括*CustomerID*、*LastName*、*FirstName*、*StreetAddress*、*City*、*State*、*Zip*和*Phone*字段。 由于*CustomerID*字段对于每个客户都是唯一的，因此该字段用作*Customer*表的主键。

 ***我已经创建了这个：（全部按照提供的字段名称排序。）

字段名称-CostumeID、Description、Size、RentalPrice、CategoryID

数据类型 - 文本、文本、文本、金钱、文本

字段*描述*作为主键，描述服装，指示服装尺寸，存储每日租赁价格，将服装与某个类别或一组服装相关联。使用查找向导

字段大小 - 5、50、5、（无出租）、5（类别 ID）

*CostumeID*和*CategoryID*所需的注释

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:27:37.297

您需要再制作两个表，其中一个是：

客户，另一个是类别。类别 ID 将是类别的主键。客户 ID 将是客户的主键

您需要将这些键作为外键包含在您的服装表中。您的服装表的主键将是服装ID。******

# css - CSS：输入充当跨度（webkit）

> ID：15909546
> 
> 赞同：0
> 
> 时间：2013-04-09T18:20:43.890
> 
> 标签：css, input, webkit

有可能`input, select, textarea`作为`span`吗？我的想法是创建一个打印媒体 CSS，它将表单的所有输入可视化地转换为可视范围，以便能够打印它而无需使用 javascript 转换所有内容或创建要打印的特定页面。

我需要类似[**这个例子**](http://jsfiddle.net/rWySb/1/)的东西。

它只需要与 webkit/chrome 兼容，所以我可以使用`-webkit-appearence`例如。*主要问题是：只有*CSS是可能的，还是我需要使用 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:55:50.703

我认为您想要的是表单元素看起来像普通文本，至少在打印时是这样。这确实很有可能。您可以使用媒体查询将自定义样式添加到仅适用于印刷媒体的 CSS`@media print`

代码看起来像这样：

```
@media print {
     input, textarea, select {
        border: none;
        display: block;
        font-family: consolas, monotype;
        font-size: 14px;
        width: 100%;
        height: auto;
        background: transparent;
        -webkit-appearance:none;
    }
} 
```

我已将 css 添加到您的小提琴中：http: [//jsfiddle.net/rWySb/3/](http://jsfiddle.net/rWySb/3/)

请注意，不会有任何可见的更改，因为此样式仅适用于印刷媒体，而不适用于您的屏幕。使用浏览器中的打印预览查看效果。或者更简单，肯定是在开发过程中，暂时`print`将`screen`。

请注意，我还添加了我在每个项目中使用的默认打印样式，这实际上是从 HTML5 样板中“借来的”。[https://github.com/h5bp/html5-boilerplate/blob/master/css/main.css](https://github.com/h5bp/html5-boilerplate/blob/master/css/main.css)
这不是必需的，但包含一些可能对您有用的技巧和想法，因为您正在使用打印的网页 atm。 ..

# html - 将 html 转为 pdf

> ID：15909550
> 
> 赞同：-1
> 
> 时间：2013-04-09T18:21:04.803
> 
> 标签：html, ruby-on-rails, pdf

我在控制器中有以下操作

```
def save
  client = Pdfcrowd::Client.new("asdads", "asdads")

  pdf = client.convertHtml(params[:gender])

  send_data(pdf, 
            :filename => "untitled.pdf",
            :type => "application/pdf",
            :disposition => "attachment")
rescue Pdfcrowd::Error => why
  render :text => why
end 
```

我想从视图中获取 Html 代码，然后将其转换为 pdf

我正在使用 pdfcrowd gem

在我看来，我也有这一行：

```
<% params[:gender => compareGender(@task) ] %> 
```

compareGender 是一个返回 svg 代码的方法

这不起作用有人可以提出替代解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:09:00.283

你有两个选择。您可以使用 Rails 的 render_to_string 方法将渲染视图转换为字符串变量，然后您可以将其转换为 PDF，或者您可以跳过 rails 的渲染并直接使用 Erb 库将视图渲染为字符串。我认为后者可能更适合您，并且还可以保护您免受 rails 可能对 render_to_string API 所做的任何更改。

如果您的视图在 Haml 而不是 Erb 中，则只需使用 haml 来渲染它们。

# php - 允许每篇博文拥有不同的特色图片

> ID：15909551
> 
> 赞同：0
> 
> 时间：2013-04-09T18:21:06.897
> 
> 标签：php, wordpress

我正在使用`Set featured Image`WordPress 在每篇博客文章的顶部显示图像。我使用的代码很简单，但可以完成工作

```
<?php get_header(); ?>
<?php if (have_posts()): while (have_posts()) : the_post(); ?>
<div class="featured-image">
    <div class="featured-image-wrap">
                <!-- Post Thumbnail -->
            <?php if ( has_post_thumbnail()) : // Check if Thumbnail exists ?>
                <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>">
                    <?php the_post_thumbnail(); // Fullsize image for the single post ?>
                </a>
            <?php endif; ?>
            <!-- /Post Thumbnail -->
    </div>
</div>

<!-- Section -->
<section class="blog">

    <!-- Article -->
    <article class="blog-post" id="post-<?php the_ID(); ?>" <?php post_class(); ?>>

        <!-- Post Title -->
        <h1>
            <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a>
        </h1>
        <!-- /Post Title -->

        <!-- Post Details -->
        <span class="date"><h2>Written By <?php the_author(); ?> on <?php the_time('F j, Y'); ?></h2></span>
        <!-- /Post Details -->

        <?php the_content(); // Dynamic Content ?>

        <br class="clear">

        <?php the_tags( __( 'Tags: ', 'html5blank' ), ', ', '<br>'); // Separated by commas with a line break at the end ?>

        <p><?php _e( 'Categorised in: ', 'html5blank' ); the_category(', '); // Separated by commas ?></p>

        <?php edit_post_link(); // Always handy to have Edit Post Links available ?>

    </article>
    <!-- /Article -->

<?php endwhile; ?>

<?php else: ?>

    <!-- Article -->
    <article>

        <h1><?php _e( 'Sorry, nothing to display.', 'html5blank' ); ?></h1>

    </article>
    <!-- /Article -->

<?php endif; ?>

</section>
<!-- /Section -->
    <div class="finished">
        <h2>Finished! Any Questions?</h2>
        <p>If you have any questions please feel free to email me or <a href="http://twitter.com/joshua_hornby">Tweet me</a>. If you learnt anything in this lesson or found it useful please share with your friends.</p>

        <a href="https://twitter.com/share" class="twitter-share-button" data-via="joshua_hornby" data-size="large">Tweet</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

    </div>
<div class="blog-footer">
    <aside class="footer-content">
            <div class="dark-btn-footer-twitter"><a href="http://twitter.com/joshua_hornby" target="_blank">@joshua_hornby</a></div>
            <div class="dark-btn-footer-twitter bottom"><a href="http://designer-school.com">More Posts</a></div>
    </aside>
</div> 
```

虽然当我在编辑帖子时更改图像时，它会在所有帖子上更改它。有没有办法让每个帖子都有自己的特色图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:54:21.937

我想注意该`the_post_thumbnail()`函数应该在 single.php 的循环中使用：

```
if (have_posts()) :
   while (have_posts()) :
if ( has_post_thumbnail()) :  ?>
   <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>">
     <?php the_post_thumbnail(); ?>
   </a>
<?php endif; 
   endwhile;
endif; 
```

如果不是（即在 single.php 文件中某处的循环之外），请使用相同的代码，但使用函数`get_the_post_thumbnail($id, $size, $attr )`并在第一个参数中指定相关帖子的 id。其他 2 个参数是可选的

我希望它有帮助，如果没有，最好发送一个编辑，显示更多的 single.php 文件代码。

# linux - 使用 top 命令监控 Linux 服务器中的系统性能

> ID：15909555
> 
> 赞同：0
> 
> 时间：2013-04-09T18:21:29.063
> 
> 标签：linux, shell, unix, redhat

我正在尝试将系统性能信息（PID、用户、CPU、MEM 和时间）提取到 Excel 文件中。我将通过一个 shell 脚本来做这件事。我尝试了 top 命令。它具有所有信息，但也具有所有子进程信息。有没有办法将所有子进程与父进程聚合，这样我就可以查看一个进程并说它花了很长时间才能完成。另外，有没有办法用 top 命令显示和拉取 PPID 信息？如果有其他方法可以做到这一点，我也会对此持开放态度。我想将所有子进程与父进程聚合并查看不同用户的系统性能。这是我在 shell 脚本中尝试的代码。

```
top -n1 -b \
|awk '{if (($1 ~ /^[0-9]/) || ($0 ~ /PID/ )) { 
  print $1","$2","$4","$5","$6","$7","$8","$9","$10","$11","$12","$13","$14","$15; } 
 }' > file.csv 
```

我正在使用红帽Linux。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:39:05.220

您应该能够通过直接读取 /proc 来实现您的要求。这本质上就是 top、free 等获取数据的方式。
参见例如[http://www.centos.org/docs/5/html/Deployment_Guide-en-US/ch-proc.html](http://www.centos.org/docs/5/html/Deployment_Guide-en-US/ch-proc.html) 或 man proc

# xml - 如何从 Nutch 蜘蛛网页数据库中获取 XML 格式的信息

> ID：15909558
> 
> 赞同：1
> 
> 时间：2013-04-09T18:21:37.357
> 
> 标签：xml, nutch, aggregation, text-mining

我正在尝试建立书籍聚合门户。Nutch 为我提供了出色的网络爬虫，但我想要非常具体的信息，例如书名、书价、ISBN、作者等。如何从爬取的页面中提取这些信息？如果可能，我想以 XML 格式获取此信息。

除了上述之外，我想问一下这是否是正确的做法！可以用其他开源软件以更好的方式完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:11:43.490

这取决于数据的结构。

我假设您主要是在抓取 HTML 页面。

通常您可以使用[XPath](https://developer.mozilla.org/en/docs/XPath)来抓取页面的某些部分，例如“//div[@class='books']/a/text()”

如果大部分文本是非结构化的（没有可抓取的结构化 HTML 模式），那么您将不得不使用正则表达式或信息提取。

如果幸运的话，您可以使用正则表达式完成部分/大部分操作。

对于一些更复杂的结构，您需要使用信息提取/命名实体识别。

你必须训练一个 IE 工具，比如[斯坦福大学的 CoreNLP](http://nlp.stanford.edu/software/corenlp.shtml)来识别书名并在你的文档中注释它们。另请查看[BRAT 快速注释工具](http://brat.nlplab.org/index.html)。

像 Mozenda 这样的服务可以为你做爬取和 X-Path 的工作，但是我还没有看到提供 IE 服务的公司。

# .net - 计时器在几分钟后停止，这是为什么呢？

> ID：15909565
> 
> 赞同：0
> 
> 时间：2013-04-09T18:21:49.240
> 
> 标签：.net, vb.net, timer

我有一个计时器，它每 5 分钟检查一次网页是否通过 Webbrowser 元素进行更改。每当页面更改（新订单）时，我的计时器将播放一个 .wav 文件（哔声）。这似乎在最初的几分钟或有时在最初的几个小时内有效，但随后它将停止检查而不会出现警告/异常。

什么可能导致这个问题？

编辑#1

这是我正在使用的代码：

```
Private Sub Timer2_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer2.Tick
    Dim sQuelltext As String = WebBrowser1.DocumentText.ToString
    If Not String.IsNullOrEmpty(sQuelltext) And sQuelltext.Contains("pending") Then
        My.Computer.Audio.Play(soundFile, AudioPlayMode.Background)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:35:05.763

通常计时器不会无故停止。

典型的问题可能是：为了避免在最后一次调用仍未完成时运行计时器（避免意外的竞速问题），在 timer_tick 的第一行禁用计时器，并在最后再次启用计时器。

现在忘记了在某些位置使用了 return 语句，或者某些代码行可能会触发异常。在那种情况下，重新启用计时器将不会被执行，并且它似乎停止了

**更新** 如果 WebBrowser1 是 Nothing/Disposed，那么访问它可能会导致异常。如果发生这种情况，那么您可以将“无音频”解释为计时器已停止的反馈，虽然它实际上会触发，但仅执行代码行，不会产生异常（然后该方法将被保留）。很少发生，是奇怪的行为，但这可能是一种情况。

因此，您可以在计时器的第一行添加一些东西来切换对象的状态，并在它的底部添加第二个对象的另一个切换。

如果没有任何变化，则说明有问题，如果仅发生第一次切换，则在此处设置断点并按照下一行进行。如果逐步调试似乎从某一特定行跳出来，那就有问题了。您可以使用即时窗口来检查下一行的部分内容。通常很容易修复，只要您找到错误的原因

# java - 读取数组的值 - JAVA/Android

> ID：15909567
> 
> 赞同：0
> 
> 时间：2013-04-09T18:21:57.290
> 
> 标签：java, android

这似乎很简单和基本，但我对 Java/Android 的了解不够，也不知道如何从数组中获取特定值。您是否必须对其进行迭代，或者您可以只调用键/值对或smth吗？任何例子将不胜感激。

谢谢，例如

```
String[] x = Pattern.compile(";").split(CookieManager.getInstance().getCookie(URL)); 
```

现在，如果有一个 ID 键，我如何获得应该是第二个键的值？X[1]？就是行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:28:52.210

```
String a = x[0];
String b = x[1]; 
```

或者

```
for (String z : x)
{
   String valor = z;
} 
```

我等着帮你！

# java - ArrayList 对象排序混乱

> ID：15909573
> 
> 赞同：-2
> 
> 时间：2013-04-09T18:22:07.473
> 
> 标签：java, arrays, arraylist

我知道这是一种重复的问题。

但是，我坚持这一点。

```
public class Ooops<P, O> 
{
   private P po;
   private O pa;
   private int val;
   public Preference(P p, O o, int v) 
   {
        setPo(p);
        setPa(o);
        setValue(v);
   }
   //Getter and setter for Pa,Pa and val
} 
```

我创建了这个类的一个对象

```
 List<Ooops<String, String>> abc = new ArrayList<Oops<String, String>>(); 
```

就像是 ，

```
 Acf,PQR,8
 ABC,Pas,6
 AdC,PhR,3 
```

变成

```
 AdC,PhR,3
 ABC,Pas,6
 Acf,PQR,8 
```

我很困惑，如何根据对象中 val 的值对对象进行排序。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:23:21.030

您的 Ooops 类需要实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)。或者，您需要将自定义[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)传递给 sort 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:27:08.717

```
public class Ooops<P, O> implements Comparable<Ooops<P, O>> {

    // your code

    @Override
    public int compareTo(Ooops<P, O> other) {
       return other.val - this.val;
    }

} 
```

* * *

稍后您可以简单地调用

```
Collections.sort(yourList); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:07:46.840

您可以`Comparable`从您的 Ooops 实现并覆盖 compareTo() 。在其中`compareTo()`您可以有自己的逻辑来定义排序顺序。作为示例

```
 @Override
    public int compareTo(Ooops<P, O> other) {
       return (this.po.getPoCount()+this.pa.getPaCount()) - (other.po.getPoCount()+other.pa.getPaCount());
    } 
```

请注意，这`getPoCount()`只是`getPaCount()`一些虚拟方法。

你可以`descending order`通过`multiplying`上面的返回值来得到`-1`。

**使用 Comparator 还会为您排序列表**

# jquery - 将多个 jQuery 事件合二为一

> ID：15909576
> 
> 赞同：0
> 
> 时间：2013-04-09T18:22:17.533
> 
> 标签：jquery

我有以下 jQuery ...

```
$('.class1').mouseenter(function() {
    $('#div1').css('display', 'none');
    $('#div2').css('display', 'none');
    $('#div3').css('display', 'none');
});

$('.class2').mouseenter(function() {
    $('#div1').css('display', 'none');
    $('#div2').css('display', 'none');
    $('#div3').css('display', 'none');
});

$('.class3').mouseenter(function() {
    $('#div1').css('display', 'none');
    $('#div2').css('display', 'none');
    $('#div3').css('display', 'none');
}); 
```

每个事件都做同样的事情（它们都隐藏了 div1、div2 和 div3），但是有一个不同的类触发它，我想知道是否有一种方法可以将它们组合成一个。这样当用鼠标输入 class1、class2 或 class3 时，div 1、2 和 3 被设置为 display:none;。像...

```
$('.class1' OR '.class2' OR '.class3).mouseenter(function() {
    $('#div1').css('display', 'none');
    $('#div2').css('display', 'none');
    $('#div3').css('display', 'none');
}); 
```

我知道我可以做到这一点...

```
$('.class1').addClass("class4");
$('.class2').addClass("class4");
$('.class3').addClass("class4");
$('.class4').mouseenter(function() {
    $('#div1').css('display', 'none');
    $('#div2').css('display', 'none');
    $('#div3').css('display', 'none');
}); 
```

但是我想知道我上面提到的方式是否可行，如果可以，该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:23:59.027

```
$('.class1, .class2, .class3').on('mouseenter', function() {
    $('#div1, #div2, #div3').hide();
}); 
```

或仅隐藏与选择器中的数字不匹配的那些：

```
$('.class1, .class2, .class3').on('mouseenter', function() {
    var this_class = this.className.replace('class',''); // works for one class only

    $('#div1, #div2, #div3').filter(function() {
        return this.id.indexOf(this_class) == -1;
    }).hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:27:28.987

您可以在 jquery 中处理多个元素，方法是让多个元素的类或 id 用逗号 (",") 分隔

```
$('.class1').mouseenter(function() {
    $('#div1, #div2, #div3').css('display', 'none');
});

$('.class2').mouseenter(function() {
    $('#div1, #div2, #div3').css('display', 'none');
});

$('.class3').mouseenter(function() {
   $('#div1, #div2, #div3').css('display', 'none');
}); 
```

或者更多更好的方法..

```
$('.class1, .class2, .class3').mouseenter(function() {
     $('#div1, #div2, #div3').css('display', 'none');
}); 
```

# c# - 在不更改类的情况下更改一种方法的行为的最简单方法是什么？

> ID：15909578
> 
> 赞同：0
> 
> 时间：2013-04-09T18:22:18.743
> 
> 标签：c#, .net, oop

一点背景知识：我正在使用[IQToolkit](http://iqtoolkit.codeplex.com/)编写一个自定义数据提供程序，它使用`System.Data.Odbc`而不是`System.Data.SqlClient`.

我在[此处](http://iqtoolkit.codeplex.com/SourceControl/changeset/view/94877#2219362)找到的默认 Parameterizer 类遇到了问题。下面的代码片段是我需要更改的，仅相当于一种方法。

```
 int iParam = 0;
    protected override Expression VisitConstant(ConstantExpression c)
    {
        if (c.Value != null && !IsNumeric(c.Value.GetType())) {
            NamedValueExpression nv;
            TypeAndValue tv = new TypeAndValue(c.Type, c.Value);
            if (!this.map.TryGetValue(tv, out nv)) { // re-use same name-value if same type & value
                string name = "p" + (iParam++);
                nv = new NamedValueExpression(name, this.language.TypeSystem.GetColumnType(c.Type), c);
                this.map.Add(tv, nv);
            }
            return nv;
        }
        return c;
    } 
```

我已经想到了几种方法可以做到这一点，但我真的不喜欢其中任何一种。

1.  我有源代码，所以我可以更改源代码本身并重新编译它。但是，这会为其他 SQL 方言删除一些有用的代码，我不想仅仅为了 ODBC 而破坏这一切。

2.  我可以编写自己的`Parameterizer`类并使用它而不是默认值。如果我这样做，我将复制 250 行代码以更改三四行。

3.  我可以尝试重写该类，只更改我需要的方法。我试过这个，但我在课堂上的保护级别遇到了一些问题`Parameterizer`。我最喜欢这个，但我不确定我做得是否正确，或者如果我什至可以使用给定的类设计。

如果问题看起来含糊不清，请道歉，但是有什么简单的方法可以让我改变该方法的行为，而无需更改基类或复制其所有代码？

**编辑**：#3 的问题：不能访问`IsNumeric`（私有`Parameterizer`），不能访问`Parameterizer.map`，不能访问 struct `TypeAndValue`，不能访问`Parameterizer.language`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:38:06.097

例如，我的想法是这样的（基于我们的评论）。

```
public class MyVisitor : DbExpressionVisitor
{
    // cast it to the visitor interface/base - that way you'd have access to all methods,
    // as Parameterizer has to have them publically exposed anyway, for this to work
    readonly DbExpressionVisitor _defaultVisitor;
    public MyVisitor()
    {
        _defaultVisitor = new Parameterizer();
    }
    public Expression VisitProjection(ProjectionExpression proj)
    {
        return _defaultVisitor.Visit(proj);
    }
    // ...same for all others, just...
    // ... 

    // implement your own for one 'route'
    protected Expression VisitConstant(ConstantExpression c)
    {
        if (c.Value != null && !IsNumeric(c.Value.GetType())) {
            NamedValueExpression nv;
            TypeAndValue tv = new TypeAndValue(c.Type, c.Value);
            if (!this.map.TryGetValue(tv, out nv)) { // re-use same name-value if same type & value
                string name = "p" + (iParam++);
                nv = new NamedValueExpression(name, this.language.TypeSystem.GetColumnType(c.Type), c);
                this.map.Add(tv, nv);
            }
            return nv;
        }
        return c;
    }
} 
```

**访客，访客模式**...

> “本质上，访问者允许在不修改类本身的情况下将新的虚函数添加到类族中”

即，这意味着在大多数情况下，这本身就足够了，无需求助于继承、覆盖（这有点多余，有点简化）。您可以使用该事实来覆盖原始访问者的某些行为（因为您已经有一个机制） - 并避免继承和您可能遇到的问题。

> 唯一可能的问题可能是 -`Parameterizer` 没有默认的ctor - 我认为这不太可能，因为你可能需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:23:36.723

它最终只是更容易重写参数化程序。不确定这是否具有广泛的相关性，但我必须更改代码，以防有人感兴趣：

此方法的问题在于它试图重用具有重复类型和值的参数。但是，由于我使用的是未命名的 ODBC 样式参数，因此查询必须具有与查询指定的参数数量相同的参数，即使它们完全相同。

```
protected override Expression VisitConstant(ConstantExpression c)
{
    if (c.Value != null && !IsNumeric(c.Value.GetType())) {
        NamedValueExpression nv;
        TypeAndValue tv = new TypeAndValue(c.Type, c.Value, iParam);

        string name = "p" + (iParam++);
        nv = new NamedValueExpression(name, this.language.TypeSystem.GetColumnType(c.Type), c);
        this.map.Add(tv, nv);

        return nv;
    }
    return c;
} 
```

我还必须修改`TypeAndValue`构造函数以使参数的哈希值唯一，即使它们的类型和值相同。我通过添加参数号来做到这一点。

```
public TypeAndValue(Type type, object value, int pCount)
{
    this.type = type;
    this.value = value;
    this.hash = type.GetHashCode() + (value != null ? value.GetHashCode() : 0) + pCount;
} 
```

# jquery - 在 JQuery 中出现淡入问题。有任何想法吗？

> ID：15909580
> 
> 赞同：0
> 
> 时间：2013-04-09T18:22:19.697
> 
> 标签：jquery, fadein, fade, fadeout

所以，我需要做的是在页面上反复淡入淡出，直到按下“重置”按钮（不需要更多信息）。

所以，我在一个完全不透明的页面上有一个段落元素，id 为“失败”。触发某个事件后，该元素需要反复淡入和淡出。

所以，我这样做：

```
 $("#fail").show(3000, blink); 
```

闪烁功能如下所示：

```
function blink() {
    var id;
    if(divID == "lost"){
     id = "#fail"
    }else if(divID = "won"){
     id = "#win";
    }

 $(id).fadeOut().fadeIn(blink);
} 
```

中的 if 语句确定要闪烁的段落元素。但是，当我点击上面的第一行代码时，什么也没有发生。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:27:52.863

看起来您忘记了`=`第二次比较。该语句分配`divID`给`"won"`，然后将其评估为布尔值（它不是 false、NULL 等，因此它始终为 true 并且`id`将始终为`"#win"`）。我在下面为你修复了它：

```
function blink() {
    var id;
    if(divID == "lost"){
        id = "#fail"
    } else if (divID == "won") {
        id = "#win";
    }

    $(id).fadeOut().fadeIn(blink);
} 
```

现在这可能只是一个错字，如果是，那么我需要知道`divID`变量是什么，以及它设置在哪里来帮助你。

## 可能的解决方案：

我不确定您的应用程序中发生了什么，所以这可能是离谱的。话虽如此，为什么不制作两个闪烁功能，一个 for`#win`和一个 for `#fail`？那么你就不需要`if`闪烁函数中的语句，这似乎是你问题的根源。

或者，您可能想尝试使用 CSS: `text-decoration: blink;`。不过，我不确定它是否适合你。您可以向我们提供的有关您的申请的信息越多，我们就能越好地回答；)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:32:10.690

稍微缩短了你的逻辑......假设 divID 设置正确，这有效：

```
$("#fail").show(3000, blink);

function blink() {
    var id;

    (divID == "lost") ? id="#fail" : id="#win";
    $(id).fadeOut().fadeIn(blink);
} 
```

小提琴：http: [//jsfiddle.net/uYHG5/](http://jsfiddle.net/uYHG5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:34:18.170

段落元素无法显示，因为在加载窗口时，我将它们设置为完全不透明。我认为既然（这可能是错误的）fadeIn 和 Out 切换了不透明度，所以这不会是一个问题。

无论如何，我最初并没有将它们设置为不透明，而是打电话给

```
$("p").hide(); 
```

因此，当我调用 show 时，它会显示出来并开始打开和关闭，直到游戏重置。感谢大家的所有提示。

# python-3.x - 如何在 Python3 urllib.request.urlopen() 中使用 TOR？

> ID：15909582
> 
> 赞同：2
> 
> 时间：2013-04-09T18:22:26.990
> 
> 标签：python-3.x, tor

我想将 TOR 与 Python3 urllib.request.urlopen() 一起使用，但我发现的所有示例都使用 Python2。

[https://code.google.com/p/socksipy-branch/](https://code.google.com/p/socksipy-branch/)

我遇到了 socksipy，但即使它声明分支兼容，我也无法让它与 Python3 一起使用。

我认为 TOR 是一个袜子代理，但 Python3 似乎不包含任何像 Python2 这样的袜子库？

有没有人有工作的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:28:07.270

我建议使用`httplib2`并`socks`打包通过 socks 代理进行 HTTP 请求。

我用 urllib 做了很多尝试，但使用 httplib2 更容易。

```
import socks
import httplib2

proxy = httplib2.ProxyInfo(proxy_type=socks.PROXY_TYPE_SOCKS5,
                           proxy_host='127.0.0.1',
                           proxy_port=9666)
http = httplib2.Http(proxy_info=proxy, timeout=10)
# do requests
headers, message = http.request(url, "GET", body=body, headers=headers) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-18T17:20:24.090

您必须通过套接字执行 DNS 解析

```
def getaddrinfo(*args):
  return [(socket.AF_INET, socket.SOCK_STREAM, 6, '', (args[0], args[1]))]
socket.getaddrinfo = getaddrinfo 
```

来源：[GitHub](https://github.com/PSNAppz/TorBoT/blob/master/Resources%20And%20Samples/torConnectionExample.py)

# salesforce - 获取对象的值

> ID：15909584
> 
> 赞同：0
> 
> 时间：2013-04-09T18:22:33.927
> 
> 标签：salesforce, visualforce, writeablebitmapex

首先，我只是一个初学者，现在写一个视觉力页面和顶点

基本上，我有对象A和B，A是master，B是detail，每次创建BI都会将默认余额值设置为与A相同，我的代码如下：

```
 //visual force page:
 <apex:inputField value="{!acc.A__c}"/>

 //apex code:
 public void upgrade(){
        A__c bc;
        bc.Id  = acc.A__c;
        Decimal str = bc.Balance__c;
        acc.Balance__c = str;
        insert acc;
} 
```

由于某些原因它不起作用，那么有什么方法可以获取主 A_c 的值*并将其复制到同一个字段*B_c 中？

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:30:16.207

您不需要 Visualforce 来实现这一点，[工作流规则](https://help.salesforce.com/HTViewHelpDoc?id=creating_workflow_rules.htm)或[表单预填充技巧](http://raydehler.com/cloud/clod/salesforce-url-hacking-to-prepopulate-fields-on-a-standard-page-layout.html)就足够了。

使用“每次创建记录”的条件对详细信息对象制定新规则，操作将是设置详细信息`Balance`字段的字段更新。它应该设置的公式是简单`Master__r.Balance__c`的，`A__r.Balance__c`或者你已经命名了主从字段。

如果您坚持使用visualforce - 您的代码完全混乱（从正常情况下您从不为`Id`字段分配任何内容的事实开始）。

如果您的想法是您的用户将填写从 B 到 A（该`A__c`字段）的查找，那么：

```
B__c b = new B__c();
// Some time later user fills in the lookup
// b.A__c = 'some id here';
// and hits save button.

public void save(){
    if(b.A__c != null){
        A__c selectedA = [SELECT Id, Name, Balance__c FROM A__c WHERE Id = :b.A__c];
        b.Balance__c = selectedA.Balance__c;
    }
    insert b;
} 
```

# git - 如果我将代码存储在一个分支并更改到另一个分支会发生什么？

> ID：15909585
> 
> 赞同：2
> 
> 时间：2013-04-09T18:22:37.253
> 
> 标签：git, version-control, git-branch

我有一些代码要提交到另一个分支，但是我在创建分支之前进行了更改，所以现在我在 master 中，我想存储代码，创建一个本地分支，签出它，然后存储将代码放入该新分支，以便我可以在其中提交。

这行得通吗？

```
$>git stash
$>git checkout -b newversion
$>git stash pop
$>git commit -m 'new version' 
```

你应该想'嘿，伙计，做它并检查是否有效'，嗯，有很多文件，所以我不想把它搞砸，任何帮助都会很有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:23:40.727

是的，当然可以。这正是适合的事情`git stash`。您实际上甚至没有更改工作目录，您只是为当前签出的提交分配了一个附加名称（“newversion”）。从字面上看，这不可能失败或导致冲突。

此外，你真的*应该*“做它并检查是否有效”。不管有多少文件，一旦你把它们藏起来，你就拥有了它们。如果事情出了差错，你可以重新开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:30:22.113

在这里您可以直观地查看它：http: [//ndpsoftware.com/git-cheatsheet.html#loc=stash](http://ndpsoftware.com/git-cheatsheet.html#loc=stash)；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T18:36:55.280

您的解决方案将按预期工作，但您可以在不使用`git stash`. 如果您只是做了一些必须在新分支上提交的修改，那么只运行 4 个命令中的 2 个就足够了：

```
git checkout -b newversion
git commit -a -m "new version" 
```

# lua - 如何在 Mac OS X 上安装 LuaSocket

> ID：15909586
> 
> 赞同：4
> 
> 时间：2013-04-09T18:22:38.477
> 
> 标签：lua, luasocket

如何在 Mac OS X 上正确安装 luasocket？我在 Mac 上的 /usr/bin 中安装了 lua 5.1.4 作为二进制文件。我需要指导来配置和安装 luasocket。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:31:38.847

如果你想要最新版本的 LuaSocket：

```
git clone -b unstable git://github.com/diegonehab/luasocket.git
cd luasocket
make macosx
sudo make install 
```

# android - 更改一个片段的 ImageView 会对另一个片段的布局造成不必要的更改

> ID：15909588
> 
> 赞同：0
> 
> 时间：2013-04-09T18:22:45.480
> 
> 标签：android, layout, imageview, fragment

我有一个扩展 SherlockActivity 的活动，它扩展了一个包含 3 个不同片段的视图。

片段1：

```
<TextView
    android:id="@+id/tvTodayCal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_margin="5dp"
    android:text="@string/tod_cal"
    android:textAppearance="@style/TitleBlackFont" />

<TextView
    android:id="@+id/tvTotalCalorNumb"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/tvRespBudget"
    android:layout_marginRight="5dp"
    android:layout_toLeftOf="@+id/tvRespBudget"
    android:text="@string/summ_3"
    android:textAppearance="@style/NumberGreenFont" />

<TextView
    android:id="@+id/tvRespBudget"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/btAddExer"
    android:layout_alignLeft="@+id/btAddExer"
    android:layout_marginBottom="15dp"
    android:text="@string/un_bud"
    android:textAppearance="@style/RedLittleFont" />

<Button
    android:id="@+id/btAddExer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="2dp"
    android:layout_marginRight="5dp"
    android:layout_toLeftOf="@+id/ivGlass01"
    android:text="@string/bt_add_exer" />

<Button
    android:id="@+id/btAddFood"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/btAddExer"
    android:layout_marginLeft="5dp"
    android:layout_toLeftOf="@+id/btAddExer"
    android:text="@string/bt_add_food" />

<ImageView
    android:id="@+id/ivGlass08"
    android:layout_width="wrap_content"
    android:layout_height="35dp"
    android:layout_above="@+id/ivGlass07"
    android:layout_alignParentRight="true"
    android:layout_margin="5dp"
    android:src="@drawable/vaso_vacio" />

<ImageView
    android:id="@+id/ivGlass07"
    android:layout_width="wrap_content"
    android:layout_height="35dp"
    android:layout_above="@+id/ivGlass06"
    android:layout_alignParentRight="true"
    android:layout_margin="5dp"
    android:src="@drawable/vaso_vacio" />

<ImageView
    android:id="@+id/ivGlass06"
    android:layout_width="wrap_content"
    android:layout_height="35dp"
    android:layout_above="@+id/ivGlass05"
    android:layout_alignParentRight="true"
    android:layout_margin="5dp"
    android:src="@drawable/vaso_vacio" />

<ImageView
    android:id="@+id/ivGlass05"
    android:layout_width="wrap_content"
    android:layout_height="35dp"
    android:layout_above="@+id/ivGlass04"
    android:layout_alignParentRight="true"
    android:layout_margin="5dp"
    android:src="@drawable/vaso_vacio" />

<ImageView
    android:id="@+id/ivGlass04"
    android:layout_width="wrap_content"
    android:layout_height="35dp"
    android:layout_above="@+id/ivGlass03"
    android:layout_alignParentRight="true"
    android:layout_margin="5dp"
    android:src="@drawable/vaso_vacio" />

<ImageView
    android:id="@+id/ivGlass03"
    android:layout_width="wrap_content"
    android:layout_height="35dp"
    android:layout_above="@+id/ivGlass02"
    android:layout_alignParentRight="true"
    android:layout_margin="5dp"
    android:src="@drawable/vaso_vacio" />

<ImageView
    android:id="@+id/ivGlass02"
    android:layout_width="wrap_content"
    android:layout_height="35dp"
    android:layout_above="@+id/ivGlass01"
    android:layout_alignParentRight="true"
    android:layout_margin="5dp"
    android:src="@drawable/vaso_vacio" />

<ImageView
    android:id="@+id/ivGlass01"
    android:layout_width="wrap_content"
    android:layout_height="35dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="10dp"
    android:layout_marginRight="5dp"
    android:clickable="true"
    android:src="@drawable/vaso_vacio" />

</RelativeLayout> 
```

片段2：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Esto es health... "
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

和片段3：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/llTable"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_weight="0"
android:background="#66D1FABE"
android:padding="5dp" >

<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="#aaa" />

<TableRow
    android:id="@+id/tableRow1"
    android:layout_height="wrap_content"
    android:background="#000000"
    android:weightSum="4" >

    <View
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />

    <TextView
        android:id="@+id/tvBudgetTitle"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:text="@string/budg_tit" />

    <View
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />

    <TextView
        android:id="@+id/tvFoodTitle"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:text="@string/food_tit" />

    <View
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />

    <TextView
        android:id="@+id/tvExerciseTitle"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:text="@string/exce_tit" />

    <View
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />

    <TextView
        android:id="@+id/tvTotalTitle"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:text="@string/total_tit" />

    <View
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />
</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_height="wrap_content"
    android:background="#000000"
    android:weightSum="4" >

    <View
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />

    <TextView
        android:id="@+id/tvBudgetQty"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:text="1178" />

    <View
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />

    <TextView
        android:id="@+id/tvFoodQty"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:text="620" />

    <View
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />

    <TextView
        android:id="@+id/tvExerciseQty"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:text="120" />

    <View
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />

    <TextView
        android:id="@+id/tvTotalQty"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:text="1980" />

    <View
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />
</TableRow>

<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="#aaa" />

</TableLayout> 
```

当用户选择它时，我需要动态切换 ImageView，所以在我的主要活动中，我使用：

```
iGlass2 = (ImageView) findViewById(R.id.ivGlass02);
iGlass2.setOnClickListener(this);
iGlass2.setImageResource(R.drawable.vaso_lleno); 
```

一切正常（我在布局上获得了新图像），但我丢失了片段 3 的格式（顺便说一下，它是一个具有 2 行和 4 列的 TableLayout）。

我已尽一切努力尝试修复它，但对我来说是不可能的......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:45:27.170

我只是通过将 fragment3 从 TableLayout 更改为 LinearLayouts 的组合来执行相同的表来解决它。

现在我的 fragment3 看起来：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/llTable"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#66D1FABE"
android:orientation="vertical"
android:padding="5dp" >

<View
    android:id="@+id/upperBar1"
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="#aaa" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:weightSum="4" >

    <View
        android:id="@+id/verticalUpBar1"
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#000000"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tvBudgetTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="@string/budg_tit" />

        <TextView
            android:id="@+id/tvBudgetQty"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="1178" />
    </LinearLayout>

    <View
        android:id="@+id/verticalUpBar2"
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#000000"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tvFoodTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="@string/food_tit" />

        <TextView
            android:id="@+id/tvFoodQty"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="620" />
    </LinearLayout>

    <View
        android:id="@+id/verticalUpBar3"
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#000000"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tvExerciseTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="@string/exce_tit" />

        <TextView
            android:id="@+id/tvExerciseQty"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="120" />
    </LinearLayout>

    <View
        android:id="@+id/verticalUpBar4"
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#000000"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tvTotalTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="@string/total_tit" />

        <TextView
            android:id="@+id/tvTotalQty"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="1980" />
    </LinearLayout>

    <View
        android:id="@+id/verticalUpBar5"
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="#aaa" />
</LinearLayout>

<View
    android:id="@+id/lowerBar"
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="#aaa" />

</LinearLayout> 
```

# breeze - Breeze.js：在没有反向 rel 的情况下将元素添加到导航属性集合会引发异常 [无法获取属性“名称”的值]

> ID：15909589
> 
> 赞同：3
> 
> 时间：2013-04-09T18:22:48.977
> 
> 标签：breeze

我的 EDM 中有两个实体，`Application`非常`Address`类似于以下内容：

```
class Application
{
    ICollection<Address> Addresses { get; set; }
}

class Address { } 
```

在客户端上，我创建了每个实例并尝试将`address`实例添加到`Application.addresses`集合中：

```
var address = addressType.createEntity(...);
var application = applicationType.createEntity(...);

application.addresses.push(address); 
```

不幸的是，我得到一个运行时异常说：“ `Unable to get value of the property 'name': object is null or undefined`”。

我将异常跟踪回（v1.2.8）中的`checkForDups`函数：`breeze.debug.js@9393-9404`

```
function checkForDups(relationArray, adds) {
    // don't allow dups in this array. - also prevents recursion 
    var inverseProp = relationArray.navigationProperty.inverse;
    var goodAdds = adds.filter(function(a) {
        if (relationArray._addsInProcess.indexOf(a) >= 0) {
            return false;
        }
        var inverseValue = a.getProperty(inverseProp.name);
        return inverseValue != relationArray.parentEntity;
    });
    return goodAdds;
} 
```

碰巧的是，我的实体处于一对多的单向关系（没有反向导航属性）；结果在运行时`relationArray.navigationProperty.inverse`是`undefined`这样，因此在尝试访问该`name`属性时出现错误。

添加一个简单的检查可以解决问题，并允许添加到集合中：

```
if (!inverseProp) {
    return true;
} 
```

因此，在这一切之后，问题是：这是一个错误还是仅仅是 Breeze 不支持一对多单向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:12:59.283

**从 v Breeze 1.3.5 开始编辑**，现在可用（2013 年 6 月 4 日），此问题已得到修复。

* * *

**编辑：**好的，这是一个错误，但我无法修复当前版本。我将尝试在以下版本中获得它。

您建议的修复是一个好主意，实际上只是隐藏了问题。

真正的问题是，对于我们在 1->n 方向（即不在 n->1 方向）进行单向导航的情况，微风没有足够的元数据。正因为如此，导航集合中的重复实体检查将不起作用，并且孩子与父母的自动连接也将丢失。

在我们得到修复之前，最简单的解决方法是简单地使其成为双向导航。请注意，另一个方向的单向导航效果很好。

* * *

这可能是一个错误

在我们的 DocCode 示例项目中，我们确实有一个在 OrderDetails 和 Products 之间进行单向导航的示例。但在这种情况下，我们允许从 OrderDetail -> Product (1-1) 导航，但不允许从 Product -> OrderDetails (1-n) 导航。

您的情况似乎相反，即允许 1-n 但不允许相应的 1-1。我将创建一些测试，如果我可以重现它，它将在下一个版本中修复。

发生这种情况时，我会在这里发帖。（感谢您找到它：）

# iphone - 在 Facebook 帖子中发布超过 1 张图片

> ID：15909596
> 
> 赞同：1
> 
> 时间：2013-04-09T18:23:09.320
> 
> 标签：iphone, ios, facebook, sdk

这是我的代码。它工作正常，但我只能为每张图片发布一次：

```
[params setObject:_selectedPhoto forKey:@"source"];          
FBRequestConnection *connect = [[FBRequestConnection alloc] initWithTimeout:30];

// Creo al richiesta di upload foto 
FBRequest *request = [FBRequest requestWithGraphPath: [NSString stringWithFormat:@"%@/photos",nomeAlbum] parameters:params HTTPMethod:@"POST"]; 
```

我可以为每个连接放置更多图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:40:05.390

我没有在 iOS 中实现多张照片的共享。但我读了一些关于它的东西。是的，您可以使用批量 POST 请求在 Facebook 上发送多张图片，请参阅[FQL](https://developers.facebook.com/docs/reference/api/batch/)文档

也读[这个](https://developers.facebook.com/docs/reference/rest/photos.upload/)。

您的 POST 消息的格式是，

```
curl 
     -F 'access_token=…' \
     -F 'batch=[{"method":"POST","relative_url":"me/photos","body":"message=My cat photo","attached_files":"file1"},{"method":"POST","relative_url":"me/photos","body":"message=My dog photo","attached_files":"file2"},]' \
     -F 'file1=@cat.gif' \
     -F 'file2=@dog.jpg' \
    https://graph.facebook.com 
```

阅读点从给定链接**上传二进制数据。**

批次也有一些限制，

> 我们目前将一个批次中的请求数量限制为 50 个，但出于计算 API 调用限制和资源限制的目的，批次中的每个调用都是单独计算的。例如，一批 10 次 API 调用将计为 10 次调用，并且批处理中的每个调用都会以相同的方式影响 CPU 资源限制。

# python - 如何删除 Squish 事件处理程序？

> ID：15909598
> 
> 赞同：1
> 
> 时间：2013-04-09T18:23:11.870
> 
> 标签：python, qt, automated-tests, squish

我们使用[Squish](http://www.froglogic.com/squish/gui-testing/)进行自动化 GUI 测试。这很酷——直接连接到 Qt 对象，可以在 Python 中编写脚本[等。](http://www.froglogic.com/squish/gui-testing/features.php) 我已经使用[他们的 API](http://doc.froglogic.com/squish/4.2/ugs-eventhandlers.html)为错误对话框安装了一个事件处理程序。以后如何删除事件处理程序？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T04:35:55.513

没有用于删除事件处理程序的 API。现在，它们会在应用程序终止时被删除。为此，在 froglogic 的任务跟踪器中打开了一个功能请求（SQUISH-2663），您可以在发送至 squish@froglogic.com 的功能请求中提及该票证 ID，以提高该功能的优先级。

# ruby - has_many 或 HABTM

> ID：15909599
> 
> 赞同：1
> 
> 时间：2013-04-09T18:23:20.903
> 
> 标签：ruby, ruby-on-rails-3

这个问题已经被问过很多次了，但我无法针对我的具体情况给出任何答案，所以就这样吧。

我有一个`events`,`options`和一张`templates`桌子。还有一个`events_templates`用字段调用的连接表：

*   option_id
*   模板编号
*   event_id

一个事件的每个选项都有**一个**模板。但显然可以有很多模板，因为有多个选项。

目前我的`event`模型有方法

`has_many :templates, class_name: "EventsTemplate"`

问题是，这是正确的设置还是我应该使用 HABTM？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:39:05.117

我认为您应该根据您指定的要求进行一些不同的设置。

```
has_many :templates, class_name: "EventsTemplate" 
```

这不会按您希望的方式工作。它将为事件提供关联模板，但调用该关联将返回 EventTemplates。

您可能希望使用`through`关联进行设置。

```
class EventTemplate < ActiveRecord::Base
  belongs_to :option
  belongs_to :template
  belongs_to :event
end

class Event
  has_many :event_templates
  has_many :templates, through: :event_templates
end 
```

# php - PHP增加数据包大小

> ID：15909601
> 
> 赞同：1
> 
> 时间：2013-04-09T18:23:25.433
> 
> 标签：php, networking, packet

我可以从 php.ini 文件中增加 php 中的数据包大小吗？

我需要发送更大的数据包。

PHP阻止我并给出错误：

> 警告：socket_write() [function.socket-write]：无法写入套接字 [0]：在数据报套接字上发送的消息大于内部消息缓冲区或其他网络限制，或用于接收数据报的缓冲区into 小于数据报本身。

有什么建议么？

代码是：

$con=file_get_contents("图片地址");

$binary_data=base64_encode($con);

```
 $host = "123.456.78.9";
            $port = 1060;
            $message = $binary_data;
            // No Timeout 
            set_time_limit(0);

            $socket = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP) or die("Could not create socket\n");

            socket_connect($socket, $host, $port) or die("Could not connect to server\n");

            socket_write($socket, $message, strlen($message)) or die("Could not send data to server\n"); 
```

# java - 处理 jaxb 中的频繁模式更改

> ID：15909602
> 
> 赞同：1
> 
> 时间：2013-04-09T18:23:26.027
> 
> 标签：java, xml, xsd, jaxb, moxy

在我的应用程序中，我们使用 JAXB 来解组传入的 xml 响应。JAXB pojo 被进一步映射到 DAO 以进行 DB 操作。

我的问题是我们的服务提供商将经常更新他们的架构（xsd）（插入、删除元素和属性），我不想继续为同一架构的不同版本生成 POJO 并更新我的其他代码。

请提出一个解决方案来处理这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:35:17.803

您可能想了解 MOXy 的 Dynamic JAXB 功能。它允许您直接从模式引导 JAXBContext，并以动态的、以模式为中心的方式与模型对象交互。使用这种方法，您的应用程序代码将需要更新以使用任何新的模式元素，但您的 JAXB 绑定代码将保持不变。

请参阅： http: [//www.eclipse.org/eclipselink/documentation/2.4/moxy/dynamic_jaxb.htm#sthref191](http://www.eclipse.org/eclipselink/documentation/2.4/moxy/dynamic_jaxb.htm#sthref191)

希望这可以帮助，

瑞克

# prestashop - prestashop 免费送货问题

> ID：15909603
> 
> 赞同：0
> 
> 时间：2013-04-09T18:23:26.307
> 
> 标签：prestashop, cart, shipping

我只是先手动升级，但后来通过一键升级 v1.0.13 到 1.5.4 版本。我在购物车上遇到了运费问题。位于主页左上角的购物车已解决在本论坛之前的代码中不显示“FREE SHIPPING”的问题。但是，一旦我在选择并按下“更新承运人列表”按钮并按下“更新购物车”按钮后检查了里面的购物车，运费并没有更新，而是显示为“免费送货”。

谁能建议我解决这个问题？非常感谢。我非常感谢。

我的演示网站是[http://store.relishthai.com/](http://store.relishthai.com/)。您可以尝试通过选择“TEA”标签来添加商品并将一件商品添加到购物车，然后查看“FREE SHIPPING”问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:46:20.320

我有一个非常相似的问题。问题是如果值（运费）等于 0.00，则有一个 Javascript 文件将值更新为“免费送货”。我使用的是不同的版本，所以我不能准确地指出你的文件，但你绝对可以在三分钟内解决这个问题。（检查你的 theme/js 文件夹中的 order-opc.js）

查看网页的源代码并查看包含哪些 .js 文件。在 Javascript 文件（例如 cart.js）中搜索“FREE SHIPPING”，看看哪个是罪魁祸首。然后继续 FTP 并将其更改为 0.00。我更喜欢“免费！” 顺便一提 ;）

编辑：似乎我误读了您的问题。我尝试按“更新承运人列表”，然后按“更新购物车”，但我不认为运费是“免费送货”。相反，我看到 8 美元。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:11:42.600

再次感谢。在您回答之前，0.00 美元出现在页面左上角的购物车中，但后来在您发表评论后，我再次检查并删除了未使用的区域（那里不收取任何费用）。我试图把所有重量范围的实际运费都计算在内。现在，老问题已经解决了，但重量范围（小范围）的运费仍然存在。我会试着弄清楚。非常感谢！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-22T18:26:22.617

打开文件 /themes/xxx/modules/blockcart/blockcart.tpl 并删除此代码块（或注释）：

```
<div class="layer_cart_row">
    <strong class="dark">
        {l s='Total shipping' mod='blockcart'}&nbsp;{if $display_tax_label}{if $priceDisplay == 1}{l s='(tax excl.)' mod='blockcart'}{else}{l s='(tax incl.)' mod='blockcart'}{/if}{/if}
    </strong>
    <span class="ajax_cart_shipping_cost">
        {if $shipping_cost_float == 0}
            {l s='Free shipping!' mod='blockcart'}
        {else}
            {$shipping_cost}
        {/if}
    </span>
</div> 
```

# java - 错误无法解决或不是字段是什么意思？

> ID：15909604
> 
> 赞同：0
> 
> 时间：2013-04-09T18:23:26.657
> 
> 标签：java, tree, field

所以我正在为二叉搜索树编写代码并且我很远（我认为）并且有一点当我尝试编译它时我得到一个错误说

“文件：D:\ReservationQueue.java [行：15]

错误：left 无法解析或不是字段

文件：D:\ReservationQueue.java [行：17]

错误：权限无法解析或不是字段

文件：D:\ReservationQueue.java [行：4] 警告：永远不会在本地读取字段 ReservationQueue.right...

这是错误的代码，

```
public class ReservationQueue{
private Reservation root;
private Reservation left;
private Reservation right;

public boolean empty() {return root == null;}
public String findRoot() {return root.getName();}
public void deleteRoot(){root = left; }

public void insert(Reservation node) {

if(this.empty()) {
  root = node;
} else if (node.getPriority() < root.getPriority()){
  insert(node.left);
} else if (node.getPriority() > root.getPriority()){
  insert(node.right);
}
}
} 
```

如果它有助于 public class Reservation{ private int priority; 这就是 Reservation 类 私有字符串名称；

```
public Reservation(String name, int priority){
 if (priority < 1) {
 this.priority = 1;
} else if (priority > 10) {
 this.priority = 10;
} else {
 this.priority = priority;
}
}
public String getName(){return name;}
public int getPriority(){return priority;}
} 
```

我真的需要帮助我不知道我做错了什么，提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:24:56.550

`node`是 类型`Reservation`，`left`和`right`是 的字段`ReservationQueue`。因此以下两行将无法编译：

```
insert(node.left);
insert(node.right); 
```

如果`ReservationQueue`意味着是一棵具有类型节点的树`Reservation`，那么`left`并且`right`应该可能是 的成员`Reservation`而不是`ReservationQueue`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:33:32.433

你在做什么并不完全清楚。

1.  Reservetion 类中没有左右变量，无论如何它们是什么。
2.  可能是你的意思

    ```
    else if (node.getPriority() < root.getPriority()){
         insert(left);
     } else if (node.getPriority() > root.getPriority()){
        insert(right); 
    ```

# android - 检测 Spotify 歌曲播放

> ID：15909605
> 
> 赞同：1
> 
> 时间：2013-04-09T18:23:26.693
> 
> 标签：android, iphone, spotify, last.fm, libspotify

我正在开发一个移动应用程序，该应用程序可以检测 iPhone 和 Android 上各种媒体播放器的歌曲播放。我们目前在这两个平台上都支持许多应用程序。我们的应用程序的工作方式与 Last.FM 检测和自动加密播放的方式类似。

但是，我们还没有找到一个有效的解决方案来检测不需要使用 Last.FM scrobbling（仅适用于 Android 的 Spotify）或 Facebook 作为代理的 Spotify 歌曲播放。

我已经为 android 尝试了一些东西，但据我了解（我看到很多帖子，例如[Find what song is playing in spotify on android](https://stackoverflow.com/questions/8468129/find-what-song-is-playing-in-spotify-on-android)），Android 应用程序不会广播与媒体相关的歌曲播放意图，所以我们需要更多的东西有创造力的。无论如何，这并不能解决 iPhone 用例的问题。

Lib-spotify 为我们提供了一些承诺，我已经设法构建了一个可以创建会话并导航一些播放列表的应用程序，但我还没有弄清楚是否可以在桌面应用程序中加载显示为“播放历史记录”的内容通过 lib-spotify（例如，这是一种特殊形式的播放列表吗？）。我也尝试过 Spotify 应用程序来完成相同的操作，但 API 似乎没有公开所需的功能。

似乎我已经用尽了所有途径，但是有人对我没有尝试过的事情有任何建议吗？

假设我已经为每个我想收集其历史记录的用户提供了 spotify 凭据。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-08T05:31:46.570

Spotify 有一个 metadatachanged intent-action，其中包含艺术家、专辑、曲目、长度和 id 值。请参阅：[https ://stackoverflow.com/a/22195867/1345586](https://stackoverflow.com/a/22195867/1345586)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:57:13.320

不幸的是，桌面播放历史记录是每台机器本地的，这意味着无法通过 libspotify 或任何其他 API 访问它。

目前，没有一种方法可以可靠地实现您想要在移动平台上执行的操作。

# php - 我在一个页面上有两个按钮，保存和完成。我正在为两个输入字段寻找两个不同的警报

> ID：15909610
> 
> 赞同：0
> 
> 时间：2013-04-09T18:23:40.143
> 
> 标签：php, javascript, jquery, onbeforeunload

如果没有输入charge_amt 输入框的值，我将使用onbeforeunload jquery 事件通知用户他们没有输入金额。输入金额后，他们可以保存。

```
<td><input type="hidden" name="charge_cc" value="0" class="">
        <input type="checkbox" id="charge_cc" name="charge_cc" value="1" checked="" class=""> Charge CC? Amount $ <input type="text" id="charge_amt" name="charge_amt" value="523" size="8" maxlength="6"></td>

<script>
$(document).ready(function(){
    $("input[type='text'], select, textarea").change(function(){
        window.onbeforeunload = function()
            {
            return "You have not saved an amount to be charged.";
            }
    });
    $("charge_amt").submit(function(){

        window.onbeforeunload = null;
    });
});
</script> 
```

第二个事件是完成按钮。

```
<input type='checkbox' name='reorder_comment_for_CC'> Verify Charge and Leave Comment" ?> 
```

如果他们点击完成但未标记此复选框，我想提醒他们，如果不进行验证/检查，他们将无法完成活动。

也许我应该像这样使用两个单独的事件：

```
<script type="text/javascript">
$("#charge_amt").keypress(function() {
    if($(this).val().length > 1) {
         return "You have not input an amount to be charged.";
    } else {
         return "Thank you for entering a charge amount, you can now save.";
    }
});</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:27:00.213

您可以检查用户是否在charge_amt 中输入了正确的值，以及他们是否检查了这样的复选框。您似乎也对 jQuery 语法有些困惑。您应该使用 #the_id_of_the_element 来查找单个元素。该`submit()`事件附加到您的表单而不是字段`charge_atm`。

```
$("#id_of_your_form").submit(function() {
    //Here you can check the checkbox
    //This assumes you add the id of the checkbox to be the same as the name
    var $checked = $(this).find("#reorder_comment_for_CC").is(":checked");
    var $validValue = $(this).find("#charge_amt").val().length > 0;        

    if (!$checked) {
       alert("You haven't verified charge");
       return false;//prevent submitting
    }

    if (!$validValue) {
        alert("Invalid value");
        return false;
    }

   return true;

}); 
```

# http - wso2 中介者动态 url

> ID：15909620
> 
> 赞同：0
> 
> 时间：2013-04-09T18:24:01.367
> 
> 标签：http, wso2, esb, wso2esb, mediator

在下一种情况下我遇到了一些问题：我有 wso2esb 并且 esb 中有代理服务。我用带参数的参数调用这个代理，例如， `http://host:9643/service/myproxy?domain=first.` 之后我的代理需要到达下一个端点：`http://first.mysite.com` 如果我们有`http://host:9643/service/myproxy?domain=second`，我们将不得不到达`http://second.mysite.com`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:14:01.873

您可以在代理服务中使用您的参数。

```
<property name="domain" value="application/x-www-form-urlencoded" scope="axis2"/> 
```

然后您需要在代理服务的 insequence 中使用 switch mediator，然后根据您需要使用 send mediator 的情况将消息发送到所需的端点。

这将有助于理解场景。 [http://docs.wso2.org/wiki/display/IntegrationPatterns/Dynamic+Router](http://docs.wso2.org/wiki/display/IntegrationPatterns/Dynamic+Router)

# symfony - PHP 和 Symfony 对象到数组的类型转换

> ID：15909623
> 
> 赞同：0
> 
> 时间：2013-04-09T18:24:27.063
> 
> 标签：symfony, symfony-2.1, symfony-forms

我正在使用 symfony2 和 createForm 来获取 http post 数据。在女巫之后我这样做：

```
$Data = (array) $form->getData(); 
```

我得到：

```
array (size=1)
  '�Far\MT\AccountBundle\Entity\Movement�toAccount' => int 3 
```

**我认为这不是这些情况下的正常行为，有什么建议吗？**

toAccount 应该是完整的索引名称。

无法重现 cli 测试用例中的条件：

```
<?php

namespace A;

class MyClass
{
    public $id;
    public $name;
    public $age;
}

$object = new MyClass();
$object->name = "Andre";
$object->id   = 1;
$object->age  = 30;

var_dump($object);

$Ar = (array) $object;
var_dump($Ar) 
```

以上工作正常。

我使用了这个解决方案：

```
//comment
$Data = $form->getData();
$obj = new \ReflectionObject($Data);
$props = $obj->getProperties();

$propname = array();
foreach ($props as $prop) {

    $tmp = "get".ucfirst($prop->name);

    if (($res = $Data->$tmp() )!== null) {
        $propname[$prop->name] = $res;
    }
}
$tmpSearch = $propname; 
```

之后我会清理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-18T17:45:10.767

您可以使用 Symfony 规范器类，因为当您的表单名称中的字段带有下划线（如“facility_id”）但您的设置器称为设施ID 时，您的提议将失败

```
<?php
$data = $form->getData();       
$normalizers = new \Symfony\Component\Serializer\Normalizer\GetSetMethodNormalizer();
$norm = $normalizers->normalize($data);
print_r($norm); 
```

你会得到像

```
Array ( [fullname] => fullnameVal [email] => emaile@lkjl.com [phoneNumber] => 5554444 [facilityId] => 123132 ) 
```

# regex - 正则表达式从开始到 n 次出现字符

> ID：15909626
> 
> 赞同：7
> 
> 时间：2013-04-09T18:24:36.063
> 
> 标签：regex, r

我真的在花时间学习正则表达式，并且正在玩不同的玩具场景。我无法开始工作的一种设置是从字符串的开头抓取到n > 1**的字符的 n 次出现。**

在这里，我可以从字符串的开头抓取到第一个下划线，但我不能将其概括为第二个或第三个下划线。

```
x <- c("a_b_c_d", "1_2_3_4", "<_?_._:")

gsub("_.*$", "", x)

Here's what I'm trying to achieve with regex. (`sub`/`gsub`):

## > sapply(lapply(strsplit(x, "_"), "[", 1:2), paste, collapse="_")
## [1] "a_b" "1_2" "<_?"

#or

## > sapply(lapply(strsplit(x, "_"), "[", 1:3), paste, collapse="_")
## [1] "a_b_c" "1_2_3" "<_?_." 
```

*相关文章：[从第一个字符到字符串结尾的正则表达式](https://stackoverflow.com/q/15903696/1000343)*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T18:48:37.410

这是一个开始。为了使它安全地用于一般用途，您需要它正确地转义正则表达式的特殊字符：

```
x <- c("a_b_c_d", "1_2_3_4", "<_?_._:", "", "abcd", "____abcd")

matchToNth <- function(char, n) {
    others <- paste0("[^", char, "]*") ## matches "[^_]*" if char is "_"
    mainPat <- paste0(c(rep(c(others, char), n-1), others), collapse="")
    paste0("(^", mainPat, ")", "(.*$)")
}

gsub(matchToNth("_", 2), "\\1", x)
# [1] "a_b"  "1_2"  "<_?"  ""     "abcd" "_" 

gsub(matchToNth("_", 3), "\\1", x)
# [1] "a_b_c" "1_2_3" "<_?_." ""      "abcd"  "__" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T18:31:09.590

怎么样：

```
gsub('^(.+_.+?).*$', '\\1', x)
# [1] "a_b" "1_2" "<_?" 
```

或者，您可以使用`{}`来指示重复次数...

```
sub('((.+_){1}.+?).*$', '\\1', x)  # {0} will give "a", {1} - "a_b", {2} - "a_b_c" and so on 
```

所以如果你想匹配第n个，你不必重复自己......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T18:29:30.417

perl 风格正则表达式中的第二个下划线：

```
/^(.?_.?_)/ 
```

第三：

```
/^(.*?_.*?_.*?_)/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T18:52:00.983

也许是这样的

```
x
## [1] "a_b_c_d" "1_2_3_4" "<_?_._:"

gsub("(.*)_", "\\1", regmatches(x, regexpr("([^_]*_){1}", x)))
## [1] "a" "1" "<"

gsub("(.*)_", "\\1", regmatches(x, regexpr("([^_]*_){2}", x)))
## [1] "a_b" "1_2" "<_?"

gsub("(.*)_", "\\1", regmatches(x, regexpr("([^_]*_){3}", x)))
## [1] "a_b_c" "1_2_3" "<_?_." 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T19:26:50.490

使用贾斯汀的方法，这是我设计的：

```
beg2char <- function(text, char = " ", noc = 1, include = FALSE) {
    inc <- ifelse(include, char, "?")
    specchar <- c(".", "|", "(", ")", "[", "{", "^", "$", "*", "+", "?")
    if(char %in% specchar) {
        char <- paste0("\\", char)
    }
    ins <- paste(rep(paste0(char, ".+"), noc - 1), collapse="")
    rep <- paste0("^(.+", ins, inc, ").*$")
    gsub(rep, "\\1", text)
}

x <- c("a_b_c_d", "1_2_3_4", "<_?_._:")
beg2char(x, "_", 1)
beg2char(x, "_", 2)
beg2char(x, "_", 3)
beg2char(x, "_", 4)
beg2char(x, "_", 3, include=TRUE) 
```

# sql - 如何从三个不同的表 sql JOIN 中追踪值？

> ID：15909627
> 
> 赞同：0
> 
> 时间：2013-04-09T18:24:39.563
> 
> 标签：sql, sql-server, tsql, join

我有 3 个如下表

```
table_1

securityno name    price
1           a11    12.12
2           z11    44.4

table_2

name      identifier Mainprice
a11_bond  NO34         11
z22_bond  NO98         22

table_3
securityno name    identifier 
1           a11    NO34         
2           z11    NO98 
```

我想检查`table_1`价格是否正确，因为`table_2` 我只想显示输出`table_1`数据和`Mainprice`列`table_2`

```
securityno name    price Mainprice
1           a11    12.12 11
2           z11    44.4  22 
```

我试着像

> select * from table_1 left join table_2 on table_3呢？

未能使用 3 张桌子。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:37:24.857

尝试：

```
SELECT  
    t1.*,  
    t2.Mainprice  
FROM table_1 AS t1  
LEFT JOIN table_3 AS t3  
   ON t1.securityno = t3.securityno AND t1.name = t3.name  
INNER JOIN table_2 AS t2  
   ON t2.identifier = t3.identifier 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:05:44.900

简单使用`INNER JOIN`

```
SELECT T1.*,
       T2.mainprice
FROM TABLE1 T1
INNER JOIN Table3 T3 ON T3.securityno = T1.securityno
INNER JOIN Table2 T2 ON T2.identifier = T3.identifier 
```

[演示](http://www.sqlfiddle.com/#!3/db2f0/6)

# python - 在Django中添加UserAdmin反向ForeignKey管理

> ID：15909629
> 
> 赞同：2
> 
> 时间：2013-04-09T18:24:42.870
> 
> 标签：python, django

当我尝试将反向 ForeignKey 字段添加到 UserAdmin 时遇到问题：

我的模型是：

```
from django.contrib.auth.models import User

class Test(models.Model):
    title = models.TextField()
    layout = models.TextField(blank=True, null=True)
    answer = models.TextField(blank=True, null=True)
    todo_set = models.ManyToManyField(User, blank=True, null=True) 
```

所以在 User 模型中有一个 test_set 属性。现在我想在用户更改视图中管理这个 m2m 关系，所以必须有一个关于 test_set 的选定字段。

我试过了：

```
from django.contrib.auth.admin import UserAdmin

custom_fieldsets = list(UserAdmin.fieldsets)
custom_fieldsets.append((None, {'fields': ('test_set', )}))

class CustomUserAdmin(UserAdmin):
    fieldsets = custom_fieldsets

admin.site.unregister(User)
admin.site.register(User, CustomUserAdmin) 
```

但是 Django 引发了一个错误：

```
'CustomUserAdmin.fieldsets[4][1]['fields']' refers to field 'test_set' that is missing from the form. 
```

我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:11:57.530

想知道您是否可以使用[ModelMultipleChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ModelMultipleChoiceField)。看看这个其他[帖子](https://stackoverflow.com/questions/10672811/django-form-with-list-of-foreign-key-fields)。

# ruby - 是否有一种破坏性地使用`.split(//)`（例如将字符串转换为数组）的方法？

> ID：15909635
> 
> 赞同：0
> 
> 时间：2013-04-09T18:24:53.500
> 
> 标签：ruby

到目前为止，我有：

```
my_array = "Foo bar na nas"
my_array.delete!(" ").downcase!
my_array = my_array.split(//).uniq 
```

要得到：

```
==> ["f", "o", "b", "a", "r", "n", "s"] 
```

我似乎无法使用`.split!(//)`like`.delete!`或`.downcase!`但我想一步完成所有这些。是否可以？

使用`my_array.delete!(" ").downcase!.split!(//)`产量“'：未定义的方法'split！' 对于 nil:NilClass"，所以我认为`.split!`它不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:44:43.230

不。如果您阅读[文档](http://ruby-doc.org/core-2.0/String.html#method-i-downcase-21)，您会发现破坏性方法`nil`在没有任何更改时会返回，因此您不能将它们链接起来。如果要将字符串更改为不包括 whitespces 的字母数组，您应该运行：

```
my_array = "Foo bar na nas".downcase.gsub(/\W/, '').split(//).uniq 
```

也不存在破坏性的方法`split!`。它怎么可能存在？Ruby 是强类型语言，因此您无法更改`String`为强类型语言，`Array`因为它们不相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:34:41.623

`my_array.downcase.gsub(' ','').chars.uniq`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T18:29:54.997

```
"Foo bar na nas".downcase.split(//).uniq.keep_if { |item| item != " " }
#=> ["f", "o", "b", "a", "r", "n", "s"]

"Foo bar na nas  t  p".downcase.split(//).uniq.keep_if { |item| item != " " }
#=> ["f", "o", "b", "a", "r", "n", "s", "t", "p"] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T18:58:00.353

为什么不使用 split 与匹配空格的正则表达式或什么都不匹配？

```
"Foo bar na nas".downcase.split(/\s*/).uniq 
```

这返回

```
["f", "o", "b", "a", "r", "n", "s"] 
```

`split!`不存在，因为按照约定方法`!`在 ruby​​ 中更改对象本身，并且您不能将字符串强制转换为数组，因为 ruby​​ 是强类型的。

# c++ - 在使用 std::find() 的不成功搜索中返回特定值而不是 0

> ID：15909637
> 
> 赞同：0
> 
> 时间：2013-04-09T18:25:04.717
> 
> 标签：c++, std

我想在列表中查找特定元素。如果没有找到我想要一个特定的值，比如返回 -1。如何为此使用 std::find() ？

[我在这里](http://www.cplusplus.com/reference/algorithm/find/)读到find() 将迭代器返回到范围 [first,last) 中比较等于 val 的第一个元素。如果没有找到这样的元素，则函数最后返回。

但这导致了一个模棱两可的情况：

例如：

如果列表是

0 -> 1 -> 2 -> 3

当我使用

```
vector<int> v(4);
v.push_back(0);
v.push_back(1);
v.push_back(2);
v.push_back(3);
vector<int>::iterator i;

i = find(v.begin(), v.end(), 4);
//Unsuccessful find, so I want a value, say -1.
cout<<*i<<endl;  //this prints zero during an unsuccessful search

i = find(v.begin(), v.end(), 0);
cout<<*i<<endl;  //this too prints zero which is ambiguous
//because zero was already in my list 
```

如何摆脱这种模棱两可的局面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T18:27:12.207

您的第一个调用`find`是返回过去的迭代器。您*不能取消*引用此迭代器。您有未定义的行为，因为您正在使用`cout<<*i<<endl;`. 它打印 0 的事实是无关紧要的。

它不会给出模棱两可的情况，因为如果失败，它会返回第二个参数的副本。在这种情况下，它返回`v.end()`. 您应该检查是否`std::find`成功：

```
if (i != v.end()) {
  cout<<*i<<endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:27:16.123

您的代码具有未定义的行为。如果未找到该元素，`find`将生成传入的第二个迭代器的副本，在这种情况下为`v.end()`. 取消引用`end()`迭代器是未定义的行为。

您必须测试迭代器，而不是值，以确定是否找到它：

```
if (i != v.end()) {
   std::cout << *i << "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:30:46.547

`find`函数不搜索范围的最后一个元素，因此您可以安全地将返回的迭代器与其进行比较，以了解搜索是否成功。

```
i = find(v.begin(), v.end(), 4);
//Unsuccessful find, so I want a value, say -1.
if (i != v.end())
   cout << *i << endl;
else
   cout << -1 << endl; 
```

在您的示例中，确实最后一个元素恰好是不可取消引用的，但是如果是这种情况，您应该遵循相同的原则。例如，考虑您想要搜索集合的子序列的情况：您将首先选择定义范围的该集合的开始和结束条目，例如`v.start()`和`v.start()+2`：

```
auto e = v.start()+2;
i = find( v.start(), e, 4);
if (i != e) 
    cout << *i << endl; // will output 4 if found
else
    cout << -1 << endl; 
```

这里`e`是有效的，但必须与它进行比较以确保返回的结果`find`在搜索范围内。

# javascript - 基于 ID 的 Angular JS 嵌套子级

> ID：15909638
> 
> 赞同：0
> 
> 时间：2013-04-09T18:25:15.647
> 
> 标签：javascript, angularjs

我正在创建一个“树”导航，并且在嵌套子项时遇到问题，服务器向我发送如下 JSON 数据：

**JSON**：

```
0: {id:5, parentid:0, text:PlaceHolder}
1: {id:6, parentid:0, text:PlaceHolder}
2: {id:7, parentid:0, text:PlaceHolder}
3: {id:8, parentid:7, text:PlaceHolder}
4: {id:9, parentid:7, text:PlaceHolder}
5: {id:10, parentid:5, text:PlaceHolder}
6: {id:11, parentid:5, text:PlaceHolder}
7: {id:12, parentid:7, text:PlaceHolder}
8: {id:15, parentid:0, text:PlaceHolder}
9: {id:16, parentid:15, text:PlaceHolder}
10: {id:17, parentid:5, text:PlaceHolder}
11: {id:18, parentid:15, text:PlaceHolder}
12: {id:19, parentid:15, text:PlaceHolder}
13: {id:20, parentid:0, text:PlaceHolder}
14: {id:21, parentid:15, text:PlaceHolder}
15: {id:23, parentid:5, text:PlaceHolder} 
```

注意'parentid'。“0”表示该项目是顶级父级。例如，如果 'parentid' 是 7，那么它将是 'id' 7 的孩子。

**HTML：**

```
<li ng-repeat="link in links"><a href="#/page/{[{link.id}]}">{[{link.text}]}</li> 
```

**JS：**

```
var Site = angular.module('Site', []);

Site.config(function ($routeProvider) {
  $routeProvider
    .when('/page/:slug', {templateUrl: 'partials/page.html', controller: 'RouteController'})
    .otherwise({redirectTo: '/page/home'});
});

function AppController ($scope, $rootScope, $http) {
  /* Load pages on startup
  $http.get('pages.json').success(function (data) {
    $rootScope.pages = data;
  }); */
  // Load navigation on startup
  $http.get('/university/list').success(function (data) {
    $rootScope.links = data;

  });
  // Set the slug for menu active class
  $scope.$on('routeLoaded', function (event, args) {
    $scope.slug = args.slug;
  });
}

function RouteController ($scope, $rootScope, $routeParams) {
  // Getting the slug from $routeParams
  var slug = $routeParams.slug;

  $scope.$emit('routeLoaded', {slug: slug});
  $scope.page = $rootScope.pages[slug];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:56:16.373

我会尝试做这样的事情[http://jsfiddle.net/zzal/qdvuN/10/](http://jsfiddle.net/zzal/qdvuN/10/) ...根据您在 IRC 频道上的问题，这是设置菜单的方法：

尝试在数组中获取 JSON 响应：

```
var PlaceHolder = "PlaceHolder";
var myArr =
[{id:5, parentid:0, text:PlaceHolder},
 {id:6, parentid:0, text:PlaceHolder},
 {id:7, parentid:0, text:PlaceHolder},
 {id:8, parentid:7, text:PlaceHolder},
 {id:9, parentid:7, text:PlaceHolder},
 {id:10, parentid:5, text:PlaceHolder},
 {id:11, parentid:5, text:PlaceHolder},
 {id:12, parentid:7, text:PlaceHolder},
 {id:15, parentid:0, text:PlaceHolder},
 {id:16, parentid:15, text:PlaceHolder},
 {id:17, parentid:5, text:PlaceHolder},
 {id:18, parentid:15, text:PlaceHolder},
 {id:19, parentid:15, text:PlaceHolder},
 {id:20, parentid:0, text:PlaceHolder},
 {id:21, parentid:15, text:PlaceHolder},
 {id:23, parentid:5, text:PlaceHolder}]; 
```

现在，创建嵌套数组来保存您的“子”对象：

```
for (var i = 0; i < myArr.length; i++){
  myArr[i].children = [];
  for (var q = 0; q < myArr.length; q++){
    if (myArr[i].id == myArr[q].parentid){
      // if want to keep the parentid key
      //var temp = {id:myArr[q].id,parentid:myArr[q],text:myArr[q].text}
      var temp = {id:myArr[q].id,text:myArr[q].text};
      myArr[i].children.push(temp);
    };
  };  
}; 
```

现在您的数组`myArr`应该以一个新的键数组结束，该数组`children`具有遵循示例所需的布局。

# jquery - 如何使用 jquery 获取类索引的第一个子项？

> ID：15909639
> 
> 赞同：0
> 
> 时间：2013-04-09T18:25:18.563
> 
> 标签：jquery

我有一组具有给定类的 tr 行：

```
 <tr class="rowgroupA"><td>Test Data Logs</td></tr>
           <tr class="rowgroupA"><td>Test Data Logs</td></tr>
           <tr class="rowgroupA"><td>Test Data Logs</td></tr>
           <tr class="rowgroupA"><td>Test Data Logs</td></tr>
           <tr class="rowgroupB"><td>Test Data Logs</td></tr> // I need this index
           <tr class="rowgroupB"><td>Test Data Logs</td></tr>
           <tr class="rowgroupB"><td>Test Data Logs</td></tr>
           <tr class="rowgroupB"><td>Test Data Logs</td></tr> 
```

更具体地说，如何使用 jquery 获取类名 rowgroupB 的索引的第一个孩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:34:50.177

我不确定您使用的是什么返回`-1`，您可以使用`index`方法：

```
$('table tr.rowgroupB').first().index(); 
```

[http://jsfiddle.net/SUfG2/](http://jsfiddle.net/SUfG2/)

# java - 字符串的 Java GC 调优

> ID：15909640
> 
> 赞同：10
> 
> 时间：2013-04-09T18:25:19.843
> 
> 标签：java, string, memory, memory-management, garbage-collection

分析应用程序我发现堆上有很多字符串。

在我的情况下，字符串是在堆上创建的，而不是实习生的，它们不是文字。

当应用程序中的字符串数量非常多时，是否需要遵循特定的 GC 调整技术。

我偶然发现了 GC 设置**-XX:+UseCompressedStrings 或 -XX+UseStringCache**但不确定这会有所帮助。有没有人尝试过这些设置？

Java 版本“1.6.0_22”
Java(TM) SE 运行时环境（构建 1.6.0_22-b04）
Java HotSpot(TM) 64 位服务器 VM（构建 17.1-b03，混合模式）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T18:31:12.580

与 相关`-XX:+UseCompressedStrings`，你应该看看这个问题：[Support for Compressed Strings being Dropped in HotSpot JVM?](https://stackoverflow.com/q/8833385/772000)

并且，相关`-XX+UseStringCache`，看看：[JVM -XX:+StringCache 参数？](https://stackoverflow.com/q/1049983/772000)

顺便提一句。Java 7 带有很好的特性，允许在使用内部字符串时调整字符串缓存。见`-XX:+PrintSTringTableStatistics`和`-XX:StringTableSize=n`。这样您就可以优化字符串缓存大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-10T16:54:42.447

Java 8 带有一个新的 GC 特性 -XX:+UseStringDeduplication。

启用此功能后，GC 将比较字符串以查找具有相同 char 数组值的字符串。假设`str1`&`str2`具有相同的 char[]，那么 GC 将使 str1 指向 str2 的 char[]。这样 str1 的 char[] 可以被垃圾收集并回收内存。而且由于字符串是不可变的，所以没有使多个字符串指向同一个 char[] 的风险

# javascript - 按下提交按钮后如何为表单的属性赋值

> ID：15909644
> 
> 赞同：0
> 
> 时间：2013-04-09T18:25:33.097
> 
> 标签：javascript, jquery, html, forms

我正在尝试根据用户选择 null 来更改表单的值

```
<form name="myForm" action="formProcess.php" method='post' onSubmit="return validateForm()">
<label for="venue">Venue:</label>
   <select name="venue">
   <option value="null">Please choose</option>
   <option value="Wynyard Hall">Wynyard Hall</option>
   <option value="Home">Home</option>
   <option value="Hallgarth">Hallgarth</option>
   <option value="Other">Other</option>
</select> 
```

这是功能

```
function validateForm() {

var d=document.forms["myForm"]["venue"].value;
if (d=="null") { 
```

这就是我想要做的。我想将场地的值更改为用户提示。类似于以下内容：

```
var newVenue = prompt("Tell us your venue");
venue = newVenue; 
```

我知道这是错误的，但这是我的目标。我已经使用了我在这里找到的代码。

```
$('#myForm').submit(function() {
var txt = $('#venue');
txt.val([newVenue]);
});

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:02:09.890

该代码正在寻找一个 id 为“venue”的 DOM 元素。只需将其更改为查找 name 属性 = 为“venue”的元素。

```
$('input[value="Hot Fuzz"]')

$('#myForm').submit(function() {
    var txt = $('select[name="venue"]');
    txt.val(//Your new value );
}); 
```

请检查 jQuery 文档。

# python - lxml：在给定位置插入标签

> ID：15909647
> 
> 赞同：10
> 
> 时间：2013-04-09T18:25:36.783
> 
> 标签：python, lxml

我有一个 xml 文件，类似于：

```
<tag attrib1='I'>
  <subtag1 subattrib1='1'>
    <subtext>text1</subtext>
  </subtag1>
  <subtag3 subattrib3='3'>
    <subtext>text3</subtext>
  </subtag3>
</tag> 
```

我想插入一个新的子元素，所以结果会是这样的

```
<tag attrib1='I'>
  <subtag1 subattrib1='1'>
    <subtext>text1</subtext>
  </subtag1>
  <subtag2 subattrib2='2'>
    <subtext>text2</subtext>
  </subtag2>
  <subtag3 subattrib3='3'>
    <subtext>text3</subtext>
  </subtag3>
</tag> 
```

我可以附加我的 xml 文件，但新元素将被插入到最后。如何强制 python lxml 将其置于给定位置？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-10T06:47:14.697

您可以使用[addnext()](http://lxml.de/api/lxml.etree._Element-class.html#addnext)方法：

```
from lxml import etree

XML= """
<tag attrib1='I'>
  <subtag1 subattrib1='1'>
    <subtext>text1</subtext>
  </subtag1>
  <subtag3 subattrib3='3'>
    <subtext>text3</subtext>
  </subtag3>
</tag>"""

parser = etree.XMLParser(remove_blank_text=True)
tag = etree.fromstring(XML, parser)

subtag1 = tag.find("subtag1")
subtag2 = etree.Element("subtag2", subattrib2="2")
subtext = etree.SubElement(subtag2, "subtext")
subtext.text = "text2"
subtag1.addnext(subtag2)   # Add subtag2 as a following sibling of subtag1

print etree.tostring(tag, pretty_print=True) 
```

输出：

```
<tag attrib1="I">
  <subtag1 subattrib1="1">
    <subtext>text1</subtext>
  </subtag1>
  <subtag2 subattrib2="2">
    <subtext>text2</subtext>
  </subtag2>
  <subtag3 subattrib3="3">
    <subtext>text3</subtext>
  </subtag3>
</tag> 
```

替代方案：`insert()`在根元素上使用：

```
subtag2 = etree.Element("subtag2", subattrib2="2")
subtext = etree.SubElement(subtag2, "subtext")
subtext.text = "text2"
tag.insert(1, subtag2)   # Add subtag2 as the second child (index 1) of the root element 
```

# linux - 获取从开始索引到结束索引的子字符串

> ID：15909649
> 
> 赞同：1
> 
> 时间：2013-04-09T18:25:44.880
> 
> 标签：linux, bash

我为此工作了两个小时，但没有运气，总是出现*“错误替换”*错误。

我想做什么（.sh 脚本）：从文件（名称）中读取，然后我想用给定名称的子字符串替换这个名称，偏移量和长度是脚本参数（$1 = 偏移量，$2 =长）。

它应该像这样工作（我认为）：`new_user=${user:$1:$2}`
-> 从 .txt 读取用户的位置（在 while 循环中）并且 $1 和 $2 是这个 .sc 的参数

我已经强调了重要的部分：

```
#!/bin/bash
touch postopek.log
while IFS="," read fullName userName passwordLarge
do
 pass=$(perl -e 'print crypt(&ARGV[0], "password")' $passwordLarge)
 new_up=${fullName:$1:$2} # important line
 sudo useradd -m -p $pass -d /home/$new_up -s /bin/bash $new_up
 [ $? -eq 0] && echo "Made something bla bla not important..." >> postopek.log
 sudo mkdir /home/$new_up/gradivo
 sudo cp -r /home/administrator/vaje/* /home/$new_up/gradivo
 sudo chown -R $new_up:$new_up /home/$new_up/gradivo
done < /home/administrator/seznam.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:10:09.913

您正在运行脚本的 sh shell 可能不是 bash，请尝试像这样运行它

```
bash ustvari.sh 3 5 
```

要不就

```
/path/to/ustvari.sh 3 5 
```

因为无论如何你的[shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)都指向bash。

`${parameter:offset:length}`POSIX 未指定，因此如果您`/bin/sh`的 shell 不支持子字符串语法，则会收到`Bad substitution`遇到的错误，例如：

```
$ dash
$ echo ${foo:0:1}
dash: 1: Bad substitution 
```

# rest - 使用 REST 创建作业并在 jenkins 中执行它们

> ID：15909650
> 
> 赞同：23
> 
> 时间：2013-04-09T18:25:47.240
> 
> 标签：rest, wcf, jenkins, jenkins-api

我正在尝试创建一个 WCF REST 客户端，它将与 Jenkins 通信并从 XML 文件创建一个作业，然后构建该作业。我的理解是你可以用 Jenkins 做到这一点。

有人可以提供一些您可以在浏览器地址栏上键入的命令来创建和构建工作吗？即：`http:localhost/jenkins/createItem?name=TESTJOB`沿着这些思路。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-04-30T00:24:36.300

通常，在解析文档时，可能需要一两天的时间。能够访问代码或 curl 命令以在一小时内启动并运行会很有帮助。这是我对很多第三方软件的目标。

[请参阅http://scottizu.wordpress.com/2014/04/30/getting-started-with-the-jenkins-api/](http://scottizu.wordpress.com/2014/04/30/getting-started-with-the-jenkins-api/)上的帖子，其中列出了几个 curl 命令。您必须用您自己的 url 替换 my.jenkins.com（即 JENKINS_HOST）。

例如，要创建作业，请尝试：

```
curl -X POST -H "Content-Type:application/xml" -d "<project><builders/><publishers/><buildWrappers/></project>" "http://JENKINS_HOST/createItem?name=AA_TEST_JOB2" 
```

这使用通用配置。您还可以从手动创建的作业中下载配置，然后将其用作模板。

```
curl "http://JENKINS_HOST/job/MY_JOB_NAME/config.xml" > config.xml
curl -X POST -H "Content-Type:application/xml" -d @config.xml "http://JENKINS_HOST/createItem?name=AA_TEST_JOB3" 
```

要执行作业（并设置字符串参数），请使用：

```
curl "http://JENKINS_HOST/job/MY_JOB_NAME/build"
curl "http://JENKINS_HOST/job/MY_JOB_NAME/buildWithParameters?PARAMETER0=VALUE0&PARAMETER1=VALUE1" 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-09T18:40:50.370

请参阅[Jenkins API Wiki 页面](https://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API)（包括最后的评论）。您可以使用 Jenkins 自己提供的文档来填补空白；例如，`http://JENKINS_HOST/api`将为您提供创建作业的 URL，并`http://JENKINS_HOST/job/JOBNAME/api`为您提供触发构建的 URL。

我强烈建议避免自定义创建作业配置 XML 文件，而改用[Job DSL 插件](https://wiki.jenkins-ci.org/display/JENKINS/Job+DSL+Plugin)之类的东西。这为您提供了一个很好的基于 Groovy 的 DSL，以编程方式创建作业 - 更加简洁且不易出错。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-19T17:58:36.800

感谢 GIST - [https://gist.github.com/stuart-warren/7786892](https://gist.github.com/stuart-warren/7786892)

> 检查作业是否存在

```
curl -XGET 'http://jenkins/checkJobName?value=yourJobFolderName' --user user.name:YourAPIToken 
```

> 带文件夹插件

```
curl -s -XPOST 'http://jenkins/job/FolderName/createItem?name=yourJobName' --data-binary @config.xml -H "Content-Type:text/xml" --user user.name:YourAPIToken 
```

> 没有文件夹插件

```
curl -s -XPOST 'http://jenkins/createItem?name=yourJobName' --data-binary @config.xml -H "Content-Type:text/xml" --user user.name:YourAPIToken 
```

> 创建文件夹

```
curl -XPOST 'http://jenkins/createItem?name=FolderName&mode=com.cloudbees.hudson.plugins.folder.Folder&from=&json=%7B%22name%22%3A%22FolderName%22%2C%22mode%22%3A%22com.cloudbees.hudson.plugins.folder.Folder%22%2C%22from%22%3A%22%22%2C%22Submit%22%3A%22OK%22%7D&Submit=OK' --user user.name:YourAPIToken -H "Content-Type:application/x-www-form-urlencoded" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-30T09:18:08.773

如果您想在视图存在的情况下将作业创建到视图中。

```
curl -X POST -H "Content-Type:application/xml" -d @build.xml "http://jenkins_host/view/viewName/createItem?name=itemName" 
```

build.xml 文件模板可以在作业工作区的根目录中找到

如果要创建视图：

```
curl  -X POST -H "Content-Type:application/xml"  -d @view.xml "http://jenkins_host/createView?name=viewName" 
```

文件 view.xml 的内容可能是：

```
<?xml version="1.0" encoding="UTF-8"?>
<hudson.model.ListView>
    <name>viewName</name>
    <filterExecutors>false</filterExecutors>
    <filterQueue>false</filterQueue>
    <properties class="hudson.model.View$PropertyList"/>
    <jobNames>
        <comparator class="hudson.util.CaseInsensitiveComparator"/>
    </jobNames>
    <jobFilters/>
    <columns>
        <hudson.views.StatusColumn/>
        <hudson.views.WeatherColumn/>
        <hudson.views.JobColumn/>
        <hudson.views.LastSuccessColumn/>
        <hudson.views.LastFailureColumn/>
        <hudson.views.LastDurationColumn/>
        <hudson.views.BuildButtonColumn/>
    </columns>
</hudson.model.ListView> 
```

并检查视图是否存在：

```
curl -X POST -H "Content-Type:application/xml" "http://jenkins_host/checkViewName?value=viewName" 
```

检查作业是否存在：

```
curl -X POST -H "Content-Type:application/xml" "http://jenkins_host/checkJobName?value=jobName" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-14T12:33:47.133

要创建作业：

```
curl -X POST -H "Content-Type:application/xml" -d "<project><builders/><publishers/><buildWrappers/></project>" -u username: API_Token http://JENKINS_HOST/createItem?name=AA_TEST_JOB2 
```

建立一个工作：

```
curl -X POST -u username:API_TOKEN http://JENKINS_HOST/job/MY_JOB_NAME/build 
```

# c# - 给定键列表的排序列表？

> ID：15909661
> 
> 赞同：0
> 
> 时间：2013-04-09T18:26:14.197
> 
> 标签：c#, asp.net, linq

我有一个`List<Project>`

一个项目的 ID 是一个 int。然后我有一个对应于项目 ID 的 int 列表。

项目需要按照 int 列表的顺序进行处理。

可能存在 ID 为空的项目。

任何没有 ID 或 ID 不在列表中的项目都将移至底部（或者甚至更好，从结果列表中删除）。

我可以想到一种 O(N^2) 方法来做到这一点，但我想知道是否有更好的方法使用 LINQ 或者可能更多的 m + n 或 n 或其他东西......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:46:27.367

```
 class Project
        {
            public int? id;
            public Project(int? iid) { id = iid; }
        }

        public class Program
        {
            static void Main(string[] args)
            {
                List<Project> pros = new List<Project>() { new Project(null), new Project(10), new Project(50), new Project(1), new Project(null) };
                var x = new Comparison<Project>((Project r, Project l) =>
                    {
                        if (r.id == null && l.id == null)
                            return 0;

                        if (r.id == null)
                        {
                            return 1;
                        }

                        if (l.id == null)
                        {
                            return -1;
                        }
                        return Math.Sign(r.id.Value - l.id.Value);
                    });
                pros.Sort(x);
                Console.ReadLine();
            }                
        } 
```

您可以更改谁减去谁以及 -1 或 1 的极性，以使 nans 到达您想要的位置。这将 nans 推到最后并从最小到最大排序。

或者，如果您根本不想处理 nan 并且不想按 ID 排序，只需使用 where 语句来获取没有空 id 的迭代器：

```
var nonulls = pros.Where(pr => (pr.id != null)); 
```

懒惰地评估为没有空值的集合，实际上并不存储中间体，因此您不必担心存储问题。O(N)，几乎没有开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:32:55.437

在下一个解决方案中，带有 null 的项目`Id`将被忽略。**在）**

```
int[] ids = new int[10];
List<Project> projects = new List<Project>();

var projectsDictionary = projects.ToDictionary(proj=> proj.Id, proj => proj);

var orderedProjects = ids.Select(id => projectsDictionary[id]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:51:04.993

使用自定义比较以您喜欢的任何方式处理空项目编号：

```
class Project {
    int? ID { get; set; }
}
...
Comparison<Project> comparison = delegate(Project x, Project y)
{
    int xkey = x.ID.HasValue ? x.ID.Value : int.MaxValue;
    int ykey = y.ID.HasValue ? y.ID.Value : int.MaxValue;
    return xkey.CompareTo(ykey);
};
list.Sort(comparison); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T00:48:11.927

这是一个非常简单的 LINQ 方法。虽然不确定运行时。

```
List<int?> pids = new List<int?>() { 2, 4, 3 };

List<Project> projects = new List<Project>() { 
    new Project(1), new Project(2), 
    new Project(3), new Project(4), 
    new Project(5), new Project(null) };

List<Project> sortedProjectsByPids = pids
    .Select(pid => projects.First(p => p.ID == pid))
    .ToList<Project>(); 
```

假设您的 Project 类如下所示：

```
class Project
{
    public int? ID;

    public Project(int? id)
    {
        ID = id;
    }
} 
```

希望这可以帮助！

# matlab - 在 MATLAB 中更改沿图形移动的点的速度

> ID：15909662
> 
> 赞同：1
> 
> 时间：2013-04-09T18:26:16.083
> 
> 标签：matlab, graph, velocity, marker

我在其他问题中使用了@Amro 提供的代码：

```
%# control animation speed
DELAY = 0.01;
numPoints = 600;

%# create data
x = linspace(0,10,numPoints);
y = log(x);

%# plot graph
figure('DoubleBuffer','on')                  %# no flickering
plot(x,y, 'LineWidth',2), grid on
xlabel('x'), ylabel('y'), title('y = log(x)')

%# create moving point + coords text
hLine = line('XData',x(1), 'YData',y(1), 'Color','r', ...
    'Marker','o', 'MarkerSize',6, 'LineWidth',2);
hTxt = text(x(1), y(1), sprintf('(%.3f,%.3f)',x(1),y(1)), ...
    'Color',[0.2 0.2 0.2], 'FontSize',8, ...
    'HorizontalAlignment','left', 'VerticalAlignment','top');

%# infinite loop
i = 1;                                       %# index
while true      
    %# update point & text
    set(hLine, 'XData',x(i), 'YData',y(i))   
    set(hTxt, 'Position',[x(i) y(i)], ...
        'String',sprintf('(%.3f,%.3f)',[x(i) y(i)]))        
    drawnow                                  %# force refresh
    %#pause(DELAY)                           %# slow down animation

    i = rem(i+1,numPoints)+1;                %# circular increment
    if ~ishandle(hLine), break; end          %# in case you close the figure
end 
```

但我需要改变标记的速度。我试过改变 DELAY 的值，但是没有用。关键是我不能改变numPoints（函数的大小），所以我不知道怎么做。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-21T15:37:33.400

只需取消注释无限循环中的暂停（延迟）。将 DELAY 更改为合适的值

# ruby-on-rails - 同一模型的 AssociationTypeMismatch

> ID：15909663
> 
> 赞同：11
> 
> 时间：2013-04-09T18:26:17.537
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2

# 摘要/错误

我在应用程序的不同位置收到此错误：

```
ActiveRecord::AssociationTypeMismatch in Settings::CompaniesController#show

Company(#70257861502120) expected, got Company(#70257861787700)

activerecord (3.2.11) lib/active_record/associations/association.rb:204:in `raise_on_type_mismatch'
activerecord (3.2.11) lib/active_record/associations/belongs_to_association.rb:6:in `replace'
activerecord (3.2.11) lib/active_record/associations/singular_association.rb:17:in `writer'
activerecord (3.2.11) lib/active_record/associations/builder/association.rb:51:in `block in define_writers'
activerecord (3.2.11) lib/active_record/attribute_assignment.rb:85:in `block in assign_attributes'
activerecord (3.2.11) lib/active_record/attribute_assignment.rb:78:in `each'
activerecord (3.2.11) lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
activerecord (3.2.11) lib/active_record/base.rb:497:in `initialize'
app/controllers/settings/companies_controller.rb:4:in `new'
app/controllers/settings/companies_controller.rb:4:in `show' 
```

# 控制器

控制器看起来像这样，但问题可能发生在使用 Company 模型保存或更新另一个模型的任何时候：

```
class Settings::CompaniesController < SettingsController
  def show
    @company = current_user.company
    @classification = Classification.new(company: @company)
  end

  def update
  end
end 
```

# 事实/观察

一些事实和观察：

*   该问题是随机发生的，但通常是在开发服务器运行一段时间之后。
*   生产中不会出现该问题。
*   即使我没有对`Company`模型进行任何更改，也会出现问题。
*   问题通过重新启动服务器解决。

# 理论

据我了解，这是由于类的动态加载。

不知何故，公司类在重新加载时获得了一个新的类标识符。我听说它是​​由于草率的要求。我在 Company 模型中没有自己的要求，但我确实使用了[active-record-postgres-hstore](https://github.com/engageis/activerecord-postgres-hstore)。

# 模型

这是`Company`模型：

```
class Company < ActiveRecord::Base
  serialize :preferences, ActiveRecord::Coders::Hstore
  DEFAULT_PREFERENCES = {
    require_review: false
  }
  has_many :users
  has_many :challenges
  has_many :ideas
  has_many :criteria
  has_many :classifications
  attr_accessible :contact_email, :contact_name, :contact_phone, :email, :logotype_id, :name, :phone, :classifications_attributes, :criteria_attributes, :preferences

  accepts_nested_attributes_for :criteria
  accepts_nested_attributes_for :classifications

  after_create :setup
  before_save :set_slug

  # Enables us to fetch the data from the preferences hash directly on the instance
  # Example:
  # company = Company.first
  # company.preferences[:foo] = "bar"
  # company.foo
  # > "bar"
  def method_missing(id, *args, &block)
    indifferent_prefs = HashWithIndifferentAccess.new(preferences)
    indifferent_defaults = HashWithIndifferentAccess.new(DEFAULT_PREFERENCES)
    if indifferent_prefs.has_key? id.to_s
      indifferent_prefs.fetch(id.to_s)
    elsif indifferent_defaults.has_key? id.to_s
      indifferent_defaults.fetch(id.to_s)
    else
      super
    end
  end

  private
  def setup
    DefaultClassification.find_each do |c|
      Classification.create_from_default(c, self)
    end

    DefaultCriterion.find_each do |c|
      Criterion.create_from_default(c, self)
    end
  end

  def set_slug
    self.slug = self.name.parameterize
  end
end 
```

分类模型：

```
class Classification < ActiveRecord::Base
  attr_accessible :description, :name, :company, :company_id
  has_many :ideas
  belongs_to :company

  def to_s
    name
  end
end 
```

# 实际问题

我真的很想知道为什么会出现这个问题，以及是否可以以某种方式避免它。

我知道这个例外原则上意味着什么。我想知道如何避免它。

特别是，我想知道我是否以某种方式引起了问题，或者它是否是 gem，在这种情况下，我是否可以以任何方式帮助修复 gem。

提前感谢您的任何回答。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-07-16T03:51:12.277

问题几乎可以肯定是因为您将这些类的副本序列化到缓存或会话中，然后再重新构建它们。这会导致问题，因为在开发模式下，类在每个请求上都未定义和重新定义，所以如果你有一个类的旧定义的编组副本，然后在 Rails 类卸载之前设法解组它，你将有两个具有相同名称的不同类。

异常从这里提出：[https ://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/associations/association.rb#L204-212](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/associations/association.rb#L204-212)

您可以在这里看到它正在做一些非常简单的事情 - 它正在测试`is_a?`传递给关联的类的实例中传递的对象。取消定义和重新定义一个类意味着如果你有一个类的旧副本，并将它与新版本的类进行比较，它不会通过集合。考虑这个例子：

```
class Foo; end
f = Foo.new

Object.send :remove_const, :Foo
class Foo; end

puts f.is_a? Foo
# => false 
```

这里发生的是，当我们取消定义和重新定义时`Foo`，它实际上创建了一个新对象（请记住，类是 Class 的实例！）。即使我们知道那`f`是 a `Foo`，但由于与 不同而`f.is_a? Foo`失败。检查给定对象的类是否与传递的类匹配，或者它是传递的类的子类 - 这里不是这种情况。它们具有相同的名称，但它们是不同的类。这是你的协会中发生的事情的核心。`f.class``Foo``is_a?`

在某些时候，您的`Classification`关联需要某个*版本*的`Company`，而您正在分配不同的版本。如果我不得不猜测，我会说您将整个用户记录存储在会话中。这将编组记录，包括关联的`Company`记录。该公司记录将在 Rails 重新加载其类*之前*由 Rack 解组，因此它可能最终成为与协会预期不同的类（具有相同名称）。流程类似于：

*   定义`Company`. 我们称它为 Company-1
*   加载用户及其关联的公司 (Company-1) 记录。
*   将整个交易保存到会话中。
*   刷新页面
*   在 Rack 的设置过程中，它将在会话中找到一条公司记录（附加到用户记录）并将其解组。这会将其解组为 Company-1（因为这是 Company 当前 Object#constants 的实例）
*   然后 Rails 将卸载所有模型常量并重新定义它们。在此过程中，它将重新定义公司（Company-2），并设置分类以期望在关联中出现 Company-2 记录。
*   您尝试将 Company-1 对象分配给期望 Company-2 对象的关联。错误被抛出，因为正如我们之前看到的，Company-1 的一个实例失败了`is_a? Company-2`。

解决方案是避免将整个编组的对象存储在会话或缓存中。相反，存储主键并对每个请求执行查找。这解决了这个特定问题，以及后期生产中可能不兼容的对象定义的问题（考虑在部署对对象结构进行重大更改的更改之前与编组对象存在会话的用户）。

一般来说，这可能是由任何可以在请求之间保留旧类引用的东西引起的。Marshal 是通常的嫌疑人，但某些类变量和全局变量也可以做到这一点。

如果 gem 可能会在某个地方存储类或全局变量中的类引用列表，那么它可能会这样做，但我的直觉是它在你的会话中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-08T11:33:16.160

我有一个`ActiveJob`在`async`模式下运行的开发环境，它将为给定模型排队一堆其他 ActiveJob。

所以基本上`FirstJob`会开始运行，并且对于它使用的每条记录，它都会启动一个`SecondJob`导致超过 25 个作业在同一进程中异步运行。这很快导致`ActiveRecord::AssociationTypeMismatch`甚至`A copy of Klass has been removed from the module tree but is still active`错误。

通过将 ActiveJob 队列适配器切换到`:inline`开发中，我消除了这个问题。

我创建了一个初始化程序：

```
if Rails.env.test?
  ActiveJob::Base.queue_adapter = :test
elsif Rails.env.development?
  ActiveJob::Base.queue_adapter = :inline
else
  ActiveJob::Base.queue_adapter = :sidekiq # or your preferred choice
end 
```

# facebook - 在 Facebook 上使用 Open Graph 共享来自 Wordpress 的 URL

> ID：15909665
> 
> 赞同：0
> 
> 时间：2013-04-09T18:26:28.583
> 
> 标签：facebook, wordpress, share

当我的站点 diipad.com 的 URL 被复制并粘贴或直接从我的站点共享时，facebook 不会处理该 URL，它只显示相同的 URL，我的意思是不会出现摘录和缩略图。

[但是如果我在http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)上粘贴相同的链接，它不会显示任何错误，并且它会处理 URL 我检查了我的 HTML 结构，没关系，元数据是包含在facebook wordpress 插件 Open Graph。

Plaese 我需要帮助对不起我的英语不好。

[这是错误的图像](https://lh4.googleusercontent.com/-e-RgccR-bBM/UV2mByCTViI/AAAAAAAAEhM/mHsY_0SQUy4/s526/Captura%2520de%2520pantalla%2520de%25202013-04-02%252013%253A23%253A48.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:54:16.637

仅仅因为 FB 调试器不会抱怨您的 HTML 代码，并不意味着它就在那里（它不会因为缺少标签而引发错误）。

WordPress 有许多 Open Graph 插件（只需在 wordpress.org 上搜索“Open Graph”即可查看）。您可能想尝试一下：[http ://wordpress.org/extend/plugins/nextgen-facebook/](http://wordpress.org/extend/plugins/nextgen-facebook/)

js。

# c# - 发送包含 html 表单的电子邮件

> ID：15909667
> 
> 赞同：2
> 
> 时间：2013-04-09T18:26:31.057
> 
> 标签：c#, .net, smtp, html-email

我试图用 C# 创建和发送一封电子邮件，包括一个 html 表单。GMail 似乎能够接受它（虽然我还没有测试 post 操作），但 Outlook（2007 和 2010）无法正确显示表单。

这是我编写的代码示例：

```
using (MailMessage mailmessage = new MailMessage())
{
  mailmessage.From = new MailAddress("noreply@dummy.com");
  mailmessage.To.Add("dummy@dummy.com");
  mailmessage.Subject = "Some subject";
  string html = @"
  <!DOCTYPE html>
  <html>
  <head>
  <meta charset='utf-8' />
  </head>
  <body>
  <form id='surveyForm' method='post' action='http://www.someserver.comsomeurl'>
  Survey<br /><br />
  Some question ?<br />
  <input type='radio' name='Q1' id='Q1_1' value='1' /><label for='Q1_1'>Yes</label><br />
  <input type='radio' name='Q1' id='Q1_2' value='2' /><label for='Q1_2'>No</label><br />
  Some other question ?<br />
  <input type='radio' name='Q2' id='Q2_1' value='1' /><label for='Q2_1'>Yes</label>     <br />
  <input type='radio' name='Q2' id='Q2_2' value='2' /><label for='Q2_2'>No</label><br />
  <input type='submit' value='Submit'>
  </form>
  </body>
  </html>";
  mailmessage.Body = "Some alternate text";
  using (AlternateView alternate = AlternateView.CreateAlternateViewFromString(html, Encoding.UTF8, MediaTypeNames.Text.Html))
  {
    mailmessage.AlternateViews.Add(alternate);
    SmtpClient smtp = new SmtpClient();
    smtp.Host = MyHost;
    smtp.Send(mailmessage)
  }
} 
```

在 GMail 中，电子邮件包含一个表单，但在 Outlook 中，我得到以下信息：

```
Survey

Some question ?
( )Yes
( )No
Some other question ?
( )Yes
( )No
[Submit] 
```

我尝试了以下变体：

```
mailmessage.IsBodyHtml = true;
mailmessage.BodyEncoding = Encoding.UTF8;
mailmessage.Body = html; 
```

但结果是一样的。

当我检查邮件的来源时，它对应于我生成的html。

我正在尝试做的事情是不可能的，还是有 Outlook（和其他电子邮件阅读器）支持的方法？

谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:06:22.813

与其编写自己的代码，不如尝试使用已经做过的东西。查看[http://nuget.org/packages/MvcMailer/](http://nuget.org/packages/MvcMailer/)或[http://nuget.org/packages/RazorEmail/](http://nuget.org/packages/RazorEmail/)。这个包应该为你完成这项工作。

# angularjs - 重新定义内置角度服务的最佳/最简单方法是什么？

> ID：15909668
> 
> 赞同：0
> 
> 时间：2013-04-09T18:26:33.173
> 
> 标签：angularjs, cors

在我们的应用程序中，我们正在发出跨域请求，因此我们必须使用 CORS。由于 IE 以非标准方式执行此操作，我们创建了自己的服务（它依赖于`$http`非 IE 请求）来为我们处理所有这些。这一切都在这个应用程序中正常工作。但是，我们有一些非应用特定的库代码需要发出请求。因此，如果我们的库代码中的这些服务只是使用`$http`，则请求将无法在需要执行 CORS 的应用程序中工作。但是，我们不希望这些服务注入我们的 CORS 服务，因为这会破坏不执行跨域请求的应用程序中的请求。

话虽如此，我的最终目标是让库代码注入并`$http`用于所有必要的请求。然后，在特定的应用程序中，它可以定义如何`$http`工作。我最初以为我可以重新定义`$http`. 像这样的东西：

```
angular.module("myCorsApp").provider("$http", function() {
    return {
        $get: function(CORShttpService) {
            return CORShttpService;
        }
    }
}); 
```

但是，这会导致以下错误：

```
Circular dependency: CORShttpService <- $http <- $compile 
```

我不确定我是否了解循环依赖的来源。是否`$compile`依赖于提供者或其他东西？

我真正的问题是我是否以正确的方式进行。如果没有循环依赖，我认为这将完全实现我想要的。我可以采取一些解决方法来完成这项工作吗？有没有更好/更正确的方法来做到这一点？

如果它有帮助，则`CORShttpService`具有以下依赖项：$q、$rootScope、$http、$timeout。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:02:28.813

在 Angular 文档中挖掘了一堆之后，我决定这里最好的方法是“装饰”`$http`服务。这是通过服务的[装饰器功能](http://docs.angularjs.org/api/AUTO.%24provide#decorator)完成的`$provide`。所以，我最终得到了这样的东西：

```
angular.module("myCorsApp").config(function($provide) {
    $provide.decorator("$http", ["$delegate", "$q", "$rootScope", "$timeout", function($http, $q, $rootScope, $timeout) {
        return function(requestConfig) {
            //CORS logic using $http (basically what was the CORShttpService)
        }
    }]);
}); 
```

# java - 无法绑定到客户端中的广播地址——Java/Scala

> ID：15909670
> 
> 赞同：0
> 
> 时间：2013-04-09T18:26:49.503
> 
> 标签：java, sockets, networking, udp, bind

我正在尝试编写一个简单的 UDP 心跳来广播到整个子网中给定端口上的所有侦听节点。

我在创建/绑定客户端 DatagramSocket 时遇到问题。我正在尝试这样的代码：

```
// My IP is 192.168.201.57, so I'm using 192.168.201.255 for broadcast.  Right?
val socket = new DatagramSocket(9099, InetAddress.getByName("192.168.201.255")) 
```

这产生了一个异常：java.net.BindException：无法分配请求的地址。

我也试过 255.255.255.255 得到相同的结果。还根据我在另一篇文章中读到的内容尝试了类似的方法：

```
val socket = new DatagramSocket(null)
socket.bind( new InetSocketAddress(broadcastIp, port) )  // where I tried several broadcastIp values 
```

这也给出了同样的例外。我还应该补充一点，我已经尝试了不同的端口值，并确保机器上没有其他任何东西正在使用我正在尝试的端口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:27:18.347

您无法绑定到广播地址。这个问题没有意义。您根本不需要绑定来发送，并且在大多数情况下，您应该绑定到 0.0.0.0 来接收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:33:34.433

这是我经常使用的代码：

```
public static final String HOST_DST = "148.140.60.29";
public static final int    PORT_DST = 2416;
public static final int    PORT_SRC = 2802;

void method() {
   DatagramSocket    sock    = new DatagramSocket( PORT_SRC );
   InetSocketAddress dst     = new InetSocketAddress( HOST_DST, PORT_DST );
   ByteBuffer        message = ByteBuffer.allocate( MESSAGE_SIZE );
   for(...) {
      message.clear();
      message.putFloat( ... );
      message.putInt( ... );
      ...
      message.flip();
      sock.send( new DatagramPacket( message.array(), message.limit(), dst ));
   }
} 
```

# java - 如何设置对话框按钮文本的字体大小

> ID：15909672
> 
> 赞同：16
> 
> 时间：2013-04-09T18:26:51.090
> 
> 标签：java, android, android-dialogfragment

我有一个 android 应用程序，它使用一些从 XML 布局膨胀的自定义对话框。对话框视图的内容来自 XML 布局，但实际的正负按钮是通过调用构建器的 setPositiveButton 和 setNegativeButton 方法添加的，所以我无法控制（或至少不知道如何控制）样式按钮本身。

从我的 LoginConfirmationDialog.java 文件中查看下面的 onCreateDialog 方法，该文件扩展了 DialogFragment。它基本上会弹出一个非常简单的对话框，要求确认谁正在登录（即“你是 Joe Schmoe 吗？”，带有是和否按钮）。

在这种情况下，XML 布局只有一个 TextView，为了简化操作（因为用户将是需要大文本和大按钮的粗大脏手指的建筑工人），我将 TextView 的字体设置得相当大。虽然这两个按钮的文本字体要小得多，而且由于它们不是我的布局的一部分，而是使用 setPositiveButton 和 setNegativeButton 方法添加的，我该如何控制字体大小？

```
@Override    
public Dialog onCreateDialog(Bundle savedInstanceState) {

    Bundle args = this.getArguments();

    String empName = args.getString("empName");         

    // Use the Builder class for convenient dialog construction        
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity()); 

    View view = getActivity().getLayoutInflater().inflate(R.layout.dialog_login_confirmation, null);

    TextView message = (TextView)view.findViewById(R.id.txtLoginConfirmationMessage);
    message.setText("Are you " + empName + "?");

    builder.setView(view);      

    builder.setPositiveButton("Yes", 
            new DialogInterface.OnClickListener() {                   
                public void onClick(DialogInterface dialog, int id) {
                    mListener.onEmpConfirmPositiveClick(LoginConfirmationDialog.this);
                }               
            });               
    builder.setNegativeButton("No", 
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    mListener.onEmpConfirmNegativeClick(LoginConfirmationDialog.this);
                }
            });  

    // Create the AlertDialog object and return it        
    return builder.create();    
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-09T18:52:05.910

而不是返回`builder.create()`，试试这个。 -

```
final AlertDialog alert = builder.create();
alert.setOnShowListener(new DialogInterface.OnShowListener() {
    @Override
    public void onShow(DialogInterface dialog) {
        Button btnPositive = alert.getButton(Dialog.BUTTON_POSITIVE);
        btnPositive.setTextSize(TEXT_SIZE);

        Button btnNegative = alert.getButton(Dialog.BUTTON_NEGATIVE);
        btnNegative.setTextSize(TEXT_SIZE);
    }
});

return alert; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-28T10:58:34.057

花了我一段时间来整合 Asok 的答案，因为我使用匿名内部类作为按钮，所以我需要处理按钮引用。这行得通。确保它在 messageDialog.show() 行之后：

```
messageDialog.show();
messageDialog.getButton(AlertDialog.BUTTON_POSITIVE).setTextSize(TypedValue.COMPLEX_UNIT_SP, 25.0f);
messageDialog.getButton(AlertDialog.BUTTON_NEUTRAL).setTextSize(TypedValue.COMPLEX_UNIT_SP, 25.0f); 
```

注意：建议使用 sp 作为文本大小的单位。与 px 不同，它与设备密度无关。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-02-24T19:23:21.757

你可以试试这个：

```
AlertDialog.Builder builder = new AlertDialog.Builder(CompQuestionsActivity.this);
builder.setMessage("Message");
builder.setPositiveButton("Yes", dialogClickListener);
builder.setNegativeButton("No", dialogClickListener);
AlertDialog alertDialog = builder.create();
alertDialog.show();

//For positive button:
Button button1 = alertDialog.findViewById(android.R.id.button1);
button1.setTextSize(25);
//For negative button:
Button button2 = alertDialog.findViewById(android.R.id.button2);
button2.setTextSize(25); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-09T19:00:59.447

既然您已经在为对话框使用 xml 文件，为什么不在布局中包含两个按钮并`onClick`在对话框创建中设置处理程序，这样的事情应该可以工作。我正在使用类似的东西。

这是一个简单的例子：

```
AlertDialog.Builder builder = new AlertDialog.Builder(getActivity()); 

View view = getActivity().getLayoutInflater().inflate(R.layout.dialog_login_confirmation, null);

TextView message = (TextView)view.findViewById(R.id.txtLoginConfirmationMessage);
message.setText("Are you " + empName + "?");

Button positiveBtn = (Button) view.findViewById(R.id.dialogButtonPositive);
    // Set size of button in relation to screen size
    positiveBtn.setTextSize(TypedValue.COMPLEX_UNIT_PX, (float) 25);
    positiveBtn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            mListener.onEmpConfirmPositiveClick(LoginConfirmationDialog.this);
        }
    });

Button negativeBtn = (Button) view.findViewById(R.id.dialogButtonNeg);
// Set size of button in relation to screen size
negativeBtn.setTextSize(TypedValue.COMPLEX_UNIT_PX, (float) 25);
negativeBtn.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        mListener.onEmpConfirmNegativeClick(LoginConfirmationDialog.this);
    }
});

builder.setView(view);
return builder.create(); 
```

* * *

我也非常喜欢使用以下设置文本大小，这允许不同的屏幕尺寸获得不同大小的文本（您可以使用该`float`值来满足您的需要）：

```
.setTextSize(TypedValue.COMPLEX_UNIT_PX, (float) 25); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-09T18:54:07.773

您应该查看以下答案：

[在 Dialog.java (Android src) 中使用了 ContextThemeWrapper。所以你可以复制这个想法并做点什么](https://stackoverflow.com/a/3870997/1773155)

您只需要更改以下代码行：

`<item name="android:textSize">10sp</item>`到您想要的尺寸。

并且不要忘记检查答案的评论。

祝你好运。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-12T04:42:10.137

我使用**setOnShowListener**尝试了许多设备。但它不适用于所有设备。最后，我决定最简单的方法是为您的 alertDialog 使用**主题**。

将此添加到样式文件中。

```
 <style name="MyAlertDialogTheme" parent="Theme.AppCompat.Light.Dialog.Alert">
    <item name="android:textSize">10sp</item>
</style> 
```

现在在您的 AlertDialog 中使用它

```
 val dialog = AlertDialog.Builder(requireActivity(),R.style.MyAlertDialogTheme) 
```

就这样。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-10T21:23:45.893

我的方法是获取按钮`onResume()`并在那里配置它们

```
public class LoginConfirmationDialog extends DialogFragment {

  @Override    
  public Dialog onCreateDialog(Bundle savedInstanceState) {
    // your code here remains unchanged
  }

  @Override
  public void onResume() {
    super.onResume();

    Button positiveButton = ((AlertDialog) getDialog()).getButton(AlertDialog.BUTTON_POSITIVE);
    positiveButton.setTextSize(TypedValue.COMPLEX_UNIT_SP, 20);

    Button negativeButton = ((AlertDialog) getDialog()).getButton(AlertDialog.BUTTON_NEGATIVE);
    negativeButton.setTextSize(TypedValue.COMPLEX_UNIT_SP, 20);
  }
} 
```

# php - 负strtotime

> ID：15909673
> 
> 赞同：0
> 
> 时间：2013-04-09T18:26:53.080
> 
> 标签：php

将欧洲/阿姆斯特丹作为时区。为什么：

```
strtotime("January 1, 1970 00:40:00'); 
```

返回

```
-1200 
```

我不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:30:01.630

因为，php 从`January 1, 1970 00:00:00`. 所以你从参考时间回来了，这就是可能的原因。所以 1200 将是

> ( - 60*40 (+/-) time_difference_in_your_timezone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:33:00.303

strtotime 函数将 strinf 日期解析为“转换为 Unix 时间戳（自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数）”。请参阅 php 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:42:59.867

-1200 是由您的时区引起的。strtotime 从 计算`January 1, 1970 00:00:00 UTC`。如果您计算从 UTC+1 到 UTC 的日期，那么您是在 1969 年 12 月 31 日 23:40:00 UTC。

# php - PHP文件在执行5秒后崩溃

> ID：15909676
> 
> 赞同：-1
> 
> 时间：2013-04-09T18:26:54.963
> 
> 标签：php, mysql, apache

我有一个 mysql 查询，它从数据库中返回电影列表。查询如下

```
$query = "SELECT * FROM `$tableName` WHERE `$columnName` >= '$stDate' and `$columnName` <= '$endDate' and `$columnName` != '0000-00-00' and `$columnName` != '1970-01-01' ORDER BY `$columnName` ASC;"; 
```

该查询运行良好，因为我使用 phpmyadmin 对其进行了测试

主要问题是它只返回大约 30 条记录。

如果没有。要返回的记录超过 30，然后 php 文件崩溃并且什么也不返回。

通过我对谷歌的研究，我发现 php.ini 中的这些设置需要更改。我进行了以下更改并重新启动了服务器。

```
max_input_time = 60;       to    max_input_time = 3600;
max_execution_time = 60;   to    max_input_time = 3600;
memory_limit = 64M;        to    memory_limit = 1024M; 
```

但这些改变并不能解决问题。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:37:30.657

如果不知道更多，很难知道。

看着你的查询让我想到了一些事情：

```
$query = "SELECT * FROM `$tableName` WHERE `$columnName` >= '$stDate' and `$columnName` <= '$endDate' and `$columnName` != '0000-00-00' and `$columnName` != '1970-01-01' ORDER BY `$columnName` ASC;"; 
```

**1.**使用 RESERVED KEYWORD NOT（或 IS NOT）代替 !=。

**2.**为什么`$columnName`!= '0000-00-00' 和`$columnName`!= '1970-01-01' ???

**3.**你不应该在查询的末尾使用分号。（如果您不在同一批次中添加查询）

请向我们提供整个代码，至少在哪里执行实际查询以及在其中输入什么值...

# c# - 如何在 C# 中自动转换变量？

> ID：15909677
> 
> 赞同：3
> 
> 时间：2013-04-09T18:26:57.777
> 
> 标签：c#, .net, vb.net

这是一个例子。

```
var tobeCasted = 1;
object data = null;

if (whatIsMyType == typeof(int)) {
    data = (int)tobeCasted;
}
else if (whatIsMyType == typeof(float)) {
    data = (float)tobeCasted;
} 
```

然而，上面的代码是手动检测每种数据类型的。我正在寻找如下的单行通用解决方案：

```
 data = (whatIsMyType)tobeCasted; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T18:32:10.000

使用[`Convert.ChangeType`](http://msdn.microsoft.com/library/system.convert.changetype.aspx)方法。该`Convert`课程的文档在这里；它包含许多用于运行时[类型强制](http://en.wikipedia.org/wiki/Type_coercion)的有用方法。

[http://msdn.microsoft.com/library/system.convert.aspx](http://msdn.microsoft.com/library/system.convert.aspx)

也就是说，如果可以的话，尽量避免这种情况。这种运行时类型可以被认为是不好的[代码气味](http://en.wikipedia.org/wiki/Code_smell)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-09T18:30:50.917

在这种特殊情况下，我认为您想要`Convert.ChangeType`：

```
object data = Convert.ChangeType(toBeCasted, whatIsMyType); 
```

当然，这仅适用于有限的类型集 - 但首先也是如此。如果您能告诉我们更多关于您正在尝试做的事情，那将会很有帮助。很可能有更好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T18:30:10.823

如果您将结果粘贴到 type 的变量中`Object`，请执行此操作。正如您现在所拥有的那样，您将转换为 int/float/whatever，然后转换为 Object。剪掉中间人。

```
var tobeCasted = 1;
object data = tobeCasted; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T18:27:06.557

您的示例太琐碎，无法理解您的真正需求，但也许像 TypeMapper 这样的东西更适合您的使用。

# perl - Perl 使用拆分或正则表达式提取 XML 标记属性

> ID：15909680
> 
> 赞同：0
> 
> 时间：2013-04-09T18:27:02.183
> 
> 标签：perl

我正在开发一个文件上传系统，该系统还解析上传的文件并根据上传的文件中的信息生成另一个文件。作为 XML 文件上传的文件。我只需要解析每个文件中的第一个 XML 标签，并且只需要获取标签中单个属性的值。

示例 XML：

```
<LAB title="lab title goes here">...</LAB> 
```

我正在寻找一种使用 Perl 拆分函数或使用 Regex 提取标题属性值的好方法。如果我能够在托管代码的服务器上安装 Perl 模块，我会使用 Perl XML 解析器，但是我没有这种能力。

此 XML 位于一个 XML 文件中，我正在打开该文件，然后尝试解析出属性值。我试过同时使用 Split 和 Regex 都没有运气。但是，我对 Perl 或正则表达式不是很熟悉。

到目前为止，这是我的代码的基本概述：

```
open(LAB, "<", "path-to-file-goes-here") or die "Unable to open lab.\n";
foreach my $line (<LAB>) {
    my @pieces = split(/"(.*)"/, $line);
    foreach my $piece (@pieces) {
        print "$piece\n";
    }
 } 
```

我尝试使用 split 单独匹配标题

```
/title/ 
```

或使用匹配 = 字符或 " 字符

```
/\=/ or /\"/ 
```

我也尝试过使用正则表达式做类似的事情，但也没有运气。我不确定我是否只是没有使用正确的表达式，或者使用拆分/正则表达式是否不可能。对此事的任何帮助将不胜感激，因为我承认我仍然是 Perl 的新手。如果此类问题已在其他地方得到解答，我深表歉意。我做了一些搜索，但找不到解决方案。大多数线程建议使用 XML 解析 Perl 模块，如果我有安装它们的权限，我会这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T18:34:14.430

“但我不能使用 CPAN”是一种让自己在 Perl 标签上被否决的快速方法（尽管不是我这样做）。即使您没有 root，也可以通过多种方式使用CPAN [。](http://www.perlmonks.org/?node_id=693828)事实上，即使您没有 root，您也可以拥有[自己的 Perl 。](http://perlbrew.pl)虽然我强烈推荐其中一些选项，但就目前而言，最简单的方法就是下载一些 Pure Perl 模块，并将它们包含在您的代码库中。[Mojolicious](http://mojolicio.us)有一个非常小但非常有用的 XML/DOM 解析器，称为[Mojo::DOM](http://metacpan.org/module/Mojo%3a%3aDOM)，它可能是此类过程的候选者。

# jquery - CMS Dynamic Accordion Menu w Active Parent 最终响应

> ID：15909681
> 
> 赞同：1
> 
> 时间：2013-04-09T18:27:08.560
> 
> 标签：jquery, dynamic, navigation, accordion, multi-level

**CMS Ruby 问题的背景故事**

好的，所以我的主要问题是我正在尝试完成一个移动优先的导航系统，它可以自行折叠。问题是导航是从在 ruby​​ on rails 上运行的内容管理系统脚本生成的。我不能编辑脚本，我们也不能用内容管理系统改变任何东西。（我在一所重点大学工作，所以有些事情是我无法控制的。）

**类似的概念**

[http://codepen.io/micahgodbolt/full/czwer](http://codepen.io/micahgodbolt/full/czwer)

**JS小提琴**

我为当前正在发生的事情和我正在尝试做的事情创建了一个 JS Fiddle。虽然这有点工作，但我希望能够分别打开每个并让它们保持打开或折叠。我对许多建议持开放态度，甚至对整个事情进行返工。

[http://jsfiddle.net/bC475/7/](http://jsfiddle.net/bC475/7/)

**HTML**

```
<nav class="menu twelvecol last">
<ul>
    <li><a href="#">Home</a>

    </li>
    <li> <a href="#">Graduate Students</a>

        <ul>
            <li> <a href="#">Graduate Research</a>

                <ul>
                    <li><a href="#">Departments</a>

                    </li>
                    <li><a href="#">Tertiary Page</a>

                    </li>
                </ul>
            </li>
            <li><a href="#">Graduate Programs</a>

            </li>
            <li><a href="#">Apply Now</a>

            </li>
        </ul>
    </li>
    <li> <a href="#">Primary Page Link</a>

        <ul>
            <li> <a href="#">Secondary Page Link</a>

                <ul>
                    <li><a href="#">Tertiary Page Link</a>

                    </li>
                    <li><a href="#">test a 2</a>

                    </li>
                </ul>
            </li>
            <li><a href="#">test b</a>

            </li>
        </ul>
    </li>
    <li> <a href="#">test 2</a>

        <ul>
            <li><a href="#">test 2 a</a>

            </li>
            <li><a href="#">test 2 b</a>

            </li>
            <li><a href="#">test 2 c</a>

            </li>
        </ul>
    </li>
</ul> 
```

**CSS**

```
nav span {
    background-image: url("http://webdesigntutsplus.s3.amazonaws.com/tuts/378_tessa/tessa-lt-dropdowns-21c7868/images/downArrow.png");
    background-repeat: no-repeat;
    background-position: right;
    border:none;
    display:block;
    float:right;
    height:20px;
    width:20px;
}
.bgchange {
    background:#333;
    color:#fff;
}
nav ul {
    list-style: none;
    border-top: 1px solid #efefef;
    margin: 42px 0px 0px 10px;
    font-size: 1.2em;
    letter-spacing: 2px;
}
/* line 211, ../scss/_main.scss */
 nav ul li {
    width: 100%;
    margin: 0;
}
/* line 214, ../scss/_main.scss */
 nav ul li a {
    display: block;
    padding: 12px 14px;
    font-weight: bold;
    color: #3b4a54;
    border-bottom: 1px solid #efefef;
    text-decoration: none;
}
/* line 221, ../scss/_main.scss */
 nav ul li a:hover {
    color: #252e35;
    background: rgba(153, 204, 255, 0.2);
    text-decoration: none;
}
/* line 225, ../scss/_main.scss */
 nav ul li a:active {
    color: #252e35;
    background: rgba(153, 204, 255, 0.1);
    text-decoration: none;
}
/* line 229, ../scss/_main.scss */
 nav ul li a:focus {
    color: #fff;
    background: rgba(153, 204, 255, 0.2);
    text-decoration: none;
    text-shadow: 1px 1px rgba(0, 0, 0, 0.6);
}
/* line 235, ../scss/_main.scss */
 nav ul ul {
    display:none;
    margin: 0 0 0 0;
    padding-bottom: 0;
    list-style-type: none;
    font-size: .8em;
    width: 100%;
    border: none;
}
/* line 242, ../scss/_main.scss */
 nav ul ul li a {
    padding: 7px 28px 7px 18px;
    font-weight: 500;
    border-bottom: none;
}
/* line 246, ../scss/_main.scss */
 nav ul ul li a:hover {
    background: rgba(66, 64, 62, 0.2);
    padding: 7px 28px 7px 18px;
    font-weight: 500;
    border-bottom: none;
}
/* line 251, ../scss/_main.scss */
 nav ul ul li a:active {
    background: rgba(66, 64, 62, 0.1);
    padding: 7px 28px 7px 18px;
    font-weight: 500;
    border-bottom: none;
}
/* line 256, ../scss/_main.scss */
 nav ul ul li a:focus {
    background: rgba(66, 64, 62, 0.2);
    color: #1f272c;
}
/* line 260, ../scss/_main.scss */
 nav ul ul ul {
    display:none;
    margin: 0;
    padding-bottom: 0;
    list-style-type: none;
    font-size: 1em;
    font-style: italic;
}
/* line 266, ../scss/_main.scss */
 nav ul ul ul li a {
    padding: 7px 28px 7px 35px;
    font-weight: normal;
    color: #5c6f7b;
    border-bottom: none;
}
/* line 271, ../scss/_main.scss */
 nav ul ul ul li a:hover {
    background: rgba(217, 84, 30, 0.2);
    padding: 7px 28px 7px 35px;
    font-weight: normal;
    border-bottom: none;
}
/* line 276, ../scss/_main.scss */
 nav ul ul ul li a:active {
    background: rgba(217, 84, 30, 0.1);
    padding: 7px 28px 7px 35px;
    font-weight: normal;
    border-bottom: none;
}
/* line 281, ../scss/_main.scss */
 nav ul ul ul li a:focus {
    background: rgba(217, 84, 30, 0.2);
    color: #1f272c;
} 
```

**查询**

```
$('nav li:has(ul)').prepend('<span class="toggleSwitch"><a href="#"> </a></span>');
$('nav li li:has(ul)').prepend('<span class="toggleSwitch"><a href="#"> </a></span>');

$("nav li span.toggleSwitch").click(function (event) {
    $('nav li > ul').slideToggle().end().siblings().hide('nav li li ul');
    event.stopPropagation();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:01:19.367

[http://jsfiddle.net/ddavisgraphics/JY433/2/](http://jsfiddle.net/ddavisgraphics/JY433/2/)

```
 // Navigation Accordion Jquery Mobile Solutions

// Creates an Icon and Btn To Toggle Sub Layers    
$('nav > ul > li:has(ul)').prepend('<i class="icon-plus-sign pull-right btnToggle"> </i>');
$('nav > ul > li > ul > li:has(ul)').prepend('<i class="icon-plus-sign pull-right btnToggle"> </i>');

// Adds Classes to the Various UL's For Control    
$('nav > ul').addClass('primary');
$('nav > ul > li > ul').addClass('secondary');
$('nav > ul > li > ul > li > ul').addClass('tertiary');

// Hides Sub Navigation UL by Class
$('.secondary').hide();
$('.tertiary').hide();

// Hides Sub Navigation UL by Class
$('.btnToggle').click(function() {
    $(this).siblings('ul').slideToggle('fast');

    // CSS Toggle to change Icon For Use 
    if ($(this).hasClass('actToggle')) {
        $(this).removeClass('actToggle'); 
      }
    else {
        $(this).addClass('actToggle');
     }
}); 
```

我已经解决了我遇到的问题，我相信还会有更多的问题出现，但我现在有了一个很好的开始。对于其他有同样问题的人，我已经对我所做的事情进行了修改。

基本上我的目标是按钮切换并添加各种 UL 的类。除了确保它们被隐藏并让我很好地了解如何定位特定区域之外，我并没有真正使用这些类。

然后我寻找兄弟姐妹来切换。UL 我使用的原始方法只会显示，也不会崩溃。然后我添加了如果 Else statemtn 添加了另一个更改减号和加号的类，希望添加一些用户体验和菜单切换的相关性。

# highcharts - HighCharts 实时更新 x 轴时移

> ID：15909684
> 
> 赞同：0
> 
> 时间：2013-04-09T18:27:11.837
> 
> 标签：highcharts

请参考这个例子 [实时HighChart](http://bit.ly/TA3FlP)

我有类似的方法，但我无法改变时间尺度。有人可以让我知道哪个语句或设置导致趋势随时间变化。我只是添加数据，但比例不会自动移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:48:36.000

您应该在 addPoint 函数中将 shift 设置为 true

[http://api.highcharts.com/highcharts#Series.addPoint()](http://api.highcharts.com/highcharts#Series.addPoint())

# python - 在python中分配列表中的每个第N个元素

> ID：15909688
> 
> 赞同：4
> 
> 时间：2013-04-09T18:27:22.077
> 
> 标签：python, list

我想将列表中的每个第 N 个元素设置为其他内容。

（就像[这个](https://stackoverflow.com/questions/14994140/how-do-you-make-every-other-integer-in-an-array-equal-to-0-in-matlab?rq=1)针对 Matlab 的问题一样。）

这是 N=2 的尝试：

```
>>> x=['#%d' % i for i in range(10)]
>>> x
['#0', '#1', '#2', '#3', '#4', '#5', '#6', '#7', '#8', '#9']
>>> x[0::2] = 'Hey!'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: attempt to assign sequence of size 4 to extended slice of size 5 
```

我怎样才能解决这个问题？切片似乎期望一个可迭代的，而不仅仅是一个值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T18:31:31.407

切片分配的右侧必须是适当长度的序列；Python 将`'Hey!'`其视为字符序列`'H', 'e', 'y', '!'`。

你可以很聪明地创建一个适当长度的序列：

```
x[::2] = ['Hey!'] * len(x[::2]) 
```

但是，最清晰的方法是`for`循环：

```
for i in range(0, len(x), 2):
    x[i] = 'Hey!' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:33:29.183

列表理解也可以：

```
x=['#%d' % i for i in range(10)]
['Hey!' if i%3 == 0 else b for  i,b in enumerate(x)] 
```

这显然是 n = 3。

# achartengine - 带有长图例的 AChartEngine Graph

> ID：15909690
> 
> 赞同：1
> 
> 时间：2013-04-09T18:27:22.793
> 
> 标签：achartengine

我有一个带有 4 行的 LineChart，它们的图例很长，所以我只能看到前两个...我试图放置一个 ScrollView，但它没有用。我能做些什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:35:18.907

一些想法：

*   缩短系列标题，以便您在图例中获得更短的内容。
*   增加图例高度`renderer.setLegendHeight();`
*   使图例自动调整大小`renderer.setFitLegend(true);`

# woocommerce - 如何正确格式化 woocommerce 订单电子邮件中自定义字段的输出

> ID：15909693
> 
> 赞同：1
> 
> 时间：2013-04-09T18:27:29.373
> 
> 标签：woocommerce

这一切都有效 - 除了电子邮件通知打印丑陋的字段名称 - 不是标签

```
// Hook in
add_filter( 'woocommerce_checkout_fields' , 'custom_override_checkout_fields' );

// Our hooked in function - $fields is passed via the filter!
function custom_override_checkout_fields( $fields ) {
 $fields['billing']['billing_extra_adult_member'] = array(
'label'     => __('2nd Adult Member', 'woocommerce'),
'placeholder'   => _x('Name', 'placeholder', 'woocommerce'),
'required'  => false,
'class'     => array('form-row-first'),
'clear'     => true
 );
 $fields['billing']['billing_extra_child_member1'] = array(
'label'     => __('1st Child Member', 'woocommerce'),
'placeholder'   => _x('Name', 'placeholder', 'woocommerce'),
'required'  => false,
'class'     => array('form-row-first'),
'clear'     => true
 );

return $fields;
}
/**
* Add the field to order
**/
function your_custom_field_function_name($order){
echo "<p><strong>Extra adult member:</strong> " .             
$order->order_custom_fields['_billing_extra_adult_member'][0] . "</p>";
}

add_action( 'woocommerce_admin_order_data_after_billing_address',    
'your_custom_field_function_name', 10, 1 );

/**
* Add the field to order emails
**/
add_filter('woocommerce_email_order_meta_keys',    
'my_custom_checkout_field_order_meta_keys');

function my_custom_checkout_field_order_meta_keys( $keys ) {
$keys[] = '_billing_extra_adult_member';
return $keys;
} 
```

电子邮件通知包含：

_billing_extra_adult_member：乔·斯诺

我想做这个：

额外成人会员：乔雪

有人帮忙吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-05-22T09:48:28.050

```
$keys['Extra adult member'] = '_billing_extra_adult_member'; 
```

# jquery - 带有最后一个元素的 jQuery 验证脚本中的错误？

> ID：15909696
> 
> 赞同：1
> 
> 时间：2013-04-09T18:27:41.313
> 
> 标签：jquery, jquery-validate

我正在努力使用 jQuery 验证脚本，其中我有一个需要许多元素的表单，它似乎忽略了最后一个 - 除非我在提交之前专注于它。我创建了一个更简单的示例，它复制了以下问题：

[http://jsfiddle.net/nzRqZ/](http://jsfiddle.net/nzRqZ/)

```
<form id="testForm">
    <label>Type:</label>
    Sample Text 1: <input type="text" class="required"/><br>
    Sample Text 2: <input type="text" class="required"/><br>
    <button type="button" id="submitButton">Submit</button>
</form>
$(document).ready(function() {
    var validator = $('#testForm').validate({

    });

    $("#submitButton").click(function() {
        if (validator.form()) {
            alert("Validation passed");
        } 
    });    
}); 
```

只需打开页面并立即按下提交按钮，您将看到它仅将验证错误放在第一个元素上。然后在第一个输入中输入一些内容，但不要触摸第二个并再次点击提交。它将通过验证！即使我对他们两个都有要求！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:40:54.290

这不是一个错误，只是记录了它需要 name 属性。但无论如何，每个输入都应该有一个唯一的名称。

为了使验证插件正常工作，每个输入都需要 name 属性。

```
<form id="commentForm">
     <label>1</label><input name="1" type="text" class="required"/><br/>
     <label>2</label><input name="2" type="text" class="required"/><br/>
     <label>3</label><input name="3" type="text" class="required"/><br/>
     <label>4</label><input name="4" type="text" class="required"/><br/>
     <button type="submit" id="submitButton">Submit</button>
</form> 
```

这是一个小提琴。

[http://jsfiddle.net/VbWLU/](http://jsfiddle.net/VbWLU/)

# python - Python，如何使用文件中的行作为字典中的键，使用下一行作为值？

> ID：15909699
> 
> 赞同：1
> 
> 时间：2013-04-09T18:27:58.870
> 
> 标签：python, file, dictionary

我有一个这样的文件：

```
 Ben
   0 1 5 2 0 1 0 1
   Tim
   3 2 1 5 4 0 0 1 
```

我想做一个看起来像这样的字典：

```
 {Ben: 0 1 5 2 0 1 0 1, Tim : 3 2 1 5 4 0 0 1} 
```

所以我在想类似的事情：

```
 for line in file:
       dict[line] = line + 1 
```

但是你不能遍历这样的文件，那我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T18:38:07.017

这可能是你想要的：

```
dict_data = {}
with open('data.txt') as f:
    for key in f:
        dict_data[key.strip()] = next(f).split()

print dict_data 
```

输出：

> {'蒂姆'：['3'，'2'，'1'，'5'，'4'，'0'，'0'，'1']，'本'：['0'，'1' ', '5', '2', '0', '1', '0', '1']}

### 讨论

*   for 循环假设每一行都是一个键，我们将读取循环体中的下一行
*   `key.strip()`将把 'Tim\n' 变成 'Tim'
*   `f.next()`读取并返回下一行——关键行之后的行
*   `f.next().split()`因此将该行拆分为一个列表
*   `dict_data[key.strip()] = ...`会做类似的事情：`dict_data['Tim'] = [ ... ]`

### 更新

*   感谢 Blckknght 的指点。我`f.next()`改为`next(f)`

### 更新 2

如果要将列表转换为整数列表而不是字符串，则不要：

```
 dict_data[key.strip()] = next(f).split() 
```

做这个：

```
 dict_data[key.strip()] = [int(i) for i in next(f).split()] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:33:56.687

```
state = 0
d = {}
for line in file:
    if state == 0:
        key = line.strip()
        state = 1
    elif state == 1:
        d[key] = line.split()
        state = 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T18:47:25.033

我认为最简单的方法是首先使用 加载整个文件`file.readlines()`，这会加载整个文件并返回行列表。然后你可以用理解创建你的字典：

```
lines = my_file.readlines()
my_dict = dict(lines[i:i+2] for i in range(0, len(lines), 2)) 
```

对于您的示例文件，这将给出`my_dict`内容：

```
{"Ben\n": "0 1 5 2 0 1 0 1\n", "Tim\n": "3 2 1 5 4 0 0 1\n"} 
```

另一种方法是使用一次`while`读取两行的循环：

```
my_dict = {}
while True:
    name = file.readline().strip()
    if not name: # detect the end of the file, where readline returns ""
        break
    numbers = [int(n) for n in file.readline().split()]
    my_dict[name] = numbers 
```

与早期版本中的理解相比，这种方法允许您轻松地对行进行一些处理，例如去除换行符并将数字行拆分为实际`int`对象列表。

示例文件的结果将是：

```
{"Ben": [0, 1, 5, 2, 0, 1, 0, 1], "Tim": [3, 2, 1, 5, 4, 0, 0, 1]} 
```

# eclipse - Spring 3.2 + Quartz 2.1.7 问题

> ID：15909703
> 
> 赞同：2
> 
> 时间：2013-04-09T18:28:06.297
> 
> 标签：eclipse, spring, quartz-scheduler

几天前我将石英从 1.8.6 更新到 2.1.7，从那以后我无法在本地启动 tomcat。总是出现以下错误：

```
java.lang.IncompatibleClassChangeError: class org.springframework.scheduling.quartz.SimpleTriggerBean has interface org.quartz.SimpleTrigger as super class
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2820)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1150)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1645)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2006)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1969)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1858)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1826)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1812)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1306)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:896)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:322)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5103)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:621)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450) 
```

但是我的代码或配置文件中没有“SimpleTriggerBean”。我正在使用 STS 3.2。谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:16:10.197

从 7.0.17 到 7.0.39 更新 tomcat 解决了这个问题。

# python - python从if语句和try-except调用自定义异常

> ID：15909709
> 
> 赞同：5
> 
> 时间：2013-04-09T18:28:13.783
> 
> 标签：python, exception, if-statement, error-handling, custom-exceptions

因此，我创建了一个自定义异常，我想以 2 种不同的方式调用它（if/else 语句和 try/except 语句）。这是自定义异常：

```
class CustomException(Exception):   
   def __init__(self, value=None, *args, **kwargs):
     self.parameter = value
     for key, value in kwargs.items():
         setattr(self, key, value)

     for key, value in self.__dict__.items():
         print "%s => %s" % ( key, value ) 

   def __str__(self):
     return repr(self.parameter) 
```

这是我想要实现自定义异常的方式：

```
try:
   if something:
       #make an error
       ;lsdfj
   else:
       raise CustomException('this is my custom message', file='somefile.txt', var2='something')
except Exception, e:
   raise CustomException(e) 
```

我相信我的问题有两个方面：

1：当块`NameError`中抛出的标准时`try/except`（由于`;lsdfj`），我想传递`CustomExceptions`一些额外的参数，如'file'，就像`if/else`实现一样；我该怎么做？

2：当引发自定义异常时（从 if/else 语句为假），CustomExceptions 类最终会被调用两次，因为我在 if/else 块中引发它，然后在该`except:`部分中再次引发它。我不知道如何解决这个问题。

因此，在上述情况下，我想在`if-statement`不为真时调用 CustomException，并且我想在代码块内抛出标准异常时调用它......但目前，`if something:`评估为假，然后`CustomException`将引发两次...

所以我希望在我的代码中单方面使用自定义异常来处理`if/else`条件和标准 python 异常......

我知道这个解释很复杂，但我不确定如何解释我所追求的......任何帮助将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T18:35:45.427

为了不引发两次异常，您应该仅将`try/except`块包裹在`if`statemnt 周围，如下所示：

```
if something:
   try:
       #make an error
       ;fdsfas
    except Exception, e:
        raise CustomException(e.message, file='somefile.txt', var2='something')
else:
    raise CustomException('this is my custom message', file='somefile.txt', var2='something') 
```

并且为了传递自定义异常一些参数，您必须像在`if/else`语句中所做的那样将这些参数提供给类的构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T18:51:54.897

您可以在`except`块中使用：

`if not isinstance(e, CustomException): raise CustomException(e)`

**编辑：**

A`sys.exc_info()`之前的`raise`里面`except`会成功移除异常源的回溯，即`NameError`.

# ios - -[NSDictionary initWithObjects:forKeys:]：对象数 (0) 与键数 (2) 不同

> ID：15909714
> 
> 赞同：2
> 
> 时间：2013-04-09T18:28:45.247
> 
> 标签：ios, objective-c, plist, nsdictionary

我得到的错误

-[NSDictionary initWithObjects:forKeys:]：对象数 (0) 与键数 (2) 不同'

这是我保存 plist 的代码。

```
 @interface setting : UIViewController{
    UIDatePicker *datePicker;
    IBOutlet UILabel * morningtime;
    UIDatePicker *afternoonpicker;
    NSString*morningtime1;
    NSString*afternoontime1;
     IBOutlet UILabel *afternoontime;
}
@property (nonatomic,retain) IBOutlet UIDatePicker *datePicker;
@property (strong, nonatomic) IBOutlet UIDatePicker *afternoonpicker;

@property (nonatomic, retain) IBOutlet NSString *morningtime1;

@property (nonatomic, retain) IBOutlet NSString *afternoontime1;
@property (nonatomic, retain) IBOutlet UILabel *morningtime;

@property (nonatomic, retain) IBOutlet UILabel *afternoontime;
@property (weak, nonatomic) IBOutlet UIButton *morning;

- (IBAction)savetext:(id)sender {
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Data.plist"];

    self.morningtime1 = morningtime.text;
    self.afternoontime1 = afternoontime.text;
    NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: morningtime1, afternoontime1, nil] forKeys:[NSArray arrayWithObjects: @"Morning", @"Afternoon", nil]];

    NSString *error = nil;
    // create NSData from dictionary
    NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];

    // check is plistData exists
    if(plistData)
    {
        // write plistData to our Data.plist file
        [plistData writeToFile:plistPath atomically:YES];
    }
    else
    {
        NSLog(@"Error in saveData: %@", error);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T18:32:03.403

`morningtime1`几乎可以肯定`nil`在这里，过早地结束了数组列表。

如果您在此处使用了新的数组字面量语法：

```
@[morningtime1, afternoontime1]; 
```

您会崩溃，因为将 nil 分配给`NSArray`元素是非法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:32:09.733

这一行：

```
NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: morningtime1, afternoontime1, nil] forKeys:[NSArray arrayWithObjects: @"Morning", @"Afternoon", nil]]; 
```

应该：

```
NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: self.morningtime1, self.afternoontime1, nil] forKeys:[NSArray arrayWithObjects: @"Morning", @"Afternoon", nil]]; 
```

换句话说，引用属性，而不是 ivars。正如您所拥有的，`morningtime1`永远不会设置 ivar（您设置的属性实际上是设置生成的 ivar named `_morningtime1`）。

边注：

摆脱`@synthesize`属性的任何显式 ivars 和行。这将避免这种混乱。

# xml - 解析 Youtube XML

> ID：15909715
> 
> 赞同：0
> 
> 时间：2013-04-09T18:28:46.617
> 
> 标签：xml, asp-classic, youtube

我正在使用一种基本方法来解析一些 Youtube XML 数据：

这是来自 Youtube 的示例 XML 文件：http: [//jimpix.co.uk/youtube.xml](http://jimpix.co.uk/youtube.xml)

我将它保存为 XML，因为 XML 文件比来自 Youtube 的标准 Youtube 版本更容易查看（[请参阅此处](http://gdata.youtube.com/feeds/api/videos/9TN3VtWwks4)）

这是我用来提取视频 ID 和标题的基本代码：

```
Dim vurl = "http://jimpix.co.uk/youtube.xml"
Set http = Server.CreateObject("msxml2.ServerXMLHTTP")
http.Open "GET", vurl, False
http.Send

Set dom = http.responseXML
Set items = dom.getElementsByTagName("entry")

For Each item In items

Set id = item.getElementsByTagName("name")
If NOT (id IS Nothing) Then 
    var_id = id(0).Text
End If

response.write "<hr>var_id: "&var_id&"</hr>"

Set title = item.getElementsByTagName("title")
If NOT (title IS Nothing) Then 
    var_title = title(0).Text
End If

response.write "<hr>var_title: "&var_title&"</hr>"  
Next 
```

我一直在尝试获取视频持续时间、缩略图和播放次数，因为它们没有保存在 ID 和标题等简单标签中。

例如，ID 和标题如下所示：

```
<entry...>
    <id>http://gdata.youtube.com/feeds/api/videos/9TN3VtWwks4</id>
    ...
    <title type="text">
    Sign Language - Multi-Award Winning short film - Director's Cut
    </title>
</entry> 
```

但持续时间、缩略图和播放次数更难获得：

```
<entry...>
    <media:group>
        <media:thumbnail url="http://i.ytimg.com/vi/9TN3VtWwks4/0.jpg" height="360" width="480" time="00:02:28.500"/>
        <yt:duration seconds="297"/>
        <yt:statistics favoriteCount="0" viewCount="198826"/>
    </media:group>
</entry> 
```

我想知道是否可以就如何从 XML 中提取这 3 个变量征求意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:55:07.430

你可以得到像这样的缩略图：

```
<%
    set thumbnails = dom.getElementsByTagName("entry/media:group/media:thumbnail")

    if not(thumbnails is Nothing) then
    for each pic in thumbnails
        Response.write "<hr>thumbnail: "&pic.getAttribute("url")&"</hr>"  
    next
    end if
%> 
```

# groovy - Groovy 中的抛出/捕获异常

> ID：15909716
> 
> 赞同：2
> 
> 时间：2013-04-09T18:28:47.720
> 
> 标签：groovy, spock

我是 Groovy 的新手，正在尝试在我的应用程序中实现 Spock 框架。这是我的测试代码：

```
def "Test class with mock object"()  {

        setup:
        SomeObject sp = Mock()
        test= TestClass()

        when:
        System.out.println('comes here');
        push.exec(sp)

        then:
        sp.length == 1

    } 
```

这`TestClass`是抛出一些异常，我必须在测试方法中捕获或再次抛出它。我试过

```
try {

  push.exec(sp)
} catch (Exception e) {

} 
```

但仍然得到

```
groovy.lang.MissingMethodException: No signature of method: test.spock.TestClassTest.TestClass() is applicable for argument types: () values: []
Possible solutions: use([Ljava.lang.Object;), use(java.util.List, groovy.lang.Closure), use(java.lang.Class, groovy.lang.Closure), dump(), with(groovy.lang.Closure), each(groovy.lang.Closure) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T18:53:58.633

而不是`test = TestClass()`，它应该是`test = new TestClass()`。要测试预期的异常，请使用`Specification.thrown`try-catch 代替。有关示例，请参阅 Spock 的[Javadoc 。](http://spockframework.github.io/spock/javadoc/latest/spock/lang/Specification.html#thrown%28java.lang.Class%29)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-30T10:49:17.697

这是在 Spock 中处理异常的正确方法：

```
def "Test class with mock object"()  {

    setup:
    SomeObject sp = Mock()
    test= TestClass()

    when:
    System.out.println('comes here');
    push.exec(sp)

    then:
    thrown(YourExceptionClass)
    sp.length == 1

} 
```

或者，如果您想检查异常中的某些数据，您可以使用以下内容：

```
 then:
    YourExceptionClass e = thrown()
    e.cause == null 
```

# apache - apache2 与 httpd 相同

> ID：15909717
> 
> 赞同：0
> 
> 时间：2013-04-09T18:28:50.750
> 
> 标签：apache, apache2

1.  我已经`apache2`使用`apt-get`into安装了`/etc/apache2`。
2.  后来我手动编译安装`httpd2.4`到`/usr/local/apache2/`.

我看过这样的帖子：[我的 httpd.conf 是空](https://stackoverflow.com/questions/11687125/my-httpd-conf-is-empty)的，它说基本上`apache2.conf`是在当前使用中，而`httpd.conf`由于历史原因而被保留。

在安装之前`httpd`，`apache2`工作正常。

所以我的问题：

`Apache2`和`httpd`是一回事吗？

# calendar - 当 rrule 具有 BYDAY &&（COUNT 或 UNTIL）时更新日历失败

> ID：15909720
> 
> 赞同：0
> 
> 时间：2013-04-09T18:28:58.483
> 
> 标签：calendar, icalendar, darwin, rrule

我在我的网站中使用 ical 和 darwin。当我使用 rrule 创建一个事件时，当事件有 byday 和 count 时它失败了。例如：成功 1（每周且不计）：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//ZHAOXI//iCalendar 1.0.0//
BEGIN:VEVENT
UID:20130410T020715CST-05076UU95w@ZHAOXI
DTSTAMP:20130409T180715Z
CLASS:PUBLIC
DTSTART:20130411T110000
DTEND:20130411T150000
ORGANIZER;SCHEDULE-AGENT=NONE;SCHEDULE-STATUS=5.3:MAILTO:user_3@zhaoxi.me
RRULE:FREQ=WEEKLY;BYDAY=TH,SA
SEQUENCE:0
SUMMARY:ssssss
X-ZX-RESPONSE:Y
END:VEVENT
BEGIN:VEVENT
UID:20130410T020715CST-05076UU95w@ZHAOXI
DTSTAMP:20130409T180718Z
CLASS:PUBLIC
DTSTART:20130413T130000
DTEND:20130413T170000
ORGANIZER:MAILTO:user_3@zhaoxi.me
RECURRENCE-ID:20130413T110000
SEQUENCE:1
SUMMARY:ssssss
X-ZX-RESPONSE:Y
END:VEVENT
END:VCALENDAR 
```

成功2（每天计数）：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//ZHAOXI//iCalendar 1.0.0//
BEGIN:VEVENT
UID:20130410T021754CST-68882mJ5aU@ZHAOXI
DTSTAMP:20130409T181754Z
CLASS:PUBLIC
DTSTART:20130416T173000
DTEND:20130416T200000
ORGANIZER;SCHEDULE-AGENT=NONE;SCHEDULE-STATUS=5.3:MAILTO:user_3@zhaoxi.me
RRULE:FREQ=DAILY;COUNT=10
SEQUENCE:0
SUMMARY:sdf
X-ZX-RESPONSE:Y
END:VEVENT
BEGIN:VEVENT
UID:20130410T021754CST-68882mJ5aU@ZHAOXI
DTSTAMP:20130409T181805Z
CLASS:PUBLIC
DTSTART:20130417T190000
DTEND:20130417T213000
ORGANIZER:MAILTO:user_3@zhaoxi.me
RECURRENCE-ID:20130417T173000
SEQUENCE:1
SUMMARY:sdf
X-ZX-RESPONSE:Y
END:VEVENT
BEGIN:VEVENT
UID:20130410T021754CST-68882mJ5aU@ZHAOXI
DTSTAMP:20130409T181850Z
CLASS:PUBLIC
DTSTART:20130419T183000
DTEND:20130419T210000
ORGANIZER:MAILTO:user_3@zhaoxi.me
RECURRENCE-ID:20130419T173000
SEQUENCE:1
SUMMARY:sdf
X-ZX-RESPONSE:Y
END:VEVENT
END:VCALENDAR 
```

失败1：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//ZHAOXI//iCalendar 1.0.0//
BEGIN:VEVENT
UID:20130410T015311CST-3605lc7xEv@ZHAOXI
DTSTAMP:20130409T175311Z
CLASS:PUBLIC
DTSTART:20130411T050000
DTEND:20130411T083000
ORGANIZER;SCHEDULE-AGENT=NONE;SCHEDULE-STATUS=5.3:MAILTO:user_3@zhaoxi.me
RRULE:FREQ=WEEKLY;UNTIL=20130420T050000Z;BYDAY=TH,SA
SEQUENCE:0
SUMMARY:dddddddd
X-ZX-RESPONSE:Y
END:VEVENT
BEGIN:VEVENT
UID:20130410T015311CST-3605lc7xEv@ZHAOXI
DTSTAMP:20130409T180755Z
CLASS:PUBLIC
DTSTART:20130413T070000
DTEND:20130413T103000
ORGANIZER:MAILTO:user_3@zhaoxi.me
RECURRENCE-ID:20130413T053000
SEQUENCE:1
SUMMARY:dddddddd
X-ZX-RESPONSE:Y
END:VEVENT
END:VCALENDAR 
```

我认为差异是规则，但我找不到原因~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:53:55.210

您的主组件有

DTSTART:20130411T050000

但你的例外有

重复 ID：20130413T053000

重复 ID 应始终匹配事件的（扩展）实例之一。日期部分是正确的（20130413 是第一个实例之后的星期六），但是当第一个实例显示的时间部分为 050000 时，时间部分为 053000。

换句话说，您的重复 ID 应该是：

重复 ID：20130413T050000

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:22:18.550

您的规则没有任何问题，但是 RFC5545 §3.8.4.7 指定 `"UID" itself MUST be a globally unique identifier`并且在您的所有 3 个 icalendar 文件中您使用的是相同的 UID。您是否尝试过使用不同 UID 的每个事件来查看服务器如何处理它？

# java - 向鼠标方向射击

> ID：15909724
> 
> 赞同：1
> 
> 时间：2013-04-09T18:29:15.157
> 
> 标签：java, mouse, slick2d

## 问题：

我有这个“射击”课程。在代码中，目标变量是 mouseX 和 mouseY。所以当我点击鼠标按钮时，我的玩家类将创建一个新的镜头对象。但拍摄不准确。如何计算正确的 dx 和 dy？

如果我将 dx 和 dy 添加到“子弹的”x 和 y，子弹将移动到鼠标的方向。这就是我想要的。创建对象时，鼠标位置存储在 targetX 和 targetY 中。这就是椭圆想要达到的点。

**链接：**

> [***游戏（完）***](https://www.dropbox.com/s/dhvf5vbqj25sgyw/game.jar)

**代码（来自 Shot.java）：**

```
public class Shot extends Entity {
    private float targetX, targetY;

    public Shot(World world, float x, float y, int width, int height, Color color, float targetX, float targetY) {
        super(world, x, y, width, height, color);
        this.targetX = targetX;
        this.targetY = targetY;
    }

    @Override
    public void render(GameContainer gc, Graphics g, Camera camera) {
        g.setColor(color);
        g.fillOval(x - camera.getX(), y - camera.getY(), width, height);
    }

    @Override
    public void update(GameContainer gc, int delta) {
        float dx = targetX - x;
        float dy = targetY - y;

        x += dx * delta * .001f;
        y += dy * delta * .001f;
    }
} 
```

**我试过这个，但还是不行：**

```
@Override
    public void update(GameContainer gc, int delta) {
        float length = (float) Math.sqrt((targetX - x) * (targetX - x) + (targetY - y) * (targetY - y));

        double dx = (targetX - x) / length * delta;
        double dy = (targetY - y) / length * delta;

        x += dx;
        y += dy;
    } 
```

**我做到了！这是我的解决方案：**
问题是，目标是窗口的鼠标位置，而不是世界的鼠标位置。

这就是我计算世界鼠标位置的方式：

```
float mouseWorldX = x + (mouseX - screen_width / 2); // x = player's x position
float mouseWorldY = y + (mouseY - screen_height / 2); // y = player's y position 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:55:32.483

这是我目前游戏中的代码，用于在按下鼠标右键时将单位移动到鼠标：

```
length = Math.sqrt((target_X - player_X)*(target_X - player_X) + (target_Y - player_Y)*(target_Y - player_Y)); //calculates the distance between the two points

speed_X = (target_X - player_X) /length * player_Speed;

speed_Y = (target_Y - player_Y) /length * player_Speed; 
```

这将以设定的速度将对象移动到一条直线上的目标。

编辑：这是我游戏中的实际代码

```
if(input.isMouseButtonDown(Input.MOUSE_RIGHT_BUTTON))
    {
        length = (float) Math.sqrt((player_waypoint_X - player_X)*(player_waypoint_X - player_X) + (player_waypoint_Y - player_Y)*(player_waypoint_Y - player_Y));
        velocityX = (float) (player_waypoint_X - player_X) /length * (float) PlayerStats.player.db_player_Speed;
        velocityY = (float) (player_waypoint_Y - player_Y) /length * (float) PlayerStats.player.db_player_Speed; 

        player_waypoint_X = input.getMouseX() - 2;
        player_waypoint_Y = input.getMouseY() - 2;

    } 
```

出于测试目的，速度与长度一起在 init 方法中定义。每次按下鼠标右键，航点的 X 和 Y 都会更改为鼠标位置。

我从这个问题 [速度计算算法](https://stackoverflow.com/questions/6456414/velocity-calculation-algorithm)中学到了这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-14T00:31:51.213

为了使子弹不会在每次射击时都改变方向，请创建一个数组列表，以便每个发射的子弹都有自己的 x 和 y 速度

# android - 在 Android 中设置 ListView 时，编辑文本和文本视图不可见

> ID：15909725
> 
> 赞同：1
> 
> 时间：2013-04-09T18:29:21.557
> 
> 标签：android, listview, xml-layout

这是我的 Android 应用程序的 xml 布局（我在其中显示我的所有联系人）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">

   <TextView
       android:id="@+id/android:empty"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:layout_marginLeft="5dip"
       android:layout_marginTop="5dip"
       android:text="Scegli il contatto:"
         />

   <EditText 
       android:id="@+id/editTextSend"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"/>

   <ListView
       android:id="@+id/android:list"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content" >
   </ListView>

</LinearLayout> 
```

我使用自定义适配器填充 ListView。但是 textView 和 Edit Text 是不可见的。我想特别显示编辑文本，用户可以在其中写下他的联系人姓名的首字母）建议让他们可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:52:39.563

> 我填写 ListView ...但 textView 和 Edit Text 不可见。

如果您只能看到 ListView ，那么您似乎正在使用 ListActivity 并忘记调用`setContentView()`. 所以你实际上并没有使用你的布局......你只看到 ListActivity 的默认 ListView。

* * *

也就是说，您的 XML 代码可以工作，但这里有一些简短的说明：

1.  正如我在评论中所说，TextView 可能会被隐藏，具体取决于您使用的 Activity 或 Fragment 类型：

    *   一个ListActivity会自动绑定`@+id/android:empty`和`@+id/android:list`Views，所以只有ListView为空的时候才会显示“空”的TextView。
    *   Activity 无法`@+id/android:empty`自行识别。所有视图都应该是可见的。
2.  `fill_parent`已弃用，只需使用`match_parent`
3.  设置 ListView 的高度以`wrap_content`强制适配器多次绘制 ListView ...我建议使用您的布局`match_parent`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T18:32:49.603

我会说您**的**布局可以很好地看到它。但无论如何，我会让 listview 以这种方式声明：

```
<ListView
   android:id="@+id/android:list"
   android:layout_width="fill_parent"
   android:layout_height="0dp"
   android:layout_weight="1" > 
```

所以它将占用所有**剩余**的可用空间

# sql - 如何在 Oracle 中使用 REGEXP 选择某个位置后的所有内容

> ID：15909728
> 
> 赞同：0
> 
> 时间：2013-04-09T18:29:29.850
> 
> 标签：sql, oracle11g, xregexp

我正在使用 Oracle 11G，并且我有以下字符串： `I - Am in- Need Help- Please`并且想使用该`-`字符解析字符串，然后选择第二个对象之后的所有内容。我一直在玩`REGEXP_REPLACE`，`SUBSTR`我可以选择第二个对象，但似乎无法选择第二个对象之后的所有内容。我知道我需要在我认为的某个地方添加一个 *，但我似乎无法获得正确的语法。任何帮助将不胜感激。

```
SELECT REGEXP_SUBSTR ('I - Am in- Need of Help- Please', '[^-]+' , 1, 2) 
  FROM DUAL; 
```

上面的查询返回第二个对象“我在”，但我希望这个返回“需要帮助-请”。同样重要的是要注意，我也不希望`-`字符直接跟随结果中的第二个对象，但我想从第三个对象开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:37:21.437

由于`[^-]`只会匹配非连字符，因此您的匹配组将在第一个连字符之后开始，然后在下一个连字符之前停止。要捕获第一个连字符后的所有内容，请尝试：

```
 SELECT REGEXP_REPLACE(REGEXP_SUBSTR ('I - Am in- Need of Help- Please', '-.+' , 1), '-', '', 1, 1) FROM DUAL; 
```

# synchronization - WP8 中的后台代理同步

> ID：15909731
> 
> 赞同：1
> 
> 时间：2013-04-09T18:29:35.937
> 
> 标签：synchronization, background-agent

我需要在前台（单元测试）和后台代理之间共享一个 IsolatedStorage 文件。

我有类似于以下的代码：

前景：

```
private Mutex _mut = new Mutex(false, “backgroundShare”);

private Task WriteToFile()
{
 ……….
    _mut.WaitOne(100);

    try{
       // open and write to the file “sharedFile.del” here, then close and dispose the writer and the stream…
    }
    finally
    {
         _mut.ReleaseMutex();
    }
 } 
```

后台任务：

```
private Mutex _mut = new Mutex(true, “backgroundShare”);

private void ReadFile()
{
    …………………….
    _mut.WaitOne(15);

    try{
         //folder.GetFileAsync(“sharedFile.del”); 
          ……
    }
    finally 
    {
        _mut.ReleaseMutex();
    }
} 
```

此代码是根据我为 WP7.x 找到的 StackOverflow 帖子。此代码对 WP8 有效吗？

此外，当我运行我的单元测试（前台应用程序）时，它有时会给我这个错误：

System.AggregateException：发生一个或多个错误。---> System.Exception：从未同步的代码块调用了对象同步方法。结果 StackTrace：
在 System.Threading.Mutex.ReleaseMutex()

虽然有时它通过但后台任务没有获得共享文件。GetFileAsync 调用导致后台代理杀死自己（至少这是我在调试器中看到的）。其他时候，它工作正常！

单元测试结构如下：

// 在此处写入共享文件 WriteToFile(); …… ScheduledActionService.LaunchForTest(MaintenanceTaskName, TimeSpan.FromMilliseconds(10)); …….. //检查后台任务是否真的读取了文件并在这里​​做了正确的事情……</p>

你认为这有什么问题？为什么它始终无法正常工作？任何建议都非常感谢！非常感谢！

# python - 使用 Python-RQ 检查之前的结果是否已经存在

> ID：15909733
> 
> 赞同：1
> 
> 时间：2013-04-09T18:29:38.297
> 
> 标签：python, caching, redis, python-rq

我正在使用[Python-RQ](http://python-rq.org/)创建一个工作，当你创建一个工作时你会得到一个 job.id：

`f311ae30-b623-4b38-9dcb-0edd0133a6e6`

然后我用那个id来检查结果是否完成，这很好。

然后将此结果缓存（500 秒）。

现在，这就是我感到困惑的地方。

当另一个请求在 500 秒的时间范围内以相同的输入集出现时：

```
{'blah': u'123456', 'title': u' Some Title', 'variable': 123} 
```

如何取回该作业的缓存结果与创建另一个作业。

我的问题是 job.id 是一些哈希，包括时间戳等，所以我不确定如何在 redis 中查找结果。

我到处搜索过，但没有在任何地方看到此文档，以便在不创建新作业的情况下利用缓存结果的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:45:20.890

我想出了一个可能对其他人有帮助的解决方案。

基本上，创建一个输入摘要（给 RQ 工作人员），这样我们就可以在另一个相同的请求进来时进行查找，这将是哈希名称。键是'job_key'，值是我们需要的job.id。

当另一个请求与之前处理的请求相同时，我们现在可以找到并提供结果，而无需再次执行相同的工作。

此外，作为故障保险，为作业增加了一些额外的秒数，因此当另一个函数请求缓存的 job.result 时，它仍然存在并且不会在调用之间被垃圾收集器删除。

*请求，如果有人有一些见解，如果有更好的方法来处理内存消耗的哈希 - > job.id（键，值），类似于[这个](http://redis.io/topics/memory-optimization)和[这个](http://instagram-engineering.tumblr.com/post/12202313862/storing-hundreds-of-millions-of-simple-key-value-pairs)请让我知道。（这两个链接指的是如何使用散列与常规字符串使用更少的内存来使用某种算法以某种方式存储键/值，以使每个散列具有 100 个键/值）。

关于好东西：

```
# Seconds before cached records expire
cache_expire = 500

# Create hash of parameters, to use as a lookup for job.id (cache)
hash = hashlib.sha1()
for param in search:
    hash.update(str(search[param]))
url_hash = 'url:{0}'.format(hash.hexdigest())

# Check if we have a cached result, need old job_key
job_key = r.hget(url_hash, 'job_key')
if job_key:
    job_hash = 'rq:job:{0}'.format(job_key)
    ttl = r.ttl(job_hash)
    if ttl:
        # Add 30 more seconds of buffer room
        # to ensure job.result doesn't get deleted pre-maturely
        r.expire(job_hash, ttl+30)
        return jsonify(search_id=job_key)
    else:
        # Job result has already been deleted, clear lookup hash
        r.delete(url_hash)

# Create new job
job = q.enqueue_call(func=worker.search, args=(search,), result_ttl=cache_expire)
# Create job.id lookup using hash as key (for cache)
if r.hsetnx(url_hash, 'job_key', job.id):
    r.expire(url_hash, cache_expire)

return jsonify(search_id=job.id) 
```

# java - 使用递归 Java 反转行

> ID：15909734
> 
> 赞同：0
> 
> 时间：2013-04-09T18:29:38.627
> 
> 标签：java, recursion, reverse

我只是想反转从输入中收到的行，但是每次运行代码时， output.txt 文件都是空的。我错过了什么？它对我来说似乎大部分都是正确的，甚至是递归段落。

谢谢

```
import java.io.BufferedReader; 
import java.io.FileReader;
import java.io.FileWriter; 
import java.io.PrintWriter;

public class ReverseLines { 

  public static BufferedReader input;
  public static PrintWriter output;

  public static void main(String[] args) throws Exception{

    input = new BufferedReader(new FileReader(args[0]));
    output = new PrintWriter(new FileWriter(args[1]));
    reverse(input, output);

  }

  public static void reverse( BufferedReader input, PrintWriter output)
         throws Exception { 

    String line = input.readLine();
    if(line != null) {
    reverse (input, output);
    output.println(line);
    }    

  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:30:34.320

`PrintWriter`在您的`main`方法中关闭：

```
output.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:32:19.260

做`output.flush()`并检查它是否有效！

# mysql - 在 mySQL 中加入 6 个表时的数据库设计和查询优化/一般效率

> ID：15909739
> 
> 赞同：0
> 
> 时间：2013-04-09T18:29:45.207
> 
> 标签：mysql, database, database-design, join, query-optimization

我有 6 张桌子。对于此示例，这些已被简化。

```
user_items

ID | user_id | item_name | version
-------------------------------------
1  | 123     | test      | 1

data

ID | name | version | info
----------------------------
1  | test | 1       | info

data_emails

ID | name | version | email_id
------------------------
1  | test | 1       | 1
2  | test | 1       | 2

emails

ID | email
-------------------
1  | email@address.com
2  | second@email.com

data_ips

ID | name | version | ip_id
----------------------------
1  | test | 1       | 1
2  | test | 1       | 2

ips

ID | ip
--------
1  | 1.2.3.4
2  | 2.3.4.5 
```

我希望实现的目标如下。

用户 (123) 拥有名为“test”的项目。这是给定条目所需的基本信息。

我们的“数据”表中有数据，当前版本为 1，因此我们的 user_items 表中的版本也是 1。这两个表通过名称和版本链接在一起。设置是这样的，因为用户可能有一个我们没有数据的项目，同样可能有一个我们有数据但没有用户拥有的项目..

对于每个项目，还有 0 个或多个相关联的电子邮件和 ips。对于许多项目，这些可能是相同的，因此我们有 data_emails 和 data_ips 表，它们根据 email_id/ip_id 和相应的 ID 列分别链接到 emails 和 ips 表，而不是一遍又一遍地复制实际的 email varchar。

emails 和 ips 通过项目名称和版本号再次与数据版本相关联。

**我的第一个查询是这是一个很好/优化良好的数据库设置吗？**

我的下一个查询和主要问题是加入这个复杂的数据结构。

我所拥有的是：

```
PHP
- get all the user items
- loop through them and get the most recent data entry (if any)
- if there is one get the respective emails
- get the respective ips 
```

根据用户项目的数量，这算作 3 个查询还是基本上无限？

我相信上述方法效率低下，因此我想将我的设置压缩为使用一个查询来获取相同的数据。

我通过以下代码实现了这一点

```
SELECT user_items.name,GROUP_CONCAT( emails.email SEPARATOR ',' ) as emails, x.ip

FROM user_items

JOIN data AS data ON (data.name = user_items.name AND data.version = user_items.version)

LEFT JOIN data_emails AS data_emails ON (data_emails.name = user_items.name AND data_emails.version = user_items.version)

LEFT JOIN emails AS emails ON (data_emails.email_id = emails.ID)

LEFT JOIN
     (SELECT name,version,GROUP_CONCAT( the_ips.ip SEPARATOR ',' ) as ip FROM data_ips
     LEFT JOIN ips as the_ips ON data_ips.ip_id = the_ips.ID  ) 
     x ON (x.name = data.name AND x.version = user_items.version) 
```

为了达到这一点，我做了很多阅读，并且不知疲倦地工作到这里。这可以按我的要求工作 - 这个问题旨在澄清使用它的好处是什么？

我不得不使用子查询（我相信？）来获取 ips，因为以前它是乘以结果（我相信基于复杂的连接）。我想这个子查询的工作原理是我的主要困惑。

**问题总结。**

- 我的数据库设置是否适合我的使用？任何改进将不胜感激。任何有助于我扩展知识的有用资源都会很棒。

- 我的 sql 中的子查询实际上是如何工作的 - 查询在做什么？

- 我是否正确继续使用左连接 - 我想返回用户项目，如果适用于右边，则返回空值。

- 我是否实质上用 2 替换了可能无限数量的查询？这真的有什么不同吗？以上可以改进吗？

- 鉴于当我更新数据表中某个项目的版本时，我知道必须更新 user_items 表中的版本，我现在还有一些更新查询要做。在实践中这种设置的权衡是否值得？

感谢任何帮助我更好地掌握这一点的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:42:34.300

鉴于您的数据布局和目标，查询是正确的。如果您只有少量数据，那不应该是性能问题 - 随着数据量的增长，这将迅速改变。但是，当您拥有大量数据时，在极少数情况下您应该*一次性*查看所有数据，这意味着将以某种方式过滤结果。究竟如何过滤它们对查询的结构有巨大的影响。

> 我的 sql 中的子查询实际上是如何工作的

目前它不能正常工作 - 没有 GROUP BY

> 在实践中这种设置的权衡是否值得？

否 - 这意味着您的架构过于规范化。

# magento - 在 magento 中使用产品 ID 导出数据流

> ID：15909742
> 
> 赞同：3
> 
> 时间：2013-04-09T18:29:52.493
> 
> 标签：magento

我正在使用数据流配置文件，但这不允许从 magento 导出 entity_id 或产品 ID。这是我们在无法使用 SKU 的地方集成一些再营销代码所需要的。无论如何要使用数据流配置文件导出 entity_id。

其次，我必须每 24 小时运行一次数据流配置文件。

问候，

法鲁克汗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-21T20:18:49.277

您可以从以下网址获取帮助以导出产品 ID [http://www.vuleticd.com/2013/01/27/export-product-ids-with-magento-dataflow-advanced-profiles/](http://www.vuleticd.com/2013/01/27/export-product-ids-with-magento-dataflow-advanced-profiles/)

要运行数据流配置文件，您必须将脚本配置为每 24 小时运行一次。

使用以下代码，您只需更改 profileId 和 csv 文件名。

```
<?php
require_once 'app/Mage.php';

umask(0);

Mage::app();

$profileId = 7; //put your profile id here
$filename = "cronimport.csv"; //file needs to be present in var/import directory  

if (!isset($filename))  {
    die("No file has been set!");
}

$logFileName= $filename.'_'.date('m_d_Y h_i_s_a', time()).'.log';  

$recordCount = 0;

Mage::log("Import Started",null,$logFileName);  

$profile = Mage::getModel('dataflow/profile');

$userModel = Mage::getModel('admin/user');
$userModel->setUserId(1);
Mage::getSingleton('admin/session')->setUser($userModel);

if ($profileId) {
    $profile->load($profileId);
    if (!$profile->getId()) {
      Mage::getSingleton('adminhtml/session')->addError('The profile you are trying to save no longer exists');
    }
}

Mage::register('current_convert_profile', $profile);

$profile->run();

$batchModel = Mage::getSingleton('dataflow/batch');
if ($batchModel->getId()) 
{
    if ($batchModel->getAdapter()) 
    {
        //@mail('EMAIL_ADDRESS','Cron started','Test','');

      $batchId = $batchModel->getId(); 
      $batchImportModel = $batchModel->getBatchImportModel();
      $importIds = $batchImportModel->getIdCollection();  

      $batchModel = Mage::getModel('dataflow/batch')->load($batchId);      
      $adapter = Mage::getModel($batchModel->getAdapter());
      foreach ($importIds as $importId) {
        $recordCount++;
        try{
          $batchImportModel->load($importId);
          if (!$batchImportModel->getId()) {
             $errors[] = Mage::helper('dataflow')->__('Skip undefined row');
             continue;
          }

          $importData = $batchImportModel->getBatchData();

          try {
            $adapter->saveRow($importData);

          } catch (Exception $e) {
            Mage::log($e->getMessage(),null,$logFileName);          
            continue;
          }

          if ($recordCount%20 == 0) {
            //Mage::log($recordCount . ' - Completed!!',null,$logFileName);
          }
        } catch(Exception $ex) {
          Mage::log('Record# ' . $recordCount . ' - SKU = ' . $importData['sku']. ' - Error - ' . $ex->getMessage(),null,$logFileName);        
        }
      }
      foreach ($profile->getExceptions() as $e) {
        Mage::log($e->getMessage(),null,$logFileName);          
      }
    }
}

echo 'Import Completed';
Mage::log("Import Completed",null,$logFileName);
//@mail('YOUR EMAIL','Cron Ended','Test','');
?> 
```

# javascript - 如何更改 JavaScript 对象的字段名称？

> ID：15909744
> 
> 赞同：2
> 
> 时间：2013-04-09T18:30:01.147
> 
> 标签：javascript, object, field

假设我们有 2 个 Javascript 对象和一个数组：

```
var rawData = {
    "dModel": "Deluxe",
    "sizeMB": 256,
};

var displayNames = {
    "dModel": "Device Model",
    "sizeMB": "Size(MB)"
};

var fieldNames = ["dModel", "sizeMB"]; 
```

我想根据displayNames指示的映射来更改rawData中的字段名称，最终结果应该是：

```
var data = {
    "Device Model": "Deluxe",
    "Size(MB)": 256,
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:32:34.440

迭代`rawData`以构建新`data`对象并`displayNames`用作新属性名称的查找表：

```
var data = {};
for (var p in rawData)
    data[displayNames[p]] = rawData[p]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:33:35.540

```
for (var oldKey in displayNames)
{
    var newKey = displayNames[oldKey];
    rawData[newKey] = rawData[oldKey];
    delete rawData[oldKey];
} 
```

# python - Lambda，python 中的闭包作业

> ID：15909746
> 
> 赞同：-4
> 
> 时间：2013-04-09T18:30:04.733
> 
> 标签：python, function, lambda

我上了一堂python课。我有很多问题要解决，但这两个让我很头疼。请任何解释或一些解决方案？

编写一个检索名称列表的脚本。对于每个名称： - 如果长于 5 个字符，则删除辅音 - 如果短（或等于）然后 5 个字符，则删除元音 按字母顺序排列结果名称，然后打印连接的字符串。提示：对每个动作使用函数：删除元音/辅音（使用 lambda 函数）、字符串连接、按字母顺序排序。使用全局常量。

创建一个以数字为参数的函数，名为 start_number。使用闭包（在第一个函数中定义一个新函数），显示接下来的 5 个素数，从 start_number（来自封闭范围的参数）开始。示例：start_number=11 结果：11、13、17、19、23

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:37:08.157

```
def removeVowels(s):
    return s.translate(None,'aeiouAEIOU')
def removeConsonants(s):
    return s.translate(None,set(string.ascii_letters).difference('aeiouAEIOU')) 
```

是去除元音和辅音的一种方法

# mysql - SQL：返回每组最大值的行

> ID：15909747
> 
> 赞同：1
> 
> 时间：2013-04-09T18:30:05.997
> 
> 标签：mysql, sql, greatest-n-per-group

我想获得每个人的最大值的行。使用 MySQL。

```
person       page       views
John         home       20
John         cart       15
John         search     43
James        home       32
James        about      41
Kim          cart       5
Kim          contact    3 
```

结果

```
Person   Page
John     search
James    about
Kim      cart 
```

一个想法是先得到`MAX(views) GROUP BY PERSON`然后再做`IF(a.views = b.max_views, page, 0)`，但这似乎需要 3 个步骤，并且可能有一种更简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:31:50.957

```
 Select * From table t
 where views =
     (Select Max(views) From table
      Where person = t.person) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:32:11.867

您可以使用子查询来获取结果：

```
select t1.person, t1.page
from yt t1
inner join
(
  select max(views) maxview, person
  from yt
  group by person
) t2
  on t1.person = t2.person
  and t1.views = t2.maxview; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/7b89d/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:32:43.593

试试这个

```
select 
    * 
from 
   data d
where d.views =  ( select max(views) from data d2 where d2.person = d.person ) 
```

# angularjs - 将 angularjs 与 asp.net 网络表单一起使用

> ID：15909753
> 
> 赞同：7
> 
> 时间：2013-04-09T18:30:15.100
> 
> 标签：angularjs, webforms

我想知道是否有人有在 asp.net webforms 项目中使用 angularjs 的经验。我知道考虑到 webforms 生态系统，这可能是一种矫枉过正，但仍然......你试过吗？这是有史以来最糟糕的主意吗？如果可能的话，你会在新的（webforms）项目中使用 angularjs，你会在现有的中型项目中引入它吗？

# symfony - 复合键和表单

> ID：15909772
> 
> 赞同：5
> 
> 时间：2013-04-09T18:30:54.933
> 
> 标签：symfony, doctrine-orm, symfony-2.2

我的数据库中有以下关联（简化版）：

![数据库模式](https://i.stack.imgur.com/s3JzA.png)

这是一个多对多关联，但在连接表上有一个属性，所以[我必须使用一对多/多对一关联](https://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html?highlight=many-to-many#many-to-many-unidirectional)。

我有一个表单，我可以在其中向一个订单项添加任意数量的关系并同时创建它（主要受文档中的[如何嵌入表单集合](http://symfony.com/doc/current/cookbook/form/form_collections.html)教程的启发。

当我发布表单时，我收到以下错误：

> TEST\MyBundle\Entity\Relation 类型的实体通过外部实体 TEST\MyBundle\Entity\Order 具有身份，但是该实体本身没有身份。您必须在相关实体上调用 EntityManager#persist() 并确保在尝试持久化“TEST\MyBundle\Entity\Relation”之前生成了一个标识符。在 Post Insert ID Generation（例如 MySQL Auto-Increment 或 PostgreSQL SERIAL）的情况下，这意味着您必须在两个持久化操作之间调用 EntityManager#flush()。

我理解这个错误，因为 Doctrine 试图保留`Relation`与订单相关的对象，因为我可以`cascade={"persist"}`选择`OneToMany`关系。但是我怎样才能避免这种行为呢？

我试图删除`cascade={"persist"}`并手动保留实体，但我得到了同样的错误（因为我需要`flush()`订购以获取 ID，当我这样做时，我有相同的错误消息）。
我也尝试过之前`detach()`的`Relation`对象，`flush()`但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-20T21:53:29.477

如果 1) 您正在使用带有复合键的连接表，2) 表单组件，以及 3) 连接表是由表单组件的“集合”字段构建的实体，则这个问题似乎是独一无二的。我看到很多人遇到问题但没有很多解决方案，所以我想我会分享我的。

我想保留我的复合主键，因为我想确保两个外键中只有一个实例会保留在数据库中。以此 [实体设置](http://doctrine-orm.readthedocs.org/en/latest/tutorials/composite-primary-keys.html#use-case-3-join-table-with-metadata)为例

```
/** @Entity */
class Order
{
    /** @OneToMany(targetEntity="OrderItem", mappedBy="order") */
    private $items;

    public function __construct(Customer $customer)
    {
        $this->items = new Doctrine\Common\Collections\ArrayCollection();
    }
}

/** @Entity */
class Product
{
    /** @OneToMany(targetEntity="OrderItem", mappedBy="product") */
    private $orders;
    .....

    public function __construct(Customer $customer)
    {
        $this->orders = new Doctrine\Common\Collections\ArrayCollection();
    }
}

/** @Entity */
class OrderItem
{
    /** @Id @ManyToOne(targetEntity="Order") */
    private $order;

    /** @Id @ManyToOne(targetEntity="Product") */
    private $product;

    /** @Column(type="integer") */
    private $amount = 1;
} 
```

我面临的问题是，如果我`Order`在表单中构建一个对象，该对象的集合字段为`OrderItem`s，我将无法在没有先保存 Order 实体的情况下保存 OrderItem 实体（因为学说/SQL 需要订单 ID对于复合键），但 Doctrine EntityManager 不允许我保存具有 OrderItem 属性的 Order 对象（因为它坚持将它们一起保存）。您不能关闭级联，因为它会抱怨您没有先保存关联实体，并且您无法在保存之前保存关联实体`Order`。真是个难题。 **我的解决方案是删除关联实体，保存`Order`然后将关联实体重新引入 Order 对象并再次保存**. 所以首先我创建了一个 ArrayCollection 属性的质量分配函数`$items`

```
class Order
{
    .....
    public function setItemsArray(Doctrine\Common\Collections\ArrayCollection $itemsArray = null){
    if(null){
        $this->items->clear();
    }else{
        $this->items = $itemsArray;
    }
    ....
} 
```

然后在我的控制器中处理订单表格。

```
//get entity manager
$em = $this->getDoctrine()->getManager();
//get order information (with items)
$order = $form->getData();
//pull out items array from order
$items = $order->getItems();
//clear the items from the order
$order->setItemsArray(null);
//persist and flush the Order object
$em->persist($order);
$em->flush();

//reintroduce the order items to the order object
$order->setItemsArray($items);
//persist and flush the Order object again ):
$em->persist($order);
$em->flush(); 
```

您必须坚持并刷新两次，这很糟糕（请参阅此处的更多信息[Persist object with two foreign identities in dictionary](https://stackoverflow.com/questions/18143630/persist-object-with-two-foreign-identities-in-doctrine)）。但这对你来说是教义，凭借它的全部力量，它肯定会让你陷入困境。但幸运的是，您只需在创建新对象时执行此操作，而不是编辑，因为该对象已经在数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:04:49.073

您需要先持久化并刷新原始数据，然后才能持久化和刷新关系记录。您对错误原因的判断是 100% 正确的。

我从图中假设您正在尝试同时添加和订购以及与联系人的关系？如果是这样，您需要先持久化并刷新订单，然后才能持久化并刷新关系。或者，您可以将主键添加到关系表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T23:29:46.347

我最终在我的`Relation`表上创建了一个单独的主键（而不是复合主键）。
看起来这是一个肮脏的修复，我相信有更好的方法来处理这种情况，但它现在有效。

这是我的`Relations`实体：

```
/**
 * Relation
 *
 * @ORM\Entity
 */
class Relation
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\ManyToOne(targetEntity="Contact", inversedBy="relation")
     */
    protected $contact;

    /**
     * @ORM\ManyToOne(targetEntity="Order", inversedBy="relation")
     */
    protected $order;

    /**
     * @var integer
     *
     * @ORM\Column(name="invoice", type="integer", nullable=true)
     */
    private $invoice;

    //Rest of the entity... 
```

然后我添加了与以下关系的`cascade={"persist"}`选项：`OneToMany``Order`

```
/**
 * Orders
 *
 * @ORM\Entity
 */
class Order
{   
    /**
     * @ORM\OneToMany(targetEntity="Relation", mappedBy="order", cascade={"persist"})
     */
    protected $relation;

    //Rest of the entity... 
```

瞧！

# objective-c - 使用开始日期获取 iPhone 日历中的所有事件

> ID：15909776
> 
> 赞同：3
> 
> 时间：2013-04-09T18:31:00.540
> 
> 标签：objective-c, xcode, nspredicate, fetch, ekeventstore

我有应用程序通过按钮提醒患者他/她的预约。如果患者单击按钮，我想获取患者日历中的所有事件以检查约会是否已经存在。如果不存在，我将创建事件。

我知道如何将事件添加到日历中，但获取是返回零计数？

下面是我的代码：

```
 //set start and end date
NSDate* startDate = [NSDate date];//start from today
NSDate* endDate =  [NSDate dateWithTimeIntervalSinceNow:[[NSDate distantFuture] timeIntervalSinceReferenceDate]];//no end
NSLog(@"S Date %@", startDate);
NSLog(@"E Date %@", endDate);

NSString *AppointmentTitle=@"Appointment in Hospital at Pediatric Clinic";

EKEventStore *store = [[EKEventStore alloc] init];
NSArray *calendarArray = [store calendars];
NSPredicate *fetchCalendarEvents = [store predicateForEventsWithStartDate:startDate endDate:endDate calendars:calendarArray];
NSArray *eventList = [store eventsMatchingPredicate:fetchCalendarEvents];
BOOL IsFound;
int EventsCount=eventList.count;
for(int i=0; i < EventsCount; i++)
{
    NSLog(@"Event Title:%@", [[eventList objectAtIndex:i] title]);
    if ([[[eventList objectAtIndex:i] title] isEqualToString:AppointmentTitle])//check title
    {
        IsFound=TRUE;
        break;
    }
    else
    {
        IsFound=FALSE;
    }
} 
```

这段代码在 2 个月前运行良好。突然，当我回来测试它时，它不起作用。我错过了什么？或者我的代码有什么错误吗？

我需要你的帮助。。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T14:21:56.870

Finaaaaaaaally 我得到了答案，我认为 Apple 在许可下做了一些事情（在 iOS 5 中，您只能访问 Event Store 中的事件 (EKEntityTypeEvent)，这与在 iOS 6 中可以访问提醒 (EKEntityTypeReminder) 不同。但您需要以下代码至少获得 1 次。）“由 WrightsCS 回答”

找到下面的代码：-

```
 EKEventStore *store = [[EKEventStore alloc] init];

// Get the appropriate calendar
NSCalendar *calendar = [NSCalendar currentCalendar];

if ([store respondsToSelector:@selector(requestAccessToEntityType:completion:)])
{
    /* iOS Settings > Privacy > Calendars > MY APP > ENABLE | DISABLE */
    [store requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error)
     {
         if ( granted )
         {
             NSLog(@"User has granted permission!");
             // Create the start date components
             NSDateComponents *oneDayAgoComponents = [[NSDateComponents alloc] init];
             oneDayAgoComponents.day = -1;
             NSDate *oneDayAgo = [calendar dateByAddingComponents:oneDayAgoComponents
                                                           toDate:[NSDate date]
                                                          options:0];

             // Create the end date components
             NSDateComponents *oneYearFromNowComponents = [[NSDateComponents alloc] init];
             oneYearFromNowComponents.year = 1;
             NSDate *oneYearFromNow = [calendar dateByAddingComponents:oneYearFromNowComponents
                                                                toDate:[NSDate date]
                                                               options:0];

             // Create the predicate from the event store's instance method
             NSPredicate *predicate = [store predicateForEventsWithStartDate:oneDayAgo
                                                                     endDate:oneYearFromNow
                                                                   calendars:nil];

             // Fetch all events that match the predicate
             NSArray *events = [store eventsMatchingPredicate:predicate];
             NSLog(@"The content of array is%@",events);
         }
         else
         {
             NSLog(@"User has not granted permission!");
         }
     }];
} 
```

# css - CSS多个图像加上多个属性

> ID：15909783
> 
> 赞同：0
> 
> 时间：2013-04-09T18:31:17.950
> 
> 标签：css

我正在使用标准的逗号分隔的多图像 CSS，如下所示：

```
background-image: url(image-one.png), url(image-two.png);
background-repeat: no-repeat; 
```

但是我需要 image-one.png 浮动并且宽度为 85%。Image-two.png 没有那种样式。

如何将浮动和宽度样式应用于其中一张图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:52:40.343

这是我认为您所描述的示例：

```
background: url(image-one.png) left 0 no-repeat 10px 100px/85% 400px,
            url(image-two.png) 5px 5px no-repeat 5px 5px/600px 400px; 
```

我不确定图像和元素大小等，因此您可以忽略 px 值并输入您自己的值。

# c - 如果传递了冲突的编译器标志，GCC 会如何表现？

> ID：15909788
> 
> 赞同：19
> 
> 时间：2013-04-09T18:31:30.767
> 
> 标签：c, linux, gcc

我知道如果你这样执行 GCC：

```
gcc -O3 -O2 foo.c 
```

GCC 将使用最后传递的优化标志（在这种情况下`O2`）。但是，这对所有标志都是如此吗？例如，如果我像这样执行 GCC：

```
gcc -mno-sse -msse bar.c 
```

它会支持 SSE，因为这是最后一个通过的标志，还是会导致未定义的行为？我最初的实验似乎表明它将支持 SSE，但我不确定这是否适用于所有情况。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-09T18:33:14.653

正如您在第一个示例中提到的那样，通常后面的选项会覆盖之前通过的选项。我个人没有遇到任何不同的行为`-m`或`-f`标志，但我不知道文档中的具体参考。

请注意，某些选项的行为方式并非如此：

```
$ gcc example.c -DABC -DABC=12
<command-line>: warning: "ABC" redefined
<command-line>: warning: this is the location of the previous definition 
```

因此，需要`-UABC`在两者之间留出一个来关闭该警告。

顺便说一句，`clang`它特别擅长解决这个问题——如果它忽略了一个命令行选项，它会产生一个警告，这可以帮助你。

# backbone.js - 删除 Backbone Collection 中的最后一个模型

> ID：15909790
> 
> 赞同：1
> 
> 时间：2013-04-09T18:31:33.653
> 
> 标签：backbone.js

如何删除集合中的最后一个模型？

```
 if (this.Collection.models.length < newValue) {
        console.log('adding');
        this.Collection.models.add();
      } else {
        console.log('removing');
        // this isnt working, by selecting it by the current collection array index
        // basically this.Collection.remove([this.Collection.models.length-1])
        //this.measuresCollection.models.get('beats').remove(this.measuresCollection.models[i].get('beats')[this.measuresCollection.models[i].get('beats').length]);
      } 
```

我不知道id，所以我只想删除最后一个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T18:37:14.927

`collection.pop([options])`

文档：[Collection#pop](http://backbonejs.org/#Collection-pop)。

它位于文档中的 remove 方法下方。它既会删除最后一个模型，也会在您需要时将其返回给您。如果您只想删除它，请不要使用返回值。

# jquery - 使用 jquery highlight 插件在 keyup jquery 上突出显示搜索词

> ID：15909793
> 
> 赞同：2
> 
> 时间：2013-04-09T18:31:48.437
> 
> 标签：jquery, highlight

好的，我正在尝试在我的 HTML 页面中的搜索文本框中加粗搜索词。我在这里使用 jQuery highlight 插件[jQuery highlight 插件](http://bartaz.github.io/sandbox.js/jquery.highlight.html)来尝试实现这一点。我仍然不精通 jQuery，如果这听起来太愚蠢，请原谅我

问题是它只突出显示在文本框中输入的第一个字符，其余的被忽略。

1.  highlight.js 可以在[这里找到](https://raw.github.com/bartaz/sandbox.js/master/jquery.highlight.js)
2.  这是我的代码

    ```
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="UTF-8">
    <title>Test page for Highlight Search Terms</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="highlight.js" type="text/javascript"></script>
    <script>
    $(document).ready(function(){
        $('#search').on('keyup', function(){
                $('.x').highlight($(this).val());

        });    
    });
    </script>
    <style type="text/css">
      .highlight {
        font-weight: bold;
      }
    </style>
    <body>
      <input type="text" id="search"></input>
       <p class="x">Highlight plugin searches through the text of given elements
        in this case to find the term (word 'highlight' in our example) to 
        highlight. When the term is found it's simply wrapped with </p>
    </body>
    </html> 
    ```

我希望它匹配段落中文本框中的每个搜索词并将其加粗。我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T18:51:31.203

每当突出显示某些内容时，它都会为您搜索的单词添加一个 span 标签。在您的情况下，您必须取消突出显示先前突出显示的文本以删除插件添加的跨度。您可以尝试如下。希望它会起作用

```
 <script>
    $(document).ready(function(){
        $('#search').on('keyup', function(){
            console.log($(this).val());
                $('.x').unhighlight();
                $('.x').highlight($(this).val());

        });    
    });
    </script> 
```

# asp.net-mvc - mvc 4 mef 导入/导出混淆

> ID：15909795
> 
> 赞同：1
> 
> 时间：2013-04-09T18:31:49.890
> 
> 标签：asp.net-mvc, asp.net-mvc-4, mef

我很难理解 Mef 以及导入和导出的工作原理。我的项目结构如下。

```
Projects:
MefMVPApp (Main MVC 4 app)
MefMVCFramework.Common(Interfaces shared between the projects)
MefMVCDemo.Plugins.OrderStatus (pluggable area.)
MefMVCDemo.Plugins.Data (Repository for OrderStatus)
OrderStatus.Models(domain models shared between the projects) 
```

主 Mvc 应用程序的目标是通过 mef 托管可插入区域。

OrderStatus 区域有一个名为 OrderStatusController 的控制器，并使用 Export Attribute 和 ImportingConstructor 进行装饰。

```
[Export(typeof(IController))]
        [ExportMetadata("controllerName", "OrderStatus")]
        [PartCreationPolicy(CreationPolicy.NonShared)] 
        public class OrderStatusController : Controller
        {
            private readonly IRepository<OrderStatusApp.OrderStatusResponse>_repository ;
            [ImportingConstructor]
            public OrderStatusController(IRepository<OrderStatusApp.OrderStatusResponse> oRepository)
            {
                _repository = oRepository;
            }
            public ActionResult Index()
            {
                var model = _repository.GetAll();
                return View();
            } 
    } 
```

IRepository 是 MefMVCFramework.Common 程序集中的一个类，将用于通用 CRUD 操作。

```
public interface IRepository<T> where T : class
            {
               IEnumerable<T> GetAll();
               T GetById(int id);
               void Add(T entity);
               int SaveOrUpdate(T entity);
                bool Delete(T entity);
                bool Delete(int id); 
            } 
```

MefMVCDemo.Plugins.Data 程序集包含一个名为 OrderManagementRepository 的类，它是通用存储库的固有属性，并标有导出属性。

```
[Export(typeof(IRepository<OrderStatusApp.OrderStatusResponse>))]
            [PartCreationPolicy(CreationPolicy.NonShared)] 
                public class OrderManagementRepository  : IRepository<OrderStatusApp.OrderStatusResponse>
                {
                    private readonly JsonServiceClient _client;

                    public OrderManagementRepository()
                    {
                        _client = new JsonServiceClient("http://localhost:52266");
                    }
                    public IEnumerable<OrderStatusApp.OrderStatusResponse> GetAll()
                    {

                        throw new NotImplementedException("Can not get all");
                    }
                    public OrderStatusApp.OrderStatusResponse GetById(int id)
                    {
                        throw new NotImplementedException();
                    }
                    public void Add(OrderStatusApp.OrderStatusResponse entity)
                    {
                        throw new NotImplementedException();
                    }
                    public int SaveOrUpdate(OrderStatusApp.OrderStatusResponse entity)
                    {
                        throw new NotImplementedException();
                    }
                    public bool Delete(OrderStatusApp.OrderStatusResponse entity)
                    {
                        throw new NotImplementedException();
                    }
                    public bool Delete(int id)
                    {
                        throw new NotImplementedException();
                    }
                } 
```

使用 Mefx 工具，我可以看到我的零件并且没有拒绝。

```
mefx /dir:C:\
Source.PreBranch.Keep\Prototypes\Projects\MefDemoApp\mefMVC4App\bin /parts
MefMVCDemo.Plugins.Data.OrderManagementRepository
mefMVCDemo.Plugins.OrderStatus.Controllers.OrderStatusController
MefMVCDemo.Plugins.OrderStatus.Verbs.OrderStatusVerb 
```

我可以看到我的导入。

```
mefx /dir:C:\
Source.PreBranch.Keep\Prototypes\Projects\MefDemoApp\mefMVC4App\bin /imports
MefMVCFramework.Common.IRepository(OrderStatus.Models.OrderStatusApp+OrderStatus
Response)
MefMVCFramework.Common.IRepository(OrderStatus.Models.OrderStatusApp+OrderStatus
Response) 
```

现在，当使用 /orderstatus uri 浏览我的主 mvc 站点时，我收到以下错误：没有为此对象定义无参数构造函数。

将默认构造函数添加到不带重载的 OrderStatusController 似乎不起作用。

我想问题是我做错了什么？为什么我在构造函数中的接口最终都是空的，为什么会出现关于“没有为此对象定义无参数构造函数”的 mvc 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:57:32.843

MVC 中的默认控制器工厂尝试使用无参数构造函数创建控制器。如果你想改变这种行为，那么你需要创建你自己的自定义控制器工厂。

这是在控制器上使用导入/导出的 ControllerFactory[示例](http://www.twilio.com/blog/2012/11/adding-dependency-injection-to-your-asp-net-mvc-twilio-app-using-mef.html)

我正在使用 MEF 将一些部件导入我的应用程序，但我的控制器没有导入/导出，所以我创建了以下控制器工厂

```
public class ControllerFactory : IControllerFactory
{
    private readonly CompositionContainer _container;
    private IControllerFactory _innerFactory;

/// <summary>
/// Constructor used to create the factory
/// </summary>
/// <param name="container">MEF Container that will be used for importing</param>
public ControllerFactory(CompositionContainer container)
{
    _container = container;
    _innerFactory = new DefaultControllerFactory();
}

/// <summary>
/// Method used for create the controller based on the provided name. It calls the
/// constructor of the controller passing the MEF container
/// </summary>
/// <param name="requestContext">Context of the request</param>
/// <param name="controllerName">Name of the controller provided in the route</param>
/// <returns>The controller instance</returns>
public IController CreateController(System.Web.Routing.RequestContext requestContext, string controllerName)
{
    Type controllerType = FindControllerByName(controllerName);

    var args = new object[] { this._container };
    var controller = (IController)Activator.CreateInstance(controllerType, args);

    return controller;
}

/// <summary>
/// This methods looks into the current Assembly for the Controller type
/// </summary>
/// <param name="name">The controller name provided in the route</param>
/// <returns>The controller type</returns>
private static Type FindControllerByName(string name){
    var a = Assembly.GetAssembly(typeof(ControllerFactory));
    var types = a.GetTypes();
    Type type = types.Where(t => t.Name == String.Format("{0}Controller", name)).FirstOrDefault();              

    return type;
}

public System.Web.SessionState.SessionStateBehavior GetControllerSessionBehavior(System.Web.Routing.RequestContext requestContext, string controllerName)
{
    return System.Web.SessionState.SessionStateBehavior.Default;
}

public void ReleaseController(IController controller)
{
    var disposableController = controller as IDisposable;
    if (disposableController != null)
    {
        disposableController.Dispose();
    }
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:47:24.920

感谢 pollirrata 为我指明了正确的方向。

我不得不改变一些事情来让它工作。

1.) 我在 MefMVCFramework.Common 项目中添加了一个名为 INameMetadata 的接口。

```
public interface INameMetadata
{
    string Name { get; }
} 
```

2.) 将我的控制器导出上的我的 ExportMetadata 标签修改为 Name、OrderStatus。

```
 [Export(typeof(IController))]
[ExportMetadata("Name", "OrderStatus")]
[PartCreationPolicy(CreationPolicy.NonShared)] 
public class OrderStatusController : Controller
{
    private IRepository<OrderStatusApp.OrderStatusResponse> _repository;

    [ImportingConstructor]
    public OrderStatusController(IRepository<OrderStatusApp.OrderStatusResponse> oRepository)
    {
        _repository = oRepository;

    }

    public ActionResult Index()
    {
        var model = _repository.GetById(47985);
        return View(model);
    } 
} 
```

3.) 创建 MefControllerFactory（基于 pollirrata 发布但修改为查找元数据的内容）

```
 public class MefControllerFactory : IControllerFactory
{
    private string _pluginPath;
    private readonly DirectoryCatalog _catalog;
    private readonly CompositionContainer _container;
    private DefaultControllerFactory _defaultControllerFactory;

    public MefControllerFactory(string pluginPath)
    {
        _pluginPath = pluginPath;
        _catalog = new DirectoryCatalog(pluginPath);
        _container = new CompositionContainer(_catalog);
        _defaultControllerFactory = new DefaultControllerFactory();
    }

    public MefControllerFactory(CompositionContainer compositionContainer)
    {

        _container = compositionContainer;
        _defaultControllerFactory = new DefaultControllerFactory();
    }
    #region IControllerFactory Members
    public IController CreateController(System.Web.Routing.RequestContext requestContext, string controllerName)
    {
        //IController controller = null;
        var controller = _container.GetExports<IController,INameMetadata>()
            .Where(e=>e.Metadata.Name.Equals(controllerName))
            .Select(e=>e.Value).FirstOrDefault();

        if (controller == null)
        {
            throw new HttpException(404, "Not found");
        }

        return controller;

    }
    public void ReleaseController(IController controller)
    {
       var disposable = controller as IDisposable;
        if (disposable != null)
        {
            disposable.Dispose();
        }
    }
    #endregion

    public SessionStateBehavior GetControllerSessionBehavior(System.Web.Routing.RequestContext requestContext, string controllerName)
    {
        return SessionStateBehavior.Default;
    }
} 
```

4.) 我在 Main MVC 应用程序中创建了一个名为 MefConfig 的类并将其移至 App_Start 目录。

```
public static class MefConfig
{
    public static void RegisterMef()
    {
        //var builder = new RegistrationBuilder();
        //builder.ForTypesDerivedFrom<IRepository<OrderStatusApp.OrderStatusResponse>>().Export<IRepository<IRepository<OrderStatusApp.OrderStatusResponse>>>();

        var directoryCatalog = new DirectoryCatalog(HostingEnvironment.MapPath("~/bin"), "*.dll");

        var container = new CompositionContainer(directoryCatalog, true);
        ControllerBuilder.Current.SetControllerFactory(new MefControllerFactory(container));

        //Working
        //ControllerBuilder.Current.SetControllerFactory(new MefControllerFactory(HostingEnvironment.MapPath("~/bin")));

        // Install MEF dependency resolver for MVC
        var resolver = new MefDependencyResolver(container);
        DependencyResolver.SetResolver(resolver);
        // Install MEF dependency resolver for Web API
        GlobalConfiguration.Configuration.DependencyResolver = resolver;
        var d = container.GetExportedValues<IRepository<OrderStatusApp.OrderStatusResponse>>();
        //Mefx.
        try
        {
            //var ci = new CompositionInfo(aggregateCatalog, container);
            var ci = new CompositionInfo(directoryCatalog, container);
            var partDef = ci.GetPartDefinitionInfo(typeof(IRepository<OrderStatusApp.OrderStatusResponse>));

            //var possibleCauses = partDef.FindPossibleRootCauses();
            var stringWriter = new StringWriter();
            CompositionInfoTextFormatter.Write(ci, stringWriter);
            var compStatString = stringWriter.ToString();
        }
        catch
        {

        }
        MvcApplication.ActionVerbs = container.GetExports<IActionVerb, IActionVerbMetadata>();
    }
} 
```

5.) 从 global.asax 加载 Mefconfig。

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        //Register Mef 
        MefConfig.RegisterMef();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);

    } 
```

# entity-framework - EF Hashset 集合 - 覆盖 Equals 和 GetHashCode

> ID：15909797
> 
> 赞同：1
> 
> 时间：2013-04-09T18:31:51.727
> 
> 标签：entity-framework

我与 EF 中的连接表有多对多关系。

我似乎在其他问题中提出了一些建议，将`Hashset`集合类型用于多对多关系并覆盖 Equals() 和 GetHashCode()。

**为什么要使用哈希集？**

**我如何覆盖这些方法，这有什么作用？**

```
public class ChartQuery
{
    public int ChartQueryId { get; set; }
    public virtual ICollection<UserChartQuery> Users { get; set; }
   ...more...
}

public class User
{
    public int UserId { get; set; }
    public string UserName { get; set; }
    public virtual ICollection<UserChartQuery> SavedChartQueries { get; set; }
    ...more...
}

public class UserChartQuery
{
    public int UserId { get; set; }
    public int ChartQueryId { get; set; }

    public virtual User User { get; set; }
    public virtual ChartQuery ChartQuery { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:24:12.683

**为什么要使用哈希集？**

你不应该。只要映射正确，多对多行的唯一性将在数据库级别强制执行。在应用程序级别强制执行它几乎没有任何好处。

**我如何覆盖这些方法，这有什么作用？**

实体框架中的多对多关系没有不同的实体来表示关系，因此没有实体可以覆盖`Equals()`和`GetHashCode()`打开。

您*可以*定义一个实体来满足多对多关系，但从对象模型的角度来看，这有点做作和丑陋。如果您要这样做，您将覆盖`Equals()`并且`GetHashCode()`将相等定义为参与键彼此相等，并且哈希码将是参与键的唯一组合。

**更新**

将您的示例与表示多对多关系的实体一起使用，这就是您将如何实现`Equals`并且`GetHashCode`可以在 HashSet 中正确使用的方式：

```
public class UserChartQuery
{
    public int UserId { get; set; }
    public int ChartQueryId { get; set; }

    public virtual User User { get; set; }
    public virtual ChartQuery ChartQuery { get; set; }

        protected bool Equals(UserChartQuery other)
    {
        return UserId == other.UserId && ChartQueryId == other.ChartQueryId;
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != this.GetType()) return false;
        return Equals((UserChartQuery) obj);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            return (UserId*397) ^ ChartQueryId;
        }
    }
} 
```

如上所述，我建议使用更自然和内置的方式在 EF 中建立多对多关系：

```
public class ChartQuery
{
    public int ChartQueryId { get; set; }
    public virtual ICollection<User> Users { get; set; }
   ...more...
}

public class User
{
    public int UserId { get; set; }
    public string UserName { get; set; }
    public virtual ICollection<ChartQuery> SavedChartQueries { get; set; }
    ...more...
} 
```

在您的映射中，您将这样定义多对多关系（在 DbContext OnModelCreating 覆盖中）：

```
builder.Entity<ChartQuery>()
    .HasMany(cq => ucq.Users)
    .WithMany(u => u.SavedChartQueries); 
```

无论哪种情况，我真的认为使用 HashSet 是不必要的。即使实体满足多对多关系，数据库也会强制组合键的唯一性。

# java - linkedList 是空的，尽管添加了元素

> ID：15909808
> 
> 赞同：0
> 
> 时间：2013-04-09T18:32:23.507
> 
> 标签：java, linked-list

我创建了一个包含一个按钮的“frame1”，所以如果我点击那个按钮，按钮操作执行的方法将检查 LinkedList 是否为空，如果是，它将设置包含 radioButton 调用 addEmployees_Auto 的“addEmployee”框架可见，并且单击时，它将从 frame1 调用方法“add_Auto”。这应该填充frame1中的linkedList，但如果我再次单击按钮，LinkedList又是空的。为什么？LinkedList 不应该被填充吗？

这是“frame1”

```
public class Frame1 extends javax.swing.JFrame {

    LinkedList <Employee>list2=new LinkedList <Employee>();
        ....

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

    System.out.println("size="+list2.size());

    if(list2.isEmpty())
      new AddEmployees.setVisible(true);
}

public void addEmployees_Auto()
     {

        list2.add(new Employee(20910733,"Ahmed","Manager",2700));
        list2.add(new Employee(20910835,"Omar","Teaacher",2100));
        list2.add(new Employee(20910674,"Mohammed","Manager",3000));
        list2.add(new Employee(20910955,"Kareem","",2700));
        list2.add(new Employee(20910921,"Ameer","teacher",2500));

     }
} 
```

添加员工框架：

```
public class AddEmployees extends javax.swing.JFrame {
             ...

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)    
 {                                         

     if(jRadioButton2.isSelected()){

        new Frame1().addEmployees_Auto();
        this.setVisible(false);
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:44:48.747

我认为这是因为你正在做：

```
new Frame1() 
```

每次在你的`AddEmployees`课堂上，所以每次都会创建一个新的链表，它总是为空的。您需要传入对调用实例的引用`Frame1`，例如

```
new AddEmployees(this) 
```

从`Frame1`类中，并将适当的构造函数添加到您的`AddEmployees`类中，例如

```
public AddEmployees(JFrame parent) { ... } 
```

# html - 基本 CSS/HTML 在列中将一个 DIV 堆叠在另一个 DIV 下方

> ID：15909809
> 
> 赞同：1
> 
> 时间：2013-04-09T18:32:25.197
> 
> 标签：html, css

我意识到这是非常基本的，但不能为我的生活工作，为什么我不能让它工作并且花了最后几个小时尝试一切

我需要将 DIV 堆叠起来，使它们形成一个大长柱，一个在另一个之上。它们包含在 JQuery 可滚动 DIV 中。我可以将所有 DIVS 绝对定位在里面，但是它们的负载会经常变化，所以如果我必须插入一个新的，它们会自动排列。

所以我基本上有一个大的可滚动 DIV。在这里面我有 2 个其他 DIV（#Release-Monsters 和 #Release-Insides），每个 DIV 都包含 3 个进一步的 DIV。我想将这 2 个 DIV（#Release-Monsters 和 #Release-Insides）堆叠在一起形成一列。一旦我有这两个工作，我会增加大约 50 个左右。

我的 CSS 是这样的：

```
#All-Releases- {
    position:absolute;
    left:250px;
    top:210px;
    width:600px;
    height:600px;
    z-index:3;
}
/* Used to control height of scrollable div*/
p.ex
{
height:600px;
width:100px;
}
 /* Vertical and horizontal scrollbar - one extra step required - add width of overview - overall width of scrolled content*/
#All-Releases- {
     width: 500px;
        }
#Release-Monsters {
    position:static;
    width:600px;
    height:322px;
    z-index:3;
    }
#Artwork-Monsters {
    position:absolute;
    left:19px;
    top:2px;
    width:284px;
    height:284px;
    z-index:3;
}
#Release-Title-Monsters {
    position:absolute;
    left:322px;
    top:0px;
    width:284px;
    height:284px;
    color: #CCC;
    font-size: 18px;
    font-family: Century Gothic, Geneva, sans-serif;
    letter-spacing: 2px;
    text-align: justify;
    z-index:3;
}
#Release-Info-Monsters {
    position:absolute;
    left:322px;
    top:25px;
    width:278px;
    height:284px;
    color: #CCC;
    font-size: 12px;
    font-family: Century Gothic, Geneva, sans-serif;
    letter-spacing: 1px;
    text-align: justify;
    z-index:3;
}
#Release-Insides {
    display:block;
    width:600px;
    height:322px;
    z-index:3;
    }
#Artwork-Insides {
    position:absolute;
    left:19px;
    top:2px;
    width:284px;
    height:284px;
    z-index:3;
}
#Release-Title-Insides {
    position:absolute;
    left:322px;
    top:0px;
    width:284px;
    height:284px;
    color: #CCC;
    font-size: 18px;
    font-family: Century Gothic, Geneva, sans-serif;
    letter-spacing: 2px;
    text-align: justify;
    z-index:3;
}
#Release-Info-Insides {
    position:absolute;
    left:322px;
    top:25px;
    width:278px;
    height:284px;
    color: #CCC;
    font-size: 12px;
    font-family: Century Gothic, Geneva, sans-serif;
    letter-spacing: 1px;
    text-align: justify;
    z-index:3;
} 
```

HTML是这样的：

```
<div id="All-Releases-" class="default-skin demo">
<div id="Release-Monsters">
<div id="Artwork-Monsters"><img src="images/Release-Artwork/Monsters.jpg" width="284" height="284" /></div>
<div id="Release-Title-Monsters">MONSTERS</div>
<div id="Release-Info-Monsters">
1\. Prologue<br />
2\. Journey <br />
3\. Candles <br />
4\. Water <br />
5\. Underwater <br />
6\. Spores <br />
7\. Campfire <br />
8\. Dawn <br />
9\. Attack <br />
10\. Temple <br />
11\. Encounter <br />
12\. Monsters Theme 
    </div></div>
<div id="Release-Insides">
<div id="Artwork-Insides"><img src="images/Release-Artwork/Insides.jpg" width="284" height="284" /></div>
<div id="Release-Title-Monsters">INSIDES</div>
<div id="Release-Info-Insides">
1\. The Wider Sun <br />
2\. Vessel <br />
3\. Insides <br />
4\. Wire <br />
5\. Colour Eye <br />
6\. Light Through The Veins <br />
7\. The Low Places <br />
8\. Small Memory <br />
9\. A Drifting Up <br />
10\. Autumn Hill<br />
    </div></div>

<p class="ex"></p>

</div>

    <div id="All-Releases-" class="default-skin demo">
<div id="Release-Monsters">
<div id="Artwork-Monsters"><img src="images/Release-Artwork/Monsters.jpg" width="284" height="284" /></div>
<div id="Release-Title-Monsters">MONSTERS</div>
<div id="Release-Info-Monsters">
1\. Prologue<br />
2\. Journey <br />
3\. Candles <br />
4\. Water <br />
5\. Underwater <br />
6\. Spores <br />
7\. Campfire <br />
8\. Dawn <br />
9\. Attack <br />
10\. Temple <br />
11\. Encounter <br />
12\. Monsters Theme 
    </div></div>
<div id="Release-Insides">
<div id="Artwork-Insides"><img src="images/Release-Artwork/Insides.jpg" width="284" height="284" /></div>
<div id="Release-Title-Monsters">INSIDES</div>
<div id="Release-Info-Insides">
1\. The Wider Sun <br />
2\. Vessel <br />
3\. Insides <br />
4\. Wire <br />
5\. Colour Eye <br />
6\. Light Through The Veins <br />
7\. The Low Places <br />
8\. Small Memory <br />
9\. A Drifting Up <br />
10\. Autumn Hill<br />
    </div></div>

<p class="ex"></p>

</div>
<script type="text/javascript">
    $(window).load(function () {
        $(".demo").customScrollbar();
    });
</script 
```

>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:43:49.727

为每个 * 添加一个浮点属性**秒。例如：*

 *```
#Artwork-Monsters {
    position:absolute;
    float:left;
    left:19px;
    top:2px;
    width:284px;
    height:284px;
    z-index:3;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:03:02.990

我会将您的 html 更改为从无序列表开始，以摆脱您拥有的所有 br 标签，并可能使其更整洁。

**JSFiddle**

示例： http: [//jsfiddle.net/uk3BW/](http://jsfiddle.net/uk3BW/) <-- 没有滚动条

示例： http: [//jsfiddle.net/uk3BW/1/](http://jsfiddle.net/uk3BW/1/) <-- 有滚动条

**HTML**

```
<ul id="Release-Info-Monsters">
<li> Prologue </li> 
<li> Journey </li>
<li> Candles </li>
<li> Water </li>
<li> Underwater </li>
<li> Spores </li>
<li> Campfire </li>
<li> Dawn </li>
<li> Attack </li>
<li> Temple </li>
<li> Encounter </li>
<li> Monsters Theme </li>
</ul> 
```

**CSS**

```
ul { 
 display:block;  
 background:#aeaeae;
 padding:10px;
 width: 250px;
 list-style:none;
}

li { 
    display:block;
    background:#eee; 
    padding: 10px 0; 
    width: 100%;
    text-align:center;
}

li:last-child { 
margin: 0;
}

li { 
    margin: 0 0 10px 0;} 
li:hover { 
    background:#ccc;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:42:03.350

我查看了您的 HTML（除了 list 和 之外还不错`<br>`）和您的 CSS（过于复杂）。

我清理了一些东西，你会在以下位置看到结果：

[http://jsfiddle.net/audetwebdesign/42bgv/](http://jsfiddle.net/audetwebdesign/42bgv/)

**主要的 CSS 修复**

这是我修改的 CSS：

```
.All-Releases {
    position: relative;
    left: 20px;
    top: 0px;
    width:600px;
    height: auto;
    color: #CCC;
    font-size: 12px;
    font-family: Century Gothic, Geneva, sans-serif;
    outline: 2px dotted blue;
}
.Release-Monsters {
    position: relative;
    width:600px;
    height:322px;
    outline: 2px dotted gray;
}

...

.Release-Insides {
    position: relative;
    width:600px;
    height:322px;
    outline: 2px dotted gray;
}

... 
```

最初，您声明`absolute`的位置`.All-Releases`导致所有面板相互重叠，不好。

对于`Release-Monsters`和`Release-Insides`，使用`position: relative`这样绝对定位的元素会停留在您期望的位置。（注意：有更简单的方法可以在不使用绝对定位的情况下执行此操作）。

最后，使用`class`而不是`id`因为`id`值被认为是唯一的。

此外，在本例中，利用 CSS 级联并将字体和颜色声明保留在顶级规则`.All-Releases`中。*

# ios - autorelease导致iOS系统崩溃

> ID：15909811
> 
> 赞同：0
> 
> 时间：2013-04-09T18:32:36.567
> 
> 标签：ios, objective-c, memory-management, autorelease

我有没有ARC的方法来读取plist文件内容：

```
-(void)readAppFile
{
    NSString *plistPath = [self getDataFileDestinationPath];
    NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
    NSString *errorDesc = nil;
    NSPropertyListFormat format;
    NSMutableDictionary *temp = (NSMutableDictionary *) [NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];
    if (!temp) {
        NSLog(@"Error reading plist: %@, format: %d", errorDesc, format);
    }
    items = [[temp objectForKey:@"Items"] mutableCopy];
    NSLog(@"Read file!");
} 
```

我这里有很大的内存泄漏！所以我用这一行替换了代码的结尾，`items = [[[temp objectForKey:@"Items"] mutableCopy] autorelease];`但现在我有了`Thread 1: EXC_BAD_ACCESS (code=1, addres=0x6000000008)`. 今天是第二天我不知道用这个方法做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:08:11.637

`items`在重新分配之前尝试显式释放：

```
if (items != nil) [items release];
items = [[temp objectForKey:@"Items"] mutableCopy]; 
```

# java - 在 Jython 中访问 Java 类的成员时出现 AttributeError

> ID：15909815
> 
> 赞同：5
> 
> 时间：2013-04-09T18:32:51.030
> 
> 标签：java, jython, attributeerror

我正在尝试将我自己的 java 类导入到一些 jython 代码中。我将.java 编译为.class 文件并将.class 文件放入.jar。然后我使用 -Dpython.path="path/to/jar/my.jar" 包含这个 .jar 文件。到目前为止一切顺利，启动我的程序时没有任何抱怨。

但是，当我到达使用我的 java 类的代码部分时，它似乎在我的 java 类中找不到任何函数。我得到以下信息 `AttributeError`：

```
AttributeError: 'pos.Test' object has no attribute 'getName' 
```

我们欢迎所有的建议！（下面的代码示例。）

Java代码：

```
package pos;

class Test{

    private String name;

    public Test(){
        name = "TEST";
        System.out.println( "Name = " + name );
    }

    public String getName(){
        return name;
    }   
} 
```

Jython 代码片段：

```
import pos.Test

...

test = pos.Test()

print 'Name = ', test.getName() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:10:18.677

这是关于可见性。您的课程是[package-private](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。如果它会起作用

```
python.security.respectJavaAccessibility = false 
```

已添加到 Jython 注册表中。请参阅[https://www.jython.org/registry.html](https://www.jython.org/registry.html)。

或者公开课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:35:26.477

您必须先在 Jython 代码中导入 Java 类，然后才能使用它。就像是：

```
from pos import Test

test = Test()
print 'Name = ', test.getName() 
```

请参阅[Jython Book 的第 8 章](http://www.jython.org/jythonbook/en/1.0/ModulesPackages.html#module-search-path-compilation-and-loading)以了解导入路径等如何在 Jython 中工作。

# intellij-idea - Intellij idea 12.0.4 中的依赖管理问题

> ID：15909816
> 
> 赞同：12
> 
> 时间：2013-04-09T18:32:53.180
> 
> 标签：intellij-idea, dependency-management

我在修改 Intellij12.04 中的依赖项时遇到问题。

在我的项目文件夹下，我有两个模块，其中第二个依赖于第一个：

*   *abcsomebusiness*
    ---> *abctests*

我想从 abctests 中删除一个依赖项并将其添加到 abcsomebusiness 模块中，但我不想创建循环依赖项树。当我尝试从 abctests 模块中删除依赖项并将其添加到 abcsomebusiness 模块中时，我收到以下错误：

*"源根目录 "C:\Perforce\depot\Projest\Main\abctests\src\test" 不能在模块 "Main" 中定义，因为它属于嵌套模块 "abctests" 的内容"*

我不知道该怎么做才能解决这个问题。谁能建议一种方法来解决我收到的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-24T12:32:40.443

你应该看看使用 apache`maven`和项目对象模型（`pom.xml`文件）

当您`<dependencies>`在 pom.xml 下定义依赖项时，它们由 IntelliJ 自动管理。因此，手动将依赖项移动到文件夹中，您将永远不会遇到此类问题。

如果您按照如下所示的方式对其进行配置，您的依赖项将自动运行。

```
 <dependencies>
        <dependency>
            <groupId>a.b.c</groupId>
            <artifactId>a-b-c-tests</artifactId>
        </dependency>
        <dependency>
            <groupId>some.other.org</groupId>
            <artifactId>some.other.dep</artifactId>
        </dependency>
    </dependencies> 
```

如何开始：安装 apache maven 并在项目的根目录添加 pom.xml。右键单击它以将其添加为 IntelliJ 中的 maven 文件。

祝你好运！

# socket.io - socket.io 加入/离开

> ID：15909821
> 
> 赞同：22
> 
> 时间：2013-04-09T18:33:07.857
> 
> 标签：socket.io

我在 socket.io wiki 上寻找使用房间但加入和离开不起作用，我想知道他们是否可能已经改变了一些东西但没有机会更新 wiki？

```
socket.join("room-"+data.meid);
socket.leave("room-"+meid); 
```

导致我收到控制台错误：

```
Uncaught TypeError: Object #<SocketNamespace> has no method 'leave' 
Uncaught TypeError: Object #<SocketNamespace> has no method 'join' 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-10-19T08:04:08.827

看起来您在客户端有 socket.join 。它是一个服务器端功能。

把它放在服务器上：

```
io.sockets.on('connection', function (socket) {

    socket.on('subscribe', function(data) { socket.join(data.room); })

    socket.on('unsubscribe', function(data) { socket.leave(data.room); })

});

setInterval(function(){
    io.sockets.in('global').emit('roomChanged', { chicken: 'tasty' });
}, 1000); 
```

这在客户端：

```
var socket = io.connect();

socket.emit("subscribe", { room: "global" });

socket.on("roomChanged", function(data) {
    console.log("roomChanged", data);
}); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-09T18:38:14.673

您可能没有正确声明“套接字”，或者您没有正确安装 Socket-io。尝试以下...

```
var io = require("socket.io");

var socket = io.listen(80);

socket.join('room');

socket.leave('room'); 
```

[这里](https://gist.github.com/crabasa/2896891)有一个有用的可执行示例。

# .htaccess - CakePHP：你能全局修改所有链接以指向另一个目录吗？

> ID：15909822
> 
> 赞同：0
> 
> 时间：2013-04-09T18:33:11.350
> 
> 标签：.htaccess, cakephp, mod-rewrite, cakephp-2.0

我的 CakePHP 应用程序位于一个子目录中，以防止它崩溃到为网站的一部分提供支持的 Wordpress 安装中：

```
example.com/ <--root
    /_wp     <--Wordpress installed here
        /page1
        /page2
    /_cake   <--CakePHP installed here
        /page3
        /page4 
```

为了保持一致性，我使用 mod_rewrite 规则将 URL 从 example.com/_cake/pageX 重写为 example.com/pageX 等。这基本上有效，但 CakePHP 仍然使用 /_cake/pageX 创建链接。因此，如果用户将鼠标悬停在链接上，“_cake”将显示在浏览器底部，当然也将显示在源代码中。

有没有办法将 CakePHP 配置为认为它实际上位于站点根目录中，以便为链接等创建所需的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:18:36.253

我还没有找到按照您想要的方式配置 CakePHP 的方法。

如果您使用[`HtmlHelper::link`](http://api.cakephp.org/2.3/class-HtmlHelper.html#_link)or创建链接[`Router::url`](http://api.cakephp.org/2.3/class-Router.html#_url)，则可以将成员添加`$url['base'] = false`到`$url`数组参数。这可以防止`_cake`在 URL 前面插入前缀。

作为替代方案，您可以创建自己的`link()`或`url()`函数，它调用`HtmlHelper::link`并始终添加`base = false`.

为此，您还必须在文档根目录中有一个 .htaccess，它将请求重写到它们的真实目的地

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ /_cake/$0 [L] 
```

您还必须注意发往`_wp`目录的请求。

# java - 用java拆分字符串不起作用

> ID：15909823
> 
> 赞同：0
> 
> 时间：2013-04-09T18:33:12.320
> 
> 标签：java, regex, string, split

我在java中有一个字符串，看起来像：

```
holdingco^(218) 333-4444^scott@holdingco.com 
```

我设置了一个等于它的字符串变量：

```
String value = "holdingco^(218) 333-4444^scott@holdingco.com"; 
```

然后我想将此字符串拆分为它的组件：

```
String[] components = value.split("^"); 
```

但是它不会拆分字符串。我试过逃避胡萝卜定界符无济于事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T18:35:19.037

采用

```
String[] components = value.split("\\^"); 
```

未转义`^`表示正则表达式中字符串的开头，未转义`$`表示结束。您必须使用两个反斜杠进行转义，因为字符串文字`"\\"`代表一个反斜杠，而这正是正则表达式所需要的。

如果您尝试使用一个反斜杠转义，它不会编译，因为`\^`它不是 Java 中的有效转义序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:35:18.727

尝试：`value.split("\\^");`这应该会更好一些

# python - Django 的 JSON 和 XML 固定装置导致 UnicodeEncodeError

> ID：15909825
> 
> 赞同：3
> 
> 时间：2013-04-09T18:33:22.950
> 
> 标签：python, mysql, django, unicode, django-models

我使用 Django 的`dumpdata`命令创建了一个 JSON 文件。当我再次使用 导入数据时`syncdb`，Python 会抛出异常：

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\xfc' in position 231: ordinal not in range(128) 
```

这必须与 JSON 文件（而不是我的 models.py）有关，因为`--no-initial-data`. 现在我想知道我的编码在哪里混淆了。

JSON 文件包含类似`'Garc\u00eda Ram\u00f3n'`. 当我使用 UTF-8 或 Latin1 手动使用 Python 对实际字符串进行编码时，我得到：

```
>>> ustring = u'García Ramón'
>>> ustring.encode('utf-8')
'Garc\xc3\xada Ram\xc3\xb3n'
>>> ustring.encode('latin1')
'Garc\xeda Ram\xf3n' 
```

为什么 syncdb 在 dumpdata 的输出中阻塞？我能做些什么来防止这种情况发生？源数据库和目标数据库（分别为 MySQL 和 PostgreSQL）都使用 UTF-8。

**更新：**当使用 XML 作为序列化格式并使用正确的编码声明时，会发生完全相同的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<django-objects version="1.0">
[...]
<field type="CharField" name="last_name">García Ramón</field> 
```

我不知道 Django 在什么时候尝试使用 ascii 编解码器编码`ü`(= `u'\xfc'`)（以及我如何改变它）。我将问题追溯到第 185 行`xml_serializer.py`：

```
 self.xml = SimplerXMLGenerator(self.stream, self.options.get("encoding", settings.DEFAULT_CHARSET)) 
```

并添加`DEFAULT_CHARSET='utf-8'`到`settings.py`，但现在我被卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T11:12:20.883

你放了吗

```
#-*- coding: utf-8 -*- 
```

到您的 .py 文件的顶部？

# matlab - 通过单个 GPU 使用多个 MATLAB 会话

> ID：15909826
> 
> 赞同：0
> 
> 时间：2013-04-09T18:33:26.337
> 
> 标签：matlab, gpu

我有一个 GPU，并且想使用可以访问同一个 GPU 的多个 MATLAB 会话（每个会话我有多个许可证）。我看到我可以毫不费力地做到这一点。但我的问题是，在这种情况下会出现数据损坏的问题吗？

# php - 在zend框架中获取用户ip地址

> ID：15909827
> 
> 赞同：18
> 
> 时间：2013-04-09T18:33:27.587
> 
> 标签：php, zend-framework2

如何在 Zend-framework 2 中获取客户端的 IP 地址？在普通 PHP 中它是 $_SERVER['REMOTE_ADDR'] ，但也许是智能 Zend 函数？

有任何想法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-09T20:37:08.217

您可以使用`Zend\Http\PhpEnvironment\RemoteAddress`该类来获取客户端 IP 地址。

```
$remote = new Zend\Http\PhpEnvironment\RemoteAddress;
echo $remote->getIpAddress(); 
```

请参阅[http://framework.zend.com/apidoc/2.1/classes/Zend.Http.PhpEnvironment.RemoteAddress.html](http://framework.zend.com/apidoc/2.1/classes/Zend.Http.PhpEnvironment.RemoteAddress.html)。

**笔记：**

要启用对标头的检查`HTTP_X_FORWARDED_FOR`，请打开`setUseProxy()`：

```
$remote->setUseProxy()->getIpAddress(); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-09T18:57:26.477

ZF2 中的请求对象具有名为 的方法`getServer`。此方法返回一个实现`\Zend\Stdlib\ParametersInterface`. 使用此特定对象，您可以从 $_SERVER 变量中获取任何内容。

以下是如何使用方法和对象的两个示例：

```
<?php 
    // Getting the entire params object
    $servParam = $request->getServer();
    $remoteAddr = $servParam->get('REMOTE_ADDR');

    // Getting specific variable
    $remoteAddr = $request->getServer('REMOTE_ADDR');
?> 
```

* * *

## 回答 #3

> 赞同：-13
> 
> 时间：2013-04-09T18:41:08.247

大秘密：

```
$_SERVER['REMOTE_ADDR'] 
```

不要重新发明已经很容易的东西！

# java - BigIntegers 的使用和关闭电源

> ID：15909835
> 
> 赞同：0
> 
> 时间：2013-04-09T18:33:37.377
> 
> 标签：java, biginteger

我发现多头不会削减它，因为我正在计算的数字太大而无法适应。我正在为 BigInts 的概念而苦苦挣扎。

可以说我有以下等式要执行。

```
int p = 11549
int n = 252817 
```

等式如下.. : ( number * p )^ (i 次方)%n 。

我刚做的很长：

```
long number;
long p;
long n;
long temp;
long total;

for (int i=0; i<6;i++) {
   temp = numer*Math.pow(p,i);
   total += temp;
}

total %= n; 
```

但是当我使用 Math.pow 时，使用这种方法的数字会变得很大，我需要使用 BigIntegers。我只是不明白我该怎么做。现在我得到了这个：（在我弄清楚电源关闭语句之前，缺少 %。）

```
long temp;
long p;
BigInteger opphoyd;
BigInteger mod;
for (int i=0;i<6;i++) {
   temp = number * p;
   opphoyd = BigInteger.valueOf(temp);
   mod = BigInteger.valueOf(i);
   mod.add(opphoyd.pow(i));
   mod.add(opphoyd);
   System.out.println(mod);  
} 
```

但它根本不起作用，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:38:08.420

BigInteger 的 add 方法（以及大多数其他方法）不会修改调用它的 BigInteger。相反，它返回一个新的 BigInteger。

所以你需要这样做：

`BigInteger sum = mod.add(opphoyd);`

看看[javadocs](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)，它在使用 BigInteger 时会很有帮助。

```
long temp;
long p;
BigInteger opphoyd;
BigInteger mod;
for( int i = 0; i < 6; i++ ) {
   temp = number * p;
   opphoyd = BigInteger.valueOf(temp);
   mod = BigInteger.valueOf(i);
   BigInteger sum = mod.add( opphoyd.pow(i));
   sum = sum.add(opphoyd);
   System.out.println( sum );
} 
```

# primefaces - 在执行primefaces数据表过滤后调用方法

> ID：15909837
> 
> 赞同：0
> 
> 时间：2013-04-09T18:33:42.643
> 
> 标签：primefaces

我有这个数据表：

```
<p:dataTable  id="tabla_gral" rendered="#{consumoMaterial.verTabla}" var="item"  paginator="true" rows="15" rowKey="#{item.no}" value="#{consumoMaterial.listadoConsumo}" filteredValue="#{consumoMaterial.listadoConsumoFiltered}">  
                        <p:ajax event="filter"  listener="#{consumoMaterial.actualizarSaldos}" update=":form2:tabla_gral"/>
                        <f:facet name="header">
                            <h:outputText value="Búsqueda de Consumo por: #{consumoMaterial.tipoBuscar}: '#{consumoMaterial.codigo}'"/>
                        </f:facet>

                        <p:column exportable="#{consumoMaterial.no}" rendered="#{consumoMaterial.no}" id="cclave" sortBy="#{item.no}" filterBy="#{item.no}" filterMatchMode="contains">
                            <f:facet name="header">
                                <h:outputText value="Nro"/>
                            </f:facet>
                            <h:outputText value="#{item.no}"/>
                        </p:column>

                        <p:column exportable="#{consumoMaterial.centroCosto}" rendered="#{consumoMaterial.centroCosto}" id="cconcepto" sortBy="#{item.centroCosto}" filterBy="#{item.centroCosto}" filterMatchMode="contains">
                            <f:facet name="header">
                                <h:outputText value="Centro de Costo"/>
                            </f:facet>
                            <h:outputText value="#{item.centroCosto}"/>            
                        </p:column>

                        <p:column exportable="#{consumoMaterial.codigoAlmacen}" rendered="#{consumoMaterial.codigoAlmacen}" id="ctipo" sortBy="#{item.codigoAlmacen}" filterBy="#{item.codigoAlmacen}" filterMatchMode="contains">
                            <f:facet name="header">
                                <h:outputText value="Almacén"/>
                            </f:facet>
                            <h:outputText value="#{item.codigoAlmacen}"/>
                        </p:column> </p:dataTable> 
```

我想在执行primefaces数据表过滤后调用一个方法，我用

```
 <p:ajax event="filter"  listener="#{consumoMaterial.actualizarSaldos}" update=":form2:tabla_gral"/> 
```

但是当调用 actualizarSaldos listadoConsumoFiltered 时为空。

# html - XSLT For-Each 开始一个 div，每隔 4 个元素打开和关闭一次

> ID：15909838
> 
> 赞同：0
> 
> 时间：2013-04-09T18:33:45.247
> 
> 标签：html, xslt, umbraco

所以我有一个显示员工档案的模板。像这样：

```
<div class="row">
  <li></li>
  <li></li>
  <li></li>
  <li></li>
</div>
<div class="row">
  <li></li>
  <li></li>
  <li></li>
  <li></li>
</div> 
```

在我的 XSLT For-each 循环中，我需要一种将“div class=row”包装在每组 4 个列表项周围的方法。我可以测试计数以查看我在哪个元素上，但问题是在 XSLT 中包装 4 组，因为您不能使用模数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T18:54:11.883

> 问题是在 XSLT 中包装 4 组，因为您不能使用模数。

相反。:) 你想要的是[`mod operator`](http://zvon.org/xxl/XSLTreference/Output/operator_mod.html). 此外，该`<xsl:for-each>`元素通常不是最可重用的方法。相反，请考虑使用更具延展性的模板的解决方案。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:variable name="vNumOfElems" select="4"/>

  <xsl:template match="/*">
    <ul>
      <xsl:apply-templates select="li[position() mod $vNumOfElems = 1]"/>
    </ul>
  </xsl:template>

  <xsl:template match="li">
    <div class="row">
      <xsl:copy-of
        select=".|following-sibling::li[not(position() &gt; $vNumOfElems - 1)]"/>
    </div>
  </xsl:template>
</xsl:stylesheet> 
```

**...应用于建议的源 XML：**

```
<ul>
  <li/>
  <li/>
  <li/>
  <li/>
  <li/>
  <li/>
  <li/>
  <li/>
</ul> 
```

**...产生了想要的结果（尽管它可能无法通过有效 HTML 的嗅探测试）：**

```
<ul>
  <div class="row">
    <li />
    <li />
    <li />
    <li />
  </div>
  <div class="row">
    <li />
    <li />
    <li />
    <li />
  </div>
</ul> 
```

请注意使用变量 -- `$vNumOfElems`-- 来保持应该包含在组中的元素的数量。这提供了便利。**以后，如果您需要`<li>`每个 3 个元素`<div>`，只需进行更改：**

```
<xsl:variable name="vNumOfElems" select="3" /> 
```

**...再次提供正确的结果：**

```
<ul>
  <div class="row">
    <li />
    <li />
    <li />
  </div>
  <div class="row">
    <li />
    <li />
    <li />
  </div>
  <div class="row">
    <li />
    <li />
  </div>
</ul> 
```

# ruby-on-rails - 使用来自两个表的条 件进行 Rails 数据库查询？

> ID：15909845
> 
> 赞同：1
> 
> 时间：2013-04-09T18:34:20.347
> 
> 标签：ruby-on-rails, activerecord

我有这些模型：

```
class Post
  belongs_to :user
end

class User
  has_many :posts
end 
```

我想获得任何来宾用户（即 user.role == 'guest'）的标题为“Some Title”的帖子。

标题在来宾用户中是唯一的，但某些非来宾用户可能有具有该标题的帖子。我正在尝试使用[Rails 指南](http://guides.rubyonrails.org/active_record_querying.html)和[Api](http://apidock.com/rails/ActiveRecord/Base/find/class)，但我似乎无法将正确的语法放在一起。

我希望它像 一样简单`User.where(:role => 'guest').posts.find_by_title('some title')`，但这会*为 #ActiveRecord::Relation:0x4e6d380 抛出未定义的方法“posts”*。

`Post.find_by_title('some title', :conditions => {:users => {:role => 'guest'}, :joins => :users}`抛出*PG::Error: 错误：缺少表“用户”的 FROM 子句条目。*

*找不到名为“用户”的*`Post.joins(:users)`throws 关联的任何内容。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:37:36.540

阅读有关使用 ActiveRecord 方法`.joins`生成的信息`SQL joins`。

```
User.joins(:posts).where("users.role = ? AND posts.title = ?", 'guest', 'some title') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:37:20.547

在连接上尝试 Post.joins(:user) （不是 :users）。*

# jquery - td 内的复选框 - 动态

> ID：15909846
> 
> 赞同：0
> 
> 时间：2013-04-09T18:34:26.430
> 
> 标签：jquery, checkbox

这是我要动态添加复选框的表格。

```
 <td width="1%"></td>
    <td width="50%" valign="top"><div class="container" id="Container">
    //generate checkbox dyanmically here
    //each checkbox I add must be a separate td
    </td> 
```

我想在上面的行中动态添加复选框。如果数据有 3 个值，则必须生成三个复选框以及该值。例如，如果它有红色、棕色、橙色

```
Check box must look like below

[] Red
[] Brown
[] Orange

DataHandler.getList(item.val(),function(data) {
for (var i=0;i<=length;i++)
{
$("#Container").append("<input type='checkbox' id='myCheck"+i+"' value='"+ data.details[i] + "'>");
}
}); 
```

for 循环内的行不起作用。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:08:35.437

```
for(var i=0; i<data.length; i++)
{
  $('#Container').append('<input type="checkbox" /> ' + data[i].name + '<br />');
} 
```

# html - 悬停时突出显示 div 内的非矩形部分

> ID：15909848
> 
> 赞同：1
> 
> 时间：2013-04-09T18:34:36.360
> 
> 标签：html, css

我有一个 div ( rectangle )，在里面我想要一个三角形。我想在悬停时强调这一点。我怎么做？

我正在考虑拥有 2 张具有相同形状和不同不透明度的图像，并在悬停时交换它们。会有另一种方法吗？你能有一个非矩形的div吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:45:34.607

这取决于您需要在 Internet Explorer 中返回多远以及您使用它的三角形的上下文，但假设您不关心 Internet Explorer。

@CSS Tricks 上的 Chris Coyer 已经设置了一个很好的教程。
[http://css-tricks.com/triangle-with-shadow/](http://css-tricks.com/triangle-with-shadow/)

如果您打算将其用作图标或按钮，您可能需要查看 [http://fortawesome.github.io/Font-Awesome/](http://fortawesome.github.io/Font-Awesome/)。它完全免费并且很容易实现。我在几个项目中使用过它，它是为与 bootstrap 一起使用而设计的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:06:44.757

你可以试试：http: [//jsfiddle.net/H42U7/](http://jsfiddle.net/H42U7/)

CSS代码是：

```
.triangle-up {
width: 0;
height: 0;
border-left: 50px solid transparent;
border-right: 50px solid transparent;
border-bottom: 100px solid #959595;}

.triangle-up:hover {
width: 0;
height: 0;
border-left: 50px solid transparent;
border-right: 50px solid transparent;
border-bottom: 100px solid #123456;} 
```

的HTML：

```
<div id="container">
<div class="triangle-up">
</div></div> 
```

要旋转三角形，请查看此站点： [http ://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/)

# javascript - 在没有 AJAX 的情况下更新 Kendo UI TabStrip 的内容时出现问题？

> ID：15909849
> 
> 赞同：0
> 
> 时间：2013-04-09T18:34:40.840
> 
> 标签：javascript, jquery, tabs, kendo-ui

我有一个小控制台，在我的网站上显示某些操作的输出，需要另一个控制台来显示不同类型的输出，这让我想在 Kendo UI TabStrip 中结合两个控制台，问题是显示的信息控制台上的 AJAX 没有收到，所以当我像以前一样开始插入 HTML 元素时，选项卡没有更新。

这就是我初始化选项卡的方式：

```
 $('#tabConsole').kendoTabStrip({
        animation: {
            open: {
                effects:'fadeIn'
            }
        }
    }); 
```

这是我的 HTML 的外观：

```
<div id="tabConsole">
      <ul>
           <li class="k-state-active">Salida</li>
           <li id="notificacionTab">Notificaciones</li>
      </ul>
      <div id="userConsole"></div>
      <div id="notificationConsole"></div>
</div> 
```

这就是我尝试更新它的方式：

```
function appendToConsole(content, type, optional) {
//code to append to console
    var actualDate = new Date();
    var prevContent = $('#userConsole').html();
    if (typeof prevContent === 'undefined') {
        prevContent = '';
    }
    var strType = '';
    var iconType = '';
    var moreOutput = '';
    if (type == 1) {
        strType = 'infoConsole';
        iconType = 'infoIcon.png';
    } else if (type == 2) {
        strType = 'warningConsole';
        iconType = 'warningIcon.png';
        moreOutput = '<img id="viewDetails" value="' + optional + '" class="moreConsole" src="../Content/images/icons/arrow.png">';
    } else if (type == 3) {
        strType = 'errorConsole';
        iconType = 'errorIcon.png';
    }
    var iconOutput = '<img class="iconConsole" src="../Content/images/icons/' + iconType + '">';
    var dateOutput = '<div class="dateConsole">' + iconOutput + ' ' + actualDate.toLocaleDateString() + ', ' + actualDate.toLocaleTimeString() + ' : </div>';
    var consoleOutput = prevContent + '<div class="outputConsole">' + dateOutput + content + moreOutput + '</div>';
    $('#userConsole').html(consoleOutput.toString());
    var height = $('#userConsole')[0].scrollHeight;
    $('#userConsole').scrollTop(height);
//my try to update the tab
    var tabStrip = $('#tabConsole'),
        selectedIndex = tabStrip.data('kendoTabStrip').select().index(),
        clone = original.clone(true);
    clone.children('ul')
    .children('li')
    .eq(selectedIndex)
    .addClass('k-state-active')
    .end();
    tabStrip.replaceWith(clone);
    $('#tabConsole').kendoTabStrip({
        animation: {
            open: {
                effects: 'fadeIn'
            }
        }
    });
} 
```

如何更新 TabStrip 内的 DIV 内容？

**编辑**

似乎 Kendo UI 将代表选项卡的 DIV 的 id 重命名为 tabConsole-1 和 tabConsole-2，解释了为什么更新不起作用，仍然有很多奇怪的行为，我必须为每个 DIV 指定高度，所以溢出属性会起作用，当设置为绝对位置时，具有 id *viewDetails*和类*moreConsole*的图像也会在代表选项卡的 DIV 之外呈现，但是如果我将位置属性更改为相对，图像会留在 DIV 内但不显示像我想要的那样在 DIV 的末尾，但相对于它们之前的 DIV 的大小。

我真的很困惑如何设置样式以便正确显示内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:45:39.600

`tabStrip`可以使用以下方法向 a 添加内容：

```
$(tabConsole.contentElement(idx)).append(newContent) 
```

在哪里：

*   `idx`是标签索引，
*   `newContent`是您要添加到现有内容的内容，并且
*   `tabConsole`是设置为 的变量`$("#...").kendoTabStrip(...).data("kendoTabStrip");`。

您不需要创建新的 tabStrip（此外，您**不应该**重新创建 KendoUI 元素，因为这是一项非常昂贵的操作）。

关于使用相同的多个标签`id`......你不应该使用它，`class`而是使用它。`id`s 应该是唯一的。

我仍在尝试了解您的样式问题。

# c# - 将位置添加到单独的配置文件

> ID：15909855
> 
> 赞同：2
> 
> 时间：2013-04-09T18:34:53.883
> 
> 标签：c#, asp.net, web-config

我有一个 web.config 文件，其中包含很多这样的部分：

```
<location path="folder">
  <system.web>
    <authorization>
      <deny users="*"/>
    </authorization>
  </system.web>
</location> 
```

这可以将它分成不同的文件然后在 web.config 中调用吗？这只会使它在我们的 web.config 文件中更清晰以便于理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:37:17.000

您可以将其分离到单独的 web.config 中，然后将新的配置文件放在相应的文件夹中。因此，新的 web.config 位于`path`. 新文件如下所示：

```
<configuration>
    <system.web>
        <authorization>
            <deny users="*"/>
        </authorization>
    </system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:38:59.847

您可以使用标签上的[`configSource`（请参阅文档）](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx)属性`authorization`为所有位置导入通用配置文件。

请参阅[减少 Web.config 中的授权冗余](http://asynchrony.blogspot.com/2008/12/reducing-authorization-redundancy-in.html)（博客文章）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:40:25.873

你试过 ConfigSource 吗？

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx)：获取或设置定义关联配置节的包含文件的名称（如果存在此类文件）。

[http://blog.andreloker.de/post/2008/06/Keep-your-config-clean-with-external-config-files.aspx](http://blog.andreloker.de/post/2008/06/Keep-your-config-clean-with-external-config-files.aspx)

# php - PHP中的curdate()

> ID：15909857
> 
> 赞同：-4
> 
> 时间：2013-04-09T18:34:55.407
> 
> 标签：php, mysql

我正在寻找实现在mysql上执行时会发出称为“curdate（）”函数的东西。

但是问题是，每当我尝试在 PHP 中添加“curdate()”作为函数时

```
$today = curdate(); 
```

它不会工作（当然哈哈。）

所以，我的问题（改述）是......

我如何使它如此 curdate() 是一个 PHP 函数（而不仅仅是一个 SQL 函数。）

* * *

我试图使用

```
$today = date("Y-m-d"); 
```

但由于某种原因它不起作用，我需要添加一些我猜的东西。

（作为旁注，我使用的是“profile.class.php”文件，所以也许这可以解释为什么“$today = date("Ymd");" 不起作用。）

* * *

我的 Profile.class.php 配置

* * *

```
function add_viewed_me($member_id,$member_viewed)
{
                $time_now = date("Y-m-d");          

    $sql="insert into view_me";
    $sql.="(member_id";
    $sql.=", member_viewed";
    $sql.=", last_viewed_on";
    $sql.=", num_viewed)";
    $sql.=" values($member_id";
    $sql.=", $member_viewed";
    $sql.=", '$time_now'";
    $sql.=", 1)";

    $res=mysql_query($sql);

    if($res)
    {
        return 1;
    }
    else
    {
        return 0;
    }           
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T18:37:04.163

您只想要一个返回当前日期的 PHP 函数吗？

```
function curdate() {
    return date('Y-m-d');
}

// echo the date to screen
echo curdate(); 
```

编辑：

您需要直接编辑查询字符串：

`$sql.= ", CURDATE()";`代替`$sql.=", '$time_now'";`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T18:39:43.510

只需使用 MySQL 的`CURDATE()`功能；不需要 PHP 函数。

```
$sql="insert into view_me (member_id, member_viewed, last_viewed_on, num_viewed)
      values($member_id, $member_viewed, CURDATE(), 1)"; 
```

# html - 另一个带有引导程序的导航栏下方的两个导航栏

> ID：15909860
> 
> 赞同：2
> 
> 时间：2013-04-09T18:35:11.710
> 
> 标签：html, css, twitter-bootstrap

我从 Bootstrap 开始，导航栏元素有一个小问题。我需要声明一个宽度为 1024px 的容器，并且必须添加两个导航栏。在顶部，另一个在它下面。两个导航栏都需要与右侧 div 的距离为 0px。

（Stackoverflow 不想让我发布图片，但我认为如果你能明白我的意思会更容易：[http](http://www.abload.de/img/asdjraik.png) ://www.abload.de/img/asdjraik.png ）

如您所见，第一个导航栏工作正常，但现在我需要在它下面再添加一个。它下面的容器的填充应该正好是 5px。

我的问题是，另一个导航栏从顶部获得与第一个导航栏相同的填充。我不能把它低于另一个。当我为这个问题定义以下类时，会出现另一个类：

```
.small-margin {
    margin-top: 20px;
}    

.big-margin {
    margin-top: 110px;
} 
```

我的 HTML 如下所示：

```
 <div class="navbar small-margin">
        <div class="navbar-inner">
            <div class="pull-right">
                <ul class="nav">
                    <li><a href="#">link 1</a></li>
                    <li><a href="#">link 2</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="clear"></div>
    <div class="navbar big-margin">
        <div class="navbar-inner">
            <div class="pull-right">
                <ul class="nav">
                    <li><a href="#">another link 1</a></li>
                    <li><a href="#">another link 2</a></li>
                </ul>
            </div>
        </div>
    </div> 
```

第二个导航栏出现在第一个导航栏的左侧而不是下方。我尝试了很多 CSS 修复。

任何人都知道如何在第一个导航栏下方获得第二个导航栏？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:59:23.783

我试过你的代码，它的作品

![在此处输入图像描述](https://i.stack.imgur.com/JP58J.png)

我也尝试将它添加到 1024px 容器中

```
.container{
    max-width: 1024px;
} 
```

这是结果 ![在此处输入图像描述](https://i.stack.imgur.com/fiIfx.png)

您的 css 代码必须与引导程序冲突。也许你可以尝试用`.row`. 我相信这个解决方案肯定会让所有导航栏分开。

```
<div class="row-fluid">
  <div class="span12">
    ... navbar 1 ...
  </div>
</div>

<div class="row-fluid">
  <div class="span12">
    ... navbar 2 ...
  </div>
</div> 
```

# php - 如何在从 php 回显页面收到的 .post() 输出数据中运行 javascript 函数

> ID：15909864
> 
> 赞同：1
> 
> 时间：2013-04-09T18:35:18.917
> 
> 标签：php, javascript, runtime, output, .post

我通过调用 x.php 在我的网页运行时加载了新数据，我检索了动态生成的 html 和 javascript。但是javascripts函数没有运行。

**索引页面中的代码，调用php页面：**

```
$.post('x.php', {
    id: num
}, function (output) {
    document.getElementById('view').innerHTML = output;
}); 
```

**示例 html**

```
<div id='view2'></div> 
```

***输出*js函数示例：**

```
<script type="text/javascript">
    function a(y, s) {
        id + y / s
    }

    function v(d) {
        document.getElementById('view2').innerHTML = d;
    }
</script> 
```

*如何使输出数据中的新 JavaScript 函数与加载的早期 js 一起运行？其他功能将取决于这个新生成的功能*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:57:58.217

当您从 Post/Get 检索 JS 时，需要使用 eval 评估在响应中不使用 js。我的意思是JS不会自动评估，因此您需要手动执行

```
$.post('x.php', {
    id: num
}, function (output) {
    eval(output);
} 
```

**输出应为纯 js，此外，使用 eval**不安全:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:42:48.707

您返回的 javascript 需要由页面上的任何 javascript 调用；)

您可以尝试放置：

```
a(y,s);
v(d); 
```

在你的函数声明之后。当您在 js 之前放置“函数”时，就像您在声明一个变量：

```
var x; 
```

此外，您的 ID 当前不匹配（视图与视图 2），我怀疑这可能只是一个错字。

# html - Html 和身高不是 100%

> ID：15909873
> 
> 赞同：0
> 
> 时间：2013-04-09T18:35:49.330
> 
> 标签：html, css, jquery-mobile

我有一个 jquery 移动页面。即使我在 html 和 body 上设置了 100%，html 和 body 的高度仍然与其内容容器（landing-container）不同。对于这个 jsfiddle 示例，它的主体高度约为 300 像素，但着陆容器的高度约为 1600 像素。我正在使用 Chrome。为什么会发生这种情况，是否有任何解决方法？

```
html, body {
    min-height: 100%;
    -webkit-text-size-adjust: 100%;
}

<html>
<body>
<div id="holder" data-role="page" data-theme="none" data-ajax="false">
    <div class="header">
    </div>
    <div class="landing-container">
    </div>
</div>
</body>
</html> 
```

你可以在这里查看。 [http://jsfiddle.net/angelohuang/brbqh/4/](http://jsfiddle.net/angelohuang/brbqh/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:51:53.467

可能是因为你有`position: absolute`一些东西？

绝对定位使元素脱离了正常的布局流程，因此它不会影响其父元素的高度。

看起来 jQuery mobile 正在添加许多这些样式作为这些`data-role`东西的结果。我个人对 jQuery mobile 并不熟悉，但也许您以非标准方式使用它？

**编辑**

哦，哈哈哈。这也可以：

```
.ui-mobile, .ui-mobile body {
  height: 99.9%;
} 
```

这样它永远不会超过窗口高度，除非我很困惑。

# android - Android 在 EditText 小部件上动态设置 9-patch 背景

> ID：15909879
> 
> 赞同：1
> 
> 时间：2013-04-09T18:36:00.347
> 
> 标签：android, android-edittext, nine-patch, setbackground

首先感谢您花时间阅读本文。

所以我创建了三个 9-patch 文件，它们工作正常，因为我可以在我创建的注册表单上将它们设置为 XML，它们看起来很好。

前两个是使用 XML 文件设置的，具体取决于 EditText state_focused = 'true' 还是 state_focused='false'。那工作得很好。

但是，如果用户没有在特定的 EditText 中输入任何文本，我现在想将背景设置为另一个不同的 9-patch 文件。以下是我想要执行的功能（etUsername 已正确初始化为 EditText）：

```
private Boolean areAllEditTextFilledIn() {
    Boolean result = true;
    if (username.length() == 0) {
        etUsername.setBackground(editTextError);
        result = false;
    }
    return result;
} 
```

这是我尝试将 9-patch 放入我的代码中的代码。

```
NinePatchDrawable editTextError = (NinePatchDrawable) getResources().getDrawable(R.drawable.edittext_not_filled_in); //Line 42 where null pointer exception occurs 
```

但是，当我的注册活动被加载时，运行它会给我这个结果

```
04-09 19:23:32.928: E/AndroidRuntime(14401): FATAL EXCEPTION: main
04-09 19:23:32.928: E/AndroidRuntime(14401): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{cgas4.lboro.loco/cgas4.lboro.loco.Register}: java.lang.NullPointerException
04-09 19:23:32.928: E/AndroidRuntime(14401):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2267)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2387)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at android.app.ActivityThread.access$600(ActivityThread.java:151)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1331)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at android.os.Looper.loop(Looper.java:155)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at android.app.ActivityThread.main(ActivityThread.java:5485)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at java.lang.reflect.Method.invoke(Method.java:511)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at dalvik.system.NativeStart.main(Native Method)
04-09 19:23:32.928: E/AndroidRuntime(14401): Caused by: java.lang.NullPointerException
04-09 19:23:32.928: E/AndroidRuntime(14401):    at android.content.ContextWrapper.getResources(ContextWrapper.java:81)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at cgas4.lboro.loco.Register.<init>(Register.java:42)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at java.lang.Class.newInstanceImpl(Native Method)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at java.lang.Class.newInstance(Class.java:1319)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at android.app.Instrumentation.newActivity(Instrumentation.java:1069)
04-09 19:23:32.928: E/AndroidRuntime(14401):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2258)
04-09 19:23:32.928: E/AndroidRuntime(14401):    ... 11 more 
```

9-patch的名字是edittext_not_filled_in.9.png

让我知道您是否需要任何其他信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:58:45.807

在我看来，你把这一行：

```
NinePatchDrawable editTextError = (NinePatchDrawable) getResources().getDrawable(R.drawable.edittext_not_filled_in); 
```

在类主体中，您在其中声明该字段。缩小到

```
NinePatchDrawable editTextError; 
```

然后在 onCreate 放

```
editTextError = (NinePatchDrawable) getResources().getDrawable(R.drawable.edittext_not_filled_in); 
```

这应该可以解决您的问题。

# node.js - 使用 Node.js http.get 时，套接字似乎没有关闭

> ID：15909884
> 
> 赞同：13
> 
> 时间：2013-04-09T18:36:46.053
> 
> 标签：node.js, sockets, http

OS X 10.8.3

节点 0.10.0

我正在使用“http”模块来发出 Facebook 图形 API 的请求。

以下是我传递给“http.get”的选项：

```
var options = {host: 'graph.facebook.com',
               port: 80,
               path: '/' + fb_id + '/picture'};  //fb_id is a Facebook user identifier 
```

我的代码如下所示：

```
http.get(options,
  function(res) {
    ...some stuff...
    DONE(RESULT);  //DONE is a callback function
  }).on('error', function(e) {
       ...some error handling...
}); 
```

我观察到的是，我只能执行与 http.globalAgent.maxSockets 的值一样多的请求。一旦我达到这么多请求，对 http.get 的下一次调用就永远不会（显然）连接。我已经确认我没有收到请求错误。

就好像在响应进来后套接字没有被关闭。

作为响应处理程序的一部分，我需要做些什么来确保套接字已关闭？

这些套接字是否由于默认的保活行为而没有关闭？

我应该如何进行调试？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T18:50:11.687

尝试`agent: false`在选项中设置。默认行为确实是为 HTTP keep-alive 保持连接打开：

```
var options = {host: 'graph.facebook.com',
               port: 80,
               path: '/' + fb_id + '/picture',
               agent: false}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-24T15:49:02.017

Node 的 http 模块声明代理默认为全局代理：[http://nodejs.org/api/http.html#http_http_globalagent](http://nodejs.org/api/http.html#http_http_globalagent)，这意味着无论发起请求的模块如何，都会共享保持活动状态。

顺便说一句，在 2013 年 4 月 9 日 20:47 回复 Wes 的评论：加载节点模块多少次并不重要，它只会加载一次并由所有模块共享。

您遇到的是池耗尽问题。避免它的最简单方法是使用具有所需 maxSockets的新代理 ( [http://nodejs.org/api/http.html#http_class_http_agent )。](http://nodejs.org/api/http.html#http_class_http_agent)请记住，如果您将创建的代理放在该模块的导出中，则可以在模块之间共享它（节点中的模块是有状态的！！！）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-01T11:54:39.773

我经历了同样的行为，除了我的连接在超时后最终被重用。检查连接是否在一段时间（几分钟）后被重用，并检查响应标头是否包含“连接：保持活动”。

如果是这种情况，一个可能的解决方案是使用“连接：关闭”标头而不是保持活动状态，这样就可以像通常的设置一样更早地重用池连接。我不确定这是否会导致使用 facebook 端点出现任何性能问题。

```
var options = {host: 'graph.facebook.com',
               port: 80,
               path: '/' + fb_id + '/picture',
               headers: { 'Connection':'Close' }
}; 
```

对我来说，使用 agent:false 不起作用，因为我发送的大量请求耗尽了服务器资源。

# sql - 在第一次出现时在表列中查找和替换部分字符串

> ID：15909887
> 
> 赞同：0
> 
> 时间：2013-04-09T18:36:58.383
> 
> 标签：sql, sql-server, tsql, replace, wildcard

我需要在我的表中查找并替换所有 'x' ' X '，但仅在某些情况下，即当 x 接近 [0-9] 时。

这是我到目前为止的代码，但是当我执行它时，它会替换所有出现的

```
update  [tCustItems]
set     [CustLongDesc] = replace([CustLongDesc], 'x', ' X ')
WHERE   CustLongDesc LIKE '%[0-9]x%'

This is the result I get... 
1/2-13 X 2.75 HE X TAP BOLT FULL THRD GR5 ZINC
this is what I want...
1/2-13 X 2.75 HEX TAP BOLT FULL THRD GR5 ZINC 
```

请注意，Hex 现在是 He X

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:05:25.633

放入两个空格，因为一个没有清楚地显示出来。
请不要要求第二个更多的代码。
你问了一个例子，这是一个例子。

```
select stuff('1/2-13X2.75 HEX TAP BOLT FULL THRD GR5 ZINC',
              patindex('%[0-9]X%','1/2-13X2.75 HEX TAP BOLT FULL THRD GR5 ZINC') + 1,0,'  ') 
```

# python - Python 将字典内容写入 ConfigParser

> ID：15909889
> 
> 赞同：7
> 
> 时间：2013-04-09T18:37:06.527
> 
> 标签：python, dictionary, configparser

我正在尝试将字典的内容写入*（然后读入）*到 ConfigParser，并且我相信我根据[文档](http://docs.python.org/dev/library/configparser.html)正确地执行了此操作，但似乎无法使其正常工作。有人可以帮忙吗？

```
import ConfigParser
parser = ConfigParser.ConfigParser()

parser['User_Info'] = {"User1-votes":"36","User1-gamestart":"13232323","User2-votes":"36","User2-gamestart":"234234234","User3-votes":"36","User3-gamestart":"13232323"}

Traceback (most recent call last):   File "<stdin>", line 1, in
<module> AttributeError: ConfigParser instance has no attribute '__setitem__' 
```

我正在寻找的是有一个我可以更新的字典，最后写入一个配置文件，所以它看起来像：

```
[User_Info]
User1-gamestart = 13232323
User3-votes = 36
User2-votes = 36
User1-votes = 36
User2-gamestart = 234234234
User3-gamestart = 13232323 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T18:51:12.120

您正在阅读 python 3.4 的文档，但您可能使用的是较旧版本的 python。

以下是如何在旧版本的 python 中使用 ConfigParser：

```
import ConfigParser
parser = ConfigParser.ConfigParser()

info = {"User1-votes":"36","User1-gamestart":"13232323","User2-votes":"36","User2-gamestart":"234234234","User3-votes":"36","User3-gamestart":"13232323"}

parser.add_section('User-Info')
for key in info.keys():
    parser.set('User-Info', key, info[key])

with open('config.ini', 'w') as f:
    parser.write(f) 
```

# c++ - 打开文件然后关闭不会释放文件锁定

> ID：15909896
> 
> 赞同：0
> 
> 时间：2013-04-09T18:37:21.390
> 
> 标签：c++, linux, node.js

我在 node.js 函数中有一些 c++ 代码，它打开这样的文件并将其读入缓冲区然后关闭它。

```
ifstream inputFile(source.c_str(), ios::in | ios::binary);
inputFile.read(buffer, results.st_size);
inputFile.close(); 
```

然后我以某种方式操作文件并尝试将其写回相同的位置。我收到以下错误代码和消息：“文本文件忙”。我知道没有其他进程触及该文件。如果我将文件重命名为某个随机名称，然后将其重命名，那么我就可以覆盖该文件。

# java - 多输出路径（Java - Hadoop - MapReduce）

> ID：15909897
> 
> 赞同：3
> 
> 时间：2013-04-09T18:37:22.040
> 
> 标签：java, hadoop, mapreduce, output

我做了两个 MapReduce 工作，我希望第二个工作能够将我的结果写入两个不同的文件，位于两个不同的目录中。在某种意义上，我想要类似于 FileInputFormat.addInputPath(.., multiple input path) 的东西，但对于输出。

我对 MapReduce 完全陌生，我有一个特殊性，可以`context.write(..)`在我的 Reduce 步骤中使用的 Hadoop 0.21.0 中编写我的代码，但我不知道如何控制多个输出路径......

谢谢你的时间 ！

我的第一份工作中的 reduceCode，向您展示我只知道如何输出（它进入 /../part* 文件。但现在我想要的是能够为不同的输出指定两个精确文件，具体取决于钥匙） ：

```
public static class NormalizeReducer extends Reducer<LongWritable, NetflixRating, LongWritable, NetflixUser> {
    public void reduce(LongWritable key, Iterable<NetflixRating> values, Context context) throws IOException, InterruptedException {
        NetflixUser user = new NetflixUser(key.get());
        for(NetflixRating r : values) {
            user.addRating(new NetflixRating(r));
        }
        user.normalizeRatings();
        user.reduceRatings();
        context.write(key, user);
    }
} 
```

* * *

**编辑：**所以我做了你提到的最后一条评论中的方法，Amar。我不知道它是否有效，我的 HDFS 还有其他问题，但在我忘记之前，为了文明，让我们把我的发现放在这里：

[http://archive.cloudera.com/cdh/3/hadoop-0.20.2+228/api/org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html](http://archive.cloudera.com/cdh/3/hadoop-0.20.2+228/api/org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html)

*   MultipleOutputs 不能代替 FormatOutputFormat。您使用 FormatOutputFormat 定义一个输出路径，然后您可以使用多个 MultipleOutputs 添加更多输出路径。
*   addNamedOutput 方法： String namedOutput 只是一个描述词。
*   您实际上在 write 方法中定义路径，即 String baseOutputPath arg。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T01:43:01.027

所以我做了你提到的最后一条评论中的方法，Amar。我不知道它是否有效，我的 HDFS 还有其他问题，但在我忘记之前，为了文明，让我们把我的发现放在这里：

[http://archive.cloudera.com/cdh/3/hadoop-0.20.2+228/api/org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html](http://archive.cloudera.com/cdh/3/hadoop-0.20.2+228/api/org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html)

MultipleOutputs 不能代替 FormatOutputFormat。您使用 FormatOutputFormat 定义一个输出路径，然后您可以使用多个 MultipleOutputs 添加更多输出路径。addNamedOutput 方法： String namedOutput 只是一个描述词。您实际上在 write 方法中定义路径，即 String baseOutputPath arg。

# ios - iOS 6，ARC：原始类型实例变量失去价值

> ID：15909902
> 
> 赞同：0
> 
> 时间：2013-04-09T18:37:27.353
> 
> 标签：ios, int, automatic-ref-counting, instance-variables

我面临一个简单的问题，我不明白如何解决。看起来涉及ARC，但我不知道在哪里以及如何。在 viewWillAppear 中，我检查从 sqlite 获取的 int 值并将其值分配给实例 int var。

在 viewWillAppear 中设置 NSLogs 表示 kStatus.grade 获得了正确的值，并且在将其值分配给实例 var _currentGrade 后，_currentGrade 获得了相同的 int 值。当 viewWillAppear 退出时，奇迹发生了。_currentGrade 失去其价值并获得默认值 0。

只是好奇邪恶在哪里。

```
@property (nonatomic)int currentGrade;

-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    DBAccess *acc=[[DBAccess alloc]init];
    if(_iCameFromItems==1)
    {
      NSMutableArray *arr=[acc selectItemStatus:_someID];
      kmStatus *kStatus=[arr objectAtIndex:0];
      _currentGrade=kStatus.grade;
      // _currentGrade is that instance var
    }
} 
```

# windows-phone-8 - RequestProductPurchaseAsync 和事务失败

> ID：15909906
> 
> 赞同：3
> 
> 时间：2013-04-09T18:37:42.607
> 
> 标签：windows-phone-8, in-app-purchase, windows-store-apps, windows-store

我正在尝试为 Windows Phone 8 应用实施应用内购买。`RequestProductPurchaseAsync`不存在专门针对手机的文档。在 Windows 应用商店文档中，有一句有趣的话：

> 您应该将成功结果视为表明异步过程已完成且没有错误。为确保交易本身成功，请检查返回收据中的 LicenseInformation 元素。

收据中没有`LicenseInformation`元素（或属性）。有`Receipt`、`ProductReceipt`和`Signature`。问题 - 以前有人使用过应用内购买吗？如何报告交易失败/取消？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:19:18.310

拿到了一部真正的手机。

取消由异步完成（参数`Info`, `Status`）报告，Status=AsyncStatus.Error，Info.ErrorCode 是 COMException，HResult=0x80004005 (E_FAIL)。

对于至少一些真正的交易失败（例如在目录中没有找到产品ID），报告的状态和HRESULT是相同的。我不认为有一个很好的方法来捕捉当前 API 的取消。报告`AsyncStatus.Canceled`将是一个好主意，但到目前为止还没有实施。

# c++ - c ++ makefile缺少分隔符问题

> ID：15909908
> 
> 赞同：1
> 
> 时间：2013-04-09T18:37:48.407
> 
> 标签：c++, makefile

我不确定为什么我的 makefile 不起作用。我用谷歌搜索了错误，我得到了一些关于空格和制表符的东西，但我不知道该怎么做。

错误：makefile：17：***缺少分隔符。停止。

```
# see http://www.gnu.org/software/make/manual/make.html
#     http://www.gnu.org/software/make/manual/make.html#Automatic-Variables
CXX=g++
CXXFLAGS=-c -Wall -g
LDFLAGS=
OBJECTS= main.o Player.o Territory.o Continent.o Game.o Color.o
TITLE=ass1
ARCHIVE=$(TITLE).tar.gz

.PHONY : all clean debug valgrind archive

# make all
all: $(OBJECTS) $(TITLE)

# make ass
$(TITLE): $(OBJECTS)
$(CXX) $(LDFLAGS) -o $@ $^

# make %.o
%.o: %.cpp %.h
$(CXX) $(CXXFLAGS) $^

# make clean
clean :
rm -f *.o *.gch $(TITLE) 

# make debug
debug : $(TITLE)
cgdb ./$<

# make valgrind P0=-Test P1=0
valgrind : $(TITLE)
valgrind --tool=memcheck --leak-check=yes ./$< $(P0) $(P1)

# http://unixhelp.ed.ac.uk/CGI/man-cgi?tar
archive :
tar cfz $(ARCHIVE) --ignore-failed-read *.cpp *.h *.pdf Makefile

# additional dependencies

main.o: Continent.h Player.h Territory.h 
Player.o: Player.h
Territory.o: Territory.h
Continent.o: Continent.h
Game.o: Game.h
Color.o: Color.h 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T18:38:25.800

您的命令需要缩进制表符（而不是空格）。例如，

```
$(TITLE): $(OBJECTS)
    $(CXX) $(LDFLAGS) -o $@ $^
^ this is a tab (in disguise...) 
```

# c# - OpenXML SDK - 合并多个 Excel 文件

> ID：15909909
> 
> 赞同：1
> 
> 时间：2013-04-09T18:37:49.217
> 
> 标签：c#, excel, openxml

我有 2 个文件。我有 Test1.xlsx 和 Test2.xlsx 我需要有问题地组合它。做这个的最好方式是什么？我正在使用 C#，MVC 3。

我见过提到 AltChunk，但也见过它与 Documents 和 SpreadSheets 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:00:48.010

我们需要更多信息来回答这个问题。

您想编写 VBA 代码来组合它们吗？您是否只想从其中一个中复制一个选项卡并将其移动到另一个？它们是否具有相似的列标题，并且使用访问将它们附加在一起是否有意义？这完全取决于你想要做什么。

如果您只想将选项卡从 test1.xlsx 复制到 test2.xlsx，请转到 test1 中的正确选项卡并右键单击该选项卡。然后单击移动或复制。在“to book”字段中选择test2（test2需要同时打开），然后选择create a copy框并点击ok。

如果你想自动化将 excel 文件组合在一起的东西，你可以使用 VBA 来实现，这也是另一种选择。

# php - 用html代码连接php不起作用

> ID：15909911
> 
> 赞同：0
> 
> 时间：2013-04-09T18:37:53.687
> 
> 标签：php, html, wordpress

因为图像比文字更能说明问题：

![在此处输入图像描述](https://i.stack.imgur.com/TP2E6.png)

我基本上只想要“IMDB”标签，如果文章的元数据中有一个链接，否则它不应该是可见的。

```
<?php $rating = get_post_meta($post->ID, 'Rating', true); ?>
<?php $imdblink = get_post_meta($post->ID, 'IMDb-Link', true); ?>
<?php if($rating==""){ echo ""; if($imdblink=="") {echo "";} } else { ?>
<div style="float: right"><a href="http://soundso.de<?php  echo $imdblink; ?>">IMDb <?php echo $rating; ?>/10</a> </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:49:25.620

可以这样建模：

```
$rating = get_post_meta($post->ID, 'Rating', true);
$imdblink = get_post_meta($post->ID, 'IMDb-Link', true);

if (empty($rating) || empty($imdblink)) {
    print "";
} else {
    ?><div style="float:right;"><a href="http://soundso.de<?php print $imdblink; ?>">IMDb <?php print $rating; ?>/10</a></div><?php
} 
```

你只是在检查后错过了一个右括号`if($rating == "")`。

# php - 如何以编程方式构建组织结构图并导出到 PowerPoint 文件？

> ID：15909919
> 
> 赞同：0
> 
> 时间：2013-04-09T18:38:10.783
> 
> 标签：php, powerpoint, orgchart

大部分问题都在标题中。

一位客户要求我构建一个具有动态分层字段的表单，从中构建一种必须导出到 PPT 的组织结构图（OpenOffice Impress 是一个选项）。

我找到了许多允许这样做的库，但它们都只允许导出到图像、HTML5 或其他不可编辑的图表。

我真的很想使用谷歌图表工具（尽管我害怕谷歌倾向于停止他们的产品），但这个工具没有任何导出到 PowerPoint 的意思。

PHPPowerPoint 似乎也是一个可能的解决方案，但据我所知没有文档，我不知道自动排列要求是否可用。

由于是动态构建的，库还必须负责自动排列所有项目（除非有人知道以编程方式执行此操作的方法）。

有没有人有过这种需求或知道可能的方法？

要点是生成的文件必须是可编辑的。

# xslt - XSLT 多个样式表

> ID：15909922
> 
> 赞同：0
> 
> 时间：2013-04-09T18:38:16.400
> 
> 标签：xslt, apply-templates

我有以下xml

```
<TopLevel>
  <data m="R263">
    <s ut="263firstrecord" lt="2013-02-16T09:21:40.393" />
    <s ut="263secondrecord" lt="2013-02-16T09:21:40.393" />
  </data>
  <data m="R262">
    <s ut="262firstrecord" lt="2013-02-16T09:21:40.393" />
    <s ut="262secondrecord" lt="2013-02-16T09:21:40.393"  />
  </data>
</TopLevel> 
```

我有一些执行调用模板的 XSLT，但它没有正确迭代。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="data">
<xsl:value-of select="@m" />
<xsl:variable name="vYourName" select="@m"/>
    <xsl:choose>
        <xsl:when test="@m='R262'">
            <xsl:call-template name="R262"/>
        </xsl:when>
    </xsl:choose>
    <xsl:choose>
        <xsl:when test="@m='R263'">
            <xsl:call-template name="R263"/>
        </xsl:when>
    </xsl:choose>
</xsl:template>

<xsl:template name="R262">
                        <xsl:for-each select="/TopLevel/data/s">
                                        Column1=<xsl:value-of select="@ut" />
                    Column2=<xsl:value-of select="@lt" />
            </xsl:for-each>
</xsl:template>

<xsl:template name="R263">
                        <xsl:for-each select="/TopLevel/data/s">
                                        Column1=<xsl:value-of select="@ut" />
                    Column2=<xsl:value-of select="@lt" />
            </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

这给了我 4 条记录中的 8 条`(<s> level)`记录。我知道这与我的迭代有关……但我不确定如何解决这个问题。

我也知道应用样式表，但我也无法解开这个谜团......如果有人可以帮助我使用**XSLT，它只会处理从`<TopLevel>`检查`<\TopLevel>`级别的 m 值和应用级别`<data>`的样式表等所有内容`<s>`每`<s>`**一张唱片我都会大得难以置信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:49:00.913

我不知道你想产生什么输出，但我怀疑你想替换

```
<xsl:for-each select="/TopLevel/data/s"> 
```

经过

```
<xsl:for-each select="s"> 
```

也就是说，您只想处理当前正在处理的“数据”中的“s”元素，而不是选择整个文档中的所有“s”元素。

为什么不使用应用模板来做到这一点？

```
<xsl:template match="data">
  ...
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="s[../@m='R262']">
  ...
</xsl:template>

<xsl:template match="s[../@m='R263']">
  ...
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:18:00.283

如果您想使用`match template`并且`apply-templates`您可以执行以下操作，它也会像您的样式表一样为您提供文本输出。因此，此 XSLT 应用于您的原始源 XML：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="data">
    <xsl:value-of select="@m"/>
    <xsl:apply-templates select="s"/>       
</xsl:template>

<xsl:template match="s">
    Column1=<xsl:value-of select="@ut"/>
    Column2=<xsl:value-of select="@lt"/>
</xsl:template>

</xsl:stylesheet> 
```

给你这个输出：

```
<?xml version="1.0" encoding="UTF-8"?>
R263
    Column1=263firstrecord
    Column2=2013-02-16T09:21:40.393
    Column1=263secondrecord
    Column2=2013-02-16T09:21:40.393
R262
    Column1=262firstrecord
    Column2=2013-02-16T09:21:40.393
    Column1=262secondrecord
    Column2=2013-02-16T09:21:40.393 
```

你基本上只匹配`s`并给出属性“ut”和“lt”。您还可以输出看起来更好的 XML。

使用这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
    <root>
        <xsl:apply-templates/>
    </root>
</xsl:template>

<xsl:template match="data">
    <list>
        <xsl:apply-templates select="s"/>
    </list>
</xsl:template>

<xsl:template match="s">
    <xsl:element name="record">
        <xsl:attribute name="m">
            <xsl:value-of select="parent::data/@m"/>
        </xsl:attribute>
        <item>Column1=<xsl:value-of select="@ut"/></item>
        <item>Column2=<xsl:value-of select="@lt"/></item>
    </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

会给你这个漂亮的 XML 输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
<list>
    <record m="R263">
        <item>Column1=263firstrecord</item>
        <item>Column2=2013-02-16T09:21:40.393</item>
    </record>
    <record m="R263">
        <item>Column1=263secondrecord</item>
        <item>Column2=2013-02-16T09:21:40.393</item>
    </record>
</list>
<list>
    <record m="R262">
        <item>Column1=262firstrecord</item>
        <item>Column2=2013-02-16T09:21:40.393</item>
    </record>
    <record m="R262">
        <item>Column1=262secondrecord</item>
        <item>Column2=2013-02-16T09:21:40.393</item>
    </record>
</list> 
```

您必须稍微修改原始 XSLT 以获得良好的 XML 结构。此外，当您匹配`s`“爬”到元素`data`以获取`R-numbers`您的属性值时。

`root`匹配正确 XML 根元素所需的模板。`<list>`你也可以摆脱你`<record>`的孩子`<root>`。

# c# - Linq if/else 条件？

> ID：15909926
> 
> 赞同：4
> 
> 时间：2013-04-09T18:38:23.957
> 
> 标签：c#, linq, linq-to-xml

我知道这可能是一个新手问题。有没有办法根据布尔值选择不同的搜索条件？稍后在代码中，我想遍历对象（alDisabledPrograms）。我知道 if/else 不正确，我把它放在那里以显示我希望如何处理它。我试图将它放在一个更大的 if/else 条件中，但后来无法循环通过 alDisabledPrograms。想法？

```
var alDisabledPrograms = xlServerRoles.Descendants("ServerRole")
    if(isDup)
    {
        .Where(dp => dp.Element("ServerType").Value == currentColumn.Substring(0, currentColumn.Length - 1))
    }
    else
    {
        .Where(dp => dp.Element("ServerType").Value == currentColumn)
    }
    .Descendants("ProgramName")
    .Select(p => p.Value)
    .ToList(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T18:41:35.560

使用您的特定代码，答案非常简单：

```
string targetColumn = isDup ? currentColumn.Substring(0, currentColumn.Length - 1)
                            : currentColumn;
var alDisabledPrograms = xlServerRoles.Descendants("ServerRole")
           .Where(dp => dp.Element("ServerType").Value == targetColumn)
           .Descendants("ProgramName")
           .Select(p => p.Value)
           .ToList(); 
```

不过，一般来说，要应用非常不同的查询，您可以使用：

```
IEnumerable<XElement> roles = xlServerRoles.Descendants("ServerRole");
if (isDup)
{
    roles = roles.Where(dp => ...);
}
else
{
    roles = roles.Where(dp => ...);
}
var alDisabledPrograms = roles.Descendants(...)
                               ... 
```

或者您可以使用条件运算符来构造正确的谓词：

```
var filter = isDup ? (Func<XElement, bool>)(dp => ...)
                   : (Func<XElement, bool>)(dp => ...);
var alDisabledPrograms = xlServerRoles.Descendants("ServerRole")
       .Where(filter)
       .Descendants("ProgramName")
       .Select(p => p.Value)
       .ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T18:42:12.080

在 where 子句中插入 isDup：

```
var alDisabledPrograms = xlServerRoles.Descendants("ServerRole")
     .Where(dp => isDup ? 
       (dp.Element("ServerType").Value == currentColumn.Substring(0, currentColumn.Length - 1)) : 
       (dp.Element("ServerType").Value == currentColumn))
    .Descendants("ProgramName")
    .Select(p => p.Value)
    .ToList(); 
```

我认为这会做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:40:48.817

将 isDup 测试移动到 Where 表达式本身。使用内联匿名函数而不是单行表达式，以便您可以使用普通的 if/else 语句。

像这样：

```
var alDisabledPrograms = xlServerRoles.Descendants("ServerRole")
        .Where(dp => { 
           if (isDup)
           {
             return dp.Element("ServerType").Value == currentColumn.Substring(0, currentColumn.Length - 1))
           }
           else
           {
              return dp.Element("ServerType").Value == currentColumn)
           })
    .Descendants("ProgramName")
    .Select(p => p.Value)
    .ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T18:42:14.660

只需在循环开始之前执行一次：

```
string serverType = currentColumn;
if(isDup)
    serverType = currentColumn.Substring(0, currentColumn.Length - 1);

var alDisabledPrograms = xlServerRoles.Descendants("ServerRole")
    .Where(dp => dp.Element("ServerType").Value == serverType )
    .Descendants("ProgramName")
    .Select(p => p.Value)
    .ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T18:42:23.877

您可以像这样构造查询：

```
var query = xlServerRoles.Descendants("ServerRole");

if(isDup)
{
    query = query.Where(dp => dp.Element("ServerType").Value == currentColumn.Substring(0, currentColumn.Length - 1))
}
else
{
    query = query.Where(dp => dp.Element("ServerType").Value == currentColumn)
}

var alDisabledPrograms = query.Descendants("ProgramName").Select(p => p.Value).ToList(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T18:43:31.777

将你的 isDup 放在 Where

```
.Where(dp => dp.Element("ServerType").Value == (isDup ? currentColumn.Substring(0, currentColumn.Length - 1) 
                                                  : currentColumn)) 
```

# vbscript - 尝试运行多个脚本，将它们全部输出到一个文件，并且都使用相同的 IP 地址

> ID：15909930
> 
> 赞同：1
> 
> 时间：2013-04-09T18:38:34.367
> 
> 标签：vbscript

我有几个问题，希望这是正确的地方。

基本上我想做的是能够远程获取有关域计算机的信息。

我有 3 个单独的脚本给我 1（IP 配置、comp 名称 ...）、2（安装的软件）和 3（映射驱动器）。

前两个要求输入 IP/计算机名称，第三个我必须将其输入到脚本中......我只想输入一次 IP 地址并让它适用于所有 3

其次，我希望将输入此信息的输出文件命名为已安装的软件脚本，然后将其他两个脚本添加（ammend）到已创建的输出中。

我对 vbs 非常陌生，所以任何帮助都会很棒

脚本 1（获取 IP 配置）

```
dim strComputer 'for computer name or IP
dim colAdapters 'collection of adapters

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.CreateTextFile("output.txt", True)

strComputer = ""

'open a dialog box asking for the computer name/IP
do
strComputer = inputbox( "Please enter a computername/IP, or . for local computer", "Input" )
Loop until strComputer <> "" 'run until a name/IP is entered

Set objWMIService = GetObject ("winmgmts:" & "!\\" & strComputer & "\root\cimv2") 'open the WMI service on the remote PC
Set colAdapters = objWMIService.ExecQuery ("Select * from Win32_NetworkAdapterConfiguration Where IPEnabled = True") 

'go through the list of adapters and gather data
For Each objAdapter in colAdapters 

objFile.Writeline "Host name: " & objAdapter.DNSHostName 
objFile.Writeline "DNS domain: " & objAdapter.DNSDomain 
objFile.Writeline "DNS suffix search list: " & objAdapter.DNSDomainSuffixSearchOrder 
objFile.Writeline "Description: " & objAdapter.Description 
objFile.Writeline "Physical address: " & objAdapter.MACAddress 
objFile.Writeline "DHCP enabled: " & objAdapter.DHCPEnabled 
If Not IsNull(objAdapter.IPAddress) Then 
For i = LBound(objAdapter.IPAddress) To UBound(objAdapter.IPAddress) 
objFile.Writeline "IP address: " & objAdapter.IPAddress(i) 
Next 
End If 
If Not IsNull(objAdapter.IPSubnet) Then 
For i = LBound(objAdapter.IPSubnet) To UBound(objAdapter.IPSubnet) 
objFile.Writeline "Subnet: " & objAdapter.IPSubnet(i) 
Next 
End If 
If Not IsNull(objAdapter.DefaultIPGateway) Then 
For i = LBound(objAdapter.DefaultIPGateway) To UBound(objAdapter.DefaultIPGateway) 
objFile.Writeline "Default gateway: " & objAdapter.DefaultIPGateway(i) 
Next 
End If 
objFile.Writeline "DHCP server: " & objAdapter.DHCPServer 
If Not IsNull(objAdapter.DNSServerSearchOrder) Then 
For i = LBound(objAdapter.DNSServerSearchOrder) To UBound(objAdapter.DNSServerSearchOrder) 
objFile.Writeline "DNS server: " & objAdapter.DNSServerSearchOrder(i) 
Next 
End If 
objFile.Writeline "Primary WINS server: " & objAdapter.WINSPrimaryServer 
objFile.Writeline "Secondary WINS server: " & objAdapter.WINSSecondaryServer 
objFile.Writeline "Lease obtained: " & objAdapter.DHCPLeaseObtained 
objFile.Writeline "Lease expires: " & objAdapter.DHCPLeaseExpires 
Next 
```

SCRIPT 2（获取已安装的软件）

```
Option Explicit

Dim sTitle
sTitle = "InstalledPrograms.vbs by Bill James"
Dim StrComputer
strComputer = InputBox("Enter I.P. or name of computer to check for " & _
                       "installed software (leave blank to check " & _
                       "local system)." & vbcrlf & vbcrlf & "Remote " & _
                       "checking only from NT type OS to NT type OS " & _
                       "with same Admin level UID & PW", sTitle)
If IsEmpty(strComputer) Then WScript.Quit
strComputer = Trim(strComputer)
If strComputer = "" Then strComputer = "."

'Wscript.Echo GetAddRemove(strComputer)

Dim sCompName : sCompName = GetProbedID(StrComputer)

Dim sFileName
sFileName = sCompName & "_" & GetDTFileName() & "_Software.txt"

Dim s : s = GetAddRemove(strComputer)

If WriteFile(s, sFileName) Then
  'optional prompt for display
  If MsgBox("Finished processing.  Results saved to " & sFileName & _
            vbcrlf & vbcrlf & "Do you want to view the results now?", _
            4 + 32, sTitle) = 6 Then
    WScript.CreateObject("WScript.Shell").Run sFileName, 9
  End If
End If

Function GetAddRemove(sComp)
  'Function credit to Torgeir Bakken
  Dim cnt, oReg, sBaseKey, iRC, aSubKeys
  Const HKLM = &H80000002 'HKEY_LOCAL_MACHINE
  Set oReg = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & _
              sComp & "/root/default:StdRegProv")
  sBaseKey = "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\"
  iRC = oReg.EnumKey(HKLM, sBaseKey, aSubKeys)

  Dim sKey, sValue, sTmp, sVersion, sDateValue, sYr, sMth, sDay

  For Each sKey In aSubKeys
    iRC = oReg.GetStringValue(HKLM, sBaseKey & sKey, "DisplayName", sValue)
    If iRC <> 0 Then
      oReg.GetStringValue HKLM, sBaseKey & sKey, "QuietDisplayName", sValue
    End If
    If sValue <> "" Then
      iRC = oReg.GetStringValue(HKLM, sBaseKey & sKey, _
                                "DisplayVersion", sVersion)
      If sVersion <> "" Then
        sValue = sValue & vbTab & "Ver: " & sVersion
      Else
        sValue = sValue & vbTab 
      End If
      iRC = oReg.GetStringValue(HKLM, sBaseKey & sKey, _
                                "InstallDate", sDateValue)
      If sDateValue <> "" Then
        sYr =  Left(sDateValue, 4)
        sMth = Mid(sDateValue, 5, 2)
        sDay = Right(sDateValue, 2)
        'some Registry entries have improper date format
        On Error Resume Next 
        sDateValue = DateSerial(sYr, sMth, sDay)
        On Error GoTo 0
        If sdateValue <> "" Then
          sValue = sValue & vbTab & "Installed: " & sDateValue
        End If
      End If
      sTmp = sTmp & sValue & vbcrlf
    cnt = cnt + 1
    End If
  Next
  sTmp = BubbleSort(sTmp)
  GetAddRemove = "INSTALLED SOFTWARE (" & cnt & ") - " & sCompName & _
                 " - " & Now() & vbcrlf & vbcrlf & sTmp 
End Function

Function BubbleSort(sTmp)
  'cheapo bubble sort
  Dim aTmp, i, j, temp
  aTmp = Split(sTmp, vbcrlf)  
  For i = UBound(aTmp) - 1 To 0 Step -1
    For j = 0 to i - 1
      If LCase(aTmp(j)) > LCase(aTmp(j+1)) Then
        temp = aTmp(j + 1)
        aTmp(j + 1) = aTmp(j)
        aTmp(j) = temp
      End if
    Next
  Next
  BubbleSort = Join(aTmp, vbcrlf)
End Function

Function GetProbedID(sComp)
  Dim objWMIService, colItems, objItem
  Set objWMIService = GetObject("winmgmts:\\" & sComp & "\root\cimv2")
  Set colItems = objWMIService.ExecQuery("Select SystemName from " & _
                                         "Win32_NetworkAdapter",,48)
  For Each objItem in colItems
    GetProbedID = objItem.SystemName
  Next
End Function

Function GetDTFileName()
  dim sNow, sMth, sDay, sYr, sHr, sMin, sSec
  sNow = Now
  sMth = Right("0" & Month(sNow), 2)
  sDay = Right("0" & Day(sNow), 2)
  sYr = Right("00" & Year(sNow), 4)
  sHr = Right("0" & Hour(sNow), 2)
  sMin = Right("0" & Minute(sNow), 2)
  sSec = Right("0" & Second(sNow), 2)
  GetDTFileName = sMth & sDay & sYr & "_" & sHr & sMin & sSec
End Function

Function WriteFile(sData, sFileName)
  Dim fso, OutFile, bWrite
  bWrite = True
  Set fso = CreateObject("Scripting.FileSystemObject")
  On Error Resume Next
  Set OutFile = fso.OpenTextFile(sFileName, 2, True)
  'Possibly need a prompt to close the file and one recursion attempt.
  If Err = 70 Then
    Wscript.Echo "Could not write to file " & sFileName & ", results " & _
                 "not saved." & vbcrlf & vbcrlf & "This is probably " & _
                 "because the file is already open."
    bWrite = False
  ElseIf Err Then
    WScript.Echo err & vbcrlf & err.description
    bWrite = False
  End If
  On Error GoTo 0
  If bWrite Then
    OutFile.WriteLine(sData)
    OutFile.Close
  End If
  Set fso = Nothing
  Set OutFile = Nothing
  WriteFile = bWrite
End Function 
```

SCRIPT 3（获取映射驱动器）

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.CreateTextFile("mappedoutput.txt", True)
' List Mapped Network Drives

On Error Resume Next

strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")

Set colItems = objWMIService.ExecQuery("Select * from Win32_MappedLogicalDisk")

For Each objItem in colItems
    objFile.Writeline "Compressed: " & objItem.Compressed
    objFile.Writeline "Description: " & objItem.Description
    objFile.Writeline "Device ID: " & objItem.DeviceID
    objFile.Writeline "File System: " & objItem.FileSystem
    objFile.Writeline "Free Space: " & objItem.FreeSpace
    objFile.Writeline "Maximum Component Length: " & objItem.MaximumComponentLength
    objFile.Writeline "Name: " & objItem.Name
    objFile.Writeline "Provider Name: " & objItem.ProviderName
    objFile.Writeline "Session ID: " & objItem.SessionID
    objFile.Writeline "Size: " & objItem.Size
    objFile.Writeline "Supports Disk Quotas: " & objItem.SupportsDiskQuotas
    objFile.Writeline "Supports File-Based Compression: " & _
        objItem.SupportsFileBasedCompression
    objFile.Writeline "Volume Name: " & objItem.VolumeName
    objFile.Writeline "Volume Serial Number: " & objItem.VolumeSerialNumber
    objFile.Writeline
Next 
```

再次谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:03:29.310

您可以将所有三个脚本作为 1 个脚本吗？在这种情况下，您只需输入一次 IP 地址。

或者编写另一个脚本，该脚本将询问 IP 地址并通过使用 cscript 并将 IP 地址作为参数传递给它们来调用这些脚本。试试这个代码：

```
strcomputer = inputbox("Enter the IP address")
set obj1 = createobject("wscript.shell")
set obj2 = createobject("wscript.shell")
set obj3 = createobject("wscript.shell")
pgm1 = "cscript script1.vbs " & strcomputer
pgm2 = "cscript script2.vbs " & strcomputer
pgm3 = "cscript script3.vbs " & strcomputer
obj1.run pgm1,3,true
obj2.run pgm2,3,true
obj3.run pgm3,3,true
set obj1 = nothing
set obj2 = nothing
set obj3 = nothing 
```

在上面的代码中，script1.vbs、script2.vbs、script3.vbs 是您的 3 个脚本，您正在使用一个新脚本一一执行它们。在 script1.vbs 中，添加这行代码：

```
strcomputer = wscript.Arguments.item(0) 
```

它会将您从新脚本传递到 script1.vbs 的第一个参数存储到变量“strcomputer”（在您的情况下为 IP 地址）中。同样，在 script2.vbs 和 script3.vbs 中也添加语句

```
strcomputer = wscript.Arguments.item(0) 
```

关于您的输出文件，我不确定您要的是什么。也许这可以帮助：

使用以下内容写入文件（如果数据已经存在，则覆盖）：

```
Set fso1 = CreateObject("Scripting.FileSystemObject" )            
Set file1 = fso1.OpenTextFile("C:\New\textfile1.txt",2,true) 
```

使用以下内容添加数据或附加到文件（不覆盖）：

```
Set fso1 = CreateObject("Scripting.FileSystemObject" )            
Set file1 = fso1.OpenTextFile("C:\New\textfile1.txt",8,true) 
```

使用以下命令从文件中读取：

```
Set fso1 = CreateObject("Scripting.FileSystemObject" )            
Set file1 = fso1.OpenTextFile("C:\New\textfile1.txt",1,true) 
```

# javascript - 从 HTML 元素中检索地址并使用它创建 Google 地图

> ID：15909931
> 
> 赞同：0
> 
> 时间：2013-04-09T18:38:35.110
> 
> 标签：javascript, geocoding

我的页面上有一个元素，我已将 ID“地址”分配给：

```
<p id="address">1600 Pennsylvania Ave NW, Washington, DC 20500, United States</p> 
```

现在我正在尝试使用以下内容从中创建谷歌地图：

```
<script type="text/javascript">
  var gecoder, map;
  var address = document.getElementById('address').innerHTML;
  function googlemap(address) {
    geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        var myOptions = {
        zoom: 8,
        center: results[0].geometry.location,
        mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      }
    });
  }
</script> 
```

然而，这没有返回。我得到一个空白。知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:28:45.630

这就是我所做的并且有效。头部的 JavaScript：

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false" />
<script type="text/javascript">
    var geocoder, map;

    function googlemap() {
        var address = document.getElementById('address').innerHTML;

        geocoder = new google.maps.Geocoder();
        geocoder.geocode({ 'address': address }, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                var myPosition = results[0].geometry.location;
                alert(myPosition);

                var myOptions = {
                    zoom: 8,
                    center: myPosition,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                }
                map = new google.maps.Map(document.getElementById('map'), myOptions);

                var marker = new google.maps.Marker({
                    map: map,
                    position: myPosition
                });
            } else {
                alert('Geocode was not successful for the following reason: ' + status);
            }
        });
    }
</script> 
```

身体：

```
<body onload="googlemap()">
<form id="form1" runat="server">
<div>
    <p id="address">1600 Pennsylvania Ave NW, Washington, DC 20500, United States</p>
    <div id="map" style="overflow:hidden; width:400px; height:400px"></div>
</div>
</form> 
```

# java - Lucene 索引文件损坏

> ID：15909932
> 
> 赞同：1
> 
> 时间：2013-04-09T18:38:42.767
> 
> 标签：java, websphere-7

lucene 文件是否会因为网络连接问题而损坏？

在我们的应用程序中，我们有石英作业，它运行以索引记录。该作业每分钟运行一次。某些索引文件是否存在问题，有些已正确更新，而有些则根本没有更新。在这种情况下，搜索会因未找到文件的异常而中断。

除了上述问题之外，是否有人可以让我知道索引文件何时以及为什么会损坏的主要原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:57:23.530

过去我们的硬盘驱动器存在问题。添加到 lucene 的数据量使硬盘驱动器的实际容量超载，无法写下内容。

重新启动应用程序时，我们会遇到 CorruptedIndexException 并且一切都搞砸了。

# git - 如何在共享 git 存储库中预配置自定义的默认远程？

> ID：15909934
> 
> 赞同：2
> 
> 时间：2013-04-09T18:38:54.863
> 
> 标签：git, github

我正在使用 gitolite 为我的团队建立一个共享的 git 存储库。我们有多个项目，同一个项目托管在 github 上以及内部。

当团队成员从内部项目存储库中克隆时，我希望已经指定了遥控器，而无需通过 git-config 进行客户端配置。像这样的东西：

```
$ git clone git@internal.com:project
$ git remote -v
origin git@github.com:project/project-repository.git (fetch)
origin git@github.com:project/project-repository.git (push)
internal git@internal.com:project/project-repository.git (fetch)
internal git@internal.com:project/project-repository.git (push) 
```

当然，我尝试使用 git remote add 然后 push internal --all 但这似乎并没有推动我客户的遥控器。

我想避免的是团队成员必须配置他们的 git 客户端来执行此操作：

```
git remote add internal git@internal.com:project/project-repository.git 
```

我需要做什么来配置内部存储库以在克隆内部存储库时添加这些自定义默认遥控器？

# google-maps-sdk-ios - 在 io6 中使用 google sdk 为坐标添加名称

> ID：15909935
> 
> 赞同：1
> 
> 时间：2013-04-09T18:38:55.473
> 
> 标签：google-maps-sdk-ios

如何将我的应用程序重定向到谷歌地图应用程序并为我想要方向的坐标提供标题。如果我省略“，+ MYNAME”，下面的代码可以正常工作。但是只给出坐标并不友好。例如，我想将“私人停车场”作为 MYNAME。但是，如果我把它放在开头，谷歌会寻找它可以找到的“私人停车场”的第一个方向并忽略坐标。如果我把它放在第二位（如下所示），它无法解释方向。

```
 [[UIApplication sharedApplication] openURL:
 [NSURL URLWithString:
 @"comgooglemaps://?saddr=&daddr=MYLATITUDE,MYLONGITUDE,+MYNAME&directionsmode=driving"
 ]]; 
```

我怎样才能在我的坐标中添加一个名称/标题？

# c++ - 需要循环中的逻辑建议

> ID：15909937
> 
> 赞同：1
> 
> 时间：2013-04-09T18:39:03.667
> 
> 标签：c++, c, coding-style

我有双向链表的三个元素，我有两个操作：`foo()`和`bar()`。

基于一些布尔标志，我必须对两个元素中的第一个执行`foo()`操作（if ），并对剩余的单个元素执行操作（if）。`true``bar()``false`

所以，这是干净的代码，但是错误的，因为它对两个元素都执行了 foo() ：

```
while(head->next != NULL)
{
   if(head->flag == true)
   { 
      foo();
   }
   if(head->flag == false)
   {
      bar();
   }
   head = head->next;
} 
```

列表元素可能以随机顺序出现，因此它可能是 A、C、B 或 B、A、C（假设 A 和 B 在这两种情况下都需要`foo()`操作）。

我的问题是，如果 A 和 B 先出现，我会在他们两个上调用 foo() 函数（我不能如上所述）。

实际上，当我再次分析它时，我发现在每种情况下我都会调用这个函数两次。

我想出的解决方案是：

```
int flag = 0;
while(head->next != NULL)
{
   if(head->flag == true && flag == 0)
   { 
      foo();
      flag = 1;
   }
   if(head->flag == false)
   {
      bar();
   }
   head = head->next;
} 
```

但是代码突然变得丑陋了。

有没有办法在不使用标志并保持代码干净的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:47:30.227

```
void NullFunc( void ) {}
void (*operation)(void) = foo;

while( head->next != NULL )
{
    if( head->flag == true )
    {
         operation();
         operation = NullFunc;
    }
    else
    {
        bar();
    }

    head = head->next;
} 
```

# loops - 我应该如何构建这个循环？

> ID：15909943
> 
> 赞同：2
> 
> 时间：2013-04-09T18:39:25.010
> 
> 标签：loops, readability

有时，我会遇到像这样的循环，我不确定它应该如何构造以避免代码重复并使其更具可读性。

*请注意，虽然在这个例子中我用 C# 编写并使用 Unity3d 引擎，但这个问题一般是关于循环的，这里没有关于 C#/Unity3d 的具体内容，或者在我看来是这样。*

```
 // ...

    Vector3 rayPosition  = transform.position;
    Vector3 rayDirection = transform.forward;

    RaycastHit hit;

    Vector3 rayFinish = rayPosition + rayDirection * rangeLeft; // This line repeats...

    while (Physics.Linecast ( rayPosition, rayFinish, out hit ) ) {

        rangeLeft -= hit.distance;

        rayPosition = hit.point;
        rayDirection = Vector3.Reflect(rayDirection, hit.normal);

        rayFinish = rayPosition + rayDirection * rangeLeft; // ...here.

    }

    // ... 
```

（当然，这个代码重复是微不足道的，但它只是一个例子。）

不可能让它进入 do...while 循环，因为需要在第一次运行循环之前检查条件。编写这样的代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:55:20.123

do-while 循环有点棘手，因为测试是一个需要在循环体之前调用的方法。下面的代码删除了重复，但我不确定它对可读性有多大帮助。

```
while (true) { 
  Vector3 rayFinish = rayPosition + rayDirection * rangeLeft;

  if (!Physics.Linecast ( rayPosition, rayFinish, out hit ))
      break;

    rangeLeft -= hit.distance;

    rayPosition = hit.point;
    rayDirection = Vector3.Reflect(rayDirection, hit.normal);
} 
```

这可能更具可读性：

```
bool linecastGood = true;

while (linecastGood) { 
  Vector3 rayFinish = rayPosition + rayDirection * rangeLeft;

  linecastGood = Physics.Linecast ( rayPosition, rayFinish, out hit )

  if (linecastGood) 
  {
    rangeLeft -= hit.distance;
    rayPosition = hit.point;
    rayDirection = Vector3.Reflect(rayDirection, hit.normal);
  }
} 
```

# algorithm - 找到所有可能的数字集的最大值和最小值之间的最小差异

> ID：15909944
> 
> 赞同：2
> 
> 时间：2013-04-09T18:39:25.960
> 
> 标签：algorithm, math, data-structures

每个有*n 个*大小为*k*的数组。

```
a0[0],a0[1],......a0[k-1]
a1[0],a1[1],......a1[k-1]
.
.
.
an-1[0],an-1[1], .... an-1[k-1] 
```

根本没有重复，所有数组都已排序。

现在通过从每个数组中随机取任何值来构造一个大小为*n的集合。*例如，一个这样的集合可以是`{a0[0],a1[3],a2[2],.... an-1[k-1]}`。

我的目标是找出所有可能的 Set 中的 min 和 max 元素，使得 min 和 max 之间的差异最小。

示例 (k=3,n=3)

```
[3 7 11]
[1 12 15]
[4 19 21] 
```

所以数学上会有27个这样的集合

```
(3 1 4) (3 12 4) (3 15 4)
(3 1 19) (3 12 19) (3 15 19)
(3 1 21) (3 12 21) (3 15 21)

(7 1 4) (7 12 4) (7 15 4)
(7 1 19) (7 12 19) (7 15 19)
(7 1 21) (7 12 21) (7 15 21)

(11 1 4) (7 12 4) (11 15 4)
(11 1 19) (7 12 19) (11 15 19)
(11 1 21) (7 12 21) (11 15 21) 
```

在计算所有这些集合的最小值和最大值之后，我们可以得出结论，(3 1 4) 是最小值 (1) 和最大值 (4) 之间的差值是全局最小值或最小值的集合。

所以我们将输出 3 作为全局最小差值和对应的对，即 (3 4)。如果有多个全局最小值，则将它们全部打印出来。请推荐具有更好时间和空间复杂度的算法。我们不能采用蛮力方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:17:47.390

该算法的复杂度为 O(n*k*logn)

仅从每行中选择第一个元素并创建一个最小堆和一个最大堆。

计算当前差值（=head(maxHeap)-head(minheap)）

移除 minHeap 的头部（以及 maxHeap 中的对应元素），并将对应数组中的下一个元素（对应于移除的元素）添加到 minHeap 和 maxHeap 中。

重复此操作，直到其中一个数组中的所有元素都用完。

复杂性：您添加/删除 nk 个元素并且更新最多需要 O(n) 时间。所以复杂度是 O(nklogn)。

注意：这不完全是您的库存堆。minHeap 包含指向 maxHeap 中相同元素的指针，反之亦然。当您从 minHeap 中删除一个元素时，您可以找到指向 maxHeap 的链接并将其删除。同样，每当特定元素的位置发生变化时，都会对另一个堆中的链接进行适当的更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:10:21.880

如果我理解正确，您想找到其元素中最大差异在全局范围内最小的集合。（我称之为集合的范围）

从 k 个集合开始，每个集合最初都包含第一个数组中的一个元素。对于每个集合，最小值和最大值将等于元素本身。对于您的示例，{3}、{7} 和 {11}。

然后你转到第二个数组。对于每个集合，您必须从该数组中选择一个最小化新范围的元素。理想情况下，您会选择一个不会增加范围的元素（但现在不可能）。如果这不可能，请选择在两个方向（加号和减号）扩展您的集合的元素。例如，可以为您提供 {1-3}、{3-12}、{1-7}、{7-12}、{1-11} 和 {11-12}。从这*2k*个集合中，您可以删除重叠的集合。例如，与集合 {1-3} 相比，集合 {1-7} 将始终具有更大或相等的范围。您无需研究 {1-7} 集。您最终得到集合 {1-3} 和 {11-12}。

移动到第三个数组，再次选择尽可能小地扩展每个集合范围的元素。您最终得到 {1-4}、{11-19} 和 {4-12}。然后只需选择范围最低的那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T20:18:45.833

将结果集视为一个简单的 1xn 数组

```
[3]
[1]
[4] 
```

其中全局差异为 3（最大值为 4 减去最小值为 1）。

现在考虑 Set 的扩展定义，称为 MultiSet。MultiSet 是一个数组，其中每个元素都包含一组有序的项目。

```
[3 7 11]
[1 12 15]
[4 19 21] 
```

我们可以通过每行的最大“最后”值与每行的最小“第一”值之间的差异来计算全局差异（称为“成本”）。在这种情况下，成本将是 21 ( `max(11,15,21)`) 和 1 ( `min(3,1,4)`) 之间的差值，即 20。

现在的过程将是迭代 MultiSet，直到我们使用以下算法达到最低成本：

*   识别具有最低值的行。如果该行只有一个元素，则继续，否则考虑从该行中删除低于任何其他行的最小值的值的潜在成本降低。
*   识别具有最高值的行。如果该行只有元素，则继续，否则考虑从该行中删除高于任何其他行的最大值的值的潜在成本降低。
*   删除上面确定的那些值并继续下一个最高/最低的项目。-
*   如果最低值和最高值都在单项行中，则成本已最小化。

`1`为了在给定的示例中进行演示，可以通过删除 的最小值（MultiSet 中的最小值低于任何其他行的最小值）将原始成本 20 减少到 18 ，或者通过删除 的最高值来减少到 14`19`和`21`（MultiSet 中高于任何其他行的最大值的最高值，即`15`）来自最后一行。生成的 MultiSet 将是

```
[3 7 11]
[1 12 15]
[4] 
```

第二次迭代让我们删除`12`和`15`将成本降低到 10。

```
[3 7 11]
[1]
[4] 
```

第三次也是最后一次迭代让我们移除`7`和`11`以将成本降低到 3。在第三次迭代之后，全局差异不再能够最小化，因此达到了解决方案。

复杂性？上限为 O(n * m * log(n) * k)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T19:04:32.213

遍历所有`n * k`元素。

假设我们当前的元素有 value `v`。让我们计算最小差异​​，假设它`v`是生成的 n 元组中的最小值。

二进制搜索`v`在其他`n - 1`数组中的位置（因为它们已排序，我们可以这样做），并注意为了减少差异，最好选择大于或等于`v`所有其他数组的最小元素。这正是二分搜索给我们的。

**一个例子：**

```
[3 7 11]
[1 12 15]
[4 19 21] 
```

如果我们采用`v = 1`第二个数组，那么我们将在第一个数组上选择 3，在第二个数组上选择 4。

复杂度是`O(N * K * N * log(N)) = O(N^2 * log(N) * K)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-05T04:54:14.953

代码：

```
private static ElementData calcMin(int[] n1Arr, int[] n2Arr, int[] n3Arr) {

    ElementData data = new ElementData();// added just to know which two elements algo has picked

    int[] mixArr = { n1Arr[0], n2Arr[0], n3Arr[0] };
    Arrays.sort(mixArr);
    int minValue = mixArr[2] - mixArr[0];

    data.setMinValue(minValue);
    data.setHighValue(mixArr[2]);
    data.setLowValue(mixArr[0]);

    int tempValue = 0;
    for (int n1 : n1Arr) {

        for (int n2 : n2Arr) {

            for (int n3 : n3Arr) {

                int[] mixArr1 = { n1, n2, n3 };
                Arrays.sort(mixArr1);

                tempValue = mixArr1[2] - mixArr1[0];
                if (minValue > tempValue) {
                    minValue = tempValue;

                    data = new ElementData();
                    data.setMinValue(minValue);
                    data.setHighValue(mixArr1[2]);
                    data.setLowValue(mixArr1[0]);
                }
            }
        }
    }
    return data;
} 
```

# sql - 构建搜索引擎中的多个关键字

> ID：15909947
> 
> 赞同：1
> 
> 时间：2013-04-09T18:39:33.743
> 
> 标签：sql, asp-classic, search-engine, keyword

我目前正在尝试使用 asp 构建一个内部搜索引擎数据库。我不是专家，只是简要介绍了这种编码风格。我遇到的麻烦是这样的：

（例如）我有两个相对相同的文档，并且具有相同的关键字来描述它们。但是，表中的关键字并不是按照相同的顺序写的。表中所写的所有关键字均以空格分隔。

**项目**1关键词：**备件发动机**
**项目**2关键词：**备件发动机**

现在，如果我只输入这些关键词中的 **ONE(1)**，我所拥有的代码将允许我显示项目 1 和 2 ：

`sql = "Select title, descript, url, uid FROM searchMachine WHERE keywords LIKE '%" & Replace(keywords, "'", "''") & "%' ORDER BY uid;"`

但是，如果我要在搜索框中输入“备用引擎”，那么只会显示第 2 项，而不会显示第 1 项。此外，如果我要输入“零件引擎”或“引擎零件”，它们都不会显示。它似乎只参与列出的前 2 个（或成对的 2 个）关键字。我想要完成的目标是允许用户输入的分组关键字（即备用引擎部件）并允许它仍然显示列出任何关键字的所有相关信息，而不必担心编写成对或成组的关键字一遍又一遍。

我知道有一个全文搜索功能，但我研究过存在安全漏洞的实例，所以我想避免冒险。我有一种感觉，这可能更多地与 AND 或 OR 语句相关，但我不确定是否需要放置。有没有人对这种情况有任何专业知识并愿意提供帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:50:41.603

要做到您所说的非常简单，您必须根据搜索词中输入的单词数动态构建 WHERE 子句，因此您将有一个小循环添加到查询字符串中，生成“OR”语句对于在第一个单词之后输入的每个单词，因此如果输入 3 个单词“X、Y 和 Z”，您将有：

```
WHERE keywords LIKE 'X'
OR keywords LIKE 'Y'
OR keywords LIKE 'Z' 
```

您可以通过将搜索词分解为由空格分隔的单词来做到这一点，如果您有多个单词，请将每个单词的“OR”语句附加到您的查询字符串...

我不得不承认，克鲁塞尔是正确的，如果你要重新发明轮子，你应该有一些非常好的理由这样做......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:27:04.730

所以看看 HackyStack 在最近的帖子中的建议，一个计数器系统需要记录用户输入的单词空格中的中断。对于用户创建的每个空格，重复“OR keywords LIKE”语句. 它应该看起来像这样：

```
Dim strSQL, tmpSQL  
strSQL = "SELECT title, descript, url, uid FROM searchMachine WHERE "  
tmpSQL = "(keywords LIKE "    

Dim Pos
Pos = 1
While Pos > 0
    Pos = InStr(1, strSearch, " ")
    If Pos = 0 Then
        'We have it the end
        tmpSQL = tmpSQL & "'%" & strSearch & "%')"
    Else
        tmpSQL = tmpSQL & "'%" & Mid(strSearch, 1, Pos) & "%' " & DefaultBoolean & " keywords LIKE "
        strSearch = Mid(strSearch, Pos + 1, Len(strSearch))
    End If

End While 
```

所以为了分解我在这里的内容，我们首先设置我们的 sql 行的开始集。从那里我们需要指定计数器和分隔多个关键字所需的条件。首先，为 Pos 设置一个标记值并将其 int 值 1。接下来我们创建一个 InStr （设置正在搜索的项目的起始值，正在搜索的项目（在这种情况下 strSearch 等于txtBox 名称/值的名称）以及我们在该部分中检查的内容（在这种情况下，搜索词之间的任何空格）。如果 InStr 在搜索中未找到空格，则它将仅充当 1 个搜索词；否则, 它将解析这两个单词并将它们分开，如下所示。

例如，用户在搜索栏中输入“备用引擎”
结果返回：

关键字 LIKE '%spare%' 或关键字 LIKE '%engine%'

我要感谢我的同事 HackyStack 和 4guysfromrolla.com 在这方面的帮助。我希望我能解释清楚。

# java - Bitshift - 需要帮助来理解代码

> ID：15909949
> 
> 赞同：1
> 
> 时间：2013-04-09T18:39:38.897
> 
> 标签：java, bitwise-operators, bit-shift

我只是想学习按位/移位操作。

我遇到了下面的程序，但不理解下面程序中的 AND 条件部分（checker & (1 << val)。最终值什么时候会大于 0？有人可以解释一下那里发生了什么吗？

样本输入：xyzz

样本输出：

8388608Value 0checker 0最终值

16777216Value 8388608checker 0最终值

33554432Value 25165824checker 0 最终值

33554432Value 58720256checker 33554432final value

```
public static boolean isUniqueChars(String str) {
        int checker = 0;
        for (int i = 0; i < str.length(); i++) {
            int val = str.charAt(i) - 'a';

            System.out.println((1 << val) + "Value");
            System.out.println((checker) + "checker");
            System.out.println(((checker & (1 << val))) + "final value\n");

            if ((checker & (1 << val)) > 0) {
                return false;
            } else {
                checker = checker | (1 << val);
            }
        }
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T19:06:56.043

好的，只是为了确保您知道发生了什么：

`int val = str.charAt(i) - 'a';`

假设使用英文字母表，这将取您（小写）字母的 char 值并减去 97（'a' 的 char 值）以产生一个介于 0 和 25 之间的数字。不要在大写字符上尝试此功能，除非`.toLowerCase()`在`.charAt(i)`

`1 << val``val`向左位移 1位。例如，对于 'x' (120 - 97 = 23, so... `1 << 23`)，二进制表示为`00000000010000000000000000000000`

好的，到目前为止和我在一起吗？

一开始，checker 的位都是 0，所以它是`00000000000000000000000000000000`

所以......让我们输入我们的数字而不是我们的变量。对于我们的`x`检查，因为未在检查器中设置第 23 位，所以`checker & (1 << val)`变为`00000000000000000000000000000000 & 00000000010000000000000000000000`等于。`00000000000000000000000000000000`

因此，一旦`x`处理完毕，我们将第 23 位添加到 checker 并移动到下一个字母：`y` 这一次，因为第 24 位未在 checker 中设置，所以`checker & (1 << val)`变为`00000000010000000000000000000000 & 00000000100000000000000000000000`等于。`00000000000000000000000000000000`

对于第一个`z`，`checker & (1 << val)`变为`00000000110000000000000000000000 & 00000001000000000000000000000000`等于`00000000000000000000000000000000`，因为位 25 未在检查器中设置。

对于第二个`z`，`checker & (1 << val)`变为`00000001110000000000000000000000 & 00000001000000000000000000000000`等于`00000001000000000000000000000000`（十进制 33554432 或 2^25），因为在检查器**中**设置了第 25 位，因此`> 0`is now`true`并且函数返回`false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:07:53.687

我认为您的函数所做的是检查输入字符串中的所有字符是否不同。如果相同（小写）字符出现多次，则返回 false。

该`checker`变量用作一种位图，用于累积到目前为止已出现的字符。数据类型`int`由 32 位组成，足以为每个字符分配一位 (26)。

该函数循环遍历 str 的所有字符。该行根据字符（'a' => 0、'b' => 1、'c' => 2 等）`int val = str.charAt(i) - 'a';`分配某种序数值。`val`

该表达式`1 << val`将 (0..25) 范围内的每个 val 分配给它的位位置。因此，字符 'a' 映射到 1 << 0 == 1 == 00000001，字符 'd' 映射到 1 << 3 == 00001000，依此类推。每个字符都分配有其唯一的位掩码，其中一个位被设置，所有其他位被清除。

如果设置的位也在检查器中设置，则表达式`(checker & (1 << val))`> 0 `1 << val`（请注意，检查器可能设置了多个位）。如果是这样，则当前迭代的字符出现得更早，并且该函数返回 false。否则，当前字符的位掩码通过按位或运算符添加`|`到充当累加器的检查器中。如果所有字符都已循环并且没有字符遇到两次，则该函数返回 true。请注意，该函数可能会忽略大写和其他字符。

# c++ - g ++“没有命名类型”错误

> ID：15909950
> 
> 赞同：0
> 
> 时间：2013-04-09T18:39:42.150
> 
> 标签：c++, compiler-errors, makefile, g++, header-files

我正在为我的结构课做一个小项目，并且遇到了一个问题，即使 TA 也无法弄清楚。有人建议我在这里发布它，我可能会得到一些帮助。所以这里是：

**概述：** 我正在使用 g++ 编译一个项目，该项目包含许多头文件 (.h) 及其相应的实现 (.cpp) 文件。该项目涉及 3 个独立的结构，并在它们之间进行时间比较。正在实现和比较的结构是二进制最小堆、左堆和倾斜堆。最小堆实现已完成，并且正在编译。然而，现在我正在转向其他结构，我遇到了我假设（我知道）是编译器错误。

**问题** 我正在充实左派堆的存根文件，并且就编译器而言已经碰壁了。特别是我收到一个错误，内容如下：

```
leftHeap.cpp:15:1: error: ‘LeftistHeap’ does not name a type 
```

**代码** 下面看一下相关代码：

左堆.h

```
#ifdef LEFTHEAP_H
#define LEFTHEAP_H

class LeftistHeap{

 public:
  int *root;
  LeftistHeap();
  ~LeftistHeap();
};

#endif 
```

左堆.cpp

```
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <stdio.h>
#include <math.h>
#include "leftHeap.h"
using namespace std;

//Constuctor
LeftistHeap::LeftistHeap(){

 root = NULL;
} 
```

包含 leftHeap.h 的唯一其他地方是 main.cpp

主文件

```
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <stdio.h>
#include <math.h>
#include "minHeap.h"
#include "leftHeap.h"
#include "skewHeap.h"
using namespace std;

int main(){
... 
```

这是我正在使用的makefile：

生成文件

```
all: lab10

lab10: comparison.o minHeap.o leftHeap.o skewHeap.o
        g++ comparison.o minHeap.o leftHeap.o skewHeap.o -o lab10

comparison.o: comparison.cpp
    g++ -c comparison.cpp

minHeap.o: minHeap.h minHeap.cpp
    g++ -c minHeap.h minHeap.cpp

leftHeap.o: leftHeap.h leftHeap.cpp
    g++ -c leftHeap.h leftHeap.cpp

skewHeap.o: skewHeap.h skewHeap.cpp
    g++ -c skewHeap.h skewHeap.cpp

clean:
    rm lab10 *.o 
```

为了更加彻底，我还尝试了一个更简约的 makefile

生成文件 (2)

```
test:
    g++ minHeap.h leftHeap.h skewHeap.h comparison.cpp minHeap.cpp leftHeap.cpp skewHeap.cpp -o lab10
clean:
        rm lab10 *.o 
```

我希望这不是信息过载。如果有人对此有任何想法，请告诉我。我已经查看了此处的其他 g++“未命名类型”问题（以及一些完整的谷歌搜索页面），但没有发现任何可能导致此问题的原因。我有这种偷偷摸摸的怀疑，这可能是我忽略的一些简单的事情，但任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T18:43:27.057

仔细看看你的包含警卫：`#ifdef LEFTHEAP_H`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:44:17.867

这只是一个错字（假设它被准确转录）：

```
#ifdef LEFTHEAP_H
#define LEFTHEAP_H 
```

在 leftHeap.h 中应该是 #ifndef

```
#ifndef LEFTHEAP_H
#define LEFTHEAP_H 
```

# ruby-on-rails-3 - 提交时的时间格式

> ID：15909953
> 
> 赞同：0
> 
> 时间：2013-04-09T18:39:47.523
> 
> 标签：ruby-on-rails-3, if-statement, time-select

我有一个这样的表单输入代码：

```
 <%= f.time_select :delivery_time, {:default => 5.hours.from_now, :minute_step => 5, :ampm => true}, {:class=>"input-small"} %> 
```

这是提交值，如：2013-04-09 23:00:00 UTC

但我想要像：23:00 这样的值，因为无论日期如何，都需要按时间定义条件。我尝试做类似的事情：

```
 if (@order.delivery_time.between?('21:00', '00:00')) 
      @order.total = @order.total + @@mnc 
    end 
```

但是它给出了错误，因为delivery_time 是nil:class。但是当打印 delivery_time 它打印：2013-04-09 23:00:00 UTC。

不知道如何让它工作。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:33:00.580

您可能会想出一些日期值，以便您可以调用`#between?`. 仅提取您需要比较的日期部分会更简单，也更能揭示意图。

```
def late_order?(time)
  time.hour > 21
end

delivery_time = Time.new(2012, 1, 1, 22)
total = 300
total += 75 if late_order?(delivery_time)

puts "total for order: #{total}"   #=> 375 
```

# javascript - 在 iframe 中停止 Jwplayer

> ID：15909954
> 
> 赞同：2
> 
> 时间：2013-04-09T18:39:49.793
> 
> 标签：javascript, jquery, iframe, jwplayer

嗨，我提出了一个类似的问题（不一样），关于单击其他按钮时如何停止 JWplayer。它工作得很好，使用

```
onclick='jwplayer().stop()' 
```

[用播放器隐藏 div 时停止 JWPlayer](https://stackoverflow.com/questions/15909006/stop-jwplayer-when-hidden-the-div-with-the-player/15909169)

无论如何，当 JWplayer 加载到 iframe 中时，此解决方案不起作用。

我想这需要一些额外的java，我也不知道。我搜索并找到了这个.. [http://www.dyn-web.com/tutorials/iframes/refs/](http://www.dyn-web.com/tutorials/iframes/refs/)

但我不知道如何使用它。

这是我正在使用的代码（对 id 感到抱歉，但我必须确保它们没有冲突）

```
$("#prevvv").click(function() {
  $("#mvideoo").contents().find("#mvideoo").jwplayer().stop();
});

$("#nexttt").click(function() {
   $("#mvideoo").contents().find("#mvideoo").jwplayer().stop();
}); 
```

这没有任何想法？

# c++ - 通过变量参数列表传递 shared_ptr

> ID：15909955
> 
> 赞同：0
> 
> 时间：2013-04-09T18:39:50.650
> 
> 标签：c++, shared-ptr, variadic-functions

这可能吗？我将如何传递 shared_ptr(s)？我发现了一些相关的问题（[C++ variable number of arguments](https://stackoverflow.com/questions/5807009/c-variable-number-of-arguments/5807530#5807530)），但它并没有完全解决我的问题。我尝试了几种方法来编写这样的函数，但我得到的只是一个错误`error: cannot receive objects of non-trivially-copyable type ‘class std::shared_ptr<Item>’ through ‘...’;`

如果这根本不是一个好主意，我怎么能传递任意数量的 shared_ptr 作为参数，几乎类似于可变参数模板之类的东西？也许这比我想象的还要简单......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:47:24.300

使用 C++11，您可以使用可变参数模板或初始化列表。初始化列表更容易使用，因为它们不需要递归，并且可以在单独的编译单元中定义：

```
void foobar(std::initializer_list<std::shared_ptr<widget>> widgets);

std::shared_ptr<widget> foo;
std::shared_ptr<widget> bar;
foobar({ foo, bar }); 
```

# ios - 存折中的标签而不是条形码

> ID：15909956
> 
> 赞同：0
> 
> 时间：2013-04-09T18:39:55.723
> 
> 标签：ios, ios6, barcode, passbook, passkit

是否可以在优惠券类型通行证中放置带有文本而不是条形码的标签？像这样的东西。

![在此处输入图像描述](https://i.stack.imgur.com/Pl3L2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:09:12.373

在 iOS6 的早期测试版中，它曾经可以有条形码类型`PKBarcodeFormatText`，但这从未进入生产版本。

现在无法用文本替换条形码。您可以做的最好的事情是添加一个代码并使用 altText 键在条形码下方提供一个清晰的字符串。

从[存折包格式参考](https://developer.apple.com/library/ios/#documentation/UserExperience/Reference/PassKit_Bundle/Chapters/LowerLevel.html#//apple_ref/doc/uid/TP40012026-CH3-SW1)指南：

![存折包格式参考](https://i.stack.imgur.com/Of5NS.png)

# python - 从我的追随者 django 那里获取活动

> ID：15909958
> 
> 赞同：1
> 
> 时间：2013-04-09T18:39:57.493
> 
> 标签：python, django, django-queryset

我有 3 个模型：

```
class UserProfile(models.Model):    
    slug = models.SlugField(max_length=200)
    user = models.ForeignKey(User, unique =True)
    relationships = models.ManyToManyField('self', through='Relationship',symmetrical=False,null=True, blank=True,related_name='related_to')

    def get_relationships(self, status):
        return self.relationships.filter(
        to_people__status=status, 
        to_people__from_person=self)

    def get_related_to(self, status):
        return self.related_to.filter(
        from_people__status=status, 
        from_people__to_person=self)

    def get_following(self):
        return self.get_relationships(RELATIONSHIP_FOLLOWING)

    def get_followers(self):
        return self.get_related_to(RELATIONSHIP_FOLLOWING)

class Relationship(models.Model):
    from_person = models.ForeignKey(UserProfile, related_name='from_people')
    to_person = models.ForeignKey(UserProfile, related_name='to_people')
    status = models.IntegerField(choices=RELATIONSHIP_STATUSES)

class ActivityUser(models.Model):
   slug = models.SlugField(max_length=200)
   user = models.ForeignKey('UserProfile')
   userB = models.ForeignKey('UserProfile', related_name='userFriend',null=True, blank=True)
   status = models.IntegerField(choices=NOTIFICATION_STATUS)
   date = models.DateTimeField(default=datetime.now) 
```

基本上用户可以互相关注并且用户有活动。我希望能够从我的所有追随者和追随者那里获得所有活动。任何想法 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:02:29.717

您如何看待向 UserProfile 类添加另一个方法？

```
class UserProfile(models.Model):
    slug = models.SlugField(max_length=200)
    user = models.ForeignKey(User, unique =True)
    relationships = models.ManyToManyField('self', through='Relationship',symmetrical=False,null=True, blank=True,related_name='related_to')

    def get_relationships(self, status):
        return self.relationships.filter(
            to_people__status=status,
            to_people__from_person=self)

    def get_related_to(self, status):
        return self.related_to.filter(
            from_people__status=status,
            from_people__to_person=self)

    def get_following(self):
        return self.get_relationships(RELATIONSHIP_FOLLOWING)

    def get_followers(self):
        return self.get_related_to(RELATIONSHIP_FOLLOWING)

    def get_all_activities(self):
        list_activities = []
        for follower in self.get_followers():
            list_activities.append(follower.ActivitieUser_set.all()        
        return list_activities 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:07:29.297

实际上我使用了一个查询

```
ActivityUser.objects.filter(
    Q(user__in=profile.get_followers()) | 
    Q(user__in=profile.get_following())).order_by("-date") 
```

# java - 似乎无法返回值

> ID：15909959
> 
> 赞同：0
> 
> 时间：2013-04-09T18:40:01.443
> 
> 标签：java, class, object

我刚刚编辑了我的帖子以更新我的代码......当我编译指出“找不到符号”时，我仍然收到一条错误消息。我从来没有见过这个错误所以我不知道如何调试它，非常感谢大家的帮助！

```
public class HealthRecord {
    private int ID;  // stores ID number
    private String last; // stores last name
    private String first; //stores first name
    private double height; // stores height
    private double weight; // stores weight
    private double bmi;// i may need to create the bmi variable so that it can be stored (weight / (height*height)) *703;

    public HealthRecord( int ID, String last, String first, double height, double weight)
    {
        this.ID = ID;
        this.last = last;
        this.first = first;
        this.height = height;
        this.weight = weight;
        this.bmi = bmi;
    }

    public int getID()    {
        return ID;
    }

    public void setID(int ID)    {
        this.ID = ID;
    }

    public String getLast() {
        return last;
    }

    public void setLast(String last)    {
        this.last = last;
    }

    public String getFirst()    {
        return first;
    }

    public void setFirst(String last) {
        this.first = first;
    }

    public double getheight() {
        return height;
    }

    public void setHeight(double height) {
        this.height = height;
    }

    public double getWeight() {
        return weight;
    }

    public void setWeight(double weight) {
        this.weight = weight;
    }

    public double getbmi() {
        return (weight / (height*height)) *703;
    }

    public void setbmi(double bmi) {
        this.bmi = bmi;
    }
} 
```

* * *

## 下一堂课

```
 import java.util.Scanner; 
import java.io.File; 

public class OpenFile 
    { 
        private Scanner input; 

        public void openFile() throws Exception 
        { 
        input = new Scanner(new File("medrec.txt")); // opens the text file to be read (weight / (height*height)) *703); 

    } 

     public void readFile() 
     { 
        int ID;  // stores ID number 
        String last; // stores last name 
        String first; //stores first name 
        double height; // stores height 
        double weight; // stores weight      

        input.nextLine(); 

        while(input.hasNextLine()) 
            {                     
                ID = input.nextInt();  
                last = input.next(); 
                first = input.next(); 
                height = input.nextDouble(); 
                weight = input.nextDouble(); 

                HealthRecord healthrecord= new HealthRecord(ID,last,first,height,weight); 

                System.out.printf("%d", healthrecord.getID(), healthrecord.getBmi()); 
            } 
        } 

    public void closeFile() 
    { 
        input.close(); 
    } 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:44:02.993

代替

```
System.out.printf("%d %d", HealthRecord.getID, HealthRecord.getBmi); 
```

和

```
System.out.printf("%d %f", healthrecord.getID(), healthrecord.bmi()); 
```

使用`healthrecord`您创建的实例。该方法`getID`需要括号。`getBmi`也不作为一种方法存在。目前你有`bmi`.

* * *

*在旁边：*

目前此代码无法编译。中的所有方法`openFile`都是实例方法。您需要创建一个实例并使用：

```
Openfile myOpenfile = new Openfile();
myOpenfile.openFile();
myOpenfile.readFile();
myOpenfile.closeFile(); 
```

Java 命名约定表明类名以*大写*字母开头，例如`Openfile`

* * *

编辑：

在您更新的文件中，`getBmi`不存在，而是`getbmi`：

```
System.out.printf("%d %f", healthrecord.getID(), healthrecord.getbmi());
                                                              ^ 
```

您可能希望将方法重命名`getBmi`为遵循方法命名约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:56:24.400

我在`HealthRecord`构造函数或 bmi 的 getter 方法中看不到任何 bmi 计算。即使我在课堂上也看不到`getBmi()`方法。`HealthRecord`

在类中添加以下方法`HealthRecord`：

```
public double getBmi() {

    return (weight / (height*height)) *703; //check this formula if it is correct for BMI calculation or not
} 
```

接下来你需要在主类中使用这个调用：

```
System.out.printf("%d %d", healthrecord.getID(), healthrecord.getBmi()); 
```

# python - 如何在git中使用python和dulwich获取标签列表并创建新标签？

> ID：15909962
> 
> 赞同：6
> 
> 时间：2013-04-09T18:40:11.870
> 
> 标签：python, git, dulwich

我在使用 python 检索 git repo 的以下信息时遇到问题：

1.  我想获取此存储库的所有标签的列表。
2.  我想签出另一个分支并创建一个新的分期分支。
3.  我想用带注释的标签来标记提交。

我查看了德威的文档，它的工作方式似乎非常简单。还有更容易使用的替代品吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-19T21:54:20.823

使用 Dulwich 获取所有标签的最简单方法是：

```
from dulwich.repo import Repo
r = Repo("/path/to/repo")
tags = r.refs.as_dict("refs/tags") 
```

*tags*现在是一个字典，将标签映射到提交 SHA1。

检查另一个分支：

```
r.refs.set_symbolic_ref("HEAD", "refs/heads/foo")
r.reset_index() 
```

创建分支：

```
r.refs["refs/heads/foo"] = head_sha1_of_new_branch 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-13T19:50:49.443

现在您还可以获得[按字母顺序](https://github.com/jelmer/dulwich/blob/2a3ce7b7804c0e0e04033e604902ced99cedf8e7/dulwich/porcelain.py#L437-L446)排列的标签标签列表。

```
from dulwich.repo import Repo
from dulwich.porcelain import tag_list

repo = Repo('.')
tag_labels = tag_list(repo) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T18:44:00.853

通过调用 git `subprocess`。从我自己的程序之一：

```
def gitcmd(cmds, output=False):
    """Run the specified git command.

    Arguments:
    cmds   -- command string or list of strings of command and arguments
    output -- wether the output should be captured and returned, or
              just the return value
    """
    if isinstance(cmds, str):
        if ' ' in cmds:
            raise ValueError('No spaces in single command allowed.')
        cmds = [cmds] # make it into a list.
    # at this point we'll assume cmds was a list.
    cmds = ['git'] + cmds # prepend with git
    if output: # should the output be captured?
        rv = subprocess.check_output(cmds, stderr=subprocess.STDOUT).decode()
    else:
        with open(os.devnull, 'w') as bb:
            rv = subprocess.call(cmds, stdout=bb, stderr=bb)
    return rv 
```

一些例子：

```
rv = gitcmd(['gc', '--auto', '--quiet',])
outp = gitcmd('status', True) 
```

# jquery - 如何在每次输入更改时更改（添加）DIV 类？

> ID：15909965
> 
> 赞同：1
> 
> 时间：2013-04-09T18:40:30.637
> 
> 标签：jquery, html, validation

我在问是否可以在输入更改/验证时动态地将一个类更改（添加）到一个 DIV。少说例如我有两个类：成功和错误。HTML 标记基本上是这样的：

```
<div class="control-group">
    <label class="control-label" for="inputFirstName">First Name: <span class="text-error">*</span></label>
    <div class="controls">
        <input type="text" id="inputFirstName" placeholder="John">
    </div>
</div> 
```

因此，当我用一些值填充输入时（无论是否正确，因为我通过 PHP 处理验证），那么我应该`success`在`control-group`课后或`error`输入为空时编写。我如何使用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:45:06.637

就像是

```
$div = $(".control-group");
if($("#inputFirstName").length){
  $div.addClass('success');
}else{
   $div.addClass('error');
} 
```

将其添加到表单提交或任何其他适当的事件中，如[tymeJV](https://stackoverflow.com/a/15910069/705773)`focusout`给出的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:45:42.173

您可以使用该`focusout`方法

```
$("#inputFirstName").focusout(function() {
    var isValid; //Set to either true or false
    isValid ? $(".control-group").addClass("success") : $(".control-group").addClass("error");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T21:55:04.940

要为表单中的每个文本字段完成此操作（根据要求）：

```
$('#formId input[type=text]').blur(function(e) {
    var input = $(e.target);
    if (input.val().length > 0) {
        input.addClass('success');
        input.removeClass('error');
    }
    else {
        input.addClass('error');
        input.removeClass('success');
    }
}); 
```

看到[这个 jsFiddle](http://jsfiddle.net/NwhvT/)。

# jstl - freemarker 模板中的 JSTL 错误

> ID：15909968
> 
> 赞同：0
> 
> 时间：2013-04-09T18:40:34.543
> 
> 标签：jstl, freemarker

我正在尝试在 Freemarker 模板中实现 JSTL。为此，我获得了一个示例 freemarker 模板示例，并尝试合并 JSTL 命名空间并尝试执行它。这是我的代码现在的样子。

```
<html>
<head><title>ViralPatel.net - FreeMarker Spring MVC Hello World</title>
<#assign c=JspTaglibs["http://java.sun.com/jstl/core"]/>
<style>
body, input {
font-family: Calibri, Arial;
margin: 0px;
padding: 0px;
}
#header h2 {
color: white;
background-color: #3275A8;
height: 50px;
padding: 5px 0 0 5px;
font-size: 20px;
}

.datatable {margin-bottom:5px;border:1px solid #eee;border-      collapse:collapse;width:400px;max-width:100%;font-family:Calibri}
.datatable th {padding:3px;border:1px solid #888;height:30px;background-color:#B2D487;text-align:center;vertical-align:middle;color:#444444}
.datatable tr {border:1px solid #888}
.datatable tr.odd {background-color:#eee}
.datatable td {padding:2px;border:1px solid #888}
#content { padding 5px; margin: 5px; text-align: center}

fieldset { width: 300px; padding: 5px; margin-bottom: 0px; }
legend { font-weight: bold; }
</style>

<body>
<div id="header">
<H2>
<a href="http://viralpatel.net"><img height="37" width="236" border="0px" src="http://viralpatel.net/blogs/wp-content/themes/vp/images/logo.png" align="left"/></a>
FreeMarker Spring MVC Hello World
</H2>
 </div>

<div id="content">
<c:set var="Salary" value="4000/>
<c:out value="${Salary}/>

 <fieldset>
<legend>Add User</legend>
 <form name="user" action="add.html" method="post">
Firstname: <input type="text" name="firstname" />   <br/>
Lastname: <input type="text" name="lastname" /> <br/>

<input type="submit" value="   Save   " />
  </form>
  </fieldset>
  <br/>
  <table class="datatable">
<tr>
    <th>Firstname</th>  <th>Lastname</th>
</tr>
    <#list model["userList"] as user>
<tr>
    <td>${user.firstname}</td> <td>${user.lastname}</td>
</tr>
    </#list>

  </table>

</div>  
 </body>
</html> 
```

我知道问题出在我添加的新代码上，即薪水，我看到以下错误。

```
freemarker.core.InvalidReferenceException: Expression Salary is undefined on line 62, column 5 in index.ftl.
at freemarker.core.TemplateObject.assertNonNull(TemplateObject.java:124) 
```

我究竟做错了什么？

谢谢尼基尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:36:00.613

您做错的事情是不了解 Freemarker 的工作原理，并认为它在某种程度上完全无法与 JSP 一起使用。据我所知，当 Freemarker 已经这样做时，您已经导入了 JSTL 以便设置和输出变量值。

替换这个：

```
<c:set var="Salary" value="4000/>
<c:out value="${Salary}/> 
```

...有了这个：

```
<#assign Salary = 4000>
${Salary} 
```

此外，摆脱 JSTL 标签库，学习如何使用 Freemarker。你会快乐很多。

# python - 了解 `pylab.legend` 的默认用法

> ID：15909970
> 
> 赞同：1
> 
> 时间：2013-04-09T18:40:35.810
> 
> 标签：python, matplotlib, legend

我正在使用 pylab 生成此图像： ![带有混乱图例的图像](https://i.stack.imgur.com/7w9bp.png)

传说不是我想要的。点代表实际数据点，线条由 polyfit 制成。我希望图例包含十个条目，其中每种颜色的线和点合并在一起，或者仅包含十个点线。

相关的一段代码：

```
for i in range(start, start + size*chunks):
    colorVal = scalarMap.to_rgba(values[i])
    slc1, slc2 = start + i*size, start + (i+1)*size
    mylegend.append(" = ".join([self.dtypes[v1],
                              "%.2f" %data[v1, slc1]]))
    jx = data[x, slc1:slc2]
    jy = data[y, slc1:slc2]
    p  = np.polyfit(jx, jy, deg = 2)
    lx = np.linspace(jx[0], jx[-1], 1000)
    ly = p[0]*lx**2 + p[1]*lx + p[2]
    pl.plot(jx, jy, "o", color = colorVal)
    pl.plot(lx, ly, color = colorVal)
pl.xlabel(self.dtypes[x])
pl.ylabel(self.dtypes[y])
pl.title(title)
pl.axis(axis)
pl.legend(my_legend, loc = "upper left", shadow = True)
pl.grid("on")
pl.show() 
```

我意识到错误是什么：我在 my_legend 列表中添加了 10 个点，然后 pylab 的图例函数正在读取它，直到列表结束。因此，只有一半的人成功了。但是，我不知道如何解决它。有没有一种方法可以使图例函数只为循环的每次迭代注册一个条目？

另外，我想以相反的顺序列出要点。我试过

```
pl.legend(my_legend[::-1]) 
```

但这没有用。

对这两个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:51:39.673

`pylab.legend`一旦你了解它是如何工作的，它的行为就会被挪用。当您调用`pylab.legend(my_legend, ...)`时，标签的字符串列表与绘制的前 10 条线相关联。按照您的方式，前 10 行是前 5 个循环中添加的行。要仅显示点，您可以这样做：

```
for i in range(start, start + size*chunks):
    [...]
    label = " = ".join([self.dtypes[v1], "%.2f" %data[v1, slc1]])
    [...]
    pl.plot(jx, jy, "o", color = colorVal, label=label)
    pl.plot(lx, ly, color = colorVal)

[...]
pl.legend(loc = "upper left", shadow = True) 
```

如果您想要线条的图例，您只需将`label=label`放入另一个绘图命令中。

另一种方法是创建一个`mylines`列表（类似于`mylegend`）并仅附加一个 plot 命令，然后调用`pl.legend(mylines, mylegend, ...)`

# jquery - 在链接点击时触发 jQuery 脚本（不是在页面加载时）

> ID：15909973
> 
> 赞同：0
> 
> 时间：2013-04-09T18:40:50.277
> 
> 标签：jquery, jquery-plugins

对于我确定是一个与 jQuery 相关的完全新手问题，我提前道歉。

我正在尝试通过 Zurb 配置“jQuery Feature Tour”：[http ://www.zurb.com/playground/jquery_joyride_feature_tour_plugin](http://www.zurb.com/playground/jquery_joyride_feature_tour_plugin)

默认情况下，他们进行了一些设置，以便在页面加载时开始游览，但这不是我想要的。

我想要一个标有“开始游览”的链接，单击该链接将开始游览。

他们提供的默认代码是这样的：

```
 $(window).load(function() {
    $('#joyRideTipContent').joyride({
      autoStart : true,
      postStepCallback : function (index, tip) {
      if (index == 2) {
        $(this).joyride('set_li', false, 1);
      }
    },
    modal:true,
    expose: true
    });
  }); 
```

显然我可以将 autoStart 设置为“false”。

但是，即使那样，我也不知道如何在单击另一个链接时触发脚本运行。

任何帮助是极大的赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:42:50.177

尝试

```
$("a").click(function() {
    $('#joyRideTipContent').joyride({
        autoStart : true,
        postStepCallback : function (index, tip) {
            if (index == 2) {
                $(this).joyride('set_li', false, 1);
            }
        },
        modal:true,
        expose: true
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:42:54.883

```
$('a#LinkId').click(onClick);

function onClick() {
    // This function will execute when the link with id='LinkId' is clicked.
    // You can put the code to start the tour inside this function.
} 
```

# java - Jersey REST WS 错误：“缺少方法的依赖项...在索引 X 处的参数”

> ID：15909978
> 
> 赞同：9
> 
> 时间：2013-04-09T18:41:07.030
> 
> 标签：java, rest, jersey, media-type

我收到以下错误：

```
Apr 09, 2013 12:24:26 PM com.sun.jersey.spi.inject.Errors processErrorMessages
SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
SEVERE: Missing dependency for method public javax.ws.rs.core.Response com.package.ImportService.specifyLocalFile(java.lang.String,java.lang.String,java.lang.String,java.lang.String) at parameter at index 0
SEVERE: Missing dependency for method public javax.ws.rs.core.Response com.package.ImportService.specifyLocalFile(java.lang.String,java.lang.String,java.lang.String,java.lang.String) at parameter at index 1
SEVERE: Missing dependency for method public javax.ws.rs.core.Response com.package.ImportService.specifyLocalFile(java.lang.String,java.lang.String,java.lang.String,java.lang.String) at parameter at index 2
SEVERE: Missing dependency for method public javax.ws.rs.core.Response com.package.ImportService.specifyLocalFile(java.lang.String,java.lang.String,java.lang.String,java.lang.String) at parameter at index 3
SEVERE: Method, public javax.ws.rs.core.Response com.package.ImportService.specifyLocalFile(java.lang.String,java.lang.String,java.lang.String,java.lang.String), annotated with POST of resource, class com.package.ImportService, is not recognized as valid resource method. 
```

我有一个以前工作的 POST 方法，它需要一个多部分数据（文件上传），然后是提交表单中的一些其他字符串数据字段，代码如下：

```
@POST
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response uploadFile(
    @FormDataParam("file") InputStream uploadedInputStream,
    @FormDataParam("file") FormDataContentDisposition fileDetail,
    @FormDataParam("param1") String param1,
    @FormDataParam("param2") String param2,
    @FormDataParam("param3") String param3) {
    ....
    ....
    return Response.status(200).entity(getEntity()).build();
} 
```

该错误似乎与 Jersey 解释表单参数的方式有关。这是失败的代码：

```
@POST
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
@Path("/local")
public Response specifyLocalFile(
    @FormDataParam("file") String fullFilePath,
    @FormDataParam("param1") String param1,
    @FormDataParam("param2") String param2,
    @FormDataParam("param3") String param3) {
    ....
    ....
    return Response.status(200).entity(getEntity()).build();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T18:41:07.030

在谷歌搜索了一下之后，我最终回顾了一些有趣的案例，例如[@FormParam 的 Failed unmarshalling issue](https://stackoverflow.com/questions/15024408/jax-rs-exception-annotated-with-get-of-resource-class-is-not-recognized-as-val)或[Missing mulipart JAR dependency issue](https://stackoverflow.com/questions/12203391/formdataparam-throws-severe-missing-dependency)最接近我的问题的帖子是：[“Missing dependecy for method”](https://stackoverflow.com/questions/12262610/missing-dependecy-for-method)，我用链接回答到这个帖子，因为我看不到那个特定的解决方案。

`@FormDataParam`当与值为的方法级`@Consumes`注释一起使用时，该问题似乎与注释有关`MediaType.APPLICATION_FORM_URLENCODED`。

当我更改方法签名以使用 注释每个纯文本字段时`@FormParam`，异常消失了。检查下面的固定代码：

```
@POST
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
@Path("/local")
public Response specifyLocalFile()
    @FormParam("file") String fullFilePath,
    @FormParam("param1") String param1,
    @FormParam("param2") String param2,
    @FormParam("param3") String param3) {
    .... 
```

如果接收到的数据类型不必处理 MIME 编码，则`@FormParam`注解将尝试通过序列化处理内容；相反，`@FormDataParam`注释需要一些特定的处理，当`@Consumes`注释具有`MediaType.MULTIPART_FORM_DATA`. 希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-16T12:47:14.363

我的项目也有同样的错误。

1）您需要将所有球衣依赖项放到同一版本。

2）由于@ApiParam 大张旗鼓的注释，我也遇到了问题：

```
@ApiParam(value = "import file", required = true) @FormDataParam("file") InputStream inputStreamCsv 
```

删除它们就可以了：

```
@FormDataParam("file") InputStream inputStreamCsv 
```

这是提到问题的链接：[https ://github.com/swagger-api/swagger-core/issues/1530](https://github.com/swagger-api/swagger-core/issues/1530)

最后，一切都与此有关：

```
@POST
@Path("/import")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response import(
        @FormDataParam("file") InputStream inputStreamCsv,
        @FormDataParam("file") FormDataContentDisposition detailsFichier) {...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-23T12:34:05.587

供参考：在我的情况下，它是 depency `jersey-multipart`，用于与其他 Jersey 库不同的版本，导致与多部分表单数据相关的此错误。--> 确保对所有 Jersey 库使用相同的版本号！（`mvn dependency:tree`是你的朋友）

# asp.net - 如何从服务器打印 ASP.NET MVC2 视图

> ID：15909982
> 
> 赞同：0
> 
> 时间：2013-04-09T18:41:09.967
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-2, printing-web-page

我正在寻找一种从 Windows 2003 服务器中运行的 ASP.NET 应用程序打印 ASP.NET/Mono MVC2 视图的方法。我基于[ASP.NET MVC 中的“hello world”默认服务器端打印机尝试了下面的代码](https://stackoverflow.com/questions/12229823/programmatically-hello-world-default-server-side-printer-in-asp-net-mvc)

但这会输出原始的 html 字符串。如何使用免费软件将视图打印为格式化文本？

订单布局创建为 html 局部视图。如果有其他免费的方式来打印格式化订单，我可以用其他形式而不是 html 创建布局。

只有我发现的免费解决方案需要使用 Windows 窗体 WebBrowser 控件，但这在也运行在 Mono 下的 MVC2 应用程序中看起来不合理。

我查看了 Rotativa（[http://nuget.org/packages/Rotativa/](http://nuget.org/packages/Rotativa/)），但它看起来不允许打印 html。

```
using System.Drawing;
using System.Drawing.Printing;
using System.IO;
using System.Web.Mvc;

public class PrintController : Controller
{
    string body;
    public ActionResult Complete()
    {
        body = RenderViewToString<TestOrder>("~/Views/Checkout/Order.ascx", new TestOrder() { Number = "1" });
        PrintOrder();
        return View("PaymentComplete");
    }

    void PrintOrder()
    {
        // https://stackoverflow.com/questions/12229823/programmatically-hello-world-default-server-side-printer-in-asp-net-mvc
        var doc = new PrintDocument();
        doc.PrinterSettings.PrinterName = "HP Laserjet 1200";
        doc.PrintPage += new PrintPageEventHandler(ProvideContent);
        doc.Print();
    }

    void ProvideContent(object sender, PrintPageEventArgs e)
    {
        e.Graphics.DrawString(body,
          new Font("Arial", 12),
          Brushes.Black,
          e.MarginBounds.Left,
          e.MarginBounds.Top);
    }

    string RenderViewToString<T>(string viewPath, T model)
    { // https://stackoverflow.com/questions/483091/render-a-view-as-a-string
        ViewData.Model = model;
        using (var writer = new StringWriter())
        {
            var view = new WebFormView(viewPath);
            var vdd = new ViewDataDictionary<T>(model);
            var viewCxt = new ViewContext(ControllerContext, view, vdd, new TempDataDictionary(), writer);
            viewCxt.View.Render(viewCxt, writer);
            return writer.ToString();
        }
    }
}

public class TestOrder
{
    public string Number;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T19:20:06.913

有一篇关于使用 iTextSharp 将 HTML 转换为 PDF 的文章：http: [//www.dotnetspider.com/resources/43589-How-convert-HTML-PDF-ASP-NET.aspx](http://www.dotnetspider.com/resources/43589-How-convert-HTML-PDF-ASP-NET.aspx)

# html - 不使用 .NET 或 PHP 的 jQuery 和 SQL Server

> ID：15909983
> 
> 赞同：0
> 
> 时间：2013-04-09T18:41:13.547
> 
> 标签：html, sql-server, jquery-ui, jquery

我是 jQuery 的新手，并创建了一个网页来教自己如何用它做一些事情。除其他外，我想从 SQL Server 数据库中读取、写入并调用存储过程。

我的测试页面的一个功能是在页面的上半部分有一个按钮，您可以单击该按钮并调用存储过程，而该网页的底部可以在数据写入表时读取和刷新（*注意：由于大多数操作都是在调用存储过程之后进行的，因此我正在考虑在 SQL Server 表上使用触发器，该触发器将写入正在刷新的表*）。

使用 jQuery 1.9.1、jquery-ui 1.10.2 和 Microsoft SQL Server 2008 和 2012。目前正在使用 SQL Server 的 Express 版本进行测试。我受到限制，因为我无法使用 ASP.NET 或 PHP 来创建 Web 服务。

我正在尝试查找教程、分步指南或其他参考/指南：

1.  让我知道我想做的事情是否可行（考虑到我将拥有的限制），
2.  并提供一些关于如何去做的指导。

我已经能够创建一个检索 RSS 数据的 Web 服务，并为这些数据找到了一些方法。Ajax 用于检索该数据，但我找不到任何不使用 ASP.NET 或 PHP 的有用指令。

对于使用 jQuery 读取和写入 SQL Server 数据库的任何想法、指导或方向，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:49:17.913

你有点跑题了。

您可以使用 jQuery Javascript 在您的 Web 服务器上调用服务方法，这反过来会调用存储过程并将结果返回给浏览器。但是，您不能直接从 Javascript 使用 SQL。

话虽如此，Microsoft 有一个名为“Entity Framework”的 .net 框架组件，它会为您执行一些步骤。

基本步骤是这样的：

(1) 在 SQL 中创建存储过程。我们称它为 my_proc。

(2) 在 Visual Studio 中创建一个 MVC 应用程序。

(2) 在您的 MVC 应用程序中创建一个“实体数据模型”。请务必将 my_proc 导入您的模型。这将创建一个类，该类表示以列为属性的存储过程调用的结果。

(3) 在同一个应用程序中，创建一个带有“JsonResult”方法的控制器。它应该如下所示：

```
public JsonResult CallMyProc()
{
    MyEntities entities = new MyEntities();
    var result = entities.my_proc("a", "b", "c");
    return result;
} 
```

(4) 使用jQuery AJAX 调用C​​allMyProc。数据将被序列化为 JSON，并且可以反序列化为您可以使用的 Javascript 对象。

那应该让你开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:50:56.627

这是不可能的。SQL 数据库存在于服务器上，javascript/jquery 代码运行在客户端（Web 浏览器）上。旧版本的 SQL Server 包含直接创建 Web 服务（HTTP 端点）的功能，但相应地已将其删除。

因此，您将需要某种类型的服务器端代码来创建可以通过 javascript 调用的 Web 服务，进而可以调用数据库。

# javascript - getAttribute 返回 [object Window] 而不是 Value

> ID：15909984
> 
> 赞同：1
> 
> 时间：2013-04-09T18:41:16.157
> 
> 标签：javascript, dom, firebug

我正在使用 JavaScript 将一组分层元素写入 DOM 文档，并在 FireFox 20.0 上使用 FireBug 进行调试。根据我在使用 FireBug 检查 DOM 时看到的情况，似乎写出来的东西很顺利。感兴趣的部分具有以下结构。

```
childNodes NodeList[ulcorner, lrcorner]
- 0 ulcorner    
    accessKey  ""
    accessKeyLabel""
    - attributes    [xcoord="134", ycoord="49"]
    + 0 xcoord="134"
    + 1 ycoord="49" 
```

但是，当我打电话时

```
var ulCorner=upperElement.getElementsByTagName("ulCorner")[0];
top=ulCorner.getAttribute("yCoord");
left=ulCorner.getAttribute("xCoord");
console.log('top=' + top + ', left=' + left); 
```

我明白了

```
top=[object Window], left=134 
```

为什么 top 设置为 [object Window] 而不是 49？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T18:51:18.930

`top`是对象上的现有属性`window`，它是**不可写的** [https://developer.mozilla.org/fr/docs/DOM/window.top](https://developer.mozilla.org/fr/docs/DOM/window.top)

```
var ulCorner=upperElement.getElementsByTagName("ulCorner")[0];
var top=ulCorner.getAttribute("yCoord");
var left=ulCorner.getAttribute("xCoord");
console.log('top=' + top + ', left=' + left); 
```

以上应该可以工作，但是不建议隐藏现有的全局变量，我强烈建议您选择另一个变量名称，除非您的代码不在全局范围内运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:51:26.003

> ```
> top=ulCorner.getAttribute("yCoord"); 
> ```

您在这里创建了一个隐式（并且偶然）的全局变量，即全局对象的一个​​属性。全局对象`window`在浏览器中，并且[`window.top`](https://developer.mozilla.org/en-US/docs/DOM/window.top)是**不可写**的“*对窗口层次结构中最顶层窗口的引用*”。所以你的分配没有效果，它只返回顶部`window`（其字符串化为`"[object Window]"`）。

要解决此问题，只需添加[`var`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)：

```
var ulCorner=upperElement.getElementsByTagName("ulCorner")[0];
var top=ulCorner.getAttribute("yCoord");
var left=ulCorner.getAttribute("xCoord"); 
```

或使用多个 var 语句：

```
var ulCorner=upperElement.getElementsByTagName("ulCorner")[0],
    top=ulCorner.getAttribute("yCoord"),
    left=ulCorner.getAttribute("xCoord"); 
```

# c - 如何用整数进行浮点计算

> ID：15909986
> 
> 赞同：17
> 
> 时间：2013-04-09T18:41:26.453
> 
> 标签：c, floating-point, embedded, fixed-point

我有一个连接到主处理器的协处理器。一些浮点计算需要在协处理器中完成，但不支持硬件浮点指令，仿真速度太慢。

现在一种方法是让主处理器缩放浮点值，以便它们可以表示为整数，将它们发送到协处理器，协处理器执行一些计算，并在返回时缩小这些值。但是，这在大多数情况下都行不通，因为数字最终会变得太大或太小而超出这些整数的范围。所以我的问题是，正确执行此操作的最快方法是什么。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T18:45:03.700

你说仿真太慢了。我猜你的意思是模拟浮点数。如果缩放整数不够用，唯一剩下的选择是定点数学，但它也不是很快，即使它比模拟浮点数快得多。

此外，您永远无法逃避这样一个事实，即使用缩放整数和[定点数学](http://x86asm.net/articles/fixed-point-arithmetic-and-tricks/)，您将获得比使用浮点更小的[动态范围。](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)

但是，如果事先知道您的范围，则可以针对您需要的范围调整定点数学实现。

[这是](http://eetimes.com/discussion/other/4024639/Fixed-point-math-in-C)一篇关于定点的文章。该技巧的要点是决定如何拆分变量，数字的低位和高位有多少位。

[可以在此处找到](http://sourceforge.net/projects/fixedptc/)C 的定点的完整实现。（BSD 许可证。）还有[其他](http://sourceforge.net/projects/fpmlib/?source=recommended).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T10:26:24.390

除了@Amigable Clark Kant 的建议之外，[Anthony Williams 的定点数学库](http://www.justsoftwaresolutions.co.uk/news/optimizing-applications-with-fixed-point-arithmetic.html)还提供了一个 C++`fixed`类，该类几乎可以与`float`or互换使用，`double`并且在 ARM 上，与软件浮点相比，性能提高了 5 倍。它包括标准数学库的完整`fixed`点版本，包括使用 CORDIC 算法的三角函数和日志函数等。

# python - 如何使 for 循环始终在开头打印零，而不将零元素作为第一个元素？

> ID：15909992
> 
> 赞同：-3
> 
> 时间：2013-04-09T18:41:43.823
> 
> 标签：python, list, loops, indexing, zero

我试过了：

```
mylist=[1,2,3]                                                          
for i in mylist:                                            
    time=0                                                         
    time=time+i                                                  
    print(time, end="") 
```

并得到：

```
123 
```

但我想得到：

```
0123 
```

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T18:46:34.660

许多方法之一是不遍历您的列表，而是遍历一个开头包含零的新列表，然后是您的列表。像这样：

```
mylist=[1,2,3]                                            
for i in [0] + mylist:
    print(i, end="") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T18:47:30.883

如果输入列表不受您的控制，并且您既不想添加`0`它也不想构建新的串联列表（例如，如果它非常大），您可以使用[itertools.chain()](http://docs.python.org/2/library/itertools.html#itertools.chain)：

```
import itertools

mylist = [1, 2, 3]                                                         
for i in itertools.chain([0], mylist):
    pass  # Your loop code... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:45:35.537

由于您提到如果零不是第一个元素，请使用：

```
mylist = [1,2,3]
print(('0' * (1 if mylist[0] else 0)) + ''.join(str(x) for x in mylist)) 
```

如果 0 不是 mylist 中的第一个元素，这会在开始时为您提供 0 :)

```
>>> mylist = [1,2,3]
>>> print(('0' * (1 if mylist[0] else 0)) + ''.join(str(x) for x in mylist))
0123
>>> mylist = [0,1,2,3]
>>> print(('0' * (1 if mylist[0] else 0)) + ''.join(str(x) for x in mylist))
0123 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T18:49:21.490

好的，查看编辑后的代码：

```
mylist=[1,2,3]                                                          
for i in mylist:                                            
    time=0                                                         
    time=time+i                                                  
    print(time, end="") 
```

显然，每次循环执行`time=0`then都与. 所以，是一样的。因此，让我们在尝试修复它之前对其进行简化：`time=time+i``time=i``print(time, end="")``print(i, end="")`

```
mylist=[1,2,3]
for i in mylist:
    print(i, end="") 
```

现在，我们如何让它`0`在开始时打印 a ？嗯，在循环中没有 0 可以到达任何地方，所以它几乎必须在循环之前：

```
mylist=[1,2,3]
print(0, end="")
for i in mylist:
    print(i, end="") 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-09T19:02:17.083

```
mylist=[1,2,3]                                                          
for i in mylist:                                            
    time=0                                                         
    time=time+i                                                  
    print(time, end="") 
```

将其更改为：

```
mylist = [1, 2, 3]
print('0', end='')
for i in mylist:
    print(str(i), end='') 
```

# c++ - 如何四舍五入到最接近的四位

> ID：15909993
> 
> 赞同：-1
> 
> 时间：2013-04-09T18:41:45.377
> 
> 标签：c++

我正在寻找一种将数字四舍五入到最接近的数字的方法，该数字可以除以 4 而没有余数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:55:18.813

```
num = std::round(num / 4.0) * 4.0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:55:47.700

这是一些伪代码。可能不是最有效的方法，但是...

```
if num mod 4 == 0 then you are good
if num mod 4 == 1 then subtract 1
if num mod 4 == 2 then you decide (subtract/add 2)
if num mod 4 == 3 then add 1 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-09T18:43:24.663

使用以下宏：

```
#define ALIGN4(len) (((len) + 3) & ~3) // round up to 4 items 
```

# android - 更好地使用 webview 或 Phonegap？

> ID：15909997
> 
> 赞同：0
> 
> 时间：2013-04-09T18:42:03.300
> 
> 标签：android, cordova, android-webview

我只是想知道哪个更好，为什么？Quora、Facebook 等应用程序是原生 android 应用程序，但它们仍会加载 Web 内容，但我认为它们不使用`PhoneGap`. 那么他们用`WebView`吗？哪一个可以轻松定制，哪一个更好？因为像 Quora、Flipboard 这样的应用程序运行得更好。`Is there any other way to load web content in Android?`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:51:23.983

**PhoneGap**有它自己的用法，如果你想从你的网页中使用相机、GPS 或加速度计等原生功能，那么你应该使用 PhoneGap，因为它提供了使用 JavaScript 接口来使用这些功能的 API。

虽然**Webview**是基类，但您可以在其上添加任何功能，例如在页面加载开始时启动微调器或在加载停止时显示对话框。

简而言之，如果您的网页不需要访问 android 的任何本机功能，则使用 WebView 并使用它进行自定义`setWebViewClient`，`setWebChromeClient`否则`PhoneGap`为您提供最好的本机功能。