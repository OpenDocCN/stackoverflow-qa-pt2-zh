# StackOverflow 问答 14613000-14613999

# matlab - 使用比 Matlab 脚本更多的内存部署的 Matlab 应用程序

> ID：14613002
> 
> 赞同：8
> 
> 时间：2013-01-30T20:24:24.633
> 
> 标签：matlab, memory, matlab-deployment, matlab-compiler, mcc

我正在测试我们在 Matlab 中开发的一个独立应用程序时，我注意到它的内存使用量，根据 Windows 任务管理器，在 16gb 以上达到了数倍的峰值。我决定`profile -memory on`在编译版本后面的脚本上运行 Matlab 的分析器，以使用完全相同的输入来查看内存峰值发生在哪里。然而，它发现的最高峰内存是 2400860.00 Kb，或者大约是该函数的 1/4，该函数基本上充当程序的`main()`.

因此，我想知道人们是否注意到在运行已编译的 Matlab 程序和在 Matlab 中运行原始脚本之间存在巨大的内存使用差异。我注意到在 Matlab 中运行需要更长的时间，但我认为这是由于分析器跟踪所有内存分配和释放，而不是读取和写入磁盘上的交换空间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-27T16:03:42.933

真正快速地回答这个问题。是的，MATLAB 编译的应用程序比 MATLAB 脚本运行的开销更大。

这是因为 MATLAB 部署的应用程序打开了一个 MATLAB 版本，该版本存储在称为 MCR 的内存中。MCR 的运行开销比 MATLAB 多。

我发现在这种情况下有用的一件事是重新编译并查看是否有帮助。如果没有，您可以尝试通过分段运行计算来降低内存使用量。

这可能有助于更好地使用内存：http: [//www.mathworks.com/help/matlab/matlab_prog/strategies-for-efficient-use-of-memory.html](http://www.mathworks.com/help/matlab/matlab_prog/strategies-for-efficient-use-of-memory.html)

来源：

*   [http://www.mathworks.com/matlabcentral/newsreader/view_thread/306814](http://www.mathworks.com/matlabcentral/newsreader/view_thread/306814)
*   [Matlab可执行文件太慢](https://stackoverflow.com/questions/15967157/matlab-executable-too-slow)

如果您有任何问题，请发表评论。

# phpmyadmin - 没有权限的phpMyAdmin

> ID：14613004
> 
> 赞同：0
> 
> 时间：2013-01-30T20:24:29.517
> 
> 标签：phpmyadmin

安装了 Zend Server CE 并安装了 phpMyAdmin。尝试登录 phpMyAdmin 时，我只能在密码为空的情况下登录。

进入时，我无法创建任何数据库或几乎任何其他内容。有一个带有红色 x 的“无特权”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:25:54.077

编辑配置 (config.inc.php) 并设置具有更多权限的用户。语法非常简单并且有据可查。

另请参阅此链接：[http ://wiki.phpmyadmin.net/pma/config.inc.php](http://wiki.phpmyadmin.net/pma/config.inc.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-15T15:22:46.327

我有类似的问题。

我使用用户名“admin”登录 phpmyadmin，密码留空。

这在登录后向我显示“没有特权”。

所以，我退出并检查了 config.inc.php。我在哪里找到用户名“root”。所以这次我以“root”身份登录。现在它允许我创建数据库。

# servicestack - 我将如何更改 ServiceStack 响应 DTO

> ID：14613005
> 
> 赞同：4
> 
> 时间：2013-01-30T20:24:32.667
> 
> 标签：servicestack

我正在开发一个 API，我希望能够根据来自客户端的参数自定义响应结构。响应过滤器似乎是执行此操作的好地方，以避免在每个服务或操作中这样做。问题是，虽然我可以访问操作返回的响应 DTO，并且可以更改其属性，但我无法找到完全替换对象的方式或位置。

天真地替换响应过滤器中的对象不起作用，但这有助于说明我正在尝试做的事情：

```
public class ChangeResponseAttribute : ResponseFilterAttribute
{
    public override void Execute(IHttpRequest req, IHttpResponse res, object responseDto)
    {
        var overrideText = req.QueryString["override"];
        if (!String.IsNullOrEmpty(overrideText))
            responseDto = new { Message = overrideText };
    }
}

[ChangeResponse]
public class TodosService : Service
{
    public object Get(Todos request)
    {
        return new object[0];
    }
} 
```

看起来另一种选择是直接编写自定义响应并结束请求，但这将绕过 ServiceStack 留下的任何其他处理。

有没有比响应过滤器更好的地方来做到这一点？还是我需要硬着头皮在每个动作中返回最佳 DTO？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:52:45.730

您不能在过滤器中更改响应 DTO，但是是的，一种选择是将响应写入过滤器本身（有关如何执行此操作的示例，[请参见此答案）。](https://stackoverflow.com/a/13851277/85785)

另一种选择是使用[ServiceRunner](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)并覆盖`OnAfterExecute()`自定义钩子，它可以让您修改返回的响应，例如：

```
public class MyServiceRunner<T> : ServiceRunner<T> 
{
    public override object OnAfterExecute(
        IRequestContext requestContext, object response) 
    {
        // Called just after any Action is executed
        var overrideText = req.Get<IHttpRequest>().QueryString["override"];
        return !string.IsNullOrEmpty(overrideText) 
            ? new { Message = overrideText } : null;
    }
} 
```

要让 ServiceStack 使用它，您需要覆盖`CreateServiceRunner`AppHost 中的方法，例如：

```
public override IServiceRunner<TRequest> CreateServiceRunner<TRequest>(
    ActionContext actionContext)
{           
    return new MyServiceRunner<TRequest>(this, actionContext); 
} 
```

# iphone - 在 iBooks 中打开 PDF

> ID：14613007
> 
> 赞同：2
> 
> 时间：2013-01-30T20:24:38.940
> 
> 标签：iphone, objective-c, ibooks

我在我的代码文件中放置了一个 pdf。我希望它在 iBooks 中打开，在研究时我发现了这个：

```
NSString *stringURL = @"itms-books:";
NSURL *url = [NSURL URLWithString:stringURL];
[[UIApplication sharedApplication] openURL:url];

NSString *stringURL = @"itms-bookss:";
NSURL *url = [NSURL URLWithString:stringURL];
[[UIApplication sharedApplication] openURL:url]; 
```

我如何使用这个或其他什么方式可以在 iBook 中打开我的 PDF 文件？问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-15T07:40:07.653

也许为时已晚，但我创建了一个小示例，其中使用了 andycodes 中解释的方法。我上传到 Github，你可以在这里下载：

[https://github.com/cjimenezpacho/openpdfibooks](https://github.com/cjimenezpacho/openpdfibooks)

**基本上是 IBAction 中的这段代码和所需的委托方法：**

```
NSURL *url = [[NSBundle mainBundle]
URLForResource: @"iPhoneintro" withExtension:@"pdf"];
self.docController = [UIDocumentInteractionController interactionControllerWithURL:url];
self.docController.delegate = self;
[self.docController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES]; 
```

**苹果文档链接：**

类： [https ://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T15:14:42.277

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"itms-bookss://%@",self.pathToFile]]]; 
```

这确实打开了一个本地 pdf 到 Ibooks 需要 2 s。

编辑：具体来说，如果本地 PDF 已经在设备本地的 iBooks 中，它将打开本地 PDF。

如果您需要将它添加到 iBooks，据我所知，您需要使用 UIDocumentInteractionController。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T20:36:07.773

看看这篇 Tumblr 帖子，它解释了如何使用`UIDocumentInteractionController`s 实现类似的结果。

[http://andycodes.tumblr.com/post/738375724/ios4-sdk-opening-pdfs-in-ibooks](http://andycodes.tumblr.com/post/738375724/ios4-sdk-opening-pdfs-in-ibooks)

# facebook-graph-api - 视频的 Graph API 帖子不可播放

> ID：14613008
> 
> 赞同：4
> 
> 时间：2013-01-30T20:24:39.077
> 
> 标签：facebook-graph-api, video

我有一个将 YouTube 上的音乐视频发布到 Facebook 用户墙上的应用程序。Facebook 上的帖子将使该嵌入视频可以从 Facebook 播放。最近它停止发生。

经过一些测试，似乎当一个人使用源是 YouTube 视频发布图形 API 时，链接也需要`youtube.com`在域中才能在 Facebook 上下文中播放。

重复：

您可以登录 Facebook 并前往此处查看：

[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

`read_stream`然后获取具有权限的访问令牌`publish_stream`（扩展权限选项卡）。

使用以下字段切换`GET`到`POST`并将端点设置为 /me/feed：

```
message = message
description = description
name = name
caption = caption
link = http://www.youtube.com/watch?v=r1dfEf1qOt4
source = http://www.youtube.com/e/r1dfEf1qOt4
picture = http://img.youtube.com/vi/r1dfEf1qOt4/0.jpg 
```

它应该出现在您的 Facebook 墙上并且可以播放。

现在再做一次，但将链接更改为[http://www.google.com](http://www.google.com)。它不再可播放。

谁能确认这是否是预期的行为？我在 Facebook 文档中找不到任何内容。也许我只是错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:12:10.883

## 通用解决方法

[我概括了](https://stackoverflow.com/a/11651634/1085891)这个类似问题的答案：[通过 facebook api 在 facebook 提要中发布 swf](https://stackoverflow.com/questions/11649932/posting-a-swf-in-facebook-feed-through-facebook-api)。我创建了一个带有两个参数并生成必要`meta`标签的页面。Facebook 接受链接，用户被正确重定向，并且您不需要为每个发布的视频单独的页面。

1.  `url`- 最终网址
2.  `id`- youtube 或嵌入视频的 id

我成功地制作了许多嵌入帖子，其中链接与视频无关。

### 示例帖子

```
message = Post message
description = Post description if needed.
name = Post name
caption = Post caption
link = http://vbcopper.com/jsuar/so/fbembedvideo.php?url=stackoverflow.com&id=QGAJokcwBXI
source = http://www.youtube.com/e/QGAJokcwBXI
picture = http://img.youtube.com/vi/QGAJokcwBXI/0.jpg 
```

### PHP

```
<?php
 $id =  $_GET["id"];
 $url =  $_GET["url"];

 if ( isset($url) ) {
echo <<< EOT
<html>
<head>
    <title>$url</title>
    <meta property="og:title" content="Page Title" />
    <meta property="og:type" content="website"/>
    <meta property="og:description" content="Content for Description" />
    <meta property="og:image" content="http://i2.ytimg.com/vi/$id/mqdefault.jpg" />
    <meta property="og:site_name" content="Content for caption"/>
    <meta property="og:video" content="http://www.youtube.com/v/$id?version=3&autohide=1">
    <meta property="og:video:type" content="application/x-shockwave-flash">
    <meta property="og:video:width" content="640">
    <meta property="og:video:height" content="360">
    <META http-equiv="refresh" content="1;URL=http://$url">

</head>
<body>
</body>
</html>
EOT;
} else {
    echo "Nothing here...";
}
?> 
```

## 发现

我能够成功复制您的问题。~~我找不到解决办法。~~

这已作为错误提交给 Facebook，但被视为低优先级。

> 错误：将视频发布到带有链接属性的提要不会嵌入源 [https://developers.facebook.com/bugs/502967809730190?browse=search_5074a2e48fd360934230075](https://developers.facebook.com/bugs/502967809730190?browse=search_5074a2e48fd360934230075)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T05:30:59.240

通常要将 YouTube 视频分享到 Facebook 页面，您只需要消息、链接、来源、图片参数。即使您愿意，也可以跳过源、图片参数。也就是说，如果您使用 FacebookC#SDK 将视频分享到 Facebook，您所需要的只是以下代码

```
 var fb = new Facebook.FacebookClient(yourPageAccessToken); 
 argList["message"] = message;
 argList["link"] = "http://www.youtube.com/watch?v=" + specialOffer.YoutubeId;
 argList["source"] = "http://www.youtube.com/v/" + specialOffer.YoutubeId;
 argList["picture"] = "http://img.youtube.com/vi/" + specialOffer.YoutubeId + "/0.jpg";
 fb.Post("feed", argList); 
```

或者

```
 var fb = new Facebook.FacebookClient(yourPageAccessToken); 
 argList["message"] = message;
 argList["link"] = "http://www.youtube.com/watch?v=" + specialOffer.YoutubeId;
 fb.Post("feed", argList); 
```

# css - 调整框大小时图像模糊：应用了边框框

> ID：14613009
> 
> 赞同：0
> 
> 时间：2013-01-30T20:24:45.470
> 
> 标签：css

谁能告诉我为什么顶部的图像模糊？

[http://blog.distance.mun.ca/technologyresources/why-blurry/](http://blog.distance.mun.ca/technologyresources/why-blurry/)

第一个设置了宽度和高度，第二个已删除。这是唯一的区别。我怀疑 box-sizing 属性正在以某种方式抛弃它。但我不知道为什么！

欢迎咨询！

谢谢

ps：边框盒的一个很好的破败：http: [//paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:35:24.427

它很模糊，因为您将图像的大小设置为不是其原始大小，并且浏览器必须重新采样图像中的像素以适合。

如果您查看您提供的页面，顶部图像的尺寸为 416x150，而底部图像的尺寸为 418x151。

如果您将高度和宽度设置为等于图像的实际尺寸，则不应该有这个问题。

# java - 我应该能够在 Eclipse 图形布局中看到 android 滚动条吗？

> ID：14613012
> 
> 赞同：0
> 
> 时间：2013-01-30T20:24:57.677
> 
> 标签：java, android

我在我的程序的 XML 中放入了一个滚动视图，图形布局显示了屏幕中的所有字段，而不是在这一侧有一个滚动条并且只显示一些字段（就像我在视频）。我想知道这是否正常，或者我的代码或 IDE 有什么问题。我在 Windows 7 中使用 Eclipse。谢谢 :)

我的代码几乎与这个相同（唯一改变的是文本：和 ID）。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="match_parent"
android:weightSum="100" android:layout_height="match_parent">
<ScrollView android:layout_weight="30" android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout android:orientation="vertical"
        android:layout_width="match_parent" android:layout_height="match_parent">
        <TextView android:text="Email address(es):"
            android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>
        <EditText android:layout_height="wrap_content"
            android:layout_width="match_parent" android:id="@+id/etEmails">
        </EditText>
        <TextView android:text="Hateful Intro:"
            android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>
        <EditText android:layout_height="wrap_content"
            android:layout_width="match_parent" android:id="@+id/etIntro"></EditText>
        <TextView android:text="Person's name" android:layout_width="wrap_content"
            android:layout_height="wrap_content"></TextView>
        <EditText android:layout_height="wrap_content"
            android:layout_width="match_parent" android:id="@+id/etName"></EditText>
        <TextView android:text="Stupid Things that this Person does"
            android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>
        <EditText android:layout_height="wrap_content"
            android:layout_width="match_parent" android:id="@+id/etThings"></EditText>
        <TextView android:text="What you want to do to this person:"
            android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>
        <EditText android:layout_height="wrap_content"
            android:layout_width="match_parent" android:id="@+id/etAction"></EditText>
        <TextView android:text="Hateful Outro" android:layout_width="wrap_content"
            android:layout_height="wrap_content"></TextView>
        <EditText android:layout_height="wrap_content"
            android:layout_width="match_parent" android:id="@+id/etOutro"></EditText>
    </LinearLayout>
</ScrollView>
<LinearLayout android:orientation="vertical"
    android:layout_width="match_parent" android:layout_weight="40"
    android:layout_height="fill_parent">
    <Button android:text="Send Email" android:id="@+id/bSentEmail"
        android:layout_width="match_parent" android:layout_height="match_parent"></Button>
</LinearLayout>
<LinearLayout android:orientation="vertical"
    android:layout_width="match_parent" android:layout_weight="30"
    android:layout_height="match_parent">
    <AnalogClock android:id="@+id/analogClock1"
        android:layout_width="match_parent" android:layout_height="fill_parent"></AnalogClock>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:27:51.730

这是正常的行为（至少在我以前见过的所有 Eclipse IDE 上和我的上）。

# sql - will_paginate gem 在 nil 搜索时抛出异常

> ID：14613014
> 
> 赞同：0
> 
> 时间：2013-01-30T20:25:00.073
> 
> 标签：sql, ruby-on-rails-3, lazy-loading, will-paginate, rails-activerecord

`will_paginate`如果结果恰好为零，则在尝试处理搜索结果时，我会看到 gem 中的异常。

这是代码：

```
@posts = Post.search(query).paginate(:page => params[:page], :per_page => 8) 
```

所以很容易添加一个 if 语句来确保 paginate 永远不会被 nil 调用：

```
if !Post.search(query).nil?
    @posts = Post.search(query).paginate(:page => params[:page], :per_page => 8)
end 
```

但是，想象一下我的 Post.search(query) 返回了 500,000 个帖子。

Will_paginate 足够聪明，可以以`LIMIT`一种惰性的方式将 a 附加到 SQL 查询中，这样数据库就不必咳出所有 500,000 个（在这种情况下，每次每页只有 8 个）。

我担心的是它`Post.search(query).nil?`没有应用这个 LIMIT，所以它可能会返回所有 500,000 个帖子，只是为了确定查询是否为零！这似乎很疯狂。

除了对查询全部 500,000 个结果的担忧之外，我在这里这样做的另一个缺点是它涉及两个单独的`Post.search`请求。

有没有更优雅的方法来确保我可以避免这些`paginate was called on nill`错误，而不会超过我需要的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:38:22.497

您可以尝试使用该方法`.try`而不是`if !Post.search(query).nil?`

您的代码应如下所示：

```
@posts = Post.search(query).try(:paginate, {:page => params[:page], :per_page => 8}) 
```

PS。`if Post.search(query)`也足够了。

# emacs - Orgmode Beamer Presentation -- 设置组织表属性（尤其是单元格边框）

> ID：14613021
> 
> 赞同：1
> 
> 时间：2013-01-30T20:25:20.747
> 
> 标签：emacs, latex, org-mode

我正在用 orgmode 编写一个演示文稿，以便通过 LaTeX 导出为 pdf。默认情况下，orgmode 表没有可见的单元格边框。我可以找到有关如何打开这些以导出到 HTML 的信息，但我没有看到任何关于在导出到 LaTeX 时如何设置单元格边框的文档（通过 Cc Ce {p|d}）。

# javascript - 我希望在脚本中添加进一步的操作来更改类的 css

> ID：14613026
> 
> 赞同：-2
> 
> 时间：2013-01-30T20:25:38.853
> 
> 标签：javascript

我希望在脚本中添加进一步的操作来更改类的 css

`document.write( 'DIV STYLE='display;none;); />' ) }` 是我最初的想法，但它似乎不起作用，所以使用

```
 if (location.href.indexOf( "/smispage""/tpfpage""/client_images_new""/client_images_list" ) > -1) {
document.write( '<base target="_blank" />' );
     } 
```

并添加到它

```
 if (location.href.indexOf( "/smispage""/tpfpage""/client_images_new""/client_images_list" ) > -1) {
document.write( '<base target="_blank" />' ); document.write( 'DIV STYLE='display;none;); />' ) 
    } 
```

身体是

```
 <div class="headerlogo"> Serious Photography </div>
     <div> Serious Photography 2 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:50:38.353

这是一个很难理解的问题，但如果你想检查你所在的页面，你可以使用

```
window.location.href 
```

然后，匹配字符串的条件检查可以决定是否要添加新样式。我会将班级更改为ID。

那么你可以做

```
document.getElementById('headerlogo').style.display = 'none'; 
```

就个人而言，我会使用 SIZZLE 或 jQuery 来简化选择器。

```
$('.headerlogo').css('display', 'none'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:56:13.573

请避免使用`document.write`. 这是一个解释原因的[链接。](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice)您的论点`indexOf`也包含无效的语法。HTML base 也与应用样式无关，并且`'DIV STYLE='display;none;); />'`是不正确的 HTML/CSS 语法，并且对将样式应用到您的`headerlogo`类也没有任何影响。

这对于向可能尚不存在的类和 id 添加样式标签很有用。

```
if (location.href.indexOf(
       "/smispage/tpfpage/client_images_new/client_images_list") > -1
) {
    var style = document.createElement('style');
    style.type = 'text/css';
    style.appendChild(document.createTextNode('.headerlogo{display:none;}'));
    document.getElementsByTagName('head')[0].appendChild(style);
} 
```

# c++ - 此代码中是否存在内存泄漏？

> ID：14613028
> 
> 赞同：-2
> 
> 时间：2013-01-30T20:25:41.247
> 
> 标签：c++, memory-leaks

这是我在 C++ 中的代码：

```
bool** p = new bool *[row];
for(int i=0; i<row; ++i) field[i] = new bool[column];
i=0;
while(i<100){
    p = newArray();
    i++;
} 
```

此代码中是否存在内存泄漏？我应该添加“删除p;” 在while循环中？

* * *

如果我更改代码：

```
p = new bool *[row];
for(int i=0; i<row; ++i) field[i] = new bool[column];
i=0;
while(i<100){
    delete p;
    p = newArray();
    i++;
} 
```

是否还有内存泄漏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:29:30.973

就在这里。如果您不使用智能指针，或者没有`delete/delete[]`for each `new/new[]`，那么您就是在泄漏。如果您失去了分配资源的句柄，那么您就是在泄漏（就像您在代码中所做的那样）。您的原始记忆丢失了，因为您不再有指向它的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:27:58.187

是的，只要程序中没有指针可以记住动态分配的内存地址，就会发生内存泄漏。（当然，您也不会在任何地方删除内存。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:43:26.440

```
while(i<100){
    p = newArray();
    i++;
} 
```

指针 p 每次都会被覆盖，所以这是典型的内存泄漏。

```
p = new bool *[row];
for(int i=0; i<row; ++i) field[i] = new bool[column];
i=0;
while(i<100){
   delete p;
   p = newArray();
   i++;
} 
```

如果 p 指向 previous`new bool *[row]`并`newArray`调用 new [] 来分配内存但你调用`delete p`，这是未定义的行为。你应该打电话`delete [] p;`。

如果`newArray`调用new分配内存，while循环释放99个内存块，while循环结束后，还需要调用`delete p;`

记住new/delete，new[]/delete[]在程序中必须成对调用，否则内存泄漏；指针被覆盖会导致内存泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T20:28:04.483

是的，您正在泄漏使用`new bool[x][y]`.

可能会进一步泄漏。特别是，`p = newArray()`没有匹配的释放看起来很可疑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T20:29:13.523

你肯定是在泄漏内存。（我明白你所说的程序流程的意思，所以我冒昧地纠正了它）..

```
field = new bool *[row];  // <- array created and assigned to "field".
for(int i=0; i<row; ++i) field[i] = new bool[column];
i=0;
while(i<100){
    field = newArray();  // <- the previously-created array is leaked here, as well as
    i++;                 // any new arrays created by previous iterations of "newArray()"
} 
```

假设`newArray()`返回一个新的分配，那么`delete[] field`在较低的循环中将`field`正确释放，但每一行中的数组`field`仍然会被泄漏。

# php - 我需要一个带有 html 的 php 文件中的 !DOCTYPE 声明吗？

> ID：14613030
> 
> 赞同：39
> 
> 时间：2013-01-30T20:25:45.957
> 
> 标签：php, html, doctype

我有一个 php 文件，其中包含我的网站内容。该文件需要是 .php，因为我先获取一些变量，然后稍后在网站内容中使用它。像这个例子：

```
<?php
$user_name = $_REQUEST['username'];
?>

<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>Page Title</title>
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
Welcome <?php echo $username;?>
</body>
</html> 
```

我需要`<!DOCTYPE HTML>`, 因为文件扩展名是 php 吗？此外，它是否正确放置？它应该出现在标签之前还是文件的第一行？

我还注意到，如果我删除`<!DOCTYPE HTML>`，我的一些 css 代码将停止工作......

非常感谢你。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-30T20:28:43.940

是的，您需要 DOCTYPE，因为您的浏览器只能看到上述代码的以下部分

```
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>Page Title</title>
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
Welcome THE USER NAME
</body>
</html> 
```

我通常像这样将关闭的 PHP 标记和 DOCTYPE 放在一起`?><!DOCTYPE HTML>`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-13T09:05:48.940

很抱歉复活死者，但似乎没有人解释*为什么*您需要 HTML 中的文档类型（是的，输出 HTML 的 PHP 脚本最后是一个 HTML 文件）。

*声明一个 doctype 会影​​响浏览器解释*你的 HTML 的方式（这可能是你的 css 代码在没有 doctype 的情况下可能会停止工作的原因）。基本上有两种方式：怪癖模式和严格模式。后者坚持标准，因此您应该始终告诉浏览器您的代码遵循哪个 HTML 标准（现在您可能想要 HTML5 具有最简单的 doctype: `<!DOCTYPE html>`）。

[有关更详细的说明，](https://hsivonen.fi/doctype/)请参见此处。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-30T20:32:08.173

正如其他人所说，`!DOCTYPE`在输出 HTML 的 php 脚本中是必需的。如果您正在创建图像或执行 bash 文件或其他内容，情况会有所不同。

至于它属于哪里，最好把它放在开头，这样您就不会意外地在它之前输出一些东西，但是如果您使用会话变量或发送标头，您将需要确保在做这些事情之前声明一个文档类型。请记住，在通过 php 发送标头或启动会话之前，不能有浏览器输出（甚至是空格）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-30T20:27:43.603

是的，您应该有`DOCTYPE`声明，因为您发送给浏览器的是 HTML，而不是 PHP。

该声明告诉浏览器您正在使用 HTML 5 并告诉它如何呈现它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-30T20:28:27.613

无论 html 是如何构建的，你都应该在你的 html 中放置一个 Doctype。

[w3 文档类型列表](http://www.w3.org/QA/2002/04/valid-dtd-list.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-30T20:28:52.263

HTML 的相同规则同样适用，无论它们是纯 HTML 文件，还是嵌入 PHP 的 HTML 文件。在任何需要纯 HTML 格式的文档类型中，您都需要一个文档类型。

顺便说一句，在 PHP 代码的第一个块的末尾和 doctype 之间有空格。我似乎记得 doctype 之前的空格可能有问题（尽管这可能仅适用于 XHTML）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-30T20:27:39.580

您的最终输出是使用 doctype 的 HTML。所以，是的，你需要一个。如果它破坏了你的 CSS，那么你的 HTML 和/或 CSS 是错误的，需要修复。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-30T20:27:55.083

当它们包含嵌入式 HTML 时，最好将`.php`文件视为常规 HTML 文件，服务器已被指示扫描动态 (PHP) 代码。

`!DOCTYPE`要使文档具有语义，仍然需要有效的声明。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-01-30T20:29:15.940

PHP 真的与 HTML 无关——它只是服务器端代码吐出一堆浏览器解释的文本。

文档类型是浏览器如何解释随后的 HTML 的关键部分。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-12-16T12:15:05.740

```
<!DOCTYPE HTML>
<table  style="position:absolute; bottom:20%; right:40%;" width="150"> 
```

如果你放入`<!DOCTYPE HTML>`php 文件，一些样式将无法正常工作，一些对齐问题。

# c - C 和 Linux 中的单实例应用程序

> ID：14613034
> 
> 赞同：10
> 
> 时间：2013-01-30T20:25:54.593
> 
> 标签：c, linux

我想确保用户不能运行多个我的应用程序实例。我的伪代码如下所示：

```
sem_t one_instance_only=sem_open(UNIQUE_NAME,O_CREAT | O_EXCL,...);
if(SEM_FAILED==one_instance_only)
{
    if(E_EXIST==errno)
    {
    // application already running
    exit(1);
    }
}
sem_close(...);
//without the call to sem_unlink() the semaphore still lingering even if app not 
// running
sem_unlink(...); 
```

我试过了，它可以工作，但我只是想确保我做对了，并且在某个地方没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:15:19.177

您实际上并没有使用任何信号量功能。您可以对常规文件产生相同的效果，使用 O_CREAT|O_EXCL 打开并在退出时取消链接。
您可以使用相同的文件在其中写入您的 PID（“pidfile”），然后如果打开失败读取 PID 并使用它来检查它是否属于您的程序的另一个实例，或者它就在那里，因为它没有取消链接到期到崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:53:07.870

问题是逻辑无法提供应用程序实例将执行的铁定保证。如果现有应用程序已经决定退出，并且正在执行退出路径，但还没有调用`sem_close`呢？新实例认为“我没有必要”，因为信号量仍然存在，然后退出。最终结果是什么都没有运行。

这是否是一个问题取决于情况。如果它是一个交互式应用程序，你可以摆脱这种事情。PC 用户习惯于在东西没有启动时多次单击图标。

解决问题的一种方法是使用一些 IPC 机制。例如，服务器的新实例可以联系现有实例并发出“请保持运行，如果可能”的请求。如果无法联系到服务器，或者对请求的响应是否定的，则它可以作为新实例接管。

如果需要将请求传递给现有实例，您也需要此功能。假设程序有命令行参数并且必须采取一些行动。或者，这是一个熟悉的例子：想象一个浏览器：用户希望操作系统打开一个 URL，并且要使用现有的浏览器实例。如果不启动新浏览器，则必须将该 URL 作为请求传递给现有实例。仅仅观察存在一个现有实例并退出是不够的，因为启动请求是一个出于某种原因而产生的事件：某人或某事希望程序做某事。您拥有的逻辑仅适用于读取配置然后侦听请求并且其启动不是任何事情的触发器的守护程序类型进程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-25T01:33:57.560

我刚刚写了一个，并测试了。

```
#define PID_FILE "/tmp/pidfile"
static void create_pidfile(void) {
    int fd = open(PID_FILE, O_RDWR | O_CREAT | O_EXCL, 0);

    close(fd);
}

int main(void) {
    int fd = open(PID_FILE, O_RDONLY);
    if (fd > 0) {
        close(fd);
        return 0;
    }

    // make sure only one instance is running
    create_pidfile();
} 
```

# c# - IObservable .Cast<>() 和协方差

> ID：14613040
> 
> 赞同：3
> 
> 时间：2013-01-30T20:26:13.720
> 
> 标签：c#, system.reactive, covariance

我有两种不同的事件类型实现相同的接口：

```
interface InputEvent { }

struct KeyboardEvent : InputEvent { }
struct MouseEvent : InputEvent { } 
```

我有两个流，每种事件类型之一：

```
IObservable<KeyboardEvent> KeyboardStream;
IObservable<MouseEvent> MouseStream; 
```

我想介绍`IObservable<InputEvent>`两者的合并流。一开始我希望编译器会自动检测基类：

```
IObservable<InputEvent> Merged = Observable.Merge(KeyboardStream, MouseStream); 
```

那里没有运气，所以我尝试明确：

```
IObservable<InputEvent> Merged = Observable.Merge<InputEvent>(KeyboardStream, MouseStream); 
```

不，编译器仍然没有得到提示。所以我明确地投射每个：

```
IObservable<InputEvent> Merged = Observable.Merge<InputEvent>((IObservable<InputEvent>)KeyboardStream, (IObservable<InputEvent>)MouseStream); 
```

呸。而且它仍然在运行时失败并出现强制转换失败。我想这与协方差有关（我在第一次尝试时仍然没有*完全*理解......）所以我会做我会用 IEnumerable 做的事情，使用`.Cast<T>()`：

```
IObservable<InputEvent> Merged = Observable.Merge<InputEvent>(KeyboardStream.Cast<InputEvent>(), MouseStream.Cast<InputEvent>()); 
```

现在编译器告诉我，`.Cast<T>()`它只定义为`IObservable<Object>`......**什么？**这似乎是一种非常不方便和不必要的限制。

最后我尝试了一个简单的选择：

```
IObservable<InputEvent> Merged = Observable.Merge(KeyboardStream.Select(i => (InputEvent)i), MouseStream.Select(i => (InputEvent)i)); 
```

终于成功了！它可以工作，我可以从中创建自己的简单扩展方法。但是，内置`.Cast<T>()`和`.OfType<T>()`运算符在我的嘴里留下了非常糟糕的味道。所以我的问题是：**为什么我不能在任何 observable 上使用内置`.Cast<T>()`扩展，除了`Object`**它几乎是多余的？这是协方差问题吗？Rx 规范中的疏忽？一个深思熟虑的设计决定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:55:18.827

作为一个警告，即使这似乎已经解决，IObservable / IObserver 并不是在所有平台上都是协变的——具体来说，WP7 和 Silverlight 决定从接口声明中去除协变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:41:37.537

这里的问题是我的事件类型是`struct`s，因此不会自动装箱为 Object。改变类型就可以`class`了。

# java - 图形化数据流组合框架

> ID：14613045
> 
> 赞同：11
> 
> 时间：2013-01-30T20:26:31.833
> 
> 标签：java, workflow, dsl, modeling, dataflow

我有兴趣在我的应用程序中嵌入类似[MathWorks Simulink](http://www.mathworks.fr/products/simulink/)的类型工具。在这个嵌入式工具单元中，使用我的块定义文件以工具想要的任何方式编写的块定义文件，将其表示为块及其输入和输出端口以及每个块的参数。我希望框架是通用的并从某个地方读取块定义，然后允许用户根据它们的定义组成给定块的数据流（最好带有图形编辑器）。然后，我希望该工具导出用户组成的块数据流，我可以在其中以 Java（或其他语言）实用地读取它，并使用它做任何我需要做的事情，比如构建给定数据流的可执行版本。

我提前知道，导出的块组合可以足够智能，可以执行，但我可以导出块组合/拓扑以及相互连接的输入和输出。换句话说，我不是在寻找一种数据流编程语言。我正在寻找允许图形组合数据流的工具集，然后将组合导出为 json 或我可以在编程语言中加载并用它做任何事情的东西。

上面的框架/工具是 Simulink 对来自其不同库的块所做的，但我需要将这样的东西嵌入到我自己的工具中，并且想知道哪个开源项目接近我想要做的。我想我想要的是一个数据流组合框架。请纠正我对此的看法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T10:57:30.183

[数据流语言是（彩色） Petri 网](http://en.wikipedia.org/wiki/Petri_net)的特例。彩色[Petri 网](http://daimi.au.dk/CPnets/proxy.php?url=/CPnets/intro/verybrief)由位置图组成，每个位置都包含带有值的彩色标记（颜色是“数据类型”的一个有趣名称，值只是颜色/数据类型实例）。来自多个地方的令牌通过转换组合以在以下地方生成令牌；“过渡”可以组合“颜色”（例如，计算值）。所以，一个人可能有一个用于浮点值的标记“颜色”，以及由加、减、乘、除组成的转换；你可以很容易地用它来建模算术数据流（例如，Simulink）。

更重要的是，CPN 非常通用。它们由分层 CPN 填充，产生数据流子程序的效果，并允许各种扩展（例如时间约束等）。

[彩色 Petri 网工具](http://cpntools.org/)网站提供了一套完整的工具，用于构建/编辑/显示甚至评估任意彩色 Petri 网。（您甚至可能不需要编写 Java 程序来评估它们！）。它甚至提供对此类图形的静态分析，例如“终止”等，这些是您通常无法通过 Matlab 或 National Instruments 风格的数据流语言获得的。

如果有基于 Java 的 CPN 工具版本，我不会感到惊讶。该小组十多年来一直在构建此类工具。如果有一种方法可以相对容易地将颜色和过渡限制到特定的集合，例如您定义的“数据流”语言，我也不会感到惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:44:18.067

我的建议是[Yakindu Statecharts Tool](http://statecharts.org/)。我不确定这是否太复杂。但我认为应该在这里提到它。您可以定义规则并显示错误，当连接不应该的事物时。我认为它看起来也有点像 Simulink 所做的，不是吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T09:25:28.720

您应该先了解一下 J. Paul Morrison 的[DrawFBP](http://www.jpaulmorrison.com/fbp/#DrawFBP)。我无法与它划清界限，但这一定是我的错。

另外，我见过的最好的 UI 是[moonbase.com](http://moonbase.com/)，如果我写过一个（我会的），它会是相似的。不错的预览区，教程模式，很漂亮。我还没有弄清楚，编辑器是否可用或者这个项目的目的是什么。

* * *

最后，我们的 DF 脚本语言（只是看看，我们应该用图形编辑器隐藏什么）：

```
redbutton: Button  // we have a button
redbutton.press >> redlamp.on   // it turns the red lamp on
redbutton.press >> greenlamp.off  // and the green off
redbutton.presst >> redmsg.in  // also reports the action

greenbutton: Button  // opposite
greenbutton.press >> greenlamp.on
greenbutton.press >> redlamp.off
greenbutton.press >> greenmsg.in

redlamp: Lamp
greenlamp: Lamp

redmsg: Text
redmsg.value = "red"
redmsg.out >> console.in

greenmsg: Text
greenmsg.value = "green"
greenmsg.out >> console.in

console: Stdout 
```

如您所见，该语言只有 3 个元素：

*   放置一个组件（名称：类型）
*   设置属性的值（compname.propname = value）
*   定义一条消息（srccomp.srcport >> dest.destport）

当然，图形编辑器应该更好。我们现在只有可视化器。

![生成的 DF 图](../Images/c183dee6f62cbe627b062b5a7a00ec2d.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T09:08:52.403

我也在寻找这样的工具，偶然发现了[JGraph](http://www.jgraph.com/jgraph.html)，这是一个开发人员库，可用于自行构建交互式图形/图表绘图工具。这并不意味着您必须自己完成所有艰苦的工作，因为文件夹*示例中的**com.mxgraph.examples.swing.GraphEditor*已经提供了一个很好的起点。

 *该演示编辑器的屏幕截图

![在此处输入图像描述](../Images/c5fd4225a01d3ed28820e27549a510cd.png)

当导出到所谓的*mx 图形编辑器文件*(*.xme) 时，实际上会得到 xml。对于上面的例子：

```
<mxGraphModel>
    <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="4" parent="1" style="fontSize=24" value="Start"
            vertex="1">
            <mxGeometry as="geometry" height="120.0" width="160.0" x="80.0"
                y="250.0" />
        </mxCell>
        <mxCell id="5" parent="1" style="fontSize=24" value="???"
            vertex="1">
            <mxGeometry as="geometry" height="120.0" width="160.0" x="310.0"
                y="480.0" />
        </mxCell>
        <mxCell edge="1" id="6" parent="1" source="4" style="" target="5"
            value="">
            <mxGeometry as="geometry" relative="1">
                <mxPoint as="sourcePoint" x="290.0" y="310.0" />
                <mxPoint as="targetPoint" x="220.0" y="330.0" />
            </mxGeometry>
        </mxCell>
        <mxCell id="9" parent="1" style="fontSize=24" value="Profit"
            vertex="1">
            <mxGeometry as="geometry" height="120.0" width="160.0" x="570.0"
                y="710.0" />
        </mxCell>
        <mxCell edge="1" id="10" parent="1" source="5" style="" target="9"
            value="">
            <mxGeometry as="geometry" relative="1">
                <mxPoint as="sourcePoint" x="520.0" y="670.0" />
                <mxPoint as="targetPoint" x="490.0" y="840.0" />
            </mxGeometry>
        </mxCell>
    </root>
</mxGraphModel> 
```

使用标准的 XML 库解析文件应该不成问题，所以总而言之，当忽略所有位置信息时，可以得到一个简单的数据流描述。

但是，请对我的建议持保留态度，因为我也在寻找正确的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T09:59:40.447

在我看来，您的用户应该编辑 UML 活动。因此，您可以在[Eclipse Papyrus](http://eclipse.org/papyrus/)和[Eclipse UML2 API](http://www.eclipse.org/modeling/mdt/?project=uml2)的基础上进行构建。您需要为正在编辑的活动附加更具体的语义，并限制用户可以编辑的内容（例如，您可能不希望通过活动分叉和连接节点并行执行）。执行编辑的模型比阅读活动并通过它。如果你输入一个节点，那么你只需要调用你的节点定义。这听起来很容易。

无论如何，我按照@mantrid 的建议来看看[eclipse 建模项目](http://www.eclipse.org/modeling/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T03:52:21.483

我不确定以下内容是否完全符合您的期望，但您可以查看[Eclipse eTrice 项目](http://www.eclipse.org/etrice/)——它有一个图形编辑器和以他们自己的语言表达的导出模型。但是我不知道这个项目在实践中有多成熟，以及目前可以用 Java 中的模型做什么。

您还可以在 Eclipse 上查看其他[建模项目](http://www.eclipse.org/projects/listofprojects.php)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-25T14:18:41.057

你可以试试**Cameleon** : [ [http://www.shinoe.org/cameleon][1]](http://www.shinoe.org/cameleon%5d%5b1%5d)这似乎很容易使用。它是一种用于函数式编程的图形语言，具有数据（工作）流方法。

它是用 C++ 编写的，但可以调用以任何编程语言编写的任何类型的本地或远程程序。

它有一个多尺度的方法，似乎是图灵完备的（这是一个 petri 网扩展）。

纯粹的，

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-25T14:21:51.170

您还应该尝试以图形方式在工作流编程方面具有相当不错背景的 YAWL，您可以看到：

1.  [ [http://www.yawlfoundation.org/][1]](http://www.yawlfoundation.org/][1])

请参阅工作流模式，我认为这是一个非常好的理论基础来处理图形化编程。*

# python - 在 Python Tkinter 中为交易游戏设计 UI

> ID：14613047
> 
> 赞同：0
> 
> 时间：2013-01-30T20:26:43.820
> 
> 标签：python, tkinter

我正在编写一个涉及与其他玩家交易的游戏。我的引擎关闭了，但我的 UI 几乎没有出现。除其他外，我想创建...

*   加号/减号按钮是箭头或圆圈，加号为红色，减号为绿色。我看到了添加位图的选项，但我读到它们只能是单色的。也没有办法将按钮重塑为矩形以外的任何东西。

*   可点击的牌，代表要与之交易的玩家。同样，我找不到任何方法来使用按钮来做到这一点。

到目前为止，我一直在使用画布矩形/椭圆/多边形，将标签绑定到它们，并将回调绑定到标签。想知道是否有更聪明的方法。

我是 UI 设计的新手，我不确定我是否不能用 Tkinter 实际做这些事情并且应该选择另一个图形包，或者我是否只是一个菜鸟。

# sql - 如何在用户特定日期之间进行搜索？

> ID：14613048
> 
> 赞同：2
> 
> 时间：2013-01-30T20:26:43.450
> 
> 标签：sql, date, stored-procedures

我正在研究车辆预订系统，并有两个名为：VehicleBookingStatus 和 VehicleDetails 的表

由于 Vehicle_Id 很常见，它们与主要外来概念相关联。

我的车辆 1（ID）是在 1 月 5 日到 1 月 10 日之间预订的。所以我需要对这两个表进行连接查询，这可以根据可用性给出结果。

例如：车辆不适用于 3 个条件。

1.  日期为 1 月 3 日至 1 月 7 日
2.  日期为 1 月 7 日至 1 月 13 日。
3.  日期为 1 月 3 日至 1 月 15 日。

我已经创建了如下所示的 SP，但它没有给我想要的输出：

```
Select  
VehicleDetails.Vehicle_Id,
VehicleDetails.Vehicle_Name,
VehicleDetails.Vehicle_Capacity
   from VehicleDetails 
   left join VehicleBookingStatus on  
   VehicleDetails.Vehicle_Id = VehicleBookingStatus.Vehicle_ID
where  
   ((@UserDate NOT between VehicleBookingStatus.Assign_Date and VehicleBookingStatus.Return_Date)
AND
   (@UserEndDate not between VehicleBookingStatus.Assign_Date and VehicleBookingStatus.Return_Date))
OR 
   ((@UserDate not between VehicleBookingStatus.Assign_Date and VehicleBookingStatus.Return_Date)
and (@UserEndDate > VehicleBookingStatus.Return_Date)) 
```

@UserDate 和 @UserEndDate 将由用户提供。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:53:16.163

尝试这个;

```
Select  v.Vehicle_Id, v.Vehicle_Name, v.Vehicle_Capacity
from VehicleDetails v left join VehicleBookingStatus b 
     on v.Vehicle_Id = b.Vehicle_ID
where b.Assign_Date is null or NOT (
     b.Return_Date between @UserDate and @UserEndDate OR
     b.Assign_Date between @UserDate and @UserEndDate OR 
     (b.Assign_Date < @UserDate AND b.Return_Date > @UserEndDate) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:06:19.400

我假设您希望查询返回在指定期间可用于预订的车辆的详细信息。

在@UserDate 之前结束或在@UserEndDate 之后开始的预订都没有问题。

因此，车辆不可用的条件是它的预订既在@UserEndDate 之前或之后开始，也在@UserDate 之前或之后结束。

那么查询应该是：

```
SELECT VD.Vehicle_Id,
       VD.Vehicle_Name,
       VD.Vehicle_Capacity
FROM VehicleDetails VD 
LEFT JOIN VehicleBookingStatus VBS
ON  VD.Vehicle_Id = VBS.Vehicle_ID
AND VBS.Assign_Date <= @UserEndDate
AND VBS.Return_Date >= @UserDate
WHERE VBS.Assign_Date IS NULL 
```

如果新预订可以在前一个预订结束的同一天开始，则`=`可以移除标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:17:55.183

编辑：我修改了我的答案以反映 RBarryYoung 的以下建议：

```
select 
  vd.Vehicle_Id
, vd.Vehicle_Name
, vd.Vehicle_Capacity
from VehicleDetails vd
left join VehicleBookingStatus vbs on vd.Vehicle_Id = vbs.Vehicle_ID
where NOT (@UserDate <= vbs.Return_Date AND @UserEndDate >= vbs.Assign_Date) 
```

# javascript - Javascript 中的正则表达式以匹配 Excel 中 SUM 函数的格式

> ID：14613049
> 
> 赞同：1
> 
> 时间：2013-01-30T20:26:45.723
> 
> 标签：javascript, regex, excel, sum, brackets

我在用 Javascript 格式化 Regex 表达式以测试文本框中的值是否与您在 Excel 中看到的格式相匹配时遇到问题。

到目前为止，我有这个：

```
var equation = document.getElementById('functionBox').value;
var patt = new RegExp("=SUM\(.*\)");
if (patt.test(equation))
{
   //Continue operations
} 
```

根据我的理解，这应该等同于只允许“=SUM()”的格式，但是如果你删除一个或两个括号，甚至在返回 false 之前删除 SUM 中的 M，它就会传递为 true。

我在这里是否缺少某些东西，或者我应该在代码中的其他地方查找问题。

另外，我现在知道这不会考虑单元格的格式，而是括号之间的；恐怕我不知道要完成，而且我尝试谷歌搜索的大多数正则表达式要么非常具体，要么只是列出修饰符而不给出任何示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:30:37.247

由于您使用的是字符串，因此您必须对括号进行双重转义：

```
var patt = new RegExp("=SUM\\(.*\\)"); 
```

为了便于阅读（以及更多原因），请使用文字正则表达式：

```
 var patt = /=SUM\(.*\)/; 
```

* * *

**PS**您可以通过使用否定组来优化此正则表达式：

```
var patt = /=SUM\([^\)]*\)/; 
```

# c# - Windows Phone 8 地图控件开始和停止滚动时会触发哪些事件？

> ID：14613051
> 
> 赞同：3
> 
> 时间：2013-01-30T20:26:54.380
> 
> 标签：c#, windows-phone-8, windows-phone, maps, bing-maps

一段时间以来，我一直在尝试弄清楚如何做到这一点，但似乎一无所获。我想在用户开始滚动时停止计时器并在用户停止时启动它。我尝试过使用 Manipulation 事件，但这些事件似乎根本没有触发。有谁知道我需要关注哪些事件，或者是否有更好的方法来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-07T12:48:15.373

事件不会在`Map`拦截它们时被触发（类似的情况将与 Pivot 控件一起使用）。如果您想在用户触摸屏幕并执行 FreeDrag 手势时收到通知，您可以使用[Touch.FrameReported](http://msdn.microsoft.com/en-US/library/windowsphone/develop/system.windows.input.touch.framereported%28v=vs.105%29.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)事件和[TouchPanel](http://msdn.microsoft.com/en-us/library/ff827740.aspx)：

```
public MainPage()
{
    InitializeComponent();
    TouchPanel.EnabledGestures = GestureType.FreeDrag;
    Touch.FrameReported += Touch_FrameReported;
}

private void Touch_FrameReported(object sender, TouchFrameEventArgs e)
{
    if (TouchPanel.IsGestureAvailable) // check only dragging 
    {
        // get point relative to Viewport
        TouchPoint mainTouch = e.GetPrimaryTouchPoint(yourMap);
        // drag started Key - down
        if (mainTouch.Action == TouchAction.Down)
           timer.Stop();

        // check if drag has completed (key up)
        if (mainTouch.Action == TouchAction.Up)
        {
            timer.Start();
            // in both cases you can use some other Properties of TouchPoint
            // do something for example dependant on coordinates 
            // double x = mainTouch.Position.X;
            // double y = mainTouch.Position.Y;
        }
    }
} 
```

另请注意，由于您有相对于地图的坐标，因此您可以检查用户是否在地图区域内触摸了屏幕（相对坐标和地图尺寸）。

# python - Python数据列表问题

> ID：14613062
> 
> 赞同：0
> 
> 时间：2013-01-30T20:27:23.007
> 
> 标签：python, list, error-handling

在 python 中处理自定义列表类，例如

```
class ListData:
        def __init__(self):
                 self.data = []

        def add(self, x):
                 self.data.append(x)

        def delete(self, x):
                 self.data.remove(x) 
```

测试时，总是返回 None ：

```
from list import ListData

listdata = ListData()

mylist = [34, 32, 34, 89]
mylist = listdata.add(2)
mylist = listdata.add(5)

print mylist # Prints None 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:30:40.577

你没有从`add`and`delete`方法返回任何东西，所以将它们的返回值分配给`mylist`你就剩下`None`. 摆脱额外的分配，你的代码就可以工作了。

```
mylist = [34, 32, 34, 89]
listdata.add(2)
listdata.add(5)

print mylist 
```

或者，您可以将方法修改为 return `self`，尽管这样做没有太大价值。

```
def add(self, x):
    self.data.append(x)
    return self

def delete(self, x):
    self.data.remove(x)
    return self 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:36:02.107

您可以更改您的 API 以便能够将其打印为列表。您可以阅读以下内容

[不可变与可变类型](https://stackoverflow.com/questions/8056130/immutable-vs-mutable-types-python)

```
class ListData:
        def __init__(self):
                 self.data = []

        def add(self, x):
                 self.data.append(x)

        def delete(self, x):
                 self.data.remove(x)

        def data(self):
            return self.data

a = ListData()
a.add(1)
a.add(2)
print a.data 
```

将输出：

> > > [1, 2]

# mod-rewrite - 如何在查询参数上使用 mod_rewrite 退出重定向循环？

> ID：14613065
> 
> 赞同：0
> 
> 时间：2013-01-30T20:27:24.763
> 
> 标签：mod-rewrite, url-rewriting, url-redirection

我需要根据查询字符串实现重定向规则。查询字符串将包含四个参数，但它们可以采用可变位置，例如

```
www.a.com/whatever?w=1&x=2&y=3&z=india_en
www.a.com/whatever?x=2&w=1&y=3&z=india_en 
```

这将被重定向到

```
www.a.com/whatever?x=2&w=1&y=3&z=a006 
```

除了这些我需要检查另一个参数`sid`。如果`sid`查询字符串中存在，则不会发生重定向。

我已经按照以下方式编写了重定向规则（当然是第一部分）：

```
RewriteCond %{QUERY_STRING} ^w=(.*)$
RewriteRule ^(.*)$ - [E=MY_W:w=%1] [NC,C]
RewriteCond %{QUERY_STRING} ^x=(.*)$
RewriteRule ^(.*)$ - [E=MY_X:x=%1] [NC,C]
RewriteCond %{QUERY_STRING} ^y=(.*)$
RewriteRule ^(.*)$ - [E=MY_Y:y=%1] [NC]
RewriteCond %{QUERY_STRING} ^z=india_en$
RewriteRule ^(.*)$ - [E=MY_Z:z=a006] [C]
RewriteRule ^(/whatever)$ http://www.a.com$1?%{ENV:MY_W}&%{ENV:MY_X}&%{ENV:MY_Y}&%{ENV:MY_Z} [L,R=permanent] 
```

但是我得到了带有无数＆符号的重定向循环，例如

**输入：** `http://www.a.com/whatever?w=1&x=2&y=3&z=india_en`

**输出：** `http://www.a.com/whatever?w=1&x=2&y=3&z=india_en&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&`

如何摆脱这个循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:04:18.720

```
#don't rewrite if parameters are already in the right order
RewriteCond %{QUERY_STRING} ^w=(.*)x=(.*)y=(.*)z=(.*)$
RewriteRule .* - [L]

RewriteCond %{QUERY_STRING} ^w=(.*)$
RewriteRule ^(.*)$ - [E=MY_W:w=%1] [NC,C]
RewriteCond %{QUERY_STRING} ^x=(.*)$
RewriteRule ^(.*)$ - [E=MY_X:x=%1] [NC,C]
RewriteCond %{QUERY_STRING} ^y=(.*)$
RewriteRule ^(.*)$ - [E=MY_Y:y=%1] [NC]
RewriteCond %{QUERY_STRING} ^z=india_en$
RewriteRule ^(.*)$ - [E=MY_Z:z=a006] [C]
RewriteRule ^(/whatever)$ http://www.a.com$1?%{ENV:MY_W}&%{ENV:MY_X}&%{ENV:MY_Y}&%{ENV:MY_Z} [L,R=permanent] 
```

# mono - 使用嵌入式 glib 编译 Mono 项目

> ID：14613070
> 
> 赞同：2
> 
> 时间：2013-01-30T20:27:39.370
> 
> 标签：mono

我有一个 .NET 应用程序，我想在运行 Debian Linux (Power PC) 的嵌入式处理器上运行。

嵌入式处理器上的这个受限版本的 linux 没有安装 GLIB。所以我想使用嵌入式 GLIB (EGLIBC) 编译单声道。

> ```
> $ cd mono-2.8.2 
> $ ./configure CFLAGS=-O2 --prefix=/usr/local --with-glib=embedded --enable-nls=no
> 
> Engine: 
>    GC:       sgen and bundled Boehm GC with typed GC and parallel mark 
>    GLIB:       embedded <----- Embedded Setting taken correctly 
> 
> $ make 
> $ make install 
> ```

现在，Mono 在我的 Power PC 计算机（安装了 GLIB）上运行良好。然后我将单声道可执行文件（~8Megs）通过 FTP 传输到我的嵌入式设备，当我尝试执行单声道时出现以下错误：

> ```
> dce> ./mono 
> ./mono: /lib/libpthread.so.0: version `GLIBC_2.3.3' not found (required by ./mono)
> ./mono: /lib/libpthread.so.0: version `GLIBC_2.6' not found (required by ./mono)
> ./mono: /lib/libpthread.so.0: version `GLIBC_2.3.4' not found (required by ./mono)
> ./mono: /lib/libc.so.6: version `GLIBC_2.4' not found (required by ./mono) 
> ```

我不明白为什么当我使用“--with-glib=embedded”编译时，mono 会问我有关 GLIBC 库的问题。此外，在“make install”之后，我在安装的文件夹中找不到任何 eglib 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:50:46.377

嵌入式 glib 与嵌入式 glibc 不同。它们是完全不同的库。

Mono 的“eglib”（嵌入式 glib）是最低级 GNOME 库之一的子集的重新实现，它简化了 C 中的跨平台编程，并包含许多便利函数和数据类型（如哈希表等）。

您可以在此处阅读有关 glib API 的更多信息：http: [//developer.gnome.org/glib/2.34/](http://developer.gnome.org/glib/2.34/)

eglibc 是 glibc 的嵌入式版本，glibc 是 Linux 系统上的标准 C 库。

# css - 侧面带有垂直标题的 CSS 内容

> ID：14613074
> 
> 赞同：0
> 
> 时间：2013-01-30T20:27:46.693
> 
> 标签：css, css-float

我将可变高度的 CSS 框设置为在更大的 div 内向左浮动。现在我想添加一个标题，其中文本在框的左侧垂直显示（旋转 90 度），如下面的链接所示（抱歉还不能发布图片）。

[http://imageshack.us/photo/my-images/259/cssquestion.png](http://imageshack.us/photo/my-images/259/cssquestion.png)

我已经尝试了一切，但到目前为止没有运气。我假设我需要在“包装器”div 中创建两个 div（“标题”和“内容”），但是我在标题 div 上使用的任何位置设置似乎完全错误。

这在 CSS 中是否可能，还是我必须使用一些 JS 来动态对齐“标题”和“内容”的高度？

谢谢，尼古拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:37:04.933

穿上`transform:rotate(180deg);`你的`title`div，将它浮动到左边，它应该可以完成工作。

[http://www.w3schools.com/cssref/css3_pr_transform.asp](http://www.w3schools.com/cssref/css3_pr_transform.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:53:46.470

[http://jsfiddle.net/3r2Sk/1/](http://jsfiddle.net/3r2Sk/1/)

您需要的主要代码是

```
-webkit-transform: scale(1) rotate(270deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
-moz-transform: scale(1) rotate(270deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
-ms-transform: scale(1) rotate(270deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
-o-transform: scale(1) rotate(270deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
transform: scale(1) rotate(270deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg); 
```

遇到各种定位问题，旋转元素可能很挑剔。大多数位置、宽度和高度都必须适应您的特定情况。最好从头开始，只复制转换代码。使用上面的链接作为参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:11:24.250

您遇到的问题是与垂直定位元素有关的常见问题，只是问题有点复杂，因为您使用`transform: rotate`的是 270 度。当您旋转一个元素时，浏览器首先会像未旋转一样绘制它，然后显示旋转后的版本，因此如果您不小心，有时会出现重叠的属性。

一种解决方案是将元素的内容和背景的绘制分开。

我通常以这种方式处理垂直对齐：将外部元素设置为`display: table`，将内部元素设置为`display: table-cell`，这样您就可以设置`vertical-align: middle`为内部元素中的文本。

这是一个例子：http: [//jsfiddle.net/MsBKQ/9/](http://jsfiddle.net/MsBKQ/9/)

似乎在所有浏览器上都能正确显示：[http ://caniuse.com/#search=display%3A%20table](http://caniuse.com/#search=display%3A%20table)

# java - Java NullPointerException 即使对象存在

> ID：14613076
> 
> 赞同：1
> 
> 时间：2013-01-30T20:27:49.967
> 
> 标签：java, string, nullpointerexception, bufferedreader

我`NullPointerException`在一条线上调用一个方法并将其传递给一个字符串。我只能假设字符串为空。

`BufferedReader`它是在几行之前从 readline 初始化的。以下是相关代码：

```
FileInputStream tmp = null;
try {
    tmp = new FileInputStream(file);
} catch (FileNotFoundException e) {
    System.err.println("File not found!");
    e.printStackTrace();
    System.exit(1);
}
DataInputStream dis = new DataInputStream(tmp);
BufferedReader br = new BufferedReader(new InputStreamReader(dis));

create();

try {
    data = br.readLine();
} catch (IOException e) {
    System.err.println("First readline failed: " + e);
    System.exit(1);
}
while (!data.equals(null)) {
    process(data);
    ... 
```

和错误：

```
Exception in thread "main" java.lang.NullPointerException
       at enc.read(enc.java:40)
       at enc.main(enc.java:15) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T20:30:14.157

您的空值检查本身会触发`NullPointerException`. 而不是`!data.equals(null)`写`data != null`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T20:30:30.983

在不知道行号的情况下，我怀疑以下是罪魁祸首：

```
!data.equals(null) 
```

如果`data`是`null`，则 a`NullPointerException`将被抛出。

将其替换为：

```
data != null 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T20:31:45.397

如果我不得不猜测，我认为错误在于：

```
while (!data.equals(null)) {
   process(data); 
```

尝试将其更改为：

```
while (data != null) {
    process(data);
} 
```

您不能从空对象调用方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T20:32:30.340

`while (!data.equals(null))`没有意义。如果`data`是`null`你不能调用`equals(..)`它。

代替

```
while (!data.equals(null)) 
```

经过

```
while (data!=null) 
```

# javascript - 替换 javascript 中的 unicode 匹配项

> ID：14613080
> 
> 赞同：3
> 
> 时间：2013-01-30T20:27:55.267
> 
> 标签：javascript, regex, unicode, utf-8, replace

我想替换在搜索中找到的匹配单词/字符，例如，如果我搜索`a`并得到结果`ádám`，我想突出显示`á`'s. 就像是：

```
"ádám".replace(/(a)/gi, '*') // -> should return "*d*m" 
```

但这当然行不通。我正在尝试[XRegExp](https://github.com/slevithan/xregexp)但我就是想不通。

你会如何为所有语言做这件事？是否可以？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T00:07:58.510

改编自[Semplice](http://semplicewebsites.com/removing-accents-javascript)，点击[此处](https://stackoverflow.com/questions/990904/javascript-remove-accents-in-strings)链接。

`[^\x00-\x80]`匹配任何不在 ASCII 范围内的字符。
请注意，某些字符可能无法从复制和粘贴中正确编码。

```
var latin_map = {"Á":"A","Ă":"A","Ắ":"A","Ặ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ǎ":"A","Â":"A","Ấ":"A","Ậ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ä":"A","Ǟ":"A","Ȧ":"A","Ǡ":"A","Ạ":"A","Ȁ":"A","À":"A","Ả":"A","Ȃ":"A","Ā":"A","Ą":"A","Å":"A","Ǻ":"A","Ḁ":"A","Ⱥ":"A","Ã":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ḃ":"B","Ḅ":"B","Ɓ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ć":"C","Č":"C","Ç":"C","Ḉ":"C","Ĉ":"C","Ċ":"C","Ƈ":"C","Ȼ":"C","Ď":"D","Ḑ":"D","Ḓ":"D","Ḋ":"D","Ḍ":"D","Ɗ":"D","Ḏ":"D","ǲ":"D","ǅ":"D","Đ":"D","Ƌ":"D","Ǳ":"DZ","Ǆ":"DZ","É":"E","Ĕ":"E","Ě":"E","Ȩ":"E","Ḝ":"E","Ê":"E","Ế":"E","Ệ":"E","Ề":"E","Ể":"E","Ễ":"E","Ḙ":"E","Ë":"E","Ė":"E","Ẹ":"E","Ȅ":"E","È":"E","Ẻ":"E","Ȇ":"E","Ē":"E","Ḗ":"E","Ḕ":"E","Ę":"E","Ɇ":"E","Ẽ":"E","Ḛ":"E","Ꝫ":"ET","Ḟ":"F","Ƒ":"F","Ǵ":"G","Ğ":"G","Ǧ":"G","Ģ":"G","Ĝ":"G","Ġ":"G","Ɠ":"G","Ḡ":"G","Ǥ":"G","Ḫ":"H","Ȟ":"H","Ḩ":"H","Ĥ":"H","Ⱨ":"H","Ḧ":"H","Ḣ":"H","Ḥ":"H","Ħ":"H","Í":"I","Ĭ":"I","Ǐ":"I","Î":"I","Ï":"I","Ḯ":"I","İ":"I","Ị":"I","Ȉ":"I","Ì":"I","Ỉ":"I","Ȋ":"I","Ī":"I","Į":"I","Ɨ":"I","Ĩ":"I","Ḭ":"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS","Ĵ":"J","Ɉ":"J","Ḱ":"K","Ǩ":"K","Ķ":"K","Ⱪ":"K","Ꝃ":"K","Ḳ":"K","Ƙ":"K","Ḵ":"K","Ꝁ":"K","Ꝅ":"K","Ĺ":"L","Ƚ":"L","Ľ":"L","Ļ":"L","Ḽ":"L","Ḷ":"L","Ḹ":"L","Ⱡ":"L","Ꝉ":"L","Ḻ":"L","Ŀ":"L","Ɫ":"L","ǈ":"L","Ł":"L","Ǉ":"LJ","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ń":"N","Ň":"N","Ņ":"N","Ṋ":"N","Ṅ":"N","Ṇ":"N","Ǹ":"N","Ɲ":"N","Ṉ":"N","Ƞ":"N","ǋ":"N","Ñ":"N","Ǌ":"NJ","Ó":"O","Ŏ":"O","Ǒ":"O","Ô":"O","Ố":"O","Ộ":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ö":"O","Ȫ":"O","Ȯ":"O","Ȱ":"O","Ọ":"O","Ő":"O","Ȍ":"O","Ò":"O","Ỏ":"O","Ơ":"O","Ớ":"O","Ợ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ȏ":"O","Ꝋ":"O","Ꝍ":"O","Ō":"O","Ṓ":"O","Ṑ":"O","Ɵ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Õ":"O","Ṍ":"O","Ṏ":"O","Ȭ":"O","Ƣ":"OI","Ꝏ":"OO","Ɛ":"E","Ɔ":"O","Ȣ":"OU","Ṕ":"P","Ṗ":"P","Ꝓ":"P","Ƥ":"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q","Ŕ":"R","Ř":"R","Ŗ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ȑ":"R","Ȓ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C","Ǝ":"E","Ś":"S","Ṥ":"S","Š":"S","Ṧ":"S","Ş":"S","Ŝ":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṩ":"S","Ť":"T","Ţ":"T","Ṱ":"T","Ț":"T","Ⱦ":"T","Ṫ":"T","Ṭ":"T","Ƭ":"T","Ṯ":"T","Ʈ":"T","Ŧ":"T","Ɐ":"A","Ꞁ":"L","Ɯ":"M","Ʌ":"V","Ꜩ":"TZ","Ú":"U","Ŭ":"U","Ǔ":"U","Û":"U","Ṷ":"U","Ü":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ǖ":"U","Ṳ":"U","Ụ":"U","Ű":"U","Ȕ":"U","Ù":"U","Ủ":"U","Ư":"U","Ứ":"U","Ự":"U","Ừ":"U","Ử":"U","Ữ":"U","Ȗ":"U","Ū":"U","Ṻ":"U","Ų":"U","Ů":"U","Ũ":"U","Ṹ":"U","Ṵ":"U","Ꝟ":"V","Ṿ":"V","Ʋ":"V","Ṽ":"V","Ꝡ":"VY","Ẃ":"W","Ŵ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẁ":"W","Ⱳ":"W","Ẍ":"X","Ẋ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ẏ":"Y","Ỵ":"Y","Ỳ":"Y","Ƴ":"Y","Ỷ":"Y","Ỿ":"Y","Ȳ":"Y","Ɏ":"Y","Ỹ":"Y","Ź":"Z","Ž":"Z","Ẑ":"Z","Ⱬ":"Z","Ż":"Z","Ẓ":"Z","Ȥ":"Z","Ẕ":"Z","Ƶ":"Z","Ĳ":"IJ","Œ":"OE","ᴀ":"A","ᴁ":"AE","ʙ":"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F","ɢ":"G","ʛ":"G","ʜ":"H","ɪ":"I","ʁ":"R","ᴊ":"J","ᴋ":"K","ʟ":"L","ᴌ":"L","ᴍ":"M","ɴ":"N","ᴏ":"O","ɶ":"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P","ʀ":"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W","ʏ":"Y","ᴢ":"Z","á":"a","ă":"a","ắ":"a","ặ":"a","ằ":"a","ẳ":"a","ẵ":"a","ǎ":"a","â":"a","ấ":"a","ậ":"a","ầ":"a","ẩ":"a","ẫ":"a","ä":"a","ǟ":"a","ȧ":"a","ǡ":"a","ạ":"a","ȁ":"a","à":"a","ả":"a","ȃ":"a","ā":"a","ą":"a","ᶏ":"a","ẚ":"a","å":"a","ǻ":"a","ḁ":"a","ⱥ":"a","ã":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ḃ":"b","ḅ":"b","ɓ":"b","ḇ":"b","ᵬ":"b","ᶀ":"b","ƀ":"b","ƃ":"b","ɵ":"o","ć":"c","č":"c","ç":"c","ḉ":"c","ĉ":"c","ɕ":"c","ċ":"c","ƈ":"c","ȼ":"c","ď":"d","ḑ":"d","ḓ":"d","ȡ":"d","ḋ":"d","ḍ":"d","ɗ":"d","ᶑ":"d","ḏ":"d","ᵭ":"d","ᶁ":"d","đ":"d","ɖ":"d","ƌ":"d","ı":"i","ȷ":"j","ɟ":"j","ʄ":"j","ǳ":"dz","ǆ":"dz","é":"e","ĕ":"e","ě":"e","ȩ":"e","ḝ":"e","ê":"e","ế":"e","ệ":"e","ề":"e","ể":"e","ễ":"e","ḙ":"e","ë":"e","ė":"e","ẹ":"e","ȅ":"e","è":"e","ẻ":"e","ȇ":"e","ē":"e","ḗ":"e","ḕ":"e","ⱸ":"e","ę":"e","ᶒ":"e","ɇ":"e","ẽ":"e","ḛ":"e","ꝫ":"et","ḟ":"f","ƒ":"f","ᵮ":"f","ᶂ":"f","ǵ":"g","ğ":"g","ǧ":"g","ģ":"g","ĝ":"g","ġ":"g","ɠ":"g","ḡ":"g","ᶃ":"g","ǥ":"g","ḫ":"h","ȟ":"h","ḩ":"h","ĥ":"h","ⱨ":"h","ḧ":"h","ḣ":"h","ḥ":"h","ɦ":"h","ẖ":"h","ħ":"h","ƕ":"hv","í":"i","ĭ":"i","ǐ":"i","î":"i","ï":"i","ḯ":"i","ị":"i","ȉ":"i","ì":"i","ỉ":"i","ȋ":"i","ī":"i","į":"i","ᶖ":"i","ɨ":"i","ĩ":"i","ḭ":"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is","ǰ":"j","ĵ":"j","ʝ":"j","ɉ":"j","ḱ":"k","ǩ":"k","ķ":"k","ⱪ":"k","ꝃ":"k","ḳ":"k","ƙ":"k","ḵ":"k","ᶄ":"k","ꝁ":"k","ꝅ":"k","ĺ":"l","ƚ":"l","ɬ":"l","ľ":"l","ļ":"l","ḽ":"l","ȴ":"l","ḷ":"l","ḹ":"l","ⱡ":"l","ꝉ":"l","ḻ":"l","ŀ":"l","ɫ":"l","ᶅ":"l","ɭ":"l","ł":"l","ǉ":"lj","ſ":"s","ẜ":"s","ẛ":"s","ẝ":"s","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ᵯ":"m","ᶆ":"m","ń":"n","ň":"n","ņ":"n","ṋ":"n","ȵ":"n","ṅ":"n","ṇ":"n","ǹ":"n","ɲ":"n","ṉ":"n","ƞ":"n","ᵰ":"n","ᶇ":"n","ɳ":"n","ñ":"n","ǌ":"nj","ó":"o","ŏ":"o","ǒ":"o","ô":"o","ố":"o","ộ":"o","ồ":"o","ổ":"o","ỗ":"o","ö":"o","ȫ":"o","ȯ":"o","ȱ":"o","ọ":"o","ő":"o","ȍ":"o","ò":"o","ỏ":"o","ơ":"o","ớ":"o","ợ":"o","ờ":"o","ở":"o","ỡ":"o","ȏ":"o","ꝋ":"o","ꝍ":"o","ⱺ":"o","ō":"o","ṓ":"o","ṑ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","õ":"o","ṍ":"o","ṏ":"o","ȭ":"o","ƣ":"oi","ꝏ":"oo","ɛ":"e","ᶓ":"e","ɔ":"o","ᶗ":"o","ȣ":"ou","ṕ":"p","ṗ":"p","ꝓ":"p","ƥ":"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q","ʠ":"q","ɋ":"q","ꝗ":"q","ŕ":"r","ř":"r","ŗ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ȑ":"r","ɾ":"r","ᵳ":"r","ȓ":"r","ṟ":"r","ɼ":"r","ᵲ":"r","ᶉ":"r","ɍ":"r","ɽ":"r","ↄ":"c","ꜿ":"c","ɘ":"e","ɿ":"r","ś":"s","ṥ":"s","š":"s","ṧ":"s","ş":"s","ŝ":"s","ș":"s","ṡ":"s","ṣ":"s","ṩ":"s","ʂ":"s","ᵴ":"s","ᶊ":"s","ȿ":"s","ɡ":"g","ᴑ":"o","ᴓ":"o","ᴝ":"u","ť":"t","ţ":"t","ṱ":"t","ț":"t","ȶ":"t","ẗ":"t","ⱦ":"t","ṫ":"t","ṭ":"t","ƭ":"t","ṯ":"t","ᵵ":"t","ƫ":"t","ʈ":"t","ŧ":"t","ᵺ":"th","ɐ":"a","ᴂ":"ae","ǝ":"e","ᵷ":"g","ɥ":"h","ʮ":"h","ʯ":"h","ᴉ":"i","ʞ":"k","ꞁ":"l","ɯ":"m","ɰ":"m","ᴔ":"oe","ɹ":"r","ɻ":"r","ɺ":"r","ⱹ":"r","ʇ":"t","ʌ":"v","ʍ":"w","ʎ":"y","ꜩ":"tz","ú":"u","ŭ":"u","ǔ":"u","û":"u","ṷ":"u","ü":"u","ǘ":"u","ǚ":"u","ǜ":"u","ǖ":"u","ṳ":"u","ụ":"u","ű":"u","ȕ":"u","ù":"u","ủ":"u","ư":"u","ứ":"u","ự":"u","ừ":"u","ử":"u","ữ":"u","ȗ":"u","ū":"u","ṻ":"u","ų":"u","ᶙ":"u","ů":"u","ũ":"u","ṹ":"u","ṵ":"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v","ṿ":"v","ʋ":"v","ᶌ":"v","ⱱ":"v","ṽ":"v","ꝡ":"vy","ẃ":"w","ŵ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẁ":"w","ⱳ":"w","ẘ":"w","ẍ":"x","ẋ":"x","ᶍ":"x","ý":"y","ŷ":"y","ÿ":"y","ẏ":"y","ỵ":"y","ỳ":"y","ƴ":"y","ỷ":"y","ỿ":"y","ȳ":"y","ẙ":"y","ɏ":"y","ỹ":"y","ź":"z","ž":"z","ẑ":"z","ʑ":"z","ⱬ":"z","ż":"z","ẓ":"z","ȥ":"z","ẕ":"z","ᵶ":"z","ᶎ":"z","ʐ":"z","ƶ":"z","ɀ":"z","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ĳ":"ij","œ":"oe","ﬆ":"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x"};

function embolden( str, chr ){
    return str.replace( /[^\x00-\x80]/g,
        function (a) { 
            return chr == latin_map[a] ? '<b>' + a + '</b>' : a;
        } 
    );
}

embolden( 'ádám', 'a' );    // "<b>á</b>d<b>á</b>m" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T20:44:22.103

我试过这段代码，看看它是否是你要找的：

```
'ádám'.replace(/./g,function(char){
    switch(char.toLowerCase()){
        case 'á':
        case 'à':
        case 'â':
        case 'ã':
            return '*';
        break;
    }
    return char;
}); 
```

## 编辑：

要替换**所有**不属于 ASCII 表的字符，只需检查 char 是否具有高达 的字符代码`127`，因为 ASCII 表字符代码定义在`0`和之间`127`（注意`á`不属于 Unicode 表，但扩展的 ASCII 表`0`，来自`255`):

```
'ádám'.replace(/./g,function(char){
    return char.charCodeAt(0)<=127 ? char : '<b>' + char + '</b>';
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T09:41:59.530

一种更强大的方法是为此使用[unicode 规范化](http://unicode.org/reports/tr15/)：

```
var regex = /[a-z][\u0300-\u036F]+/ig;

UNorm.nfd("ádám").replace( regex, "*" ); //*d*m 
```

或实际突出显示：

```
UNorm.nfd("ádám").replace( regex, function(m){
    return "*" + UNorm.nfc(m) + "*";
});
//"*á*d*á*m" 
```

对于 javascript 库：[https ://github.com/walling/unorm](https://github.com/walling/unorm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T20:38:07.790

如果您只是想替换非 az 字母，您可以这样做

`"ádám".replace(/[^a-zA-Z]/g, '*')`

这个问题也可能是[在 JavaScript 中删除字符串中的重音符号/变音符号](https://stackoverflow.com/questions/990904/javascript-remove-accents-in-strings)（投票现在关闭）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-19T13:50:10.477

您可以使用 /([^" "]|\w)/g 正则表达式不替换空格

# c - 从 LLVM 位码编译对象时无法链接到静态库。

> ID：14613091
> 
> 赞同：5
> 
> 时间：2013-01-30T20:28:25.237
> 
> 标签：c, llvm, clang

我正在开发 LLVM 编译器通行证。我通过以下方式运行通行证：

1.  编译为 LLVM 位码

    ```
    clang  foo.c -emit-llvm -c -o foo.bc 
    ```

2.  通过 opt 运行 foo.bc （没有这一步仍然会出现错误）

3.  编译回目标文件

    ```
    clang  -c -o foo.o foo.bc 
    ```

4.  现在 foo.o 可能是静态库的一部分。

    ```
    ar rc libfoo.a foo.o 
    ```

5.  **当我的所有 c 文件都以这种方式编译时，我无法链接到 libfoo.a。**

    ```
    clang libfoo.a linkme.o -o linkme

    linkme.o:linkme.bc:function main: error: undefined reference to 'foo'
    clang: error: linker command failed with exit code 1 (use -v to see invocation) 
    ```

源文件：

富.c：

```
int foo(int a)
{
    return a;
} 
```

foo.h

```
int foo(int a); 
```

链接我.c

```
#include "foo.h"

int main(int argc, char *argv[])
{
   foo(6);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T15:49:28.620

现在我觉得很傻。它与 .bc 文件无关，只是参数的顺序。

作品：

```
clang  linkme.o  libfoo.a -o linkme 
```

失败：

```
clang  libfoo.a linkme.o -o linkme 
```

# paypal - PayPal SetExpressCheckoutReq > 无法连接到远程服务器

> ID：14613093
> 
> 赞同：1
> 
> 时间：2013-01-30T20:28:31.667
> 
> 标签：paypal, express-checkout

我被困住了，需要有人指出我正确的方向。

在 localhost 上运行良好，但是当我推送到我们数据中心的站点的测试版本（使用沙盒设置）时失败。我正在为 c# 使用 SDK 版本 2.1.96。有任何想法吗？

谢谢

端点是：[https ://api-3t.sandbox.paypal.com/2.0/](https://api-3t.sandbox.paypal.com/2.0/)

当我尝试在数据中心服务器上进行测试时，我得到：

```
System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: 
A connection attempt failed because the connected party did not properly respond after a period of time, 
or established connection failed because connected host has failed to respond 173.0.82.83:443
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, 
IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception)
   --- End of inner exception stack trace ---
   at System.Net.HttpWebRequest.GetRequestStream(TransportContext& context)
   at System.Net.HttpWebRequest.GetRequestStream()
   at PayPal.APIService.MakeRequestUsing(IAPICallPreHandler apiCallHandler)
   at PayPal.BasePayPalService.Call(IAPICallPreHandler apiCallHandler)
   at PayPal.PayPalAPIInterfaceService.PayPalAPIInterfaceServiceService.SetExpressCheckout(SetExpressCheckoutReq setExpressCheckoutReq, String apiUserName)
   at PayPalSetCheckoutModel.SetExpressCheckoutPP() in PayPal\PayPalCheckoutModel.cs:line 301 
```

相关的相关代码是（直接来自 SDK 中的示例）： // 调用 API

```
SetExpressCheckoutReq wrapper = new SetExpressCheckoutReq();
wrapper.SetExpressCheckoutRequest = checkoutRequest;
PayPalAPIInterfaceServiceService service = new PayPalAPIInterfaceServiceService();
SetExpressCheckoutResponseType setECResponse = service.SetExpressCheckout(wrapper); 
```

要发送的请求（来自我的本地主机）如下所示：

```
<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:ns=\"urn:ebay:api:PayPalAPI\" xmlns:ebl=\"urn:ebay:apis:eBLBaseComponents\" xmlns:cc=\"urn:ebay:apis:CoreComponentTypes\" xmlns:ed=\"urn:ebay:apis:EnhancedDataTypes\">
  <soapenv:Header>
    <ns:RequesterCredentials>
     <ebl:Credentials>
       <ebl:Username>sandboxseller_1358951631_biz_api1.domain.com</ebl:Username>
       <ebl:Password>0000000000</ebl:Password>
       <ebl:Signature>xxxx</ebl:Signature>
     </ebl:Credentials>
   </ns:RequesterCredentials>
 </soapenv:Header>
 <soapenv:Body>
   <ns:SetExpressCheckoutReq>
     <ns:SetExpressCheckoutRequest>
       <ebl:Version>94.0</ebl:Version>
        <ebl:SetExpressCheckoutRequestDetails>
          <ebl:ReturnURL>https://localhost/Checkout/PayPalComplete</ebl:ReturnURL>
          <ebl:CancelURL>https://localhost/Checkout/PayPalCancel</ebl:CancelURL>
          <ebl:ReqConfirmShipping>0</ebl:ReqConfirmShipping>
          <ebl:NoShipping>1</ebl:NoShipping>
          <ebl:AddressOverride>0</ebl:AddressOverride>
      <ebl:cpp-header-image>https://www.cloudfront.net/logo.jpg</ebl:cpp-header-image>
      <ebl:SolutionType>Sole</ebl:SolutionType>
      <ebl:BuyerEmail>mrbill@test.com</ebl:BuyerEmail>
      <ebl:AllowNote>0</ebl:AllowNote>
      <ebl:BrandName>Domain.com</ebl:BrandName>
      <ebl:PaymentDetails>
        <ebl:OrderTotal currencyID=\"USD\">27</ebl:OrderTotal>
        <ebl:ItemTotal currencyID=\"USD\">27</ebl:ItemTotal>
        <ebl:Custom>42289</ebl:Custom>
        <ebl:InvoiceID>100029</ebl:InvoiceID>
        <ebl:PaymentDetailsItem>
          <ebl:Name>Item Name</ebl:Name>
          <ebl:Amount currencyID=\"USD\">27</ebl:Amount>
          <ebl:ItemCategory>Digital</ebl:ItemCategory>
        </ebl:PaymentDetailsItem>
        <ebl:PaymentAction>Sale</ebl:PaymentAction>
      </ebl:PaymentDetails>
    </ebl:SetExpressCheckoutRequestDetails>
  </ns:SetExpressCheckoutRequest>
</ns:SetExpressCheckoutReq> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:33:59.647

看起来这可能是防火墙问题。

我会检查您是否可以在数据中心机器的浏览器中查看[https://api-3t.sandbox.paypal.com/2.0/](https://api-3t.sandbox.paypal.com/2.0/)并获得与从笔记本电脑相同的输出。接下来要检查的是端口 443 是否可用作数据中心机器的路由。

# ios - 即使使用委托=自我，uiwebview也不会加载请求

> ID：14613098
> 
> 赞同：4
> 
> 时间：2013-01-30T20:28:53.137
> 
> 标签：ios, objective-c, xcode, uiwebview, uiwebviewdelegate

我创建了一个 NSObject 类并包含在内，在初始化中我创建了一个 uiwebview 将委托设置为 self 并发送加载请求。

由于某种原因，webViewDidFinishLoad 或 didFailLoadWithError 永远不会被解雇。我想不通为什么。

```
//
//  RXBTest.h
#import <Foundation/Foundation.h>
@interface RXBTest : NSObject <UIWebViewDelegate>
@end 
```

* * *

```
//  RXBTest.m
//  pageTest
#import "RXBTest.h"
@implementation RXBTest
- (id) init
{
     if((self=[super init])){
         UIWebView* webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 320)];
         [webView setDelegate:self];

         [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com/"]]];
     }
     return self;
}   
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error{
     NSLog(@"ERROR LOADING WEBPAGE: %@", error);
}
- (void) webViewDidFinishLoad:(UIWebView*)webView
{
     NSLog(@"finished");
}
@end 
```

有人有什么想法吗？

谢谢鲁迪

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:42:36.563

如果您使用的是 ARC，那么问题在于您的`webView`变量是该`init`方法的本地变量，因此在 Web 视图完成加载之前就被释放了。尝试将 Web 视图添加为实例变量：

```
@interface RXBTest : NSObject <UIWebViewDelegate>
{
    UIWebView* webView;
}
@end

@implementation RXBTest
- (id) init
{
    if((self=[super init])){
        webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 320)];
        [webView setDelegate:self];

        [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com/"]]];
    }
    return self;
}
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error{
    NSLog(@"ERROR LOADING WEBPAGE: %@", error);
}
- (void) webViewDidFinishLoad:(UIWebView*)webView
{
    NSLog(@"finished");
}
@end 
```

如果你不使用 ARC，你需要记住`webView`在 dealloc 方法中释放你的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:40:44.413

你忘了在你的头文件（.h）中添加这个：

```
#import <UIKit/UIWebView.h> 
```

# python - 如何对 python 命令的输出进行排序？

> ID：14613099
> 
> 赞同：3
> 
> 时间：2013-01-30T20:28:57.487
> 
> 标签：python, sorting, sorted

Python初学者在这里。假设我的脚本末尾有一些东西可以从系统查询信息并将其转储为这种格式：

```
print my_list_of_food(blah) 
```

它输出一个列表，如：

```
('Apples', 4, 4792320)
('Oranges', 2, 2777088)
('Pickles', 3, 4485120)
('Pumpkins', 1, 5074944)
('more stuff', 4545, 345345) 
```

然后我如何根据第二个字段对该输出进行排序，使其看起来像这样：

```
('Pumpkins', 1, 5074944)
('Oranges', 2, 2777088)
('Pickles', 3, 4485120)
('Apples', 4, 4792320) 
```

除了导入 bash 命令之外，`cut -d "," -f 2 | head 4`我宁愿使用 python。我知道我可以使用 sorted 或 sort 对现有的元组或字典进行排序，但我不确定如何对打印的输出进行排序。我做了一些研究，一切都指向在我的脚本中实现排序而不是对打印输出进行排序，但谁知道呢，也许有人有解决方案。谢谢。

更新：

谢谢大家。我试图使所有解决方案都起作用，但我不断收到此错误：

```
File "test.py", line 18, in <lambda>
    print sorted(my_list_of_food(blah), key=lambda x: x[1])
TypeError: 'int' object is unsubscriptable

File "test.py", line 18, in <lambda>
    print(sorted(my_list_of_food(blah), key=lambda k: k[1]))
TypeError: 'int' object is unsubscriptable 
```

我试图在脚本的开头包含这个：

```
from __future__ import print_function 
```

但没有运气。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T20:36:43.110

您可以使用 key 参数进行排序。在你的情况下，

```
print(sorted(list_of_food, key=lambda k:k[1])) 
```

会成功的。键函数通常应该返回一个整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:32:07.673

输出到后不能排序`stdout`。好吧，您不应该这样做，因为它使一项简单的任务变得非常复杂。相反，您对**值**进行排序并打印结果：

```
print sorted(my_list_of_food(blah), key=lambda x: x[1]) 
```

您遇到困难的部分是按第二个字段排序；这就是为什么该`key`参数存在的原因 - 覆盖默认排序（这将是元组的第一项）。要了解有关关键功能的更多信息，请查看[python Sorting HOW TO 上的此部分](http://docs.python.org/2/howto/sorting.html#key-functions)

如果您仍然想知道，从技术上讲，如果您替换为缓冲输出的包装器对象，然后定期*对其*进行排序和打印（到真正的标准输出），则可以对输出进行排序，但恕我直言，这是没有意义的，而且很难做到正确。`stdout``sys.stdout`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T20:32:44.417

如果它以这种方式打印出来，则要么`my_list_of_food(blah)`返回一个字符串，要么返回一个类实例，该实例具有一个`__repr__`返回该字符串的方法……最好的办法是在数据变为字符串之前以实际列表格式获取数据。

如果它返回一个类实例，则获取列表并使用键对其进行排序...否则您需要解析文本，所以我将只解决该部分：

```
# this is assuming the structure is consistent
# function to parse a line of the form "('{text}', {int}, {int})" into tuple members using regex
import re
re_line = re.compile(r"\('(?P<name>\w*)',\s?(?P<int1>\d+)\s?,\s?(?P<int2>\d+)\)")
def ParseLine(line):
    m = re_line.match(line)
    if m:
        return (m.group('name'), int(m.group('int1')), int(m.group('int2')))
    # otherwise return a tuple of None objects
    else:
        return (None, None, None)

# final sorted output (as tuples of (str, int, int) )
sorted( 
    [ParseLine(line) for line in my_list_of_food(blah).splitlines()],
    key = lambda tup: tup[1]
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T21:43:08.063

好的：如果你真的必须这样做：在 StringIO 对象中捕获函数的输出，并对从该对象读回的行进行排序。

```
import sys
try:
    from StringIO import StringIO
except:
    from io import StringIO

a = [ ('Apples', 4, 4792320), 
    ('Oranges', 2, 2777088), 
    ('Pickles', 3, 4485120), 
    ('Pumpkins', 1, 5074944), 
    ('more stuff', 4545, 345345) ] 
```

# [第1步]

```
out = StringIO()    # create a StringIO object
sys.stdout = out    # and redirect stdout to it
for item in a : print (item)        # print output
sys.stdout = sys.__stdout__     # redirect stdout back to normal stdout

out.seek(0)     # rewind StringIO object
s = out.readlines() # and read the lines. 
```

# [步骤2：定义一个键函数以逗号分隔字符串，

# 并以数字方式比较第二个字段。]

```
def sortkey(a):
   return int(a.split(',')[1].strip()) 
```

# [第3步：排序和打印]

```
s.sort(key=sortkey)
for line in s: print (line) 
```

# ios - 使用 RKObjectMapping 将对象映射到 JSON

> ID：14613108
> 
> 赞同：1
> 
> 时间：2013-01-30T20:29:51.583
> 
> 标签：ios, objective-c, object-object-mapping

我对 RKObjectMapping 有点陌生，我在弄清楚这一点时遇到了一些麻烦。

我有一个类，它有一个名为 myObjects 的对象数组。这种类型的对象在其类中已经有一个对象映射。我想映射到以下类型的 JSON 对象：

```
{
  "myObjects": [...]
} 
```

其中 JSON 数组包含由 myObjects 确定的 JSON 对象和我已经给出的对象映射。

我将如何进行对象映射来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:38:54.917

很抱歉我误解了你的问题。如果我要这样做，我会使用[JSONKit](https://github.com/johnezang/JSONKit)。这允许您从 JSON 对象创建`NSDictionarys`和`NSArrays`从它们中序列化 JSON 对象。

如果您在项目中包含 .h/.m（这也自动包含在供应商 > JSONKit 下的 RestKit 中），您可以导入`JSONKit.h`然后调用：

```
[myArray JSONString]; 
```

这将为您返回序列化 JSON 对象的 NSString。您可能还想看看其他一些更彻底的方法。

* * *

原始的，不正确的答案：

我认为这就是你要找的：

```
RKObjectMapping *visualsMapping = [RKObjectMapping mappingForClass:[Visuals class]];
[carMapping mapKeyPath:@"Color" toRelationship:@"color"];
[carMapping mapKeyPath:@"Damage" toRelationship:@"damage"];
...

carMapping = [RKObjectMapping mappingForClass:[Car class]];
[carMapping mapKeyPath:@"Model" toRelationship:@"model"];
[carMapping mapKeyPath:@"Visuals" toRelationship:@"visuals" withMapping:visualsMapping];
...
[carMapping setRootKeyPath:@"myObjects"]; 
```

在这里，您可以针对包含在其他自定义对象中的自定义对象进行制作，也可以直接映射属性，而无需指定与之配套的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:28:51.837

经过很多烦人的摆弄，我想通了：

如果我想在 JSON 对象中嵌套一个命名的 JSON 数组，我必须定义一个从数组到 JSON 数组的对象映射，然后为整个 JSON 对象定义一个映射，其中包含空键路径和使用第一个对象的关系映射。

例如：

```
RKObjectMapping* visualsMapping = [RKObjectMapping serializationMapping]'
[visualsMapping mapKeyPath:@"visuals" toRelationship:@"Visuals" withMapping:[Visual serializaitonMapping];

RKobjectMapping* serializaionMapping = [RkObjectMapping serializationMapping];
[serializaionMapping mapKeyPath:@"" toRelationship:@"" visualsMapping]; 
```

那么我想要的对象映射就是serializationMapping。

# jquery - 原型导致 jQuery $ 选择器出现问题？

> ID：14613109
> 
> 赞同：0
> 
> 时间：2013-01-30T20:29:54.680
> 
> 标签：jquery, selector, prototype, expressionengine

我试图能够通过内联编辑从 ExpressionEngine 通道编辑数据。我遵循了这个提示： [http ://www.3roadsmedia.com/blog/inline-editing-with-expressionengine-and-ajax/](http://www.3roadsmedia.com/blog/inline-editing-with-expressionengine-and-ajax/)

我可以在空白页上工作。但是当 jquery 涉及时。我收到此错误：

```
Uncaught TypeError: Object [object Object] has no method 'attachEvent' 
```

我用谷歌搜索了一下，我相信它与`$`选择器混淆了。因为当我添加这个时：

```
var $ = jQuery.noConflict(); 
```

它开始工作了。但我还有另一个错误，

```
 Uncaught TypeError:Object [object Object] has no method 'dispatchEvent' 
```

哪个可能与选择器错误有关？看起来有一些使用原型和 jquery 的已知问题。

这是另一个使用原型的脚本：

```
Event.observe(window, 'load', init, false);

function init() {
    makeEditable("editTitle");
}

function makeEditable(id) {
    Event.observe(id, 'click', function(){edit($(id))}, false);
    Event.observe(id, 'mouseover', function(){showAsEditable($(id))}, false);
    Event.observe(id, 'mouseout', function(){showAsEditable($(id), true)}, false);
}

function showAsEditable(obj, clear) {
    if (!clear) {
        Element.addClassName(obj, 'editable');
    } else {
        Element.removeClassName(obj, 'editable');
    }
}

function edit(obj) {
    Element.hide(obj);

    var textbox ='<div class="edit-area" id="' + obj.id + '_editor"><textarea name="' + obj.id + '" id="' + obj.id + '_edit">' + obj.innerHTML + '</textarea>';

    var button = '<input type="button" value="SAVE" id="' + obj.id + '_save"/> OR <input type="button" value="CANCEL" id="' + obj.id + '_cancel"/></div>';

    new Insertion.After(obj, textbox+button);

    Event.observe(obj.id+'_save', 'click', function(){saveChanges(obj)}, false);
    Event.observe(obj.id+'_cancel', 'click', function(){cleanUp(obj)}, false);
}

function cleanUp(obj, keepEditable) {
    Element.remove(obj.id+'_editor');
    Element.show(obj);
    if (!keepEditable) showAsEditable(obj, true);
}

function saveChanges(obj) {
    var new_content = escape($F(obj.id+'_edit'));

    obj.innerHTML = "Savingâ€¦";
    cleanUp(obj, true);

    var success = function(t){editComplete(t, obj);}
    var failure = function(t){editFailed(t, obj);}

    var url = 'http://path-to-your-scripts-folder/edit.php';
    var pars = 'id=' + obj.id + '&content=' + new_content;
    var myAjax = new Ajax.Request(url, {method:'post',
    postBody:pars, onSuccess:success, onFailure:failure});
}

function editComplete(t, obj) {
    obj.innerHTML = t.responseText;
    showAsEditable(obj, true);
}

function editFailed(t, obj) {
    obj.innerHTML = 'Sorry, the update failed.';
    cleanUp(obj);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:53:12.817

由于我只将 Prototype 用于特定的 Ajax 任务，因此我将`$`选择器替换为，在和`$p`中使用简单的查找和替换。`prototype.js``editinplace.js`

# perl - 基于公共列合并文件（但包含不同数量的记录）并将零用于不常见的记录

> ID：14613112
> 
> 赞同：0
> 
> 时间：2013-01-30T20:29:55.827
> 
> 标签：perl, bash

我被 Perl 代码的一个非常有趣的部分困住了，我必须基于一个公共列合并多个文件，但是这个公共列包含不同数量的记录，即一些记录可能存在于一个文件中，但不存在于其他文件中等等。

例如：这是我的三个文件：

文件A.txt

```
ID  Value
 1   45
 2   56
 3   23 
```

文件B.txt

```
ID  Value
 2   57
 3   65
 5   32 
```

文件C.txt

```
ID  Value
 1   21
 3   68
 4   42 
```

我的输出应该是一个组合表，如下所示：

```
ID  ValueA  ValueB  ValueC
 1   45       0      21
 2   56       57     0
 3   23       65     68
 4    0       0      42
 5    0       32     0 
```

我尝试使用`paste`，但这只是并排粘贴列表，而不考虑常用列。

我应该怎么做？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:23:25.290

使用散列的散列来记住部分表。主键是ID，内部哈希的键是文件。

```
#!/usr/bin/perl
use warnings;
use strict;
use feature qw(say);

use Data::Dumper;

my %table;
for my $letter (qw(A B C)) {
    open my $IN, '<', "File$letter.txt" or die "Cannot open: $!";
    <$IN>; # Skip the header
    while (<$IN>) {
        my ($id, $value) = split;
        $table{$id}{$letter} = $value;
    }
}

say "ID\tValueA\tValueB\tValueC";
for my $id (keys %table) {
    say $id, join"\t", q(), map $table{$id}{$_} // 0, qw(A B C);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:17:00.627

您可以初始化一个哈希（以 ID 作为键），并读取每个文件。当您阅读 FileA.txt 时，请输入以下内容（$id 和 $value 是您从文件中获取的值）：

```
$my_hash{$id} = {VALUE_A=>$value, VALUE_B=>0, VALUE_C=>0}; 
```

读取 FileB.txt 时，对于每一行：

```
if( exists $my_hash{$id} ) {
  $my_hash{$id}->{VALUE_B=>$value};
}
else {
   $my_hash{$id} = {VALUE_A=>0, VALUE_B=>$value, VALUE_C=>0};
} 
```

FileC.txt 非常相似：

```
if( exists $my_hash{$id} ) {
  $my_hash{$id}->{VALUE_C=>$value};
}
else {
   $my_hash{$id} = {VALUE_A=>0, VALUE_B=>0, VALUE_C=>$value};
} 
```

最后，您的所有数据都在 %my_hash 中

# php - 为什么我的 PHP、XSL 和 XML 不起作用？

> ID：14613113
> 
> 赞同：1
> 
> 时间：2013-01-30T20:30:00.717
> 
> 标签：php, xml, xslt

我已经尝试了很多东西，但我无法在屏幕上加载任何东西。PHP 在屏幕上加载 XML 没有问题，但是当我在 PHP 中添加 XSL 代码时，屏幕是空白的，没有错误或什么都没有。谁能明白为什么？

谢谢

PHP 文件：

```
<?php
$doc = new DOMDocument();
$doc->load( 'books.xml' );

$xsl = new DOMDocument;
$xsl->load( 'books.xsl' );

$books = $doc->getElementsByTagName( "book" );

$proc = new XSLTProcessor;
$proc->importStyleSheet($xsl); // attach the xsl rules

foreach( $books as $book )
{
    $authors = $book->getElementsByTagName( "author" );
    $author = $authors->item(0)->nodeValue;

    $publishers = $book->getElementsByTagName( "publisher" );
    $publisher = $publishers->item(0)->nodeValue;

    $titles = $book->getElementsByTagName( "title" );
    $title = $titles->item(0)->nodeValue;

    echo $proc->transformToXML($doc);

    // echo "$title - $author - $publisher\n";
}    
?> 
```

XML 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<books>
  <book>
    <author>Jack Herrington</author>
    <title>PHP Hacks</title>
    <publisher>O'Reilly</publisher>
  </book>
  <book>
    <author>Jack Herrington</author>
    <title>Podcasting Hacks</title>
    <publisher>O'Reilly</publisher>
  </book>
</books> 
```

XSL 文件：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
    <body>
      <h2>My CD Collection</h2>
        <table border="1">
          <tr bgcolor="#9acd32">
            <th>author</th>
            <th>title</th>
            <th>publisher</th>
          </tr>
          <xsl:for-each select="books/book">
            <tr>
              <td><xsl:value-of select="author"/></td>
              <td><xsl:value-of select="title"/></td>
              <td><xsl:value-of select="publisher"/></td>
            </tr>
          </xsl:for-each>
        </table>
      </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T05:58:09.757

这很简单，你只需要这个：

```
 $xsl = new DOMDocument;
 $xsl->load(  ($xsl_url));
 // Create new XSLTProcessor
 $xslt = new XSLTProcessor();
 // Load xsl stylesheet
 $xslt->importStylesheet($xsl);
 // Load XML input file
 $xml = new DOMDocument;
 $xml->load(  ($xml_url));
 // Transform to string
 $results = $xslt->transformToXML($xml);
 //response
 print $results; 
```

# django - django-avatar：无效的块标签：'render_avatar'，预期的'endblock'

> ID：14613117
> 
> 赞同：0
> 
> 时间：2013-01-30T20:30:08.313
> 
> 标签：django

我正在使用问题[5971951](https://stackoverflow.com/questions/5971951/django-avatar-strange-error)中的 render_avatar 标记，因为我遇到了与用户相同的问题。但即使有这样的解决方案，错误也会不断出现！:(

为什么'render_avatar'会期待'endblock'？

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/jorge/

Django Version: 1.4.3
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'dispersion.apps.posts',
 'dispersion.apps.profiles',
 'dispersion.apps.contextualshare',
 'dispersion.apps.index',
 'avatar',
 'allauth',
 'allauth.account',
 'allauth.socialaccount',
 'allauth.socialaccount.providers.openid',
 'allauth.socialaccount.providers.persona')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Template error:
In template /home/jorge/coders/desarrollo/dispersion/dispersion/templates/default/user_profile.html, error at line 37
   Invalid block tag: 'render_avatar', expected 'endblock'
   27 :     <a id="disp-top-bar-login-button" class="disp-top-bar-btn disp-btn" href="#">Iniciar sesión</a>

   28 :     <a id="disp-top-bar-register-button" class="disp-top-bar-btn disp-btn" href="#">Registrarse</a>

   29 :       </div>

   30 :       {% else %}

   31 :       <p>UNA BARRITA PARA EL USUARIO AUTENTICADO NO ESTARIA DEMAS gLOL</p>

   32 :       {% endif %}

   33 :   </div>

   34 : </header>

   35 : <div id="disp-user-header">

   36 :     <!--<div class="disp-user-image-large"></div> <!-- Se busca ayuda con la sintaxis adecuada para posicionar correctamente éste elemento en el HTML -->

   37 :      {% render_avatar avatar 190 %} 

   38 :   <div id="disp-user-custom-wallpaper"></div>

   39 :   <div id="disp-user-bar-wrapper">

   40 :     <div id="disp-user-bar">

   41 :     <div id="disp-user-tabs">

   42 :         <span id="disp-user-posts-button" class="disp-user-tabs-button">Publicaciones</span>

   43 :         <span id="disp-user-about-button" class="disp-user-tabs-button">Sobre Mí</span>

   44 :         <span id="disp-user-photos-button" class="disp-user-tabs-button">Fotos</span>

   45 :         <span id="disp-user-videos-button" class="disp-user-tabs-button">Vídeos</span>

   46 :       </div>

   47 :       <div id="disp-user-name">

Traceback:
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/jorge/coders/desarrollo/dispersion/dispersion/apps/profiles/views.py" in userprofile_view
  51\.                     request))
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/shortcuts/__init__.py" in render_to_response
  20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/loader.py" in render_to_string
  169\.         t = get_template(template_name)
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/loader.py" in get_template
  145\.     template, origin = find_template(template_name)
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/loader.py" in find_template
  134\.             source, display_name = loader(name, dirs)
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/loader.py" in __call__
  42\.         return self.load_template(template_name, template_dirs)
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/loader.py" in load_template
  48\.             template = get_template_from_string(source, origin, template_name)
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/loader.py" in get_template_from_string
  156\.     return Template(source, origin, name)
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/base.py" in __init__
  125\.         self.nodelist = compile_string(template_string, origin)
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/base.py" in compile_string
  153\.     return parser.parse()
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/base.py" in parse
  267\.                     compiled_result = compile_func(self, token)
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/loader_tags.py" in do_extends
  214\.     nodelist = parser.parse()
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/base.py" in parse
  267\.                     compiled_result = compile_func(self, token)
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/loader_tags.py" in do_block
  189\.     nodelist = parser.parse(('endblock',))
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/base.py" in parse
  265\.                     self.invalid_block_tag(token, command, parse_until)
File "/home/jorge/coders/desarrollo/dispersion/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/template/base.py" in invalid_block_tag
  320\.                 (command, get_text_list(["'%s'" % p for p in parse_until])))

Exception Type: TemplateSyntaxError at /jorge/
Exception Value: Invalid block tag: 'render_avatar', expected 'endblock' 
```

有什么帮助吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:33:20.467

你在打电话吗

```
 {% load avatar_tags %} 
```

在你的模板文件中？

# scala - 监督策略可以处理 ConnectException 吗？

> ID：14613120
> 
> 赞同：6
> 
> 时间：2013-01-30T20:30:11.857
> 
> 标签：scala, akka, akka-supervision

如果由于断电导致远程参与者不可用，监督策略可以处理这种情况吗？

我已经对示例进行了编码，并且已经关闭了远程参与者系统，但监督策略似乎只考虑了远程参与者一旦到达就抛出的异常。

由于我不是 Akka 专家，我想知道这是否可以实现。

版：

我已经实现了对指示连接中发生错误的事件的订阅。我仍然需要访问发件人最初发送的消息，以免消息丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:31:36.383

从文档中：

> Akka Remote 的 DeathWatch （还）不会被连接失败触发——这意味着如果父节点或网络出现故障，没有人会收到通知。此功能可能会在 Akka Remoting 的未来版本中添加。然而，Akka Cluster 具有这样的功能。

[http://doc.akka.io/docs/akka/2.1.0/general/supervision.html#What_Lifecycle_Monitoring_Means](http://doc.akka.io/docs/akka/2.1.0/general/supervision.html#What_Lifecycle_Monitoring_Means)

# ruby-on-rails - 如何在实际作业中引用活动的delayed_job

> ID：14613122
> 
> 赞同：5
> 
> 时间：2013-01-30T20:30:18.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

我正在研究一种显示延迟作业完成百分比的解决方案（使用delayed_job gem）。目前，我的 delay_jobs 表的数据库迁移如下所示：

```
class CreateDelayedJobs < ActiveRecord::Migration
  def self.up
    create_table :delayed_jobs, :force => true do |table|
      table.integer  :priority, :default => 0      # Allows some jobs to jump to the front of the queue
      table.integer  :attempts, :default => 0      # Provides for retries, but still fail eventually.
      table.text     :handler                      # YAML-encoded string of the object that will do work
      table.text     :last_error                   # reason for last failure (See Note below)
      table.datetime :run_at                       # When to run. Could be Time.zone.now for immediately, or sometime in the future.
      table.datetime :locked_at                    # Set when a client is working on this object
      table.datetime :failed_at                    # Set when all retries have failed (actually, by default, the record is deleted instead)
      table.string   :locked_by                    # Who is working on this object (if locked)
      table.string   :queue                        # The name of the queue this job is in
      table.integer  :progress
      table.timestamps

    end

    add_index :delayed_jobs, [:priority, :run_at], :name => 'delayed_jobs_priority'
  end

  def self.down
    drop_table :delayed_jobs
  end
end 
```

我在控制器方法中使用排队进程来延迟作业，并引用 lib/build_detail.rb 中的一个类：

```
Delayed::Job.enqueue(BuildDetail.new(@object, @com)) 
```

lib/build_detail.rb 文件如下：

```
class BuildDetail < Struct.new(:object, :com)

  def perform
    total_count = object.person_ids.length
    progress_count = 0

    people = com.person object.person_ids do |abc|
      progress_count += abc.size
      Delayed::Job.current.update_attribute :progress, (progress_count/total_count)
    end
  end  

end 
```

Delayed::Job.current 不起作用。我看到了[这个帖子](https://groups.google.com/forum/?fromgroups=#!topic/sdruby/0OIj0XKsnrg)中提出的 Delayed::Job.current 方法，但是看起来该方法从未包含在主要的delayed_jobs github项目中。

我如何访问当前作业（从实际作业中），以在每次作业通过循环时更新进度字段？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-26T09:08:04.380

It's to late to answer but I've faced with the same requirement so may be it will help someone. All you need to do is to implement custom job and `before`-hook where you will store reference on current job:

```
class MyTestJob
  def before(job)
    @job = job
  end

  def perform
    ...
    @job.update_attributes({ progress: your_progress_var }, without_protection: true)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:19:43.367

关于延迟工作的一件很酷的事情也是在这里阻碍你。当您将大量延迟的作业排队时，如果您有多个运行工作程序的实例，您可以并行处理它们 - 例如，您可以让 10 台机器运行您的应用程序的一个实例，访问同一个数据库并获得 10 倍的处理速度提升。因此，可能有多个“当前”工作。一次只运行一个作业是一种特殊情况。

这是一种查看所有活动作业状态的方法。如果您只运行一个实例，它只会返回一个作业，这样就可以满足您的情况：

```
active_jobs = Delayed::Job.where("progress > 0")
progress_of_first_job = active_jobs.first.progress if active_jobs.present?
progress_of_all_jobs = active_jobs.map{|job| job.progress} 
```

progress_of_first_job 是其中一个作业的进度（使用 order 子句以确保安全）。progress_of_all_jobs 是每个活动作业的进度值数组（可能为空）。

# vb.net - 存储过程，添加多行不在循环中

> ID：14613136
> 
> 赞同：1
> 
> 时间：2013-01-30T20:30:58.477
> 
> 标签：vb.net, stored-procedures

我正在尝试将两行插入到附加到更大插入的数据库中，但是当我尝试一个接一个地执行时，只有第一行进入而第二行没有，这只是代码的一部分，但它是唯一的部分那是窃听，所以我认为应该足够了。例外是说我通过传递给许多变量

```
 ElseIf Request.QueryString("f") = 8 Then
            cmd.CommandType = CommandType.StoredProcedure
            cmd.Parameters.AddWithValue("@submission", Session("dfd")) 
            cmd.Parameters.AddWithValue("@questionNumber", 1)
            cmd.Parameters.AddWithValue("@question", 0) 
            cmd.Parameters.AddWithValue("@questionSAnswer", Session("fdd"))
            cmd.Parameters.AddWithValue("@testID", Request.QueryString("f"))
            cmd.Parameters.AddWithValue("@option", 0) '
            cmd.Parameters.AddWithValue("@createdBy", Session("Username"))
            conn.Open()
            cmd.ExecuteNonQuery()
            conn.Dispose()
            cmd.CommandType = CommandType.StoredProcedure
            cmd.Parameters.AddWithValue("@submission", Session("fgd")) 
            cmd.Parameters.AddWithValue("@questionNumber", 17)
            cmd.Parameters.AddWithValue("@question", 0) l
            cmd.Parameters.AddWithValue("@questionSAnswer", Session("dffdfdf"))
            cmd.Parameters.AddWithValue("@testID", Request.QueryString("f"))
            cmd.Parameters.AddWithValue("@option", 0) 
            cmd.Parameters.AddWithValue("@createdBy", Session("Username"))
            conn.Open()
            cmd.ExecuteNonQuery() 
```

我通过而不是重新启动我做了额外的命令来解决它

```
 ElseIf Request.QueryString("f") = 8 Then
            cmd.CommandType = CommandType.StoredProcedure
            cmd.Parameters.AddWithValue("@submissionID", Session("SubmissionID"))
            cmd.Parameters.AddWithValue("@questionNumber", 1)
            cmd.Parameters.AddWithValue("@questionID", 0)
            cmd.Parameters.AddWithValue("@questionSAnswer", Session("matches"))
            cmd.Parameters.AddWithValue("@testID", Request.QueryString("f"))
            cmd.Parameters.AddWithValue("@optionID", 0)
            cmd.Parameters.AddWithValue("@createdBy", Session("Username"))
            conn.Open()
            cmd.ExecuteNonQuery()

            cmd1.CommandType = CommandType.StoredProcedure
            cmd1.Parameters.AddWithValue("@submissionID", Session("SubmissionID"))
            cmd1.Parameters.AddWithValue("@questionNumber", 17)
            cmd1.Parameters.AddWithValue("@questionID", 0)
            cmd1.Parameters.AddWithValue("@questionSAnswer", Session("dosing2"))
            cmd1.Parameters.AddWithValue("@testID", Request.QueryString("f"))
            cmd1.Parameters.AddWithValue("@optionID", 0)
            cmd1.Parameters.AddWithValue("@createdBy", Session("Username"))
            cmd1.ExecuteNonQuery() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:07:44.730

我认为您无法重新打开已处理的连接。关闭它，直到你确定你真的完成了它，然后处理它。

# c++ - 多变量比较是内联未定义的行为吗？

> ID：14613142
> 
> 赞同：6
> 
> 时间：2013-01-30T20:31:11.377
> 
> 标签：c++, c, undefined-behavior

我告诉我的一个朋友（正在学习 C）他不能同时进行多个变量比较：

```
int main(){
    int a[4];

    scanf("%d %d %d %d", &a[0], &a[1], &a[2], &a[3]);

    if(a[0] < a[1] < a[2] < a[3]){
        printf("OK!\n");

    }

    else{
        printf("I've told ya\n");

    }

} 
```

所以，为了证明我是对的，我已经编写了上面的程序，然后我用`1 2 3 4`. 令人惊讶的是它打印出来了`OK!`。所以我不知道该告诉他什么，因为我确信这是不对的。

最后，它是还是不是未定义的行为？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T20:32:28.233

不，它是明确定义的。它只是具有与您所期望的不同的语义。

表达式计算如下：

```
if (((a[0] < a[1]) < a[2]) < a[3]) { 
```

每次比较都会产生一个布尔 (`0`或`1`) 结果。

的（布尔）结果与`a[0] < a[1]`进行比较`a[2]`，并且该比较的（布尔）结果与 进行比较`a[3]`。

我确信有一些合法的用例，但充其量是很少见的。

表达你想要表达的正确方式是

```
if (a[0] < a[1] && a[1] < a[2] && a[2] < a[3]) { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T20:32:42.737

这不是未定义的行为，它只是没有做你认为它做的事情。相当于

```
(((a[0] < a[1]) < a[2]) < a[3]) 
```

`1`为真，`0`为假。因此，如果 a[0] 小于 a[1]，则将 a[2] 与 1 进行比较，否则将其与零进行比较。等等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T20:34:26.217

这不是*未定义的行为*，而是*出乎意料的行为*。

在 C 和 C++ 中，您不能进行类似数学的比较。您可以一次比较两件事。所以，如果你想`a < b < c < d`，你必须写：

```
if (a < b && b < c && c < d)
    ... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-30T20:49:12.683

由于您将 C++ 纳入其中，因此您可以非常简单地做

```
if ( std::is_sorted(a, a+4) )
    puts("OK!"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-30T20:33:56.317

这是已定义的行为，但不会按照您的预期做，所以不要那样做。

你的表达变成：

```
((a[0] < a[1]) < a[2]) < a[3] 
```

其中每个 x < y 都变成 1 或 0 - 这意味着如果 a[3] 大于 1，则它始终为真，如果 a[3] 大于 0，则可能为真。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-30T20:36:03.257

这不是未定义的行为，但它并没有像他认为的那样做。< 是从左到右关联的，因此首先`a[0] < a[1]`评估，导致`true`. 然后`true < a[2]`(等价于`1 < a[2]`) 被评估，结果是`true`。等等。你只是巧合地得到了正确的结果。例如，“2 1 0 1”也会产生真值。使用任一

```
a[0] < a[1] && a[1] < a[2] && a[2] < a[3] 
```

或更一般地说，如果您的数组很长：

```
for(i=1,ok=1;i<n&&ok;i++)ok &= a[i-1] < a[i]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-30T20:43:54.943

< 运算符的求值顺序，当这样出现时，是明确定义的。您编写的代码相当于：

```
bool x;

x = a[0] < a[1];

if(x == true)
{
  x = true < a[2]; 
}
else
{
  x = false < a[2]; 
}

if(x == true)
{
  x = true < a[3]; 
}
else
{
  x = false < a[3]; 
}

if(x == true)
{
  printf("OK!\n");
}
else
{
  printf("I've told ya\n");
} 
```

true 始终计算为整数 1，false 为 0。如您所知，这段代码毫无意义。

# java - 在 if 语句中转换整数时，线程“main”java.lang.NullPointerException 中的异常

> ID：14613145
> 
> 赞同：0
> 
> 时间：2013-01-30T20:31:21.320
> 
> 标签：java, if-statement, nullpointerexception, compare

问题在于`partition()`，它将读取一个`LinkedList`节点并将该节点的数据值与输入的 int 数进行比较。程序抛出`NullPointerException`比较语句`node.data < x`。我无法弄清楚，有人可以帮助我吗？非常感谢。

```
package Chapter2;
import java.util.*;
public class LinkedList2<E>{
    static class LinkedListNode<E>{
        E data;
        LinkedListNode<E> next;
    }

    private LinkedListNode<E> head;
    private LinkedListNode<E> tail;

    public LinkedList2(){
        this.head = new LinkedListNode<E>();
        this.tail = new LinkedListNode<E>();
        head.next = tail;
    }
    public void addLast(E e){
        LinkedListNode<E> node = new LinkedListNode<E>();
        tail.data = e;
        tail.next = node;
        tail = node;
    }

    public void print(){
        LinkedListNode<E> curr = head.next;
        while(curr.next != null){
            System.out.print(curr.data + " ");
            curr = curr.next;
        }
        System.out.println("");
    }

    public LinkedListNode<Integer> partition(LinkedListNode<Integer> node, Integer x){
        LinkedListNode<Integer> beforeStart = null;
        LinkedListNode<Integer> beforeEnd = null;
        LinkedListNode<Integer> afterStart = null;
        LinkedListNode<Integer> afterEnd = null;

        while(node!= null){
            LinkedListNode<Integer> next = node.next;
            node.next = null;
            System.out.println(node.data);
            if(node.data < x){
                if(beforeStart == null){
                    beforeStart = node;
                    beforeEnd = beforeStart;
                }else{
                    beforeEnd.next = node;
                    beforeEnd = node;
                }
            }else{
                if(afterStart == null){
                    afterStart = node;
                    afterEnd = afterStart;
                }else{
                    afterEnd.next = node;
                    afterEnd = node;
                }
            }
            node = next;
        }
        if(beforeStart == null){
            return afterStart;
        }
        beforeEnd.next = afterStart;
        return beforeStart;
    }

    public static void main(String[] args){

        LinkedList2<Integer> listInt = new LinkedList2<Integer>();
        listInt.addLast(5);
        listInt.addLast(8);
        listInt.addLast(1);
        listInt.addLast(3);
        listInt.addLast(6);

        listInt.print();

        System.out.println(listInt.head.next.data);
        listInt.partition(listInt.head.next, 4);

        listInt.print();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:36:06.310

很简单，您正在检查 node.data 的值是否小于 x。由于 node.data 是 Integer 类型，它很可能为 null，这意味着该语句将抛出 NullPointer。您可以通过检查您的 while 语句来解决此问题：

```
while(node != null && node.data != null){
   /* Your Code */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:40:03.600

您正在检查*node*不是*null*，但也没有检查*node.data*不是*null*，因此在比较*null < x*时会出现*NullPointerException*。

while 条件是正确的，因为您想遍历每个节点，但 if 条件应该是这样的：

```
if(node.data != null && node.data < x){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:45:31.930

最终循环设置`node`为`tail`。`tail.data`是`null`因为它没有被设置——在`addLast()`你设置`tail`为 a`LinkedListNode`而没有设置它的`data`. 因此`node != null`但是`node.data`是`null`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T20:46:21.710

我相信您正在设置语句是导致此空指针的原因

您在此处将下一个节点设置为空`LinkedListNode<Integer> next = node.next;`

```
node.next = null; 
```

这将适用于第一次通过，但由于上面的语句（`node.next = null`） ，第二次节点将为空

调试它，你会看到。

# .net - 如何防止 CheckBox.Checked 的赋值语句引发 CheckChanged 事件？

> ID：14613146
> 
> 赞同：0
> 
> 时间：2013-01-30T20:31:27.003
> 
> 标签：.net, vb.net, events, controls

给定

```
 Dim cb As CheckBox = New CheckBox
    AddHandler cb, AddressOf cb_CheckChanged
    cb.Checked = True 
```

...除了禁用控件之外，如何防止分配给 Checked 引发 CheckChanged 事件？我在 MFC 中长大，只有在 USER 更改控件的状态时才会引发事件。软软在想什么？真的无法区分来自用户的事件和来自我自己的赋值语句的事件吗？ *哎呀！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:35:33.083

无论导致事件的原因如何，引发事件都是完全有效的，因为`CheckChanged`事件只会告诉您`Checked`属性何时发生变化。

如果您试图避免无限循环，则必须尝试添加条件：

```
If Not cb.Checked Then
  cb.Checked = True
End If 
```

# mysql - 将记录从一个表移动到另一个插入 X 次

> ID：14613147
> 
> 赞同：1
> 
> 时间：2013-01-30T20:31:30.730
> 
> 标签：mysql

我有一个类似这样的表：

```
id
name
datetime
quantity 
```

我想用 SQL 将这些记录从一个表移动到另一个没有数量列的表，插入记录 X 次，其中 X 是数量的值，所以......

```
id name       datetime    quantity
----------------------------------
5  book-order 15-Mar-2010 3

# becomes

id name       datetime  
------------------------
5  book-order 15-Mar-2010
6  book-order 15-Mar-2010
7  book-order 15-Mar-2010 
```

有没有办法在纯 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:48:48.357

这是一种方法，假设数量不超过 100：

```
insert into t2(name, datetime)
    select name, datetime
    from t1 join
         (select d1*10+d2 as num
          from (select 0 as n union all select 1 union all select 2 union all select 3 union all select 4 union all
                select 5 union all select 6 union all select 7 union all select 8 union all select 9
               ) d1 cross join
               (select 0 as n union all select 1 union all select 2 union all select 3 union all select 4 union all
                select 5 union all select 6 union all select 7 union all select 8 union all select 9
              ) d2
         ) nums
         on nums.num < t1.qty 
```

如果数量太大，困难的部分是生成一个数字表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:47:18.730

如果目标表上的 ID 是自动增量字段，您可以考虑使用类似以下查询的内容：

```
insert into books2 (name, datetime)
select
  name, datetime
from
  books inner join
  (select 0 n union all select 1 union all select 2 union all select 3
   union all select 4 union all select 5 union all select 6 n union all
   select 7 union all select 8 union all select 9) nums
  on books.quantity > nums.n; 
```

这将根据books.quantity 多次选择所有书籍订单，并将它们插入到table books2 中。此查询限制为最多 10 个，但可以扩展。

[请参阅此处](http://sqlfiddle.com/#!2/7c859/1)的工作小提琴。

# scala - 如何在 Play 2.x 中检测应用程序模式

> ID：14613148
> 
> 赞同：33
> 
> 时间：2013-01-30T20:31:32.037
> 
> 标签：scala, playframework, playframework-2.0

在 Play 2.1 应用程序中，我将如何以编程方式确定应用程序在哪种模式下运行（即*Development*与*Production*）？

例如，能够从模板内部执行以下操作会很有用：

`<p>@if(__some_play_API_call__ == Dev) { <b>Development mode</b> }</p>`

在 Play 2.0 API 文档中，似乎有一个*类*`mode`的属性......但是，我不确定如何获取当前正在运行的应用程序的*实例*。`play.api.Application`

 *** * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-30T20:40:54.890

您可以通过以下方式访问当前应用程序

```
play.api.Play.current() 
```

找出模式尝试

```
play.api.Play.current().mode() 
```

或简单地使用

```
play.api.Play.isDev(play.api.Play.current()) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-08-07T16:52:27.467

在 Play 2.5.x 中，该`play.Play.isDev()`方法已被弃用，必须使用[依赖注入](https://www.playframework.com/documentation/2.5.x/JavaDependencyInjection)：

```
import javax.inject.Inject;

public class Example {

    @Inject
    private play.Environment environment;

    public void myMethod() {
        if (environment.isDev()) {
          ...
        }
    }
} 
```

或者等效地在 Scala 中：

```
class ErrorHandler @Inject()(environment: Environment) {

  def myMethod() = {
    if (environment.isDev) {
      ...
    }
  }

} 
```

`environment.isDev()`返回一个布尔值，可以轻松地将其传递给模板。无需使用[此处](https://stackoverflow.com/a/32971028/873282)描述的隐式变量。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-03-07T10:57:57.393

使用**Play 2.5**、**Play 2.6**和 **Play 2.7**

你可以这样做：

```
import play.Environment

class MyController @Inject()(env: Environment) {

  println(s"DevMode is ${env.isDev}")
  println(s"ProdMode is ${env.isProd}")
  println(s"TestMode is ${env.isTest}")

} 
```

或者在**Play 2.6**和 **Play 2.7**中，您还有以下版本`play.api.Environment`：

```
import play.api.Environment

class MyController @Inject()(env: Environment) {

  println(s"ProdMode is ${env.mode == Mode.Prod}")
  println(s"DevMode is ${env.mode == Mode.Dev}")
  println(s"TestMode is ${env.mode == Mode.Test}")
} 
```

对于两个 Scala Doc 状态：

```
/**
 * The environment for the application.
 *
 * Captures concerns relating to the classloader and the filesystem for the application.
 */ 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-10-22T13:52:19.490

在 play 2.3.X 中，您还可以通过以下方式检查：

```
play.Play.isProd()
play.Play.isDev()
play.Play.isTest() 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-08-21T15:00:12.667

在使用 Scala 的 Play 2.5 中，有一个`context.environment.mode`值为`Enumeration`from`play.api.Mode`和其中一个值`Dev, Test, Prod`。
对于编译时依赖注入，您`context`可以在应用程序加载器中使用，如果您扩展，`BuiltInComponentsFromContext`则可以直接使用 (inject)`environment.mode`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-11T08:31:12.517

在**Play 2.6**中，注入一个`Environment`实例并使用它的`mode`字段：[`play.api.Mode`](https://www.playframework.com/documentation/2.0/api/scala/play/api/Mode$.html)枚举值之一。

```
import javax.inject.Inject
import play.api.Environment
import play.api.Mode.Prod
import play.api.mvc.{AbstractController, ControllerComponents}

class TestController @Inject()(cc: ControllerComponents, env: Environment)
    extends AbstractController(cc) {

  def hello = Action {
    if (env.mode == Prod) {
      // ...
    }

    Ok(s"Hello world in ${env.mode} mode")
  }

} 
```

至少在 Play 2.6.20[中， pme 提到](https://stackoverflow.com/a/49150232/56285)`env.isDev`的方法,`env.isProd`等不再起作用。**

# jquery - 奇怪的json语法

> ID：14613151
> 
> 赞同：-1
> 
> 时间：2013-01-30T20:31:42.520
> 
> 标签：jquery, html, json

我有一个关于 json 输出与 jquery 的问题。这是 json 数据，但语法很奇怪：

```
{"ResC": {
"@attributes": {
  "ver": "1.1",
  "prod": "HAFAS 5.31.VBB.4.8.9",
  "lang": "DE"
},
"STBRes": {
  "@attributes": {"plan_version": "planid=1358257894-planid_adr=1336152870-planid_poi=1357822240-planid_ext=1343914901"},
  "JourneyList": {"STBJourney": [
      {
        "@attributes": {"trainId": "1628608644#30.01.13"},
        "MainStop": {"BasicStop": {
            "@attributes": {"index": "4"},
            "Station": {"@attributes": {
                "name": "S+U Westhafen (Berlin)",
                "x": "13342724",
                "y": "52536529",
                "type": "WGS84",
                "externalId": "9001201#86",
                "externalStationNr": "9001201"
              }},
            "Dep": {"Time": "30.01.13T21:26"}
          }},
        "JourneyAttributeList": {"JourneyAttribute": [
            {
              "@attributes": {
                "from": "4",
                "to": "17"
              },
              "Attribute": {
                "@attributes": {"type": "NAME"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "U9"
                }
              }
            },
            {
              "@attributes": {
                "from": "4",
                "to": "17"
              },
              "Attribute": {
                "@attributes": {
                  "type": "CATEGORY",
                  "code": "1"
                },
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "U"
                }
              }
            },
            {
              "@attributes": {
                "from": "4",
                "to": "17"
              },
              "Attribute": {
                "@attributes": {"type": "INTERNALCATEGORY"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "U"
                }
              }
            },
            {
              "@attributes": {
                "from": "4",
                "to": "17"
              },
              "Attribute": {
                "@attributes": {"type": "OPERATOR"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "BVG"
                }
              }
            },
            {
              "@attributes": {
                "from": "4",
                "to": "17"
              },
              "Attribute": {
                "@attributes": {"type": "NUMBER"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "U9"
                }
              }
            },
            {
              "@attributes": {
                "from": "4",
                "to": "17"
              },
              "Attribute": {
                "@attributes": {"type": "DIRECTION"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "S+U Rathaus Steglitz (Berlin)"
                }
              }
            },
            {
              "@attributes": {
                "from": "4",
                "to": "17"
              },
              "Attribute": {
                "@attributes": {"type": "DIRECTIONFLAG"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "1"
                }
              }
            },
            {
              "@attributes": {
                "from": "4",
                "to": "17"
              },
              "Attribute": {
                "@attributes": {"type": "DIRECTIONCODE"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "9062202"
                }
              }
            },
            {
              "@attributes": {
                "from": "0",
                "to": "17"
              },
              "Attribute": {
                "@attributes": {
                  "priority": "350",
                  "type": "NORMAL",
                  "code": "RA"
                },
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "Fahrradmitnahme möglich"
                }
              }
            },
            {
              "@attributes": {
                "from": "0",
                "to": "17"
              },
              "Attribute": {
                "@attributes": {
                  "priority": "1",
                  "type": "NORMAL",
                  "code": "bf"
                },
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "barrierefrei"
                }
              }
            }
          ]},
        "ServiceDaysList": {"ServiceDays": {
            "ServiceBits": "FFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
            "RegularServiceText": {"Text": "täglich"},
            "IrregularServiceText": {"Text": "nicht 30\. Mär"}
          }}
      },
      {
        "@attributes": {
          "trainId": "3599408640#30.01.13",
          "journeyId": "42221"
        },
        "MainStop": {"BasicStop": {
            "@attributes": {"index": "15"},
            "Station": {"@attributes": {
                "name": "S+U Westhafen (Berlin)",
                "x": "13342724",
                "y": "52536529",
                "type": "WGS84",
                "externalId": "9001201#86",
                "externalStationNr": "9001201"
              }},
            "Dep": {
              "Time": "30.01.13T21:27",
              "Platform": {"Text": "2"}
            },
            "StopPrognosis": {"Dep": {
                "Time": "30.01.13T21:27",
                "Platform": {"Text": "2"}
              }}
          }},
        "JourneyAttributeList": {"JourneyAttribute": [
            {
              "@attributes": {
                "from": "15",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "NAME"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "S42"
                }
              }
            },
            {
              "@attributes": {
                "from": "15",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {
                  "type": "CATEGORY",
                  "code": "0"
                },
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "S"
                }
              }
            },
            {
              "@attributes": {
                "from": "15",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "INTERNALCATEGORY"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "S-6"
                }
              }
            },
            {
              "@attributes": {
                "from": "15",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "OPERATOR"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "DBS"
                }
              }
            },
            {
              "@attributes": {
                "from": "15",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "NUMBER"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "S42"
                }
              }
            },
            {
              "@attributes": {
                "from": "15",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "DIRECTION"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "Ringbahn S 42"
                }
              }
            },
            {
              "@attributes": {
                "from": "15",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "DIRECTIONFLAG"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "2"
                }
              }
            },
            {
              "@attributes": {
                "from": "15",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "DIRECTIONCODE"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "R000498"
                }
              }
            },
            {
              "@attributes": {
                "from": "0",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {
                  "priority": "350",
                  "type": "NORMAL",
                  "code": "FB"
                },
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "Fahrradmitnahme möglich"
                }
              }
            },
            {
              "@attributes": {
                "from": "0",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {
                  "priority": "1",
                  "type": "NORMAL",
                  "code": "ck"
                },
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "barrierefrei"
                }
              }
            }
          ]},
        "ServiceDaysList": {"ServiceDays": {
            "ServiceBits": "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
            "RegularServiceText": {"Text": "täglich"}
          }}
      },
      {
        "@attributes": {
          "trainId": "3599408634#30.01.13",
          "journeyId": "42221"
        },
        "MainStop": {"BasicStop": {
            "@attributes": {"index": "42"},
            "Station": {"@attributes": {
                "name": "S+U Westhafen (Berlin)",
                "x": "13342724",
                "y": "52536529",
                "type": "WGS84",
                "externalId": "9001201#86",
                "externalStationNr": "9001201"
              }},
            "Dep": {
              "Time": "30.01.13T21:27",
              "Platform": {"Text": "2"}
            },
            "StopPrognosis": {"Dep": {
                "Time": "30.01.13T21:27",
                "Platform": {"Text": "2"}
              }}
          }},
        "JourneyAttributeList": {"JourneyAttribute": [
            {
              "@attributes": {
                "from": "42",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "NAME"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "S42"
                }
              }
            },
            {
              "@attributes": {
                "from": "42",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {
                  "type": "CATEGORY",
                  "code": "0"
                },
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "S"
                }
              }
            },
            {
              "@attributes": {
                "from": "42",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "INTERNALCATEGORY"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "S-6"
                }
              }
            },
            {
              "@attributes": {
                "from": "42",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "OPERATOR"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "DBS"
                }
              }
            },
            {
              "@attributes": {
                "from": "42",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "NUMBER"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "S42"
                }
              }
            },
            {
              "@attributes": {
                "from": "42",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "DIRECTION"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "Ringbahn S 42"
                }
              }
            },
            {
              "@attributes": {
                "from": "42",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "DIRECTIONFLAG"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "2"
                }
              }
            },
            {
              "@attributes": {
                "from": "42",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {"type": "DIRECTIONCODE"},
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "R000498"
                }
              }
            },
            {
              "@attributes": {
                "from": "0",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {
                  "priority": "350",
                  "type": "NORMAL",
                  "code": "FB"
                },
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "Fahrradmitnahme möglich"
                }
              }
            },
            {
              "@attributes": {
                "from": "0",
                "to": "54"
              },
              "Attribute": {
                "@attributes": {
                  "priority": "1",
                  "type": "NORMAL",
                  "code": "ck"
                },
                "AttributeVariant": {
                  "@attributes": {"type": "NORMAL"},
                  "Text": "barrierefrei"
                }
              }
            }
          ]},
        "ServiceDaysList": {"ServiceDays": {
            "ServiceBits": "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
            "RegularServiceText": {"Text": "täglich"}
          }}
      }
    ]}
}
}} 
```

有一些条目被声明为属性和类型。例如，如何使用类型查询条目的文本`DIRECTION`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:35:57.400

这种语法没什么奇怪的，普通的 JSON：

```
data["ResC"]["@attributes"]["ver"] // "1.1" 
```

我猜它是从一些 XML 生成的，因此属性名称如`"@attributes"`.

# firefox-addon - Firefox 附加组件 - 如何将脚本注入安装前打开的选项卡？

> ID：14613161
> 
> 赞同：1
> 
> 时间：2013-01-30T20:32:17.553
> 
> 标签：firefox-addon, firefox-addon-sdk

我们如何将脚本注入到安装插件**之前**存在的选项卡中？

一旦用户安装了我们的插件并且不刷新页面，我们希望将我们的脚本注入所有打开的选项卡。

知道如何做到这一点吗？

目前，我们将脚本注入到用户以这种方式安装插件**后打开的新选项卡中：**

```
pageMod.PageMod({
    include: "*",
    contentScriptFile: [self.data.url("js/jquery-1.8.1.min.js"), self.data.url("content.js")],
    onAttach: function (worker) {

        worker.port.on('settings', function () {
            log('settings: get');
            var settings = {
              user: storage.user
            };

            worker.port.emit("settings", settings);
        });   
    }
}); 
```

顺便说一句，我们使用 firefox add-on sdk 1.12

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:02:38.267

只需添加选项

```
attachTo: ["existing"] 
```

# visual-studio-2010 - 使用 SURF 时出现运行时错误 Visual Studio 和 OpenCV 错误

> ID：14613162
> 
> 赞同：1
> 
> 时间：2013-01-30T20:32:20.937
> 
> 标签：visual-studio-2010, opencv, runtime-error, surf, object-detection

以下代码应该`OpenCV2.3`在 Visual Studio 2010 上使用 SURF 执行特征检测。图像“sample.jpg”是一本书的彩色图像 (RGB)，捕获的视频将包含几本不同的书籍。没有编译错误，但在 CTRL F5 上，控制台显示`Native' has exited with code -1073741811 (0xc000000d)`. 这很奇怪，因为其他程序运行良好。我通过使用显示图像的简单代码删除此功能检测代码来对其进行测试，这似乎工作正常。只有当我运行此代码时，它才会引发此错误。我在附加依赖项下包含了以下库：

```
opencv_core230d.lib
opencv_highgui230d.lib
opencv_ml230d.lib
opencv_legacy230d.lib
opencv_imgproc230d.lib
opencv_features2d230d.lib
opencv_calib3d230d.lib
opencv_flann230d.lib 
```

我是否需要为 SURF 包含一个库或其他东西，因为这是我第一次使用 Surf。请帮忙。

```
int main()
{
    Mat object = imread( "C:\\OpenCV2.3\\sample.jpg");

    if( !object.data )
    {
        std::cout<< "Error reading object " << std::endl;
        return -1;
    }

    //Detect the keypoints using SURF Detector
    int minHessian = 500;

    SurfFeatureDetector detector( minHessian );
    std::vector<KeyPoint> kp_object;

    detector.detect( object, kp_object );

    //Calculate descriptors (feature vectors)
    SurfDescriptorExtractor extractor;
    Mat des_object;

    extractor.compute( object, kp_object, des_object );

    FlannBasedMatcher matcher;

    VideoCapture cap(0);
if( !cap.isOpened() ) return -1;

    namedWindow("Good Matches");

    std::vector<Point2f> obj_corners(4);

    //Get the corners from the object
    obj_corners[0] = cvPoint(0,0);
    obj_corners[1] = cvPoint( object.cols, 0 );
    obj_corners[2] = cvPoint( object.cols, object.rows );
    obj_corners[3] = cvPoint( 0, object.rows );

    char key = 'a';
    int framecount = 0;
    while (key != 27)
    {
        Mat frame;
        cap >> frame;

        if (framecount < 5)
        {
            framecount++;
            continue;
        }

        Mat des_image, img_matches;
        std::vector<KeyPoint> kp_image;
        std::vector<vector<DMatch > > matches;
        std::vector<DMatch > good_matches;
        std::vector<Point2f> obj;
        std::vector<Point2f> scene;
        std::vector<Point2f> scene_corners(4);
        Mat H;
        Mat image;

        cvtColor(frame, image, CV_RGB2GRAY);

        detector.detect( image, kp_image );
        extractor.compute( image, kp_image, des_image );

        matcher.knnMatch(des_object, des_image, matches, 2);

        for(int i = 0; i < min(des_image.rows-1,(int) matches.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
        {
            if((matches[i][0].distance < 0.6*(matches[i][3].distance)) && ((int) matches[i].size()<=2 && (int) matches[i].size()>0))
            {
                good_matches.push_back(matches[i][0]);
            }
        }

        //Draw only "good" matches
        drawMatches( object, kp_object, image, kp_image, good_matches, img_matches, Scalar::all(-1), Scalar::all(-1), vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );

        if (good_matches.size() >= 4)
        {
            for( int i = 0; i < good_matches.size(); i++ )
            {
                //Get the keypoints from the good matches
                obj.push_back( kp_object[ good_matches[i].queryIdx ].pt );
                scene.push_back( kp_image[ good_matches[i].trainIdx ].pt );
            }

            H = findHomography( obj, scene, CV_RANSAC );

            perspectiveTransform( obj_corners, scene_corners, H);

            //Draw lines between the corners (the mapped object in the scene image )
            line( img_matches, scene_corners[0] + Point2f( object.cols, 0), scene_corners[1] + Point2f( object.cols, 0), Scalar(0, 255, 0), 4 );
            line( img_matches, scene_corners[1] + Point2f( object.cols, 0), scene_corners[2] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
            line( img_matches, scene_corners[2] + Point2f( object.cols, 0), scene_corners[3] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
            line( img_matches, scene_corners[3] + Point2f( object.cols, 0), scene_corners[0] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
        }

        //Show detected matches
        imshow( "Good Matches", img_matches );

        key = waitKey(1);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:39:03.153

我相信 SURF 检测器不适用于彩色图像。您需要使用灰度加载它们

```
Mat object = imread( "C:\\OpenCV2.3\\sample.jpg",CV_LOAD_IMAGE_GRAYSCALE); 
```

# delphi - Delphi 中是否有一些东西可以更轻松地执行关键字搜索？

> ID：14613169
> 
> 赞同：1
> 
> 时间：2013-01-30T20:32:29.733
> 
> 标签：delphi, search, pattern-matching, delphi-xe2

我当前项目的一部分是将搜索结果（仅限文件名）与搜索字符串（多个单词）进行比较。目前我有一个非常基本的机制来识别结果的相关性，所有这些都由一个函数处理。

搜索开始时，我将搜索字符串拆分为关键字字符串列表...

```
procedure TSearcherThread.ParseKeywords;
var
  S, T: String;
  P: Integer;
begin
  //Clear current list of keywords
  FKeywords.Clear;
  S:= LowerCase(Trim(FSearchString));
  //Remove all excess spaces
  while Pos('  ', S) > 1 do
    S:= StringReplace(S, '  ', ' ', [rfReplaceAll]);
  if Copy(S, Length(S)-1, 1) <> ';' then
    S:= S + ';';
  //Parse out keywords
  while Length(S) > 0 do begin
    P:= Pos(';', S);
    T:= Copy(S, 1, P-1);
    Delete(S, 1, P);
    FKeywords.Append(T);
  end;
end; 
```

现在，当我遍历要搜索的文件的主列表时，我将每个文件名传递给这个函数......

```
function TSearcherThread.MatchKeywords(const Filename: String): Single;
var
  S: String; //Temp keywords
  FN: String; //Filename
  X: Integer; //Iterator
  C: Integer; //Match counter
begin
  Result:= 0; //Default no match
  S:= Trim(LowerCase(FSearchString)); //Lowercase Keywords, trim outside spaces
  FN:= LowerCase(ExtractFileName(Filename)); //Get lowercase filename
  Delete(FN, Pos('.', FN), MAXINT); //Strip off extension leaving only the name

  //Check if exact match
  if FN = S then Result:= 2;

  //If nothing matches yet, then look for individual keywords...
  if Result < 2 then begin
    C:= 0;
    if FKeywords.Count > 0 then begin
      //Iterate through keywords
      for X := 0 to FKeywords.Count - 1 do begin
        //If keyword is found in filename
        if Pos(FKeywords[X], FN) > 0 then begin
          Inc(C);
        end;
      end;
      //Return how often keywords showed up
      Result:= C / FKeywords.Count;
    end;
  end;
end; 
```

它的工作原理是函数传回相关的十进制数。结果 0 表示不匹配，介于 0 和 1 之间表示部分匹配，数字越大表示匹配越好，1 表示找到所有关键字，2 表示完全匹配。我还可以进行比较以仅包含具有一定百分比的结果，如下所示：

```
M:= MatchKeywords(Filename);
if M >= 0.2 then AddResult(Filename); 
```

问题是我上面的方法只考虑了*AND*操作，这意味着它需要所有的关键字，并比较找到了多少关键字。但是，我还想同时实现*AND*和*OR*操作的组合，这是我的结构不支持的。所以我需要重新编写这个函数的核心来使这成为可能。

我想知道的不是如何写这个，而是德尔福中有什么东西可以让这成为可能吗？有人向我提到`TDictionary`哈希表是我需要的，但我不知道它与我正在做的事情有什么关系，因为我从未使用过它们。如果模式匹配已经存在于 Delphi XE2 中，我只是不想重新发明模式匹配的轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:03:55.433

查找某些字符串模式的最简单方法是使用正则表达式引擎。您可以在 FPC 的网站上找到一些免费的单元和包。

[http://wiki.freepascal.org/Regexpr](http://wiki.freepascal.org/Regexpr)

并阅读更多关于[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)的信息。

# html - HTML 页面移动（不是滚动条问题！）

> ID：14613176
> 
> 赞同：0
> 
> 时间：2013-01-30T20:32:51.127
> 
> 标签：html, css

我正在开发一个具有固定底部导航栏和居中内容的非常小的网站。我在每页之间的内容移动有点问题时遇到了问题。

这是网站：http: [//imsja.com/test/index.html](http://imsja.com/test/index.html)

和 CSS：http: [//imsja.com/test/ims.css](http://imsja.com/test/ims.css)

索引、理念、服务和联系我们页面已上传至今。关于哲学和服务，我知道由于滚动条，内容正在发生变化。但内容也会在索引和联系我们页面之间切换（两者都没有滚动条）。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:55:19.867

我认为导航的宽度应该是静态的而不是移动

`#navigation { width: 100%; ->example 1345px or else as you prefer }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:49:38.327

这是因为您在“活动”链接上有不同的风格。为了防止移位，你应该给`#navigation > a`元素一个固定的宽度：

```
#navigation>a{
    display: inline-block; // width won't work on anchors without this
    width: 150px;          // just for example
} 
```

另外，“PORTFOLIO”、“TEAM”、“WHAT'S NEW”页面没有在对应的主播上应用active style，我认为你应该先修复它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:52:54.780

我建议使用 CSS 重置。

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

此外，当我收到此错误时，Chrome 中显示您的自定义字体未加载。

```
Failed to load resource: the server responded with a status of 403 (Forbidden) http://use.typekit.net/c/6ed047/myriad-pro:n9:i9:n7:i7:i4:n4:n6:i6.Xbt:F:2,…6bdfc67868a14a7e75bc1db57140ed45ade213a3fcababd522e3dc685922facee8394858fe 
```

我注意到的第一件事是字体似乎大小不同。这可能使事情看起来正在发生变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T01:15:11.723

我会改变你的导航块有一个这样的持有人：

```
 <div id="navigation">
      <div id="nav-holder">
        <a href="/philosophy.html"><span class="activedropcap">P</span><span class="active">HILOSOPHY</span></a>
        <a href="/services.html"><span class="dropcap">S</span>ERVICES</a>
        <a href="/portfolio.html"><span class="dropcap">P</span>ORTFOLIO</a>
        <a href="/team.html"><span class="dropcap">T</span>EAM</a>
        <a href="/blog.html"><span class="dropcap">W</span>HAT'S <span class="dropcap">N</span>EW</a>
        <a href="/contact.html"> <span class="dropcap">C</span>ONTACT <span class="dropcap">U</span>S </a>
        <div id="rule"><!-- hr-->
        <img src="images/rule.png" width="750" height="5"></div>
      </div>
    </div> 
```

然后，您可以向其中添加样式以集中它

```
 #navigation #nav-holder {
      width: 735px;
      margin: 0px auto;
    } 
```

从#navigation a 中删除这些：

```
 padding-left: 5px;
    padding-right: 5px;
    width: 115px; 
```

将此添加到#navigation a 的末尾：

```
 float: left;
    line-height: 30px;
    padding: 0 25px; 
```

# regex - 固定长度字符串的正则表达式 A 后跟字符 B

> ID：14613177
> 
> 赞同：7
> 
> 时间：2013-01-30T20:32:53.470
> 
> 标签：regex

我正在尝试为正好 8 个字符长的字符串找到一个中规中矩的正则表达式。这 8 个字符应由 a 和 b 组成。

另一种说法是 a{n}b{8-n} 其中 n=0...8

匹配字符串示例：aaaaaaa abbbbbbb aaaabbbb bbbbbbbb

示例不匹配字符串：bbbbaaaa aaaabaaa

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:41:53.800

您可以使用正向前瞻来限制长度，否则，它相当简单。

```
/^(?=[ab]{8}$)a{0,8}b{0,8}$/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T20:48:01.337

有很多方法可以做到这一点。这是另一种选择：

```
/^(?=a*b*$).{8}$/ 
```

当然，您可以切换前瞻中的内容：

```
/^(?=.{8}$)a*b*$/ 
```

# css - 这个css选择器/语法是什么意思？

> ID：14613178
> 
> 赞同：0
> 
> 时间：2013-01-30T20:32:53.790
> 
> 标签：css

> **可能重复：**
> [“>”是什么意思 在 CSS 规则中是什么意思？](https://stackoverflow.com/questions/3225891/what-does-mean-in-css-rules)
> [CSS '>' 选择器；它是什么？](https://stackoverflow.com/questions/4459821/css-selector-what-is-it)

什么意思：

```
#nav > li > ul 
```

谷歌忽略了 > 我不知道这意味着什么。我的意思是“>”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:33:36.330

指示元素应该是直接子元素，`>`而不仅仅是后代。

* * *

给定以下 HTML：

```
<div id="nav">
    <ul>
        <li></li>
    </ul>
</div> 
```

以下 CSS 选择器将匹配列表项：

```
#nav li { } 
```

虽然这个不会：

```
#nav > li { } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:39:08.163

你不是说`#nav > ul > li`吗？

在这种情况下，这将意味着“选择作为`li`标签的子标签的标签，该`ul`标签本身就是具有 id 的元素的子标签`nav`。

```
<div id="nav">
    <ul>
        <li>The css selector locates this list item</li>
    </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T20:34:00.837

`>`是一个子选择器。这意味着它将匹配直接子代，而不是其他嵌套的子代。

例如，这个 css:`div > p > span`将匹配这个 HTML：

```
<div>
    <p><span>...</span></p>
</div> 
```

但不是这个 HTML：

```
<div>
    <p>
        <ul>
            <li><span> ... </span></li>
        </ul>
    </p>
</div> 
```

在您的示例中，您的 CSS 将匹配如下结构：

```
<ul id="nav">
   <li>
        <ul> <-- this one gets matched
... 
```

在没有看到 CSS 的其余部分的情况下，我假设它是在导航元素中设置嵌套子菜单的样式。

# java - 新手帮助 - Java 货币计算器

> ID：14613181
> 
> 赞同：0
> 
> 时间：2013-01-30T20:33:06.910
> 
> 标签：java

我对java完全陌生，我的第一个任务是制作一个从美元到挪威克朗（挪威克朗）的货币计算器。并且该程序应该计算并显示如何最有效地在所有挪威支付单位中兑现这笔金额。我一直在尝试一整天，但一无所获。谁能帮我解决我的代码？

这是我的代码：

```
/*
 * Valutacalc
 *
 */

import static java.lang.System.*;
import static java.lang.Integer.*;
import static javax.swing.JOptionPane.*;

public class Kalkulator {
    public static void main(String[] args) {
        // Leser verdi fra brukeren
        String tallTxt = showInputDialog("Antall US Dollar");
        int dollar = parseInt(tallTxt);
        double valuta = 5,49;
        // Beregner svarene av regnearbeidet /
        int svar1 = dollar * valuta;
        //Skriv ut resultat
        showMessageDialog(null,   dollar  * " * " valuta " = " + svar1 + "\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:34:54.360

代替

```
double valuta = 5,49; 
```

经过

```
double valuta = 5.49; 
```

因为java中的小数点是'.' 不是 '，'。

可能您还想将类型更改`svar1`为`double`

也改变：

```
 showMessageDialog(null,   dollar  * " * " valuta " = " + svar1 + "\n"); 
```

到

```
 showMessageDialog(null,   dollar  + " * " + valuta + " = " + svar1 + "\n"); 
```

孔代码：

```
public static void main(String[] args) {
    // Leser verdi fra brukeren
    String tallTxt = showInputDialog("Antall US Dollar");
    int dollar = parseInt(tallTxt);
    double valuta = 5.49;
    // Beregner svarene av regnearbeidet /
    double svar1 = dollar * valuta;   
    //Skriv ut resultat
    showMessageDialog(null,   dollar  + " * " + valuta + " = " + svar1 + "\n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:02:53.807

将产品转换为`double`价值，即：`int svar1 = (int)(dollar * valuta);`，但你会失去小数部分。更好的方法是声明`svar1`为`double`: `double svar1 = dollar * valuta`。然后，当您打开消息对话框时，您需要正确构造消息字符串。因此，如果您想将不同的因素连接到一个字符串中，您需要使用`+`运算符（并且您必须确保这些因素中至少有一个实际上是一个字符串）。所以你需要：

> `showMessageDialog(null, dollar + " * " + valuta + " = " + svar1 + "\n");`

但是如果你想对格式有更多的控制，你应该考虑使用类`format`的方法`String`（从 1.5 开始；[参见 javadoc 中的 String.format 解释](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)）。最终你可以使用这个：

> `showMessageDialog(null, String.format("%0.2f * %0.2f = %0.2f\n", dollar, valuta, svar1));`

* * *

好吧，你现在实际上要求别的东西。好的，看这个（带有使用示例）：

```
private static final int[] PAYMENT_UNITS = {
    1000, 500, 200, 100, 50, 20, 10, 5, 1
};

public static void main(final String[] args) {
    printCashOut(split(2004307));
}

private static final void printCashOut(final int[] cacheOut) {
    int total = 0;
    for (int i = 0; i < PAYMENT_UNITS.length; i++) {
        final int p = cacheOut[i] * PAYMENT_UNITS[i];
        System.out.printf("%4d x %4d = %8d\n",
                cacheOut[i],
                PAYMENT_UNITS[i],
                p
            );
        total += p;
    }
    System.out.printf("       TOTAL: %8d\n", total);
}

private static final int[] split(final int amount) {
    if (amount < 0) {
        return null;
    }
    final int[] cashOut = new int[PAYMENT_UNITS.length];
    int rest = amount;
    for (int i = 0; i < PAYMENT_UNITS.length; i++) {
        cashOut[i] = rest / PAYMENT_UNITS[i];
        rest -= cashOut[i] * PAYMENT_UNITS[i];
    }
    return cashOut;
} 
```

# php - php中的多维for循环

> ID：14613183
> 
> 赞同：1
> 
> 时间：2013-01-30T20:33:17.790
> 
> 标签：php, arrays, multidimensional-array

我有以下 print_r，它源自“多个（不是错字）文件上传”。

```
Array
(
[file] => Array
    (
        [name] => Array
            (
                [1] => Array
                    (
                        [0] => IMG_8502 f 5 .jpg
                        [1] => IMG_8507 f 5 .jpg
                    )

                [2] => Array
                    (
                        [0] => IMG_8508 f 5 .jpg
                        [1] => IMG_8529 f 5 .jpg
                        [2] => IMG_8612 fff 5 .jpg
                    )

                [3] => Array
                    (
                        [0] => IMG_8502 f 5 .jpg
                        [1] => IMG_8507 f 5 .jpg
                    )

            )

        [type] => Array
            (
                [1] => Array
                    (
                        [0] => image/jpeg
                        [1] => image/jpeg
                    )

                [2] => Array
                    (
                        [0] => image/jpeg
                        [1] => image/jpeg
                        [2] => image/jpeg
                    )

                [3] => Array
                    (
                        [0] => image/jpeg
                        [1] => image/jpeg
                    )

            )

        [tmp_name] => Array
            (
                [1] => Array
                    (
                        [0] => C:\wamp\tmp\php1CC.tmp
                        [1] => C:\wamp\tmp\php1FC.tmp
                    )

                [2] => Array
                    (
                        [0] => C:\wamp\tmp\php23B.tmp
                        [1] => C:\wamp\tmp\php26B.tmp
                        [2] => C:\wamp\tmp\php2AB.tmp
                    )

                [3] => Array
                    (
                        [0] => C:\wamp\tmp\php2CB.tmp
                        [1] => C:\wamp\tmp\php30A.tmp
                    )

            )

        [error] => Array
            (
                [1] => Array
                    (
                        [0] => 0
                        [1] => 0
                    )

                [2] => Array
                    (
                        [0] => 0
                        [1] => 0
                        [2] => 0
                    )

                [3] => Array
                    (
                        [0] => 0
                        [1] => 0
                    )

            )

        [size] => Array
            (
                [1] => Array
                    (
                        [0] => 2776165
                        [1] => 2380025
                    )

                [2] => Array
                    (
                        [0] => 2456713
                        [1] => 2585779
                        [2] => 1770128
                    )

                [3] => Array
                    (
                        [0] => 2776165
                        [1] => 2380025
                    )

            )

    ) 
```

)

```
<?php
if(isset($_FILES['file'])=== true){
$files = $_FILES['file'];
for($x = 0; $x < count($files['name'][$x]); $x++){
    $file_name = $files['name'][$x];
    $tmp_name = $files['tmp_name'][$x];
    move_uploaded_file($tmp_name, 'documents/'.$file_name);
}}?> 
```

我想我需要嵌入另一个 for 循环来访问实际名称和 tmp 数组... name1、name2、name3。我希望能够访问每个子数组，以便可以相应地移动它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:43:17.060

我认为您处理此问题的最佳方法是重构生成数组的代码，以便将相关字段放在一起。也许是这样的结构：

```
Array
(
[file] => Array
    (
        [0] => Array
            (
                [0] => Array
                    (
                        [name] => IMG_8502 f 5 .jpg
                        [type] => image/jpeg
                    )
... 
```

然后你可以遍历文件：

```
foreach($files as $upload) {
    foreach($upload as $file) {
        move_uploaded_file($file['tmp_name'], 'documents/'.$file['name']);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:14:34.713

我用这样的东西，试试看；

```
function assoc($files) {
    // single image
    if (!is_array($files['name'])) {
        return $files;
    }

    // multiple images
    $assoc = array();
    foreach ($files as $key => $array) {
        foreach ($array as $i => $value) {
            $assoc[$i][$key] = $value;
        }
    }

    return $assoc;
}

echo '<form method="post" action="" enctype="multipart/form-data">
        File 1: <input type="file" name="file[]">
        File 2: <input type="file" name="file[]">
        <input type="submit" name="submit" value="Send">
      </form>';

// and using
if (isset($_FILES['file'])) {
    $files = assoc($_FILES['file']);
    foreach ($files as $i => $file) {
        $move =@ move_uploaded_file($file['tmp_name'], 'documents/'. $file['name']);
        if ($move === true) {
            // remove moved file from array stack
            unset($files[$i]);
        }
    }
}

// display not moved files
print_r($files);

// flash errors
if (!empty($files)) {
    foreach ($files as $file) {
        print $file['name'] ." not uploaded!\n";
    }
} 
```

出局；

```
// print_r($_FILES);
// print_r(assoc($_FILES['file']));
大批
(
    [文件] => 数组
        (
            [名称] => 数组
                (
                    [0] => 蝴蝶壁纸-蝴蝶-604274_1024_768.jpg
                    [1] => 冬季壁纸-by_karil.png
                )

            [类型] => 数组
                (
                    [0] => 图像/JPEG
                    [1] => 图片/png
                )

...

大批
(
    [0] => 数组
        (
            [名称] => 蝴蝶壁纸-蝴蝶-604274_1024_768.jpg
            [类型] => 图像/JPEG
            [tmp_name] => C:\Windows\Temp\php4C16.tmp
            [错误] => 0
            [大小] => 212399
        )

    [1] => 数组
        (
            [名称] => winter-wallpaper-by_karil.png
            [类型] => 图片/png
            [tmp_name] => C:\Windows\Temp\php4C36.tmp
            [错误] => 0
            [大小] => 146146
        )

)

```

# sql - 将 1 行插入另一个表并更新原始行。对于多行

> ID：14613196
> 
> 赞同：0
> 
> 时间：2013-01-30T20:33:50.467
> 
> 标签：sql, for-loop, cursor

我有 2 个表，一个是我的生产表（PROD），另一个是我的日志表（JOUR）（JOUR 与 PROD 具有相同的字段）

最近生产中的一个错误导致生产中的某些行无法更新。wp 我在 SQL 中要做的如下。

1) 选择 Prod 中 Condition='A' 和 Type = ' ' 的所有行

2）将第一行复制到JOUR

3) 将第一行的类型设置为“C”

4) 对符合 1 中条件的其余行重复 3 和 4

我不能只在 JOUR 中选择 PROD，然后更新 PROD 中满足条件的所有行。

我对 SQL 相当陌生，并且很难做到这一点。在 OOP 中，我只会使用 for

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:04:16.340

[输出子句](http://msdn.microsoft.com/en-us/library/ms177564.aspx)应该能让你到达那里。[输出子句的好教程](http://www.mssqltips.com/sqlservertip/2183/using-insert-output-in-a-sql-server-transaction/)

# javascript - 如何允许最终用户为此模式定义多个命名空间扩展级别？

> ID：14613201
> 
> 赞同：1
> 
> 时间：2013-01-30T20:34:02.553
> 
> 标签：javascript, design-patterns, javascript-namespaces

以这段代码为例：

```
(function(foo) {

    foo.init = function() {};

    // other public/private methods here.

    return foo;

}(window.FOO = window.FOO || {})); 
```

我这样称呼它：

```
FOO.init(); 
```

是否可以允许用户定义是什么`FOO`？

换句话说，我需要允许多个实例`window.FOO`; 例如，喜欢`window.BILLY`和`window.BAZ`（或者，应该是`window.billy.FOO`和`window.baz.FOO`？）。

换句话说，是否有一种优雅的方式（允许用户）使用上述构造和初始化的变体来命名“命名空间”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:39:53.600

和是`windows.billy.FOO`首选`windows.baz.FOO`。

阅读[Addy Osmani 的 Essential JS Namespacing Patterns](http://addyosmani.com/blog/essential-js-namespacing/)以加快速度（最相关的部分：Deep object extension）。

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:43:21.267

如果我对您的理解正确，您想更改上面的代码，使其名称`FOO`是动态的。你可以这样做，使用 [] 属性访问器：

```
function initFoo(fooName) {
    (function(foo) {

        foo.init = function() {};

        // other public/private methods here.

        return foo;

    }(window[fooName] = window[fooName] || {}));
}

initFoo('FOO');
initFoo('BILLY'); 
```

但我不确定这会有什么意义，你的例子很抽象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T20:38:18.373

您可能想查看 RequireJS：[http ://requirejs.org/docs/start.html](http://requirejs.org/docs/start.html)

它可能具有您正在寻找的最终用户功能。

# python - Pyramid + ZODB 图像存储

> ID：14613206
> 
> 赞同：1
> 
> 时间：2013-01-30T20:34:26.177
> 
> 标签：python, pyramid, zodb

我有一个接受 zip 文件的上传表单，并有一个解压缩它并从中获取每个文件的方法。从它的 md5 哈希中创建一个唯一的 id 并将它们存储在字典中；

```
dict[uid] = imagebinary 
```

并返回它以便表单可以将它们存储到 ZODB 中。我不能像这样存储图像，因为这个错误会吐出来；

```
 2013-01-31 08:59:59,061 ERROR [waitress][Dummy-5] Exception when serving /
Traceback (most recent call last):
  File "/home/maverick/inigo/sources/devenv/lib/python2.7/site-packages/waitress-0.8.2-py2.7.egg/waitress/channel.py", line 329, in service
    task.service()
  File "/home/maverick/inigo/sources/devenv/lib/python2.7/site-packages/waitress-0.8.2-py2.7.egg/waitress/task.py", line 173, in service
    self.execute()
  File "/home/maverick/inigo/sources/devenv/lib/python2.7/site-packages/waitress-0.8.2-py2.7.egg/waitress/task.py", line 380, in execute
    app_iter = self.channel.server.application(env, start_response)
  File "/home/maverick/.buildout/eggs/pyramid-1.4-py2.7.egg/pyramid/router.py", line 251, in __call__
    response = self.invoke_subrequest(request, use_tweens=True)
  File "/home/maverick/.buildout/eggs/pyramid-1.4-py2.7.egg/pyramid/router.py", line 227, in invoke_subrequest
    response = handle_request(request)
  File "/home/maverick/inigo/sources/devenv/lib/python2.7/site-packages/pyramid_debugtoolbar-1.0.4-py2.7.egg/pyramid_debugtoolbar/toolbar.py", line 133, in toolbar_tween
    body = tb.render_full(request).encode('utf-8', 'replace')
  File "/home/maverick/inigo/sources/devenv/lib/python2.7/site-packages/pyramid_debugtoolbar-1.0.4-py2.7.egg/pyramid_debugtoolbar/tbtools.py", line 240, in render_full
    summary = self.render_summary(include_title=False, request=request)
  File "/home/maverick/inigo/sources/devenv/lib/python2.7/site-packages/pyramid_debugtoolbar-1.0.4-py2.7.egg/pyramid_debugtoolbar/tbtools.py", line 229, in render_summary
    'description':  description_wrapper % escape(self.exception),
UnicodeDecodeError: 'ascii' codec can't decode byte 0xef in position 114: ordinal not in range(128) 
```

那么，我该怎么做呢？我几乎坚持这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:21:57.627

您看到的错误与 ZODB 中的图像存储无关。

要存储更大的数据，您确实希望使用 ZODB `Blob`，而不是将图像数据直接放在属性中。`Blob`s 单独存储在磁盘上，不会刷新 ZODB 缓存，并且可以在再次访问时流回客户端。

要创建和存储 a `Blob`，请使用：

```
from ZODB.blob import Blob

uid = Blob(imagebinary.read()) 
```

像这样创建后，您可以稍后将`uid`其用作文件；您需要先以读取或写入模式打开它。例如，要从视图返回 blob 的内容，请使用：

```
from pyramid.response import Response

def serveimage(request):
    # retrieve uid from somewhere
    resp = Response(content_type='image/jpeg')
    resp.app_iter = uid.open('r')  # open for reading
    return resp 
```

Blob 绑定到事务，如果事务回滚，对它们的更改会自动丢弃。

# php - 从存储为类成员的字符串调用类方法

> ID：14613210
> 
> 赞同：1
> 
> 时间：2013-01-30T20:34:46.920
> 
> 标签：php, method-call

我正在尝试调用存储为的方法`$_auto`，但它不起作用。

```
<?php
    class Index {
        private $_auto;

        public function __construct() {
            $this->_auto = "index";
            $this->_auto();
        }

        public function index() {
            echo "index";
        }
    }

    $index = new Index();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:36:44.697

您需要使用[`call_user_func`](http://php.net/manual/en/function.call-user-func.php)来执行此操作：

```
call_user_func(array($this, $this->_auto)); 
```

不幸的是，PHP 不允许您直接将属性值用作[可调用对象](http://php.net/manual/en/language.types.callable.php)。

还有一个技巧可以用来自动调用这样的可调用对象。我不确定我会支持它，但它就是这样。将此实现添加`__call`到您的类中：

```
 public function __call($name, $args)
 {
     if (isset($this->$name) && is_callable($this->$name)) {
         return call_user_func_array($this->$name, $args);
     }
     else {
         throw new \Exception("No such callable $name!");
     }
 } 
```

这将允许您调用可调用对象，因此您可以调用自由函数：

```
 $this->_auto = 'phpinfo';
 $this->_auto(); 
```

和类方法：

```
 $this->_auto = array($this, 'index');
 $this->_auto(); 
```

当然，您可以通过调整`__call`调用的内容来自定义此行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:37:20.100

你没有一个名为的方法`_auto()`，你只有一个名为的属性`$_auto`。如果您的意图是调用未定义的方法以返回类似名称的属性（如果存在），那么您需要编写一个`__call()`魔术方法来执行查看类似名称的属性并返回值的逻辑。所以像这样的东西需要添加到你的类中：

```
public function __call($called_method, $arguments) {
    if(property_exists($this, $called_method)) {
        return $this->{$called_method};
    } else {
        throw new Exception('Illegal method call.');
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:41:19.420

您的代码试图调用一个名为“_auto”的方法。要按照您的要求进行操作，您希望将方法名称设为 php 变量或其他海报所说的内容。

```
class Foo {
    private function _auto() {
        echo "index";
    }

    public function callmethod($method) {
        $this->$method();
    }
}

$foo = new Foo();
$foo->callmethod('_auto'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T20:51:21.580

我认为您错误地将“_auto”定义为属性？

尝试使用：

```
private function _auto(){} 
```

代替

```
private $_auto 
```

# silverstripe - SilverStripe GridField：向“添加”按钮添加“类型”下拉列表

> ID：14613211
> 
> 赞同：0
> 
> 时间：2013-01-30T20:34:53.867
> 
> 标签：silverstripe

我目前正在尝试在 GridField 中管理一个类的项目以及子类的项目（想想一个包含“Apple”和“Banana”项目的 GridField，这两个项目都是“Fruit”的子类）。

我已经找到了如何使用详细信息表单中的某个 ClassName 下拉菜单来切换项目的类（正如它在 SiteTree 项目的“设置”选项卡中包含的“页面类型”下拉菜单中完成的那样），并且工作正常。

我现在想做的是已经在创建时选择了子类，在 GridField 的“添加”按钮旁边有一个包含所有类的下拉列表。不幸的是，“添加”按钮似乎在 LeftAndMain 中调用了一些“EditForm”操作，我不知道从这里去哪里。

有谁知道这是否可以扩展一些 GridFields 的类等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:19:31.387

这个功能会非常有用，所以我在我的网格字段扩展模块中实现了它：[有问题的提交](https://github.com/ajshort/silverstripe-gridfieldextensions/commit/d7a9d470f9517b1126fc26f0b88106c324ec6273)。

[网格字段扩展模块](https://github.com/ajshort/silverstripe-gridfieldextensions)

要启动并运行它，请执行以下代码。它将自动使用父类和任何子类填充下拉列表，并让用户选择要创建的类型。

```
$config = $grid->getConfig();
$config->removeComponentsByType('GridFieldAddNewButton');
$config->addComponent(new GridFieldAddNewMultiClass()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T03:52:02.597

我刚刚在 SS 3.1 中做了类似的事情，它是一个 2 步过程，但可以修改为 1 步。

在您的超类中，在 getCMSFields() 中为“ClassName”添加一个下拉列表，例如：

```
public function getCMSFields() {
    $fields = parent::getCMSFields();
    $fields->addFieldToTab("Root.Main", 
        new DropdownField("ClassName", "Type", 
            array(
                "Apple" => "Apple", 
                "Banana" => "Banana",

            )
        )
    );

    return $fields;
} 
```

然后，当他们在该页面上单击保存时，它将显示所选子类的获取 CMS 字段。

# asp.net-mvc - 当我指定名称时，Html.DropDownList 所选值不起作用

> ID：14613213
> 
> 赞同：0
> 
> 时间：2013-01-30T20:34:58.437
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我试图在呈现页面时从下拉列表中选择特定选项。

在我的控制器上，我有以下代码：
`ViewBag.PropertyId = new SelectList(db.Properties, "PropertyId", "PropertyName", id.ToString());`

在我看来，这不起作用。所选选项始终是第一个选项。
`@Html.DropDownList("PropertyId", (SelectList)ViewBag.PropertyId)`

这在我看来确实有效，选择了正确的选项。但是，我无法保存它，因为我需要选择列表的名称为 PropertyId，以便正确发布。
`@Html.DropDownList("sadgfsadsaf", (SelectList)ViewBag.PropertyId)`

有人可以帮我理解我应该在这里做什么吗？我知道我应该使用视图模型而不是 Viewbag，但我只想先让它工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:44:50.497

我以前遇到过同样的问题，这是一个名称冲突。尝试更改您的下拉列表和/或值名称，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:27:18.023

当您再次回发到同一个控制器和视图时，也可能会发生名称冲突，但想要更改控制器中的状态。

它将在 ModelState 对象中保留发布的模型状态，并在渲染视图中恢复发布的状态。为了更改控制器中的模型状态，您必须`ModelState.Remove("PropertyId")`立即执行或设置它：

```
ModelState["PropertyId"].Value = new System.Web.Mvc.ValueProviderResult(id.ToString(), id.ToString(), System.Globalization.CultureInfo.CurrentCulture); 
```

# c# - 在 FTP 服务器上创建目录

> ID：14613217
> 
> 赞同：2
> 
> 时间：2013-01-30T20:35:15.847
> 
> 标签：c#, ftp

我正在尝试在我的 FTP 服务器上创建一个目录。谷歌搜索[在这里向我展示了这个问题。](https://stackoverflow.com/questions/860638/how-do-i-create-a-directory-on-ftp-server-using-c) 所以我按照乔恩写的作为他的答案，并且有：

```
 private static void MakeDirectory(string directory)
    {
        Log("Making directory...");

        var request = (FtpWebRequest)WebRequest.Create(directory);

        request.Method = WebRequestMethods.Ftp.MakeDirectory;
        request.Credentials = new NetworkCredential("user", "pass");

        try
        {
            using (var resp = (FtpWebResponse)request.GetResponse()) // Exception occurs here
            {
                Log(resp.StatusCode.ToString());
            }
        }
        catch (WebException ex)
        {
            Log(ex.Message);
        }
    } 
```

我有一种方法来验证目录是否存在：

```
 public bool DirectoryExists(string directory)
    {
        bool directoryExists;

        var request = (FtpWebRequest)WebRequest.Create(directory);
        request.Method = WebRequestMethods.Ftp.ListDirectory;
        request.Credentials = new NetworkCredential("user", "pass");

        try
        {
            using (request.GetResponse())
            {
                directoryExists = true;
            }
        }
        catch (WebException)
        {
            directoryExists = false;
        }
        return directoryExists;
    } 
```

检查确实有效。如果存在，则返回`true`，如果不存在，则返回`false`。但是，每当我运行 my 时`MakeDirectory()`，都会在上述行中出现异常：

```
The remote server returned an error: (550) File unavailable (e.g., file not found, no access). 
```

我错过了什么吗？为什么`GetResponse()`我的目录检查工作，而不是我的工作`MakeDirectory()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:44:50.563

事实证明，这是运行我们网络服务器的公司的一个问题。他们昨晚做了一些 FTP 更新，不仅影响了我自己，还影响了他们所有的客户。他们已经解决了这个问题。他们只花了一天的时间就承认这是他们的错。

# python - python os库源码位置

> ID：14613223
> 
> 赞同：14
> 
> 时间：2013-01-30T20:35:28.737
> 
> 标签：python

我处于学习模式——这可能是一个愚蠢或 rtfm 的问题，但它是：Python os 库的源代码在哪里？我已经下载了 Python 压缩包。那里有很多用法，但似乎找不到源代码本身以及它如何与操作系统挂钩。我很想看看 os.* 调用（例如 os.read、os.write...）做了什么。我查看了 *builtin* 文件，但没有看到任何内容。感谢您的提示。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-30T20:45:00.117

`os`的实现分散在许多文件中。

核心 C 函数主要位于[Modules/posixmodule.c](http://hg.python.org/cpython/file/v2.7.3/Modules/posixmodule.c)中，尽管它的名称，除了 POSIX 例程之外，它还包含 Windows NT 和 OS/2 上的 OS 例程的实现。

C 函数的包装器位于[Lib/os.py](http://hg.python.org/cpython/file/v2.7.3/Lib/os.py)中，`os.path`函数由[Lib/ntpath.py](http://hg.python.org/cpython/file/v2.7.3/Lib/ntpath.py)或[Lib/posixpath.py](http://hg.python.org/cpython/file/v2.7.3/Lib/posixpath.py)提供，具体取决于您的平台。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T20:38:38.183

如果一个模块是在 Python 代码中定义的，您可以`__file__`在导入后通过检查模块的属性来找到该文件：

```
>>> import os
>>> os.__file__
'C:\\python27\\lib\\os.pyc' 
```

如果文件是 .pyc，则只需删除最后一个“c”即可获取 .py 文件。

但是，您要查找的函数实际上可能是从已编译的 C 扩展中导入的。

# php - PHP邮件未发送，但结果为真

> ID：14613234
> 
> 赞同：0
> 
> 时间：2013-01-30T20:35:48.840
> 
> 标签：php, mailer

我使用 phpmailer 发送电子邮件。在一个脚本中，代码运行良好，在其他例子中，结果为真，但没有邮件送达。错误日志为空，您建议检查什么？谢谢

```
include_once '/var/www/xxxxxx.cz/web/php/phpmailer.php';
$to = 'dubcznic@gmail.com';
$to_name = '';
$from = 'robot@xxxxxx.cz';
$from_name = 'Robot';
$mail = new phpmailer();
$mail->CharSet = 'UTF-8';
$mail->From = $from;
$mail->FromName = $from_name;
$mail->AddAddress($to, $to_name);  // Add a recipient
$mail->AddCC('nabytek-safr@xxxx.cz');
$mail->WordWrap = 50;     // Set word wrap to 50 characters
$mail->IsHTML(true);      // Set email format to HTML
$mail->Subject = 'Import Robot Autronic';
$mail->Body = 'xxx';
$mail->AltBody = str_replace("<br />", "\n", 'xxx');
if (!$mail->Send())
{
    echo 'Mail Error: ' . $mail->ErrorInfo;
    exit;
}
else
{
    echo 'OK';
}

die(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:39:24.603

检查您发送的文本。可能是您的结果被过滤掉并放入垃圾邮件文件夹。有时，标题中带有“测试”的邮件可能会直接发送到垃圾邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T12:27:46.330

You can validate real emails with Telnet and MX records. See this answers [https://stackoverflow.com/a/17332773/468891](https://stackoverflow.com/a/17332773/468891)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:45:07.377

无法验证电子邮件是否使用 PHP 传递。

检查您的邮件服务器日志（通常是 /var/log/mail）以查看电子邮件是否已发送。

向您知道没有垃圾邮件过滤器的电子邮件地址发送密件抄送。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-15T17:05:14.407

首先，检查您的垃圾邮件，如果您还没有的话。

其次，将您的 SMTP 设置更改为 gmail 的设置，输入您的 gmail 登录名和密码并尝试。如果邮件无法投递，您将收到一封投递失败通知，其中包含可能的失败原因，这很有帮助。当 PHP 中没有显示错误时，也可能发生交付失败。这总是对我有帮助。

# payment-gateway - Quickbooks Merchant Services + Scheduled Payment + Integration with Quickbooks Online Application

> ID：14613242
> 
> 赞同：1
> 
> 时间：2013-01-30T20:36:13.303
> 
> 标签：payment-gateway, quickbooks-online

I'm in the process of creating some basic code to interface with QBO & QBMS. I basically need to create a customer in QBO, and create a recurring payment for them in QBMS via the SDK/API. What method should I use to create an association between the recurring payment and the customer? -- I am hoping there is an out-of-the-box way to do this that I am missing.

It *seems* like I am speaking of [reconciliation](https://ipp.developer.intuit.com/0085_QuickBooks_Windows_SDK/030_qbms/0070_Advanced_Topics/QuickBooks_Integration#QBMS_and_QuickBooks_Online) - however the fact that site says "Desktop and hosted applications can integrate with QuickBooks Online (QBO). However, QBO does not currently support the Reconciliation feature." is a little concerning.

Thank you in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:02:53.643

> What method should I use to create an association between the recurring payment and the customer?

There isn't one. As far as APIs are concerned, the APIs for QuickBooks and the APIs for QuickBooks Merchant Services are entirely independent, and they don't really "interact" with each other in any way.

It would be your application's job to maintain an association between the QuickBooks customer, and the stored "wallet ID" for the credit card information and scheduled billing information. It would also be your application's job to actually push a record of the credit card charge over into QuickBooks for each transaction (e.g. QuickBooks Merchant Services just charges cards, it doesn't push any info into QuickBooks automatically).

We have some wiki info on [QuickBooks Merchant Services integration APIs](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_qbms_integration) on our website.

You can then look into the QuickBooks Online APIs (either [Intuit Anywhere](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere) or the [QuickBooks Online SDK](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_online_edition) to push the data to QuickBooks.

> It seems like I am speaking of reconciliation

Not really. Reconciliation is the process of matching up the payments you recorded in QuickBooks, with the money that actually got deposited into your bank account, less the fees. You can't even do reconciliation without first making the charges and getting the data into QuickBooks somehow.

It's might be worth looking into software out there that is specifically geared towards what you're looking to do - I know at least [ChargeOver does recurring billing and integrates with QuickBooks](http://chargeover.com/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:39:57.093

SO. I managed to get through to someone @ Inuit and ask them this question. TL; DR; No, this isn't possible.

If you'd like to do this, you'll need to use the QBMS API (qbXml) to create the charge. You will then need to use either IPP or Qbms to interface with QB to create a transaction. There won't be any formal link between the record in merchant services and in quickbooks. It's a little informal for my tastes.

# c++ - 对 std::cin >> 的调用不会阻塞

> ID：14613243
> 
> 赞同：1
> 
> 时间：2013-01-30T20:36:15.957
> 
> 标签：c++

我有一个 C++ 控制台应用程序，它通过显示菜单然后对其进行操作来获取用户的输入。当用户输入整数值但当用户输入 ' 时，一切**正常** '（我想将其作为“显示帮助”选项处理）代码开始无限循环并且不会阻塞`std::cin>>`调用。这是预期的吗？我在这里想念什么？

```
int queryAction()
{
  while(1) {
    char selection;
    std::cout << "Action: ";
    std::cin >> selection;

    switch(selection)
    {
      //Some code that acts on the selection
      ...
    }
  }
} 
```

**跟进：** 如果我`std::cin.clear()`在调用`cin>>`所有之前添加是好的。我想我的后续问题是为什么在输入上设置的错误状态应该是有效的 ascii 字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T21:12:21.597

你永远不会检查阅读是否成功。任何编程的一个基本部分是正确的错误处理。`std::cin >> selection;`如果 a`char`无法从流中读取，则将失败，或者在`eofbit`到达源末尾时设置 。

检查这一点的一种简单方法是使用以下内容：

```
if (!(std::cin >> selection)) // Check if operation failed
{
    std::cout << "Failed to read!\n"; // Notify user
    std::cin.clear(); // Reset stream
    // Ignore rest of line
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
} 
```

# perl - 为什么编码，然后解码字符串会使阿拉伯字符失去上下文？

> ID：14613244
> 
> 赞同：10
> 
> 时间：2013-01-30T20:36:39.850
> 
> 标签：perl, unicode, arabic

我（迟来的）第一次测试 Unicode 水域并且我无法理解为什么编码的过程，然后解码一个阿拉伯字符串会产生分离出单词组成的单个字符的效果。

在下面的示例中，单词“ﻟﻠﺒﻴﻊ”由 5 个单独的字母组成：“ع”、“ي”、“ب”、“ل”、“ل”，从右到左书写。根据周围的上下文（相邻的字母），字母会改变形式

* * *

```
use strict;
use warnings;
use utf8;

binmode( STDOUT, ':utf8' );

use Encode qw< encode decode >;

my $str = 'ﻟﻠﺒﻴﻊ';                 # "For sale" 
my $enc = encode( 'UTF-8', $str );
my $dec = decode( 'UTF-8', $enc );

my $decoded = pack 'U0W*', map +ord, split //, $enc;

print "Original string : $str\n";     #  ل ل ب ي ع   
print "Decoded string 1: $dec\n"      #  ل ل ب ي ع
print "Decoded string 2: $decoded\n"; #  ل ل ب ي ع 
```

* * *

**附加信息**

*   将字符串粘贴到此帖子时，呈现反转，因此看起来像“ﻊﻴﺒﻠﻟ”。我正在手动反转它以使其看起来“正确”。正确的 hexdump 如下所示：

    ```
    $ echo "ﻟﻠﺒﻴﻊ" | hexdump
    0000000 bbef ef8a b4bb baef ef92 a0bb bbef 0a9f
    0000010 
    ```

*   Perl 脚本的输出（根据 ikegami 的要求）：

    ```
    $ perl unicode.pl | od -t x1
    0000000 4f 72 69 67 69 6e 61 6c 20 73 74 72 69 6e 67 20
    0000020 3a 20 d8 b9 d9 8a d8 a8 d9 84 d9 84 0a 44 65 63
    0000040 6f 64 65 64 20 73 74 72 69 6e 67 20 31 3a 20 d8
    0000060 b9 d9 8a d8 a8 d9 84 d9 84 0a 44 65 63 6f 64 65
    0000100 64 20 73 74 72 69 6e 67 20 32 3a 20 d8 b9 d9 8a
    0000120 d8 a8 d9 84 d9 84 0a
    0000127 
    ```

    如果我只是打印`$str`：

    ```
    $ perl unicode.pl | od -t x1
    0000000 4f 72 69 67 69 6e 61 6c 20 73 74 72 69 6e 67 20
    0000020 3a 20 d8 b9 d9 8a d8 a8 d9 84 d9 84 0a
    0000035 
    ```

    最后（根据ikegami的要求）：

    ```
    $ grep 'For sale' unicode.pl | od -t x1
    0000000 6d 79 20 24 73 74 72 20 3d 20 27 d8 b9 d9 8a d8
    0000020 a8 d9 84 d9 84 27 3b 20 20 23 20 22 46 6f 72 20
    0000040 73 61 6c 65 22 20 0a
    0000047 
    ```

*   Perl 细节

    ```
    $ perl -v

    This is perl, v5.10.1 (*) built for x86_64-linux-gnu-thread-multi
    (with 53 registered patches, see perl -V for more detail) 
    ```

*   输出到文件反转字符串：“ﻊﻴﺒﻠﻟ”

* * *

**问题**

我有一些：

*   如何在打印时保留每个字符的上下文？

*   为什么原始字符串作为单个字母打印到屏幕上，即使它没有被“处理”？

*   打印到文件时，单词是相反的（我猜这是由于脚本的从右到左的性质）。有什么办法可以防止这种情况发生吗？

*   为什么以下不成立：`$str !~ /\P{Bidi_Class: Right_To_Left}/;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:57:37.237

*   StackOverflow 返回的源代码（使用 获取`wget`）：

    ```
    ... ef bb 9f ef bb a0 ef ba 92 ef bb b4 ef bb 8a ...

    U+FEDF ARABIC LETTER LAM INITIAL FORM
    U+FEE0 ARABIC LETTER LAM MEDIAL FORM
    U+FE92 ARABIC LETTER BEH MEDIAL FORM
    U+FEF4 ARABIC LETTER YEH MEDIAL FORM
    U+FECA ARABIC LETTER AIN FINAL FORM 
    ```

*   `perl`我从 StackOverflow 返回的源代码中得到的输出：

    ```
    ... ef bb 9f ef bb a0 ef ba 92 ef bb b4 ef bb 8a 0a
    ... ef bb 9f ef bb a0 ef ba 92 ef bb b4 ef bb 8a 0a
    ... ef bb 9f ef bb a0 ef ba 92 ef bb b4 ef bb 8a 0a

    U+FEDF ARABIC LETTER LAM INITIAL FORM
    U+FEE0 ARABIC LETTER LAM MEDIAL FORM
    U+FE92 ARABIC LETTER BEH MEDIAL FORM
    U+FEF4 ARABIC LETTER YEH MEDIAL FORM
    U+FECA ARABIC LETTER AIN FINAL FORM
    U+000A LINE FEED 
    ```

    所以我应该得到源代码中的确切内容。

*   `perl`你得到的输出：

    ```
    ... d8 b9 d9 8a d8 a8 d9 84 d9 84 0a
    ... d8 b9 d9 8a d8 a8 d9 84 d9 84 0a
    ... d8 b9 d9 8a d8 a8 d9 84 d9 84 0a

    U+0639 ARABIC LETTER AIN
    U+064A ARABIC LETTER YEH
    U+0628 ARABIC LETTER BEH
    U+0644 ARABIC LETTER LAM
    U+0644 ARABIC LETTER LAM
    U+000A LINE FEED 
    ```

    好的，所以你可能有一个有问题的 Perl（它可以反转和更改阿拉伯字符，而且只有那些），但你的资源很可能不包含你认为的内容。您需要检查哪些字节构成了您的源。

*   `echo`你得到的输出：

    ```
    ef bb 8a ef bb b4 ef ba 92 ef bb a0 ef bb 9f 0a

    U+FECA ARABIC LETTER AIN FINAL FORM
    U+FEF4 ARABIC LETTER YEH MEDIAL FORM
    U+FE92 ARABIC LETTER BEH MEDIAL FORM
    U+FEE0 ARABIC LETTER LAM MEDIAL FORM
    U+FEDF ARABIC LETTER LAM INITIAL FORM
    U+000A LINE FEED 
    ```

    您从`perl`和从获得的内容存在显着差异`echo`，因此它们以不同的方式出现也就不足为奇了。

* * *

输出检查使用：

```
$ perl -Mcharnames=:full -MEncode=decode_utf8 -E'
   say sprintf("U+%04X %s", $_, charnames::viacode($_))
      for unpack "C*", decode_utf8 pack "H*", $ARGV[0] =~ s/\s//gr;
' '...' 
```

（不要忘记交换 的字节`hexdump`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:55:55.467

也许你的外壳有些奇怪？如果我将输出重定向到文件，结果将是相同的。请试试这个：

```
use strict;
use warnings;
use utf8;

binmode( STDOUT, ':utf8' );

use Encode qw< encode decode >;

my $str = 'ﻟﻠﺒﻴﻊ';                 # "For sale" 
my $enc = encode( 'UTF-8', $str );
my $dec = decode( 'UTF-8', $enc );

my $decoded = pack 'U0W*', map +ord, split //, $enc;

open(F1,'>',"origiinal.txt") or die;
open(F2,'>',"decoded.txt") or die;
open(F3,'>',"decoded2.txt") or die;

binmode(F1, ':utf8');binmode(F2, ':utf8');binmode(F3, ':utf8');

print F1 "$str\n";     #  ل ل ب ي ع   
print F2 "$dec\n";     #  ل ل ب ي ع
print F3 "$decoded\n"; 
```

# c++ - 模数给出不可能的值

> ID：14613249
> 
> 赞同：1
> 
> 时间：2013-01-30T20:36:45.777
> 
> 标签：c++, modulo

我想要一个包含 1 到 6 之间的四个值的表。

我正在使用：`rand() % 6 + 1;`

这应该给出 1 到 6 之间的值。

除非`rand()`生成值 0。

1.  我一直得到7分。我不想要任何7

2.  兰特的范围是多少？我如何防止它生成任何 0 值？

3.  替代解决方案非常受欢迎。

4.  我的老师给了我们使用“随机”的线索。
    我们在学校使用 Borland C++ Builder 5。
    我在家里使用 Dev-C++ 5.3.0.3。
    我发现它们的工作方式有一些差异，我觉得很奇怪..
    我不能使用 random()，它让我没有在范围内声明......

    ```
    int main (){

        int I;
        int Fasit[3];

        srand (time(NULL) );

        for(I=0; I<4; I++) {
            Fasit[I]=rand() % 6 + 1;
        }

        std::cout << Fasit[0] << " " << Fasit[1] << " " << Fasit[2] << " " << Fasit[3] << " ";

        return 0;
    } 
    ```

我得到的一些价值观：

```
2 6 1 7  
5 2 1 4  
5 2 1 4  
5 2 1 4  
1 3 1 6  
5 3 3 7  
5 3 3 7  
5 3 3 7 
```

7应该是不可能的吧？

PS：我知道我的打印是火腿，一旦数字生成工作，我会让它更优雅一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T20:39:02.100

考虑这些行：

```
int Fasit[3];
for(I=0; I<4; I++) {
  Fasit[I] 
```

您声明了一个包含三个条目的数组，您将其写入**四次**。

再次尝试您的程序，但使用：

```
int Fasit[4]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:40:15.007

Fasit[3] 中只有 3 个元素；当您写信给 Fasit[3] 时，您处于未定义行为的领域，在这种情况下，它以明显的矛盾表现出来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T20:41:57.297

```
int Fasit[3]; 
```

您正在创建一个大小为 3 的数组，只能使用索引 0、1 或 2 访问该数组。

您正在编写和阅读 Fasit[3]，它具有未定义的行为。当行为未定义时，您一定会得到奇怪的结果。就是这个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T20:43:54.490

`Fasit[3]`只允许您访问`Fasit[0]`、`Fasit[1]`和`Fasit[2]`。

访问`Fasit[3]`，*无论是读还是写，都是未定义的行为*。您的代码正在写入和读取`Fasit[3]`:-)。程序正在越界访问数组。修理它！

至于为什么要打印 7，那只是巧合。请注意，`Fasit[0-3]`始终`1-6`如您预期的那样在范围内打印。

也可以看看：

*   [C中的数组索引超出范围](https://stackoverflow.com/questions/671703/array-index-out-of-bound-in-c)

*   [边界检查](http://en.wikipedia.org/wiki/Bounds_checking)

# python - Python - 创建一个类并使用函数更改它的对象值

> ID：14613250
> 
> 赞同：3
> 
> 时间：2013-01-30T20:36:48.220
> 
> 标签：python, class, function, object

建议我重新发布此内容以更清楚。

上了一堂课，剩下的少了这一堂课。任何指导表示赞赏。我已经得出了我坚持的部分问题，以保持简短。我也附上了我的工作。

通过下面的工作，我希望能够创建一个包含一个变量的类。我希望能够更改该变量并打印新变量。例如，将值从 horns = 2 更改为 horns = 4。问题要求我专门使用下面的 3 个函数来回答问题。使用我当前的代码，在 raw_input 提示符处输入值后，我会收到一条错误消息。

提前感谢您的帮助。

问题如下：

创建一个包含 1 个变量的类，其中包含自己的属性。提供以下3种方法：

getvariable1() - 使用返回键返回属性 1 的值

setvariable1() - 这应该允许为属性 1 指定新值 - 接受输入所需的附加参数。

printfun() - 打印对象变量的值。

创建您自己的类对象并为创建的对象调用 get & set 方法。使用 printfun() 方法检查代码是否有效。

我的工作：

```
class animal:
    horns = 2

    def printerfun(self):
        print getHorns() 

    def getHorns(self): #don't get where I should call this
        return self.horns

    def setHorns(horns): 
        self.horns = horns

animal_1 = animal()

F1 = raw_input('Please enter number of horns: ')
setHorns(F1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:02:04.253

这是你想要得到的吗？

```
class animal: 
    horns = 2

    def printerfun(self):
        print self.getHorns() 

    def getHorns(self):
        return self.horns

    def setHorns(self, horns): 
        self.horns = horns

if __name__ == "__main__"
    animal_1 = animal()
    animal_1.printerfun()

    F1 = raw_input('Please enter number of horns: ') 
    animal_1.setHorns(F1)
    animal_1.printerfun()
    horns = animal_1.getHorns()
    print(horns) 
```

这输出：

```
>>> 2
>>> Please enter number of horns: 4
>>> 4
>>> 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:03:53.900

`setHorns`不存在：`animal.setHorns`确实。这是一个[类方法](https://en.wikipedia.org/wiki/Class_method#Class_methods)

看来您需要阅读一些有关[面向对象编程](https://en.wikipedia.org/wiki/Object-oriented_programming)的内容，这是涉及类时使用的编程风格。

在这个特定的练习中，您需要创建一个`animal` [对象](https://en.wikipedia.org/wiki/Object_%28computer_science%29#Object-oriented_programming)。为此，您需要[实例化](https://en.wikipedia.org/wiki/Instance_%28computer_science%29)该类。这就是你所做的`animal_1 = animal()`。`animal_1`现在是`animal`类的一个对象，你可以调用它的方法：`animal_1.setHorns(2)`

如果您仍在为这些概念而苦苦挣扎，您可能需要阅读[python 中更接地气的教程](http://www.voidspace.org.uk/python/articles/OOP.shtml)

# http - apache httpd - RewriteCond SERVER_NAME 不等于 SERVER_ADDR

> ID：14613252
> 
> 赞同：5
> 
> 时间：2013-01-30T20:37:01.277
> 
> 标签：http, mod-rewrite, apache

`SERVER_ADDR`如果和`SERVER_NAME`变量不匹配，我需要重定向用户。

我的 httpd.conf 文件中有以下规则：

```
RewriteEngine on
RewriteCond %{SERVER_NAME} !%{SERVER_ADDR}
RewriteRule .* /myRedirectPage.html [PT] 
```

当 SERVER_NAME 和 SERVER_ADDR 不匹配时，我正确地被重定向。**但是，即使它们匹配，我也会被重定向。**

如果我使用以下条件，它适用于匹配和不匹配的场景：（其中 192.168.1.1 是服务器 IP）

```
RewriteCond %{SERVER_NAME} !192.168.1.1 
```

为了检查变量是否匹配，我使用了 PHP`$_SERVER['SERVER_NAME']`和`$_SERVER['SERVER_ADDR']`变量。

我应该如何编写 RewriteCond 以便它不会在匹配`SERVER_NAME`时重定向用户？`SERVER_ADDR`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T22:49:17.423

您不能在 RewriteCond 的右侧使用服务器变量，因此您匹配的是文字 string `"%{SERVER_ADDR}"`，而不是变量，因此，由于您的匹配被否定（“！”），因此规则始终匹配。

我认为你可以做这样的事情，虽然我自己从来没有使用过这种特殊的格式：

`RewriteCond %{SERVER_NAME},%{SERVER_ADDR} ^(.*),\1`

这个想法是你正在做两个匹配 - 你正在匹配`%{SERVER_NAME}`任何东西（总是匹配）并捕获结果，然后匹配`%{SERVER_ADDR}`对第一个匹配的反向引用，这是`%{SERVER_NAME}`.

同样，我自己没有使用过这样的规则，只是阅读一下，所以它可能需要一些调整。

# opengl - OpenGL 3 VBO索引多个图形（glDrawElements）

> ID：14613260
> 
> 赞同：1
> 
> 时间：2013-01-30T20:37:26.847
> 
> 标签：opengl, indexing, figure

我正在使用 OpenGL (3.x) 迈出第一步，我计划使用 VAO 和 VBO 来绘制几个图形（三角形、立方体......）：

现在我得到了以下设置：

VAO --> VBO [顶点，颜色] + VBO [索引]

其中“顶点”具有 [3 * 3floats 三角形顶点，8*3 立方体浮点]，“颜色”具有每个顶点的 RGB（无 alpha），“索引”具有 [三角形：0,1,2，正方形：0,1 ,2, 0,2,3, ...]

现在，如果我使用“glDrawElements”进行绘制。我只看到正确绘制的系列中的第一个图（并获得正确的颜色），第二个不能正常工作。

所以如果我先渲染三角形数据，它就像：

![三角形然后立方体](../Images/63459fadea949bbfcc6c4222f01f07fb.png)

如果我先渲染立方体，它就像：

![立方体然后三角形](../Images/afdf8b68109843e60432430646a58667.png)

*注意：三角形是红色的，立方体是彩色的，所以第一个图总是按我的预期显示*

这可以使用“glDrawArrays”（带有偏移量 + 三角形计数）而不是 drawElements 绘制数组，但是，当然，索引会使数据数组 muuuuuch 更小。所以我想做这个动作。

**我如何绘制相同的设置但使用索引？我应该调用另一种方法吗？**

这是我用来准备 VBO 数据的代码，以防有疑问。

```
// VBOS solid
    glBindBuffer(GL_ARRAY_BUFFER, vboSolid[0]);
    glBufferData(GL_ARRAY_BUFFER, vertices.size()*sizeof(GLfloat),&vertices[0], GL_STATIC_DRAW);
    glVertexAttribPointer((GLuint)0, 3, GL_FLOAT, GL_FALSE, 0, 0);
    glEnableVertexAttribArray(0);

    glBindBuffer(GL_ARRAY_BUFFER, vboSolid[1]);
    glBufferData(GL_ARRAY_BUFFER, colors.size()*sizeof(GLfloat),&colors[0], GL_STATIC_DRAW);
    glVertexAttribPointer((GLuint)1, 3, GL_FLOAT, GL_FALSE, 0, 0);
    glEnableVertexAttribArray(1);

    glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, vboIndex );
    glBufferData( GL_ELEMENT_ARRAY_BUFFER, indices.size()*sizeof(GLuint),&indices[0], GL_STATIC_DRAW);
    glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, 0 ); 
```

这是我在渲染时所做的调用。在这个循环中，三角形的 indicesCount=3 和 offset=0，而立方体分别有 24 和 3。

```
glDrawElements(
   GL_TRIANGLES,      
   primitives[i]->indicesCount,    
   GL_UNSIGNED_INT,  
   (void*) (primitives[i]->offsetIndices*sizeof(GLuint))   
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:43:03.367

由于我在发布后仍在测试，我终于做了一个工作尝试，使用：

```
glDrawElementsBaseVertex(
   GL_TRIANGLES.
   __INDICES_TO_RENDER__,
   GL_UNSIGNED_INT,
   (void*) (__INDICES_RENDERED___*sizeof(GLuint)),
   _VERTICES_RENDERED_BEFORE_   
); 
```

其中“ **INDICES_TO_RENDER** ”和“ **INDICES_RENDERED_** ”是计数 3f 的值，因此对于多维数据集，您使用 24floats 作为值“TO_RENDER”，0 到“_RENDERED”。

“_VERTICES_RENDERED_BEFORE_”作为渲染顶点的人类值起作用，因此在渲染立方体之前，它是 0，之后应该是 8。

有点奇怪（可能我做错了什么），但它在我的测试中有效：

![呜呜](../Images/2269d81bed47b1b4e3454cafaeca2efe.png)

在[Using an offset with VBOs in OpenGL](https://stackoverflow.com/questions/9431923/using-an-offset-with-vbos-in-opengl)中说过，但我尝试了几次，直到我找到了要放入调用的内容。

如果专家可以验证这一点，我会更高兴：P。

# jquery - 使用jquery从现有位置添加或减去一定数量的像素

> ID：14613263
> 
> 赞同：6
> 
> 时间：2013-01-30T20:37:42.410
> 
> 标签：jquery, jquery-animate, position

我正在为绝对定位的 div 设置动画。“顶部”值是动态确定的，因此我需要使用 jquery 为动态“顶部”值的 -20px 设置动画。

```
$("#element").animate({"top" : +-20}); 
```

显然以上是不正确的，但我需要简单地从 #element 已经拥有的任何“顶部”值中减去 20。我可以使用上面的语法来做到这一点吗？

例如，如果#element 有一个顶部：-300px，我需要最终结果为 -320px。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T20:38:54.540

`-=`您必须在您的号码前面传递一个字符串：

```
$("#element").animate({ top: "-=20" }); 
```

# java - Java 错误：Finch 类型中的方法不适用于参数（扫描仪）”

> ID：14613264
> 
> 赞同：0
> 
> 时间：2013-01-30T20:37:44.980
> 
> 标签：java, input

这是我收到的错误：

```
The method saySomething(String) in the type Finch is not applicable 
for the arguments (Scanner) 
```

代码：

```
Scanner user_input = new Scanner(System.in);

String userInput;
System.out.println("Enter your two words: ");
userInput = user_input.next();

myf.saySomething(user_input); 
```

我假设 saySomething 方法不接受扫描仪输入，如何将输入转换为字符串？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:38:36.953

一个选择相似变量名的例子，这会导致代码混乱，如下所示：

您的`saySomething(String)`方法需要一个字符串作为参数，目前您正在传递扫描仪。

```
 Scanner user_input = new Scanner(System.in);
            String userInput=user_input.next();
            System.out.println("Enter your two words: ");
            myf.saySomething(userInput); 
```

将变量命名为可以彼此区分且有意义的变量。

```
Scanner userInput;
String  words; 
```

# c - 打印类型定义

> ID：14613268
> 
> 赞同：3
> 
> 时间：2013-01-30T20:38:01.290
> 
> 标签：c, printf, typedef

> **可能重复：**
> [在 C 中使用枚举类型的变量作为字符串的简单方法？](https://stackoverflow.com/questions/147267/easy-way-to-use-variables-of-enum-types-as-string-in-c)
> [这可以自定义printf吗？](https://stackoverflow.com/questions/9260170/is-this-possible-to-customize-printf)

是否可以以更方便的方式打印自己定义的 typedef？这是示例：

```
typedef enum {
    On,
    Off,
    Unknown
} State;

State st;

st=getState();
printf("State is:%??",st); 
```

我想显示“状态为：开 | 关 | 未知”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:50:53.553

不，但你可以做一个技巧：

```
typedef enum {
    On = '\000 nO',
    Off = '\000ffO',
    Unknow = '\000knU'
} State;

int main(int argc, const char * argv[])
{
    State st;

    st = On;

    printf("state is %s",(char *)&st);

} 
```

当您指定*枚举*标签时，您可以分配一个整数值。

像“ABCD”这样的东西是一个多字符常量，产生一个 32 位的值。每个字节都是对应字符的 ASCII 值。

在上面的示例中，我为每个标记分配了一个多字符常量，将其视为字符串而不是整数，从而生成一个 3 个字符的标记。

比较难看。我承认。您被迫使用 3 个字符标签，并且必须将它们颠倒过来（如在 Mac OS X - Intel 上）。

但有效。

# c# - 关于如何在页面和母版之间创建公共基类（或功能）的建议？

> ID：14613270
> 
> 赞同：1
> 
> 时间：2013-01-30T20:38:14.333
> 
> 标签：c#, asp.net

我创建了一个自定义基类，我的 .aspx 页面继承自该基类。

由于母版页继承自 MasterPage 而不是 Page，我如何创建在我的 Pages 和 Master 页中都可用的通用功能？

```
public class SitePage : System.Web.UI.Page
{

  public SitePage()
  {

  }

  public bool IsLoggedIn
  {
         //
  }

  public string HtmlTitle
  {
           //
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:43:21.987

一种方法是将所有功能放在母版页中，并始终通过母版页调用它们。您可以在以下位置强烈键入`Master`属性`SitePage`：

```
public class SitePage : Page
{
    public new MyMaster Master { get { return base.Master as MyMaster; } }
} 
```

然后通过 Master 访问值：

```
this.Master.IsLoggedIn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:58:52.050

**母版页：**

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="MyProject.master.cs"
    Inherits="MyProject.MasterPages.MyProject" %>

<asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">   
</asp:ContentPlaceHolder> 
```

**基本页面：**

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPages/MyProject.Master"
    AutoEventWireup="true" CodeBehind="BasePage.aspx.cs"
        Inherits="MyProject.BasePage" %>

<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1"
    runat="server">
</asp:Content> 
```

**内容页：**

```
<%@ Page Title="MyProject - Home" Language="C#"
    MasterPageFile="~/MasterPages/MyProject.Master" AutoEventWireup="true"
        CodeFileBaseClass="MyProject.BasePage" CodeFile="Default.aspx.cs"
            Inherits="MyProject.Default"
                Meta_Description="Code Snippet: Master Page and Base Page"
                    Meta_Keywords="master, base, content" Theme="Style" %>

<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1"
   runat="server">
</asp:Content> 
```

# c# - 递归在 C# 中的工作原理

> ID：14613273
> 
> 赞同：2
> 
> 时间：2013-01-30T20:38:23.073
> 
> 标签：c#, recursion

这是我的代码

```
using System;
public class Program
{
   public static void Method(int flowerInVase)
      {
         if (flowerInVase > 0)
         {
             Method(flowerInVase - 1);
             Console.WriteLine(flowerInVase);
         }
      }

   public static void Main()
   {
      Method(3);
   }
} 
```

我对`Console.WriteLine(flowerInVase);`方法调用自身感兴趣，直到它被条件终止。只有在那之后，当堆栈已满时，它才会从上面弹出每个方法，并且控制台会从最小的 1、2、3 开始写入数字。

为什么`console.writeline`只有在堆栈弹出时才有效，为什么它没有在方法到达终止的方式上写数字，比如 3,2,1？编译器仅在完成递归时才使用 writeline。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T20:45:15.260

调用的结构如下所示。也许这个可视化会帮助你理解为什么数字会打印 1、2、3 而不是 3、2、1：

```
Method(3);
  flowerInVase > 0 ?
  Yes - Method(2);
    flowerInVase > 0 ?
    Yes - Method(1);
      flowerInVase > 0 ?
      Yes - Method(0);
        flowerInVase > 0 ?
        No
      WriteLine(1);
    WriteLine(2);
  WriteLine(3); 
```

原因是因为您的呼叫`Method(flowerInVase - 1)`先*于*呼叫`WriteLine(flowerInVase)`。在有机会打印它所在的数字之前，执行会跳转到该方法的另一个副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T20:51:00.723

`if`由于语句中的行的排序方式，您得到 1,2,3 。

`Main()`来电`Method(3)`。在它有机会打印“3”之前
`Method(3)`调用。`Method(2)`执行立即跳转到顶部`Method`；`Method`在递归调用完成之前，您对, with的第一次调用`flowersinvase=3`不会完成。同样，`Method(2)`立即调用`Method(1)`和`Method(1)`调用`Method(0)`。

`Method(0)`什么都不做并返回到`Method(1)`它停止的地方；下一行是您的`WriteLine`呼叫，它打印“1”然后返回，它将呼叫接续到`Method(2)`中断的地方，打印“2”，以此类推“3”。

如果您调用的方法在跳转到它们递归调用的任何方法之前运行完成，您只会得到“3,2,1”，这不是 C# 的工作方式。关于方法调用，你必须记住的是，一旦你调用了一个方法，**执行就会立即跳转到你调用的方法的开头；方法调用之后的代码在方法返回之前不会执行。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T20:45:40.230

因为它这样做：

```
flowerInVase = 3
call Method(3)
    call Method(2)
        call Method(1)
        WriteLine(1)
    WriteLine(2)
WriteLine(3) 
```

然后输出是：

```
1
2
3 
```

如果你颠倒这些行：

```
 Console.WriteLine(flowerInVase);
    Method(flowerInVase - 1); 
```

它会先打印，然后递归，所以它会打印 3, 2, 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T20:45:07.907

> 编译器仅在完成递归时才使用 writeline。

它这样做是*因为您告诉它这样做*。在您的代码中，首先执行递归（调用`Method()`），只有在完成后，您才写入数字。

如果你想先写数字，在执行递归之前，你需要在你的代码中切换语句：

```
public static void Method(int flowerInVase)
{
   if (flowerInVase > 0)
   {
       Console.WriteLine(flowerInVase);
       Method(flowerInVase - 1);
   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T20:45:55.263

> 为什么console.writeline只有在卡住弹出时才起作用，为什么它没有在方法到达终止的方式上写数字，比如3、2、1？

因为 your之前`Method(flowerInVase - 1);`被调用*过* `Console.WriteLine(flowerInVase);`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T20:45:36.463

如果您逐行遵循代码执行，这是有道理的。如果你把它分解，它真正的意思是你总是在你有机会向控制台写任何东西之前创建一个递归调用的新实例。只有在您创建了所有允许的调用（您的 if 语句失败）之后，才会将线程的控制权返回给现有方法。

```
Create method -> check parameter 
  -> create method - > check parameter
    -> create method -> check parameter
      etc. etc.
    -> print value
  -> print value
-> print value 
```

所以现在你看到它正在以调用的方式返回控制权。最后调用的函数需要在调用它的函数完成之前完成它的操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T20:50:25.447

也许您应该研究递归的含义。这是递归方法的一个非常简单的示例：即调用自身的方法。递归在许多领域都有很多用途，尤其是编程，但这不是你问的，也不是我要回答的。

如果您逐行阅读代码，您会看到`Method(3)`被调用，它又调用`Method(2)`，最重要的是，它在输出值 3 之前进行此调用。因此，`Method(2)`将在最后一行 from `Method(3)`is之前完整执行输出。再一次，`Method(2)`在它输出 2 之前调用它自己，所以整个`Method(1)`将在此之前执行。

一个简单的流程图：

```
Main() -> Method(3)               
              --->calls Method(2)
                            --->calls Method(1)
                                          -Method(0) not viable
                                          -if statement failed
                                          -Outputs '1'
                            -Outputs '2'
              -Outputs '3'
End of Main() 
```

# javascript - 如何创建对象数组以将虚拟数据加载到 dynatree 中？

> ID：14613276
> 
> 赞同：0
> 
> 时间：2013-01-30T20:38:29.920
> 
> 标签：javascript, jquery, arrays, dynatree

我正在创建一个线框，它将使用 dynatree 来显示一棵树。我想使用对象数组将一些虚拟数据加载到树中。我阅读了文档并能够使用以下方法加载父母：

```
$(function() {
$("#catTree").dynatree({
   children: ["Category 1","Category 2","Category 3","Category 4","Category 5","Category 6","Category 7","Category 8","Category 9"],
... 
```

我如何修改它以显示这些类别的孩子？例如：

类别 1 子类别 1 子类别 2

ETC..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:41:32.017

```
children: [
  {title: "Item 1"},
  {title: "Item 2",
    children: [
      {title: "Sub-item 2.1"},
      {title: "Sub-item 2.2"}
    ]
  },
  {title: "Item 3"}
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T13:54:43.983

上面提到的对象是 Javascript 对象还是 JSON 对象？

# point-sprites - 点精灵和广告牌之间的区别

> ID：14613277
> 
> 赞同：2
> 
> 时间：2013-01-30T20:38:30.853
> 
> 标签：point-sprites

有人可以告诉我 OpenGL 中的点精灵和广告牌之间的区别吗？我读了很多关于它们的文章，我越来越困惑何时使用它们中的哪一个以及是否真的有区别？

# ruby-on-rails - Rake 迁移找不到表

> ID：14613284
> 
> 赞同：0
> 
> 时间：2013-01-30T20:38:55.707
> 
> 标签：ruby-on-rails, rake, rails-migrations

所以我在 db->migrate 文件夹中创建了一个手动文件名 001_create_users.rb ，如下所示：

```
class CreateUsers < ActiveRecord::Base
  def self.up
    create_table :users do |t|
      t.string :name
      t.string :email
      t.string :password
      t.string :bio

      t.timestamps
    end
  end

  def self.down
    drop_table :users
  end
end 
```

然后我运行一个 :`bundle exec rake db:migrate`命令，我得到这个错误：

> 耙中止！发生错误，此迁移和所有后续迁移均已取消：
> 
> 找不到表“create_users”

错误是更多细节，所以我只是从终端窗口复制粘贴它，但第一部分是我得到的错误的头部

> 耙中止！发生错误，此迁移和所有后续迁移均已取消：
> 
> 找不到表'create_users'/Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/connection_adapter/sqlite_adapter.rb:472:in `table_structure' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/connection_adapters/sqlite_adapter.rb:346:in`columns' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/connection_adapters/schema_cache.rb:12:in `block in initialize' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/model_schema.rb:228:in` yield' /Users/JonyIve/.rvm /gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/model_schema.rb:228:in `default' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/model_schema.rb:228:in` columns' /Users/JonyIve/.rvm/gems/ruby-1.9.3- p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/model_schema.rb:243:in `column_defaults' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/base.rb:482:in` 初始化'/Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2 .11/lib/active_record/migration.rb:538:in `new' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/migration.rb:538:in` load_migration'/Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/migration.rb:533:in `migration' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/migration.rb:528:in` migrate'/Users/JonyIve/.rvm /gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/migration.rb:720:in `block (2 levels) in migrate' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/migration.rb:775:in` call' /Users/JonyIve/.rvm/gems/ruby-1.9.3- p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/migration.rb:775:in `block in ddl_transaction' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in` transaction' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2 .11/lib/active_record/transactions.rb:208:in `transaction' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/migration.rb:775:in` ddl_transaction'/Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/migration。 RB：719：在 `block in migrate' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/migration.rb:700:in` 每个'/Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/migration.rb:700:in `migrate' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/migration.rb:570:in` up'/Users/JonyIve/.rvm /gems/ruby-1.9.3-p362@railsbabak/gems/activerecord-3.2.11/lib/active_record/migration.rb:551:in `migrate' /Users/JonyIve/Documents/HisFirstService/Rakefile:19:in` block (2 levels) in ' /Users/JonyIve/.rvm/gems/ruby -1.9.3-p362@railsbabak/bin/ruby_noexec_wrapper:14:in `eval' /Users/JonyIve/.rvm/gems/ruby-1.9.3-p362@railsbabak/bin/ruby_noexec_wrapper:14:in` 'Tasks: TOP => db:migrate（通过使用 --trace 运行任务查看完整跟踪）

另外，如果我说“哪个宝石”，这就是我得到的：

```
which gem
/Users/JonyIve/.rvm/rubies/ruby-1.9.3-p362/bin/gem 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:43:50.543

`ActiveRecord::Base`你是从应该的时候继承的`ActiveRecord::Migration`。

```
class CreateProjects < ActiveRecord::Migration
  def change
    create_table :projects do |t|
      t.text :title
      t.text :description
      t.text :slug

      t.timestamps
    end
  end
end 
```

# c# - c# 在类之间传递变量而不将它们公开

> ID：14613286
> 
> 赞同：2
> 
> 时间：2013-01-30T20:38:59.247
> 
> 标签：c#, variables

我正在编写一个 WPF 应用程序，它根据一些最少的用户输入来搜索、解析和写入文件。我的主窗口类中有一个方法调用（对另一个类中的方法），它需要从两个单独的文件中解析出许多不同的信息。目前，我有另一种方法可以解析源文件并为应用程序的另一个函数返回解析数据的数组。在该方法中，我有一些公共变量来存储第一次调用所需的信息。这是我可以弄清楚如何访问这些项目的唯一方法，而无需编写单独的方法来搜索每个单独信息的解析数据我附上了一些代码来帮助澄清我目前的情况：

```
//From mainwindow.xaml.cs

private void button1_Click(object sender, RoutedEventArgs e)
        {
        string[] path = ff.Search(fw.sysName, fw.design, fw.partNumber);//From FileFinder class
        string[] parsedData = fp.Parse(path);//From FileProcessor class
        string[] summary = fw.SummaryWriter(parsedData, fw.masterList);//From FileWriter class
        Output.Text = "";
        foreach (string str in summaryvalues)
        {
            Output.Text += (str + "\n");
        }
    } 
```

ff.Search() 和 fw.SummaryWriter() 中使用的变量是从 FileWriter.cs 中调用的：

```
 class FileWriter
   {

    public string sysName;
    public string design;
    public string partNumber;
    public List<string> masterList = new List<string>();

    public string[] MasterWriter(string input, int source)
    {
          //Do stuff. The data for the public variables is mined from this method.

    }

    public string[] SummaryWriter(string[] parsedData, List<string> moduleMasterList)
    {
          //Do stuff
    }
} 
```

我的问题很简单，如何在不公开它们的情况下访问这些变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:03:31.557

首先，与其拥有公共字段，不如将它们封装在公开私有字段的公共属性中？例子：

```
private string somePrivateField;
public string SomePrivateField
{
    get
    {
        return this.somePrivateField;
    }
    set
    {
        this.somePrivateField = value;
    }
} 
```

[有关属性的信息，请参阅此站点](http://msdn.microsoft.com/en-us/library/x9fsa0sw%28v=vs.80%29.aspx)

其次，当我遇到可能需要返回多个值的方法时，您可以为方法制作参数或将返回值封装到它们自己的类中，然后只返回该类的一个实例：

```
public void SomeMethod(int inputParameter, out int outvar1, out int outvar2)
{
...
} 
```

[请参阅此站点以获取 out 关键字](http://msdn.microsoft.com/en-us/library/t3c3bfhx%28v=vs.110%29.aspx)

或者

```
public SomeMethodOutput SomeMethod(int inputParameter)
{
...
return new SomeMethodOutput(number1, number2);
} 
```

其中 SomeMethodOutput 是一个具有两个属性的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:58:51.863

做一个getter方法。

```
class Foo
{
private int _bar;

public void GetBar()
{ return _bar;}
} 
```

# c++ - 在 vb.net 中通过引用传递 const 参数

> ID：14613294
> 
> 赞同：0
> 
> 时间：2013-01-30T20:39:14.580
> 
> 标签：c++, .net, vb.net

> **可能重复：**
> [VB.Net 中的引用](https://stackoverflow.com/questions/389426/references-in-vb-net)

我想传递一个中等大小的客户数据库对象，但我不想按值传递它，因为我认为这是不必要的。

在 C++ 中，当你有一个大对象时，按值传递它是低效的，因为从它创建了一个副本，所以你通过引用传递它，这样就没有创建（传递的对象的）副本。我曾经将参数作为常量传递，因为这样如果我尝试更改函数内部的对象，编译器不会让我这样做，这样我就不会损害传递的对象（因为它是通过引用传递的）。是否可以在 vb.net 中模仿它还是不需要它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:43:47.143

我强烈怀疑您对如何在 VB 中传递值感到困惑。

如果您的 CustomerDb 类型是一个*类*，那么该类型的每个表达式都将具有一个已经是引用的值。默认情况下，该引用将按值传递 - 但它仍然只是传递的*引用*，而不是整个对象。

如果您的 CustomerDb 类型是一个*structure*，那么您确实每次都会传递整个值 - 而且您应该强烈考虑将其更改为一个类...

当然，当您通过值传递引用时，这不会阻止对象*在*方法中被修改，但这确实意味着对参数变量本身的更改不会反映在调用代码中。

阅读我关于[C# 参数传递](http://pobox.com/~skeet/csharp/parameters.html)的文章——在 VB 中也差不多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:42:21.387

在 .NET 中，类（我假设`Customer`是）是引用类型。将引用类型作为参数传递会将引用（指针）传递给对象。所以传递一个类是非常有效的，并且不会创建任何副本。

如果您通过引用传递一个类，那么该方法可能会更改引用（指针）并且它将反映在调用方法中。

我不知道是否有一种简单的方法可以使参数只读。由于引用类型确实传递了引用，因此对对象的任何更改都将反映在原始对象中。如果您不想修改原件，您可能需要一份副本。

# cassandra - 卡桑德拉滚动墓碑

> ID：14613296
> 
> 赞同：1
> 
> 时间：2013-01-30T20:39:19.770
> 
> 标签：cassandra

我在 Cassandra 中做一些简单的操作，为了简单起见，我使用的是**单个节点**。我有一行，我添加了 10,000 列，接下来我去删除这 10,000 列，过了一会儿我再添加 10,000 列，然后在一段时间后删除它们等等......删除将删除所有该行中的列。

这是我不明白的事情，即使我删除它们我看到数据库的大小增加了，我的**GCGracePeriod**设置为 0 并且我正在使用**Leveled Compaction Strategy**。

如果我正确理解了墓碑，它们应该在第一次重大压缩后被删除，看起来它们没有被删除，即使在运行 nodetool compact 命令之后也是如此。

我在一些邮件列表中读到这些是滚动墓碑（如果您经常更新和删除同一行）并且不由主要压缩处理。所以我的问题是它们什么时候被删除？如果不是，那么数据只会增长，我个人认为这是不好的。更糟糕的是，我找不到任何关于这种特殊效果的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:07:22.560

首先，正如您所发现的，这不是一个好主意。至少您应该使用行级删除，而不是单个列删除。

其次，没有 LCS 的主要压实之类的东西；`nodetool compact`是无操作的。

最后，Cassandra 1.2 为生成大量墓碑的工作负载改进了压缩：[https ://issues.apache.org/jira/browse/CASSANDRA-3442](https://issues.apache.org/jira/browse/CASSANDRA-3442)

# ruby-on-rails - Heroku Ruby Deploys Disabled - 为什么使用 buildpack_url 有风险？

> ID：14613299
> 
> 赞同：2
> 
> 时间：2013-01-30T20:39:24.643
> 
> 标签：ruby-on-rails, security, rubygems

我想推出更改，但现在并不完全有必要。为什么 Heroku 说设置自定义 BUILDPACK_URL 是有风险的？ [https://status.heroku.com/incidents/489](https://status.heroku.com/incidents/489)

它是否有风险，因为它覆盖了区块并且我正在使用的宝石是否被篡改是一场赌博？

你希望这个区块能持续多久？我确信 ruby​​gems.org 团队正在尽可能快地工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:23:08.413

正如您所说，这是有风险的，因为可能会从 ruby​​gems.org 安装恶意 gem，这可能会危及您的应用程序。但是，如果自上次部署以来您没有对 Gemfile/Gemfile.lock 进行任何更改，您应该没问题，因为 ruby​​gems.org 在部署期间不会被命中。

但除非您真的知道自己在做什么，否则最好等到 ruby​​gems.org 团队检查完所有宝石。它不应该花费太长时间。[你可以在twitter](https://twitter.com/rubygems_status)上关注他们的进展。

# jquery - JQuery将值复制到div类中

> ID：14613301
> 
> 赞同：-1
> 
> 时间：2013-01-30T20:39:32.987
> 
> 标签：jquery, jquery-ui

完全不在我的脑海里。这听起来像是一件非常简单的事情，但就是无法让它发挥作用！

基本上，我有一个 JQuery UI Datepicker 的隐藏输入字段结果。我已经隐藏了输入类型，当我选择一个日期时，它会填充值字段，我现在想获取那个“值”并将其放在一个 div 中。

任何人都可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:42:01.493

假设你有这样的标记：

```
<input id="date" type="hidden" value="1/1/2013" />

<div id="value">
</div> 
```

通过调用选择输入的值`.val()`并通过调用设置div内容`html()`

```
$("#value").html($("#date").val()); 
```

如果您将它与 datepicker 一起使用，则`onSelect`在用户选择日期或更改日期时使用 datepickers 事件进行更新。

当你声明你的 datePicker 时做这样的事情

```
$(".datepicker").datepicker({
    onSelect: function(){
         $(".show_date").html($(this).val());
    }
}); 
```

因此，每次 datepicker 的值发生变化时，`.show_date`都会使用 datepicker 的值更新 html。您也不需要隐藏字段。

看到这个[jsFiddle](http://jsfiddle.net/ey8Mz/)

# jquery - jQuery Validate 确定表单提交中使用的按钮

> ID：14613303
> 
> 赞同：0
> 
> 时间：2013-01-30T20:39:34.093
> 
> 标签：jquery, jquery-validate

我正在尝试确定按钮用于提交表单。

我有两个按钮 - 在表单中取消和提交，根据点击哪个按钮，我想在提交之前执行一些功能。

我可以从服务器端的 POST 确定值​​，但需要先在客户端这样做

我调用什么 jquery 函数来确定是否使用了“取消”按钮？

表单的提交正在作为 jquery 验证的 submitHandler 事件的一部分进行处理。

这是元素：

```
<input name="submit" type="submit" value="Submit" />
<input name="cancel" type="submit" value="Cancel" /> 
```

这是提交处理程序：

```
submitHandler: function(form) {
                    form.submit();
                    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:42:51.663

尝试这个...

```
 $('#myform').validate({
        rules: {
            field1: {
                required: true,
                minlength: 5
            },
            field2: {
                required: true,
                minlength: 5
            }
        },
        submitHandler: function (form) { // for demo
            alert('form submitted');
            return false;
        }
    });

    $(':submit').on('click', function () {
        if ($(this).attr('name') == 'submit') {
            $(this).closest('form').submit();
        }
    });

    $('[name="cancel"]').click(function () {
        // your code that handles a cancel click
        alert('form cancelled');
        return false;
    }); 
```

现场[示例](http://jsfiddle.net/vrag6/1/)

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:04:37.690

您不想`click`在 jQuery Validate 插件中使用外部或额外的处理程序是正确的，因为该插件已经`submit` `click`通过其`submitHandler`回调自动捕获事件。

您的问题是您实际上没有“取消”按钮。这只不过是一个重复的`submit`按钮......

```
<input name="cancel" type="submit" value="Cancel" /> 
```

无论您做什么，插件总是会将其`click`事件视为常规表单提交。如果你把它改成`<button></button>`? 还是不行。该插件还将`button`'`click`事件视为常规表单提交。该插件没有内置其他回调函数/选项可以捕获任何其他类型的按钮/取消`click`事件。

您唯一的选择是将其放在标签*之外。*`<form></form>`Valdiate 插件不会看到它，然后您可以将自己的`click`事件绑定到它。

您自己的`cancel`点击事件：

```
$('[name="cancel"]').click(function() {
    // your code that handles a cancel click
}); 
```

**演示使用`<input type="submit"`：http: [//jsfiddle.net/wZwcQ/](http://jsfiddle.net/wZwcQ/)**

**演示使用`<button></button>`：http: [//jsfiddle.net/h7XKc/](http://jsfiddle.net/h7XKc/)**

# python - Rabin-Miller 强伪素测试实施不起作用

> ID：14613304
> 
> 赞同：5
> 
> 时间：2013-01-30T20:39:34.927
> 
> 标签：python, algorithm, math

今天一直在尝试实施 Rabin-Miller 强伪素测试。

使用[Wolfram Mathworld](http://mathworld.wolfram.com/Rabin-MillerStrongPseudoprimeTest.html)作为参考，第 3-5 行很好地总结了我的代码。

但是，当我运行该程序时，它（有时）说素数（甚至低，例如 5、7、11）不是素数。我已经查看了很长时间的代码，但无法找出问题所在。

为了获得帮助，我查看了这个站点以及许多其他站点，但大多数都使用另一个定义（可能相同，但由于我是这种数学的新手，我看不到同样明显的联系）。

我的代码：

```
import random

def RabinMiller(n, k):

    # obviously not prime
    if n < 2 or n % 2 == 0:
        return False

    # special case        
    if n == 2:
        return True

    s = 0
    r = n - 1

    # factor n - 1 as 2^(r)*s
    while r % 2 == 0:
        s = s + 1
        r = r // 2  # floor

    # k = accuracy
    for i in range(k):
        a = random.randrange(1, n)

        # a^(s) mod n = 1?
        if pow(a, s, n) == 1:
            return True

        # a^(2^(j) * s) mod n = -1 mod n?
        for j in range(r):
            if pow(a, 2**j*s, n) == -1 % n:
                return True

    return False

print(RabinMiller(7, 5)) 
```

这与 Mathworld 给出的定义有何不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T01:21:31.590

### 1\. 对您的代码的注释

我将在下面提出的一些观点在其他答案中得到了说明，但将它们放在一起似乎很有用。

1.  在该部分

    ```
    s = 0
    r = n - 1

    # factor n - 1 as 2^(r)*s
    while r % 2 == 0:
        s = s + 1
        r = r // 2  # floor 
    ```

    您已经交换了*r*和*s*的角色：您实际上已将*n* - 1 分解为 2 ^(*s*) *r*。如果您想坚持使用 MathWorld 表示法，那么您必须在这部分代码中交换`r`和：`s`

    ```
    # factor n - 1 as 2^(r)*s, where s is odd.
    r, s = 0, n - 1
    while s % 2 == 0:
        r += 1
        s //= 2 
    ```

2.  在行

    ```
    for i in range(k): 
    ```

    该变量`i`未使用：通常命名此类变量`_`。

3.  *你选择一个介于 1 和n* - 1之间的随机基数：

    ```
    a = random.randrange(1, n) 
    ```

    这是它在 MathWorld 文章中所说的，但那篇文章是从数学家的角度写的。事实上，选择基数 1 是没有用的，因为 1 ^(*s*) = 1 (mod *n* ) 你会浪费试验。同样，选择底数*n* - 1 是没有用的，因为*s*是奇数，因此 ( *n* - 1) ^(*s*) = -1 (mod *n* )。数学家不必担心浪费的试验，但程序员会这样做，所以改为：

    ```
    a = random.randrange(2, n - 1) 
    ```

    （*n*需要至少为 4 才能使此优化起作用，但是我们可以通过在*n*`True` = 3时返回函数顶部来轻松安排它，就像您为*n* = 2 所做的那样。）

***   正如其他回复中所述，您误解了 MathWorld 文章。当它说“ *n*通过测试”时，它意味着“ *n*通过了基数*a*的测试”。关于素数的显着事实是它们通过了*所有*碱基的测试。因此，当您发现*a* ^(*s*) = 1 (mod *n* ) 时，您应该做的是绕过循环并选择下一个要测试的基础。

    ```
    # a^(s) = 1 (mod n)?
    x = pow(a, s, n)
    if x == 1:
        continue 
    ```

    *   这里有优化的机会。我们刚刚计算的值*x**是*^(2 ⁰ s) (mod *n* )。所以我们可以立即对其进行测试并为自己节省一次循环迭代：

    ```
    # a^(s) = ±1 (mod n)?
    x = pow(a, s, n)
    if x == 1 or x == n - 1:
        continue 
    ```

    *   在计算² ^(^(*j*)) ^s (mod *n )**的*部分中，这些数字中的每一个都是前一个数字的平方 (modulo *n* )。当您可以将先前的值平方时，从头开始计算每个值是浪费的。所以你应该把这个循环写成：

     ***```
    # a^(2^(j) * s) = -1 (mod n)?
    for _ in range(r - 1):
        x = pow(x, 2, n)
        if x == n - 1:
            break
    else:
        return False 
    ```*** ****   在尝试 Miller-Rabin 之前测试小素数的可分性是个好主意。例如，在[拉宾 1977 年的论文](http://www.sciencedirect.com/science/article/pii/0022314X80900840)中，他说：

    > 在实现算法时，我们结合了一些省力的步骤。首先，我们测试任何素数*p* < *N*的可分性，例如*N* = 1000。***** 

 **### 2\. 修改代码

把所有这些放在一起：

```
from random import randrange

small_primes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31] # etc.

def probably_prime(n, k):
    """Return True if n passes k rounds of the Miller-Rabin primality
    test (and is probably prime). Return False if n is proved to be
    composite.

    """
    if n < 2: return False
    for p in small_primes:
        if n < p * p: return True
        if n % p == 0: return False
    r, s = 0, n - 1
    while s % 2 == 0:
        r += 1
        s //= 2
    for _ in range(k):
        a = randrange(2, n - 1)
        x = pow(a, s, n)
        if x == 1 or x == n - 1:
            continue
        for _ in range(r - 1):
            x = pow(x, 2, n)
            if x == n - 1:
                break
        else:
            return False
    return True 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T21:19:29.880

除了 Omri Barel 所说的之外，您的 for 循环也存在问题。`true`如果您找到`a`通过测试的人，您将返回。但是，所有人`a`都必须通过测试`n`才能成为可能的素数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T21:05:39.863

我想知道这段代码：

```
# factor n - 1 as 2^(r)*s
while r % 2 == 0:
    s = s + 1
    r = r // 2  # floor 
```

让我们来吧`n = 7`。所以`n - 1 = 6`。我们可以表示`n - 1`为`2^1 * 3`。在这种情况下`r = 1`和`s = 3`。

但是上面的代码发现了别的东西。它以 开头`r = 6`，所以`r % 2 == 0`。最初，`s = 0`所以在一次迭代之后，我们有`s = 1`和`r = 3`。但是现在`r % 2 != 0`，循环终止了。

我们最终得到`s = 1`，`r = 3`这显然是不正确的：`2^r * s = 8`.

您不应该`s`在循环中更新。相反，您应该计算可以除以 2 的次数（这将是`r`），除以之后的结果将是`s`。在 , 的示例中`n = 7`，`n - 1 = 6`我们可以将其除一次 (so `r = 1`)，除法后我们得到 3 (so `s = 3`)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T21:52:50.427

这是我的版本：

```
# miller-rabin pseudoprimality checker

from random import randrange

def isStrongPseudoprime(n, a):
    d, s = n-1, 0
    while d % 2 == 0:
        d, s = d/2, s+1
    t = pow(a, d, n)
    if t == 1:
        return True
    while s > 0:
        if t == n - 1:
            return True
        t, s = pow(t, 2, n), s - 1
    return False

def isPrime(n, k):
    if n % 2 == 0:
        return n == 2
    for i in range(1, k):
        a = randrange(2, n)
        if not isStrongPseudoprime(n, a):
            return False
    return True 
```

如果你想了解更多关于素数编程的知识，我谦虚地在我的博客上推荐[这篇文章。](http://programmingpraxis.com/essays)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T20:48:55.707

您还应该查看[Wikipedia](http://en.m.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test#section_5)，其中已知的“随机”序列给出了给定素数的有保证的答案。

*   如果 n < 1,373,653，测试 a = 2 和 3 就足够了；
*   如果 n < 9,080,191，测试 a = 31 和 73 就足够了；
*   如果 n < 4,759,123,141，则测试 a = 2、7 和 61 就足够了；
*   如果 n < 2,152,302,898,747，则测试 a = 2、3、5、7 和 11 就足够了；
*   如果 n < 3,474,749,660,383，则测试 a = 2、3、5、7、11 和 13 就足够了；
*   如果 n < 341,550,071,728,321，则测试 a = 2、3、5、7、11、13 和 17 就足够了；**

# namespaces - 带有命名空间嵌套资源的 form_for

> ID：14613306
> 
> 赞同：0
> 
> 时间：2013-01-30T20:39:41.817
> 
> 标签：namespaces, ruby-on-rails-3.2, form-for, nested-resources

当我使用路径**edit_projects_proj_paquet_mesures_proj_mesure_path** () 时，我在 form_for 的视图中收到以下错误：

```
undefined method `projects_proj_mesure_path' for #<#<Class:0xac942e4>:0xac9d1f0> 
```

**当我使用路径new_projects_proj_paquet_mesures_proj_mesure_path** ()时不会出现此错误。

虽然我将我的资源定义为嵌套在我的**config/route.rb中的命名空间**

```
namespace :projects do
    resources :proj_paquets_mesures do
      resources :proj_mesures
    end
end 
```

正如此[stackoverflow question-answer](https://stackoverflow.com/questions/2718059/nested-resources-in-namespace-form-for)中所建议的，我的 _form.html.haml 以：

```
form_for([:projects, @proj_paquet_mesures, @proj_mesure], :html => {:class => "formulaire-standard"}) do |f|
... 
```

请注意，在 config/initializer/inflection.rb 中设置了异常：

```
 ActiveSupport::Inflector.inflections do |inflect|
    inflect.irregular 'proj_paquet_mesures', 'proj_paquets_mesures'
 end 
```

当我为资源使用 Shallow 选项并使用路径**projects_proj_mesure_path** () 时，一切正常：

```
namespace :projects do
    resources :proj_paquets_mesures, :shallow => true do
      resources :proj_mesures
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:09:08.053

无视！这不是错误。

我解决了这个问题。问题的根源在于控制器：

我没有正确实例化@proj_paquet_mesures。相反，它持有“零”值。

这导致 form_for 的行为就像我用以下方式调用它一样：

```
form_for (:projects, @proj_mesure) do |f| 
```

生成的 HTML 是：

```
<form id="edit_proj_mesure_1" class="formulaire-standard" method="post" action="/projects/proj_mesures/1" accept-charset="UTF-8"> 
```

所以要纠正这个问题，我只需要修改我的控制器：

```
 def edit
    @proj_paquet_mesures = ProjPaquetMesures.find_by_id(params[:proj_paquet_mesures_id])

    unless @proj_paquet_mesures.nil? then
      @proj_mesure = ProjMesure.find_by_id(params[:id])

      unless @proj_mesure.nil? then
        respond_with(:projects, @proj_mesure)
      else
        render 'blank_page'
      end

    else
      render 'blank_page'
    end
  end 
```

这是完美的工作：

```
form_for([:projects, @proj_paquet_mesures, @proj_mesure], :html => {:class => "formulaire-standard"}) do |f| 
```

# .net - 从动态表中选择到 Datatable Oracle

> ID：14613309
> 
> 赞同：1
> 
> 时间：2013-01-30T20:39:59.033
> 
> 标签：.net, oracle, plsql, oracle11g

我正在寻找一个简单的选择语句来从 oracle 中的表中取回所有数据。由于正在进行的项目的性质，表格不断更新和更改，因此我没有任何可靠的设计。

我正在寻找一个简单的陈述。这就是我需要它做的所有事情。

```
Select * from myVariable 
```

搜索后我得到了这个来编译

```
create or replace procedure "GET_TABLEINFO" (o_rc OUT sys_refcursor, inTableName IN varchar2) AS       

BEGIN
      execute immediate 
          'SELECT * FROM '||inTableName
      using inTableName;
  END; 
```

但是当我尝试将其添加到数据表时：

```
using (OracleConnection cn = new OracleConnection(connectionString))
        {
            OracleDataAdapter da = new OracleDataAdapter();
            OracleCommand cmd = new OracleCommand();
            cmd.Connection = cn;
            cmd.InitialLONGFetchSize = 1000;
            cmd.CommandText = "GET_TABLEINFO";
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("o_rc", OracleDbType.RefCursor, ParameterDirection.Output);
            cmd.Parameters.Add("inTable", OracleDbType.Varchar2, 60, inTableName, ParameterDirection.Input);

            da.SelectCommand = cmd;
            da.Fill(dt); 
```

我明白了

编辑：

我不确定如何设置游标（第一次使用oracle，通常使用SQLSERVER）。程序应该很简单。我传入表名，我需要从该表中获取数据。没有什么花哨的，没有where子句等。

> ORA-01006：绑定变量不存在 ORA-06512：在“ODS_DEV.GET_TABLEINFO”，第 4 行 ORA-06512：在第 1 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:56:24.303

表名（和列名）不能是绑定变量。大概，您还希望您构建的 SQL 语句用于打开游标`o_rc`。您的存储过程需要类似于

```
create or replace procedure GET_TABLEINFO (
  o_rc OUT sys_refcursor, 
  inTableName IN varchar2) 
AS       
BEGIN
  OPEN o_rc
   FOR 'SELECT * FROM '||inTableName;
END; 
```

当然，这会使系统极易受到 SQL 注入攻击。至少，您需要打一个额外的`dbms_assert`电话

```
create or replace procedure GET_TABLEINFO (
  o_rc OUT sys_refcursor, 
  inTableName IN varchar2) 
AS       
BEGIN
  OPEN o_rc
   FOR 'SELECT * FROM '|| dbms_assert.sql_object_name( inTableName );
END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:54:04.713

```
CREATE OR REPLACE PROCEDURE GET_TABLEINFO(o_rc OUT sys_refcursor, inTableName IN varchar2) AS       
    sqlquery VARCHAR2(32000);
BEGIN
    sqlquery := 'SELECT * FROM ' || inTableName;
    OPEN o_rc FOR sqlquery;
END; 
```

# jquery - 无法在元素内找到元素？

> ID：14613310
> 
> 赞同：2
> 
> 时间：2013-01-30T20:40:00.513
> 
> 标签：jquery

我有一个奇怪的错误，我不确定什么不起作用。

我有这个html：

```
 <div id="active">
        <label for="slide1"></label>
        <label for="slide2"></label>
        <label for="slide3"></label>
        <label for="slide4"></label>
        <label for="slide5"></label>
    </div> <!-- #active --> 
```

这个jQuery：

```
$("#active label").click(function () {
    alert('hi');
}); 
```

然而，每当我单击元素时，jquery 都不会执行。我在 chrome 中进行了测试，以确保我点击了那个元素，我是。粘贴在这里的代码有问题还是我的错误是由其他原因引起的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:41:20.207

您的代码应该可以工作，假设您已将其包含在文档就绪处理程序中，并且包含`jquery.js`

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<!-- ^ Google CDN used as an example, a local file will work too -->
<script type="text/javascript">
    $(function() {
        $("#active label").click(function () {
            alert('hi');
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:41:42.197

```
$(function(){
  $("#active label").click(function () {
      alert('hi');
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:44:43.710

试试这个

```
$(document).ready(function () {
    $("#active label").on('click', function () {
        alert('hi');
    });
}); 
```

# ms-word - Word 2007/2010：访问 Microsoft.Office.Interop.Word.Document.SaveFormat 属性会使 Word 崩溃

> ID：14613311
> 
> 赞同：0
> 
> 时间：2013-01-30T20:40:02.847
> 
> 标签：ms-word, vsto, ms-office, office-pia

我们正在尝试访问 Microsoft.Office.Interop.Word.Document 实例的 SaveFormat 属性（我猜它在技术上是一个 DocumentClass 实例，因为 Document 是一个接口）。在尝试读取 SaveFormat 时，Word 会非常不优雅地崩溃。将访问包装在 try..catch 块中也不好；控制权正在传递给另一个程序集，该程序集决定终止应用程序，而不是抛出异常让我重新捕获。

无论我只是在代码中读取属性，都会发生这种情况，如下所示：

```
WdSaveFormat saveFormat = this.document.SaveFormat; // document is a Microsoft.Office.Interop.Word.Document 
```

或者当我使用调试器访问 Watch 中的属性时。

我怀疑文档实例本身很好；可以反映它的其他属性（例如，路径）。在文档对象上运行快速监视会产生看起来合法的值，而不是一堆引发危险的“无法评估”、“空”等值。我可以在 Quickwatch 窗口中逐行向下滚动，一旦进入 SaveFormat，它就会爆炸。

崩溃发生在 Word 2007 和 Word 2010 中。

我已经尝试过嵌入 PIA 类型而不是嵌入它们（参考属性中的“嵌入互操作类型”标志）

我尝试引用 Word 2007 PIA 而不是 2010 版本。相同的行为。

我们在项目中以 .NET 4.0 为目标，但我也尝试以 3.5 为目标。没变。

有任何想法吗？即将为我的比赛辩护:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:49:15.940

事实证明，该文档是一个零字节文件。我们很糟糕，但如果 Word 抛出一个有用的异常（类似于您尝试在没有打开文档的情况下访问 Application.ActiveDocument 时发生的情况）而不是直接炸毁，那就太好了。哦，好吧，大谜团解开了。:) 感谢 0xA3 建议文档本身可能是问题所在。有没有想过一种思路而忘记看明显的东西？

# javascript - 如何使用 Javascript 包含的 jQuery 元素进行选择？

> ID：14613313
> 
> 赞同：2
> 
> 时间：2013-01-30T20:40:03.987
> 
> 标签：javascript, jquery

所以我有一个使用此功能添加的菜单：

```
function loadContent() { 
    $(".navbar").load("navigation.html"); 
} 
```

navigation.html 看起来像这样：

```
<ul>
    <li><a href="home.html" class="first">Home</a></li>
    <li><a href="calendar.html">Calendar</a></li>
    <li><a href="profile.html">Profile</a></li>
    <li><a href="charts.html" class="last">Energy Charts</a></li>
</ul> 
```

但是当我尝试在该菜单中选择某些内容并添加一个类时，假设：

```
$('.navbar a').addClass('activeState'); 
```

它在 Chrome 中不起作用，我认为是因为需要刷新 DOM 或其他什么，我真的不知道......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:41:27.860

您必须等待内容实际加载。将您的代码放入`load`回调函数中：

```
function loadContent() { 
    $(".navbar").load("navigation.html", function () {
        $('.navbar a').addClass('activeState');
    }); 
} 
```

* * *

正如@LifeInTheGrey 所指出的，您应该使用单独的函数以获得更好的性能：

```
function loadContent() { 
    $(".navbar").load("navigation.html", actOnContent); 
}

function actOnContent () {
    $('.navbar a').addClass('activeState');
} 
```

* * *

您还应该研究选择器缓存...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:42:22.010

任何依赖于 AJAX 加载内容的代码都必须放在所述 AJAX 请求的成功处理程序中。在 的情况下`.load()`，这是第三个参数：

```
$(".navbar").load("navigation.html",null,function() {
    $(".navbar a").addClass("activeState");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:50:42.780

在文档就绪功能上试试这个：

```
$('.navbar').delegate('a', 'click', function() { 
  $(this).addClass('activeState');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T20:52:18.590

尝试这个

```
function loadContent() { 
    $(".navbar").load("navigation.html", addAttribute); 
}

function addAttribute() {
    $('.navbar a').addClass('activeState');
} 
```

# c# - 什么时候可以使用 new 关键字？

> ID：14613317
> 
> 赞同：-1
> 
> 时间：2013-01-30T20:40:20.443
> 
> 标签：c#

我开始学习c#，但我不知道什么时候使用`new`关键字，什么时候不使用它。通常我知道为什么要使用它，但是当我在互联网上查看一些代码时，我可以看到很多时候`new`没有使用关键字 - 这些是我会使用它的地方。

例子：

```
static void FileInfoClass()
{
    //this usage of new keyword i understand.
    FileInfo somefile = new FileInfo("c:\\test.txt");

    if (!somefile.Exists)
    {
        //this is the place where i would like to use new
        //like FileStream somefileStream = new FileStream();

        FileStream somefileStream = somefile.Create();                
        somefileStream.Close();
        somefile = new FileInfo("c:\\test.txt");
    }

    //same like before
    StreamWriter texttoAdd;            
    texttoAdd = somefile.CreateText();

    texttoAdd.WriteLine("This is a line in the file");
    texttoAdd.Flush();
    texttoAdd.Close();
} 
```

这是我能想到的最简单的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:16:35.527

我这样理解你的问题：你知道它`new`可以用来创建一个对象，所以你不明白为什么它不用于代码中“出现”新对象的每种情况。

因此，您想知道这两行有什么不同：

```
FileInfo somefile = new FileInfo("c:\\test.txt"); 
```

和

```
FileStream somefileStream = somefile.Create(); 
```

好吧，第二个不是对象的直接构造。实际上这个命令本身并没有创建对象，它只是调用了一个返回对象的函数。

鉴于该函数名为“Create()”，我们可以猜测该函数将创建一个对象并返回它（或者将调用另一个创建对象并返回它的函数）。但这只是一个约定。语言中没有任何内容说名为“Create()”的函数应该真正创建对象。

因此，当您使用此功能时，您的代码不是负责创建对象的代码，因此您不使用关键字`new`. 这种模式称为[**工厂方法**](https://en.wikipedia.org/wiki/Factory_method_pattern)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:55:46.550

在 C# 中，new 关键字可以用作运算符或修饰符。

*   [`new Operator`](http://msdn.microsoft.com/en-us/library/fa0ab757%28v=vs.100%29.aspx)- 用于创建对象和调用构造函数。

*   [`new Modifier`](http://msdn.microsoft.com/en-us/library/435f1dw2%28v=vs.100%29.aspx)- 用于对基类成员隐藏继承的成员。

*   [`new Constraint`](http://msdn.microsoft.com/en-us/library/sd2w2ew5%28v=vs.100%29.aspx)- 用于限制可能用作泛型声明中类型参数的参数的类型。

* * *

**`new Operator`**

```
// cs_operator_new.cs
// The new operator
using System;
class NewTest 
{
   struct MyStruct 
   {
      public int x;
      public int y;
      public MyStruct (int x, int y) 
      {
         this.x = x;
         this.y = y;
      }
   }

   class MyClass 
   {
      public string name;
      public int id;

      public MyClass () 
      {
      }

      public MyClass (int id, string name) 
      {
         this.id = id;
         this.name = name;
      } 
   }

   public static void Main() 
   {
      // Create objects using default constructors:
      MyStruct Location1 = new MyStruct();
      MyClass Employee1 = new MyClass();

      // Display values:
      Console.WriteLine("Default values:");
      Console.WriteLine("   Struct members: {0}, {1}", 
         Location1.x, Location1.y);
      Console.WriteLine("   Class members: {0}, {1}", 
         Employee1.name, Employee1.id);

      // Create objects using parameterized constructors::
      MyStruct Location2 = new MyStruct(10, 20);
      MyClass Employee2 = new MyClass(1234, "John Martin Smith");

      // Display values:
      Console.WriteLine("Assigned values:");
      Console.WriteLine("   Struct members: {0}, {1}", 
         Location2.x, Location2.y);
      Console.WriteLine("   Class members: {0}, {1}", 
         Employee2.name, Employee2.id);
   }
} 
```

输出 ：

```
Default values:
   Struct members: 0, 0
   Class members: , 0
Assigned values:
   Struct members: 10, 20
   Class members: John Martin Smith, 1234 
```

* * *

来源和参考：[链接](http://msdn.microsoft.com/en-us/library/51y09td4%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:45:05.293

new 关键字用于创建新对象。

```
var someUser = new User(); 
```

例如，当您想要创建用户的新实例时，您使用 new 关键字。

一旦你有了对象（用户就是这种情况），那么你可以调用对象上的方法

```
someUser.UpgradeToPremiumAccount(); 
```

在您正在查看的代码中，他们正在创建一个新的 FileInfo 对象，然后对该对象调用 Exists 方法。

对于 StreamWriter，他们声明了一个名为 texttoAdd 的变量，但他们没有创建一个新对象。someFile.CreateText(); 方法正在创建对象并返回它，并将其存储在 texttoAdd 变量中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T20:59:33.247

基本上，这归结为更有意义的内容以及哪些类应该相互了解。

想象一下，您是设计`FileInfo`和`StreamWriter`类的人。现在您需要为用户添加一些`StreamWriter`从`FileInfo`.

您可以决定向其中添加新的构造`StreamWriter`函数`FileInfo`：

```
public StreamWriter(FileInfo fileInfo)
{
    // some implementation, not important for us
} 
```

或者您可以添加一个方法来`FileInfo`创建`StreamWriter`使用一些已经存在的构造函数：

```
public StreamWriter CreateText()
{
    return new StreamWriter(this.FullPath);
} 
```

他们都将工作。因此，现在由您作为设计师来决定哪个选项更好。应该`StreamWriter`知道`FileInfo`并接受它作为构造函数参数吗？实际的设计者决定不，`StreamWriter`应该使用文件名，而不是`FileInfo`s。所以他们将`CreateText()`方法添加到`FileInfo`.

在这两种情况下，`StreamWriter`对象最终都是使用 创建的`new`，但它可能隐藏在某些知道如何正确创建它的方法中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T21:06:20.330

在该行中`FileStream somefileStream = somefile.Create();`，您不需要在`new`此处使用关键字，因为在`Create`函数调用中，`new`关键字被用于实例化`FileStream`. `new`只有在直接调用对象构造函数时才需要使用。

您可以`FileStream`通过调用手动创建[`FileStream somefileStream = new FileStream(...);`](http://msdn.microsoft.com/en-us/library/system.io.filestream.filestream.aspx)。在这种情况下，您可以通过多种不同的方式创建`FileStream`. 甚至还有[`File.Open(...)`](http://msdn.microsoft.com/en-us/library/b9skfh7s.aspx)。

.NET 中的许多对象都有多种实例化它们的方法。

无论您使用哪个完全取决于您。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-30T20:46:38.250

new 关键字仅用于为对象分配内存。在您的情况下，您已经为 someFile 分配了内存。现在您只是从创建文件返回一个文件对象以指向 someFile 。就像您需要阅读的关于返回类型、内存创建/对象分配的评论中所指出的那样。

# javascript - Firebase.set() 添加额外的节点

> ID：14613320
> 
> 赞同：0
> 
> 时间：2013-01-30T20:40:33.507
> 
> 标签：javascript, firebase

使用 Firebase 的根目录运行以下查询时，会添加额外的节点。

询问：

```
fire.set({
"users":[
    {
        "0":[
            {
                "email":"foobar@gmail.com",
                "snake":[
                    {
                        "highScore":"15"
                    }
                ]
            }
        ]
    }
]
}); 
```

结果

![输入错误。](../Images/435cee4d8da05570f7f24f3a102d3547.png)

格式化 json 文件中的数据并使用 Firebase Web 界面直接导入时，我得到了相同的结果。我是否遗漏了文档中的某些内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:29:05.163

这里的问题是，任何时候您使用数组语法，即 [ ... ]，都会在 Firebase 中创建一个“数组”，我们只需使用数字键（即 0、1、2、. ..)。

所以如果你这样做：

```
ref.set({ a: 5 }); 
```

结果对象将是：

```
{ a: 5 } 
```

但是，如果您改为这样做：

```
ref.set([{a: 5}, {b: 6}]); 
```

你会得到：

```
{ 
  '0': { a: 5 }, 
  '1': { b: 6 } 
} 
```

因此，如果您只是从您设置的数据中删除方括号，例如：

```
fire.set({
  "users": {
    "0": {
      "email":"foobar@gmail.com",
      "snake": {
        "highScore":"15"
      }
    }
  }
}); 
```

Web 界面中的结果数据应与您的数据完全匹配。

# c# - 在c#中调整图像宽度而不是高度

> ID：14613325
> 
> 赞同：3
> 
> 时间：2013-01-30T20:40:53.313
> 
> 标签：c#, image, razor

如何在 C# 中调整图像的宽度而不使用 image.resize() 调整高度

当我这样做时：

```
image.Resize(width: 800, preserveAspectRatio: true,preventEnlarge:true); 
```

这是完整的代码：

```
var imagePath = "";
var newFileName = "";
var imageThumbPath = "";
WebImage image = null;            
image = WebImage.GetImageFromRequest();
if (image != null)
{
    newFileName = Path.GetFileName(image.FileName);
    imagePath = @"pages/"+newFileName;
    image.Resize(width:800, preserveAspectRatio:true, preventEnlarge:true);
    image.Save(@"~/images/" + imagePath);
    imageThumbPath = @"pages/thumbnail/"+newFileName;
    image.Resize(width: 150, height:150, preserveAspectRatio:true, preventEnlarge:true);
    image.Save(@"~/images/" + imageThumbPath);
} 
```

我收到此错误消息：

> 方法“调整大小”没有重载需要 3 个参数

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T22:07:27.467

[文档](http://msdn.microsoft.com/en-us/library/system.web.helpers.webimage.resize(VS.111).aspx)是垃圾，所以我偷看了源[代码](https://github.com/aspnet/AspNetWebStack/blob/v2.1/src/System.Web.Helpers/WebImage.cs)。他们使用的逻辑是查看传递的高度和宽度值，并计算每个值的纵横比，将新值与当前值进行比较。无论哪个值（高度或宽度）具有更大的纵横比，它的值都是从另一个值计算出来的。这是[相关的片段](https://github.com/aspnet/AspNetWebStack/blob/v2.1/src/System.Web.Helpers/WebImage.cs#L871-L880)：

```
double hRatio = (height * 100.0) / image.Height;
double wRatio = (width * 100.0) / image.Width;
if (hRatio > wRatio)
{
    height = (int)Math.Round((wRatio * image.Height) / 100);
}
else if (hRatio < wRatio)
{
    width = (int)Math.Round((hRatio * image.Width) / 100);
} 
```

所以，这意味着，如果您不想自己计算高度值，只需传入一个非常大的高度值。

```
image.Resize(800, 100000, true, true); 
```

这将导致`hRatio`大于`wRatio`然后`height`将基于 计算`width`。

既然你已经`preventEnlarge`设置为`true`，你就可以通过`image.Height`了。

```
image.Resize(800, image.Height, true, true); 
```

当然，只计算`height`自己并不难：

```
int width = 800;
int height = (int)Math.Round(((width * 1.0) / image.Width) * image.Height);
image.Resize(width, height, false, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:48:45.543

### 适用于Winform的解决方案

* * *

使用此功能：

```
public static Image ScaleImage(Image image, int maxWidth)
{    
    var newImage = new Bitmap(newWidth, image.Height);
    Graphics.FromImage(newImage).DrawImage(image, 0, 0, newWidth, image.Height);
    return newImage;
} 
```

用法 ：

```
Image resized_image = ScaleImage(image, 800); 
```

# backbone.js - 即使我遵循适当的标准，主干事件也会多次触发

> ID：14613333
> 
> 赞同：0
> 
> 时间：2013-01-30T20:41:12.663
> 
> 标签：backbone.js, backbone-events

我有一个表格，当我单击一行时，我会在侧面 div 中显示详细信息。我在行 (tr) 上创建了一个事件，每次单击该行时都会触发该事件。我遇到的问题是该事件被多次触发。就好像每次触发事件时都在创建一个新视图，但没有创建一个新视图。这是代码：

```
GroupView = class App.GroupView extends Backbone.View
    template: App.Utils.getTemplate 'group'
    selectedId: 0

    events:
        'click tr': 'selectGroup'

    selectGroup: (e) ->
        thisEl = $(e.currentTarget)
        $(thisEl).closest('tr').siblings().removeClass 'selected'
        $(thisEl).closest('tr').addClass 'selected'
        @selectedId = $(thisEl).data().id
        @getGroupDetails @selectedId

    render: -> 
        $(@$el).html @template
            groups: @collection.models

        if @selectedId is 0
            firstRowEl = $(@$el).find('tr:first')
            $(firstRowEl).addClass 'selected'
            @selectedId = $(firstRowEl).data().id

        @getGroupDetails @selectedId

    getGroupDetails: (id, platform) ->
        $('<img/>', 
            src: 'img/ajax_loader_2.gif'
            class: 'ajax-loader'
            ).appendTo '.group-details'

        renderGroupDetails id

groupDetails = new GroupDetailsView
    el: '.group-details'
    model: groupDetailsModel

renderGroupDetails = (id)->
    groupDetails.el = '.group-details'
    groupDetails.stopListening groupDetailsModel
    groupDetails.listenTo groupDetailsModel, 'change', ->
    groupDetails.model = 
        groupDetails: groupDetailsModel.toJSON()
    groupDetails.render()

    groupDetailsModel.fetch
        data:
            id: id
        processData: true 
```

问题是，当我使用 时`groupDetails.stopListening groupDetailsModel`，多事件触发问题已解决，但`groupDetails`视图中没有任何事件被触发。

任何帮助表示赞赏。

干杯，

基亚诺什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T00:23:40.117

所以，给你一个具体的答案是困难的：你粘贴的代码有点难以理解，而且似乎它可能缺少一些位（例如，什么是`groupDetailsModel`？它有任何影响它的视图的逻辑吗？）。不过没关系，因为我认为您在这里需要的是更多的调试帮助，而不是具体的答案。

如果我对您的理解正确，您的问题是`groupDetails.render()`被额外调用，并且您不确定为什么或什么在调用它：正确吗？如果是这样，您值得信赖的调试器可以在几秒钟内回答这个问题。

注意：我要说的一切肯定适用于 Chrome（内置开发者工具）或 Firefox（带有 Firebug 扩展）。它可能也适用于其他浏览器及其工具，我不能肯定地说，因为我不使用它们。

**方法 #1：调试器**

调试器启动后，`debugger;`在方法中添加一行作为第一件事`GroupDetails.prototype.render`。这将使您的浏览器在遇到该行时暂停。当它暂停时，您可以检查右侧的“调用堆栈”，这将*准确地*显示您的代码中的哪一部分刚刚调用了该渲染。您还可以使用调试器检查环境中不同变量的值，以尝试了解您的代码*为何*调用`render`.

**方法 2：Console.trace**

如果您不喜欢使用调试器，还有另一个工具也非常适合回答此类问题。只需`console.trace()`在您的渲染方法中添加为第一行，然后正常运行您的代码。这次您的浏览器将记录（到“控制台”）从代码中该点生成的堆栈跟踪。此堆栈跟踪类似于您在使用时可以看到的调用堆栈，`debugger`因此它将准确地告诉您`render`每次调用的代码。

希望有帮助。

# java - 如何在本地 lib 目录中确定此 jar 的 maven 坐标？

> ID：14613352
> 
> 赞同：3
> 
> 时间：2013-01-30T20:42:06.330
> 
> 标签：java, maven, build, jar

我是 maven 新手，正在将一个 java web 应用程序转换为 maven（而不是由我的 IDE 管理）。我知道可以在本地安装依赖项（第一选择）或将其声明为提供的依赖项（第二选择）。[我读到了](http://maven.apache.org/pom.html)什么`groupId`，，`artifactId`和`version`意思。但是，它没有解释如何确定罐子的确切坐标。

[例如，有问题的 jar（apache-tomcat 7.0.34 的 servlet-api.jar）](http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.34/)在 jar 中没有 pom.xml 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:48:10.357

当你有一个随机的 jar 文件，在这种情况下是 servlet-api.jar，出现在某个文件夹中时，你必须四处寻找它是否与某个版本相同。

**一**：查看罐子内部并记下其中文件的日期（或日期范围）。您可能会注意到那里有哪些文件。你可能需要那个细节。

**二**：去可以找罐子的地方。我喜欢[http://mvnrepository.com/](http://mvnrepository.com/)，您可以在其中输入 jar 的名称。“servlet api”。我在大约 10 秒内找到了这个：

```
<dependency>
    <groupId>org.apache.tomcat</groupId>
    <artifact>servlet-api</artifactId>
    <version>6.0.36</version>
</dependency> 
```

但它不是你的。（又过了 30 秒，我发现了这个：[mvnrepository servlet-api for tomcat 7.0.34](http://mvnrepository.com/artifact/org.apache.tomcat/tomcat-servlet-api/7.0.34)）

*   然后，您可以下载您认为匹配的那个并在其中查看日期是否匹配。
*   它基本上是从这里开始的侦探工作。您可能会找到带有 maven“坐标”的确切 jar，但您可能找不到。

阅读其他答案提醒我，使用 Java EE jar，我发现最好使用通用版本来构建您的应用程序。对 Maven 范围使用“提供”。容器将提供真正的 jar，如果它不是完全标准的，您将不会使用非标准部件，因为您的构建使用了通用版本。

因此，例如，您可以使用以下方式构建：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.4</version>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T21:50:40.293

我通常做的是访问[http://search.maven.org](http://search.maven.org)并查找 jar，例如：servlet-api.jar。您还可以进行完全限定的类名搜索，例如，如果您知道 jar 中有一个类 javax.servlet.http.HttpServletRequest，您可以搜索**fc:javax.servlet.http.HttpServletRequest**，它将列出所有包含此的 jar班级

但是请记住，在 servlet-api.jar 的情况下——它不应该被捆绑到你的 war/ears 中，因为它应该由容器提供（在这种情况下是 tomcat）。通常，创建 Java EE 项目时的最佳实践是在**提供**的范围内包含对 javax.servlet:servlet-api:2.5（或容器支持的其他版本）的依赖项。因此，jar 只会在编译期间存在于您的类路径中，但在运行时它将由容器提供

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:58:48.540

Maven 工件（JAR 文件）将位于例如

```
~/.m2/repository/org/apache/tomcat/artifact/version/ 
```

如果我没记错的话，servlet-api.jar 文件将位于 ~/.m2/repository/javax/servlet/servlet-api/2.5/ 中——假设您使用的是 servlet 规范的 2.5 版。

但是，servlet-api 始终由应用程序容器提供，因此是 Maven POM 中依赖项的“提供”类型。

# r - 如何在 ggplot 或 lattice 中获得 Matplotlib 的符号比例尺之类的东西？

> ID：14613355
> 
> 赞同：7
> 
> 时间：2013-01-30T20:42:18.233
> 
> 标签：r, graphics, ggplot2

对于正负号的重尾数据，我有时喜欢在没有隐藏单位区间结构的情况下查看绘图上的所有数据。

在 Python 中使用 Matplotlib 绘图时，我可以通过选择[symlog scale](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.set_xscale)来实现这一点，它在某个区间外使用对数变换，并在其中进行线性绘图。

以前在 RI 中通过一次性使用[arcsinh](http://mathworld.wolfram.com/InverseHyperbolicSine.html)转换数据来构建类似的行为。然而，刻度标签等是非常棘手的（见下文）。 ![在此处输入图像描述](../Images/7d43fa96fee6c62faccc252faa21f111.png)

现在，我面临着一堆数据，其中[lattice](http://www.statmethods.net/advgraphs/trellis.html)或[ggplot](http://docs.ggplot2.org/current/)中的子集非常方便。由于子集，我不想使用 Matplotlib，但我肯定缺少*symlog*！

## 编辑：

我看到[ggplot 使用了一个名为 scales 的包](https://stackoverflow.com/questions/11053899/how-to-get-a-reversed-log10-scale-in-ggplot2)，它解决了很多这个问题（如果它有效的话）。不过，自动选择刻度线和标签放置看起来仍然很难做得很好。`log_breaks`和的某种组合`cbreaks`？

## 编辑2：

下面的代码还不错

```
sinh.scaled <- function(x,scale=1){ sinh(x)*scale }
asinh.scaled <- function(x,scale=1) { asinh(x/scale) }

asinh_breaks <- function (n = 5, scale = 1, base=10) 
{
    function(x) {
        log_breaks.callable <- log_breaks(n=n,base=base)
        rng <- rng <- range(x, na.rm = TRUE)
        minx <- floor(rng[1])
        maxx <- ceiling(rng[2])
        if (maxx == minx) 
            return(sinh.scaled(minx, scale=scale))
        big.vals <- 0
        if (minx < (-scale)) {
            big.vals = big.vals + 1
        }
        if (maxx>scale) {
            big.vals = big.vals + 1
        }
        brk <- c()
        if (minx < (-scale)) {
            rbrk <- log_breaks.callable(  c(-min(maxx,-scale), -minx ) )
            rbrk <- -rev(rbrk)
            brk <- c(brk,rbrk)
        }
        if ( !(minx>scale | maxx<(-scale))  ) {
            rng <- c(max(minx,-scale), min(maxx,scale))
            minc <- floor(rng[1])
            maxc <- ceiling(rng[2])
            by <- floor((maxc - minc)/(n-big.vals)) + 1
            cb <- seq(minc, maxc, by = by)
            brk <- c(brk,cb)
        } 
        if (maxx>scale) {
            brk <- c(brk,log_breaks.callable( c(max(minx,scale), maxx )))
        }

        brk

    }
}

asinh_trans <- function(scale = 1) {
    trans <- function(x) asinh.scaled(x, scale)
    inv <- function(x) sinh.scaled(x, scale)
    trans_new(paste0("asinh-", format(scale)), trans, inv, 
              asinh_breaks(scale = scale), 
              domain = c(-Inf, Inf))
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-03T16:39:26.780

一个基于包的解决方案`scales`，灵感来自@Dennis 提到的 Brian Diggs 的帖子：

```
symlog_trans <- function(base = 10, thr = 1, scale = 1){
  trans <- function(x)
    ifelse(abs(x) < thr, x, sign(x) * 
             (thr + scale * suppressWarnings(log(sign(x) * x / thr, base))))

  inv <- function(x)
    ifelse(abs(x) < thr, x, sign(x) * 
             base^((sign(x) * x - thr) / scale) * thr)

  breaks <- function(x){
    sgn <- sign(x[which.max(abs(x))])
    if(all(abs(x) < thr))
      pretty_breaks()(x)
    else if(prod(x) >= 0){
      if(min(abs(x)) < thr)
        sgn * unique(c(pretty_breaks()(c(min(abs(x)), thr)),
                       log_breaks(base)(c(max(abs(x)), thr))))
      else
        sgn * log_breaks(base)(sgn * x)
    } else {
      if(min(abs(x)) < thr)
        unique(c(sgn * log_breaks()(c(max(abs(x)), thr)),
                 pretty_breaks()(c(sgn * thr, x[which.min(abs(x))]))))
      else
        unique(c(-log_breaks(base)(c(thr, -x[1])),
                 pretty_breaks()(c(-thr, thr)),
                 log_breaks(base)(c(thr, x[2]))))
    }
  }
  trans_new(paste("symlog", thr, base, scale, sep = "-"), trans, inv, breaks)
} 
```

我不确定参数的影响是否与`scale`Python 中的相同，但这里有几个比较（请参阅[此处](http://matplotlib.org/examples/pylab_examples/symlog_demo.html)的 Python 版本）：

```
data <- data.frame(x = seq(-50, 50, 0.01), y = seq(0, 100, 0.01))
data$y2 <- sin(data$x / 3)
# symlogx
ggplot(data, aes(x, y)) + geom_line() + theme_bw() +
  scale_x_continuous(trans = symlog_trans()) 
```

![在此处输入图像描述](../Images/67fbd6d67a67ae94075e5ca3210cadc5.png)

```
# symlogy
ggplot(data, aes(y, x)) + geom_line() + theme_bw()
  scale_y_continuous(trans="symlog") 
```

![在此处输入图像描述](../Images/4a4613505b45d5efdc35cf7f43ed2a05.png)

```
# symlog both, threshold = 0.015 for y
# not too pretty because of too many breaks in short interval
ggplot(data, aes(x, y2)) + geom_line() + theme_bw()
  scale_y_continuous(trans=symlog_trans(thr = 0.015)) + 
  scale_x_continuous(trans = "symlog") 
```

![在此处输入图像描述](../Images/b204b4a7d6bbfe0033074ca882cf6422.png)

```
# Again symlog both, threshold = 0.15 for y
ggplot(data, aes(x, y2)) + geom_line() + theme_bw()
  scale_y_continuous(trans=symlog_trans(thr = 0.15)) + 
  scale_x_continuous(trans = "symlog") 
```

![在此处输入图像描述](../Images/9ccfa26236635a71a8548469da752256.png)

# arrays - 同时轻松增加和打印值

> ID：14613358
> 
> 赞同：2
> 
> 时间：2013-01-30T20:42:29.753
> 
> 标签：arrays, bash, loops, increment

我需要帮助增加循环内的数组值。问题是变量都是相同的，并且“数字”数组的第二个元素没有增加。

```
#!/bin/bash

Duration=60

declare -a Numbers=("5" "10")

for (( d=1 ; d<=$Duration ; d++ ))
do

  for (( i=0 ; i<${#Numbers[@]} ; i++ ))
  do

        if [ "$MYVALA" == "" ]; then
                MYVALA=${Numbers[i]}
        else
                MYVALA=$(($MYVALA+1))
        fi ;

        echo ""
        echo "number: ${Numbers[i]}"
        echo "-------------"
        echo "new value = $MYVALA"
  done ;
  sleep 1 ;
done ; 
```

这是上面代码的结果：

```
number: 5
-------------
new value = 5

number: 10
-------------
new value = 6

number: 5
-------------
new value = 7

number: 10
-------------
new value = 8 
```

我想得到的是：

```
number: 5
-------------
new value = 6

number: 10
-------------
new value = 11

number: 5
-------------
new value = 7

number: 10
-------------
new value = 12
... 
```

数字 5 和数字 10 每秒打印一次。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:11:53.457

这会产生您想要的输出。新值只是数字加上持续时间。

```
#!/bin/bash

Duration=60
Numbers=(5 10)

for (( d=1 ; d<=Duration ; d++ )) ; do
  for (( i=0 ; i<${#Numbers[@]} ; i++ )) ; do
      let MYVALA=Numbers[i]+d
      echo
      echo "number: ${Numbers[i]}"
      echo '-------------'
      echo "new value = $MYVALA"
  done
  sleep 1
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:12:05.263

要增加数组值，请使用`(( myarray[i]++ ))`. 为了让您的脚本打印出您描述的值，您可以为每个数字保留一个单独的计数器数组。

```
#!/bin/bash

Duration=60

declare -a Numbers=("5" "10")
Counters=( "${Numbers[@]}" )

for (( d=1 ; d<=$Duration ; d++ ))
do

  for (( i=0 ; i<${#Numbers[@]} ; i++ ))
  do
        (( Counters[i]++ ))
        echo ""
        echo "number: ${Numbers[i]}"
        echo "-------------"
        echo "new value = ${Counters[i]}"
  done ;
  sleep 1 ;
done 
```

# android - 使用 Jackson 和 Spring 在 Robospice 中为 REST 请求启用缓存

> ID：14613359
> 
> 赞同：2
> 
> 时间：2013-01-30T20:42:31.193
> 
> 标签：android, jackson, robospice

我有一个使用 Robospice 和 Jackson + Spring 的 android 应用程序来执行 REST 请求。这是有效的，除了 Robospice 似乎没有缓存响应。我还确保请求之间的缓存键是一致的。

我正在像这样设置 SpiceManager：

```
 private SpiceManager mRestManager = new SpiceManager(JacksonSpringAndroidSpiceService.class); 
```

然后，我正在执行这样的请求：

```
mRestManager.execute(customSpiceRequest, requestCacheKey, 
            DurationInMillis.ALWAYS, new CustomRequestListener()) 
```

我不知道它是否相关，但我的 customSpiceRequest 扩展了 SpringAndroidSpiceRequest。我已经确定 requestCacheKey 在请求之间也是相同的。

我还需要做些什么来启用请求之间的缓存吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T10:06:09.253

事实上，RoboSpice 正在做您要求的事情：您将 DurationInMillis.ALWAYS 作为参数传递给执行。

这意味着缓存中的数据将始终被视为过期。因此，SpiceRequest 将始终执行网络调用。调用执行时，您应该只使用不同的 cacheDuration 值。

从那时起，Javadoc 得到了增强：

*   cacheExpiryDuration ：缓存内容将被视为过期的持续时间（以毫秒为单位）。例如 DurationInMillis.ALWAYS 意味着缓存中的数据将始终被视为过期，因此请求将始终执行其网络操作以获取新数据。DurationInMillis.NEVER 意味着数据永远不会被认为是过期的，请求永远不会执行网络操作来刷新数据，但总是会返回缓存的数据。（见 {@link DurationInMillis}）。*

# c - scanf 返回 2，不正确

> ID：14613365
> 
> 赞同：2
> 
> 时间：2013-01-30T20:42:42.960
> 
> 标签：c, return, scanf

```
int main(void){
    float f=0,ff=0;
    if (scanf("%f %f",&f,&ff) == 2){
        printf("True\n%f %f",f,ff);fflush(stdout);
    } else{
        printf("False\n%f %f",f,ff);fflush(stdout);
    }

    getchar();
    return 0;
} 
```

如果我的输入是“6.81 7.kj”，它返回真！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:36:44.830

`7.`是一个有效的浮点数。剩下更多输入的事实与呼叫的成功无关。

# java - Neo4j Graph DB - 如何使用多线程对整个图进行计算

> ID：14613368
> 
> 赞同：-1
> 
> 时间：2013-01-30T20:42:49.420
> 
> 标签：java, multithreading, neo4j

我有一个包含 400 万个节点和 1 亿个关系的 neo4j 图数据库。我尝试使用一种算法为所有相邻节点对（基本上是所有边）计算一个数字，该算法对所有节点使用传入、传出边的数量以及所有传出边的所有传入边的数量。

我正在使用 Java API，但我意识到获取所有传出边的这些传入边非常慢。我尝试获取所有这些数据并使用多个线程进行计算，结果变得更好，但对于给定节点及其所有相邻边缘仍然需要几秒钟（有时 30 秒）。（没有线程可能需要 15 分钟）。因此，如果我想对所有边进行此计算，那么我应该达到每个节点几毫秒的时间框架。

所以我会问，使用多线程的一般策略是什么——以及如何使用嵌入式 neo4j 图形数据库（比如在四核 4G 笔记本电脑上？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T22:31:30.337

这是您测量的第一次还是第二次运行？如果是第一个，那是因为冷缓存并将数据加载到内存中。

您可能还应该考虑配置您的 JVM 设置和 Neo4j 缓存。

请参阅：[http ://docs.neo4j.org/chunked/snapshot/embedded-configuration.html](http://docs.neo4j.org/chunked/snapshot/embedded-configuration.html)

# android - Android 平台如何检测 ANR 问题？

> ID：14613380
> 
> 赞同：6
> 
> 时间：2013-01-30T20:43:26.730
> 
> 标签：android, android-anr-dialog

当 Android 应用程序没有响应时，会弹出一个 ANR 对话框。我的问题是：Android 平台如何检测 ANR 并做出启动此类弹出对话框的决定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:48:26.563

它基于 UI 线程以及 UI 线程返回消息循环所需的时间（作为应用程序开发人员，消息循环对您隐藏，但您的 UI 线程上有一个巨大的循环，用于接收用户输入的消息，绘制请求、AsyncTask 完成等）。基本上，在每条消息声明 ANR 之前，您有固定的时间。睡眠等待消息所花费的时间永远不会导致 ANR。Android中有一个单独的看门狗进程，它检查自线程上次到达该循环顶部以来的时间，如果它太长，它将杀死它并显示ANR对话框。

# java - XMLStreamReader 编码

> ID：14613385
> 
> 赞同：3
> 
> 时间：2013-01-30T20:43:41.677
> 
> 标签：java, xml, unicode, xmlstreamreader

我的 XML 中有一些来自 Unicode 扩展 B 中文/日文/韩文的字符：

但是当我使用 streamReader.getText() 它返回：

```
ࠀ 
```

有谁知道 Java 的 XMLStreamReader 的 unicode 字符编码方案是否可以更改？

它适用于常见的东亚字符，但不适用于 Unicode 扩展 B 中的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-25T17:20:48.120

创建 XML Stream Reader 时，可以指定编码为 UTF-8。就像下面的 API

abstract XMLStreamReader createXMLStreamReader(InputStream stream, String encoding)

# mysql - Web Service / MySQL 会在 iOs Simulator 中运行吗

> ID：14613394
> 
> 赞同：-2
> 
> 时间：2013-01-30T20:44:24.500
> 
> 标签：mysql, ios, json, xcode4

我正在使用 XCode4 编写一个应用程序，并且正在接近开发的一部分，其中我使用 Web 服务连接到 MySQL 数据库以提取当前和写入新的用户帐户信息。

只是想知道这是否适用于 XCode 捆绑包附带的 iOS 模拟器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:56:27.400

你不需要这个问题的答案，因为你在同一个问题中就有答案。

我真的认为您应该**将以下内容带回家**：

1.  *Web 服务*是（可能）远程实体的接口，它将通过数据/计算等回答您。
2.  Web 服务有两个方面：(1) 服务器端是真正的 Web 服务，(2) 客户端是您用来连接和使用/获取数据的 Web 服务库
3.  MySQL 数据库的 Web 服务将**封装/隐藏**数据库。这通常是为了让您不需要处理查询语言/数据转换/关系/等。请记住，Web 服务上没有 MySQL（开箱即用），因此必须有人**为您连接这两者**。
4.  MySQL 服务器可以在您的计算机、您计算机上的虚拟机或远程计算机上运行。
5.  Web 服务可以在同一个地方运行，但**不一定在同一个地方**
6.  也就是说，iOS 模拟器不需要运行 web 服务**或**MySQL 服务器，它只需要连接到它们。因此，它们可能在任何地方，您只需要能够连接到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:35:56.590

模拟器能够发出 HTTP(S) 请求，因此 Web 服务当然可以工作。

# javascript - chrome.storage set\get 澄清

> ID：14613403
> 
> 赞同：7
> 
> 时间：2013-01-30T20:44:58.507
> 
> 标签：javascript, google-chrome, google-chrome-extension, storage, google-chrome-storage

我想在我的扩展中保存信息。我曾经`Chrome.storage.sync`这样做，但是当我在保存后立即阅读时，我无法正确检索该值。可能做了一些愚蠢的事情......我尝试清除本地存储，[`chrome.storage.sync.clear`](http://developer.chrome.com/stable/extensions/storage.html)但这没有帮助。

我的保存功能是（看看[目前](https://chrome.google.com/webstore/detail/currently/ojhmphdkpgbibohbnpbfiefkgieacjmh?utm_source=chrome-ntp-icon)是如何做到的）：

```
save: function (type, key, data) {
    Storage.storageOption(type).set({key:data}, function () {
        console.log("saved data");
    });

load: function (type, key) {
    Storage.storageOption(type).get(key, function (object) {
        console.log("read : " +object);
        return object[key];
    })} 
```

并将其称为：

```
Storage.save("", 'path',username);
console.log(Storage.load("",'path')); 
```

结果是：

> 保存的数据
> 
> 不明确的
> 
> 阅读：[对象对象]

* * *

## 更新：

好的，显然我如何传递对象的键值对存在问题，因为当我这样调用它时： `chrome.storage.sync.set({'path':username}, function(){});`

在控制台中打印存储会产生更好的输出：

> 不明确的
> 
> 晒

仍然不确定这个未定义是什么......

* * *

## 更新 2：

成功写入存储后，在触发文档就绪时尝试读取它。使用以下代码：

```
var dbdata = chrome.storage.sync.get("path",function(object){
    return object['path'];
}); 
```

然而，函数的主体并没有被执行，尽管文档说它会在任何情况下运行，并且会设置 lastError 以防出错。

有什么建议么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T20:53:32.133

您传递给 chrome.storage.sync 的函数的返回值不符合您的预期。该值仅在回调中可用。它最终不会出现在`dbdata`.

此外：

`chrome.storage.sync`是一个异步 API。

您必须等待它完成才能检索数据。

```
chrome.storage.sync.set({'value': 12}, function() {
    chrome.storage.sync.get("value", function(data) {
      console.log("data", data);
    });
  }); 
```

输出是：

```
data Object {value: 12} 
```

manifest.json 必须包含：

“权限”：[“存储”]，

# c++ - std::signal 和 std::raise 线程安全吗？

> ID：14613409
> 
> 赞同：15
> 
> 时间：2013-01-30T20:45:09.247
> 
> 标签：c++, c, multithreading, c++11, signals

C 和 C++ 标准支持信号的概念。但是，C11 标准规定函数 signal() 不能在多线程环境中调用，或者行为未定义。但我认为信号机制本质上是用于多线程环境的。

来自 C11 标准 7.14.1.1.7 的引用

> “在多线程程序中使用这个函数会导致未定义的行为。实现的行为应该就像没有库函数调用信号函数一样。”

对此有何解释？

下面的代码是不言而喻的。

```
#include <thread>
#include <csignal>

using namespace std;

void SignalHandler(int)
{
    // Which thread context here?
}

void f()
{
    //
    // Running in another thread context.
    //
    raise(SIGINT); // Is this call safe?
}

int main()
{
    //
    // Register the signal handler in main thread context.
    //
    signal(SIGINT, SignalHandler);

    thread(f).join();
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T21:04:10.240

> 但我认为信号机制本质上是用于多线程环境的。

我认为这句话是中心误解。`signal()`是一种用于*进程*间通信的方法，而不是用于*线程*间的。线程共享公共内存，因此可以通过互斥锁和控制结构进行通信。进程没有公共内存，必须使用一些明确`signal()`的通信结构，如文件系统。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T21:34:23.023

我认为您将特定于进程的信号与线程之间的通信混淆了。如果它在您所追求的线程之间共享信息，您可能会在新的[C++11 线程支持库](http://en.cppreference.com/w/cpp/thread)中找到您想要的内容。当然，这取决于你真正想做什么。

根据我对您的代码的了解，您希望线程以某种方式“发出信号”，并且您希望能够在发出该事件的信号时运行一些代码。鉴于此，我将仔细研究线程支持库中的 Futures 部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T21:44:42.167

C11 标准的声明“在多线程程序中使用此函数会导致未定义的行为”，具体指的是函数`signal()`。所以问题是是否使用`signal()`“在多线程程序中”。

据我所知，“多线程程序”一词在 C 标准中没有定义，但我认为它是指已创建多个执行线程但尚未完成的程序。这意味着`signal()`在您的示例程序中调用该程序时，该程序不是多线程的，因此在此要求下程序的行为不是未定义的。

（但是 C++11 要求“所有信号处理程序都应具有 C 链接”，*[18.10 其他运行时支持 [support.runtime] p9]*。由于您的示例程序使用具有 C++ 链接的处理程序，因此行为未定义。）

* * *

正如其他人指出的那样，信号不适用于线程之间的通信。例如，C 和 C++ 标准甚至没有指定它们在哪个线程上运行。相反，标准库提供了其他用于线程间通信的工具，例如互斥锁、原子等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-18T10:31:08.900

我认为您只是误解了*undefined behavior*一词，不幸的是，该词过多地表示“将发生坏事”。这里的术语实际上只是它所说的意思：C 标准没有对`signal`在多线程上下文中使用的含义做出任何假设。

通常，C 标准中的`signal`/`raise`接口本身并不是很有用，而只是在其之上定义的平台/操作系统特定事物的占位符。

So for an interaction between `signal` and threats doesn't give you a contract. Or stated otherwise, the interaction of `signal` and threads is left to the platform implementation.

# visual-studio-2010 - 许多项目在缓慢的开发环境中的解决方案

> ID：14613411
> 
> 赞同：2
> 
> 时间：2013-01-30T20:45:16.517
> 
> 标签：visual-studio-2010, azure, virtual-machine, projects-and-solutions

目前我们有一个包含 40 多个项目的 VS2010 解决方案，所有团队都在非常慢的虚拟机上工作（2 GHz proc + 1.75GB RAM）。在这种情况下工作非常困难，因为通常从 Visual Studio 构建，即使是 7-8 个项目也需要将近 10 分钟。我们正在等待新的虚拟机，但我不认为它们会更快。是否有任何变通方法可以加快开发过程？

我现在看到的唯一方法是将一个解决方案拆分为几个较小的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:48:54.473

如果您只处理 40 多个项目中的几个，请卸载您不使用的项目。

右键单击解决方案资源管理器中的项目 -> 卸载项目

您可以阅读此[博客文章](http://blogs.msdn.com/b/jjameson/archive/2009/03/06/large-visual-studio-solutions-by-loading-unloading-projects.aspx)了解更多详细信息。

# oracle10g - 在 Oracle 10g 中计算跨列的小计

> ID：14613412
> 
> 赞同：1
> 
> 时间：2013-01-30T20:45:18.577
> 
> 标签：oracle10g

请在下面找到我的问题。

我的桌子

```
Col1 Col2 Col3 Col4 Col5 Col6 Col7 Col8
ABC    1    1    4    5    2   1     1
CDE    1    1    1    1    1   1     1 
```

预期产出

```
Col1 Col2 Col3 Col4 Col5 Col6 Col7 Col8  Subtotal
ABC    1    1    4    5    2   1     1      15
CDE    1    1    1    1    1   1     1       7 
```

我正在使用oracle 10g。

我尝试使用 pivot 函数，但它对 oracle 10g 无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:51:48.783

这不是将各个列添加在一起的问题吗？

```
SELECT col1, col2, col3, col4, col5, col6, col7, col8
       col2 + col3 + col4 + col5 + col6 + col7 + col8 subtotal
  FROM your_table 
```

我猜这个问题比你的例子传达的更多......

# nsstring - 为 NSUrl 组合字符串和地标数据的最佳方法？

> ID：14613416
> 
> 赞同：0
> 
> 时间：2013-01-30T20:45:35.083
> 
> 标签：nsstring

我正在尝试根据纬度和经度位置获取我的应用程序的温度和天气数据...

我怎样才能让它工作？

```
 NSURL *jsonurl = [NSURL URLWithString:@"http://www.myweather2.com/developer/forecast.ashx?uac=(API-KEY)&output=json&query=",placemark.location,@"&temp_unit=f"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:08:36.810

```
NSString *jsonStr = [NSString stringWithFormat:@"http://www.myweather2.com/developer/forecast.ashx?uac=(API-KEY)&output=json&query=%@&temp_unit=f", placemark.location];
NSURL *jsonurl = [NSURL URLWithString:jsonStr]; 
```

这假定 for 的值`placemark.location`是一个仅包含有效 URL 字符的 NSString。

# visual-studio-2010 - Mono fo Android - 适用于许多客户的一种解决方案

> ID：14613421
> 
> 赞同：0
> 
> 时间：2013-01-30T20:45:41.223
> 
> 标签：visual-studio-2010, xamarin.android

我为三个不同的客户端创建了三个不同的解决方案，但这些解决方案适用于具有相同功能、类、方法、分辨率的应用程序，但图像、XML 资源文件和 Web 服务参考除外，它们特定于每个客户端一。

我只想为所有这些应用程序提供一个解决方案，我可以在 VS2010 IDE 中打开它进行版本，没有错误。所以，当我需要构建或发布一个特定的应用程序时，我只需设置我需要的客户端，然后继续构建或发布。

重要的是要考虑 XML 文件名将与类和图像名称相同。不同之处在于内容，但名称始终相同。

我的目的是减少维护许多解决方案的工作量，只使用一种解决方案。

在我的公司，我们很快就会有超过这三个客户，所以我很担心如何维护它。最好的方法是只有一个解决方案，当我需要为新客户端生成新应用程序时，我只需更改/包含一些东西（如一些资源和图像）并编译到新的客户端文件夹。

可能吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:27:56.873

一种选择是拥有一个具有以下内容的主解决方案

*   包含您的实际应用程序和所有共享代码的“模板”项目
*   适用于所有客户的项目

在为您的客户提供的项目中，您可以拥有指向来自共享项目的文件中的文件的链接。然后，在每个项目中，您可以添加仅特定于它们的文件。

使用这种结构，每当您对模板项目进行更改时，所有客户端项目也会更新，因为它们只有指向模板项目的指针。

这种设置的一个很好的参考是[Json.Net Code Base](https://github.com/JamesNK/Newtonsoft.Json/tree/master/Src)。在那里，他有一个针对所有不同配置的解决方案和项目，但它们都共享相同的文件。

在确保正确命名 xml 文件方面，您可能只想在主应用程序中进行一些检查，以确保它具有所需的所有文件，或者可能在构建过程中添加检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:39:51.940

有很多方法可以解决这个问题。

我最喜欢的是运行某种预构建步骤——可能在 Visual Studio 之外——它只是在构建之前用正确的文件替换文件。这将很容易实现自动化并且易于扩展。

如果您要为三个以上的客户进行构建，那么我认为您应该考虑从 Visual Studio 构建切换到其他一些自动构建系统 - 例如从命令行或从 TeamCity 或 CruiseControl 之类的 MSBuild。如果您的构建是自动化的（并且健壮的），您会发现更容易扩展

* * *

如果您不喜欢文件的想法，那么您可以尝试很多其他的方法：

*   您可以尝试执行与上述类似的步骤，但可以在 VS 中使用预构建步骤执行此操作。
*   您可以使用 .csproj 文件中的条件节点通过项目配置切换文件
*   您可以考虑将特定于客户端的资源转移到另一个程序集中 - 然后在运行时使用 GetResourceStream （或类似的）来提取资源。

但是这些对我来说都没有那么好！

# xcode - 当它是 UINavigationController 时设置 tabBarController.selectedIndex/selectedViewController

> ID：14613423
> 
> 赞同：0
> 
> 时间：2013-01-30T20:45:42.793
> 
> 标签：xcode, uinavigationcontroller, uitabbarcontroller, uitabbar

我的 tabBarController 中有 5 个视图，它们都嵌入到单独的导航控制器中，即每个视图都有自己的导航控制器。我这样做是为了更容易推动 segue，我知道这可能不是最好的解决方案，但它工作正常。现在我的问题：

我正在尝试使用以下代码设置初始视图：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    tabBarController.selectedIndex = 2;
    return YES;
} 
```

但是它根本不起作用，应用程序只是启动并索引 0（最左边的视图）。

我已经搜索了这样的彻底线程[，](https://stackoverflow.com/questions/7520971/applications-are-expected-to-have-a-root-view-controller-at-the-end-of-applicati?page=1&tab=votes#tab-top)并尝试了许多不同的方法来解决这个问题，但没有任何成功......

最接近的是当我在 MainStoryboard_iPhone.storyboard 中选中我想开始的视图控制器中的“是初始视图控制器”框时。这样我得到了正确的起始视图控制器，但标签栏没有显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:57:02.537

由于您正在使用情节提要，请执行以下操作： 1) 为您的 tabBarController 提供情节提要标识符（例如 tbc）；2) 在您的 appDelegate DidFinishLaunching 中，执行此操作 ::

```
UITabBarController *tbc = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil] instantiateViewControllerWithIdentifier:@"tbc"];

[tbc setSelectedIndex:1];
[self.window setRootViewController:tbc];
[self.window makeKeyAndVisible];

return YES; 
```

PS：这只是使其工作的众多方法之一

# ruby-on-rails - 我应该从 rails 2.3 升级到 3+ 还是等到 rails 4 发布后再升级？

> ID：14613424
> 
> 赞同：10
> 
> 时间：2013-01-30T20:45:43.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, upgrade, rails-3-upgrade, ruby-on-rails-4

我即将开始着手将公司的旧 rails ap 从 2.3/1.87 移植到最新版本的 rails。我应该等待rails 4，还是应该等待3.2？

我们将借此机会确保有完整的测试覆盖率，并且可能还会涉及一些重写。第一个目标是确保所有当前功能都可以运行。

我们希望尽可能多的当前代码库在最新版本的 rails 下工作。我们将重写任何没有的部分。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T21:04:29.413

我会考虑以下两种选择：

**A) 重新编写应用程序。**
在这种情况下，我会在 rails 3.2.10 中执行此操作，不要等到 4，因为它必须发布、动摇、发现错误等。使用 rails 几乎永远不会等待，因为它的发布周期如此之快主要变化。在过去的几年里，我通过艰难的方式学到了一些东西。

**B) 逐步升级。**
我也不会等到 4 来了，现在去 3.2.10。首先将 2.3 应用程序更新到 rails 3.0 这实际上可能并不难。有一些格式更改和活动记录更改，但大多数都相当直截了当，并且被其他人很好地记录了下来。请注意弃用警告，因为这些警告通常在 Rails 版本 x.0 中引入，然后在 x.1 中实际删除（因此在这种情况下，这意味着 3.0 和 3.1）

一旦完成并且您已经开始尝试并确保一切正常，然后继续升级到 rails 3.1 这实际上是一个相当大的升级，因为它引入了[资产管道](http://guides.rubyonrails.org/asset_pipeline.html)。您需要阅读并遵循建议。不要通过不将其用于生产来“逃避”。基本上它做了两个关键的事情：缩小 js 代码并将所有 js 和 css 代码编译到 1 个文件中（每个）。这有助于加快网页速度并减少对所有单个资产的服务器请求。

下一次将 ruby​​ 从 1.8.7 升级到 1.9.3 这应该相对轻松，但与所有步骤一样，请仔细检查应用程序，显然如果您有自动回归测试，它们应该运行（对于此处列出的每个步骤都相同）。

最后将 rails 从 3.1 升级到 3.2.11，其中包括一个安全修复程序。

* * *

您做出的选择将取决于大量其他因素，包括技术和非技术因素，包括：

*   开发者带宽
*   开发者体验
*   预算
*   时间线
*   代码质量
*   代码库大小
*   应用程序的用户数量（因此会影响任何问题）。
*   提供客户支持以就问题进行现场电话。

有用的资源：

*   [https://github.com/rails/rails_upgrade](https://github.com/rails/rails_upgrade) (2.3 -> 3.0)

*   [http://railscasts.com/episodes/225-upgrading-to-rails-3-part-1](http://railscasts.com/episodes/225-upgrading-to-rails-3-part-1)

*   [http://davidjrice.co.uk/2011/05/25/how-to-upgrade-a-rails-application-to-version-3-1-0.html](http://davidjrice.co.uk/2011/05/25/how-to-upgrade-a-rails-application-to-version-3-1-0.html)

*   [http://railscasts.com/episodes/282-upgrading-to-rails-3-1](http://railscasts.com/episodes/282-upgrading-to-rails-3-1)

*   [http://omgbloglol.com/post/364624593/rails-upgrade-is-now-an-official-plugin](http://omgbloglol.com/post/364624593/rails-upgrade-is-now-an-official-plugin)

*   [http://guides.rubyonrails.org/3_2_release_notes.html](http://guides.rubyonrails.org/3_2_release_notes.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T20:59:02.410

我认为您首先需要更新到 3.x，一段时间后（当 4.1 或类似版本发布时）您会将您的应用程序更新到最新的 Rails 版本。

我强烈建议为当前代码库进行测试（如果还没有完成的话）。当您更新到 Rails 3 时，您将获得一个很好的错误基础，您需要在生产之前修复这些错误。

还有很多关于如何将 2.x 更新到 3.x Rails 应用程序的教程（视频和文本）。

**我的建议：**将您当前的应用程序更新到 3.2 并等到 4.x 分支稳定，您可以在生产模式下使用它（从 4.0 发布大约需要 4-8 个月）

# php - JQuery .load() 或 .ajax() 或 .post() 用于将表单数据发送到 php 函数

> ID：14613426
> 
> 赞同：1
> 
> 时间：2013-01-30T20:45:55.627
> 
> 标签：php, jquery, ajax, .post

尝试使用 JQuery 的功能之一来实现 AJAX。我一直在尝试 .load()、.ajax() 或 .post() 以各种方式，通过使用 Stack Overflow 上的一些示例但没有成功。

我有一个表单，它查询 oracle DB，并返回另一个表单和一个结果表。我让它以传统的方式使用单独的 PHP 文件（重新加载一个全新的页面）。现在我只想加载内容而不刷新页面。

启动表单 PHP (checkin_start.php)：输入条形码并提交……</p>

```
<div class="content" id="bodyContent">
  <form id="usualValidate" class="mainForm" method="post" action="">
    <label>Barcode:<span>*</span></label>
    <input type="text" class="required" name="startBarcode" id="startBarcode"/>
    <input type="submit" value="submit" class="blueBtn" id="startBtn" />
  </form>
</div> 
```

处理 PHP (checkin_process.php)：一个新的表单和来自 php 函数的查询结果被加载到 id="bodyContent"...</p>

```
<form id="checkinProcess" class="mainForm" method="post" action="">
  <label>Barcode:<span>*</span></label>
  <input type="text" class="required" name="processBarocdes" id="processBarcodes"/>
  <input type="submit" value="submit" class="blueBtn" id="submitBtn" />
</form>
<!-- Shipment List Table -->
<?php
  // Accept a parameter from #usualValidate form and run query.                 
  $barcode = $_POST['startbarcode'];    
  search_shipped_barcode($barcode);                         
?> 
```

函数 PHP (functions.php)：返回结果表……</p>

```
<?php 
function search_shipped_barcode($barcode){
<--! DB connection & query -->  
  echo "<table>";
    <--! echo table results -->
  echo "</table>";
}
?> 
```

我想无论我选择哪一个，我都可能遇到同样的问题，所以这是我的 .post() 尝试。我不太明白如何将表单数据传递给我的 php 函数并将数据返回...

```
$(document).ready(function() {
  $("#usualValidate").submit(function(sevt) {
    sevt.preventDefault();
    var startBC = $("#startBarcode").val();
    $.post("checkin_process.php",
          {"startBarcode" : "startBC"},
          function(data) {$("#bodyContent").html(data)},
          "html");
  });
}); 
```

感谢您的任何见解....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:51:31.263

当您使用 $.post 时，除非它们是文字，否则不应引用这些值。

试试这个：

```
$(document).ready(function() {
  $("#usualValidate").submit(function(sevt) {
    sevt.preventDefault();
    var startBC = $("#startBarcode").val();
    $.post("checkin_process.php",
          {startBarcode : startBC},
          function(data) {
            $("#bodyContent").html(data);
           // log the returned data to console for debug 
           console.log(data);
        });
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:05:13.103

在您的 javascript 文件中，您可以使用该`post`方法，也可以使用`ajax`以下示例中的方法发送数据：

```
$.ajax({
    type : 'post',
    url : 'currentphpfile.php',
    //Here is where the data is put
    data : {
        "ajax" : "1",
        "otherData" : "abc"
    },
    success : function(data, textStatus, jqXHR) {
        //Do something with the data here like insert it into the document
    },
    error : function(XMLHttpRequest, textStatus, errorThrown) {
        //Do something to fix the error
    },
    dataType : 'text' //Or automatically parse a json response with 'json'
}); 
```

为此，您需要在 php 文件中添加一些可以处理请求的内容，如下所示：

```
if (!empty($_POST['ajax']) && $_POST['ajax']==1){
    //Do stuff with the other post data
    //Here's how to return the data to your script:
    //If you chose a text response above:
    echo $importantData;
    exit;
    //If you chose json
    echo json_encode(array("title" => $title, "text" => $text /*, etc... */));
} 
```

我还没有测试过这段代码的错误，但你可能明白了。

# python - Python 语法：比较日期时间字段并仅在经过足够的时间后才更新

> ID：14613431
> 
> 赞同：-2
> 
> 时间：2013-01-30T20:46:11.477
> 
> 标签：python, datetime

Python新手，我想做这样的事情：

```
now = datetime.now()

if now - myClass.last_updated_date >= 3 min:
    myClass.update() 
```

意思是，如果 myClass 在过去 3 分钟内没有更新，请立即更新。

last_updated_date 也是一个日期时间值。

如何以分钟或秒为单位获得这两个日期时间值之间的差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:48:33.477

只需减去 datetime 对象就会得到一个[`datetime.timedelta`](http://docs.python.org/2/library/datetime.html#timedelta-objects)，它们可以直接相互比较：

```
In [1]: import datetime

In [2]: old = datetime.datetime.now()

In [3]: new = datetime.datetime.now()

In [4]: new - old
Out[4]: datetime.timedelta(0, 6, 502461)

In [5]: new - old > datetime.timedelta(minutes=3)
Out[5]: False

In [6]: new - old > datetime.timedelta(seconds=3)
Out[6]: True 
```

这在[`datetime`文档页面](http://docs.python.org/2/library/datetime.html)上解释得非常清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:49:26.977

```
delta = now - myClass.last_updated_date
minutes = delta.minutes
seconds = delta.seconds
type(delta) #=> <type 'datetime.timedelta'> 
```

查看[http://docs.python.org/2/library/datetime.html](http://docs.python.org/2/library/datetime.html)了解更多信息。

# java - Java - 检查字符串中的最后一个字符是否为数字

> ID：14613442
> 
> 赞同：2
> 
> 时间：2013-01-30T20:46:40.347
> 
> 标签：java

我想知道我可以用什么来检查字符串中的最后一个字符是否是数字。例如对于 ID：“S000123”。

我使用以下内容检查它是否以 E、S 或 X 开头。

```
if(! id.startsWith("E") || ! id.startsWith("S") || ! id.startsWith("X")) {
    alertinputError("Incorrect format in the ID field", lineNum);
    return;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T20:49:35.223

你可以简单地使用`id.matches(".\\d+")`. 但是，要检查是否`id`以 开头或后跟一串数字，您可以使用`E``S``X`

```
id.matches("[ESX]\\d+") 
```

* * *

**相关文件**

*   [`matches`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-05T21:46:00.790

我知道这是一篇非常古老的文章，但对于未来的读者，我想我会添加一种不同的方法。

我个人发现正则表达式非常难读（你知道有人可以在不使用谷歌的情况下编写正则表达式吗？）

所以我更喜欢这种方法：

```
 char lastChar = string.charAt(string.length() - 1)
 return Character.isDigit(); 
```

如果你想为最后 N 个字母而不是 1 做它：

```
string.substring(string.length() - n).chars()
            .allMatch(Character::isDigit); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T20:53:03.950

正则表达式可能在这里工作得很好。

```
String foo = "bar123";
Pattern p = Pattern.compile(".*[0-9]+$");
Matcher m = p.matcher(foo);
if(m.matches)
    System.out.println("yeah!"); 
```

因此，如果字符串由任何一串字符组成，后跟一个或多个数字，这将打印“是的！”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T20:50:47.500

试试这个：

`id.matches("^.+?\\d$")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T20:58:33.080

尝试一下：

```
String id = "S000123";
Pattern pattern = Pattern.compile("[ESX][0-9].*");
Matcher matcher =  pattern.matcher(id);
System.out.println(matcher.matches()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T21:16:09.790

好的，那么您可以使用以下代码：

```
boolean flag = true;
for (int i = id.length() - 1 ; i >= id.length() - 6 ; i--)
{
   if (!Character.isDigit(id.charAt(i)))
   {
      flag = false;
      break;
   }
}
if (flag)
System.out.println("ID is valid");
else
System.out.println("ID is invalid"); 
```

# sql - 在 SQL Server2008 中使用 Sumif

> ID：14613443
> 
> 赞同：9
> 
> 时间：2013-01-30T20:46:47.617
> 
> 标签：sql, sql-server-2008

我目前担任医疗保健分析师。在过去的几年里，我一直在使用 Microsoft Access 来查询和生成报告。我的公司现在希望我学习、扩展我的 SQL 知识并在以后每天使用 SQL Server2008。

我在理解 Access 和 SQL 之间的差异方面取得了一些进展，但它们仍然有很多我不熟悉的东西。

我想对子查询以及如何在 SQL 中使用 SUMIF 有所了解。下面我粘贴了步骤 (1) 我放在一起的 SQL 子查询的第一部分。步骤 (2) 是我想要转换为 SQL**的 Microsoft Access 中的 SQL 视图，但需要对 SUMIF 语句的正确语法有所了解。**

非常感谢任何见解...

**步骤 (1) SQL Server 2008：**

```
SELECT
    [GROUPING_OF_CLINIC_ID].CLINIC_ID
,   OUTPAT_ACCT_REC.CHARGE_CLASS
,   [GROUPING_OF_CLINIC_ID].PATIENT_NUMBER
,   [GROUPING_OF_CLINIC_ID].REGISTRATION_CD
,   OUTPAT_REGISTER.PRIMARY_FINAN
,   REPLACE(CONVERT(varchar(10), OUTPAT_ACCT_REC.ENTRY_DATE, 101), '/', '') AS ENTRY_DATE
,   SUM(ENTRY_AMOUNT) AS ENTRY_AMOUNT
FROM
    OUTPAT_REGISTER
    LEFT JOIN 
        OUTPAT_BILL_REF
        ON 
        (
            OUTPAT_REGISTER.PATIENT_NUMBER = OUTPAT_BILL_REF.PATIENT_NUMBER
        )
            AND (OUTPAT_REGISTER.REGISTRATION_CD = OUTPAT_BILL_REF.REGISTRATION_CD)
    LEFT JOIN 
        OUTPAT_ACCT_REC
        ON 
        (
            OUTPAT_BILL_REF.PATIENT_NUMBER = OUTPAT_ACCT_REC.PATIENT_NUMBER
        )
            AND (OUTPAT_BILL_REF.BILL_REFERENCE = OUTPAT_ACCT_REC.REFERENCE_NUM)
    LEFT JOIN
        (
            SELECT
                CLINIC_ID
            ,   PATIENT_NUMBER
            ,   REGISTRATION_CD
            FROM
                OP_VISIT_HISTRY
            GROUP BY
                CLINIC_ID
            ,   PATIENT_NUMBER
            ,   REGISTRATION_CD
            --ORDER BY CLINIC_ID
        ) AS [GROUPING_OF_CLINIC_ID]
        ON 
        (
            OUTPAT_REGISTER.PATIENT_NUMBER = [GROUPING_OF_CLINIC_ID].PATIENT_NUMBER
        )
            AND (OUTPAT_REGISTER.REGISTRATION_CD = [GROUPING_OF_CLINIC_ID].REGISTRATION_CD)
GROUP BY
    [GROUPING_OF_CLINIC_ID].CLINIC_ID
,   OUTPAT_ACCT_REC.CHARGE_CLASS
,   [GROUPING_OF_CLINIC_ID].PATIENT_NUMBER
,   [GROUPING_OF_CLINIC_ID].REGISTRATION_CD
,   OUTPAT_ACCT_REC.ENTRY_DATE
,   OUTPAT_REGISTER.PRIMARY_FINAN
HAVING
    OUTPAT_ACCT_REC.ENTRY_DATE > '12/31/2010' 
```

**步骤（2）从 SQL 视图中的访问：**

```
SELECT [Non Recurring Clinic Step1].CLINIC_ID, dbo_HR_FINAN_CLASS.SUMMARY_CATGRY, [TABLE LAYOUT].ENTRY_TYPE, 
Sum(IIf([entry_date] Between #12/1/2012# And #12/31/2012#,[sumofentry_amount],0)) AS [Dec'12], Sum(IIf([entry_date] Between #11/1/2012# And #11/30/2012#,[sumofentry_amount],0)) AS [Nov'12], Sum(IIf([entry_date] Between #10/1/2012# And #10/31/2012#,[sumofentry_amount],0)) AS [Oct'12], Sum(IIf([entry_date] Between #9/1/2012# And #9/30/2012#,[sumofentry_amount],0)) AS [Sept'12], Sum(IIf([entry_date] Between #8/1/2012# And #8/31/2012#,[sumofentry_amount],0)) AS [Aug'12], Sum(IIf([entry_date] Between #7/1/2012# And #7/31/2012#,[sumofentry_amount],0)) AS [Jul'12], Sum(IIf([entry_date] Between #6/1/2012# And #6/30/2012#,[sumofentry_amount],0)) AS [Jun'12], Sum(IIf([entry_date] Between #5/1/2012# And #5/31/2012#,[sumofentry_amount],0)) AS [May'12], Sum(IIf([entry_date] Between #4/1/2012# And #4/30/2012#,[sumofentry_amount],0)) AS [Apr'12], Sum(IIf([entry_date] Between #3/1/2012# And #3/31/2012#,[sumofentry_amount],0)) AS [Mar'12], Sum(IIf([entry_date] Between #2/1/2012# And #2/29/2012#,[sumofentry_amount],0)) AS [Feb'12], Sum(IIf([entry_date] Between #1/1/2012# And #1/31/2012#,[sumofentry_amount],0)) AS [Jan'12], Sum(IIf([entry_date] Between #12/1/2011# And #12/31/2011#,[sumofentry_amount],0)) AS [Dec'11], Sum(IIf([entry_date] Between #1/1/2012# And #12/31/2012#,[sumofentry_amount],0)) AS 2012YTD, Sum(IIf([entry_date] Between #1/1/2011# And #12/31/2011#,[sumofentry_amount],0)) AS 2011YTD
FROM [TABLE LAYOUT] INNER JOIN ([Non Recurring Clinic Step1] INNER JOIN ((dbo_OUTPAT_REGISTER INNER JOIN dbo_HR_FINAN_CLASS ON dbo_OUTPAT_REGISTER.PRIMARY_FINAN = dbo_HR_FINAN_CLASS.FINAN_CLASS_CD) INNER JOIN dbo_OUTPAT_AREA_CDS ON dbo_OUTPAT_REGISTER.REGISTER_AREA = dbo_OUTPAT_AREA_CDS.REGISTER_AREA) ON ([Non Recurring Clinic Step1].REGISTRATION_CD = dbo_OUTPAT_REGISTER.REGISTRATION_CD) AND ([Non Recurring Clinic Step1].PATIENT_NUMBER = dbo_OUTPAT_REGISTER.PATIENT_NUMBER)) ON [TABLE LAYOUT].ENTRY_CLASS = [Non Recurring Clinic Step1].CHARGE_CLASS
WHERE (((dbo_OUTPAT_AREA_CDS.REG_AREA_TYPE)<>"RE"))
GROUP BY [Non Recurring Clinic Step1].CLINIC_ID, dbo_HR_FINAN_CLASS.SUMMARY_CATGRY, [TABLE LAYOUT].ENTRY_TYPE
ORDER BY [Non Recurring Clinic Step1].CLINIC_ID; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T20:52:58.027

`SUM(IIF())`相当于使用带有`CASE`表达式的聚合：

```
sum(case 
        when [entry_date] >= '2012-12-01' and [entry_date] <= '2012-12-31' 
        then [sumofentry_amount] 
        else 0 
    end) AS [Dec'12] 
```

然后，您只需根据其他列的需要重复此操作。

`CASE`和聚合函数将数据从行值转换为列。在 SQL Server 2005+ 中，您可以实现该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能，但您也可以使用类似于以下的内容：

```
select CLINIC_ID,
    SUMMARY_CATGRY,
    ENTRY_TYPE,
    SUM(case when EntryMonth = 12 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Dec12],
    SUM(case when EntryMonth = 11 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Nov12],
    SUM(case when EntryMonth = 10 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Oct12],
    SUM(case when EntryMonth = 9 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Sep12],
    SUM(case when EntryMonth = 8 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Aug12],
    SUM(case when EntryMonth = 7 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Jul12],
    SUM(case when EntryMonth = 6 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Jun12],
    SUM(case when EntryMonth = 5 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [May12],
    SUM(case when EntryMonth = 4 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Apr12],
    SUM(case when EntryMonth = 3 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Mar12],
    SUM(case when EntryMonth = 2 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Feb12],
    SUM(case when EntryMonth = 1 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Jan12],
    SUM(case when EntryYear = 2012 then [sumofentry_amount] else 0 end) [2012YTD],
    SUM(case when EntryYear = 2011 then [sumofentry_amount] else 0 end) [2011YTD]
from
(
    SELECT [Non Recurring Clinic Step1].CLINIC_ID, 
        dbo_HR_FINAN_CLASS.SUMMARY_CATGRY, 
        [TABLE LAYOUT].ENTRY_TYPE, 
        datepart(month,[entry_date]) EntryMonth,
        datepart(year,[entry_date]) EntryYear,
        [sumofentry_amount],
    FROM <yourtables and joins go here>
    WHERE dbo_OUTPAT_AREA_CDS.REG_AREA_TYPE)<>'RE'
        and datepart(year,[entry_date]) in (2011, 2012)
) src
group by CLINIC_ID, SUMMARY_CATGRY, ENTRY_TYPE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:54:14.557

您不需要使用 IIf([entry_date] Between #12/1/2012# And #12/31/2012#,[sumofentry_amount],0)。

将 entry_date 放在 timeA 和 Timeb 之间的 where 子句中，然后将 sumofentry_amount 相加。例如

删除整个 sum(.......) 语句并按 datepart(month,entry_date) 放置另一个组

所以你的查询看起来像

```
YOUR SELECT STATEMENT
YOUR FROM STATEMENT
GROUP BY DATEPART(MONTH,ENTRY_DATE)-- USING THIS WILL SPLIT IT OUT INTO THE MONTHS YOU NEED

CREATE TABLE foo(
amount int null
,targetDate datetime null
)
INSERT INTO FOO (amount,targetDate) values(14,'01/01/2012')
INSERT INTO FOO (amount,targetDate) values(16,'01/01/2012')
INSERT INTO FOO (amount,targetDate) values(30,'02/01/2012')
INSERT INTO FOO (amount,targetDate) values(15,'02/01/2012')
INSERT INTO FOO (amount,targetDate) values(80,'03/01/2012')
INSERT INTO FOO (amount,targetDate) values(80,'04/01/2012')
INSERT INTO FOO (amount,targetDate) values(6,'03/01/2012')

Select sum(amount)
from foo
group by DATEPART(month, targetDate) 
```

结果集
30 1
45 2
86 3
80 4

# events - 骨干事件聚合器

> ID：14613445
> 
> 赞同：1
> 
> 时间：2013-01-30T20:46:53.563
> 
> 标签：events, backbone.js, underscore.js

`_.extend({}, Backbone.Events)`使用和`_.clone(Backbone.Events)`用于事件聚合器有什么区别？我已经看到它们都用于此目的：

[http://backbonejs.org/#Events](http://backbonejs.org/#Events) [http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/](http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:49:41.840

绝对没有区别。underscore`clone`方法的定义是：

```
_.clone = function(obj) {
  if (!_.isObject(obj)) return obj;
  return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
}; 
```

因此，如果 to 的参数`_.clone`是一个对象，则克隆是通过以下方式完成的：

```
_.extend({}, obj); 
```

`_.extend({}, Backbone.Events)`当您还想在新对象上定义其他属性时，使用该语法是有意义的。因为`extend`接受任意数量的参数，每个参数都将扩展到第一个参数，所以通常定义事件对象如下：

```
//define an evented object
var foo = _.extend({}, Backbone.Events, {
  bar: function() { /*...*/ }
}); 
```

# ios - CLLocation 课程属性始终无效

> ID：14613446
> 
> 赞同：2
> 
> 时间：2013-01-30T20:46:56.270
> 
> 标签：ios

这些天我一直在使用`CLLocationManager`很多，结果好坏参半。当应用程序在后台运行时，我能够从 GPS 获取位置以及显着的位置变化。

但是，我似乎总是得到-1.0 的课程，这（根据文档）表明课程无效。

在我的`didUpdateToLocation`方法中，我只是在执行以下操作：

```
double courseDegrees = newLocation.course; 
```

我错过了什么吗？

**编辑：是的，我在移动时尝试过。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:50:32.793

来自 CLLocationManager 类参考的文档：

> startMonitoringSignificantLocationChanges
> 
> 此界面仅在检测到设备相关蜂窝塔发生变化时才提供新事件，从而降低更新频率并显着降低功耗。

要接收课程，您需要 GPS，而不是手机信号塔定位。如果您需要课程，那么您必须更改为使用`startUpdatingLocation`开始使用

```
desiredAccuracy= AccuracyBestForNavigation 
```

# unit-testing - 单元测试时未在指令中调用 scope.$watch

> ID：14613449
> 
> 赞同：9
> 
> 时间：2013-01-30T20:47:06.143
> 
> 标签：unit-testing, angularjs, angularjs-directive

# 问题

我正在测试一个指令。该指令在范围变量上有一个监视，但从不调用监视。将`$watch`调用直接放在单元测试中是可行的。为什么`$watch`不调用指令中的？

谢谢！

# 细节

这是我的原始测试。该指令中有一个手表，看着`'reEvalCreateDate'`. 它从未被调用，并且日期字符串始终为空。

### 测试中没有 watch 语句

```
it('should inject a date string', function()
    {

        scope.reEvalCreateDate = reEvalCreateDateAsNumber;

        expect(elm.text()).toBe('');

        scope.$digest();

        expect(elm.text()).toBe(new Date(reEvalCreateDateAsNumber).toUTCString());

    }); 
```

作为测试，我将手表放在单元测试中。它被正确调用并且测试通过。

### 来源（修改为将手表放入测试本身）

```
it('should inject a date string', function()
    {

        scope.$watch('reEvalCreateDate', function(newValue, oldValue)
        {
            var date = new Date(newValue);
            scope.dateString = date.toUTCString();

            dump(scope.dateString)
        });

        scope.reEvalCreateDate = reEvalCreateDateAsNumber;

        expect(elm.text()).toBe('');

        scope.$digest();

        expect(elm.text()).toBe(new Date(reEvalCreateDateAsNumber).toUTCString()); //This passes!

    }); 
```

### 指令源代码

这是其中包含 watch 语句的指令代码。

```
link: function(scope, element, attrs)
            {
                scope.$watch('show',function(shouldShow){

                    console.log('should show reeval timer? ' + shouldShow);
                    if(shouldShow) {
                        $(element).fadeIn('slow');
                    }
                    else if(shouldShow === false){
                        $(element).fadeOut('slow');
                    }

                });

//this statement's never called when testing!!
                scope.$watch('reEvalCreateDate', function(newValue, oldValue)
                {
                    var date = new Date(newValue);
                    scope.dateString = date.toUTCString();
                });

            } 
```

### 设置代码

这是测试的所有初始化代码。

```
var elm, scope;

var reEvalCreateDateAsNumber = 1359487598000;

beforeEach(inject(function($rootScope, $compile)
{
    // we might move this tpl into an html file as well...
    elm = angular.element(
        '<reeval-timer show="showTimePopup" re-eval-create-date="reEvalCreateDate" class="re-eval-timer" ng-cloak >' +
            '{{dateString}}' +
            '</reeval-timer>');

    scope = $rootScope.$new();

    $compile(elm)(scope);
    scope.$digest();
})); 
```

## 更新

根据评论，我认为我没有在指令上设置范围；我在 API 上看不到任何允许我这样做的东西。我已经尝试了调用的几种排列`$compile`，试图在其上设置范围：

*从 html 创建一个元素，将其传递给编译。没运气。*

```
elm = angular.element(
  '<div>' +
    '<tabs>' +
      '<pane title="First Tab">' +
        'first content is {{first}}' +
      '</pane>' +
      '<pane title="Second Tab">' +
        'second content is {{second}}' +
      '</pane>' +
    '</tabs>' +
  '</div>');

scope = $rootScope;
$compile(elm)(scope); 
```

*并首先创建一个元素*

```
var element = $compile('<p>{{total}}</p>')(scope); 
```

如果问题是我只是没有在指令上设置范围，那么我认为错误可能在 my`beforeEach`中。这里是：

```
describe('Reeval Timer', function()
{
    var elm, scope,element;

    var reEvalCreateDateAsNumber = 1359487598000;

    beforeEach(inject(function($rootScope, $compile)
    {
        // we might move this tpl into an html file as well...
        elm = angular.element(
            '<reeval-timer show="showTimePopup" re-eval-create-date="reEvalCreateDate" class="re-eval-timer" ng-cloak >' +
                '</reeval-timer>');

        scope = $rootScope.$new();

        element = $compile(elm.contents())(scope);
        scope.$digest();
    }));

.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-29T17:07:02.840

我在测试具有隔离范围的指令时遇到了类似的问题。

没有调用它的原因是`$digest`“处理当前范围及其子范围的所有观察者”（[http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$rootScope.Scope）。现在，您会认为指令的双向绑定变量（用“=”定义）会监视测试的范围，但我发现 my`$watch`没有被调用。这是角度的错误吗？

我的解决方案是将所有测试代码包装`scope.$digest()`到 a`$timeout`中，例如：

```
inject(function($timeout) {
  // change test scope variable
  scope.$digest();
  $timeout(function() {
    // assertions
    expect(...)
  }, 0);
} 
```

编辑：另请参阅[单元测试 AngularJS 指令，该指令监视具有隔离范围的属性](https://stackoverflow.com/questions/17979282/unit-testing-an-angularjs-directive-that-watches-an-an-attribute-with-isolate-sc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:43:27.213

我遇到了同样的问题。就我而言，我的指令有一个`templateUrl`set 而不是硬编码`template`，所以在我的单元测试中，我还必须通过调用来设置一个模拟的 http 请求：

```
$httpBackend.expectGET('/template.html').respond('<div></div>'); 
```

其他一切看起来都和你的例子一样，我的手表没有被调用。

然后我记得在使用`$httpBackend`模拟请求时，你必须这样调用`$httpBackend.flush()`：

```
$compile(elem)(scope);
$httpBackend.flush(); 
```

一旦同花跟注被击中，我的手表就被叫了。

希望这可以帮助....

杰森

# git - 如何保存更改并退出 Vim？

> ID：14613451
> 
> 赞同：3
> 
> 时间：2013-01-30T20:47:16.893
> 
> 标签：git, vim, github

我正在尝试向我的分叉存储库发布提交。我已经到了必须输入提交消息的地步。Vim 出现，我输入了我想显示的消息，但我不知道从那里去哪里。我保存消息然后推送吗？如果是这样，我将如何去做？我查找了用于保存的 Vim 命令，但它们似乎是字符而不是命令。帮助总是受到赞赏。

![在此处输入图像描述](../Images/a8e6302144177c25b3b35c465b8577ef.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-30T20:48:38.123

在 Vim 中编写和退出：

1.  按退出。
2.  键入“：x”。
3.  按回车。

跟随这个`git push`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T21:29:01.083

如果您不熟悉 vim，我建议您运行以下命令：

```
git config --global core.editor "nano --tempfile" 
```

这将`nano`改为运行。感觉更自然，您可以使用`Ctrl`+退出它`X`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-30T22:03:24.770

人们推荐使用`:qa!`等`:wq`。

我建议您改用映射`ZZ`，这将保存您当前的文件并退出。:)

这是一个很好的完整映射指南： http: [//vim.wikia.com/wiki/Mapping_keys_in_Vim_- *Tutorial* (Part_1)](http://vim.wikia.com/wiki/Mapping_keys_in_Vim_-_Tutorial_%28Part_1%29)

基本上，你`ZZ`在正常模式下输入，它会保存当前文件，如果它有未保存的更改，它会退出 Vim。

如果你是 Vim 新手，我建议你`vimtutor`从命令行打开，这样你就可以掌握 Vim 的基础知识。:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-30T20:54:13.567

要保存，`vim`您应该处于`command`模式，您可以按 Esc 键进行保存。

一旦您可以使用`w`来保存和`q`退出，但首先您必须输入“:”。整个序列：

```
:wq 
```

或者只是缩写：

```
:x 
```

# powershell - Copy-Item 和连接目录\文件的语法

> ID：14613453
> 
> 赞同：0
> 
> 时间：2013-01-30T20:47:19.760
> 
> 标签：powershell

我正在尝试将文件从一个位置复制到另一个位置。我有一个 CSV，其中包含目录、名称和其他一些对移动不重要的字段。我很确定我的代码正在尝试移动整个文件夹结构而不仅仅是文件。我怎样才能移动文件？**或**如何将类似的文件夹结构移动到新位置 (\folder\username)

该目录类似于：

```
\\server\folder\username 
```

我正在尝试的代码：

```
Import-Csv c:\movefiles.csv | ForEach-Object {Copy-Item -LiteralPath ($_.Directory + "\" + $_.name) -Destination c:\} 
```

目的地实际上是另一台服务器上的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:55:24.993

您尝试的代码应该复制文件（只要`name`属性是文件的名称）并按照`c:\`您的需要保存。您可能希望使用`Join-Path`组合目录和文件名而不是当前方法。它确保您没有多个`\`等。例如：

```
ForEach-Object {Copy-Item -LiteralPath (Join-Path $_.Directory $_.name) -Destination c:\} 
```

使用文件夹结构复制（未经测试）：

```
function MoveTo-NewServer {
    param(
    [Parameter(Mandatory=$true)]
    $Csvpath,
    [Parameter(Mandatory=$true)]
    $Newserver)

    if(Test-Path $Csvpath -PathType Leaf) {
        Import-Csv $Csvpath | ForEach-Object {
            $h = ([uri]$_.directory).Host
            $src = Join-Path $_.Directory $_.name
            $dest = $src.Replace($h, $Newserver)
            if(!(Test-Path $dest)) { New-Item $dest -ItemType File -Force }
            Copy-Item -LiteralPath $src -Destination $dest -Force
        }
    }
} 
```

如前所述，这是未经测试的。尝试像这样使用它：

```
MoveTo-NewServer -Csvpath "c:\mycsv.csv" -Newserver "server2" 
```

# knockout.js - 将现有 HTML 绑定到视图模型

> ID：14613454
> 
> 赞同：3
> 
> 时间：2013-01-30T20:47:21.367
> 
> 标签：knockout.js

我有带有服务器构建的 HTML 的页面，可以说：

```
<ul id="list">
    <li>Item 1</li>
    <li>Item 2</li>
</ul> 
```

我需要将此元素链接到视图模型。换句话来说，`'ko.applyBindings(viewModel, $('#list')[0])'`我想`viewModel`从现有的 HTML 中获取它的值。所以我做了以下事情：

```
<ul id="list" data-bind="foreach: items">
    <li data-bind="text: title">Item 1</li>
    <li data-bind="text: title">Item 2</li>
</ul> 
```

并期望从上面的元素`viewModel`中获取`items`数组。但结果 DOM 被清除了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-16T22:17:47.010

我假设您无法将来自服务器的 html 绑定到您的视图模型。

因此，这意味着您正在尝试从现有 HTML 逆向工程视图模型，您需要遍历 DOM 以产生您正在寻找的结果。

因此，使用绑定重命名列表，以便您的应用绑定有一个目标：

```
<ul id="list2" data-bind="foreach: Items">
    <li data-bind="text: title"></li> 
```

然后，您将需要处理您无法使用敲除的原始 html 列表并遍历 dom 以获取值。

```
 var viewModel = {
       Items= ko.observableArray();
    }

    //select your list
    var list = $('#list');

    //iterate through the children and add to the observable array
    ko.utils.arrayForEach(list.children(),function(i){
        viewModel.Items.push({Title:i.text()});
    }

     //then you can bind the view model to your html that has the knockout bindings

     ko.applyBindings(viewModel, )
</script> 
```

# iphone - 如何使用 colorWithPatternImage: 与 UILabel

> ID：14613456
> 
> 赞同：2
> 
> 时间：2013-01-30T20:47:31.713
> 
> 标签：iphone, ios, objective-c

我正在尝试创建一个`UILabel`显示游戏当前分数的自定义文本。客户给了我屏幕截图，他们希望文本的颜色/图案像木板一样，所以它看起来是棕色的，里面有更深的漩涡。

这甚至可能吗？我花了很多时间在网上搜索与此相关的东西，但没有找到任何具体的东西。我遵循的一个没有成功的线索是使用：

```
[UILabel setTextColor:[UIColor colorWithPatternImage:[UIImage imageNamed: @"WoodenPanel.png"]]]; 
```

似乎有一种方法可以使用图像并将其设置为文本的颜色。但是当我使用它时，结果是一个完全黑色的`UILabel`. 这是在正确的轨道上吗？或者这根本不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:15:57.053

你必须这样做：

```
[labelName setTextColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"IMAGENAME.PNG"]]]; 
```

**不像**你做的那样：

```
[UILabel setTextColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"IMAGENAME.PNG"]]]; 
```

您必须放置声明标签的名称而不是`UILabel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:51:00.423

[UILabel 中的文本可以有一个 colorWithPatternImage: 分配给它吗？](https://stackoverflow.com/questions/1025304/can-text-in-uilabel-have-a-colorwithpatternimage-assigned-to-it)

它确实使用了 colorWithPatternImage

你的意思是它没有成功。

这也是我刚刚给你的链接的可能副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T01:09:15.543

事实证明我实际上已经正确地实现了它。我上面提供的代码行并不是我的程序的确切行，而是更多的一般性。

我得到一个全黑字体的原因是我使用的特定图像的一部分是全黑的。似乎图像没有按比例缩小以适合文本和 UILabel，所以显示的是图像底部的 1/5。我不必解决这个问题，因为为我提供的用于实现此问题的图像是整个图像中的重复图案，因此图像的任何部分都会产生木板类型彩色字体的预期效果。

# python - 可以将字典键强制为特定顺序吗？

> ID：14613459
> 
> 赞同：1
> 
> 时间：2013-01-30T20:47:41.887
> 
> 标签：python, dictionary, python-2.7

我知道通常字典中键/值的顺序是任意的。但是，如果您声明一个字典“简写”（见下文），然后从不添加或删除任何键，这是否意味着键顺序将保持您声明的顺序？

我做了几个简短的实验，答案*似乎*是肯定的，但在我指望这个之前，我想确定一下。

当我说“速写”时，我的意思是一次性明确声明每个键和值：

```
myDict = {key1: val1, key2: val2, key3: val3, .... } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T20:48:44.603

Python 中的字典本质上是无序的。`collections.OrderedDict`如果您想保留顺序，请使用。请注意，`collections.OrderedDict`保留*插入顺序*。

此外，还有一个反例，即密钥按声明顺序保存的概念：

```
>>> {1:2, 4:5, 2:3}
{1: 2, 2: 3, 4: 5} 
```

字典键也不需要排序：

```
>>> {-1:-1, -2:-2, 1:1}
{1: 1, -2: -2, -1: -1} 
```

所以，永远不要依赖字典键的顺序，除非你知道它是一个`OrderedDict`.

# php - 为什么双换行符 \n\n 在附件邮件中不起作用？

> ID：14613461
> 
> 赞同：-1
> 
> 时间：2013-01-30T20:47:59.750
> 
> 标签：php, email, utf-8, newline, attachment

我在使用 php 发送邮件时遇到换行问题。这里的主要问题是，换行符在带有附件（多部分/混合）的邮件中不起作用，但在纯文本中它们起作用。

```
<?php
function sendMail($email, $name, $pdfpath) {
        // $file should include path and filename
        $filename = basename($pdfpath);
        $file_size = filesize($pdfpath);
        $content = chunk_split(base64_encode(file_get_contents($pdfpath))); 
        $uid = md5(uniqid(time()));
        $subject = "New attachment mail: ".$name;
        $subject = "=?UTF-8?B?".base64_encode($subject)."?=";
        $body = "Hello Dude!\n\n"
             ."Testing\n\n"
             ."Testing\n\n\n\n"
             ."Testing\r\n"
             ."Testing\n";
        //combine two headers (attachment mails needs to have specific headers)
        $header .= $this->attachment_headers;
        $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
        $header .= "This is a multi-part message in MIME format.\r\n";
        $header .= "--".$uid."\r\n";
        $header .= "Content-type:text/plain; charset=UTF-8\r\n";
        $header .= "Content-Transfer-Encoding: 8bit\r\n\r\n";
        $header .= $body."\r\n\r\n";
        $header .= "--".$uid."\r\n";
        $header .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"; // use different content types here
        $header .= "Content-Transfer-Encoding: base64\r\n";
        $header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
        $header .= $content."\r\n\r\n";
        $header .= "--".$uid."--"; 

        //( string $to , string $subject , string $message [, string $additional_headers [, string $additional_parameters ]] )
        return mail($email, $subject, "", $header);
    }
?> 
```

因此，我的电子邮件中的输出如下：

```
Hello Dude!
Testing
Testing
Testing
Testing 
```

所以，它确实添加了一条新线，但只有一条，我需要更多。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:04:09.797

我认为你应该使用`\r\n\r\n`而不是`\n\n`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T15:15:28.857

我知道 art2 答案被标记为正确，但我会在这一行中使用 nl2br ：

$header .= nl2br($body)."\r\n\r\n";

只是想帮忙...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T22:37:15.437

好的，我在网上找不到任何帮助，所以我想出了一个泡泡糖解决方案。由于某种原因，多部分/混合消息似乎会删除/删除所有附加行。

```
 $body = "Hello Dude!\n \n"
             ."Testing\n \n"
             ."Testing\n\ n\ \n \n"
             ."Testing\r \n"
             ."Testing\n"; 
```

查看换行符之间的空间，结果是应该的。

# android - 将 ActionBar 实现到自定义 MapView

> ID：14613464
> 
> 赞同：0
> 
> 时间：2013-01-30T20:48:01.297
> 
> 标签：android, google-maps, user-interface, menu, android-actionbar

我正在尝试在我现有的项目中实现一个 ActionBar，但不知道从哪里开始。在我意识到它已被弃用并且某些设备（nexus 7）无法访问此类菜单之前，我立即开始构建经典菜单按钮菜单。

在地图上实现 ActionBar 的好方法是什么？我已经深入研究了这个项目，几天后就到期了，所以重写程序并不是一个真正的选择。

我真正想要的是在地图顶部或底部始终可用的两个或三个简单选项，如果单击它们会延伸到一个列表。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:24:32.123

要以向后兼容的方式实现 ActionBar，您可能需要使用[ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)及其[Maps 插件](https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps)。看看它的示例，它使用起来非常简单。

# git - 有没有办法在 git status 命令上调用脚本？

> ID：14613465
> 
> 赞同：2
> 
> 时间：2013-01-30T20:48:05.987
> 
> 标签：git, git-svn, githooks, git-status

我通过 git-svn 工具将我的 svn 存储库作为 git 存储库进行管理，但是没有办法处理我的 svn 外部。通过将每个外部视为 git-svn 存储库来解决此问题。这是使用脚本完成的，结果类似于：

```
> src/
> -- .git/
> -- Source1.x
> -- Source2.x
> -- .git_external/
> ---- git-svn_external1/
> ------ .git/
> ------ ExternalSource1.x
> ---- git-svn_external2/
> ------ .git/
> ------ AnotherExternalSource1.x
> ------ AnotherExternalSource2.x 
```

由于缺乏处理 svn 外部的工具，我需要通过手动执行的 bash 脚本验证每个修改，它是这样的：

```
#!/bin/sh
for i in `ls .` do
  if [ -d $i ] then
    cd $i
    if [ -d .git ] then
      git status .
    fi
  cd ..
  fi
done 
```

`git status`在主 git-svn 存储库上执行命令时如何自动实现这一点？

我没有找到与这种情况相关的任何钩子，因此我认为我需要找到解决此问题的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T21:19:01.367

一般来说，git 会尝试提供尽可能少的钩子，仅在您无法使用脚本的情况下提供它们。在这种情况下，只需编写一个执行您的竞标并运行的脚本`git status`。运行此脚本而不是`git status`.

如果你调用它`git-st`并将它放在你的 PATH 中，你可以通过`git st`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T22:18:21.797

我使用过几次的一个技巧是围绕`git`. 假设您使用的是 Bash（其他 shell 也类似），请将以下内容添加到您的`~/.bashrc`:

```
git () {
    if [[ $1 == status ]]
    then
        # User has run git status.
        #
        # Run git status for this folder.  The "command" part means we actually
        # call git, not this function again.
        command git status .

        # And now do the same for every subfolder that contains a .git
        # directory.
        #
        # Use find for the loop so we don't need to worry about people doing
        # silly things like putting spaces in directory names (which we would
        # need to worry about with things like `for i in $(ls)`).  This also
        # makes it easier to recurse into all subdirectories, not just the
        # immediate ones.
        #
        # Note also that find doesn't run inside this shell environment, so we
        # don't need to worry about prepending "command".
        find * -type d -name .git -execdir git status . \;
    else
        # Not git status.  Just run the command as provided.
        command git "$@"
    fi
} 
```

现在，当您运行时`git status`，它实际上会`git status`针对当前文件夹和包含其自己文件夹的任何子文件`.git`夹运行。

或者，您可以通过按照[Chronial](https://stackoverflow.com/users/758345/chronial) [建议](https://stackoverflow.com/a/14613991/220155)的方式编写脚本或将其放入 Git 别名中，将其变成一个新命令。要执行后者，请运行以下命令：

```
git config --global alias.full-status '!cd ${GIT_PREFIX:-.}; git status .; find * -type d -name .git -execdir git status . \;' 
```

然后你就可以跑来`git full-status`做同样的事情了。

（该`cd ${GIT_PREFIX:-.}`部分用于将您返回到您运行命令的任何目录；Git 别名默认从存储库的根目录运行。其余的与上面的函数解决方案相同。）

# android - 是否有理由不将消息应用程序中的数据存储在 android 短信数据库中？

> ID：14613471
> 
> 赞同：3
> 
> 时间：2013-01-30T20:48:23.717
> 
> 标签：android

我构建了一个消息应用程序，允许用户发送和接收短信以及其他类型的消息。现在，我将所有发送和接收的消息存储在包含所有短信的 Android 的默认数据库中。(content://sms/inbox 和 content://sms/sent) 有什么理由认为这是个坏主意吗？我知道我可以使用自己的数据库，但除非有理由我应该喜欢使用用户手机上已经存在的数据库的简单性。

来自所有制造商的所有 android 设备是否会将他们的短信数据库放在我可以访问的同一个地方，或者它们是否会在不同的设备和制造商之间出现问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:52:08.623

使用现有数据库是完全可以的。这是许多现有消息传递应用程序的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:54:15.067

我不能为所有用户回答，但我想他们中的很多人（包括我自己）会反对将非 SMS 消息与 SMS 消息存储在同一个数据库中。

如果我使用您的应用程序，然后打开股票短信应用程序并在那里看到非短信消息，我会大发雷霆。

# javascript - HTML 文件中的 Javascript

> ID：14613473
> 
> 赞同：0
> 
> 时间：2013-01-30T20:48:25.503
> 
> 标签：javascript, html, button

我正在修改一个 html 文件，我需要帮助它。它的头部有一堆创建一些按钮的javascript，所有按钮都被标记为id="#content"。

然后在正文中，它只是将所有按钮布置在一列中`<div id="content" align:"center"></div>`

我希望能够独立移动按钮，即将它们放在桌子上。我怎样才能做到这一点？

编码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content = "height = device-height, width = 420, user-scalable = no" />
        <title>Direct Current GUI</title>
        <script type="text/javascript" src="/webiopi.js"></script>
        <script type="text/javascript">
        webiopi().ready(function() {
                var content, button;
                content = $("#content");

                // create a "FORWARDS" labeled button for GPIO 7
                button = webiopi().createGPIOButton(7, "FORWARDS");
                content.append(button); // append button to content div

                // create a "REVERSE" labeled button for GPIO 8
                button = webiopi().createGPIOButton(8, "REVERSE");
                content.append(button); // append button to content div                                      
        });

        </script>

</head>
<body>
        <table>
                <tbody>
                        <tr><td id="content"></td></tr>

                </tbody>
        </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:54:56.457

您可以将按钮放置在您喜欢的任何位置，要更改的行如下所示：

```
 webiopi().ready(function() {
            var button;

            // create a "FORWARDS" labeled button for GPIO 7
            button = webiopi().createGPIOButton(7, "FORWARDS");
            $('#select-an-element-here').append(button); // append button to content div

            // create a "REVERSE" labeled button for GPIO 8
            button = webiopi().createGPIOButton(8, "REVERSE");
            $('#select-an-element-here').append(button); // append button to content div                                      
    }); 
```

这些`$('#select-an-element-here')`位可以针对您喜欢的页面上的任何元素。

例如：

```
<p id="example1"></p>
<div id="example2"></div> 
```

您可以使用以下方法在每个按钮中放置一个按钮：

```
 webiopi().ready(function() {
            var button;

            // create a "FORWARDS" labeled button for GPIO 7
            button = webiopi().createGPIOButton(7, "FORWARDS");
            $('#example1').append(button);

            // create a "REVERSE" labeled button for GPIO 8
            button = webiopi().createGPIOButton(8, "REVERSE");
            $('#example2').append(button);                                      
    }); 
```

# wpf - 没有触发键绑定的 WPF MVVM 命令

> ID：14613478
> 
> 赞同：1
> 
> 时间：2013-01-30T20:48:31.277
> 
> 标签：wpf, data-binding, mvvm

按下删除键不会导致下面的命令触发。可以假设 DelegateCommand 遵循接口契约，因为 View 中引用的其他 DelegateCommand 实例在 ViewModel 中正确触发。

为什么？

**看法：**

```
<ListBox Height="132"
     Name="lbFiles"
     ItemsSource="{Binding LbItems, UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}"  
     VerticalAlignment="Center"
     SelectedValue="{Binding Path=ListBoxSelection}">
<ListBox.InputBindings>
    <KeyBinding Key="Delete"
                Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}
                ,Path=DataContext.CommandInputFilesDeleteSelected}" />
</ListBox.InputBindings> 
```

**视图模型：**

```
private DelegateCommand commandInputFilesDeleteSelected;

public ICommand CommandInputFilesDeleteSelected {
    get {
            if (commandInputFilesDeleteSelected == null) {
                commandInputFilesDeleteSelected = new DelegateCommand(InputFilesDeleteSelected);
            }
    return saveCommand;
    }
}

private void InputFilesDeleteSelected() { //this never fires :( 
        LbItems.Remove(ListBoxSelection); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:05:04.177

```
private DelegateCommand commandInputFilesDeleteSelected;

public ICommand CommandInputFilesDeleteSelected {
    get {
            if (commandInputFilesDeleteSelected == null) {
                commandInputFilesDeleteSelected = new DelegateCommand(InputFilesDeleteSelected);
            }
    return saveCommand;  //changed from saveCommand to commandInputFilesDeleteSelected whoops
    }
} 
```

# jquery - jQuery：优化代码（学习案例）

> ID：14613486
> 
> 赞同：0
> 
> 时间：2013-01-30T20:48:50.217
> 
> 标签：jquery

我不得不承认，在我自己试验和学习的所有时间里，我通过看到许多 jQuery 脚本纯粹凭直觉想出了这个解决方案。

由于我没有人亲自问这些问题，这就是我来这里寻求帮助和指导的原因。

--

受[Wufoo 的计划表格的](https://secure.wufoo.com/signup/1/)启发，在填写表格时需要重点突出显示的行，我创建了这个脚本（我不是 jQuery 或 JavaScript 大师，我还在学习和练习）：

```
//Improve usability by highlighting the row the user needs to focus on:
$(function() {
        //When input element has focus
        $('input').focus(function(){
            //Add the class to its corresponding row
            $(this).parent().parent('.row').addClass('focus'),
                //And when it loses focus
                $('input').blur(function(){
                    //Remove the class
                    $(this).parent().parent('.row').removeClass('focus');
                });
        });
}); 
```

所以我想知道这个脚本是否有办法以任何方式编写得更好或优化/缩短。如果没有，而且我写的方式没问题，那很好，我想学习的只是尽可能优化代码的方法，仅此而已。

如果您想查看它，我**[在 Codepen 中](http://codepen.io/rzea/pen/mBbjs)**创建了一个Demo。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:51:28.123

你可以这样做：

```
//Improve usability by highlighting the row the user needs to focus on:
$(function() {
        $('input').focus(function(){
            $(this).closest('.row').addClass('focus'); // Change here                    
        }).blur(function(){ // Change here
           $(this).closest('.row').removeClass('focus'); // Change here
        });
}); 
```

甚至更短！

```
$(function(){
    $("input").on("focus blur", function(){
        $(this).closest(".row").toggleClass("focus");
    });
}); 
```

你做错了一件事！！每次您聚焦时，您都会为每个输入绑定一个新的模糊！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T20:51:41.923

代码看起来不错。我要做的唯一更改是使用`closest()`而不是链接`parent()`调用，就好像您更改周围的 DOM 一样，您需要更改您的 jQuery 代码。另外，我会将处理程序移到`blur()`处理程序之外`focus()`。试试这个：

```
$(function() {
    $('input')
        .focus(function() {
            $(this).closest('.row').addClass('focus');
        })
        .blur(function() {
            $(this).closest('.row').removeClass('focus');
        });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T21:20:06.683

我会尝试将我的偶数处理程序和事件绑定分开。这很方便，`.on()`它实际上将事件绑定到所有当前和未来的`.row`元素，这与`.focus()`它仅在绑定发生时将事件绑定在页面上的行上不同。

这样您就不需要将代码包装到`$(function(){});`其中。您可以将事件绑定放在包含的 .js 文件中，而不是将 jQuery 与标记混合。

此外，使用`.closest()`而不是，`.parent().parent()`因为如果您选择稍微更改结构，它不会中断。前提是你`.row`还在。

```
var onRowFocus = function(){
    $('.row').removeClass('focus');
    $(this).closest('.row').addClass('focus');
};

$('.row').on('focus', 'input', onRowFocus); 
```

此外，您根本不需要绑定`.blur`事件。只需`focus`从所有行中删除该类，然后再将其添加到焦点所在的行中。更少的事件处理程序，更少的代码，更易于维护。

# forms - 我可以在不提交的情况下从 Perl 的 formbuilder 字段中读取值吗？

> ID：14613489
> 
> 赞同：0
> 
> 时间：2013-01-30T20:49:11.587
> 
> 标签：forms, perl, cgi, formbuilder

我正在处理使用 CGI::FormBuilder 的现有代码，并且我已经阅读了所有文档以了解它是如何工作的，但我并不是 100% 相信它会。该代码有几个自由格式字段和 3 个按钮：更新、取消和测试。测试按钮使用在字段中输入的设置发送电子邮件。

在表单的 JS 中，我在单击“测试”时使用 ajax 调用，以便执行表单中的 perl 代码。更新和取消按钮的返回方式与提交时的表单一样。这样做的原因是，当发送测试电子邮件时，我不希望用户被带到返回的页面，而是保留在表单上，​​值保持不变，这样如果值正确，用户不会当他们想要更新实际值（更新我的数据库中的值）时，必须重新输入它们。显然，由于表单没有被“提交”，它试图在这个“测试”中使用的值是在页面打开时加载到表单中的值——它没有使用用户在点击之前输入的值测试按钮。有没有办法做到这一点？

长问题短：使用 CGI::FormBuilder，我可以通过 PERL 获取当前字段中的值而不提交页面吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:54:49.387

简短的回答：是的。

中等答案：是的。您可以在页面中使用 javascript 将信息发送到您的服务器端应用程序。

长答案：

您似乎对服务器和客户端代码如何与网页交互有些困惑。这很常见。许多人希望它们是呈现页面和生成它的程序之间的某种通信。AJAX 和相关技术模糊了这里的界限，使事情变得更加混乱。

这是一个简单的老式 CGI 表单的时间表：

*   客户请求页面。服务器接收页面请求。服务器分派到 CGI 脚本。
*   服务器执行 CGI 脚本。
*   服务器将 CGI 脚本的结果发送给客户端。
*   客户端呈现脚本结果。
*   用户填写表格。
*   用户点击“提交”。带有参数信息的客户端请求页面（详细信息因请求类型、表单配置而异）。
*   服务器接收页面请求。
*   服务器分派到 CGI 脚本。
*   服务器执行 CGI 脚本。服务器将 CGI 脚本的结果发送给客户端。客户端呈现脚本结果。

来自客户端的每条消息都是单独处理的。

AJAX 允许您向服务器发送消息并获得响应，而无需清除当前加载的页面。

因此，只需将一些 javascript 代码放入 html 中，并设置一个 onModify 处理程序，该处理程序将发出 AJAX 请求并将数据传回服务器。AJAX 请求只是另一个 HTTP 请求，就像上面的那些，但它在后台运行。您需要做的就是捕获提交的数据并做出响应。您的 javascript 需要捕获响应并对其进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:26:59.563

简短问题的答案是“否”。

长问题的答案是“是”。

您只需要两个“提交”按钮：“提交”和“测试”。Test 的提交会将表单发送到 CGI，CGI 将仅验证字段的值并返回具有相同值的相同表单并在字段中出现错误时发送消息。

# sql - 在 TSQL 中将一列拆分为多列

> ID：14613492
> 
> 赞同：-1
> 
> 时间：2013-01-30T20:49:23.817
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, sql-server-2012

我需要在 TSQL 中解决我的问题

当前表

```
TRX      DOC      ITEM      DOCTYPE      QTY
--------------------------------------------
123      ASM1     001       1            100
124      ASM2     002       1             10
234      ADJ1     002       2            -30
456      SAL1     001       3            -20
457      SAL2     002       3            -10
789      PRE1     002       4             10
910      ADJ2     001       2             20 
```

如何像这样将列 QTY 拆分为 sum(QTY) AS QTYIN 和 QTYOUT

```
ITEM    QTYIN    QTYOUT   TOTQTY
---------------------------------
 001      120       -10     110
 002       20       -50     -30 
```

感谢您的帮助，我需要解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:55:58.603

使用一个`GROUP BY`子句来组合结果 by `Item`，然后`SUM`使用一个`CASE`语句来汇总特定条件（[**DEMO**](http://www.sqlfiddle.com/#!3/bbf90/1)）：

```
select
  item,
  sum(case when qty > 0 then qty end) as qtyin,
  sum(case when qty < 0 then qty end) as qtyout,
  sum(qty) as totqty
from
  Table1
group by
  Item 
```

示例输出（我假设差异只是拼写错误？）：

```
| ITEM | QTYIN | QTYOUT | TOTQTY |
----------------------------------
|    1 |   120 |    -20 |    100 |
|    2 |    20 |    -40 |    -20 | 
```

# jquery - 在 Firefox 上以 js 结尾退出全屏视频？

> ID：14613497
> 
> 赞同：2
> 
> 时间：2013-01-30T20:49:35.330
> 
> 标签：jquery, html, video, fullscreen

```
<script>    
  $(document).ready(function(){
    $('#Video').bind('ended', function(){

      $('#Video')[0].mozCancelFullScreen();

    });
  });    
</script> 
```

我试图用全屏显示一些视频的视频按钮创建一个全屏模式的网站。在视频结束时，videofullscreen 应该关闭并显示全屏网站概述，但它不起作用。只有 $('#Video').fadeout(); 作品和网站概述显示在视频结束后，但我无法重新打开视频。我尝试使用鼠标单击处理程序关闭全屏视频，但它也不起作用。

```
var Video = document.getElementById("Video")
    buttonFullscreen = document.getElementById("button");   

if (Video && buttonFullscreen) {
   videoFullscreen.addEventListener("click", function (evt) {

    if (Video.mozRequestFullScreen) {
      Video.mozRequestFullScreen();
      Video.mozSrcObject=null;
      Video.play();

      mouse.click( function () {
        Video.mousedown(function(event) {
          Video.pause();
          Video.mozSrcObject=null;
          Video.mozCancelFullScreen();
        }); 
     });

    }
  else if (Video.webkitRequestFullScreen) {
    Video.webkitRequestFullScreen();
    Video.play();

  }, false);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-16T18:56:31.170

如果没有直接的用户交互，我也永远无法让 document.mozCancelFullScreen 工作。因此，从某些事件回调或超时调用它似乎永远不会起作用。

解决方法是删除元素，然后放回原来的位置。这就是为什么 $.fadeout() 适合你的原因，因为它会从 DOM 中删除元素。我用过：

```
var parentNode = videoElement.parentNode;
parentNode.removeChild(videoElement);
parentNode.appendChild(videoElement); 
```

这看起来很糟糕，但这是我让它在 FF 中工作的唯一方法。

# jquery - 如何防止这种奇怪的 jQuery .animate() 滞后？

> ID：14613498
> 
> 赞同：16
> 
> 时间：2013-01-30T20:49:37.517
> 
> 标签：jquery, jquery-animate, lag

见演示：[jsFiddle](http://jsfiddle.net/bVyW5/)

*   单击“显示”/“取消”时，我有一个简单的表单正在切换
*   一切正常，但**如果您在表单显示后不久单击“取消”，动画甚至开始之前会有 2-3 秒的延迟**。
*   如果您在单击“取消”之前等待几秒钟，则不会发生这种情况。
*   所有测试的浏览器（即ff、chrome）都会出现延迟。

**1\. 什么可能导致这种滞后，如何预防？**

**2\. 有没有更好的方法来编码这个动画序列，可以防止任何滞后？**

**HTML**：

```
<div id="newResFormWrap">
    <form id="newResForm" action="" method="post" name="newRes">
        <div id="newResFormCont">
            <h3>title</h3>
            <p>form!</p>
            <div class="button" id="cancelNewRes">Cancel</div>
        </div>
    </form> 
</div>
<div class="button" id="addRes">show</div> 
```

**jQuery：**

```
$("#newResForm").css({opacity: 0});

$("#addRes").click(function () {
    toggleNewRes()
});
$("#cancelNewRes").click(function () {
    toggleNewRes()
});

//toggleNewRes
function toggleNewRes() {
    if ($("#newResFormWrap").css('display') == "none") {//if hidden 
        $("#addRes").animate({ opacity: 0 }, 'fast', function() {
            $("#newResFormWrap").toggle('fast', function (){
                $("#newResForm").animate({ opacity: 100 },2000);
            });
        });
    } else { //if visible
        $("#newResForm").animate({ opacity: 0 }, 100,function() {
            $("#newResFormWrap").toggle('fast', function (){
                $("#addRes").animate({ opacity: 100 });
            });
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-30T20:52:31.237

确保在使用以下命令开始新动画时清除队列`stop()`：

```
$("#newResForm").stop().animate({ opacity: 0 }, 100,function() {
        $("#newResFormWrap").toggle('fast', function (){
            $("#addRes").animate({ opacity: 100 }); 
                 // ... 
```

导致延迟的原因是您的 2 秒长动画`$("#newResForm").animate({ opacity: 100 },2000)`尚未完成。默认情况下，JQuery 将动画放入队列中，等待一个完成，然后下一个开始。使用 清除队列`stop()`，如果您有两个相互矛盾的动画（例如打开和关闭动画，或鼠标悬停/鼠标悬停动画），这将特别有用。事实上，您可能会发现开始所有动画链是一个很好的做法，`stop()`除非您知道您希望它们与可能在其他地方发生的先前动画一起排队。

进入更高级的主题，您甚至可以命名不同的队列，例如，您的悬停动画和展开/折叠动画被分开处理以用于`stop()`. 有关更多详细信息，请[参阅 http://api.jquery.com/animate/](http://api.jquery.com/animate/)`queue`上的选项（当给定字符串时） 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:51:44.247

`.stop()`在您的动画调用之前添加：

```
function toggleNewRes() {
    if ($("#newResFormWrap").css('display') == "none") {//if hidden 
        $("#addRes").stop().animate({ opacity: 0 }, 'fast', function() {
            /...
        });
    } else { //if visible
        $("#newResForm").stop().animate({ opacity: 0 }, 100,function() {
            /...
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T20:54:15.753

尝试使用`stop()`：

[这是jsfiddle。](http://jsfiddle.net/t7mWs/2/)

```
if ($("#newResFormWrap").is(':visible')) {//this way is eaiser to check
    $("#addRes").stop(true,false).animate({ opacity: 0 }, 'fast', function() {
        $("#newResFormWrap").toggle('fast', function (){
            $("#newResForm").animate({ opacity: 100 },2000);
        });
    });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T21:04:17.187

几件事。首先查看这个[JSFiddle](http://jsfiddle.net/bVyW5/1/)以了解它的实际效果。

您遇到的问题是您的动画淡入淡出需要 2 秒。因此，当您在 2 秒内关闭它时，您会遇到延迟。

我重新校准了你的时间以确保没有延迟。看看你是否喜欢它们，并随意改变它们。

```
if ($("#newResFormWrap").css('display') == "none") {//if hidden 
    $("#addRes").animate({ opacity: 0 }, 'fast', function() {
        $("#newResFormWrap").toggle(0, function (){
            $("#newResForm").animate({ opacity: 100 },400);
        });
    });
} else { //if visible
    console.log('click');
    $("#newResForm").animate({ opacity: 0 }, 0, function() {
        console.log('animated');
        $("#newResFormWrap").toggle(0)
    });
    $("#addRes").animate({ opacity: 100 }, 'fast');
} 
```

# drupal - 仅创建块页面/创建块节点

> ID：14613504
> 
> 赞同：0
> 
> 时间：2013-01-30T20:49:53.927
> 
> 标签：drupal, drupal-7, drupal-views, drupal-theming

有时我使用基本页面作为占位符，以创建一个节点来保存块。

所以我创建了一个基本页面并将其链接到一个菜单，然后我使用块界面来配置某些块以仅在该页面上显示。

这种方法的问题是双重的。首先，我*不需要*该页面，但其次，当用户尝试编辑该页面时，他们会惊讶地发现什么也没有，这是可以理解的。

有没有更好的方法来创建块节点？理想情况下，越轻越好。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:03:14.083

嗯，这个解决方案需要安装另一个模块，但还提供了其他很棒的功能，例如修订。

[http://drupal.org/project/nodeblock](http://drupal.org/project/nodeblock)

您还必须将所有旧块转换为这些新的“节点块”

另一种选择是

[http://drupal.org/project/empty_page](http://drupal.org/project/empty_page)

# php - 通过两个独立的 joomla 站点进行 Joomla 身份验证

> ID：14613506
> 
> 赞同：3
> 
> 时间：2013-01-30T20:49:57.980
> 
> 标签：php, authentication, redirect, joomla

我有两个 Joomla 2.5 网站，都分开工作。现在我想将登录用户从第一个网站的一个页面重定向到第二个网站的另一个页面。

我需要第二个网站来识别用户名和密码。（我刚刚检查了两者的 md5-hex 密码是否可以一起使用）。用户注册到两者，意味着在两个用户数据库中具有相同的用户名和密码。我尝试使用一些 php 命令，如“HTTPResponse::redirect”和一些 joomla 组件来做到这一点，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:28:11.477

我希望你能像这样工作。

当用户登录第一个网站并从该网站登录时，您必须重定向到第二个网站。

首先，当用户登录您的第一个站点时，您应该保留该用户密码和用户名。您将获得带有`$user->name`对象的用户名，但您无法获得用于描述的密码，因此应将其保存在某个位置（在安全空间中）。然后将其获取凭据并以隐藏形式设置返回 url。

然后将此隐藏表单的操作提交到第二个站点。如果该用户帐户存在于该 joomla 站点中，您可以登录并重定向到给定的返回 url。

如果不是，它将不会登录到第二个站点。

您可以使用获取用户详细信息

```
$user = &JFactory::getUser(); 
```

隐藏的形式应该是这样的

```
The action should be second site full url.
the $your_return_url should be second site url

  <form action="<?php echo JRoute::_('index.php?option=com_users&task=user.login'); ?>" method="post">
 <input type="text" tabindex="1" " value="<?php echo $user_name?>" id="username" name="username" />
<input type="password"  value="<?php echo $password?>" id="password" name="password" />
 <input type="hidden" name="return" value="<?php echo base64_encode($your_return_url); ?>" /><?php echo JHtml::_('form.token'); ?>
    </form> 
```

根据操作，您可以将此表单提交到第二个 joomla 站点。但是这里有一个主要的事情是 joomla 表单令牌如果第一个站点令牌在第二个 joomla 站点中接受，那么你的工作就完成了！否则你无法做到这一点。

希望这可以帮助你..

# arm - 使用 LLVM 解释 ARM/MachO 以进行分析和优化？

> ID：14613517
> 
> 赞同：2
> 
> 时间：2013-01-30T20:50:46.330
> 
> 标签：arm, llvm, static-analysis, slice, mach-o

我花了很多时间阅读 LLVM 源代码树。这是一项令人印象深刻的工程！

无论如何，我一直在尝试将我拥有的一些 MachO Arm 二进制文件转换为 LLVM 位码以进行基本的静态分析。主要是，我想根据使用的寄存器在某些调用上创建反向静态切片。此外，我正在尝试对明显的常量进行前向传播（例如，从符号表中加载函数名并传递给寄存器）。

此时，我已经能够使用以下命令行转储文件并在本机 ARM 程序集中对其进行解析：

```
 bash-3.2$ llvm-objdump -d ~/code/osx/HelloWorldThin -triple=thumb
    -mattr=+thumb2,+32bit,+v7,+v6t2,+thumb-mode,+neon

    /Users/steve/code/osx/HelloWorldThin:   file format Mach-O arm

    Disassembly of section __TEXT,__text:
    _main:
        2fd4:       f0 b5            push    {r4, r5, r6, r7, lr}
        2fd6:       03 af            add     r7, sp, #12
        2fd8:       4d f8 04 8d      str     r8, [sp, #-4]!
        2fdc:       0d 46            mov     r5, r1
        2fde:       06 46            mov     r6, r0
        2fe0:       00 f0 fe ef      blx     #4092 
```

……剪断了……

这很棒，因为它为我节省了大量编写解析器的时间！

在查看了 MachODump.cpp 之后，我看到这些被降低为 MCInst，从我理解的方式来看，它只是一个带参数的解析操作码。

所以我的问题是：

1）有没有办法从 ARM 转换为 LLVM（用于优化传递等）？不需要回传给ARM，只需要有一个分析结果。

1.5) 我注意到所有的分析操作都是在指令而不是 MCInst 上进行的，有没有办法键入提升并提供所需的信息？

2) 有没有办法模拟/模拟 ARM 或 LLVM 指令？我问是因为像切片和常量传播这样的事情需要数据流分析才能确定内存和寄存器中的内容。

像这样的操作需要跟踪从内存中加载和存储数据的方式以及寄存器。LLVM 能否理解这些分析指令的副作用？

```
 __text:000032DE                 LDR             R1, [R0] ; "viewDidLoad"
    __text:000032E0                 MOV             R0, SP
    __text:000032E2                 BLX             _objc_msgSendSuper2 
```

3) 如果我似乎对 LLVM 中发生的事情有根本的误解，我希望得到任何反馈。

谢谢，如果我可以提供有关我的问题的更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-19T11:18:43.183

用于 ARM 二进制文件的静态分析。最好将每条 ARM 指令的语义直接转换为 LLVM IR，并在后者上应用数据流分析。例如，`ADD rd, rd, rm`ARM 中的 an 可以转换为 LLVM IR `%rd2 = add i32 %rd1, %rm1`。

将 ARM 机器代码反编译为 C（为了将其重新编译回 LLVM IR）既麻烦又不必要。请注意，反编译器之类的重点`IDA Pro`是二进制理解，而不是重新编译本身。因此，您将很难重新编译软件，甚至更难将您的分析结果链接到原始二进制文件。

以下链接可能有用：

*   [Fracture](https://github.com/draperlaboratory/fracture)是一个开源项目，试图将 ARM 二进制文件直接转换为 LLVM IR。
*   [LLBT](http://dl.acm.org/citation.cfm?id=2380403.2380419)：是一个将 ARM 转换为 LLVM IR 的研究项目。然而，他们的目标是静态二进制重写而不是二进制分析。

请注意，如果您正在考虑分析剥离的二进制文件，则需要一个强大的反汇编程序。`objdump`可以在没有符号的二进制文件上发出过多的反汇编错误。

我正处于一个研究项目的早期阶段，我们开发了一种处理器描述语言，可以更容易地在 LLVM IR 中描述指令语义。当我们有更多结果时，我会更新这个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:51:28.820

对于 (1) - 不在 LLVM 的框架内。那里没有“反编译器”。您可以自由使用将机器代码转换为 C 的外部反编译器，然后使用 clang 将其编译为 LLVM IR。YMMV 当然，关于这种翻译的质量。

(1.5) 如果我明白你在问什么，那么不。`Instruction`并且`MCInst`是完全不同的动物，在抽象层次上相距甚远。阅读：[http ://eli.thegreenplace.net/2012/11/24/life-of-an-instruction-in-llvm/](http://eli.thegreenplace.net/2012/11/24/life-of-an-instruction-in-llvm/)

(2) 是的，LLVM 有一个可以从该`lli`工具中使用的解释器。它直接“模拟” LLVM IR 而不会降低它。

# php - 尝试从 mySQL 数据库中包含的城市创建纬度和经度数组

> ID：14613525
> 
> 赞同：1
> 
> 时间：2013-01-30T20:51:24.463
> 
> 标签：php, javascript, mysql, google-maps-api-3

我正在尝试使用 Google Maps API 创建可以用作标记的纬度和经度数组（来自 mySQL 城市数据库）。

我不确定如何在 PHP 中动态提取城市并在 javascript 中对其进行地理编码。

这就是我到目前为止所拥有的。我知道地理编码器线不正确，但我不确定如何使用它。任何建议或解决方案都会非常有帮助。

```
 var geocoder = google.maps.Geocoder();

    var markers = [

    <?php

    //orgnize fans by city
    $query = "SELECT city, state, COUNT(*) fans FROM users GROUP BY city ORDER BY fans DESC";
    $result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){

    //pulls the city, state code from the database and stores it as a string in $address
    $address = '"' . $row['city'] . ", " . $row['state'] . '"';

       //  "$row['city'].", ".$row['state']";

        geocoder.getLatLng($address, function(point) {
                           $latitude = point.y;
                           $longitude = point.x;
        });
        echo "{ lat: \"".$latitude.", lng: ".$longitude.", name: "'"'.$row['city'].", ".$row['state'].'"'"},\n ";
        echo "<br/>";
    }

    ?>

    ];

    //var locationNameArray = ['Portland','Seattle','Los Angeles','San Diego','Las Vegas'];

    // Create the markers ad infowindows.
    for (index in markers) addMarker(markers[index]);
    function addMarker(data) {
        // Create the marker
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(data.lat, data.lng),
            map: map,
            title: data.name
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:50:43.177

在您的帖子中，您将 PHP 与 Javascript 混合使用。您不能`geocoder.getLatLng`在 PHP 标记内使用 Javascript 函数。

要使用 lat、lng 信息填充数据库，我建议使用 PHP 地理编码。因此，您将需要一张用于城市的桌子。

```
Table city:

id_city
name
state
lat
lng 
```

并且用户表只有一个外键`id_city`：

```
Table users:

id_user
fi_city
... 
```

这是一个快速而肮脏的示例，如何使用 PHP 从 Google 地理编码器获取 lat、lng 信息：

```
$address = urlencode('New York');
$googleApi = 'http://maps.googleapis.com/maps/api/geocode/json?address=%s&sensor=false';

$json = file_get_contents(sprintf($googleApi, $address));

$resultObject = json_decode($json);

$location = $resultObject->results[0]->geometry->location;

$lat = $location->lat;
$lng = $location->lng;

echo 'Lat: '.$lat.', Lng: '.$lng; 
```

没有错误检查，但我希望你明白这一点。有了这个结果，您可以更新您的数据库。我希望您知道如何连接多个表以从用户和城市表中获取结果。

# netty - Netty4 和 HTTP 块

> ID：14613529
> 
> 赞同：0
> 
> 时间：2013-01-30T20:51:31.750
> 
> 标签：netty

我很难理解如何在 Netty 4 中使用 Chunks。

我想要做的是以某种方式替换一个保持连接打开并每秒发送两次数据的 servlet。

因此，我查看了 servlet 返回的标头，现在有一个 Netty 处理程序扩展`ChannelInboundMessageHandlerAdapter<FullHttpRequest>`.

我实际上在我的`messageReceived(...)`方法中做这样的事情：

```
HttpResponse response = new DefaultHttpResponse(HttpVersion.HTTP_1_1,
                                                HttpResponseStatus.OK);
// initialize response
HttpHeaders headers = response.headers();
headers.set(HttpHeaders.Names.CONTENT_TYPE, "text/event-stream");
headers.set(HttpHeaders.Names.CACHE_CONTROL,
            "no-cache, no-store, max-age=0, must-revalidate");
headers.set(HttpHeaders.Names.PRAGMA, HttpHeaders.Values.NO_CACHE);
headers.set(HttpHeaders.Names.TRANSFER_ENCODING, HttpHeaders.Values.CHUNKED);
ctx.write(response); 
```

我`ChunkedWriteHandler`在上述处理程序代码之前的管道中添加了一个。

现在，如果我做对了，我现在应该`ChunkedInput`在我的频道中写入 s 以发送数据*片段*。

我创建了一个`ChunkedInput`像这样的子类：

```
private class MyChunk implements ChunkedByteInput {
    private final ChannelHandlerContext ctx;
    private final String json;
    private boolean done = false;

    private HystrixChunk2(ChannelHandlerContext ctx, String json) {
        this.ctx = ctx;
        this.json = json;
    }

    @Override
    public boolean readChunk(ByteBuf buffer) throws Exception {
        buffer.writeBytes("data: ".getBytes())
                .writeBytes(json.getBytes())
                .writeBytes("\n".getBytes());
        done = true;
        LOGGER.info("Wrote chunck");
        return true;
    }

    @Override
    public boolean isEndOfInput() throws Exception {
        return done;
    }

    @Override
    public void close() throws Exception {
        ctx.channel().close();
    }
} 
```

基本上在我的`messageReceived(..)`方法中，我只是编写了该类的一些实例。

但是我可能发现了一个错误，或者更可能不明白如何在 Netty 中使用块，因为我的套接字的输出上没有写入任何内容......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:44:42.023

实际上，我遇到的这个问题是由于我发送了 HTTP OK 响应而不是 101-CONTINUE。

现在似乎工作正常。

# javascript - 禁用 js 时不显示 div

> ID：14613531
> 
> 赞同：1
> 
> 时间：2013-01-30T20:51:39.690
> 
> 标签：javascript, html

当我启用 javascript 时，我的网站似乎一切正常，但一旦我禁用它，主页背景呈现正常，但实际内容根本不显示。我以为我以一种优雅的贬低方式设计了它。谁能解释为什么在禁用 JS 的情况下内容不显示？

[网站链接](http://sonogenics.co.uk/cust/alventura/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:53:53.987

`#main_content`您在（和其他元素）上的 CSS已`display:none;`设置默认隐藏内容。

然后，您使用 javascript 来显示它。没有javascript，它会保持隐藏状态。

# jquery - 为什么这个带有 jQ uery 代码的 Flickr API 不起作用？

> ID：14613533
> 
> 赞同：2
> 
> 时间：2013-01-30T20:51:44.037
> 
> 标签：jquery, getjson, flickr

所以我对 API 真的很陌生，我正在尝试将 jQuery 与我今天在网上看到的教程代码一起使用。我在 jsFiddle 工作：http: [//jsfiddle.net/shrimpboyho/Pg5kG/](http://jsfiddle.net/shrimpboyho/Pg5kG/)

这是代码：

```
alert("Using Flickr Api"); 

$.getJSON(
    "http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?", 
    {
        tags: "mount rainier",
        tagmode: "any",
        format: "json"
    },
    function(data) {
        $.each(data.items, function(i,item){
            $("<img/>").attr("src", item.media.m).appendTo("#images");
            if (i == 3) 
                return false;
        });
    }); 
```

这是HTML：

```
<html>
    <head> Flicker Api</head>
    <div id= "content"></div>
    <body></body>
</html> 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:57:40.767

您的 HTML 无效：

*   你不能把a放在`div`外面`body`。
*   `Flicker Api`应该在`<title>`标签内。
*   你追加到`#images`，但 div 被称为`#content`。

对这些问题进行排序后，它应该可以工作：

[**更新的小提琴**](http://jsfiddle.net/Pg5kG/2/)

# java - 循环遍历 JSP 中的 HashSet 和 HashMap 并打印结果

> ID：14613538
> 
> 赞同：4
> 
> 时间：2013-01-30T20:51:50.527
> 
> 标签：java, jsp, spring-mvc

我想在 JSP 中做以下事情`for loop`- 我只想循环 HashSet 和 HashMap 并打印结果

```
private static HashMap<Long, Long> histogram = new HashMap<Long, Long>();
private static Set<Long> keys = histogram.keySet();

for (Long key : keys) {
    Long value = histogram.get(key);
    System.out.println("MEASUREMENT, HG data, " + key + ":" + value);
} 
```

我正在使用 Spring MVC，所以我在我的`model`

```
model.addAttribute("hashSet", (keys));
model.addAttribute("histogram", (histogram)); 
```

在我的 JSP 页面中，我正在做类似的事情来模拟上述内容，`JAVA code`但它给了我一个例外，即我的 JSP 页面有问题。

```
<fieldset>
    <legend>Performance Testing:</legend>
        <pre>

            <c:forEach items="${hashSet}" var="entry">
            Key = ${entry.key}, value = ${histogram}.get(${entry.key})<br>
            </c:forEach>

        </pre>
        <br />
</fieldset> 
```

我得到的例外 -

```
Caused by: javax.el.PropertyNotFoundException: Property 'key' not found on type java.lang.Long
    at javax.el.BeanELResolver$BeanProperties.get(BeanELResolver.java:195)
    at javax.el.BeanELResolver$BeanProperties.access$400(BeanELResolver.java:172)
    at javax.el.BeanELResolver.property(BeanELResolver.java:281)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:62) 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:54:45.830

您不需要使用来`keySet`访问`values`. 当您使用>`HashMap`进行迭代时，您将返回，您可以使用：-并直接：-`HashMap``<c:forEach..``EntrySet``EntrySet#getKey()``EntrySet#getValue()`

```
<c:forEach items="${histogram}" var="entry">
     Key = ${entry.key}, value = ${entry.value}<br>
</c:forEach> 
```

# git - Git 标签是否只适用于当前分支？

> ID：14613540
> 
> 赞同：211
> 
> 时间：2013-01-30T20:52:00.537
> 
> 标签：git, git-tag

我目前正在使用具有多个分支的存储库。

当我创建标签时，该标签是否引用当时的分支？

换句话说：每当我创建一个标签时，我是否需要切换到该分支内的所需分支和标签，以便该标签在那个时间点引用该分支？

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2014-11-26T16:31:50.973

[CharlesB 的回答](https://stackoverflow.com/a/14613605/45375)和[helmbert 的回答](https://stackoverflow.com/a/14613638/45375)都很有帮助，但我花了一段时间才理解它们。这是另一种表达方式：

*   **标记**是**指向提交**的指针，**提交独立于分支而存在**。
    *   重要的是要理解**标签与分支没有*直接*关系**——它们**只标识一个*提交***。
        *   可以从任意数量的分支指向该提交 - 即，它可以是任意数量的分支历史的一部分 - 包括没有。
    *   因此，运行`git show <tag>`查看标签的详细信息不包含对任何分支的引用，只有标签指向的提交的 ID。
        *   （提交 ID（又名对象名称或 SHA-1 ID）是 40 个字符的字符串，由十六进制数字组成，是提交内容的哈希值；例如`6f6b5997506d48fc6267b0b60c3f0261b6afe7a2`：）

*   ***分支只是间接*****发挥作用**：
    *   **在*创建*标签**时，通过***暗示*标签将指向的提交**：
        *   不为标签指定目标默认为当前分支的最新提交（又名 HEAD）；例如：
            *   `git tag v0.1.0 # tags HEAD of *current* branch`
        *   将分支名称指定为标记目标默认为该分支的最新提交；例如：
            *   `git tag v0.1.0 develop # tags HEAD of 'develop' branch`
        *   （正如其他人所指出的，您还可以明确指定提交 ID 作为标签的目标。）
    *   **用于`git describe`描述当前分支时：**
        *   `git describe [--tags]`*根据该分支历史中* 最近的 [可能是轻量级] 标签以来的提交来描述当前分支。
        *   因此，**引用的标签`git describe`可能不会反映最近创建的标签*整体***。

* * *

## 回答 #2

> 赞同：195
> 
> 时间：2013-01-30T21:00:49.147

如果您通过例如创建标签

```
git tag v1.0 
```

该标签将引用您当前所在分支的最新提交。您可以更改分支并在那里创建标签。

您也可以在标记时仅参考另一个分支，

```
git tag v1.0 name_of_other_branch 
```

这将为另一个分支的最新提交创建标签。

或者，您可以通过直接引用某个提交的 SHA1 将标签放在任何地方，无论哪个分支

```
git tag v1.0 <sha1> 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2013-01-30T20:56:18.343

标签和分支完全不相关，因为标签指的是特定的提交，而分支是对历史最后一次提交的移动引用。树枝走了，标签留下了。

因此，当您标记提交时，git 并不关心签出哪个提交或分支，如果您向他提供您想要标记的 SHA1。

我什至可以通过引用分支来标记（然后它会标记分支的尖端），然后说分支的尖端在其他地方（`git reset --hard`例如），或者删除分支。但是我创建的标签不会移动。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-30T20:58:46.873

当调用`git tag <TAGNAME>`不带任何附加参数时，Git 将从您当前的 HEAD（即您当前分支的 HEAD）创建一个新标签。当向这个分支添加额外的提交时，分支 HEAD 将跟上那些新的提交，而标签总是指向同一个提交。

调用时`git tag <TAGNAME> <COMMIT>`，您甚至可以指定用于创建标签的提交。

无论如何，标签仍然只是指向某个提交（而不是分支）的“指针”。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-04-20T11:45:10.633

我们可以为过去的提交创建一个标签：

```
git tag [tag_name] [reference_of_commit] 
```

例如：

```
git tag v1.0 5fcdb03 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-05-24T08:52:55.707

如果要标记您所在的分支，请键入：

```
git tag <tag> 
```

并使用以下命令推送分支：

```
git push origin --tags 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-11T14:08:16.907

如果你想从一个类似`release/yourbranch`etc 的分支创建一个标签那么你应该使用类似的东西

```
git tag YOUR_TAG_VERSION_OR_NAME origin/release/yourbranch 
```

创建正确的标签后，如果您希望将标签推送到远程，请使用命令

```
git push origin YOUR_TAG_VERSION_OR_NAME 
```

# java - Java并发：映射中值的线程安全修改

> ID：14613541
> 
> 赞同：3
> 
> 时间：2013-01-30T20:52:02.240
> 
> 标签：java, multithreading, concurrency, map, thread-safety

我在 Java 中的并发和映射方面遇到了一些麻烦。基本上我有多个线程使用（读取和修改）他们自己的地图，但是这些地图中的每一个都是一个更大的地图的一部分，正在被另一个线程读取和修改：

我的主要方法创建所有线程，线程创建它们各自的映射，然后将其放入“主”映射：

```
Map<String, MyObject> mainMap = new HashMap<String, Integer>();
FirstThread t1 = new FirstThread();
mainMap.putAll(t1.getMap());
t1.start();
SecondThread t2 = new SecondThread();
mainMap.putAll(t2.getMap());
t2.start();
ThirdThread t3 = new ThirdThread(mainMap);
t3.start(); 
```

我现在面临的问题是第三个（主）线程在映射中看到任意值，这取决于一个或两个其他线程何时更新“他们的”项目。然而，我必须保证第三个线程可以迭代 - 并使用 - 映射的值，而不必担心正在读取的部分内容是“旧的”：

FirstThread（类似于 SecondThread）：

```
for (MyObject o : map.values()) {
    o.setNewValue(getNewValue());
} 
```

第三线程：

```
for (MyObject o : map.values()) {
    doSomethingWith(o.getNewValue());
} 
```

有任何想法吗？我考虑过使用全局可访问（通过静态类的静态最终对象）锁，当必须修改映射时，它将在每个线程中同步。或者是否有特定的 Map 实现可以评估我可以使用的这个特定问题？

提前致谢！

**编辑：** 正如@Pyranja 所建议的，可以同步 getNewValue() 方法。但是我忘了提到我实际上是在尝试按照事务的方式做一些事情，其中​​ t1 和 t2 在 t3 使用所述值之前/之后修改多个值。t3 的实现方式是 doSomethingWith() 如果它没有改变，它实际上不会对值做任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T22:49:15.617

要在比单个值对象更高的级别上进行同步，您需要锁来处理各个线程之间的同步。在不过多更改代码的情况下执行此操作的一种方法是[ReadWriteLock](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReadWriteLock.html)。线程 1 和线程 2 是写入器，线程 3 是读取器。

您可以使用两把锁或一把锁来执行此操作。我在下面勾勒出用一个锁、两个写入线程和一个读取线程来完成它，而不用担心在数据更新期间会发生什么异常（即事务回滚......）。

话虽如此，这听起来像是一个经典的生产者-消费者场景。您应该考虑使用[BlockingQueue 之](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)类的东西在线程之间进行通信，如[本问题](https://stackoverflow.com/questions/2332537/producer-consumer-threads-using-a-queue)所述。

您可能还需要考虑更改其他内容，例如[使用 Runnable 而不是扩展 Thread](https://stackoverflow.com/questions/541487/implements-runnable-vs-extends-thread)。

```
private static final class Value {

    public void update() {

    }

}

private static final class Key {

}

private final class MyReaderThread extends Thread {

    private final Map<Key, Value> allValues;

    public MyReaderThread(Map<Key, Value> allValues) {
        this.allValues = allValues;
    }

    @Override
    public void run() {
        while (!isInterrupted()) {
            readData();
        }
    }

    private void readData() {
        readLock.lock();
        try {
            for (Value value : allValues.values()) {
                // Do something
            }
        }
        finally {
            readLock.unlock();
        }

    }
}

private final class WriterThread extends Thread {

    private final Map<Key, Value> data = new HashMap<Key, Value>();

    @Override
    public void run() {
        while (!isInterrupted()) {
            writeData();
        }
    }

    private void writeData() {
        writeLock.lock();

        try {
            for (Value value : data.values()) {
                value.update();
            }
        }
        finally {
            writeLock.unlock();
        }
    }
}

private final ReentrantReadWriteLock lock = new ReentrantReadWriteLock();

private final ReadLock readLock;
private final WriteLock writeLock;

public Thing() {
    readLock = lock.readLock();
    writeLock = lock.writeLock();
}

public void doStuff() {
    WriterThread thread1 = new WriterThread();
    WriterThread thread2 = new WriterThread();

    Map<Key, Value> allValues = new HashMap<Key, Value>();
    allValues.putAll(thread1.data);
    allValues.putAll(thread2.data);
    MyReaderThread thread3 = new MyReaderThread(allValues);

    thread1.start();
    thread2.start();
    thread3.start();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T21:05:36.400

`ConcurrentHashMap`from `java.util.concurrent`- Map 的线程安全实现，它提供了比 synchronizedMap 高得多的并发度。只是很多读取几乎总是可以并行执行，同时读取和写入通常可以并行完成，多个同时记录通常可以并行完成。（该类`ConcurrentReaderHashMap`为多个读取操作提供了类似的并行性，但只允许一个活动的写入操作。）`ConcurrentHashMap`旨在优化检索操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T21:24:14.593

您的示例代码可能具有误导性。在您的第一个示例中，您创建 a`HashMap<String,Integer>`但第二部分迭代地图值，在这种情况下为`MyObject`. 同步的关键是了解共享**可变**状态的位置和位置。

An`Integer`是不可变的。它可以自由共享（但对 an 的引用`Integer` **是**可变的 - 它必须安全地发布和/或同步）。但是您的代码示例表明地图填充了可变`MyObject`实例。

鉴于`MyObject`任何线程都不会更改映射条目（键 -> 引用），**并且**所有映射都是在任何线程启动之前创建并安全发布的，我认为足以同步`MyObject`. 例如：

```
public class MyObject {
   private Object value;

   synchronized Object getNewValue() {
      return value;
   }

   synchronized void setNewValue(final Object newValue) {
      this.value = newValue;
   }
} 
```

如果我的假设不正确，请澄清您的问题/代码示例，并考虑@jacobm 的评论和@Alex 的回答。

# c# - C# 中的构造几何可视化

> ID：14613544
> 
> 赞同：0
> 
> 时间：2013-01-30T20:52:12.387
> 
> 标签：c#, .net, xna, directx

我需要使用 C# 在 3d 中可视化构造几何。为此，我想选择一个图书馆。理想情况下，该库应该能够提供以下内容：

1.  在 3d 中渲染任意多边形。线框表示。
2.  正投影
3.  相机控制。我需要能够放大/缩小，设置旋转中心以转动相机。
4.  用鼠标选择我的多边形、边、顶点。
5.  在顶点、边和多边形上绘制文本。

效率不是首要任务，因此如果它可以开箱即用地完成这些事情或为其提供良好的高级服务，它可能会相当缓慢。

我试着看看XNA。但据我了解，它不直接支持多边形的可视化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:52:34.687

XNA通过提供对底层 Direct3D 9 GraphicsDevice 对象的访问来直接支持多边形的可视化**。**您还可以动态创建网格并以托管方式绘制它，但这会更慢。

见： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.xna.framework.graphics.graphicsdevice.drawprimitives.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.xna.framework.graphics.graphicsdevice.drawprimitives.aspx) 及相关方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:20:12.777

c# 中有几个 DirectX 包装器。我会避免使用托管 DirectX，因为它已被弃用，并且您只能访问 direct3d9。

DirectX 最常用的两个库是：

*   [SlimDX](http://www.slimdx.org/)
*   [夏普DX](http://sharpdx.org/)

两者都运行良好，并支持最新的 DirectX 功能集（SlimDX 最高 11，SharpDX 支持 windows 8 和 11.1）。

它们都支持您需要做的事情，这当然意味着您需要进行一些编码。

# php - 从 PHP 数组为下拉选择字段创建嵌套列表

> ID：14613546
> 
> 赞同：8
> 
> 时间：2013-01-30T20:52:26.573
> 
> 标签：php, arrays, nested, hierarchy

我正在努力处理一个我想变成嵌套 <select> 的数组

我需要：

```
<select>
<option value="1">Top1</option>
<option value="2">Top2</option>
<option value="9">Top3</option>
<option value="7"> - - Top3.1</option>
<option value="5"> - - Top3.2</option>
<option value="12">- - - - Top3.2.1</option>
<option value="6">Top4</option>
<option value="4">Top5</option>
<option value="8"> - - Top5.1</option>
<option value="3"> - - Top5.2</option> 
```

我不能使用 optgroup，因为一切都是可选的。据我所知，您不能选择 optgroup 标签。

我的数组如下所示：

```
[44] => Array
    (
        [id] => 1
        [name] => Test
        [slug] => test
        [parent] => 0
    )

[45] => Array
    (
        [id] => 2
        [name] => Test-Sub
        [slug] => test-sub
        [parent] => 1
    )

[46] => Array
    (
        [id] => 3
        [name] => Test-Sub-Sub
        [slug] => test-sub-sub
        [parent] => 2
    ) 
```

我觉得我已经尝试了几十种变体，但我无法正确构建我的表单选择。

那是我最后一次尝试：

```
function toDropdown($arr)
    {
        foreach ($arr as $row) {
            $cat[$row['id']] = $row['name'];
            if ($row['parent'] != 0) {
                $cat[$row['id']] = '--' . $row['name'];
            }
        }
        return $cat;
    } 
```

但是这样一来，就按照ID排序，嵌套就失去了意义。

我会继续努力，但如果有人可以提供帮助，我将不胜感激！

* * *

编辑：PHP 数据

* * *

我从数据库中获取所有类别的功能：

```
function get_categories($parent = 'all')
{
    $this->db->select('categories.id, categories.name, categories.slug, categories.parent');
    $this->db->from('categories');

    if ($query = $this->db->get())
    {
        return $query->result_array();
    }

    return FALSE;
} 
```

我的 view.php，我在其中输出所有数据：

```
$query = $this->datei_model->get_categories('all');

foreach ($query as $row)
{
    $parents[] = $row;
}

$tree = buildTree($parents);

print("<select>\n");
printTree($tree);
print("</select>"); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-30T23:01:47.007

尝试这个;

```
function buildTree(Array $data, $parent = 0) {
    $tree = array();
    foreach ($data as $d) {
        if ($d['parent'] == $parent) {
            $children = buildTree($data, $d['id']);
            // set a trivial key
            if (!empty($children)) {
                $d['_children'] = $children;
            }
            $tree[] = $d;
        }
    }
    return $tree;
}

$rows = array(
    array ('id' => 1, 'name' => 'Test 1', 'parent' => 0),
    array ('id' => 2, 'name' => 'Test 1.1', 'parent' => 1),
    array ('id' => 3, 'name' => 'Test 1.2', 'parent' => 1),
    array ('id' => 4, 'name' => 'Test 1.2.1', 'parent' => 3),
    array ('id' => 5, 'name' => 'Test 1.2.2', 'parent' => 3),
    array ('id' => 6, 'name' => 'Test 1.2.2.1', 'parent' => 5),
    array ('id' => 7, 'name' => 'Test 2', 'parent' => 0),
    array ('id' => 8, 'name' => 'Test 2.1', 'parent' => 7),
);

$tree = buildTree($rows);
// print_r($tree);

function printTree($tree, $r = 0, $p = null) {
    foreach ($tree as $i => $t) {
        $dash = ($t['parent'] == 0) ? '' : str_repeat('-', $r) .' ';
        printf("\t<option value='%d'>%s%s</option>\n", $t['id'], $dash, $t['name']);
        if ($t['parent'] == $p) {
            // reset $r
            $r = 0;
        }
        if (isset($t['_children'])) {
            printTree($t['_children'], ++$r, $t['parent']);
        }
    }
}

print("<select>\n");
printTree($tree);
print("</select>"); 
```

输出;

```
<select>
    <option value='1'>Test 1</option>
    <option value='2'>- Test 1.1</option>
    <option value='3'>- Test 1.2</option>
    <option value='4'>-- Test 1.2.1</option>
    <option value='5'>-- Test 1.2.2</option>
    <option value='6'>--- Test 1.2.2.1</option>
    <option value='7'>Test 2</option>
    <option value='8'>- Test 2.1</option>
</select> 
```

在你的情况下；

```
<select>
    <option value='1'>Baden-Württemberg</option>
    <option value='2'>- DMP-Verträge</option>
    <option value='50'>- Sprechstundenbedarf</option>
    <option value='52'>- Richtgrößen</option>
    <option value='53'>- Prüfungen</option>
    <option value='54'>- DMP-Verträge</option>
    <option value='55'>- Sonstige Verträge</option>
    <option value='3'>Berlin</option>
    <option value='62'>- DMP-Verträge</option>
    <option value='63'>- Prüfungen</option>
    <option value='64'>- Richtgrößen</option>
    <option value='65'>- Sonstige Verträge</option>
    <option value='66'>- Sprechstundenbedarf</option>
    <option value='4'>Brandenburg</option>
    <option value='67'>- DMP-Verträge</option>
    <option value='68'>- Prüfungen</option>
    <option value='69'>- Richtgrößen</option>
    <option value='70'>- Sonstige Verträge</option>
    <option value='71'>- Sprechstundenbedarf</option>
    <option value='5'>Bremen</option>
    <option value='72'>- DMP-Verträge</option>
    <option value='73'>- Prüfungen</option>
    <option value='74'>- Richtgrößen</option>
    <option value='75'>- Sonstige Verträge</option>
    <option value='76'>- Sprechstundenbedarf</option>
    <option value='7'>Hessen</option>
    <option value='6'>Hamburg</option>
    <option value='8'>Mecklenburg-Vorpommern</option>
    <option value='9'>Niedersachsen</option>
    <option value='10'>Nordrhein</option>
    <option value='11'>Rheinland-Pfalz</option>
    <option value='12'>Saarland</option>
    <option value='13'>Sachsen</option>
    <option value='14'>Sachsen-Anhalt</option>
    <option value='15'>Schleswig-Holstein</option>
    <option value='16'>Thüringen</option>
    <option value='17'>Westfalen-Lippe</option>
    <option value='51'>Richtgrössen</option>
    <option value='56'>Bayern</option>
    <option value='57'>- DMP-Verträge</option>
    <option value='58'>- Prüfungen</option>
    <option value='59'>- Richtgrößen</option>
    <option value='60'>- Sonstige Verträge</option>
    <option value='61'>- Sprechstundenbedarf</option>
</select> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-02T14:06:50.300

这只是[Qeremy 回答的原始代码的微小变化](https://stackoverflow.com/a/14615515/2655631)

```
function printTree($tree, $r = 0, $p = null) {
    foreach ($tree as $i => $t) {
        $dash = ($t['parent'] == 0) ? '' : str_repeat('-', $r) .' ';
        printf("\t<option value='%d'>%s%s</option>\n", $t['id'], $dash, $t['name']);
        if (isset($t['_children'])) {
            printTree($t['_children'], $r+1, $t['parent']); 
        }
    }
} 
```

现在，虚线名称效果很好。*对不起我的英语不好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T10:15:11.643

在 Qeremy 的代码中，只需更改这一行，代码不会给你任何递增的破折号

```
$t['parent'] == $p 
```

到->

```
$t['parent'] == 0 
```

# iphone - XCode base_convert

> ID：14613548
> 
> 赞同：1
> 
> 时间：2013-01-30T20:52:31.897
> 
> 标签：iphone, ios, ios5, ios6

我正在开发 iOS 应用程序，我需要 base_convert 函数。应用程序也使用 base_convert 与 PHP 服务器通信。在 PHP 中我使用这个：

```
base_convert($something,16,36) and base_convert($something,36,16) 
```

我搜索类似于我在 PHP 中使用的东西，但搜索的是 Xcode（iOS 应用程序）。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:29:43.377

这里有一个 C++ 实现：

[http://thinkdiff.net/mixed/base-conversion-handle-upto-36-bases/](http://thinkdiff.net/mixed/base-conversion-handle-upto-36-bases/)

这将使用最多 36 个基数来回转换。不确定您是否需要更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:38:10.737

有一个专门针对[Base 36](http://en.wikipedia.org/wiki/Base_36)的完整维基百科页面，其中包含您可以适应的各种形式的源代码（例如，C 代码应该直接放入，无需修改，但它不是 Objective-c）

还有[如何将 Decimal 转换为 base36](http://iphonedevsdk.com/forum/iphone-sdk-development/42873-how-to-convert-decimal-to-base36.html)，它只进行单向转换，但代码是objective-c，因此您可以了解如何调整维基百科代码。

至于为什么base 36我学到了：

> 因此，Base 36 是使用 ASCII 字符的最紧凑的不区分大小写的字母数字系统

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T02:06:12.700

将 David Hope 建议的代码改编为 Objective-C，在这里：

[https://gist.github.com/furkanmustafa/5660086](https://gist.github.com/furkanmustafa/5660086)

# knockout.js - 将敲除中的下拉列表绑定到对象

> ID：14613550
> 
> 赞同：1
> 
> 时间：2013-01-30T20:52:49.757
> 
> 标签：knockout.js, kendo-ui, entity-framework-5, knockout-mapping-plugin

我正在尝试将下拉列表（剑道下拉）使用的绑定设置为完整对象。我正在使用 Knockout-Kendo 来完成绑定，但我不认为 kendo 的东西或 knockout-kendo 的东西是我的问题的一个因素。

例如我有以下对象

```
var model = {
  "Client": null,
  "Clients": [
    {
      "CompanyAccount": {
        "RelationshipManager": {},
        "CompanyAccountId": 1,
        "Name": "My Company Name",
        "PhoneNumber": "(555) 555-5555",
        "Address": {
          "State": {
            "StateId": 6,
            "Name": "New York",
            "Abbreviation": "NY"
          },
          "AddressId": 1,
          "Street1": "123 Any Street",
          "Street2": null,
          "City": "New York",
          "StateId": 6,
          "Zip": 12345
        }
      },
      "ClientId": 1,
      "Name": "New Client 1/30/2013",
      "CompanyAccountId": 1,
      "ContactName": null,
      "Salutation": null,
      "ClientAddress": null,
      "OfficePhoneNumber": null,
      "OfficePhoneExtension": null,
      "MobilePhoneNumber": null,
      "Email": null,
      "TrackingState": 0
    }
  ]
  }
} 
```

我使用敲除映射插件将所有的东西变成一个可观察的。

var viewModel = ko.mapping.fromJS(model); ko.applyBindings(viewModel);

我的 html 绑定看起来像这样

```
<select data-bind="kendoDropDownList: { dataTextField: 'Name', optionLabel: 'Select An Client...', dataValueField: 'ClientId', data: Clients, value: Client }"></select> 
```

但我想用像这样的`Client`数据来设置属性

```
Client: {
  "CompanyAccount": {
    "RelationshipManager": {},
    "CompanyAccountId": 1,
    "Name": "My Company Name",
    "PhoneNumber": "(555) 555-5555",
    "Address": {
      "State": {
        "StateId": 6,
        "Name": "New York",
        "Abbreviation": "NY"
      },
      "AddressId": 1,
      "Street1": "123 Any Street",
      "Street2": null,
      "City": "New York",
      "StateId": 6,
      "Zip": 12345
    }
  },
  "ClientId": 1,
  "Name": "New Client 1/30/2013",
  "CompanyAccountId": 1,
  "ContactName": null,
  "Salutation": null,
  "ClientAddress": null,
  "OfficePhoneNumber": null,
  "OfficePhoneExtension": null,
  "MobilePhoneNumber": null,
  "Email": null,
  "TrackingState": 0
} 
```

我只能弄清楚如何使用“1”或“New Client 1/30/2013”​​等数据设置属性

*** 编辑** 我正在尝试设计这个，因为我缺乏使用实体框架的经验。如果我有一个外键和一个与我的模型中的外键绑定的对象，该外键会发送给客户端。调用 SaveChanges() 时更新外键但不更新模型会导致模型上出现不一致的状态异常。我认为我现在最好的方法是创建一个没有这些对象的 ViewModel（仅包含 ForeignKey Id）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T05:31:47.633

此 Kendo UI 小部件不支持将值设置为对象。您需要将值设置为唯一键 ( `ClientId`)，然后使用计算的 observable 来检索实际对象。

像：http: [//jsfiddle.net/rniemeyer/xz2uY/](http://jsfiddle.net/rniemeyer/xz2uY/)

```
this.selectedId = ko.observable("2");
this.selectedChoice = ko.computed(function() {
    var id = this.selectedId();
    return ko.utils.arrayFirst(this.choices(), function(choice) {
       return choice.id ===  id;
    });
}, this); 
```

# c# - 锁定性能锁定多个列表

> ID：14613555
> 
> 赞同：1
> 
> 时间：2013-01-30T20:53:00.283
> 
> 标签：c#, multithreading, locking

我应该使用 2 个锁变量还是 1 个就足够了，它会影响性能吗？如果我有 3 或 4 个从多个线程调用的方法怎么办？

```
public static class Foolocking
{
    private static object _syncRoot = new object();

    private static List<string> _list1;
    private static List<string> _list2;

    public Foolocking()
    {
        _list1 = new List<string>();
        _list2 = new List<string>();
    }

    public void Method1(string s1)
    {
        lock (_syncRoot)
        {
            _list1.Add(s1);
        }
    }

    public void Method2(string s2)
    {
        lock (_syncRoot)
        {
            _list2.Add(s2);
        }
    }
} 
```

参考这个，锁定 list1 和 list2 本身是否正确？

[在多线程场景中正确锁定 List<T>？](https://stackoverflow.com/questions/1362995/properly-locking-a-listt-in-multithreaded-scenarios)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:55:56.393

> 我应该使用 2 个锁变量还是 1 个就足够了，它会影响性能吗？

如果您使用两个锁变量，则可以同时从不同的线程添加每个列表。

如果您使用单个锁变量，则两个线程将相互等待。这可能会导致更多的线程争用，从而降低整体吞吐量。

每个对象的单独锁定变量可能会以更高的复杂性为代价来提高性能。话虽如此，如果您在一个方法中同时使用两个列表，并且需要锁定这两个列表，则两个锁定变量会增加[死锁](http://en.wikipedia.org/wiki/Deadlock)的可能性，因此需要格外小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:03:32.903

锁定非常快（如果我没记错的话，几纳秒）。3-4 把锁不是一个真正的问题。

或者换句话说 - 如果 4 个锁对于您的应用程序来说太慢了 - 您需要完全改变方法并寻找无锁算法而不是非平凡的。

我会说一百个锁看起来很可疑，但 3-4 我什至不会浪费时间去问这个问题。

# jquery-ui - JQuery UI 选项卡 1.10 等效

> ID：14613558
> 
> 赞同：1
> 
> 时间：2013-01-30T20:53:31.547
> 
> 标签：jquery-ui, jquery-ui-tabs

jQuery UI 1.10 是否有等效代码？

这在以前的版本中运行良好，但现在不推荐使用 ajaxOptions。

```
$('#mytabs').tabs({
    ajaxOptions: {
        dataFilter: function(result){
            var data = $.parseJSON(result);
            return data.myhtml;
        }
    },
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:54:44.497

尝试这个：

```
$('#TheTab').tabs({
    beforeLoad: function( event, ui ) {
        ui.ajaxSettings.dataType = 'html';
        ui.ajaxSettings.dataFilter = function(data) {
            return $(data).find('#MYCONTENT').html();
        };
        ui.jqXHR.fail(function(data) {
            ui.panel.html('<b>Something went wrong with the TABS-documentation ;)</b>');
        });
    }
}); 
```

# c# - 如何使用 C# 将格式化的 HTML 字符串复制到剪贴板以进行粘贴？

> ID：14613562
> 
> 赞同：2
> 
> 时间：2013-01-30T20:53:41.800
> 
> 标签：c#

我的最终目标是将[格式化的富文本插入 Outlook 检查器（例如 AppointmentItem、MailItem 等）。](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/18945426-c422-4c6e-9e58-94e3fd7b31c4?prof=required) 我在 MSDN 论坛上问过这个问题，有人回答我应该使用剪贴板来复制其内容，然后使用我想使用的目标格式将其粘贴到窗口中。

我有以下 HTML**字符串**

```
<html><body><table><tr><td>iPhone</td><td>Telephone#</td></tr></table></body></html> 
```

我有以下 C# 代码

```
Clipboard.SetText(insertString, TextDataFormat.Html);

//....
//code to get Word.Range in my inspector item (inconsequential to this question)
//....

selected.Paste(); 
```

问题是剪贴板没有插入文本，或者在代码中引发 COM Failed 异常。

![使用 Paste() 时的 COM 异常](../Images/4e0da5411615f068c6d4eff44a08f7b2.png)

**回答感谢 jlew**

```
 HtmlFragment.CopyToClipboard(insertString);
 selected.Paste(); 
```

HtmlFragment 代码在这里找到：http: [//blogs.msdn.com/b/jmstall/archive/2007/01/21/sample-code-html-clipboard.aspx](http://blogs.msdn.com/b/jmstall/archive/2007/01/21/sample-code-html-clipboard.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T21:02:09.627

除非自过去（.NET 2，这是我最后一次尝试此操作）以来发生了某些变化，否则您需要在将其放入剪贴板之前添加正确的剪贴板标题行，如下所述：

[http://blogs.msdn.com/b/jmstall/archive/2007/01/21/html-clipboard.aspx](http://blogs.msdn.com/b/jmstall/archive/2007/01/21/html-clipboard.aspx)

# c# - 简单的静态网格视图

> ID：14613563
> 
> 赞同：0
> 
> 时间：2013-01-30T20:53:43.303
> 
> 标签：c#, xaml, windows-8

我已经开始了解适用于 Windows 8 应用商店应用的 GridView (XAML)。我已经使用 ItemsPage 示例来尝试查看代码。

我的目标是将它用作水平菜单，在单击事件时它只会打开另一个 xaml 页面。

我已经编辑了 SampleDataSource.cs 文件并填充了所需的内容，我认为会有一种更简单、更简洁的方法来执行此操作。这个菜单不会是动态的，也不会改变，所以我正在寻找一种静态添加菜单项的方法。

我可以执行以下操作来添加一个简单的文本条目；

```
<x:String>Item 1</x:String> 
```

但是我不确定如何绑定到某些部分，例如图像和标题元素

是的，我想我对这一点有了更多的了解。以下代码将尝试绑定到 itemsViewSource

```
<CollectionViewSource
        x:Name="itemsViewSource"
        Source="{Binding Items}"
        d:Source="{Binding AllGroups, Source={d:DesignInstance Type=data:SampleDataSource, IsDesignTimeCreatable=True}}"/> 
```

那么我是否需要创建一个新列表，例如；

```
List<String> itemsList = new List<string>();
itemsList.Add("Item 1");
itemsList.Add("Item 2"); 
```

唯一的问题是每个项目（行）都需要一个标题和图像文本字段以及如何将它们绑定到正确的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:43:47.820

如果您的`ItemsControl`( `GridView`) 需要为每个列表项显示多个绑定项 - 您需要将其 Source 绑定到一个包含字符串以外的内容的列表，除非您想解析字符串。在你的情况下，你会有类似的东西

```
List<TitleAndImageText> itemsList = new List<TitleAndImageText>();
itemsList.Add(new TitleAndImageText { Title = "Title 1", ImageText = "Image Text 1");
itemsList.Add(new TitleAndImageText { Title = "Title 2", ImageText = "Image Text 2"); 
```

然后在您的`ItemTemplate`/`DataTemplate`您将有两个`TextBlock`s - 绑定到您的项目视图模型的属性，如下所示：`Text="{Binding Title}"`, `Text="{Binding ImageText}"`.

当然你需要定义你的`TitleAndImageText`，例如

```
public class TitleAndImageText
{
    public string Title { get; set; }
    public string ImageText { get; set; }
} 
```

# android - Android JNI：仅从安装目录加载库

> ID：14613572
> 
> 赞同：1
> 
> 时间：2013-01-30T20:54:07.843
> 
> 标签：android, android-ndk

所以，目前Android上没有办法，只能手动预加载依赖的共享库。这对我来说很好，没什么大不了的。android buildsystem（预构建库功能）也存在一些问题，因此我不得不为我的依赖共享库的不同构建命名：**libsal.so**和**libsal-slim.so**。根据构建设置，这两个中的一个会进入最终的 apk。然后，在 java 端，我尝试加载 libsal.so，如果失败，则尝试加载 libsal-slim.so。

一切都很好，直到我们偶然发现了一部手机，该手机在默认固件中安装了 libsal.so，安装在 /system/lib 中。出于这个原因，如果我的应用程序是用 libsal-slim.so 构建的，它就会停止在该手机上运行，​​因为它会首先尝试加载 libsal.so，然后从 /system/lib 加载错误的库。

问题：如何确保只加载安装文件夹中的库？也许我可以以某种方式检索我的应用程序的安装文件夹并“计算”我的共享库的完整路径？我怎么能做那个 java voodoo 魔法？一般来说，我是 java 和 android 的大菜鸟，如果这个问题看起来太天真了 :) 是的，我不会说英语（或者他们怎么说），请依靠 c++ [结束笑话]

libsal.so 不是实际名称，我仅用作示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:27:09.967

使用`System.load(fullpath_of_the_lib)`可能可以解决您的问题。

但是您的问题是获取 fullpath_of_the_lib。事实上，android API 不允许您获取资源的路径。你只能得到一个流来读取它。

要解决此限制，您可以执行以下操作：

*   将您的库放在您的应用资产文件夹中。
*   在你的 lib 上打开一个 InputStream ：`getAssets().open("libsal.so")`
*   在您的 SD 卡中创建一个名为“libsal.so”（或其他）的文件
*   将输入流中的字节复制到刚刚创建的文件中
*   在 sdcard 上获取“libsal.so”的绝对文件路径
*   称呼`System.load(fullpath_of_the_lib_on_the_sd_card)`

当然你只需要lib中的最后一步已经在sdcard上。

一个更简单的选择可能是将您的库重命名为 libMyVeryUncommonLibraryName.so 之类的名称，这样它就不会与另一个库名称冲突。

# php - preg_replace URLs 但不是图像

> ID：14613573
> 
> 赞同：4
> 
> 时间：2013-01-30T20:54:09.320
> 
> 标签：php, preg-replace

```
$title =  $_POST['title'];

$post = stripslashes($_POST['TextArea']);

$link = preg_replace('"(http://www\S+)"','<a href="$1">$1</a>', $post);

echo $link; 
```

提交我的表单后，上面的脚本替换了 textarea 中的所有链接，图像的结果将被破坏。

有没有办法替换链接而不是图像？

虽然 url 工作完美，但浏览器中图像的结果是

```
<img src="<a href="http://...myimage.jpg"">http://.../myimage.jpg"</a> height="150" width="150"> 
```

![在此处输入图像描述](../Images/7fb3d88ea7b13f0b44e9872ddf9d9eec.png) ![在此处输入图像描述](../Images/14b441f1e175d6c9bb70613d604b219b.png)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T21:36:46.730

```
preg_replace('"(?<!src=[\"\'])(http://www\S+)"','<a href="$1">$1</a>', $text) 
```

这只会转换`http://www`前面没有`src="`or的链接`src='`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T22:01:09.527

```
preg_replace('/(?<!src=[\"\'])(http(s)?:\/\/(www\.)?[\/a-zA-Z0-9%\?\.\-]*)(?=$|<|\s)/','<a href="$1">$1</a>', $text); 
```

这是正确的方法，因为以前的解决方案在必要时没有完成 url

# c - C中的大端算术

> ID：14613575
> 
> 赞同：1
> 
> 时间：2013-01-30T20:54:13.417
> 
> 标签：c, endianness

有没有一种方便的方法对大端数据进行算术运算？这是我一直在做的事情（在伪代码中）：

```
main:
    unsigned int big_endian_number = 0x12345678;
    int multiplier = 7;

    unsigned int little_endian_number = reverse_the_bytes(big_endian_number);
    little_endian_number = little_endian_number * multiplier;

    big_endian_number = reverse_the_bytes(little_endian_number); 
```

这看起来很直接，但冗长且容易出错。一定有更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T21:25:55.273

网络字节顺序是大端，使用 ntohl（网络到主机）将转换为本地字节序，然后使用 htonl 转换回来。

如有必要，我可以发布一个代码示例，但我认为这相当简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:15:02.950

就个人而言，我会在标头中定义一些函数来执行您需要的算术运算：

```
#include <arpa/inet.h>

static inline uint32_t BEAdd_u32(uint32_t x, uint32_t y) {
    return htonl(ntohl(x) + ntohl(y));
} 
```

并使用它们而不是在转换中乱扔代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:15:32.123

这个问题没有意义。如果你写`x = 0x12345678; x *= 2`，那么 x 将有值`0x2468acf0`。`f0`是在第一个字节中还是在第一个字节中存储在内存`24`中是完全无关的。使用高级语言的全部意义在于它可以工作，并且您不在乎如何`0x12345678`存储。（也就是说，编译器将文字`0x2468acf0`转换为盒子上的适当表示，您不必担心。）

# winforms - DevExpress如何替换掉掉的60个免费控件？

> ID：14613579
> 
> 赞同：4
> 
> 时间：2013-01-30T20:54:23.427
> 
> 标签：winforms, dll, controls, devexpress

两年前我有一个[开源业余项目](http://replayer.codeplex.com/)，我使用了 DevExpress 提供的免费 60 个控件，链接如下：[https ://www.devexpress.com/Products/Free/NetOffer/](https://www.devexpress.com/Products/Free/NetOffer/)

我对这些非常满意，我什至[在这里亲自推荐了这些控件](https://stackoverflow.com/a/2019411/79485)。

我的项目现在已经很老了，但现在我想做一些小的改动，但令我惊讶的是，我刚刚体验到我将无法再构建它，因为我依赖于这些控件。我没有在本地复制这些 DevXpress 库，所以我真的把它们弄丢了。

**对于这些现在缺少的控件，我能做些什么？**有人面临同样的问题吗？我应该替换它们（相当多的工作，因为我现在根本不想更改 UI），还是有人仍然有这些？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T21:09:59.637

我的脑子里有个小故障：-/ 这些 DLL 当然可以在我的安装程序包中找到。我刚刚从[codeplex](http://replayer.codeplex.com/)安装了我自己的软件，我在那里发布了它，通过硬盘搜索，瞧，这里列出了：

```
DevExpress.Data.v10.2.cdf-ms
DevExpress.Data.v10.2.dll
DevExpress.Data.v10.2.manifest
DevExpress.Utils.v10.2.cdf-ms
DevExpress.Utils.v10.2.dll
DevExpress.Utils.v10.2.manifest
DevExpress.XtraBars.v10.2.cdf-ms
DevExpress.XtraBars.v10.2.dll
DevExpress.XtraBars.v10.2.manifest
DevExpress.XtraEditors.v10.2.cdf-ms
DevExpress.XtraEditors.v10.2.dll
DevExpress.XtraEditors.v10.2.manifest
DevExpress.XtraTreeList.v10.2.cdf-ms
DevExpress.XtraTreeList.v10.2.dll
DevExpress.XtraTreeList.v10.2.manifest
DevExpress.XtraVerticalGrid.v10.2.cdf-ms
DevExpress.XtraVerticalGrid.v10.2.dll
DevExpress.XtraVerticalGrid.v10.2.manifest 
```

因此，以防万一，任何人都需要这些 DLL（但是，最初的 60 个控件套件包含更多文件），您可以从我的安装程序中以相同的方式获取它们。

我猜这是合法的，因为在我的项目中分发（使用 LGPL v2）也是合法的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-03T16:33:29.493

最新的免费控件是 11.2 版，你可以从[github下载它](https://github.com/danieljeffrey111/HydroDesktop/tree/master/Binaries/Application%20Extensions)

# java - 简单的矩形面积计算崩溃

> ID：14613580
> 
> 赞同：2
> 
> 时间：2013-01-30T20:54:35.220
> 
> 标签：java, android

我是 android 新手，目前正在尝试创建一个计算矩形面积的简单应用程序。

执行计算时，结果显示在指定的 TextView 上。

这是我当前用于计算矩形面积的代码：

 `````
package org.me.myandroidstuff;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Button;
import android.app.Activity;
import android.os.Bundle;

public class CalculateRectangleArea2Activity extends Activity implements OnClickListener{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        EditText length = (EditText) findViewById(R.id.txtLength);
        EditText width = (EditText) findViewById(R.id.txtWidth);
        TextView result = (TextView) findViewById(R.id.lblResult);
        Button calculate = (Button) findViewById(R.id.btnCalculate);

        calculate.setOnClickListener(this);
    }

    public void onClick(View v){

        EditText length = (EditText) findViewById(R.id.txtLength);
        EditText width = (EditText) findViewById(R.id.txtWidth);
        calculateArea(length.getText().toString(), width.getText().toString());     
    }

    private void calculateArea(String clength, String cwidth){

        TextView result = (TextView) findViewById(R.id.lblResult);

        int area = Integer.parseInt(clength)*Integer.parseInt(cwidth);

        result.setText(area);
    }} 
````  `这是我的 main.xml 文件：

 `````
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <EditText
        android:id="@+id/txtLength"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="number"/>

    <EditText
        android:id="@+id/txtWidth"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="number"/>

    <TextView 
        android:id="@+id/lblResult"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

    <Button
        android:id="@+id/btnCalculate"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

</LinearLayout> 
````  `单击按钮计算时，应用程序出现错误“应用程序calculateRectangleArea2已意外停止。请重试。”

我相信这与 NullPointerException 有关，尽管尝试通过 logCat 和断点跟踪错误并没有帮助。

任何帮助将不胜感激:)，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:58:42.287

尝试使用：

```
result.setText(String.valueOf(area)); 
```

代替：

```
result.setText(area); 
```

`setText()`需要一个 String 或 CharSequence 参数，而您将它传递给一个 int。这可能会导致您的崩溃。

此外，您不需要一遍又一遍地获取对每个视图的引用。将它们分配给一个实例变量`onCreate()`就足够了。````

# magento - Magento 通过 local.xml 删除 div

> ID：14613583
> 
> 赞同：0
> 
> 时间：2013-01-30T20:54:43.057
> 
> 标签：magento

我知道我可以通过命令删除块，但是一件事比另一件事更正确吗？另外，我能以某种方式删除 .div 类而不是块吗？这样我就可以从特定页面中删除 .div 了吗？

这是我所知道的片段示例，用于删除块。

```
<remove name="name_name"></remove>
<action method="unsetChild"><name>name.name</name></action> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:41:49.823

`Remove`- 从任何级别删除块，示例块`AAA`是块的子块的`left`子块，`content`然后我可以在页面布局的顶层删除它：

```
<xxx_index_index>
  <remove name="AAA" />
  .... 
```

`unsetChild`我们只能在目标块的父级中使用，例如，如果我有这个布局：

```
<default>
  <reference name="content">
    <block name="BBB" ... /> 
```

然后我可以用方法删除 BBB`unsetChild`

```
<yyy_index_index>
  <reference name="content">
    <action method="unsetChild"><name>BBB</name></action> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:38:14.340

不，您不能删除`div`HTML 元素，除非有一个由该元素组成并在布局配置中定义的块。然后，您可以删除该块并使用它所需的 div。

没有使用 Magento 布局设置删除 HTML 元素的规定。

但是，您可以使用布局配置来包含一个 javascript 文件，该文件使用 CSS 选择器来删除您想要的 div 元素。

# optimization - 客户端能否可靠地为写入数据库的对象生成 PK？

> ID：14613584
> 
> 赞同：4
> 
> 时间：2013-01-30T20:54:43.487
> 
> 标签：optimization, client-server, primary-key, guid

我已经为这个困境烦恼了一段时间，我想我会接近 SO。

我的场景的一些背景知识：

*   我有包含 0 个或多个 PlaylistItem 子项的播放列表。
*   播放列表很少创建。因此，我可以从服务器请求 GUID，等待响应，并在成功时刷新 UI 以显示成功添加的播放列表。
*   PlaylistItem 对象经常被创建。因此，当我等待服务器以 UUID 响应时，我对加载消息不满意**。**

这最后一个事实是一种优化，我知道，但我认为它极大地提高了程序的可用性。

尽管如此，我还是想讨论一下我唯一标识我的对象客户端的选项。我将首先强调我尝试过但失败的两个选项，然后是我正在考虑的第三个选项。我希望对其他可能的解决方案有所了解。

* * *

## 生成将持久保存到服务器的 PK UUID 客户端。

这是我的第一选择。这是一个显而易见的决定，但也有一些明显的缺点。这里的第一个问题是客户端 UUID 不能也不应该被信任用于这种目的。恶意用户可以轻松地强制进行 PK 冲突。此外，我的理解是，如果我选择在客户端生成 UUID，我应该期待更大的碰撞机会。抓挠那个。

## 根据播放列表 GUID 和播放列表中的位置生成复合 PK

我认为这是一个棘手但很好的解决我的问题的方法。PlaylistItem 的位置对于给定的 Playlist 集合是唯一的，**并且**可以在客户端和服务器端派生。这似乎是一个很好的解决方案。不幸的是，让我的职位成为 PK 的一部分会破坏我的 PK 的不变性。每当一个 PlaylistItem 被重新排序或删除时——需要更新大量的 PlaylistItem 键。抓挠那个。

## 基于播放列表 GUID 和自增播放列表项 ID 生成复合 PK

这种解决方案与上面的解决方案类似，但通过将复合键与位置分离来确保 PK 是不可变的。这是我正在玩弄的当前解决方案。我唯一担心的是，恶意用户可以通过在发送之前修改客户端的自动递增 id 来强制冲突。我认为这种恶意行为不会对系统造成任何损害，但需要考虑一些事情。

好的！你有它。我做这一切是不是很愚蠢？我只是把它吸起来并强制我的服务器为我的 PlaylistItem 对象生成 GUID 吗？或者，是否可以编写适当的实现？

**更新：**

我希望在服务器成功保存到数据库之前直观地表示用户的操作，并在保存失败时实施所需的恢复技术。我不确定这是否愚蠢，但我将通过一个用例场景解释我的推理：

客户端想要添加一个新的 PlaylistItem。为此，系统会向 YouTube 的 API 发出请求以获取创建 PlaylistItem 所需的所有信息。在 YouTube 的 API 响应后，客户端拥有创建 PlaylistItem 所需的所有信息，但唯一标识它的能力除外。

此时，用户已经为 YouTube 的 API 等待了 X 个时间段。现在，我想在客户端上直观地显示 PlaylistItem。如果我选择等待服务器，我现在正在等待 X + Y 时间范围，然后才能看到成功的视觉指示。在测试中，这种延迟感觉很尴尬。

我的服务器只是亚马逊 EC2 上的一个微型实例。我可以通过升级硬件来缩短 Y 时间范围，但我可以通过巧妙的编程完全消除 Y。这就是我面临的困境。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T21:28:02.090

好的，当我在评论中提出建议时，您似乎喜欢它:)

您可以使用高/低方法，这基本上允许客户端一次保留一堆密钥。最简单的方法可能是使它成为一个复合主键，由两个整数组成。客户会接到“给我一把大钥匙”这样的电话。您将自动递增“下一个主键”序列，并记录哪个客户端“拥有”该主键。然后，该客户端可以在该主密钥旁边使用*任何*次密钥，并且知道它们将与任何其他客户端隔离。

当客户端执行插入时，您可以检查客户端是否使用了正确的主键，即分配给他们的主键。

当然，另一种方法是只制作主键 { 客户端 ID，UUID } 并让客户端指定任何 UUID ...

# batch-file - 将 .bat 脚本转换为流程图的工具

> ID：14613588
> 
> 赞同：2
> 
> 时间：2013-01-30T20:55:17.517
> 
> 标签：batch-file, utility, flowchart

我需要分析并找到一个非常大的批处理文件的逻辑。
是否有任何工具可以将 Windows`.bat` 脚本转换为流程图？
我的意思是用于可视化分析的批处理文件的可视化工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:09:20.417

显然（经过一些研究）有一种产品可以做到这一点……值得一试。

它被称为 Visustin，可以找到： [http ://www.aivosto.com/vbcatalog.html](http://www.aivosto.com/vbcatalog.html)

这是产品的截图： [http ://www.aivosto.com/visustin-shot.gif](http://www.aivosto.com/visustin-shot.gif)

另外，这个问题可能对超级用户更好？

# c# - 循环通过 DataSet 并插入 ListBox 时出错

> ID：14613591
> 
> 赞同：0
> 
> 时间：2013-01-30T20:55:31.263
> 
> 标签：c#, sql, winforms, datatable, dataset

这是一个 Windows 窗体应用程序。我有一个类 Program.cs 和一个带有 ListBox 的表单 DeployerConsole.cs。我正在尝试遍历 SQL 查询的结果。我遇到了麻烦，并得到一个“对象引用未设置为对象的实例”。当我尝试访问数据并将其插入表单上的列表框时出错。

编辑： SQL 查询成功完成，并且 Console.WriteLine 使用正确的数据正确输出到输出窗口。

```
 static void LoadServers()
    {
        DeployerConsole DC = (DeployerConsole)Application.OpenForms["DeployerConsole"];
        //DeployerConsole DC = new DeployerConsole();
        SqlConnection myConnection = new SqlConnection("server=XXX; database=XXX; uid=XXX; pwd=XXX;Integrated Security=true;Connection Lifetime=5;Trusted_Connection=yes;");
        myConnection.Open();
        DataSet ds = new DataSet();
        SqlCommand myCommand = new SqlCommand("SELECT ServerName FROM DeployServers", myConnection);
        SqlDataAdapter adapter = new SqlDataAdapter(myCommand);
        adapter.Fill(ds);
        DataTable dt = ds.Tables[0];
        foreach (DataRow dr in dt.Rows)
        {
            DC.listBox1.Items.Add(dr["ServerName"].ToString());
            Console.WriteLine(dr["ServerName"].ToString());
        }

    } 
```

编辑：添加截图

![错误截图](../Images/76358e52c8bc2fb4a26e97a43c93b0c4.png)

有人对我做错了什么有任何建议或提供指导吗？

编辑（回答）：好吧，我将代码从类移到了表单中。现在访问 listBox 没有问题。但是，我仍然想知道这个问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:29:58.453

您的问题可能是由这行代码引起的：

```
DeployerConsole DC = (DeployerConsole)Application.OpenForms["DeployerConsole"]; 
```

我怀疑 OpenForms 属性返回 null 因为您没有明确设置表单的名称（例如 form.Name = "DeployerConsole";）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:08:20.047

可能值得一试（仅用于测试目的）尝试：

```
if(DC.listBox1 != null)
{
  DC.listBox1.Items.Add(dr["ServerName"].ToString());
} 
```

这可以给你一个线索，如果你可能需要确保某个地方 listBox1 被实例化。

```
 DC.listBox1 = new ListBox(); 
```

**编辑**

可能是 DC 没有通过对静态方法的引用正确传递。更改方法的签名以接受表单可能会更好。

```
static void LoadServers(Form form)
{ 
 ...
 form.listBox1.Items.Add(...)
 ... etc.
} 
```

并从以下形式假设：

```
Helper.LoadServers(this); 
```

# lucene - opengrok 真的需要单独的暂存目录吗？

> ID：14613594
> 
> 赞同：1
> 
> 时间：2013-01-30T20:55:43.443
> 
> 标签：lucene, race-condition, opengrok

在示例安装和配置说明中，似乎建议*OpenGrok*需要两个暂存区，理由是，一个区域是 index-regeneration-work-area，另一个是生产区域，它们是旋转的每个索引重新生成。

这真的有必要吗？我可以只有一个区域而不是两个区域吗？

我正在寻找一个特定于 opengrok 的答案，而不是一个可能遇到的竞争条件的一般列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-05-14T13:13:48.947

严格来说，这是没有必要的。事实上，我很确定绝大多数部署都没有暂存区。

也就是说，您需要确定您是否对可能导致某些失败/不精确搜索的不一致窗口感到满意。假设源已更新（例如，通过`git pull`在 Git 的情况下）并且索引器尚未完成对新更改的处理。因此，索引仍然包含反映源旧状态的数据。假设应用于源的更改删除了一个文件。现在，如果有人启动了与已删除文件的内容相匹配的搜索，则搜索结果可能会以错误结束。这可能是更好的选择 - 考虑对文件进行更细微更改的情况，例如删除/添加几行代码。在这种情况下，符号定义将关闭，因此搜索结果会将您带到错误的代码行。或者，不是那么细微的变化，例如，当从文件中删除函数定义时，该函数引用的搜索结果将包含无效位置。

不一致窗口的长度源于索引时间，这在很大程度上取决于两件事，至少目前是：

*   应用于源的更改的大小
*   源目录树的大小

第一个是相关的，因为历史处理。传入的历史更改越多（例如 Git 中的更改集），索引器为生成索引的历史缓存和/或历史字段（假设启用历史处理）必须做的工作就越多。

第二个是相关的，因为索引器遍历整个源目录树以找出哪些文件已更改，这可能会导致大量系统调用和潜在的大量 I/O。至少在实现[https://github.com/oracle/opengrok/issues/3077](https://github.com/oracle/opengrok/issues/3077)之前，这将仅有助于基于变更集的源代码管理系统。

# android - 字节数组到Android中的图像

> ID：14613597
> 
> 赞同：0
> 
> 时间：2013-01-30T20:55:49.263
> 
> 标签：android, image, bitmapfactory

我有一个线性字节数组，我想将其值设置为图像的像素。字节数组长度为 4800，我希望它显示为 80x60 图像，像素值逐行设置。我知道 BitmapFactory 有助于处理此类任务，但我如何指定图像的高度和宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:08:31.230

听起来您所拥有的是一个字节数组，其中包含位图中像素的颜色。如果是这样，您可能需要使用[setPixels()](https://developer.android.com/reference/android/graphics/Bitmap.html#setPixels%28int%5B%5D,%20int,%20int,%20int,%20int,%20int,%20int%29)方法：

```
Bitmap bmp = Bitmap.createBitmap(80, 60, myConfig);

bmp.setPixels(myPixelData, 0, 80, 0, 0, 80, 60); 
```

# silverlight - Silverlight - 如何使用 DevForce 处理嵌套的 .ExecuteAsync

> ID：14613598
> 
> 赞同：0
> 
> 时间：2013-01-30T20:55:50.827
> 
> 标签：silverlight, devforce

我有如下情况，这给了我错误，看起来像超时。它缺少一些记录插入。错误如下：

IdeaBlade.EntityModel.AsyncProcessor 1.Signal `1.<>c__DisplayClass2.<.ctor>b__0(TArgs args) at IdeaBlade.EntityModel.AsyncProcessor`() 在 IdeaBlade.EntityModel.AsyncProcessor`1.b__5(Object x)

InnerException：[HttpRequestTimedOutWithoutDetail] 参数：调试资源字符串不可用。通常，关键和论据提供了足够的信息来诊断问题。请参阅[http://go.microsoft.com/fwlink/?linkid=106663&Version=5.0.10411.00&File=System.ServiceModel.dll&Key=HttpRequestTimedOutWithoutDetail](http://go.microsoft.com/fwlink/?linkid=106663&Version=5.0.10411.00&File=System.ServiceModel.dll&Key=HttpRequestTimedOutWithoutDetail)

在 IdeaBlade.EntityModel.EntityServerProxy.<> *c_DisplayClass14.b* _13() 在 IdeaBlade.EntityModel.EntityServerProxy.ExecFunc[T](Func `1 func, Boolean funcWillHandleException) at IdeaBlade.EntityModel.EntityServerProxy.ExecuteOnServer[T](Func`1 func, Boolean funcWillHandleException) 在 IdeaBlade.EntityModel.EntityServerProxy.InvokeServerMethod(SessionBundle sessionBundle, ITypeWrapper entityManagerType, IdeaBlade.EntityModel.EntityMa 处的字符串类型名称、字符串方法名称、对象 [] 参数）

任何想法如何处理它？谢谢：）

```
 ......
            .ExecuteAsync(op =>
            {
                var cust =Customers.Where(p => p.IsSelected).ToList();

                           ..........................

                   Ships.ForEach(.......
                              ...........
                        EntityManager.SalesGetSalesQuery(
                         ..............
                        .ExecuteAsync(opn =>
                        {

                                 ................

                                                        });

                    p.UpdateOrders(copyOrders);

                    Orders.Add(copyOrders);

                Save();
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:01:19.160

超时可能在多个地方发生，因此您需要增加所有可能的超时值。

在这种情况下，您应该考虑增加查询（CommandTimeout 和 Transaction）、通信和 IIS executionTimeout。

DevForce 有一个文档页面，讨论超时故障排除。它位于[http://drc.ideablade.com/devforce-2012/bin/view/Documentation/understand-timeouts](http://drc.ideablade.com/devforce-2012/bin/view/Documentation/understand-timeouts)。

我注意到您的嵌套查询（“SalesGetSalesQuery”）是一个 StoredProcQuery。存在一个突出的错误，即 StoredProcQueries 不遵守事务超时值（如果与默认值不同）。（120 秒）我们正在努力修复，但不幸的是在此期间没有解决方法。

如果不是 StoredProcQuery 超时，那么上面的链接将帮助您解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:12:57.417

我不认为问题在于异步调用是嵌套的。请记住，第二个（即嵌套的）异步调用只会在第一个完成后执行。

什么异步调用正好超时？是 StoredProcQuery 吗？（它们中的任何一个，因为您在循环中调用它们）如果是，那么这是我们正在努力修复的一个突出的错误。就像我在上一篇文章中提到的那样，没有解决方法。但是，由于这个特定的 storedProc 将日期范围作为参数，因此一种可能性是在较小的日期范围内“打破”这个日期范围并发出多个异步调用。（可能在并行协程中）并不是说这种“解决方法”不是防故障的，因为所有订单都可能在一个小范围内，并且对该特定范围的异步调用仍然会超时。

斯贝里尼

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:14:39.117

工作编号 1 是增加超时时间，同时您要弄清楚什么需要这么长时间。

这将有助于[https://stackoverflow.com/questions/4877315/silverlight-4-ria-services-timeout-issues](https://stackoverflow.com/questions/4877315/silverlight-4-ria-services-timeout-issues])

# menu - 创建 Applescript 给 5 星评分

> ID：14613599
> 
> 赞同：0
> 
> 时间：2013-01-30T20:55:52.607
> 
> 标签：menu, click, applescript

我试图让程序 Capture One 在苹果脚本中将一个项目评为 5 星。只要该项目不会导致另一个菜单，我就可以让程序访问一个菜单项，但不幸的是，对于我来说，在评级中，有一个选择评级的选项。我不知道如何让脚本对项目进行评分。任何帮助都会很棒。

这是我到目前为止的代码：

```
 tell application "Capture One" to activate
    tell application "System Events"

        try
            click menu item ¬
                "5" in menu "Rating" in menu "Adjustments" of menu bar item ¬
                "Adjustments" in menu bar 1 of process "Capture One"

        end try

    end tell 
```

这是我尝试从中选择速率 5 的菜单栏的图像。

![菜单栏](../Images/fe93b696541ae712d7189927f05b7405.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:25:32.400

你能用数字键打分吗？

```
tell application "System Events" to keystroke "5" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T18:15:59.503

我不认为菜单项是“5”。这是您可以单击以选择 5 星的击键。那么，菜单项可能是五个星号？“*****”

以下是我们对点击子菜单进行编码的方式：

```
tell application "System Events"
tell process "Capture One 10"
    set frontmost to true
    click menu item "Capture" of menu 1 of menu item "Select Tool Tab" of menu 1 of menu bar item "View" of menu bar 1

end tell
end tell 
```

# android - 在 android google maps merkers 上设置文本

> ID：14613606
> 
> 赞同：0
> 
> 时间：2013-01-30T20:56:19.053
> 
> 标签：android, google-maps-markers, android-maps-v2

关于如何设置 Text Over android google maps (v2) 默认标记的任何提示？例如，我想在标记内部（上方）设置字符“A”（不是片段也不是标题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:16:54.603

您可以使用 ：

```
new MarkerOptions().icon(BitmapDescriptorFactory.fromBitmap( YOUR_MODIFIED_BITMAP )) 
```

YOUR_MODIFIED_BITMAP 加载位图的位置，其中一些自定义内容在其顶部用画布绘制。希望能帮助到你。

# macos - Mac App Store 对话框与全屏窗口

> ID：14613607
> 
> 赞同：2
> 
> 时间：2013-01-30T20:56:23.987
> 
> 标签：macos, cocoa, in-app-purchase, nswindow

我的应用被拒绝了，因为处理应用内购买的对话框在我的透明全屏窗口后面。您仍然可以单击它们，但它对用户不友好。

我将如何处理？有没有办法改变这些对话框的呈现方式，或者我应该改变我自己窗口的属性？

我说的是这些对话框（网格是在我的主窗口上绘制的）：

![在此处输入图像描述](../Images/886749cba511e01b45ff3ddfdba86b2c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:01:59.063

您可以将窗口级别设置为较低的值，以便在启动存储请求时对话框显示在顶部，并在请求完成后将其重置为之前的值。或者您可以退出全屏模式以发出存储请求。他们可能对透明窗口更恼火，这比窗口顺序更令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T10:44:01.423

这对我有用

```
@interface FullscreenWindow : NSWindow
@end

@implementation FullscreenWindow
-(id) init
{
    // some init code here...
    [self setLevel:NSMainMenuWindowLevel+1];
    return self;
}
@end 
```

# vba - 如何根据单元格值删除行

> ID：14613609
> 
> 赞同：19
> 
> 时间：2013-01-30T20:56:25.980
> 
> 标签：vba, excel

我有一个工作表，我需要根据单元格值删除行..

要检查的单元格在 A 列中。

如果单元格包含“-”.. 删除行

我找不到这样做的方法.. 我打开一个工作簿，将所有内容复制到另一个工作簿，然后删除整个行和列，但是必须根据单元格值删除特定的行。

在这里需要帮助。

***更新***

我拥有的数据样本

![样本](../Images/4f800980e9fe890968af2f57c477c74f.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T21:17:27.833

最简单的方法是使用[过滤器](http://office.microsoft.com/en-us/excel-help/filter-data-in-a-range-or-table-HP010073941.aspx)。

您可以过滤 A 列中没有“-”的任何单元格并复制/粘贴，或者（我更喜欢的方法）过滤所有有“-”的单元格，然后全选并删除 - 一次你删除过滤器，你就剩下你需要的东西了。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-30T23:02:38.130

屏幕截图非常有用 - 以下代码将完成这项工作（假设数据位于从 A1 开始的 A 列中）：

```
Sub RemoveRows()

Dim i As Long

i = 1

Do While i <= ThisWorkbook.ActiveSheet.Range("A1").CurrentRegion.Rows.Count

    If InStr(1, ThisWorkbook.ActiveSheet.Cells(i, 1).Text, "-", vbTextCompare) > 0 Then
        ThisWorkbook.ActiveSheet.Cells(i, 1).EntireRow.Delete
    Else
        i = i + 1
    End If

Loop

End Sub 
```

共享示例文件：[https ://www.dropbox.com/s/2vhq6vw7ov7ssya/RemoweDashRows.xlsm](https://www.dropbox.com/s/2vhq6vw7ov7ssya/RemoweDashRows.xlsm)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-30T21:31:35.910

您可以在新列中复制如下公式...

```
=IF(ISNUMBER(FIND("-",A1)),1,0) 
```

...然后对该列进行排序，突出显示值为 1 的所有行并删除它们。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-15T18:03:11.167

如果要根据某些特定的单元格值删除行。假设我们有一个包含 10000 行的文件和一个值为 NULL 的字段。并基于该空值要删除所有这些行和记录。

这里有一些简单的提示。首先打开“查找替换”对话框，然后在“替换”选项卡上，将所有包含 NULL 值的单元格设为空白。然后按 F5 并选择空白选项，现在右键单击活动工作表，然后选择删除，然后选择整行选项。

它将根据包含单词 NULL 的单元格值删除所有这些行。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-12-01T23:56:32.417

如果您的文件不是太大，您始终可以按具有*-*的列进行排序，一旦它们全部放在一起，只需突出显示并删除。然后重新排序回到你想要的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-30T22:58:19.050

您可以遍历范围内的每个单元格，并使用该`InStr`函数检查单元格是否包含字符串，在您的情况下；一个连字符。

```
Sub DeleteRowsWithHyphen()

    Dim rng As Range

    For Each rng In Range("A2:A10") 'Range of values to loop through

        If InStr(1, rng.Value, "-") > 0 Then 'InStr returns an integer of the position, if above 0 - It contains the string
            rng.Delete
        End If

    Next rng

End Sub 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-03T18:03:58.407

这是您可以基于以下功能的自动过滤器宏：

```
Selection.AutoFilter
ActiveSheet.Range("$A$1:$A$10").AutoFilter Field:=1, Criteria1:="=*-*", Operator:=xlAnd
Selection.AutoFilter 
```

我使用这个自动过滤功能来删除匹配的行：

```
Public Sub FindDelete(sCol As String, vSearch As Variant)
'Simple find and Delete
Dim lLastRow As Integer
Dim rng As Range
Dim rngDelete As Range
    Range(sCol & 1).Select
    [2:2].Insert
    Range(sCol & 2) = "temp"
    With ActiveSheet
        .usedrange
            lLastRow = .Cells.SpecialCells(xlCellTypeLastCell).Row
        Set rng = Range(sCol & 2, Cells(lLastRow, sCol))
            rng.AutoFilter Field:=1, Criteria1:=vSearch, Operator:=xlAnd
        Set rngDelete = rng.SpecialCells(xlCellTypeVisible)
            rng.AutoFilter
            rngDelete.EntireRow.Delete
        .usedrange
    End With
End Sub 
```

像这样称呼它：

```
call FindDelete "A", "=*-*" 
```

它为我节省了很多工作。祝你好运！

# android - AppWidget 自定义附加功能

> ID：14613611
> 
> 赞同：0
> 
> 时间：2013-01-30T20:56:29.297
> 
> 标签：android, android-appwidget

有意图额外的代码`AppWidgetManager.EXTRA_CUSTOM_EXTRAS`和`AppWidgetManager.EXTRA_CUSTOM_INFO`. 它们是干什么用的？文档声明它是“传递给 AppWidget 选择器的额外意图”，但是传递的对象和时间是什么？如果我理解正确，选择器是由用户调用的，而不是由我的代码调用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:12:22.437

“传递给 AppWidget 选择器的额外意图”表示可以管理小部件选择的 Android 进程将接收此意图。可以使用选择器的进程是一个[AppWidgetHost](http://developer.android.com/reference/android/appwidget/AppWidgetHost.html)，就像主屏幕一样。当用户调用选择器时，主屏幕正在处理意图并因此使用此附加功能。

# javascript - 更改选择选项时将 id 传递给函数

> ID：14613613
> 
> 赞同：0
> 
> 时间：2013-01-30T20:56:30.037
> 
> 标签：javascript

我有一个选择列表。选择一个选项后，我需要将它的值和 id 传递给 javascript 函数：

```
<select name="cardType" id="cardType" onchange="addSurcharge(this.value, this.id)">
  <option value="2" id="debitcard">Mastercard Debit Card</option>
  <option value="2" id="creditcard">Mastercard Credit Card</option>
</select> 
```

万事达卡的值必须为 2，但我需要区分信用卡和借记卡。

addSurcharge() 函数将向信用卡添加交易费用，例如如果 value == 2 && cardID == "creditcard" 添加附加费。

onchange 事件将在上面的示例中发送选择 ID“cardType”。

我如何让它发送所选选项的 ID？

理想情况下没有 jquery，因为我不会将它用于其他任何事情，并且宁愿避免仅出于此目的添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:59:00.780

`this.options[this.selectedIndex]`将引用选定的选项，从中您可以获得 .id 或 .value。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:59:45.427

只要通过“这个”。

与文本框不同，您不能只`.value`从`select`. 您需要根据所选索引获取值。

```
addSurcharge(this)

function addSurcharge(sel) {
    val = sel[sel.selectedIndex].value
} 
```

# ios - objectAtIndexedSubscript 和 objectAtIndex 之间的区别

> ID：14613614
> 
> 赞同：21
> 
> 时间：2013-01-30T20:56:31.053
> 
> 标签：ios, cocoa-touch, nsarray

我在stackoverflow和其他资源上搜索了很多，找不到答案。

`objectAtIndexedSubscript`NSArray 方法和NSArray 方法有什么区别`objectAtIndex`？

或者，如果没有区别，为什么两者都存在？

在[Apple Docs](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/objectAtIndexedSubscript:)中，它说它们是“相同的”。

我对编程非常陌生，但如果它们相同，那不是违反 DRY 原则吗？显然，Apple 的人知道他们在做什么，但是如果它们相同，为什么它们都提供呢？或者也许一个更好的问题是，为什么我应该使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-30T21:03:09.083

它们是相同的。

`-objectAtIndex:`是您应该使用的方法。

`-objectAtIndexedSubscript:`是为 obj-c 下标提供支持的方法。换句话说，如果你说，这个方法就是编译器使用的`array[3]`。但因为`NSArray*`它与`-objectAtIndex:`. 它是不同方法的原因是其他类可以实现它以支持 obj-c 下标，而不必使用通用命名的`-objectAtIndex:`.

# java - 分析 Netty 性能

> ID：14613615
> 
> 赞同：16
> 
> 时间：2013-01-30T20:56:53.663
> 
> 标签：java, linux, netty

我正在编写一个 Netty 应用程序。该应用程序在 64 位八核 linux 机器上运行

Netty 应用程序是一个简单的路由器，它接受请求（传入管道）从请求中读取一些元数据并将数据转发到远程服务（传出管道）。

此远程服务将向传出管道返回一个或多个响应。Netty 应用程序会将响应路由回原始客户端（传入管道）

将有成千上万的客户。将有数千个远程服务。

我正在做一些小规模的测试（十个客户端，十个远程服务），我没有看到我期望的 99.9% 的 10 毫秒以下的性能。我正在从客户端和服务器端测量延迟。

我正在使用类似于 SPDY 的完全异步协议。我在处理 FrameDecoder 中的第一个字节时捕获时间（我只使用 System.nanoTime()）。我在调用 channel.write() 之前停止了计时器。我正在测量从传入管道到传出管道的亚毫秒时间（99.9%），反之亦然。

我还测量了从 FrameDecoder 中的第一个字节到在（以上）message.write() 上调用 ChannelFutureListener 回调的时间。时间高达几十毫秒（99.9%），但我很难说服自己这是有用的数据。

我最初的想法是我们有一些缓慢的客户。我观看了 channel.isWritable() 并在返回 false 时记录。这个方法在正常情况下没有返回false

一些事实：

*   我们正在使用 NIO 工厂。我们没有自定义工人大小
*   我们已禁用 Nagel (tcpNoDelay=true)
*   我们启用了保持活动 (keepAlive=true)
*   CPU 90+% 的时间处于空闲状态
*   网络空闲
*   GC（CMS）每 100 秒左右被调用一次，时间很短

有没有我可以遵循的调试技术来确定为什么我的 Netty 应用程序没有像我认为的那样快速运行？

感觉就像 channel.write() 将消息添加到队列中，而我们（使用 Netty 的应用程序开发人员）对此队列没有透明度。我不知道队列是Netty队列，OS队列，网卡队列还是什么。无论如何，我正在审查现有应用程序的示例，但我没有看到我正在遵循的任何反模式

感谢您的帮助/见解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T06:01:25.120

Netty 默认创建 Runtime.getRuntime().availableProcessors() * 2 个 worker。16 在你的情况下。这意味着您最多可以同时处理 16 个通道，其他通道将等待您释放 ChannelUpstreamHandler.handleUpstream/SimpleChannelHandler.messageReceived 处理程序，因此不要在这些（IO）线程中执行繁重的操作，否则您可能会卡住其他通道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T11:07:30.673

如果您使用 System.nanoTime() 等简单的东西，在多线程环境中测量时间是非常困难的。想象一下 1 核系统上的以下情况：

1.  线程 A 被唤醒并开始处理传入的请求。
2.  线程 B 被唤醒并开始处理传入的请求。但是由于我们正在使用 1 核机器，这最终需要暂停线程 A。
3.  线程 B 完成并执行得非常快。
4.  线程 A 恢复并完成，但花费的时间是线程 B 的两倍。因为您实际测量了完成线程 A + 线程 B 所需的时间。

在这种情况下，如何正确测量有两种方法：

1.  您可以强制始终只使用一个线程。**如果操作系统不干扰**
    ，这允许您测量操作的确切性能。因为在上面的示例中，线程 B 也可以在您的程序之外。在这种情况下，一种常见的方法是消除干扰，这将使您**估计**代码的速度。但是，您可以假设，在一个空闲的多核系统上，会有另一个核心来处理后台任务，因此您的测量*通常*不会被中断。将此线程设置为高优先级也有帮助。

******   您使用插入 JVM 的更复杂的工具来实际测量原子执行及其所花费的时间，这将有效地几乎完全消除外部干扰。一种工具是[VisualVM](http://visualvm.java.net/download.html)，它已经集成在 NetBeans 中，可作为 Eclipse 的插件使用。***** 

 *****作为一般建议：使用比内核更多的线程并不是一个好主意，除非您知道这些线程会经常被某些操作阻塞。当使用非阻塞 NIO 进行 IO 操作时，情况并非如此，因为没有阻塞。

因此，在您的特殊情况下，您实际上会降低客户端的性能，如上所述，因为在高负载下通信将被搁置多达 50% 的时间。在最坏的情况下，这甚至可能导致客户端超时，因为无法保证线程何时实际恢复（除非您明确请求公平调度）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-31T04:36:01.417

您还没有指定您的 Netty 版本，但它听起来像 Netty 3。Netty 4 现在已经稳定了，我建议您尽快更新到它。您已指定需要超低延迟时间以及数以万计的客户端和服务。这并不能很好地混合。与 OIO 相比，NIO 本质上具有合理的潜在性。然而，这里的陷阱是 OIO 可能无法达到您希望的客户数量。尽管如此，我还是会使用 OIO 事件循环/工厂并看看它是如何进行的。

我自己有一个 TCP 服务器，它在 localhost 上大约需要 30 毫秒来发送和接收和处理一些 TCP 数据包（从客户端打开套接字到服务器关闭它的时间测量）。如果您确实需要如此低的延迟，我建议您因为打开连接所需的 SYN/ACK 垃圾邮件而放弃 TCP，这将占用您 10 毫秒的大部分时间。*****

# performance - 如何提高@font-face 的加载性能

> ID：14613616
> 
> 赞同：3
> 
> 时间：2013-01-30T20:56:59.810
> 
> 标签：performance, compression, font-face

我使用一种名为 YaHei 的中文自定义字体。对于我使用[http://fontface.codeandmore.com/](http://fontface.codeandmore.com/)的实现，但字体文件是 10.01MB。在浏览器缓存字体之前，有没有办法压缩文件或提高加载性能？我尝试将预取与 一起使用`<link rel="prefetch" href="#" />`，但我没有发现任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T10:30:44.733

这里有一些有用的提示：[http ://www.artzstudio.com/2012/02/web-font-performance-weighing-fontface-options-and-alternatives/](http://www.artzstudio.com/2012/02/web-font-performance-weighing-fontface-options-and-alternatives/)

请特别查看“删除多余的字体字形”部分

# java - string.matches(regex) 返回 false，虽然我认为它应该是 true

> ID：14613621
> 
> 赞同：6
> 
> 时间：2013-01-30T20:57:10.343
> 
> 标签：java, regex, match

我正在使用 Java 正则表达式。

哦，我真的很想念 Perl！Java 正则表达式太难了。

无论如何，下面是我的代码。

```
oneLine = "{\"kind\":\"list\",\"items\"";
System.out.println(oneLine.matches("kind")); 
```

我希望屏幕上显示“真”，但我只能看到“假”。

代码有什么问题？我该如何解决？

先感谢您！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T21:01:17.950

[`String#matches()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)将正则表达式作为参数，其中锚点是隐式的。因此，您的正则表达式模式将在字符串的开头匹配到结尾。

由于您的字符串不以 开头`"kind"`，因此它返回`false`.

现在，根据您当前的问题，我认为您不需要在`regex`这里使用。简单地使用[`String#contains()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)方法就可以了：-

```
oneLine.contains("kind"); 
```

或者，如果您想使用`matches`，则构建正则表达式以匹配完整的字符串：-

```
oneLine.matches(".*kind.*"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T20:59:52.340

该[**`.matches`**](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#matches%28java.lang.String%29)方法旨在匹配*整个*字符串。所以你需要类似的东西：

```
.*kind.* 
```

演示：http: [//ideone.com/Gb5MQZ](http://ideone.com/Gb5MQZ)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T20:59:40.137

Matches 尝试匹配整个字符串（隐式`^`和`$`锚点），您想使用它`contains()`来检查字符串的某些部分。

# android - 允许计算机检测来自 Android 的输入的 API 或 SDK？

> ID：14613623
> 
> 赞同：-1
> 
> 时间：2013-01-30T20:57:34.657
> 
> 标签：android, input, wifi, sensors

我一直在寻找某种软件包，它允许我创建一个程序，通过 wifi 或 bt 远程检测计算机（最好是 Linux 或 Windows）上的 android 输入。我不需要控制我的电脑，我只需要像按下我的安卓上的一个按钮并让我的电脑识别按钮被按下一样简单的东西。有这样的事情还是我希望太多？

本质上; 有什么办法可以把我的安卓变成遥控传感器？如果没有，关于盯着这样一个包的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:05:45.017

有很多方法可以做到这一点，但你的问题有点模糊，无法很好地回答，因为我们不知道你想做什么。通过wifi，您可以在PC上设置ssh服务器并通过wifi登录手机。然后，当用户点击按钮时，向 ssh 服务器发送命令。或者只是通过任何预定义的套接字连接并发送自定义命令。

如果要将其减少到本地设备，可以使用蓝牙并通过 SPP（串行端口协议）发送数据，并让 PC 上的接收器运行发送的命令。发送数据非常简单，您只需要在 PC 上安装一个应用程序即可。

# angularjs - 如何在不更改标记的情况下仅针对具有相同指令的某些元素？

> ID：14613624
> 
> 赞同：2
> 
> 时间：2013-01-30T20:57:36.147
> 
> 标签：angularjs, directive

我已经研究了几个小时了。

假设我有一个 $('#bottom .downloads .links a').click 的 jQuery 选择器......

如何在 Angular 指令中执行相同类型的操作？

这是我到目前为止所拥有的并且它有效，但适用于页面上的所有标签。

```
angular.module('directives', []).directive('a', function(mongoDB){ //Don't need ['customServices'], it can just be [] to use mongoDB
return {
    restrict : 'E',
    link : function(scope, element, attrs){     
    element.on('click', function(){
        //But this gets called for all links on the page
                //I just want it to be links within the #bottom .downloads .links div
                //I wanted to use a directive instead of ng-click="someMethod()"
    });
} 
```

});

有没有办法将此指令仅定位到某个 div？我想我可以将限制更改为“C”或“A”并为链接添加一个属性，但我想知道我是否仍然可以像目前使用我的 jQuery 选择器一样布局前端。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T21:15:43.370

AngularJS 和 jQuery 之间在哲学上存在相当大的差异。在 jQuery 中，一切都在 DOM 中——包括你的数据——你通过 DOM 转换来完成所有事情。另一方面，AngularJS 具有内置的关注点分离：模型、视图、控制器、服务等都是独立的。我们使用控制器将代码粘合在一起，但每个组件对其他组件*一无所知。*

因此，尽管在 jQuery 中，人们可能会使用选择器来查找与特定模式匹配的所有链接，然后向其添加特定功能（例如单击处理程序），但在 AngularJS 中，HTML 是“官方记录”。不是将点击处理程序的附件抽象到 JavaScript 函数中，而是直接放入标记中：

```
<a ng-click="doWhatever()">Click me!</a> 
```

在这种情况下，`doWhatever`是页面该部分范围内的方法，可能在您的控制器中设置：

```
$scope.doWhatever = function () {
  console.log("Hello!");
} 
```

所以你解决问题的方式在 AngularJS 中是行不通的。相反，您需要查看指令，而不是像带有函数的 jQuery 选择器，而是作为**HTML 的扩展**。你问自己，“HTML 没有开箱即用的功能是什么？” 你的答案就是你的指令。

但是 AngularJS 已经有一个用于点击处理程序的内置指令（`ngClick`上面使用的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:13:37.863

Angular 已经有[一个](http://docs.angularjs.org/api/ng.directive%3aa)指令，所以你可能不应该创建自己的指令。

在 Angular 世界中，为了“仅定位某个 div”（嗯，div 中的 <a>），我们使用指令声明性地定位该 <a>，而不是使用类似 CSS 的选择器。所以是的，限制为“A”并向 <a> 添加一个属性是最好的：

```
<a ... target-this-one>...</a> 
```

我个人认为这更好读。查看 HTML 可以清楚地看出哪些 <a> 具有特殊/附加功能。

正如@Josh 指出的那样，如果 ng-click 不足以满足您的需求，您只需要这样做。

# c# - 创建一个包含重复字母的新字符串

> ID：14613628
> 
> 赞同：0
> 
> 时间：2013-01-30T20:57:45.853
> 
> 标签：c#, arrays, string, tostring, to-char

我正在尝试创建一个字符串，将原始字母中的重复字母插入修改后的字母中。例如，一次运行的输出将是：

原话：

> 堆

输出：

> 堆栈，堆栈，堆栈，堆栈，堆栈，堆栈

那有意义吗？到目前为止，我有这个，我觉得我很接近，但我用了错误的方法来重新组装字符串。任何帮助，将不胜感激：

```
 // Use ToCharArray to convert string to array.                
 char[] array = originalWord.ToCharArray();

 // Loop through array.
 for (int i = 0; i < array.Length; i++)
 {
    // Get character from array.
    char letter = array[i];
    string result = array.ToString();
    string result2 = string.Join("", result.Select(x => x + letter));
    Console.Write(result2);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:01:19.453

这应该有效：

```
var original = "stack";
for (int i = 0; i < original.Length; i++)
    Console.WriteLine(original.Insert(i, original[i].ToString())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:14:28.257

您可以使用[`String.Insert()`](http://msdn.microsoft.com/en-gb/library/system.string.insert.aspx)类似的方法；

```
string s = "stack";

for (int i = 0; i < s.Length; i++)
{
   Console.WriteLine (s.Insert(i, s[i].ToString()));
} 
```

这是一个[`DEMO`](http://ideone.com/wZLMQr).

哦，天哪，我写的时候已经添加了 3 个答案。该死..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T21:01:59.773

您可以使用[String.Insert](http://msdn.microsoft.com/en-gb/library/system.string.insert.aspx)将给定索引处的字符串插入到另一个字符串中。

```
IEnumerable<string> strings = originalWord
    .Select((c, idx) => originalWord.Insert(idx, c.ToString())); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T21:04:58.600

固定的 ：

```
 string originalWord = "stack";
        // Use ToCharArray to convert string to array.                
        char[] array = originalWord.ToCharArray();

        // Loop through array.
        for (int i = 0; i < array.Length; i++)
        {
            // Get character from array.
            char letter = array[i];
            string result = originalWord.Insert(i, letter.ToString(CultureInfo.InvariantCulture));
            Console.WriteLine(result);
        } 
```

Linq 方式：

```
IEnumerable<string> words = originalWord.Select((letter, i) => originalWord.Insert(i, letter.ToString(CultureInfo.InvariantCulture))); 
```

# python - 当我从 lambda 调用 tkSimpleDialog.askstring 时，为什么 Tkinter 会挂起？

> ID：14613631
> 
> 赞同：2
> 
> 时间：2013-01-30T20:58:01.150
> 
> 标签：python, lambda, tkinter

我正在开发一个模拟文章的 GUI 应用程序。除此之外，用户可以创建一个新主题，然后用注释填充该主题。目前，我有两种创建新主题的方法：通过菜单中的下拉选项（菜单命令）和通过主屏幕上的按钮（按钮命令）。该按钮以文本“新主题”开始生命。当用户按下按钮时，程序会创建一个新主题，要求用户使用 命名主题`tkSimpleDialog.askstring`，然后将按钮的文本设置为主题名称和该主题中的注释数。然后按钮的命令变为向该主题添加注释。

在开发程序时，我首先验证了菜单命令是否有效。它成功调用`askstring`，创建一个新的弹出窗口，以我想要的方式处理输入。但是，一旦我添加了按钮命令，`askstring`即使通过菜单命令调用，调用也会失败。应该有 askstring 对话框的窗口变白并且程序挂起。如果我注释掉按钮命令，它会再次起作用。如果我注释掉菜单命令，它就会挂起。

这是我将命令添加到菜单的代码：

```
 TopicBtn.menu.add_command(label="New Topic", underline=0,
                                  command=self.newTopic) 
```

这是 newTopic() 的代码：

```
 def newTopic(self, button=None):
     """ Create a new topic. If a Button object is passed, associate that Button
          with the new topic. Otherwise, create a new Button for the topic. """

     topicPrompt = "What would you like to call your new topic?"
     topicName = tkSimpleDialog.askstring("New Topic", topicPrompt)

     if topicName in self.topics.keys():
         print "Error: topic already exists"

     else:
         newTopic = {}
         newTopic["name"] = topicName
         newTopic["notes"] = []
         newTopic["button"] = self.newTopicButton(newTopic, button)

         self.topics[topicName] = newTopic
         self.addToTopicLists(newTopic) 
```

这是 newTopicButton() 的代码：

```
 def newTopicButton(self, topic, button=None):
 """ If a Button object is passed, change its text to display the topic name.
      Otherwise, create and grid a new Button with the topic name. """

     if button is None:
         button = Button(self.topicFrame)
         index = len(self.topics)
         button.grid(row=index/self.TOPICS_PER_ROW, column=(index %
             self.TOPICS_PER_ROW), sticky=NSEW, padx=10, pady=10)
     else:
         button.unbind("<Button-1>")

     buttonText = "%s\n0 notes" % topic["name"]
     button.config(text=buttonText)
     button.config(command=(lambda s=self, t=topic: s.addNoteToTopic(t)))

     return button 
```

最后，这是按钮命令的代码：

```
for col in range(self.TOPICS_PER_ROW):
     button = Button(self.topicFrame, text="New Topic")
     button.bind("<Button-1>", (lambda e, s=self: s.newTopic(e.widget)))
     button.grid(row=0, column=col, sticky=NSEW, padx=10, pady=10) 
```

任何人都知道为什么将 lambda 表达式绑定到按钮会`askstring`挂起？

**编辑：**感谢您的评论。这是一个展示该行为的最小示例：

```
from Tkinter import *
import tkSimpleDialog

class Min():

    def __init__(self, master=None):
        root = master
        frame = Frame(root)
        frame.pack()

        button = Button(frame, text="askstring")
        button.bind("<Button-1>", (lambda e, s=self: s.newLabel()))
        button.grid()

    def newLabel(self):
        label = tkSimpleDialog.askstring("New Label", "What should the label be?")
        print label

root = Tk()
m = Min(root)
root.mainloop() 
```

请注意，从 切换`button.bind("<Button-1>", (lambda e, s=self: s.newLabel()))`到`button = Button(frame, text="askstring", command=(lambda s=self: s.newLabel()))`修复了错误（但没有给我对按下的按钮的引用）。我认为这个问题与将事件捕获为 lambda 的输入之一有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:00:36.343

您在这里遇到的问题是由于`wait_window`您正在使用的对话框中的调用（您从不自己调用它，但实现对话框的代码会调用它）。例如，以下代码在（可能）两次按钮单击后复制了该问题：

```
import Tkinter

def test(event=None):
    tl = Tkinter.Toplevel()
    tl.wait_window(tl)

root = Tkinter.Tk()
btn = Tkinter.Button(text=u'hi')
btn.bind('<Button-1>', test)
btn.pack(padx=10, pady=10)
root.mainloop() 
```

这个调用`wait_window`有效地完成了`update`命令所做的事情，并且是一个典型的例子，说明为什么调用`update`是一件坏事。它与正在处理的事件发生冲突`<Button-1>`并挂起。问题是你必须忍受`wait_window`被使用，因为它属于对话框的代码。显然，如果你绑定到，`<ButtonRelease-1>`那么这个冲突就永远不会发生。您也可以使用`command`按钮中的参数，它也可以正常工作。

最后，我建议以下内容以根据您想要实现的目标以更简洁的方式创建按钮：

```
for i in range(X):
    btn = Tkinter.Button(text=u'%d' % i)
    btn['command'] = lambda button=btn: some_callback(button) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:55:38.097

我想出了一个解决方法。从最小示例测试来看，问题似乎来自对 bind 的单独调用，从而接受事件作为 lambda 的输入。如果有人能解释为什么会发生这种情况，我会接受他们的回答而不是我的回答，但我现在会接受这个。

解决方法不是使用单独的绑定函数，而是创建一个按钮数组，然后将数组中的正确条目作为参数传递给 lambda 函数（您不能传递按钮本身，因为它是在行中创建的具有 lambda 函数）。

这是代码：

```
from Tkinter import *
import tkSimpleDialog

class Min():

    def __init__(self, master=None):
        root = master
        frame = Frame(root)
        frame.pack()

        buttons = [None] * 2
        for i in range (2):
            buttons[i] = Button(frame, text="askstring",
                            command=(lambda s=self, var=i: s.newLabel(buttons[var])))
            buttons[i].grid()

    def newLabel(self, button):
        label = tkSimpleDialog.askstring("New Label", "What should the label be?")
        button.config(text=label)
        print label

root = Tk()
m = Min(root)
root.mainloop() 
```

# drools - 将方法返回的值分配给句柄。

> ID：14613635
> 
> 赞同：0
> 
> 时间：2013-01-30T20:58:38.267
> 
> 标签：drools

我有一个类似于以下的规则。我需要将匹配器返回的值分配给要在其他地方使用的处理程序。我怎样才能做到这一点？谢谢你。

```
package a.b.c 

import java.util.List; 

import a.b.Matcher; 
import a.b.Container; 
import a.b.TestObject1; 
import a.b.TestObject2; 

global Matcher myMatcher; 
global Container container; 

when 
        $x1: TestObject1( 
                $x1_1 : id, (id in ("11", "16", "140")) 
        ) 

        $x2: TestObject2( 
                $x2_2: id, myMatcher.match(id, container.getContainer(100)) != null
         ) 

then 
        //print. 
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:10:45.347

AFAIK 没有直接的方法可以做到这一点。2个选项是：

1.  在规则的 RHS 中再次调用 myMatcher.match()。如果 match() 方法的执行成本很高，这可能会出现问题。
2.  创建一个不同的规则来计算所有 TestObject2 事实的 match() 值：

    ```
    rule 'Calculate match value'
        $t: TestObject2()
    when
        TestObject2Match m = new TestObject2Match($t); // -> you must define this class
        m.setMatchValue(myMatcher.match($t.getId(), container.getContainer(100)));

        insertLogical(m);
    then 
    ```

现在，您之前的规则必须重写如下：

```
 rule '...'
        $x1: TestObject1( 
            $x1_1 : id, (id in ("11", "16", "140")) 
        ) 
        $m: TestObject2Match(matchValue != null)
    when
        //print $m.getMatchValue()
    then 
```

希望能帮助到你，

# python - 使用python在XML中具有相同名称的不同元素时复制属性信息

> ID：14613637
> 
> 赞同：1
> 
> 时间：2013-01-30T20:58:43.307
> 
> 标签：python, xml, elementtree

所以，这是我的 XML 树：

```
<?xml version="1.0"?>
<api>
    <query>
        <normalized>
            <n from="Brain_cancer" to="Brain cancer" />
        </normalized>
        <redirects>
            <r from="Brain cancer" to="Brain tumor" 
            />
        </redirects>
        <pages>
            <page pageid="37284" ns="0" title="Brain tumor">
                <revisions>
                    <rev revid="412658600" parentid="412501243" user="Andycjp" userid="55014" timestamp="2011-02-08T03:35:27Z" size="59870" sha1="fe1ff25c27ebc86572aa4be8201cb813e1bf3d32" comment="/* Psychological and behavioral consequences */"  contentformat="text/x-wiki" contentmodel="wikitext" xml:space="preserve">
                    </rev>
                </revisions>
            </page>
        </pages>
    </query>
    <warnings>
        <revisions xml:space="preserve">
        </revisions>
        <result xml:space="preserve">
        </result>
    </warnings>
    <query-continue>
        <revisions rvcontinue="456175380" 
        />
    </query-continue>
</api> 
```

所以，你可以看到，“修订”元素出现在两个不同的地方，不同的级别。我的目标是达到属性“rvcontinue”（谁的路径是 api/query-continue/revisions）以将其值复制到新变量中。这可能是因为我没有做对，但 elementTree 和 xpath 到目前为止还没有工作。

这是我到目前为止所做的，但它没有得到任何地方

```
import xml.etree.ElementTree as ET
tree = ET.parse('Brain_tumor_5.xml')

for elem in tree.getiterator():
    if elem.tag=='{http://www.namespace.co.uk}query-continue':
        output = {}
        for elem1 in list(elem):
            if elem1.tag=='{http://www.namespace.co.uk}revisions':
                output['rvcontinue']=elem1.text
        print output

p = tree.find("./api/query-continue/revisions[@rvcontinue=]")
q = p.attrib
print q 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:38:02.743

我也主要使用lxml，所以我不知道etree是怎么回事，但似乎从树中查找不起作用，但从根中查找确实起作用：

```
>>> tree.getroot().find( 'query-continue/revisions[@rvcontinue]' ).attrib['rvcontinue']
'456175380' 
```

另外：我不知道这是否只是上面的错字，但是：

```
p = tree.find("./api/query-continue/revisions[@rvcontinue=]") 
```

将给出一个 SyntaxError: invalid predicate

补充说明：似乎`tree.find( 'api' )`返回无，

但`tree.find( '.' )`返回`<Element 'api' at 0x1004e5f10`>

所以`tree.find( './query-continue/revisions[@rvcontinue]' )`

也将工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:14:02.340

这并不能直接回答您的问题。但是，我会使用`lxml.etree`（据说提供相同的`ElementTree`接口）和以下代码：

```
>>> import lxml.etree
>>> doc = lxml.etree.parse('doc.xml')
>>> node = doc.xpath('/api/query-continue/revisions[@rvcontinue]')
>>> node[0].attrib['rvcontinue']
'456175380' 
```

尝试过`xml.etree.ElementTree`但似乎不起作用。

# node.js - 如何为 node.js 应用程序运行 mocha 测试的 make 命令

> ID：14613642
> 
> 赞同：7
> 
> 时间：2013-01-30T20:58:52.910
> 
> 标签：node.js, mocha.js

我创建了一个文件夹：**MyFirstNodeAppl**，并在其中创建了一个**测试**文件夹，其中包含需要使用 mocha 框架运行的所有测试。

我还创建了一个名为**MakeFile**的 make 文件，其内容详细信息如下所述：

```
test:
      @./node_modules/.bin/mocha -u tdd

.PHONY: test 
```

**package.json与 test 和****MakeFile**处于同一级别，内容如下：

```
{
    "name": "nockmarket", 
    "version": "0.0.1",
    "private": true,
    "dependencies": {
        "jquery" : "1.7.3",
        "mocha": "1.3.0",
        "should": "1.0.0"     
    }
} 
```

设置完上述内容后，我使用节点命令提示符窗口运行 npm install 命令。现在我知道 Mocha 使用 make 来运行测试工具，对于 Windows 用户，我们需要 Cygwin，所以我将它安装在我的系统中。但是我无法运行 make 命令来测试单元测试用例。

任何人都可以通过在上面向我提供指导来帮助我解决这个问题。

文件夹结构细节： ![在此处输入图像描述](../Images/a884d62deff13ae590700126c43d4624.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T21:46:58.593

在测试中运行 mocha 的最简单方法是执行：

```
npm install -g mocha 
```

这应该使 mocha 二进制文件在您的路径上可用。然后，从 cygwin 中，只需`mocha`从项目的根目录运行。这将导致它执行测试目录下 *.js 文件中的所有测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-25T09:29:20.673

在您的应用程序中或全局安装 Mocha 模块：

```
 npm install --save mocha 
```

它将 mocha 依赖项保存在您的 package.json 文件中。

npm 为该特殊文件夹上的依赖项中的所有二进制文件放置别名。最后，npm 会在运行 npm 脚本时自动将 node_modules/.bin 添加到 PATH 中，所以在你的 package.json 中你可以这样做：

```
"scripts": {
    "test": "mocha"
 } 
```

并调用它

```
 npm test 
```

# javascript - 将数组转换为以空格分隔的字符串，同时连接单个值

> ID：14613648
> 
> 赞同：0
> 
> 时间：2013-01-30T20:59:03.863
> 
> 标签：javascript, jquery, arrays, string, delimiter

我的页面上有一个多重`select`框。`option`我可以像这样轻松地获取 jQuery中所有选定子项的值：

```
$("#select").val(); 
```

这给了我一个这样的数组：

```
["Hello", "Test", "Multiple Words"] 
```

现在，我想将此数组转换为以空格分隔的字符串，但*还要*将每个值中的各个单词用破折号连接起来，这样我就得到了：

```
"Hello Test Multiple-Words" 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T21:01:58.387

```
var values = $("#select").val();

for (var i = 0; i < values.length; ++i) {
    values[i] = values[i].replace(" ", "-");
}

var spaceDelimitedString = values.join(" "); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T21:05:51.070

```
var result = $.map($("#select").val() || [], function (x) {
    return x.replace(/\s/g, '-');
}).join(' '); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T21:03:06.927

如果`Multiple-Words`可以 as `Multiple Words`，那么您可以简单地使用`.join`并获得最终输出 as `"Hello Test Multiple Words"`。

如果没有，您可以编写如下所示的循环来获得结果。

```
var myList = ["Hello", "Test", "Multiple Words"];
var result = '';
for (var i = 0; i < myList.length; i++) {
   result += myList[i].replace(/\s/g, '-') + ' ';
} 
```

**演示：http:** [//jsfiddle.net/bmXk5/](http://jsfiddle.net/bmXk5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T21:02:25.393

这应该为您完成这项工作。

```
function combineWords(arr) {
    var i, l;
    for(i = 0, l = arr.length; i < l; i++) {
        arr[i] = arr[i].replace(' ', '-') ;
    }
    return arr;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T21:04:35.467

```
var vals = ["Hello", "Test", "Multiple Words"];
var result = $.map(vals, function(str){ return str.replace(/\s/g, '-') })
  .join(' '); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T21:05:32.370

这里有一个简单的衬里[`Array.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)：

```
var arr = ["Hello", "Test", "Multiple Words"];
arr.map(function(val) { return val.replace(' ', '-') }).join(' '); 
```

# perl - 如何使用其他数据存储实现 Redis 的功能？

> ID：14613649
> 
> 赞同：2
> 
> 时间：2013-01-30T20:59:06.940
> 
> 标签：perl, nosql, full-text-search, redis

我发现[Redis](http://redis.io/)为我的项目提供了非常好的功能（webapp 的自动完成后端）。基本上，它是我的全文搜索引擎。现在我正在寻找 Redis 的替代品，因为我无法将整个数据集保存在内存中。

我像这样创建我的 Redis 商店（找不到这个想法的学分链接）：

1.  我在每个字符之后将我的（加权）项目从常规数据库分成 3 个字符块（“单词”-> `['wor', 'ord', 'rds']`）
2.  每个块都成为保存具有此类块的项目 id-s 的排序列表的键。( `ZADD chunk weight items_id`)
3.  每个项目 id 也是保存一些关于项目 ( `SET items_id items_hash_in_json`)的简单 JSON 文档的关键

搜索工作如下：

1.  查询字符串以相同的方式分成 3 个字符块
2.  我询问所有这些块的交集并获取 items_id-s 列表（`ZINTERSTORE`和的组合`ZRANGEBYSCORE`）
3.  通过 items_id-s 返回 JSON 文档列表

干净利落。非常有效和快速。在这样的流程中仍然存在一些较小的缺点，但大多数情况下，我觉得我的域拥有正确的工具和正确的数据类型。

主要问题是：它需要太多的内存。我在数据库中有大约 60 万个项目，在“索引”上，我在 40 个字符后将它们删除，但仍需要 2.5GB RAM。这个任务有点多。数据集会增长，不会太多也不会太快，但仍然会增长。

我现在查看了一些 NoSQL 存储，但我还没有遇到像 Redis 那样的类似方法和工具。也许是因为我现在对每项工作都很认真，但我觉得对于其他 NoSQL 存储，我需要自己实现这样的功能（排序列表，找到它们的交集，简单的键值作为二进制字符串，插入数据非常简单，简单协议/API 和简单客户端）。

我也希望有 Perl 绑定，但在非常简单的协议（如 CoachDB 的 REST）的情况下，这不是强制性的。

你知道用其他 NoSQL 产品实现我的解决方案的工具吗？

换个角度来看，我也已经在寻找完全不同的解决方案（比如[couchdb-lucene](https://github.com/rnewson/couchdb-lucene)，但我想避免放弃上面描述的系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:43:26.430

**HTTP 缓存** 我有一个可能的解决方案，我目前在我的网站上使用。我使用 Nginx 缓存带有静态文件的自动完成查询。Nginx 可以非常快速地提供静态文件。这是我的配置中的示例行。

```
http {

    fastcgi_cache_path /var/cache/nginx levels=1:2
            keys_zone=tt:600m
            inactive=7d max_size=10g;

    fastcgi_temp_path /var/cache/nginx/tmp;

} 
```

此块描述了将存储文件的路径。级别是多少目录深，1：2就足够了。我这里的区域叫做 tt，你可以随意命名。其次是到期时间。

```
location ~ /tt/(.+)\.php$ {
            try_files $uri /index.php?$args;
            fastcgi_index   index.php;
            fastcgi_pass    127.0.0.1:9000;
            include         fastcgi_params;
            fastcgi_param   SCRIPT_FILENAME    $document_root$fastcgi_script_name;
            fastcgi_param   SCRIPT_NAME        $fastcgi_script_name;

                #Caching parameters
                fastcgi_cache tt;

                fastcgi_cache_key "$scheme$request_method$host$request_uri";

                fastcgi_cache_valid  200 302 304 30m;
                fastcgi_cache_valid  301 1h;
                fastcgi_cache_valid  any 5m;
                fastcgi_cache_use_stale error timeout invalid_header updating http_500;
        } 
```

位置块将包含缓存参数。所以任何带有 URI /tt/.*.php 的东西都会被缓存。URI + 查询字符串将成为缓存键。

如果你不使用 Nginx，同样的概念可能适用于另一个网络服务器。我希望这有帮助。

**编辑**

来自评论： *使用索引作为普通文件似乎比 SQL 查询慢。不过，我还没有对它们进行基准测试。*

Nginx 的缓存命中将如下所示：

> -> Nginx -> 文件

错过：

> -> Nginx -> php/python/ruby -> db(redis/mysql/whatever)

第一条路径可能看起来更慢，因为您想到了 diskio，但事实并非如此，操作系统会自动缓存经常访问的文件。因此，当 Nginx 升温时，相比之下，只需在 PHP 后端说“Hello world”就会变得更慢。我提出这样的要求是因为它就像提供静态文件一样。

实际命中/未命中率取决于应用程序、数据和配置。以我的经验，人们使用很多相同的搜索词，所以你可能不会有 600k 的文件。即使你这样做并没有真正的伤害，Nginx 会为你管理它们。如果您的数据变化很大并且您希望搜索快速反映这些变化，则此方法不是很好。您将不得不设置一个较短的过期时间，这会导致更多的未命中。

**Redis Zip 列表/哈希** [http://redis.io/topics/memory-optimization](http://redis.io/topics/memory-optimization)

如果您仍需要排序集，请确保链接中的配置设置设置得足够高以满足您的数据集需求。如果您能够使用哈希，则可以使用它们在该页面上显示较低的算法节省大量内存。我认为您绝对可以在存储链接到 json 字符串的 item_id 时使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:13:25.930

只是一个简单的想法，可能对你有用。这不是对您的问题的直接和准确的答案。

我想您的大部分数据或重要部分都位于那些 JSON 文档中。在这种情况下，我建议您稍微更改您的数据基础架构：为了保留 Redis 的所有优点，您应该使用相同的前 2 步进行*创建*和*搜索*，但更改您的第 3 步。无需使用 Redis 来存储这些 JSON 文档，只需将它们移动到您首选/使用的数据库的简单索引表中即可。这样，您将只处理块和键并执行 Redis 提供的操作，但在第 3 步中，您将获取 item_id 的列表并从数据库中检索 JSON 数据。大概一个`SELECT ... WHERE item_id IN(...)`就够了。

# ios - 按钮文本被剪裁，自动布局，ios

> ID：14613657
> 
> 赞同：0
> 
> 时间：2013-01-30T20:59:37.833
> 
> 标签：ios, objective-c, autolayout

我的目的是让按钮的宽度增长到一定的限制，以便它可以显示一个长标题。因此，我使用下面的交互构建器为我的按钮设置约束![在此处输入图像描述](../Images/ca205857874bd74716170f95d5adadad.png)

但是，当我尝试运行并且结果出乎意料时： ![在此处输入图像描述](../Images/5734df9f9b8dd02782e7952090764f4c.png)

不完全为什么我会得到这个。有人可以指出我在这里做错了什么。欢迎任何意见在这里。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:32:07.533

`sizeToFit`设置新标题后调用按钮。您的按钮*宽度*小于或等于 60 磅，因此满足约束条件。此方法将强制按钮调整大小。

您可能还想尝试调整内容压缩优先级和宽度约束的优先级 - 目前较高优先级约束（您的宽度）将获胜，然后设置为尽可能接近其恒定值。

# php - 运行php文件时出现空白页

> ID：14613659
> 
> 赞同：0
> 
> 时间：2013-01-30T20:59:38.557
> 
> 标签：php

当我运行下面的 php 代码并填写所有数据并提交时，我得到空白页，那么问题出在哪里？

```
<br><br>

Create New User :

<br><br>

<table width="90%" border=0><tr><td>

<FORM ACTION="user_login.php" METHOD=POST>
<INPUT TYPE=HIDDEN NAME=p_action VALUE="Create_New_User">
Username : <br><INPUT TYPE=TEXT NAME=p_in_username SIZE="25"> <BR>
eMail : <br><input type=text name=p_in_email size="25"> <br>

<br> 

<input type=submit value="Submit">

</FORM>

<?php

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:02:25.430

当您提交表单时，您将被重定向到表单的“操作”值中定义的页面。在这种情况下：“user_login.php”。我假设，然后您不会从那里重定向。

尝试添加：

```
header("location: index.php"); 
```

并将 index.php 替换为您要重定向到的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:37:00.757

请检查您的 PHP 配置，错误和警告是否开启？如果你分享你的php代码会更好。

# ruby-on-rails - 在部署到生产后编辑迁移

> ID：14613661
> 
> 赞同：0
> 
> 时间：2013-01-30T20:59:40.423
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, rails-migrations

我正在完成对应用程序的重大重构，并且正在尝试清理迁移。我已经进行了更改，并且在重置和重新迁移数据库后，一切都在本地运行良好。

在生产中，我无法运行迁移。我已经尝试了所有我能想到的重置、丢弃等组合，但我一直收到这个错误。

似乎生产数据库没有被重置，这导致迁移中断。任何提示将不胜感激。

```
==  AddFieldsToUsers: migrating ===============================================
-- add_column(:users, :company, :string)
rake aborted!
An error has occurred, this and all later migrations canceled:

SQLite3::SQLException: duplicate column name: company: ALTER TABLE "users" ADD "company" varchar(255) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:21:21.933

要重置数据库，您可以在生产模式下再次删除和迁移数据库。

```
rake db:drop db:create db:migrate RAILS_ENV=production 
```

而且，如果你想编辑一些特定的迁移，你可以使用它的版本号来重置它。

```
rake db:migrate:down VERSION=<version no.> RAILS_ENV=production 
```

编辑迁移文件，然后

```
rake db:migrate:up VERSION=<version no.> RAILS_ENV=production 
```

# drupal - Drupal 6 视图：选择规则和附属域

> ID：14613665
> 
> 赞同：0
> 
> 时间：2013-01-30T20:59:48.283
> 
> 标签：drupal, views

我遇到了一个视图未显示在附属域上的问题。

有两个新域都提供与另一个现有域相同的内容。所有要提供的内容都驻留在 Drupal 数据库中。

我们有两个带内容的主要站点，一个美国版和一个欧洲版。新域将服务于欧洲站点。

我通过域访问模块添加了两个新域记录，然后将这两个新域添加到当前在欧洲站点上的所有附属内容的“发布到”中。

我浏览了页面并修改了选择规则以包含新域。

特定页面有一个包含视图的窗格。该页面位于 url 'xxx/press' 处。

在 Euro 网站上，一切正常。在新域上，所有内容显示和菜单都可以正常工作，除了 xx/press 页面，视图不显示。该页面即将出现，并且标题节点显示，因此它只是特定视图。

由于该视图位于页面内容类型上，并且该页面具有指定新域作为显示方式的选择规则，因此我不确定它为什么不显示。

除了调用视图的实际页面的选择规则之外，还有其他任何地方可以限制视图显示的时间/位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:52:08.383

我找到了答案。控制欲太强！！作为记录，在“视图”中，“过滤器”下有一种语言设置，而新域的语言设置与该语言设置不匹配。

令人惊讶的是，内容的排除发生在如此多的领域和方式中！这就像重新访问 Photoshop 并寻找制作阴影的方法。

# jsf - h:commandButton action method not called on request scoped bean

> ID：14613674
> 
> 赞同：2
> 
> 时间：2013-01-30T21:00:26.887
> 
> 标签：jsf

I have a h:commandButton on a jsf page. And it needs to be rendered based on a condition. The property on the condition is a hidden input to the page. The action method on the button is not called when the rendering condition is specified.

Any ideas?

here is the sample code:

```
<h:commandButton value="Button" 
action="#{bean.method}"
rendered="#{bean.conditon}"
type="submit"/>

<h:inputHidden value="#{bean.condition}" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:06:26.087

I understand that your bean is request scoped, otherwise you wouldn't have this problem. This is a timing problem.

The `rendered` attribute is also determined during "apply request values" phase of JSF lifecycle. However, the submitted values are only been set in the model during "update model values" phase of JSF lifecycle, which is later. Thus, when `rendered` attribute is evaluated, it doesn't get the submitted value from the hidden input, but instead the property's default value.

If it's not an option to change the request scope to the [view scope](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941), then you'd need to salvage this problem differently. One of the simplest ways changing the `<h:inputHidden>` to be a `<f:param>` and inject the value via `@ManagedProperty` on `#{param}` map:

```
<h:commandButton value="Button" 
    action="#{bean.method}"
    rendered="#{bean.conditon}"
>
    <f:param name="condition" value="#{bean.condition}" />
</h:commandButton> 
```

*(note that I omitted `type="submit"` as it's the default already)*

with

```
@ManagedProperty("#{param.condition}")
private boolean condition; 
```

### See also:

*   [commandButton/commandLink/ajax action/listener method not invoked or input value not set/updated](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183) - point 6

# ios - 电子邮件模板未在 IOS 设备上打开

> ID：14613677
> 
> 赞同：1
> 
> 时间：2013-01-30T21:00:35.030
> 
> 标签：ios, opencart, email-templates

我们有一个在线商店，我们正在尝试设计客户收到的电子邮件模板、订单确认、用户注册等。但我在 IOS 设备上打开电子邮件时遇到问题。我在 iPhone/iPad 上打开邮件时收到的消息是“此邮件没有内容”。我认为这与电子邮件模板有关。我们使用 opencart 作为带有“电子邮件模板”扩展的平台。

你可以看到下面的代码：http: [//pastebin.com/p4Hj7VZz](http://pastebin.com/p4Hj7VZz)

我写的代码有什么明显的问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-28T17:09:47.883

我一直有和你一样的错误，但并非总是如此。有时，邮件会无缘无故地显示在 iOS 中。我认为问题必须存在于“邮件”库中。我切换到 PHPMailer，现在电子邮件总是在 iOS 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:22:50.867

问题是您的 iOS 设备要么不接受 HTML 电子邮件，要么您发送的电子邮件格式不正确，您的电子邮件客户端无法读取

# html - 我的两个 div 不会堆叠在一起

> ID：14613678
> 
> 赞同：0
> 
> 时间：2013-01-30T21:00:38.930
> 
> 标签：html, css-float, css

我有两个 div，包裹在一个更大的 div 中。我需要将它们堆叠在一起，而不是像通常那样将它们显示为块。我遵循了关于类似 stackoverflow 问题的建议，将第一个内部 div 浮动到左侧，将第二个内部 div 浮动到右侧。没有成功。

我将两个内部 div 都向左浮动并将溢出：隐藏到包装器 div。没有成功。我还将内部 div 显示设置为 inline-block 类型。没有成功。它们都相互堆叠，这不是我想要的。

这是语义标记和 CSS：

```
<div align="left" style="border:2px dotted #fff;margin-top:5px;">
           <!--  <span class="hyperlink_message">This is the message, redundant</span>      -->
                <div class="hyperlink preview" style=";padding-top:8px;border:1px solid #bbc5ee;">  
                    <div style="float:left;">
                        <a href="https://www.facebook.com/parijat" target="_blank">
                            <img src="https://sphotos-b.xx.fbcdn.net/hphotos-ash4/395790_10150612393596211_887151733_n.jpg" alt="image not found" style="width:100px;height:100px;border:solid 1px gray;margin-right:5px;" ></img>
                        </a>
                    </div>
                    <div style="float:left;">
                        <div style="font-size:12px;color:black;"><a href="{$hyperlinktext[i].url}"><b>My Facebook page</b></a></div>
                        <div style="font-size:10px;color:gray;">www.facebook.com</div>
                        <div style="padding-top:5px;font-size:10px;color:gray;">Facebook is a social utility that connects people with friends and others who work, study and live around them. People use Facebook to keep up with friends, upload an unlimited number of photos, post links and videos, and learn more about the people they meet.</div>
                    </div>
                    <div style="clear: both"></div> 
                </div>
</div> 
```

（请原谅与标记一起包含的 CSS 样式，目前涉足一些糟糕的遗留代码。

以及对应的JSFiddle。

[http://jsfiddle.net/hpTym/](http://jsfiddle.net/hpTym/)

你们认为这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:03:49.777

为浮动 div 设置宽度，还是需要它们在没有特定宽度的情况下浮动？

# javascript - 展平/扩展对象：我在正确的轨道上吗？

> ID：14613681
> 
> 赞同：0
> 
> 时间：2013-01-30T21:00:45.650
> 
> 标签：javascript, forms, object

我想展平一个多层次的对象，反之亦然。例如：

```
{
    option1:value1,
    option2:value2,
    option3:{
        key1:value31,
        key2:value32
    },
    option4:[value40,value41,value42]
} 
```

相当于：

```
 {
    option1:value1,
    option2:value2,
    "option3.key1":value31,
    "option3.key2":value32,
    "option4.0":value40,
    "option4.1":value41,
    "option4.2":value42
} 
```

这是针对小对象的，扁平化表达式的目的是方便表单中的数据收集以及与默认选项的合并。例如，我可以有这样的表单元素：

```
<input name="option4.0" value="value40"/> 
```

这是标准方法，还是有更好的方法？有没有图书馆已经这样做了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:04:44.633

该格式 ({ option4.2: value42 }) 将不起作用（因为键中的 . 将被解析为点运算符）。相反，您需要引用密钥：

```
{ 'option4.2': value42 } 
```

然而，这是非常不标准的。通常不需要展平对象 - 如果您想将这样的对象提交到服务器，您可以使用 JSON 将其序列化而无需展平：

```
var stringForServer = JSON.stringify(normalObject); 
```

如果您正在寻找一个库来操作对象和数组等，下划线可能是您最好的选择：

*   [http://underscorejs.org/](http://underscorejs.org/)

干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:57:00.600

我尝试了我的想法，它工作正常，但有一些限制。

显而易见的是，键不能包含点（点是这种技术的分隔符），并且键不能是数字（否则算法会将其解释为数组索引）。

另一个问题是，如果值是空对象或数组（例如 option4:[]），它将不起作用。

# c++ - 使用 shell 中的参数执行 C++ 代码

> ID：14613684
> 
> 赞同：-3
> 
> 时间：2013-01-30T21:00:51.957
> 
> 标签：c++, shell, unix

这可能是一个非常愚蠢的问题。但是，假设我有一个从终端运行的 C++ 代码

```
./sayhello --name=fraz

outputs 
Hello, fraz! 
```

现在，我想编写一个 shell 脚本，它从该 shell 中的用户那里获取输入并给我输出。

我怎样才能做到这一点？有什么建议么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T21:06:11.843

如果要从标准输入中读取名称：

```
#!/bin/sh
read arg
./sayhello --name=$arg 
```

或者，如果您想从 shell 脚本的命令行读取名称：

```
#!/bin/sh
./sayhello --name=${1:-Rob} 
```

* * *

您可能需要指定`sayhello`二进制文件的位置：

```
/usr/local/bin/sayhello --name=${1:-Rob} 
```

或者

```
./binaries/linux/x86/sayhello --name=${1:-Rob} 
```

甚至：

```
 PATH=/opt/my/path:${PATH}
 sayhello --name=${1:-Rob} 
```

# mysql - 具有两个连接的 MySQL 查询

> ID：14613686
> 
> 赞同：2
> 
> 时间：2013-01-30T21:01:07.540
> 
> 标签：mysql, sql, join

我有查询需要在 MySQL 中对三个链接表执行。我可以用嵌套查询以懒惰的方式做到这一点，但我无法弄清楚如何用单个查询来做到这一点。

表格是：

```
Area:-
 : id     (int)
 : name   (string)

Consultant:-
 :id      (int)
 :active  (1/0)

ConsArea:-
 : areaID        (int)
 : consultantID  (int) 
```

我需要遍历所有区域（带有`$area`变量），以便列出所有区域并针对每个区域指示“活动”顾问的数量......所以所有区域必须在其旁边列出一个值（可以是如果没有相关的活跃顾问，则为零）

查询的第一部分（无论顾问是否活跃）我可以这样做：

```
 SELECT areas.name AS aname, COUNT(consAreas.areaID) AS cct 
        FROM areas LEFT OUTER JOIN consAreas 
          ON consAreas.areaID = areas.id 
       WHERE areas.areaID = $area 
    GROUP BY areas.id 
    ORDER BY areas.name 
```

..但是当我想包括顾问处于活动状态的情况时，我无法计算出正确的加入。它仅列出活跃顾问数 > 0 的区域，而我需要所有区域。

```
 SELECT areas.name AS aname, COUNT(consAreas.area) AS cct 
        FROM areas LEFT OUTER JOIN consAreas 
          ON consAreas.area = areas.id 
        **JOIN consultants ON consultants.id = consAreas.cons**
       WHERE areas.areaID = $area 
         **AND consultants.active = 1**
    GROUP BY areas.id 
    ORDER BY areas.name 
```

有人帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T21:16:35.213

这是因为 mysql 的行为。左连接之后的内连接使左连接成为内连接。

```
SELECT areas.name AS aname, COUNT(consultants.id) AS cct 
FROM areas
    LEFT JOIN consAreas ON consAreas.area = areas.id 
    LEFT JOIN consultants ON consultants.id = consAreas.cons AND consultants.active = 1
WHERE 
    areas.areaID = $area 
GROUP BY areas.id 
ORDER BY areas.name 
```

在这里你可以看到我只使用左连接，更重要的`consultants.active`是直接从左连接 ON 子句过滤状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:11:47.853

你在这里想要的是一个`LEFT JOIN`（又名左外连接）。

只有当它在两个表中都有对应的行时， A `JOIN`（实际上是内部连接）才会选择由 JOIN 产生的行。如果只有左表有匹配的行，左连接将选择行，而不管右表是否匹配。

因此，在您加入顾问表时：

```
SELECT areas.name AS aname, COUNT(consAreas.area) AS cct 
FROM areas LEFT OUTER JOIN consAreas 
ON consAreas.area = areas.id 
LEFT JOIN consultants ON consultants.id = consAreas.cons 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:12:09.420

您需要执行`LEFT JOIN`并更正`GROUP BY`. 试试这个：

```
SELECT areas.name AS aname, COUNT(consultants.active) AS cct 
    FROM areas 
    LEFT JOIN consAreas 
      ON consAreas.area = areas.id 
    LEFT JOIN consultants 
      ON consultants.id = consAreas.cons
   WHERE areas.areaID = $area 
     AND consultants.active = 1
GROUP BY areas.name
ORDER BY areas.name 
```

这将返回一个包含区域名称和活跃顾问数量的表格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T21:12:49.607

试试这个：

```
SELECT areas.name AS aname, COUNT(consultants.id) AS cct 
    FROM areas LEFT OUTER JOIN consAreas 
      ON consAreas.areaID = areas.id 
    LEFT OUTER JOIN consultants ON consAreas.consultantID=consultants.id AND consultants.active = 1
   WHERE areas.areaID = $area 
     GROUP BY areas.id 
ORDER BY areas.name 
```

# ios - ARC - 保留子对象 NSManagedObjects

> ID：14613691
> 
> 赞同：-1
> 
> 时间：2013-01-30T21:01:20.350
> 
> 标签：ios, automatic-ref-counting

我有一个 Button 是否正确，它基本上将 NSManagedObject 传递给 segue 以加载下一个视图，在下一个视图中我加载父 NSManaged 对象的子对象。当我销毁该控制器时，NSManagedObject 仍由原始按钮与子按钮一起保留。我假设它会在我下次加载相同的数据时被释放，因为它会覆盖 NSManaged 对象的该属性。但是保留所有这些子对象是不好的还是正常的？

我应该/我可以通过在某个时候将属性设置为 nil 来手动释放这些孩子吗？

让我为我所看到的内容提供更多背景信息。

![仪器](../Images/cfb6641bc80faf42a5c4ffa423779170.png)

-[品牌页面]的内容

```
- (NSArray *) pages {

  NSLog(@"%@", [self edetail]);

  if ([self edetail] != nil) {

    NSArray *pgs = [[[self edetail] pages] allObjects];
    return [pgs sortedArrayUsingDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"sort_order" ascending:YES]]];
  }
  return [NSArray array];
} 
```

假设我有一个 objectA 的 NSArray，我们是一个 NSSet，我从 coredata 中提取并排序。然后我遍历 Array 中的每个 objectA 并创建一个自定义按钮类，该类的属性设置为 objectA。当单击按钮时，我向 UINavigationController 发送一条消息，以转到使用该 ObjectA 拉取某个子数组/ObjectA 集并在自定义网格中显示数据的页面。

根据工具，当我弹出已将 ObjectA 传递给的 UIViewController 时，ObjectA 仍在保留那些子对象，而 ObjectA 仍由我的按钮保留。这真的是一个糟糕的设计吗？这似乎并不比我的 RootViewController 保留这些对象的 NSArray 并通过索引调用它们更糟糕。

不过，我觉得在使用该应用程序的过程中，我最终可能会实际引用核心数据中的每条数据，这让我担心，即使我不需要这些孩子也不会被释放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:25:57.913

托管对象上下文负责托管对象的内存管理。这是一个可怕的句子。

如果您修改托管对象的属性或创建新对象，则假设您希望它们保留在 MOC 中，除非您将其回滚或不保存。如果您有一个托管对象保存在一个强属性中，那么您就不会泄漏或真正使用额外的内存 - 如果 MOC 遇到内存压力，它将把对象变成故障。

我有点担心您关于*按钮*保留托管对象的说法，这听起来不是一个好的设计。如果您将托管对象作为 segue 的一部分传递，则按钮不需要具有或保留对它的引用 - 这就是视图控制器的工作。

# unit-testing - oracle 11g R2 的开源独立替代品

> ID：14613694
> 
> 赞同：0
> 
> 时间：2013-01-30T21:01:35.330
> 
> 标签：unit-testing, junit, oracle11g, derby

我有一个项目的大型测试代码库。junit 测试用例主要使用 oracle DB 进行单元测试。我们正在尝试使单元测试更加本地化，​​以便多个开发人员可以在他们的本地机器上创建测试特定的数据，并且测试用例/开发可以更快地完成。

我们当前的数据库包含多个模式、同义词和存储过程。

我们正在尝试识别数据库，例如

> HSQL/Oracle Berkley DB/Derby DB

这样我们就可以重新创建类似数据库结构的 oracle 并继续测试，而无需对测试用例进行任何更改 [因为相同的测试用例也在我们的 Cruisecontrol 上运行]

主要目标是能够拥有一个本地数据库设置，该设置可以复制类似于产品的数据库结构，而无需对当前测试套件进行任何更改。

是否有任何数据库（可以在文件系统上本地创建数据库）？

感谢你的帮助。

谢谢，阿尤斯曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:39:12.163

Derby 是单元测试的绝佳选择。

但是，Derby 非常严格地遵守 SQL 标准。

如果您的数据库操作（表模式、SQL 语句等）非常符合 SQL 标准，您可能会发现针对 Derby 运行测试很简单。

但是，如果您在架构或 SQL 中使用了特定于 Oracle 的供应商扩展，您会发现 Derby 通常不会实现这些 Oracle 扩展。

此外，存储过程语言因供应商而异，因此 Derby 可能不接受您的 Oracle 存储过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:02:37.390

根据我的经验，尝试在 Oracle 模式下使用 H2 数据库。它通常确实接近 Oracle DB 风格。但是自定义函数和存储过程，您必须创建 ALIAS 以让 H2 知道这是一个自定义函数或过程，这是用于此目的的 Java 类。此外，如果您有 VIEWS 和其他东西，您仍然可以创建它们。希望这可以帮助。

# c# - 无法创建 SSL/TLS 安全通道。客户端和服务器无法通信，因为它们没有共同的算法

> ID：14613699
> 
> 赞同：6
> 
> 时间：2013-01-30T21:01:57.803
> 
> 标签：c#, asp.net, web-services, authentication, web

一些背景知识我正在开发一个使用 SOAP 连接到 Web 服务的网页。当我在 Web 服务上调用方法时出现此错误：

请求被中止：无法创建 SSL/TLS 安全通道。因此我添加了代码行。

```
ServicePointManager.Expect100Continue = true;
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3; 
```

我将证书存储在我的服务器上作为信任，并且他们将我的证书存储并列入白名单以供通过。当我尝试进行身份验证时，我收到以下消息。

```
System.Net.WebException: The underlying connection was closed: An unexpected error occurred on a receive. ---> System.ComponentModel.Win32Exception: The client and server cannot communicate, because they do not possess a common algorithm 
```

我已经设置了跟踪，这是跟踪文件的样子。我已经到了不知道从这里去哪里的地步。任何帮助将不胜感激。

```
[Public Key]
  Algorithm: RSA
  Length: 2048
  Key Blob: 30 82 01 0a 02 82 01 01 00 ce 08 11 55 52 0c 94 64 dc fe 1b e6 37 2e 1c 7a f1 3c 5d 24 67 d7 8e 76 58 78 64 30 d8 7d a3 e7 f2 0a c1 6b 33 91 7f 21 e6 a3 46 32 91 95 05 c6 46 05 43 ac 84 79 32 d5 ab 0f 0b 38 d1 9f 18 ab c3 82 dd 9d 98 ab 00 17 17 60 c0 c6 df 98 32 66 22 39 7b f5 fb e2 ed e2 a5 20 a7 48 0e 1b c6 43 2c 5b 81 85 69 2b 02 1e 40 77 9c 90 ea 25 81 f1 49 4d ed dd ....
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.2747506Z
System.Net Information: 0 : [6072] SecureChannel#42430754 - Certificate is of type X509Certificate2 and contains the private key.
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.2747506Z
System.Net Information: 0 : [6072] AcquireCredentialsHandle(package = Microsoft Unified Security Protocol Provider, intent  = Outbound, scc     = System.Net.SecureCredential)
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.2747506Z
System.Net Error: 0 : [6072] AcquireCredentialsHandle() failed with error 0X80090331.
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.2747506Z
System.Net Information: 0 : [6072] AcquireCredentialsHandle(package = Microsoft Unified Security Protocol Provider, intent  = Outbound, scc     = System.Net.SecureCredential)
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.2747506Z
System.Net Error: 0 : [6072] AcquireCredentialsHandle() failed with error 0X80090331.
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.2747506Z
System.Net.Sockets Verbose: 0 : [6072] Socket#14502061::Dispose()
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.2747506Z
System.Net Error: 0 : [6072] Exception in the HttpWebRequest#11181865:: - The underlying connection was closed: An unexpected error occurred on a receive.
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.2747506Z
System.Net Error: 0 : [6072] Exception in the HttpWebRequest#11181865::GetResponse - The underlying connection was closed: An unexpected error occurred on a receive.
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.2747506Z
System.Net Information: 0 : [6072] Enumerating security packages:
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6335529Z
System.Net Information: 0 : [6072]     Negotiate
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6335529Z
System.Net Information: 0 : [6072]     NegoExtender
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6335529Z
System.Net Information: 0 : [6072]     Kerberos
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072]     NTLM
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072]     Schannel
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072]     Microsoft Unified Security Protocol Provider
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072]     WDigest
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072]     TSSSP
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072]     pku2u
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072]     CREDSSP
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072] AcquireDefaultCredential(package = Negotiate, intent  = Outbound)
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072] InitializeSecurityContext(credential = System.Net.SafeFreeCredential_SECURITY, context = (null), targetName = host/localhost, inFlags = MutualAuth, Confidentiality, Connection, AcceptIntegrity)
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072] InitializeSecurityContext(In-Buffers count=0, Out-Buffer length=125, returned code=ContinueNeeded).
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072] InitializeSecurityContext(credential = System.Net.SafeFreeCredential_SECURITY, context = 23570c30:235e9b58, targetName = host/localhost, inFlags = MutualAuth, Confidentiality, Connection, AcceptIntegrity)
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072] InitializeSecurityContext(In-Buffers count=1, Out-Buffer length=121, returned code=ContinueNeeded).
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072] InitializeSecurityContext(credential = System.Net.SafeFreeCredential_SECURITY, context = 23570c30:235e9b58, targetName = host/localhost, inFlags = MutualAuth, Confidentiality, Connection, AcceptIntegrity)
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z
System.Net Information: 0 : [6072] InitializeSecurityContext(In-Buffers count=1, Out-Buffer length=0, returned code=OK).
    ProcessId=3704
    DateTime=2013-01-30T20:51:25.6491530Z 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T16:46:57.097

来自[信任波](https://www.trustwave.com/support/kb/article.aspx?id=11849)：

1.  在安装服务的系统上，导航到**控制面板**。
2.  选择**管理工具**，然后选择**本地安全策略**。
3.  导航到**本地策略**和**安全选项**。
4.  双击**系统加密：使用符合 FIPS 的算法进行加密、散列和签名**。
5.  **禁用**该设置，然后单击**应用**。
6.  **重新启动**IIS 服务。

# java - 模拟 GPS 定位问题

> ID：14613703
> 
> 赞同：3
> 
> 时间：2013-01-30T21:02:02.683
> 
> 标签：java, android, gps, mocking, location

我正在开发一个应用程序，它可以获取用户指定的纬度、经度和高度，然后在手机上伪造这个 GPS 位置，并在谷歌地图中显示我在那个位置。我对清单文件具有所需的权限，并且在开发人员设置中启用了模拟位置。

```
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
//lm.clearTestProviderEnabled(mocLocationProvider);
lm.addTestProvider(mocLocationProvider, false, false, false, false, false, false, false, 0, 10);
lm.setTestProviderEnabled(mocLocationProvider, true);
mockLocation = new Location(mocLocationProvider); // a string
mockLocation.setLatitude(Integer.parseInt(latitude.getText().toString()));  // double 
mockLocation.setLongitude(Integer.parseInt(longitude.getText().toString())); 
mockLocation.setAltitude(Integer.parseInt(altitude.getText().toString())); 
mockLocation.setTime(System.currentTimeMillis()); 
lm.setTestProviderLocation( mocLocationProvider, mockLocation); 
```

但是看起来我的GPS位置在谷歌地图上根本没有改变，这是什么问题？

更新：我刚刚在手机上安装了一个名为“假 GPS 位置”的应用程序，该应用程序运行良好，但我仍然不知道我的代码有什么问题，但我认为我的代码是实现这一目标的正式方式。

更新#2：虽然一些类似的应用程序可以在我的手机上运行，​​但我发现了一些例外情况，[http://www.cowlumbus.nl/forum/MockGpsProvider.zip](http://www.cowlumbus.nl/forum/MockGpsProvider.zip)，这个应用程序在我的手机上无法运行。有人可以帮我解决这个问题吗？百万谢谢！每次设置位置时，我都没有收到任何错误消息。

更新#3：我注意到这个应用程序相当旧，所以它不能在 4.1 上运行。如果是这样，如何在新版本中做同样的事情？我的手机是三星galaxy s3，希望对你有帮助。

更新#4：供您参考，我的更新#2 中来自应用程序的代码是：

```
package nl.cowlumbus.android.mockgps;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class MockGpsProviderActivity extends Activity implements LocationListener {
    public static final String LOG_TAG = "MockGpsProviderActivity"; 
    private static final String MOCK_GPS_PROVIDER_INDEX = "GpsMockProviderIndex";

    private MockGpsProvider mMockGpsProviderTask = null;
    private Integer mMockGpsProviderIndex = 0;

    /** Called when the activity is first created. */
    /* (non-Javadoc)
     * @see android.app.Activity#onCreate(android.os.Bundle)
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        /** Use saved instance state if necessary. */
        if(savedInstanceState instanceof Bundle) {
            /** Let's find out where we were. */
            mMockGpsProviderIndex = savedInstanceState.getInt(MOCK_GPS_PROVIDER_INDEX, 0);
        }

        /** Setup GPS. */
        LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        if(locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){ 
            // use real GPS provider if enabled on the device
            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
        }
        else if(!locationManager.isProviderEnabled(MockGpsProvider.GPS_MOCK_PROVIDER)) {
            // otherwise enable the mock GPS provider
            locationManager.addTestProvider(MockGpsProvider.GPS_MOCK_PROVIDER, false, false,
                    false, false, true, false, false, 0, 5);
            locationManager.setTestProviderEnabled(MockGpsProvider.GPS_MOCK_PROVIDER, true);
        }  

        if(locationManager.isProviderEnabled(MockGpsProvider.GPS_MOCK_PROVIDER)) {
            locationManager.requestLocationUpdates(MockGpsProvider.GPS_MOCK_PROVIDER, 0, 0, this);

            /** Load mock GPS data from file and create mock GPS provider. */
            try {
                // create a list of Strings that can dynamically grow
                List<String> data = new ArrayList<String>();

                /** read a CSV file containing WGS84 coordinates from the 'assets' folder
                 * (The website http://www.gpsies.com offers downloadable tracks. Select
                 * a track and download it as a CSV file. Then add it to your assets folder.)
                 */         
                InputStream is = getAssets().open("mock_gps_data.csv");
                BufferedReader reader = new BufferedReader(new InputStreamReader(is));

                // add each line in the file to the list
                String line = null;
                while ((line = reader.readLine()) != null) {
                    data.add(line);
                }

                // convert to a simple array so we can pass it to the AsyncTask
                String[] coordinates = new String[data.size()];
                data.toArray(coordinates);

                // create new AsyncTask and pass the list of GPS coordinates
                mMockGpsProviderTask = new MockGpsProvider();
                mMockGpsProviderTask.execute(coordinates);
            } 
            catch (Exception e) {}
        }
    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        // stop the mock GPS provider by calling the 'cancel(true)' method
        try {
            mMockGpsProviderTask.cancel(true);
            mMockGpsProviderTask = null;
        }
        catch (Exception e) {}

        // remove it from the location manager
        try {
            LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            locationManager.removeTestProvider(MockGpsProvider.GPS_MOCK_PROVIDER);
        }
        catch (Exception e) {}
    }

    @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
        // store where we are before closing the app, so we can skip to the location right away when restarting
        savedInstanceState.putInt(MOCK_GPS_PROVIDER_INDEX, mMockGpsProviderIndex);
        super.onSaveInstanceState(savedInstanceState);
    }

    @Override
    public void onLocationChanged(Location location) {
        // show the received location in the view
        TextView view = (TextView) findViewById(R.id.text);
        view.setText( "index:" + mMockGpsProviderIndex
                + "\nlongitude:" + location.getLongitude() 
                + "\nlatitude:" + location.getLatitude() 
                + "\naltitude:" + location.getAltitude() );     
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub      
    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub      
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub      
    }

    /** Define a mock GPS provider as an asynchronous task of this Activity. */
    private class MockGpsProvider extends AsyncTask<String, Integer, Void> {
        public static final String LOG_TAG = "GpsMockProvider";
        public static final String GPS_MOCK_PROVIDER = "GpsMockProvider";

        /** Keeps track of the currently processed coordinate. */
        public Integer index = 0;

        @Override
        protected Void doInBackground(String... data) {         
            // process data
            for (String str : data) {
                // skip data if needed (see the Activity's savedInstanceState functionality)
                if(index < mMockGpsProviderIndex) {
                    index++;
                    continue;
                }               

                // let UI Thread know which coordinate we are processing
                publishProgress(index);

                // retrieve data from the current line of text
                Double latitude = null;
                Double longitude = null;
                Double altitude= null;
                try {
                    String[] parts = str.split(",");
                    latitude = Double.valueOf(parts[0]);
                    longitude = Double.valueOf(parts[1]);
                    altitude = Double.valueOf(parts[2]);
                }
                catch(NullPointerException e) { break; }        // no data available
                catch(Exception e) { continue; }                // empty or invalid line

                // translate to actual GPS location
                Location location = new Location(GPS_MOCK_PROVIDER);
                location.setLatitude(latitude);
                location.setLongitude(longitude);
                location.setAltitude(altitude);
                location.setTime(System.currentTimeMillis());
                location.setLatitude(latitude);
                location.setLongitude(longitude);
                location.setAccuracy(16F);
                location.setAltitude(0D);
                location.setTime(System.currentTimeMillis());
                location.setBearing(0F);

                // show debug message in log
                Log.d(LOG_TAG, location.toString());

                // provide the new location
                LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
                locationManager.setTestProviderLocation(GPS_MOCK_PROVIDER, location);

                // sleep for a while before providing next location
                try {
                    Thread.sleep(200);

                    // gracefully handle Thread interruption (important!)
                    if(Thread.currentThread().isInterrupted())
                        throw new InterruptedException("");
                } catch (InterruptedException e) {
                    break;
                }

                // keep track of processed locations
                index++;
            }

            return null;
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            Log.d(LOG_TAG, "onProgressUpdate():"+values[0]);
            mMockGpsProviderIndex = values[0];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:45:33.167

问题解决：我添加了以下代码来设置我的当前位置，它可以成功显示在谷歌地图应用程序中。

```
location.setLatitude(latitude);
location.setLongitude(longitude);
location.setBearing(bearing);
location.setSpeed(speed);
location.setAltitude(altitude);
location.setTime(new Date().getTime());
location.setProvider(LocationManager.GPS_PROVIDER);
location.setAccuracy(1); 
```

结论：如果你想在新版本的android中使用mock location service，你必须自己设置每个属性。

# c# - 为什么我要在 Equals 覆盖中执行 object.ReferenceEquals(null, this) ？

> ID：14613719
> 
> 赞同：2
> 
> 时间：2013-01-30T21:02:55.353
> 
> 标签：c#, .net, null, this, referenceequals

考虑一下我正在查看的以下代码：

```
public override bool Equals(object other)
{
    return !object.ReferenceEquals(null, this)
           && (object.ReferenceEquals(this, other)
           || ((other is MyType) && this.InternalEquals((MyType)other)));
} 
```

这段代码的第一行引发了我的好奇心。无论何时`this`为 null，该方法都应返回 false。现在我很确定程序员打算用 来编写`!object.ReferenceEquals(other, null)`快捷方式`null`，但他坚持认为`this`可以为空。我坚持认为它不能（除非有人使用直接内存操作）。我们应该把它留在里面吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T21:10:19.033

虽然我当然不会*通常*检查`this`无效性，但它是可能的，没有任何实际的内存肮脏 - 只是一点反思：

```
using System;

public class Test
{
    public void CheckThisForNullity()
    {
        Console.WriteLine("Is this null? {0}", this == null);
    }

    static void Main(string[] args)
    {
        var method = typeof(Test).GetMethod("CheckThisForNullity");
        var openDelegate = (Action<Test>) Delegate.CreateDelegate(
               typeof(Action<Test>), method);
        openDelegate(null);
    }
} 
```

或者，生成使用`call`而不是`callvirt`调用空目标上的实例方法的 IL。完全合法，只是 C# 编译器通常不会这样做。

这与定稿无关，定稿本身就是毛茸茸的，但方式不同。*如果 CLR 可以证明您不会使用实例中的任何字段*（我强烈希望包含`this`引用），那么终结器可能会在实例方法执行时运行。

至于提供的代码 - 不，这看起来只是一个错误。我会将其重写为：

```
public override bool Equals(object other)
{
    return Equals(other as MyType);
}

public bool Equals(MyType other)
{
    if (ReferenceEquals(other, null))
    {
        return false;
    }
    // Now perform the equality check
} 
```

...假设这`MyType`是一个类，而不是一个结构。请注意我如何使用另一个具有正确参数类型的*公共*方法 - 我将`IEquatable<MyType>`同时实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:14:28.240

C# 通常不允许在`null`. 我认为编写该代码的程序员要么来自 C++ 背景（我认为可以调用方法`null`，只要它们不访问 的数据成员`this`）要么为特殊场景（例如通过反射调用）进行防御性编写，正如已经说过的）。

# mysql - mysql左连接有2个外键

> ID：14613724
> 
> 赞同：0
> 
> 时间：2013-01-30T21:03:11.890
> 
> 标签：mysql

也许有一个简单的解决方案，但我很长一段时间都无法解决这个问题。我查看了此处的示例，但似乎无法解决我的问题。

我有 2 个使用左连接的表：

```
SELECT b.box_id, b.address_id, b.tracking, b.value, ad.city, ad.street_nr, ad.country, ad.postcode
FROM boxes AS b,
LEFT JOIN addresses AS ad ON ad.id = b.address_id
WHERE b.box_id = 414 AND b.box_id = 415 
```

从这里我需要一个包含 2 行的返回结果，一个用于 box_id 414，一个用于 box_id 415。

换句话说，我需要一行包含 id 414 和 415 的 b.box_id、b.address_id、b.tracking、b.value、ad.city、ad.street_nr、ad.country、ad.postcode 的值

上面的查询显然行不通。我尝试了 UNION 但这也不起作用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:06:09.190

只需切换`AND`到`OR`

```
SELECT b.box_id, b.address_id, b.tracking, b.value, ad.city, ad.street_nr, ad.country, ad.postcode
FROM boxes AS b
LEFT JOIN addresses AS ad ON ad.id = b.address_id
WHERE b.box_id = 414 OR b.box_id = 415 
```

# css - 仅在 IE9 中居中的浮动徽标卡在右侧

> ID：14613725
> 
> 赞同：0
> 
> 时间：2013-01-30T21:03:22.473
> 
> 标签：css, internet-explorer-9

我有一个流体宽度的网站，其标志位于标题区域的中心。无论窗口大小如何，徽标都位于中心。适用于除 ie9 以外的所有浏览器。在ie9中它卡在右边。如果我能把它卡在左边那将是一个好的妥协，但右边不会这样做。我最好的猜测是 ie9 不支持 css 代码：

`.logo { width:100%; position:relative; } .logo img { margin-left:auto; margin-right:auto; display:block; }`

这是网站[http://www.cyberdefenselabs.org/](http://www.cyberdefenselabs.org/)

任何人都知道 ie9 的解决方法，它不会影响其他浏览器或涉及剧烈的重新编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:04:19.017

上面的人是正确的 - 你有没有正确清除的浮动。但是您应该在进行样式更改之前整理您的布局，因为您有 3 次相同的主菜单，但其中 1 个隐藏了，1 个（第一个）带有白色链接。简单地删除第一个主菜单（带有“social-header-wrap”类的 div）也可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:10:09.107

使用时

```
margin:auto; 
```

你应该说

```
margin:0 auto; 
```

去掉 margin-left 和 -right 并改为 margin:0 auto;

此外，包含元素需要是 text-align:center ，您可以通过将 text-align:left 放在要居中的元素中来撤消它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:08:10.330

您的`.social-header-wrap`元素包含未正确清除的浮动元素。添加此样式：

```
.social-header-wrap {overflow:hidden} 
```

# javascript - 无法使用 fetchkml 函数将本地 KMZ 文件加载到带有谷歌地球插件的浏览器中

> ID：14613726
> 
> 赞同：3
> 
> 时间：2013-01-30T21:03:28.427
> 
> 标签：javascript, kml, google-earth, google-earth-plugin, kmz

我们有一个 KMZ 文件，可以很好地加载到 Google 地球桌面应用程序中。没有错误。

当我们尝试使用 Google 地球插件做同样的事情时，它甚至不会从`fetchKml`函数中返回。我们需要知道`fetchKml`在本地文件上使用的任何特殊设置吗？

我正在尝试像这样加载文件：

```
// Where 'ge' is the Google Earth Plugin
var href = 'C:/KMLDATA/TEST.KMZ';
google.earth.fetchKml(ge, href, function(kml) { /* do something with kml */ }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:10:18.890

这与 Google 地球插件本身无关，而是与 JavaScript 沙箱有关。

基本上 JavaScript 无法访问本地文件系统 - 所以你不能简单地使用本地文件的路径，例如你在代码中的路径......

```
var href = 'C:/KMLDATA/TEST.KMZ';
google.earth.fetchKml(ge, href, function(kmlObject) { ... } 
```

要在浏览器中处理本地文件，您有多种选择。

1.  设置本地文件服务器并通过 http 服务文件。这在任何操作系统中都相对容易做到。所以这`C:/KMLDATA/TEST.KMZ`可能成为`http://localhost/KMLDATA/TEST.KMZ`

2.  使用一些可以访问文件系统的“插件”对象。在所有浏览器上工作有点棘手和困难。诸如 ActiveX、XPCOM、签名 Java 小程序等之类的东西。我做了一个通过 ActiveX 将本地 .kml 文件加载到插件中[的示例——显然它只能在 IE 中工作。](http://www.msa.mmu.ac.uk/~fraser/ge/localfile/)

3.  在 HTML5 中使用文件 api。很多代码，而不是我用 kml 实际尝试过的东西。[本教程](http://www.html5rocks.com/en/tutorials/file/dndfiles/)非常详尽，涵盖了大多数方面。

我会说，到目前为止，选项 1 是您最好的选择。设置本地文件服务器将允许您轻松加载和测试所有 kml/kmz 文件。

如果这些都不可能或不适合您，那么正如其他人所建议的那样，将文件托管在公共服务器上确实是唯一的选择。

# html - div 只适合内容而不适合高度

> ID：14613728
> 
> 赞同：0
> 
> 时间：2013-01-30T21:03:30.917
> 
> 标签：html

我正在尝试为我的主页进行设计，其中我有一个带有横幅和菜单的顶部、一个底部和一个由三个彼此相邻的 div 组成的内容区域。我想在左边有不同的东西，或者只用它作为间隔。右栏将有一些用于非营利广告的横幅。中间一栏会有很多内容，这个内容可以很长也可以很短，我希望这个内容只在这个栏中，而不是浮动到两侧，因此我需要设计在高度上有点动态。真正的问题是我的容器不会随着中间的扩展内容移动......

编辑：我已经更新了这个例子，所以它更清楚地显示了我想要什么。我想要中间区域的所有内容和左右两边的其他东西，中间的这些东西可能会变得很长，因此我希望中间列决定容器必须有多长 - 如果可能的话？如果我让容器移动，那么左右列将随之移动。

对不起，我的英语很有限。

```
<!DOCTYPE html>
<html>
<head>
<style>
html
{
    height:100%;
}

body
{
    height:100%;
    background-color:green;
}

.container
{
    height:90%;
    background-color:blue;
}

.left
{
    width:150px;
    height:90%;
    float:left;
    border: 2px solid #242F24;
    margin:auto 5px 5px 5px;
    padding:5px 5px 5px 5px; 
    background-color:yellow;

}
.right
{
    width:200px;
    height:90%;
    float:right;
    border: 2px solid #242F24;
    margin: auto 5px 5px 5px;
    padding:5px 5px 5px 5px; 
    background-color:grey;

}
.middle
{
    width: auto;
    background-color: red;
    float: none;
    margin:auto 5px 5px 5px;
    padding:5px 5px 5px 5px;
    height:auto;
}
</style>
</head>

<body>
<div class="container">
<div class="left">Left<br>Lorem Ipsum.....</div>
<div class="right">Right<br>Lorem Ipsum.....</div>
<div class="middle">Middle<br>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:12:49.873

尝试使用实际高度而不是最小高度。高度可以使用溢出来控制。min-height 允许容器增长到内容的大小。

# tfs - NuGet 从提要中获取最新包

> ID：14613733
> 
> 赞同：1
> 
> 时间：2013-01-30T21:03:42.917
> 
> 标签：tfs, nuget, nuget-package, nuget-server

我有一个在 TFS 中构建多个库解决方案的环境。在构建过程结束时，脚本将它们打包到 NuGet 包中，并将它们推送到我们的本地提要。

现在我们可以将这些每天变化不大的库包含在我们的上游项目中。

这些库以及我们的上游项目通常以相同的版本分支。基本上，主干是我们不断发展的最新版本。在分支主干之前说是 3.0.0.123，123 是正在运行的内部版本号。在某些时候，我们将当前主干标记为我们将要发布的内容并对其进行分支。分支时主干的版本号成为该分支的版本，我们将以任何适当的方式将主干的版本增加到我们认为可能会成为下一个版本的版本（比如 3.1.0.456） .

这让我们想如何使用 NuGet 有点奇怪。我们希望分支 3.0.0.456 使用分支中的最新库（可能是 3.0.0.457），而主干使用主干中的最新库（3.1.0.789）

所以这基本上归结为我们可以使用 NuGet 设置解决方案的版本，使其类似于 NuGet 在包中定义依赖项时使用的方式吗？

理想情况下，我想告诉分支的上游应用程序使用 [3.0.0.456, 3.1) 和主干使用最新的（无版本）。在这种情况下，它将拾取分支将拾取下一个分支构建 (3.0.0.457)，而主干将拾取发布到提要的最后一个 NuGet 包。

作为可能的解决方案，我提出的唯一想法是使用构建模板的参数，并在运行 NuGet 目标之前使用它来更新 package.config 文件。

*如果这应该在超级用户或其他地方继续，我表示歉意......*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:21:22.770

在进行了一些挖掘以让我的构建为我们的库项目自动创建包之后，我得出了一个（错误的）结论，即这是 NuGet 的一个限制。我解析了他们的任何 XSD 文档的源代码来描述他们的 XML，这样我就可以看到他们的 nuspec 是如何工作的。

虽然我有他们的源代码，但我开始研究如何修改 package.config 文件以接受他们的架构以限制版本。经过一番挖掘，我发现了一个可以添加到 package.config 中的包节点的属性：allowedVersions。这正是我想要添加的内容！

一旦我有了这条信息，我就能够更深入地挖掘它是如何实现的。事实证明，这个功能已经存在了一段时间，甚至记录在他们的文档网站上： [http: //docs.nuget.org/docs/reference/versioning](http://docs.nuget.org/docs/reference/versioning)

它位于底部的依赖版本控制指南中。我一定完全忽略了它，或者从未读过那么远！

事实证明，这不是问题，唯一的问题是我的无知。只是对任何登陆此页面的 Google 员工的参考！

来源（位于页面底部）：[NuGet 版本控制](http://docs.nuget.org/docs/reference/versioning "NuGet 版本控制")

# visual-studio-2010 - 将现有文件夹添加到其他 Team Foundation Server 2012 已存在的 Team Foundation Server 2010

> ID：14613734
> 
> 赞同：8
> 
> 时间：2013-01-30T21:03:45.713
> 
> 标签：visual-studio-2010, version-control, visual-studio-2012, source-control-explorer

![在此处输入图像描述](../Images/aa4ac92f445b6c2e02a18e7a354d32e6.png)我正在使用中央 Team Foundation Server (2010)，并从我的工作站连接到它。在我的工作站上，我同时使用 Visual Studio 2010 和 2012。我已经安装了 Team Explorer 2010 和 2012 以及最新的补丁和修补程序。

我需要同时使用 Visual Studio 2010 和 2012，因为我正在为 SQL Server 2012 开发 .NET 4.5 代码和 SQL Server Reporting Server 报告。

我可以将 Visual Studio 的两个实例都配置为连接到 TFS，我在 Visual Studio 2012 中映射了我的工作区，并且可以与源代码管理进行交互。我尝试将 Visual Studio 2010 配置为使用相同的工作文件夹，我可以连接到 TFS，我可以看到源代码管理文件夹，但是当我尝试将其映射到同一个本地文件夹时，我收到以下错误消息：

> > **地图**
> > 
> > 工作文件夹“C:\TFS\Example”已被工作区 JohnDoesPC 使用；Doe, John 在电脑上 JohnDoesPC

我尝试通过源代码管理资源管理器中的下拉菜单配置工作区映射：

1.  团队资源管理器> `project`> `Source Control`>地图窗口>（设置本地文件夹）

我通过 File 菜单下的 Source control 菜单进行了尝试：

2.  转到`File`> `SourceControl`> `Manage Workspaces`>（突出显示我的显示工作区）> `Edit`>尝试添加现有文件夹。

我错过了什么？我是否需要将我的解决方案文件夹映射到两个不同的本地文件夹？那将是非常混乱和不便的！

最简单的说法是我希望两个版本的 TFS 指向同一个本地位置。那可能吗？或者我应该为我的 SSRS 报告创建一个新项目？

编辑：有关更多详细信息，请参见图片：

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T04:49:49.963

确保在 Visual Studio 2010 和 Visual Studio 2012 中选择了相同的工作空间名称。如果在 Visual Studio 2010 中看不到 2012 的工作空间，请检查 2012 工作空间的高级工作空间设置。确保工作空间类型[设置为 server](http://msdn.microsoft.com/en-us/library/bb892960.aspx#Admin_Settings)。

当两个 Visual Studio 版本使用相同的工作区名称时，它们也应该能够查看和使用彼此的文件映射。

2012 年的设置应该是这样的： ![工作区配置 2012](../Images/2fab66ad5429625f429ba82ca26bc892.png)

该工作空间在 2010 年也应该可见： ![工作区配置 2010](../Images/fe82c1d3c95aef4ad8d3f22eebcb3dba.png)

确保在两个版本的 Visual Studio 中选择相同的工作区名称： ![两个 Visual Studio 中的相同工作区](../Images/c8a51c67c0b063ea551c39a4e8a51b36.png)

# javascript - 从 html 下拉列表和文本框中删除 disabled 属性

> ID：14613736
> 
> 赞同：0
> 
> 时间：2013-01-30T21:03:57.970
> 
> 标签：javascript, html

我正在运行带有 html 按钮的 ac# 网页，并且在执行启用下拉列表和文本框的 javascript 时遇到问题。它们都被预定义为禁用以及隐藏的 ssave 按钮，在按钮单击时我调用 NewType() 函数，它们应该在按钮单击时可见并启用，但它不起作用。保存按钮上的可见性调用无效，但不适用于下拉菜单或文本框。

```
<script type="text/javascript">

$(document).ready(function() {
    var d = document.getElementById('saveBtn').style.visibility = 'hidden';

});  

    function NewType() {           
            var e = document.getElementById('saveBtn').style.visibility = 'visible';

            var x = document.getElementById('DD').removeAttribute('disabled');

            var a = document.getElementById('txt1').removeAttribute('disabled');

            var b = document.getElementById('txt2').removeAttribute('disabled');

            var c = document.getElementById('txt3').removeAttribute('disabled');                                                     
        };

 <button type="button" onclick="NewType()">Add New</button>
 <button type="button" id="saveBtn">Save</button>

<select ID="DD" runat="server" disabled="disabled"
                            height="30px" style="width: 120px">
                            <option value=""></option>
                            <option value="1">fruit</option>
                            <option value="2">vegetables</option>       
                                <option value="3">Other</option></select>
   <br />
                      <input size="3" type="text" ID="txt1" runat="server" disabled="disabled" /> 
                      <input size="3" type="text" ID="txt2" runat="server" disabled="disabled"/>
                      <input size="4" type="text" ID="txt3" runat="server" disabled="disabled" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:08:55.393

如果您不需要它，请`runat="server"`从这些元素中删除该属性。具有此属性的控件可能会在写入页面之前被更改。删除这将意味着它们被 .NET 单独留下。

在普通的 HTML 元素上，`removeAttribute`应该可以工作。

[这是一个例子](http://jsfiddle.net/6kJzC/1/)。

```
<input id="test" type="text" disabled="disabled" value="Some Value">
<script>
    document.getElementById('test').removeAttribute('disabled');
</script> 
```

如果您`View Source`在浏览器中的页面上，您可以检查 .NET 是否调整了某些内容，例如 id 属性。

我已经`removeAttribute`在最新版本的 Firefox 和 Internet Explorer 中进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-13T15:02:37.577

这对我有用！

> $('#test').prop('disabled', false);

# ios - iOS 分段上传照片

> ID：14613737
> 
> 赞同：1
> 
> 时间：2013-01-30T21:04:09.397
> 
> 标签：ios, objective-c, file-upload, nsurlconnection

假设我想在 iPhone 上保留照片的完整分辨率，然后将其上传到 Web 服务进行存储。质量至关重要。不幸的是，使用 iPhone 相机拍摄的 3200x2400 照片的大小对于 PNG 大约为 10-12MB，对于 JPG 大约为 1-3MB（根据我的最新测试）。

这里我们进退两难。在 3G 连接上，12MB 的上传是永恒的（当然，相对而言）。所以我探索了一些选项，包括流/分块和后台上传。不过，这并不理想。~~我希望上传速度尽可能快。~~见编辑。

所以我的问题是：是否可以将图像拆分为单独的数据块，使用多个异步连接同时上传它们，然后在服务器端重新组装它们？是否存在为此的实现？

**编辑**：所以速度受到带宽的限制，正如评论中所讨论的那样。但是我想探索分块/拆分的其他用途。所以问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:18:27.457

你可以做的实际上是将图像分成几部分，然后上传每个部分，然后再重新组合。我想这样做的好处是在连接失败时获得部分图像，然后继续上传剩余的部分。

# python - Django 管理员 CIDR 类型

> ID：14613752
> 
> 赞同：2
> 
> 时间：2013-01-30T21:04:52.353
> 
> 标签：python, django, admin, cidr

问题是我正在开发一个 Django Admin 项目，它应该能够接受 CIDR 格式的数据并将其放入数据库（Postgres）。

假设我有一个模型：

```
##################################################
class CIDR(models.Model):
    ....
    net_cidr = models.IPAddressField(unique=True)
    ....

    def __unicode__(self):
        return self.net_cidr

################################################## 
```

基于以上代码，`net_cidr`数据库中的字段为inet类型，支持CIDR格式数据。但是，`IPAddressField`不支持 CIDR（至少对我不起作用）。如果我想在我的管理站点上输入“128.66.0.0/16”之类的内容，Django 会弹出一个错误，告诉我“输入有效的 IPv4 地址”。

我试图将字段类型更改为 Char，并且它可以工作（当然）。但是，在数据库中将 CIDR 设置为 varchar 并不是一个好主意。

基本上我想要的是让`net_cidr`能够接受一个I​​P范围，比如“128.66.0.0-128.66.255.255”或一个CIDR块“128.66.0.0/16”并将其保存到数据库中作为“128.66.0.0/16” .

我认为关键部分是如何让`IPAddressField`接受字符串类型（如 IP 范围或 CIDR 块）数据。然后我可以将其转换为 CIDR 块并将其保存到数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:39:27.363

有很多方法可以实现您所需要的。

我要做的是定义`net_cidr`为`models.CharField`.

然后为您的模型定义一个模型表单，您将在其中实现该`clean_net_cidr`功能。

```
class CIDRForm(ModelForm):
    def clean_net_cidr(self):
        # do your magic processing here

    class Meta:
        model = CIDR 
```

然后将该表单传递给模型管理对象

```
class CIDRAdmin(admin.ModelAdmin):
    form = CIDRForm 
```

* * *

更新：

根据您的评论，这似乎正是您所需要的。 [https://github.com/jimfunk/django-postgresql-netfields](https://github.com/jimfunk/django-postgresql-netfields)

在其他领域中，它包括一个`CidrAddressField`

# windows-8 - 在 Windows 8 和 Phone 8 之间同步数据选项

> ID：14613755
> 
> 赞同：2
> 
> 时间：2013-01-30T21:04:59.100
> 
> 标签：windows-8, windows-phone-8, sync

我想创建一个应用程序，用户可以在其中添加和查看数据。在台式机/平板电脑或手机上添加并从任一来源读取。我希望数据存储在任何用户的设备之间同步。

我开始玩 Azure 的试用版，它看起来很有希望。可能是在用户设备之间将数据同步到云的可靠方法。除了在用户设备之间同步之外，我目前不需要云服务。

我见过一些应用程序使用用户的 SkyDrive 帐户执行“备份/恢复”模型。但这似乎是一个手动过程。我希望看到它无缝完成。

我研究过同步服务，但这更像是一个集线器/辐条解决方案。同样，我不需要中央数据库。

有哪些选择？在这一点上，我可以只使用 Windows 8 模式/实践。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:10:32.807

因为它们是独立的设备，所以您需要有一些服务层来为您进行存储/转发。有了这两个基本选择，使用最终用户自己的存储（又名 SkyDrive）或使用自己的存储（又名 Windows Azure）。

SkyDrive 通过[Live SDK](http://msdn.microsoft.com/en-us/library/live/hh826521)得到完全支持，并提供了一种安全的方式来允许用户共享他们的存储数据，并在多个设备之间进行同步。您可以获得安全性，并且您无需为服务器端存储付费。用户拥有他们的存储空间，而不是你。限制是您可能无法在 SkyDrive（或您使用的任何文件同步服务）不可用的其他设备或用户之间共享相同的数据。

使用 Azure 之类的服务层，您拥有更多的灵活性，但您还将负责维护（并支付）该服务器端存储/服务。您是否看过“ [Windows Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/)”。使用您的 Azure 帐户，您可以获得 10 个免费的 Azure 移动服务。您将支付后端的 SQL 数据存储费用，该费用将取决于您在服务器端存储的数据量。您还需要确保以一种保护单个用户数据的方式来构建您的应用程序，但实际上它很容易做到，有据可查，并且为您提供了很多选择。

最后，您可以考虑要共享的数据类型。SkyDrive 非常适合“文件”。图片、歌曲、视频等 Windows Azure 移动服务 (WAMS) 非常适合“数据”。

这两种模式都没有对错。这仅取决于您的目标。

希望能帮助你完成思考过程

# java - 在 Java 中匹配“http://whatever/”的正则表达式

> ID：14613758
> 
> 赞同：-4
> 
> 时间：2013-01-30T21:05:06.967
> 
> 标签：java, regex, string

> **可能重复：**
> [正则表达式匹配 URL](https://stackoverflow.com/questions/1141848/regex-to-match-url)

给定一个字符串，我想知道它是否代表一个 URL 并获取网站名称，即“随便”。例如，给定“ [http://google.com.sg](http://google.com.sg) ”或“ [http://google.com.sg/](http://google.com.sg/) ”，我想返回字符串“google.com.sg”。

在Java中有一种巧妙的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T21:11:22.480

有很多方法可以做到这一点，但简单的正则表达式很容易出错。最好的办法是将其提供给现有的解析器，然后使用方法提取您需要的位，例如

```
import java.net.URL;
...
final URL url = new URL("http://google.com.sg/");
final String host = url.getHost(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:14:47.600

如果你确实想要一个正则表达式，这里有一个：

```
 String foo = "http://google.com";
    String bar = foo.replaceAll("^http://", "");

    if (bar.length() != foo.length()) {
        System.out.println("Url: " + bar);
    } else {
        System.out.println("Not Url: " + foo);
    } 
```

# hadoop - 在 sink 失败后，如何强制 Flume-NG 处理积压的事件？

> ID：14613761
> 
> 赞同：7
> 
> 时间：2013-01-30T21:05:17.153
> 
> 标签：hadoop, hdfs, flume

我正在尝试设置 Flume-NG 从一堆服务器（主要运行 Tomcat 实例和 Apache Httpd）收集各种日志，并将它们转储到 5 节点 Hadoop 集群上的 HDFS 中。设置如下所示：

![Flume-Hadoop 设置](../Images/e9511d7a31829f7e7a751d0dd6054f2e.png)

每个应用程序服务器将相关日志尾随到一个执行源（每种日志类型一个：java、httpd、syslog），它通过 FileChannel 将它们输出到 Avro 接收器。在每台服务器上，不同的源、通道和接收器由一个代理管理。事件由驻留在 Hadoop 集群（也托管 SecondaryNameNode 和 Jobtracker 的节点）上的 AvroSource 接收。对于每种日志类型，都有一个 AvroSource 在不同的端口上进行侦听。事件通过 FileChannel 进入 HDFS Sink，HDFS Sink 使用 FlumeEventAvro EventSerializer 和 Snappy 压缩保存事件。

问题：管理 HDFS Sink 的 Hadoop 节点上的代理（同样，每个日志类型一个）在几个小时后失败，因为我们没有更改 JVM 的堆大小。从那时起，该节点上的 FileChannel 以及应用服务器上的 FileChannel 收集了大量事件，因为 Hadoop 节点上的 FileChannel 已达到其最大容量。当我解决问题时，我无法让 Hadoop 节点上的代理足够快地处理积压工作，以便它可以恢复正常操作。FileChannel 在接收事件之前保存事件的 tmp 目录的大小一直在增长。此外，HDFS 写入似乎真的很慢。有没有办法强制 Flume 在摄取新事件之前先处理积压？下面的配置是最优的吗？也许相关：写入 HDFS 的文件非常小，大约 1 - 3 MB 左右。对于 64MB 的 HDFS 默认块大小以及未来的 MR 操作，这肯定不是最佳选择。我应该使用什么设置来收集足够大的文件中的事件以容纳 HDFS 块大小？我感觉 Hadoop 节点上的配置不正确，我怀疑 BatchSize、RollCount 和相关参数的值已关闭，但我不确定最佳值应该是什么。

# 应用服务器上的示例配置：

```
agent.sources=syslogtail httpdtail javatail
agent.channels=tmpfile-syslog tmpfile-httpd tmpfile-java
agent.sinks=avrosink-syslog avrosink-httpd avrosink-java

agent.sources.syslogtail.type=exec
agent.sources.syslogtail.command=tail -F /var/log/messages
agent.sources.syslogtail.interceptors=ts
agent.sources.syslogtail.interceptors.ts.type=timestamp
agent.sources.syslogtail.channels=tmpfile-syslog
agent.sources.syslogtail.batchSize=1

...

agent.channels.tmpfile-syslog.type=file
agent.channels.tmpfile-syslog.checkpointDir=/tmp/flume/syslog/checkpoint
agent.channels.tmpfile-syslog.dataDirs=/tmp/flume/syslog/data

...

agent.sinks.avrosink-syslog.type=avro
agent.sinks.avrosink-syslog.channel=tmpfile-syslog
agent.sinks.avrosink-syslog.hostname=somehost
agent.sinks.avrosink-syslog.port=XXXXX
agent.sinks.avrosink-syslog.batch-size=1 
```

# Hadoop 节点上的示例配置

```
agent.sources=avrosource-httpd avrosource-syslog avrosource-java
agent.channels=tmpfile-httpd tmpfile-syslog tmpfile-java
agent.sinks=hdfssink-httpd hdfssink-syslog hdfssink-java

agent.sources.avrosource-java.type=avro
agent.sources.avrosource-java.channels=tmpfile-java
agent.sources.avrosource-java.bind=0.0.0.0
agent.sources.avrosource-java.port=XXXXX

...

agent.channels.tmpfile-java.type=file
agent.channels.tmpfile-java.checkpointDir=/tmp/flume/java/checkpoint
agent.channels.tmpfile-java.dataDirs=/tmp/flume/java/data
agent.channels.tmpfile-java.write-timeout=10
agent.channels.tmpfile-java.keepalive=5
agent.channels.tmpfile-java.capacity=2000000

...

agent.sinks.hdfssink-java.type=hdfs
agent.sinks.hdfssink-java.channel=tmpfile-java
agent.sinks.hdfssink-java.hdfs.path=/logs/java/avro/%Y%m%d/%H
agent.sinks.hdfssink-java.hdfs.filePrefix=java-
agent.sinks.hdfssink-java.hdfs.fileType=DataStream
agent.sinks.hdfssink-java.hdfs.rollInterval=300
agent.sinks.hdfssink-java.hdfs.rollSize=0
agent.sinks.hdfssink-java.hdfs.rollCount=40000
agent.sinks.hdfssink-java.hdfs.batchSize=20000
agent.sinks.hdfssink-java.hdfs.txnEventMax=20000
agent.sinks.hdfssink-java.hdfs.threadsPoolSize=100
agent.sinks.hdfssink-java.hdfs.rollTimerPoolSize=10 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T00:30:18.260

我在您的配置中看到了一些可能导致问题的东西：

1.  您的第一个代理似乎有一个批量大小为 1 的 avro 接收器。您应该将其增加到至少 100 或更多。这是因为第二个代理上的 avro 源将提交到批量大小为 1 的通道。每次提交都会导致 fsync，从而导致文件通道性能变差。exec 源上的批处理大小也是 1，导致该通道也很慢。您可以增加批量大小（或使用假脱机目录源 - 稍后会详细介绍）。

2.  您可以让多个 HDFS 接收器从同一通道读取以提高性能。您应该确保每个接收器写入不同的目录或具有不同的“hdfs.filePrefix”，以便多个 HDFS 接收器不会尝试写入相同的文件。

3.  HDFS 接收器的批处理大小是 20000，这是相当高的，并且您的 callTimeout 是默认的 10 秒。如果你想保持如此大的批量大小，你应该增加“hdfs.callTimeout”。我建议将批量大小减少到 1000 左右，并且超时时间约为 15-20 秒。（请注意，在当前的批量大小下，每个文件只包含 2 个批量 - 所以减少批量大小，增加 rollInterval 和 timeOut）

如果您使用的是 tail -F，我建议您尝试新的 Spool Directory Source。要使用此源，请将您的日志文件轮换到 Spool Directory Source 处理的目录。此源将仅处理不可变的文件，因此您需要轮换日志文件。如 Flume 用户指南中所述，将 tail -F 与 exec 源一起使用存在问题。

# jquery - 使用 jQuery 在多个单元格中拆分行跨单元格

> ID：14613762
> 
> 赞同：1
> 
> 时间：2013-01-30T21:05:18.997
> 
> 标签：jquery, html, html-table, wikipedia

假设我在 Wikipedia [Table 中有一个带有 rowspan](http://en.wikipedia.org/wiki/Filemaker#Version_history)的表格，我想将一个 rowspan 单元格拆分为下面的多个单元格，并填充 rowspanned 单元格中的值。

在链接表中，它将产生 10 个新的 TD，其中包含“Filemaker, inc.”。作为价值观。

由于表是从自上而下从左到右创建的，我如何使用 jQuery 来完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T12:38:35.210

在此处查看 jsFiddle：http: [//jsfiddle.net/9PZQj/3/](http://jsfiddle.net/9PZQj/3/)

但这仅限于价值`rowspan="2"`，但您可以根据需要扩展解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-03T12:14:22.773

我扩展了@vendettamit 的答案以支持`rowspan`. 它也分裂`colspan`了。我修复了其中的一个错误。 [http://jsfiddle.net/tcvax28d/38/](http://jsfiddle.net/tcvax28d/38/)

*编辑 - 作为堆栈片段*

```
 function split_rows(tbl_param){
        var tbl = $(tbl_param);
        var tempTable = tbl.clone(true);
    var tableBody = $(tempTable).children();
    $(tableBody).children().each(function(index , item){
        var currentRow = item;
        $(currentRow).children().each(function(index1, item1){
                var rows = $(item1).attr("rowspan");
            if(rows>=2)
            {
                // copy the cell
                var item2 = $(item1).clone(true);
                // Remove rowspan
                $(item1).removeAttr("rowspan");
                $(item2).attr("rowspan",(rows)-1);
                //console.log("item1:",$(item1).text(),", index:",index1);
                // last item's index in next row
                var indexOfLastElement = $(currentRow).next().children().last().index();
                if(indexOfLastElement < index1)
                {
                     $(currentRow).next().append(item2)
                }
                else
                {
                    // intermediate cell insertion
                    $(item2).insertBefore($(currentRow).next().children().eq(index1));
                }
            }
        });

    });
        return tempTable;
}
 function split_cols(tbl_param){
        var tbl = $(tbl_param);
        var tempTable = tbl.clone(true);
    var tableBody = $(tempTable).children();
    $(tableBody).children().each(function(index , item){
        var currentRow = item;
        for (var i=0; i<$(currentRow).children().length;i++){
            var item1 = $(currentRow).children().eq(i);
                var cols = $(item1).attr("colspan");
                if(cols>=2)
                {
                    // copy the cell
                    var item2 = $(item1).clone(true);

                    // Remove rowspan
                    $(item1).removeAttr("colspan");
                    $(item2).attr("colspan", cols-1);
                    // last item's index in next row
                    $(item2).insertAfter(item1);
                }

        }

    });
        return tempTable;
}
function split_tbl(tbl_param){
        var tbl = split_cols(tbl_param);
        tbl = split_rows(tbl);
        return tbl;
}
const res1 = split_tbl($('#tbl'));
$('#test').append(res1);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<table id="tbl" border = "1">
    <tr>
        <td>Q</td>
        <td>A</td>
        <td>B</td>
        <td>O</td>
        <td rowspan="2">C</td>
    </tr>
    <tr>
        <td colspan="2">D</td>

        <td rowspan="2">E</td>
        <td>U</td>
    </tr>
    <tr>
        <td>R</td>
        <td>F</td>
        <td>G</td>
        <td>U</td>
    </tr>
    <tr>
        <td>S</td>
        <td>H</td>
        <td>V</td>
        <td rowspan="3" colspan="2">I</td>
    </tr>
    <tr>
        <td>T</td>
        <td>K</td>
        <td>W</td>
    </tr>
    <tr>
        <td colspan="3">M</td>
    </tr>
</table>
<br>
<div id="test"> </div>
```

# php - PHP 变量链接/显示

> ID：14613764
> 
> 赞同：0
> 
> 时间：2013-01-30T21:05:26.023
> 
> 标签：php

我将变量从我的 Flash MP3 播放器传递到 PHP 脚本以记录播放的歌曲。现在我希望 PHP 脚本显示一个变量并将其包含在 Amazon 链接中。

这就是我所拥有的，但似乎无法让它发挥作用。

```
<?php
$var1  = $_POST['var1']; //get the Artist Name and Title from Flash and store it in a PHP variable
$var2 = $_POST['var2']; //ignored
//This lines combines the two variables into one string. 
//To concatinate vars in PHP use a period or dot ".", much like Flash uses a plus sign "+". 

$add = $var1 . "+" . $var2 . "|";
//opens or creates (if it doesn't already exist) our text file (songsplayed.txt) 
//for writing (not reading) and places the pointer at the end.
$open = fopen('songsplayed.txt', 'a'); 
//writes to our specified file our string
$write = fwrite($open, $add); 

echo $var1;
echo

<a type="amzn" search=\"$var1\" category="music">
<img border="0" src="/buttons/buy-now-button-amazon.png" alt="Buy now @ Amazon"></a>
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:09:59.627

您似乎试图将 HTML 回显到页面而不用引号括起来。试试这个：

```
<?php
$var1  = $_POST['var1']; //get the Artist Name and Title from Flash and store it in a PHP variable
$var2 = $_POST['var2']; //ignored
//This lines combines the two variables into one string. 
//To concatinate vars in PHP use a period or dot ".", much like Flash uses a plus sign "+". 

$add = $var1 . "+" . $var2 . "|";
//opens or creates (if it doesn't already exist) our text file (songsplayed.txt) 
//for writing (not reading) and places the pointer at the end.
$open = fopen('songsplayed.txt', 'a'); 
//writes to our specified file our string
$write = fwrite($open, $add); 

echo $var1;
?>
<a type="amzn" search="<?php echo $var1; ?>" category="music">
<img border="0" src="/buttons/buy-now-button-amazon.png" alt="Buy now @ Amazon"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:16:31.487

你可以试试这个；

```
<?php
// minimal xss protection
$var1 = htmlentities($_POST['var1'], ENT_QUOTES, 'UTF-8');
$var2 = htmlentities($_POST['var2'], ENT_QUOTES, 'UTF-8');
// one-line append
file_put_contents('songsplayed.txt', sprintf("%s+%s\r\n", $var1, $var2));
// proper echo'ing
echo $var1,
     '<a type="amzn" search="'. $var1 .'" category="music">',
     '<img border="0" src="/buttons/buy-now-button-amazon.png" alt="Buy now @ Amazon"></a>';
?> 
```

# wix - WiX - 如何为所有用户创建卸载快捷方式？

> ID：14613765
> 
> 赞同：4
> 
> 时间：2013-01-30T21:05:29.567
> 
> 标签：wix, windows-installer, shortcuts

这不是一个问题，而是一个答案。
问题的一部分在这里可用：[如何为所有用户安装程序快捷方式？](https://stackoverflow.com/questions/751000/how-to-install-program-shortcuts-for-all-users)
引用：
“...如何让安装程序在所有用户配置文件下创建快捷方式，以便机器上的每个人都有快捷方式？”
另一个 - 这里：[Wix为所有用户/每台机器创建非广告快捷方式](https://stackoverflow.com/questions/2058230/wix-create-non-advertised-shortcut-for-all-users-per-machine)
引用：
“......在教程中我看到使用注册表值作为快捷方式的键路径。问题是他们使用HKCU作为根...... 。”

创建卸载快捷方式的主要困难。

该解决方案基于 Rob Menching 的博客文章[如何创建卸载快捷方式（并通过所有 ICE 验证）](http://robmensching.com/blog/posts/2007/4/27/how-to-create-an-uninstall-shortcut-and-pass-all-the)。

```
<!-- Script from Rob Menching's blog post -->
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
<Product Id="PUT-GUID-HERE"
         UpgradeCode="PUT-GUID-HERE"
         Name="TestUinstallShortcut"
         Language="1033"
         Version="1.0.0"
         Manufacturer="Microsoft Corporation"> 

    <Package InstallerVersion="200"
            Compressed="yes"
            InstallScope="perMachine" />

    <Media Id="1" />

    <Directory Id="TARGETDIR"
               Name="SourceDir">
        <Directory Id="ProgramMenuFolder">
            <Directory Id="ShortcutFolder"
                       Name="My Application">
                <Component Id="UninstallShortcutComponent"
                           Guid="PUT-GUID-HERE">
                    <RegistryKey Root="HKCU"
                                 Key="Software\[UpgradeCode]">
                        <RegistryValue Value="RobMen Was Here."
                                       Type="string"
                                       KeyPath="yes" />
                    </RegistryKey>

                    <Shortcut Id="UninstallProduct"
                              Name="Uninstall My Application"
                              Target="[System64Folder]msiexec.exe"
                              Arguments="/x [ProductCode]"
                              Directory="ShortcutFolder"
                              Description="Uninstalls My Application" />

                    <RemoveFolder Id="RemoveShorcutFolder"
                                  On="uninstall" />
                </Component>
            </Directory>
        </Directory>
    </Directory>

    <Feature Id="TestUninstallShortcut"
             Title="Test Uninstall Shortcut Feature"
             Level="1">
        <ComponentRef Id="UninstallShortcutComponent" />
    </Feature>
    <CustomAction Id="LaunchApp" 
                  Directory="TARGETDIR" 
                  ExeCommand="[System64Folder]reg.exe Delete HKCU\Software\[UpgradeCode] /f" />
    <InstallExecuteSequence>
        <Custom Action="LaunchApp" 
                After="InstallFinalize">(NOT Installed) OR UPGRADINGPRODUCTCODE</Custom>
    </InstallExecuteSequence>
</Product>
</Wix> 
```

在此示例中：
在“Package”项中添加`InstallScope ="perMachine"`
了将注册表项更改为`"Software\[UpgradeCode]"`
添加了 CustomAction`LaunchApp`以删除不需要的注册表项。

在 WinXP 32 位和 Win7 64 位上测试。

# php - 基于时区偏移的 UTC 时间

> ID：14613784
> 
> 赞同：1
> 
> 时间：2013-01-30T21:06:16.660
> 
> 标签：php, datetime

我将所有时间保存在 UTC(0) 中的 MySQL 中，因此我可以稍后在为具有不同时区的用户显示时间时更改它们，以便保存到数据库中，我使用：

```
function get_utc(){
        date_default_timezone_set('UTC');
        return date("Y-m-d H:i:s"); 
    }
$now = get_utc(); 
```

现在我想根据时区偏移量将这些时间转换为不同的时区，我正在使用这个函数：

```
function utc_and_timezone($utc_time, $offset) {
        return date("Y-m-d H:i:s", strtotime($offset, strtotime($utc_time)));
    } 
```

因此，例如，如果 UTC 时间是：2013-01-30 21:06:29 在该时间应用 +5 时区很容易找到：

```
$new_time =  utc_and_timezone("2013-01-30 21:06:29", "+5 hours"); // Works Fine 
```

它适用于 5,6 或其他整数之类的偏移量，但对于 +3.5、+2.5 之类的其他整数则不起作用：

```
$new_time =  utc_and_timezone("2013-01-30 21:06:29", "+5.5 hours"); // NOT WORKING 
```

有谁知道为什么？！在不同时区制作UTC时间的任何更好的解决方案......？

谢谢

* * *

**简短的问题：** 我想`2013-01-30 21:06:29`在`+3.5`时区中显示 UTC 时间，这怎么可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T21:21:16.170

在 PHP 方面，您可以尝试：

```
$utc_time = '2013-01-30 21:06:29';
$offset = '3.5';
echo date("Y-m-d H:i:s", strtotime($utc_time) + (3600 * $offset) );
//Returns 2013-01-31 00:36:29

$utc_time = '2013-01-30 21:06:29';
$offset = '-5.5';
echo date("Y-m-d H:i:s", strtotime($utc_time) + (3600 * $offset) );
//Returns 2013-01-30 15:36:29 
```

在 MySQL 方面，您可以使用[`CONVERT_TZ`](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_convert-tz)：

```
SELECT CONVERT_TZ('2013-01-30 21:06:29','+00:00','+03:30');
//Returns January, 31 2013 00:56:29+0000

SELECT CONVERT_TZ('2013-01-30 21:06:29','+00:00','-05:50');
//Returns January, 30 2013 15:16:29+0000 
```

# c# - 对象的数组/集合

> ID：14613792
> 
> 赞同：1
> 
> 时间：2013-01-30T21:06:34.703
> 
> 标签：c#, arrays, collections

我想创建一个包含对象的数组/集合。我希望能够使用键值访问数组/集合中的对象。我在想访问对象的语法是这样的：

```
ObjectArray[52].Color = "Blue"
ObjectArray[52].Height = 12.2

If(ObjectArray[52].Color == "Blue")
{
   // Code for Blue
}
If(ObjectArray[52].Height < 13.0)
{
   // Code for height less than 13.
}

class ObjectInArray
{
   public string Color;
   public double Height;
} 
```

在这种情况下，“52”是键值，而不是数组中的位置。颜色和蓝色是对象的属性。我不知道如何创建一个数组/集合来做到这一点（如果可以的话）。任何帮助或可选建议如何做到这一点将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T21:08:28.907

我认为字典是你正在寻找的

```
Dictionary<int, ObjectInArray > dict= new Dictionary<int, ObjectInArray >(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:09:28.750

您正在寻找的是一个`Dictionary<TKey, TValue>`. [http://www.dotnetperls.com/dictionary](http://www.dotnetperls.com/dictionary)您可以存储键值对，然后根据键访问值。

在您的示例中，字典将是`Dictionary<int, ObjectInArray>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T21:10:36.740

你不想要一个数组，你想要一个可以将一种类型的键与另一种类型的值相关联的东西。.Net 中的此类集合被称为[`Dictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)，专门针对您的情况`Dictionary<int, ObjectInArray>`。

例子：

```
Dictionary<int, ObjectInArray> ObjectArray = new Dictionary<int, ObjectInArray>();
ObjectArray[52] = new ObjectInArray();

ObjectArray[52].Color = "Blue"
ObjectArray[52].Height = 12.2

if (ObjectArray[52].Color == "Blue")
{
   // Code for Blue
}

if (ObjectArray[52].Height < 13.0)
{
   // Code for height less than 13.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T21:31:44.797

`System.Collections.Generic.Dictionary<TKey, TValue>`就是你要找的。

它是一个包含值的通用集合，可以通过给定键来访问（通过索引器）。

它的初始化如下：

```
Dictionary<int, ObjectInArray> ObjectArray = new Dictionary<int, ObjectInArray>()
{
    { /*key:*/ 52, /*value:*/ new ObjectInArray() },
    { 53, new ObjectInArray() } // Etc
}; 
```

然后您可以完全按照自己编写的代码使用它。

该字典也非常聪明，它会自动检测您正在访问的索引是否存在，并在必要时创建它：

```
ObjectArray[10] /* <-- Doesn't exist, will be created */ = new ObjectInArray(); 
```

# php - 使用 preg_match 提取字符串

> ID：14613793
> 
> 赞同：0
> 
> 时间：2013-01-30T21:06:35.057
> 
> 标签：php, regex

我有包含破折号的字符串 - 字符，我想在遇到第一个破折号之前提取字符串的一部分，*除非*破折号在单/双引号中。

IE。

**Theory 'Gabe B - Tailor' 夹克 - nordstrom.com** 我想提取**Theory 'Gabe B - Tailor' 夹克**

**Theory "Gabe B - Tailor" 夹克 - nordstrom.com** 我想提取**Theory "Gabe B - Tailor" 夹克**

**Tailor Jacket - 夹克 - nordstrom.com** 我想提取**Tailor Jacket**

我可以使用什么正则表达式与 preg_match 来实现结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:12:16.577

您可以使用这样的表达式来处理单引号和双引号（没有转义）：

```
(?:[^-]+|"[^"]*"|'[^']*')+ 
```

或者只是捕获所有内容，直到最后`-`：

```
(.+)- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:33:14.190

我相信这个正则表达式是你正在寻找的 -

```
([^-"']|"[^"]*"|'[^']*')*?(?=\s*\-) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:30:00.397

非正则表达式替代品怎么样？

```
$input = "'Gabe B - Tailor' Jacket - nordstrom.com";

$insideQuotes = false;
for ($i=0 ; $i<strlen($input) ; $i++) {

    if (!$insideQuotes && $input[$i] == "-") {
        break;
    }

    if ($input[$i] == "'" || $input[$i] == '"') {
        $insideQuotes = !$insideQuotes;
        continue;
    }
}

echo substr($input, 0, $i); 
```

# ruby-on-rails-3 - how to scope order in a HABTM association?

> ID：14613794
> 
> 赞同：2
> 
> 时间：2013-01-30T21:06:37.880
> 
> 标签：ruby-on-rails-3, rails-activerecord

I have two models:

```
class Doctor < ActiveRecord::Base
  has_and_belongs_to_many :branches
end

class Branch < ActiveRecord::Base
  has_and_belongs_to_many :doctors
end 
```

I want to order the list of doctors(index action) by the branch name either ASC or Desc. How can I do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:24:48.240

I don't believe the HABTM association works differently than any other one-to-many would in this context, so you'd use `select()`, `group()`, and `order()`, probably something like this:

```
@doctors = Doctor.joins(:branches).group('doctors.id').order('max(branches.name)') 
```

Naturally, you'll need to choose how to aggregate this - a Doctor can have many Branches, so you'll have to specify which name to use in the ordering - `max()` may not be the correct aggregate function for your needs.

Note that this will exclude any Doctor models that don't have *any* associated Branches, since the default for `joins` is to use an inner join. If you don't want to do that, you'll probably have to write the `joins` out manually, so that it uses left joins instead of inner joins, like so:

```
joins('left join branches_doctors on doctors.id = branches_doctors.doctor_id left join branches on branch.id = branches_doctors.branch_id') 
```

The default name for a HABTM join table is the plural form of both models in alphabetical order (hence `branches_doctors`, rather than `doctors_branches`).

# foreach - 在 DOS 中查找无扩展名文件 For In Loop

> ID：14613795
> 
> 赞同：0
> 
> 时间：2013-01-30T21:06:38.213
> 
> 标签：foreach, dos

我喜欢查找所有 .js 文件（例如 sss.js）和没有文件类型的文件（扩展名、后缀、.dot 之后的文件类型）

我试过 `for ..... In (*,*.js) ....` 但不工作，它会遍历它找到的所有文件。

请咨询如何选择没有文件类型的文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:02:53.707

你几乎说对了。你只需要在第一个星号后加一个点。

```
for ... in (*. *.js) ... 
```

# css - IE9 中水平未对齐的 div，但在 FF/IE8/Chrome/Opera/Safari 上正常

> ID：14613799
> 
> 赞同：0
> 
> 时间：2013-01-30T21:07:03.657
> 
> 标签：css, internet-explorer, html, alignment

大家好，今天我在使用 IE9 时遇到了问题，除了 IE9 之外的一切都正常（可能还有 IE10，没有机器可以测试）

这是代码：[JsFiddle](http://jsfiddle.net/qGPrB/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

```
<head>
    <title>Titre</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <style type="text/css">
        .carouselNav {
            position: absolute;
            z-index: 9998;
            top: 92px;
            right: 300px;
            width:100px;
        }
        .carouselNav div {
            padding:10px;
            display:inline;
        }
        .carouselNav span {
            padding-right:15px;
        }
        .carousel {
            position:relative;
        }
    </style>
</head>

<body>
    <div class="carousel" style="overflow: visible;">
        <div class="carouselMedia"> <a href="http://extranet.achaplus.local/~apouliot_site_1284/fr/solutions.php?solution=phone_ip"><img id="carousel_img_item_1" src="http://achatplus.com/static/template/style1/img/header/slide1_phone_ip_fr.jpg" alt=""/></a>

            <a
            href="http://extranet.achaplus.local/~apouliot_site_1284/fr/solutions.php?solution=mobility">
                <img id="carousel_img_item_2" style="display: none;" src="http://extranet.achaplus.local/~apouliot_site_1284/static/template/style1/img/header/slide2_mobility_fr.jpg"
                alt="" />
                </a> <a href="http://extranet.achaplus.local/~apouliot_site_1284/fr/solutions.php?solution=shipping"><img id="carousel_img_item_3"  style="display: none;" src="http://extranet.achaplus.local/~apouliot_site_1284/static/template/style1/img/header/slide3_shipping_fr.jpg" alt=""/></a>

                <a
                href="http://extranet.achaplus.local/~apouliot_site_1284/fr/solutions.php?solution=office">
                    <img id="carousel_img_item_4" style="display: none;" src="http://extranet.achaplus.local/~apouliot_site_1284/static/template/style1/img/header/slide4_office_fr.jpg"
                    alt="" />
                    </a> <a href="http://extranet.achaplus.local/~apouliot_site_1284/fr/solutions.php?solution=internet"><img id="carousel_img_item_5" style="display: none;" src="http://extranet.achaplus.local/~apouliot_site_1284/static/template/style1/img/header/slide5_internet_fr.jpg"alt=""/></a>

        </div>
        <div class="carouselNav">
            <div id="item_1" title="1" class=""></div>
            <div id="item_2" title="2" class=""></div>
            <div id="item_3" title="3" class=""></div>
            <div id="item_4" title="4" class=""></div>
            <div id="item_5" title="5" class=""></div>
        </div>
    </div>
</body> 
```

好的，所以有一个图像，并且有 5 个 div 对齐在 5 个按钮上（活动的是绿色的）

每个 div 应该是空的，所以我使用了 10px 的填充来制作 20x20 的 div（如果你发现它为什么是 20x38 的话，可以加分）。周围的 div 是 100px 宽。

在除 IE9 之外的所有浏览器中，div 都非常好。然而，在 IE9 上，主 div 大约 14px 太高了。

我很久以前就想不出问题可能出在哪里了。

非常感谢您的每一点帮助和建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:11:40.093

它们在 IE9 和 IE10 中对我来说看起来不错，但我建议使用`width:20px;height:20px;display:inline-block`而不是你的`padding:10px`技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:21:42.880

我最终在 div 上使用 position:absolute 。

这导致ie不点击div，除非里面有东西所以我放了一个字体大小：100px; 以便它填充 div。

# jquery - 有没有办法将 event.preventDefault 与 focusOut 一起使用？如果不是，为什么？

> ID：14613804
> 
> 赞同：17
> 
> 时间：2013-01-30T21:07:14.017
> 
> 标签：jquery, event-handling, jquery-events, preventdefault

我想阻止`focusOut`（或`blur`）事件的默认事件，并将焦点设置为特定的输入字段。

这是我已经尝试过的：

*   `event.preventDefault()`在函数的开头和结尾使用（用于测试目的，而不是样式）

*   `return false;`防止传播

*   直接在元素中将焦点设置回元素（但我发现焦点仍然在切换，因为焦点切换是在函数执行*后*`.on()`执行的。我知道我可以使用`setTimeout`，但我想避免它并弄清楚心脏的问题。）

*   使用`blur`而不是`focusOut`

我的代码是这样的：

```
 _triggerEventHide: function(inst, eventType) {
        inst.$target.on(eventType, function(event) {
            event.preventDefault();
            if (!$.suggestBox.$divCont.hasClass($.suggestBox.mouseOverClassName)) {
                $.suggestBox.$divCont.css({display: 'none'});   //reposition Suggestbox
            } else {
                inst.target.focus(); 
            }
            event.preventDefault();
            return false;
        });
     } 
```

请注意，它`$target`表示 jQuery 包装的元素并`target`表示本机 DOM 元素。

我已经进行了一些研究，并且已经找到了一些与我的问题相关的文章，但没有一篇文章回答了这个确切的问题。

1.  [preventDefault 不适用于焦点事件](https://stackoverflow.com/questions/6740269/preventdefault-does-not-work-on-focus-event)——在这里，给出的答案是使用任何类型的事件操作的替代途径。

2.  [如果没有必需的值，则将焦点返回文本框上的焦点](https://stackoverflow.com/questions/8357591/focus-back-textbox-on-focus-out-if-does-not-have-required-value)–在这里，解决方案是使用`setTimeout()`将焦点设置回原始元素，这没关系，但我想了解问题的核心，为什么`preventDefault()`是不在这里工作。

3.  [jQuery preventDefault() 不起作用](https://stackoverflow.com/questions/5614099/jquery-preventdefault-not-working)——我从这个线程尝试了一些可能的解决方案，例如使用`event.stopImmediatePropagation()`and `event.stop()`，但都是徒劳的。

我感谢在此问题上贡献的任何时间、知识和解决方案（包括尝试）。我真的很想学习……</p>

这是**[一个向您展示问题的 jsFiddle](http://jsfiddle.net/crislivinitup/gkhEB/28/)** ……请随意使用它并尝试不同的解决方案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-31T06:52:34.927

经过更多研究后，我发现只有某些事件是“可取消的”。

*   引自[http://help.dottoro.com/ljwolcsp.php](http://help.dottoro.com/ljwolcsp.php)

    > 您可以在除 Internet Explorer 9 之前的所有浏览器中使用可取消属性检查事件是否可以取消。尽管可取消属性存在于 Firefox 中，但无论事件的可取消状态如何，它始终返回 true。在 Internet Explorer 版本 9 之前，无法确定是否可以取消事件。
    > 
    > 请注意，在不可取消的事件上使用 preventDefault 方法和 returnValue 属性不会导致错误。当事件处理程序返回 false 时，该事件将被取消。您可以使用它来代替 preventDefault 方法和 returnValue 属性。请参见下面的示例 2。

*   Javascript 中的每个事件都有一个可取消属性，如果可以阻止该事件，则该属性定义为“true”，如果无法取消该事件，则该属性定义为“false”。参考：[http ://help.dottoro.com/ljeosnqv.php](http://help.dottoro.com/ljeosnqv.php)

*   可以在 jsFiddle 上找到来自 http://help.dottoro.com/ljeosnqv.php 的演示此属性[的](http://jsfiddle.net/crislivinitup/dwe64/13/)[示例](http://help.dottoro.com/ljeosnqv.php)脚本（以节省空间）。请注意代码中关于 Firefox 如何始终为事件对象中的可取消属性返回 true 的注释。

一般原则是：

```
 $('selector').on(eventType, function (event) {
    alert(('cancelable' in event));   //will return true
    alert(event.cancelable);      //will return true if event can be cancelled
                                  //NOTE: Firefox mistakenly always returns true
}); 
```

*   根据情况，事件具有预设的发生顺序。例如，如果单击鼠标按钮，则 eventTriggers 的顺序为：mousedown、mouseup 和 click。参考：www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event-initMouseEvent

*   引自[http://www.w3.org/TR/2003/NOTE-DOM-Level-3-Events-20031107/events.html#Events-flow-cancelation](http://www.w3.org/TR/2003/NOTE-DOM-Level-3-Events-20031107/events.html#Events-flow-cancelation)

    > “可取消事件”是与允许在 DOM 事件流期间取消的默认操作相关联的事件。在事件流的任何阶段，触发的事件侦听器都可以选择取消默认操作或允许默认操作继续进行。对于浏览器中的超链接，取消操作将导致不激活超链接。并非本规范中定义的所有事件都是可取消的事件。

*   有时事件的顺序是 DOM 默认操作将在您要取消的事件出现之前发生，在这些情况下，您无法取消默认操作，因为它已经发生了。也就是说默认动作发生在事件的派发**之前。**

* * *

## 我的解决方案：

话虽如此，我确实设法找到了*解决*我的问题的方法，并且更多/更少地解决了这个问题。本质上，我已经有一个带有焦点元素的 eventListener，我希望这个元素保持焦点。

```
<div id='display'></div>
$('#idBox').on('focusin', function () {
  $('#div').append('focused');
  //do something
} 
```

最初，当我单击关闭时，我尝试使用 setTimeout 事件，但我发现这并不好，因为它再次触发了我的 focusin 事件。所以我们需要的是一个**在DOM默认**切换焦点动作之前调度的事件。我确实发现有*一个*事件可以满足此要求，但仅适用于 IE... 典型。供您参考：**“onbeforedeactivate”**，它**是可取消的**。然而，由于跨浏览器兼容性很重要，我们不应该使用这个 eventTrigger。相反，我发现事件 mousedown 发生在 DOM 开始其焦点更改行为之前。

所以我们能做的是：

```
$(document).on('mousedown', function(event) { 
       target = event.target;     // the element clicked on
       myTarget = document.getElementById("idBox");   // the element to keep focus
       if (target !== myTarget) {   
           event.preventDefault();  //prevent default DOM action
           event.stopPropagation();   //stop bubbling
           return false;   // return
       }
}); 
```

还有很多其他方法可以解决这个问题。我个人不喜欢为整个文档设置一个 eventListener，而是为了演示它的基本用途。

* * *

脚注：了解更多关于 Javascript 事件处理的好文章是[http://help.dottoro.com/ljtdqwlx.php](http://help.dottoro.com/ljtdqwlx.php) 我偶然发现的一个了不起的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-22T10:04:15.717

我们知道这是导致问题的点击功能。所以在像chrome这样的普通资源管理器中，你可以检测mousedown事件，然后阻止默认。

但这在 ie 中不起作用，但我们可以使用 beforedeactivate 事件来代替[http://msdn.microsoft.com/en-us/library/windows/apps/jj569321.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj569321.aspx)。它可以在焦点发生变化时被检测到。所以只是阻止它。

代码会是这样的：

```
 $inp.on('blur', function(){

            self.hide();
        });

        isIE && $inp.on('beforedeactivate', function(evt){
            mousedown && evt.preventDefault();
        });

        $holder.on('mousedown', function(evt){
            evt.preventDefault();
            mousedown = 1;
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-28T22:18:47.807

我试图在 contenteditable 元素中实现这种行为。我想在单击将焦点从 contenteditable 元素上移开的外部按钮时将光标保持在原位。

作为解决方案，我拦截了 focusout 事件并恢复了原始选择。打字稿中的示例：

```
editable_element.addEventListener('focusout',(e)=> {
    if(e.relatedTarget && e.relatedTarget.tagName=="BUTTON") 
    {
        let sel : any = App.SR.getSelection();
        let range : any = sel.getRangeAt(0);
        sel.removeAllRanges();
        sel.addRange(range);
    }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T21:22:04.313

```
inst.$target.on("blur", function() {
     if (!$.suggestBox.$divCont.hasClass($.suggestBox.mouseOverClassName)) {
        $.suggestBox.$divCont.css({'display': 'none'});   //reposition Suggestbox
        return true;
        } 
      inst.target.focus();
      return false;
         }); 
```

需要查看您的html。我认为您的称呼不正确 EX：

`$.suggestBox`我想应该是`$(".suggestBox")`，但我不能不看你的htnl就知道

# oauth-2.0 - 无法将 Facebook PHP SDK 与 Laravel Social Sentry Auth 一起使用

> ID：14613806
> 
> 赞同：0
> 
> 时间：2013-01-30T21:07:18.510
> 
> 标签：oauth-2.0, facebook-php-sdk, laravel

我已经在我的网站[http://ratewait.com上安装了哨兵社交身份验证 (](http://ratewait.com) [http://www.getplatform.com/manuals/sentrysocial](http://www.getplatform.com/manuals/sentrysocial) ) ，它工作正常。

我现在想通过 Facebook SDK 提供功能，但遇到了麻烦。我使用捆绑包 github.com/kapv89/laravel-fb-sdk-bundle 安装了 SDK，并作为名称间隔库安装，例如：wrttn.in/b6df85

但是每次我调用 `$user = $facebook->getUser( );`它都会返回 0。我猜这与我使用 Sentry 来验证人的事实有关。任何人都可以帮忙吗？

谢谢
亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:15:10.050

所以我想通了。

laravel 的 Sentry Social 捆绑包将您的访问令牌存储在名为 social_authentication 的表中的一个名为 Token 的字段中。

我创建了一个名为 social 的模型，它链接到该表并创建了与我的用户的关系。

然后，在我的控制器中添加以下代码（这应该移动到模型中......）

```
 $user = Sentry::user();
   $user = $user->id;
   $user = User::with('social')->find($user);
   $access_token = $user->social->token;

   $facebook->setAccessToken($access_token);

   $friends = $facebook->api('/me/'); 
```

这可能不是最有效的方法，但它确实有效。

# ember.js - Ember.js“有很多通过”

> ID：14613807
> 
> 赞同：4
> 
> 时间：2013-01-30T21:07:26.833
> 
> 标签：ember.js, ember-data

Ember Data 是否具有类似于 Rails 的`has_many ..., :through =>`功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:56:22.400

它不是。在`1.0 Beta`里程碑中添加了一个未解决的问题：[多对多关联](https://github.com/emberjs/data/issues/120)

请参阅 Andre 的回答[Ember-data polymorphic associations](https://stackoverflow.com/questions/11452361/ember-data-polymorphic-associations)，了解我们目前是如何解决这个问题的。

# mysql - MySQL 用于与一列分组并从另一列获取子组

> ID：14613808
> 
> 赞同：3
> 
> 时间：2013-01-30T21:07:37.723
> 
> 标签：mysql, sql

我有一个 MySQL 表。我把模式[放到这个小提琴](http://sqlfiddle.com/#!2/b5701/3)上。
在我的表中，当用户登录时，我将他/她记录到 mytable 中。在一天内，同一用户可以登录多次。所以我需要知道用户每天登录多少次。

我需要这样的输出：

*   2013-01-30——
    迈克尔——2次
    ——约翰——4次

*   2013-01-29
    -- Michael - 1 次
    -- John - 1 次
    -- Mary - 1 次
    -- Dean - 1 次

*   2013-01-28——
    迈克尔——3次
    ——玛丽——1次

我试过这个：

```
SELECT COUNT(*) AS "times", username, date
FROM mytable GROUP BY date ORDER BY date DESC 
```

但它给了我这个：
- 2013-01-30 - Michael - 6 次
- 2013-01-29 - John- 4 次
- 2013-01-28 - Michael - 6 次

你能推荐一个查询吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T21:13:48.853

只需将用户名添加到您的`GROUP BY`条款。

```
SELECT COUNT(*) AS "times", username, date
FROM mytable 
GROUP BY date, username ORDER BY date DESC 
```

[http://sqlfiddle.com/#!2/b5701/11](http://sqlfiddle.com/#!2/b5701/11)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T21:15:48.677

SELECT date, username, COUNT(1) AS "times" FROM mytable GROUP BY date, username ORDER BY date DESC

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T21:15:21.343

你`Group by username`也应该。

试试这个

```
 SELECT COUNT(*) AS times, username, date
  FROM mytable group by date,username ORDER BY date DESC 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/b5701/15)

# sql - SQL Server 简单查找/替换表列中的文本字符串

> ID：14613811
> 
> 赞同：2
> 
> 时间：2013-01-30T21:07:45.450
> 
> 标签：sql, sql-server-2008

自从我运行 SQL 查询以来已经有一段时间了，我需要一些帮助。

我有一个 SQL Server 数据库，我需要在其中对名为“my_table”的表中“内容”列中的文本内容进行字符串查找/替换。我在尝试执行 SQL 时收到“无效的对象名称”错误：

```
UPDATE dbo.MY_TABLE
  SET CONTENT = REPLACE(CONTENT, 'http://123.123.123.123', 'http://www.mysite.com')
  WHERE CONTENT LIKE '%http://123.123.123.123%'; 
```

网站的 html 内容存储在“my_table”表中标记为“Content”的字段中。我有数千个 IP 地址实例需要更新以反映新域名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:12:05.363

对我来说似乎工作正常：

[http://sqlfiddle.com/#!3/451de/1](http://sqlfiddle.com/#!3/451de/1)

我的猜测是 My_Table 的所有者不是 dbo？你可以吗：

```
SELECT * FROM dbo.My_Table 
```

祝你好运。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-23T23:54:46.667

```
UPDATE dbo.MY_TABLE
SET CONTENT = example.com --Enter your actual website name
WHERE CONTENT LIKE oldexample.com --enter what address you want replace 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-30T14:32:21.040

问题是字段名称。它是一个保留字。通过**[内容]**更改**内容**

# c# - 将类应用于 RowDataBound 事件的单元格时，如何避免 GridView 的网格线改变颜色？

> ID：14613816
> 
> 赞同：1
> 
> 时间：2013-01-30T21:08:18.663
> 
> 标签：c#, html, asp.net, rowdatabound

在我的网站中，我有一个带有 Gridview 的页面，用于显示一些数据。我捕获 RowDataBound 事件，以确定单元格中是否存在某些文本。如果是，我把它涂成绿色，否则我把它涂成红色。

这是问题所在：Gridview 只有水平网格线。当我更改 RowDataBound 中单元格的颜色时（我实际上是在更改类），网格线采用应用的颜色。无论我尝试什么（循环遍历所有单元格并设置边框颜色），我都无法将其还原。请帮忙。

```
protected void GridView2_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        for (int i = 2; i <= 3; i++)
        {
            if (e.Row.Cells[i].Text.Contains("monkey"))
            {
                e.Row.Cells[i].Attributes.Add("class", "monkey bold");
            }
            else
            {
                e.Row.Cells[i].Attributes.Add("class", "nomonkey bold");
            }
        }
    } 
```

}

样式如下：

```
.monkey
{
    color: #009900;
    border-color: black;
}

.nomonkey
{
    color: red;
    border-color: black;
} 
```

边框颜色属性似乎没有效果。

GridView 定义为：

```
 <asp:GridView ID="GridView2" runat="server" AllowSorting="False" GridLines="Horizontal" AutoGenerateColumns="false" CellPadding="4" OnRowDataBound="GridView2_RowDataBound" OnDataBound="GridView2_DataBound" CssClass="reportGrid"> 
                        <FooterStyle BackColor="#2F76B8" Font-Bold="True" ForeColor="White" />
                        <HeaderStyle BackColor="#2F76B8" Font-Bold="True" ForeColor="White" />
                        <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                        <RowStyle BackColor="#FFFFFF" ForeColor="#222222" HorizontalAlign="Center" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T01:18:32.850

我在任何地方都找不到答案，也无法诱使任何人回答它，所以我通过在单元格内添加一个跨度来解决它，并将其样式设置如下：

```
 if (e.Row.Cells[i].Text.Contains("monkey"))
            {
                e.Row.Cells[i].Text = e.Row.Cells[i].Text.Replace("monkey", "<span class=\"monkey\">monkey</span> ");
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T14:59:26.520

我也经历过同样的事情。另一种方法是添加一个标签控件并在其上设置属性。

不要使用 BoundField，而是使用 TemplateField。假设您的数据返回一个可索引的项目：

```
<asp:GridViewControl runat="server" ID="GridView2" AutoGenerateColumns="false">
    <asp:BoundField HeaderText="Field0" DataField="[0]" />
    <asp:BoundField HeaderText="Field1" DataField="[1]" />
    <asp:TemplateField HeaderText="Monkey1" />
    <asp:TemplateField HeaderText="Monkey2" />
</asp:GridViewControl> 
```

然后在代码隐藏中：

```
protected void GridView2_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var data_item = e.Row.DataItem; // Can use "as <type>;" if you know the type.
        if (data_item != null)
        {
            for (int i = 2; i <= 3; i++)
            {
                var cell_content = new Label();
                e.Row.Cells[i].Controls.Add(cell_content);

                cell_content.Text = data_item[i];
                if (data_item[i].Contains("monkey"))
                {
                    cell_content.Attributes.Add("class", "monkey bold");
                }
                else
                {
                    cell_content.Attributes.Add("class", "nomonkey bold");
                }
            }
        } 
```

当然，另一种方法是在 TemplateField -> ItemTemplate 声明中添加带有 ID 的标签并使用“Cells[i].FindControl("label_id")”。

# java - 在 Spring/Hibernate 中执行 CRUD 操作时抛出正确的异常

> ID：14613818
> 
> 赞同：1
> 
> 时间：2013-01-30T21:08:27.020
> 
> 标签：java, spring, hibernate

假设我正在尝试使用休眠将实体添加到表中，在添加我的 DAO 之前，我检查它是否已经存在，如果已经存在，我返回 null 对象，否则我返回添加的实体 ID。

```
@ResponseBody
@RequestMapping(method = RequestMethod.POST)
public T addEntity(@RequestBody State state) {
    T response = null;
    try {
        response = getService().add(state);
    } catch (Exception e) {
        e.printStackTrace();

    }
    return response;

} 
```

但是当返回 null 时，我想显示正确的 HTTP 错误代码 400，有什么办法可以在 spring 中做到这一点，而不是返回 null？谢谢！

编辑：

我试过这样的事情：

```
@ResponseBody
@RequestMapping(method = RequestMethod.POST)
public T addEntity(@RequestBody String message,
        HttpServletResponse httpResponse) throws Exception {
    T response = null;
    try {
        response = getService().add(message);
    } catch (Exception e) {
        httpResponse.setStatus(409);
        e.printStackTrace();
        throw new Exception("State already exists, Error 409");
    }
    return response;

} 
```

但它给出了一个异常，因为“错误 500 状态已经存在，错误 409”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:26:17.703

您可以直接手动设置它：

```
@ResponseBody
@RequestMapping(method = RequestMethod.POST)
public T addEntity(@RequestBody State state, HttpServletResponse httpResponse) {
    T response = null;
    try {
        response = getService().add(state);
    } catch (Exception e) {
        httpResponse.setStatus(400);
        e.printStackTrace();

    }
    return response;

} 
```

# qtableview - QSQLTableModel 继承者和 QTableView

> ID：14613824
> 
> 赞同：1
> 
> 时间：2013-01-30T21:08:44.967
> 
> 标签：qtableview, qsqltablemodel

我为使用 qml 编写了 QSQLTableModel 继承器，它运行良好。我也需要将它与 QTableView 一起使用，数据显示，但我无法修改它 - 当我编辑时一切正常，但是当我离开现场时所有更改都会下降（我知道 editStrategy，但问题发生得更早）。我想虚函数出了点问题，但我不知道是什么。如果我使用相同的参数创建 QSqlTableModel，一切都很好。有人知道我该如何解决这个问题？我的代码：

H：

```
class ListModel : public QSqlTableModel
{

    Q_OBJECT
    Q_PROPERTY( int count READ rowCount() NOTIFY countChanged())

signals:
    void countChanged();

public:
    Q_INVOKABLE QVariant data(const QModelIndex &index, int role) const;
    ListModel(QObject *parent, QSqlDatabase _db):QSqlTableModel(parent,_db){this->setEditStrategy(QSqlTableModel::OnManualSubmit);}
    void applyRoles();
#ifdef HAVE_QT5

virtual QHash<int, QByteArray> roleNames() const{return roles;}

#endif

private:
    int count;
    QHash<int, QByteArray> roles;
}; 
```

cp:

```
//based on http://qt-project.org/wiki/How_to_use_a_QSqlQueryModel_in_QML

void ListModel::applyRoles()
{
    roles.clear();
    qDebug()<<"\n"<<this->tableName();
    for (int i = 0; i < this->columnCount(); i++) {
            QString role=this->headerData(i, Qt::Horizontal).toString();
            roles[Qt::UserRole + i + 1] = QVariant(role).toByteArray();
            qDebug()<<this->headerData(i, Qt::Horizontal);
    }
#ifndef HAVE_QT5
    setRoleNames(roles);
#endif
}

QVariant ListModel::data(const QModelIndex &index, int role) const{

    QVariant value;
    if(role < Qt::UserRole)
    {
        value = QSqlQueryModel::data(index, role);
    }
    else {
        int columnIdx = role - Qt::UserRole - 1;
        QModelIndex modelIndex = this->index(index.row(), columnIdx);
        value = QSqlQueryModel::data(modelIndex, Qt::DisplayRole);
    }
    return value;
} 
```

**UPD** 我知道问题出在`data`方法的量词 const 中，如果我删除它，QTableView 一切正常，但我无法使用 gml 的列表视图从模型中获取数据。我只看到一个解决方案 - 用聚合替换 QSqlTableModel 中的 interition，但也许有人知道更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:14:56.297

总结：用奇怪的hack解决-继承自QSqlRelationalTableModel而不是QSqlTableModel，我认为原因是QSqlRelationalTableModel重写了非虚方法数据

# sql-server-2008 - 如何调整这个 CASE 表达式？

> ID：14613829
> 
> 赞同：1
> 
> 时间：2013-01-30T21:08:59.593
> 
> 标签：sql-server-2008, tsql

我有一个大查询，它有多个连接，如下所示。现在我必须调整这个查询。

当前逻辑是：如果 AppealOutcome Code = F/D/P 然后插入 ReAdjustedClaimControlNumber。

我需要将我的逻辑更改为：对于处置 F/D/P，当 MonthlyApepalFile 中的 ReAdjustmentId 为空时，使用 AdjustmentID。如果 AdjustmentId 也为空，则使用 ClaimControlNumber。

任何人都可以抛出任何快捷方式吗？

```
Insert into rec.RecoveryClaims (ClaimControlKey, ClaimOutcomeCode, ClaimControlNumber )
select 
             A.ClaimControlKey
             ,ClaimOutcomeCode

            ,CASE   WHEN E.AppealOutcomecode = 'F' THEN E.ReadjustedClaimControlNumber
                    WHEN E.AppealOutcomecode = 'D' THEN E.ReadjustedClaimControlNumber
                    WHEN E.AppealOutcomecode = 'P' THEN E.ReadjustedClaimControlNumber
                    ELSE E.AdjustedClaimControlNumber
                    END  
FROM rec.RecoveryClaims A 
INNER JOIN @ExistingRecoveryClaimControlKey b 
    on a.RecoveryClaimControlKey = b.RecoveryClaimControlKey
INNER JOIN occ.Claims C 
    on c.ClaimControlKey = A.ClaimControlKey
INNER JOIN @OutputRecoveryCases D 
    on D.CaseID = C.CaseId  
INNER JOIN @NewClaimControlNumbers E 
    ON C.CaseId = E.CaseID 
    AND A.ClaimControlKey = E.ClaimControlKey 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:20:09.057

您可以使用以下命令折叠该`CASE`语句`IN`：

```
,CASE   WHEN E.AppealOutcomecode IN ('F', 'D', 'P') 
        THEN E.ReadjustedClaimControlNumber
        ELSE E.AdjustedClaimControlNumber
END 
```

接下来，如果我了解您的要求，下一部分将如下所示：

```
,CASE   WHEN Disposition IN ('F', 'D', 'P') 
        THEN COALESCE(ReAdjustmentId , AdjustmentID, ClaimControlNumber)
END 
```

编辑：

如果字符串为空而不是`NULL`，则可以[`NULLIF`](http://msdn.microsoft.com/en-us/library/ms177562.aspx)与 结合使用`COALESCE`：

```
,CASE   WHEN Disposition IN ('F', 'D', 'P') 
        THEN COALESCE(
            NULLIF(ReAdjustmentId, '') , 
            NULLIF(AdjustmentID, ''), 
            NULLIF(ClaimControlNumber, '')
        )
END 
```

# java - Ant：在爆炸目录上使用战争任务

> ID：14613830
> 
> 赞同：2
> 
> 时间：2013-01-30T21:09:00.063
> 
> 标签：java, ant, war

我对 Ant 比较陌生，并且正在尝试找到对我的 Web 应用程序进行 WAR-up 的最简单方法。

我已经有创建以下“exploded WAR”目录结构的构建目标：

```
MyApp/
    src/
        ...
    gen/    <-- this gets created as a part of every build
        war/
            stylesheets/
                myapp.css
            views/
                index.jsp
                cool.jsp
                ...
            WEB-INF/
                web.xml
                lib/
                    (All of my dependencies)
                classes/
                    META-INF/
                        jdoconfig.xml
                    com/
                        myapp/
                            (All compiled binaries) 
```

因此，考虑到当我准备好创建 WAR 文件（使用`<war/>`或`<zip/>`其他任何东西）时，我已经准备好了 WAR 的分解版本。

我对`<war/>`任务的问题是它似乎不支持`war/`除`WEB-INF/lib`and下的目录`WEB-INF/classes`：

```
<war destfile="myapp.war" webxml="gen/war/WEB-INF/web.xml">
    <lib dir="gen/war/WEB-INF/lib" />
    <classes dir="gen/war/WEB-INF/classes" />
</war> 
```

`stylesheets`和`views`，或者我可能想要的任何其他东西呢？如果我想添加一个文件或目录`WEB-INF/`怎么办？如果我想在战争中添加与 相同级别的东西`WEB-INF/`怎么办？这项`<war/>`任务似乎太不灵活了。

无论哪种方式（因为我确信任务*是*灵活的，我只是没有“得到”它），我只想要最简单的方法来创建一个`myapp.war`具有早期构建目标在`gen/war`. 提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:25:17.053

您可以在战争标签内使用文件集

我们构建文件中的一个示例

```
<war destfile="${war.dest.file.name.without.extension}.war"      manifest="${build.dir}/MANIFEST.MF" webxml="${webcontent.dir}/WEB-INF/web.xml">
        <fileset dir="${webcontent.dir}" casesensitive="no">
            <exclude name="WEB-INF/lib/**"/>
            <exclude name="WEB-INF/classes/**"/>
            <exclude name="WEB-INF/web.xml"/>
            <exclude name="META-INF/context.xml"/>
         </fileset>
         <lib dir="${app.lib.dir}"/>
         <classes dir="${classes.dir}"/>
    </war> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:42:10.613

想通了，这样就容易多了。如果您已经拥有自己的爆炸式战争目录，则该`<war/>`任务会施加太多限制。把它拉上**拉链**！

```
<zip destfile="myapp.war"
    basedir="gen/war" update="true" /> 
```

# apache - Apache - mod_rewrite 如何更喜欢文件而不是目录（如果两者具有相同的名称）？

> ID：14613832
> 
> 赞同：1
> 
> 时间：2013-01-30T21:09:09.670
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个非常类似的问题：[Apache mod_rewrite - 喜欢文件而不是具有漂亮 URL 的目录](https://stackoverflow.com/questions/2659830/apache-mod-rewrite-prefer-files-over-directories-with-pretty-urls)

但是它不一样，上面链接中提到的解决方案对我不起作用。

* * *

我的目录结构如下所示：

```
/pages/articles/january.php
/pages/articles.php
/pages/home.php
/articles/
/index.php 
```

现在，我包含在 index.php 页面中（取决于 url）。

例如，当用户输入地址**www.domain.com**（或**www.domain.com/home**）时，**index.php**将包含**/pages/home.php**

但是如果我输入这个 URL：**www.domain.com/articles**它将使链接像这样：**www.domain.com/articles/** ?page[]=articles （换句话说**index.php**不会包含**/pages/文章.php**文件）

另一方面，这非常有效：**www.domain.com/articles/january**

这是我的 htaccess 文件：

```
RewriteEngine On
RewriteBase /
RewriteRule ^([a-zA-Z0-9+]*)/([a-zA-Z0-9+]*)$ %{DOCUMENT_ROOT}/index.php?page[]=$1&page[]=$2 [QSA,L]
RewriteRule ^([a-zA-Z0-9+]*)$ %{DOCUMENT_ROOT}/index.php?page[]=$1 [QSA,L] 
```

我使用数组作为**页面**，因为我可以有子页面（并且子页面可以正常工作！）。

**编辑：我发现[了这个](https://stackoverflow.com/questions/7666487/how-to-prevent-apache-mod-rewrite-from-treating-path-as-file-with-same-name)但是它不能解决我的问题:(**

* * *

有人能告诉我为什么会这样以及如何解决吗？

或者，我怎样才能优先考虑文件而不是目录？

**编辑 2：我通过删除“/articles/”目录解决了这个问题，但是我仍然对如何通过 htaccess 文件规则使其工作感兴趣。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:06:39.327

根据上面的评论，您的原始问题已通过删除文章目录得到解决，但您仍然希望能够在这种情况下处理目录。

您可能希望分成两组规则。有一个较早的规则，它使用 a 中的`-d`标志`RewriteCond`来捕获目录，以便它可以根据需要对它们进行不同的处理。或者，通过否定标志 ( `!-d`) 来忽略第一条规则中的目录，然后在后面的规则中捕获它们。

# sml - 我得到错误：语法错误：在编译我的 SML 代码时插入 ELSE ID，我不知道为什么

> ID：14613836
> 
> 赞同：0
> 
> 时间：2013-01-30T21:09:31.997
> 
> 标签：sml

我正在参加 Coursera 课程，并且正在尝试做功课。

我们必须编写一个 SML 程序，它获取一张卡片列表（由它们的花色和等级表征），如果它们都具有相同的颜色，则返回 true，否则返回 false。

这是我的代码（我不知道为什么它是错误的，但我在编程中退出了一个菜鸟）：

```
datatype suit = Clubs | Diamonds | Hearts | Spades
datatype rank = Jack | Queen | King | Ace | Num of int 
type card = suit * rank

datatype color = Red | Black
datatype move = Discard of card | Draw 

fun card_color (c) = case c of
(Hearts,_) => Red
|(Diamonds,_)  => Red
|(_,_) => Black

fun all_same_color (cs) = case cs of
    [] => false
    |x::[] => true 
|x::y::[] =>  if card_color (x) = card_color (y) then true
|x::y::xs => if card_color(x)=card_color(y) then all_same_color(xs)
                        else false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:15:52.140

你不能`if ... then ...`没有一个`else ...`案例。

您尝试在此处执行此操作：

```
|x::y::[] =>  if card_color (x) = card_color (y) then true 
```

请记住，`if ... then ... else ...`是一个表达式，因此无论条件是真还是假都需要一个值。

此外，如果你得到一个`if-then-else`, 其中`then`or`else`部分是`true`or `false`，你可以写得更简洁。例如，

```
if card_color(x)=card_color(y) then all_same_color(xs) else false 
```

和说的一样

```
card_color x = card_color y andalso all_same_color xs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:15:16.263

我不知道那种语言，但你的最后一个条件不正确（我假设是某种 Haskell）：

```
|x::y::xs => if card_color(x)=card_color(y) then all_same_color(xs)
                    else false 
```

应该：

```
|x::y::xs => if card_color(x)=card_color(y) then all_same_color(y::xs)
                    else false 
```

我不知道 (y::xs) 是不是我的意思，那个参数应该是一个 y 后跟 xs 的列表。使用该条件，您的第三种情况是多余的，因此最后一个函数应该是：

```
fun all_same_color (cs) = case cs of
    [] => false
    |x::[] => true 
    |x::y::xs => if card_color(x)=card_color(y) then all_same_color(y::xs)
                    else false 
```

# wcf - WCF 客户端 CloseAsync 与 Abort()

> ID：14613839
> 
> 赞同：0
> 
> 时间：2013-01-30T21:09:42.477
> 
> 标签：wcf

我正在使用可移植类库来构建服务类，我们所有的 UI 技术都使用这些服务类与我们的服务进行通信。

这些库将支持 Silverlight、Asp.Net 和任何其他 .Net UI 技术。

由于支持 Silverlight，所有调用都必须是异步的。

使用 Silverlight，我可以在 client.Method() 调用服务后立即调用 CloseAsync()。

但是，我发现这不适用于 Asp.Net 客户端。

我不想在完成的代码中使用 CloseAync()，因为如果正在进行多个异步调用，您可能会遇到时间问题。

我宁愿不必想出很多逻辑，比如在每个异步方法中放置一个 while 循环，以确保 CloseAsync() 没有被调用和完成。

现在我正在测试已完成的部分中使用 Abort 并且一切似乎都工作正常。

只是好奇是否有其他人知道我们在使用 Abort 时可能遇到的任何问题？

谢谢。

我们正在使用.Net 4.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:27:20.943

这取决于您使用的绑定。如果您正在使用使用会话的绑定，则调用 Close[Async] 将尝试首先关闭该会话（例如，具有可靠消息传递的 WSHttpBinding），然后关闭连接，否则它将在服务器端保持活动状态直到它计时出去。如果您使用的是不使用会话的绑定（即 BasicHttpBinding），那么它们几乎是等价的。

# scala - 如何从命令行将 Scala 升级到更新版本？

> ID：14613843
> 
> 赞同：11
> 
> 时间：2013-01-30T21:10:10.780
> 
> 标签：scala, sbt

是否可以通过 sbt / 其他命令行工具升级已安装的 Scala 版本？

我确定有办法，但是快速搜索后我找不到任何方法，我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T21:26:02.170

每个 SBT 项目都指定了用于编译和运行其代码的 Scala 版本。它默认为 SBT 内部使用的 Scala 版本，但始终是可覆盖的。

例如

```
 scalaVersion := "2.10.0" 
```

正如 Connor Doyle 所提到的，如果你的操作系统有一个包含 Scala 的包系统（我知道一些 Linux 发行版有），并且由于某种原因你有义务使用它，那么你几乎可以在他们的怜悯下提供一个新版本及时的依据。[Scala 网站](http://www.scala-lang.org/)（在[此处下载](http://www.scala-lang.org/downloads)）为他们制作的每个版本提供各种安装程序和 tarball/Zip 存档。

Mac OS X 用户可以使用[HomeBrew](http://mxcl.github.com/homebrew/)获得最新的 SBT 和 Scala。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-19T12:32:38.723

从命令行临时设置项目版本：

```
++ 2.10.4 
```

要从命令行永久设置项目版本：

```
set scalaVersion := "2.10.4"
session save 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-20T21:06:59.217

我刚刚执行了一个命令行“homebrew remove scala;homebrew install scala”来更新到最新版本。这还不够吗？

我还找到了这个链接（[http://wkmacura.tumblr.com/post/11577309978/installing-specific-versions-with-homebrew](http://wkmacura.tumblr.com/post/11577309978/installing-specific-versions-with-homebrew)），希望它对你有用。

# php - 如何检查表中的密码是否已更新

> ID：14613844
> 
> 赞同：0
> 
> 时间：2013-01-30T21:10:13.550
> 
> 标签：php, mysql, mysqli

我在 php 中编写了一个脚本来重置用户的密码，如何检查表中的密码是否已更新？

例如，如果元组/列中的数据已更改，则发送电子邮件。请检查脚本中的注释。

```
 $dbcc = mysqli_connect(HOST,NAME,PASSWORD,DATABASE) or die('Error can not connect to database');

 $query = "SELECT uid,email FROM `corporate` WHERE (email='$chk_email')";
 $result = mysqli_query($dbc, $query);

 //found
 if(@mysqli_num_rows($result) == 1)
 {
                    $ROW = mysqli_fetch_array($result);
                    $sent_email = $ROW['email']; //get email
                    $id = $ROW['uid'];           //get uid

                    $new_password = generatePassword(8);//generates 8 char long random password 
                    $enc_password = md5($new_password); //encrypt

                    $statement = "UPDATE corpoorate SET password=".$enc_password." WHERE uid ='$id'";
                    $go = mysqli_query($dbcc,$statement) or die(mysqli_error());
                    mysqli_close($dbcc);

                       /*
                        * HOW DO I CHECK IF PASSWORD IS UPDATED IN THE DATABASE?
                        * IF IT IS, SEND EMAIL
                                                    * IF $go==true does not work!
                        **/
                    if($go==true){
                    $sendmessage = "We have generated a new password token for you.\n Your password is reset to ".$new_password." \n Please note that this password is not secure. Once you login, please reset your password.\n ";

                     mail($sent_email,'Password Reset',$sendmessage,'From: address@gmail.com');     
                                                                                    }                   

                     header("Location : http://limozoor.com/login/signin.php");
                     exit();    
        }//if
        mysqli_close($dbcc); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:53:54.010

你为什么不使用`mysqli_affected_rows`？

```
 // remove: $go = mysqli_query($dbcc,$statement) or die(mysqli_error());
 $qry =@ mysqli_query($dbcc, $statement);
 $aff =@ mysqli_affected_rows($dbcc);
 if ($qry === true && $aff > 0) {
      mail(...);
 } 
```

从手册；

**mysqli_查询**：

> 失败时返回 FALSE。对于成功的 SELECT、SHOW、DESCRIBE 或 EXPLAIN 查询，mysqli_query() 将返回一个 mysqli_result 对象。对于其他成功的查询，mysqli_query() 将返回 TRUE。

**mysqli_affected_rows**：

> 大于零的整数表示受影响或检索的行数。零表示没有为 UPDATE 语句更新的记录、没有与查询中的 WHERE 子句匹配的行或尚未执行查询。-1 表示查询返回错误。

[http://php.net/manual/en/mysqli.affected-rows.php](http://php.net/manual/en/mysqli.affected-rows.php)
[http://php.net/manual/en/mysqli.query.php](http://php.net/manual/en/mysqli.query.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T21:13:01.123

由于您的`or die(mysqli_error());`-condition，如果密码到达那些执行行，将始终在表中更新密码。

但是，我对您持怀疑态度，`if(@mysqli_num_rows($resultt) == 1)`因为如果您的第一个 SQL 查询中有任何错误，您将在那里（通过使用`@`）抑制所有错误消息，这让我认为您甚至从未尝试执行 UPDATE 语句。

# c# - 尝试在中继器中使用 String.Format 但出现语法错误

> ID：14613854
> 
> 赞同：1
> 
> 时间：2013-01-30T21:11:11.067
> 
> 标签：c#, asp.net, data-binding, repeater, string.format

我不明白我对这段代码做错了什么。我认为这可能与（`"`或`'`）有关

```
<asp:TextBox ID="txtPassportNumber" runat="server" MaxLength="19"
    Text="<%#  String.Format('{0}{1}','######',((TSAPassenger) Container.DataItem).Passport.DocumentNumber.Text.Remove(0,6)) %>"
    Enabled="<%# IsOutsideTenDayCutoff %>"></asp:TextBox> 
```

**我收到太多字符错误**

切换到：

```
 <asp:TextBox ID="txtPassportNumber" runat="server"
     Text="<%#  String.Format("{0}{1}","######",((TSAPassenger) Container.DataItem).Passport.DocumentNumber.Text.Remove(0,6)) %>"
     Enabled="<%# IsOutsideTenDayCutoff %>"></asp:TextBox> 
```

并得到这个错误：

**解析器错误消息：服务器标记格式不正确。**

得益于良好的帮助，最终代码有效：

```
Text='<%# (((TSAPassenger) Container.DataItem).Passport.DocumentNumber != null &&  ((TSAPassenger) Container.DataItem).Passport.DocumentNumber != "") ? "******" + ((TSAPassenger) Container.DataItem).Passport.DocumentNumber.ToString().Remove(0,6) : "" %>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:28:58.610

您需要确保对`Text`属性使用单引号，例如`Text='yourstuff'`.

然后在您的绑定语句中使用双引号。绑定中的代码必须是 vanilla c#，如果它不会在 .cs 文件中编译，它也不会内联编译，单引号表示 c# 中的字符，而不是字符串。

这有效：

```
<asp:TextBox ID="txtPassportNumber" runat="server"
    Text='<%# string.Format("{0}{1}", "######", ((TSAPassenger) Container.DataItem).Passport.DocumentNumber.Text.Remove(0,6)) %>'
    Enabled="<%# IsOutsideTenDayCutoff %>"></asp:TextBox> 
```

注意单引号和双引号。您应该能够按原样复制和粘贴它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:13:00.727

你应该使用双引号而不是单引号

```
<asp:TextBox ID="txtPassportNumber" runat="server" MaxLength="19" Text="<%#  String.Format("{0}{1}","######",((TSAPassenger) Container.DataItem).Passport.DocumentNumber.Text.Remove(0,6)) %>" Enabled="<%# IsOutsideTenDayCutoff %>"></asp:TextBox> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T21:13:51.990

您应该反转属性中`'`和`"`的用法。`Text`代替：

```
Text="<%#  String.Format('{0}{1}','######',((TSAPassenger) Container.DataItem).Passport.DocumentNumber.Text.Remove(0,6)) %>" 
```

采用：

```
Text='<%#  String.Format("{0}{1}","######",((TSAPassenger) Container.DataItem).Passport.DocumentNumber.Text.Remove(0,6)) %>' 
```

您必须在标签之间提供有效的`C#`语法。并且都在语法上无效，因为只能包含s ( ，等等)。`<%# ... %>``'"{0}{1}"'``'######'``C#``''``char``'a'``'0'`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T21:14:17.400

您不能使用`'`. 您现在正在做的是尝试创建一个不可行的多字符字符。

尝试将其更改为：

```
Text='<%#  String.Format("{0}{1}","######",((TSAPassenger) Container.DataItem).Passport.DocumentNumber.Text.Remove(0,6)) %>' 
```

# excel - Excel VBA：无法将我的函数粘贴到单元格中

> ID：14613855
> 
> 赞同：1
> 
> 时间：2013-01-30T21:11:12.830
> 
> 标签：excel, excel-formula, vba

我正在尝试粘贴

```
=IF(AND(C4-C3<($I$1/1000),A4=A3),"OOOO","-----") 
```

进入一个单元格，我通过

```
 Range("I3").Select
 ActiveCell.FormulaR1C1 = "=IF(AND(C4-C3<($I$1/1000),A4=A3)," & Chr(34) & "OOOO" & Chr(34) & "," & Chr(34) & "-----" & Chr(34) & ")"
 Range("I3").Select 
```

返回运行时错误“1004”应用程序定义或对象定义错误

我已经尝试过双引号并看到 & Chr(34) & 解决方法并尝试过。没有任何效果。此外，一些简单的事情

```
 ActiveCell.FormulaR1C1 = "=IF(" 
```

不起作用，但是

```
 ActiveCell.FormulaR1C1 = "=IF" 
```

做。

奇怪的是，这在代码中有效

```
Range("C3").Select
ActiveCell.FormulaR1C1 = "=MID(B3,1,2)*3600+MID(B3,4,2)*60+MID(B3,7,9)"
Range("C3").Select 
```

我之前做的。如果我将 "=MID(B3,1,2)*3600+MID(B3,4,2)*60+MID(B3,7,9)" （而不是我尝试使用的字符串）粘贴到调试时出现问题代码并点击继续，它将粘贴该行，因此在两个语句之间不会发生任何事情。只有一些选择和复制/粘贴之间会发生什么，但如果你想看的话，我还是会把它包括在这里

```
 Range("C3").Select
  ActiveCell.FormulaR1C1 = "=MID(B3,1,2)*3600+MID(B3,4,2)*60+MID(B3,7,9)"
Range("C3").Select
Selection.Copy
Range("D3").Select
Selection.End(xlDown).Select
ActiveSheet.Paste
Range("K3:Z4").Select
Application.CutCopyMode = False
Selection.Copy
Range("K1").Select
ActiveSheet.Paste
Columns("H:H").Select
Application.CutCopyMode = False
Selection.Cut
Columns("M:M").Select
ActiveSheet.Paste
Columns("I:I").Select
Selection.Cut
Columns("H:H").Select
ActiveSheet.Paste
Range("I3").Select
ActiveCell.FormulaR1C1 = "=IF(AND(C4-C3<($I$1/1000),A4=A3)," & Chr(34) & "OOOO" & Chr(34) & "," & Chr(34) & "-----" & Chr(34) & ")"
Range("I3").Select 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T22:41:34.973

**快速回答：**

您需要将公式更改为 R1C1 样式 - 或者更简单，将公式分配给`.Formula`而不是`.FormulaR1C1`属性。

**更长的解释：**

Excel 有两种引用单元格的方式：

1.  默认的*A1*表示法，您通过提供列字母和行号来引用单元格 - 并通过前缀 a 将其固定为行或列`$`。
2.  R1C1表示法，通过指定单元格的行和行号以及列和列号来*引用*单元格。如果数字在括号中提供，则引用是相对的，没有括号是绝对的。要使用此表示法，您需要在 Excel 选项（在公式下）中设置它`R``C``[]`

*R1C1*表示法的优点是相对引用在应用于多个单元格时*不会改变！*例如，`=A1+B1`在 C1 中输入的 A1 公式将是`=RC[-2]+RC[-1]`。如果现在将公式复制到 C 列下，则行号将在*A1*样式中的每一行中更改（例如`=A2+B2`、`=A3+B3`等）。在*R1C1*表示法中，它是完全相同的公式，没有任何变化。

在普通的 Excel 用户界面中，这无关紧要，只是一个偏好问题，因为只要您使用`$`.*正确修复绝对引用，Excel 就会自动调整公式

但是，如果您想搜索和替换引用，它在宏中变得更加有用！想象在上面的例子中，你想把公式从 更改`=A1+B1`为`=A1+A2`- 在任何地方使用这个公式。在*A1*中，您不能简单地用 A2 搜索和替换 B1，因为 B1 将变为 B2、B3 等等。但是，在*R1C1*`RC[-1]`中，您只需重新使用即可`R[1]C`。

出于这个原因，Excel 宏记录器还会记录*R1C1*中的公式- 无论您将其应用到何处，它都是相同的公式！但是，每个`Range`都有一个`.Formula`和 一个`FormulaR1C1`您可以设置的属性 - 另一个属性将相应地更新。因此，请使用适合您需要的任何样式。

在您的情况下，如果您打算将*R1C1*公式也用于 I3 以外的其他单元格，则它是有意义的。

*A1*：

```
Range("I3").Formula = "=IF(AND(C4-C3<($I$1/1000),A4=A3),""OOOO"",""-----"")"
Range("J4").Formula = "=IF(AND(D5-D4<($I$1/1000),B5=B4),""OOOO"",""-----"")"
```

*R1C1*：

```
strFormula = "=IF(AND(R[1]C[-6]-RC[-6]<(R1C9/1000),R[1]C[-8]=RC[-8]),""OOOO "",""-----"")"
范围（“I3”）.FormulaR1C1 = strFormula
范围（“J4”）.FormulaR1C1 = strFormula
```

！

( * 有趣的边节点：在 Excel 的第一个版本中，Microsoft 使用*R1C1*作为默认符号，因为它在多个方面优于*A1*。但是，由于当时 Lotus 1-2-3 是标准并且*A1*已经被接受作为规范，它在以后的版本中恢复了这种表示法。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:21:57.977

您的问题是使用`.FormulaR1C1`而不是使用**R1C1**样式的公式。

如果您查看电子表格，您会看到 C3 包含

```
=MID('B3',1,2)*3600+MID('B3',4,2)*60+MID('B3',7,9)
```

因为它翻译了你对字符串的引用，而 reeor 指的是它试图用它不理解的公式引用一个单元格。

要使用 B3（和 C3，以及其他），您需要使用`.Formula`：

```
ActiveCell.Formula = "=MID(B3,1,2)*3600+MID(B3,4,2)*60+MID(B3,7,9)"
ActiveCell.Formula = "=IF(AND(C4-C3<($I$1/1000),A4=A3)," & Chr(34) & "OOOO" & Chr(34) & "," & Chr(34) & "-----" & Chr(34) & ")" 
```

# c++ - 如何为我的 3d 曲线添加可变性 - openGL / C++ 中的球坐标

> ID：14613857
> 
> 赞同：0
> 
> 时间：2013-01-30T21:11:21.713
> 
> 标签：c++, math, opengl

使用球坐标，我在球体表面周围画了一条弧线。这是我的代码：

```
 int goose1a_egg1_step = 0; // THIS IS INCREMENTED EACH FRAME
    float goose1a_egg1_theta=7.5; // START THETA
    float goose1a_egg1_phi=4; // START PHI
    float goose1a_egg1_theta_increment = 1.5/goose1a_egg1_divider; // END THETA = 6
    float goose1a_egg1_phi_increment = 3/goose1a_egg1_divider; // END PHI = 1

    float goose1a_egg1_theta_math1 = (goose1a_egg1_theta-(goose1a_egg1_theta_increment* r_goose1a_egg1_step))/10.0*M_PI;
    float goose1a_egg1_phi_math1 = (goose1a_egg1_phi-(goose1a_egg1_phi_increment* r_goose1a_egg1_step))/10.0*2*M_PI;
    r_goose1a_egg1_x = radius_egg_pos * sin(goose1a_egg1_theta_math1) * cos(goose1a_egg1_phi_math1);
    r_goose1a_egg1_y = radius_egg_pos * sin(goose1a_egg1_theta_math1) * sin(goose1a_egg1_phi_math1);
    r_goose1a_egg1_z = radius_egg_pos * cos(goose1a_egg1_theta_math1);  

    glPushMatrix();
    glTranslatef(r_goose1a_egg1_x,r_goose1a_egg1_y,r_goose1a_egg1_z);
    glColor3f (1, 1, .8);
    glutSolidSphere (0.02,5,5);
    glEnd();
    glPopMatrix(); 
```

我想画一条额外的弧线，它具有相同的 START 和 END 位置。关键是，与其让第二个弧线遵循与第一个完全相同的轨迹，我可以调整我的数学以使弧线存在可变性吗？例如，第二条弧线的运行路径与第一条弧线略有不同。就像两个航班离开 DFW 前往 JFK，但路线略有不同。

第二个弧的代码如下（注意：两者之间的唯一区别是“goose1a”和“goose1b” - 我不想在这里添加一堆杂乱无章的东西，其中我是随机将随机变量乘以随机整数:/)

```
 int goose1b_egg1_step = 0; // THIS IS INCREMENTED EACH FRAME
    float goose1b_egg1_theta=7.5; // START THETA
    float goose1b_egg1_phi=4; // START PHI
    float goose1b_egg1_theta_increment = 1.5/goose1b_egg1_divider; // END THETA = 6
    float goose1b_egg1_phi_increment = 3/goose1b_egg1_divider; // END PHI = 1

    float goose1b_egg1_theta_math1 = (goose1b_egg1_theta-(goose1b_egg1_theta_increment* r_goose1b_egg1_step))/10.0*M_PI;
    float goose1b_egg1_phi_math1 = (goose1b_egg1_phi-(goose1b_egg1_phi_increment* r_goose1b_egg1_step))/10.0*2*M_PI;
    r_goose1b_egg1_x = radius_egg_pos * sin(goose1b_egg1_theta_math1) * cos(goose1b_egg1_phi_math1);
    r_goose1b_egg1_y = radius_egg_pos * sin(goose1b_egg1_theta_math1) * sin(goose1b_egg1_phi_math1);
    r_goose1b_egg1_z = radius_egg_pos * cos(goose1b_egg1_theta_math1);  

    glPushMatrix();
    glTranslatef(r_goose1b_egg1_x,r_goose1b_egg1_y,r_goose1b_egg1_z);
    glColor3f (1, 1, .8);
    glutSolidSphere (0.02,5,5);
    glEnd();
    glPopMatrix(); 
```

因为我对 3D 数学的理解太差了，我什至不确定是否有办法做到这一点？如果没有，我会为我的设计寻找替代解决方案。但是，如果可以使用球坐标绘制两条使用相同 START 和 END 位置的不同弧线，我们将不胜感激您的建议和指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:30:39.750

您可以尝试在球坐标中计算 B 样条。您将在每个端点放置两个结，并在中间有一个结，您可以左右推动（垂直于最短弧）以调整可变性。

我相信您正在计算从`A`到的最短弧`B`，除非这些点完全相反，否则只有一条最短的弧。因此，您需要在球形空间中使用曲线而不是直线。

* * *

采用不同的方法，请注意，连接球体表面上两个点的直接路径是球体与通过这两个点的平面之间的交点。如果您可以围绕这两个点之间形成的轴旋转该平面，则相交将为您提供替代弧。

诀窍是计算它们。阅读平面 - 球体相交。这个公式应该是一个椭圆形的部分，所以它可能不会太糟糕。那么你不需要球坐标。

# c++ - c ++将指针传递给函数

> ID：14613864
> 
> 赞同：1
> 
> 时间：2013-01-30T21:11:50.020
> 
> 标签：c++, function, pointers

我正在尝试在 C++ 中创建一个控制台应用程序，提示用户输入一个浮点数，然后获取该数字并分离出整数部分和小数部分。

示例输出为：-

请输入浮点数：
800.589
整数部分为 800，小数部分为 0.589

我的解决方案如下所示：

```
#include <iostream>
#include <cmath>
using namespace std;

void spliceAnyNumber (double anyNumber)
{
double integerPart = 1;
double fractionPart = 1;
double *pIntegerPart = &integerPart;
double *pFractionPart = &fractionPart;
fractionPart = fmod(anyNumber,1);
integerPart = anyNumber - fractionPart;
cout << "The integer part is " << *pIntegerPart << " and the fraction part is " << *pFractionPart << "\n";
cout << endl;
cout << "The address of *pIntegerPart is " << &integerPart << "\n";
cout << endl;
cout << "The address of *pFractionPart is " << &fractionPart << "\n";
cout << endl;
}

int main()
{   
cout << "Please enter a floating point number: ";
double anyNumber = 0;
cin >> anyNumber;
cout << endl;    
spliceAnyNumber(anyNumber);
system("Pause");
return 0;   
} 
```

我编写了程序，但我也被要求将指针传递给函数并操作取消引用的值。我试图在下面这样做，但我从编译器那里得到了一堆错误。

```
#include <iostream>
#include <cmath>
using namespace std;

void spliceAnyNumber (double *pAnyNumber)
{
double integerPart = 1;
double fractionPart = 1;
double *pIntegerPart = &integerPart;
double *pFractionPart = &fractionPart;
&fractionPart = fmod(&anyNumber,1);
&integerPart = &anyNumber - &fractionPart;
cout << "The integer part is " << *pIntegerPart << " and the fraction part is " <<     *pFractionPart << "\n"; *pFractionPart << "\n";
cout << endl;
cout << "The address of *pIntegerPart is " << &integerPart << "\n";
cout << endl;
cout << "The address of *pFractionPart is " << &fractionPart << "\n";
cout << endl;
}

int main()
{   
cout << "Please enter a floating point number: ";
double *pAnyNumber = &anyNumber;
cin >> *pAnyNumber;
cout << endl;    
spliceAnyNumber(*pAnyNumber);
system("Pause");
return 0;   
} 
```

添加指针我哪里出错了？版本 1 有效，但版本 2 无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:21:27.007

我已经在内联注释了这个。

```
#include <iostream>
#include <cmath>
using namespace std;

void spliceAnyNumber (double *pAnyNumber)
{
  double integerPart = 1;
  double fractionPart = 1;
  double *pIntegerPart = &integerPart;
  double *pFractionPart = &fractionPart;
  &fractionPart = fmod(&anyNumber,1);  // <- you should dereference pAnyNumber instead, and assign to fractionPart (i.e. "fractionPart = fmod(*pAnyNymber, 1);
  &integerPart = &anyNumber - &fractionPart;  // <- similar as above
  cout << "The integer part is " << *pIntegerPart << " and the fraction part is " <<     *pFractionPart << "\n"; *pFractionPart << "\n";
  cout << endl;
  cout << "The address of *pIntegerPart is " << &integerPart << "\n";
  cout << endl;
  cout << "The address of *pFractionPart is " << &fractionPart << "\n";
  cout << endl;
}

int main()
{   
  cout << "Please enter a floating point number: ";
  double *pAnyNumber = &anyNumber;  // <- you haven't declared an 'anyNumber' variable to take the address of
  cin >> *pAnyNumber;
  cout << endl;    
  spliceAnyNumber(*pAnyNumber);
  system("Pause");
  return 0;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:23:09.083

我假设你写的时候`anyNumber`实际上是指`pAnyNumber`. 如果你有指针

```
double* p; 
```

你取消引用`*p`，不是`&p`。前者给你一段`double`时间，后者给你一个`double**`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:19:05.100

您必须先声明`anyNumber`，然后才能取消引用它：

```
double *pAnyNumber = &anyNumber; // references an undeclared variable 
```

只需在传递给函数时获取地址。在此之前，您可以使用普通变量 - 不需要指针：

```
double anyNumber;
cin >> anyNumber;
cout << endl;
spliceAnyNumber(&anyNumber); 
```

此外，您在函数中使用了错误的运算符。它应该是这样的：

```
*pFractionPart = fmod(*pAnyNumber,1);
*pIntegerPart = *pAnyNumber - fractionPart; 
```

另一件事是无效的语法：`&variable = ...`字面意思是“变量地址 = ”，结果是`double**`.

所以你必须做的唯一改变是函数参数，并访问它。函数内不需要所有这些指针..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T21:21:04.373

运算符获取变量的`&`地址，因此`typeof(&anyNumber) == double**`. 您需要`*`运算符。

您应该读`double *pAnyNumber`作“当我应用`*`运算符时，我得到一个`double`”。（你实际上得到了一个左值引用，但这并没有说出来，可能会让你感到困惑......）

你的`main`功能一团糟；保持与原来相同并更改`spliceAnyNumber(pAnyNumber);`为`spliceAnyNumber(&pAnyNumber);`.

# python - 使用 for 循环但忽略第一项？

> ID：14613865
> 
> 赞同：1
> 
> 时间：2013-01-30T21:11:50.927
> 
> 标签：python, for-loop, character-encoding

我有一个小问题。我在 Python 中有这段代码（取自一个更大的脚本）：

```
for line in open(trainFile):
  for token,tag in [x.rsplit('/',1) for x in line.split()]:
    tokenTagCount[(token,tag)] += 1
    tags[tag] += 1
    listOfTags.append(tag) 
```

trainFile 包含丹麦语的单词和标签，但这不是问题。问题是这样的：因为文件是丹麦语，我必须`# -*- coding: cp1252 -*-`在第一行包含才能正确显示 Python 中的字符。但是，我的 for 循环（“for line in open...”）应该忽略关于编码的第一行，并从 trainFile 的第二行开始运行，实际数据从这里开始。我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T21:14:39.940

这是您可以跳过第一行的方法：

```
with open(trainFile) as f:
    next(f)  # discard the first line
    for line in f:
        # deal with the rest. 
```

更好的选择可能是跳过以 开头的行`#`：

```
with open(trainFile) as f:
    for line in f:
        if line.startswith('#'):
            continue
        # deal with the rest. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T21:13:17.417

```
f=open(trainFile)
f.readline()
for line in f.readlines():
     ........ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T21:19:40.167

您可以在从文件中读取这些行时枚举它们。例如：

```
for i, line in enumerate(open(trainFile)):
    if i != 0:
        # do stuff 
```

# jquery - 停止 .animate()

> ID：14613868
> 
> 赞同：1
> 
> 时间：2013-01-30T21:11:57.277
> 
> 标签：jquery, css, jquery-animate

我正在努力做到这一点，以便在`3072px`按钮处停止将 img 向右移动。我想我需要`if`在我的动画按钮中添加一个声明。是对的吗？

```
$(document).ready( function() {
    $('a.click').click(function() {
        $('img').animate({right : '+=1024'} , 'slow' );
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:28:07.430

```
$(document).ready(function () {
    var $a = $('a.click');
    $a.on('click', function () {
        $('img').animate({
            right: '+=1024'
        }, {
            step: function (now, fx) {
                if (now >= 3072) {
                    $(fx.elem).stop();
                    // $a.off('click');
                }
            }
        });
    });
}); 
```

[http://jsfiddle.net/82mWF/](http://jsfiddle.net/82mWF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:24:39.033

使用该`step`选项可为您提供强大的动画控制：

```
$('a.click').click(function()
{
    var $img = $('img');
    $img.animate({right: '+=1024'},
    {
       duration:'slow',
       step:function() { if ($img.offset().left + $img.width() >= 3072) $(this).stop(); }
    }
}); 
```

您可以将此方法扩展为检查窗口的边界，或另一个元素，或在动画进行时可能更改的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:15:30.023

如果我的问题是正确的，那么这样的事情应该没问题。

```
$('a.click').click(function() {
    var $img = $('img');
    if ($img.css('right') <= (3072 - 1024)) {
        $img.animate({right : '+=1024'} , 'slow' );
    }
}); 
```

`.css('right')`用于获取`right`CSS 属性的计算值。另外，`$img`用于缓存jQuery对象，避免查询`DOM`两次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T21:16:15.390

在您的点击处理程序中，首先计算当前右 和 之间的差异`3072`，如果它大于`1024`，那么您使用 动画`+=1024`，如果不是，您只需执行 += 无论差异是什么。

就像是：

```
$('a.click').click(function() {
        var $img = $('img');
        var delta = 3072 - $img.css('right');
        var anim = delta > 1024 ? 1024 : delta;
        $img.animate({right : '+=' + anim} , 'slow' );
    }
}); 
```

# java - 在 Android 上保存文件

> ID：14613870
> 
> 赞同：1
> 
> 时间：2013-01-30T21:12:00.540
> 
> 标签：java, android

我敢肯定这已经被问了数百次，但我就是无法为自己指明正确的方向。

我正在开发一个应用程序，该应用程序在第一次启动后生成一个类的实例，该实例接受并保存用户输入。在第一次启动之后，在每次连续启动时，我都想读取同一个实例，或者至少将之前的相同数据加载到一个新实例中。我该怎么做呢？

据我了解，我需要将其保存在内部存储上生成的文件中，但我不太确定。数据应该随着时间的推移而扩展，所以我不确定数据会变成多大。

感谢您的任何帮助。

编辑：我想我会更多地扩展我需要的东西......

基本上，我正在开发一个小型机器人，它接受用户输入并将其保存在它的“大脑”中。我需要做的就是将这个“大脑”保存到一个文件中，这样每次启动应用程序时，都会加载这个“大脑”。用户输入将只是字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:15:14.043

您可以使用 Android [SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)类来执行此操作，这是在启动之间保存设置的一种方式。

```
SharedPreferences appSettings = this.getSharedPreferences("fileName", 0);
SharedPreferences.Editor = appSettings.edit;

appSettings_Edit.putString("saveme", "this will be saved"); //First Parameter, name of the value, second parameter, value of the name
appSettings_Edit.commit(); //This is called to commit the changes to memory.

//This can be called anytime after `commit()`, including in any sequential launches, and it will return the vale of whatever you set.
appSettings.getString("saveme"); 
```

如果要保存实际`file`文件，可以使用 BufferedWriter 在系统上创建一些硬文件：

```
BufferedWriter out = new BufferedWriter(new FileWriter(new File(fileName)));
out.write("I am a line of text written in" + fileName);
out.close(); 
```

然后，您可以使用 BufferedReader 检索文件的内容：

```
List<String> SomeStringListArray = new ArrayList<String>();
BufferedReader in = new BufferedReader(new FileReader(new File(fileName)));
String s;
while ((s = in.readLine()) != null) {
    SomeStringListArray.add(s);
}
in.close(); 
```

您还可以在 Android 缓存目录中创建此文件，以便只有您的文件可以访问它，文件名的路径来自：

```
this.getChachDir();
this.getExternalCacheDir(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:15:05.093

这在一定程度上取决于您收集的数据类型，但总的来说，使用[SQLite](http://developer.android.com/guide/topics/data/data-storage.html#db)数据库将满足大多数需求。

如果只是用户可以更改的几个值，那么[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:15:10.093

如果要保存的对象实现了 Serializable 接口，则可以使用序列化来保存文件。如果您需要代码示例，请告诉我。这是最简单的方法之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T21:15:16.123

保存到文件中是一种可能性，但如果数据仅由您的应用程序使用，您可能需要考虑其他选项......

如果数据很小，您可以使用[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html).

对于较大的数据，您可以使用[`database`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html).

[此处](http://developer.android.com/guide/topics/data/data-storage.html)解释了您拥有的不同选项（带有一些示例）。

# java - 优化拖拽代码

> ID：14613871
> 
> 赞同：0
> 
> 时间：2013-01-30T21:12:01.613
> 
> 标签：java, swing, mouseevent, draggable

所以我在[这里](http://www.coderanch.com/t/391284/java/java/dragging-jpanel)找到了这段代码，它可以工作，它只是在拖动时在图像中引起相当多的抖动 - （拖动的速度越快，图像抖动越多）。OP说它没有优化，因为它是一个死帖，我想我会看看这里是否有人可以提供帮助！我也尝试过[stack](https://stackoverflow.com/questions/3740141/dragging-jpanel)中的代码，但我无法让它做任何事情。如果有人对此代码有任何建议，或者更好的解决方案，我很想听听！

注意，我需要拖动的 Jpanel（paintComponent 绘制对象）位于滚动窗格内！

```
 //initial reference point  
   private Point mouseLocation;  
   public void mousePressed(MouseEvent evt){  
      mouseLocation = evt.getPoint();  
   }  
   public void mouseDragged(MouseEvent evt){  
      //current mouse location  
      Point newLoc = evt.getPoint();  
      //deltas  
      int deltaX = newLoc.x-mouseLocation.x;  
      int deltaY = newLoc.y-mouseLocation.y;  
      p.setLocation(p.getX()+deltaX,p.getY()+deltaY);  
      //move the reference point to the current location  
      this.mouseLocation = newLoc;  
   } 
```

[这](http://jsfiddle.net/xb4Uf/)是一个显示抖动的示例程序！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:42:13.803

> 所以我在这里找到了这段代码，它有效，只是引起了很多颤抖

然后我会说它不起作用。而且，如果您仔细阅读该帖子，则 OP 还声明它不起作用。

此外，按钮并没有严格跟随鼠标，所以在我看来这很可怕。

现在，需要考虑两件事：

1.  您正在使用`evt.getPoint()`：该方法的值是相对于`JButton`. 当您四处移动`JButton`时，您无法将该方法的值与前一个方法的值进行比较（因为您的按钮正在移动）。一种简单的解决方案是将这些点相对于固定面板转换为固定面板，例如不移动的父面板。Tadaam：它现在运行流畅，按钮完美地跟随你的鼠标。
2.  当您使用 LayoutManager 时，您不能调用`setLocation`（也不能调用 setBounds 或 setSize()），因为这是 LayoutManager 的工作，一旦他们重新布局您的容器，按钮就会被设置回其原始位置（即我猜你不想要）。有几种方法可以解决这个问题，但通常最简单的一种是使用绝对定位（即，将布局设置为`null`）。最后，这意味着您必须执行 LayoutManager 之前所做的任何事情。

这是一个小演示（有缺陷，但演示了基本原理）：

```
import java.awt.Component;
import java.awt.Point;

import javax.swing.SwingUtilities;

/**
 * 
 * @author Stuart.Bradley
 */
public class NewJFrame extends javax.swing.JFrame {
    private Point mouseLocation;

    /**
     * Creates new form NewJFrame
     */
    public NewJFrame() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form. WARNING: Do NOT modify this code. The content of this
     * method is always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {
        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jButton1.setText("jButton1");
        jButton1.addMouseListener(new java.awt.event.MouseAdapter() {
            @Override
            public void mousePressed(java.awt.event.MouseEvent evt) {
                jButton1MousePressed(evt);
            }
        });
        jButton1.addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
            @Override
            public void mouseDragged(java.awt.event.MouseEvent evt) {
                jButton1MouseDragged(evt);
            }
        });
        setLayout(null);
        jButton1.setSize(jButton1.getPreferredSize());
        add(jButton1);
        setSize(300, 300);
    }// </editor-fold>

    private void jButton1MouseDragged(java.awt.event.MouseEvent evt) {
        // current mouse location
        Point newLoc = SwingUtilities.convertPoint(evt.getComponent(), evt.getPoint(), jButton1.getParent());
        // deltas
        int deltaX = newLoc.x - mouseLocation.x;
        int deltaY = newLoc.y - mouseLocation.y;
        jButton1.setLocation(jButton1.getX() + deltaX, jButton1.getY() + deltaY);
        // move the reference point to the current location
        this.mouseLocation = newLoc; // TODO add your handling code here:
    }

    private void jButton1MousePressed(java.awt.event.MouseEvent evt) {
        mouseLocation = SwingUtilities.convertPoint(evt.getComponent(), evt.getPoint(), jButton1.getParent()); // TODO add your
    }

    /**
     * @param args
     *            the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        // <editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        // </editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    // End of variables declaration
} 
```

# javascript - Javascript Date Format - Displaying month as xx

> ID：14613883
> 
> 赞同：0
> 
> 时间：2013-01-30T21:12:25.953
> 
> 标签：javascript

How can the below code be modified such that the date will appear as: 30/01/2013 as opposed to its current state of: 30/1/2013?

```
var d = new Date();
var xdate = [d.getDate(), d.getMonth()+1, d.getFullYear()].join('/'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:20:57.643

Here's a short (left) padding function:

```
function zeroPad(nr,base,chr){
    var  len = (String(base||10).length - String(nr).length)+1;
    return len > 0? new Array(len).join(chr||'0')+nr : nr;
}
//usage
zeroPad(2);          //=> '02'
zeroPad(22);         //=> '22'
zeroPad(22,100);     //=> '022'
zeroPad(22,100,'x'); //=> 'x22' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:16:19.547

I use this general-purpose pad function:

```
function pad(input,char,width,onleft) {
    input = ""+input;
    var add = new Array(input.length-width+1).join(char);
    if( onleft) return add+input;
    else return input+add;
} 
```

Applied to your code, it would be:

```
var d = new Date();
var xdate = [d.getDate(), pad(d.getMonth()+1,"0",2,true), d.getFullYear()].join("/"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T21:16:42.837

```
var xdate = [d.getDate(), ('0' + (d.getMonth()+1)).slice(-2), d.getFullYear()].join('/'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T21:18:26.037

Try:

```
var d = new Date(),
    m = d.getMonth()+1,
    xdate = [d.getDate(), (m < 10) ? '0' + m : m, d.getFullYear()].join('/'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T21:20:59.833

I'd like to recommend you a mega library [moment.js](http://momentjs.com/) it's easy and fast.

```
moment().format("YYYY-MM-DD") 
```

result is "2013-01-30"

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T21:17:20.187

There are a few ways you could do this by checking if the month is < 10 and then add the 0, I am not a fan of that though, when working with date times in Javascript I find [http://blog.stevenlevithan.com/archives/date-time-format](http://blog.stevenlevithan.com/archives/date-time-format) this is a great library that handles formatting perfectly

# node.js - 没有回调的猫鼬更新

> ID：14613890
> 
> 赞同：14
> 
> 时间：2013-01-30T21:12:38.210
> 
> 标签：node.js, mongodb, express, mongoose

我有一个典型的模式和模型：

```
var mongoose = require('mongoose');

var userSchema = new mongoose.Schema({
    email: String,
    password: String,
    profile: {
        name: String,
        surname: String,
        photo: String
    },
    stats: {
        lastLogin: { type: Date, default: Date.now },
        loginCount: Number,
        lastIP: String
    },
    source: String,
    deleted: Boolean,
    dateCreated: { type: Date, default: Date.now }
});

mongoose.model('User', userSchema); 
```

当我执行此更新时，它仅在我定义回调时才有效，否则它只会执行但数据库中的值不会更改：

```
User.update({email:'foo@bar.com'}, {$inc: {'stats.loginCount': 1}}); 
```

这有效：

```
User.update({email:'foo@bar.com'}, {$inc: {'stats.loginCount': 1}}, function() {}); 
```

这是一个错误吗？如果需要回调，我没有在文档中看到，但是要求这个很奇怪……我想我在这里遗漏了一些东西。

注意：我正在通过电子邮件匹配测试建议，我在 NodeJS v0.8.17 中使用猫鼬 v3.5.4 和简单的 Express v3.0.6 设置。

提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-30T21:23:55.520

使用 mongoose调用的正确方法`update`如下：

```
User.update(query, update).exec(callback); 
```

这样你就可以跳过`callback`：

```
User.update(query, update).exec(); 
```

当你打电话时

```
User.update(query, update) 
```

它返回一个[查询对象](http://mongoosejs.com/docs/api.html#query-js)。

它在查询数据库时非常有用，因为您可以在执行查询对象之前对其进行操作。例如，您可以[`limit`](http://mongoosejs.com/docs/api.html#query_Query-limit)为`find`查询指定 a：

```
User.find(query).limit(12).exec(callback); 
```

`Update`使用相同的机制，尽管它在那里不是那么有用。

# postgresql - 写我自己的全文

> ID：14613893
> 
> 赞同：1
> 
> 时间：2013-01-30T21:12:47.847
> 
> 标签：postgresql, plpgsql

一段时间以来，我一直在玩弄全文的想法，尽管我已经完成了所有的阅读和实验，但我仍然觉得我有很多东西要了解它的优点/缺点和一般实用性。

对于很多事情来说，它似乎工作得非常好，但是我最近遇到的一个主要障碍是在涉及真实的人名时 - 简单地说，它在涉及撇号、特殊字符、重音和类似。所以我硬着头皮决定尝试编写自己的触发函数来更新我希望索引的“搜索”字段。

首先，当搜索像 Bjorn 这样的名字时，问题就出现了，当你也可以有一个 Bjørn 或 Björn 时，那么 - 或者 O'Leary 怎么样，全文将这个词分成两部分。如果有人键入没有撇号的名称怎么办？等等。

为了解决这个问题，我目前的努力如下：

```
CREATE OR REPLACE FUNCTION quote_insert() RETURNS TRIGGER AS $$
DECLARE
  --Set to lowercase and convert any strange vowels or accents to ascii (no Bjørn's, José's etc)
  myString text := to_ascii(convert_to(lower(NEW."name"),'latin1'),'latin1');
  nwString text := '';
  --Split the words up by their spaces and put them in an array
  myArray  text[] := regexp_split_to_array(myString, E'\\s+');
  nArray   text[];
    --These are counters for the secondary array, and for the apostrophe placement
    n int := 0;
    p int;
BEGIN
  FOR i IN 1..array_upper(myArray,1) LOOP
    --If it has an apostrophe (hopefully only one!) split the words up like so: o'leary -> oleary o leary
    IF position('''' in myArray[i]) > 0 
    THEN
      nArray[n] = '''' || regexp_replace(myArray[i], '''', '') || ''':' || n+1 || ' ';
            n = n+1;
      p = position('''' in myArray[i]);
      nArray[n] = '''' || substring(myArray[i],0,p) || ''':' || n+1 || ' ';
      n = n+1;
      nArray[n] = '''' || substring(myArray[i],p+1,length(myArray[i])) || ''':' || n+1 || ' ';
      n = n+1;
    ELSE
      nArray[n] = '''' || myArray[i] || ''':' || n+1 || ' ';
      n = n+1;
    END IF;
  END LOOP;

  --Sort 'nArray' here..........
  --(not even sure if sorting alphabetically is important...)
  --............................

  --Turn the array back into a string
  FOR i IN 0..array_upper(nArray,1) LOOP
    nwString = nwString || nArray[i];
  END LOOP;
  --Set the search field to whatever string is generated
  NEW."search" = trim(nwString);
  RETURN NEW;
END
$$ LANGUAGE 'plpgsql'; 
```

我差点忘了，我之前添加了一个非常方便的自定义 to_ascii 脚本，这是我从另一个站点提取的 -

```
CREATE FUNCTION to_ascii(bytea, name)
RETURNS text STRICT AS 'to_ascii_encname' LANGUAGE internal; 
```

因此，我的脚本触发器生成的文本类似于全文，唯一的区别是我注意到它按字母顺序排列单词。我不知道是否有必要，或者这样做是否有效，但如果我必须这样做，那么欢迎提出关于排序的建议。

要比较此脚本的结果和全文，它将读取：

```
My query (firing trigger function):
INSERT INTO "table" ("name") VALUES ('Bjørn O''Leary') RETURNING "search";
[search]
'bjorn':1 'oleary':2 'o':3 'leary':4

Using fulltext:
SELECT to_tsvector('Bjørn & O''Leary & OLeary'); --Obviously using o'leary and oleary because of different sorting methods
[to_tsvector]
'bjørn':1 'leari':3 'o':2 'oleari':4 
```

如您所见，它并没有删除特殊的 ø 字符，显然我需要插入 OLeary 以获得类似的结果。

所以，要问问题：按字母顺序组织单词是否更好/必要/更快？

其次......我现在不想问这个问题，但是已经有一种全文方法来查询符合我的标准的名称，我只是不知道吗？

最后，真正令人头疼的是，我的名字分布在从单个表继承的多个表中。我可能会考虑向这个触发器添加一个插入/更新，以更新一个完全独立的“搜索”表。这是不是太过分了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:32:20.477

非常非常有趣！我一直在写一篇关于使用 PostgreSQL 进行名称搜索的博客文章，以尝试解决名称搜索中涉及的一些问题。
但是，我的半问题解决方案可能对您有用。让我们从以下技巧开始：

1.  如果搜索者输入了至少*两个名字*，很可能其中一个会很好（除非他们正在搜索*Bjørn O'Leary*），其中一个会“匹配”您的全文索引。之后，您可以使用诸如 Levenshtein 距离或其他字符串距离之类的工具以及许多巧妙的工作来正确排序结果。这需要您将搜索更改为对单词进行排序搜索，即*Bjørn | O'Leary*，这可能会导致数据库获取更多行以进行进一步处理，因此请注意..

2.  不仅如此，您还可以永久解决*Bjørn*案例：使用`unaccent`过滤字典！它会将其“转换”为“Bjorn”，并且仍然通过删除重音来解决许多其他常见的名称拼写错误！这是您的触发器试图修复的部分内容。

3.  如果这对你来说还不够，你当然可以使用*同义词词典*来处理特殊情况，通过插入一些*施瓦辛格*的同义词（如*Schwarznegger*和*Schwarzeneger*）和一些预处理来处理解析器是你的主要痛苦来源的情况，比如在*O'Leary*中（例如，预处理会从搜索字符串中删除撇号，就像您的触发器一样）。我确实认为同义词词典也可能很快成为维护痛苦的根源，但即使是一个小的词典也可能对名称搜索有很大帮助。

    *   注意：如果您不想要同义词词典，但如果您确实实现了我在**(1)**中建议的内容，如果用户搜索“Arnold Schwarznegr”（完全错误），他仍然可能会发现“Arnold Schwarzenegger”非常接近排名结果靠前，因为“施瓦辛格”和“施瓦辛格”之间的 Levenshtein 距离非常小，而阿诺德是全文匹配！

希望它会有所帮助。

编辑：一些可能有用的链接：
[非重音过滤字典](http://www.postgresql.org/docs/9.1/static/unaccent.html)
[Fuzzystrmatch](http://www.postgresql.org/docs/9.1/static/fuzzystrmatch.html)
[pg_trgm 模块](http://www.postgresql.org/docs/9.1/static/pgtrgm.html)

# php - 通过 Ajax 调用加载 Zend 表单

> ID：14613898
> 
> 赞同：2
> 
> 时间：2013-01-30T21:13:11.910
> 
> 标签：php, javascript, jquery, ajax, zend-framework

我需要动态地将表单加载到页面中，并且可能会出现此表单的多个实例。验证和保存不是问题，但我似乎无法从控制器传回实际的表单内容/标记。使用简单值（id：1）进行测试时，我可以成功返回数据，但如果未设置数据类型或 [Object object]，则实际形式始终返回为 undefined。

控制器：

```
public function addPermissionFormAction()
{
    $this->_helper->viewRenderer->setNoRender();
    $this->_helper->layout->disableLayout();
    //data from ajax call is successfully received
    $username = $this->getRequest()->getParam('user');
    //...Code to get $pages...
    $form = new Pds_Wizard_SubForm_Externals($pages);

    if(!isset($form)) $form = false;
    //I have run XDebug to here and confirmed that the form is built successfully.
    echo Zend_Json::encode(array('form' => $form));
} 
```

我的 Ajax 调用：

```
$('#get-player-permissions').click(function() {
    if($('#test-test').val().length > 0) {
        $.ajax({
        url: '/pds/external-user/add-permission-form',
        data: { user: $('#test-test').val() },
        dataType: 'json',
        contentType: "application/json",
        success: function(data){
            alert(data.form); // [Object object]
            $("#wizardContainer").html(data.form); //empty, no form content
        }
    })
    } 
}); 
```

我已经尝试过了，甚至没有添加用于发送简单值的**dataType**或**contentType**字段，并且没有问题通过这些字段。但是，使用该表单，在这种情况下，我会得到一个 null 或 undefined。

任何建议都值得赞赏，包括更理想的动态加载表单的方法。我不经常使用 Ajax 调用，所以如果这是一个简单的错误，我深表歉意。先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:43:11.120

在这种情况下，您不能设置“不渲染”。您需要有一个视图“add-permission-form.phtml”（或指定的另一个视图）来格式化和显示 HTML 代码

**控制器 ：**

```
public function addPermissionFormAction()
{
    $this->_helper->layout->disableLayout();

    //data from ajax call is successfully received
    $username = $this->getRequest()->getParam('user');
    //...Code to get $pages...
    $form = new Pds_Wizard_SubForm_Externals($pages);

    if(!isset($form)) $form = false;
    //I have run XDebug to here and confirmed that the form is built successfully.
    echo Zend_Json::encode(array('form' => $form));

    //Assign the form to a variable view
    $this->view->form = $form;
} 
```

**查看：add-permission-form.phtml：**

```
<?php echo $this->form ;?> 
```

**阿贾克斯调用：**

没有评论，你的代码看起来很酷

# r - 删除R中给定变量的重复日期

> ID：14613907
> 
> 赞同：2
> 
> 时间：2013-01-30T21:14:02.437
> 
> 标签：r

```
Date    Server  CPU
1/1/2012    WebA    30
1/1/2012    WebA    25
1/1/2012    WEbB    30
1/2/2012    WebA    45
1/2/2012    WebA    50
1/2/2012    WebA    60

dput(x)
structure(list(Date = structure(c(1L, 1L, 1L, 2L, 2L, 2L), .Label = c("1/1/2012", 
"1/2/2012"), class = "factor"), Server = structure(c(1L, 1L, 
2L, 1L, 1L, 1L), .Label = c("WebA", "WEbB"), class = "factor"), 
    CPU = c(30L, 25L, 30L, 45L, 50L, 60L)), .Names = c("Date", 
"Server", "CPU"), class = "data.frame", row.names = c(NA, -6L
)) 
```

对于给定服务器的每个数据，我应该有一个数据点。我需要删除重复的日期。当我选择日期时，CPU 应该是最高的。例如，对于日期 1/2/2012，我的新行将是`1/2/2012 WebA 60`.

如何删除 R 中的重复日期？

我可以做这个：

```
x[!duplicated(x[1:2]),] 
```

从CPU，我如何检查最高？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T21:35:16.237

解决方案使用`aggregate`：

```
aggregate(df$CPU, by=list(df$Date, df$Server), max)

#    Group.1 Group.2  x
# 1 1/1/2012    WebA 30
# 2 1/2/2012    WebA 60
# 3 1/1/2012    WEbB 30 
```

使用`data.table`

```
require(data.table)
dt <- data.table(df)
setkey(dt, "Date", "Server")
dt[, list(CPU.max = max(CPU)), by="Date,Server"]

#        Date Server CPU.max
# 1: 1/1/2012   WebA      30
# 2: 1/1/2012   WEbB      30
# 3: 1/2/2012   WebA      60 
```

**编辑：**按照 OP 的评论要求更多列：

```
df <- structure(list(Date = structure(c(1L, 1L, 1L, 2L, 2L, 2L), 
               .Label = c("1/1/2012", "1/2/2012"), class = "factor"), 
               Server = structure(c(1L, 1L, 2L, 1L, 1L, 1L), 
               .Label = c("WebA", "WEbB"), class = "factor"), 
               CPU = c(30L, 25L, 30L, 45L, 50L, 60L), 
               val1 = c(5L, 2L, 6L, 3L, 1L, 4L), 
               val2 = c(5L, 3L, 6L, 4L, 1L, 2L), 
               val3 = c(1L, 2L, 4L, 3L, 6L, 5L)), 
               .Names = c("Date", "Server", "CPU", "val1", "val2", "val3"), 
               row.names = c(NA, -6L), class = "data.frame")

> df

#       Date Server CPU val1 val2 val3
# 1 1/1/2012   WebA  30    5    5    1
# 2 1/1/2012   WebA  25    2    3    2
# 3 1/1/2012   WEbB  30    6    6    4
# 4 1/2/2012   WebA  45    3    4    3
# 5 1/2/2012   WebA  50    1    1    6
# 6 1/2/2012   WebA  60    4    2    5 
```

解决方案使用`aggregate`：使用带有公式的聚合（如下所示）通常更好，因为 1）它保留列名，2）它干净且易于理解，3）它允许更容易合并以恢复其他列（由于（1 )) （这是你的问题，如果我猜对了）。

```
df.agg <- aggregate(data = df, CPU ~ Date + Server, max)
merge(df.agg, df)

#       Date Server CPU val1 val2 val3
# 1 1/1/2012   WebA  30    5    5    1
# 2 1/1/2012   WEbB  30    6    6    4
# 3 1/2/2012   WebA  60    4    2    5 
```

解决方案使用`data.table`：

```
dt <- data.table(df, key=c("Date", "Server"))
# .SD holds the data.frame of the current group that is processed
dt[, .SD[which.max(CPU)], by=c("Date", "Server")]

#        Date Server CPU val1 val2 val3
# 1: 1/1/2012   WebA  30    5    5    1
# 2: 1/1/2012   WEbB  30    6    6    4
# 3: 1/2/2012   WebA  60    4    2    5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T21:45:32.507

只是为了好玩，另一个有`plyr`：

```
library(plyr)
ddply(x, c("Date", "Server"), summarize, cpumax=max(CPU)) 
```

# c# - 带有通用表的 LINQ 查询

> ID：14613908
> 
> 赞同：0
> 
> 时间：2013-01-30T21:14:03.527
> 
> 标签：c#, linq, generics

我试图在我的方法中只有一个选择。该方法将根据定义的字符串选择表并执行选择。

```
private static void Load()
{
    DataClassesDataContext contexto = new DataClassesDataContext();
    IQueryable newTable = null;

    string tabela = "A";

    switch (tabela)
    {

        case "A":
            newTable = contexto.GetTable<Table2>();
            break;
        case "B":
            newTable = contexto.GetTable<Table1>();
            break;
        default:
            break;
    }

    var genericQuery = from a in newTable
                       select a;
} 
```

我该怎么做才能让 genericQuery 具有正确的表值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:09:46.400

除非您对 Load 方法进行泛化，否则这将不起作用：

```
private static void Load<T>()
{
   ...
   var genericQuery = contexto.GetTable<T>();
   ...
} 
```

# jquery - 如何停止在 jQuery 中从覆盖 HTML 中的 href 中返回 false

> ID：14613911
> 
> 赞同：2
> 
> 时间：2013-01-30T21:14:12.093
> 
> 标签：jquery, html

**HTML**
我正在添加我的两个链接，它们会将我的“未回答”链接发送到我的管理控制器，并将我的“已回答”链接发送到我的管理控制器中的一个函数。

```
<h2 class="unanswered">
   <?=anchor('admin/', 'Unanswered', array('class' => 'selected'))?>
</h2>

<h2 class="answered">
   <?=anchor('admin/answered_posts', 'Answered')?>
</h2> 
```

**Jquery**
这里我只是想在我的链接中添加和删除样式。当我保持返回 false 时，我的样式工作正常，但我在 html 锚点中的 href 不再运行，所以我无法从我的控制器取回所需的帖子。当我删除 return false 时，我的 href 工作正常，并且我从控制器中取回了我需要的东西，但是我在 jQuery 中添加的样式不再起作用。

```
$('.unanswered').click(function(){
       $('.answered a').removeClass('active');
       $('.unanswered a').addClass('active'); 
       return false;
     });

     $('.answered').click(function(){
       $('.unanswered a').removeClass('active');
       $('.answered a').addClass('active');
       return false;
     }); 
```

**旁注**
我也尝试过这样做：

```
$('.unanswered').click(function(e){
       e.preventDefault();
       $('.answered a').removeClass('active');
       $('.unanswered a').addClass('active'); 
     });

     $('.answered').click(function(e){
       e.preventDefault();
       $('.unanswered a').removeClass('active');
       $('.answered a').addClass('active');
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:04:47.357

我会参考这个问题的评论 - 如果我理解你的意图（点击一个链接，在服务器上更新一些幕后的东西，并在页面上应用一个样式而不重新加载页面）这可能是你想要的与AJAX有关。例如（未经测试的代码）：

```
$('.unanswered, .answered').click(function() {
    $.ajax({
        url: $(this).attr('href')
    }).done(function() {
        /* You'll need to add some logic in here to remove the active class from
        the answered or unanswered question if it exists. Depending on the rest of your 
        HTML, this could be done with something like $(this).closest('myWrapper').find('a.active').removeClass('active') */

        /* Once you've cleaned up any active classes, add an active class to this element */
        $(this).addClass('active');

    });
}); 
```

更多关于 jQuery AJAX 的阅读：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

由于我不完全了解您要做什么，因此您也可以尝试一下（这将更新课程，然后提交请求）。由于页面会快速重新加载，您可能看不到 CSS 更改。

```
$('.answered').click(function() {
   // Set up the classes here
   $('.unanswered a').removeClass('active');
   $(this).addClass('active');

   /* When this element has an active class, then it will redirect to the link's URL, the HREF attribute. We do this check because javascript is asynchronous, all lines can run at the same time, so this prevents window.location from being called before the class is changed */
   if($(this).hasClass('active')) {
       window.location = $(this).attr('href');
   }

   // Still return false to prevent the default redirect that would happen without javascript.
   return false;
 }); 
```

# bash - 如何继续重新启动 Windows cmd 提示符

> ID：14613916
> 
> 赞同：3
> 
> 时间：2013-01-30T21:14:28.850
> 
> 标签：bash, cmd, cygwin, bash-trap

Cygwin 的 bash 通常比 Windows 的 cmd 命令 shell 更可取，因此我们在生成 Windows shell 之前使用它来设置我们的环境。**但是，在这个生成的 shell 中使用Ctrl-C**终止正在运行的进程会导致用户返回 bash shell。

我尝试的解决方法：

```
source setupEnvironment.sh

restartCommand() {
  # Reset trap
  trap restartCommand SIGINT
  echo -e " === Restarting windows cmd prompt\n"
  cmd /k 
}

trap restartCommand SIGINT
echo -e " === Starting windows cmd prompt\n"
cmd /k 
```

这种方法只重新启动 cmd 一次。随后的 Ctrl-C 不会被捕获。有没有办法继续重启 cmd 进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:40:40.717

Does it have to be in the same window? If not, I have had much better luck with

```
cygstart cmd 
```

`cmd` starts in its own window; and only exit closes that window

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:32:53.393

随后的 Ctrl-C 不会被捕获，因为您的脚本由于到达结尾而退出。

当你 ctrl-c 时，cmd 可能会返回错误，在这种情况下你可以这样做

```
until cmd /k; do true; done 
```

否则，让你的脚本循环，直到 ctrl-c 没有被按下：

```
trap restart=1 SIGINT
echo -e " === Starting windows cmd prompt\n"
restart=1
while (( restart )); do restart=0; cmd /k; done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-04T22:18:50.643

为了*补充* [悲惨变量的有用答案](https://stackoverflow.com/a/14615275/45375)，解释**为什么`cmd.exe`在*自己的*控制台窗口中打开是最好的方法**：

*   虽然您可以尝试解决该`Ctrl-C`问题，如[其他人的回答](https://stackoverflow.com/a/14614204/45375)`cmd.exe`所示，但行为与常规控制台窗口中的行为并不完全相同：由于每次按下时都会创建一个*新实例*，因此先前的状态会丢失。`cmd.exe``Ctrl-C`

*   Cygwin 终端（控制台窗口）使用 UTF-8 字符编码，而不是基于（旧版）OEM 代码页的常规控制台窗口编码，两者不兼容。

*   奇怪的是，停留在 Cygwin 终端会导致`cmd.exe`回*显*所有交互式提交的命令（就像您在没有 的批处理文件中获得的那样`@echo off`）。

要在启动`cmd.exe`控制台窗口时自动关闭 Cygwin 窗口，请使用
`exec cygstart cmd`.

# c# - 从派生类复制基类的内容

> ID：14613919
> 
> 赞同：19
> 
> 时间：2013-01-30T21:14:34.143
> 
> 标签：c#

我目前有一个派生类和一个基类。如何使派生类的基类等于我拥有的基类？浅拷贝会起作用吗？

```
class Base
{
    private string name; 
    public string Name { get; set; }
    private string address; 
    public string Address { get; set; }
}

class Derived:Base
{
    private string field; 
    public String field { get; set; }
}

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Base b = new Base();
            b.Address = "Iliff";
            b.Name = "somename"; 

            Derived d = new Derived();
            //How can I make the base class of d equal to b ?

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-30T21:27:54.883

为基类创建一个复制构造函数，这样做您还需要创建一个无参数的构造函数，并且通过添加复制构造函数，编译器将不再生成默认构造函数。然后在派生类中调用基类的复制构造函数。

```
public class Base
{
    public int Name { get; set; }
    public string Address { get; set; }

    public Base()
    { }

    public Base(Base toCopy)
    {
        this.Name = toCopy.Name;
        this.Address = toCopy.Address;
    }
}

public class Derived : Base
{
    public String Field { get; set; }

    public Derived(Base toCopy)
        : base (toCopy)
    { }

    // if desired you'll need a parameterless constructor here too
    // so you can instantiate Derived w/o needing an instance of Base
    public Derived()
    { }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-01T16:29:16.753

另一种方法是将基类映射到派生类：

```
/// <summary>
/// Maps the source object to target object.
/// </summary>
/// <typeparam name="T">Type of target object.</typeparam>
/// <typeparam name="TU">Type of source object.</typeparam>
/// <param name="target">Target object.</param>
/// <param name="source">Source object.</param>
/// <returns>Updated target object.</returns>
public static T Map<T, TU>(this T target, TU source)
{
    // get property list of the target object.
    // this is a reflection extension which simply gets properties (CanWrite = true).
    var tprops = target.GetProperties();

    tprops.Where(x=>x.CanWrite == true).ToList().ForEach(prop =>
    {
        // check whether source object has the the property
        var sp = source.GetType().GetProperty(prop);
        if (sp != null)
        {
            // if yes, copy the value to the matching property
            var value = sp.GetValue(source, null);
            target.GetType().GetProperty(prop).SetValue(target, value, null);
        }
    });

    return target;
} 
```

例子：

```
var derivedClass = new DerivedClass();
derivedClass.Map(baseClass); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-30T21:18:36.473

如果我理解正确，这将起作用：

```
class Derived : Base
{
    // all the code you had above, plus this:

    public Derived(Base toCopy)
    {
        this.name = toCopy.name;
        this.address = toCopy.address;
    }
}

Derived d = new Derived(b); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-30T21:17:33.670

您必须手动将`Base`实例的字段复制到新`Derived`实例。

一种常见的方法是提供一个复制构造函数：

```
public Derived(Base other)
{
    if (other == null) {
        throw new ArgumentNullException("other");
    }

    this.name = other.name;
    this.address = other.address;
} 
```

* * *

关于您的代码的另一个注意事项：

```
private string field; 
public string Field { get; set; } 
```

这没有多大意义（其他属性相同）。

`public string Field { get; set; }`意味着编译器会自动创建一个私有字段。你的`field`领域永远不会被使用。

要么只写`public string Field { get; set; }`，因为私有字段将自动创建。或者`Field`以某种方式声明属性，以便使用您的私有字段：

```
private string field;

public string Field {
    get {
        return field;
    }
    set {
        field = value;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T21:23:29.967

您始终可以使用 Object.MemberwiseClone 来复制它。

[http://msdn.microsoft.com/en-us/library/system.object.memberwiseclone.aspx](http://msdn.microsoft.com/en-us/library/system.object.memberwiseclone.aspx)

或者实现IClonable接口：http: [//msdn.microsoft.com/en-us/library/system.iclonable.aspx](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-19T11:22:05.017

基于**mnyaarar**代码，有必要更新获取属性的方式：

```
public static T Map<T, TU>(this T target, TU source)
{

    // list of writable properties of the destination
    List<PropertyInfo> tprops = typeof(T).GetTypeInfo().DeclaredProperties
                                        .Where(x => x.CanWrite == true).ToList();

    tprops.ForEach(prop =>
            {
                // check whether source object has the the property
                var sp = source.GetType().GetProperty(prop.Name);
                if (sp != null)
                {
                    // if yes, copy the value to the matching property
                    var value = sp.GetValue(source, null);
                    target.GetType().GetProperty(prop.Name).SetValue(target, value, null);
                }
            });
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-24T01:16:22.977

我想出了一个很好的模式来处理这种情况。

```
public class Base
{
    public int BaseField;

    /// <summary>
    /// Apply the state of the passed object to this object.       
    /// </summary>
    public virtual void ApplyState(Base obj)
    {
        BaseField = obj.BaseField;
    }
}

public class Derived : Base
{
    public int DerivedField;

    public override void ApplyState(Base obj)
    {
        var src = srcObj as Derived;

        if (src != null)
        {
            DerivedField = src.DerivedField;
        }

        base.ApplyState(srcObj);        
    }
} 
```

给定任何两个共享类型“Base”的对象，您可以将 A 应用于 B 或 B 应用于 A。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-05T07:45:39.040

我发现 EMIT 可以帮助你。

因为我们会在反射中花费太长时间，但我们可以在 Emit 中快速。

```
 private static void CloneObjectWithIL<T>(T source, T los)
    {
        var dynamicMethod = new DynamicMethod("Clone", null, new[] { typeof(T), typeof(T) });
        ILGenerator generator = dynamicMethod.GetILGenerator();

        foreach (var temp in typeof(T).GetProperties().Where(temp=>temp.CanRead&&temp.CanWrite))
        {
            generator.Emit(OpCodes.Ldarg_1);// los
            generator.Emit(OpCodes.Ldarg_0);// s
            generator.Emit(OpCodes.Callvirt,temp.GetMethod);
            generator.Emit(OpCodes.Callvirt, temp.SetMethod);
        }
        generator.Emit(OpCodes.Ret);
        var clone = (Action<T, T>) dynamicMethod.CreateDelegate(typeof(Action<T, T>));
        clone(source, los);
    } 
```

它可以用作以下代码：

```
public class Base
{
    public string BaseField;
}

public class Derived : Base
{
    public string DerivedField;
}

Base base = new Base();
//some alother code
Derived derived = new Derived();
CloneObjectWithIL(base, derived); 
```

更快的代码是缓存它。

```
 // ReSharper disable once InconsistentNaming
    public static void CloneObjectWithIL<T>(T source, T los)
    {
        //See http://lindexi.oschina.io/lindexi/post/C-%E4%BD%BF%E7%94%A8Emit%E6%B7%B1%E5%85%8B%E9%9A%86/
        if (CachedIl.ContainsKey(typeof(T)))
        {
            ((Action<T, T>) CachedIl[typeof(T)])(source, los);
            return;
        }
        var dynamicMethod = new DynamicMethod("Clone", null, new[] { typeof(T), typeof(T) });
        ILGenerator generator = dynamicMethod.GetILGenerator();

        foreach (var temp in typeof(T).GetProperties().Where(temp => temp.CanRead && temp.CanWrite))
        {
            if (temp.GetAccessors(true)[0].IsStatic)
            {
                continue;
            }

            generator.Emit(OpCodes.Ldarg_1);// los
            generator.Emit(OpCodes.Ldarg_0);// s
            generator.Emit(OpCodes.Callvirt, temp.GetMethod);
            generator.Emit(OpCodes.Callvirt, temp.SetMethod);
        }
        generator.Emit(OpCodes.Ret);
        var clone = (Action<T, T>) dynamicMethod.CreateDelegate(typeof(Action<T, T>));
        CachedIl[typeof(T)] = clone;
        clone(source, los);
    }

    private static Dictionary<Type, Delegate> CachedIl { set; get; } = new Dictionary<Type, Delegate>(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-06T17:04:53.290

我意识到其他几个答案可能已经触及这个解决方案，但我想更完整地说明它。

我找到的解决方案是填充基类，然后将该基类传递给派生类的构造函数。派生类的构造函数根据基类填充其字段。

```
class Base
{
    private string name; 
    public string Name { get; set; }
    private string address; 
    public string Address { get; set; }
}

class Derived:Base
{
    Derived(Base toCopy)
    {
        this.Name = toCopy.Name;
        this.Address = toCopy.Address;
    }

    private string field; 
    public String field { get; set; }
}

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Base b = new Base();
            b.Address = "Iliff";
            b.Name = "somename"; 

            //You are now passing the base class into the constructor of the derived class.
            Derived d = new Derived(b);

        }
    }
} 
```

* * *

## 回答 #10

> 赞同：-6
> 
> 时间：2013-01-30T21:16:26.310

只要改变这个。

```
Derived d = (Derived)b; 
```

此外，您的姓名数据类型应该是字符串，而不是 int

# python - 在python中获取系统可用内存

> ID：14613924
> 
> 赞同：2
> 
> 时间：2013-01-30T21:14:43.153
> 
> 标签：python, memory, operating-system

> **可能重复：**
> [如何在 Python 中获取当前的 CPU 和 RAM 使用情况？](https://stackoverflow.com/questions/276052/how-to-get-current-cpu-and-ram-usage-in-python)

有没有办法使用python获得系统的空闲内存？ `os`并且`sys`似乎没有公开这种功能。

显然，可以使用`subprocess`or `os.system`，但如果没有经过严格的测试，它就不是便携的，也不可靠。

# proxy - 在使用可靠代理模式来保证消息传递时，Akka 将消息持久化多少次？

> ID：14613931
> 
> 赞同：3
> 
> 时间：2013-01-30T21:15:02.747
> 
> 标签：proxy, akka

Akka 2.1 文档建议使用[可靠代理模式](http://doc.akka.io/docs/akka/snapshot/contrib/reliable-proxy.html)来保证消息传递，即消息被传递一次且仅一次到接收者队列。为了确保消息在 JVM 崩溃的情况下不会丢失，我相信消息存储在持久队列中。

其基本思想是，要从actor A 向B 发送消息M，它将M 发送到两个代理actor P 和E，其中P 在A 侧，E 在B 侧。有关详细信息，请参阅[此图像](http://doc.akka.io/docs/akka/snapshot/_images/ReliableProxy.png)

演员 P 和 E 是否需要自己的持久队列？从 A 发送到 B 的消息在被持久化到 B 之前会被持久化在 P 的队列和 E 的队列中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:10:22.640

该模式本身不关心持久消息队列：它只是旨在使远程传递与本地传递一样可靠（在易出错的网络施加的不可靠性约束内）。因此，当 JVM 崩溃时，消息将丢失。

这些参与者（P 和 E）不能很好地使用持久邮箱，因为 P 将消息存储在内部，即不持久。这样做会将他们从邮箱中取出。您需要调整模式以让 P 保留其内部队列。

# jquery - 使用 jQuery Accordion 时在页面上查找字符串 (Ctrl+F)

> ID：14613949
> 
> 赞同：6
> 
> 时间：2013-01-30T21:16:11.687
> 
> 标签：jquery, find, accordion

我正在使用 jQuery 手风琴插件来折叠一个大页面。它运行良好，是压缩页面的好方法，但我注意到当使用浏览器搜索功能查找 (Ctrl+F) 时，它只会在打开`div`的情况下查找搜索字符串。

有没有办法让浏览器 find 搜索所有`div`s （如果找到，甚至可以打开它们）......我明白为什么这不是微不足道的。搜索必须打开`div`s 才能显示结果，这并不明显......

如果没有明显的方法来解决这个问题，那么以编程方式执行此操作的方法是什么？

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T02:33:35.493

*手风琴*没有简单的解决方案，它的设计理念是一次只能打开一个“襟翼”。但是，如果您摆脱了这种限制，您就可以设计出可行的解决方案。

例如，

```
$(document).on("keydown", function (e) { if (e.keyCode == 70 && e.ctrlKey) { ... } }); 
```

将允许您捕获`Ctrl``f`并先发制人地扩展所有隐藏的文本。

另一种方法是根本不实际*隐藏*您的文本，而是使其几乎不可见（非常低的不透明度，或在高度：1 div 内，或任何不阻止查找但仍有效隐藏的内容），然后捕获`select`事件。使用您喜欢的任何技术在 DOM 中找到您的位置（例如[http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html](http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html)）您可以然后反应性地展开刚刚选择文本的隐藏部分。

如果你确实让它工作了，把你的结果发回这里！

这是一个简单但直接的手风琴替代方案，您可以使用它使 ctrl-f 事件技巧起作用。

在您的 HTML 中，您可以像这样构造它：

```
<div class="booklet">
   <h1>Header 1</h1>
   <div>Content in this flap</div>
   <h1>Header 2</h1>
   <div>Content in this flap</div>
   <h1>Header 3</h1>
   <div>Content in this flap</div>
</div> 
```

为元素设置样式以`h1`进行品味，确保为它们提供类似`cursor: pointer`和适当的东西`background-color`以表明它们是可点击的，例如：

```
.booklet h1
{
   cursor:pointer;
   background-color:#3cf;
   color:white;
   border-top-left-radius:5px;
   border-top-right-radius:5px;
   padding:5px;
}
.booklet div
{
   display:none;
   border: 1px solid #3cf;
   border-bottom-left-radius:5px;
   border-bottom-right-radius:5px;
   padding:5px;
} 
```

在您的 Javascript 中：

```
$('.booklet').on("click", "h1", function()
{
   $('.booklet div').hide();
   $(this).next("div").show(); // acts like accordion, animate to taste
});
$('.booklet div').first().show(); // open first flap of accordion to begin

$(document).on("keydown", function (e)
{
   if (e.keyCode == 70 && e.ctrlKey) // ctrl+f
   {
      $('.booklet div').show(); // show all flaps
   }
}); 
```

在单击另一个标题之前，所有襟翼将保持打开状态，此时它将返回手风琴行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T01:07:31.563

我选择了这个选项，如其他地方所述：

[使用链接或按钮切换整个手风琴功能](https://stackoverflow.com/questions/14778452/toggle-entire-accordion-functionality-with-link-or-button)

我为用户提供了一个选项来切换手风琴，然后他们可以使用 Ctrl+F 进行搜索。

# relational-algebra - 在关系代数中你不能做以下哪一项？

> ID：14613953
> 
> 赞同：1
> 
> 时间：2013-01-30T21:16:19.407
> 
> 标签：relational-algebra

tldr; 以下哪三个你不能用RA写？

我们的教授要求我们编写 3 个 SQL 查询。然后他问我们其中哪些不能用关系代数写出来。它们如下：

给定以下 3 个表：

```
Students (sID, sName);              (Primary Key sID)
Courses (cID, cName);               (Primary Key cID)
Enrolled (sID, cID, sectID, grade)  (Primary Key sID, cID)
where      foreign key (sID) references Students,  
           foreign key (cID) references Courses. 
```

1.  找到最大的学生证。
2.  获取 COMP 4380 的类列表（由 <sID, sName> 组成），并按照 sName 的字母顺序排列列表中的记录。（他只想要所有上过这门课的学生）。
3.  计算每门课程注册的学生人数（由课程 ID 标识）。

所以我们有：

1.  涉及在整数列中查找最大值的查询。
2.  涉及按字母顺序对结果进行排序的查询。
3.  涉及计数多个组的查询。

我已经设法为#1 写了一个 RA 声明（[这里有详细信息](https://stackoverflow.com/questions/5493691/how-can-i-find-max-with-relational-algebra "详情在这里")），所以我知道不是这样。但是，我不确定 2 和 3。您如何使用 RA 操作进行排序？你怎么能数出多个组？我*猜*3 是可能的，因为 RA 可以扩展为计数作为聚合函数。

以下是我为回答教授最初的问题而提出的 SQL 语句：

```
SELECT max(sID) 
FROM Students

SELECT sID, sName
FROM Enrolled INNER JOIN Students
WHERE cID="COMP 4380"
ORDER BY sName

SELECT count(sID), cID
FROM Enrolled
GROUP BY cID 
```

我无法在 RA 中写出 2 和 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:29:49.100

Only 1 is possible in standard RA. We cannot sort, and we cannot count an arbitrary number in standard RA.

# php - 如何使用起始索引、每页项目、总项目和总页数获取当前页面？(PHP)

> ID：14613956
> 
> 赞同：9
> 
> 时间：2013-01-30T21:16:27.830
> 
> 标签：php, pagination

例如，假设：

```
$startIndex = 21; 
$totalItems = 100;
$itemsPerPage = 10;
$totalPages = ceil($totalItems / $itemsPerPage);  // (10)

$currentpage = //I am stumped here. 
```

根据 $startIndex，$currentpage 会是什么？

我正在研究分页，它正在踢我的屁股。我知道这可能是一些非常简单的数学，但我现在想不出来。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T21:19:38.320

每页 10 个项目，假设您的项目计数/编号从 1 开始，第 1 页包含项目 1 到 10，第 2 页包含项目 11 到 20，第 3 页包含 21 到 30，依此类推。

所以，

```
$currentPage = ceil(($startIndex - 1) / $itemsPerPage) + 1; 
```

我曾经[`ceil()`](http://php.net/manual/en/function.ceil.php)确保你有一个整数，它被四舍五入，所以当前的页码是正确的。

* * *

如果您的项目计数从 0 开始，因此第 1 页包含项目 0 到 9，您可以跳过公式的`- 1`和`+ 1`部分：

```
$currentPage = ceil(($startIndex) / $itemsPerPage); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T21:19:40.943

你在数学课上睡了很多，不是吗？

```
$currentpage = (($startIndex - 1) / $itemsPerPage) + 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T21:20:34.937

如果：

```
$startIndex = 21; 
$totalItems = 100;
$itemsPerPage = 10;
$totalPages = ($totalItems / $itemsPerPage);  // (10) 
```

然后

```
$currentpage = $startIndex/$itemsPerPage; //Make sure that it uses integer division 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-26T09:06:19.327

`floor`用于获取当前页面很重要

```
pagesTotal = int(ceil(count / limit))
pagesCurrent = int(floor(offset / limit) + 1) 
```

# objective-c - 定时触发器

> ID：14613960
> 
> 赞同：1
> 
> 时间：2013-01-30T21:16:40.953
> 
> 标签：objective-c, cocoa, nstimer

我正在尝试创建一个在单独的线程中执行子方法的控制方法。我研究了 NSTimer，但其中一些子方法没有在确切的时间间隔内执行。

以下是 5 个间隔：

1.  快速执行 -- ~ 每 0.1 秒
2.  每 5 分钟执行一次
3.  每 10 分钟执行一次
4.  每小时执行一次
5.  每天在当天（午夜）执行

间隔 1 - 3 应该很容易用 NSTimer 完成。实施其他的任何提示？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:40:49.707

对于 (4) 和 (5)，`dispatch_walltime`如果`NSTimer`不够准确，您需要 。

```
/* timespec for midnight, new years day 2014 */

struct tm time = {
   .tm_sec = 0,
   .tm_min = 0,
   .tm_hour = 0,
   .tm_mday = 1,
   .tm_mon = 1,
   .tm_year = 2014,
   .tm_wday = -1,  // I think -1 is wildcard here, can someone help?
   .tm_yday = -1,
   .tm_isdst = TRUE
};

const struct timespec whenToFire = {
   .tv_sec = mktime(time),
   .tv_nsec = 0
};

dispatch_time_t time = dispatch_walltime(&whenToFire,0);

/* a lower-priority queue may delay firing */    
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT);

dispatch_source_t timeSrc = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 
                                  0, 0, queue);

dispatch_source_set_timer(timeSrc, time, 100000 , 100);

dispatch_source_set_event_handler(timeSrc, ^{   
    /* only run once */
    static dispatch_once_t token;
    dispatch_once(&token, ^{
        /* code to run on New Years Day here */
        dispatch_source_cancel(timeSrc);
    });
}); 
```

# python - 动态访问在 .ini 文件中声明的字典

> ID：14613964
> 
> 赞同：0
> 
> 时间：2013-01-30T21:16:58.567
> 
> 标签：python, ini

让这是具有更多相似词典的 .ini 文件的内容

```
[section]
cmd_list = {'gamess': "416.gamess/exe/gamess",
            'sjeng': '458.sjeng/exe/sjeng',
            'soplex': '450.soplex/exe/soplex',
            'astar': '473.astar/exe/astar',
           }             
... 
```

现在在我的主文件中并希望动态访问字典：

```
for r in 'string'
     cmd_list[r][1] #from .ini
     cmd_list[r][0] #from .ini
    .... 
```

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:26:08.703

如果您使用[library](http://docs.python.org/2/library/configparser.html)`.ini`解析文件，则 value仍然是包含 Python dict 文字的字符串；它还不是字典。[`ConfigParser`](http://docs.python.org/2/library/configparser.html)`cmd_list`

使用该[`ast.literal_eval()`函数](http://docs.python.org/2/library/ast.html#ast.literal_eval)将其加载到实际字典中：

```
>>> ast.literal_eval('''\
... {'gamess': "416.gamess/exe/gamess",
...             'sjeng': '458.sjeng/exe/sjeng',
...             'soplex': '450.soplex/exe/soplex',
...             'astar': '473.astar/exe/astar',
...            }''')
{'astar': '473.astar/exe/astar', 'sjeng': '458.sjeng/exe/sjeng', 'gamess': '416.gamess/exe/gamess', 'soplex': '450.soplex/exe/soplex'}
>>> cmd_list = _
>>> cmd_list['sjeng']
'458.sjeng/exe/sjeng' 
```

如果您控制输出格式，您可能需要重新考虑策略；有更好的格式来存储相同的信息。

# c# - 使用访问者模式来处理 else if

> ID：14613971
> 
> 赞同：0
> 
> 时间：2013-01-30T21:17:23.123
> 
> 标签：c#, design-patterns, visitor-pattern

我想知道是否有任何方法可以处理访问者模式的简单条件？

例如，如果我们有下面的代码，我们如何应用访问者模式呢？

```
public class Elseif
{
    private int total;
    public int Condition(int x)
    {
        if(x==1)
        {
            total = 100;
        }
        else if(x==2)
        {
            total = 200;
        }
        return total;

    }
} 
```

换句话说，您想如何为 IVisitor 接口编写重载？

```
public interface IVisitor
{
    int Visitor(int x);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:09:16.090

也许您正在寻找[责任链](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)模式？

假设您必须计算奖金并且您使用这样的东西

```
public double GetBonusRate(int workingDays, int numberOfSales)
{
    if(numberOfSales > 20)
    {
      return 1.5;
    }

    if(workingDays >= 20 && numberOfSales > 10)
    {
      return 1.2;
    }

    if(numberOfSales > 5)
    {
      return 1.0;
    }

    if(workingDays > 10)
    {
      return 0.1;
    }

    return 0;
} 
```

您期望条件的数量会增加，并且您意识到在错误的位置添加新条件会导致错误。
责任链为您提供了另一种方法。

```
var chain = new PerfectBonusRate();
chain.RegisterNext(new GoodBonusRate())
    .RegisterNext(new StandartBonusRate())
    .RegisterNext(new LazyBonusRate())
    .RegisterNext(new NoBonusRate());

var bonusRate = chain.GetBonusRate(10, 20); 
```

执行

```
abstract class ChainElement
{
    ChainElement _next;

    public ChainElement RegisterNext(ChainElement next)
    {
        _next = next;
        return next;
    }

    public double GetBonusRate(int workingDays, int numberOfSales)
    {
        if(IsMatched(workingDays, numberOfSales))
        {
            return GetBonusValue();
        }

        return _next.GetBonusRate(workingDays, numberOfSales);
    }

    protected abstract bool IsMatched(int workingDays, int numberOfSales);

    protected abstract int GetBonusValue();
}

class PerfectBonusRate : ChainElement
{
    protected override bool IsMatched(int workingDays, int numberOfSales)
    {
        return numberOfSales > 20;
    }

    protected override double GetBonusValue()
    {
        return 1.5;
    }
}

class GoodBonusRate : ChainElement
{
    protected override bool IsMatched(int workingDays, int numberOfSales)
    {
        return workingDays >= 20 && numberOfSales > 10;
    }

    protected override double GetBonusValue()
    {
        return 1.2;
    }
}

//and the same for StandartBonusRate, LazyBonusRate...

class NoBonusRate : ChainElement
{
    protected override bool IsMatched(int workingDays, int numberOfSales)
    {
        return true;
    }

    protected override double GetBonusValue()
    {
        return 0.0;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:24:33.380

访问者模式用于区分不同的*类型*，特别是如果你有一个（抽象）超类的对象，并且你想根据*具体*类型做一些特殊的事情。这意味着，您可以（并且应该）使用它来代替带有强制转换测试的 if-then-else。

访问者模式不是为了区*分值*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T22:08:14.283

用于解决某些特定问题的模式。访问者模式解决了以下问题 - 向对象的（复合）结构添加新功能而不更改这些对象。因此，让我重新表述您的问题 -*如何在没有对象结构和要添加的功能的情况下向对象结构添加新功能*。这就像用小提琴敲钉子一样。

记住——先出问题。然后是解决这个问题的模式。反之亦然。

更新所以，你的代码有什么问题？它不遵循[命令-查询分离](http://en.wikipedia.org/wiki/Command-query_separation)原则。相同的方法执行一个操作（修改总计）并将总计返回给调用者。我将命令和查询分开以使您的代码更清晰：

```
public int Total { get; set; }

public void DoSomething(int x)
{
    if(x == 1)
    {
        Total = 100;
        return;
    }

    if(x == 2)
    {
       Total = 200;
       return;
    }
} 
```

# c# - EDM 映射错误

> ID：14613972
> 
> 赞同：1
> 
> 时间：2013-01-30T21:17:26.103
> 
> 标签：c#

我将先前创建的 *.msl、*.ssdl 和 *.csdl 文件插入到我的新项目中，并且在编译期间我在映射部分出现错误：

```
 <AssociationSetMapping Name="FK_application_financial_risk_id" TypeName="Repository.FK_application_financial_risk_id" StoreEntitySet="application">
    <EndProperty Name="application_financial_risk">
      <ScalarProperty Name="risk_id" ColumnName="High_Financial_Risk_id" />
    </EndProperty>
    <EndProperty Name="application">
      <ScalarProperty Name="application_id" ColumnName="application_id" />
    </EndProperty>
    <Condition ColumnName="High_Financial_Risk_id" IsNull="false" />
  </AssociationSetMapping> 
```

> 错误 4 错误 3012：从第 4705、5439、5439、5439、5456、5465、5474、5483 行开始映射片段时出现问题：FK_application_financial_risk_id.application_financial_risk.risk_id 中可能存在数据丢失。在以下情况下，具有密钥 (PK) 的实体将不会往返：（Entity.risk_id = 'True' AND Entity.application_financial_risk.risk_id = 'False' AND PK 在 AssociationSet 'FK_application_financial_risk_id' 中扮演角色 'application'）5440 11 Tracker

我的问题是如果我可以更改上述代码中的某些内容以消除错误？我尝试评论这部分，但它没有帮助。

# css - 具有至少 N 个孩子的节点的 CSS 选择器？

> ID：14613976
> 
> 赞同：2
> 
> 时间：2013-01-30T21:17:38.583
> 
> 标签：css, css-selectors

我想使用 CSS 选择至少有 N 个子节点的节点。如何？

目的是在树中应用色带（“指南”），但前提是父节点下方有六个或更多节点。

我得到的 JS、JQuery 和服务器端脚本建议有些问题，因为大多数子项是使用 Ajax 调用动态加载的。我必须破解注入孩子的代码，以便能够为那些有 6 个以上孩子的父母添加一个班级。这就是为什么在我努力编写代码之前，我想问是否有一种纯 CSS 方法可以做到这一点。不管孩子人数多少，我都可能只是满足于绑扎——虽然不够整洁，但足够公平。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:23:48.610

我建议使用 jQuery if 语句来计算节点，然后添加一个类来应用你想要的样式。

这是一个工作示例：http: [//jsfiddle.net/WarrenBee/YeJyy/5](http://jsfiddle.net/WarrenBee/YeJyy/5)

```
$(document).ready(function() {

    var nodeCount = $('.node').length;

    if( nodeCount > 6 ) {
        $('.node').addClass('nodeStyles');
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:41:51.447

好吧，css3 有一些可以完成这项工作的子选择器。

```
li:first-child:nth-last-child(6),
li:first-child:nth-last-child(6) ~ li {
    ... some style
} 
```

这个解决方案的功劳归功于发现它的 André Luís。当然它不适用于父元素，因为那是 css4 并且还不支持。`li`但是如果有 6 个标签，或者只是第一个标签，您可以设置所有标签的样式`li`。

结合 before 伪元素，您可以在视觉上制作父样式。ul 得到的`position:relative`. 然后你可以用伪元素在父级上伪造样式：

```
li:first-child:nth-last-child(6):before {
  content:'';
  position:absolute;
  top:0;
  left:0;
  z-index:-1;
  width:400px;
  height:20px;
  background:green
} 
```

并非每个浏览器都支持 css 选择器 nth-last-child，但对于 Internet Explorer，您可以使用 javascript 或 IE7.js。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:26:52.530

这在严格意义上是不可能的，因为 CSS 没有提供任何基于子级属性选择父级的方法。

对于严格的 CSS 解决方案，我会向父元素添加一个类，并设置该类的样式。您可以在服务器端以编程方式处理它，而不是在必要时手动添加类。

您当然可以使用 JavaScript 来完成此操作，并且许多可用的 JavaScript 库将简化该过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T21:33:36.770

[CSS 还没有任何类型的父选择器](http://css-tricks.com/parent-selectors-in-css/)。

但是，您可以使用 JavaScript 来执行此操作。以下是一个[jQuery](http://jquery.com/)示例（[小提琴](http://jsfiddle.net/JjGK4/)）：

HTML

```
 <ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
</ul>
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
</ul> 
```

JavaScript：

```
jQuery(function($){
    $('ul').each(function(){
        if($(this).children('li').length >= 6){
            $(this).css('background-color', 'orange');
        }
    });
}); 
```

# ruby - Ruby（on Rails）正则表达式：从数字中删除数千个逗号

> ID：14613980
> 
> 赞同：8
> 
> 时间：2013-01-30T21:17:58.363
> 
> 标签：ruby, regex, ruby-on-rails-3

这似乎是一个简单的，但我错过了一些东西。

我有许多来自各种来源和不同格式的输入。

数字输入

```
123
123.45
123,45 (note the comma used here to denote decimals)
1,234
1,234.56
12,345.67
12,345,67 (note the comma used here to denote decimals) 
```

有关输入的附加信息

*   数字将始终小于 100 万
*   编辑：这些是价格，所以要么是整数，要么是百分之一

我正在尝试编写一个正则表达式并使用 gsub 去除数千个逗号。我该怎么做呢？

我写了一个正则表达式：`myregex = /\d+(,)\d{3}/`

当我在 Rubular 中对其进行测试时，它表明它仅在我想要的测试用例中捕获逗号。

但是当我运行 gsub 时，我得到一个空字符串：`inputstr.gsub(myregex,"")`

看起来 gsub 正在捕获所有内容，而不仅仅是 () 中的逗号。我哪里错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T21:22:38.023

```
result = inputstr.gsub(/,(?=\d{3}\b)/, '') 
```

仅当后面正好是三个数字时才删除逗号。

`(?=...)`是一个前瞻断言：它需要可以在当前位置匹配，但它不会成为实际匹配（并随后被替换）的文本的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:24:56.457

您将“匹配”与“捕获”混淆：“捕获”意味着保存某些内容，以便以后参考。您想捕获的不是逗号，而是其他所有内容，然后使用捕获的部分来构建您的替换字符串。

尝试

```
myregex = /(\d+),(\d{3})/

inputstr.gsub(myregex,'\1\2') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:41:37.643

在您的示例中，**可以**从最后一个分隔符（`,`或`.`）之后的位数判断它是小数点，因为有 2 个单独的数字。对于*大多数*情况，如果最后一组数字没有 3 位，那么您可以假设前面的分隔符是小数点。另一个标志是大数字中分隔符的多次出现使我们能够区分小数点和分隔符。

但是，我可以给出一个字符串，也可以`123,456`不给出`123.456`任何上下文。**分不清**是“12.3万456”还是“123点456”。

您需要扫描文档以寻找线索`,`是用于千位分隔符还是小数点，反之亦然`.`。使用提供的上下文，您可以安全地应用相同的方法来删除千位分隔符。

您可能还想查看Wikipedia 上的[这篇文章](http://en.wikipedia.org/wiki/Decimal_mark)，了解指定分隔符或小数点的不太常见的方法。知道并决定不支持比假设事情会奏效要好。

# r - 更新 XTS 对象

> ID：14613981
> 
> 赞同：4
> 
> 时间：2013-01-30T21:18:04.423
> 
> 标签：r, merge, xts

我一直在努力做一些在 R 上可能非常简单的事情。我想做的是使用另一个 XTS 对象更新 XTS 对象列。

假设我有以下 XTS 对象，名为 Object1：

```
A B
2000-01-03 , 14, NA
2000-01-04 , NA, NA
2000-01-05 , 16, 100
2000-01-06 , NA, 200 
```

以及以下名为 Object2 的 XTS 对象：

```
A
2000-01-05 , 160
2000-01-06 , 20 
```

我正在寻找一种使用 Object2 中的值更新 Object1 的方法，结果如下：

```
A B
2000-01-03 , 14, NA
2000-01-04 , NA, NA
2000-01-05 , 160, 100
2000-01-06 , 20, 200 
```

如果我合并（Object1，Object2），我将拥有：

```
A B A.1
2000-01-03 , 14, NA, NA
2000-01-04 , NA, NA, NA
2000-01-05 , 16, 100, 160
2000-01-06 , NA, 200, 20 
```

这绝对不是我想要的，因为我正在尝试基于 Object2$A 更新 Object1$A。

我在这里想念什么？

这是使此可重现`dput(Object1)`的输出：`dput(Object2)`

```
> dput(Object1)
structure(c(14, NA, 16, NA, NA, NA, 100, 200), .Dim = c(4L, 2L
), index = structure(c(946857600, 946944000, 947030400, 947116800
), tzone = "UTC", tclass = "Date"), .indexCLASS = "Date", tclass = "Date", .indexTZ = "UTC", tzone = "UTC", .Dimnames = list(
    NULL, c("A", "B")), class = c("xts", "zoo"))

> dput(Object2)
structure(c(160, 20), .Dim = c(2L, 1L), index = structure(c(947030400, 
947116800), tzone = "UTC", tclass = "Date"), .indexCLASS = "Date", tclass = "Date", .indexTZ = "UTC", tzone = "UTC", .Dimnames = list(
    NULL, "A"), class = c("xts", "zoo")) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T21:52:15.777

您可以`Object1`使用索引进行子集化`Object2`

```
> Object1[index(Object2), "A"] <- Object2$A
> Object1
             A   B
2000-01-03  14  NA
2000-01-04  NA  NA
2000-01-05 160 100
2000-01-06  20 200 
```

# php - 使用 if 检查 mysql_fetch_array while 循环中的列

> ID：14613982
> 
> 赞同：0
> 
> 时间：2013-01-30T21:18:06.377
> 
> 标签：php, mysql

我是 PHP 的新手，做 MySQL 操作。归结为问题后，数据库有 2 列 - 城市、自治市镇。一些城市有一个自治市镇，并且该领域人口众多。一些城市没有，并且 borough 字段为空。如果填充了 borough 字段，我只想将数据检索到数组中。我的代码如下所示：

```
 while ($row = mysql_fetch_array($fetch, MYSQL_ASSOC)){
        if ( what_column_identifier_goes_here? != null ){
        /* For each row containing borough_data, put it in the return array */
        $row_array['city'] = $row['borough']; 
        array_push($return_arr,$row_array);
        }
    } 
```

我试图寻找答案，但我想不出好的术语。从搜索中，我怀疑这已被弃用。目前，我只想让一些东西工作，然后我将学习 PDO 并在几个脚本中进行大量更改。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:23:14.710

假设您的查询看起来像

```
SELECT city, borough FROM ... 
```

那么你可以使用mysql_fetch_assoc()，它返回一个简单的关联数组：fieldname -> value:（不需要额外的fetch参数）

```
if (!empty($row['borough'])) {
    $city stuff....
} 
```

使用 fetcharray，您必须自己计算位置：

```
SELECT field1,  field2,  field3, ...  <-- in SQL
       $row[0], $row[1], $row[2], ... <--- in PHP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:27:44.190

```
if ($row['borough']) // do something 
```

或者在查询中执行：

```
SELECT city, borough FROM table WHERE borough IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T21:30:18.180

```
SELECT FROM TABLE WHERE borough<>'' 
```

也许这可以快速帮助您。如果您需要更多帮助，请访问 [http://www.w3made.com](http://www.w3made.com/)

# php - 用户友好的午夜倒计时

> ID：14613983
> 
> 赞同：2
> 
> 时间：2013-01-30T21:18:21.647
> 
> 标签：php, time

我有一个在午夜运行的 cron 作业，它重置了当天的所有用户限制。我想向`Your limits reset in 1 hour 14 minutes`我的用户展示一些类似的东西。基本上倒计时到午夜（服务器时间）。

目前我正在使用它来查找午夜：

```
strtotime('tomorrow 00:00:00'); 
```

它返回午夜翻滚时的时间戳，但我不知道如何显示用户友好的倒计时。是否有一个 PHP 库，或者没有库这很容易？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T21:30:28.020

简单地说，这给了你左分钟；

```
$x = time();
$y = strtotime('tomorrow 00:00:00');
$result = floor(($y - $x) / 60); 
```

但是你需要过滤`$result`；

```
if ($result < 60) {
    printf("Your limits rest in %d minutes", $result % 60);
} else if ($result >= 60) {
    printf("Your limits rest in %d hours %d minutes", floor($result / 60), $result % 60);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T21:34:22.460

由于您正在寻找粗略估计，因此您可以省略秒数。

```
$seconds = strtotime('tomorrow 00:00:00') - now();
$hours = $seconds % 3600;
$seconds = $seconds - $hours * 3600;
$minutes = $seconds % 60;
$seconds = $seconds - $minutes *60;

echo "Your limit will reset in $hours hours, $minutes minutes, $seconds seconds."; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T21:23:22.777

这很容易，只需一点数学知识，然后找出当时和现在之间的秒数差异。

```
// find the difference in seconds between then and now
$seconds = strtotime('tomorrow 00:00:00') - time(); 
$hours = floor($seconds / 60 / 60);   // calculate number of hours
$minutes = floor($seconds / 60) % 60; // and how many minutes is that?
echo "Your limits rest in $hours hours $minutes minutes"; 
```

# silverlight - RadDocking 控件中的 Telerik Silverlight PadPane Z-Order 问题

> ID：14613985
> 
> 赞同：1
> 
> 时间：2013-01-30T21:18:31.547
> 
> 标签：silverlight, telerik

我创建了一个包含 RadDocking 控件的用户控件，该控件具有多个窗格，但是当窗格关闭时，它们似乎失去了“z 顺序”。

例如，如果我按以下顺序将 3 个窗格（pane1、pane2、pane3）添加到一个窗格组：pane1、pane2、pane3。

我关闭窗格 3，窗格 1 变为活动窗格而不是窗格 2 - 就好像它回到窗格组中的第一个项目

有任何想法吗？

这是 XAML：

```
<telerik:RadDocking>
    <telerik:RadDocking.DocumentHost>
            <telerik:RadSplitContainer>
                <telerik:RadPaneGroup>
                    <telerik:RadPane x:Name="pane1" Title="pane1">
            <TextBlock Text = "pane1" />
            </telerik:RadPane>

                    <telerik:RadDocumentPane x:Name="pane1" Title="pane2">
            <TextBlock Text = "pane2" />
            </telerik:RadDocumentPane>

                    <telerik:RadPane x:Name="pane3" Title="pane3">
            <TextBlock Text = "pane3" />
            </telerik:RadPane>
        </telerik:RadPaneGroup>
            <telerik:RadSplitContainer>
 <telerik:RadDocking.DocumentHost>
</telerik:RadDocking> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:36:51.753

我收到 Telerik 的回复：

这是我们在 RadControls 的 2012 年第三季度 SP1 版本中修复的已知问题。您需要做的就是下载该版本或之后的任何内部版本。

# jquery - jquery .data 适用于 IE 但不适用于 chrome 或 firefox

> ID：14613989
> 
> 赞同：0
> 
> 时间：2013-01-30T21:19:00.020
> 
> 标签：jquery, asp.net-mvc-3, internet-explorer, google-chrome, firefox

我有一些这样的标记：

```
<li id="myId" data-foo="Bar">Text</li> 
```

在 IE 中，我成功地获得了`data-foo`with的值`$('#myId').data('foo')`，但它在 Chrome 或 Firefox 中没有返回任何内容。

对于它的价值信息：
该页面是由 asp.net mvc 从模板生成的。
尝试访问的函数是`data-foo`从包含上述`<li>`元素的页面启动的弹出窗口中调用的。
我也试过`$('#myId').attr('data-foo')`没有运气

谢谢你尽你所能的帮助

**更新** 该问题与在弹出窗口启动后尝试访问该属性严格相关。

**更新 2**我无法隔离问题以便在 jsfiddle 中复制它。我上面说过，它与弹出弹出窗口后访问属性密切相关，但经过进一步调查，情况并非如此。有几个框架正在使用，我没有时间在所有这些框架中搜索错误，所以我找到了一个解决方法。我只是想感谢大家的努力，并为占用您的时间而投赞成票。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:22:21.657

这适用于我在 Chrome 和 Firefox 中。

[这是我的测试](http://jsfiddle.net/DpjKE/)...

```
<ul>
    <li id="myId" data-foo="Bar">Text</li>
</ul>
<script>
    alert($('#myId').data('foo'));
</script> 
```

这可能失败的最可能原因是您在加载元素之前运行 jQuery，因此请确保您的脚本位于文档的末尾，或者使用`$(document).ready(`语法来确保 DOM 已准备好被查询。

我使用 jQuery 1.9 对此进行了测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:23:36.737

我注意到您在列表项上使用它。您能绝对确定您的 ID 是独一无二的吗？这可能会导致跨浏览器出现一些不同的意外结果。

**编辑：** HTML 中的语法错误是这些问题的主要原因。我建议您逐段删除部分 HTML 代码，直到它按预期工作，然后您可以确定问题出在哪里。

# java - Android BaseAdapters 和多个列表视图

> ID：14613992
> 
> 赞同：0
> 
> 时间：2013-01-30T21:19:04.230
> 
> 标签：java, android, listview, android-listview, adapter

我目前正在为 Android 创建一个基本的新闻聚合器应用程序，到目前为止，我已经设法创建了多个由此派生的 Horizo​​ntalListViews：http: [//www.dev-smart.com/archives/34](http://www.dev-smart.com/archives/34)

我正在解析来自实时 JSON 对象和数组的所有数据。

这个过程是这样的：

1) 启动应用程序
2) 获取一个 JSON 文件，其中列出了要显示的所有提要
3) 解析提要标题和文章链接，将每个链接添加到数组
中 4) 从数组中获取提要数量并为每个提要创建单独的 Horizo​​ntalListView。即“爱尔兰时报”。5）在创建期间将BaseAdapter“mAdapter”应用于每个Horizo​​ntalListView。

我的 baseadapter 负责通过获取每个标题和缩略图来填充我的 Horizo​​ntalListViews。

然而，我的问题是我所有的提要似乎都包含相同的文章和缩略图。现在我只是 Android 的新手，所以我不能 100% 确定这里出了什么问题。请参阅下面的屏幕截图。

我是否需要为每个 Horizo​​ntalListview 创建一个新的 BaseAdaptor，或者我可以使用同一个来用唯一数据填充我的所有列表视图。

这里有一些代码可以帮助解释我的意思：

**1) OnCreate 方法获取 JSON 数据，对其进行解析，获取提要数量并创建每个 Horizo​​ntalListView**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.listviewdemo);

    //--------------------JSON PARSE DATA------------------
    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    String json = jParser.getJSONFromUrl(sourcesUrl);

    //Parse feed titles and article list
    getFeeds(json); 

    //Create Listviews
    for(int i = 0; i < feedTitle.size()-1; i++){
        //getArticleImage(i);
        addHorzListView(i);
        articleArrayCount++;//Used to mark feed count for adaptor to know which array position to look at and retrieve data from.
     //Each array position i.e. [1] represents a HorizontalListview and its related articles 
    }   

} 
```

**2) addHorzListView 方法，用于创建 Horizo​​ntalListView 并应用适配器**

```
//Method used to dynamically add HorizontalListViews
public void addHorzListView(int count){
    LinearLayout mainLayout = (LinearLayout) findViewById(R.id.main_layout);  
    View view = getLayoutInflater().inflate(R.layout.listview, mainLayout,false);

    //Set lists header name
    TextView header = (TextView) view.findViewById(R.id.header);
    header.setText(feedTitle.get(count));

    //Create individual listview
    HorizontalListView listview = (HorizontalListView) view.findViewById(R.id.listviewReuse);
    listview.setAdapter(mAdapter);

    //add listview to array list
    listviewList.add(listview); 

    mainLayout.addView(view, count);    
} 
```

**3) Baseadaptor 本身：**

```
private BaseAdapter mAdapter = new BaseAdapter() {

    private OnClickListener mOnButtonClicked = new OnClickListener() {

        @Override
        public void onClick(View v) {
            AlertDialog.Builder builder = new AlertDialog.Builder(HorizontalListViewDemo.this);
            builder.setMessage("hello from " + v);
            builder.setPositiveButton("Cool", null);
            builder.show();

        }
    };

    @Override
    public int getCount() {
        return noOfArticles.length;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

//Each listview is populated with data here
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View retval = LayoutInflater.from(parent.getContext()).inflate(R.layout.viewitem, null);
        TextView title = (TextView) retval.findViewById(R.id.title);
        title.setText(getArticleTitle(position));
        new DownloadImageTask((ImageView) retval.findViewById(R.id.ImageView01)) .execute(getArticleImage(position));
        Button button = (Button) retval.findViewById(R.id.clickbutton);
        button.setOnClickListener(mOnButtonClicked);

        return retval;
    }

}; 
```

适配器 mAdapter 当前正在显示调用它的最后一个 Horizo​​ntalListView 中的文章。

目前，我为每个 ListView 使用相同的 BaseAdaptor，因为我认为它在调用后立即填充列表视图，但我看起来好像 BaseAdaptor 只能调用一次，我真的不知道。

我想动态填充提要，但不必为每个 Horizo​​ntalListView 手动创建一个新的适配器。

任何帮助将非常感激。

![在此处输入图像描述](../Images/a58a65c38569ff97e5153748d4c5a329.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:23:03.133

所以...你在 4 listview 中得到了相同的信息，对吧？在这种情况下，您只需要 oneAdapter 填充 4 个列表视图。适配器只是将在那一刻可见的视图提供给列表视图（如果它以正确的方式实现），因此如果包含的信息相同，您可以重用适配器。

# get - Concrete5：我可以在常规页面上使用 $_GET 变量作为查询字符串吗？

> ID：14613994
> 
> 赞同：3
> 
> 时间：2013-01-30T21:19:07.333
> 
> 标签：get, query-string, concrete5

$_GET 变量如何与 Concrete5 一起使用？我可以在常规页面上使用它吗？

我知道我可以通过 url 段对单个页面执行此操作，我只是想知道是否可以使用常规页面。

示例是：[http](http://www.domain_name.com/about-us/?name=test) ://www.domain_name.com/about-us/?name=test ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:11:20.530

获取参数可通过控制器获得。在页面或块视图中使用：

```
$this->controller->get("parameterName"); 
```

`function view()`自定义参数的一种更简洁的方法是在页面控制器中定义它们。如果[http://www.domain_name.com/about-us](http://www.domain_name.com/about-us)是您的页面，并且您定义它的页面类型控制器的视图功能，如下所示：

```
function view($name) {
    $this->set("name", $name);
} 
```

... 并调用 URL [http://www.domain_name.com/about-us/test](http://www.domain_name.com/about-us/test) - 然后“测试”将传递`$name`到您的页面视图。

请注意，页面类型的控制器必须在**controllers/page_types/**中并调用`BlablaPageTypeController`... 并且“PageType”字面意思是在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:00:30.793

您可以在模板中使用它。例如，您可以获取一个变量...

```
$sort_by = $_GET['sort']; 
```

然后在 PageList 查找中使用该变量，类似于：

```
$pl = new PageList();  
$ctHandle = "teaching";
// Available Filters
$pl->filterByCollectionTypeHandle($ctHandle); //Filters by page type handles.
// Sorting Options

if ($sort_by == "name") {
   $pl->sortByName();
} else {
   $pl->sortBy('teaching_date', 'desc'); // Order by a page attribute
}

// Get the page List Results 
$pages = $pl->getPage(); //Get all pages that match filter/sort criteria.
$pages = $pl->get($itemsToGet = 100, $offset = 0); 
```

然后您可以遍历该数组以打印出东西...例如

```
if ($pages) {
  foreach ($pages as $page){
echo '<a href="'.$page->getCollectionPath().'">'.$page->getCollectionName() . '</a><br />';
  }
} 
```

PageList 代码的[C5 备忘单的道具。](http://www.weblicating.com/doku/doku.php?id=cheatsheet/#.UQmZt1pxd-I)

# java - Scala 通过分隔符拆分列表的惯用方式是什么？

> ID：14613995
> 
> 赞同：13
> 
> 时间：2013-01-30T21:19:10.867
> 
> 标签：java, list, scala

如果我有一个字符串类型的列表，

```
scala> val items = List("Apple","Banana","Orange","Tomato","Grapes","BREAK","Salt","Pepper","BREAK","Fish","Chicken","Beef")
items: List[java.lang.String] = List(Apple, Banana, Orange, Tomato, Grapes, BREAK, Salt, Pepper, BREAK, Fish, Chicken, Beef) 
```

如何`n`根据某个字符串/模式（`"BREAK"`在本例中为 ）将其拆分为单独的列表。

我已经考虑过找到`"BREAK"`with的位置`indexOf`，并以这种方式拆分列表，或者使用类似的方法 with`takeWhile (i => i != "BREAK")`但我想知道是否有更好的方法？

如果有帮助，我知道列表中只会有 3 组项目`items`（因此有 2 个`"BREAK"`标记）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T21:36:50.657

```
def splitBySeparator[T](l: List[T], sep: T): List[List[T]] = {
  l.span( _ != sep ) match {
    case (hd, _ :: tl) => hd :: splitBySeparator(tl, sep)
    case (hd, _) => List(hd)
  }
} 
```

```
val items = List("Apple","Banana","Orange","Tomato","Grapes","BREAK","Salt","Pepper","BREAK","Fish","Chicken","Beef")
splitBySeparator(items, "BREAK") 
```

结果：

```
res1: List[List[String]] = List(List(Apple, Banana, Orange, Tomato, Grapes), List(Salt, Pepper), List(Fish, Chicken, Beef)) 
```

**更新：**上述版本虽然简洁有效，但有两个问题：它不能很好地处理边缘情况（如`List("BREAK")`or `List("BREAK", "Apple", "BREAK")`，并且不是尾递归。所以这是另一个（命令式）版本来解决这个问题：

```
import collection.mutable.ListBuffer
def splitBySeparator[T](l: Seq[T], sep: T): Seq[Seq[T]] = {
  val b = ListBuffer(ListBuffer[T]())
  l foreach { e =>
    if ( e == sep ) {
      if  ( !b.last.isEmpty ) b += ListBuffer[T]()
    }
    else b.last += e
  }
  b.map(_.toSeq)
} 
```

它在内部使用`ListBuffer`，很像`List.span`我在第一个版本中使用的`splitBySeparator`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T22:00:33.417

另外的选择：

```
val l = Seq(1, 2, 3, 4, 5, 9, 1, 2, 3, 4, 5, 9, 1, 2, 3, 4, 5, 9, 1, 2, 3, 4, 5)

l.foldLeft(Seq(Seq.empty[Int])) {
  (acc, i) =>
    if (i == 9) acc :+ Seq.empty
    else acc.init :+ (acc.last :+ i)
}

// produces:
List(List(1, 2, 3, 4, 5), List(1, 2, 3, 4, 5), List(1, 2, 3, 4, 5), List(1, 2, 3, 4, 5)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:49:50.240

这也不是尾递归的，但在边缘情况下确实可以：

```
def splitsies[T](l:List[T], sep:T) : List[List[T]] = l match {
  case head :: tail =>
    if (head != sep)
      splitsies(tail,sep) match {
        case h :: t => (head :: h) :: t
        case Nil => List(List(head))
      }
    else
      List() :: splitsies(tail, sep)
  case Nil => List()
} 
```

唯一烦人的事：

```
scala> splitsies(List("BREAK","Tiger"),"BREAK")
res6: List[List[String]] = List(List(), List(Tiger)) 
```

如果您想更好地处理以分隔符开头的情况，请查看 Martin 的[回答](https://stackoverflow.com/a/7293881/47978)中使用 span 的内容（对于一个稍微不同的问题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T21:33:15.233

这个怎么样：用于`scan`确定列表中的每个元素属于哪个部分。

```
val l = List("Apple","Banana","Orange","Tomato","Grapes","BREAK","Salt","Pepper","BREAK","Fish","Chicken","Beef")
val count = l.scanLeft(0) { (n, s) => if (s=="BREAK") n+1 else n } drop(1)
val paired = l zip count
(0 to count.last) map { sec => 
  paired flatMap { case (x, c) => if (c==sec && x!="BREAK") Some(x) else None }  
}
// Vector(List(Apple, Banana, Orange, Tomato, Grapes), List(Salt, Pepper), List(Fish, Chicken, Beef)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-06T16:34:11.333

## 使用 List.unfold（Scala 2.13 及更高版本）：

```
val p: String => Boolean = _ != "BREAK"

val result: List[List[String]] = List.unfold(items) {
  case Nil =>
    None
  case l if p(l.head) =>
    Some(l.span(p))
  case _ :: tail =>
    Some(tail.span(p))
} 
```

代码在[Scastie](https://scastie.scala-lang.org/toshetah/CoLV3owdTdeosMMBhqnqgA/3)运行。

## 使用`reverse`+ `foldLeft`：

```
def splitAtElement[T](list: List[T], element: T): List[List[T]] = {
  list.reverse.foldLeft(List(List[T]()))((l, currentElement) => {
    if (currentElement == element) {
      List() :: l
    } else {
      (currentElement :: l.head) :: l.tail
    }
  })
} 
```

代码在[Scastie](https://scastie.scala-lang.org/toshetah/QC0FSV3kQL64v51dpveexg/2)运行。

## 使用`foldRight`：

```
def splitBySeparator[T](list: List[T], sep: T): List[List[T]] = {
  list.foldRight(List(List[T]()))((s, l) => {
    if (sep == s) {
      List() :: l
    } else {
      (s :: l.head) :: l.tail
    }
  }).filter(_.nonEmpty)
} 
```

代码在[Scastie](https://scastie.scala-lang.org/toshetah/T2sLha3qRJmz7LlRx2WqyA/1)运行。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-06-18T16:01:28.563

```
val q = items.mkString(",").split("BREAK").map("(^,|,$)".r.replaceAllIn(_, "")).map(_.split(",")) 
```

这里的“，”是一个唯一的分隔符，它不会出现在项目列表的任何字符串中。如果需要，我们可以选择不同的分隔符。

`items.mkString(",")`将所有内容组合成一个字符串

```
.split("BREAK") // which we then split using "BREAK" as delimiter to get a list

.map("(^,|,$)".r.replaceAllIn(_, "")) // removes the leading/trailing commas of each element of the list in previous step

.map(_.split(",")) // splits each element using comma as seperator to give a list of lists

scala> val q = items.mkString(",").split("BREAK").map("(^,|,$)".r.replaceAllIn(_, "")).map(_.split(","))
q: Array[Array[String]] = Array(Array(Apple, Banana, Orange, Tomato, Grapes), Array(Salt, Pepper), Array(Fish, Chicken, Beef))

scala> q(0)
res21: Array[String] = Array(Apple, Banana, Orange, Tomato, Grapes)

scala> q(1)
res22: Array[String] = Array(Salt, Pepper)

scala> q(2)
res23: Array[String] = Array(Fish, Chicken, Beef) 
```

# iphone - 子类化 UITableView 所以它不需要 xib

> ID：14613998
> 
> 赞同：2
> 
> 时间：2013-01-30T21:19:26.303
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我制作了一个只包含 IB 中的 UITableView 的 XIB。我注意到可以继承 UITableViewController 并完全取消 xib。

我的问题是，你是怎么做到的？

到目前为止，我唯一改变的是我的 .h 是......

```
 @interface MyView : UITableViewController 
```

并删除了我的 XIB。显然我得到一个错误，指出

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', 
reason: 'Could not load NIB in bundle: 'NSBundle  (loaded)' with <path>
 name 'MyView'' 
```

所以我的问题是，为了正确完成这个子类化，还剩下什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T22:01:03.350

在 iOS 中设置视图控制器有两种方法。

*   使用 .xib 文件：您使用 实例化视图控制器`-initWithNibName:bundle:`，将 .xib 文件的名称作为第一个参数传递，并且（除非您正在做一些高级的事情）`nil`作为第二个参数。操作系统将查找您的 .xib 文件并将其反序列化为一堆对象并将它们附加到您的视图控制器。然后操作系统调用你的视图控制器子类的`-viewDidLoad:`方法，在那里你完成设置。
*   `-init`以编程方式：您使用或为表视图控制器实例化视图控制器`initWithStyle:`。操作系统然后调用您的子类的`-loadView`方法，您可以在其中手动实例化视图层次结构。

听起来您只需要使用`-initWithStyle:`而不是`-initWithNibName:bundle:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:50:22.120

如果你有一个没有 .xib 的 ViewController，你可以在视图中创建一个 tableview 加载或其他东西。

```
UITableView *table = [[[UITableView alloc] initWithStyle:UITableViewStylePlain] autorelease];
table.dataSource = self;
table.delegate = self;
table.frame = CGRectMake(0, 10, self.view.frame.size.width, self.view.frame.size.height);
[self.view addSubview:table]; 
```

然后你只需要像在 UITableViewController 中那样实现正确的委托和数据源方法。