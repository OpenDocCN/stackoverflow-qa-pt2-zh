# StackOverflow 问答 14298000-14298999

# jquery - jquery.fancybox.js 杀死了我的 CSS3 页面转换模板

> ID：14298001
> 
> 赞同：0
> 
> 时间：2013-01-12T21:12:49.863
> 
> 标签：jquery, css, fancybox, fancybox-2

我有一个我真的无法解决的问题，希望你们能帮助我，因为我在 css/js 方面相对较新。我正在尝试使用整洁的 CSS3 Page Transitions 模板和 fancybox 库。

一切都好，但是当我使用`jquery.fancybox.js`模板菜单链接不再起作用时，我单击它们并没有任何反应，不再发生转换。我怀疑两者都使用`href`s 有关系（模板是一个使用 s 的单页网站，调用图片`href`也是如此吗？）`.js`

抱歉我的英语不好并且没有成熟的问题，希望有人知道我在说什么并可以帮助我。干杯!

编辑：

非常感谢您的帮助，这里有 2 个链接，请注意页面上的所有内容都是我从网上复制的代码，没有任何内容是我的，仅用于测试目的。

[不使用 jquery fancybox](http://www.cabinsinny.com/test/#portfolio)

这个你可以看到 jquery 正在发挥它的魔力，当你点击在投资组合中查看图像时，图像会正确显示，但菜单不再工作，你无法导航。

[在没有 jquery fancybox 的情况下工作](http://www.cabinsinny.com/test/test1/)

这个没有jsquery的你可以看到导航正常工作并且页面转换发生但是当你点击投资组合中的视图缩略图时你只会看到.jpeg，当然......并且无法浏览图片。

非常感谢您的帮助，希望这是可以修复的，这样我就可以在页面转换工作的情况下拥有一个工作的 jquery fancybox 图像视图！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:49:31.327

杀死你的 CSS3 转换的不是花式框。问题是由您的[script.js](http://www.roxannecook.com/js/script.js)文件中的这一行创建的：

```
$('a').bind('click', function (event) {
  var $anchor = $(this);
  $('html, body').stop().animate({
    scrollTop: $($anchor.attr("href")).offset().top
  }, 1000, "easeOutExpo");
  event.preventDefault();
}); 
```

...您将网页中的**所有**`event.preventDefault()`锚点设置为，包括fancybox绑定到的那些锚点（ ）。**`<a class="fancybox" ...>`**

 **例如，如果您注释掉，`event.preventDefault()`那么您将让 fancybox 和 CSS3 过渡无缝地工作。

见**[JSFIDDLE](http://jsfiddle.net/aYCpC/show/lite/#portfolio)**

一般来说，绑定事件或将 css 规则应用于一般元素或标签并不是一个好主意，而是使用特异性，主要是当你有几个插件将其他事件绑定到这些元素时......所以而不是这样做

```
$('a') 
```

做

```
$('a.selector') 
```**

# google-app-engine - Google App Engine Maven 插件 1.7.4 -appengine-maven-plugin - 配置 (appId) 和 artifactId

> ID：14298004
> 
> 赞同：3
> 
> 时间：2013-01-12T21:13:20.337
> 
> 标签：google-app-engine

我正在使用 appengine-maven-plugin（SDK 版本 1.7.4）。我创建了一个基于留言簿原型的示例 Maven 项目。

我的 artifactid 是“myApplication”，但我的 GAE appId 是其他东西，例如 myGAEApplication。

我正在尝试使用

mvn appengine:update 目标，我用类似的东西改变了我的 pom.xml

* * *

```
 <plugin>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-maven-plugin</artifactId>
            <version>${appengine.target.version}</version>
            <configuration>

                <appId>myGAEApplication</appId> 
```

* * *

但这似乎不起作用。关于拥有不同 artifactId 和不同 GAE 应用程序 ID 的任何想法。它应该可以工作，但我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T04:17:14.140

通过将 application-web.xml 文件中的应用程序 ID 更改为我的 appengine 帐户中的应用程序 ID，我让它与示例留言簿应用程序一起使用。

# iphone - 在横向模式下重新定位按钮 - 干净的方法？

> ID：14298006
> 
> 赞同：1
> 
> 时间：2013-01-12T21:13:47.240
> 
> 标签：iphone, ios, objective-c

这是一个非常简单（可能很愚蠢）的问题，但我似乎找不到最干净和最好的方法。我有三个按钮，在纵向模式下看起来不错。我还可以通过添加 autoResizingMasks 来使中心始终居中：

```
[self.centerButton setAutoresizingMask:UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin]; 
```

但是，我不确定处理左右按钮的最佳方式。见下图；我需要的是让他们稍微移动一下，在中间和左/右边缘之间居中： ![在此处输入图像描述](../Images/56da472c67f7937750c29cf27f4e6300.png)

对于这个可能愚蠢的问题，我很抱歉，因为我确信这可以通过 IB 或（最好）代码相当容易地完成，但我只是想了解正确和最干净的方法。提前致谢！

**编辑**

一些附加信息，我正在使用 iPad，底部的按钮实际上包含在底部的一个名为“buttonPanel”的子视图中。

根据其中一个答案的建议，我添加了以下代码；见下文。但是，我只得到“无法同时满足约束”。添加此代码时出错，并且当它列出约束时，它只列出下面的那些，因此此视图上没有其他附加约束。下面的代码有问题吗？担心我在这里遗漏了一些明显的东西..

```
- (void) viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self.buttonPanel removeConstraint:conLeft];
    [self.buttonPanel removeConstraint:conRight];

    float paddingPortrait = 20; // pd
    float paddingLandscape = 50; // ld
    float widthOfView = 768;
    float heightOfView = 249;

    float denominatorVal = heightOfView - widthOfView;

    float leftMultiplier = (paddingLandscape - paddingPortrait) / denominatorVal;
    float rightMultiplier = (denominatorVal + paddingPortrait - paddingLandscape) / denominatorVal;
    float leftConstant = paddingPortrait - (widthOfView * leftMultiplier);
    float rightConstant = -leftConstant;

    conLeft = [NSLayoutConstraint constraintWithItem:self.leftButton attribute:NSLayoutAttributeLeading relatedBy:0 toItem:self.buttonPanel attribute:NSLayoutAttributeRight multiplier:leftMultiplier constant:leftConstant];
    conRight = [NSLayoutConstraint constraintWithItem:self.rightButton attribute:NSLayoutAttributeTrailing relatedBy:0 toItem:self.buttonPanel attribute:NSLayoutAttributeRight multiplier:rightMultiplier constant:rightConstant];
    [self.buttonPanel addConstraints:@[conRight,conLeft]];
} 
```

这是抛出的错误：

```
Unable to simultaneously satisfy constraints.
Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 

  "(NSAutoresizingMaskLayoutConstraint:0x8b36ce0 h=&-& v=&-- H:[UIButton:0x8874200(166)])",
"(NSAutoresizingMaskLayoutConstraint:0x8b38720 h=&-& v=&-- H:[UIImageView:0x8877880(200)])",
"(NSAutoresizingMaskLayoutConstraint:0x8b38640 h=&-& v=&-- UIImageView:0x8877880.midX == 0.165365*UIView:0x8876c00.width)",
"(NSLayoutConstraint:0x8b3a780 UIImageView:0x8877880.leading == 0.127119*UIView:0x8876c00.right - 77.6271)",
"(NSLayoutConstraint:0x8b3a6a0 UIButton:0x8874200.trailing == 0.872881*UIView:0x8876c00.right + 77.6271)",
"(NSAutoresizingMaskLayoutConstraint:0x8b36ca0 h=&-& v=&-- UIButton:0x8874200.midX == 0.848958*UIView:0x8876c00.width)" 
```

)

将尝试通过打破约束来恢复 (NSLayoutConstraint:0x8b3a6a0 UIButton:0x8874200.trailing == 0.872881*UIView:0x8876c00.right + 77.6271)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:53:25.583

如果您使用布局约束，您可以结合在 IB 中设置按钮，然后在代码中调整它们来实现。将中间按钮居中并将 2 个外部按钮与边缘的标准距离（即 20 点）。使IBOutlets为左右约束，在viewWillLayoutSubviews方法中改变：

```
 @implementation ViewController {
 IBOutlet NSLayoutConstraint *conLeft;
 IBOutlet NSLayoutConstraint *conRight;
}

- (void)viewWillLayoutSubviews {
    if (self.view.bounds.size.width > self.view.bounds.size.height) {
        conLeft.constant = 50;
        conRight.constant = 50;
    }else{
        conLeft.constant = 20;
        conRight.constant = 20;
    }
} 
```

**编辑后：**

Rob 关于使用 constraintWithItem 是正确的——如果你为乘数和常数输入正确的值，当视图旋转时你不需要做任何事情，约束系统会处理它。因此，使用我在上面设置的相同按钮，您可以这样做：

```
@implementation ViewController {
    IBOutlet NSLayoutConstraint *conLeft;
    IBOutlet NSLayoutConstraint *conRight;
    IBOutlet UIButton *lButton;
    IBOutlet UIButton *rButton;
}

-(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self.view removeConstraint:conLeft];
    [self.view removeConstraint:conRight];
    conLeft = [NSLayoutConstraint constraintWithItem:lButton attribute:NSLayoutAttributeLeading relatedBy:0 toItem:self.view attribute:NSLayoutAttributeRight multiplier:0.1316 constant:-22.11];
    conRight = [NSLayoutConstraint constraintWithItem:rButton attribute:NSLayoutAttributeTrailing relatedBy:0 toItem:self.view attribute:NSLayoutAttributeRight multiplier:0.8684 constant: 22.11];
    [self.view addConstraints:@[conRight,conLeft]];
} 
```

所以我删除了在 IB 中制作的左右约束（但留下了在那里制作的任何其他约束）并在代码中重新制作它们。请注意，两个按钮的位置都参考了视图的右侧（在 iPhone 上的值为 320），因此您可以同时使用乘数和常量（左侧的值为 0，因此乘数在那里不会有用）。需要一些代数和基本的约束公式来确定这些值应该是什么。在这种情况下（iPhone 4"），公式为：

对于左键：乘数 = (ld - pd)/228

对于右键：乘数 = (228 + pd - ld)/228（请注意，它也等于 1-左按钮乘数）

pd 是与纵向边缘的距离（在我的示例中为 20 或标准）

ld 是距横向边缘的距离（在我的示例中为 50）

常数值可以通过将左键乘数的值代入下式来计算：320 * 乘数 + 常数 = pd

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:46:28.050

**简单的方法**

您可以在水平轴上免费使用这些按钮。在这种情况下，横向/纵向的右/左按钮和适当的视图边框之间会有更多的空间。

![在此处输入图像描述](../Images/f852ddcc687fc652ef6c0ae6d39341b9.png)

**(第二条路径)iOS6方式：**

在 iOS6 中，您可以使用自动布局和约束。它太有用了。你可以用它做任何你想做的事情。

有很多关于它的教程。我试图准确地找到您的问题，但失败了。[我在这里](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)触及了自动布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:41:14.603

对其他两个按钮也使用自动调整大小的蒙版。对于左下角的圆圈，将其设置为灵活的顶部和灵活的右侧。对于右下角的圆圈，使用灵活的顶部和灵活的左侧。

编辑-我刚刚注意到您似乎希望外部边距在横向上增加一点。我的解决方案不会那样做。事实上，基本的自动调整大小蒙版无法处理这种情况。

您最好的`viewWillLayoutSubviews`方法可能是实现视图控制器的方法并手动设置圆圈的视图以满足您的需要。

# mysql - MySQL 数据库导入程序

> ID：14298014
> 
> 赞同：0
> 
> 时间：2013-01-12T21:14:51.527
> 
> 标签：mysql, database

我正在做的工作涉及将产品从 CSV 文件导入到已经上线的 WooCommerce 网站。我想知道在执行像这样修改数据库的脚本之前是否需要采取任何预防措施。

我的假设是备份数据库，暂时使站点脱机，执行脚本，然后使站点重新联机。还有什么我应该做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:21:18.930

我只会备份数据库，因为尽管如果插入错误的东西不会被删除，但删除所有内容并插入两个文件比尝试遍历所有内容并删除新导入的数据更容易。除此之外，我认为您不需要暂时关闭您的网站；假设它没有插入数十万行，该脚本应该很快完成。但是如果你想把它拿下来一段时间，以防万一这完全基于你喜欢的任何一个（不是必要的）。最重要的是在执行之前确保您的导入方法是正确的。除了这几件事，你应该都准备好了。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:32:02.877

对于电子商务之类的东西，我会说进行完整备份（不仅仅是数据库），然后将它们恢复到某个地方，例如子域，检查一切是否正常，然后将其推送。在恢复和匹配两者之前，您可能需要获取客户订单的副本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:23:45.270

据我所知，这就足够了。正如@Devon Bernad 所说，除非您与前端有关，否则您不必离线。祝你好运。:)

# xslt-2.0 - 遍历包含 CDATA 的节点并连接它们以及如何检索连接数据的特定数据

> ID：14298020
> 
> 赞同：4
> 
> 时间：2013-01-12T21:15:20.010
> 
> 标签：xslt-2.0, xpath-3.0, xslt-3.0

我是 XSLT 的新手，需要解决一个棘手的问题，但我没有任何改变来解决它。以下示例描述了我的问题：

```
<a>
  <b1><![CDATA[<CdtrRefInf><Issr>XXX</Issr></Tp><Ref>123456123]]></b1>
  <b2><![CDATA[193</Ref></CdtrRefInf>]]></b2>
</a> 
```

预期的结果应该是：

```
<a>
  <b1>123456123193<b1>
</a> 
```

我需要遍历元素 b1 和 b2 并将内容连接到一个变量中。然后我需要获取 Ref 元素的内容并将其放入 b1 元素中。以下代码将字段 b1 和 b2 的内容连接在一起。但是如何把它放在上面的格式中？？？？？？

```
<xsl:template match="/*">
    <xsl:variable name="vMyVars">
        <xsl:apply-templates select="b1 | b2 " mode="vMyVars"/>
    </xsl:variable>
    <xsl:value-of select="substring($vMyVars, -1, string-length($vMyVars))"/>
</xsl:template>

<xsl:template match="*" mode="vMyVars"/>

<xsl:template match="*[normalize-space()]" mode="vMyVars">
    <xsl:value-of select="."/>
    <!--<xsl:text>, </xsl:text>-->
</xsl:template> 
```

欢迎任何建议。问候德克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T03:33:29.870

**为此，您需要 XPath 3.0 (XSLT 3.0)。只需使用**：

```
 parse-xml(concat(/*/b1, /*/b2))/*/Ref/text() 
```

**您还需要更正 CDATA 部分内的文本**——它包含`</Tp>`一个没有相应起始标记的结束标记。我将其更正为：`<Tp/>`.

**对所提供的 XML 文档进行此更正后，现在是**：

```
<a>
  <b1><![CDATA[<CdtrRefInf><Issr>XXX</Issr></Tp><Ref>123456123]]></b1>
  <b2><![CDATA[193</Ref></CdtrRefInf>]]></b2>
</a> 
```

**对上述 XML 文档的上述 XPath 3.0 表达式的评估产生了所需的正确结果**：

```
123456123193 
```

**我使用这个 XQuery 3.0 通过 BaseX 验证了这一点**：

```
let $top :=
<a>
  <b1><![CDATA[<CdtrRefInf><Issr>XXX</Issr><Tp/><Ref>123456123]]></b1>
  <b2><![CDATA[193</Ref></CdtrRefInf>]]></b2>
</a>

 return
    parse-xml(concat($top/b1, $top/b2))/*/Ref/text() 
```

* * *

**二、XSLT 2.0 中的解决方案**

XSLT 2.0 不提供将字符串解析为 XML 文档/片段的简单函数或指令。

在 Saxon 中，可以使用**[saxon:parse()](http://www.saxonica.com/documentation/extensions/functions/parse.xml)**扩展函数：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:saxon="http://saxon.sf.net/">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
     <xsl:copy-of select="saxon:parse(concat(/*/b1, /*/b2))/*/Ref/text()"/>
 </xsl:template>
</xsl:stylesheet> 
```

**在提供的 XML 文档上使用 Saxon 9.1.07 执行此转换时**：

```
<a>
  <b1><![CDATA[<CdtrRefInf><Issr>XXX</Issr><Tp/><Ref>123456123]]></b1>
  <b2><![CDATA[193</Ref></CdtrRefInf>]]></b2>
</a> 
```

**产生了想要的正确结果**：

```
123456123193 
```

# actionscript-3 - 从数组中删除项目数组

> ID：14298021
> 
> 赞同：2
> 
> 时间：2013-01-12T21:15:32.957
> 
> 标签：actionscript-3

我想出了这个简单的片段。

```
var a:Array = new Array( 1,2,3,4,5,6,7,8);
var b:Array = new Array( 6,7,8 ) //<<<These items need to be removed from a 

public function removeItemsFromAThatAreListedInB(a:Array, b:Array )
{
    for ( var i=0 ; i< a.length ;i++)
    {

        for ( var j=0 ; j< b.length ; j++)
        {
            if ( (a[i]) == (b[j])  )
            {
                a.splice(i,1) 
            }

        }

    }

} 
```

只是想确定，如果有人有更好的“优化”和“更快”的方式来做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:22:40.983

与[此问题](https://stackoverflow.com/questions/7669555/javascript-remove-array-from-array)的公认答案一样，您可以简化函数以使用`filter`和`indexOf`。

```
a = a.filter(function(item) {
    return b.indexOf(item) === -1;
}); 
```

这样做只会牺牲对 IE8 及以下版本的支持。

这是一个纯 javascript 示例：http: [//jsfiddle.net/crowjonah/dfqSE/2/](http://jsfiddle.net/crowjonah/dfqSE/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T21:25:07.807

对于 O(n) 解决方案而不是 O(n*m)，将 B 中的值放入对象中：

```
var i, o = {};
for (i = 0; i < b.length; i++) {
  o[b[i]] = 1;
}
for (i = a.length - 1; i >= 0; i--) {
  if (o.hasOwnProperty(a[i])) {
    a.splice(i,1) 
  }
} 
```

如果您知道数组已排序，那么您可以并行循环它们：

```
var i = 0, j = 0;
var r = [];
while (i < a.length) {
  if (a[i] < b[j]) {
    r.push(a[i]);
    i++;
  } else {
    if (a[i] == b[j]) i++;
    j++;
  }
}
a = r; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T21:24:03.187

使用[下划线](http://underscorejs.org/#difference)：

```
_.difference([1,2,3,4,5,6,7,8], [6,7,8]);
=> [1,2,3,4,5] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T21:57:16.417

这在动作脚本中有效吗？

```
for (var pos,i=0, n=b.length;i<n;i++) {
  pos = a.indexOf(b[i]);
  if (pos!=-1) a.splice(pos,1);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T22:12:33.320

这些答案中的大多数看起来都是针对 JavaScript 的。由于粘贴的代码看起来是 AS3，我想你可能想要这样的东西。

尝试使用 Array.indexOf 而不是第二个循环

```
public function removeItemsFromAThatAreListedInB(a:Array, b:Array){
    for(var i:int = 0 ; i < b.length ; b++){ 
         var index:int = a.indexOf(b[i]); //returns -1 if the element is not found.
                                         //this method uses the strict equality to compare
         if(index != -1){         
            a.splice(index, 1); //remove the element from a
        }
    }

} 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#indexOf%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#indexOf%28%29)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T21:23:15.380

您的实现需要 O(n*m) 时间，n = A.size, m = B.size。如果首先对数组 A 进行排序 (O(n*logn)) 并在数组 A 上使用二进制搜索 (O(m*logn))，则需要 O(n*logn + m*logn)，即 O(n* logn) 如果 n>m

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-12T22:27:36.150

要删除当前：

```
removeChild(a[i]); a.pop(); 
```

或与 b

```
removeChild(b[j]); b.pop(); 
```

`pop();`是删除最后一个数组项的方法，然后您需要删除该项本身，使用 removeChild，还删除您给它的每个事件（`a.removeEventListener(Event.ENTER_FRAME);`等

pop 常用于子弹，当子弹击中敌人时，你做两个循环

```
for(var i:int < bulletsarray.length; i++) {
for(var j:int < var enemynumber:int = 4; j++) {
if(bulletsarray[i].hitTestObject(enemyarray[j])) {
removeChild(bulletsarray[i]);
bulletsarray.pop();
removeChild(enemy_array[i]);
}
}
}
} 
```

这段代码是原始的，可能需要一些编辑。

# ios - 返回基线状态后的堆增长

> ID：14298026
> 
> 赞同：2
> 
> 时间：2013-01-12T21:15:51.940
> 
> 标签：ios, xcode, cocos2d-iphone

我试图理解为什么仪器会说以下代码中的指示行导致脏内存增长。返回基线状态后，我在第二次堆射击（基线之后）中得到了这个。谁能指出我的错误？

```
CCSprite *baseSprite = NULL;
CCSprite *mainHandSprite = NULL;
CCSprite *offHandSprite = NULL;
CCSprite *helmetSprite = NULL;
CCSprite *torsoSprite = NULL;
CCSprite *gloveSprite = NULL;
CCSprite *bootSprite = NULL;

NSString* afile = [NSString stringWithFormat:@"%@%i.PNG", file, num];
baseSprite = [[CCSprite alloc]initWithFile:afile];   /* HEAP GROWTH */
baseSprite.anchorPoint = ccp(0,0);

int w = baseSprite.textureRect.size.width;
int h = baseSprite.textureRect.size.height;

mainHandSprite = [self mainHandSprite:file And:num];
helmetSprite = [self headSprite:file And:num];
torsoSprite = [self torsoSprite:file And:num];
offHandSprite = [self shieldSprite:file And:num];
gloveSprite = [self gloveSprite:file And:num];
bootSprite = [self bootSprite:file And:num];

CCRenderTexture *rt = [CCRenderTexture renderTextureWithWidth:w height:h]; /*HEAP GROWTH */

[rt begin];

[baseSprite visit];
if (torsoSprite)
    [torsoSprite visit];
if (helmetSprite)
    [helmetSprite visit];
if (offHandSprite)
    [offHandSprite visit];
if (bootSprite)
    [bootSprite visit];
if (gloveSprite)
    [gloveSprite visit];
if (mainHandSprite)
    [mainHandSprite visit];

[rt end];

CCTexture2D *aTex = rt.sprite.texture;
[aTex setAntiAliasTexParameters];

[baseSprite release];
baseSprite = NULL;
[mainHandSprite release];
mainHandSprite = NULL;
[torsoSprite release];
torsoSprite = NULL;
[helmetSprite release];
helmetSprite = NULL;
[offHandSprite release];
offHandSprite = NULL;
[gloveSprite release];
gloveSprite = NULL;
[bootSprite release];
bootSprite = NULL;

return aTex; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:25:55.767

该消息仅说明实例的创建位置，而不是泄漏的位置。

该变量`baseSprite`保留在其他地方，没有平衡释放。

For`rt`要么`CCRenderTexture`返回一个未自动释放的对象，要么变量在其他地方保留而没有平衡释放。

如果您需要查看对象使用工具的保留、释放和自动释放发生的位置：

在仪器中运行，在分配中设置“记录参考计数”（您必须停止记录才能设置选项）。导致问题代码运行，停止记录，搜索感兴趣的 ivar，向下钻取，您将能够看到所有保留、释放和自动释放发生的位置。

![在此处输入图像描述](../Images/7838716286f7948b8b94a93abc6764ae.png)

# android - 使用 OpenGL ES 2.0 将 YUV420P 转换为 RGBA

> ID：14298028
> 
> 赞同：1
> 
> 时间：2013-01-12T21:15:54.300
> 
> 标签：android, opengl-es, opengl-es-2.0, yuv

我正在使用 Android 上的 OpenGL ES 2.0 处理视频。图片数据被提取为 YUV420P，我需要以某种方式在我的 OpenGL 片段着色器中以 RGBA 处理它们。

如何将 YUV420P 数据转换为 RGBA？（性能是关键，因为它是视频）

更新：感谢 Brad Larsson 的回答，但它看起来不正确。

UPDATE2：呃，我还在使用我的 RGBA 片段着色器。当然看起来不对。现在我有另一个问题。让我进一步挖掘。

UPDATE3：好的，这里有什么不妥。

![在此处输入图像描述](../Images/1a0d3d040f6e0b4128633898b535ef6f.png)

我将它用于纹理。这个对吗？

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, width, height, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, luminanceBuffer);
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, width / 2, height / 2, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, chrominanceBuffer); 
```

UPDATE4：使用`GL_LUMINANCE_ALPHA`对隔行扫描问题进行排序，但图片仍然损坏但是...我刚刚了解到问题出在我的字节缓冲区中，因此将其标记为已回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:01:36.247

Apple has a couple of examples for iOS where they convert from YUV420 planar data to RGBA in an OpenGL ES 2.0 shader. While not specifically for Android, you should still be able to use this GLSL shader code to accomplish what you want.

This is what I use in a conversion fragment shader based on their example:

```
 varying highp vec2 textureCoordinate;

 uniform sampler2D luminanceTexture;
 uniform sampler2D chrominanceTexture;

 void main()
 {
     mediump vec3 yuv;
     lowp vec3 rgb;

     yuv.x = texture2D(luminanceTexture, textureCoordinate).r;
     yuv.yz = texture2D(chrominanceTexture, textureCoordinate).rg - vec2(0.5, 0.5);

     // BT.601, which is the standard for SDTV is provided as a reference
     /*
      rgb = mat3(      1,       1,       1,
      0, -.39465, 2.03211,
      1.13983, -.58060,       0) * yuv;
      */

     // Using BT.709 which is the standard for HDTV
     rgb = mat3(      1,       1,       1,
                0, -.21482, 2.12798,
                1.28033, -.38059,       0) * yuv;

     gl_FragColor = vec4(rgb, 1);
 } 
```

`luminanceTexture` is the Y plane of your image as a texture, and `chrominanceTexture` is the UV plane.

I believe the above is tuned for video range YUV, so you may need to adjust these values for full range YUV. This shader runs in a fraction of a millisecond for 1080p video frames on an iPhone 4S.

# jquery - 在jQuery自动完成中隐藏ID值

> ID：14298030
> 
> 赞同：0
> 
> 时间：2013-01-12T21:16:28.570
> 
> 标签：jquery, mysql, jquery-autocomplete

我处理 mysql 请求和数组的 php 脚本是

```
mysql_connect($mysql_server, $mysql_login, $mysql_password);
mysql_select_db($mysql_database);

$req = "SELECT ID, name, date, page_id "
        ."FROM alltickets "
        ."WHERE ID LIKE '%".$_REQUEST['term']."%' OR name LIKE '%".$_REQUEST['term']."%' OR date LIKE '%".$_REQUEST['term']."%' OR page_id LIKE '%".$_REQUEST['term']."%'   ";

$query = mysql_query($req);

while($row = mysql_fetch_array($query))
{
        $results[] = array('label' => $row['ID'] . ' ' . $row['name'] . ' ' . $row['date'] . ' ' . $row['page_id']);
}

echo json_encode($results); 
```

我的jQuery代码

```
jQuery(document).ready(function(){
                        $('#texfield').autocomplete({
    source: 'autocomp.php',
    minChars: 3,
    select: function(event, ui) {
        $('#texfield').val(ui.item.name);
        $('#brandid').val(ui.item.page_id)
    },
    search: function() {
        $('#brandid').val('');
    } });
}); 
```

我试图让“page_id”在“texfield”（这是查询结果的输入文本字段）中不可见，而是传递给“brandid”（这是一个隐藏的输入字段）

除了“page_id”显示在“texfield”中并且没有发布到“brandid”之外，上述所有操作都有效。

我猜它与数组有关，谢谢您的帮助

# regex - 从网站中提取具有其他数字的数字列

> ID：14298031
> 
> 赞同：3
> 
> 时间：2013-01-12T21:17:05.480
> 
> 标签：regex

生物化学家/生物信息学使用这个网站 (http://dgpred.cbr.su.se/index.php?p=TMpred)。输入蛋白质序列后，您会得到如下信息：

[http://dgpred.cbr.su.se/analyze.php?with_length=on&seq=RGFTPLQWECVMASDFGHH](http://dgpred.cbr.su.se/analyze.php?with_length=on&seq=RGFTPLQWECVMASDFGHH)

顶部和底部的一些数据，中间是 4 列，其中第 4 列是我们想要的数据。我想从第 4 列（对于很多蛋白质序列）中获取这些数字并放入 Excel。

我当前的工作流程（Mac OS X）是将富文本文档中的所有内容复制到 TextEdit，按住 alt+拖动数字（以便仅选择第 4 列中的数字），然后执行我的 AppleScript：

```
do shell script "pbpaste | sed 's/[^0-9.-]//g' | pbcopy"
do shell script "pbpaste | sed '/^$/d' | pbcopy" 
```

我只是正则表达式的初学者，但这成功地给我留下了一个由换行符分隔的漂亮数字列表，可以粘贴到 Excel 中。

真正甜蜜的是放弃 TextEdit 步骤，让正则表达式直接从网站上获取数字。不过，这超出了我的水平。谁能帮我解决这个问题？即，仅从第 4 列中选择数字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:22:01.727

我注意到浏览器复制表格的方式不同。当我想从网页复制表格数据时，我倾向于尝试 IE/Chrome/Opera 浏览器，因为——至少在 Windows 上——我可以简单地将复制的表格直接粘贴到 Excel 中，并保留所有列。另一方面，Firefox 往往会把桌子弄得一团糟。

使用 Opera 复制有问题的表格并从单元格 A1 粘贴到 Excel 中，我在 F 列中获得所有绿色数字，在 H 列中获得红色数字。然后我在第 1 行右侧的列中键入以下公式并拖动单元格的向下角复制后续行：

```
=IF(AND(ISBLANK(F1), ISBLANK(H1)), "", IF(ISBLANK(F1), H1, F1)) 
```

现在在这个新列中，我看到了数据。我可以在原始数据之上粘贴一个新表格，然后重新计算右侧的公式。（其他浏览器的实际列可能不同）。

我承认这不是一个完全自动化的解决方案，但我发现这种方法在很多情况下都快速且有用，我认为值得分享。座右铭：如果一开始您选择的浏览器没有做正确的事情，请尝试另一个！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:43:23.083

当我复制这些数据时，我得到了这个结果：

```
R   1   -9.00           
       +0.03
G   2   -8.00           
       +0.36
F   3   -7.00       
-0.26 
```

每奇数行 3 列，以 a 开头`[A-Z]`，然后是您想要的数据在下一行。

您想要的数字有两种形式：

```
^\t {3}([-+][0-9]+\.[0-9]{2})$  //for the red numbers 
```

和：

```
^([-+][0-9]+\.[0-9]{2}) {3}\t$   //the green numbers 
```

您可以像这样提取这两种类型：

```
^(\t {3})?([-+][0-9]+\.[0-9]{2})( {3}\t)?$ 
```

第二个捕获组`([-+][0-9]+.[0-9]{2})`是您所追求的内容：

```
s/^(\t {3})?([-+][0-9]+\.[0-9]{2})( {3}\t)?$/$2/g 
```

而不是 Applescript，请考虑 BBEdit 或[Textwrangler](http://www.barebones.com/products/textwrangler/index.html)，您可能会发现它们更易于使用。

将其放在搜索字段中：

```
\r[A-Z].*\r(\t {3})?([-+][0-9]+.[0-9]{2})( {3}\t)?$ 
```

这在替换：

\r\2

选择“全部替换”

* * *

这个怎么运作

```
 \r        //  carriage return
 [A-Z]     //  any character from A to Z (the lines you DON't want all start with a letter)
 .         // any character
 *         // any number of times
 \r        // carriage return   
           // that deals with the lines you DON't want to keep
 (         // grouping
 \t        // tab character
  {3}      // space character repeated 3 times
 )         // close grouping
 ?         // zero or one occurences of the previous grouping
 (         // grouping (this is the bit you are after)
 [+-]      // character class - one of any of the [enclosed characters]
 [0-9]     // one of any of 0-9
 +         // repeated one or  more times
 \.        // full stop (escaped as it has special meaning in regext)
 [0-9]{2}  // exactly two occurences of any of 0-9
 )         // close capture parens (end of the group you are after)
 ( {3}\t)? // 3 spaces followed by a tab, occurring 0 or 1 time.
 $         // end of line  (in BBEdit/textwrangler you often use \r) 
```

*BBE/TW 中的重要*细节，捕获的组被称为 \1,\2,\3，而不是 $1,$2,$3...</p>

# ruby-on-rails-3 - 鼠标悬停时的 Gmaps4Rails 信息窗口

> ID：14298034
> 
> 赞同：1
> 
> 时间：2013-01-12T21:17:32.880
> 
> 标签：ruby-on-rails-3, google-maps, google-maps-api-3, gmaps4rails

当鼠标悬停在标记上时，我希望出现 infowindow，这是我在咖啡脚本中的代码：

```
$(document).on 'map:ready', -> addHoverHandlers()

addHoverHandlers = ->
  # m is Gmap4Rails marker, doc in gmaps4rails.base.js.coffee
  for m in Gmaps.map.markers
    # marker is a Google Maps Marker
    # https://developers.google.com/maps/documentation/javascript/reference#Marker
    marker = m.serviceObject

    console.log marker.getPosition().toString()
    # Show the infowindow when user mouses-in
    google.maps.event.addListener marker, "mouseover", ->
      console.log marker.getPosition().toString()
      m.infowindow.open marker.map, marker

    # Hide the infowindow when user mouses-out
    google.maps.event.addListener marker, "mouseout", ->
      m.infowindow.close() 
```

此代码在加载时输出：

```
(39.7317, -104.92099999999999)
(35.2638, -118.91200000000003)
(36.6624, -121.64499999999998) 
```

但这在鼠标悬停在每个标记上时（坐标不变）：

```
(36.6624, -121.64499999999998) 
```

为了在上下文中提出问题，这是我`map:ready`在 erb 文件中触发事件的方式：

```
<% content_for :scripts do %>
    <script type="text/javascript">
        Gmaps.map.callback = function(){
            console.log('callback');
            $(document).trigger('map:ready');
        }
    </script>
<% end %>
<%= yield :scripts %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:53:54.290

我遇到了完全相同的问题：我不知道为什么，但是当您在 Gmaps.map.markers 上循环并尝试绑定 mouseover 侦听器函数时，它将始终将标记变量评估为循环中的最后一个标记。

我的解决方法是：不要在鼠标悬停函数中使用标记变量，`this`而是使用[Gmaps Marker](https://developers.google.com/maps/documentation/javascript/reference#Marker "Gmaps 标记")对象，在 Gmaps.map.markers 上循环并找到匹配的变量。

这是您的代码的修改：

```
$(document).on 'map:ready', -> addHoverHandlers()

addHoverHandlers = ->
  # m is Gmap4Rails marker, doc in gmaps4rails.base.js.coffee
  for m in Gmaps.map.markers
    # marker is a Google Maps Marker
    # https://developers.google.com/maps/documentation/javascript/reference#Marker
    marker = m.serviceObject

    console.log marker.getPosition().toString()
    # Show the infowindow when user mouses-in
    google.maps.event.addListener marker, "mouseover", ->
      console.log marker.getPosition().toString()
      # Loop on Gmaps.map.markers and find the one using this
      for m2 in Gmaps.map.markers
        if m2.serviceObject == this
          m2.infowindow.open m2.serviceObject.map, m2.serviceObject

    # Hide the infowindow when user mouses-out
    google.maps.event.addListener marker, "mouseout", ->
      m.infowindow.close() 
```

我知道这是实现鼠标悬停功能的一种非常低效的方法。至少，它有效。

hth

# java - 如何将整数转换为格式化的 4 字节十六进制（带前导 0）

> ID：14298040
> 
> 赞同：0
> 
> 时间：2013-01-12T21:18:55.433
> 
> 标签：java, integer, hex, formatted

> **可能重复：**
> [Java 整数到字节数组](https://stackoverflow.com/questions/2183240/java-integer-to-byte-array)

## **这是另一个与下面的原始问题仍然相关的问题：**

如果我有一个占用 4 个字符（2 个字节）的十六进制数，另存为整数。例子：

```
int value = 0xFFFF; 
```

这在 java 中将使它成为一个 4 字节的十六进制，其中 2 个字节完全为空。

我怎样才能只抓取有数据的两个字节？

非常感谢您的帮助！:)

## **回答我的第二个问题：**

md_5 在下面发布了更好的答案。

> 因此，要获得包含数据的 SINGLE 字节，您可以简单地执行以下操作：
> 
> ```
> byte b1 = (byte) ((i >> 8) & 0xFF); 
> byte b2 = (byte) i & 0xFF 
> ```
> 
> 如果整数范围内的数字更大，则只需执行 b1 = i >> 24、b2 = i >> 16 等。从移位中减去 8，因为这是一个字节的大小。

另一种方法使用原始问题的答案：

```
int hex = 0xF15E;
byte[] bytes = ByteBuffer.allocate(4).putInt(hex).array();
for(int i = 0; i < 4; i++) {
    System.out.format("0x%X ", bytes[i]);
} 
```

输出：

```
0x0 0x0 0xF1 0x5E 
```

所以然后取重要的字节：

```
byte[] importantBytes = {bytes[2], bytes[3]}; 
```

* * *

## **原始问题：**

由于能够将 Integer 转换为 byte[]，这个问题可能已经过时，但这里是：

如何将整数转换为具有前导 0 的十六进制？

所以如果我有整数：4096，十六进制就是 00001000。

总体目的是然后将此格式化的十六进制字符串转换为 byte[] （然后将其保存），但我认为我可以通过上述方式做到这一点。

但是仍然......我们如何将此整数转换为格式化的十六进制字符串？这甚至实用吗？

首选语言是 Java，我查看了 Integer.toHexString()。

## **我最初需要的工作解决方案：**

```
int value = 2147483647;
byte[] bytes = ByteBuffer.allocate(4).putInt(value).array();

for(int i = 0; i < 4; i++)
System.out.format("0x%X ", bytes[i]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:20:25.527

尝试使用[`Formatter`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)，或它的便利包装之一，[`String.format`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29) 例如：

```
String str = String.format("%08x", val); 
```

这会给你一个`String`，但我会把它留给你把它变成一个`byte[]`......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T03:58:58.413

关于你的新问题（获取有数据的字节），你说它占用 2 个字节是错误的，0xFF 实际上可以打包成一个字节。Long/Double - 8 个字节 Integer/Float - 4 个字节 Short - 2 个字节 Byte - 1 个字节

因此，要获得包含数据的 SINGLE 字节，您可以简单地执行以下操作： `byte single = (byte) i & 0xFF` 如果您有一个更大的数字，最高可达 65535 (0xFFFF)，您可以这样做： `byte b1 = (byte) ((i >> 8) & 0xFF); byte b2 = (byte) i & 0xFF` 如果您在整数范围内有更大的数字，您只需执行 b1 = i >> 24 , b2 = i >> 16 等等等等。从移位中减去 8，因为这是一个字节的大小。

希望这能回答你的问题。

# asp.net-mvc - ASP.NET MVC - Html.TextBoxFor 生成输入类型=“文本”

> ID：14298041
> 
> 赞同：1
> 
> 时间：2013-01-12T21:18:59.120
> 
> 标签：asp.net-mvc, razor

我有这样的事情：

```
@Html.TextBoxFor(model => model.Message) 
```

像这样声明消息：

```
[Required]
[DataType(DataType.MultilineText)]
[Display(Name = "Message", ResourceType = typeof(NameResources))]
[StringLength(256, ErrorMessageResourceName = "MailBoxMessageLengthError", ErrorMessageResourceType = typeof(NameResources), MinimumLength = 2)]
public string Message { get; set; } 
```

而且，我得到这样的输出：

```
<input data-val="true" data-val-length="Wiadomość nie może przekraczać 256 znak&amp;#243;w" data-val-length-max="256" data-val-length-min="2" data-val-required="Pole Wiadomość jest wymagane." id="Message" name="Message" type="text" value="" /> 
```

为什么当我明确想要那个文本框时它给我文本输入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:25:12.380

我不明白出了什么问题。`<input type="text" />`实际上是HTML文本框。如果您想要多行“文本框” ，请`Html.TextArea`改用。关于 SO 的好资源，如何使用它：[使用 Html.Helper 函数创建多行文本框](https://stackoverflow.com/questions/5021935/creating-multiline-textbox-using-html-helper-function)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:11:27.387

问题是你正在使用

```
@Html.TextBoxFor 
```

正如 mipe34 所确认的，这明确说明您想要一个文本框（单行）而不是文本区域（多行）。

如果你用过

```
@Html.EditorFor 
```

然后 MVC 将查看您的属性并相应地呈现正确的控件 -`[DataType(DataType.MultilineText)]`如果您使用了 EditorFor，您已经拥有它会生成一个 textarea。

换句话说：始终使用 EditorFor+attributes 或使用正确的 xFor 并且不要打扰属性。

# google-app-engine - 在这个 GAE 应用程序中，每个请求会创建多少个对象？

> ID：14298043
> 
> 赞同：2
> 
> 时间：2013-01-12T21:19:15.390
> 
> 标签：google-app-engine, python-2.7, wsgi

我正在使用 Python 和 Webapp2 开发一个 Google App Engine 应用程序。对于这个问题，相关部分是：

```
import webapp2

my_object = MyClass()

class MainPage(webapp2.RequestHandler):
  def get(self):
    # do stuff

app = webapp2.WSGIApplication([
    ('/', MainPage)
], debug=True) 
```

因此，每次访问我的应用程序时，`MainPage`请求处理程序都会处理该请求。假设在给定时刻有 100 个用户使用该应用程序。我的问题是：

*   创建了多少`webapp2.WSGIApplication`个实例？只有1个？100？（如果我理解 WSGI，我认为只有 1 个）
*   创建了多少`MyClass`个实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:29:15.473

在 Google App Engine 上，依靠这 100 个实例`MainPage()`并被`MyClass`创建；每个访问您网站的用户都可能被路由到庞大的 Google 云中的不同机器。

本地运行，*每个进程*`MyClass`实例化一次；一些 WSGI 服务器运行多个进程（分叉）来处理传入的请求。为每个传入请求创建一个实例（所以 100 次）。*`MainPage`*

# iphone - 如何在 iOS 中获取 CSRF 令牌？

> ID：14298044
> 
> 赞同：9
> 
> 时间：2013-01-12T21:19:43.067
> 
> 标签：iphone, ios, django

所以我试图将表单数据发布到我同事的网站，以便从我的 iPhone 应用程序登录（简单的用户名和密码）。但是，看来我需要一个 CSRF 令牌才能发布。我已经对此进行了大量研究，并从我可以从`csrftoken cookie`（我在这里读到：[https](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/) ://docs.djangoproject.com/en/dev/ref/contrib/csrf/ ）使用 GET获得这个令牌要求。问题是，我不知道如何处理这个 GET 请求？我从哪里得到？

到目前为止，这是我的帖子请求的代码：

```
NSURL *url = [NSURL URLWithString:SERVER_ADDRESS];
NSData* postData= //Some form data
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:[NSString stringWithFormat:@"%d", postData.length] forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];

[request addValue:token forHTTPHeaderField:@"X-CSRFToken"];  //Where do I get this token from

NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request
                                                              delegate:self];
[connection start]; 
```

我知道 StackOverflow 上有很多类似的帖子，但我没有找到任何看起来完整的答案。通常它只是将我引导到上面的链接，该链接仅填充了 AJAX 相关信息。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-24T07:37:39.820

正如评论中所指出的，您可以从包含您朋友网站上的表单的任何页面解析它。

如果您想要一个自己的，请他在以下位置渲染此模板`/ios/`

ios.html：

```
{% csrftoken %} 
```

然后启动[GET 请求：](https://stackoverflow.com/questions/23885571/get-request-ios)[2](https://stackoverflow.com/questions/6212453/how-to-send-a-get-request-in-ios) 您可以使用正则表达式解析令牌的值：

```
NSString *regex = @"csrfmiddlewaretoken\".*?\"\(.*?\)\""; 
```

最后，您必须`X-CSRFToken`在以下 HTTP POST 请求中设置值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T19:04:08.710

为了使用令牌登录（POST），当然您必须先获取 CSRF 令牌，就像您说的那样。如果您首先对登录页面进行 GET 调用（在您跟进 POST 之前），登录页面的结果将返回一个 csrf_token 如果您使用浏览器（打开开发人员工具窗格），您可以看到它，然后查看在响应内容下的网络窗格中查看服务器设置的 csrftoken cookie。就我而言：

```
Set-Cookie:csrftoken=PgQEgY3LAynbVeWRIzXoo2VFRLfd8Uqt; expires=Fri, 10-Nov-2017 18:59:54 GMT; Max-Age=31449600; Path=/; secure 
```

从响应中解析出来后，设置一个标题，如：

```
X-CSRFToken: "PgQEgY3LAynbVeWRIzXoo2VFRLfd8Uqt" 
```

在您的 POST 中使用登录名/密码信息。高温高压

# php - 结合 JavaScript 和 PHP

> ID：14298051
> 
> 赞同：0
> 
> 时间：2013-01-12T21:20:38.490
> 
> 标签：php, javascript, jquery

下面的脚本运行良好，它结合了 JavaScript 和 PHP。通过按下按钮，我得到它的值（`buttonValue` = 20）并且现有的项目列表（A，B，C）被替换为在`$i <= 10`（1,2,3…10）时停止的新列表：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
  $("button").click(function(){

    var buttonValue = $(':button').val();
    alert(buttonValue);

    $("#City > option").remove(); // remove all items from list
    <?php $i = 1; while ($i <= 10): ?>
    $('<option><?php echo $i; ?></option>').appendTo('#Country select'); 
    <?php $i++; endwhile; ?>
  });
});
</script>

<body>
    <button value="20">click to start</button>
    <div id="Country">
      <select id="City">
        <option value="">A</option>
        <option value="">B</option>
        <option value="">C</option>
      </select>
    </div>
</body> 
```

我想更改 PHP 循环，以便`$i <= 10`它显示`$i <= $the_buttonValue`（分配按钮值以显示数字 1、2、3…20）。

我试过 jQuery AJAX functions:`load()`或`get()`方法`ajax()`，将变量发送到服务器，但这似乎并不能解决上述请求。

我知道 PHP 和 JavaScript 的两个方面的通信方式不同，也许 AJAX 请求可以使新要求工作，但我不确定如何。

任何使它按要求工作的提示，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:58:50.780

对于这个特定问题，您不需要 php，但是如果由于某种原因必须使用它，那么您可以使用 jquery load() 函数，例如：

**你的.html**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
  $("button").click(function(){

    var buttonValue = $(':button').val();
    alert(buttonValue);

    $("#City > option").remove(); // remove all items from list
    $('#Country').load('your.php?value='+buttonValue+' #Country')
  });
});
</script>

<body>
    <button value="20">click to start</button>
    <div id="Country">
      <select id="City">
        <option value="">A</option>
        <option value="">B</option>
        <option value="">C</option>
      </select>
    </div>
</body> 
```

**你的.php**

```
<div id="Country">
      <select id="City">

<?php 
    $val = $_GET['value']; //this will be your button value
    $i = 1;
    while (true)
    {
?>
        <option value="">
                    <?php echo $i++; if($i==$val) break; ?>
        </option>
<?php
    }
?>
      </select>
</div> 
```

*我的第一个 stackoverflow 答案，希望你能投票:)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:24:16.250

我认为最简单的方法就是在提交按钮时将该信息推送到您的 Javascript 变量和 PHP 变量；然后基于该等效 PHP 变量的循环，因为尝试基于 javascript 值设置 PHP 变量和函数可能会使发布 AJAX 数据和获取 JSON 响应更加困难。

您也可以在 javascript 中执行该循环，但这完全取决于您的偏好。将 javascript 变量推送到 PHP 变量中是很困难的，因为 PHP 总是在服务器端处理，而 javascript 是在客户端执行的。

用javascript做所有事情的一个例子是；代替

```
<script>
$(document).ready(function(){
  $("button").click(function(){

    var buttonValue = $(':button').val();
    alert(buttonValue);

    $("#City > option").remove(); // remove all items from list
    var i = 1;
    while(i <= buttonValue){
    $('<option>' + i + '</option>').appendTo('#Country select'); 
    i++;
    }
  });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:27:45.483

你根本不需要 PHP：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
  $("button").click(function(){
    var buttonValue = $(':button').val();
    alert(buttonValue);

    $("#City > option").remove(); // remove all items from list
    for (var i = 0; i < buttonValue; i++) {
        $('<option>' + i + '</option>').appendTo('#Country select'); 
    }
  });
});
</script>

<body>
    <button value="20">click to start</button>
    <div id="Country">
      <select id="City">
        <option value="">A</option>
        <option value="">B</option>
        <option value="">C</option>
      </select>
    </div>
</body> 
```

# android - jQuery Mobile 在 Jelly bean 上的页面更改时重绘整个屏幕

> ID：14298071
> 
> 赞同：2
> 
> 时间：2013-01-12T21:23:41.070
> 
> 标签：android, jquery-mobile, transition, flicker

我知道有**很多**关于闪烁 jQuery Mobile 的问题，但我发现的“修复”都没有对我有用。我的问题只出现在 Jelly bean 上，而不出现在 Android 2.3.6 上。

* * *

我有一个使用 jQuery Mobile 1.2.0、jQuery 1.8.2 和 Cordova 2.3.0 的多页面应用程序。为了测试，我创建了一个简单的 HTML 布局，只有 3 个空页面，每个页面顶部都包含一个持久的固定导航栏，有 3 个“选项卡”可以在页面之间切换。

在我运行 Android 2.3.6 的 Nexus One 上，一切正常，在页面之间切换时没有闪烁。页面刚刚出现，标签保持在原位，只是切换颜色。

另一方面，在我运行 Android 4.1.1 的三星 Galaxy S3 mini 上，出现了问题。在页面之间切换时，整个屏幕似乎都被重绘了，包括导航栏。这会导致仅一微秒的闪烁，在此期间，整个屏幕似乎是 jQuery Mobile 主题 A 的默认背景渐变的深色（在查看屏幕底部时闪烁不太明显）。由于这仅发生在果冻豆上，因此必须有某种方法来解决此问题，对吗？

从下面的代码可以看出，我已经关闭了页面转换。

**索引.html**

```
<!DOCTYPE html>
<html>
  <head>  
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="./jquery/jquery.mobile-1.2.0/jquery.mobile-1.2.0.min.css" />

    <script type="text/javascript" charset="utf-8" src="./jquery/jquery-1.8.2.js"></script>
    <script type="text/javascript" charset="utf-8" src="jquery_init.js"></script>
    <script type="text/javascript" charset="utf-8" src="./jquery/jquery.mobile-1.2.0/jquery.mobile-1.2.0.min.js"></script>

    <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>    

    <style>
    </style>
  </head>

  <body>

  <div data-role="page" id="page1" data-position="fixed"data-theme="a">
    <div data-role="header" data-id="topbar" data-position="fixed" data-tap-toggle="false">
        <h1>JQTest</h1>
        <div data-role="navbar">
            <ul>
                <li><a href="#page1" class="ui-btn-active ui-state-persist">Page 1</a></li>
                <li><a href="#page2">Page 2</a></li>
                <li><a href="#page3">Page 3</a></li>
            </ul>
        </div><!-- /navbar -->
    </div><!-- /header -->

    <div data-role="content">
        <h1>This is Page 1</h1>                
    </div><!-- /content -->
  </div><!-- /page -->

  <div data-role="page" id="page2" data-position="fixed"data-theme="a">
    <div data-role="header" data-id="topbar" data-position="fixed" data-tap-toggle="false">
        <h1>JQTest</h1>
        <div data-role="navbar">
            <ul>
                <li><a href="#page1">Page 1</a></li>
                <li><a href="#page2" class="ui-btn-active ui-state-persist">Page 2</a></li>
                <li><a href="#page3">Page 3</a></li>
            </ul>
        </div><!-- /navbar -->
    </div><!-- /header -->

    <div data-role="content">                
        <h1>This is Page 2</h1>                
    </div><!-- /content -->
  </div><!-- /page -->

  <div data-role="page" id="page3" data-position="fixed"data-theme="a">
    <div data-role="header" data-id="topbar" data-position="fixed" data-tap-toggle="false">
        <h1>JQTest</h1>
        <div data-role="navbar">
            <ul>
                <li><a href="#page1">Page 1</a></li>
                <li><a href="#page2">Page 2</a></li>
                <li><a href="#page3" class="ui-btn-active ui-state-persist">Page 3</a></li>
            </ul>
        </div><!-- /navbar -->
    </div><!-- /header -->

    <div data-role="content">                
        <h1>This is Page 3</h1>                
    </div><!-- /content -->
  </div><!-- /page -->

</body>
</html> 
```

**jquery_init.js**

```
$(document).bind("mobileinit", function(){
    $.mobile.defaultPageTransition = 'none';
    $.mobile.defaultDialogTransition = 'none';
    $.mobile.buttonMarkup.hoverDelay = 0;
}); 
```

* * *

**编辑**

经过进一步测试，它似乎是`ui-overlay-a`闪烁期间显示的类的一个元素。将其背景颜色设置为红色会在更改页面时产生覆盖整个屏幕的红色闪烁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-06T12:14:36.423

`data-position="fixed"`从 中删除`header & footer`并将这些样式添加到所有输入控件（`textarea`，`select dropdowns`等）：

```
[selector] input,[selector] select{   
    -webkit-appearance:none;
    appearance:none;
    box-shadow:none;
    position: relative;
    text-decoration: none;
    text-shadow: none;
}

Since data-position="fixed" is removed from the header & footer section, we need to fix the styles by adding this:

[data-role="header"],[data-role="footer"]{
    width: 100%;
    position: relative;
}

Worked for my page!! 
```

# macos - 定位不返回 `~/Library` 内容的命中

> ID：14298075
> 
> 赞同：2
> 
> 时间：2013-01-12T21:24:07.293
> 
> 标签：macos, command-line, locate

我有一台 iMac，我正试图找到一个深埋在我的`Library`文件夹中的文件。以为我可以从命令提示符快速轻松地找到它`locate`，我很惊讶我的文件没有找到。我最后`find`改用了。

有谁知道如何获取`locate`'s 数据库以包含我的`~/Library`目录中的内容？

我怀疑这可能是 Mac 制作`~/Library`隐藏目录的结果。（虽然它没有隐藏在命令行中，但它隐藏在`Finder`.）所以我想我要问两个可能的事情：

1.  如何让`locate`数据库包含来自`~/Library`但不是每个隐藏目录的内容？
2.  如何让`locate`数据库包含隐藏目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:12:18.263

你需要先跑[`updatedb`](http://linux.die.net/man/8/updatedb)。或许像这样

```
updatedb --localpaths=~/Library 
```

# html - 用超出其限制的文本填充一个框

> ID：14298078
> 
> 赞同：0
> 
> 时间：2013-01-12T21:24:22.457
> 
> 标签：html, css

我需要制作一个具有锁定高度和宽度的盒子。如果文本内容超过框的高度，我希望它自动缩短。

像这样：

```
<div style="height:100px; width:100px; border:solid 1px #000;">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque scelerisque gravida augue, in luctus nibh feugiat et. In lacinia.
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:25:56.997

您正在寻找的 CSS 语句可能是：

```
text-overflow: ellipsis; 
```

quirksmode.org 有一个用省略号 (...) 缩短文本[的示例](http://www.quirksmode.org/css/textoverflow.html)。

对于多行块，请参阅[此 Stack Overflow 问题](https://stackoverflow.com/questions/6222616/with-css-use-for-overflowed-block-of-multi-lines)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:27:59.357

前段时间我遇到了这个问题，虽然`text-overflow:ellipsis;`对于多行的单行文本非常有效，但我发现[ThreeDot](http://tpgblog.com/2009/12/21/threedots-the-jquery-ellipsis-plugin/) jquery 插件非常适合具有更多选项的多行文本。

还有[dotdotdot](http://dotdotdot.frebsite.nl/)插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:28:13.570

这就是**溢出**CSS 属性的用途，您可以在 [on QuirksMode] 上查看它的示例。[1](http://www.quirksmode.org/css/textoverflow.html)

在不知道您希望如何缩短文本的情况下，恐怕无法给您任何示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T21:32:24.730

如果要将用户输入截断为固定长度，请使用以下
示例创建一个文本区域，将用户输入限制为 100 个字符，并向用户显示剩余计数。

第 1 步 - 创建函数

将以下代码插入页眉：

```
<script language="javascript" type="text/javascript">
function limitText(limitField, limitCount, limitNum) {
    if (limitField.value.length > limitNum) {
        limitField.value = limitField.value.substring(0, limitNum);
    } else {
        limitCount.value = limitNum - limitField.value.length;
    }
}
</script> 
```

第 2 步 - 创建文本区域

使用以下代码创建表单和文本区域（如有必要，更改表单和文本区域的名称以满足您的需要）：

```
<form name="myform">
<textarea name="limitedtextarea" onKeyDown="limitText(this.form.limitedtextarea,this.form.countdown,100);" 
onKeyUp="limitText(this.form.limitedtextarea,this.form.countdown,100);">
</textarea><br>
<font size="1">(Maximum characters: 100)<br>
You have <input readonly type="text" name="countdown" size="3" value="100"> characters left.</font>
</form> 
```

如果您希望将此应用于文本框，只需点击[此链接](http://www.mediacollege.com/internet/javascript/form/limit-characters.html)

# php - 在使用带有 PHP 的 HTML 表单向 MySQL 添加数据时，只添加了几个字段

> ID：14298079
> 
> 赞同：0
> 
> 时间：2013-01-12T21:24:27.297
> 
> 标签：php, html, mysql, forms

我使用 HTML 制作了一个表单，并尝试使用 PHP 将数据插入 MySQL 数据库。但是数据库中只有几个单元格被添加。无法弄清楚出了什么问题。请帮忙。提前致谢。

这是我的代码，页面格式为 (patienthistory.php)

```
<?php 

  // Connects to your Database 

mysql_connect("localhost", "root", "") or die(mysql_error()); 

mysql_select_db("cleftdb") or die(mysql_error()); 

//checks cookies to make sure they are logged in 

if(isset($_COOKIE['ID_my_site'])) 

{ 

$username = $_COOKIE['ID_my_site']; 

$pass = $_COOKIE['Key_my_site']; 

    $check = mysql_query("SELECT * FROM members WHERE username = '$username'")or die(mysql_error()); 
}
else 

//if the cookie does not exist, they are taken to the login screen 

{            

header("Location: login.php"); 

 } 

$check = mysql_query("SELECT id FROM members WHERE username = '$username'")or die(mysql_error());
while ($row = mysql_fetch_assoc($check)) {
$id = $row["id"];
}

echo '<form action="savepatienthistory.php" method=post />';

echo '<input type="hidden" name="id" value="'.$id.'">';

echo '<p>Patient ID: <input type="text" name="pid" /></p>';
echo '<p>First Name: <input type="text" name="fname" /></p>';
echo '<p>Last Name: <input type="text" name="lname" /></p>';
echo '<p>Date of birth : <input type="date" name="dob" /></p>';
echo '<p>Sex: 
<select name="sex">
<option value="Male">Male</option>
<option value="Female">Female</option>
</select>
</p>';
echo '<p>Race: <input type="text" name="race" /></p>';
echo '<p>Address: <input type="text" name="address" /></p>';
echo '<p>GN Division: <input type="text" name="GNdivision" /></p>';
echo '<p>Parent/Guardian First Name: <input type="text" name="Xfname" /></p>';
echo '<p>Parent/Guardian Last Name: <input type="text" name="Xlname" /></p>';
echo '<p>Parent/Guardian Age: <input type="text" name="Xage" /></p>';
echo '<p>Parent/Guardian Occupation: <input type="text" name="Xoccupation" /></p>';
echo '<p>Parent/Guardian NIC number: <input type="text" name="XNICno" /></p>';
echo '<p>Parent/Guardian Race: <input type="text" name="Xrace" /></p>';
echo '<p>Parent/Guardian Address: <input type="text" name="Xaddress" /></p>';
echo '<p>Parent/Guardian GN Division: <input type="text" name="XGNdivision" /></p>';
echo '<p>Parent/Guardian Relationship to the Patient: <input type="text" name="Xrelationship" /></p>';
echo '<p>Parent/Guardian Country: <input type="text" name="Xcountry" /></p>';
echo '<p>General Medical History: 
<select name="otherproblem">
    <option value="Nothing">Nothing</option>
    <option value="Allergy: Penicillin">Allergy: Penicillin</option>
    <option value="Aspirin">Aspirin</option>
    <option value="Erythromycin">Erythromycin</option>
    <option value="Latex or Rubber Products">Latex or Rubber Products</option>
    <option value="Codeine">Codeine</option>
    <option value="Tetracycline">Tetracycline</option>
    <option value="Germicides/Pesticides, Foods">Germicides/Pesticides, Foods</option>
    <option value="Other">Other</option>
    <option value="Asthma">Asthma</option>
    <option value="Bleeding Disorders">Bleeding Disorders</option>
    <option value="Diabetes">Diabetes</option>
    <option value="Epilepsy">Epilepsy</option>
    <option value="GI disorders">GI disorders</option>
    <option value="Heart disease">Heart disease</option>
    <option value="Hepatitis">Hepatitis</option>
    <option value="Jaundice">Jaundice</option>
    <option value="Liver disease">Liver disease</option>
    <option value="Neoplasm">Neoplasm</option>
    <option value="Psychiatric Problems">Psychiatric Problems</option>
    <option value="Respiratory diseases">Respiratory diseases</option>
    <option value="Rheumatic fever">Rheumatic fever</option>
</select>
</p>';
echo '<p>Do patient currently under medical treatment? If yes, what are the medicines: <input type="text" name="medicaltreatment" /></p>';
echo '<p>Do Patient Need Antibiotic Prophylaxis?  
<select name="antibiotic">
    <option value="Yes">Yes</option>
    <option value="No">No</option>
</select>
</p>';

echo '<input type="submit" value="Submit">';
echo '</form>';

?> 
```

和我的 savepatienthistory.php 代码，

```
<?php 
 // Connects to your Database 

 mysql_connect("localhost", "root", "") or die(mysql_error()); 

 mysql_select_db("cleftdb") or die(mysql_error()); 

 $id = $_POST['id'];
 $pid = $_POST['pid'];
 $fname = $_POST['fname'];
 $lname = $_POST['lname'];
 $dob = $_POST['dob'];
 $sex = $_POST['sex'];
 $race = $_POST['race'];
 $address = $_POST['address'];
 $GNdivision = $_POST['GNdivision'];
 $Xfname = $_POST['Xfname'];
 $Xlname = $_POST['Xlname'];
 $Xage = $_POST['Xage'];
 $Xoccupation = $_POST['Xoccupation'];
 $XNICno = $_POST['XNICno'];
 $Xrace = $_POST['Xrace'];
 $Xaddress = $_POST['Xaddress'];
 $XGNdivision = $_POST['XGNdivision'];
 $Xrelationship = $_POST['Xrelationship'];
 $Xcountry = $_POST['Xcountry'];
 $otherproblem = $_POST['otherproblem'];
 $medicaltreatment = $_POST['medicaltreatment'];
 $antibiotic = $_POST['antibiotic'];

 $sql = "INSERT into history (id) VALUES ('$id')";

 $sql = "INSERT into history (pid) VALUES ('$pid')";
 $sql = "INSERT into history (fname) VALUES ('$fname')";
 $sql = "INSERT into history (lname) VALUES ('$lname')";
 $sql = "INSERT into history (dob) VALUES ('$dob')";
 $sql = "INSERT into history (sex) VALUES ('$sex')";
 $sql = "INSERT into history (race) VALUES ('$race')";
 $sql = "INSERT into history (address) VALUES ('$address')";
 $sql = "INSERT into history (GNdivision) VALUES ('$GNdivision')";
 $sql = "INSERT into history (Xfname) VALUES ('$Xfname')";
 $sql = "INSERT into history (Xlname) VALUES ('$Xlname')";
 $sql = "INSERT into history (Xage) VALUES ('$Xage')";
 $sql = "INSERT into history (Xoccupation) VALUES ('$Xoccupation')";
 $sql = "INSERT into history (XNICno) VALUES ('$XNICno')";
 $sql = "INSERT into history (Xrace) VALUES ('$Xrace')";
 $sql = "INSERT into history (Xaddress) VALUES ('$Xaddress')";
 $sql = "INSERT into history (XGNdivision) VALUES ('$XGNdivision')";
 $sql = "INSERT into history (Xrelationship) VALUES ('$Xrelationship')";
 $sql = "INSERT into history (Xcountry) VALUES ('$Xcountry')";
 $sql = "INSERT into history (otherproblem) VALUES ('$otherproblem')";
 $sql = "INSERT into history (medicaltreatment) VALUES ('$medicaltreatment')";
 $sql = "INSERT into history (antibiotic) VALUES ('$antibiotic')";

 if(!mysql_query($sql)){
die('Error: '.mysql_error());
 } 

 mysql_close();

 ?> 
```

这是添加到 db 的值的屏幕截图 ![截屏](../Images/484231fb5f4c71afadee395b4fea7266.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:27:23.607

[非常重要的第一句话是您的代码存在明显的安全问题，因为它对sql 注入](http://php.net/manual/en/security.database.sql-injection.php)非常开放。您直接将用户输入（即 POST 值）插入到 sql 语句中，而不检查它们是否存在恶意内容。请务必阅读此主题并调整代码。

您的 sql insert 语句未执行，并且您不断覆盖该语句，因此只会执行最后一条。您必须将它们全部组合在一个语句中。

```
INSERT INTO history (fname, lname) VALUES ('john', 'doe') 
```

在您的情况下，您可以使用循环和字符串连接来制作完整的语句

```
$post = array($pid = $_POST['pid'], $fname = $_POST['fname'], $lname = $_POST['lname']);

$sql = "INSERT INTO history ('pid', 'fname', 'lname') VALUEs ('";

foreach( $post as $val ){
    $sql .= $val."', '";
}
$sql = substr($sql, 0, -3);
$sql .= ")";

mysql_query($sql); 
```

我在这里的循环中只包含了三列，但是将它扩展到所有需要的列应该很简单。我还假设您从 $_POST 获得的“id”是表的主键，因此从 INSERT 语句中省略，因为它将自动生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:16:35.943

根据您的代码，只有最后一个 sql 语句被插入到 db 中，并且所有以前的 sql 语句都不会执行......我不知道你为什么要形成这样的插入查询..

请在单个语句中这样做，

```
$sql = "INSERT INTO history(id,pid,fname,lname,....) VALUES('".$id."",'".$pid."','".$fname."',....)"; 
```

并在上面执行类似查询将在表中插入所有数据。

或使用如下

```
$sql = "INSERT INTO history SET id = '".$id."',
                                pid = '".$pid."',
                                fname = '".$fname."',...."; 
```

使用这种方式可以避免计数不匹配......

# c# - 具有枚举值的 EF5 Code First 导航属性多属性映射

> ID：14298080
> 
> 赞同：1
> 
> 时间：2013-01-12T21:24:27.013
> 
> 标签：c#, ef-code-first, entity-framework-5

给定以下模型：

```
public class Item
{
  public int Id { get; set; }
  public ICollection<File> Attachments { get; set; }
}

public class File
{
  public int Id { get; set; }
  public ObjectType ObjectType { get; set; } // enum stored as INT
  public int ObjectId { get; set; }
} 
```

我将如何`Item.Attachments`使用 Fluent API 描述导航属性，以便生成的 SQL 正确连接，例如：

```
SELECT ... FROM Items a 
LEFT JOIN Files b
  ON a.Id = b.ObjectId AND b.ObjectType = 8 (example enum value) 
```

我尝试公开`Item.ObjectType`和`Item.ObjectId`属性，然后在我的项目映射中执行以下操作：

```
HasMany(x => x.Attachments)
  .WithOptional()
  .Map(x => x.MapKey("ObjectType", "ObjectId"))
  .WillCascadeOnDelete(false); 
```

但这会导致以下运行时错误，可能是因为这不是数据库中的实际外键。

> 指定的关联外键列“ObjectType、ObjectId”无效。指定的列数必须与主键列数匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:41:47.617

This is not supported in code first mapping because your relation between `Item` and `File` is not valid referential constraint. EF code first supports only mappings equivalent to foreign key constraint => columns in foreign key of dependent table must match columns in primary of principal table. Your case expects additional constant column in dependent table.

# c# - 每次循环后如何将数据保存到文本文件中？

> ID：14298085
> 
> 赞同：-2
> 
> 时间：2013-01-12T21:24:54.750
> 
> 标签：c#

我有一个 for 循环（由计时器减慢速度），循环每秒将日期保存在文本文件中。但是如果我在进程结束之前关闭程序，文本文件仍然存在。

问题是当我上课时，我没有足够的时间来等待程序结束，同时我需要在某个时候暂停线程，所以我不能只使用较小的循环并且冒险不有足够的时间暂停和恢复。

有没有办法在每次循环后保存文件？所以每当我退出（基于表单的应用程序）时，我会有一些数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:28:31.123

将[StreamWriter.AutoFlush](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.autoflush.aspx)属性设置为`true`。这将使 writer 在每次调用 StreamWriter.Write 后将其缓冲区刷新到底层文件流。

```
using(var writer = File.AppendText("fileName"))
{
    writer.AutoFlush = true;
    foreach(string line in lines)
        writer.WriteLine(line);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:27:28.617

也许你可以有另一个循环（也有一个时间更短的计时器），它总是保存数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:35:33.047

尝试使用它作为保存到文本文件：

它将读取旧文本并将旧文本和新文本保存到其中...

```
StreamReader sr = new StreamReader(path);
StreamWriter sw = new StreamWriter(path);
string old = sr.ReadToEnd();
sr.Close();
sw.WriteLine(old);
sw.WriteLine(date);
sw.Close(); 
```

或者您可以将 StreamWriter 设为公开，并在 Form Closing 事件中将其保存在关闭时... `public StreamWriter sr = new StreamWriter("C:\\...")`

# flash - 如何在 AS3 中对动态文本进行动画处理？

> ID：14298090
> 
> 赞同：0
> 
> 时间：2013-01-12T21:25:15.020
> 
> 标签：flash

我想要一个带有动态文本的动画，因为我想从文件中加载文本（使用 URLLoader）。如果我将它修改为符号，它不再从文件中加载文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:20:06.477

您的文本字段必须在所有动画期间都存在

# cytoscape - 如何在 Cytoscape 中自动执行 [加载 + 导出] 操作？

> ID：14298096
> 
> 赞同：3
> 
> 时间：2013-01-12T21:26:01.863
> 
> 标签：cytoscape

我有大约 100 个 *.xgmml 文件，每个文件都指定了一个不同的网络。如何通过 Cytoscape 为每个输入文件自动生成 PNG 图像文件的过程？

（Cytoscape 命令行选项包括一些用于加载文件的选项，但我没有看到任何用于将网络导出为图像文件的选项。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-09T04:35:35.630

（在 cytoscape 3+ 中）您可以执行以下操作，将其放入文本文件并使用 cytoscape.sh -S [脚本文件] 运行，或者在打开 cytoscape 后直接进入（工具 -> 执行命令文件):

```
#Import network
network import file indexColumnTargetInteraction=1 ...
  indexColumnSourceInteraction=2 file="[full path to .xgmml file]"
#Import and set style
vizmap load file file="[full path to .xml style file]"
vizmap apply styles=[style name]
#Set layout
layout attribute-circle
#Set view to fit display
view fit content    
#Save 
view export OutputFile="[full path to output file]" options=PDF 
```

更一般地说，命令行实用程序（工具 -> 命令行对话框）上的帮助命令非常有用。它列出了所有可用的命令，并且可以查询每个命令的语法。

# c# - 如何将数据表对象作为参数传递给对象控件

> ID：14298097
> 
> 赞同：0
> 
> 时间：2013-01-12T21:26:40.433
> 
> 标签：c#, asp.net, database, object, datatable

是否可以将数据表对象作为参数传递给另一个控件对象，如下所示：

```
protected void DropDownlist2(string model)
{
     queryString = "Select modelcar from useritem where typecar=@model";

     SqlCommand cmd = new SqlCommand(queryString, useritemConnectionString1);
     cmd.Parameters.AddWithValue("@model", model);

     useritemConnectionString1.Open();

     DataTable dt = new DataTable();
     SqlDataAdapter ad = new SqlDataAdapter(cmd);
     ad.Fill(dt);

     if (dt.Rows.Count > 0)
     {
         DropDownList2.DataSource = dt;
         DropDownList2.DataBind();
     }

     useritemConnectionString1.Close();
     Button1(dt);
 }

 private void Button1_Click(DataTable dt)
 {   
     SqlDataReader dr = cmd.ExecuteReader();

     if(dr.HasRows)
     { 
         while (dr.Read()) 
         { 
              System.Web.UI.WebControls.Image imgControl = new System.Web.UI.WebControls.Image();
              HtmlGenericControl paraContainer = new HtmlGenericControl("p");
paraContainer.Controls.Add(imgControl);
              PlaceHolder1.Controls.Add(paraContainer);

              //Get Image Information
              imgControl.ImageUrl = dr["Image"].ToString();
          } 
    } 
    else  
        dr.Close();
} 
```

出于某种原因，我收到此错误

> button1_Click(System.data.datatable) 由于其保护级别而无法访问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:28:24.120

做你的`Button1_Click`方法`protected`。

检查，`Button1`调用`DropDownlist2`的方法是否与`Button1_Click`?

**更新**

在您的下拉列表选择事件处理程序中，您应该将`DataTable`对象存储在表单的某个字段或属性中。在与您的按钮单击对应的事件处理程序中，您应该使用此字段进行操作。

# ios - 访问 Twitter 帐户 UIAlertView

> ID：14298099
> 
> 赞同：0
> 
> 时间：2013-01-12T21:26:42.883
> 
> 标签：ios, xcode, twitter

我记得很多次有应用程序会弹出一个警报视图，说该应用程序希望我允许访问 Twitter 帐户。这是必须由应用程序本身处理的东西，还是会自动调用

```
requestAccessToAccountsWithType:accountType options:nil
                              completion:^(BOOL granted, NSError *error) 
```

这仅适用于 iOS 6，不适用于任何其他版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:00:29.890

如果您参考该对话框`“Application” Would Like Access to Twitter Accounts`，它会在第一次自动调用。在用户在“设置”>“隐私”>“Twitter”中手动启用访问之前，将忽略进一步的请求。

# ios - ios6 - 在 UIWebView 中保留 html5 存储写入的数据？

> ID：14298100
> 
> 赞同：2
> 
> 时间：2013-01-12T21:26:45.013
> 
> 标签：ios, mobile-safari

我想让我的 UIWebView 持久化我通过 html5 存储写入它的数据。ios 6 的发行说明通过以下方式使这听起来成为可能：

```
[[NSUserDefaults standardUserDefaults] 
    setBool:YES forKey:@"WebKitStoreWebDataForBackup"]; 
```

> “在 iOS 6 及更高版本中，来自 UIWebView 对象的 Web 数据（SQL Web Storage 和 LocalStorage）可以存储在将要备份的目录中。要启用备份此数据，请在应用程序的用户默认设置中将 WebKitStoreWebDataForBackup 键设置为 YES . 仅当您的应用程序依赖无法重新加载的 Web 内容数据时才应执行此操作。如果您的 UIWebView 对象打开指向任意 Web 内容的链接，则此键应设置为 NO。切换此键的值不会保留现有的 Web 视图数据。”

[http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

这就是我们所要做的——这只是一把神奇的钥匙？我会在应用程序启动时调用它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-01T12:02:38.677

这可能是在谈论将设备备份到 iTunes 或 iCloud，而不是在应用程序启动时保留数据。

# php - php插入，查找，使用mysql更新

> ID：14298101
> 
> 赞同：0
> 
> 时间：2013-01-12T21:26:48.390
> 
> 标签：php, mysql, pdo

我已经离开 PHP 循环有一段时间了，当我昨天回来时，我很快发现许多与 mysql 交互的旧 php 函数正在逐步淘汰。这很好，但我真的在为新的 pdo 代码苦苦挣扎。假设一个用户要登录，我想看看他的用户名/密码组合是否正确。然后我想更新他的登录计数，将他上次登录的日期/时间移动到“previouslogin”并用当前日期/时间更新“lastlogin”。我遇到的问题。我无法使登录计数增加，甚至变量也无法增加，我无法将 lastlogin 分配给变量，这使我无法更新以前的登录。你能告诉我我做错了什么吗？

```
 public function accountLogin()
{
    $sql = "SELECT UserID, UserName, PositionID, LoginCount, LastLogin
            FROM users
            WHERE UserName=:user
            AND Password=:pass
            LIMIT 1";
    try
    {
        $stmt = $this->_db->prepare($sql);
        $stmt->bindParam(':user', $_POST['username'], PDO::PARAM_STR);
        $stmt->bindParam(':pass', $_POST['password'], PDO::PARAM_STR);
        $stmt->execute();
        if($stmt->rowCount()==1)
        {
            $_SESSION['Username'] = htmlentities($_POST['username'], ENT_QUOTES);
            $_SESSION['LoggedIn'] = 1;
            $_SESSION['UserID']= $stmt->fetch()[0];
            $_SESSION['PositionID']= $stmt->fetch()[2];                                
            $logincount= $stmt->fetch()[3]; 
            $lastlogin= $stmt->fetch()[4];
            $sql = "UPDATE users SET LoginCount = ". $logincount + 1 . ", 
            PreviousLogin = " . $lastlogin ."
            WHERE UserID = " . $_SESSION['UserID'];

            $stmt = $this->_db->exec($sql);

            return TRUE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:54:37.653

要将 MySQL 字段加一，您可以执行 LoginCount = LoginCount + 1

```
public function accountLogin()
{
    $sql = "SELECT UserID, UserName, PositionID, LoginCount, LastLogin
        FROM users
        WHERE UserName=:user
        AND Password=:pass
        LIMIT 1";
try
{
    $stmt = $this->_db->prepare($sql);
    $stmt->bindParam(':user', $_POST['username'], PDO::PARAM_STR);
    $stmt->bindParam(':pass', $_POST['password'], PDO::PARAM_STR);
    $stmt->execute();
    if($stmt->rowCount()==1)
    {
        $row = $stmt->fetch( PDO::FETCH_OB );
        $_SESSION['Username'] = htmlentities($row->UserName, ENT_QUOTES, "UTF-8");
        $_SESSION['LoggedIn'] = 1;
        $_SESSION['UserID']= $row->UserID;
        $_SESSION['PositionID']= $row->PositionID;                                
        $lastlogin= $row->LastLogin;
        $sql = "UPDATE users SET LoginCount = LoginCount + 1, 
        PreviousLogin = " . $lastlogin ."
        WHERE UserID = " . $_SESSION['UserID'];

        $stmt = $this->_db->exec($sql);

        return TRUE; 
```

# python - 如何在 FASTA 序列中找到反向重复模式？

> ID：14298102
> 
> 赞同：6
> 
> 时间：2013-01-12T21:27:10.757
> 
> 标签：python, fasta

假设我的长序列看起来像：

```
5’-AGGGTTTCCC**TGACCT**TCACTGC**AGGTCA**TGCA-3 
```

这个长序列中的两个斜体子序列（这里是两颗星内）一起称为反向重复模式。这两个子序列中四个字母（如 A、T、G、C）的长度和组合会有所不同。但这两个子序列之间存在关系。请注意，当您考虑第一个子序列时，它的互补子序列是 ACTGGA（根据 A 与 T 结合，G 与 C 结合），当您反转此互补子序列（即最后一个字母在前）时，它与第二个子序列匹配。

FASTA 序列中存在大量此类模式（包含 1000 万个 ATGC 字母），我想找到此类模式及其开始和结束位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T22:04:00.083

I'm new to both Python and bioinformatics, but I'm working my way through the rosalind.info web site to learn some of both. You do this with a suffix tree. A suffix tree (see [http://en.wikipedia.org/wiki/Suffix_tree](http://en.wikipedia.org/wiki/Suffix_tree)) is the magical data structure that makes all things possible in bioinformatics. You quickly locate common substrings in multiple long sequences. Suffix trees only require linear time, so length 10,000,000 is feasible.

So first find the reverse complement of the sequence. Then put both into the suffix tree, and find the common substrings between them (of some minimum length).

The code below uses this suffix tree implementation: [http://www.daimi.au.dk/~mailund/suffix_tree.html](http://www.daimi.au.dk/~mailund/suffix_tree.html). It's written in C with Python bindings. It won't handle a large number of sequences, but two is no problem. However I can't say whether this will handle length 10,000,000.

```
from suffix_tree import GeneralisedSuffixTree

baseComplement = { 'A' : 'T', 'C' : 'G', 'G' : 'C', 'T' : 'A' }

def revc(seq):
    return "".join([baseComplement[base] for base in seq[::-1]])

data = "AGGGTTTCCCTGACCTTCACTGCAGGTCATGCA"
# revc  TGCATGACCTGCAGTGAAGGTCAGGGAAACCCT
#       012345678901234567890123456789012
#                 1         2         3
minlength = 6

n = len(data)
tree = GeneralisedSuffixTree([data, revc(data)])
for shared in tree.sharedSubstrings(minlength):
    #print shared
    _, start, stop = shared[0]
    seq = data[start:stop]
    _, rstart, rstop = shared[1]
    rseq = data[n-rstop:n-rstart]
    print "Match: {0} at [{1}:{2}] and {3} at [{4}:{5}]".format(seq, start, stop, rseq, n-rstop, n-rstart) 
```

This produces output

```
Match: AGGTCA at [23:29] and TGACCT at [10:16]
Match: TGACCT at [10:16] and AGGTCA at [23:29]
Match: CTGCAG at [19:25] and CTGCAG at [19:25] 
```

It finds each match twice, once from each end. And there's a reverse palindrome in there, too!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T22:22:00.673

这是一个蛮力实现，尽管它在超长序列上可能不是很有用。

```
def substrings(s, lmin, lmax):
    for i in range(len(s)):
        for l in range(lmin, lmax+1):
            subst = s[i:i+l]
            if len(subst) == l:
                yield i, l, subst

def ivp(s, lmin, lmax):
    mapping = {'A': 'T', 'G': 'C', 'T': 'A', 'C': 'G'}
    for i, l, sub in substrings(s, lmin, lmax):
        try:
            from string import maketrans
        except ImportError: # we're on Python 3
            condition = sub.translate(
                       {ord(k): v for k, v in mapping.items()})[::-1] in s
        else: # Python 2
            condition = sub.translate(maketrans('ATGC', 'TACG'))[::-1] in s
        if condition:
            yield i, l, sub 
```

让我们找到长度为 6 的“反向重复模式”（以及它们的起始位置和长度）：

```
>>> list(ivp('AGGGTTTCCCTGACCTTCACTGCAGGTCATGCA', 6, 6))
[(10, 6, 'TGACCT'), (19, 6, 'CTGCAG'), (23, 6, 'AGGTCA')] 
```

不过，这不会检查两种模式是否重叠。例如，`'CTGCAG'`匹配自身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T02:22:05.527

我有一个想法来找到一个长序列的反转回文序列。考虑整个序列的一段 DNA 序列并生成其互补序列。然后反转这个补码序列的部分。然后执行这两个部分之间的动态对齐并计算它的成本（一个来自实际序列，另一个来自反向互补序列）。成本将给出最佳对齐方式的想法。现在，如果最佳对齐的成本 >= 阈值成本，则选择该部分并找到公共区域。该特定部分的两个共同区域将是一个反向重复单元。一旦找到该单元，然后在下一部分重复它，否则连续增加部分的长度。任何人都可以实现这个算法。也许这将是一个有用的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-13T23:04:57.757

我使用列表推导对其进行了拍摄。我还是 python 新手，但在过去 5 年左右的时间里一直是 C# 开发人员。这会产生您想要的输出，尽管它绝对没有优化到能够有效地处理 1000 万个字符串。

**注意**：因为我们将列表转换为frequent_words中的集合，为了去除重复条目，结果没有排序。

```
def pattern_matching(text, pattern):
    """ Returns the start and end positions of each instance of the pattern  """
    return [[x, str(len(pattern) + x)] for x in range(len(text) - len(pattern) + 1) if
            pattern in text[x:len(pattern) + x]]

def frequent_words(text, k):
    """ Finds the most common k-mers of k """
    counts = [len(pattern_matching(text, text[x:x + k])) for x in range(len(text) - k)]
    return set([text[x:x + k] for x in range(len(text) - k) if counts[x] == max(counts)])

def reverse_complement(pattern):
    """ Formed by taking the complement of each nucleotide in Pattern """
    complements = {'A': 'T', 'C': 'G', 'T': 'A', 'G': 'C'}
    return ''.join([complements.get(c, c) for c in pattern][::-1])

def find_invert_repeats(text, pattern_size):
    """ Returns the overlap for frequent words and its reverse """
    freqs = frequent_words(text, pattern_size)
    rev_freqs = frequent_words(reverse_complement(text), pattern_size)
    return [[x, pattern_matching(text, x)] for x in set(freqs).intersection(rev_freqs)] 
```

* * *

```
print(find_invert_repeats("AGGGTTTCCCTGACCTTCACTGCAGGTCATGCA", 6))

[['TGACCT', [[10, '16']]], ['AGGTCA', [[23, '29']]], ['CTGCAG', [[19, '25']]]] 
```

# php - 所选菜单项的浮动线条颜色

> ID：14298104
> 
> 赞同：3
> 
> 时间：2013-01-12T21:27:24.317
> 
> 标签：php, javascript, jquery, css, menu

我正在为我的 wordpress 网站使用浮动行菜单，我得到[了](http://jsfiddle.net/DSKBv/)一些帮助。

现在我的问题是如何使选定的导航浮动线与将鼠标悬停在菜单项上时的颜色相同？此时鼠标一关闭，就会变成默认的红色。

这就是我想要实现的目标：

选择菜单 1 时（单击后），浮线颜色应为`#0f0`

选择菜单 2 -`#ee0`

已选择菜单 3 -`#05f`

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:31:30.790

`var currentSelected;`在上面添加 `var sse1 = function () {`并添加`currentSelected=k;`到下面的块

```
 for (var i = 0; i < a.length; i++) {
            if (url.indexOf(a[i].href.toLowerCase()) != -1 && a[i].href.length > nLength) {
                k = i;
                nLength = a[i].href.length;
            }
        } 
```

将当前选定列表的索引推送到`currentSelected`.

所以在你的`customHandleMenu`函数中使用它

```
var navigations=[
/* Nav 1 style */
{floatColor: '#0f0',
borderColor: '#0f0'},
/* Nav 2 style */
{floatColor: '#ee0',
borderColor: '#ee0'},
/* Nav 3 style */
{floatColor: '#05f',
borderColor: '#05f'},
];

function customHandleMenu() {
  // get nav selector
  var nav = $('#sses1 > ul');

  // get float line selector
  var floatLine = $('.highlight'); // .hightlight must exist at this point

  // get colors for the current page
  var defaultBGcolor = navigations[currentSelected]["borderColor"];
  var defaultBorderColor = navigations[currentSelected]["borderColor"];
  var defaultNavBorderColor = navigations[currentSelected]["borderColor"];
  // change background-color and border-color on mouseenter event

  $('.nav-item-1').on({
    mouseenter: function () {
      setColors({
        floatColor: navigations[0]["floatColor"],
        borderColor: navigations[0]["borderColor"]
      });
    }
  });

  $('.nav-item-2').on({
    mouseenter: function () {
      setColors({
        floatColor: navigations[1]["floatColor"],
        borderColor: navigations[1]["borderColor"]
      });
    }
  });

  $('.nav-item-3').on({
    mouseenter: function () {
      setColors({
        floatColor: navigations[2]["floatColor"],
        borderColor: navigations[2]["borderColor"]
      });
    }
  }); 

    /*
       ...
    */

    // put back default colors on the mouseleave event
    $('#sses1 > ul > li').on({
        mouseleave: function() {
          setColors({floatColor:defaultBGcolor, borderColor:defaultNavBorderColor});
        }
    });
          setColors({floatColor:defaultBGcolor, borderColor:defaultNavBorderColor});

    function setColors(args) {
        if (typeof args.floatColor != "undefined") {
            floatLine.css('background-color', args.floatColor);
        }

        if (typeof args.borderColor != "undefined") {
            floatLine.css('border-color', args.borderColor);
            nav.css('border-bottom-color', args.borderColor);
        }
    }
} 
```

[现场演示](http://fiddle.jshell.net/DSKBv/1/show/?menu=1&skin=2&p=Javascript-Menus)| [演示源](http://jsfiddle.net/DSKBv/1/)

为了防止浮动线动画加载，只需按照代码中注释的说明进行操作

```
//slip.style.left = items[k].offsetLeft + "px";
sse1.move(items[k]); //comment out this line and uncomment the line above to disable initial animation 
```

创造：

```
slip.style.left = items[k].offsetLeft + "px";
// sse1.move(items[k]); comment out this line and uncomment the line above to disable initial animation. 
```

此外，您可以**选择**添加

```
$('#sses1 li, #sses1 a').on('click',function(){ 
  $('#sses1, #sses1 ul, #sses1 li, #sses1 a').unbind("mouseout");
  $('#sses1, #sses1 ul, #sses1 li, #sses1 a').unbind("mouseleave");
  $('#sses1, #sses1 ul, #sses1 li, #sses1 a').unbind("mouseenter");
  $('#sses1, #sses1 ul, #sses1 li, #sses1 a').unbind("mousein");
  $('#sses1, #sses1 ul, #sses1 li, #sses1 a').unbind("mouseover");
  sse1={};
}); 
```

对于您的`customhandlemenu`功能，在页面准备加载时完全禁用任何不需要的动画。

[现场演示](http://jsfiddle.net/DSKBv/24/show/?menu=1&skin=2&p=Javascript-Menus)| [演示源](http://jsfiddle.net/DSKBv/24/)

# objective-c - 如何实现 VDKQueue 来监控 Cocoa 中的文件？

> ID：14298107
> 
> 赞同：1
> 
> 时间：2013-01-12T21:27:48.107
> 
> 标签：objective-c, cocoa, queue, vdkqueue

我一直在环顾四周，看起来 VDKQueue 是 UKKQueue 的更现代版本，但我在实现它时遇到了麻烦（我还不擅长 Cocoa）。到目前为止我有这个，但我对我还需要什么（或者如果这甚至是正确的）有点茫然：

```
VDKQueue *kqueue = [[VDKQueue alloc] init];
[kqueue addPath:path notifyingAbout:VDKQueueNotifyAboutWrite];
[kqueue setDelegate:self]; 
```

这个答案似乎很好地概述了如何设置它，我只是不太明白。现在我已经初始化了 VDKQueue，如何设置修改文件时会发生什么？

[Cocoa 监控文件以进行修改](https://stackoverflow.com/questions/12343833/cocoa-monitor-a-file-for-modifications)

从另一个答案：

> 实现非常简单：
> 
> *   让你的控制器成为`VDKQueueDelegate`；（我添加`<VDKQueueDelegate>`到我的 AppDelegate.h）
> *   声明一个`VDKQueue*`ivar / 属性；（这是`VDKQueue *kqueue = [[VDKQueue alloc] init];`吗？）
> *   设置委托方法`VDKQueue:receivedNotification:forPath:`；（我该怎么做呢？）
> *   初始化队列并将其委托设置为控制器本身；（这是不是这个`[kqueue setDelegate:self]`；？）
> *   添加要观看的资源`addPath:notifyingAbout:`。（添加了这一行`[kqueue addPath:path notifyingAbout:VDKQueueNotifyAboutWrite];`）
> 
> 然后在委托方法中做你的事情。

可能是代码中的委托方法？

```
//
//  Or, instead of subscribing to notifications, you can specify a delegate and implement this method to respond to kQueue events.
//  Note the required statement! For speed, this class does not check to make sure the delegate implements this method. (When I say "required" I mean it!)
//
@class VDKQueue;
@protocol VDKQueueDelegate <NSObject>
@required

-(void) VDKQueue:(VDKQueue *)queue receivedNotification:(NSString*)noteName forPath:(NSString*)fpath;

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:39:36.003

有几种方法，它们都记录在[VDKQueue 头文件](https://github.com/bdkjones/VDKQueue/blob/master/VDKQueue.h)中。

### 方法 A：通知

在[NSWorkspace 的通知中心](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWorkspace/notificationCenter)[添加一个观察者](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNotificationCenter/addObserverForName%3aobject%3aqueue%3ausingBlock%3a)，用于查看该头文件中列出的各种 VDKQueue 通知。当 VDKQueue 发送您正在观察的通知时，通知中心将调用您的块（或向您自己的观察者对象发送消息，如果您使用较旧但仍然完全有效的方法）。

### 方法 B：委托

您已经将自己设置为代表，这是其中的步骤之一。

第 1 步是声明您符合`VDKQueueDelegate`协议。如果你还没有这样做，你应该得到一个警告，因为`setDelegate:`需要一个符合协议的对象。

第 2 步是通过实际实现协议的所有必需方法来实现该承诺。目前只有一个。

第 3 步是将自己设置为代表。

在您的 实施中`VDKQueue:receivedNotification:forPath:`，这是您在步骤 2 中实施的方法，您可以做任何您想做的事情来对文件刚刚发生的事情做出反应。

# c++ - 几秒钟后 C++ 代码运行缓慢

> ID：14298110
> 
> 赞同：-1
> 
> 时间：2013-01-12T21:28:16.113
> 
> 标签：c++, performance, differential-equations

我有 C++ 代码可以数值求解偏微分方程。一切正常，但在前 10 次左右的迭代之后，代码开始运行慢约 3 倍。

一些可能相关的信息：

*   我正在使用包 Eigen 进行大量计算
*   我将大量数据存储在一个数组中（每次迭代大约 100000 个双精度值）

我不太了解计算机的工作原理或 C++ 编码，我想知道是否有人能指出我正确的方向，以便我可以解决这个问题。

如果有帮助，我也可以发布代码，但它很长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:46:34.583

就像奥利说的那样，它可以是任何东西。

可能是算法。您知道在一定数量的迭代后该代码是否不应该放慢速度？也许您的问题的性质是程序必须放慢速度。

可能是电脑内存不足。尝试在内存更大的计算机上运行相同的程序，效果会更好吗？然后，您必须进行内存分析并识别内存中存在但未被使用的任何对象（如大型数组）。并修复代码，使其不会发生。查找“内存泄漏”并了解如何修复它。

可能是没有内存泄漏，但随着迭代次数的增加，进程占用更多内存，以至于需要不断地从硬盘驱动器来回交换内存页面，这种行为很常见，并且与速度突然下降。尝试重写程序，以使内存占用不会像那样扩大。尝试管理数据，以便删除未使用的数据或将其写入文件。

或者是其他东西...

希望这可以帮助。

# java - 最近的java漏洞如何影响Android和编程？

> ID：14298116
> 
> 赞同：5
> 
> 时间：2013-01-12T21:29:11.327
> 
> 标签：java, android, security

Java最近的[漏洞](http://www.cnn.com/2013/01/11/tech/web/java-vulnerability/)是否也对主要使用 Java 编程的 Android 系统构成威胁？正如许多人建议的那样，我已经从我的计算机上禁用并卸载了 Java，以防止这些漏洞利用。我是否也应该担心我的 Android 设备？最后，这会影响 Java 和/或 Android 设备的编程吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T21:35:42.670

他们没有。

最近的 Java 漏洞仅涵盖在 applet 上下文中运行 Java 并且仅涉及 Oracle 的 JVM 的场景。小程序的上下文是受限的并且具有一定的权限，而这些最近的漏洞绕过这些权限以获得更高的权限，即运行浏览器的用户的全部权限，而不是插件的安全上下文授予的权限。

在 Android 中，JVM 已经可以访问正在运行的用户可以访问的所有内容（应用程序服务器也是如此，除了更受限制的策略），因此您不必担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:46:58.630

我不太了解这个特定漏洞的细节，但值得注意的是，Android 不使用 Oracle 的 JVM，它使用[Dalvik](http://en.wikipedia.org/wiki/Dalvik_%28software%29)，这是一个非常不同的 VM，具有不同的架构。如果不先进行转换，它甚至无法运行标准的 Java 字节码。

鉴于虚拟机之间的差异以及不应该有任何通用代码的事实，一个漏洞利用极不可能对另一个有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:36:10.490

考虑到 Android 在 Google 制造的 Java 版本上运行，这取决于漏洞是什么。我倾向于说没有效果，因为 hoopla 似乎围绕着桌面版本以及它与文件系统交互的方式。

# android - 来自 SpannableStringInternal 的 StringIndexOutOfBoundsException

> ID：14298117
> 
> 赞同：6
> 
> 时间：2013-01-12T21:29:13.040
> 
> 标签：android, spannablestring

我不断收到来自市场的以下错误报告：

```
java.lang.StringIndexOutOfBoundsException: length=51; regionStart=37; regionLength=-15 at
java.lang.String.startEndAndLength(String.java:593) at
java.lang.String.getChars(String.java:902) at
android.text.SpannableStringInternal.getChars(SpannableStringInternal.java:70)
at android.text.TextUtils.getChars(TextUtils.java:70) at
android.text.TextLine.set(TextLine.java:160) at
android.text.Layout.draw(Layout.java:424) at
android.widget.TextView.onDraw(TextView.java:5262) at
android.view.View.draw(View.java:11184) at
android.view.ViewGroup.drawChild(ViewGroup.java:2892) at
android.view.ViewGroup.dispatchDraw(ViewGroup.java:2494) at
android.view.ViewGroup.drawChild(ViewGroup.java:2890) at
android.view.ViewGroup.dispatchDraw(ViewGroup.java:2494) at
android.view.ViewGroup.drawChild(ViewGroup.java:2890) at
android.widget.ListView.drawChild(ListView.java:3231) at
android.view.ViewGroup.dispatchDraw(ViewGroup.java:2494) at
android.widget.AbsListView.dispatchDraw(AbsListView.java:2277) at
android.widget.ListView.dispatchDraw(ListView.java:3226) at
android.view.View.draw(View.java:11289) at
android.widget.AbsListView.draw(AbsListView.java:3760) at
android.view.ViewGroup.drawChild(ViewGroup.java:2892) at
android.view.ViewGroup.dispatchDraw(ViewGroup.java:2494) at
android.view.ViewGroup.drawChild(ViewGroup.java:2890) at
android.view.ViewGroup.dispatchDraw(ViewGroup.java:2494) at
android.view.ViewGroup.drawChild(ViewGroup.java:2890) at
android.view.ViewGroup.dispatchDraw(ViewGroup.java:2494) at
android.view.ViewGroup.drawChild(ViewGroup.java:2890) at
android.view.ViewGroup.dispatchDraw(ViewGroup.java:2494) at
android.view.ViewGroup.drawChild(ViewGroup.java:2890) at
android.view.ViewGroup.dispatchDraw(ViewGroup.java:2494) at
android.view.View.draw(View.java:11187) at
android.widget.FrameLayout.draw(FrameLayout.java:450) at
com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2291)
at android.view.ViewRootImpl.draw(ViewRootImpl.java:2210) at
android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1816) at
android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2628) at
android.os.Handler.dispatchMessage(Handler.java:99) at
android.os.Looper.loop(Looper.java:137) at
android.app.ActivityThread.main(ActivityThread.java:4511) at
java.lang.reflect.Method.invokeNative(Native Method) at
java.lang.reflect.Method.invoke(Method.java:511) at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747) at
dalvik.system.NativeStart.main(Native Method) 
```

令人沮丧的部分是，这源于 android 本身——并且在我的代码中没有起点。在做了一些研究之后，这只发生在希伯来语用户身上，我发现这个链接到谷歌错误 - [http://code.google.com/p/android/issues/detail?id=30889](http://code.google.com/p/android/issues/detail?id=30889)

我自然而然地尝试联系作者和分配给这个 bug 的谷歌员工——他们都没有屈膝礼或回复。

我设置跨度的相关代码是：

```
if(searchTerm!=null){
    try{
        Spannable str = (Spannable) name.getText();
        int s_ind = fi.getSearchName().indexOf(searchTerm);
        str.setSpan(new ForegroundColorSpan(Color.BLACK),s_ind, (s_ind+searchTerm.length()), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        str.setSpan(new BackgroundColorSpan(Color.YELLOW),s_ind, (s_ind+searchTerm.length()), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        str.setSpan(new StyleSpan(android.graphics.Typeface.BOLD),s_ind, (s_ind+searchTerm.length()), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    }catch(Exception ex){
        FLogger.logE(DW_CODES.PREDEFINED_ERROR, "Exception while searching for view in predefined "+ex.getMessage());
    }
} 
```

搜索词是名称的一部分。我想用不同的颜色标记 searchTerm 部分，以便用户更容易看到它。

我为此投入了很多时间，因为我什至没有设法在我的 4 台测试设备和 8 台 AVD 上重新创建它，我有点迷失了。任何提示\建议在没有 Spannables 的情况下做同样的事情，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:16:51.847

希伯来语是一种从右到左的语言。Android，至少在 2.3 之前，不能很好地从右到左处理——例如 canvas.drawText 会将它向后绘制。各种 OEM 在前往受影响地区（以色列、中东和其他一些国家）的手机上使用了非官方补丁，但它并不通用。当没有这些补丁的手机用于从右到左文本的语言时，通常会出现错误。我不知道谷歌是否曾经发布过官方补丁，我敢肯定他们已经发布了，但那里有数千万部损坏的 2.3 手机。

这就是问题所在-如果您尝试自己修复它（通常的方法是自己反转文本），它将无法在具有这些补丁的设备上运行，而大多数手机将使用这些语言。所以我不能建议。您可能想要关闭 rtl 语言的此效果并查看它是否可以修复它 - 这将是希伯来语、阿拉伯语和乌尔都语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T05:56:11.307

你试过替代品吗？例如这个：

```
String str = name.getText().toString();
int s_ind = fi.getSearchName().indexOf(searchTerm);
String prefix = str.substring(0, s_ind);
String toBold = str.substring(s_ind, searchTerm.length());
String postfix = str.substring(searchTerm.length(), str.length());
Spanned spanned = Html.fromHtml(prefix + "<b>" + toBold + "</b>"
                + postfix); 
```

我知道代码的边缘很粗糙，但你明白了。查看[支持的 html 标签](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T12:39:58.380

试一下`adb logcat -s DEBUG`，会导致一些本机崩溃`StringIndexOutOfBoundsException`

# spring-mvc - 如何使用 Spring MVC 的反射来创建 CRUD 应用程序

> ID：14298119
> 
> 赞同：0
> 
> 时间：2013-01-12T21:29:15.037
> 
> 标签：spring-mvc

我有一个基本的 Spring 3.0 MVC + Hibernate 4.0 CRUD 应用程序设置并正常运行。

假设明天我决定修改“用户”实体的属性。（我现在需要添加年龄、性别、昵称等）。

我如何创建一个给定“用户”对象（通过 ModelMap 传递）将显示所有属性（用于显示或作为编辑输入）的 jsp 模板，而不事先知道有多少。我只是想避免在更改模型时（手动）修改视图的繁琐工作。

我知道如何在普通的旧 POJO 和手工制作的 JSP 页面上使用反射来做到这一点，但在 MVC 模型下，我似乎无法找到答案。

我只需要正确的咒语即可：

```
 FOREACH attributeName IN UserClass
    display ${user.attributeName} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:38:33.607

我不认为你可以直接遍历jsp中类的字段。但是您可以做的是在控制器中准备一个字段列表，然后将它们添加到模型中，并按如下方式遍历此列表：

```
 <c:forEach items="${objectFields}" var="item">
     <c:set var="colTxt">
        <spring:eval expression="item[column]" htmlEscape="false" />
     </c:set>
     ${colTxt}
  </c:forEach> 
```

# spring - 当 Jackson 1 JAR 在类路径上时，强制 Spring 3.1 使用 Jackson 2

> ID：14298121
> 
> 赞同：3
> 
> 时间：2013-01-12T21:29:36.793
> 
> 标签：spring, spring-mvc, jackson

我有一个用 Maven 构建的 Spring MVC 3.1 应用程序，我想使用 Jackson 2 进行 JSON 序列化/反序列化。我在我的 pom.xml 文件中明确包含了 Jackson 2.x 依赖项，尽管我的应用程序有一个在内部使用 Jackson 1.9.9 的不同依赖项，我无法轻松删除该依赖项。

由于两个 Jackson 库都存在于类路径中，因此 Spring 似乎默认使用 Jackson 版本 1.9.9。

如何强制 Spring MVC 使用 Jackson 2？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:29:36.793

为了完成这项工作，我必须调整我的 mvc:annotation-driven xml 配置元素，使其工作如下：

```
<mvc:annotation-driven>
  <mvc:message-converters register-defaults="false">
    <bean id="jacksonMessageConverter" 
      class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter"/>
  </mvc:message-converters>
</mvc:annotation-driven> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:59:04.140

[在Spring 3.2](https://jira.springsource.org/browse/SPR-9302)中添加了对 Jackson 2 的支持并向后移植到[Spring 3.1.2](https://jira.springsource.org/browse/SPR-9507)。一旦你有了这些版本之一，你只需要类路径上的 jackson-databind 库，如此处[所述](http://norrisshelton.wordpress.com/2012/07/15/spring-3-mvc-with-json-via-jackson-2-0/)

[或者，Keith Donald 在此要点](https://gist.github.com/2423129)中包含了 MappingJackson2HttpMessageConverter 的源代码，如[本答案](https://stackoverflow.com/a/10421183/252840)中所述。

# ios - 取消保管箱加载文件

> ID：14298125
> 
> 赞同：1
> 
> 时间：2013-01-12T21:29:52.463
> 
> 标签：ios, objective-c, rest, download, dropbox

在我的应用程序中，我允许用户查看他们所有的 Dropbox 文件，他们可以将文件导入 Dropbox 或将它们下载到应用程序中。我查看了 Dropbox 的网站，但在取消上传/下载时找不到任何内容。我有一些应用程序（例如 Textastic）取消了保管箱文件传输，我该如何取消它才能删除下载的数据并停止加载到应用程序中？

我用来将文件加载到应用程序中的代码是：

```
- (void)startDownloadingDropboxFile:(NSString *)dropboxFilePath toPath:(NSString *)destinationPath {
    NSLog(@"dropbox file path: %@",dropboxFilePath);
    NSLog(@"destination path: %@",destinationPath);
    self.dbFilePath = dropboxFilePath;
    [[self restClient] loadFile:dropboxFilePath intoPath:destinationPath];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:38:04.440

要取消`loadFile:`，您需要致电：

```
[[self restClient] cancelFileLoad:dropboxFilePath]; 
```

显然，您需要将此链接到某些用户界面按钮或其他允许用户取消下载的机制。

此方法负责清理部分下载的文件。

# c# - 如何使用 getChar()？

> ID：14298126
> 
> 赞同：-5
> 
> 时间：2013-01-12T21:29:52.883
> 
> 标签：c#

我在 java 中有这段代码：

```
instr = instr.trim();
char[] c = new char[instr.length()];
instr.getChars(0,c.length,c,0); 
```

如何用 C# 编写这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:34:49.187

您可以使用 Linq：

```
int startIndex = 1;
int length = 2;
char[] chars = instr
      .Where((c, i) => i >= startIndex && i < startIndex+length).ToArray(); 
```

[**演示**](http://ideone.com/kAvJj4)

如果您只想将*所有*字符复制到一个新字符`char[]`中，您可以使用[`String.ToCharArray`](http://msdn.microsoft.com/en-us/library/ezftk57x.aspx). 如果要将字符串的一部分作为字符串，可以使用[`String.Substring`](http://msdn.microsoft.com/en-us/library/aka44szs.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:32:43.667

看`toCharArray`方法：

[http://msdn.microsoft.com/en-us/library/system.string.tochararray%28v=VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.string.tochararray%28v=VS.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:32:50.927

使用`ToCharArray`方法：

```
instr = instr.Trim();
char[] c = instr.ToCharArray(); 
```

# php - 使用 Jquery Mobile/PHP 编辑数据无法正常工作

> ID：14298127
> 
> 赞同：0
> 
> 时间：2013-01-12T21:30:11.573
> 
> 标签：php, jquery, mysql, mobile

我创建了一个包含一些数据的数据库。我已经能够使用 Jquery Mobile 显示数据。唯一的问题是当我来到我的编辑页面，更新数据并返回主页时，url 保持不变。例子：

我在 example.com/index.php ---> 点击指向 example.com/index.php?id=1（或任何其他数字）的链接 --> 更新数据并点击返回index.php 与更新的数据，但 url 停留在 example.com/index.php?id=1 与 index.php 的内容。我很困惑！！这是我的 2 个文件：

索引.php

```
 <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />

<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

 </head>
 <body>

<div data-role="page">
    <div data-role="header">
        <h3>
            AmateurStandenLive
        </h3>
    </div>
    <div data-role="content">
        <div data-role="collapsible-set" data-collapsed="true" >
                 <div data-role="collapsible" data-collapsed="true" data-theme="a">
                <h3>Oost</h3>

                <div data-role="collapsible" data-collapsed="true" data-theme="b">
                <h3>4G</h3>

                <ul data-role="listview" >
                    <?php
                try
                {
                    $connection = mysql_connect("localhost","zomervak_amalive","***");
                    mysql_select_db("***", $connection);
                    $result = mysql_query("SELECT * FROM zattop");

                    while($row = mysql_fetch_array($result))
                    {
                        echo "<li><a href='edit.php?id=" . $row['id'] . "'><h2>" . $row['thuis'] . " - "  . $row['uit'] . "</h2><h3>" . $row['thuisscore'] . " - " . $row['uitscore'] . "</h3></a></li>";
                    }

                    mysql_close($connection);
                }
                catch(Exception $e)
                {
                    echo $e->getMessage();
                }
            ?>
                </ul>
                </div>
            </div>
          <div data-role="collapsible" data-collapsed="true" data-theme="a">
                <h3>West</h3>  
                <div data-role="collapsible" data-collapsed="true" data-theme="b">
                <h3>4B</h3>
      </div>
        </div>

    </div> 
```

编辑.php

```
 </head>
 <body>
 <?php

 if ($error != '')
 {
 echo '<div style="padding:4px; border:1px solid red; color:red;">'.$error.'</div>';
 }
 ?>

 <form action="" method="post">
 <input type="hidden" name="id" value="<?php echo $id; ?>"/>

 <table border="1">
 <tr>
 <td colspan="2"><b><font color='Red'>Edit Records </font></b></td>
   </tr>
 <tr>
 <td width="179"><b><font color='#663300'>Name<em>*</em></font></b></td>
 <td><label>
 <input type="text" name="thuisscore" value="<?php echo $thuisscore; ?>" />
 </label></td>
 </tr>

 <tr>
 <td width="179"><b><font color='#663300'>Address<em>*</em></font></b></td>
 <td><label>
 <input type="text" name="uitscore" value="<?php echo $uitscore; ?>" />
 </label></td>
 </tr>

 <tr align="Right">
 <td colspan="2"><label>
 <input type="submit" name="submit" value="Edit Records">
  </label></td>
 </tr>
 </table>
 </form>
 </body>
 </html>
 <?php
  }

 /* Database Connection */

 $sDbHost = 'localhost';
 $sDbName = '***';
 $sDbUser = 'zomervak_amalive';
 $sDbPwd = '***';

 $dbConn = mysql_connect ($sDbHost, $sDbUser, $sDbPwd) or die ('MySQL connect failed. ' . mysql_error());
 mysql_select_db($sDbName,$dbConn) or die('Cannot select database. ' . mysql_error());

if (isset($_POST['submit']))
{

if (is_numeric($_POST['id']))
{

$id = $_POST['id'];
$thuisscore = mysql_real_escape_string(htmlspecialchars($_POST['thuisscore']));
$uitscore = mysql_real_escape_string(htmlspecialchars($_POST['uitscore']));

if ($thuisscore == '' || $uitscore == '' )
{

$error = 'ERROR: Please fill in all required fields!';

valid($id, $thuisscore, $uitscore, $error);
}
else
{

mysql_query("UPDATE zattop SET thuisscore='$thuisscore', uitscore='$uitscore' WHERE     id='$id'")
or die(mysql_error());

header('Location: index.php');
}
}
else
{

echo 'Error!';
}
}
else

{

if (isset($_GET['id']) && is_numeric($_GET['id']) && $_GET['id'] > 0)
{

$id = $_GET['id'];
$result = mysql_query("SELECT * FROM zattop WHERE id=$id")
or die(mysql_error());
$row = mysql_fetch_array($result);

if($row)
{

$thuisscore = $row['thuisscore'];
 $uitscore = $row['uitscore'];

valid($id, $thuisscore, $uitscore,'');
}
else
{
echo "No results!";
}
}
else

{
echo 'Error!';
}
}
?> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:08:32.140

您收到未定义的错误，这意味着尚未设置某些变量。

问题在于您的输入字段。名称未设置。

```
 <input type="text" name="name" id="name" value="<?php echo $thuisscore; ?>"  />
     </div>

     <div data-role="fieldcontain">
     <label for="name"><b>Uitteam:</b></label>
     <input type="text" name="name" id="name" value="<?php echo $uitscore; ?>"  /> 
```

请注意，它们都具有相同的名称 'name="name"'，您稍后要求这些作为 POST 变量：

```
$thuisscore = mysql_real_escape_string(htmlspecialchars($_POST['thuisscore'])); 
```

$uitscore = mysql_real_escape_string(htmlspecialchars($_POST['uitscore']));

但它们不存在。

所以试试这个。

```
<input type="text" name="thuisscore" id="name" value="<?php echo $thuisscore; ?>"  />
     </div>

     <div data-role="fieldcontain">
     <label for="name"><b>Uitteam:</b></label>
     <input type="text" name="uitscore" id="name" value="<?php echo $uitscore; ?>"  /> 
```

同样在页面顶部初始化 $error 变量 ($error = null;)

请记住将重定向更改为 view.php 而不是 index.php

```
header('Location: index.php'); // becomes header('Location: view.php'); 
```

# .htaccess - 使用 .htaccess 为没有用户名的页面设置密码，只有密码和 html 表单

> ID：14298130
> 
> 赞同：2
> 
> 时间：2013-01-12T21:30:32.913
> 
> 标签：.htaccess, password-protection

我对构建网站非常陌生，并且在过去的几个月里一直在构建一个。我不想在我的网站上添加受密码保护的页面，其中包含要下载的文件库。我已经在我的主页上构建了一个简单的表单，用于输入登录详细信息，但我只想包含密码而不是用户名。我遇到的问题是所有当前的 .htaccess 在线教程都需要用户名和密码，并且您不能在网站上使用自己的登录框。如果有人可以向我提供代码并告诉我将其放在哪里，我将不胜感激。

我的 index.html 上的登录框是一个简单的表单：

```
<form>
Member login:<input type="password" name="password" />
<input type="button" value="Login" />
</form> 
```

谢谢你看这个，

乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:41:29.330

如果需要一个服务器端脚本来检查密码是否正确。

首先，您必须修改表单以调用脚本

```
<form action="login.php" method="post">
  Member login:<input type="password" name="password" />
  <input type="submit" value="Login" />
</form> 
```

变化：

*   action：定义用户点击提交按钮时调用的脚本
*   input type=submit：提交按钮，导致表单将其数据发送到服务器
*   方法：定义数据传递到服务器的方式

“login.php”的一个简单示例是这个 PHP 脚本：

```
<?php
  if($_POST["password"] == "Your password here.") {
?>
Your website here.
<?php
  }
  else
  {
?>
Error message here.
<?php
  }
?> 
```

第 2 行检查表单发布的密码字段是否等于右侧的字符串（“您的密码”）。

文本“您的网站在这里”。密码正确时显示。否则它将显示“此处的错误消息”。您可以用常规 HTML 代码替换该文本。

除了您的评论：

永远不要在登录后重定向到 HTML 文件，因为该文件必须是公开的才能重定向到它。相反，您应该使用 .htaccess 将其设为私有（只能由 localhost 访问）并通过 php 脚本包含它。

.htacces 将文件夹设为私有：

```
Order deny,allow
Deny from all
Allow from 127.0.0.1 
```

更新的 PHP 脚本（secureFolder 是私有文件夹）：

```
<?php
  if($_POST["password"] == "Your password here.") {
    include("secureFolder/members.html");
  }
  else
  {
?>
Error message here.
<?php
  }
?> 
```

请注意，您只能通过这种方式访问​​单个站点。要允许用户在登录后打开多个站点，您需要一个 PHP 会话来保存用户登录并提供页面。

# scala - Scala 中的非严格、不可变、非记忆的 Infinite 系列

> ID：14298139
> 
> 赞同：12
> 
> 时间：2013-01-12T21:32:09.883
> 
> 标签：scala, stream, immutability, infinite, strict

我想要一个无限的非严格系列 x [1]， x [2]， x [3] ......我可以一次使用一个元素，而不是为了保持我的内存使用量不变而记住结果。为了具体起见，假设它是一系列整数（例如自然数、奇数、素数），尽管这个问题可能适用于更一般的数据类型。

使用无限列表最简单的方法是使用 Scala 的`Stream`对象。一个常见的习惯用法是编写一个返回 a 的函数`Stream`，使用`#::`运算符将​​一个项添加到系列中，然后递归调用自身。例如，在给定起始值和后继函数的情况下，以下代码会生成无限的整数流。

```
 def infiniteList(n: Int, f: Int => Int): Stream[Int] = {
      n #:: infiniteList(f(n), f)
  }
  infiniteList(2, _*2+3).take(10) print
  // returns 2, 7, 17, 37, 77, 157, 317, 637, 1277, 2557, empty 
```

（我意识到上面的内容相当于库调用`Stream.iterate(2)(_*2+3)`。我在这里写它作为这个无限`Stream`成语的例子。）

但是，流会记住它们的结果，从而使它们的内存需求非常不稳定，并且可能非常大。[文档指出](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Stream)，如果您不抓住 a 的头部，就可以避免记忆`Stream`，但实际上这可能很棘手。我可能会实现无限列表代码，我*认为*我不会在其中保留任何流头，但如果它仍然有无限的内存需求，我必须弄清楚问题是否在于我正在以某种方式处理我的流这确实会导致记忆，或者如果它是其他东西。这可能是一项困难的调试任务并且有代码味道，因为我试图欺骗显式记忆的数据结构以返回非记忆的结果。

我想要的是`Stream`没有记忆的具有期望语义的东西。Scala 中似乎不存在这样的对象。我一直在尝试使用迭代器来实现无限数字系列，但是当您开始想要对它们进行理解操作时，迭代器的可变性使这变得很棘手。我也尝试从头开始编写自己的代码，但不清楚我应该从哪里开始（我是子类`Traversable`吗？）或者如何避免重新实现 , 等中的`map`功能`fold`。

有人有很好的示例 Scala 代码来实现非严格、不可变、非记忆的无限列表吗？

更一般地说，我理解[traversable、iterable、sequence、stream 和 view 的语义](https://stackoverflow.com/questions/8569489/semantics-of-scala-traversable-iterable-sequence-stream-and-view)，但是我发现这个问题如此令人烦恼的事实让我觉得我误解了一些东西。在我看来，非严格性和非记忆性是完全正交的属性，但 Scala 似乎已经做出了将它们统一起来的设计决定，`Stream`并且没有简单的方法将它们分开。这是对 Scala 的疏忽，还是我忽略的非严格性和非记忆化之间存在某种深层联系？

* * *

我意识到这个问题相当抽象。这是一些将其与特定问题联系起来的附加上下文。

我在实施 Meissa O'Niell 的论文“ [The Genuine Sieve of Eratosthenes](http://www.cs.hmc.edu/~oneill/papers/Sieve-JFP.pdf) ”中描述的素数生成器的过程中遇到了这个问题，并且很难给出一个简单的例子来说明一个`Iterator`对象是不合适的而不拉入很多那篇论文的细节。这是一个使用 [流](https://github.com/wpm/PrimeNumberGenerator)的完整实现，它非常优雅，但内存消耗非常大。

这是一个带有迭代器的简化实现，它不会编译，但可以让您了解我想要什么。

```
import scala.collection.mutable

object ONeillSieve {

  class NumericSeries extends BufferedIterator[Int] with Ordered[NumericSeries] {
    def hasNext = true

    def compare(that: NumericSeries) = that.head.compare(head)

    override def toString() = head + "..."

    var head = 3

    def next() = {
      val r = head
      head += 2
      r
   }
 }

def main(args: Array[String]) {
    val q = mutable.PriorityQueue[NumericSeries]()

    val odds = new NumericSeries

    q += odds.map(odds.head * _)
    odds.next()
    q += odds.map(odds.head * _)

    println("Sieve = %s\nInput = %s".format(q, odds))
  }
} 
```

我需要构建一个`PriorityQueue`由它们的最小元素键入的无限数字系列。（因此我使用 a`BufferedIterator`而不仅仅是一个普通的`Iterator`。）还要注意，这里无限级数的基础是奇数，但最通用的解决方案涉及更复杂的级数。在主函数结束时，我希望队列包含两个无限系列：

1.  3x（赔率从 3 开始）（即 9,12,15...）
2.  5x（赔率从 5 开始）（即 25,30,35...）

以上无法编译，因为`odds.map(...)`返回的是`Iterator`a ，而不是 a `NumericSeries`，因此无法添加到优先级队列中。

在这一点上，我似乎正在涉足集合类扩展，这很棘手，所以我想确保除非绝对必要，否则我不必这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:51:59.503

**编辑：**`Generator`使用`filter`or时，以下内容不保留类型`map`；确实尝试为生成器实现完整的“MyType”或多或少是不可能的（查看`IndexedSeqView`源代码以查看混乱）。

但是有一个更简单的方法（见我的第三个答案）

* * *

好的，我第二次尝试。为了保持 , 等的惰性行为`map`，`filter`最好的方法可能是子类[`SeqView`](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.collection.SeqView)或`StreamView`：

```
import collection.immutable.StreamView

final case class Generator[A](override val head: A, fun: A => A)
extends StreamView[A, Generator[A]] {
  protected def underlying = this
  def length: Int = Int.MaxValue  // ?
  def iterator = Iterator.iterate(head)(fun)
  def apply(idx: Int): A = {
    if(idx < 0) throw new IndexOutOfBoundsException(idx.toString)
    var res = head
    var i = idx; while(i > 0) {
      res = fun(res)
      i -= 1
    }
    res
  }
} 
```

（我采纳了 Rex 的建议，将其称为“发电机”）。

```
val i = Generator[Int](2, _ * 2 + 3)
i.take(4).foreach(println)
val j = i.map(_ * 0.5)
j.take(4).foreach(println) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T22:22:24.960

如果您只需要能够多次递归列表，请尝试使用`Unit => Iterator[A]`而不是原始列表，请尝试以下重组：

```
// Old way
val i = Iterator.tabulate(5)(_ + 2)
val j = i.map(_*5)
val k = i.map(_*3)
println(j.mkString(" "))  // Prints 10, 15, 20, 25, 30 as it should
println(k.mkString(" "))  // Prints nothing!  (i was used up!)

// New way
val f = (u: Unit) => Iterator.tabulate(5)(_+2)
val g = f andThen (_.map(_*5))
val h = f andThen (_.map(_*3))
println(g(()).mkString(" "))  // 10, 15, 20, 25, 30
println(h(()).mkString(" "))  // 6, 9, 12, 15, 18 
```

但这一切都*从头开始*。如果您需要从中间产生新的工作，还有一种方法可以做到这一点，只要您愿意存储您已经前进多远的所有中间元素：

```
val a = Iterator.tabulate(5)(_+2)
val (a1,a2) = a.duplicate
val c = a1.map(_*5)
val d = a2.map(_*3)
println(c.mkString(" "))  // 10, 15, 20, 25, 30...but stores a=2, 3, 4, 5, 6
println(d.mkString(" "))  // 6, 9, 12, 15, 18 
```

如果这种模式和其他模式都不够好，那么您将不得不在集合库中创建一个类——我们`Generator`可以称之为它吗？——这将完全符合您的要求。我让它继承自`Iterator`or `Iterable`，覆盖或创建一个`duplicate`方法，该方法将创建两个新副本，内部生成函数和数据处于相同状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T00:33:55.857

希望这是最直接的方法。只需创建一个惰性`Iterable`：

```
object Generator {
  def apply[A](head: A)(next: A => A): Generator[A] = {
    val _head = head
    new collection.IterableView[A, Nothing] {
      override def head = _head
      def underlying = sys.error("No underlying structure")
      def iterator = Iterator.iterate(head)(next)
    }
  }
}
type Generator[A] = Iterable[A] 
```

这是用例：

```
val q = collection.mutable.PriorityQueue[Generator[Int]]()
val odds = Generator(3)(_ + 2)
q += odds.map(odds.head * _)
val next = odds.tail
q += next.map(next.head * _)
q.last.take(3).mkString(",") // -> 9,12,21
q.head.take(3).mkString(",") // -> 25,35,45 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T22:27:09.493

**编辑**：我在这里留下这个答案以供参考，但我发现不要遇到堆栈溢出，最好使用默认情况下惰性的集合：`SeqView`-> 查看我的其他答案。

* * *

如果你想定义一个新的集合类型，这就是我想象的：

```
import collection.generic.{GenericTraversableTemplate, GenericCompanion}
import collection.immutable.LinearSeq

final case class InfSeq[A](override val head: A, fun: A => A)
extends LinearSeq[A] with GenericTraversableTemplate[A, List] {
  override def companion: GenericCompanion[List] = List

  def apply(idx: Int): A = {
    if(idx < 0) throw new IndexOutOfBoundsException(idx.toString)
    var res = head
    var i   = idx
    while(i > 0) {
      res = fun(res)
      i  -= 1
    }
    res
  }

  def length            = Int.MaxValue  // ?
  override def isEmpty  = false  
  override def tail     = InfSeq(fun(head), fun)
  override def toString = take(4).mkString("InfSeq(", ",", ",...)")
} 
```

前任。

```
val i = InfSeq[Int](2, _ * 2 + 3)
i.take(4).foreach(println) 
```

显然，这还没有解决`map`,`filter`等功能。但是如果你小心使用`.view`，你应该没问题：

```
val j = i.view.map(_ * 0.5)
j.take(4).foreach(println) 
```

# java - OpenGL中透明对象中的三角形/线

> ID：14298140
> 
> 赞同：0
> 
> 时间：2013-01-12T21:32:13.387
> 
> 标签：java, opengl, jogl

当我绘制具有透明纹理的平面时（例如房子的窗户），我会看到不应该出现的线条或三角形。我怎样才能解决这个问题？

[![三角形](../Images/d6c221c4baa81e6401e3b1695440b906.png)](https://i.stack.imgur.com/HQWtu.png)
[（来源：[巨魔.ws](http://i.troll.ws/c9821713.png)）]

这是我用来绘制一个窗口的方法。我暂时启用混合以使窗口透明。

```
 static void drawWindow(int startX, int startY, int endX, int endY) {

    glEnable(GL_TEXTURE_2D);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    Textures.window.bind();
    glPushMatrix();
    glTranslatef(startX, startY, 0);

    glBegin(GL_QUADS);
    glTexCoord2d(1, 1);
    glVertex3d(0, 0, 0);
    glTexCoord2d(0, 1);
    glVertex3d(endX - startX, endY - startY, 0);
    glTexCoord2d(0, 0);
    glVertex3d(endX - startX, endY - startY, 200);
    glTexCoord2d(1, 0);
    glVertex3d(0, 0, 200);
    glEnd();
    glDisable(GL_TEXTURE_2D);
    glDisable(GL_BLEND);

    glPopMatrix();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:12:02.530

这是因为打开了多边形平滑，这会导致 GL 以不同的方式渲染多边形的边缘，从而导致 alpha 混合出现问题。

这是一种过时的 AA 形式，因此最好将其关闭，并改用全场景抗锯齿方法，例如 MSAA 或其他类似技术。

标准建议也适用 - 固定功能管道已过时和弃用，通常不推荐。

# ruby-on-rails - 会话中的用户名以 ruby 形式发送

> ID：14298144
> 
> 赞同：0
> 
> 时间：2013-01-12T21:32:23.537
> 
> 标签：ruby-on-rails, ruby, forms, session, send

所以这就是问题所在。我最近开始使用 ruby​​ 作为编程语言，我想知道如何使用会话中的名称（当有人登录时）通过表单发送。

我安装了设计和简单的表格，希望能完成它，但它没有用。我的第一个想法是使用这段代码向用户发送表单：

```
<%= f.hidden_field :name, :placeholder => current_user %> 
```

提前致谢！

Edit1 - 控制器代码：

```
class HomeController < ApplicationController
   def index
   end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:59:01.137

在控制器的**新建**和**编辑**操作中，您可以将值 current_user 分配给字段，对象的**名称**。

就像是：

```
# in New action
@controller = Controller.new
@controller.name = current_user.name 
```

# javascript - 使用 + 和 - 展开/折叠

> ID：14298146
> 
> 赞同：2
> 
> 时间：2013-01-12T21:32:29.917
> 
> 标签：javascript, frontend, expand, collapse

嘿，我正在寻找创建一个可展开/折叠的 div，我让它与以下代码一起正常工作，但第一次点击似乎没有做任何事情。

```
<script type="text/javascript">
    function showme(id, linkid) {
        var divid = document.getElementById(id);
        var toggleLink = document.getElementById(linkid);
        if (divid.style.display == 'block') {
            toggleLink.innerHTML = 'Top five loves +';
            divid.style.display = 'none';        }
        else {
            toggleLink.innerHTML = 'Top five loves -';
            divid.style.display = 'block';
        }
    }
</script>

<a id="toggler" onclick="showme('loves', this.id);" href="#">Top five loves</a>
<div id="loves">
<ol>
        <li>First item</li>
        <li>Second item</li>
        <li>Third item</li>
        <li>Fourth item</li>
        <li>Fifth item</li>
</ol>
</div> 
```

![加减展开/折叠](../Images/350142d6fff278e3c3656f0048dfb0f9.png)

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:00:15.737

如果您只想显示/隐藏，为什么不制作一个显示和隐藏的元素？

```
<script type="text/javascript">
    function showTop5(){
        document.getElementById("top5opener").style.display = "none";
        document.getElementById("top5").style.display = "block";
    }
    function hideTop5(){
        document.getElementById("top5").style.display = "none";
        document.getElementById("top5opener").style.display = "block";
    }
</script>
<a id="top5opener" href="javascript:showTop5();">Show Top 5</a>
<div id="top5" style="display:none">
    <a href="javascript:hideTop5();">Hide Top 5</a>
    <div class="yourElements">
        <ol>
            ...
        </ol>
    </div>
</div> 
```

您的按钮/链接只需要一点样式就可以看起来像您想要的那样

顺便说一句：你可以/应该使用一些框架，比如 jQuery :) 所以你的 javascript 会更小，更容易编写

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:37:07.177

`+`只需使用另一个切换功能（或编辑您拥有的功能）在 a和 a之间切换`-`。使用段落元素（或类似元素）来保存`+`and `-`。

# asp.net-mvc - 发送 EditData JQgrid

> ID：14298153
> 
> 赞同：0
> 
> 时间：2013-01-12T21:33:00.340
> 
> 标签：asp.net-mvc, jqgrid, jqgrid-asp.net

我有一个使用 jqgrid 3.6.5 版的项目。我必须在弹出表单上动态添加一个字段并将其与发布的数据一起发送。我在网上搜索过，但大多数结果似乎是关于版本 4.*。我们处于无法升级 jqgrid 版本的阶段。如何在 jqgrid 3.6.5 中发送附加值？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:08:54.593

3.6.5 版本真的很旧（几乎树龄），但如果已经支持您可能需要的最重要的功能。

要在提交添加或编辑表单时向服务器发送附加信息，您可以

*   使用`editData`选项
*   用于`onclickSubmit`返回带有附加信息的对象，这些附加信息将附加到发送到服务器的标准数据中
*   使用`serializeEditData`jqGrid 的选项来实现数据的自定义序列化或添加其他信息。

[因此，例如，您可以从答案](https://stackoverflow.com/a/14195049/315935)中遵循我的建议。

[旧答案](https://stackoverflow.com/a/5745168/315935)和[另一个](https://stackoverflow.com/a/10020340/315935)答案显示了如何在编辑表单中添加任何自定义信息。

# mysql - MYSQL：序号表

> ID：14298154
> 
> 赞同：4
> 
> 时间：2013-01-12T21:33:05.577
> 
> 标签：mysql, sql, numbers

我正在尝试获得一个从 1 到 2000 万的序列号表。（或 0 到 2000 万）

对于这个常见问题获得与 MySQL 兼容的解决方案是多么困难，我感到非常震惊。

与此类似：[在 MySQL 中创建“数字表”](https://stackoverflow.com/questions/9751318/creating-a-numbers-table-in-mysql)

但答案只有 100 万。我不太了解位移计算。

我见过很多 SQL 答案，但大多数都是针对非 MySQL 的数据库，所以由于缺乏对 MySQL 和其他数据库的了解，我无法采用这些代码。

一些参考资料：

[SQL，数字辅助表](https://stackoverflow.com/questions/10819/sql-auxiliary-table-of-numbers)

[创建和填充数字表的最佳方法是什么？](https://stackoverflow.com/questions/1393951/what-is-the-best-way-to-create-and-populate-a-numbers-table)

* * *

请确保您发布的代码在 MySQL 中兼容并且以分号分隔，以便我可以在 PhpMyAdmin 中运行它。我很感激用名为`numbers`的列命名的表`i`

我将对每个解决方案进行基准测试，以便将其存档，并希望下次有人尝试搜索此问题时会出现。

* * *

迄今为止的基准：

时间以秒为单位。

```
+---------------+------------------+---------+-----------+------------+
|    Author     |      Method      | 10,000  | 1,000,000 | 20,000,000 |
+---------------+------------------+---------+-----------+------------+
| Devon Bernard | PHP Many Queries | 0.38847 | 39.32716  | ~ 786.54   |
| Bhare         | PHP Few Queries  | 0.00831 | 0.94738   | 19.58823   |
| psadac,Bhare  | LOAD DATA        | 0.00549 | 0.43855   | 10.55236   |
| kjtl          | Bitwise          | 1.36076 | 1.48300   | 4.79226    |
+---------------+------------------+---------+-----------+------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T01:51:24.400

```
-- To use the bitwise solution you need a view of 2 to the power 25.
-- the following solution is derived from http://stackoverflow.com/questions/9751318/creating-a-numbers-table-in-mysql
-- the following solution ran in 43.8 seconds with the primary key, without it 4.56 seconds.

-- create a view that has 2 to the power 25 minus 1

-- 2 ^ 1
CREATE or replace VIEW `two_to_the_power_01_minus_1` AS select 0 AS `n` union all select 1 AS `1`;

-- 2 ^ 2
CREATE or replace VIEW `two_to_the_power_02_minus_1` 
AS select
   ((`hi`.`n` << 1) | `lo`.`n`) AS `n`
from (`two_to_the_power_01_minus_1` `lo` join `two_to_the_power_01_minus_1` `hi`) ;

-- 2 ^ 4
CREATE or replace VIEW `two_to_the_power_04_minus_1` 
AS select
   ((`hi`.`n` << 2 ) | `lo`.`n`) AS `n`
from (`two_to_the_power_02_minus_1` `lo` join `two_to_the_power_02_minus_1` `hi`) ;

-- 2 ^ 8
CREATE or replace VIEW `two_to_the_power_08_minus_1` 
AS select
   ((`hi`.`n` << 4 ) | `lo`.`n`) AS `n`
from (`two_to_the_power_04_minus_1` `lo` join `two_to_the_power_04_minus_1` `hi`) ;

-- 2 ^ 12
CREATE or replace VIEW `two_to_the_power_12_minus_1` 
AS select
   ((`hi`.`n` << 8 ) | `lo`.`n`) AS `n`
from (`two_to_the_power_08_minus_1` `lo` join `two_to_the_power_04_minus_1` `hi`) ;

-- 2 ^ 13
CREATE or replace VIEW `two_to_the_power_13_minus_1`
AS select
   ((`hi`.`n` << 1) | `lo`.`n`) AS `n`
from (`two_to_the_power_01_minus_1` `lo` join `two_to_the_power_12_minus_1` `hi`);

-- create a table to store the interim results for speed of retrieval
drop table if exists numbers_2_to_the_power_13_minus_1;

create table `numbers_2_to_the_power_13_minus_1` (
  `i` int(11) unsigned
) ENGINE=myisam DEFAULT CHARSET=latin1 ;

-- faster 2 ^ 13
insert into numbers_2_to_the_power_13_minus_1( i )
select n from `two_to_the_power_13_minus_1` ;

-- faster 2 ^ 12
CREATE or replace view `numbers_2_to_the_power_12_minus_1`
AS select
   `numbers_2_to_the_power_13_minus_1`.`i` AS `i`
from `numbers_2_to_the_power_13_minus_1`
where (`numbers_2_to_the_power_13_minus_1`.`i` < (1 << 12));

-- faster 2 ^ 25
CREATE or replace VIEW `numbers_2_to_the_power_25_minus_1`
AS select
   ((`hi`.`i` << 12) | `lo`.`i`) AS `i`
from (`numbers_2_to_the_power_12_minus_1` `lo` join `numbers_2_to_the_power_13_minus_1` `hi`);

-- create table for results

drop table if exists numbers ;

create table `numbers` (
  `i` int(11) signed 
  , primary key(`i`)
) ENGINE=myisam DEFAULT CHARSET=latin1;

-- insert the numbers
insert into numbers(i)
select i from numbers_2_to_the_power_25_minus_1
where i <= 20000000 ;

drop view if exists numbers_2_to_the_power_25_minus_1 ;
drop view if exists numbers_2_to_the_power_12_minus_1 ;
drop table if exists numbers_2_to_the_power_13_minus_1 ;
drop view if exists two_to_the_power_13_minus_1 ;
drop view if exists two_to_the_power_12_minus_1 ;
drop view if exists two_to_the_power_08_minus_1 ;
drop view if exists two_to_the_power_04_minus_1 ;
drop view if exists two_to_the_power_02_minus_1 ;
drop view if exists two_to_the_power_01_minus_1 ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T22:15:28.453

如果速度是一个问题，你应该使用`LOAD DATA INFILE`哪个比`INSERT`根据 mysql doc 更快：

[http://dev.mysql.com/doc/refman/5.5/en/insert-speed.html](http://dev.mysql.com/doc/refman/5.5/en/insert-speed.html)

```
When loading a table from a text file, use LOAD DATA INFILE. This is usually 20 times
faster than using INSERT statements. See Section 13.2.6, “LOAD DATA INFILE Syntax”. 
```

基本上，您使用您最喜欢的语言（php？）生成 2000 万行，然后使用`LOAD DATA INFILE`.

[http://dev.mysql.com/doc/refman/5.5/en/load-data.html](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T22:45:06.697

我创建此类表的典型方法是从以下开始：

```
select 0 as num union all select 1 union all select 2 union all
select 3 union all select 4 union all select 5 union all select 6 union all
select 7 union all select 8 union all select 9 
```

现在，在大多数数据库中，您可以使用`with`语句并执行以下操作：

```
with digits as (above query)
select d1.num+10*d2.num+100*d3.num+1000*d4.num+10000*d5.num+100000*d6.num+1000000*d7.num+10000000*87.num as num
from   digits d1 cross join
       digits d2 cross join
       digits d3 cross join
       digits d4 cross join
       digits d5 cross join
       digits d6 cross join
       digits d7 cross join
       (select 0 as num union all select 1) d8 
```

不幸的是，在 MySQL 中，您要么需要创建一个临时表，要么重复 union all 语句：

```
select d1.num+10*d2.num+100*d3.num+1000*d4.num+10000*d5.num+100000*d6.num+1000000*d7.num+10000000*d7.num as num
from (select 0 as num union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9
     ) d1 cross join
     (select 0 as num union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9
     ) d2 cross join
     (select 0 as num union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9
     ) d3 cross join
     (select 0 as num union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9
     ) d4 cross join
     (select 0 as num union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9
     ) d5 cross join
     (select 0 as num union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9
     ) d6 cross join
     (select 0 as num union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9
     ) d7 cross join
     (select 0 as num union all select 1) d8 
```

在 MySQL 中，如果你想把它放到一个表中，你可以`create table numbers as`在 select 之前使用。但是，不同的数据库有不同的语法将选择的结果转储到表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T21:39:35.453

我不确定您是尝试拨打一个电话拨打 2000 万行还是拨打一个电话拨打 2000 万次。第二种情况的一个例子是：

```
<?php
$i =0;
while($i <= 20000000){
$sql = mysql_query("INSERT INTO table_name VALUES ('$i')");
$i +=1;
}
?> 
```

如果您正在寻找 SQL 解决方案，您不能尝试适应

```
DROP TABLE NumbersTest
DECLARE @RunDate datetime
SET @RunDate=GETDATE()
SELECT TOP 20000000 IDENTITY(int,1,1) AS Number
    INTO NumbersTest
    FROM sys.objects s1
    CROSS JOIN sys.objects s2
ALTER TABLE NumbersTest ADD CONSTRAINT PK_NumbersTest PRIMARY KEY CLUSTERED (Number)
PRINT CONVERT(varchar(20),datediff(ms,@RunDate,GETDATE()))+' milliseconds'
SELECT COUNT(*) FROM NumbersTest 
```

取自这篇[文章](https://stackoverflow.com/questions/1393951/what-is-the-best-way-to-create-and-populate-a-numbers-table)，据报道在平均 56.3 毫秒内生成 10,000 行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T23:52:19.853

如果已经引用了这个答案，我们深表歉意。这在我的机器上花费了 18.79 秒（如果重要的话，一台戴尔笔记本电脑）......

[它改编自http://datacharmer.blogspot.co.uk/2006/06/filling-test-tables-quickly.html](http://datacharmer.blogspot.co.uk/2006/06/filling-test-tables-quickly.html)的旧解决方案，但至关重要的是，这不适用于默认的“香草”InnoDB 引擎，如果你一开始就尝试建立PK，它会慢得多。

从好的方面来说，您可以免费获得额外的 1350 万行！

```
drop table if exists numbers;
create table numbers ( id int not null) engine = myisam;

delimiter $$

drop procedure if exists fill_numbers $$
create procedure fill_numbers()
deterministic
begin
  declare counter int default 1;
  insert into numbers values (1);
  while counter < 20000000
  do
      insert into numbers (id)
          select id + counter
          from numbers;
      select count(*) into counter from numbers;
      select counter;
  end while;
end $$
delimiter ;

call fill_numbers(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-13T00:04:03.157

采用 psadac 的使用答案`LOAD DATA INFILE`以及将 BULK 插入的想法应用于 fwrite：

```
$fh = fopen("data_num.txt", 'a') or die("can't open file");
$i =1;
while($i <= 20000000) {
    $num_string .= "$i\n";
    if($i % 1000000 == 0) {
        fwrite($fh, $num_string);
        $num_string = "";
    }
    $i +=1;
}
fclose($fh);

$dbh->beginTransaction();
$query = "LOAD DATA INFILE '" . addslashes(realpath("data_num.txt")) . "' INTO TABLE numbers LINES TERMINATED BY '\n';";
    $sth = $dbh->prepare($query);
    $sth->execute();
$dbh->commit();
unlink("data_num.txt"); 
```

当我使用 Windows 环境时，我不得不使用 addlashes。

有趣的是，通过仅写入 20 次来归档超过 2000 万次的 BULK 技术会导致约 10 秒，而仅写入 2000 万次则需要约 75 秒。使用字符串连接而不是将值推入数组并内爆产生几乎两倍的速度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-09T02:09:27.663

## 更简单、更快速的解决方案

[（此处](https://stackoverflow.com/a/12789094/2293304)为原代码）

```
CREATE TABLE `numbers` (
  `i` INT(11) SIGNED 
  , PRIMARY KEY(`i`)
) ENGINE=myisam DEFAULT CHARSET=latin1;

INSERT INTO numbers(i) SELECT @row := @row + 1 FROM 
(SELECT 0 UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) t,
(SELECT 0 UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) t2, 
(SELECT 0 UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) t3, 
(SELECT 0 UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) t4, 
(SELECT 0 UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) t5, 
(SELECT 0 UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) t6, 
(SELECT 0 UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) t7, 
(SELECT 0 UNION ALL SELECT 1) t8, 
(SELECT @row:=0) ti; 
```

在我安装了 MySQL 5.5.29 的笔记本电脑上，将[接受的答案](https://stackoverflow.com/a/14299890/2293304)与这个答案进行比较：

```
+-----------------+-------+---------------+
| Method          | Rows  | Time consumed |
+-----------------+-------+---------------+
| Accepted answer | 20M+1 |         42.4s |
+-----------------+-------+---------------+
| This one        | 20M   |         35.9s |
+-----------------+-------+---------------+ 
```

大约减少 15% 的时间，没有中间视图或表格，并且更易于阅读。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-12T22:47:05.407

为了回应 Devon Bernard 的回答，我决定使用 PDO Mysql PHP 来处理它，并使用仅几个查询的概念。起初我尝试只用 1 个大查询来完成，但 PHP 在默认设置下内存不足，所以我决定调整为每 100,000 次运行一次。即使分配了足够的内存来容纳，也没有显着的改进。

```
$i = 1;
$inserts = array();
while($i <= 20000000) {
    $inserts[] = "($i)";

    if($i % 100000 == 0) {
        $dbh->beginTransaction();
        $query = "INSERT INTO numbers(i) VALUES " . implode(',', $inserts) . ";";
            $sth = $dbh->prepare($query);
            $sth->execute();
        $dbh->commit();
        $inserts = array();
    }
    $i +=1;
} 
```

# javascript - 您如何知道用户从哪个房间断开连接？

> ID：14298158
> 
> 赞同：1
> 
> 时间：2013-01-12T21:33:50.820
> 
> 标签：javascript, node.js, socket.io

我有一个可以支持多个聊天室的应用程序。我试图弄清楚当用户关闭浏览器选项卡时如何捕获用户从哪个特定房间断开连接，以便我可以更新有多少用户加入了客户端的房间。目前，似乎只能在全球范围内聆听断开连接。如果我得到断开事件，我可以遍历用户所属的所有房间 via `io.sockets.manager.roomClients[socket.id]`，计算房间中的用户数量`io.sockets.clients(room).length`并将其发送到每个房间。如果我不确定这个用户离开了那个房间，那么重新计算房间里的人数似乎很愚蠢。

此外，我注意到在断开连接事件中，`io.sockets.clients(room)`将显示断开连接的用户仍在数组中...我必须设置 2 秒的超时，然后该用户不再在数组中。这是一个已知的问题？他仍然显示`disconnected:false`，所以我不能去那个属性。

这是我到目前为止所拥有的：

```
socket.on('disconnect', function(){
  //find all rooms this disconnected user belongs too
  var rooms = io.sockets.manager.roomClients[socket.id];

  for(var room in rooms){
    room = room.replace('/','');
    if(room){
      //rooms tend to keep the count around for a while, needs a timeout before user is removed from room
      setTimeout(function(){
        socket.broadcast.to(room).emit('count', io.sockets.clients(room).length);
      }, 2000);
    }
  }
}); 
```

# ios - 如何在没有开发人员证书的情况下在 Xcode 中归档我的项目？

> ID：14298162
> 
> 赞同：2
> 
> 时间：2013-01-12T21:34:23.310
> 
> 标签：ios, objective-c, xcode, xcode4.5, archive

我正在尝试使用 Xcode 4.5.2 归档我的 iOS 项目。我还没有开发人员的证书（或者，换句话说，我还没有向 Apple 支付 99 美元的费用。）当我转到 Product -> Archive 时，它​​是灰色的。快速搜索后发现我需要添加一个物理设备来使用该功能（这有点奇怪，但没关系。）由于我没有开发证书，我无法添加设备。那么在这种情况下如何归档我的项目呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:53:16.377

您需要开发人员资料来进行归档。如果您也选择了模拟器，它将显示为灰色。尝试选择 iOS 设备，然后进行存档。它会要求您选择一个配置文件。所以我建议你买一个。

您无需将物理设备连接到 Xcode 即可进行归档。您只需选择 iOS 设备选项并执行此操作。

查看[此处的文档以了解更多信息。](http://developer.apple.com/library/ios/#recipes/xcode_help-archives_organizer/articles/distributing_ios_apps.html)

# powershell - 一个简单的for循环

> ID：14298163
> 
> 赞同：0
> 
> 时间：2013-01-12T21:34:29.897
> 
> 标签：powershell

我正在阅读 Jerry Lee Ford 的书来学习 powershell 的基本概念，并且我即将参加考试。然而，我被困在这个 for 循环中

```
for ($i = 1; $i -le 10; $i++) {
Write-Host $i
} 
```

我看到它的方式：$i 等于 1，只要 $i 小于或等于，它就会增加 1。所以根据我的说法，最终值将是 11，因为当 $i 变成 10 时它仍然匹配-le 条件。但是最终值是10？

我在这里俯瞰什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:39:31.240

让我们来看看它：

$i = 1.`$i -le 10`是`true`. 打印 1.`$i`增加到 2

$i = 2.`$i -le 10`是`true`. 打印 2.`$i`增加到 3

$i = 3.`$i -le 10`是`true`. 打印 3.`$i`增加到 4

...

$i = 9.`$i -le 10`是`true`. 打印 9.`$i`增加到 10

$i = 10.`$i -le 10`是`true`. 打印 10.`$i`增加到 11

$i = 11.`$i -le 10`是`false`. 我们停下来！！

所以你看到从 1 到 10。

但如果你`$i`在循环外看到 的值，你会发现它确实是 11。但是循环在 10 处停止打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:41:02.207

您的应用程序到达 for 循环。它将变量 $i 设置为 1。现在它查看是否满足条件。如果是，则循环内的代码正在执行。之后 $i 递增。

所以只要 $i 等于 11，里面的代码就不会被执行。

# javascript - 在浏览器选项卡内运行 Chrome 打包应用程序

> ID：14298166
> 
> 赞同：12
> 
> 时间：2013-01-12T21:34:50.653
> 
> 标签：javascript, google-chrome, google-chrome-app

我想使用为 Chrome 打包应用程序提供的新 API，但也想保留在当前浏览器环境中打开某些本地 URL 的能力，这可能吗？所有打包应用程序教程都侧重于创建单独的窗口并将应用程序用作系统中的一等公民。

也许它可以像往常一样以某种方式使用`chrome.socket`和其他 API，甚至可能仅在开发人员模式下？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T17:04:45.923

不，这是设计不可能的。Chrome 打包应用程序独立于浏览器运行，无法访问特定于浏览器的功能，例如标签。最接近的方法是通过 window.open 在浏览器中打开一个外部（不在打包的应用程序中）URL。

但是，您可以使用 webview 标签模拟浏览器。请参阅[浏览器示例的代码](https://github.com/GoogleChrome/chrome-app-samples/tree/master/browser)以了解如何操作。

您还可以使用刚刚发布的消息传递 API 安装与打包应用程序对话的扩展程序。请参阅[消息传递示例](https://github.com/GoogleChrome/chrome-app-samples/tree/master/messaging)以了解如何操作 - 只要您知道应用程序和扩展程序 ID，它就非常简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-04T20:02:29.027

编辑：Chrome 44/45+ 左右不支持/可能会中断。3 月 3 日左右进行了一次代码审查，确实打破了 window.open 从后台页面打开，但暂时恢复了。所以期望这从 Chrome 50 开始不起作用？

实际上可以（在 Chrome 43 中）在浏览器选项卡中运行您的 chrome 平台打包应用程序。在您的背景页面中，只需`window.open`使用应用中某些内容的 URL 进行调用。例如，如果`index.html`在您的应用程序目录中，它将在带有 URL 的浏览器选项卡中打开您的应用程序`chrome-extension://{{ extension id }}/index.html`

这不应该需要任何额外的清单权限。

`chrome-extension://{{ extension id }}/index.html`请注意，如果您只是在浏览器中输入 url，它将不起作用。您需要从应用程序的后台脚本中打开它。

# asp.net-mvc - 如何设计一个收集不同类型数据但其他字段相同的表单

> ID：14298167
> 
> 赞同：0
> 
> 时间：2013-01-12T21:35:17.020
> 
> 标签：asp.net-mvc, database, forms

我正在设计一个资产管理，我在其中跟踪软件、监视器和工作站等。如您所见，这些资产具有不同的数据属性，并且有一个从中收集数据的表单是我的问题。我设计了一个表来保存所有属性，其中某些字段将为空，因为每种资产类型都具有与另一种类型不同的特征。我正在.Net 中设计一个基于 Web 的解决方案，我想知道如何设计一个表单来根据用户选择的资产类型显示字段。谢谢你的帮助。

我所拥有的是一个具有类型的下拉列表，并且选择了一个类型，显示该类型的相关字段并将在提交时进行验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:17:03.667

我建议以下步骤：

1.  为每种资产类型创建一个局部视图。
2.  将 div 添加到您的主视图（您有下拉菜单的地方）
3.  在下拉的单击事件中，进行 Ajax 调用以将相应的局部视图加载到步骤 2 中添加的 div 中。

注意：您的部分视图不应有提交按钮，所有提交都应通过主视图。

检查[此答案](https://stackoverflow.com/questions/1570127/render-partial-view-using-jquery-in-asp-net-mvc)以查看如何将部分视图加载到 div

祝你好运。

# objective-c - 在视图控制器上以编程方式更改对象的排列顺序

> ID：14298168
> 
> 赞同：0
> 
> 时间：2013-01-12T21:35:22.000
> 
> 标签：objective-c, ios6

我需要能够更改 UIViewController 上对象的顺序（排列），这样当点击一个东西时它会出现在前面，当另一个东西被点击时它会出现在前面等等。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:40:10.273

当然。在父级上，调用 UIView 方法带来SubviewToFront:。还有 exchangeSubviewAtIndex:withSubviewAtIndex: 用于更复杂的重新排序。

# java - 对压缩整数像素应用伽马校正

> ID：14298169
> 
> 赞同：4
> 
> 时间：2013-01-12T21:35:28.957
> 
> 标签：java, image, graphics, rendering, pixels

我正在尝试将 Gamma 校正添加到我的渲染引擎中。我有两个问题：

1） Math.pow 真的很慢（相对于每秒被调用数千次）。所以我需要创建一个预先计算的伽玛表，可以访问而不是动态计算。（这是额外信息，不是实际问题）。

2）目前，我只能通过解包整数像素，通过用相应的伽马修改值替换 RGBA 通道来应用伽马，然后重新打包像素并将其发送回图像缓冲区。性能影响并不*可怕......* 但它正在将稳定的 60fps 固定时间步长降低到大约 40fps 左右（渲染了几张图像）。

我尝试在本机代码中实现整数解包/打包，但没有看到性能改进并导致 VM 崩溃（可能是内存检查错误，但我现在并不关心修复它）。

有没有办法在不拆包/打包像素的情况下应用伽马？如果没有，你会推荐使用什么方法来做到这一点？

注意不要说使用 BufferedImageOp。它很慢，只能对整个图像进行操作（我需要特定像素）。

**附加信息：**

像素包装：

```
public static int[] unpackInt(int argb, int type) {
    int[] vals = null;
    int p1 = 0;
    int p2 = 1;
    int p3 = 2;
    int p4 = 3;
    switch (type) {
    case TYPE_RGB:
        vals = new int[3];
        vals[p1] = argb >> 16 & 0xFF;
        vals[p2] = argb >> 8 & 0xFF;
        vals[p3] = argb & 0xFF;
        break;
    case TYPE_RGBA:
    case TYPE_ARGB:
        vals = new int[4];
        vals[p4] = argb & 0xFF;
        vals[p3] = argb >> 8 & 0xFF;
        vals[p2] = argb >> 16 & 0xFF;
        vals[p1] = argb >> 24 & 0xFF;
        break;
    default:
        throw (new IllegalArgumentException(
                "type must be a valid field defined by ColorUtils class"));
    }
    return vals;
}

public static int packInt(int... rgbs) {

    if (rgbs.length != 3 && rgbs.length != 4) {
        throw (new IllegalArgumentException(
                "args must be valid RGB, ARGB or RGBA value."));
    }
    int color = rgbs[0];
    for (int i = 1; i < rgbs.length; i++) {
        color = (color << 8) + rgbs[i];
    }
    return color;
} 
```

我之前废弃了代码，但我使用这个算法进行伽马校正：

```
protected int correctGamma(int pixel, float gamma) {
    float ginv = 1 / gamma;
    int[] rgbVals = ColorUtils.unpackInt(pixel, ColorUtils.TYPE_ARGB);
    for(int i = 0; i < rgbVals.length; i++) {
        rgbVals[i] = (int) Math.round(255 - Math.pow(rgbVals[i] / 255.0, ginv));
    }
    return ColorUtils.packInt(rgbVals);
} 
```

**解决方案**

我最终将 GargantuChet 提出的许多想法结合到一个似乎运行良好（性能没有下降）的系统中。

一个名为 GammaTable 的类使用 gamma 值修饰符进行实例化（0.0-1.0 更暗，>1.0 更亮）。构造函数调用一个内部方法，该方法为此值构建 gamma 表。此方法也用于稍后重置 gamma：

```
/**
 * Called when a new gamma value is set to rebuild the gamma table.
 */
private synchronized void buildGammaTable() {
    table = new int[TABLE_SIZE];
    float ginv = 1 / gamma;
    double colors = COLORS;
    for(int i=0;i<table.length;i++) {
        table[i] = (int) Math.round(colors * Math.pow(i / colors, ginv)); 
    }
} 
```

为了应用 gamma，GammaTable 获取一个整数像素，将其解包，查找修改后的 gamma 值，并返回重新打包的整数*

```
/**
 * Applies the current gamma table to the given integer pixel.
 * @param color the integer pixel to which gamma will be applied
 * @param type a pixel type defined by ColorUtils
 * @param rgbArr optional pre-instantiated array to use when unpacking.  May be null.
 * @return the modified pixel value
 */
public int applyGamma(int color, int type, int[] rgbArr) {
    int[] argb = (rgbArr != null) ? ColorUtils.unpackInt(rgbArr, color):ColorUtils.unpackInt(color, type);
    for(int i = 0; i < argb.length; i++) {
        int col = argb[i];
        argb[i] = table[col];
    }
    int newColor = ColorUtils.packInt(argb);
    return newColor;
} 
```

为屏幕上的每个像素调用该`applyGamma`方法。

*事实证明，拆包和重新包装像素并没有减慢任何速度。出于某种原因，嵌套调用（即`ColorUtils.packInt(ColorUtils.unpackInt))`导致该方法花费更长的时间。有趣的是，我还不得不停止使用预先实例化的数组，`ColorUtils.unpackInt`因为它似乎会造成巨大的性能损失。允许解包方法创建一个每次调用的新数组似乎不会影响当前上下文中的性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T00:40:57.410

我想知道是否是数学运算导致了开销。每次调用 unpackInt 时，您都会创建一个新数组，JVM 必须分配该数组并将其初始化为零。这可能会导致大量实际上不需要的堆活动。

您可能会考虑一种方法，其中 unpackInt 将目标数组作为参数。作为第一遍，使用示例看起来像

```
int[] rgbVals = new int[4];

protected int correctGamma(int pixel, float gamma) {
    float ginv = 1 / gamma;
    ColorUtils.unpackInt(pixel, ColorUtils.TYPE_ARGB, rgbVals);
    for(int i = 0; i &lt; rgbVals.length; i++) {
        rgbVals[i] = (int) Math.round(255 - Math.pow(rgbVals[i] / 255.0, ginv));
    }
    return ColorUtils.packInt(rgbVals);
} 
```

这将真正减少对象创建开销，因为您只需创建一次新数组，而不是每次调用 unpackInt 一次（通过correctGamma）。唯一需要注意的是，重新打包 int 时不能再使用数组长度。这可以很容易地通过将类型作为参数传递给它来解决，或者通过在 unpackInt 中的 TYPE_RGB 情况下将未使用的元素设置为 0：

```
case TYPE_RGB:
    vals[p1] = 0;
    vals[p2] = argb >> 16 & 0xFF;
    vals[p3] = argb >> 8 & 0xFF;
    vals[p4] = argb & 0xFF; 
```

这也可能是创建一个更专业的伽马校正类的好机会，它封装了所有这些行为：

```
class ScreenContent {

    // ...

    GammaCorrector gammaCorrector = new GammaCorrector();

    // ...

    int[][] image;

    void correctGamma() {
        for (int[] row : image) {
            for (int i = 0; i &lt; row.length; i++) {
                row[i] = gammaCorrector.correct(row[i], gamma);
            }
        }
    }
}

class GammaCorrector {
    private int[] unpacked = new int[4];

    public int correct(int pixel, float gamma) {
        float ginv = 1 / gamma;
        ColorUtils.unpackInt(pixel, ColorUtils.TYPE_ARGB, unpacked);
        for(int i = 0; i &lt; rgbVals.length; i++) {
            rgbVals[i] = (int) Math.round(255 - Math.pow(unpacked[i] / 255.0, ginv));
        }
        return ColorUtils.packInt(unpacked);
    }
} 
```

`struct`您可以通过创建一个类似的类来保存解压缩的值，从而消除数组和循环。最里面的`for()`循环每秒执行数十万次，但每次执行循环时，它只运行几次迭代。现代 CPU[应该可以很好地处理这种情况](http://software.intel.com/en-us/articles/branch-and-loop-reorganization-to-prevent-mispredicts)，但仍然值得尝试。

您还可以使用有界线程池来并行成像行。每个 CPU 核心限制一个线程可能是有意义的。图形硬件设计侧重于每个像素的操作通常相似但独立的事实，并且它们具有大量并行性以实现良好的性能。

还可以考虑[使用 JVM 的调试版本](http://weblogs.java.net/blog/kohsuke/archive/2008/03/deep_dive_into.html)来查看生成的指令以获得更好的洞察力。理想情况下，您会尽可能少地修改代码，只在 JVM 错过优化机会的地方进行更改。

如果您最终使用本机代码，您可能会考虑在适当的情况下使用一些 SSE 指令。我相信有些操作适用于打包整数，基本上对打包整数中的每个字节应用相同的操作，而无需解包、计算和重新打包。这可以节省大量时间，但可能会改变您计算 gamma 的方式。好处是它很快——单个 SSE 寄存器可以让您在单个指令中操作 16 个字节，这种并行性值得努力利用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:36:50.283

另一种方法是使用 OpenGL。（我认为 LWJGL 会在 Java 中允许它。）您可以上传包含直接到伽马校正表的一维纹理，然后编写一个 glsl 着色器，将伽马表应用于您的像素。不确定这是否适合您当前的处理模型，但我一直使用它实时处理 1920x1080 HD RGBA 帧。

# java - 使用通配符将对象添加到超类型列表中

> ID：14298177
> 
> 赞同：0
> 
> 时间：2013-01-12T21:36:32.320
> 
> 标签：java, generics, wildcard, subtype

> **可能重复：**
> [了解 Java 泛型中的通配符](https://stackoverflow.com/questions/8481052/understanding-wildcards-in-java-generics)

我有一个由雪佛兰扩展的汽车类。然后你可以看到很正常的一段代码：

`List<? extends Chevrolet> extededChevrolets = new ArrayList<>();
List<? extends Car> extendedCars = extededChevrolets;`

现在为什么我不能执行如下操作：

`extendedCars.add(new Chevrolet());`

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-12T21:39:06.170

可能是因为您在列出列表时拼错了extendedChevrolets！您拼写的是extededChevrolets，而不是extededChevrolets！希望这可以帮助！

# java - 从 jar 创建可执行文件

> ID：14298180
> 
> 赞同：0
> 
> 时间：2013-01-12T21:37:14.407
> 
> 标签：java, exe, executable-jar

我在java中创建了jar文件。它使用一些库文件。所以，我的最终结构是，

*   例子.jar
*   库
    *   库文件

如何将它们转换为单个文件，例如 Windows 的 exe？它也应该在 linux 中运行，例如（.sh 文件 - NetBeans 安装程序）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:41:00.723

只需制作一个包含所有库依赖项的 JAR。

1.  如果 Maven 是您的构建工具，请检查[这个 SO question](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)。其他工具（Gradle 等）也有类似的解决方案。

2.  一些 IDE 也可以做到这一点，例如[Netbeans](http://www.lampos.net/netbeans)和[IntelliJ IDEA](http://blogs.jetbrains.com/idea/2010/08/quickly-create-jar-artifact/)。

当然，请确保您要打包的库具有允许此操作的许可证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T21:53:31.530

如果您使用 Netbeans，请检查[此项](http://www.oracle.com/technetwork/articles/javase/single-jar-141905.html)以将所有 jar 合并为一个，现在当您有 1 个 jar 时，您可以使用[launch4j](http://launch4j.sourceforge.net/)创建 exe 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T21:42:40.327

尽管这是可能的，但它违反了 Java 的本质。

Java 被设计为一种可移植语言（一次编写，随处运行）；您的 .jar 文件包含 Java 字节码，该字节码将由 Java 虚拟机在运行时进行解释；你可以将它复制到任何架构中，它会在那里运行。

.exe 文件实际上包含由处理器直接运行的机器代码特定语言；这不适用于其他架构。

但是，有不同的工具可以满足您的需求，例如[JarToExe](http://www.brothersoft.com/jartoexe-75019.html)或[JSmooth](http://jsmooth.sourceforge.net/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T21:45:39.597

你有几个选择：

*   使用 gcj 之类的东西编译到本机应用程序。但在很多情况下，这不是一个选择（如果你研究一下，你会明白为什么）

*   有一个修改后的`java`可执行文件来运行你的 jar

*   有一个可以用 java 运行你的 jar 的可执行文件

如果您可以合理地假设您的客户端安装了 java，那么只需部署一个可执行 jar 就可以了 - 在大多数桌面操作系统上，java 分发设置为以预期的方式运行可执行 jar（即通过在 Windows 中双击)，以及在那些不是的地方——好吧，人们可能会知道什么是 java 以及如何运行 jars。

# android - 安卓应用历史

> ID：14298182
> 
> 赞同：1
> 
> 时间：2013-01-12T21:37:40.943
> 
> 标签：android

有没有办法检查用户在过去 24 小时内使用了哪些应用程序？换句话说，是否有某种可以通过编程访问的“应用程序历史日志”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:40:33.970

你可以用[`RecentTaskInfo`](http://developer.android.com/reference/android/app/ActivityManager.RecentTaskInfo.html). 文档：

> 您可以检索有关用户最近开始或访问的任务的信息。

# php - 添加变量的 PHP 数组

> ID：14298187
> 
> 赞同：1
> 
> 时间：2013-01-12T21:38:28.150
> 
> 标签：php, arrays

我的代码有什么问题？

> [警告：在第 12 行为 foreach() 提供的参数无效）](http://codepad.org/NtGfwePv)

```
<?php

$id = array("price" => "10");

$id['price'][1] = $id['price'];
$id['price'][3] = ($id['price'] * 3 * 0.97);
$id['price'][6] = ($id['price'] * 6 * 0.95);

$id['price'][3] = round($id['price'][3],2);
$id['price'][6] = round($id['price'][6],2);

foreach($id['price'] as $money) {
  echo '<option value="'.$money.'">.'.$money.'$</option>'."\n";
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:43:41.510

您收到此错误是因为`$id['price']`它是一个字符串（如您定义的那样），而不是一个数组。

在 PHP 中，您可以像访问数组索引一样访问字符串索引，因此您可以使用`$id['price'][x]`分配设置字符串的各个字符，然后尝试在`foreach`.

如果你`var_dump( $id['price']);`在循环之前做了一个，你会看到：

```
string(7) "11 3  6" 
```

如果你想要一个数组，并让每个赋值在数组中创建一个不同的元素，初始化`$id['price']`为一个数组，并适当地添加元素：

```
$id = array("price" => array( "10"));

$id['price'][1] = $id['price'][0];
$id['price'][3] = ($id['price'][0] * 3 * 0.97);
$id['price'][6] = ($id['price'][0] * 6 * 0.95);

$id['price'][3] = round($id['price'][3],2);
$id['price'][6] = round($id['price'][6],2); 
```

# c# - 很多 catch 块，但它们都具有相同的功能

> ID：14298193
> 
> 赞同：6
> 
> 时间：2013-01-12T21:39:34.093
> 
> 标签：c#, .net, exception, try-catch

如果我有这样的事情怎么办：

```
try
{
   //work
}
catch (ArgumentNullException e)
{
   HandleNullException();
   Logger.log("ArgumentNullException " + e);
   DoSomething();
}
catch (SomeOtherException e)
{
   HandleSomeOtherException();
   Logger.log("SomeOtherException " + e);
   DoSomething();
}
catch (Exception e)
{
   HandleException();
   Logger.log("Exception " + e);
   DoSomething();
} 
```

现在我们可以看到，我正在尝试处理一些不同情况的异常。但是每当引发异常时，我总是`DoSomething()`在最后调用该方法。`DoSomething()`如果出现异常，是否有更智能的调用方式？如果我添加一个`finally`块并`DoSomething()`在那里调用，它总是会被调用，即使没有例外。有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T21:43:05.197

> *如果我添加一个`finally`块并`DoSomething()`在那里调用，它总是会被调用，即使没有例外。*

您要查找的内容在[CLI 标准](http://www.ecma-international.org/publications/standards/Ecma-335.htm)（分区 IIA，第 18 章）中称为[故障处理程序](https://stackoverflow.com/questions/11987953/how-are-cil-fault-clauses-different-from-catch-clauses-in-c)。尽管 .NET 实现了它们，但 C# 语言并不直接支持它们。但是，可以模拟它们：

```
bool success = false;
try
{
    …
    success = true;
}
catch (…)
{
    …
}
…
finally
{
    if (!success)
    {
        DoSomething();
    }
} 
```

`catch`请注意，正如这里的一些答案所建议的那样，不需要在每个处理程序中设置标志。简单地否定测试，你只需要在块的末尾设置一次标志`try`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T21:47:51.393

您可以使用以下代码，它实际上*确实*删除了冗余。

```
try
{
    //work
}
catch (Exception e)
{
    Handle(e);
} 
```

方法在哪里`Handle`：

```
static void Handle(Exception e)
{
    var exceptionType = e.GetType();
    //Use an if/else block, or use a Dictionary<Type, Action>
    //to operate on your exception
    Logger.log(exceptionType + " " + e);
    DoSomething();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T21:41:42.043

你现在正在做的事情已经做得很好了。

如果您需要在发生异常时调用此函数，而不是其他情况，并且您必须使用不同的代码来处理不同的异常，那么这是可以做到的最好的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-12T21:42:47.383

您可以在抛出异常时设置布尔值，使用`finally`并检查布尔值。（或者相反，只在没有抛出异常时才设置布尔值，如下图：）

```
bool noException = false;
try
{
    //work
    noException = true;
}
catch (ArgumentNullException e)
{
    HandleNullException();
    Logger.log("ArgumentNullException " + e);
}
catch (SomeOtherException e)
{
    HandleSomeOtherException();
    Logger.log("SomeOtherException " + e);
}
catch (Exception e)
{
    HandleException();
    Logger.log("Exception " + e);
}
finally
{
    if (!noException)
        DoSomething();
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-12T22:32:51.653

为什么不只是：

```
try
{
    //work
}
catch (Exception e)
{
    if (e is ArgumentNullException)
      HandleNullException();
    else if (e is SomeOtherException)
      HandleSomeOtherException();
    else
      HandleException();
    Logger.log(e.GetType().Name + " " + e);
    DoSomething();
} 
```

记录的类型名称将是实际的运行时类型，因此例如`"IndexOutOfRangeException"`可能会记录而不是仅`"Exception"`当您处于情况三时，但我认为这是对您现在所拥有的内容的改进。

**编辑：**上面的代码看起来很糟糕`if`-<code>else if 逻辑检查类型。如果我们引入多态，它可能会更漂亮：

```
try
{
    //work
}
catch (HandleableException e)
{
    e.Handle();  // this calls a **virtual** method, each override does what's relevant
    Logger.log(e.GetType().Name + " " + e);
    DoSomething();
} 
```

当然，如果`Exception`我们不能修改一些有问题的类，就不可能给它们一个`Handle()`方法。`.Handle()`也可以是扩展方法（而不是实例`virtual`方法），但是类型检查（丑陋的代码）必须在该方法内完成。然后这变得与夏娃的答案非常相似。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-12T21:43:02.243

你可以这样做：

```
Exception caughtException = null;
try {
    ...
} catch(ExceptionType1 e1) {
    ...
    caughtException = e1;
} catch(ExceptionType2 e2) {
    ...
    caughtException = e2;
} catch(ExceptionType3 e3) {
    ...
    caughtException = e3;
}
if (caughtException != null) {
    // Put your common exception code here
    DoSomenthing();
    // You can pass caughtException to functions, too
    LogException(caughtException);
} 
```

`caughtException``null`除非捕获到异常，否则将是。您可以使用它来决定是否打电话`DoSomenthing`。

# linux-kernel - 可交换 zram [破解 Linux 内核]

> ID：14298197
> 
> 赞同：2
> 
> 时间：2013-01-12T21:39:41.223
> 
> 标签：linux-kernel

在 GNU/Linux 上，我想在 RAM 磁盘中处理一些可压缩的数据（比如 Linux 内核源代码）。估计的最大数据量将比 RAM 大 2...3 倍，但如果压缩后预计会很好地适应。理想情况下，我想使用像“tmpfs”这样不合适的东西，因为当太多数据引发广泛交换时，它会导致死锁。“zram”是一个几乎理想的解决方案，但它不可交换，因此可以确定过多的 RAM。我想知道如何修补 Linux 内核以使 zram 可交换，类似于 tmpfs？

可以通过修改“drivers/staging/zram/z​​ram_drv.c”中的 GFP 标志来完成吗？

例如，我（相当天真地）认为可以修改以下行以达到理想的效果：

```
 zram->mem_pool = zs_create_pool("zram", GFP_NOIO | __GFP_HIGHMEM); 
```

请问有什么想法吗？

# curl - 在 wampserver 中为社交引擎使用 curl

> ID：14298201
> 
> 赞同：0
> 
> 时间：2013-01-12T21:40:37.120
> 
> 标签：curl, wamp, wampserver, socialengine

我想在 wampserver 中安装社交引擎，但出现“需要卷曲扩展”的消息。我必须做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:33:00.717

默认情况下，Wamp Server 中的 PHP 是通过 curl 扩展分发的。您只需执行以下步骤即可打开此扩展程序：

1.  单击通知区域中的**Wamp 服务器**图标
2.  悬停**PHP**菜单 > 悬停**PHP 扩展**菜单
3.  确保**检查****php_curl**行

 **但是，如果您使用带有 Wamp 64bit 的 PHP 5.3.13 或 5.4.3，curl 库可能会损坏，请访问此页面[http://www.anindya.com/php-5-4-3-and-php-5 -3-13-x64-64-bit-for-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)并为您下载正确的软件包，然后获取 dll 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:56:38.320

尝试安装[curl](http://curl.haxx.se/download.html)并正确设置环境变量。**

# eclipse - 如何使用 Eclipse 最好地管理常用的 Java 库？

> ID：14298202
> 
> 赞同：0
> 
> 时间：2013-01-12T21:40:38.947
> 
> 标签：eclipse

我在创建的每个项目中都使用了一些 java 库，并且非常希望它们能够自动添加或将它们放在某种全局库中。这可能使用 Eclipse 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:06:26.833

首选项中有一个名为 User Libraries 的部分，可让您创建 JAR 文件的集合，这些文件可以轻松添加到任何项目的 Build Path > Libraries 部分。如果您尝试包含的 Java 库是公共的，那么从长远来看，设置 Maven 或 Ivy 来管理您的依赖项可能是更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:19:47.960

您可能需要考虑一个像 maven 这样的构建工具，它与 eclipse 完美集成，并为您完成所有依赖项管理。这样，您只是在复制一些 xml，当您的一个项目突然需要不同的版本时，它不会破坏所有其他项目。

[http://maven.apache.org/eclipse-plugin.html](http://maven.apache.org/eclipse-plugin.html)

# php - 尝试使用基于 SQL Query 的 PHP 动态写表

> ID：14298203
> 
> 赞同：0
> 
> 时间：2013-01-12T21:40:41.693
> 
> 标签：php, ajax, for-loop, append, preg-split

前两天开始学习PHP，并开始使用AJAX制作SQL数据库管理网页。如果我将搜索限制为少于所有 [*] 列，我会遇到错误问题。

因此，我认为在通过 AJAX 发送的字符串上使用正则表达式并将所需的表动态写回网页会相对容易。

我在理解如何根据 preg_split() 返回的数组执行循环、附加到新字符串然后将新字符串回显为新表时遇到问题，我可以将 sql 表写入该表。

## 这是我无法弄清楚的一点

```
$newString = 'this and ';

for ($i=0; $i < $arrayLength; $i++) { 
    $newString += $repArray[$i];
}

echo $newString; 
```

代码中的正则表达式只是获取“SELECT”和“FROM”语句之间的文本，删除空格并将单词拆分成一个数组。并且有各种回声来显示正在发生的事情。

谢谢你的帮助

问候，

安德鲁

## 这是我用于测试这个想法的完整 php 代码

```
<?php
$string = 'SELECT ID, username, password, firstName, IP FROM users WHERE ID > 100';
$pattern = '/SELECT (.*) FROM (.*)/i';
$replacement = '$1';
$replaced = preg_replace($pattern, $replacement, $string);

echo '<br> ' . $replaced;

$replaced2 = preg_replace('/\s/' , '', $replaced);

echo '<br> ' . $replaced2;

$repArray = preg_split('/,/', $replaced2, -1, PREG_SPLIT_NO_EMPTY);
echo '<br> ';
print_r($repArray);

$arrayLength = count($repArray);

echo '<br> Array length = ' . $arrayLength;

$newString = 'this and ';

for ($i=0; $i < $arrayLength; $i++) { 
    $newString += $repArray[$i];
}

echo $newString;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:53:04.897

根据[preg_split](http://php.net/manual/en/function.preg-split.php)的 php 文档，结果数组中的元素将是数组，第一项是您想要的字符串。这是 preg_split 的结果：

```
Array
(
[0] => Array
    (
        [0] => ID
        [1] => 0
    )

[1] => Array
    (
        [0] => username
        [1] => 4
    )

[2] => Array
    (
        [0] => password
        [1] => 15
    )

[3] => Array
    (
        [0] => firstname
        [1] => 25
    )

[4] => Array
    (
        [0] => IP
        [1] => 36
    )
) 
```

然后你可以只获取数组的数组中的第一个元素。

```
for ($i=0; $i < $arrayLength; $i++) { 
    $newString .= $repArray[$i][0];
} 
```

# java - 如果或如何工作？

> ID：14298204
> 
> 赞同：0
> 
> 时间：2013-01-12T21:40:57.833
> 
> 标签：java, android, if-statement

android 编程中的 if 语句如何与 or ( `||`) 一起使用？

我的代码如下所示：

```
if (!phone.equals("Note II") || !phone.equals("S3")) 
```

现在，只有在 Note II 和 S3 不执行的情况下才会执行的代码无论如何都会执行。只有当我有一个声明并在网上搜索它说我应该能够拥有或者但我不知道如何......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T21:42:49.413

**如前所述，如果手机不是 Note II或**不是 S3 ，则您的条件为真。由于手机不能同时是 Note II 和 S3，因此条件始终为真！

您可能的意思是，如果手机不是 Note II**而**不是 S3，则条件为真。

```
if (!phone.equals("Note II") && !phone.equals("S3")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:52:43.070

黄昏回答了你的基本问题。您可能想要**and**，而不是**or**。*如果不是注释 II* ，您的代码会被执行的原因是双杠`||`OR 运算符仅计算第一个表达式（如果结果为真）。在运行时，通常没有理由检查第二个表达式。

# c# - 对象不能迁移到的对象引用

> ID：14298206
> 
> 赞同：0
> 
> 时间：2013-01-12T21:41:02.383
> 
> 标签：c#, reference

在 c# 中，我想知道是否有任何方法可以让引用不允许其引用迁移到引用。这是一些**FAKE** c# 代码来说明我的意思：

```
class foo  {}

class bar
{
    public locked foo Foo; //of course locked doesn't actually exist
}

void main()
{
    foo myFoo = new foo();
    bar myBar == new bar();
    myBar.Foo = myFoo;

    myFoo = null

    if (myBar.Foo == null)
    {
        println("foo = null");
    }
}

//will print "foo = null" 
```

显然这不会编译，当你删除 foo 时它只会迁移到 myBar.Foo，这是我不希望发生的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:29:45.957

```
myBar.Foo = myFoo;

myFoo = null 
```

做`myFoo = null`不会使`myBar.Foo`无效。它仍将引用旧对象。

字段可以`ref`在 chsarp 中，并且无法绕过这一点。可以在这里找到更好的解释 -[如何通过“引用”分配给 c# 中的类字段？](https://stackoverflow.com/questions/2980463/how-do-i-assign-by-reference-to-a-class-field-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:43:02.190

您似乎想要的东西是不可能的，至少直接是不可能的。我将在这里向其他读者描述我认为您想要什么，因为“迁移”一词是非标准且令人困惑的。

让我们描述一下`myBar.Foo = myFoo`正在做什么。就是说调用的存储位置`Foo`指向`myBar`的是当前在本地占用存储位置的对象`myFoo`。您似乎想要的是`myBar.Foo`充当存储位置的别名（即另一个名称）`myFoo`。

[Eric Lippert 对此处](https://stackoverflow.com/a/2982037/517852)发布的类似问题有一个很好的回答，该问题描述了为什么不允许这样做以及该怎么做。他描述了有时被称为“镜头”的东西，一种将 getter 和 setter 方法捕获到单个对象中并传递对该对象的引用的构造。

# php - 从数据库和专用文件夹中删除用户

> ID：14298213
> 
> 赞同：-1
> 
> 时间：2013-01-12T21:41:50.623
> 
> 标签：php, mysql

我是 php 的初学者，并创建了一个代码，其中显示了一个包含与我的用户有关的数据的表格，该表格位于我的数据库中。这是我使用的代码。 **姓名** **姓** **出生日期** **城镇 出生** **代码** **地址** **电子邮件** ";

```
while($row=mysql_fetch_array($result))

{echo"<tr>";
echo"<td>" . $row['Name'] . "</td>";
echo"<td>" . $row['Surname'] . "</td>";
echo"<td>" . $row['DateofBirth'] . "</td>";
echo"<td>" . $row['TownofBirth'] . "</td>";
echo"<td>" . $row['Code'] . "</td>";
echo"<td>" . $row['Address'] . "</td>";
echo"<td>" . $row['Email'] . "</td>";
echo'<td><a href="delete.php?id='.$row['Code'].'">Delete</a></td>';
echo"</tr>";
}
echo"</table>";
?> 
```

我还创建了一个 delete.php 文件，该文件允许通过单击“删除”链接从数据库中删除用户，但我还希望此代码删除一个以用户用户名命名的文件夹，该文件夹位于当前工作目录。这是我写的代码：

```
<?php
$con=mysql_connect("localhost","root","mypassword");
mysql_select_db("mydb",$con);
function deletedir($dirname){
    if(file_exists($dirname) && is_file($dirname)) {
        unlink($dirname);
    } elseif(is_dir($dirname)) {
        $handle=opendir($dirname);
        while(false!==($file=readdir($handle))){
            if(is_file($dirname.$file)){
                unlink($dirname.$file);
            }
        }
        $handle=closedir($handle);
        rmdir($dirname);
    }
}

if (isset($_GET['id'])) {
    $id=$_GET['id'];
    $sql=mysql_query("SELECT Username FROM Users WHERE Code='$id'");
    while($row=mysql_fetch_array($sql)) {
        $username=$row['Username'];
        deletedir($username);
    }

    $result=mysql_query("DELETE FROM Users WHERE Code='$id'") or die(mysql_error());
    header("location: index.php");
} else {
    header("location: index.php");
}

?> 
```

此代码从数据库中删除用户，但不会删除名为 $username 的文件夹。请帮助我了解错误在哪里。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:24:52.117

我认为这是你的问题：

`unlink`如果删除脚本与`rmdir`您要删除的目录不在同一目录中，则需要删除文件/目录的完整路径。

尝试在您的 deletedir 函数的顶部添加类似的内容：

```
$dir = "/opt/www/userdirs"
$dirname = $dir . '/' . $dirname; 
```

将“/opt/www/userdirs”更改为要删除的目录所在的目录。

而且我认为您还需要更改所有这些：

```
$dirname.$file 
```

到：

```
$dirname . '/' . $file 
```

# python - 方法重载python

> ID：14298214
> 
> 赞同：0
> 
> 时间：2013-01-12T21:41:53.233
> 
> 标签：python, operator-overloading

这类似于方法重载。当`print Hello(1, 2, 3)`被执行时它返回`"a and b"`，而我希望它返回`"a and b and c"`。我知道我本可以`if (a and b and c is None)`说它会起作用的。但是，如果我有 20 个参数并且我必须处理每种情况，那将只是多个`if`我认为没有必要的语句。有没有更好的方法我应该做这样的问题？

```
 def Hello(a=None, b=None, c=None):
    if(a and b):
        return "a and b"
    if(a and c):
       return "a and c"
    if(a and b and c):
       return "a and b and c"

print Hello(1, 2, 3) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:43:01.000

您需要重新排序`if`语句：

```
 def Hello(a=None, b=None, c=None):
    if a and b and c:
       return "a and b and c"
    if a and b:
        return "a and b"
    if a and c:
       return "a and c" 
```

当`a and b and c`评估为 true 时，`a and b`也评估为 true，因此在您的代码中，这种情况由 first 处理`if`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T22:00:23.107

你需要重新考虑你的程序逻辑，真的。通常，API*不会*有所有可选参数，您需要从所有输入构建大型决策树。

换句话说，在实际程序中，您通常不会遇到每个不同输入组合的行为完全不同的函数。即使对于大量的可选参数，合法的组合也总是小得多。

对于您的玩具示例，您可以想出其他方法来创建不涉及决策树的返回值：

*   地图回复：

    ```
    responsemap = {
        (True,  True,  False): "a and b",
        (True,  False, True):  "a and c",
        (True,  True,  True):  "a and b and c"
    }

    def Hello(a=None, b=None, c=None):
        return responsemap.get((bool(a), bool(b), bool(c)), None) 
    ```

*   根据输入构建一个字符串：

    ```
    def Hello(a=None, b=None, c=None):
        return ' and '.join([n for n in ('a', 'b', 'c') if locals()[n]]) 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-02T14:46:28.417

python 不支持方法重载。我们可以重载方法但只能使用最新定义的方法

```
def product(a, b):
    return a*b

def product(a,b,c):
    return a*b*c 
```

如果你打电话`product(10, 20)`会报错

# node.js - 安装 puppetlabs-nodejs 模块导致 SSL 证书错误

> ID：14298215
> 
> 赞同：0
> 
> 时间：2013-01-12T21:42:06.297
> 
> 标签：node.js, puppet

当我尝试在 Ubuntu 12.04 上安装 puppetlabs-nodejs 模块时，它返回 SSL 错误。这是命令：

`puppet module install puppetlabs-nodejs --version 0.2.1`

错误：

> 错误：无法通过 HTTPS 连接到[https://forge.puppetlabs.com](https://forge.puppetlabs.com)
> 无法验证 SSL 证书 证书可能没有由有效的 CA 签名 OpenSSL 包含的 CA 包可能无效或不是最新的

关于可能导致这种情况的任何想法？谷歌搜索没有提供太多有用的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:35:38.920

Puppet 的 SSL 证书一定存在临时问题。我现在可以安装模块了。

# variables - 将更改的目录名称放入变量中

> ID：14298216
> 
> 赞同：0
> 
> 时间：2013-01-12T21:42:18.433
> 
> 标签：variables, batch-file, directory, copy

这是我的情况。我需要将所有文件从某个目录（每天都会发生变化）移动到一个静态不变的目录中。如何创建一个脚本来获取该新目录名称，将其放入变量中，然后使用该目录变量将文件移动到静态目录？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:13:49.043

```
@echo off
move "%~1\*.*" "\Static\Dir" /Y 
```

将更改目录的名称作为批处理文件的参数；如果名称可能包含空格，请将其括在引号中：

```
test.bat "The dir of today" 
```

# c# - 访问关系中的数据

> ID：14298219
> 
> 赞同：-1
> 
> 时间：2013-01-12T21:42:28.213
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4

我有两个实体之间的一对多关系，Fight 和 FightCard（一场战斗属于一张战斗卡，一张战斗卡可以有很多次战斗）。战斗实体与名为 Fighters 的实体具有多对多关系。我想做的是在 FightCard 视图中显示 Fight 实体的详细信息（这很简单，我可以这样做），但我还要显示与 Fight 实体具有一对多关系的 Fighters 的详细信息。

如何才能做到这一点？我希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T23:10:26.373

您没有在代码中包含太多内容，所以这里有一个基本示例，概述了您正在尝试做的事情。

所以，假设你有一些这样的实体类：

```
public class FightCard
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Fight> Fights { get; set; }
}

public class Fight
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public FightCard FightCard { get; set; }
    public virtual ICollection<Fighter> Fighters { get; set; }
}

public class Fighter
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Fight> Fights { get; set; }
} 
```

有一个像这样的控制器有一个`Details`动作：

```
public class FightCardsController : Controller
{
    private MyContext context = new MyContext();

    public ActionResult Details(int id)
    {
        FightCard fightCard = context.FightCards.Find(id);
        if (fightCard == null)
        {
            return this.HttpNotFound();
        }

        return this.View(fightCard);
    }
} 
```

然后，您可以制作`FightCards\Details.cshtml`如下视图：

```
@model MyProject.Models.FightCard

<h1>Fight Card: @Model.Name</h1>

<ul>
@foreach (var fight in Model.Fights)
{
    <li>
        Fight: @fight.Name

        <ul>
        @foreach (var fighter in fight.Fighters)
        {
            <li>Fighter: @fighter.Name</li>
        }
        </ul>
    </li>
}
</ul> 
```

# asp.net-mvc-4 - 使用 ASP.NET MVC4 EF Code-First 将文件上传到数据库？

> ID：14298230
> 
> 赞同：0
> 
> 时间：2013-01-12T21:43:26.270
> 
> 标签：asp.net-mvc-4

**我需要使用 ASP.NET MVC4 EF Code-First 将文件上传到数据库，请问有什么帮助吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:01:52.227

[http://www.codeproject.com/Articles/225446/Uploading-and-downloading-files-to-from-a-SQL-Serv](http://www.codeproject.com/Articles/225446/Uploading-and-downloading-files-to-from-a-SQL-Serv)

Use Google :)

I don't know if you're using razor or aspx, but you should be able to translate it if needed ;)

EDIT: Just realized, it doesn't matter :P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T11:37:39.547

我从您的问题中了解到，您不能在实体模型中使用 HttpPostedFileBase，因为数据库中没有映射。

如果要使用 HttpPostedFileBase，请创建一个 ViewModel。

# android - ORMLite - 如何处理连接的结果

> ID：14298231
> 
> 赞同：5
> 
> 时间：2013-01-12T21:43:27.167
> 
> 标签：android, ormlite

我有表 A、B、C、D、E，我正在对它们进行内部连接。
我只需要结果中的部分数据。例如，我需要`A.name`列，`D.phoneNumber`列。

我正在使用方法`join()`。

我应该如何处理结果？我应该通过所有课程来获取我需要的所有数据吗？如果是，那么有什么简单的方法可以做到这一点，因为完成所有这些似乎有点复杂。

我应该为结果创建一个类并以某种方式将结果映射到它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T16:54:04.097

根据 ORMlite 文档，您只能对通过外部对象字段连接的表使用 join 语句。

所以我看到的第一种方法是使用外部对象并检索您需要的所有值。例如，如果您查询表 A 和 B

```
QueryBuilder<A, Integer> aqb = aDao.queryBuilder();
QueryBuilder<B, Integer> bqb = bDao.queryBuilder();
List<A> results = aqb.join(bqb).query();

for (A a : results){
    String name = a.getName();
    String phone = a.getB().getPhone();
} 
```

而 A 和 B 类看起来像这样：

```
....
public class A{
....
    @DatabaseField
    private String name;

    @DatabaseField(foreign = true, foreignAutoRefresh = true)
    private B b;
....        
    public B getB(){
        return b;
    }
....
    public String getName(){
        return name;
    }
}

....
public class B{
....
    @DatabaseField
    private String phone;

    public String getPhone(){
        return phone;
    }
} 
```

我不确定这段代码是否会起作用，我只是想描述一下这个想法。

据我所知，您不能一次查询多个表。

请参阅[相关的 ORMLite 文档](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_3.html#SEC39)。从库的 4.42 版本开始支持 Join 语句。

# c# - 更新sql查询

> ID：14298236
> 
> 赞同：0
> 
> 时间：2013-01-12T21:44:49.213
> 
> 标签：c#, sql, sql-update

嗨，我试图将 Windows 中的点从数据库更新到数据库，但我不确定如何从变量“totalPoints”获取信息，并将其插入数据库的“点”字段中

```
using (OleDbConnection conn = new OleDbConnection(strCon))
        {
            String sqlPoints = "UPDATE points FROM customer WHERE [customerID]="
            + txtCustomerID.Text;
            conn.Open();

            conn.Close();
        } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:33:54.147

首先，您应该使用参数化查询——这很容易受到 SQL 注入的影响。

看看这里：[参数化查询如何帮助防止 SQL 注入？](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)

要回答您的问题，您需要研究`OleDbCommand`和`ExecuteNonQuery`：

```
public void InsertRow(string connectionString, string insertSQL)
{
    using (OleDbConnection connection = new OleDbConnection(connectionString))
    {
        // The insertSQL string contains a SQL statement that
        // inserts a new row in the source table.
        OleDbCommand command = new OleDbCommand(insertSQL);

        // Set the Connection to the new OleDbConnection.
        command.Connection = connection;

        // Open the connection and execute the insert command.
        try
        {
            connection.Open();
            command.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
        // The connection is automatically closed when the
        // code exits the using block.
    }
} 
```

[http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection(v=vs.100).aspx)

此外，您可能需要重新查看您的 SQL - 不确定您要完成什么。如果您使用的是 SQL Server，则语法应类似于`UPDATE TABLE SET FIELD = VALUE WHERE FIELD = VALUE`.

祝你好运。

# c# - 正则表达式在带有新行的标签之间获取值

> ID：14298237
> 
> 赞同：-1
> 
> 时间：2013-01-12T21:44:56.637
> 
> 标签：c#, html, regex

有人可以帮我处理正则表达式。我完全卡住了

我有一个 HTML 代码：

```
<td width="50%"><span class="draw_info">Draw No: 2813<br />
Thursday&nbsp;10 Jan 13<br />
    <br /> 
```

我需要检索这一行：`Thursday&nbsp;10 Jan 13`

如果这对您有任何帮助，我正在使用**C#**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:44:25.653

我假设您尝试提取的部分不仅仅是*HTML代码。*鉴于您发布的文章，我会尝试为您提供一些正则*表达式*帮助。

我将首先规范化空白并删除空白标签，如下所示：

```
var normalizedText = Regex.Replace(text, @"<br\s*/?>|\r|\n|&nbsp;", " "); 
```

然后我会使用一个专门的正则*表达式*来找到`<span>`你想要的正确标签（*绘制信息*）：

```
var spanRegex = new Regex(@"<span class=""draw_info"">\s*Draw No:\s*(?<DrawNumber>[0-9]*)\s*(?<Timestamp>.*)\s*(</span>)?"); 
```

*这会将您想要的抽奖编号*和*日期*值提取到两个单独的捕获组中。然后，您可以单独访问它们：

```
var match = spanRegex.Match(normalizedText);

// TODO: Handle !match.Success for parsing errors here.

var drawNumberString = match.Groups["DrawNumber"].Value.Trim();
var timestampString = match.Groups["Timestamp"].Value.Trim();

int drawNumber;
DateTime timestamp;

if(!int.TryParse(drawNumberString, out drawNumber))
{
  // TODO: Handle draw number parsing errors here.
}

if(!DateTime.TryParse(timestampString, out timestamp))
{
  // TODO: Handle timestamp parsing errors here.
} 
```

# java - 简单的框架 xml 反序列化 - 查找属性的存在

> ID：14298242
> 
> 赞同：0
> 
> 时间：2013-01-12T21:45:19.810
> 
> 标签：java, xml-deserialization, simple-framework

[是否可以在 java 的Simple](http://simple.sourceforge.net/)框架中查找指定属性的存在？假设我有以下 xml：

```
<packet id="250">
  <msg id="1" uniqueAttribute1="some value" x="7" />
  <msg id="2" someStuff="123" />
  <msg id="3" someOtherStuff="abc" />
</packet> 
```

上面所有的 msgs 都应该被反序列化为不同类的对象，可能是从一个公共基类继承的。哪个 msg 应该实例化哪个类的对象应该取决于属性的名称。这意味着如果在 msg 中存在名为“uniqueAttribute”的属性，则应创建 Foo 类的对象，如果存在“someStuff”类 Bar 的对象，依此类推。

我想到的唯一方法是尝试反序列化为类的对象并捕获异常并重试听起来很糟糕。

如果“简单”框架无法实现，也许您可​​以建议其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:06:34.633

我没有看到需要具有如此基本要求的框架，但是我可能无法完全理解您的需求。我最初会从像 SAX 解析处理程序这样简单的东西开始。完全手工编码和未经测试，但基本的想法见这里：

```
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

class XmlHandler extends DefaultHandler {
    Map msgClasses = new HashMap(){{ put("uniqueAttribute1", "Foo"); put("someStuff", "Bar"); }};

    public MessageBase messageFromAttributes(final org.xml.sax.Attributes attributes) {
        for(int i=0; i<attributes.getLength(); i++) {
            if(msgClasses.contains(attributes.getValue(i))) {
                try{
                    Class msgClass = Class.forName(attributes.getValue(i));
                    return msgClass.newInstance();
                } catch(ClassNotFoundException e) {
                    return null;
                }
            }
        }
    }

    @Override
    public final void startElement(String uri, String localName, String name,
            final org.xml.sax.Attributes attributes) throws SAXException {
        if (localName.equals("msg")) {
            MessageBase message = messageFromAttributes(attributes);
        }
    }

    @Override
    public final void endElement(String uri, String localName, String name) throws SAXException {

        if (localName.equals("msg")) {
        }
    }

} 
```

我上面示例的想法是将类名映射到特定属性，然后在处理 SAX 解析事件时实例化查找映射中应该指向正确类名的任何给定属性。此时，您可以使用反射实例化该类并继续。如有必要，您可以选择使用剩余的属性值填充类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:03:32.727

有很多方法可以做到这一点。通常可以使用访问者或策略。有关如何使用访客的信息，请参阅以下内容。这使用命名空间来确定类型，但您可以将其更改为使用一个属性或多个属性。

[https://simple.svn.sourceforge.net/svnroot/simple/trunk/download/stream/src/test/java/org/simpleframework/xml/strategy/ClassToNamespaceVisitor.java](https://simple.svn.sourceforge.net/svnroot/simple/trunk/download/stream/src/test/java/org/simpleframework/xml/strategy/ClassToNamespaceVisitor.java)

此外，您可以使用转换器来执行此操作。看看教程。

# sql-server - 使用 TSQL 从递归 CTE 查询中复制数据

> ID：14298245
> 
> 赞同：-1
> 
> 时间：2013-01-12T21:45:48.777
> 
> 标签：sql-server, tsql, recursion, duplicates, common-table-expression

我有以下 CTE 查询来查找技术人员是否已被派往客户家解决问题。

此表包含安装之间的关系数据。它告诉我安装 A 是否与 B 链接，然后如果 B 与 D 链接，从而使 A 和 D 链接。这可以针对 90 个不同的条目进行，以创建一个大型关系方案。

INIR_Id : ID

INIR_INST_Id ：安装 ID

INIR_INRE_Id 关系 ID

INIR_Date ：添加关系的日期。

```
CREATE TABLE [dbo].[CPL_t_Installations_InstallationsRelations](
    [INIR_Id] [bigint] IDENTITY(1,1) NOT NULL,
    [INIR_INST_Id] [int] NOT NULL,
    [INIR_INRE_Id] [bigint] NOT NULL,
    [INIR_Date] [datetime] NOT NULL,
 CONSTRAINT [PK_CPL_t_Installations_InstallationsRelations] PRIMARY KEY CLUSTERED 
(
    [INIR_Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

WITH Tempou(Relation,Installation,Date,Origine)AS
(
    (
        SELECT
            INIR_INRE_Id,
            INIR_INST_Id,
            INIR_Date,
            1
        FROM
            CPL_t_Installations_InstallationsRelations
        WHERE
            (INIR_INST_Id=@INST_Id)
    )
    UNION ALL
    (
        SELECT
            INIR_INRE_Id,
            INIR_INST_Id,
            INIR_Date,
            0
        FROM
            CPL_t_Installations_InstallationsRelations
                INNER JOIN Tempou Alpha ON(Relation=INIR_INRE_Id)
        WHERE
            (INIR_Date<Date)
            AND NOT
            (
                (Installation=INIR_INST_Id)
                AND
                (Relation=INIR_INRE_Id)
            )
    )
)
SELECT TOP * FROM Tempou; 
```

查询的问题在于它会循环回 CTE 结果集中存在的每个日期。然后每个结果都会重复多次。我已经使用日期作为监控数据，从无限数量的时间到包含 128 个条目的结果集。但是，如果我们使用 DISTINCT 从 Tempou 查询所有内容，我们将得到 14 个结果，这是正确的数字。除了日期数据之外，没有分层数据。

我已经为此工作了几天，从无限结果到 128 都很好，但这不是答案。我可能很累，看不到这个问题的明显之处。让我问你们所有我看不到的东西。

Ps.：我没有数据可以分享作为例子，但是结果的“级别”的数量没有限制，有些客户可能有2个级别，有些可能有20个。链接的数据当然不是对称的，有些“根”可能比其他的短。

谢谢！

补充一点，如果我可以使用“Tempou”来执行“NOT EXISTS”，问题就会得到解决，但是使用复制每个条目的 CTE 是不可能的。所以我真的想找到一种方法来改变 CTE 以能够复制这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:01:37.070

@Rv3，首先，`SELECT TOP * FROM Tempou`不会编译，但我会把它当作错字

快速提问，您的 CTE 是否进入无限循环？尝试在 JOIN 中切换它们，看看它是否有效。代替

```
FROM
            CPL_t_Installations_InstallationsRelations
                INNER JOIN Tempou Alpha ON(Relation=INIR_INRE_Id)
        WHERE
            (INIR_Date < Date)
            AND NOT
            (
                (Installation=INIR_INST_Id)
                AND
                (Relation=INIR_INRE_Id)
            ) 
```

尝试

```
FROM
            Tempou Alpha 
                INNER JOIN  (Select * from  CPL_t_Installations_InstallationsRelations 
                            WHERE
            (INIR_Date < Date)
            AND NOT 
            (
                (Installation=INIR_INST_Id)
                AND
                (Relation=INIR_INRE_Id)
            )
            ) temp_tab
            ON(Relation=temp_tab.INIR_INRE_Id) 
```

显然，我还没有尝试过运行它，所以如果您需要修复一点以使其正常工作，我深表歉意。

# c++ - 在 C++ 代码中找不到错误

> ID：14298246
> 
> 赞同：0
> 
> 时间：2013-01-12T21:45:51.353
> 
> 标签：c++, pointers

这段代码有什么问题吗？这是读取数据库数据的功能的一部分。`o`是`otl_stream`数据库输出流的对象。我的导师告诉我，我在这段代码中有错误，我是 C++ 的新手，不知道是什么问题......我必须使用指针，所以请不要告诉我使用静态 char 数组。

```
char* temp_char;

while (!o.eof()) {

   temp_char = new char [31];
   o>>temp_char;

   records.push_back(temp_char);

   delete[] temp_char;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:52:26.470

`o.eof()`仅在您尝试读取流的末尾后才变为真，因此您不应该使用`while(!o.eof())`循环控制。

除非`recods.push_back(temp_char)`复制指向的数组，`records`否则后面会包含一个悬空指针`delete[] temp_char;`

```
while(true) {
    temp_char = new char[31];
    o >> temp_char;
    if (!o) {
        delete[] temp_char;
        break;
    }
    records.push_back(temp_char);
} 
```

看起来更好（尽管我确信这不是惯用的）。

当然，使用`std::string`会减轻你的内存管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:34:45.853

每次我读一个单词时，我都不会重新分配字符串。如果最后一次迭代读取空格，则会推回一个空字符串。

```
 char* temp_char = new char[BUF_SZ];

    while ( ! o.eof() ) {

       o>>temp_char;
if( *temp_char != '\0' ) // If not an empty string
       records.push_back(temp_char);

    }

    delete[] temp_char; 
```

# c# - 如何正确使用 ToolTip？

> ID：14298247
> 
> 赞同：0
> 
> 时间：2013-01-12T21:45:51.417
> 
> 标签：c#, .net, controls, tooltip

我正在练习创建自定义控件。自定义控件是一个简单的标签继承`Control`。

使用下面的工具提示代码：

```
m_toolTip = new ToolTip();

protected override void OnMouseMove(MouseEventArgs e) {
    m_toolTip.SetToolTip(this, Text);
    base.OnMouseMove(e);
}

protected override void OnMouseLeave(EventArgs e) {
    m_toolTip.RemoveAll();
    base.OnMouseLeave(e);
} 
```

工具提示不使用任何配置。

当我将鼠标悬停在标签上时（尽管您看不到鼠标）： ![在此处输入图像描述](../Images/871f4e998f1d24a88cebd04b55b27011.png)

现在，在我离开控件并将鼠标悬停在第二个标签上之后： ![在此处输入图像描述](../Images/f94bf32cb43a2eb1f94fb8d595a3ac1b.png)

当您将鼠标悬停在 a`MS Label`上时，工具提示会出现，然后立即消失。如何更好地复制标准 MS 标签显示的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:15:48.260

我会使用`MouseEnter`事件而不是`MouseMove`. 您可以使用 a`Timer`使其不会立即显示，而是在短时间内显示。

例如：

```
// Member Variables
ToolTip toolTip = new ToolTip();
string toolTipText = "Your tool tip goes here.";
Timer toolTipTimer = new Timer();

public TimeSpan ToolTipDelay
{
  get { return TimeSpan.FromMilliseconds(toolTipTimer.Interval); }
  set { toolTipTimer.Interval = (int)value.TotalMilliseconds; }
}

// Call this in your CustomControl constructor!
void InitializeToolTipTimer()
{
  this.ToolTipDelay = TimeSpan.FromSeconds(1);

  toolTipTimer.Tick += (sender, e) =>
  {
    toolTipTimer.Stop(); // Tick only once per MouseEnter
    toolTip.SetToolTip(this, toolTipText);
  };
}

void OnToolTipMouseEnter(object sender, EventArgs e)
{
  toolTipTimer.Start(); // Start the ToolTip display Timer
}

void OnToolTipMouseLeave(object sender, EventArgs e)
{
  toolTipTimer.Stop(); // Cancel any pending ToolTip display
  toolTip.RemoveAll();      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:27:34.000

我通过以下更改解决了这个问题：

```
protected override void OnMouseHover(EventArgs e) {
    var m_position = PointToClient(Control.MousePosition);
    m_toolTip.Show(Text, this, m_position.X + 10, m_position.Y, 20000);
    base.OnMouseHover(e);
} 
```

我删除了以前的`OnMouseMove`覆盖。

此外，我还调整了一些似乎对我有用的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T22:35:36.700

您不需要在每次想要显示它时都设置工具提示。

您应该在控件构造函数中设置它：

```
m_toolTip.SetToolTip(this, Text); 
```

然后工具提示的显示和隐藏会自动为您完成，无需您编写任何额外的代码。

# c++ - QSet::find() 迭代器解引用得到“无法转换'this'指针”错误？

> ID：14298249
> 
> 赞同：2
> 
> 时间：2013-01-12T21:46:12.867
> 
> 标签：c++, qt, compiler-errors, iterator

尝试访问迭代器引用时出现错误：

```
QSet<UniqueWord>::iterator iter = uniqueWords.find(word);
iter->addOccurrence(position); // this gets an error 
```

我得到的错误：

> 错误：C2662：“UniqueWord::addOccurrence”：无法将“this”指针从“const UniqueWord”转换为“UniqueWord &”转换丢失限定符

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T21:51:06.787

您错过了迭代器的`operator->`返回 a `const UniqueWord *`，因此您尝试调用`addOccurrence`a `UniqueWord`that is `const`。

请参阅此处的文档：

[http://doc.qt.digia.com/qt/qset-iterator.html](http://doc.qt.digia.com/qt/qset-iterator.html)

# .net - VB.NET 和 WebCam 选择视频源对话框

> ID：14298250
> 
> 赞同：2
> 
> 时间：2013-01-12T21:46:13.773
> 
> 标签：.net, vb.net, webcam, video-capture

因此，我正在构建一个需要访问计算机上的单个网络摄像头的应用程序，问题是每当我运行该应用程序时，我都会从 Windows 收到一个对话框，要求选择一个视频源。我想让它以编程方式选择标准设备。有人对我应该如何处理这个有任何想法吗？

主要应用代码：

```
Imports WindowsApplication1.iCam
Imports System.Drawing.Imaging

    Public Class Form1
        Dim myCam As iCam
        Dim Dir As String
        Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
            myCam = New iCam
            myCam.setFrameRate(20)
            myCam.initCam(PictureBox1.Handle.ToInt32)

        End Sub

        Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
            Dim image As Bitmap
            image = myCam.copyFrame(PictureBox1, New RectangleF(0, 0, PictureBox1.Width, PictureBox1.Height))
            Dim g As Graphics
            g = Graphics.FromImage(image)
            image.Save(Dir, ImageFormat.Jpeg)
        End Sub
    End Class 
```

iCam 类：

```
Option Explicit On 
Option Strict On

Public Class iCam
#Region "Api/constants"

    Private Const WS_CHILD As Integer = &H40000000
    Private Const WS_VISIBLE As Integer = &H10000000
    Private Const SWP_NOMOVE As Short = &H2S
    Private Const SWP_NOZORDER As Short = &H4S
    Private Const WM_USER As Short = &H400S
    Private Const WM_CAP_DRIVER_CONNECT As Integer = WM_USER + 10
    Private Const WM_CAP_DRIVER_DISCONNECT As Integer = WM_USER + 11
    Private Const WM_CAP_SET_VIDEOFORMAT As Integer = WM_USER + 45
    Private Const WM_CAP_SET_PREVIEW As Integer = WM_USER + 50
    Private Const WM_CAP_SET_PREVIEWRATE As Integer = WM_USER + 52
    Private Const WM_CAP_GET_FRAME As Long = 1084
    Private Const WM_CAP_COPY As Long = 1054
    Private Const WM_CAP_START As Long = WM_USER
    Private Const WM_CAP_STOP As Long = (WM_CAP_START + 68)
    Private Const WM_CAP_SEQUENCE As Long = (WM_CAP_START + 62)
    Private Const WM_CAP_SET_SEQUENCE_SETUP As Long = (WM_CAP_START + 64)
    Private Const WM_CAP_FILE_SET_CAPTURE_FILEA As Long = (WM_CAP_START + 20)

    Private Declare Function SendMessage Lib "user32" Alias "SendMessageA" (ByVal hwnd As Integer, ByVal wMsg As Integer, ByVal wParam As Short, ByVal lParam As String) As Integer
    Private Declare Function capCreateCaptureWindowA Lib "avicap32.dll" (ByVal lpszWindowName As String, ByVal dwStyle As Integer, ByVal x As Integer, ByVal y As Integer, ByVal nWidth As Integer, ByVal nHeight As Short, ByVal hWndParent As Integer, ByVal nID As Integer) As Integer
    Private Declare Function capGetDriverDescriptionA Lib "avicap32.dll" (ByVal wDriver As Short, ByVal lpszName As String, ByVal cbName As Integer, ByVal lpszVer As String, ByVal cbVer As Integer) As Boolean
    Private Declare Function BitBlt Lib "GDI32.DLL" (ByVal hdcDest As IntPtr, ByVal nXDest As Integer, ByVal nYDest As Integer, ByVal nWidth As Integer, ByVal nHeight As Integer, ByVal hdcSrc As IntPtr, ByVal nXSrc As Integer, ByVal nYSrc As Integer, ByVal dwRop As Int32) As Boolean

#End Region

    Private iDevice As String
    Private hHwnd As Integer
    Private lwndC As Integer

    Public iRunning As Boolean

    Private CamFrameRate As Integer = 15
    Private OutputHeight As Integer = 240
    Private OutputWidth As Integer = 360

    Public Sub resetCam()
        'resets the camera after setting change
        If iRunning Then
            closeCam()
            Application.DoEvents()

            If setCam() = False Then
                MessageBox.Show("Errror Setting/Re-Setting Camera")
            End If
        End If

    End Sub

    Public Sub initCam(ByVal parentH As Integer)
        'Gets the handle and initiates camera setup
        If Me.iRunning = True Then
            MessageBox.Show("Camera Is Already Running")
            Exit Sub
        Else

            hHwnd = capCreateCaptureWindowA(iDevice, WS_VISIBLE Or WS_CHILD, 0, 0, OutputWidth, CShort(OutputHeight), parentH, 0)

            If setCam() = False Then
                MessageBox.Show("Error setting Up Camera")
            End If
        End If
    End Sub

    Public Sub setFrameRate(ByVal iRate As Long)
        'sets the frame rate of the camera
        CamFrameRate = CInt(1000 / iRate)

        resetCam()

    End Sub

    Private Function setCam() As Boolean
        'Sets all the camera up
        If SendMessage(hHwnd, WM_CAP_DRIVER_CONNECT, CShort(iDevice), CType(0, String)) = 1 Then
            SendMessage(hHwnd, WM_CAP_SET_PREVIEWRATE, CShort(CamFrameRate), CType(0, String))
            SendMessage(hHwnd, WM_CAP_SET_PREVIEW, 1, CType(0, String))
            Me.iRunning = True
            Return True
        Else
            Me.iRunning = False
            Return False
        End If
    End Function

    Public Function closeCam() As Boolean
        'Closes the camera
        If Me.iRunning Then
            closeCam = CBool(SendMessage(hHwnd, WM_CAP_DRIVER_DISCONNECT, 0, CType(0, String)))
            Me.iRunning = False
        End If
    End Function

    Public Function copyFrame(ByVal src As PictureBox, ByVal rect As RectangleF) As Bitmap
        If iRunning Then
            Dim srcPic As Graphics = src.CreateGraphics
            Dim srcBmp As New Bitmap(src.Width, src.Height, srcPic)
            Dim srcMem As Graphics = Graphics.FromImage(srcBmp)

            Dim HDC1 As IntPtr = srcPic.GetHdc
            Dim HDC2 As IntPtr = srcMem.GetHdc

            BitBlt(HDC2, 0, 0, CInt(rect.Width), _
              CInt(rect.Height), HDC1, CInt(rect.X), CInt(rect.Y), 13369376)

            copyFrame = CType(srcBmp.Clone(), Bitmap)

            'Clean Up 
            srcPic.ReleaseHdc(HDC1)
            srcMem.ReleaseHdc(HDC2)
            srcPic.Dispose()
            srcMem.Dispose()
        Else
            MessageBox.Show("Camera Is Not Running!")
        End If
    End Function

    Public Function FPS() As Integer
        Return CInt(1000 / (CamFrameRate))
    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-26T21:07:46.383

出现视频源对话框是因为您在 Windows 上安装了另一个视频输入设备。在 Regedit.exe 的 VideoSource 对话框中搜索列出的设备并删除该条目（如果您不使用它们）。

我使用 DroidCam 测试网络摄像头功能，每次调用 WM_CAP_DRIVER_CONNECT 时都会出现以下对话框：

```
-DroidCam 1
-Droidcam 2
-Droidcam 3 (*)
-MiniDroidCam 240p 
```

当删除 Windows 注册表的 DroidCam1、DroidCam2 和 MiniDroidCam 240p（用于以前安装的 Droidcam）时，只需单击“捕获”按钮，网络摄像头就会运行而没有任何对话框。

对不起我的英语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T21:41:42.187

最后我找到了解决方案。问题发生在 Windows 7 / 8

首先你需要这个API函数

```
Private Declare Function GetTickCount Lib "kernel32" () As Long 
```

然后......在你打电话后`capCreateCaptureWindowA()`你必须等待1秒处理事件，（注意：睡眠不一样）

```
IniTime = GetTickCount()
While GetTickCount() < (IniTime + 1000)
DoEvents
Wend 
```

然后你打电话`WM_CAP_DRIVER_CONNECT.. and THAT's IT`

# c# - 从其他类设置控制值的“正确”方式

> ID：14298252
> 
> 赞同：1
> 
> 时间：2013-01-12T21:46:31.893
> 
> 标签：c#

我想知道设置的**正确方法**（最好看），例如，来自除 my 之外的类的标签`MainWindow`。

目前，我会做这样的事情：

```
public partial class MainWindow: Window {
    public MainWindow() {
        InitializeComponent();

        MyClass a=new MyClass(this);
        a.WriteToLabel();
    }
}

class MyClass {
    MainWindow parent;

    public MyClass(MainWindow parent) {
        this.parent=parent;
    }

    public void WriteToLabel() {
        parent.label1.Text="Test";
    }
} 
```

但我觉得这是一种不好的做法。
当你有超过 20 个类并且都有一个`parent`.
你会如何解决这样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:52:36.853

为什么不`label1`作为参数传递？

和：

```
class MyClass
{
    public void WriteToLabel(Label label)
    {
        label.Content = "Test";
    }
} 
```

你会使用：

```
var a = new MyClass();
a.WriteToLabel(label1); 
```

按照惯例，最好尽可能避免代码中的耦合。我不会添加对窗口的引用。我宁愿尽可能地参数化我的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T22:04:40.647

I think your practice is overall good. But I would also "keep track" of the children I've instanciated through a List so I could also, eventually, search for a specific one using Linq extensions. I also corrected some minor errors in your code (naming convention for the parent member of MyClass and the void result of WriteToLabel() being assigned to MyClass instance in the parent constructor.

```
public partial class MainWindow : Window
{
    private List<MyClass> children;

    public MainWindow()
    {
        children = new List<MyClass>();

        InitializeComponent();

        MyClass child = InstantiateChild();
        child.WriteToLabel();
    }

    private MyClass InstantiateChild()
    {
        MyClass child = new MyClass(this);
        children.Add(child);

        return child;
    }
}

public class MyClass
{
    private MainWindow m_Parent;

    public MyClass(MainWindow parent)
    {
        m_Parent = parent;
    }

    public void WriteToLabel()
    {
        m_Parent.label1.Text = "Test";
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:54:34.827

使用[流畅的界面](http://en.wikipedia.org/wiki/Fluent_interface)

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        MyClass a = new MyClass(this).WriteToLabel("Test");
    }
}

class MyClass
{
    MainWindow parent;

    public MyClass(MainWindow parent)
    {
        this.parent = parent;
    }

    public MyClass WriteToLabel(string txt)
    {
        parent.label1.Text = txt;
        return this;
    } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T21:54:45.077

问题是为什么你需要从一个`Label`不`Text`属于`MainWindow`. 标签的形式是它的 GUI 的控制器，类只需要*提供*你想在表单中显示的内容。

所以这是*更好*的做法。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        MyClass a = new MyClass();
        string data = a.GetData();
        label1.Text = text;
    }
}

class MyClass
{
    public MyClass()
    {
        this.parent = parent;
    }

    public stringGetData()
    {
        return "Test";
    } 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T21:58:50.950

由于您的班级彼此完全了解，因此提供属性访问器是一个好方法。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        MyClass a = new MyClass(this);
        a.WriteToLabel();
    }

    public string LabelText
    {  
        get { return label1.Text; }
        set {
                if (this.InvokeRequired) 
                {
                   this.BeginInvoke(
                       delegate() => 
                                { 
                                  label1.Text =value;
                                })};
                 }
                 else
                 {
                    label1.Text = value;
                 }
              }

}

class MyClass
{
    MainWindow parent;

    public MyClass(MainWindow parent)
    {
        this.parent = parent;
    }
    public void WriteToLabel()
    {
        parent.LabelText = "Test";
    } 
} 
```

# iphone - iOS 设备崩溃——没有模拟器崩溃

> ID：14298254
> 
> 赞同：0
> 
> 时间：2013-01-12T21:46:37.897
> 
> 标签：iphone, ios, objective-c, xcode, testflight

我正在使用 TestFlight 来测试我的应用程序。在模拟器上，应用程序不会崩溃。但是，在所有 iOS 设备上，它都会在特定情况下崩溃。TestFlight 没有捕获崩溃数据并将其发送给我。

当我直接从 Xcode 将应用程序运行到设备中时，它不会崩溃！当我从设备中检索崩溃日志并`atos`与 dSYM 一起使用以查找崩溃数据时，我得到了以下不是真正有用的数据或正确的堆栈跟踪：

```
__destroy_helper_block_ (in TipnTag) (CategoryViewController.m:53)

-[TipsCel setImgMap:] (in TipnTag) (TipsCel.h:34)
-[PlacesGeoCoder geocodingSucceded] (in TipnTag) (PlacesGeoCoder.m:38)
-[TipnTagViewController viewWillAppear:] (in TipnTag) (TipnTagViewController.m:115)

-[TipnTagViewController viewWillAppear:]_block_invoke_0 (in TipnTag) (TipnTagViewController.m:81)
-[TipnTagViewController .cxx_destruct] (in TipnTag) (TipnTagViewController.m:19)

-[PlacesGeoCoder initWithDelegate:] (in TipnTag) (PlacesGeoCoder.m:20)
-[GooglePlacesParser parser:didEndElement:namespaceURI:qualifiedName:] (in TipnTag) (GooglePlacesParser.m:188)
-[GooglePlacesParser parser:didStartElement:namespaceURI:qualifiedName:attributes:] (in TipnTag) (GooglePlacesParser.m:118)
-[AddComment AddComment:]_block_invoke_078 (in TipnTag) (AddComment.m:88)

-[SearchTips LoadQuestions] (in TipnTag) (SearchTips.m:94)
-[TipsCel setImgMap:] (in TipnTag) (TipsCel.h:34)

-[TipnTagViewController viewDidLoad] (in TipnTag) (TipnTagViewController.m:176)

-[SearchTips LoadQuestions] (in TipnTag) (SearchTips.m:82)
-[TipsCel setImgMap:] (in TipnTag) (TipsCel.h:34)
[TipnTagViewController viewWillAppear:]_block_invoke_0 (in TipnTag) (TipnTagViewController.m:90) 
```

常规的堆栈跟踪通常具有更多有用的数据并且更加严格。这只是告诉我，`setImgMap`在 TipsCel.h 的第 34 行发生了一些事情（实际上根本没有`setImgMap`）。

有关如何调试/修复此问题的任何想法/指导？

# javascript - 如何添加 OnChange 事件以选择使用 custom-form-elements.js 样式的元素？

> ID：14298257
> 
> 赞同：1
> 
> 时间：2013-01-12T21:46:53.683
> 
> 标签：javascript, forms, onchange, dom-events, custom-formatting

这可以很好地调用 OnChange 事件：

```
<FORM>
<SELECT ONCHANGE="alert(this.name + ' changed: ' + this.value)">
<OPTION VALUE="1">Option 1</OPTION>
<OPTION VALUE="2">Option 2</OPTION>
<OPTION VALUE="3">Option 3</OPTION>
</SELECT>
</FORM> 
```

但是当我使用这个造型包时：

[https://web.archive.org/web/20161013011416/http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/](https://web.archive.org/web/20161013011416/http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)

OnChange 事件不再起作用。

```
<FORM>
<SELECT class="styled" ONCHANGE="alert(this.name + ' changed: ' + this.value)">
<OPTION VALUE="1">Option 1</OPTION>
<OPTION VALUE="2">Option 2</OPTION>
<OPTION VALUE="3">Option 3</OPTION>
</SELECT>
</FORM> 
```

无论如何要使用 custom-form-elements.js 进行 OnChange 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:57:39.647

答案在您链接到的页面上；）

滚动到底部，您将阅读：

> **onChange 和其他 JavaScript 事件**
> 
> 该脚本利用 JavaScript 的 onChange 和其他事件。因为这些事件只能使用一次，如果你想为一个事件添加更多的功能，你需要从我的脚本中调用它们。

：：编辑：：

`Custom.clear`和`Custom.choose`函数都是将在`onChange`事件中调用的函数。所以我的猜测是你修改js文件如下，看看会出现什么：

```
clear: function() {
    // add your code here. example:
    alert(this.name + ' changed: ' + this.value);

    inputs = document.getElementsByTagName("input");
    for(var b = 0; b < inputs.length; b++) {
        if(inputs[b].type == "checkbox" && inputs[b].checked == true && inputs[b].className == "styled") {
            inputs[b].previousSibling.style.backgroundPosition = "0 -" + checkboxHeight*2 + "px";
        } else if(inputs[b].type == "checkbox" && inputs[b].className == "styled") {
            inputs[b].previousSibling.style.backgroundPosition = "0 0";
        } else if(inputs[b].type == "radio" && inputs[b].checked == true && inputs[b].className == "styled") {
            inputs[b].previousSibling.style.backgroundPosition = "0 -" + radioHeight*2 + "px";
        } else if(inputs[b].type == "radio" && inputs[b].className == "styled") {
            inputs[b].previousSibling.style.backgroundPosition = "0 0";
        }
    }
},
choose: function() {
    // add your code here. example:
    alert(this.name + ' changed: ' + this.value);

    option = this.getElementsByTagName("option");
    for(d = 0; d < option.length; d++) {
        if(option[d].selected == true) {
            document.getElementById("select" + this.name).childNodes[0].nodeValue = option[d].childNodes[0].nodeValue;
        }
    }
} 
```

注意：不要在 js 文件中编写代码块，您应该只从`clear`and/or`choose`函数调用一次您自己的自定义函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:07:38.503

我遇到了同样的问题......这可能不是解决这个问题的最优雅的方法，但我将单选按钮放在 span 标签内并从那里调用 onclick 事件。这件事让我疯狂了好几天......希望这会有所帮助

# iphone - 子视图控制器如何使用 Parentviewcontroller 中定义的方法

> ID：14298258
> 
> 赞同：3
> 
> 时间：2013-01-12T21:46:53.627
> 
> 标签：iphone, uiviewcontroller, ios6

我有一种情况，子视图控制器试图显示多个视图控制器，并且在这样做时，子视图控制器需要从父视图控制器访问播放暂停操作方法。childviewcontroller 可以使用在父视图控制器中定义的暂停音频播放器、暂停计时器和暂停 layer:self.view.layer 的播放暂停操作方法是如何实现的。

我将非常感谢为解决此问题提供的各种帮助。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T21:50:47.813

`parentViewController`您可以使用该属性访问视图控制器的父级。

```
if([self.parentViewController isKindOfClass:[SomeViewController class]]) {
    SomeViewController* viewController = (SomeViewController*)self.parentViewController;

    [viewController foo];
} 
```

但是，这取决于您的视图控制器之间的关系。从你的问题，我推断你有多个孩子的亲子关系，但如果我错了，请纠正我！这与模态视图控制器演示非常不同，其中仅呈现一个视图控制器并且需要用户立即注意。

**解释：**

`parentViewController`UIViewController 上的和`presentingViewController`属性之间的区别似乎有些混乱。有两种不同的视图控制器关系，每一种都适用于这些属性之一。

如果您希望将多个视图控制器的视图添加为父视图控制器的子视图，请使用[视图控制器包含](https://stackoverflow.com/questions/8379759/how-does-view-controller-containment-work-in-ios-5)。`parentViewController`在这种情况下，作为父视图控制器的子视图（子视图）添加的任何视图都会在访问属性时返回父视图控制器（控制子视图的父视图；父视图） 。在这种情况下，`presentingViewController`属性返回`null`。

例如，在父视图控制器中：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    SomeViewController* someVC = [[SomeViewController alloc] init];

    [self addChildViewController:someVC];
    [self.view addSubview:someVC.view];
    [someVC.view setFrame:<SOME_FRAME>];
    [someVC didMoveToParentViewController:self];

    AnotherViewController* anotherVC = [[AnotherViewController alloc] init];

    [self addChildViewController:anotherVC];
    [self.view addSubview:anotherVC.view];
    [anotherVC.view setFrame:<ANOTHER_FRAME>];
    [anotherVC didMoveToParentViewController:self];

    /* this prints self */
    NSLog(@"%@", someVC.parentViewController);

    /* this prints null */
    NSLog(@"%@", someVC.presentingViewController);

    /* this prints self */
    NSLog(@"%@", anotherVC.parentViewController);

    /* this prints null */
    NSLog(@"%@", anotherVC.presentingViewController);
} 
```

相反，如果您只是希望呈现单个模式视图控制器（这种情况比上面的一对多父子关系更常见），则`presentingViewController`使用该属性。

例如，在呈现视图控制器中：

```
- (void)someActionTriggered {
    SomeViewController* viewController = [[SomeViewController alloc] init];

    [self presentViewController:viewController animated:YES completion:nil];

    /* this prints null */
    NSLog(@"%@", viewController.parentViewController);

    /* this prints self, or a tab bar controller if 'self' is contained in one */
    NSLog(@"%@", viewController.presentingViewController);
} 
```

尽管`presentingViewController`由于模式视图控制器模式在 iOS 中的流行可能会更常见，但视图控制器包含父子关系是绝对合法的，并且UIViewController的`parentViewController`和属性在 iOS 5 中还*没有*被弃用，它们的用途刚刚改变。您可以从文档中阅读以下摘录：`childViewController`

 *> **讨论**
> 
> 如果接收者是容器视图控制器的子级，则此属性保存它所在的视图控制器。如果接收者没有父级，则此属性中的值为 nil。
> 
> 在 iOS 5.0 之前，如果视图没有父视图控制器并且正在呈现，则将返回呈现视图控制器。在 iOS 5 上，此行为不再发生。相反，使用presentingViewController 属性来访问呈现视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-26T12:48:04.293

在`ParentViewController.h`

```
-(void)PlayMusic; 
```

在`ParentViewController.m`

```
-(IBAction)PlayMusic:(id)sender {
       [self playMusic];
} 
```

在`IBAction`子视图控制器上的播放按钮执行以下操作：

```
-(IBAction)PlayMusic:(id)sender {
       ParentViewController *parent=self.parentViewController;
       [parent playMusic];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T00:48:31.343

每个视图控制器都有一个名为的属性`presentingViewController`（如果 ViewController1 以模态方式呈现 ViewController2，则 ViewController1 是 ViewController2 的`presentingViewController`）。

```
ViewController *viewController = (ViewController *)self.presentingViewController;
[viewController function]; 
```

另一种选择是使用`NSNotificationCenter`. *然后，您可以从应用程序的任何位置*轻松调用父视图控制器的方法。

父视图控制器.m

```
-(void)viewDidLoad {

    ...

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(method) name:@"Toggle Play" object:nil];

} 
```

ChildViewController.m

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"Toggle Play" object:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-10T20:19:28.290

您可以从子级访问父级，即使父级是`UINavigationController`OR`UIViewController`使用以下命令：

```
self.parentViewController 
```

你可以像这样往上走

```
self.parentViewController!.parentViewController as! PARENT_VIEW_CONTROLLER 
```*

# spring - MaxUploadSizeExceededException 不调用 Spring 中的异常处理方法

> ID：14298265
> 
> 赞同：14
> 
> 时间：2013-01-12T21:47:49.943
> 
> 标签：spring, spring-mvc, file-upload, exception-handling, handlerexceptionresolver

我正在使用 Spring 3.2.0。根据[这个](https://stackoverflow.com/a/3230352/1391249)答案，我在带注释的控制器中有相同的方法，它实现了`HandlerExceptionResolver`接口，例如，

```
public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception exception) {

    Map<String, Object> model = new HashMap<String, Object>(0);

    if (exception instanceof MaxUploadSizeExceededException) {
        model.put("msg", exception.toString());
        model.put("status", "-1");
    } else {
        model.put("msg", "Unexpected error : " + exception.toString());
        model.put("status", "-1");
    }

    return new ModelAndView("admin_side/ProductImage");
} 
```

Spring 配置包括，

```
<bean id="filterMultipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <property name="maxUploadSize">
        <value>10000</value>
    </property>
</bean> 
```

当文件大小超过时，应该调用前面的方法，它应该自动处理异常，但它根本不会发生。`resolveException()`即使发生异常，也不会调用该方法。处理这个异常的方法是什么？我错过了什么吗？

[此处](http://www.raistudies.com/spring/spring-mvc/file-upload-spring-mvc-annotation/)也指定了相同的内容。我不确定为什么它在我的情况下不起作用。

* * *

我已经尝试了[以下方法](http://www.baeldung.com/2013/01/31/exception-handling-for-rest-with-spring-3-2/#controlleradvice)，[`@ControllerAdvice`](http://static.springsource.org/spring-framework/docs/3.2.0.M2/api/org/springframework/web/bind/annotation/ControllerAdvice.html)但它也没有奏效。

```
package exceptionhandler;

import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.context.request.WebRequest;
import org.springframework.web.multipart.MaxUploadSizeExceededException;
import org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler;

@ControllerAdvice
public final class RestResponseEntityExceptionHandler extends ResponseEntityExceptionHandler {

    @ExceptionHandler(value = {MaxUploadSizeExceededException.class})
    protected ResponseEntity<Object> handleConflict(RuntimeException ex, WebRequest request) {
        String bodyOfResponse = "This should be application specific";
        return handleExceptionInternal(ex, bodyOfResponse, new HttpHeaders(), HttpStatus.CONFLICT, request);
    }
} 
```

我也试图把冗长的 - `Exception`。

```
@ExceptionHandler(value={Exception.class}) 
```

`ResponseEntity()`在任何情况下都不会调用该方法。

* * *

一般来说，如果可能的话，我想按控制器基础（控制器级别）处理这个异常。为此，一个`@ExceptionHandler`带注释的方法应该只对那个特定的控制器有效，而不是对整个应用程序全局有效，因为我的应用程序中只有几个网页处理文件上传。当这个异常发生时，我只想在当前页面显示一个用户友好的错误信息，而不是重定向到`web.xml`文件中配置的错误页面。如果这甚至不可行，那么无论如何都应该处理这个异常，而不需要我刚才表达的任何自定义要求。

这两种方法都不适合我。我找不到更多关于处理这个异常的信息。它是否需要在 XML 文件中的某处或其他地方进行额外配置？

* * *

抛出异常后我得到的内容可以在以下[快照](https://i.stack.imgur.com/GrKgq.png)中看到。

![在此处输入图像描述](../Images/a6f74cc65980d47827ba1311c98ef9e3.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T15:05:46.970

根据您发布的堆栈跟踪，在请求到达调度程序 servlet*之前*`MaxUploadSizeExceeded`引发异常。因此，您的异常处理程序不会被调用，因为在抛出异常时目标控制器尚未确定。

 *如果您查看堆栈跟踪，您会看到异常被抛出，`HiddenHttpMethodFilter`它获取您的多部分请求的所有参数 - 以及您的“大”上传数据参数。

您的控制器是否`HiddenHttpMethodFilter`需要处理多部分上传？如果没有，请将此过滤器从您的上传处理控制器中排除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-21T09:14:11.993

您可以像这样将 CommonsMultipartResolver 的 resolveLazily 属性配置为 true：

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
<property name="resolveLazily" value="true"/>
</bean> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T12:08:33.557

从Dirk Lachowski 发布的[答案](https://stackoverflow.com/a/15905566/1391249)[`HiddenHttpMethodFilter`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/filter/HiddenHttpMethodFilter.html)中，我排除了一些用于从.

[`HiddenHttpMethodFilter`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/filter/HiddenHttpMethodFilter.html)最初被赋予了一个 URL 模式，如`/*`. 因此，将这些页面移动到单独的目录/文件夹中并指定不同的 URL 模式（如`/xxx/*`. 为避免这种情况，我[`OncePerRequestFilter`](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/filter/OncePerRequestFilter.html)在自己的类中继承并排除了这些用于多部分上传的页面，这些页面按预期工作，在当前页面上显示用户友好的错误消息。

```
package filter;

import java.io.IOException;
import java.util.Locale;
import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletRequestWrapper;
import javax.servlet.http.HttpServletResponse;
import org.springframework.util.Assert;
import org.springframework.util.StringUtils;
import org.springframework.web.filter.OncePerRequestFilter;

public final class HiddenHttpMethodFilter extends OncePerRequestFilter {

    /**
     * Default method parameter: <code>_method</code>
     */
    public static final String DEFAULT_METHOD_PARAM = "_method";

    private String methodParam = DEFAULT_METHOD_PARAM;

    /**
     * Set the parameter name to look for HTTP methods.
     *
     * @see #DEFAULT_METHOD_PARAM
     */
    public void setMethodParam(String methodParam) {
        Assert.hasText(methodParam, "'methodParam' must not be empty");
        this.methodParam = methodParam;
    }

    private boolean excludePages(String page) {
        //Specifically, in my case, this many pages so far have been excluded from processing avoiding the MaxUploadSizeExceededException in this filter. One could use a RegExp or something else as per requirements.
        if (page.equalsIgnoreCase("Category.htm") || page.equalsIgnoreCase("SubCategory.htm") || page.equalsIgnoreCase("ProductImage.htm") || page.equalsIgnoreCase("Banner.htm") || page.equalsIgnoreCase("Brand.htm")) {
            return false;
        }
        return true;
    }

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {

        String servletPath = request.getServletPath();

        if (excludePages(servletPath.substring(servletPath.lastIndexOf("/") + 1, servletPath.length()))) {
            String paramValue = request.getParameter(this.methodParam);
            //The MaxUploadSizeExceededException was being thrown at the preceding line.
            if ("POST".equals(request.getMethod()) && StringUtils.hasLength(paramValue)) {
                String method = paramValue.toUpperCase(Locale.ENGLISH);
                HttpServletRequest wrapper = new filter.HiddenHttpMethodFilter.HttpMethodRequestWrapper(request, method);
                filterChain.doFilter(wrapper, response);
            } else {
                filterChain.doFilter(request, response);
            }
        } else {
            filterChain.doFilter(request, response);
        }
    }

    /**
     * Simple {@link HttpServletRequest} wrapper that returns the supplied
     * method for {@link HttpServletRequest#getMethod()}.
     */
    private static class HttpMethodRequestWrapper extends HttpServletRequestWrapper {

        private final String method;

        public HttpMethodRequestWrapper(HttpServletRequest request, String method) {
            super(request);
            this.method = method;
        }

        @Override
        public String getMethod() {
            return this.method;
        }
    }
} 
```

在我的`web.xml`文件中，这个过滤器 -`filter.HiddenHttpMethodFilter`被指定而不是[`org.springframework.web.filter.HiddenHttpMethodFilter`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/filter/HiddenHttpMethodFilter.html)如下。

```
<filter>
    <filter-name>multipartFilter</filter-name>
    <filter-class>org.springframework.web.multipart.support.MultipartFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>multipartFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter>
    <filter-name>httpMethodFilter</filter-name>
    <filter-class>filter.HiddenHttpMethodFilter</filter-class>
    <!--<filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class> This was removed replacing with the preceding one-->
</filter>
<filter-mapping>
    <filter-name>httpMethodFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

我仍然希望应该/可以有一种公平的方式来处理有问题的异常以及[`org.springframework.web.filter.HiddenHttpMethodFilter`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/filter/HiddenHttpMethodFilter.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T19:46:58.373

您的 @ExcpetionHandler 不起作用，因为据我所知，这些带注释的方法仅允许返回 ModelAndView 或 String 类型。有关详细信息，请参阅[此帖子](https://stackoverflow.com/questions/5097134/spring-exceptionhandler-does-not-work-with-responsebody)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T09:50:42.137

我的解决方案：首先为实现 HandlerExceptionResolver 的类定义 bean。

```
 <bean id="classForBeanException" class="XXXX.path.To.classForBeanException" /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-26T08:55:48.447

在处理异常的 ControllerAdvice 中，您可以使用这样的代码。它对我有用。这是在 spring 4.0+

```
@ExceptionHandler(Exception.class)
public @ResponseBody BaseResponse onException(Exception e, HttpServletResponse response) {
    response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);

    BaseResponse resp = new BaseResponse();
    if(e instanceof MaxUploadSizeExceededException){
        resp.setCode(FileUploadFailed.SIZE_EXCEED);
        resp.setMessage("Maximum upload size exceeded");
    }
    return resp;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-15T14:32:22.537

无论如何要获取在管理 MaxUploadSizeExceededException 的 ExceptionHandler 的控制器方法中定义的 @RequestParam 参数？似乎在到达 Controller 方法之前被抛出。*

# bash - 计算存储在变量中的字段数

> ID：14298269
> 
> 赞同：0
> 
> 时间：2013-01-12T21:48:25.057
> 
> 标签：bash, xxd

我正在研究一个基本的文件雕刻器，我目前一直在计算文件的字节位置。

我发现我需要一段代码来执行以下步骤；

1.  在变量中找到 $searchQuery
2.  找到 $searchQuery 后删除字符串的其余部分
3.  计算变量中现在存在的字段数
4.  将此变量减去 2 以考虑十六进制偏移量和 $searchQuery 本身
5.  然后将答案乘以 2 得到正确的字节数

这方面的一个例子是；

1.  在“00052a0: b4f1 559c ffd8 ffe0 0010 4a46 4946 0001”中找到“ffd8”
2.  变量更新为“00052a0: b4f1 559c ffd8”
3.  $fieldCount 被赋值为“4”
4.  $fieldCount=((fieldCount-2))
5.  $byteCount=((fieldCount*2))

除了计算变量中的字段数之外，我对如何做所有事情都有一个基本的想法。例如，在找到 $searchQuery 之前，如何计算变量中有多少字段？同样，删除字符串中不必要的部分后，如何计算字段数？

用 grep 找到 $searchString 后，我不知道如何继续。我当前的代码如下所示；

```
#!/bin/bash
#***************************************************************
#Name:          fileCarver.sh
#Purpose:       Extracts files hidden within other files
#Author:        
#Date Written:      12/01/2013
#Last Updated:      12/01/2013
#***************************************************************

clear

#Request user input
printf "Please enter the input file name: "
read inputFile
printf "Please enter the search string: "
read searchString

#Search for the required string
searchFunction()
{
    #Search for required string and remove unnecessary characters
    startHexOffset=`xxd $1 | grep $2 | cut -d":" -f 1`
    #Convert the Hex Offset to Decimal
    startDecOffset=$(echo "ibase=16;${startHexOffset^^}" | bc)
}

searchFunction $inputFile $searchString

exit 0 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:32:41.720

如果您以更简单的格式将文件转换为十六进制，您可能会发现这更容易。例如，您可以使用命令

```
hexdump -v -e '/1 "%02x "' $FILE 
```

打印文件，每个字节都转换为三个字符：两个十六进制数字和一个空格。

`ffd8`您可以找到所有带有字节偏移量前缀的实例：

```
hexdump -v -e '/1 "%02x "' $FILE | grep -Fbo 'ff d8 ' 
```

（字节偏移量需要除以 3。）

因此，您可以从第一个使用实例流式传输整个文件`ffd8`：

```
tail -c+$((
  $(hexdump -v -e '/1 "%02x "' $FILE | grep -Fbo 'ff d8 ' | head -n1 | cut -f1 -d:)
  / 3 + 1)) $FILE 
```

（假设您用于显示文件的任何内容都知道在到达图像末尾时会停止。但您同样可以找到最后一个结束标记。）

这取决于 GNU grep；标准 Posix grep 缺少 -b 选项。但是，可以通过以下方式完成`awk`：

```
tail -c+$(
    hexdump -v -e '/1 "%02x\n"' $FILE |
    awk '/d8/&&p=="ff"{print NR-1;exit}{p=$1}'
  ) $FILE 
```

选项说明：

```
tail    -c+N    file starting at byte number N (first byte is number 1)

hexdump -v      do not compress repeated lines on output
        -e 'FORMAT'  use indicated format for output:
            /1       each format consumes 1 byte
            "%02X "  output two hex digits, including leading 0, using lower case,
                     followed by a space.

grep    -F      pattern is just plain characters, not a regular expression
        -b      print the (0-based) byte offset of the... 
        -o      ... match instead of the line containing the match

cut     -f1     output the first field of each line
        -d:     fields are separated by : 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-28T22:13:52.780

尝试：

```
echo "00052a0: b4f1 559c ffd8 ffe0 0010 4a46 4946 0001"| awk '
{
for (a=1;a<=NF; a++) {
    if ($a == "ffd8") {
        print substr($0,0,index($0,$a)+length($a))
        break
        }
    }
}' 
```

输出：00052a0：b4f1 559c ffd8

# php - 有什么方法可以按周数过滤视图吗？

> ID：14298273
> 
> 赞同：1
> 
> 时间：2013-01-12T21:48:50.280
> 
> 标签：php, drupal-7, drupal-views

我已经配置了几个视图，这些视图多年来显示数据。使用日期字段作为过滤条件按年份过滤数据。每年我都有附件视图，我需要按周进一步过滤。而不是确定每年几周的确切日期并将它们手动输入作为过滤条件，我想知道是否有任何方法可以添加过滤条件以按周数过滤，即第 1 周到第 52 周。这样唯一需要设置的日期是每个视图的年份，其余的根据周数自动发生。

有人对此有什么建议/提示吗？非常感谢。

这是我在视图 PHP 过滤器中使用的代码：

```
function x_week_start($date) {
$ts = strtotime($date);
$start = (date('w', $ts) == 0) ? $ts : strtotime('last sunday', $ts);
return date('Y-m-d', $start); }

function x_week_end($date) {
$ts = strtotime($date);
$start = (date('w', $ts) == 0) ? $ts : strtotime('last sunday', $ts);
return date('Y-m-d', strtotime('next saturday', $start)); }

$date = '2013-01-14';
$start = x_week_start($date);
$end = x_week_end($date);
$inquiry_date = date('Y-m-d', $data->field_field_inquiry_date[0]['raw']['value']);

if ($inquiry_date <= $start) {return FALSE;} 
```

# xslt - XSL if 测试标签属性

> ID：14298274
> 
> 赞同：1
> 
> 时间：2013-01-12T21:48:51.670
> 
> 标签：xslt, if-statement

这应该不难，但是 XSL 文档并不是特别友好，因为涉及到这些事情：

我正在尝试转换具有以下标签的文档：

```
<Region>string</Region>
<Region class="unknown">string</Region> 
```

我已经处理了前一个案例

```
<xsl:for-each select="region">
<tags>
</xsl:for-each> 
```

但是，对于 class="unknown" 条件，我需要 if-else 语法。

介意提供一个新手示例来说明如何处理这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:58:15.160

与其使用**xsl:for-each**和**xsl:if**或**xsl:choose**，另一种方法是使用与**xsl:apply-templates**匹配的模板。

```
<xsl:apply-templates select="Region" /> 
```

然后你有（至少）两个单独的模板来匹配**区域**元素。

```
<xsl:template match="Region[@class='unknown']">
    <!-- Do something -->
</xsl:template>

<xsl:template match="Region">
    <!-- Do something else -->
</xsl:template> 
```

请注意，在这种情况下，XSLT 处理器应始终首先匹配更具体的模板（检查@class 属性的模板），因此第二个模板将仅匹配没有此类属性的**区域**元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:55:50.100

XSLT 中 if-else 的最直接模拟是通过 choose-when-otherwise 提供的：

```
<xsl:choose>
    <!-- if -->
    <xsl:when test="@class= 'knownClass'">
       <!-- Do something -->
    </xsl:when>

    <!-- else if -->
    <xsl:when test="@class= 'unknown'">
       <!-- Do something else -->
    </xsl:when>

    <!-- else -->
    <xsl:otherwise>
       <!-- Default case -->
    </xsl:otherwise>
</xsl:choose> 
```

与 if-else 语句一样，an`<xsl:choose>`可以有 1 个或多个`<xsl:when>`s，而 the`<xsl:otherwise>`是可选的。

在你的情况下，你可以把它放在里面`<xsl:for-each>`：

```
<xsl:for-each select="region">
   <xsl:choose>
       ...
   </xsl:choose>
</xsl:for-each> 
```

# c - 为什么 putchar 打印一些数值而不是我要求它放置的字符？

> ID：14298276
> 
> 赞同：1
> 
> 时间：2013-01-12T21:48:55.863
> 
> 标签：c

当我从输入中获得这些动作时，我试图打印出实际的 \t 和 \b。

```
 int main()

    {

        int input, specialChar;

        while ((input = getchar()) != EOF)

            specialChar = 0;

        {

            if (input == '\t')

            {
                putchar('\\');
                putchar('t');  
                specialChar = 1;
            } 
```

是 putchar('t'); 不应该打印出“t”？

```
 if (input == '\b')

        {
            putchar('\\');
            putchar('b');
            specialChar = 1;

        }

        if (specialChar == 0)

            putchar(input);

    }

    return 0;
} 
```

你能告诉我为什么我得到“\377”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:52:46.043

因为你的循环是：

```
 while ((input = getchar()) != EOF)
        specialChar = 0; 
```

然后，当您退出循环时，您可以：

```
 {

        if (input == '\t')

        {
            putchar('\\');
            putchar('t');  
            specialChar = 1;
        } 
```

这意味着您可以：

```
 if (specialChar == 0)
        putchar(input); 
```

在输入中带有“EOF”，作为一个字符，分别是十六进制、十进制和八进制的 0xff、255 或 0377。

移动你的牙套，让它覆盖整个循环！

# java - 在嵌套的 Foreach 循环中确定当前对象是否相同

> ID：14298277
> 
> 赞同：2
> 
> 时间：2013-01-12T21:48:57.503
> 
> 标签：java, arraylist, foreach, comparison, equality

我正在尝试确定`foreach`嵌套在另一个 foreach 循环内的循环中的当前对象是否都在`ArrayList`迭代相同的对象，它们当前是否都在对同一个对象进行迭代。由于 foreach 循环的约定，似乎没有一种简单的方法可以获取 ArrayList 中对象的当前索引，以便能够比较当前对象是否相等。`continue`本质上，如果两个 foreach 循环当前都在迭代同一个对象，我想在内部 foreach 循环中覆盖当前对象。

例如，给定一个`ArrayList<Object>`命名`objects`：

```
for (Object a : objects) {

    for (Object b : objects) {

        //If both loops are currently iterating over the same object
        //from the ArrayList objects, skip to the next iteration of the inner
        //foreach loop
        if (a == b) {

            continue;

        }

        //If both foreach loops are not iterating over the same object
        //execute some operation

    }

} 
```

是使用`==`运算符来测试当前正在迭代的两个对象是否是同一个可靠对象，还是简单地使用常规`for`循环并根据它们的索引比较对象更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:54:34.300

`==`在这种情况下比较对象是可以的，**但前提是您没有将同一个对象多次放入列表中**。如果您在多个位置的列表中有相同的对象，那么这是不行的，您应该使用标准 for 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:14:45.307

如果将同一对象添加到`ArrayList`多次`==`相等比较中，则可能会产生不希望的结果。检查您是否没有比较相同的索引项`ArrayList`（即：您当前位于 2D 矩阵的对角线上）

**考虑一下：**

```
Iterator<Object> outerIterator, innerIterator;
outerIterator = objects.iterator();
for (int i=0; outerIterator.hasNext(); ++i) {
    a = outerIterator.next();
    innerIterator = objects.iterator();
    for(int j=0; innerIterator.hasNext(); ++j) {
        b = innerIterator.next();
        //comparing for elements for SAME index of iteration
        //NOT comparing for element equality
        if(i==j) { continue; } 
        // else do stuff with a & b
    }
} 
```

**等效地：（**我认为更漂亮）

```
int i=0;
for (Object a : objects) {
    int j=0;
    for (Object b : objects) {
      //comparing for elements for SAME index of iteration
      //NOT comparing for element equality
      if (i==j) { continue; }
      //else do stuf with a & b
      ++j;
    }
    ++i;
} 
```

**总结：**

如果要检查浅等式，请使用`a==b`.

如果要检查深度相等，请使用`a.equals(b)`.

如果要检查索引是否相等，请使用`i==j`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:54:52.947

我会这样做：

```
for (Object a : objects) {

    for(int i = 0; i < objects.size(); i++) {

        if(a.equals(objects.get(i)) {

            continue;
        }

    }

} 
```

在我看来，这是他最简单的方法。

# php - html表单发布方法到头部分的php

> ID：14298279
> 
> 赞同：-1
> 
> 时间：2013-01-12T21:49:26.943
> 
> 标签：php, html, post

我只是在为我的网上商店试验一些数据库。现在我尝试通过管理页面将产品添加到我的数据库中。我有这个：

```
<?php
function test(){the code}
?> 
```

在正文中，我有一个表格：

```
<form action="test()" method="post">
</form> 
```

这可能与xHTML有关吗？如果不是最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:52:18.730

如果您想使用 PHP 和表单提交数据，只需使用以下示例：

```
<?php
if(isset($_POST['submit'])){
$myvar = $_POST['myvar'];
echo $myvar;
}
?>
<form action='' method='POST'>
<input type='text' name='myvar'>
<input type='submit' name='submit'>
</form> 
```

现在，如果您想在 javascript 函数中使用该数据，请尝试。

```
<script type="text/javascript">
function myfunction(){
var MyData = document.getElementById('myvar').value;
}
</script>
<form action='' method='POST'>
    <input type='text' id='myvar'>
    <input type='submit' onClick='myfunction()' id='submit'>
    </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:11:52.693

您还可以将 GET 参数添加到操作路径以确定必须执行哪个函数。

```
<form action="process.php?function=test" method="post">
</form> 
```

在 process.php 你可能有这样的东西：

```
<?php

    switch(@$_GET["function"])
    {

        case "test":
        test();
        break;

        case "test2":
        test2();
        break;

    }

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:55:31.863

在 action 属性中，您必须指定 php 文件名而不是函数，例如：如果您有：

```
<?php
function test(){the code}
?> 
```

你必须调用函数：

```
<?php
    function test(){the code}
     test();
    ?> 
```

假设这段代码在 databaseOp.php 中，您必须在 html 文件中相应地设置 action 属性：

```
<form action="databaseOp.php" method="post">
</form> 
```

当您点击提交时，databaseOp.php 脚本将运行，当然其中的 test() 函数将运行。

# backbone.js - Meteor 应用程序中未定义主干

> ID：14298281
> 
> 赞同：1
> 
> 时间：2013-01-12T21:49:55.070
> 
> 标签：backbone.js, meteor

我一直在开发 Meteor 应用程序，并希望通过 Backbone 的路由功能添加多页功能。但是，当我这样做时：

```
meteor add backbone
meteor add underscore 
```

然后尝试在应用程序中创建一个简单的“hello World”，它会因消息而崩溃：

```
ReferenceError: Backbone is not defined
at app/backbone.js:33:2
at run (/Users/timj/Documents/backbone/.meteor/local/build/server/server.js:142:63)
at Array.forEach (native)
at Function._.each._.forEach (/usr/local/meteor/lib/node_modules/underscore/underscore.js:79:11)
at run (/Users/timothyjaeger/Documents/backbone/.meteor/local/build/server/server.js:142:7)
Exited with code: 1 
```

不知道我做错了什么，因为我已经在我的流星应用程序中添加了主干！js看起来像这样：

**骨干测试app.js**

```
if (Meteor.isClient) {

      var AppView = Backbone.View.extend({
      // el - stands for element. Every view has a element associate in with HTML content will be rendered.
      el: '#container',
      // It's the first function called when this view it's instantiated.
      initialize: function(){
        this.render();
      },
      // $el - it's a cached jQuery object (el), in which you can use jQuery functions to push content. Like the Hello World in this case.
      render: function(){
        this.$el.html("Hello World");
      }
    }); 

var appView = new AppView();
}

    if (Meteor.isServer) {
  Meteor.startup(function () {
    Backbone.history.start({pushState: true});
        // code to run on server at startup
      });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:08:07.773

Backbone 是一个客户端框架。您只需通过从 中删除与主干相关的代码`if (Meteor.isServer) {..}`并将其放入`if (Meteor.isClient) {..}`.

如果您使用客户端和服务器文件夹来划分您不需要使用`if (Meteor.isServer) {..}`或的代码`if (Meteor.isClient) {..}`，您只需将主干相关代码放入客户端文件夹中。

我认为 todos 应用程序使用主干，如果没有，请查看如何在客户端使用它的这个问题：

[如何使用 Meteor 创建动态 URL？](https://stackoverflow.com/questions/11656001/how-do-i-create-dynamic-urls-with-meteor)

还有一个名为 meteor 的包`meteor-router`，它也可以在页面之间进行路由，这也可以更舒适地满足您的需求。您可以在以下位置找到更多信息：

[https://github.com/tmeasday/meteor-router](https://github.com/tmeasday/meteor-router)

# java - Android SharedPreferences 似乎不起作用

> ID：14298282
> 
> 赞同：2
> 
> 时间：2013-01-12T21:50:13.747
> 
> 标签：java, android, sharedpreferences

我有一个正在开发的小游戏，我只是在更新分数，但我无法让它正常工作。

注意：我剪切了我的程序片段来展示这里，我有一大堆其他的东西正在设置，但它们根本不涉及“分数”，这就是为什么代码有点*速记*。

**我的代码：**

```
public class Start_Test extends Activity {

TextView total_points;
long new_total;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_three);
    total_points = (TextView) findViewById(R.id.points);
        SharedPreferences pref = getSharedPreferences("Prefs",
                Context.MODE_PRIVATE);
        new_total = pref.getLong("total_points", 0);
        setTouchListener();
    updateTotal(0);

}

public void updateTotal(long change_in_points) {
        SharedPreferences pref = getSharedPreferences("Prefs",
                Context.MODE_PRIVATE);
        new_total = new_total + change_in_points;
        pref.edit().putLong("total_points", new_total);
        pref.edit().commit();
        total_points.setText("" + new_total);

    }

public void setTouchListeners() {

        button.setOnTouchListener(new OnTouchListener() {
            SharedPreferences pref = getSharedPreferences("Prefs",
                    Context.MODE_PRIVATE);

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                updateTotal(25);
                return false;
            }

        });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:53:01.047

我认为这是因为您正在创建一个新的共享首选项 Edit 实例。（当您调用 .edit() 两次并提交未经编辑的版本时）

更改您的代码...

```
 SharedPreferences pref = getSharedPreferences("Prefs",
            Context.MODE_PRIVATE);
    new_total = new_total + change_in_points;
    pref.edit().putLong("total_points", new_total);
    pref.edit().commit(); 
```

到以下：

```
 SharedPreferences.Editor pref = getSharedPreferences("Prefs",
            Context.MODE_PRIVATE).edit();
    new_total = new_total + change_in_points;
    pref.putLong("total_points", new_total);
    pref.commit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T21:54:38.230

每次调用 .edit() 都会创建一个新的编辑器。

改变

```
pref.edit().putLong("total_points", new_total);
pref.edit().commit(); 
```

至

```
Editor editor = prefs.edit();
editor.putLong("total_points", new_total);
editor.commit(); 
```

# maven - 从本地存储库部署所有 3rd 方工件

> ID：14298283
> 
> 赞同：1
> 
> 时间：2013-01-12T21:50:21.593
> 
> 标签：maven, deployment, artifacts

是否可以将所有 3rd 方工件（我在项目中使用的一些外部库）从 ~/.m2/repository 部署到指定的远程存储库？

我知道我可以用一个文件来做到这一点，例如

```
mvn deploy:deploy-file -DgroupId=ZZZ -DartifactId=XXX -Dversion=YYY -Dpackaging=jar -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id] 
```

# c++ - 模板中的成员变量？

> ID：14298295
> 
> 赞同：4
> 
> 时间：2013-01-12T21:52:12.963
> 
> 标签：c++, templates

我正在尝试将成员变量传递给模板。例如，如果我有以下内容：

`struct MyStruct { MyType MyMember; }`

我该怎么做：

`MyType MyVar = MyTemplate<MyStruct, &MyStruct::MyMember, MyType>();`

我试图四处搜索，但没有找到任何可以准确解释如何实现这一目标的东西......对不起，如果这是一个愚蠢的问题，我对 c++ 很陌生......

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T21:54:17.813

这里有一些东西：

```
template< typename Class, typename MemberType, MemberType Class::*Member >
struct my_template; 
```

你可以像这样使用它：

```
my_template< MyStruct, MyType, &MyStruct::MyMember > _; 
```

# java - 如何在 Java 中使用 Lambda 表达式

> ID：14298297
> 
> 赞同：0
> 
> 时间：2013-01-12T21:52:24.363
> 
> 标签：java

如何在带有 JDK7 的 Java 中使用这样的东西（Lambda 表达式）？

```
public virtual IEnumerable<TEntity> Get(Expression<Func<TEntity, bool>> filter = null) 
```

我正在尝试将此方法传递给 where 子句来过滤 select 语句，在 C# 中我可以使用 Lambda 表达式，并且我正在寻找在我的 Java 项目中执行此操作的解决方案。

```
public List<TEntity> Get() {
    List<TEntity> result = emf.createEntityManager().createNamedQuery(ClassName + ".findAll").getResultList();
    return result;
} 
```

这是我的方法，我想在这个方法中传递一个 where 子句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:53:30.460

Lambda 表达式是 Java 8 的一部分（请参阅[JSR 335](http://openjdk.java.net/projects/lambda/)），因此您对 JDK7 不走运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T22:01:09.513

I'm not a C(sharp) person, but isn't that just the equivalent of:

```
Iterable<Entity> get();
Iterable<Entity> get(Expression<Func<Entity, Boolean>> filter); 
```

Follow up to your edit: I don't know the .NET library, but a filtering in Java would look something like:

```
public interface Predicate<T> {
    boolean matches(T obj);
}
...
public List<Entity> get(Predicate<Entity> filter) {
    List<Entity> filtered = new ArrayList<>();
    for (Entity obj : ...blah...) {
        if (filter.matches(obj)) {
            filtered.add(obj);
         }
    }
    return filtered;
} 
```

In the current verbose syntax that would called like:

```
List<Entity> entities = thing.get(new Predicate<>() {
    public boolean matches(Entity obj) {
        return obj.isX() && obj.isY();
    }
}); 
```

A more concise syntax with random changes to semantics should be added in Java SE 8, along with library additions.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-10T10:57:06.410

Lambdas（也称为闭包）是整个 Java 8 版本中最大和最受期待的语言变化。lambda 表达式是一个匿名函数。简单地说，它是一个没有声明的方法，即访问修饰符、返回值声明和名称。

阅读更多[http://www.onsandroid.com/2014/11/java-lambda-expression.html](http://www.onsandroid.com/2014/11/java-lambda-expression.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T21:59:55.737

lamabda-functions 将在 Java 8 中添加。阅读更多： [http ://en.wikipedia.org/wiki/Java_version_history#Java_SE_8](http://en.wikipedia.org/wiki/Java_version_history#Java_SE_8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-16T06:49:16.223

您的问题是：**如何在 Java 中使用 Lambda 表达式？**（使用 JDK 7）

我知道的简单答案是：**匿名的接口和实现。类。**

Lambda 表达式是一种将代码块传递给方法的方法。我们在以前的JDK7及以下版本中也这样做过，
要理解这一点，您需要了解接口和实现匿名类。

现在，为了详细了解示例，我**强烈**推荐本教程，
[Basic Lambda Expressions](https://www.caveofprogramming.com/java/whats-new-in-java-8-lambda-expressions.html)

此链接将让您了解它（传递代码）在 JDK7 及以下版本之前是如何完成的，以及现在 JDK8 是如何完成的

# android - 如何防止 PrismaticJoint 重置为其初始平移限制？

> ID：14298306
> 
> 赞同：1
> 
> 时间：2013-01-12T21:52:55.673
> 
> 标签：android, box2d, andengine

我正在开发一款让玩家围绕行星运行的游戏。我正在使用 PrismaticJoint 让玩家离地球越来越近，并且我通过旋转玩家 (bodyB) 所连接的中心点 body(关节的 bodyA) 来环绕玩家。我通过启用电机并禁用限制来在棱柱轴上移动玩家。但是，一旦我更新并重新启用 PrismaticJoint 的限制，主体就会跳回其原始位置，并且 PrismaticJoint 限制会返回到其原始限制。

我已经尝试过以一百万种不同的方式对其进行调整，并且无论我在重新启用限制*后立即*做什么（并且无论新限制应该是什么），它总是会捕捉到原始限制和位置。我使用 SpriteBody，它是一个扩展 Sprite 并具有主体的类。除了正在应用的新限制之外的所有内容都按预期执行。这是创建 Prismatic Joint 所调用的方法——（请注意 currentThrustJoint 是一个公共字段并且总是可以访问的，就像它是 FixtureDef 一样）

```
// sprite is the SpriteBody that the Player orbits
private void setOrbit(PlanetaryCenter sprite){
    // Get Player (which is a SpriteBody)
    Player player = (Player) resources.get("player");
    // Updated Sprite Body Physics / Rotation
    thrustJointDef = new PrismaticJointDef();

    // Set up the thrustJointDef Correctly

    thrustJointDef.collideConnected = false;
    thrustJointDef.enableMotor = false;
    thrustJointDef.maxMotorForce = 20f;

    thrustJointDef.lowerTranslation = sprite.getBody().getWorldCenter().dst(player.getBody().getWorldCenter());
    thrustJointDef.upperTranslation = sprite.getBody().getWorldCenter().dst(player.getBody().getWorldCenter());
    thrustJointDef.motorSpeed = 5;
    thrustJointDef.initialize(sprite.getBody(), player.getBody(), 
            sprite.getBody().getWorldCenter(), new Vector2(0, 1f));

    // Update focus to the new orbit point
    sprite.isFocus = true;

    // Change currentOrbit to the new orbit point's user data
    currentOrbit = (String) sprite.getUserData();

    currentThrustJoint = (PrismaticJoint) this.mPhysicsWorld.createJoint(thrustJointDef);
    currentThrustJoint.enableLimit(true);
 } 
```

下面是我如何创建 Player，然后是 OrbitPoint。两者都在调用 setOrbit 之前完成。

```
// Create Player Body/Physics
Player player = new Player(400-25, 400 + 400, player_default, getVertexBufferObjectManager());
player.setRotationCenter(player.getWidth()/2, player.getHeight()/2);
player.setBody(PhysicsFactory.createBoxBody(mPhysicsWorld, player, BodyType.DynamicBody, playerFixtureDef));
    mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(player, player.getBody(), true, true));
resources.put("player", player);

....
    // create the orbitpoint for the center
    PlanetaryCenter orbitCenter = new PlanetaryCenter(center_x_old, center_y_old, planet_center, getVertexBufferObjectManager());
    orbitCenter.setRotationCenter(50, 50);
    orbitCenter.setBody(PhysicsFactory.createBoxBody(mPhysicsWorld, orbitCenter, BodyType.KinematicBody, wallFixtureDef));
    mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(orbitCenter, orbitCenter.getBody(), false, true));
    orbitCenter.getBody().setUserData("orbit" + z);

    mScene.registerTouchArea(orbitCenter);
    // store in hashMap
    resources.put(("orbit" + z), orbitCenter);

    // attach the initial center point in the construct to the scene
    mScene.attachChild(orbitCenter); 
```

最后，最重要的位——我在哪里关闭限制，然后在哪里重新打开它：

```
private void setThrust(){ // called when the user taps a thrust key
    Player thisPlayer = (Player) resources.get("player");
    PlanetaryCenter thisOrbit = (PlanetaryCenter) resources.get(currentOrbit);
    thisPlayer.throttling = true;

    currentThrustJoint.enableLimit(false);

    if(ascButton.clicked) currentThrustJoint.setMotorSpeed(5f);
    else currentThrustJoint.setMotorSpeed(-5f);

    currentThrustJoint.enableMotor(true);

}
.... called in TouchListener on Scene...
Player thisPlayer = (Player) resources.get("player");
PlanetaryCenter thisOrbit = (PlanetaryCenter) resources.get(currentOrbit);

thisPlayer.throttling = false;
currentThrustJoint.setMotorSpeed(0);
currentThrustJoint.enableMotor(false);
float newLimit = currentThrustJoint.getJointTranslation(); // intended amt, but it doesn't matter what number it is- never changes
currentThrustJoint.setLimits(newLimit, newLimit);
currentThrustJoint.enableLimit(true);
currentThrustJoint.enableMotor(false); 
```

我知道这很多，但我真的很感激第二次关注这个问题，我花了四天时间试图弄清楚我忽略了什么。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:48:48.197

我在 AndEngine 论坛上问过这个问题，有人说每次你想改变限制时都要尝试破坏和重新创建关节。保存最初创建关节时使用的 JointDef，销毁关节，再次初始化，然后重新创建关节。奇迹般有效！由于我不经常重置限制，因此它的性能似乎不会太高，但是如果您希望创建一个 PrismaticJoint 可以通过更改限制来快速滑动身体，您可能必须尝试另一个关节。（我会说一个 DistanceJoint 或其他东西，但我还没有测试过）

仍然没有关于为什么会发生这种情况的线索，但我想说 PhysicsEngine 在其计算中不承认一些更新的 PrismaticJoint 值。认为这是一个错误。

# r - 从 R 中的数据框创建新的数据列

> ID：14298332
> 
> 赞同：-2
> 
> 时间：2013-01-12T21:55:06.363
> 
> 标签：r, vector, dataframe

以下是一些示例数据：

```
df = data.frame("names" = c("A", "B", "B"),
               "area1" = c(2, 3, 8),
               "area2" = c(2, 4, 7), 
               "area3" = c(5, 7, 1)) 
```

如何将数据框中的某些数据行提取到新的数据列中，以便结果如下所示：

```
result = data.frame("B" = c(3,8)) 
```

换句话说，如何根据“names”列中的“B”值提取“area1”中的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T22:06:33.160

```
df[ df$names=="B", "area1", drop=FALSE] 
```

当您比较 Arun 和我的答案时，您会发现您的问题模棱两可。您的口头描述与 Arun 的一致，您的代码描述与我的一致。His 是一个原子向量；我的是一个数据框。

# .net - IDENT_CURRENT 返回 NULL

> ID：14298335
> 
> 赞同：1
> 
> 时间：2013-01-12T21:55:20.423
> 
> 标签：.net, sql, sql-server, vb.net, sql-server-2008

在我的代码中`DR.HasRows()`返回`True`，但在SQL Management Studio 中工作时`DR("LastID")`返回。`DBNUll``SELECT IDENT_CURRENT ('SiteSection') AS 'LastID'`

```
__SQLString= "SELECT IDENT_CURRENT ('SiteSection') AS 'LastID'"
Dim DR As SqlDataReader
ddConnect() 'It's my custom class that opens a connection to db, it works
DR = ddExecuteReader()
DR.Read()
If DR.HasRows() Then
    GetLastID = DR("LastID")
End If 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T02:47:40.220

我怀疑您的 .NET 应用程序使用的帐户与您用于通过 Management Studio 连接的帐户具有相同的权限。

也就是说，我发现你的方法充其量是有问题的。您打算如何处理来自 的信息`IDENT_CURRENT()`？如果您认为您可以接受并假设您尚未执行的操作`IDENTITY`将产生什么价值，请再想一想。`INSERT`有几个因素可以使该假设无效 - 有人可以同时重新设定身份，或更改增量，或插入一堆行。

所以我建议你重新考虑你到底需要做什么以及为什么你认为`IDENT_CURRENT`是这样做的方法。根据您的评论，您应该发送：

```
INSERT ... ; SELECT LastID = SCOPE_IDENTITY(); 
```

现在您可以确定这是您插入的 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T22:06:44.810

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms175098.aspx)：

> 在 SQL Server 中，用户只能查看用户拥有或已被授予权限的安全对象的元数据。**这意味着如果用户对对象没有任何权限**，则生成元数据的内置函数（如 IDENT_CURRENT）可能会返回 NULL 。

你可能会觉得这很有趣：

> 当 IDENT_CURRENT 值为 NULL 时（因为表从未包含行或已被截断），IDENT_CURRENT 函数返回种子值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T22:05:00.490

检查这个.. [Ident_Current 在 SQL 2005 上返回 NULL](https://stackoverflow.com/questions/779337/ident-current-returning-null-on-sql-2005)

> 要使用 ident_current 或任何其他函数来获取最后一个身份，用户需要具有读取元数据的权限，因此它需要该数据库上的**db_onwer**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-29T10:48:37.563

如果它返回 null 因为在使用以下代码之前没有插入任何行，它假定种子值为 1：

```
 SELECT COALESCE((SELECT top(1) IDENT_CURRENT('TableName')),0) +1 as NextId 
```

# dart - Dart 异步单元测试

> ID：14298336
> 
> 赞同：1
> 
> 时间：2013-01-12T21:55:23.873
> 
> 标签：dart

我正在尝试将以下 Node.js 测试转换为 Dart：

```
var fs = require('fs');
exports.asyncTest = function(test){
  fs.stat('test.txt', function(err, stats) {
    test.expect(2);
    test.strictEqual(err, null);
    test.notStrictEqual(stats.size, 0);
    test.done();
  })
}; 
```

到目前为止，我有：

```
import 'package:unittest/unittest.dart';
import 'dart:io';

main() {
  test('File is not empty', () {
    var stats = new File('test.txt').length().then(
      expectAsync1((v) {
        expect(v, isNot(0));
      }));
  });
} 
```

这可行，但我希望测试失败而不是在找不到文件时终止。这是如何实现的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T11:36:45.513

您可以在 File 上使用 exists() 方法。File.exists() 返回一个 Future<bool>，所以做这样的事情。

```
main(){
  test('File Exists, and is not empty', () {
    var f = new File('test.txt');
    f.exists().then(expectAsync1((v) {
      expect(v, true);
      if (v)
        f.length().then(expectAsync1((l) => expect(l, isNot(0))));
    }));
  });
} 
```

当然，如果它被分成两个测试会更漂亮。一个“文件存在”和一个“文件不为空”，后者仅在第一个通过时运行。但是我对 unittest 库的研究还不够，无法了解如何使测试相互依赖。

# android - 如何使 RSS 提要在 android 中每天只显示一项

> ID：14298339
> 
> 赞同：0
> 
> 时间：2013-01-12T21:55:50.453
> 
> 标签：android, parsing, listview, xml-parsing

我有一个 Rss 提要，我正在将其解析为列表视图。我想让这个应用程序每天只显示一个项目。例如，当用户登录应用程序时，我希望他们只从列表视图中看到第一天的项目，然后当他们在第二天登录时，他们将在列表视图中看到第一天和第二天。我将如何实现这一目标？这是我为此使用的代码

主要活动

```
 public class AndroidXMLParsingActivity extends ListActivity {

// All static variables
static final String URL = "http://www.cpcofc.org/devoapp.xml";
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_ID = "item";
static final String KEY_NAME = "title";
static final String KEY_COST = "description";
static final String KEY_DESC = "description";

ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_COST, parser.getValue(e, KEY_COST));
        map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_DESC, KEY_NAME, KEY_COST}, new int[] {
                    R.id.desciption, R.id.name, R.id.cost});

    setListAdapter(adapter);

    Collections.reverse(menuItems);

    // selecting single ListView item
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.cost)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(KEY_NAME, name);
            in.putExtra(KEY_COST, cost);
            startActivity(in);

        }
    });
}
 } 
```

RSS 解析器

```
 public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }
 } 
```

这是视图现在的样子

![在此处输入图像描述](../Images/97531f1bdcc955dba67816766a2cad76.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:06:32.957

Store the day when they first login in a preference (or some other on disk storage). When you load the data into the array list, find out how long its been since that first login by using standard date functions, and only add that many items to the list.

# javascript - 如何限制javascript中函数的执行时间？

> ID：14298344
> 
> 赞同：11
> 
> 时间：2013-01-12T21:56:55.870
> 
> 标签：javascript, eval, execution, abort, time-limiting

情况是：

用户编写了一些 js 代码，它应该在一些数据上运行（本地）。

但有时会有无限循环或递归调用……这就是为什么我需要限制函数的执行时间而不是编辑函数本身（即使这样——我应该在每个序列点之后插入检查吗？但是递归调用呢？ )

这个奇怪的问题还有其他解决方案吗？也许 eval 可以给出一些代码的解析树或类似的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T22:02:35.310

A possible solution is using [Web Workers](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers). A web worker is started in a separate thread and can be terminated.

```
var worker = new Worker('my_task.js');
...
worker.terminate(); 
```

Downside is that [not all browsers support](http://en.wikipedia.org/wiki/Web_worker) Web Workers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T22:00:31.550

这是在浏览器中还是在节点中？

在浏览器中，您可以将代码放在 0 秒`setTimeout`内以释放运行循环（并暂时解除对浏览器的阻塞）

```
setTimeout(function() {
   // your code here
}, 0) 
```

node 有一些更漂亮的东西，看起来像这样并且稍微好一点：

```
process.nextTick(function() {
   // frees up the run loop even faster
}); 
```

# ruby - 非常高的基数和时间序列数据，使用什么数据库？

> ID：14298354
> 
> 赞同：2
> 
> 时间：2013-01-12T21:58:18.240
> 
> 标签：ruby, time-series

我有一个系统，每天添加大约 250,000 条记录，然后允许用户对其执行实时分析。除了一个字段——短语外，系统表现良好。该字段是我们从文档中提取的有趣短语。基本上根据定义，它具有巨大的基数。因此，当我尝试生成前 10 名列表时，性能会停止。

所以我正在寻找替代品。

有没有人用过石墨做这样的事情？RRD工具？其他解决方案？

# javascript - 从 JS 外部访问 Angular 对象的函数

> ID：14298361
> 
> 赞同：5
> 
> 时间：2013-01-12T21:59:05.867
> 
> 标签：javascript, scope, angularjs

我正在使用 AngularJS 框架构建一个 HTML 应用程序。我有一些遗留的 JavaScript 操作需要访问 Angular 对象中的函数，但我无法让它工作。
这是 Angular 对象（我需要访问的功能是`$scope.info()`）：

```
function content($scope) {
    $scope.info = function (id) {
        console.log('Got a call from '+id);
        $scope.text = "Hello, "+id;
    };
} 
```

我试图通过 访问它`angular.element('content').scope().info('me')`，但没有结果（控制台说`undefined`）。我试图转储 的结果`angular.element('content').scope()`，我得到了完整的对象列表和所有内容。从理论上讲，我的第一个示例应该可以工作，但事实并非如此。

非常感谢任何关于我如何实现这一目标的指导！
[^(（PS：[从遗留代码调用 Angular JS](https://stackoverflow.com/q/10490570/267892)没有解决这个问题）。)]

* * *

当我终于能够访问该函数时，它并没有按预期工作—— 的值在`$scope.text`技术上*被*修改了，但 HTML 中使用的表达式没有更新！例如，`<p>{{text}}</p>`从外部函数调用此函数后不会更新。

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-12T22:21:07.200

`angular.element()`需要一个**DOM 元素**，所以如果你有这个 html：

```
<div ng-controller="content">
</div> 
```

并且您想访问其 DOM 元素，请使用 id：

```
<div id="myDiv" ng-controller="content">
</div> 
```

然后

```
angular.element($('#myDiv')).scope().info('me') 
```

或者没有 jQuery：

```
angular.element(document.getElementById('myDiv')).scope().info('me') 
```

应该管用。

**编辑：**

如果您更改了范围内的某些内容，您可能需要使用[$apply()](http://docs.angularjs.org/api/ng.$rootScope.Scope#$apply)：

```
angular.element(document.getElementById('myDiv')).scope().$apply(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T23:56:28.520

对我来说，我试图从回调（在另一个窗口中）访问/设置角度的值；解决方案是使用 jQuery 的`data`方法。`data`API 允许您将对象文字附加到 DOM 节点。因此，我没有使用诸如全局变量之类的东西（这也可以），而是执行以下操作：

```
/**
 * Listen to a global "lookupTemplate" event
 */
$j(document).on("lookupTemplate", function(event, template) {
        $j(document).data("template", template);
        window.open("/callbackURL", 'Callback Window', 'status=0,toolbar=0,height=230,width=358');
    });

/**
* Callback from other window, to change template ID and name (it's global)
* @param {String} template_id the ID for the selected template from the other window
* @param {String} template_name the name for the selected template from the other window
*/
function templateChosen(template_id, template_name) {
    var template = $(document).data("template");
    var appendedSelector = "[" + template.index + "]";
    $('[name="templateId' + appendedSelector + '"').val(template_id);
    $('[name="templateName' + appendedSelector + '"').val(template_name);
    // Update angular vars just in case
    template.id = template_id;
    template.name = template_name;
}

var app = angular.module("app", []).controller("ActionsController", function($scope) {
        $scope.actions = [];
        $scope.lookupTemplate = function(index) {
            $scope.actions[index].template.index = index;
            $(document).trigger("lookupTemplate", $scope.actions[index].template);
        }
    }
); 
```

我使用 Angular 中包含的helper增加`name`每个 new 的属性。`action``{{index}}`

# wpf - 在 WPF 中完成动画时如何将模型动态添加到视口？

> ID：14298363
> 
> 赞同：1
> 
> 时间：2013-01-12T21:59:33.517
> 
> 标签：wpf, animation, 3d, storyboard

我`StoryBoard`以前在 WPF 中做动画，我`DoubleAnimation`在其中使用了多个`StoryBoard`。我想在`DoubleAnimation`完成后添加一些模型。我尝试使用`DoubleAnimation.Completed`事件，但仅在整个`StoryBoard`完成时才触发。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:17:21.317

如果您还没有，请添加到您的视图的代码隐藏：

```
using System.Windows.Media.Media3D; 
```

然后添加（假设您`Viewport3D`的名称为“mainViewport”：

```
void AddModel(GeometryModel3D mod)
{
    mainViewport.Children.Add(new ModelVisual3D() { Content = mod });
} 
```

并在您想添加模型时调用。

# xml - XML 外部实体 DTD 的 PEReference 错误

> ID：14298366
> 
> 赞同：1
> 
> 时间：2013-01-12T21:59:48.340
> 
> 标签：xml, import, entity, external, doctype

我有这个 XML 代码声明一个外部 DTD 实体：

```
<!DOCTYPE customers [
 <!ENTITY % itemCodes SYSTEM "codes.dtd">
 %itemCodes;
]> 
```

*这只是从codes.dtd*调用一些预先编写的代码：

```
<!ENTITY DCT5Z "Tapan Digital Camera 5 Mpx - zoom">
<!ENTITY SM128 "SmartMedia 128MB Card">
<!-- etc. --> 
```

但我得到这个错误：

```
This page contains the following errors:

error on line 53 at column 8: PEReference: %itemCodes; not found 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:33:12.487

*为什么会这样？*

因为找不到`codes.dtd`文件。如果您没有使用某种基于目录的解析机制，那么它`codes.dtd`必须位于您正在运行的程序的工作目录中。

但是第 53 行的错误似乎很奇怪。对于 DTD 来说，这太过分了。第 53 行是什么样的？

**更新**：重新考虑，问题可能不是`codes.dtd`找不到，而是正在使用的 XML 解析器不处理外部实体。（毕竟，它说找不到 PE 引用本身，而不是它的引用。）这是非验证解析器的一个很常见的限制，但错误诊断可能更有帮助（“对不起，外部不支持实体引用”。）

# php - php mysql Query不工作发布错误

> ID：14298374
> 
> 赞同：0
> 
> 时间：2013-01-12T22:00:30.143
> 
> 标签：php, mysql

我的 php mysql 查询不起作用，或者至少这是我的假设。如果你们可能会注意到我没有看到的东西，将不胜感激。谢谢！

以下是我收到的错误：

```
Notice: Trying to get property of non-object in D:\
Fatal error: Call to a member function free() on a non-object in D:\ 
```

我有 9 个带有 varchar 的列：

```
Part Number,Alternate Partnumber,Qty,
Description,Part Condition Code,Price,
Location,Barcode,Consignment 
```

我创建了一个搜索栏，我希望客户能够输入零件编号，它会找到该零件编号及其行中的所有信息。

我正在使用Luke Welling 和 Laura Thomson 的*Php 和 Mysql Web 开发*，所以我使用的部分代码来自一章。

这是代码：

```
<?php
    //create short variable names
    $searchtype = "Part Number";
    $searchterm = $_POST['searchterm'];

    //echo "$searchtype";
    //echo "$searchterm";

    if(!$searchtype || !$searchterm)
    {
        echo 'You must enter a part number please try again';
        exit;
    }

    if(!get_magic_quotes_gpc())
    {
        $searchtype = addslashes($searchtype);
        $searchterm = addslashes($searchterm);
    }

    @ $db = new mysqli('localhost', 'username', 'password', 'partstest');

    if(mysqli_connect_errno())
    {
        echo 'Error: Could not connect to database. Please try again later.';
        exit;
    }

    //$query = "SELECT $searchterm * FROM inventory WHERE Part Number";
    $query = "select * from inventory where " .$searchtype. " like '%".$searchterm."%'";

    $result = $db->query($query);
    //$result = mysqli_query($db, $query);

    $num_results = $result->num_rows;
    //$num_results = mysqli_num_rows($result);

    echo "<p>Number of books found: ".$num_results."</p>";

    for($i = 0; $i < $num_results; $i++)
    {
        $row = $result->fetch_assoc();
        //$row = mysqli_fetch_assoc($result);
        echo "<p><strong>".($i+1).". Part Number: ";
        echo htmlspecialchars(stripslashes($row['Part Number']));
        echo "</strong><br /> Alternate Part Number: ";
        echo stripslashes($row['Alternate Part Number']);
        echo "<br />Qty: ";
        echo stripslashes($row['Qty']);
        echo "<br />Description: ";
        echo stripslashes($row['Description']);
        echo "<br />Part Condition: ";
        echo stripslashes($row['Part Condition']);
        echo "<br />Price: ";
        echo stripslashes($row['Price']);
        echo "<br />Location: ";
        echo stripslashes($row['Location']);
        echo "<br />Barcode: ";
        echo stripslashes($row['Barcode']);
        echo "<br />Consignment: ";
        echo stripslashes($row['Consignment']);
        echo "</p>";

    }

    $result->free();
    //mysqli_free_result($result);
    $db->close();

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:14:28.130

您能否发布以下代码的输出：

```
var_dump(get_object_vars($result)); 
```

似乎您的 $db 由于放错了@而为空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:14:33.227

你的 "$db"-object 似乎是空的，因为你写了这个：

```
@ $db = new mysqli('localhost', 'username', 'password', 'partstest'); 
```

但是 @ 在这里是错误的，你也应该查看错误[php-doc](http://php.net/manual/de/mysqli.error.php)并对你的对象做一些“回声”，看看它们是假的还是空的

# algorithm - 与 STL 实现相比，自平衡 BST 的自定义实现可以做什么？

> ID：14298378
> 
> 赞同：1
> 
> 时间：2013-01-12T22:00:47.990
> 
> 标签：algorithm, data-structures, binary-search-tree

例如，我知道我可以很容易地对每个节点进行排名或仅通过将每个节点增加一个大小值来获得 k 阶统计信息。与 C++ STL 集这样的语言实现相比，您还能获得哪些其他好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:27:19.297

编写自己的 BST 有很多优点。

正如您在回答中提到的，您可以扩充 BST 以在每个节点中存储额外信息，这些信息在旋转下保留。这可用于构建区间树、链接/切割树等，否则这些是黑盒标准容器无法完成的。

此外，编写自己的树可以让你改变它的平衡方式。例如，如果您知道与查找相关的插入和删除操作很少，您可以使用 AVL 树而不是红/黑树，因为这些树的高度较小。如果您知道您将拥有一个非统一的访问模式并且只有一个线程，那么您可以使用展开树。或者，如果您知道整体运行时是最重要的并且想要进行多线程查找，您可以尝试编写一个替罪羊树。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:29:56.910

如果您实现自己的数据结构，则必须对其进行编码，测试它是否正确，并确保您的实现是有效的。
这已经在 STL 组件中得到了注意，因此您更愿意重用现有的实现而不是自己重新发明轮子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-05T17:17:57.277

这取决于你的用途。就像如果您不想在预定义的 stl 容器中进行自定义更改，那么最好使用 stl 容器，因为构建已经构建的代码是浪费时间。
但是外汇，如果你想实现二叉树，它通过检查字符在哪里插入（左或右）来获取输入，那么那时你已经构建了自己的 BST 代码。

# ios - Why do I have to remove added subviews for UITableViewCell but not in a Subclass of UITableViewCell?

> ID：14298379
> 
> 赞同：0
> 
> 时间：2013-01-12T22:00:58.887
> 
> 标签：ios, view, uitableview, tableview, subview

So I was adding labels and such to my UITableViewCell and when I added the subviews, I learned I needed to remove them or else they would remain glitchy...

I can understand that, but now when I am using a custom cell class, I no longer have to remove the added subviews. Why is this?

I simply initialized the label in the my custom cell class's init method, with a custom frame (not through IB).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:31:19.117

我怀疑你留下了一个额外的参考。请注意，[[foo alloc] init] 返回一个带有 +1 的 ref，添加子视图会增加一个 ref。

使用 addsubview 的正常方法是像这样传递它自动释放的引用（示例）。

```
[cell addSubview:[UILabel label:args]]; 
```

或者这个（例子）：

```
[cell addSubview:[[[Foo alloc] init] autorelease]]; 
```

# php - MySQL PDO 行数

> ID：14298388
> 
> 赞同：1
> 
> 时间：2013-01-12T22:01:59.693
> 
> 标签：php, mysql, pdo

> **可能重复：**
> [PHP PDO - Num Rows](https://stackoverflow.com/questions/2700621/php-pdo-num-rows)

我正在使用 PDO 和 MySQL，而且我对 PDO 还很陌生。

那么有两个问题吗？

1.  我使用什么函数来计算基于选择找到的行数？
2.  我使用什么函数来计算受插入/删除/更新影响的行数？

根据文档，它说：

> 如果关联的 PDOStatement 执行的最后一条 SQL 语句是 SELECT 语句，则某些数据库可能会返回该语句返回的行数。但是，不能保证所有数据库都具有此行为，并且不应依赖于可移植应用程序。

话虽这么说，我应该用什么来做这些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T22:14:28.613

1.  为了保证基于选择的行数正确，您需要使用 PDO::query() 和 SELECT COUNT(*) 语句。然后使用 PDOStatement::fetchColumn() 检索将返回的行数。
2.  对于插入/更新/删除，您可以使用 PDOStatement::rowCount()

有关更多信息，请查看[PHP 手册](http://php.net/manual/en/pdostatement.rowcount.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T22:06:44.140

`$stmt->rowCount()`将返回查询返回的行数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T22:05:51.767

所需的功能是`rowCount()`. 用法[在这里](http://php.net/manual/en/pdostatement.rowcount.php)。

# c++ - 在 C++ 中应用寻路算法（塔防）

> ID：14298389
> 
> 赞同：4
> 
> 时间：2013-01-12T22:02:00.600
> 
> 标签：c++, path-finding, flood-fill

我已经实现了洪水填充算法，该算法将 array[15*15] 与路径一起使用，并生成他在填充路径时所采取的步骤队列。tl;博士看起来像这样

```
std::queue <int> f_path;

void Enemy::find_path(int *map, int *grid, int node) {

    if (grid[node] == 1) // colored-grid
        return;
    if (map[node] == 0) // grid with defined map (0 - no path, 1 path)
        return;

    f_path.push(node);
    grid[node] = 1;

    if ((node + 1) % 15 != 0) this->find_path(map, grid, node + 1); // go right
    if (node % 15 != 0) this->find_path(map, grid, node - 1); // go left
    if (node - 15 > 0) this->find_path(map, grid, node - 15); // go up
    if (node + 15 < 15*15) this->find_path(map, grid, node + 15); // go down
} 
```

但是现在我有一系列步骤来填充网格，但我不知道如何应用这些信息让我的对象跟随并从头到尾。我的意思是，一条路径很简单，但如果它像这样分裂（9 是退出）：
0 0 1 0 0
0 1 1 1 0
0 1 0 1 0
0 1 1 1 0
0 0 9 0 0
我将同时拥有队列中的左右路径，所以如果我做一个简单的 go(f_path.front()) 它会做上帝知道什么。我如何过滤它，所以它只会退出然后停止？我不能把头绕在它周围。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:08:58.757

我不知道您的算法的确切内部结构，但是您可以通过将每个节点与为当前路径请求找到的起始节点的最小距离相关联来轻松获得到目的地的最短路径。

以这种方式，每当您找到从同一单元格经过的另一条路径时，如果距离小于存储的路径，则该路径比以前的路径更好，否则您可以忽略它并跳到下一个路径。

通过这种方式，您最终可以拥有多条到达目标的路径，但它们都具有相同的长度（因此您可以只选择其中之一）。到达目标节点后，您可以回溯：对于从目标开始距离*x处的每个节点，搜索距离**x-1*处的邻居。

只是为了让您对我的意思有一个图形化的概念：

![在此处输入图像描述](../Images/23f2af4579286579f76cdc4c09404b02.png)

请注意，这不是最快的解决方案，它仅适用于小型平铺地图，对于较大的平铺地图，您需要比[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)更好的算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T22:25:25.150

迪斯，我会说你走在正确的轨道上！

现在，您的代码将简单地遍历所有内容并且无处可去。你忘记了几件事。
首先，`Enemy::find_path`必须返回一个布尔值：它是否到达目的地。所以，在顶部你有

```
if (grid[node] == 1) // colored-grid
    return;
if (map[node] == 0) // grid with defined map (0 - no path, 1 path)
    return; 
```

我注意到第一个是防止它回溯到自身之上。
第二个很清楚：它撞到了墙上。因此，必须`return false`在它之后表明它已经走到了死胡同。但是您需要第三个，这样，如果它到达目的地，它就会返回 true。

然后，当您调用四向迭代时，测试它们是否返回`true`。如果他们`return true`在达到目标后再次这样做，则搜索、查找并拉回源头！

请注意，*压缩回源*部分，因为那是您可以使用的部分。现在，您的队列将到处都是随机垃圾。走错路后它不会空。然而，这个后拉部分是完美的——而不是队列，使用堆栈，一旦到达目的地，在拉回堆栈时推送每个节点，从而提供从头到尾的完整路径！

希望我能帮忙;-)

编辑：好的，所以我必须提到一件更重要的事情：工作，但效率低下的路径。
你的算法*会*找到*一条*路径，但并不总是*最短*的路径——事实上，有时它甚至会找到一条*很长的*路径。幸运的是，解决这个问题有点简单。首先，您需要有目的地的坐标。然后，在`find_path`函数的每次迭代中，重新排序方向迭代器。首先你选择右，然后左，然后上，然后下。相反，看看哪个方向会朝着目标的方向前进。然后检查那个方向。如果失败，请尝试下一个最接近的。如果失败，则尝试下一个最近的，以及下一个最近的（嗯，现在是最远的）。

是的，我知道这不会是*最短*距离，因为它通常倾向于靠墙，但绝对比完全随机的方向要好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T22:26:18.307

在您获得的最终网格上进行深度优先搜索 (dfs)。

[http://en.wikipedia.org/wiki/Depth-first_search](http://en.wikipedia.org/wiki/Depth-first_search)

您将获得单独的路径。如果你想选择最短的，你可以做的优化很少。

*   保持最大限制，如果 dfs 看起来比这更远，请跳过该路径。
*   如果您找到长度小于最大限制的路径。将最大限制设置为。

希望这会有所帮助。

编辑：我写了这段代码，它应该适合你。它将以向量< pair > 作为 x,y 坐标给出最短路径。

```
#include <iostream>
#include <fstream>
#include <vector>
#include <cstring>

using namespace std;

ifstream fin("map.txt");

int width, height;
int map[10][10];
// Start (x,y), End (x,y)
int sy, sx, ey, ex;

bool visited[10][10];

vector<pair<int, int> > final_path;
int max_size = 9999;

void getInput() {
  fin >> width >>  height;

  for (int i = 0; i < height; i++) {
    for (int j = 0; j < width; j++) {
        int x;
        fin >> x;
        map[i][j] = x; 

        if(x == 8){
          sy = i;
          sx = j;
        }

        if(x == 9){
          ey = i;
          ex = j;
        }
    }
  }
}

void dfs(int x, int y, vector<pair<int, int> > path) {
  if(path.size() > max_size){
    cout << "Returning : path size too big" << endl;
    return;
  }

  if(x < 0 || x >= width || y < 0 || y >= height){
    cout << "Returning : bounds" << endl;
    return;
  }

  // If the tile is blocked, can't go there
  if(map[y][x] == 0){
    cout << "Returning : blocked" << endl;
    return;
  }

  if(visited[y][x]){
    cout << "Returning : visited" << endl;
    return;
  }

  // We don't want to revisit a tile
  visited[y][x] = true;

  cout << "Visiting " << x << " " << y << endl;

  path.push_back(make_pair(x, y));
  if(map[y][x] == 9) {
    final_path = path;
    visited[y][x] = false;
    return;
  }

  dfs(x, y - 1, path);
  dfs(x + 1, y, path);
  dfs(x, y + 1, path);
  dfs(x - 1, y, path);

  visited[y][x] = false;

  return;
}

int main() {

  getInput();
  cout << "Got Input" << endl;
  cout << width << " " << height << endl;

  memset(visited, 0, sizeof(visited));
  vector<pair<int, int> > starting_path;

  cout << sx << " " << sy << endl;

  dfs(sx, sy, starting_path);

  cout << "Path size is " << final_path.size() << endl;

  for(int i = 0; i < final_path.size(); i++){
    cout << final_path[i].first << " " << final_path[i].second << endl;
  }

  return 0;
} 
```

map.txt 包含您在问题中提供的地图。

# ruby-on-rails - Rails：使用部分组织一行：collection

> ID：14298391
> 
> 赞同：1
> 
> 时间：2013-01-12T22:02:19.887
> 
> 标签：ruby-on-rails, math, partial-views

好的，所以我正在渲染部分内容：

```
<%= render :partial => "box", :collection => @dashboard.charts %> 
```

在部分中，我将每个“盒子”组织成 3 行。像这样：

```
if box_counter % 3 == 0 && box_counter != 0
    %></div><div class='row'><%
end 
```

效果很好。

这是我的问题。我把我的数学记下来了，但我不知道如何把它翻译成 Ruby。让我解释。

每个盒子都有一个尺寸。小型、中型和大型。所有尺寸都分配了宽度。20%、30% 和 50%。加起来是 100%。

用户可以在每一行中对这些框进行任何排列。我需要做的是检查行中的框加起来是否为 100%。因此，如果它低于或超过 100%，我将得到差值，将其除以 3，然后在每个框中添加或删除该百分比，从而使每个框加起来为 100%。

例如。用户可以有一个大盒子、大盒子和小盒子的组合。这加起来是 120%。所以我们得到了差值，即 20%，除以 3 = 6.6%，然后将其从 3 个框中删除（因为我们超过了 100%）。这样就变成了：LargeBox = 43.4%，LargeBox = 43.4%，Small Box = 13.4%。这将增加 100%。（或接近哪个很好）。

我一直在用 Ruby 研究这个，只是不知道如何让我的数学进入循环或其他东西。真的被困在这里了伙计们。我将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:29:14.887

我不知道 Ruby，但由于这也被标记为“数学”，所以让我介绍一种稍微不同的数学方法，它可能更容易。

如果总和为 120%（例如），计算 100%/120% 的比率，即为 0.833。然后将 0.833 乘以三个单独的宽度。没有必要以这种方式执行三个不同数量的减法。并且 100%/100% = 1.0，所以同样的过程在任何一种情况下都可以正常工作。

# java - Java - Eclipse JTextField 太大

> ID：14298396
> 
> 赞同：1
> 
> 时间：2013-01-12T22:02:44.243
> 
> 标签：java, swing, jframe, jtextfield, layout-manager

我在 Eclipse 中使用 Window Builder 添加了`JTextField`一个，`JPanel`无论我尝试什么，文本字段都显示如下：

[![截屏](../Images/d30764f8265c8df0d1565c81d4400e63.png)](https://i.stack.imgur.com/deLoa.png)
[（来源：[gyazo.com](http://gyazo.com/f36ebc2ea02d049c7b22fe7301146ccd.png?1358027862)）]

我试图改变首选尺寸，最大和最小尺寸，它仍然看起来像这样。

我该如何解决？我做错了什么？

提前致谢。

**更新**

* * *

**代码：（**全部由 Google 的 Window Builder 自动生成）

```
import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JTextField;
import javax.swing.JTextPane;
import java.awt.Dimension;

public class Main extends JFrame {

private JPanel contentPane;
private JTextField textField;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Main frame = new Main();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public Main() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    contentPane.setLayout(new BorderLayout(0, 0));
    setContentPane(contentPane);

    textField = new JTextField();
    textField.setSize(new Dimension(6, 3));
    textField.setMinimumSize(new Dimension(6, 5));
    textField.setMaximumSize(new Dimension(6, 3));
    textField.setPreferredSize(new Dimension(6, 3));
    contentPane.add(textField, BorderLayout.WEST);
    textField.setColumns(10);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:17:26.730

您可以简单地`FlowLayout`为`JPanel` `contentPane`. 这将尊重组件的首选大小：

删除（或注释掉）：

```
contentPane.setLayout(new BorderLayout(0, 0)); 
```

总是更好地使用布局管理器并避免为组件调用*setXXXSize*方法来调整大小。`getPreferredSize`如有必要，您可以覆盖。

请参阅：[不使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)

# regex - Execute regexp_* functions on Oracle XE 11g

> ID：14298397
> 
> 赞同：0
> 
> 时间：2013-01-12T22:03:10.910
> 
> 标签：regex, replace, oracle-xe

After installing Oracle XE 11g on Windows Vista I am unable to exeute any of the regex functions that come with Oracle. (regexp_replace, regexp_instr etc)

The documentation on features @

[http://docs.oracle.com/cd/E17781_01/license.112/e18068/toc.htm](http://docs.oracle.com/cd/E17781_01/license.112/e18068/toc.htm)

suggests regular expressions are supported.

As system I've viewed all_objects and I cannot see this package.

Does anyone know if there is an additional package install I need to apply ?

# javascript - Google Javascript Custom Search API: Search images by image url

> ID：14298398
> 
> 赞同：4
> 
> 时间：2013-01-12T22:03:11.317
> 
> 标签：javascript, api

I'm have tried to search image by phrase and it's working, but i need to search images by url. I need to find same image, but with larger size.

```
<html>
  <head>
    <title>JSON/Atom Custom Search API Example</title>
  </head>
  <body>
    <div id="content"></div>
    <script>
      function hndlr(response) {
          console.log(response);
      }
    </script>
    <script src="https://www.googleapis.com/customsearch/v1?key={your_developer_key_here}&cx={your_engine_id_here}&q=http://i.ytimg.com/vi/gonBdNO7VbY/hqdefault.jpg&callback=hndlr&imgSize=large&searchType=image">
    </script>
  </body>
</html> 
```

Sorry can't provide dev key, because it has 100 queries limit per day.

There is testing form at the bottom: [https://developers.google.com/custom-search/v1/cse/list?hl=ru](https://developers.google.com/custom-search/v1/cse/list?hl=ru)

I was trying to see what parameter is passed via google image search form.

It's image_url=http://i.ytimg.com/vi/gonBdNO7VbY/hqdefault.jpg , but adding that to api request doesn't give any results.

Is it possible to do such a thing?

# java - libgdx 在 Mac 上抛出异常，无法加载共享库 libgdx-controllers-desktop.dylib

> ID：14298399
> 
> 赞同：4
> 
> 时间：2013-01-12T22:03:25.480
> 
> 标签：java, macos, libgdx

我的 libgdx 有问题。它说：

```
Couldn't load shared library 'libgdx-controllers-desktop.dylib' for target: Mac OS X, 32-bit 
```

有人有建议吗？

完全例外：

```
Exception in thread "LWJGL Application" com.badlogic.gdx.utils.GdxRuntimeException: com.badlogic.gdx.utils.GdxRuntimeException: Error creating controller manager: com.badlogic.gdx.controllers.desktop.DesktopControllerManager
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:113)
Caused by: com.badlogic.gdx.utils.GdxRuntimeException: Error creating controller manager: com.badlogic.gdx.controllers.desktop.DesktopControllerManager
    at com.badlogic.gdx.controllers.Controllers.initialize(Controllers.java:101)
    at com.badlogic.gdx.controllers.Controllers.getControllers(Controllers.java:47)
    at de.datpixelstudio.canopus.states.GameState.init(GameState.java:50)
    at de.datpixelstudio.statebasedgame.StateBasedGame.enterState(StateBasedGame.java:97)
    at de.datpixelstudio.statebasedgame.State.enterState(State.java:54)
    at de.datpixelstudio.statebasedgame.InputHandlerMain.keyDown(InputHandlerMain.java:41)
    at com.badlogic.gdx.InputMultiplexer.keyDown(InputMultiplexer.java:70)
    at com.badlogic.gdx.backends.lwjgl.LwjglInput.processEvents(LwjglInput.java:277)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:187)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:110)
Caused by: com.badlogic.gdx.utils.GdxRuntimeException: Couldn't load shared library 'libgdx-controllers-desktop.dylib' for target: Mac OS X, 32-bit
    at com.badlogic.gdx.utils.SharedLibraryLoader.load(SharedLibraryLoader.java:104)
    at com.badlogic.gdx.controllers.desktop.DesktopControllerManager.<init>(DesktopControllerManager.java:30)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at com.badlogic.gdx.controllers.Controllers.initialize(Controllers.java:99)
    ... 9 more
Caused by: java.lang.NullPointerException
    at com.badlogic.gdx.utils.SharedLibraryLoader.load(SharedLibraryLoader.java:102)
    ... 17 more 
```

它的每晚版本 01/12/2013

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:41:46.220

哦，这导致了问题。我忘了把 gdx-controllers-desktop-natives.jar 放进去。

# linux - 使用 avconv 通过无线接入点将实时音频从在线 (alsa hw:0,0) 流式传输到客户端。

> ID：14298400
> 
> 赞同：7
> 
> 时间：2013-01-12T22:03:31.023
> 
> 标签：linux, streaming, wireless, rtp

我的 Miniand 的 Hackberry（https://www.miniand.com/products/Hackberry%20A10%20Developer%20Board）上安装了 linaro 12.06。

我在hackberry上有无线接入点，带有HACK的ssid

我在hackberry上使用这个命令：

```
avconv -f alsa -ac 1 -i hw:0,0 -acodec mp2 -b 64k -f rtp rtp://10.0.0.1:1234 
```

所以我用我的笔记本电脑连接到hackberry“HACK”，然后我打开终端并输入

```
avplay -i rtp://10.0.0.1:1234 
```

我没有收到任何音频信号。你知道我做错了什么吗？

在朴树上，如果我跑

```
avconv -f alsa -ac 1 -i hw:0,0 -acodec mp2 -b 64k -f rtp rtp://10.0.0.1:1234 
```

并使用新的终端屏幕运行

```
avplay -i rtp://10.0.0.1:1234 
```

我可以很好地听到音频。

我试图避免使用流媒体服务器。

任何人都可以帮忙吗？

谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:01:00.827

我不知道您的网络拓扑，但`10.0.0.1`曾经是默认网关 IP。

RTP 将流发送到特定主机（除非您使用多播）。

所以而不是

```
avconv -f alsa -ac 1 -i hw:0,0 -acodec mp2 -b 64k -f rtp rtp://10.0.0.1:1234 
```

在设备方面，我会使用：

```
avconv -f alsa -ac 1 -i hw:0,0 -acodec mp2 -b 64k -f rtp rtp://{IP of your laptop}:1234 
```

在您的笔记本电脑上：

```
avplay -i rtp://127.0.0.1:1234 
```

我正在以这种方式使用 avconv/avplay。

最好的问候，弗雷德里克

# python - 大熊猫中的 SQL 类连接

> ID：14298401
> 
> 赞同：16
> 
> 时间：2013-01-12T22:03:47.227
> 
> 标签：python, pandas

我有两个数据框，第一个是形式（注意日期是日期时间对象）：

```
df = DataFrame('key': [0,1,2,3,4,5],
               'date': [date0,date1, date2, date3, date4, date5],
               'value': [0,10,20,30,40,50]) 
```

第二个是以下形式：

```
df2 = DataFrame('key': [0,1,2,3,4,5],
                'valid_from': [date0, date0, date0, date3, date3, date3],
                'valid_to': [date2, date2, date2, date5, date5, date5],
                'value': [0, 100, 200, 300, 400, 500]) 
```

而且我正在尝试有效地加入键匹配的位置并且日期在valid_from和valid_to之间。我想出的是以下内容：

```
def map_keys(df2, key, date):
    value = df2[df2['key'] == key & 
        df2['valid_from'] <= date & 
        df2['valid_to'] >= date]['value'].values[0]
    return value

keys = df['key'].values
dates = df['date'].values
keys_dates = zip(keys, dates)

values = []
for key_date in keys_dates:
    value = map_keys(df2, key_date[0], key_date[1])
    values.append(value)

df['joined_value'] = values 
```

虽然这似乎可以完成这项工作，但它感觉并不是一个特别优雅的解决方案。我想知道是否有人对这样的加入有更好的主意。

感谢您的帮助 - 非常感谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-13T22:41:47.677

目前，您可以使用内置[`pandas.merge()`](http://pandas.pydata.org/pandas-docs/stable/merging.html?highlight=sql#database-style-dataframe-joining-merging)和[布尔索引](http://pandas.pydata.org/pandas-docs/stable/indexing.html#boolean-indexing)通过几个步骤完成此操作。

```
merged = df.merge(df2, on='key')

valid = (merged.date >= merged.valid_from) & \
        (merged.date <= merged.valid_to)

df['joined_value'] = merged[valid].value_y 
```

（注意： 的`value`列在合并后`df2`访问，`value_y`因为它与同名的列冲突，`df`并且默认的合并冲突后缀分别`_x, _y`用于左帧和右帧。）

这是一个示例，使用不同的设置来显示如何处理无效日期。

```
n = 8
dates = pd.date_range('1/1/2013', freq='D', periods=n)
df = DataFrame({'key': np.arange(n),
                'date': dates,
                'value': np.arange(n) * 10})
df2 = DataFrame({'key': np.arange(n),
                 'valid_from': dates[[1,1,1,1,5,5,5,5]],
                 'valid_to': dates[[4,4,4,4,6,6,6,6]],
                 'value': np.arange(n) * 100}) 
```

输入`df2`：

```
 key          valid_from            valid_to  value
0    0 2013-01-02 00:00:00 2013-01-05 00:00:00      0
1    1 2013-01-02 00:00:00 2013-01-05 00:00:00    100
2    2 2013-01-02 00:00:00 2013-01-05 00:00:00    200
3    3 2013-01-02 00:00:00 2013-01-05 00:00:00    300
4    4 2013-01-06 00:00:00 2013-01-07 00:00:00    400
5    5 2013-01-06 00:00:00 2013-01-07 00:00:00    500
6    6 2013-01-06 00:00:00 2013-01-07 00:00:00    600
7    7 2013-01-06 00:00:00 2013-01-07 00:00:00    700 
```

中间框架`merged`：

```
 date  key  value_x          valid_from            valid_to  value_y
0 2013-01-01 00:00:00    0        0 2013-01-02 00:00:00 2013-01-05 00:00:00        0
1 2013-01-02 00:00:00    1       10 2013-01-02 00:00:00 2013-01-05 00:00:00      100
2 2013-01-03 00:00:00    2       20 2013-01-02 00:00:00 2013-01-05 00:00:00      200
3 2013-01-04 00:00:00    3       30 2013-01-02 00:00:00 2013-01-05 00:00:00      300
4 2013-01-05 00:00:00    4       40 2013-01-06 00:00:00 2013-01-07 00:00:00      400
5 2013-01-06 00:00:00    5       50 2013-01-06 00:00:00 2013-01-07 00:00:00      500
6 2013-01-07 00:00:00    6       60 2013-01-06 00:00:00 2013-01-07 00:00:00      600
7 2013-01-08 00:00:00    7       70 2013-01-06 00:00:00 2013-01-07 00:00:00      700 
```

`df`添加列后的最终值`joined_value`：

```
 date  key  value  joined_value
0 2013-01-01 00:00:00    0      0           NaN
1 2013-01-02 00:00:00    1     10           100
2 2013-01-03 00:00:00    2     20           200
3 2013-01-04 00:00:00    3     30           300
4 2013-01-05 00:00:00    4     40           NaN
5 2013-01-06 00:00:00    5     50           500
6 2013-01-07 00:00:00    6     60           600
7 2013-01-08 00:00:00    7     70           NaN 
```

# node.js - “导出”上的 Node.js 语法错误“意外令牌”。

> ID：14298409
> 
> 赞同：6
> 
> 时间：2013-01-12T22:05:42.110
> 
> 标签：node.js, express, fb-graph

我一直在尝试学习 node.js。我正在尝试创建一个简单的 node.js web api 和一个 html-javascript 前端以使用 Facebook auth 登录并将 Facebook id 存储在 Mongodb 中。

我可以通过遵循在线提供的教程来做到这一点。

现在我想将代码分离到多个文件中，但是当我尝试创建一个路由“用户”并通过导出公开函数时。我收到以下错误。

```
module.exports.userLogin = function(req,res){
      ^ SyntaxError: Unexpected token .
    at Module._compile (module.js:437:25)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (C:\Users\Saumya\Desktop\vhsharedraft\web.js:2:6)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32) 
```

**编辑#1**

```
module.exports.userLogin = function(req,res){
    graph.setAccessToken(req.session.fb.access_token);

    graph.get("/me", function(err, data) {
        if(err){
            console.log('Error obtaining data.');
            return;
        }
        console.log(data);
    }

} 
```

**编辑#2**

```
var mongo = require('mongodb'),
graph = require('fbgraph');

exports.userLogin = function(req,res){
    graph.setAccessToken(req.session.fb.access_token);

    graph.get("/me", function(err, data) {
        if(err){
            console.log('Error obtaining data.');
            return;
        }
        console.log(data);
    }
} 
```

这就是我在用户路线中的全部内容。实际上，我犯了一个非常愚蠢的错误，我在前面留下了逗号 `graph = require('fbgraph')`而不是分号。修复此语法错误后，我收到此错误。

```
}
^
SyntaxError: Unexpected token }
    at Module._compile (module.js:437:25)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (C:\Users\Saumya\Desktop\vhsharedraft\web.js:2:6)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-12T22:17:04.327

你这里有一个错字：

```
graph.get("/me", function(err, data) {
    if(err){
        console.log('Error obtaining data.');
        return;
    }
    console.log(data);
} 
```

它应该是：

```
graph.get("/me", function(err, data) {
    if(err){
        console.log('Error obtaining data.');
        return;
    }
    console.log(data);
}); /* Note the added parenthesis here */ 
```

也使用`exports.userLogin`代替`module.exports.userLogin`

# html - “高”右雪佛龙的 HTML unicode 字符是什么？

> ID：14298413
> 
> 赞同：61
> 
> 时间：2013-01-12T22:05:56.637
> 
> 标签：html, css, unicode, fonts

我正在寻找一个 unicode 右 V 形字符，左侧没有手柄，我希望顶部和底部分开很远。类似于搜索框中的 Ubuntu（网站）箭头。

我不想要`&raquo;`(») 或`&rarr;`(→) 或只是`>`. 第一个的问题是有两个 V 形，而不仅仅是一个。另一个太小了，有把手。第三个的顶点太尖锐。

我已经查看了几乎所有的 unicode 图表，如果没有，那么我只需要使用一个图像（比如 Ubuntu）。我会处理它，但这是最后的手段。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-01-12T22:12:43.083

采用 '>'

`&rsaquo;`-> 单直角报价。对于单左角引号，使用`&lsaquo;`

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-13T05:18:33.367

从描述和对[Ubuntu](http://www.ubuntu.com/)站点中搜索框的引用中，我推测您实际上想要一个指向右侧的*箭头字符。*没有设计用作箭头的 Unicode 字符，但其中一些可能在视觉上类似于箭头。

特别是如果你在[Shapecatcher.com](http://shapecatcher.com/)上画出你对角色的想法，你会发现很多建议，例如“>”右指向角括号'（U + 232A）和“❭”中型右指向角括号装饰（ U+276D)。

此类字符通常对字体的支持有限，因此您需要仔细编写较长的`font-family`列表或使用可下载的字体。请参阅我[在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

特别是如果预期用途是作为搜索框中的符号，正如对 Ubuntu 页面的引用所暗示的那样，您是否应该使用字符是值得怀疑的。它不是真正的文本元素；而是一个伴随文本但不是文本一部分的图形符号。那么，当它不是一个真正的角色时，为什么要（安全地）使用一个角色呢？

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-05-21T16:40:23.073

我使用 ▸ (0x25B8) 作为右箭头，通常显示折叠列表；我将它与 ▾ (0x25BE) 配对以显示打开的列表。两者都不显眼。

# c++ - 编译错误，“使用未定义的结构”

> ID：14298417
> 
> 赞同：1
> 
> 时间：2013-01-12T22:06:16.093
> 
> 标签：c++, struct

我想前向声明结构的各个部分，因此首先显示“包”结构。我收到“使用未定义结构”的错误，其中“包”中声明了“标头”。编译器（VS2010）肯定会在抛出此错误之前扫描头文件中的定义吗？

```
struct Header;

struct Package
{
    Header header;             <-- "uses undefined struct"

};

struct Header
{
    uint32_t Signature;
    uint8_t MajorVersion;
    uint8_t MinorVersion;
}; 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T22:11:00.413

> 我收到“使用未定义结构”的错误，其中“包”中声明了“标头”。

您不能声明*不完整类型*的成员，因为编译器不知道它有多大以及应该为它保留多少空间（除其他外）。

> 编译器（VS2010）肯定会在抛出此错误之前扫描头文件中的定义吗？

不，是什么让你这么想？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T22:15:56.200

在完全声明之前，您不能使用该类型，因为需要事先知道大小等信息。但是，您可以创建指向这些类型的指针，因为它们不需要此信息。

* * *

有两种方法可以解决这个问题。一个骗子和一个“适当的”。

首先是骗子。您可以对结构进行原型设计，但是，在声明它之前，您只能将结构用作指针。`Header`因此，在声明之前，您不能将其用作值类型。所以欺骗的方式是在运行时替换`Header header;`然后`Header *header;`分配内存。

然而，还有一种更好的方法。

您可以将此单个文件拆分为多个文件，即：`header.hpp`和`package.hpp`，并让它们相互包含。但是，这样做时有一个问题。当标头递归地相互包含时（或者您多次包含相同的标头），类型将一遍又一遍地重新定义。您需要一种只定义一次类型的方法。几乎每次使用标头时都会这样做，方法是用“包含防护”将其括起来。它看起来像这样：

```
#ifndef HEADER_HPP
#define HEADER_HPP

// Header code here

#endif /* HEADER_HPP */ 
```

这样，它们只会被声明一次，但您可以在两个文件中使用这两种类型。

因此，您的`package.hpp`文件将如下所示：

```
#ifndef PACKAGE_HPP
#define PACKAGE_HPP

#include "header.hpp"

struct Package {
    Header header;
};

#endif 
```

你的`header.hpp`遗嘱是这样的：

```
#ifndef HEADER_HPP
#define HEADER_HPP

struct Header {
    uint32_t Signature;
    uint8_t MajorVersion;
    uint8_t MinorVersion;
};

#endif 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T22:08:45.667

当编译器还不知道 Header 到底是什么时，你不能让 Package 包含 Header 类型的东西。您只能拥有指向 Header 的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-19T03:22:57.430

您可以使用指针：

```
struct Package
{
    struct Header *header;
};

struct Header
{
    uint32_t Signature;
    uint8_t MajorVersion;
    uint8_t MinorVersion;
}; 
```

# jsf - FireFox 为通过 HttpServletResponse 下载的文件添加 txt 扩展名

> ID：14298425
> 
> 赞同：1
> 
> 时间：2013-01-12T22:07:26.723
> 
> 标签：jsf

我正在使用`HttpServletResponse`JSF 2.1 包装来制作下载按钮。按照这个答案的说明：[https ://stackoverflow.com/a/9394237/870122](https://stackoverflow.com/a/9394237/870122)

由于我想下载`csv`文件，因此我使用以下标头：

```
FacesContext fc = FacesContext.getCurrentInstance();
ExternalContext ec = fc.getExternalContext();
ec.responseReset();
String fileName = "MyFile.csv";
ec.setResponseContentType("text/plain");
ec.setResponseHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\""); 
```

IE9 和 FF 都成功完成下载，但第二次我看到浏览器添加了我想避免的“.txt”扩展名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:12:12.483

也许您应该尝试将响应内容类型设置为`text/csv`

# c# - 你能告诉我我的实体框架查询有什么问题吗？

> ID：14298429
> 
> 赞同：1
> 
> 时间：2013-01-12T22:07:59.287
> 
> 标签：c#, entity-framework

我正在尝试在 C# 中使用此代码选择成员类型的实体。我正在看一个视频教程，他们也是这样做的，但它对我不起作用。

```
 Member member = new Member();
        var query =  from m in db.Members  where Member.MemberID == textBox1.Text 
        select m;     
        var currentMember =  query.FirstOrDefault();
        string CurrentID = M.MemberID; 
```

没有例外或东西，但我得到所有 currentMember 的属性都是空的。有什么想法可以得到预期的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:18:10.067

我想你可能会在这里混淆你的变量。让我们尝试清理这段代码：

```
var memberQuery = from m in db.Members
                  where m.MemberID == textBox1.Text
                     // ^ you need to reference the MemberID by the query
                     //   variable (m) not the class name (Member).
                  select m;

var member = memberQuery.SingleOrDefault();
                      // ^ when you only expect zero or one records from the
                      //   database, use SingleOrDefault instead of
                      //   FirstOrDefault, because it will throw an exception
                      //   when more than one record is returned.

if (member != null)
 // ^ always check to make sure that the database returned a value before trying
 //   to access any fields on the object.
{
    string currentId = member.MemberID;
}
else
{
    // a member with the given ID doesn't exist in the database
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:21:00.657

问题出在`where Member.MemberID == textBox1.Text`

应该是`where m.MemberID == textBox1.Text`

为什么要创建会员？`Member member = new Member();`

只需从查询中获取成员并从中获取 id。

# javascript - jPlayer 2.2.0: display track title in separate div on page load

> ID：14298432
> 
> 赞同：2
> 
> 时间：2013-01-12T22:08:40.567
> 
> 标签：javascript, jquery, jplayer

I'm working with jPlayer directly since the mp3-jplayer plugin for WordPress broke with the WP 3.5 update, and it seems to be abandoned by the developer.

One of the nice features of the plugin is that it displays the title of the current track in a div above the control bar. Also, if there's only a single song in the playlist, there's a script to hide the playlist, so you only have the track title above the control bar. I'm trying to add this functionality to the regular (non-plugin) jPlayer.

I can display the title in a new div with this code, from the jPlayer forum:

```
$("#jquery_jplayer_1").bind($.jPlayer.event.play, function (event) {
    var current = myPlaylist.current,
        playlist = myPlaylist.playlist;
    $.each(playlist, function (index, obj) {
        if (index == current) {
            $('.jp_current_track_title').text(obj.title);   
        }
    });
}); 
```

However, this does not load the track title when the page loads - it only displays after you press 'play.' Note that when the player loads, the first track in the playlist is highlighted (selected).

So my question is: how can I get the track title to load when the page loads?

Test page is [here](http://bobkarty.pairsite.com/jplayer/jplayer-pl-bk1a.html).

I'm new to javascript/jQuery.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T11:41:39.957

换行：

```
 $("#jquery_jplayer_1").bind($.jPlayer.event.play, function (event) { 
```

至

```
 $("#jquery_jplayer_1").bind($.jPlayer.event.ready, function (event) { 
```

以便在播放器准备好后更新 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T19:55:52.000

Jplayer 还提供了一个就绪事件：`$.jPlayer.event.ready`. 一旦播放器加载，应该可以使用它来做同样的事情。

# python - 将数据转换为分位数 bin

> ID：14298433
> 
> 赞同：15
> 
> 时间：2013-01-12T22:08:44.997
> 
> 标签：python, pandas

我有一个带有数字列的数据框。对于每一列，我想计算分位数信息并将每一行分配给其中一个。我尝试使用该[`qcut()`方法](http://pandas.pydata.org/pandas-docs/dev/groupby.html?highlight=qcut)返回垃圾箱列表，但最终单独计算垃圾箱。我认为可能存在的东西，但我找不到它会像`df.to_quintile(num of quantiles)`. 这是我想出的，但我想知道是否有更简洁/熊猫的方式来做到这一点。

```
import pandas as pd

#create a dataframe
df = pd.DataFrame(randn(10, 4), columns=['A', 'B', 'C', 'D'])

def quintile(df, column):
    """
    calculate quintiles and assign each sample/column to a quintile 
    """
    #calculate the quintiles using pandas .quantile() here
    quintiles = [df[column].quantile(value) for value in [0.0,0.2,0.4,0.6,0.8]]
    quintiles.reverse() #reversing makes the next loop simpler

    #function to check membership in quintile to be used with pandas apply
    def check_quintile(x, quintiles=quintiles):
        for num,level in enumerate(quintiles):
            #print number, level, level[1]
            if  x >= level:
                print x, num
                return num+1

    df[column] = df[column].apply(check_quintile)

quintile(df,'A') 
```

谢谢，扎克cp

编辑：看到 DSM 回答后，函数可以写得更简单（如下）。伙计，真甜。

```
def quantile(column, quantile=5):
    q = qcut(column, quantile)
    return len(q.levels)- q.labels
df.apply(quantile)
#or
df['A'].apply(quantile) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T22:34:53.313

我认为使用`labels`存储在`Categorical`返回的对象内部`qcut`可以使这更简单。例如：

```
>>> import pandas as pd
>>> import numpy as np
>>> np.random.seed(1001)
>>> df = pd.DataFrame(np.random.randn(10, 2), columns=['A', 'B'])
>>> df
          A         B
0 -1.086446 -0.896065
1 -0.306299 -1.339934
2 -1.206586 -0.641727
3  1.307946  1.845460
4  0.829115 -0.023299
5 -0.208564 -0.916620
6 -1.074743 -0.086143
7  1.175839 -1.635092
8  1.228194  1.076386
9  0.394773 -0.387701
>>> q = pd.qcut(df["A"], 5)
>>> q
Categorical: A
array([[-1.207, -1.0771], (-1.0771, -0.248], [-1.207, -1.0771],
       (1.186, 1.308], (0.569, 1.186], (-0.248, 0.569], (-1.0771, -0.248],
       (0.569, 1.186], (1.186, 1.308], (-0.248, 0.569]], dtype=object)
Levels (5): Index([[-1.207, -1.0771], (-1.0771, -0.248],
                   (-0.248, 0.569], (0.569, 1.186], (1.186, 1.308]], dtype=object)
>>> q.labels
array([0, 1, 0, 4, 3, 2, 1, 3, 4, 2]) 
```

或匹配您的代码：

```
>>> len(q.levels) - q.labels
array([5, 4, 5, 1, 2, 3, 4, 2, 1, 3])
>>> quintile(df, "A")
>>> np.array(df["A"])
array([5, 4, 5, 1, 2, 3, 4, 2, 1, 3]) 
```

# php - Mod Rewrite 重复查询

> ID：14298440
> 
> 赞同：0
> 
> 时间：2013-01-12T22:09:36.003
> 
> 标签：php, url, mod-rewrite, url-rewriting

我正在尝试重写一个页面，但我收到了重复的查询。

`http://www.website.com/settings/index.php?page=account`

重写为：

`http://www.website.com/settings/account`

所以我的问题是，当我在我的页面上使用服务器验证时，我重定向到`settings/account?valid=failed`但不幸的是我得到：

`http://www.website.com/settings/account?valid=false&page=account`

这是我的重写代码：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^([A-Za-z0-9-]+)?$ index.php?page=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:29:32.710

错误出现在 php.ini 文件中。mod重写不是问题。

# android - 强制 Android 小部件更新

> ID：14298442
> 
> 赞同：1
> 
> 时间：2013-01-12T22:09:45.297
> 
> 标签：android, android-widget

我一直在努力想通过按下小部件上的按钮来更新我的小部件。该小部件显示当前剩余 RAM、CPU 级别和电池电量。

确定这些值的代码运行良好。当我按下按钮时，我无法让它更新。我试过这些方法：

[强制更新 Android 小部件](https://stackoverflow.com/questions/2748613/force-android-widget-to-update)- 显示两种方法

[Android：如何强制更新特定类型的所有小部件](https://stackoverflow.com/questions/8304387/android-how-do-i-force-the-update-of-all-widgets-of-a-particular-kind)

[android中的可点击小部件](https://stackoverflow.com/questions/2748590/clickable-widgets-in-android/)

和一个警报管理器

他们都没有工作。

我的小部件布局的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"  
    android:layout_width="fill_parent"  
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:background="@drawable/widgetbg">

        <TextView android:id="@+id/widgetCPU"
            android:layout_weight="1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/derp"   
            android:textSize="14sp"
            android:typeface="sans"
            android:textColor="@android:color/holo_blue_bright"
            android:gravity="center"/>

        <TextView android:id="@+id/widgetRam"
            android:layout_weight="1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/derp"   
            android:textSize="14sp"
            android:typeface="sans"
            android:textColor="@android:color/holo_blue_bright"
            android:gravity="center"/>

        <TextView android:id="@+id/widgetBat"
            android:layout_weight="1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/derp"   
            android:textSize="14sp"
            android:typeface="sans"
            android:textColor="@android:color/holo_blue_bright"
            android:gravity="center"/>
        <Button android:id="@+id/widgetUpdate"
                android:layout_weight="1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/button_send" />

    </LinearLayout> 
```

按下按钮时我想调用的方法：

```
 public class AppWidget extends AppwidgetProvider
    {
    //...
         public void update(Context c, AppWidgetManager a)
         { 
          //...
         }
    //...
    } 
```

按下按钮时如何调用更新方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:26:54.563

您可以将 onClickListener 添加到按钮，并从侦听器中调用更新方法。

查看[此链接](http://developer.android.com/reference/android/view/View.OnClickListener.html)以获取有关界面的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T22:31:57.710

注册一个监听器，例如在你的 onCreate() 方法中：

```
 findViewById(R.id.widgetUpdate).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
                        update();
        }
    }); 
```

# python - 将日期列和时间列合并到熊猫数据框中的索引中

> ID：14298447
> 
> 赞同：5
> 
> 时间：2013-01-12T22:10:47.223
> 
> 标签：python, pandas

我在 CSV 文件中有一个日内 30 秒间隔时间序列数据，格式如下：

```
20120105, 080000,   1
20120105, 080030,   2
20120105, 080100,   3
20120105, 080130,   4
20120105, 080200,   5 
```

如何使用这两种不同的索引方案将其读入熊猫数据框中：

1、将日期和时间组合成一个日期时间索引

2、在多索引数据框中使用日期作为主索引，时间作为二级索引

这两种方案的优缺点是什么？一个通常比另一个更可取吗？就我而言，我想查看时间分析，但不完全确定哪种方案更适合我的目的。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T22:54:41.380

1.  将日期和时间组合成一个日期时间索引

    ```
    df = pd.read_csv(io.BytesIO(text), parse_dates = [[0,1]], header = None, index_col = 0)
    print(df)
    #                      2
    # 0_1                   
    # 2012-01-05 08:00:00  1
    # 2012-01-05 08:00:30  2
    # 2012-01-05 08:01:00  3
    # 2012-01-05 08:01:30  4
    # 2012-01-05 08:02:00  5 
    ```

2.  在多索引数据框中使用日期作为主索引和时间作为二级索引

    ```
    df2 = pd.read_csv(io.BytesIO(text), parse_dates = True, header = None, index_col = [0,1])
    print(df2)
    #                   2
    # 0          1       
    # 2012-01-05 80000  1
    #            80030  2
    #            80100  3
    #            80130  4
    #            80200  5 
    ```

* * *

我的天真倾向是更喜欢单个索引而不是多索引。

*   正如 Python 之禅所断言的那样，“平面优于嵌套”。
*   日期时间是一个概念对象。就这样对待它。（对于年、月、日、小时、分钟等，最好有一个日期时间对象而不是多列。同样，最好有一个索引而不是两个。）

但是，我对 Pandas 不是很有经验，在进行时间分析时使用多索引可能会有一些优势。

我会尝试以两种方式编写一些典型的计算，然后根据易于编码、可读性和性能来看看我更喜欢哪一种。

* * *

这是我产生上述结果的设置。

```
import io
import pandas as pd

text = '''\
20120105, 080000,   1
20120105, 080030,   2
20120105, 080100,   3
20120105, 080130,   4
20120105, 080200,   5''' 
```

你当然可以使用

```
pd.read_csv(filename, ...) 
```

代替

```
pd.read_csv(io.BytesIO(text), ...) 
```

# java - 从字符串构造实例并以其类型返回它们的方法？

> ID：14298450
> 
> 赞同：2
> 
> 时间：2013-01-12T22:11:04.250
> 
> 标签：java

给定两个类`A`和`B`一个参数构造函数和一个二进制函数`f`，我需要解析形式的字符串

```
"f(A(10), B(20))"
"f(A(2), A(3))" 
```

创建适当的实例并调用相应的函数：

```
class Functions {
    public static double f(A a1, A a2);
    public static double f(A a, B b);
    public static double f(B b1, B b2);
    // ...
} 
```

所以我正在寻找的是一种方法

```
T createInstanceFromString(String desc); 
```

从“A(10)”或“B(20)”等字符串创建实例。当然，不幸的是，这在 Java 中是不可能的。

非常感谢有关此问题的解决方案的任何建议。

*编辑*：我忘了提到可能有大量不同的类`A`、、`B`等`C`以及大量的函数`f`、`g`等等。我想用它`createInstanceFromString`来将解析与调用分开，否则必须有条件地单独解析对于每个函数调用，都会带来大量的代码重复。

*Edit2*：问题不在于如何解析，而在于如何解析然后以通用方法/工厂/其他方式返回实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:34:13.140

您需要对字符串进行标记。（如果它总是以您开头`f(`和结尾，`)`可以让您的生活更轻松，请移除这些部分）。

A(4) -> 找到类名 -> A -> 找到参数 -> 4

这样做是这样的（伪 java 代码）：

```
public static Object createClass(String className, Double value){
    Class a = Class.forName(className);
    Class[] params = new Class[]{Integer.class};
    Constructor c = a.getConstructor(params);
    Object[] values = new Object[]{value};
    return c.newInstance();
} 
```

也许，这个赞很有帮助：[http ://docs.oracle.com/javase/tutorial/reflect/member/ctorInstance.html](http://docs.oracle.com/javase/tutorial/reflect/member/ctorInstance.html)

**更新** 这就像编写一个编译器。如果您阅读了有关如何编写编译器的信息，您可以获得更多信息：[http ://en.wikipedia.org/wiki/Compiler](http://en.wikipedia.org/wiki/Compiler)

**更新 2** 将所有生成的实例放入一个数组中。现在您可以使用反射 API 获得正确的方法 f。该代码将类似于

[http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredMethod(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredMethod(java.lang.String) , java.lang.Class...)

```
Object[] values ...
Class[] classes ...
for(Object o: values){
    add o.getClass() to classes
}

Method f = Functions.getClass().getDeclaredMethods("f", classes);
f.invoke(values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:18:07.527

我认为您应该为每个函数创建一个类并调用像“计算”这样的静态方法。这样，您可以从 String 中解析类名和属性，并通过类加载器加载适当的类。您可以通过包含名称作为键和变量作为值的 HashMap 的数组或变量传递可变数量的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T22:22:26.617

我没有尝试过，但看起来你可以通过

```
Class clazz = Class.forName("NameOfTheWantedClass"); 
```

然后

```
Constructor[] constructors = clazz.getConstructors(); 
```

而不是通过使用搜索想要的构造函数

```
getParameterTypes() 
```

在每个构造函数上并选择想要的。

但我建议考虑改变你的方法，使用`Class.forName("NameOfTheWantedClass")`或`reflection`总是有不好的做法。并且只应在真正需要时使用。

# php - 未定义变量错误

> ID：14298451
> 
> 赞同：-1
> 
> 时间：2013-01-12T22:11:04.093
> 
> 标签：php

因为，我是 PHP 新手，无法解决此代码中
的未定义变量错误。错误是：`Notice: Undefined variable: row in C:\wamp\www\shopping\products.php`

代码：

```
 <?php
        $result=mysql_query("select * from products");
        while($row=mysql_fetch_array($result)){
    ?>
    <tr>
        **<td><img src="<?=$row['picture']?>" /></td>**
        <td>    **<b><?=$row['name']?></b><br />**
                **<?=$row['description']?><br />**
                Price:<big style="color:green">
                    **$<?=$row['price']?></big><br /><br />**
                **<input type="button" value="Add to Cart" onclick="addtocart(<?=$row['serial']?>)" />**
        </td>
    </tr>
    <tr><td colspan="2"><hr size="1" /></td>
    <?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:15:13.823

您的查询可能没有返回任何内容。尝试添加它并查看输出。

```
$row = mysql_fetch_array($result);
var_dump($row);
die; 
```

如果 $row 为空，则它不会像您指定的那样作为数组工作。

# android - Android 游戏 - SoundPool 没有在 Motorola Droid X2 上播放声音

> ID：14298454
> 
> 赞同：0
> 
> 时间：2013-01-12T22:11:14.063
> 
> 标签：android, game-engine, soundpool, motorola

我正在开发一款播放音频的游戏。声音在我的三星设备和 HTC 设备上播放良好。但是，摩托罗拉 Droid X2 无法播放这些声音。

初始化我的 SoundPool：

```
static SoundPool sp;
sp = new SoundPool(8, AudioManager.STREAM_MUSIC, 0);
sp.load(context, resource_id, 1); 
```

播放声音：

```
sp.play(resource_id, 1.0f, 1.0f, 0, 0, 1.0f); 
```

我尝试搜索摩托罗拉设备和 SoundPool 可能存在的任何错误，但没有发现任何有用的东西。任何和所有的帮助表示赞赏。

我正在加载五个 MP3 文件，每个文件都不到 20kb。

我创建了一个框架项目，并在 MainActivity 中仅包含以下代码，结果相同。仅从 Resources 类加载一个 12kb MP3 文件。

```
super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    SoundPool sp = new SoundPool(16, AudioManager.STREAM_MUSIC, 0);
    int name = sp.load(this.getApplicationContext(), R.raw.brickhit,1);
        try {
            Thread.sleep(10000);
            Log.d("mark","sleeping....");
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    sp.play(name, 1.0f, 1.0f, 1, -1, 1.0f); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:39:23.543

我之前没有遇到过这个问题，但也许流计数可能是这里描述的问题：[Android Soundpool questions](https://stackoverflow.com/questions/3850999/android-soundpool-problems)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:10:53.880

经过一些实验，结果证明摩托罗拉 Droid X2 不会通过 SoundPool 播放 MP3 文件，至少在按上述方式加载时不会。我切换到 .ogg 格式，声音按预期播放。

# javascript - 当有人将我的对象传递给 console.log 时，是否可以控制它们的显示方式？

> ID：14298456
> 
> 赞同：1
> 
> 时间：2013-01-12T22:11:25.780
> 
> 标签：javascript, console

说我写一`Widget`堂课。

```
function Widget() {} 
```

使用我的`Widget`班级的人将实例发送到`console.log`.

```
console.log(new Widget()); // ▶ Widget 
```

我有什么方法可以控制该对象在控制台中的显示方式吗？请注意以下内容的显示方式：

```
console.log(window.location) // ▶ Location
console.log(document) // ▶ #document
console.log(document.body) // ▶ <body class="ask-page">…&lt;/body> 
```

如果我想在`Widget`实例发送到时显示更多有用的信息`console.log`怎么办？我想我可以`console.log`用我自己的实现替换，但我正在寻找更优雅的东西。是否`console.log`搜索可以控制输出的特定功能？

**更新：**有些人问我想要实现什么。这是一个简单的例子。我`UrlBuilder`用 JavaScript编写了一个`Object.defineProperty`用于创建属性访问器的类。（这是我无法绕过的限制。）问题是，每当有人向 发送`UrlBuilder`实例时`console.log`，我都想输出 URL。但是，它反而显示`▶ UrlBuilder`. 即使您展开显示三角形，您也看不到任何有用的信息，因为属性访问器列在`__proto__`属性内。它看起来像一个空的、无用的对象，将 URL 显示为字符串会更有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:19:19.197

尝试使用您希望日志显示的表示覆盖对象中的 tostring()。不是 100% 确定这是否可行，但这是用其他语言完成的方式。也看看这个：[valueOf() vs. toString() in Javascript](https://stackoverflow.com/questions/2485632/valueof-vs-tostring-in-javascript)，这可能会有所启发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:23:47.077

控制台的输出没有标准，如果您使用 Firefox 或 Chrome 的控制台，您会得到其他输出，有时您可以直接跳转到元素（firebug 中的 DOM-tab）。

你想用它来归档有什么意义？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T22:24:45.717

*更有用的信息*是什么意思？您可以单击控制台中的左箭头，以获取对象的属性列表。

此外，每个控制台中的 console.log 实现都不同。萤火虫`console`不会以与`chrome dev tools console`意愿相同的方式输出对象。

如果您想添加要与您的对象一起记录的信息，也许您可​​以在执行 console.log 之前将其包装到另一个中，但这仅作为调试目的才有意义：`console.log(myObjectWrapperFn(new Widget()));`

# pug - javascript 代码中的 Jade-if:s

> ID：14298457
> 
> 赞同：0
> 
> 时间：2013-01-12T22:11:40.880
> 
> 标签：pug

在 Jade 中，使用 - if(...) { } 在 html 中对我来说没有问题。但是当我在 javascript 块中使用它时，它不起作用。

即：

```
script(type='text/javascript')
  - if(locals.Android) {
  settings.device = 'android';
  - } 
```

输出这个：

```
<script type="text/javascript">
- if(locals.Android) {
settings.device = 'android';
- }
</script> 
```

而不是这个（当 locals.Android === true 时）：

```
<script type="text/javascript">
settings.device = 'android';
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:52:27.130

您可以将 if() 放在`<script>`标签之外 - 这样，`<script>`标签只有在`locals.Android === true`

例如。

```
if locals.Android === true
    script
        settings.device = 'android';
else
    //- no script tag, do something else? 
```

# android - Android - 全局布局侦听器不起作用

> ID：14298458
> 
> 赞同：6
> 
> 时间：2013-01-12T22:11:42.770
> 
> 标签：android, layout, listener, android-softkeyboard

[我在这个问题](https://stackoverflow.com/questions/2150078/how-to-check-visibility-of-software-keyboard-in-android)中使用了 Reuben Scratton 的新答案中的代码。当我将它粘贴到我的代码中时，我会在 、 和 （在 heightDiff 之后）下面看到红色的 `addOnGlobalLayoutListener(new OnGlobalLayoutListener()`波浪`onGlobalLayout()`线`activityRootView`。请帮我找出问题所在。

谢谢这是我在.java页面上的代码

```
public class Details extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_details);
    Intent intent = getIntent();        
}

final View activityRootView = findViewById(R.id.details);
activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

    @Override
    public void onGlobalLayout() {
        int heightDiff = activityRootView.getRootView().getHeight() - activityRootView.getHeight();
        if (heightDiff > 100) { // if more than 100 pixels, its probably a keyboard...
            ImageButton backButton = (ImageButton)findViewById(R.id.back); 
            backButton.setImageResource(R.drawable.hide_keyboard);
        }
     }
}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T22:15:08.123

您需要在方法中添加该代码，例如`onCreate()`.

```
public class Details extends Activity {
    View activityRootView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_details);
        Intent intent = getIntent();        

        activityRootView = findViewById(R.id.details);    
        activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                int heightDiff = activityRootView.getRootView().getHeight() - activityRootView.getHeight();
                if (heightDiff > 100) { // if more than 100 pixels, its probably a keyboard...
                    ImageButton backButton = (ImageButton)findViewById(R.id.back); 
                    backButton.setImageResource(R.drawable.hide_keyboard);
                }
             }
        });
    }
} 
```

# javascript - Javascript onClick“显示：无；” 不工作

> ID：14298462
> 
> 赞同：0
> 
> 时间：2013-01-12T22:12:13.997
> 
> 标签：javascript, jquery, css

我有一张图片，当您单击时，此功能将运行。

```
function img(num) {
    var src = "images/main" + num + ".jpg";
    document.getElementById("popover-image").src = src;
    $("#sheet").css("display", "block");
} 
```

当您单击“X”（图像）时，此函数运行：

```
function close() {
    $("#sheet").css("display", "none");
} 
```

但它不起作用。

这是我的图像的设置方式：

`<img src="images/x.png" alt="Exit" onclick="close()" />`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T22:39:56.690

约翰科尔纳的代码：

```
$("#closeButton").click(function () {
    $("#sheet").css("display", "none");
}); 
```

您的事件处理程序未正确附加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-06T12:41:52.153

你也可以这样做，通过使用类名

```
( function($) {
  $(".btn-remove").click(function() {  
    $(this).css("display", "none");      
  });
} ) ( jQuery ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-12T22:41:42.397

您阅读了如何调用 jQuery`.css`函数而不是`.show()`,`hide()`或`attr()`. 对于它的价值，[这里是隐藏功能页面的链接。](http://api.jquery.com/hide/)jQuery 就是答案。我想不出理由不在任何地方使用它。

我认为你想要做的是：

```
$(document).ready( function() {
  $("img").on("click", function(num) {
     var src = "images/main" + num + ".jpg";
     $("#popover-image").attr("src", src);
     $("#sheet").attr("display", "block");
  });
  $("img[alt=Exit]").on("click", function() {
     $("#sheet").attr("display", "none");
  });
}); 
```

# java - 有没有办法使用一些 lin 的矩阵求解器来获得矩阵的参数解。代数java库？

> ID：14298464
> 
> 赞同：0
> 
> 时间：2013-01-12T22:12:20.863
> 
> 标签：java, matrix, linear-algebra, equation-solving, parametric-equations

我遇到的所有矩阵求解器都要求矩阵是方阵和可逆的，但是那些不是方阵并且有多个解的矩阵呢……我将如何使用 java 找到它的参数形式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:42:20.803

您可以使用矩阵的[SVD执行此操作](http://en.wikipedia.org/wiki/Singular_value_decomposition)

# listview - 列表显示。检查项目计数并更改可见性

> ID：14298465
> 
> 赞同：0
> 
> 时间：2013-01-12T22:12:25.307
> 
> 标签：listview, mvvm-light, observablecollection, winrt-xaml

我正在使用 MVVM 开发一个 Winrt 应用程序。我有一个绑定到 ObservableCollection 的 ListView。

```
 <ListView x:Name="TestListView"  ItemsSource="{Binding TestItems}" Visibility="{Binding ListVis, Converter={StaticResource BoolToVisibilityConverter}}".../> 
```

我的 ObservableCollection：

```
public class SearchResultCollection : ObservableCollection<TestData>, ISupportIncrementalLoading
    {

 public IAsyncOperation<LoadMoreItemsResult> LoadMoreItemsAsync(uint count)
        {
            var res =  AsyncInfo.Run(async c =>
                                              {
                                                 //ask about data from server
                                                  return new LoadMoreItemsResult() {Count = PAGE_SIZE};

                                              });

            return res;
        }

} 
```

我也有带有链接 RelayCommand 的 TextBox（在事件“TextChanged”上执行）：

```
Search = new RelayCommand<BehaviorEventArgs>((e) =>
            {
                dynamic sender = e.Sender;
                string text = sender.Text;
                _searchText = text;

                if (string.IsNullOrEmpty(text))
                {
                    TestItems= null;                   
                    return;
                }
                ListVis = false; 
                TestItems= new SearchResultCollection(_searchService, text);
                ((ObservableCollection<TestData>)Contacts).CollectionChanged += SearchViewModel_CollectionChanged;

            });

 void SearchViewModel_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (((ObservableCollection<Contact>)sender).Count != 0)
            {
                ListVis = true;
            }

        } 
```

我正在尝试做类似[https://stackoverflow.com/a/5209102/466545](https://stackoverflow.com/a/5209102/466545)的事情，但是当 ListView 的 Visibility 获得状态 Collapsed 时，不再触发 CollectionChanged。当我删除 Visibility 属性并检查没有它的工作时，CollectionChanged 事件会根据需要触发。

# android - Android GCM 同时发送 50,000 条消息

> ID：14298471
> 
> 赞同：1
> 
> 时间：2013-01-12T22:13:17.790
> 
> 标签：android, google-cloud-messaging

我正在尝试使用[此处](http://pages.citebite.com/k9y2n5f8kmhp)描述的 Google GCM Multicast Messaging 。我需要同时发送 50,000 条消息。

文档说我应该将注册 ID 列表传递给`Sender.send()`.

**我的问题** 我很困惑，我应该一次通过所有 50,000 个 id 还是 1000 个 id 的列表，因为文档说*“GCM 中最有用的功能之一是支持多达 1,000 个收件人的单个消息。”*

**[Edit1]**这样可以吗？

```
 Sender sender = new Sender(API_KEY);
    List<List<String>> regIdsParts = regIdInThousands(getRegistrationIds(), 1000);

    for (int i = 0; i < regIdsParts.size(); i++) {

        Message message = new Message.Builder()
                .addData(MsgKey, message).build();
        MulticastResult result = sender.send(message, regIdsParts.get(i), 5);
    }

   public List<List<String>> regIdInThousands(List<String> list, final int L) {

    List<List<String>> parts = new ArrayList<List<String>>();

    final int N = list.size();
    for (int i = 0; i < N; i += L) {
        parts.add(new ArrayList<String>(
                list.subList(i, Math.min(N, i + L))));
    }
    return parts;
} 
```

来自[这个](https://stackoverflow.com/a/2895365/932307)问题的方法 regIdsThousands 感谢[polygenelubricants](https://stackoverflow.com/users/276101/polygenelubricants)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T22:20:37.773

一次传递 1,000 个 ID。一封邮件的收件人不能超过 1,000 个。

# php - PHP标头位置不起作用

> ID：14298473
> 
> 赞同：0
> 
> 时间：2013-01-12T22:13:54.317
> 
> 标签：php, header, echo

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

这是我当前的脚本。页面不会像我希望的那样重定向，而是刷新到当前页面。该页面曾经可以工作，但最近无缘无故停止工作。我在 PHP 5.3

```
<?php
$page = "Edit Topic";
require('top.php');
$var = safe($_GET['id']);
$q = mysql_query("SELECT * FROM `topics` WHERE `id`='".$var."'");
$r = mysql_fetch_array($q);
$c = mysql_num_rows($q);
$user = mysql_fetch_array(mysql_query("SELECT * FROM `users` WHERE `id`='".$_SESSION['id']."'"));

if($c==0) {
     echo "<p>This topic does not exist.</p>";
} elseif($_SESSION['name'] != $r['poster'] && $user['rank'] == "Member") {
     echo "<p>This is not your topic.</p>";
} else {
     if(isset($_POST['enter'])) {
          $title = safe($_POST['title']);
          $post = safe($_POST['post']);

          if($post=='' || $title=='') {
               $message = "You have to write something in your title and post.";
          } else {
               mysql_query("UPDATE `topics` SET `text`='".$post."' WHERE `id`='".$r['id']."'");
               mysql_query("UPDATE `topics` SET `title`='".$title."' WHERE `id`='".$r['id']."'");
               header("Location: http://www.domain.com/view-post/".$r['id']."");
          }
     }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:17:29.310

[在调用 header 之前，您不能产生任何其他输出](https://stackoverflow.com/a/8028987/1084754)。你的问题是这一行：

```
echo "<h1>Edit Topic</h1>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T22:31:50.977

1.  在标头（）之后退出（）
2.  验证您的 top.php 是否没有输出（因为在向客户端写入内容之后您无法更改标头在 mysql_-calls 之前使用 @ （例如`@mysql_query`）
3.  使用准备好的语句和 php 中的 mysqli-extension
4.  尝试使用没有 BOM 的 utf-8 文件，它们让很多人疯狂

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T22:16:30.613

您有一个`echo`发送前的标头。删除以下行：`echo "<h1>Edit Topic</h1>";` `header`函数仅在第一次输出之前有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T22:16:36.620

您应该使用绝对网址而不是相对网址，并且`exit()`在`header()`.

# xcode - 如何在 Xcode 中恢复以前版本的代码

> ID：14298474
> 
> 赞同：18
> 
> 时间：2013-01-12T22:14:08.253
> 
> 标签：xcode, commit, restore

我正在 Xcode 中处理一个 Objective C 项目，需要恢复到在源代码管理中提交的先前版本。我怎么做？我可以找到有关如何提交和推送的信息，但没有有关如何恢复到旧版本的信息。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-12T22:26:44.813

您不能在 Xcode 中一次恢复整个项目，但您可以从终端执行；只需 cd 进入您的项目文件夹并输入 git log 以找到您要查找的哈希，然后执行 git checkout [ *hash* ]。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-26T01:04:14.483

引用苹果文档[https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/Save_and_Revert_Changes_to_Files/ManageChanges.html](https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/Save_and_Revert_Changes_to_Files/ManageChanges.html)

“比较文件版本以还原代码行 选择视图 > 版本编辑器 > 显示比较视图以比较存储库中保存的文件的版本。使用跳转栏根据文件在存储库中的位置选择文件版本。每个跳转栏控制选择用于其上方的内容窗格。要显示版本，请浏览层次结构以找到它，然后单击以选择它。阴影区域表示版本之间的更改。“您可以使用版本时间线根据时间顺序选择文件版本。单击中心栏中的时间线查看器图标（../art/TimeLineIcon_2x.png）以显示两个编辑窗格之间的时间线。将指针向上移动或向下浏览时间线以浏览可用版本。当您找到想要的版本时，单击左侧或右侧指示器三角形以在相应的编辑器窗格中显示该版本。您可以在版本编辑器中编辑文件的当前工作副本。如果您想恢复版本之间的更改，您可以从旧版本复制代码并将其粘贴到当前版本中。”

最后一行揭示了关键：复制和粘贴。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-09-22T16:37:59.307

在 Xcode 9 中，您可以签出任何以前的版本。

1.  单击左侧导航器部分中的源代码管理图标，或转到查看->导航器->显示源代码管理导航器。
2.  将显示所选分支的所有提交的列表。
3.  右键单击所需的提交并选择“结帐“commitID”

您也可以直接从那里创建一个分支，这在某些情况下可能更有用

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-20T21:37:19.260

这是一种视觉方法`Xcode 8`

[![在此处输入图像描述](../Images/48acce3cfac98a9e975d2ad53ed31629.png)](https://i.stack.imgur.com/QwavZ.jpg)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-12T17:50:10.063

如果您想在单独的文件夹中获取任何已提交版本的整个项目提取，请尝试以下 shell 脚本：

```
#!/bin/sh
#
#  restores an old version of xcodeproject from git repository
#  into folder  $HOME/gitcopy
#  current directory must be the rootdir of the project
#  Xcode should not access the same project at this time
#
set -x
PROJECT_ROOT=.
COPY_DEST=$HOME/gitcopy
if [ -e *.xcodeproj ]
then
    git log
    echo "Which version ?"
    read x
    git checkout $x
    git checkout -b copyVersion
    cp -R $PROJECT_ROOT $COPY_DEST
    git stash
    git checkout master;
else
    echo "No xcode project root folder";
fi 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-01T15:20:51.373

我正在研究 Xcode 9.2 项目，该项目具有多个依赖项和已合并到其中的附加文件。在清理它的过程中，我无意中破坏了这个项目，直到我找到这个解决方案，我才知道该怎么做才能让它运行。我确实去了顶部菜单栏上的源代码管理并首先放弃了所有更改。然后我去了源代码控制管理器（从左数第二个到项目导航器的右侧并突出显示我想要的提交然后右键单击并选择 Checkout 选项，它已经输入了我想要的提交编号并且它工作得很好. 第 1 步 - 放弃所有更改 第 2 步 - 选择要返回的 Commit 第 3 步 - 右键单击​​并选择 Checkout

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-17T02:27:32.103

我迟到了，但我遇到了这个问题，幸运的是，我以前的版本处于“隐藏更改”之下。

在文件否定所在的左侧，选择第二个选项，您应该会看到一个名为 stashed changes 的文件夹，在它下面将显示所有可用的先前版本。只需右键单击它并单击“应用隐藏的更改”

[![展示图片](../Images/d6b8451d0fcd28f3d95158abdc806f4f.png)](https://i.stack.imgur.com/5bel5.png)

# sitefinity - Sitefinity 脚本冲突

> ID：14298485
> 
> 赞同：2
> 
> 时间：2013-01-12T22:15:19.550
> 
> 标签：sitefinity, sitefinity-5

我正在努力让我的 jquery 在 Sitefinity 中保持有序。将 Sitefinity 小部件拖到页面上会破坏我的母版页中的脚本链接。

Sitefinity 论坛上已经启动了一个主题：[http ://www.sitefinity.com/developer-network/forums/developing-with-sitefinity-/how-to-adjust-around-sitefinity-scripts#S2PcF40QrkClp_vEDb6cqg](http://www.sitefinity.com/developer-network/forums/developing-with-sitefinity-/how-to-adjust-around-sitefinity-scripts#S2PcF40QrkClp_vEDb6cqg)

任何帮助将不胜感激。我不能是唯一遇到这个问题的人......

先感谢您，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:41:22.593

使用 sf:resourcelinks 确保加载 jQuery 时 Sitefinity 和 RadControls 之间没有冲突。

```
<sf:resourcelinks id="ResourceLinks1" runat="server">
    <sf:ResourceFile JavaScriptLibrary="JQuery" />
</sf:resourcelinks> 
```

使用 asp:scriptmanager 代替 radscriptmanager。

使用JavascriptEmbedControl在固定位置加载脚本，以确保混合匹配加载外部和内联脚本时文件加载

```
<sf:JavaScriptEmbedControl
    id="script1"
    runat="server"
    scriptembedposition="InPlace"
    url="somescript.js" 
/> 
```

有关加载 jQuery 的最佳方式的更多信息，请查看此[论坛主题](http://www.sitefinity.com/developer-network/forums/general-discussions-/how-do-i-incorporate-jquery-into-a-master-page)。并[在此处](http://www.sitefinity.com/developer-network/forums/developing-with-sitefinity-/guide-to-integrating-jquery-into-sitefinity)阅读使用 JavascriptEmbedControl icw VisualStudio 时的免责声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-10T11:26:13.430

您可以使用 jQuery noConflict() 来解决您的情况。

加载您的 jQuery 文件，然后包含依赖于该 jQuery 版本的所有库，一个在另一个之下。

```
Example:

include jQuery 1.11
include Bootstrap jQuery plugin
include Response.js
so on., 
```

当所有依赖库在您的 jQuery 版本下面一个接一个地添加时... 当前 $ 范围内的 jQuery 版本将用于初始化库。因此，您的依赖库将按预期使用 jQuery 版本被包含/增强。万岁！！

最后，为了让 Sitefinity RAD 控件和小部件与 CMS jQuery 版本一起正常工作，您需要将 jQuery 对象完全移动到其他一些变量名称，如下所示。

```
jq1_11 = $.noConflict(true); 
```

然后在您的自定义脚本中使用 jq1_11 而不是 $ 或 jQuery。

或者

如果您仍然喜欢使用 $，请使用下面的匿名函数遵循闭包模式。

```
(function($){
     $("#id").on("click", handlerFn);
})(jq1_11); 
```

缺点：有些人会抱怨使用 2 个版本的 jQuery，但这只会发生在

内联编辑或当 RAD 控件在页面中或在 sitefinity 后端时

好处：您可以使用最新的库和最新的 jQuery

# java - zookeeper zkCli.sh 在全新安装时退出

> ID：14298486
> 
> 赞同：1
> 
> 时间：2013-01-12T22:15:25.920
> 
> 标签：java, apache-zookeeper

我下载，运行`zkServer.sh start`，运行`ps -ef|grep zoo`以确保它正在运行，然后运行`zkCli.sh 127.0.0.1:2181`。该命令返回到 shell，并带有以下输出（截断以仅显示结尾）。任何想法表示赞赏。

```
2013-01-12 14:11:04,318 [myid:] - INFO  [main:ZooKeeper@438] - Initiating client connection, connectString=localhost:2181 sessionTimeout=30000   watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@378f6235
ZooKeeper -server host:port cmd args
connect host:port
get path [watch]
ls path [watch]
set path data [version]
rmr path
delquota [-n|-b] path
quit 
printwatches on|off
create [-s] [-e] path data acl
stat path [watch]
close 
ls2 path [watch]
history 
listquota path
setAcl path acl
getAcl path
sync path
redo cmdno
addauth scheme auth
delete path [version]
setquota -n|-b val path 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:15:11.903

`zkCli.sh`需要一个`-server`标志，因为消息表明：

```
-server host:port cmd args 
```

加入`-server`，你应该很好：

```
zkCli.sh -server 127.0.0.1:2181 
```

# php - 使用 simple_html_dom 时出现持续错误

> ID：14298487
> 
> 赞同：0
> 
> 时间：2013-01-12T22:15:27.733
> 
> 标签：php, simple-html-dom

我想在 url 上使用 simple_html_dom

我用这个：

```
include_once('/simple_html_dom.php'); 
```

但返回此错误：

```
Fatal error: Call to a member function find() on a non-object in test.php on line 9 
```

我将 CHMOD 目录和文件改为 777 ，但没有变化。

我用了这个方法：

```
$file = realpath(dirname(__FILE__)."../simple_html_dom.php");
include_once($file); 
```

但返回错误：文件名不能为空。

SAFE_MODE 为 ON，我不是服务器管理员。

有任何想法吗 ？

# class - GWT RPC 每次都返回 null

> ID：14298492
> 
> 赞同：1
> 
> 时间：2013-01-12T22:15:52.103
> 
> 标签：class, gwt, serialization

我的问题是我的类没有序列化，而是 GWT RPC 每次都返回 null。我正在尝试`Test`通过 RPC 发送类型的对象。这是我的课：

```
public class Test implements Serializable {
    /**
     * 
     */
    private static final long serialVersionUID = 2857617541722878389L;
    private int testID;
    private String testName;
    private String testTheme;
    private String subject;
    private int questAmount;
    private long created;
    private int timer;

    /**
     * @gwt.typeArgs <com.nimeria.client.TestCell>
     */
    private ArrayList<TestCell> tasks = new ArrayList<TestCell>();

    public Test(String testName) {
        super();
        this.testName = testName;
    }

    public Test(String testName, String testTheme) {
        super();
        this.testName = testName;
        this.testTheme = testTheme;
    }

    public Test(int testID, String testName, String testTheme, int questAmount,
            ArrayList<TestCell> tasks) {
        super();
        this.testID = testID;
        this.testName = testName;
        this.testTheme = testTheme;
        this.questAmount = questAmount;
        this.tasks = tasks;
    }

    public int getTimer() {
        return timer;
    }

    public void setTimer(int timer) {
        this.timer = timer;
    }

    public String getSubject() {
        return subject;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }

    public long getCreated() {
        return created;
    }

    public void setCreated(long created) {
        this.created = created;
    }

    public Test(int testID, String testName, String testTheme, String subject,
            int questAmount, long created, int timer) {
        this.created = created;
        this.testID = testID;
        this.testName = testName;
        this.testTheme = testTheme;
        this.questAmount = questAmount;
        this.timer = timer;
        this.subject = subject;
    }

    public Test() {
        // TODO Auto-generated constructor stub
    }

    public int getTestID() {
        return testID;
    }

    public void setTestID(int testID) {
        this.testID = testID;
    }

    public String getTestName() {
        return testName;
    }

    public void setTestName(String testName) {
        this.testName = testName;
    }

    public int getQuestAmount() {
        return questAmount;
    }

    public void setQuestAmount(int questAmount) {
        this.questAmount = questAmount;
    }

    /**
     * @gwt.typeArgs <com.nimeria.client.TestCell>
     */
    public ArrayList<TestCell> getTasks() {
        return tasks;
    }

    /**
     * @gwt.typeArgs tasks <com.nimeria.client.TestCell>
     */
    public void setTasks(ArrayList<TestCell> tasks) {
        this.tasks = tasks;
    }

    public String getTestTheme() {
        return testTheme;
    }

    public void amountIncrement() {
        this.questAmount++;
    }
}

public class TestCell implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 985354326237784028L;
    private int taskId;
    private String quest;
    private int qustionsAmount;
    private int rightAnswer;
    private int type;
    /**
     * @gwt.typeArgs <java.lang.String>
     */
    private ArrayList<String> qustions = new ArrayList<String>();

    public TestCell(int taskId, int qustionsAmount, int rightAnswer, int type) {
        super();
        this.taskId = taskId;
        this.qustionsAmount = qustionsAmount;
        this.rightAnswer = rightAnswer;
        this.type = type;
    }

    public TestCell(int taskId, int qustionsAmount, int type) {
        super();
        this.taskId = taskId;
        this.qustionsAmount = qustionsAmount;
        this.type = type;
    }

    public TestCell(int taskId, int qustionsAmount) {
        super();
        this.taskId = taskId;
        this.qustionsAmount = qustionsAmount;
    }

    public TestCell(int taskId, String quest, int qustionsAmount,
            int rightAnswer, int type, String q1, String q2, String q3,
            String q4, String q5) {
        this.taskId = taskId;
        this.quest = quest;
        this.qustionsAmount = qustionsAmount;
        this.rightAnswer = rightAnswer;
        this.type = type;
        this.qustions.add(q1);
        this.qustions.add(q2);
        this.qustions.add(q3);
        this.qustions.add(q4);
        this.qustions.add(q5);
    }

    public int getType() {
        return type;
    }

    public void setType(int type) {
        this.type = type;
    }

    public int getTaskId() {
        return taskId;
    }

    public void setTaskId(int taskId) {
        this.taskId = taskId;
    }

    public String getQuest() {
        return quest;
    }

    public void setQuest(String quest) {
        this.quest = quest;
    }

    public int getQustionsAmount() {
        return qustionsAmount;
    }

    public void setQustionsAmount(int qustionsAmount) {
        this.qustionsAmount = qustionsAmount;
    }

    public int getQustionNumber() {
        return taskId;
    }

    public void setQustionNumber(int qustionNumber) {
        this.taskId = qustionNumber;
    }

    public int getRightAnswer() {
        return rightAnswer;
    }

    public void setRightAnswer(int rightAnswer) {
        this.rightAnswer = rightAnswer;
    }

    /**
     * @gwt.typeArgs <java.lang.String>
     */
    public ArrayList<String> getQustions() {
        return qustions;
    }

    /**
     * @gwt.typeArgs questions <java.lang.String>
     */
    public void setQustions(ArrayList<String> qustions) {
        this.qustions = qustions;
    }
} 
```

这是我的 RPC 调用：

```
conectModule.saveTest(t, new AsyncCallback<Integer>(){
    public void onFailure(Throwable caught) {
        Window.alert(caught.getMessage());
        Window.alert(caught.getLocalizedMessage());
    }

    public void onSuccess(Integer result) {
        Window.alert("Тест сохранен"+result);

        try {
            loadTestListing();
        } catch (Exception e) {
            e.printStackTrace();
        } 
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:34:38.357

可序列化的类必须有一个默认（零参数）构造函数，即`Test()`和`TextCell()`。

# jquery - 单击后如何删除Jquery Sprite动画

> ID：14298495
> 
> 赞同：0
> 
> 时间：2013-01-12T22:16:15.600
> 
> 标签：jquery, click, toggle, spritely

我有一个对象，当你点击它时，会发生两件事……一个带有一些文本的 div 出现，一个角色播放一个简短的精灵动画。但是，我希望精灵动画在第一次播放后被完全删除。我希望通过单击继续切换 div 文本框。

这就是我所拥有的：

```
$(function () {
$("#chalkboardweare").click(function () {
    $("#boxweare").animate({width: 'toggle'}, 500);
            $("#dude").sprite({fps: 50, no_of_frames: 50, play_frames: 50});
});
}); 
```

此时，每次单击“#chalkboardweare”对象时，“#boxweare”和“#dude”都会切换...

我希望每次点击都切换“#boxweare”div。

我希望仅在第一次单击后才切换“#dude”div。

有人可以帮我解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:41:27.680

使用`.one()`- 它的意思是“只做一次”。单击后（在这种情况下）绑定被删除，但您的`.on()`绑定将持续存在。

```
$("#chalkboardweare").one('click', function () {
    $("#dude").sprite({fps: 50, no_of_frames: 50, play_frames: 50});
}).on('click', function () {
    $("#boxweare").animate({width: 'toggle'}, 500);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:22:38.970

我的策略是`#dude`在动画之后添加一个数据属性，这样我们就可以在运行动画之前测试该属性的值。这是我的新代码：

```
$(function () {
   $("#chalkboardweare").click(function () {
      $("#boxweare").animate({width: 'toggle'}, 500);
      if ( !($("#dude").data("played")) )
         $("#dude").sprite({fps: 50, no_of_frames: 50, play_frames: 50}).data("played",true);
   });
}); 
```

# sql-server - 数据库设计 - 存储条件规则？

> ID：14298498
> 
> 赞同：0
> 
> 时间：2013-01-12T22:16:35.980
> 
> 标签：sql-server, database, database-design, architecture

**Version1**：我有一个“FEE”表

```
FEE
-Id
-VariableAmount
-FixedAmount
-CurrencyCode 
```

当执行提款，从系统中取出资金到用户的银行账户等时，每笔交易收取可变金额+固定金额的费用。

**Version2** : 我想通过一套收费规则满足指定条件时收费，示例

```
Charge $0 when < $200 

Charge $3 when >= $200

Charge $x when >= $Y 
```

我可以在我的网络应用程序中对其进行硬编码，这会起作用，但我希望以后能够更改它，当将这些条件存储在数据库中时，你将如何设计它？

FEE 1.* FEE_RULE?? 你在数据库中存储什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:27:11.110

您始终可以将此业务逻辑放在负责执行提款的存储过程中。这样，当您想要更改逻辑时，您不必重新部署 Web 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T22:22:59.457

您所描述的是规则引擎。SQL Server 没有内置的，但 MSDN 上有一篇文章描述了如何构建自己的。对于一个规则，它可能看起来有点过度设计，但也许您的应用程序也有其他规则。 [了解更多。](http://msdn.microsoft.com/en-us/library/aa964135%28v=sql.90%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T11:48:51.127

```
SET ANSI_WARNINGS ON;
GO

--DROP TABLE dbo.FeeInterval
CREATE TABLE dbo.FeeInterval (
    FeeIntervalID INT IDENTITY(1,1),    
        CONSTRAINT PK_FeeInterval PRIMARY KEY (FeeIntervalID),

    StartValue NUMERIC(18,2) NOT NULL,
        CONSTRAINT CK_FeeInterval_StartValue CHECK (StartValue > 0),
    -- If EndValue IS NOT NULL Then the interval is TxValue BETWEEN [StartValue, EndValue]
    -- Else (EndValue IS NULL) Then the interval is TxValue >= StartValue
    -- Also, you should check is this intervals are continuous (using a trigger)
    -- and only the last EndValue IS NULL
    EndValue NUMERIC(18,2) NULL, -- Allow null,
        CONSTRAINT CK_FeeInterval_StartDate_EndDate CHECK (StartValue < EndValue),
    VariableAmount NUMERIC(18,2) NOT NULL, 
    FixedAmount NUMERIC(18,2) NOT NULL
);
-- + CREATE INDEX ...
GO

--DROP TABLE dbo.[Transaction] 
CREATE TABLE dbo.[Transaction] (
    TransactionID INT IDENTITY(1,1),
        CONSTRAINT PK_Transaction PRIMARY KEY (TransactionID),
    TransactionDate DATE NOT NULL
        CONSTRAINT DF_Transaction_TransactionDate DEFAULT GETDATE(),
    -- You should check (using a trigger) if there is an applicable fee for this TxnValue 
    --      If the last EndValue IS NOT NULL Then TxnValue BETWEEN MIN(StartDate) AND MAX(EndValue) 
    --      Else (the last Endvalue IS NULL Then TxnValue >= MIN(StartDate)
    TxnValue NUMERIC(18,2) NOT NULL
    -- Also, you should store the FeeIntervalID used for every transaction
    -- FeeIntervalID INT NOT NULL 
    -- and (maybe) VariableAmount/FixedAmount/TxnPlusCosts NUMERIC(18,2) NOT NULL
)
GO

INSERT dbo.FeeInterval (StartValue, EndValue, VariableAmount, FixedAmount)
SELECT 0.01, 200,       0.8,    0.1    UNION ALL -- 0.01 because data type is NUMERIC(,2)
SELECT 201,  300,       0.65,   0.1    UNION ALL
SELECT 301,  NULL,      0.4,    0.1;
GO

INSERT dbo.[Transaction] (TxnValue)
SELECT 0.01 UNION ALL
SELECT 50 UNION ALL
SELECT 200 UNION ALL
SELECT 250 UNION ALL
SELECT 350 UNION ALL
SELECT -0.01; -- Wrong value
GO

--DROP FUNCTION dbo.GetApplicableFee
CREATE FUNCTION dbo.GetApplicableFee(@TxnValue NUMERIC(18,2))
RETURNS TABLE
AS
RETURN
SELECT  s.FeeIntervalID, s.VariableAmount, s.FixedAmount, @TxnValue + s.VariableAmount + s.FixedAmount AS TxnPlusCosts
FROM (
    SELECT  i.FeeIntervalID, i.VariableAmount, i.FixedAmount,
            i.StartValue, i.EndValue,
            ROW_NUMBER() OVER(ORDER BY i.StartValue DESC) RowNum
    FROM    dbo.FeeInterval i
) s
WHERE   @TxnValue BETWEEN s.StartValue AND s.EndValue AND s.RowNum > 1
OR      @TxnValue >= s.StartValue AND s.RowNum = 1
GO

SELECT  *,
        CASE WHEN f.FeeIntervalID IS NOT NULL THEN 'TxnValue with applicable fee' ELSE 'Wrong TxnValue' END AS [Description]
FROM    dbo.[Transaction] txn
OUTER APPLY dbo.GetApplicableFee(txn.TxnValue) f
-- or
SELECT  *, 
        (SELECT f.TxnPlusCosts FROM dbo.GetApplicableFee(txn.TxnValue) f) AS TxnPlusCosts
FROM    dbo.[Transaction] txn 
```

如果您有任何问题随时问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-06T07:12:31.437

我认为您可以使用 oracle 过滤器表达式来实现您通过数据库建议的内容，而无需更改应用程序...本教程将为此目的帮助您 [http://docs.oracle.com/cd/B12037_01/server.101/b10821/表达式概念.htm](http://docs.oracle.com/cd/B12037_01/server.101/b10821/expressionconcepts.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T05:53:54.637

我的方法，最简单的形式，如下所示。

```
USE tempdb
GO
IF OBJECT_ID('tempdb.dbo.Transactions') IS NOT NULL DROP TABLE Transactions

SELECT TOP 500 TxnVal = ABS(CHECKSUM(NEWID())) % 1000
INTO Transactions
FROM sys.columns

;WITH Fee (Id, VariableAmountFloor, VariableAmountCeiling, VariableAmount, FixedAmount, CurrencyCode) AS
(
    SELECT 1, 0,    200,        0.8,    0.1, 'x'    UNION ALL
    SELECT 2, 201,  300,        0.65,   0.1, 'x'    UNION ALL
    --  NB: have chosen 2147483647 as the ceiling because it is the maximum value of the INT type
    --  You will probably have some sort of float
    SELECT 3, 301,  2147483647, 0.4,    0.1, 'x'
)
SELECT   T.TxnVal
        ,VariableFee    = F.VariableAmount
        ,FixedFee       = F.FixedAmount
        ,TxnPlusCosts   = T.TxnVal + F.VariableAmount + F.FixedAmount
FROM Transactions   T
JOIN Fee            F ON T.TxnVal BETWEEN F.VariableAmountFloor AND F.VariableAmountCeiling 
```

# android - 更改 Android 微调器背景

> ID：14298500
> 
> 赞同：0
> 
> 时间：2013-01-12T22:16:38.537
> 
> 标签：android

我有一个带有向下箭头的 android 微调器。当列表打开时，我希望箭头指向上方。曾经有一个 state_dropdown_showing。在 API 15 (4.0.3) 中，这种状态似乎已被移除。

知道列表是否打开的正确方法是什么，以便可以通过 XML 动态更改微调器的背景（包括箭头）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:27:19.837

我认为您必须使用单独的 ping 来显示向上箭头 第一个链接非常有用，其他链接可能会给您一些想法：

1.  [http://www.gersic.com/blog.php?id=57](http://www.gersic.com/blog.php?id=57)

    [Android - 自定义微调器背景问题](https://stackoverflow.com/questions/9993156/android-issue-with-custom-spinner-background)

    [自定义微调器背景](https://stackoverflow.com/questions/12456334/android-custom-spinner-background)

    [自定义微调器背景](https://stackoverflow.com/questions/12456334/android-custom-spinner-background)

# javascript - 从 AJAX 调用的 HTML 中删除 HEAD

> ID：14298503
> 
> 赞同：-2
> 
> 时间：2013-01-12T22:17:04.623
> 
> 标签：javascript, jquery, django

我正在用 ajax 接收的 html 替换正文 html。问题是我复制了 HEAD 部分。

我首先需要从收到的 html 中删除整行，然后使用：

```
$('body').html(data); 
```

我从 POST 获取 html。这是一个格式良好的html。

我正在使用 Django 的 render_to_response 来发回响应。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:42:34.387

我建议排除`head`服务器端，但因为我不知道你会如何在 django 中做到这一点，所以这是一个 hackish 且极其丑陋的解决方案，至少可以工作，不像其他解决方案，`$(data).find('body')`由于 jQuery，它永远不会匹配任何元素自动解析并排除标签`body`旁边的标签。`html``head`

看哪，正则表达式的力量！

```
$('body').html(/<body[\s\S]*?>([\s\S]*?)<\/body>/.exec(data)[1]); 
```

[**小提琴**](http://jsfiddle.net/hqJjM/2/)

我不建议将其用于生产环境，因为发送`head`只是浪费了两端的带宽，并且正则表达式不是最合适的解决方案。在您将服务器部分页面切换到 ajax 请求之前，它至少应该适用于开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T22:35:48.353

这些解决方案看起来都非常hacky......说真的，只需移除服务器端的头部！

如果您使用的是 render_to_ 响应，则必须将模板名称传递给它以进行渲染。在那个模板中，不要写任何头代码！只需将代码放在正文标签之间，就可以了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-12T22:19:51.783

试试`$('body').html($(data).find('body'));`。如果您有格式良好的 HTML，这将起作用。

编辑：这行不通；请参阅下面的 Fabricio 评论和我的回复以了解原因。一种解决方法是用给定的 ID 将你的所有内容包装`body`在一个 div 中，然后像这样选择这个 ID：`$('body').html($(data).filter('#chosenid'));`当然，这实际上与`$('body').load('remote_page.html #chosenid');`将 AJAX 调用组合到同一个请求中没有什么不同。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-12T22:20:18.473

您是否在正文中插入文本？您应该使用[load-method](http://api.jquery.com/load/)，但要注意脚本 :)

```
$("body").load("yourNextPage.html"); 
```

# autohotkey - 如何将最后一个用户输入存储为变量？

> ID：14298509
> 
> 赞同：0
> 
> 时间：2013-01-12T22:17:50.147
> 
> 标签：autohotkey

我当前的代码从 10 到 56 读取用户输入的 2 位数字

有没有办法可以将最后一个用户输入保存到变量中，以便稍后在代码中的某个位置使用它？

这是我的代码

如果用户输入 11，我想将 11 保存在 tht 变量中，以便以后可以使用它如果用户输入 21，我希望它将 21 存储在该变量中

```
1::
Input Key, L1

if Key=1
            {
             ; do code
}
if Key=2
            {
             ; do code
}
return

2::
Input Key, L1

if Key=1
            {
             ; do code
}
if Key=2
            {
             ; do code
}
return 
```

**编辑代码**

```
myVar=0

#o::
MsgBox %myVar% - 1 

return 
```

因此，如果用户输入 11，它将设置 myVar = 11。然后我尝试对 myVar - 1 进行 subtrace 并尝试在 MsgBox 中打印，但它没有？它向我显示 11 - 1 而不是 11 减 1 我将使用 Send, %myVar% - 1 稍后代替 MsgBox。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:32:20.973

There are 2 types of assignment statements in autohotkey: `=` & `:=`

1.  `line1 = %g_number% - 1 ;this is a string`

2.  `line2 := g_number - 1 ;this is an expression`

if `g_number = 5`

`line1` will evaluate to `5 - 1` and `line2` will evaulate to `4`.

# full code

```
#SingleInstance Force
#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.
SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.

g_number = 0

keys := "0123456789"

Loop, parse, keys
{
    Hotkey, %A_LoopField%, NumberKeyAction
}

return

#o::
    line1 = %g_number% - 1
    line2 := g_number - 1
    msgbox, %line1%`n%line2%
    return

NumberKeyAction:
    Input second_key, L1
    number = %A_ThisHotkey%%second_key%
    tooltip, %number%
    g_number := number
    return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T00:09:29.553

我猜你需要按下按键的组合，如果按下 1，然后按下 2 来做你想要得到 12 的事情，等等。

只需使用全局变量

```
global myVar 
```

-> 像这样定义的变量可以在程序的任何地方访问。

然后在你的一系列 If 句子中定义 myVar 。

```
1::
    Input Key, L1

    if Key=1
    {
        myVar:=11
        ; do code
    }
return 
```

# php - 发送电子邮件时出错

> ID：14298511
> 
> 赞同：0
> 
> 时间：2013-01-12T22:17:56.853
> 
> 标签：php

我正在使用 php 脚本发送电子邮件。我想在回复路径中显示用户名和他的电子邮件 ID。我正在使用以下代码。我在消息中使用 html。

```
 Error.: It is not showing the from in email , showing unknow sender.

  <?php  
 $name="TEST TEST";
 $from1=test@gmail.com
 $msg='<div>hello dfjdk faofd akfda </div>';
 $to =$email;
 $subject = $ab." Return SMS";
  $message = $msg;
  $from1 = 'test@yahoo.com';
  $headers = "From:$name\r\n";
  $headers .= "MIME-Version: 1.0\n";
  $headers .= 'Content-Type: text/html; charset="iso-8859-1"'."\n";
 $headers .= "Reply-To: $from1\r\n";
   mail($to,$subject,$message,$headers);
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:27:06.803

首先，你的标记都是错误的。

```
$from=test@gmail.com 
```

这不是有效的 php。$from = "test@gmail.com" 但是。

接下来，在您的第一个标题行中，`From:$name`也是一个问题。应该是发件人的`$name`电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:32:05.283

试试这个：

```
<?php  
  $to = $email;
  $subject = $ab." Return SMS";
  $message = '<div>hello dfjdk faofd akfda </div>';
  $name = "TEST TEST";
  $from1 = "test@gmail.com";
  $headers = "From: $name <$from1>\r\n";
  $headers .= "MIME-Version: 1.0\n";
  $headers .= 'Content-Type: text/html; charset="iso-8859-1"'."\n";
  $headers .= "Reply-To: $name <$from1>\r\n";
  mail($to, $subject, $message, $headers);
?> 
```

# ios - 在 Xcode 4.5 中进行分析后 iOS 应用程序内存泄漏

> ID：14298514
> 
> 赞同：1
> 
> 时间：2013-01-12T22:18:11.490
> 
> 标签：ios, objective-c, xcode, memory-leaks, xcode4.5

我正在使用 Xcode 4.5.2 来练习 iOS 编程。我的应用程序似乎编译得很好，但是当我执行 Product -> Analyze 时，我得到以下消息，这些消息在

![在此处输入图像描述](../Images/fa7905ccfb84b17e3f7816b4dcd1327b.png)

如果有人可以向我解释这一点，我将不胜感激？

PS。`__bridge`除了编译器建议的单词并且我同意添加它之外，我有点了解大多数情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:21:43.403

你应该使用`__bridge_transfer`，而不是`__bridge`。您想将所有权转让给 ARC，因此它会为您清理它。不这样做会导致泄漏。

*请参阅过渡到 ARC 发行说明中关于*[免费桥接](http://developer.apple.com/library/ios/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW1)的讨论。

 *根据 WWDC 2012 的说明，Apple 实际上建议`CFBridgingRelease`. 因此：

```
NSString *encodedString = CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:27:50.567

只要您仔细跟踪它并在适当的时候释放它，它就不是泄漏。Analyzer 只是提示，如果有人在外部需要它，函数应该返回自动释放的 ref，或者在函数内部释放它。*

# jquery - 使用 underscore.js 显示多维度数组

> ID：14298515
> 
> 赞同：0
> 
> 时间：2013-01-12T22:18:15.080
> 
> 标签：jquery, backbone.js, underscore.js

我有一个包含多维数组中的属性的模型。在视图的模板函数中，我想解压这个数组，但我不确定如何使用 underscore.js 来完成。我在谷歌上环顾四周，但似乎找不到一个简单的例子。

例如，这是一个多维数组：

```
array(
    "elementTag" => "li",
    "elementClass" => "dashboard",
    "elementContent" => array(
        "elementTag" => "a",
        "elementContent" => "The Value I want to Display!!!",
        "href" => "#home"
    )
) 
```

如果我的模板： 看起来像这样：

```
template: _.template('<<%= elementTag %> class="<%= elementClass %>">...</<%= elementContent %>>') 
```

我将如何显示`elementContent`? 的值：

> 我要显示的价值！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:41:32.333

JavaScript 使用点符号来访问对象的属性。

例如，您发布了您的数组，就像它在 php 中出现的那样，在 JavaScript 中，您将按如下方式创建该结构：

```
var myObject = {
    "elementTag": "li",
    "elementClass": "dashboard",
    "elementContent": {
        "elementTag": "a",
        "elementContent": "The Value I want to Display!!!",
        "href": "#home"
    }
} 
```

然后，您可以将其传递给骨干模型上的构造函数，这是集合在调用 fetch/reset 等时在内部执行的操作。

```
var model = new ElementModel(myObject)

model.get('elementClass') // returns "dashboard"
model.get('elementContent') // returns the element content object
model.get('elementContent').elementTag // returns the "a"

var myObject = model.toJSON() // returns the object in the same format as above

myObject.elementClass // "dashBoard"
myObject.elementContent.elementTag // "a" 
```

通常在主干中，您将结果传递`model.toJSON()`给下划线模板，因此@fencliff 正确回答，您的对象的所有属性都可以在模板中以格式

```
<%= elementTag %>
<%= elementClass %>
<%= elementContent.elementContent %>
// etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T22:31:09.583

除非我误解了你，否则`<%= elementContent.elementContent %>`应该做的伎俩。

# vba - 在 Excel 2003 中通过具有数据列的 vba 行转换为具有多行的列

> ID：14298522
> 
> 赞同：3
> 
> 时间：2013-01-12T22:19:00.820
> 
> 标签：vba, excel, normalization

我浏览了关于这个主题的类似主题但被卡住了，我需要一些 Excel 2003 中的 VBA 专家的帮助

我有一排数据如下

```
 (Project Code)    ...(Milestone1)  (Date1)     (Milestone2)  (Date2) ... (Milestone 10)(Date3)
        ColumnA    ... ColumnAG     ColumnAH    ColumnAI     ColumnAJ  ...  ColumnAY    ColumnAZ
        Header1        Header33     Header34    Header35     Header36  ...  Header51    Header52
 rowkey datavalue1     datavalue33   datavalue34 datavalue35  datavalue36 ... datavalue51 
```

我有一个非规范化数据集，其中数据值可能逐行为空，也可能不为空。我需要使它们正常化。

IE

```
 1234567        start    12/12/2012    build      12/01/2013 ... finish 01/02/2014        
        1234568        plan     14/12/2012    contract   02/02/2013  ... NULL   NULL 
```

会成为

```
 1234567        header33  start    12/12/2012
        1234567        header34  build    12/01/2013
        ...
        1234567        header51  finish   01/02/2014
        1234568        header33  plan     14/12/2012
        1234568        header34  contract 02/02/2013 
```

我有大约数百行，包含名称为 10 个里程碑和 10 个关联日期的项目数据，并且需要将它们拆分，因此我有多行列出每个项目代码的里程碑标题/里程碑名称/日期....如果里程碑名称和数据是空白的记录可以跳过...

在 Excel 2007 中有一个类似的帖子[将包含数据列的行转换为包含多行的列](https://stackoverflow.com/questions/1784407/convert-row-with-columns-of-data-into-column-with-multiple-rows-in-excel-2007)，但不知道如何更改以将其应用于上述场景......

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:09:47.347

好的，这个代码真的不是太高级，但是有点乏味。我为您设计了这个，它应该可以满足您的需求。它充满了您可以用来帮助学习代码的评论（如果您想自己再次这样做）。祝你好运！

```
Sub normalizeData()

Dim i As Integer, j As Integer, k As Integer
Dim r As Integer
Dim bReport As Workbook, Report As Worksheet, Report2 As Worksheet
Dim m(0 To 9) As Integer 'This sets up the variables for your milestones
Dim mileString As String, dateString As String

Set Report = Excel.ActiveSheet
Set bReport = Report.Parent
Set Report2 = bReport.Worksheets.Add

'There are two ways to identify your milestones to the subroutine: either have some kind of identifier to search _
for within the value of the milestone cell; or define them explicitly. I'm going to do the latter since I don't know _
what might be in those cells.

m(0) = 33 'The column number for each milestone
m(1) = 35
m(2) = 37
m(3) = 39
m(4) = 41
m(5) = 43
m(6) = 45
m(7) = 47
m(8) = 49
m(9) = 51

r = Report.UsedRange.Rows.Count 'Get the last row number and assign it to a _
                                short variable (just to make things easier).

Report2.Cells(1, 1).Value = "Normalized Data" 'Placing a header row allows us to use used range without having _
                                                to worry about identifying the first iteration. If you've ever tried this _
                                                by yourself you probably know what I'm referring to.

With Report2.Range("A1:D1") 'Just makin it purdy
    .Merge
    .HorizontalAlignment = xlCenter
    .Interior.Color = RGB(0, 20, 99)
    .Font.Color = RGB(224, 238, 255)
    .Font.Bold = True
    .Font.Size = 14
End With

For i = 2 To r
    For j = 0 To 9
        If Report.Cells(i, m(j)).Value <> "" And _
        Report.Cells(i, m(j)).Value <> "Null" Then 'I'm not sure if the empty values will be null or blank strings.
            mileString = Report.Cells(i, m(j)).Value
            dateString = Report.Cells(i, m(j) + 1).Value
            k = Report2.UsedRange.Rows.Count + 1
            Report2.Cells(k, 1).Value = Report.Cells(i, 1).Value
            Report2.Cells(k, 2).Value = Report.Cells(1, m(j)).Value 'Assuming your header is on the first row
            Report2.Cells(k, 3).Value = mileString
            Report2.Cells(k, 4).Value = dateString
            Report2.Cells(k, 4).NumberFormat = "MM/dd/yyyy"
        End If
    Next j
Next i

For i = 2 To Report2.UsedRange.Rows.Count
    If i Mod 2 = 0 Then
        Report2.Range("A" & i & ":D" & i).Interior.Color = RGB(227, 235, 252) 'Alternating row color for easier reading.
    End If
Next i

'************** This part adds borders. Omit this block if you don't want them.************
With Report2.Range("A1:D" & Report2.UsedRange.Rows.Count)
    .Borders(xlEdgeTop).Weight = xlThin
    .Borders(xlEdgeBottom).Weight = xlThin
    .Borders(xlLeft).Weight = xlThin
    .Borders(xlRight).Weight = xlThin
    .Borders(xlInsideHorizontal).Weight = xlThin
    .Borders(xlInsideVertical).Weight = xlThin
End With
'******************************************************************************************

End Sub 
```

PS：确保您在运行宏时位于非规范化工作表上。它旨在将该工作表引用为活动工作表并将标准化数据放入新工作表中。

另请注意，我使用了一个数组来识别里程碑，但我相信您可以轻松地使用`For...Next`带有第 2 步增量的循环来提高可伸缩性。例如，在这种情况下，for 循环的开头看起来像`For j = 33 to 51 Step 2`. 这是假设您的所有里程碑都相隔两列。

# concurrency - 为什么添加并发会减慢这个 golang 代码？

> ID：14298523
> 
> 赞同：46
> 
> 时间：2013-01-12T22:19:03.730
> 
> 标签：concurrency, go

我有一些我一直在修补的围棋代码来回答我对我姐夫玩的电子游戏的一点好奇。

从本质上讲，下面的代码模拟了与游戏中怪物的互动，以及他可以期望它们在被击败后多久掉落一次物品。我遇到的问题是，我希望这样的一段代码非常适合并行化，但是当我添加并发时，执行所有模拟所需的时间往往会减慢原始代码的 4-6 倍没有并发。

为了让您更好地理解代码是如何工作的，我提供了三个主要功能： 交互功能，即玩家与怪物之间的简单交互。如果怪物掉落物品，则返回 1，否则返回 0。模拟函数运行多个交互并返回一段交互结果（即，1 和 0 代表成功/不成功的交互）。最后，还有一个测试函数，它运行一组模拟并返回一段模拟结果，这些结果是导致物品掉落的交互总数。这是我试图并行运行的最后一个函数。

现在，我可以理解为什么如果我为每个要运行的测试创建一个 goroutine 代码会变慢。假设我正在运行 100 个测试，我的 MacBook Air 拥有的 4 个 CPU 上的每个 goroutine 之间的上下文切换会降低性能，但我只创建与处理器数量一样多的 goroutine，并将测试数量划分为协程。我希望这实际上可以加快代码的性能，因为我正在并行运行每个测试，但是，当然，我的速度大大降低了。

我很想知道为什么会这样，所以任何帮助将不胜感激。

下面是没有 go 例程的常规代码：

```
package main

import (
    "fmt"
    "math/rand"
    "time"
)

const (
    NUMBER_OF_SIMULATIONS = 1000
    NUMBER_OF_INTERACTIONS = 1000000
    DROP_RATE = 0.0003
)

/**
 * Simulates a single interaction with a monster
 *
 * Returns 1 if the monster dropped an item and 0 otherwise
 */
func interaction() int {
    if rand.Float64() <= DROP_RATE {
        return 1
    }
    return 0
}

/**
 * Runs several interactions and retuns a slice representing the results
 */
func simulation(n int) []int {
    interactions := make([]int, n)
    for i := range interactions {
        interactions[i] = interaction()
    }
    return interactions
}

/**
 * Runs several simulations and returns the results
 */
func test(n int) []int {
    simulations := make([]int, n)
    for i := range simulations {
        successes := 0
        for _, v := range simulation(NUMBER_OF_INTERACTIONS) {
            successes += v
        }
        simulations[i] = successes
    }
    return simulations
}

func main() {
    rand.Seed(time.Now().UnixNano())
    fmt.Println("Successful interactions: ", test(NUMBER_OF_SIMULATIONS))
} 
```

而且，这里是 goroutine 的并发代码：

```
package main

import (
    "fmt"
    "math/rand"
    "time"
    "runtime"
)

const (
    NUMBER_OF_SIMULATIONS = 1000
    NUMBER_OF_INTERACTIONS = 1000000
    DROP_RATE = 0.0003
)

/**
 * Simulates a single interaction with a monster
 *
 * Returns 1 if the monster dropped an item and 0 otherwise
 */
func interaction() int {
    if rand.Float64() <= DROP_RATE {
        return 1
    }
    return 0
}

/**
 * Runs several interactions and retuns a slice representing the results
 */
func simulation(n int) []int {
    interactions := make([]int, n)
    for i := range interactions {
        interactions[i] = interaction()
    }
    return interactions
}

/**
 * Runs several simulations and returns the results
 */
func test(n int, c chan []int) {
    simulations := make([]int, n)
    for i := range simulations {
        for _, v := range simulation(NUMBER_OF_INTERACTIONS) {
            simulations[i] += v
        }
    }
    c <- simulations
}

func main() {
    rand.Seed(time.Now().UnixNano())

    nCPU := runtime.NumCPU()
    runtime.GOMAXPROCS(nCPU)
    fmt.Println("Number of CPUs: ", nCPU)

    tests := make([]chan []int, nCPU)
    for i := range tests {
        c := make(chan []int)
        go test(NUMBER_OF_SIMULATIONS/nCPU, c)
        tests[i] = c
    }

    // Concatentate the test results
    results := make([]int, NUMBER_OF_SIMULATIONS)
    for i, c := range tests {
        start := (NUMBER_OF_SIMULATIONS/nCPU) * i
        stop := (NUMBER_OF_SIMULATIONS/nCPU) * (i+1)
        copy(results[start:stop], <-c)
    }

    fmt.Println("Successful interactions: ", results)
} 
```

**更新 (01/12/13 18:05)**

我在下面添加了一个新版本的并发代码，它根据下面的“系统”建议为每个 goroutine 创建一个新的 Rand 实例。与代码的串行版本相比，我现在看到了非常轻微的加速（总时间减少了大约 15-20%）。我很想知道为什么我没有看到接近 75% 的时间减少，因为我将工作量分散到我的 MBA 的 4 个核心上。有没有人有任何进一步的建议可以提供帮助？

```
package main

import (
    "fmt"
    "math/rand"
    "time"
    "runtime"
)

const (
    NUMBER_OF_SIMULATIONS = 1000
    NUMBER_OF_INTERACTIONS = 1000000
    DROP_RATE = 0.0003
)

/**
 * Simulates a single interaction with a monster
 *
 * Returns 1 if the monster dropped an item and 0 otherwise
 */
func interaction(generator *rand.Rand) int {
    if generator.Float64() <= DROP_RATE {
        return 1
    }
    return 0
}

/**
 * Runs several interactions and retuns a slice representing the results
 */
func simulation(n int, generator *rand.Rand) []int {
    interactions := make([]int, n)
    for i := range interactions {
        interactions[i] = interaction(generator)
    }
    return interactions
}

/**
 * Runs several simulations and returns the results
 */
func test(n int, c chan []int) {
    source := rand.NewSource(time.Now().UnixNano())
    generator := rand.New(source)
    simulations := make([]int, n)
    for i := range simulations {
        for _, v := range simulation(NUMBER_OF_INTERACTIONS, generator) {
            simulations[i] += v
        }
    }
    c <- simulations
}

func main() {
    rand.Seed(time.Now().UnixNano())

    nCPU := runtime.NumCPU()
    runtime.GOMAXPROCS(nCPU)
    fmt.Println("Number of CPUs: ", nCPU)

    tests := make([]chan []int, nCPU)
    for i := range tests {
        c := make(chan []int)
        go test(NUMBER_OF_SIMULATIONS/nCPU, c)
        tests[i] = c
    }

    // Concatentate the test results
    results := make([]int, NUMBER_OF_SIMULATIONS)
    for i, c := range tests {
        start := (NUMBER_OF_SIMULATIONS/nCPU) * i
        stop := (NUMBER_OF_SIMULATIONS/nCPU) * (i+1)
        copy(results[start:stop], <-c)
    }

    fmt.Println("Successful interactions: ", results)
} 
```

**更新 (01/13/13 17:58)**

感谢大家帮助解决我的问题。我终于得到了我正在寻找的答案，所以我想我会在这里为任何有同样问题的人总结一下。

基本上我有两个主要问题：首先，即使我的代码是[令人尴尬的并行](http://en.wikipedia.org/wiki/Embarrassingly_parallel)，当我将其拆分到可用处理器中时它运行速度较慢，其次，该解决方案引发了另一个问题，即我的串行代码运行两次与在单处理器上运行的并发代码一样慢，您期望它们大致相同。在这两种情况下，问题都是随机数生成器功能`rand.Float64`。基本上，这是`rand`包提供的便利功能。在该包中，`Rand`结构的全局实例由每个便利函数创建和使用。这个全球`Rand`实例有一个与之关联的互斥锁。由于我使用了这个便利功能，我并不能真正并行化我的代码，因为每个 goroutine 都必须排队才能访问全局`Rand`实例。`Rand`解决方案（如下面的“系统”建议）是为每个 goroutine创建一个单独的结构实例。这解决了第一个问题，但产生了第二个问题。

第二个问题是我的非并行并发代码（即我的并发代码只使用一个处理器运行）的运行速度是顺序代码的两倍。这样做的原因是，即使我只使用一个处理器和一个 goroutine 运行，该 goroutine 也有`Rand`我创建的结构的自己的实例，并且我在没有互斥锁的情况下创建了它。顺序代码仍在使用`rand.Float64`利用全局互斥保护`Rand`实例的便利功能。获取该锁的成本导致顺序代码运行速度变慢了两倍。

因此，故事的寓意是，每当性能很重要时，请确保创建`Rand`结构的实例并从中调用所需的函数，而不是使用包提供的便利函数。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-12T23:56:03.947

问题似乎来自您对 的使用`rand.Float64()`，它使用了一个带有互斥锁的共享全局对象。

相反，如果您为每个 CPU 创建一个单独的`rand.New()`，将其传递给`interactions()`，并使用它来创建`Float64()`，那么会有很大的改进。

* * *

*更新以显示对现在使用的问题中的新示例代码的更改`rand.New()`*

该`test()`函数已修改为使用给定通道或返回结果。

```
func test(n int, c chan []int) []int {
    source := rand.NewSource(time.Now().UnixNano())
    generator := rand.New(source)
    simulations := make([]int, n)
    for i := range simulations {
        for _, v := range simulation(NUMBER_OF_INTERACTIONS, generator) {
            simulations[i] += v
        }   
    }   
    if c == nil {
        return simulations
    }   
    c <- simulations
    return nil 
} 
```

该`main()`函数已更新为运行两个测试，并输出定时结果。

```
func main() {
    rand.Seed(time.Now().UnixNano())

    nCPU := runtime.NumCPU()
    runtime.GOMAXPROCS(nCPU)
    fmt.Println("Number of CPUs: ", nCPU)

    start := time.Now()
    fmt.Println("Successful interactions: ", len(test(NUMBER_OF_SIMULATIONS, nil)))
    fmt.Println(time.Since(start))

    start = time.Now()
    tests := make([]chan []int, nCPU)
    for i := range tests {
        c := make(chan []int)
        go test(NUMBER_OF_SIMULATIONS/nCPU, c)
        tests[i] = c
    }

    // Concatentate the test results
    results := make([]int, NUMBER_OF_SIMULATIONS)
    for i, c := range tests {
        start := (NUMBER_OF_SIMULATIONS/nCPU) * i
        stop := (NUMBER_OF_SIMULATIONS/nCPU) * (i+1)
        copy(results[start:stop], <-c)
    }
    fmt.Println("Successful interactions: ", len(results))
    fmt.Println(time.Since(start))
} 
```

输出是我收到的：

```
> CPU数量：2
>
> 成功互动：1000
> 1m20.39959s
>
> 成功互动：1000
> 41.392299s

```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-13T08:17:16.040

在我的 Linux 四核 i7 笔记本电脑上测试你的代码我明白了

这是一个[谷歌电子表格](https://docs.google.com/spreadsheet/ccc?key=0AjSw5cyzKmgvdEg0V01xTENWNm1ZRGQ3cHFkUWtFWUE)

![Google 电子表格的屏幕截图](../Images/24a6bfe23b6cd471885b9c70a5e3f7f2.png)

这表明，至少在 Linux 下，每个内核的扩展几乎是线性的。

我认为你没有看到这个可能有两个原因。

首先是你的 macbook air 只有 2 个真正的核心。它有 4 个[超线程](http://en.wikipedia.org/wiki/Hyper-threading)，这就是为什么它将 4 报告为最大 cpu 的原因。超线程通常仅比单个内核提供额外 15% 的性能，而不是您可能期望的 100%。所以坚持只在 macbook air 上对 1 或 2 个 CPU 进行基准测试！

另一个原因可能是 OS X 线程性能与 Linux 相比。他们使用不同的线程模型，这可能会影响性能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-13T16:54:38.200

您的代码正在对二项式随机变量 B(N, p) 进行采样，其中 N 是试验次数（此处为 1M），p 是单个试验成功的概率（此处为 0.0003）。

一种方法是建立一个累积概率表 T，其中 T[i] 包含试验总数小于或等于 i 的概率。然后生成一个样本，您可以选择一个统一的随机变量（通过 rand.Float64）并找到表中包含大于或等于它的概率的第一个索引。

这里有点复杂，因为你有一个非常大的 N 和一个相当小的 p，所以如果你尝试构建表格，你会遇到非常小的数字和算术准确性的问题。但是您可以构建一个较小的表（例如 1000 个大表）并对其进行 1000 次采样以获得 100 万次试验。

这是完成所有这些的一些代码。它不是很优雅（1000 是硬编码的），但它在我的旧笔记本电脑上不到一秒的时间内生成了 1000 次模拟。进一步优化很容易，例如将 BinomialSampler 的构造从循环中取出，或者使用二分搜索而不是线性扫描来查找表索引。

```
package main

import (
    "fmt"
    "math"
    "math/rand"
)

type BinomialSampler []float64

func (bs BinomialSampler) Sample() int {
    r := rand.Float64()
    for i := 0; i < len(bs); i++ {
        if bs[i] >= r {
            return i
        }
    }
    return len(bs)
}

func NewBinomialSampler(N int, p float64) BinomialSampler {
    r := BinomialSampler(make([]float64, N+1))
    T := 0.0
    choice := 1.0
    for i := 0; i <= N; i++ {
        T += choice * math.Pow(p, float64(i)) * math.Pow(1-p, float64(N-i))
        r[i] = T
        choice *= float64(N-i) / float64(i+1)
    }
    return r
}

func WowSample(N int, p float64) int {
    if N%1000 != 0 {
        panic("N must be a multiple of 1000")
    }
    bs := NewBinomialSampler(1000, p)
    r := 0
    for i := 0; i < N; i += 1000 {
        r += bs.Sample()
    }
    return r
}

func main() {
    for i := 0; i < 1000; i++ {
        fmt.Println(WowSample(1000000, 0.0003))
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T02:18:31.770

我的结果显示 4 个 CPU 与 1 个 CPU 的大量并发：

Intel Core 2 四核 CPU Q8300 @ 2.50GHz x 4

源代码：更新（01/12/13 18:05）

```
$ go version
go version devel +adf4e96e9aa4 Thu Jan 10 09:57:01 2013 +1100 linux/amd64

$ time  go run temp.go
Number of CPUs:  1
real    0m30.305s
user    0m30.210s
sys     0m0.044s

$ time  go run temp.go
Number of CPUs:  4
real    0m9.980s
user    0m35.146s
sys     0m0.204s 
```

# python - 当作为参数传递时，您如何控制对象如何被其他函数“看到”？

> ID：14298524
> 
> 赞同：0
> 
> 时间：2013-01-12T22:19:04.653
> 
> 标签：python

例如，假设我有一个像这样的 Vector 类：

```
class Vector(object):
    def __init__(self, x=0.0, y=0.0):
        self.x = x
        self.y = y

    def __str__(self):
        return '(%s, %s)' % (self.x, self.y) 
```

如果我将此对象作为参数传递给函数，则函数将其视为

```
<__main__.Vector object at 0x02297E50> 
```

现在，我可以让函数提前*知道*Vector（可以这么说），以便它知道访问它的属性

```
def foo(vect1, vect2):
    return (vect2.x - vect1.x, vect2.y - vect1.y) 
```

但是如果我想要一个只接受一对坐标的通用函数呢？

```
def foo(p1, p2):
    return (p2[0] - p1[0], p2[1] -p1[1]) 
```

有没有办法让一个对象以特定的方式表示自己？例如，这样我就可以将我的 Vector 对象传递给上述通用函数，而所述函数不需要知道对象类型？那么它“看到”的只是构成对象属性的坐标吗？

希望这是有道理的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:20:55.743

您需要实现适当的[特殊方法](http://docs.python.org/2/reference/datamodel.html#special-method-names)；在您的情况下，您想要实施[`__getitem__()`](http://docs.python.org/2/reference/datamodel.html#object.__getitem__)以支持索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T22:22:28.983

您必须调整对象以实现某些[python 钩子](http://docs.python.org/2/reference/datamodel.html#special-method-names)以“通用”方式运行。

在您的第二个示例中，您可以实现[`__getitem__`挂钩](http://docs.python.org/2/reference/datamodel.html#object.__getitem__)以使其表现得像一个序列：

```
class Vector(object):
    # rest of the class

    def __getitem__(self, index):
        return (self.x, self.y)[index] 
```

或者做一个小示范：

```
>>> v = Vector(10, 20)
>>> v
<__main__.Vector object at 0x10866ad90>
>>> str(v)
'(10, 20)'
>>> v.x
10
>>> v[0]
10 
```

你已经[`__str__`](http://docs.python.org/2/reference/datamodel.html#object.__str__)为自己发现了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T23:24:12.077

在这种情况下，您可能需要考虑`namedtuple`：

```
>>> from collections import namedtuple
>>> Vector = namedtuple("Vector", "x y")
>>> v = Vector(1, 2)
>>> print v
Vector(x=1, y=2)
>>> assert v[0] == v.x 
```

# twitter - 不受速率限制的直播推文

> ID：14298539
> 
> 赞同：0
> 
> 时间：2013-01-12T22:21:13.290
> 
> 标签：twitter, request, jsonp

我正在创建一个仪表板，它将在制作时在地图上绘制启用地理的推文。最大的问题是，为了让我模拟它是真实的，每秒钟都会发出一个新的请求。

![在此处输入图像描述](../Images/b9f2841ee4297c2b2e551c9d2963cd08.png)

根据 Twitter 的 API 限制，对于 unAuth/OAth（分别），REST API 调用限制为每小时 150/350，因此每秒调用一次是行不通的。也许我不得不接受刷新延迟，但我很好奇是否有解决方法。

有没有办法让我拥有一个真正的实时提要，一旦用户发布推文，它就会在地图上放置一个点？

这是我的代码的一部分以供参考：

```
// url is set above with the search query
function firstQuery(terms, oldestTweet, page, pic) {
    getLimiter++;
    var encodedTerms = encodeURIComponent(terms);
    $.getJSON(url + '&page=' + page + '&max_id=' + oldestTweet + '&include_entities=1&result_type=recent&rpp=100&callback=?', function(tweets) {
        if ($(tweets.results).length) {
            if (storedLatestTweet < tweets.results[0].id) {
                storedLatestTweet = tweets.results[0].id;
            }
            page++;
            tweetCount = tweetCount + tweets.results.length;
            storedOldestTweet = tweets.results[tweets.results.length - 1].id;
            harvest(tweets, pic);
            firstQuery(terms, oldestTweet, page, pic);
        } else {
            // continue to loop if more need to be plotted with the oldest tweet id known
            if (getLimiter < 65 && tweetNumber < 10) {
                page = 1;
                firstQuery(terms, storedOldestTweet, page, pic);
            }
            return latestLoop(); // loops the request
        }
    });
}

function latestLoop() {
    latest(terms, storedLatestTweet, page, pic);

    // use queryLoop so that the timeout can be killed on new search
    queryLoop = setTimeout(function() {
        latestLoop();
    }, 1000); // the loop rate of the request...1 second isn't gonna work
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:06:26.937

You can do live processing on twitter through Twitter Stream API. But stream api doesn't send you all tweets, you have to specify either keywords to filter tweets containing given keywords or userIds to follow tweets coming from given users or geo location to filter tweets coming from a particular place. Also there are limits on number of keywords, user ids to follow etc. And lastly twitter will give you upmost 1% percent of the tweets in the global traffic. So for example if you come up with a filter which tracks less than 1% of the global trafic you will get all the tweets (in theory) otherwise you will miss some tweet as twitter won't share them with you.

还有一个公共示例流，它为您提供了一些来自 twitter 的示例数据。如果您只是为了实验而这样做，它可以帮助您。[https://dev.twitter.com/docs/api/1.1/get/statuses/sample](https://dev.twitter.com/docs/api/1.1/get/statuses/sample)

我对你的建议是确定你想在 twitter 上关注什么，并为流 api 提供一个聪明的过滤器，并从你的地图中跟踪结果。您还可以通过定期再次调用搜索 api 来填充应用程序中丢失的数据来提高结果（有时由于直播中的多种原因导致推文未交付，您可以通过搜索 api 检索它们）

[https://dev.twitter.com/docs/streaming-apis/streams/public](https://dev.twitter.com/docs/streaming-apis/streams/public)

# sql - 查找每部电影 SQL 的平均评分

> ID：14298540
> 
> 赞同：-2
> 
> 时间：2013-01-12T22:21:22.967
> 
> 标签：sql, database, stanford-nlp, rating, movie

我目前正在参加关于数据库的在线斯坦福课程，如果您能帮我解决这个 sql 问题，我将不胜感激。对不起，我是一个完全的菜鸟。

表电影：

```
mID | title | year | director 
```

表评级

```
rID | mID | stars | ratingDate 
```

表审阅者

```
rID | name 
```

列出电影标题和平均评分，从最高评分到最低评分。如果两部电影或多部电影的平均评分相同，请按字母顺序列出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:47:40.590

SELECT distinct m.title, ar.avgRating FROM [Reviewer] rev JOIN [Rating] rate ON rev.rID = rate.rID JOIN [Movie] m ON rate.mID = m.mID JOIN (SELECT mID FROM [Rating] GROUP BY mID 计数（不同的 rID）> 1 ） m.mID 上的 m2 = m2.mID 加入（从 [Rating] GROUP BY mID 中选择 mID，AVG(stars) 作为 avgRating）ar on m.mID = ar.mID ORDER BY avgRating描述

# xcode - 在 Xcode 4.5 中，为什么我不能从 AssistantEditor 的“手动”中为右侧窗格选择任何文件？

> ID：14298541
> 
> 赞同：13
> 
> 时间：2013-01-12T22:21:40.580
> 
> 标签：xcode, editor

长期 Xcode 3 用户。Xcode 4.5 的新手。当使用 Xcode 的新 AssistantEditor（拆分窗格窗口）功能并选择“手动”作为内容时，有时它可以让我从项目的根目录向下导航，这样我就可以访问我想要的任何文件。但是，有时“手动”只显示一个文件。

例如，在右窗格的下方，我只能选择 MainViewController.h，而我的项目中没有其他内容，无论选择在 Project Navigator 中的哪个位置或左窗格中打开的内容如何。如此基本的东西不清楚，这真是令人沮丧。

![无法选择其他文件](../Images/3722f1c2dd42a95b8b277240d54b2454.png)

对于一个伪解决方法，我将我的首选项更改为以下内容，这让我可以按住 Option 键单击一个文件以在另一个窗格中打开它。好一点，但仍然令人沮丧。

![在此处输入图像描述](../Images/08a901df5362f99478f015d888953e99.png)

顺便说一句，我个人觉得这真的很令人沮丧，它不够聪明，无法知道您的焦点是否在第二个（最右边）窗格中并且您在 Project Navigator 中更改了选择，更改了该窗格，而不是第一个。以这种方式并排引用不同的文件会容易得多。

## 更新：呵呵！

好吧，显然我是盲人。原来你可以让它跟随焦点编辑器。（我也在那里！）

![在此处输入图像描述](../Images/57e44b8f993d8a0aa2f1eba564909a7d.png)

虽然这并不能回答我为什么“手动”项目看似损坏的问题，但这实际上是我更喜欢的工作方式。不过，如果有人发现这个问题，我会保持开放状态。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-09-15T18:08:20.503

您可以显示助手编辑器：

[![助理编辑](../Images/36aff7779097a72c947be8c512e3cd0a.png)](https://i.stack.imgur.com/NlqxH.png)

并将模式更改为`Manual`：

[![手动选择](../Images/4076faf4ff31f5cd0a10052bf860d8eb.png)](https://i.stack.imgur.com/t2ePV.png)

然后您可以使用快速打开文件`Cmd+Shift+O`，然后点击`Enter`在左侧编辑器`Alt+Enter`中打开它，或者在右侧编辑器中打开它。

[![快速打开](../Images/876c0910c12c5daf6e9cf2c1f4c8af7d.png)](https://i.stack.imgur.com/EExkL.png)

您可以在项目导航器上做类似的事情：`click`在左侧编辑器中打开一个文件，或者`Alt+click`在右侧编辑器中打开它。

您还可以使用标签：

[![新标签](../Images/3216a971b8f838df335b9a7313490c46.png)](https://i.stack.imgur.com/rDykD.png)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-18T14:44:05.347

我不确定为什么会发生这种情况，但它至少存在于 xCode 5 和 xCode 6 中。尝试更改为自动，然后再次选择手动。如果多次尝试后仍不能解决您的问题，请关闭 xCode 并重新打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-09T16:15:24.730

对我有用的是通过单击该窗格右上角的编译器警告导航器箭头来切换到右窗格中的另一个文件。然后“手动”下拉菜单再次显示了整个工作区结构。Xcode 界面中非常烦人的错误。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-08-06T08:59:09.200

根据我的经验，右侧总是与左侧的关系，因此如果我选择左侧的 .m 文件，则 .h 文件将显示在您的右侧，反之亦然。

# web-scraping - lxml：将网页源转换为元素树进行抓取

> ID：14298546
> 
> 赞同：1
> 
> 时间：2013-01-12T22:21:57.383
> 
> 标签：web-scraping, lxml

我错过了什么 - lxml 可用于抓取网页，对吗？我的意思是，即使是那些没有完美 html 的？我正在使用 BeautifulSoup，但我希望更快。

我发誓我阅读了文档，但我只是没有看到如何将网页源变成一棵树。我读到的所有内容都是关于从头开始创建树的，一次一个元素。

我愿意

```
from lxml import etree

url = urllib2.urlopen(url)
source = url.read() 
```

然后什么？顺便说一句，如果有帮助，我可以将源代码转换为 unicode。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:41:48.857

您必须使用[`lxml.html`package](http://lxml.de/lxmlhtml.html)`lxml` ，这是一个处理 HTML的专用包——[它在文档的第 13 章中有](http://lxml.de/lxmldoc-3.0.2.pdf)详细说明。顺便说一下，这个包是基于 lxml 的 HTML 解析器的。

**插图**

```
from lxml import etree, html

htmltree = html.parse(url)

print(etree.tostring(htmltree, pretty_print=True)) 
```

此外，您可能想去[这里](https://stackoverflow.com/a/603630/664424)、[这里](https://stackoverflow.com/a/3569555/664424)和[这里](https://stackoverflow.com/a/9920703/664424)了解其他人如何利用该包。

# java - 奇怪的 Java 画布大小输出

> ID：14298558
> 
> 赞同：0
> 
> 时间：2013-01-12T22:23:12.140
> 
> 标签：java, canvas, awt

我是 Java 新手（虽然我对 JavaScript 有广泛的了解），但
我正在尝试使用`Canvas`它，这导致了这个奇怪的问题。[在这里](http://pastebin.com/5bxJrvtr)
检查代码。如您所见，在我定义了 的大小之后，我正在尝试打印它。 但它不能正确打印尺寸。
`Canvas`

```
 setMinimumSize(new Dimension(WIDTH,HEIGHT));
            setMaximumSize(new Dimension(WIDTH,HEIGHT));
            setPreferredSize(new Dimension(WIDTH,HEIGHT));

            frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLayout(new BorderLayout());
            frame.add(this, BorderLayout.CENTER);
            frame.pack();
            frame.setResizable(false);
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);

            System.out.println(getWidth()); 
```

为什么尺寸变了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:46:01.593

Preferred/min/max sizes are "suggestions" to the layout managers of how your component might like to be laid out, there us no gurenttee that they will used.

A BorderLayout will try and use the available space to fill the component into,

Now, with pack, the frame's size has been set (normally) to the preferred size of the content pane.

So, now your asking, why is it not set to what it supplied. The answer is, the frame also needs to include the frame decoration, which subtracts from the usable space (frame size - decoration insets = available space) , you also need to take into consideration the menu bar

# 3d - CGAL 3d线与三角形相交的表现

> ID：14298560
> 
> 赞同：2
> 
> 时间：2013-01-12T22:23:34.590
> 
> 标签：3d, geometry, intersection, cgal

有没有人使用过 CGAL 3d 线和三角形相交？**与快速最小存储射线三角形相交** [算法](http://www.cs.virginia.edu/~gfx/Courses/2003/ImageSynthesis/papers/Acceleration/Fast%20MinimumStorage%20RayTriangle%20Intersection.pdf)相比，它的性能如何？谢谢。

# php - MySql 和服务器的问题

> ID：14298561
> 
> 赞同：-1
> 
> 时间：2013-01-12T22:23:39.407
> 
> 标签：php, mysql

我在我的服务器（不是本地主机）中创建了一个数据库，当我尝试使用 php 文件将一些数据放入我的数据库时，它显示两个警告：“无法建立到服务器的链接”和“无法连接到 'localhost' (10061)' 上的 MySQL 服务器。

我做了很多事情来使它正确，但没有任何效果=（

这里有一点代码：

```
 <?php

define('DB_USER',"X"); 
define('DB_PASSWORD',"X");
define('DB_DATABASE',"X");
define('DB_SERVER',"www.X.com.br");

?>
$con = mysql_connect(DB_SERVER,DB_USER, DB_PASSWORD) or die(mysql_error());
$db = mysql_select_db(DB_DATABASE) or die(mysql_error()); 

require_once __DIR__. '/db_connect.php';

$db = new DB_CONNECT();
$query = "SELECT *FROM carteira";

$result = mysql_query($query) or die(mysql_error()); 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:25:24.500

该错误似乎是不言自明的，您可能应该再次安装所有内容，或者检查此 [以](https://www.google.com/search?q=Can%27t%20connect%20to%20MySQL%20server%20on%20%27localhost%27%20%2810061%29&rlz=1C1AFAB_enAE449AE449&oq=Can%27t%20connect%20to%20MySQL%20server%20on%20%27localhost%27%20%2810061%29&aqs=chrome.0.57&sourceid=chrome&ie=UTF-8)获取更多相同信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:27:22.967

您应该发布一些代码 :) 也许您只是没有连接到正确的服务器。也许你和服务器之间有一些防火墙不允许你连接。正如你自己所说：

> 无法连接到“localhost”上的 MySQL 服务器 (10061)

您的脚本连接到 localhost

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T22:41:17.010

假设 MySQL 服务器正在运行（mysql 进程并且可能服务已启动）：

Windows 通常不会设置为将本地环回地址 127.0.0.1（MySQL 绑定的）映射到 localhost。

请改用“127.0.0.1”。

请参阅：[MySQL 使用 127.0.0.1 但不使用 localhost？](https://stackoverflow.com/questions/2283746/mysql-working-with-127-0-0-1-but-not-working-with-localhost)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-12T22:26:12.863

听起来您没有正确连接到数据库。在尝试编辑表中的内容之前，首先确保您实际连接到数据库。

```
<?php
$con = mysql_connect("localhost","username","password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

// some code

mysql_close($con);
?> 
```

此代码将尝试连接，如果没有，它会让您知道您没有连接。

如果您知道您的连接详细信息是正确的，但仍然无法连接，可能是因为远程访问权限错误。假设您连接到一个新的远程数据库并且您的工作也不是由该合作伙伴托管；这意味着您的主机服务器不喜欢远程请求，这意味着您需要转到用户面板并将您的 IP 地址添加到例外访问列表中，以授予您远程访问数据库的权限。

# java - 逻辑java的词频计数器问题

> ID：14298566
> 
> 赞同：0
> 
> 时间：2013-01-12T22:24:12.073
> 
> 标签：java

我正在构建一个基本的词频计数器。代码如下：

```
public static List<Frequency> computeWordFrequencies(List<String> words) 
{
    List<Frequency> list_of_frequency = new ArrayList<Frequency>();
    List<String> list_of_words = words;
    int j = 0;
    for(int i=0; i<list_of_words.size(); i++)
    {

        String current_word = list_of_words.get(i);
        boolean added = false;
        if(list_of_frequency.size() == 0)
        {
            list_of_frequency.add(new Frequency(current_word, 1));
            System.out.println("added " + current_word);
        }
        else
        {

            System.out.println("Current word: " + current_word);
            System.out.println("Current Frequency: " + list_of_frequency.get(j).getText());
            if(list_of_frequency.contains(current_word))
            {
                list_of_frequency.get(j).incrementFrequency();
                System.out.println("found... incremented " + list_of_frequency.get(j).getText() + " frequency");
                added = true;
            }
            else
            {
                list_of_frequency.add(new Frequency(current_word, 1));
                System.out.println("added " + current_word);
                added = true;
            }
        }
    }
} 
```

我得到的输出是：

```
added I
Current word: am
Current Frequency: I
added am
Current word: very
Current Frequency: I
added very
Current word: good
Current Frequency: I
added good
Current word: at
Current Frequency: I
added at
Current word: being
Current Frequency: I
added being
Current word: good
Current Frequency: I
added good
Total item count: 7
Unique item count: 7
I:1
am:1
very:1
good:1
at:1
being:1
good:1 
```

因此，我需要一个 for 循环来遍历“list_of_frequency”，但如果这样做，我会遇到其他问题，例如重复添加单词。我的逻辑在这里吗？这个项目会有更好的方法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:37:19.440

你可以使用类的[频率](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#frequency%28java.util.Collection,%20java.lang.Object%29)方法来做到这一点`Collections`

这是一个示例：

```
public void wordFreq(){
String text = "hello bye hello a bb a bye hello";

        List<String> list = Arrays.asList(text.split(" "));

        Set<String> uniqueWords = new HashSet<String> (list);
        for (String word : uniqueWords) {
            System.out.println(word + ": " + Collections.frequency(list, word));
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T22:52:28.053

你把事情复杂化了。

你只需要几行：

```
public static Map<String, Integer> getFrequencies(List<String> words) {
    Map<String, Integer> freq = new HashMap<String, Integer>();
    for (String word : words) {
        Integer i = freq.get(word);
        freq.put(word, i == null ? 1 : i + 1);
    }
    return freq;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T22:36:32.153

在 else 部分中添加此代码。你应该做的是

1.  在循环中检查单词是否已经在列表中
2.  如果第 1 部分为真，则增加其频率
3.  否则将其放入频率为 1 的列表中

    ```
    for(j = 0; j < list_of_frequency.size; j++)
       if(list_of_frequency.get(i).getText().equals(current_word))
          list_of_frequency.get(i).frequency++; // increment frequency 
                                  //if word is already encountered before 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T22:38:09.953

我认为要运行得更快，您应该使用另一种算法，首先对列表进行排序：

```
 1) sort your list of string (cf. java.util.Collections.sort())
  2) in pseudo code :
 iterate your sorted list
 current_word = word of current iteration
 if it's a new word (! current_word.equals( oldWord) )
 counter = 1
 if (current_word.equals( oldWord)) {
    counter++
     store current_word in variable oldWord 
 }
 when the word change create your Frequency(oldWord, counter) and add to the list of frequencies 
```

所以你不需要每次都检查你的频率列表，你一个词插入一次，这样更快。

由于列表 list_of_frequency 的所有条目都是唯一词，因此您也可以使用 Set 而不是 list_of_frequency 列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T22:38:46.430

用这个替换你的方法。通过在分析数据时使用地图，您将获得更好的性能。

```
public static List<Frequency> computeWordFrequencies(List<String> words) {
    Map<String, Integer> counts = new HashMap<String, Integer>();
    for(String word : words) {
        Integer current = counts.get(word);
        if(current != null) {
            counts.put(word, current+1);
        }
        else counts.put(word, 1);
    }

    // Then, if you really need that list of Frequency
    List<Frequency> list_of_frequency = new ArrayList<Frequency>();

    for(String s : counts.keySet()) {
        list_of_frequency.add(new Frequency(s, counts.get(s)));
    }

    return list_of_frequency;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T22:51:31.840

我会这样进行：

```
List<String> words = Arrays.asList("foo", "bar", "qux", "foo");

Map<String, AtomicInteger> frequencyMap = new HashMap<String, AtomicInteger>();
for (String word : words)
{
    AtomicInteger freq = frequencyMap.get(word);
    if (freq == null) {
        frequencyMap.put(word, new AtomicInteger(1));
    }
    else
    {
        freq.incrementAndGet();
    }
}

for (String word : frequencyMap.keySet())
{
    System.out.println(word + " :" + frequencyMap.get(word));
} 
```

通过使用[AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)，您可以轻松地增加频率计数器。

# vb.net - 我如何启动您浏览和放置的程序

> ID：14298567
> 
> 赞同：0
> 
> 时间：2013-01-12T22:24:14.217
> 
> 标签：vb.net, button, textbox

我想做一个浏览按钮，当你搜索你的程序并且`clicked ok`它进入一个`TextBox`*（我已经得到这个）*但是我想用另一个按钮启动你选择的程序。

我怎样才能做到这一点？

这是我已经拥有的代码：

```
Public Class Form1

Private Sub Button4_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button4.Click

End Sub
Private Sub Button5_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button5.Click

End Sub
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click

End Sub
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

End Sub
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

End Sub

Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    Using a As New OpenFileDialog()
        If a.ShowDialog() = DialogResult.OK Then
            Me.TextBox1.Text = a.FileName
        End If
    End Using
End Sub

Private Sub Button6_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button6.Click
    Using b As New OpenFileDialog()
        If b.ShowDialog() = DialogResult.OK Then
            Me.TextBox2.Text = b.FileName
        End If
    End Using
End Sub

Private Sub Button7_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button7.Click
    Using c As New OpenFileDialog()
        If c.ShowDialog() = DialogResult.OK Then
            Me.TextBox3.Text = c.FileName
        End If
    End Using
End Sub

Private Sub Button8_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button8.Click
    Using d As New OpenFileDialog()
        If d.ShowDialog() = DialogResult.OK Then
            Me.TextBox4.Text = d.FileName
        End If
    End Using
  End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:57:49.567

您可以使用[Process.Start](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)

将此添加到您的按钮单击事件（已更新到 VB.net）

```
if Not String.IsNullorEmpty(TextBox1.Text)    
   Process.Start(me.TextBox1.Text)
end if 
```

# jquery - Chrome 扩展预加载 Ajax 请求

> ID：14298579
> 
> 赞同：1
> 
> 时间：2013-01-12T22:25:14.013
> 
> 标签：jquery, google-chrome-extension

我有一个 Chrome 扩展程序。目前，当扩展打开时，使用 JQuery 发出 $.ajax 请求。根据请求的结果，扩展弹出窗口将格式化并显示请求数据。我的解决方案是功能性的，但缺乏用户体验，因为每次单击我的扩展程序时，我都会在发出 ajax 请求时显示 1-2 秒的“加载”消息。

在打开我的扩展程序之前，有什么方法可以执行这个 $.ajax 请求吗？也许当浏览器打开时，或者标签页打开时？如果可以在弹出窗口打开之前发出 $.ajax 请求，那就太好了，所以一旦用户单击我的扩展程序，数据就会立即显示 - 没有“加载”消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T05:53:54.743

在加载扩展后和点击浏览器弹出窗口之前使用背景\事件页面进行制作`$.ajax request`，您也可以在点击之前格式化弹出页面。

`background`如果要将更改从页面传递到页面，则需要使用消息通信`popup`。

# 参考

*   [背景页面](https://developer.chrome.com/extensions/background_pages.html)
*   [讯息沟通](https://developer.chrome.com/extensions/messaging.html)
*   [活动页面](https://developer.chrome.com/extensions/event_pages.html)

# html - 滚动时需要在顶部保持栏的代码

> ID：14298584
> 
> 赞同：0
> 
> 时间：2013-01-12T22:25:31.447
> 
> 标签：html

我有一个 HTML 和 CSS 栏，它被添加到网站的顶部，并且需要一些代码在向下滚动时将其保持在顶部。

我最好使用 JavaScript 或任何有效的东西，我只需要一些东西来保持它在顶部。

帮助表示赞赏！

看看这个网站我正在寻找什么 - [http://9gag.com/](http://9gag.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:53:46.910

[9gag.com](http://www.9gag.com/)也`position:fixed;`用于标题，但在您的情况下，它使其成为`position:fixed !important`解决方案，因为它被覆盖在您将其放在网站上的位置下方（顶部）。

CSS：

```
#netbar{position:fixed !important;} 
```

[现场演示](http://jsfiddle.net/mDk9Y/1/show)| [演示源](http://jsfiddle.net/mDk9Y/1/)

**编辑：**

正如您所提到的，在不牺牲吸盘位置的情况下实现这一目标的最简单方法是使用 jQuery

```
$(document).ready(function () {
  $(window).scroll(function () {
    $("#enjin-bar").css({
      "top": Math.max($('body').scrollTop(), $('html').scrollTop()) + 4
    });
    $("#netbar").css({
      "top": Math.max($('body').scrollTop(), $('html').scrollTop())
    });
  });
}); 
```

[现场演示](http://jsfiddle.net/Ryrez/show)| [演示源](http://jsfiddle.net/Ryrez/)

它可以工作，但是它令人难以置信的故障；`#netbar{position:fixed !important;}`只需通过从您的站点中删除该行再次将 netbar 设置为绝对

或者，如果您愿意为了减少故障而牺牲吸盘的位置，请改用以下代码：

```
$(document).ready(function () {
  $(window).scroll(function () {
    $("#enjin-bar").css({
      "top": Math.max($('body').scrollTop(), $('html').scrollTop()) + 4
    });
  });
}); 
```

enjin-bar 不是 netbar 的一部分，这就是滚动时它不跟随 netbar 的主要原因，因此绕过它的最简单方法是使用 jQuery

[现场演示](http://jsfiddle.net/TzZJ8/show)| [演示源](http://jsfiddle.net/TzZJ8/)

**编辑2：**

将粘贴中的代码替换为以下代码：

```
<div id="netbar">
    <div id="discover" role="directory">
        <ul>
    <li class="suckerfish">
        <span class="sitelogo">LinkyCraft</span>
        <ul class="section-drop">
            <li class="link-two"><a href="http://www.linkycraft.net/servers">Server Status</a></li>
            <li class="link-three"><a href="http://www.linkycraft.net/home">Survival Home</a>
            <li class="link-five"><a href="http://www.monlotron.enjin.com/">Our Designer</a>
</li>
        </ul>
    </li>
</ul>
    </div>
</div>

<style>

div#netbar a {
    color: #DEE3E6;
}
div#netbar a:hover {
    color: #FFFFFF;
}
div#netbar li {
    float: left;
    margin: 0;
    position: relative;
}
div#netbar > a {
    border-right: 1px solid #333333;
    display: block;
    float: left;
    line-height: 29px;
    padding: 0 10px;
}
div#netbar > a:hover {
    background: none repeat scroll 0 0 #222222;
}
div#netbar .suckerfish {
    z-index: 9998;
}
div#netbar .suckerfish > .section-drop {
    background-color: #222222;
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;
    border-top: medium none;
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
    position: absolute;
    z-index: 2;
    float: left;
}
div#netbar .suckerfish > a, div#netbar .suckerfish > span {
    display: block;
    font-size: 12px;
    line-height: 12px;
    padding: 8px 16px 9px 10px;
    white-space: nowrap;
}
div#netbar .suckerfish ul li {
    float: none !important;
    margin: 0;
    width: auto;
}
div#netbar .suckerfish:hover {
    background-color: #222222;
}

.suckerfish .section-drop{
    left: -9999px;
}

div#netbar {
    border-radius: 0 0 3px 3px;
    -moz-border-radius: 0 0 3px 3px;
    -webkit-border-radius: 0 0 3px 3px;
    background:-moz-linear-gradient(top,#4d4d4d 0,#343434 100%);
    background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#4d4d4d),color-stop(100%,#343434));
    background:-webkit-linear-gradient(top,#4d4d4d 0,#343434 100%);
    background:-o-linear-gradient(top,#4d4d4d 0,#343434 100%);
    background:-ms-linear-gradient(top,#4d4d4d 0,#343434 100%);
    background:linear-gradient(top,#4d4d4d 0,#343434 100%);
    -moz-box-shadow:inset 0 0 1px #666,1px 1px 2px rgba(0,0,0,.65);
    -webkit-box-shadow:inset 0 0 1px #666,1px 1px 2px rgba(0,0,0,.65);
    box-shadow:inset 0 0 1px #666,1px 1px 2px rgba(0,0,0,.65);
    color:#dee3e6;
    height:28px;
    padding:0;
    position:absolute;
    width:4000px;
    left:-1460px;
    top: 0;
    z-index:4;
    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    box-sizing:border-box;
    margin: 0;
    padding: 0;
    border: 0;
    font-weight: inherit;
    font-style: inherit;
    font-size: 100.01%;
    font-family: inherit;
    vertical-align: baseline;
    outline: 0;
}

div#netbar li.suckerfish  {
    position: relative;
    left: 1460px;
}

 #enjin-bar  {margin-left: 175px;}

div#netbar .sitelogo {
    background: url("http://files.enjin.com/93809/LinkyCraft/Images/Headers/Netbar.png") no-repeat scroll 6px 1px transparent;
    text-indent: -9999px;
    width: 150px;
}

#enjin-bar {
z-index: 25; 
}

div#enjin-bar > div.left > a:first-child {
display: none;
}

#netbar li {
    list-style: none outside none;
}
div#netbar a {
    color: #DEE3E6;
}

div#netbar .suckerfish {
    z-index: 9998;
}
div#netbar .suckerfish ul li {
    float: none !important;
    margin: 0;
    width: auto;
}
div#netbar .suckerfish:hover {
    background-color: #222222;
}
div#netbar .suckerfish > ul li a {
    display: block;
    font-size: 12px;
    line-height: 12px;
    padding: 6px 12px;
    white-space: nowrap;
}
div#netbar .suckerfish > ul li a:hover {
    background-color: #111111;
}
div#netbar .suckerfish > ul li:last-child a {
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;
}
div#netbar .suckerfish > span:after, div#netbar .suckerfish > a:after {
    border-color: Silver transparent transparent;
    border-right: 3px dashed transparent;
    border-style: solid dashed dashed;
    border-width: 3px 3px 0;
    content: "";
    display: block;
    height: 0;
    line-height: 0;
    padding-top: 1px;
    position: absolute;
    right: 6px;
    top: 13px;
    width: 0;
}

div#netbar div#discover {
    float: left;
    height: 28px;
}
div#netbar div#discover ul > li {
    float: left;
    height: 28px;
    line-height: 28px;
    position: relative;
}
div#netbar div.help-links {
    border-right: 1px solid #333333;
    float: left;
}
div#netbar div#discover ul li span {
    border-right: 1px solid #333333;
}
div#netbar div#discover ul li span:hover {
    color: #FFFFFF;
    cursor: default;
}
div#netbar div#discover li.suckerfish ul {
    top: 27px;
    width: 200px;
    padding-left: 0;
}
div#netbar div#discover li.suckerfish ul li a {
    background-position: left center;
    background-repeat: no-repeat;
    padding-left: 30px;
}

.suckerfish:hover .section-drop{
    left: 0px;
}
</style>
<script type="text/javascript">
$(document).ready(function () {
  $(window).scroll(function () {
    $("#enjin-bar").css({
      "top": Math.max($('body').scrollTop(), $('html').scrollTop()) + 4
    });
    $("#netbar").css({
      "top": Math.max($('body').scrollTop(), $('html').scrollTop())
    });
  });
});

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37359442-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:27:06.213

尝试添加这个：

```
div#netbar { position: fixed; top: 0; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T22:42:26.730

```
div#netbar
{
    position:fixed;
} 
```

将位置的属性设置为固定可能会解决您的问题！

# php - 如何以正确的方式制作 Zend Framework 库？

> ID：14298587
> 
> 赞同：0
> 
> 时间：2013-01-12T22:25:52.443
> 
> 标签：php, zend-framework

我有一些可重用的代码，它们取决于某些数据库的存在。所以我需要确保在我的库中存在一个数据库。正确的方法是什么？

我正在考虑开设一门课程，如果他们不存在，可以设置表格。是否有任何众所周知的设计模式或方法可以使用？

PS：我正在使用 ZF 1。

**编辑**：正确地说，我的意图是我们，程序员，正确：优雅，这意味着：可重用，可配置，平台独立，依赖少，低耦合。

**编辑**：在第一次评论和回答之后，我将“模块”这个非常糟糕的选择改为“库”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T05:13:20.333

我只想创建一个这样的类：

```
class My_SchemaChecker
{
    // db adapter
    protected $db;

    public __constructor($db)
    {
        $this->db = $db;
    }

    public function ensureSchemaExists()
    {
        if (!$this->doesSchemaExist()){
            $this->createSchema();
        }
    }

    protected function doesSchemaExist()
    {
        // check that tables, etc exist
    }

    protected function createSchema()
    {
        // issue queries to create desired schema
    }
} 
```

用法是：

```
$checker = new My_SchemaChecker($db);
$checker->ensureSchemaExists(); 
```

# drag-and-drop - AngularJS - 如何制作可拖动的树？

> ID：14298588
> 
> 赞同：9
> 
> 时间：2013-01-12T22:25:53.890
> 
> 标签：drag-and-drop, tree, angularjs

我想创建一个树状结构，用户可以在其中拖放叶子。我的出发点如下：

**HTML**

```
<div ng:controller="controller">
  <ul ui-sortable ng-model="items" ui-options="{connectWith: '.item'}" class="item">
    <li ng-repeat="item in items" class="item">
      {{ item.name }}
      <ul ui-sortable ng-model="item.children" ui-options="{connectWith: '.item'}" class="item">
        <li ng-repeat="item in item.children" class="item">{{ item.name }}</li>
      </ul>
    </li>
  </ul>

  <pre>{{ items | json }}</pre>
</div>

<script src="http://code.angularjs.org/1.0.2/angular.min.js"></script>
<script src="https://raw.github.com/angular-ui/angular-ui/master/build/angular-ui.min.js"></script> 
```

**咖啡脚本**

```
myapp = angular.module 'myapp', ['ui']

myapp.controller 'controller', ($scope) ->

    $scope.items = [
      {id: 1, name: 'Item 1', children: [
        {id: 5, name: 'SubItem 1.1', children: [
          {id: 11, name: 'SubItem 1.1.1', children: []},
          {id: 12, name: 'SubItem 1.1.2', children: []}
        ]},
        {id: 6, name: 'SubItem 1.2', children: []}
      ]},
      {id: 2, name: 'Item 2', children: [
        {id: 7, name: 'SubItem 2.1', children: []},
        {id: 8, name: 'SubItem 2.2', children: []}
        {id: 9, name: 'SubItem 2.3', children: []}
      ]},
      {id: 3, name: 'Item 3', children: [
        {id: 10, name: 'SubItem 3.1', children: []}
      ]}
    ]

angular.bootstrap document, ['myapp'] 
```

代码也在这个 JSFiddle 中：http: [//jsfiddle.net/bESrf/1/](http://jsfiddle.net/bESrf/1/)

在我的“真实”代码中，我不是只为子级设置一个级别，而是将第二个级别提取`<ul>`到模板中并递归渲染，效果很好，但我找不到在 JSFiddle 中执行此操作的方法。

递归渲染它并且仍然允许拖放会改变由 ng-model 表示的对象和子对象数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-21T04:36:03.713

看看这个例子：http: [//jsfiddle.net/furf/EJGHX/](http://jsfiddle.net/furf/EJGHX/)

我刚刚完成了这个解决方案，所以它还没有被正确记录，但你应该能够为你的解决方案挖掘它。

您将需要使用一些东西：

1.  指令`ezTree`- 渲染树
2.  [用于 jQuery UI 的 Manuele J Sarfatti 的 nestedSortable 插件](https://github.com/mjsarfatti/nestedSortable)
3.  （可选）`uiNestedSortable`指令 - 从您的模板中启用nestedSortable。
4.  用于更新模型的控制器代码 - 请参阅`$scope.update`

**使用`ezTree`指令**

给定一个递归数据结构：

```
$scope.data = {
  children: [{
    text: 'I want to create a tree like structure...',
    children: [{
      text: 'Take a look at this example...',
      children: []
    }]
  }]
}; 
```

此模板将构建树：

```
<ol>
  <li ez-tree="child in data.children at ol">
    <div>{{item.text}}</div>
    <ol></ol>
  </li>
</ol> 
```

`ez-tree`表达式应该写为`item in collection at selector`where is the `item`iterated child (ala `ng-repeat`)，`collection`是根级集合，并且`selector`是指令应该递归的模板内节点的 CSS 选择器。集合的终端属性的名称，在本例`children`中将用于递归树，在本例中为`child.children`. *这可以重写为可配置的，但我将把它作为练习留给读者。*

**使用`uiNestedSortable`指令**

```
<ol ui-nested-sortable="{ listType: 'ol', items: 'li', doNotClear: true }"
  ui-nested-sortable-stop="update($event, $ui)">
</ol> 
```

该`ui-nested-sortable`属性应包含 nestedSortable 插件的 JSON 配置。该插件要求您指定`listType`和`items`。我的解决方案要求`doNotClear`是`true`. 使用 为事件分配回调`ui-nested-sortable-*eventName*`。我的指令为回调提供可选的 $event 和 $ui 参数。有关其他选项，请参阅nestedSortable 的文档。

**更新您的模型**

给这只猫剥皮的方法不止一种。这是我的。在停止事件上，它提取元素作用域的子属性来确定移动了哪个对象，提取元素父作用域的子属性来确定对象的目的地，以及元素的位置来确定对象的位置在其目的地。然后它遍历数据结构并将对象从其原始位置移除并将其插入到新位置。

```
$scope.update = function (event, ui) {

  var root = event.target,
    item = ui.item,
    parent = item.parent(),
    target = (parent[0] === root) ? $scope.data : parent.scope().child,
    child = item.scope().child,
    index = item.index();

  target.children || (target.children = []);

  function walk(target, child) {
    var children = target.children,
      i;
    if (children) {
      i = children.length;
      while (i--) {
        if (children[i] === child) {
          return children.splice(i, 1);
        } else {
          walk(children[i], child)
        }
      }
    }
  }
  walk($scope.data, child);

  target.children.splice(index, 0, child);
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-04T01:57:46.527

通过 furf 对小提琴进行轻微编辑，使其在 IE 中工作。

当第二个参数为 null 时，IE 在 insertNode 上给出错误，因此在这种情况下，请改用 appendNode。

[http://jsfiddle.net/michieljoris/VmtfR/](http://jsfiddle.net/michieljoris/VmtfR/)

```
if (!cursor) parentNode.appendChild(cached.element);
else parentNode.insertBefore(cached.element, cursor); 
```

Nested Sortable 插件在 js 中内联，因为 IE 从 github 包含时会出现 MIME 类型不匹配。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-06T04:56:24.223

试试 Angular-NestedSortable，它是一个 Angularjs 插件，可以对嵌套列表进行排序和绑定数据，不需要依赖 jQuery。 [https://github.com/jimliu/Angular-NestedSortable](https://github.com/jimliu/Angular-NestedSortable)

# math - Scipy arpack eigs 与 eigsh 特征值数

> ID：14298593
> 
> 赞同：3
> 
> 时间：2013-01-12T22:26:42.733
> 
> 标签：math, numpy, scipy, arpack

在 scipy 的 ARPACK 绑定中，无法计算矩阵的所有特征值。但是，我发现 eigsh 能够计算 n - 1 个特征值，而 eigs 只能计算 n - 2 个特征值。谁能验证这实际上是 ARPACK 的基本限制，而不是 scipy 中的错误？

这是示例代码：

```
import scipy.sparse, scipy.sparse.linalg
t = scipy.sparse.eye(3,3).tocsr()
l,v = scipy.sparse.linalg.arpack.eigs(t,k=2)
l,v = scipy.sparse.linalg.arpack.eigsh(t,k=2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:37:25.623

这是 ARPACK 限制：

[http://forge.scilab.org/index.php/p/arpack-ng/source/tree/master/SRC/dnaupd.f](http://forge.scilab.org/index.php/p/arpack-ng/source/tree/master/SRC/dnaupd.f)

[http://forge.scilab.org/index.php/p/arpack-ng/source/tree/master/SRC/dsaupd.f](http://forge.scilab.org/index.php/p/arpack-ng/source/tree/master/SRC/dsaupd.f)

弄错这将是一个奇怪的错误...

# android - getSelectedText on inactive InputConnection-working on retrieve Title Column from CalendarContract.Events in android

> ID：14298596
> 
> 赞同：2
> 
> 时间：2013-01-12T22:26:55.590
> 
> 标签：android, calendar, main-activity

当我单击该按钮时，它应该（暂时）从 CalendarContract.Events 检索标题列，然后设置在编辑文本视图中检索到的标题。我使用的代码是：

```
public void oc(View view1)
{       
    final String[] EVENT_PROJECTION = new String[] {

        Events.TITLE                  // 1
};

final int PROJECTION_TITLE_INDEX = 1;
Cursor cur = null;
ContentResolver cr = getContentResolver();
Uri uri = Events.CONTENT_URI;   
String selection = "((" +  Events.TITLE + " = ?))";
cur = cr.query(uri, EVENT_PROJECTION, selection, null, null);

// Use the cursor to step through the returned records
while (cur.moveToLast()) {
    String title = null;
    title = cur.getString(PROJECTION_TITLE_INDEX);
    etv2.setText(title);   //etv2 is edit text view 
```

我的 LogCat 显示：

```
01-13 03:44:27.312: E/SensorManager(23418): thread start
01-13 03:44:27.317: D/SensorManager(23418): registerListener :: handle = 0  name= LSM330DLC Acceleration Sensor delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@423b0`enter code here`238
01-13 03:45:07.787: D/SensorManager(23418): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@423b0238
01-13 03:45:07.787: D/Sensors(23418): Remain listener = Sending .. normal delay 200ms
01-13 03:45:07.787: I/Sensors(23418): sendDelay --- 200000000
01-13 03:45:07.787: D/SensorManager(23418): JNI - sendDelay
01-13 03:45:07.787: I/SensorManager(23418): Set normal delay = true
01-13 03:45:07.997: W/IInputConnectionWrapper(23418): getSelectedText on inactive InputConnection
01-13 03:45:07.997: W/IInputConnectionWrapper(23418): setComposingText on inactive InputConnection
01-13 03:45:07.997: W/IInputConnectionWrapper(23418): getExtractedText on inactive InputConnection 
```

最后 3 行是代码未运行并在 LogCat 中突出显示的主要问题...请尽快回复。

# php - mysql行计数查询不起作用

> ID：14298597
> 
> 赞同：1
> 
> 时间：2013-01-12T22:27:03.433
> 
> 标签：php, mysql

我认为我的问题出在我的代码的 MySQL 部分中，我需要它来计算至少一个表行为真并继续该`if`语句，否则执行该`else`语句。当我运行代码时，除了页面顶部的用户名和密码之外，它不会显示错误，只是一个空白页面，`echo`我只是在检查它们是否通过并且它们是。我的代码如下：

```
<?php

$myusername=$_POST['userName']; 
$mypassword=$_POST['password']; 

echo $mypassword;
echo "<br>" . $myusername;

$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

try {
    $conn = new PDO('mysql:host=localhost;dbname=timecard', 'username', 'password');
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $conn->prepare('SELECT COUNT(*) FROM employees WHERE `userName`= :userName AND `password`= :password');

    $stmt->execute(array(':userName' => $myusername, ':password' => $mypassword));

    } catch(PDOException $e){
        echo'ERROR: ' . $e->getMessage();
    }

$res = $conn->query($stmt);

if($res->fetchColumn() > 0){

session_register("myusername");
session_register("mypassword"); 
header("location:login_success.php");
}
else {
echo "Wrong Username or Password";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:53:33.870

您管理 PDO 语句的方式有问题（请参阅文档[http://php.net/manual/en/pdostatement.fetchcolumn.php](http://php.net/manual/en/pdostatement.fetchcolumn.php)）。删除包含的行：

```
$res = $conn->query($stmt); 
```

并替换：

```
if($res->fetchColumn() > 0){ 
```

经过 ：

```
if ($stmt->fetchColumn() > 0) { 
```

# asp.net-mvc - 如何在 Razor 视图中包含内联 CSS 样式？

> ID：14298604
> 
> 赞同：23
> 
> 时间：2013-01-12T22:27:28.493
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, postal

我正在使用[Postal](http://aboutcode.net/postal/)呈现 MVC Razor 视图并通过电子邮件发送它们。我有一个专门为电子邮件视图定义的自定义 CSS。目前我将它们包括如下：

```
@Styles.Render("~/Content/EmailStyles.css") 
```

但是，这仅包括样式表的相对链接，这在电子邮件中不起作用：

```
<link href="/Content/EmailStyles.css" rel="stylesheet"/> 
```

我想包含内联样式表，以便它在电子邮件中正常工作。在 MVC 视图中呈现基于文件的资源内容的最佳方式是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-15T23:23:26.310

我自己也有同样的问题，并且遇到了[Premailer.Net](https://github.com/milkshakesoftware/PreMailer.Net)。它看起来像您需要的库。这是你必须做的：

1.  创建一个扩展方法来帮助您将 CSS 嵌入到您的页面中；关于如何在 Razor 视图中嵌入 HTML 的问题有[一个答案](https://stackoverflow.com/a/5317313/183350)，应该可以帮助您。我已经修改它以嵌入 CSS：

    ```
    public static class HtmlHelpers
    {
        public static MvcHtmlString EmbedCss(this HtmlHelper htmlHelper, string path)
        {
            // take a path that starts with "~" and map it to the filesystem.
            var cssFilePath = HttpContext.Current.Server.MapPath(path);
            // load the contents of that file
            try
            {
                var cssText = System.IO.File.ReadAllText(cssFilePath);
                var styleElement = new TagBuilder("style");
                styleElement.InnerHtml = cssText;
                return MvcHtmlString.Create(styleElement.ToString());
            }
            catch (Exception ex)
            {
                // return nothing if we can't read the file for any reason
                return null;
            }
        }
    } 
    ```

2.  然后在你的 Razor 模板中，去：

    ```
    @Html.EmbedCss("~/Content/EmailStyles.css") 
    ```

    嵌入您的 CSS 文本。

3.  在你的项目中安装 Premailer.Net 包；你可以通过 NuGet 获得它。

4.  将您的 Razor 视图呈现为字符串（我猜这就是 Postal 在您的流程中的用途？我相信[RazorEngine](https://github.com/Antaris/RazorEngine)也可以做到这一点）。

5.  通过 Premailer.Net 运行字符串：

    ```
    PreMailer pm = new PreMailer();
    string premailedOutput = pm.MoveCssInline(htmlSource, false); 
    ```

6.  作为电子邮件发送！

我在生产中使用这种技术已经有一段时间了，它似乎运行得很好。

**编辑**：请记住，伪元素上的样式*不能内联*，因为它们不存在于标记中。我还注意到 Premailer.Net 中的一个奇怪的小错误——我认为它们的特异性和级联规则并不完全一致。尽管如此，它还是很不错的，而且它是我不必编写的又一段代码！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-09-11T20:08:09.670

赞成 Paul d'Aoust 的回答，但我发现他的辅助方法的这个版本对我来说更好一些（不会尝试在 CSS 中对引号之类的东西进行编码）：

```
public static class CssHelper
{
  public static IHtmlString EmbedCss(this HtmlHelper htmlHelper, string path)
  {
    // take a path that starts with "~" and map it to the filesystem.
    var cssFilePath = HttpContext.Current.Server.MapPath(path);
    // load the contents of that file
    try
    {
      var cssText = File.ReadAllText(cssFilePath);
      return htmlHelper.Raw("<style>\n" + cssText + "\n</style>");
    }
    catch
    {
      // return nothing if we can't read the file for any reason
      return null;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T22:33:50.037

我想你需要有一个自定义的助手。在我的头上，没有这样的方法来呈现包括网站绝对路径的 css 路径。

例如 http:www.example.com/css/EmailStyles.css

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-28T15:49:19.867

我意识到这是一个老问题，但这里是 dprothero 答案的修改版本，它将嵌入捆绑包。创建一个静态 C# 类并将此方法放入其中：

```
public static IHtmlString EmbedCss(this HtmlHelper htmlHelper, string path)
{
  try
  {
      // Get files from bundle
      StyleBundle b = (StyleBundle)BundleTable.Bundles.GetBundleFor("~/Content/css");
      BundleContext bc = new BundleContext(new HttpContextWrapper(HttpContext.Current), BundleTable.Bundles, "~/Content/css");
      List<BundleFile> files = b.EnumerateFiles(bc).ToList();
      // Create string to return
      string stylestring = "";
      // Iterate files in bundle
      foreach(BundleFile file in files)
      {
          // Get full path to file
          string filepath = HttpContext.Current.Server.MapPath(file.IncludedVirtualPath);
          // Read file text and append to style string
          string filetext = File.ReadAllText(filepath);
          stylestring += $"<!-- Style for {file.IncludedVirtualPath} -->\n<style>\n{filetext}\n</style>\n";
      }
      return htmlHelper.Raw(stylestring);
  }
  catch
  {
      // return nothing if we can't read the file for any reason
      return null;
  } 
```

然后转到您要在其中使用它的任何视图。请务必添加 using 语句，以便您的视图可以看到 CSS 帮助器。我还使用 TempData 来决定是否内联渲染它：

```
<!-- Using statement -->
@using Namespace.Helpers;

<!-- Check tempdata flag for whether or not to render inline -->
@if (TempData["inlinecss"] != null)
{
    <!-- Embed CSS with custom code -->
    @Html.EmbedCss("~/Content/css")
}
else
{
    <!-- Use links to reference CSS -->
    @Styles.Render("~/Content/css")
} 
```

# ruby-on-rails - 我将如何创建一个 `second_to_last` 方法？

> ID：14298614
> 
> 赞同：0
> 
> 时间：2013-01-12T22:28:07.303
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我想创建一个`second_to_last`类似于`last`但从模型返回倒数第二条记录而不是最后一条记录的方法。我认为这将是微不足道的，因为最后的 SQL 是：

```
Select * from "users".* FROM "Users" ORDERED BY "ORDERED BY" "users"."id" DECS LIMIT 1 
```

我必须找到一种方法来更改`Limit 1`to`Limit 2`然后选择第一个元素。我的想法正确吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T22:33:39.637

如果这确实是一个 Rails 问题，那么无论如何您都不需要在 SQL 中执行此操作。做就是了：

```
User.order("id DESC").offset(1).first 
```

从字面上看，它执行这个 sql 查询：

```
SELECT `users`.* FROM `users` ORDER BY id DESC LIMIT 1 OFFSET 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T22:41:03.050

我认为你在正确的轨道上。尝试这样的事情：

```
User.order("created_at DESC").limit(2).last 
```

这应该返回倒数第二个记录。

甚至有一些方法可以使用您的新方法扩展 Rails，但这可能超出了您的问题范围。

更好的是，您可以使用 User.last(2)。我没有比这更简单的了。

# php - TYPO3 / TemplaVoila DB 两个内容元素之间的关系

> ID：14298615
> 
> 赞同：0
> 
> 时间：2013-01-12T22:28:14.843
> 
> 标签：php, sql, typo3

![在此处输入图像描述](../Images/e32b6efbd81c81f7fc7e3a3a60f9cd43.png)

所以我在 TYPO3 cms 中做一个自定义用户函数（php 脚本），我用 sql 获取数据，我想做的是从一页中获取所有内容。

我可以通过使用页面的 pid 从 tt_content 获取数据来轻松做到这一点，但是说一个插件内容 elemenet（图片中 1 下的元素）和 text&img 内容元素（图片中 2 下的元素）之间的 db 关系是什么？

我如何在数据库中链接它们，以便我知道它们都在谷歌地图容器下？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:49:45.230

TemplaVoila 将`tt_content`uid（及其顺序）存储在 table `pages`-in field 中`tx_templavoila_flex`，它是标准 XML

要从给定页面获取所有元素，您需要获取该 XML 并`vDEF`从所需列（作为公共 XML 节点）中读取带有索引的值。Uid 的`tt_content`元素是用逗号分隔的，所以当你阅读节点时，你只需要使用explode by comma 来获得一个正确顺序的数组。样本：

```
<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<T3FlexForms>
   <data>
       <sheet index="sDEF">
           <language index="lDEF">
               <field index="field_leftcolumn">
                   <value index="vDEF">284,190,221</value>
               </field>
               <field index="field_rightcolumn">
                   <value index="vDEF">134,130</value>
               </field>
            </language>
       </sheet>
   </data>
</T3FlexForms> 
```

您可以在... TemplaVoila 源代码中检查如何使用这些 XML 结构，例如，将 XML 转换为 PHP 数组可能是最简单的：

```
$flexformContentArr = t3lib_div::xml2array($row['tx_templavoila_flex']); 
```

*@see*：`typo3conf/ext/templavoila/class.tx_templavoila_api.php`第 1362 行

# javascript - 用python通信javascript

> ID：14298619
> 
> 赞同：0
> 
> 时间：2013-01-12T22:28:51.203
> 
> 标签：javascript, python, ajax

好吧，我有一个用 HTML 和 javascript 创建的网站。我希望此网页将访问者以表单形式输入的一些数据存储到网页所在的 Web 服务器中的文本文件中。我的 Web 服务器仅支持 python 和 perl 脚本语言，出于“感性”的原因，我不想更改为另一个 Web 服务器。

客户端的代码对我来说或多或少很清楚，它将使用带有 AJAX xmlhttp 类的 javascript 将数据发布到服务器，但我不知道如何编写一个读取接收到的数据、处理它的 python 脚本和将其存储在文本文件中。任何人都可以发布一些示例代码吗？

我已经花了几天时间搜索信息，但我对阅读的内容迷失了方向，因为经常需要安装称为框架的东西。但是由于网络服务器支持python，这不应该已经安装在远程服务器中吗？它不是像`myScript.py`在网络服务器中上传一样简单吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:18:14.377

如果您的网络服务器仅支持 CGI，则编写简单的 CGI 脚本。从请求中获取原始帖子的文档：[http](http://docs.python.org/2.7/library/cgi.html#using-the-cgi-module) ://docs.python.org/2.7/library/cgi.html#using-the-cgi-module 有人将看起来像您需要的代码的东西放在一起的线程：[http ://bytes.com/topic/python/answers/42058-cgi-getting-raw-post-data](http://bytes.com/topic/python/answers/42058-cgi-getting-raw-post-data)

# c# - C# 结构：可变性与性能

> ID：14298620
> 
> 赞同：4
> 
> 时间：2013-01-12T22:28:57.863
> 
> 标签：c#, performance, struct

我意识到结构是不可变的，变异结构是邪恶的，改变结构中的值的正确方法是创建新实例。但是，我不清楚新实例与允许结构可变的内存和性能方面/问题。

假设我有结构，

```
struct Vehicle
{
    public readonly int Number;
    public readonly double Speed, Direction;

    public Vehicle(int number, double speed, double direction)
    {
        this.Number = number;
        this.Speed = speed;
        this.Direction = direction;
    }
} 
```

并将其创建为：

```
Vehicle car; 
```

也

```
Vehicle plane = new Vehicle(1234, 145.70, 73.20) 
```

如果我需要稍后分配给 Number、Speed 或 Direction，我可以删除 readonly 并使结构可变 - 我知道这样做很糟糕。- 从而“变异”一个已经创建的结构值。

或者，我可以创建一个新的结构实例。所以不要说 car.Speed = 120.7; 我可以说 car = new Vehicle(car.Number, 178.55, car.Direction);。这将创建一个新的结构值，几乎就像旧值一样，只是速度发生了变化。但它不会改变现有的结构值。

这是问题所在。假设，作为一个极端的例子，我需要每秒更新数万次速度和/或方向。我认为创建这么多实例会严重影响内存和性能，在这种情况下，最好允许结构是可变的。

谁能澄清可变结构的内存和性能问题与在这种极端情况下实现结构的正确方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T23:41:01.777

结构有两种不同的用例；在某些情况下，人们想要一种封装单个值并且行为类似于类的类型，但具有更好的性能和非空默认值。在这种情况下，应该使用我所说的不透明结构。MSDN 的结构指南是在假设这是唯一的用例的基础上编写的。

然而，在其他情况下，结构的目的只是将一些变量与胶带绑定在一起。在这些情况下，应该使用一个透明的结构，它只是将这些变量公开为公共字段。这种类型并没有什么坏处。邪恶的是一切都应该表现得像一个类对象，或者一切都应该被“封装”的概念。如果结构的语义是这样的：

1.  有一些固定的可读成员集（字段或属性）暴露了它的整个状态
2.  给定这些成员的任何一组所需值，可以使用这些值创建一个实例（禁止值的组合）。
3.  结构的默认值应该是将所有这些成员设置为其各自类型的默认值。

并且对它们的任何更改都会破坏使用它的代码，那么该结构的未来版本可能会做任何透明结构无法做到的事情，透明结构也不会允许未来的任何事情结构的版本将能够防止。因此，封装会增加成本而不增加价值。

我建议，只要可行，就应该努力使所有结构透明或不透明。此外，我建议由于 .net 处理结构方法的方式存在缺陷，因此应该避免修改不透明结构的公共成员`this`，除非可能在属性设置器中。具有讽刺意味的是，虽然 MSDN 的指导方针建议不应将结构用于不代表“单个值”的事物，但在常见情况下，人们只是想将一组变量从一段代码传递到另一段代码，透明结构比不透明结构或类类型要优越得多，并且优势幅度*随着*字段数量的增加而增长。

顺便说一句，关于最初的问题，我建议表示您的程序可能想要处理两种事情是有用的：（1）汽车，以及（2）与特定汽车相关的信息。我建议拥有一个 struct并拥有一个持有 type 字段的`CarState`实例可能会有所帮助。这将允许 的实例将其状态暴露给外部代码，并可能允许外部代码在受控情况下修改其状态（使用诸如`Car``CarState``Car`

```
delegate void ActionByRef<T1,T2>(ref T1 p1, ref T2 p2);
delegate void ActionByRef<T1,T2,T3>(ref T1 p1, ref T2 p2, T3 p3);

void UpdateState<TP1>(ActionByRef<CarState, TP1> proc, ref TP1 p1)
{ proc(ref myState, ref p1); }
void UpdateState<TP1,TP2>(ActionByRef<CarState, TP1,TP2> proc, ref TP1 p1, ref TP2 p2)
{ proc(ref myState, ref p1, ref p2); } 
```

请注意，此类方法提供了将汽车状态设为可变类的大部分性能优势，但没有与混杂对象引用相关的危险。允许外部代码可以`Car`通过上述方法更新汽车的状态，而不允许外部代码在任何其他时间修改其状态。

顺便说一句，我真的希望.net 有一种方法可以指定“安全”结构或类应该被视为封装其一个或多个组成部分的成员[例如，这样可以将包含被`Rectangle`调用`R`和`String`被调用的结构`Name`视为有一个 fields `X`, `Y`, `Width`, 以及`Height`对应的结构字段的别名。如果这是可能的，它将极大地促进类型需要保持比以前预期的更多状态的情况。我不认为目前的 CIL 允许在安全类型中使用这种别名，但没有概念上的原因它不能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T22:37:40.217

您需要自己回答的问题是“我正在编写的类型的预期语义是什么？”

当您尝试编写[值类型](http://en.wikipedia.org/wiki/Value_type)`struct`时，应使用A而不是 a 。值类型的一个很好的例子是. 不管发生什么其他事情，2013 年 1 月 12 日下午 3:33 GMT-7 始终是 2013 年 1 月 12 日下午 3:33 GMT-7。颜色是另一个很好的例子。由 RGB 255, 0, 0 组成的两种颜色永远不会有任何不同。`class``DateTime`

您尝试创建的类型`Vehicle`, 没有[值语义](http://en.wikipedia.org/wiki/Value_semantics)，因为您希望它包含旨在为特定汽车实例更新的状态。因此，您应该编写一个 mutable`class`而不是`struct`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T22:47:35.873

*I'll only answer the performance aspect of this question. I'll spare you the premature optimization warning and the discussion about semantics.*

Yes, assigning the whole struct has a performance cost. It introduces assignments which were not present in the mutating variant. I do not trust the JIT to optimize them out as the .NET JIT is pretty simple (it is optimized for fast code-gen).

Probably, these assignments are very cheap because they are contiguous in memory and the memory cache line has been loaded already. No memory transaction needs to occur because of them.

The performance difference will be small (for reasonably sized structs). You will be able to measure it, though.

It also introduces clutter into your code to create a new instance of the struct for each mutation. I have encountered cases in practice where I found it to be best to use mutable structs from a code quality perspective. Those are just a few cases but they exist.

# ios - iOS：后台线程异常不会崩溃

> ID：14298628
> 
> 赞同：7
> 
> 时间：2013-01-12T22:30:05.193
> 
> 标签：ios, multithreading, exception, exception-handling, abort

我还没有找到与我的经验一致的文档。

我想要的是一种在后台线程中处理未捕获异常的好方法。这种“方式”应该让应用程序崩溃，但在崩溃之前执行一些非常基本的操作（例如，将值保存到 UserDefaults 以便在下次启动时对其进行检查；加上日志记录）。

在主线程上，我只是设置了一个*uncaughtExceptionHanlder*并且工作正常。但是，在后台线程上 - 作为 NSOperationQueue 上的 NSOperation 执行 - 任何异常正在发生**但未退出应用程序：Crashing**。该应用程序继续在损坏的状态下运行。

但是，线程编程指南指出：

> 设置异常处理程序 如果您的应用程序捕获并处理异常，您的线程代码应该准备好捕获任何可能发生的异常。尽管最好在可能发生的地方处理异常，但未能在线程中捕获抛出的异常会导致您的应用程序退出。在你的线程入口例程中安装一个最终的 try/catch 允许你捕获任何未知的异常并提供一个适当的响应。

一种有效的方法（如下）是使用 try/catch 嵌入线程调用方法，并在出现异常的情况下进行记录，然后调用 abort()。但这不可能是最好的方法。我想将异常发送到主线程并由未捕获异常处理程序处理。**有人做过吗？**

```
- (void)threadMethod
{
    @try
    {
        NSArray* aTest = [NSArray array];
        [aTest objectAtIndex:10];
    }
    @catch (NSException* e)
    {
        // Save to state to User Defaults.
        // Log any needed info.

        abort();
    }
    @finally
    {

    }
} 
```

仅供参考：我在 iOS6 上运行，带有 XCode 4.5 SDK。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T23:18:14.557

1.  运行的线程由`NSOperationQueue`管理`libdispatch`，它捕获异常和调用`terminate`，退出应用程序。如果您看到不同的行为，则说明您已经做错了。
2.  将数据保存到`NSUserDefaults`异常之后是一个不确定的提议。因为 Cocoa 只将异常视为程序员错误，所以一旦抛出异常，它就不会尝试让自己处于可用状态。简而言之，您应该像对待“真正的”崩溃一样对待它，就好像只有异步信号安全 API 可用一样。在这方面，任何 Objective-C 都会自动退出。
3.  您的问题表明您正在尝试进行崩溃报告。为此，我会推荐一个崩溃报告解决方案，例如[PLCrashReporter](http://plcrashreporter.googlecode.com/)。还有许多嵌入崩溃报告的分析和分发服务，包括[HockeyApp](http://hockeyapp.net)、[Crashlytics](http://crashlytics.com)、[TestFlight](http://testflightapp.com)和[QuincyKit](http://quincykit.net)。还有其他的，哪一个适合你取决于你的需要。他们都将处理安全处理崩溃和异常以及保存数据以备后用所涉及的所有棘手问题，而您不必担心任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:11:10.523

对于您正在做的事情，我相信您将需要在主线程中检查第二个线程中发生的事情的代码。由于您无法实际联系主线程并从后台线程触发事件，您很可能会被卡在您的主线程中编写一些不时检查的内容。也就是说，您可能可以使用 NSNotificationCenter 并让主线程在后台线程抛出异常时触发一个事件。祝你好运。

# css - 推特引导移动

> ID：14298629
> 
> 赞同：4
> 
> 时间：2013-01-12T22:30:08.910
> 
> 标签：css, twitter-bootstrap

我有一个用 Bootstrap 构建的网站，也想制作一个移动版本。唯一的问题是我想要创建的布局会有很大的不同。例如。

桌面版在主页的中心有一个巨大的图像，而移动版则没有。

这是我可以在 Bootstrap 中实现的，还是我必须使用其他方法来提供两种截然不同的布局？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T22:41:51.923

是的，您可以使用[响应式实用程序类](http://twitter.github.com/bootstrap/scaffolding.html#responsive)。例如：

```
<img src="image.png" class="hidden-phone" title="Main image" /> 
```

此图像在手机上不可见。

**更新**

这是旧的 Bootstrap 版本，最新的见

[http://getbootstrap.com/css/#responsive-utilities](http://getbootstrap.com/css/#responsive-utilities)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-13T00:51:45.103

@AlecTMH 的建议很好，而且很容易做到。您的另一个选择是使用 CSS 和 @media 查询。

您可以为不同的屏幕宽度指定不同的值，例如

```
@media (max-width: 480px) {
  body{
  background-image: url('smartphone-background.jpg');
  }
}

@media (max-width: 767px) {
  body{
  background-image: url('tablet-background.jpg');
  }
} 
```

或者你可以使用 CSS 属性 display:none; 隐藏特定屏幕尺寸的对象。

所有方法都运行良好，有些方法在不同情况下更合适或更容易使用。

祝你好运

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T13:08:04.483

我知道问题是关于 Bootsrap 和 CSS 的。但是，鉴于您的陈述

> 桌面版在主页中心有一个巨大的图像

我会考虑@David Taiaroa 的解决方案，或者只是提供与服务器完全不同的内容。[响应实用程序类](http://twitter.github.com/bootstrap/scaffolding.html#responsive)使用它在`display: none`隐藏图像时仍会加载它。如果是`huge`图片，这可能会影响您移动设备上的加载时间（请参阅[显示：无；](http://laurakalbag.com/display-none/ "显示：无；")作者 Laura Kalbag）。

实用程序类更适用于不会对您网站的加载时间产生大影响的小内容。对于像高像素图像甚至图像轮播这样的大元素，最好使用像@David Taiaroa 建议的媒体查询，或者提供完全不同的内容。

# ios - DropboxSDK：无法链接

> ID：14298632
> 
> 赞同：5
> 
> 时间：2013-01-12T22:30:41.000
> 
> 标签：ios, objective-c, dropbox

我不断收到保管箱错误，：[错误] DropboxSDK：无法链接；应用程序未注册正确的 URL 方案。我相信我所做的一切都是正确的。我在网上进行了研究，最常见的原因是 info.plist，但我认为我没有那个错误。我犯错了吗？

![在此处输入图像描述](../Images/8a44fb41725bc81ac8552b93ad687f37.png)

![在此处输入图像描述](../Images/83b9a1bb7e535788b89d07ad89a0211c.png) ![在此处输入图像描述](../Images/adf3140235731520a93eb07d9d841e28.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-13T00:17:07.013

您的 URL 方案应该是`db-v6jhkrthdgi5z0s`. 记`db-`下您的 Dropbox id 的前缀。

# java - 如何避免从java程序多次http访问wave资源文件？

> ID：14298636
> 
> 赞同：1
> 
> 时间：2013-01-12T22:31:31.390
> 
> 标签：java, http, inputstream, wav, javasound

我使用以下代码从 Web 服务器上的 wav 文件中获取数据。、和读取字节`getFormat()`，每个执行一次 http 访问，服务器日志显示有 3 次访问。有没有办法让它一次旅行？`getFormatLength()``totallength`

```
try {
    audioInputStream = AudioSystem.getAudioInputStream(url);//soundFile);
    format = audioInputStream.getFormat();
    totallength = audioInputStream.getFrameLength()*format.getFrameSize();
    waveData = new byte[(int)totallength];
    int total=0;
    int nBytesRead = 0;
    try {
        while (nBytesRead != -1 && total<totallength) {
            nBytesRead = audioInputStream.read(waveData, total, (int) totallength);
            if (nBytesRead>0)
                total+=nBytesRead;
            }
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:56:04.833

看起来您首先将整个文件读入内存，为什么不先读入所有内容。

```
 // Read the audio file into waveData:
    BufferedInputStream in = new BufferedInputStream(url.openStream());
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    for (;;) {
        int b = in.read();
        if (b == -1) {
            break;
        }
        bos.write(b);
    }
    in.close();
    bos.close();
    byte[] waveData = bos.toByteArray();

    // Create the AudioInputSteam:
    ByteArrayInputStream bis = new ByteArrayInputStream(waveData);
    AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(bis); 
```

# emacs - 存储一个 sexp 评估，因此可以在其他地方调用它（Emacs Lisp）

> ID：14298637
> 
> 赞同：2
> 
> 时间：2013-01-12T22:31:51.123
> 
> 标签：emacs, lisp, eval

我在暂存缓冲区中进行了很多编程，并且经常在某一点评估某个表达式，并希望在其他地方评估相同的表达式（无需为其编写函数）。

一个例子是当我想测试`(looking-at "\\<")`时，看看我是否在看一个单词的开头。使用`eval-last-sexp`它时会评估之前的东西`(point)`。

所以，这意味着我可以测试：

`(looking-at "\\<")<(point)>someword`

但是我之前无法测试表达式`(point)`：

`someword<(point)>(looking-at "\\<")`

为了测试这一点，我实际上做了类似的事情：

```
(defun foo ()
  (interactive)
  (when (looking-at "\\<") (message "t"))
) 
```

然后在其他地方调用它（有时，当我进行大量测试时，我什至会将它绑定到一个键）。

实际上不难想出“行为如何`(looking-at)`”的答案，但我感兴趣的问题是是否可以存储在`the-last-user-called-sexp`某个地方，以便可以通过使用类似的函数在缓冲区中的其他地方调用它：

```
(defun invoke-last-sexp (sexp)
 (interactive)
 (evaluate the last sexp) ; maybe even (call-interactively) is sometimes needed
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T00:09:18.577

无论我身在何处，我都希望能够快速评估表单。为此，我有一个受 [magnars](https://github.com/magnars/.emacs.d.git)配置启发的宏。

```
(defmacro create-simple-keybinding-command (name key)
  `(progn (defmacro ,name (&rest fns)
            (list 'global-set-key (kbd ,key)
                  `(lambda ()
                     (interactive)
                     ,@fns)))

          (defmacro ,(intern (concat (symbol-name name) "e")) (&rest fns)
            (list 'global-set-key (kbd ,key)
                  `(lambda ()
                     (interactive)
                     (message "%s"
                              (progn
                                ,@fns))))))) 
```

例如，您评估

```
(create-simple-keybinding-command f9 "<f9>") 
```

你有两个宏`f9`和`f9e`. `f9e`就像`f9`它在 minibuffer 中显示返回值。在你的情况下，你评估

```
(f9e (looking-at "\\<")) 
```

现在，每次按 时都会评估表单`f9`。

您可能想在[这里](https://github.com/thisirs/dotemacs/blob/master/init-bindings.el)查看我的 emacs 配置，其中我有几个宏或多或少地做同样的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T01:29:26.147

您可能希望使用绑定到`M-:`键的命令。

# django - 使用 Django 检查每个操作请求的用户身份验证

> ID：14298643
> 
> 赞同：0
> 
> 时间：2013-01-12T22:32:44.437
> 
> 标签：django, authentication, request

除了在我的视图中在每个操作中声明以下检查之外，还有其他方法可以检查身份验证。

```
if request.user.is_authenticated():
    # Do something for authenticated users.
else:
    # Do something for anonymous users. 
```

我想避免对我的所有视图操作执行此操作，是否有某种 @Decorators 可以与提供的 auth.login 一起使用，以在用户获得访问权限之前检查身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:42:56.693

您可能需要 login_required 装饰器

[https://docs.djangoproject.com/en/1.5/topics/auth/default/#the-login-required-decorator](https://docs.djangoproject.com/en/1.5/topics/auth/default/#the-login-required-decorator)

# linux - linux socket内核缓冲区是否交换到磁盘？

> ID：14298644
> 
> 赞同：6
> 
> 时间：2013-01-12T22:32:46.173
> 
> 标签：linux, sockets, kernel, buffer

这似乎是一个密集的问题，但有谁知道 linux 套接字内核缓冲区是否已交换到磁盘？

我无法想象它们，就像所有内核代码一样。看着 vmm 看起来他们不是。然而，在寻找一个明确的答案时，我令人不安地发现了相互矛盾的陈述。

有人确定吗？如果有人已经知道的话，我不希望不得不进行长时间的深入研究才能找到它。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T22:38:59.927

基本上，所有内核内存在 linux 中都是不可交换的（也就是可分页的）。

# java - Java Spring 风格：给定类的处理器类别的工厂

> ID：14298649
> 
> 赞同：3
> 
> 时间：2013-01-12T22:33:28.557
> 
> 标签：java, spring

我有一个关于春季风格的琐碎问题。

给定一组 Java 类：

A 类、B 类、C 类和 D 类。

这些类来自另一个系统，无法更改。

这些类必须由不同的处理器处理。一些类由通用处理器处理。

所以我的问题是将类映射到它们的处理器上的最佳弹簧方式是什么。目前我有一个工厂 bean 做这样的事情：

```
package org.test;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import org.springframework.stereotype.Component;

@Component
public class processorFactory
{

private static List<Object> proc1List = new ArrayList<Object>(Arrays.asList(
        classA.class, classB.class));

private static List<Object> proc2List = new ArrayList<Object>(
        Arrays.asList(classC.class));

private static List<Object> proc3List = new ArrayList<Object>(
        Arrays.asList(classD.class));

public static processor getProcessor(Object object)
{

    if (proc1List.contains(object))
        return new processor1();
    else if (proc2List.contains(object))
        return new processor2();
    else if (proc3List.contains(object))
        return new processor3();

    throw new RuntimeException("no processor.");
}
} 
```

大部分代码与 spring 是多余的。我确信有多种方法可以做到这一点，但我的问题是在春季使用注释实现这一点的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:23:40.083

如果您使用的是 Spring Java Config，那么您可以直接转换上面的代码。也就是说，您的“工厂”代码将成为用于创建处理器的@Bean 代码（应该有一个大写的“P”:)

# uiscrollview - 带有 UIScrollView 的 UICollectionViewCell 取消了 didSelectItemAtIndexPath

> ID：14298650
> 
> 赞同：21
> 
> 时间：2013-01-12T22:33:31.847
> 
> 标签：uiscrollview, uicollectionview, uicollectionviewcell

我有一个`UICollectionView`水平滚动显示`UICollectionViewCell`一次。每个`UICollectionViewCell`都有一个垂直滚动`UIScrollView`的子视图，用于滚动单元格的内容。仅 90% 左右的内部部分`UICollectionViewCell`被覆盖`UIScrollView`- 即电池的外框未被覆盖。

事实证明，取消委托`UICollectionViewCell`所涵盖的部分。因此，当在该方法内发生简单的点击时，*不会*调用此方法，而如果点击发生在单元格的外部，即在 之外，*则*调用此方法。`UIScrollView``UICollectionView``didSelectItemAtIndexPath``UIScrollView`*`UIScrollView`*

 **关于如何实现设置的任何建议，`didSelectItemAtIndexPath`即使点击发生在`UIScrollView`?

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-07-20T18:28:21.123

我发现最有效的方法是窃取、`panGestureRecognizer`暴露`UIScrollView`和禁用`userInteraction`。`scrollView`这样，您可以获得滚动视图的行为，但保持集合视图上的交互。在您的`UICollectionViewCell`子类上：

```
self.scrollView.userInteractionEnabled = NO;
[self.contentView addGestureRecognizer:self.scrollView.panGestureRecognizer]; 
```

这是 Apple 在 WWDC 2014 session 235（高级滚动视图和触摸处理技术）中推荐和演示的方法

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-12T12:21:42.087

这是一个 UIScrollView 子类方法，它维护单元格选择功能，还允许在滚动视图内外进行 UIControl 选择（按钮等）。

**斯威夫特 3**

```
class CellContentScrollView: UIScrollView {

  override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {
    let hitTargetView = super.hitTest(point, with: event)
    return hitTargetView as? UIControl ?? (hitTargetView == self ? nil : superview)
  }

  override func didMoveToSuperview() {
    superview?.addGestureRecognizer(panGestureRecognizer)
  }

} 
```

**斯威夫特 2**

```
class CellContentScrollView: UIScrollView {

    // MARK: - UIView override

    override func hitTest(point: CGPoint, withEvent event: UIEvent?) -> UIView? {
        let hitTargetView = super.hitTest(point, withEvent: event)
        return hitTargetView as? UIControl ?? (hitTargetView == self ? nil : superview)
    }

    override func didMoveToSuperview() {
        superview?.addGestureRecognizer(panGestureRecognizer)
    }
} 
```

**Objective-C**

```
@implementation CellContentScrollView

    #pragma mark - UIView override

    - (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
        UIView *hitTargetView = [super hitTest:point withEvent:event];

        if ([hitTargetView isKindOfClass:UIControl.class]) {
            return hitTargetView;
        } else if (hitTargetView != self) {
            return self.superview;
        }

        return nil;
    }

    - (void)didMoveToSuperview {
        [self.superview addGestureRecognizer:self.panGestureRecognizer];
    }

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T23:00:21.273

点击`UIScrollView`用于查看是否应该进行滚动。

您应该[单击 UIScrollView](https://stackoverflow.com/questions/5660678/single-double-tap-recognition-on-uiscrollview)本身并将其传递给周围的`UICollectionViewCell`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-21T11:20:41.483

**将点击手势添加到您的超级视图**

```
override func viewDidLoad() {
        super.viewDidLoad()
        let tapGesture = UITapGestureRecognizer(target: self, action: #selector(didTapView(gesture:)))
        view.addGestureRecognizer(tapGesture)
    }

@objc func didTapView(gesture: UITapGestureRecognizer) {
    view.endEditing(true)
    let touchLocation:CGPoint = gesture.location(ofTouch: 0, in: self.collectionView)
    let indexPath = self.collectionView.indexPathForItem(at: touchLocation)
    if indexPath != nil {
        let cell = self.collectionView.cellForItem(at: indexPath!)
        if (cell?.isSelected)! {
            //PREFORM DESELECT
        } else {
            //PREFORM SELECT HERE
        }
    }
} 
```**

# android - 调试我的 Android 应用

> ID：14298667
> 
> 赞同：0
> 
> 时间：2013-01-12T22:35:24.203
> 
> 标签：android, debugging

当我的 Android 应用程序无法按预期运行时，我如何找出导致问题的原因？有哪些工具可用于专门调试 Android 应用程序？

（我写这篇问答是为了将 Android 文档中几页的信息收集到一个地方。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T22:35:24.203

# `logcat`

[`logcat`](http://developer.android.com/tools/help/logcat.html)是调试 Android 应用程序最有用的工具之一。通常，有问题的应用程序会以一条消息终止，该消息指出“不幸的是，已停止”。要找出原因，您可以使用该`logcat`工具获取堆栈跟踪。

`logcat`也是一般调试的有用工具。Android 没有控制台，因此典型的`System.out.println()`调用对于打印出跟踪信息和变量值不是很有帮助。相反，您可以使用[android.util.Log](http://developer.android.com/reference/android/util/Log.html)类（另请参阅Android 文档中的[读取和写入日志](http://developer.android.com/tools/debugging/debugging-log.html)）。该类提供了输出具有 5 个严重级别的日志消息的功能：ERROR、WARN、INFO、DEBUG、VERBOSE。每个严重级别都有相应的方法，因此您很少显式使用这些常量。

出于调试目的，您通常会使用`Log.d()`两种形式的 which：[`Log.d(String, String)`](http://developer.android.com/reference/android/util/Log.html#d(java.lang.String,%20java.lang.String))和 [`Log.d(String, String, Throwable)`](http://developer.android.com/reference/android/util/Log.html#d(java.lang.String,%20java.lang.String,%20java.lang.Throwable)). 第一个`String`参数是一个“标签”，可以是你想要的任何东西。通常这只是记录消息的类的名称。此标签允许您使用 过滤日志消息`logcat`，因此您可以使用它快速轻松地找到您关心的消息。第二个`String`是实际的日志消息。这可以是简单的执行跟踪或变量的值或您认为有助于调试目的的任何其他输出。最后一个参数是可选的，例如，可用于在语句`Throwable`中记录异常。`throw...catch`

现在，一旦您在应用程序中记录了消息，您就可以使用它`logcat`来查看它们。如何执行此操作的具体细节取决于您是使用命令行工具还是使用 Eclipse 和 Android 开发插件进行开发：

## 命令行

最简单的形式是运行

```
adb logcat 
```

如果您只需要在应用程序引发异常时查看堆栈跟踪，这将很有帮助。如果你想过滤掉某些调试消息，你可以通过你使用的标签字符串和日志级别来做到这一点。语法是

```
adb logcat <tag>:<debugging level> ... 
```

例如，如果我在调用时使用了标签“HelloAndroid” `Log.d()`，我可以输入

```
adb logcat HelloAndroid:D *:S 
```

（`*:S`最后的静音所有其他标签的输出。）

# 结论

调试对于任何程序员来说都是一项至关重要的技能，可能比学习编写代码更重要。我希望以上提示有助于减少任何潜入 Android 开发的人的学习曲线。希望你能比我更快地掌握速度。

# php - 我应该如何使用 PHP 处理 XML？

> ID：14298675
> 
> 赞同：-2
> 
> 时间：2013-01-12T22:36:19.647
> 
> 标签：php, httprequest

我正在尝试从多个设备收集 XML 并通过 PHP 服务器运行它们。有人可以指导我如何创建服务器、发送数据（通过 curl）、使用 PHP 接受数据，然后将其解析为数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:39:51.677

抢一个快速的 VPS 服务器，我建议使用 EC2。

然后，制作一个 LAMP 服务器，这是一个非常容易遵循的指南。[http://www.lamphowto.com](http://www.lamphowto.com)

您需要确保 Apache 正在运行，因为那是响应和服务 http 请求的东西，而不是 PHP。PHP 只是另一种操纵响应的下游语言。

**编辑：对于未来的观众，我和 OP 进一步讨论了这个问题，他实际上想知道如何解析 XML。我引用了这个链接：[http ://blog.teamtreehouse.com/how-to-parse-xml-with-php5](http://blog.teamtreehouse.com/how-to-parse-xml-with-php5)**

# android - Android 不同的屏幕尺寸问题（在 Galaxy S1、S2、S3 和 Note2 等上进行测试）

> ID：14298678
> 
> 赞同：0
> 
> 时间：2013-01-12T22:36:36.553
> 
> 标签：android, screen-size

我正在开发一款游戏，它几乎完成了（只是调整和测试），我有三星 Galaxy S1，所以图形在 Galaxy S1 和 S2 上工作得很好，但是……在三星 Galaxy S3 上测试过；必须创建图像调整器功能来在加载时调整所有文件的大小，现在它可以正常工作了。但是，我没有所有的 Android 设备来测试不同屏幕尺寸的图形。我在模拟器（AVDM）上创建了不同的屏幕尺寸设备，在它们上进行了尝试，但结果不佳（ramsize、堆大小必须不真实才能正确测试）。

那是背景资料。好的，让我进入正题；我没有在大屏幕设备上测试过游戏，但在三星 Galaxy S3 上测试过，S3 上的图形更小，因为它从 mdpi 文件夹加载图像。所以，我对我的图形所做的是，加载预先调整大小的图像，我得到设备的屏幕尺寸，并尝试用浮点值手动调整它们的大小，以确保图形对于当前屏幕来说既不会太小也不会太大，而“ manifest.xml 上的 AnyDensity=false"。当您在特定设备上实际测试以获得预期结果时，这样做会更容易。当android自动调整图形大小时，我已禁用自动调整大小功能以避免“OutOfMemoryError”。它有效，但是当您无法预测屏幕尺寸时，很难假设浮点值。

我想听听你在这方面的经验，你们对这种情况有什么建议？在知道当前屏幕宽度和高度值的情况下，如何针对不同屏幕尺寸的设备调整图形大小以完美适应屏幕？

一个例子：forest_1.png 宽度/高度：600 x 400 px 在三星 Galaxy S1 (533 x 320) 屏幕上可以完美呈现，但是如何预测准确的值来调整 Android Note II 的 forest_1.png 图像的大小而无需设备测试？（注二屏幕尺寸为 1280 x 720 ）

任何意见/建议将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:16:19.913

在我看来，您将需要以编程方式调整图像大小。您可以在此处的答案中找到示例： [Android 中的图像裁剪和调整大小](https://stackoverflow.com/questions/5602465/image-crop-and-resize-in-android)

这就是您获取设备尺寸的方式：[获取屏幕尺寸（以像素为单位）](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)

# scala - 如何创建一个接受任何 Seq[T,Int] 并返回 Seq 的原始类型的函数。

> ID：14298679
> 
> 赞同：2
> 
> 时间：2013-01-12T22:36:40.863
> 
> 标签：scala

我很难定义这个问题。我想做这样的事情：

```
val list = List(("a",1), ("b",2))

private def shiftIndex[C <: Seq[_]](seq: C, amount: Int): C = {
  seq.map({ case (value, integer) => (value, integer + amount) })
}

shiftIndex(list,3) 
```

应该返回

```
List(("a",4),("b",5)): List[String,Integer] 
```

但它应该适用于最一般的情况：

1.  seq 实现映射（我知道它不是：Seq）
2.  seq 存储任何东西的元组和一个 Int。

任何解释这些概念的资源链接将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T23:21:00.083

```
import scala.collection.generic.CanBuildFrom
import scala.collection.GenTraversable
import scala.collection.GenTraversableLike

def shiftIndex[T, Repr](seq: GenTraversableLike[(T, Int), Repr], amount: Int)(
    implicit bf: CanBuildFrom[Repr, (T, Int), Repr]) = {
  seq.map { case (value, integer) => (value, integer + amount) }
}

shiftIndex(List(("a", 1), ("b", 2)), 3)     // List((a,4), (b,5))
shiftIndex(Set(("a", 1), ("b", 2)), 3)      // Set((a,4), (b,5))
shiftIndex(Map(("a", 1), ("b", 2)), 3)      // Map(a -> 4, b -> 5) 
```

虽然我可能会推荐一个更好看、更通用的解决方案。在这里，我*丰富*了 GenTraversable，以便对的所有可遍历对象都有一个方法，该方法`mapVals`将一个函数应用于该对的第二部分，并具有与运行它的对象相同的返回类型：

```
class EnrichedWithMapVals[T, U, Repr](seq: GenTraversableLike[(T, U), Repr]) {
  def mapVals[R, That](f: U => R)(implicit bf: CanBuildFrom[Repr, (T, R), That]) = {
    seq.map { case (x, y) => (x, f(y)) }
  }
}
implicit def enrichWithMapVals[T, U, Repr](self: GenTraversableLike[(T, U), Repr]) = new EnrichedWithMapVals(self)

List(("a", 1), ("b", 2)).mapVals(_ + 3)     // List((a,4), (b,5))
Set(("a", 1), ("b", 2)).mapVals(_ + 3)      // Set((a,4), (b,5))
Map(("a", 1), ("b", 2)).mapVals(_ + 3)      // Map(a -> 4, b -> 5) 
```

# clojure - 在 Clojure 1.4.0 中可以将扩展与 defrecord 一起使用吗？

> ID：14298682
> 
> 赞同：6
> 
> 时间：2013-01-12T22:37:10.553
> 
> 标签：clojure

我正在尝试使用“扩展”在 Clojure 中使用地图定义记录方法。以下适用于 Clojure 1.4.0：

```
(defprotocol PointMethods
  (add [self other])
  (distance [self]))

(defrecord Point [x y]
  PointMethods
  (add [self other]
    (Point. (+ (:x self) (:x other)) (+ (:y self) (:y other))))
  (distance [self]
    (Math/sqrt (+ (* (:x self) (:x self)) (* (:y self) (:y self))))))

(def p1 (Point. 2 3))
(def p2 (Point. 1 1))

(def p3 (add p1 p2))
(println p3)
(println (distance p3)) 
```

但是这个版本失败了：

```
(defprotocol PointMethods
  (add [self other])
  (distance [self]))

(defrecord Point [x y])
(extend Point
  PointMethods
  {:add
   (fn [self other] (Point. (+ (:x self) (:x other)) (+ (:y self) (:y other))))
   :distance
   (fn [self] (Math/sqrt (+ (* (:x self) (:x self)) (* (:y self) (:y self)))))})

(def p1 (Point. 2 3))
(def p2 (Point. 1 1))

(def p3 (add p1 p2))
(println p3)
(println (distance p3))

Clojure Compiler: java.lang.IllegalArgumentException: No implementation of method: :add 
of protocol: #'user/PointMethods found for class: user.Point, compiling:(records.clj:16)] 
```

第二个版本有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-27T11:49:18.257

正如其他人在对您的代码的评论中指出的那样，您编写的代码在 Clojure 1.4.0 中运行良好（我自己验证了它）。您可能会遇到某种 IDE 错误配置，或者可能存在一些过时的缓存字节码。

# android - 从 ListView 中删除视图

> ID：14298683
> 
> 赞同：0
> 
> 时间：2013-01-12T22:37:13.107
> 
> 标签：android, listview

我想知道从 ListView 中删除 TextView 的最佳方法，但我想从选项菜单中删除。所以我点击“删除国家” - 它会等到我点击一个国家而不是删除点击的国家。我是编程新手。提前致谢

```
public boolean onOptionsItemSelected(MenuItem item) {
switch(item.getItemId()){

case R.id.omAddCountry:
    Intent addCountryIntent = new Intent(MainActivity.this, AddCountryActivity.class);
    startActivityForResult(addCountryIntent, 11);
    break;

case R.id.omDeleteCountry:

    break; 
```

ListView 正在使用 SQLite，它从 DB 获取第一个视图，并且 TextViews 由适配器中的 Vector 添加。

`public class CountryAdapter extends BaseAdapter {`

```
private Context mContext;
protected Vector<Country> mVector;
protected SQLiteDatabase mDb;

public void setmContext(Context mContext){
    this.mContext = mContext;
}

public CountryAdapter(Context mContext){
    this.mContext = mContext;

    mVector = new Vector<Country>();

    CountryOpenHelper helper = new CountryOpenHelper(mContext);
    mDb = helper.getWritableDatabase();

    Cursor cursor = mDb.rawQuery("SELECT * FROM COUNTRIES", null);

    if(cursor.getCount() > 0){

        cursor.moveToFirst();
    }
    do {
        Country country = new Country();
        country.setmCountryIndex(cursor.getInt(0));
        country.setmCountryName(cursor.getString(2));
        country.setmCountryTextSize(cursor.getInt(1));
        country.setmCountryColor(cursor.getInt(3));
        mVector.add(country);

    } while (cursor.moveToNext());

}

public Vector<Country> getmVector() {
    return mVector;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return mVector.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    TextView tv;
    if(convertView == null){
        tv = new TextView(mContext);
    }else{
        tv = (TextView) convertView;
    }

    tv.setText(mVector.get(position).getmCountryName());
    tv.setTextColor(mVector.get(position).getmCountryColor());
    tv.setTextSize(mVector.get(position).getmCountryTextSize());

    return tv;
}
public void ChangeColor(int newcolor, String name) {

    mDb.execSQL("update COUNTRIES set color = " + newcolor + " where name = '" + name + "' " );

}
public void addCountry(int mId, String myCountry, int myColorNum){
    mDb.execSQL("insert into countries values(" + mId + " , ' " + myCountry+"' , "+ myColorNum + ")");
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:43:36.893

做一个全局布尔值：

```
boolean isDeleting = false; 
```

然后在 中`onOptionsItemSelected()`，执行：

```
case R.id.omDeleteCountry:
isDeleting = true;
break; 
```

无论您在哪里实施`onListItemClick()`：

```
@Override
public void onListItemClick (ListView listView,View view, int pos, long id)
{
  if (isDeleting){
    yourCustomAdapter.delete(pos)
    yourCustomAdapter.notifyDataSetChanged();
    isDeleting = false;
  }
  else {
    //do other stuff
  }
} 
```

您必须`delete()`在适配器中创建一个方法。

# ios - 处理 iAd 无法在 Admob 中介设置中接收广告

> ID：14298685
> 
> 赞同：1
> 
> 时间：2013-01-12T22:37:28.253
> 
> 标签：ios, ios5, ios-simulator, admob, iad

我使用 AdMob 中介服务设置了一个基本应用程序作为测试。

```
- (void)viewDidLoad {
      [super viewDidLoad];

      // Create a view of the standard size at the top of the screen.
      // Available AdSize constants are explained in GADAdSize.h.
      bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];

      // Specify the ad's "unit identifier." This is your AdMob Publisher ID.
      bannerView_.adUnitID = kAdMobPublisherID;

      // Let the runtime know which UIViewController to restore after taking
      // the user wherever the ad goes and add it to the view hierarchy.
      bannerView_.rootViewController = self;
      [self.view addSubview:bannerView_];

      // Initiate a generic request to load it with an ad.
      [bannerView_ loadRequest:[GADRequest request]];

      GADRequest *request = [GADRequest request];
      // Make the request for a test ad. Put in an identifier for
      // the simulator as well as any devices you want to receive test ads.
      request.testDevices = [NSArray arrayWithObjects:
                             @"4D047EB9-A3A7-441E-989E-C5437F05DB04",
                             @"YOUR_DEVICE_IDENTIFIER",
                             nil];

 } 
```

当应用程序无法接收广告时，我会收到这些错误。我相信 iAd 在测试 iAd 广告期间会发送相当多的错误。

```
[AppDeveloper]: ADBannerView: Unhandled error (no delegate or delegate does not implement didFailToReceiveAdWithError:): Error Domain=ADErrorDomain Code=4 "The operation couldn’t be completed. Application has iAd Network configuration error" UserInfo=0x9fd8d20 {ADInternalErrorCode=4, ADInternalErrorDomain=ADErrorDomain, NSLocalizedFailureReason=Application has iAd Network configuration error} 
```

该错误是由于没有实现 didFailToReceiveAdWithError。我的问题是如何实现这个方法。

我查看了 iAd 节目指南：[iAd Prog 指南](http://developer.apple.com/library/ios/#documentation/userexperience/Conceptual/iAd_Guide/WorkingwithBannerViews/WorkingwithBannerViews.html#//apple_ref/doc/uid/TP40009881-CH4-SW4)

这建议设置这样的方法......

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error 
```

但是，由于我的代码没有直接实现 iAd 网络，它是使用中介服务设置的。我不确定如何将上述方法更改为工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:45:52.687

由于 AdMob 框架处理广告显示（即使中介到 iAd 等其他广告源），您只需要实现对 AdMob 横幅的处理。如果 AdMob 框架通过中介显示 iAd，它会将其封装并像任何常规 AdMob 横幅一样呈现给您。因此，您只需设置bannerView 的委托以接收来自AdMob 框架的事件，例如让您的视图控制器实现`GADBannerViewDelegate`协议并将其用作委托）：

```
@interface MyViewController : UIViewController <GADBannerViewDelegate>
... 
```

在你的`viewDidLoad`方法中：

```
bannerView_.delegate = self; 
```

然后，您可以添加各种方法来处理广告事件，例如

```
- (void)adView:(GADBannerView *)bannerView didFailToReceiveAdWithError:(GADRequestError *)error; 
```

当没有广告可以请求时调用。也很有用：

```
- (void)adViewDidReceiveAd:(GADBannerView *)bannerView; 
```

每当成功接收到广告时都会调用它。此方法通常用于在广告横幅中滑动。传递`bannerView`的总是 class `GADBannerView`，但它有一个`mediatedAdView`包含要显示的实际广告的属性（可能是 iAd 横幅）。

顺便说一句，您正在代码中准备广告请求，但实际上并未使用它来加载广告。您可能还想向下`loadRequest:`调用并使用准备好的请求：

```
[bannerView_ loadRequest:request]; 
```

`GADBannerViewDelegate`有关AdMob SDK 文档中的方法的更多信息，请访问： [https](https://developers.google.com/mobile-ads-sdk/docs/admob/intermediate) ://developers.google.com/mobile-ads-sdk/docs/admob/intermediate 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T08:06:08.447

我认为您错过了添加行：

```
bannerView_.delegate = self; 
```

# java - java创建和删除cookie的意外行为

> ID：14298686
> 
> 赞同：0
> 
> 时间：2013-01-12T22:37:38.500
> 
> 标签：java, javascript, jakarta-ee, cookies, setcookie

我在使用 java 处理 cookie 时遇到问题：

我们有一个由 apache 管理的 tomcat 集群来服务多个应用程序，都在同一个域上。

**第一个问题：**

使用java创建cookie，设置`cookie.setPath("/")`覆盖所有域页面，以便所有应用程序能够读取cookie，场景，

1.  我在`application1`，`app1`创建 cookie，将 cookie 的路径设置为`/app1/`
2.  移动到`app2`，`app2`无法读取 cookie，它使用另一条路径创建 cookie，`/app2/`

怎么了？

**第二个问题：**

完美的 cookie 删除代码在我们的服务器上对我来说很好用，但是移到不同的服务器上，代码可以读取 cookie，所以那里没有域问题，但不能删除它。

java处理cookie又出了什么问题？

我必须使用 javascript 比 java 更好地处理 cookie 吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T22:59:49.237

您应该设置域，而不是路径：

```
cookie.setDomain("example.com"); 
```

现在托管的所有应用程序`example.com`将能够共享相同的 cookie。例如，应用程序`app1.example.com`将`app2.example.com`能够看到此 cookie。

# python - Flask 项目结构

> ID：14298692
> 
> 赞同：0
> 
> 时间：2013-01-12T22:38:38.920
> 
> 标签：python, rest, flask

我想知道使用 Flask 时最好遵循的文件夹结构是什么。我想实现以下目标：

/myproject runserver.py /app1 ... /app2 ....

当然，我想与我的所有应用程序共享我的数据库配置。我怎样才能做到这一点？在文档中，他们总是谈论一个应用程序

PD：我来自 django。PD2：我也读过这个： http: [//flask.pocoo.org/docs/blueprints/](http://flask.pocoo.org/docs/blueprints/)和这个： http: [//flask.pocoo.org/docs/patterns/packages/#modules-and-resources](http://flask.pocoo.org/docs/patterns/packages/#modules-and-resources)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T23:09:29.997

我发现自己最适合我的是将应用程序划分为蓝图。也就是说，不要将整个事情拆分成单独的 WSGI 应用程序，而是拆分成这些在 Flask 应用程序中注册的类似 Flask 的对象。它们提供了为注册为蓝图端点或整个应用程序的视图注册错误处理程序、模板上下文处理器等的可能性 - 您的选择。

可以通过使用名称为“request_globals_class”的类来共享数据库连接对象（它必须在您的应用程序类中声明，该类当然继承了 Flask）。当您为此类提供属性时，视图（或在请求处理上下文中运行的任何内容）可以作为 flask.g 对象的属性访问它。

# postgresql - JPA eclipselink OID 大对象 PostgreSQL

> ID：14298694
> 
> 赞同：1
> 
> 时间：2013-01-12T22:38:42.633
> 
> 标签：postgresql, jpa, netbeans, primefaces, eclipselink

我是 JPA 的新手，我的字段 PostgreSQL oid 类型（字段 foto）有问题，我试图通过 Primefaces 的 ap:fileupload 存储从接口捕获的图像并且没有成功。我已经映射了图片字段数据类型 BigInteger 的 IDE。他们尝试了以下方法：

*   我想转换一个 BigInteger FileUploadEvent 字节和一个让我难过的 Bug。

*   认为 IDE 被错误地映射 OID 将数据类型更改为 byte [] 并成为返回 FileUploadEvent 的字节，我给出了错误。

    **[EL 警告]：01/12/2013 16:54:51.2 - ServerSession (1488263888) - 异常 [EclipseLink-3002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions。ConversionException 异常描述：对象 [94,750]，属于类 [class java.lang.Long]，来自映射 [org.eclipse.persistence.mappings.DirectToFieldMapping [photo -> candidato.foto]] 与描述符 [RelationalDescriptor (Entity.Candidato) -> [DatabaseTable (candidate)])]，无法转换为 [class [B]。**

为前两种情况添加注释@Lob，也没有工作，我不知道我是否应用了任何先前的转换或什么。

IDE：Netbeans 7.2

数据库管理系统：PostgreSQL 9.0

持久化引擎：EclipseLink 2.3.2

我希望我能帮上忙。

表 BD

```
CREATE TABLE candidato
    (
      idcandidato serial NOT NULL,
      idtipoidentificacion integer,
      numeroidentificacion character varying(100),
      nombres character varying(100),
      foto oid,
      n_foto character varying(50),
      CONSTRAINT candidato_pkey PRIMARY KEY (idcandidato),
    )
    WITH (
      OIDS=FALSE
    ); 
```

具有 BigInteger 的实体 Candidato（Netbeans 生成器）

```
@Column(name = "foto")
private BigInteger foto;

public BigInteger getFoto() {
    return foto;
}

public void setFoto(BigInteger foto) {
    this.foto = foto;
} 
```

具有类型更改的实体候选者 (byte[])

```
@Column(name = "foto")
private byte[] foto;

public byte[] getFoto() {
    return foto;
}

public void setFoto(byte[] foto) {
    this.foto = foto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T02:00:10.387

这似乎给休眠用户造成了一堆混乱。大多数情况下，您希望`byte[]`在 hybernate 端和`bytea`PostgreSQL 端。 `bytea`代表“字节数组”，因此两者或多或少相同。Byteas的开销比 lobs 少得多，但如果您需要一个流接口`lob`，包括在. 例如，如果您正在存储流式视频并且可能希望在 25MB 中启动一个新的分块请求，那么 LOB 将派上用场。`blob``oid``lob`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:10:33.827

Postgres 如何返回 OID 类型？您很可能需要使用 Converter 在 Java 类型和 OID 类型之间进行转换。

见， [http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_converter.htm#CHDEHJEB](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_converter.htm#CHDEHJEB)

# java - D lang 简单的基准测试

> ID：14298699
> 
> 赞同：3
> 
> 时间：2013-01-12T22:39:18.870
> 
> 标签：java, benchmarking, d

我是 D 的新手，我在简单的测试中将它与 Java 进行比较，并期望看到本机语言会更快（或大致相同）。但在我第一次使用递归 D 的测试中，它比 Java 慢（几乎两倍）。

Java（这是一个糟糕的 Java 性能测试，但它只是简单的想法）：

```
public static void main(String... args) {
        long before = System.nanoTime();
        System.out.println(fibonacci(40));
        System.out.println(TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - before));
    }

    static int fibonacci(int n) {
        if (n < 2) {
            return n;
        }
        return fibonacci(n - 2) + fibonacci(n - 1);
    } 
```

环境：Win7 64bit，JDK：1.7.0_10 x64。

丁：

```
import std.stdio;
import std.datetime;

void main(string[] args)
{
    auto r = benchmark!(simplebench)(1);
    writefln("%s", r[0].to!("msecs", int));
}

void simplebench() {
    writeln(fibonacci(40));
}

int fibonacci(int n) {
    if (n < 2) {
        return n;
    }
    return fibonacci(n - 2) + fibonacci(n - 1);
} 
```

环境：Win7 64bit，dmd 2.061，编译器选项：-noboundscheck -inline -O -release

Java ~570ms 和 D ~1011ms。

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T23:43:37.297

Java 也是通过其 JIT 编译器原生的。如果您使用`-Xint`（强制解释器）禁用 JIT，那么您会发现 D 明显更快。对于它的价值，我在 C 中尝试了类似的实现，并获得了与 D 中相同的速度。

这些类型的微基准对测试一般性能没有用处。您在这里所做的只是测试 Java JIT 编译代码与 D 编译代码。他们都在编译。此外，这不是典型的 Java 代码。典型的 Java 程序会在堆上分配大量内存，而典型的 D 程序则不会。

如果您想了解D 与 Java 的*实际*性能，那么您需要在*实际*程序上对其进行测试。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-15T18:09:13.967

DMD 是 D 的参考编译器，但它的后端生成代码的速度不如前面提到的其他编译器 GDC 和 LDC 快。

在我的电脑上测量的时间：

D 编译器，全部使用以下标志或其等效项：-noboundscheck -inline -O -release

DMD ~905ms, LDC ~663ms, GDC ~382ms

Java ~445ms

g++ ~370ms under -O3

这些（微）结果表明，当使用相同的后端编译时，D 代码与 cpp 等效的性能相同，并且比 Java 代码更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T23:51:49.540

DMD 的后端没有像基于 GCC 的[GDC](http://gdcproject.org/)或基于 LLVM 的[LDC](https://github.com/ldc-developers/ldc)那样优化。当使用 GDC 构建时，您的测试程序对我来说比 Java 运行得稍微快一些。如果性能对您的项目很重要，请不要将 DMD 用于发布版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T02:27:06.767

你没有做错任何事。Java 的 JIT 非常好，并且可能比 DMD 编译器更好地优化某些代码？- 尝试 GDC 或 LDC 编译器，看看生成的可执行文件的测试会给出什么样的结果。我也会测试 LuaJIT，我希望它在处理 POD 的这些小算法上非常快。

# java - 如何确保用户在 java GUI 中输入有效数字

> ID：14298700
> 
> 赞同：0
> 
> 时间：2013-01-12T22:39:20.267
> 
> 标签：java, user-interface, user-input

> **可能重复：**
> [何时在 Swing 应用程序中显示无效输入的错误消息](https://stackoverflow.com/questions/12165355/when-to-display-error-messages-for-invalid-input-in-swing-application)

我需要创建一个 java GUI，提示用户在各种文本框中输入数字，总计 100。但我的问题是我如何强制用户输入总共 100 而不会出现烦人的弹出框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:41:20.580

您可以在每个不可见的文本框上方有一个标签，如果它们没有填写，则使它们可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:41:37.303

您可以简单地显示状态消息`JLabel`，也可以禁用任何关联的按钮。在每个文本字段文档中添加一个`DocumentListener`，以在每次进行编辑时重新计算状态。（假设 Swing - 其他窗口工具包可用。）

# google-maps - 是否可以在不使用回调的情况下使用谷歌地图？

> ID：14298703
> 
> 赞同：0
> 
> 时间：2013-01-12T22:39:46.837
> 
> 标签：google-maps, google-maps-api-3

我想让谷歌地图在附近搜索时遍历一堆城市。但是，maps 的异步策略不允许代码按预期运行。我希望它是程序性的，似乎删除回调会解决它。

有没有人有建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:08:11.313

一般来说，答案必须是**NO**

Maps-API 内部使用了很多异步请求，例如图块的加载是异步请求回调的结果。

但这里的问题根本不是异步请求，而是对服务（地理编码、地点）的异步请求。

当我将问题重新定义为：

**是否可以在不使用回调的情况下使用谷歌地图服务的响应？**
答案必须是：**是**

这些网络服务也可以从服务器端访问，因此您可以在服务器端获取结果并将它们直接传递给脚本。

另一种选择是对 web 服务的**同步**请求，但实际上这会阻塞浏览器，直到您得到响应，这不是一个理想的选择。

# ios - 使用委托时弹出 ViewController

> ID：14298705
> 
> 赞同：0
> 
> 时间：2013-01-12T22:39:52.613
> 
> 标签：ios, objective-c, inheritance, delegation

我承认我的目标 C 有点弱，我的最终目标是将数据从 ViewController3 传递回 ViewController1。实际上，这部分已经完成并且成功了。但是，当调用 [self.navigationController popToRootViewControllerAnimated:YES] 时，我得到 EXC_BAD_ACCESS。

```
ViewController1 <ViewController2Delegate>
- (void) didAddEventLocation:(Event *)event {
    NSLog(@"Event name = %@", event.name); //Shows name successfully
}

ViewController2 <ViewController3Delegate>
- (void) didAddEvent:(Event *)event {
   [self.delegate didAddEventLocation:event];
}

ViewController3
[self.delegate didAddEvent:event];
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

抱歉，代码格式不正确，只是想简化一下。做 [self.navigationController popViewControllerAnimated:YES] 没有问题，但它只需要我到 ViewController2。我知道我在这里做错了什么，但不能完全确定如何解决它。让我知道是否需要澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:00:40.353

使用僵尸追捕给你 EXC_BAD_ACCESS 的东西。某些对象已被释放，现在在您弹回根视图控制器时被调用。

试试这个链接： [如何在 Xcode 4 中设置 NSZombieEnabled？](https://stackoverflow.com/questions/2190227/how-do-i-set-up-nszombieenabled-in-xcode-4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T23:27:57.173

看起来，您的一个控制器（在我看来是第一个）已被释放。在 VC3 方法中检查 self.navigationController 是否存在。然后你必须检查他所有的风险投资。我觉得没啥先拿VC的。问题可以通过使用（例如）导航控制器的**addChildViewController**方法来解决，或者如果 smth 将引用您的控制器。

此外，如果它们之间的路径有问题，您可以使用 NSNotificationCenter 将一些信息从一个实例发送到另一个实例。

！

# jquery-ui - codeigniter jquery自动完成

> ID：14298707
> 
> 赞同：0
> 
> 时间：2013-01-12T22:39:54.210
> 
> 标签：jquery-ui, codeigniter, autocomplete

为什么我键入时列表不自动更新？无论我输入什么，列表都是一样的。

我希望能够输入“wj”，它只会列出以“wj”开头的项目。

JS

```
$(function()
{
    $("#part_num_id").autocomplete({

        source: "partnum/get"

    });
}); 
```

控制器

```
 public function get() 
{

    $q = $this->input->post('term', TRUE);

    $this->load->model('partnum_model');
    $this->partnum_model->get_partnum2($q);
} 
```

模型

```
 function get_partnum2($q)
  {
    $this->db->select('*');
    $this->db->like('part_num', $q); 
    $query = $this->db->get('item_history');

    if($query->num_rows > 0)
    {
      foreach ($query->result_array() as $row)
      {
        $new_row['label']=htmlentities(stripslashes($row['part_num']));
        $new_row['value']=htmlentities(stripslashes($row['id']));
        $row_set[] = $new_row; //build an array
      }

      echo json_encode($row_set);
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:14:53.947

我可能错了，因为我没有彻底测试过，但我相信自动完成发送的是 GET 请求，而不是 POST 请求。所以

```
$q = $this->input->post('term', TRUE); 
```

不会给你带来任何东西；相反，你应该写

```
$q = $this->input->get('term', TRUE); 
```

# c - C 指针和数组/'sizeof' 运算符

> ID：14298710
> 
> 赞同：13
> 
> 时间：2013-01-12T22:40:10.573
> 
> 标签：c, arrays, pointers, sizeof

> **可能重复：** [字符指针和数组的堆栈指针差异](https://stackoverflow.com/questions/12760229)

为了说明我的问题：

```
int main(void){
    int myary[20];
    int *myaryPtr;
    myaryPtr = myary;

    sizeof(myary); // Will it return 80? Correct?
    sizeof(myaryPtr); // Will it return 4? Correct?
    return 0;
} 
```

首先，我的假设是否正确？

然后假设我的假设是正确的，详细解释是什么？我知道我的 20 元素数组是 80 字节，但名称不`myary`只是指向数组第一个元素的指针吗？那么它不应该也是4吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T22:42:20.440

是的，你的假设是正确的，假设一个`int`和一个指针在你的机器上都是 4 个字节长。

不，数组不是指针。数组名称有时会在某些上下文中衰减为指针，但它们不是一回事。comp.lang.c FAQ有一[整节](http://c-faq.com/aryptr/index.html)专门针对这个常见的混淆点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T22:55:06.407

在任何一种情况下，数组的大小都不会存储在内存中，无论您将其声明为`int myArr[20]`还是`int* myArrPtr`。

发生的事情是`sizeof()`（由编译器）替换为**常量 value**。

因此，由于`myArr`在编译之前指定了固定大小，编译器知道分配的内存量有多大。使用`myArrPtr`，您可以动态分配不同的数组大小，因此只存储*类型的大小。*

# c# - GETDATE() 总是返回 12:00:00 AM

> ID：14298713
> 
> 赞同：-2
> 
> 时间：2013-01-12T22:40:31.363
> 
> 标签：c#, asp.net, sql-server-2008

在我的 ASP.NET (C#) 项目中，我将一些数据插入到数据库中。

```
INSERT INTO USERS (username,join_date) VALUES('Ali',GETDATE()); 
```

现在，当我从数据库中获取日期时，我正在使用**DateTime**。

```
SqlDataReader r = Command.ExecuteReader();
r.Read();
myDate = r.getDateTime(0); 
```

当我将它插入到某个 DIV 中时，我会这样做。

```
"<div>"+myDate.ToLongTimeString()+"</div>" 
```

我得到了正确的日期，如**day/month/year**，但小时总是**12:00:00 AM**。

我怎样才能得到准确的时间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T22:46:19.303

确保 join_date 是 DATETIME 类型，而不是数据库中的 DATE

[http://msdn.microsoft.com/en-us/library/ms186724.aspx](http://msdn.microsoft.com/en-us/library/ms186724.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T22:49:14.263

用作`DATE`列类型意味着您只存储日期而不是时间。

因此，当您将值读回`DateTime`对象时，系统必须将时间部分初始化为午夜。

将列转换为`DATETIME`，您还将获得存储的时间分量。

有关差异的更多信息，请参阅有关[日期和时间数据类型和函数的 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms186724.aspx)

# ios - 点在圆角矩形内吗？

> ID：14298714
> 
> 赞同：1
> 
> 时间：2013-01-12T22:40:40.610
> 
> 标签：ios, uikit, geometry

我有这个代码来绘制圆角矩形：

```
void ContextAddRoundedRect(CGContextRef ctx, CGRect rect, CGFloat radius) {
    CGFloat minX = CGRectGetMinX(rect);
    CGFloat maxX = CGRectGetMaxX(rect);
    CGFloat minY = CGRectGetMinY(rect);
    CGFloat maxY = CGRectGetMaxY(rect);

    CGContextMoveToPoint(ctx, minX + radius, minY);
    CGContextAddArcToPoint(ctx, maxX, minY, maxX, minY + radius, radius);
    CGContextAddArcToPoint(ctx, maxX, maxY, maxX - radius, maxY, radius);
    CGContextAddArcToPoint(ctx, minX, maxY, minX, maxY - radius, radius);
    CGContextAddArcToPoint(ctx, minX, minY, minX + radius, minY, radius);
} 
```

**考虑到圆角**，我如何确定给定的 CGPoint 是否在我的矩形内？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:44:49.990

与其直接将其构建成`CGContextRef`这样，您可以将其构建为[`UIBezierPath`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html)，然后使用`-[UIBezierPath containsPoint:]`.

当您准备好将路径实际呈现到上下文中时，您可以通过以下方式进行：

```
CGContextAddPath(ctx, [myBezierPath CGPath]); 
```**

# c++ - C++ 强制转换运算符重载和多态

> ID：14298715
> 
> 赞同：22
> 
> 时间：2013-01-12T22:40:59.287
> 
> 标签：c++, casting, polymorphism, overloading, operator-keyword

我对 C++ 的这种行为感到困惑：

```
struct A {
   virtual void print() const { printf("a\n"); }
};

struct B : public A {
   virtual void print() const { printf("b\n"); }
};

struct C {
   operator B() { return B(); }
};

void print(const A& a) {
   a.print();
}

int main() {
   C c;
   print(c);
} 
```

所以，测验是，程序的输出是什么——a 还是 b？嗯，答案是一个。但为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T04:47:51.490

这里的问题是 C++03 标准中的错误/错误功能/漏洞，不同的编译器试图以不同的方式修补问题。（这个问题在 C++11 标准中不再存在。）

两个标准的第 8.5.3/5 节指定了如何初始化引用。这是 C++03 版本（列表编号是我的）：

> 对 type 的引用`cv1 T1`由 type 的表达式初始化，`cv2 T2`如下所示：
> 
> 1.  如果初始化表达式
>     
>     
>     1.  是左值（但不是位域），并且“cv1 T1”与“cv2 T2”引用兼容，或者
>     2.  具有类类型（即`T2`是类类型）并且可以隐式转换为 type 的左值`cv3 T3`，其中`cv1 T1`引用兼容`cv3 T3`
>     
>     然后在第一种情况下引用直接绑定到初始化表达式左值，在第二种情况下引用绑定到转换的左值结果。
>     
>     
> 2.  否则，引用应为非易失性 const 类型（即，`cv1`应为`const`）。
>     
>     
> 3.  如果初始化表达式是右值，具有`T2`类类型，并且与`cv1 T1`引用兼容`cv2 T2`，则引用以下列方式之一绑定（选择是实现定义的）：
>     
>     
>     1.  引用绑定到由右值表示的对象（参见 3.10）或该对象中的子对象。
>     2.  创建了一个 [sic]类型`cv1 T2`的临时对象，并调用构造函数将整个右值对象复制到临时对象中。引用绑定到临时对象或临时对象中的子对象。
>     
>     无论复制是否实际完成，用于制作复制的构造函数都应该是可调用的。
>     
>     
> 4.  `cv1 T1`否则，使用非引用复制初始化规则（8.5）从初始化表达式创建并初始化一个临时类型。然后将引用绑定到临时文件。

手头的问题涉及三种类型：

*   要创建的引用的类型。标准（两个版本）将此类型表示为`T1`. 在这种情况下，它是`struct A`。
*   初始化表达式的类型。标准将此类型表示为`T2`. 在这种情况下，初始化表达式是变量`c`，所以`T2`也是`struct C`。请注意，由于与`struct A`不*引用兼容*`struct C`，因此无法直接将引用绑定到`c`. 需要一个中间人。
*   中间体的类型。标准将此类型表示为`T3`. 在这种情况下，这是`struct B`。请注意，应用转换运算符会将左值转换`C::operator B()`为右值。`c``c`

我标记为 1.1 和 3 的初始化已经失效，`struct A`因为`struct C`. `C::operator B()`需要使用转换运算符。1.2 out 因为这个转换运算符返回一个右值，所以这个规则 1.2 out。剩下的就是选项 4，创建一个临时类型的`cv1 T1`. 严格遵守 2003 版标准强制为这个问题创建两个临时的，即使只有一个就足够了。

2011 版标准通过将选项 3 替换为

> *   如果初始化表达式
>     
>     
>     *   是一个 xvalue、类纯右值、数组纯右值或函数左值，并且与`cv1 T1`引用兼容`cv2 T2`，或
>     *   具有类类型（即`T2`是类类型），其中`T1`与 不引用相关`T2`，并且可以隐式转换为类型的 xvalue、类纯右值或函数左值`cv3 T3`，其中`cv1 T1`与 引用兼容`cv3 T3`，
>     
>     然后引用在第一种情况下绑定到初始化表达式的值，在第二种情况下绑定到转换结果（或者，在任何一种情况下，都绑定到适当的基类子对象）。在第二种情况下，如果引用是右值引用，并且用户定义的转换序列的第二个标准转换序列包括左值到右值的转换，则程序格式错误。

似乎 gcc 系列编译器选择了严格的合规性而不是意图（避免创建不必要的临时变量），而其他打印“b”的编译器选择了对标准的意图/更正。选择严格合规不一定值得称道。在 2003 版标准（例如 ）中还有其他错误/错误功能，`std::set`其中 gcc 家族选择理智而不是严格遵守。

# gtk - 如何调整 GTK 主题？是否有详尽的属性列表？

> ID：14298719
> 
> 赞同：2
> 
> 时间：2013-01-12T22:41:07.070
> 
> 标签：gtk, themes, gtk2

正如我的另一个问题[的答案](https://superuser.com/questions/533090/how-to-make-fillers-in-gtk-applications-smaller)所建议的那样，我正在尝试通过自定义主题来使基于 GTK 的应用程序看起来更紧凑。

我减少了我在 中看到的一些值`gtkrc`，它变得更好了，但还不够。

我想进一步缩小它：

* * *

![带有我要删除的区域的自定义 GTK 主题](../Images/e416615adef14dc8a7f9a8ca774179db.png)

* * *

怎么做？

是否有任何工具可以帮助我调整各种填充或至少向我展示可以在 gtkrc 中设置的详尽属性列表？是否有包含完整属性列表的文档`gtkrc`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:58:53.457

你可以试试[gtkparasite](http://chipx86.github.com/gtkparasite/)，它是一个类似 Firebug 的 GTK+。您必须将其运行为：

```
$ GTK_MODULES=gtkparasite my_program 
```

然后您可以检查每个小部件的属性、更改其值等。在网页中，您还将看到有关如何使用它的截屏视频。

# java - 子弹精度已关闭

> ID：14298732
> 
> 赞同：-2
> 
> 时间：2013-01-12T22:42:24.310
> 
> 标签：java, algorithm, 2d

我正在制作一个自上而下的坦克游戏，但我似乎无法让子弹的准确性达到 100% 它要么只是关闭，要么只是取决于我的鼠标位置

我正在使用下面的公式来计算到达目标的角度（MousePosition）

```
double dx = MousePosition.x - TankPosition.x;
double dy = MousePosition.y - TankPosition.y;
double angle = Math.atan2(dy, dx);

double tx = Math.cos(angle) * speed;
double ty = Math.sin(angle) * speed;

x += tx;
y += ty; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:53:08.783

我猜您的问题是整数与浮点问题，以及四舍五入的问题。如果您使用整数，它会在每次更新时对您的结果进行四舍五入。这意味着根据您的鼠标位置，它可能会出现（如果您的鼠标位于不受舍入影响的位置）或略微偏离，并且会根据所述目标位置看似随机地变化，这听起来像您对问题的描述. 您将希望将位置跟踪为浮点数，并仅在使用它进行绘制时将其舍入，而不是在对其进行计算时。

# javascript - Javascript返回错误行为有什么关系？

> ID：14298734
> 
> 赞同：0
> 
> 时间：2013-01-12T22:42:31.630
> 
> 标签：javascript, html, forms

所以我正在加载一个带有基本脚本和基本表单的 html 页面。但是，当页面加载时，用户可以选择两个单选按钮，是或否。如果您的用户都不选择，我想显示一个警告框。我成功地显示了警报框，但是当用户单击警报框中的“确定”按钮时，用户被重定向到不同的页面。我添加了语句，*return false；*希望这不会发生。

代码如下，

```
<!-- Javascript radiobutton form validation -->

<script type="text/javascript">

function valForm(form) {

    if(!document.getElementById('splash_false').checked && !document.getElementById('splash_true').checked  ) {
        alert('You either like splash pages or dislike em, choose one ...please');
        return false;
    }
}

</script>

<!-- Javascript radiobutton form validation END -->

</head>

<body>
<img src="pics/DSCN1566-300x225.jpg" alt="" width="640" height="auto"  />
<h1>Hello Javascript redirection.</h1><br />

<p>
<form name="tosplashornottosplash" action="splash-process.php" method="post">
Splash pages are stupid.

<input type="radio" name="splash" id="splash_false" value="false" /> No
<input type="radio" name="splash" id="splash_true" value="true" /> Yes

<input type="submit" name="splashSubmit" onClick="return valForm(tosplashornottosplash)" value="Enter" />
</form>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:44:35.540

You should place your handler in the form's `onsubmit` callback

```
<form onsubmit="return valForm(this)" action="splash-process.php" method="post"> 
```

Returning false to the onsubmit handler will prevent your form from being posted

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T22:44:40.067

Try to make it an onsubmit-callback on the form, instead of an onclick-callback on the button. That way, returning `false` will stop the form from posting.

**Side note:**

Since you don't seem to use the reference to the form in your callback, there is no need to pass it to the callback function. So you could just as well call it like this, from the onsubmit-attribute on the form:

```
onsubmit="return valForm()" 
```

And get rid of the the `form` variable in the callback signature:

```
function valForm() {
   ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T22:45:16.423

You need to bind to the `form`'s `onsubmit` event:

```
<form onsubmit="return valForm()"> 
```

(Note that the `form` parameter in your `valForm` function was never actually used nor was it properly filled in either. The `return valForm(tosplashornottosplash)` referred to an non-existant `tosplashornottosplash` JavaScript variable and thus evaluated to `undefined`.)

However it's recommended that you bind your event handlers in the JavaScript code itself instead of wiring them in the HTML markup:

```
document.getElementById("myform").addEventListener("submit", valForm, false); 
```

This assumes you gave your `form` the ID `myform` and that this code is executed *after* the `form` element is loaded into the DOM. You can ensure this by putting your JavaScript at the bottom of the page (just before closing `body`) or by binding to the `DOMContentLoaded` event of the `document`.

To support older IE browsers as well, you need to use `attachEvent` when `addEventListener` is not available. [The article on addEventListener at MDN](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener) suggests something like:

```
if (form.addEventListener) {
  form.addEventListener("submit", valForm, false);
} else if (form.attachEvent)  {
  form.attachEvent("onsubmit", valForm);
} 
```

Alternatively, you can throw [jQuery](http://jquery.com/) in which facilitates DOM selection (e.g. `$("form[name=myform])"`) and takes care of the cross-browser compatibility issues for you (e.g. `$.on('submit', valForm)`).

# c - 在 C 中分配内存并生成结构

> ID：14298738
> 
> 赞同：1
> 
> 时间：2013-01-12T22:43:03.093
> 
> 标签：c, memory-management, structure

我正在尝试通过 Kernighan 的书“C 编程语言”来自学 C，为今年春天的数据结构课程做准备（C 是必需的先决条件），但我被困在如何处理多个结构以及如何存储稍后用于计算和输出的倍数。我为与学生记录相关的结构编写了一些代码，其中包含 id 和分数的变量。函数名称和参数必须保持原样，注释描述每个函数应该做什么。

所以这就是我尝试过的。我想在 allocate 函数中为 10 个学生设置一个结构数组，如下所示：

```
struct student s[10]; 
```

但是，当我尝试将其返回给 main 然后将其传递给生成函数时，会出现不兼容错误。我目前的努力如下。但是，如您所见，我的代码除了生成的最后一组记录（即 student.id 和 student.score）外，没有存储任何内容。显然，我缺少一个关键组件，它使我无法生成随机的唯一学生 ID，因为我无法对照以前的 ID 检查新 ID。我也无法继续编写函数来计算学生分数。任何建议，将不胜感激。提前致谢。

```
#include <stdio.h>
#include<stdlib.h>
#include<math.h>
#include<conio.h>
#include<assert.h>

struct student{
int id;
int score;
};

struct student* allocate(){
     /*Allocate memory for ten students*/
    struct student* s = malloc(10 * sizeof(struct student));
    assert (s != 0);

     /*return the pointer*/
     return s;
}

void generate(struct student* students){
 /*Generate random ID and scores for ten students, ID being between 1 and 10, scores between 0   and 100*/
   int i;
   for (i = 0; i < 10; i++) {
       students -> id = (rand()%10 + 1);
       students -> score = (rand()%(100 - 0 + 1) + 0);
       printf("%d, %d\n", (*students).id, (*students).score);
    }
}

void deallocate(struct student* stud){
     /*Deallocate memory from stud*/
    free(stud);
}

int main(){
   struct student* stud = NULL;

   /*call allocate*/
   stud = allocate();

   /*call generate*/
   generate(stud);

   /*call deallocate*/
   deallocate(stud);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T22:46:41.710

Your `generate()` function only ever accesses the first `student` structure in your array. You need to use that `for` loop index in there:

```
 for (i = 0; i < 10; i++)
 {
     students[i].id = (rand()%10 + 1);
     students[i].score = (rand()%(100 - 0 + 1) + 0);
     printf("%d, %d\n", students[i].id, students[i].score);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T22:51:21.577

Change generate to

```
void generate(struct student* students){

 /*Generate random ID and scores for ten students, ID being between 1 and 10, scores between 0   and 100*/
   int i;
   for (i = 0; i < 10; i++) {
       students[i].id = (rand()%10 + 1);
       students[i].score = (rand()%(100 - 0 + 1) + 0);
       printf("%d, %d\n", students[i].id, students[i].score);
    }
} 
```

# forms - Symfony 2.x 表单字段名称

> ID：14298739
> 
> 赞同：0
> 
> 时间：2013-01-12T22:43:03.527
> 
> 标签：forms, symfony, symfony-forms

当我呈现表单时，表单 Filed Name 以数组的形式给出。例如：`search[item]`等`search[keyword]`，其中 search 是表单的名称。

我不擅长使用表单，但我认为，名称应该简单呈现，`name="item"`或者`name="keyword"`.

我查看了所有文档，自定义表单呈现主题等，但我找不到任何方法来更改 Symfony 表单的默认行为，以将表单文件名从“搜索 [项目]”呈现为“项目”。这样，当我询问 POST 数据时，我可以简单地询问`$this->getRequest()->request->get('item')`，因为我必须处理很多单独的参数。

帮助会很棒 i) 弄清楚如何实现我想要的。ii) 让我知道，为什么这个名字是这样呈现的。这是好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:52:56.913

`Request`您可以将`Request`对象绑定到表单，而不是从对象访问参数。

例如，在您将表单发布到的控制器方法中：

```
namespace Acme\Controller;

use Symfony\Component\HttpFoundation\Request;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

use Acme\Form\MyFormClass;

class MyFormController extends Controller
{
    receiveFormAction(Request $request)
    {
        $form = new MyFormClass();

        // you can specify that a route only accepts a post 
        // request in the routing definition
        if ($request->isMethod('POST')) {
            // this populates the form object with the data 
            // from the form submission
            $form->bind($request);

            if ( ! $form->isValid()) {
                throw new \Exception('Invalid form');
            }

            // an array of the data the format you require
            $data = $form->getData();

            $data['item'];
            $data['keyword'];
            // etc.
        }
    }
} 
```

以上是您应该在 Symfony 2 中处理表单的方式，以及如何利用表单组件为您提供的功能，以及验证等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T22:50:22.263

Symfony supports multiple forms on a page. They might be instances of the same form or have similar field names. Having the fields for each form all together in an array makes this easy to do.

# java - 在加载了类加载器的小程序上绘制

> ID：14298741
> 
> 赞同：-1
> 
> 时间：2013-01-12T22:43:11.330
> 
> 标签：java, graphics, applet, classloader, render

我想知道在已加载的小程序上渲染我自己的图形的最佳/最简单方法是什么：

```
public class Game {

    public static Applet applet = null;
    public static URLClassLoader classLoader = null;

    public static void load() {
        try {
            classLoader = new URLClassLoader(new URL[]{Jar.getJar().toURL()});
            applet = (Applet) classLoader.loadClass("com.funkypool.client.PoolApplet").newInstance();
            applet.setSize(new Dimension(800, 600));
            applet.setBackground(Color.BLACK);
            applet.setStub(new Stub());
            applet.init();
            applet.start();

            JFrame loader = new JFrame("Loader");
            loader.setPreferredSize(applet.getSize());
            loader.add(applet);
            loader.pack();
            loader.setVisible(true);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我希望它在小程序上呈现，但小程序仍然保持其所有原始功能，我相信我可能需要使用反射？我正在考虑查看 Powerbot.org 在 runescape 客户端上呈现的方式，因为客户端仍然保持其所有功能等。

如果您有任何问题或需要查看更多代码，请提出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:49:59.237

Assuming this draws something (my applet-fu is rusty), then you can draw on top of it by placing it in a JFrame and subclassing the JFrames' `void paint(Graphics g)` so that it paints whatever it wants to, and *then* paints something else.

A modified JFrame that does this could be the following (warning: untested code):

```
public static class OverlayJFrame extends JFrame {
     private JPanel overlay;
     public OverlayJFrame(String title) { super(title); }
     public void setOverlay(JPanel overlay) { this.overlay = overlay; }
     public void paint(Graphics g) { super.paint(g); overlay.setSize(getSize()); overlay.paint(g)); }
} 
```

# jquery - 使用 jquery 放大时，图像在悬停时在 Google chrome 中振动

> ID：14298743
> 
> 赞同：1
> 
> 时间：2013-01-12T22:43:34.950
> 
> 标签：jquery, html, css, google-chrome

我目前正在制作一个图片库。它工作正常，除了在谷歌浏览器中，当您将鼠标悬停在顶行时，下面的行将开始振动和移动。[您可以在此处](http://codepen.io/Dirkandries/full/vJslk)找到一个工作示例。

**的HTML：**

```
 <div id="gallery">
             <a href="<?php echo'?img=$imgname';?>"  > 
                           <span c

lass="title"><?php echo'$imgtitle';?></span>
                             <img src="http://ivojonkers.com/fotorichard/images_slider/1.jpg" />
                        </a>

                      <a href="<?php echo'?img=$imgname';?>" >
                       <span class="title"><?php echo'$imgtitle';?></span>
                             <img src="http://ivojonkers.com/fotorichard/images_slider/1.jpg" />
                        </a>
                         <a href="<?php echo'?img=$imgname';?>" > 
                         <span class="title"><?php echo'$imgtitle';?></span>
                            <img src="http://ivojonkers.com/fotorichard/images_slider/1.jpg" />
                        </a>

                        <a href="<?php echo'?img=$imgname';?>" > 
                        <span class="title"><?php echo'$imgtitle';?></span>
                             <img src="http://ivojonkers.com/fotorichard/images_slider/1.jpg" />
                        </a>

                      <a href="<?php echo'?img=$imgname';?>"  >
                       <span class="title"><?php echo'$imgtitle';?></span>
                             <img src="http://ivojonkers.com/fotorichard/images_slider/1.jpg" />
                        </a>
                         <a href="<?php echo'?img=$imgname';?>" > 
                         <span class="title"><?php echo'$imgtitle';?></span>
                             <img src="http://ivojonkers.com/fotorichard/images_slider/1.jpg" />
                        </a>

                      <a href="<?php echo'?img=$imgname';?>"  >
                       <span class="title"><?php echo'$imgtitle';?></span>
                             <img src="http://ivojonkers.com/fotorichard/images_slider/1.jpg" />
                        </a>
                         <a href="<?php echo'?img=$imgname';?>"  >
                          <span class="title"><?php echo'$imgtitle';?></span>
                             <img src="http://ivojonkers.com/fotorichard/images_slider/1.jpg" />
                        </a>

                         <a href="<?php echo'?img=$imgname';?>"  >
                          <span class="title"><?php echo'$imgtitle';?></span>
                             <img src="http://ivojonkers.com/fotorichard/images_slider/1.jpg" />
                        </a>
                        <a href="<?php echo'?img=$imgname';?>"  > 
                        <span class="title"><?php echo'$imgtitle';?></span>
                             <img src="http://ivojonkers.com/fotorichard/images_slider/1.jpg" />
                        </a>
                         <a href="<?php echo'?img=$imgname';?>"  > 
                         <span class="title"><?php echo'$imgtitle';?></span>
                             <img src="http://ivojonkers.com/fotorichard/images_slider/1.jpg" />
                        </a>
    </div> 
```

**CSS**

```
#gallery {
    width: 100%; 
    margin-top: 100px;
    padding-bottom: 100px;
    display:block;
    text-align:center;
}

#gallery a {
    display: inline-block;
    margin: 0 12.5px 25px 12.5px;
    position: relative;
    height:150px;
    width:225px;
}

#gallery a img {
    height:150px;
    width:225px;
    position:relative;
} 
```

jQuery

```
$(document).ready(function() {  
     $("#gallery a img").hover(function(){
            $(this).css({"z-index":"99"}); 
             $(this).stop(true, false).animate({ "margin-left":"-112.5px",
                    "margin-top":"-150px",
                    "bottom":"-75px",
                    "height":"300px",
                    "width":"450px"
                    });
        }, function() {
        $(this).css({"z-index":"0"}); 
             $(this).stop(true, false).animate({"height":"150px",
                    "width":"225px",
                    "margin-left":"0px",
                    "margin-top":"0px",
                    "bottom":"0px"
                 });
        });
}); 
```

PS如果你缩小更多它会更明显。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:10:43.920

我认为最好的选择是复制您的基本图像并放大它。

```
 $(function() {  
         $("#gallery a img").mouseenter(function(){
           var d = $(this).clone().addClass('preview')
           .css({position:'absolute',top:$(this).position().top, left:$(this).position().left,zIndex:99})
           .insertAfter($(this)).animate({ "margin-left":"-112.5px",
                        "margin-top":"-150px",
                        "bottom":"-75px",
                        "height":"300px",
                        "width":"450px" 
}).mouseleave(function(){
           $(this).animate({"height":"150px",
                        "width":"225px",
                        "margin-left":"0px",
                        "margin-top":"0px",
                        "bottom":"0px"
                                             },
                        function(){$(this).remove()});
            })
           });
    }); 
```

在[jsfiddle](http://jsfiddle.net/hbNvu/13/)上试试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:13:26.267

这会将所有图像向右移动一点（所以只需做一些额外的工作），但是将图像设置为绝对值可以消除我的振动。

```
#gallery a img {
height:150px;
width:225px;
position:absolute;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T23:14:54.750

代替 ：

```
#gallery a {
display:inline-block;
/* ... */
} 
```

和

```
#gallery a {
display:block;
float:left;
/* ... */
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T23:01:47.930

尝试将 z-index 恢复（回到零）移动到动画回调中：

```
// ...   
$(this).stop(true, false).animate({"height":"150px",
    "width":"225px",
    "margin-left":"0px",
    "margin-top":"0px",
    "bottom":"0px"
}, function(){
    // Do this last
    $(this).css({"z-index":"0"}); 
});
// ... 
```

由于某种原因，jsfiddle 今天不适合我，否则我会把它放在一起。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T14:56:34.153

我在你们的帮助下解决了这个问题。我所要做的就是改变这个：

```
 // ...   
$(this).stop(true, false).animate({"height":"150px",
    "width":"225px",
    "margin-left":"0px",
    "margin-top":"0px",
    "bottom":"0px"
}, function(){
    // Do this last
    $(this).css({"z-index":"0"}); 
});
// ... 
```

对此：

```
#gallery a img {
height:150px;
width:225px;
position:absolute;
left:0px;
} 
```

# java - Java - 带有 KeyListener 的程序不起作用

> ID：14298745
> 
> 赞同：-4
> 
> 时间：2013-01-12T22:43:45.507
> 
> 标签：java, swing, jframe, keylistener

主要问题：当我使用 . 创建一个挪威计算器时`KeyListener`，它不能正常工作。

我已经添加了对 JFrame`addKeyListener()`方法的调用，并且我已经实现了`KeyListener`接口和所有内容。但它仍然不起作用。我为糟糕的代码道歉。

任何帮助表示赞赏。提前致谢。

**代码：**

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;  
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.Random;

public class miniräknare extends JFrame implements KeyListener {
public static int answer = 0;
public JLabel lblRandomnum;
public static int answer2 = 0;
public static boolean flip = true;
public static JLabel lblOutput;
Random myRandom = new Random();
/**
 * 
 */
private static final long serialVersionUID = 1L;
/**
 * Launch the application.
 */
public static void main(String[] args) {
    new miniräknare();

}

public miniräknare() {

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 300, 600);
    setResizable(false);
    getContentPane().setLayout(null);
    lblOutput = new JLabel("" + answer);
    lblOutput.setBounds(35, 33, 222, 37);
    getContentPane().add(lblOutput);
    JButton button = new JButton("1");
    button.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
        increment(1);
        lblRandomnum.setText("");
        }
    });
    button.setBounds(35, 111, 75, 75);
    getContentPane().add(button);

    JButton button_1 = new JButton("2");
    button_1.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            increment(2);
            lblRandomnum.setText("");
        }
    });
    button_1.setBounds(109, 111, 75, 75);
    getContentPane().add(button_1);

    JButton button_2 = new JButton("3");
    button_2.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            increment(3);
            lblRandomnum.setText("");
        }
    });
    button_2.setBounds(182, 111, 75, 75);
    getContentPane().add(button_2);

    JButton button_3 = new JButton("4");
    button_3.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            increment(4);
            lblRandomnum.setText("");
        }
    });
    button_3.setBounds(35, 184, 75, 75);
    getContentPane().add(button_3);

    JButton button_4 = new JButton("5");
    button_4.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            increment(5);
            lblRandomnum.setText("");
        }
    });
    button_4.setBounds(109, 184, 75, 75);
    getContentPane().add(button_4);

    JButton button_5 = new JButton("6");
    button_5.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
        increment(6);
        lblRandomnum.setText("");
        }
    });
    button_5.setBounds(182, 184, 75, 75);
    getContentPane().add(button_5);

    JButton button_6 = new JButton("7");
    button_6.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            increment(7);
            lblRandomnum.setText("");
        }
    });
    button_6.setBounds(35, 257, 75, 75);
    getContentPane().add(button_6);

    JButton button_7 = new JButton("8");
    button_7.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            increment(8);
            lblRandomnum.setText("");
        }
    });
    button_7.setBounds(109, 257, 75, 75);
    getContentPane().add(button_7);

    JButton button_8 = new JButton("0");
    button_8.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            increment(0);
            lblRandomnum.setText("");
        }
    });
    button_8.setBounds(109, 331, 75, 75);
    getContentPane().add(button_8);

    JButton button_9 = new JButton("9");
    button_9.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            increment(9);
            lblRandomnum.setText("");
        }
    });
    button_9.setBounds(182, 257, 75, 75);
    getContentPane().add(button_9);

    JButton btnC = new JButton("C");
    btnC.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            answer = 0;
            answer2 = 0;
            flip = true;
            lblOutput.setText("" + answer);
            lblRandomnum.setText("");
        }
    });
    btnC.setBounds(35, 331, 75, 75);
    getContentPane().add(btnC);

    JButton button_10 = new JButton("=");
    button_10.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
        lblOutput.setText("tänker.........");
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        lblOutput.setText("Detta tal är för advancerat :-(");
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        lblRandomnum.setText("Men, jag tror det blir " + myRandom.nextInt(100000));
        }
    });
    button_10.setBounds(182, 331, 75, 75);
    getContentPane().add(button_10);

    JButton button_11 = new JButton("+");
    button_11.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            if((lblOutput.getText().endsWith("+")) || (lblOutput.getText().endsWith("-")) || (lblOutput.getText().endsWith("x")) || (lblOutput.getText().endsWith("%"))) {
                lblOutput.setText("" + answer + "+");
            }
            else lblOutput.setText(lblOutput.getText() + "+");
            if(flip) {
                lblOutput.setText("+");
                flip = false;
            }
            else if(!flip) {
                flip = true;
            }
        }
    });
    button_11.setBounds(35, 405, 75, 75);
    getContentPane().add(button_11);

    JButton button_12 = new JButton("-");
    button_12.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            if((lblOutput.getText().endsWith("+")) || (lblOutput.getText().endsWith("-")) || (lblOutput.getText().endsWith("x")) || (lblOutput.getText().endsWith("%"))) {
                lblOutput.setText("" + answer + "-");
            }
            else lblOutput.setText(lblOutput.getText() + "-");
            if(flip) {
                lblOutput.setText("-");
                flip = false;
            }
            else if(!flip) {
                flip = true;
            }
        }
    });
    button_12.setBounds(109, 405, 75, 75);
    getContentPane().add(button_12);

    JButton btnX = new JButton("X");
    btnX.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            if((lblOutput.getText().endsWith("+")) || (lblOutput.getText().endsWith("-")) || (lblOutput.getText().endsWith("x")) || (lblOutput.getText().endsWith("%"))) {
                lblOutput.setText("" + answer + "x");
            }
            else lblOutput.setText(lblOutput.getText() + "x");
            if(flip) {
                lblOutput.setText("x");
                flip = false;
            }
            else if(!flip) {
                flip = true;
            }
        }
    });
    btnX.setBounds(182, 405, 75, 75);
    getContentPane().add(btnX);

    JButton button_13 = new JButton("%");
    button_13.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            if((lblOutput.getText().endsWith("+")) || (lblOutput.getText().endsWith("-")) || (lblOutput.getText().endsWith("x")) || (lblOutput.getText().endsWith("%"))) {
                lblOutput.setText("" + answer + "%");
            }
            else lblOutput.setText(lblOutput.getText() + "%");
            if(flip) {
                lblOutput.setText("%");
                flip = false;
            }
            else if(!flip) {
                flip = true;
            }
        }
    });
    button_13.setBounds(109, 479, 75, 75);
    getContentPane().add(button_13);

    lblRandomnum = new JLabel("randomnum");
    lblRandomnum.setBounds(45, 82, 212, 16);
    getContentPane().add(lblRandomnum);
    lblRandomnum.setText("");
    setVisible(true);
    setTitle("norsk miniräknare");
    addKeyListener(this);
}

public static void increment(int i) {
    if(flip) {
    String s = "" + answer;
    StringBuilder str = new StringBuilder(s);
    if(s.startsWith("0")) {
        answer = i;
    } else {
    str.insert(s.length(), "" + i);
    s = str.toString(); 

    if(s.length() != 10) answer = Integer.parseInt(s);
    }
    lblOutput.setText("" + answer);
    }
    if(!flip) {
        String s = "" + answer2;
        StringBuilder str = new StringBuilder(s);
        if(s.startsWith("0")) {
            answer2 = i;
        } else {
        str.insert(s.length(), "" + i);
        s = str.toString();
        answer2 = Integer.parseInt(s);
        }
        lblOutput.setText("" + answer2);
        }
}

@Override
public void keyPressed(KeyEvent e) {
    System.out.println("lol");
    int KeyCode = e.getKeyCode();
    if(KeyCode == KeyEvent.VK_0) increment(0);
    if(KeyCode == KeyEvent.VK_1) increment(1);
    if(KeyCode == KeyEvent.VK_2) increment(2);
    if(KeyCode == KeyEvent.VK_3) increment(3);
    if(KeyCode == KeyEvent.VK_4) increment(4);
    if(KeyCode == KeyEvent.VK_5) increment(5);
    if(KeyCode == KeyEvent.VK_6) increment(6);
    if(KeyCode == KeyEvent.VK_7) increment(7);
    if(KeyCode == KeyEvent.VK_8) increment(8);
    if(KeyCode == KeyEvent.VK_9) increment(9);
}

@Override
public void keyReleased(KeyEvent e) {
    System.out.println("trololol");

}

@Override
public void keyTyped(KeyEvent e) {
    System.out.println("ofta");
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:01:41.763

不要将 KeyListener 添加到 JFrame。KeyListener 仅在它们被添加到具有焦点的组件时才起作用，而这几乎不是 JFrame。事实上，对于 Swing 应用程序，您应该完全避免使用 KeyListeners，而是使用 Key Bindings，因为它们可以解决焦点问题并允许您使用可重用的 Actions。

请查看键绑定教程：[这里](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。

另外顺便说一句：您不应该使用空布局并设置边界，因为它会使程序难以调试和扩展。相反，请考虑使用布局管理器将一组 JButtons 放置到您的 GUI 中。GridLayout 可以很好地用于保存 JButton 的 JPanel。

# php - 为什么我的 FQL 照片请求未返回所有查询结果？

> ID：14298747
> 
> 赞同：0
> 
> 时间：2013-01-12T22:44:20.020
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql, photo

在我的画布应用程序中，我指定我想要接收所有可用的照片（由我拍摄或与我共享），这些照片都带有“friend1”和我自己的标签。我拥有 user_photos 和 friends_photos 的权限。

我的 FQL 查询如下：

> SELECT object_id FROM photo WHERE
> (object_id IN (SELECT object_id FROM photo_tag WHERE subject=" *friendID* "))
> AND
> (object_id IN (SELECT object_id FROM photo_tag WHERE subject="myID *"* ))

**我所看到的：**
我确实一直收到一组 3 张照片，这些照片都标记了我和朋友 1，但不是全部！我知道还有更多照片（总共 12 张）标记了我们俩，因为我可以通过普通的 facebook“查看友谊”页面访问它们。

我看到的唯一模式是收到的照片的所有者不在我未收到的 9 张照片的所有者集中。换句话说，我得到了一些朋友的所有照片，而没有其他朋友的照片。所有 12 张照片都与我分享。

我的结果没有任何分页标签，所以这是返回的所有信息。

结果在 API 资源管理器和实践中完全相同。

**我想看到的：**我和friend1 的所有照片都被标记了。

**关注点：**
从语法的角度来看，我的查询是否存在问题？
在某些特殊情况下，是否可以通过权限访问“与我共享”的照片：“friends_photos”？
或者我没有解决 FQL 表的另一个方面 - 我应该查看其他表，如“专辑”吗？
这可能是我的访问令牌的问题吗 - 我假设因为我得到了任何我的授权好的东西？

我知道我在这里问了大约 5 个问题，但是任何帮助都将不胜感激，如果我应该提供更多信息，请告诉我。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:20:57.230

这些照片可能无法通过 API 访问。如果所有者限制了照片的可见性，或者照片的所有者已阻止应用程序访问其数据，Facebook 将不会通过 API 返回此信息。

假设您认识拍摄照片的第三方，您可以查看帖子的宣传程度，并询问他们是否屏蔽了应用程序。

请记住，在使用 Facebook API 时，您永远不会得到**任何**东西。你会接受 Facebook 给你的东西并为此感到高兴。

您不会在 FQL 中获得分页链接。您只会在 Graph API 查询中看到这些内容。

# java - OpenJDK only: Why does getResourceAsStream() not return MANIFEST.MF in executable JAR

> ID：14298755
> 
> 赞同：4
> 
> 时间：2013-01-12T22:44:47.240
> 
> 标签：java, openjdk

I have a curious situation. My code does not load the `MANIFEST.MF` using `getResourceAsStream()` on OpenJDK 1.6\. On Oracle JDK 1.6+ it works well. I came across this when I was accidently running my code on OpenJDK.

**main() method:**

```
public static void main(String[] args) throws IOException {

    InputStream is = Main.class.getClassLoader().getResourceAsStream("META-INF/MANIFEST.MF");
    InputStreamReader isr = new InputStreamReader(is);
    char[] c = new char[2048];
    int read;

    StringBuffer b = new StringBuffer();

    while ((read = isr.read(c)) > 0) {
        b.append(c, 0, read);
    }

    System.out.println(b.toString());
} 
```

**Maven JAR plugin definition:**

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <mainClass>net.noorg.test.Main</mainClass>
                <addClasspath>true</addClasspath>
            </manifest>
        </archive>
    </configuration>
</plugin> 
```

**Using OpenJDK 1.6:**

```
$ java -version
java version "1.6.0_18"
OpenJDK Runtime Environment (IcedTea6 1.8.7) (6b18-1.8.7-2~squeeze1)
OpenJDK Client VM (build 14.0-b16, mixed mode, sharing)
$ java -jar target/test-load-resource-1.0-SNAPSHOT.jar
Manifest-Version: 1.0
Created-By: 1.6.0_18 (Sun Microsystems Inc.) 
```

**Using Sun JDK 1.6:**

```
$ java -version
java version "1.6.0_29"
Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
Java HotSpot(TM) Client VM (build 20.4-b02, mixed mode, sharing)
$ java -jar target/test-load-resource-1.0-SNAPSHOT.jar
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: ABC
Build-Jdk: 1.7.0_07
Main-Class: net.noorg.test.Main 
```

*   Who's wrong - OpenJDK or I?
*   Whats the reason for this?
*   Is this only related to the Manifest or would this affect all resources?

* * *

# Edit 1:

*   Both execution use the same .jar
*   Maven is running on Oracle JDK 1.7
*   I'm running a system with two JDKs installed "defining" them trough `JAvA_HOME` and `PATH`
*   I'm running the .jar on one machine using different `JAVA_HOME`'s set and `PATH`s set to `java` in two different consoles.

## In addition to the above outputs

**Open JDK (alternative JAVA_HOME/PATH not set):**

```
$ echo "$JAVA_HOME" ; which java

/usr/bin/java 
```

**Sun JDK set:**

```
$ echo "$JAVA_HOME" ; which java
/usr/local/jdk
/usr/local/jdk/bin/java 
```

* * *

# Edit 2:

If the `JAVA_HOME` is properly defined for the OpenJDK (by default) it's the same.

```
$ echo "$JAVA_HOME" ; which java
/usr/java
/usr/bin/java 
```

So it's not related to the empty `JAVA_HOME` on my account.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:31:13.163

我没有使用过 openJDK 6，也许答案为时已晚，但是我遇到了同样的问题，但使用的是 JDK 1.7.0.2。我看到你正在使用 Maven

```
<plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>        
                <configuration>
                  <archive>
                    <manifest>
                       <mainClass>net.noorg.test.Main</mainClass>
                       <addClasspath>true</addClasspath>
                      <classpathPrefix>classes/META-INF/lib</classpathPrefix>              
                    </manifest>
                  </archive>
                </configuration>
            </plugin> 
```

这就是我可以让它运行的方式，我强烈建议您不要使用 openJDK6，我认为随着 JDK 7 的到来，您可以做很多事情并且没有错误风险和更好的安全性能。

# java - iBatis 参数——MaximumCheckoutTime

> ID：14298756
> 
> 赞同：2
> 
> 时间：2013-01-12T22:44:49.770
> 
> 标签：java, config, ibatis

有人对 iBatis sqlMapConfig.xml 文件中的这个配置参数有任何想法吗？

`MaximumCheckoutTime`

```
 <property name="Pool.MaximumCheckoutTime" value="150000"/> 
```

我想我很难找到这方面的信息。我想知道我可以使用的所有参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:52:17.580

ibatis 文档有这样的描述：

```
the maximum time a connection can be used before it *may* be given away again. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:39:24.197

当您从池中请求连接并且没有非活动连接时，ibatis 检查活动时间超过`Pool.MaximumCheckoutTime`. 如果存在这样的连接，它将获取它，将其回滚，在其位置创建一个新连接并将其返回给您。如果没有超过 的活动连接，则`Pool.MaximumCheckoutTime`池将等待。

# asp.net - 在母版页中使用 ASP.NET 内联表达式

> ID：14298758
> 
> 赞同：2
> 
> 时间：2013-01-12T22:44:52.213
> 
> 标签：asp.net, server-tags

> **可能重复：**
> [内联标记未在 asp.net 母版页中执行](https://stackoverflow.com/questions/8439685/inline-tag-not-executing-in-an-asp-net-master-page)

我的母版页中有以下几行：

```
<script type="text/javascript" src="/Scripts/TimeClock/Themes/<%= ThemeName %>/jquery-ui-1.9.2.custom.min.js"></script>

<link href="/Styles/Themes/<%= ThemeName %>/jquery-ui-1.9.2.custom.css" rel="stylesheet" type="text/css" /> 
```

一切都编译得很好，但是当我运行我的 web 应用程序时，我的 css 文件没有加载。原因是当我在渲染页面上查看源代码时，会出现以下内容：

```
<script type="text/javascript" src="/Scripts/TimeClock/Themes/Smoothness/jquery-ui-1.9.2.custom.min.js"></script>

<link href="/Styles/Themes/&lt;%= ThemeName %>/jquery-ui-1.9.2.custom.css" rel="stylesheet" type="text/css" /> 
```

所以看来我的 ASP.NET 服务器标记适用于脚本行，但不适用于 CSS 行。有谁知道我做错了什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:36:49.777

当您将其放置在标头中并且标头包含在服务器上运行时，您不能在没有标头过滤器的外通的情况下使用它，这也会更改您遇到问题的那部分。

绕过它使用文字控件并在后面的代码上完全呈现它，例如：

```
<asp:Literal runat="server" id="txtScriptOnheader" EnableViewState="false" /> 
```

和后面的代码：

```
txtScriptOnheader.Text = "<link href=\"/Styles/Themes/\""  + ThemeName + "/jquery-ui-1.9.2.custom.css\" rel="stylesheet\" type=\"text/css\" />"; 
```

# apache - 有多个 mod 重写规则来满足不同的 url

> ID：14298770
> 
> 赞同：0
> 
> 时间：2013-01-12T22:46:37.393
> 
> 标签：apache, .htaccess, mod-rewrite

我正在使用 mod 重写，我是新手。我写了以下规则：

```
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)/? index.php?company=$1&action=$2&type=$3&id=$4           [L,QSA] 
```

我已经测试过并且它可以工作但是它不允许我显示图像，例如

```
<img src="http://example.com/images/logo.gif"> 
```

因为它一直遵循重写规则并表明该页面不存在

如何将排除项添加到某个目录，以便我可以将其用作 image/js/css 目录等。

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:56:28.763

你最好简单地排除与文件匹配的请求：

```
RewriteCond %{REQUEST_FILENAME} !-f # not if the request matches a real file
RewriteRule ^([^/]+)/... 
```

# javascript - get width using width( ) on generated content

> ID：14298777
> 
> 赞同：2
> 
> 时间：2013-01-12T22:47:41.053
> 
> 标签：javascript, jquery, html

jQuery method `.width()` was used to get the width of the generated element as:

```
html: 
<div class='row-fluid' id='photo-preview'></div>
javascript:
 for(i = 0;i < 4;i++){
    var imageSpan = "<div class='span3' id='span_" + i + "'><img src='" + images[i] +"'></div>"
    $('#photo-preview').append(imageSpan);
    var w = $('#span_' + i).width(); 
    console.log(w);
  } 
```

But it got the incorrect value of width. It was the value of percentage instead of pixel. E.g, `w` should be 400 (400px) but the js got 80 (80%).

I thought the problem may be because the element was dynamically generated. In the console I can got the right value with `.width()` when all the elements were loaded.

Any ideas to work around with it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T23:14:30.813

您必须等待图像的加载事件才能获得正确的高度。

```
var img = '<img src="img_path.jpg">';
$(img)
    .load(function() {
        console.log("width", $(this).width());
    })
    .appendTo('#photo-preview'); 
```

编辑：与您的示例相匹配：

```
html: 
<div class='row-fluid' id='photo-preview'></div>
javascript:
 for(i = 0;i < 4;i++){
    var img = "<img src='" + images[i] +"'>";
    $(img)
        .load(function() {
            console.log("width", $(this).width());
        })
        .appendTo("<div class='row-fluid' id='photo-preview'>")
        .appendTo('#photo-preview');

  } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-12T23:06:38.830

尝试使用[offsetWidth](https://developer.mozilla.org/en-US/docs/DOM/element.offsetWidth)

IE

```
var w =  $('#span_' + i).offsetWidth;
console.log(w); 
```

这是我做的一个非常愚蠢的小提琴。我将宽度设置为 80%。如果你去控制台，你应该看到像素宽度（448 px）

[http://jsfiddle.net/bwm5s/](http://jsfiddle.net/bwm5s/)

# iphone - viewDidLoad 期间的状态栏高度

> ID：14298779
> 
> 赞同：0
> 
> 时间：2013-01-12T22:47:50.753
> 
> 标签：iphone, objective-c, ipad, statusbar

我一直在使用下面的方法来获取状态栏高度。但是我需要在视图加载时获取高度，以便我可以相应地调整我的 tableview 的高度。在 viewDidLoad 中使用此方法返回 0。

我尝试在 viewDidAppear 中使用它，但是当我从子视图（作为导航控制器的一部分）返回视图时，每次返回视图时，它都会获取高度并再次调整它。

那么如何在视图加载时获得高度以应用此调整而不会遇到这些问题？

```
-(CGRect)statusBarFrameViewRect
{
    CGRect statusBarFrame = [[UIApplication sharedApplication] statusBarFrame];

    CGRect statusBarWindowRect = [self.view.window convertRect:statusBarFrame fromWindow: nil];

    CGRect statusBarViewRect = [self.view convertRect:statusBarWindowRect fromView: nil];

    return statusBarViewRect;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:27:59.250

我能够获得状态栏和导航栏的高度`-viewDidLoad`。如果您在加载此新视图时还转换进/出状态栏，您可能需要注册`UIApplicationWillChangeStatusBarFrameNotification`. 我什至可以得到状态栏框架`-[appDelegate application:didFinishLaunchingWithOptions:]`

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    CGRect statusBarFrame = [[UIApplication sharedApplication] statusBarFrame];
    // (CGRect) $1 = origin=(x=0, y=0) size=(width=320, height=20)
    CGRect navBarFrame = self.navigationController.navigationBar.frame;
    // (CGRect) $2 = origin=(x=0, y=20) size=(width=320, height=44)
} 
```

顺便说一句，我希望个别视图不必特别关心状态栏，所以这让我认为您可能正在使用状态栏作为覆盖。如果是这种情况（Photos.app 会这样做），请考虑调整`contentInset`而不是`height`.

# ruby-on-rails - 需要明确的步骤将 Git 应用程序拉入 Heroku

> ID：14298780
> 
> 赞同：0
> 
> 时间：2013-01-12T22:48:13.073
> 
> 标签：ruby-on-rails, git, heroku

我是 Git/Heroku 新手，并且在 Heroku 文档中的步骤上遇到了问题 - 我无法弄清楚这一关键步骤（即使在查看 StackOverflow 中的相关帖子后，大多数人都认为工作流程已经到位）。

在本地开发中，“myapp”正确连接到 Git 存储库“myapp”。我可以推送和拉取提交，也可以在 GitHub 站点的“myapp”存储库中查看它们。

在 Heroku 中，我创建了应用程序“put-myapp-here-dangit”，并在设置“GitHub Repo”下输入了“(myusername)/myapp”。

Heroku Toolbelt 和 GitHub 命令行工具安装在本地。在终端中，`git remote -v`显示两个存储库：

```
heroku  git@heroku.com:put-my-app-here-dangit.git (fetch)
heroku  git@heroku.com:put-my-app-here-dangit.git (push)
origin  https://github.com/myusername/myapp.git (fetch)
origin  https://github.com/myusername/myapp.git (push) 
```

这就是我卡住的地方，没有任何文档说明如何将“myapp”文件从 GitHub 获取到 Heroku。我害怕盲目地继续尝试命令，因为我知道如果我使用错误的命令，我会弄得一团糟。

[Heroku "put-my-app-here-dangit"] -->**帮助？？？**<-- [Git "myapp"] --><-- [本地 "myapp"]

任何人都可以概述所需的实际步骤，包括我可能不知道的事情（例如，如果我需要在我的本地“myapp”文件夹中打开终端，或者在哪里 - Git 或 Heroku - 我需要将我的其他帐户添加为协作者） ? 我要扯掉我的头发了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:56:43.833

我从来没有尝试过从 GitHub 到 Heroku，而是从你的本地机器到 Heroku。从 github 将最新版本拉到您的本地计算机（如果您还没有），然后按照以下步骤操作：

*   `$ heroku login`
*   本地 cd 进入您的应用程序，`$ cd myapp`
*   `$ git push heroku master`

另请注意，您需要在 heroku 上使用 postgresql，因此您的 gemfile 应如下所示：

```
group :production do
 gem 'pg'
end

group :development, :test do
  gem 'mysql2' # or whichever db you are using
end 
```

上面列出的步骤来自 herokus 官方关于[如何开始的](https://devcenter.heroku.com/articles/rails3)部分。

您是否使用相同的指南？如果是这样，您究竟在哪里遇到问题？

# three.js - three.js - principle of camera collision

> ID：14298783
> 
> 赞同：0
> 
> 时间：2013-01-12T22:48:19.220
> 
> 标签：three.js, collision-detection, raytracing, intersect

As I understood the only method to compute collisions with three.js is `intersectObjects` with a ray ...

I created an object that includes the basic elements of the collision : ground, walls, objects, stairs. with the firstpersoncontrols. I went with the idea that I should calculate the steering vector based on the direction in which the camera is currently traveling but it does not really work and I do not see where the error is.

I expected that the camera can not pass through ground, walls and objects with which she finds herself in a collision.

You can see the code [here](http://www.macabann.com/THREEJS03/scloaderobj.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:27:08.450

three.js 没有自动碰撞检测。

您现在实现光线投射`Raycaster`，而不是`Ray`：

```
Raycaster.intersectObjects( objects, recursive ); 
```

您还必须自己控制相机的高度。

三.js r.54

# javascript - Load Events in FullCalendar using Asp.Net mvc4

> ID：14298785
> 
> 赞同：1
> 
> 时间：2013-01-12T22:48:47.447
> 
> 标签：javascript, asp.net-mvc-4, fullcalendar

I'm trying to load data into an [FullCalendar](http://arshaw.com/fullcalendar/docs/), using Json. But i can't load the data: The controller:

```
ppublic ActionResult GetEvents()
    {
        List<Models.Events> events = new List<Models.Events>()
    {     
        new Models.Events("Fremvising","2013-01-11T14:08:00Z", "2013-01-11T16:09:00Z", false),
        new Models.Events("Fremvising","2013-01-12T15:09:00Z", "2013-01-11T17:10:00Z", false),
        new Models.Events("Fremvising","2013-01-13T16:10:00Z", "2013-01-11T18:11:00Z", false),
        new Models.Events("Fremvising","2013-01-14T17:11:00Z", "2013-01-11T19:12:00Z", false),
        new Models.Events("Fremvising","2013-01-15T18:12:00Z", "2013-01-11T20:13:00Z", false),                                   
        new Models.Events("Fremvising","2013-01-16T19:13:00Z", "2013-01-11T21:14:00Z", false)

    };
        return Json(events, JsonRequestBehavior.AllowGet);
    } 
```

And the javascript:

```
$(document).ready(function () {

    /* initialize the external events
    -----------------------------------------------------------------*/

    $('#external-events div.external-event').each(function () {

        // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
        // it doesn't need to have a start or end
        var eventObject = {
            title: $.trim($(this).text()) // use the element's text as the event title
        };

        // store the Event Object in the DOM element so we can get to it later
        $(this).data('eventObject', eventObject);

        // make the event draggable using jQuery UI
        $(this).draggable({
            zIndex: 999,
            revert: true,      // will cause the event to go back to its
            revertDuration: 0  //  original position after the drag
        });

    });

    /* initialize the calendar
    -----------------------------------------------------------------*/

    $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'agendaWeek,agendaDay',
            height: 650,
            // url:,
        }, events: [
            $.getJSON("@Url.Action("GetEvents")", function (locationsArray) {
                $.each(locationsArray, function (index, location) {

                    title  : location.title;
                    start: location.start;
                    end: location.end;
                    allDay: location.editable; // will make the time show

                });
            })
             ],

        allDaySlot: false,
        //minTime: 10,
        //maxTime: 21,
        dayNames: ['Søndag', 'Mandag', 'Tirsdag', 'Onsdag',
       'Torsdag', 'Fredag', 'Lørdag'],
        dayNamesShort: ['Søn', 'Man', 'Tirs', 'Ons', 'Tors', 'Fre', 'Lør'],
        editable: true,
        defaultView: 'agendaWeek',
        droppable: true, // this allows things to be dropped onto the calendar !!!
        drop: function (date, allDay) { // this function is called when something is dropped

            // retrieve the dropped element's stored Event Object
            var originalEventObject = $(this).data('eventObject');

            // we need to copy it, so that multiple events don't have a reference to the same object
            var copiedEventObject = $.extend({}, originalEventObject);

            // assign it the date that was reported
            copiedEventObject.start = date;
            copiedEventObject.allDay = allDay;

            // render the event on the calendar
            // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
            $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);

            // is the "remove after drop" checkbox checked?
            if ($('#drop-remove').is(':checked')) {
                // if so, remove the element from the "Draggable Events" list
                $(this).remove();
            }

        }
    });
});
$('#tabs').tabs({
    show: function (event, ui) {
        $('#calendar').fullCalendar('render');
    }
}); 
```

For some reason it doesnt get the json result. The Json request

```
0: {title:Fremvising, start:2013-01-11T14:08:00Z, end:2013-01-11T16:09:00Z, editable:false}
1: {title:Fremvising, start:2013-01-12T15:09:00Z, end:2013-01-11T17:10:00Z, editable:false}
2: {title:Fremvising, start:2013-01-13T16:10:00Z, end:2013-01-11T18:11:00Z, editable:false}
3: {title:Fremvising, start:2013-01-14T17:11:00Z, end:2013-01-11T19:12:00Z, editable:false}
4: {title:Fremvising, start:2013-01-15T18:12:00Z, end:2013-01-11T20:13:00Z, editable:false}
5: {title:Fremvising, start:2013-01-16T19:13:00Z, end:2013-01-11T21:14:00Z, editable:false} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T08:36:51.573

您错误地定义了`events`FullCalendar 的属性。您已将其分配给 javascript 数组，但这是不正确的，因为您的数据来自服务器。您应该将其设置为匿名函数。此外，您似乎正在触发对服务器的 AJAX 请求，但在成功回调中，除了循环遍历它们之外，您对结果完全没有做任何事情，但您从未将它们传递给 FullCalendar。这是定义 events 属性的正确方法：

```
events: function (start, end, callback) {
    $.getJSON("@Url.Action("GetEvents")", function (locationsArray) {
        var result = $(locationsArray).map(function () {
            return {
                title: this.title,
                start: this.start,
                end: this.end,
                allDay: this.editable
            };
        }).toArray();
        callback(result);
    });
}, 
```

请注意我们如何对来自服务器的结果执行转换（如果您使用了视图模型，这当然不是必需的），然后我们`callback`使用这个转换后的结果集调用属性。

好的，这是一个分步指南：

1.  使用 Internet 应用程序模板创建一个新的 ASP.NET MVC 4 应用程序
2.  将 HomeController 修改为如下所示：

    ```
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View();
        }

        public ActionResult GetEvents()
        {
            var events = new[]
            {     
                new { title = "Fremvising", start = "2013-01-11T14:08:00Z", end = "2013-01-11T16:09:00Z", editable = false },
                new { title = "Fremvising", start = "2013-01-12T15:09:00Z", end = "2013-01-11T17:10:00Z", editable = false },
                new { title = "Fremvising", start = "2013-01-13T16:10:00Z", end = "2013-01-11T18:11:00Z", editable = false },
                new { title = "Fremvising", start = "2013-01-14T17:11:00Z", end = "2013-01-11T19:12:00Z", editable = false },
                new { title = "Fremvising", start = "2013-01-15T18:12:00Z", end = "2013-01-11T20:13:00Z", editable = false },                                   
                new { title = "Fremvising", start = "2013-01-16T19:13:00Z", end = "2013-01-11T21:14:00Z", editable = false }
            };
            return Json(events, JsonRequestBehavior.AllowGet);
        }
    } 
    ```

3.  下载[FullCalendar](http://arshaw.com/fullcalendar/download/)并将其放入`Scripts`文件夹

4.  修改`~/Views/Shared/_Layout.cshtml`为如下所示：

    ```
    <!DOCTYPE html>
    <html lang="en">
        <head>
            <meta charset="utf-8" />
            <title>@ViewBag.Title - My ASP.NET MVC Application</title>
            @RenderSection("styles", required: false)
        </head>
        <body>
            @RenderBody()
            @Scripts.Render("~/bundles/jquery")
            @RenderSection("scripts", required: false)
        </body>
    </html> 
    ```

5.  就像这样`~/Views/Home/Index.cshtml`：

    ```
    <div id="calendar"></div>

    @section styles {
        <link href="~/scripts/fullcalendar-1.5.4/fullcalendar/fullcalendar.css" rel="stylesheet" />
    }

    @section scripts {
        <script type="text/javascript" src="~/scripts/fullcalendar-1.5.4/fullcalendar/fullcalendar.js"></script>
        <script type="text/javascript">
            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'agendaWeek,agendaDay',
                    height: 650,
                }, 
                events: function (start, end, callback) {
                    $.getJSON("@Url.Action("GetEvents")", function (locationsArray) {
                        var result = $(locationsArray).map(function () {
                            return {
                                title: this.title,
                                start: this.start,
                                end: this.end,
                                allDay: this.editable
                            };
                        }).toArray();
                        callback(result);
                    });
                },

                allDaySlot: false,
                dayNames: ['Søndag', 'Mandag', 'Tirsdag', 'Onsdag', 'Torsdag', 'Fredag', 'Lørdag'],
                dayNamesShort: ['Søn', 'Man', 'Tirs', 'Ons', 'Tors', 'Fre', 'Lør'],
                editable: true,
                defaultView: 'agendaWeek',
                droppable: true,
                drop: function (date, allDay) { // this function is called when something is dropped

                    // retrieve the dropped element's stored Event Object
                    var originalEventObject = $(this).data('eventObject');

                    // we need to copy it, so that multiple events don't have a reference to the same object
                    var copiedEventObject = $.extend({}, originalEventObject);

                    // assign it the date that was reported
                    copiedEventObject.start = date;
                    copiedEventObject.allDay = allDay;

                    // render the event on the calendar
                    // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
                    $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);

                    // is the "remove after drop" checkbox checked?
                    if ($('#drop-remove').is(':checked')) {
                        // if so, remove the element from the "Draggable Events" list
                        $(this).remove();
                    }

                }
            });
        </script>
    } 
    ```

# character - 页面不会显示特殊字符

> ID：14298792
> 
> 赞同：0
> 
> 时间：2013-01-12T22:50:01.500
> 
> 标签：character, meta

所以我知道这是字符集之类的常见问题，但奇怪的是它适用于具有相同设置/模板的页面，但不适用于这个！

所以基本上，我的问题是页面不会显示像å和ø这样的挪威字符。

这是有问题的页面：[http](http://suldal.underbakke.net/register.php) ://suldal.underbakke.net/register.php ，这是一个具有相同模板但工作的页面： http: [//suldal.underbakke.net/](http://suldal.underbakke.net/)

（在第二个中，它是第 4 个帖子中的“å”，在名称中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T04:55:31.397

该页面被声明为 UTF-8 编码，但实际上它是 windows-1252（或 iso-8859-1）编码的。您可以通过在浏览器中查看页面时手动选择编码来看到这一点；浏览器通常有一个查看菜单，您可以在其中选择编码。

因此，作为一个快速修复，您可以在标签中更改`utf-8`为。`windows-1252``meta`

作为一种不同的解决方法，您可以将“特殊字符”（斯堪的纳维亚字母）替换为[HTML 实体](http://www.cs.tut.fi/~jkorpela/html/guide/entities.html)，例如将“ø”替换为`&oslash;`. 根据创作软件的不同，您可能需要做一些特殊的事情来实现这一点（例如，进入“HTML 模式”），因为创作工具可能会自动转换“&” 到`&amp;`.

作为最佳解决方案，请了解如何在您正在使用的创作程序中以 UTF-8 编码保存文件，并保持`meta`标签不变。这通常是程序常规设置中的一个选项，或者您可以在“另存为”命令中做出的选择。

# objective-c - 是否有与 C# 的“var”关键字等效的 Objective-C？

> ID：14298793
> 
> 赞同：15
> 
> 时间：2013-01-12T22:50:07.823
> 
> 标签：objective-c, var, type-inference

强烈支持在 C# 中使用 'var' 关键字来处理非常清楚的情况。例如，而不是这个...

```
ThisIsMyReallyLongFooClassName foo = new ThisIsMyReallyLongFooClassName(); 
```

我可以输入这个...

```
var foo = new ThisIsMyReallyLongFooClassName(); 
```

...而且我仍然有一个强类型变量。就所有意图和目的而言，两者都是平等的。后者更具可读性（同样，因为它很清楚。在某些情况下它不是并且不应该使用 'var'。但是我不希望这成为对此的讨论。）

我想知道Objective-C是否有类似的东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-12T22:57:45.003

是和不是。

您可以使用`id foo = ...`which will always work，但您会丢失类型信息。

如果你真的想要等效的东西，你可以`auto foo = ...`从 C++11 开始使用，但是你必须将你的文件编译为 Objective-C++，这有很多其他的副作用。

约定只是说明您的类型；这很烦人，但不像 C++、C#、Java 中的模板/泛型可以使类型名变得很长，它通常在 Objective-C 中是可以管理的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T22:57:30.800

不，Objective C 中没有等价物。C++11 引入了`auto`关键字来做到这一点，但是 C 和 Objective C 都没有类似的能力。

`id`最接近 C# 的关键字`dynamic`。它可以让您获得与 类似的结果`var`，只是它不允许您使用属性语法访问属性。它确实允许您调用方法，包括实现属性访问器的方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-26T17:57:28.530

你可以这样做：

```
__typeof([obj someMethod]) foo = [obj someMethod]; 
```

这很难看，但是如果您定义了一个片段或宏来自动生成它，那么您不必输入类型名称。例如：

```
#define LET(V, EXPR) __typeof(EXPR) V = (EXPR)

LET(vc, self.viewController);  // equivalent to "UIViewController* vc = self.viewController;"
LET(d, [number doubleValue]);  // equivalent to "double d = [number doubleValue];"
LET(foo, [[Foo alloc] init]);  // equivalent to "Foo *foo = [[Foo alloc] init];" 
```

注意：我不*推荐*这种方法，因为 Objective-C 中的约定是写出完整的类型名称或 use `id`，而宏可能会很混乱。但了解`__typeof()`可能会很方便。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-09T00:55:39.970

现在有 __auto_type。例如...

```
__auto_type test = @"Hello World"; 
```

...导致测试的类型为 NSString*。

这是一篇不错的文章：

[https://medium.com/@maicki/type-in​​ference-with-auto-type-55a38ef56372](https://medium.com/@maicki/type-inference-with-auto-type-55a38ef56372)

作者建议使用

```
#define let __auto_type const
#define var __auto_type 
```

在您的应用程序的某些共享标头中，以使使用更清晰。我个人对这种宏的使用有点警惕，但我已经做了一段时间了，世界仍在转动……也许宏名称不太可能引起冲突会更好。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-12T22:58:55.253

Objective-C 中有`id`关键字，但注意它相当于`dynamic`C# 中的关键字，而不是`var`关键字。`var`是隐式类型 - 即类型是推断出来的，但它仍然是静态类型。`dynamic`并且`id`用于动态类型，并且您会丢失类型信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-12T22:57:00.217

恐怕在 Objective C 中不存在这样的等价物，它可以让你保留强类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-12T23:52:16.187

您可以在目标 C 中使用**id**关键字，但它不能用作 c#

在c#中

```
var stringVar = ... 
```

`stringVar`用作字符串变量，您可以通过执行访问字符串函数`stringVar.function`

```
id stringVar = [NSString ...] 
```

但它仍然可以作为正常的 id 类型使用。

# javascript - JQuery Clock / Timer since the page was loaded (even if user changes time on his computer)

> ID：14298803
> 
> 赞同：1
> 
> 时间：2013-01-12T22:51:10.343
> 
> 标签：javascript, jquery, math, time, timer

I've modified the code from [SO, provided by SLaks](https://stackoverflow.com/questions/2604450/how-to-create-a-jquery-clock-timer) so make it work even if the user changes the time on his computer.

The time for `<div id="timer"></div>` still showing the real time since the page was loaded (even if the user changes the time on his computer).

When time changed, the alert appears (please see the code below). The problem is: once time is changed, the alert appears the infinite number of times every second (but only one time is expected). Why is this happening?

```
$(document).ready(function () {
    var start = new Date;
    var end = (new Date - start) / 1000;
    setInterval(function () {
        if (Math.abs(end - (new Date - start) / 1000 )>1) {
            start = new Date - end * 1000;
            alert(Math.abs(end - (new Date - start) / 1000 ));
        }
        end = (new Date - start) / 1000;

        $('#timer').text(end + " Seconds");
    }, 100);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:20:08.123

这实际上非常简单 - 脚本执行会暂停，直到消息框关闭。当您关闭它时，计时器已经延迟并且条件再次为真。您可以通过复制该`alert[...]`行自行测试：如果您关闭第一条消息的速度足够快，则第二条消息将显示低于 1 的内容。

只需`alert`用一些基于 HTML 的浮动窗口替换，一切都会好起来的。

# jquery - 从自定义类中的方法查看流程工作

> ID：14298813
> 
> 赞同：0
> 
> 时间：2013-01-12T22:52:34.040
> 
> 标签：jquery, ajax, django

警告：英语不好:)

我想在网页上显示来自自定义类 - 的 2+ 条消息`Exp(object)`，其中包含方法`do_this()`，它执行一些步骤 - 1 和 2。我想显示此步骤的结果，例如，步骤 1 返回字符串“创建对象。 ..' 和 2 步返回字符串 '等待更新'。这个步骤我可以分成 2 种方法 -`do_this_1()`例如`do_this_2()`。

```
if 'create' in request.POST:
    Exp().do_this() 
```

之前`request.POST`，页面已创建，所以我们可以使用 ajax，但我不知道如何在自定义类中执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:15:16.380

据我了解，您可以返回如下消息：

```
class Exp(object):
    def do_this(self):
        messages = {}
        messages['step1']=self.do_this1()
        messages['step2']=self.do_this2()
        return messages

if 'create' in request.POST:
    messages = Exp().do_this()
    messages_json = simplejson.dumps(messages)
    return http.HttpResponse(messages_json, mimetype="application/json") 
```

# ios - 在 AS3 中如何使用 iOS 摄像头？

> ID：14298814
> 
> 赞同：2
> 
> 时间：2013-01-12T22:52:34.940
> 
> 标签：ios, actionscript-3, air, camera

可以在 AS3 应用中使用 iOS 设备的摄像头吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T08:18:18.587

是的，这真的很简单，在 AS3 中有很多方法可以访问相机。

首先，与您在普通 AS3 应用程序中访问相机的方式相同：

```
var camera:Camera = Camera.getCamera();
var video=new Video();
video.attachCamera(camera);
this.addChild(video); 
```

这将在当前显示对象中显示相机。

您还可以使用 CameraRoll 类从相机胶卷中请求图像：

```
import flash.media.CameraRoll;
var cameraRoll:CameraRoll = new CameraRoll();

if(CameraRoll.supportsBrowseForImage) 
{
    cameraRoll.addEventListener(MediaEvent.SELECT, imageSelected); 
    cameraRoll.addEventListener(Event.CANCEL, browseCancelled); 
    cameraRoll.addEventListener(ErrorEvent.ERROR, mediaError); 

    // Ask the user to select an image
    cameraRoll.browseForImage(); 
} 
```

您可以使用本机“相机”应用程序拍照：

```
import flash.media.CameraUI;

var cameraUI:CameraUI = new CameraUI();

if (CameraUI.isSupported ) 
{
    cameraUI.addEventListener(MediaEvent.COMPLETE, imageSelected); 
    cameraUI.addEventListener(Event.CANCEL, browseCancelled); 
    cameraUI.addEventListener(ErrorEvent.ERROR, mediaError); 

    cameraUI.launch(MediaType.IMAGE); 
} 
```

希望这会为您指明正确的方向。

# google-maps - 谷歌地图静态图像api中路径的奇怪行为

> ID：14298816
> 
> 赞同：0
> 
> 时间：2013-01-12T22:52:48.877
> 
> 标签：google-maps, google-static-maps

我正在尝试从谷歌地图静态图像 API 获取远足小径的静态图像，但我看到了一些奇怪的行为。有时，它工作得很好，而其他时候，它要么根本不显示路径，要么以一种奇怪的方式渲染它。

这是一个没有按照我期望的方式显示的路径示例：[锯齿状路径](http://maps.googleapis.com/maps/api/staticmap?format=jpg-baseline&maptype=terrain&size=320x320&sensor=true&path=color:0xff0000ff|weight:2|34.680923%2C+-83.998035|34.682763%2C+-83.996703|34.684612%2C+-83.995759|34.685855%2C+-83.994969|34.687478%2C+-83.993794|34.689339%2C+-83.99301|34.691484%2C+-83.992649|34.693114%2C+-83.991636|34.695631%2C+-83.991983|34.697488%2C+-83.990639|34.698856%2C+-83.988732|34.700114%2C+-83.986356|34.701881%2C+-83.985913|34.703546%2C+-83.98486|34.705588%2C+-83.984205|34.707439%2C+-83.985204|34.709409%2C+-83.98474|34.710815%2C+-83.982891|34.713098%2C+-83.982932|34.715471%2C+-83.981058|34.715643%2C+-83.97896|34.716061%2C+-83.976655|34.718408%2C+-83.975622|34.718576%2C+-83.972885|34.720504%2C+-83.972258|34.722156%2C+-83.970446|34.723245%2C+-83.970965|34.724158%2C+-83.968403|34.725936%2C+-83.96585|34.727591%2C+-83.963934|34.729219%2C+-83.962787|34.730165%2C+-83.960224|34.730464%2C+-83.957465|34.731384%2C+-83.954936|34.733571%2C+-83.952937|34.735248%2C+-83.951872|34.736235%2C+-83.94911|34.738577%2C+-83.94717|34.740465%2C+-83.946156|34.741132%2C+-83.943978|34.743225%2C+-83.944512|34.745393%2C+-83.943994|34.742783%2C+-83.942916|34.742451%2C+-83.941822|34.741552%2C+-83.940703|34.740811%2C+-83.939462|34.74023%2C+-83.937804|34.738605%2C+-83.936371|34.736056%2C+-83.935923|34.734862%2C+-83.935931|34.736535%2C+-83.934433|34.737494%2C+-83.932963|34.738196%2C+-83.931812|34.737864%2C+-83.9307|34.735883%2C+-83.930629|34.735412%2C+-83.928034|34.736785%2C+-83.925242|34.737286%2C+-83.922985|34.735846%2C+-83.918937)

当我从这些相同的坐标构建 KML 时，一切都以我期望的方式显示。但是当它被发送到静态图像 API 时，事情就变得混乱了。

我一直在调整地图的中心和缩放，但没有明显的效果。为了适应 URL 字符限制，我不得不减少路径中的坐标数。我尝试调整路径中的点数，但我仍然得到一个奇怪的锯齿状路径，而不是我从 KML 文件中看到的路径。

我还尝试从上面的 URL 中删除坐标，直到找到罪魁祸首，但后来我遇到了另一个问题。试试这个图像：[没有任何积分](http://maps.googleapis.com/maps/api/staticmap?format=jpg-baseline&maptype=terrain&size=320x320&sensor=true&path=color:0xff0000ff|weight:2|34.680923%2C+-83.998035|34.682763%2C+-83.996703|34.684612%2C+-83.995759)。您会注意到此图像中根本没有显示路径。

有时，调用工作得很好（我没有得到我想要的粒度，因为我必须在 URL 长度限制内修剪坐标 - 但我可以忍受）。你可以在这里看到一个例子：[工作示例](http://maps.googleapis.com/maps/api/staticmap?format=jpg-baseline&maptype=terrain&size=320x320&sensor=true&path=color:0xff0000ff|weight:2|34.626652%2C+-84.193899|34.629684%2C+-84.19434|34.631468%2C+-84.195553|34.633093%2C+-84.19739|34.635905%2C+-84.197395|34.637501%2C+-84.196222|34.637501%2C+-84.193854|34.639412%2C+-84.191631|34.64167%2C+-84.191606|34.643992%2C+-84.191282|34.645961%2C+-84.191845|34.647872%2C+-84.193697|34.646316%2C+-84.195444|34.646251%2C+-84.197873|34.648163%2C+-84.1984|34.649761%2C+-84.199705|34.651425%2C+-84.197973|34.653587%2C+-84.197538|34.655079%2C+-84.195745|34.657014%2C+-84.194176|34.658733%2C+-84.191901|34.660031%2C+-84.188883|34.661205%2C+-84.186683|34.662482%2C+-84.184388|34.66491%2C+-84.183059|34.666487%2C+-84.180347|34.667123%2C+-84.177956|34.667153%2C+-84.175321|34.6669%2C+-84.170909|34.667442%2C+-84.168569|34.669018%2C+-84.166629|34.668041%2C+-84.164625|34.667405%2C+-84.161596|34.665142%2C+-84.160905|34.664324%2C+-84.158752|34.664424%2C+-84.155468|34.664134%2C+-84.15315|34.662828%2C+-84.151016|34.663743%2C+-84.148904|34.66393%2C+-84.145587|34.664754%2C+-84.143328|34.665523%2C+-84.141354|34.664869%2C+-84.13869|34.663699%2C+-84.137736|34.663788%2C+-84.136303|34.663375%2C+-84.133661|34.663318%2C+-84.13035|34.664131%2C+-84.128146|34.665082%2C+-84.125948|34.662933%2C+-84.124163|34.662144%2C+-84.121925|34.660893%2C+-84.119679|34.659184%2C+-84.11836|34.657782%2C+-84.115365|34.657209%2C+-84.112796|34.656309%2C+-84.110375|34.655958%2C+-84.107133|34.655336%2C+-84.105452|34.654028%2C+-84.102892)

这是怎么回事？我是否犯了一些我看不到的简单错误，或者这是谷歌的结果？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:30:15.587

我想到了。我没有正确转义 URL。我浏览 API 站点的速度太快了（在[此处](https://developers.google.com/maps/documentation/staticmaps/)找到），当我返回并再次查看指南时，我注意到了一些我第一次错过的东西。我正在使用python url转义函数，它没有转义需要转义的部分和转义不需要转义的东西。

这是工作路径的示例：

[http://maps.googleapis.com/maps/api/staticmap?format=jpg-baseline&maptype=terrain&size=320x320&sensor=true&path=color:0xff0000ff%7Cweight:2%7C34.680923,-83.998035%7C34.682763,-83.996703% 7C34.684612,-83.995759%7C34.685855,-83.994969%7C34.687478,-83.993794%7C34.689339,-83.99301%7C34.691484,-83.992649%7C34.693114,-83.991636%7C34.695631,-83.991983%7C34 .697488,-83.990639%7C34.698856,-83.988732%7C34.700114,-83.986356%7C34.701881,-83.985913%7C34.703546,-83.98486%7C34.705588,-83.984205%7C34.707439,-83.985204%7C34\. 709409，-83.98474％7C34.710815，-83.982891％7C34.713098，-83.982932％7C34.715471，-83.983.981058％7C34.715642,715643， -83.97896％717896％and-83.97896％and-83.97896％and-83.97896％ ，-83.97285％7C34.720504，-83.972258％7C34.722156，-83.970446％7c34.723245，-83.970965％ -83。962787%7C34.730165,-83.960224%7C34.730464,-83.957465%7C34.731384,-83.954936%7C34.733571,-83.952937%7C34.735248,-83.951872%7C34.736235,-83.94911%7C34.738577,-83.94717 %7C34.740465,-83.946156%7C34.741132,-83.943978%7C34.743225,-83.944512%7C34.745393,-83.943994%7C34.742783,-83.942916%7C34.742451,-83.941822%7C34.741552,-83.940703% 7C34.740811，-83.939462％7C34.74023，-83.937804％7C34.738605，-83.936371％7C34.736056，-83.935923％ .738196，-83.931812％7C34.737864，-83.9307％7C34.735883，-83.930629％7C34.735412，-83.928034％743225,-83.944512%7C34.745393,-83.943994%7C34.742783,-83.942916%7C34.742451,-83.941822%7C34.741552,-83.940703%7C34.740811,-83.939462%7C34.74023,-83.937804%7C34.738605 ，-83.936371％7C34.736056，-83.935923％7C34.734862，-83.935931％7C34.736535，-83.93444335％ -83.930629%7C34.735412,-83.928034%7C34.736785,-83.925242%7C34.737286,-83.922985%7C34.735846,-83.918937743225,-83.944512%7C34.745393,-83.943994%7C34.742783,-83.942916%7C34.742451,-83.941822%7C34.741552,-83.940703%7C34.740811,-83.939462%7C34.74023,-83.937804%7C34.738605 ，-83.936371％7C34.736056，-83.935923％7C34.734862，-83.935931％7C34.736535，-83.93444335％ -83.930629%7C34.735412,-83.928034%7C34.736785,-83.925242%7C34.737286,-83.922985%7C34.735846,-83.918937](http://maps.googleapis.com/maps/api/staticmap?format=jpg-baseline&maptype=terrain&size=320x320&sensor=true&path=color:0xff0000ff%7Cweight:2%7C34.680923,-83.998035%7C34.682763,-83.996703%7C34.684612,-83.995759%7C34.685855,-83.994969%7C34.687478,-83.993794%7C34.689339,-83.99301%7C34.691484,-83.992649%7C34.693114,-83.991636%7C34.695631,-83.991983%7C34.697488,-83.990639%7C34.698856,-83.988732%7C34.700114,-83.986356%7C34.701881,-83.985913%7C34.703546,-83.98486%7C34.705588,-83.984205%7C34.707439,-83.985204%7C34.709409,-83.98474%7C34.710815,-83.982891%7C34.713098,-83.982932%7C34.715471,-83.981058%7C34.715643,-83.97896%7C34.716061,-83.976655%7C34.718408,-83.975622%7C34.718576,-83.972885%7C34.720504,-83.972258%7C34.722156,-83.970446%7C34.723245,-83.970965%7C34.724158,-83.968403%7C34.725936,-83.96585%7C34.727591,-83.963934%7C34.729219,-83.962787%7C34.730165,-83.960224%7C34.730464,-83.957465%7C34.731384,-83.954936%7C34.733571,-83.952937%7C34.735248,-83.951872%7C34.736235,-83.94911%7C34.738577,-83.94717%7C34.740465,-83.946156%7C34.741132,-83.943978%7C34.743225,-83.944512%7C34.745393,-83.943994%7C34.742783,-83.942916%7C34.742451,-83.941822%7C34.741552,-83.940703%7C34.740811,-83.939462%7C34.74023,-83.937804%7C34.738605,-83.936371%7C34.736056,-83.935923%7C34.734862,-83.935931%7C34.736535,-83.934433%7C34.737494,-83.932963%7C34.738196,-83.931812%7C34.737864,-83.9307%7C34.735883,-83.930629%7C34.735412,-83.928034%7C34.736785,-83.925242%7C34.737286,-83.922985%7C34.735846,-83.918937)

# java - 从 ListView 问题拨打电话

> ID：14298818
> 
> 赞同：0
> 
> 时间：2013-01-12T22:53:01.370
> 
> 标签：java, android, listview

当我单击列表视图中的项目时，我试图拨打电话。我将方法中的给定 id 传递给 `onListItemClick`我的数据库类中的处理程序，该处理程序检索数字并将其设置在我的意图中。单击该项目时，它会崩溃。

有人可以指出如何在清单中编写意图操作的正确方向吗？

我的日志猫给出了如下所示的错误：

```
01-12 23:03:06.799: E/AndroidRuntime(276): FATAL EXCEPTION: main
01-12 23:03:06.799: E/AndroidRuntime(276): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.CALL dat=Contact No:01406 330611 }
01-12 23:03:06.799: E/AndroidRuntime(276):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
01-12 23:03:06.799: E/AndroidRuntime(276):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
01-12 23:03:06.799: E/AndroidRuntime(276):  at android.app.Activity.startActivityForResult(Activity.java:2817)
01-12 23:03:06.799: E/AndroidRuntime(276):  at android.app.Activity.startActivity(Activity.java:2923)
01-12 23:03:06.799: E/AndroidRuntime(276):  at com.example.flybase2.view.onListItemClick(view.java:50)
01-12 23:03:06.799: E/AndroidRuntime(276):  at android.app.ListActivity$2.onItemClick(ListActivity.java:321)
01-12 23:03:06.799: E/AndroidRuntime(276):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
01-12 23:03:06.799: E/AndroidRuntime(276):  at android.widget.ListView.performItemClick(ListView.java:3382)
01-12 23:03:06.799: E/AndroidRuntime(276):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
01-12 23:03:06.799: E/AndroidRuntime(276):  at android.os.Handler.handleCallback(Handler.java:587)
01-12 23:03:06.799: E/AndroidRuntime(276):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-12 23:03:06.799: E/AndroidRuntime(276):  at android.os.Looper.loop(Looper.java:123)
01-12 23:03:06.799: E/AndroidRuntime(276):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-12 23:03:06.799: E/AndroidRuntime(276):  at java.lang.reflect.Method.invokeNative(Native Method)
01-12 23:03:06.799: E/AndroidRuntime(276):  at java.lang.reflect.Method.invoke(Method.java:521)
01-12 23:03:06.799: E/AndroidRuntime(276):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-12 23:03:06.799: E/AndroidRuntime(276):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-12 23:03:06.799: E/AndroidRuntime(276):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我用来设置列表视图的视图类，以及最后的 onlick 方法来调用号码：

```
package com.example.flybase2;

import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.View;
import android.widget.ListView;

public class view extends ListActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contactlayout);

    DBHandler DBref = new DBHandler(this, null, null);

    ListView listContent = (ListView)findViewById(android.R.id.list);

    DBHandler data = new DBHandler(this, null, null);
    data.open();
    Cursor cursor = data.getData();
    startManagingCursor(cursor);

    @SuppressWarnings("static-access")
    String [] from = new String [] {DBref.KEY_NAME, DBref.KEY_TEL, DBref.KEY_EMAIL, DBref.KEY_COMMENTS};
    int [] to = new int [] {R.id.txtNameList, R.id.txtTelList, R.id.txtEmailList, R.id.txtCommentsList};

    @SuppressWarnings("deprecation")
    SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.setlistviewcontacts, cursor, from, to);

    listContent.setAdapter(cursorAdapter);

}

public void onListItemClick(ListView list, View v, int list_posistion, long item_id)
{
    long idToPass = item_id;
    DBHandler num = new DBHandler(this, null, null);

    String numReturned = num.getNum(idToPass);

    Intent makeCall = new Intent(Intent.ACTION_CALL, Uri.parse("Contact No:" + numReturned));
       startActivity(makeCall);  

}
} 
```

我的数据库处理程序类中使用的方法根据传递的 ID 检索存储在数据库中的数字：

```
public String getNum(long passId) {
        String [] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_TEL, KEY_EMAIL, KEY_COMMENTS};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + passId, null, null, null, null);
        if(c != null)
        {
            // move to the selected row
        c.moveToFirst();
        String num = c.getString(2);
        return num;

    }
        return null;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:55:11.943

[你又](https://stackoverflow.com/q/14269752/1267661)忘记打电话`open()`了。:)

```
DBHandler num = new DBHandler(this, null, null);
num.open(); 
```

* * *

如果您创建`data`一个字段变量，您可以从任何方法访问它，而无需创建新的 DBHandler。

# windows-8 - winrt中的图像mime类型

> ID：14298822
> 
> 赞同：0
> 
> 时间：2013-01-12T22:53:37.230
> 
> 标签：windows-8, winrt-xaml, windows-store-apps

我需要弄清楚我的程序从网上下载的图像是什么 mime 类型。我实际上找不到任何适用于 Windows 商店应用程序的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:12:51.933

It looks like you can use the ContentType property of StorageFile. See [http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.contenttype.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.contenttype.aspx) for more info.

# intellij-idea - IntelliJ IDEA 中的自动滚动

> ID：14298834
> 
> 赞同：2
> 
> 时间：2013-01-12T22:55:24.580
> 
> 标签：intellij-idea

我正在使用版本 12 社区版。有没有办法在设置中启用*“自动滚动”*功能或通过一些插件添加它？

来自 VS 的“autosroll”（不确定我是否正确调用）插件的图片：

![在此处输入图像描述](../Images/45b6a967ee29f23c5061612626952173.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:14:53.583

IntelliJ IDEA 中没有这样的功能，我不知道有任何插件可以做到这一点。

# r - 修复纪元之前的 split.xts 行为 (1-1-1970)

> ID：14298838
> 
> 赞同：4
> 
> 时间：2013-01-12T22:56:20.387
> 
> 标签：r, xts

在尝试拆分可以追溯到很长一段时间的对象时，我注意到一些奇怪的 xts 行为。分裂的行为在时代发生变化。

```
#Create some data
dates <- seq(as.Date("1960-01-01"),as.Date("1980-01-01"),"days")
x <- rnorm(length(dates))
data <- xts(x, order.by=dates) 
```

如果我们按周拆分 xts 对象，它将一周的最后一天定义为 1970 年之前的星期一。1970 年之后，它将其定义为星期日（预期行为）。

```
#Split the data, keep the last day of the week
lastdayofweek <- do.call(rbind, lapply(split(data, "weeks"), last))
head(lastdayofweek)
tail(lastdayofweek) 
```

[1960 年日历](http://www.timeanddate.com/calendar/?year=1960)

[1979 年日历](http://www.timeanddate.com/calendar/?year=1979)

这似乎只是几个星期的问题，而不是几个月或几年的问题。

```
#Split the data, keep the last day of the month
lastdayofmonth <- do.call(rbind, lapply(split(data, "months"), last))
head(lastdayofmonth)
tail(lastdayofmonth) 
```

该行为似乎与以下情况有关，但我不确定为什么它只适用于几周。来自[xts 起重机](http://cran.r-project.org/web/packages/xts/xts.pdf)。

> 对于纪元 (1970-01-01) 之前的日期，结束时间与 59.0000 秒对齐。这是由于在 C 源代码级别的 asPOSIXct 和 mktime0 的 R 实现中的错误/功能。这将 1970 年之前的范围精度限制为使用当前 xts 解决方法的 1 分钟粒度。

我的解决方法是在拆分 1970 年之前的数据对象之前更改日期，如果我在几周内拆分。我希望其他人有更优雅的解决方案（或避免错误的方法）。

编辑：为了清楚问题是什么，我正在寻找一个答案，a）指定为什么会发生这种情况（这样我可以更好地理解错误的性质，从而避免它）和/或 b）最好的解决方法来处理它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T15:49:47.293

一种“解决方法”是查看 Rev. 743 或更早版本，因为在我看来这在 Rev. 744 中出现了问题。

```
svn checkout svn://svn.r-forge.r-project.org/svnroot/xts/@743 
```

但是，一个**更好**的主意是提交错误报告，这样您就不必永远使用旧版本。（当然，其他错误可能已被修补和/或自 Rev. 743 以来添加了新功能）

# python - 方法对象 vs 函数对象，Python 类实例 vs 类

> ID：14298844
> 
> 赞同：23
> 
> 时间：2013-01-12T22:57:07.687
> 
> 标签：python, class, methods, instance

我正在尝试验证 2012 年 11 月 1 日 Python 教程 2.7.3 版第 9 章：类，第 66 页最后一行（[*来源*](https://docs.python.org/2/tutorial/classes.html#instance-objects)）中列出的实例属性和类属性之间的区别：

> 实例对象的有效方法名称取决于其类。根据定义，作为函数对象的类的所有属性都定义了其实例的相应方法。所以在我们的例子中，xf 是一个有效的方法引用，因为 MyClass.f 是一个函数，但 xi 不是，因为 MyClass.i 不是。**但是 xf 与 MyClass.f 不同——它是一个方法对象，而不是一个函数对象。**

我有这个：

```
class MyClass:    
   """A simple example class"""    
   i = 12345   
   def f():    
      return 'hello world' 
```

然后我这样做：

```
>>> x = MyClass()
>>> x.f
<bound method MyClass.f of <__main__.MyClass instance at 0x02BB8968>>
>>> MyClass.f
<unbound method MyClass.f>
>>> type(MyClass.f)
<type 'instancemethod'>
>>> type(x.f)
<type 'instancemethod'> 
```

注意两者的类型都是`x.f`instancemethod `MyClass.f`。类型没有区别，但教程另有说明。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-12T23:04:06.927

# *绑定*与非*绑定*方法 - 解释。

### ...或者为什么 Python 有你指出的行为。

所以，首先，请注意这在 3.x 中是不同的。在 3.x 中，您将`MyClass.f`成为一个函数，并`x.f`作为一种方法 - 正如预期的那样。这种行为本质上是一个糟糕的设计决策，后来被改变了。

原因是 Python 有一个不同于大多数语言的方法的概念，它本质上是一个函数，其中第一个参数预先填充为实例 ( `self`)。这种预填充使*方法绑定*。

```
>>> x.foo
<bound method MyClass.foo of <__main__.MyClass instance at 0x1004989e0>> 
```

在 Python 2.x 及之前的版本中，没有附加到实例的方法被认为是*未绑定的方法*，这是一个限制第一个参数 ( `self`) 必须是对象实例的函数。然后就可以将其绑定到实例并成为*绑定方法*。

```
>>> MyClass.foo
<unbound method MyClass.foo> 
```

随着时间的推移，很明显，未绑定的方法实际上只是一个具有这种奇怪限制的函数，这并不重要（`self`必须是*“正确”*类型），因此它们被从语言中删除（在 3.x 中）。这本质上是`self`适合语言的鸭式打字。

```
Python 3.3.0 (default, Dec  4 2012, 00:30:24) 
>>> x.foo
<bound method MyClass.foo of <__main__.MyClass object at 0x100858ed0>>
>>> MyClass.foo
<function MyClass.foo at 0x10084f9e0> 
```

### 进一步阅读。

这是一个（根据记忆浓缩）解释，可以从 Python 创造者 Guido van Rossum 在[他的“Python 历史”系列](http://python-history.blogspot.co.uk/2009/02/first-class-everything.html)中自己的口中完整阅读。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-12T23:01:12.620

教程确实错了；两者都`class.functionname`返回`instance.functionname`一个方法对象。

发生的事情是一个函数是一个[描述符](http://docs.python.org/2/reference/datamodel.html#descriptors)，并且它们的`__get__`方法被调用，返回一个方法。方法有一个`__func__`指向原始函数的属性：

```
>>> class Foo(object):
...     def bar(self):
...         pass
... 
>>> Foo.bar
<unbound method Foo.bar>
>>> Foo().bar
<bound method Foo.bar of <__main__.Foo object at 0x1090d6f10>>
>>> # accessing the original function
...
>>> Foo.bar.__func__
<function bar at 0x1090cc488>
>>> # turning a function back into a method
...
>>> Foo.bar.__func__.__get__(None, Foo)
<unbound method Foo.bar>
>>> Foo.bar.__func__.__get__(Foo(), Foo)
<bound method Foo.bar of <__main__.Foo object at 0x1090d6f90>> 
```

不过，这一切在 Python 3 中都发生了变化；那里`Foo.bar`返回函数本身，未绑定的方法不再存在：

```
$ python3.3
Python 3.3.0 (default, Sep 29 2012, 08:16:08) 
[GCC 4.2.1 Compatible Apple Clang 3.1 (tags/Apple/clang-318.0.58)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> class Foo:
...     def bar(self):
...         pass
... 
>>> Foo.bar
<function Foo.bar at 0x105512dd0>
>>> Foo.bar.__get__(None, Foo)
<function Foo.bar at 0x105512dd0>
>>> Foo.bar.__get__(Foo(), Foo)
<bound method Foo.bar of <__main__.Foo object at 0x10552fe10>> 
```

# sql - SQL中的排序函数

> ID：14298846
> 
> 赞同：1
> 
> 时间：2013-01-12T22:57:22.657
> 
> 标签：sql

我的任务是计算成员在当前访问日期访问图书馆的次数。我有**一个成员**的以下示例记录。例如，在 2000 年 10 月 1 日 (visit_id = 55353)，该成员第一次访问了该库，因此他在 2000 年 10 月 1 日之前的访问次数为 0。然后在 2000 年 12 月 15 日（visit_id = 12355），该成员再次访问了图书馆，现在他在 2012 年 12 月 15 日之前访问了 1 次。该成员于 2002 年 1 月 1 日再次访问了图书馆 (visit_id = 52524)，现在他在 2002 年 1 月 1 日之前访问了 2 次。现在继续到他最近一次访问之前 2009 年 12 月 12 日 (visit_id = 45254)该会员有 9 次访问图书馆。

```
Member_ID   Date_Visit  Visit_id
12345       2000-10-01  55353
12345       2000-12-15  12355
12345       2002-01-01  52524
12345       2002-01-02  62558
12345       2003-05-30  22287
12345       2003-08-12  82552
12345       2003-09-12  12563
12345       2005-11-25  78785
12345       2008-12-25  98212
12345       2009-12-12  45254 
```

我在下面有一个使用 rank 函数的脚本，但我在第一次访问和最后一次访问时被卡住了。请注意，这只是此演示的**一个成员**。实际数据包括**许多成员**。

```
SELECT
DATE_VISIT,
RANK() OVER (PARTITION BY MEMBER_ID ORDER BY DATE_VISIT) AS Rank
FROM RANKS

DATE_VISIT  Rank
2000-10-01  1
2000-12-15  2
2002-01-01  3
2002-01-02  4
2003-05-30  5
2003-08-12  6
2003-09-12  7
2005-11-25  8
2008-12-25  9
2009-12-12  10 
```

我希望我的输出是这样的：

```
DATE_VISIT  Rank
2000-10-01  0
2000-12-15  1
2002-01-01  2
2002-01-02  3
2003-05-30  4
2003-08-12  5
2003-09-12  6
2005-11-25  7
2008-12-25  8
2009-12-12  9 
```

有人可以帮忙看看吗？是否有其他功能、案例陈述或修改排名功能以使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:02:38.737

你试过只减去1吗？

```
SELECT
DATE_VISIT,
RANK() OVER (PARTITION BY MEMBER_ID ORDER BY DATE_VISIT) -1  AS Rank
FROM RANKS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:00:49.617

```
Select
  Date_Visit,
  Rank - 1
From (    
  Select
    Date_Visit,
    Rank() Over (Partition By Member_Id Order By Date_Visit) AS Rank
   From
     Ranks
  ) x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T23:00:49.920

您可以尝试以下操作，也可以为排名列使用不同的别名

```
SELECT DATE_VISIT, (Rnk - 1) NewRnk FROM (
SELECT
DATE_VISIT,
RANK() OVER (PARTITION BY MEMBER_ID ORDER BY DATE_VISIT) AS Rnk
FROM RANKS
) 
```

# php - PHP函数在第二个实例中失败

> ID：14298851
> 
> 赞同：0
> 
> 时间：2013-01-12T22:58:17.330
> 
> 标签：php, html, arrays, function

我有一个功能如下，它以分层（缩进）方式将选项输出到下拉表单中：

```
<?php
function printTerms($terms, $item, $parent = 0, $deep = 0, $selected=''){
    if(count($terms[$parent]) > 0){
        $indent = "";
        for($i = 0; $i < $deep; $i++){
            $indent .= "&nbsp;&nbsp;&nbsp;";
        }

        foreach($terms[$parent] as $key => $term){
            if(count($terms[$term->term_id]) > 0){
                if($deep == 0){
 //                 echo "<optgroup label='".$term->name."'></optgroup>";                     <- Makes top level parents optgroups. 
                    echo "<option class='toplevel' value='".$term->name."' ".$selected.">".$term->name."</option>";   //     <- Makes top level parents options
_________________________________________________________________________
                } else {
                    echo "<option class='child".$deep."' value='".$term->name."' ".$selected.">".$indent.$term->name."</option>";  // <- Outputs children that are also parents
                }

                printTerms($terms, $term->term_id, ($deep+1));

            } else {
                if ($item == '1x per person' && $term->slug == 'once'){ 
                    $selected = 'selected';
                }
                echo "<option class='solo' value='".$term->name."' ".$selected.">".$indent.$term->name."</option>";   // <- outputs bottom level children and solos.
            }
        }
    }
}
?> 
```

上面的函数与将表单放置在 HTML 中的代码结合使用时（我们称之为 CASE 1）：

```
<form>
       <div id="frequency" class="form">
            Frequency: <?php echo $item[2]; ?>
            <?php
             $terms = array();         
                foreach($frequencies as $key => $term){
                    $terms[$term->parent][$term->term_id] = $term;
                }
            ?>    
            <select name="frequencies">
                <option value="empty"></option>
                <?php printTerms($terms, $item[2]); ?>
            </select>
        </div>
</form> 
```

当与在 HTML 中放置多选表单的代码结合使用时，上述功能不起作用（案例 2）：

```
<form>
       <div id="regions" class="form">
            <?php
             $terms = array();              
                foreach($regions as $key => $term){
                    $terms[$term->parent][$term->term_id] = $term;
                }
            ?>    
            <select name="regions">
    <!--        <option value="empty"></option>         -->
                <?php printTerms($terms, $item[6]); ?>
            </select>
        </div>
</form> 
```

$frequencies 是一个对象数组，包含：

```
Array ( [0] => stdClass Object ( [term_id] => 435 [name] => Twice [slug] => twice [term_group] => 0 [term_taxonomy_id] => 435 [taxonomy] => frequency [description] => Twice the fun. [parent] => 0 [count] => 89 ) [1] => stdClass Object ( [term_id] => 449 [name] => Thrice [slug] => thrice [term_group] => 0 [term_taxonomy_id] => 449 [taxonomy] => frequency [description] => Thrice rhymes with mice. [parent] => 0 [count] => 3 ) [2] => stdClass Object ( [term_id] => 458 [name] => Once [slug] => once [term_group] => 0 [term_taxonomy_id] => 460 [taxonomy] => frequency [description] => Once a day keeps doctor away. [parent] => 0 [count] => 4 ) ) 
```

$regions 是一个对象数组，包含：

```
Array ( [0] => stdClass Object ( [term_id] => 436 [name] => Canada [slug] => canada [term_group] => 0 [term_taxonomy_id] => 436 [taxonomy] => regions [parent] => 548 [count] => 33 ) [1] => stdClass Object ( [term_id] => 439 [name] => United States of America [slug] => united-states-of-america [term_group] => 0 [term_taxonomy_id] => 439 [taxonomy] => regions [parent] => 548 [count] => 59 ) [2] => stdClass Object ( [term_id] => 452 [name] => Quebec [slug] => quebec [term_group] => 0 [term_taxonomy_id] => 452 [taxonomy] => regions [parent] => 436 [count] => 4 ) [3] => stdClass Object ( [term_id] => 28 [name] => Ontario [slug] => ontario [term_group] => 0 [term_taxonomy_id] => 453 [taxonomy] => regions [parent] => 436 [count] => 2 ) [4] => stdClass Object ( [term_id] => 453 [name] => New Brunswick [slug] => new-brunswick [term_group] => 0 [term_taxonomy_id] => 454 [taxonomy] => regions [parent] => 436 [count] => 3 ) [5] => stdClass Object ( [term_id] => 454 [name] => Nova Scotia [slug] => nova-scotia [term_group] => 0 [term_taxonomy_id] => 455 [taxonomy] => regions [parent] => 436 [count] => 3 ) [6] => stdClass Object ( [term_id] => 455 [name] => Prince Edward Island [slug] => prince-edward-island [term_group] => 0 [term_taxonomy_id] => 456 [taxonomy] => regions [parent] => 436 [count] => 3 ) [7] => stdClass Object ( [term_id] => 456 [name] => Newfoundland [slug] => newfoundland [term_group] => 0 [term_taxonomy_id] => 457 [taxonomy] => regions [parent] => 436 [count] => 3 ) [8] => stdClass Object ( [term_id] => 464 [name] => Alberta [slug] => alberta [term_group] => 0 [term_taxonomy_id] => 466 [taxonomy] => regions [parent] => 436 [count] => 1 ) [9] => stdClass Object ( [term_id] => 465 [name] => Saskatchewan [slug] => saskatchewan [term_group] => 0 [term_taxonomy_id] => 467 [taxonomy] => regions [parent] => 436 [count] => 1 ) [10] => stdClass Object ( [term_id] => 466 [name] => Manitoba [slug] => manitoba [term_group] => 0 [term_taxonomy_id] => 468 [taxonomy] => regions [parent] => 436 [count] => 1 ) [11] => stdClass Object ( [term_id] => 467 [name] => British Columbia [slug] => british-columbia [term_group] => 0 [term_taxonomy_id] => 469 [taxonomy] => regions [parent] => 436 [count] => 1 ) [12] => stdClass Object ( [term_id] => 468 [name] => Yukon [slug] => yukon [term_group] => 0 [term_taxonomy_id] => 470 [taxonomy] => regions [parent] => 436 [count] => 1 ) [13] => stdClass Object ( [term_id] => 469 [name] => Northwest Territories [slug] => northwest-territories [term_group] => 0 [term_taxonomy_id] => 471 [taxonomy] => regions [parent] => 436 [count] => 1 ) [14] => stdClass Object ( [term_id] => 470 [name] => Nunavut [slug] => nunavut [term_group] => 0 [term_taxonomy_id] => 472 [taxonomy] => regions [parent] => 436 [count] => 1 ) [15] => stdClass Object ( [term_id] => 548 [name] => World Wide [slug] => world-wide [term_group] => 0 [term_taxonomy_id] => 551 [taxonomy] => regions [parent] => 0 [count] => 20 ) ) 
```

那么有什么不同呢？在案例 1 中，我们有一个简单的下拉菜单，调用 printTerms($terms, $item[2]) - WORKS：输出所有父母及其子女的缩进。

在案例 2 中，我们有一个简单的下拉菜单，调用 printTerms($terms, $item[6]) - 不起作用：仅输出顶级父级，忽略所有子级。

这是 $item[6] 与 $item[2] 相比所包含的内容：

```
$item[2] contains '1x per rotation'
$item[6] contains 'Enter only if U.S. 18+' 
```

除了上述之外，CASE 1 和 CASE 2 都是相同的，那么我该如何解决我的问题呢？

更新：在我的函数代码中插入虚线以证明行以上的所有内容在 CASE 2 中都有效，但行以下没有任何内容。对于 CASE 1，该行上方和下方的所有内容都按预期工作。

更新 x2：与 CASE 2 一起使用时的函数似乎没有循环。但是，如果我从所有函数的代码中完全删除 $item，它就可以正常工作。关于 $item 的一些事情正在阻止我的函数循环。问题是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:48:01.943

修复很简单：

```
<?php printTerms($terms, 0, 0, 0, $item[2]); ?> 
```

# mysql - 如何根据一个 MySQL 查询中的其他两列为每一行设置一个数字？

> ID：14298852
> 
> 赞同：2
> 
> 时间：2013-01-12T22:58:38.920
> 
> 标签：mysql

假设我有一个名为*members*的表，其结构如下：

```
member_id, col1, col2, number 
```

现在，如果我运行这个查询：

```
SELECT @rownum:=@rownum+1 number, member_id 
FROM members, (SELECT @rownum:=0) r ORDER BY col1 DESC, col2 DESC 
```

我得到每一行的数字。是否可以将此编号分配给每一行的列*号？*

例如，如果表包含以下数据：

```
1 1000 1.2 0
2 8700 1.1 0
3 1000 1.1 0 
```

第一行*编号*列应设置为 2，第二行设置为 1，第三行设置为 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:03:38.393

您可以使用临时表来存储值并`UPDATE`通过连接从中获取值。

```
/* Store query result in a temporary table */
CREATE TEMPORARY TABLE ranks AS
  SELECT @rownum:=@rownum+1 number, member_id FROM members, (SELECT @rownum:=0) r ORDER BY col1 DESC, col2 DESC;

/* And join against it to update your members.number column */
UPDATE 
  members
  JOIN ranks ON members.member_id = ranks.member_id
SET members.number = ranks.number;

DROP TABLE ranks; 
```

实际上，通过我刚才的测试，我能够在没有临时表的情况下做到这一点。我不认为 MySQL 会允许从子查询更新同一个表，但显然它允许与相关子查询一起使用。

```
UPDATE 
  members 
  /* JOIN against a subquery which returns the rank values */
  JOIN ( 
   SELECT @rownum:=@rownum+1 number, member_id 
   FROM members, (SELECT @rownum:=0) r
   ORDER BY col1 DESC, col2 DESC
  ) ranks ON members.member_id = ranks.member_id 
/* And set the number column to the rank */
SET members.number = ranks.number; 
```

[SQLfiddle.com 演示](http://sqlfiddle.com/#!2/9dbce/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:19:24.543

你可以试试这个

```
update members A
INNER JOIN
(
    SELECT @rownum:=@rownum+1 number, member_id 
    FROM members, (SELECT @rownum:=0) r 
    ORDER BY col1 DESC, col2 DESC
) B ON A.member_id = B.member_id
SET A.number = B.number; 
```

# gtk - 标签不触发鼠标事件

> ID：14298854
> 
> 赞同：3
> 
> 时间：2013-01-12T22:58:52.353
> 
> 标签：gtk, pygtk

在 pygtk 参考中，它声明每个`Gtk.Widget`都有事件[enter-event-notify](http://developer.gnome.org/pygtk/stable/class-gtkwidget.html#signal-gtkwidget--enter-notify-event)，但是在我的测试代码中，该事件从未为 Label 小部件触发（与其他小部件一起工作）。

有什么我应该做的不同的事情吗？

```
import pygtk
pygtk.require('2.0')
import gtk

class LabelTest:

    def delete_event(self, widget, event, data=None):
        return False

    def destroy(self, widget, data=None):
        gtk.main_quit()

    def __init__(self):
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)

        self.window.connect("delete_event", self.delete_event)
        self.window.connect("destroy", self.destroy)
        self.window.set_border_width(10)

        self.label = gtk.Label("A label")

        # question section
        def labelMouseOver(w, data=None):
          print "mouse over"

        self.label.connect('enter-notify-event', labelMouseOver, None)
        # /question section

        self.window.add(self.label)
        self.label.show()
        self.window.show()

    def main(self):
        gtk.main()

if __name__ == "__main__":
    test = LabelTest()
    test.main() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T03:35:26.037

由于性能原因，某些小部件不拥有自己的 X 窗口，因为它们大多是装饰性的，通常不需要处理 X 事件信号。[您可以在此处](http://developer.gnome.org/gtkmm-tutorial/3.0/chapter-widgets-without-xwindows.html.en)找到完整列表。

在这些情况下，建议使用[GtkEventBox](http://developer.gnome.org/gtk3/3.2/GtkEventBox.html)来包装无窗口小部件（EventBox 是专门使用该目标构建的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T00:04:29.790

好的，我找到了解决方案，和这里的一样：[Enter-Notify-Event Signal not working on gtk.ToolButton](https://stackoverflow.com/questions/7351947/enter-notify-event-signal-not-working-on-gtk-toolbutton)。由于某些非显而易见的原因，一些小部件无法自行响应信号，因此需要在它们周围放置一个额外的框。我已经以一种我会做的方式重写了代码示例 - 即为更新的 GTK 3.0 使用导入，并通过从`Gtk.Window`. 也有人可能更喜欢实例方法而不是嵌套方法。

```
from gi.repository import Gtk

class Foo (Gtk.Window):

    def __init__(self):
        Gtk.Window.__init__(self)
        self.connect("destroy", Gtk.main_quit)
        self.set_border_width(50)
        box = Gtk.EventBox()
        label = Gtk.Label("Test")   
        box.add(label)
        box.connect("enter-notify-event", self.on_mouse)
        self.add(box)
        self.show_all()

    def on_mouse(self, widget, data=None):
        print widget, data

    def main(self):
        Gtk.main()

if __name__ == "__main__":
    Foo().main() 
```

# applescript - applescripted quicktime 图像序列导出创建绿框

> ID：14298856
> 
> 赞同：0
> 
> 时间：2013-01-12T22:59:11.500
> 
> 标签：applescript, quicktime

我有一个用于从视频创建图像序列的小程序。它非常适合用我的尼康相机拍摄的电影。它为我的佳能相机拍摄的电影创建了一堆纯绿色图像。奇怪的是，如果我使用 quicktime 手动导出图像序列，它工作正常（没有绿色图像）。只有当通过脚本运行时，quicktime 才会创建绿框（顺便说一下，所有绿框）。

下面是代码：

```
#set vFile to (choose file with prompt "Select a video file:")
on open of finderObjects -- "open" handler triggered by drag'n'drop launches
    repeat with vFile in (finderObjects) -- in case multiple objects dropped on applet
        tell application "Finder"
            list folder ":Library:QuickTime:Presets"
            set theList to result
            set qSet to (choose from list theList)
            set vBase to the name of vFile
        end tell

        tell application "Finder"
            if (folder ((path to movies folder as string) & "TLTemp") exists) then
                delete folder ((path to movies folder as string) & "TLTemp")
            end if

            if not (folder ((path to movies folder as string) & "TLTemp") exists) then
                set TLDir to make new folder at (path to movies folder as string) with properties ¬
                    {name:"TLTemp"}
            end if
        end tell

        #tell application "QuickTime Player 7" to open vFile
        tell application "QuickTime Player 7"
            open vFile
            set settings_file to (":Library:QuickTime:Presets:" & qSet)
            set TLtemp to ((path to movies folder as string) & "TLTemp:" & vBase)
            with timeout of 500 seconds
                export document 1 to TLtemp as image sequence using settings settings_file
            end timeout
            #export document 1 to TLtemp as image sequence

            close document 1
        end tell

        set the item_list to list folder ((path to movies folder as string) & "TLTemp:") without invisibles
        set pictureFile to ((path to movies folder as string) & "TLTemp:" & item 1 of item_list)
        tell application "QuickTime Player 7"
            activate
            open image sequence pictureFile frames per second 30
            set the looping of document 1 to true
            play document 1
        end tell

    end repeat
end open 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:43:41.850

我从未使用过图像序列，但我有一个 AppleScript，它可以在 QuickTime 7 中打开 Finder 的选定项目，并将 10 个静止图像捕获为 PICT 文件。如果您将前端文档的当前时间增加一帧（而不是像我一样的持续时间/11），对您有帮助吗？

```
--   Use iPhoto to convert these PICT files to PNGs.
set exportFolder to (path to the desktop as text) & "photos from QuickTime:"
set picturesPerVideo to 10

tell application "Finder" to set theSelection to the selection as list
repeat with i from 1 to (count of theSelection)
    set theItem to item i of theSelection
    tell application "Finder"
        set finderPath to (file (theItem as text))'s POSIX path
        set theName to theItem's name
        open theItem using (path to application "QuickTime Player 7")
    end tell
    set theCurrentDate to current date
    tell application "System Events" to set process "QuickTime Player 7"'s visible to false
    tell application "QuickTime Player 7"
        repeat until front document's path = finderPath
            if ((current date) - 15) > theCurrentDate then error "Timeout."
            delay 1
        end repeat

        repeat with j from 1 to picturesPerVideo
            set timeInVideo to j / (picturesPerVideo + 1)
            set front document's current time to (front document's duration) * timeInVideo
            set exportPath to exportFolder & theName & "_" & j & ".pict"
            export front document to exportPath as picture replacing yes
        end repeat
        close front document
    end tell
end repeat 
```

很抱歉迟到的答案。刚看到你的帖子。

# jquery - jQuery UI，在手风琴激活上确定面板是打开还是关闭

> ID：14298858
> 
> 赞同：0
> 
> 时间：2013-01-12T22:59:40.003
> 
> 标签：jquery, jquery-ui, accordion

我实际上正在开发一个 jQuery UI 手风琴，我试图找到如何知道面板何时打开或关闭，以便我可以为这两个事件执行不同的函数。

```
$("#accordion").bind('accordionactivate', function(event, ui) {
  $(ui.newPanel).find('.itemChildren').empty();
  var index = $("#accordion").accordion("option", "active");
  alert($.isEmptyObject(ui.oldPanel));
  if( index !== false){
    var item = {};
    item[Settings.id_item] = Tree.getTreeItemId(ui.newPanel);
    Tree.displayChildren(item, Settings, Url);
  }
}); 
```

我试图观察对象是否为空：否

我试图查看活动索引是否为假：仅在最后一个面板关闭时为假

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:47:41.967

这可能不是最好的方法，但它对我有用，我只是验证 newPanel 中的类是否存在：

```
$("#accordion").bind('accordionactivate', function(event, ui) {
  if(typeof $(ui.newPanel).attr('class') === 'undefined'){
    $(ui.oldPanel).find('.itemChildren').empty();
  } else {
    var item = {};
    item[Settings.id_item] = Tree.getTreeItemId(ui.newPanel);
    Tree.displayChildren(item, Settings, Url);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-11T21:02:30.880

我知道这个问题很老，但我今天遇到了。从[这里](http://api.jqueryui.com/accordion/#event-beforeActivate)的手风琴文档：

> 如果手风琴当前折叠， ui.oldHeader 和 ui.oldPanel 将是空的 jQuery 对象。如果手风琴正在折叠，则 ui.newHeader 和 ui.newPanel 将是空的 jQuery 对象。

因此，如果 ui.newHeader 不为空，则手风琴即将打开。或者，如果 ui.oldHeader 不为空，则手风琴即将崩溃。下面的代码对我来说效果很好：

```
$("#accordion" ).on( "accordionbeforeactivate", function( event, ui ) {
    if (ui.newHeader.size()) {
        console.log("Activating");
    } else if (ui.oldHeader.size()) {
        console.log("Deactivating");
    }
}); 
```

# gcc - GCC内联汇编程序访问参数？

> ID：14298862
> 
> 赞同：1
> 
> 时间：2013-01-12T23:00:11.667
> 
> 标签：gcc, gnu-assembler

我需要从 C 函数访问参数

无效打印（字符*味精）；

并将其存储到 ESI 中。但是我做不到

```
mov $msg, %esi 
```

或者

```
mov $_msg, %esi 
```

两者都返回链接器错误（说符号 msg 或 _msg 未定义。我很确定我可以通过从堆栈中读取来访问 msg，但在我的汇编代码中访问符号 msg 会更容易。这甚至可能在海合会？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:17:13.147

您不能在 GCC 内联汇编中引用类似的变量。我想你想要这样的东西：

```
 asm("mov %[msg], %%esi",
     : /* no outputs */
     : [msg] "r" (msg)
     : "esi"); 
```

# c - 函数范围内 const 静态变量的内存分配

> ID：14298864
> 
> 赞同：3
> 
> 时间：2013-01-12T23:00:21.147
> 
> 标签：c, memory, memory-management, static

在 C 中，a`static const int`和 a`const int`在分配的内存方面有什么区别？

```
void f(int *a)
{
    static const int b = 10;
    const int c = 20;

    *a = b + c;
} 
```

只会`b`消耗？`sizeof(int)`并且，它会在执行过程中`c`消耗`sizeof(int)`值`20`，以及`sizeof(int)`，加上复制指令吗？`f`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T23:01:56.883

语言标准对此只字未提。

但是，编译器很可能会将您的代码转换为：

```
void f(int *a) {
    *a = 30;
} 
```

因此根本不分配内存（显然，指令空间除外）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T23:14:30.733

static const int 将在程序执行的整个生命周期内分配一次。

函数内部的 const int 将在每次进入函数时分配到堆栈上，并在退出时从堆栈中释放。

我可能会指出上面的“但是，编译器很可能会将您的代码转换为：”是不正确的。如果您请求“静态”存储类，则没有编译器会忽略这一点，静态变量可以指望在内存中传递指针 --- 除其他原因外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T23:24:50.387

鉴于这两个常量在函数内部都是已知的，那么是什么阻止编译器生成它`*a = 30;`？在此示例中，既不`b`也不`c`必须有存储。

如果需要存储：

```
 static const int b = 10; 
```

将占用一个 sizeof(int) [由于填充可能会使用更多空间，这取决于`a`数据部分之前和之后的内容，并且没有说明编译器将为任何给定场景提供多少填充 - 无论是必要的使事情在编译器所针对的系统上“工作”]。根据系统的架构，可能需要设置 b = 10 的代码 [请参阅下面关于它的大小]。

```
 const int c = 20; 
```

可能会占用堆栈上的 sizeof(int) 个字节，但也会有代码初始化`b`为 20 - 可以是任何小的数字 - 2、3、5、6、7、8、16 或其他一些，具体取决于处理器架构和完成该工作所需的指令类型。当然，编译器可以在任何需要的地方直接使用 20。

但是编译器所需要的只是 *a 以某种方式设置为 30。其他一切都“取决于编译器”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T23:17:54.290

在您的示例中，它们的含义相同，并且正如@Oli 所提到的，编译器将对其进行优化，以使实际代码甚至可能在最终代码中都没有。

但这是不同的用例：-

```
int func1(int v) {
 const int c_i = compute_some_things(v);/* calculate the c_i everytime we enter this function */
 return c_i = v + c_i;
}

int func2(int e) {
 static const int c_i = compute_some_things_one_time();/* c_i is calculated ONCE, the next time, the value of c_i is retained every time the function is entered */
 return c_i = e + c_i;
} 
```

# emacs - 随后运行相同的功能，产生不同的结果

> ID：14298865
> 
> 赞同：1
> 
> 时间：2013-01-12T23:00:36.403
> 
> 标签：emacs, refactoring, lisp

问这个问题我觉得有点傻，但我觉得我的代码效率很低。我想我的逻辑在这里不太好。

基本上，我希望在随后运行相同的命令时发生一些不同的事情。

我的想法是有一个`(cond )`，在每种情况下，我都会测试之前使用的命令是否相同以及根据按下次数设置的变量的值。

我也觉得在这种情况下我没有正确获取标题/标签，所以请随意编辑。

```
((and (eq last-repeatable-command 'thecommand)
      (= varcounter 1))
  (message "second time called")
  (setq varcounter 2)) 
```

当再次按下它时，下一个子句将触发。

虽然下面的代码有效，但我相信这可以更有效地完成，我希望有人可以就如何解决这个问题提供指导。

长代码示例：

```
(defun incremental-insert-o ()
  (interactive)
  ; init if not bound
  (when (not (boundp 'iivar)) (setq iivar 0))

  (cond 
   ((and (eq last-repeatable-command 'incremental-insert-o)
         (= iivar 1))
    (insert "o o ")
    (setq iivar 2))

   ((and (eq last-repeatable-command 'incremental-insert-o) 
         (= iivar 2))
    (insert "o o o ")
    (setq iivar 3))

   ((and (eq last-repeatable-command 'incremental-insert-o) 
         (= iivar 3))
    (insert "o o o "))

   (t 
     (insert "o ")
     (setq iivar 1)))
)

(global-set-key [f8] 'incremental-insert-o) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T08:48:52.743

现在，您需要更高效的代码。您可以通过此来表示几件事。您可能意味着您想要执行得更快的代码。现在的代码有多慢？当我在我的 Emacs 上运行它时，它是即时的。鉴于根据定义，此代码是从按钮按下调用的，它不必非常快。你的代码对于它的用例来说已经足够快了，所以我不担心让它更快。它也不使用内存：如果你调用它`n`，它仍然只使用足够的内存来存储一个整数：这个算法是`O(1)`. 听起来不错。

你也可以说“用更少的行写这个”。这也将使代码不易出错，并且更易于理解。这当然是一个合理的目标。您的代码一开始并不糟糕，因此它不是必需品，但也不是一个坏主意。我们可以对您的功能进行一些修改。您可以删除您的整个第三个子句`cond`，并让`(= iivar 2)`case 成为最后一个子句，从而无需在`iivar`此处设置为 3。嗯，已经好多了。

但是等等，该函数`(eq last-repeatable-command 'incremental-insert-o)`最多调用 3 次！好多啊。让我尝试重写它！首先，让我们从一个基本函数定义开始，通过一个`interactive`调用，正如你所拥有的：

```
(defun incremental-insert-o ()
  (interactive)) 
```

现在，我将从你的代码中重构一些东西。`iivar`首先，让我们看看我们是否可以正确跟踪。为了便于阅读，我将把那个变量重命名`incremental-insert-o-consecutive`为 ，并且因为 Emacs Lisp 有一个单一的命名空间，所以使用命名变量的任何其他内容都`iivar`将读取和写入您的代码正在查看的同一个位置：

```
(defun incremental-insert-o ()
  (interactive)
  (if (eq last-repeatable-command 'incremental-insert-o)
      (setq incremental-insert-o-consecutive
            (1+ incremental-insert-o-consecutive))
    (setq incremental-insert-o-consecutive 
          1))) 
```

那行得通吗？我会`[F8]`像你一样将它绑定到：`(global-set-key [f8] 'incremental-insert-o)`. 现在，点击`[F8]`运行它，但它并没有告诉你返回值是什么。让我们稍微改变一下函数来测试它：

```
(defun incremental-insert-o ()
  (interactive)
  (if (eq last-repeatable-command 'incremental-insert-o)
      (setq incremental-insert-o-consecutive 
            (1+ incremental-insert-o-consecutive))
    (setq incremental-insert-o-consecutive 
          1))
  (message "incremental-insert-o-consecutive is currently %s" incremental-insert-o-consecutive)) 
```

打`[F8]`几次以确保它有效，它确实有效！它从 1 开始，每次连续调用时增加 1，并在您执行其他操作时重置。现在，我们只需要打印出正确的消息。我们要打印什么？好吧，第一次调用该函数时，打印出一个“o”，然后第二次，打印出“oo”，然后第三次和所有其他时间，打印出“ooo”。注意打印第二个字符串只是打印第一个字符串两次，第三个字符串打印第一个字符串三次：

```
(defun incremental-insert-o ()
  (interactive)
  (if (eq last-repeatable-command 'incremental-insert-o)
      (setq incremental-insert-o-consecutive 
            (1+ incremental-insert-o-consecutive))
    (setq incremental-insert-o-consecutive
          1))
  (dotimes (i incremental-insert-o-consecutive)
    (insert "o "))) 
```

这几乎是对的！它在第 1 到第 3 次中做正确的事情，但在插入“ooo”时不会结束；它继续打印“oooo”等。所以我们只需要将重复次数限制为 3：

```
(defun incremental-insert-o ()
  (interactive)
  (if (eq last-repeatable-command 'incremental-insert-o)
      (setq incremental-insert-o-consecutive
            (1+ incremental-insert-o-consecutive))
    (setq incremental-insert-o-consecutive
          1))
  (dotimes (i (min incremental-insert-o-consecutive
                   3))
    (insert "o "))) 
```

现在，这似乎正是您想要的。让我们看一下原始功能的变化。这计算了超过 3 的重复次数。但是输出行为是相同的，所以我认为这并不重要，保持实际的重复次数似乎更好。如果您溢出整数，它将中断，但这似乎不太可能。Emacs[保证至少 536870911 作为 MAXINT](https://www.gnu.org/software/emacs/manual/html_node/elisp/Integer-Basics.html#Integer-Basics)。所以让我们称之为一天。我们确实使代码更短，并且没有重复的部分。我认为这使它更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T08:27:49.580

Here's something I could think of, however, take it with a grain of salt, because it may be overly complex, and you don't want to bring this much complexity into what you do:

```
(defstruct command-state
  action next-state)

(defmacro define-action-states (name condition &rest actions)
  (labels ((%make-command-state 
            (action name)
            `(make-command-state :action (lambda () ,action))))
    `(let ((head ,(%make-command-state (car actions) name)))
       (defvar ,name nil)
       (setq ,name head)
       ,@(loop for action in (cdr actions)
               collect
               `(setf (command-state-next-state ,name) 
                      ,(%make-command-state action name)
                      ,name (command-state-next-state ,name)))
       (setf (command-state-next-state ,name) head
             ,name head)
       (defun ,(intern (concat (symbol-name name) "-command")) ()
         (when ,condition
           (unwind-protect
               (funcall (command-state-action ,name))
             (setq ,name (command-state-next-state ,name))))))))

(define-action-states print-names (= 1 1)
    (message "first state")
    (message "second state")
    (message "third state")
    (message "fourth state"))

(print-names-command)
;; will print messages looping through them, 
;; each time you call it 
```

I've made it to use a `struct`, so that you could add more conditions, independent of the state itself, for example, but mostly so the names would be more self-explanatory.

Also, probably, that's not the place you should really care about efficiency - so far your fingers cannot outrun the eLisp interpreter, it's all good ;)

* * *

Here's something I did to your code to possibly improve it a bit (now the worst case scenario will only check 5 conditions instead of 6 :)

```
(defun smart-killer ()
  (interactive)
  (let* ((properties (symbol-plist 'smart-killer))
         (counter (plist-get properties :counter)))
    (if (region-active-p)
        (kill-region (region-beginning) (region-end))
      (if (eq last-repeatable-command 'smart-killer)
          (if (> counter 3)
              (message "Kill ring is already filled with paragraph.")
            (if (> counter 2)
                (progn
                  (yank)
                  (kill-new "")
                  (mark-paragraph -1)
                  (kill-region (region-beginning) (region-end)))
              (if (> counter 1)
                  (kill-region (point) (line-beginning-position))
                (kill-line))))
        (when (not (looking-at "\\<\\|\\>")) (backward-word)) ; begin/end of word
        (kill-word 1))
      (plist-put properties :counter (mod (1+ counter) 5)))))

(put 'smart-killer :counter 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T10:13:45.190

这就是我最后想到的：

```
(defun smart-killer ()
  (interactive)

  (cond 
   ; [1]  If region active, kill region
   ((region-active-p)
    (kill-region (region-beginning) (region-end)))

   ; [2] If this command was last called, check how many times before it ran
   ((eq last-repeatable-command 'smart-killer)

      (cond
      ; [2a] 
       ((= sm-killer 1)
        (kill-line))

      ; [2b] 
       ((= sm-killer 2)
        (kill-region (point) (line-beginning-position)))

     ; [2c]
       ((= sm-killer 3)
        (yank)
        (kill-new "")
        (mark-paragraph -1)
        (kill-region (region-beginning) (region-end)))

     ; [2d]   
       ((= sm-killer 4)
        (message "Kill ring is already filled with paragraph.")))

      (incf sm-killer))

  ; [3]
  (t
   (when (not (looking-at "\\<\\|\\>")) (backward-word)) ; begin/end of word
   (kill-word 1)
   (setq sm-killer 1)))

) 
```

# android - 为一个简单的应用程序处理 Android 中的运行时更改 - 我需要使用 Bundle 吗？

> ID：14298866
> 
> 赞同：1
> 
> 时间：2013-01-12T23:00:45.290
> 
> 标签：android

我正在制作我的第一个 Android 应用程序，它仅由 editText 和 Spinner 组成。阅读活动周期，我想知道是否有必要在我的情况下使用 Bundle 机制。

由于小部件的状态是自动保持的 - 我可以在活动的 onCreate() 方法中调用微调器上的 getSelectedItem() 方法和 EditText 上的 getText() 并将其传递给我新创建的模型对象而不是使用Bundle机制？这种方法的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:54:14.813

它不会自动保持的小部件的状态。当您的活动被破坏时，它会丢失有关状态的所有信息。我建议您使用共享首选项保存您的应用程序状态。这是来自谷歌[开发者网站](http://developer.android.com/guide/topics/data/data-storage.html#pref)的一个例子。它允许您通过存储键值对来保存应用程序状态，它应该足以满足您的应用程序。

当您的活动停止时，将文本和微调器项目位置保存在共享首选项中 -`onStop()`并将状态恢复到`onCreate()`.

```
public class Calc extends Activity {
    public static final String PREFS_NAME = "MyPrefsFile";

    @Override
    protected void onCreate(Bundle state){
       super.onCreate(state);
       . . .

       // Restore preferences
       SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
       boolean silent = settings.getBoolean("silentMode", false);
       setSilent(silent);
    }

    @Override
    protected void onStop(){
       super.onStop();

      // We need an Editor object to make preference changes.
      // All objects are from android.context.Context
      SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
      SharedPreferences.Editor editor = settings.edit();
      editor.putBoolean("silentMode", mSilentMode);

      // Commit the edits!
      editor.commit();
    }
} 
```

尽管您可以通过方法保存应用程序状态`onSaveInstanceState(Bundle)`，但通常更好的方法是在`onPause()`or`onStop()`方法中执行此操作（数据肯定会保存）。文档说：

> 请注意，将持久数据保存在 onPause() 而不是 onSaveInstanceState(Bundle) 中很重要，因为后者不是生命周期回调的一部分，因此不会在其文档中描述的所有情况下都被调用。

# php - 为什么继承似乎以一种意想不到的方式运作？

> ID：14298869
> 
> 赞同：0
> 
> 时间：2013-01-12T23:01:07.040
> 
> 标签：php, inheritance

`MApp`使用`$database_object`. 我收到一个错误，因为它是私有的，所以我无法使用它。但是我将其更改为受保护的，现在它可以工作了。请注意，在类层次结构中，MApp 位于 MAppAMAdder 之上。

我认为受保护意味着子类可以使用资源而不是父类。PHP 与其他语言有什么不同，还是我对继承如何工作的理解不正确？

**MAppAdder 代码段**

```
class MAppAMAdder extends MApp
{
    protected $database_object; // private will cause a fail. 
```

**移动应用**

```
abstract class MApp extends M
{
    protected function getID($pipe)
    {
        $temp = $this->database_object->_pdoQuery('single', 'pull_id_by_h_token',
            array($pipe['server']['smalls']['h_token']));
        $pipe['id'] = $temp['id'];
        return $pipe;
    }
    protected function addTweetTop($pipe, $comment)
    {
        $input = array( $pipe['server']['smalls']['h_token'], 
                        $pipe['server']['smalls']['picture'], 
                        $pipe['server']['smalls']['name'], 
                        $comment, 
                        time(), 
                        $pipe['server']['smalls']['h_file'] );
        $this->database_object->_pdoQuery( 'none', 'tweet_insert', $input);
        return $pipe;
    }
} 
```

**错误**

**致命错误**：无法在...中访问私有属性 MAppTweet::$database_object

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T23:06:08.603

在 PHP[`protected`](http://php.net/manual/en/language.oop5.visibility.php)中意味着父类也可以访问该属性：

> 声明为 protected 的成员只能在类本身内*以及被继承类和父类*访问。

您是正确的，因为这种行为不同于 C++ 和 Java 等强类型语言的“经典”行为。在此类语言（通常称为*静态类型*）中，编译器会通过发出编译时错误来阻止您以无法证明正确的方式访问类成员。这就是为什么父类不能推测性地访问子类中定义的成员的原因：无法保证该成员在运行时会存在。

另一方面，PHP 是动态类型的，并且允许您引用任何成员，甚至是根本不存在的成员（`null`在这种情况下访问结果）。这种成员是否存在的检查是在运行时执行的，可能会导致各种各样的结果（从没有异常到在某些情况下出现运行时错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:05:23.543

超类如何使用只在子类中定义的字段？那不能正常工作。您可以从子类中访问超类的任何字段，只要它被声明为`public`or `protected`。`private`子类无法访问字段。然而，超类对可能存在的任何子类一无所知。

# asp.net - 对象引用未设置为 IIS 7 中的对象实例

> ID：14298874
> 
> 赞同：1
> 
> 时间：2013-01-12T23:01:47.040
> 
> 标签：asp.net, iis, windows-server-2008-r2

> **可能重复：**
> [.NET 中的 NullReferenceException 是什么？](https://stackoverflow.com/questions/4660142/what-is-a-nullreferenceexception-in-net)

我无法将 asp.net .NET 4.5 网站部署到在远程虚拟机中运行的 Windows 2008 R2 上运行的 IIS 7 服务器。当我尝试访问我机器中的虚拟服务器中的受限成员页面（又名 VS2012 中的调试）时，它运行良好，将我重定向到登录页面，以便用户登录并访问成员页面。

但是，当我在 IIS7 中托管的网站上执行完全相同的操作时，会出现以下错误：

```
Server Error in '/WebApp' Application.

Object reference not set to an instance of an object.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   WebApp.Members.RedeSocial.Page_Load(Object sender, EventArgs e) +88
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +51
   System.Web.UI.Control.OnLoad(EventArgs e) +92
   System.Web.UI.Control.LoadRecursive() +54
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +772 
```

我已经对此进行了深入研究，但找不到解决方案。有任何想法吗？谢谢

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Security;

namespace WebApp.Members
{
    public partial class RedeSocial : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
                Service.Service1Client serv = new Service.Service1Client();
                Library.Utilizador u = Library.Utilizador.loadByUsername(HttpContext.Current.User.Identity.Name);
                dimRede.Text = serv.GetTamanhoRede(u.CODUTILIZADOR);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:25:32.347

这里可能会发生几件事，但我会冒险猜测您的问题出在这个表达式上：

```
HttpContext.Current.User.Identity.Name 
```

您是否已将 IIS 7 配置为使用 Windows 身份验证？

![在此处输入图像描述](../Images/8f507ec46b16e11cbef98faa12d3618d.png)

# assembly - 在 TASM x86 程序集中减去 2 个数字

> ID：14298877
> 
> 赞同：0
> 
> 时间：2013-01-12T23:02:23.980
> 
> 标签：assembly, x86, tasm

我在 x86 汇编中编写了一个简单的程序，并尝试使用 TASM(Turbo) 和 TLINK 运行它。

当我输入 4 和 3 时，减法输出`/`而不是`1`，这是应该的。

但是当我输入 3 和 4 时，我得到了正确的结果。

求和和排序工作正常，代码仅用于减法不正确。

有什么帮助吗？

```
code Tasm

.model small
.stack
.code

DONNEES SEGMENT

    Nombre1Msg       db 'Entrez le 1er chiffre:$'
    Nombre2Msg       db 'Entrez le 2er chiffre:$'
    DifferenceMsg    db 'Leur difference:$'
    SommeMsg         db 'Leur Somme:$'
    AscMsg           db 'En Ordre croissant:$'
    DescMsg          db 'En Order decroissant:$'
    Sperateur        db ',$'
    return           db 0DH,0AH,('$')

    Nombre1          db 
    Nombre2          db
    Somme            db
    Difference       db 

DONNEES ENDS

Main PROC FAR

ASSUME DS:DONNEES
MOV AX,DONNEES 
MOV DS,AX

MOV DX,offset Nombre1Msg
MOV AH,9
INT 21H

MOV AH,1 ; saisie
INT 21H ; le caractere lu arrive dans AL
Sub AL,'0';le chiffre= code ASCII-ASCII(0)
MOV Nombre1,AL

call LineFeed

MOV DX,offset Nombre2Msg
MOV AH,9
INT 21H

MOV AH,1 ; saisie
INT 21H ; le caractere lu arrive dans AL
Sub AL,'0';le chiffre= code ASCII-ASCII(0)
MOV Nombre2,AL

CMP Nombre1,AL ; 2éme chifre en AL
JL Permutation
Permutation:
MOV AL,Nombre1
MOV AH,Nombre2
MOV Nombre1,AH
MOV Nombre2,AL

MOV AL,Nombre1
SUB AL,Nombre2
MOV Difference,AL

MOV Al,Nombre1
add AL,Nombre2
MOV Somme,AL

call LineFeed

MOV DX,offset DifferenceMsg
MOV AH,9
INT 21H

MOV DL,Difference
ADD DL,48
MOV AH,2
INT 21H

call LineFeed

MOV DX,offset SommeMsg
MOV AH,9
INT 21H

MOV DL,Somme
ADD DL,48
MOV AH,2
INT 21H

call LineFeed

MOV DX,offset AscMsg
MOV AH,9
INT 21H

MOV DL,Nombre2
ADD DL,48
MOV AH,2
INT 21H

MOV DX,offset Sperateur
MOV AH,9
INT 21H

MOV DL,Nombre1
ADD DL,48
MOV AH,2
INT 21H

call LineFeed

MOV DX,offset DescMsg
MOV AH,9
INT 21H

MOV DL,Nombre1
ADD DL,48
MOV AH,2
INT 21H

MOV DX,offset Sperateur
MOV AH,9
INT 21H

MOV DL,Nombre2
ADD DL,48
MOV AH,2
INT 21H

MOV AH,4CH 
INT 21H
Main ENDP    

    LineFeed proc near
    MOV dx,offset return
    MOV ah,9
    int 21h
    ret
    LineFeed endp

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:38:43.323

好吧，这是一个错误。您的排序代码有一个条件跳转（`jl`在这种情况下），它没有任何效果，因为它只跳转到下一条指令，无论如何都会在下一条指令中执行：

```
CMP Nombre1,AL ; 2éme chifre en AL
JL Permutation
Permutation:
MOV AL,Nombre1
MOV AH,Nombre2
MOV Nombre1,AH
MOV Nombre2,AL 
```

`Nombre1`您的变量名称`Nombre2`不是很具有描述性。如果您想在法语中使用变量名称，我会更改`Nombre1`例如。到`Nombre_plus_grande`（或`bigger_number`英语）和`Nombre2`例如。到`Nombre_plus_grande`（或`smaller_number`英语）。否则，当变量名没有任何意义时，很难调试代码。

带有英文变量名的固定版本（使大多数人更容易理解）：

```
bigger_number db
smaller_number db

mov smaller_number,al ; store 2nd input into smaller_number
cmp bigger_number,al  ; 1st input in bigger_number, 2nd input in al
jae order_ready       ; if numbers are equal or if bigger_number is bigger,
                      ; there's then nothing to do.
    xchg al,bigger_number    ; exchange al (2nd input) and bigger_number
    mov smaller_number,al    ; store al (now the 1st input) into smaller_number
order_ready: 
```

注意我还将有符号`jl`（如果小于则跳转）更改为无符号`jae`（如果高于或等于则跳转；`jae`，`jnb`并且`jnc`是同义词）。由于这段代码不处理负数，我认为最好也与跳转保持一致。`jge`/ `jnl`（如果大于或等于则跳转/如果不是小于则跳转）也可以。您可能需要查看[Intel x86 JUMP 快速参考](http://unixwiz.net/techtips/x86-jumps.html)。

在此修复之后，您应该在代码的其他部分相应地替换变量名称。

```
mov al,bigger_number
sub al,smaller_number
mov Difference,AL

mov al,bigger_number
add al,smaller_number
mov Somme,al 
```

如果总和超过 9，则输出垃圾。但是，对于有效输入，减法应该始终正确工作。

# javascript - Travis-CI 构建因 URL/散列模块依赖而失败

> ID：14298878
> 
> 赞同：0
> 
> 时间：2013-01-12T23:02:31.063
> 
> 标签：javascript, node.js, npm, package-managers, travis-ci

我有以下依赖数组`package.json`：

```
"dependencies": {
    "doT": "git://github.com/nick-jonas/doT.git#cbc7041b646a79cca1034820db09167407d2f988",
    "lodash": "latest",
    "commander": "latest",
    "minimatch": "0.2.9",
    "prompt": "latest",
    "mkdirp": "latest",
    "fs-extra": ">=0.3.2",
    "shelljs": ">=0.1.0",
    "cheerio": ">=0.10.5",
    "readdirp": ">=0.2.1"
  } 
```

注意第一个部门：

`"doT": "git://github.com/nick-jonas/doT.git#cbc7041b646a79cca1034820db09167407d2f988"`

这*适用*于 npm。运行时`npm install`，它会将正确版本的 doT 放入我的 node_modules 目录中。然而，当 Travis-CI 运行测试脚本时，它会给出这个错误消息：

```
227  vows test/*.js --spec
228
229
230  module.js:340
231    throw err;
232          ^
233  Error: Cannot find module 'doT'
234    at Function.Module._resolveFilename (module.js:338:15)
235    at Function.Module._load (module.js:280:25)
236    at Module.require (module.js:362:17)
237    at require (module.js:378:17)
238    at Object.<anonymous> (/home/travis/builds/nick-jonas/assemblejs/lib/commands/writer.js:15:11)
239    at Module._compile (module.js:449:26)
240    at Object.Module._extensions..js (module.js:467:10)
241    at Module.load (module.js:356:32)
242    at Function.Module._load (module.js:312:12)
243    at Module.require (module.js:362:17)
244  npm ERR! Test failed.  See above for more details.
245  npm ERR! not ok code 0 
```

在本地运行此命令`vows test/*.js --spec`也可以，因此我假设 Travis-CI 抓取散列 URL 依赖项存在问题。

其他人有类似的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:52:55.683

@smithclay 是完全正确的。您可能正在使用不区分大小写的文件系统的 Mac。然而，运行 travis 的 Linux 却没有。

我最近遇到了类似的问题，并创建了[valiquire](https://github.com/thlorenz/valiquire)来检查所有 require 语句是否指向有效位置，包括正确的大小写。

这样我就可以在本地解决它们。将 valiquire 检查作为测试的一部分也很有用，以避免破坏构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T02:54:49.360

看看你[失败的 TravisCI 任务](https://travis-ci.org/nick-jonas/assemblejs/jobs/4115442)，它似乎确实成功地安装了 doT@1.0.0：

[https://travis-ci.org/nick-jonas/assemblejs/jobs/4115442/#L188](https://travis-ci.org/nick-jonas/assemblejs/jobs/4115442/#L188)

如果我[查看 dot.js 项目存储库](https://github.com/olado/doT/blob/master/package.json#L2)，看起来 doT`package.json`文件的名称列为“dot”而不是“doT”。

我会尝试在 writer.js （或其他任何使用它的地方）中更改`require('doT')`为。`require('dot')`

看起来这可能是一个区分大小写的问题，在处理 npm 世界时可能特别烦人。

# ruby-on-rails - 使用 twitter-bootstrap 部署 Rails 应用程序

> ID：14298880
> 
> 赞同：5
> 
> 时间：2013-01-12T23:02:57.403
> 
> 标签：ruby-on-rails, heroku, twitter-bootstrap

我添加到我的新 RoR 应用程序 - gem twitter bootstrap。我使用了 CSS 样式表

```
gem "twitter-bootstrap-rails"
rails generate bootstrap:install static 
```

我改变了我的 GEMFILE

```
group :assets do
          gem 'sass-rails',   '~> 3.2.3'
          gem 'coffee-rails', '~> 3.2.1'
          gem 'uglifier', '>= 1.0.3'

          gem "twitter-bootstrap-rails"
end 
```

当我在 Heroku 上部署我的应用程序时，我收到了这个日志

```
 Delta compression using up to 4 threads.
Compressing objects: 100% (59/59), done.
Writing objects: 100% (70/70), 26.75 KiB, done.
Total 70 (delta 4), reused 0 (delta 0)
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.0.pre.5
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
       Fetching gem metadata from https://rubygems.org/.........
       Fetching gem metadata from https://rubygems.org/..
       Installing rake (10.0.3)
       Installing i18n (0.6.1)
       Installing multi_json (1.5.0)
       Installing activesupport (3.2.9.rc2)
       Installing builder (3.0.4)
       Installing activemodel (3.2.9.rc2)
       Installing erubis (2.7.0)
       Installing journey (1.0.4)
       Installing rack (1.4.3)
       Installing rack-cache (1.2)
       Installing rack-test (0.6.2)
       Installing hike (1.2.1)
       Installing tilt (1.3.3)
       Installing sprockets (2.8.2)
       Installing actionpack (3.2.9.rc2)
       Installing mime-types (1.19)
       Installing polyglot (0.3.3)
       Installing treetop (1.4.12)
       Installing mail (2.4.4)
       Installing actionmailer (3.2.9.rc2)
       Installing arel (3.0.2)
       Installing tzinfo (0.3.35)
       Installing activerecord (3.2.9.rc2)
       Installing activeresource (3.2.9.rc2)
       Installing coffee-script-source (1.4.0)
       Installing execjs (1.4.0)
       Installing coffee-script (2.2.0)
       Installing rack-ssl (1.3.2)
       Installing json (1.7.6)
       Installing rdoc (3.12)
       Installing thor (0.16.0)
       Installing railties (3.2.9.rc2)
       Installing coffee-rails (3.2.2)
       Installing commonjs (0.2.6)
       Installing jquery-rails (2.1.4)
       Installing less (2.2.2)
       Installing less-rails (2.2.6)
       Installing libv8 (3.11.8.13)
       Using bundler (1.3.0.pre.5)
       Installing rails (3.2.9.rc2)
       Installing ref (1.0.2)
       Installing sass (3.2.5)
       Installing sass-rails (3.2.5)
       Installing therubyracer (0.11.2)
       Installing twitter-bootstrap-rails (2.2.0)
       Installing uglifier (1.3.0)
       Your bundle is complete! It was installed into ./vendor/bundle
       Post-install message from rdoc:
       Depending on your version of ruby, you may need to install ruby rdoc/ri data:
       <= 1.8.6 : unsupported
       = 1.8.7 : gem install rdoc-data; rdoc-data --install
       = 1.9.1 : gem install rdoc-data; rdoc-data --install
       >= 1.9.2 : nothing to do! Yay!
       Post-install message from twitter-bootstrap-rails:
       Important: You may need to add a javascript runtime to your Gemfile in order for bootstrap's LESS files to compile to CSS.
       **********************************************
       ExecJS supports these runtimes:
       therubyracer - Google V8 embedded within Ruby
       therubyrhino - Mozilla Rhino embedded within JRuby
       Node.js
       Apple JavaScriptCore - Included with Mac OS X
       Microsoft Windows Script Host (JScript)
       **********************************************
       Cleaning up the bundler cache.
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       Asset precompilation completed (25.98s)
-----> Rails plugin injection
       Injecting rails_log_stdout
       Injecting rails3_serve_static_assets
-----> Discovering process types
       Procfile declares types      -> (none)
       Default types for Ruby/Rails -> console, rake, web, worker
-----> Compiled slug size: 15.9MB
-----> Launching... done, v6
       http://rocky-badlands-2634.herokuapp.com deployed to Heroku 
```

当我启动我的应用程序时，我收到消息 - “我们很抱歉，但出了点问题。” 我想也许它与日志中的这条消息有关

```
Post-install message from twitter-bootstrap-rails:
Important: You may need to add a javascript runtime to your Gemfile in order for bootstrap's LESS files to compile to CSS. 
```

如果我使用 Less 样式表，我也会收到此消息

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-13T21:55:45.567

Rails 使用 SASS 而不是 LESS。您必须安装`less-rails`gem 才能获得 LESS 支持。按照`twitter-bootstrap-rails` [说明](https://github.com/seyhunak/twitter-bootstrap-rails)，您最终会得到：

```
gem "therubyracer"
gem "less-rails"
gem "twitter-bootstrap-rails" 
```

安装在资产组之外。这可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T05:48:37.607

只需将其添加到 Gemfile

```
 gem 'twitter-bootstrap-rails', '2.1.3' 
```

然后做

```
 bundle install 
```

然后推送到heroku

# algorithm - 有效检测与给定点对应的矩形区域（地图）

> ID：14298881
> 
> 赞同：2
> 
> 时间：2013-01-12T23:03:01.647
> 
> 标签：algorithm, data-structures

我们有一个（w 乘以 h）画布（宽度 w 和高度 h），用作绘图区域。我们可以在绘图区域中定义“地图”或区域，用户可以在其上单击以执行一些预定义的任务。每个区域由一个边界矩形定义。当用户在其中单击时，将激活图像映射。两个区域可能有重叠的矩形。每当用户点击画布上的一个点时，我们需要找到该点所属的图像地图并开始执行相应的任务。我们总是可以使用线性列表来查找图像映射。但是有没有更好的方法，一种可用于存储图像映射的数据结构，以便我们可以有效地（在少于 O(n) 时间）确定哪些图像映射在用户点击时被激活？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T23:06:28.393

是 - 使用任何类型的 2D 空间索引。最常见的是[四叉树](http://en.wikipedia.org/wiki/Quadtree)，它的查找复杂度为 O(log(n))，而且构建起来也很快。所有主要语言的实现都可用；它广泛用于所有类型的映射应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:08:20.210

您可以创建某种优化以使这项工作的平均时间减少，但效率仍然是**O(n)**，因为用户单击可能会执行所有**N**个可能的任务。

# java - 带有 JSP 的 Spring MVC

> ID：14298886
> 
> 赞同：0
> 
> 时间：2013-01-12T23:03:45.097
> 
> 标签：java, jsp, spring-mvc

在不使用标签库的情况下，是否有关于带有 JSP 的 Spring MVC 的任何示例/教程。纯JSP。我不熟悉标签库，但我擅长 JSP。所以我想看看是否有任何使用纯 JSP 没有任何标记库的示例和教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:28:02.207

我并不是要以贬低的方式这么说，但是如果您擅长 JSP，那么您应该能够轻松掌握 Spring MVC 标记。JSP、自定义标签和 EL 齐头并进。创建它们是有原因的：让您的生活更简单。一个简单的例子，如果你使用 Spring MVC 的[表单标签](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/spring-form.tld.html#spring-form.tld.form)，Spring MVC 会根据你在模型中的数据自动为你预填充表单字段。想一想您的代码在预填充复选框/单选按钮或预选下拉列表时会有多乏味。

如果您也是 Spring Security，则[提供的自定义标签](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/taglibs.html)允许您轻松控制根据用户角色显示哪些数据。

使用纯 JSP 编写所有这些对我来说甚至没有意义……更不用说在编写不完美的本土解决方案方面浪费的时间了。

# jquery - 在移动网站上搜索大文件

> ID：14298887
> 
> 赞同：0
> 
> 时间：2013-01-12T23:03:48.257
> 
> 标签：jquery, mobile

对于一个移动网站，我正在加载一个 8mb 的字典。该网站使用 jQuery Mobile，因此我使用 jQuery 加载文件并将其数据存储在变量中。当用户选择一个单词时，jQuery 会逐行读取变量，直到找到匹配项。在台式机上的性能还可以，但在移动设备上速度很慢。这是在文件中查找单词的最佳方式吗？使用数据库应该更快吗？有什么最佳做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:14:22.523

您确实应该考虑将所有数据放在适当的数据库中，然后对该数据库执行真正的查询。每次扫描 8 MB 文件是解决问题的一种糟糕方法。建立一个数据库，将您的数据放在一个简单的键/值表中，然后使用例如 PHP 对数据库执行查询。

您还应该考虑这对移动用户意味着什么：每次他们打开您的页面时，都会将 8 MB 的数据下载到移动设备上，仅用于查找一个单词。馊主意。

# php - Jquery 表在插入时重新加载

> ID：14298888
> 
> 赞同：0
> 
> 时间：2013-01-12T23:03:54.077
> 
> 标签：php, jquery, html, mysql, ajax

我正在关注本[教程](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)。我要做的是拥有它，以便当数据库中的表受到影响（插入、删除、更新）时，我的应用程序上的表将刷新，而无需点击`F5`或刷新按钮。我按照教程到了发球台，但没有运气。什么都没发生。如果有人可以查看我的代码并查看是否有任何问题，我将不胜感激？

```
<head>
    <link href="core/styles/secondary.css" rel="stylesheet" type="text/css"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
        $.ajaxsetup({
            cache: false
        })
        var ajax_load = "<img class='loading' src='core/images/load.gif' alt='Loading...'/>

        var loadURL="inoffice.php";
            $("#start_que").click(function(){
                $("#que").html(ajax_load).load(loadURL);
            });
     </script> 
```

这是 inoffice.php 的表代码我正在从数据库中的同一个表中回显两个表但具有不同的视图（为空，不为空）

```
<body id="que">
<?php
echo "Waiting";
echo 
    "<table border='2'>
    <tr>
    <th>ID</th>
    <th>A Number</th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Why</th>
    <th>Student Comments</th>
    <th>Additional Requirements</th>
    <th>Signintime</th>
    <th>Staff Member</th>
    <th>Click if ready!</th>
    </tr>"
    ;

    foreach($result as $row)
    {
  echo "<tr>";
  echo "<td>" . $row['id'] . "</td>";
  echo "<td> <a href=student.php?anum=" . $row['anum'] . " target='_blank'>" .$row['anum'] . " </a></td>";
  echo "<td>" . $row['first'] . "</td>";
  echo "<td>" . $row['last'] . "</td>";
  echo "<td>" . $row['why'] . "</td>";  
  echo "<td>" . $row['comments'] . "</td>";
  echo "<td>" . $row['additional_req'] . "</td>";
  echo "<td>" . $row['signintime'] . "</td>";
  echo "
        <td>    <form action='counselor.php?id=" . $row['id'] . "' method='post' target='_new'>
                    <select name='namedrop'>
                        <option value=''>Counselor Name</option> 
                        <option value=''></option>
                        <option value=''><option>
                        <option value=''></option>
                        <option value=''></option>
                        <option value=''></option>
                        <option value=''></option>
                        <option value=''></option>
                        <option value=''></option>
                    </select>
            </td>

            <td> <input type='submit' name='submit' value='Start Session' id='start_que'></td>
            </form> </td>";
} 
```

名为 Session Start 且 ID 为 start_que 的按钮是提交按钮。一旦按下该按钮，第二个表就会被填充。第二个表的代码：

```
echo 
    "<table border='2'>
    <tr>
    <th>ID</th>
    <th>A Number</th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Why</th>
    <th>Student Comments</th>
    <th>Signintime</th>
    <th>Staff Member</th>
    <th>Counselor Start Time</th>
    </tr>"
    ;

    foreach($result2 as $row2)
    {
  echo "<tr>";
  echo "<td>" . $row2['id'] . "</td>";
  echo "<td><a href=student.php?anum=" . $row2['anum'] . " target='_blank'>" .$row2['anum'] . " </a></td>";
  echo "<td>" . $row2['first'] . "</td>";
  echo "<td>" . $row2['last'] . "</td>";
  echo "<td>" . $row2['why'] . "</td>"; 
  echo "<td>" . $row2['comments'] . "</td>";
  echo "<td>" . $row2['signintime'] . "</td>";
  echo "<td>" . $row2['counselorname'] . "</td>";
  echo "<td>" . $row2['counselor_start_time'] . "</td>";
}

echo "</tr>";
echo "</table>"; 
```

根据我的理解，从上面发布的教程中，一旦我单击带有 start_que 的按钮，那么第一个表会显示一个更少的字段，然后第二个表会加载一个新的 DOM，但由于某种原因，所需的影响没有发生。

任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:14:43.220

乍一看，主要问题似乎是您试图在 dom 呈现之前附加 dom 事件处理程序。将您的所有代码包装在内部`$(document).ready()`当 dom 准备好时将调用此函数，然后可以附加您的事件处理程序。

除此之外，您错过了一些引号和分号，函数名称应该`ajaxSetup`是`ajaxsetup`

```
<script type="text/javascript">
    $(function () {
        $.ajaxSetup({
            cache: false
        });

        var ajax_load = "<img class='loading' src='core/images/load.gif' alt='Loading...' />";

        var loadURL = "inoffice.php";

        $("#start_que").click(function () {
            $("#que").html(ajax_load).load(loadURL);
        });
    });
</script> 
```

编辑：在您的解释中，您说第一个表来自**inoffice.php**，但您的代码将**inoffice.php**列为您从中加载第二个表的 url。

# apache - IIRF / APACHE 重写从条件中删除查询字符串

> ID：14298890
> 
> 赞同：0
> 
> 时间：2013-01-12T23:04:14.800
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, iirf

我有以下重写规则：

```
RewriteRule ^/events$ /pagebase.php?pbid=3627 [QSA,L,I]
RewriteRule ^/events-list$ /pagebase.php?pbid=3663 [QSA,L,I]
RewriteRule ^/bob2013$ /pagebase.php?pbid=3688 [QSA,L,I]
RewriteRule ^/contact-us$ /pagebase.php?pbid=3634 [QSA,L,I]
RewriteRule ^/detail$ /pagebase.php?pbid=3890 [QSA,L,I] 
```

在我需要传入查询字符串之前，这很好用。

所以如果我输入

[http://www.domain.com/events](http://www.domain.com/events) 它运行良好。

但是如果我输入

[http://www.domain.com/events?type=1](http://www.domain.com/events?type=1)

然后重写失败，因为它不再匹配“事件”。

但是，如果我删除美元符号，那么它工作正常。查询字符串类型正确传递。

像这样。

```
RewriteRule ^/events$ /pagebase.php?pbid=3627 [QSA,L,I] 
```

但是，问题在于，如果有人键入事件列表的 url。

[http://www.domain.com/events-list](http://www.domain.com/events-list)

重写匹配“事件”页面显示该页面。

基本上，我需要知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:27:17.487

最简单的解决方案是相应地对规则进行排序：**在一般规则之前的特定规则**。

由于第一条规则（没有`$`末尾的）包括第二条规则，所以将第二条规则放在第一条之前：

```
RewriteRule ^/events-list /pagebase.php?pbid=3663 [QSA,L,I]
RewriteRule ^/events      /pagebase.php?pbid=3627 [QSA,L,I] 
```

现在任何以 开头的 url`/events-list`都将被重写为`pbid=3663`.

但是，为了防止 url like`/events-anything`匹配，最好在规则中包含*可选查询字符串*的匹配：

```
RewriteRule ^/events-list(\?.*)?$ /pagebase.php?pbid=3663 [QSA,L,I]
RewriteRule ^/events(\?.*)?$      /pagebase.php?pbid=3627 [QSA,L,I] 
```

# c# - 重命名 Json 对象字段名

> ID：14298894
> 
> 赞同：0
> 
> 时间：2013-01-12T23:04:42.710
> 
> 标签：c#, jquery, asp.net-mvc, entity-framework

我正在使用 MVC c# 我有一个对象

```
public class Person
{
        public int TypeId { get; set; }
        public string Code { get; set; }

} 
```

我有一个代码可以像这样为这个对象重新运行 JSON 对象

```
 return Json(personCodeStore.GetBusinessCodes()); 
```

但是当我在客户端收到这个时，我希望能够从

```
TypeId to value
Code  to text 
```

我不想使用像[MVC3 JSON 序列化这样的 DataContractSerializer：如何控制属性名称？](https://stackoverflow.com/questions/7260924/mvc3-json-serialization-how-to-control-the-property-names) 因为我使用的是 EF 5.x，每次我更新模型和运行 .tt 文件时，它都会覆盖我的更改，并且它在我不想要的所有视图上使用这个修改后的属性。

那么有没有一种方法可以在我序列化它时重命名它，或者一旦我使用 jquery 进入客户端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T23:07:06.983

您可以简单地使用 LINQ 并返回一个匿名对象来投影您的原始结果：

```
var businessCodes = personCodeStore.GetBusinessCodes();
return Json(businessCodes.Select(x => new 
{
    value = x.TypeId,
    text = x.Code
})); 
```

现在你会得到一些类似的东西：

```
[
    { "value": 1, text = "text 1" },
    { "value": 2, text = "text 2" },
    { "value": 3, text = "text 3" }
    ...
] 
```

# c - FastCGI 与 Ada

> ID：14298896
> 
> 赞同：4
> 
> 时间：2013-01-12T23:04:53.593
> 
> 标签：c, fastcgi, ada, mod-fcgid, mod-fastcgi

我找到了[http://support.zeus.com/zws/examples/2005/12/16/hello_world_in_perl_and_c](http://support.zeus.com/zws/examples/2005/12/16/hello_world_in_perl_and_c)这两个例子正在工作。

现在我为 Ada 尝试了这个，但两天后我就无法完成它。

**fcgi_stdio.ads**

```
with Interfaces.C;
with Interfaces.C.Strings;

package fcgi_stdio is
    function FCGI_Accept return Interfaces.C.int;
    pragma Import (C, FCGI_Accept, "FCGI_Accept");

    procedure FCGI_printf (str : Interfaces.C.Strings.chars_ptr);
    pragma Import (C, FCGI_printf, "FCGI_printf");
end fcgi_stdio; 
```

**测试.adb**

```
with fcgi_stdio;
with Interfaces.C;
with Interfaces.C.Strings;

procedure Test is
begin
    while Integer (fcgi_stdio.FCGI_Accept) >= 0 loop
        fcgi_stdio.FCGI_printf (Interfaces.C.Strings.New_String ("Content-Type: text/plain" & ASCII.LF & ASCII.LF));
        fcgi_stdio.FCGI_printf (Interfaces.C.Strings.New_String ("Hello World from Ada!" & ASCII.LF));
    end loop;
end Test; 
```

当我在控制台中运行它时，我收到以下错误：

```
$ ./test
raised STORAGE_ERROR : stack overflow or erroneous memory access 
```

Apache error_log 显示：

```
Premature end of script headers: test 
```

有谁知道我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T23:26:30.043

在 Mac OS X 上进行实验，似乎问题在于`FCGI_printf()`varargs 函数。它调用`FCGI_fprintf()`，也是可变参数：

```
int FCGI_fprintf(FCGI_FILE *fp, const char *format, ...)
{
    va_list ap;
    int n = 0;
    va_start(ap, format);          <------ crash here 
```

Ada 没有指定可变参数函数的标准方法，GNAT 也没有实现定义的方法。

GNAT[文档](http://gcc.gnu.org/onlinedocs/gnat_ugn_unw/Calling-Conventions.html#index-C-63)说解决方案是为 varargs 函数提供一个 C 包装器：

```
#include <fcgi_stdio.h>
int FCGI_printf_wrapper(const char *msg)
{
  return FCGI_printf(msg);
} 
```

并导入包装器：

```
procedure FCGI_printf (str : Interfaces.C.Strings.chars_ptr);
pragma Import (C, FCGI_printf, "FCGI_printf_wrapper"); 
```

该程序的另一个问题是，在 Ada 中，与 C 和许多其他语言不同，`"\n"`它不是一种在字符串中插入换行符的方法。尝试

```
fcgi_stdio.FCGI_printf
  (Interfaces.C.Strings.New_String ("Content-Type: text/plain" 
                                    & ASCII.LF & ASCII.LF)); 
```

[13.1.13 编辑]

# r - R 语言的类型安全

> ID：14298899
> 
> 赞同：15
> 
> 时间：2013-01-12T23:05:12.847
> 
> 标签：r, typing

维基百科指出 R 是“多范式：数组、面向对象、命令式、函数式、过程式、反射式和动态的。但是它的类型安全性呢？请用示例解释 R 中可能的类型安全的不同方面/种类，例如

*   我们会得到未经检查的运行时类型错误吗？
*   试图忽略数据类型的操作或函数调用是否被拒绝？
*   一旦发生类型匹配失败，是否存在明确定义的错误或异常行为（与未定义行为相反）？
*   数据对象是固定不变的类型吗？
*   可以避开类型系统吗？
*   它是否有一个复杂的、细粒度的类型系统和复合类型，每个对象是否都有一个明确定义的类型来禁止非法值和操作？
*   支持隐式类型转换（一些答案已经表明了这一点，谢谢）。

这些问题来自维基百科（http://en.wikipedia.org/wiki/Strong_typing），因为强/弱类型太模糊而无法要求（感谢 delnan 在这里的澄清）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T23:14:45.417

```
> a = TRUE
> a
[1] TRUE
> a[3] = 1
> a
[1]  1 NA  1
> a[5] = 3.14
> a
[1] 1.00   NA 1.00   NA 3.14
> a = "Ala"
> a
[1] "Ala" 
```

你可以看到它是动态的——我可以将任何东西分配给变量`a`并随意更改它。它也是~~弱类型，可以~~ *自由地执行隐式转换*- 看看我如何添加整数然后浮动到最初的布尔“向量”。您通常可以将布尔值视为数字，将数字视为字符串。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-12T23:35:16.527

运算符和函数的隐式强制在语言中很普遍（并且它具有参数回收）。大部分时间都发出警告是为了回收，而不是为了强制。

```
 a <- c(TRUE, FALSE)
     b <- c(-4:4)
 a < b
#[1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
#Warning message:
#In a < b : longer object length is not a multiple of shorter object length

  c(a,b)
# [1]  1  0 -4 -3 -2 -1  0  1  2  3  4

 a + b
[1] -3 -3 -1 -1  1  1  3  3  5
# Standard Warning message re: multiple of shorter object length

> data.frame( a =a, b=b)
Error in data.frame(a = a, b = b) : 
  arguments imply differing number of rows: 2, 9 
```

但是，如果参数的`data.frame`长度是最长向量的偶数倍，它们会在没有警告的情况下被回收：

```
> data.frame( a =c(TRUE,FALSE,TRUE), b=b)
      a  b
1  TRUE -4
2 FALSE -3
3  TRUE -2
4  TRUE -1
5 FALSE  0
6  TRUE  1
7  TRUE  2
8 FALSE  3
9  TRUE  4 
```

函数通过两个类系统进行多态化，其中一个依赖于表示目标类的句点字符，另一个依赖于对象类签名。（而且函数命名约定非常不稳定。）

我不同意 R 作为面向对象语言的前提。具有面向对象经验的人使用 R 时期望的行为与其表现出的行为不同。它是一种与检查给定对象的类系统一起调度的函数式语言，但它不像真正的面向对象语言。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-12T23:20:10.023

有一个很好的调查可以通过示例回答您的问题：[Evaluating the Design of the R Language](http://r.cs.purdue.edu/pub/ecoop12.pdf) by F.Morandat 等人。

摘要中的引用：

> R 是一种用于统计计算的动态语言，它结合了惰性函数特性和面向对象编程”

本文中的示例提供了“动态”、“懒惰”等这些关键词中的每一个（参见“3\. R 的三个面孔”一章）。

作者经历了以下几点：
– Core R 的语义
– 他们构建了一个 R 程序语料库并对其进行了评估。
– 实施评估
– 语言评估

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-13T02:39:16.370

R 基本上没有类型安全性。你可以做各种各样的事情，最终得到无意义的对象。

```
x <- lm(Sepal.Width ~ Sepal.Length, data=iris)
x
## Call:
## lm(formula = Sepal.Width ~ Sepal.Length, data = iris)
##
## Coefficients:
##  (Intercept)  Sepal.Length  
##      3.41895      -0.06188  

opar <- par(mfrow=c(2,2))

plot(x)                  # Note generated plot results.
par(opar)

class(x) <- "data.frame"
plot(x)
Error in data.matrix(x) : 
  (list) object cannot be coerced to type 'double'
x
## [1] coefficients  residuals     effects       rank          fitted.values assign        qr            df.residual  
## [9] xlevels       call          terms         model        
## <0 rows> (or 0-length row.names) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T23:09:34.950

R 是动态类型的。

示例：x <- "hi" (typeof(x) = character); x <- 1 (typeof(x) = double)

关于类型安全：x <- 1；y <- “一个”

x + y ：x + y 中的错误：二元运算符的非数字参数

但是 paste(x,y) （这是一个连接）有效：“1 a”

# jquery - 尝试使用加载了prototype.js 的jQuery UIDialog 时出错？

> ID：14298901
> 
> 赞同：3
> 
> 时间：2013-01-12T23:05:41.500
> 
> 标签：jquery, prototypejs, conflict

我正在尝试在加载了prototype.js 的JSP 页面中使用jQuery UIDialog。代码被执行，但不是对话框，而是页面上的文本。当原型被评论时，弹出 UI 对话框。我已经在使用 jQuery.noConflict(); 将 $ 的控制权恢复为原型。

```
Error : Uncaught TypeError: Object function (object) {
return Object.extend.apply(this, [this, object]);
} has no method 'push'                                  in jQuery-1.8.3.js: 2743 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:32:16.513

如果你使用prototype.js和jQuery，你必须先加载jQuery然后prototype.js，或者如果先加载prototype.js，则添加jQuery.noConflict()的第一行。

如果没有它，原型会保留大多数从 jQuery 获得相同选择器等的功能。

# ruby - 从 master 分支构建 ember.js 的问题

> ID：14298902
> 
> 赞同：0
> 
> 时间：2013-01-12T23:05:46.080
> 
> 标签：ruby, rubygems, ember.js, rake

我在安装了 OSX 10.7.5 的 macbook pro 上，我尝试了几次按照 github 页面上的步骤构建 ember.js，基本上在克隆的存储库中运行“rake dist”。但它不起作用。当我运行“rake dist”时，请在我的控制台输出下方找到。由于我不是红宝石专家，我想知道是否有人可以指出我的方向，因为我不明白阻止我构建 ember.js 的错误。

```
[亚历克斯@io][~/workspace/ember.js][大师]
➜ rake dist --trace
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/rake_module.rb:25：警告：冗余嵌套重复运算符
** 调用 dist (first_time)
** 执行 dist
构建余烬...
耙中止！

/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:142:in `exec_runtime'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:28:in `block in exec'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:27:in `exec'
/Users/alex/.bundler/ruby/1.9.1/uglifier-2f6c31a67d6d/lib/uglifier.rb:137:in `really_compile'
/Users/alex/.bundler/ruby/1.9.1/uglifier-2f6c31a67d6d/lib/uglifier.rb:74:in `compile'
/Users/alex/.bundler/ruby/1.9.1/uglifier-2f6c31a67d6d/lib/uglifier.rb:47:in `compile'
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-web-filters-1a6dc173776b/lib/rake-pipeline-web-filters/uglify_filter.rb:62:in `block in generate_output'
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-web-filters-1a6dc173776b/lib/rake-pipeline-web-filters/uglify_filter.rb:58:in `each'
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-web-filters-1a6dc173776b/lib/rake-pipeline-web-filters/uglify_filter.rb:58:in `generate_output'
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-50b8d77b703c/lib/rake-pipeline/filter.rb:218:in `block (3 levels) in generate_rake_tasks'
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-50b8d77b703c/lib/rake-pipeline/file_wrapper.rb:135:in `create'
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-50b8d77b703c/lib/rake-pipeline/filter.rb:218:in `block (2 levels) in generate_rake_tasks'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:228:in `call'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:228:in `block in execute'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:223:in `each'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:223:in `execute'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/alex/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-50b8d77b703c/lib/rake-pipeline/dynamic_file_task.rb:154:in `invoke_with_call_chain'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:152:in `invoke'
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-50b8d77b703c/lib/rake-pipeline/dynamic_file_task.rb:60:in `invoke'
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-50b8d77b703c/lib/rake-pipeline.rb:328:in `block (2 levels) in invoke'
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-50b8d77b703c/lib/rake-pipeline.rb:328:in `each'
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-50b8d77b703c/lib/rake-pipeline.rb:328:in `block in invoke'
:10:在“同步”中
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-50b8d77b703c/lib/rake-pipeline.rb:321:in `invoke'
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-50b8d77b703c/lib/rake-pipeline/project.rb:126:in `each'
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-50b8d77b703c/lib/rake-pipeline/project.rb:126:in `block in invoke'
:10:在“同步”中
/Users/alex/.bundler/ruby/1.9.1/rake-pipeline-50b8d77b703c/lib/rake-pipeline/project.rb:112:in `invoke'
/Users/alex/workspace/ember.js/Rakefile:43:in `block in '
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:228:in `call'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:228:in `block in execute'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:223:in `each'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:223:in `execute'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/alex/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/task.rb:152:in `invoke'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/application.rb:143:in `invoke_task'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/application.rb:101:in `each'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/application.rb:101:in `block in top_level'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/application.rb:110:in `run_with_threads'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/application.rb:95:in `top_level'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/application.rb:73:in `block in run'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/lib/rake/application.rb:70:in `run'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.6/bin/rake:37:in `'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/bin/rake:19:in `load'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/bin/rake:19:in `'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `eval'
/Users/alex/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `'
任务：TOP => /Users/alex/workspace/ember.js/tmp/rake-pipeline-7aa53b2ead15d9e299f5cd1196d85943d735c070/rake-pipeline-3-tmp-7/ember-runtime.min.js
```

`bundle install`这是我在 master 分支的 repo 的根目录中运行时的输出

```
➜ 捆绑安装
使用 rake (0.9.6)
使用彩色 (1.2)
使用 multi_json (1.3.7)
使用 execjs (1.4.0)
使用 multipart-post (1.1.5)
使用法拉第 (0.8.4)
使用哈希 (1.2.0)
使用 nokogiri (1.5.5)
使用 httpauth (0.2.0)
使用 jwt (0.1.5)
使用机架 (1.4.1)
使用 oauth2 (0.8.0)
使用 github_api (0.8.1)
使用 mime 类型 (1.19)
使用 rest-client (1.6.7)
使用来自 https://github.com/pangratz/github_downloads.git 的 github_downloads (0.1.3) (在 master)
使用 json (1.7.6)
使用听 (0.6.0)
使用踢球者 (2.6.1)
使用雷神 (0.16.0)
使用来自 https://github.com/livingsocial/rake-pipeline.git 的 rake-pipeline (0.8.0) (在 master)
使用来自 https://github.com/wycats/rake-pipeline-web-filters.git 的 rake-pipeline-web-filters (0.6.0) (在 master)
使用来自 https://github.com/lautis/uglifier.git 的 uglifier (1.3.0) (在 master)
使用捆绑器 (1.2.3)
您的捆绑包已完成！使用 `bundle show [gemname]` 查看捆绑的 gem 的安装位置。
```

提前致谢， 亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:17:53.457

你有安装nodejs吗？
从文档...

如果您在 Linux 下构建，您将需要一个 JavaScript 运行时来进行缩小。您可以安装 nodejs 或 gem install therubyracer。

假设它可能与 Mac 相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T22:41:17.103

我让它工作：

```
export RUBYOPT='-E utf-8' 
```

成功了。我要结束这个问题。

# cuda - 您可以使用 Amazon EC2 GPU 实例进行实时渲染吗？

> ID：14298910
> 
> 赞同：5
> 
> 时间：2013-01-12T23:06:44.830
> 
> 标签：cuda, amazon-ec2, gpgpu

我需要一台装有不错 3D 卡的远程 PC/服务器，以执行实时 3D 渲染……想象一下在远程服务器上运行 3D 游戏，这是一个很好的比较。

由于显而易见的原因，大多数 VPS 和专用服务器没有良好的图形功能，但亚马逊确实有特殊的 GPU 实例。它们被出售用于 GPGPU 计算，使用 GPU 使用 CUDA 等工具进行数据处理，但我想知道它们是否也可以用于实时 3D 渲染。

任何人都可以提供一个可靠的答案吗？

编辑：我应该添加它是我自己的 3d 代码，我想知道 EC2 为此目的的功能，而不是通用的 EC2 问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:44:22.957

Amazon GPU 服务器配备了 NVidia Tesla GPU。虽然它们最擅长 GPGPU，但它们也具有超过平均水平的实时图形渲染能力。尽管在这方面它们不如 NVidia GTX 卡（请参阅 NVidia 网站上的 GPU 规格） .

现在 , 你 可以 使用 Amazon 进行 实时 渲染 但 你 的 瓶颈 将 是 网络 带宽 . 特斯拉 卡 可以 与 OpenGL 一起 以 非常 快 的 速度 将 图形 渲染 到 离屏 缓冲区 , 但是 你 应该 找到 方法 来 读取 每个 渲染 的 像素 .帧并以可接受的帧速率将其流式传输到客户端。从 GPU 读取的 OpenGL 像素已经非常慢（尽管您可以使用 PBO 乒乓球进行一些黑客攻击）但我真的不认为您可以使用标准分辨率流式传输像素包（ 800x600 甚至更少）来自远程服务器，以便客户端以可接受的最低频率获取它。我相信将来有可能:)

PS 我的回答是基于个人使用 Amazon EC2 的经验

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T15:11:38.220

是的，amazon EC2 非常适合渲染。我已经为一个移动应用程序大规模地做这个超过 3 年了。对于我从 EC2 迁移到 S3/CloudFront 的短动画，吞吐量一直很好。

# c# - 如何将焦点从新表单更改为 Form1？

> ID：14298911
> 
> 赞同：-1
> 
> 时间：2013-01-12T23:06:47.047
> 
> 标签：c#

我有一个按钮单击，我单击它会打开一个新表单。

然后我可以单击新的表单列表框和所有内容。

现在，当我想返回 Form1 并单击菜单或按钮时，我需要单击它两次，因为控件/焦点位于新打开的表单上。

在不先单击它的情况下将焦点/控件带回 Form1 的最佳方法是什么？

也许使用一个事件，如果我将鼠标移到 Form1 区域上，它会将焦点/控件带到 Form1 上？

这就是我打开/显示新表单的方式：

```
if (toolStripComboBox2.SelectedIndex == -1 && toolStripComboBox1.SelectedIndex == -1)
{
}
else
{
    Lightnings_Extractor.Lightnings_Mode lightningsmode1 = new Lightnings_Extractor.Lightnings_Mode(this);
    lightningsmode1.Show();
} 
```

即使新表单打开而不关闭，我也想这样做，因为它会返回到 Form1，因此控件/焦点将位于 Form1 上。而且，如果我关闭/退出新表单，则控件/焦点将自动位于 Form1 上，而无需先单击它区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:21:15.513

您可以使用[MouseEnter](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseenter.aspx)事件来检测鼠标何时悬停在表单上。要让它获得焦点，你只需要用`This.Focus()`它把它带到前面。

**编辑**：代码将在`form1`；您要关注的表单。

希望这对你有帮助！

# mongodb - 结合MongoDB中不同文档的两个字段

> ID：14298912
> 
> 赞同：7
> 
> 时间：2013-01-12T23:06:53.047
> 
> 标签：mongodb

我在一个集合中有这些文件：

```
 {topic : "a",
    messages : [ObjectId("21312321321323"),ObjectId("34535345353"),...]
   },
   {topic : "b,
    messages : [ObjectId("1233232323232"),ObjectId("6556565656565"),...]
   } 
```

是否有可能通过消息字段的组合获得结果？我喜欢得到这个，例如：

```
 {[
       ObjectId(""),ObjectId(""),ObjectId(""),ObjectId("")
     ]} 
```

我认为 MapReduce 可以做到这一点，但在我的情况下，这些文档没有任何共同点。现在我正在使用 javascript 和循环在后端执行此操作，但我认为这不是最佳选择。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T23:18:29.407

您可以使用[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)[`$group`](http://docs.mongodb.org/manual/reference/aggregation/group/)中的运算符。当然，要使用聚合框架，您需要确保您在 MongoDB 2.2 或更高版本上运行。

如果与您一起使用，[`$push`](http://docs.mongodb.org/manual/reference/operator/push/)您将获得连接在一起的所有消息列表。

```
db.myCollection.aggregate({ $group: { messages: { $push: '$messages' } } }); 
```

如果与您一起使用，[`$addToSet`](http://docs.mongodb.org/manual/reference/operator/addToSet/)则只会获得不同的值。

```
db.myCollection.aggregate({ $group: { messages: { $addToSet: '$messages' } } }); 
```

如果您想先过滤候选文档，您可以使用[`$match`](http://docs.mongodb.org/manual/reference/aggregation/match/).

```
db.myCollection.aggregate([
    { $match: { topic: { $in: [ 'a', 'b' ] } } },
    { $group: { matches: { $sum: 1 }, messages: { $push: '$messages' } } }
]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T23:40:24.977

一种选择是使用聚合框架。

但是，如果您计划获得大量结果（不仅仅是“轻量级”结果）、超过 16MB 大小的结果文档或使用过多的系统内存，则只需循环遍历手动收集并连接结果（正如您建议的那样，您现在可能正在做）或冒险 mongodb 抛出异常。

聚合限制可在此页面底部找到：

[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

鉴于限制，您可能只想使用[find](http://docs.mongodb.org/manual/reference/method/db.collection.find/#db.collection.find)和投影来返回 just `messages`。

（对于这样的事情，我强烈建议您进行一些性能基准测试，以将选项与您服务器上的数据进行比较，因为“Internet”现在建议有些人发现聚合支持比其他技术慢） .

# java - 有没有办法在 objectDB 的资源管理器中删除表？

> ID：14298914
> 
> 赞同：1
> 
> 时间：2013-01-12T23:07:19.600
> 
> 标签：java, database, object-oriented-database, objectdb

有没有办法在 objectDB 的资源管理器中删除一个表（或者有没有办法删除一个表）？

我知道我可以执行“删除”查询，但该表仍然存在，这对我来说很烦人，因为我创建了很多测试实体，而这些表只是闲置而没有太多用处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:43:39.437

请在 ObjectDB 网站上查看[此论坛主题。](http://www.objectdb.com/database/forum/371)

关于重新启动 ID，按照 vels4j 的建议设置一个新的生成器应该可以工作。

# c# - 使用 LINQ 进行数据透视

> ID：14298915
> 
> 赞同：0
> 
> 时间：2013-01-12T23:07:25.200
> 
> 标签：c#, linq

我遇到了这个问题..我有一个以下格式的 CSV 文件（客户，购买的物品对）：

```
customer1 item1
customer1 item2
customer1 item3
customer2 item4
customer2 item2
customer3 item5
customer3 item1
customer3 item2
customer4 item1
customer4 item2
customer5 item5
customer5 item1 
```

现在，我希望在查询结果中显示：

```
item x; item y; how many customers have bought itemx and item together 
```

例如：

```
item1 item2 3 (because cust1 and cust2 and cust3 bought item1 and item2 together)
item1 item5 1 (because cust5 and cust3 bought item1 and item5 together) 
```

该查询返回客户成对购买的所有可能的商品组合。另请注意，Pair(x, y) 与 Pair(y, x) 相同。

SQL 查询如下所示：

```
SELECT a1.item_id, a2.item_id, COUNT(a1.cust_id) AS how_many_custs_bought_both
  FROM data AS a1
INNER JOIN data AS a2
  ON a2.cust_id=a1.cust_id AND a2.item_id<>a1.item_id AND a1.item_id<a2.item_id
GROUP BY a1.item_id, a2.item_id 
```

您将如何在 C# 中做到这一点 1) 使用常规 for/foreach 循环 2) 使用 LINQ ？

我首先尝试在 LINQ 中执行此操作，但当我注意到 LINQ 不支持 join 子句中的多个 equals 关键字时卡住了。然后我尝试使用普通循环，但是，它变得如此低效以至于它每秒只能处理 30 行（CSV 文件行）。

请指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:34:27.700

也许：

```
var lines = File.ReadLines(csvFilePath);
var custItems = lines
    .Select(l => new { split = l.Split() })
    .Select(x => new { customer = x.split[0].Trim(), item = x.split[1].Trim() })
    .ToList();

var groups = from ci1 in custItems
             join ci2 in custItems
             on ci1.customer equals ci2.customer
             where ci1.item != ci2.item 
             group new { Item1 = ci1.item, Item2 = ci2.item } by new { Item1 = ci1.item, Item2 = ci2.item } into ItemGroup
             select ItemGroup;

var result = groups.Select(g => new
{
    g.Key.Item1,
    g.Key.Item2,
    how_many_custs_bought_both = g.Count()
}); 
```

请注意，`ToList`由于自联接，当文件很大时，物化很重要。

```
{ Item1 = item1, Item2 = item2, how_many_custs_bought_both = 3 }
{ Item1 = item1, Item2 = item3, how_many_custs_bought_both = 1 }
{ Item1 = item2, Item2 = item1, how_many_custs_bought_both = 3 }
{ Item1 = item2, Item2 = item3, how_many_custs_bought_both = 1 }
{ Item1 = item3, Item2 = item1, how_many_custs_bought_both = 1 }
{ Item1 = item3, Item2 = item2, how_many_custs_bought_both = 1 }
{ Item1 = item4, Item2 = item2, how_many_custs_bought_both = 1 }
{ Item1 = item2, Item2 = item4, how_many_custs_bought_both = 1 }
{ Item1 = item5, Item2 = item1, how_many_custs_bought_both = 2 }
{ Item1 = item5, Item2 = item2, how_many_custs_bought_both = 1 }
{ Item1 = item1, Item2 = item5, how_many_custs_bought_both = 2 }
{ Item1 = item2, Item2 = item5, how_many_custs_bought_both = 1 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T00:03:04.393

使用 LINQ（并遵循 Tim 答案的前 5 行）将链式方法语法与连接部分的查询语法相结合：

```
var custItems =  new [] {
    new { customer = 1, item = 1 },
    new { customer = 1, item = 2 },
    new { customer = 1, item = 3 },
    new { customer = 2, item = 4 },
    new { customer = 2, item = 2 },
    new { customer = 3, item = 5 },
    new { customer = 3, item = 1 },
    new { customer = 3, item = 2 },
    new { customer = 4, item = 1 },
    new { customer = 4, item = 2 },
    new { customer = 5, item = 5 },
    new { customer = 5, item = 1 }
};
};

var pairs = custItems.GroupBy(x => x.customer)
         .Where(g => g.Count() > 1)
         .Select(x =>  (from a in x.Select( y => y.item )
                        from b in x.Select( y => y.item )
                        where a < b //If you want to avoid duplicate (a,b)+(b,a)
                        // or just: where a != b, if you want to keep the dupes.
                        select new { a, b}))
         .SelectMany(x => x)
         .GroupBy(x => x)
         .Select(g => new { Pair = g.Key, Count = g.Count() })
         .ToList();

pairs.ForEach(x => Console.WriteLine(x)); 
```

**编辑：**忘记了 OP 想要对出现计数，添加了另一个 .GroupBy() 魔法。

**编辑：**完成示例以显示它将输出的内容：

```
{ Pair = { a = 1, b = 2 }, Count = 3 }
{ Pair = { a = 1, b = 3 }, Count = 1 }
{ Pair = { a = 2, b = 3 }, Count = 1 }
{ Pair = { a = 2, b = 4 }, Count = 1 }
{ Pair = { a = 1, b = 5 }, Count = 2 }
{ Pair = { a = 2, b = 5 }, Count = 1 } 
```

**编辑：**回滚并将字符串更改为整数，因为 OP 显示了一个以整数作为 ID 的数据集，这样就不需要`.GetHashCode()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T22:07:15.273

你可以这样写：

```
IDictionary<int, int> pivotResult = customerItems.ToLookup(c => c.Customer)
                                 .ToDictionary(x=>x.Key, y=>y.Count()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T23:30:47.730

工作 LINQ 示例，不太漂亮！

```
using System;
using System.Collections.Generic;
using System.Linq;

class Data
{
    public Data(int cust, int item)
    {
        item_id = item;
        cust_id = cust;
    }
    public int item_id { get; set; }
    public int cust_id { get; set; }

    static void Main(string[] args)
    {
        var data = new List<Data>
                       {new Data(1,1),new Data(1,2),new Data(1,3),
                        new Data(2,4),new Data(2,2),new Data(3,5),
                        new Data(3,1),new Data(3,2),new Data(4,1),
                        new Data(4,2),new Data(5,5),new Data(5,1)};

           (from a1 in data
            from a2 in data
            where a2.cust_id == a1.cust_id && a2.item_id != a1.item_id && a1.item_id < a2.item_id
            group new {a1, a2} by new {item1 = a1.item_id, item2 = a2.item_id}
            into g
            select new {g.Key.item1, g.Key.item2, count = g.Count()})
            .ToList()
            .ForEach(x=>Console.WriteLine("{0} {1} {2}",x.item1,x.item2,x.count))
            ;
           Console.Read();
    }
} 
```

输出：

```
1 2 3
1 3 1
2 3 1
2 4 1
1 5 2
2 5 1 
```

# java - JavaDoc 给出完全限定的类名......如何缩写？

> ID：14298916
> 
> 赞同：5
> 
> 时间：2013-01-12T23:07:25.727
> 
> 标签：java, javadoc, maven-javadoc-plugin

**问题**

我正在运行`mvn javadoc:javadoc`以生成 JavaDoc，我对结果感到满意，除了一件事：它为来自第三方库或我们自己的代码库的任何类提供了完全限定的类名。例如，

它为返回这些类之一的方法提供了**com.project.beans.BeanA**和**com.project.beans.BeanB的返回类型。**

它为采用 JSON 对象的方法提供了**org.codehaus.jettison.json.JSONObject的参数类型。**（而它为采用 java.lang.Integer 的方法提供了 Integer 的参数类型。）

**问题**

为了便于阅读，有没有办法为这些类生成简写名称？即 BeanA、BeanB、JSONObject。

有没有办法在没有任何 XML 配置的情况下做到这一点？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T23:27:17.993

我相信您想要的是可以直接从命令中设置的[`-noqualifier`javadoc 选项。](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javadoc.html#noqualifier)[`maven javadoc:javadoc`](http://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html#noqualifier)

通常将参数传递给一个 Maven 插件，你就像其他 Java 程序一样使用`-D`，在这种情况下，它会是`mvn -Dnoqualifier=all javadoc:javadoc`，但据我所知，`noqualifier`似乎没有在插件源中设置为表达式，所以我没有真的不知道你是否可以通过命令行传递它。

如果它不起作用，您可以修改您的`pom.xml`并将其添加到插件`<noqualifier>all</noqualifier>`的配置中。`javadoc`或者，您可以在 pom 中创建一个属性，该属性将作为`<noqualifier>`标记的值给出，但这次可以使用命令行覆盖该属性。

# java - 使用 Java 调高/调低计算机音量？

> ID：14298917
> 
> 赞同：4
> 
> 时间：2013-01-12T23:07:34.160
> 
> 标签：java, audio, javasound

我想通过一个命令来上下调节计算机的主音量（100%/0%）。我看到我可以使用`FloatControl`，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T23:10:47.117

看看[使用 JavaSound 控制主音量](http://www.coderanch.com/t/492931/java/java/Adjusting-master-volume-Windows-XP)。

从链接：

```
Mixer.Info [] mixers = AudioSystem.getMixerInfo();  
System.out.println("There are " + mixers.length + " mixer info objects");  
for (Mixer.Info mixerInfo : mixers)  
{  
    System.out.println("Mixer name: " + mixerInfo.getName());  
    Mixer mixer = AudioSystem.getMixer(mixerInfo);  
    Line.Info [] lineInfos = mixer.getTargetLineInfo(); // target, not source  
    for (Line.Info lineInfo : lineInfos)  
    {  
        System.out.println("  Line.Info: " + lineInfo);  
        Line line = null;  
        boolean opened = true;  
        try  
        {  
            line = mixer.getLine(lineInfo);  
            opened = line.isOpen() || line instanceof Clip;  
            if (!opened)  
            {  
                line.open();  
            }  
            FloatControl volCtrl = (FloatControl)line.getControl(FloatControl.Type.VOLUME);  
            System.out.println("    volCtrl.getValue() = " + volCtrl.getValue());  
        }  
        catch (LineUnavailableException e)  
        {  
            e.printStackTrace();  
        }  
        catch (IllegalArgumentException iaEx)  
        {  
            System.out.println("    " + iaEx);  
        }  
        finally  
        {  
            if (line != null && !opened)  
            {  
                line.close();  
            }  
        }  
    }  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T23:11:40.947

`FloatControl`可以在播放特定音频剪辑时使用：

```
AudioInputStream audioInputStream = 
   AudioSystem.getAudioInputStream(new File("MyClip.wav"));
Clip clip = AudioSystem.getClip();
clip.open(audioInputStream);
FloatControl volumeControl = 
    (FloatControl) clip.getControl(FloatControl.Type.VOLUME);
volumeControl.setValue(10.0f); // Increase volume by 10 decibels.
clip.start(); 
```

另请参阅：[使用控件处理音频](http://docs.oracle.com/javase/tutorial/sound/controls.html)

# c# - WinForms 客户端与远程 SQL Server 通信和共享数据文件的最佳方式

> ID：14298920
> 
> 赞同：1
> 
> 时间：2013-01-12T23:08:06.240
> 
> 标签：c#, sql-server, wcf, ado.net, vpn

经过大量谷歌搜索并冒着提出愚蠢问题的风险，我可以使用一些帮助。我正在开发一个 C# WinForms 客户端应用程序，使用 ADO.NET 从位于 Internet 上的 SQL Server 2012 数据库读取/写入数据。同样的应用程序还需要上传/下载数据文件。客户端应用程序只会被少数员工（永远）使用。员工都在不同的地方。数据库只有大约 20 MB。将定期单独访问大约 100 个数据文件，总大小约为 300 MB。SQL Server 2012 在我们可以完全控制的（非虚拟）Windows Server 2008 R2 机器上运行。客户端应用程序将在 Win-XP 和 Win-7 机器上运行。

优先事项是 1\. 互联网安全——让黑客远离 Windows Server 机器和客户端/服务器通信。2\. 性能。3\. 简单。企业安全性和可扩展性不是问题。此外，如果解决方案覆盖复杂，则性能并不那么重要。

我可以真正使用帮助的两个相关问题：

1.  鉴于上述优先事项，与数据库通信的最佳方式是什么？我发现的仅有的两个选项是排他性的；WCF 服务或直接通过 VPN。

2.  再次考虑到上述优先事项，上传/下载数据文件的最佳方式是什么？我确信使用 VPN、WCF、FTP 有很多选择；但我不知道任何细节。此外，使用 SQL Server 2012 FileTable 看起来很有希望，但我不确定它在网络上是如何工作的。备份/恢复以及能够对数据进行全文搜索将是不错的功能，但不是必需的。

我知道什么是 VPN，但从未将其用于这些目的。我知道 PPTP 存在一些安全问题，但我们暂时不会升级 XP 机器。我知道什么是 WCF 服务，但从未编写过。我也不知道在这种情况下 SOAP 或 REST 是否更好。我在 SQL Server 中构建了一个 FileTable，但我不知道如何远程访问数据。我对 C#、ADO.NET 和 SQL Server 有相当的了解。

我意识到这些都是带有主观答案的大问题。尽管如此，任何想法或朝着正确方向的推动都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:00:21.767

保持简单并使用标准机制。我的建议如下：

*   构建一个能够执行所需操作的 WCF 服务。您可以构建 SOAP 或 RESTful 服务。我在这里的一般指导是构建一个 RESTful 服务，因为您正在传输文件，而且这与 REST 集成度更高。使用 SOAP，您需要调整一些设置来传输大文件。
*   使用 SSL 保护服务，**保持简单**。VPN 增加了一层复杂性，在这种情况下*很可能*不需要。此外，它只会使用户的体验变得不那么友好。
*   我**不建议**根据您的需要使用`FileTable`SQL Server 2012 中的。您拥有服务器，因此当您发送和接收文件时，处理文件系统会更加直接。
*   您还可以构建一个简单的表单身份验证过程，为用户创建会话密钥并将其传回。我不确定这是否必要，但如果您需要额外的层，只需将其作为操作之一。然后可以将该会话密钥传递给每个方法并在执行操作之前进行验证。**这将是安全的，因为您使用的是 SSL。**

[这是一个教程](http://jamesheppinstall.wordpress.com/2012/08/12/restful-web-services-with-windows-communication-foundation/)，它将帮助您构建一个 RESTful WCF 服务，它是相当新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:40:12.997

我的建议是部署一个 VPN 服务器来提供您正在寻找的安全性。有许多不错的 VPN 服务器可用，谷歌搜索应该提供许多不同价位的选项。

一旦您部署了 VPN 服务器（以及您希望能够访问数据库的不在本地网络上的所有计算机的客户端），您就可以使用 ADO.NET 来访问数据库。ADO.NET 将在 VPN 后面无缝运行。

根据您的问题，我假设文件存储在数据库外部的文件系统中，并且数据库仅引用文件。如果是这种情况，您可以使用任意数量的选项来下载文件，但 FTP 是经过时间考验且易于实施的解决方案。在您的情况下，还有其他可能会或可能不会更好地工作（请参阅[此处](https://stackoverflow.com/questions/1821680/peer-to-peer-file-transfer-c-sharp)了解一些选项）。

# php - 时间戳检查是否超过 12 小时

> ID：14298926
> 
> 赞同：11
> 
> 时间：2013-01-12T23:10:11.430
> 
> 标签：php, timestamp

如何检查时间戳是否超过 12 小时？

我需要使链接工作 12 小时，之后我需要显示错误消息。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-12T23:19:17.830

```
$dateFromDatabase = strtotime("2012-12-04 12:05:04");
$dateTwelveHoursAgo = strtotime("-12 hours");

if ($dateFromDatabase >= $dateTwelveHoursAgo) {
    // less than 12 hours ago
}
else {
    // more than 12 hours ago
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T00:16:00.507

**#1。在数据库中进行比较：**

如果您有*TIMESTAMP*字段：

```
timestampField < (CURRENT_TIMESTAMP() - 3600*12) 
```

如果您有*DATETIME*字段：

```
datetimeField < DATE_SUB(NOW(), INTERVAL 12 HOUR) 
```

* * *

**#2。在 PHP 中进行比较：**

```
$c = new DateTime;
$d = new DateTime('you timestamp or datetime');
if ($c < $d->modify('-12 hour')) { ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T23:45:18.137

我猜你的意思是一个unix时间戳。如果是这样，您可以应用简单的数学：

```
// a unix-timestamp is the time since 1970 in seconds
// 60 seconds = 1 minute, 60 minutes = 1 hour, 12 hours
// so this calculates the current timestamp - 12 hours and checks
// if 12 hours ago the timestamp from your database lay in the future
if ( $timestamp > (time() - 60*60*12) ) {
    // show your link
} else {
    // 12 hours are up
    // give your error message
} 
```

如果您的数据库返回格式化的日期（例如带有时间戳/日期字段类型的 mysql），您必须首先使用[`strtotime()`](http://php.net/manual/en/function.strtotime.php)获取 unix 时间戳。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T23:49:11.457

我假设您有一个在下载链接中使用的唯一密钥。只需在语句中包含时间戳子句`WHERE`：

```
<?php

$timestamp = date('Y-m-d H:i:s', strtotime('-12 hours'));

$sql = "SELECT * FROM `links` WHERE `key` = :key AND `created` > :timestamp";
$stmt = $db->prepare($sql);
$stmt->bindParam(':key', $key, PDO::PARAM_STR);
$stmt->bindParam(':timestamp', $timestamp, PDO::PARAM_STR);
$stmt->execute();
$row = $stmt->fetchObject(); 
```

# jquery - 即使在动态元素上也如何触发？

> ID：14298929
> 
> 赞同：-1
> 
> 时间：2013-01-12T23:10:43.430
> 
> 标签：jquery

我有一些由 ajax 请求创建的单选按钮，使用如下：

```
document.getElementById("clientresult").innerHTML=xmlhttp.responseText; 
```

单选按钮是从另一个文件输出的。如何使用 $('input:radio').change() 在选择这些单选按钮时触发事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:35:36.953

这已经被问过很多次了，但是你去

为了`on()`处理尚不存在的事件，它需要绑定到一个将成为这些未来元素的父级的事件。

```
$(document).on('change', 'input:radio', function(){
    // whatever you want to happen
}); 
```

`document`是包罗万象的，但我相信绑定到搜索节点较少的东西会更快（如果这是正确的术语），例如

```
<div id="clientresult">
    <!-- inputs will be created in here -->
</div>

$('#clientresult').on('change', 'input:radio', function(){
    // whatever you want to happen
}); 
```

# haskell - 为什么 (sum $ takeWhile (<10000000) [1..]) 使用这么多内存？

> ID：14298930
> 
> 赞同：10
> 
> 时间：2013-01-12T23:10:44.517
> 
> 标签：haskell

这是我在控制台中得到的：

```
ghci> sum $ takeWhile (<10000000) [1..]
49999995000000
(11.96 secs, 2174569400 bytes) 
```

超过2GB！我想这`sum`可以丢弃它已经求和的任何东西。你会怎么写这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T23:25:50.857

您正在创建一千万个`Integer`s 和许多列表单元格。此外，您正在运行解释代码，如果您通过编译器运行它，那将在一定程度上减少分配。

主要问题是解释器根本没有优化，因此`sum`使用了构建**巨大**thunk 的惰性变体。`sum`丢弃它已经消耗的列表部分就好了，但它用一个 thunk 替换它以随后计算结果，所以

```
sum [1,2,3,4 ...] 
```

变成

```
(...((((0 + 1) + 2) + 3) + 4) + ...) 
```

之后。这不是最佳替换，因为`Integer`s 的添加是严格的。

在 ghci 提示符下，你应该写

```
Prelude Data.List> foldl' (+) 0 $ takeWhile (< 10000000) [1 .. ]
49999995000000
(1.41 secs, 1443355832 bytes) 
```

解决这个问题。在一个编译好的（当然是优化的）程序中，`sum`可以正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-12T23:25:03.290

[这看起来与http://www.haskell.org/haskellwiki/Memory_leak](http://www.haskell.org/haskellwiki/Memory_leak)中描述的完全一样

所以这里的解决方案可能是`foldl' (+) 0 $ takeWhile (<10000000) [1..]`（需要`import Data.List`）。

可能有一个更好的解决方案，因为我只是一个 Haskell 新手并且也很好奇。=^.^=（**编辑：**请阅读下面的第一条评论：-P）

# mysql - MySQL：最好是几百万行的几张表或几百行的几千张表

> ID：14298932
> 
> 赞同：3
> 
> 时间：2013-01-12T23:10:50.213
> 
> 标签：mysql, database-design, scalability

我正在构建一个 Web 应用程序，我想从一开始就对其进行扩展。我对数据库的可扩展性不是很感兴趣，我面临着这样的疑问：

我应该使用几张具有数百万行的表，还是应该将内容拆分成数百张表，如果不是数千张预计有数百行的表。

我可以同时走两条路线，但我不知道从长远来看哪一条路线会更好。

我在这方面找到了一些信息，但它没有多大帮助：[MySQL Whats better for speed one table with number of rows or manages multiple tables?](https://stackoverflow.com/questions/13765716/mysql-whats-better-for-speed-one-table-with-millions-of-rows-or-managing-multipl)

基本上我需要知道，垂直或水平扩展数据库更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T23:25:52.523

如果查询调整得好，数据库将提供足够快的响应，在查询中进行非常小的调整时，速度可能会发生神奇的变化。

但是，您不希望在数据库中进行讲座。对于您的问题：这里最重要的是实现规范化形式。

您的表应该是可管理且无[冗余](http://en.wikipedia.org/wiki/Data_redundancy)的。为避免冗余，您需要尽可能地[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的表。规范化形式高达 6NF，但我认为[Boyce–Codd](http://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form)规范化形式应该足够了，如果您在该领域没有经验的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T00:23:30.073

伊斯梅特说得好。然而，在处理网络时，有时人们有一些他们想要跟踪的“聚合”或其他总数，并且可能会有些耗时。

如果您可能有这样的类别，那么根据需要为这些条目“附加”一些额外的列可能是一个很好的考虑。然后，当将记录添加到任何表时，可以运行插入/更新触发器来仅更新这些值，而不必显式地重新运行从数百万条记录中提取的完整查询并给您带来性能损失。

# javascript - 访问回调 arg

> ID：14298937
> 
> 赞同：0
> 
> 时间：2013-01-12T23:11:45.960
> 
> 标签：javascript, television

我想在使用遥控器和鼠标（电视应用程序）在弹出窗口上单击确定按钮后调用事件。当我使用鼠标单击此按钮时，您是否知道如何通过遥控器上的 ENTER 访问通过弹出回调（单击确定按钮后）获得的 arg 变量？

```
function PopUp("napis", function callback (arg) {
 if (arg === sth)
  doSth();
})

$('button').click (function () { 
 if (arg === sth) //how can I access arg which will be the same with arg in callback function
  doSth(); 
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:15:25.443

该变量仅在该范围内可用，因此要在其他地方访问它，您可以将另一个变量设置为相同的值。像这样的东西：

```
var myArg;

funkcja PopUp("napis", function callback (arg) {
 myArg = arg;
 if (arg === sth)
  doSth();
})

$('button').click (function () { 
 if (myArg === sth) //this will access myArg which will be set in the callback.
  doSth(); 
}) 
```

# c++ - 这在 C++ 构造函数中做了什么？

> ID：14298938
> 
> 赞同：0
> 
> 时间：2013-01-12T23:12:09.057
> 
> 标签：c++, syntax, constructor, default-constructor

我在教科书中看到了这一点，但这本书并没有解释它的实际作用，以及我为什么要这样做。这是类似于书中示例的内容：

```
 class MyClass
 {
      public:
           MyClass(int initial_capacity = 20);
      private:
           int capacity;
 } 
```

我不能`initial_capacity`在实现中使用，我什至什么都不能实现，所以我很困惑这是为了什么？它是否以某种方式将容量设置为20？这是一个默认构造函数吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T23:17:17.063

可能缺少构造函数的实现。例如，如果构造函数看起来像这样：

```
MyClass(int initial_capacity = 20) {
     capacity = initial_capacity;
} 
```

如果您以这种方式创建对象：

```
MyClass a(10); 
```

容量将设置为 10。另一方面，如果您要创建这样的对象：

```
MyClass a; 
```

容量将设置为 20。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T23:13:21.717

这是一个带有默认参数的构造函数。这意味着您可以使用数字或不使用数字来调用它。如果您不带号码呼叫，则与您呼叫号码 20 相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T23:14:14.140

```
MyClass(int initial_capacity = 20); 
```

此语法为参数提供默认值`initial_capacity`。请注意，您可以使用任何函数的参数来执行此操作，而不仅仅是构造函数。默认参数值很有帮助，因为它允许您同时执行这两项操作

```
MyClass c(5); 
```

和

```
MyClass c; 
```

后面使用默认值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T23:17:46.643

`initial_capacity`如果用户选择不输入值，它用作默认值。所以本质上它取代了 2 个构造函数：一个接受整数`MyClass(int);`，另一个不接受任何参数`MyClass();`，即 20。

假设您要使用它来为容量设置一个值，有两种使用它的方法。. .

在你的`.cpp`文件中

```
#include "<...>.h"

MyClass::MyClass(int initial_capacity)
{
    capacity = initial_capacity;
} 
```

或者您可以选择直接从您的`.h`文件中执行此操作

```
class MyClass
{
     public:
          MyClass(int initial_capacity = 20) 
               : capacity(initial_capacity) // member initialization list
          {}
     private:
          int capacity;
}; 
```

这种以分号开头的速记称为成员初始化列表。

但请注意，以这种方式调用它可能会给您带来麻烦，因为它会自动为您创建一个无参数构造函数。

# jquery - 如何从选择框中删除选项

> ID：14298939
> 
> 赞同：0
> 
> 时间：2013-01-12T23:12:33.003
> 
> 标签：jquery, html

我想要做的是在“#studentadd”选择框中显示哪些选项，我希望能够从`#studentselect`选择框中删除所有匹配选项并清空`#studentadd`选择框。但目前它没有这样做。

我究竟做错了什么？

以下是两个选择框的 html：

下面是选择框`#studentadd`：

```
<select multiple="multiple" name="addtextarea" id="studentadd" size="10">
    <option value='1'>u08743 - Joe Cann</option>
    <option value='4'>u03043 - Jill Sanderson</option>
    <option value='7'>u08343 - Craig Moon</option>
</select> 
```

以下是学生应附加到的选择框：

```
 <select id="studentselect" name="studenttextarea">
        <option value='1'>u08743 - Joe Cann</option>
        <option value='4'>u03043 - Jill Sanderson</option>
        <option value='7'>u08343 - Craig Moon</option>
</select> 
```

下面是jquery：

```
$('#studentadd option').attr('selected', 'selected');

var selectedOption = $('select#studentadd');
$('select#studentselect').remove(selectedOption.html()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:21:06.170

尝试

```
var selectedOption = $('#studentadd').find(':selected');
var studentSelect = $('#studentselect');
selectedOption.each(function(){
    studentSelect.find('[value="'+this.value+'"]').remove();
}); 
```

[**演示**](http://jsfiddle.net/mowglisanu/jVj9j/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T23:20:06.947

如果两个列表中的数据相同，它将尝试依赖 value 属性：

```
$('#studentadd').change(function () {  
  var value = $(this).find("option:selected").val();
  $('#studentselect option[value="' + value + '"]').remove();
}); 
```

// 更新：处理多个元素的选择

```
$('#studentadd').change(function () {
  $(this).find("option:selected").each(function () {
    $('#studentselect option[value="' + $(this).val() + '"]').remove();
  });
}); 
```

在行动中看到它：http: [//jsfiddle.net/EvpDx/2/](http://jsfiddle.net/EvpDx/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T23:20:33.717

如果您想从 SELECT 中删除选定的项目（无论是多选还是单选），您可以使用：

```
$('#studentadd option').attr('selected', 'selected');  //Preparation
$('#studentadd option:selected').remove()              //Choose all selected OPTIONs from item with ID=studentadd and remove it 
```

# javascript - 脚本标签属性 - javascript

> ID：14298946
> 
> 赞同：0
> 
> 时间：2013-01-12T23:14:09.003
> 
> 标签：javascript, html, client-side-templating

我正在尝试了解模板的基础知识并遇到以下问题。当我尝试将`ID`或/和`type`属性附加到`<script>`我的 HTML 代码中的标记时，它不起作用：

```
<!DOCTYPE html>
<html>

           <head>
                 <link rel="stylesheet" type="text/css" href="style.css">
             <script src="somescript.js"></script>

           </head>
           <body>

    <script type="text/html" id="template1">
                <form name="formXY">
                    <p>
                        <label>Field1
                            <input type="text" name="form_field1" value= "{{field1}}">
                        </label>
                        <button type="button">Submit</button>
                    </p>
                </form>
            </script>
</body>
</html> 
```

我在 chrome/firefox/IE9/Opera 中运行了它，但它们都没有解析标签之间的`<script>`代码。浏览器认为它只是一个文本字段。当我删除`ID`和`type`属性时，它再次被正确解析。

我可能错过了一些非常基本的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:18:17.813

您需要`type`在脚本标记中添加一个非 javascript，因为关键是您不希望浏览器解析它（作为 javascript），并且通过使用自定义`type`浏览器将忽略它（直到您使用 javascript 抓取它是）

```
<!DOCTYPE html>
<html>

<head>
   <link rel="stylesheet" type="text/css" href="style.css">
   <script src="somescript.js"></script>

</head>
<body>

    <script type="text/x-handlebars-template" id="template1">
        <form name="formXY">
        <p>
            <label>Field1
            <input type="text" name="form_field1" value= "{{field1}}">
            </label>
            <button type="button">Submit</button>
        </p>
        </form>
    </script>
</body>
</html> 
```

然后在您的 javascript 中`somescript.js`，您需要使用类似这样的方式获取该脚本标记的内容

```
var uncompiledTemplate = document.getElementById('template1').innerHtml;

// then pass this template to your templating engine...
// if your using handlebars:
var template = Handlebars.compile(uncompiledTemplate); 
```

然后你就可以使用你的模板了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:41:57.453

标签的内容`<script>`永远不会被解析为 DOM 元素，内容只是作为文本出现在 DOM 中（尽管默认`<script>`情况`display:none;`下它不会出现在页面上）。如果`type`提供的 a 必须是浏览器在尝试执行它之前识别的。请注意，旧版浏览器使用该`language`属性。

# jquery - 哪里可以找到 jQuery 漏洞？

> ID：14298953
> 
> 赞同：1
> 
> 时间：2013-01-12T23:15:24.227
> 
> 标签：jquery

我怀疑网站上的旧版本 jQuery 1.4.4 被利用来向网站添加一些 JS 和 html。我在哪里可以找到 1.4.4 版本的漏洞索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:19:12.133

jQuery 没有漏洞，因为它运行在*所有东西*都敞开的客户端上（所以你可以说 jQuery 可以接触到的所有东西都已经很脆弱了）。

然而，该网站的服务器端代码显然确实存在一些安全问题。

# android - android 的推送通知究竟是如何工作的？

> ID：14298956
> 
> 赞同：3
> 
> 时间：2013-01-12T23:16:11.327
> 
> 标签：android, push-notification

只是想知道android的推送通知是如何工作的。android手机是否不断检查服务器或其他东西？

# c - C 指针表示法与数组表示法的比较：传递给函数时

> ID：14298957
> 
> 赞同：15
> 
> 时间：2013-01-12T23:16:58.270
> 
> 标签：c, arrays, function, pointers

我的问题基于以下代码：

```
int myfunct(int ary[], int arysize)   
int myfunct2(int *ary, int arysize)

 int main(void){
   int numary[10];
   myfunct(numary, 10)
   myfunct2(numary, 10)
   return;
 }

int myfunct(int ary[], int arysize) {   
      //Whatever work is done

  }

int myfunct2(int *ary, int arysize) {
     // Whatever work is done

  } 
```

是否有理由使用其中一个而不是另一个？详细地说，当涉及数值数组时，是否有任何理由要使用指针表示法而不是数组表示法。如果使用指针表示法，则将在函数中使用指针算术等。如果使用 [] 数组表示法，则可以像往常一样使用数组。我是编程新手，目前我认为使用指针表示法没有任何好处。

我的确切问题是，是否有任何理由使用指针表示法将数值数组传递给函数，因此在函数中使用指针操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T23:22:30.677

当您将函数参数声明为数组时，编译器会自动忽略数组大小（如果有）并将其转换为指针。也就是说，这个声明：

```
int foo(char p[123]); 
```

100% 相当于：

```
int foo(char *p); 
```

实际上，这与符号无关，而是与实际类型有关：

```
typedef char array_t[42];
int foo(array_t p);  // still the same function 
```

`p`这与您在函数中的访问方式无关。此外，`[]`运算符不是“数组表示法”。`[]`是一个指针运算符：

```
a[b] 
```

100% 相当于：

```
*(a + b) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-12T23:21:13.783

这两种符号之间没有真正的功能差异。在 C 中，当您将数组变量传递给函数时，它会衰减为指针，而不管符号如何。但是，在我看来，**指针表示法更可取**。函数定义中符号的问题`[]`在于，在我看来，它有点误导：

```
void foo(int array[])
{

} 
```

新手 C 程序员中一个普遍存在的错误是假设它`sizeof(array)`会给你数组*中的元素数量*乘以`sizeof(int)`，就像`array`在堆栈上声明的数组变量一样。但现实情况是，*尽管*有误导性的符号，但它`array`已衰减为指针，因此将是. 实际上只是指向第一个元素的指针，或者可能是指向在任何地方分配的单个整数的指针。*`[]``sizeof(array)``sizeof(int*)``array`*

 *例如，我们可以这样调用`foo`：

```
int x = 10;
foo(&x); 
```

在这种情况下`[]`，定义中的符号`foo`有点误导。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-13T07:04:49.323

这些声明是完全相同的。引用标准：

> 将参数声明为“类型数组”应调整为“限定类型指针”

C99 标准第 6.7.5.3 节第 7 节

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T08:31:07.107

我认为，在自 C99 以来具有可变长度数组的现代 C 语言中，*如果是数组*，则数组表示法更可取。对于一维数组，您可以执行以下操作

```
int myfunct(size_t size, int array[size]) {
  ... array[i] ..
} 
```

对于二维

```
int myfunct(size_t size, int array[size][size]) {
  ... array[i][j] ..
} 
```

所以数组表示法更适合一般情况。一个复杂的编译器甚至可以进行边界检查，但我不知道有任何这样做的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-27T08:04:21.077

在我看来，在函数原型中更喜欢指针表示法而不是空数组表示法的主要原因是后者与结构定义不一致：

```
struct person {
   char *firstname;
   char *lastname;
};

void setperson(struct person *p, char firstname[], char lastname[])
{
    p->firstname = firstname;
    p->lastname = lastname;
} 
```

在结构中，无论如何您都必须使用指针表示法，因为空数组表示法仅对最后一个成员有效，至少从 C99 开始，当您想使其成为[灵活数组成员](https://en.wikipedia.org/wiki/Flexible_array_member)时。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-12T23:32:31.883

您只需要对多维数组使用数组表示法。（您不必提供第一个维度的大小）。*

# jquery - 我如何顺利地做一个 jQuery 滚动粘贴菜单？

> ID：14298958
> 
> 赞同：0
> 
> 时间：2013-01-12T23:16:58.643
> 
> 标签：jquery, fadein, fadeout

我终于能够让标题/导航区域成为一个滚动到棒的菜单。我现在唯一的问题是，当我向下滚动过渡以使标题/导航区域粘住时，很难而不是像本网站的导航那样平滑淡入淡出：

[http://www.rodolphecelestin.com/](http://www.rodolphecelestin.com/)

他们的淡出甚至是平滑和漂亮的。我需要在下面的代码中添加什么代码片段（我不是编码员。因此，如果代码看起来很乱 - 抱歉，但这是我到目前为止要做的工作 XD）？：

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script>
    $(window).scroll(function(e){ 
      $el = $('#header'); 
      if ($(this).scrollTop() > 480 && $el.css('position') != 'fixed'){ 
        $('#header').css({'position': 'fixed', 'top': '0px'}); 
      }
      if ($(this).scrollTop() < 200 && $el.css('position') == 'fixed'){
        $('#header').css({'position': 'relative', 'top': '0px'});
        $('#main-content').css({'margin': '30px 0px 30px'});
        $('#homepage-title').css({'margin-top': '30px'});
      }
      });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:04:38.333

该网站实际上有两个菜单。一个固定在顶部，一个固定在滚动条上。我建议这样做，但如果您仍想使用相同的菜单，我建议添加

```
.css('opacity','0').animate({opacity:1},300); 
```

[http://jsfiddle.net/rXM7N/1/](http://jsfiddle.net/rXM7N/1/)

# java - 如果一棵二叉树是另一棵树的子树

> ID：14298966
> 
> 赞同：0
> 
> 时间：2013-01-12T23:17:50.290
> 
> 标签：java, binary-tree, subtree

我写了这个函数来检查是否`n2`是`n1`. 我使用递归，但是当我使用两棵树对其进行测试时，它向我显示了错误的答案（预期的`true`，但实际上返回了`false`）。

我挣扎了一会儿，还是说不出哪里不对劲。

```
private Boolean isSubTree(node n1, node n2){
    if(n1 == null)
        return false;
    if(n2 == null)
        return true;
    if(n1.data == n2.data){
        return isSubTree(n1.left,n2.left) && isSubTree(n2.right,n2.right);
    }
    else
        return isSubTree(n1.left, n2) || isSubTree(n1.right, n2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:28:28.233

您的边缘情况不正确。特别是，当两者都为空时`n1`，`n2`则视为匹配子树，但如果只有一个为空，则视为不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:57:55.090

我认为检查 n2 的父级以查看它是否为 n1 更容易。如果没有，一直继续，直到找到为止；在这种情况下，您返回 true。另一种情况是直到并包括根的所有父母都不是n1；在这种情况下，您返回 false。换句话说，向上工作而不是检查 n1 的所有可能的孩子及其孩子等以达到 n2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T23:59:26.937

有两种情况需要考虑。

1.  如果子树必须是原始树的节点之一，那么您可以扫描树以查找匹配的子树节点。
2.  如果子树只需要具有相等的值，那么您需要编写一个递归树相等函数并将其应用于第二个递归函数中原始树的所有叶子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T18:14:25.513

我同意 nabau ...**如果我们在节点中有父节点的数据，最好检查天气 n2 和 n1 的根节点是否相同**

否则我们可以用 n1 中每个节点的节点检查 n2 的根

在java中，我们可以比较两个对象是否相同，因为
**n1中的每个节点都等于n2的根，** 如果任何一个节点相等，它们是相同的

# asp.net-web-api - 有没有办法在 ASP.Net Web API 中为响应模型属性设置别名

> ID：14298968
> 
> 赞同：28
> 
> 时间：2013-01-12T23:18:07.093
> 
> 标签：asp.net-web-api

如果您想使用 JSON 样式的小写名称从 Web Api 中的操作方法返回对象，有没有办法给属性名称起别名，以便下面的 C# 对象看起来像下面的 JSON 对象。

C# 响应模型

```
 public class Account
    {
        public int Id { get; set; }
        public string AccountName { get; set; }
        public decimal AccountBalance { get; set; }

    } 
```

我希望返回的 JSON

```
 {
        "id" : 12,
        "account-name" : "Primary Checking",
        "account-balance" : 1000
    } 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-12T23:37:36.137

您可以使用 JSON.NET`JsonProperty`

```
 public class Account
    {
        [JsonProperty(PropertyName="id")]
        public int Id { get; set; }
        [JsonProperty(PropertyName="account-name")]
        public string AccountName { get; set; }
        [JsonProperty(PropertyName="account-balance")]
        public decimal AccountBalance { get; set; }   
    } 
```

这仅适用于 JSON.NET - 显然。如果您想更加不可知论，并且让这种类型的命名能够用于其他潜在的格式化程序（即您将 JSON.NET 更改为其他内容，或用于 XML 序列化），请参考`System.Runtime.Serialization`和使用：

```
 [DataContract]
 public class Account
    {
        [DataMember(Name="id")]
        public int Id { get; set; }
        [DataMember(Name="account-name")]
        public string AccountName { get; set; }
        [DataMember(Name="account-balance")]
        public decimal AccountBalance { get; set; }   
    } 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-14T14:14:52.773

如果您需要对序列化进行精细控制，Filip 的上述回答非常棒，但如果您想进行全局更改，您可以使用如下所示的单行来完成。

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        config.Formatters.JsonFormatter.SerializerSettings.Converters.Add(new StringEnumConverter());
        config.Formatters.JsonFormatter.SerializerSettings.ContractResolver =
            new CamelCasePropertyNamesContractResolver();  // This line will cause camel casing to happen by default.
    }
} 
```

[http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#json_camelcasing](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#json_camelcasing)

**编辑** 根据下面的评论，我继续并在此处添加了包含完整解决方案的博客文章：[http ://www.ryanvice.net/uncategorized/extending-json-net-to-serialize-json-properties-using-a-由破折号和全小写/分隔的格式/](http://www.ryanvice.net/uncategorized/extending-json-net-to-serialize-json-properties-using-a-format-that-is-delimited-by-dashes-and-all-lower-case/)

# java - Java 泛型

> ID：14298972
> 
> 赞同：5
> 
> 时间：2013-01-12T23:18:17.670
> 
> 标签：java

有什么方法可以将您所在的类的类型用于泛型参数？例如我有这门课`ServiceNode`

```
public final class ServiceNode<S extends NetworkService> {

    private final S service;
    private final Client client;
    private Object attachment;

    public ServiceNode(S service, Client client) {
        this (service, client, null);
    }

    public ServiceNode(S service, Client client, Object attachment) {
        this.service = service;
        this.client = client;
        this.attachment = attachment;
    }

    public S service() {
        return service;
    }

....

} 
```

这是抽象类的一部分`NetworkService`

```
public abstract class NetworkService {

    private final Set<ServiceNode<?>> registeredNodes = new HashSet<>();

    public final void register(ServiceNode<?> node) {
        registeredNodes.add(node);
    }

    ...

} 
```

所以基本上无论如何都要从类中删除通配符参数`ServiceNode`并将`NetworkService`其替换为类扩展的任何类型`NetworkService`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-12T23:20:26.933

因此泛化您的基类：

```
public abstract class NetworkService<T extends NetworkService<T>> {

    private final Set<ServiceNode<T>> registeredNodes;

    ...
} 
```

然后从它扩展：

```
public class MyNetworkService extends NetworkService<MyNetworkService> {
    ...
} 
```

谷歌*奇怪地重复出现的通用模式*。

# php - 显示文件夹中的随机图像 url

> ID：14298977
> 
> 赞同：0
> 
> 时间：2013-01-12T23:19:10.180
> 
> 标签：php

我有一个 php 代码，它使用文件夹中的每个图像并在我的页面上回显 url。

我需要帮助的是每次加载页面时使 php 代码随机化 url 列表。

我拥有的代码是：

```
<?php 
 if ($handle = opendir('images')) {
   while (false !== ($file = readdir($handle)))
      {
          if ($file != "." && $file != "..")
      {
            $thelist .= '<div data-delay="5"><img src="images/'.$file.'"></div>';
          }
       }
  closedir($handle);
  }
?>
<?=$thelist?> 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:23:56.557

最简单的解决方案是将所有文件名放入一个数组中，然后`shuffle()`用来混合它。然后您可以遍历数组并输出图像。它应该看起来像这样：

```
<?php 
 $thelist = "";
 if ($handle = opendir('images')) {
   $images = array();
   while (false !== ($file = readdir($handle))) {
      if ($file != "." && $file != "..") {
            array_push($images, 'images/'.$file);
      }
   }
   closedir($handle);
   shuffle($images);
   foreach ($images as $image) {
      $thelist .= '<div data-delay="5"><img src="'.$image.'"></div>';
   }
   echo $thelist;
 }
?> 
```

通过使用`glob()`而不是`opendir()`你可以显着缩短代码，因为`glob()`返回一个数组，然后你只需要打乱那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:24:36.987

将您的文件链接放入一个数组并使用函数[shuffle()对其进行随机播放](http://php.net/manual/fr/function.shuffle.php)

```
<?php 

if ($handle = opendir('images')) {
    $fileTab = array();
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != "..") {
            $fileTab[] = $file; 
        }
    }
    closedir($handle);
    shuffle($fileTab);
    foreach($fileTab as $file) {
        $thelist .= '<div data-delay="5"><img src="images/'.$file.'"></div>';
    }
}
?>
<?=$thelist?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T23:24:44.147

与其在 while 循环中直接创建 div，不如将其仅用于将所有 url 存储在一个数组中。然后[打乱](http://php.net/manual/en/function.shuffle.php)该数组，并使用 foreach 循环来填充 $thelist。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T23:29:36.900

你为什么不使用`glob()`？

```
$images = glob('images/*.{jpg,png,gif}', GLOB_BRACE);

shuffle($images);

foreach($images as $image) {
    echo '<div data-delay="5">
              <img src="', $image ,'">
          </div>';
} 
```

# ruby-on-rails - image_tag 在生产与开发上不同

> ID：14298978
> 
> 赞同：3
> 
> 时间：2013-01-12T23:19:10.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 Rails 中使用 image_tag。在本地，它解析为 /assets/image.img。在 Heroku 上，它解析为 /images/image.img。

我关闭了资产管道（这个项目最终将离开 Rails）。

如何使本地解析与生产相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T23:40:02.433

你完整的 image_tag 是什么？
它使用吗

```
image_tag(asset_path('image.img')) 
```

， 或者

```
image_tag('image.img') 
```

?

如果您关闭了资产管道，我建议您不要使用该`asset_path`表单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T15:02:31.527

```
# config/environments/production.rb
...
config.assets.compile = true
... 
```

这解决了我的问题。我想这与关闭管道有关。感谢您对此的任何评论，以帮助我理解。

# php - PHP 警告：DOMDocument::loadHTML(): htmlParseEntityRef: 期待 ';' 在实体

> ID：14298981
> 
> 赞同：-2
> 
> 时间：2013-01-12T23:19:23.267
> 
> 标签：php, domdocument

问题是这样的：如果我从控制台运行脚本

```
C:\Users\Dima>php C:\wamp\www\shop\index.php "test" 2 
```

然后有一个错误：

```
PHP Warning: DOMDocument::loadHTML(): htmlParseEntityRef: expecting ';' in Entity, line: 802 in C:\wamp\www\rozetka\app.php on line 40 
```

索引.php

```
if(isset($argv[1]) && isset($argv[1])){
    return new App((string)$argv[1], (int)$argv[2]);
} 
```

如果只是在浏览器中运行 index.php

```
$app = new App('test', 2); 
```

所以应用程序工作正常，没有错误请帮助从控制台启动应用程序，对不起我的英语

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T23:42:30.577

您可能有一个 HTML 文件被 正在使用的“test”引用`new App()`，但是该 HTML 文件包含错误。最有可能（几乎可以肯定）的原因是`<a href="sompage.php?foo=bar&cat=fish">Link</a>`. 在`&`HREF 中引入了一个字符实体，但没有`;`与之配套。

# iphone - 旋转到横向后自定义 UISegmentedControl 的高度问题

> ID：14298983
> 
> 赞同：2
> 
> 时间：2013-01-12T23:19:36.530
> 
> 标签：iphone, ios, uisegmentedcontrol

### 问题

我`UISegmentedControl`为 iOS 应用程序创建了一个自定义组件，放置在导航栏上，有两个部分。正如人们所预料的那样，当手机旋转到横向时，组件的高度会稍低。

但是，问题是在旋转到横向后，分段控件即使在旋转回纵向后仍保持其较短的高度。我感谢您的帮助。

这是`initWithCoder:`方法内部的（简化的）代码：

```
UIImage *bg = [[UIImage imageNamed:@"button-bg"] resizableImageWithCapInsets:UIEdgeInsetsMake(7, 7, 7, 7)];
UIImage *bgH = [[UIImage imageNamed:@"button-bg-h"] resizableImageWithCapInsets:UIEdgeInsetsMake(7, 7, 7, 7)];

[self setBackgroundImage:bg forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[self setBackgroundImage:bg forState:UIControlStateNormal barMetrics:UIBarMetricsLandscapePhone];
[self setBackgroundImage:bgH forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
[self setBackgroundImage:bgH forState:UIControlStateSelected barMetrics:UIBarMetricsLandscapePhone]; 
```

==============================

### 临时解决方法

这是我的临时解决方法，直到找到更好的解决方案：

在视图控制器中，我有一个名为 的插座`segmentControl`，链接到相关`UISegmentedControl`问题。我还创建了一个属性，如下所示：

```
@property CGRect segmentedControlPortraitOrientationFrame; 
```

方法内部`viewDidLoad`：

```
self.segmentedControlPortraitOrientationFrame = self.segmentControl.frame; 
```

`didRotateFromInterfaceOrientation:`然后使用以下实现覆盖：

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    [super didRotateFromInterfaceOrientation:interfaceOrientation];
    if(UIInterfaceOrientationIsPortrait(self.interfaceOrientation))
        self.segmentControl.frame = self.segmentedControlPortraitOrientationFrame;
} 
```

解决方法假定应用程序总是首先以纵向加载，我认为这是正确的，只要应用程序支持纵向。如我错了请纠正我。

# ios - 如何使用 NSPredicate 在 CoreData 中查找标题

> ID：14298988
> 
> 赞同：0
> 
> 时间：2013-01-12T23:20:11.083
> 
> 标签：ios, core-data, nspredicate

如果我想在字符串“red is a color in my crayonbox”中找到单词“color”，我该如何构造它？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:29:43.120

```
NSString *stringToSearchFor = @"whatever you want";

[NSPredicate predicateWithFormat:@"name CONTAINS[cd] %@", stringToSearchFor]; 
```

要搜索红色或法拉利...

```
NSPredicate *redPred = [NSPredicate predicateWithFormat:@"name CONTAINS[cd] 'red'"];

NSPredicate *ferraiPred = [NSPredicate predicateWithFormat:@"name CONTAINS[cd] 'ferrari'"];

NSPredicate *compoundPredicate = [NSCompoundPredicate orPredicateWithSubPredicates:[NSArray arrayWithObjects:redPred, ferrariPred, nil]]; 
```

# javascript - 将 html 添加到 div 而不替换其中的当前内容

> ID：14298989
> 
> 赞同：3
> 
> 时间：2013-01-12T23:20:26.297
> 
> 标签：javascript, jquery, dhtml

我正在尝试将 dhtml 添加到 id 为 upload_results 的 div 中。这应该可以在不替换 div 中的当前内容的情况下工作。

代码：（有趣的部分在底部）

```
<script language="JavaScript">
 function do_show() {
      $("#webcamContainer").fadeIn('');
  }

  webcam.set_hook( 'onComplete', 'my_completion_handler' );

  function do_upload() {
       upload to server
      document.getElementById('upload_results').innerHTML = '<div>Uploading...</div>';
      webcam.upload();
  }

  function my_completion_handler(msg) {
       extract URL out of PHP output
      if (msg.match(/(http\:\/\/\S+)/)) {
          var image_url = RegExp.$1;
           show JPEG image in page
          $("#upload_results").fadeIn('');
          //document.getElementById('upload_results').innerHTML = '<a target="_blank" href="'+image_url+'"><img style="border:#ccc 5px solid;" src="'+image_url+'" width="100px"></a>';// I think here should be something changed
    $('#upload_results').append('<a target="_blank" href="'+image_url+'"><img style="border:#ccc 5px solid;" src="'+image_url+'" width="100px"></a>');      
           reset camera for another shot
          webcam.reset();
      }
      else alert("PHP Error: " + msg);
  }
 </script>

 <div id="upload_results" class="video_header" style="display:none;"></div><!--add data here , without replace current content in div--> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T23:25:51.213

签出：`insertAdjacentHTML`方法：

[https://developer.mozilla.org/en-US/docs/DOM/element.insertAdjacentHTML](https://developer.mozilla.org/en-US/docs/DOM/element.insertAdjacentHTML)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T23:23:01.323

要[`append`](http://api.jquery.com/append/)满足`#upload_results`元素：

```
$('#upload_results').append('<a target="_blank" href="'+image_url+'"><img style="border:#ccc 5px solid;" src="'+image_url+'" width="100px"></a>'); 
```

您也可以使用`.innerHTML += '[...]';`，但这通常被认为是不好的做法，因为它会覆盖现有的 DOM，丢弃现有的侦听器和先前附加到元素的数据。

# c - C printf 格式化：什么是“。” 和“|” 在这种情况下是什么意思？

> ID：14298991
> 
> 赞同：6
> 
> 时间：2013-01-12T23:20:28.473
> 
> 标签：c

我正在学习安全课程，但由于对 C 编程语言缺乏了解，我无法理解这段代码。

```
printf  ("%08x.%08x.%08x.%08x|%s|"); 
```

有人告诉我，这段代码应该沿着堆栈移动，直到找到指向函数的指针。

我认为这`.`只是输出精度的一个指标，所以我不知道这在这种情况下意味着什么，因为有精度指标？

另外，我不明白这是什么`|`意思，在 C 文档中也找不到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T23:22:21.543

这些符号在这里没有特殊含义，因为它们在格式说明符之外，它们只是按字面意思输出。但是请注意，您没有提供 printf 期望的所有参数，因此它将打印 5 个恰好在堆栈上的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T23:23:28.873

在这个字符串中。和 | 字符只是输出。这些点充当十六进制字符串的分隔符，管道突出显示字符串。

只有出现在 % 符号之后和格式说明符之前的点才被视为岁差指示符，例如`%4.2f`.

# eclipse - Eclipse 中的 ScalaTest 运行配置：找不到套件类

> ID：14298993
> 
> 赞同：7
> 
> 时间：2013-01-12T23:20:34.090
> 
> 标签：eclipse, scalatest

问题：我无法设置运行配置来为我的项目中的 Scalatests 运行 scalatest。

重现步骤：

*   右键单击 Scala Suite 并单击 Run as -> Run configurations..
*   在左侧，我看到了 ScalaTest 的配置模板。我单击新建并填写名称**，但找不到套件类。**

注意：[这里](http://www.scalatest.org/user_guide/using_scalatest_with_eclipse)提到我应该看到 Run as -> ScalaTest - Suite 但我没有看到该选项。我尝试在编辑器和包资源管理器中使用上下文菜单

采取的步骤：

*   使用：Scala IDE for Eclipse 版本：2.1.0.m3-2_09
*   使用 SBT，组装项目，运行 eclipse 命令，然后将项目和依赖项导入 Eclipse
*   项目编译。ScalaTest 代码编译（scalatest_2.9.2-1.8.jar 在“引用库”配置中）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T16:34:18.757

过去几天我一直在与类似的问题作斗争；Lily / Jimbo 的回答与我的情况不太相符，但帮我找到了正确的方向。

就我而言，我使用的是我复制的第三方库。类和测试的包名称匹配，但文件夹结构*不*匹配——我所有的测试都直接在 Play 的“/test”文件夹中，而不是在与包名称匹配的文件夹中。这没有显示任何错误，但被破坏了：包应该匹配文件夹。当我在 test 下构建正确的文件夹结构并重新编译时，出现了预期的“Run As -> ScalaTest - Suite”选项。

不知道您的问题是否相同，但是如果您还没有发现问题，可以检查一下...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T03:01:11.413

就我而言，单击“重新导入所有 Maven 项目”图标，如“刷新”图标，即可解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-22T21:26:16.643

威廉的回答对我有用。从同一个更新站点（来自[Scalatest 的 github 站点](https://github.com/scalatest/scalatest-eclipse-plugin)上的列表）获取两个插件似乎对我使用 Kepler 有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T15:44:58.760

这可能是由于 scalatest 和 scala eclipse IDE 版本之间的不一致造成的。尝试 scalatest_2.9.0-2.0.M5b.jar 或 scalatest_2.10-2.0.M5b.jar。前一个 jar 肯定适用于 ide 2.0.9.x，所以新版本可能需要 2.10 jar。[从这里](http://www.scalatest.org/download "the scalatest download page")仔细选择您的版本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T16:57:19.810

不确定您是否修复了错误，但昨天我遇到了类似的错误，并且正在拉扯我的头发试图修复它（我通过谷歌搜索找到的任何建议似乎都没有帮助我）。所以对我来说，事实证明它就像我的测试套件中的包层次结构一样简单。

我正在使用播放框架，所以我的文件夹自然看起来像这样`controllers.package1.package2....`，这也适用于我的测试文件夹。

但是，现在我的测试类具有包定义`package1.package2.....`（没有“控制器”作为前缀）。

如果我在 sbt/play 命令提示符下运行测试，这不是问题。但是通过 Eclipse 运行它们会给我你描述的问题。

所以无论如何......我想我会分享这个，以防万一这有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-12T15:55:37.950

`view template`结合play 框架中的编译问题，这有点烦人。但我的方法是重新生成eclipse项目文件并将`view template`路径添加到**类路径中**

# twitter - 如何获取推文的id

> ID：14298994
> 
> 赞同：5
> 
> 时间：2013-01-12T23:20:40.340
> 
> 标签：twitter

我有一组推文和他们的用户名，想得到他们的 ID。由于 twitter 搜索 API 的限制，我无法使用它。topsy.com 也没有显示所有结果。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-07-29T19:58:20.787

点击推文后，tweetid 可能会在 url 上被污染。示例： [https:](https://twitter.com/RealHughJackman/status/) **//twitter.com/RealHughJackman/status/759043035355312128**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:04:06.043

您可以使用 REST API [https://dev.twitter.com/docs/api/1.1/get/friendships/lookup](https://dev.twitter.com/docs/api/1.1/get/friendships/lookup)的查找方法来获取推文的所有信息。此外，如果你得到了 twitter 用户的 screenName，你得到了 ID，因为你可以使用两者来识别 twitter 用户

# backbone.js - 在集合“添加”事件期间模型是如何传递的？

> ID：14298995
> 
> 赞同：0
> 
> 时间：2013-01-12T23:20:42.567
> 
> 标签：backbone.js, coffeescript

在backbone.js中，我想做：

```
initialize: =>
  @collection.on("add", @appendModel(model)) # <- how to correctly write it?

render: =>
  # do some render
  @collection.each(@appendModel())

appendModel: (model) ->
  # append model to $el 
```

目前，我有`@collection.on("add", @render)`，但这会重新绘制整个系列。我只想 fire `appendModel()`，但我不确定在这种情况下如何在参数中传递模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:26:06.237

在您的示例中，您首先`@appendModel`使用参数调用该方法`model`，然后将**返回值**传递给`collection.on`：

```
@collection.on("add", @appendModel(model)) 
```

您需要传递对该方法的引用：

```
@collection.on("add", @appendModel) 
```

调用者（在本例中为 Backbone）将为您将参数传递给方法。

您可能还需要将`this`(or `@`) 作为第三个参数传递给该`collection.on`方法。这是*context*参数，它告诉 Backbone 在执行回调时，`this`应该将上下文设置为该值：

```
@collection.on("add", @appendModel, @) 
```

或者因为您使用的是咖啡脚本，您可以跳过该位并使用粗`@appendModel`箭头符号定义方法，这将确保`this`上下文绑定到您的视图：

```
appendModel: (model) => 
```

# ruby-on-rails-3 - 编辑设计控制器 - 添加对象

> ID：14298998
> 
> 赞同：0
> 
> 时间：2013-01-12T23:20:58.070
> 
> 标签：ruby-on-rails-3, devise, controller, rubygems

我想将对象（@attachment）添加到控制器中的新操作和编辑操作以进行设计。不幸的是，我不知道如何以及在哪里执行此操作。:|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:43:57.220

您可以使用文档中显示的相同方法自定义注册控制器： [https ://github.com/plataformatec/devise#configuring-controllers](https://github.com/plataformatec/devise#configuring-controllers)

您可以使用私有方法和 before_filter 实例化对象，如下所示：

```
#in controllers/registrations_controller.rb
class RegistrationsController < Devise::RegistrationsController
  before_filter :init_attachment, only: [:new, :edit]

  private
  def init_attachment
    @attachment #= ...
  end
end 
```

希望能帮助到你！