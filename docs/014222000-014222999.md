# StackOverflow 问答 14222000-14222999

# kendo-ui - 使用剑道树视图时，有没有办法根据 ID 或文本联合多个节点？

> ID：14222000
> 
> 赞同：0
> 
> 时间：2013-01-08T18:51:18.667
> 
> 标签：kendo-ui, kendo-treeview

我有 3 个不同的对象/节点，如下所示，我正在尝试形成 finalObj / 节点，它是 3 个节点的联合（唯一树列表）..

树视图中是否有一种方法可以基于 text 或 id 联合 3 个对象（节点）？

```
First node: 

 [ { text: "TreeRoot", items: [
                                { text: "Subgroup1" },
                                { text: "Subgroup2" }   
                            ]}]

Second Node:
                 [ { text: "TreeRoot", items: [
                            { text: "Subgroup3" }   
                        ]}]

Third node:
                 [{ text: "Subgroup3",
                        items: [ {
                                text: "subgroup5",
                                items: [ {
                                        text: "subgroup6",
                                        items: [ {
                                                text: "subgroup7",
                                                items: [ {
                                                        text: "subgroup8"
                                                    }]
                                            }] }] 
                            }]}]

Final expected node (after merging):

                var finalObj= [ { text: "TreeRoot", items: [
                            { text: "Subgroup1" },
                            { text: "Subgroup2" },
                            { text: "Subgroup3",
                                items: [ {
                                        text: "subgroup5",
                                        items: [ {
                                                text: "subgroup6",
                                                items: [ {
                                                        text: "subgroup7",
                                                        items: [ {
                                                                text: "subgroup8"
                                                            }]
                                                    }] }] 
                                    }]}]}] 
```

编辑：

以下解决方案不适用于其他类型的节点..

对于 EX：

```
 var node1 = [
                    { text   : "TreeRoot",
                        id:0,
                        items: [
                            { text: "Subgroup1",id:1 },
                            { text: "Subgroup2", id:2}
                        ]
                    }
                ];

            var node2 = [
                {
                    text : "TreeRoot",
                    id:0,
                    items: [
                        { text: "Subgroup3" ,
                        id:3}
                    ]
                }
            ];

            var node3 = [
                {
                    text : "TreeRoot",
                     id:0,
                    items: [
                        {
                            text : "Subgroup2",
                            id:2,
                            items: [
                                {
                                    text : "subgroup6",
                                    id:6,
                                    items: [
                                        {
                                            text : "subgroup7",
                                            id:7,
                                            items: [
                                                {
                                                    text: "subgroup8",
                                                    id:8
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]; 
```

对于上面的例子，我最初应该只看到树根。展开时，我应该只看到 subgroup1、2、3...，当展开 subgroup2 时，我应该能够看到 subgroup6、7、8。

我需要唯一的父节点和子节点。如果我使用上面的结构，我会得到 2 个名为 Subgroup3 的子节点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T23:12:49.363

尽管您将其标记为 Kendo-UI，但它实际上是一个编程问题，因为没有用于解决的 KendoUI 界面（我知道您想使用它来合并`treeview`节点），*但*使用递归解决它并不是很困难。

这基本上是您的三个节点：

```
var node1 = [
    { text   : "TreeRoot",
        items: [
            { text: "Subgroup1" },
            { text: "Subgroup2" }
        ]
    }
];

var node2 = [
    {
        text : "TreeRoot",
        items: [
            { text: "Subgroup3" }
        ]
    }
];

var node3 = [
    {
        text : "Subgroup3",
        items: [
            {
                text : "subgroup5",
                items: [
                    {
                        text : "subgroup6",
                        items: [
                            {
                                text : "subgroup7",
                                items: [
                                    {
                                        text: "subgroup8"
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    }
]; 
```

您可以使用以下函数合并它：

```
function merge(node1, node2) {
    if (node2 !== null) {
        if (node1.text === node2.text) {
            node1.items = node1.items || [];
            $.each(node2.items, function (idx2, elem2) {
                var found = false;
                // Check that elem does not exist on node1
                $.each(node1.items, function (idx1, elem1) {
                    if (!found && elem1.text === elem2.text) {
                        found = true;
                        merge(elem1, elem2);
                    }
                });
                if (!found) {
                    node1.items.push(elem2);
                }
            });
        } else {
            if (node1.items) {
                $.each(node1.items, function (idx, item) {
                    merge(item, node2);
                });
            }
        }
    }
} 
```

这合并了第一个节点中的两个节点。

你应该像这样调用它：

```
merge(node1[0], node2[0]);
merge(node1[0], node3[0]); 
```

适合您的场景。

**注意**：我假设每个节点上只有一个元素（即`node0`，`node1`和`node2`是数组，但它们只有一个元素）

看到它在[这里运行](http://jsfiddle.net/OnaBai/pwjNY/1/)

# php - PHP未定义变量和Javascript

> ID：14222004
> 
> 赞同：0
> 
> 时间：2013-01-08T18:51:29.733
> 
> 标签：php, javascript

我自己试图弄清楚这一点，我是 PHP 新手，我知道它很容易，但我错过了一些东西。我正在尝试创建一些东西，如果有人单击按钮，它会从按钮超链接传递一个名为 id 的值，例如：

```
 <a href="abc123.html?id=d">Click Here...</a> 
```

然后加载页面 abc123.html 并在页面顶部运行以下脚本，以查看 id = f 是否运行 javascript 代码，否则不运行。

```
 <?php
    $vid = $_GET["id"];
    if ($vid != "f") {

       echo "<script type=""text/javascript"">"
            echo "if (screen.width<800)"
            echo "{"
            echo "window.location=""../mobile/default.html"""
            echo "}"
       echo "</script>"
    }
    ?> 
```

但是，我从 Get ID 收到 PHP 未定义变量错误。我曾尝试使用 isset，但这似乎不起作用。但我知道如果 id 的值为空，则会导致错误，因为只有当用户单击 abc123.html 链接时，id 值可能并不总是可用。有人可以告诉我我做错了什么吗？

我在这里研究了答案：

[未定义的变量 php](https://stackoverflow.com/questions/8157072/undefined-variable-php)

[PHP中的未定义变量错误](https://stackoverflow.com/questions/910457/undefined-variable-error-in-php)

和这里...

[http://matthom.com/archive/2005/02/19/php-passing-variables-across-pages](http://matthom.com/archive/2005/02/19/php-passing-variables-across-pages)

和这里...

[http://www.w3schools.com/php/php_if_else.asp](http://www.w3schools.com/php/php_if_else.asp)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:54:26.093

您必须转义引号并用分号结束语句：

```
echo "<script type=\"text/javascript\">"; 
```

# asp.net - 停止下拉列表的键盘输入自动回发

> ID：14222005
> 
> 赞同：1
> 
> 时间：2013-01-08T18:51:32.333
> 
> 标签：asp.net, drop-down-menu, autopostback

有什么办法可以延迟下拉列表上的自动回发，直到列表真正失去焦点？我想接受来自键盘的输入，而不在每次击键后回发页面。例如，使用以下代码：

```
<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="true">
<asp:ListItem >Test1</asp:ListItem>
<asp:ListItem >Tst1</asp:ListItem>
<asp:ListItem >twotest</asp:ListItem>
</asp:DropDownList> 
```

假设我想选择两个测试。我选择 ddl 并在键盘中输入“tw”。但是，一旦输入“t”，页面就会自动回发，而“w”输入会丢失。重置焦点并没有真正帮助，因为 ddl 认为 'w' 是第一个输入。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:03:15.497

这似乎是不可能的。您必须删除 AutoPostBack="true" 并尝试另一种方式来执行回发。考虑以下解决方案：

当下拉**ddlCountry**更改时，调用函数**ddlCountry_changed**触发**btnLoad**点击执行回发。按钮**btnLoad**放置在更新面板内，因此页面不会重新加载，您仍然可以将注意力集中在下拉菜单上。

```
<script type="text/javascript">
    function ddlCountry_changed() {
        document.getElementById('<%= btnLoad.ClientID %>').click();
    }
</script>

Country:
<asp:DropDownList ID="ddlCountry" runat="server" onchange="ddlCountry_changed();">
    <asp:ListItem Text="Vietnam" Value="1"></asp:ListItem>
    <asp:ListItem Text="United State" Value="2"></asp:ListItem>
</asp:DropDownList>

<asp:UpdatePanel ID="updatePanel" runat="server">
    <ContentTemplate>
        <asp:Button ID="btnLoad" style="display: none" runat="server" OnClick="btnLoad_OnClick" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T00:50:36.030

这比处理模糊要复杂一些。您需要删除 onchange 属性 (AutoPostBack="false") 以便可以进行键盘导航，并附加在通过单击、模糊或按下回车键更改值时提交表单的事件处理程序。

我遇到了同样的问题并创建了一个插件来处理这个问题。查看[https://github.com/bstruthers/AutoPostBack-Fix](https://github.com/bstruthers/AutoPostBack-Fix)。

# php - 发生后立即复制数组值的最简单方法？

> ID：14222006
> 
> 赞同：1
> 
> 时间：2013-01-08T18:51:39.303
> 
> 标签：php, arrays

我想要这些数组...

```
array('bread','jelly','olive');
array('chocolate','chip'); 
```

成为这些阵列...

```
array('bread','bread','jelly','jelly','olive','olive');
array('chocolate','chocolate','chip','chip'); 
```

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:55:10.710

```
$myarray = array('bread','jelly','olive');
$mynewarray = array_merge($myarray, $myarray);
sort($mynewarray);
var_dump($mynewarray); 
```

输出：

```
array(6) {
  [0]=>
  string(5) "bread"
  [1]=>
  string(5) "bread"
  [2]=>
  string(5) "jelly"
  [3]=>
  string(5) "jelly"
  [4]=>
  string(5) "olive"
  [5]=>
  string(5) "olive"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:53:51.960

```
function duplicateItems(array $inputArray, $n = 2) {
    $result = array();
    foreach ($inputArray as $value) {
        for ($i = 0; $i < $n; $i++) {
            $result[] = $value;
        }
    }
    return $result;
} 
```

用法：

```
$duplicateArray = duplicateItems(array('bread', 'jelly', 'olive')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T19:05:26.083

Use array_splice() Works really fast, because no sorting is involved.

```
$a = array('bread','jelly','olive');
$i=0;
foreach ($a as $b) {
    array_splice($a,$i*2,0,$b);
    $i++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T18:55:59.107

如果这可行： array('bread','jelly','olive',bread','jelly',''olive');

```
 $array = array('bread','jelly','olive');
 $array = array_merge($array, $array); 
```

然后你可以按字母顺序排序：

```
 sort($array); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T18:53:58.427

你可以这样做：

```
$singleValues = array('bread','jelly','olive');
$newArray = array();
foreach ($singleValues as $value) {
   $newArray[] = $value;
   $newArray[] = $value;
} 
```

# php - 将虚拟子域重定向到与参数具有相同域的页面

> ID：14222008
> 
> 赞同：0
> 
> 时间：2013-01-08T18:51:44.513
> 
> 标签：php, .htaccess

在 php 代码中，我需要将所有虚拟子域重定向到与参数具有相同子域的页面。

例如，重定向自：

```
anytext.mydomain.com 
```

至 ：

```
mydomain.com/example.php?text="anytext" 
```

我怎么能用htaccess文件做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:51:15.597

试试这个，它肯定会帮助你：

```
# .htaccess

Options +FollowSymLinks
RewriteBase /

RewriteCond %{HTTP_HOST} !^www.your-domain-name.com [NC]
RewriteCond %{HTTP_HOST} ^(www.)?([^.]+).your-domain-name.com$ [NC]
RewriteRule ^([^.]+)$ /some_file.php/$1?subdomain=%2 [L,QSA] 
```

# javascript - 默认的 android 浏览器不适用于这个 javascript 函数

> ID：14222010
> 
> 赞同：2
> 
> 时间：2013-01-08T18:52:00.213
> 
> 标签：javascript, android, jquery, cross-browser

我对这段代码有疑问：

```
function handleFileSelect(evt) {
   evt.stopPropagation();
   evt.preventDefault(); // stop default

   console.log('ejecutado handleFileSelects')

   var divOrigen = evt.target.parentNode; //get the div of the input
   var divDestino = $(divOrigen).find('img'); //get the div for preview the img
   var inputDestino = $(divOrigen).find('input[type="file"]'); // the input file 
   var files = evt.target.files; //get files in array

   if (files.length) {
      for (var i = 0, f; f = files[i]; i++) {
         if (!f.type.match('image.*')) {
            continue;
         }
         var reader = new FileReader();
         reader.onload = (function (theFile) {
            return function (e) {
               $(divDestino).attr('src', e.target.result); //read files content to preview in div
            };
         })(f);
         reader.readAsDataURL(f);
      }
      $(inputDestino).popover('destroy');
   } else {
      evt.stopPropagation();
      evt.preventDefault();
      $(inputDestino).popover('show');
      console.log('files is empty');
      $(divDestino).attr('src', '/images/index/publicacion/dragAndDropHere.png');
   }
} 
```

此代码更改了`div`. 的目的`div`是预览输入文件的图像。在 Opera、Firefox、Internet Explorer 和 Safari 中它运行良好，但是当我在我的 Android 平板电脑上尝试它时，什么也没有发生。有没有类似 Firebug for Android 的工具？或者我可以用于 Android 平板电脑的任何框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:57:08.370

尝试从图像源中删除第一个 / ，而不是

```
$(divDestino).attr('src', '/images/index/publicacion/dragAndDropHere.png'); 
```

你有

```
$(divDestino).attr('src', 'images/index/publicacion/dragAndDropHere.png'); 
```

# c# - 我们可以在 C# 中创建自己的进程吗？

> ID：14222015
> 
> 赞同：-2
> 
> 时间：2013-01-08T18:52:35.657
> 
> 标签：c#

我需要在 1 个程序中创建 3 个进程来模拟死锁。如何定义自己的流程？我不想简单地打开现有流程。

例如对于一个线程：

```
Thread X = new Thread(){ //insert whatever code here// }; 
```

我们如何为一个流程做到这一点，例如：

```
Process P = new Process(){//insert different threads here//}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T18:55:47.597

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Diagnostics;

namespace ConsoleApplication1
{    
    class Program
    {
        static void Main(string[] args)
        {
            Process process = new Process();
            process.StartInfo.FileName = "notepad";
            //process.StartInfo.Arguments = "filename.txt"
            process.StartInfo.UseShellExecute = false;
            process.StartInfo.CreateNoWindow = true;
            process.Start();
        } 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:55:35.097

进程来自可执行文件。

你可以写`Process.Start(@"C:\Something.exe")`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:58:30.560

您可能正在寻找[Process.Start](http://msdn.microsoft.com/en-us/library/92699yzt%28v=vs.100%29.aspx)（静态或实例方法） - 这将通过启动您选择的可执行文件来创建新进程。

如果您正在寻找[Unix 的 fork](http://en.wikipedia.org/wiki/Fork_%28Unix%29)实现，据我所知，您无法在 .Net 中真正做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T21:04:40.043

一个进程中的代码不能在另一个进程中执行。您需要某种形式的进程间通信或远程过程调用。

# twitter - Twitter 搜索（原子），日期范围

> ID：14222018
> 
> 赞同：0
> 
> 时间：2013-01-08T18:52:43.823
> 
> 标签：twitter, rss, atom-feed

我有一个用于网站的 Twitter 提要，理论上它应该可以完美运行，但出于某种原因

[http://search.twitter.com/search.atom?q=from:@goinnative&rpp=10](http://search.twitter.com/search.atom?q=from%3a@goinnative&rpp=10)

仅加载 3 条推文（似乎是过去一周的推文），而不是 10 条最近的推文。有没有办法使用相同的提要来调用更长的日期范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:00:39.353

明白了，改用这个提要。

[http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=goinnative](http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=goinnative)

# sql - 将 varchar(max) 转换为 int 或 float 时出错

> ID：14222033
> 
> 赞同：1
> 
> 时间：2013-01-08T18:53:28.017
> 
> 标签：sql, tsql, sql-server-2005, casting

我有一个表，将不同的信息存储到一个值列中`varchar(max)`

我需要能够从该表中提取一些信息，将其转换为整数并对数字进行平均。我在尝试转换时遇到了问题。

这不起作用：

```
select cast(value as float) as value
from table 
```

谁能告诉我如何正确转换它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T18:54:54.447

据推测，问题在于某些值不是数字格式。试试这个：

```
select (case when isnumeric(value) = 1 then cast(value as float) end)
from table 
```

这会将所有数字转换为浮点数，并将 NULL 放在其余字段中。

如果您想查看导致问题的值，请使用以下命令：

```
select value
from table
where isnumeric(value) = 0 and value is not null 
```

# eclipse - 在同一个 EAR 中的应用程序客户端中使用 @EJB 注入

> ID：14222036
> 
> 赞同：1
> 
> 时间：2013-01-08T18:53:33.353
> 
> 标签：eclipse, dependency-injection, glassfish, ejb, application-client

我已经搜索了几天来为我的，在我看来不是太难但显然无法解决的问题找到一些解决方案。

我有一个包含一些 EJB 的 EAR 项目，一个 Web 客户端（工作正常），现在我添加了一个应用程序客户端模块。

由于一切都在同一个项目中，我认为在应用程序客户端的主类中进行简单的@EJB 注入就可以了。我还尝试了 JNDI 查找。我使用 eclipse 和 glassfish 作为服务器并尝试运行应用程序 1\. 在 eclipse 中（我注入的 bean 只是空）和 2\. 从 glassfish 管理下载客户端存根并尝试使用 sh appclient -client 启动它（或-jar）OmazanClient.jar（以及隐藏在client-stub文件夹中的另外两个jar）。在那里，我主要得到一个“ClassNotFoundExeption：Main”，例如

```
java.lang.ClassNotFoundException: Main
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at org.glassfish.appclient.client.acc.ACCClassLoader.findClass(ACCClassLoader.java:212)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:247)
at org.glassfish.appclient.client.acc.FacadeLaunchable.getMainClass(FacadeLaunchable.java:262)
at org.glassfish.appclient.client.acc.AppClientContainer.setClient(AppClientContainer.java:324)
at org.glassfish.appclient.client.acc.AppClientContainerBuilder.createContainer(AppClientContainerBuilder.java:185)
at org.glassfish.appclient.client.acc.AppClientContainerBuilder.newContainer(AppClientContainerBuilder.java:172)
at org.glassfish.appclient.client.AppClientFacade.createContainerForAppClientArchiveOrDir(AppClientFacade.java:492)
at org.glassfish.appclient.client.AppClientFacade.createContainer(AppClientFacade.java:454)
at org.glassfish.appclient.client.AppClientFacade.prepareACC(AppClientFacade.java:269)
at org.glassfish.appclient.client.acc.agent.AppClientContainerAgent.premain(AppClientContainerAgent.java:82)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:323)
at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:338) 
```

因此，对于注入，我的代码如下所示：

```
public class Main {
@EJB (mappedName="ejb/customerBean")
public static CustomerInterface customerBean;
@EJB (mappedName="ejb/productBean")
public static ProductInterface productBean;

public static void main(String[] args) {
    try{
        Main m = new Main();
        m.runDialog();
    }
    catch (Exception e){
        e.printStackTrace();
    }

}

/* (non-Java-doc)
 * @see java.lang.Object#Object()
 */
public Main() {
    super();

}
private void runDialog() throws Exception{
    System.out.println("Test");
    List<ProductDTO> productList = productBean.getAllProducts();

... 
```

我的远程界面如下所示：

```
@Remote
public interface ProductInterface {

public int addProduct(String productName);
public void deleteProduct(int prodid);
public void updateProduct(int prodid, String newName);
List<ProductDTO> getAllProducts(); 
```

...

我的实现是这样的：

```
/**
 * Session Bean implementation productInterface
 *  */
@Stateless(mappedName="ejb/productBean")
@LocalBean
@WebService
public class ProductBean implements ProductInterface {

@EJB ProductEAO eao;
@EJB Conversion conv;

/**
 * Default constructor. 
 */
public ProductBean() {
    // TODO Auto-generated constructor stub
}

@Override
public int addProduct(String prodName) {
    return eao.addProduct(prodName);
}

@Override
public List<ProductDTO> getAllProducts() {

         List<ProductDTO> result = new ArrayList<ProductDTO>();
         List<Product> allProducts = eao.allProducts();
            for (Product pr : allProducts) {
               ProductDTO ci = conv.fromProduct(pr);
                result.add(ci);
            }
            return result;

} 
```

... 以此类推（接口需要的所有方法都实现了，这里尽量缩短）

而 MANIFEST.MF 只是

```
Manifest-Version: 1.0
Main-Class: Main 
```

我已经尝试了很多类似 JNDI 查找，给出 bean 名称（参见示例）等。但是要么找不到接口（查找），要么 bean 简单地为空。

但是我也不太确定如何运行应用程序客户端。我认为 glassfishs appclient 是正确的起点？它应该是一个控制台交互，所以没有摆动组件或类似的东西。

现在，我会感谢我可能错过的任何建议。

干杯:)

* * *

找到了解决方案。不知何故，JNDI 现在可以工作了。另一个问题是我的数据库查询返回了一个对象而不是原始值或字符串——这导致了缓冲区错误。

但是，我仍然对如何正确导出运行应用程序客户端感到困惑。也许有人有想法？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:30:54.897

这里有一个很好的例子：[Create and Run a JEE6 Client Application with Netbeans 6.8 and Glassfish V3 - Part 2: Enhancing and Deploying the Application](http://log4ray.blogspot.com/2010/02/create-and-run-jee6-client-application_17.html)。它已经有几年历史了，但它确实提供了一个很好的概述。

# c# - 在 C# 中正确使用并行 for 循环？

> ID：14222037
> 
> 赞同：5
> 
> 时间：2013-01-08T18:53:35.470
> 
> 标签：c#, multithreading

在此示例中，`Parallel.For`如果我想将一次可以执行该功能的线程数限制`DoWork`为 10 个，那么循环的正确使用是否正确？是否会阻塞其他线程，直到十个线程之一可用？如果不是，有什么更好的多线程解决方案仍然可以让我执行该功能 6000 多次？

```
class Program
{
    static void Main(string[] args)
    {
        ThreadExample ex = new ThreadExample(); 
    }
}

public class ThreadExample
{
    int limit = 6411; 

    public ThreadExample()
    {
        Console.WriteLine("Starting threads...");
        int temp = 0; 
        Parallel.For(temp, limit, new ParallelOptions { MaxDegreeOfParallelism = 10 }, i =>
        {
            DoWork(temp);
            temp++; 
        }); 
    }

    public void DoWork(int info)
    {
        //Thread.Sleep(50); //doing some work here. 

        int num = info * 5; 

        Console.WriteLine("Thread: {0}      Result: {1}", info.ToString(), num.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T18:59:37.523

您需要使用`i`传递给 lambda 函数作为索引。`Parallel.For`使您免于使用循环计数器的麻烦，但您需要使用它！

```
 Parallel.For(0, limit, new ParallelOptions { MaxDegreeOfParallelism = 10 }, i =>
    {
        DoWork(i);
    }); 
```

至于你的其他问题：

*   是的，这将正确限制同时工作的线程数量。
*   没有线程被阻塞。迭代被排队，一旦线程变得可用，它就会从队列中获取下一个迭代（以同步方式）来处理。

# objective-c - 检查对象数组是否包含字符串

> ID：14222038
> 
> 赞同：-1
> 
> 时间：2013-01-08T18:53:38.770
> 
> 标签：objective-c, cocoa, nsarray, nsdictionary

我有一个`UILocalNotification`s 数组。在每个通知中都有一个`userInfo`属性是`NSDictionary`. 在 userInfo 我设置了一个键`@"ID"`，值是一个唯一的 ID。

所以我想要做的是检查通知数组是否有任何 userInfo 属性具有`@"test"`key 的值，`@"ID"`然后返回`YES`else `NO`。我知道如何使用 for 循环来实现这一点，但我想知道是否有更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:21:52.727

我猜你不太可能比基本的快速枚举在性能方面做得更好——也许使用“带选项枚举”方法之一，允许并发——但肯定有更优雅的方法来编写你的内容重新尝试做：

```
[[array valueForKeyPath:@"userInfo.ID"] containsObject:@"test"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:59:00.207

您可以使用`-[NSArray indexesOfObjectsPassingTest:]`which 接受一个为匹配对象返回 YES 的块，否则为 NO：

```
NSArray *array = ...;
NSIndexSet *matchingIndexes = [array indexesOfObjectsPassingTest:^BOOL(UILocalNotification *notification, NSUInteger idx, BOOL *stop) {
    return [notification.userInfo[@"ID"] isEqualToString:@"test"];
}];
return [matchingIndexes count] != 0; 
```

# twitter-bootstrap - 带有辅助导航的 twitter-bootstrap 选项卡

> ID：14222044
> 
> 赞同：0
> 
> 时间：2013-01-08T18:54:01.577
> 
> 标签：twitter-bootstrap, tabs

我不知道这是否可能，但想检查一下。我在每个选项卡内容窗格上设置了 3 个选项卡，并带有额外的向前和向后链接。我需要前向和后向链接也与主选项卡导航绑定。现在它们不会触发主导航选项卡上的活动状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:52:23.380

我认为您将前向和后向链接链接到`.tab-content`您应该绑定标签的位置`.nav-tabs a`。

这样你就可以触发`$nextTab.tab('show')`which 将负责标签导航和标签内容。

检查此示例以更好地理解我的观点：http: [//jsfiddle.net/Sherbrow/3hsBB/](http://jsfiddle.net/Sherbrow/3hsBB/)

# java - 使用 ini4j 更改文件夹图标会导致访问被拒绝异常

> ID：14222045
> 
> 赞同：0
> 
> 时间：2013-01-08T18:54:02.730
> 
> 标签：java, filenotfoundexception, access-denied, ini4j, desktop.ini

我正在尝试使用 ini4j 更改文件夹图标。

我有以下文件结构

*   F:\TBD\ChangeICon\Icons\avi.ico - （包含图标的文件夹）
*   F:\TBD\ChangeICon\Me\desktop.ini - （我需要更改图标的文件夹）

desktop.ini 有以下数据：

```
[.ShellClassInfo]
IconResource=C:\Windows\system32\SHELL32.dll,4 
```

我在下面的 java 方法中对图标和文件夹进行了硬编码，如果我复制文件名和图标路径字符串，我可以通过**windows start >> run**访问它。我不相信路径是错误的。

当我在 ref 1 处运行应用程序时（参见代码中的 ref 注释），如果我检查 ini 的值（在 REF 1 处）：

```
{.ShellClassInfo=[{IconResource=[C:Windowssystem32SHELL32.dll,4]}]} 
```

这与上面的 ini 文件中的值再次匹配。

然后我尝试设置值（REF2）我可以看到该值实际上确实发生了变化

```
{.ShellClassInfo=[{IconResource=[F:/TBD/ChangeICon/Icons/avi.ico,0]}]} 
```

但是当调用 store 方法时它会抛出一个异常（REF3

```
private boolean setIniValue2() {
    final String filename = "F:/TBD/ChangeICon/Me";
    final String icon = "F:/TBD/ChangeICon/Icons/avi.ico";
    try {           
        Ini ini = new Ini(new File(filename + "/" + "desktop.ini"));    // REF1        
        ini.put(".ShellClassInfo", "IconResource", icon + ",0");        // REF2 
        ini.store();
        return true;
    } catch (FileNotFoundException e) {                                 // REF3
        e.printStackTrace();
        throw new RuntimeException("Error finding file: " + filename + " when trying to change icon", e);
    } catch (IOException e) {
        e.printStackTrace();
        throw new RuntimeException("Error accessing file: " + filename + " when trying to change icon", e);
    } 
} 
```

例外：

```
java.io.FileNotFoundException: F:\TBD\ChangeICon\Me\desktop.ini (Access is denied)
at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(Unknown Source)
at java.io.FileOutputStream.<init>(Unknown Source)
at org.ini4j.Ini.store(Ini.java:144)
at org.ini4j.Ini.store(Ini.java:129)
at za.co.chrispie.io.wrappers.ini.ini4JWrapper.setIniValue2(ini4JWrapper.java:48)
at za.co.chrispie.io.wrappers.ini.ini4JWrapper.setFolderIcon(ini4JWrapper.java:21)
at za.co.chrispie.TestChangeIcon.testChangeFolderIcon(TestChangeIcon.java:14)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at junit.framework.TestCase.runTest(TestCase.java:168)
at junit.framework.TestCase.runBare(TestCase.java:134)
at junit.framework.TestResult$1.protect(TestResult.java:110)
at junit.framework.TestResult.runProtected(TestResult.java:128)
at junit.framework.TestResult.run(TestResult.java:113)
at junit.framework.TestCase.run(TestCase.java:124)
at junit.framework.TestSuite.runTest(TestSuite.java:232)
at junit.framework.TestSuite.run(TestSuite.java:227)
at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我可以在记事本中打开 desktop.ini 文件并将其编辑为如下所示并保存并更改图标。

```
[.ShellClassInfo]
IconResource=F:\TBD\ChangeICon\Icons\avi.ico,0 
```

为什么java程序无权更改ini文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:57:33.197

这不是java的问题。这是窗户的问题。

我相信您正在从命令提示符运行 java，并且它可能具有与记事本不同的安全特权。尝试以管理员身份运行程序。我现在不在 Windows 上，所以我无法检查它，但据我记得`ranas`Windows shell 中有命令。

# html - 如何制作具有全宽标题和固定宽度正文的响应式 Web 布局

> ID：14222046
> 
> 赞同：1
> 
> 时间：2013-01-08T18:54:10.210
> 
> 标签：html, css

我有一个问题，我在几个不同的网站上看到过，但我一直无法找到解决方案。我注意到许多其他人也遇到过类似的问题，但我看到的每个修复都无法在我目前正在处理的网站上运行。基本上我想要做的是有一个响应式布局，其标题具有跨越整个窗口的重复背景和具有固定宽度的主体。基本的 html 如下所示：

```
<html>
<body>
    <div id="header">Header content</div>
    <div id="main-content">Main content here</div>
</body>
</html> 
```

CSS是这样的：

```
html, body{
      width:100%;
}
#header{
      width:100%;
}
#main-content{
      width:1000px;
} 
```

这段代码并不代表我正在处理的网站上的实际内容，而是让您了解我们正在尝试做的事情。要查看实际的 html、css 等，请访问[http://236887.site-show.com/](http://236887.site-show.com/)并查看它。该站点最初看起来不错，但是如果您缩小窗口的大小以便有一个水平滚动条，然后向右滚动并查看标题，您会看到重复的背景不会达到全宽.

我确实发现的一件事是删除主要内容上的 width:1000px 确实解决了这个问题。但是，我们需要将主内容区域设置为该宽度。我也尝试将溢出设置为隐藏并在标题上设置浮动，但似乎没有任何问题可以解决这个问题。

对于在平板电脑、智能手机等上运行的 Android/iOS 系统来说，这尤其是一个问题。您可以在此问题上给我的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:04:05.280

问题是您的*主要内容*div 设置为*1000px*（水平填充为*30px*），而您的 CSS 文件将您的标题指定为*960px*。增加标题的宽度以匹配您的内容将解决问题。

这是修复的代码：

```
.grid-50-50 {
  display: table;
  width: 1030px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:24:33.460

如果您在 HTML5 中执行此操作，我建议您使用 100%`<header>`标记，然后添加 100% div 'wrapper'....这样您可以获得更大的灵活性。

但是为此...如果您不想编辑标题，请在**正文标签**中将 min 设置为 1030px ：

`body {min-width: 1030px;}`

:)

# javascript - 使用 JavaScript (Acrobat Pro) 将 PDF 页面布局设置为“TwoPageLeft”

> ID：14222048
> 
> 赞同：0
> 
> 时间：2013-01-08T18:54:15.873
> 
> 标签：javascript, pdf, acrobat

我想更改（或添加，如果它不存在）到具有多页的 PDF 文件，该设置将强制 PDF 以两页模式打开（例如 PageLayout：TwoPageLeft）。我尝试使用这种 JavaScript（以 Enfocus FullSwitch 为例）：

```
if(($error == null) && ($doc != null))
{
try
{
    $outfile = $outfolder + '/' + $filename + ".pdf";
    $doc.layout = "TwoPageLeft";
    $doc.saveAs( {cPath : $outfile, bCopy : true});
    $outfiles.push($outfile);
}
catch(theError)
{
    $error = theError;
    $doc.closeDoc( {bNoSave : true} );
}
} 
```

但它不像我想要的那样工作（它将用 Acrobat Pro 打开并保存为一个新文件，而不包括有关布局的设置）。

有谁可以帮助我更正该代码以让 JS 打开 PDF 文件，在 PDF 数据中设置布局并将其保存出来？

PDF 文件中的可读信息应如下所示：

```
PageLayout/TwoPageLeft/Type/Catalog/ViewerPreferences 
```

有关信息，我正在使用 FullSwitch (Enfocus) 处理工作流中的文件，使用 Acrobat Pro，此时，它只是保存文件而不添加设置。

我在最近搜索的所有网络中都找不到自己的答案，所以我问...</p>

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:37:51.813

我认为您从 Acrobat JavaScript 参考文档中复制了“this.layout = ...”行，对吗？

当您编写 JavaScript 以供 Switch 执行（或者更确切地说是让 Switch 指示 Acrobat 为您执行）时，您应该使用“$doc”变量来引用 Switch 正在处理的文档。

所以尝试换行：

```
$this.layout = "TwoColumnLeft"; 
```

至

```
$doc.layout = "TwoColumnLeft"; 
```

正如您所说的其余代码有效并且文档保存时没有错误，我假设您的其余代码是正确的。此处提出的更改将在您正在查找的文档中进行调整。

# php - 将值从 jQuery 传递到 ONE 文件中的 PHP 脚本

> ID：14222053
> 
> 赞同：0
> 
> 时间：2013-01-08T18:54:26.510
> 
> 标签：php, jquery

下面是 index.php 文件中的一个 GetWidth 和 GetHeight 函数的工作原理。（它们不是最终函数，所以不重要。）重要的部分由 /* IMPORTANT HERE */ 标记，我想要完成的是传递我使用 jQuery Window Portal Height / Width 获得的变量并将其传递给 PHP 脚本换句话说，当我从 GetWidth() 获取值时，它应该转到 w=120 或将 120 值替换为当前宽度和高度相同的值。如有语法错误请忽略。

我只想弄清楚如何将值从 jQuery 传递到 PHP 脚本。同样在将来我想添加 resize 方法，以便在调整窗口大小时值将是动态的。

```
<html>
    <head>
        <title></title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script>
            $(window).resize(function () {
      $('#msg').text('Browser (Width : ' 
                         + $(window).width() 
         + ' , Height :' + $(window).height() + ' )');
        });

        $(document).ready(function() {
       // DOCUMENT READY

       function GetWidth() {
            if (self.innerWidth) {
                    return self.innerWidth;
                }
                else if (document.documentElement && 
                             document.documentElement.clientHeight) {
                    return document.documentElement.clientWidth;
                }
                else if (document.body) {
                    return 0;
                }
                return x;
            }

            function GetHeight() {
                if (self.innerHeight) {
                    y = self.innerHeight;
                }
                else if (document.documentElement && 
                           document.documentElement.clientHeight) {
                    return
                                document.documentElement.clientHeight;
                }
                else if (document.body) {
                    return 0;
                }
                return y;
            }

// This is for when it first loads.                                
$('#TEXT').text('W: ' + $(window).width() + ' , H:' + $(window).height() + y);

// This is for when window gets resized.
$(window).resize(function () {
    $('#TEXT').text('W: ' + $(window).width() + ' , H:' + $(window).height());
});

  // DOCUMENT READY    
  });
 </script>
 </head>

 <body>

Info Area:<br>
<div id="TEXT"></div>

/* IMPORTANT HERE */
<!-- img src="timthumb.php?src=URL...image.jpg&h=180&w=120" -->
/* IMPORTANT HERE */

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:01:18.813

您不能将 jQuery 或 JS 变量传递给 PHP 脚本。基本上，PHP 脚本在服务器级别执行，只有 HTML、JS 和 CSS 将返回到浏览器。然后浏览器将呈现它。因此，当浏览器执行您的 JS 方法时，PHP 脚本已经执行。

你可以使用 Ajax。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:08:05.287

您不能将值从 jQuery 传递到 PHP，因为 PHP 是一种[服务器端](http://en.wikipedia.org/wiki/Server-side_scripting)语言，而 jQuery 是一种[客户端](http://en.wikipedia.org/wiki/Client-side_scripting)语言。但是有一种方法可以将数据从客户端传递到服务器端，即[AJAX](http://api.jquery.com/jQuery.ajax/)

[https://softwareengineering.stackexchange.com/questions/171203/what-are-the-difference-between-server-side-and-client-side-programming](https://softwareengineering.stackexchange.com/questions/171203/what-are-the-difference-between-server-side-and-client-side-programming)

[为什么 PHP 脚本不能在 Web 浏览器中工作？](https://stackoverflow.com/questions/2034501/how-does-php-work)

[http://www.scriptingok.com/tutorial/Server-side-vs-Client-side](http://www.scriptingok.com/tutorial/Server-side-vs-Client-side)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:23:21.610

欢迎来到stackoverflow！
问题是 php 正在服务器中编译，浏览器从服务器接收 html 和 javascript 文件，
然后您的浏览器编译您的 javascript 和 html 代码
，因此 javascript 无法更改 phpcode
您可以使您的 html whit javascript 像这样：

```
image = new Image(); 
image.src = "timthumb.php?src=URL...image.jpg&h="+ hgt + "&w=" + wth;

image.onLoad=function(){ $("img").attr({src: image.src}); } 
```

# android - 打开下载的 SQLite 数据库时出错

> ID：14222059
> 
> 赞同：1
> 
> 时间：2013-01-08T18:54:49.150
> 
> 标签：android, sqlite

我正在从网站下载数据库。下载的数据库被调用`db.php` ，它将存储在 name 下的 data/data/my.package.name/files 中`FishingMatey.db`。该数据库位于 DDMS 的文件系统中，我可以在 PC 上的 SQLite Studio 中打开它。在那里，我的数据库充满了正确的表格和正确的数据。这是我下载 SQLite 数据库的代码：

```
public boolean downloadDatabase() {
    try {
        // Log.d(TAG, "downloading database");
        URL url = new URL("http://myurl.com/db.php");

        // Open a connection to that URL */
        URLConnection ucon = url.openConnection();

        // Define InputStreams to read from the URLConnection
        InputStream is = ucon.getInputStream();
        BufferedInputStream bis = new BufferedInputStream(is);

        // Read bytes to the Buffer until there is nothing more to read(-1)
        ByteArrayBuffer baf = new ByteArrayBuffer(50);
        int current = 0;
        while ((current = bis.read()) != -1) {
            baf.append((byte) current);
        }

        // Convert the Bytes read to a String
        FileOutputStream fos = null;
        // Select storage location
        fos = this.context.openFileOutput(DATABASE_NAME, Context.MODE_PRIVATE);

        fos.write(baf.toByteArray());
        fos.close();
    } catch (IOException e) {
        Log.e("downloadDatabase", "downloadDatabase Error: ", e);
        return false;
    } catch (NullPointerException e) {
        Log.e("downloadDatabase", "downloadDatabase Error: ", e);
        return false;
    } catch (Exception e) {
        Log.e("downloadDatabase", "downloadDatabase Error: ", e);
        return false;
    }
    return true;
} 
```

我的问题：我可以用 打开数据库 `SQLiteDatabase db = SQLiteDatabase.openDatabase("/data/data/com.example.menuswitcher/files/" + DATABASE_NAME, null, SQLiteDatabase.OPEN_READONLY);`，但是如果我输入`db.query(DATABASE_TABLE_Bewirtschafter, null, null, null, null, null, null);` 我会收到以下错误：

```
01-08 19:52:22.366: E/AndroidRuntime(6157): FATAL EXCEPTION: main
01-08 19:52:22.366: E/AndroidRuntime(6157): android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1 
```

这是我在 Activity 中的调用方式： this.b3.setOnClickListener(new OnClickListener() {

```
 public void onClick(View v) {
            // TODO Auto-generated method stub
            DBAccess dbAccess = new DBAccess(HauptmenueActivity.this, 1, "FishingMatey.db");
            if (dbAccess.downloadDatabase()) {
                dbAccess.initDatabase();
                Cursor cur = dbAccess.createBewirtschafterAllCursor();
                Log.v("b3", cur.getString(cur.getColumnIndex("name")));
            } else {
                Log.e("b3", "Error!");
            }
        }
    }); 
```

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:02:09.110

```
android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1 
```

此错误意味着您`cursor.moveToFirst()`在尝试读取光标之前忘记调用。

```
Cursor cursor = db.query(DATABASE_TABLE_Bewirtschafter, null, null, null, null, null, null);
if(cursor.moveToFirst()) {
    // Do something with the first row, if it exists
} 
```

# css - 为什么中间的边框比较厚？

> ID：14222066
> 
> 赞同：1
> 
> 时间：2013-01-08T18:55:14.887
> 
> 标签：css

我正在尝试仅使用 CSS 和 HTML 创建一条曲线。由于某种原因，中间的线比两侧的线粗。为什么会这样？

![在此处输入图像描述](../Images/1e2d0865fbd9cf11c15c5ad10f4cc6c6.png)

HTML：

```
<div class="smile"></div> 
```

CSS：

```
.smile{
    width: 150px;
    height: 80px;
    border-radius: 50%;
    -moz-border-radius: 50%;
    -webkit-border-radius: 50%; 
    border-bottom: 5px solid black;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:06:05.273

它的厚度向中间增加，因为您已将`border-width`div 的底部边框的属性指定为`5px`. 但是因为没有声明左右边框属性，所以边框必须平滑地渲染一条线，`0px`以便`5px`渲染为适当的圆角。因此厚度逐渐增加。

# ruby-on-rails - 将 Rails 2 路由更改为 Rails 3 路由

> ID：14222072
> 
> 赞同：0
> 
> 时间：2013-01-08T18:55:45.007
> 
> 标签：ruby-on-rails

嗨，我正在尝试从 rails 2 项目更改我的路线以匹配 rails 3 中的语法。我将如何更改：

```
 map.connect "/stylesheets/:action.css", 
            :controller => "stylesheets", 
            :format => "css" 
```

以便`:action`可以与样式表控制器中的操作相匹配？会是这样吗？

`match 'stylesheets/:action.css', :to => "stylesheets#{:action}"`

`:format`另外， rails 3 的路线中的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:06:25.617

你的解决方案几乎就在那里。您唯一需要更改的是您`:action`在`:to`值中引用的方式。

```
match 'stylesheets/:action.css', :to => 'stylesheets#:action', :format => :css 
```

如您所见， for 的语法`:format`没有改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:03:29.767

我认为它会像：

```
match 'stylesheets/:action', :controller => :stylesheets, :defaults => { :format => :css } 
```

或者您可以使用将您的路线限制为**.css**格式`:constraints => { :format => 'json' }`

我建议您通读[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# javascript - 适用于所有浏览器的跨域文件上传解决方案？

> ID：14222075
> 
> 赞同：0
> 
> 时间：2013-01-08T18:55:47.923
> 
> 标签：javascript, internet-explorer, xmlhttprequest, cross-domain, fileapi

这是我的问题：

我有 2 个 Web 应用程序，想将文件从第一个上传到第二个。所以我不得不面对“同源政策”的问题。

就我而言，我拥有第二个网站，而第一个不是我的。它适用于我现有 Web 应用程序的新客户，它是用 php 开发的，由于我缺乏 php 知识，我无法进行服务器端 php 编码。所以我只能将一些 JavaScript 代码放入其中一个页面。所以我也没有代理服务器选项。

第三个问题是我必须在所有浏览器（包括 IE8+）中上传这个文件；所以我也不能使用 File API 和 XHR。

我的噩梦有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:04:46.667

我不知道您需要向上游发送多少数据，但是，这里有两个选项：

**1) 提出在 URL 中包含所有相关数据的图像请求：**

将您要向上游发送的数据解析为查询字符串参数，这些参数将提交给一个特殊的 Web 服务，该服务知道如何从 URL 读取和收集这些数据。服务器响应应该是空的。注意：URL 不应超过 2000 个字符。如果您有一个大型数据集，您将需要使用选项 2。

例子：

```
/* I'd recommend doing the following with jQuery or some other JS framework */
var img = document.createElement('img');
img.src = "http://website2.com/uploadHandler" + 
           "?data1="+encodeURIComponent(data1) +
           "&data2="+encodeURIComponent(data2);
document.getElementsByTagName("body")[0].appendChild( img ); 
```

输出（在正文标签的末尾）：

```
<img src="http://website2.com/uploadHandler?data1=myName&data2=myInformation" /> 
```

这将导致向上述地址的服务器发出 HTTP GET 请求。诀窍是您实际上不会提供图像，而是从请求中收集数据。

**2）表格邮寄：**

使用 javascript 创建一个表单并使用包含您要上传的数据的输入字段填充该表单。您可以使用 myForm.submit() 自动提交此表单。使用 jQuery，这看起来像：

```
$(document.body).append( $('\
   <form name="myform" action="http://website2.com/uploadHandler">\
     <input type="text" name="data1" value="myName" />\
     <input type="text" name="data2" value="myInformation" />\
   </form>') );
document.myform.submit(); 
```

使用此技术将导致加载新页面。但是，您可以在服务器端使用重定向来重定向到原始页面。如果您选择重定向，请阅读以下内容：[http ://www.theserverside.com/news/1365146/Redirect-After-Post](http://www.theserverside.com/news/1365146/Redirect-After-Post)

# cocoa - Cocoa 应用程序在控制器之间传递对象

> ID：14222077
> 
> 赞同：3
> 
> 时间：2013-01-08T18:55:56.160
> 
> 标签：cocoa

我正在构建一个 Cocoa 应用程序，它由一个分为 3 个部分的窗口组成。每个部分负责自己的业务，在表格视图、弹出按钮等之间有大约 30 个控件。
我从一个控制器开始，但事情很容易变得混乱，所以我决定将逻辑分解为 3 个控制器对象（视图的每个部分一个）。然后我在 Interface Builder 上创建了 NSObject 引用，并连接了所有的出口、动作、数据源和委托。到现在为止还挺好。

现在，这三个部分相互传递对象，因此我需要一种方法将对象从一个类设置到另一个类。有问题的对象是一个类变量，但由于我没有引用该对象，我不知道如何传递它。

有没有办法做到这一点，或者这只是整体上的错误方法？

**解决方案：**

正如 Sergio 在下面的评论之一中提到的，解决方案似乎是在每个控制器中创建对其他控制器的弱引用作为 IBOutlet，然后在 Xcode Interface Builder 中将控制器对象链接在一起。因此，现在每个控制器都可以访问所引用控制器的公开方法和变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:00:30.547

> 现在，这三个部分相互传递对象，因此我需要一种方法将对象从一个类设置到另一个类。有问题的对象是一个类变量，但由于我没有引用该对象，我不知道如何传递它。

您的设计中似乎缺少的是模型（如[Model-View-Controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)中）。这将是一个封装应用程序所有状态的类，即使它是临时状态，以便每个受影响的对象都可以访问它。

这种模型类的一个简单实现是单例，因此它在您的所有控制器中都很容易使用。看看[这里](https://stackoverflow.com/questions/145154/what-should-my-objective-c-singleton-look-like)关于在 Objective-C 中实现单例的一些想法。

一旦你有了你的模型类，你的控制器就可以像这样访问它，例如：

```
[MyModel sharedModel].myObject = ...; 
```

这种方法很好，IMO，如果您朝着为您的设计创建模型的方向前进是有意义的。这取决于您的控制器共享的对象的语义。因此，可能有更适合您的情况的替代解决方案。例如，一个控制器可以是共享对象的所有者，而另外两个可以在 init 上接收对第一个控制器的引用，以便他们可以访问其公共属性。

# java - 使用 html 将 Java Slick 游戏放到网站上

> ID：14222078
> 
> 赞同：0
> 
> 时间：2013-01-08T18:55:56.347
> 
> 标签：java, html, applet, slick2d

我使用 Slick 制作了一个 2D Java 游戏，它扩展了 StateBasedGame，它没有扩展 JApplet，因此它不是真正的应用程序，但从下面的链接中它表明 StateBasedGame 是 Slick API 的一部分，它可以用作小程序如果 html 代码编码正确，这里是链接：

[http://ninjacave.com/slickapplet](http://ninjacave.com/slickapplet)

我尝试修改它以适合我的代码并提出以下内容：

```
 <applet code="org.lwjgl.util.applet.AppletLoader" 
        archive="lwjgl_util_applet.jar" 
        codebase="." 
        width="640" height="480">

  <param name="al_title" value="Ham Blaster"> 
  <param name="al_main" value="org.newdawn.slick.AppletGameContainer"> 
  <param name="game" value="org.javagame.Game">

  <param name="al_jars" value="racegame.jar, lwjgl.jar, slick.jar"> 

  <param name="al_windows" value="windows_natives.jar"> 
  <param name="al_linux" value="linux_natives.jar"> 
  <param name="al_mac" value="macosx_natives.jar"> 

  <param name="separate_jvm" value="true"> 
</applet> 
```

我基本上按照指南所说的做了，我在eclipse中制作了我的游戏的.jar文件并将其命名为racegame.jar，我下载了lwjgl-2.8.5并从网站上复制了html代码并为我的游戏进行了编辑（代码如上所示）。lwjgl 在我的桌面上创建了一个文件夹，我打开它，进入名为 jar 的文件夹（保存所有 jar 文件的地方）并放入我的 jar 文件，即racegame.jar，当我收到以下错误时试图运行html代码：

ClassNotFoundException
org.lwjgl.util.applet.AppletLoader

这是否意味着在我的 lwjgl 中找不到 AppletLoader？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:05:18.813

# gcc - 如何为 GCC 自定义“-l”标志的含义？

> ID：14222080
> 
> 赞同：2
> 
> 时间：2013-01-08T18:56:00.350
> 
> 标签：gcc, pkg-config

我对 GCC 有疑问，我想以`-l`自定义方式使用这些标志。

我想为 指定的对应 libfoo 指定搜索路径`-lfoo`，我还想覆盖 GCC 中的任何内部搜索路径，我不希望 GCC 使用任何可以解决符号的随机库，我只希望 GCC指定时使用真正特定的库进行编译`-l`。

我知道有诸如此类的实用程序，`pkg-config`但我的问题更加以 gcc 为中心，因为我专注于对编译步骤进行更多控制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T02:22:34.323

有一个未记录的语法用于指定 gcc 的绝对库路径：

```
$ gcc -o test test.c -l:/usr/lib/libfoo.so  #(note the colon) 
```

见这里：[https ://code.ros.org/lurker/message/20130119.001059.fad11362.de.html](https://code.ros.org/lurker/message/20130119.001059.fad11362.de.html)

一个更标准的方法就是：

```
$ gcc -o test test.c /usr/lib/libfoo.so 
```

实际上，使用该`-l:`语法的唯一原因是，如果您的搜索路径中有一个同名的冲突库，并且您无法更改搜索路径。

# ruby-on-rails - Rails 应用程序启动但出现错误

> ID：14222084
> 
> 赞同：1
> 
> 时间：2013-01-08T18:56:25.117
> 
> 标签：ruby-on-rails

我的 Rails 应用程序启动但给我一个 No Method 错误。我不确定在没有的东西上显然调用了什么方法。它不能是某个网站页面，因为它发生在我尝试访问的每个网址上。任何人都可以暗示它在哪里失败？

全栈日志：

```
vendor/ruby/1.9.1/gems/better_errors-0.0.8/lib/better_errors/error_frame.rb:7:in `block in from_exception'
vendor/ruby/1.9.1/gems/better_errors-0.0.8/lib/better_errors/error_frame.rb:4:in `each'
vendor/ruby/1.9.1/gems/better_errors-0.0.8/lib/better_errors/error_frame.rb:4:in `each_with_index'
vendor/ruby/1.9.1/gems/better_errors-0.0.8/lib/better_errors/error_frame.rb:4:in `each'
vendor/ruby/1.9.1/gems/better_errors-0.0.8/lib/better_errors/error_frame.rb:4:in `map'
vendor/ruby/1.9.1/gems/better_errors-0.0.8/lib/better_errors/error_frame.rb:4:in `from_exception'
vendor/ruby/1.9.1/gems/better_errors-0.0.8/lib/better_errors/error_page.rb:45:in `backtrace_frames'
vendor/ruby/1.9.1/gems/better_errors-0.0.8/lib/better_errors/middleware.rb:31:in `log_exception'
vendor/ruby/1.9.1/gems/better_errors-0.0.8/lib/better_errors/middleware.rb:23:in `rescue in app_call'
vendor/ruby/1.9.1/gems/better_errors-0.0.8/lib/better_errors/middleware.rb:20:in `app_call'
vendor/ruby/1.9.1/gems/better_errors-0.0.8/lib/better_errors/middleware.rb:14:in `call'
vendor/ruby/1.9.1/gems/bullet-4.1.5/lib/bullet/rack.rb:11:in `call'
vendor/ruby/1.9.1/gems/sass-3.2.0/lib/sass/plugin/rack.rb:54:in `call'
vendor/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
vendor/ruby/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
vendor/ruby/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:25:in `call'
vendor/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
vendor/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
vendor/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
vendor/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
vendor/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
vendor/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
vendor/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
vendor/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
vendor/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
vendor/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__2841213657923326046__call__4410644436419050805__callbacks'
vendor/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
vendor/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
vendor/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
vendor/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
vendor/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
vendor/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
vendor/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
vendor/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
vendor/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
vendor/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
vendor/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
vendor/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
vendor/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
vendor/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
vendor/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
vendor/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
vendor/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
vendor/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
vendor/ruby/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
vendor/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
vendor/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
/Users/<user>/.rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/<user>/.rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/<user>/.rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

给出的错误：

```
NoMethodError in PagesController#home

undefined method `[]' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:38:36.090

我相信你已经超出了这个范围，但只是插话，我有同样的错误。我注释掉了 better_errors gem，重新捆绑，重新运行我的应用程序，发现我在其他地方遇到了错误。我不知道为什么 better_errors 无法处理它，但是一旦我修复了其他错误，我重新启用了 better_errors，一切都恢复了正常。

奇怪的是，我以前对宝石没有任何问题。我喜欢它。

# forms - Delphi XE2中没有源的另一个包中的基本表单的可视化继承表单

> ID：14222085
> 
> 赞同：4
> 
> 时间：2013-01-08T18:56:39.100
> 
> 标签：forms, delphi, inheritance, delphi-xe2

有一种情况：两个包：“Base”和“Descendant”以及一个应用程序“Example”。Base 包和 Example 应用程序可以在一个项目组中，但 Descendant 包必须在另一个项目组中，并且没有任何 Base 和 Example 的源代码。

*这种操作的目的是向将使用 Descendant 包的工作人员隐藏 Base 和 Application 源。*

Base 包包含一个表单：TFormBase，其中包含一些组件和一些代码。我构建它并获取一些二进制文件：bpl、dcp 等...

```
type
  TFormBase = class(TForm)
    Panel1: TPanel;
    BOk: TButton;
    BCancel: TButton;
    procedure BOkClick(Sender: TObject);
    procedure BCancelClick(Sender: TObject);
  private
  protected
    function GetOkButtonCaption: string; virtual;
    function GetCancelButtonCaption: string; virtual;
  public
  end;

implementation

{$R *.dfm}

procedure TFormBase.BCancelClick(Sender: TObject);
begin
  ShowMessage('"' + GetCancelButtonCaption + '" button has been pressed');
end;

procedure TFormBase.BOkClick(Sender: TObject);
begin
  ShowMessage('"' + GetOkButtonCaption + '" button has been pressed');
end;

function TFormBase.GetCancelButtonCaption: string;
begin
  Result := 'Cancel';
end;

function TFormBase.GetOkButtonCaption: string;
begin
  Result := 'Ok';
end; 
```

后代包包含 TFormDescendant = class(TFormBase)

```
type
  TFormDescendant = class(TFormBase)
  private
  protected
    function GetOkButtonCaption: string; override;
    function GetCancelButtonCaption: string; override;
  public
  end;

implementation

{$R *.dfm}

function TFormDescendant.GetCancelButtonCaption: string;
begin
  Result := 'Descendant Cancel';
end;

function TFormDescendant.GetOkButtonCaption: string;
begin
  Result := 'Descendant Ok';
end; 
```

以及 Descendant.dfm 的代码：

```
inherited FormDescendant: TFormDescendant
  Caption = 'FormDescendant'
end 
```

后代.dpr：

```
requires
  rtl,
  vcl,
  Base;

contains
  Descendant in 'Descendant.pas' {FormDescendant}; 
```

创建 FormDescendant 时，它应该看起来像 FormBase，因为它只是从它继承而来。我们可以在这个 FormDescendant 保存 FormBase 外观上添加一些其他组件。

但是当我们尝试在 Delphi IDE 中打开 FormDescendant 时，它会因“创建表单时出错：未找到‘TFormBase’的祖先”而崩溃。没错：Base.bpl 只包含二进制代码，而 Delphi 不知道 TBaseForm 在设计时的样子。

**在 Delphi 中打开 FormDescendant 应该怎么做？**

我已阅读[如何在 Delphi 中使用或解决可视化表单继承问题？](https://stackoverflow.com/questions/190504/how-do-i-use-or-resolve-issues-with-visual-form-inheritance-in-delphi)并[注册自定义表单，以便我可以从多个项目继承它，而无需将表单复制到对象存储库文件夹](https://stackoverflow.com/questions/3733216/register-custom-form-so-i-can-inherit-from-it-from-multiple-projects-without-co) 但这些建议没有帮助。 **有没有办法在没有 TFormBase 来源的情况下在设计时打开 FormDescendant？**

* * *

这是实验示例的项目：http: [//yadi.sk/d/IHT9I4pm1iSOn](http://yadi.sk/d/IHT9I4pm1iSOn)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:27:55.157

您可以提供一个带有（部分）实现代码的存根单元，只有 .dfm 和接口必须相同。这就是 Allen Bauer 在他的[Open Doors](http://edn.embarcadero.com/article/21114)文章中所做的，该文章展示了如何实现[可停靠的 IDE 表单](http://cc.embarcadero.com/Item/14529)。

然后，您的开发人员将需要首先打开存根表单单元，然后他们才能打开后代表单。

# git - 如何将 gdoc 的修订历史导出到 git？

> ID：14222090
> 
> 赞同：23
> 
> 时间：2013-01-08T18:57:11.600
> 
> 标签：git, google-docs, google-sheets, google-docs-api, google-spreadsheet-api

我在 google docs 中有一个电子表格，我想将它集成到 git 工作流程中（并推送到 github）。是否有任何工具（甚至是支持 gdoc 版本的库）可以做到或帮助我做到这一点？

我有一些基于[google_spreadsheet gem](https://github.com/gimite/google-spreadsheet-ruby)的旧 ruby​​ hack ，它读取和写入当前版本的 csv gdoc，但没有提取修订历史。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-09T03:33:55.667

我对你的问题很感兴趣，所以今天我一起做了一个小项目：

*   [https://github.com/larsks/gitdriver](https://github.com/larsks/gitdriver)

给定一个文档 ID，它将使用 Google Docs 文档的纯文本或 HTML 内容创建一个 git 存储库。这可以很容易地扩展到与其他文件类型一起使用。它工作时看起来像这样：

```
$ python gitdriver.py -T 1j6Ygv0ow5A8_ywTMwJbuKVrxrSsSH2wJs3a8Q66mvt4
Create repository "Untitled"
Initialized empty Git repository in /home/lars/projects/gitdriver/Untitled/.git/
[master (root-commit) 24d35e7] revision from 2013-01-08T21:57:38.837Z
 1 file changed, 1 insertion(+)
 create mode 100644 content
[master fd243ee] revision from 2013-01-08T21:57:45.800Z
 1 file changed, 1 insertion(+), 1 deletion(-)
 rewrite content (95%)
[master 5ad1a26] revision from 2013-01-09T01:47:29.593Z
 1 file changed, 1 insertion(+), 1 deletion(-)
 rewrite content (92%)
$ cd Untitled
$ git log --oneline
5ad1a26 revision from 2013-01-09T01:47:29.593Z
fd243ee revision from 2013-01-08T21:57:45.800Z
24d35e7 revision from 2013-01-08T21:57:38.837Z 
```

这需要您使用 Google 设置必要的应用程序凭据。而且它不做任何错误检查。并且可能会吃掉你的金鱼。这意味着作为 API 的演示以及您可以如何做这样的事情；它*并非*旨在成为功能性产品。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-08T19:16:34.227

gdoc 未设置为导出修订历史[源](https://groups.google.com/forum/?fromgroups=#!topic/How-to-Documents/eTDO2gNzBMk%5B1-25-false%5D)。

Google 驱动器确实有一个 API 可以访问[此处](https://developers.google.com/drive/manage-revisions?hl=en)的所有修订。这提供了一种下载所有修订版的简便方法。然后你可以创建一个脚本将它们一一添加到git中。修订历史记录存在一些问题，请参见[此处](https://groups.google.com/forum/?fromgroups=#!topic/google-documents-list-api/2Vw9ju54BS0%5B1-25-false%5D)。

# android - Android WebView 设置下载文件夹位置

> ID：14222092
> 
> 赞同：0
> 
> 时间：2013-01-08T18:57:15.983
> 
> 标签：android, webview, download, directory

我添加了一个 webview 活动，并希望控制我的最终用户将通过我的应用程序下载的文件夹。这些文件将是 pdf 文件，我希望它们进入我的应用程序使用的特定文件夹，而不是默认下载文件夹。

```
public class myweb extends Activity {

 private WebView myWebView;
 private String LOG_TAG = "AndroidWebViewActivity";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.knitweb);

        myWebView = (WebView) findViewById(R.id.webView1);

        //enable Javascript
        myWebView.getSettings().setJavaScriptEnabled(true);

        //loads the WebView completely zoomed out
        myWebView.getSettings().setLoadWithOverviewMode(true);

        //true makes the Webview have a normal viewport such as a normal desktop browser
        //when false the webview will have a viewport constrained to it's own dimensions
        myWebView.getSettings().setUseWideViewPort(true);

        //override the web client to open all links in the same webview
        myWebView.setWebViewClient(new MyWebViewClient());
        myWebView.setWebChromeClient(new MyWebChromeClient());

        //Injects the supplied Java object into this WebView. The object is injected into the
        //JavaScript context of the main frame, using the supplied name. This allows the
        //Java object's public methods to be accessed from JavaScript.
        myWebView.addJavascriptInterface(new JavaScriptInterface(this), "Android");

        //load the home page URL
        //myWebView.loadUrl("http://demo.mysamplecode.com/Servlets_JSP/pages/androidWebView.jsp");
        myWebView.loadUrl("http://www.patonsyarns.com/pattern.php?PID=4521&cps=21191");

        myWebView.setDownloadListener(new DownloadListener() {
            public void onDownloadStart(String url, String userAgent,
                    String contentDisposition, String mimetype, long contentLength) {
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setData(Uri.parse(url));
                startActivity(intent);

            }
        });

}

 private class MyWebViewClient extends WebViewClient {
     @Override
     public boolean shouldOverrideUrlLoading(WebView view, String url) {
         if (Uri.parse(url).getHost().equals("demo.mysamplecode.com")) {
             return false;
         }
         Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
         startActivity(intent);
         return true;
     }
 }

 private class MyWebChromeClient extends WebChromeClient {

      //display alert message in Web View
      @Override
         public boolean onJsAlert(WebView view, String url, String message, JsResult result) {
             Log.d(LOG_TAG, message);
             new AlertDialog.Builder(view.getContext())
              .setMessage(message).setCancelable(true).show();
             result.confirm();
             return true;
         }

     }

     public class JavaScriptInterface {
         Context mContext;

         // Instantiate the interface and set the context
         JavaScriptInterface(Context c) {
             mContext = c;
         }

         //using Javascript to call the finish activity
         public void closeMyActivity() {
             finish();
         }

     }

     //Web view has record of all pages visited so you can go back and forth
     //just override the back button to go back in history if there is page
     //available for display
     @Override
     public boolean onKeyDown(int keyCode, KeyEvent event) {
         if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
             myWebView.goBack();
             return true;
         }
         return super.onKeyDown(keyCode, event);
     } 
```

我事先不知道用户将下载哪些文件，除了它们将是 pdf 文件。

任何帮助都会很棒谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:43:02.810

我害怕唯一的解决方案是使用 DownloadListener 来捕获事件并手动下载文件。

下载文件示例：[http ://www.androidhive.info/2012/04/android-downloading-file-by-showing-progress-bar/](http://www.androidhive.info/2012/04/android-downloading-file-by-showing-progress-bar/)

DownloadListener 示例：[如何使用 DownloadListener？](https://stackoverflow.com/questions/9722111/how-do-i-use-downloadlistener)

# database - 从融合表中查询以选择具有最近日期的行

> ID：14222093
> 
> 赞同：1
> 
> 时间：2013-01-08T18:57:17.290
> 
> 标签：database, google-fusion-tables

我是 javascript 和融合表的新手，我正在建立一个项目，该项目将数据收集并详细说明到谷歌电子表格中，然后将它们提交到融合表数据库。必须使用 SELECT 查询将归档的数据检索回电子表格中，以用于进一步详细说明或更新并再次提交到融合表中。

要插入和检索的记录的结构包括以下字段：

字段 1、字段 2、字段 3 等

其中 field1 是日期/时间字段，field2 表示国家列表

我要创建的查询应检索记录子集，包括每个国家 (field2) 的最新日期记录 (field1)。我尝试使用 WHERE 子句构建 SELECT 查询，但它不起作用。我在某处读到这种问题可以通过使用自连接来解决，但我不确定是否可以在融合表中进行这种连接，我不知道如何进行。

任何人都可以给我一些提示或建议以找到解决方案吗？

提前致谢

路易吉

# objective-c - 调用 AVAudioSession setActive:NO 后恢复 iPod 播放

> ID：14222103
> 
> 赞同：4
> 
> 时间：2013-01-08T18:57:50.680
> 
> 标签：objective-c, ios, avaudiosession

在您的应用程序完成使用其会话后，恢复 ipod 或其他音频会话的播放的最佳方式是什么？

**注意我已经尝试过打电话...**

```
[_session setActive:NO
          withFlags:AVAudioSessionSetActiveFlags_NotifyOthersOnDeactivation
              error:outError]; 
```

我正在构建一个 iOS VoIP 应用程序，它使用 AVAudioSessionCategoryPlayAndRecord 作为其类别，并使用 kAudioSessionMode_VoiceChat 作为其模式。为了简化音频会话管理的处理，我有一个单例来侦听有关应用程序状态和其他重要事件的通知。但是，上面的代码似乎并没有导致音乐在 iPod 应用程序上恢复。

最后，我们还注意到双击主页按钮时屏幕底部显示的音乐控件就像我们的应用程序正在播放音频一样。然而，我们已经将其设置为非活动状态。

如果有人有任何线索，我很想了解更多关于这里发生的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T09:49:41.927

在我看来，您无法通知 iOS 您不再需要音频会话。您确定对“setActive”的调用不会失败吗？或者可能在代码中的其他地方重新激活会话。

除此之外，一旦系统意识到您没有使用它，音乐应用程序应该能够重新获得它的音频。这可以通过第三方应用程序使用[AVAudioSessionInterruptionNotification](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html#//apple_ref/c/data/AVAudioSessionInterruptionNotification)通知来完成。对于调试，您可以尝试将自己添加为观察者，看看您的回调是否被调用。因此，如果您成功停用会话，其他应用程序应该能够完成剩下的工作。

# ios - 更新 VOIP 应用程序

> ID：14222105
> 
> 赞同：0
> 
> 时间：2013-01-08T18:57:56.593
> 
> 标签：ios, upgrade, voip

如果我有一个 voip 类型的应用程序，该应用程序已由用户启动并且在后台，那么当应用程序升级时会发生什么？应用程序会在后台自动重启还是用户必须重新启动它才能开始收听？

# c - 将 CUDA C __constant__ 变量复制到本地内存是否有性能优势

> ID：14222107
> 
> 赞同：1
> 
> 时间：2013-01-08T18:58:10.850
> 
> 标签：c, optimization, cuda, constants, local

例如，如果您有一个简单的常量变量`__device__ __constant__ int MY_CONSTANT;`，并且它被同一个内核线程多次访问：

```
__global__ void move(int* dataA, int* dataB, int* dataC){
    ...
    dataB[threadID] = dataA[threadID] * MY_CONSTANT;
    dataC[threadID] = dataA[[threadID] * dataB[threadID] % MY_CONSTANT;
    ...
} 
```

我可以看到将`dataA[threadID]`和的值存储`dataA[threadID] * MY_CONSTANT`在局部变量/寄存器中以避免不必要的全局读取是有益的。忽略这一点，将 的值`MY_CONSTANT`放在局部变量中以避免它被读取两次是否有益，或者这将由编译器处理，因为它与其他全局数据不同，它不能更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:16:58.723

当然，唯一知道的方法是对每种方式进行编码并执行以下操作：

1.  生成并检查 PTX 代码以确定编译器为每个实现发出的内容。
2.  使用具有代表性的输入来检测和分析每个实施和测试性能。

您要问的是那种保证“过早优化”这一短语的微优化。我的建议是，除非您发现性能不足以满足您的需求，否则您应该忘记此类优化。

也就是说，常量内存存储在全局内存空间中，当被多处理器访问时，它会被添加到缓存中。对该内存区域的后续访问具有低得多的延迟。当一个扭曲中的所有线程访问相同的常量内存字时，就不会发生冲突，而且一切都会很快发生（请注意，硬件差异很大，我所说的可能在技术上对您的设备并不准确，但是要点是：遵循内存类型的访问模式，您无需担心您在此处询问的内容）。

# ruby-on-rails - 如何在rails中捕获ffmpeg输出？

> ID：14222108
> 
> 赞同：2
> 
> 时间：2013-01-08T18:58:11.320
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ffmpeg, system

我正在运行 ffmpeg 命令来尝试获取视频文件的时长，命令如下...

```
system('ffmpeg -i C:\Users\example\Desktop\video9.mp4 -f ffmetadata') 
```

当我运行该行时，它会向 Rails 控制台输出大量信息，包括持续时间。但是我将如何捕获这些信息以便我可以拆分它并获取我需要的数据？（我在 Rails 控制器中执行此操作）

当我运行这样的事情时......

```
metadata = system('ffmpeg -i C:\Users\example\Desktop\video9.mp4 -f ffmetadata')
puts metadata 
```

它返回的都是假的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:03:23.027

采用：

```
output = `ffmpeg -i C:\\Users\\example\\Desktop\\video9.mp4 -f ffmetadata` 
```

问题是它`system`没有捕获正在运行的命令的输出。相反，我们使用`%x[...]`反引号或其等效项，它捕获子外壳的 STDOUT。

如果您需要更多控制，请查看[`Open3.capture3`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-capture3).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:32:43.450

找到了...

> ```
>  inspect_command = "ffmpeg -i " + file_location + " 2>&1 "
>   metadata = `#{inspect_command}` 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-18T18:11:09.923

如果您只需要获得视频持续时间，请使用[ffprobe](https://ffmpeg.org/ffprobe.html)而不是 ffmpeg。它直接返回视频元数据。

# c - 接受字段中的有效输入

> ID：14222109
> 
> 赞同：1
> 
> 时间：2013-01-08T18:58:22.693
> 
> 标签：c, validation

我正在尝试创建一些只接受有效的代码作为用户输入，比如在询问姓名等时没有整数......到目前为止我已经尝试过了，

```
 if(!gets(newCust.name))
    {
        printf("invalid data\n");
        menu();
    } 
```

但是，由于 name 是字符串类型，因此当用户输入整数时，它似乎是有效的。我可以使用其他任何简单的选项吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:08:06.753

验证输入（尤其是来自 C 的）可能是一项相当多的工作。一般来说，我会这样做的方式是读取缓冲区（您可能应该使用[fgets( ..., stdin)](http://linux.die.net/man/3/fgets)而不是`gets`避免缓冲区溢出）。读取缓冲区后（无论输入是什么），然后编写代码来验证缓冲区中的数据。

例如，您可以使用[strtol](http://linux.die.net/man/3/strtol)从缓冲区中读取整数值。这将允许您确定缓冲区是否有一个整数（并且只有一个整数）。

以下是总体思路：

```
char buf[1024];
int val;
char *endptr;

printf( "Enter something..." );
if ( fgets( buf, sizeof buf, stdin )) {
   val = strtol( buf, &endptr, 10 );

   // check for some of the possible errors
   if ( val == LONG_MIN )
      printf( "Underflow error (%d)\n", errno );
   else if ( val == LONG_MAX )
      printf( "Overflow error (%d)\n", errno );
   else if ( endptr == buf )
      printf( "No digits provided\n" );
   else if ( *endptr != '\0' && *endptr != '\n' )
      printf( "Something besides an integer was given (%u)\n", *endptr );
   else
      printf( "The value is apparently valid\n" );
   printf( "val = %d\n", val );
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:17:54.960

我建议不要排除无限的无效选项，而是定义有效值应该是什么，然后检查它。这样做的常用方法是使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)。可能对于一个名称，您需要检查一个类似于`\w[\w\s]*`“至少一个单词字符，后跟任意数量的单词字符和空格”的正则表达式。

另请参阅：[C 中的正则表达式：示例？](https://stackoverflow.com/questions/1085083/regular-expressions-in-c-examples)

# python - 从 numpy.argmax 结果中提取 numpy 数组切片

> ID：14222110
> 
> 赞同：4
> 
> 时间：2013-01-08T18:58:25.000
> 
> 标签：python, numpy

我有一个 (3,3) numpy 数组，想找出绝对值最大的元素的符号：

```
X = [[-2.1,  2,  3],
     [ 1, -6.1,  5],
     [ 0,  1,  1]]

s = numpy.argmax(numpy.abs(X),axis=0) 
```

给我我需要的元素的索引，`s = [ 0,1,1]`.

我如何使用这个数组来提取元素`[ -2.1, -6.1, 5]`以找出它们的符号？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T19:06:27.267

试试这个：

```
# You might need to do this to get X as an ndarray (for example if X is a list)
X = numpy.asarray(X)

# Then you can simply do
X[s, [0, 1, 2]]

# Or more generally
X_argmax = X[s, numpy.arange(X.shape[1])] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:21:11.040

部分答案：使用`sign`or `signbit`。

```
In [8]: x = numpy.array([-2.1, -6.1, 5])

In [9]: numpy.sign(x)
Out[9]: array([-1., -1.,  1.])

In [10]: numpy.signbit(x)
Out[10]: array([ True,  True, False], dtype=bool) 
```

# php - var_dump() 输出缩短 - phpunit 还是我的终端？

> ID：14222112
> 
> 赞同：1
> 
> 时间：2013-01-08T18:58:37.680
> 
> 标签：php, terminal, phpunit, var-dump

我正在用 phpunit 编写测试，并且时不时地我必须做一个

`var_dump($this->getRequest()->getBody())`

这一切都很好而且很花哨，但是当我这样做时在终端：

`phpunit application/modules/account/ContactControllerTest.php`

我得到以下输出：

```
string(2319) "<!DOCTYPE html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--><!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if IE 8]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js"><!--<![endif]--><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" ><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" ><meta name="apple-mobile-web-app-capable" content="yes" "...
... 
```

那不是 2319 个字符.... 它更像是 516.... 我的其余内容在哪里？是的，我的终端开启了无限滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:17:32.003

您正在寻找的是：

[**`xdebug.var_display_max_data`**](http://xdebug.org/docs/all_settings#var_display_max_data)

> 类型：整数，默认值：512
> 
> 控制使用 xdebug_var_dump()、xdebug.show_local_vars 或通过函数跟踪显示变量时显示的最大字符串长度

如果您将该设置更改为`-1`您将获得完整的转储。

# wpf - WPF AutoCompleteBox 多值成员路径

> ID：14222118
> 
> 赞同：0
> 
> 时间：2013-01-08T18:58:59.647
> 
> 标签：wpf, c#-4.0, ivalueconverter, autocompletebox

我有一个 CollectionViewSource 填充了数据库中的业务对象。设置 AutoCompleteBox ValueMemberPath="LNAME" 对所有姓氏都适用。但是，我想同时搜索名字和订单号，而不必使用单选按钮或下拉菜单来定义搜索类型。

我已将 ValueMemberPath 更改为 ValueMemberBinding：

```
ItemsSource="{Binding Source={StaticResource TheCollectionViewSource}}"
ValueMemberBinding="{Binding Converter={StaticResource ValueMemberPathConverter}}" 
```

我不确定如何在转换器中组合 LNAME、FNAME 等

```
public class Converter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return foo;
        }
        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return foo;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:20:00.593

```
public Binding ValueMemberBinding
    {
      get
      {
        return _valueBindingEvaluator != null ?
          _valueBindingEvaluator.ValueBinding : null;
      }
      set
      {
        if (_valueBindingEvaluator == null)
        {
          _valueBindingEvaluator = new BindingEvaluator<string>();
          AddLogicalChild(_valueBindingEvaluator);
        }
        _valueBindingEvaluator.ValueBinding = value;
      }
    } 
```

# java - Try/Catch 内部或外部函数

> ID：14222121
> 
> 赞同：9
> 
> 时间：2013-01-08T18:59:05.263
> 
> 标签：java, exception, try-catch, jax-rs

`try`我有一个关于使用/的最佳实践的非常基本的问题`catch`。

我有一个像这样的简单函数（DAO）：

```
public void addVehicle(Vehicle vehicle) {

    em.getTransaction().begin();
    em.persist(vehicle);
    em.getTransaction().commit();
} 
```

并在 Web 服务中使用 DAO 功能：

```
@WebMethod(operationName = "addVehicle")
public void addVehicle(Vehicle vehicle) {

    try {
        vehicleDAO.addVehicle(vehicle);
        System.out.print("Vehicle added");
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

或者在 DAO 函数中使用`try`/更好，如下所示：`catch`

```
public void addVehicle(Vehicle vehicle) {

    try {
        em.getTransaction().begin();
        em.persist(vehicle);
        em.getTransaction().commit();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-08T19:11:50.117

没有完美的规则。

如果在需要的时候尽早捕获异常，代码通常会更清晰、更简单，但越晚越好。
您应该考虑当这种情况发生时谁必须采取行动`Exception`，这决定了您`catch`是在方法内部（addVehicle）还是`throw`让调用者必须这样`catch`做。

例如：

```
 public void addVehicle(Vehicle vehicle) throws SQLException{
        em.getTransaction().begin();
        em.persist(vehicle);
        em.getTransaction().commit();
 } 
```

在此示例中，调用者必须捕获。
此外，仅在少数情况下您应该捕获`Exception`or `RunTimeException`，更好地捕获特定异常，例如`IOException`代替`Exception`.

`catch (Exception ex).`在您的代码中的某个地方，您将需要一个“最后一道防线”，这对于处理不应发生的错误是有意义的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T20:04:23.850

在决定在哪里处理特定类型的异常时，最好的经验法则是停止查看代码的微观细节，退一步思考程序逻辑并考虑以下事项：

*   **您的程序当前操作无法从异常中恢复吗？**如果是，那么只有将异常放在该操作的最顶层才有意义，以确保它不会继续。
*   如果您的程序可以解决该特定异常（也许通过在放弃之前尝试其他方法），请使用每一层嵌套函数（从最高层开始）并且每次都问自己：**如果在执行某行代码期间发生异常在这个函数中，这个函数继续下去有意义吗？**只要答案是“是”，就进入更深层次。一旦答案是“否”，很可能这是放置该异常处理程序的最佳位置。
*   作为前一个的替代方案，您可以决定程序的备用“攻击计划”是什么，以防引发异常。然后，转到会引发该异常的代码行并问自己：**此函数是否有足够的上下文信息来执行我想到的解决方法？**只要答案是“否”，就转到调用者函数。一旦答案变为“是”，请考虑将您的异常处理程序放在那里。

话虽如此，您应该只捕获合理专门的异常，并将`catch(Exception ex)`构造仅作为最后手段仅保留在顶层并且仅*在*所有其他可能的`catch`块之后，仅将其保留用于您当时确实无法预测的异常的写作。（我知道您说这不是示例的重点，但是既然我们已经讲到了，我认为应该提到它以使这个答案更完整。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:11:27.390

两者都使用，唯一的原因是使用 catch`RuntimeException`甚至`Throwable`. 因为这种异常通常是由底层框架抛出的。如果您想在再次抛出异常之前进行一些操作，例如日志记录、打印堆栈跟踪等，您应该准确地捕获这种异常。如果你不这样做，你可能会失去异常的原因。

```
@Transactional
public void addVehicle(Vehicle vehicle) {
  try {
    //do whatever with session
  } catch (RuntimeException e) {
    e.printStackTrace();
    throw new Exception(e);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T19:11:43.883

您应该只捕获那些您想要处理的异常。您可以包含一个最顶层的异常处理程序，以将任何未处理的异常转换为对最终用户有用的东西。

而不是`e.printStackTrace();`，尝试返回正确的异常消息。

[在此处](http://today.java.net/pub/a/today/2006/04/06/exception-handling-antipatterns.html)了解有关异常处理的更多信息

这里有[更多关于异常处理](https://stackoverflow.com/questions/5632881/what-is-the-best-practice-for-try-catch-blocks-to-create-clean-code)的讨论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T19:15:35.803

AFAIK 的最佳实践将是这样的：

```
public void addVehicle(Vehicle vehicle) {
        em.getTransaction().begin();
        try {
            em.persist(vehicle);
            em.getTransaction().commit();
        } catch (Exception e) {
            if (em.getTransaction().isActive()) {
                try {
                   em.getTransaction().rollback();
                } catch (Exception e) {
                   // Log rollback failure or something
                }
            }
            throw new RuntimeException(e);
        } 
} 
```

# database - DB2 按查询中未提及的 coumn 对结果进行排序

> ID：14222122
> 
> 赞同：0
> 
> 时间：2013-01-08T18:59:07.153
> 
> 标签：database, oracle, db2, db2-connect

以下查询的结果对我来说很奇怪，（我是 DB2 的新手）。它按我在查询中没有提到的表中的列对结果进行排序。

```
WITH RESULT AS ( 
  SELECT T1.*, ROWNUMBER() OVER() AS RNUM 
    FROM TableNAmeT1 
   WHERE column1= 'xyz'
) 

SELECT * 
  FROM RESULT 
 WHERE RNUM BETWEEN 1 AND 100 
 ORDER BY ORDER OF RESULT OPTIMIZE FOR 100 ROWS 
```

当我使用以下查询时它不排序

```
WITH RESULT AS ( 
  SELECT T1.*, ROWNUMBER() OVER() AS RNUM 
    FROM TableNAmeT1 
   WHERE column1= 'xyz'
) 

SELECT * 
  FROM RESULT  
 ORDER BY ORDER OF RESULT 
```

*   这是因为表的索引还是其他什么，通常这些表是FIFO

** 显然，这是由于“OPTIMIZE FOR 100 ROWS”子句和使用标量值（ROWNUMBER() 进行过滤（在 WHERE 子句中）。

** 如果我进一步缩小我的问题，我想知道第一个查询和第二个查询的不同顺序的原因是什么。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:05:32.063

当您没有明确指定“order by”时，结果是无序的，即：数据在获取时返回。通常这会导致使用索引的顺序。

您可能想“解释”这些语句以了解 db2 实际执行的操作以及它使用的索引。（db2exfmt -d 数据库 -e 用户 -t -v % -w -1 -s % -# 0 -n % -g OTIC）

# javascript - 属性值更改后 IE8 不刷新类

> ID：14222123
> 
> 赞同：5
> 
> 时间：2013-01-08T18:59:09.650
> 
> 标签：javascript, html, css, internet-explorer-8

**上下文：**我有一个使用[HTML5 数据属性](http://ejohn.org/blog/html-5-data-attributes/)的 HTML 页面。我的一些 CSS 样式使用[属性选择器](https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors)来根据这些自定义属性的值设置元素的样式。

**问题：**当我使用 JavaScript 更新 data- 属性的值时，Chrome 会通过重新设置受影响元素的样式来正确响应，但 IE8（我需要支持）不会...不会立即响应。`class`让 IE8 更新样式的唯一方法是通过其他方式（例如删除或修改属性）直接摆弄 CSS 样式。

**例子：**

```
<html>
<head>    
    <style type="text/css">    
        .Test[data-foo="bar"]{ background-color: Green; }    
        .Test[data-foo="baz"]{ background-color: Red; }        
    </style>

    <script src="scripts/jquery-1.8.3.js" type="text/javascript"></script>    
    <script type="text/javascript">
        function change(div) { $(div).attr("data-foo", "baz"); }
        function toggleTest() { $("DIV").toggleClass("Test"); }    
    </script>
</head>
<body>
    <div data-foo="bar" onclick="change(this);" class="Test">Testing</div>
    <div data-foo="bar" onclick="change(this);" class="Test">Testing</div>
    <input type="button" onclick="toggleTest()" value="Toggle Class" />
</body>
</html> 
```

在 Chrome 中，您可以单击 Test1 和 Test2 栏，它们会立即变为红色。在 IE8 中，您必须单击该栏，然后单击该按钮两次（一次删除类，再次恢复它）。

**问题：**解决方法是什么？显然我已经确定了一个（添加/删除类），但它很难看。有没有一种优雅、不显眼的方式来强制 IE8 重新评估元素的样式，而不用乱搞元素的属性？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-08T19:32:36.877

虽然许多属性在更改时会导致重排，但 Internet Explorer 8 中的属性似乎不会出现这种情况`data-*`。更改这些属性不会立即导致元素被重绘 - 您必须手动触发重排。

```
el.setAttribute("data-foo", "foo");
el.style.opacity = 1; 
```

在上面的示例中，我通过将元素的不透明度设置为 1 来触发重排。您还可以将缩放属性设置为 1，甚至将元素的 className 设置为自身：

```
el.className = el.className; 
```

其中任何一个都应该立即应用基于属性选择器的新样式。好消息是，这是在 IE8 中使用的，这是一个在广泛使用数据属性之前的浏览器，所以虽然我们不得不在那里受点苦，但我们不必使用 IE9 或 IE10 - 这两个版本都可以正常工作任何特别注意回流问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:20:27.673

如果你有 jQuery 的可能性，不要使用 onclick 像这样写

```
jQuery('input[type="button"]').click(function() {
  jQuery('div').toggleClass("Test");
});

jQuery('div').click(function() {
  jQuery('div').attr("data-foo", "baz");
}); 
```

在 IE 中，您始终必须检查 javascript-error-console。

[演示](http://jsfiddle.net/algorhythm/SrQp6/1/)

# android - 如何将 Android 小部件中 ImageView 的高度和宽度动态设置为“match_parent”？

> ID：14222131
> 
> 赞同：4
> 
> 时间：2013-01-08T18:59:38.153
> 
> 标签：android, android-widget, android-imageview

我的主屏幕小部件中有一个`ImageView`。在布局文件中，我将高度和宽度设置为`wrap_content`. 但根据用户的输入，我必须将其高度和宽度更改为`match_parent`. 如何才能做到这一点 ？

```
RemoteViews rv = new RemoteViews(context.getPackageName(), R.layout.widget_layout); 
```

现在我尝试`setInt()`在这个`RemoteViews`对象上使用这样的方法来检查是否可以更改高度和宽度：

```
rv.setInt(R.id.widgetImageView, "setMinimumHeight", 300); 
```

但这是我在 logcat 上得到的：

```
couldn't find any view, using error view
android.widget.ImageView can't use method with RemoteViews: setMinimumHeight(int) 
```

那么如何将其高度和宽度更改为`match_parent`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:30:56.400

对于那些想知道如何做到这一点的人，我`ImageView`在布局中使用了两个。一个高度和宽度设置为`wrap_content`，另一个高度和宽度设置为`match_parent`。根据用户的输入，我调用`setVisibility`来隐藏`ImageView`不需要的`RemoteView`。

```
rv.setInt(R.id.widgetImageView1, "setVisibility", View.GONE); 
```

`ImageView`我们可以调用的方法很少`RemoteView`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T19:07:50.640

采用：

```
 ImageView view = new ImageView();
    view.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT)); 
```

的第一个参数`LayoutParams`是宽度，第二个参数是高度。

在这里，我创建了一个新的 ImageView 进行解释。您应该使用您自己的代码中的 ImageView 变量来执行上述操作。我希望这很清楚。

[更新代码]：对不起，`MATCH_PARENT`变量在`LayoutParams`not under 下`View`。我已经更新了代码。

[更新]：上面的答案不适用于`RemoteViews`不能`RemoteViews`有布局参数。根据此[SO Question](https://stackoverflow.com/questions/7373501/layout-weight-on-dynamically-added-remoteviews)中给出的答案，无法通过常规方法设置或查找 RemoteViews 的尺寸。

我找到了这个[Android Widget Tutorial](http://www.vogella.com/articles/AndroidWidgets/article.html#overview_size)，在 Widget Size 部分，作者说：

```
 A Widget will take a certain amount of cells on the homescreen. A cell is
    usually used to display the icon of one application. As a calculation rule 
    you should define the size of the widget with the formula: 

    ((Number of columns / rows)* 74) - 2\. 

    These are device independent pixels and the -2 is used to avoid rounding issues.

    As of Android 3.1 a Widgets can be flexible in size, e.g. the user can make it
    larger or smaller. To enable this for Widgets you can use the 
    android:resizeMode="horizontal|vertical" attribute in the XML configuration file
    for the widget. 
```

由此，我可以建议您，与其直接设置特定的整数大小值，不如设置要调整大小的行数和列数？例如，如果您的初始小部件大小为`4 Columns and 1 Row`，则在用户输入时，您可以将其更改为`4 Columns and 4 Rows`，从而使其占据整个屏幕（小部件的最大大小为 4 行和 4 列）

我知道上述方法不是您想要的，但这对我来说似乎是唯一的方法。试试看是否有帮助。

# networking - Winsock bind() 失败，WSAEADDRNOTAVAIL 用于定向广播地址

> ID：14222134
> 
> 赞同：3
> 
> 时间：2013-01-08T18:59:50.957
> 
> 标签：networking, network-programming, udp, winsock, c++builder

我正在设置一个 UDP 套接字并尝试将应该是有效的网络广播地址绑定到它（192.168.202.255 : 23456），但`bind`失败并出现错误[10049`WSAEADDRNOTAVAIL`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx#WSAEADDRNOTAVAIL)，. 如果我使用 localhost 广播地址 127.0.0.255，它会成功。

[`WSAEADDRNOTAVAIL`的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx#WSAEADDRNOTAVAIL)说“请求的地址在其上下文中无效。这通常是由于尝试绑定到对本地计算机无效的地址。这也可能是由于 connect、sendto、WSAConnect、WSAJoinLeaf 或WSASendTo 当远程地址或端口对远程计算机无效时（例如，地址或端口 0）。" 但我*认为*这个地址 192.168.202.255 应该是一个有效的广播地址，因为运行时有以下条目`ipconfig`：

![ipconfig 表示本地 IP 为 192.168.202.213](../Images/c64204a50b8b0a22dda421ac27293c88.png)

可能是什么问题？

## 代码

我是 Winsock 编程的新手，可能犯了一个基本错误，但我找不到它。我到目前为止的代码是：

```
m_ulAddress = ParseIPAddress(strAddress);
// Winsock 2.2 is supported in XP
const WORD wVersionRequested = MAKEWORD(2, 2);
WSADATA oWSAData;
const int iError = WSAStartup(wVersionRequested, &oWSAData);
if (iError != 0) {
    PrintLine(L"Error starting the network connection: WSAStartup error " + IntToStr(iError));
} else if (LOBYTE(oWSAData.wVersion) != 2 || HIBYTE(oWSAData.wVersion) != 2) {
    PrintLine(L"Error finding version 2.2 of Winsock; got version " + IntToStr(LOBYTE(oWSAData.wVersion)) + L"." + IntToStr(HIBYTE(oWSAData.wVersion)));
} else {
    m_oSocket = socket(AF_INET, SOCK_DGRAM /*UDP*/, IPPROTO_UDP);
    if (m_oSocket == INVALID_SOCKET) {
        PrintLine(L"Error creating the network socket");
    } else {
        // Socket needs to be able to send broadcast messages
        int iBroadcast = true; // docs say int sized, but boolean values
        if (setsockopt(m_oSocket, SOL_SOCKET, SO_BROADCAST, (const char*)&iBroadcast, sizeof(iBroadcast)) != 0) {
            PrintLine(L"Error setting socket to allow broadcast addresses; error " + IntToStr(WSAGetLastError()));
        } else {
            m_oServer.sin_family = AF_INET;
            m_oServer.sin_port = m_iPort;
            m_oServer.sin_addr.S_un.S_addr = m_ulAddress;

            // !!! This is the failing call
            if (bind(m_oSocket, (sockaddr*)&m_oServer, sizeof(m_oServer)) == -1) {
                PrintLine(L"Error binding address " + String(strAddress.c_str()) + L":" + IntToStr(m_iPort) + L" to socket; error " + IntToStr(WSAGetLastError()));
            } else {
                m_bInitialisedOk = true;
            }
        }
    }
} 
```

## 评论

`ParseIPAddress`是一个包装器`inet_addr`；检查它的价值`m_oServer.sin_addr.S_un.S_addr`似乎是正确的。 `m_oSocket`是一个`SOCKET`。我添加了调用，`setsockopt`因为默认情况下，除了 TCP 之外，您不能通过任何方式进行广播（请参阅['s Remarks](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740148%28v=vs.85%29.aspx)[中的第二段`sendto`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740148%28v=vs.85%29.aspx)）；这个电话没有任何区别。 `PrintLine`是控制台输出的包装器。由于我使用的是 C++ Builder 及其 VCL 库，因此奇怪`String / c_str()`的转换正在与 C++ wstrings 到 VCL Unicode 字符串之间相互转换。IP 地址是一个窄 (char) 字符串。

[`sendto`文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740148%28v=vs.85%29.aspx)指出“如果打开套接字，则进行 setsockopt 调用，然后进行 sendto 调用，Windows 套接字执行隐式绑定函数调用。” 这意味着`bind`根本不需要。如果我省略了电话，那么`sendto`像这样调用：

```
const int iLengthBytes = strMessage.length() * sizeof(char); // Narrow string
    const int iSentBytes = sendto(m_oSocket, strMessage.c_str(), iLengthBytes, 0, (sockaddr*)&m_oServer, sizeof(m_oServer));
    if (iSentBytes != iLengthBytes) {
        PrintLine(L"Error sending network message; error: " + IntToStr(WSAGetLastError())); 
```

失败并出现错误 10047，[`WSAEAFNOSUPPORT`“协议系列不支持地址系列。”](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx#WSAEAFNOSUPPORT)

[（在备注](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740506%28v=vs.85%29.aspx)`netsh winsock show catalog` [底部提到`socket`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740506%28v=vs.85%29.aspx)）的输出很长，但确实包括几个提到 UDP 和 IPv4 的条目。

一个可能的复杂情况是它在 VMWare Fusion 主机上运行。Fusion 确实有一个奇怪的网络设置。我还配置了一个 Cisco VPN 并运行回我的办公室。连接和断开连接没有区别。

对我来说似乎很狡猾的一件事是将`SOCKET`m_oSocket 硬转换为`sockaddr`，但是当我阅读示例时，这似乎是 Winsock 编程的正常做法。可能需要阅读它，因为底层解释取决于协议族。这似乎是一个潜在的错误来源，但我不知道如何避免它。

有任何想法吗？我很难过:)

## 设置

*   在 VMWare Fusion 4.1.3 上运行的 Windows 7 Pro
*   [该程序使用Embarcadero C++ Builder 2010](http://www.embarcadero.com/products/cbuilder)编译为 32 位。
*   该程序只是一个控制台程序

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T23:02:54.767

这里很混乱。我将逐点解决它以供您启发，但如果您只想要工作代码，请跳到最后。

> `// Winsock 2.2 is supported in XP`

实际上，[Winsock 2.2 可以追溯到 NT 4 SP4](http://tangentsoft.net/wskfaq/intro.html#versions)，它[可以追溯到 1998](https://en.wikipedia.org/wiki/Windows_NT_4.0#Service_Packs)。因此，我不会费心检查`oWSAData.wVersion`错误情况。这种情况基本上不会再发生了。

如果广泛的可移植性是您的目标，我会以 Winsock 1.1 为目标，这是您展示的代码[所需的全部内容](http://tangentsoft.net/wskfaq/newbie.html#targetapi)，并且可以让代码在任何支持 Winsock 的设备上构建和运行，甚至回到 Windows 3.x。

> `m_oSocket = socket(AF_INET, SOCK_DGRAM /*UDP*/, IPPROTO_UDP);`

风格不好。你应该`PF_INET`在这里使用而不是`AF_INET`. 它们具有相同的值，但您没有`AF`在此处指定地址族 ( )，而是指定了协议族 ( `PF`)。此外，第三个参数可以安全地为零，因为前两个参数隐含了它。同样，这只是样式修复，而不是功能修复。

> `int iBroadcast = true; // docs say int sized, but boolean values`

是的。不要猜测文档并`bool`在此处使用。请记住，Winsock 是基于 BSD 套接字的，这可以追溯到 C++ 存在之前的日子。

> `m_oServer.sin_addr.S_un.S_addr = m_ulAddress;`

你真的不应该以`sockaddr_in`这种方式深入研究结构的内部。sockets API 有一个快捷方式，它更短并且隐藏了一些内部实现细节。这是：

> `m_oServer.sin_addr.s_addr = m_ulAddress;`

继续...

> `if (bind(m_oSocket, ...`

尽管 Remy 认为`bind()`调用不正确是正确的，但您实际上根本不需要它。您可以依靠系统的路由层将数据包从正确的接口发送出去。您无需通过`bind()`电话“帮助”它。

> 默认情况下，您不能通过 TCP 以外的任何方式进行广播（请参阅 sendto 备注中的第二段）；

您误解了 MSDN 告诉您的内容。当您看到术语“TCP/IP”时，它通常（但不总是！）包括 UDP。他们在这里以一般意义上的方式使用它。

您指向的 MSDN 位谈论 TCP/IP，因为 Winsock 是在 TCP/IP 尚未赢得网络协议战争的世界中创建的。他们试图将讨论限制在 TCP/IP（实际上是 UDP）上，所以你不明白他们所说的适用于早期 Winsock 堆栈支持的其他网络传输：NetBIOS、IPX、DECNet ...

事实上，您*只能*使用 UDP 套接字进行广播（或多播）。TCP 只是点对点的。

> 对我来说似乎很狡猾的一件事是将 SOCKET m_oSocket 强制转换为 sockaddr，

这也是套接字中多网络传输支持的一部分。除此之外`sockaddr_in`，还有`sockaddr_ipx`用于 IPX、`sockaddr_dn`DECnet 的... Winsock 是 C API，而不是 C++ API，因此我们不能子类`sockaddr`化并传递对基类的引用，或者为每个变体创建函数重载。这种铸造结构的技巧是一种典型的 C 方法来获得一种多态性。

这是一个使用[MinGW](http://mingw.org/)构建的工作示例`g++ foo.cpp -o foo.exe -lwsock32`：

```
#include <winsock.h>
#include <iostream>
#include <string.h>

using namespace std;

int main(int argc, char* argv[])
{
    WSADATA wsa;
    if (WSAStartup(MAKEWORD(1, 1), &wsa)) {
        cerr << "Failed to init Winsock!" << endl;
        return 1;
    }

    // Get datagram socket to send message on
    SOCKET sd = socket(PF_INET, SOCK_DGRAM, 0);
    if (sd < 0) {
        cerr << "socket() failed: " << WSAGetLastError() << endl;
        return 1;
    }

    // Enable broadcasts on the socket
    int bAllow = 1;
    if (setsockopt(sd, SOL_SOCKET, SO_BROADCAST, (char*)&bAllow,
            sizeof(bAllow)) < 0) {
        cerr << "setsockopt() failed: " << WSAGetLastError() << endl;
        closesocket(sd);
        return 1;
    }

    // Broadcast the request
    string msg = "Hello, world!";
    const int kMsgLen = msg.length();
    struct sockaddr_in sin;
    memset(&sin, 0, sizeof(sin));
    const uint16_t kPort = 54321;
    sin.sin_port = htons(kPort);
    sin.sin_family = AF_INET;
    if (argc == 1) {
        sin.sin_addr.s_addr = INADDR_BROADCAST;
    }
    else if ((sin.sin_addr.s_addr = inet_addr(argv[1])) == INADDR_NONE) {
        cerr << "Couldn't parse IP '" << argv[1] << "'!" << endl;
    }
    int nBytes = sendto(sd, msg.c_str(), kMsgLen, 0,
             (sockaddr*)&sin, sizeof(struct sockaddr_in));
    closesocket(sd);

    // How well did that work out, then?
    if (nBytes < 0) {
        cerr << "sendto() IP " << inet_ntoa(sin.sin_addr) <<
                " failed" << WSAGetLastError() << endl;
        return 1;
    }
    else if (nBytes < kMsgLen) {
        cerr << "WARNING: Short send, " << nBytes << " bytes!  "
                "(Expected " << kMsgLen << ')' << endl;
        return 1;
    }
    else {
        cerr << "Sent " << kMsgLen << "-byte msg to " <<
                inet_ntoa(sin.sin_addr) << ':' << kPort << '.' << endl;
    }

    return 0;
} 
```

默认情况下，它发送到 255.255.255.255 ( `INADDR_BROADCAST`)，但是如果您将定向广播 IP（例如您的 192.168.202.255 值）作为第一个参数传递，它将使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T22:18:29.827

你不应该`bind()`广播IP地址。您需要改为`bind()`使用单个网络适配器 IP。如果要发送广播消息，请先发送到要`bind()`发送广播的适配器，然后再发送`sendto()`广播 IP。如果你想接收广播消息，你`bind()`需要到特定的适配器，它的 IP 与被发送到的广播 IP 相匹配。

# html - CSS 进度圈

> ID：14222138
> 
> 赞同：131
> 
> 时间：2013-01-08T19:00:09.490
> 
> 标签：html, css, progress-bar, progress, css-shapes

我已经在这个网站上搜索过进度条，但我能找到的进度条显示的动画圈达到了 100%。

我希望它停止在某些百分比，如下面的屏幕截图所示。有什么办法可以只使用 CSS 来做到这一点吗？

[![圆形进度条](../Images/c8349063be58ca3293a4ef3a5e00881f.png)](https://i.stack.imgur.com/DzNnN.png)

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-07-15T10:58:25.270

[我只使用 CSS](http://jsfiddle.net/RrAVS/)创建了一个小提琴。

```
.wrapper {
  width: 100px; /* Set the size of the progress bar */
  height: 100px;
  position: absolute; /* Enable clipping */
  clip: rect(0px, 100px, 100px, 50px); /* Hide half of the progress bar */
}
/* Set the sizes of the elements that make up the progress bar */
.circle {
  width: 80px;
  height: 80px;
  border: 10px solid green;
  border-radius: 50px;
  position: absolute;
  clip: rect(0px, 50px, 100px, 0px);
}
/* Using the data attributes for the animation selectors. */
/* Base settings for all animated elements */
div[data-anim~=base] {
  -webkit-animation-iteration-count: 1;  /* Only run once */
  -webkit-animation-fill-mode: forwards; /* Hold the last keyframe */
  -webkit-animation-timing-function:linear; /* Linear animation */
}

.wrapper[data-anim~=wrapper] {
  -webkit-animation-duration: 0.01s; /* Complete keyframes asap */
  -webkit-animation-delay: 3s; /* Wait half of the animation */
  -webkit-animation-name: close-wrapper; /* Keyframes name */
}

.circle[data-anim~=left] {
  -webkit-animation-duration: 6s; /* Full animation time */
  -webkit-animation-name: left-spin;
}

.circle[data-anim~=right] {
  -webkit-animation-duration: 3s; /* Half animation time */
  -webkit-animation-name: right-spin;
}
/* Rotate the right side of the progress bar from 0 to 180 degrees */
@-webkit-keyframes right-spin {
  from {
    -webkit-transform: rotate(0deg);
  }
  to {
    -webkit-transform: rotate(180deg);
  }
}
/* Rotate the left side of the progress bar from 0 to 360 degrees */
@-webkit-keyframes left-spin {
  from {
    -webkit-transform: rotate(0deg);
  }
  to {
    -webkit-transform: rotate(360deg);
  }
}
/* Set the wrapper clip to auto, effectively removing the clip */
@-webkit-keyframes close-wrapper {
  to {
    clip: rect(auto, auto, auto, auto);
  }
}
```

```
<div class="wrapper" data-anim="base wrapper">
  <div class="circle" data-anim="base left"></div>
  <div class="circle" data-anim="base right"></div>
</div>
```

还要在这里检查这个[小提琴](http://jsfiddle.net/wEKg6/) （仅限 CSS）

```
@import url(http://fonts.googleapis.com/css?family=Josefin+Sans:100,300,400);

.arc1 {
    width: 160px;
    height: 160px;
    background: #00a0db;
    -webkit-transform-origin: -31% 61%;
    margin-left: -30px;
    margin-top: 20px;
    -webkit-transform: translate(-54px,50px);
    -moz-transform: translate(-54px,50px);
    -o-transform: translate(-54px,50px);
}
.arc2 {
    width: 160px;
    height: 160px;
    background: #00a0db;
    -webkit-transform: skew(45deg,0deg);
    -moz-transform: skew(45deg,0deg);
    -o-transform: skew(45deg,0deg);
    margin-left: -180px;
    margin-top: -90px;
    position: absolute;
    -webkit-transition: all .5s linear;
    -moz-transition: all .5s linear;
    -o-transition: all .5s linear;
}

.arc-container:hover .arc2 {
    margin-left: -50px;
    -webkit-transform: skew(-20deg,0deg);
    -moz-transform: skew(-20deg,0deg);
    -o-transform: skew(-20deg,0deg);
}

.arc-wrapper {
    width: 150px;
    height: 150px;
    border-radius:150px;
    background: #424242;
    overflow:hidden;
    left: 50px;
    top: 50px;
    position: absolute;
}
.arc-hider {
    width: 150px;
    height: 150px;
    border-radius: 150px;
    border: 50px solid #e9e9e9;
    position:absolute;
    z-index:5;
    box-shadow:inset 0px 0px 20px rgba(0,0,0,0.7);
}

.arc-inset  {
    font-family: "Josefin Sans";
    font-weight: 100;
    position: absolute;
    font-size: 413px;
    margin-top: -64px;
    z-index: 5;
    left: 30px;
    line-height: 327px;
    height: 280px;
    -webkit-mask-image: -webkit-linear-gradient(top, rgba(0,0,0,1), rgba(0,0,0,0.2));
}
.arc-lowerInset {
    font-family: "Josefin Sans";
    font-weight: 100;
    position: absolute;
    font-size: 413px;
    margin-top: -64px;
    z-index: 5;
    left: 30px;
    line-height: 327px;
    height: 280px;
    color: white;
    -webkit-mask-image: -webkit-linear-gradient(top, rgba(0,0,0,0.2), rgba(0,0,0,1));
}
.arc-overlay {
    width: 100px;
    height: 100px;
    background-image: linear-gradient(bottom, rgb(217,217,217) 10%, rgb(245,245,245) 90%, rgb(253,253,253) 100%);
    background-image: -o-linear-gradient(bottom, rgb(217,217,217) 10%, rgb(245,245,245) 90%, rgb(253,253,253) 100%);
    background-image: -moz-linear-gradient(bottom, rgb(217,217,217) 10%, rgb(245,245,245) 90%, rgb(253,253,253) 100%);
    background-image: -webkit-linear-gradient(bottom, rgb(217,217,217) 10%, rgb(245,245,245) 90%, rgb(253,253,253) 100%);

    padding-left: 32px;
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    line-height: 100px;
    font-family: sans-serif;
    font-weight: 400;
    text-shadow: 0 1px 0 #fff;
    font-size: 22px;
    border-radius: 100px;
    position: absolute;
    z-index: 5;
    top: 75px;
    left: 75px;
    box-shadow:0px 0px 20px rgba(0,0,0,0.7);
}
.arc-container {
    position: relative;
    background: #e9e9e9;
    height: 250px;
    width: 250px;
}
```

```
<div class="arc-container">
    <div class="arc-hider"></div>
    <div class="arc-inset">
        o
    </div>
    <div class="arc-lowerInset">
        o
    </div>
    <div class="arc-overlay">
        35%
    </div>
    <div class="arc-wrapper">
        <div class="arc2"></div>
        <div class="arc1"></div>
    </div>
</div>
```

**或者这个**带有 HTML5、CSS3 和 JavaScript 的漂亮[圆形进度条。](http://web.archive.org/web/20160921141817/http://blog.invatechs.com/round_progress_bar_with_html5_css3_and_javascript)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-06-14T21:33:15.880

那个怎么样？

HTML

```
<div class="chart" id="graph" data-percent="88"></div> 
```

Javascript

```
var el = document.getElementById('graph'); // get canvas

var options = {
    percent:  el.getAttribute('data-percent') || 25,
    size: el.getAttribute('data-size') || 220,
    lineWidth: el.getAttribute('data-line') || 15,
    rotate: el.getAttribute('data-rotate') || 0
}

var canvas = document.createElement('canvas');
var span = document.createElement('span');
span.textContent = options.percent + '%';

if (typeof(G_vmlCanvasManager) !== 'undefined') {
    G_vmlCanvasManager.initElement(canvas);
}

var ctx = canvas.getContext('2d');
canvas.width = canvas.height = options.size;

el.appendChild(span);
el.appendChild(canvas);

ctx.translate(options.size / 2, options.size / 2); // change center
ctx.rotate((-1 / 2 + options.rotate / 180) * Math.PI); // rotate -90 deg

//imd = ctx.getImageData(0, 0, 240, 240);
var radius = (options.size - options.lineWidth) / 2;

var drawCircle = function(color, lineWidth, percent) {
        percent = Math.min(Math.max(0, percent || 1), 1);
        ctx.beginPath();
        ctx.arc(0, 0, radius, 0, Math.PI * 2 * percent, false);
        ctx.strokeStyle = color;
        ctx.lineCap = 'round'; // butt, round or square
        ctx.lineWidth = lineWidth
        ctx.stroke();
};

drawCircle('#efefef', options.lineWidth, 100 / 100);
drawCircle('#555555', options.lineWidth, options.percent / 100); 
```

和 CSS

```
div {
    position:relative;
    margin:80px;
    width:220px; height:220px;
}
canvas {
    display: block;
    position:absolute;
    top:0;
    left:0;
}
span {
    color:#555;
    display:block;
    line-height:220px;
    text-align:center;
    width:220px;
    font-family:sans-serif;
    font-size:40px;
    font-weight:100;
    margin-left:5px;
} 
```

[http://jsfiddle.net/Aapn8/3410/](http://jsfiddle.net/Aapn8/3410/)

基本代码取自 Simple PIE Chart [http://rendro.github.io/easy-pie-chart/](http://rendro.github.io/easy-pie-chart/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-04-29T11:32:30.967

另一个基于纯 css 的解决方案，它基于两个裁剪的圆形元素，我旋转它们以达到正确的角度：

[http://jsfiddle.net/maayan/byT76/](http://jsfiddle.net/maayan/byT76/)

这是启用它的基本 css：

```
.clip1 {
    position:absolute;
    top:0;left:0;
    width:200px;
    height:200px;
    clip:rect(0px,200px,200px,100px);
}
.slice1 {
    position:absolute;
    width:200px;
    height:200px;
    clip:rect(0px,100px,200px,0px);
    -moz-border-radius:100px;
    -webkit-border-radius:100px; 
    border-radius:100px;
    background-color:#f7e5e1;
    border-color:#f7e5e1;
    -moz-transform:rotate(0);
    -webkit-transform:rotate(0);
    -o-transform:rotate(0);
    transform:rotate(0);
}

.clip2 
{
    position:absolute;
    top:0;left:0;
    width:200px;
    height:200px;
    clip:rect(0,100px,200px,0px);
}

.slice2
{
    position:absolute;
    width:200px;
    height:200px;
    clip:rect(0px,200px,200px,100px);
    -moz-border-radius:100px;
    -webkit-border-radius:100px; 
    border-radius:100px;
    background-color:#f7e5e1;
    border-color:#f7e5e1;
    -moz-transform:rotate(0);
    -webkit-transform:rotate(0);
    -o-transform:rotate(0);
    transform:rotate(0);
} 
```

并且js根据需要旋转它。

很容易理解。。

希望它有帮助，玛雅人

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-12-07T08:05:54.500

看一下这个 ：）

我使用[conic-gradient](https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/conic-gradient())制作了这个。

```
background: conic-gradient(
      SomeColor1 80%,
      SomeColor2 80%
    ); 
```

您可以使用圆锥梯度创建[饼图。](https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/conic-gradient()#gradient_pie-chart)

```
div {
  background: conic-gradient(
     red 36deg, orange 36deg 170deg, yellow 170deg);
  border-radius: 50%
} 
```

我只为饼图选择了两种颜色。

```
 background: conic-gradient(
          rgb(3, 133, 255) 80%,
          rgb(242, 242, 242) 80%
        ); 
```

[![在此处输入图像描述](../Images/0b27b571c6f850098e64aa7d8ff842bb.png)](https://i.stack.imgur.com/112jN.png)

然后在饼图顶部放置一个 div 使其看起来像一个圆形进度指示器。然后使用 HTML DOM innerHTML 选项设置进度。

[![在此处输入图像描述](../Images/e0e9be954ee40329dedc155dc2f49644.png)](https://i.stack.imgur.com/oqmNW.png)

然后你可以使用 incrementProgress() 和 decrementProgress() 函数来动态改变进度。

按照我的完整示例获得一些想法:)

您可以使用它制作上传/下载进度指示器、仪表板图表等。

```
<html>
  <head>
    <style>
      body {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      #progress-spinner {
        border-radius: 50%;
        height: 100px;
        width: 100px;
      }

      #middle-circle {
        position: absolute;
        border-radius: 50%;
        height: 80px;
        width: 80px;
        background-color: rgb(248, 248, 248);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: large;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div
      style="
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      "
    >
      <div
        style="
          position: relative;
          display: flex;
          justify-content: center;
          align-items: center;
        "
      >
        <div id="middle-circle"></div>
        <div id="progress-spinner"></div>
      </div>

      <div style="margin-top: 30px">
        <button type="button" id="incbtn">+</button>
        <button type="button" id="decbtn">-</button>
      </div>
    </div>

    <script>
      var progress = 0;

      document
        .getElementById("incbtn")
        .addEventListener("click", incrementProgress);
      document
        .getElementById("decbtn")
        .addEventListener("click", decrementProgress);

      function incrementProgress() {
        if (progress != 100) {
          progress = progress + 10;
          console.log(progress);
          setProgress();
        }
      }

      function decrementProgress() {
        if (progress != 0) {
          progress = progress - 10;
          console.log(progress);
          setProgress();
        }
      }

      function setProgress() {
        document.getElementById("progress-spinner").style.background =
          "conic-gradient(rgb(3, 133, 255) " +
          progress +
          "%,rgb(242, 242, 242) " +
          progress +
          "%)";

        document.getElementById("middle-circle").innerHTML =
          progress.toString() + "%";
      }

      window.onload = function () {
        setProgress();
      };
    </script>
  </body>
</html>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-18T00:21:00.057

用于径向进度条的灵活 SVG 解决方案（仅限 CSS）：计算（通过 calc）SVG 内圆的边框长度的解决方案。

示例中的进度圈覆盖在元素上，并且可能是透明的。

```
jQuery(function($){
 setTimeout(() => $('#element1 [data-role="radial-progress"]').css('--progress-percent', '100'), 1000);
 $('#element2 [data-role="radial-progress"]').css('--progress-percent', '80');
 $('#element3 [data-role="radial-progress"]').css('--progress-percent', '100');

 let progress4 = 0;
 let progress4incrementor = setInterval(() => {
  progress4++;
  $('#element4 .value').html(progress4 + '%');
  $('#element4 [data-role="radial-progress"]').css('--progress-percent', progress4.toString());
  if (progress4 >= 100) clearInterval(progress4incrementor);
 }, 100);
});
```

```
.element
{
  position: relative;
}
[data-role="radial-progress"]
{
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    z-index: 1;
    --progress-percent: 0;
  --progress-color: #CC000077;
  --progress-bar-width: 100%;
}
[data-role="radial-progress"] > circle
{
    stroke-width: var(--progress-bar-width);
    stroke-dasharray: calc(100% * 3.141592);
    stroke-dashoffset: calc(100% * (100 - var(--progress-percent))/100 * 3.141592);
    stroke: var(--progress-color);
}

/*Just for animate --data-percent */
#element1 [data-role="radial-progress"] > circle
{
  transition: stroke-dashoffset 4s linear;
}

#element2 [data-role="radial-progress"] > circle
{
  transition: stroke-dashoffset 2s linear;
}
#element3 [data-role="radial-progress"] > circle
{
  transition: stroke-dashoffset 6s linear;
}
#element4 [data-role="radial-progress"] > circle
{
  transition: stroke-dashoffset 0.1s linear;
}
/*Сode that does not depend on radial-progress*/
.element
{
  background-image: url(https://static.wikia.nocookie.net/dune/images/2/2f/Duneii-wind-trap.jpg/revision/latest);
  background-size: 100% 100%;
  display: inline-block;
  width: 180px;
  height: 110px;
  border: 2px solid red;
  text-align: center;
  color: red;
}
#element3
{
  width: 110px;
}
#element3 [data-role="radial-progress"]
{
  transform: rotate(-90deg);
}

#element4
{
 display: inline-flex;
 align-items: center;
 justify-content: center;
}
#element4 .value
{
   font-size: 2em;
   font-weight: bold;
   z-index: 2;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<div id="element1" class="element">
  Content
  <svg data-role="radial-progress" width="100%" height="100%" viewPort="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle r="50%" cx="50%" cy="50%" fill="transparent"></circle></svg>
</div>

<div id="element2" class="element">
  Content
  <svg style="--progress-percent:30" data-role="radial-progress" width="100%" height="100%" viewPort="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle r="50%" cx="50%" cy="50%" fill="transparent"></circle></svg>
</div>

<div id="element3" class="element">
  Content
  <svg style="--progress-bar-width:10px;--progress-color:red;" data-role="radial-progress" width="100%" height="100%" viewPort="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle r="44%" cx="50%" cy="50%" fill="transparent"></circle></svg>
</div>

<div id="element4" class="element">
  <span class="value">0%</span>
  <svg data-role="radial-progress" width="100%" height="100%" viewPort="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle r="50%" cx="50%" cy="50%" fill="transparent"></circle></svg>
</div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-03T07:29:35.873

与新的不同的想法[`@property`](https://developer.mozilla.org/en-US/docs/Web/CSS/@property)。[见支持表](https://caniuse.com/mdn-css_at-rules_property)

```
@property --a {
  syntax: '<angle>';
  inherits: false;
  initial-value: 90deg;
}

.circle {
  width: 120px;
  height: 120px;
  padding: 12px;
  box-sizing: border-box;
  -webkit-mask:
    conic-gradient(#000 var(--a), transparent var(--a)),
    linear-gradient(#000, #000) content-box;
  -webkit-mask-composite: source-out;
          mask-composite: subtract;
  background: tomato;
  border-radius: 50%;
  animation: progress 1s .3s linear forwards;
}

@keyframes progress {
  to {
    --a: 250deg;
  }
}
```

```
<div class="circle"></div>
```

我看到了[Alvaro Montoro](https://codepen.io/alvaromontoro/pen/LYjZqzP)的一个更有力的例子。请务必检查一下。

# mysql - mySQL 查询 - 在同一查询中再次使用结果

> ID：14222139
> 
> 赞同：0
> 
> 时间：2013-01-08T19:00:13.697
> 
> 标签：mysql

我实际上还没有任何代码可以提供..但我可以给你我试图操纵的数据。

我正在使用一组标签/关键字。关键字*可以*通过“related_id”列与另一个关键字相关联。

所以我的桌子看起来像：

关键字表： `keyword_id | keyword | related_id`

对于此示例，让我们假设表中填充了以下条目

```
Entry 1:
keyword_id : 1
keyword: Marathons
related_id: 0

Entry 2:
keyword_id : 2
keyword: Boston
related_id: 1 
```

如您所见，波士顿的这个条目通过related_id 与马拉松相关

我正在努力让用户能够搜索。如果他们搜索单个术语，那很容易，而不是问题。但是，如果他们搜索“波士顿马拉松”，我现在很难查询。

`SELECT * FROM keyword WHERE keyword LIKE "%boston%" OR keyword LIKE "%marathon%"`

在这个初始查询之后，我想比较结果，这将是我上面详述的 2 个条目。

我只想返回与另一个相关的术语。在这种情况下，波士顿是“最低”的公分母，因此，我想将其归还。

想象一下：马拉松 -> 波士顿

这可以在单个查询中完成吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:16:26.367

我在想这样的事情可能会奏效：

```
SELECT
  a.*
FROM keyword a
JOIN keyword b
ON (a.related_id = b.keyword_id)
WHERE (a.keyword LIKE "%boston%"
       OR a.keyword LIKE "%marathon%")
AND (b.keyword LIKE "%boston%"
       OR b.keyword LIKE "%marathon%") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:16:40.000

以下查询将为您提供马拉松 -> 波士顿的答案。如果有一个关键字没有关系，它将显示为 IceCream ->

```
SELECT resultset1.keyword,'->',IF(resultset2.keyword IS NOT NULL,resultset2.keyword,'')
FROM
    (SELECT * FROM keyword WHERE keyword LIKE "%boston%" OR keyword LIKE "%marathon%")
     as resultset1
LEFT JOIN
    (SELECT * FROM keyword WHERE keyword LIKE "%boston%" OR keyword LIKE "%marathon%")
as resultset2
on resultset1.keyword_id=resultset2.related_id; 
```

# image-processing - 如何在 2mbit/s 线上流式传输 30 个 480x640 图像

> ID：14222141
> 
> 赞同：0
> 
> 时间：2013-01-08T19:00:19.440
> 
> 标签：image-processing, video-streaming

在从事我正在从事的项目时，我有一个奇怪的认识。

我创建了一个流式传输解决方案，我在其中流式传输分辨率为 480x640 的图像，总计 30'720 像素，每个像素包含 32 位数据，根据我的计算，这意味着每帧总计为 1.2MB 的数据，这意味着总计 30fps到 36MB/s 的线路。

那么对于我的问题，流媒体解决方案如何通过 f.ex 2mbit/s 线路传输 30fps？

我猜同样的问题可能可以用来解释分辨率为 480x640 的 jpg 图像如何占用 <100KB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:15:09.743

压缩是你的朋友。

我不知道您的解决方案的细节，但可以做出一些假设。

首先，即使您将每个帧作为完整帧发送，它们也应该被压缩。即使是无损压缩也应该可以为您带来一些不错的压缩率，但是如果您使用有损的东西（例如 jpg），那么您可以获得更多。

但这不是你得到的全部。任何好的视频编解码器也应该提供显着的压缩。图像中帧之间没有变化的部分根本不需要发送，其他部分也可以很好地压缩（我不太了解所使用的压缩细节，但是已经完成了很多工作压缩它）。

与为每帧发送完整的 32 位位图相比，这一切都节省了很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:40:10.323

压缩是一个非常广泛的话题。只是想了解一下，请尝试阅读有关[图像压缩的维基百科页面](http://en.wikipedia.org/wiki/Image_compression)

作为您问题的一个非常基本的解决方案，我会亲自对第一帧进行 jpeg 编码，然后对两个连续帧之间的差异进行 jpeg 编码。

对于 jpeg 压缩，有许多库提供该功能，而无需自己实现。

如果您对质量不感兴趣，您还可以对视频进行二次采样，例如获取分辨率为 240*320 的帧

# java - JOGL 和只是黑色的窗户

> ID：14222142
> 
> 赞同：0
> 
> 时间：2013-01-08T19:00:21.207
> 
> 标签：java, linux, opengl, ubuntu, jogl

我正在为大学做一个项目，用 Java 编程。
我们正在使用**JOGL 2.0 并**在我的系统
**Ubuntu 12.10 64bit 和 Sun Java 6u38**上使用 OpenGL 2.1 ，但是当我启动
各种 JOGL 应用程序时，我只是得到一个黑色窗口。

JOGL 库**绑定到项目，而不是我的 Java 安装。**
我在使用不同的其他 Java 版本
（Sunjava 6 和 7 以及 OpenJava 6 和 7）时遇到了同样的问题。

在同一台机器上的**MS Windows 系统**下，一切正常。
当我使用**gdx-Libararies**（使用 OpenGL）时，一切正常（在我的 linux 上）。
在**其他 linux-machines**上，一切都很好（即使使用 Intel CPU/GPU，其他型号）。

编辑：其他 OpenGL 应用程序（mesa-utils，像 Team Fortress 2 这样的游戏正在运行）
几个月前，我使用了 JOGL 1.1.1，安装在我的 Java 安装中以获取一些旧代码，并且运行良好。

我的机器是 Thinkpad L530
Intel Core i3-3110M，8GB DDR3
IDE：Netbeans 4.x

那么有没有人有想法，**可能是什么问题？**

# ruby-on-rails - 在 UNIX 套接字中运行 Rails 服务器

> ID：14222149
> 
> 赞同：4
> 
> 时间：2013-01-08T19:00:38.020
> 
> 标签：ruby-on-rails, ruby, nginx, thin

是否可以`rails server`在 UNIX 套接字中运行？

我问是因为`rails server`给出了如此漂亮的输出，并且很容易区分 SQL 查询和 HTTP 请求等。但是，我使用的是 Nginx，所以我想使用 UNIX 套接字将应用程序服务器与其连接，但是我我遇到了一些麻烦。

以下命令会导致错误：

```
bundle exec rails server thin --socket=/var/run/rails_app.sock 
```

它似乎试图解析`--socket`为一个选项`rails server`，而不是`thin`。有什么办法可以解决这个问题，还是我坚持使用`thin start`并屈服于不太漂亮的日志输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:06:42.193

尝试使用：

```
bundle exec rails server thin -- --socket=/var/run/rails_app.sock 
```

`--`用于在许多 *nix 应用程序上标记第一个命令的参数结束。

来自`man sh`：

```
 --        A  --  signals the end of options and disables further option processing.  Any arguments after the --
             are treated as filenames and arguments.  An argument of - is equivalent to --. 
```

# c - 错误：取消引用指向不完整类型的指针 - 为什么？

> ID：14222150
> 
> 赞同：1
> 
> 时间：2013-01-08T19:00:39.383
> 
> 标签：c, gcc

我在文件“vector.c”中有这个结构：

```
struct Vector
{
int * m_items;
int m_size;
int m_extSize;
int m_numItems;
}; 
```

在“main.c”上，我试图检查某个向量的值 m_items 是否为 NULL ：

```
if (! vec->m_items)
        printf("not fail\n"); 
```

我在使用值初始化“vec”之后执行此操作 - 向量有 1 个值（我检查了它）。但是，gcc 正在为上面的行写一个错误：

```
Error: dereferencing pointer to incomplete type 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:05:41.867

您必须将整个定义`Vector`移至头文件并将其包含在 vector.c 和 main.c 中。

添加一个`typedef struct Vector Vector;`是不够的。这只是告诉编译器有一个类型`Vector`并且在其他地方定义，所以它是不完整的。它允许您声明指向它的指针，因为它不需要知道它拥有哪些成员来分配指针。所有指针的大小相同。

# wpf - WPF 多文本框用户控件

> ID：14222151
> 
> 赞同：-1
> 
> 时间：2013-01-08T19:00:40.907
> 
> 标签：wpf, user-controls

我想要一个包含 4 个文本框 [比如 tb1、tb2、tb3 和 tb4] 的用户控件 [比如 UC1]。这个用户控件应该有 4 个普通属性 [比如 prop1、prop2、prop3 和 prop4] 绑定到这些文本框。我想要这个用户控件向外部世界公开的依赖属性 [say dp]。此用户控件从类 [say C1] 的属性 [say StrProp] 中获取单个字符串 [say 0\abc|1\def|2\ghi|3\jkl] 并分成 4 个部分 [say abc, def, ghi 和 jkl] 显示在我的用户控件的 4 个文本框中。如果用户在任何或所有文本框中进行了任何更改，则所有更改的文本都应合并并反映回类 C1\StrProp 属性。另外，我的要求是 dp 应该绑定到 UI\XAML 中的 StrProp。验证也应该正确完成。

任何人都可以通过写一个例子来帮助我吗？示例类如下：

MyMultiTextBoxUserControl.xaml

```
<UserControl x:Class="MyMultiTextBoxControl_UsingNConsuming.MyMultiTextBoxUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height=".25*"/>
            <RowDefinition Height=".25*"/>
            <RowDefinition Height=".25*"/>
            <RowDefinition Height=".25*"/>
        </Grid.RowDefinitions>
        <TextBox Grid.Row="0" Text="{Binding ElementName=UserControl, Path=CombinedField1 }"/>
        <TextBox Grid.Row="1" Text="{Binding ElementName=UserControl, Path=CombinedField2}"/>
        <TextBox Grid.Row="2" Text="{Binding ElementName=UserControl, Path=CombinedField3}"/>
        <TextBox Grid.Row="3" Text="{Binding ElementName=UserControl, Path=CombinedField4}"/>
    </Grid>
</UserControl> 
```

MyMultiTextBoxUserControl.xaml.cs

```
public partial class MyMultiTextBoxUserControl : UserControl
    {
        public MyMultiTextBoxUserControl()
        {
            InitializeComponent();
        }

        //static FrameworkPropertyMetadata propertydata = new FrameworkPropertyMetadata("Hello",
        //    FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, new PropertyChangedCallback(PropertyChanged_Callback), new CoerceValueCallback(CoerceValue_Callback),
        //    false, UpdateSourceTrigger.LostFocus);

        //public static readonly DependencyProperty CombinedTextProperty =
        //    DependencyProperty.Register("CombinedText", typeof(string), typeof(MyMultiTextBoxUserControl), propertydata, new ValidateValueCallback(Validate_ValueCallback));

        static FrameworkPropertyMetadata propertydata = new FrameworkPropertyMetadata("Hello",
           FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, new PropertyChangedCallback(PropertyChanged_Callback));
        public static readonly DependencyProperty CombinedTextProperty =
            DependencyProperty.Register("CombinedText", typeof(string), typeof(MyMultiTextBoxUserControl), propertydata);

        private static bool Validate_ValueCallback(object value)
        {
            string str=value as string;
            bool result = true;
            if (str.Length > 28)
                result = false;
            if (str.Length < 1)
                result = false;
            if (str.Substring(0, 2) != "0'\'")
                result = false;
            if (str.Contains("1'\'") == false || str.Contains("2'\'") || str.Contains("3'\'"))
                result = false;
            return result;
        }

        private static object CoerceValue_Callback(DependencyObject obj,object value)
        {
            return value;
        }

        private static void PropertyChanged_Callback(DependencyObject obj, DependencyPropertyChangedEventArgs e)
        {            
            MyMultiTextBoxUserControl control=(MyMultiTextBoxUserControl)obj;
            string select = e.NewValue.ToString();
            char[] pipeDelim,slashDelim;
            string[] pipeSplt;
            pipeDelim = new char[] { '|' };
            slashDelim = new Char[] { '/' };
            pipeSplt = select.Split(pipeDelim);
            if (pipeSplt.Length == 1)
                return;
            string[][] str = new string[4][];
            int x = 0;
            foreach (string s in pipeSplt)
            {
                if (string.IsNullOrEmpty(s) == false)
                {
                    str[x] = s.Split(slashDelim);
                    x++;
                }
            }
            control.CombinedField1 = str[0][1];
            control.CombinedField2 = str[1][1];
            control.CombinedField3 = str[2][1];
            control.CombinedField4 = str[3][1];
        }

        public string CombinedText
        {
            get { return GetValue(CombinedTextProperty) as string; }
            set { SetValue(CombinedTextProperty, value); }
        }

        public string CombinedField1 
        {
            get;  set; 
        }

        public string CombinedField2
        {
            get;
            set;
        }

        public string CombinedField3
        {
            get;
            set;
        }

        public string CombinedField4
        {
            get;
            set;
        }
    } 
```

组合字符串类.cs

```
namespace MyMultiTextBoxControl_UsingNConsuming
{
    public class CombinedStringClass
    {
        public CombinedStringClass() { }
        string m_CombinedString;
        public string CombinedString
        {
            get { return m_CombinedString; }
            set
            {
                if (m_CombinedString != value)
                    m_CombinedString = value;
            }
        }
    }
} 
```

ConsumerClass.xaml

```
<Window x:Class="MyMultiTextBoxControl_UsingNConsuming.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:MyMultiTextBoxControl_UsingNConsuming;assembly="        
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <local:CombinedStringClass x:Key="myClass"/>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.5*"/>
            <ColumnDefinition Width="0.5*"/>
        </Grid.ColumnDefinitions>        
        <Grid.RowDefinitions>
            <RowDefinition Height="0.33*"/>
            <RowDefinition Height="0.34*"/>
            <RowDefinition Height="0.33*"/>
        </Grid.RowDefinitions>
        <TextBlock Text="User Control Text Boxes" Grid.Row="0" Grid.Column="0" Foreground="Black" VerticalAlignment="Center" HorizontalAlignment="Center"/>
        <local:MyMultiTextBoxUserControl Grid.Row="0" Grid.Column="1" Foreground="Black" CombinedText="{Binding Source=myClass, Path=CombinedString, Mode=TwoWay,FallbackValue=DataNotBound}"/>
        <TextBlock Text="Combied String" Grid.Row="2" Grid.Column="0" Foreground="Black" VerticalAlignment="Center" HorizontalAlignment="Center"/>
        <TextBox Name="OneStringTextBox" Grid.Row="2" Grid.Column="1" Foreground="Black" Text="0\abc|1\def|2\ghi|3\jkl" IsEnabled="False"/>
    </Grid>
</Window> 
```

我还需要将 UserControl 的文本框的更改文本组合在一起，使其应以 [0\f|1\gh|2\zx|3\oo] 的形式反映在 OneStringTextBox 中。此外，总字符串长度应为 28，每个文本框的最大长度为 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:36:29.330

阅读`WPF in C# 2010: Windows Presentation Foundation in .NET 4 Matthew MacDonald`第 18 章。有一个很好的例子可以帮助你。

为您的用户控件命名，将 {Binding ElementName=UserControl... 替换为 {Binding ElementName=NameOfUserControl，将 CombinedFields 属性转换为 DP。

# android - Androids onStatusChanged 不起作用

> ID：14222152
> 
> 赞同：3
> 
> 时间：2013-01-08T19:00:47.010
> 
> 标签：android, gps, location, locationmanager, locationlistener

如果 GPS_PROVIDER 的状态发生变化，我会尝试获取通知。我在这里找到了以下代码（http://hejp.co.uk/android/android-gps-example/），但我没有收到通知。

1.  现在我在建筑物中，无法接收 GPS 信号，所以我不会收到“状态已更改：停止服务”的通知吗？
2.  何时调用 onStatusChanged？
3.  我究竟做错了什么？

谢谢，

```
@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    /* This is called when the GPS status alters */
    switch (status) {
    case LocationProvider.OUT_OF_SERVICE:
        Log.v(tag, "Status Changed: Out of Service");
        Toast.makeText(this, "Status Changed: Out of Service",
                Toast.LENGTH_SHORT).show();
        break;
    case LocationProvider.TEMPORARILY_UNAVAILABLE:
        Log.v(tag, "Status Changed: Temporarily Unavailable");
        Toast.makeText(this, "Status Changed: Temporarily Unavailable",
                Toast.LENGTH_SHORT).show();
        break;
    case LocationProvider.AVAILABLE:
        Log.v(tag, "Status Changed: Available");
        Toast.makeText(this, "Status Changed: Available",
                Toast.LENGTH_SHORT).show();
        break;
    } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-10T15:42:18.613

如果您的 GPS 状态在应用程序运行时没有发生变化（例如，如果您始终在室内没有 GPS 定位），则某些设备不会触发该`OnStatusChanged()`方法。

如果您在应用程序运行时更改 GPS 状态（例如，您在室内但无法获得定位，然后走到外面却可以获得定位，反之亦然），则该`OnStatusChanged()`方法应在所有设备上触发。

如果您想要一个完全正常工作的开源应用程序作为示例，请尝试 GPSTest（完全公开，我的应用程序）：

Google Play 上的 GPSTest - [https://play.google.com/store/apps/details?id=com.android.gpstest](https://play.google.com/store/apps/details?id=com.android.gpstest)

GPSTest 的源代码 - [https://github.com/barbeau/gpstest](https://github.com/barbeau/gpstest)

有关即使您的设备无法修复也会不断更新的 GPS 的更多详细信息，您可能需要注册一个`GPSStatus.Listener`.

在您的活动中，使其实现`GpsStatus.Listener`，例如：

```
public class GpsTestActivity extends TabActivity
    implements LocationListener, GpsStatus.Listener{ 
```

然后，在您的活动中声明类变量：

```
private LocationManager mService;
private GpsStatus mStatus; 
```

...并添加处理 GPSStatus 更改的方法：

```
public void onGpsStatusChanged(int event) {
    mStatus = mService.getGpsStatus(mStatus);
    switch (event) {
        case GpsStatus.GPS_EVENT_STARTED:
            // Do Something with mStatus info
            break;

        case GpsStatus.GPS_EVENT_STOPPED:
            // Do Something with mStatus info
            break;

        case GpsStatus.GPS_EVENT_FIRST_FIX:
            // Do Something with mStatus info
            break;

        case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
            // Do Something with mStatus info
            break;
    }

} 
```

然后在`OnCreate()`您的 Activity 中注册 GPSStatus.Listener：

```
 mService = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
 mService.addGpsStatusListener(this); 
```

在 GPSTest 应用程序中，当前可用卫星的列表显示在屏幕上，每个 GPSStatus.Listener 更新都基于以下代码：

[https://github.com/barbeau/gpstest/blob/master/GPSTest/src/main/java/com/android/gpstest/GpsStatusFragment.java](https://github.com/barbeau/gpstest/blob/master/GPSTest/src/main/java/com/android/gpstest/GpsStatusFragment.java)

这样，即使您的手机无法获得 GPS 定位（因此可能不会触发`OnStatusChanged`LocationListener），您也会收到系统 GPS 状态的活动更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:15:14.197

也许您需要检查此链接[GpsStatus.Listener](http://developer.android.com/reference/android/location/GpsStatus.Listener.html#onGpsStatusChanged%28int%29) 此侦听器用于了解 GPS 状态何时发生变化。

至于您指出的方法，它用于了解提供者状态何时更改，如文档[LocationListener中所述](http://developer.android.com/reference/android/location/LocationListener.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:54:06.417

过去几周我一直在研究 GPS，无论我从测试中注意到什么，都有可能在建筑物内获取 GPS 信号。如果您在地下室区域，那么您将永远无法获得。我从家里试过，95% 的时间总是得到我的纬度和经度。

你无法控制这一点。如果有可用的 Internet 或 WiFi 连接，GpsLocationProvider 会自动使用辅助 SUPL。仅当无法访问 Internet 时才使用独立案例。辅助数据有助于锁定 GPS 卫星信号。在室内情况下，您可以看到 2-3 颗卫星（这取决于您的芯片组的质量）。如果无法扫描到卫星信号，则无法修复。

谢谢，拉梅什小号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-06T01:16:53.050

Android 文档[说](https://developer.android.com/reference/android/location/LocationListener#onStatusChanged(java.lang.String,%20int,%20android.os.Bundle))该`onStatusChanged`方法已被弃用：

> 此回调永远不会在 Android Q 及更高版本上调用，并且提供程序可以被视为始终处于 LocationProvider#AVAILABLE 状态。

但是我发现它仍然需要实现即使Android Studio没有抱怨它，否则应用程序会崩溃

# xpages - 使用文件上传后更新视图

> ID：14222158
> 
> 赞同：0
> 
> 时间：2013-01-08T19:01:20.623
> 
> 标签：xpages

我确定这与我的问题有关

[对话框中文件数据的空值：com.ibm.xsp.http.UploadedFile？](https://stackoverflow.com/questions/14204216/null-value-for-filedatacom-ibm-xsp-http-uploadedfile-in-dialog-box)

我仍然不是 100% 清楚为什么文件上传控件不能直接在扩展页面对话框中工作。

但无论如何，我使用隐藏面板内的文件更新控件提出了自己的解决方案。我需要将使用控件的按钮设置为完全更新。

我有一个按钮可以导入数据。该按钮通过文件上传控件获取文件。此数据显示在 xpage 上的视图中。即使导入按钮具有完全更新，视图也不会更新。我猜完整更新实际上是在导入实际完成之前执行的？

导入完成后是否有更新我的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:21:51.463

我的理解是文件上传需要完全刷新 XPage 才能将文件推送到服务器上的临时文件夹。此时，附件只是存储在该临时文件夹中。它不存储在 NSF 中。需要运行后续函数才能将其保存到文档中。

您的按钮是将文件上传到临时文件夹，还是保存 Notes 文档/直接访问临时文件并通过后端处理？如果它只是执行上传，则视图不会上传。

我遇到的另一件事是查看面板没有立即更新已创建的新文档。在这种情况下，绑定到 NotesView.getDocumentsByKey() 的重复控件会立即更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:15:27.830

我通过使上传文件的按钮显示扩展页面对话框来解决了这个问题。此对话框有一个确定按钮来关闭消息框，但也刷新表单的所需部分。

# c - 从文件中读取矩阵到 **a 给我分割错误

> ID：14222161
> 
> 赞同：1
> 
> 时间：2013-01-08T19:01:34.460
> 
> 标签：c

我正在尝试将文件中的值读取到此矩阵**a，但我总是`Segmentation fault`因为我的`scanf`. 你能解释一下我的错误吗？谢谢

```
int main(int argc, char**argv) {

    int**a;

    FILE * fp;

    int i, j, temp;
    int n = 8;
    fp = fopen("matrix.txt", "r");

    a = malloc(sizeof(int)*n);

    for (i = 0; i < n; i++)
        a[i] = malloc(sizeof(int)*n);

    for (i = 0; i < n; i++)
        for (j = 0; j < n; j++)
            fscanf(fp, "%d", a[i][j]);

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T19:06:32.967

You need an ampersand in `fscanf`:

```
fscanf(fp, "%d", &a[i][j]);
                 ^ 
```

A second problem that could catch you is that you're using the wrong `sizeof` in the first `malloc`. You want `sizeof(int *)` instead of `sizeof(int)`. A simple rule to avoid such issues is to just use:

```
a = malloc(n * sizeof *a); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T19:06:01.870

The first mistake is here: `a = malloc(sizeof(int)*n);`.

You have to use `int*` type instead: `a = malloc(sizeof(int*)*n);`

# wso2 - WSO2 GovernanceServer 和 Google 协议缓冲区

> ID：14222162
> 
> 赞同：0
> 
> 时间：2013-01-08T19:01:44.680
> 
> 标签：wso2, soa

我们开始研究用于 SOA 治理的 WSO2 Governance Registry 软件（所以我才刚刚开始深入研究这个产品）。我看到如果您使用 Web 服务，您可以通过指向 WSDL 来自动构建治理数据。有谁知道是否有任何方法可以通过指向 Google Protocol Buffer .proto 文件来自动构建？

这有我们的消息格式和我们的服务详细信息，所以能够做到这一点非常好。如果没有类似的东西，可以开发一些东西来做到这一点（如果是这样，指向我需要的文档的指针会很棒！）。

我们没有使用 WebServices，所以没有 WSDL 的.....谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:54:27.360

现在，WSO2 Governance Registry 无法实现这种指向原始文件和创建服务的功能。

但是，可以将其添加为新功能，并且应该是一个简单的实现。AFAIK，这就像创建一个处理程序以将 proto 文件作为媒体类型处理一样简单，并在该处理程序中执行我们为 WSDL 执行的相同操作，并从中创建一个服务。

拥有 WSDL 并不是创建服务所必须的。我们也可以在 WSO2 Governance Registry 中表示非 SOAP 服务。

# iphone - 滚动完成后推送视图控制器

> ID：14222167
> 
> 赞同：0
> 
> 时间：2013-01-08T19:02:03.380
> 
> 标签：iphone, ios, cocoa-touch, uitableview, uiviewcontroller

当用户向我的列表中添加一个项目时，我想滚动到新行，突出显示它，然后选择它（这将推送一个新控制器）。关键部分是在推动新控制器之前等待滚动动画完成。

在[这个答案](https://stackoverflow.com/questions/4356256/how-to-get-notified-when-scrolltorowatindexpath-finishes-animating)中，我学习了如何使用动画委托等到滚动完成。

但是，如果插入行已经在屏幕上，表格视图将不会滚动并且该方法不会触发。

我如何才能等到滚动结束才推送新控制器，并处理不会启动滚动的情况 - 我如何区分每种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:12:18.113

尝试创建一个方法来查看是否需要滚动。如果不需要滚动，则立即调用推送，否则等待委托调用并推送。

```
- (BOOL)isSrollingingNeededForIndexPath:(NSIndexPath *)indexPath {
    NSArray *visibleIndices = [self.tableView indexPathsForVisibleRows];
    for (NSIndexPath *visibleIndexPath in visibleIndices)
        if ([indexPath compare:visibleIndexPath] == NSOrderedSame)
            return NO;
    return YES;
} 
```

**编辑：**好点。由于`indexPathsForVisibleRows`用于数据渲染。

`indexPathsForRowsInRect`您可以在使用`content.offset.y`和`tableview.frame.size.height`确定“可见矩形”的位置进行基本相同的操作。

然后考虑顶部和底部的部分可见行，您可以添加`rowHeight-1`到矩形的顶部并`rowHeight - 1`从矩形的底部减去。如果您有静态高度行，代码不应该太粗糙。如果你有不同高度的行，它仍然可以工作，但它会涉及更多。

尽管如此，对于一些你认为会有一个简单答案的东西来说，似乎有很多代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T23:38:02.017

检查给定行是否在表格视图中可见的最简单方法是这样的：

```
if (!CGRectContainsRect([self.tableView bounds], [self.tableView rectForRowAtIndexPath:indexPath])
{
    // the row is partially outside the table view’s boundaries and needs to be scrolled for full visibility
}
else
{
    // the row is within the boundaries and does not need to be scrolled
} 
```

# c++ - 在 Linux 中检测 system() 函数返回值的含义

> ID：14222172
> 
> 赞同：4
> 
> 时间：2013-01-08T19:02:14.850
> 
> 标签：c++, linux, signals, system, return-value

`system(COMMAND)`当我在 Linux 上运行的代码中使用函数执行命令时`C++`，调用的返回值`system(COMMAND)`彼此不同。我们有什么方法可以通过使用函数的返回值来检测**分段错误**或**异常终止**`system(COMMAND)`？

例如，当我使用`system`函数执行命令后出现分段错误时，我确认该函数的返回值为 35584。但是，我不知道该返回值是什么意思，我不确定所有可能的分段错误都返回 35584 . 遇到分段错误或异常终止时，有没有办法检测返回值的所有可能值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T19:11:14.873

`man 3 system`指`man 2 wait`用于返回值的含义。后一页描述了几个可用于此值的宏，特别是`WIFSIGNALED(status)`和`WTERMSIG(status)`。这就是您可以用来检查分段错误或其他信号终止的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T19:22:10.647

```
#include <cstdlib>
#include <iostream>

int main()
{
  const int result = system("./core_dump"); // core_dump only calls abort()
  std::cout << "result=" << result << '\n';
  std::cout << "Terminated by signal: " << (WIFSIGNALED(result) ? "yes" : "no") << '\n';
  std::cout << "Exited normally: " << (WIFEXITED(result) ? "yes" : "no") << '\n';
  return 0;
} 
```

输出（在 Ubuntu 12.10 上）：

```
Aborted (core dumped)
result=34304
Terminated by signal: no
Exited normally: yes 
```

`./core_dump`打印出来可能会令人惊讶`exited normally: yes`。虽然`./core_dump`失败，但`system`返回`/bin/sh -c`运行命令的进程的退出代码，正常退出。

相反，调用`system("/bin/kill -9 $$")`而不是`system("./core_dump")`导致以下输出：

```
result=9
Terminated by signal: yes
Exited normally: no 
```

关于退出代码的进一步说明。该`core_dump`示例返回退出代码 34304。首先，我们必须将其移动 8 位。结果是`35304 >> 8 == 134`，它是被中止信号杀死的作业的退出代码。如果它因为段错误而失败，我们会得到 139。

[这](https://www.slac.stanford.edu/BFROOT/www/Computing/Environment/Tools/Batch/exitcode.html)是退出代码概述的链接。

最后，这`core_dump`是用于测试的源代码：

```
#include <cstdlib>

int main() {
  abort();
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T19:13:18.243

Linux 退出代码在这个问题中讨论：[Are there any standard exit status codes in Linux?](https://stackoverflow.com/questions/1101957/are-there-any-standard-exit-status-codes-in-linux)

IIRC system() 的返回值应该对应于衍生进程的退出代码，但这似乎与您的观察背道而驰。奇怪的。我会测试。

编辑：观察：

1.  我可以确认您对 system() 的返回值。
2.  请注意，35585 == 139 << 8\. 139 是 segfaulted 进程的 linux 退出代码

接下来查看glibc源码获得权威答案...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T19:10:24.030

对于任何任意命令？并不真地。由每个程序来赋予退出代码意义。您唯一可以假设的是 0 意味着成功，但即使这只是惯例，也不能保证。

# c++ - 将模板函数专门用于参数类型中是否存在 POD 结构成员

> ID：14222176
> 
> 赞同：3
> 
> 时间：2013-01-08T19:02:39.370
> 
> 标签：c++, templates, c++11, sfinae

给定一般形式的 POD 结构

```
struct case_0   { const char *foo;                       };
struct case_1i  { const char *foo; int v0;               };
struct case_1d  { const char *foo; double v0;            };
struct case_2ii { const char *foo; int v0;    int v1;    };
struct case_2id { const char *foo; int v0;    double v1; };
// etc 
```

是否可以根据 , 等数据成员的存在与否来调度函数重载集的（模板）成员——理想情况下，不*依赖**于*这些成员的特定类型——如果可以，如何？具体来说，给定`v0``v1`

 *```
void
process(const case_0& c)
{
   do_stuff_with(c.foo);
}

template <typename case_1> void   
process(const case_1& c)
{
   do_stuff_with(c.foo, c.v0);
}

template <typename case_2> void
process(const case_2& c)
{
   do_stuff_with(c.foo, c.v0, c.v1);
} 
```

我希望为所有在其主体中使用`case_*`的所有成员的结构选择每个重载`v-`，并且 - 同样重要的是 -*没有*任何`v-`未在其主体中使用的成员。

这个程序必须是 100% 独立的，所以请不要 Boost。C++11 功能还可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:07:50.780

You need to write a set of traits such as `has_v0` and `has_v1` (which I'm sure has been demonstrated many times on SO) then constrain your overloads using them:

```
template <typename case_0,
  typename = typename std::enable_if<!has_v0<case_0>::value>::type,
  typename = typename std::enable_if<!has_v1<case_0>::value>::type
>
void
process(const case_0& c)
{
   do_stuff_with(c.foo);
}

template <typename case_1,
  typename = typename std::enable_if<has_v0<case_1>::value>::type,
  typename = typename std::enable_if<!has_v1<case_1>::value>::type
>
void   
process(const case_1& c)
{
   do_stuff_with(c.foo, c.v0);
}

template <typename case_2,
  typename = typename std::enable_if<has_v0<case_2>::value>::type,
  typename = typename std::enable_if<has_v1<case_2>::value>::type
>
void
process(const case_2& c)
{
   do_stuff_with(c.foo, c.v0, c.v1);
} 
```

You can simplify the constraints with something like

```
template<typename Cond>
  using Require = typename std::enable_if<Cond::value>::type; 
```

e.g.

```
template <typename case_2,
  typename = Require<has_v0<case_2>>,
  typename = Require<has_v1<case_2>>
>
void
process(const case_2& c)
{
   do_stuff_with(c.foo, c.v0, c.v1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T20:07:10.537

One solution is provided by @Jonathan Wakely which employs the use of `has_XXX` meta-functions.

Here is another solution, but it requires you to change your full-fledge structs definitions to mere typedefs of `std::tuple<>`.

### full-fledge structs:

```
struct case_0   { const char *foo;                       };
struct case_1i  { const char *foo; int v0;               };
struct case_1d  { const char *foo; double v0;            };
struct case_2ii { const char *foo; int v0;    int v1;    };
struct case_2id { const char *foo; int v0;    double v1; }; 
```

### are replaced with typedefs structs as follows:

```
typedef std::tuple<const char*>            case_0;
typedef std::tuple<const char*,int>        case_1i;
typedef std::tuple<const char*,double>     case_1d;
typedef std::tuple<const char*,int,int>    case_2ii;
typedef std::tuple<const char*,int,double> case_2id;

template<typename...Args>
auto foo(std::tuple<Args...> & tpl) -> decltype(std::get<0>(tpl))&
{
     return std::get<0>(tpl);
}

template<typename...Args>
auto v0(std::tuple<Args...> & tpl) -> decltype(std::get<1>(tpl))&
{
     return std::get<1>(tpl);
}

template<typename...Args>
auto v1(std::tuple<Args...> & tpl) -> decltype(std::get<2>(tpl))&
{
     return std::get<2>(tpl);
} 
```

### and the usage

```
case_1i obj; //full-fledge struct
obj.foo = "hello";
obj.v0 = 100; 
```

### is replaced with

```
case_1i obj; //typedef struct
foo(obj) = "hello";
v0(obj) = 100; 
```

* * *

Once you accept this design change, the solution to your original problem becomes pretty much straight-forward as follows:

```
template<size_t...>
struct seq{};

template<size_t M, size_t ...N>
struct genseq  : genseq<M-1,M-1, N...> {};

template<size_t ...N>
struct genseq<0,N...>
{
    typedef seq<N...> type;
};

template <typename ...Args, size_t ...N> 
void call_do_stuff_with(std::tuple<Args...> & tpl, seq<N...>)
{
    do_stuff_with(std::get<N>(tpl)...);
}

template <typename ...Args> 
void process(std::tuple<Args...> & tpl)
{
   const size_t N = sizeof ...(Args);
   call_do_stuff_with(tpl, typename genseq<N>::type());
} 
```

Do let me know if that is acceptable. If that is not acceptable, I will delete my answer (if you feel so).

[Live demo!](http://stacked-crooked.com/view?id=9005fd1e72d6de63912d8820311c83bb)*

# c# - 使用c#在asp.net3服务器上的文件系统中上传图像

> ID：14222177
> 
> 赞同：0
> 
> 时间：2013-01-08T19:02:46.317
> 
> 标签：c#, asp.net

我正在尝试使用 c# 上传图像并将其存储在 asp.net 的文件系统中。我正在使用此代码

```
 if (FileUpload1.HasFile)
    {
        if ((FileUpload1.PostedFile.ContentType == "image/jpeg") ||
           (FileUpload1.PostedFile.ContentType == "image/png") ||
           (FileUpload1.PostedFile.ContentType == "image/tmp") ||
           (FileUpload1.PostedFile.ContentType == "image/gif"))
        {
            if (Convert.ToInt64(FileUpload1.PostedFile.ContentLength) < 10000000)
            {
                string filename = Label1.Text;
                FileUpload1.SaveAs(Server.MapPath("productImage\\" + ddlproductId.Text + "\\" + filename + ".jpg"));

            }
        }
    } 
```

它实际上在我的计算机上工作正常，但是当我将它上传到服务器上时它会出现一些错误。请帮我。感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:41:20.080

听起来像是权限问题。您需要更改 Web 服务器上该文件夹的安全性并确保`NETWORK SERVICE`具有`Write`权限。或者，如果您有一台较旧的服务器，它将是`ASPNET`.

# php - PHP strtotime 函数回滚一个月的问题

> ID：14222181
> 
> 赞同：0
> 
> 时间：2013-01-08T19:03:03.227
> 
> 标签：php, mysql

我有一个存储在 MySQL 中的日期为 2012-11-00，我正在尝试对其进行转换，以便可以在 PHP 页面上正确格式化它。当我使用以下内容时，我总是落后一个月。因此，如果 MySQL 中的日期是 2012-11-00，那么 PHP 的结果是 2012 年 10 月。

```
date("M Y", strtotime($resVal['dateField'])) 
```

关于它为什么这样做的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:07:17.987

# #1。

为什么不保存日期`2012-11-01`？

因为`2012-11-00`是“无效的”，所以对于 PHP，该日期等于`2012-10-31`.

# #2。

使用`DateTime::createFromFormat`which 可以轻松处理您的（奇怪的）格式：

```
echo DateTime::createFromFormat('Y-m-|??', '2012-11-00')->format('M Y'); 
```

将返回`Nov 2012`

# #3。

[使用DATE_FORMAT](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)函数在 MySQL 中格式化日期：

```
SELECT DATE_FORMAT(date_field, '%b %Y')
FROM table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:07:17.430

将日期另存为“2012-11-01”，因为 2012-11-00 无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:08:08.673

2012-11-00 不是有效日期 2012-11-01 是一个日期......所以它可能四舍五入到 2012-10-31

# sql-server-2008 - 如何查看 SQL Server 2008 中特定索引的索引重组请求历史记录

> ID：14222189
> 
> 赞同：0
> 
> 时间：2013-01-08T19:03:44.240
> 
> 标签：sql-server-2008, tsql, indexing, reorganize

在 SQL Server 2008 中，尝试重新组织表上的索引时，我看到此错误：

*无法重新组织表“MyTable”上的索引“MyIndex”（分区 1），因为它正在被另一个进程重新组织*

我看到作为 SSIS 包失败的一部分返回的错误消息。这发生在几个小时后，当时我不在身边快速查看诸如活动监视器之类的东西来识别罪魁祸首过程。

我的问题是如何在事后一天确定另一个重组过程？

理想情况下，我希望查看特定索引的索引重组请求的历史记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:10:33.190

默认情况下 SQL Server 2008 不会执行此操作，并且我没有构建任何可以专门捕获这些事件的东西，所以我很不走运。

# asp.net - asp.net 更新面板创建新的下拉框

> ID：14222190
> 
> 赞同：0
> 
> 时间：2013-01-08T19:03:50.120
> 
> 标签：asp.net, combobox, updatepanel, dropdownbox

我的asp.net面板有问题我想在更改另一个下拉框的索引时修改下拉框数据源选择命令，但是每次我更改新的下拉框都会创建我的代码：

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server"  >
          <ContentTemplate>
              <asp:DropDownList ID="comboCountry" runat="server"   AutoPostBack="True"
                    DataSourceID="SqlDataSource3"  OnSelectedIndexChanged="comboCountry_OnSelectedIndexChanged"
                    DataTextField="country_name" DataValueField="country_id">

                  </asp:DropDownList>
                <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
                    ConnectionString="<%$ ConnectionStrings:JobsConnectionString %>" 
                    SelectCommand="SELECT * FROM [country]"></asp:SqlDataSource>
                </td>
             </tr>
            <tr class="trwidth">
            <td>
                <asp:DropDownList ID="comboCity" runat="server" DataSourceID="SqlDataSource2"  
                    DataTextField="city_name" DataValueField="location_id">
                </asp:DropDownList>
                <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
                    ConnectionString="<%$ ConnectionStrings:JobsConnectionString %>" 
                    SelectCommand="SELECT * FROM [location]"></asp:SqlDataSource> 
        </ContentTemplate>
    </asp:UpdatePanel> 
```

后面的代码：

```
protected void comboCountry_OnSelectedIndexChanged(object sender, EventArgs e)
{
    try
    {
        SqlDataSource2.SelectCommand = "SELECT * FROM [location] where [country_id]=" + comboCountry.SelectedValue;            
       // SqlDataSource2.DataBind();
        comboCity.DataBind();
    }
    catch (Exception exception)
    {
        Debug.WriteLine(exception.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:48:57.193

在您的第一个下拉菜单中选择 country_code 的值，然后将第二个下拉参数绑定到第一个下拉菜单。然后将第一个下拉列表的自动回发设置为 true，第二个下拉列表将呈现结果。

# ruby-on-rails-3 - 在尝试发送新密码之前，如何让 Devise 验证用户是否有电子邮件？

> ID：14222194
> 
> 赞同：1
> 
> 时间：2013-01-08T19:03:56.627
> 
> 标签：ruby-on-rails-3, devise, ruby-on-rails-3.2

我有一个 Rails 应用程序，我在其中使用 Devise 进行身份验证。Devise 允许用户单击以获取包含重置密码链接的电子邮件。

我的问题是“用户”表中不需要电子邮件字段。有一个登录字段进行身份验证，它是从另一个系统中提取的。我无法将电子邮件设置为必需。

如果未设置电子邮件，我想验证电子邮件字段并向用户返回自定义消息。如果是，则 Devise 将继续并重置密码。

我在另一篇文章中看到，我必须覆盖方法“email_required？” 在用户模型中，但我仍然收到错误消息“电子邮件不能为空白”。

```
def email_required?
  false
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:18:07.777

在您的用户模型中，您可能应该像这样对电子邮件进行某种验证

```
validates_presence_of :email 
```

此外，如果您想迁移数据库以使电子邮件不为空，那就是这样

```
change_column :users, :email, :string, :null => false 
```

# javascript - 如何验证用户应该输入两个字段中的任何一个

> ID：14222195
> 
> 赞同：0
> 
> 时间：2013-01-08T19:03:57.627
> 
> 标签：javascript, validation

表单html

```
<form action="" method="post" name="add_new_report" id="add_new_report" enctype="multipart/form-data" onsubmit="return AddNewReport(this)">
   <div class="field">
              <div class="field_180">Cheque</div>
              <div class="field_30">:</div>
              <div class="field_220">
                <input type="text" name="cheque" id="cheque" onChange="updatesum()" />
              </div>
              <div class="clear"></div>
            </div>
            <div class="field">
              <div class="field_180">Cash</div>
              <div class="field_30">:</div>
              <div class="field_220">
                <input type="text" name="cash" id="cash" onChange="updatesum()" />
              </div>
              <div class="clear"></div>
            </div>

<div class="field">
              <div class="field_210">&nbsp;</div>
              <div class="field_222">
                <input type="submit" id="Submit" name="Submit" value="Submit"  />
              </div>
              <div class="clear"></div>
            </div>
          </form> 
```

在这种形式中，用户应该输入支票或现金字段怎么可能？我不想两者都是强制性的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:43:22.697

只需将此功能添加到您的标题中：

```
<script>
    function validateForm()
    {
    var x=document.forms["add_new_report"]["cheque"].value;
    var y=document.forms["add_new_report"]["cash"].value;
    if ((x==null || x=="") && (y==null || y==""))
      {
      alert("At least one entry should be filled");
      return false;
      }
     else 
      return true
     }
</script> 
```

并更改以下字段：

```
 onsubmit="if(validateForm()) return AddNewReport(this)" 
```

您还可以在 validateForm 函数中包含 AddNewReport 并且只返回 validate(this) 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:35:11.660

如果您绝对不关心 IE <9，您可以使用以下内容。（否则将在 IE 中无法使用的代码替换为可以使用的代码）

```
function oneShouldHaveData(ids) {
    var elements = [];

    //convert ids to elements (map no IE<9)
    elements = ids.map(function (id) {
        return document.querySelector('#' + id);
    });

    //returns true if any element matches expression (some no IE <9)
    return elements.some(function (element) {
        //could be validation for anything (greater 0 etc.)  
        return !!element.value;
    });
}

//just submit setup :)
document.querySelector('#add_new_report').addEventListener('submit', function () {
    console.log(oneShouldHaveData(['cheque', 'cash']));
}); 
```

[http://jsfiddle.net/LXprX/1/](http://jsfiddle.net/LXprX/1/)

# actionscript-3 - 我可以在 FileStream.openAsync(File...) 之后获取文件吗？

> ID：14222199
> 
> 赞同：0
> 
> 时间：2013-01-08T19:04:10.200
> 
> 标签：actionscript-3, file, filestream

在 的`COMPLETE`事件侦听器中`FileStream.openAsync(file, ...);` `FileStream.read(...)`，我可以获得打开 FileStream 的 File 对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:18:52.927

如果我正确理解您的问题，您想在's事件的事件处理函数中获取正在打开的`File`对象吗？`FileStream``FileStream``COMPLETE`

据我所知，这是不可能的。您可以获取`FileStream`正在打开文件的对象：

```
private function completeHandler(e:Event):void 
{
    var stream:FileStream = e.target as FileStream;
} 
```

但不幸的是，没有办法得到正在打开的`File`对象，`FileStream`甚至没有路径。

最好的办法是扩展相关`File`对象的范围，即在函数之外声明它，以便所有函数都可以访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:59:40.587

我最终对 FileStream 对象进行了子类化，覆盖了 openAsyc() 和 open()，然后将 File 参数保存到公共属性中。

甚至没有不雅，但我想确保我没有忽略一些现有的财产。

干杯

# jquery - 将 html 输出附加到不同的 div

> ID：14222200
> 
> 赞同：0
> 
> 时间：2013-01-08T19:04:14.023
> 
> 标签：jquery, appendto

我有两个 div

```
<div id="ResultsId">
    Here are the results from the session!<br>
</div> 
```

和

```
<div id="DatesSearchResultsId">
    <a href="#" onclick="SearchDateAjax('DatesSearchResultsId');">Click here to search by date</a>
    <form name="dateSearch" action="searchbydate.php" method="post">
    date: <input type="date" name="date"><br>
</form>
</div> 
```

如何使用 AppendTo() 方法将下面代码中的 html 输出附加到 ResultsId Div？我似乎无法让它工作：

```
function SearchDateAjax(DatesSearchResultsId){
    $.ajax({
      type: "POST",
      url: "searchbydate.php",
      cache: false,
      data: "name=Peter&location=Sheffield&date=" + $('input[name="date"]').val(),
      success: function(html, status){
        $("#"+ResultsId).append(html);
        //$('#status').append(status);
      } 
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:06:52.417

看来你打错了什么。试试这个：

```
$("#ResultsId").append(html); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:07:26.007

由于您想要的 div 的 ID 是“ResultsId”，因此您可以使用`$('#ResultsID')`. 您当前拥有`$("#"+ResultsID)`，它将变量的值添加`ResultsID`到“#”。

# javascript - 旋转图像，然后使用 js 按钮进行翻译

> ID：14222201
> 
> 赞同：0
> 
> 时间：2013-01-08T19:04:14.663
> 
> 标签：javascript, css

旋转图片并翻译它可以工作，除了我想要翻译旋转的图像。当按下 MoveUp 按钮时，它会向上移动未旋转的原始图像。

```
var _pic = document.getElementById("picture");
var _rotation = 0;
var _MoveUp = 0;

function RotateLeft(){
_rotation+= 5;
_pic.style.webkitTransform= "rotate(" + _rotation + "deg)";
_pic.style.Moz-transform="rotate(" + _rotation + "deg)";
_pic.style.ms-transform="rotate(" + _rotation + "deg)";
_pic.style.transform="rotate(" + _rotation + "deg)";
}

function RotateRight(){
_rotation-= 5;
_pic.style.webkitTransform= "rotate(" + _rotation + "deg)";
_pic.style.Moz-transform="rotate(" + _rotation + "deg)";
_pic.style.ms-transform="rotate(" + _rotation + "deg)";
_pic.style.transform="rotate(" + _rotation + "deg)";
}

function MoveUp(){
_MoveUp-= 5;
_pic.style.webkitTransform("t100,100r45t-100,0");
//"translateY(" + "T" + _MoveUp + "px)";
_pic.style.Moz-transform="translateY(" + _MoveUp + "px)";
_pic.style.ms-transform="translateY(" + _MoveUp + "px)";
_pic.style.transform="translateY(" + _MoveUp + "px)";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:20:29.743

您的`MoveUp()`函数会覆盖旋转变换。要将多个转换链接在一起，您应该这样做（仅为`style.transform`简洁起见）：

```
_pic.style.transform="translateY(" + _MoveUp + "px) rotate(" + _rotation + "deg)"; 
```

因此，基本上您将所有转换连接成一个字符串并将其设置为`style.transform`.

# facebook-graph-api - 使用 Facebook Graph API 的 FQL 查询

> ID：14222202
> 
> 赞同：2
> 
> 时间：2013-01-08T19:04:16.223
> 
> 标签：facebook-graph-api, facebook-fql

我有这个查询：

```
SELECT uid, name, current_location FROM user WHERE uid IN ( SELECT uid2 FROM friend WHERE uid1 = me() ) AND current_location.id IN (Select current_location.id from user where uid = me() ) 
```

它会根据需要为我提供结果，即仅具有特定位置的朋友。我可以使用 Graph API 获得相同的结果吗？假设我有位置 ID。我在图形 API 中试过这个：

```
me/friends?location.id='111501225536407'&fields=location 
```

使用图形 API 是否可以进行 ^ 排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:54:16.610

不是我能看到的。Graph API 最适合获取对象的所有或最新项目。如果您想按位置过滤这些朋友，则需要在客户端执行此操作。

如果您希望 Facebook 在他们的服务器上预先过滤您的结果，您需要使用 FQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:03:32.170

您可以通过图形 api 执行 fql 查询（包括多查询），如下所示：

[https://graph.facebook.com/fql?q={"albums":"select aid, name,cover_pid FROM album where owner=me()","album_covers":"select src from photo where pid in (select cover_pid 来自 %23albums)"}&access_token=xxxxxx](https://graph.facebook.com/fql?q=%7B%22albums%22%3a%22select%20aid,%20name,cover_pid%20FROM%20album%20where%20owner=me%28%29%22,%22album_covers%22%3a%22select%20src%20from%20photo%20where%20pid%20in%20%28select%20cover_pid%20from%20%23albums%29%22%7D&access_token=xxxxxx)

url 编码有点棘手。确保多查询中使用的“#”符号编码为 %23

# javascript - Jquery Data 表可以读取不同格式的 json 吗？

> ID：14222204
> 
> 赞同：0
> 
> 时间：2013-01-08T19:04:23.820
> 
> 标签：javascript, jquery, json, datatables

我正在为网格使用 jQuery dataTables ( [http://www.datatables.net/](http://www.datatables.net/) )。

但是，我的 json 格式与 dataTables 文档中包含的 json 示例不同。dataTables 是否可以解释我们 json 中的格式？

他们的json看起来像这样

```
 {"aaData": [
 [
  "Trident",
  "Internet Explorer 4.0",
  "Win 95+",
  "4",
  "X"
  ],
 [
  "Trident",
  "Internet Explorer 5.0",
  "Win 95+",
  "5",
  "C"
 ]  
 ]  
 } 
```

我的 JSON 看起来像这样，不幸的是我无法将它更改为看起来像他们文档中包含的示例。

```
"allconfig": {
    "card.inserted": {
        "value": "Not Inserted",
        "type": "enum",
        "range": "",
        "clone": false,
        "archive": false,
        "access": "R"
    },
    "card.cisproc": {
        "value": "Processed",
        "type": "string",
        "range": "",
        "clone": false,
        "archive": false,
        "access": "R"
    }
    }
    } 
```

这是我的 jQuery

```
 $(document).ready(function() {
  $('#example').dataTable( {
    "bProcessing": true,
    "sAjaxSource": 'json/test.json'
  });
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:26:08.113

您可以将 json 格式更改为所需的格式。

采用

```
 $.getJSON('json/test.json', function(data) {
  var newJson = [];
    var myJson = data ;
    $.each(myJson.allconfig, function (key, value) {
        var rowArray = [];
        rowArray.push(key);
        $.each(myJson.allconfig[key], function (key1, value1) {
            rowArray.push(value1);
        });
        newJson.push(rowArray);
    });
  $('#example').dataTable( { "bProcessing": true, "aaData":newJson  });
}); 
```

检查[http://jsfiddle.net/JASdL/](http://jsfiddle.net/JASdL/)

# c# - 添加到多对多集合而不查询主要实体

> ID：14222208
> 
> 赞同：0
> 
> 时间：2013-01-08T19:04:46.397
> 
> 标签：c#, .net, sql-server, visual-studio, entity-framework

我有一个批处理，我需要在现有实体之间添加新关系，实体有大数据，我无法获取实体并添加它们，我试过这个：

```
 for .........
                Class Class = new Class() { ClassID = myClassId };
                context.AddToClasses(Class);
                Student std = new Student() { Id = myStdId };
                context.AddToStudents(std);
                context.ObjectStateManager.ChangeObjectState(Class, System.Data.EntityState.Unchanged);
                context.ObjectStateManager.ChangeObjectState(std, System.Data.EntityState.Unchanged);
                Class.ClassStudents.Add(std);

  ............. 
```

第一个电话会成功，但第二个电话会给我这个例外：

> AcceptChanges 无法继续，因为对象的键值与 ObjectStateManager 中的另一个对象冲突。在调用 AcceptChanges 之前确保键值是唯一的。

试过：

```
 for .........
                Class Class = new Class() { ClassID = myClassId };
                context.Attach(Class);
                Student std = new Student() { Id = myStdId };
                context.Attach(std);
                context.ObjectStateManager.ChangeObjectState(Class, System.Data.EntityState.Unchanged);
                context.ObjectStateManager.ChangeObjectState(std, System.Data.EntityState.Unchanged);
                Class.ClassStudents.Add(std);

  ............. 
```

例外：

> 具有空 EntityKey 值的对象不能附加到对象上下文。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:26:47.577

如果`myClassId`and对`myStdId`可以重复并且在循环中没有特定顺序，您正在运行此代码，我将使用两个字典来保存已创建和附加的实体，以避免您创建和附加具有相同键的实体时间，像这样：

```
var classDict = new Dictionary<int, Class>();
var studentDict = new Dictionary<int, Student>();

// for ... loop starts here

Class Class;
if (!classDict.TryGetValue(myClassId, out Class))
{
    Class Class = new Class() { ClassID = myClassId };
    context.Classes.Attach(Class);
    classDict.Add(myClassId, Class);
}

Student std;
if (!studentDict.TryGetValue(myStdId, out std))
{
    Student std = new Student() { Id = myStdId };
    context.Students.Attach(std);
    classDict.Add(myStdId, std);
}

Class.ClassStudents.Add(std);

// loop ends here

context.SaveChanges(); 
```

# php - 将用户从我的 Phonegap 应用程序注册到我的数据库的最安全方法是什么

> ID：14222210
> 
> 赞同：1
> 
> 时间：2013-01-08T19:05:04.597
> 
> 标签：php, mysql, cordova

我正在编写一个 phonegap 应用程序，我想发送 ajax 请求并使用一些参数注册用户，例如：`full name`、、、。`email``password`

构建我的 PHP 脚本以防止其他用户用注册请求淹没我的数据库的最安全方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:30:31.577

有一些标准方法：

*   验证码
*   在表单中添加隐藏或不可见的字段，如果其中有任何数据，则不允许注册。Hidden 只会捕获愚蠢的机器人，因为它们通常可以分辨出它就是这样，但是如果你使用 CSS 和/或 Javascript 来做它，invisible 会更棘手。这个主题的变化也很好，例如有一个带有时间戳的字段，然后将它与现在进行比较（并否认它是否太旧/来自未来），或者以某种方式使用魔法值。
*   向他们发送电子邮件，如果退回，则不允许注册。
*   通过 . 检查推荐 URL `$_SERVER['HTTP_REFERER']`。如果您的注册页面不在您的主页上，请将其设置为必须来自您网站上的某个位置。
*   使用非字典词作为元素标签。尽管这会使调试更加痛苦，但它可以防止机器人猜测在现场有效的数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:16:54.640

其中一种方法是将 SECRET_KEY 嵌入到您的 Java 文件中，并在您使用注册表单进行 ajax 调用之前通过插件访问它。发送 SECRET_KEY 以及用户注册信息，以验证呼叫仅来自您的应用。忽略任何不包含 SECRET_KEY 的内容。

在 Java 文件中嵌入 SECRET_KEY 是一个建议，因为 .apk 文件可以很容易地“解压缩”以查看源代码（/www 文件夹）而不是 Java 文件。

“负载平衡”来处理对服务器 api 的大量请求将是一个不错的选择。如果您正在运行 IIS，应该有一些模块可以插入以有效利用传入的请求。

# c# - 是否可以通过另一个程序中的功能在一个应用程序中触发键盘事件？

> ID：14222211
> 
> 赞同：0
> 
> 时间：2013-01-08T19:05:07.427
> 
> 标签：c#, api

假设我有一个程序（假设它是 GIMP）。我想创建一个在后台运行的应用程序。我希望它什么也不做，而是“模仿”用户在 10 秒内按下 fe 键一次，并且我希望第二个程序（fe GIMP）对这个动作做出反应，就好像它真的是用户一样。

换句话说，我猜我的程序只会触发一些类似 API 的函数，这会诱使外部应用程序假设用户按了 fe Ctrl+S，然后应用程序会通过保存当前文件来做出反应。

在 C# 中甚至可能吗？我很确定很久以前我在 C# 中遇到过这种代码。

我只是在询问一些方向，因为到目前为止我还没有在 C# 中遇到过类似的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:07:23.627

有一个名为 SendKeys 的 API 应该可以解决问题

[http://www.codeproject.com/Articles/18366/Sending-Keystrokes-to-another-Application-in-C](http://www.codeproject.com/Articles/18366/Sending-Keystrokes-to-another-Application-in-C)

# ruby-on-rails - rails：如何修复或删除具有错误类型遗留数据的序列化字段列

> ID：14222213
> 
> 赞同：0
> 
> 时间：2013-01-08T19:05:17.093
> 
> 标签：ruby-on-rails, serialization

我们的应用程序有一个文本字段：schedule。

最初，我们将数据存储为字符串。

我们将模型更改为`serialize :schedule, Hash`

为了修复遗留数据，我们只想用 nil 替换旧的（字符串）数据。

但是，一旦我们添加了序列化，尝试向字段（如果它有字符串）写入任何内容（nil 或替换哈希）都会引发异常：

```
ActiveRecord::SerializationTypeMismatch: schedule was supposed to be a Hash, but was a String 
```

有没有办法覆盖序列化异常并强制该字段为零或替换哈希？

也许有一种方法可以通过 SQL 更新字段来绕过序列化？

（我知道我们可以使用迁移来删除列然后重新添加它，但我正在寻找一种在 rake 任务中执行此操作的方法。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:29:01.083

看看[`update_column`](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_column)快速更新数据库中的所有记录。`UPDATE table SET schedule = NULL`这将在不考虑任何验证或回调的情况下向您的数据库发送一个简单的。当然，您会丢失此列中的所有数据，但据我了解您的描述，这不是问题，对吧？

# tomcat - Tomcat 7 tomcat-users manager-script example for /deploy

> ID：14222215
> 
> 赞同：8
> 
> 时间：2013-01-08T19:05:21.043
> 
> 标签：tomcat, tomcat7

I'm trying to get manager/deploy working on my new installation of Tomcat 7.0.34, but I keep getting a 403 when I try to deploy by doing a PUT on `http://localhost:8080/manager/deploy`. I've yet to get this working in Tomcat 7.

**conf/server.xml**

```
<?xml version='1.0' encoding='utf-8'?>
<Server>
...
  <GlobalNamingResources>
    <Resource name="UserDatabase" auth="Container"
          type="org.apache.catalina.UserDatabase"
          description="User database that can be updated and saved"
          factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
          pathname="conf/tomcat-users.xml" />
  </GlobalNamingResources>
  <Service>
  ...
    <Engine>
    ...
      <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
           resourceName="UserDatabase"/>
    </Engine>
  </Service>
</Server> 
```

**conf/tomcat-users.xml**

```
<?xml version='1.0' encoding='utf-8'?>
<tomcat-users>
    <user username="tomcat" password="redacted" roles="manager-script"/>
</tomcat-users> 
```

I've also tried (with the same result)

**conf/tomcat-users.xml**

```
<?xml version='1.0' encoding='utf-8'?>
<tomcat-users>
    <role rolename="manager-script"/>
    <user username="tomcat" password="redacted" roles="manager-script"/>
</tomcat-users> 
```

And yes, I've double, triple, quadruple checked that I'm using the correct username and password, as defined in the tomcat-users.xml. I thought this was all I needed. Any ideas?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T22:12:00.990

所以，我终于想通了！

首先，上面的所有设置都是正确的（上面的tomcat-users的任何一个版本都是正确的，但我认为第一个*更*正确。

最初可能不清楚，但我是从 Tomcat 6 迁移的。我缺少的是我要放入的 URL。它应该是： `http://localhost:8080/manager/**text**/deploy`

现在一切都很好。我希望这对将来的人有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-29T10:46:11.113

1st one is the best solution. I faced this problem and solved by adding following lines in tomcat-users.xml file.

```
<?xml version='1.0' encoding='utf-8'?>
<tomcat-users>
    <user username="tomcat" password="redacted" roles="manager-script"/>
</tomcat-users> 
```

# forms - AJAX submit function optimization

> ID：14222216
> 
> 赞同：0
> 
> 时间：2013-01-08T19:05:22.387
> 
> 标签：forms, jquery

I have a form on my site. A series of functions validate each form field on the form `#contactForm`

I have the following submit function which, if all the fields are valid, sends an ajax request to `contact-us.php` and then shows a success message. The function works, but I'm wondering if this is the ideal way to have this coded (especially with the two (2) `return false` statements).

Here's part of my code:

```
$('#contactForm').submit(function(e){ 
    if(validateContactFirstName() && validateContactLastName() && validateContactEmail() && validateContactPhone() && validateContactMessage()) {
                e.preventDefault();
                $('#contactSubmit').button('loading');
                $('#contactSubmit').attr('disabled', 'disabled');
                $.ajax({
                            type    : 'POST',
                            url     : $(this).attr('action'),
                            data    : $(this).serialize(),
                            success : function(data) {
                                            $('.hideOnSuccess').hide();
                                            $('div.contactSuccess').html('<div class="hero-unit"><h1><i class="icon-envelope-alt successIcon"></i> Thanks!</h1><p>An email confirming the details of your message has been sent to your email address. We will respond within one business day. </p></div>');                         
                                            $('html,body').animate({
                                                    scrollTop: 0
                                            }, 800);
                            }
                });
                return false;
        } else {
                return false;
        }
}); 
```

Which `return false` statements can I remove? Or should I take out the `preventDefault` ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:21:40.623

您可以使用[jQuery Form 插件](http://malsup.com/jquery/form/)重写它并仅提供回调。

`return false`您可以在函数末尾只保留一个并删除其他。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:22:09.100

我个人更喜欢使用 $.post ，它是您正在使用的简写。

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

此外，请务必防止您的表单提交默认 - 看起来像这样

```
$('#contactForm').submit(function(e){
    e.preventDefault();
    if(validateContactFirstName() && validateContactLastName() && validateContactEmail() && validateContactPhone() && validateContactMessage()) {
                $('#contactSubmit').button('loading');
                $('#contactSubmit').attr('disabled', 'disabled');
                $.ajax({
                            type    : 'POST',
                            url     : $(this).attr('action'),
                            data    : $(this).serialize(),
                            success : function(data) {
                                            $('.hideOnSuccess').hide();
                                            $('div.contactSuccess').html('<div class="hero-unit"><h1><i class="icon-envelope-alt successIcon"></i> Thanks!</h1><p>An email confirming the details of your message has been sent to your email address. We will respond within one business day. </p></div>');                         
                                            $('html,body').animate({
                                                    scrollTop: 0
                                            }, 800);
                            }
                });
     return false;
}); 
```

# java - 使用android访问本地网络文件

> ID：14222219
> 
> 赞同：1
> 
> 时间：2013-01-08T19:05:58.737
> 
> 标签：java, android, file, networking, nas

我想通过 Android 应用程序访问我的 LAN（在 NAS 或 PC 上）上的文件，就像我可以在 Windows 上通过在资源管理器中键入 \pcname\ 一样。我知道这在 Android 上是可能的，因为还有其他应用程序可以做到这一点（例如[https://play.google.com/store/apps/details?id=com.rhmsoft.fm](https://play.google.com/store/apps/details?id=com.rhmsoft.fm)）。

我已经尝试将文件作为本地文件访问（新文件（“\\pcname”））。不用说这没有用。我在网上搜索教程，但我找到的每个教程都是使用 ftp、http 等的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:12:47.120

使用 java.net.URL，您可以使用 ftp url，例如`ftp://servername/path/to/file`. 访问windows共享需要使用SMB协议（有类似问题：[How to access share folder in windows in windows through android and read files](https://stackoverflow.com/questions/9389366/how-to-access-share-folder-in-windows-through-android-and-read-files)）

# javascript - How to Select / Highlight text box content on first click only

> ID：14222225
> 
> 赞同：-1
> 
> 时间：2013-01-08T19:06:12.167
> 
> 标签：javascript, jquery, scripting

Please does anyone know the script that can help me highligh the content of a textfield on the first click

on the second click the selection / highligh should be cleared from the text box leavingg the insertion point.

Thank You in ADvance..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:18:08.377

该脚本在第一次单击时选择文本，但在每次连续单击后，textarea 的行为就像 textarea 一样。当文本区域由于模糊事件而失去焦点并再次单击它时，文本将再次被选中。

[JsFiddle 上的现场演示](http://jsfiddle.net/Lzhc7/)

```
(function () {
    var area = document.querySelector('#txt'),
        clicked = false;

    area.addEventListener('click', function () {
        if (!clicked) {
            area.select();
            clicked = true;
        }
    });

    area.addEventListener('blur', function () {
        clicked = false;
    });    
})() 
```

由于[addEventListener](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)和[querySelector](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)示例不完全跨浏览器兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:15:14.933

```
 function SelectText(sender) {
        document.getElementById(sender.id).focus();
        document.getElementById(sender.id).select();
    } 
```

```
<input type="text" id="tbTest" value="Test" onclick="SelectText(this)" />
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T19:15:25.657

试试这个：http: [//jsfiddle.net/4Hkhx/1/](http://jsfiddle.net/4Hkhx/1/)

```
$(document).ready(function(){
  $('input').click(function(){
    $(this).select();
  });
}); 
```

# javascript - How to assign array variable to select box dropdown options?

> ID：14222232
> 
> 赞同：0
> 
> 时间：2013-01-08T19:06:40.140
> 
> 标签：javascript, drop-down-menu, html-select

I have a form which is largely populated by checkboxes. The checkboxes each have an ID "value" that corresponds to an item within a javascript array. The array items hold some text that will populate a textarea.

I would like to include some dropdown boxes to clean up the site; however, I cannot seem to assign an array ID to the dropdown options? Can this be done in a selectbox option? Is there a workaround to simulate a selectbox without using the tab?

My html is basically:

```
 <div>
    <input type=checkbox id=array1 name=textArray></input>
    <input type=checkbox id=array1 name=textArray></input>
    <input type=checkbox id=array1 name=textArray></input>
    ...
    <select><option 1><option 2>...</select>
    </div>
    <div>
    <form>
    <textarea id=outPut></textarea>
    </form>
    </div> 
```

And my js is:

```
var textArray = {

array1: 'some text here',
array2: 'some more text',
array3: 'some other text',
...
array90: 'the last text'

};

// variable assigned to chosen item
var selectedInputs = document.getElementsByName("textArray");
for (var i = 0; i < selectedInputs.length; i++) {
    selectedInputs[i].onchange = function() {
        chosenItem = this;
        printText();        
    };
}
// Script to add items to the Comments section text area
var mytextbox = document.getElementById('outPut');
var chosenItem = null;

function printText(){
    if(chosenItem !== null){
       mytextbox.value += textArray[chosenItem.id] + "";
        // resets the radio box values after output is displayed
        chosenItem.checked = false;
        // resets these variables to the null state
        chosenItem = null;
    }
} 
```

How can I associate an item in my js array with one of the selectbox choices?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:25:49.390

我发现很难理解你在问什么，但[我把它放在一起](http://jsfiddle.net/UUnm6/)，希望它会有所帮助。

重要的是

```
var selectNode = document.getElementById('select'); // <select id="select">
selectNode.onchange = function () {
  if (selectNode.selectedIndex !== 0) {
    chosenItem = selectNode.options[selectNode.selectedIndex];
    selectNode.selectedIndex = 0;
    printText();
  }
} 
```

并且不要将*id*属性用于您正在做的事情（我使用了*data-i*）。

* * *

我还想说，如果您正在清理代码，这将是重新考虑如何在函数之间传递变量的好时机；在全局命名空间中设置一个值并在下一次调用中依赖它只是自找麻烦（竞争条件、与其他代码位冲突等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:10:53.983

`<option value="whatever">1</option>`这从一开始就是 HTML 的一部分。

# php - 如何对使用 ajax 添加的表进行排序

> ID：14222234
> 
> 赞同：1
> 
> 时间：2013-01-08T19:06:43.063
> 
> 标签：php, jquery, ajax, sorting

我通过ajax调用动态地向页面添加一个表，该表被分页并再次使用ajax调用进行分页。但是当我尝试使用 jQuery 插件对表格进行排序时，它不起作用。

```
<script>
var targetURL = 'http://localhost/includes/qrmanager.php?start=' + pageno;   

    $('#qrmanager').html('<p><img src="images/ajax-loader.gif" /></p>');        
    $('#qrmanager').load( targetURL ).hide().fadeIn('slow'); //this loads the table within the div

 $("table").tablesort( );
</script> 
```

我有一个插件`tablesort()`，如果我只是通过 php 回显表格而不使用 ajax，它就可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:08:48.720

您正试图在 AJAX 有机会加载表格之前对其进行排序。

改为使用该[`.load`](http://api.jquery.com/load)方法的成功回调：

```
var targetURL = 'http://localhost/includes/qrmanager.php?start=' + pageno;   
$('#qrmanager').html('<p><img src="images/ajax-loader.gif" /></p>');
$('#qrmanager').load( targetURL, function() {
    $(this).hide().fadeIn('slow'); 
    $("table").tablesort( );
}); 
```

# hadoop - How to run MRUnit?

> ID：14222236
> 
> 赞同：0
> 
> 时间：2013-01-08T19:06:49.580
> 
> 标签：hadoop, junit, mapreduce

I've written an MRUnit to test my mapper. However, I don't know how to run it in Eclipse as it reads some data from distributedCache. When I run it as a normal class in Eclipse it give me a bunch of errors. These are the error messages I get:

```
java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at org.apache.hadoop.mrunit.TestDriver.<clinit>(TestDriver.java:38)
    at MapperCombinerReducerTester.setUp(MapperCombinerReducerTester.java:16)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:07:51.897

您的错误与不在类路径上的依赖库（commons-logging）有关。您是在使用 Maven（与 m2e 结合）来管理您的项目依赖项，还是在 Eclipse 中使用直接的 Java 项目？

使用 MRUnit 测试依赖于分布式缓存的映射器/减速器也很棘手，因为 0.9.0 不支持模拟分布式缓存（如果您查看[JIRA 票证](https://issues.apache.org/jira/issues/?jql=project%20=%20MRUNIT%20AND%20text%20~%20%22Distributed%20Cache%22)，则在 1.0.0 中提供）。我之前这样做的一种方法是假设使用符号链接本地缓存文件，并在我的单元测试设置中将文件复制到本地目录（混乱但它有效）。

# ios - 在 iOS 上使用 NSDictionary 字符串中的占位符

> ID：14222239
> 
> 赞同：0
> 
> 时间：2013-01-08T19:06:58.237
> 
> 标签：ios, nsstring, nsdictionary, placeholder

我正在尝试为 Facebook 发帖制作字典，并试图弄清楚如何在我的字符串中使用占位符。我目前有：

```
NSDictionary *parameters = @{@"message" : @"I'm reading today.", @"caption": (@"I'm on %@", _entry.date), @"link": _entry.articleUrl}; 
```

_entry.date 是一个字符串，显示用户在哪一天阅读，_entry.articleUrl 是一个字符串，表示用户正在阅读的页面。我的问题是获取正确的格式，以便用于标题的字符串可以包含文本和字符串的占位符。现在它告诉我表达式结果未使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:13:09.507

试试这个字符串 api 来构建你的字符串：

```
NSDictionary *parameters = @{@"message" : @"I'm reading today.", @"caption": [NSString stringWithFormat:@"I'm on %@", _entry.date], @"link": _entry.articleUrl}; 
```

# php - 使用动态命名循环多个 POST 变量

> ID：14222248
> 
> 赞同：2
> 
> 时间：2013-01-08T19:07:30.160
> 
> 标签：php, for-loop, environment-variables

我希望这对标题和我想要实现的目标有意义，所以这里......

我有一个显示 1 到 30 个要输入的字段的表单 - 字段的数量由用户在前一阶段确定（它并不总是相同的数量）。

如果用户有 5 个字段要填写，则它们都必须包含数据 - 如果他们设置 15 个字段或 30 个字段，则相同。

我想要做的是遍历表单中的 POST 变量，确保它们都已设置好，然后将数据插入数据库，或者显示错误。

我打算用嵌套的 if 语句做 30 个 if 语句：

```
if ($numberOfFields == 1){
    if (!$_POST["field1_text"]){$error = 1;}
};

if ($numberOfFields == 2){
    if (!$_POST["field1_text"]){$error = 1;}
    if (!$_POST["field2_text"]){$error = 1;}
}; 
```

但这似乎是一个非常冗长的方式，我想知道是否有人有任何建议或指示。

我想知道这样的事情是否可行：

```
for ($q = 1; $q <= $numberOfFields; $q ++){
    if (!$_POST["field'".$q."'_text"]){
        $error = 1;
    }   
} 
```

但是我在使用 $q 引用变量/字段名称时遇到错误。这应该是 [$q] 还是其他？

我正在努力寻找任何答案，但可能没有提出正确的问题，但我们将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:12:04.423

可以这样做，使用 a`foreach`而不是 a `for`：

```
if($_SERVER['REQUEST_METHOD'] == 'POST')
{
    $error = false;
    foreach($_POST as $key => $value)
    {
        if(strpos($key, 'field') === 0)
        {
            if($value == '')
            {
                $error = true;
                break;
            }
        }
    }

    if($error)
    {
        // not all fields have a value - show message
    }
} 
```

* * *

如果您在表单上使用输入数组，而不是手动使用连接的数字填充输入名称，这会容易得多。例子：

```
<input type="text" name="field[]" />
<input type="text" name="field[]" />
<input type="text" name="field[]" /> 
```

在 PHP 端，只需循环它们：

```
foreach($_POST['field'] as $field)
{
    if($field == '')
    {
        // error - doesn't have a value
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T19:10:08.050

用这个：

```
for ($q = 1; $q <= $numberOfFields; $q++){
    if (!$_POST["field".$q."_text"]){
        $error = 1;
    }   
} 
```

在您自己的代码中，您有奇怪的额外 '

# shell - UNIX shell 脚本中的浮点运算

> ID：14222250
> 
> 赞同：14
> 
> 时间：2013-01-08T19:07:41.933
> 
> 标签：shell, unix, math, floating-point

如何在 shell 脚本中对浮点数（例如**1.503923 ）进行算术运算？**浮点数作为字符串从文件中提取。文件格式如下：

```
1.5493482,3.49384,33.284732,23.043852,2.2384...
3.384,3.282342,23.043852,2.23284,8.39283...
.
.
. 
```

这是我需要开始工作的一些简化示例代码。一切正常，直到算术。我从文件中拉出一行，然后从该行中拉出多个值。我认为这会减少搜索处理时间，因为这些文件很大。

```
# set vars, loops etc.

while [ $line_no -gt 0 ]
do
    line_string=`sed -n $line_no'p' $file_path`  # Pull Line (str) from a file
    string1=${line_string:9:6}                   # Pull value from the Line
    string2=${line_string:16:6}
    string3=...
    .
    .
    .
    calc1= `expr $string2 - $string7` |bc -l     # I tried these and various
    calc2= ` "$string3" * "$string2" ` |bc -l    # other combinations
    calc3= `expr $string2 - $string1`
    calc4= "$string2 + $string8" |bc
    .
    .
    .
    generic_function_call                        # Use the variables in functions
    line_no=`expr $line_no - 1`                  # Counter--
done 
```

我不断得到的输出：

```
expr: non-numeric argument
command not found 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-08T19:13:49.467

我相信你应该使用：`bc`

例如：

```
echo "scale = 10; 123.456789/345.345345" | bc 
```

（这是 unix 的方式：每个工具都专注于做好他们应该做的事情，并且他们都一起工作来做伟大的事情。不要与另一个模仿伟大的工具，让他们一起工作。）

输出：

```
.3574879198 
```

或使用比例`1`代替`10`：

```
echo "scale = 1; 123.456789/345.345345" | bc 
```

输出：

```
.3 
```

请注意，这不会执行舍入。

如果您需要执行更复杂的操作，我强烈建议您切换到 awk，或者使用 perl 来处理最复杂的操作。

例如：您使用 awk 完成的操作：

```
# create the test file:
printf '1.5493482,3.49384,33.284732,23.043852,2.2384,12.1,13.4,...\n' > somefile
printf '3.384,3.282342,23.043852,2.23284,8.39283,14.1,15.2,...\n'    >> somefile

# do OP's calculations (and DEBUG print them out!)

awk -F',' '
   # put no single quote in here... even in comments! you can instead print a: \047 
   # the -F tell awk to use "," as a separator. Thus awk will automatically split lines for us using it. 
   # $1=before first ","  $2=between 1st and 2nd ","  ... etc.
    function some_awk_function_here_if_you_want() {  # optionnal function definition
         # some actions here. you can even have arguments to the function, etc.
         print "DEBUG: no action defined in some_awk_function_here_if_you_want yet ..."
    }

    BEGIN      {  rem="Optionnal START section. here you can put initialisations, that happens before the FIRST file-s FIRST line is read"
    }

    (NF>=8)    {  rem="for each line with at least 8 values separated by commas (and only for lines meeting that condition)"
                  calc1=($2 - $7)
                  calc2=($3 * $2)
                  calc3=($2 - $1)
                  calc4=($2 + $8)
                  # uncomment to call this function :(ex1): #  some_awk_function_here_if_you_want
                  # uncomment to call this script:(ex2): # cmd="/path/to/some/script.sh \"" calc1 "\" \"" calc2 "\" ..." ; rem="continued next line"
                  # uncomment to call this script:(ex2): # system(cmd); close(cmd) 
                  line_no=(FNR-1) # ? why -1? .  FNR=line number in the CURRENT file.   NR=line number since the beginning (NR>FNR after the first file ...)
                  print "DEBUG: calc1=" calc1 " , calc2=" calc2 " , calc3=" calc3 " , calc4=" calc4 " , line_no=" line_no
                  print "DEBUG fancier_exemples: see man printf for lots of info on formatting (%...f for floats, %...d for integer, %...s for strings, etc)"
                  printf("DEBUG: calc1=%d , calc2=%10.2f , calc3=%s , calc4=%d , line_no=%d\n",calc1, calc2, calc3, calc4, line_no)
    }

    END        {  rem="Optionnal END section. here you can put things that need to happen AFTER the LAST file-s LAST line is read"
    }

'  somefile # end of the awk script, and the list of file(s) to be read by it. 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-08T19:14:14.880

那这个呢？

```
calc=$(echo "$String2 + $String8"|bc) 
```

这将`bc`添加 $String2 和 $String8 的值并将结果保存在变量中`calc`。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-03-03T09:36:49.010

如果您没有“bc”，则可以使用 'awk' ：

```
calc=$(echo 2.3 4.6 | awk '{ printf "%f", $1 + $2 }') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-09T22:26:48.683

bc 中的比例是精确度，因此如果您键入 bc <<< 'scale=4;22.0/7' ，则比例为 4，您将得到 3.1428 作为答案。如果你使用 8 的比例，你会得到 3.14285714，它是浮点数之后的 8 个数字。所以规模是一个精确的因素

# iis - Team Foundation 2010 Web 访问适用于本地机器，但不适用于外部 IP

> ID：14222253
> 
> 赞同：0
> 
> 时间：2013-01-08T19:07:56.893
> 
> 标签：iis

我使用标准安装和默认设置安装了 Team Foundation Server 2010。我没有 AD 服务，这是工作组中的家用机器。我已经转发了端口等。

尝试使用 Web 访问时，我可以使用 localhost:8080/tfs/web 或 machine-name:8080/tfs/web 进行正常连接。两者都要求我输入用户名和密码，我输入我的本地管理员凭据，它会连接并按预期为我提供 TFS Web 界面。

尝试使用 myAddress.external.org:8080/tfs/web 就像其他选项一样要求我输入用户名和密码，但不接受任何凭据，并且在几次尝试失败后给出 401：未授权。

我一直在环顾四周，我怀疑这是 IIS 的配置问题，但我似乎无法让它工作。在 stackoverflow 上看到了类似的问题，但他的问题不是使用管理员帐户。我正在尝试使用机器上唯一的管理员帐户登录，并且与安装 TFS 的帐户相同。有人建议在 IIS 控制台中添加对 myAddress.external.org:8080 的绑定，但这似乎没有任何作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:45:46.430

好的，找到问题所在了。事实证明，当尝试使用解析为 localhost 的外部名称时，会启动一个安全功能。这与 TFS 无关，任何托管在 IIS 中的网站都是如此。问题和解决方案在此处详细说明：

[http://support.microsoft.com/kb/896861](http://support.microsoft.com/kb/896861)

我最终按照文章中的建议禁用了环回检查：

```
Click Start, click Run, type regedit, and then click OK.
In Registry Editor, locate and then click the following registry key:
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa
Right-click Lsa, point to New, and then click DWORD Value.
Type DisableLoopbackCheck, and then press ENTER.
Right-click DisableLoopbackCheck, and then click Modify.
In the Value data box, type 1, and then click OK.
Quit Registry Editor, and then restart your computer. 
```

# php - ibase_connect：本地计算机主机，无法确定工作路径

> ID：14222256
> 
> 赞同：5
> 
> 时间：2013-01-08T19:08:05.340
> 
> 标签：php, path, firebird

我可能很笨。还不确定。

尝试做一些应该很简单的事情：

```
$database = '10.10.10.81:?????';
$username = 'admin';
$password = 'pw';

$conn = ibase_connect($database, $username, $password);
if (!$conn)
{
    echo "Error while connecting: ".ibase_errmsg();
    exit();
}

echo 'workan'; 
```

我们遇到了错误：连接被远程接口拒绝。从另一个问题here我读到这来自各种事情：可能是用户/密码问题，可能是主机（$database）问题，还有我忘记的其他问题。

我相信我的主机字符串非常错误，无法弄清楚我应该如何处理这个问题。也许我的 google-fu 达不到标准。

尝试访问 10.10.10.81 上的 E:\fishbowl\database\data\base.fdb，这是一台单独的本地计算机

尝试了一堆组合，但似乎无法使任何工作。

编辑：请注意，这是一个火鸟数据库。不确定这是否会改变事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:32:09.197

对于 Windows，它应该如下所示：

`localhost/10095:C:/Data/SKLADFD.FDB`.

查看如何指定端口（在本例中为 10095）。

在你的情况下：

`10.10.10.81/3050:E:/fishbowl/database/data/base.fdb`

文件的路径必须是服务器上的本地文件，而不是连接机器上的 Windows 共享。

# ajax - jsf selectOneMenu 奇怪的 itemValue

> ID：14222266
> 
> 赞同：1
> 
> 时间：2013-01-08T19:08:44.317
> 
> 标签：ajax, jakarta-ee, web-applications, jsf-2, selectonemenu

在我的应用程序中，我有 selectOneMenu 来选择月份。

```
 <h:selectOneMenu value="#{register.monthOfBirth}">
                        <f:selectItems value="#{register.dateValues.monthsList}" var="month" itemLabel="#{month.valueLabel}" itemValue="#{month.valueValue}"/>
                        <f:ajax listener="#{register.monthChanged}" render="messages" />
                    </h:selectOneMenu> 
```

这是我用来填充 selectOneMenu 的 DateValues 类：

```
 public class DateValues {

    public static class Values{
    public String valueLabel;
    public String valueValue;

    public Values(String valueLabel, String valueValue){
        this.valueLabel = valueValue;
        this.valueLabel = valueValue;
    }

    public String getValueLabel(){
        return valueLabel;
    }

    public String getValueValue(){
        return valueValue;
    }

}

    public Values[] daysList;
    public Values[] monthsList;
    public Values[] yearsList;

    public DateValues(){
            daysList = new Values[31];
            for(int i=0;i<31;i++){
                daysList[i] = new Values(""+ (i+1),""+(i+1));
            }
            monthsList = new Values[12];
            for(int i=0;i<12;i++){
                monthsList[i] = new Values("" + (i+1),"" + (i+1));
            }
            yearsList = new Values[109];
            Calendar cal = Calendar.getInstance();
            int currentYear = cal.get(Calendar.YEAR);
            int first = currentYear - 108;
            for(int i=0;i<109;i++) {
                yearsList[i] = new Values("" + (first + (108-i)),"" + (first + (108-i)));
            }
    }

public Values[] getDaysList() {
    return daysList;
}

    public Values[] getMonthsList() {
    return monthsList;

}

    public Values[] getYearsList() {
    return yearsList;
}

    } 
```

在 @ManagedBean 我有一个 ajax 监听器：

```
 public void monthChanged(){
           System.out.println("New month is month number " + monthOfBirth);

        } 
```

我在输出中得到的是：

```
 "INFO: New month is month number dyplom.dyplom.date.DateValues$Values@79f6099" 
```

而不是（例如）2（月数，所以是二月）

我做错什么了？

编辑：

生成的 HTML：

```
 <h2><select id="j_idt56:j_idt70" name="j_idt56:j_idt70" size="1" onchange="mojarra.ab(this,event,'valueChange',0,'j_idt56:messages')">  <option value="dyplom.dyplom.date.DateValues$Values@32b0c37e">1</option>
       <option value="dyplom.dyplom.date.DateValues$Values@72f29f31">2</option>
       <option value="dyplom.dyplom.date.DateValues$Values@16b184ec">3</option>
       <option value="dyplom.dyplom.date.DateValues$Values@608dad97">4</option>
       <option value="dyplom.dyplom.date.DateValues$Values@757fc606">5</option>
       <option value="dyplom.dyplom.date.DateValues$Values@17a1f02e">6</option>
       <option value="dyplom.dyplom.date.DateValues$Values@89f6821">7</option>
       <option value="dyplom.dyplom.date.DateValues$Values@196d52f3">8</option>
       <option value="dyplom.dyplom.date.DateValues$Values@5860dc8f">9</option>
       <option value="dyplom.dyplom.date.DateValues$Values@3f305d9d">10</option>
       <option value="dyplom.dyplom.date.DateValues$Values@520ed4">11</option>
       <option value="dyplom.dyplom.date.DateValues$Values@b4b8076">12</option>
   </select>
   </h2> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:03:23.540

问题解决了！
我为自己犯的错误感到羞耻！看一下构造函数`Values`：

```
public Values(String valueLabel, String valueValue){
    this.valueLabel = valueValue;
    this.valueLabel = valueValue;
} 
```

正如你所看到的，我已经用错误的变量设置了两次 valueLabel，而且我根本没有设置 valueValue！

现在，当我更正构造函数时：

```
public Values(String valueLabel, String valueValue){
    this.valueLabel = valueLabel;
    this.valueValue = valueValue;
} 
```

一切都很好 :) 对不起，一团糟！

# android - JSONObject Android 无法创建

> ID：14222270
> 
> 赞同：0
> 
> 时间：2013-01-08T19:08:50.497
> 
> 标签：android, json

我有 GetRequest，作为响应，我得到了 HTML 头，body 元素的内容是 JSONS 数组。我无法解析它，任何人都可以发布如何从这个响应创建 JSON 对象的提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:49:12.230

我的问题是，当我从服务器下载请求时，我必须只获取元素的内容。比我使用标准 JSONArray 并且一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:47:46.130

```
// Creating JSON Parser instance
JSONParser jParser = new JSONParser();

// getting JSON string from URL
JSONObject json = jParser.getJSONFromUrl(url);

try {
// Getting Array of Contacts
contacts = json.getJSONArray(TAG_CONTACTS);

// looping through All Contacts
for(int i = 0; i < contacts.length(); i++){
    JSONObject c = contacts.getJSONObject(i);

    // Storing each json item in variable
    String id = c.getString(TAG_ID);
    String name = c.getString(TAG_NAME);
    String email = c.getString(TAG_EMAIL);
    String address = c.getString(TAG_ADDRESS);
    String gender = c.getString(TAG_GENDER);

    // Phone number is agin JSON Object
    JSONObject phone = c.getJSONObject(TAG_PHONE);
    String mobile = phone.getString(TAG_PHONE_MOBILE);
    String home = phone.getString(TAG_PHONE_HOME);
    String office = phone.getString(TAG_PHONE_OFFICE);

}
} catch (JSONException e) {
 e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:11:52.347

如果你有你的 JSON 返回值，`String json`你可以做

```
JSONArray a = new JSONArray(json); 
```

然后可以使用 检索数组中的第一个 JSONObject

```
JSONObject o = a.getJSONObject(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T19:12:13.737

您可以从这样的字符串创建 JSON 对象。

```
String myString = "This is the response from your HTTP GET request";
JSONObject myJson = new JSONObject(myString); 
```

请注意， 的值`myString`必须是有效的 JSON。

# php - 如何在 wordpress 中设置一种方法来强制用户在页面中花费一定的时间

> ID：14222274
> 
> 赞同：0
> 
> 时间：2013-01-08T19:09:05.873
> 
> 标签：php, wordpress, wordpress-theming

我的客户需要证明有人在他们的 WordPress 网站的页面上花费了一定的时间。你知道我们可以有一个页面，上面有一个计时器，他们不能点击下一个按钮，直到计时器达到正确的分钟数？任何人都可以建议任何插件或方法来实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:12:02.430

对于纯客户端解决方案，我建议使用 javascript 插件

1.  禁用页面加载时的所有按钮
2.  设置超时
3.  启用所有超时按钮

在 JQuery 中它看起来像这样

```
$(document).ready(function(){
   $('input[type=button],button').attr('disabled','disabled');
   setTimeout(function () { $('input[type=button],button').removeAttr('disabled'); }, 5000);
}); 
```

[jsFiddle 示例](http://jsfiddle.net/xTnKm/1/)

**注意：**禁用 javascript 的用户将无法使用此功能

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-08T19:10:24.227

可以使用[Google Analytics](http://www.google.com/analytics/)记录页面访问时间，它是免费的！

# c# - 使用 System.Type 调用泛型方法

> ID：14222277
> 
> 赞同：5
> 
> 时间：2013-01-08T19:09:25.990
> 
> 标签：c#, .net, generics, system.reflection

我正在使用 C#/.NET 4.0 和提供以下功能的协议缓冲区库 (protobuf-net)。

```
public static class Serializer {
    public static void Serialize<T>(Stream destination, T instance);
    public static void Serialize<T>(SerializationInfo info, T instance);
    public static void Serialize<T>(XmlWriter writer, T instance);
    public static void Serialize<T>(SerializationInfo info, StreamingContext context, T instance);
    public static T Deserialize<T>(Stream source);
} 
```

**我需要用非通用等价物包装其中两个调用。**具体来说，我想要

```
void SerializeReflection(Stream destination, object instance);
object DeserializeReflection(Stream source, Type type); 
```

`Serializer`这只是在运行时调用相应的通用成员。**我已经获得了`DeserializeReflection`使用以下代码的方法：**

```
public static object DeserializeReflection(Stream stream, Type type)
{
    return typeof(Serializer)
        .GetMethod("Deserialize")
        .MakeGenericMethod(type)
        .Invoke(null, new object[] { stream });
} 
```

该`SerializeReflection`方法是给我带来麻烦的原因。我首先尝试了以下代码：

```
public static void SerializeReflection(Stream stream, object instance)
{
    typeof(Serializer)
        .GetMethod("Serialize")
        .MakeGenericMethod(instance.GetType())
        .Invoke(null, new object[] { stream, instance });
} 
```

`typeof(Serializer)`问题是和之间的部分`.Invoke(...)`不起作用。调用`GetMethod("Serialize")`让我得到一个`AmbiguousMatchException`，因为有四个名为“ `Serialize`.”的方法。

然后我尝试使用`GetMethod`需要数组的重载`System.Type`来解析绑定：

```
GetMethod("Serialize", new[] { typeof(Stream), instance.GetType() }) 
```

但这只是造成的结果`GetMethod` `null`。

**如何使用反射来获取`MethodInfo`for `void Serializer.Serialize<T>(Stream, T)`，在`T`哪里`instance.GetType()`？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:27:04.253

尝试使用下一个代码片段来查看它是否满足您的需求。它创建了一个封闭类型的方法实例`public static void Serialize<T>(Stream destination, T instance)`。在这种情况下，它选择第一个方法`Stream`作为参数，但您可以将此谓词更改`method.GetParameters().Any(par => par.ParameterType == typeof(Stream))`为您想要的任何内容

```
public static object DeserializeReflection(Stream stream, object instance)
{
   return typeof(Serializer)
        .GetMethods()
        .First(method => method.Name == "Serialize" && method.GetParameters().Any(par => par.ParameterType == typeof(Stream)))
        .MakeGenericMethod(instance.GetType())
        .Invoke(null, new object[] { stream, instance });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T19:29:44.343

对于这类事情，我经常使用这样的辅助方法

```
public static MethodInfo MakeGenericMethod<TSourceType>(Type genericArgument, string methodName, Type[] parameterTypes, params int[] indexesWhereParameterIsTheGenericArgument)
{
    //Get the type of the thing we're looking for the method on
    var sourceType = typeof (TSourceType);
    //Get all the methods that match the default binding flags
    var allMethods = sourceType.GetMethods();
    //Get all the methods with the same names
    var candidates = allMethods.Where(x => x.Name == methodName);

    //Find the appropriate method from the set of candidates
    foreach (var candidate in candidates)
    {
        //Look for methods with the same number of parameters and same types 
        //   of parameters (excepting for ones that have been marked as 
        //   replaceable by the generic parameter)
        var parameters = candidate.GetParameters();
        var successfulMatch = parameters.Length == parameterTypes.Length;

        if (successfulMatch)
        {
            for (var i = 0; i < parameters.Length; ++i)
            {
                successfulMatch &= parameterTypes[i] == parameters[i].ParameterType || indexesWhereParameterIsTheGenericArgument.Contains(i);
            }
        }

        //If all the parameters were validated, make the generic method and return it
        if (successfulMatch)
        {
            return candidate.MakeGenericMethod(genericArgument);
        }
    }

    //We couldn't find a suitable candidate, return null
    return null;
} 
```

要使用它，你会做

```
var serializeMethod = MakeGenericMethod<Serializer>(instance.GetType(), "Serialize", new[]{typeof(stream), typeof(object)}, 1); 
```

# css - 以嵌入形式隐藏带有css的输入字段

> ID：14222280
> 
> 赞同：0
> 
> 时间：2013-01-08T19:09:35.517
> 
> 标签：css, forms, input, hide, field

您好我正在使用 machforms，不幸的是它没有隐藏或禁用字段的设置。我试图用css来做，因为你需要像这样使用javacode或php将表单嵌入到你的页面中

```
<script type="text/javascript">
var __machform_url = 'domain/forms/embed.php?id=13200';
var __machform_height = 479;
</script>
<div id="mf_placeholder"></div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript" src="domain/forms/js/jquery.ba-postmessage.min.js"></script>
<script type="text/javascript" src="domain/forms/js/machform_loader.js"></script> 
```

这是我看到的 html 是查看页面代码。

```
 <form id="form_13200" class="appnitro top_label" action="#main_body" data-highlightcolor="#FFF7C0" method="post"><div class="form_description"></div>
<ul>
<li id="li_1" class="#li_1 { display:none !important; } highlighted"><label class="description" for="element_1"></label><div><input id="element_1" class="element text medium" type="text" value="" name="element_1"></input></div></li>
<li id="li_buttons" class="buttons"></li></ul></form> 
```

我把它放在css中

```
#li_1
{
display: none !important;
} 
```

似乎不起作用，有人可以指出我这样做的正确方法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:11:31.947

你做错了你的内联CSS。正确的语法是`<li class="foo" style="display: none;">bar</li>`希望这有帮助！所以：`<li id="li_1" class="#li_1 highlighted" style="display: none;">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:14:31.557

`class="#li_1 { display:none !important; } highlighted"`是无效的。您正在将样式表语法与类名值混合。

# scala - Scala - 获取绑定变量列表？

> ID：14222282
> 
> 赞同：15
> 
> 时间：2013-01-08T19:09:38.230
> 
> 标签：scala, variables

有没有办法在scala中获取绑定变量的列表？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-08T20:53:02.653

在`:power`2.9、2.10 和 2.11 的模式下，您可以`intp.visibleTermNames.sorted.foreach(println)`获取所有内容，或者`intp.definedTerms.foreach(println)`仅获取您创建的内容。

在 2.10 中，`$intp`始终可见（电源模式或无），因此`$intp.definedTerms.foreach(println)`将在非电源模式下打印列表。

在电源模式下尝试`intp.`+tab 以列出所有可用的方法。（以 开头的符号`$`未启用制表符补全。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T20:52:54.690

在 Scala 2.10 REPL 中，可以访问`IMain`与 REPL 关联的实例。它可以作为`$intp`. 似乎可以用这个来深入检查 REPL 状态。

例如，`$intp.unqualifiedIds`可能对您有帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-08T20:23:36.997

在 REPL 中，您可以使用`:dump`命令打印 REPL 的内部状态。第一行之一应该是这样的：

```
Names: $ires0 $ires1 $ires2 $ires3 $ires4 $ires5 $ires6 $ires7 $r x z 
```

这些都是您在此会话中定义的变量、类和单例。

我不知道只显示变量的方法。

**编辑**：

在`:dump`命令可用之前，您必须使用`:power`

# database - 密码的字符/长度限制？

> ID：14222284
> 
> 赞同：0
> 
> 时间：2013-01-08T19:09:46.817
> 
> 标签：database, security, passwords

我看到很多知名网站和网络应用程序对密码有看似荒谬的限制。是否有任何正当理由对密码进行字符限制？更具体地说，常见的（如 [shift]+[number key]）标准 ASCII 单字节字符？异常小的长度要求（5 - 8 个字符）呢？

我能想到的唯一技术原因是密码是否以纯文本形式存储，而不是至少以某种方式被混淆/散列。还有其他我没有考虑过的不那么令人担忧的原因吗？

***注意：**我希望得到一些客观的答案，并希望避免深入研究这个主题的主观方面的诱惑。我对为什么有必要进行此类限制的真实/具体技术原因更感兴趣。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:21:53.913

有时，网站所有者希望在使用某些键盘/操作系统上无法重现的外来字符时避免用户问题。请记住，您并没有真正看到您的密码，因此您输入的内容很可能不是您的意思。想想大写锁定。出于同样的原因，[Facebook 非常放松。密码中的字符大小写](https://webapps.stackexchange.com/questions/26301)。

密码长度的下限显然是出于安全原因。密码越短，破解所需的时间（指数级！）就越少。

我不明白为什么网站对密码长度有上限。毕竟它们都经过哈希处理和加盐处理，所以所有密码都在数据库中占据完全相同的空间......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:23:28.117

说它们以纯文本存储与某些地方限制这些字符的原因无关，以纯文本存储是另一个问题。最常见的原因是底层操作系统无法处理这些“特殊”字符，业务升级缓慢。混淆的作用很小。无论是他们使用的软件还是他们的团队创建的软件，这几乎总是一个限制。

我相信 Windows 2000 和更早版本不支持长度大于 8 的密码（我可能在那个数字上错了）

# iphone - 如果您使用的是 iOS 5.1，我希望此按钮显示错误消息

> ID：14222285
> 
> 赞同：0
> 
> 时间：2013-01-08T19:09:58.167
> 
> 标签：iphone, ios, ipad

我有一个分享 Twitter 消息的按钮。问题是社交网络在 iOS 5.1 上不起作用，所以我的问题是如果用户使用的是 iOS 5.1，我该如何发送错误消息？

```
-(IBAction)Twitter:(id)sender{
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]) {

    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

    SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
        if (result == SLComposeViewControllerResultCancelled) {

            NSLog(@"Cancelled");

        } else

        {
            NSLog(@"Done");
        }

        [controller dismissViewControllerAnimated:YES completion:Nil];
    };
    controller.completionHandler =myBlock;

    [controller setInitialText:@"#VOX"];
    [controller addURL:[NSURL URLWithString:@""]];
    [controller addImage:[UIImage imageNamed:@""]];

    [self presentViewController:controller animated:YES completion:Nil];

}
else{
    alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Please check your Twitter settings." delegate:self cancelButtonTitle:@"cancel" otherButtonTitles:nil ,nil];

    [alert show];

}

} 
```

这是我的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:19:43.493

如果您支持 iOS 5.1 作为您的部署目标，那么不允许用户发布他们的推文是一种糟糕的用户体验。相反，您的方法应如下所示：

```
- (IBAction)sendTweetTapped:(id)sender {

   if ([SLComposeViewController class]) {
      // Execute your code as you have it
   }
   else {
      // Use TWTweetComposeViewController and the Twitter framework
   }
} 
```

您需要弱链接社交框架。这样做时，如果用户的 iOS 版本不支持 Social 框架（即低于 6.0），您基本上只是向 nil 发送消息，这是允许的。在这种情况下，您将回退到使用 Twitter 框架，每个人都可以愉快地发推文！

** 注意：我更改了您的方法的名称，因为它很糟糕，并且没有描述该方法应该做什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T19:19:25.957

要单独获取系统版本，您可以在这里找到一个很好的答案：[我们如何以编程方式检测设备运行的 iOS 版本？](https://stackoverflow.com/questions/7848766/how-can-we-programmatically-detect-which-ios-version-is-device-running-on)

但是，总而言之，您可以调用：

```
[[[UIDevice currentDevice] systemVersion] floatValue]; 
```

它将 iOS 版本作为浮点值返回。

**但是，这对于您需要它是一种*不好的做法。***最好在检查当前操作系统的同时检查某个功能。要完全成功集成 Twitter，您应该考虑包括 iOS 5.0 的内置 Twitter 功能（您需要弱包含和 #import Twitter.framework 和社会框架）：

```
float osv = [[[UIDevice currentDevice] systemVersion] floatValue];

if (osv >= 6.0 && [SLComposeViewController class]) { //Supports SLComposeViewController, this is preferable.

   if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]) {
       //Success, you can tweet! (using the class SLComposeViewController)
   } else {
       if ([TWTweetComposeViewController canSendTweet]) { //Perhaps redundant, but worth a try maybe?
            //Success, you can tweet! (using the class TWTweetComposeViewController)
       } else {
            //Error Message 
       }
   } 

} else if (osv < 6.0 && osv >= 5.0 && [TWTweetComposeViewController class]) {

   if ([TWTweetComposeViewController canSendTweet]) {
        //Success, you can tweet! (using the class TWTweetComposeViewController)
   } else {
        //Error Message 
   }

} else {
       //No internal solution exists. You will have to go with 3rd party or write your own.
} 
```

# android - 尽管视图层次结构不同，但调用 TextView.setText() 会重绘整个屏幕

> ID：14222289
> 
> 赞同：7
> 
> 时间：2013-01-08T19:10:12.667
> 
> 标签：android, android-layout, textview

在我的应用程序中，我有一个每秒更新的时间显示。每次用于秒字段的 TextView 更改时，开发人员选项->显示表面更新工具都会闪烁整个屏幕。我环顾四周，真的只能找到[这个问题](https://stackoverflow.com/questions/6509921/textfield-change-triggers-full-layout-cycle)，它很好地阐明了没有办法阻止 TextView 导致至少部分窗口重新布局。所以我确定要验证我的 TextView 是否包装在它们自己的容器中，但我仍然遇到同样的问题。每次调用 setText() 都会导致整个视图闪烁。

我的层次结构如下：

*   分段
    *   相对布局（片段根视图）
        *   线性布局
            *   相对布局
                *   我的时间文本视图
        *   其他很少更改的视图组件

如果可能的话，我想解决这个问题。如果可能的话，我确实需要尝试减少我的查看次数，并且我计划继续努力，但这仍然是我想从应用程序中删除的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T19:40:43.403

当硬件加速打开时，显示表面更新会闪烁整个屏幕，但这并不意味着整个窗口都被重绘了。您可以使用另一个选项来准确显示在硬件加速开启时屏幕的哪一部分被重绘（“显示 GPU 视图更新”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-11T20:27:16.253

我遇到了一个类似的问题，我正在更新一个导致每次测量都通过的计时器。如果你有一些测量起来很昂贵的东西，比如 ListView，它会影响性能。就我而言，我有一个 ListView，它在计时器更新时不需要更改大小，所以我制作了一个自定义 ListView 持有者来阻止度量级联到 ListView。现在运行顺利！

```
public class CustomListviewHolderLayout extends FrameLayout {

    public int currentWidth = 0;
    public int currentHeight = 0;

    public CustomListviewHolderLayout(Context context) {
        super(context);
    }

    public CustomListviewHolderLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CustomListviewHolderLayout(Context context, AttributeSet attrs,
            int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(final int widthMeasureSpec, final int heightMeasureSpec) {
        //Debug Prints
        String wMode = "";
        switch(MeasureSpec.getMode(widthMeasureSpec)){
            case MeasureSpec.AT_MOST:
                wMode = "AT_MOST"; break;
            case MeasureSpec.EXACTLY:
                wMode = "EXACTLY"; break;
            case MeasureSpec.UNSPECIFIED:
                wMode = "UNSPECIFIED"; break;
            default:
                wMode = "";
        }
        String hMode = "";
        switch(MeasureSpec.getMode(heightMeasureSpec)){
            case MeasureSpec.AT_MOST:
                hMode = "AT_MOST"; break;
            case MeasureSpec.EXACTLY:
                hMode = "EXACTLY"; break;
            case MeasureSpec.UNSPECIFIED:
                hMode = "UNSPECIFIED"; break;
            default:
                hMode = "";
        }
        Log.i("RandomCustomListViewHolder", "wMode = " + wMode + ", size = " + MeasureSpec.getSize(widthMeasureSpec));
        Log.i("RandomCustomListViewHolder", "hMode = " + hMode + ", size = " + MeasureSpec.getSize(heightMeasureSpec));
        //only remeasure child listview when the size changes (e.g. orientation change)
        if(getChildCount() == 1){
            if(((MeasureSpec.getMode(widthMeasureSpec) == MeasureSpec.EXACTLY) ||
                (MeasureSpec.getMode(widthMeasureSpec) == MeasureSpec.AT_MOST))
              &&((MeasureSpec.getMode(heightMeasureSpec) == MeasureSpec.EXACTLY) ||
                (MeasureSpec.getMode(heightMeasureSpec) == MeasureSpec.AT_MOST))){
                //check if height dimensions are different than before
                int newWidth =  MeasureSpec.getSize(widthMeasureSpec);
                int newHeight = MeasureSpec.getSize(heightMeasureSpec);
                if((newWidth != currentWidth) || (newHeight != currentHeight)){
                    //remeasure if different
                    Log.i("RandomCustomListViewHolder", "measuring listView");
                    View childView = getChildAt(0);
                    childView.measure(widthMeasureSpec, heightMeasureSpec);
                    currentWidth = newWidth;
                    currentHeight = newHeight;
                    this.setMeasuredDimension(newWidth, newHeight);
                } else {
                    //still set this view's measured dimension
                    this.setMeasuredDimension(newWidth, newHeight);     
                }               
            } else {
                //Specify match parent if one of the dimensions is unspecified
                this.setMeasuredDimension(ViewGroup.LayoutParams.MATCH_PARENT,
                        ViewGroup.LayoutParams.MATCH_PARENT);                   
            }
        } else {
            //view does not have the listview child, measure normally 
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);           
            currentWidth = 0;
            currentHeight = 0;
        }
    }
} 
```

# python - python可以一次在浏览器中打开多个选项卡吗？

> ID：14222290
> 
> 赞同：1
> 
> 时间：2013-01-08T19:10:12.797
> 
> 标签：python, selenium, python-2.7

我正在寻找一种更快的方法来完成我的任务。我有 40000 个文件可下载的 url。我想在本地桌面上下载它们。现在我的想法是目前我正在做的是将链接放在浏览器上，然后通过脚本下载它们。现在我正在寻找的是在一个块中放置 10 个 url地址栏并同时获取要下载的10个文件。如果可能的话，希望整体时间会减少。

对不起，我迟到了代码，这里是：

```
def _download_file(url, filename):
    """
    Given a URL and a filename, this method will save a file locally to the»
    destination_directory path.
    """
    if not os.path.exists(destination_directory):
        print 'Directory [%s] does not exist, Creating directory...' % destination_directory
        os.makedirs(destination_directory)
    try:
        urllib.urlretrieve(url, os.path.join(destination_directory, filename))
        print 'Downloading File [%s]' % (filename)
    except:
        print 'Error Downloading File [%s]' % (filename)

def _download_all(main_url):
    """
    Given a URL list, this method will download each file in the destination
    directory.
    """

    url_list = _create_url_list(main_url)
    for url in url_list:
        _download_file(url, _get_file_name(url)) 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:21:53.837

为什么要使用浏览器？这似乎是一个[XY 问题](https://meta.stackexchange.com/a/66378)。

要下载文件，我会使用[请求](http://docs.python-requests.org/)之类的库（或对 进行系统调用`wget`）。

像这样的东西：

```
import requests

def download_file_from_url(url, file_save_path):
    r = requests.get(url)
    if r.ok: # checks if the download succeeded
        with file(file_save_path, 'w') as f: 
           f.write(r.content)
        return True
    else:
        return r.status_code

download_file_from_url('http://imgs.xkcd.com/comics/tech_support_cheat_sheet.png', 'new_image.png')
# will download image and save to current directory as 'new_image.png' 
```

您首先必须使用您喜欢的任何 python 包管理器安装请求，例如`pip install requests`. 你也可以变得更漂亮；例如，

# xml - vim：尝试使用 xmledit（xml 标签自动完成）

> ID：14222291
> 
> 赞同：0
> 
> 时间：2013-01-08T19:10:13.863
> 
> 标签：xml, vim, autocomplete

我已经安装了vim，然后我复制了[`xml.vim`](https://github.com/sukima/xmledit/tree/master/ftplugin)里面的文件`~/.vim/ftplugin.`

然后我打开一个`.xml`文件，但在写入后`<foobar>`它不会自动完成结束标记..

任何想法？

# list - 列表的Scala HashMap：更简单的默认值？

> ID：14222292
> 
> 赞同：6
> 
> 时间：2013-01-08T19:10:22.250
> 
> 标签：list, scala, hashmap, overriding, default

我需要一个列表的 HashMap。通常我这样做：

```
val lists = mutable.HashMap[String,List[Int]]() { 
  override def default(key: String) = {
    val newList = List[Int]()
    this(key) = newList
    newList
  }
} 
```

这样我就可以简单地写下类似的东西

```
lists("dog") ::= 14 
```

不必担心“狗”列表是否已经初始化。

有没有更清洁的方法来做到这一点？我发现自己一次又一次地输入这五个默认覆盖行。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T19:14:34.133

怎么样`withDefaultValue()`？

```
val lists = new mutable.HashMap[String,List[Int]].withDefaultValue(Nil)

lists("dog") ::= 13
lists("cat") ::= 14
lists("dog") ::= 15  //(13, 15) 
```

# 也可以看看

*   [如何在 Scala 中使用默认操作实现 Map](https://stackoverflow.com/questions/5830458)

# wolfram-mathematica - 为什么我的 Applescript 在终端中使用 osascript 在 Snow Leopard 上运行，而不是在 Lion 上运行？

> ID：14222296
> 
> 赞同：2
> 
> 时间：2013-01-08T19:10:41.123
> 
> 标签：wolfram-mathematica, applescript, osascript

我有以下 Applescript，它可以在 Snow Leopard 和 Lion 的 applescript 编辑器中正常运行。我也可以通过 Snow Leopard 上的终端使用 osascript 运行它，但不能在 Lion 上运行它。代码如下

```
tell application "System Events"
try
    get process "Mathematica"
on error -- Not running, launch and run
    launch application "Mathematica"
    -- May need to wait until application finishes launching
    repeat while "Mathematica" is not in name of processes
        delay 0.5
    end repeat
end try
end tell
tell application "Mathematica"
activate
do script "notebook0=NotebookEvaluate[\"/Users/me/file.nb\"];
           Clear[notebook0];NotebookClose[EvaluationNotebook[]]"
end tell 
```

该脚本打开并执行一个 Mathematica 脚本。上面的场景是成功的，但是当我尝试在 Lion 中使用 osascript 运行它时，我得到一个 Mathematica 窗口，其中指出“无法找到或访问请求的文件”。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:53:13.590

当您启动应用程序“Mathematica”时，我建议您提供应用程序的完整路径。

# javascript - 将 JavaScript 代码转换为 CoffeeScript 和全局变量的问题

> ID：14222303
> 
> 赞同：1
> 
> 时间：2013-01-08T19:11:00.367
> 
> 标签：javascript, jquery, coffeescript

我正在学习 Coffeescript 并尝试将以下 JavaScript 代码转换为 Coffescript 并且（我认为）我快到了。主要是，我在将`timer`and`popover_parent`变量设为全局时遇到了问题：

```
$('.some_element').popover(
  {
    delay: { show: 350, hide: 100 }       
  }
);
var timer,
    popover_parent;
function hidePopover(elem) {
    $(elem).popover('hide');
}
$('.some_element').hover(
    function() {
      var self = this;
      clearTimeout(timer);
      $('.popover').hide(); //Hide any open popovers on other elements.
      popover_parent = self
      $(self).popover('show');            
    }, 
    function() {
      var self = this;
      timer = setTimeout(function(){hidePopover(self)},300);                 
});
$('.popover').on({
  mouseover: function() {
    clearTimeout(timer);
  },
  mouseleave: function() {
    var self = this;
    timer = setTimeout(function(){hidePopover(popover_parent)},300); 
  }
}); 
```

这是我到目前为止所拥有的：

```
$ ->
  $('.some_element')
    .popover ->
      delay: {show:350, hide: 100}
$ ->
  hidePopover = (elem) ->
    $(elem).popover('hide')

  $('.some_element').hover(
    ->
      self = $(this)
      clearTimeout(timer)
      $('.popover').hide()
      popover_parent = self
      $(self).popover('show')
    ->
      self = $(this)
      timer = setTimeout(
        ->
          hidePopover(self) 300
      )
  )

$ ->
  $(document).on({
    mouseover: ->
      clearTimeout(timer)
    mouseleave: ->
      timer = setTimeout(
        ->
          hidePopover(popover_parent) 300
      )
  }) 
```

任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:58:37.853

我不确定你是否知道[http://js2coffee.org](http://js2coffee.org)，但如果它适用于你的代码，这是学习如何将 Javascript 转换为 Coffeescript 的一种非常快速的方法。我在开始喝咖啡时经常使用它。

当然，它也将咖啡编译为 js。

# mysql - 如何对现有表行进行分组，然后按顺序应用

> ID：14222308
> 
> 赞同：-3
> 
> 时间：2013-01-08T19:11:11.413
> 
> 标签：mysql, group-by, sql-order-by

我想对列值进行分组，然后按升序对另一列中的值进行排序。我不介意是否必须创建新表。有人可以帮我解决这个问题吗？数据库是 MySQL。

非常感谢！

请在此处查看我的示例数据。

## 西德 | 区域-编号 | 分区号|

## 1--------5------------1------|

## 2--------4------------1------|

## 3--------3------------2------|

## 9-------5------------2------|

## 5-------6------------1------|

## 7-------9------------3------|

## 4--------1------------9------|

## 6--------1------------7------|

## 8--------2------------1------|

## 10--------2------------5------|

## 11--------2------------6------|

## 12--------2------------2------|

每个 SID 都有一个区域编号。有1-20多个区域。每个区域有 1-20 多个子区域。我想按区域号对 SID 进行分组，以便重新排列表（或者可能创建新表），其中前几行仅显示区域 1 和区域 1 下的所有子区域。然后行显示区域 2 和所有子区域区域 2 下的区域，依此类推。我不介意 SID 订单是否更改。

输出将是：

## 西德 | 区域-编号 | 分区号|

## 6--------1------------7------|

## 4--------1------------9------|

## 8--------2------------1------|

## 12--------2------------2------|

## 10--------2------------5------|

## 11--------2------------6------|

## 3--------3------------2------|

## 2--------4------------1------|

## 1--------5------------1------|

## 9-------5------------2------|

## 5-------6------------1------|

## 7-------9------------3------|

选择将记录返回给我。但我想安排表本身，而不是从中选择记录。我不介意是否必须创建新表。

再次感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:24:46.423

它的简单查询。

```
SELECT column_name 
FROM table_name  
GROUP BY column_name 
ORDER BY column_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:22:28.353

我能够解决这个问题。我只需要从我想要的列开始排序，这里是区域和子区域。

```
insert into temp select * from stuTable order by Area, subArea; 
```

感谢您的所有回答！

# c++ - 一些处理后如何调用父构造函数？

> ID：14222310
> 
> 赞同：2
> 
> 时间：2013-01-08T19:11:14.733
> 
> 标签：c++

我想在调用父构造函数之前做一些处理。下面的例子说明了为什么我要这样做，尽管为了清楚起见我已经把它变得微不足道了。真正的父构造函数正在做一些渲染，但让我们先尝试解决这个问题。

本质上，当父构造函数调用覆盖函数但子数据尚未设置时，问题就出现了。我该如何解决？

```
class BaseClass {

public:
    int myNumber;

    BaseClass(){
        myNumber = 0;
        this->printNumber();
    }

    virtual void printNumber(){
        printf("My number is %d\n", this->myNumber);
    }
}

class ChildClass : BaseClass {

public:
    float childNumber;

    ChildClass(float myNumber) : BaseClass() {
        this->childNumber = myNumber;
    }

    void printNumber(){
        printf("My number is %f\n", this->childNumber);
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T19:13:49.287

> 当父构造函数调用覆盖函数时，问题就出现了，

No, that never happens. Within the constructor of `BaseClass` its dynamic type is `BaseClass` as well, so the `printNumber()` call will resolve to its own *number* instead of some derived class. Why? Because at that time the constructors for `ChildClass` has not yet finished running and so it wasn't yet created.

As *@FredLarson* comments, here is more info on the subject: [http://parashift.com/c++-faq/calling-virtuals-from-ctors.html](http://parashift.com/c++-faq/calling-virtuals-from-ctors.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T19:18:17.533

Like others said above, you shouldn't call a virtual member from a constructor. But to address your problem there is an idiom that might help you, it is called base-from-member:

[http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Base-from-Member](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Base-from-Member)

What it does basically, is take advantage of the fact that base classes are initialized in the order they are declared. You may be able to do what you need to do in a separate base class before your base class is initialized.

```
class OtherBaseClass {
    int Num;
    OtherBaseclass(float num) : Num(num)
    {
        printf("My number is %d\n", this->Num);
    }
};

class ChildClass : OtherBaseClass, BaseClass {

public:
    float childNumber;

    ChildClass(float myNumber) : OtherBaseClass(myNumber), BaseClass() {
.... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T19:19:33.397

Note that the constructor of the base class cannot call to the virtual function version of the derived class, that is, your `ChildClass::printNumber()` function **will not** be called.

That said, if you want to execute something before the constructor of the base class, one way to do it is using yet another base class, and put it before the other one:

```
class RunMeFirst
{
    public RunMeFirst()
    { printf("whatever...\n"); }
};

class ChildClass : private RunMeFirst, public BaseClass 
{ /*...*/ }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T19:32:06.893

Do you have to implement the rendering functionality in a base class? Could you instead employ composition instead of inheritance. Using composition would allow you to easily control the member initialization order, e.g.:

```
#include <iostream>

class renderer
{
public:

    renderer(int number)
    {
        std::cout << "Number is " << number << std::endl;
    }
};

class foo
{
public:

    foo()
        : number_(12)
        , renderer_(number_)
    {
    }

private:

    int number_;
    renderer renderer_;

};

int main()
{
    foo bar;
} 
```

In general, [prefer composition to inheritance](http://www.artima.com/cppsource/codestandards3.html). Also, the [Liskov Substitution Principle](http://en.wikipedia.org/wiki/Liskov_substitution_principle) may be of use here, too, from a design point of view.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T19:24:00.953

There are several things that run before a base class' constructor:

*   Initialization of arguments
*   Virtual base classes' constructors
*   Other base classes declared earlier's constructors

One commonly used solution is called the "base from member idiom" and involves moving the member to a new base class that is constructed first.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T19:53:07.797

Thanks to @K-ballo for pointing out the error and because of that I was able to restructure the code a bit to do what I wanted, but as this isnt a technical correct answer to the question either, Ill leave the correct answer as is.

```
class BaseClass {

public:
    int myNumber;

    BaseClass(bool initialize = true){
        myNumber = 0;
        if (initialize){
            this->initialize();
        }
    }

    void initialize(){
        this->printNumber();
    }

    virtual void printNumber(){
        printf("My number is %d\n", this->myNumber);
    }
}

class ChildClass : BaseClass {

public:
    float childNumber;

    ChildClass(float myNumber) : BaseClass(false) {
        this->childNumber = myNumber;
        this->initialize();
    }

    void printNumber(){
        printf("My number is %f\n", this->childNumber);
    }

} 
```

# image - 使用 openGL、SOIL 加载图像

> ID：14222312
> 
> 赞同：1
> 
> 时间：2013-01-08T19:11:26.467
> 
> 标签：image, opengl, textures, glut, soil

我尝试了很多使用 SOIL 在 openGL 中加载和显示图像的示例。在运行下面的源代码时，它只显示一个没有图像的 wite quad。我试图打开一个名为：foto 的图像。我将图像文件放在程序的文件夹中。

```
bool* keyStates = new bool[256];
GLuint texture[0];

void resize(int height, int width) {
    const float ar = (float) width / (float) height;
    glViewport(0, 10, width, height);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    glFrustum(-ar, ar, -1.0, 1.0, 2.0, 90.0);
    //gluLookAt(0, 2, 0, -1, 1, -3, 0, 1, 0);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity() ;
}
void keyOperations (void) {
    if (!keyStates['a']) {}
}
static void Draw(void)
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();
    glTranslatef(0.0f,0.0f,-5.0f);
    texture[0] = SOIL_load_OGL_texture // load an image file directly as a new OpenGL texture
    (
        "foto.png",
        SOIL_LOAD_AUTO,
        SOIL_CREATE_NEW_ID,
        SOIL_FLAG_MIPMAPS | SOIL_FLAG_INVERT_Y | SOIL_FLAG_NTSC_SAFE_RGB | SOIL_FLAG_COMPRESS_TO_DXT
    );
// allocate a texture name

    glBindTexture(GL_TEXTURE_2D, texture[0]);
    glBegin(GL_QUADS);
    glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);
    glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);
    glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f,  1.0f);
    glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f,  1.0f);
    glEnd();
    glutSwapBuffers();
}
void keyPressed (unsigned char key, int x, int y) {
    keyStates[key] = false;
}
void keyUp (unsigned char key, int x, int y) {
    keyStates[key] = true;
}
int main(int argc, char **argv)
{
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB);
    glutInit(&argc, argv);
    glutInitWindowSize(600, 600);
    glutCreateWindow("ugh fml");
    glutReshapeFunc(resize);
    glutDisplayFunc(Draw);
    glutKeyboardFunc(keyPressed);
    glutKeyboardUpFunc(keyUp);
    /////////////////////////////////////
    glEnable(GL_TEXTURE_2D);
    glShadeModel(GL_SMOOTH);
    glClearColor(0.0f, 0.0f, 0.0f, 0.5f);
    glClearDepth(1.0f);
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LEQUAL);
    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);
    glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:26:47.147

您正在使用相对路径来访问`foto.png`.

确保您的[工作目录](http://en.wikipedia.org/wiki/Working_directory)在您期望的位置。

一些 IDE 喜欢将工作目录更改为可执行文件所在位置以外的位置*。*

# c++ - 在linux中检测与命名管道的断开连接

> ID：14222314
> 
> 赞同：0
> 
> 时间：2013-01-08T19:11:27.543
> 
> 标签：c++, linux, named-pipes

我在 Linux 中从事 C++ 项目，其中两个程序通过命名管道进行通信。

现在我想在一个程序中检测另一个程序是否与命名管道断开连接。

有没有办法检测断开连接？

**编辑**

我在 O_RDWR 模式下打开了 fifo - 这就是 select 对断开连接没有反应的原因。现在我用 (O_RDONLY | O_NDELAY) 打开 fifo，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:40:56.037

如果`read`一端返回 0 字节，则管道断开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:16:10.067

这与 TCP/IP 中的相同。您需要尝试读取数据，如果读取失败并返回 0，则管道已关闭。

阅读和接收：

> 这些调用返回接收到的字节数，如果发生错误，则返回 -1。 **当对等方执行了有序关闭时，返回值将为 0**。

也有`SIGPIPE`信号。当您尝试写入损坏的管道 - 没有阅读器的管道时，它将被发送。

# javascript - jQuery触发点击在IE中不起作用

> ID：14222315
> 
> 赞同：0
> 
> 时间：2013-01-08T19:11:27.890
> 
> 标签：javascript, jquery, internet-explorer-8

以下适用于 Chrome 和 HTML——它在页面加载时单击五个单独的元素。IE8 不会抛出任何错误，但是点击事件不会发生。任何建议，将不胜感激。

```
<script>
    window.onload = function(){
    $(document).ready(function(){ 
    var1=document.getElementById("agencyautoclick")
    $(var1).trigger('click');
    var2=document.getElementById("scaleautoclick")
    $(var2).trigger('click');
    var3=document.getElementById("modeautoclick")
    $(var3).trigger('click');
    var4=document.getElementById("infrastructureautoclick")
    $(var4).trigger('click');
    var5=document.getElementById("topicsautoclick")
    $(var5).trigger('click');
    });
    }
</script> 
```

我最初没有使用 jQuery（只使用了 .click()），但这在 IE8 中再次不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:16:15.507

你写的都是一样的：

```
<script>
$(document).ready(function(){ 
  $('#agencyautoclick').trigger('click');
  $('#scaleautoclick').trigger('click');
  $('#modeautoclick').trigger('click');
  $('#infrastructureautoclick').trigger('click');
  $('#topicsautoclick').trigger('click');
});   
</script> 
```

你没有利用 jQuery =)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T19:12:20.650

不要做

```
var1=document.getElementById("agencyautoclick")
$(var1).trigger('click'); 
```

做

```
var $var1 = $('#agencyautoclick');

// OR

var $var1 = document.getElementById('agencyautoclick'); 
```

并且不要忘记分号“;” end 每个完整命令（行）的结尾。

更远

```
window.onload = function(){
    $(document).ready(function() { /* ... */ });
}; 
```

不好。您必须决定是要在窗口加载时加载该功能，还是要在文档就绪时加载它。

写吧

```
<script type="text/javascript">
    $(document).ready(function() { /* ... */ });

    // OR

    $(window).load(function() { /* ... */ });
</script> 
```

# wordpress - 与自定义帖子类型同名的父页面的子页面导致 404

> ID：14222317
> 
> 赞同：2
> 
> 时间：2013-01-08T19:11:36.527
> 
> 标签：wordpress, http-status-code-404, categories, custom-post-type, permalinks

我在这个问题上进行了广泛的搜索，发现其他人也有类似的问题，但没有适合我的解决方案。

情况是这样的：
* 我创建了一个带有“事件”的自定义帖子类型。
* 我创建了一个带有“事件”的页面。
* 我已将子页面添加到事件页面（一级子页面）
* 我已将子页面添加到那些子页面（二级子页面）
* 永久链接结构设置为 /%category%/%postname%/
* I我没有使用任何插件或自定义代码来处理自定义帖子类型。
* 当我导航到 /events/ 时，页面可以使用 pages.php 模板正常加载。
* 当我导航到 /events/first-level-child/ 时，我得到一个 404。
* 当我导航到 /events/first-level-child/second-level-child/ 时，使用 page.php 模板可以正常加载页面。
* 当我导航到 /events/category-name/ 时，页面使用 archive.php 模板加载正常。

问题是我在尝试查看具有与自定义帖子类型相同的 slug 的页面的第一级子页面时得到的 404。

我不能重命名任何一个蛞蝓以使它们不同。我需要找到一种方法让子页面和类别都按预期为事件页面工作。我无法在 .htaccess 文件中为子页面创建自定义重定向，因为客户端必须能够自己创建它们。

有没有办法修改WordPress生成的重写规则来实现我的目标？或者是否有一个我可以使用的插件会有所帮助？我猜 WordPress 期望第二个 uri 段是一个类别名称。如果没有找到类别，有没有办法让它查找具有该名称的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:39:35.430

看起来这里的解决方案是为自定义帖子类型定义一个自定义分类，其中的 slug 与帖子类型本身的 slug 不同。

在这种情况下，帖子类型的 slug 是“事件”，分类的 slug 是“事件/类别”。这样做可以显示子页面以及帖子的类别。

# iphone - UIMenuController 不显示在第二个 UIViewController

> ID：14222319
> 
> 赞同：0
> 
> 时间：2013-01-08T19:11:42.877
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uimenucontroller

我有两个 UIViewController，一个是主要的，通过这个按钮可以转到第二个。在 SecondView.m 我有以下代码：

```
 - (IBAction)showpopup:(id)sender {
    [self becomeFirstResponder];
    UIMenuController *sharedController = [UIMenuController sharedMenuController];
    UIMenuItem *x2 = [[UIMenuItem alloc] initWithTitle:@"2x2" action: @selector(mat)];
    UIMenuItem *x3 = [[UIMenuItem alloc] initWithTitle:@"3x3" action: @selector(mat)];
    UIMenuItem *x4 = [[UIMenuItem alloc] initWithTitle:@"4x4" action: @selector(mat)];
    UIMenuItem *x5 = [[UIMenuItem alloc] initWithTitle:@"5x5" action: @selector(mat)];

    NSArray *menuArray = [NSArray arrayWithObjects: x2,x3,x4,x5, nil];

    CGRect drawRect = [sender convertRect:[sender bounds] toView: self.view];
    [sharedController setTargetRect:drawRect inView: self.view];

    [sharedController setMenuItems:menuArray];
    [sharedController setMenuVisible:YES animated:YES];
    [sharedController setMenuItems: nil];
}

-(BOOL)canBecomeFirstResponder{
    return YES;
}

-(int)mat:(id)sender{
    return 0;
} 
```

Button 链接为“内部修饰”，但是当我运行 UIMenuController 时没有显示。完全相同的代码在主 UIViewController 中工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:14:16.590

如果我没有遗漏任何东西，我认为您应该，例如，将您的 sharedController.view 作为子视图添加到您的 mainController.view，例如（假设在您的主控制器中定义了 `showpopup）：

```
- (IBAction)showpopup:(id)sender {
    [self becomeFirstResponder];
    UIMenuController *sharedController = [UIMenuController sharedMenuController];
    ...
    [sharedController setMenuItems:menuArray];
    [sharedController setMenuVisible:YES animated:YES];
    [sharedController setMenuItems: nil];
    [self.view addSubview:sharedController.view];
} 
```

或者您可以模态显示您的 sharedController （替换`addSubview`上面的行）：

```
[self presentViewController:sharedController animated:YES completion:nil]; 
```

无论如何，在我看来，“呈现”位丢失了。

# c# - WCF 服务可测试性和依赖注入

> ID：14222324
> 
> 赞同：2
> 
> 时间：2013-01-08T19:11:52.667
> 
> 标签：c#, asp.net-mvc, wcf, dependency-injection

我有一个托管在**MVC Application内的****WCF 服务**。服务与多个存储库（我的代码优先设计）交互以完成其工作。目前我在每个 Service 方法中创建所有 Repository 类的实例，我认为这很糟糕，我的 Service 完全耦合到 Repository 类。我想知道我应该如何为 WCF 服务实现一个漂亮而干净的 DI。

 **提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:19:55.507

我建议使用依赖倒置原则：让你的存储库实现一个特定的接口，然后让你的服务类接受该接口（或多个接口）的一个（或多个对象）。不要让它直接引用具体类。然后，您需要在服务类上做的所有事情就是调用接口公开的方法来显示您想要的任何/所有信息。

这样做将使代码彼此分离，因为它们都依赖于抽象，并且您仍然可以获得您所请求的精彩功能。

以下是您*可以*执行的操作： 假设您的 WCF 服务类需要 RepositoryA，它实现了 IRepositoryA。您要做的是在其上有一个`private`IRepositoryA 类型的字段（通常是 ）。然后在服务中创建一个构造函数，该构造函数接受 IRepositoryA 类型的对象，然后使用传入的对象设置字段变量。类似于在[此站点](http://www.develop.com/inversioncontrolwcf)上找到的内容：

有关依赖倒置原则的更多信息，请阅读 Bob 大叔[所说](https://docs.google.com/file/d/0BwhCYaYDn8EgMjdlMWIzNGUtZTQ0NC00ZjQ5LTkwYzQtZjRhMDRlNTQ3ZGMz/edit?hl=en)的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T19:35:51.117

您可以采取的一种方法是在您的服务类中注入一个存储库工厂，然后从工厂调用/获取您的存储库。

仓库工厂：

```
public interface IRepositoryFactory
{
    IRepositoryOne GetRepositoryOne();
    IRepositoryTwo GetRepositoryTwo();
}

public class RepositoryFactory: IRepositoryFactory
{
    public DataAccess.RepositoryInterfaces.IRepositoryOne GetRepositoryOne()
    {
        return new RepositoryOne();
    }
    public DataAccess.RepositoryInterfaces.IRepositoryTwo GetRepositoryTwo()
    {
        return new RepositoryTwo();
    }
} 
```

服务等级：

```
public ServiceClass: IService
{

    private readonly IRepositoryFactory _repositoryFactory;

    public ServiceClass(IRepositoryFactory factory)
    {
        _repositoryFactory = factory;
    }

    public IList<YourItems> GetYourItems()
    {
        var repository = _repositoryFactory.GetRepositoryOne();
        return repository.GetItems(....);
    }
} 
```

使用这种方法，您只需要注册和解析您的存储库工厂，而不是所有单独的存储库。这是一种混合方法，但我认为它非常干净且易于理解。当然，您总是不能在每次调用中都使用工厂并解析您的存储库。如果你愿意，我也可以展示一个样本。**

# android-launcher - 如何明确启动 com.android.launcher？

> ID：14222325
> 
> 赞同：1
> 
> 时间：2013-01-08T19:11:58.603
> 
> 标签：android-launcher

我有一个应用程序可以替换信息亭应用程序的启动器。我需要退出股票启动器以进入服务模式。

从一个虚拟测试应用程序，我可以像这样启动我自己的“家庭”应用程序：

```
Context ctx = getBaseContext();
Intent i = ctx.getPackageManager().getLaunchIntentForPackage("my.application.main");
ctx.startActivity(i); 
```

但是，如果我用 com.android.launcher 替换 my.application.main，我会返回 null 的意图。然而，com.android.launcher 在系统上（Nexus 7 平板电脑）。如何明确启动 com.android.launcher？

# visual-studio-2010 - VS2010 TFS 自动构建

> ID：14222332
> 
> 赞同：-1
> 
> 时间：2013-01-08T19:12:17.603
> 
> 标签：visual-studio-2010, tfs, build-automation, tibco, automated-deploy

我对 VS 和 TFS 环境有“公平”的经验。这是我到目前为止所做的。完成编码工作后，我构建了它，签入它，然后其他人部署了它。所以，我不知道“自动构建”是什么意思。
什么是“自动构建”？我该怎么做？如果您可以附上一些示例文件，那将不胜感激。

非常感谢你

哦！我也在研究 TIBCO 自动构建，所以如果您有兴趣，请通过下面的链接查看！

[TIBCO 自动化构建](https://stackoverflow.com/questions/14221994/tibco-automated-build)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:15:12.280

查找概念：持续集成。对于您的平台，请查找：tfs build controller、tfs build agent 和 msbuild。

# javascript - 如何在javascript中添加按钮（具有类属性）单击回调

> ID：14222333
> 
> 赞同：1
> 
> 时间：2013-01-08T19:12:18.247
> 
> 标签：javascript, jquery, html

我对与 javascript 回调交互的 html 类属性有疑问。

假设我有一张桌子，每一行都有一个像这样的按钮：

```
<table border="0">
<?php foreach ($itemlist as $item => $value): ?>
    <tr>
        <td><?php echo $item;?></td>
        <td><button class="create-user">Test</button></td>
    </tr>
<?php endforeach; ?>
</table> 
```

请注意，该按钮的类属性为“create-user”。现在我想为每个按钮添加相同的回调：

```
var btn = document.getElementsByClassName("create-user");
btn.click(function() {
    $("#dialog-form").dialog("open");
}); 
```

我预计对话框会打开，但没有响应。这是我第一次与 javascript 一起处理类属性。

任何人都可以为我解释一下吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:14:46.500

`getElementsByClassName`返回一个类似数组的集合（技术上是 a `nodeList`）。要将事件处理程序添加到您的元素，您必须遍历它们：

```
var buttons = document.getElementsByClassName("create-user");
var count = buttons.length;

while ( count-- ) {
    buttons[ count ].onclick = function () {
        $("#dialog-form").dialog("open");
    };
} 
```

但是，由于您使用的是 jQuery，因此您应该使用 jQuery 来选择您的元素，这不需要显式循环：

```
$(".create-user").click(function() {
    $("#dialog-form").dialog("open");
}); 
```

* * *

**PS**为了提高性能，记得缓存你的选择器：

```
var $dialog = $("#dialog-form");
$(".create-user").click(function() {
    $dialog.dialog("open");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:14:48.173

看来您正在将常规 JavaScript 与 jQuery 混为一谈。考虑到您实际上正在使用 jQuery，替换`var btn = document.getElementsByClassName("create-user");`为应该可行。`var btn = $(".create-user");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:16:39.300

running`document.getElementsByClassName("create-user");`将返回一个类似数组的 NodeList 对象。相反，请尝试：

```
var btn = $('.create-user'); 
```

然后`btn`会有一个`click`方法（假设你使用的是jQuery）；

此外，尝试使用 Firebug 或 Web 开发者控制台来查看有关 JavaScript 错误的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T19:18:11.417

jQuery 最适合这个：[http ://www.jquery.com](http://www.jquery.com)

下载 jQuery 并将其包含在您的文件中。

然后您的代码将如下所示：

```
<script type="text/javascript">
   //When document loads add to all create-user buttons
   $(document).ready(function(){
     $(".create-user").click(function() {
        $("#dialog-form").dialog("open");
     });
   });
</script> 
```

# breeze - 微风实体类型具有递归定义

> ID：14222335
> 
> 赞同：0
> 
> 时间：2013-01-08T19:12:22.660
> 
> 标签：breeze

下面的代码经常会用完堆栈空间，因为类型 Entity 有一个名为 EntityAspect 的属性，它有一个名为 Entity 的 Entity 类型的属性，它指向拥有的实体。这种递归定义会导致一些工具失败或运行异常缓慢，但最值得注意的是，淘汰赛。可以做些什么来解决这个问题吗？

```
var custType = _this.metadataStore.getEntityType("Customer");
var cust1 = custType.createEntity();
var js = ko.toJS(cust1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:39:36.923

我发现我需要同时忽略 entityAspect 和 entityType（来自自定义数据源 kendo 数据源的片段）：

```
 this.entityManager.executeQuery(query)
            .then(function (xhr) {
                if (self.autoMapToJS) { // Breeze entities contain recursive properties (ugh!) - eliminate those
                    payload.data = ko.mapping.toJS(xhr.results, {
                        ignore: ['entityAspect', 'entityType']
                    });
                } else {
                    payload.data = xhr.results;
                }
                if (self.inlineCount) {
                    payload.total = xhr.inlineCount;
                }
                options.success(payload); // notify the DataSource that the operation is complete
            })
            .fail(function (rejected) {
                payload.error = rejected;
            })
            .done(); // terminate chain of promises
    } 
```

特别是，尝试与网格（wijmo 和剑道）一起使用时，我被迫映射微风数据或享受堆栈溢出，因为这些控件将遍历属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:40:07.437

我还没有真正尝试过，但我认为你可以做到这一点

```
var js = ko.mapping.toJS(cust1, {
    ignore: ['entityAspect']
}); 
```

# facebook-php-sdk - facebook auth后cakephp没有登录

> ID：14222336
> 
> 赞同：1
> 
> 时间：2013-01-08T19:12:24.163
> 
> 标签：facebook-php-sdk, cakephp-2.1

当我使用 facebook-sdk 创建用户时，我没有让他在 facebook-login 后自动登录。用户创建运行良好，但没有登录。

Cakephp 和 facebook-sdk 是最新版本。这是我的帐户控制器：

```
 <?php

class AccountController extends AppController {

    public $uses = array('User');

    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('login');
        #$this->Auth->authenticate = array('Basic' => array('fields' =>array('username' => 'fb_id', 'password' => 'random')));

    }

    public function login() {
        $this->facebook = new Facebook(array(
            'appId' => '14549077xxxx',
            'secret' => '95a38f3xxxx',
            'cookie' => 'true'
        ));

        $user = $this->facebook->getUser();
        if($user){
            try{
                $params = array('next' => 'http://'.$_SERVER['HTTP_HOST'].'/account/logout');
                $this->Session->write('logoutLink', $this->facebook->getLogoutUrl($params));

                #if (!$this->Auth->user()) {
                    $fb_user = $this->facebook->api('/me');

                    $authUser = $this->User->findByFbId($user);

                    if (empty($authUser)) {
                        $pw = $this->__randomString();
                        $authUser = array(
                            'fb_id' => $user,
                            'random' => $pw,
                            'password' => $this->Auth->password($pw),
                            'email' => $fb_user['email'] 

                        );
                        $this->User->create();
                        $this->User->save($authUser);
                        $authUser = $this->User->findByFbId($user);
                    }

                    $this->Auth->authenticate = array(
                        'Form' => array(
                                'fields' => array('username' => 'fb_id', 'password' => 'random')
                        )
                    );

                    $this->Auth->login($authUser['User']);

                    $this->redirect($this->Auth->redirect());
                #}
            }catch(FacebookApiException $e){
                $user = NULL;
            }
        }
        if(empty($user)){
            $loginurl = $this->facebook->getLoginUrl(array(
                'scope'=> 'email,publish_stream,read_friendlists',
                'redirect_uri'  => 'http://'.$_SERVER['HTTP_HOST'].'/account/login',
                ));

            $this->redirect($loginurl);
        }
    }

    public function dashboard() {
        echo 'logged in';
    }
} 
```

用户将始终重定向到登录页面。$authUser 总是正确填写。

请帮助:)

问候米。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:54:20.947

我的应用控制器

```
class AppController extends Controller {

    public $components = array('Auth','Session');

    public function beforeFilter() {
        $this->Auth->loginRedirect = array('controller' => 'account', 'action' => 'dashboard');
        $this->Auth->logoutRedirect = '/';
        $this->Auth->loginAction = array('controller' => 'pages', 'action' => 'login');
    } 
```

会议：

```
Configure::write('Session', array(
        'defaults' => 'php'
    )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:21:55.823

聊天中解决的问题：

Facebook 正在创建一个新会话，

```
$this->facebook = new Facebook(array(
            'appId' => '14549077xxxx',
            'secret' => '95a38f3xxxx',
            'cookie' => 'true'
        )); 
```

这段代码必须写在 appcontroller

```
public function beforeFilter() {
        $this->Auth->loginRedirect = array('controller' => 'account', 'action' => 'dashboard');
        $this->Auth->logoutRedirect = '/';
        $this->Auth->loginAction = array('controller' => 'pages', 'action' => 'login');
        $this->facebook = new Facebook(array(
            'appId' => '14549077xxx',
            'secret' => '95a38f3xxx',
            'cookie' => 'true'
        ));

    } 
```

非常感谢@noslone 一起尝试：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:16:53.280

提供数据`$this->Auth->login($authUser['User']);`以登录用户是错误的。

根据 CakePHP 文档：

`In 2.0 $this->Auth->login($this->request->data) will log the user in with whatever data is posted, whereas in 1.3 $this->Auth->login($this->data) would try to identify the user first and only log in when successful.`

你应该这样做：

```
$this->request->data['User'] = $authUser['User'];
$this->request->data['User']['password'] = $authUser['User']['random'];

$this->Auth->login(); 
```

我还添加了`$this->request->data['User']['password'] = $authUser['User']['random'];`因为我认为在提供加密密码登录时无法进行身份验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T21:14:22.357

如果您有任何其他问题，我正在开发一个使用 Facebook oAuth 作为 Auth 组件的身份验证对象的插件。如果您想要使用服务器端 Facebook 登录的已构建解决方案，请查看我的网站： http: [//marianofino.github.com/Facebook-Plugin-for-CakePHP/](http://marianofino.github.com/Facebook-Plugin-for-CakePHP/)

# javascript - 使用自定义代码修改 Google 自定义搜索结果

> ID：14222341
> 
> 赞同：0
> 
> 时间：2013-01-08T19:12:39.683
> 
> 标签：javascript, google-search

我的网站上安装了 Google 自定义搜索引擎。我想修改搜索结果。我知道这可能会损害 ToS。

所以，首先，我想从每个搜索结果中删除一些字符串。这是我之前写的函数：

```
<script type="text/javascript">
setInterval("pakeisti()",100)
function pakeisti()
  {
    elem = document.getElementById("searchas");
    y = elem.getElementsByTagName("div");
    for (i=0; i< y.length; i++)
     {
          str = y[i].className;
      if (str.search("gs-title") != 0 ) {
        var newHTML = y[i].innerHtml;
        newHTML = newHTML.replace('STRING - ',' k');
        newHTML = newHTML.replace('<a','<p');
        newHTML = newHTML.replace('</a>','</p>');
        y[i].innerHtml = newHTML; }
     }
  }
</script> 
```

早些时候这个脚本有效，但现在它给了我错误： `Uncaught TypeError: Cannot call method 'replace' of undefined`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T20:09:07.830

That error is occurring because `y[i].innerHtml` is undefined.

To avoid the problem, change the `if` statement to this:

```
if (str.search("gs-title") != 0 && y[i].innerHtml != null) { 
```

You are probably experiencing this because you're using `String.search()` incorrectly in your `if` statement. If the search string does not appear in the target string, `.search()` will return `-1`, not 0\. (A response of 0 means that the string appears at the first character in the target.) So you probably meant:

```
if (str.search("gs-title") != -1 ... 
```

# vb.net - 从 Visual Studio 中的初始屏幕中删除边框

> ID：14222352
> 
> 赞同：1
> 
> 时间：2013-01-08T19:13:31.800
> 
> 标签：vb.net, winforms, visual-studio, visual-studio-2012

这里的标题几乎解释了一切。我在 Visual Studio 2012 中工作，我在 Photoshop 中创建了一个透明的闪屏。我将控件的背景设置为白色，并将透明度键也设置为白色。所以背景现在是透明的，但我仍然在整个图像/启动屏幕周围有一个边框。

我遇到的唯一问题是摆脱边界。如果必须，我可以忍受它，但我真的很想看到它没有边界。：） 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:16:33.980

将属性 formborderstyle 设置为无（或未装饰）

# delphi - 如何自动调整嵌套 TcxGroupBox 的大小

> ID：14222353
> 
> 赞同：0
> 
> 时间：2013-01-08T19:13:36.377
> 
> 标签：delphi, devexpress

我正在使用 DevExpress 2012 控件创建一个模拟纸质表单外观的应用程序，以便轻松输入数据。

表单的每个部分都是一个 TcxGroupBox。在每个 TcxGoupBox 内部可以有许多其他 TcxGroupBox 在同一级别和/或嵌套级别。

它们都带有 TcxGroupBox.Align = alTop

但是，根据数据的某些参数，可以隐藏某些组，这会导致其他组对齐到顶部，这是正确的。

我的问题是如何自动调整每个 TcxGroupBox 底部边框的大小。当一个组被隐藏时，同一级别的所有组都对齐到顶部，并且在底部将 - 保留隐藏组左侧的空间。它的父组没有 auto=resize 属性。当需要显示隐藏组并且父组需要调整大小以适应它时，反之亦然。

我正在使用德尔福 XE2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:40:54.987

您应该相应地设置每个 group boy 的 height 属性。我想这取决于可检查项目的数量和列数。使用这种方法的优点是您的所有行（即可检查项目）均等对齐。

尽管我喜欢自动对齐的可能性，但我倾向于自己在边界容器（面板、组框、表单、框架）的 OnResize-Event 中设置这些元素的大小和位置。

# .htaccess - .htaccess 检测谷歌浏览器

> ID：14222354
> 
> 赞同：0
> 
> 时间：2013-01-08T19:13:44.903
> 
> 标签：.htaccess, google-chrome

我需要在**.htaccess中****检测 Google Chrome**并禁止访问它。我得到了一些东西，但它需要一些修复：

 **```
RewriteCond %{HTTP_USER_AGENT} !^Chrome
RewriteRule .* - [F] 
```

它有一个错误 - 它阻止了一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:23:52.493

您在 Chrome 之前有一个否定 (！)，并且您告诉 UA 字符串以 Chrome 开头。我没有测试它，但我认为它是这样的：

```
 RewriteCond %{HTTP_USER_AGENT} Chrome
    RewriteRule .* - [F] 
```**

# html - 当 div 穿过特定位置时触发动画

> ID：14222359
> 
> 赞同：1
> 
> 时间：2013-01-08T19:14:07.540
> 
> 标签：html, jquery-animate, jquery

![在此处输入图像描述](../Images/d9a0d13cda99e8a5013316823e2e192d.png) 上图说明了我的情况。当用户单击按钮时，我正在`div`使用 Jquery`Animate()`函数将位置“A”[100,100] 移动到位置“C”[100,500]，在重新定位期间，`div`应该必须穿过位置“B”[100,250]。那时，当它穿过位置 B 时，我需要触发另一个动画。

与这个问题相关，我浏览了很多并找到[了这个](https://stackoverflow.com/questions/355015/jquery-event-to-detect-when-element-position-changes)链接。但它没有一个公认的答案。此外，Jquery 有一个名为 的事件`Change`，但不幸的是它只兼容`form elements`. 我的问题是，如果真的不存在，我们可以手动处理类似`postionChanged`或在 jquery 中的事件吗？`offsetChanged`或者有什么可行的方法可以满足我的需要。？

谢谢..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:19:19.030

您需要通过每一步测试动画并运行一个函数来测试位置。这来自 API 文档，可以轻松地重新用于您的动画。

```
$('li').animate({
  opacity: .5,
  height: '50%'
},
{
  step: function(now, fx) {
    var data = fx.elem.id + ' ' + fx.prop + ': ' + now;
    $('body').append('<div>' + data + '</div>');
  }
}); 
```

我为它做了一个小提琴。[http://jsfiddle.net/MatthewDavis/6g8aP/1/](http://jsfiddle.net/MatthewDavis/6g8aP/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:23:38.240

`jQuery.animate`采用支持以下方法的选项参数（来源）[http://api.jquery.com/animate/]

> step 类型：Function(Number now, PlainObject fx) 动画每一步后调用的函数。

在您的情况下，代码如下所示：

```
$('div').animate({
  left: 500
}, {
  step: function(now, fx){
    if (parseInt(now, 10) === 250){
      // call your animation method here.
    }
  }
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T19:46:19.097

这是一个可行的解决方案：我还使用了 step-event

**HTML**

```
<div id="#wrapper">
  <div class="left"></div>
  <div class="right"></div>
  <div class="dot"></div>
</div>
<button class="go">GO!</button> 
```

**CSS**

```
#wrapper {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}

.left, .right {
  position: absolute;
  top: 25px;

  width: 100px;
  height: 100px;
}
.left {
  z-index: 1;
  left: 25px;
  background-color: red;
}
.right {
  right: 25px;
  background-color: green;
}

.dot {
  position: absolute;
  top: 72.5px;

  width: 5px;
  height: 5px;
  left: 50%;
  margin-left: 2.5px;

  background-color: blue;
}

button.go {
  display: block;
  position: absolute;
  top: 150px;
  left: 25px;
} 
```

**jQuery**

```
var $left = jQuery('.left');
var $right = jQuery('.right');
var $button = jQuery('button.go');
var $dot = jQuery('.dot');

var rightPos = $right.offset().left;
var dotPos = $dot.offset().left;
var thread = undefined;
var animationStarted = false;

$button.click(function() {
  $left.animate({
    'left': rightPos
  }, {
    duration: 1000,
    specialEasing: {
      'left': 'easeOutQuad'
    },
    step: function(now, fx) {
      if (!animationStarted && now +$left.width() > dotPos) {
        if (thread) { clearTimeout(thread); }
        thread = setTimeout(function() {
          animation();
          animationStarted = true;
        }, 0);
      }
    },
    complete: function() {
      $(this).after('<div>Animation complete.</div>');
    }
  });
});

function animation() {
  $right.animate({
    'background-color': '#0000ff'
  }, {
    specialEasing: {
      'background-color': 'easeOutQuad'
    }
  });
}; 
```

请注意，我在 step-function 中使用 setTimeout 在另一个上下文中调用第二个动画。我不确定在一个正在运行的动画中运行*.animate()*调用是否很好。我认为，为了保持顺利，最好这样做。有没有人确切地知道它？

另一点是变量*animationStarted*。它只记得我们是否调用了第二个动画。这是确保不在其他动画的步骤事件中调用复杂动画的另一件事。通过这种方式，我们肯定只调用一次。

[演示](http://jsfiddle.net/algorhythm/vHdHR/)

# class - Mootools 类显示无

> ID：14222380
> 
> 赞同：0
> 
> 时间：2013-01-08T19:15:17.553
> 
> 标签：class, mootools, toggle

我需要你的帮助。我有这样的div。

```
<div class="blue red green"></div>
<div class="blue green"></div>
<div class="blue"></div> 
```

现在我想做一个过滤器。通过单击切换类蓝色来设置它并不难。过滤器看起来像这样

(x) 蓝色 (x) 红色 (x) 绿色

但如果它可以说。如果其中有多个蓝色类，则不要切换，并且如果禁用蓝色和绿色类时，则可能会禁用第二个 div。

发现这个 Jquery 可以用 mootools 实现吗？ [http://net.tutsplus.com/tutorials/javascript-ajax/creating-a-filterable-portfolio-with-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/creating-a-filterable-portfolio-with-jquery/)

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:05:02.473

查找只有“蓝色”类的元素

`$$('.blue')`

查找具有“蓝色”和“绿色”类的元素

`$$('.blue.green')`

要查找带有“蓝色”或“绿色”的元素，您只需搜索两次即可。

# java - 针对 XSD 验证 csv

> ID：14222381
> 
> 赞同：4
> 
> 时间：2013-01-08T19:15:21.753
> 
> 标签：java, xml, xsd, xml-validation

我们有一个扁平的 XSD，因此我们考虑以 CSV 格式存储数据，而不是以 XML 格式存储数据，因为数据可能非常庞大。假设我们从 XSD 知道 CSV 中每条记录的元素类型，有没有办法使用基于 Java 的 XML Validator 针对 XSD 验证 CSV 中的每条记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:50:49.163

Saxon XSD 验证器用作 SAX 过滤器，因此您可以通过发送表示输入的 XML 视图的 SAX 事件来进行验证。因此，您所需要的只是一个读取 CSV 文件并发出代表其内容的 SAX 事件的 Java 程序，其中 SAX 事件通过管道传送到 XSD 验证器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:54:21.643

一种方法是执行以下操作：

*   使用 JAXB 编译器从 XSD 创建 Java 类
*   使用类似于[Flatworm](http://flatworm.sourceforge.net/)的产品自动/声明式地将您的记录（或整个文件）解析为上面创建的 Java 类，或者简单地手动等。
*   使用一种方法，例如[在 SO](https://stackoverflow.com/questions/1560422/how-to-validate-against-schema-in-jaxb-2-0-without-marshalling/13360785#13360785)上发布的方法来验证您的图表。只要确保您适当地缓存，即重用验证器和 JAXBContext 对象。

考虑到请求的性质，编组到 XML（即使作为 JAXBSource）所产生的开销是不可避免的。您可以做的就是充分利用它...如果 CPU 带宽不是问题，您可以尝试并行化以提高吞吐量（每个线程需要一个验证器，上次我使用 JAXBContent 时它是线程安全的）。而且我会避免加载整个文件，如果有人认为所有记录的 XSD（如与记录匹配的元素将是具有 maxOccurs="unbounded" 的粒子）将是一种更有效的验证方式......对于大文件，您将耗尽内存，很可能......

对于大量数据，使用 XSD 可以被标记为优雅，但效率不高。对于在寻找 .NET 解决方案时遇到这篇文章的人来说，通过调用[XmlSchemaDatatype.ParseValue来验证](http://msdn.microsoft.com/en-ca/library/4t690ysw.aspx)**单个**字段的效率更高（假设 XSD 没有跨字段约束等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:33:47.793

“平面 XSD”和“每条记录的元素类型”是什么意思？显然，在将非 XML 格式提供给期望 XML 输入的验证器时，涉及到一些转换或适应过程。因此，所有相关名称都必须可用。

特别是，除非您有额外的列（通常在行的开头），否则您将没有空间对与整行对应的元素的名称进行编码。这与第一行中其他列的名称是子元素（上）还是属性（下）无关。

那么，假设该名称对适配器可用，那么您的“平面 XSD”是什么样的？如果此元素是架构的根或顶级元素（即架构*仅*描述一行），那么您将必须使用新的顶级元素扩展架构以充当一系列行的容器，这是您的 CSV 文件。换句话说，不是将每一行验证为单独的 XML 文档，您应该将整个 CSV 文件（经过转换或以其他方式改编）验证为单个 XML 文档。

如果您的验证器可以接受管道输入，那么您只需要使用任何方便的脚本语言编写的 CSV 到 XML 转换器。

# php - 加快数组比较

> ID：14222384
> 
> 赞同：2
> 
> 时间：2013-01-08T19:15:31.330
> 
> 标签：php

我有两个多维数组，都包含电子邮件地址数据，但不同的键，我试图比较。我需要获取两个数组中都不存在的所有电子邮件地址，并将它们存储起来。有没有办法可以加快速度？

$accts: id、Email、column1 - 13000 行

$db_accts: id1, name, accountID,Email_Address__c - 17000 行

现在我有

```
foreach($accts as $acct){
    $exists = false;
    foreach($db_accts as $db_acct){
        if($acct['Email'] == $db_acct['Email_Address__c'])
        {   $exists = true;}
    }

    if(!$exists)
    {   $update[] = array('Email'=>$acct['Email'],'column1'=>'');
    }

}

foreach($db_accts as $db_acct){
    $exists = false;
    foreach($accts as $acct){
        if($acct['Email'] == $db_acct['Email_Address__c'])
            $exists = true; 
    }
    if(!$exists)
    {
        $update[] = array('Email'=>$db_acct['Email_Address__c'],'column1'=>'Y');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:18:46.230

您可能可以使用 array_diff 加快速度：http: [//de3.php.net/array_diff](http://de3.php.net/array_diff)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:19:01.930

使用[array_diff()](http://us2.php.net/array_diff)。

看文档，例子真的很清楚。您输入两个数组并`array_diff()`吐出不同的数组。在您的情况下，两个数组中都不包含的电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:19:06.010

使用您自己的 PHP 代码比使用标准 PHP 函数要慢得多。PHP 的标准函数在较低级别上运行，因此开销较小。使用诸如[array_diff](http://php.net/manual/en/function.array-diff.php)之类的函数会更有效率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T19:34:47.640

您应该使用`array_udiff`它，因为它允许您自定义比较：

```
array_udiff($accts,$db_accts,function($act,$dbact){
     return strcasecmp($act['Email'], $db_act['Email_Address__c']);
 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-14T16:24:26.560

### 用手

从算法上讲，您正在做的是`O(|accts| * |db_accts|)`.

您可以通过电子邮件对两个帐户进行排序，这需要`O(|accts| * log(|accts|)) + O(|db_accts| * log(|db_accts|))`. 那么，你可以

1.  从两者的第一个元素开始，
2.  相比
3.  如果 的元素`accts`较大，则将其存储并迭代到中的下一个元素`accts`
4.  同样，如果 的元素`db_accts`更大
5.  如果两者相同，则在不存储的情况下对其进行迭代。
6.  goto 3\. 如果还有元素

比较应该采取`O(|accts| + |db_accts|)`。如果您通过电子邮件从 DB 对它们进行排序，则将省略上面的排序步骤。否则，它是`O(n log(n))`，它比 小得多`O(n^2)`。

这应该会在您的数据集中加速大约 1000 ( `log(17000) vs 13000`)。

对于 PHP 中的排序，请查看[Sort Multi-dimensional Array by Value](https://stackoverflow.com/questions/2699086/sort-multi-dimensional-array-by-value)。

对于 SQL，请参阅[MySQL“分组依据”和“排序依据”](https://stackoverflow.com/questions/1066453/mysql-group-by-and-order-by)。

### 通过 PHP

您可以将[array_diff() 与多维数组一起](https://stackoverflow.com/questions/11821680/array-diff-with-multidimensional-arrays)使用。

# c# - 方法“GetTouchPoint”没有重载需要 0 个参数

> ID：14222387
> 
> 赞同：1
> 
> 时间：2013-01-08T19:15:39.383
> 
> 标签：c#, touch, pixelsense

我正在使用 PixelSense2.0 为 Sur40 开发应用程序。我正在尝试捕获触摸输入，但它一直为我提供相同的错误：`No overload for method 'GetTouchPoint' takes 0 arguments`.

到目前为止，这是我的代码：

```
 void SurfaceWindow1_Loaded(object sender, RoutedEventArgs e)
    {

        this.TouchDown += new EventHandler<TouchEventArgs>(SurfaceWindow1_TouchDown);

    }

    void SurfaceWindow1_TouchDown(object sender, TouchEventArgs e)
    {
        LoadAnimationControl2 ani1 = new LoadAnimationControl2();
        ani1.Margin.Left = e.GetTouchPoint().Position.X;
        ani1.Margin.Bottom = e.GetTouchPoint().Position.Y;
        MainGrid.Children.Add(ani1);
    } 
```

有没有人建议如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:19:17.877

GetTouchPoint() 有一个必需的输入参数。没有不使用参数的方法签名。您需要将 IInputElement 作为参数传递给该方法。

[**GetTouchPoint() MSDN 参考页**](http://msdn.microsoft.com/en-us/library/system.windows.input.toucheventargs.gettouchpoint.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T19:19:49.263

好吧，根据[文档](http://msdn.microsoft.com/en-us/library/system.windows.input.toucheventargs.gettouchpoint.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)：

```
public TouchPoint GetTouchPoint(
    IInputElement relativeTo
) 
```

它需要一个`IInputElement`which is: `The element that defines the coordinate space.`
并返回： `The current position of the touch device relative to the specified element.`

因此，您需要做的是传递您的“屏幕”或任何正确的术语来获取正在查看的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T19:20:54.550

```
void SurfaceWindow1_TouchDown(object sender, TouchEventArgs e)
{
    LoadAnimationControl2 ani1 = new LoadAnimationControl2();
    ani1.Margin.Left = e.GetTouchPoint(this).Position.X;
    ani1.Margin.Bottom = e.GetTouchPoint(this).Position.Y;
    MainGrid.Children.Add(ani1);
} 
```

# android - 在 FUNF 中实现 BundleTypeAdapter

> ID：14222394
> 
> 赞同：0
> 
> 时间：2013-01-08T19:15:59.443
> 
> 标签：android, bundle, gson

所以我希望通过实现我在[FUNF 项目中找到的这个](http://code.google.com/p/funf-open-sensing-framework/)[bundletypeadapter](http://code.google.com/p/funf-open-sensing-framework/source/browse/src/edu/mit/media/funf/json/BundleTypeAdapter.java?r=71115afe99f4696ef81f3209b3da37bd9aa4b626)来使用 gson 将 bundle 对象转换为 json 。

我的问题是我不完全确定如何正确实现该代码块。目前对我来说有意义的唯一方法会导致循环依赖。

你通常如何实现一个新的 TypeAdapter：

```
...
GsonBuilder gsonBuilder = new GsonBuilder();
gsonBuilder.registerTypeAdapter(Location.class, new LocationDeserializer());
gsonBuilder.registerTypeAdapter(Location.class, new LocationSerializer());
Gson gson = gsonBuilder.create(); 
... 
```

或者，在这种情况下我会期望什么：

```
...
GsonBuilder gsonBuilder = new GsonBuilder();
gsonBuilder.registerTypeAdapter(Bundle.class, new BundleTypeAdapter());
Gson gson = gsonBuilder.create();
... 
```

我的问题是 BundleTypeAdapter 拥有的唯一构造函数是 BundleTypeAdapter(Gson gson) ，我不太确定如何传入一个我尚未创建或实例化的对象......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:27:21.017

Gson 为您描述的情况提供了一个解决方案，[TypeAdapterFactory](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/TypeAdapterFactory.html)。BundleTypeAdapter 在名为 FACTORY 的静态成员变量中为您定义所需的工厂。要使用它，请致电：

```
gsonBuilder.registerTypeAdapterFactory(BundleTypeAdapter.FACTORY); 
```

# iphone - 键盘滑出导致 UIWebView 向左移动

> ID：14222398
> 
> 赞同：10
> 
> 时间：2013-01-08T19:16:18.953
> 
> 标签：iphone, ios, uiwebview

我的应用程序由全屏驱动`UIWebView`。它工作得很好，除非当键盘被调出时，视图被移动了大约 10 个像素，留下了一个白色的间隙（见下面的截图）。

有谁知道是什么原因造成的，是否有任何解决方案或解决方法？

更新：更具体地说，`UIWebView`不是转移，而是 HTML 内容转移。

![在此处输入图像描述](../Images/88ff1cef505995ab732e359cef3d19b6.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T22:22:13.260

您可以尝试禁用 webview 的缩放：

```
webview.scrollView.delegate = self;

-(UIView*)viewForZoomingInScrollView:(UIScrollView*)scrollView {
return nil;
} 
```

# java - Maven：如何获取配置文件以从父 pom 继承 dependencyManagement 标记？

> ID：14222413
> 
> 赞同：2
> 
> 时间：2013-01-08T19:17:05.417
> 
> 标签：java, maven, maven-3, wsgen

我在其自己的配置文件中运行[wsgen](http://mojo.codehaus.org/jaxws-maven-plugin/wsgen-mojo.html)，因为我不希望它在每次构建产品时都运行。但是当我运行它时，我收到一个关于缺少版本的错误：

> $ mvn package -P wsgen [INFO] 正在扫描项目... [错误] 构建无法读取 1 个项目 -> [帮助 1] [错误] [错误] 项目 project-ejb:2.3.15-SNAPSHOT (C :\Projects\MyProject\pom.xml) 有 1 个错误 [ERROR]
> 'build.plugins.plugin[org.jvnet.jax-ws-commons:jaxws-maven-plugin].dependencies.dependency.version' 用于 org.glassfish :javax.javaee:jar 丢失。@ 第 167 行，第 41 列 [错误] [错误] 要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven。[错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。[ERROR] [ERROR] 有关错误和可能的解决方案的更多信息，请阅读以下文章： [ERROR] [Help 1] [http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException](http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException)

这是子 pom 的片段（带有配置文件的 pom）：

```
<packaging>ejb</packaging>
<parent>
    <artifactId>MyProject</artifactId>
    <groupId>project</groupId>
    <version>2.3.15-SNAPSHOT</version>
</parent>
<profiles>
    <profile>
        <id>wsgen</id>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.jvnet.jax-ws-commons</groupId>
                        <artifactId>jaxws-maven-plugin</artifactId>
                        <version>2.1</version>
                        <executions>
...
                </executions>
                <dependencies>
                    <dependency>
                        <groupId>org.glassfish</groupId>
                        <artifactId>javax.javaee</artifactId>
                    </dependency>
                </dependencies>
            </plugin>
        </plugins>
    </build>
</profile> 
```

但是，在父 pom 中，我使用`dependencyManagement`标签下的版本定义了这个依赖项。

我认为正在发生的事情是配置文件没有继承父`dependencyManagement`标签，因此它认为依赖项缺少版本号。有没有办法让配置文件从父母那里继承这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:24:21.190

`dependencyManagement``dependencies`在**pom 和 child poms**中申请。它不适用于`dependencies`插件**（**至少，这是我在几个插件中注意到的，比如 maven-dependency-plugin）。

`javax.javaee.version`一个可能的解决方案是在您的父 pom 中定义一个属性 ( ) 并在您的`dependencyManagement`和您的**jaxws-maven-plugin 插件**中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:13:58.960

您可以使用[<pluginManagement>](http://maven.apache.org/pom.html#Plugin_Management)标签在父 pom 中配置插件，让它成为它的版本号、阶段、目标或其他配置。

所有继承的 pom 都将具有与父 pom 相同的配置，只要您在子 pom 中声明相同的`<groupId>`配置`<artifactId>`。

# python - 如何将多处理与多线程一起使用？

> ID：14222415
> 
> 赞同：4
> 
> 时间：2013-01-08T19:17:10.017
> 
> 标签：python, multithreading, multiprocessing, cherrypy

CherryPy 服务器使用线程来处理请求。我的线程服务器中的一种特定方法非常复杂且占用大量 CPU，因此我必须从方法请求线程内部使用多处理来并行化执行。

我以为我只是更换

```
class Server(object)
    @cherrypy.expose
    def expensive_method(self):
        ...
        x = map(fnc, args)
        ...

def fnc(args):
    # this method doesn't need CherryPy but is expensive to compute
    ...

cherrypy.quickstart(Server()) 
```

（效果很好）与

```
 def expensive_method(self):
        pool = Pool()
        x = pool.map(fnc, args)
        pool.terminate() 
```

但这不起作用。即使在更简单的情况下，当我根本不使用游泳池时，

```
 def expensive_method(self):
        pool = Pool()
        x = map(fnc, args) # <== no pool here! same as the working example
        pool.terminate() 
```

我得到一个例外

```
[08/Jan/2013:20:05:33] ENGINE Caught signal SIGTERM.
2013-01-08 20:05:33,919 : INFO : _cplogging:201 : error(CP Server Thread-3) : [08/Jan/2013:20:05:33] ENGINE Caught signal SIGTERM.
[08/Jan/2013:20:05:33] ENGINE Bus STOPPING
2013-01-08 20:05:33,920 : INFO : _cplogging:201 : error(CP Server Thread-3) : [08/Jan/2013:20:05:33] ENGINE Bus STOPPING
[08/Jan/2013:20:05:38] ENGINE Error in 'stop' listener <bound method Server.stop of <cherrypy._cpserver.Server object at 0x1090c3c90>>
Traceback (most recent call last):
  File "/Volumes/work/workspace/vew/prj/lib/python2.7/site-packages/cherrypy/process/wspbus.py", line 197, in publish
    output.append(listener(*args, **kwargs))
  File "/Volumes/work/workspace/vew/prj/lib/python2.7/site-packages/cherrypy/process/servers.py", line 223, in stop
    wait_for_free_port(*self.bind_addr)
  File "/Volumes/work/workspace/vew/prj/lib/python2.7/site-packages/cherrypy/process/servers.py", line 410, in wait_for_free_port
    raise IOError("Port %r not free on %r" % (port, host))
IOError: Port 8888 not free on '127.0.0.1' 
```

我认为这发生在请求结束时，之后或期间`pool.terminate()`。

分叉的工作进程不会对服务器或端口做任何事情。有没有办法告诉 CherryPy 和/或多处理忽略“服务器位”？我不需要任何端口或套接字`fnc`。

我需要它在 OSX + Linux 上工作，使用 Python 2.7.1 和 CherryPy 3.2.2。

* * *

进展一：

根据 Sylvain 的建议，我尝试了`pool = Pool(initializer=cherrypy.server.unsubscribe)`. 没有更多的例外，一切正常，但在日志中我看到

```
[08/Jan/2013:21:16:35] ENGINE Caught signal SIGTERM.
2013-01-08 21:16:35,908 : INFO : _cplogging:201 : error(CP Server Thread-10) : [08/Jan/2013:21:16:35] ENGINE Caught signal SIGTERM.
[08/Jan/2013:21:16:35] ENGINE Bus STOPPING
2013-01-08 21:16:35,909 : INFO : _cplogging:201 : error(CP Server Thread-10) : [08/Jan/2013:21:16:35] ENGINE Bus STOPPING
[08/Jan/2013:21:16:35] ENGINE Bus STOPPED
2013-01-08 21:16:35,909 : INFO : _cplogging:201 : error(CP Server Thread-10) : [08/Jan/2013:21:16:35] ENGINE Bus STOPPED
[08/Jan/2013:21:16:35] ENGINE Bus EXITING
2013-01-08 21:16:35,909 : INFO : _cplogging:201 : error(CP Server Thread-10) : [08/Jan/2013:21:16:35] ENGINE Bus EXITING
[08/Jan/2013:21:16:35] ENGINE Bus EXITED
2013-01-08 21:16:35,910 : INFO : _cplogging:201 : error(CP Server Thread-10) : [08/Jan/2013:21:16:35] ENGINE Bus EXITED 
```

这样好吗？这会带来任何麻烦吗（例如，同时在不同线程中服务多个请求时）？

* * *

进展 2：

实际上上面偶尔会留下空闲进程:(所以它不能正常工作。奇怪的是，这些空闲进程是由 产生的`Pool`，所以它们应该是守护进程，但即使在杀死父进程后它们实际上仍然活着。

* * *

进展 3：

我将分叉（=`Pool()`调用）移到了请求处理方法之外，但是*在*初始化了所有必要的状态之后（以便工作进程可以看到这个状态）。没有更多的错误或异常。

底线：多处理和多线程不能一起工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:41:59.777

“自我”指的是哪种类型的对象？你在什么时候初始化并开始你的分叉进程？也许更多的代码将有助于诊断问题。

好的，这很好用：

```
import multiprocessing
import os
import time

import cherrypy

def run_in_sub_proc(size):
    for i in range(size):
        print os.getpid(), i
        time.sleep(1)

pool = multiprocessing.Pool(2)

class Root(object):
    @cherrypy.expose
    def index(self):
        pool.map_async(run_in_sub_proc, (3, 5))

if __name__ == '__main__':
    cherrypy.engine.subscribe('stop', pool.join)
    cherrypy.quickstart(Root()) 
```

# python - Python中的递归？RuntimeError：调用 Python 对象时超出最大递归深度

> ID：14222416
> 
> 赞同：18
> 
> 时间：2013-01-08T19:17:17.537
> 
> 标签：python, recursion, runtime-error, simulation, vpython

> **可能重复：**
> [最大递归深度？](https://stackoverflow.com/questions/3323001/maximum-recursion-depth)

我的代码还有另一个问题。我正在用 Vpython 编写我的第一个程序，我必须模拟混合两种气体。首先，我遇到了边界问题，但是现在当球（代表气体粒子）停留在边界内时，就会出现不同的错误。几秒钟后，我收到一个错误，显示在我的函数源代码下方。

代码：

```
def MovingTheBall(listOfBalls,position,numCell,flagOfExecution):
    flag = 0
    if flagOfExecution==0:
        positionTmp = position
    else:
        positionTmp = (position[0]+choice([-1,0,1]),position[1]+choice([-1,0,1]),0)
    for i in range( 0, len(listOfBalls) ):
        if positionTmp==listOfBalls[i].pos:
            flag=1

    if flag==1:
        return MovingTheBall(lista,(position[0]+choice([-1,0,1]),position[1]+choice([-1,0,1]),0),numCell,1)
    else:
        if positionTmp[0]==0 or positionTmp[0]>=numCell or positionTmp[0]<=-numCell or positionTmp[1]>=numCell or positionTmp[1]<=-numCell:
            return MovingTheBall(lista,(position[0]+choice([-1,0,1]),position[1]+choice([-1,0,1]),0),numCell,1)

        return positionTmp 
```

错误是：

```
 return MovingTheBall(listOfBalls,(position[0]+choice([-1,0,1]),position[1]+choice([-1,0,1]),0),numCell,1)
  File "gaz.txt", line 138, in MovingTheBall
    return MovingTheBall(listOfBalls,(position[0]+choice([-1,0,1]),position[1]+choice([-1,0,1]),0),numCell,1)
  File "gaz.txt", line 138, in MovingTheBall
    return MovingTheBall(listOfBalls,(position[0]+choice([-1,0,1]),position[1]+choice([-1,0,1]),0),numCell,1)
  File "gaz.txt", line 138, in MovingTheBall
    return MovingTheBall(listOfBalls,(position[0]+choice([-1,0,1]),position[1]+choice([-1,0,1]),0),numCell,1)
  File "gaz.txt", line 138, in MovingTheBall
    return MovingTheBall(listOfBalls,(position[0]+choice([-1,0,1]),position[1]+choice([-1,0,1]),0),numCell,1)
  File "gaz.txt", line 138, in MovingTheBall
    return MovingTheBall(listOfBalls,(position[0]+choice([-1,0,1]),position[1]+choice([-1,0,1]),0),numCell,1)
  File "gaz.txt", line 130, in MovingTheBall
    if positionTmp==listOfBalls[i].pos:
RuntimeError: maximum recursion depth exceeded while calling a Python object 
```

有人能想出一种方法来简化我的功能吗？

我在循环中运行它：

```
while 1:
        rate(20)
        for i in range(0,len(self.listOfBalls)):
            self.listOfBalls[i].pos=poruszanie(self.listOfBalls,self.listOfBalls[i].pos,self.numCell,0) 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-08T19:45:38.573

Python 缺乏函数式语言（如 lisp）中常见的尾递归优化。在 Python 中，递归限制为 999 次调用（请参阅[sys.getrecursionlimit](http://docs.python.org/2/library/sys.html#sys.getrecursionlimit)）。

如果 999 深度超出您的预期，请检查实现是否缺少停止递归的条件，或者此测试在某些情况下是否错误。

我敢说，在 Python 中，纯递归算法的实现是不正确/不安全的。限制为 999 的 fib() 实现并不真正正确。将递归转换为迭代总是有可能的，这样做是微不足道的。

它不经常达到，因为在许多递归算法中，深度往往是对数的。如果您的算法不是这种情况，并且您希望递归比 999 调用更深，那么您有两种选择：

1）您可以更改递归限制，`sys.setrecursionlimit(n)`直到您的平台允许的最大值：

> `sys.setrecursionlimit(limit)`：
> 
> 将 Python 解释器堆栈的最大深度设置为限制。此限制可防止无限递归导致 C 堆栈溢出和 Python 崩溃。
> 
> 可能的最高限制取决于平台。当用户有一个需要深度递归的程序和一个支持更高限制的平台时，她可能需要将限制设置得更高。这应该小心完成，因为过高的限制会导致崩溃。

2）您可以尝试将算法从递归转换为迭代。如果递归深度大于您的平台允许的深度，这是解决问题的唯一方法。互联网上有分[步说明，](http://blog.moertel.com/posts/2013-05-11-recursive-to-iterative.html)对于受过一些 CS 教育的人来说应该是一个简单的操作。如果您对此有疑问，请发布一个新问题，以便我们提供帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-08T20:10:47.067

我已将递归更改为迭代。

```
def MovingTheBall(listOfBalls,position,numCell):
while 1:
    stop=1
    positionTmp = (position[0]+choice([-1,0,1]),position[1]+choice([-1,0,1]),0)
    for i in range(0,len(listOfBalls)):
        if positionTmp==listOfBalls[i].pos:
            stop=0
    if stop==1:
        if (positionTmp[0]==0 or positionTmp[0]>=numCell or positionTmp[0]<=-numCell or positionTmp[1]>=numCell or positionTmp[1]<=-numCell):
            stop=0
        else:
            return positionTmp 
```

效果很好：D

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-08T19:40:00.980

错误是堆栈溢出。这应该在这个网站上敲响警钟，对吧？发生这种情况是因为对 的调用`poruszanie`导致对 的另一个调用`poruszanie`，递归深度增加 1。第二次调用导致对同一函数的另一个调用。这种情况一遍又一遍地发生，每次都会增加递归深度。

现在，程序的可用资源是有限的。每个函数调用在所谓的堆栈顶部占用一定量的空间。如果达到最大堆栈高度，则会出现堆栈溢出错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T20:03:30.560

这就是当函数对自身进行太多递归调用时会出现的错误。这样做可能是因为基本情况从未满足（因此它陷入了无限循环），或者只是通过对其自身进行大量调用。您可以用 while 循环替换递归调用。

# asp.net - 使用 VB.NET 在 ASP.NET 中的 gridview 中没有任何内容时隐藏

> ID：14222418
> 
> 赞同：2
> 
> 时间：2013-01-08T19:17:30.857
> 
> 标签：asp.net, database, data-binding, gridview

当 gridview 为空时，我试图在表中隐藏一个名为 ImportnatInfo 的 TD。这个gridview 有一个来自数据库表的列来显示。当这个 gridview 为空时，我想隐藏 TD。

下面是asp代码：

```
<td runat ="server" ID="ImportnatInfo" 
                style="width: inherit; border: 5px double #585858; padding-left: 5px; padding-right: 5px;
                height: inherit; background: #FFFFFF; background-position: center; border-radius: 25px;" 
                enableviewstate="True" visible="False">
                <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" BorderStyle="None"
                    DataSourceID="ImportantSqlDataSource">
                    <Columns>
                        <asp:BoundField DataField="Importatnat_Info" SortExpression="Importatnat_Info">
                            <ControlStyle BorderStyle="None" Height="10px" />
                            <FooterStyle BorderStyle="None" Height="10px" />
                            <HeaderStyle BorderStyle="None" Height="10px" />
                            <ItemStyle BorderStyle="None" Height="10px" HorizontalAlign="Center" VerticalAlign="Middle" />
                        </asp:BoundField>
                    </Columns>
                </asp:GridView>
                <asp:SqlDataSource ID="ImportantSqlDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:AgainConnectionString %>"
                    SelectCommand="SELECT [Importatnat_Info] FROM [StationInfoTable] WHERE ([StationNo] = @StationNo)">
                    <SelectParameters>
                        <asp:ControlParameter ControlID="ddlStationNames" Name="StationNo" PropertyName="SelectedValue"
                            Type="Int32" />
                    </SelectParameters>
                </asp:SqlDataSource>
                <br />
            </td> 
```

VB.net 代码如下：

```
If GridView1.Rows.Count = 0 Then
        ImportnatInfo.Visible = False
    Else
        ImportnatInfo.Visible = True
    End If 
```

我有下拉列表，我每次都选择一些东西，所以如果网格中没有任何东西可以查看，我希望整个 TD 不可见。我试图在它为空时隐藏的 TD，TD 的东西总是可见的，因为当 gridView Vb 中没有任何内容时，它不会为空。所以我想我应该使用数据源，但仍然不知道该怎么做。知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:36:19.980

检查行的类型（通过`row.RowType`）；它可能不是数据行，而是空行或标题行或其他内容。因此，您需要确保 ItemType 为 Item 或 AlternateItem 的行是您计数的类型。[您可以在此处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.rowtype.aspx)查看有关此属性的更多详细信息。

**编辑：**您可以使用 LINQ 过滤适当类型的结果：

```
Dim cnt = GridView1.Rows.Where( _
  Function(i) i.RowType = DataControlRowType.Item OrElse _
              i.RowType = DataControlRowType.AlternateItem).Count()
If cnt = 0 Then
    ImportnatInfo.Visible = False
Else
    ImportnatInfo.Visible = True
End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T03:44:12.193

尝试连接到数据源的[Selected](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.selected.aspx)事件

```
<asp:SqlDataSource ID="ImportantSqlDataSource" OnSelected="SqlDataSource1_Selected" runat="server" ConnectionString="<%$ ConnectionStrings:AgainConnectionString %>"
  SelectCommand="SELECT [Importatnat_Info] FROM [StationInfoTable] WHERE ([StationNo] = @StationNo)">
  <SelectParameters>
        <asp:ControlParameter ControlID="ddlStationNames" Name="StationNo" PropertyName="SelectedValue" Type="Int32" />
  </SelectParameters> 
```

笔记**`OnSelected="SqlDataSource1_Selected"`**

然后在你的代码后面

```
Protected Sub SqlDataSource1_Selected(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.SqlDataSourceStatusEventArgs) Handles SqlDataSource1.Selected
    ImportnatInfo.Visible = e.AffectedRows > 0

End Sub 
```

即使没有返回数据，您的网格视图也可能有行：页眉、页脚和/或现在找到数据的消息。

**更新**

还可以尝试以下

```
Protected Sub SqlDataSource1_Selected(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.SqlDataSourceStatusEventArgs) Handles SqlDataSource1.Selected
    ImportnatInfo.Visible = e.AffectedRows > 0
    Gridview1.Visible = e.AffectedRows > 0

End Sub 
```

这也应该将 gridview 设置为在没有行时不显示，无论`td`. 我也会尝试将您的数据源移到`td`它不应该产生影响的范围之外，但它可能会。

如果在尝试此操作后，如果 gridview 被隐藏，但 td 仍然可见，则可能在页面生命周期的后期发生影响 td 可见性的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T15:09:42.283

```
 GridView1.DataBind()
    ImportantInfo.Visible = True
    If GridView1.Rows.Count = 1 Then
        If GridView1.Rows(0).Cells.Count = 1 Then
            If GridView1.Rows(0).Cells(0).Text.Trim() = "&nbsp;" Then
                ImportantInfo.Visible = False

            End If

        End If
    Else
        ImportantInfo.Visible = False
    End If 
```

当 GridView 中没有任何内容时，ASP.NET 总是留下一个空格。所以，我检查它是否为空，如果不是，我检查它是空间还是 GridView 有一些数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T14:32:42.870

```
 GridView1.DataBind()
    ImportnatInfo.Visible = True
    If GridView1.Rows.Count >= 1 Then
        If GridView1.Rows(0).Cells.Count >= 1 Then
            If GridView1.Rows(0).Cells(0).Text.Trim() = "&nbsp;" Then
                ImportnatInfo.Visible = False
            Else
                ImportnatInfo.Visible = True
            End If
        End If
    Else
        ImportnatInfo.Visible = False
    End If 
```

您的运行良好，但您只需要添加 Else 以在您检查它不是后显示 TD

# ruby-on-rails - 让 Actionmailer 发送电子邮件

> ID：14222419
> 
> 赞同：0
> 
> 时间：2013-01-08T19:17:33.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer

我问了一个类似的问题并得到了很大的帮助，它澄清了一些理解和概念。这是第一次使用actionmailer，所以我试图更好地理解

我想要实现的是将电子邮件发送给单击提醒我按钮的用户。这是一个简单的图书馆应用程序，用户可以在其中签出，签入并在重新签入书籍时请求提醒。我只是在逻辑的最后一部分上苦苦挣扎，一旦我看到它工作我相信我会理解更好

因此，当一本书的 check_out 状态发生变化时，书籍模型会出现各种帖子

```
Check out

<%= form_for @book do |f| %>
<%= f.label :checked_out, "Check Book Out?" %>
<%= f.check_box :checked_out, {}, true %>
<%= f.hidden_field :user_id, :value => current_user.id %>
<%= f.hidden_field :checked_out, :value => true %>
<%= f.submit 'Checkout' %>
<% end %>

Check In

<%= form_for @book do |f| %>
<%= f.label :checked_out, "Check Book Back In" %>
<%= f.check_box :checked_out, {checked: false}, false  %>
<%= f.hidden_field :user_id, :value => nil %>
<%= f.hidden_field :checked_out, :value => false %>
<%= f.submit 'Check In' %>
<% end %>

Register Interest

<%= form_for @book do |f| %>
<%= f.label :remind_me, "let Me know when book back in" %>
<%= f.check_box :remind_me, {checked: false}, false  %>
<%= f.hidden_field :remind_me, :value => current_user.id %>
<%= f.submit 'Remind Me' %>
<% end %> 
```

在我的图书模型中，我有这个逻辑来识别当一本书在发出提醒我请求后重新签入时，会发送一封电子邮件通知用户该书已回到图书馆

```
after_save :reminder_mailer

def reminder_mailer
if !self.checked_out && self.changes[:user_id] && self.user.nil?
ReminderMailer.remind_email(@user).deliver
end 
```

和我的行动邮件

```
class ReminderMailer < ActionMailer::Base
default from: "my email address"

def remind_email(user)
@user = user
mail(:to => user.email, :subject => "Library Clerk")

end
end 
```

正如您可能看到的那样，我正在为发送提醒我请求的用户电子邮件而苦苦挣扎。当发出提醒我请求时，我将 users_id 发布到列提醒我。我有一个单独的用户模型（设计）..

我的问题的一部分是当 users_id 发布到提醒我列时它只是一个常规整数而不链接到 users_id？

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:54:51.243

您可以创建一个`Reminder`模型（和数据库中的表）来跟踪用户设置的提醒

```
class Reminder < ActiveRecord::Base
  belongs_to :user
  belongs_to :book
end

class Book < ActiveRecord::Base
  has_many :reminders
end 
```

在书旁边显示一个按钮，确保添加`@reminder = Reminder.new`到呈现以下表单的操作中。

```
<%= form_for @reminder do |f| %>
<%= f.label :remind_me, "let Me know when book back in" %>
<%= f.hidden_field :book_id, :value => @book.id %>
<%= f.submit 'Remind Me' %>
<% end %> 
```

您将拥有一个提醒控制器，（添加`resources :reminders, only: [:create]`到 routes.rb）

```
class RemindersController < ApplicationController
  def create
    @book = Book.find(params[:reminder][:book_id])
    Reminder.create(user: current_user, book_id: @book.id)
    redirect_to @book
  end
end 
```

然后在`after_save`你的书模型中，你会向所有有这本书提醒的用户发送电子邮件

```
def reminder_mailer
  if !self.checked_out && self.changes[:user_id] && self.user.nil?
    # get all users waiting for a remind on this book
    @users = self.reminders.map(&:user)
    @users.each do |user|
      ReminderMailer.remind_email(user).deliver
    end
    # remove reminders as users have been reminded
    self.reminders.destroy_all
  end
end 
```

**注意：**确保您添加了一个验证，即没有用户会请求提醒同一本书。

# matlab - MATLAB 用对数符号求解系统 -- 为什么求解器找不到解？

> ID：14222421
> 
> 赞同：1
> 
> 时间：2013-01-08T19:17:38.003
> 
> 标签：matlab, solver, logarithm, equation-solving

我试图以符号方式求解对数方程组（因此估计的系数是弹性​​），但 matlab 告诉我“找不到显式解决方案”。任何想法为什么？

```
syms a1 a2 b1 c1 c2 e1 e2 S1 D1 P1 S2 D2 P2 Pinput;

eq1 = -log(S1) + a1*log(P1) + a2*log(Pinput);
eq2 = -log(S2) + b1*log(P2);
eq3 = -log(D1) + c1*log(P1) + c2*log(P2);
eq4 = -log(D2) + e1*log(P2) + e2*log(P1);
eq5 = -S1 + D1;
eq6 = -S2 + D2;

ans2 = solve(eq1,eq2,eq3,eq4,eq5,eq6,'P1','P2','S1','S2','D1','D2'); 
```

[编辑] 根据 Ali 的输入，我尝试了以下方法：

```
syms a1 a2 b1 c1 c2 e1 e2 S1 D1 P1 S2 D2 P2 Pinput;

lS1 = log(S1);
lS2 = log(S2);
lD1 = log(D1);
lD2 = log(D2);
lP1 = log(P1);
lP2 = log(P2);
lPinput = log(Pinput);

eq1 = -lS1 + a1*lP1 + a2*lPinput;
eq2 = -lS2 + b1*lP2;
eq3 = -lS1 + c1*lP1 + c2*lP2;
eq4 = -lS2 + e1*lP2 + e2*lP1;

ans2 = solve(eq1,eq2,eq3,eq4,'P1','P2','S1','S2'); 
```

我还尝试了不同的解决语句：

```
ans2 = solve(eq1,eq2,eq3,eq4,'lP1','lP2','lS1','lS2'); 
```

但仍然没有运气。

[编辑] 原来在一台机器上只是一个问题——原来的方法在另一台电脑上运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:34:47.537

好吧，这两种选择都对我有用：

```
clear all
syms a1 a2 b1 c1 c2 e1 e2 S1 D1 P1 S2 D2 P2 Pinput;

eq1 = -log(S1) + a1*log(P1) + a2*log(Pinput);
eq2 = -log(S2) + b1*log(P2);
eq3 = -log(D1) + c1*log(P1) + c2*log(P2);
eq4 = -log(D2) + e1*log(P2) + e2*log(P1);
eq5 = -S1 + D1;
eq6 = -S2 + D2;

ans2 = solve(eq1,eq2,eq3,eq4,eq5,eq6,'P1','P2','S1','S2','D1','D2'); 
```

我得到了ans2：

```
D1: [1x1 sym]
D2: [1x1 sym]
P1: [1x1 sym]
P2: [1x1 sym]
S1: [1x1 sym]
S2: [1x1 sym] 
```

和：

```
D1=exp((a2*log(Pinput)*(b1*c1 - c1*e1 + c2*e2))/(b1*c1 - a1*b1 + a1*e1 - c1*e1 + c2*e2))
D2=exp((a2*b1*e2*log(Pinput))/(b1*c1 - a1*b1 + a1*e1 - c1*e1 + c2*e2))
P1=exp((a2*log(Pinput)*(b1 - e1))/(b1*c1 - a1*b1 + a1*e1 - c1*e1 + c2*e2))
P2=exp((a2*e2*log(Pinput))/(b1*c1 - a1*b1 + a1*e1 - c1*e1 + c2*e2))
S1=exp((a2*log(Pinput)*(b1*c1 - c1*e1 + c2*e2))/(b1*c1 - a1*b1 + a1*e1 - c1*e1 + c2*e2))
S2=exp((a2*b1*e2*log(Pinput))/(b1*c1 - a1*b1 + a1*e1 - c1*e1 + c2*e2)) 
```

对于阿里建议的第二个选项：

```
syms lS1 lS2 a1 b1 c1 e1 lP1 lP2 a2 c2 e2 lPinput
eq1 = -lS1 + a1*lP1 + a2*lPinput;
eq2 = -lS2 + b1*lP2;
eq3 = -lS1 + c1*lP1 + c2*lP2;
eq4 = -lS2 + e1*lP2 + e2*lP1;

ans2 = solve(eq1,eq2,eq3,eq4,'lP1','lP2','lS1','lS2'); 
```

答案2 =

```
lP1: [1x1 sym]
lP2: [1x1 sym]
lS1: [1x1 sym]
lS2: [1x1 sym]

ans2.lP1  =  (a2*lPinput*(b1 - e1))/(b1*c1 - a1*b1 + a1*e1 - c1*e1 + c2*e2)
ans2.lP2  =  (a2*e2*lPinput)/(b1*c1 - a1*b1 + a1*e1 - c1*e1 + c2*e2)
ans2.lS1  =  (a2*lPinput*(b1*c1 - c1*e1 + c2*e2))/(b1*c1 - a1*b1 + a1*e1 - c1*e1 + c2*e2)
ans2.lS2  =  (a2*b1*e2*lPinput)/(b1*c1 - a1*b1 + a1*e1 - c1*e1 + c2*e2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T20:30:40.523

*通常，*您无法以符号方式求解方程。典型的技术应用没有解析解，即无法符号求解。

话虽如此，我相信你可以象征性地解决你的方程（我没有 Matlab，我从未使用过它，下面的代码只是伪代码）：

通过从 eq5 和 eq6 替换 D1:=S1 和 D2:=S2 你得到

```
eq1 = -log(S1) + a1*log(P1) + a2*log(Pinput);
eq2 = -log(S2) + b1*log(P2);
eq3 = -log(S1) + c1*log(P1) + c2*log(P2);
eq4 = -log(S2) + e1*log(P2) + e2*log(P1); 
```

为当前变量的对数引入新变量：`newvariable=log(variable)`.

然后你有一个很好的**线性系统**，解决它应该没问题。

# ios - JQuery Mobile 和 Cordova 应用示例

> ID：14222423
> 
> 赞同：1
> 
> 时间：2013-01-08T19:18:01.167
> 
> 标签：ios, jquery-mobile, cordova

我听说过关于 JQuery Mobile 与 PhoneGap/Cordova 的不同意见。我听到的最大抱怨是性能。我想亲自体验一个应用程序。

有谁知道使用 JQuery Mobile 构建并通过 PhoneGap/Cordova 分发到 Apple App Store 的应用程序？我想下载该应用程序并自己尝试一下。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:26:16.263

使用 PhoneGap 构建的应用程序

[http://phonegap.com/app/feature](http://phonegap.com/app/feature)

使用 jQueryMobile 构建的应用程序

[http://www.jqmgallery.com/](http://www.jqmgallery.com/)

我不知道有什么专门将两者结合在一起的，但我很肯定它已经完成了，因为将两者结合使用是一种流行的开发选择。

# java - ArrayList 的 ArrayList：检查每个 ArrayList 是否具有相同数量的项

> ID：14222424
> 
> 赞同：0
> 
> 时间：2013-01-08T19:18:02.073
> 
> 标签：java, algorithm, data-structures, arraylist

我有一个 ArrayList 的 ArrayList。我想确保每个组成的 ArrayLists 具有相同数量的项目。有没有办法在不到 n 的时间内做到这一点！时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:19:21.910

绝对地！一次迭代`ArrayList`一个。存储 first 的大小`ArrayList`，然后确认所有其他`ArrayList`s 的大小与第一个列表的大小匹配。所需的总时间为 O(n)，其中 n 是列表的数量。

例如：

```
public static boolean listsHaveSameSize(List<List<?>> allLists) {
    List<?> first = null;
    for (List<?> list: allLists) {
        if (first == null) {
             first = list;
        } else if (list.size() != first.size()) {
             return false;
        }
    }
    return true;
} 
```

希望这可以帮助！

# youtube-api - Youtube Iframe API 代码在 FireFox 中不起作用

> ID：14222427
> 
> 赞同：3
> 
> 时间：2013-01-08T19:18:09.920
> 
> 标签：youtube-api

在 Google Gadget (xml) 中，我有以下代码。它适用于 Chrome 和 IE，但不适用于 FF。控制台错误为 javascript 调用报告“错误：在 NPObject 上调用方法”.. embed core module ..

```
<script type="text/javascript">
    var tag = document.createElement('script');
    tag.src = "//www.youtube.com/iframe_api";
  //tag.src = "https://www.youtube.com/iframe_api";  // FireFox compatibility when "HTTPS Everywhere" plugin is installed
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    var done = false;
    var player;

    function onYouTubeIframeAPIReady() {
      var w=window.outerWidth;
      if (w < 561) {
        var pwidth  = "560"; 
        var pheight = "315"; 
      }
      if (w > 559 && w < 640) {
        var pwidth  = "560"; 
        var pheight = "315"; 
      }
      if (w > 639 && w < 853) {
        var pwidth  = "640"; 
        var pheight = "360"; 
      }
      if (w > 852 && w < 930) {
        var pwidth  = "853"; 
        var pheight = "480";
      }
      if (w > 929) {
        var pwidth  = "930";  
        var pheight = "523";  
      }
        player = new YT.Player('player', {
          height: pheight,
          width: pwidth,
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
    }

    function onPlayerReady(evt) {
    //evt.target.playVideo();
      $('#player').css('display','none');
    }

    function onPlayerStateChange(evt) {
    //evt.target.loadVideoById()
      done = true;
    }

    function stopVideo() {
      player.stopVideo();
    }

    function loadVideoVtwo(videoID) {
      $('#displayVideos').css('display','none'); 
      $('#player').fadeIn(5000); 
      $('#backtobrowse').fadeIn(5000);
    //if(player) { player.loadVideoById(videoID); }
    //player.loadVideoById(videoID); 
      player.loadVideoById({'videoId': videoID});
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T21:19:59.160

我强烈怀疑这是由于`display: none`YouTube 播放器 iframe 上的设置所致。请参阅[Internet Explorer 和 Firefox 上的 YouTube IFrame API](https://stackoverflow.com/questions/14147677/youtube-iframe-api-on-internet-explorer-and-firefox)

# java - 杰克逊反序列化嵌套多态类型

> ID：14222429
> 
> 赞同：3
> 
> 时间：2013-01-08T19:18:11.653
> 
> 标签：java, json, jackson

我正在尝试使用 Jakson 反序列化嵌套的多态类型。这意味着我的顶级类型是指另一种多态类型，最终由非抽象类扩展。这不起作用，它会引发异常。

这是我正在尝试做的一个简化示例。

```
package com.adfin;

import junit.framework.TestCase;
import org.codehaus.jackson.annotate.JsonSubTypes;
import org.codehaus.jackson.annotate.JsonTypeInfo;
import org.codehaus.jackson.map.ObjectMapper;

import java.io.IOException;

public class JaksonDouble extends TestCase {

  @JsonTypeInfo(
    use = JsonTypeInfo.Id.NAME,
    include = JsonTypeInfo.As.PROPERTY,
    property = "name"
  )
  @JsonSubTypes({
    @JsonSubTypes.Type(value = SecondLevel.class, name = "SECOND")
  })
  public static abstract class FirstLevel {
    public abstract String getTestValue();
  }

  @JsonTypeInfo(
    use = JsonTypeInfo.Id.CLASS,
    include = JsonTypeInfo.As.PROPERTY,
    property = "@class"
  )
  public static abstract class SecondLevel extends FirstLevel {

  }

  public static class FinalLevel extends SecondLevel {
    String test;
    @Override public String getTestValue() { return test; }
  }

  public void testDoubleAbstract() throws IOException {
    String testStr = "{ \"name\": \"SECOND\", \"@class\": \"com.adfin.JasksonDouble.FinalLevel\", \"test\": \"foo\"}";

    ObjectMapper mapper = new ObjectMapper();
    FirstLevel result = mapper.readValue(testStr, FirstLevel.class);
  }
} 
```

我得到了关于抽象类型的标准例外。

```
org.codehaus.jackson.map.JsonMappingException: Can not construct instance of com.adfin.JaksonDouble$SecondLevel, problem: abstract types can only be instantiated with additional type information at [Source: java.io.StringReader@f2a55aa; line: 1, column: 19] 
```

让我解释一下我的用例。我有一个描述数据工作流程的 Json 文档。我在“一级”有一个抽象类型，描述了对单个值的操作。我派生了一堆实现常见操作的非抽象类（我用@JsonSubTypes 对它们进行了注释）。

我有一个特殊的@JsonSubTypes，称为“CUSTOM”。这是另一个抽象类，代表其他人（在普通 jar 之外）编写的自定义操作，他们可以使用“@class”属性指定完全限定的类名。看起来 Jakson 解析器从不读取第二个 lavel 类上的 @JsonTypeInfo 注释。

我怎样才能使这项工作。或者至少我怎样才能使这个用例起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:15:54.580

你的定义搞砸了——你试图使用两个类型标识符，类型名称和类。这没有任何意义。您应该选择一种方法或另一种方法，而不是两者兼而有之。

如果您选择 Java 类名作为类型信息，只需省略名称即可。此外，您只需要包含`@JsonTypeInfo`for `FirstLevel`; 子类继承这个定义。

如果您更喜欢使用逻辑类型名称，请删除类属性。您还需要指定子类型列表，可以使用注释，也可以通过`ObjectMapper`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T23:48:11.493

首先，你的 json 中的类名是错误的，它应该是 com.adfin.JasksonDouble$FinalLevel，美元而不是点。

这是一个有效的代码，但我不确定它是否能正确回答所有子类型的内容。

```
@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = "@class")
public static abstract class FirstLevel {
    public abstract String getTestValue();
} 
```

从其他类中删除注释，它应该可以工作（刚刚测试过）。

然而，所有这些东西看起来都很复杂，如果你可以自由地尝试另一个库，你可能想看看[Genson](http://code.google.com/p/genson/)。要启用多态类型支持，您必须配置您的 Genson 实例。如果您也是生成 json 的人，则不需要其他任何东西（因为您可以根据需要使用 Genson 生成 json 流来处理多态类型）。

这是一个例子：

```
// enable polymorphic types support
Genson genson = new Genson.Builder().setWithClassMetadata(true).create();
// the @class must be first property in the json object
String testStr = "{ \"@class\": \"com.adfin.JasksonDouble$FinalLevel\", \"test\": \"foo\"}";
FirstLevel result = genson.deserialize(testStr, FirstLevel.class);
System.out.println(result.getTestValue()); 
```

Genson 的另一个好处是它使您能够为您的类注册别名，因此您不必在流中提供所有包信息。另一个优点是，如果您将 json 流存储在数据库中并将您的类移动到另一个包中，您只需更改应用程序中的别名，而不需要从数据库中迁移所有 json 流。

```
Genson genson = new Genson.Builder().setWithClassMetadata(true)
                                    .addAlias("FinalLevel", FinalLevel.class)
                                    .create();
// the @class must be first property in the json object
String testStr = "{ \"@class\": \"FinalLevel\", \"test\": \"foo\"}";
FirstLevel result = genson.deserialize(testStr, FirstLevel.class);
System.out.println(result.getTestValue()); 
```

# ios - iOS/C：将“整数”转换为四个字符串

> ID：14222435
> 
> 赞同：17
> 
> 时间：2013-01-08T19:18:40.717
> 
> 标签：ios, c

许多与音频会话编程相关的常量实际上是四字符字符串（[音频会话服务参考](http://developer.apple.com/library/ios/documentation/AudioToolbox/Reference/AudioSessionServicesReference/Reference/reference.html#//apple_ref/doc/uid/TP40007915-CH6-SW2)）。这同样适用于从函数返回的[OSStatus 代码](http://developer.apple.com/library/ios/documentation/AudioToolbox/Reference/AudioSessionServicesReference/Reference/reference.html#//apple_ref/doc/uid/TP40007915-CH7a-SW1)`AudioSessionGetProperty`，例如.

问题是，当我尝试开箱即用地打印这些东西时，它们看起来像 1919902568。我可以将其插入计算器并打开 ASCII 输出，它会告诉我“roch”，但必须有一种编程方式做这个。

我在我的一个 C 函数中取得了有限的成功，其中包含以下块：

```
char str[20];
// see if it appears to be a four-character code
*(UInt32 *) (str + 1) = CFSwapInt32HostToBig(error);
if (isprint(str[1]) && isprint(str[2]) && isprint(str[3]) && isprint(str[4])) {
    str[0] = str[5] = '\'';
    str[6] = '\0';
} else {
    // no, format as integer
    sprintf(str, "%d", (int)error);
} 
```

我想要做的是从它的当前功能中抽象出这个特性，以便在其他地方使用它。我试着做

```
char * fourCharCode(UInt32 code) {
    // block
}
void someOtherFunction(UInt32 foo){
    printf("%s\n",fourCharCode(foo));
} 
```

但这给了我“à*€/3íT:ê*€/+€/”，而不是“roch”。我的 C fu 不是很强大，但我的直觉是上面的代码试图将内存地址解释为字符串。或者可能存在编码问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-08T19:41:00.370

您正在谈论的类型是 a `FourCharCode`，定义在`CFBase.h`. 它相当于一个`OSType`. `OSType`在and之间转换的最简单方法`NSString`是使用`NSFileTypeForHFSTypeCode()`and `NSHFSTypeCodeFromFileType()`。不幸的是，这些功能在 iOS 上不可用。

对于 iOS 和 Cocoa-portable 代码，我喜欢[Joachim Bengtsson 的](http://thirdcog.eu/) `FourCC2Str()`代码[`NCCommon.h`](http://thirdcog.eu/code/NCCommon.h)（加上一些铸造清理以便于使用）：

```
#include <TargetConditionals.h>
#if TARGET_RT_BIG_ENDIAN
#   define FourCC2Str(fourcc) (const char[]){*((char*)&fourcc), *(((char*)&fourcc)+1), *(((char*)&fourcc)+2), *(((char*)&fourcc)+3),0}
#else
#   define FourCC2Str(fourcc) (const char[]){*(((char*)&fourcc)+3), *(((char*)&fourcc)+2), *(((char*)&fourcc)+1), *(((char*)&fourcc)+0),0}
#endif

FourCharCode code = 'APPL';
NSLog(@"%s", FourCC2Str(code));
NSLog(@"%@", @(FourCC2Str(code)); 
```

您当然可以将其`@()`放入宏中以便于使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-02T14:22:15.477

在 Swift 中，你会使用这个函数：

```
func str4 (n: Int) -> String
{
    var s: String = ""
    var i: Int = n

    for var j: Int = 0; j < 4; ++j
    {
        s = String(UnicodeScalar(i & 255)) + s
        i = i / 256
    }

    return (s)
} 
```

这个函数将在三分之一的时间内完成与上面相同的操作：

```
func str4 (n: Int) -> String
{
    var s: String = String (UnicodeScalar((n >> 24) & 255))
    s.append(UnicodeScalar((n >> 16) & 255))
    s.append(UnicodeScalar((n >> 8) & 255))
    s.append(UnicodeScalar(n & 255))
    return (s)
} 
```

相反的方式将是：

```
func val4 (s: String) -> Int
{
    var n: Int = 0
    var r: String = ""
    if (countElements(s) > 4)
    {
        r = s.substringToIndex(advance(s.startIndex, 4))
    }
    else
    {
        r = s + "    "
        r = r.substringToIndex(advance(r.startIndex, 4))
    }
    for UniCodeChar in r.unicodeScalars
    {
        n = (n << 8) + (Int(UniCodeChar.value) & 255)
    }

    return (n)
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-08T19:25:01.687

```
char str[5];
str[4] = '\0';
long *code = (long *)str;
*code = 1919902568;
printf("%s\n", str); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-08T19:42:56.020

整数 = 4 个字节 = 4 个字符。因此，要将整数转换为 char *，您可以简单地编写：

```
char st[5] = {0};
st[0] = yourInt & 0xff;
st[1] = (yourInt >> 8) & 0xff;
st[2] = (yourInt >> 16) & 0xff;
st[3] = (yourInt >> 24) & 0xff; 
```

要将其转换回来：

```
yourInt = st[0] | (st[1] << 8) | (st[2] << 16) | (st[3] << 24); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-23T02:16:15.333

我为我的音频代码编写了这个 C 函数......这可能有点天真，但它对我来说已经足够好了：

```
NSString* fourCharNSStringForFourCharCode(FourCharCode aCode){

char fourChar[5] = {(aCode >> 24) & 0xFF, (aCode >> 16) & 0xFF, (aCode >> 8) & 0xFF, aCode & 0xFF, 0};

NSString *fourCharString = [NSString stringWithCString:fourChar encoding:NSUTF8StringEncoding];

return fourCharString; } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-06-30T07:00:00.413

我建议使用这样的函数：

```
static NSString * NSStringFromCode(UInt32 code)
{
    UInt8 chars[4];
    *(UInt32 *)chars = code;
    for(UInt32 i = 0; i < 4; ++i)
    {
        if(!isprint(chars[i]))
        {
            return [NSString stringWithFormat:@"%u", code];
        }
    }
    return [NSString stringWithFormat:@"%c%c%c%c", chars[3], chars[2], chars[1], chars[0]];
} 
```

这将确保您不会得到一些实际数字的 FourCharCodes 的随机结果，例如`kCMPixelFormat_32ARGB = 32`.

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-10-15T11:47:38.093

如果您正在为 macOS 而不是 iOS 进行开发，那么 Launch Services 中已经有一个内置功能。将 4cc 作为 NSString 获取：

```
(__bridge_transfer NSString *)UTCreateStringForOSType(fourccInt) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-02-23T22:56:56.047

这是我在测试目标中使用的辅助函数：

斯威夫特 5：

```
extension FourCharCode {
    private static let bytesSize = MemoryLayout<Self>.size
    var codeString: String {
        get {
            withUnsafePointer(to: bigEndian) { pointer in
                pointer.withMemoryRebound(to: UInt8.self, capacity: Self.bytesSize) { bytes in
                    String(bytes: UnsafeBufferPointer(start: bytes,
                                                      count: Self.bytesSize),
                           encoding: .macOSRoman)!
                }
            }
        }
    }
}

extension OSStatus {
    var codeString: String {
        FourCharCode(bitPattern: self).codeString
    }
}

private func fourChars(_ string: String) -> String? {
    string.count == MemoryLayout<FourCharCode>.size ? string : nil
}
private func fourBytes(_ string: String) -> Data? {
    fourChars(string)?.data(using: .macOSRoman, allowLossyConversion: false)
}
func stringCode(_ string: String) -> FourCharCode {
    fourBytes(string)?.withUnsafeBytes { $0.load(as: FourCharCode.self).byteSwapped } ?? 0
} 
```

它在 macOS 和 iOS 上都适用于我，并且与内置 macOS`NSFileTypeForHFSTypeCode`和`NSHFSTypeCodeFromFileType`

几个陷阱：

1.  使用`bigEndian`和`byteSwapped`
2.  使用`macOSRoman`编码
3.  通过返回 0 来处理长字符串，如`NSHFSTypeCodeFromFileType`

上述实现与标准库方法的区别：

1.  `NSFileTypeForHFSTypeCode`在 sting 周围添加额外的单引号：`NSFileTypeForHFSTypeCode(OSType(kAudioCodecBadDataError))) == "'bada'"`. 我已经选择退出`bada`
2.  它无法生成`\0`中间的字符串，就像 in `NSFileTypeForHFSTypeCode(kAudioFormatMicrosoftGSM)`should be`ms\01`但返回`'ms`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-11-27T14:26:26.843

一个更 Swifty 的实现，适用于 Swift 4：

```
extension String {
    init(fourCharCode: FourCharCode) {
        let n = Int(fourCharCode)
        var s: String = ""

        let unicodes = [UnicodeScalar((n >> 24) & 255), UnicodeScalar((n >> 16) & 255), UnicodeScalar((n >> 8) & 255), UnicodeScalar(n & 255)]
        unicodes.flatMap { (unicode) -> String? in
            guard let unicode = unicode else { return nil }
            return String(unicode)
        }.forEach { (unicode) in
            s.append(unicode)
        }

        self = s.trimmingCharacters(in: CharacterSet.whitespaces)
    }
} 
```

可以按如下方式使用：

```
String(fourCharCode: CMFormatDescriptionGetMediaSubType(charCode)) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-07-08T19:59:41.140

> *   处理不同的字节序架构
> *   iOS 和 MacOS（*等*）
> *   容易明白
> *   结果字符串（应该）与 OSType 相同，即使是 8 位字符

```
#import <Cocoa/Cocoa.h>
#import <CoreServices/CoreServices.h> // for EndianU32_NtoB
@implementation NSString (FourCC)

+ (NSString *) stringFromFourCC: (OSType) cccc
{
    NSString * result = nil;
    cccc = EndianU32_NtoB(cccc); // convert to network byte order, if needed
    NSData * data = [NSData dataWithBytes: &cccc length: sizeof(OSType)];
    result = [[NSString alloc] initWithData: data encoding: NSWindowsCP1252StringEncoding]; // lossless 8-bit encoding, could also use NSMacOSRomanStringEncoding
    return result;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-03T11:22:54.617

将 Swift 2.2 版本作为两个扩展工作：

```
extension String {
    public var fourCharCode:FourCharCode {
        var string = self
        if unicodeScalars.count < 4 {
            string = self + "    "
        }
        string = string.substringToIndex(string.startIndex.advancedBy(4))

        var res:FourCharCode = 0
        for unicodeScalar in string.unicodeScalars {
            res = (res << 8) + (FourCharCode(unicodeScalar) & 255)
        }

        return res
    }
}

extension FourCharCode {
    public var string:String {
        var res = String (UnicodeScalar((self >> 24) & 255))
        res.append(UnicodeScalar((self >> 16) & 255))
        res.append(UnicodeScalar((self >> 8) & 255))
        res.append(UnicodeScalar(self & 255))
        return res
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-07-18T06:24:26.037

这是 jscom 代码的 Swift 3 版本，经过清理以消除重复：

```
func debugPrintFourCcCode(_ value: Int) {
  var res = ""

  if value <= 0x28 {
    res = "\(value)"
  } else {
    func add(_ pos: Int) {
      res.append(String(UnicodeScalar((value >> pos) & 255)!))
    }

    add(24)
    add(16)
    add(8)
    add(0)
  }

  NSLog("Code: \(res)")
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-08-20T21:20:06.913

适用于 Mac 的版本，但不适用于 iOS：

```
extension String {

    init(_ fourCharCode: FourCharCode) { // or `OSType`, or `UInt32`
        self = NSFileTypeForHFSTypeCode(fourCharCode).trimmingCharacters(in: CharacterSet(charactersIn: "'"))
    }

} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-01-30T09:53:14.230

棘手的斯威夫特版本：

```
func convert(fileType: OSType) -> String {
    let chars = [24, 16, 8, 0].map { Character(UnicodeScalar(UInt8(fileType >> $0 & 0xFF)))}
    return String(chars)
} 
```

我已经在 Swift 5 上进行了测试，但应该可以在以前的 Swift 版本上使用。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-12-20T16:00:17.047

```
public extension UInt32 {
    var string: String {
        String([
            Character(Unicode.Scalar(self >> 24 & 0xFF) ?? "?"),
            Character(Unicode.Scalar(self >> 16 & 0xFF) ?? "?"),
            Character(Unicode.Scalar(self >> 8 & 0xFF) ?? "?"),
            Character(Unicode.Scalar(self & 0xFF) ?? "?")
        ])
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-12-06T11:26:08.530

这是我上面首选答案的变体（感谢**pawneebill**）我通过使用不同的 NSString 初始化程序来保存 NSData 中间对象的创建和释放。

```
#import <Cocoa/Cocoa.h>
#import <CoreServices/CoreServices.h> // for EndianU32_NtoB
@implementation NSString (FourCC)

+ (NSString *) stringFromFourCC: (OSType) cccc
{
    NSString * result = nil;
    cccc = EndianU32_NtoB(cccc); // convert to network byte order if needed
    result = [[NSString alloc] initWithBytes: &cccc length: sizeof(cccc) encoding: NSMacOSRomanStringEncoding]; // lossless 8-bit encoding
    return result;
} 
```

或者，更紧凑但解释更少......

```
+ (NSString *) stringFromFourCC: (OSType) cccc
{
    cccc = EndianU32_NtoB(cccc); // convert to network byte order if needed
    return [[NSString alloc] initWithBytes: &cccc length: sizeof(cccc) encoding: NSMacOSRomanStringEncoding]; // lossless 8-bit encoding
} 
```

# c++ - new 未调用，但已分配内存

> ID：14222436
> 
> 赞同：5
> 
> 时间：2013-01-08T19:18:43.490
> 
> 标签：c++, trie

我写了一个简单的[Trie](http://en.wikipedia.org/wiki/Trie)实现。这是源代码：

```
#include <string>
#include <map>

typedef unsigned int uint;

class Trie {
public:
    class Node {
    public:
            Node(const char & _value);
            ~Node();
            char get_value() const;
            void set_marker(const uint & _marker);
            uint get_marker() const;
            bool add_child(Node * _child);
            Node * get_child(const char & _value) const;
            void clear();
    private:
            char m_value;
            uint m_marker;
            std::map<char, Node *> m_children;
    };

    Trie();
    ~Trie();
    bool insert(const std::string & _str);
    bool find(const std::string & _str) const;
private:
    Node * m_root;
};
// - implementation (in a different file)
using namespace std;

Trie::Node::Node(const char & _value) :
            m_value(_value), m_marker(0), m_children() {
}

Trie::Node::~Node() {
    clear();
}

void Trie::Node::clear() {
    map<char, Node*>::const_iterator it;
    for (it = m_children.begin(); it != m_children.end(); ++it) {
            delete it->second;
    }
}

void Trie::Node::set_marker(const uint & _marker) {
    m_marker = _marker;
}

uint Trie::Node::get_marker() const {
    return m_marker;
}

char Trie::Node::get_value() const {
    return m_value;
}

Trie::Node * Trie::Node::get_child(const char & _value) const {
    map<char, Node*>::const_iterator it;
    bool found = false;
    for (it = m_children.begin(); it != m_children.end(); ++it) {
            if (it->first == _value) {
                    found = true;
                    break;
            }
    }
    if (found) {
            return it->second;
    }
    return NULL;
}

bool Trie::Node::add_child(Node * _child) {
    if (_child == NULL) {
            return false;
    }
    if (get_child(_child->get_value()) != NULL) {
            return false;
    }
    m_children.insert(pair<char, Node *>(_child->get_value(), _child));
    return true;
}

Trie::Trie() :
            m_root(new Node('\0')) {
}

Trie::~Trie() {
    delete m_root;
}

bool Trie::insert(const string & _str) {
    Node * current = m_root;
    bool inserted = false;
    for (uint i = 0; i < _str.size(); ++i) {
            Node * child = current->get_child(_str[i]);
            if (child == NULL) {
                    child = new Node(_str[i]);
                    current->add_child(child);
                    inserted = true;
            }
            current = child;
    }
    if (current->get_marker() != _str.size()) {
            current->set_marker(_str.size());
            inserted = true;
    }
    return inserted;
}

bool Trie::find(const std::string & _str) const {
    Node * current = m_root;
    bool found = false;
    for (uint i = 0; i < _str.size(); ++i) {
            Node * child = current->get_child(_str[i]);
            if (child == NULL) {
                    break;
            } else {
                    current = child;
            }
    }
    if (current->get_marker() == _str.size()) {
            found = true;
    }
    return found;
} 
```

这是我的测试程序：

```
#include <iostream>
#include <sstream>
#include "Trie.h"

int main() {
    Trie t;
    for (unsigned int i = 0; i < 10000; ++i) {
            t.insert("hello");
    }
    return 0;
} 
```

我的问题是，即使在第二次尝试插入时已经插入了“hello”，因此`new`不再调用，但仍有大量内存被分配和取消分配。这个数量随着 I 增加 max i 的值而增加。例如，在上述情况下 valgrind 给出以下输出：

```
==10322== HEAP SUMMARY:
==10322==     in use at exit: 0 bytes in 0 blocks
==10322==   total heap usage: 10,011 allocs, 10,011 frees, 300,576 bytes allocated 
```

我已经确认调用 Node() 构造函数的次数是恒定的。那么为什么以及如何分配和释放所有内存呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T19:44:15.737

每次调用 时`insert`，都会传递 a `const char[6]`，但它需要 a `const std::string&`，因此每次迭代都会创建一个临时`std::string`，然后将其传递给函数，然后在下一次迭代之前销毁。这澄清了 10000 个分配和释放，只剩下 11 个，这大概是您对节点的分配，以及`std::map`内部所做的任何事情，以及我忽略的其他一些地方（例如字符串的副本或映射）

即使容器不包含任何元素，它也可以分配内存，但我认为它应该以其他方式设计，如果容器的任何主要实现做了这样的事情，我会感到惊讶。（虽然双端队列*可能*是个例外）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T19:24:35.590

`std::map`将动态分配自己的内存，每次调用时都会创建一个新内存`get_child()`。使用默认构造函数时它分配了多少内存我不能说，但它可能*是*. 仅仅因为您不调用`new`并不意味着您的类创建的其他类型不调用。

此外，`std::map`不会为插入的每个元素分配一个全新的堆存储。那将是非常低效的。它有一些内部算法来在需要时增加其后备存储，并且它肯定会分配比适合该新元素所需的更多。

# angularjs - AngularJS + ng-repeat + 带有字母间距的内联块

> ID：14222449
> 
> 赞同：1
> 
> 时间：2013-01-08T19:19:21.877
> 
> 标签：angularjs, css, letter-spacing

我的行内块元素的字母间距有问题。如您所见[（jsfiddle）](http://jsfiddle.net/2XSSs/)，我的下层元素崩溃了，因为它们没有与 '\n' 或间隙分开。如果我用 Angular 重复这一点，我就会崩溃 elems。我该如何解决这个问题？

```
<a ng-repeat="menu in menus"">{{menu.name}}</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:25:02.730

如果您只想在每个元素之后放置一些间距，只需将此行添加到您的 CSS 中，在您的“.parent a”选择器中。这是你的[小提琴](http://jsfiddle.net/2XSSs/2/)

```
margin-left: 10px; 
```

# html - 使用引导框架时显示数据

> ID：14222450
> 
> 赞同：27
> 
> 时间：2013-01-08T19:19:24.327
> 
> 标签：html, twitter-bootstrap

我有一个编辑表单，其中`.form-horizontal`和`.control-label`. 但是，现在我想向用户显示一条记录（例如，用户配置文件的详细信息）。所以我设想这样的事情：

```
First Name:        Foo
Last Name:         Bar
Job:               Something 
```

使用引导框架执行此操作的最佳方法是什么？我想使用与我的编辑表单相同的结构，但由于我将显示数据，因此我无法使用`.form-horizontal`该类。如果我使用`<table>`标签，那么我可以使用什么类？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-08T20:59:36.043

### 对于引导程序 3

Bootstrap 3 提供了一个“水平描述”类来完全按照您的意愿呈现数据。

[http://getbootstrap.com/css/#horizo​​ntal-description](http://getbootstrap.com/css/#horizontal-description)

使用您的示例数据，您可以执行以下操作：

```
<dl class="dl-horizontal">
  <dt>First Name</dt>
  <dd>Foo</dd>
  <dt>Last Name</dt>
  <dd>Bar</dd>
  <dt>Job</dt>
  <dd>Something</dd>
</dl> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-29T12:20:17.963

### 对于引导程序 4

您可以使用[**描述列表对齐**](https://getbootstrap.com/docs/4.1/content/typography/#description-list-alignment)。例如-

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet"/>
<dl class="row">
  <dt class="col-sm-3">Description lists</dt>
  <dd class="col-sm-9">A description list is perfect for defining terms.</dd>

  <dt class="col-sm-3">Euismod</dt>
  <dd class="col-sm-9">
    <p>Vestibulum id ligula porta felis euismod semper eget lacinia odio sem nec elit.</p>
    <p>Donec id elit non mi porta gravida at eget metus.</p>
  </dd>

  <dt class="col-sm-3">Malesuada porta</dt>
  <dd class="col-sm-9">Etiam porta sem malesuada magna mollis euismod.</dd>

  <dt class="col-sm-3 text-truncate">Truncated term is truncated</dt>
  <dd class="col-sm-9">Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</dd>

  <dt class="col-sm-3">Nesting</dt>
  <dd class="col-sm-9">
    <dl class="row">
      <dt class="col-sm-4">Nested definition list</dt>
      <dd class="col-sm-8">Aenean posuere, tortor sed cursus feugiat, nunc augue blandit nunc.</dd>
    </dl>
  </dd>
</dl>
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-09T02:30:47.493

例如，您也可以在这里使用表格

```
<table class=   "table table-user-information">
                <tbody>
                  <tr>
                    <td>Dokter Umum:</td>
                    <td><?php echo $row->terap_addressdoc ?></td>
                  </tr>
                  <tr>
                    <td>Specialist Chiropactic</td>
                    <td><?php echo $row->terap_specialist ?></td>
                  </tr>

                   <tr>
                    <td>Email</td>
                    <td><?php echo $row->terap_terapist ?></td>
                  </tr>
               </tbody>
              </table> 
```

# c# - Windows 7 库和目录结构

> ID：14222453
> 
> 赞同：0
> 
> 时间：2013-01-08T19:19:34.710
> 
> 标签：c#, winforms, windows-7, directory-structure, .net

我正在加载一个带有目录的树视图，它是子目录。我的呼吁：

```
string[] dirs = Directory.GetDirectories(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments)); 
```

返回所有我想要的目录和一些我不想要的目录......比如无法访问/虚拟的“我的音乐”、“我的视频”等......由于库结构（访问拒绝）...

我怎样才能避免填充这些无法访问的目录？如果操作系统是 Vista 或 7，我可以遍历数组并删除不需要的目录，然后保留 XP ......但我想知道是否有更“优雅”的解决方案？

在 Wim 的帮助下，我想出了这个：

```
 private List<string> MyDocuments()
    {
        List<string> dirs = new List<string>(Directory.GetDirectories(
            Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments)));

        for (int i = 0; i < dirs.Count-1; i++)
        {
            DirectoryInfo di = new DirectoryInfo(dirs[i]);
            if (di.Attributes.HasFlag(FileAttributes.ReparsePoint))
                dirs.RemoveAt(i);
        }

        return dirs;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:46:26.810

这些目录似乎既隐藏又具有`ReparsePoint`属性（要求它们为空，从 msdn 和[What is the best way to check for reparse point in .net (c#)?了解更多信息，了解](https://stackoverflow.com/questions/332397/what-is-the-best-way-to-check-for-reparse-point-in-net-c)[它](http://msdn.microsoft.com/en-us/library/aa365503%28VS.85%29.aspx)是如何完成的）。

我可以理解搜索优雅代码的需要，但问题是，您可以遍历每个目录并检查此属性，随后跳过将其添加到数组或目录列表中，但恕我直言，这不如迭代 dirs 数组优雅，捕获异常并删除条目。所以，简而言之，我会坚持：

```
List<string> dirs = Directory.GetDirectories(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments)).ToList();
string[] mySubDirs;

for (int i = 0; i < dirs.Count-1; i++)
{
    try
    {
        mySubDirs = Directory.GetDirectories(dirs[i]);
    }
    catch (Exception)
    {
        dirs.RemoveAt(i);
    }
} 
```

# sql-server - 经典 ASP + TSQL：日期时间格式问题

> ID：14222456
> 
> 赞同：4
> 
> 时间：2013-01-08T19:19:43.393
> 
> 标签：sql-server, datetime, odbc, date-format, datetime-format

我最近将一个经典的 ASP 网站转移到了一个新的服务器上。服务器运行IIS7.5。该站点通过 ODBC 连接到 MS SQL 数据库。它的应用程序池在`NETWORK SERVICE`.

在这个企业规模的网站上散布`datetime`着在旧服务器上运行良好的输入字段，但现在它们都有以下错误：

> *[Microsoft][SQL Server Native Client 10.0][SQL Server]将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。*

它期待错误的`datetime`格式。代码中使用的格式是一致的`yyyy/MM/dd`。当我在表单字段中交换月份和日期位置时，它可以工作。即`yyyy/dd/MM`（这很奇怪）。

Windows 控制面板、IIS 全球化和`NETWORK SERVICE`用户的注册表项都设置为 en-GB！

我已经测试了一直到调用数据库的代码，并且输入看起来不错。然后，我还复制了该 sql 并在我自己的登录名下通过 SQL Server Management Studio 运行它，这也可以正常工作。只有通过网站运行（`NETWORK SERVICE`通过 ODBC 连接）才会失败。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:04:23.277

在 Web 服务器上的 ODBC 数据源中，将数据源设置为“输出货币数字和日期时使用区域设置”...

所以，

```
Control Panel\All Control Panel Items\Administrative Tools\Data Sources (ODBC)
Double click your data source
Click Next
Enter a valid db user / password, click next
Select the default DB, then next
Make sure the box as described above is CHECKED, then finish. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:02:26.937

您可以检查和更改 NETWORK SERVICE 用户登录的默认语言。

在 MS SQL Management Studio 中，在对象资源管理器中搜索 Security/Login/ 和您的帐户名。在上下文菜单中有属性条目。然后检查默认语言。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T13:34:03.313

在 IIS 上，在 Web 应用程序的应用程序池中 -> 高级设置 ->

将**加载用户配置文件**选项设置为**TRUE**。这将强制设置为您的池用户“采用”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T21:19:59.333

您可以更改 IIS 6 的[AspLCID 元数据库属性](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/b1ffb2a7-3a56-4c98-b65a-77a3f0cccdf7.mspx?mfr=true)，或 IIS 7+ 的 LCID 属性：[ASP 属性](http://www.iis.net/configreference/system.webserver/asp)。这是默认使用的。

# dart - DART 在迭代模板中的画布列表上绘图

> ID：14222459
> 
> 赞同：1
> 
> 时间：2013-01-08T19:19:44.613
> 
> 标签：dart, dart-webui

我正在显示有关项目列表的信息，其中可以选择包含缩略图。如果不存在缩略图，则会显示一个链接以允许上传图像。

我的问题是：需要时在画布上绘制的最佳方式是什么？（见下文）。我需要触发对代码的调用，然后还要识别每个画布，以便它获得适当的图像。

我知道这一切都可以通过在代码中创建元素来完成，但如果可能的话，我想使用 webui 模板机制。

```
 <template iterate="i in gItems.order">
        <template if="preItemDisplay(i) == true">
          <template if="gItemShowThumb == true">             
            <div template if="gItems.map[i].thumb == null">
              &nbsp;
              <span class="clickable" on-click="uploadItemImageClick(i)">
                Add image...
                </span>
              </div>  

            <canvas template if="gItems.map[i].thumb != null" width="80px" height="60px">
              </canvas>    <!-- ? How to draw on this canvas? -->

            </template>  
          </template>  
        </template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:05:55.030

HTML Canvas 是 100% 代码驱动的。

您可以像这样获得渲染上下文：

```
final CanvasElement canvas = query('canvas');
final CanvasRenderingContext2D cctx = canvas.context2d;
//
// drawing code here
// 
```

网上有很多示例讨论如何绘制到画布上。Dart 和 Javascript 中的 canvas API 之间几乎没有什么区别，所以你应该很幸运地找到你需要的信息。

**更新**。如果你想访问一个特定的画布，你可以给它添加一个类或 id。

```
<canvas id='gameCanvas'></canvas> 
```

```
final CanvasElement canvas = query('#gameCanvas'); 
```

```
<canvas class='score_board'></canvas> 
```

```
final CanvasElement canvas = query('.score_board'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:35:17.980

您可以为您的画布元素添加一个 ID，然后您可以轻松地获得对它的引用。

尝试类似：

```
<canvas id="{{i.someIdentifierOnOrder}}" template ... 
```

然后你可以找到元素：

```
query('#the-id-of-the-element') 
```

# javascript - Python + Google App Engine，Window.Open

> ID：14222465
> 
> 赞同：-1
> 
> 时间：2013-01-08T19:20:12.487
> 
> 标签：javascript, python, google-app-engine, python-2.7

好的... python 新手，我不确定我是否真的了解我的网站页面应该如何设置。场景如下：我有一个输出到 HTML 表格的报告，页面上有一些图表数据。我想用该页面的干净、可下载的 HTML 版本打开一个新的浏览器窗口实例。在 dotnet 中，我只需使用 JS 函数 window.open() 来弹出一个 Web 表单，传入一些查询字符串参数并相应地构建新页面。

我已经用 Python 尝试了等效的逻辑，但没有运气。我只能在弹出窗口中加载 HTML 页面。当我可以加载新的 .py 页面时，python 代码会在屏幕上吐出，解释器不会解析它。另外，即使我确实让它工作了，我也不确定我知道如何在两页之间传递值。

是否有可能我只使用我的 main.py 文件来运行代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:35:36.147

您以某种方式使这变得比应有的更难。您在 Python 中所做的事情与在 .net 中所做的完全相同：只需打开一个包含相关 URL 的新窗口，包括任何查询参数。浏览器不知道也不关心你的后端代码是用什么语言编写的：它只处理 URL。

# android - ActionBarSherlock：getSupportMenuInflator() 未定义

> ID：14222466
> 
> 赞同：4
> 
> 时间：2013-01-08T19:20:16.887
> 
> 标签：android, actionbarsherlock

我正在使用**ActionBarSherlock**并尝试使用 扩展我的 XML 菜单`getSupportMenuInflator()`，但它给出了一个错误：

```
the method getSupportMenuInflator() is undefined for the type ... 
```

我无法弄清楚为什么它显示错误。这是代码：

```
public void onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);
    ...
} 
```

我如何解决它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-08T19:29:53.140

你需要使用：

```
getSherlockActivity().getSupportMenuInflater().inflate(R.menu.activity_main, menu); 
```

因为`getSupportMenuInflater()`是 SherlockActivity 中的方法而不是 SherlockFragment。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T11:00:24.290

如果您使用的是**SherlockActionBar**，您应该`implement SherlockActivity` **而不是** `Activity and getSupportMenuInflater()`将可用

# php - Sendmail 表单反馈，变量声明？

> ID：14222470
> 
> 赞同：0
> 
> 时间：2013-01-08T19:20:32.813
> 
> 标签：php, forms, email, feedback

我正在使用这个脚本 [http://www.quackit.com/html/codes/html_form_to_email.cfm](http://www.quackit.com/html/codes/html_form_to_email.cfm)

默认情况下效果很好。

但我添加了一些额外的变量，例如：

```
/*
This next bit loads the form field data into variables.
If you add a form field, you will need to add it here.
*/
$namn = $_REQUEST['namn'] ;
$telefonnummer = $_REQUEST['telefonnummer'] ;
$email_address = $_REQUEST['email_address'] ;
$comments = $_REQUEST['comments'] ; 
```

我的问题是我无法让它们出现在发送的电子邮件中。

我试过像这样包含它们：

```
mail( "$webmaster_email", "Feedback Form Results",
  $namn, $email, $telefonnummer, $comments, "From: $email_address" ); 
```

和这个：

```
mail( "$webmaster_email", "Feedback Form Results",
  $comments, "From: $email_address" );
  $email, ;)
  $telefonnummer, :) 
```

它不工作，你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:22:30.163

`mail()`您的代码与定义不符：http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

你应该有：

```
mail( $webmaster_email, "Feedback Form Results", "$namn, $email, $telefonnummer, $comments", "From: $email_address" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:28:44.937

看一下[mail()](http://php.net/manual/en/function.mail.php)函数，它接受四个参数

```
mail($to, $subject, $message, $headers); 
```

所以你应该改变你的代码，让它看起来像这样，考虑到你在添加这些新字段的表单中做的一切都很好

```
$message=$namn.','. $email.','. $telefonnummer.','. $comments;
mail( $webmaster_email, "Feedback Form Results",  $message, "From: {$email_address}" ); 
```

此外，您可能需要在标题（第四个参数）中添加一些附加信息，以便您的消息正确显示，以防它里面有一些 html，看看这个来自 php.net 的例子

```
// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

 // Mail it
 mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:31:01.797

您需要查看[PHP 邮件](http://php.net/manual/en/function.mail.php)。你有很多参数。

基本用法是：`mail($to, $subject, $message, $additional_headers);`

尝试：

```
/*
This next bit loads the form field data into variables.
If you add a form field, you will need to add it here.
*/
$namn = $_REQUEST['namn'] ;
$telefonnummer = $_REQUEST['telefonnummer'] ;
$email_address = $_REQUEST['email_address'] ;
$comments = $_REQUEST['comments'] ;

$message = 'namn: ' . $namn . ' telefonnummer: ' . $telefonnummer . ' email_address: ' . $email_address . ' comments: ' . $comments;

mail($webmaster_email, "Feedback Form Results", $message, "From: $email_address"); 
```

# java - 如何建立编码字符的代码点？

> ID：14222473
> 
> 赞同：1
> 
> 时间：2013-01-08T19:20:48.447
> 
> 标签：java, unicode, codepoint

给定一个字节流（表示字符）和流的编码，我将如何获得字符的代码点？

```
InputStreamReader r = new InputStreamReader(bla, Charset.forName("UTF-8"));
int whatIsThis = r.read(); 
```

上面代码片段中的 read() 返回了什么？它是unicode代码点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:58:56.110

它不读取 unicode 代码点，而是读取 UTF-16 代码单元。低于 0xFFFF 的代码点没有区别，但高于 0xFFFF 的代码点分别由 2 个代码单元表示。这是因为您不能在 16 位中获得高于 0xFFFF 的值。

在这种情况下也是如此：

```
byte[] a = {-16, -96, -128, -128}; //UTF-8 for  U+20000

ByteArrayInputStream is = new ByteArrayInputStream(a);
InputStreamReader r = new InputStreamReader(is, Charset.forName("UTF-8"));
int whatIsThis = r.read();
int whatIsThis2 = r.read();
System.out.println(whatIsThis); //55360 not a valid stand alone code point 
System.out.println(whatIsThis2); //56320 not a valid stand alone code point 
```

使用代理值，我们将它们放在一起得到`0x20000`：

```
((55360 - 0xD800) * 0x400) + (56320 - 0xDC00) + 0x10000 == 0x20000 
```

有关 UTF-16 如何工作的更多信息：[http ://en.wikipedia.org/wiki/UTF-16](http://en.wikipedia.org/wiki/UTF-16)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:05:02.227

[`Reader.read()`](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html#read%28%29)`char`如果没有更多数据可用，则返回一个可以转换为或 -1 的值。

A`char`是（隐式）UTF-16BE 编码中的 16 位代码单元。这种编码可以用单个`char`. [补充范围](http://www.unicode.org/glossary/#supplementary_code_point)使用两个`char`序列表示。

该[`Character`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html)类型包含将 UTF-16 代码单元转换为 Unicode 代码点的方法：

当您从一个[序列](http://docs.oracle.com/javase/7/docs/api/java/lang/CharSequence.html)中传入两个连续值时，需要两个`char`s 的代码点将满足[isHighSurrogate](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isHighSurrogate%28char%29)和[isLowSurrogate](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isLowSurrogate%28char%29)。[codePointAt](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#codePointAt%28java.lang.CharSequence,%20int%29)方法可用于从代码单元序列中提取代码点。从代码点到 UTF-16 代码单元有类似的方法。

* * *

代码点流阅读器的示例实现：

```
import java.io.*;
public class CodePointReader implements Closeable {
  private final Reader charSource;
  private int codeUnit;

  public CodePointReader(Reader charSource) throws IOException {
    this.charSource = charSource;
    codeUnit = charSource.read();
  }

  public boolean hasNext() { return codeUnit != -1; }

  public int nextCodePoint() throws IOException {
    try {
      char high = (char) codeUnit;
      if (Character.isHighSurrogate(high)) {
        int next = charSource.read();
        if (next == -1) { throw new IOException("malformed character"); }
        char low = (char) next;
        if(!Character.isLowSurrogate(low)) {
          throw new IOException("malformed sequence");
        }
        return Character.toCodePoint(high, low);
      } else {
        return codeUnit;
      }
    } finally {
      codeUnit = charSource.read();
    }
  }

  public void close() throws IOException { charSource.close(); }
} 
```

# sql-server - 用于插入 3 级层次结构的 SQL Server 存储过程

> ID：14222475
> 
> 赞同：0
> 
> 时间：2013-01-08T19:20:53.833
> 
> 标签：sql-server, sql-server-2008, stored-procedures

给定的业务对象类似于：

```
public class MyBase
{
    public int Id { get; set; }
}

public class Parent : MyBase
{
    public List<Child> Children { get; set; }
    // Additional objects with 1:1 relationship
}

public class Child : MyBase
{
    public Parent Parent { get; set; }
    public List<Grandchild> Grandchildren { get; set; }
    // Some other properties
}   

public class GrandChild : MyBase
{
    public Child { get; set; }
    // Some other properties including a timestamp
} 
```

[由于EF 在这种情况下的性能不佳，](https://stackoverflow.com/q/13182603/141172)我正在尝试用 ADO.Net 和存储过程替换最初使用 Entity Framework 编写的批量插入功能。

不是数据库专家，我首先将自己定位于

[http://www.sommarskog.se/arrays-in-sql-2008.html](http://www.sommarskog.se/arrays-in-sql-2008.html)

使用该指南，我能够创建一个性能良好（相对于 EF）的存储过程，该存储过程插入 a`Child`及其`List<GrandChild>`.

```
CREATE TYPE tvpInt32List AS TABLE (n int NOT NULL)

CREATE PROCEDURE uspInsertChild @parentId INT, @fk1Id INT, @fk2Id INT, 
@listValues tvpInt32List READONLY 
AS
DECLARE @id INT

BEGIN TRANSACTION   

BEGIN TRY   
    INSERT INTO dbo.Children VALUES(@fk2Id, @fk1Id, NULL, 0, 1, NULL, NULL, NULL, NULL, NULL, @fk1Id, @parentId)

    SET @Id = SCOPE_IDENTITY() 

    INSERT INTO dbo.Grandchildren SELECT n, '', GETDATE(), @id FROM @listValues

    COMMIT TRANSACTION
END TRY

BEGIN CATCH
    ROLLBACK TRANSACTION
END CATCH 
```

但是，我想更进一步，创建一个接受对象数据的存储过程，然后为每个`Parent`对象创建关联`List<Child>`的 和。`List<GrandChild>``Child`

我在概念上不知道如何在存储过程中处理它。

我可以使用什么策略来传递该类型的数据结构并在存储过程中对其进行处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-14T11:23:26.517

猜你写的存储过程，为了输入父母和孩子，其中一种选择是以xml发送你的数据，这又可以很容易地从你的父对象中提取出来，并利用存储过程的力量来做你的交易.

# java - 如何在本机浏览器中打开 URI (android)

> ID：14222478
> 
> 赞同：1
> 
> 时间：2013-01-08T19:21:05.997
> 
> 标签：java, android

我想在本机浏览器中打开页面 ya.ru。这就是我所拥有的

```
list.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        String url = "http://ya.ru"; 
        Intent intent1 = new Intent(Intent.ACTION_VIEW);
        intent1.setData(Uri.parse(url));
        startActivity(intent1);
    }
}); 
```

你能告诉我我应该写什么，`uses-permissions`除了

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

或者代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:27:27.087

尝试

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.ya.ru"));
startActivity(intent); 
```

在 AndroidManifest.xml 你必须写：

> `<uses-permission android:name="android.permission.INTERNET" />`

# ios6 - iOS：为上传创建后台队列？

> ID：14222479
> 
> 赞同：1
> 
> 时间：2013-01-08T19:21:09.213
> 
> 标签：ios6, grand-central-dispatch, nsoperationqueue, block

我有一个具有五个离散 TabController 的应用程序。每个 TabController 都会做一些工作并将结果提交给服务器。
您能否就如何使用串行队列异步提交数据给我建议？

我应该有一个单身人士吗`UploadsService`，它有一个`dispatch_queue_t uploadsQueue`引用，五个 TabController 中的每一个都可以访问和提交工作块吗？

或者我应该有五个串行队列（每个 TabController 一个）存在于每个 TabBarController 中，并让每个 TabController 使用自己的串行队列单独提交到服务器？

我试图模拟的是一种“提交并忘记它”的方法。用户只需在五个 TabController 之间轻松移动，频繁地向服务器提交结果。提交每个任务可能需要 20 秒左右。我设想了一个集中式串行队列来防止并发问题，但我想知道是否需要创建一个单例类，其唯一目的只是容纳一个集中式串行队列。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T22:03:04.997

我会亲自使用别人的辛勤工作（网络中断，应用程序后台等所有边缘情况）。MKNetworkKit 为我解决了上述所有问题（排队等）：

[https://github.com/mugunthkumar/mknetworkkit](https://github.com/mugunthkumar/mknetworkkit)

在应用委托中创建共享 apiEngine：

```
_apiEngine = [[MKNetworkEngine alloc] initWithHostName:@"example.org" apiPath:@"/upload/textdetective/" customHeaderFields:nil];
[_apiEngine useCache]; 
```

然后在需要的地方：

```
MKNetworkEngine *engine = [delegate apiEngine];
NSString* bundle = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"];
NSString* version = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleShortVersionString"];
NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
[params setValue:bundle forKey:@"bundle"];
[params setValue:version forKey:@"version"];
MKNetworkOperation *op = [engine operationWithPath:@"" params:params httpMethod:@"POST" ssl:YES];
[op setFreezable:YES];
[engine enqueueOperation:op]; 
```

# jquery - jquery在选中复选框时执行某些操作不起作用

> ID：14222480
> 
> 赞同：0
> 
> 时间：2013-01-08T19:21:09.633
> 
> 标签：jquery, if-statement, checkbox

我有这个

```
$("input:checkbox").live("click", function() {
    if(this.checked){
    $(this).next().show();
    $(this).prev().css('color','red');}
    else{
    $(this).next().hide();
    $(this).prev().css('color','black');}
}); 
```

但是 jquery 并不适用嵌套在 IF 语句中的所有命令！它只执行最后一个！

```
$(this).prev().css('color','red'); 
```

并忽略所有其他命令！我想当我点击复选框做一个事情的清单！而不仅仅是一个！请问我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:24:12.823

我相信你的下一个元素不能以这种方式显示，比如`<br/>`

例如在这段代码中

```
<input type="checkbox"/>
<br/>
<a style="display:none;">test</a> 
```

`<a>`不会出现，因为你`.next()`正在匹配`<br/>` （[http://jsfiddle.net/bukfixart/SgGEZ/](http://jsfiddle.net/bukfixart/SgGEZ/)）

# asp.net-mvc - 具有 MVC3 视图模型和淘汰模型的多个 JSON 参数

> ID：14222485
> 
> 赞同：0
> 
> 时间：2013-01-08T19:21:30.820
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, knockout.js, knockout-mvc

我在通过 JSON 将数据发送回我的 MVC3 控制器时遇到了一些问题。

我的最终目标是让我的控制器接收来自淘汰赛的数据和来自视图的当前模型。

我可以轻松取回可观察数组，也可以轻松取回用于填充视图的原始模型。但我无法在浏览器中获取对模型所做的更新。

通常，提交会自动发回视图模型，我想我只需要调用该机制。

我的代码目前正确地为我提供了敲除数组，但模型是“旧的”，它是用于从服务器填充视图的数据。

我真的在寻找如何在表单上启动允许我通过 JSON（或另一种更好的方式）发回数据的机制

编辑：数据线已更改。现在我把模型拿回来了，但是项目数组的大小正确但有空项目。看起来淘汰赛映射不太有效。

控制器签名：

```
public ActionResult Save(
                           IEnumerable<ItemModel> eventlist,
                           ViewHeaderModel model)

     var vm = @Html.Raw(Json.Encode(Model));

        $.ajax({
            async: false,
            url: '/controller/schedule/save,
            data: $('#myForm').serialize()+"&" +$.param({'eventlist': ko.toJS(self.DraftKoModel.ScheduleItems)}),
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            traditional: true,
            success: function (result) {
              alert("HEEEEEEELP! I'm trapped!")
            } 
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:46:50.913

刚刚测试为我的应用添加了一个快速测试页面。下面的代码应该可以工作：

```
$.ajax({
    url: '/controller/schedule/save',
    data: $("#myForm").serialize() + "&" + $.param({'eventlist' : ko.toJS(self.DraftKoModel.ScheduleItems}),
    type: "POST",
    dataType: "application/JSON",
    success: function (result) {
          alert("HEEEEEEELP! I'm trapped!")
        } 
}); 
```

[使用此博客文章作为参考将其放在一起。](http://www.jblotus.com/2011/07/12/combine-serialized-form-post-data-with-arbitrary-object-in-jquery/)

让我知道这是否有帮助！

# c - 用C中的空格替换字符数组中的制表符

> ID：14222487
> 
> 赞同：3
> 
> 时间：2013-01-08T19:21:31.253
> 
> 标签：c, arrays, file-io

我做了一个小 C 程序，这样我就可以自动清除作业中的所有选项卡，并用 4 个空格替换它们。我在具有以下功能的字符数组中找到标签 -

```
char * tabFinder(char * fileString,int * nonNullItems)
{
    int numElements = 0;
    int run = 1;
    while(run)
    {
        while(fileString[numElements] != '\t' &&
              fileString[numElements] != '\0')
            numElements++;

        if(fileString[numElements] == '\t')
        {
            fileString = tabDestroyer(fileString,&numElements,nonNullItems);
            *nonNullItems = *nonNullItems + 3;
        } else run = 0;

    }
    fileString[*nonNullItems + 1] = '\0';
    return fileString;
} 
```

每次找到一个选项卡时，它都会将它传递给我的替换函数 tabDestroyer，它看起来像这样 -

```
char * tabDestroyer(char * fileString, int * indexOfTab,int * currentItems)
{
    char * tempString = malloc(*currentItems + 3);
    int index = 0,tempIndex;;

    while(index < *indexOfTab)
    {
        tempString[index] = fileString[index];
        index++;
    }   

    tempString[index++] = " ";

    tempString[index++] = " ";

    tempString[index++] = " ";

    tempString[index++] = " ";

    *currentItems = *currentItems + 3;

    while(index < *currentItems)
    {
        tempString[index] = fileString[index - 3];
        index++;
    }

    return tempString;
} 
```

它成功地找到并替换了选项卡，但我对替换选项卡的内容有疑问。

例如，从一个看起来像这样的文件中读取的字符串（假设前面有一个选项卡） -

```
 int i, numHuge, rowCount = 0; 
```

变成了这个——

```
FFFFint i, numHuge, rowCount = 0; 
```

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:22:57.747

```
char * tempString;
tempString[index++] = " ";
                      ^ ^ 
```

对于初学者，使用单引号，即`' '`.

# ruby-on-rails - 如何修复嵌套字段批量分配受保护属性错误？尽管有 attr_accessible

> ID：14222495
> 
> 赞同：0
> 
> 时间：2013-01-08T19:21:57.753
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, nested-forms, mass-assignment

我有一个属于 ParkingCompany 或用户的地址模型。每个地址可以属于多个用户。但是每个 ParkingCompany 都有一个地址。

我`Can't mass-assign protected attributes: addresses`的表格出现错误。这是我的代码

停车公司型号：

```
class ParkingCompany < ActiveRecord::Base
 attr_accessible :company_id, :description, :email, :telephone, :website, :company_name, :addresses_attributes
 has_many :parking_branch
 has_one :address
 accepts_nested_attributes_for :address
end 
```

地址型号：

```
class Address < ActiveRecord::Base
  attr_accessible :address1, :address2, :address3, :address_id, :city, :country, :county, :house_name, :postcode, :parking_companies_attributes
  belongs_to :parking_companies
  has_many :users
end 
```

当我尝试通过以下表单添加新公司时，给我“无法批量分配受保护的属性：地址”错误

我的嵌套形式，new.html.erb：

```
<h1>New Company</h1>

<%= simple_form_for @parking_company do |f| %>
  <%= f.error_notification %>
  <%= f.input :company_name, :required => true %>
  <%= f.input :email, :required => true %>
  <%= f.input :website %>
  <%= f.input :description, :as => :text, :input_html => { :rows => 3 } %>
  <%= f.input :telephone, :required => false %>
     <%= f.simple_fields_for :addresses do |a| %>
     <%= a.input :address1 %>
     <%= a.input :address2, :required => false %>
     <%= a.input :address3, :required => false %>
     <%= a.input :city %>
     <%= a.input :county %>
     <%= a.input :postcode %>
     <%= a.country_select :country, ["United Kingdom"], { keys: :alpha3s, values: :names } %>
  <% end %><br/>
  <%= f.button :submit, 'Create new company', :class => 'btn-primary' %>
<% end %> 
```

以防万一，这是parking_companies_controller

```
class ParkingCompaniesController < ApplicationController
  def index
    authorize! :index, @parking_company, :message => 'Not authorized as an administrator.'
    @parking_companies = ParkingCompany.all
  end

  def show
    @parking_company = ParkingCompany.find(params[:id])
  end

  def new
    @parking_company = ParkingCompany.new

  end

  def create
    @parking_company = ParkingCompany.create(params[:parking_company])
  end

  def update
  end

  def destroy
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:26:28.107

有一个`has_one :address`然后你`:addresses`在表格中引用。

# ios - 在进行干净构建时，如何让 XCode 从模拟器中删除应用程序？

> ID：14222496
> 
> 赞同：2
> 
> 时间：2013-01-08T19:22:00.380
> 
> 标签：ios, xcode

我正在开发一个 iphone 应用程序，当我处于开发的早期阶段时，我经常需要从模拟器中删除应用程序以重置应用程序的数据。当我清理源代码时，我想让 XCode 自动执行此操作，但我不确定如何执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T20:00:42.723

[在Yeah Right Keller](http://yeahrightkeller.com/2009/run-script-while-cleaning-in-xcode/)上的这篇文章的帮助下，我想出了如何做到这一点。将外部构建脚本设置为项目的依赖项可以让脚本在您清理项目时运行。

由于那篇文章已经过时，我为 XCode 4.5 编写了新的说明。 [http://nerglish.tumblr.com/post/40191311173/delete-app-from-simulator-when-cleaning-in-xcode](http://nerglish.tumblr.com/post/40191311173/delete-app-from-simulator-when-cleaning-in-xcode)

这是我为从模拟器中删除应用程序而编写的脚本

```
#!/bin/bash

# DeleteApp.sh
#
# Deletes iPhone app from the iOS Simulator when called with the clean action
#

APP_NAME="$PROJECT_NAME.app"

buildAction () {
echo "Building..."

# Don't do anything when building

}

cleanAction () {
echo "Cleaning..."

echo "Killing iPhone Simulator"
killall "iPhone Simulator"

# Change IFS to preserve spaces in the paths
IFS=$(echo -en "\n\b")
for appDir in $(find "/Users/$USER/Library/Application Support/iPhone Simulator"/*/Applications -name "$APP_NAME")
do
    dir=$(dirname "$appDir")
    echo "Deleting $dir"
    rm -rf "$dir"
done
}

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
# MAIN

echo "Running with ACTION=${ACTION}"

case $ACTION in
# NOTE: for some reason, it gets set to "" rather than "build" when
# doing a build.
"")
buildAction
;;

"clean")
cleanAction
;;
esac

exit 0 
```

# android - 如何格式化 android.widget.TextView 文本以使 & 不显示为 &

> ID：14222500
> 
> 赞同：0
> 
> 时间：2013-01-08T19:22:25.863
> 
> 标签：android, android-layout

我在 android.widget.TextView 中设置推文，并且 & 最终格式化为

```
 &amp; 
```

我应该如何格式化才能正确显示 & 等特殊字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:28:33.160

使用`Html.fromHtml()`：

```
text.setText(Html.fromHtml("&amp;")); 
```

# vb.net - Excel 进程未在 VB.net 中关闭

> ID：14222501
> 
> 赞同：8
> 
> 时间：2013-01-08T19:22:27.587
> 
> 标签：vb.net, excel, com, interop

我正在使用 interop.excel 创建一个 excel 文件，并且该过程没有关闭。这是我尝试使用的代码。

```
 Private Sub converToExcel(fileLoc As String, ds As DataSet)
    Dim xlApp As Excel.Application
    Dim xlWorkBook As Excel.Workbook
    Dim xlWorkBooks As Excel.Workbooks
    Dim xlWorkSheet As Excel.Worksheet
    Dim misValue As Object = System.Reflection.Missing.Value
    Dim i As Integer
    Dim j As Integer

    xlApp = New Excel.Application
    xlWorkBooks = xlApp.Workbooks
    xlWorkBook = xlWorkBooks.Add(misValue)
    xlWorkSheet = xlWorkBook.Sheets("sheet1")

    For i = 0 To ds.Tables(0).Rows.Count - 1
        For j = 0 To ds.Tables(0).Columns.Count - 1
            xlWorkSheet.Columns.NumberFormat = "@"
            xlWorkSheet.Cells(i + 1, j + 1) = String.Format("{0}", ds.Tables(0).Rows(i).Item(j).ToString())
        Next
    Next

    xlWorkSheet.SaveAs(fileLoc)
    xlWorkBook.Close()
    xlApp.Quit()

    releaseObject(xlWorkSheet)
    releaseObject(xlWorkBook)
    releaseObject(xlWorkBooks)
    releaseObject(xlApp)

End Sub
Private Sub releaseObject(ByVal obj As Object)
    Try
        System.Runtime.InteropServices.Marshal.ReleaseComObject(obj)
        obj = Nothing
    Catch ex As Exception
        obj = Nothing
    Finally
        GC.Collect()
    End Try
End Sub 
```

我想我错过了一个 COM 对象，但似乎找不到解决方案。另请注意，这是在 64 位 Windows 8 上运行的。任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-08T21:12:56.197

像这样的手动内存管理永远不会奏效。这是一个众所周知的问题，也是垃圾收集器被发明的核心原因。程序员永远忘记释放内存。

当您*看不到*正在使用的内存时，它会变得更加困难。在您的代码中肯定是这种情况，`xlWorkSheet.Cells(i + 1, j + 1)`表达式使用不少于*三个*引用。一个用于 Cells 属性返回的范围对象，一个用于选择的子范围对象`i+1`，另一个用于选择的子范围对象`j+1`。VB.NET 语言提供了非常好的语法糖，没有它编写 COM 代码是非常痛苦的。但对让您查看参考资料没有帮助。您不仅不能在源代码中看到它，而且调试器也绝对无法帮助您看到它们。

这是 .NET 中一个非常解决的问题，它有一个垃圾收集器，它可以看到*一切*。最基本的问题是你不给它机会解决你的问题。你犯的错误是你*停止了*。可能是在最后一条语句上设置断点，然后在任务管理器中查看 Excel.exe 仍在运行。是的，这很正常。垃圾收集不是*即时*的。

调用 GC.Collect() 应该使其立即生效，但这在运行项目的 Debug 构建的特定情况下不起作用。然后局部变量的生命周期被延长到方法的末尾，帮助您在 Autos/Locals/Watch 窗口中查看它们。换句话说， GC.Collect() 实际上并不收集*任何*接口引用。有关此行为的更多信息，请参阅[这篇文章](https://stackoverflow.com/a/17131389/17034)。

简单的解决方法是*不要停止*。继续做有用的事情给垃圾收集器一个运行的理由。或者让您的程序在完成后终止，Excel 在终结器线程最后一次运行时终止。之所以有效，是因为具有引用的局部变量不再在范围内。

但无论如何，每个人都想要即时修复。您可以通过删除所有 releaseObject() 调用来获得它。而是这样做：

```
converToExcel(path, dset)
GC.Collect()
GC.WaitForPendingFinalizers() 
```

或者换句话说，在方法返回*后强制收集。*局部变量不再在范围内，因此它们无法保留 Excel 引用。现在，当您调试它时，它也可以工作，就像您在没有调试器的情况下运行 Release 构建时一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:05:48.730

试试 System.Runtime.InteropServices.Marshal.FinalReleaseComObject，这应该会有所帮助……如果我没记错的话，你也应该调用 xlWorkBook.Close() 和 xlapp.quit。首先调用它们，然后将它们设置为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T20:11:40.687

GC.Collect 在你放置它的地方没有多大意义，如果你应该*在*从`converToExcel`. 此外，您可能需要等待终结器运行。就我个人而言，我认为 Hans 的答案是可行的方法，但我从用 C# 编写 office 插件的个人经验中知道，有时需要进行手动引用计数，特别是当您需要与旧的 office 版本兼容时。（有许多记录在案的问题，特别是在处理来自办公室的事件时，只能通过手动引用计数可靠地解决。此外，当 GC 以错误的顺序释放时，一些 COM 库根本不喜欢，但事实并非如此与办公室。）

继续讨论代码中的实际问题：此处未发布三个中间 COM 对象：

*   `xlWorkBook.Sheets`返回类型的集合`Excel.Sheets`
*   `xlWorkSheet.Columns`返回类型为 COM 的对象`Excel.Range`
*   `xlWorkSheet.Cells`还返回一个`Excel.Range`对象

除此之外，如果 Marshal.ReleaseComObject 抛出异常，您在手动引用计数中做错了，因此我不会将它包装在异常处理程序中。在进行手动引用计数时，您必须在每次越过 COM->NET 边界时释放每个 COM 对象一次，这意味着`Excel.Range`需要在循环的每次迭代中释放对象。

这是为我正确终止 Excel 的代码：

```
Imports Microsoft.Office.Interop
Imports System.Runtime.InteropServices

Private Sub converToExcel(fileLoc As String, ds As DataSet)
    Dim xlApp As New Excel.Application
    Dim xlWorkBooks As Excel.Workbooks = xlApp.Workbooks
    Dim xlWorkBook As Excel.Workbook = xlWorkBooks.Add(System.Reflection.Missing.Value)
    Dim xlWorkSheets As Excel.Sheets = xlWorkBook.Sheets
    ' accessing the sheet by index because name is localized and your code will fail in non-english office versions
    Dim xlWorkSheet As Excel.Worksheet = xlWorkSheets(1)

    For i = 0 To ds.Tables(0).Rows.Count - 1
        For j = 0 To ds.Tables(0).Columns.Count - 1
            ' couldn't this be moved outside the loop?
            Dim xlColumns As Excel.Range = xlWorkSheet.Columns
            xlColumns.NumberFormat = "@"
            Marshal.ReleaseComObject(xlColumns)

            Dim xlCells As Excel.Range = xlWorkSheet.Cells
            xlCells(i + 1, j + 1) = ds.Tables(0).Rows(i).Item(j).ToString()
            Marshal.ReleaseComObject(xlCells)
        Next
    Next

    xlWorkSheet.SaveAs(fileLoc)
    'xlWorkBook.Close() -- not really necessary
    xlApp.Quit()

    Marshal.ReleaseComObject(xlWorkSheet)
    Marshal.ReleaseComObject(xlWorkSheets)
    Marshal.ReleaseComObject(xlWorkBook)
    Marshal.ReleaseComObject(xlWorkBooks)
    Marshal.ReleaseComObject(xlApp)
End Sub 
```

如果您想格外小心，您需要处理来自 office API 的异常并在 finally 子句中调用 ReleaseComObject。定义通用包装器并编写 using-clauses 而不是 try-finally 会很有帮助（使包装器成为结构而不是类，因此您不会在堆上分配包装器）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-06T22:10:16.317

终于解决了：）

```
Private Function useSomeExcel(ByVal Excelfilename As String) 
  Dim objExcel As Excel.Application
  Dim objWorkBook As Excel.Workbook
  Dim objWorkSheets As Excel.Worksheet

  Dim datestart As Date = Date.Now
  objExcel = CreateObject("Excel.Application") 'This opens...  
  objWorkBook = objExcel.Workbooks.Open(Excelfilename) ' ... excel process
  Dim dateEnd As Date = Date.Now
  End_Excel_App(datestart, dateEnd) ' This closes excel proces
End Function 
```

使用这个方法

```
 Private Sub End_Excel_App(datestart As Date, dateEnd As Date)
    Dim xlp() As Process = Process.GetProcessesByName("EXCEL")
    For Each Process As Process In xlp
     If Process.StartTime >= datestart And Process.StartTime <= dateEnd Then
       Process.Kill()
       Exit For
     End If
    Next
  End Sub 
```

此方法关闭打开的特定进程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-09T18:33:47.007

```
'Get the PID from the wHnd and kill the process.
' open the spreadsheet
ImportFileName = OpenFileDialog1.FileName
excel = New Microsoft.Office.Interop.Excel.ApplicationClass
wBook = excel.Workbooks.Open(ImportFileName)
hWnd = excel.Hwnd
Dim id As Integer = GetWindowThreadProcessId(hWnd, ExcelPID) 
```

* * *

```
Sub CloseExcelFile()
        Try
            ' first try this
            wBook.Saved = True
            wBook.Close()
            excel.Quit()

            ' then this.
            System.Runtime.InteropServices.Marshal.ReleaseComObject(excel)
            excel = Nothing

            ' This appears to be the only way to close excel!
            Dim oProcess As Process
            oProcess = Process.GetProcessById(ExcelPID)
            If oProcess IsNot Nothing Then
                oProcess.Kill()
            End If

        Catch ex As Exception
            excel = Nothing
        Finally
            GC.Collect()
        End Try
    End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-15T15:34:04.703

我没有看到任何人正确解决正在发生的事情，而是尝试为其创建解决方法。

这里发生的是工作簿在后台提示保存。在您的代码中，您保存的是工作表而不是工作簿。您可以欺骗它并将工作簿的保存状态设置为 true 或在退出 Excel 应用程序之前保存工作簿。

我也有这个问题。Excel 进程将在应用程序打开的整个过程中运行。通过添加 xlWorkBook.Saved = True 行，该过程将在调用 xlApp.Quit() 后结束。就我而言，我不需要保存 excel 文件，只需要参考它的值。

选项 #1 - 不保存工作簿：

```
xlWorkSheet.SaveAs(fileLoc)
xlWorkBook.Saved = True       ' Add this line here.
'xlWorkBook.Close()           ' This line shouldn't be necessary anymore.
xlApp.Quit() 
```

选项 #2 - 将工作簿保存到新文件：

```
'xlWorkSheet.SaveAs(fileLoc)  ' Not needed
xlWorkBook.SaveAs(fileLoc)    ' If the file doesn't exist
'xlWorkBook.Close()           ' This line shouldn't be necessary anymore.
xlApp.Quit() 
```

选项 #3 - 将工作簿保存到现有文件：

```
'xlWorkSheet.SaveAs(fileLoc)  ' Not needed
xlWorkBook.Save(fileLoc)      ' If the file does exist
'xlWorkBook.Close()           ' This line shouldn't be necessary anymore.
xlApp.Quit() 
```

.Quit() 方法：
[https ://docs.microsoft.com/en-us/dotnet/api/microsoft.office.interop.excel._application.quit?view=excel-pia#Microsoft_Office_Interop_Excel__Application_Quit](https://docs.microsoft.com/en-us/dotnet/api/microsoft.office.interop.excel._application.quit?view=excel-pia#Microsoft_Office_Interop_Excel__Application_Quit)

.Saved() 方法：
[https ://docs.microsoft.com/en-us/dotnet/api/microsoft.office.interop.excel._workbook.saved?view=excel-pia#Microsoft_Office_Interop_Excel__Workbook_Saved](https://docs.microsoft.com/en-us/dotnet/api/microsoft.office.interop.excel._workbook.saved?view=excel-pia#Microsoft_Office_Interop_Excel__Workbook_Saved)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-24T14:21:48.027

就像在你的代码中添加这一行一样简单，就在打开工作簿之后：

`oExcel.displayalerts = False`

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-10-26T07:30:22.767

```
Dim xlp() As Process = Process.GetProcessesByName("EXCEL")

 For Each Process As Process In xlp
   Process.Kill()
     If Process.GetProcessesByName("EXCEL").Count = 0 Then
       Exit For
     End If
 Next 
```

# php - 使用正则表达式重命名类

> ID：14222506
> 
> 赞同：0
> 
> 时间：2013-01-08T19:22:52.077
> 
> 标签：php, regex, html-parsing

我如何使用 RegEx 来查找`<a class="modal>`和替换它`<a class="modal-link"`？

我试过了：

```
preg_replace('/<a class="(.*?)">(.*?)<\/a>/i', '<a class="$1-link">$2</a>', $input); 
```

但它不起作用。请有人指出我正确的解决方案吗？

顺便说一句：我正在设计 Joomla 2.5 的首页编辑内容页面，经批准的用户可以在其中发布文章。我想在我的正则表达式上应用的那个字符串来自：

```
<?php echo $this->form->getInput('image_intro', 'images'); ?> 
```

它生成这个 HTML：

```
<a class="modal" ...>Choose</a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T19:31:27.950

使用 PHP 类的非基于正则表达式的解决方案[`DOMDocument`](http://php.net/DOMDocument)是：

```
// Load up the HTML in DOMDocument
$doc = new DOMDocument;
$doc->loadHTML( '<a class="modal">Stuff</a>'); // Or: $doc->loadHTML( $this->form->getInput('image_intro', 'images'));

// Create a new XPath object to find the correct <a> tags
$xpath = new DOMXPath( $doc);

// Iterate over all <a class="modal"> tags
foreach( $xpath->query( "//a[@class='modal']") as $a) {
    // Set the class attribute correctly
    $a->setAttribute( 'class', $a->getAttribute( 'class') . '-link');
    echo $doc->saveHTML( $a); // Print the fixed <a> tag
} 
```

这将输出类似于：

```
<a class="modal-link">Stuff</a> 
```

这种方法比基于正则表达式的方法更健壮和稳定，尤其是当您从用户输入中获取 HTML 时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T19:29:52.267

正则表达式很好。preg_replace 不改变 $input 变量。

尝试

```
$new_string = preg_replace('/<a class="(.*?)">(.*?)<\/a>/i', '<a class="$1-link">$2</a>', $input); 
```

但**不要使用正则表达式来解析 HTML**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T19:41:17.520

没有办法可靠或令人满意地使用正则表达式执行此操作，但如果粗略的搜索和替换对于您正在执行的操作是可以的，那么它可以完成：

```
$code = '<a class="modal">Choose</a>';
$regex = '/(?<=\sclass=")modal(?="[\s>])/';
echo preg_replace($regex, 'modal-link', $code); 
```

至少有两个原因表明这是一个坏主意：

1.  您不应使用正则表达式解析或修改 HTML。解析或修改 HTML 不是一个常规问题，它是一个相当复杂和错综复杂的问题。当你应该使用凿子时，使用正则表达式就像使用大锤一样。

2.  在任何情况下，您都不应该修改 HTML 代码。HTML 应该只是 HTML。如果您需要您的 HTML 有所不同，那么您应该在源代码处更改 HTML，而不是试图强迫它变成这样的形状。

# git - 找出在给定哈希值的情况下是否在另一个提交之前或之后签入了 git 提交

> ID：14222510
> 
> 赞同：20
> 
> 时间：2013-01-08T19:23:04.933
> 
> 标签：git

我想念使用 svn 的一件事是修订号的简单编号。我可以轻松查看测试环境中部署的版本是在某个提交之前还是之后。

使用 git 对其提交使用哈希，有什么方法可以判断提交是在另一个提交之前还是之后进行的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T10:51:27.517

正如您所注意到的，在 Git 中事情并不是那么简单。特别是，“之前”和“之后”的定义需要进一步澄清。

如果您相信提交到您的存储库的人不会弄乱时间戳，并且您已经知道两个提交都在同一个分支上，那么您可以比较提交的时间戳并查看哪个更早。对每个提交使用以下命令，并比较结果。

```
git log -1 --format='%ci' <commit> 
```

但是，使用 Git，您不一定信任时间戳，因为与 Subversion 不同，它没有一个中央存储库来负责生成它们。你也不能确定两个提交在同一个分支上（尽管 Subversion 也存在这个问题）。

为了避免这些问题，讨论一个提交是否是另一个提交的祖先，而不是它是在它之前还是之后。在以下提交图中，B 和 C 是 A 的祖先，而 B 不是 C 的祖先，反之亦然：

```
B    (master)
| C  (branch)
|/
A    (root) 
```

要确定提交 A 是否是提交 B 的祖先，请使用以下命令（基于[git ready 上的一篇文章](http://gitready.com/intermediate/2009/04/03/find-ancestor-commits.html)）：

```
git rev-list <commitA> | grep $(git rev-parse <commitB>) 
```

第一部分列出了作为提交 A 的祖先的所有提交；第二部分获取提交 B 的完整哈希，然后在祖先列表中搜索该提交。如果您看到任何输出，则提交 A 是提交 B 的祖先。交换参数以计算提交 A 是否是提交 B 的祖先。

第二种形式较慢，但可以绝对确定一个提交是另一个提交的祖先。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-12-20T00:38:13.540

git merge-base 有一个标志。它只是返回一个 0/​​1 退出代码。

```
git merge-base --is-ancestor <commit> <commit> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-01T09:21:22.870

`git rev-list --count`能够帮助。假设`110a187`在 之前有 4 次提交`5d41af1`，那么：

```
 $ git rev-list --count 110a187..5d41af1
4
 $ git rev-list --count 5d41af1..110a187
0 
```

因此类似于：

```
test $(git rev-list --count $a..$b) == 0 && \
       echo "$a is not an ancestor of $b" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-08T19:36:33.707

在每个提交上使用[`git show`](http://www.kernel.org/pub/software/scm/git/docs/git-show.html)以查找提交的日期。没有办法只看哈希来确定顺序，因为它只是一个哈希。

您可以使用自定义格式字符串来显示您想要的内容，查看[手册页](http://www.kernel.org/pub/software/scm/git/docs/git-show.html)以获取更多信息。

```
git show --format="%ci" <commit> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-08T19:38:20.473

您可以从显示哈希、作者、日期和评论的日志中获取所有提交信息：

```
git log 
```

您可以从提交日志中提取特定提交的时间/日期。就像是：

```
git log -1 --format="%cd" <commit> 
```

'%cd' 以日志格式为您提供日期，您还可以执行以下操作：

*   %cD: RFC2822 风格
*   %cr：相对
*   %ct：UNIX 时间戳
*   %ci：ISO 8601 格式

从那里，如果您需要自动化，您可以与一些脚本进行一些比较。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-17T11:45:09.087

使用@me_and 提到的[所有备注](https://stackoverflow.com/a/14233620/1307867)，您还可以尝试：

```
git rev-list --no-walk commitA commitB 
```

在输出中，您将看到提供的提交按提交时间按时间倒序显示。因此，提供提交的顺序无关紧要（与@Douglas Bagnall[建议的想法相矛盾）。](https://stackoverflow.com/a/29984371/1307867)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-08T19:24:39.890

如果你使用标签，你可以做

```
git describe --tags 
```

这将告诉您自最后一个标签以来有多少次提交。

# jquery - JQuery Draggable with hover + custom helper 区别（IE vs Chrome）

> ID：14222511
> 
> 赞同：0
> 
> 时间：2013-01-08T19:23:04.903
> 
> 标签：jquery, hover, clone, draggable, helper

我有一个带有简单悬停效果的可拖动 div。当我使用“helper:clone”选项拖动此 div 时，拖动元素（Internet Explorer）时不会删除悬停效果。但是，如果我使用 Chrome，效果会被删除。

我的 CSS：

```
.div-draggable
{
  width: 100px;
  height: 25px;
  border: 1px solid #000;
  cursor: pointer;
}

.div-draggable:hover
{
  background: blue;
  border-color: red;
} 
```

我的 JS：

```
$(document).ready(function() {
  $('.div-draggable').draggable({
  helper: "clone"
  })
}); 
```

这是一个包含我的问题的 JsFiddle（请用 Chrome 和 IE 打开）

[http://jsfiddle.net/m3GyL/](http://jsfiddle.net/m3GyL/)

我需要删除悬停效果，因为我想自定义我的辅助元素，但由于悬停的背景+边框，我无法正确完成。

有谁能够帮我？我需要让它在 IE 中工作，就像它在 Chrome 中一样。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:17:53.460

我们可以使用拖动开始事件处理程序并在拖动时更改帮助器 ui 元素的 css，以确保它也可以跨浏览器工作：

```
 $(document).ready(function() {
      $('.div-draggable').draggable({
        helper: "clone",
        start: function(e, ui) {
          $(ui.helper).css("background", "white").css("border-color","black");
        }
      });
    }); 
```

[希望这会有所帮助，请在此处](http://jsfiddle.net/m3GyL/1/)找到已解决的小提琴。

# git - SourceForge Wiki：如何在 git repo 中添加指向源的永久链接

> ID：14222512
> 
> 赞同：1
> 
> 时间：2013-01-08T19:23:12.160
> 
> 标签：git, sourceforge, gitweb

我为一个[sourceforge 项目创建了一个](https://sourceforge.net/projects/jdcf/)[Wiki](https://sourceforge.net/p/jdcf/wiki/Home/)。在主页中，我在 git 树中放置了一些代码示例的链接。我经常提交，然后链接就过时了。

如何将 http 链接放在 master 分支上的最新版本？

以下是链接示例：`https://sourceforge.net/p/jdcf/code/ci/414b9c83de3a5a9f34303c4bb888b715ff6bbecb/tree/src-demo_01/org/dcf/demo/consumer/Component.java`

`/414b9c83de3a5a9f34303c4bb888b715ff6bbecb/`是我想的版本，我希望将其替换为`LATEST`. 我如何能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:41:39.337

使用`HEAD` [似乎有效](http://sourceforge.net/p/jdcf/code/ci/HEAD/tree/src-demo_01/org/dcf/demo/consumer/Component.java)：

```
http://sourceforge.net/p/jdcf/code/ci/HEAD/tree/src-demo_01/org/dcf/demo/consumer/Component.java 
```

此链接应提供最新文件而不会中断。

# java - MySQL + Android 检查是否存在更多值

> ID：14222515
> 
> 赞同：0
> 
> 时间：2013-01-08T19:23:21.177
> 
> 标签：java, android, mysql

我目前正在使用此代码进行注册：

```
value1 = registerEmail.getText().toString();
    value2 = registerPassword.getText().toString();
    value3 = registerName.getText().toString();
    try{
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection(url, user, pass);
        Statement st = con.createStatement();
        Log.d("Connectc","executing check");
        ResultSet res = st.executeQuery("SELECT * FROM user where email='"+value1+"'");
        while (res.next()) {
            userc = res.getString("email");
        }
            if (value1.equals(userc)) {
                tv.setText("Email already in use!");
            }
            else{
                Log.d("Connectc","registering");
                st.executeUpdate("INSERT INTO user (email, password, name) VALUES('"+value1+"', '"+value2+"', '"+value3+"' )");
                tv.setText("Data is successfully saved." );
                Intent i = new Intent(getApplicationContext(),
                        LoginActivity.class);
                                    startActivity(i);
                finish();
                Log.d("Connectl","pfffffffff");
            } 
```

是的，使用 json 会更好，但我需要使用它......所以代码检查电子邮件是否存在，我还需要检查用户名是否存在，我该怎么办？我必须添加另一个 sql 查询，或者我可以编辑它以检查用户名是否存在于数据库中？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:47:55.803

当您从用户那里获取输入时，最好使用准备好的语句。它不允许您插入任何`SQL Injection`

```
value1 = registerEmail.getText().toString();
value3 = registerName.getText().toString();

query = "SELECT * FROM user where email=? OR username=? ";
PreparedStatement st = con.prepareStatement(query); // con is active connection
st.setText(1,value1);
st.setText(2,value3); 
```

[如何使用准备好的语句示例。](http://www.roseindia.net/jdbc/jdbc-mysql/TwicePreparedStatement.shtml)

[什么是 SQL 注入？](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:43:49.713

如果电子邮件或用户名存在，这将返回行，以便您可以提示用户登录数据已经存在：

```
ResultSet res = st.executeQuery(
"SELECT * FROM user 
where email='"+value1+"' 
OR username='"+ value3+"'"); 
```

# jsf-2 - JSF2 的视图状态错误

> ID：14222516
> 
> 赞同：1
> 
> 时间：2013-01-08T19:23:24.210
> 
> 标签：jsf-2, primefaces

您好，我使用 Mojara 2.1.14 和 Primefaces 3.3.1 开发的应用程序出现以下错误。我不知道这是从哪里来的。请帮忙。几周以来，我一直在努力寻找解决方案。

```
java.lang.StringIndexOutOfBoundsException: String index out of range: -1
•       at java.lang.String.substring(String.java:1949)
•       at com.sun.faces.renderkit.ServerSideStateHelper.getState(ServerSideStateHelper.java:273)
•       at com.sun.faces.renderkit.ResponseStateManagerImpl.getState(ResponseStateManagerImpl.java:100)
•       at com.sun.faces.application.view.FaceletPartialStateManagementStrategy.restoreView(FaceletPartialStateManagementStrategy.java:353)
•       at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:138)
•       at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
•       at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:531)
•       at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:141)
•       at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
•       at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
•       at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
•       at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
•       at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
•       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
•       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
•       at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
•       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
•       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
•       at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:83)
•       at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
•       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
•       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
•       at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
•       at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
•       at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
•       at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
•       at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
•       at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
•       at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
•       at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
•       at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
•       at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
•       at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
•       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
•       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
•       at java.lang.Thread.run(Thread.java:679) 
```

这是我的 web.xml

```
<web-app id="WebApp_ID" version="2.5"
    xmlns="http://java.sun.com/xml/ns/j2ee">
    <filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
        <init-param>
            <param-name>thresholdSize</param-name>
            <param-value>2097152</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
     <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>  
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
    <!--   <param-value>Development</param-value>   -->
      <param-value>Production</param-value> 
    </context-param> 

    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>bluesky</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>server</param-value>
    </context-param>

    <context-param>
        <param-name>javax.faces.FACELETS_REFRESH_PERIOD</param-name>
        <param-value>-1</param-value>
    </context-param>

    <context-param>
        <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
        <param-value>true</param-value>
    </context-param>

     <context-param>        
        <param-name>com.sun.faces.COMPRESS_STATE</param-name>
        <param-value>false</param-value>
     </context-param>

    <context-param>
      <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
      <param-value>/META-INF/components.taglib.xml</param-value>
    </context-param>
    <context-param>
        <param-name>facelets.SKIP_COMMENTS</param-name>
        <param-value>true</param-value>
    </context-param>    
    <context-param>
        <param-name>defaultHtmlEscape</param-name>
        <param-value>true</param-value>
    </context-param>

    <context-param>
        <param-name>javax.faces.CONFIG_FILES</param-name>
        <param-value>/WEB-INF/jsf-beans.xml</param-value>
    </context-param>

    <session-config>
        <session-timeout>15</session-timeout>
    </session-config>    

     <security-constraint>
        <web-resource-collection> 
            <url-pattern>/views/*</url-pattern>
            <http-method>GET</http-method>      
        </web-resource-collection>
        <auth-constraint />
    </security-constraint>  
<!--    
    <context-param>
        <param-name>com.sun.faces.numberOfViewsInSession</param-name>
        <param-value>1</param-value>
    </context-param>

    <context-param>
        <param-name>com.sun.faces.numberOfLogicalViews</param-name>
        <param-value>1</param-value>
    </context-param> -->

  </web-app> 
```

谢谢你的帮助。

# css - fonts.com 的 Webfont 看起来太厚了

> ID：14222520
> 
> 赞同：4
> 
> 时间：2013-01-08T19:23:40.097
> 
> 标签：css, macos, fonts, webkit, webfonts

我在使用 fonts.com 字体（特别是 Avenir）时遇到问题。我试图向他们询问这个问题，但他们无法重现它。

这两个图像是相同的文本和相同的 CSS，除了不同的站点：

**字体网：**

![Fonts.com 渲染](../Images/634f2b77c8378baf3e38eb647dc63516.png)

**我的网站：**

![我的网站的渲染](../Images/10e00323dfa98f3a272c6729d4cddfc3.png)

这是在 Mac 上的 Chrome 上。Firefox 没有那么糟糕，但还是有点厚。我还没有在 IE 中测试过，但我认为它不会有同样的问题。

那么是什么原因造成的呢？*为什么在同一个浏览器/操作系统*中表现不同？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-08T19:33:10.683

OSX 上的亚像素抗锯齿可以使字体看起来很粗。这似乎是这里的问题。

看看您发布的文字的放大照片：

![在此处输入图像描述](../Images/5dc7b8e3f74e7f6599275c15ad5dda6d.png)

看到文字周围的彩色边缘了吗？那是亚像素抗锯齿。

您可以做的是使用 CSS 将其关闭：

```
.yourtext {
  -webkit-font-smoothing: antialiased;
} 
```

正如您可能从 -webkit 供应商前缀中看出的那样，这仅适用于 Safari 和 Chrome。`opacity: .99`在Firefox for OSX 中有一些 hack-ish 方法可以禁用亚像素抗锯齿（如

我有点惊讶 Fonts.com 没有意识到这一点，特别是因为他们自己禁用了亚像素抗锯齿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T00:32:25.900

此外，如果您已按照 Chris Herbert 的说明设置字体抗锯齿，但问题仍然存在，请确保在使用 声明字体时`@font-face...`，您已将值设置为`font-weight`而不是`font-weight: normal;`。`font-weight: 600;`在我的情况下似乎效果最好，而所有其他结果都是相同的仿粗体类型。

# javascript - 如何禁用对 vbox 子组件的拖动 (SENCHA TOUCH 2)

> ID：14222539
> 
> 赞同：0
> 
> 时间：2013-01-08T19:24:55.383
> 
> 标签：javascript, mobile, sencha-touch, sencha-touch-2

我有一个带有 vbox 布局的容器，这个容器有一个工具栏和 5 个 formPanel（每个都有一个字段集）作为子级，我的问题是这 5 个 formPanel 中的每一个似乎都是可拖动的，这是我不想要的。我已经尝试了几种禁用拖动这些元素的能力的方法，但到目前为止它们都没有工作......我怎样才能达到这样的结果？

到目前为止，我尝试了一些禁用拖动的方法（除了通过我的控制器做类似的事情）：

```
draggable: false,
disableSelection: true,
locked: true 
```

MyConfigView.js：

```
Ext.define('MyApp.view.MyConfigView', {
    extend: 'Ext.Panel',
    alias: 'widget.myConfigview',
    config: {
        layout: {
            type: 'vbox',
            align: 'stretch',
            fullscreen: true,
            animation: {
                type: 'slide',
                direction: 'left',
                duration: 8000
            }
        },
        defaults: {
            flex: 1
        },
        items: [{
            docked: 'top',
            xtype: 'toolbar',
            ui: 'light',
            title: 'Ya',
            itemId: 'toolbarConfigView',
            items: [{
                xtype: 'button',
                ui: 'back',
                text: 'Voltar',
                action: 'voltarConfigView',
                itemId: 'myConfigViewVoltarBt'
            }]
        }, {
            xtype: 'formpanel',
            itemId: 'fieldSetAssalto',
            items: [{
                xtype: 'fieldset',
                title: 'Ya',
                model: 'MyApp.model.MyModel',
                items: [{
                    xtype: 'textfield',
                    name: 'numeroTelefone',
                    label: 'Ya'
                }, {
                    xtype: 'textfield',
                    name: 'mensagem',
                    label: 'Ya'
                }]
            }]
        }, {
            xtype: 'formpanel',
            itemId: 'fieldSetIncendio',
            items: [{
                xtype: 'fieldset',
                title: 'Ya',
                model: 'MyApp.model.MyModel',

                items: [{
                    xtype: 'textfield',
                    name: 'numeroTelefone',
                    label: 'Ya'
                }, {
                    xtype: 'textfield',
                    name: 'mensagem',
                    label: 'Ya'
                }]
            }]
        }, {
            xtype: 'formpanel',
            itemId: 'fieldSetSequestro',
            items: [{
                xtype: 'fieldset',
                title: 'Ya',

                model: 'MyApp.model.MyModel',

                items: [{
                    xtype: 'textfield',
                    name: 'numeroTelefone',
                    label: 'Ya'
                }, {
                    xtype: 'textfield',
                    name: 'mensagem',
                    label: 'Ya'
                }]
            }]
        }, {
            xtype: 'formpanel',
            itemId: 'fieldSetEmedico',
            items: [{
                xtype: 'fieldset',
                title: 'Ya',

                model: 'MyApp.model.MyModel',

                items: [{
                    xtype: 'textfield',
                    name: 'numeroTelefone',
                    label: 'Ya'
                }, {
                    xtype: 'textfield',
                    name: 'mensagem',
                    label: 'Ya'
                }]
            }]
        }, {
            xtype: 'formpanel',
            itemId: 'fieldSetAcidente',
            items: [{
                xtype: 'fieldset',
                title: 'Ya',
                model: 'MyApp.model.MyModel',
                items: [{
                    xtype: 'textfield',
                    name: 'numeroTelefone',
                    label: 'Ya'
                }, {
                    xtype: 'textfield',
                    name: 'mensagem',
                    label: 'Ya'
                }, {
                    xtype: 'button',
                    ui: 'confirm',
                    text: 'Save'
                }]
            }]
        }]
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T06:58:04.930

你的意思是拖动滚动？

如果是，请尝试：

```
scrollable: false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T06:48:41.023

我有类似的情况，所以我向元素添加了一些指示符属性，告诉它是否可拖动，`dragstart`如果我检查目标元素是否可拖动，如果不是我停止拖动。我的方法看起来像这样：

```
 moreOptionsPanel.element.on("dragstart", function(evt){
        var isdraggable = event.target.getAttribute("isdraggable");
        if(isdraggable == "false")
        {
                var draggable = moreOptionsPanel.draggableBehavior.getDraggable();
                draggable.isDragging = false;
        }
    }); 
```

您应该能够放入`isdraggable : false`您的面板，或者如果您有 html，您可以将其作为属性并检查。基本上，您需要放置一些差异化因素，然后`ondragstart`您可以查看该元素或其任何父元素是否可拖动。

# django - 如何在单个 POST 上创建模型资源和相关的多对多资源？

> ID：14222542
> 
> 赞同：0
> 
> 时间：2013-01-08T19:25:07.050
> 
> 标签：django, api, tastypie

您好我正在使用tastepie在一个项目中公开一个rest api，并且卡在如何实现资源的端点上，所以这是我的问题：

我有以下型号，

```
class Product(models.Model):
    # fields...

class Order(models.Model):
    products = models.ManyToManyField('Product', through='OrderProduct')
    # other fields...

class OrderProduct(models.Model):
    order      = models.ForeignKey('Order')
    product    = models.ForeignKey('Product')
    quantity   = models.IntegerField()
    unit_price = models.FloatField()

    class Meta:
        unique_together = ['order', 'product'] 
```

以及以下资源，

```
class ProductResource(ModelResource):
    class Meta:
        resource_name = 'products'
        queryset = Product.objects.all()
        allowed_methods = ['get']

class OrderResource(ModelResource):
    products = fields.ToManyField('agro.api.OrderProductResource', 'orderproduct_set', related_name='product', full=True)

    class Meta:
        resource_name = 'orders'
        queryset = Order.objects.all()
        list_allowed_methods = ['get', 'post']
        detail_allowed_methods = ['get', 'put', 'delete']
        authentication = Authentication() # only for testing purposes
        authorization = Authorization() # only for testing purposes

    class OrderProductResource(ModelResource):
        product = fields.ForeignKey('agro.api.ProductResource', 'product')

        class Meta:
            resource_name = 'orderproducts'
            queryset = OrderProduct.objects.all()
            allowed_methods = ['get']
            include_resource_uri = False
            authentication = Authentication() # only for testing purposes
            authorization = Authorization()  # only for testing purposes 
```

当我尝试使用以下请求数据 POST 到 /orders/ 端点时

```
{
    "products": [
        {
            "product": "/products/1/",
            "quantity": 4,
            "unit_price": 5
        }
    ]
} 
```

我收到以下错误回溯

```
{
    "error_message": "orderproduct.order_id may not be NULL",
    "traceback": "Traceback (most recent call last):\n\n  File \"c:\\Python27\\lib\\site-packages\\tastypie\\resources.py\", line 192, in wrapper\n    response = callback(request, *args, **kwargs)\n\n  File \"c:\\Python27\\lib\\site-packages\\tastypie\\resources.py\", line 397, in dispatch_list\n    return self.dispatch('list', request, **kwargs)\n\n  File \"c:\\Python27\\lib\\site-packages\\tastypie\\resources.py\", line 427, in dispatch\n    response = method(request, **kwargs)\n\n  File \"c:\\Python27\\lib\\site-packages\\tastypie\\resources.py\", line 1165, in post_list\n    updated_bundle = self.obj_create(bundle, request=request, **self.remove_api_resource_names(kwargs))\n\n  File \"c:\\Python27\\lib\\site-packages\\tastypie\\resources.py\", line 1784, in obj_create\n    self.save_m2m(m2m_bundle)\n\n  File \"c:\\Python27\\lib\\site-packages\\tastypie\\resources.py\", line 1951, in save_m2m\n    related_bundle.obj.save()\n\n  File \"c:\\Python27\\lib\\site-packages\\django\\db\\models\\base.py\", line 463, in save\n    self.save_base(using=using, force_insert=force_insert, force_update=force_update)\n\n  File \"c:\\Python27\\lib\\site-packages\\django\\db\\models\\base.py\", line 551, in save_base\n    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)\n\n  File \"c:\\Python27\\lib\\site-packages\\django\\db\\models\\manager.py\", line 203, in _insert\n    return insert_query(self.model, objs, fields, **kwargs)\n\n  File \"c:\\Python27\\lib\\site-packages\\django\\db\\models\\query.py\", line 1593, in insert_query\n    return query.get_compiler(using=using).execute_sql(return_id)\n\n  File \"c:\\Python27\\lib\\site-packages\\django\\db\\models\\sql\\compiler.py\", line 912, in execute_sql\n    cursor.execute(sql, params)\n\n  File \"c:\\Python27\\lib\\site-packages\\django\\db\\backends\\util.py\", line 40, in execute\n    return self.cursor.execute(sql, params)\n\n  File \"c:\\Python27\\lib\\site-packages\\django\\db\\backends\\sqlite3\\base.py\", line 344, in execute\n    return Database.Cursor.execute(self, query, params)\n\nIntegrityError: orderproduct.order_id may not be NULL\n"
} 
```

如您所见，我没有指定新的 OrderProduct 应该与之相关的 Order，我想要实现的是发布一个 Order 资源，它的嵌套 OrderProduct 数据是在同一个 POST 请求上创建的。

我的问题来了，我如何指定 OrderProduct 引用的订单应该是正在创建的当前订单，最惯用的方法是什么，覆盖水合物（不确定此时我是否有 django orm 订单对象实例，因此可能这样做）设置相关模型的顺序或重新实现 hydrate_m2m 甚至 save_m2m，关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:57:12.133

感谢您的回答，我确实缺少订单，但在我的情况下，它必须是这样的数据表示要创建的订单以及填充中间表 OrderProduct（json 产品字段）的相关数据，所以这个想法是api的用户在同一请求中传递有关订单的信息和相关数据，例如创建一个新订单，用户将使用以下数据发布

```
{
    "products": {
        "product": "/products/1",
        "quantity": 4,
        "unit_price": 5
    }
} 
```

这些数据应生成以下数据库寄存器

```
Order
    # with and auto generated id

OrderProduct
    order # which points to the auto generated id
    product # points to a previous registered product 
```

如果我通过订单字段，此时我没有任何有效的 id（有点像鸡蛋问题），因为订单尚未保存在数据库中，tastepie 数据流将把订单保存在 ModelResource.obj_save 方法和该方法将调用 ModelResource.save_m2m 来创建发生异常的 OrderProduct 寄存器。

所以我需要知道在 save_m2m 尝试保存 OrderProduct 之前我必须实现哪个美味的钩子才能隐式设置该引用。

# python - 基本输入和 for 循环

> ID：14222543
> 
> 赞同：0
> 
> 时间：2013-01-08T19:25:08.597
> 
> 标签：python, for-loop

我只是在玩 Python，非常基本的东西。

逻辑如下：

1.  用户提供 3 摄氏度的温度，
2.  模块的主体计算他们的华氏当量，
3.  并将它们作为输出打印出来。

我想为这个任务使用 for 循环。

```
def main():
    c1, c2, c3 = input("Provide 3 Celsius temps. separated with a comma: ")
    for i in range(c1, c2, c3):
        fahrenheit = (9.0 / 5.0) * i + 32
        print "The temperature is", fahrenheit, "degrees Fahrenheit."

main() 
```

好吧，上面的代码只翻译和打印用户提供的第一个 Fahrenheit tempatarute。

请提供一些提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:27:04.450

完全删除`range()`呼叫：

```
for i in (c1, c2, c3): 
```

现在你正在制作`(c1, c2, c3)`一个元组，你可以直接循环它。`range()`仅当您需要制作一系列整数时才需要。

当`print`给出带有尾随逗号的表达式时，它不会打印换行符，因此要将所有三个值放在一行上，一种（简单）方法是：

```
c1, c2, c3 = input("Provide 3 Celsius temps. separated with a comma: ")
print "The temperatures are", 
for i in range(c1, c2, c3):
    fahrenheit = (9.0 / 5.0) * i + 32
    print fahrenheit,
print "degrees Fahrenheit." 
```

我们可以使这个复杂的快速，通过你的教程工作一点，越来越强大的 Python 结构将很快可用。:-)

# css - 向下滚动表格时，第一行的底部边框消失

> ID：14222544
> 
> 赞同：0
> 
> 时间：2013-01-08T19:25:10.497
> 
> 标签：css

我需要专家的帮助。

如何在以下小提琴中修改代码：http: [//jsfiddle.net/JDn7j/](http://jsfiddle.net/JDn7j/)或 css 以更正表格向下滚动时底部边框消失。我猜为了保持一致性，应该只删除 2 行的顶部边框。

我该怎么做呢？

```
<style type="text/css">
div.scrollTableContainer thead tr   {
    top: expression(offsetParent.scrollTop);
    left: expression(typeof(myvar) == 'undefined' ? 0+"px"+(myvar='true') : -1+"px");
}
table.dataTable {
    margin: 0;
    padding: 0;
    border-bottom: 1px solid #999;
    border-left: 1px solid #999;
}
table.dataTable th {
    margin: 0;
    border-right: 1px solid #999;
    border-top: 1px solid #999;
    font-weight: normal;
    padding: 4px 3px 3px 4px;
    background: #ccc;
    font-weight: bold;
}

table.dataTable td {
    margin: 0;
    border-right: 1px solid #999;
    border-top: 1px solid #999; 
    padding: 2px 3px 3px 4px
}

div.scrollTableContainer {
    height: 285px;  
    overflow: auto;
    width: 900px;
    margin: 15px 0 0 0;
    position: relative;
}

div.scrollTableContainer table {
    width: 952px;
}

div.scrollTableContainer thead tr   {
    position:relative;
}

div.scrollTableContainer td:last-child {padding-right: 20px;}

</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:13:46.430

你想要一个一致的底部边框吗？假设我正确理解你的问题......

将border-bottom：1px纯黑色添加到容器并从最后一行删除border-bottom。th:last-child {border-bottom: 0 }

# c++ - 寄存器读/写是否需要临界区保护？

> ID：14222545
> 
> 赞同：2
> 
> 时间：2013-01-08T19:25:12.790
> 
> 标签：c++, concurrency, windows-mobile

我有一个适用于 Windows Mobile 6 ARMV4I 的 Visual Studio 2008 C++ 项目，其中有如下代码：

```
// list of CPU registers (all DWORD aligned)
typedef volatile struct
{
    // status register
    DWORD my_status;
} MY_REGS;

MY_REGS* my_regs;

// reads the status register
DWORD ReadMyStatus()
{
    DWORD status;
    // EnterCriticalSection()
    // equivalent to:
    //     status = INREG32( &my_regs->my_status );
    status = ( *( volatile unsigned long* const )( &my_regs->my_status ) );
    // LeaveCriticalSection()
    return status;
}

// sets a bit in the status register
DWORD SetMyStatus( DWORD status )
{
    // EnterCriticalSection()
    // equivalent to:
    //     SETREG32( &my_regs->my_status, status );
    ( *( volatile unsigned long* const )( &my_regs->my_status ) ) = 
        ( ( *( volatile unsigned long* const )( &my_regs->my_status ) ) | ( status ) );
    // LeaveCriticalSection
} 
```

假设可以从不同的线程同时调用它们，我是否需要围绕寄存器读取和写入进行关键部分保护？

正如我在 WM ARMV4I 上所理解的那样，与 DWORD 对齐的 DWORD 读/写是原子的，并且易失性保证了 WM 中的内存获取/释放语义。因此，CS 保护应该是不必要的。我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T11:31:38.600

您可以使用`InterlockedExchange`设置一个值和以零作为加数的`InterlockedExchangeAdd` [[documentation]](http://msdn.microsoft.com/en-us/library/aa910697.aspx)来读取一个值。这些功能保证了同步访问，并且从 WM 5 开始可用。

# regex - .htaccess 正则表达式重定向到主页不会剪切 URL 的其余部分

> ID：14222546
> 
> 赞同：1
> 
> 时间：2013-01-08T19:25:12.590
> 
> 标签：regex, apache, .htaccess, redirect

我正在尝试重定向以下页面

`http://www.example.com/taksit.asp?urundetay`

到

`http://www.example.com/`

但它重定向到

`http://www.test.com/?urundetay`

下面的 .htaccess 不起作用，如何解决？

```
RewriteRule ^(.*)taksit\.asp(.*)$ $1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:58:57.723

将现有的 RewriteRule 替换为：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+taksit\.asp\?[^\s&]+ [NC]
RewriteRule ^ /? [R=301,L] 
```

# javascript - 绑定到自定义绑定中创建的 observable

> ID：14222547
> 
> 赞同：0
> 
> 时间：2013-01-08T19:25:19.263
> 
> 标签：javascript, knockout.js, code-reuse, custom-binding

我正在尝试将可观察对象的创建封装在自定义绑定中，就像 knockoutjs-validation 的 isValid 一样，但不扩展绑定，因为将来此属性将是另一个绑定的结果，该绑定记录了一个复杂的事件序列输入，感觉除了为此使用自定义绑定之外我不应该做更多的事情。

以下代码显示了我负责创建 observable 的自定义绑定。

```
ko.bindingHandlers.myBinding = {
  init: function (
  element, valueAccessor, allBindingsAccessor,
  viewModel, bindingContext) {
    console.log("init myBinding");

    var observable = valueAccessor();
    observable.IsRed = ko.observable(true);
    console.log("isred created");

    ko.applyBindingsToNode(element, {
      value: observable,
      mySubBinding: observable.IsRed
    }, viewModel);
    console.log("finish myBinding");
  },
  update: function (
  element, valueAccessor, allBindingsAccessor,
  viewModel, bindingContext) {
    console.log("update myBinding");
  }
}; 
```

我遇到的问题是 observable 似乎是在执行 applyBindings 命令的一部分之后创建的，并且只有 View 上的后绑定才能看到 observable 的正确值。

我写了一个 jsfiddle 来展示这种行为。其中，`IsRed`是有问题的可观察对象。

[http://jsfiddle.net/ricardomp/c2HnJ/15/](http://jsfiddle.net/ricardomp/c2HnJ/15/)

预期的结果将是具有红色背景的输入和具有相同值之前和之后的跨度标签。

我能做些什么来实现这个结果？结果绑定不应该依赖于任何外部可观察对象或属性，对吗？您会提出替代实施方案吗？

提前致谢。

更新：

我认为值得一提的是，myBinding 是一个封装了多个绑定的绑定。所以，像 IsRed 一样，我将有 3 或 4 个绑定分配给类似的可观察对象。

最后更新：

在 RP 的回答之后，我编写了以下代码来完成 observables 的初始化：

```
ko.observable.fn.colorStatus = function () {
    this.isRed = ko.observable();
    this.isGreen = ko.observable();
    this.isBlue = ko.observable();

    this.ResetStatus = (function () {
        this.isRed (undefined);
        this.isGreen (undefined);
        this.isBlue (undefined);
    }).bind(this);
    return this;
}; 
```

之后，我只需要在初始化时调用我的 observable 上的 colorStatus 即可。

```
self.value = ko.observable().colorStatus(); 
```

就这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:14:13.340

问题是，当为您的 jsFiddle 示例中的前两个绑定评估绑定字符串时，`$root.Test.IsRed`是`undefined`.

所以，它相当于 binding `text: undefined`。它还不是可观察的，因此没有创建依赖项并且绑定不会更新。

您需要确保`IsRed`在绑定字符串中使用它之前创建它。您可以使用扩展（[扩展器](http://knockoutjs.com/documentation/extenders.html)或扩展[基本类型](http://knockoutjs.com/documentation/fn.html)）在视图模型本身中执行此操作。否则，您可以添加一个绑定，将其添加到前一个元素上。

重要的部分是`IsRed`在解析包含它的绑定字符串之前存在。

# perforce - Perforce：将更改列表移动到 P4Sandbox？

> ID：14222549
> 
> 赞同：0
> 
> 时间：2013-01-08T19:25:24.863
> 
> 标签：perforce

我在 Perforce 中有一个更改列表，它已经增长到我想开始进行检查点提交的地步（26 次编辑，1 次添加）。不过，我不想提交主线，因为代码还不能使用。我安装了 P4Sandbox，但我没有使用它：更改列表属于我在主库上的客户端。有没有一种简单的方法可以将挂起的更改列表移动到 P4Sandbox？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:16:56.260

我可以想到几个选项。首先，您可以使用搁置来保存正在进行的工作，而无需使用 P4Sandbox。您可以根据需要搁置尽可能多的在制品副本。

其次，您可以创建一个私有分支（如果管理员允许）。

最后，如果您确实想使用 P4Sandbox，您需要设置一个新实例，然后手动将您正在进行的工作复制到新的 P4Sandbox 工作区。

# entity-framework - 找不到字段的映射

> ID：14222550
> 
> 赞同：2
> 
> 时间：2013-01-08T19:25:26.287
> 
> 标签：entity-framework, symfony, orm, doctrine, mapping

我必须实体

```
class Patients 

    {
         /**
         * @ORM\OneToOne(targetEntity="ContactAddress", mappedBy="patients")
         */
        protected $contactaddress;
    } 
```

还有一个

```
class ContactAddress
{
    /**
     * @ORM\OneToOne(targetEntity="Patients", inversedBy="contactaddress")
     * @ORM\JoinColumn(name="patient_id", referencedColumnName="id")
     */
     protected $patient;
} 
```

当我尝试执行此代码时

```
$em = $this->getDoctrine()->getEntityManager();
$product = $em->getRepository('SurgeryPatientBundle:Patients')->find($id); 
```

我明白了

```
No mapping found for field 'patients' on class 'Surgery\PatientBundle\Entity\ContactAddress'. 
```

当我尝试访问联系人存储库时，我得到了结果

请帮助;D对不起我的英语

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T19:48:56.710

您必须在 ContactAddress 实体中引用`patient`而不是病人*s*。

```
class Patients 
{
     /**
     * @ORM\OneToOne(targetEntity="ContactAddress", mappedBy="patient")
     */
    protected $contactaddress;
} 
```

# javascript - Backbone.Marionette BoilerPlate - 管理区域

> ID：14222551
> 
> 赞同：0
> 
> 时间：2013-01-08T19:25:44.353
> 
> 标签：javascript, backbone.js, marionette, boilerplate

我正在开发一个带有样板框架结构的 Backbone.Marionette。在 App.js 中 - 我正在 App.initLayout 函数中设置页面布局，方法是添加区域 - regionNav、regionMain、regionFooter。要在不同路线上显示的视图在我定义了应用程序的控制器中的 Controller.js 中处理。我想要的只是在控制器中为不同的链接加载 regionMain 的视图，但是我在 App.js 中设置的区域是未定义的。因此，为了解决这个问题，我在控制器中使用 App.addRegions 方法添加区域，并为每个路由函数调用添加页脚和导航视图，这是不正确的，它应该只加载 regionMain 中的视图。请帮助我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:30:39.660

[你可以在这里](https://stackoverflow.com/questions/11410059/suggested-bootstrap-boilerplate-sample-for-backbone-marionette-application/11598371#11598371)找到一个起点， 它并不完美，但它会帮助你开始

# php - codeigniter 获取选中复选框的正确值

> ID：14222558
> 
> 赞同：-1
> 
> 时间：2013-01-08T19:26:13.747
> 
> 标签：php, codeigniter, checkbox

在我的一种形式中，我有以下代码，列出了文件夹的图像，并向其中添加了复选框，这些值是图像的名称，以便我可以检查我想要的图像：

```
<?php
$imgdir = 'upload/'; //Pick your folder
$allowed_types = array('png','jpg','jpeg','gif'); //Allowed types of files
$dimg = opendir($imgdir);//Open directory
while($imgfile = readdir($dimg))
{

if( in_array(strtolower(substr($imgfile,-3)),$allowed_types) OR
in_array(strtolower(substr($imgfile,-4)),$allowed_types) )
/*If the file is an image add it to the array*/
{$a_img[] = $imgfile;}
}
echo "<ul>";

$totimg = count($a_img);  //The total count of all the images
//Echo out the images and their paths incased in an li.
for($x=0; $x < $totimg; $x++){echo "<input type='checkbox' name='check_imagens[]' value='" .$a_img[$x]."'/><img height='50' width='50' src='http://localhost/code/" . $imgdir . $a_img[$x] . "' />"; echo $a_img[$x];} 
echo "</ul>";

?> 
```

现在，在我的班级模型中，我试图通过以下代码获取复选框的值：

```
$data_imagens = array(
    'imagens_selected' => $this->input->post('check_imagens')
);

var_dump($data_imagens); 
```

但是，我想我得到的价值超过了价值，或者至少我遇到了一些问题，因为如果我接下来在我的数据库中进行搜索以查找检查的图像的 ID：

```
 foreach ($data_imagens as $value) {
        $query = $this->db->query("SELECT id_imagem FROM imagens where nome_imagem='".$value."';");
}

            foreach ($query->result_array() as $row)
    {
       echo $row['id_imagem'];
    } 
```

谁能指出我做错了什么？谢谢！

解决了：

我使用错误的 foreach 来获取 check_images 数组的值。代替：

```
 foreach ($data_imagens as $value) {
        $query = $this->db->query("SELECT id_imagem FROM imagens where nome_imagem='".$value."';");
}

            foreach ($query->result_array() as $row)
    {
       echo $row['id_imagem'];
    } 
```

我需要的是：

```
 foreach ($this->input->post('check_imagens') as $key => $value)
{
    $query = $this->db->query("SELECT id_imagem FROM imagens where nome_imagem='".$value."';");
    foreach ($query->result() as $row)
   {
      echo $row->id_imagem;
   }
    $imagens_selected[$key]=$value;
    echo $imagens_selected[$key];
} 
```

无论如何感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:30:00.020

如果您不需要多个值，请不要对`<input>`名称使用类似数组的表示法：

```
<input type='checkbox' name='check_imagens[]' value='"...
                                         ^^^^ 
```

只需将其更改为`check_imagens`.

# ruby-on-rails - 控制 ActiveRecord 创建参数类型和特征

> ID：14222565
> 
> 赞同：1
> 
> 时间：2013-01-08T19:26:50.573
> 
> 标签：ruby-on-rails, bigdecimal, rails-activerecord

我有一个模型，其列`amount`是数据库中的小数。我想确保`BigDecimal`在实例化此模型时只给出具有一定精度的 a 。我已经编写了规范来测试`Float`提供 a 时的场景，然后我有一个`before_create`回调，如果它不是 a 则引发错误`BigDecimal`。

但是，当值到达`before_create`回调时，Rails 已经将其转换为`BigDecimal`. 我想这很好，而且我可能仍然可以检查精度，但是由于我不确切知道 rails 是如何进行转换的，因此最好在链上进一步检查正确的参数类型和精度。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:38:29.967

来自[http://api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

> 有时您希望能够读取原始属性数据，而无需先运行由列确定的类型转换。这可以通过使用所有属性都具有的 _before_type_cast 访问器来完成。例如，如果您的 Account 模型具有 balance 属性，则可以调用 account.balance_before_type_cast 或 account.id_before_type_cast。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:38:02.047

尝试覆盖`amount=`

```
def amount=(val)
  # checking / conversion goes here, new_val as result
  self[:amount] = new_val # don't use self.amount = new_val to avoid endless loop
end 
```

# mysql - 最高行数

> ID：14222566
> 
> 赞同：0
> 
> 时间：2013-01-08T19:26:53.293
> 
> 标签：mysql, sql, count

我有`TableA`其中包含：

```
ID   |  CATEGORY   |    NAME
-------------------------
1    |   A         |   NAME01
2    |   B         |   NAME02
3    |   C         |   NAME03
4    |   D         |   NAME04
5    |   B         |   NAME05 
```

那么如何计算我的表中的哪些类别最多呢？我们可以看到它是 B 类，但在我的真实表中，我添加了 200 多条记录。在表中，我有 5 个不同的类别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:29:41.493

似乎您可以只使用聚合函数 ( `count()`) 和 a `group by`：

```
select category, count(category) Total
from TableA
group by category
order by Total desc 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/79627/2)

如果你想只返回最多的记录，你可以添加一个`LIMIT`：

```
select category, count(category) Total
from TableA
group by category
order by Total Desc
limit 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/79627/3)

# php - 从 2 个表中选择并按 1 排序

> ID：14222567
> 
> 赞同：0
> 
> 时间：2013-01-08T19:26:57.937
> 
> 标签：php, mysql

我有 2 张桌子。

第一的：

```
TABLE Articles
  ID 
```

第二：

```
TABLE Viewcount
  DATE        DATE  PK
  ARTICLE_ID  INT   PK  (MATCHES ID IN TABLE Articles)
  NUMVIEWS    INT 
```

如何从表格 Articles 中选择所有 ID，然后根据日期按 Viewcount 的 NUMVIEWS (DESC) 排序？然后，我需要将未在 viewcount 中找到的 Articles 中的 ID 以无特定顺序附加到结果的末尾。我知道它必须是某种加入，但我无法弄清楚..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:30:13.893

尝试这个

```
SELECT id from Articles a
LEFT JOIN Viewcount v
ON  a.id = v.article_id
AND v.date = 'some date here'
ORDER BY v.numviews ,v.date desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:30:29.723

一个简单的连接就足够了，是的：

```
SELECT a.id FROm Articles a LEFT JOIN Viewcount v
ON v.article_id = a.id
ORDER BY v.numviews desc, v.date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:30:27.293

这应该有效：

```
SELECT * FROM `Articles` `a`, `Viewcount` `v`
WHERE `v`.`ARTICLE_ID`=`a`.`ID`
ORDER BY `v`.`NUMVIEWS` DESC 
```

替换`SELECT *`为`SELECT `a`.`ID``仅获取文章 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T19:30:45.967

```
SELECT ID from (Articles JOIN Viewcount on Articles.ID = Viewcount.ID) ORDER BY Viewcount.NUMVIEWS, Viewcount.date 
```

# cordova - 是否可以在 Phonegap 应用程序中通过 Facebook 进行 Firebase 身份验证？

> ID：14222570
> 
> 赞同：1
> 
> 时间：2013-01-08T19:27:08.887
> 
> 标签：cordova, firebase

我用 Facebook 身份验证制作了我的第一个基于 Firebase 的网页，它运行得非常好（并且易于设置）。

但我想将 html 嵌入到可以在 iOs/Android 上运行的 Phonegap 应用程序中并不容易。我假设 Facebook（或 Twitter）身份验证不能直接在 App WebView 上工作。

有可能让它工作吗？有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:24:36.350

Firebase 对 PhoneGap 的支持今天宣布：http: [//phonegap.com/blog/2013/04/16/firebase-phonegap-integration/](http://phonegap.com/blog/2013/04/16/firebase-phonegap-integration/)

# php - 从现有数组中创建新的键 => 值对

> ID：14222577
> 
> 赞同：0
> 
> 时间：2013-01-08T19:28:10.170
> 
> 标签：php, arrays

我有一个看起来像这样的数组：

```
 Array
(
    [0] => stdClass Object
        (
            [food] => Pizza
            [music] => Rock
            [color] => blue
            [name] => John
        )

    [1] => stdClass Object
        (
            [food] => Toast
            [music] => Jazz
            [color] => yellow
            [name] => Greg
        )

    [2] => stdClass Object
        (
            [food] => Steak
            [music] => Classical
            [color] => green
            [name] => Steve
        )

    [3] => stdClass Object
        (
            [food] => Cake
            [music] => Blues
            [color] => red
            [name] => Peter
        )

) 
```

如何创建一个新数组，在其中将一些内容组合成新的`key => value`对，例如`Peter => Cake`？

我已经设法使用了一些值，但它们没有连接到键：

```
$myArr = *The array posted above*
$newArray = array();

foreach ( $myArr as $arr ) {
    array_push( $newArray, $arr->food );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:29:46.437

那将是这样的：

```
$newArray = array();
foreach ( $myArr as $arr ) {
    $newArray[$arr->name] = $arr->food;
} 
```

请注意，重复的名称会被最后一次出现的名称覆盖。

# java - Java，从数据库计算平均值

> ID：14222587
> 
> 赞同：-1
> 
> 时间：2013-01-08T19:29:11.430
> 
> 标签：java, database, average

我现在正在处理我的项目，但遇到了一些问题：/我的方法应该从数据库中收集信息，然后计算平均值。这是我到目前为止得到的：

```
Rate: 4
Food_Food_ID: 2
------------
Rate: 4
Food_Food_ID: 2
------------
Rate: 2
Food_Food_ID: 2
------------
Rate: 12
Food_Food_ID: 2
------------
Rate: 5
Food_Food_ID: 4
------------
Rate: 10
Food_Food_ID: 4
------------
Average: 6.166666666666667 
```

（这是所有费率的平均值：/）

但我试图得到：

```
Rate: 22
Food_Food_ID: 2
Average: 5.5

------------
Rate: 15
Food_Food_ID: 2
Average: 7.5
------------ 
```

它应该添加所有评级，然后计算评级的平均值。我希望我解释得很好:)

这是代码： http: [//pastebin.com/zUdF9HwF](http://pastebin.com/zUdF9HwF)

第一次在这里发帖，希望我做得很好。感谢您的帮助：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:32:35.240

这就是 SQL 的发明目的，请参阅：

```
SELECT user.Food_Food_ID, AVG(user.Rate)
FROM user 
     INNER JOIN food ON user.Food_Food_ID = food.Food_Food_ID
GROUP BY user.Food_Food_ID 
```

没有循环，没有计数，只需一个 SQL 即可获得结果。

# windows - 如何在使用 ClickOnce 安装后启动网页

> ID：14222598
> 
> 赞同：0
> 
> 时间：2013-01-08T19:29:55.183
> 
> 标签：windows, visual-studio, installation, clickonce

ClickOnce 安装程序完成后是否可以启动 URL？

# css - jQuery Slider 上的圆角仅适用于 Firefox

> ID：14222599
> 
> 赞同：-1
> 
> 时间：2013-01-08T19:29:57.130
> 
> 标签：css, html, rounded-corners

我的 jQuery 滑块上的圆角仅适用于 Firefox。

在 Firefox 17.0.1 中正确呈现（见下图）

![在此处输入图像描述](../Images/76336ef9fce69df5b87a2bf969025c9b.png)

在 Safari 版本 6.0.2 (8536.26.17) 中无法正确呈现（见下图）

![在此处输入图像描述](../Images/dbeca9d1cf42966996c845038cbeb1b1.png)

在 Chrome 版本 23.0.1271.101 中无法正确呈现（见下图） ![在此处输入图像描述](../Images/8a85e7ed0d88c8c60dff39d3f492c541.png)

这是 jsfiddle 构建： http: [//jsfiddle.net/plasticmonument/TCVH5/1/](http://jsfiddle.net/plasticmonument/TCVH5/1/)（注意，我只为滑块图像提供了完整路径 url，其他所有内容都将丢失）

我的 HTML：

```
enter code here 
```

我的 CSS：

```
.hero-wrapper {
position: relative;
z-index: 2;
float: left;
width: 100%;
height: 429px;
border-radius: 10px;
border-top-left-radius: 0;
-webkit-border-radius: 10px;
-webkit-border-top-left-radius: 0;
-webkit-border-bottom-right-radius: 10px;
-moz-border-radius: 10px;
-moz-border-top-left-radius: 0;
-o-border-radius: 10px;
-o-border-top-left-radius: 0;
-ms-border-radius: 10px;
-ms-border-top-left-radius: 0;
overflow: hidden
}

#feature-slider ul.slider {
position: absolute;
top: 0;
left: 0;
width: 900000px
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:51:02.557

我的猜测是，这是旧的“前景图像未剪辑”错误。

在某些浏览器中，可能会应用边框半径，但具有边框半径的元素的前景图像不受半径的限制。

我的印象是这是主要浏览器已经处理过的问题，但我已经有一段时间没有研究过了，所以我可能会误会。它当然看起来就像你所看到的。我记得在 Firefox 3.x 时代这是一个相当大的问题，但如果我没记错的话，FF 团队在 v4 和 v8 之间进行了整理。

为了证明这一点，`border:solid black 2px;`给元素添加一个实际的边框（例如 ），看看会发生什么。如果边框随着半径在角落处的图像下方消失，那么这就是您看到的错误。

如果这是问题所在，那么解决方案是：

1.  改用背景图片；这不会被剪裁。
2.  添加一个额外的标记层 - 例如`<div>`，其中包含现有的 a `<img>`，并将边框半径放在`<div>`而不是`<img>`.
3.  忽略它，等待浏览器供应商解决问题。

# javascript - 以变 量为参数调用 Javascript 函数

> ID：14222601
> 
> 赞同：0
> 
> 时间：2013-01-08T19:30:05.357
> 
> 标签：javascript, variables, parameters

例如，如何调用 javascript 函数并传递一些变量以用作参数

假设函数`javascriptFunction`使用 2 个参数。我通常将其称为 `javascriptFunction("param1", "param2")`（在字符串周围加上单引号）。但现在我想传递一些变量。

```
string y = "this is a string"
string x = "another"
javascriptFunction(y, x) 
```

我已经尝试过`javascriptFunction(@y, @x)`javascriptFunction("@y", "@x") （在字符串周围使用单引号，然后是双引号），但这不起作用

编辑我实际上是通过视图（cshtml文件）进行调用的。所以我的变量是字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:31:10.023

JavaScript 有一个弱类型系统。无需指定类型。所有变量的类型都由它们的值决定。它们是使用关键字创建的`var`：

```
var y = "this is a string";
var x = "another"; 
```

[[别忘了使用分号！]]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:31:53.667

这应该工作

```
var y = "this is a string", x = "another";
javascriptFunction(y, x); 
```

# mysql - 复杂的 SQL 查询，检查多个表中的列值

> ID：14222605
> 
> 赞同：0
> 
> 时间：2013-01-08T19:30:18.027
> 
> 标签：mysql, sql, join, inner-join

我有一个非常庞大的 SQL 查询来检查通知，我在表中有几种不同类型的通知，即：帖子、喜欢、评论、照片评论、照片喜欢、视频喜欢等。（总是添加更多）而且我有遇到问题，我真的不确定如何最好地做到这一点。到目前为止，我所做的方式工作得很好，而且真的很容易添加，但是这个通知类型我必须检查的不仅仅是另一个表，我必须检查另外两个，但我无法让它工作。

所以这里是：（这只是我庞大查询的一部分，唯一相关的部分）

```
n.uniqueID = ANY (
              SELECT photos.id
              FROM photos INNER JOIN posts ON (photos.id=posts.post)
              WHERE photos.state=0
              AND posts.state=0 
              AND posts.id = ANY (
                                   SELECT likes.postID FROM likes
                                   INNER JOIN posts ON (posts.id=likes.postID)
                                   WHERE likes.state=0 AND posts.state=0
                                  )
                ) 
```

所以基本上我真正需要做的就是检查`state`每个表中的列，因为这说明它是否被删除（如果它不是 0 那么它被删除并且不应该返回）所以它会像：

`IF photos.state=0 AND posts.state=0 AND likes.state=0`把它返还。

*   `n.uniqueID`, `posts.post`, 和`photo.id`都将是相同的值。
*   `posts.id`也`likes.postID`将是相同的值。

我的问题是它似乎没有检查`likes.state`，我不认为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:37:38.743

我认为您只想在一个查询中将三个表连接在一起：

```
n.uniqueID = ANY (
              SELECT photos.id
              FROM photos INNER JOIN
                   posts
                   ON photos.id=posts.post inner join
                   likes
                   on posts.id = likes.postId
              WHERE photos.state=0 and
                    posts.state=0 and
                    likes.state = 0
                  ) 
```

您的逻辑是当有状态为 0 的点赞或帖子时不返回。似乎*所有*点赞和帖子的状态都为零。为此，请使用`having`子句进行聚合：

```
n.uniqueID = ANY (
              SELECT photos.id
              FROM photos INNER JOIN
                   posts
                   ON photos.id=posts.post inner join
                   likes
                   on posts.id = likes.postId
              where photos.state = 0
              group by photos.id
              having MAX(posts.state) = 0 and MAX(likes.state) = 0 
```

# html - 如何单击没有 ID 的图像，运行动态数字过程？

> ID：14222606
> 
> 赞同：0
> 
> 时间：2013-01-08T19:30:23.377
> 
> 标签：html, selenium, cucumber, capybara

我需要自动删除文件以进行清理

```
<img src="/images/delete.jpg" class="pointer" alt="delete" title="delete" onclick="DeleteThis('[stable number]', '[dynamic file number]')"> 
```

每个文件的动态文件数都会增加，并且应该使用通配符。

我试过了...

```
page.find('a[href*="javascript:DeleteThis"]').click #1
first(page.find(:css, "img.pointer", "[alt='delete']")).click  #2 
```

两者都没有找到。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:23:49.927

您的选择器不正确。[first](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders#first-instance_method)不接受 Capybara::Element 作为参数。它应该只是：

```
page.find(:css, "img.pointer[alt='delete']") 
```

甚至（如果`Capybara.default_selector = :css`）：

```
page.find("img.pointer[alt='delete']") 
```

默认情况下是 :css 。

# cocoa - ApplescriptObjC 调用 NSMakePoint 导致 exc_bad_access 错误

> ID：14222607
> 
> 赞同：1
> 
> 时间：2013-01-08T19:30:25.687
> 
> 标签：cocoa, applescript, exc-bad-access, applescript-objc

这个问题真的让我很困惑，因为 AppleScriptObjC 应该可以自己处理垃圾收集。

无论如何，重现此错误的步骤是：

1.  创建一个新的 Cocoa-AppleScript-Application 项目
2.  将单个调用插入到`NSMakePoint`项目`nameAppDelegate.applescript`文件中的任何位置。该文件现在应该如下所示：

    ```
    script testAppDelegate
        property parent : class "NSObject"

        on applicationWillFinishLaunching_(aNotification)
            -- Insert code here to initialize your application before any files are opened 
            set single_point to NSMakePoint(5, 10) of current application
            display alert "X-value of point: " & x of single_point
        end applicationWillFinishLaunching_

        on applicationShouldTerminate_(sender)
            -- Insert code here to do any housekeeping before your application quits 
            display alert "Terminating"
            return current application's NSTerminateNow
        end applicationShouldTerminate_ 
    end script 
    ```

3.  运行应用程序

上面的应用程序将启动并显示警报`"X-value of point: 5.0"`（如预期的那样），但在警报之后它会立即崩溃并`EXC_BAD_ACCESS`在文件中出现以下错误`main.m`：[main.m 错误](http://i.stack.imgur.com/0RCSO.png)

因此，某处正在对不再存在的对象进行调用。如果我们在`NSZombies`启用的情况下分析应用程序，它会确认已向僵尸发送消息并提供以下附加信息：[僵尸信息](http://i.stack.imgur.com/yRhNQ.png)

我也用`NSMakeRange`and尝试了同样的事情`NSMakeRect`，它给出了完全相同的结果。我怀疑每次调用 Core Foundation 函数都会以这种方式使应用程序崩溃。但是，如果我们作为示例调用 NSTextField 的 stringValue()，它就可以正常工作。

把电话放在外面`applicationWillFinishLaunching_`也不能解决它。那么我做错了什么？

我在 OSX Lion 1.7.4 上使用 XCode 4.3.3

* * *

**编辑：**经过一些进一步的研究，我意识到我不需要调用`NSMakePoint`，我可以创建一个 AppleScript 记录`{|x|:0, |y|:0}`，它就像一个 NSPoint 对象一样工作。这样就解决了，我猜。

# twitter - 在本地预览 Twitter 小部件的方法

> ID：14222619
> 
> 赞同：0
> 
> 时间：2013-01-08T19:30:56.823
> 
> 标签：twitter, widget, local, preview

我正在本地建立一个网站，希望能够在不上传所有内容的情况下查看嵌入式 Twitter 小部件的外观。

以下是基本关注按钮（[小提琴](http://jsfiddle.net/pWpyb/)）的代码：

```
<a href="https://twitter.com/twitter" class="twitter-follow-button" data-show-count="false" data-size="large" data-dnt="true">Follow @twitter</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

如果您在计算机上将它本地保存为whatever.html，然后打开它，您会注意到小部件脚本从不加载小部件。

有什么办法可以让它工作吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:52:07.647

`http:`在这部分代码的“平台”一词之前添加：

```
src="//platform.twitter.com/widgets.js" 
```

使其内容为：

```
src="http://platform.twitter.com/widgets.js" 
```

# javascript - 提交表单后保持输入框可见

> ID：14222625
> 
> 赞同：0
> 
> 时间：2013-01-08T19:31:13.647
> 
> 标签：javascript, html

我有一个带有显示/隐藏输入框元素的表单。当我提交表单时，页面会刷新并返回默认状态，除了第一个输入框外，其他所有输入框都隐藏了。我想要的是保持提交前显示的所有框在提交后仍然可见。这可能吗？

```
function show(id){

 if (document.getElementById(id+"-link").style.display=="none") {
    document.getElementById(id+"-link").style.display="block";
    document.getElementById(id+"-input").style.display="block";
  }
}

 <html>
  <form action='form.html' method='POST'>
    <table>
      <tr>
         <td><input type="text" id="a1" name="em_1"></td>
         <td><a href="#null" onclick="show('b1')">and</a></td>
      </tr><tr>
         <td><input type="text" id="b1-input" name="em_2" style="display:none"></td>
         <td><a href="#null" style="display:none" id="b1-link"
              onclick="show('c1')">and</a></td>   
       </tr><tr>
          <td><input type="text" id="c1-input" name="em_3" style="display:none"></td>
          <td><a href="#null" style="display:none" id="c1-link"
               onclick="show('d1')">and</a></td>
       </tr><tr>
       <tr>
          <td><input type='submit' name='submit'></td>
       </tr>
    </table>
  </form>
</html> 
```

# c# - 实体框架linq查询中IEnumerable.Contains()的解决方案

> ID：14222626
> 
> 赞同：2
> 
> 时间：2013-01-08T19:31:25.470
> 
> 标签：c#, entity-framework

我一直在为我的应用程序使用实体框架。不幸的是，我不能在实体框架中做出这样的表达：

```
List<MyUser> users = (from user in database.MyUsers
                      join app in database.MyApplications 
                          on user.ApplicationId equals app.Id
                      where app.Name == this._applicationName 
                          && user.MyRoles.Contains(existingRole)
                      select user).ToList(); 
```

对此的任何其他方法。我不想更改我的数据库或模型。在我的例子中，MyUser 和 MyRole 之间的关系是多对多的，有一个胶水表。

这是 MyUser 类的声明方式：

```
public partial class MyUser
{
    public MyUser()
    {
        this.MyApiTokens = new HashSet<MyApiToken>();
        this.MyLandingPages = new HashSet<MyLandingPage>();
        this.MyPresentations = new HashSet<MyPresentation>();
        this.MySlides = new HashSet<MySlide>();
        this.MyUserSettings = new HashSet<MyUserSetting>();
        this.MyRoles = new HashSet<MyRole>();
    }

    public System.Guid Id { get; set; }
    public string UserName { get; set; }
    public string Password { get; set; }
    public string EmailAddress { get; set; }
    public int ApplicationId { get; set; }
    public System.DateTime CreateDate { get; set; }
    public System.DateTime LastActivityDate { get; set; }
    public System.DateTime LastLockoutDate { get; set; }
    public System.DateTime LastLoginDate { get; set; }
    public System.DateTime LastPasswordChangedDate { get; set; }
    public string PasswordQuestion { get; set; }
    public string PasswordAnswer { get; set; }
    public string Comment { get; set; }
    public bool IsLocked { get; set; }
    public bool IsApproved { get; set; }

    public virtual ICollection<MyApiToken> MyApiTokens { get; set; }
    public virtual MyApplication MyApplication { get; set; }
    public virtual ICollection<MyLandingPage> MyLandingPages { get; set; }
    public virtual ICollection<MyPresentation> MyPresentations { get; set; }
    public virtual ICollection<MySlide> MySlides { get; set; }
    public virtual ICollection<MyUserSetting> MyUserSettings { get; set; }
    public virtual ICollection<MyRole> MyRoles { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:37:42.790

假设 MyRoles 是实体模型中的关联属性（即映射到表），您可能希望在角色对象的主键上进行显式匹配。例如：

```
user.MyRoles.Any(r => r.RoleId == existingRole.RoleId) 
```

但是，您的问题中没有足够的信息来给出确切的答案。

# visual-studio-2010 - Visual Studio 正则表达式查找和替换

> ID：14222627
> 
> 赞同：-1
> 
> 时间：2013-01-08T19:31:25.190
> 
> 标签：visual-studio-2010

我想使用正则表达式在下面更改它

```
<script type="text/javascript" language="javascript" src="/Common/Scripts/UserControls/Form.js"></script>

<script type="text/javascript" language="javascript" src="<%=VirtualPathUtility.ToAbsolute("~/Common/Scripts/UserControls/Form.js")%>></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:37:45.840

您可以尝试以下方法：

寻找：

```
\<script type\=\"text\/javascript\" language\=\"javascript\" src="{[^"]+}"\>\<\/script\> 
```

代替：

```
<script type="text/javascript" language="javascript" src="<%=VirtualPathUtility.ToAbsolute("~\1")%>></script> 
```

需要注意的关键事项：

*   您可以将替换部分中使用的表达式与大括号匹配`{}`。我`[^"]+`用来捕获引号之间的所有字符-`[]`匹配一组字符，其中`^`表示“不”-因此`[^"]`匹配*除*引号之外的任何字符。然后`+`表示匹配一个或多个（非引号字符）。
*   有些字符有特殊含义，所以你可以用`\`. 如果你在他们面前放了一个多余的东西，你可以安全地逃避大多数没有意义的角色`\`，所以我为了安全而过分热心。
*   使用`\1`, `\2`,`\3`等在替换表达式中使用捕获的组。所以我`\1`用来引用`src`查找中匹配的属性值。

# r - 根据列值 r 更改行中的值

> ID：14222632
> 
> 赞同：8
> 
> 时间：2013-01-08T19:31:38.613
> 
> 标签：r, replace, dataframe

我是 R 新手，有一个相当简单的问题，我只是想不出答案。对于我的示例，我将使用具有 3 列的数据框，但我的实际数据集是 139 列和 10000 行。

如果 C 列中同一行中的值包含 < 10 的值，我想用 NA 替换给定行中的所有值。

假设我的所有列都是数字或整数值。

所以我想取数据框：

```
x=data.frame(c(5,9,2),c(3,4,6),c(12,9,11))
names(x)=c("A","B","C") 
```

并用 NA 替换第 2 行以创建

```
y=data.frame(c(5,"NA",2),c(3,"NA",6),c(12,"NA",11))
names(y)=c("A","B","C") 
```

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T19:33:49.530

怎么样：

```
x[x$C <10 ,] <- NA 
```

# python - 如何在 tkinter 中更新直方图

> ID：14222635
> 
> 赞同：0
> 
> 时间：2013-01-08T19:31:47.297
> 
> 标签：python, matplotlib, tkinter, histogram

我有一个直方图，我想在移动 Scale 以滚动浏览 csv 文件时对其进行更新。cvs 文件中的每一行都是 2 个峰，我希望直方图记录每个峰的高度，并在每次移动滑块时更新。要更新我使用的情节`.set_xdata`和`.set_ydata`. 直方图有类似的集合吗？

# ios - 如何避免在替换文件后清理项目？

> ID：14222640
> 
> 赞同：1
> 
> 时间：2013-01-08T19:32:12.867
> 
> 标签：ios, xcode, cocos2d-iphone

Xcode 4.5.2，使用 cocos2d-iphone 1.0.1 进行游戏开发。

最近，我意识到每次用同名的图像文件替换一个图像文件时，当我`CCSprite`用这样的文件创建一个时，我设备中的项目将继续使用旧的。

这可以通过简单地清理项目来解决。

但是，现在项目比较大，清理后编译需要相当长的时间。

是否可以替换文件并使 Xcode 使用正确的文件而不必清理项目？

另一个简单的解决方法是为新文件指定一个不同的名称并删除旧文件，然后更改`CCSprite`为使用新文件名。当然，这很荒谬，所以我想避免这样做。

我相信即使我只是从设备中删除应用程序也会发生这种情况 - 看来我确实必须清理项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:54:04.307

在`Organizer`您的`Xcode`. 转到`Projects`选项卡。

![在此处输入图像描述](../Images/fb2fabfd555c15e01481c55e12556c53.png)

你可以看到`Derived data`选项。单击`Delete`该选项附近，以清理您的项目

![在此处输入图像描述](../Images/61288ae707bdd2ef4493157d4eb84777.png)

# c# - 通过 xaml 访问 DataTemplate 元素

> ID：14222643
> 
> 赞同：0
> 
> 时间：2013-01-08T19:32:28.520
> 
> 标签：c#, wpf, mvvm, binding

我想`txtLang`通过 CommandParameter 从我的 MainWindow xaml 访问（模板中存在的文本块）TextBlock。

我怎样才能做到这一点？这是代码：

主窗口：

```
<TreeView x:Name="TreeView" ItemTemplate="{DynamicResource TreeViewDataTemplate}" ItemsSource="{Binding PLanguageCollection}"/>
<Button CommandParameter="{Binding ElementName=TreeView,Path="SelectedItem...//What is the path? 
```

模板：

```
<DataTemplate x:Key="TreeViewDataTemplate">
    <StackPanel Orientation="Horizontal">
        <Image Height="25" Width="25" VerticalAlignment="Center"
               Source="{Binding ImagePath}"/>
            <TextBlock Name="txtLang"  VerticalAlignment="Center" Text="{Binding Language}" />
    </StackPanel>
</DataTemplate> 
```

**编辑：**

主窗口：

```
 <Button Content="Create Project">

              <Button.CommandParameter>
                    <MultiBinding Converter="{StaticResource MyConverter}">
                        <Binding Path="Text" ElementName="txtDesc"/>
                        <Binding Path="Text" ElementName="txtName"/>
                        <Binding Path="SelectedItem" ElementName="ListBox"/>
                        <Binding Path="SelectedItem.Language" ElementName="TreeView"/>
                    </MultiBinding>
                </Button.CommandParameter>
            </Button> 
```

转换器：

```
 public class MyConverter : IMultiValueConverter
    {
        public object Convert(object[] values)
        {
            Tuple<string, string> tuple = new Tuple<string, string>(
                (string)values[0], (string)values[1]);
            return (object)tuple;
        }

        public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
        {

           if(values[3] is string)
        {
            Service1 service1 = new Service1();
            service1.CreateProject2((string) values[0], (string) values[1], (string) values[2], (string) values[3]);
        } 
        return null;
        }

        public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

抛出的异常：

```
Unable to cast object of type 'MS.Internal.NamedObject' to type 'System.String'. 
```

我知道发生这种情况是因为一开始的 DependencyProperty 是“未设置”，因为它是在运行时由 dataTemplate 加载的。但是我怎样才能防止它发生呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:01:20.900

使用`{Binding SelectedItem.Language}`, 或者`{Binding SelectedItem.DataContext.Language}`如果您`SelectedItem`返回 a`TreeViewItem`而不是您的数据对象

在使用模板之前，DataTemplate 中的对象实际上并不存在，因此您不能像引用其他对象一样引用。此外，如果模板被多次使用，您将拥有多个名为“txtLang”的 TextBlock，因此您的代码将不知道要引用哪个对象。

我一直认为 DataTemplates 是千篇一律的。在使用 cookie 切割器制作至少一个 cookie 之前，您无法引用 cookie :)

# playframework-2.0 - 任何学习 PlayFramework for Java 的指南路径

> ID：14222648
> 
> 赞同：1
> 
> 时间：2013-01-08T19:32:51.010
> 
> 标签：playframework-2.0

Play(java) 没有可用的指导文档。任何人都可以给我一个链接或显示如何在游戏中做事的东西。我已经检查了官方网站上的文档，但它几乎没有任何解释性。

我真的很喜欢这个框架，并且很想在 Play 中开发我的新项目。但现在它不像我之前做过的任何东西，所以这一切都让我感到非常困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:50:05.553

哦，拜托，有一些有用的资源:)

*   首先你有[文档](http://www.playframework.org/documentation/2.0.4/Home)- 遍历入门 - 这是开始的好点
*   还有一步一步的教程描述了如何创建[你的第一个应用程序](http://www.playframework.org/documentation/2.0.4/JavaTodoList)。
*   最后，检查随 Play 源提供的示例 - 您可以运行每个示例并检查它是如何工作的，您可以测试更改代码时会发生什么。您会找到适用于大多数典型用途的应用程序。

# tsql - 关键字“as”附近的语法不正确，但行没有“as”

> ID：14222650
> 
> 赞同：2
> 
> 时间：2013-01-08T19:33:06.393
> 
> 标签：tsql, stored-procedures, syntax, ssms

我正在更改存储过程，当我尝试执行时，我得到：

```
Msg 156, Level 15, State 1, Procedure vtg_asmbltimephasedashassy, Line 20  
Incorrect syntax near the keyword 'AS' 
```

但是当我转到第20行时，没有关键字'as'，也没有直接在第20行之前或之后的行中。也许我数错了。

当我数到第 20 行时，我得到的行是

```
jobmtl.partnum=partwhse.partnum FULL OUTER JOIN 
```

谁能指出我正确的方向，因为我需要做些什么来解决这个问题？我的整个存储过程如下。

```
USE [mfgsys803]
GO
/****** Object:  StoredProcedure [dbo].[vtg_asmbltimephasedashassy]    Script Date:   01/08/2013 12:59:18 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER proc [dbo].[vtg_asmbltimephasedashassy] @p_plant varchar(max) 
as 
begin 
set nocount on;

SELECT     jobhead.jobnum, sum(partwhse.onhandqty) as 'onhandqty', jobhead.partnum, jobhead.revisionnum, jobhead.prodqty, jobhead.startdate, jobhead.duedate, jobhead.reqduedate, 
                  jobhead.commenttext, jobmtl.issuedcomplete, jobmtl.issuedqty, jobmtl.mtlseq, jobmtl.partnum AS 'mtlpart', jobmtl.requiredqty, jobmtl.qtyper, jobmtl.reqdate, 
                  partwhse.warehousecode, prodgrup.description
FROM         jobmtl LEFT OUTER JOIN
                  partwhse INNER JOIN
                  warehse ON partwhse.company = warehse.company AND partwhse.warehousecode = warehse.warehousecode ON jobmtl.company = partwhse.company AND 
                  jobmtl.partnum = partwhse.partnum FULL OUTER JOIN
                  prodgrup INNER JOIN
                  jobhead ON prodgrup.company = jobhead.company AND prodgrup.prodcode = jobhead.prodcode ON jobmtl.company = jobhead.company AND 
                  jobmtl.jobnum = jobhead.jobnum
WHERE     (jobhead.jobreleased = 0) AND (jobhead.jobfirm = 1) AND (jobhead.jobengineered = 1) AND (jobhead.company = 'lot') and  (prodgrup.description like '%assy%') and (jobhead.plant=@p_plant) and (warehse.plant=@p_plant)

group by     jobhead.jobnum, jobhead.partnum, jobhead.revisionnum, jobhead.prodqty, jobhead.startdate, jobhead.duedate, jobhead.reqduedate, 
                  jobhead.commenttext, jobmtl.issuedcomplete, jobmtl.issuedqty, jobmtl.mtlseq, jobmtl.partnum AS 'mtlpart', jobmtl.requiredqty, jobmtl.qtyper, jobmtl.reqdate, 
                  partwhse.warehousecode, prodgrup.description

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:35:08.967

将这部分从组中取出

```
jobmtl.partnum AS 'mtlpart' 
```

做了

```
jobmtl.partnum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:35:53.270

行号只是指包含错误的 SQL 语句的行号......这是整个 Select 语句。As 在 Group By 中`jobmtl.partnum AS 'mtlpart',`并且需要出来。

# javascript - 电子邮件和选择选项验证，更改标签图像

> ID：14222652
> 
> 赞同：1
> 
> 时间：2013-01-08T19:33:09.547
> 
> 标签：javascript, label

请，如果有人可以帮助我解决这个问题。我需要在标签旁边制作图像“星号”，当电子邮件字段有效时更改“检查”图像，并且在选择选项时会发生同样的事情。如果未填写电子邮件字段或未选择主题，则带有星号的图像相同。

**这是我的html表单->**

```
<form id="jform" method="post" action="#" name="jform"  enctype="multipart/form-data">
            <p> 

                    <label for="email"  id="email"  class="w_160 block req_e">E-mail:</label>
                    <input type="text" name="email" id="email" onClick="checkEmail(document.signupform.email.value)" >
            </p>
            <p>     
                    <label for="subject" name="subject" class="w_160 block req">Subject:<!-- <span>* </span> --> </label> 
                    <select name="subject" class="subject" id="subject">
                        <option value="0">select subject</option>
                        <option value="1">subject 1</option>
                        <option value="2">subject 2</option>
                    </select>
            </p>

        </form> 
```

**这是 CSS ->**

```
.req{
    background: url(images/req_star.png) 65px center no-repeat;
    display: block;
}
.req_e{
    background: url(images/req_star.png) 90px center no-repeat;
    display: block;
    padding-left: 35px;
}

.correct{
    background: url(images/valid.png) 65px center no-repeat;
    display: block;
}
.correct_e{
    background: url(images/valid.png) 90px center no-repeat;
    display: block;
    padding-left: 35px;
} 
```

**JavaScript ->**

```
$(document).ready(function(){

    var jVal = {

        'email' : function checkEmail() {
                var email = document.getElementById('email');
                var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                if (!filter.test(email.value)) {
                $('mail').removeClass('correct_e');
                                $('mail').addClass('req_e');
                email.focus;
                return false;
                }
                else{
                        $('mail').removeClass('req_e');
                                            $('mail').addClass('correct_e');
                    }
                }

        'subject' : function() {
        var ele = $('#subject');
        var pos = ele.offset();

        sub.css({
                top: pos.top-10,
                left: pos.left+ele.width()+40
            });

            if(form.subject.selectedIndex > 0) { // an option has been selected 
                sub.removeClass('req').addClass('correct');
                    ele.removeClass('correct').addClass('req');

            } else { // no option selected 
                    jVal.errors = true;
                    sub.removeClass('correct').addClass('req');
                    ele.removeClass('req').addClass('correct');
            }   
    }

    };

// ====================================================== //

    $('#email').change(jVal.email);
    $('#subject').change(jVal.subject);

}); 
```

# javascript - 使用 javascript 向下拉列表中添加清除选项

> ID：14222654
> 
> 赞同：0
> 
> 时间：2013-01-08T19:33:18.657
> 
> 标签：javascript

我有一个与此类似的下拉列表：

```
 <select>
     <option value=" " id="invisible" style="display:none;"></option>
     <option value="0">one</option>
     <option value="1">two</option>
     <option value="2">three</option>
     <option value="">clear</option>
  </select> 
```

当我按下“清除”选项时，下拉列表应该不显示任何内容（甚至是“清除”），但不会删除其中的任何选项，即下拉列表中不应该显示任何内容，直到单击它。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:52:16.037

只需有一个用于选择的 ID 并将选项清除的值设置为“清除”...

```
<option value='clear'>clear</option>
<select id="select"> 
```

然后试试这个...

```
if($('#select').val() == 'clear'){
    $('#select).val('');
} 
```

对于 javascript...

```
var value = document.getElementById('select');

if(value == 'clear'){
    document.getElementById('select').value = '';
} 
```

可能工作...

# html - 标签旁边的文本框旁边的中心图像

> ID：14222656
> 
> 赞同：0
> 
> 时间：2013-01-08T19:33:33.123
> 
> 标签：html, css

到目前为止我有[这个](https://i.stack.imgur.com/JC9ub.png)（img标签是由javascript添加的） ![在此处输入图像描述](../Images/c0f3b92def61fdb8518849353b0f0563.png)

**HTML**

```
<p class="pCalendarContainer">
  <label for="inputSearchTo" class="field" >To</label>
  <input id="inputSearchTo" name="inputSearchTo" type="text" class="textbox" />                
  <img class="ui-datepicker-trigger" src="../../images/calendar.gif" alt="..." title="...">
</p> 
```

**CSS**

```
.pCalendarContainer
{

}
label.field
{
    text-align:left;
    width:100px;
    float:left;
    clear:both;/*forces fields under eachother in FF*/
}
input.textbox
{
    width: 150px;
    margin-left:20px;/*Always want at least 20 px between label and input*/
    float: left;
}
.pCalendarContainer > img
{
    margin-left:5px;
    float:left;
    width:20px;
    height:20px;
    vertical-align:middle;
} 
```

Datepicker CSS 供参考（默认不变）

```
.ui-datepicker { width: 17em; padding: .2em .2em 0; display: none; }
.ui-datepicker .ui-datepicker-header { position:relative; padding:.2em 0; }
.ui-datepicker .ui-datepicker-prev, .ui-datepicker .ui-datepicker-next { position:absolute; top: 2px; width: 1.8em; height: 1.8em; }
.ui-datepicker .ui-datepicker-prev-hover, .ui-datepicker .ui-datepicker-next-hover { top: 1px; }
.ui-datepicker .ui-datepicker-prev { left:2px; }
.ui-datepicker .ui-datepicker-next { right:2px; }
.ui-datepicker .ui-datepicker-prev-hover { left:1px; }
.ui-datepicker .ui-datepicker-next-hover { right:1px; }
.ui-datepicker .ui-datepicker-prev span, .ui-datepicker .ui-datepicker-next span { display: block; position: absolute; left: 50%; margin-left: -8px; top: 50%; margin-top: -8px;  }
.ui-datepicker .ui-datepicker-title { margin: 0 2.3em; line-height: 1.8em; text-align: center; }
.ui-datepicker .ui-datepicker-title select { font-size:1em; margin:1px 0; }
.ui-datepicker select.ui-datepicker-month-year {width: 100%;}
.ui-datepicker select.ui-datepicker-month, 
.ui-datepicker select.ui-datepicker-year { width: 49%;}
.ui-datepicker table {width: 100%; font-size: .9em; border-collapse: collapse; margin:0 0 .4em; }
.ui-datepicker th { padding: .7em .3em; text-align: center; font-weight: bold; border: 0;  }
.ui-datepicker td { border: 0; padding: 1px; }
.ui-datepicker td span, .ui-datepicker td a { display: block; padding: .2em; text-align: right; text-decoration: none; }
.ui-datepicker .ui-datepicker-buttonpane { background-image: none; margin: .7em 0 0 0; padding:0 .2em; border-left: 0; border-right: 0; border-bottom: 0; }
.ui-datepicker .ui-datepicker-buttonpane button { float: right; margin: .5em .2em .4em; cursor: pointer; padding: .2em .6em .3em .6em; width:auto; overflow:visible; }
.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current { float:left; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:46:22.083

在您的图像上使用`display:block`和。`margin-top`

```
.pCalendarContainer > img
{
    margin-left:5px;
    float:left;
    width:20px;
    height:20px;
    display:block;
    margin-top:3px;    
} 
```

# qooxdoo - qx.ui.embed.Html 缩放到内容

> ID：14222660
> 
> 赞同：1
> 
> 时间：2013-01-08T19:33:42.337
> 
> 标签：qooxdoo

有没有办法让包含 html 小部件 (qx.ui.embed.Html) 的容器缩放到适当的大小，这样它就不会切断一些 Html？

这是一个游乐场示例： [http ://tinyurl.com/a4twfdc](http://tinyurl.com/a4twfdc)

注意三和四是如何被切断的。

我可以解决这个问题的唯一方法是为容器定义一个 minHeight 和 minWidth，但是我的 html 的大小可能会有所不同，所以我最终会得到一个很大的空白区域或没有足够的空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:45:48.203

我能想到的唯一解决方法是将 HTML 先渲染到帮助器 div 中，并获取 offsetWidth / offsetHeight 并将其也应用于嵌入。该助手 DIV 可能在例如 -1000 / -1000 的视口之外，您可以将 HTML 设置为 innerHTML。也许这可以解决您的初始大小问题。但是一旦嵌入的内容动态变化，如果可以的话，你必须重新计算。

# r - 生成对数正态随机游走

> ID：14222661
> 
> 赞同：3
> 
> 时间：2013-01-08T19:33:43.897
> 
> 标签：r

wolframalpha 可以根据历史参数生成 6 个月、1 年、2 年的对数正态随机游走

例如 GSPC 索引： [http ://www.wolframalpha.com/input/?i=GSPC](http://www.wolframalpha.com/input/?i=GSPC)

我想知道如何在 R 中做到这一点，我会很感激一些指导。

```
library(quantmod)
getSymbols("^GSPC", from ="2000-01-01") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:02:20.823

根据简单的马尔可夫链，如何改进这一点以允许波动性随时间变化？

```
library(ggplot2)
library(quantmod)
getSymbols("^GSPC", from ="2000-01-01")

oldata <-GSPC[,6]
oldata <-na.omit(oldata)

lastprice <-tail(olddata,1)
oldsteps <- tail(diff(log(oldata)),-1)
head(oldsteps)
n_days =100
percent <- exp(cumsum(rnorm(n_days,mean(oldsteps), apply(oldsteps, 2, sd))))
path2 <- exp(cumsum(rnorm(n_days,mean(oldsteps), apply(oldsteps, 2, sd))))
path3 <- exp(cumsum(rnorm(n_days,mean(oldsteps), apply(oldsteps, 2, sd))))

paths <- data.frame(T=c(1:100),path1,path2,path3 )

plot1 <- ggplot(data=paths, aes(x=T,y=percent )) + geom_line()
plot1 <- plot1+ geom_line(aes(x=T,y=path2))+  geom_line(aes(x=T,y=path3))
plot1 <- plot1+ ggtitle("pathways")
plot1 
```

# javascript - 您如何正确可靠地跨站点加载 JSON 数据？

> ID：14222663
> 
> 赞同：0
> 
> 时间：2013-01-08T19:33:54.560
> 
> 标签：javascript, jquery, json, jsonp

我目前正在为 Chrome 开发用户脚本/扩展，并试图从“某个网站”中提取一些 JSON 数据。这是我的方法：

```
$.get( "http://cloud.hartwig-at.de/~oliver/superuser.json", 
       function( data ) { console.log( data ); } 
); 
```

当然，这会导致以下错误：

> XMLHttpRequest 无法加载[http://cloud.hartwig-at.de/~oliver/superuser.json](http://cloud.hartwig-at.de/~oliver/superuser.json)。Access-Control-Allow-Origin 不允许来源[http://superuser.com 。](http://superuser.com)

[在阅读Origin 'url' is not allowed by Access-Control-Allow-Origin](https://stackoverflow.com/questions/7216059/origin-url-is-not-allowed-by-access-control-allow-origin)之后，我能够解决这个问题（以及其他问题）。所以，这是下一个版本：

```
$.get( "http://cloud.hartwig-at.de/~oliver/superuser.json", 
       function( data ) { console.log( data ); }, 
       "jsonp" 
); 
```

可悲的是，这会导致另一个错误：

> Uncaught SyntaxError: Unexpected token : (superuser.json:2)

还有一个警告告诉我“资源解释为脚本，但使用 MIME 类型文本/纯文本传输：”这已经让我知道问题可能出在哪里。（通过[Chrome 提供了更多详细信息，说“资源解释为脚本，但使用 MIME 类型文本/纯文本传输。”，给出了什么？](https://stackoverflow.com/questions/3467404/chrome-says-resource-interpreted-as-script-but-transferred-with-mime-type-text)）

显然，[HTTP 服务器必须为我的文件发送正确的 MIME 类型](https://stackoverflow.com/questions/3143698/uncaught-syntaxerror-unexpected-token)，即[`application/json`](https://stackoverflow.com/questions/477816/the-right-json-content-type).

好的，所以我很快将[所需的更改](http://josh.gourneau.com/blog/2010/11/16/serve-json-as-content-type-applicationjson-with-apache-on-ubuntu/)添加到我的`mime.types`，然后再去一次。但是，没有骰子！警告消失了，错误没有。我还是明白了`Uncaught SyntaxError: Unexpected token :`。（我之前也尝试过使用[`mimeType`参数](http://api.jquery.com/jQuery.ajax/)来解决这个问题，结果是一样的。）

MIME 类型看起来不错：
![在此处输入图像描述](../Images/8fae5e8dc0ca512a3f60a0425f681a27.png)

现在我有点没有想法了。该文件的内容在[http://www.jslint.com/](http://www.jslint.com/)`.json`上验证良好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:37:44.770

告诉 jQuery 开始做 JSONP 并不能神奇地使它工作。它发出[JSONP 请求](http://en.wikipedia.org/wiki/JSONP)，但另一端的服务器需要支持 JSONP 调用。

服务器的响应应该类似于

```
someFunction( { "foo" : "bar" } ); 
```

请参阅[jQuery 在 getJSON](http://api.jquery.com/jQuery.getJSON/#jsonp) with JSONP 上的文档以了解如何使用回调

如果它是现代浏览器，您可以使用[CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)并且您可以控制第二个域。

其他选项是您域上的服务器端代理，它从其他域请求数据。或者，您可以使用[Yahoo 管道之](http://pipes.yahoo.com/pipes/)类的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:42:10.700

除非服务器支持，否则您不能对请求使用 JSONP。JSONP 调用的工作方式是您将`callback=something`参数与请求一起传递，服务器将 JSON 封装起来，以便浏览器在访问脚本时`something()`通过调用来加载它。`something`

如果您拥有该域，另一种使其工作的方法是配置该服务器以正确设置 CORS 标头。

如果您无权访问服务器，请考虑[使用 JSONP 代理](https://stackoverflow.com/questions/8537601/is-there-a-free-json-proxy-server-which-supports-cors-or-jsonp)，它为您包装了第一步。我已经使用 YQL 来执行此操作（请参阅链接），这不需要我自己进行任何设置。下面是执行此操作的咖啡脚本代码：

```
uri = "http://cloud.hartwig-at.de/~oliver/superuser.json"      

jqxhr = $.getJSON \
  "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22" \
    + encodeURIComponent(uri) + "%22&format=json&callback=?"  

jqxhr.success (yql) ->
  unless yql.query.results
    alert("Failed to get stuff")
    return      
  json = $.parseJSON(yql.query.results.body.p)
  # do stuff with json 
```

并以 javascript 的形式使用[http://js2coffee.org](http://js2coffee.org)：

```
uri = "http://cloud.hartwig-at.de/~oliver/superuser.json";

jqxhr = $.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22"
        + encodeURIComponent(uri) + "%22&format=json&callback=?");

jqxhr.success(function(yql) {
  var json;
  if (!yql.query.results) {
    alert("Failed to get stuff");
    return;
  }
  json = $.parseJSON(yql.query.results.body.p);
  // do stuff with json
}); 
```

# ios - 如果语句没有按预期工作

> ID：14222667
> 
> 赞同：2
> 
> 时间：2013-01-08T19:34:35.880
> 
> 标签：ios, xcode, if-statement

我想确保没有任何变量（`name`, `adres`,`code`等）是`nil`. 这是我尝试过的：

```
if (name == nil && adres == nil && code == nil && place == nil && telNr == nil && mail == nil) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"EXAMPLE"
                                                    message:@"EXAMPLE "
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];

} else { //do the rest } 
```

问题是，当其中一个变量不是 nil 时，它会运行 else 语句，但是我想确保没有一个变量是 nil。

我试过`|`而不是，`&&`但它当然更糟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:39:20.590

逻辑`OR`( `||`) 应该有效。这就像说，如果其中任何一个是`nil`显示弹出窗口，如果没有，则转到 else 分支。

如果您实际使用`|`and not `||`，请注意这`|`是按位包含运算符，而不是逻辑运算符。

# python - Tornado 请求中的非阻塞/异步 URL 获取

> ID：14222669
> 
> 赞同：0
> 
> 时间：2013-01-08T19:34:39.180
> 
> 标签：python, tornado

如果这已在其他地方得到回答，我深表歉意；我环顾四周，并没有找到明确的答案。

我想使用 Tornado 接受带有查询字符串参数的 HTTP 请求，使用这些参数调用 NOAA Web 服务来获取天气数据，处理/解析 NOAA 响应，然后将最终数据返回给用户。

我在看 Tornado，因为我不能指望 Web 服务请求的延迟或可用性，我需要调用是非阻塞的。（否则我只会使用 Django）

我还想确保我可以对 NOAA 请求设置适当的超时，以便我可以在必要时放弃。

*注意：我也愿意使用 Twisted，尽管它的学习曲线似乎要陡峭得多，而且我的需求也很简单。（我会在 Node.js 中执行此操作，但我更愿意在 Python 中处理解析要求）*

提前感谢任何可以帮助我指出正确方向的人。

一旦完成，我将开源服务器进程，并感谢任何提供示例或 RTFM 链接到相应文档的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:38:17.953

我已经从我的项目中提取了代码示例。它并不完美，但它提供了一个如何使用 Tornadp 的 AsyncHTTPClient 的想法

```
@tornado.gen.engine
def async_request(self, callback, server_url, method=u'GET', body=None, **kwargs):
    """
    Make async request to server
    :param callback: callback to pass results
    :param server_url: path to required API
    :param method: HTTP method to use, default - GET
    :param body: HTTP request body for POST request, default - None
    :return: None
    """
    args = {}

    if kwargs:
        args.update(kwargs)

    url = '%s?%s' % (server_url, urlencode(args))
    request = tornado.httpclient.HTTPRequest(url, method, body=body)

    http = tornado.httpclient.AsyncHTTPClient()
    response = yield tornado.gen.Task(http.fetch, request)

    if response.error:
        logging.warning("Error response %s fetching %s", response.error, response.request.url)
        callback(None)
        return
    data = tornado.escape.json_decode(response.body) if response else None
    callback(data) 
```

# listbox - 直接修改 TKinter 列表框中的特定项目？

> ID：14222670
> 
> 赞同：3
> 
> 时间：2013-01-08T19:34:43.320
> 
> 标签：listbox, python-2.7, tkinter

这是那些只是确保我没有错过任何内容的帖子之一。

我在 Python 2.7.3 中有一个包含列表框的 TKinter GUI，在某些情况下，我想直接修改已知索引处特定项目的文本。我已经搜索了文件，没有任何`lb.itemset()`方法或类似的东西。尽我所能告诉我我有两个选择，其中任何一个都可以，但对我来说似乎有点笨拙：

1.  `lb.delete()`旧项目和`lb.insert()`它的新值在同一索引处（如果碰巧选择了旧删除的项目，则包括重新选择新值的步骤）。

2.  为列表框创建一个`listvariable`，然后在其上使用`get()`和`set()`- 中间有一堆`replace`/ `split`/`join`杂技来处理所涉及的不同字符串格式。

有没有我想念的更简单、更直接的方法？还是我打开了所有可用的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T05:18:36.787

从沉默中假设我没有错过任何东西。我选择了选项 2——杂技并没有我想象的那么复杂。我刚刚创建了一个包含在课程中的幕后列表；每次我更新列表时，该类都会通过在列表上执行 a`' '.join`然后将列表框设置`listvariable`为结果字符串来同步列表框的内容。

# java - 错误：构造函数意图未定义

> ID：14222675
> 
> 赞同：0
> 
> 时间：2013-01-08T19:35:02.643
> 
> 标签：java, android, eclipse, android-intent, undefined

我收到此错误消息：令牌上的语法错误

这是我的代码：

```
 package com.BartH.klok;

import android.app.Activity;
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.widget.Button;
import android.view.View;
import android.view.View.OnClickListener;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Button;

public class help extends Activity {

    Button button;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.help);

        addListenerOnButton();

    }

    public void addListenerOnButton() {

        button = (Button) findViewById(R.id.buttonback);

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent5 = new Intent(this, Fullscreen.class);
                startActivity(intent5);
            }
        });
    }
    } 
```

基本上我只想在按下“buttonback”后回到活动“全屏”。但是这些按钮对我来说是新的，所以我不知道该怎么做。这是我得到的唯一错误。

谢谢你看

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:36:35.703

`this`指的是当前对象，在本例中是 OnClickListener，而不是您的 Activity。采用：

```
Intent intent5 = new Intent(help.this, Fullscreen.class); 
```

另请阅读[Java 命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)，其中规定类应以大写字母 (CamelCase) 开头。所以你的 Activity 应该被命名为`Help`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:38:19.023

它应该是：

```
 Intent intent5 = new Intent(help.this, Fullscreen.class); 
```

# null - TypeScript：如何在 0.8.0.0 之后的版本中将 null 传递给重载函数？

> ID：14222677
> 
> 赞同：3
> 
> 时间：2013-01-08T19:35:06.073
> 
> 标签：null, arguments, overloading, typescript

今天将 TypeScript 从 0.8.0.0 更新到 0.8.1.1。TS 编译器现在抱怨传递`null`或传递`undefined`给重载的函数/方法。

例如，谷歌地图`Marker`类有一个`setMap`有 2 个重载的方法。这是从[绝对类型项目中的谷歌地图定义文件中获取的](https://github.com/borisyankov/DefinitelyTyped/blob/master/googlemaps/google.maps.d.ts)：

```
declare module google.maps {
    ...
    export class Marker extends MVCObject {
        ...
        setMap(map: Map): void;
        setMap(map: StreetViewPanorama): void;
        ...
    }
    ...
} 
```

[根据 google maps API v3 docs](https://developers.google.com/maps/documentation/javascript/reference#Marker)，要从地图中删除标记，您应该将其地图设置为 null。我以前在 TS 0.8.0.0 中使用过这个，它运行良好：

```
var someMarker: google.maps.Marker = (code to initialize marker);
...
someMarker.setMap(null); 
```

TypeScript 0.8.1.1 通过以下消息抱怨这一点：

> 不明确的调用表达式 - 无法选择重载。

我尝试过的一个无效的修复方法是试图强迫 TS 相信`null`是对`google.maps.Map`. 这显然是不正确的语法，因为编译器抱怨它需要一个`;`where the `)`is。

```
someMarker.setMap(null: google.maps.Map); 
```

这是我现在拥有的修复程序，它似乎有效。**这是解决此问题的正确方法吗？**

```
var nullMap: google.maps.Map = null;
someMarker.setMap(nullMap); 
```

我意识到另一个解决方法可能是修改 google maps TS 定义文件以允许重载`setMap(map: any): void;`，但这似乎是一个糟糕的解决方案。**目前是否有任何其他方式或计划在未来的 TS 版本中解决此问题？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T19:43:06.080

您解决它的方式现在有效，但比必要的更冗长。

`null`您可以通过将其转换为该类型来指定您的意思`google.maps.Map`。

```
someMarker.setMap(<google.maps.Map>null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-03T00:49:22.803

我试过

```
someMarker.setMap(<google.maps.Map>null); 
```

正如建议的那样，但它没有用。我得到了这个编译错误：`Type 'null' cannot be converted to type 'Map'.`

这是对我有用的方式：

```
interface GenericMapShimType {
  setMap(map: google.maps.Map | null): void;
}
(someMarker as SetMapShimType).setMap(null); 
```

# knockout.js - 当父对象设置为 null 时，Knockout 失去与内部可观察对象的绑定

> ID：14222678
> 
> 赞同：3
> 
> 时间：2013-01-08T19:35:07.110
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

这是我今天遇到的问题，想知道这是我做错了什么还是 Knockout 中的错误。

想象一下来自服务器的 3 种不同的视图模型状态：

```
State 1 = { AnObject: { WithString: "SomeText" } }
State 2 = { AnObject: null }
State 3 = { AnObject: { WithString: "DifferentText" } } 
```

如果我这样做：

```
<p data-bind="text: AnObject.WithString"></p> 
```

假设适当的 Knockout 绑定，我希望该元素的文本是“SomeText”，然后什么都没有，然后是“DifferentText”作为通过所有三个状态更新我的 KO 视图模型。

实际发生的是第一个状态工作正常（文本变为“SomeText”），然后在第二个状态下，文本没有改变，似乎绑定完全丢失了，因为在第三个状态下，文本仍然没有改变，即使现在有很好的使用价值。

这是一个演示该问题的 JSFiddle：

[http://jsfiddle.net/zAuDs/4/](http://jsfiddle.net/zAuDs/4/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T03:17:17.087

我相信这是映射插件如何处理更新的产物。

在第一个映射上，为 . 创建了一个 observable `InternalThing`。

在第二个映射中，整个 observable 被从视图模型中移除（UI 仍然绑定到它）。

在第三个映射中，创建了一个新的 observable `InternalThing`，它没有绑定到 UI。

一种选择是强制`Obj`可观察并`with: Obj`在您的元素周围使用 a 。

```
 var ViewModel = function(data) {
      var me = this;
      ko.mapping.fromJS(data, {}, me);
      me.Obj = ko.observable(me.Obj);   

      return me;
  }; 
```

然后，像这样绑定：

```
<!-- ko with: Obj -->
<h1 data-bind="text: InternalThing">1</h1>
<!-- /ko --> 
```

示例：http: [//jsfiddle.net/rniemeyer/bJkKp/](http://jsfiddle.net/rniemeyer/bJkKp/)

# rest - Spring MVC 3.1 REST 服务发布方法返回 415

> ID：14222681
> 
> 赞同：2
> 
> 时间：2013-01-08T19:35:10.223
> 
> 标签：rest, post, spring-mvc, http-status-code-415

我正在做一个 Spring MVC 控制器，但我仍然遇到 POST 操作的问题。我已经阅读了许多关于 stackoverflow 的解决方案，但没有解决我的问题。

我目前的成就：

*   我发送了一个带有 Id 的 GET 请求，并成功返回了一个转换为 JSON 的对象。
*   我未能发送`POST`带有 JSON 正文的请求，`return = 415 UNSUPPORTED_MEDIA_TYPE`

1）我在 pom.xml 中添加了 Jackson API：1.8.5

2) 我的 Spring 配置文件：我添加了所有必要的部分：

*   视图解析器
*   org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter
*   映射JacksonHttpMessageConverter
*   mvc:注解驱动
*   扫描我的控制器

3) 我的模型对象很简单：一个带有 ID、名称和金额的帐户

```
@Document
public class Account implements Serializable {

    private static final long serialVersionUID = 9058933587701674803L;

    @Id
    private String id;
    private String name;
    private Double amount=0.0;

    // and all get and set methods 
```

4）最后是我的简化控制器类：

```
@Controller
public class AdminController {

    @RequestMapping(value="/account", method=RequestMethod.POST, 
             headers = {"content-type=application/json"})
    @ResponseStatus( HttpStatus.CREATED )
    public void addAccount(@RequestBody Account account){ 
        log.debug("account from json request " + account);
    }

    @RequestMapping(value="/account/{accountId}", method=RequestMethod.GET)
    @ResponseBody
    public Account getAccount(@PathVariable("accountId") long id){
        log.debug("account from json request " + id);
        return new Account();
    }
} 
```

5）在客户端我刚刚执行了 curl 命令：成功的`GET`命令：

```
curl -i -GET -H 'Accept: application/json'  http://myhost:8080/compta/account/1 
```

`POST`失败的命令：

```
curl -i -POST -H 'Accept: application/json' -d '{"id":1,"name":"test",amount:"0.0"}' http://myhost:8080/compta/account 
```

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T19:41:31.977

好吧，“UNSUPPORTED_MEDIA_TYPE”应该是一个提示。您的`curl`命令实际上是发送：

```
Content-Type: application/x-www-form-urlencoded 
```

只需添加显式`Content-Type`标题，您就可以开始了：

```
curl -v -i -POST -H 'Accept: application/json' -H 'Content-Type: application/json' -d '{"id":1,"name":"test",amount:"0.0"}' http://myhost:8080/compta/account 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T19:40:49.887

尝试这个 ：

```
curl -i -POST -H "Accept: application/json" -H "Content-type: application/json" -d '{"id":1,"name":"test",amount:"0.0"}' http://myhost:8080/compta/account 
```

# c# - 使用 C#，如何让“Application.StartupPath”返回映射的驱动器路径而不是 UNC 路径？

> ID：14222685
> 
> 赞同：0
> 
> 时间：2013-01-08T19:35:24.203
> 
> 标签：c#, uac

当我的应用程序使用 app.manifest 时，下面的行设置如下

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

编码

```
textBox1.Text = Path.Combine(Application.StartupPath, "setupws.exe"); 
```

返回`"\\server\myApp\setupws.exe"`

如果我将 更改`requestedExecutionLevel`为`"asInvoker"`或`app.manifest`完全删除，它会返回`"F:\myApp\setupws.exe"`. 这就是我需要的。

有没有办法`Application.StartupPath`按照我想要的方式行事并且*仍然*使用`requireAdministrator`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:04:55.723

我想不出任何方法来改变你得到的响应，但你总是可以尝试将 UNC 重新映射回本地 - 为此，你需要调用底层 Win32 调用（C dll 调用) 使用“平台调用”或“PInvoke”；引用 win32 调用的语法有点像：

```
[DllImport("mpr.dll", CharSet=CharSet.Auto, SetLastError=true)]
[return:MarshalAs(UnmanagedType.Bool)]
public static extern bool WNetGetConnection(
    [MarshalAs(UnmanagedType.LPTStr)] string localName, 
    [MarshalAs(UnmanagedType.LPTStr)] StringBuilder remoteName, 
    ref int length); 
```

（这样做是将非托管调用/类型映射到它们的托管等效项，并告诉编译器“嘿，我要调用这些东西之外的代码”）

`WNetGetConnection`是一个相当乏味的 Windows 功能：给它一个驱动器号，如果它映射到一个，你会得到一个 UNC 路径。我们将循环通过“已知驱动器号”，依次将每个驱动器号提供给此调用，如果我们得到与返回的 UNC 名称和我们试图“反向映射”的路径的任何部分匹配，我们将替换带有相应驱动器号的路径的 UNC 部分，我们就完成了：

```
public string GetLocalPathForUnc(string uncName)
{
    var mapped = Environment.GetLogicalDrives().Select(drive => 
    {
        drive = drive.Substring(0,2);
        var buffer = new StringBuilder(0xff);
        int length = 0xff;
        WNetGetConnection(drive, buffer, ref length);
        return new {Drive = drive, Unc = buffer.ToString()};
    });
    var match = mapped
            .Where(ob => 
                 !string.IsNullOrWhiteSpace(ob.Drive) && 
                 !string.IsNullOrWhiteSpace(ob.Unc))
        .FirstOrDefault(ob => uncName.ToLowerInvariant().StartsWith(ob.Unc.ToLowerInvariant()));
    return uncName.Replace(match.Unc, match.Drive);
} 
```

# python - Python PIL - 保存到 mimetype “image/jpeg”，而不是“image/pjpeg”

> ID：14222687
> 
> 赞同：0
> 
> 时间：2013-01-08T19:35:29.653
> 
> 标签：python, jpeg, python-imaging-library, tweepy

我目前正在与 Tweepy 合作尝试更新个人资料图片。Tweepy 最多支持三种不同的 mimetype 格式，' **image/gif** '、' **image/jpeg** '、' **image/png** '。

使用 PIL，我正在尝试将图像转换为**'image/jpeg'**，尽管每次我尝试使用 PIL 转换图像时，它都会显示为**'image/pjpeg'**。我尝试将 pjpeg 添加到 Tweepy 上的允许列表中，但它不明白如何处理它。

如何将带有 PIL 的图像转换为**'image/jpeg'**而不是**'image/pjpeg'** mimetype？

```
from PIL import Image
import mimetypes

pic = Image.open(rootDir + "pic.png")
pic = pic.convert("RGB")
pic.save(rootDir + "new.jpg", 'jpeg', progressive=False)

print mimetypes.guess_type(rootDir + "new.jpg") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:27:02.453

我猜你在Windows上。

通过挖掘`mimetypes`代码，我发现第一次调用模块中的任何内容时，它都会运行`mimetypes.init()`，它会设置可用的 mime 类型。在 Windows 上，这些默认情况下从注册表中加载，至少在我的机器上，注册了“image/pjpeg”，即 jpeg 的 IE mimetype，以及“image/jpeg”，其他人使用的 mimetype。由于`mimetypes`将 mimetypes 存储为 dict 并将注册表 mimetypes 加载为`strict`版本，没有办法避免 mimetype 被覆盖，事实上，因为我不认为检索注册表值的顺序是以任何方式定义的，所以它在 Windows 上是不确定的，因为注册表为扩展定义了 2 个 mimetypes。我看不出有任何方法可以做到这一点，既丑陋又不老套，但在我看来，您应该能够通过以下方式使事情为您工作：

```
import mimetypes

# alternatively, you could just call this with
# files=file_path_list of mimetype files that you create
mimetypes.init()
mimetypes._default_mime_types()
mimetypes._db = mimetypes.MimeTypes() 
```

# jsf - 如何使 PrimeFaces 选项卡“可链接”？

> ID：14222689
> 
> 赞同：2
> 
> 时间：2013-01-08T19:35:30.263
> 
> 标签：jsf, primefaces

我希望能够链接到 PrimeFaces 的“tabView”中的各个选项卡。换句话说，如果我的页面“test.jsf”有一个带有标题为“示例”选项卡的 tabView，我希望能够单击指向“Test.jsf#Example”的链接并自动加载“示例”选项卡。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:35:30.263

这可以用一点点 JavaScript（使用 jQuery）来完成。我希望我已经对以下代码进行了足够好的注释，以便可以理解。

```
<script type="text/javascript">
//    What this does: when the page is loaded with a URL fragment (i.e, the #abc in example.com/index.html#abc),
//    load the tab (by "clicking" on the link) that has the same text value as the fragment.
//    Example: if you go to test.jsf#Example, the tab called "Example" will be clicked and loaded.
//    This allows individual tabs to be linked to, and puts what tab you were on in the history.
    navigateToTab = function () {
        if (window.location.hash) {
            jQuery('ul.ui-tabs-nav li a').each(function (i, el) {
                if (jQuery(el).text() === window.location.hash.replace('#', '')) {
                    jQuery(el).click();
                    return;
                }
            })
        }
    };

    jQuery().ready(navigateToTab);
    jQuery(window).bind('hashchange', navigateToTab);

//    This makes it so that if you click a tab, it sets the URL fragment to be the tab's title. See above.
//    E.g. if you click on the tab called "Example", then it sets the onclick attribute of the tab's "a" tag
//    to be "#Example"
    setupTabFragmentLinks = function () {
        jQuery('ul.ui-tabs-nav li a').each(function (i, el) {
            el.onclick = function() {window.location = '#' + jQuery(el).text()};
        })
    };
    jQuery().ready(setupTabFragmentLinks);
</script> 
```

您所要做的就是将该 JavaScript 插入具有选项卡的页面中。然后，您可以使用通常的`<a href='test.jsf#Example>Click here!</a>`. 另一个好处是您所在的选项卡成为浏览器历史记录的一部分；即，如果您离开具有标签的页面，然后按“返回”按钮，您将返回到您所在的标签。

注意：如果 tabView 发生变化（例如添加或删除选项卡），您将需要再次调用 setupTabFragmentLinks。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T00:50:58.940

Primefaces 为`<p:tabView/>`（和许多其他组件）提供了一个 javascript API。`select(index)`您可以在您的客户端`widgetVar`名称上调用该方法`<p:tabView/>`。例如，在选项卡视图上

```
 <p:tabView id="thePanel"  widgetVar="tabPanel"/> 
```

从 a`<p:CommandButton/>`中，您可以调用属性`tabPanel.select(1)`以`onclick`选择第一个选项卡，依此类推

```
 <p:commandButton update=":thePanel" value="Do It " id="doIt" onclick="tabPanel.select(1)"/> 
```

# sql - Teradata 性能问题和示例

> ID：14222693
> 
> 赞同：2
> 
> 时间：2013-01-08T19:35:38.183
> 
> 标签：sql, teradata

我在我们的 Teradata QA 环境中遇到了一个问题，一个在 1 分钟内运行的简单查询现在需要 12 分钟才能完成。此选择基于简单的内部连接提取 5 个字段

```
select a.material
    , b.season
    , b.theme
    , b.collection
from SalesOrders_view.Allocation_Deliveries_cur a
inner join SalesOrders_view.Material_Attributes_cur b
    on a.material = b.material; 
```

我可以在我们的 Prod 环境中运行同样的查询，它会在不到一分钟的时间内返回，同时运行的记录比 QA 多约 20 万条。

SalesOrders.Allocation_Deliveries 中的总交易量低于 110 万条记录，SalesOrders.Material_Attributes 中的总数量低于 129k 条记录。这些是小型数据集。

我比较了两种环境中的 Explain 计划，在第一个 Join 步骤中估计的 spool 体积存在明显差异。生产中的估计是在金钱上，而质量保证中的估计是一个数量级。然而，两个系统中的数据和表格/视图是相同的，我们以各种可能的方式收集了统计数据，我们可以看到两个系统中的特定表格人口统计数据是相同的。

最后，这个查询在包括 QA 在内的所有环境中总是在一分钟内返回，因为它仍在生产中进行。这种潜在的行为是最近一周左右的。我与我们的 DBA 讨论了这个问题，我们没有对软件或配置进行任何更改。他是新人，但似乎知道自己在做什么，但仍被新环境赶上。

我正在寻找一些关于下一步检查的指示。我已经比较了 QA 和 Prod 的相关表/视图定义，它们是相同的。每个系统中的表格人口统计数据也是相同的（我与我们的 DBA 一起检查了这些以确保）

任何帮助表示赞赏。提前致谢。拍

这是 QA 的解释计划。请注意第 5 步（144 行）中的非常低的估计值。在 Prod 中，相同的解释显示 > 1 M 行，这将接近我所知道的。

```
Explain select a.material
    , b.season
    , b.theme
    , b.collection
from SalesOrders_view.Allocation_Deliveries a
inner join SalesOrders_view.Material_Attributes_cur b
    on a.material = b.material;

  1) First, we lock SalesOrders.Allocation_Deliveries in view
     SalesOrders_view.Allocation_Deliveries for access, and we lock
     SalesOrders.Material_Attributes in view SalesOrders_view.Material_Attributes_cur for
     access. 
  2) Next, we do an all-AMPs SUM step to aggregate from
     SalesOrders.Material_Attributes in view SalesOrders_view.Material_Attributes_cur by way
     of an all-rows scan with no residual conditions
     , grouping by field1 ( SalesOrders.Material_Attributes.material
     ,SalesOrders.Material_Attributes.season ,SalesOrders.Material_Attributes.theme
     ,SalesOrders.Material_Attributes.theme ,SalesOrders.Material_Attributes.af_grdval
     ,SalesOrders.Material_Attributes.af_stcat
     ,SalesOrders.Material_Attributes.Material_Attributes_SRC_SYS_NM).  Aggregate
     Intermediate Results are computed locally, then placed in Spool 4\. 
     The size of Spool 4 is estimated with high confidence to be
     129,144 rows (41,713,512 bytes).  The estimated time for this step
     is 0.06 seconds. 
  3) We execute the following steps in parallel. 
       1) We do an all-AMPs RETRIEVE step from Spool 4 (Last Use) by
          way of an all-rows scan into Spool 2 (all_amps), which is
          redistributed by the hash code of (
          SalesOrders.Material_Attributes.Field_9,
          SalesOrders.Material_Attributes.Material_Attributes_SRC_SYS_NM,
          SalesOrders.Material_Attributes.Field_7, SalesOrders.Material_Attributes.Field_6,
          SalesOrders.Material_Attributes.theme, SalesOrders.Material_Attributes.theme,
          SalesOrders.Material_Attributes.season, SalesOrders.Material_Attributes.material)
          to all AMPs.  Then we do a SORT to order Spool 2 by row hash
          and the sort key in spool field1 eliminating duplicate rows. 
          The size of Spool 2 is estimated with low confidence to be
          129,144 rows (23,504,208 bytes).  The estimated time for this
          step is 0.11 seconds. 
       2) We do an all-AMPs RETRIEVE step from SalesOrders.Material_Attributes in
          view SalesOrders_view.Material_Attributes_cur by way of an all-rows scan
          with no residual conditions locking for access into Spool 6
          (all_amps), which is redistributed by the hash code of (
          SalesOrders.Material_Attributes.material, SalesOrders.Material_Attributes.season,
          SalesOrders.Material_Attributes.theme, SalesOrders.Material_Attributes.theme,
          SalesOrders.Material_Attributes.Material_Attributes_SRC_SYS_NM,
          SalesOrders.Material_Attributes.Material_Attributes_UPD_TS, (CASE WHEN (NOT
          (SalesOrders.Material_Attributes.af_stcat IS NULL )) THEN
          (SalesOrders.Material_Attributes.af_stcat) ELSE ('') END )(VARCHAR(16),
          CHARACTER SET UNICODE, NOT CASESPECIFIC), (CASE WHEN (NOT
          (SalesOrders.Material_Attributes.af_grdval IS NULL )) THEN
          (SalesOrders.Material_Attributes.af_grdval) ELSE ('') END )(VARCHAR(8),
          CHARACTER SET UNICODE, NOT CASESPECIFIC)) to all AMPs.  Then
          we do a SORT to order Spool 6 by row hash.  The size of Spool
          6 is estimated with high confidence to be 129,144 rows (
          13,430,976 bytes).  The estimated time for this step is 0.08
          seconds. 
  4) We do an all-AMPs RETRIEVE step from Spool 2 (Last Use) by way of
     an all-rows scan into Spool 7 (all_amps), which is built locally
     on the AMPs.  Then we do a SORT to order Spool 7 by the hash code
     of (SalesOrders.Material_Attributes.material, SalesOrders.Material_Attributes.season,
     SalesOrders.Material_Attributes.theme, SalesOrders.Material_Attributes.theme,
     SalesOrders.Material_Attributes.Field_6, SalesOrders.Material_Attributes.Field_7,
     SalesOrders.Material_Attributes.Material_Attributes_SRC_SYS_NM,
     SalesOrders.Material_Attributes.Field_9).  The size of Spool 7 is estimated
     with low confidence to be 129,144 rows (13,301,832 bytes).  The
     estimated time for this step is 0.05 seconds. 
  5) We do an all-AMPs JOIN step from Spool 6 (Last Use) by way of an
     all-rows scan, which is joined to Spool 7 (Last Use) by way of an
     all-rows scan.  Spool 6 and Spool 7 are joined using an inclusion
     merge join, with a join condition of ("(material = material) AND
     ((season = season) AND ((theme = theme) AND ((theme =
     theme) AND (((( CASE WHEN (NOT (af_grdval IS NULL )) THEN
     (af_grdval) ELSE ('') END ))= Field_6) AND (((( CASE WHEN (NOT
     (AF_STCAT IS NULL )) THEN (AF_STCAT) ELSE ('') END ))= Field_7)
     AND ((Material_Attributes_SRC_SYS_NM = Material_Attributes_SRC_SYS_NM) AND
     (Material_Attributes_UPD_TS = Field_9 )))))))").  The result goes into Spool
     8 (all_amps), which is duplicated on all AMPs.  The size of Spool
     8 is estimated with low confidence to be 144 rows (5,616 bytes). 
     The estimated time for this step is 0.04 seconds. 
  6) We do an all-AMPs JOIN step from Spool 8 (Last Use) by way of an
     all-rows scan, which is joined to SalesOrders.Allocation_Deliveries in view
     SalesOrders_view.Allocation_Deliveries by way of an all-rows scan with no
     residual conditions.  Spool 8 and SalesOrders.Allocation_Deliveries are
     joined using a single partition hash_ join, with a join condition
     of ("SalesOrders.Allocation_Deliveries.material = material").  The result goes
     into Spool 1 (group_amps), which is built locally on the AMPs. 
     The size of Spool 1 is estimated with low confidence to be 3,858
     rows (146,604 bytes).  The estimated time for this step is 0.44
     seconds. 
  7) Finally, we send out an END TRANSACTION step to all AMPs involved
     in processing the request.
  -> The contents of Spool 1 are sent back to the user as the result of
     statement 1\.  The total estimated time is 0.70 seconds. 
```

这是记录分布的样子和我用来生成结果集的 SQL

```
SELECT HASHAMP(HASHBUCKET(HASHROW( MATERIAL ))) AS
"AMP#",COUNT(*)
FROM EDW_LND_SAP_VIEW.EMDMMU01_CUR
GROUP BY 1
ORDER BY 2 DESC; 
```

输出最高：AMP 137，1093 行 最低：AMP 72，768 行 AMP 总数：144

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T23:50:25.820

**统计建议**

在 PROD 和 QA 中运行以下命令并发布差异（如果需要，请隐藏列名）：

```
DIAGNOSTIC HELPSTATS ON FOR SESSION;

EXPLAIN
select a.material
    , b.season
    , b.theme
    , b.collection
from SalesOrders_view.Allocation_Deliveries_cur a
inner join SalesOrders_view.Material_Attributes_cur b
    on a.material = b.material; 
```

当与 EXPLAIN 命令一起运行时，此诊断将生成推荐的统计信息列表，这些统计信息可能有利于优化器生成最低成本的查询计划。这可能不会产生任何差异，或者它可能指向环境（数据或其他）之间不同的东西。

**视图和 JOIN 条件**

根据您的 EXPLAIN 计划，SalesOrders_View 数据库中的一个或两个视图似乎正在使用 EXISTS 子句。这个 EXISTS 子句依赖于 COALESCE 条件（或显式 CASE 逻辑）来适应一个表中定义为 NOT NULL 的列与另一个表中定义为允许 NULL 值的列之间的比较。这可能会影响该联接的性能。

**数据分布**

您的分发结果似乎来自 PRODUCTION 环境。（基于 AMP 的数量和 AMP 上显示的最高行和最低行的行数。）这对于 QA 来说是什么样的？

**编辑 - 2013-01-09 09:21**

如果数据是在 2 个月前从 Prod 复制的，那么问这个问题可能看起来很愚蠢，但后来又重新收集了统计数据吗？*替换数据之上的陈旧统计信息可能会导致环境之间的查询计划出现差异。*

即使它们不是 PPI 表，您是否也在收集有关您的表的 PARTITION 统计信息？*这有助于优化器进行基数估计。*

您是唯一在 QA 系统上运行的工作负载吗？

您是否查看过 DBQL 指标来比较每个环境中查询的 CPU 和 IO 消耗？*还要查看 IO 偏斜、CPU 偏斜和不必要的 IO 指标。*

您是否在 QA 环境中设置了可能会延迟您的工作负载的延迟限制？*这会让您感觉在 QA 环境中运行需要更长的时间，而实际上 QA 和 PROD 之间的实际 CPU 消耗和 IO 消耗是相同的。*

您可以访问 Viewpoint 吗？

如果是这样，您是否使用 My Queries 和/或 Query Spotlight portlet 查看了您的查询以观察它的行为？

您知道查询计划中的哪个步骤最昂贵或最耗时吗？*使用我提到的 portlet 或 DBQL 中的 Step logging 的 Viewpoint Rewind 可以向您展示这一点。*

环境之间的 DBS Control 设置是否相同？*请您的 DBA 看看这个。那里有一些设置会影响优化器使用的连接计划。*

最后，如果硬件和 TDBMS 补丁级别相同的两个系统上的数据、表结构、索引和统计信息相同，则不应获得两个不同的 EXPLAIN 计划。如果最终出现这种情况，我建议您联系 GSC 并让他们参与进来。

# hibernate - 使用 OneToMany Fetch 休眠 maxResults 将子项计为结果行

> ID：14222694
> 
> 赞同：0
> 
> 时间：2013-01-08T19:35:48.270
> 
> 标签：hibernate, fetch, hibernate-annotations, hibernate-onetomany

我有一个视频类，它有一个对另一个类评论的 OneToMany 注释。

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "videoId", cascade = CascadeType.ALL, orphanRemoval = true)
@Sort(type = SortType.COMPARATOR, comparator = CommentComparator.class) 
```

我在查询中设置了 setMaxResults(4)，希望只检索最后 4 个视频。如果任何视频都没有评论，这将非常有用。但是，如果我为每个视频指定超过 1 条评论，我的查询现在返回的视频少于 4 个（我认为它将获取的行数计为 maxResult）。

如何确保在我的查询中返回所有 4 个视频？

```
public <T>List<T> find(Class<T> clazz, Order order, int maxResults, List<String> fetch, List<Criterion> expressions)
{
    Criteria criteria = getCurrentSession().createCriteria(clazz);
    for (Criterion ex : expressions)
    {
        criteria.add(ex);
    }
    if (maxResults > 0)
    {
        criteria.setMaxResults(maxResults);
    }

    if (fetch != null)
    {
        for (String f : fetch)
        {
            criteria.setFetchMode(f, FetchMode.JOIN);
        }
    }
    criteria.addOrder(order);

    criteria.setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY);

    return criteria.list();
} 
```

我打电话

```
return myDao.find(Video.class, Order.desc("id"), maxResult, fetch, criteria); 
```

# maven - 战争叠加冲突

> ID：14222697
> 
> 赞同：1
> 
> 时间：2013-01-08T19:35:57.553
> 
> 标签：maven, war

我有一个看起来像这样的 Maven 依赖项：例如 `<dependency> <type>war</type> <scope>runtime</scope>... </dependency>` ，它与我自己的 Web 文件（它提供 index.jsp）有冲突。在某个子路径下移动它提供的所有资源的正确方法是什么？可能`/depname/index.jsp`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:42:29.160

我相信您想使用覆盖插件的[targetPath 属性](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)。

> **targetPath** - webapp 结构中的目标相对路径，仅适用于 war 类型的覆盖。默认情况下，叠加层的内容会添加到 webapp 的根结构中。

# asp.net-mvc-3 - Visual Studio 项目模板导致异常 HRESULT：0x80070002

> ID：14222700
> 
> 赞同：1
> 
> 时间：2013-01-08T19:36:15.577
> 
> 标签：asp.net-mvc-3, visual-studio-2010, exception, visual-studio-templates

我按照[此链接](http://haacked.com/archive/2011/06/06/creating-a-custom-asp-net-mvc-project-template.aspx)访问了在 Visual Studio for MVC3 中创建新项目模板的信函。不幸的是，当模板显示在对话框中时，当我单击它创建一个新项目时，我得到“HRESULT 异常：0x80070002”。我不知道如何解决这个问题。

线程中的一个人提到 /installvstemplates 命令必须以管理员身份运行。我已经做到了。还是不行。这个例外毫无用处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T16:24:11.597

来自为同一问题联系 Microsoft 支持的用户（在模板上找不到文件）如果不在 64 位计算机上，请从文件夹名称中删除 (x86)。在开始之前备份整个 ProjectTemplates 文件夹。

打开`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\VWDExpress\ProjectTemplates\CSharp\Web\1033`并将名称中包含“MVC”的任何文件夹从第二个文件夹复制到第一个文件夹（将 3.1 移动到 3.0 所在的位置）。

完成后，您可以上几个级别到 ProjectTemplates 文件夹，并对其他代码库执行相同的操作。

`Visual Studio Developer Command Prompt`以管理员身份打开并运行：`devenv /setup`

这应该正确设置您的`ProjectTemplatesCache`文件夹并解决问题。

# javascript - 使用数字键访问非数字键对象是否有效？

> ID：14222702
> 
> 赞同：2
> 
> 时间：2013-01-08T19:36:27.527
> 
> 标签：javascript, object, key, numeric

我有一个对象

```
data = {
    'choiceA' : 'Long-Wear',
    'choiceB' : 'Anti-Age Lifting/Firming',
    'choiceC' : 'Replenishing/ Moisturizing',
    'choiceD' : 'Natural/ True-to-Skin',
    'choiceE' : 'Smoothing/ Illuminating'
} 
```

我需要检索给定整数的第四个值

```
 position = 3; 
```

通常我会写

```
 key = $.inArray( position, ['choiceA', 'choiceB', 'choiceC', 'choiceD', 'choiceE']);
 answer = data[key]; 
```

但是像这样直接使用数字键访问对象是否有效？

```
 answer = data[position];  // where position is an integer 
```

编辑：
我在向后使用 $.inArray 时编写的一些错误代码！
我的意思是写

```
 arr = ['choiceA', 'choiceB', 'choiceC', 'choiceD', 'choiceE'];
 key = arr[position];
 answer = data[key]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:39:30.807

不，在您拥有数字对象“键”之前它是无效的，即

```
data = {
    '1' : 'Long-Wear',
    '2' : 'Anti-Age Lifting/Firming',
    '3' : 'Replenishing/ Moisturizing',
    '4' : 'Natural/ True-to-Skin',
    '5' : 'Smoothing/ Illuminating'
}; 
```

另外，需要注意的是，JavaScript 对象中的属性**没有排序**。因此，正如我所见，您的解决方案是最好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T19:45:33.533

两件事情：

1.  Javascript 键始终是字符串。如果您传递其他内容（例如，一个数字），它将被转换为一个字符串。（例如，尝试使用索引数组，`array["3"]`它应该可以工作

2.  Javascript 对象*没有*排序！您无法以可移植的方式取回第 i 个键值对。相反，您应该使用数组来存储东西（或类似的东西）：

    ```
    data = [
        { name:'choiceA', value: 'Long-Wear'},
        { name:'choiceB', value: 'Anti-Age Lifting/Firming'}
    ]; 
    ```

    如果您无法更改数据表示，您可以做的一件事是使用 for-in 循环和计数变量遍历您的对象。但是，这种方法不可移植，因为并非所有浏览器都按照定义键的顺序进行迭代。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T19:42:08.037

如果您尝试过，您会发现它无效。更糟糕的是，它不起作用！

```
data[position] 
```

在您的示例中将返回 undefined ...

# jquery - 如何获取复选框值

> ID：14222704
> 
> 赞同：0
> 
> 时间：2013-01-08T19:36:29.207
> 
> 标签：jquery

我敢肯定这已经被问过很多次了，但我不确定什么对我有用。我很不识字，但正在努力。

我需要获取复选框值，以便我可以在服务器上处理它们。目前，我得到一个已选中的 POST 值，但没有得到未选中的 POST 值。有人可以告诉我如何获得未经检查的价值吗？

```
$(this).next()[0].checked = !$(this).next()[0].checked;
var vals = $(this).next().serializeArray(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:39:58.150

```
var val = $(this).is(':checked'); 
```

这是一个[演示小提琴](http://jsfiddle.net/edelman/Ut69Q/)，证明它有效

# iphone - NSDictionary 在文本标签中使用对象并在详细文本标签中键入

> ID：14222710
> 
> 赞同：-2
> 
> 时间：2013-01-08T19:36:42.397
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

```
 - (void)viewDidLoad
    {

    [super viewDidLoad]    
    { FloorList = [NSArray arrayWithObjects:@"Floor One", @"Floor Two", @"Floor Three", nil];
        FloorListAvailable = [NSArray arrayWithObject:@"10 Available", @"2 Available", @"0 Available", nil]; 
        dict = [NSDictionary dictionaryWithObjects:FloorListAvailable forKeys:FloorList];
      }  
       }

   ...cellForRowAtIndexPath:..... 
        cell.textLabel.text = [@"%", FloorList];
        cell.detailTextLabel.text= [@"%", [dict objectForKey:FloorListAvailable]]; 
```

我不知道我现在在做什么。我只想要一个表格视图来显示 1 楼，并在 detailtextlabel 中显示可用的数字。我无法理解或理解如何达到这一点。谢谢！

编辑-我已经在情节提要中制作了表格视图并创建了一个视图控制器 h 和 m 文件，这正在写入 FloorTableViewController.m 文件

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-08T19:44:19.863

试试这个 ：

在您的 tebleView 代表“cellForRowAtIndex”中写下：

```
 cell.textLabel.text = [NSString stringWithFormate:@"%@",[FloorList objectAtIndex:indexPath.row]];
cell.detailTextLabel.text= [NSString stringWithFormate:@"%@",[FloorListAvailable objectAtIndex:indexPath.row]]; 
```

每次创建单元格时，它都会从与数组值对应的数组中加载对象

希望这会帮助你

# c# - wcf 配置设置问题，端点默认为 mex

> ID：14222714
> 
> 赞同：0
> 
> 时间：2013-01-08T19:37:01.603
> 
> 标签：c#, .net, wcf, workflowservice

我正在尝试设置我的服务`wsHttpBinding`。服务页面在 Firefox 中加载得很好，但是当使用 WCFTestClient 发出请求时，会触发错误异常，因为它显然`EndPoint`出于某种原因试图访问 mex。如您所见，我什至没有列出 mex，这是配置：

```
<system.serviceModel>    
    <services>
      <service name="WorkFlowManagement" behaviorConfiguration="WorkFlowManagementBehavior">
        <endpoint binding="wsHttpBinding" contract="IWorkflowManagement"
                  bindingConfiguration="WSHttpBinding_IWorkflowManagement"
                  name="WSHttpBinding_IWorkflowManagement"/>
      </service>
    </services>
    <bindings>
      <wsHttpBinding>
        <binding name="WSHttpBinding_IWorkflowManagement" maxBufferPoolSize="999965536"
                 maxReceivedMessageSize="999965536" messageEncoding="Text" textEncoding="utf-8">
          <readerQuotas maxArrayLength="999965536" maxBytesPerRead="999965536" maxDepth="999965536"
                        maxNameTableCharCount="999965536" maxStringContentLength="999965536"/>
          <security mode="None"/>
        </binding>
      </wsHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="WorkFlowManagementBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <sqlWorkflowInstanceStore
            connectionString="my connection string"
           instanceEncodingOption="None" instanceCompletionAction="DeleteAll" instanceLockedExceptionAction="BasicRetry" hostLockRenewalPeriod="00:00:30" runnableInstancesDetectionPeriod="00:00:02" />
          <workflowIdle timeToUnload="0"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true">
      <serviceActivations>
        <add factory="SecAmerInc.STPCore.Services.WorkFlowManagment.WFServiceFactory"
             relativeAddress="./WorkFlowManagement.xamlx"
             service="WorkFlowManagement.xamlx"/>
      </serviceActivations>
    </serviceHostingEnvironment>
  </system.serviceModel> 
```

然而，这是异常消息：

> 由于 EndpointDispatcher 的 AddressFilter 不匹配，接收方无法处理带有“http://localhost/SecAmerInc.STPCore.Services.WorkFlowManagement/WorkFlowManagement.xamlx/mex”的消息。检查发送方和接收方的 EndpointAddresses 是否一致。

这是 WCFTestClient 的配置：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
        <bindings>
            <wsHttpBinding>
                <binding name="WSHttpBinding_IWorkflowManagement" sendTimeout="00:05:00">
                    <security mode="None" />
                </binding>
            </wsHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost/SecAmerInc.STPCore.Services.WorkFlowManagement/WorkFlowManagement.xamlx"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IWorkflowManagement"
                contract="IWorkflowManagement" name="WSHttpBinding_IWorkflowManagement" />
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:58:09.347

MEX（元数据交换）端点将有关您的服务的元数据发送给调用者。该工具可能需要您的元数据来了解如何与您的服务进行通信。如果您想使用此工具进行测试，请定义您的 MEX 端点。

# c++ - 函数 MPI 的返回值

> ID：14222717
> 
> 赞同：0
> 
> 时间：2013-01-08T19:37:11.300
> 
> 标签：c++, linux, mpi

我运行一个每个进程都进入的函数。进行了一些计算，然后所有进程退出该函数，但只有等级为 0 的进程返回一些东西。问题是在 return 语句中，值是正确的，但在 main 中，我分配函数的结果，返回值为 0。这里有一些代码：

```
MPI_Barrier(MPI_COMM_WORLD);
CCI = TestKNN (tlist, data, true, mode, false, false);      
MPI_Barrier(MPI_COMM_WORLD); 
```

…………

```
TestKNN(....)
{
    int res; 
    if (rank == 0)
    {
          res = 0;
          send data to each process and receive result
          receive result from every process
          res += return_value
    }
    else
    {
         receive data
         work on data
         send result to rank 0
    }

    if (rank == 0)
         return res
 } 
```

可能是什么问题呢？

# javascript - 画布进度矩形两种颜色

> ID：14222719
> 
> 赞同：1
> 
> 时间：2013-01-08T19:37:15.843
> 
> 标签：javascript, html, canvas

我正在尝试使用画布制作轻量级进度条。该项目的目标是使进度条从给定变量填充到 N%。出于本演示的目的，我手动设置了 50% 的填充。

有两种颜色：加载时填充的红色和绿色表示已完成的进度。

如何为绿色填充的进程设置动画？

[http://jsfiddle.net/ZpRm7/](http://jsfiddle.net/ZpRm7/)

```
var canvas = document.getElementById('myProgress');
var myPerc = 500;
ctx = canvas.getContext('2d');

ctx.fillStyle = "rgb(255, 0, 0)";  //red

ctx.fillRect(0,0,myPerc,100);
ctx.save();
    for (var i=0;i<(myPerc*0.5);i++)
    { 
        ctx.fillStyle = "rgb(0, 255, 0)";  //green
            setTimeout(function() {
                    ctx.fillRect(0,0,+i,100);
            }, 1000);   

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:49:53.343

发布的代码有两个问题。首先，您将每个超时的持续时间设置为 1000。这意味着每个超时将在一秒钟内完成，所有这些都是在同一时间完成的。相反，我假设您希望它们相隔一秒钟。

`i`第二个是在循环中使用的一个非常常见的问题`setTimeout`。您可以在整个 SO 中找到答案。这似乎是更彻底的内容之一： [JavaScript 闭包内循环 – 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

解决了这两个问题后，您将得到以下信息：

```
var canvas = document.getElementById('myProgress');
var myPerc = 500;
ctx = canvas.getContext('2d');

ctx.fillStyle = "rgb(255, 0, 0)";  //red

ctx.fillRect(0,0,myPerc,100);
ctx.save();

for (var i=0;i<(myPerc*0.5);i++)
{ 
    ctx.fillStyle = "rgb(0, 255, 0)";  //greeen

    (function(i){
        setTimeout(function() {
            ctx.fillRect(0,0,+i,100);
        }, 1000*i);
    })(i);
} 
```

[http://jsfiddle.net/ZpRm7/1/](http://jsfiddle.net/ZpRm7/1/)

您可能会考虑`setInterval`或使用其他方法来避免一次创建如此多的超时。

# c - C中返回函数值的方法

> ID：14222721
> 
> 赞同：1
> 
> 时间：2013-01-08T19:37:19.820
> 
> 标签：c, function, return-value

在 C 中编写函数时，哪些因素决定了函数返回结果的方式？我的问题来自阅读以下代码，该代码在双向链表中创建了一个节点，并且来自[本书](https://rads.stackoverflow.com/amzn/click/com/0672318962)：

```
typedef struct DLLIST
{
    uint16 tag;                 /* This node's object type tag */
    struct DLLIST *next;
    struct DLLIST *previous;
    void *object;
    uint32 size;                /* This node's object size */
} DLLIST;

DLLIST *dlCreate(uint16 tag, void *object, uint32 size)
{
    DLLIST *newNode;

    newNode = malloc(sizeof(*newNode));

    if (newNode != NULL)
    {
        newNode->previous = NULL;
        newNode->next = NULL;
        newNode->tag = tag;
        newNode->size = size;
        newNode->object = malloc(size);

        if (newNode->object != NULL)
        {
            memcpy(newNode->object, object, size);
        }
        else
        {
            free(newNode);
            newNode = NULL;
        }
    }

    return newNode;
} 
```

事实上，作为初学者，我发现这个函数的许多方面令人困惑：

1.  为什么 DLLIST 指针以这种方式返回，而不是作为引用指针传递并修改？如果你这样做了，你可以释放返回值以用作报告函数成功/失败的状态字节。
2.  为什么不测试第二个参数以确保指针不为 NULL？将 NULL 指针传递给 memcpy 肯定是一件非常糟糕的事情吗？

此外，强制模块中的所有函数使用相同的调用约定是常见的做法吗？例如，从上面的函数中提取的双向链表模块中的所有函数都应该符合`status byte = function(argument list)`吗？此外，验证所有值可能不正确的函数参数是否普遍？例如，检查所有指针值以确保它们不为空？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:47:43.670

我不得不说，这都是相当主观的。

> 1）为什么DLLIST指针以这种方式返回，而不是作为引用指针传递并修改？如果你这样做了，你可以释放返回值以用作报告函数成功/失败的状态字节。

这在某种程度上是一个品味问题。我更喜欢将指针传递给函数，以便调用者管理内存，尽管返回动态分配的指针也是有效的。在某些情况下，它会更好更简单，具体取决于 API 架构。无论哪种方式，返回值都可用于成功/失败检查，因为返回`NULL`指针将指示失败。

> 2）为什么不测试第二个参数以确保指针不为NULL？肯定将 NULL 指针传递给 memcpy 是一件非常糟糕的事情吗？

这是很多 C 程序员（反正我知道的）的一种心态，这也反映了该语言是如何构建的。在大多数 C 库中，每个函数都有一个契约，不尊重它会调用未定义的行为。我很少费心检查`NULL`传递给函数的参数。当我这样做时，是因为`NULL`指针改变了函数的行为，而不是因为我确保调用者尊重合同。有些人可能会争辩说它在性能方面和/或大小方面更好，因为它在这里和那里节省了一些指令（尤其是在有限的硬件上确实如此，C 以 C 闻名），我这样做主要是为了不让我的代码与 null - 到处检查。只要有正确的文档记录，您都可以这样做。

> 此外，强制模块中的所有函数使用相同的调用约定是常见的做法吗？

我必须同意这一点。我不能代表别人说话，但我相信被普遍接受为良好做法。在同一 API 中的函数之间切换调用约定可能会使程序员感到困惑，并让他们浪费时间一遍又一遍地检查文档。

> 此外，验证所有值可能不正确的函数参数是否普遍？

这很常见，但相反的情况可能也很常见（请参阅上面的#2）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:01:07.077

> 为什么 DLLIST 指针以这种方式返回，而不是作为引用指针传递并修改？如果你这样做了，你可以释放返回值以用作报告函数成功/失败的状态字节。

通过从外部传入的参数返回结果是一种相当不优雅和繁琐的做法，只有在没有其他方法的情况下才应该使用它。它要求调用者定义一个接收者对象，这本身就已经很糟糕了。但除此之外，对附加声明的需要排除了在纯表达式中使用该函数。

大多数时候，如果你可以通过纯函数来实现你的功能，那么它应该通过纯函数来实现。即函数参数用于输入，函数返回值用于输出。这正是您在这种情况下看到的。

> 为什么不测试第二个参数以确保指针不为 NULL？将 NULL 指针传递给 memcpy 肯定是一件非常糟糕的事情吗？

好吧，没有争论，执行这样的测试总是一个好主意。但是，确切的测试方法可能会有所不同，具体取决于程序层次结构中函数的“级别”（从“低级别”到“高级”）。它应该是仅调试断言吗？它应该是一个永久断言（即受控中止，带有错误日志和“可能打电话给我”消息）吗？它应该是一个运行时测试，它意味着一些有意义的恢复策略吗？回答这个问题没有“一条真正的规则”。这是代码设计的问题。

是否有一个有意义的故障安全策略应该在测试失败的情况下执行？如果不是，那么在低级函数中进行运行时测试将毫无意义。它只会使代码杂乱无章，并浪费性能。如果这确实是一个“低级”功能，那么运行时测试在`if`这里并不合适。更合适的是仅调试断言`assert(object != NULL && size > 0)`

另请注意，使`object != NULL`测试特别适合的`dlCreate`细节是该`object`值被传递给库函数`memcpy`，已知在输入空指针的情况下会产生*未定义的行为*。如果`memcpy`使用某些专有`my_copy_data`功能而不是代码，那么断言有效性的适当位置`object`将是`my_copy_data`. `dlCreate`函数本身并不真正关心值的有效性`object`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T20:05:10.403

回答问题 1：返回值有三种常见约定，您可以选择最适合您的应用程序的一种：

1.  返回状态值（int）。通常负值表示错误，>=0 成功。例如，POSIX“open()”函数。如果您需要传递某个对象，则传递一个指向它的指针（对于“IN”参数，或指向它的指针的指针（对于“OUT”参数）
2.  对于“面向对象”函数，特别是对于分配某些东西的函数，返回一个指向对象的指针（如您给出的双向链表示例）。返回 NULL 表示失败。以 POSIX“fopen()”为例。
3.  绝对值函数。这些值并不表示成功或失败，而是某些计算的实际结果（想想“sin()”）。

您可以根据自己的口味混合搭配这些款式。许多图书馆都有混合。尽量不要让 API 的用户不得不扭曲才能使用它！

例如，使用上面的代码，如果您将 API 更改为

```
int dlCreate(uint16 tag, void *object, uint32 size, DLLIST **list) 
```

现在用户有两种方法可以确定文件是否已打开（查看退出状态，并查看填充的列表指针），并且必须做很多额外的工作来确定什么是正确的为错误。所以不要写

```
DLLIST *list;
if ((list = dlCreate(tag, object, sz) == NULL) {
  // handle out of memeory error
  ... 
```

用户不得不说

```
DLList *list = NULL // must initializein this case
if (dlCreate(tag, object, sz, &list) == ERROR || list == NULL)  {
  if (list != NULL) {
    free(list);
  }
  // and other error handling as above 
```

也就是说，为库使用一致的样式通常是一种好习惯。

回答问题 2：这是草率的编程，你是对的；一个好的程序员**永远不**应该相信调用者“做正确的事”。始终添加代码来验证参数。如果你在这里传递了一个错误的指针，你会崩溃！

# c# - 在 LINQ 数据库查询中使用接口

> ID：14222723
> 
> 赞同：1
> 
> 时间：2013-01-08T19:37:27.260
> 
> 标签：c#, asp.net-mvc, linq

我正在开发一个应用程序的一部分，该应用程序只是从数据库中提取信息并将其显示给用户。为简单起见，让我们假设我有一个包含两个表的数据库，`Cats`并且`Dogs`. 两个表都手动分配了主键，并且**从不**重复/重叠。我试图实现的目标是执行 1 个 LINQ 查询，`concat`这两个表都可以。

我最近问[了这个](https://stackoverflow.com/questions/14219880/concat-union-tables-in-linq)关于`LINQ concat`对两个对象集合执行 a 的问题，`Cats`并且`Dogs`，它们是在代码中手动创建的。我建议阅读上一个问题，因为它会给这个问题提供很多见解。

我希望使用接口的原因是为了简化我的查询。我目前有一个解决方案，`.Select`我需要将每个列转换为匿名类型。这在这种情况下可以正常工作，但会使用包含我正在使用的数据的页面。

上一个问题和这个问题之间的不同之处在于我试图从数据库中提取这些动物。根据我的分析，似乎`.NET`或`Entity Framework`无法将 my`database`与 my联系起来`interface`

**模型**（来自旧问题）

```
public interface iAnimal
{
    string name { get; set; }
    int age { get; set; }
}
public class Dog :iAnimal
{
    public string name { get; set; }
    public int age { get; set; }
}
public class Cat:iAnimal
{
    public string name { get; set; }
    public int age { get; set; }
} 
```

`LINQ`这是我尝试过的一些不同的查询以及由此产生的错误。第一个示例将使用上一个问题的解决方案。

```
var model = _db.Cats.Concat<iAnimal>(_db.Dogs).Take(4);

System.ArgumentException: DbUnionAllExpression requires arguments with compatible collection ResultTypes. 
```

没有协方差：

```
var model = _db.Cats.Cast<iAnimal>().Concat(_db.Dogs.Cast<iAnimal>());

System.NotSupportedException: Unable to cast the type 'Test.Models.Cat' to type 'Test.Interfaces.iAnimals'. LINQ to Entities only supports casting Entity Data Model primitive types. 
```

从上面的错误来看，我似乎无法使用接口与数据库进行交互，因为它没有映射到任何特定的表。

任何见解将不胜感激。谢谢

**编辑** 作为对@Reed Copsey 的回应，使用您的解决方案，我得到了与我的示例相同的错误`without covariance`。我尝试更改视图的类型以匹配错误推荐的内容，这导致了此错误

```
System.InvalidOperationException: The model item passed into the dictionary is of type 'System.Data.Entity.Infrastructure.DbQuery`1[Test.Interfaces.iAnimal]', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[Test.Models.Cat]'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:47:41.457

您的数据库对您的界面一无所知，您可能无法使其正常工作。我看到两个选项。

您可以使用继承（例如由实体框架支持）并从公共基础实体继承这两个实体。然后您将能够对基本类型执行查询，但这可能需要根据您在数据库级别实现继承的方式更改您的数据模型。

查看[TPT 继承](http://msdn.microsoft.com/en-us/data/jj618293)和[TPH 继承](http://msdn.microsoft.com/en-us/data/jj618292)的文档。还有其他继承模型，如 TPC 继承，但它们目前缺乏设计器支持。

第二种选择是将两个表中的结果提取到内存中，并使用 LINQ to Objects 将它们合并到一个集合中。

```
var dogs = database.Dogs.Take(4).ToList();
var cats = database.Cats.Take(4).ToList();

var pets = dogs.Cast<IPet>().Concat(cats).ToList(); 
```

另请注意，您的查询

```
var model = _db.Cats.Concat<iAnimal>(_db.Dogs).Take(4); 
```

似乎设计得不是很好——结果肯定取决于所使用的数据库，但如果你通常只得到前四只猫而从未见过任何狗，我不会感到惊讶。

# android - Android 延迟图片出现在自定义文件夹中

> ID：14222730
> 
> 赞同：0
> 
> 时间：2013-01-08T19:37:45.593
> 
> 标签：android, image, save, directory, delay

在我的应用程序中，我使用内置相机拍照，然后将其存储在我自己的自定义文件夹中。无论出于何种原因，我的图像需要很长时间才能显示在我的自定义文件夹中，我不知道如何加快这个过程。我已经进行了大量的研究，但似乎大多数问题更多的是图像从不显示，当我的显示时，只是在很长的延迟之后。有什么想法吗？下面是我创建、命名和保存拍摄图像的代码。谢谢！

```
i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

                 String root = Environment.getExternalStorageDirectory().toString();
                    File myDir = new File(root + "/MyCustomFolder/");    
                        myDir.mkdirs();
                        if (myDir.exists()) {

                        }
                        Random generator = new Random(); 
                        int n = 10000;
                        n = generator.nextInt(n);
                        String fname = "CustomImage-"+ n +".jpg";

                        File file = new File (myDir, fname);
                        Uri uriSavedImage = Uri.fromFile(file); 
                        i.putExtra("output", uriSavedImage);

                            File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                                    Environment.DIRECTORY_PICTURES), "/MyCustomFolder/");
                                sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, 
                                    Uri.parse("file://"+ mediaStorageDir)));

                startActivityForResult(i, cameraData); 
            }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:05:36.723

解决了！只需删除

```
File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                                Environment.DIRECTORY_PICTURES), "/MyCustomFolder/"); 
```

我是金色的！

# gwt - 未找到子文件夹中的 Gwt 静态资源

> ID：14222732
> 
> 赞同：0
> 
> 时间：2013-01-08T19:37:51.673
> 
> 标签：gwt

我的`GWT`html 中的 javascript 路径有问题。

我明白了：`WARNING: No file found for: /smartajax/libs/historyjs/history.html4.js`还有更多这样的

文件存在于我的`war/html1`目录中。

只有当上述脚本不是从我的 Html1.html 调用，而是从其他公开的脚本调用时才会发生这种情况（它没有在 html 中声明`<script type="text/javascript" ...>`

```
 - public_res
  - smartajax
     - libs
         - historyjs

 - war
  - html1
     - smartajax
         - libs
             - historyjs 
```

`<script type="text/javascript" src="html1/smartajax/load.smartajax.js"></script>`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:54:06.547

您的 gwt 公共资源文件夹被编译到您的模块文件夹中，而不是 war 基本目录。它将被编译成 war/module_name/html1/smartajax/... 那么，不使用相对 uris，而使用绝对 uris 呢？

GWT.getHostPageBaseURL() -> html 页面的基本 url，[http://xy/](http://x.y/)

GWT.getModuleBaseURL() -> gwt 模块的基本 url，[http://xy/module_name/](http://x.y/module_name/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:46:09.660

理想情况下，您应该将所有第三方脚本放在同一个相关文件夹中。

```
1) All in public/thirdparty
2) All in war/thirdparty 
```

# javascript - 使用 Tweenjs 动画颜色

> ID：14222733
> 
> 赞同：2
> 
> 时间：2013-01-08T19:37:55.373
> 
> 标签：javascript, html, canvas, tween, easeljs

我最近切换到 EaselJs 并想为圆圈的颜色设置动画。

到目前为止我得到的代码是这样的：

```
var shape = new createjs.Shape();
shape.graphics.beginFill(createjs.Graphics.getRGB(255, 0, 0));
shape.graphics.drawCircle(0, 0, 10);
stage.addChild(shape);

var tween = createjs.Tween.get(shape, { loop: true }).
    to({color:"#00FF00" }, 1000); 
```

但这不起作用。动画的正确属性是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-21T20:03:16.970

我只是想做同样的事情。我的解决方案是对形状对象的自定义属性进行补间，然后在补间“更改”事件上调用更新方法。希望这会有所帮助，我真的是 createjs 的新手，但到目前为止我真的很喜欢它！

```
var s = new createjs.Shape();
s.redOffset      = 157;
s.blueOffset     = 217;
s.greenOffset    = 229;

s.updateColor = function()
{
    var color = createjs.Graphics.getRGB( 
        parseInt(this.redOffset), 
        parseInt(this.greenOffset), 
        parseInt(this.blueOffset), 
        1);

    this.graphics.beginFill( color ).drawRect(0, 0, 300, 300);
}

createjs.Tween.get(this.background).to({ 
    redOffset   : 255,
    greenOffset : 255,
    blueOffset  : 255
},  3000).addEventListener('change', function()
{
    s.updateColor ();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T02:15:24.053

我认为不可能像这样为形状的颜色设置动画，毕竟你的形状的绘制可能包括许多不同的颜色，Tween 应该如何知道要修改哪些颜色？我能想到的有两种方法：

**方法 1）**使用 a `createjs.ColorFilter`，将其应用于您的形状，然后补间您的过滤器的属性：

```
var shape = new createjs.Shape();
//making the shape shape white, so we can work with the multiplyers of the filter
shape.graphics.beginFill(createjs.Graphics.getRGB(255, 255, 255));
shape.graphics.drawCircle(0, 0, 10);
stage.addChild(shape);
var filter = new createjs.ColorFilter(1,0,0,1); //green&blue = 0, only red and alpha stay
shape.filters = [filter];

var tween = createjs.Tween.get(filter, { loop: true }).
    to({redMultiplier:0, greenMultiplier:1 }, 1000); 
```

我没有对此进行测试，所以......让我知道它有效。另请注意，过滤器仅在您的形状上调用 cache() 或 updateCache() 时应用/更新，因此您必须将其添加到您的刻度函数中。

**方法2）**或者你只是每帧重绘形状......但是**1）**可能更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-08T05:35:22.273

非过滤器版本。

```
var colorObj = { r:255, g:0, b:0 };
var shape = new createjs.Shape();
var command = shape.graphics.beginFill(createjs.Graphics.getRGB(colorObj.r, colorObj.g, colorObj.b)).command;
shape.graphics.drawCircle(60, 60, 10);
stage.addChild(shape);

var tween = createjs.Tween.get(colorObj, { loop: true }).to({ r:255, g:255, b:255 }, 1000);
tween.addEventListener( "change", function( event ) {
    command.style = createjs.Graphics.getRGB(Math.floor(colorObj.r), Math.floor(colorObj.g), Math.floor(colorObj.b));
}); 
```

beginFill(...).command 对象能够更新。

小提琴

[https://jsfiddle.net/MasatoMakino/uzLu19xw/](https://jsfiddle.net/MasatoMakino/uzLu19xw/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-11T17:58:30.563

我刚刚在这里阅读了另一个动画颜色选项：http: [//community.createjs.com/discussions/easeljs/4637-graphics-colour-animation](http://community.createjs.com/discussions/easeljs/4637-graphics-colour-animation)

它利用了 createjs 注入方法。我从提供的代码示例中复制了相关代码，并附上了一些我自己的解释。

根据文档：

> 注入（回调，数据）：提供一种将任意 Context2D（又名 Canvas）API 调用注入图形队列的方法。指定的回调函数将与其他绘图指令依次调用（...）

例如，使用此方法，您可以更改本机 context2d 填充样式，以便我们可以更改easeljs 用于在画布上绘制的填充颜色。

在这里，我们告诉 createjs 我们自己的 setColor 函数（定义如下），因此该函数将在每次重绘之前自动执行：

```
var shape = new createjs.Shape();
shape.graphics.beginFill(createjs.Graphics.getRGB(255, 0, 0));
shape.graphics.inject(setColor, data)
shape.graphics.drawCircle(0, 0, 10);
stage.addChild(shape); 
```

调用画布原生 fillStyle 方法的 setColor 函数的定义：

```
function setColor(o) {
    // sets the context2D's fillStyle to the current value of data.fill:
    this.fillStyle = o.fill; // "this" will resolve to the canvas's Context2D.
} 
```

以及改变填充值的刻度函数：

```
function tick(evt) {
    count = (count+3)%360;
    // update the value of the data object:
    data.fill = createjs.Graphics.getHSL(count, 100, 50);
    // redraw the stage:
    stage.update();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-21T10:06:29.220

修改填充指令可以改变颜色。这可能有助于制作动画。我不知道这会产生什么影响，但这对我来说非常有效。尝试这个，

```
 var circle = new createjs.Shape();
        circle.graphics.f('#ffffff').s('#000000').ss(0.7).arc((30 * j),50,10, 0, Math.PI * 2, 1);
        circle.number = j;
        circle.addEventListener('click', function(e) {
            var fillStyle = e.target.graphics._fillInstructions[0].params;
            var currentFillStyle=fillStyle[1]+"";
            for (var i = 0; i < circles.length; i++) {
                var resetFillStyle = circles[i].graphics._fillInstructions[0].params;
                resetFillStyle[1] = "#ffffff";
            }

            if (currentFillStyle == "#00B4EA") {
                fillStyle[1] = "#FFFFFF";
            } else {
                fillStyle[1] = "#00B4EA";
            }
            stage.update();

        }) 
```

希望这可以帮助！

# regex - 在记事本中插入行

> ID：14222734
> 
> 赞同：0
> 
> 时间：2013-01-08T19:38:00.583
> 
> 标签：regex, notepad++

我在 Notepad++ 的文本文件中有近 9,000 行

我如何找到所有说的行

```
source:         DATA 
```

并在该行下方插入这两行？

```
delete:
password:       ACTUALPASSWORD 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:40:47.320

将您的**搜索模式**更改 为**扩展**，并替换

```
source:         DATA 
```

和

```
source:         DATA\ndelete:\npassword:       ACTUALPASSWORD 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:48:37.393

`Ctrl-H`然后使用搜索`source: DATA`替换为`source: DATA\r\ndelete:\r\npassword: ACTUALPASSWORD\r\n`

这样您就可以保留新的行格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:40:36.050

您搜索
来源：DATA
并将其替换为
来源：DATA
删除：
密码：ACTUALPASSWORD

# .htaccess - 复杂 301 从州缩写重定向到州全名

> ID：14222739
> 
> 赞同：0
> 
> 时间：2013-01-08T19:38:19.820
> 
> 标签：.htaccess, redirect

我有以下网址结构 www.sample.com/state-abbriviation(2 letters)/category/page.htm

我需要将其重定向到以下 URL www.sample.com/state-name/page/id。

我的问题是，如何用完整的州名（newmexico，texas）动态替换州缩写（nm，tx），但根据上述结构保留其余部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:12:47.507

这与 htaccess 有点复杂。htaccess 如何知道页面和 id？

更好地将所有内容重定向到 index.php 并让 php 处理它......这也有点复杂：p

# c# - 即使输入无效，ASP.net RegularExpressionValidator 也允许回发

> ID：14222741
> 
> 赞同：3
> 
> 时间：2013-01-08T19:38:29.240
> 
> 标签：c#, asp.net, regex, validation

我正在尝试制作一个用于上传图片的表单。我放置了一个`RegularExpressionValidator`来检查所选文件的扩展名。它`ValidationExpression`是：

`(?i:^.+(.jpg|.ttf|.png|.gif)$)`

但是当我选择一个 .exe 文件时。该页面进行回发，然后向我显示错误。并且 .exe 文件存储在不应该存储的位置。

这是我的控件的 HTML 代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/filippo_admin_page/admin_master.Master" AutoEventWireup="true" CodeBehind="a_gallery.aspx.cs" Inherits="photography.filippo_admin_page.a_gallery" %>
    <asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
        <link rel="Stylesheet" type="text/css" href="css/a_gallery.css" />
    </asp:Content>
    <asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
        <div id="whole_wrapper">
            <fieldset>
                <legend>Insert new image:</legend>
                <div id="controls_wrapper">        
                    <ul>
                        <li>
                            <asp:Label AssociatedControlID="title_txt" runat="server" ID="title_lbl">Title:</asp:Label>
                            <asp:TextBox ID="title_txt" runat="server" placeholder="Image title"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                                ControlToValidate="title_txt" ErrorMessage="RequiredFieldValidator" 
                                ForeColor="Red" ValidationGroup="gallery_validation">Required!</asp:RequiredFieldValidator>
                        </li>
                        <li>
                            <asp:Label AssociatedControlID="desc_txt" runat="server" ID="desc_lbl">Description:</asp:Label>
                            <asp:TextBox ID="desc_txt" runat="server" placeholder="Image description" TextMode="MultiLine"></asp:TextBox>
                        </li>
                        <li>
                            <asp:Label AssociatedControlID="cat_txt" runat="server" ID="cat_lbl">Category:</asp:Label>
                            <asp:TextBox ID="cat_txt" runat="server" placeholder="Image category"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
                                ControlToValidate="cat_txt" ErrorMessage="RequiredFieldValidator" 
                                ForeColor="Red" ValidationGroup="gallery_validation">Required!</asp:RequiredFieldValidator>
                        </li>
                        <li>
                            <asp:Label ID="upload_lbl" runat="server">Select Image:</asp:Label>
                            <asp:FileUpload ID="upload_pnl" runat="server" />
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" 
                                ControlToValidate="upload_pnl" ErrorMessage="RequiredFieldValidator" 
                                ForeColor="Red" ValidationGroup="gallery_validation">Required!</asp:RequiredFieldValidator>
                            <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" 
                                ControlToValidate="upload_pnl" ErrorMessage="RegularExpressionValidator" 
                                ForeColor="Red" ValidationExpression="(?i:^.+(.jpg|.ttf|.png|.gif)$)" 
                                ValidationGroup="gallery_validation">File must be an image.</asp:RegularExpressionValidator>
                        </li>

                        <li>
                            <asp:Button ID="clear" runat="server" Text="Clear" UseSubmitBehavior="False" />
                            <asp:Button ID="submit" runat="server" Text="Upload"  onclick="submit_Click" 
                                ValidationGroup="gallery_validation"/>                        
                        </li>
                    </ul>
                </div>
                <asp:Label ID="msg_lbl" Visible="false" runat="server"></asp:Label>
            </fieldset>

        </div>    
    </asp:Content> 
```

这是验证器的一部分：

```
<li>
    <asp:Label ID="upload_lbl" runat="server">Select Image:</asp:Label>
    <asp:FileUpload ID="upload_pnl" runat="server" />
    <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" 
        ControlToValidate="upload_pnl" ErrorMessage="RequiredFieldValidator" 
        ForeColor="Red" ValidationGroup="gallery_validation">Required!</asp:RequiredFieldValidator>
    <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" 
        ControlToValidate="upload_pnl" ErrorMessage="RegularExpressionValidator" 
        ForeColor="Red" ValidationExpression="(?i:^.+(.jpg|.ttf|.png|.gif)$)" 
        ValidationGroup="gallery_validation">File must be an image.</asp:RegularExpressionValidator>
</li> 
```

我有`ValidationGroup`equals`gallery_validation`并且设置在我想要验证的所有控件上，包括`submit`它自己的按钮。

如果您想要文件的整个 HTML 代码，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:05:24.720

您的正则表达式无效，无法在客户端正确处理。当我使用相同的正则表达式时，我的 IE9 显示错误。如果我将其切换为标准正则表达式，一切正常。因此，有必要更改正则表达式。我很快就会在这里发布。

这里有问题的部分是 - ?i：它是 .NET Framework 的一部分。因此，它在客户端不起作用。更多详情，请参阅

[使正则表达式验证器不区分大小写？](http://forums.asp.net/t/1236947.aspx)

此链接还包含问题的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:45:31.930

您必须使用**EnableClientScript="true"启用客户端脚本**

```
<asp:RegularExpressionValidator EnableClientScript="true"
ID="RegularExpressionValidator1" runat="server" 
    ControlToValidate="upload_pnl" ErrorMessage="RegularExpressionValidator" 
    ForeColor="Red" ValidationExpression="(?i:^.+(.jpg|.ttf|.png|.gif)$)" 
    ValidationGroup="gallery_validation">File must be an image.</asp:RegularExpressionValidator> 
```

另外，请注意

*客户端上的正则表达式验证实现与服务器上的略有不同。在客户端上，使用 JScript 正则表达式语法。在服务器上，使用 System.Text.RegularExpressions.Regex 语法。由于 JScript 正则表达式语法是 System.Text.RegularExpressions.Regex 语法的子集，因此建议使用 JScript 正则表达式语法以便在客户端和服务器上产生相同的结果。*

您的正则表达式在 Javascript 中无效。你必须改变它。

# jquery - 切换具有相同类名的元素仅对那些单击的元素可见/不可见

> ID：14222743
> 
> 赞同：0
> 
> 时间：2013-01-08T19:38:32.133
> 
> 标签：jquery

```
<ul>
  <li>
    <div class="single-toggle">|Toggle|</div>
    <div class="visible-when-folded">
      <div class="name">Peter</div>
      <div class="date">3 january 1984</div>
    </div>
    <div class="invisible-when-folded">
      <div class="about">Funny guy</div>
      <div class="contact_info">0879876745</div>
    </div>
  </li>

  <li>
    <div class="single-toggle">|Toggle|</div>
    <div class="visible-when-folded">
      <div class="name">David</div>
      <div class="date">17 April 1988</div>
    </div>
    <div class="invisible-when-folded">
      <div class="about">Jackass</div>
      <div class="contact_info">0979876345</div>
    </div>    
  </li>
</ul> 
```

**期望的结果**

当我点击`|Toggle|`元素时，只有里面的元素`div.invisible-when-folded`会在相应的元素中消失`li`。

**我试过的**

`|Toggle|`在[此代码](http://jsbin.com/urodit/178/edit)中单击会同时切换两个`li`元素的 div 不可见/可见。我如何让它只`li`切换我点击的切换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:41:54.523

选择具有该类的单击元素的所有（以下）兄弟姐妹：

```
$(this).nextAll('.invisible-when-folded').toggle(); 
```

[**演示**](http://jsbin.com/urodit/181/edit)

看看 jQuery 的[遍历方法。](http://api.jquery.com/category/traversing/tree-traversal/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T19:42:03.587

怎么样：

```
$(".single-toggle").click(function(){ 
  $(this).closest('li').find('.invisible-when-folded').toggle(); 
}); 
```

# c - 如何从双精度转换为有符号短信号？

> ID：14222744
> 
> 赞同：2
> 
> 时间：2013-01-08T19:38:37.280
> 
> 标签：c

将变量从 转换为 的最简单方法是`double`什么`signed short`？

我是 DSP 的初学者。在其他 C 语言环境中，我以下列方式完成了这项任务：

```
double myDouble = - 3.14;

myDouble = floor(myDouble);
signed short = (signed short) myDouble; 
```

令人惊讶的是，这不适用于 VisualDSP++ 中的负数，但它仍然可以编译。

我正在使用 ADSP-BF548 EZ-KIT LITE (blackfin) 和编程环境 VisualDSP++ 5.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:43:59.717

如果你想四舍五入到零，这就足够了

```
double myDouble = - 3.14;
short s = myDouble; 
```

如果要向负无穷大舍入，则只需添加`floor`

```
double myDouble = - 3.14;
short s = floor(myDouble); 
```

在任何一种情况下，都不需要显式转换 from `double`to `short`，但保留它以防止编译器发出警告可能是个好主意。

当然，您有责任确保原始值在`short`.

如果这在应该的时候以某种方式“不起作用”（无论这意味着什么），那么您使用的编译器必须被破坏。

# excel - 使用宏格式化工作表上的数据

> ID：14222746
> 
> 赞同：1
> 
> 时间：2013-01-08T19:38:58.850
> 
> 标签：excel, vba

我经营一家小型零售店，我的任务是为我们的商品创建库存标签。我将物品清单从库存管理软件 (AMan Pro) 导出到 Excel 中，其中包含物品的描述、数量、状况、SKU# 和平台（视频游戏平台）。我目前有两个宏。一个会将 SKU 修剪为可用的格式（去掉前导字母），另一个将多个数量的项目分开到单独的行中。（即数量为 5 的项目 #1 将被复制到数量为 1 的 5 行）这东西有效，但我认为我正在做一些可以用宏处理的不必要的步骤。

我的 AMan 程序会生成一个包含这些项目的 Excel 工作簿。然后，我将这些项目复制到第一页上的“启用宏”工作簿中，然后运行我的宏。表二具有正确格式的标签数据。例如; 它具有将描述字段修剪为仅使用前 60 个字符的公式。（有些描述很长）

我觉得第二张纸真的没有必要。我想将这些项目复制到工作表 1 中并运行一个宏，该宏在工作表 1***上***为我完成所有这些格式化。

1.  将具有多个数量的项目分隔到单独的行中（我确实有一个工作宏。）
2.  从 SKU（工作宏）中删除前导字母，然后将 SKU 放入七位数字格式（#######）
3.  将描述减少到仅前 60 个字符。
4.  将条件减少到仅前 2 个字符。
5.  将平台减少到仅前 15 个字符。

这是我当前的宏代码和我的电子表格的链接。提前谢谢各位。 [SKU_LABEL_FINAL.xlsm](http://dl.dropbox.com/u/51462555/SKU_LABELS_FINAL.xlsm)

```
Sub ExpandRows()
Dim dat As Variant
Dim i As Long
Dim rw As Range
Dim rng As Range

Set rng = Sheets(1).UsedRange
dat = rng

' Loop thru your data, starting at the last row
For i = UBound(dat, 1) To 2 Step -1
    ' If Quantity > 1
    If dat(i, 2) > 1 Then
        ' Insert rows to make space
        Set rw = rng.Rows(i).EntireRow
        rw.Offset(1, 0).Resize(dat(i, 2) - 1).Insert
        ' copy row data down
        rw.Copy rw.Offset(1, 0).Resize(dat(i, 2) - 1)
        ' set Quantity to 1
        rw.Cells(1, 2).Resize(dat(i, 2), 1) = 1
    End If
Next
Columns("D:D").Select
Selection.Replace What:="AManPro-", Replacement:="", LookAt:=xlPart, _
    SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
    ReplaceFormat:=False 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:05:17.227

将您的 SKU 格式化为 7 位数字格式非常简单。您只需要在该行之前插入这行`End Sub`代码

`Selection.NumberFormat = "0000000"`

解析数据时，您可以修剪每个单元格的长度。

首先，我会使用一些`Const`语句来说明哪些列是什么，以及它们需要多长。您可以只使用代码中的数字，但是如果它们发生变化，这样可以更容易地在将来更新它们。在最后的下方添加`Dim`

```
Const DESCRIPTIONLENGTH = 60
Const DESCRIPTIONCOLUMN = 2 
```

然后，当您遍历每一行时，您将更新单元格的值 - 在下方添加`For i =...`

```
'Format each column's data
    dat(i, DESCRIPTIONCOLUMN).Value = Left(dat(i, DESCRIPTIONCOLUMN), DESCRIPTIONLENGTH) 
```

I'm hoping the code for the description column will help you to build what you need for the other columns as well.

# java - 自定义 java.util.logging.ConsoleHandler.formatter Tomcat 6

> ID：14222748
> 
> 赞同：2
> 
> 时间：2013-01-08T19:39:07.973
> 
> 标签：java, tomcat, logging

我想在我的 Tomcat 6.0.36 上更改处理程序**1catalina.org.apache.juli.FileHandler的格式化程序。**

我已经完成了这些步骤：

1.  在 Eclise 中创建了一个新的 Java 项目
2.  创建了一个扩展 Formatter 的新类
3.  将项目导出为 jar
4.  将 jar 复制到 CATALINA_BASE/lib
5.  编辑文件 CATALINA_BASE/conf/logging.properties 添加这一行： 1catalina.org.apache.juli.FileHandler.formatter = com.mycompany.myformatter

但它实际上不起作用，我的意思是它总是使用 SimpleFormatter。

我使用新下载的 apache-tomcat 包。

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:21:20.337

实际上，格式化程序所在的库应该包含在 Tomcat 类路径中。这不仅意味着“在 CATALINA_BASE/lib 中复制 jar”，还意味着：将其添加到 CLASSPATH 变量中。

例子：

```
$ cat bin/setenv.sh
[...]
CLASSPATH="$CATALINA_BASE"/lib/myformatter.jar
export CLASSPATH 
```

# android - 未处理的异常类型 MalformedURLException

> ID：14222750
> 
> 赞同：0
> 
> 时间：2013-01-08T19:39:12.420
> 
> 标签：android, sockets, io, system

尝试 Socket.io 时出现 MalformedURLException

我的代码连接到 SocketIO 服务器，这是它的标准代码。

这是我的代码：

```
import java.net.MalformedURLException;
import org.json.*;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import io.socket.*;

@SuppressWarnings("unused")
public class HostActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_host);
        SocketIO socket = new SocketIO("http://MYSOCKETSERVER/");
        socket.connect(new IOCallback() {
            @Override
            public void onMessage(JSONObject json, IOAcknowledge ack) {
                try {
                    System.out.println("Server said:" + json.toString(2));
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }

            @Override
            public void onMessage(String data, IOAcknowledge ack) {
                System.out.println("Server said: " + data);
            }

            @Override
            public void onError(SocketIOException socketIOException) {
                System.out.println("an Error occured");
                socketIOException.printStackTrace();
            }

            @Override
            public void onDisconnect() {
                System.out.println("Connection terminated.");
            }

            @Override
            public void onConnect() {
                System.out.println("Connection established");
            }

            @Override
            public void on(String event, IOAcknowledge ack, Object... args) {
                System.out.println("Server triggered event '" + event + "'");
            }
        });

        // This line is cached until the connection is establisched.
        socket.send("Hello Server!");

} 
```

它显示在这一行：

```
SocketIO socket = new SocketIO("http://MYSOCKETSERVER/"); 
```

我认为这个 url 看起来很有效，但是为什么它会给出这个错误以及如何解决它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:37:25.937

通过使用它来修复它：

```
 try {
    SocketIO socket = new SocketIO("http://SOCKETIOSERVER/");
    } catch (MalformedURLException e1) {
        e1.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-23T05:51:25.343

**MalformedURLException**有两种情况：

> 1.  如果您在 URL 中犯了一些错误 - 例如忘记斜杠或 (http/https) 协议的拼写错误。
> 2.  如果 URL 不可解析。

在这种情况下，SocketIO 将 URL 字符串作为输入。由于 Java 会为潜在的错误抛出异常，因此如果出现这种情况，您需要进行处理。这就是编译器抛出此异常的原因。

在您的情况下，您已经对值进行了硬编码 - 但编译器对此不确定，或者您的代码可能正在运行前面提到的那些场景。

因此，抛出此异常将进行修复 -`Christiaan`如前所述。

# box-api - 我可以使用 Box API 创建安全的仅在线上传 Web 表单吗？

> ID：14222755
> 
> 赞同：3
> 
> 时间：2013-01-08T19:39:46.497
> 
> 标签：box-api

是否可以使用 Box.com API 允许我网站的用户通过在线表单上传文件，而无法编辑或查看我当前在线的其他文件？例如，在具有“仅上传”访问权限的脚本中硬编码用户凭据。

这可能吗？如果是这样，我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T19:31:03.250

Box 有一个[上传小部件](https://support.box.com/entries/20359393-Upload-Widget)，您可以轻松地将其嵌入到您的站点中以接受文件。

如果您希望以编程方式执行此操作，则可以使用[SDK](http://developers.box.com/sdks/)或[上传方法](http://developers.box.com/docs/#files-upload-a-file)从表单上传文件。对于身份验证，您可以要求使用其 Box 帐户对用户进行身份验证，也可以使用属于您的系统级用户。

# ajax - java.lang.StringIndexOutOfBoundsException：字符串索引超出范围：primefaces ajax调用中的-1

> ID：14222759
> 
> 赞同：1
> 
> 时间：2013-01-08T19:40:07.030
> 
> 标签：ajax, jsf, primefaces

在 selectOneRadio 按钮更改的 ajax 调用期间，我遇到了异常。

我正在使用 primefaces 3.3.1 和 JSF 2.0

例外：

```
java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    at java.lang.String.substring(String.java:1937)
    at com.sun.faces.renderkit.ServerSideStateHelper.getState(ServerSideStateHelper.java:263)
    at com.sun.faces.renderkit.ResponseStateManagerImpl.getState(ResponseStateManagerImpl.java:97)
    at com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:217)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:177)
    at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:119)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:438)
    at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:144)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:182)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:107)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3715)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:176) 
```

我的代码如下：

```
 <h:panelGrid columns="3" style="align:center">
                <h:outputText value="#{msg.accountCategory}" />
                <p:spacer width="10px" />
                <p:selectOneRadio id="singleJointAccountRadioId"
                    layout="horizontal"
                    value="#{captureAccountDetailBackingBean.accountCategory}">
                    <f:selectItems
                        value="#{captureAccountDetailBackingBean.accountcategoryList}">
                    </f:selectItems>
                    <p:ajax process="@this" update="secondAccountId" />
                </p:selectOneRadio>
            </h:panelGrid>

                <h:panelGroup id="secondAccountId">
                    <h:panelGrid id="secondAccountHolderId" columns="2"
                        styleClass="float-left"
                        rendered="#{captureAccountDetailBackingBean.accountCategory eq 'Joint'}">
                        <p:graphicImage
                            value="/com/cas/pages/common/images/person_icon.jpg" />
                        <h:outputText value="#{msg.secondAccountHolder}" />

                        <h:panelGrid columns="2">
                            <h:outputText value="#{msg.nameofPerson}"
                                style="font-size:15px;" />
                            <span style="color: red;">*</span>
                        </h:panelGrid>
                        <p:inputText
                            value="#{captureAccountDetailBackingBean.accountHolder2.personName}"
                            styleClass="inputText-style" size="25" required="true" />

                        <h:panelGrid columns="2">
                            <p:selectOneRadio id="fatherHusbandRadioButtonId2"
                                layout="horizontal"
                                value="#{captureAccountDetailBackingBean.accountHolder2.personHusbandOrFatherID}">
                                <f:selectItems
                                    value="#{captureAccountDetailBackingBean.holderRelationList}"></f:selectItems>
                            </p:selectOneRadio>
                            <span style="color: red;">*</span>
                        </h:panelGrid>
                        <p:inputText
                            value="#{captureAccountDetailBackingBean.accountHolder2.relativeName}"
                            styleClass="inputText-style" size="25" required="true" />

                        <h:panelGrid columns="2">
                            <h:outputText value="#{msg.address}" />
                            <span style="color: red;">*</span>
                        </h:panelGrid>
                        <p:inputTextarea
                            value="#{captureAccountDetailBackingBean.accountHolder2.personAddress}"
                            rows="3" autoResize="false" styleClass="inputText-style"
                            size="25" required="true" />

                        <h:panelGrid columns="2">
                            <h:outputText value="#{msg.dateOfBirth}" />
                            <span style="color: red;">*</span>
                        </h:panelGrid>
                        <p:calendar
                            value="#{captureAccountDetailBackingBean.accountHolder2.personDOB}"
                            navigator="true" showOn="button" size="6"
                            styleClass="inputText-style" required="true" />

                        <h:panelGrid columns="2">
                            <h:outputText value="#{msg.age}" />
                            <span style="color: red;">*</span>
                        </h:panelGrid>
                        <p:inputText
                            value="#{captureAccountDetailBackingBean.accountHolder2.personAge}"
                            size="2" styleClass="inputText-style" required="true" />

                        <h:panelGrid columns="2">
                            <h:outputText value="#{msg.pancardNumber}" />
                            <span style="color: red;">*</span>
                        </h:panelGrid>
                        <p:inputText
                            value="#{captureAccountDetailBackingBean.accountHolder2.personPanNo}"
                            size="15" styleClass="inputText-style" required="true" />

                        <h:panelGrid columns="2">
                            <h:outputText value="#{msg.mobileNumber}" />
                            <span style="color: red;">*</span>
                        </h:panelGrid>
                        <p:inputText
                            value="#{captureAccountDetailBackingBean.accountHolder2.personMobileNo}"
                            size="15" styleClass="inputText-style" required="true" />

                    </h:panelGrid>
                </h:panelGroup> 
```

# javascript - 多维数组被排序为字符串而不是值

> ID：14222760
> 
> 赞同：1
> 
> 时间：2013-01-08T19:40:10.620
> 
> 标签：javascript, sorting, multidimensional-array

我正在尝试按第一列的降序对以下二维数组进行排序：

```
wordsAndCount = [[0,"string"],[4,"string"],[31,"string"],[1,"string"],[3,"string"]];
wordsAndCount.sort();
wordsAndCount.reverse(); 
```

出于某种原因，JavaScript 将第一列视为字符串而不是整数，返回以下输出：

```
[4,"string"],[31,"string"],[3,"string"],[1,"string"],[0,"string"] 
```

当期望的输出应该是：

```
[31,"string"],[4,"string"],[3,"string"],[1,"string"],[0,"string"] 
```

是什么导致 JS 这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T19:42:58.443

JavaScript 将整个元素视为字符串，而不仅仅是第一个元素。

[`sort()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)，没有指定任何排序函数，将调用`toString()`它查看的每个元素。在我知道的所有 JavaScript 引擎中调用`toString()`像你这样的元素，将给出如下值`"[0,\"string\"]"`

您应该指定自己的排序器功能来解决此问题：

```
wordsAndCount.sort(function (a, b) {
    return b[0] - a[0];
}); 
```

那时也没有必要使用`reverse()`。

有关详细信息，请参阅[有关`sort()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:43:12.557

您希望 JavaScript 如何对数组进行排序？从[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)：

> **句法**
> 
> array.sort([比较函数])
> 
> **参数**
> 
> *compareFunction*指定定义排序顺序的函数。如果省略，则数组根据每个元素的字符串转换按字典顺序（按字典顺序）排序。

您需要*告诉*JS 如何对该数组进行排序，否则按照承诺它将按字典顺序对其进行排序（这几乎肯定不是您想要的）

# google-visualization - 谷歌图表工具提示

> ID：14222761
> 
> 赞同：3
> 
> 时间：2013-01-08T19:40:14.667
> 
> 标签：google-visualization

我正在使用谷歌电子表格来输入我的柱形图。为了使单列具有不同的颜色，我使用了一种 hack，方法是将图表中每一列的电子表格中相对列的值设置为 0。这给了我图表中每一列所需的颜色差异。我现在遇到的问题是工具提示不适用于每一列，并且想知道如何实现以在我的代码中正常工作。

```
google.load('visualization', '1', {packages: ['corechart']});
</script>
<script type="text/javascript">
var visualization;

function drawVisualization() {
    var query = new google.visualization.Query(
        'http://spreadsheets.google.com/tq?key=0AjlSK7_zXoNHdDhrU2xiaHVIQmR1WldYZm1yMTNkM3c&pub=1');

    // Apply query language statement.

    // Send the query with a callback function.
    query.send(handleQueryResponse);
  }

  function handleQueryResponse(response) {
    if (response.isError()) {
      alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
      return;
    }

    var data = response.getDataTable();
     // set the 3rd column to the "tooltip" role
    data.setColumnProperty(3, 'role', 'tooltip');
    visualization = new google.visualization.ColumnChart(document.getElementById('visualization'));
    visualization.draw(data, {legend: 'none', colors:['blue','red'],is3D:'True', isStacked:'true'});
  }

google.setOnLoadCallback(drawVisualization); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T02:54:03.703

选项 A：

调整基础数据，使您有 4 列而不是 3 列，第 2 列（在第一组数据之后）中的值与当前第 3 列（使用工具提示）中的值相同。使用新列 2 和 4 上的 setColumnProperty() 作为工具提示。

选项 B：

使用 insertColumn() 将 Javascript 中的工具提示第 3 列复制到第 2 列（在第一个数据集之后），这应该与选项 A 具有相同的效果。您必须循环复制值，或者添加相同的数据通过 javascript。

# c# - 更新面板 + window.open + https

> ID：14222763
> 
> 赞同：0
> 
> 时间：2013-01-08T19:40:26.383
> 
> 标签：c#, javascript, asp.net

我正在使用 c# 和 asp.net 进行开发。

我有一些带有更新面板的页面。在此更新面板中，有一个重定向到新窗口的按钮。这是通过在后面的代码中使用脚本管理器调用 window.open 来完成的。在我不使用 https 之前一切正常。如果我使用带路由器的隧道连接到路由器，然后使用代理访问我的网页，则从更新面板中的按钮调用的 window.open 会打开一个新的注册卡，但我得到了错误：找不到页面。在网址中我可以看到路由器没有将代理+IP放在路径之前。如果我删除更新面板，则不会发生这种情况。使用 Firebug，我可以看到使用更新面板我得到了一个 POST，并且在 resonse 中，contentType 是 text/plain。如果没有更新面板，则有一个 GET 并且响应 contentType 是 text/html。

在我不在代理上使用 https 之前，这可以正常工作：

```
protected void btnPrint_Click(object sender, EventArgs e)
{
     url = "~/Gui/Report/ReportViewer.aspx?ReportName=CustomerReport";
     Page page = (Page)HttpContext.Current.Handler;

     if (page == null) {
         Redirect(url);
     }

     url = page.ResolveUrl(url);

     string script = @"window.open(""{0}"");";

     script = String.Format(script, url);
     ScriptManager.RegisterStartupScript(page,
         typeof(Page),
         "Redirect",
         script,
         true);
}

<asp:UpdatePanel ID="UpdatePanel" runat="server">
    <ContentTemplate>
         <dx:ASPxButton runat="server" ID="btnPrint"
               Text="print" OnClick="btnPrint_Click">
         </dx:ASPxButton>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:10:11.470

知道了....

如果我使用代理，脚本语言是 javascript 的信息会丢失（奇怪......？！？！）。如果我通过添加属性“language='javascript'”自行构建脚本标签，那么一切正常。谁能告诉我为什么这些信息会丢失？

这里是新代码：

```
protected void btnPrint_Click(object sender, EventArgs e)
{
 url = "~/Gui/Report/ReportViewer.aspx?ReportName=CustomerReport";
 Page page = (Page)HttpContext.Current.Handler;

 url = page.ResolveUrl(url);

 string script = "window.open('" + url + "');";

 System.Text.StringBuilder sb = new System.Text.StringBuilder();
 sb.Append("<script language='javascript'>");
 sb.Append(script);
 sb.Append("</script>");

 ScriptManager.RegisterStartupScript(page,
     typeof(Page),
     "Redirect",
     script,
     false);
} 
```

# html - 浏览器重新调整大小导致滚动条疯狂增长

> ID：14222772
> 
> 赞同：0
> 
> 时间：2013-01-08T19:41:01.247
> 
> 标签：html, css

在浏览完我发现的所有代码（附加代码）后，当有人更改浏览器大小 x 或 y 轴时，我的浏览器滚动条会像疯了一样变长。关于为什么这会是原因的任何想法？

HTML

```
 <div id="boxes">
      <div id="dialog2" class="window"><class="close"/></div><div id="mask">
     </div>
  </div>

  <div id='nav'> 
  <a href="#dialog2" name="modal">CLIENTS</a>
   </div> 
```

CSS

```
#mask {
        position:absolute;
        z-index:1000;
        display:block;
      }
#boxes #dialog2 {
        background:url(images/clients_dark1.png)
        no-repeat 0 0 transparent;
        width:1036px;
        height:520px;
        padding:50px 0 20px 25px;
      } 
```

# java - 如何在给定的复合键范围之间获取 Cassandra 中的所有行？

> ID：14222788
> 
> 赞同：0
> 
> 时间：2013-01-08T19:41:51.777
> 
> 标签：java, cassandra, hector, java-client

我的数据存储格式是：

```
RowKey: a:b:c
=> ( counter=d:e:f:g, value=1) 
```

```
在哪里，
 a：时间戳（格式：YYYYMMDDHH，HH 从 00 - 23 变化）
 b：编码的网址
 c: id（从 0 - 9 变化）

 d：字符串类型
 e：浮动值
 f：浮动值
 g：整数类型

```

我不想获取所有此类行（及其包含的列），其中 url = 来自整个列族的给定值，其中 c 为 00 - 23。

如何在 Java 中实现这一点（最好使用 Hector 客户端）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:34:47.187

这在 Cassandra 中是不可能的。CompositeKeys 非常简单，基本上只是将单独的部分变成一个键。因此，数据按其键的顺序存储（和排序）在 cassandra 中，这就是检索数据的方式。

您将只能对整个复合键 (a:b:c) 进行范围/切片查询，并且首先按 a 排序，然后按 b 排序，然后按 c 排序。如果您希望能够对 c 进行范围查询，那么您将需要使用复合键以 c:a:b 形式存储您的数据 - 在这种情况下，您将无法对 a 和 b 进行范围查询独自的。

您在这里有两个选择：

1）使用关系数据库（这里可能不是一个好的解决方案） 2）复制数据。因此，您的数据有两行 - 一个是 CompositeKey 是 a:b:c，另一个是 CompositeKey 是 c:a:b（如果您需要进行范围/切片查询排序，第三个是 b:c:a仅在 b 上）。这些行中的所有两（/三）行的数据本身都是相同的，您可以根据所需的查询搜索相应的行。不幸的是，这是 Cassandra 的缺点之一，但却是完成大数据模型所必需的。

# javascript - javascript indexOf无法按预期使用数组

> ID：14222791
> 
> 赞同：23
> 
> 时间：2013-01-08T19:42:01.043
> 
> 标签：javascript, arrays, indexof

`myarray.indexOf(element)`即使元素出现在 myarray 中，我也会得到 -1 。

以下是一些代码片段：

```
function createChangeRecord( old_array, new_array ) {
    var nds = new_array.slice(0,new_array.length);
    var el, idx;
    if (...) {
        ...
    } else if ( old_array.length==new_array.length ) {
        for ( var i=0; i<old_array.length; i++ ) {
            el = old_array[i];
            idx = nds.indexOf(el);
            if ( idx!=(-1) ) {
                ...
            } else {
                var a = "el: " + el + "; nds: " + nds + "; nds.indexOf(el): " + nds.indexOf(el);
                alert( a );
                ...
            }
        }
        ...
    }
    ...
} 
```

警报显示 nds 确实包含 el，但警报仅应在 idx==-1 时触发，仅当 nds 不包含 el 时才应为真。

我知道我没有提供足够的信息来确定我的案例中的具体问题，但也许有人可以告诉我一些可能导致这种行为的一般原因？

对类似问题的回答建议使用 jQuery inArray() 而不是 indexOf，但我想知道为什么 indexOf 不起作用。其他人建议 indexOf 用于字符串，而不是数组，但我可以找到的在线文档不是这样。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-10-20T21:28:25.087

利用

```
nds.indexOf(parseInt(el,10)) 
```

where`nds`是一个数组并且`el`是一个数字（或应该是一个数字）

**编辑：**

来自[msdn](https://msdn.microsoft.com/en-us/library/6974wx4d%28v=vs.94%29.aspx "JavaScript 基础 - msdn.microsoft.com")：

> JavaScript 是一种松散类型的语言，这意味着您无需显式声明变量的数据类型。在许多情况下，JavaScript 在需要时会自动执行转换。例如，如果您向包含文本（字符串）的项目添加数字，则该数字将转换为文本。

我猜这种转换是`indexOf`返回的原因，`-1`因为您的数组之一包含数字和其他包含的字符串。

例如：

```
old_array = ["10", "20", "30"];
new_array = [10, 20, 30]; 
```

以下是我尝试回答您的问题：

### 为什么 indexOf() 不起作用？

它确实有效，我想它也适用于你的情况。`-1`当`el`字符串，例如`"100"`，在数字数组中找不到时返回，例如，`nds=[100,200]`这是真的。因为`"100"`字符串与`100`数字不同。

### indexOf() 是否适用于字符串、数组等？

是的，`indexOf()`适用于数组（数字、字符串或任何对象）以及字符串。但是你必须确保检查相同的类型。

### parseInt() 是做什么的？

为了避免数字与字符串的意外比较，我们可以使用`parseInt()`，例如`parseInt("123", 10)`返回数字`123`。

第二个参数`10`称为**radix**。表示要使用的数字系统的数字（从 2 到 36）。

### 概括：

```
> "javascript is awesome".indexOf('v')
2
> [10, 20, 30].indexOf("20")
-1
> [10, 20, 30].indexOf(20)
1
> [10, 20, 30].indexOf( parseInt("20", 10) ) 
1
> typeof (100)
number
> typeof ("100")
string
> typeof( parseInt( "100", 10))
number
> parseInt( "100", 10)
100
> parseInt("100", 2)
4
> parseInt(11.3, 10)
11
> parseInt(11.3, 2)
3
> [10.3, 11.3, 12.3, 11].indexOf( parseInt(11.3, 10) )
3 
```

### 要查看以上所有内容：

检查下面的代码片段，但要注意`alert();`以及`console.log();`何时运行它。

```
function createChangeRecord( old_array, new_array ) {

    var nds = new_array.slice( 0, new_array.length ); // this seems to be redundant
    var el, idx, msg;

    if ( old_array.length == new_array.length ) {
        for ( var i=0; i<old_array.length; i++ ) {

            el = old_array[i];
            idx = nds.indexOf(el);

            if ( idx != -1 ) {
                msg = "Found: el: " + el + "; nds: " + nds + "; nds.indexOf(el): " + idx + "\n typeof el: " + (typeof el) + "; typepf nds[" + i + "]: " + (typeof nds[i]);
            } else {
                msg = "Not Found: el: " + el + "; nds: " + nds + "; nds.indexOf(el): " + idx + "\n typeof el: " + (typeof el) + "; typepf nds[" + i + "]: " + (typeof nds[i]);
            }

            console.log( msg );
            alert( msg );
        }
    }
    else {
        var err = 'Array lengths are not same';
        console.log( err );
        alert( err );
    }
}

// this will work
var old_array_g = [ 10, 20 ];
var new_array_g = [ 10, 20 ];
createChangeRecord( old_array_g, new_array_g );

// this will not work
var old_array_g = [ "10", "20" ];
var new_array_g = [ 10, 20 ];
createChangeRecord( old_array_g, new_array_g );

// Yes: indesOf works with strings too

var withStrings = "'javascript is awesome'.indexOf('v'): " + "javascript is awesome".indexOf('v');
console.log( withStrings );
alert( withStrings );

// parseInt() returns a number or say integer
var usingParse = "typeof(123): " + typeof( 123 ) + "; typeof( parseInt('123', 10) ): " + typeof ( parseInt('123', 10) ) + "; typeof ('123'): " + typeof('123');
console.log( usingParse );
alert( usingParse );

// parseInt() with base 2
var parseBase2 = "parseInt( '100', 2 ): " + parseInt('100', 2) + "; parseInt( '100' , 10): " + parseInt('100', 10);
console.log( parseBase2 );
alert( parseBase2 );
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T19:57:08.173

`indexOf`确实有效，并且按照您所说的去做。

例如（从控制台演示）：

```
> a = [1,2,3,4,5,6,7,8];
  [1, 2, 3, 4, 5, 6, 7, 8]
> b = a.slice(0,a.length);
  [1, 2, 3, 4, 5, 6, 7, 8]
> b.indexOf(a[4])
  4 
```

如果您收到此错误，可能意味着您混淆了源和目标（点之前的数组是正在搜索的数组），或者您有另一个微妙的编程错误（就像您没有比较您认为的数组你在比较）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T20:12:28.840

在数组上使用 indexOf( *value* ) 时，它会返回数组中*值的***索引**。

 *```
> var testArray = ["a","b","c"];
> testArray.indexOf(1)
-1
> testArray.indexOf("b")
1
> testArray.indexOf("c")
2
> testArray = [10,12,3];
> testArray.indexOf(12)
1 
```

你应该用 typeof( *el* )检查你从**el得到的东西**

 ** * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-14T07:13:49.620

以最上面的例子：

你在哪里`idx=nds.indexOf(el)`

将其替换为`idx=nds.indexOf(''+el+'')`

它在我正在做的事情中为我解决了一个类似的问题，但我偶然发现它正在四处寻找解决方案。

**我无法回答它是否在所有情况下都稳定。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-24T07:14:03.010

如果您的搜索数组包含数字，并且您想搜索类似`2`或`"2"`

```
nds = [1, 2, 3, 4, 5]; 
```

这有效（加加）

```
nds.indexOf(+el) 
```**

# sql - SQL 并排查询。匹配路线

> ID：14222795
> 
> 赞同：1
> 
> 时间：2013-01-08T19:42:03.793
> 
> 标签：sql, excel, db2

我正在尝试编写一个或两个查询，可用于并排显示同一个表的两个单独视图。我有 orig、dest 和其他东西的记录。对于每个 orig 都有一个记录，其中包含每个 dest 以及与之相关的内容。所以说一个起源是亚特兰大，一个是凤凰城。将有两条记录同时包含亚特兰大和凤凰城在原点或终点：

```
ORIG    / DEST    / STUFF
Atlanta / Phoenix / Stuff for this record
Phoneix / Atlanta / Stuff for this record 
```

我需要的是并排列出亚特兰大的每个 dest，而每个 dest 都与亚特兰大在另一侧。我需要为每条记录执行此操作。所以结果会是这样的：

```
Atlanta / Athens / Stuff  :  Athens / Atlanta / Stuff
Atlanta / Chicago / Stuff  :  Chicago / Atlanta / Stuff
Boulder / Athens / Stuff  :  Athens / Boulder / Stuff 
```

它需要以 excel 结尾，所以我可以做两个单独的查询，但我不知道如何匹配它们。这是据我所知：

```
SELECT a.orig, a.dest, a.stuff from table a WHERE a.orig = 'ATL' and a.orig IN (SELECT b.dest from table b WHERE b.dest = 'ATL') 
```

编辑：记录 ATL / DEN 和 DEN / ATL 之间的东西是不同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:47:43.920

以下回答了您对中间 ATL 的每个组合的问题：

```
select aleft.orig, aleft.dest, aleft.stuff, a.orig, a.dest, a.stuff
from table a join
     table aleft
     on a.orig = aleft.dest
where a.orig = 'ATL' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:52:10.480

试试这个：

```
SELECT a.orig, a.dest, a.stuff, b.orig, b.dest, b.stuff 
FROM table a 
, table b
WHERE a.orig = b.dest
AND b.orig = a.dest
ORDER BY a.orig, b.orig 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T19:56:51.280

```
Select a.orig, a.dest, a.stuff, b.orig, b.dest, b.stuff 
from a inner join a as b on
a.orig = b.dest and b.orig = a.dest
where a.orig = 'ATL' 
Order by a.orig, a.dest 
```

既然看起来你想让 dest Phoenix 与 orig Phoenix 等对齐，大概这些东西是不同的和有意义的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T19:57:08.990

如果您需要 ATL 作为 dest 或 origin 的每个组合，只需执行 SELECT a.orig, a.dest, a.stuff, b.orig, b.dest, b.stuff FROM table a as a CROSS JOIN table b as b WHERE a .orig = 'ATL' 或 b.dest = 'ATL'

您的示例具有 a.orig 约束，因此如果您的意思是问题中所述的 dest ，也请更改该约束。

# android - 保护Android中的html文件

> ID：14222798
> 
> 赞同：0
> 
> 时间：2013-01-08T19:42:10.717
> 
> 标签：android, html

我看到了一个很棒的 ios 教程：[保护 iPhone 和 iPad 应用程序中的资源](http://aptogo.co.uk/2010/07/protecting-resources/)

> 添加要加密的新资源应该是快速和容易的。
> 
> 在构建阶段，加密过程应该是完全自动的。
> 
> 加密的 PDF 或 HTML 文件必须在嵌入式 UIWebView 中可用
> 
> 解密必须在内存中，并且不能创建临时未受保护的文件

我们怎样才能像这样保护android中的html

# jquery - jQuery：无法读取 xml 元素值

> ID：14222801
> 
> 赞同：0
> 
> 时间：2013-01-08T19:42:31.977
> 
> 标签：jquery, xml, xml-parsing

这是我的js代码：

```
$(document).ready( function(){
        $.ajax({
        type: "GET",
        url: "vector.xml",
        dataType: "xml",
        success: function(xml) {
                            $(xml).find('Vector').each(function() {
                            //var attrVal = $(this).find('VectorType').attr('tc');
                            var intialVal = $('this').find('InitialValue').text();
                            var attrVal = $(this).find('VectorMode').attr('tc');
                            alert(intialVal);

                        }); 
                }
            });
    }); 
```

XML 看起来像这样：

```
<Values>
        <Result>
          <ResultBasis>
            <Vector>
              <VectorType tc="71"></VectorType>
              <VectorBaseDate>2012-06-16</VectorBaseDate>
              <InitialValue>150000</InitialValue>
            </Vector>
            <Vector tc="T20V09">
              <VectorType tc="71"></VectorType>
              <VectorBaseDate>2012-06-16</VectorBaseDate>
              <InitialValue>150000</InitialValue>
            </Vector>
            <Vector>
              <VectorType tc="5"></VectorType>
              <VectorBaseDate>2012-06-16</VectorBaseDate>
              <VectorMode tc="4"></VectorMode>
              <InitialValue>102.47</InitialValue>
            </Vector>
            <Vector>
              <VectorType tc="5"></VectorType>
              <VectorBaseDate>2012-06-16</VectorBaseDate>
              <VectorMode tc="3"></VectorMode>
              <InitialValue>307.42</InitialValue>
            </Vector> 
```

在这里，我可以对 and 元素的值进行属性化`VectorType`，但对and元素的值`VectorMode`没有运气。`InitialValue``VectorBaseDate`

```
alert(var intialVal = $('this').find('InitialValue').val()); 
```

给我`undefined`和

```
alert(var intialVal = $('this').find('InitialValue').text()); 
```

给我空的警报声明。

```
Note: <script src="jquery-1.8.1.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:47:21.307

我不确定 jQuery 版本，但我知道在 Javascript 中您正在寻找的是 nodeValue。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:08:05.983

尝试使用`this`而不是`'this'`

```
var intialVal = $(this).find('InitialValue').text(); 
```

# javascript - 使用 jquery 或 javascript 显示上次可见的部分

> ID：14222803
> 
> 赞同：0
> 
> 时间：2013-01-08T19:42:52.513
> 
> 标签：javascript, jquery

尝试在这里创建一些下一个和上一个功能。使用隐藏和显示浏览不同的 HTML5 部分，对于我的后退按钮，是否有可能找到最后可见的 div 并显示它？

这是我的相关 html

```
 <div id="next"><img src="img/next.png" alt="" onclick="nextPage()"></div>

    <section id="splash">
        <br><br><br>
        <center>
        <img src="img/home.jpg" alt="">
        </center>
    </section>

    <section id="home">
        <br><br><br><br><br>
        <center>
        <ul id="nav">
            <li><img src="img/feat_btn.png" alt="" onclick="nextPage('feat-home')"></li>
            <li><img src="img/models_btn.png" alt="" onclick="nextPage('model-lineup')"></li>
            <li><img src="img/quiz_btn.png" alt="" onclick="nextPage('quiz')"></li>
        </ul>
        </center>
    </section>

    <section id="feat-home">feat home</section>
    <section id="feat-e-menu">e menu</section>
    <section id="feat-g-menu">g menu</section>
    <section id="feat-i-menu">i menu</section>
    <section id="model-lineup">lineup</section>
    <section id="model-YWFE540H0A">model</section>
    <section id="quiz">quiz</section> 
```

相关js

```
function nextPage(link) {
    var vis = $("section:visible");
    var next = vis.next();

    if (link) {
        var link = "#" + link;
        vis.hide();
        $(link).show();
    } else {
        vis.hide();
        next.show();
    }
  } 
```

因此，下一个按钮将带您完成应用程序的流程，但您也可以按按钮到达您想去的地方，这就是为什么我不能只让后退按钮显示上一个部分并隐藏当前一。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:03:09.190

单击时，您需要将当前显示的内容存储在单独的变量中，并将其用于之前的按钮单击。

单击上一个按钮时，显示“以前显示的”变量中的内容。

当新页面加载时，您将需要禁用上一个按钮。

这确实看起来很像那里的一些内容滑块插件。

# ios - 从 Storyboard 中的模态视图推送视图控制器

> ID：14222810
> 
> 赞同：3
> 
> 时间：2013-01-08T19:43:14.433
> 
> 标签：ios, uistoryboard, segue

我正在使用情节提要并有一个模态显示的屏幕，然后我需要从中推送其他视图控制器，以便我可以为模态视图选择项目（类似于在 iPhone 日历应用程序上添加条目）。所以我从：

导航控制器 > VC > 模态视图控制器 > ??? 这里我想推一个VC，这样我就可以选择一个项目返回模态视图。

我如何才能做到这一点，因为我目前收到一个错误“只有在源控制器由 UINavigationController 的实例管理时才能使用推送 segues。”

啊，好的，所以我现在像你说的那样设置它，我现在在尝试使用以下方法在视图控制器上设置属性时出现错误（我之前使用的是推送控制器）：

```
SetTransactionDateViewController *stdvc = (SetTransactionDateViewController *)[segue destinationViewController]; 
// Get the day to pass to the select date controller
stdvc.transactionDate = [Utilities convertStringToDate:cellDate.detailTextLabel.text:FORMAT_DD_MMM_YYYY]; 
```

“[UINavigationController setTransactionDate:]: 无法识别的选择器发送到实例”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T19:48:11.000

当您分配以模态方式呈现的视图时，您需要确保该视图嵌入到`UINavigationViewController`. 导航控制器是必需的，以便您执行您所描述的转场。

你的故事板应该是这样的： ![在此处输入图像描述](../Images/59099a4b5a267f665d373e6ea2a64ac6.png)

# c++ - 构建堆原则——用 C++ 实现

> ID：14222811
> 
> 赞同：-7
> 
> 时间：2013-01-08T19:43:17.343
> 
> 标签：c++, algorithm, data-structures, binary-heap

我的家庭作业有些麻烦。我被要求使用 C++ 中的堆来实现优先级队列。

在搜索创建堆的代码示例时，我在这个定义中遇到了很多次：

> 表示堆的数组**A是具有两个属性的数组：**
> 
> – **length**，数组中的元素个数
> 
> – **heap-size**，存储在数组中的堆元素的数量

所以我的问题是：什么是**A**？我是否需要自己实现它（假设创建一个包含 3 个字段的类堆 - 元素数组、长度和堆大小）？

我只是不知道如何开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:47:44.503

二叉堆数据结构通常被绘制为具有某些属性的二叉树，但通常使用普通数组来实现。这样做的原因是数组版本比显式二叉树使用更少的内存并且更容易操作。因此，您看到的数组**A是保存堆中所有值的数组。**

您看到的两个字段表示该数组的原始总大小（**长度**），它跟踪可用存储空间的数量，以及您实际使用的该数组中的元素数量（**堆大小**）。当您将一个元素插入堆中时，您需要确保它存在空间，可能将数组重新分配为更大并复制现有元素，然后需要运行冒泡操作来插入新元素入堆。

但是，通常情况下，您会通过将堆分层放在动态数组（如 C++`std::vector`或 Java ）之上来回避维护数组和这两个字段的逻辑`ArrayList`。这样，跟踪存储空间和增长阵列的逻辑就会自动为您处理。

根据分配参数，由于这是在 C++ 中完成的，因此您可能需要查看标题中的`std::make_heap`、`std::push_heap`和`std::pop_heap`算法。`<algorithm>`它们使得在现有容器（如`std::vector`. 事实上，这就是`std::priority_queue`类的典型实现方式。

如果您需要自己实现堆操作，您可能需要查看**[此作业讲义中给出的二进制堆的描述](http://www.stanford.edu/class/archive/cs/cs106b/cs106b.1126/handouts/190%20Assignment%205.pdf#page=5)**，这似乎与您获得的作业非常匹配。

希望这可以帮助！

# ruby - 如何迁移到最新的 ruby 补丁版本

> ID：14222815
> 
> 赞同：1
> 
> 时间：2013-01-08T19:43:30.480
> 
> 标签：ruby, rvm

如何迁移到最新的 ruby​​ 补丁版本（比如从 1.9.3p286 到 1.9.3p362 或更高版本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:04:18.330

1.9.3-p362 是最新的，但有一些记录在案的错误。在发布新版本之前，建议使用 1.9.3-p327。

此时，请执行以下操作：

*   `rvm get latest`
*   `rvm install 1.9.3`或者`rvm reinstall 1.9.3`

如果您不指定版本号，RVM 将安装最新版本。

根据文档，`rvm reinstall`相当于：

```
rvm remove  [ruby-string]
rvm install [ruby-string] 
```

# c# - c# 将 SQL 转换为 lambda 表达式以获取 IQueryable

> ID：14222816
> 
> 赞同：0
> 
> 时间：2013-01-08T19:43:35.317
> 
> 标签：c#, lambda, iqueryable

如果有人能帮我把它翻译成 lambda 表达式或类似的东西，我会很高兴。

首先介绍：是两个表/对象：

```
OFFICE 
{officeID,
 NAME,
 another data}

WORKER
{ID,
 officeID,
 NAME} 
```

有 n 个办公室和 m 个工人。（我们不知道确切的数字，也不需要它们）

我知道`WORKER NAME`，我必须找到`OFFICES`至少一名有这样名字的工人。

所以，SQL 会是这样的：

```
SELECT * FROM OFFICE WHERE officeID = (SELECT officeID FROM WORKER where NAME='myName'); 
```

（也许是另一个，我不确定）

只是，有人可以帮助我使用lambda 表达式和 IQueryable的 types: `OFFICES`, , 来获得相同的结果吗？`WORKER`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:00:41.753

你在使用导航属性吗？如果是这样，那么您可以利用这些并执行以下两个查询之一：

```
context.Office.Where(o => o.Workers.Any(w => w.Name == "myName")); 
```

或者

```
context.Workers.Where(w => w.Name == "myName").Select(w => w.Office).Distinct(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:47:33.090

您的 SQL 查询应该使用 JOIN。

因此，您的 lambda 表达式将如下所示：

```
var result = (from o in context.Offices
              join w in context.Workers
              on o.officeID equals w.officeID
              where w.Name.Equals("myName")
              select o).AsQueryable<Office>(); 
```

# javascript - 如何使用jquery以以下格式获取当前日期

> ID：14222817
> 
> 赞同：0
> 
> 时间：2013-01-08T19:43:36.493
> 
> 标签：javascript, jquery

如何使用 jQuery 以下面的格式显示日期。

```
Thursday, January 08, 2013 
```

我看到了一些插件，但想知道是否有不使用任何插件的方法。

请告知是否有使用 JavaScript 的简单答案，那也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:03:13.840

最简单的答案是使用：

```
date.toLocaleDateString() 
```

但是，它将使用用户系统定义的语言环境。适合您所需输出的美国/英语语言环境。（我不确定其他语言环境以及它们如何格式化日期）。

因此，如果您希望日期字符串**始终**采用该格式，这对您来说不是最佳答案。但是，如果您希望日期与用户的语言环境匹配，这个答案是最简单和最正确的。:)

[http://jsfiddle.net/SyjpS/](http://jsfiddle.net/SyjpS/)

```
var date = new Date(); 
console.log(date.toLocaleDateString());  // Tuesday, January 08, 2013 (on my machine) 
```

**编辑**— 如果您要询问如何更改日历以便今天是星期四而不是星期二，您可能需要与 Caesar 讨论调整日历调整的问题。为此，您需要一台时间机器。我建议你去找医生，但他可能不愿意随意改变历史。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T20:00:31.717

这是您所要求的快速/简单示例：

**编辑**- 我更新了代码以供重用并包括第 0 天的填充更改。

```
var d = new Date();
console.log(formatDate(d)); 

function formatDate(d){
    var months = ["Januaray", "February", "March"]; //you would need to include the rest
    var days = ["Sunday", "Monday", "Tuesday"];//you would need to include the rest
    return days[d.getDay()] + ", " + months[d.getMonth()] + " " + (d.getDate() < 10 ? "0" + d.getDate() : d.getDate()) + ", " + d.getFullYear();
} 
```

今天的输出：`Tuesday, Januaray 08, 2013`

[**例子**](http://jsbin.com/atuves/7/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T19:46:55.970

只需使用[**DateJS**](http://www.datejs.com/)而不是重新发明轮子。

您可以在此处阅读 API 文档：

*   [http://code.google.com/p/datejs/wiki/APIDocumentation](http://code.google.com/p/datejs/wiki/APIDocumentation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-22T13:29:33.327

date 方法允许您检索日期和时间的所有不同部分作为数值。在一年中的月份和星期几的情况下，提供的数字比您通常预期的少一。原因是这些值最常见的用途是使用它从数组中查找月份或日期的名称，因为 JavaScript 中的数组从零开始编号，提供这样的数字可以减少代码量需要进行名称查找。

不过，我们可以比仅使用检索到的值进行此查找更好。我们可以做的是向 Date 对象添加额外的方法，以允许我们在需要与检索有关日期的任何其他信息完全相同的方式时检索月份和日期名称。

以下方法未内置到 JavaScript 语言本身的可能原因是它们依赖于语言，并且需要根据您要显示月份和日期的语言将不同的值替换到代码中。出于以下目的向您展示如何编写代码，我将使用 Emglish 名称来表示月份和日期。如果您想以不同的语言显示日期，您需要用该语言的名称替换它们的英文对应名称。

我们要做的是在所有日期中添加 getMonthName() 和 getDayName() 方法，这样我们就可以通过直接调用这些新方法来获取月份名称或日期名称，而不必调用 getMonth() 或 getDay()然后进行相应名称的数组查找。我们实际上正在做的是在新方法中构建所需的数组查找，以便我们可以通过调用适当的方法自动获取任何日期对象的正确名称。

我们不需要这么多的代码来做到这一点。要将 getMonthName() 和 getDayName() 方法添加到您使用的所有日期对象，您需要做的就是将以下一小段代码添加到附加到页面头部的 JavaScript 代码的最顶部。然后对日期对象的任何后续处理都可以使用这些方法。

```
Date.prototype.getMonthName = function() {
var m = ['January','February','March','April','May','June','July',
'August','September','October','November','December'];
return m[this.getMonth()];
} 
Date.prototype.getDayName = function() {
var d = ['Sunday','Monday','Tuesday','Wednesday',
'Thursday','Friday','Saturday'];
return d[this.getDay()];
} 
```

因此，现在有了这些，我们可以使用除了现有方法之外的新方法在页面上显示今天的日期。例如，我们可以使用以下内容获取完整日期并使用警报显示它：

```
var today = new Date;
alert((today.getDayName() + ', ' + today.getDate() + ' ' + today.getMonthName() + ', ' + today.getFullYear()); 
```

或者，我们可以只检索当前月份的六月和星期天星期天并使用它们，但是我们希望与日期的任何其他部分相同。

```
function disp() {
var today = new Date;
document.getElementById('mth').innerHTML = today.getMonthName();
document.getElementById('dow').innerHTML = today.getDayName();
} 
```

# android - 存储可通过 ADB shell 访问的字符串的最佳方式

> ID：14222820
> 
> 赞同：1
> 
> 时间：2013-01-08T19:43:50.953
> 
> 标签：android, database, sqlite

我正在尝试以某种方式存储电话状态，以便**在应用程序运行**时通过 ADB shell 环境查看它。我是 Android 开发的初学者，所以放轻松！

我的想法/发生了什么：

*   因此数据将非常简单（只是字符串）
*   我正在考虑使用 SQLite 3 数据库，因为 ADB 允许您通过 shell 操作和查看它。

一些问题：

*   我可以在应用程序运行时访问数据吗？基本上，我希望应用程序在状态更改时存储字符串，并使用其他人编写的包装工具实时执行查询（并使用该查询的结果执行其他独立于 Android 的事情）。

提前致谢！

# android - 创建具有 RadioButton/RadioGroup 行为的 TextViews（反之亦然）

> ID：14222825
> 
> 赞同：3
> 
> 时间：2013-01-08T19:44:10.953
> 
> 标签：android, xml, radio-button

我想要一个可点击的 TextView，它可以改变颜色并保持它，它将以前更改的文本更改回默认颜色。当然，我希望在“检查”每个 TextView 时更改某些状态。基本上是一个像 RadioButton 或 RadioButton 减去按钮的 TextView。

起初我试图从 TextView 的角度来。但似乎使用 RadioButtons 并添加文本行为更容易，因为 RadioButtons 无论如何都扩展了 TextView。

所以我将此颜色资源应用于每个 RadioButton：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_focused="true" android:state_pressed="false" android:color="#0000ff" />
<item android:state_focused="true" android:state_pressed="true" android:color="#0000ff" />
<item android:state_focused="false" android:state_pressed="true" android:color="#0000ff" />
<item android:state_checked="true" android:color="#0000ff" />
<item android:color="#ff00ff00" />
</selector> 
```

这让我得到了我想要的文本行为。现在我只需要一种方法来隐藏 RadioButton 本身。理想情况下，这将是 XML，因此我可以将样式应用于各种 RadioButton，但我不会对 RadioButton 扩展嗤之以鼻。

那么，有人知道如何隐藏 RadioButton 按钮本身吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T19:51:22.740

你应该使用`CheckedTextView`. 它支持`checked`状态。

**或者**

您可以使用`RadioButton`并将其按钮设置为`null`：

```
<RadioButton
    android:id="@+id/button"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/selector"
    android:button="@null"
    android:paddingLeft="0dip"/> 
```

# image - 使用openGL，土壤的图像

> ID：14222828
> 
> 赞同：0
> 
> 时间：2013-01-08T19:44:26.267
> 
> 标签：image, opengl, png, textures, glut

> **可能重复：**
> [使用 openGL、SOIL 加载图像](https://stackoverflow.com/questions/14222312/image-loading-using-opengl-soil)

在运行下面的源代码时，它只显示一个没有图像的 wite quad。我试图打开一个名为：foto 的图像。我将图像文件放在程序的文件夹中。

```
bool* keyStates = new bool[256];
GLuint texture[0];

void resize(int height, int width) {
    const float ar = (float) width / (float) height;
    glViewport(0, 10, width, height);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    glFrustum(-ar, ar, -1.0, 1.0, 2.0, 90.0);
    //gluLookAt(0, 2, 0, -1, 1, -3, 0, 1, 0);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity() ;
}
void keyOperations (void) {
    if (!keyStates['a']) {}
}
static void Draw(void)
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();
    glTranslatef(0.0f,0.0f,-5.0f);
    texture[0] = SOIL_load_OGL_texture // load an image file directly as a new OpenGL texture
    (
        "foto.png",
        SOIL_LOAD_AUTO,
        SOIL_CREATE_NEW_ID,
        SOIL_FLAG_MIPMAPS | SOIL_FLAG_INVERT_Y | SOIL_FLAG_NTSC_SAFE_RGB | SOIL_FLAG_COMPRESS_TO_DXT
    );
// allocate a texture name

    glBindTexture(GL_TEXTURE_2D, texture[0]);
    glBegin(GL_QUADS);
    glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);
    glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);
    glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f,  1.0f);
    glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f,  1.0f);
    glEnd();
    glutSwapBuffers();
}
void keyPressed (unsigned char key, int x, int y) {
    keyStates[key] = false;
}
void keyUp (unsigned char key, int x, int y) {
    keyStates[key] = true;
}
int main(int argc, char **argv)
{
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB);
    glutInit(&argc, argv);
    glutInitWindowSize(600, 600);
    glutCreateWindow("ugh fml");
    glutReshapeFunc(resize);
    glutDisplayFunc(Draw);
    glutKeyboardFunc(keyPressed);
    glutKeyboardUpFunc(keyUp);
    /////////////////////////////////////
    glEnable(GL_TEXTURE_2D);
    glShadeModel(GL_SMOOTH);
    glClearColor(0.0f, 0.0f, 0.0f, 0.5f);
    glClearDepth(1.0f);
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LEQUAL);
    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);
    glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:41:21.903

如果图像文件（foto.png）不在程序的工作目录中，我会得到相同的行为。但是当我将图像添加到程序的工作目录时，四边形的纹理正确。尝试 1) 将纹理图像添加到程序的工作目录或 2) 将程序的工作目录更改为纹理文件所在的目录。

# java - 发现 NDEF/活动启动后如何显示 NDEF 消息？

> ID：14222831
> 
> 赞同：0
> 
> 时间：2013-01-08T19:44:32.917
> 
> 标签：java, android, nfc, mifare

已经阅读了许多与我类似的问题 - 如果我错过了解决问题的方法，我只能道歉，但我真的无法解决这个问题！

我设法让我的 nfc 活动正常工作 - 点击标签启动我的应用程序的正确活动 - 但未显示 ndef 消息，我不知道为什么......

该标签是一个 Mifare Ultralight，带有编码的纯文本消息。（模仿类型：纯/文本）

这是我的代码，谢谢大家的帮助，这个论坛应该有一个“捐赠啤酒”按钮！

```
package com.example.prototype02;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.PendingIntent;
import android.content.Intent;
import android.content.IntentFilter;
import android.nfc.NdefMessage;
import android.nfc.NfcAdapter;
import android.os.Bundle;
import android.os.Parcelable;
import android.widget.Toast;

public class nfcActivity extends Activity {
    private static final String TAG = "NFCReadTag";
    private NfcAdapter mNfcAdapter;
    private IntentFilter[] mNdefExchangeFilters;
    private PendingIntent mNfcPendingIntent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nfclayout);

        mNfcAdapter = NfcAdapter.getDefaultAdapter(this);

        mNfcPendingIntent = PendingIntent.getActivity(this, 0, new Intent(this,
                getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP
                | Intent.FLAG_ACTIVITY_CLEAR_TOP), 0);

        IntentFilter nfcIntent = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
        nfcIntent.addDataScheme("text/plain");      
        mNdefExchangeFilters = new IntentFilter[] { nfcIntent };

    }

    @Override
    protected void onPause() {
        super.onPause();
        if(mNfcAdapter != null) mNfcAdapter.disableForegroundDispatch(this);
    }

    @Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);      
        if (mNfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {
            NdefMessage[] messages = null;
            Parcelable[] rawMsgs = intent.getParcelableArrayExtra(mNfcAdapter.EXTRA_NDEF_MESSAGES);
            if (rawMsgs != null) {
                messages = new NdefMessage[rawMsgs.length];
                for (int i = 0; i < rawMsgs.length; i++) {
                    messages[i] = (NdefMessage) rawMsgs[i];
                }}
                else if (rawMsgs == null){
                    Toast.makeText(getApplicationContext(), "No NDEF Message Read", Toast.LENGTH_LONG).show();
                }
            if(messages[0] != null) {
                String result="";
                byte[] payload = messages[0].getRecords()[0].getPayload();
                for (int b = 1; b<payload.length; b++) { // skip SOH
                    result += (char) payload[b];
                }
                Toast.makeText(getApplicationContext(), "Safe Location Registered - " + result, Toast.LENGTH_SHORT).show();
            }
        }
        else Toast.makeText(getApplicationContext(), "Intent Error...", Toast.LENGTH_LONG).show();

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:54:21.010

如果您的 Activity 是由 NFC Intent 启动的，则`onNewIntent()`不会被调用（只有当 Activity 已经在前台时扫描标签时才会调用它）。尝试做一些类似调用`onNewIntent(getIntent())`的事情`onCreate()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:34:58.673

尝试这样的事情：（取自 StickyNotes NFC 示例）

```
@Override
protected void onResume() {
    super.onResume();
    mResumed = true;
    // Sticky notes received from Android
    if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {
        NdefMessage[] messages = getNdefMessages(getIntent());
        byte[] payload = messages[0].getRecords()[0].getPayload();
        setNoteBody(new String(payload));
        setIntent(new Intent()); // Consume this intent.
    }
    enableNdefExchangeMode();
}

@Override
protected void onPause() {
    super.onPause();
    mResumed = false;
    mNfcAdapter.disableForegroundNdefPush(this);
}

@Override
protected void onNewIntent(Intent intent) {
    // NDEF exchange mode
    if (!mWriteMode && NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {
        NdefMessage[] msgs = getNdefMessages(intent);
        promptForContent(msgs[0]);
    }

    // Tag writing mode
    if (mWriteMode && NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction())) {
        Tag detectedTag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
        writeTag(getNoteAsNdef(), detectedTag);
    }
} 
```

# javascript - Rails 应用程序中的 JQuery UI Autcomplete 几乎可以工作，但我无法导航或单击菜单

> ID：14222836
> 
> 赞同：0
> 
> 时间：2013-01-08T19:45:16.133
> 
> 标签：javascript, jquery, ruby-on-rails, jquery-ui, coffeescript

我正在尝试让 JQuery UI 自动完成小部件与我的 Rails 应用程序一起使用。在控制器的 .js.coffee 文件中，我有

```
$ ->
    $('#category_form').autocomplete( {source: category_array} ) 
```

当我加载页面并开始在#category_form 字段中输入内容时，会出现自动完成可能性菜单，但如果我尝试使用箭头键浏览它，或者用鼠标单击它，它就会消失。

当我检查页面的 html 时，很明显小部件正在做某事。例如，如果有三种自动完成的可能性，html 看起来像这样

```
<input id="category_form" name="service[category]" placeholder="Service category..."
size="30" type="text" class="ui-autocomplete-input" autocomplete="off">
<span role="status" aria-live="polite" class="ui-helper-hidden-accessible">
3 results are available, use up and down arrow keys to navigate.
</span> 
```

起初我对 autocomplete="off" 的出现感到震惊，但在线工作示例也是如此。尽管跨度中有消息，但使用向上和向下箭头键只会导致可能性菜单消失。

我一直在寻找一段时间，但我还没有找到其他人有这个确切的问题。谁能帮我弄清楚这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:41:32.930

我能够解决这个问题。问题是我的样式表文件夹中有 .css 和 .min.css 文件。我很确定样式规则发生冲突，结果破坏了自动完成小部件。我摆脱了 .css 文件，问题就消失了。希望这将帮助遇到同样问题的任何人。

# java - 高性能小数据的本地数据存储

> ID：14222839
> 
> 赞同：2
> 
> 时间：2013-01-08T19:45:22.187
> 
> 标签：java

所以，这就是我的场景。

我有数百万个事件进入，我不想将这些数据直接扔到我的数据库中。我想要一个“批处理”操作，其中 java 代码保存传入的事件，直到达到阈值（比如每 10 秒），然后它们对主数据库进行批量插入。

我还需要容错，因为如果机器崩溃，我不想丢失数据。我正在考虑使用 hsqldb 将这些事件（大约 10k）保持 10 秒。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:31:24.980

如果您想要每秒数百万个整数和持久性，您可以尝试。[Java Chronicle](https://github.com/peter-lawrey/Java-Chronicle) 你可以有一个不同的进程来消费数据，所以如果你的程序死掉了，数据仍然会被写入数据库。（您的主进程也不会因为必须执行数据库更新而减慢）它还支持通过 TCP 复制到多台机器。

基于此测试的简单示例[HERE](https://github.com/peter-lawrey/Java-Chronicle/blob/master/src/test/java/vanilla/java/chronicle/impl/IndexedChronicleTest.java)

```
 // create a Chronicle for reading or writing.
 String basePath = TMP + File.separator + "deleteme.ict";
 IndexedChronicle tsc = new IndexedChronicle(basePath);

 // create a handle to excerpts in the chronicle.
 Excerpt excerpt = tsc.createExcerpt();

 // add 1024 entries.
 int counter = 1;
 for (int i = 0; i < 1024; i++) {
        excerpt.startExcerpt(129);
        for (int j = 0; j < 128; j += 8)
            excerpt.writeLong(counter++);
        excerpt.write(-1);
        excerpt.finish();
 }

 // somewhere else read the file
    int counter2 = 1;
    Excerpt excerpt2 = tsc.createExcerpt();
    while (excerpt2.nextIndex()) {
        for (int j = 0; j < 128; j += 8) {
            long actual = excerpt2.readLong();
            long expected = counter2++;
            if (expected != actual)
                assertEquals(expected, actual);
        }
        assertEquals(-1, excerpt2.readByte());
        excerpt2.finish();
    }
    assertEquals(counter, counter2); 
```

这使您可以在它们可用时进行批处理，以最大程度地降低未将其添加到数据库中的风险。当 nextIndex() 返回 false 时，您提交批处理的事务，稍等片刻并重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:50:21.143

Martin Fowler 发表了一篇关于他的 LMAX 架构的文章，该架构允许在主内存中进行数百万次事务，并在发生故障时可以恢复。

至少你应该看看：[http ://martinfowler.com/articles/lmax.html](http://martinfowler.com/articles/lmax.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:37:20.127

我推断您的问题是数据库负载，而不是进程负载。这向我提出了一个问题，为什么您希望批处理操作更便宜，从您目前的问题来看，听起来您宁愿每小时支付 600 美元而不是每分钟 10 美元，但负载也会一样糟糕。

如果您可以廉价地处理批处理操作，那么您只需要缓存到一个节省成本的媒介中，然后从那里加载。想到的两件事是用 JSON 写入平面文件，以及使用 Memcached（也可能是 JSON），其中加载发生在单独的进程（或线程池）中。您需要确保两者之间的原子性。可能有更多开箱即用的解决方案，我会留下更多知识渊博的答案来提出。

根据您期望崩溃的严重程度，您还可以设置关闭挂钩以在机器崩溃之前转储，尽管这充其量是值得怀疑的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T07:33:32.067

批处理操作实际上是在数据库级别处理的。数据库将单个（或几个）写入中的多个事务合并到事务日志中，写入从事务日志移动到表，但它们被分组以最小化磁盘写入。至少与**甲骨文**。这就是为什么它如此高效且如此昂贵的原因。但它可以是这样，**PostgreSQL**将满足您的期望。先测试。

在数据库读取方面，也有来自数据库站点的密集缓存。但是解析 SQL 的成本很高，所以使用客户端缓存是一个很好的选择。考虑**EhCache**。它支持 2 级缓存：预定义数量的项目保存在内存中，其他集合溢出到磁盘（如果需要，您可以只使用内存缓存）。从内存缓存中读取的时间大约是**HashMap**的访问时间。当然，您拥有的 RAM 越多，内存缓存的效率就越高。

当谈到容错时，数据库保证，缓存不会。这仅是写入问题，而不是读取问题。例如，不要尝试使用 hsqldb 自己实现某些东西。**磁盘写入总是很昂贵**。你不会写出比 Oracle 更好的东西，因为你没有这么多的人和时间 :) 他们的事务日志机制**非常**有效。并且当系统崩溃时，只要执行了**提交**，操作就会从该日志中恢复。

# git - 'git pull' 不更新远程分支的更改

> ID：14222845
> 
> 赞同：2
> 
> 时间：2013-01-08T19:45:47.383
> 
> 标签：git, version-control

我已经设置了我的本地分支来跟踪远程分支。

当我这样做时`git pull`，它说'已经是最新的'。

但是当我这样做时`git log`，最新的签到日期是 2012 年 12 月 21 日'。

当我这样做时`git log remotes/branch1`（我正在尝试跟踪的分支），最新的签到时间是 2013 年 1 月 7 日'。

为什么我没有收到更改签入？我该如何解决？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T19:47:50.470

您需要设置跟踪。使用`git branch --set-upstream remotes/branch1`. 虽然你的遥控器看起来不太好。应该是`origin/branch`。

# c# - RazorTemplateEngine 解析器生成不寻常的语法树

> ID：14222846
> 
> 赞同：3
> 
> 时间：2013-01-08T19:45:51.453
> 
> 标签：c#, razor, asp.net-mvc-4, razor-2

我正在寻找一种方法来重用我的 MVC Razor 视图作为客户端渲染的 javascript 模板，并找到了将 razor 视图解析为 javascript 函数的[这个库（Razor Client Template）。](https://github.com/jchadwick/RazorClientTemplates)

它与 Razor 引擎版本 2 不兼容，稍微挖掘一下表明这是因为 Razor 引擎的语法树已经过大修。在尝试修改内容时，我从 RazorViewEngine 解析器中发现了一些奇怪的结果。

我有一个非常简单的观点，就像这样：

```
@model Justis4.Models.EntityModel
<div>
    @Model.PropertyOne
    @Model.PropertyTwo
</div> 
```

razor 客户端模板库从以下内容开始：

```
var host = new RazorEngineHost(newCSharpRazorCodeLanguage());
var engine = new RazorTemplateEngine(host);
var parserResults = engine.ParseTemplate(razorTemplate);  //from string reader
var doc = parserResults.Document; 
```

然后开始将生成的语法树解析为 javascript 函数。

当我通过语法树进行调试时，我看到了一些奇怪的东西。据我了解，Razor 引擎将视图拆分为不同类型的“块”和“跨度”。但如图所示，顶部的模型声明已被解析为标记，而不是代码。也有类似的奇怪之处，因此，其余的对 javascript 的解析失败了。

![在此处输入图像描述](../Images/963b7b7de0580eb3193c6fa26921b10d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:42:30.470

标准剃须刀解析器无法识别`@model`关键字。该`@model`关键字来自程序集中的[MvcCSharpRazorCodeParser](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/8b6e0c95ffc6#src/System.Web.Mvc/Razor/MvcCSharpRazorCodeParser.cs)类`System.Web.Mvc`。

主要功能来自[SetModelTypeCodeGenerator](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/8b6e0c95ffc6#src/System.Web.Mvc/Razor/SetModelTypeCodeGenerator.cs)。此类利用核心剃须刀引擎类[SetBaseTypeCodeGenerator](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/8b6e0c95ffc6#src/System.Web.Razor/Generator/SetBaseTypeCodeGenerator.cs)将剃须刀视图的基本类型从默认更改`WebViewPage`为`WebViewPage<Model>`.

# 解决方案

请改用`@inherits`关键字，例如`@inherits WebViewPage<EntityModel>`.

或者，添加对的引用`System.Web.Mvc`并使用自定义语言将代码解析器更改为`MvcCSharpRazorCodeParser`. 您需要将该`RazorEngine.DefaultBaseClass`属性设置为您打算使用的基类的非泛型版本，例如`WebViewPage<T>`您将设置`engine.DefaultBaseClass = "System.Web.Mvc.WebViewPage"`.

```
class MvcCSharpRazorCodeLanguage : CSharpRazorCodeLanguage
{
    public override ParserBase CreateCodeParser()
    {
        return new MvcCSharpRazorCodeParser();
    }
} 
```

# c - 计算字符串中的特定字符，如 a 并给出

> ID：14222847
> 
> 赞同：-1
> 
> 时间：2013-01-08T19:45:57.363
> 
> 标签：c, string, count, character

嗨，我是编码新手，我只想知道如何计算字符串中的特定字符，如“l”，计算后我只想给出结果。

尝试学习更多关于 C 语言编码的知识，以便为学校做一些研究。我只想创建一些图表，其中包含特定字符的百分比，例如：

*   你好 <- 我们的字符串
*   l <- 我们的特殊性格

结果：这个“hello”字符串中有 2 l。

现在我的一些想法，因为人们不应该认为我没有做任何事情。

*   读取字符串
*   拆分字符，例如 h/e/l/l/o
*   也许现在是一个循环来获取“l”的数量？
*   如果找到“l” -> count+1
*   printf 表示 l 的数量

如果有人可以帮助我，我会非常高兴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:55:31.053

你的算法很好；您需要帮助将您的伪代码转换为实际的 C 代码吗？如果是这样，你在这里，有大量的评论：

```
#include <stdio.h>

int main(void)
{
    char mystr[128]; // a char array, where the string will be input
    char ch; // the char we want to count
    char *p; // loop variable
    unsigned cnt; // number of occurrences

    fgets(mystr, sizeof(mystr), stdin); // read the string - max 128 characters, beware!
    ch = fgetc(stdin); // read the character
    cnt = 0;

    for (p = mystr; *p; p++) {
        if (*p == ch) cnt++; // walk through the string, increase the count if found
    }

    printf("%u occurrences found\n", cnt);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:56:07.580

在 C 中 a`String`是一个类型为 的数组`char`。您可以遍历数组并与您自己的`char`进行比较。`char`

# visualization - 清除图形网格

> ID：14222850
> 
> 赞同：0
> 
> 时间：2013-01-08T19:46:09.253
> 
> 标签：visualization, data-modeling, data-visualization

如果我们做文档的信息可视化，跨多个文档的图生成往往会形成一个网格。现在为了得到一个清晰的画面，很容易以最小的数据负载形成它们，因此总结是一件好事。但是，如果文档负载变为百万，那么通过汇总，图形也会形成一个大网格。我有点困惑如何清除网格。阅读和工作[http://www.jerrytalton.net/research/Talton04SSMSA.report/Talton04SSMSA.pdf](http://www.jerrytalton.net/research/Talton04SSMSA.report/Talton04SSMSA.pdf)并没有太大帮助，因为数据量很大。

如果有任何博学的成员可以帮助我。

问候， SK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:07:00.080

您是在谈论创建文档的图形或网络吗？例如，您可以通过引用、共享作者、出现相同的术语等来链接文档网络。这通常不称为网格问题，而是自动图形布局问题。

您需要[更好的布局算法](http://en.wikipedia.org/wiki/Force-directed_graph_drawing)或进行某种聚类和缩减。您可以使用许多聚类算法，例如 Wakita & Tsurumi 的：

*   胁田健和鹤见俊之。2007\. 在大型社交网络中寻找社区结构：[扩展摘要]。过程。第 16 届万维网国际会议（WWW '07）。1275-1276。DOI= [10.1145/1242572.1242805](http://dx.doi.org/10.1145/1242572.1242805)。

Navlakha 等人特别针对通过“图形摘要”降低复杂性。2008 年：

*   Saket Navlakha、Rajeev Rastogi 和 Nisheeth Shrivastava。2008\. 有界误差的图总结。过程。2008 ACM SIGMOD 国际数据管理会议（SIGMOD '08）。419-432。DOI = [10.1145/1376616.1376661](http://dx.doi.org/10.1145/1376616.1376661)。

您还可以查看我的最新论文，它用代表性字形替换了网络中常见的重复模式：

*   Dunne, C. 和 Shneiderman, B. 2013。主题简化：通过扇形、连接器和集团字形提高网络可视化的可读性。过程。2013 年 SIGCHI 计算系统中的人为因素会议（CHI '13）。[.pdf](http://www.cs.umd.edu/~cdunne/hcil/pubs/Dunne13Motifsimplification_improving.pdf) _

这是可能减少的示例图片：

![Dunne & Shneiderman 的主题简化](../Images/7e45a9258b435aa3d457284d044227b3.png)

# php - AllPosters.com SOAP 有问题的响应

> ID：14222851
> 
> 赞同：0
> 
> 时间：2013-01-08T19:46:11.610
> 
> 标签：php, soap, nusoap

我对 allposters.com SOAP ( [http://webservice.allposters.com/](http://webservice.allposters.com/) ) 有疑问。我正在尝试在 PHP 5.3 安装上通过（稍作修改）nuSOAP PHP 库（http://sourceforge.net/projects/nusoap/）获取一些产品信息。

我的要求是（所有字符都和这里完全一样，它们没有转换为实体）：

```
POST /ProductInformationService.asmx HTTP/1.0
Host: webservice.allposters.com
User-Agent: NuSOAP/0.9.5 (1.123)
Content-Type: text/xml; charset=UTF-8
SOAPAction: "http://Webservice.Allposters.com/APCF.AffiliateWebService/ProductInformationService/GetProductByProductNumberInformation"
Content-Length: 570

<?xml version="1.0" encoding="UTF-8" ?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
        <GetProductByProductNumberInformation xmlns="http://Webservice.Allposters.com/APCF.AffiliateWebService/ProductInformationService">
            <APCSearchXml>
                <WebSiteID>1234567890</WebSiteID>
                <SearchTerm>1234567</SearchTerm>
                <LanguageID>1</LanguageID>
                <CurrencyCode>USD</CurrencyCode>
            </APCSearchXml>
        </GetProductByProductNumberInformation>
    </soap:Body>
</soap:Envelope> 
```

我得到了错误

```
Length cannot be less than zero. Parameter name: length 
```

在这个具体的回应中

```
HTTP/1.1 200 OK
Connection: keep-alive
Date: Tue, 08 Jan 2013 18:46:59 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 4.0.30319
Cache-Control: private, max-age=0
Content-Type: text/xml; charset=utf-8
Content-Length: 821

<APC_Search_Results>
   <StatusCode>1</StatusCode>
   <Search_Error>
       <ErrorNumber>1</ErrorNumber>
       <ErrorDescription>Length cannot be less than zero. Parameter name: length</ErrorDescription>
   </Search_Error>
</APC_Search_Results> 
```

通信似乎工作正常；如果我从之前的请求中删除“WebSiteID”元素，我会得到

```
Index was out of range. Must be non-negative and less than the size of the collection. 
```

不幸的是，从我在网上找到的几个例子和他们网站上的一个 7 页文档以及 Visual Basic 示例（这是我能找到的唯一文档），我真的不知道我是什么丢失，并且那个 .NET 错误并没有告诉我可以使用的东西。

有人在 allposters.com 附属网络服务中遇到过类似的问题并有一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:32:21.800

您以错误的方式使用 Soap 服务。

[如果您在http://webservice.allposters.com/ProductInformationService.asmx?op=GetProductByProductNumberInformation](http://webservice.allposters.com/ProductInformationService.asmx?op=GetProductByProductNumberInformation)上查看呼叫“GetProductByProductNumberInformation”页面上的示例，则仅提及占位符“字符串”，但您发送的是完整的集合的 XML。这可能是错误的。

我不知道您为什么认为您可以发送的不仅仅是您所做的 XML 那样的字符串，但我发现该服务实际上希望您发送包装在 CDATA 中的 XML，以便它只是一个字符串 - 然后是服务器解压字符串并进行另一个 XML 解析。

这种实现方法完全是胡说八道，因为它绕过了使用 WSDL 描述服务允许和期望的参数类型的 Soap 服务这一点——但您不太可能改变它。

所以你必须让 NuSoap 将你的 XML 字符串包装在 CDATA 标记中，否则我认为它根本不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:44:55.390

OP 在问题编辑中提供了以下解决方案，因此我将转向正确的答案：

```
<?xml version="1.0" encoding="UTF-8" ?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
        <GetProductByProductNumberInformation xmlns="http://Webservice.Allposters.com/APCF.AffiliateWebService/ProductInformationService">
            <APCSearchXml>
                <![CDATA[ 
                  <APC_Search_Query>
                        <WebSiteID>1234567890</WebSiteID>                        
                            <SearchText>123456</SearchText>
                        <LanguageID>1</LanguageID>
                        <CurrencyCode>USD</CurrencyCode>
                  </APC_Search_Query>
                ]]>
            </APCSearchXml>
        </GetProductByProductNumberInformation>
    </soap:Body>
</soap:Envelope> 
```

# mongodb - 用于发票统计的 MongoDb 聚合或 mapreduce？

> ID：14222855
> 
> 赞同：0
> 
> 时间：2013-01-08T19:46:39.540
> 
> 标签：mongodb

我是 MongoDb 的新手，并且有一份（我想）MapReduce 或 Aggregation 的工作。

我有一个“发票”集合，其中包含以下格式的文档：

```
{
    date: 'some unix timestamp',
    total: 12345,
    paid: true
} 
```

我需要在单元格中显示一个以月份（1 月至 12 月）为列的表格，每年的一行以及该月的总和（分为已付和未付）。像这样：

```
 |     Jan     |      Feb      | ...
2013 | 1,222 / 200 |  175 / 2,122  | ...
... 
```

你能帮我得到正确的 mongo 命令吗？也许我最好写一些JS代码在mongo中执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T20:35:42.377

我现在找到了使用 MapReduce 的解决方案。这是 PHP 使用的：

```
$map = new MongoCode('
    function() {
        var d = new Date(this.date*1000);
        emit({y: d.getFullYear(), m: d.getMonth()}, {
            total: this.total,
            notPaid: this.paid ? 0 : this.total,
            count: 1
        });
    };
');

$reduce = new MongoCode('
    function(month, values) {
        result = { total: 0, notPaid: 0, count: 0 };
        for (var i = 0; i < values.length; i++) {
            result.total += values[i].total;
            result.notPaid += values[i].notPaid;
            result.count += values[i].count;
        }
        return result;
    };
');

$result = $db->command(array(
    'mapreduce' => 'invoices',
    'map' => $map,
    'reduce' => $reduce,
    'out' => 'temp'
));

echo $result['timeMillis']; 
```

现在结果在“temp”集合中，每个月一个文档。可以优化或增强吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T02:18:43.473

您可以使用这样的聚合框架来做到这一点：

```
db.invoices.aggregate( [
    {
        "$project" : {
            "yr" : {
                "$year" : "$date"
            },
            "mo" : {
                "$month" : "$date"
            },
            "total" : 1,
            "unpaid" : {
                "$cond" : [
                    "$paid",
                     0,
                    "$total"
                ]
            }
        }
    },
    {
        "$group" : {
            "_id" : {
                "y" : "$yr",
                "m" : "$mo"
            },
            "total" : {
                "$sum" : "$total"
            },
            "unpaid" : {
                "$sum" : "$unpaid"
            }
        }
    }
] ) 
```

您可以在最后使用 another`$project`来美化输出，并使用 a`$sort`对其进行排序，但这是它的基本功能核心。

# knockout.js - jquery-ui 自动完成选择不更新淘汰赛可观察属性

> ID：14222858
> 
> 赞同：3
> 
> 时间：2013-01-08T19:46:49.283
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

JSFiddle：http: [//jsfiddle.net/abepark/rzeNC/7/](http://jsfiddle.net/abepark/rzeNC/7/)

在您从自动完成下拉列表中选择一个选项后，我遇到了 ko.observable 属性 Job.CompanyName 没有更新的问题。

无论如何要在不创建自定义活页夹的情况下更新 ko.observable 属性？

```
var model = {
  Job: {
    CompanyName: "Test" 
  }
};

var InterviewViewModel = function (data) {
  ko.mapping.fromJS(data, {}, this);
  this.add = function (data) {
    console.log("click");
    console.log(this.Job.CompanyName());
  }.bind(this);
}

$("#CompanyName").autocomplete({
  source: ["Test", "cool", "what", "Example", "Cookies"]
});

var viewModel = new InterviewViewModel(model);
ko.applyBindings(viewModel);

viewModel.Job.CompanyName.subscribe(function (val) {
  console.log(val);
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T20:04:05.830

对我来说，您的示例工作，但是当您离开文本框时，值会登录到控制台。这是淘汰赛的默认行为。

您可以在自动完成中添加选择功能，如下所示：http: [//jsfiddle.net/jLtPu/4/](http://jsfiddle.net/jLtPu/4/)。它应该可以解决您的问题。

```
select: function(event, ui) {
    $(this).val(ui.item.value).change();
} 
```

# windows-phone-7 - 如何在模拟器上输入下划线字符

> ID：14222861
> 
> 赞同：-1
> 
> 时间：2013-01-08T19:46:51.453
> 
> 标签：windows-phone-7

我是 WP7 新手。我的 Windows Phone 应用程序上有一个文本框。我没有看到下划线字符。我在网上搜索过，但没有找到答案。如何在模拟器上输入下划线字符？我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:00:45.767

脚步：

1.  点击文本框并出现屏幕键盘
2.  点击“123”按钮进入数字模式
3.  按住“-”符号，出现“_”（下划线）符号

顺便说一句，你真的是指“下划线”还是“下划线”！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:56:58.407

您不能只使用 PC 的键盘输入下划线吗？

为此，您必须在单击文本框后首先按下 Pause|Break 键，这样您就可以毫无问题地使用键盘了。

# entity-framework - 使用 TransactionScope 时实体框架 SaveChanges(False) 失败

> ID：14222864
> 
> 赞同：0
> 
> 时间：2013-01-08T19:47:16.510
> 
> 标签：entity-framework, transactionscope, savechanges

在以下链接上提出的问题也有一个很好的答案，但我的问题在那之后开始了。

[使用事务或 SaveChanges(false) 和 AcceptAllChanges()？](https://stackoverflow.com/questions/815586/entity-framework-using-transactions-or-savechangesfalse-and-acceptallchanges/815660#815660)

我尝试了按照我的要求给出的代码如下

* * *

```
MyEntities context1 = new MyEntities();

...
...
 // some code for changing the table data in Context 1.
...

MyEntities context1 = new MyEntities();

using (TransactionScope scope = new TransactionScope())
{
    context1.SaveChanges(false);   // LABEL 1
    context2.SaveChanges(false);   // LABEL 2
    scope.Complete();             // LABEL 3
    context1.AcceptAllChanges();  // LABEL 4
    context2.AcceptAllChanges();  // LABEL 5
} 
```

* * *

在标有 // LABEL 1 的行之前一切正常，但是在 // LABEL 2 行上，它无法显示“底层提供程序在打开时失败”。

注意： - 请注意 Context1、Context2 是相同类型的 2 个不同实例。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:19:03.573

此答案可能会解释您的问题的原因： [https](https://stackoverflow.com/a/3081776/655625) ://stackoverflow.com/a/3081776/655625 您可能需要在该`context1.SaveChanges(false);`行之后重新打开连接。例如：

```
context2.Database.Connection.Open(); //before the second SaveChanges(false) 
```

但是，仔细阅读，您会发现您正在以这种方式进行分布式事务，另一个答案（与第一个答案相关）显示了避免分布式事务的替代方法（更详细）。 [https://stackoverflow.com/a/794785/655625](https://stackoverflow.com/a/794785/655625)

# c++ - wordwap 函数修复以保留单词之间的空格

> ID：14222870
> 
> 赞同：0
> 
> 时间：2013-01-08T19:47:33.887
> 
> 标签：c++, word-wrap, istringstream

前段时间，我正在寻找一个片段来为特定大小的行长度进行自动换行，而不会破坏单词。它工作得还算公平，但是现在当我开始在编辑控件中使用它时，我注意到它在两者之间占用了多个空白符号。如果 wstringstream 不适合该任务，我正在考虑如何修复它或完全摆脱它。也许那里有人有类似的功能？

```
void WordWrap2(const std::wstring& inputString, std::vector<std::wstring>& outputString, unsigned int lineLength)
{
   std::wstringstream  iss(inputString);
   std::wstring line;
   std::wstring word;

   while(iss >> word)
   { 
      if (line.length() + word.length() > lineLength)
      {
         outputString.push_back(line+_T("\r"));
         line.clear();
      }
      if( !word.empty() ) {
      if( line.empty() ) line += word; else line += +L" " + word;
      }

   }

   if (!line.empty())
   { 
      outputString.push_back(line+_T("\r"));
   }
} 
```

换行分隔符应保留`\r`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:14:55.000

我不会一次读一个单词，然后添加单词直到超过所需的行长，而是从要换行的点开始，然后向后工作，直到找到一个空白字符，然后添加整个块到输出。

```
#include <iostream>
#include <string>
#include <vector>
#include <stdlib.h>

void WordWrap2(const std::wstring& inputString, 
               std::vector<std::wstring>& outputString, 
               unsigned int lineLength) {
    size_t last_pos = 0;
    size_t pos;

    for (pos=lineLength; pos < inputString.length(); pos += lineLength) {

        while (pos > last_pos && !isspace((unsigned char)inputString[pos]))
            --pos;

        outputString.push_back(inputString.substr(last_pos, pos-last_pos));
        last_pos = pos;
        while (isspace((unsigned char)inputString[last_pos]))
            ++last_pos;
    }
    outputString.push_back(inputString.substr(last_pos));
} 
```

就目前而言，如果遇到比您指定的行长更长的单个单词，这将失败（在这种情况下，它可能*应该*在单词中间中断，但目前没有）。

我还编写了它来跳过单词之间的空格，*当*它们发生在换行符时。如果你真的不想这样，只需消除：

```
 while (isspace((unsigned char)inputString[last_pos]))
            ++last_pos; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:31:46.997

如果您不想丢失空格字符，则需要在执行任何读取之前添加以下行：

```
iss >> std::noskipws; 
```

但是随后将`>>`字符串用作第二个参数将无法很好地使用空格。

您将不得不求助于阅读字符，并自己以特别的方式管理它们。

# objective-c - Objective-C 阻止“保留循环”警告，不明白为什么

> ID：14222871
> 
> 赞同：6
> 
> 时间：2013-01-08T19:47:33.780
> 
> 标签：objective-c, objective-c-blocks

我见过其他几个相同形式的问题，但我要么 a) 无法理解所提供的答案，要么 b) 看不出这些情况与我的情况有何相似之处。

我正在 UIView 上编写一个类别，以递归地评估 UIView 的所有子视图并返回一个通过测试的子视图数组。我已经注意到我的编译器警告发生在哪里：

```
-(NSArray*)subviewsPassingTest:(BOOL(^)(UIView *view, BOOL *stop))test {

   __block BOOL *stop = NO;

    NSArray*(^__block evaluateAndRecurse)(UIView*);
    evaluateAndRecurse = ^NSArray*(UIView *view) {
        NSMutableArray *myPassedChildren = [[NSMutableArray alloc] init];
        for (UIView *subview in [view subviews]) {
            BOOL passes = test(subview, stop);
            if (passes) [myPassedChildren addObject:subview];
            if (stop) return myPassedChildren;

            [myPassedChildren addObjectsFromArray:evaluateAndRecurse(subview)];
            // ^^^^ Compiler warning here ^^^^^
            // "Capturing 'evaluateAndRecurse' strongly in this block 
            // is likely to lead to a retrain cycle"
        }
        return myPassedChildren;
    };

    return evaluateAndRecurse(self);
} 
```

`__block`此外，当我在块的声明中不包含修饰符时，我会遇到 bad_access 失败`(^__block evaluateAndRecurse)`。如果有人可以解释为什么会这样，那也将非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T20:00:50.773

这里的问题是您的块`evaluteAndRecurse()`捕获了自己，这意味着，如果它曾经被复制（我不相信它会在您的情况下，但在稍微不那么琐碎的情况下它可能会），那么它将保留自己，因此永远活着，因为没有什么可以打破保留循环。

**编辑**：Ramy Al Zuhouri 提出了一个很好的观点，使用`__unsafe_unretained`对块的唯一引用是危险的。只要块保留在堆栈上，这将起作用，但如果需要复制块（例如，它需要转义到父范围），`__unsafe_unretained`则将导致它被释放。以下段落已使用推荐的方法进行了更新：

您可能想要在这里做的是使用一个单独的变量标记为`__unsafe_unretained`也包含该块，并捕获该单独的变量。这将阻止它保留自己。您可以使用`__weak`，但是由于您知道如果调用该块必须是活动的，因此无需为弱引用的（非常轻微的）开销而烦恼。这将使您的代码看起来像

```
NSArray*(^__block __unsafe_unretained capturedEvaluteAndRecurse)(UIView*);
NSArray*(^evaluateAndRecurse)(UIView*) = ^NSArray*(UIView *view) {
    ...
        [myPassedChildren addObjectsFromArray:capturedEvaluateAndRecurse(subview)];
};
capturedEvaluateAndRecurse = evaluteAndRecurse; 
```

或者，您可以捕获指向块的指针，这将具有相同的效果，但允许您在块实例化之前而不是之后获取指针。这是个人喜好。它还允许您省略`__block`：

```
NSArray*(^evaluateAndRecurse)(UIView*);
NSArray*(^*evaluteAndRecursePtr)(UIView*) = &evaluateAndRecurse;
evaluateAndRecurse = ^NSArray*(UIView*) {
    ...
        [myPassedChildren addObjectsFromArray:(*evaluateAndRecursePtr)(subview)];
}; 
```

* * *

至于需要`__block`，那是一个单独的问题。如果您没有`__block`，则块实例实际上将捕获变量的*先前值*。请记住，创建块时，任何未标记的捕获变量`__block`实际上都存储为`const`它们在实例化块时的状态副本。而且由于块是在分配给变量*之前*创建的，这意味着它`capturedEvaluteAndRecurse`在分配之前捕获变量的状态，这将是`nil`（在 ARC 下；否则，它将是垃圾内存）。

本质上，您可以将给定的块实例实际上视为隐藏类的实例，该类的每个捕获的变量都有一个 ivar。因此，对于您的代码，编译器基本上会将其视为：

```
// Note: this isn't an accurate portrayal of what actually happens
PrivateBlockSubclass *block = ^NSArray*(UIView *view){ ... };
block->stop = stop;
block->evaluteAndRecurse = evaluateAndRecurse;
evaluteAndRecurse = block; 
```

希望这可以清楚地说明为什么它捕获先前的值`evaluateAndRecurse`而不是当前值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:03:58.267

我做了类似的事情，但是以不同的方式减少了分配新数组的时间，并且没有遇到任何问题。您可以尝试调整您的方法，使其看起来像这样：

```
- (void)addSubviewsOfKindOfClass:(id)classObject toArray:(NSMutableArray *)array {

    if ([self isKindOfClass:classObject]) {

        [array addObject:self];
    }

    NSArray *subviews = [self subviews];
    for (NSView *view in subviews) {

        [view addSubviewsOfKindOfClass:classObject toArray:array];
    }
} 
```

# c# - Oracle 客户端锁定或崩溃

> ID：14222880
> 
> 赞同：1
> 
> 时间：2013-01-08T19:47:51.937
> 
> 标签：c#, .net, database, oracle, crash

我正在编写一个在 .NET 3.5 上运行的 C# Windows 窗体应用程序，并使用 Oracle 的客户端连接到数据库（我希望我可以升级到 .NET 4.0 或更高版本，但我不能）。应用程序中有很多遵循通常模式的代码；这是伪代码：

```
var worker = new BackgroundWorker();
worker.DoWork += worker_DoWork;
worker.RunWorkerCompleted += worker_RunWorkerCompleted;
worker.RunWorkerAsync(); 
```

...

```
private void worker_DoWork(object sender, DoWorkEventArgs e) {
    using(var conn = OpenOracleConnection()) {
        e.Result = LoadSomethingFromDatabase(conn);
    }
}

private void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e) {
    DisplayLoadedData(e.Result);
} 
```

到目前为止，一切都很好。不幸的是，我最近添加了一些非常快速地执行此类查询的代码，尽管只在单个线程上。现在，应用程序偶尔会出现以下两种行为之一：

*   它锁定在 Oracle 代码中的某个位置，使用完全无害的方法，例如`"reader.GetInt32(string)"`.
*   它使整个 CLR 崩溃。我能捕捉到的也不例外；整个过程立即死亡。在事件查看器中，Oracle 的 DLL 被列为故障模块。

我检查了一下，据我所知，我的网络连接或 Oracle DB 本身没有任何问题。我也没有跨线程共享我的 Oracle 连接；虽然 worker.DoWork 中的代码在 ThreadPool 的后台线程上运行，但该特定的“conn”实例一次只能从一个线程访问（因为它在线程上运行的方法中被声明为局部变量） .

有没有人对我如何解决这个问题有任何想法，或者至少调试它？它曾经发生在其他人身上吗？

**更新：**为了它的价值，我将我的实现切换为对每个工作线程使用单个长时间运行的数据库连接，并限制工作线程的数量。这大大降低了这个问题出现的频率，尽管遗憾的是它并没有完全消除这个问题。

# javascript - Backbone.js：在模型中设置模型属性？

> ID：14222885
> 
> 赞同：2
> 
> 时间：2013-01-08T19:48:15.293
> 
> 标签：javascript, backbone.js, backbone-model

在 Backbone.js 中工作，我想从模型的方法中设置模型属性。这似乎应该很简单，但我无法让它工作。

目前我所拥有的是这个。我试图在调用“performSearch”期间设置“结果”属性：

```
var SearchModel = Backbone.Model.extend({
    performSearch: function(str) {
      $.get('/' + str, function(results) {
        console.log(data);
        this.set("results", data);
      });
    },
}); 
```

这给了我以下错误：

```
Uncaught TypeError: Object #<Object> has no method 'set' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T19:51:07.737

问题是`this`没有绑定到 ajax 回调中的模型对象。

您可以通过以下方式修复它：

```
var SearchModel = Backbone.Model.extend({
    performSearch: function(str) {
        //assign to local variable, so that it is accesible in callback's closure
        var self = this; 
        $.get('/' + str, function(results) {
            // are you sure it should be data?
            console.log(data);
            self.set("results", data);
        });
    },
}); 
```

另一种方法是将回调函数显式绑定到模型：

```
 var SearchModel = Backbone.Model.extend({
    performSearch: function(str) {
        //assign to local variable, so that it is accesible in callback's closure
        $.get('/' + str, (function(results) {
            // are you sure it should be data?
            console.log(data);
            this.set("results", data);
        }).bind(this)); //binding here
    },
}); 
```

# css - 滚动条按钮递增/递减

> ID：14222887
> 
> 赞同：-3
> 
> 时间：2013-01-08T19:48:41.137
> 
> 标签：css

在css中，如何将滚动条按钮设置为逐页而不是逐行滚动？我希望滚动条按钮按页面向上/向下滚动，以便我可以更快地到达页面的底部/顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:51:20.400

您不能像那样更改浏览器滚动条。您可以在页面上添加自己的按钮，这可以借助 JavaScript 来实现。或者用户可以使用键盘上的向上/向下翻页按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:53:59.787

使用自定义滚动条替换库，例如[http://manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/)

# sharepoint - Sharepoint：无法显示视图，因为它包含的查找和工作流列数超过阈值 (8)

> ID：14222890
> 
> 赞同：6
> 
> 时间：2013-01-08T19:49:08.147
> 
> 标签：sharepoint, threshold

我的 Sharepoint 网站存在以下问题。（无法显示该视图，因为它包含的查找和工作流列的数量超过了管理员强制执行的阈值 (8)），但我在网上找到的任何解决方案都指向我在中央管理下更改 Web 应用程序设置中的节流设置。我的问题是我根本没有中央管理> Web 应用程序等...问题出现在我的文档库中，我已经探索了网站上的非常设置选项，但找不到任何关于小跑或列阈值的信息。我只有站点设置>库设置等...

在这种情况下如何增加列阈值？

我正在一个 Sharepoint 网站上工作，并且拥有 Workspace 和 Designer 2010。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T19:53:17.283

你查到的信息是正确的。您必须从服务器本身访问管理中心站点。听起来您没有登录服务器，而是使用 SPD 和工作站上的 Sharepoint 站点。如果您无权访问服务器的 RDP，则必须联系有权访问的人。

另一方面，[不建议](http://sympmarc.com/2012/07/23/sharepoints-list-view-lookup-threshold-and-why-we-dont-change-it/)增加该阈值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T18:32:44.327

应用程序管理 > 管理 Web 应用程序。在 Web 应用程序列表中，选择您需要的 Web 应用程序。然后转到常规设置 > 资源限制。在 Resource Throttling 窗口中，向下滚动到 List View Lookup Threshold 并将值更改为适合您需要的数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-23T14:39:00.310

更改此设置时要小心：

这确实对 SQL 性能有非常显着的影响。在下面的文章中，您可以看到在这些人的测试中，使用 8 并执行查询时，SQL 上的 CPU 利用率约为 7%。将其移至 10 并执行一个拉回 10 列的查询会将 CPU 利用率提高到近 40%。 [http://sympmarc.com/2012/07/23/sharepoints-list-view-lookup-threshold-and-why-we-dont-change-it/](http://sympmarc.com/2012/07/23/sharepoints-list-view-lookup-threshold-and-why-we-dont-change-it/)

您还可以在此处阅读白皮书：[http ://technet.microsoft.com/en-us/library/ff608068(office.14).aspx](http://technet.microsoft.com/en-us/library/ff608068(office.14).aspx)

# jquery - a类：悬停用于文本装饰，但不适用于颜色

> ID：14222892
> 
> 赞同：0
> 
> 时间：2013-01-08T19:49:12.617
> 
> 标签：jquery, html, css, google-chrome

我有以下 HTML 代码：

```
 <h1>No Real Purpose</h1>

    <!--Navigation menu-->
    <div id = "navBar">
        <ul>
            <li class = "navLink">
                <a href = "page 1.html">Page 1</a>
            </li>
            <li class = "navLink">
                <a href = "page 2.html">Page 2</a>
            </li>
            <li class = "navLink">
                <a href = "page 3.html">Page 3</a>
            </li>
            <li class = "navLink">
                <a href = "page 4.html">Page 4</a>
            </li>
            <li class = "navLink">
                <a href = "page 5.html">Page 5</a>
            </li>
            <li class = "navLink">
                <a href = "page 6.html">Page 6</a>
            </li>
            <li class = "navLink">
                <a href = "page 7.html">Page 7</a>
            </li>
            <li class = "navLink">
                <a href = "page 8.html">Page 8</a>
            </li>
            <li class = "navLink">
                <a href = "page 9.html">Page 9</a>
            </li>
            <li class = "navLink">
                <a href = "page 10.html">Page 10</a>
            </li>
        </ul>
    </div>
    <br />
    <br />
    <!--Main content area-->
    <div id = "main">

            <!--collapsible <div>'s-->
        <div class = "collapse">
            <h2>Heading 1 <span class = "cause">+/-</span></h2>
            <p class = "effect">
                Text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text 
            </p>
        </div>
        <br />
        <div class = "collapse">
            <h2>Heading 2 <span class = "cause">+/-</span></h2>
            <p class = "effect">
                text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text 
            </p>
        </div>
    </div>

    <!--The colorPicker I'm working on-->
    <table id = "colorPicker">
        <tr>
            <th colspan = "6">Color Picker</th>
        </tr>
        <tr>
            <td id = "blackOpt"></td> <td id = "redOpt"></td> <td id = "orangeOpt"></td> <td id = "greenOpt"></td> <td id = "indigoOpt"></td> <td id = "lightGrayOpt"></td>
        </tr>
        <tr>
            <td id = "whiteOpt"></td> <td id = "brownOpt"></td> <td id="yellowOpt"></td> <td id = "blueOpt"></td> <td id = "violetOpt"
></td> <td id = "darkGrayOpt"></td>
        </tr>
    </table>
</body>
</html> 
```

下面的 CSS 代码：

```
body
{
    margin: 0;
    background-image: url('green-clouds.jpg');
}

h1
{
    width: 100%;
    top: 0;
    background-color: rgba(240,240,240,0.5);
    margin: 0;
    text-align: center;
}
#navBar
{
    display: block;
    float: left;
    width: 100%;
    overflow: hidden;
    position: relative;
    clear: left;
    margin: 0;
}
#navBar ul
{
    width: 45%;
    clear: left;
    float: left;
    list-style: none;
    position: relative;
    left: 50%;
    text-align: center;

}

.navLink a:link
{
    text-decoration: none;
    color: red;
}

/*The code Chrome isn't registering*/
.navLink a:hover
{
    display:block;
    color:white;
}

/*The code Chrome isn't registering*/
#navBar a:visited
{
    color: black;
}

.navLink
{
    display: block;
    float: left;
    list-style: none;
    position: relative;
    margin: .5em;
    padding: 1px;
    right: 50%;
    background-color: rgba(240,240,240,0.5);
    background-size: 50%;
    border-radius: 5px;
    font-weight: bold;
}

#main
{
    display: block;
    background-size: 100%;
    width: 800px;
    margin-top: 1em;
    margin-right: auto;
    margin-left: auto;
    padding-top: 10px;
    padding-right: 20px;
    padding-bottom: 10px;
    padding-left: 20px;
}

.collapse
{
    border: 2px solid #004400;
    padding: 0px;
    margin: 0;
    width: 100%
}

.collapse h2
{
    width: 100%;
    border-bottom: 2px solid #004400;
    background-color: rgba(240,240,240,0.5);
    margin: 0;
    padding: 0;
}

.cause
{
    display: inline-block;
    position: relative;
    right: 20px;
    float: right;
    text-align: center;
    padding: 0;
    cursor: pointer;
}

.effect
{
    width: 100%;
    margin: 0;
    padding: 0;
    background-color: #004400;
    color: #F8F8F8;
}

table
{
    border: 2px solid black;
    border-collapse: collapse;
    background-color: #448844;
    color: black;
    width: 350px;
    padding: 2px;
    margin: 2px;
    position: fixed;
    bottom: 0px;
    z-index: 1px;
}

td
{
    border: 2px solid black;
    border-collapse: collapse;
    width: 50px;
    height: 50px;
}

#blackOpt
{
    background-color: black;
}

#whiteOpt
{
    background-color: #F8F8F8;
}

#redOpt
{
    background-color: #CC0000;
}

#brownOpt
{
    background-color: #664422;
}

#orangeOpt
{
    background-color: orange;
}

#yellowOpt
{
    background-color: yellow;
}

#greenOpt
{
    background-color: #004400;
}

#blueOpt
{
    background-color: blue;
}

#indigoOpt
{
    background-color: #5500FF;
}

#violetOpt
{
    background-color: purple;
}

#lightGrayOpt
{
    background-color: #BBBBBB;
}

#darkGrayOpt
{
    background-color: #444444;
} 
```

并且，下面的 jQuery 代码：

```
$(document).ready(function()
{
    //Changes the #navBar colors on mouseenter
    $('.navLink').mouseenter(function()
    {
        $(this).css('background-color', '#004400');
        $(this).closest('a:link').css('color', '#F8F8F8');
    });

    //Reverts the #navBar colors on mouseleave
    $('.navLink').mouseleave(function()
    {
        $(this).css("background-color","rgba(240,240,240,0.5)");
    });

    //Toggles the <p> closest to a +/- <span>
    $('.cause').click(function()
    {
        $(this).closest('.collapse').find('.effect').slideToggle('slow');
    });

    //Runs the colorPicker (work in progress)
    $('td').parent('#colorPicker').click(function()
    {
        var priColor = $(this).css('backgroundColor');
        $('body').css(priColor);
    });
}); 
```

我正在尝试使用颜色选择器建立一个练习网站，但这不是我目前的主要关注点。即使我为`.navLink a:link`and设置了值`.navLink a:hover`，谷歌浏览器也忽略了代码。我知道这很好，因为链接是黑色的（不是蓝色的），并且下划线消失了（感谢`text-decoration)`，它在 Firefox 和 IE9 中运行良好。问题是 Chrome。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:53:44.520

> :hover 必须在 CSS 定义中的 :link 和 :visited （如果它们存在）之后，才能有效！

试着把规则放在`:hover`你的规则之后`#navBar a:visited`。

来源：[http ://www.w3schools.com/cssref/sel_hover.asp](http://www.w3schools.com/cssref/sel_hover.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:56:39.400

代替：

[http://jsfiddle.net/6tmL3/5/](http://jsfiddle.net/6tmL3/5/)

```
 $(this).closest('a:link'); 
```

经过：

```
 $(this).find('a:link'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:57:22.507

是因为`display:block;`财产。

[http://jsfiddle.net/s46wu/](http://jsfiddle.net/s46wu/)

真诚地，我不知道为什么会这样。这可能是一个错误。

# iphone - 视图的来源混淆了我的项目

> ID：14222894
> 
> 赞同：0
> 
> 时间：2013-01-08T19:49:21.500
> 
> 标签：iphone, cocoa-touch

我有一个项目（我已经完成了）我做了一个 uialert 视图。当我启动我的应用程序并按下警报视图按钮时，警报视图来自顶部，而不是来自屏幕中间。我将视图的原点设置在中间，它可以工作，但是如果进入子视图并返回到开始视图后，警报视图会再次从左上角出现。然后我将视图的原点设置回左上角，它仍然以相同的错误模式工作（应用程序启动：好的，进入子视图并返回它是错误的）。

如果我启动我的应用程序，只需点击警报按钮它就可以正常工作（从中间出现并带有正确的动画），在我进入任何子视图之后，它会很混乱，我得到了一个 uitextfield，并且在我的子视图中也映射了。如果我单击文本字段，“|” 开始书写的符号，来自左上角，如果我想放大我的文字来纠正它，放大镜也来自左上角，这真的很烦人。如果我看地图，有一个大头针，在放大或缩小过程中大头针消失了，当我停止它时，它来自左上角或右下角。

我不知道如何解决这个问题，我的心在吹。

我试图用代码修复它：

```
skroller.layer.anchorPoint = CGPointMake(0.5, 0.5);
levels.layer.anchorPoint =  CGPointMake(0.5, 0.5); 
```

但它仍然工作错误

如果我单击视图并显示尺寸检查器，它看起来不像这样 [：](http://kepfeltoltes.hu/130108/Gbf0t_www.kepfeltoltes.hu_.png)

我没有看到 Autosize、示例和排列。例如，如果我单击属性检查器，它会出现 0.00001 sec 。

# sql - SQL Server 使用聚合函数选择

> ID：14222897
> 
> 赞同：1
> 
> 时间：2013-01-08T19:49:32.120
> 
> 标签：sql, sql-server, select

我有一个看起来像这样的表（这只是一些记录，它们也是更多列，但这些是我关心的）：

```
nbr    amt     date     
1      10      10/30/2012
1      15      1/30/2012
1      50      11/30/2012
2      10      4/30/2012
2      1000    5/30/2012
2      45      1/15/2012
4      90      12/30/2012
4      89      8/30/2012
3      100     7/30/2012 
```

我正在尝试使用 SQL Server 2012 选择与每个 nbr 的 max(amt) 对应的 nbr、amt 和日期。

到目前为止，我有这样的查询，它按 nbr 分组并选择 max(amt) 但它不会让我选择日期，因为它不在聚合函数中，但如果我把它放在聚合函数中，它会选择 max(date)这与 amt 的实际日期不对应：

```
,topamt as (
select 
                 nbr
    ,amt
    ,date
,amtrank = row_number() over (partition by ah.member_nbr order by ah.tran_amt desc)

from HISTORY ah 
      amt>=10
and id=6061
and date between '11-01-2012' and '12-31-2012' 
```

因此，如果我将查询更改为我在哪里定义它以获取 max(amt)，则结果至少不会显示最大值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:56:19.623

尝试使用排名功能：

```
with TopAmt as
(
  select *
  , amtRank = row_number() over (partition by nbr order by amt desc)
)
select nbr
  , amt
  , date
from TopAmt
where amtRank = 1 
```

# c++ - 异常传播和 std::future

> ID：14222899
> 
> 赞同：15
> 
> 时间：2013-01-08T19:49:38.563
> 
> 标签：c++, multithreading, c++11, visual-studio-2012, future

我的理解是，当异步操作抛出异常时，它会被传播回调用`std::future::get()`. 但是，当这样的线程调用`std::future::wait()`时，异常不会立即传播——它会在随后调用`std::future::get()`.

`std::future::wait()`但是，在这种情况下，如果未来对象在调用 之后但在调用之前超出范围，那么这种异常应该发生什么`std::future::get()`？

对于那些感兴趣的人，这里是一个简单的例子。在这种情况下，异常由 thread/future 包静默处理：

```
#include "stdafx.h"
#include <thread>
#include <future>
#include <iostream>

int32_t DoWork( int32_t i )
{
    std::cout << "i ==  " << i << std::endl;
    throw std::runtime_error( "DoWork test exception" );
    return 0;
}

int _tmain(int argc, _TCHAR* argv[])
{
    auto f = std::async( DoWork, 5 );
    try
    {
        //f.get();     // 1 - Exception does propagate.
        f.wait();      // 2 - Exception does NOT propagate.
    }
    catch( std::exception& e )
    {
        std::cout << e.what() << std::endl;
        return -1;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-08T20:19:06.663

它被忽略和丢弃，就像你想要`wait()`一个价值但从来没有`get()`它一样。

`wait()`简单地说“阻塞，直到未来准备好”，准备好一个值或异常。`get()`实际值（或异常）取决于调用者。通常你只会使用`get()`，无论如何它都会等待。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-16T10:24:13.540

vs2012\vc11\crt\future.cpp

有一个错误

```
static const char *const _Future_messages[] =
{   // messages for future errors
"broken promise",
"future already retrieved",
"promise already satisfied",
"no state"
}; 
```

此代码生成对“_Future_messages”的无效访问权限，因为 _Mycode.value() 返回 4。

```
 const char *__CLR_OR_THIS_CALL what() const _THROW0()
    {   // get message string
    return (_Get_future_error_what(_Mycode.value()));
    } 
```

// 代码示例

```
 std::future<int> empty;
try {
    int n = empty.get();
} catch (const std::future_error& e) {
   const error_code eCode = e.code();
   char *sValue = (char*)e.what();
   std::cout << "Caught a future_error with code " << eCode.message()
              << " - what" << sValue << endl;
} 
```

# c# - SQL LIKE 查询到 C# 代码

> ID：14222900
> 
> 赞同：2
> 
> 时间：2013-01-08T19:49:46.003
> 
> 标签：c#, sql

我需要在我的 C# 代码中使用以下查询：

```
SELECT AVG(Percent) 
From Table1
Where code Like "Sport" and Year Like"2011" and Sitting Like"June"; 
```

我是这样做的：

```
"SELECT AVG(Percentage) FROM MasterTable WHERE Code LIKE " + comboBoxSubject.Text +
"AND Year LIKE "+dateTimePicker1 +" AND Sitting LIKE June" 
```

但我得到一个例外可能是因为参数是从不同的控件中提取的并且没有放在引号中。

谁能帮我 ？

### 回答

这是对我有用的查询：

```
"SELECT AVG(Percent) FROM MasterTable WHERE Code LIKE '" + comboBoxSubject.Text + "' AND Year LIKE '" + dateTimePicker1.Value.Year + "' AND Sitting LIKE 'June'" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T19:57:54.827

假设您使用 SQLite，因为您没有提及任何数据库。这就是避免 SQL 注入的方法。

```
var selectCommand = new SQLiteCommand("@SELECT AVG (PERCENT) 
                                       FROM TABLE1
                                       WHERE CODE LIKE @sport AND YEAR LIKE @year AND SITTING LIKE @month");
selectCommand.Parameters.AddWithValue("@sport", sportParameter);
selectCommand.Parameters.AddWithValue("@year", yearParameter);
selectCommand.Parameters.AddWithValue("@month", monthParameter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-17T22:12:02.013

存在三个问题。

*   代码值和 AND 后没有空格
*   值之间缺少单引号
*   SQL LIKE 语句中缺少通配符 (%)

这取决于您正在从事哪种项目，但我经常发现通过打印最终查询来发现语法错误和缺少空格要容易得多。例如，下面是执行此操作的控制台应用程序。

```
static void Main(string[] args)
{
    const string code = "Sport";
    const string year = "2011";
    Console.WriteLine("SELECT AVG(Percentage) FROM MasterTable WHERE Code LIKE '%" + code + "%' AND Year LIKE '%" + year + "%' AND Sitting LIKE '%June%'");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T19:56:15.453

使用`%`and`'`请**考虑**使用[参数](http://msdn.microsoft.com/en-us/library/yy6y35y8%28v=VS.80%29.aspx)：

```
SELECT AVG(Percentage) FROM MasterTable WHERE (Code LIKE '%' + @text + '%') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T19:56:45.133

对字符字段使用单引号。

```
"SELECT AVG(Percentage) FROM MasterTable WHERE Code LIKE '" + comboBoxSubject.Text +
        "' AND Year LIKE '" + dateTimePicker1 + "' AND Sitting LIKE 'June'" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-18T16:02:07.793

```
MySqlCommand cmd = new MySqlCommand("SELECT Employee_No, Image, Last_Name, First_Name, Middle_Name, Suffix, Sex, Birthdate, Contact_No, Address, Username FROM user_tbl WHERE Employee_No LIKE '%" + searchemployeeno + "%' OR Last_Name LIKE '%" + searchemployeeno + "%' ", SQLConn.conn); 
```

# .net - WCF 无文件激活元数据

> ID：14222901
> 
> 赞同：0
> 
> 时间：2013-01-08T19:49:51.430
> 
> 标签：.net, wcf

我正在编写一个 WCF 服务，尝试在 .NET 4.0 中引入的无文件激活。我试图让服务返回 WSDL，虽然我以非常基本的方式配置了 web.config，但我无法让服务发出 WSDL。?wsdl 和 ?singlewsdl 只返回正常的服务页面而不是 WSDL。

我为此使用 .NET 4.5

```
<configuration>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="ods">
        <endpoint address="localhost" binding="basicHttpBinding" 
          contract="co.ods" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"><!--aspNetCompatibilityEnabled="true"--> 
      <serviceActivations>
        <add relativeAddress="ods.svc" service="co.ods" />
      </serviceActivations>
    </serviceHostingEnvironment>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <directoryBrowse enabled="true" />
  </system.webServer>
</configuration> 
```

我认为配置存在问题，但我似乎找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:03:58.447

我发现了这个问题——我`ServiceContract`的界面上没有，也没有将方法定义为`OperationContract`项目。简单的错误。我不想删除帖子来帮助犯同样错误的人。

# windows-phone-8 - WP8 中 GZIPSTREAM 的替代品

> ID：14222903
> 
> 赞同：3
> 
> 时间：2013-01-08T19:49:52.907
> 
> 标签：windows-phone-8, gzipstream

我正在开发一个 WP8 应用程序，该应用程序使用与 WP6 应用程序共享的 Web 服务。这个 Web 服务使用 GZipStream 来压缩通信的答案。

现在看来WP8不支持这种压缩方式

有人知道我如何仍然可以解压缩和压缩返回的流吗？

我已经在网上搜索了 2 天，但我没有找到这个问题的答案。

我现在看到的唯一方法是在生产中消除两侧的压缩，这不是我的意思

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T23:41:47.783

使用 Morten 的[SharpGIS.GZipWebClient](http://nuget.org/packages/SharpGIS.GZipWebClient)在 WP7/WP8 上进行 GZip WebRequests。[在此处](http://www.sharpgis.net/post/2011/08/28/GZIP-Compressed-Web-Requests-in-WP7-Take-2.aspx)阅读更多相关信息。

```
WebRequest.RegisterPrefix("http://", SharpGIS.WebRequestCreator.GZip);
WebRequest.RegisterPrefix("https://", SharpGIS.WebRequestCreator.GZip); 
```

# domain-driven-design - 领域驱动设计混乱

> ID：14222906
> 
> 赞同：0
> 
> 时间：2013-01-08T19:49:59.140
> 
> 标签：domain-driven-design

我正在学习 DDD 概念并加强我的理解，我正在研究一些现实世界的例子。

我知道聚合应该只有一个通过根实体的入口点，聚合应该只有一个存储库（如果我完全理解错误，请纠正我）

现在假设有特定类型的消耗品，这些消耗品是从配送中心发送的。发送特定类型的消耗品取决于它们的数量，我的意思是，如果其中一位消费者的 A 型和 B 型的评论数量为 10，并且这些物品数量低于 10，那么配送中心会发送 A 型和 B 型消耗品。在这里，发送者和消费者都想跟踪发送的包裹在哪里，或者它是否已经交付或发送。

所以在这里，作为实体，我们有：

1.  消耗品
2.  消耗品类型
3.  ConsumableActivity
4.  包裹
5.  包裹物品
6.  消费者

我对前三个实体感到困惑：哪个应该是聚合根？乍一看，消耗品似乎是一个强有力的候选者，但另一方面，我们并不关心每一个消耗品，我们只对它们的数量感兴趣。我们没有记录 10 种不同的 A 类消耗品，而只有一个 A 类记录，其数量根据活动而变化。在这一点上，Consumable 实体似乎是多余的，仅通过查看活动我们就可以得出数量。例如从头开始：

1.  中心创造“A型”10
2.  中心创造“B型”20
3.  中心发送“Type A” 5 ConsumerId=25
4.  中心发送“Type B”15 ConsumerId=25
5.  ConsumerId=25 接收“A 型” 5
6.  ConsumerId=25 接收“B型” 15
7.  ConsumerId=25 消费“A 型” 3
8.  ConsumerId=25 消费“B型”1
9.  ConsumerId=25 消费“A 型”2

在这里，我们可以得出，中心有 5 个 A 型和 B 型消耗品，而现在 id 为 25 的消费者有 0 个 A 型和 14 种 B 型消耗品。

当然这不是一个有效的方法，因为在有更多的活动之后，需要一些时间来得出消耗品的数量，因此对于消费者和配送中心的每种消耗品类型都应该有一个静态数量字段，我们可以在其中阅读当前数量一次。

我希望你明白我为什么感到困惑，消耗品实体看起来像一个根实体，但实际上它并不适合成为一个根实体，如果它也不是一个实体的话。

谁能建议我对此设计进行一些改进或进一步阅读建议，这些建议不仅限于客户-产品-订单-订单的噩梦吗？

* * *

编辑：与 Consumable 和 ConsumableType 有什么关系？如果我想对 ConsumableType 进行 CRUD 操作（让用户添加新类型、更改或删除它们）但根实体是 Consumable 怎么办。为了 DDD 保持数据完整性，我们不应该加载根实体存储库以外的任何存储库。

编辑 2：考虑 Product 实体及其 Category 实体。产品似乎是根实体，但我们知道产品不能没有类别而存在。那么类别实体是根吗？如果是这样，根据 DDD 规则，我们只能通过遍历来访问产品。但在我们的上下文中，产品是我们关注的焦点。然后假设我们有两个聚合：Product Aggregate 和 Category Aggregate。但是这次我们违反了数据完整性，因为可以删除一个类别而不删除具有该类别的产品。所以我很困惑，找不到合适的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:26:25.547

> 我对前三个实体感到困惑：哪个应该是聚合根？

我要说的是，您的聚合很可能是 Package，即使这个示例有可能被拆分为两个或多个单独的有界上下文。（创造和订单履行是自然界限）

> 与 Consumable 和 ConsumableType 有什么关系？

这取决于您的有界上下文。除了由“A”或“B”指定之外，在不了解 ConsumableType 的情况下，我不得不说它很可能是 Consumable 的值对象。

> 如果我想对 ConsumableType 进行 CRUD 操作（让用户添加新类型、更改或删除它们）但根实体是 Consumable 怎么办？

这很可能是完全不同的有界上下文（某个经理的上下文或不属于我们正在建模的一般工作流程的内容），建议对此上下文进行更多调查。

**[不同的例子]**

> 那么类别实体是根吗？

聚合根是上下文中的用户与之交互的内容。假设很多，因为您没有完全解释此示例中的上下文，很可能 Product 是聚合根，因为这是用户最关心的。与上面的示例相同，Product 将有一个存储库，该存储库会将其分配的类别加载给它。在这种情况下，加载类别或层次结构列表最好由域服务提供，因为它不属于任何特定的实体实例。

**[另一个例子]**

> 在您的第一种情况下，例如系统管理员如何列出所有可用的字体颜色或添加新字体颜色？

同样，系统管理员的上下文与选择字体颜色的用户的上下文不同。请记住，每个上下文都是一个工作流。在复杂的工作流中，同一上下文中可以有多个用户，但对于管理员可能执行的 CRUD 操作等简单的工作流，通常这种类型的工作流只有一个角色。在系统管理员下，AvailableFontColor 可能是在内容装饰选项管理有界上下文中具有颜色值属性的实体。

> 谁能建议我对此设计进行一些改进或进一步阅读建议，这些建议不仅限于客户-产品-订单-订单的噩梦吗？

我建议您更多地了解有界上下文以及为什么它们是您在建模业务领域时最有用（有时也是最阻碍）的工具之一。此外，不要期望在一周内将其完善为一门科学。

8 年多来，我一直在使用各种技术对软件进行建模，但有时我仍然无法确定我是否正确地建模了某些东西。我认为 DDD 的最大好处之一是它鼓励您接受这样一个事实，即您可能不会从一开始就正确建模，因此您应该更容易地更改模型并经常重构，因为您更多地了解您的领域，而不是而不是仅仅使用你所拥有的并最终在你的原始模型周围产生 15 个不同的令人费解的结块，因为你从一开始就没有完全理解这个领域。

# java - 石英从多日失火中恢复

> ID：14222909
> 
> 赞同：4
> 
> 时间：2013-01-08T19:50:16.940
> 
> 标签：java, quartz-scheduler

我第一次尝试设置 Quartz，如果我不理解某些内容，请原谅我。我想知道完成以下任务的最佳方法是什么：

如何设置必须运行每日电子邮件报告的作业，并且还能够从错过的触发器中恢复，以便：1) 作业知道触发器应该在哪一天触发。2) 如果（上帝保佑）服务器宕机 3 天，Quartz 将通过连续运行三天错过的时间来恢复，同时通知作业每个作业代表的日期。（执行顺序并不重要，只要我知道每个代表的日子）

现在我只是在做：

```
Trigger trigger = newTrigger() 
.withIdentity("dailyTrigger", "scheduledReportEmail") 
.startNow() 
.withSchedule(dailyAtHourAndMinute(0, 5) .withMisfireHandlingInstructionFireAndProceed()) 
.build(); 
```

无论错过多少天，这似乎只能通过运行一次来​​恢复。那是对的吗？

我想到的一种方法基本上是在第 1-31 天设置 31 个每日触发器。笨重.. 那些额外的日子在二月会发生什么？这是最好的方法吗？

我还有每周和每月的触发因素要处理，但我认为如果我们停工三周，那么我们有更大的事情要担心:)

感谢您的任何建议....

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T20:04:08.857

您的用例非常标准，并且受到 Quartz 的支持。您只需要“*忽略失火*”政策：

```
Trigger trigger = newTrigger() 
  .withIdentity("dailyTrigger", "scheduledReportEmail") 
  .withSchedule(dailyAtHourAndMinute(0, 5)
  .withMisfireHandlingInstructionIgnoreMisfires()) 
  .build(); 
```

这基本上意味着：我不在乎触发器是否失灵，只需尽快运行它（最有可能在应用程序启动时）。

要确定给定触发器何时运行（计划时间与当前时间相对），请在您的作业中运行：

```
void execute(JobExecutionContext context) {
  final Date scheduled = context.getScheduledFireTime()
  //...
} 
```

# 也可以看看

*   [上次实际火灾时间和预定火灾时间之间的差异](https://stackoverflow.com/questions/12249994)
*   [使用带有 MisfireHandlingInstructionIgnoreMisfires 的石英时出现问题](https://stackoverflow.com/questions/11419008)
*   [*Quartz 调度器失火指令解释*](http://nurkiewicz.blogspot.no/2012/04/quartz-scheduler-misfire-instructions.html)——我的文章描述了各种失火指令

# html - Struts2 文件上传在生产中不起作用，但在本地开发中起作用

> ID：14222910
> 
> 赞同：1
> 
> 时间：2013-01-08T19:50:16.863
> 
> 标签：html, tomcat, file-upload, struts2

我正在尝试创建一个具有文件上传功能的网页。

文件上传.jsp

```
<%@taglib prefix="s" uri="/struts-tags"%>

<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>file upload Page</title>
</head>
<body bgColor="lightBlue">
     <s:form action="fileUpload" method="post" enctype="multipart/form-data" >
        <s:file name="userTmp" label="File" />
        <br/>
        <s:submit value="uploadFile"/>
    </s:form>
</body>
</html> 
```

Struts.xml

```
<package name="upload" namespace="/FileUpload" extends="struts-default">
        <action name="fileUpload" class="FileUploadAction">
            <result name="success">success.jsp</result>
            <result name="error">error.jsp</result>
        </action>
</package> 
```

文件上传动作.java

```
public class FileUploadAction  extends ActionSupport{

    private File userTmp;

    private String userTmpContentType;

    private String userTmpFileName;

Connection conn = null;

    public String execute() throws Exception
    {
           String result = ERROR;
           try {  
               Class.forName("com.mysql.jdbc.Driver").newInstance();
               conn= DriverManager.getConnection(".....");  

               System.out.println("DATABASE CONNECTED");  
               String sql = "insert into Evidence(Filename, FileType, FileContent,DateSubmitted) values(?, ?, ?, now())";
                   PreparedStatement pstmt = conn.prepareStatement(sql);  
                   FileInputStream fis = new FileInputStream(userTmp); 
                   pstmt.setString(1, userTmpFileName);
                   pstmt.setString(2, userTmpContentType);
                   pstmt.setBinaryStream(3, fis, (int)userTmp.length()); 
                   pstmt.executeUpdate(); 
                   pstmt.close(); 
                   fis.close(); 
                   result = SUCCESS;
             }             
             catch (Exception e) {  
                 e.printStackTrace();  
             }
             finally  
             {  
                 conn.close();  
             }  

          return result;
    }

    public File getUserTmp() {
        return userTmp;
    }

    public void setUserTmp(File userTmp) {
        this.userTmp = userTmp;
    }

    public String getUserTmpContentType() {
        return userTmpContentType;
    }

    public void setUserTmpContentType(String userTmpContentType) {
        this.userTmpContentType = userTmpContentType;
    }

    public String getUserTmpFileName() {
        return userTmpFileName;
    }

    public void setUserTmpFileName(String userTmpFileName) {
        this.userTmpFileName = userTmpFileName;
    }

} 
```

当我在本地 tomcat 服务器上运行它时，它工作正常。

但是当我将它部署在不同的 tomcat 服务器上时，它给出了这个错误：

```
No result defined for action FileUploadAction and result input 
```

我尝试在 FileUploadAction 类的执行方法中不做任何事情，只返回 SUCCESS。但它抛出了同样的错误。

经过一些代码调试后，我发现这是因为 enctype="multipart/form-data"。我用不同的enctype修改了FileUpload.jsp页面并删除了`<s:file>`jsp页面中的标签，它没有给出任何错误。

似乎很奇怪，为什么它在我的本地 tomcat 服务器上工作，但在不同的服务器上却没有。我是否应该更改 tomcat 服务器中的任何内容以使 encype="multipart/form-data" 正常工作...

# android - 基于云的安卓开发

> ID：14222913
> 
> 赞同：9
> 
> 时间：2013-01-08T19:50:29.340
> 
> 标签：android, ide, cloud, aide-ide

谁能推荐一个好的基于云的 IDE 用于 Android 开发？

我在我的桌面上使用 Eclipse/ADT，在我的 Android 设备上使用 AIDE，但是同步这两者很麻烦。

如果没有可用的，有人会推荐使用 AIDE 的高级功能在 GIT 上托管我的应用程序吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T20:29:55.843

我从来没有找到一个好的基于云的 Android IDE，但这就是我所做的（对于任何从谷歌获得这个的人的想法）。这适用于 Windows、Linux 和（我认为）Mac。如果这适用于您在 Mac 上，请确认其他人。

**桌面（带 Eclipse）：**

*   设置 Dropbox
*   创建一个新的 Android 应用程序项目。
*   取消选中“在工作区中创建项目”选项，并将位置更改为您的 Dropbox 文件夹

**安卓（带助手）：**

*   设置 Dropbox 同步

这里的所有都是它的。只要您在从桌面切换到 Android 设备之前确保您拥有 Dropbox，反之亦然，您基本上拥有一个免费的、基于云的 Android IDE，可以从桌面或 Android 设备进行开发。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T15:53:09.730

这是我在 android 上为 android 开发的工作流程：

使用 android sdk、ant、Ivy 或新的 Gradle 设置，使用 aws ec2 服务器或其他免费/便宜的 Cloud Server svc 设置 android 构建服务器。

在该机器上设置 dropbox Headless Install。

在该机器上设置一个 Git 存储库，将存储库放在主 Dropbox 目录中。

```
 ---Home  
          ---(User)  
            ---Dropbox
              ---Repos
                ---App#1 
```

在应用程序仓库所在的目录上设置 inotifywait ....

```
 inotifywait -mr -e ATTRIB /home/user/Dropbox/path/to/repo/ |

    while read dir ev file;
    do
    cd /home/user/Dropbox/path/to/repo;
    git pull;
    git add .;
    git commit -m " something regarding code has changed. check .... for more info";
    git push;
    buildscript; 
```

在您的 Android 平板电脑上安装 Dropbox

在您的选项卡上安装文本/代码编辑器，例如.....920 文本编辑器。

所以现在当你在你的选项卡 dropbox 上进行代码更改时，它显然会同步它，并且同步是一个属性事件将触发一堆脚本......git Stuff 和 Build 东西以及你想要的任何其他脚本。

构建脚本创建的最终 apk 将保存到您的应用程序项目目录中，该目录位于您的 Dropbox 中，因此在您的选项卡上安装/测试是无缝的，您可以通过 dropbox 与他们共享该文件夹让其他人测试您的 Apk

将代码挂钩到 Git 存储库是很酷的 B/c，您可以使用 cloudbees 之类的服务来构建和测试您的 apk。以及，将 Apk 发送给分销商和其他很酷的服务。

# vb.net - 尝试更新访问数据库时 UPDATE 语句失败 - VB.Net

> ID：14222915
> 
> 赞同：1
> 
> 时间：2013-01-08T19:50:45.767
> 
> 标签：vb.net, ms-access

我正在尝试使用 VB.Net 前端和`Access 2003`后端为自己创建一个简单的票务软件。我允许添加新行，但是当我尝试对 Update row 进行编码时`button`，它给了我一个错误，说`Microsoft JET Database Engine - Syntax error in UPDATE statement.`我找不到问题所在。

```
Private Sub btnUpdate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnUpdate.Click
    Dim da As New OleDbDataAdapter
    Dim dt As New DataTable
    Dim ConnectString As String = ("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Documents and Settings\aaron-pister\Desktop\New Role Notes\Issue Tracker Express\Issue Tracker Express\Issue Tracker.mdb")
    Dim con As New OleDbConnection(ConnectString)
    con.Open()
    Dim Green42 As String = "UPDATE Issues Basic Details SET [Company Name] = '" & txtClientName.Text & "', [Status] = '" & cbStatus.Text & "', [Company Contact] = '" & txtClientContact.Text & "', [Description] = '" & txtDesc.Text & "', [Notes] = '" & txtRes.Text & "' WHERE [TicketNum] = '" & txtTicket.Text & "'"
    'con.Open()
    If txtClientName.Text <> "" Then
        Try
            'MyCom.CommandText = "UPDATE [Issues Basic Details] SET Company Name = '" & txtClientName.Text & "', Status = '" & cbStatus.Text & "', Company Contact = '" & txtClientContact.Text & "', Description = '" & txtDesc.Text & "', Notes = '" & txtRes.Text & "' WHERE TicketNum = '" & txtTicket.Text & "')"
            da = New OleDbDataAdapter(Green42.ToString, ConnectString)
            da.Fill(dt)
            da.Update(EsInfo1, "Issues Basic Details")
            MsgBox("Your record has been updated successfully.", MsgBoxStyle.DefaultButton1, "New Ticket Submitted")
        Catch ex As Exception
            MsgBox(ex.Source & "-" & ex.Message)
            con.Close()
            Exit Sub
        End Try
    Else
        MsgBox("You must have an entry in the Client Name, Client Contact and Status fields. It is recommended to also have a value in the Description field.", MsgBoxStyle.OkOnly, "Issue Tracker Express")
        btnNewIncident_Click(sender, e)
        Exit Sub
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:54:20.510

您的表名也必须用括号括起来：

```
Dim Green42 As String = "UPDATE [Issues Basic Details] SET [Company Name]..." 
```

此外，[使用参数](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter.aspx)而不是将值放入字符串中。它避免了 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:54:51.220

这：

```
UPDATE Issues Basic Details SET ... 
```

不是有效的 SQL。您需要通过限定您的表名来帮助它：

```
UPDATE [Issues Basic Details] SET ... 
```

其他一些建议：

1.  使用准备好的语句（参数化你的 SQL 以避免 SQL 注入攻击）
2.  不要在单击事件处理程序中定义这种类型的行为——有一个帮助类来完成这项工作，这样它就可以被重用并且不直接耦合到 UI。
3.  使用`Using`语句。你的`OleDbConnection`班级实现了`IDisposable`. 您没有正确处理此连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:55:14.643

虽然目前很难阅读您的代码，但看起来您确实正在尝试执行“AdHoc”查询，这可能会导致很多问题。

我建议首先将您的语句更改为[参数化查询](https://stackoverflow.com/questions/1851341/how-to-create-parameterized-queries-in-vb-net)，以帮助诊断问题。

# delphi - Delphi XE3 DBXJSON 问题

> ID：14222920
> 
> 赞同：3
> 
> 时间：2013-01-08T19:51:19.893
> 
> 标签：delphi, delphi-xe3, datasnap, dbxjson

我们让 Datasnap 服务器与 Delphi XE2 一起工作，但现在我们升级到 Delphi XE3，出现了以下问题：

例如，此函数接收 JSON 并返回它。

```
function TServerMethods1.Json(Obj: TJSONObject): String;
begin
   Result:= Obj.ToString;
end; 
```

如果您提出如下请求：

```
http://localhost:8080/datasnap/rest/TServerMethods1/Json/{“inode”:”221”,”itdmov”:”22”} 
```

在 Delphi XE2 中：{"result":["\"{\u201Cinode\u201D:\u201D221\u201D,\u201Ditdmov\u201D:\u201D22\u201D}\""]}

在 Delphi XE3 中：{“错误”：“模块 'Project1.exe' 中地址 00660588 的访问冲突。读取地址 49F99879”}

我希望有人可以帮助我们解决这个问题，因为我们有数百个接收 TJSONObject 的函数并且它们都显示错误。

谢谢

# sql - 返回 Oracle 中正则表达式的所有匹配项

> ID：14222927
> 
> 赞同：4
> 
> 时间：2013-01-08T19:51:47.987
> 
> 标签：sql, regex, oracle, oracle11g, oracle11gr2

我有一个表，其中包含一个名为 COMMANDS 的 VARCHAR2 列。

此列中的数据是一堆难以阅读的 ZPL 代码，它们将被发送到标签打印机，并且在 ZPL 中有几个 {TABLE.COLUMN} 形式的令牌。

我想要一个在 COMMANDS 中找到的所有不同 {TABLE.COLUMN} 标记的漂亮列表。我编写了以下正则表达式来匹配令牌格式：

```
SELECT REGEXP_SUBSTR(COMMANDS,'\{\w+\.\w+\}') FROM MYTABLE; 
```

正则表达式有效，但它只返回每行第一个匹配的标记。有没有办法返回每一行的所有正则表达式匹配？

我正在使用 Oracle 11GR2。

编辑 - 这是来自单行的一小部分数据样本 - 每行中有许多这样的行：

```
^FO360,065^AEN,25,10^FD{CUSTOMERS.CUST_NAME}^FS
^FO360,095^AAN,15,12^FD{CUSTOMERS.CUST_ADDR1}^FS 
```

因此，如果这是表中唯一的行，我想返回：

```
{CUSTOMERS.CUST_NAME}
{CUSTOMERS.CUST_ADDR1} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T20:20:41.277

您提供的数据样本表明这是单行，但已将其显示为两个不同的行。所以这个例子基于你的话。

```
 -- Sample of data from your question + extra row for the sake of demonstration
 -- id column is added to distinguish the rows(I assume you have one)
  with t1(id, col) as( 
    select 1, '^FO360,065^AEN,25,10^FD{CUSTOMERS1.CUST_NAME}^FS^FO360,095^AAN,15,12^FD{CUSTOMERS1.CUST_ADDR1}^FS' from dual union all
    select 2, '^FO360,065^AEN,25,10^FD{CUSTOMERS2.CUST_NAME}^FS^FO360,095^AAN,15,12^FD{CUSTOMERS2.CUST_ADDR2}^FS' from dual
  ),
  cnt(c) as(
    select level
      from (select max(regexp_count(col, '{\w+.\w+}')) as o_c
              from t1
            ) z
     connect by level <= z.o_c
  )
  select t1.id, listagg(regexp_substr(t1.col, '{\w+.\w+}', 1, cnt.c)) within group(order by t1.id) res
    from t1
   cross join cnt
   group by t1.id 
```

结果：

```
 ID   RES
    ---------------------------------------------------------
     1   {CUSTOMERS1.CUST_ADDR1}{CUSTOMERS1.CUST_NAME}
     2   {CUSTOMERS2.CUST_ADDR2}{CUSTOMERS2.CUST_NAME} 
```

根据@a_horse_with_no_name对该问题的[评论](https://stackoverflow.com/q/14222927/997660)，实际上，只需替换与该模式不匹配的所有其他内容要简单得多。这是一个例子：

```
 with t1(col) as(
    select '^FO360,065^AEN,25,10^FD{CUSTOMERS.CUST_NAME}^FS^FO360,095^AAN,15,12^FD{CUSTOMERS.CUST_ADDR1}^FS' from dual
 )
 select regexp_replace(t1.col, '({\w+.\w+})|.', '\1') res
  from t1 
```

结果：

```
RES
-------------------------------------------
{CUSTOMERS.CUST_NAME}{CUSTOMERS.CUST_ADDR1} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T19:56:16.170

我认为没有。您应该编写一些 PL/SQL 来获取其他匹配的令牌。我对您的最佳建议是使用流水线功能。

首先，创建一个类型：

```
create type strings as table of varchar2(200); 
```

然后是函数：

```
CREATE OR REPLACE function let_me_show
return strings PIPELINED as
   l_n number;
   l_r varchar2(200);
begin
   for r_rec in
      ( SELECT commands
        FROM MYTABLE )
   loop
      l_n := 1;
      l_r := REGEXP_SUBSTR(r_rec.COMMANDS,'\{\w+\.\w+\}', 1, l_n);
      while l_r is not null
      loop
         pipe row(l_r);
         l_n := l_n + 1;
         l_r := REGEXP_SUBSTR(r_rec.COMMANDS,'\{\w+\.\w+\}', 1, l_n);         
      end loop;       
   end loop;
end; 
```

现在您可以使用该函数返回结果：

```
select *
from table(let_me_show()) 
```

# osx-mountain-lion - 使用自制软件和安装程序安装 gfortran 会产生冲突吗？

> ID：14222930
> 
> 赞同：3
> 
> 时间：2013-01-08T19:51:53.580
> 
> 标签：osx-mountain-lion, homebrew, gfortran

我正在按照在线教程使用自制软件安装一些 Python 模块，其中一个步骤是使用`brew install gfortran`. 后来，我尝试使用另一个第三方安装脚本来安装一些 Python 模块，事后我意识到脚本所做的部分工作是下载并运行[http://r.research.att.com/tools/gcc- 42-5666.3-darwin11.pkg](http://r.research.att.com/tools/gcc-42-5666.3-darwin11.pkg)。我对 gfortran 了解不多，但是查看 gfortran[的 brew 公式，](https://github.com/mxcl/homebrew/blob/master/Library/Formula/gfortran.rb)似乎 brew 使用的版本与 att.com 不同。这会不会导致未来出现问题？我做了`brew uninstall gfortran`并且`brew install gfortran`再次，到目前为止，事情似乎是一样的（我尝试重新编译我之前编译的旧代码），但我不确定 att.com pkg 做了什么。（如果重要的话，我有 OS X 10.8.2 和 XCode 4.2）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:08:21.117

这取决于其他 gfortran 安装程序的位置。一般来说，不，它不会冲突。* Homebrew 旨在与第三方`gfortran`安装兼容 - 它定义了对通用“fortran”编译器的依赖关系，而不是特定的`gfortran`Homebrew 公式。Homebrew 保留在 /usr/local 下，将主要安装粘贴在 /usr/local/Cellar 中，并明智地将符号链接到 /usr/local/lib。安装到 /usr/local 的其他安装程序只会阻止 Homebrew 将其自己的编译器链接到其中，但会与使用 fortran 编译器的其他公式一起使用。（假设`gfortran`构建选项是兼容的。）

您链接到的特定 gcc-42 安装程序安装到`/usr`，而不是`/usr/local`.** 并且其二进制文件后缀为“-4.2”；也就是说，它会安装`cpp-4.2`、`g++-4.2`、`gfortran-4.2`等。所以 a) 与 Homebrew gfortran 没有直接冲突，并且 b) 它不会直接影响`/usr/local/bin/gfortran`Homebrew 安装的内容。

安装这两个 gfortrans 构建的东西会选择哪个编译器取决于构建的工作方式，但大多数人会寻找普通`gfortran`的，所以会找到 Homebrew 的，除非你明确地将它们定向到 AT&T 提供的一个。您没有指定如何构建事物，但由于您使用的是 brew，我假设它是通过`brew`或命令行工具，在这种情况下，我认为他们都可能看到 Homebrew gfortran 并忽略了这个。查看他们构建过程的详细输出以确定确定。

* * *

*当然取决于您所说的“冲突”。

**旁注：AFAIK 没有简单的方法可以通过查看包或安装管理器来解决这个问题。我只是`find /usr`在运行该安装程序之前和之后做了一个`diff`，并对输出做了一个：

```
$ diff usr_before_any_installs.txt usr_after_att_install.txt | grep '^[<>]'
> /usr/bin/c++-4.2
> /usr/bin/cpp-4.2
> /usr/bin/g++-4.2
> /usr/bin/gcc-4.2
> /usr/bin/gfortran-4.2
> /usr/bin/i686-apple-darwin11-cpp-4.2.1
> /usr/bin/i686-apple-darwin11-g++-4.2.1
> /usr/bin/i686-apple-darwin11-gcc-4.2.1
> /usr/bin/i686-apple-darwin11-gfortran-4.2.1
> /usr/include/gcc
> /usr/include/gcc/darwin
> /usr/include/gcc/darwin/4.2
... 
```

# maven - Maven从父POM继承属性

> ID：14222931
> 
> 赞同：10
> 
> 时间：2013-01-08T19:51:57.453
> 
> 标签：maven, inheritance, maven-3

我正在尝试查找从父 POM 继承的元素的权威列表。基于[此页面](https://support.sonatype.com/entries/20914757-how-does-maven-project-inheritance-work)

> 当您继承 POM 时，您可以选择使用继承的 POM 信息或选择性地覆盖它。以下是 Maven POM 从其父 POM 继承的项目列表：
> 
> *   标识符（必须覆盖 groupId 或 artifactId 中的至少一个。）
> *   依赖关系
> *   开发者和贡献者
> *   插件列表
> *   报告列表
> *   插件执行（具有匹配 id 的执行被合并）
> *   插件配置

但是当我在我的一个项目中看到有效的 POM 时，我看到它也继承了`inceptionYear`，`description`（这是一个问题，这应该是对包含它的 POM 的描述，而不是它的子项。所有子项都有描述的意义何在像“所有 POM 的根源”）

那么是否有一个实际的列表或者它只是继承了父 pom 的所有内容？我在工件的清单中使用了其中一些属性，所以我想添加有意义的值

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T13:19:36.463

子 pom 继承父 pom 的所有内容。如果您需要在子 pom 中设置有意义的值，那么您将需要覆盖父 pom 中的值。

从文档：

> 当一个项目指定一个父项目时，Maven 在读取当前项目的 POM 之前使用该父 POM 作为起点。它继承了所有内容，包括 groupId 和版本号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-20T22:23:34.677

来自父 POM 的大多数元素都由其子代[继承。](https://maven.apache.org/pom.html#Inheritance)两个不被继承的元素是 artifactId 和 name。（此外，任何明确设置为`<inherited>`false 的插件）

# ios - 如何根据在 iOS 的 UITableView 中选择的单元格将对象插入 NSMutableArray？

> ID：14222934
> 
> 赞同：0
> 
> 时间：2013-01-08T19:52:04.430
> 
> 标签：ios, uitableview, nsmutablearray

我有一个`UITableViewController`，`UITableView`它的单元格通过`accessoryView`. 这些按钮可以`selected/deselected`在用户点击它们时出现。它`table`本身由`NSMutableArray`包含多个`NSString`参数的对象组成，“名称”参数显示在表中。

我现在要做的是在选择按钮时，将`OBJECT`链接到相应`"name"`参数的相应链接添加到`NSMutableArray`. 用户没有选择单元格，而是单击了附加到单元格的按钮。

这是我在每个中`selects/deselects`的方法：`button``cell`

```
-(void)buttonTouched:(id)sender
{
    UIButton *btn = (UIButton *)sender;

    if( [[btn imageForState:UIControlStateNormal] isEqual:[UIImage imageNamed:@"CheckBox1.png"]])
    {
        [btn setImage:[UIImage imageNamed:@"CheckBox2.png"] forState:UIControlStateNormal];
        // statement to add object to NSMutableArray
    }
    else
    {
        [btn setImage:[UIImage imageNamed:@"CheckBox1.png"] forState:UIControlStateNormal];
        // statement to remove object from NSMutableArray
    }

}

//Here is my code that shows how I initialize my button and cell in my UITableView

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        testButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [testButton setFrame:CGRectMake(280, 57, 25, 25)];
        [testButton setImage:[UIImage imageNamed:@"CheckBox1.png"] forState:UIControlStateSelected];
        [testButton setImage:[UIImage imageNamed:@"CheckBox2.png"] forState:UIControlStateNormal];
        [testButton setUserInteractionEnabled:YES];
        [testButton addTarget:self action:@selector(buttonTouched:) forControlEvents:UIControlEventTouchUpInside];
        [testButton setTag:cell.tag];
        [cell setAccessoryView:testButton];
        //[cell setAccessoryType:UITableViewCellAccessoryCheckmark];

    }

    // Configure the cell...
    TestObject *tObject = [[DataModel sharedInstance].testList objectAtIndex:indexPath.row];
    cell.textLabel.text = tObject.testTitle;

    return cell;

} 
```

我的问题不是将对象实际添加到数组中，而是从按钮派生相应的单元格，然后从该单元格派生正确的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:58:35.060

您可以为每个按钮添加 view.tag：例如，将 101 分配给第一个按钮，将 102 分配给第二个按钮等。

然后，此标签对应于数组中的一个位置，您可以在其中找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:58:53.577

当你这样做时，你需要一种方法将你的单元格链接到你的按钮，你有几个选择

1-将按钮上的标签设置为数组中元素的相应索引，这样您就可以通过标签属性获取单元格，如果您要删除单元格，这可能会出现问题，因为您必须更新您的按钮标签。

2- 使用字典将您的按钮映射到您的单元格

因此，如果您使用标签标记索引，则可以使用 UITableViewCell 的 cellForRowAtIndexPath 来获取单元格，数据对象也应该在具有该索引的数据源数组中。丹尼尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:59:50.900

我过去做过的一件事是将按钮的标签设置为单元格的行。这仅在以下情况下有效：

*   您的表格中只有一个部分
*   你总是设置按钮的标签`tableView:cellForRowAtIndexPath:`（因为出队）
*   您的表格是只读的（这意味着您不允许删除或移动单元格）

对于更复杂的表格，您可能需要从按钮到对象的映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T20:00:32.613

也许`NSMutableArray`您可以使用 an`NSMutableDictionary`并为新项目分配一个键，而不是使用 an ，以便更简单地订购它。

# python - 递归地总结列表中的元素；Python

> ID：14222943
> 
> 赞同：-1
> 
> 时间：2013-01-08T19:52:41.240
> 
> 标签：python, recursion

我无法将一段递归代码从 Java 转换为 Python。这个函数所做的只是对数组（或列表）中的元素求和。

```
public static int Summ(int [] arr, size)
{
   if(size == 0)
      return 0
   else
    return arr[size-1] + Summ(arr,size-1);

}  <-- works fine 
```

但是，在 Python 中，我收到此错误消息：TypeError: +: 'int' and 'list' 的不支持的操作数类型。有关如何解决此问题的任何建议？谢谢！

```
def Sum(arr,size):
   if size == 0:
     return 0
   else:
     return arr[size-1] + Summ(arr,size-1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:54:48.917

你可以使用

```
sum(arr) 
```

这将返回列表中值的总和。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T20:01:26.053

```
def Sum(arr,size):
   if size == 0:
     return 0
   else:
     return arr[size-1] + Sum(arr,size-1)

a=[1,2,3]  
b=Sum(a,3)
print b 
```

印刷`6`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:59:21.440

如果没有看到 Python 代码，很难确切地知道发生了什么，但是根据错误消息，您的 Summ 方法可能返回一个列表而不是一个 int。

如果 Summ 对象确实返回一个 int，那么 arr 对象实际上可能包含一个列表列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T19:59:30.383

如果您真的希望这是“尾”递归：

```
def Sum(lst):
    if not lst:
        raise ValueError("Summing an empty iterable?  That's nonsense")
    return lst[0]+Sum(lst[1:]) if len(lst) > 1 else lst[0] 
```

但是内置`sum`函数绝对是一个更好的选择——它适用于任何可迭代的对象，并且效率更高，并且使用它不可能达到递归限制。

Python 并没有像许多其他语言那样真正为尾递归而构建。Guido 似乎认为这不值得担心，因为您总是可以将其重新编码为循环。

# c# - XAML 中的数据绑定，以便它在设计器视图中工作？

> ID：14222944
> 
> 赞同：0
> 
> 时间：2013-01-08T19:52:51.180
> 
> 标签：c#, wpf, visual-studio-2010, visual-studio, xaml

我无法理解如何将我的歌曲数据绑定`List<>`到 a`ListBox`而无需`ItemsSource`在后面的代码中设置。它虽然有效，但我真的很想看到列表在 liveview Designer 中工作。

```
命名空间 App5
{
    类 SongsData
    {
        公共字符串标题 { 获取；放; }
        公共字符串歌词 { 获取；放; }
    }
}

```

在我的 MainPage.xaml.cs 中：

```
        公共主页（）
        {
            this.InitializeComponent();

            列出歌曲 = new List();
            Songs.Add(new SongsData() { Title = "你的歌", Lyrics = "有点好笑.." });
            Songs.Add(new SongsData() { Title = "Rocket Man", Lyrics = "I'm the Rocket Maaaan.." });

            SongsListBox.ItemsSource = 歌曲；
        }

```

在 XAML 中，我有一个基本的 ListBox：

```
<ListBox>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Title}" />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

一个友好的人可以帮助我了解要改变什么 - 希望是为什么 - 让歌曲标题显示在`ListBox`Visual Studio 的实时视图设计器中？

有了上面我必须调试程序才能看到`ListBox`.

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:57:31.210

您基本上需要将**DesignData**构建时间操作应用于您的数据文件。可以在[msdn](http://msdn.microsoft.com/en-us/library/ff602279(v=vs.95).aspx)找到非常全面的演练。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:12:21.210

一个快速简单的解决方案是将您移动`ListBox`到 ​​new `UserControl`，将列表初始化放在`UserControl`的构造函数中，然后将 的实例添加`UserControl`到您的主窗体中。

例子：

歌曲列表控制.cs：

```
namespace App5
{
    public parital class SongListControl : userControl
    {
        this.InitializeComponent();

        List Songs = new List();
        Songs.Add(new SongsData() { Title = "Your Song", Lyrics = "It's a little bit funny.." });
        Songs.Add(new SongsData() { Title = "Rocket Man", Lyrics = "I'm the Rocket Maaaan.." });

        SongsListBox.ItemsSource = Songs;
    }
} 
```

SongListControl.xaml ：

```
<UserControl x:Class="App5.SongListControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <ListBox>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Title}" />
            </DataTemplate>
        </ListBox.ItemTemplate>        
    </ListBox>
</UserControl> 
```

然后在您的主窗口中：

```
<Window x:Class="App5.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:app="clr-namespace:App5"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <app:SongListControl />
    </Grid>
</Window> 
```

构建项目时，构造函数初始化将在 MainWindow 预览中进行。

# objective-c - reloadSections 在 if 中不起作用

> ID：14222951
> 
> 赞同：0
> 
> 时间：2013-01-08T19:53:16.743
> 
> 标签：objective-c, ios, xcode

```
- (void)viewWillAppear:(BOOL)animated
{
   if (_needRefresh)
    { NSLog(@"Type This If You Are IN");
        [self.myTableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationFade];
        _needRefresh = NO;
    } 
```

我只想在有变化的情况下刷新我的表。`[self.myTableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationFade];`当我移至该代码时，该代码运行良好，`viewController`但是当我将其放入其中时，`if`出现了问题。我可以看到`NSLog`if 内部的 if 已打印，所以我不明白有什么区别以及为什么没有执行重新加载。

# javascript - 获取函数以等待后中间件保存完成，然后再继续

> ID：14222953
> 
> 赞同：0
> 
> 时间：2013-01-08T19:53:32.860
> 
> 标签：javascript, node.js, mongodb, callback, database

这是我的问题，我有一个正在运行的工作人员收集一些数据，然后将其保存到模式中。在这些模式中，我发布了保存时发生的中间件功能。问题是我的工作人员没有等待 post 中间件完成工作，然后循环并再次保存到相同的模式。随着我的工作人员继续运行，它会大大减慢速度，因为它会在完成之前一遍又一遍地排队这些功能。那些 post 中间件函数也保存到其他也执行自己的 post 函数的模式。所以正如我所知，当我正在处理数十万个正在保存的对象时，它开始真正放慢速度。

# 我的代码看起来是什么样的示例：

# 工人

```
tranFunc = (stuff, Object) -> 
            newObject = Object
            newObject = new Object newObject
            newObject.save (err) -> 
```

Save 现在跳转到发生更多事情的模式中，但是我的工作人员在完成之前循环并继续

# 架构

```
ObjectSchema.post("save", function() {
 DOING STUFF 
```

我已经读到我可以使用类似 a 的东西`next()`作为对工人的回调，但我尝试使用它没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:16:15.377

我认为我不能以目前的形式回答这个问题，但基本的想法是

1.  异步函数在完成时应使用回调进行通信
2.  调用异步代码的函数本身就是异步的。

因此，在您的情况下，工作函数似乎违反了这一原则，因为它调用了异步函数而不是异步函数。您可以通过添加返回回调作为参数并在所有操作完成后调用所述 callbabk 来解决此问题（即，在您调用的最后一个异步方法的回调中）

```
//sort of like this:
tranFunc = (stuff, Object, doneCb) -> 
        newObject = Object
        newObject = new Object newObject
        newObject.save (err) ->
            doneCb( /*put return values here as appropriate*/ ) 
```

现在调用`tranFunc`的人将能够知道内部保存方法何时完成。

# mysql - 在搜索中忽略撇号、逗号、连字符等

> ID：14222954
> 
> 赞同：0
> 
> 时间：2013-01-08T19:53:35.433
> 
> 标签：mysql, sql

问题示例：

```
SELECT * FROM `table`
WHERE `content`
RLIKE "[[:<:]]didnt[[:>:]]" 
```

问题是，当我搜索“didnt”之类的内容时，找不到带有“didnt”（带有撇号）的列。如果我要搜索“没有”，则找不到带有“没有”（没有撇号）的列。

我需要进行什么更改，以便它忽略撇号、逗号、连字符等，并且无论是否有/没有撇号都给出结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:17:41.583

你为什么不试试`|options`

```
SELECT * FROM table
WHERE 
(content RLIKE "[[:<:]]didnt[[:>:]]|[[:<:]]didn't[[:>:]]|[[:<:]]didn..t[[:>:]]|ETC)" 
```

来源：[http ://www.sqllines.com/mysql/regexp_rlike](http://www.sqlines.com/mysql/regexp_rlike)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T23:03:40.020

您可以使用嵌套替换函数：

```
SELECT *
FROM `table`
WHERE
  replace(replace(replace(`content`, '\'', ''), ',', ''), '-', '')
  RLIKE "[[:<:]]didnt[[:>:]]" 
```

# svn - Apache 上的 Subversion Authz 配置

> ID：14222956
> 
> 赞同：3
> 
> 时间：2013-01-08T19:53:48.047
> 
> 标签：svn, repository, svnserve

我试图限制某些用户访问我的颠覆存储库。但是我无法让它以我想要的方式工作。

我有三个存储库。我们称它们为 repo1、repo2 和 repo3。我也有三个用户。用户 1、用户 2 和用户 3。

我想要的是所有用户读/写 repo1，只有 user1 读/写 repo2 和 repo3。我不希望 user2 和 3 能够读取 repo2 和 repo3。现在我认为以下配置应该可以工作：

```
[groups]
group1 = user1, user2, user3

[/repo1]
@group1 = rw

[/repo2]
@group1 = 
user1 = rw

[/repo3]
@group1 =
user1 = rw

[/]
* = r 
```

但是，使用此配置 user2 和 user3 仍然可以访问所有 repo，并且不允许任何用户提交/更改任何文件。

谁能告诉我我做错了什么？

# 编辑

感谢正确的答案，我得到了它的工作。可能对其他用户有用。

```
[groups]
group1 = user1, user2, user3

[repo1:/]
@group1 = rw

[repo2:/]
user1 = rw

[repo3:/]
user1 = rw 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:16:04.067

分段中的 repo 定义

来自[SVN 书](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.pathbasedauthz.html)

> 如果您使用的是 SVNParentPath 指令，请务必在您的部分中指定存储库名称。如果您省略它们，则诸如此类的部分`[/some/dir]`将匹配每个存储库中的路径`/some/dir`。

部分格式有据可查：

> 部分名称的值是形式`[repos-name:path]`或形式`[path]`

即您`[/repoN]`在每个存储库中定义路径 /repoN，而不是存储库。用于`[repoN:/]`适当的存储库的根

# php - 为 jquery 生成的数据调整 mail.php（多个下拉列表，ID 不断变化）

> ID：14222959
> 
> 赞同：1
> 
> 时间：2013-01-08T19:53:52.350
> 
> 标签：php, email

我在 php 文件中有一个包含以下代码的表单：

```
<select id="choice" name="choice" class="ddl" style="width: 121px">
<?php 
foreach($xml->children() as $pizza){
?>
<option value="<?php echo $pizza; ?>" selected=""><?php echo $pizza; ?></option>
<?php }?> 
```

和下面的 Jquery 代码

```
$("#addbt").click(function () {
 $('#choice').clone()
     .attr('id', 'choice' + $('.ddl').length)
     .attr('name', 'choice' + $('.ddl').length)
     .insertAfter(".ddl:last"); }); 
```

我需要以电子邮件的形式发送数据（其他数据不是问题）。该表单有一个添加按钮，用于创建具有不同名称的新下拉列表（choices、choices1、choices2 等，具体取决于单击按钮的次数）。

发送信息的 mail.php 是：

```
<?php 
$name = $_POST['name'];
$email = $_POST['email'];
$choice = $_POST['choice'];
$phone= $_POST['phone'];
$town= $_POST['town'];
$formcontent="
Name: $name \n
Number: $phone \n
Choice: $choice \n
Town: $town \n
Email: $email" ;
$recipient = "courses@os4u.eu";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "Thank You!";
?> 
```

我不知道如何以实用的方式将新选择（choices1、chocies2..etc）添加到表单中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:10:19.823

您可以遍历帖子值：

```
foreach($_POST as $key => $value) {
   $options .= ucfirst($key).": ".$value."\n";
} 
```

然后将 $options 的内容添加到您的邮件正文中。只是一个快速的解决方案..

请注意，所有帖子元素都将以这种方式添加到正文中。

# mysql - MySQL 外键约束 - 错误 1452 - 无法添加或更新子行

> ID：14222967
> 
> 赞同：3
> 
> 时间：2013-01-08T19:54:21.620
> 
> 标签：mysql, foreign-keys, mysql-workbench, mysql-error-1452

我已经使用了关于这个主题的其他帖子，但我没有运气。

这是我执行的代码：

```
UPDATE tblOrderItems SET `ItemID` = 0004 WHERE `OrderNum`= 203 AND `OrderItemID` = 26 
```

这是我的错误：

```
Error Code: 1452\. Cannot add or update a child row: a foreign key constraint fails (`cai0066`.`tblOrderItems`, CONSTRAINT `ItemID` FOREIGN KEY (`ItemID`) REFERENCES `tblCatalogItems` (`ItemID`)) 
```

笔记：

1.  它发生在我`INSERT`要么`UPDATE`进入`tblOrderItems`.
2.  `tblCatalogItems` **确实**有一个`ItemID`。`0004`见：[这个](https://i.imgur.com/wzgoN.png)

以下是 MySQL Workbench 生成的 create 语句：

```
delimiter $$

CREATE TABLE `tblCatalogItems` (
  `ItemID` varchar(10) NOT NULL DEFAULT '',
  `ItemName` varchar(50) DEFAULT NULL,
  `Wholesale` decimal(10,2) DEFAULT NULL,
  `Cost5-10` decimal(10,2) DEFAULT NULL,
  `Cost11-19` decimal(10,2) DEFAULT NULL,
  `Cost20` decimal(10,2) DEFAULT NULL,
  `Retail` decimal(10,2) DEFAULT NULL,
  PRIMARY KEY (`ItemID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1$$

delimiter $$

CREATE TABLE `tblItemCosts` (
  `Cost` decimal(10,2) DEFAULT NULL,
  `VendorID` int(11) NOT NULL,
  `ItemID` varchar(10) NOT NULL,
  KEY `VendorID_idx` (`VendorID`),
  KEY `ItemID_idx` (`ItemID`),
  CONSTRAINT `VendorID` FOREIGN KEY (`VendorID`) REFERENCES `tblVendors` (`VendorID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1$$

delimiter $$

CREATE TABLE `tblOrderItems` (
  `OrderItemID` int(11) NOT NULL AUTO_INCREMENT,
  `OrderNum` int(11) NOT NULL,
  `PayPalTxnID` int(10) DEFAULT NULL,
  `Description` varchar(225) DEFAULT NULL,
  `Quantity` int(11) DEFAULT NULL,
  `UnitPrice` decimal(10,2) DEFAULT NULL,
  `ItemStatus` varchar(30) DEFAULT NULL,
  `TrackingNumber` varchar(50) DEFAULT NULL,
  `ShippingCost` decimal(10,2) DEFAULT NULL,
  `ItemID` varchar(50) DEFAULT NULL,
  `TotalPrice` decimal(10,2) DEFAULT NULL,
  PRIMARY KEY (`OrderItemID`,`OrderNum`),
  UNIQUE KEY `PayPalTxnID_UNIQUE` (`PayPalTxnID`),
  KEY `PayPalTxnID_idx` (`PayPalTxnID`),
  KEY `UnitPrice_idx` (`ItemID`),
  KEY `OrderNum_idx` (`OrderNum`),
  CONSTRAINT `ItemID` FOREIGN KEY (`ItemID`) REFERENCES `tblCatalogItems` (`ItemID`),
  CONSTRAINT `OrderNum` FOREIGN KEY (`OrderNum`) REFERENCES `tblOrders` (`OrderNum`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `UnitPrice` FOREIGN KEY (`ItemID`) REFERENCES `tblCatalogItems` (`ItemID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=7678 DEFAULT CHARSET=latin1$$

delimiter $$

CREATE TABLE `tblOrderItemStatus` (
  `OrderItemID` int(11) NOT NULL,
  `OrderDate` varchar(12) DEFAULT NULL,
  `DesignProofSent` varchar(12) DEFAULT NULL,
  `SubmittedToProduction` varchar(12) DEFAULT NULL,
  `InProduction` varchar(12) DEFAULT NULL,
  `Shipped` varchar(12) DEFAULT NULL,
  PRIMARY KEY (`OrderItemID`),
  UNIQUE KEY `OrderItemID_UNIQUE` (`OrderItemID`),
  KEY `OrderItemID_idx` (`OrderItemID`),
  CONSTRAINT `OrderItemID` FOREIGN KEY (`OrderItemID`) REFERENCES `tblOrderItems` (`OrderItemID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1$$

delimiter $$

CREATE TABLE `tblOrders` (
  `OrderNum` int(11) NOT NULL AUTO_INCREMENT,
  `PayPalTxnID` int(10) DEFAULT NULL,
  `OrderDate` varchar(50) DEFAULT NULL,
  `OrderStatus` varchar(10) DEFAULT 'New',
  `RushFlag` bit(1) DEFAULT b'0',
  `ShipName` varchar(50) DEFAULT NULL,
  `ShipEmail` varchar(100) DEFAULT NULL,
  `ShipAddress1` varchar(50) DEFAULT NULL,
  `ShipAddress2` varchar(50) DEFAULT NULL,
  `ShipCity` varchar(50) DEFAULT NULL,
  `ShipState` char(2) DEFAULT NULL,
  `ShipZip` varchar(10) DEFAULT NULL,
  `ShippingCharge` decimal(10,2) DEFAULT NULL,
  `TotalCost` decimal(10,2) DEFAULT NULL,
  PRIMARY KEY (`OrderNum`),
  UNIQUE KEY `PayPalTxnID_UNIQUE` (`PayPalTxnID`)
) ENGINE=InnoDB AUTO_INCREMENT=346 DEFAULT CHARSET=latin1$$

delimiter $$

CREATE TABLE `tblVendors` (
  `VendorID` int(11) NOT NULL,
  `VendorName` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`VendorID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1$$ 
```

我尝试了[这个](https://stackoverflow.com/questions/1253459/mysql-error-1452-cannot-add-or-update-a-child-row-a-foreign-key-constraint-fa)相关帖子中的建议，但没有结果。这是一个尚未实际使用的新数据库；我刚刚用假数据填充了它。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T19:58:48.460

有一个外键约束`tblOrderItems`，*它`ItemID`需要引用一个`ItemID`已经存在于`tblCatalogItems`*.

```
CONSTRAINT `ItemID` FOREIGN KEY (`ItemID`) REFERENCES `tblCatalogItems` (`ItemID`), 
```

该消息仅表示您正在尝试更新`tblOrderItems`以`tblCatalogItems`使用`ItemID`= 0004 引用该项目，但该项目不存在。

由于`ItemID`是 varchar，您可能需要引用`0004`或者`4`在转换为 varchar 之前将其转换为 int。`ItemID`如果实际存在 = 0004的行，那可能是您的问题。

```
UPDATE tblOrderItems SET `ItemID` = '0004' WHERE `OrderNum`= 203 AND `OrderItemID` = 26 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:00:04.353

没有看到表数据我不能确定，但​​我猜这是因为没有记录`tblCatalogItems`为`ItemID`“0004”。

此外，您可能需要`0004`在更新语句中引用 ，因为该列被定义为字符 ( `varchar(10)`) 而不是数字 ( `int`)。

在 和之间定义了外键关系`tblCatalogItems.ItemId`，`tblOrderItems.ItemId`这意味着 in 中的任何行`tblOrderItems`只能具有与在中找到的`ItemId`匹配的值。`ItemId``tblCatalogItems`

`ItemId`因此，在运行更新之前，您需要先在“tblCatalogItems”中插入一条记录为“ 0004”的记录`tblOrderItems`

或者，您需要更改`SET ItemID =`更新中的子句以设置与表`ItemId`中实际存在的值匹配的值`tblCatalogItems`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:06:21.427

数据类型需要在外键约束的两侧匹配。在这里，您有一个`varchar(50)`引用 a `varchar(10)`，这是不允许的。

```
CREATE TABLE `tblCatalogItems` (
  `ItemID` varchar(10) NOT NULL DEFAULT '',
  ...
) ENGINE=InnoDB DEFAULT CHARSET=latin1$$

...

CREATE TABLE `tblOrderItems` (
  `ItemID` varchar(50) DEFAULT NULL,
  ...
  CONSTRAINT `UnitPrice` FOREIGN KEY (`ItemID`) REFERENCES `tblCatalogItems` (`ItemID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=7678 DEFAULT CHARSET=latin1$$ 
```

# java - web.xml 未在 Eclipse Juno 中更新

> ID：14222972
> 
> 赞同：2
> 
> 时间：2013-01-08T19:54:53.363
> 
> 标签：java, jboss, web.xml

我正在使用 eclipse JUNO 运行一个简单的“Helloworld”servlet，并使用 JBoss 7.1 作为服务器..

这是正在运行的代码

```
import java.io.IOException;
import javax.servlet.ServletException;`
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class Hello extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        PrintWriter out = response.getWriter();
        out.println("Hello World");
    }
} 
```

我的 web.xml 是（即使在运行 servlet 之后）

```
<display-name>bjp</display-name>
 <welcome-file-list>
<welcome-file>index.html</welcome-file>
<welcome-file>index.htm</welcome-file>
<welcome-file>index.jsp</welcome-file>
<welcome-file>default.html</welcome-file>
<welcome-file>default.htm</welcome-file>
<welcome-file>default.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

意味着看这个，很明显 web.xml 没有使用 servlet 信息进行更新，例如 servlet 映射和 servlet 类。

为什么 web.xml 没有用 servlet 类更新？它适用于 Tomact..请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:13:30.093

您正在使用哪个版本的 servlet？如果你使用的是Servlets3.0，那么servlet可以通过`@WebServlet`注解来配置，所以不需要`web.xml`配置，这就是Eclipse`web.xml`在创建时不会自动更新文件的原因`servlet`。所以你可以有这样的代码：

```
@WebServlet("/Hello")
public class Hello extends HttpServlet { 
```

它将执行与`web.xml`配置相同的工作。如果您仍然想生成`web.xml`并且不想使用注释，那么您必须`version`在创建动态 Web 项目时从`3.0`更改为`2.5`.

# javascript - 如何在 Oracle Apex 中动态设置列链接

> ID：14222979
> 
> 赞同：0
> 
> 时间：2013-01-08T19:55:32.597
> 
> 标签：javascript, jquery, oracle-apex

我以不同的方式解决了我最初的问题，因为我找不到如何及时动态设置列链接，但我仍然很好奇如何做到这一点。我们可以在报表属性/列链接页面中为一列静态设置f?p=链接并包含#Column_templates#，然后Oracle会为该列设置超链接。

此功能是否向开发人员公开？

是否有 JQuery/hack 来完成这项工作？

# javascript - Knockout JS - 绑定到可观察的 Ints 数组

> ID：14222982
> 
> 赞同：4
> 
> 时间：2013-01-08T19:55:37.353
> 
> 标签：javascript, knockout.js

我正在尝试将一个简单的**整数**数组绑定到带有输入的无序列表，如下所示：

视图模型

```
self.amounts = ko.observableArray();
for (var i=0; i<5; i++){
    self.amounts.push(ko.observable(i));
} 
```

HTML

```
<ul data-bind="foreach: amounts">
    <li><input type="text" data-bind="value: $data"/></li>
</ul> 
```

这将生成列表，其中输入正确填写了数字 0-4。但是，当我更改任何输入的值时，ViewModel 不会获得新值。

如果我使用一组简单对象作为 observableArray，如下所示：

```
[{amt: 0}, {amt: 1}, {amt: 2}] 
```

并调整 HTML 以将输入绑定到“amt”属性，然后更改输入中的值会触发 ViewModel 中的更改。

是否可以使用简单值数组并实现双向绑定，而不使用更改原始数据模型的解决方法？如果是这样，我做错了什么？

**编辑：**这个问题与它被标记为重复的[Knockout JS 的问题不同 - 如何正确绑定 observableArray](https://stackoverflow.com/questions/9510539/knockout-js-how-to-correctly-bind-an-observablearray)，它是关于简单类型元素的特殊双向绑定案例 - *ints*或*strings*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:51:34.660

看起来这是一个重复的问题，我的预感是正确的。$data 将始终打开可观察对象，因此您必须改用名称、值对象对的数组。

看到这个问题：[Knockout JS - 如何正确绑定 observableArray](https://stackoverflow.com/questions/9510539/knockout-js-how-to-correctly-bind-an-observablearray)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:57:26.897

$data 在这种情况下不起作用。相反，您可以像这样创建一个对象数组：

```
<ul data-bind="foreach: amounts">
  <li>
    <input type="text" data-bind="value: value" />
  </li>
</ul>
<button data-bind="click: checkValues">Check</button> 
```

. .

```
var MyNumber = function (name, value) {
  this.name = ko.observable(name);
  this.value = ko.observable(value);
};
var VM = function () {
  this.amounts = ko.observableArray();
  this.checkValues = function () {
    for (var i = 0; i < 5; i++) {
      console.log('amount = ' + vm.amounts()[i].value());
    }
  };
};
var vm = new VM();
vm.amounts().push(new MyNumber('a', 1));
vm.amounts().push(new MyNumber('b', 2));
vm.amounts().push(new MyNumber('c', 3));
vm.amounts().push(new MyNumber('d', 4));
vm.amounts().push(new MyNumber('e', 5));

ko.applyBindings(vm); 
```

# php - MySQL 查询中的整数比较无法正常工作？

> ID：14222994
> 
> 赞同：-1
> 
> 时间：2013-01-08T19:56:49.860
> 
> 标签：php, mysql

我在比较`MySQL`查询中的两个整数时遇到问题，它没有找到任何结果，但应该是。我正在使用的查询：

```
"SELECT * FROM users 
WHERE var1 = '" . $variable1 . "' 
AND var2 = '" . $variable2 . "' 
AND var3 = 3" 
```

如果我省略了该`AND var3 = 3`位，它可以正常工作，但是使用它，它不会返回任何结果。

在数据库中，`var3`存储为`tinyint`，并且当前每个用户的值为 3 用于测试目的。我在这里缺少什么吗？任何帮助是极大的赞赏。

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:10:06.707

您应该使用 PDO 或 mysqli，以便您可以绑定参数并避免注入。在我看来，它也使阅读更容易。

```
$sql = 'SELECT * FROM users 
       WHERE var1 = ? 
       AND var2 = ?
       AND var3 = 3';
$sth = $dbh->prepare($sql);
$sth->execute(array($variable1, $variable2)); 
```

~~这也避免了像在你的整数值中添加单引号这样的错误。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:05:59.537

它是关于你的 var1 和 var2 的，如果它们是 string 或 int

在你的 php 文件中尝试让`$variable1`和`$variable1`喜欢`integers`

像那样

```
 $variable1 = INTVAL($variable1) ;
          $variable2 = INTVAL($variable2) ; 
```

并且在您的查询中这样做

```
 "SELECT * FROM users 
   WHERE var1 = $variable1
     AND var2 = $variable2 
   AND var3 = 3" 
```

然后它将在您的sql中工作

# iphone - iOS 上的下划线和删除线

> ID：14222998
> 
> 赞同：0
> 
> 时间：2013-01-08T19:56:58.203
> 
> 标签：iphone, objective-c, ios, ipad, uifont

我是 iOS/Objective-c 的新手，并试图允许使用下划线和醒目的文本注释，但这里不是具有此功能的本机字体以任何方式添加某种属性？

```
NSDictionary *arial = [NSDictionary dictionaryWithObjectsAndKeys:@"ArialMT", [NSNumber numberWithInt:TextAnnotationFontStyleNone],
                                   @"Arial-BoldMT", [NSNumber numberWithInt:TextAnnotationStyleBold],
                                   @"Arial-ItalicMT", [NSNumber numberWithInt:TextAnnotationStyleItalic],
                                   @"Arial-BoldItalicMT", [NSNumber numberWithInt:TextAnnotationStyleBold | TextAnnotationStyleItalic],
                                   @"Arial-BoldMT", [NSNumber numberWithInt:TextAnnotationStyleUnderline], // ANY WAY TO ADD ANYTHING HERE TO MAKE IT UNDERLINE???
nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:28:00.343

通过`NSFont`您只能控制字体粗细（即是否加粗）。下划线和删除线属性通过`NSAttributedString`( `NSMutableAttributedString`) 控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:36:20.593

对于 iOS 中的文本下划线和删除线，您可以使用 AttributedString。但是 AttributedString ffeature 是在 iOS 6 版本上实现的，而不是在较低版本上实现的。

对于低于 iOS-6 的 iOS，您可以使用 ZAttributedStrings 来添加下划线、删除线或管理额外的字体效果。

有一个使用 ZAttributedString 的 iOS 示例项目代码

检查 GitHub [ZattributedString的这个链接](https://github.com/zynga/FontLabel)