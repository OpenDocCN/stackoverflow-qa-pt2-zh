# StackOverflow 问答 12521000-12521999

# javascript - .get() 事件监听器

> ID：12521000
> 
> 赞同：0
> 
> 时间：2012-09-20T21:13:12.110
> 
> 标签：javascript, jquery, event-listener

我遇到了一些 jquery 问题。出于某种疯狂的原因，当我使用 .get() 从另一个页面加载一个 div 并克隆它时，它的事件侦听器都消失了。当我在同一页面上克隆一个 div 时，事件侦听器会留下来，所以问题似乎是 .get() 的错。

这是有效的代码（保留事件侦听器）：

```
var div = $("#"+referencedPostNumber).clone(true,true).attr("id","inlineQuote"+referencedPostNumber)
$(div).css("border","1px solid grey");
$(div).css("display","table");
$(reference).after(div); 
```

这是没有的代码：

```
$.get(reference.href, function(data) {
    var div = $($(data).find('#' + referencedPostNumber)).clone(true,true).attr("id","inlineQuote"+referencedPostNumber)
    $(div).css("border","1px solid grey");
    $(div).css("display","table");  
    $(reference).after(div);
}); 
```

# sencha-touch - Sencha Cmd V3 测试版

> ID：12521005
> 
> 赞同：3
> 
> 时间：2012-09-20T21:13:33.247
> 
> 标签：sencha-touch, extjs

我想在一个工作区中有一个 ext 应用程序和一个触摸应用程序。我生成了工作区：

$ sencha -sdk path/to/ext4.1.1a 生成工作空间路径/toworkspace

这生成了：workspace/.sencha workspace/ext

然后我可以生成一个 ext 应用程序，但不能生成一个触摸应用程序。我试图像这样生成触摸应用程序：

$ sencha -sdk path/to/touch2.0.1.1 生成应用路径/totouchapp

我收到一个错误：“无法确定框架名称。请确保此命令是从框架或应用程序目录发出的”

因此，我还尝试通过 cd'ing 到我的 touch2.0.1.1 sdk 来生成触摸应用程序，但这也不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:42:08.073

最新的 Cmd 工具与旧版本的 Sencha Touch 不兼容。显然，您需要安装最新的 SDK 才能正常工作。

[根据sencha 论坛中的](http://www.sencha.com/forum/showthread.php?243153-Sencha-Cmd-V3-Beta&p=890144)这个帖子：

> 错误的触控 SDK！

```
I was using the wrong Touch SDK. Found the correct one here:

http://www.sencha.com/forum/announcement.php?f=89 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:08:21.017

我想我只是学习正确的方法

您必须下载sencha touch SDK（SenchaCmd-3.0.0.250-windows.exe.zip）并安装它，当然您还必须下载sencha touch框架（sencha-touch-2.1.0-gpl.zip）。

在我的情况下，您必须在 sencha touch 框架上 CD（更改目录）：`d:\webdav\htdocs\touch`并应用命令：sencha generate app gs`d:\webdav\htdocs\gs`

我也尝试了这个命令：`sencha -sdk D:\webdav\htdocs\touch generate`工作区`D:\webdav\htdocs\gs`，它可以工作。不再像之前的帖子那样出错。

谢谢大家！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:20:48.933

名称必须与生成后的名称相同

Senchacmd →`sencha -sdk c:\wamp\www\touch2.0.1.1 generate app MyApp c:\wamp\www\MyApp`

# android - 如何将应用程序中的活动上下文传递给其他应用程序中的服务

> ID：12521007
> 
> 赞同：6
> 
> 时间：2012-09-20T21:13:44.543
> 
> 标签：android, service, android-context

所以我在启动服务的应用程序中有一个活动：

```
private void startService() {
    if (started) {
        Toast.makeText(Main.this, "Service already started",
                Toast.LENGTH_SHORT).show();
    } else {
        Intent i = new Intent();
        i.setClassName("com.enorbitas.daemon.service",
                "com.enorbitas.daemon.service.DaemonService");
        startService(i);
        started = true;
        updateServiceStatus();
        Log.d(getClass().getSimpleName(), "startService()");
    }

} 
```

该活动由以下意图启动：

```
<intent-filter>
            <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
        </intent-filter> 
```

然后该服务会进行日志记录并与此自定义 USB 设备连接。为此，它需要活动上下文：

```
 mUsbManager = (UsbManager) parent.getSystemService(Context.USB_SERVICE);
        HashMap<String, UsbDevice> deviceList = mUsbManager.getDeviceList();
        Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();
        while(deviceIterator.hasNext()){
            UsbDevice device = deviceIterator.next();
        }

        Intent intent = parent.getIntent();
        String action = intent.getAction();
        UsbDevice device = (UsbDevice) intent
                .getParcelableExtra(UsbManager.EXTRA_DEVICE);
        if (UsbManager.ACTION_USB_DEVICE_ATTACHED.equals(action)) {
            setDevice(device);
            Log.i(TAG, "usb conectado");
        } else if (UsbManager.ACTION_USB_DEVICE_DETACHED.equals(action)) {
            if (mDevice != null && mDevice.equals(device)) {
                setDevice(null);
                Log.i(TAG, "usb NO conectado");
            }
        } 
```

parent 将是启动服务的活动。这种方法曾经有效，因为该代码曾经在同一个应用程序中，但现在我希望它成为一种服务，以便其他应用程序可以连接到它。

有没有办法将活动的上下文传递给服务？我读了很多关于意图和捆绑、可打包和序列化的内容，但没有一个对我有用。我需要传递上下文。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T21:22:05.533

每个[服务](http://developer.android.com/reference/android/app/Service.html)都有自己的上下文，只需使用它。您不需要将服务传递给活动的上下文。

我不明白为什么您需要调用特定活动的上下文，`getSystemService()`并且服务将像任何活动一样容易地从广播接收器接收意图。

此外，如果在此 Service 运行时原始 Activity 被销毁，则 Context 将无效或 Activity 泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:42:34.377

> 如何将应用程序中的活动上下文传递给其他应用程序中的服务

这是不可能的。这些应用程序在不同应用程序的不同虚拟机中运行——您不能跨越这些边界传递对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:47:53.340

也许进程间通信可能会帮助你。

[一些随机搜索的 Android IPC 幻灯片在这里](http://kobablog.wordpress.com/2011/06/04/inter-process-communication-of-android/)

# c# - 如何在不包装每个成员函数的情况下将线程不安全类包装成线程安全的类

> ID：12521009
> 
> 赞同：4
> 
> 时间：2012-09-20T21:13:47.333
> 
> 标签：c#, binding, invoke

我希望能够获取一个类（由第三方编写和维护），用一些神奇的 C# 糖包装它，这让我可以用自定义锁定机制（或日志机制或其他）包装每个成员函数（或更多）。

例如，

```
 class Foo { // someone else wrote this and I can't touch it.
     void A() {}
     void B() {}
     // plus 10,000 other functions I don't want to know about
 }

 class WrappedFoo : Foo { // this is my class, I can do what ever I want
      // this is pseudo code !!
     OnMemberInvoke(stuff) {
        lock {
            Console.WriteLine("I'm calling " + stuff);
            MemberInvoke(stuff);
            Console.Writeline("I'm done calling " + stuff);
        }
     }
     // I could also deal with OnMemberInvokeStart() and OnMemberInvokeDone()
     // pairwise hooks too.
 }

 WrappedFoo wfoo = new WrappedFoo();
 wfoo.A();
 wfoo.B(); 
```

输出

```
 I'm calling A
 I'm done calling A
 I'm calling B
 I'm done calling B 
```

现在我想我可以用`DynamicObjects`和来做到这一点`TryInvokeMember`，但是我失去了我喜欢 C# 的所有类型检查和制表符补全。在这个例子中，我提到`lock`了线程安全，但我正在寻找一种通用的方法来做到这一点。此代码用于实际硬件测试，需要额外的重试层、日志记录等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:23:00.800

我已经在 SO 上找到了答案。

[如何包装项目中的每个功能？](https://stackoverflow.com/questions/8200273/how-to-wrap-each-function-in-project)

流行语是 AOP（面向方面​​的编程）。

它没有内置在 Visual Studio 中。有 PostSharp 和 AspectDNG：

[http://www.sharpcrafters.com/postsharp/features](http://www.sharpcrafters.com/postsharp/features)

[http://aspectdng.tigris.org/nonav/doc/index.html](http://aspectdng.tigris.org/nonav/doc/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T21:23:02.390

**您可能想研究[Aspect Oriented Programming](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。**

[PostSharp](http://www.sharpcrafters.com/)是一个非常流行的框架，可以在方法调用之前/之后注入代码，例如**线程代码**，这里有一个关于[Locking](http://www.sharpcrafters.com/solutions/locking)的示例。
这也可以帮助**记录**，这是一个[例子](http://www.sharpcrafters.com/solutions/logging)

# javascript - jQuery 对话框不在视口中居中，而是在父元素中居中

> ID：12521010
> 
> 赞同：3
> 
> 时间：2012-09-20T21:13:53.623
> 
> 标签：javascript, jquery, scroll, viewport, jquery-dialog

我刚刚下载了 jQuery 1.8.0，也带有自定义的 CSS，并且正在尝试制作一个非常简单的 jQuery 对话框来工作，但是它不会在当前视口中居中，而是在父元素（主体）中并滚动对话框的视口盒子在中间。

我包含了小部件和位置 js 文件并检查了路径是否正确。这就是我所拥有的：

```
<script src="js/js/jquery-1.8.0.min.js"></script>
<script src="js/js/jquery-ui-1.8.23.custom.min.js"></script>
<script src="js/js/jquery.ui.position.js"></script>
<script src="js/js/jquery.ui.widget.js"></script> 
```

的HTML：

```
<div id="dialog-confirm" title="Empty the recycle bin?">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>These items will be permanently deleted and cannot be recovered. Are you sure?</p>
</div> 
```

HTML 完全从 jQuery 网站复制而来。最后调用它：

```
var dialog_confirm=$( '#dialog-confirm' ).dialog();
dialog_confirm.dialog('open'); 
```

这些问题中的所有解决方案都没有为我解决：
[Dialog box not position center screen](https://stackoverflow.com/questions/1467102/dialog-box-not-positions-center-screen)
[jQuery center element to viewport using center plugin](https://stackoverflow.com/questions/5281112/jquery-center-element-to-viewport-using-center-plugin)

有谁知道如何解决这个问题？这是 jQuery 对话框的标准行为吗？对我来说似乎很奇怪，还是我弄错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-28T19:56:13.490

我经历了从 jQuery 1.7/jQUI 1.8.17 到 jQuery 1.11/jQUI 1.9.2 的升级。（对话框定位在升级前已经正常工作。）

在我的例子中，原因是一个旧的 doctype 触发了 quirks 模式，这导致 jQuery 返回`$(window).height`为文档的高度而不是视口。切换到 HTML5 doctype ( `<!doctype html>`) 解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T21:45:21.800

如果可以，请尝试使用较旧的 jquery 版本，例如 1.7.x ......这可能会解决它。这不是常见的行为！

# objective-c - 在 MKMapView (iOS 6) 中禁用双击放大

> ID：12521017
> 
> 赞同：6
> 
> 时间：2012-09-20T21:14:28.180
> 
> 标签：objective-c, ios, ios5, mkmapview, ios6

在 ios 5 中，我可以通过用新的双击手势覆盖它来禁用双击缩放。但似乎双击手势不再出现在mkmapview附带的gesturerecognizer数组中。

```
NSArray *gestureRecognizers = [_mapView gestureRecognizers];
for (UIGestureRecognizer *recognizer in gestureRecognizers) {
    NSLog(@"%@", recognizer);
} 
```

在 ios 6 中不返回任何内容，而在 ios 5 中它将返回 2 个识别器，一个用于单击，一个用于双击。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T02:14:49.647

我会查看 MKMapView 子视图的手势识别器。它可能还在某个地方。

当然，弄乱另一个视图的 GR 有点可疑，并且可能会在下次 Apple 更改有关 MKMapView 的某些内容时中断......

**编辑：**为了其他阅读本文的人的利益，*请*检查它是 a`UITapGestureRecognizer`和 that`numberOfTapsRequired == 2`和`numberOfTouchesRequired == 1`.

此外，与其完全禁用地图上的双击，不如考虑在注释上添加双击 GR，然后执行`[mapDoubleTapGR requireGestureRecognizerToFail:annotationDoubleTapGR]`. 再次，hacky - 如果它在下一次操作系统更新时中断，请不要怪我！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T08:38:21.090

这对我有用： [_mapView.subviews[0] addGestureRecognizer:MyDoubleTapOverrider];

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T21:18:33.870

你想让用户对视图做任何事情吗？`userInteractionEnabled`如果没有，设置为就足够了`NO`。如果是这样，您需要允许哪些特定的交互？除了双击之外的一切？为什么要禁用那个交互？

我们对您的用例了解得越多，我们可以提供的答案就越好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-30T19:18:56.463

这对我有用：

```
 //INIT the MKMapView    
    -(id) init{
         ...
         [self getGesturesRecursive:mapView];
         ...
    } 
```

然后让递归函数循环遍历子视图并找到 GR:s。

```
 -(void)getGesturesRecursive:(UIView*)v{
         NSArray *gestureRecognizers = [v gestureRecognizers];
         for (UIGestureRecognizer *recognizer in gestureRecognizers) {
             if ([recognizer isKindOfClass:[UITapGestureRecognizer class]]) {                  
                [v removeGestureRecognizer:recognizer];
             }
        }

        for (UIView *v1 in v.subviews){
            [self getGesturesRecursive:v1];
        }
    } 
```

此示例删除所有 tap-GR:s。但我想你可以指定删除任何你想要的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T01:36:14.043

您可以改用长按手势，这很有效。

# xcode - 卸载 xcode 4.5 (iOS 6)

> ID：12521021
> 
> 赞同：1
> 
> 时间：2012-09-20T21:14:53.390
> 
> 标签：xcode, ios5, ios6, xcode4.5

刚刚意识到我在更新 xcode 4.5 (iOS 6) 时犯了一个错误，因为它会导致问题。

**如何卸载 xcode 4.5 (iOS 6)？安全吗？因为 iOS 6 是测试版。**我想回到 xcode 5.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:19:37.933

**iOS6 不再是测试版。**因此，如果您从商店安装了 Xcode 4.5，那么您已经拥有了 Xcode 4.5 的发布版本。如果没有，请从商店获取。

如果您想要旧版本的 Xcode，请查看[此处](https://developer.apple.com/downloads/index.action?name=Xcode)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:42:15.937

在某些情况下，您可能不想升级到最新版本的 Xcode。

在我的公司中，仍有客户使用运行 iOS 4.2.1 的 iPhone 3，而 Xcode 4.5 不会为其生成代码。Xcode 将生成 4.3 以上版本。

令人惊讶的是，我有一部 iPhone 3 (A1303) 已升级到 iOS 6.0，而 Xcode 也不会为此生成代码。

因此，对于那些确实需要降级的人，您可以使用@leo 发布的链接来获取您想要的 Xcode 版本（可能是 4.4.1）的 dmg 并安装它。然后找到现有的 Xcode（在您的应用程序文件夹中）并将其拖到废纸篓，然后将降级的 Xcode 拖到应用程序文件夹中。如果您使用命令行工具，您可能需要重新安装它们。确保您获得适用于您的 Mac 操作系统的版本。

# ruby-on-rails - 自定义活动管理员评论

> ID：12521023
> 
> 赞同：2
> 
> 时间：2012-09-20T21:14:57.523
> 
> 标签：ruby-on-rails, activeadmin

Active Admin 拥有那些通过键入“active_admin_comments”自动进入您的管理屏幕的处理评论

我想做的是在他们的评论中添加一些字段，例如“状态”字段。这样做的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:40:03.907

如果要更改默认值，可能唯一的方法`build_comment_form` 是`Comments`从`active_admin_comments.rb`

`ActiveAdmin::Comments:: Views::Comments`您还可以通过子类化、覆盖`build_comment_form`方法和使用来制作自己的评论组件

```
builder_method :my_active_admin_comments_for 
```

只是看到提到`active_admin_comments.rb`的参考。

# android - 如何在 Sencha Touch 2 上使用本地图像？

> ID：12521031
> 
> 赞同：0
> 
> 时间：2012-09-20T21:15:31.033
> 
> 标签：android, cordova, sencha-touch

我尝试的一切都不起作用，只有在线图像起作用。我的代码是这样的：

```
config: {
        items: [
            {
                items: [
                    {
                        xtype: 'panel',
                        html: '<img class="logo" src="http://localhost:2606/app/view/res/img/TopLifeRank.png" /><div class="barraSeparacao"></div>'
                    }
                ]
            }
        ]

    } 
```

这种方式在我的电脑上工作，但如果我尝试这样的事情不起作用：

```
 config: {
        items: [
            {
                items: [
                    {
                        xtype: 'panel',
                        html: '<img class="logo" src="../res/img/TopLifeRank.png" /><div class="barraSeparacao"></div>'
                    }
                ]
            }
        ]

    } 
```

有人知道如何使用本地图像？

谢谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:04:28.367

这对我有用：

```
items: [{
            xtype: "panel",
            html: "<p><img src='resources/images/some-image.png'/></p>"
        }] 
```

我基于 Android 的项目的文件夹结构是这样的：

```
android
├───assets
│   └───www
│       ├───app
│       ├───i18n
│       ├───lib
│       ├───resources
│       │   ├───css
│       │   ├───icons
│       │   ├───images
│       │   └───startup
│       └───sdk
├───libs [...]
├───res [...]
└───src [...] 
```

[这是适用于 Android 和 iOS](https://github.com/AndiDog/thesis-code/tree/master/Sample%20application/PhoneGap%20and%20Sencha%20Touch)的示例应用程序的一部分。

# linux - 显示系统上运行的 CPU 密集度最高的进程的命令？

> ID：12521038
> 
> 赞同：0
> 
> 时间：2012-09-20T21:16:02.763
> 
> 标签：linux, ubuntu, command

我还想杀死没有在我的内核上运行的进程，因为我的系统越来越慢。请协助。使用 Ubuntu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:19:23.997

您可以通过以下方式获取正在运行的进程总数

```
$ ps aux | wc -l 
```

至于杀死进程，你需要小心。但是，使用`top`or`ps`并提供所需的选项（请参阅`man`页面），您可以列出由特定用户运行/属于特定组的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:20:32.630

如果您的系统很慢，请关注顶级内存/cpu 消费者并使用

```
$ top 
```

查看哪些进程最慢。

然后，您可以键入 k（用于终止），然后键入您要终止的进程。如果软杀不起作用，则使用 15 进行软杀，使用 9 进行硬杀。

您可以键入 q 退出。

# eclipse - Microsoft azure 部署错误 40 %

> ID：12521042
> 
> 赞同：4
> 
> 时间：2012-09-20T21:16:05.193
> 
> 标签：eclipse, deployment, azure

我正在云中部署一个简单的应用程序。我为此使用**Eclipse ，但部署失败。**

### 在控制台中，错误是：

> ```
> 09/16/2012 09:40:46 - Configuring Remote Desktop
> 09/16/2012 09:40:50 - Uploading Deployment Package
> 09/16/2012 09:44:58 - Failed uploading deployment package (.cspkg). 
> ```

部署只完成**到 40%**。

### 在 Eclipse 的日志中说：

> !ENTRY WAEclipsePlugin 4 0 2012-09-16 09:42:57.026 !MESSAGE 错误!STACK 0 com.gigaspaces.azure.util.CommandLineException: com.gigaspaces.azure.rest.WindowsAzureRestUtils.execute 超时(WindowsAzureRestUtils.java:301 ) 在 com.gigaspaces.azure.rest.WindowsAzureRestUtils.runStorage(WindowsAzureRestUtils.java:393) 在 com.gigaspaces.azure.rest.WindowsAzureStorageServices 的 com.gigaspaces.azure.rest.WindowsAzureRestUtils.execute(WindowsAzureRestUtils.java:338)。 putBlock(WindowsAzureStorageServices.java:358) 在 com.gigaspaces.azure.rest.WindowsAzureStorageServices.access$0(WindowsAzureStorageServices.java:348) 在 com.gigaspaces.azure.rest.WindowsAzureStorageServices$UploadingTask.call(WindowsAzureStorageServices.java:79) 在com.gigaspaces.azure.rest。WindowsAzureStorageServices$UploadingTask.call(WindowsAzureStorageServices.java:1) at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) at java.util.concurrent.FutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor .runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:07:21.777

我确定这里的主要问题是大小，因为我已经看到了这样的问题。为确保它只需尝试在 30 MB 以下部署同一应用程序的功能较少的小版本，看看是否有任何问题。此外，即使您的包大小仍然低于限制，但是 130MB 包大小是不切实际的，并且需要更改应用程序架构。

您可以尝试使用以下方法保持整体尺寸更小：

1.  启动任务以自动化运行时下载/安装
2.  后期使用其他 Java Management api 下载应用程序和其他组件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:14:24.137

该错误似乎表明您的连接有问题（超时）

这是一致的吗？请问你用的是什么版本的eclipse插件？

# jquery - 使用 jQuery 将嵌入式 vimeo 播放器添加到 DOM 时，如何减少卡顿？

> ID：12521046
> 
> 赞同：1
> 
> 时间：2012-09-20T21:16:32.743
> 
> 标签：jquery, html, dom, vimeo

使用 append 将嵌入式 Vimeo 视频播放器添加到 dom 时，加载 Flash 播放器时会出现明显的卡顿。我尝试过简化加载过程，但没有成功。我尝试淡入内容，但似乎淡入并不能缓解浏览器中 Flash 播放器的实际显示。

我曾考虑尝试将其添加到隐藏可见性的 dom 中，然后在实际加载视频后将其淡入，但到目前为止还没有成功。似乎通常 Flash 视频的渲染与 dom 中嵌入元素的可见性是完全不同的问题。

我正在使用 Vimeo 视频页面中提供的 Vimeo 嵌入代码。关于如何简化此过程的任何想法？

目前我不包括代码，因为他们的问题非常简单，但如果需要澄清，我可以提供一些示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:20:59.477

在 Vimeo 上放置一个绝对位置的 div（使用 z-index），给这个 div 一些不透明的背景和显示“正在加载”或其他内容的文本。或者，您可以使用与网站背景相匹配的纯色。加载此 div 后面的 Vimeo，设置超时，然后淡出覆盖 div，显示视频。

# php - 不能用 PHP shell_exec() 'cd'

> ID：12521053
> 
> 赞同：5
> 
> 时间：2012-09-20T21:17:17.350
> 
> 标签：php, shell-exec

我正在尝试编写一个脚本来浏览和返回类似于在终端中工作。

大多数命令都可以正常工作，但是`cd /path/to/files`什么也没做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T21:19:42.777

每个命令都`shell_exec`在自己的 shell 中运行。因此，如果您执行 a `cd`，那只会影响该命令。

如果要更改目录，请使用[`chdir`](http://php.net/manual/en/function.chdir.php).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T21:19:31.297

你正在寻找[`chdir`](http://php.net/manual/en/function.chdir.php). 这是一个PHP函数。

`shel_exec('cd /some/where');`实际上工作*得很好*（它将*当前* `shell_exec`目录更改为不同的目录），但在完成后它不会保留当前目录`shell_exec`。这意味着下一个命令将不会共享通过调用更改的相同状态`cd`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T21:19:36.340

PHP chdir 呢？

[http://php.net/manual/en/function.chdir.php](http://php.net/manual/en/function.chdir.php)

还是使用反引号？

```
`cd /path/to/files` 
```

# macos - sublime text 2 macOSX 双引号问题

> ID：12521058
> 
> 赞同：1
> 
> 时间：2012-09-20T21:17:38.960
> 
> 标签：macos, parsing, text-editor, sublimetext2, double-quotes

当我使用 Sublime Text 2 在我的 Mac 上执行 shift 键 + 单/双引号键时，我没有得到可解析的双引号。

这是一张展示对`id=""`某些 HTML 的 's 的影响的图片： ![在此处输入图像描述](../Images/098dab8c7c5f3ab6fd1fd12db6509cd5.png)

有谁知道如何纠正这个？正确的双引号是由不同的文本编辑器生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:27:43.037

我回答了我自己的问题。我已经安装了[Sublime 的 Zencoding 插件](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=580&sid=5c094c6ad7387e459a34e97e3c14308c#p10654)，当我删除它时，双引号又正常了。

**更新：**奇怪的是，这个双引号问题仍然存在于我的 PHP 文件中，但不是我的 JS 文件。我不确定如何解决这个问题，但我会在我这样做时更新这个答案。

**更新#2** 我终于解决了 PHP 文件双引号问题。请[在这个 SO 线程上查看我的答案](https://stackoverflow.com/questions/14960270/sublime-text-2-double-quote-font-style-depends-on-file-extension/15032320#15032320)。

我有一个键绑定设置在我的 SublimeText2 中使用这些“印刷”引号`preferences->key bindings->user`

# php - 使用 preg_match_all 从正文中分离标签和值列表

> ID：12521060
> 
> 赞同：0
> 
> 时间：2012-09-20T21:17:56.130
> 
> 标签：php, regex

我正在设置一个 PHP 脚本，该脚本将从维护帮助台通过管道发送电子邮件。这些电子邮件是从我们的客户公司使用的网络表单发送的，我无法控制。这些电子邮件在格式上是标准化的，但包含一个带有标签的列表，该标签来自网络表单。我想使用正则表达式来拆分这个列表并将标签和值放入一个数组中，我可以将其输入到我自己的数据库中。我有一个可行的解决方案，但我对正则表达式很陌生，我确信有更好/更有效的方法来做到这一点。

我可能收到的电子邮件示例：

```
Dear *MY COMPANY*,

A new job has been raised, please see details below.
If you are unable to action this job request, please notify the Maintenance Help Desk on xxx-xxxx as soon as possible.

    Job Type: Man In Van
    Job Code: 1462399
    Due Date: 27/09/2012 07:21:10
    Response Time: Man In Van
    Pub Number: 234
    Pub Name: pub name, location
    Pub Address: 123 somewhere, some place XX1 7XX
    Pub Post Code: XX1 7XX
    Pub Telephone Number: xxx xxxx
    Placed By: Ben
    Date/time placed: 20/09/2012 07:21:10
    Trade Type: Man In Van
    Description: List of jobs emailed by Chris, carried out by Martin Baker. No callout on system currently, although jobs already completed, just need signing off.

    For any queries, please either contact the pub directly, telephone the Maintenance Help Desk on xxx-xxxx or reply to this e-mail.

Many Thanks
*CLIENT COMPANY* 
```

它周围有更多样板，显然还有电子邮件标题等，但你明白了。每封电子邮件将仅包含一个列表，并且标签将保持不变，尽管我想在未来证明这一点，因此如果他们添加新字段，我将不需要更改我的代码。我想得到一个数组，例如：

```
$job['Job Type'] = Man in van
$job['Job Code'] = 1462399
...
$job['Description'] = List of all jobs emailed ... just need signing off. 
```

虽然我可以确信格式不会改变，但每个表单都是用户输入的，因此可能是不可预测的，尤其是描述，它可能包含换行符。

这是我目前正在使用的代码：

```
// Rip out the job details from the email
preg_match_all('/job type\:.*description\:.*\s{3}F/is', $the_email, $jobs);

    for each job returned (should always be one but hey)
    foreach($jobs[0] as $job_details) {

// Get the variables from the job description
    preg_match_all('/(\w[^\:]*)\: ([\w\d][^\*]+)/i', $job_details, $the_vars);

}

    // For each row returned, put into an array with the first group as the key and the second as the value
for ($i=0; $i<count($the_vars[0]); $i++) {

    $arr[$the_vars[1][$i]] = $the_vars[2][$i];

} 
```

它有效，但它很难看，我相信有更好的方法。我遇到的主要问题是描述部分，因为我不能简单地搜索“：”之后的文本，直到换行符为止，因为描述本身可能包含换行符。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:49:21.780

仍然不是世界上最漂亮的东西，但它应该可以正常工作！

```
preg_match_all('/\s{3}[ ]*([^:]+): ([^\n]+)/', $subject, $matches);
$job = array_combine($matches[1], $matches[2]);

preg_match_all('/Description\: (.*)\s{3}For any queries/is', $subject, $match);
$job['Description'] = trim($match[1][0]); 
```

第一个`preg_match_all`执行您所说的并没有真正起作用，只是通过空格、冒号和换行符获取所有字段。

第二个替换第一个填写的可能错误的描述键。

# knockout.js - 传递淘汰赛的典型方法在咖啡脚本中计算了正确的可观察值

> ID：12521061
> 
> 赞同：2
> 
> 时间：2012-09-20T21:18:02.113
> 
> 标签：knockout.js, coffeescript

我正在尝试将以下代码转换为咖啡脚本作为一种练习

```
function StateVM() {
    var self = this;

    self.state = ko.observable("stopped");
    self.counter = ko.observable(0);
    self.timeStopped = ko.observable(new Date());
    self.timeStarted = ko.observable(new Date());
    self.currentTime = ko.observable(new Date());
    self.timeRunning = ko.computed(function(){
        var num = (self.currentTime() - self.timeStarted())/1000 >> 0;
        return (num < 0) ? 0 : num;
    });

    self.isStopped = ko.computed(function(){
        return (self.state() === "stopped");
    });

    self.isStarted = ko.computed(function(){
        return (self.state() === "running");
    });

$(document).ready(function(){
    var vm = new StateVM();
    ko.applyBindings(vm);
}); 
```

现在我在coffeescript中有这段代码，但我遇到了自引用`@`编译到错误范围的问题：

```
obs = ko.observable
cmp = ko.computed

class StateVM
    constructor: ->
        state = obs "stopped"
        counter = obs 0
        timeStopped = obs new Date
        timeStarted = obs new Date
        currentTime = obs new Date
        timeRunning = cmp -> 
            x = (@currentTime() - @timeStarted())/1000 >> 0
            x < 0 ? 0 : x

        isStopped = cmp -> @state() == "stopped"
        isStarted = cmp -> @state() == "running"

$ -> ko.applyBindings(new StateVM) 
```

有这样做的规范方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:34:04.407

好的......我做了一些搜索后让它工作：

[https://groups.google.com/forum/?fromgroups=#!topic/knockoutjs/CTBLQthLGWU](https://groups.google.com/forum/?fromgroups=#!topic/knockoutjs/CTBLQthLGWU)

我没有做两件事......一是我没有`@`在构造函数声明中添加，另一件事是使用`=>`而不是`->`

```
obs = ko.observable
cmp = ko.computed

class StateVM
    constructor: ->
        @state = obs "stopped"
        @counter = obs 0
        @timeStopped = obs new Date
        @timeStarted = obs new Date
        @currentTime = obs new Date
        @timeRunning = cmp => 
            x = (@currentTime() - @timeStarted())/1000 >> 0
            x < 0 ? 0 : x

        @isStopped = cmp => @state() == "stopped"
        @isStarted = cmp => @state() == "running"
        @start = (->) ;
        @stop = (->) ;

$ -> ko.applyBindings(new StateVM) 
```

# javascript - 遍历并显示 json 数据

> ID：12521063
> 
> 赞同：0
> 
> 时间：2012-09-20T21:18:04.277
> 
> 标签：javascript, jquery, ajax, codeigniter-2

我有一个 codeigniter 应用程序，在我的一个视图中，我有一个对返回 json 数据的 API 的 ajax 调用。一旦我得到数据，我就会遍历它并将记录附加到现有表中。有两种方法可以运行这个 ajax 调用。一种是请求“所有”数据，另一种是按位置过滤。两种方式都返回数据，但是当我尝试遍历过滤后的数据集时，ajax 失败了。

这是遍历记录集的代码：

```
if (JSONdata.length != 0) 
{
        //create a heading row and attach it to the existing table.
        var heading = $('<tr id="tblheading" naming="tblheading">').appendTo($('#switchrecords'));
        heading.append($('<td>').append().text('Name'));
        heading.append($('<td>').append().text('Object ID'));

        //loop through each JSONdata item in the array and append another row to the switchrecords table.
        $.each(JSONdata, function(i, objswitch) {                           
            console.log('objectid is:'.objswitch.id);
            console.log(objswitch.id);
            var row = $('<tr>').appendTo($('#switchrecords'));
            row.append($('<td>').append($('<a href='+ BASEPATH + 'index.php/controller/methodname/' + objswitch.id + '>').text(objswitch.name)));
            row.append($('<td>').append(objswitch.id).text(objswitch.id));
}); 
```

这是我到目前为止所做的：

1.  我确保两个结果集具有相同的字段，即“id”和“name”。请注意，过滤后的数据集包含比未过滤结果更多的字段，但我认为这不重要。

2.  我已经使用 console.log 转储了两个结果集......这是两者的片段。第一个是ALL，另一个是过滤的。

    [{"name":"888-12-993-99-1","id":"1","dict_value":"compact"},{"name":"888-22-SR1-RTR-1 ","id":"2","dict_value":"compact"},{"name":"888-21-SR1-SW-1","id":"3","dict_value":"compact "},{"name":"888-11-SR2-SW-2","id":"4","dict_value":"compact"},....等

    [{"parent_id":"2","tag_id":"10","Location":"Building1","id":"7","name":"888-22-228-22-1", "label":null,"asset_no":"1026067","objtype_id":"1503"},{"parent_id":"2","tag_id":"5","Location":"Building2","id ":"6","name":"888-2-263-88-1","label":null,"asset_no":"1026068","objtype_id":"1503"}, .... 等.

3.  正如您从代码片段中看到的那样，我尝试添加一些调试信息以查看循环内发生了什么。但是，我在第一个 console.log() 调用中收到以下错误消息：

    [17:13:30.675] 类型错误：“objectid 是：”.objswitch 未定义

我不太确定如何解决这个问题。任何建议，将不胜感激。如果这是一个愚蠢的错误，我提前道歉！我一整天都在编程，我的大脑一片混乱！=)

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:23:02.860

除非我完全离开它看起来`.objswitch`应该是`+ objswitch`。

尝试

```
console.log('objectid is:' + objswitch.id); 
```

代替

```
console.log('objectid is:'.objswitch.id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:22:40.963

看起来你的连接语法是错误的。应该使用**+**来完成，我看到你使用的是**.** 而不是 objswitch 尝试使用这个

```
$.each(JSONdata, function(i) {                           
    console.log('objectid is:' +  this.id);
    console.log(this.id);
    var row = $('<tr>').appendTo($('#switchrecords'));
    row.append($('<td>').append($('<a href='+ BASEPATH + 'index.php/switches/getswitchdetails/' + this.id + '>').text(this.name)));
    row.append($('<td>').append(this.id).text(this.id));
}); 
```

否则尝试一般使用该变量

```
$.each(JSONdata, function(i) {                           
    console.log('objectid is:'+  JSONdata[i].id);
    console.log(JSONdata[i].id);
    var row = $('<tr>').appendTo($('#switchrecords'));
    row.append($('<td>').append($('<a href='+ BASEPATH + 'index.php/switches/getswitchdetails/' + JSONdata[i].id + '>').text(JSONdata[i].name)));
    row.append($('<td>').append(JSONdata[i].id).text(JSONdata[i].id));
}); 
```

# scala - 运行 sbt 导致“com.typesafe.sbteclipse#sbteclipse;1.4.0: not found”

> ID：12521065
> 
> 赞同：6
> 
> 时间：2012-09-20T21:18:12.527
> 
> 标签：scala, sbt

我正在运行 Windows 7 x64 cygwin。

在大约一年前安装了以前的版本之后，我刚刚为 Martin Odersky 的 Coursera Scala 课程安装了最新的 sbt。首先，我尝试删除旧版本并使用 msi 安装程序。`sbt`从空目录运行时返回以下错误。

后来我尝试卸载 msi 版本并手动安装（最新）`sbt-launch.jar`文件并从旧脚本中调用它。我得到了同样的错误。

有什么想法有什么问题吗？某处是否有可能导致此问题的 sbt 插件目录？

```
~/dummy > sbt
[info] Loading global plugins from C:\Users\Jeff\.sbt\plugins
[info] Updating {file:/C:/Users/Jeff/.sbt/plugins/}default-46e191...
[info] Resolving com.typesafe.sbteclipse#sbteclipse;1.4.0 ...
[warn]  module not found: com.typesafe.sbteclipse#sbteclipse;1.4.0
[warn] ==== typesafe-ivy-releases: tried
[warn]   http://repo.typesafe.com/typesafe/ivy-releases/com.typesafe.sbteclipse/sbteclipse/scala_2.9.2/sbt_0.12/1.4.0/ivys/ivy.xml
[warn] ==== sbt-plugin-releases: tried
[warn]   http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases/com.typesafe.sbteclipse/sbteclipse/scala_2.9.2/sbt_0.12/1.4.0/ivys/ivy.xml
[warn] ==== local: tried
[warn]   C:\Users\Jeff\.ivy2\local\com.typesafe.sbteclipse\sbteclipse\scala_2.9.2\sbt_0.12\1.4.0\ivys\ivy.xml
[warn] ==== typesafe-ivy-releases: tried
[warn]   http://repo.typesafe.com/typesafe/ivy-releases/com.typesafe.sbteclipse/sbteclipse/scala_2.9.2/sbt_0.12/1.4.0/ivys/ivy.xml
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/com/typesafe/sbteclipse/sbteclipse_2.9.2_0.12/1.4.0/sbteclipse-1.4.0.pom
[info] Resolving org.scala-sbt#sbt;0.12.0 ...
[info] Resolving org.scala-sbt#main;0.12.0 ...
[info] Resolving org.scala-sbt#actions;0.12.0 ...
[info] Resolving org.scala-sbt#classpath;0.12.0 ...
[info] Resolving org.scala-sbt#launcher-interface;0.12.0 ...
[info] Resolving org.scala-lang#scala-library;2.9.2 ...
[info] Resolving org.scala-sbt#interface;0.12.0 ...
[info] Resolving org.scala-sbt#io;0.12.0 ...
[info] Resolving org.scala-sbt#control;0.12.0 ...
[info] Resolving org.scala-lang#scala-compiler;2.9.2 ...
[info] Resolving org.scala-sbt#completion;0.12.0 ...
[info] Resolving org.scala-sbt#collections;0.12.0 ...
[info] Resolving jline#jline;1.0 ...
[info] Resolving org.scala-sbt#api;0.12.0 ...
[info] Resolving org.scala-sbt#compiler-integration;0.12.0 ...
[info] Resolving org.scala-sbt#incremental-compiler;0.12.0 ...
[info] Resolving org.scala-sbt#logging;0.12.0 ...
[info] Resolving org.scala-sbt#process;0.12.0 ...
[info] Resolving org.scala-sbt#compile;0.12.0 ...
[info] Resolving org.scala-sbt#persist;0.12.0 ...
[info] Resolving org.scala-tools.sbinary#sbinary_2.9.0;0.4.0 ...
[info] Resolving org.scala-sbt#classfile;0.12.0 ...
[info] Resolving org.scala-sbt#compiler-ivy-integration;0.12.0 ...
[info] Resolving org.scala-sbt#ivy;0.12.0 ...
[info] Resolving org.apache.ivy#ivy;2.3.0-rc1 ...
[info] Resolving com.jcraft#jsch;0.1.46 ...
[info] Resolving commons-httpclient#commons-httpclient;3.1 ...
[info] Resolving commons-logging#commons-logging;1.0.4 ...
[info] Resolving commons-codec#commons-codec;1.2 ...
[info] Resolving org.scala-sbt#run;0.12.0 ...
[info] Resolving org.scala-sbt#task-system;0.12.0 ...
[info] Resolving org.scala-sbt#tasks;0.12.0 ...
[info] Resolving org.scala-sbt#tracking;0.12.0 ...
[info] Resolving org.scala-sbt#cache;0.12.0 ...
[info] Resolving org.scala-sbt#testing;0.12.0 ...
[info] Resolving org.scala-sbt#test-agent;0.12.0 ...
[info] Resolving org.scala-tools.testing#test-interface;0.5 ...
[info] Resolving org.scala-sbt#command;0.12.0 ...
[info] Resolving org.scala-sbt#compiler-interface;0.12.0 ...
[info] Resolving org.scala-sbt#precompiled-2_8_2;0.12.0 ...
[info] Resolving org.scala-sbt#precompiled-2_10_0-m4;0.12.0 ...
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: com.typesafe.sbteclipse#sbteclipse;1.4.0: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]
[warn]  Note: Some unresolved dependencies have extra attributes.  Check that these dependencies exist with the requested attributes.
[warn]          com.typesafe.sbteclipse:sbteclipse:1.4.0 (sbtVersion=0.12, scalaVersion=2.9.2)
[warn]
sbt.ResolveException: unresolved dependency: com.typesafe.sbteclipse#sbteclipse;1.4.0: not found
        at sbt.IvyActions$.sbt$IvyActions$$resolve(IvyActions.scala:211)
        at sbt.IvyActions$$anonfun$update$1.apply(IvyActions.scala:122)
        at sbt.IvyActions$$anonfun$update$1.apply(IvyActions.scala:121)
        at sbt.IvySbt$Module$$anonfun$withModule$1.apply(Ivy.scala:114)
        at sbt.IvySbt$Module$$anonfun$withModule$1.apply(Ivy.scala:114)
        at sbt.IvySbt$$anonfun$withIvy$1.apply(Ivy.scala:102)
        at sbt.IvySbt.liftedTree1$1(Ivy.scala:49)
        at sbt.IvySbt.action$1(Ivy.scala:49)
        at sbt.IvySbt$$anon$3.call(Ivy.scala:58)
        at xsbt.boot.Locks$GlobalLock.withChannel$1(Locks.scala:75)
        at xsbt.boot.Locks$GlobalLock.withChannelRetries$1(Locks.scala:58)
        at xsbt.boot.Locks$GlobalLock$$anonfun$withFileLock$1.apply(Locks.scala:79)
        at xsbt.boot.Using$.withResource(Using.scala:11)
        at xsbt.boot.Using$.apply(Using.scala:10)
        at xsbt.boot.Locks$GlobalLock.liftedTree1$1(Locks.scala:51)
        at xsbt.boot.Locks$GlobalLock.withLock(Locks.scala:51)
        at xsbt.boot.Locks$.apply0(Locks.scala:30)
        at xsbt.boot.Locks$.apply(Locks.scala:27)
        at sbt.IvySbt.withDefaultLogger(Ivy.scala:58)
        at sbt.IvySbt.withIvy(Ivy.scala:99)
        at sbt.IvySbt.withIvy(Ivy.scala:95)
        at sbt.IvySbt$Module.withModule(Ivy.scala:114)
        at sbt.IvyActions$.update(IvyActions.scala:121)
        at sbt.Classpaths$$anonfun$work$1$1.apply(Defaults.scala:949)
        at sbt.Classpaths$$anonfun$work$1$1.apply(Defaults.scala:947)
        at sbt.Classpaths$$anonfun$doWork$1$1$$anonfun$54.apply(Defaults.scala:970)
        at sbt.Classpaths$$anonfun$doWork$1$1$$anonfun$54.apply(Defaults.scala:968)
        at sbt.Tracked$$anonfun$lastOutput$1.apply(Tracked.scala:35)
        at sbt.Classpaths$$anonfun$doWork$1$1.apply(Defaults.scala:972)
        at sbt.Classpaths$$anonfun$doWork$1$1.apply(Defaults.scala:967)
        at sbt.Tracked$$anonfun$inputChanged$1.apply(Tracked.scala:45)
        at sbt.Classpaths$.cachedUpdate(Defaults.scala:975)
        at sbt.Classpaths$$anonfun$45.apply(Defaults.scala:855)
        at sbt.Classpaths$$anonfun$45.apply(Defaults.scala:852)
        at sbt.Scoped$$anonfun$hf10$1.apply(Structure.scala:586)
        at sbt.Scoped$$anonfun$hf10$1.apply(Structure.scala:586)
        at scala.Function1$$anonfun$compose$1.apply(Function1.scala:49)
        at sbt.Scoped$Reduced$$anonfun$combine$1$$anonfun$apply$12.apply(Structure.scala:311)
        at sbt.Scoped$Reduced$$anonfun$combine$1$$anonfun$apply$12.apply(Structure.scala:311)
        at sbt.$tilde$greater$$anonfun$$u2219$1.apply(TypeFunctions.scala:40)
        at sbt.std.Transform$$anon$5.work(System.scala:71)
        at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:232)
        at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:232)
        at sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:18)
        at sbt.Execute.work(Execute.scala:238)
        at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:232)
        at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:232)
        at sbt.ConcurrentRestrictions$$anon$4$$anonfun$1.apply(ConcurrentRestrictions.scala:159)
        at sbt.CompletionService$$anon$2.call(CompletionService.scala:30)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
[error] (*:update) sbt.ResolveException: unresolved dependency: com.typesafe.sbteclipse#sbteclipse;1.4.0: not found
Project loading failed: (r)etry, (q)uit, (l)ast, or (i)gnore? q 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T21:33:36.217

我的旧安装安装了旧版本的`sbteclipse`插件。我终于想起了`.sbt`Windows上的目录是在`C:\Users\[username]`文件夹中。

编辑`build.sbt`文件`C:\Users\[username]\plugins`夹中的文件并根据[sbtplugin 页面](https://github.com/typesafehub/sbteclipse#for-the-impatient)，将该`addSbtPlugin`行替换为：

```
addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.1.0") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T15:46:36.160

你确定你在正确的目录中启动了 sbt，即 progfun/example 吗？而不是被混淆地命名为 progfun/example/project 的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T11:56:03.557

我不得不补充：

```
resolvers += Classpaths.typesafeResolver

addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.5.0") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-12T09:36:35.410

如果有人仍然遇到此错误，请尝试以下操作。

```
addSbtPlugin("com.typesafe.sbteclipse"%"sbteclipse-plugin"%"5.2.4") 
```

请注意，`sbteclipse-plugin`现在的版本是 5.2.4 而不是 5.1.0。为了将来参考，只需更新到最新版本的`sbteclipse-plugin`.

# instagram - 有什么方法可以显示 20 多张 instagram API 的照片？

> ID：12521081
> 
> 赞同：3
> 
> 时间：2012-09-20T21:19:21.233
> 
> 标签：instagram

我正在尝试在这样的网站中显示 20 多张照片供稿：

[http://snap20.com.br/instagram/](http://snap20.com.br/instagram/)

有什么办法可以显示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-20T09:39:06.123

简单的。只需`&count=-1`在您的 api 调用后面附加即可。例如：

```
https://api.instagram.com/v1/tags/YOURTAG/media/recent?access_token=YOURACCESSTOKEN&count=-1 
```

*** 2014 年 4 月更新**（学分：@user1406691）：`count=-1`不再可用。回复：

```
{"meta":{"error_type":"APIInvalidParametersError","code":400,
"error_message":"Count must be larger than zero."}} 
```

您可能希望改用它：

```
https://api.instagram.com/v1/tags/YOURTAG/media/recent?access_token=YOURACCESSTOKEN&count=35 
```

还有另一种通过 rss + db 的方法，但它更长，虽然它不限于 30 次调用/小时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-18T22:16:46.787

实际上，有机会获得接下来的 20 张图片，然后是接下来的 20 张等等……在 JSON 响应中有一个“**分页**”数组：

```
 "pagination":{
      "next_max_tag_id":"1411892342253728",
      "deprecation_warning":"next_max_id and min_id are deprecated for this endpoint; use min_tag_id and max_tag_id instead",
      "next_max_id":"1411892342253728",
      "next_min_id":"1414849145899763",
      "min_tag_id":"1414849145899763",
      "next_url":"https:\/\/api.instagram.com\/v1\/tags\/lemonbarclub\/media\/recent?client_id=xxxxxxxxxxxxxxxxxx\u0026max_tag_id=1411892342253728"
 } 
```

这是有关特定 API 调用的信息，对象“ **next_url** ”显示了获取接下来 20 张图片的 URL，因此只需获取该 URL 并为接下来的 20 张图片调用它......

有关 Instagram API 的更多信息，请查看：[https ://medium.com/@KevinMcAlear/getting-friendly-with-instagrams-api-abe3b929bc52](https://medium.com/@KevinMcAlear/getting-friendly-with-instagrams-api-abe3b929bc52)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T13:11:23.613

Instagram 对其 API 有 20 张图片限制，请查看此线程和我的答案：

[Instagram 的最大请求数是多少？](https://stackoverflow.com/questions/12322028/what-is-the-maximum-number-of-requests-for-instagram)

另外，请查看此链接以绕过分页并显示所有结果：

[http://thegregthompson.com/displaying-instagram-images-ignoring-page-pagination/](http://thegregthompson.com/displaying-instagram-images-ignoring-page-pagination/)

# c# - C# 在加载 void 后执行某些操作

> ID：12521093
> 
> 赞同：-2
> 
> 时间：2012-09-20T21:19:55.053
> 
> 标签：c#

从 API 下载数据后，我尝试使用数据。我的代码示例：

```
private int id;
public MainPage()
{
    InitializeComponent();
    SomeFunction();
}
public void SomeFunction()
{
    DownloadFromAPI("url to api");
    MessageBox.Show(id.ToString());  //<< Returns 0
}
public void DownloadFromAPI(DownloadStringCompletedEventArgs url)
{
    //code to retrieve data (singel id)
    id = Int16.Parse(data);
    MessageBox.Show(id.ToString());  //<< Returns the correct number, like 14
    test();
}
private void test()
{
    MessageBox.Show(id.ToString());  //<< Even Returns the correct number 14 
} 
```

完成后如何加载id信息`DownloadFromAPI("url to api");`。所以我得到正确的数字（14）而不是0？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T21:22:19.480

我怀疑你的方法*实际上*是这样的：

```
public void DownloadFromAPI(...)
{
    int id = Int16.Parse(data);
    MessageBox.Show(id.ToString());  //<< Returns the correct number, like 14
} 
```

那是在方法中声明一个新的局部变量，而不是为实例变量赋值。

但是，就个人而言，我通常更喜欢编写返回值的方法：

```
public int DownloadFromApi(...)
{
    return Int16.Parse(data);
} 
```

当然，如果这确实是对象内的自然状态，那可能是有道理的——但通常编写只计算一个值并返回它的代码比进入突变领域更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:48:39.823

无论您是否将“id”保留在本地类成员中，无论哪种方式，您通常都应该让您的方法对输入进行操作并产生任何相关的输出，而无需引用其本地堆栈之外的内容。我会选择以下内容：

```
public MainPage() 
{ 
  InitializeComponent(); 
  SomeFunction(); 
} 

public void SomeFunction() 
{ 
    int id;
    DownloadFromAPI("url to api", out id); 
    MessageBox.Show(id.ToString());
} 

public void DownloadFromAPI(url, out int id) 
{ 
  //retrieve data...

  // set id...
  id = Int16.Parse(data); 
} 
```

# date - vb Format(now + 1, "mm") 等于加一天还是一个月？

> ID：12521099
> 
> 赞同：0
> 
> 时间：2012-09-20T21:20:29.390
> 
> 标签：date, vb6, format

由于“mm”显示月份，我不确定

```
Format(now + 1, "mm") 
```

will now + 1 个月或 + 1 天 哪个是正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:06:06.417

现在 + 1 增加一天。不管你如何格式化它。

日期在内部存储为实数的整个部分，并计算为自 1899 年 12 月 30 日以来的天数。
所以今天，2012 年 9 月 20 日，内部存储为 41172。明天将是 41173。

如果您想知道，时间存储为数字的小数部分，并计算为一天的百分比。所以 41172.5 今天是中午。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T22:17:04.397

不要猜测它。使用专门为此构建的函数**DateAdd**。有关完整的详细信息，请参阅[有关 DateAdd 的 VB6 帮助主题。](http://msdn.microsoft.com/en-us/library/aa262710%28v=vs.60%29.aspx)

```
Date  = DateAdd("m", 1, Now) 
```

# jquery - jQuery 和鼠标悬停事件

> ID：12521100
> 
> 赞同：0
> 
> 时间：2012-09-20T21:20:31.470
> 
> 标签：jquery, live, mouseover

我需要知道如何解决这个问题。我的列表上有一个 mouseleave 事件。

```
jQuery(".list").live("mouseleave", function(event) {

    alert("Boom");

}); 
```

但同时我在它上面显示了一个工具提示。此工具提示不属于此列表，它在其他 div 中。

现在，当我将鼠标移到那个 div 上时，我收到了一个警报——我离开了列表。

请告诉我，当我在此工具提示中移动鼠标时，我该怎么做，不会有任何动作。

我试过这句话，但它不起作用：

```
if($(event.target).hasClass('name')) alert("D"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:32:32.350

这是您的问题的有效解决方案：http: [//jsfiddle.net/SVzv5/8/](http://jsfiddle.net/SVzv5/8/)

在此示例中，红色方块是您的列表，蓝色方块是您的工具提示。在 jsfiddle 上与他们互动以查看他们的工作。

html代码：

```
<div id="under"></div>
<div id="over"></div> 
```

jQuery代码：

```
$('#under').bind('mouseover', function () {
    $(this).css({background:'yellow'});
}).bind('mouseout', function () {
    $(this).css({background:'red'});
}); 
```

CSS 代码：

```
#under {
    position:absolute;
    width:200px;
    height:200px;
    top:0;
    left:0;
    background:red;
    display:block;
    cursor:pointer;
}
#over {
    position:absolute;
    width:200px;
    height:200px;
    top:100px;
    left:100px;
    background:blue;
    display:block;
    pointer-events: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:31:32.093

基本上，您需要执行您的事件处理程序，并在鼠标进入您的工具提示时取消它。它将通过以下方式实现：

变量超时；

```
handler = function () { 
    // handler 
};

jQuery('.list').bind('mouseout', function (event) {
    timeout = setTimeout(handler, 250);
});

jQuery('#tooltipId').bind('mouseover', function (event) {
    clearTimeout(timeout);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:43:47.263

您可以使用事件中的`relatedTarget`属性`mouseleave`，它包含`mouseleave`事件触发时鼠标所在的元素的对象：

```
jQuery('.list').bind('mouseleave', function(event) {
  if(jQuery(event.relatedTarget).attr('id') != 'yourToolTipId') {
    alert("Boom");
  }
}); 
```

# nosql - 在 Couchbase 的 Observe 功能中，“persistTo”和“replicateTo”有什么区别？

> ID：12521102
> 
> 赞同：1
> 
> 时间：2012-09-20T21:20:31.843
> 
> 标签：nosql, couchbase, consistency

在[Couchbase API](http://www.couchbase.com/docs/couchbase-sdk-java-1.1/couchbase-sdk-java-set-observe.html)中，有存储和删除操作，允许您指定一个操作必须在返回之前成功持久化到多少个节点。这通过两个方法参数表示：

我的问题是：persistTo 和 replicateTo 参数有什么区别。例如，传入 PersistTo.MASTER + ReplicateTo.THREE 似乎与传入 PersistTo.FOUR 完全相同。以这两种不同的风格调用这些观察到的 API 之间实际上是否存在任何行为差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:41:36.793

PersistTo.MASTER + ReplicateTo.THREE 意味着该项目至少必须在主节点的磁盘上，并且至少在三个副本节点的内存中。在这种情况下，该项目可能不会保留在副本上。

PersistTo.FOUR 意味着该项目必须在主服务器和三个副本上持久化。

考虑事情的一个好方法是，仅仅因为一个项目被复制到另一个节点并不意味着该项目已被持久化到磁盘。

# pagination - 带有轨道条件的 Kaminari 分页

> ID：12521103
> 
> 赞同：1
> 
> 时间：2012-09-20T21:20:34.547
> 
> 标签：pagination, ruby-on-rails-3.2, kaminari

我正在尝试在我的 Rails 项目中为 Kaminari 分页添加条件，但我发现这几乎是不可能的。这是我的代码

```
 UserController
#feed=Feed.order('created_at desc').page(params[:page], :conditions=>["source=? or        source=?","beep","sub_beep"]) 
```

以上不起作用所以我尝试了以下

```
 @feed1 = Feed.find(:all,:conditions=>["source=? or source=?","beep","sub_beep"])
  @feed= Kaminari.paginate_array(@feed1).page(params[:page]).per(2) 
```

以上显示内容，但每页不显示 2 个内容，并且显示的元素没有排序。

我需要一种方法来为 kaminari 分页添加条件并对结果进行排序

请我需要帮助！:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:38:32.077

Kaminari 旨在仅与 ActiveRecord 3+ 样式的查询界面一起使用。

请避免使用`:conditions`迟早会弃用的“Hasheritis”语法，而是使用`where`方法链。

`where`Rails 指南中详细记录了该方法的用法：http: [//guides.rubyonrails.org/active_record_querying.html#conditions](http://guides.rubyonrails.org/active_record_querying.html#conditions)

你的控制器代码应该是这样的：

```
feeds = Feed.where(:source => ['beep', 'sub_beep']).order('created_at desc').page(params[:page]) 
```

# android - 从其他活动调用网络状态检查

> ID：12521107
> 
> 赞同：0
> 
> 时间：2012-09-20T21:21:07.537
> 
> 标签：android, class, android-activity, timeout, network-state

我意识到这个问题之前已经回答过，但找不到适合我具体案例的答案。

我想创建一个名为“InternetConnectionChecks”的类，它将处理检查网络状态和 http 超时。我将在应用程序中调用这些方法两次（一次是在开始时从服务器获取数据，一次在结束时将用户订单发送到服务器）。

为了获得良好的形式，我想将所有这些方法放在一个类中，而不是在我的代码中的不同点复制/粘贴。

要检查网络状态，我使用的是 ConnectivityManager；问题是，getSystemService 需要一个扩展 Activity 的类。

```
package arbuckle.app;

import android.app.Activity;
import android.app.Service;
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

public class InternetConnectionChecks extends Activity {

    public boolean isNetworkAvailable(){
        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
        if ((activeNetworkInfo != null)&&(activeNetworkInfo.isConnected())){
            return true;
        }else{
            return false;
        }
    }

} 
```

问题：我需要在非活动的类中使用此代码；事实上，我想在一个单独的类中设置这个方法，它不是一个活动。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:36:42.753

使用静态方法创建 util 类

```
public class Utils{

public static boolean isNetworkAvailable(Context context){
    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    if ((activeNetworkInfo != null)&&(activeNetworkInfo.isConnected())){
        return true;
    }else{
        return false;
    }
} 
```

}

活动内部使用

```
boolean isNetworkAvailable = Utils.isNetworkAvailable(this); 
```

# excel - 导出到文本文件的 EXCEL VBA 代码仅在设置断点时才有效

> ID：12521109
> 
> 赞同：3
> 
> 时间：2012-09-20T21:21:12.503
> 
> 标签：excel, vba

我有一些代码可以将电子表格中的数据导出到逗号分隔的文件中。如果我在代码中的任何位置设置了断点，则数据会按预期导出到文件中。如果我没有断点，则创建的文件没有任何数据。认为这是一个时间问题，我在代码中尝试了一个等待周期，但这并没有解决问题。这是代码：

```
Private Sub WriteDataToFile()  
Dim i As Long
Dim iLastRow As Integer
Dim strFile As String
Dim FSO As FileSystemObject
Dim FSOFile As TextStream
Dim strData As String
Dim s As String

strFile = "C:\Temp\DSGELIG.txt"
'  Delete the file if it already exists
DeleteFile (strFile)

'  Determine the last row
iLastRow = 50
For i = 2 To 65000
    strData = Range("B" + CStr(i))
    If Len(strData) < 1 Then
        iLastRow = i - 1
        Exit For
    End If
Next i

'  Create the file system object
Set FSO = New FileSystemObject
Set FSOFile = FSO.OpenTextFile(strFile, ForWriting, True)

For i = 2 To iLastRow
    strData = ""
    With Worksheets(1)
        'Debug.Print Range("B" + CStr(i))
        strData = """"
        '  Patient Name
        strData = strData + Range("B" + CStr(i))
        strData = strData + """" + "," + """"
        '  SSN / Policy #
        strData = strData + Range("C" + CStr(i))
        strData = strData + """" + "," + """"
        '  Birthdate
        strData = strData + CStr(Range("D" + CStr(i)))
        strData = strData + """" + "," + """"
        '  Admit Date
        strData = strData + CStr(Range("E" + CStr(i)))
        strData = strData + """" + "," + """"
        '  Admit Date - 2
        strData = strData + CStr(Range("F" + CStr(i)))
        strData = strData + """" + "," + """"
        '  Account Number
        strData = strData + CStr(Range("G" + CStr(i)))
        strData = strData + """" + "," + """"
        '  Insurance Code
        strData = strData + Range("H" + CStr(i))
        strData = strData + """" + "," + """"
        '  Financial Class
        strData = strData + Range("I" + CStr(i))
        strData = strData + """" + "," + """"
        '  Location
        strData = strData + Range("J" + CStr(i))
        strData = strData + """"

        '  Write the record to the file
        FSOFile.WriteLine (strData)
    End With

Next i

FSOFile.Close

End Sub 
```

提前谢谢你 - 我已经有一段时间没有做过任何 VBA 了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:34:24.263

更新了我如何从头开始执行此操作：

```
Option Explicit

Sub Test()
    Dim FSO As New FileSystemObject
    Dim ts As TextStream
    Dim WS As Worksheet
    Dim arrData(9) As String
    Dim strFile As String, strData As String
    Dim iLastRow As Integer, i As Integer, j As Integer

    strFile = "C:\Temp\DSGELIG.txt"
    Set ts = FSO.CreateTextFile(strFile, True)
    Set WS = ThisWorkbook.Worksheets(1)
    iLastRow = WS.UsedRange.SpecialCells(xlCellTypeLastCell).Row

    With WS
        For i = 2 To iLastRow
            For j = 2 To 10
                arrData(j - 2) = """" & CStr(.Cells(i, j)) & """"
            Next j

            strData = Join(arrData, ",")
            ts.WriteLine Left(strData, Len(strData) - 1)
        Next i
    End With

    ts.Close

    Set ts = Nothing
    Set FSO = Nothing
End Sub 
```

不需要删除文件的代码，因为您可以简单地设置`overwrite`为`true`in `CreateTextFile()`。

我已经对此进行了测试，并且在写入文件时没有遇到任何问题。我什至尝试根据您的原始导出创建一组可能与您的数据相当的数据，并且效果很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T22:17:15.453

我修改了一些 Kittoes 代码，如下所示：

```
Sub Test()

    Dim FSO As New FileSystemObject
    Dim ts As TextStream
    Dim strFile As String, strData As String
    Dim iLastRow As Integer, i As Long, c As Long

    strFile = "C:\Temp\DSGELIG.txt"

    '  Determine the last row
    iLastRow = Cells(Rows.Count, 2).End(xlUp).Row

    '  Create the file system object
    Set ts = FSO.CreateTextFile(strFile, True)
    With Worksheets(1)
        For i = 2 To iLastRow
            strData = ""
            For c = 2 To 10
                strData = "'" & strData & .Cells(i, c) & "',"
            Next c

            '  Write the record to the file without the last comma
            ts.WriteLine Left(strData, Len(strData) - 1)
        Next i
    End With

    ts.Close

    Set ts = Nothing
    Set FSO = Nothing

End Sub 
```

我必须说我从来没有使用过 FSO.CreateFile 和其他的。我通常使用旧`Print #1`语法。如果可以的话，我通常会尽量避免任何额外的参考。

# linux - 在 shell 脚本中获取规范时区名称

> ID：12521114
> 
> 赞同：21
> 
> 时间：2012-09-20T21:21:32.373
> 
> 标签：linux, shell, time, timezone

有没有办法从 Linux shell 脚本中获取规范时区名称？例如，如果我配置的时区是 PDT，那么我想获得“America/Los_Angeles”。

我知道如果配置了符号链接 /etc/localtime ，我可以得到它，但由于它可能未在所有服务器中配置，我不能依赖那个。
另一方面，我可以使用命令 date +%Z 获得短时区名称，但我仍然需要规范名称。

即使没有设置符号链接 /etc/localtime ，有没有办法获取当前时区的规范名称或转换使用 date +%Z 命令获得的时区？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-21T01:57:56.123

这比听起来要复杂得多。大多数 linux 发行版的做法都不同，因此没有 100% 可靠的方法来获取 Olson TZ 名称。

以下是我过去使用的启发式方法：

1.  首先检查/etc/timezone，如果存在就使用它。
2.  接下来检查 /etc/localtime 是否是时区数据库的符号链接
3.  否则在 /usr/share/zoneinfo 中找到与文件 /etc/localtime 内容相同的文件

未经测试的示例代码：

```
if [ -f /etc/timezone ]; then
  OLSONTZ=`cat /etc/timezone`
elif [ -h /etc/localtime ]; then
  OLSONTZ=`readlink /etc/localtime | sed "s/\/usr\/share\/zoneinfo\///"`
else
  checksum=`md5sum /etc/localtime | cut -d' ' -f1`
  OLSONTZ=`find /usr/share/zoneinfo/ -type f -exec md5sum {} \; | grep "^$checksum" | sed "s/.*\/usr\/share\/zoneinfo\///" | head -n 1`
fi

echo $OLSONTZ 
```

请注意，这个快速示例不处理多个 TZ 名称与给定文件匹配的情况（在查看 /usr/share/zoneinfo 时）。消除适当的 TZ 名称的歧义将取决于您的应用程序。

-缺口

# mysql - 如何在mysql中获取语法错误的具体描述

> ID：12521116
> 
> 赞同：3
> 
> 时间：2012-09-20T21:21:47.013
> 
> 标签：mysql, mysql-error-1064

在完成问题之前，我的具体问题已解决。但我还有一个普遍的问题。它可能是重复的，但很抱歉我无法在 SO 或其他地方找到它。

我有一张名为`reports`. 有一行包含数据。当我尝试执行更新查询时，出现错误：

> 错误 1064：第 1 行的 'table='defect',Filter='',dtFilter='',query='Select allfields from defect' ,'da' 附近的 sql 语法有错误

我的问题：有没有办法得到我的具体错误？因为它只是告诉 SQL 语法中存在错误，但没有说明错误是什么类型。

我是否总是需要在谷歌上搜索此类错误，或者是否有一些技术可以在本地获取它们的确切具体描述？

背景（可选阅读）：正常谷歌搜索后，我在发布问题以更好地谷歌搜索时得到提示，并解决了我的具体问题，因为我知道这是保留词的问题`table and datetime`。当我在这些词周围加上引号时，问题就解决了。这通常发生在我身上。但我的一般问题仍然存在......

我现在没用了，但我[在 sqlfiddle 上](http://sqlfiddle.com/#!2/1d836/1)分享我的架构，它可能有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:54:58.790

MySQL 不能告诉你你在错误的地方使用了保留字（或者你的地方是正确的但使用的词是保留字，它无法区分），它只看到你输入的内容，它不能读心，所以它不知道你不小心使用（比如说） order 作为字段名，它只会在错误的地方看到查询的有效部分。例如......语法错误。它也不会报告查询中的所有语法错误，因为一个语法错误会使整个事情出错。它不能跳过一个单词并继续解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:23:40.903

不——它只是告诉你位置，希望这是一个不错的线索。

# php - 如何使用php插入具有特定间隔的日期

> ID：12521120
> 
> 赞同：0
> 
> 时间：2012-09-20T21:22:10.420
> 
> 标签：php, mysql, calendar

我有一个要上传到 mysql 的日历事件列表。其中一些事件每周发生，一些事件每月发生。我还希望能够在插入的每一行中插入一个特定的周数。例如

![周](../Images/9f1aea24b9268ea48c2d3456e6eefc1a.png)

我试图做的这部分代码没有做我想做的事。屏幕上没有显示错误，也没有行插入到数据库中。

```
<?php 
    if(isset($_POST['myform'])){

            $day = array("1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31");
            $month = array("January","February","March","April","May","June","July","August","September","October","November","December");
            $year = array("2011", "2012", "2013", "2014", "2015", "2016"); 

            $startday = $_POST['day'];
            $eventplace = $_POST['eventplace'];
            $eventname = $_POST['eventname'];
            $eventtime = $_POST['eventtime'];

            for($i=0; $i<count($year); $i++){

                for($j=0; $j<count($month); $j++){

                    for($k=$startday; $k<count($day); $k = $k + 7){

                  $query = mysql_query(" INSERT INTO caldemo(day, month, year, eventname, eventtime, eventplace)
                                         VALUES ('".$k."', '".$month[$j]."', '".$year[$i]."', '".$eventname."', '".$eventtime."', '".$eventplace."', )") ;
                  }
                }
             } 
          }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:55:54.873

好吧，您拥有的代码没有将值输入数据库，因为您的 sql 中有语法错误。**最后，您在$eventplace**之后有一个额外的逗号。

如果你想要周数，你可以使用[mktime](http://php.net/manual/en/function.mktime.php)来获取时间戳，然后[使用](http://php.net/manual/en/function.date.php)'W' 标志来获取周数。

话虽如此，您可能还想重新考虑您的表格。将事件信息存储在一个表中，并将每次发生的事件存储在另一个表中。这样可以使您的元信息（名称、描述、位置）分开，并且不会在同一张表中重复 5000 万次。您还可以从中获得一些其他的好处，但还有一次。

就像 Marc B 说的那样，至少使用 mysql_real_escape_string。正如您所拥有的那样，有人甚至可能*无意中*破坏了您的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:34:55.327

There is a Komma Too much After eventplace

# android - i-nigma sdk/源代码

> ID：12521123
> 
> 赞同：2
> 
> 时间：2012-09-20T21:22:35.560
> 
> 标签：android, ios, sdk

我有适用于 Android 和 iOS 的 i-nigma sdk 和源代码，但我不知道该怎么办 我需要在应用程序中添加一些东西 更改设计等等 我拥有制作应用程序所需的所有文件事物：

*   可以从库中扫描代码
*   能够扫描代码并按照显示的内容行事
*   能够用照片生成代码
*   历史和流行
*   能够分享 Facebook、电子邮件、短信等。
*   应用模块内的广告能力
*   推送消息的能力
*   有奖竞赛扫描仪
*   通过应用程序的推荐管理系统

其中大部分是在 sdk/源代码中构建的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T09:38:46.363

您必须联系 3GVision 支持： [http](http://www.i-nigma.com/qr-barcode-reader-sdk.html) ://www.i-nigma.com/qr-barcode-reader-sdk.html 如果您从他们那里获得 SDK，我认为他们会帮助您集成 SDK。

# facebook-graph-api - 刷新特定用户的过期访问令牌

> ID：12521125
> 
> 赞同：2
> 
> 时间：2012-09-20T21:22:44.823
> 
> 标签：facebook-graph-api, access-token, facebook-oauth, facebook-access-token

我正在构建的应用程序将 user_id 映射到多个 facebook 帐户。我对每个映射帐户都有访问令牌，并且一切正常。但是，当这些访问令牌之一过期但用户以与过期访问令牌所属用户不同的用户身份登录 Facebook 时，就会出现问题。

我阅读了有关为当前登录的用户获取新访问令牌的所有内容，但我没有发现访问令牌过期的用户未登录 Facebook 的情况。

我会很感激你的想法和可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:17:57.663

用户不能拥有多个 Facebook 帐户，因此您的部分问题并不完全有意义，但一般来说，如果访问令牌过期，您需要用户返回您的应用程序并再次通过[身份验证](https://developers.facebook.com/docs/authentication/)流程，这将为您提供该用户的新访问令牌

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T20:42:18.640

我相信获得更新的访问令牌的唯一方法是从初始登录屏幕再次完成整个身份验证过程。

根据您构建应用程序所使用的技术，我可以想象您在不注销现有帐户的情况下登录 Facebook 帐户的唯一方法是设置 Web 浏览器的并行实例，只要它们不要分享饼干之类的东西。

# python - 有没有更好的方法来使用 Jinja/Flask 应用 nl2br 过滤器？

> ID：12521127
> 
> 赞同：0
> 
> 时间：2012-09-20T21:22:49.673
> 
> 标签：python, regex, flask, template-engine, jinja2

我正在使用带有 Flask 的 Jinja（启用自动转义）并且我正在尝试应用[此过滤器](http://flask.pocoo.org/snippets/28/)

```
import re

from jinja2 import evalcontextfilter, Markup, escape

_paragraph_re = re.compile(r'(?:\r\n|\r|\n){2,}')

app = Flask(__name__)

@app.template_filter()
@evalcontextfilter
def nl2br(eval_ctx, value):
    result = u'\n\n'.join(u'<p>%s</p>' % p.replace('\n', '<br>\n') \
        for p in _paragraph_re.split(escape(value)))
    if eval_ctx.autoescape:
        result = Markup(result)
    return result 
```

它的问题是它从不应用`<br>`s 并且总是`<p>`在每一行周围应用 s。

如果我输入：

```
1
2

3
4 
```

在 a 中`textarea`，它以 "u'1\r\n2\r\n\r\n3\r\n4'" 的形式保存到数据库中，当使用`|nl2br`过滤器放入 Jinja 时，它会显示为

```
<p>1</p>

<p>2</p>

<p>3</p>

<p>4</p> 
```

我正在寻找它

```
<p>1<br>2</p>
<p>3<br>4</p> 
```

这种正则表达式方法对于我所追求的来说似乎有点过分了。

请告诉我有一种更简单的方法可以实现这一点，因为我整天都在拉头发试图弄清楚......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T22:00:06.047

更简单不，但是稍微复杂一点怎么样？试试这个正则表达式：

```
(?:\r\n|\r(?!\n)|\n){2,} 
```

原始的正则表达式`\r\n`首先匹配为单行分隔符，但需要匹配其中两个，因此它会回溯并匹配它，`\r`后面跟着`\n`. 如果下一个字符是 ，则负前瞻 ,`(?!\n)`会阻止它`\r`单独匹配`\n`。

# quickbooks - Quickbooks 在线版 - 获取数据以显示在网站上

> ID：12521128
> 
> 赞同：1
> 
> 时间：2012-09-20T21:22:50.980
> 
> 标签：quickbooks, quickbooks-online

我想从我的 Quickbooks Online 版（印度）帐户中获取实时数据，以在我的 PHP 网站上显示客户详细信息，例如未结余额、地址等。

从 Quickbooks Online Edition 获取数据的最佳方法是什么 -

*   我是否按照[http://wiki.consolibyte.com/wiki/doku.php/quickbooks_online_edition#connecting_with_the_hosted_model_of_communication](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_online_edition#connecting_with_the_hosted_model_of_communication)中的说明进行操作？但这需要一个带有 SSL 证书的网站。
*   我是否要创建一个 Intuit Anywhere 应用程序 ( [https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/1000_Getting_Started_With_IA](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/1000_Getting_Started_With_IA) )，然后使用 IDS (Intuit Data Services) 通过 API 获取所需的数据？
*   我可以使用 PHP devkit ( [https://code.intuit.com/sf/frs/do/viewSummary/projects.php_devkit/frs](https://code.intuit.com/sf/frs/do/viewSummary/projects.php_devkit/frs) ) 并将我的凭据直接提供给代码并访问我的 Quickbooks 帐户的数据吗？
*   我是否使用 qbXML（但这似乎不是推荐的方法）？

还是有更好的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:26:01.237

首先，免责声明 - 如果您使用印度版的 QuickBooks Online (http://www.quickbooksonline.in/)，您可能会发现根本没有任何效果。目前，Intuit 不正式支持任何非美国版本的 QuickBooks Online（QuickBooks for Windows non-US通过 qbXML*支持*）进行集成，无论您使用哪种方法。它*可能*有效......但我对此表示怀疑。

话虽如此......一般来说：

*   如果您正在构建 SaaS 应用程序并尝试允许最终用户将其 QuickBooks 帐户连接到您的应用程序，请使用 [Intuit Anywhere](http://developer.intuit.com/)。
*   否则，如果它是自定义/一次性/内部应用程序，并且您讨厌自己的生活，请通过[https://appreg.intuit.com和我们的](https://appreg.intuit.com)[QuickBooks 集成 wiki](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_online_edition#connecting_with_the_hosted_model_of_communication)上的 HOSTED 说明使用 HOSTED 模式（HOSTED 模式是出了名的不可靠和困难由于反向 DNS 检查、非常具体的证书格式、缺乏有效的示例代码、Intuit 端的错误、将证书连接到您的 .NET HTTPS 请求等的一些严重讨厌的问题等）。
*   否则，如果它是自定义/一次性/内部应用程序，并且您不讨厌自己的生活，请通过[https://appreg.intuit.com和我们的](https://appreg.intuit.com)[QuickBooks 集成 wiki](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_online_edition#connecting_with_the_desktop_model_of_communication)上的 DESKTOP 说明使用 DESKTOP 模式。

没有一个 API 允许您只传递您的凭据并获得访问权限 - 您将始终需要处理某种 API 令牌（qbXML 的“连接票”或 Intuit Anywhere 的 OAuth）。

如果您为 Intuit Anywhere 构建，您将使用 IDS XML。否则，您将使用 qbXML。

# ruby-on-rails - Rails 中的局部变量与实例变量？

> ID：12521133
> 
> 赞同：2
> 
> 时间：2012-09-20T21:23:05.443
> 
> 标签：ruby-on-rails, ruby, instance-variables, local-variables

虽然过去已经讨论过这个主题（局部变量与实例变量），但我希望能得到一些帮助。我已经阅读了关于这个主题的各种文档，虽然我大致了解一个局部变量存在于一个块中，并且一个实例变量可以被其他方法调用和使用，但我希望从社区中获得更多的清晰度。

你们中的任何人都可以在示例的上下文中解释什么是局部变量与实例变量吗？可能是用户故事？我宁愿不看任何代码，而是看一个故事，然后围绕该故事编写代码作为练习。例子; “这是一个局部变量的故事；简去商店……”或者，“这是一个实例变量的故事，比尔去商店……”等等。

我看到很多其他人都在为此苦苦挣扎，所以我猜测两个高质量的故事应该可以帮助很多像我这样的菜鸟。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T00:12:06.810

你去过游乐园吗？

如果您购买了所有您可以乘坐的通行证，您可以参加所有的游乐设施，例如过山车、摩天轮和越野车课程。

所有实例变量都是您的@pass，因为在 ruby​​ 中，实例变量以`@`符号开头。

局部变量就像只能访问骑行区域的一部分。你的通行证正好适合摩天轮。一出摩天轮区，就没人管通行证了，就问，wtf是这个！

在 ruby​​ 术语中，变量是在作用域中分配和使用的，如果您需要转到其他作用域或方法，您可以使用这些实例变量来继续那里的乐趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:31:02.990

一家奶制品厂使用模板 ( **Model/Class** ) 打印牛奶盒 Jane 去商店购买牛奶。她现在有一个牛奶（容器）的**实例**。

那个牛奶容器上贴了一个标签，上面写着“今天使用”。

你不会在用于制造容器的模型上看到那个贴纸。
您不会在模型的每个实例上看到该标签。只有当他们在下午 5 点为即将到期的特定纸箱
贴上该贴纸时，您才会在**当地商店看到该贴纸。**

这并不是局部变量的确切含义，而是对现实世界的一种“某种”类比。

# icons - GtkToolButton 具有自定义图标但具有股票图标大小

> ID：12521134
> 
> 赞同：4
> 
> 时间：2012-09-20T21:23:11.303
> 
> 标签：icons, toolbar, gtk2

我有一个 GtkToolBar，它有 3 个 GtkToolButtons，每个都有一个股票图标值，因此它们都以相同的大小出现；现在我添加了一个带有自定义图像 (.png) 的第 4 个 GtkToolButton，它具有任意尺寸，只有这个按钮最终看起来很大（因为图像具有更高的分辨率）。我该怎么做才能缩放这个 GtkToolButton 以匹配其他 3 个按钮？

这是我所介绍的代码：

```
GtkWidget *custom_icon = gtk_image_new_from_file(path);
GtkToolItem *toolbar_item = gtk_toggle_tool_button_new();
gtk_tool_button_set_icon_widget(GTK_TOOL_BUTTON(toolbar_item), custom_icon);
gtk_tool_button_set_label(GTK_TOOL_BUTTON(toolbar_item), "Custom Item");
gtk_toolbar_insert(toolbar, toolbar_item, -1); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-22T12:50:10.777

这是另一个解决方案。

```
GdkPixbuf *pixbuf = gdk_pixbuf_new_from_file(icon_file_path, NULL);
int width, height;
gdk_pixbuf_get_file_info (icon_file_path, &width, &height);
gtk_icon_theme_add_builtin_icon ("custom_icon", width, pixbuf);
g_object_unref (G_OBJECT (pixbuf)); 

GtkToolItem *toolbar_item = gtk_toggle_tool_button_new();
gtk_tool_button_set_icon_name (GTK_TOOL_BUTTON(toolbar_item), "custom_icon"); 
```

如果您有不同尺寸的图像，您可以将它们全部添加并让 Gtk 选择正确尺寸中的一个（或者如果没有找到则调整大小）：只需为每个图像文件重复前五行。

您可以在其他任何地方使用您的图标，它的大小也会自动调整。例如，要将它用于您的主窗口：

```
gtk_window_set_icon_name(GTK_WINDOW(main_window), "custom_icon"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:36:06.970

自己发现了！这是诀窍，它可以帮助像我这样的人。从库存菜单项中查询图标大小，这是一个枚举（标准值，如`GTK_ICON_SIZE_BUTTON`,`GTK_ICON_SIZE_LARGE_TOOLBAR`等）。现在使用 gtk_icon_size_lookup 获取像素大小。从具有正确尺寸的自定义图标/图像文件创建一个 pixbuf。从中创建一个`GtkImage`并将其设置为新的菜单项，您就完成了！

```
GtkToolItem *stock_menu_item = gtk_toggle_tool_button_new_from_stock(GTK_STOCK_NEW);
GtkIconSize toolbar_icon_size = gtk_tool_item_get_icon_size(stock_menu_item);
gint width = 0, height = 0;
gtk_icon_size_lookup(toolbar_icon_size, &width, &height);
GdkPixbuf *app_icon = gdk_pixbuf_new_from_file_at_size(icon_file_path, width, height, NULL);
GtkImage *tray_icon = gtk_image_new_from_pixbuf(app_icon);
g_object_unref(app_icon);
app_icon = NULL;
GtkToolItem *toolbar_item = gtk_toggle_tool_button_new();
gtk_tool_button_set_icon_widget(GTK_TOOL_BUTTON(toolbar_item), tray_icon); 
```

# php - php imagepng() 仅在服务器上生成黑色图像

> ID：12521136
> 
> 赞同：3
> 
> 时间：2012-09-20T21:23:21.957
> 
> 标签：php, javascript, apache

我使用我基于的脚本从用户上传的声音文件动态生成波形图像：http: [//andrewfreiday.com/2010/04/29/generating-mp3-waveforms-with-php/](http://andrewfreiday.com/2010/04/29/generating-mp3-waveforms-with-php/)

该脚本在我的开发环境 Windows 7、Apache2、PHP 5 上运行良好。但是当我将它放在我的服务器 Ubuntu Linux、Apache2 PHP 5 上时，imagepng() 输出一个黑框。

我研究过类似的问题，例如[为什么会创建黑色图像？](https://stackoverflow.com/questions/5287292/why-is-this-creating-a-black-image)并确保我的 imagealphablending() 和 imagesavealpha() 以所描述的方式使用。但仍然没有运气。我检查了文件夹权限并确认 LAME 可以写入正确的文件夹而不会引发错误。

我还尝试简单地将背景颜色设置为与我的页面背景颜色相同的颜色，因为透明度是“很好的选择”，而不是必需的。

无论如何，这是输出我的图像的 PHP：

```
// want it resized?
if ($width) {
  // resample the image to the proportions defined in the form
  $rimg = imagecreatetruecolor($width, $height);
  // save alpha from original image
  imagealphablending($rimg, false);
  imagesavealpha($rimg, true);
  // copy to resized
  imagecopyresampled($rimg, $img, 0, 0, 0, 0, $width, $height, imagesx($img), imagesy($img));
  imagepng($rimg, "../img/" . $genFileName .".png");
  imagedestroy($rimg);
} else {
  imagealphablending($img, false);
  imagesavealpha($img, true);
  imagepng($img, "../img/" . $genFileName .".png");
}

imagedestroy($img);

echo "img/" . $genFileName . ".png";

} else {

echo "An error.";

} 
```

这是调用它的Javascript：

```
//pass the audio data to the server to have the wave drawn
_generateWaveForm = function(_file){

//create the form data
_form.append('file',_file);                      //mp3 to be sent to the server
_form.append('height',300);                      //height of image to be returned
_form.append('width',window.innerWidth - 20);    //width of image to be returned
_form.append('foreground','#FFFF51');            //color of image to be returned
_form.append('background','');                   //background (left empty for transparent BG)
_form.append('flat',true);                       //setting flat to true

    //pass it on
    $.ajax({
        url: "php/php-waveform-png_3.php",
    type: "POST",
    data: _form,
    processData: false,
    contentType: false,
    success: function(_result){_gotTheWaveForm(_result)}
    });
}, 
```

两天来我一直在努力解决这个问题，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T23:00:48.090

尝试添加

```
$transparentColor = imagecolorallocatealpha($rimg, 0, 0, 0, 127);
imagefill($rimg, 0, 0, $transparentColor); 
```

至

```
$rimg = imagecreatetruecolor($width, $height);
imagealphablending($rimg, false);
imagesavealpha($rimg, true); 
```

整体部分：

```
$rimg = imagecreatetruecolor($width, $height);
imagealphablending($rimg, false);
imagesavealpha($rimg, true);
$transparentColor = imagecolorallocatealpha($rimg, 0, 0, 0, 127);
imagefill($rimg, 0, 0, $transparentColor); 
```

# mysql - 表优化 - 多字段 VS 多表

> ID：12521140
> 
> 赞同：0
> 
> 时间：2012-09-20T21:24:04.883
> 
> 标签：mysql

我现在正在质疑我的 MySQL 数据库最佳实践并试图弄清楚这一点。我有一个表格，用户将填写是/否，如果是，则有一个额外的字段来解释自己。大约有 36 个字段，表格为 1>1。假设 15 个字段适用于 (A) 用户，8 个字段适用于 (B) 用户，8 个字段适用于 (C) 用户，5 个字段适用于 (D) 用户。有 15、8、8 和 5 个字段的单独表，还是有一些空字段的 36 个大表会更好吗？我正在寻找性能和规范化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:27:01.497

在我看来，答案取决于列表是否会*改变*。如果没有，一张宽表将“更干净”（更容易查询等）。如果您需要更改列表，尝试在 MySQL 中重建一个现有的大型表是一场噩梦，因此您最好使用属性表。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:27:22.820

要正确规范化，请创建一个单独的联结表，以将回答“是”的用户与其解释联系起来。您不希望仅仅因为系统中添加了第 37^条解释就必须更改用户表。

# html - 我可以在样式表中覆盖元素的内联样式吗？

> ID：12521143
> 
> 赞同：0
> 
> 时间：2012-09-20T21:24:49.860
> 
> 标签：html, css

我想强制我的一个系统上的所有文本都以一种字体类型显示。但是，人们经常粘贴具有各种不同格式的内联样式的文本。

我可以在样式表中覆盖元素的内联样式吗？'!important' 还不够！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T21:39:05.567

您可以使用 CSS 代码覆盖内联样式，该代码使用说明符将字体系列分配给所有相关元素`!important`，例如

```
* { font-family: Calibri !important; } 
```

仅在元素上设置字体是不够的`body`，因为内部元素的字体由适用于它们的规则控制。*仅当没有*CSS 规则在内部元素上设置字体时，内部元素才从其父元素继承字体。

如果有人能够注入具有 的内联样式`!important`，那么您无法在 CSS 中击败它。您需要使用 JavaScript 操作文档，删除或更改`style`属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T21:26:26.683

内联样式至高无上。

您可以执行此操作，但您需要使用 JavaScript 执行此操作。该代码必须基本上从粘贴的代码中删除所有内联样式语句。无论如何，这是一个好主意，你永远不知道人们会粘贴什么。

使用 jQuery：

```
$('.wrapper *').removeAttr('style'); 
```

...您的内容位于具有“包装器”类的 div 中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T21:28:16.097

为此，您不需要 JavaScript。不管你说什么，`!important`确实够了。

测试用例：http: [//jsfiddle.net/jezen/Z4rnv/](http://jsfiddle.net/jezen/Z4rnv/)

说明： CSS 规则是根据特定级别选择的，该级别由布局引擎计算。`!important`规则不是霸道的修饰语；它只是为特异性层次结构中的相应规则增加了额外的权重。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T15:39:31.163

我对其他两个答案的非特定性质不满意。

`* { font-family: Calibri !important; }`

有时并不总是有效，您需要更具体，例如在处理跨度时

`span { font-family: Calibri !important; }`

足够具体，因为尽管您正在增加价值的重要性。

字体样式的类型也很重要，如果初始字体样式只是使用字体，例如 font-family 和 font-size 已经更具体，所以使用

`span { font:15px arial,sans-serif; !important; }`

不会覆盖内联样式

`<span style="font-family: Calibri">Hello World</span>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T21:28:39.763

使用 jQuery 删除属性函数应该可以解决问题。

```
removeAttr( 'style' ); 
```

# javascript - Javascript 对象，特别是 this 关键字

> ID：12521148
> 
> 赞同：-1
> 
> 时间：2012-09-20T21:25:27.177
> 
> 标签：javascript, object, this

我目前正在学习 javascript，并且正在努力理解对象，尤其是“this”关键字。我已经浏览了 W3schools 上的教程并搜索了 youtube，并且希望有人可以在 javascript 中提供一个关于“this”的好教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:28:18.697

忽略[`Function.prototype.bind`](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.5)ES5 中引入的 ， 的值`this`由函数的调用方式设置。

如果使用非限定标识符调用函数，例如

```
foo(); 
```

然后在进入函数时，`this`是`undefined`。在非严格模式下，它将被设置为全局对象（浏览器中的窗口），或者在严格模式下，它将保持为`undefined`.

如果函数作为对象的方法被调用，例如

```
someObj.foo(); 
```

然后将其`this`设置为对象。

如果使用[`new`](http://ecma-international.org/ecma-262/5.1/#sec-11.2.2)运算符调用函数，则将其`this`设置为创建的新对象，就像由`new Object()`.

```
function Foo(name) {
    this.name = name; // this references a new Object
} 
```

如果使用[`call`](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.4)or调用函数[`apply`](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.3)，则`this`可以将其设置为非严格模式下的任何对象或严格模式下的任何值（甚至为 null）。

所以`this`与执行上下文、范围或其他任何东西无关。它完全与如何调用函数或如何使用 设置值有关`bind`。

关于`this`监听器，这里已经回答了：[onClick Function "this" Returns Window Object](https://stackoverflow.com/questions/12485759/onclick-function-this-returns-window-object/12486229#12486229)

动态附加的侦听器是类似的，但是在旧的 IE 中也有一些怪癖需要处理，这些问题在关于附加侦听器的文章中进行了处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:45:46.587

`this`是一个棘手的话题。`this`指您当前正在其中工作的函数的“所有者”。根据它所处的上下文或*范围*，`this`可能意味着几个不同的事情。通常，它指的是`window`对象，它负责跟踪您的大部分 javascript 变量，并包含几个函数。这样做的原因是除非它们明确定义，否则每个 javascript 函数（和变量）的所有者都是`window`. 换句话说，以下情况是正确的：

```
<script type="text/javascript">
var something = "Hey";
this.something === something;    //these will evaluate to true, because when you  
window.something === something;  //declared the variable `something`, it was assigned  
this === window;                 //to the window object behind the scenes.
</script> 
```

不过，它并不总是指`window`。在事件处理程序内部，`this`通常指的`element`是触发事件的事件。我不想深入探讨事件处理程序，但这里有一个使用`jQuery`. 旁注——了解 jQuery 的来龙去脉。

## html:

```
<div id="myDiv"></div> 
```

## Javascript：

```
<script type="text/javascript">
$('#myDiv').bind("click",function() {
                $(this).css("visibility","hidden");   
           });
</script> 
```

在本例中，`this`指的是顶部框中的 html 元素。围绕它，因为这`$()`是为元素创建 jQuery 对象的语法。我这样做是为了能够使用该`css`功能，但我可以很容易地完成类似的事情`this.style.visibility = "hidden";`

上面示例中提到元素的原因`this`是因为在幕后，jQuery 的`bind`方法正在做这样的事情：

```
var ele = document.getElementById("myDiv");
ele.onclick = function(){ //the same function as above, but with all the  
                          //behind-the scenes stuff that jquery does to create a jQuery  
                          //object
                        }; 
```

请注意，因为我们将函数分配给`ele.onclick`，所以函数“属于”元素 ，`ele`。因此，在该函数内部，`this`应该引用`ele`.

如果有什么我遗漏的内容您仍然不太明白，请告诉我。

# c# - listview 十六进制数学难度

> ID：12521149
> 
> 赞同：0
> 
> 时间：2012-09-20T21:25:37.293
> 
> 标签：c#, listview

我有一个列表视图，它连续显示一个整数列表（超过 1500 个）。有没有办法使用 for 或 foreach 从每个整数中减去 0x80000000 ？

我认为这不需要我发布任何代码，但如果有人需要与此问题相关的任何内容，我将非常乐意编辑问题并添加代码。

# ruby - Ruby 使 1.8 Hash#select 表现得像 1.9 Hash#select

> ID：12521154
> 
> 赞同：1
> 
> 时间：2012-09-20T21:26:04.203
> 
> 标签：ruby, hashmap

在 Ruby 1.9 中：`{1=>2,3=>4}.select{|k,v| v>2}`给出`{3=>4}`

在 Ruby 1.8 中：`{1=>2,3=>4}.select{|k,v| v>2}`给出`[[3,4]]`

我怎样才能编写一段简单的代码，可以`{3=>4}`同时在 1.9*和*1.8 中提供？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:29:43.130

```
Hash[{1=>2,3=>4}.select{|k,v| v>2}] 
```

# javascript - 从 indexedDB 的旧 setVersion 升级到新的 indexedDB.open 函数？

> ID：12521157
> 
> 赞同：0
> 
> 时间：2012-09-20T21:26:19.010
> 
> 标签：javascript, html, indexeddb

这是唯一可以找到的使用 IndexedDB 提交表单的示例，但由于旧的 setVersion 函数，它只能在 chrome 上工作，我一直试图让它工作，但我是 Javascript 和 IndexedDB 的新手。有人可以帮我恢复它在 Firefox 中的工作吗？谢谢！

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta charset=iso-8859-1>
<script>
var DB_NAME = 'DBforms';
var STORE_NAME = 'Form';    
var indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB    || window.msIndexedDB;

if (window.indexedDb) {
} else if (window.webkitIndexedDB) {
    window.indexedDB = window.webkitIndexedDB;
    window.IDBTransaction = window.webkitIDBTransaction;
} else if (window.mozIndexedDB) {
    window.indexedDB = window.mozIndexedDB;
} else {
   alert("Browser does not suport HTML5´s IndexedDB!");
}       

function onUnexpectedError(e) { alert('An error as occured: ' + e.value); }

function openStore(db, callback) {
    var transaction = db.transaction(STORE_NAME, IDBTransaction.READ_WRITE);
    var store = transaction.objectStore(STORE_NAME);
    callback(store);
        function saveRow(store, row) {
    var key = new Date().getTime();
    var request = store.put(row, key);
    request.onsuccess = function() {
        alert('Form was saved');
    };
    request.onerror = onUnexpectedError;
}

function isOthergender() {
    return document.form.gender.selectedIndex == document.form.gender.length-1;
}

function saveRecord() {
    // get parameters from the form to build the record
    var gender, name, lastname, email, phone, observations, username;
    if (isOthergender())
        gender = document.form.other.value;
    else
gender = document.form.gender.options[document.form.gender.selectedIndex].value;
    name = document.form.name.value;
    lastname = document.form.lastname.value;
    email = document.form.email.value;
    phone = document.form.phone.value;
    observations = document.form.observations.value;
    username = document.form.username.value;
    var record = {'gender': gender, 'name': name, 'lastname': lastname, 'email': email, 'phone': phone, 'observations': observations, 'username': username};

**// This is what needs to be changed**
//----------------------------------------------------------------------------- 
// open db
var openDbRequest = indexedDB.open(DB_NAME);
openDbRequest.onsuccess = function (e) {
   var db = e.target.result;
   db.onerror = onUnexpectedError;

   if (!db.objectStoreNames.contains(STORE_NAME)) {     

   function createStore(db, callback) {
      var request = db.setVersion('1.0'); // setVersion tx req'd to createObjectStore

      request.onsuccess = function() {
             var store = db.createObjectStore(STORE_NAME);
         callback(store); // this executes in the setVersion tx
       };
       request.onerror = onUnexpectedError;
    }       

      // create db store and save form as row keyed by date
      createStore(db, saveRowCallback);
    } else {
     // open db store and save form as row keyed by date
     openStore(db, saveRowCallback);
    }

    function saveRowCallback(store) {
    saveRow(store, record);
    };

};

openDbRequest.onerror = function () {
alert('Allow access to IndexedDB for this webpage!');
};      
}

//--------------------------------------------------------------------

function enableOther() {
    if (isOthergender()) {
        document.form.other.disabled = false;
        document.form.other.value = 'what other?';
    } else {
        document.form.other.disabled = true;
        document.form.other.value = '';
    }
}

</script>
</head>
<body>
<form name="form">
    <table>
        <tr><td>
        <label>Gender</label>
        <select name="gender" onchange="enableOther()">
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Bot">Bot</option>
            <option value="Other">Other</option>
        </select>
        </td></tr>
        <tr><td><input name="other" disabled="true"/></td></tr>
<tr><td><label>Name</label><input name="name" value="" size="10" maxlength="20"/></td></tr>
<tr><td><label>Last Name</label><input name="lastname" value="" size="10" maxlength="20"/></td></tr>
<tr><td><label>Email</label><input name="email" value="" size="10" maxlength="20"/></td></tr>
<tr><td><label>Phone number</label><input name="phone"/></td></tr><tr/>
<tr><td><label>Observations</label></td></tr><textarea name="observations" rows="3" cols="25" wrap="soft"></textarea></td></tr>
<tr><td><label>UserName</label><input name="username" value="" size="10" maxlength="20"/></td></tr>
    </table>
    <input type="button" name="save" value="Save" onclick="saveRecord()"/>
    <input type="reset" value="Reset"/>
</form>     
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T23:16:27.230

要在 firefox 中查看 console.log 消息，请使用 firebug 扩展。那么这至少应该让你开始：

摆脱`function openStore`.

```
var openDbRequest = indexedDB.open(DB_NAME, 1);
openDbRequest.onerror = function (e) { console.log("error " + e); }
openDbRequest.onblocked = function (e) { console.log("blocked " + e); }
openDbRequest.onupgradeneeded = function (e) {
  var db = e.target.result;
  db.createObjectStore(STORE_NAME);
  var transaction = e.target.transaction;
  transaction.oncomplete = transaction.onabort = function(e) { console.log("transaction result: " + e); }
}
openDbRequest.onsuccess = function (e) {
  var db = e.target.result;
  if (!db.objectStoreNames.contains(STORE_NAME))
    console.log(STORE_NAME + " didn't exist, weird");
  var transaction = db.transaction(STORE_NAME, IDBTransaction.READ_WRITE);
  var store = transaction.objectStore(STORE_NAME);
  var key = new Date().getTime();
  var request = store.put(row, key);
  request.onsuccess = function(e) { console.log("onsuccess"); }
  request.onerror = function(e) { console.log("onerror"); }
  transaction.oncomplete = function(e) { console.log("oncomplete"); }
  transaction.onabort = function(e) { console.log("onabort"); }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:33:35.440

尝试使用 het 以下[shim](https://gist.github.com/2656808)。这意味着您还需要在代码中使用 setVersion 释放所有内容，并且需要在 indexeddb 的 open 方法中提供版本参数

# php - 粘性系统 - 问题 - 问题

> ID：12521162
> 
> 赞同：0
> 
> 时间：2012-09-20T21:26:41.847
> 
> 标签：php, database, mysqli

正是这样，我需要建立一个像facebook这样的系统，你可以在海报上写一些东西，但这是如何为自己查找数据库，并为自己使用数据库。但我必须以某种方式使它是相同的。我应该有很少的用户数据库它的图像，它是批准的图像。和用户名

这是她是我的**用户数据库**

```
 CREATE TABLE IF NOT EXISTS `bruger` (
  `id_bruger` int(200) NOT NULL AUTO_INCREMENT,
  `rank` int(11) NOT NULL,
  `brugernavn` varchar(255) NOT NULL,
  `password` varchar(300) NOT NULL,
  `profilbillede` varchar(255) NOT NULL,
  `profilbillede_godkendt` int(2) NOT NULL,
  `navn` varchar(100) NOT NULL,
  `efternavn` varchar(200) NOT NULL,
  `profiltekst` longtext NOT NULL,
  `alder` int(50) NOT NULL,
  PRIMARY KEY (`id_bruger`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ; 
```

这是我的**条目数据库**

```
CREATE TABLE IF NOT EXISTS `opslag` (
  `id_opslag` int(11) NOT NULL AUTO_INCREMENT,
  `tekst` longtext NOT NULL,
  `id_bruger` int(11) NOT NULL,
  PRIMARY KEY (`id_opslag`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ; 
```

*我如何尝试构建它，但我不知道我是否做得对，*

```
<table border="0">
            <?php
            if ($stmt = $mysqli->prepare('SELECT `tekst`, `id_bruger` FROM `opslag`')) { 
                $stmt->execute();
                $stmt->store_result();
                $stmt->bind_result($tekst, $id_bruger);

                while ($stmt->fetch()) {
                ?>
                    <tr>
                        <td>

                        </td>
                        <td><?php echo $tekst;?></td>
                    </tr>
                <?php
                }
                $stmt->close();
            } else {
                echo 'Der opstod en fejl i erklæringen: ' . $mysqli->error;
            }
            ?>
            </table> 
```

我需要的用户系统是

**简介**

**profilebillede_godkendt**

**布鲁格纳文**

随时询问您是否还想了解更多信息？

*希望你能帮我*

Jesper -**丹麦**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T00:27:05.200

在这种情况下，您应该使用以下查询而不是您那里的查询

```
$stmt = $mysqli->prepare('SELECT `profilbillede`, `profilbillede_godkendt`, `brugernavn` FROM `bruger`') 
```

以及您对此的绑定声明

```
$stmt->bind_result($profilbillede, $profilbillede_godkendt, $brugernavn); 
```

# proxy - Sublime Text 2 包控制错误

> ID：12521167
> 
> 赞同：8
> 
> 时间：2012-09-20T21:27:00.900
> 
> 标签：proxy, sublimetext2

```
CTRL SHIFT P -> Package control : Install package 
```

如果我去这里，我会立即收到错误消息

```
'Package Control: There are no packages available for installation' 
```

我怀疑这可能是因为我的大学认证代理。但是我已经正确设置了我的系统变量，所以像 URLLIB2 这样的东西运行良好。

我还添加了（使用正确的值）

```
"http_proxy": "http://id:pass@proxy:port",
"https_proxy": "http://id:pass@proxy:port", 
```

包控件的默认设置。我仍然收到此错误。知道如何进一步调试吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T16:11:18.387

我通过添加`"http_proxy": "your.proxy:port", "https_proxy": "your.proxy:port"`到我的`User/Package Control.sublime-settings`配置文件的末尾来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T18:08:44.580

我通过以下步骤修复它：

1.  打开你的 Internet Explorer
2.  工具→互联网选项→高级标签→安全性→取消“检查服务器证书吊销”此复选框
3.  重新启动您的 Sublime Text，它就可以工作了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:05:12.553

我的设置也有同样的问题，您必须在常规设置 - Sublime Text 的用户文件中设置代理，而不是包控制中的常规设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-21T15:01:35.007

除了前面提到的其他四个设置（“http_proxy”、“https_proxy”、“proxy_username”、“proxy_password”）之外，还有一个“ **user_agent** ”设置可能很重要。

由于“user_agent”的默认值（“Sublime Package Control v%s”）不是浏览器，包含它的数据包可能会被代理拒绝。在这种情况下，在“Preference->Package Settings->Package Control->Settings -- User”中“伪造”它可能会有所帮助：

```
"user_agent": "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.153 Safari/537.36" 
```

PS。Wireshark 是检查下载失败的实际原因的好工具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-27T06:28:11.837

`proxy_username`您应该使用单独的参数和`proxy_password`在您的用户设置中指定您的凭据。**不要**在代理 URL 中使用 http:// 或任何其他前缀，因为 http_proxy 和 https_proxy 应该只包含代理服务器域（或 IP）和端口，用冒号分隔。

由于 NTLM 代理，我在工作机器上遇到了同样的问题，以下设置对我有用：

```
"http_proxy": "my-company-proxy:3128",
"https_proxy": "my-company-proxy:3128",
"proxy_username": "my-company-domain\\mamontov_se", // domain\login
"proxy_password": "MyPa$$w0rD", 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-01T04:04:53.633

确保安装 curl 包控制器需要它。

```
apt-get install curl 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-03T10:53:56.383

使用以下代码安装包控件。替换您的代理协议、用户名、密码、url 和端口配置：

```
import urllib2,os,hashlib; h = 'eb2297e1a458f27d836c04bb0cbaf282' + 'd0e7a3098092775ccb37ca9d6b2e4b7d'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) if not os.path.exists(ipp) else None; urllib2.install_opener( urllib2.build_opener( urllib2.ProxyHandler({"http": "<proxy protocol><user>:<password>@<proxy url>:<proxy port>"})) ); by = urllib2.urlopen( 'http://packagecontrol.io/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); open( os.path.join( ipp, pf), 'wb' ).write(by) if dh == h else None; print('Error validating download (got %s instead of %s), please try manual install' % (dh, h) if dh != h else 'Please restart Sublime Text to finish installation') 
```

# asp.net - linq 更新/删除/插入记录，说我的 Me.txtxxxx.text 不是 gridview 的一部分，但它们是。

> ID：12521169
> 
> 赞同：0
> 
> 时间：2012-09-20T21:27:11.383
> 
> 标签：asp.net, vb.net, linq

我试图使我的第一个 linq 连接到 gridview，（我没有使用 linqdatasource）并且我的记录很好到我的 gridview。但是我的 AddNewTask、UpdateTask 和 DeleteTask 给了我关于我的 Me.txtxxxx.text 或 Me.lblxxxx.text 的错误不是我的 gridview 的一部分。但标签和文本框是我的网格视图的一部分。

有人可以帮助/指导我，该怎么做，我是这个 linq 的新手，但是已经阅读了很多教程，但找不到任何解决我的问题的方法。

Code_Behind

```
Imports System.Data.Linq

Partial Class gridview
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        Call linqdb()
    End If
End Sub

Protected Sub linqdb()
    Using db As New ThedatabaseconnectionDataContext()
        Dim tblTest As Table(Of testtable) = db.GetTable(Of testtable)()
        Me.GridView1.DataSource = tblTest
        Me.GridView1.DataBind()
    End Using
End Sub

Protected Sub AddNewTask(ByVal sender As Object, ByVal e As EventArgs)
    Using db As New ThedatabaseconnectionDataContext()
        Try
            Dim tbltest As Table(Of testtable) = db.GetTable(Of testtable)()
            Dim rtest As testtable = New testtable With {.test_cat = Me.txttestcat.Text, .test_info = Me.txttestinfo.Text, .test_number = Me.txttestnumber.Text, .test_datetime = Me.txttestdate.Text}
            tbltest.InsertOnSubmit(rtest)
            db.SubmitChanges()
            'Me.lblMsg.Text = "Added Successfully"
        Catch ex As Exception
            'Me.lblMsg.Text = ex.Message
        End Try
    End Using
End Sub

Protected Sub EditTask(ByVal sender As Object, ByVal e As GridViewEditEventArgs)
    GridView1.EditIndex = e.NewEditIndex
    linqdb()
End Sub

Protected Sub CancelEdit(ByVal sender As Object, ByVal e As GridViewCancelEditEventArgs)
    GridView1.EditIndex = -1
    linqdb()
End Sub

Protected Sub UpdateTask(ByVal sender As Object, ByVal e As GridViewUpdateEventArgs)
    Using db As New ThedatabaseconnectionDataContext()
        Try
            Dim tbltest As Table(Of testtable) = db.GetTable(Of testtable)()
            Dim objtest As testtable = tbltest.SingleOrDefault(Function(p) p.test_id = Me.txttestid.Text)
            If objtest IsNot Nothing Then
                objtest.test_cat = Me.txttestcat.Text
                objtest.test_info = Me.txttestinfo.Text
                objtest.test_number = Me.txttestnumber.Text
                objtest.test_datetime = Me.txttestdate.Text
                db.SubmitChanges()
                ' Me.lblMsg.Text = "Updated Successfully"
            Else
                'Me.lblMsg.Text = "Employee not found"
            End If
        Catch ex As Exception
            'Me.lblMsg.Text = ex.Message
        End Try
    End Using
End Sub

Protected Sub DeleteTask(ByVal sender As Object, ByVal e As EventArgs)
    Using db As New ThedatabaseconnectionDataContext()
        Try
            Dim tbltest As Table(Of testtable) = db.GetTable(Of testtable)()
            Dim objtest As testtable = tbltest.SingleOrDefault(Function(p) p.test_id = Me.lbltestid.text)
            If objtest IsNot Nothing Then
                tbltest.DeleteOnSubmit(objtest)
                db.SubmitChanges()
                'Me.lblMsg.Text = "Deleted Successfully"
            Else
                'Me.lblMsg.Text = "Employee not found"
            End If
        Catch ex As Exception
            'Me.lblMsg.Text = ex.Message
        End Try
    End Using
End Sub
End Class 
```

Main_Code

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="gridview.aspx.vb" Inherits="gridview" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
<div>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate> 
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px" 
        CellPadding="4" DataKeyNames="test_id" ForeColor="Black" GridLines="Horizontal" ShowFooter="true" 
        onrowediting="EditTask" onrowupdating="UpdateTask"  onrowcancelingedit="CancelEdit">
    <Columns>
        <asp:TemplateField ItemStyle-Width="30px" HeaderText="test_id">
            <ItemTemplate>
                <asp:Label ID="lbltestid" runat="server" Text='<%# Eval("test_id")%>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField ItemStyle-Width="100px" HeaderText="test_cat">
            <ItemTemplate>
                <asp:Label ID="lbltestcat" runat="server" Text='<%# Eval("test_cat")%>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txttestcat" runat="server" Text='<%# Eval("test_cat")%>'></asp:TextBox>
            </EditItemTemplate> 
            <FooterTemplate>
                <asp:TextBox ID="txttestcat" runat="server"></asp:TextBox>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField ItemStyle-Width="150px" HeaderText="test_info">
            <ItemTemplate>
                <asp:Label ID="lbltestinfo" runat="server" Text='<%# Eval("test_info")%>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txttestinfo" runat="server" Text='<%# Eval("test_info")%>'></asp:TextBox>
            </EditItemTemplate> 
            <FooterTemplate>
                <asp:TextBox ID="txttestinfo" runat="server"></asp:TextBox>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField ItemStyle-Width="150px" HeaderText="test_number">
            <ItemTemplate>
                <asp:Label ID="lbltestnumber" runat="server" Text='<%# Eval("test_number")%>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txttestnumber" runat="server" Text='<%# Eval("test_number")%>'></asp:TextBox>
            </EditItemTemplate> 
            <FooterTemplate>
                <asp:TextBox ID="txttestnumber" runat="server"></asp:TextBox>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField ItemStyle-Width="150px" HeaderText="test_date">
            <ItemTemplate>
                <asp:Label ID="lbltestdate" runat="server" Text='<%# Eval("test_datetime")%>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txttestdate" runat="server" Text='<%# Eval("test_datetime")%>'></asp:TextBox>
            </EditItemTemplate> 
            <FooterTemplate>
                <asp:TextBox ID="txttestdate" runat="server"></asp:TextBox>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:LinkButton ID="lnkRemove" runat="server" CommandArgument='<%# Eval("test_id")%>' OnClientClick="return confirm('Do you want to delete?')" Text="Delete" OnClick="DeleteTask"></asp:LinkButton>
            </ItemTemplate>
            <FooterTemplate>
                <asp:Button ID="btnAdd" runat="server" Text="Add" OnClick="AddNewTask" />
            </FooterTemplate>
        </asp:TemplateField>
        <asp:CommandField ShowEditButton="True" />
    </Columns>
    <FooterStyle BackColor="#CCCC99" ForeColor="Black" />
    <HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Right" />
    <SelectedRowStyle BackColor="#CC3333" Font-Bold="True" ForeColor="White" />
    <SortedAscendingCellStyle BackColor="#F7F7F7" />
    <SortedAscendingHeaderStyle BackColor="#4B4B4B" />
    <SortedDescendingCellStyle BackColor="#E5E5E5" />
    <SortedDescendingHeaderStyle BackColor="#242121" />
    </asp:GridView>
</ContentTemplate>
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="GridView1" />
</Triggers>
</asp:UpdatePanel>
</div>
</form>
</body>
</html> 
```

测试表记录.vb

```
Imports Microsoft.VisualBasic
Imports System.Web
Imports System.Data.Linq.Mapping

<Table(Name:="testtablerecords")> _
Public Class testtableRecords
'DB Fieldname and type = new name _name..
Private _testId As Integer
<Column(IsPrimaryKey:=True)> _
Public Property test_id() As Integer
    Get
        Return _testId
    End Get

    Set(ByVal value As Integer)
        _testId = value
    End Set
End Property

'DB Fieldname and type = new name _name..
Private _testCat As String
<Column()> _
Public Property test_cat() As String
    Get
        Return _testCat
    End Get

    Set(ByVal value As String)
        _testCat = value
    End Set
End Property

'DB Fieldname and type = new name _name..
Private _testInfo As String
<Column()> _
Public Property test_info() As String
    Get
        Return _testInfo
    End Get

    Set(ByVal value As String)
        _testInfo = value
    End Set
End Property

'DB Fieldname and type = new name _name..
Private _testNumbers As Integer
<Column()> _
Public Property test_numbers() As Integer
    Get
        Return _testNumbers
    End Get

    Set(ByVal value As Integer)
        _testNumbers = value
    End Set
End Property

'DB Fieldname and type = new name _name..
Private _testDate As Date
<Column()> _
Public Property test_datetime() As Date
    Get
        Return _testDate
    End Get

    Set(ByVal value As Date)
        _testDate = value
    End Set
End Property

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:56:18.777

问题是`txttestcat`，`txttestinfo`等。不是你的类的属性`gridview`。它们是页面对象层次结构深处的对象的 ID，特别是`GridView1`.

要访问它们，您需要使用`FindControl`GridViewRow 的方法。我正在记忆中工作，在这里，但如果你替换`Me.txttestcat.Text`为

```
CType(e.Row.FindControl("txttestcat"),TextBox).Text 
```

...并类似地转换其他行，你应该没问题。

# android - 对象的无尽动画

> ID：12521172
> 
> 赞同：0
> 
> 时间：2012-09-20T21:27:26.967
> 
> 标签：android, animation

我想无限时间地在屏幕上从左到右移动对象。我可以使用此代码移动一个对象。我想要的是每秒都有一个该对象的新实例从左侧开始移动。所以起初我看到一个物体在移动。下一秒，我看到 2 个物体在移动。几秒钟后，我想看到物体从左向右移动。如何做到这一点？我在正确的轨道上吗？

```
timer1 = new Timer();
timer1.scheduleAtFixedRate(new TimerTask() {            
            @Override
            public void run() {
                TimerMethod();
            }

        }, 1000, 2000);

 private void TimerMethod()
            {

                this.runOnUiThread(Timer_Tick);
            }
private Runnable Timer_Tick = new Runnable() {
                public void run() {
                    moveAnimation();
                }
            };

public void moveAnimation() {
//the actual animation
 move = new TranslateAnimation(0, 500, 0, 0);
             move.setDuration(2000);
             move.setFillAfter(true);
             move.setAnimationListener(new AnimationListener(){

                    @Override
                    public void onAnimationEnd(Animation arg0) {
                    }

                    @Override
                    public void onAnimationRepeat(Animation arg0) {  }

                    @Override
                    public void onAnimationStart(Animation arg0) {  }
                });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:30:46.730

由于没有人回答我只是告诉我我开始学习 AndEngine 并且我设法创建一个对象的新实例出现并以随机导向器和随机速度从屏幕外的任何地方移动到屏幕内的任何地方，这远远超过我想先实现。

如果有人想学习 AndEngine，你可以在[这里](https://github.com/nicolasgramlich/AndEngineExamples/tree/GLES2/src/org/andengine/examples)找到教程。我还建议从市场上下载 AndEngine 应用程序，看看这个引擎有什么能力。

# batch-file - 批量查询注册表键，在该键中找到一个字符串，然后创建一个新键

> ID：12521173
> 
> 赞同：-1
> 
> 时间：2012-09-20T21:27:30.213
> 
> 标签：batch-file, registry

我正在寻找一个批处理文件来执行一个非常具体的功能：

搜索注册表项“\HKLM\SYSTEM\CurrentControlSet\Control\Class{4D36E972-E325-11CE-BFC1-08002bE10318}”

查找包含特定文本字符串的所有子项，在本例中为“DriverDesc”值中的“Intel”

仅在“DriverDesc”值中包含“Intel”的键中将“PnPCapabilities”值数据更改为“38”（十六进制）

我知道如何分别做这些事情，但我不能让它们在一个批次中一起工作。我对批处理语言的了解仍然太有限，不知道如何自己正确完成，或者破译和修改现有的批处理。

为了让事情不那么混乱，我正在尝试禁用一对英特尔 NIC 卡的电源管理选项。我想做一个批处理，它会在任何机器上自动执行此操作，无论存在哪些其他 NIC，或者它们的安装顺序如何。

任何帮助将不胜感激。

以下是我发现、尝试和失败的内容：
**编辑：**新批次
**EDIT2：**新批次，正在工作

```
:start
setlocal ENABLEDELAYEDEXPANSION
set qry=reg query "HKLM\SYSTEM\CurrentControlSet\Control\Class\{4D36E972-E325-11CE-BFC1-08002bE10318}" /s /v DriverDesc
for /f "Tokens=*" %%p in ('%qry%') do (
 set var=%%p
 set var=!var:^&=!
 set var=!var:^)=!
 set var=!var:^(=!
 call :parse
)
endlocal
goto :EOF
:parse
if /i "%var:~0,5%" NEQ "HKEY_" goto parse1
set key=%var%
set key=%key:HKEY_LOCAL_MACHINE=HKLM%
goto :EOF
:parse1
setlocal ENABLEEXTENSIONS
for /f "Tokens=*" %%f in ('@echo %var%^|findstr /i /c:"Intel(R)"') do (
  if defined key reg add %key% /v PnPCapabilities /t REG_DWORD /d 56 /f&set key=
)
endlocal >nul 2>&1 
```

已修复，以便它执行预期的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:35:24.857

好吧，一方面，你不要`\`在 HKEY 前面放 a，另一方面`\Class{4D36E972-E325-11CE-BFC1-08002bE10318}`应该是`\Class\{4D36E972-E325-11CE-BFC1-08002bE10318}`. 此外，您实际上并不需要双引号。

所以让你的第三行：

```
set qry=reg query HKLM\SYSTEM\CurrentControlSet\Control\Class\{4D36E972-E325-11CE-BFC1-08002bE10318} /s 
```

这条线似乎有问题：

```
call :parse2>nul 2>&1 
```

可能会调用`parse`并通过管道`stderr`传输到`nul`，然后将其重定向到`stdout`. 至少在`:parse2`and之间留一个空格`>nul 2>&1`。

`parse2`您可以通过将其拉入`parse1`并附加到or语句`>nul 2>&1`的末尾来消除问题，如下所示：`for``if`

```
:parse1
for /f "Tokens=*" %%f in ('@echo %line%^|findstr /i /c:"Intel(R)" ^|findstr /i /c:"DriverDesc"') do (
  if defined key reg add "\%key%" /v PnPCapabilities /t REG_DWORD /d 56 /f&set key=
) >nul 2>&1 
```

这就是我跳出来的一切。但在你将这些东西泵回你的注册表之前，我建议你先将它通过管道传输到一个文件中。这样，您可以检查以确保所有内容都正确格式化，您甚至可以从文件中剪切几行并将其粘贴到命令提示符中，以查看是否`reg`以您预期的方式做出反应。这样，如果您犯了错误，您就不会冒着在工业规模上搞砸您的注册表的风险。

哦，是的，并且至少备份您要修改的注册表部分，以便您可以将其恢复到之前的状态。你知道，以防万一。:D

* * *

**编辑：**回答您更新的问题：

您的`if`语句永远不会运行，因为不知何故`%line%`被设置为`line:`查看您的“输出”。

For 扩展变量 !line! 然后运行`@echo line: |findstr /i /c:"vmxnet3" |findstr /i /c:"DriverDesc"`它会导致一个空行，因为文字字符串“ `line:`”将不匹配其中之一，更不用说您的两个搜索字符串了。

由于`for`忽略空行，您的`if`语句永远不会运行。

`For`的评估必须产生`DO`要运行的命令的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:46:49.180

以下是工作批次。感谢 James K 帮助我找到正确的方向。

```
:start
setlocal ENABLEDELAYEDEXPANSION
    set qry=reg query "HKLM\SYSTEM\CurrentControlSet\Control\Class\{4D36E972-E325-11CE-BFC1-08002bE10318}" /s /v DriverDesc
    for /f "Tokens=*" %%p in ('%qry%') do (
        set var=%%p
        set var=!var:^&=!
        set var=!var:^)=!
        set var=!var:^(=!
        call :parse
    )
endlocal
goto :EOF
:parse
if /i "%var:~0,5%" NEQ "HKEY_" goto parse1

set key=%var%
set key=%key:HKEY_LOCAL_MACHINE=HKLM%
goto :EOF

:parse1
setlocal ENABLEEXTENSIONS
    for /f "Tokens=*" %%f in ('@echo %var%^|findstr /i /c:"Intel(R)"') do (
        if defined key reg add %key% /v PnPCapabilities /t REG_DWORD /d 56 /f&set key=
    )
endlocal >nul 2>&1 
```

# javascript - 如何将参数传递给 jQuery 。动画选项对象的完整属性？

> ID：12521174
> 
> 赞同：1
> 
> 时间：2012-09-20T21:27:35.240
> 
> 标签：javascript, jquery, parameter-passing

我知道，问题标题令人困惑。这也让我很难找到解决方案。

假设我有这些代码，我怎样才能将参数传递给.animate() 选项`complete`或`step`当 .animate() 选项是外部对象时？

```
var someObj = {
    onComplete: function(e) {
        console.log(e); // return undefined
    },

    onStep: function(e) {
        console.log(e); // return undefined too
    },
}

var optionObj = {
    duration: 300,
    easing: 'linear',
    complete: someObj.onComplete(e), // this is not working
    step: someObj.onStep(e) // this is not working
}

$('div').animate({width: "500px", height: "500px"}, optionObj); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:37:48.977

要将您自己的参数传递给这些回调并确保在这些回调`this`中正确设置，`someObj`您可能需要额外的闭包：

```
var optionObj = {
    duration: 300,
    easing: 'linear',
    complete: function() {
        someObj.onComplete(e);  // assumes 'e' is defined somewhere
    },
    step: function(now, fx) {   // jQuery automatically supplies these parameters
        someObj.onStep(e);      // so you need to pass your own instead
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T21:29:55.703

尝试如下定义您的对象。`complete: someObj.onComplete`从使用中删除 (e)`(e)`将调用函数并将返回值分配给`optionObj.complete`and `optionObj.step`which is `undefined`。

```
var optionObj = {
    duration: 300,
    easing: 'linear',
    complete: someObj.onComplete, 
    step: someObj.onStep 
} 
```

**演示：http:** [//jsfiddle.net/mL5Fy/](http://jsfiddle.net/mL5Fy/)

# python - 在python中创建c样式线程

> ID：12521176
> 
> 赞同：1
> 
> 时间：2012-09-20T21:27:47.677
> 
> 标签：python

嗨，我是 python 新手，想在一个循环中创建多个线程，比如（C 风格）

```
for (;i < 10; i++)
 thread[i]= pthread_create(&thread[i],&attr,func) 
```

我不确定如何在 python 中做同样的事情？基本上我想要那个 thread[] 变量，因为 global 将一次创建所有线程，然后一次启动。我已经编写了一个类似的 python 程序来完成它，但我认为采用上述风格会更好。

```
def thread_create(thread_number):
    command_string = "Thread-" + "%d" %thread_number
    thread = myThread(thread_number, command_string)
    thread.start()

# Start new Threads

for i in range(5):
    thread_create(i) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:36:43.927

你认为这更好吗？

```
for i in range(5):
    command_string = "Thread-" + "%d" % i
    thread = Thread(i, command_string)
    thread.start() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:41:23.640

如果你想要一个 1 对 1 的等价物，那么这可能是它：

```
threads = []
for i in xrange(10):
    t = Thread(target=aFunc, name="Thread-%d" % i)
    t.start()
    threads.append(t) 
```

或者，如果您只想构建线程对象，并在以后随意启动它们......

```
threads = []
for i in xrange(10):
    t = Thread(target=aFunc, name="Thread-%d" % i)
    threads.append(t)

threads[2].start() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:44:25.597

重用你的 thread_create 函数和列表理解来得到你想要的。

```
def thread_create(thread_number):
    command_string = "Thread-" + "%d" %thread_number
    return myThread(thread_number, command_string)
    # start them later

# see note below
threads = [thread_create(x) for x in range(5)]

for t in threads:
    t.start() 
```

**笔记：**

```
threads = [thread_create(x) for x in range(5)] 
```

只是简写

```
threads = []
for x in range(5):
    threads.append(thread_create(x)) 
```

# c# - 设置多个 textbox.SelectionStart 值，以突出显示搜索的单词

> ID：12521177
> 
> 赞同：0
> 
> 时间：2012-09-20T21:27:51.337
> 
> 标签：c#, selection

将文本文件导入我的 Windows 窗体应用程序富文本框后，我现在想添加搜索功能。是否可以有多个 SelectionStart 值？SelectionLength 将是相同的，因为它是相同的单词。

```
 string textfield = TextField.Text;
        string searchword = searchbox.Text;
        int found=0;
        TextField.SelectionLength = searchword.Length;
        TextField.SelectionBackColor = Color.LightBlue;

        for (int y = 0; y < textfield.Length; y++)//Goes through whole string
        {
            if (searchword[0] == textfield[y])//Looks for first character
            {
                for (int x = 0; x < searchword.Length; x++)//Checks if rest of  characters match
                {
                    if (searchword[x] == textfield[y + x])
                    {
                        found++;
                    }
                    else
                        break;
                }
            }

            if (found == searchword.Length)
            {
                TextField.SelectionStart = y;//////Want to have multiple of these
            }
            found=0;
        }
        TextField.Focus(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:44:18.353

不，你不能。但是，例如，您可以更改所选文本的背景颜色。首先选择一个单词。然后这样做

```
foreach (Match match in matches) {
    richTextBox.SelectionStart = match.Index;
    richTextBox.SelectionLength = match.Length;
    richTextBox.SelectionBackColor = Colors.Yellow;
} 
```

要清除所有标记，只需选择整个文本并将背景颜色设置为白色（假设您没有使用背景颜色）。

在示例中，我假设您使用的是`Regex`. 你会发现这些词：

```
string pattern = String.Format(@"\b{0}\b", Regex.Escape(wordToFind));
MatchCollection matches = Regex.Matches(richTextBox.Text, pattern); 
```

# cocos2d-iphone - 如何取消 cocos2d 中正在进行的单点触摸事件

> ID：12521182
> 
> 赞同：4
> 
> 时间：2012-09-20T21:28:50.057
> 
> 标签：cocos2d-iphone

我正在开发用户拖动对象的游戏。当用户仍在尝试拖动对象时发生事件时，我想停止移动对象。有没有办法做到这一点？基本上取消当前正在进行的触摸，同时不影响可能发生的其他触摸事件，因为这是一个多点触控应用程序。

我正在使用 cocos2d v1.1.0 并且正在使用 ccTouchesBegan 和 ccTouchesMoved。

感谢您提出的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-11T15:12:14.167

在要取消触摸事件的位置插入以下代码。

```
[[[CCDirector sharedDirector] touchDispatcher] setDispatchEvents:NO]; 
```

或者不推荐使用的方法

```
[[CCTouchDispatcher sharedDispatcher] setDispatchEvents:NO]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T21:56:48.330

为什么不直接在拖动的对象上加上一个标志呢？

```
- (void)ccTouchesBegan...
{
      touchedObject.canDrag = YES;
}

- (void)ccTouchesMoved...
{
      if (touchedObject.canDrag)
      {
           //Drag
      }
}

- (void)eventThatStopsDrag
{
      touchedObject.canDrag = NO;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-06T09:38:05.007

也许是这样的（未检查代码）：

```
void onTouchMoved(Touch* touch, Event* event) {
    ...
    if (needCancel) {
        EventTouch cancelEvent;
        cancelEvent.setTouches({touch});
        cancelEvent.setEventCode(EventTouch::EventCode::CANCELLED);
        Director::getInstance()->getEventDispatcher()->dispatchEvent(&cancelEvent);
    }
} 
```

但触摸仍然存在，事件将会到来

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-23T14:36:27.737

如果您使用的是 cocos2dx-js，那么您可以在 main.js 中编写此代码

当您的鼠标光标移出窗口时，它会发送 mouseup 事件。在考虑这种情况时，它最有帮助，您正在拖动任何精灵，并且您想在光标离开窗口时取消 mousemove 事件。

```
cc.game.onStart = function{

    .......................

    .......................

    .......................

    var prohibition = false;
    if( cc.sys.isMobile)
        prohibition = true;
    var selfPointer = cc.inputManager;
    var element = cc._canvas;
    element.addEventListener("mouseout", function (event) {
        if(prohibition) return;
        selfPointer._mousePressed = false;

        var pos = selfPointer.getHTMLElementPosition(element);
        var location = selfPointer.getPointByEvent(event, pos);

        selfPointer.handleTouchesEnd([selfPointer.getTouchByXY(location.x, location.y, pos)]);

        var mouseEvent = selfPointer.getMouseEvent(location,pos,cc.EventMouse.UP);
        mouseEvent.setButton(event.button);
        cc.eventManager.dispatchEvent(mouseEvent);

        event.stopPropagation();
        event.preventDefault();
    });

    .......................

    .......................

    .......................

} 
```

# email - Amazon SES 电子邮件未到达某些服务器

> ID：12521183
> 
> 赞同：2
> 
> 时间：2012-09-20T21:28:52.393
> 
> 标签：email, amazon-ses, bluehost

我已经设置了 Amazon SES。我的域已通过验证，并且我的 DKIM 已启用和验证。电子邮件确实会发送，但我的 Bluehost 帐户无法接收电子邮件。根据 Bluehost 的日志，他们根本没有访问他们的服务器，这意味着没有垃圾邮件过滤器。有没有人遇到过这个？我测试过的所有其他电子邮件都没有问题。它似乎是 Bluehost 独有的，但他们告诉我这不可能是他们，因为它甚至不在他们的日志中。

有没有办法查看 Amazon SES 日志，以便我知道这些电子邮件在哪里停止？没有退回邮件或退回投诉。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:50:57.207

有同样的问题。Bluehost 确实为此提供了一般日志，它表明电子邮件正在被 Bluehost 过滤器退回。Amazon SES 服务器从在 Bluehost 端被视为“杂项”的长域字符串发出。即使您使用主域中的电子邮件帐户屏蔽它，它也会被退回，因此@Sergey 方法将不起作用。

如果我设法找到解决方案，将分享解决方案。

# .net - 如何在 VB.net HTTP 函数中传递值？

> ID：12521188
> 
> 赞同：0
> 
> 时间：2012-09-20T21:29:16.970
> 
> 标签：.net, vb.net, function

我想创建一个小实用程序，用户可以通过 txtlocal API 发送短信。用于 VB.net 的 txtlocal 提供代码片段。我只是创建一个简单的表单并复制粘贴代码，信用余额检查功能工作正常，但通过 Win Form 发送短信不起作用。这是代码片段 -

来自 txtlocal 的代码片段 -

```
Private Function SendSMS_txtLocal(ByVal Test As Boolean, _
ByVal From As String, _
ByVal Message As String, _
ByVal SendTo As String, _
ByVal URL As String) As String
    ' Send a message using the txtLocal transport
    Const TransportURL As String ="http://www.txtlocal.com/sendsmspost.php"
    Const TransportUserNameAs String ="me@myemail.com"
    Const TransportPasswordAs String ="mypassword"
    Const TransportVerboseAs Boolean =True
    Dim strPost As String
    ' Build POST String
    strPost = "uname=" + TransportUserName _
    + "&pword=" + TransportPassword _
    + "&message=" + System.Web.HttpUtility.UrlEncode(Message) _
    + "&from=" + From _
    + "&selectednums=" + SendTo
    If URL  "" Then
        strPost += "&url=" + URL
    End If
    If Test = True Then
        strPost += "&test=1"
    End If
    If TransportVerbose =True Then
        strPost += "&info=1"
    End If
    ' Create POST
    Dim request As WebRequest = WebRequest.Create(TransportURL)
    request.Method = "POST"
    Dim byteArray As Byte() = Encoding.UTF8.GetBytes(strPost)
    request.ContentType = "application/x-www-form-urlencoded"
    request.ContentLength = byteArray.Length
    Dim dataStream As Stream = request.GetRequestStream()
    dataStream.Write(byteArray, 0, byteArray.Length)
    dataStream.Close()
    ' Get the response.
    Dim response As WebResponse = request.GetResponse()
    dataStream = response.GetResponseStream()
    Dim reader As New StreamReader(dataStream)
    Dim responseFromServerAs String = reader.ReadToEnd()
    ' Clean upthe streams.
    reader.Close()
    dataStream.Close()
    response.Close()
    ' Return result to calling function
    If responseFromServer.Length > 0 Then
        Return responseFromServer
    Else
        Return CType(response, HttpWebResponse).StatusDescription
    End If
End Function 
```

我这样调用函数 -

```
SendSMS_txtLocal(0, TextBox1.Text, TextBox2.Text, TextBox3.Text, "http://www.txtlocal.com/sendsmspost.php") 
```

这是我的表单设计 -

![在此处输入图像描述](../Images/8e2ac62d7088d8075df8ddf47440808f.png)

请建议 - 代码有什么问题..

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T09:29:04.247

从外观上看，您调用该函数是错误的。尝试：

```
SendSMS_txtLocal(0, TextBox1.Text, TextBox2.Text, TextBox3.Text, "??") 
```

您添加的 URL 没有用作 URL，它被发送到`txtlocal`您发送给他们的信息字符串中，不知道它的用途或目的是什么，在他们的网站上阅读？

# python - '[0]' 在 Python 中是什么意思？

> ID：12521189
> 
> 赞同：10
> 
> 时间：2012-09-20T21:29:18.513
> 
> 标签：python, arrays

我熟悉编程，但对 python 很陌生：

> 内存 = [0] * 内存加载大小

'[0]' 代表什么？它是一个内置数组吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-20T21:31:41.570

在这种情况下， `[`and`]`字符用于构造数组文字：

```
>>> []
[]
>>> [0]
[0]
>>> ['a', 'b', 'c']
['a', 'b', 'c'] 
```

将数组相乘是惯用的，它通过将数组中的元素重复给定因子来生成一个数组：

```
>>> ['a'] * 4
['a', 'a', 'a', 'a']
>>> [0] * 9
[0, 0, 0, 0, 0, 0, 0, 0, 0]
>>> [0, 1, 2] * 2
[0, 1, 2, 0, 1, 2] 
```

请注意，`[`and`]`也用于索引现有数组。在这种情况下，`[0]`访问数组中的第一个元素：

```
>>> a = ['first', 'second', 'third']
>>> a[0]
'first'
>>> a[2]
'third'
>>> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-20T21:30:48.753

它只是意味着一个元素`list`只包含一个 0。乘以`memloadsize`给你一个`list`零`memloadsize`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T21:31:51.483

此命令在概念上等同于：

```
mem = []
for i in xrange(memloadsize):
    mem.append(0) 
```

# php - 无需按键即可发送和截断变量（Ajax 和 PHP 之间的 onChange）

> ID：12521190
> 
> 赞同：0
> 
> 时间：2012-09-20T21:29:19.790
> 
> 标签：php, ajax, post, get, onchange

在开始编写代码之前，我尝试解释我想要实现的目标：

我有一个输入，用户将使用带有键盘仿真的条形码阅读器编写代码（条形码），因此他将编写如下内容：123465789。

1.  我想拿所有这些数字
2.  截断它们，因为我只需要前 4 个字符：1234。
3.  将此值传递给将检查哪个项目对应于该数字的数据库
4.  添加到商品的“库存”编号。
5.  清理表格
6.  尽可能快地重复。

好的，现在我试图解释让我们从有趣的部分开始，我的代码：

文件 1：change.php

```
<!DOCTYPE html>
<html>
<head>
  <style>
fieldset { margin-bottom: 1em; }
input { display: block; margin-bottom: .25em; }
#print-output {
  width: 100%;
}
.print-output-line {
  white-space: pre;
  padding: 5px;
  font-family: monaco, monospace;
  font-size: .7em;
}

</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <form>
  <fieldset>
    <label for="troncami">Type Something:</label>
    <input id="troncami" type="text" />
  </fieldset>
</form>
<div id="risultatotroncato"></div>
<script>
$('#troncami').keyup(function(event) {              

            var str = $(this).serialize();                   
               $.ajax({            
               type: "GET", // the kind of data we are sending
               url: "troncare.php", // this is the file that processes the form data
               data: str, // this is our serialized data from the form
               success: function(msg){  // anything in this function runs when the data has been successfully processed

                    // this sets up our notification area for error / success messages
                    $("#risultatotroncato").ajaxComplete(function(event, request, settings)
                    { 
                        result = msg; // msg is defined in sendmail.php
                        $(this).html(result); // display the messages in the #note DIV                           
                    }); 
                $('input[name=troncami]').val(msg);
                }                    
             });                     

}).keydown(function(event) {
  if (event.which == 13) {
    event.preventDefault();
  }  
});

$('#other').click(function() {
  $('#target').keyup();
});</script>

</body>
</html> 
```

文件 2：troncare.php

```
<?php
$risultatotroncato = 0;

$risultatotroncato = substr ($_GET['troncami'],0,4);

echo $risultatotroncato;
?> 
```

显然它不起作用，我唯一能看到的是一个 NOTICE 错误：

> 注意：未定义索引：第 6 行 D:\Locali\xampp\htdocs\combobox\troncare.php 中的 troncami

所以我的问题是如何将输入中写入的值传递给 $_GET / $_POST 以便我能够使用 'troncare.php' 来“管理”它？我怎样才能尽可能快地做到这一点，以便用户能够在不停止的情况下使用条形码扫描仪“拍摄”，并将值几乎“实时”保存在数据库中？非常感谢！

（你可能已经知道我还在学习 PHP 和 AJAX 和 jQuery，所以在几年/几个月内，我将能够自己完成它，但是......我需要它尽快所以，你能帮我吗?)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:48:30.757

要回答您的主要问题，只需将您的 GET 参数添加到您在 ajax 调用中调用的 URL 的末尾。类似于以下内容：

```
$.ajax({             
    type: "GET", // the kind of data we are sending 
    url: "troncare.php?troncami=" + $('#troncami').val(), // this is the file that processes the form data 
    success: function(msg){  // anything in this function runs when the data has been successfully processed 
        // this sets up our notification area for error / success messages 
        $("#risultatotroncato").ajaxComplete(function(event, request, settings) {  
            result = msg; // msg is defined in sendmail.php 
            $(this).html(result); // display the messages in the #note DIV                            
        });  
        $('#troncami').val(msg); 
    }                     
}); 
```

或者您可以使用 $.ajax 调用的[数据设置](http://api.jquery.com/jQuery.ajax/)来传递键/值对：

```
$.ajax({             
    type: "GET", // the kind of data we are sending 
    url: "troncare.php", // this is the file that processes the form data 
    data: {"troncami" : $('#troncami').val()}, // this is our serialized data from the form 
    success: function(msg){  // anything in this function runs when the data has been successfully processed 
        // this sets up our notification area for error / success messages 
        $("#risultatotroncato").ajaxComplete(function(event, request, settings) {  
            result = msg; // msg is defined in sendmail.php 
            $(this).html(result); // display the messages in the #note DIV                            
        });  
        $('#troncami').val(msg); 
    }                     
}); 
```

请注意，我使用 '#troncami' 而不是 'input[name=troncami]' 作为输入的选择器。虽然看起来微不足道，但在大范围内，使用元素的 ID 作为选择器比使用过滤器样式选择器[更有效。](http://24ways.org/2011/your-jquery-now-with-less-suck)ID 在页面中应该是唯一的，以便在 DOM 中快速找到对象。如果您使用过滤器样式选择器（如 'input[name=troncami]'），则必须首先找到对象。您还应该考虑在 Ajax/JSon 调用中使用回调参数，因为这些参数有助于避免跨站脚本 (XSS)。

另一方面，我希望您将在 ajax 调用的接收端进行一些数据验证和清理。由于您的代码现在很容易受到注入攻击。至少在您的情况下，我会在 troncare.php 中使用类似的东西在查询或插入数据库之前验证输入值：

```
<?php
$risultatotroncato = 0;

if (isset($_GET['troncami']) && ctype_digit($_GET['troncami'])) {
    $risultatotroncato = substr ($_GET['troncami'],0,4);
    //echo or search the database here
}
else {
    //do whatever here if the value is blank or contains invalid characters
}
?> 
```

这确保收到的值只能是数字（1234567890）。

**更新：** 如果我在这种情况下正确理解了您的情况，则 troncare.php 应接收的值应始终仅是有效的数字，因此 PHP 函数[ctype_digit()](http://php.net/manual/en/function.ctype-digit.php)将足以清理数据，并且仅在以下情况下才返回 true该值仅包含数字。**在这种情况下**，这已经足够净化了。如果您允许字母或数字，还有其他几个[ctype 函数](http://php.net/manual/en/ref.ctype.php)这可以提供帮助。如果数据是非标准类型，您可以使用使用模式匹配的 preg_match。在所有其他情况下，通常有一个与您的数据库类型相匹配的 PHP 函数来清理数据。例如，如果您使用 MySQL，则有一个名为 mysqli_real_escape_string() 和 mysql_real_escape_string() 的 PHP 函数在以任何方式与数据库一起使用数据之前清理数据。我不会在这个部门重新发明轮子，但是关于 SO（以及网络上的其他地方）有很多很好的问题可以处理这个主题，例如：[这里](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)

# xml - 通过 google jsapi 使用 ember.js 加载 RSS/XML 提要

> ID：12521192
> 
> 赞同：0
> 
> 时间：2012-09-20T21:29:30.223
> 
> 标签：xml, rss, ember.js, jsapi

我正在尝试通过 google jsapi 将 XML 提要输入我的应用程序，我离得如此之近，但正处于这个错误的头撞阶段。

**未捕获的错误：无法对不在 DOM 中的 Metamorph 执行操作。**

问题是这一行：`me.pushObject(t);`

我如何从该函数中访问父范围？我在接近这个错误，有没有完全不同的方法来做到这一点？

我可以确认我正在取回 XML，但我无法将它从该函数中恢复为 ember。

无奈之下，我尝试`App.myController.pushObject(t);`了许多其他可笑的解决方案。

我用 JSON 进行测试，它 100% 可以工作，但我必须加载 XML RSS，所以就不行了。

这是问题的一个片段：

```
 App.myController = Ember.ArrayController.create({
    content: [],
    init: function(){
        me = this;

        function feedLoaded(result) {
            me.set('content', []);
            if (!result.error) {
                var mObj = [];
                for (var i = 0; i < result.feed.entries.length; i++) {
                    var cData = result.feed.entries[i];
                    var t = App.HospTime.create({
                        title: cData.title,
                        name: cData.name,
                        date: cData.date
                    });
                    me.pushObject(t);
                }
            } else {
                alert(result.error);
            }
        }

        var feed = new google.feeds.Feed("myrss_feed.xml");
        feed.load(feedLoaded);
    }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:39:03.063

如果我删除这整个函数 `function feedLoaded(result) {`并将其替换为*JSON*调用，则它可以正常工作并将*JSON*数据传递回控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:38:52.573

我认为您可以尝试使用 jQuery.proxy() [[jQuery 参考]](http://api.jquery.com/jQuery.proxy/)看看是否有帮助。

因此，`feed.load(feedLoaded);`您可以尝试设置`me`为`feedLoaded`using的上下文（this），而不是 ，然后在 feedLoaded 中`feed.load($.proxy(feedLoaded, me));`执行另一个操作。`me = this`

另外，`me.set('content', []);`上下文也不会有问题吗？也许我误解了你的问题。

# ajax - 为什么不同浏览器的ajax响应时间如此不同？

> ID：12521193
> 
> 赞同：0
> 
> 时间：2012-09-20T21:29:34.130
> 
> 标签：ajax, firefox, safari, chromium, qtwebkit

我发现使用不同浏览器的 ajax 响应时间非常不同。服务器*（猫鼬）*在本地运行，因此排除了网络问题。

这些是我的发现：

*   火狐 11-23 毫秒
*   铬 6-130ms
*   Safari (webkit) 1004-1020ms
*   Maxthom (webkit) 在 30 到 1030 毫秒之间交替
*   阿罗拉 (qt/webkit) 1017-1025ms
*   嵌入铬在 15 到 315 毫秒之间交替

这是供大家检查的代码：

```
<html>
    <head>
        <title>Embedded Response Slow demo</title>
    </head>
    <body>
        <script>
            var time = 0;

            function mouseClicked()
            {
                time = new Date().getTime();

                var xmlhttp = new XMLHttpRequest();

                xmlhttp.onreadystatechange = function()
                {
                    if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    {
                        time =  new Date().getTime() - time;
                        document.getElementById('link').innerHTML 
                             = "Response took "+time+"ms.";
                    }
                }
                xmlhttp.open("GET","responsetest.html?q="+time,true);
                xmlhttp.send();
            }
        </script>
        <div><a onclick="mouseClicked()" id="link" href="#" >click me</a></div>
    </body>
</html> 
```

对于响应式 GUI，我真的需要解决这个问题。有没有人知道我如何能够始终如一地获得较短的响应时间？

**（我将整个问题重新设计为更简单并包含代码。现在我从等式中完全删除了 jQuery 并添加了 Safari 结果。）**

# sass - SASS 如何将变量设置为不相等？

> ID：12521197
> 
> 赞同：35
> 
> 时间：2012-09-20T21:29:51.260
> 
> 标签：sass

我正在尝试创建一个等于无的变量。我试过以下..

```
$false:null; 
```

-和-

```
$false:" "; 
```

我正在尝试使用它的是这个......

```
@mixin myMixin($myVariable:"", $myOtherVariable){
    $false:null;
    @if $myVariable == $false {
       //do something
    }
    @if $myVariable != "" {
      //do something else
    }
}

@include myMixin("", $myOtherVariable); 
```

我在这个例子中使用了两个变量，但我计划有两个以上。

基本上我想要做的是可以选择排除变量而不必使用空引号。问题`$false: "";`在于它仍然需要空引号。所以我想知道 SASS 中是否内置了一些东西来指定“null / or nothing”。我认为它可能是空的。不过好像不是这样的。。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-21T01:43:57.127

`null`or `false`will work（`null`在最新版本的 Sass 中是新的）。两者都适用于您的示例。唯一的优点`null`是，如果您将其与属性一起使用，它就会消失。

```
@mixin myMixin($myVariable: false, $myOtherVariable: false){
  @if not $myVariable {
     //do something
  } @else {
    //do something else
  }
}

@include myMixin(false, $myOtherVariable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T19:46:02.190

将变量设置为“假”

```
$false: false;
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T22:26:38.520

Sass 是用 ruby​​ 编写的，它使用`nil`而不是`null`.

```
@mixin myMixin($myVariable, $myOtherVariable){
  $false: nil;
  @if $myVariable == $false{
     color: inherit;
  } @else {
     color: $myVariable;
  }
}

p {
  @include myMixin(nil, $myOtherVariable);
}

.red {
  @include myMixin(red, $myOtherVariable);
} 
```

[jsFiddle 上的示例](http://jsfiddle.net/maxbeatty/n95b4/)

# javascript - 为什么 IE 会为 top 提供两个不同的值？

> ID：12521202
> 
> 赞同：0
> 
> 时间：2012-09-20T21:30:12.233
> 
> 标签：javascript, internet-explorer, jquery-ui-selectmenu

我正在使用在这里找到的 ui.selectmenu 插件： [https ://github.com/fnagel/jquery-ui/wiki/Selectmenu](https://github.com/fnagel/jquery-ui/wiki/Selectmenu)

我突然在我的一个页面中看到了一个错误，我无法在其他任何地方复制它。我从未见过这个错误，所以它让我发疯。我将尝试解决这个问题，但想知道是否有人能认识到这个问题：

```
$('#classname-menu').css('top');    // returns 839.46px
$('#classname-menu')[0].style.top;  // returns -858154px 
```

如果我运行`$('#classname-menu').css( 'top', '839.46px' );`它会移动到正确的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:04:43.040

我是这个小部件的维护者，真的很想在这里提供帮助。也许您可以发布 jsFiddle 或指向您页面的链接？

定位问题往往是焦点问题造成的，尤其是在IE中，因为这个大和平软件存在定位和溢出问题。请尝试它是否有助于禁用溢出，并请确保您使用的是最新（标记为“稳定”）版本。请随时在 GitHub 上打开一个新问题。

如果没有任何帮助并且您能够做到，我建议您测试新的、从头开始构建的 jQuery UI Selectmenu 版本，该版本可以在官方 jQuery UI Github 帐户（selectmenu 分支）中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:20:38.750

如果我没记错的话，我的 jQuery UI 版本落后于 jQuery 太多了。我正在慢慢地用 jQuery 核心升级我的网站的某些部分，我认为我所说的页面是第一个使用 selectmenu 升级的页面，所以我当时并不认为 UI 落后。逐页升级网站时需要注意的事项。

# iis - 'c:\folder' 的工作副本已锁定。尝试写入只读数据库

> ID：12521205
> 
> 赞同：20
> 
> 时间：2012-09-20T21:30:30.143
> 
> 标签：iis, tortoisesvn, windows-server-2008-r2

我是乌龟新手...当我尝试在 Windows Server 2008 R2 上的 c:\folder 上运行 SVN 更新时，我收到错误消息：

1.  “'c:\folder' 的工作副本已锁定。
2.  尝试写一个只读数据库

似乎我需要更改文件/文件夹权限...我将它们更改为什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-21T15:00:51.077

我必须让我自己的帐户完全控制目录。使用以管理员身份运行的 powershell 脚本进行复制时，它似乎失去了这些权限

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-06T07:06:55.410

你是对的。尝试授予您的 Windows 用户帐户对工作副本文件夹的完全权限。它也对我有用。根据我的经验，这是一个逻辑问题。其实这甚至不是问题，而是正常的事情。简而言之：当一个 Windows 用户在工作副本上工作时，他会为自己锁定工作副本。如果另一个用户尝试在同一个工作副本上工作，他不能，因为前一个用户仍在工作，因此它仍然被第一个用户锁定（直到他提交并释放锁定）。

所以是的。如果您没有其他选择，请尽可能授予您的 Windows 用户帐户对该文件夹的完全权限。

我的情况如下。我有一个便携式硬盘驱动器，上面有工作副本。昨天我在一台计算机上使用该硬盘驱动器，但我没有提交。今天我不得不使用不同的计算机，因此在不同的 Windows 用户下使用相同的便携式硬盘驱动器。当然，工作副本被锁定了，我无法更新、提交、清理……我什么也做不了。因此，我授予了当前用户对该文件夹的完全权限，并且它起作用了。

希望现在有意义。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:35:40.953

尝试在该文件夹上使用 Release lock 命令。

然后也进行清理。也许它会解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-13T16:31:21.473

您需要将您的用户显式添加到文件夹（不仅仅是您的用户所属的组）。

1.  右键单击文件夹-> 属性
2.  安全 -> 编辑...
3.  添加...
4.  添加您的用户并授予“修改”权限

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-16T11:49:00.607

通过将我的 windows 帐户添加到目录并授予对目录上帐户的完全访问权限来解决此问题。

# python - Python 比较差异 - 第 2 部分

> ID：12521206
> 
> 赞同：0
> 
> 时间：2012-09-20T21:30:30.573
> 
> 标签：python

我以前问过类似的问题，但我会再试一次，因为我还有一些问题。

我有两个包含 3 列的 csv 文件。

名称 产品数量：

我想了解这两个文件之间的差异。如果两个文件的名称和产品顺序相同，我可以这样做。这会给我我正在寻找的金额差异。

我需要一些东西来列出和比较两者，如果顺序不同，则显示差异。

我试过了：

```
import csv
import difflib 

file1 = open('file1','rb').read().splitlines()
file2 = open('file1','rb').read().splitlines()

for diff in difflib.ndiff(file1, file2):
    print(diff) 
```

但是，如果有任何事情出了问题，那就不好了。有没有一种方法可以对每个“名称产品数量”进行分组并与文件 2 进行比较，在该文件中我对每个“名称产品数量”进行了分组，如果文件 1 和文件 2 之间存在差异，则表明这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:33:44.083

您可以使用 python 内置函数对行进行`sorted(alist)`排序，也可以使用`alist.sort()`.

`sort`此外，您可以在使用 python 打开文件之前对文件使用 UNIX 命令。这样你就可以确定它们都是有序的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T22:23:14.980

你确定你`difflib`首先需要吗？

首先，你只想要最小的差异线，而不是任何上下文等，所以花哨的差异算法有点矫枉过正。

并且大概您将解析生成的差异线，以便总结金额。（大概这就是你要导入的原因`csv`。）

所以，如果你打算这样做，你可以导入这些值，然后，例如，做一个设定的差异。或者只是动态比较，像这样（未经测试，只是为了展示这个想法）：

```
import csv

with open('file1', 'rb') as f:
  d = {(name, product): amount for name, product, amount in csv.reader(f)}
diff2 = 0.0
with open('file2', 'rb') as f:
  for name, product, amount in csv.reader(f):
  if d.get((name, product)) == amount:
    del d[(name, product)]
  else:
    diff2 += float(amount)
diff1 = sum(float(amount) for amount in d.itervalues())
print diff1 - diff2 
```

# html - 怎么做 , , 或 list 将表格数据显示为表格？

> ID：12521209
> 
> 赞同：11
> 
> 时间：2012-09-20T21:30:44.767
> 
> 标签：html, css, html-table

首先，让我说我已经阅读了其他关于此的回复，并且我意识到对于表格数据，使用表格是最好的方法。我需要使用表格以外的东西的原因是因为我正在使用一个 jquery 插件（确切地说是 Jquery UI 可排序），它需要将某些数据行嵌套在其他数据行中。我不知道用表格来做到这一点，因此我需要使用另一个元素（我目前正在使用 div）。

我的数据是标准表格数据，每条数据有 1 个单元格。

```
Name  Address     &nbsp;       &nbsp;
Bob   123 Main    edit_button  drag&drop_button
Joe   123 Fake    edit_button  drag&drop_button
Sue   456 Road    edit_button  drag&drop_button
Ann   123 Street  edit_button  drag&drop_button 
```

在此示例中，拖动 Bob 也将拖动 Bob 的团队 Joe 和 Sue。安只能在三人之上或三人之下移动，而乔和苏只能互相交换位置。

在 html 中，它看起来像这样。

```
<div class="table">
    <div class="header">Header information</div>
    <div>
        <div class="row">Bob's information</div>
        <div>
            <div class="row">Joe's information</div>
            <div class="row">Sue's information</div>
        </div>
    </div>
    <div>
        <div class="row">Ann's information</div>
    </div>
</div> 
```

据我所知，这种嵌套不能用表格完成。

如果其他方法会更好，我不需要使用 div。

我的问题基本上是如何让这些信息以表格格式显示？

目前，我最好的猜测是将每个数据元素（包括标题）放在具有固定宽度的 div 中（并根据外观需要应用边框），但这意味着“表格”可能不会调整大小以最适合给定的信息.

我所做的另一个尝试，可以说是更加混乱，是在每个“行”中，有一个具有相同设置的新表，其中包括一个不显示的标题。这几乎给出了我想要的外观，但如果名称不是确切的长度，一些间距会明显偏离。

PS我希望实际问题不是太具体，即使我认为我为什么表格不起作用的理由似乎有点太具体了。

编辑：

是否有某种方法可以使以下工作正常工作，以便仍然可以使用表格？

```
<table>
    <thead>table header stuff</thead>
    <tbody>
        <mtne*>
            <tr>Bob's information</tr>
            <mtne>
                <tr>Joe's information</tr>
            </mtne>
            <mtne>
                <tr>Sue's information</tr>
            </mtne>
        </mtne>
        <mtne>
            <tr>Ann's information</tr>
        </mtne>
    </tbody>
</table> 
```

*mtne = 神话中的表格嵌套元素。

编辑2：

经过进一步测试，我发现使 div 表现得像表格一样的 css 样式也有同样的问题。如果行没有彼此相邻放置，而有些行是嵌套的，则它们不共享宽度数据。由于时间限制，我不得不切换到使用具有预设宽度的 div。

[对于可能出现的其他任何人，使用treeTables](http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/index.html#example-1)时可能会有一些可能性，但我尚未对其进行测试并且需要继续前进。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-20T22:51:10.707

您可以使用 CSS 和 div 来模拟表格，使用`display:table;`,`display:table-row;`等`display:table-cell;`。

* * *

**[​jsFiddle 上的工作演示](http://jsfiddle.net/gionaf/A2M22/)**

HTML：

```
<div class="table">
  <div class="header">
    <div class="cell">Name</div>
    <div class="cell">Address</div>
    <div class="cell">Action 1</div>
    <div class="cell">Action 2</div>
  </div>
  <div class="rowGroup">
    <div class="row">
      <div class="cell">Bob</div>
      <div class="cell">Address</div>
      <div class="cell">Button</div>
      <div class="cell">Another button</div>
    </div>
  </div>
  <div class="rowGroup">
    <div class="row">
      <div class="cell">Joe</div>
      <div class="cell">Address</div>
      <div class="cell">Button</div>
      <div class="cell">Another button</div>
    </div>
    <div class="row">
      <div class="cell">Sue</div>
      <div class="cell">Address</div>
      <div class="cell">Button</div>
      <div class="cell">Another button</div>
    </div>
  </div>
  <div class="rowGroup">
    <div class="row">
      <div class="cell">Ann</div>
      <div class="cell">Address</div>
      <div class="cell">Button</div>
      <div class="cell">Another button</div>
    </div>
  </div>
</div> 
```

​CSS：

```
.table {
    display:table;
}
.header {
    display:table-header-group;
    font-weight:bold;
}
.rowGroup {
    display:table-row-group;
}
.row {
    display:table-row;
}
.cell {
    display:table-cell;
    width:25%;
} 
```

* * *

[IE8+ 支持](http://caniuse.com/css-table)（CSS2.1 特性）

进一步阅读：

*   [www.digital-web.com/articles/everything_you_know_about_CSS_Is_wrong/](http://www.digital-web.com/articles/everything_you_know_about_CSS_Is_wrong/)
*   [www.onenaught.com/posts/201/use-css-displaytable-for-layout](http://www.onenaught.com/posts/201/use-css-displaytable-for-layout)
*   [www.w3.org/TR/CSS21/tables.html#table-display](http://www.w3.org/TR/CSS21/tables.html#table-display)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T22:42:24.467

一种选择是您可以将 a 嵌套在 a`table`内`td`：

[JS小提琴](http://jsfiddle.net/uuLbq/)

```
<table>
  <thead>
    <tr>
      <th>Outer Table</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Bob's information
        <table>
          <thead>
            <tr>
              <th>Inner Table</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Joe's information</td>
            </tr>
            <tr>
              <td>Sue's information</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <td>Ann's information</td>
    </tr>
  </tbody>
</table> 
```

PS - 注意你的表格结构 - 你不能跳过`td`s 或`th`s。

# outlook - HTML 签名的呈现方式不同

> ID：12521214
> 
> 赞同：2
> 
> 时间：2012-09-20T21:31:04.660
> 
> 标签：outlook, html-email, signature

我正在制作一个用于 Outlook 2010 的新 html 签名。它在浏览器和大多数电子邮件客户端中看起来不错，但在 Outlook 2010 中它呈现出一些错误。正如您从 Chrome 的第一个屏幕截图中看到的那样，文本与图像的右侧对齐，但在 Outlook 的第二个屏幕中，它呈现在图像下方。我该如何解决？

**铬：** [铬 http://unihouse.no/images/sig_chrome.PNG](http://unihouse.no/images/sig_chrome.PNG "Chrome 中的签名")

**展望：** [展望 2010 http://unihouse.no/images/sig_outlook2010.PNG](http://unihouse.no/images/sig_outlook2010.PNG "Outlook 2010 中的签名")

附言。我将代码直接粘贴到 Outlook Signature html 文件中，而不使用内置编辑器。

```
<div id="sig" style="min-width: 960px; min-height: 82px; line-height: 18px; margin: 6px 0; padding: 8px; border-top: 1px #15345B dotted; border-bottom: 1px #15345B dotted; font-family: 'Trebuchet MS',helvetica,San-Serif; font-size: 11px; color: #15345B; " >
    <a href="http://unihouse.no" title="test.no"><img src="http://unihouse.no/images/arrows3.jpg" alt="Test AS" style="float: left; padding: 6px 20px 0 0; border: none;"></a>
    <div style="padding: 6px 0 0 0">
        <span style="font-size:11px"><strong style="color: #15345B; letter-spacing: 1px">Test Name</strong>, Unihouse Norge AS</span><br>
        <strong style="letter-spacing: 1px">Storkundeansvarlig Østlandet</strong><br>

        e-post: <a href="mailto:test@test.no" title="e-post Chris" style="text-decoration:none; border-bottom:1px dotted #15345B;color:#15345B">test@test.no </a> | tlf: +47 123 45 567<br>
        Besøksadresse: Tjuvholmen allé 3, 0252 Oslo<br>
        Hovedkontor: Innherredsveien 103, 7043 Trondheim<br>    
    </div>
    <div style="clear:both"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T21:51:47.410

您可以使用表格而不是浮动 div。尝试用一行和 2 个单元格制作一个表格。将图像放在第一个单元格中，将文本放在第二个单元格中。

这应该迫使它们在任何应用程序中彼此相邻。

```
<table id="sig" style="min-width: 960px; min-height: 82px; line-height: 18px; margin: 6px 0; padding: 8px; border-top: 1px #15345B dotted; border-bottom: 1px #15345B dotted; font-family: 'Trebuchet MS',helvetica,San-Serif; font-size: 11px; color: #15345B; " >
<tr>
    <td style="padding: 6px 0 0 0">
        <a href="http://unihouse.no" title="test.no"><img src="http://unihouse.no/images/arrows3.jpg" alt="Test AS" style="float: left; padding: 6px 20px 0 0; border: none;"></a>
    </td>
    <td style="padding: 6px 0 0 0">
        <span style="font-size:11px"><strong style="color: #15345B; letter-spacing: 1px">Test Name</strong>, Unihouse Norge AS</span><br>
        <strong style="letter-spacing: 1px">Storkundeansvarlig Østlandet</strong><br>
        e-post: <a href="mailto:test@test.no" title="e-post Chris" style="text-decoration:none; border-bottom:1px dotted #15345B;color:#15345B">test@test.no </a> | tlf: +47 123 45 567<br>
        Besøksadresse: Tjuvholmen allé 3, 0252 Oslo<br>
        Hovedkontor: Innherredsveien 103, 7043 Trondheim<br>    
    </td>
</tr> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T01:14:54.540

对于 HTML 电子邮件，您`HAVE`使用它`<tables>`来确保一致性。然后将文字和图片相邻`<td>`放置在同一个地方`<tr>`。 [一个有用的网站](http://css-tricks.com/using-css-in-html-emails-the-real-story/)

# ios - iOS 6 中的视频工具箱

> ID：12521217
> 
> 赞同：0
> 
> 时间：2012-09-20T21:31:28.420
> 
> 标签：ios, h.264

在 iOS 6 中，`VideoToolbox.framework`已移至公共框架目录，但我无法添加它，它没有头文件，也没有文档。所以我的问题是，Video Toolbox 框架是否应该在应用程序中用于硬件解码 H.264 帧？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:27:24.193

它也出现在 MacOSX SDK 10.8 中。不过，在 iOS 上，仍然无法从用户空间进程中获取硬件 IO 通道。所以事情没有改变，你仍然无法构建一个 hw h.264 解码器实例......至少在没有越狱的情况下不能。互联网上有反向工程标头（检查 xmbc 项目），但正如我所说，对越狱设备很有用......

# javascript - 将每个循环连接到另一个循环中

> ID：12521226
> 
> 赞同：2
> 
> 时间：2012-09-20T21:32:13.200
> 
> 标签：javascript, jquery, concatenation, each

我想将一个 jquery`each`循环的结果连接到另一个循环中，但没有得到我期望的结果。

```
$.each(data, function () {
            counter++;
            var i = 0;
            var singlebar;
            var that = this;
            tableRow = '<tr>' +
            '<td>' + this.foo + '</td>' + //<---- should terminate this instead
            $.each(this.bar, function(){
                singlebar = '<td>' + that.bar[i].baz + '</td>';
                tableRow += singlebar;
                console.log(singlebar); // outputs "<td>the correct data</td>"
            });
            '</tr>';

            $(tableRow).appendTo('#mainTable > tbody');
}); 
```

嵌套内的部分`each`不会添加到返回的字符串中。

我可以`console.log(singlebar)`在控制台中得到预期的结果，但我不能在主`each`循环中连接这些结果。

我也试过：

```
 $.each(this.bar, function(){
            tableRow += '<td>' + that.bar[i].baz + '</td>';
        }); 
```

这也没有添加所需的内容。

如何迭代这些嵌套数据并将其添加到主`each`语句正在构建的表中间？

* * *

**解决方案**（感谢 sushanth reddy）

我不应该继续尝试以这种方式连接。我应该在`tableRow`创建字符串时添加每个部分，而不是一次全部添加。更像是：

```
 tableRow = '<tr>' +
            '<td>' + this.foo + '</td>';

            $.each(this.bar, function(){
                singlebar = '<td>' + that.bar[i].baz + '</td>';
                tableRow += singlebar;
            });

            tableRow += '</tr>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:35:40.903

你在错误的地方返回..试试这个

```
var counter = 0;
var tableRow = '';
$.each(data, function () {
    counter++;
    var i = 0;
    var singlebar;
    var that = this;
    tableRow = '<tr>' +
    '<td>' + this.foo + '</td>' +
    $.each(this.bar, function(){
        singlebar = '<td>' + that.bar[i].baz + '</td>';
        tableRow += singlebar;
    });
    tableRow +=  '</tr>';

    $(tableRow).appendTo('#mainTable  tbody');
}); 
```

检查这个例子[FIDDLE](http://jsfiddle.net/sushanth009/S3L22/)

还要确保在附加之前有 table 和 tbody 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:35:13.860

试试这个

```
 $.each(data, function () {
                counter++;
                var i = 0;
                var singlebar;
                var that = this;
                tableRow = '<tr>' +
                '<td>' + this.foo + '</td>';
                $.each(this.bar, function(){
                    singlebar = '<td>' + that.bar[i].baz + '</td>';
                    tableRow = tableRow + singlebar;
                });
                tableRow = tableRow + '</tr>';

    });
return tableRow; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:36:55.137

```
$.each(data, function () {
            counter++;
            var i = 0;
            var singlebar;
            var that = this;
            var tableRow = '<tr>' +
            '<td>' + this.foo + '</td>';
            $.each(this.bar, function(){
                singlebar = '<td>' + that.bar[i].baz + '</td>';
                tableRow = tableRow + singlebar;
            });
            tableRow = tableRow + '</tr>';

            return tableRow;
}); 
```

# php - Dijkstra 算法 - 如何计算距离？

> ID：12521231
> 
> 赞同：0
> 
> 时间：2012-09-20T21:32:31.227
> 
> 标签：php, algorithm, dijkstra

我从网站上得到了 PHP 类：http: [//www.giswiki.org/wiki/Algorithmus_von_Dijkstra](http://www.giswiki.org/wiki/Algorithmus_von_Dijkstra)

在我看到的代码中：

```
// $points is an array in the following format: (router1,router2,distance-between-them)
$points = array(
    array(0,1,4),
    array(0,2,I),
    array(1,2,5),
    array(1,3,5),
    array(2,3,5),
    array(3,4,5),
    array(4,5,5),
    array(4,5,5),
    array(2,10,30),
    array(2,11,40),
    array(5,19,20),
    array(10,11,20),
    array(12,13,20),
); 
```

得到“他们之间的距离”的数学是什么？我无法弄清楚这背后的数学原理。

我有 WSG84 坐标（GPS ......例如：56.292157，-88.022461）。我进行了数学运算以在 UTM 中获得相同的坐标（UTM 给出数字 X 和 Y，我得到 4142193、601021）。我得到了第一个和第二个值来填充我的数组。我不知道如何获得第三个值的距离。

有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:56:34.813

第三个值应使用[Great-circle_distance](http://en.wikipedia.org/wiki/Great-circle_distance)算法计算。然后你可以使用[dijkstra的算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:18:34.293

前两个数字不是坐标——它们是索引。因此，您需要为每个点提供一个唯一索引，该索引可用于引用该点。

`array(0, 1, 4)`表示点 0 和点 1 之间的距离为 4。距离的单位可以是任何你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T23:21:36.400

我想你可能对这个问题有点困惑。Djistrka 的算法在有向或无向图上运行。我不确定给出的图表是否应该是定向的。（如果它是无向的，那么 array(n1, n2, d) 也意味着 array(n2, n1, d)

图形不必具有物理 x,y 坐标。您可以简单地拥有一个顶点或节点列表以及它们之间的距离。

给出的数据结构可能不是可视化问题的最佳方式。更好的方法可能如下：

```
$points = array(
array(0, array(1, 4). arrau(2\. 1)),
array(1, array(2, 5). array(3\. 5)),
array(2, array(3,5), array(10, 30), array(11, 30),
array(3, array(4,5)),
array(4, array(5,5)),
array(5, array(19,20)),
array(10, array(11,20)),
array(12, array(13,20))) 
```

在伪代码中，这表示

```
Node 0 -> Node 1 (distance 4), Node 2 (distance 1)
Node 1 -> Node 2 (distance 1), Node 3 (distance 5)
etc. 
```

假设这是定向的，这稍微简化了问题，这个数组现在表示所有节点的连接性。例如，节点 0 连接到两个节点，节点 1 和节点 2。节点 1 连接到 3 个节点，节点 2 和节点 3。节点 3 仅连接到一个节点，节点 4。

我们可能对以下问题感兴趣：从节点 0 开始，我们如何到达节点 4？一种路线是节点 0 到节点 1（距离 4）到节点 3（距离 5）到节点 4（距离 5）。总行驶距离为 4 + 5 + 5 = 14。

现在我们问一个问题：那是最短的路线吗？由于该图是如此之小并且连接得不是很好，在这种情况下您可以看到它。到达节点 4 的唯一方法是来自节点 3，到达节点 3 的唯一方法是来自节点 2 或节点 1。要到达节点 2，我们可以来自节点 0 或节点 1。但是通过节点 1 只会使行程更长，因此很明显解决方案是节点 0 -> 节点 2 -> 节点 3 -> 节点 4。

希望澄清有所帮助。

# javascript - 谷歌地图 MarkerImage 精灵是空白的（不可见，透明）

> ID：12521232
> 
> 赞同：-1
> 
> 时间：2012-09-20T21:32:33.980
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用图像精灵来定义 Google 地图 (v3) 标记对象的 MarkerImage。精灵图像从 0,0（左上角）向下 100 像素。代码如下：

```
(function () {
    var icon = new google.maps.MarkerImage(
       "//localhost:8000/public/img/sprite.png",
        new google.maps.Size(25, 25),
        new google.maps.Point(0, -100));
    var position = new google.maps.LatLng(39.27, -105.99);
    var marker = new google.maps.Marker({icon: icon, position: position});
    marker.setMap(map);
}()); 
```

这段代码是正确的。然而，标记图像不显示。

*注意：我已经找到了解决此问题的方法。我正在创建这个问题，因为它还没有在这里得到回答。它可能会节省很多时间，就像对我一样。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:32:33.980

出于某种荒谬的原因，Google 期望一个正的 y 轴值向下遍历（负数，以图形方式绘制）图像精灵。

如果您要在 CSS 中设置 (0, -100) 的背景位置，则必须将 (0, 100) 传递给 Google。

# powershell - Powershell 用户授权

> ID：12521238
> 
> 赞同：1
> 
> 时间：2012-09-20T21:32:55.993
> 
> 标签：powershell, windows-task-scheduler

在 Powershell 中运行以下命令时，它仅在以本地管理员身份登录或从远程计算机运行并传递本地管理员帐户凭据时才有效：

```
schtasks /s (machine) /u (administrator) /p (the password) /tn (the task I'm interested in getting information on) 
```

来自远程机器的回复是

> 错误：访问被拒绝。

当使用本地管理员以外的帐户登录机器时，答案是

> 错误：系统找不到指定的拍子。

我想让这两种方法都有效。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T23:14:20.693

如果你想运行一个任务，你必须使用

```
schtasks /run ... 
```

否则你会得到`system cannot find the path specified`错误。此外，作为非管理员用户，您无权访问在其他用户的上下文中运行的计划任务。您必须将任务更改为以您自己的用户身份运行，或者继续使用管理员凭据进行身份验证。

# sql-server-2008 - Powershell 无法识别 invoke-sqlcmd

> ID：12521239
> 
> 赞同：2
> 
> 时间：2012-09-20T21:32:56.547
> 
> 标签：sql-server-2008, powershell

我无法在 powershell 中使用 invoke-sqlcmd。我已经加载了 Chad Miller 编写的模块，如下所述：[Problems using SQL Server 2008 R2 PowerShell extensions outside of SQLPS](https://stackoverflow.com/questions/4820591/problems-using-sql-server-2008-r2-powershell-extensions-outside-of-sqlps)

该模块加载得很好，没有错误，并且使用 get-module 按预期显示 sqlps。但是，使用 get-pssnapin 不会显示 SqlServerCmdletSnapin100 或 SqlServerProviderSnapin100

当我键入 invoke-sqlcmd 时，我收到错误“术语 'invoke-sqlcmd' 未被识别为 cmdlet、函数、脚本文件或可运行程序的名称......”

运行 Windows 7 Pro，拥有 SQL Server Management Studio Express 2008R2，已安装 SQL Server 2008R2 管理对象。

感谢乔恩的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-22T13:46:56.763

我有类似的问题:) 这就是我所做的：从 sql 文件中注册 dll：

```
set-alias installutil $env:windir\microsoft.net\framework\v2.0.50727\installutil
installutil -i "C:\Program Files\Microsoft SQL Server\100\Tools\Binn\Redist\Microsoft.SqlServer.Management.PSProvider.dll"
installutil -i "C:\Program Files\Microsoft SQL Server\100\Tools\Binn\Redist\Microsoft.SqlServer.Management.PSSnapins.dll" 
```

然后您可以通过以下方式检查：get-PSSnapin -registered

现在添加管理单元：

```
Add-PSSnapin SqlServerCmdletSnapin100   
Add-PSSnapin SqlServerProviderSnapin100 
```

这对我行得通。希望能帮助到你...

对不起我的英语不好：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-06T22:32:11.187

就我而言，安装 Microsoft® SQL Server® 2012 和 Microsoft® SQL Server® 2012 共享管理对象的 Microsoft® Windows PowerShell Extensions 解决了这个问题，它们都包含在 Microsoft® SQL Server® 功能包中

下载链接：[https ://www.microsoft.com/en-us/download/confirmation.aspx?id=29065](https://www.microsoft.com/en-us/download/confirmation.aspx?id=29065)

# java - 客户端与服务的单独 cxf 拦截器配置？

> ID：12521240
> 
> 赞同：1
> 
> 时间：2012-09-20T21:33:04.120
> 
> 标签：java, cxf, interceptor

我有一些使用 Apache CXF 运行的 Web 服务，并使用 cxf:outInterceptors 注册了一个特定的自定义出站拦截器。此拦截器旨在在*响应*返回到 Web 服务客户端时执行。

```
<cxf:bus>
    <cxf:outInterceptors>
        <ref bean="myCustomInterceptorOutbound" />
    </cxf:outInterceptors>
    <cxf:inInterceptors>
    </cxf:inInterceptors>
    <cxf:features>
        <cxf:logging />
    </cxf:features>
</cxf:bus> 
```

但是，如果我的一个 Web 服务最终*调用*了一个单独的远程 Web 服务，我不希望在这种情况下调用该出站拦截器。

有没有办法为 jaxws:client（或 JaxWsProxyFactoryBean）指定不同的拦截器配置，即告诉“不使用”通过 cxf:bus 注册的拦截器？还是我需要从 cxf:bus 中删除拦截器并在每个 jaxws:endpoint 上单独注册它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-30T10:53:53.037

每个客户端/服务器单独添加拦截器。例如

```
<jaxws:client 
    serviceClass="no.bring.booking.Booking" 
    address="${bring.booking.webservice}" id="booking">
    <jaxws:inFaultInterceptors>
         <ref bean="loggingInInterceptor" />
    </jaxws:inFaultInterceptors>
    <jaxws:inInterceptors>
        <bean class="com.greenbird.xmlformatter.cxf.LoggingInInterceptor">
            <property name="prettyLogging" value="true" />
            <property name="prettyPrinter" ref="prettyPrinter" />
        </bean>
    </jaxws:inInterceptors>
    <jaxws:outInterceptors>
        <bean class="com.greenbird.xmlformatter.cxf.LoggingOutInterceptor">
            <property name="prettyLogging" value="true" />
            <property name="prettyPrinter" ref="prettyPrinter" />
        </bean>
    </jaxws:outInterceptors>
    <jaxws:outFaultInterceptors>
        <ref bean="loggingOutInterceptor" />
    </jaxws:outFaultInterceptors>       
</jaxws:client> 
```

并通过将它们声明为 bean 来共享一些拦截器。

# php - Symfony2 -> 如果请求的格式（例如移动设备）不存在，则呈现默认格式（例如 html）

> ID：12521243
> 
> 赞同：3
> 
> 时间：2012-09-20T21:33:18.457
> 
> 标签：php, symfony, twig

在 Symfony2 中，尝试渲染**时**`index.mobile.twig`，**不存在时****如何加载。`index.html.twig``index.mobile.twig`**而是去得到一个“这个模板不存在错误”。

我相信答案在于为 Twig 创建自定义加载器，但我找不到任何文档，只是偶尔引用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:43:11.307

答案涉及在`twig.loader.class`发现特定的树枝模板不存在并且在抛出异常之前扩展并创建一个额外的步骤。

**第 1 部分 - 配置**

答案涉及扩展`twig.loader.class`.

1.  创建一个`customloader.php`扩展 Twig 文件的`FilesystemLoader`文件。

    ```
    namespace Acme\MyBundle\Twig\Loader;       
    use Symfony\Bundle\TwigBundle\Loader\FilesystemLoader;
    class CustomLoader extends FilesystemLoader{} 
    ```

2.  修改您的`config.yml`以包括：

```
参数：
     twig.loader.class: Acme\YourBundle\Twig\Loader\name_of_your_class

```

* * *

**第 2 部分 - 扩展课程**

扩展类相当简单。我需要修改的方法是`findTemplate($template)`. 这是一个非常小的方法，您可能可以使用它`parent::`来更正确地扩展原始代码。但是，我选择完全覆盖它并在`Unable to find template`错误之前包含以下代码：

```
 if (false === $file || null === $file) {

        switch( $template->get('format')){
            case 'mobile':
                    $template->set('format','html');
                    return self::findTemplate($template->getLogicalName());
                break;
        }

        throw new \Twig_Error_Loader(sprintf('Unable to find template "%s".', $logicalName), -1, null, $previous); 
```

在代码意识到文件存在后，它会检查是否`mobile`是请求的格式。如果是，它将模板对象的格式设置为`html`，然后尝试`name.html.twig`. 在这方面你可以做更多的事情，但这解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:53:10.297

您可以尝试捕获由 twig 引发的异常，并使用其他模板在 catch 范围内重试它。

当模板不存在时，twig 会抛出 InvalidArgumentException，但我不确定这是否也与其他错误一起抛出。

但无论如何，尝试类似：

```
try {
    $template = $this->render('index.mobile.twig');
} catch (\InvalidArgumentException $exc) {
    $template = $this->render('index.html.twig');
}
return $template; 
```

# ruby-on-rails - 在 Rails 公用文件夹中创建符号链接时遇到问题

> ID：12521244
> 
> 赞同：7
> 
> 时间：2012-09-20T21:33:18.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, symlink, assets

在我的 Rails 应用程序中，我想在`public/`指向另一个文件夹的链接中创建一个符号链接。我可以创建符号链接并在其中导航，但我似乎无法让 Rails 从中提供图像。有诀窍吗？甚至可能吗？

我有一个包含数千个 PNG 的文件夹，我不想直接放入资产管道中。他们很少，如果有的话，改变所以管道在很大程度上是不必要的。想法？

```
lrwxr-xr-x  1 meltemi  staff   pages -> /Volumes/BigDisk/pages_root 
```

但是当我尝试击中时，`localhost:3000/pages/F-C2E-439_00002_1.png`我得到：

```
Routing Error

No route matches [GET] "/pages/F-C2E-439_00002_1.png" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-01T13:56:33.293

您可以使用`send_file`来避免该路由错误，您将无法直接访问图像，但您可以使用辅助方法将其加载到视图中以执行以下操作：

```
send_file "#{Rails.root}path/to/your/image", type: 'image/jpeg', disposition: 'inline' 
```

唯一的问题（对我来说）是，如果我必须发送超过 3 张大图片，比如人们直接从手机上传的图片，第一张图片将在 iOS Safari 上中断，并且只有一半加载。

# objective-c - 游戏中心 facebook 喜欢

> ID：12521245
> 
> 赞同：2
> 
> 时间：2012-09-20T21:33:21.187
> 
> 标签：objective-c, cocos2d-iphone, game-center

所以今天我开始使用新的 iOS 6 SDK 进行开发，并注意到我的游戏在 Game Center 中有一个新的 Facebook Like 按钮（它是灰色的，因为我还没有指定任何内容）。所以我的问题是，我怎样才能将 Facebook 页面的链接放在“Like”按钮后面？

顺便说一句，我的 iPhone 游戏已经有一个 Facebook 页面。

已经谢谢了

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T16:53:07.373

希望还为时不晚。刚刚看了一个 WWDC 视频，他们说，如果有人点赞按钮，这意味着将生成喜欢游戏的人和指向 iTunes 的链接（我想也张贴在你的墙上）。这不是为了喜欢您的应用页面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T02:10:36.283

我想知道同样的事情。我在没有任何信息的情况下搜索了苹果文档和 iTunesconnect 站点。

编辑：似乎该按钮已被禁用，因为该应用程序尚未发布。我检查了我的其他游戏（已发布），并且新的 Game Center Like 按钮有效。我不需要对代码或 itunesconnect 做任何事情来让它工作。

# jquery - 在窗口调整大小时使用 jquery 的全屏图像？

> ID：12521249
> 
> 赞同：0
> 
> 时间：2012-09-20T21:33:44.457
> 
> 标签：jquery, fullscreen, each, window-resize

当触发窗口调整大小功能时，我正在尝试使用 jquery 制作全屏图像。但我得到了这种结果——你可以在图像底部看到一个我不知道如何修复的间隙。

![在此处输入图像描述](../Images/2e6eac31c5409d2cf7fb2ccadb73b47f.png)

基本的html，

```
<!-- container -->
    <div id="container" class="container">

        <div class="holder-supersize" id="supersize">

            <ul class="background-supersize">
                <li><a href="#"><img src="styles/images/IMG_0250.jpg" alt="" width="1000" height="667" /></a></li>
                <li><a href="#"><img src="styles/images/IMG_0255.jpg" alt="" width="667" height="1000" /></a></li>
                <li class="active"><a href="#"><img src="styles/images/IMG_0323.jpg" alt="" width="1158" height="772" /></a></li>
            </ul>

        </div>

    </div>
    <!-- container --> 
```

jquery 用于在窗口调整大小时更新图像大小，

```
$(document).ready(function(){

    $(window).resize(function(){

        $(".holder-supersize").each(function() {

            //Define image ratio & minimum dimensions
            var minwidth = .5*(640);
            var minheight = .5*(480);
            var ratio = 480/640;

            //Gather browser and current image size
            var imagewidth = $(this).width();
            var imageheight = $(this).height();
            var browserwidth = $(window).width();
            var browserheight = $(window).height();

            //Check for minimum dimensions
            if ((browserheight < minheight) && (browserwidth < minwidth)){
                $(this).height(minheight);
                $(this).width(minwidth);
            }
            else
            {   
                //When browser is taller    
                if (browserheight > browserwidth){
                    imageheight = browserheight;
                    $(this).height(browserheight);
                    imagewidth = browserheight/ratio;
                    $(this).width(imagewidth);

                    if (browserwidth > imagewidth){
                        imagewidth = browserwidth;
                        $(this).width(browserwidth);
                        imageheight = browserwidth * ratio;
                        $(this).height(imageheight);
                    }

                }

                //When browser is wider
                if (browserwidth >= browserheight){
                    imagewidth = browserwidth;
                    $(this).width(browserwidth);
                    imageheight = browserwidth * ratio;
                    $(this).height(imageheight);

                    if (browserheight > imageheight){
                        imageheight = browserheight;
                        $(this).height(browserheight);
                        imagewidth = browserheight/ratio;
                        $(this).width(imagewidth);
                    }
                }
            }
            return false;
        });

    });

}); 
```

超大图片的 CSS

```
/* Supersize -------------------------------------------*/

.holder-supersize {
    width:100%;
    height:100%;
    position:absolute;
    left:0;
    top:0;
    z-index:0;
}

.background-supersize {
    width:100%;
    height:100%;
    overflow:hidden;
    position:relative;
}

.background-supersize li {
    width:100%;
    height:100%;
    overflow:hidden;
    position:absolute;
    left:0;
    top:0;
    text-align:center;
}

.background-supersize li img {
    /* for image with height < width */
    /**/
    width:100%;
    height:auto;

    /* for image with height > width */
    /*
    width:auto;
    height:100%;
    */
}

.background-supersize li ,
.background-supersize a,    
.background-supersize img{
    display:none;
    }

.background-supersize .active, 
.background-supersize .active a,
.background-supersize .active img{
    display:inline;
} 
```

这是[jsfiddle](http://jsfiddle.net/Y8EDC/)的链接，这是查看[实际产品](http://lauthiamkok.net/bin/supersize/index.php)的链接。

有什么想法我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:36:36.960

看起来您的代码通过锁定高宽比来防止图像倾斜。因此，除非窗口具有相同的比例，否则您要么在底部有空间（对于高/窄窗口），要么在右侧有空间（对于短/宽窗口）。

如果您希望图像倾斜，您可以通过简单地使高度等于窗口高度和宽度等于窗口宽度来简化代码。

# php - PHP函数：使提取的单词可点击？

> ID：12521251
> 
> 赞同：0
> 
> 时间：2012-09-20T21:33:55.113
> 
> 标签：php, function, tags, keyword

我无法使用此功能制作可点击的提取词：

```
$text = $curTemplate['name'];
function extract_keywords($str, $minWordLen = 4, $minWordOccurrences = 1, $asArray = false)
{
    function keyword_count_sort($first, $sec)
    {
        return $sec[1] - $first[1];
    }
    $str = preg_replace('/[^\p{L}0-9 ]/', ' ', $str);
    $str = trim(preg_replace('/\s+/', ' ', $str));

    $words = explode(' ', $str);
    $keywords = array();
    while(($c_word = array_shift($words)) !== null)
    {
        if(strlen($c_word) < $minWordLen) continue;

        $c_word = strtolower($c_word);
        if(array_key_exists($c_word, $keywords)) $keywords[$c_word][1]++;
        else $keywords[$c_word] = array($c_word, 1);
    }
    usort($keywords, 'keyword_count_sort');

    $final_keywords = array();
    foreach($keywords as $keyword_det)
    {
        if($keyword_det[1] < $minWordOccurrences) break;
        array_push($final_keywords, $keyword_det[0]);
    }
    return $asArray ? $final_keywords : implode(', ', $final_keywords);
}
//How to use

//Basic lorem ipsum text to extract the keywords
$text = "stackoverflow a language independent collaboratively edited question and answer site for programmers";

echo extract_keywords($text); 
```

我想这样的话：

```
<a href="http://website.com/search.php?search=<?php echo extract_keywords($text); ?>"><?php echo extract_keywords($text); ?></a> 
```

但不工作

以这种方式工作，但链接中没有关键字:(为什么????

```
<a href="http://website.com/search.php?search=NO KEY"><?php echo extract_keywords($text); ?></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:08:31.683

如前所述：

```
$keywords = extract_keywords($text, 4, 1, true);

foreach($keywords as $k => $keyword){
    echo '<a href="http://website.com/search.php?search=' .  $keyword . '">' . $keyword . '</a>' . ($k != (count($keywords) - 1) ? ',' : '');
} 
```

# python - ActiveState 对公司的限制？

> ID：12521253
> 
> 赞同：1
> 
> 时间：2012-09-20T21:34:23.257
> 
> 标签：python, licensing, activepython

我最近了解到[ActivePython](http://www.activestate.com/activepython/downloads)是一种快速启动 Python 并在各种平台上运行的便捷方式。

我受雇于美国的一家私人软件公司，我想知道：下载和使用 ActivePython 对我们的一些项目有何影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:57:22.590

下载说明说：

> 为您的开发项目和内部部署下载 ActivePython 社区版免费二进制文件。

这意味着您可以将其用于开发和部署内部项目，也可以用于开发但不部署外部项目。但这肯定不是具有法律约束力的含义，而且有点模糊（例如，如果您部署一个运行外部软件即服务系统的内部项目怎么办？）。对我自己或您将在 SO 上找到的任何其他人的解释也没有任何价值。

如果您不相信自己会阅读并弄清楚[http://www.activestate.com/activepython/license-agreement](http://www.activestate.com/activepython/license-agreement)，那么您需要聘请律师，在允许您依赖他们建议的情况下这样做。

或者，也许，联系 ActiveState 并询问他们。

但实际上，其他任何人的回答都没有用。

# user-interface - 是否有在 Windows 8 中输入数据的指南？

> ID：12521255
> 
> 赞同：1
> 
> 时间：2012-09-20T21:34:26.530
> 
> 标签：user-interface, windows-8

我正在努力寻找有关如何从用户那里获取数据的 UI/UX 指南。

例如，如果创建一个新用户，您应该：

*   为此要过渡到新的全屏界面吗？
*   显示要编辑的字段的弹出窗口？
*   滑出设置样式弹出窗口？

我还没有看到任何关于这方面的指导，很高兴看到链接/帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:36:23.983

我认为总的来说，这个版本中的很多东西都是为了让 Windows 成为一个更好的触控功能和面向媒体消费的平台。因此，您可能看不到围绕大量数据输入相关应用程序的太多功能/指南。

话虽如此，我认为您列出的三种方式是您拥有的主要选择之一。我认为这真的取决于你看到数据输入的重要性，与应用程序中的其他功能相比。在我看来：

*   如果用户输入的数据对应用程序至关重要，并且是用户需要关注的主要内容，那么继续将其设置为单独的屏幕。

*   如果数据将用于过滤/更改屏幕上已有的内容，并且是 1 - 3 条数据，则使用弹出窗口。

*   对于介于两者之间的任何内容，我会使用弹出式 UI。

同样，重要的是要记住呈现的 UI 与应用程序的其他部分相当一致 - 这样用户就不会对此感到惊讶。

还要确保在基于触摸的应用程序中没有太多的文本输入字段 - 并且在一个屏幕上没有太多的字段。尽管现在触摸设备上有一个不错的软键盘，但使用这些东西输入很多东西仍然很痛苦。但无论如何，这些都是您可能知道的一般准则。

# php - Bash：递归查找php文件，用php预处理，捕获输出到html文件

> ID：12521256
> 
> 赞同：2
> 
> 时间：2012-09-20T21:34:26.637
> 
> 标签：php, html, bash

我正在寻找一个名为 *.php 的文件的目录扫描，然后使用 PHP 预处理器执行每个文件，并将输出捕获到与文件相同的位置，具有相同的文件名，只有 .html 扩展名而不是 .php .

到目前为止，我有：

```
find . -type f -name "*.php" | xargs -I {} php {} >> '{ dirname {}; basename {} .php; }' 
```

感谢您对这个 bash 拼图的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:41:28.450

认为这行得通...

```
#!/bin/bash
FILES=/var/www/*.php
for f in $FILES
do
  echo "Running script $f..."
  php $f > $f.out
done 
```

也许需要完整路径到您的 php 所在的 bin。

**编辑：**

```
php $f > ${f%.php}.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:42:31.910

最好`-exec`直接使用 in `find`。xargs 适用于您需要传递批量参数时，同时您正在寻找更多每个文件的东西。例如

```
find ... -exec "php {} > $(basename {}).html;" 
```

或类似的东西。自从我不得不使用 bash 以来已经有一段时间了，所以这几乎肯定不会起作用，但应该让你开始。

# sitecore - 通过 Lucene.Net 获取最近的文章

> ID：12521257
> 
> 赞同：2
> 
> 时间：2012-09-20T21:34:28.073
> 
> 标签：sitecore, lucene.net, sitecore6, lucene

我想获取基于一个字段的最新文章：**pubdate**。我现在有这种方法：

```
 private void GetLastIndexId()
        {
            string indexLocation = @"C:\\inetpub\wwwroot\MyWebsite\Data\indexes\newsArticle";
            Directory dir = FSDirectory.GetDirectory(indexLocation);
            IndexReader indexReader = IndexReader.Open(dir);
            IndexSearcher indexSearch = new IndexSearcher(indexReader);
            Analyzer analyzer = new StandardAnalyzer();
            QueryParser qp = new QueryParser("id", analyzer);

            Query query = qp.Parse("pubdate: [2012-01-01T00:00:000-00:00 3012-01-01T00:00:000-00:00]");
            Hits hits = indexSearch.Search(query);
 List<Document> myHits = new List<Document>();
            for (int i = 0; i < hits.Length(); i++)
              {
                 if (i == hits.Length() - 1)
                   {
                     Document doc = hits.Doc(i);
                     lastPubDate = doc.GetValues("pubdate").First();
                   }
              }

        } 
```

**编辑：**我这样做是从内容项中获取长度为 1 的项。这是一种黑客攻击，因为如果更改文件夹结构，那么这可能会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:03:37.207

您是否尝试过接受排序参数的 IndexSearcher.Search 重载？

```
var sortField = new SortField("pubdate", SortField.STRING, /*reverse*/ true);
var hits = searcher.Search(query, /*filter*/ null, /*count*/ 1, new Sort(sortField)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:57:38.277

我做了这样的事情：

```
 var sortField = new SortField("pubdate", SortField.STRING, true);

        for (int i = 0; i < hits.Length(); i++)
        {
            Document doc = hits.Doc(i);
            string getDate = doc.GetValues("pubdate").First();

            if (string.Compare(getDate, lastPubDate) > 0)
            {
                lastPubDate = doc.GetValues("pubdate").First();
            }
        } 
```

# ruby-on-rails - 将passenger_base_uri 信息传递给rails 应用程序

> ID：12521258
> 
> 赞同：3
> 
> 时间：2012-09-20T21:34:29.120
> 
> 标签：ruby-on-rails, ruby, nginx, passenger

我正在使用 nginx/1.2.1 + Phusion Passenger 3.0.13，并且我正在使用 nginx.conf 文件中的passenger_base_uri 参数在单个服务器上设置多个Rails 应用程序。它看起来像下面这样：

```
server {
    listen       80;
    server_name  localhost;
    root /path/to/code;
    passenger_enabled on;
    passenger_base_uri /app1;
    passenger_base_uri /app2;
    rails_env production;
} 
```

现在假设我在 www.mysite.com 上托管这个。我的问题是，当我访问 www.mysite.com/app1 时，它加载得很好……但是该页面上的所有链接都指向 www.mysite.com。该应用程序不知道它实际上托管在名为 app1 的子文件夹中。

我知道我可以手动键入将以下配置选项添加到我的应用程序：

```
config.action_controller.relative_url_root = "/app1" 
```

但我希望不必手动添加。关于如何以编程方式将该信息输入 Rails 应用程序的任何想法，以便我可以将其作为变量访问并正确更新我的链接？

谢谢！

# sql - SQL - 加入 2 个查询？

> ID：12521259
> 
> 赞同：-4
> 
> 时间：2012-09-20T21:34:31.613
> 
> 标签：sql, oracle

我有两个查询：

```
Select trunc(create_dtime) as Day, Count(Player_Id) as New_Users
From Player
Where Trunc(Create_Dtime) >= To_Date('2012-Jan-01','yyyy-mon-dd')
Group By Trunc(Create_Dtime) 
```

和

```
Select trunc(create_dtime) as Day,Count(Player_Id) as Retained_Users
From Player
Where Trunc(Create_Dtime) >= To_Date('2012-Jan-01','yyyy-mon-dd')
And Trunc(Init_Dtime)  >= Trunc(Sysdate) - 7
Group By Trunc(Create_Dtime)
Order By Day Asc 
```

每天都有一个价值，我想将这两个查询连接在一起，所以我只有一个查询而不是两个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:40:35.567

您不需要在那里加入：

```
SELECT
  TRUNC(CREATE_DTIME) AS DAY,
  COUNT(PLAYER_ID) AS NEW_USERS,
  COUNT(CASE WHEN TRUNC(INIT_DTIME) >= TRUNC(SYSDATE) - 7 THEN PLAYER_ID ELSE NULL END)     AS RETAINED_USERS
FROM PLAYER
WHERE TRUNC(CREATE_DTIME) >= TO_DATE('2012-Jan-01','yyyy-mon-dd')
GROUP BY TRUNC(CREATE_DTIME)
ORDER BY 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:36:47.720

这只是一个内部联接，除非您想在其他查询中包含不匹配的结果。否则，您只需使用：

```
SELECT * FROM query1 INNER JOIN query2 ON query1.Day=query2.Day 
```

我应该注意这是 MySQL 的语法，我没有意识到您将其标记为 Oracle。如果不完全相同，语法可能会相似，但我从未使用过 Oracle。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:43:36.703

我明白了，我只是忘记标记列。

```
Select one.Day, one.New_Users, two.Retained_Users
From
(
Select trunc(create_dtime) as Day, Count(Player_Id) as New_Users
From Player
Where Trunc(Create_Dtime) >= To_Date('2012-Jan-01','yyyy-mon-dd')
Group By Trunc(Create_Dtime)
) One
Inner Join 
(
Select trunc(create_dtime) as Day,Count(Player_Id) as Retained_Users
From Player
Where Trunc(Create_Dtime) >= To_Date('2012-Jan-01','yyyy-mon-dd')
And Trunc(Init_Dtime)  >= Trunc(Sysdate) - 7
Group By Trunc(Create_Dtime)
Order By Day Asc
) Two On One.Day=Two.Day
Order By 1 
```

# sql - 更新意外令牌后 HSQLDB 触发器：需要 FROM：INTO

> ID：12521260
> 
> 赞同：0
> 
> 时间：2012-09-20T21:34:35.993
> 
> 标签：sql, triggers, hsqldb

我尝试在 HsqlDB 中构建这个触发器，没有 SELECT 语句它工作正常但是当我输入一个选择语句时，我得到了这个错误意外令牌：FROM required: INTO

```
 CREATE TRIGGER PUBLIC.TRIGGERNAME AFTER UPDATE ON PUBLIC.CLIENTE_OFFERENTE 
 REFERENCING NEW ROW AS NUOVO 
     FOR EACH ROW 
           BEGIN ATOMIC 
               IF NUOVO.STATO='Venduto'
                              THEN
                              (SELECT IDIMMOBILE AS IDIMM FROM OFFERTA WHERE IDOFFERTA=NUOVO.IDOFFERTA); 
                            INSERT INTO PUBLIC.VENDITE(IDCLIENTE,IDIMMOBILE)VALUES(NUOVO.IDCLIENTE,IDIMM);END IF;END$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:08:56.250

此处不允许使用普通的 SELECT 语句，因为它们什么都不做。

你需要这样的东西：

```
BEGIN ATOMIC 
    DECLARE VAR_IDIMM INT;
    IF NUOVO.STATO='Venduto' THEN
        SELECT IDIMMOBILE INTO VAR_IDIMM FROM OFFERTA WHERE IDOFFERTA=NUOVO.IDOFFERTA; 
        INSERT INTO PUBLIC.VENDITE(IDCLIENTE,IDIMMOBILE)VALUES(NUOVO.IDCLIENTE,VAR_IDIMM);
    END IF;
END 
```

为 VAR_IDIMM 选择正确的类型，使其与 IDIMMOBILI 列相同。使用最新的 HSQLDB 2.2.9。

# jquery - jquery中的动画不透明度和背景位置

> ID：12521261
> 
> 赞同：1
> 
> 时间：2012-09-20T21:34:38.783
> 
> 标签：jquery, animation, webkit, jquery-animate, css-transitions

我有一个博客（[博客](http://somuchweeeed.tumblr.com/)）。在我的帖子中，在悬停时，我使用 -webkit-transitions 更改了它们的位置和不透明度的链接（永久链接、点赞等）。但是我想使用 jquery 而不是 -webkit-transitions 在 ie 中工作。我在 jquery 中开发了一些代码，你能帮我完成它吗？

这是我开始的代码：[JsFiddle](http://jsfiddle.net/MFJDE/59/)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:57:06.937

希望这会有所帮助：

## *[jsFiddle 演示](http://jsfiddle.net/FSb3T/4/)*

**jQuery (v: 1.8.0)**

```
$('#entry ').on('mouseenter mouseleave', function( event ){
    var $image = $(this).find('img.photo');
    var eTyp = event.type=='mouseenter'?         // if event IS 'mouseenter'
        $image.stop().fadeTo(400, 0.5) :         // do that,
        $image.stop().fadeTo(300, 1)   ;         // else, do this.
    $('#switch > div').stop(1).each(function(i){ //.stop(1) is to prevent animation buildups on fast mouse movements
        eTyp = event.type=='mouseenter' ?        // same events trick here. 
        $(this).delay(60*i).animate({top:   0, opacity: 1}, 400):
        $(this).delay(70*i).animate({top: 150, opacity: 0}, 300);          
    });  
}); 
```

**HTML：**

```
<div id="entry">
    <div id="switch">
        <div id="b1"></div>
        <div id="b2"></div>
        <div id="b3"></div>
        <div id="b4"></div>
    </div>
</div> 
```

**CSS：**

```
#entry{position:absolute;width:490px;height:auto;background-color:#000}

#switch{
    position:absolute; /* to remove large black bottom space */
    top:50%;           /* if buttons holder is at 50% than we just need to push the buttons down! */
    margin:0 auto;
    width: 116px;
    left:187px; /* just a bit of math to center it :) */
    height: 25px;
    background-repeat: no-repeat;
}
/* buttons */
#switch > div{
    cursor:pointer;
    opacity:0;
    position:relative;
    float:left;
    top:150px;
    width: 25px;
    height: 25px;
    margin:0px 2px;
    background-image: url(http://static.tumblr.com/dbek3sy/Oufm2q70l/lightglass_icons.png);
}
#switch > div:hover{
    opacity:0.3;      
}
#b1{background-position: 0    0;}
#b2{background-position: 75px 0;}
.b3{background-position: 50px 0;}
.b4{background-position: 25px 0;}

#entry img{
    width:100.01%;         /* 100.01 to fix M.Firefox images width glitch */
    vertical-align:middle; /* to remove bottom extra space */
} 
```

# ruby-on-rails - 意外的“Fixnum 与数组的比较失败”

> ID：12521266
> 
> 赞同：0
> 
> 时间：2012-09-20T21:34:59.127
> 
> 标签：ruby-on-rails, ruby, api, google-maps

我无法解决这个基本错误，我没有更改代码中的任何内容，但修复了 if 子句的缩进

我向 Google Direction 的 API 发出请求，并捕获点之间的汽车总旅行时间。我尝试使用下面的代码来捕获它；

```
duration = hash['routes'][0]['legs'][0]['duration'].fetch('value') 
```

但是，当我尝试进行如下比较时，它会给我带来错误；

```
if duration < timeToArriveSecond #where timeToArriveSecond is a parameter started with value -1\. Integer value 
```

当我被卡住时，这里的开发人员是否有可能启发我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:09:52.847

很难说不知道哈希的样子，但是由于您的“路线”和“腿”返回一个数组键“值”的持续时间似乎也这样做，请尝试按如下方式更改您的行：

```
duration = hash['routes'][0]['legs'][0]['duration'].fetch('value')[0] 
```

或者因为 fetch 在这里像 ["value"] 一样工作

```
duration = hash['routes'][0]['legs'][0]['duration']['value'][0] 
```

对我来说，似乎哈希看起来像这样（据我所知，你是如何访问它的：

```
irb(main):065:0* hash 
                 => {"routes"=>[{"legs"=>[{"duration"=>{"value"=>[1, 2, 3]}}]}]}
irb(main):066:0> hash["routes"][0]["legs"][0]["duration"].fetch("value")
                 => [1, 2, 3] 
```

# iphone - 实现半屏动画

> ID：12521270
> 
> 赞同：0
> 
> 时间：2012-09-20T21:35:11.873
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uianimation

我计划实现类似于 Facebook 的东西，在左侧点击一个三横条按钮，将视图向右滑动一半以上，以在其下方显示另一个视图，以在“朋友”、“消息”等各种选项之间进行选择， “新闻提要”等

我们应该如何实现那个动画。对一些示例代码的任何引用都会很好。

我正在附上我正在使用的图标。

![在此处输入图像描述](../Images/471764c8f94db95d043ed169b2a56118.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T05:44:52.753

假设您希望您的行为与 Facebook 完全相同，我将通过以下方式实现它。- 首先以正确的顺序在视图控制器上添加您的视图（应首先添加底部的视图）。比如下面的tableview会先添加，然后上面“滑动”的内容会第二个添加到view controller的view中

- 然后将 UIPanGestureRecognizer 添加到幻灯片顶部的视图中。此手势的处理程序应采用手势的 x 组件并相应地更新顶部的视图。添加终端案例，以便将视图的移动限制在一定范围内。

-最后，当平移手势结束时触发例程以完全“打开”顶部视图或完全“关闭”顶部视图。这将只是在另一个动画块中。这是平底锅处理程序的示例实现：

```
- (void)pan:(UIPanGestureRecognizer *)gesture
{
float translation = [gesture translationInView:self.view].x;

//don't allow for moving topview further left than screen
if (self.sliderOpen == NO && translation < 0) {
    translation = 0;
} else if (self.sliderOpen == YES && translation < -OPEN_POS) {
    translation = -OPEN_POS;
}

[self.topView setFrame:CGRectMake(self.sliderOpen == YES ? OPEN_POS + translation : translation, self.topView.frame.origin.y, self.topView.frame.size.width, self.topView.frame.size.height)];

if (gesture.state == UIGestureRecognizerStateEnded) {
    //get position, then set slide to open or closed
    float endPosition = self.topView.frame.origin.x;

    //set transition sensitivity based on open/closed state
    if (self.sliderOpen == NO) {
        //here sensitivity causes more likely open state
        if (endPosition > OPEN_POS/3) {
            [self openSlider];
        } else {
            if (endPosition != 0) {
                [self closeSlider];
            }
        }

    } else {
        //here sensitivity causes more likely closed state
        if (endPosition > 2*OPEN_POS/3) {
            if (endPosition > OPEN_POS) {
                [self reOpenSlider];
            } else {
                [self openSlider];
            }
        } else {
            [self closeSlider];
        }
    }
}
} 
```

这里的“顶视图”是在顶部滑动的视图。openSlider 和 closeSlider 方法只是将顶视图定位为完全打开或完全关闭的动画块。

# json - 如何在 Ajax 发布请求中发送不同的 JSON 数据

> ID：12521271
> 
> 赞同：0
> 
> 时间：2012-09-20T21:35:11.423
> 
> 标签：json, jquery

如何将 JSON 格式的数据发送到 AJAX POST 请求。我的数据由一个 JAVA 人员对象组成，该对象具有许多属性，例如姓名、住址、地址、电话等，此人的供应商列表（供应商名称、编号），另一个帮助者列表（帮助者姓名、编号）。如何将所有数据组合成一个 JSON 对象并在 jQuery.post(url, data) 中发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:49:54.263

您可以构建一个复杂的 JSON 对象并将其提交给服务器。

```
var employees = { "accounting" : [   // accounting is an array in employees.
                                { "firstName" : "John",  // First element
                                  "lastName"  : "Doe",
                                  "age"       : 23 },

                                { "firstName" : "Mary",  // Second Element
                                  "lastName"  : "Smith",
                                  "age"       : 32 }
                              ], // End "accounting" array.                                  
              "sales"       : [ // Sales is another array in employees.
                                { "firstName" : "Sally", // First Element
                                  "lastName"  : "Green",
                                  "age"       : 27 },

                                { "firstName" : "Jim",   // Second Element
                                  "lastName"  : "Galley",
                                  "age"       : 41 }
                              ] // End "sales" Array.
            } // End Employees 
```

更多信息：[JSON 示例](http://www.hunlock.com/blogs/Mastering_JSON_%28_JavaScript_Object_Notation_%29)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T21:41:54.507

尝试 JSON API ...

```
var person = JSON.stringify(
[{
     name:"dob johnson",
     address:"somewhere over the rainbow",
     phone:"+357 99798342"
   },{
     name:"john Doe",
     address:"4th barrel street",
     phone:"+357 927124442"
   }]
);
person = JSON.stringify(person); 
```

然后发送到服务器

```
$.ajax({
  type: 'POST',
  url: url,
  data: {json:encodeURIComponent(person)},
  success: success,
  dataType: dataType
}); 
```

然后是服务器端

```
// Decode ... $_POST['json']
jsonString = urldecode($_POST['json']); 
```

# linux - 为什么 BIOS 不直接加载 Linux 内核 - 为什么是 MBR 和所有这些麻烦？

> ID：12521277
> 
> 赞同：1
> 
> 时间：2012-09-20T21:35:46.160
> 
> 标签：linux, operating-system, kernel, bios, mbr

我最近了解了 Linux 的引导过程。我不禁想知道为什么我们会在 BIOS 之后遇到访问 MBR 的麻烦，以便那里的指令可以反过来将内核加载到 RAM 中。

为什么是中间人——为什么 BIOS 不直接加载内核？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T22:32:50.127

引导被设计为一个多阶段的过程。每个阶段都知道足以加载下一个阶段。这使每个阶段都保持简单，并使升级尽可能轻松（想象一下在安装新操作系统时需要重新编程您的 BIOS）。

也许更重要的是，它使整个过程尽可能地与平台无关。您可以用新的平台或实现替换链中的任何步骤，并且该过程的其余部分应该仍然有效。如果 BIOS 直接加载操作系统，它必须理解并能够解释文件系统、引导加载程序、操作系统在磁盘上存储组件的方式、需要加载哪些组件等。这需要完成对于每个操作系统、文件系统、引导加载程序等。如果创建了一个新的文件系统（例如），除非您重新编程 BIOS 以理解它，否则您将无法使用它。由于大多数 BIOS 源代码不公开，这将使开发文件系统和操作系统变得极其困难。

要考虑的另一件事是，虽然升级 BIOS 以获得对新事物的支持是很可能的，但人们会尽量避免这种情况。如果您在重新刷新 BIOS 时遇到任何问题，那么您很有可能最终导致系统损坏且无法恢复。避免需要刷新 BIOS 的最简单方法是保持它非常简单，以至于它非常通用以至于不需要升级（尽管有错误修复）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T21:40:21.043

因为否则任何时候您使用不同的磁盘或文件系统都需要重写 BIOS 中的说明。MBR 是代表 BIOS 处理该问题的中介，它知道操作系统的去向。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T21:40:23.627

为了让 BIOS 能够加载 Linux，它必须了解其分区和文件系统的格式。后者会对 /boot 文件系统可能具有的文件系统施加很多限制。因此，为了保持 BIOS 最小化（B 代表 Basic :D）并让操作系统独立发展，BIOS 仅加载引导介质的前 512 个字节。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-20T21:53:06.137

尽管它应该在它应该做的事情上“简单”（初始化、配置和对系统进行基本的健全性测试），但 BIOS 至少应该具有一定程度的灵活性。因此，它被设计为：

A) 允许用户/系统管理员配置一些硬件功能。这就是为什么会出现“按 DEL 进入设置”消息的原因。通常，默认值针对您的系统进行了优化，但一些配置选项包括 CPU 时钟、内存延迟、外设中断等。

B) 为一些琐碎的东西提供一个最小的基本 API，比如打印到屏幕上。这在今天很少使用，因为操作系统重新定义了自己的例程来做同样的事情，并且通常以更专业的方式（例如支持更高分辨率的图形驱动程序）

C) 从不同的媒体（CD-ROM、USB 闪存、不同的硬盘等）引导不同的操作系统

最后一项是 MBR 存在的原因。它是一种标准形式，用于列出驱动器上的主分区（允许多个操作系统存在于同一驱动器上）以及应执行哪些代码来加载和启动操作系统（此代码称为引导加载程序）。

无论如何，至少这就是“旧版”BIOS 以它的方式工作的原因。这正逐渐被淘汰，取而代之的是一种称为 UEFI 的新初始化固件（至少对于 x86 和 x86-64 而言），它支持更大的灵活性。

最后，您可以直接加载内核。看看 Coreboot 项目 (www.coreboot.org)，它进行最少的初始化，然后加载一个有效负载，它可能是内核，也可能是标准的“旧版”BIOS ;-)

希望这可以帮助，

贾尼托

# .htaccess - mod_rewrite 输出必须存在吗？

> ID：12521279
> 
> 赞同：0
> 
> 时间：2012-09-20T21:35:57.410
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, http-status-code-404

我正在尝试使用 mod_rewrite 来生成更清晰的 url。

我的 .htaccess 中有以下内容

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /
RewriteRule ^mypage.php$ https://%{HTTP_HOST}/mypage [R=301,L] 
```

目标是从 [https://mysite.com/mypage.php](https://mysite.com/mypage.php)到[https://mysite.com/mypage](https://mysite.com/mypage)

这给了我一个 404 错误。我实际上没有目录 mypage/ 存在。但据我了解，我不需要真正让 mypage 让 mod_rewrite 工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:42:02.700

> mod_rewrite 输出必须存在吗？

重写规则的替代目标要么*必须存在，要么与存在**替代目标*的其他规则匹配。你所得到的只是将浏览器重定向到一个不存在的 URL，所以毫无疑问你会得到一个 404 错误。

您可以添加另一个规则以重写`/mypage` *回*，`/mypage.php`但随后您将创建一个无限循环。“mypage.php”将被重定向到“mypage”，该“mypage”将被重写为“mypage.php”，“mypage.php”将被重定向到“mypage”等。

您需要在上面的规则中添加一个额外的约束：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /mypage\.php
RewriteRule ^mypage.php$ https://%{HTTP_HOST}/mypage [R=301,L] 
```

将使其仅*在实际请求*为 mde for时重定向`/mypage.php`，而不仅仅是检查 URI，这可能会被其他规则更改。然后你只需要在内部重写它：

```
RewriteRule ^mypage/?$ /mypage.php [L] 
```

请参阅此答案的顶部以更好地解释其工作原理：[https ://stackoverflow.com/a/11711948/851273](https://stackoverflow.com/a/11711948/851273)

# jquery - 如何在为视图模型渲染的模型中检索 IEnumerable 列表返回到控制器

> ID：12521281
> 
> 赞同：0
> 
> 时间：2012-09-20T21:36:08.983
> 
> 标签：jquery, asp.net-mvc, razor

我有一个文本文件，当用户上传文件时，控制器操作方法使用状态机解析该文件并使用通用列表来存储一些值。我以 IEnumerable 的形式将其传递回视图。在我的主视图中，基于这个可枚举的列表，我渲染了一个部分视图来迭代项目并显示标签和文本区域。用户可以在文本区域中添加他们的输入。当用户点击保存按钮时，渲染的局部视图中的这个可枚举列表为空。所以请建议任何解决方案。

这是我的主要观点

```
@model RunLog.Domain.Entities.RunLogEntry
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";

}

   @using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {

<div id="inputTestExceptions" style="display: none;">
        <table class="grid" style="width: 450px; margin: 3px 3px 3px 3px;">
            <thead>
                <tr>
                    <th>
                        Exception String
                    </th>
                    <th>
                        Comment
                    </th>
                </tr>             </thead>

            <tbody>
                @if (Model.TestExceptions != null)
                {
                    foreach (var p in Model.TestExceptions)
                    {
                        Html.RenderPartial("RunLogTestExceptionSummary", p);

                    }
                }
            </tbody>
        </table>

    </div>
     } 
```

部分观点如下：

```
@model RunLog.Domain.Entities.RunLogEntryTestExceptionDisplay
<tr>
    <td>
    @Model.TestException@
       </td>
        <td>@Html.TextAreaFor(Model.Comment, new { style = "width: 200px; height: 80px;" })
    </td>
</tr> 
```

控制器动作

```
[HttpPost]
    public ActionResult Create(RunLogEntry runLogEntry, String ServiceRequest, string Hour, string Minute, string AMPM,
                                 string submit, IEnumerable<HttpPostedFileBase> file, String AssayPerformanceIssues1, IEnumerable<RunLogEntryTestExceptionDisplay> models)
    { 
```

}

问题是包含异常字符串的测试异常，并且注释返回为空。

更新

```
public class RunLogEntry
{
   SOME OTHER FIELDS

    [NotMapped]
    public IEnumerable<RunLogEntryTestExceptionDisplay> TestExceptions { get; set; }
}

public class RunLogEntryTestExceptionDisplay
{
    public string TestException { get; set; }
    public string Comment { get; set; }
}

@using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
         if (Model.TestExceptions != null)
           {
               if (Model.TestExceptions.Count() > 0)
               {
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Test Exceptions")
            </span><span class="rightContent"><span id="TestExceptionChildDialogLink" class="treeViewLink">
                Click here to View Test Exceptions</span>
                <br />
                <span id="TestExceptionDisplay"></span>
                @Html.HiddenFor(model => model.TestExceptions)
                @*<input id="ExceptionString" type="hidden" value="@Model.ExceptionString" />*@
            </span>
        </div>
               }
           }

   <div id="inputTestExceptions" style="display: none;">
        <table class="grid" style="width: 450px; margin: 3px 3px 3px 3px;">
            <thead>
                <tr>
                    <th>
                        Exception String
                    </th>
                    <th>
                        Comment
                    </th>
                </tr>
            </thead>
            @if (Model.TestExceptions != null)
            {
                var index = 0;
                foreach (var p in Model.TestExceptions)
                {
                <tr>
                    <td>@p.TestException
                        <input type="hidden" name="RunLogEntry.TestExceptions[@index].ExceptionString" value="@p.TestException" />
                    </td>
                    <td>
                        <textarea name="RunLogEntry.TestExceptions[@index].Comment" style ="width: 200px; height: 80px;">@p.Comment</textarea>
                        <input type="hidden" name="RunLogEntry.TestExceptions[@index].Comment" value="@p.Comment" />
                    </td>
                    @* Html.RenderPartial("RunLogTestExceptionSummary", p);*@
                </tr>
                                                                                                 index++;
                }

            }
        </table>
    </div>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:46:16.930

要发布集合，您需要以数组样式命名表单元素。您还必须保留一个计数器，以便您可以在 html 元素名称/id 中设置数组索引。

```
@{var index = 0;}
@foreach (var p in Model.TestExceptions) {
  <tr>
    <td>
      @Model.TestException@
     </td>
      <td>
          <textarea name="@Html.FieldNameFor(m => m.TestExceptions[@index].Comment" id="@Html.FieldIdFor(m => m.TestExceptions[@index].Comment" style ="width: 200px; height: 80px;">@p.Comment</textarea>
          <input type="hidden" name="@Html.FieldNameFor(m=> m.TestExceptions[@index].ExceptionString" id="@Html.FieldIdFor(m=> m.TestExceptions[@index].ExceptionString" value="@p.ExceptionString" />
      </td>
  </tr>
index++;
} 
```

我不知道您的模型是什么样的，但是您提到了一个异常字符串，所以我使用了一个隐藏的表单元素来存储“ExceptionString”属性的值，以便模型绑定可以在您发布时获取这些值。

如果您的 RunLogEntry 类除了 TestExceptions 集合之外还有其他属性，您可以通过包含将映射到 RunLogEntry 属性的表单元素来确保它在 POST 上正确绑定。例如，如果您有 RunLogEntry.Foo 属性，则可以将其放在上述循环之外的某个位置：

```
<input type="hidden" name="RunLogEntry.Foo" value="@Model.Foo" /> 
```

# iphone - 如何将表视图添加为子视图，它也是主视图的子视图

> ID：12521282
> 
> 赞同：0
> 
> 时间：2012-09-20T21:36:10.877
> 
> 标签：iphone, ios, uitableview

我是iOS新手，请帮助我。

我正在尝试添加子视图，它在我的主视图中有一个表格视图。在构建应用程序后连接数据源和委托后，它会崩溃。

带有警告：无法恢复先前选择的帧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:32:41.593

尝试以下步骤：

使用 initWithFrame: 制作一个 TableView 并按照您的需要设置您的框架。

确认 UITableViewDataSource 和 UITableViewDelegate。将 TableView 的数据源和委托设置为 self。为委托和数据源添加所有必要的方法。[yourMainVeiw addSubview:yourTableView]; 然后 [yourTableView removeFromSuperView]; 必要时。我相信你已经完成了大部分工作。但如果你忘记添加一个步骤。希望对你有帮助！！

# javascript - 列出所有在 Javascript 中共享一个公共变量的对象

> ID：12521288
> 
> 赞同：1
> 
> 时间：2012-09-20T21:36:35.483
> 
> 标签：javascript, oop

我不完全确定如何问这个问题，因为我只是在 Javascript 中学习 OOP，但它是这样的：

我试图能够为具有相同变量的所有对象进行调用（最终能够排序）。下面是一个示例：

```
function animal(name, numLegs, option2, option3){
    this.name = name;
    this.numLegs = numLegs;
    this.option2 = option2;
    this.option3 = option3;
}

var human = new animal(Human, 2, example1, example2);
var horse = new animal(Horse, 4, example1, example2);
var dog = new animal(Dog, 4, example1, example2); 
```

使用这个例子，我希望能够做一个 console.log() 并显示所有有 4 条腿的动物名称。（应该只显示马和狗，当然......）

我最终希望能够使用此信息制作一个下拉列表或过滤搜索列表。我会用 php 和 mySQL 来做这件事，但我这样做是为了在 javascript 中学习 OOP。

我只在这里问，因为我不知道该问什么。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:48:21.657

您可以像这样编写一个通用函数：

```
function findSamePropVal(arry, prop, val)​{
    var output = [], i, len = arry.length, item;

    for (i = 0; i < len; i++){
        item = arry[i];

        if (prop in item && item[prop] == val)
            output.push(item);
    }
    return output;
} 
```

你会像这样使用它：

```
var animals = [];
animals.push(new Animal('Human', 2, 'example1', 'example2'));
animals.push(new Animal('Horse', 4, 'example1', 'example2'));
animals.push(new Animal('Dog', 4, 'example1', 'example2'));​​​​​​
var fourLegged = findSamePropVal(animals, "numLegs", 4); 
```

这是一个展示它的小提琴：http: [//jsfiddle.net/cEXju/](http://jsfiddle.net/cEXju/)

`findSamePropVal`也可以使用 Array.filter 编写（根据@Alnitak的建议）：

```
function findSamePropVal(arry, prop, val){    
    return arry.filter(function(ele){
        return prop in ele && ele[prop] === val;
    });
} 
```

您可以在此处查看更改后的`findSamePropVal`工作版本：http: [//jsfiddle.net/cEXju/1/](http://jsfiddle.net/cEXju/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:40:07.067

您需要将所有`animal`s 保存到一个数组中，没有办法（至少我认为没有）来获取所有 created `animal`s。

然后只需遍历数组并检查您想要的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T21:41:06.237

好吧，除非您将它们放在某个地方，否则没有真正的方法可以了解您刚刚制作的所有这些“动物”对象。听起来完成您想要的最佳方法是将它们全部存储在一个数组中，然后当您只想获得具有 4 条腿的数组时迭代该数组。

例如：

```
for (var i = 0; i < animals.length; ++i) {
    if (animals[i].numLegs === 4) console.log(animals[i]);
} 
```

# arrays - awk 中的数组打印输出有问题

> ID：12521296
> 
> 赞同：1
> 
> 时间：2012-09-20T21:37:15.027
> 
> 标签：arrays, awk, printf, counter

我有一个似乎可以工作的脚本：我有一个文件“插入”，其中包含

```
+004.1    
-005.2 
```

当我的目录中的每个文件都满足搜索模式条件时，我想插入这些值。下面的脚本确实运行了，事实上，当我回显数组的一部分时似乎很好：

示例（查看下面的脚本）：

```
echo ${array1[0]}  prints to +004.2 
```

但是当我希望将其插入到 awk 中时（请参阅下面的脚本）：

```
printf( "%s\n",   "       Latitude (N is +)      :  """   '${array1[COUNTER]}' " ", ), 
```

它只打印`4.1`，我想打印这个`"+004.1"`。

任何帮助表示赞赏。有关更多信息，请查看下面的脚本。

```
#**********************************************************************
#!/bin/bash
COUNTER=0
array1=( `cat "insert"`)

for i in *.log
do

    echo  ${array1[COUNTER]} 

    cat $i | awk '{ if ( $0 ~ /Letter/ ) {
                      printf( "%s\n",  "       Latitude (N is +)      :  """   '${array1[COUNTER]}' " ", $0 );
                    } else {
                      print $0;
                    }
                  }' > out$COUNTER

    let COUNTER=COUNTER+1

done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T00:17:52.957

使用`printf()`和格式，例如`%+06.1f`.

```
...
printf("%s %+06.1f %s\n", " Latitude (N is +) : ", '${array1[COUNTER]}', $0);
... 
```

我减少了字符串中的空格数，因此该行对于 SO 来说不会太长。

由于原始代码使用`printf("%s\n", ...one string expression...)`并且 shell 变量中的值格式正确，您还可以使用以下方法完成这项工作：

```
...
print " Latitude (N is +) : '${array1[COUNTER]}' " $0;
... 
```

这会将在 shell 中格式化的字符串嵌入到前缀的字符串中，`$0`并用于`print`输出整个批次。

* * *

Shell 代码有资格获得[UUOC](http://en.wikipedia.org/wiki/Cat_%28Unix%29)奖励。`awk`通过命令行传递变量也是一个好主意：

```
awk -v latitude=${array1[COUNTER]} \
    '{ if ($0 ~ /Letter/) printf("%s %+06.1f ", " Latitude (N is +) : ", latitude);
       print $0;
     }' $i > out$COUNTER 
```

这有点更紧凑，同样清晰易读（以我的思维方式）。如果需要，额外信息会在行首之前输出，然后无条件打印该行的其余部分。如图所示传递变量可以避免在脚本中打断单引号。

另请注意，shebang 行`#!/bin/bash`必须是文件中的第一行才能生效。带有所有星星的框注释行确实没有太大帮助。我会删除它（他们 - 我已经删除了尾随的，但需要保留前导的以便能够讨论这个问题）。

# python - 在python中迭代嵌套列表的更简单方法是什么？

> ID：12521299
> 
> 赞同：2
> 
> 时间：2012-09-20T21:37:29.817
> 
> 标签：python, nested

假设我有一个像下面这样的列表，我正在尝试迭代`nested_list[i][1]`元素并返回一个布尔值

```
nested_list = [[0, 0], [0, 1], [0, 2], [0, 3], [0, 4], [0, 5], [0, 6], [0, 7], [0, 8], [0, 9], [1, 0], [1, 1], [1, 2], [1, 3], [1, 4], [1, 5], [1, 6], [1, 7], [1, 8], [1, 9]]

print 1 in (nested_list[i][1] for i in range(nested_list)) 
```

我仍然是 Python 的新手，所以请有更多经验的人告诉我：有没有更 Pythonic 的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T21:40:32.923

尝试这个：

```
print 1 in (i[1] for i in nested_list) 
```

如果您只想检查成员资格，我建议您确实使用`(...)`，而不是`[...]`因为后者会在确实不需要这样做时创建*整个列表。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T21:47:57.550

ARS 已经提出了一个很好的解决方案，但另一个答案是简单的`any(i[1] == 1 for i in nested_list)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:38:40.350

```
>>> import numpy
>>> a = numpy.array(nested_list)
>>> a[:,1]
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
>>> 1 in a[:,1]
True 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T23:36:20.093

**这个使用itertools**的答案也会在第一次命中时短路。

```
>>> from operator import itemgetter
>>> from itertools import imap
>>> 
>>> 1 in (imap(itemgetter(1), nested_list))
True 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T21:43:23.287

像这样的东西？

```
for (x,y) in nested_list:print y 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T08:40:23.783

让我添加这个。

```
print(1 in zip(*nested_list)[1]) 
```

# iphone - 苹果会允许不针对 iPhone5 的应用程序更新吗？

> ID：12521300
> 
> 赞同：1
> 
> 时间：2012-09-20T21:37:32.293
> 
> 标签：iphone, app-store-connect, ios6, iphone-5

由于新的 iPhone5 即将问世，苹果是否允许您上传应用程序更新而不使其以完整的 iPhone5 屏幕尺寸运行？他们会让你上传一个在新手机上运行信箱的应用程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T21:52:07.227

是的，只要您不提供 Default-568h@2x.png 启动图像，您的应用程序就不会以新的分辨率运行，Apple 将暂时允许**它**。

# dynamics-crm-2011 - 是否可以修改任务实体上设置的优先级选项？

> ID：12521301
> 
> 赞同：1
> 
> 时间：2012-09-20T21:37:34.587
> 
> 标签：dynamics-crm-2011

我能够修改案例（事件）实体上的内置优先级选项集，但在任务实体上，我没有获得添加/删除/修改选项集值的按钮。除了库存的“低”、“正常”和“高”值之外，我还想为“关键”添加一个值。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:26:46.483

我怀疑这是一个无证的（？）CRM 主义。

请记住，在幕后，所有活动在活动指针表中共享相同的优先级字段，我们可以有根据地猜测它阻止您编辑该字段，因为它是一个共享选项集——但微软似乎已经实现了共享选项集以专有方式，并且没有使用他们自己的“现有选项集”功能。（同样，我没有找到任何文件，如果有人有关于此事的事实，我很乐意被证明是错误的。）

我原以为您可以编辑基本活动的优先级选项集，但事实并非如此。我认为您只是被卡住了-该选项集被阻止了。作为一种解决方法，您可以向您将能够自定义的任务添加一个新的自定义字段，但它不能用于通用活动视图，只能用于特定于任务的视图。

# c++ - 如何使用 setup 和使用 iconv 库

> ID：12521304
> 
> 赞同：1
> 
> 时间：2012-09-20T21:38:05.040
> 
> 标签：c++, c

我需要使用 incov 库将 ASCII 文本文件转换为 UTF-8。我正在使用 Visual Studio 2008。有人可以指导如何做这种事情。试图用谷歌搜索它，但不明白从哪里获取库文件以及如何使用它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:39:46.747

将 ASCII 转换为 UTF-8 的最简单方法是`strcpy`或`memcpy`...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T21:42:09.537

如果你有真正的 ISO-646 或'plain old ASCII'的文本，它已经是 UTF-8。

`MultiByteToWideChar`事实上，如果它是使用所有 256 个字节值的其他编码，您会发现调用获取 UTF-16 然后调用`WideCharToMultiByte`获取 UTF-8要容易得多。

您将需要一个临时缓冲区`wchar_t`来存储中间 UTF-16 结果。无论编译器版本、设置或运行时如何，这都有效，这些是 Win32 API，而不是语言运行时 API。

MacRoman 是代码页 10000，因此您绝对可以这样处理。看：

[http://msdn.microsoft.com/en-us/library/ee719641(v=prot.10).aspx](http://msdn.microsoft.com/en-us/library/ee719641(v=prot.10).aspx)

您可能还会发现 ICU4C 比 iconv 更容易在 Windows 上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T22:48:02.460

Your question is a bit misleading as Mac Roman is not the same as ASCII.

The instructions for download and installation of LibIconv for Windows can be found [here](http://gnuwin32.sourceforge.net/packages/libiconv.htm)

# imagemagick - ImageMagick：转换 PDF 颜色配置文件会创建巨大的 PDF？

> ID：12521307
> 
> 赞同：4
> 
> 时间：2012-09-20T21:38:22.923
> 
> 标签：imagemagick, imagemagick-convert

我正在使用以下命令：

```
convert sourcefile.pdf -profile "cmyk.icc" -profile "srgb.icc" +profile "*" output.pdf 
```

在一个 3MB 的测试文件上，它会创建一个质量很差的 20MB PDF。

如果我添加 -density 600 参数，文件会爆炸到超过 600mb。有没有办法在保持其他一切的同时转换色彩空间？这是一个用于进一步处理的临时 PDF，所以我不需要它的大小完全相同，但我无法处理巨大的 PDF 文件大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:02:43.970

您的问题不在于`convert`与 ImageMagick 一起使用颜色配置文件。

我保证你对这些命令也会有同样的问题：

```
convert  sourcefile.pdf  output.pdf 

convert  -density 600  sourcefile.pdf  output.pdf 
```

您真正的问题是将 ImageMagick 用于不擅长的任务。因为 ImageMagick 无法处理 PDF。它只能处理光栅图像。这是它擅长的地方，也是它真正擅长的地方。

因为 PDF 不是光栅图像（尽管它们可以包含这些图像），ImageMagick 使用*委托*将 PDF 页面转换为单个整页图像。这个代表是 Ghostscript。

只有在收到委托的结果（光栅图像）后，ImageMagick 才会开始在您的配置文件更改中起作用。完成后，它将图像转换回 PDF——但现在 PDF 丢失了所有以前的矢量对象，并且从每一页中只剩下一个像素化版本。

就像通过绞肉机将肉磨碎后无法将其重新组合成一块一样——一旦光栅化，您将无法取回原始 PDF 对象（矢量图、字体等）它的页面像 ImageMagick 一样......

* * *

**您的问题的解决方案（弄乱 PDF 使用的颜色配置文件）：** ***为工作使用正确的工具。*** **直接学习[使用 Ghostscript](http://ghostscript.com/doc/current/GS9_Color_Management.pdf)！**（因为 Ghostscript 可以将 ICC 颜色配置文件嵌入到 PDF 中，而无需先将页面更改为光栅图像。您不需要 ImageMagick！）

# css - 将项目置于顶部

> ID：12521308
> 
> 赞同：1
> 
> 时间：2012-09-20T21:38:25.520
> 
> 标签：css, positioning

我在我的网站上放置对象时遇到了一些问题......

我想要的只是将[彩色物品放在主容器下](http://www.chirowuustwezel.be/new/index.php?page=home)。所以`navigation_groups`div 应该放在`main_container`.

```
<div class="navigation_groups">
     // Navigation              
</div>
<div class="main_container">
    <div class="main_container_top"></div>
    <div class="main_container_middle"></div>
    <div class="main_container_bottom"></div>
</div> 
```

我试过玩`position`，但由于某种原因，如果我添加一个`absolute`or`relative`属性，de 中的链接`navigation_groups`就会消失......我该如何解决这个问题？

z-index 属性也不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:52:44.420

问题是当你把菜单放在后面时，它变得无响应，因为内容 div 完全覆盖了菜单空间。

你需要重新设计你的元素有点不同..

```
.main_container {
    margin: -90px 0 0 132px;
    position: relative;
}

.main_container_top {
    /*whatever you have but change the positioning of the background image to*/
    background-position: 0 10px;
}

.main_container_middle {
    /*whatever you have but change the positioning of the background image to*/
    background-position: 0 10px;
    /*and the padding to*/
    padding: 30px 0 30px 56px;
}

.main_container_bottom {
    /*whatever you have but change the positioning of the background image to*/
    background-position: -7px 0;
}

.navigation_groups {
    /*change the following to*/
    position: relative;
    z-index:0;
} 
```

我们实际上所做的，除了删除负 z-index 之外，将元素向右推 124px 并通过将它们的填充和背景定位校正相同的量来修复所有受影响的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:43:11.770

使用时`position:absolute`，需要`position:relative`在父项上声明为定位提供零参考点，否则最终使用 BODY 作为参考点。

如果没有看到您的 CSS，就很难解决您的问题。

# android - 首次运行应用程序时显示不同的屏幕

> ID：12521311
> 
> 赞同：-3
> 
> 时间：2012-09-20T21:38:52.690
> 
> 标签：android, multithreading, sharedpreferences

下面的代码做错了什么？

```
SharedPreferences mPreferences;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    setContentView(R.layout.splash);
        new Handler().postDelayed(new Runnable() {

            public void run() {
                init();
                callFunc();
            }

        }, SPLASH_DISPLAY_LENGHT);
        // }
    }

    boolean firstTime() {
        boolean firstTime = mPreferences.getBoolean("firstTime", true);
        if (firstTime) {
            SharedPreferences.Editor editor = mPreferences.edit();
            editor.putBoolean("firstTime", false);
            editor.commit();
            return true;
        } else {
            return false;
        }
    }

    void callFunc(){
        if(firstTime()){
            callDetailedScreen();           
        }
        else{
            CallMainScreen();   
        }
    } 
```

日志猫

```
09-21 03:28:58.948: E/AndroidRuntime(314): FATAL EXCEPTION: main
09-21 03:28:58.948: E/AndroidRuntime(314): java.lang.NullPointerException
09-21 03:28:58.948: E/AndroidRuntime(314):  at com.x.y.Main.firstTime(Main.java:38)
09-21 03:28:58.948: E/AndroidRuntime(314):  at com.x.y.callFunc(Main.java:50)
09-21 03:28:58.948: E/AndroidRuntime(314):  at com.x.y.Main$2.run(Main.java:30)
09-21 03:28:58.948: E/AndroidRuntime(314):  at android.os.Handler.handleCallback(Handler.java:587)
09-21 03:28:58.948: E/AndroidRuntime(314):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-21 03:28:58.948: E/AndroidRuntime(314):  at android.os.Looper.loop(Looper.java:123)
09-21 03:28:58.948: E/AndroidRuntime(314):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-21 03:28:58.948: E/AndroidRuntime(314):  at java.lang.reflect.Method.invokeNative(Native Method)
09-21 03:28:58.948: E/AndroidRuntime(314):  at java.lang.reflect.Method.invoke(Method.java:521)
09-21 03:28:58.948: E/AndroidRuntime(314):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-21 03:28:58.948: E/AndroidRuntime(314):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-21 03:28:58.948: E/AndroidRuntime(314):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:08:49.507

根据您发布的代码和您的 logcat，您没有实例化您的 SharedPreferences。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-23T11:35:32.520

您需要加载您的首选项，应该这样做。把它放在 onCreate 中。

```
mPreferences = android.preference.PreferenceManager
            .getDefaultSharedPreferences(this); 
```

# jquery - Microsoft JScript 运行时错误：对象不支持属性或方法“fileUpload”

> ID：12521312
> 
> 赞同：1
> 
> 时间：2012-09-20T21:38:58.950
> 
> 标签：jquery, ajax, visual-studio-2010

我在将 ajax 和 jquery 函数应用于我的多个文件附件时遇到问题。我的以下代码受影响的部分；

```
$(function () {
        $("[id*=FileUpload1]").fileUpload({
            'uploader': 'scripts/uploader.swf',
            'cancelImg': 'images/cancel.png',
            'buttonText': 'Attach Files',
            'script': 'UploadCS.ashx',
            'folder': 'uploads',
            'multi': true,
            'auto': true,
            'onSelect': function (event, ID, file) {
                $("#attachedfiles tr").each(function () {
                    if ($("td", this).eq(0).html() == file.name) {
                        alert(file.name + " already uploaded.");
                        $("[id*=FileUpload1]").fileUploadCancel(ID);
                        return;
                    }
                });
            },
            'onComplete': function (event, ID, file, response, data) {
                $("#attachedfiles").append("<tr><td>" + file.name + "</td><td><a href = 'javascript:;'>[x]</a></td></tr>");
            }
        });
    }); 
```

每当我在 IE 上通过 VS2010 运行应用程序时，它就会停止运行并声明上面标题中所述的问题。但在 Mozilla 上，它运行但没有出现预期的结果。我已经看到了几个关于此的问题，但似乎没有帮助。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T22:10:24.867

如果脚本标签显式关闭，则浏览器不会识别脚本标签。

编写**自关闭**脚本标签

```
<script type="text/javascript" src="scripts/jquery-1.8.1.min.js" /> 
<script type="text/javascript" src="scripts/jquery.uploadify.js" /> 
```

# java - Switch 语句给出不兼容类型错误

> ID：12521355
> 
> 赞同：9
> 
> 时间：2012-09-20T21:42:22.330
> 
> 标签：java, switch-statement

我正在尝试编译并收到此错误：

```
enigma/Rotor.java:30: incompatible types found : java.lang.String required: int     switch(name){
1 error 
```

为什么我会收到此错误？我如何解决它？它在包装中，我似乎无法弄清楚。这是代码：

```
String label;

Rotor(){;}

Rotor(String name){
  switch(name){
    case "B":
      conversion_chart = B;
      break;
    case "C":
      conversion_chart = C;
      break;
    case "I":
      conversion_chart=I;
      notch = NOTCH[0];
      break;
    case "II":
      conversion_chart=II;
      notch = NOTCH[1];
      break;
    case "III":
      conversion_chart=III;
      notch = NOTCH[2];
      break;
    case "IV":
      conversion_chart=IV;
      notch = NOTCH[3];
      break;
    case "V":
      conversion_chart=V;
      notch = NOTCH[4];
      break;
    case "VI":
      conversion_chart=VI;
      notch = NOTCH[5];
      break;
    case "VII":
      notch = NOTCH[6];
      conversion_chart=VII;
      break;
    case "VIII":
      notch = NOTCH[7];
      conversion_chart=VIII;
      break;
  }
  label = name;
  position = 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T21:43:30.210

```
switch(name) 
```

`switch`仅从 Java7 开始支持带有 String 的语句。

我猜你使用的编译器版本低于 Java7

选项：

1.  您需要升级到 Java7
2.  将 switch 语句更改为`if/else`
3.  在 switch 中使用`int`而不是`String`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-07-25T15:57:08.350

如果您使用的是 maven 项目，那么您只需将以下代码添加到 ypur pom.xml 并解决您的问题：

```
 <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.8</source>
                    <target>1.8</target>
                </configuration>
            </plugin>
        </plugins>
    </build> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T21:45:55.573

**switch**接受**来自 java 7 的 String**。**在 java 7 之前，**只有**int 兼容类型（short、byte、int、char）**可以作为 switch 参数传递

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-01T09:22:02.417

如果您使用的是 maven，请按照以下方式更改 pom 中的构建，否则将 JDK 版本更改为 1.8+

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
        <source>1.8</source>
        <target>1.8</target>
    </configuration>
</plugin> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T21:44:10.417

除非您有 Java7+，否则您不能切换 String 实例，只能切换 int（和 byte/char/short，但不能切换 long/double）。您现在最好的选择是更改为 if else 语句，如下所示：

```
if("B".equals(string)) {
    //handle string being "B"
} else if("C".equals(string)) {
    //handle string being "C"
} else ... 
```

有关切换的更多信息，请参阅 Oracle[教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)。他们提到了 Java7 String 功能：

> 在 Java SE 7 及更高版本中，您可以在 switch 语句的表达式中使用 String 对象。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-20T21:44:56.573

在 Java 中，您只能对 byte、char、short 或 int 进行切换，而不能对 String 进行切换。

# c - 如果输入某些值时出错，则嵌套

> ID：12521357
> 
> 赞同：0
> 
> 时间：2012-09-20T21:42:30.230
> 
> 标签：c

我在输入值 60000.01、70000.01、75000.01 和 88000.01 时遇到嵌套 if 语句的问题，RaisePrcnt 值不会打印到控制台。我看不出嵌套 if 的结构存在缺陷，除了这些特定值之外的任何其他值都可以正常工作。

```
#include<stdio.h>
#include<stdlib.h>

void main()
{
    // Employee and Department name variable declarations.
    char Name1[25], Dept1[25];  

    /* Variable declarations for current yearly income, raise percentage, 
    new raise amount and the new yearly pay amount.*/
    float Income1, NewPay1;
    float RaisePrcnt1 = 9.7, RaisePrcnt2 = 8.5, RaisePrcnt3 = 7.2;
    float RaisePrcnt4 = 6.3, RaisePrcnt5 = 5.9, Percentage = 0;

    /*Initialize and declare variables to calculate the total current
    yearly incomes, total raise amounts and total new pay amounts for
    all 4 employees.*/
    float IncomeTotal = 0;
    float RaiseTotal = 0; 
    float PayTotal = 0;

    // Display program title.
    printf("\t\t\t\tINCOME CALCULATOR\n\n"); 

    // User directive.
    printf("\t\t************************************************\n");
    printf("\t\tPLEASE ENTER THE FOLLOWING EMPLOYEE INFORMATION: "); 
    printf("\n\t\t************************************************\n\n");

    /************************************************************
    BEGIN COLLECTING INFORMATION ON EMPLOYEE NUMBER 1\.          *
    ************************************************************/
    printf("\t\tEmployee Number 1: \n");
    printf("\t\t________________________________________________\n");

    printf("\n\t\tName: \t\t\t"); // Prompt user for Name.
    gets(Name1); // Reads input for Name to the enter key.

    printf("\n\t\tDepartment: \t\t"); // Prompt user for Department Name.
    gets(Dept1); // Reads Department Name input to the enter key.

    // Prompt user for Current Yearly Income input.
    printf("\n\t\tCurrent Yearly Income: \t"); 
    scanf("%f", &Income1); // Reads Current Income input.

    // Prompt user for the Raise Percentage.
    //printf("\n\t\tRaise Percentage: \t");
    //scanf("%f", &RaisePercent1); // Reads Raise Percentage input.

    if(Income1 < 0 && Income1 != 0){
       printf("%0.1f The Income Amount entered is INVALID. \t");
    }else
        if(Income1 >= 0 && Income1 <= 60000){
           printf("%0.1f", RaisePrcnt1);
        }else
           if(Income1 >= 60000.01 && Income1 <= 70000){
              printf("%0.1f", RaisePrcnt2);
           }else
              if(Income1 >= 70000.01 && Income1 <= 75000){
                 printf("%0.1f", RaisePrcnt3);
              }else
                 if(Income1 >= 75000.01 && Income1 <= 88000){
                    printf("%0.1f", RaisePrcnt4);
                 }else
                    if(Income1 >= 88000.01){
                    printf("%0.1f", RaisePrcnt5);
                    }

 //Percentage = (Income1 * RaisePrcnt1);
 //Percentage = (Income1 * RaisePrcnt2);
 //Percentage = (Income1 * RaisePrcnt3);
// Percentage = (Income1 * RaisePrcnt4);
//Percentage = (Income1 * RaisePrcnt5);

    // Calculate and print the new Raise Amount for Employee Number 1.
    //RaiseAmt1 = (Income1 * RaisePercent1) / 100;
 //printf("\n\tBased on the information you have entered for Employee Number: 1\n"); 
//  printf("\t________________________________________________________________\n");
    //printf("\n\tThe New Raise Amount is: \t$ %0.2f", RaiseAmt1); 

    // Calculate and print the New Income Amount for Employee Number 1.
    //NewPay1 = Income1 + RaiseAmt1;
    //printf("\n\tThe New Pay Amount is: \t\t$%0.2f", NewPay1); 
    //printf("\n\n");

    // Calculate and incorporate Employee 1 figures into final totals.
    //IncomeTotal = IncomeTotal + Income1;
    //RaiseTotal = RaiseTotal + RaiseAmt1;
    //PayTotal = PayTotal + NewPay1;
    /*END EMPLOYEE 1.*******************************************/

    //fflush(stdin);

    // Title for totals.
    //printf("\n\n\t\t************************************************\n");
    //printf("\t\t\tINCOME TOTALS FOR ALL EMPLOYEES"); 
    //printf("\n\t\t************************************************\n\n");

    /*Calculate and print all totals for the 4 employees.*/
    //printf("\tCurrent Yearly Incomes \tTotal: $%10.2f", IncomeTotal);
    //printf("\n\tRaise Amounts \t\tTotal: $%10.2f", RaiseTotal);
    //printf("\n\tNew Yearly Incomes \tTotal: $%10.2f", PayTotal);
    //printf("\n\n");

    system("PAUSE");
    //return (0);

} // End main. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T21:44:02.130

这是一个[浮点精度错误](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)（[这里](https://msmvps.com/blogs/jon_skeet/archive/2009/11/02/omg-ponies-aka-humanity-epic-fail.aspx)也很好地介绍了）。仅仅因为您输入`Income1`为 60000.01 并不意味着`Income1 >= 60000.01`会是真的。

事实上，由于您目前已经构建了 if 语句，因此无需进行比较 - 一旦达到该点，您就已经知道它`Income1`不少于 60000，这要归功于`else`. 做就是了：

```
if(Income1 < 0){
   printf("%0.1f The Income Amount entered is INVALID. \t");
} else if (Income1 <= 60000){
       printf("%0.1f", RaisePrcnt1);
}else if (Income1 <= 70000){
          printf("%0.1f", RaisePrcnt2);
}else 
```

等等。（另请注意，您的深度缩进是不必要的，因为它们实际上并不是嵌套的 if）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:47:41.613

浮点数的精度有限，60000.01 不完全是那个值，所以你的比较失败了。

请记住，当`if`失败时，您已经知道该数字不在该范围内，因此您可以简单地写：

```
if (Income1 < 0) {
  printf("%0.1f The Income Amount entered is INVALID. \t");
} else if (Income1 <= 60000) {
   printf("%0.1f", RaisePrcnt1);
} else if (Income1 <= 70000) {
  ...
} 
```

# excel - 比较两列中的数据，然后复制单元格范围

> ID：12521361
> 
> 赞同：0
> 
> 时间：2012-09-20T21:42:35.900
> 
> 标签：excel

我在excel中有两个电子表格。

在电子表格 1 中，我在 A1 到 A200 的单元格中有文本。在电子表格 2 中，我在 A1 到 A200 的单元格中有文本。

我想将电子表格 1 列 A 中的所有单元格与电子表格 2 列 A 中的所有单元格进行比较。如果数据之间存在匹配，我希望单元格输出匹配所在的行和/或复制一系列单元格在电子表格 2 B2:F2 到电子表格 1。

我遇到了一些公式，包括 match()、index()，但似乎找不到完成此操作的完整方法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:47:31.810

如果要从与电子表格 1 中具有相同索引值的行中获取数据值，可以使用 VLOOKUP 函数来完成。

```
VLOOKUP(A1,'C:\PathToWorkBook\[Workbookname.xlsx]SheetName!$A$1:$F$200,2,FALSE) 
```

这将返回 Workbookname.xlsx 中 SheetName 的 B 列中的值，其中该表的 A 列中的值与当前工作表的单元格 A1 具有相同的值。如果在 Workbookname.xlsx 中没有找到对应的值，此函数将返回“#N/A”。还应注意，如果您在 A 列中的键值不是唯一的，则此函数将仅返回 FIRST 匹配的结果，而不会告诉您存在多个查找键。

通过修改第三个参数，您可以更改从目标电子表格中读取值的列（B 到 F）。

如果您愿意，也可以在 VBA 代码中使用 VLOOKUP

```
WorksheetFunction.VLookup 
```

执行相同的功能。然后，您可以将查找结果直接写入单元格值。

# objective-c - 如何在 UITableView 中重新排序单元格

> ID：12521364
> 
> 赞同：0
> 
> 时间：2012-09-20T21:42:50.393
> 
> 标签：objective-c, uitableview

我尝试了大约一个小时来重新编码 UITableView 中的单元格。

我创建细胞

```
-(UITableViewCell *)tableView:(UITableView *)tV cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tV dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

// Set up the cell...

cell.textLabel.text = [array objectAtIndex:indexPath.row];
cell.showsReorderControl = YES;
return cell;
} 
```

我有这个：

```
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath {
return YES;
} 
```

和按钮方法

```
- (IBAction)delete:(id)sender {
if (self.btnLeft.tag == 0) {
    self.btnLeft.title = @"Zakończ";
    [self.tableView setEditing:YES animated:YES];
    self.btnLeft.tag = 1;
}
else if (self.btnLeft.tag == 1) {
    self.btnLeft.title = @"Edytuj";
    [self.tableView setEditing:NO animated:YES];
    self.btnLeft.tag = 0;
}
} 
```

但是当我单击编辑按钮时`setEditing to YES`，我只能删除行，不能重新排序。当我有错误？我的意思是，右侧单元格的一侧没有重新排序图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:09:39.010

好的，我解决了。

*要显示重新排序控件，您不仅必须设置此属性，还必须实现 UITableViewDataSource 方法 tableView:moveRowAtIndexPath:toIndexPath:。此外，如果数据源实现 tableView:canMoveRowAtIndexPath: 返回 NO，则重新排序控件不会出现在该指定行中。*

# c# - 在 C# 中获得两次之间的时间跨度？

> ID：12521366
> 
> 赞同：61
> 
> 时间：2012-09-20T21:42:58.337
> 
> 标签：c#, datetime, timespan

我有两个文本框。一个用于打卡，一个用于打卡。时间将采用以下格式：

```
Hours:Minutes 
```

假设我在上午 7:00 打卡并在下午 2:00 打卡。

使用我当前的代码，我得到了 2 小时的差异，但应该是 7 小时。我将如何在 C# 中做到这一点。我打算通过让用户选择上午或下午来转换为 24 小时制，但我感到困惑。

那么，基本上，我将如何计算两次之间的小时差？

我试过这个，但是当我输入数字时得到了 2 个小时而不是 7 个小时。

```
DateTime startTime = Convert.ToDateTime(textBox1.Text);
DateTime endtime = Convert.ToDateTime(textBox2.Text);

TimeSpan duration = startTime - endtime; 
```

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-09-20T21:47:26.803

```
string startTime = "7:00 AM";
string endTime = "2:00 PM";

TimeSpan duration = DateTime.Parse(endTime).Subtract(DateTime.Parse(startTime));

Console.WriteLine(duration);
Console.ReadKey(); 
```

将输出：07:00:00。

如果用户输入军事时间，它也可以工作：

```
string startTime = "7:00";
string endTime = "14:00";

TimeSpan duration = DateTime.Parse(endTime).Subtract(DateTime.Parse(startTime));

Console.WriteLine(duration);
Console.ReadKey(); 
```

输出：07:00:00。

*要更改格式：* `duration.ToString(@"hh\:mm")`

*更多信息请访问：http:* [//msdn.microsoft.com/en-us/library/ee372287.aspx](http://msdn.microsoft.com/en-us/library/ee372287.aspx)

**附录：**

多年来，这是我曾经给出的最受欢迎的答案，这让我有些困扰；最初的答案从未真正解释为什么 OP 的代码不起作用，尽管它*完全*有效。它获得如此多选票的唯一原因是，当人们搜索“C#”、“时间跨度”和“介于”这些术语的组合时，该帖子会出现在 Google 上。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-20T21:46:37.650

您可以使用[TimeSpan](http://msdn.microsoft.com/en-us/library/zz841zbz.aspx)构造函数，它需要很长时间的 Ticks：

```
 TimeSpan duration = new TimeSpan(endtime.Ticks - startTime.Ticks); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T21:46:13.077

两点：

1.  检查您的输入。我无法想象通过减去您正在谈论的时间值来获得 2 小时的情况。如果我这样做：

    ```
     DateTime startTime = Convert.ToDateTime("7:00 AM");
        DateTime endtime = Convert.ToDateTime("2:00 PM");
        TimeSpan duration = startTime - endtime; 
    ```

    ...我得到`-07:00:00`了结果。即使我忘记提供 AM/PM 值：

    ```
     DateTime startTime = Convert.ToDateTime("7:00");
        DateTime endtime = Convert.ToDateTime("2:00");
        TimeSpan duration = startTime - endtime; 
    ```

    ......我明白了`05:00:00`。因此，要么您的输入不包含您列出的值，要么您处于以意外方式开始解析它们的机器环境中。或者你实际上并没有得到你报告的结果。

2.  要找到开始时间和结束时间之间的差异，您需要这样做`endTime - startTime`，而不是相反。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-09T19:23:20.990

如果我在某个时候通过排序的时间列表（如时间表列表）旋转，我需要获得最后一次和第一次之间的间隔，到目前为止我得出了这个解决方案：

```
 TimeSpan t1 = TimeSpan.Parse("23:00");
  TimeSpan t2 = TimeSpan.Parse("3:10");
  double _24h = (new TimeSpan(24, 0, 0)).TotalMilliseconds;
  double diff = t2.TotalMilliseconds - t1.TotalMilliseconds;
  if (diff < 0) diff += _24h;
  Console.WriteLine(TimeSpan.FromMilliseconds(diff)); // output: 04:10:00 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-25T17:08:46.797

另一种方式（更长）在 VB.net [说 2300 开始和 0700 第二天完成]

如果 tsStart > tsFinish 那么

```
 ' Take Hours difference and adjust accordingly
                            tsDifference = New TimeSpan((24 - tsStart.Hours) + tsFinish.Hours, 0, 0)

                            ' Add Minutes to Difference
                            tsDifference = tsDifference.Add(New TimeSpan(0, Math.Abs(tsStart.Minutes - tsFinish.Minutes), 0))

                            ' Add Seonds to Difference
                            tsDifference = tsDifference.Add(New TimeSpan(0, 0, Math.Abs(tsStart.Seconds - tsFinish.Seconds))) 
```

# php - Facebook 共享者网址中的“&”字符

> ID：12521370
> 
> 赞同：1
> 
> 时间：2012-09-20T21:43:28.570
> 
> 标签：php, facebook, twitter, replace, facebook-sharer

我的网站有类似的网址

```
$shareurl = http://www.mysite.com/?view=main&title=here-is-some-title 
```

所以如果我把这个网址放在 facebook 和 twitter 共享者链接中，如下所示

**脸书分享者网址：**

```
<a target="_blank" href="https://www.facebook.com/dialog/feed?app_id=MY_APP_ID&link=<?php echo $shareurl;?>&picture=Picture.jpg&name=this is name&caption=this is caption&description=this is despcription.&redirect_uri=<?php echo APP_BASE_URL; ?>""> Share on Facebook </a> 
```

`&`字符为`$sharerurl`拆分 facebook 共享者 url。Twitter的情况也是如此。
我怎样才能以最简单的方式避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:46:38.680

您可以使用 urlencode() 对 URL 进行编码，然后在应用程序中使用 urldecode() 以返回正确的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:54:25.273

如果您使用此代码，您应该没问题：

```
<a target="_blank" href="https://www.facebook.com/dialog/feed?app_id=MY_APP_ID&link=<?php echo urlencode($shareurl);?>&picture=Picture.jpg&name=this is name&caption=this is caption&description=this is despcription.&redirect_uri=<?php echo APP_BASE_URL; ?>""> Share on Facebook </a> 
```

它将`&`URL 中的 s 转换为`%26`，Facebook 和 Twitter 可以很好地阅读它，而不会认为 URL 的某些部分实际上是其 URL 的一部分。

# jquery - How do I select all list items in an unordered list that contain a checkbox that's checked?

> ID：12521374
> 
> 赞同：2
> 
> 时间：2012-09-20T21:43:43.687
> 
> 标签：jquery

I have `'ul > li'` to get all of the list items, but I need to only grab the items that contain a checkbox that's checked.

So you can see this visually, it looks like this:

```
<ul>
    <li>
        <input type="checkbox" checked="checked">
    </li>
    <li>
        <input type="checkbox">
    </li>
    <li>
        <input type="checkbox" checked="checked">
    </li>
</ul> 
```

I want to pull the 1st and 3rd item.

Thanks in advance.

So, I have

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T21:47:07.883

You can use `:has` selector.

```
$('ul li:has(input[type=checkbox]:checked)') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T21:47:48.710

why not go backwards and start with checked inputs

```
$('input[type=checkbox]:checked').parent() 
```

[http://jsfiddle.net/N7VFc/](http://jsfiddle.net/N7VFc/)

and if you need context in case there are other checkboxes in the page you can specify it in the selector

```
$('input[type=checkbox]:checked','ul li').parent() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T21:51:12.107

here is a solution to your question: [http://jsfiddle.net/H4qba/1/](http://jsfiddle.net/H4qba/1/)

HTML code:

```
<ul>
  <li><input type="checkbox" checked="checked" />a</li>
  <li><input type="checkbox"/>b</li>
  <li><input type="checkbox"/>c</li>
  <li><input type="checkbox"/>d</li>
  <li><input type="checkbox" checked="checked" />e</li>
  <li><input type="checkbox" checked="checked" />f</li>
</ul> 
```

jQuery code:

```
$('ul > li').has('input[checked="checked"]').css({border:'1px solid #c00'}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T21:50:04.743

You can use this:

```
$("ul > li input:checked").closest('li'); 
```

### [DEMO](http://jsfiddle.net/FranWahl/ktCT2/)

# php - 查找字符串的正则表达式

> ID：12521379
> 
> 赞同：1
> 
> 时间：2012-09-20T21:44:10.630
> 
> 标签：php, preg-match

谁能帮我找到下面的正则表达式

```
$string = "id=A12dk9-mds&name=4950"; 
```

我需要找到正则表达式来找到一个动态值（`A12dk9-mds`在这个例子中）。

即和之间的动态`=`内容`&`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:55:42.573

正如@MarkBaker 所说，最好的方法不是正则表达式，而是[`parse_str()`](http://php.net/manual/en/function.parse-str.php)因为您实际上是在处理 url 的查询字符串。

因此，以下应该可以正常工作：

```
parse_str($string,$arr);
echo $arr['id']; // A12dk9-mds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:48:13.760

为此可以使用一个简单的正则表达式。

```
/id=([^&]*)&/ 
```

**解释：**

*   `id=`匹配 id=
*   `([^&]*)`尽可能匹配除 & 符号之外的任何内容并返回
*   `&`匹配 &

只要您知道它们将始终介于 a`=`和 a之间，`&`这将起作用。

PHP代码：

```
$string = "id=A12dk9-mds&name=4950";
preg_match('/id=([^&]*)&/',$string, $answer);
print_r($answer[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T21:52:18.750

RegEx 在这里是错误的工具。这看起来像一个查询字符串，所以让我们使用 PHP 的查询字符串解析器，[`parse_str`](http://php.net/manual/en/function.parse-str.php).

```
$string = "id=A12dk9-mds&name=4950";
parse_str($string, $parsed);
echo $parsed['id']; 
```

# css - JQuery 自动完成主题框未正确放置

> ID：12521384
> 
> 赞同：0
> 
> 时间：2012-09-20T21:44:26.110
> 
> 标签：css, jquery-ui, jsp, jquery-autocomplete

所以我正在试验 JQuery 的主题，但我在放置它时遇到了一些问题。在不添加从网站下载的 jquery 自定义主题的情况下，自动完成框会在文本框下方加载（见图 1），当我加载样式表（以摆脱项目符号列表）时，它会加载左上角的文本框窗户。代码如下：我添加的样式表：`<link href="style/jquery-ui-1.8.23.custom.css" rel="stylesheet" type="text/css" />`

我将样式表添加到的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.js"></script>

<script>
$(document).ready(function(){
    var drugs = ["Acepromazine (PromAce, Aceproject)", "Acetaminophen (Tylenol)",
        "Acetazolamide (Diamox, Dazamide)", "Acetylcysteine (Mucomyst)", 
        "Acetylsalicylic Acid (Aspirin)", 
        "Activated Charcoal (Toxiban, Liqui-Char, UAA Gel)", "Acyclovir (Zovirax)",
        "Albuterol (Proventil, Volmax, Ventolin)", "Allopurinol (Zyloprim)",
        "Alprazolam (Xanax)", "Amikacin (Amiglyde-V)", "Aminopentamide (Centrine)",
"Aminophylline",
"Amitraz (Mitaban, Preventic)",
"Amitriptyline HCl (Elavil)",
"Amlodipine Besylate (Norvasc)",
"Amoxicillin",
"Amoxicillin and Clavulanate (Clavamox)",
"Amphetamines",
"Amphotericin B",
"Ampicillin (Polyflex)",
"Antibiotic with Steroid Eye Medication",
"Apomorphine",
"Bismuth Subsalicylate (Pepto-Bismol)",
"Brinzolamide (Azopt)",
"Bromides",
"Buprenorphine (Buprenex)",
"Burow's Solution",
"Buspirone HCl (BuSpar)",
"Butorphanol Tartrate (Torbugesic, Torbutrol)",
"Calcitonin",
"Calcitriol (Vitamin D)",
"Calcium Gluconate",
"CAPSTAR (Nitenpyram)",
"Captopril (Capoten)",
"Carbamazepine (Tegretol)",
"Carboplatin (Paraplatin)",
"Carnitine (Carnitor)",
"Carprofen (Rimadyl)",
"Cefadroxil (Cefa-Tabs and Cefa-Drops)",
"Cefazolin (Kefzol, Ancef)",
"Cefixime (Suprax)",
"Cefotaxime (Claforan)",
"Cefotixin (Mefoxin)",
"Cefpodoxime Proxetil (Simplicef)",
"Ceftriaxone (Rocephin)",
"Cephalexin (Keflex)",
"Cephalothin",
"Chlorambucil (Leukeran)",
"Chloramphenicol (Chloromycetin)",
"Chlorhexidine",
"Chlorpheniramine Maleate (Chlor-Trimeton)",
"Chlorpromazine (Thorazine)",
"Cimetidine HCl (Tagamet)",
"Ciprofloxacin (Cipro, Ciloxan)",
"Cisplatin (Platinol-AQ)",
"Colchicine",
"Cyclophosphamide (Cytoxan, Neosar)",
"Cyclosporine (Atopica, Optimmune)",
"Cyclosporine Ophthalmic (Optimmune)",
"Cytarabine",
"Deracoxib (Deramaxx)",
"Derm Caps",
"Desmopressin (DDAVP)",
"Desoxycorticosterone (Percorten-V)",
"Dexamethasone"];
$("#drug_name_1").autocomplete({source:drugs});
});
</script>

<script type="text/javascript">

function addTreatment(){
}

function removeTreatment(){
}
</script>
</head>

<body>
<form id="form1" name="form1" method="post" action="">
  <input type="button" name="increase" id="increase" value="Increase Drug Treatments" onclick="addTreatment()"/>
  <input type="button" name="decrease" id="decrease" value="Decrease Drug Treatments" onclick="removeTreatment()"/>
</form>
<form id="add_drugs" name="add_drugs" method="post" action="">
    <table width="100%" border="1" name="drug_treatment_table" id="drug_treatment_table">
          <tr>
            <th width="3%" scope="col">#</th>
            <th width="14%" scope="col">Drug</th>
            <th width="32%" scope="col">Special Directions </th>
            <th width="18%" scope="col">Quantity</th>
            <th width="12%" scope="col">How Often</th>
            <th width="8%" scope="col">Starting</th>
            <th width="13%" scope="col">Finishing</th>
          </tr>
          <tr>
            <td>1</td>
            <td>
            <input type="text" name="drug_name_1" id="drug_name_1" /></td>
            </tr>
         </table>
    </form>
    </body>
    </html> 
```

图片如下： ![项目符号列表位置正确但丑陋](../Images/2773f8cd4a50cd4d9e4aa9f9d775845c.png) ![列表更好看，但位置错误](../Images/80b1bebee894c967e747ff312c334fca.png)

任何人都知道如何让自动完成文本框出现在正确的位置？

谢谢！乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:03:10.323

我一直在使用它，从来没有遇到过任何问题。虽然我使用的是不同的版本（我怀疑你的 jquery ui 版本和 jquery ui 主题不兼容你的 js 似乎旧）：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script> 
```

您还需要 jquery ui 主题，虽然我没有检查它是否有效，但您似乎拥有它。我一般使用[ui-lightness](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/ui-lightness/jquery-ui.css)主题，一切正常。

# authentication - 如何在不要求用户复制/粘贴验证码的情况下验证 Google Drive？

> ID：12521385
> 
> 赞同：11
> 
> 时间：2012-09-20T21:44:25.740
> 
> 标签：authentication, oauth, oauth-2.0, google-drive-api

我正在使用 DriveCommandLine 应用程序来学习 Drive API。我只是想知道是否可以使用 Google Drive 对我的桌面应用程序进行身份验证，而无需用户从浏览器复制/粘贴身份验证代码？而是只是将令牌从浏览器传回应用程序？我可以使用 Dropbox API 和 Google Documents List API 来做到这一点，但无法弄清楚如何使用 Google Drive API 来实现这一点。

谢谢。

Google Drive API - DriveCommandLine 示例应用（稍作修改）：

```
public class DriveCommandLine {

  private static String CLIENT_ID = APPCONSTANTS.Google.CONSUMER_KEY;
  private static String CLIENT_SECRET = APPCONSTANTS.Google.CONSUMER_SECRET;

  private static String REDIRECT_URI = "urn:ietf:wg:oauth:2.0:oob";

  public static void main(String[] args) throws IOException, URISyntaxException {
    HttpTransport httpTransport = new NetHttpTransport();
    JsonFactory jsonFactory = new JacksonFactory();

    GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(
        httpTransport, jsonFactory, CLIENT_ID, CLIENT_SECRET, Arrays.asList(DriveScopes.DRIVE))
        .setAccessType("offline")
        .setApprovalPrompt("force").build();

    String url = flow.newAuthorizationUrl().setRedirectUri(REDIRECT_URI).build();
    System.out.println("Enter authorization code:");
    Desktop.getDesktop().browse(new URI(url));
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    String code = br.readLine();

    GoogleTokenResponse response = flow.newTokenRequest(code).setRedirectUri(REDIRECT_URI).execute();
    GoogleCredential credential = new GoogleCredential().setFromTokenResponse(response);

    //Create a new authorized API client
    Drive service = new Drive.Builder(httpTransport, jsonFactory, credential).build();
} 
```

谷歌文档列表 API：

```
 public void authenticate(){
            GoogleOAuthParameters oauthParameters = new GoogleOAuthParameters();
            oauthParameters.setOAuthConsumerKey(APPCONSTANTS.Google.CONSUMER_KEY);

            OAuthSigner signer;
            if (APPCONSTANTS.Google.USE_RSA_SIGNING) {
                    signer = new OAuthRsaSha1Signer(APPCONSTANTS.Google.CONSUMER_SECRET);
            } else {
                oauthParameters.setOAuthConsumerSecret(APPCONSTANTS.Google.CONSUMER_SECRET);
                signer = new OAuthHmacSha1Signer();
            }

            GoogleOAuthHelper oauthHelper = new GoogleOAuthHelper(signer);

            oauthParameters.setScope(APPCONSTANTS.Google.SCOPES);

            oauthHelper.getUnauthorizedRequestToken(oauthParameters);

            String requestUrl = oauthHelper.createUserAuthorizationUrl(oauthParameters);

            Desktop desktop = Desktop.getDesktop();
            URI url = new URI(requestUrl);
            desktop.browse(url);

            String token = oauthHelper.getAccessToken(oauthParameters);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T00:57:05.190

命令行示例是为了简单而编写的，不一定是最好的用户体验。在这种情况下，它们作为本地应用程序运行，并使用 OAuth 2.0 的已安装应用程序流。该流程确实有一种模式，redirect_uri 可以指向 localhost，但它需要启动一个临时 Web 服务器来接收重定向。它没有使示例复杂化，而是使用需要复制/粘贴代码的 OOB 模式。

如果您正在构建桌面应用程序，我鼓励您采用重定向到 localhost 的路线，因为它是更好的 UX。

有关详细信息，请参阅[https://developers.google.com/accounts/docs/OAuth2InstalledApp](https://developers.google.com/accounts/docs/OAuth2InstalledApp)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-09T09:03:27.270

第 1 步：使用离线访问类型生成 URL

```
flow = new GoogleAuthorizationCodeFlow.Builder(
httpTransport, jsonFactory, CLIENT_ID, CLIENT_SECRET, Arrays.asList(DriveScopes.DRIVE))
.setAccessType("offline")
.setApprovalPrompt("auto").build();
String url = flow.newAuthorizationUrl().setRedirectUri(REDIRECT_URI).build(); 
```

第 2 步：存储凭证 accessToken 和 refreshToken

```
GoogleTokenResponse response = flow.newTokenRequest(code).setRedirectUri(REDIRECT_URI).execute();
            GoogleCredential credential = new GoogleCredential.Builder().setTransport(httpTransport)
                .setJsonFactory(jsonFactory)
                .setClientSecrets(CLIENT_ID, CLIENT_SECRET)
                .build()
                .setFromTokenResponse(response);
String accessToken = credential.getAccessToken();
String refreshToken = credential.getRefreshToken(); 
```

第 3 步：在需要时重用令牌

```
GoogleCredential credential1 = new GoogleCredential.Builder().setJsonFactory(jsonFactory)
.setTransport(httpTransport).setClientSecrets(CLIENT_ID, CLIENT_SECRET).build();
credential1.setAccessToken(accessToken);
credential1.setRefreshToken(refreshToken);
Drive service = new Drive.Builder(httpTransport, jsonFactory, credential1).build(); 
```

第 4 步：了解 OAuth 以处理错误和刷新令牌

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T12:04:56.433

将您的 redirect_uri 更改为您的本地主机页面或项目页面。提供的链接处的请求将发送您的代码。请求将在其 url 中包含 code="yourauthcode"。示例： [https](https://yourwebsite.com/yourpage.htm?code=) ://yourwebsite.com/yourpage.htm?code= "yourauthcode"

# android - 这行android代码是什么意思？

> ID：12521387
> 
> 赞同：0
> 
> 时间：2012-09-20T21:44:27.823
> 
> 标签：android, fragment

```
mDualPane = detailsFrame != null && detailsFrame.getVisibility() == View.VISIBLE; 
```

这条线是什么意思？为什么有那么多=？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:47:15.760

如果这样写会更容易理解：

```
mDualPane = ((detailsFrame != null) && 
             (detailsFrame.getVisibility() == View.VISIBLE)); 
```

它将它分解为从上述两个条件的( )`boolean`返回的单个值：`AND``&&`

```
detailsFrame != null 
```

和

```
detailsFrame.getVisibility() == View.VISIBLE 
```

`detailsFrame != null`为了避免 NPE，我们首先检查它——然后我们通过调用来检查它是否可见：`detailsFrame.getVisibility()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T21:45:58.507

这意味着

如果 detailsFrame**不**为空 且**detailsFrame.getVisibility** ()**是**View.VISIBLE

然后 mDualPane 等于`true`否则 mDualPane 将等于`false`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T21:46:21.083

```
mDualPane = detailsFrame != null && detailsFrame.getVisibility() == View.VISIBLE; 
```

`mDualPane`将是`true`什么时候`detailsFrame`可见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T21:46:34.297

mDualPane 似乎是一个布尔值。

该行表示如果 detailsFrame 不为 null 并且 details frame 为 Visible，则 mDualPane 将为 true

# java - 在 Swing 和 JavaFX 之间拖放

> ID：12521388
> 
> 赞同：1
> 
> 时间：2012-09-20T21:44:44.843
> 
> 标签：java, swing, drag-and-drop, javafx-2

我想从 swing 组件拖放到 JavaFX 2 组件，这可能吗？

我的应用程序是摆动并使用 JFXPanel 来显示 LineChart，我想将数据从 Jtable 拖放到图表中。

我尝试在 JFXPanel 上设置传输处理程序，但这似乎不起作用。

澄清：

```
setTransferHandler(new TransferHandler()); 
```

我只是在主 JFrame 上执行此操作以安装一个自定义传输处理程序，在框架中有一个表格和一个带有 LineChart 的 JFXPanel，我可以将对象拖放到表上但不能拖放到图表上。

不确定我是否需要在 JavaFX 端实现某些东西，以便 JFXPanel 中的图表也接受下降。

基本上我只想放在窗口的任何地方，结果在我的情况下是一样的，下垂的对象将被添加到底层模型中。

# asp.net - 如何在 ASP.NET 上使用 BLToolkit 连接 SqliteDB？

> ID：12521390
> 
> 赞同：1
> 
> 时间：2012-09-20T21:45:07.420
> 
> 标签：asp.net, sqlite, database-connection, bltoolkit

嗨，我在连接到我的 sqlitedb 时遇到错误。

我使用 Firefox Sqlite 插件创建我的 sqlitedb。

MyConn：（网络配置）

```
 <connectionStrings>
             <add name="TARKMANCAS_CONNECTION" connectionString="Data  Source=C:/TARKMANCAS_DB.sqlite;"/>
    </connectionStrings> 
```

我的课：

```
public TarkBaseDb()
        : base("TARKMANCAS_CONNECTION")
    {
    }

    // start
    //
    public Table<TarkBaseSchema.KadroGrubuCls> KadroGrubu { get { return GetTable<TarkBaseSchema.KadroGrubuCls>(); } } 
```

TarkBaseSchema：

```
 [TableName("EGITIM_KADROSU_GRUBU_TAB")]
    public class KadroGrubuCls
    {
        private TarkBaseDb db = new TarkBaseDb();

        #region Contructors

        public KadroGrubuCls()
        {
            using (db)
            {
                var qry = from x in db.KadroGrubu
                          select x;
                foreach (var rec_ in qry)
                {
                    KadroGrubuId = rec_.KadroGrubuId;
                    KadroGrubu = rec_.KadroGrubu;
                }
            }
        }
        #endregion

        #region Data Items
        [MapField("KADRO_GRUBU_ID")]
        [PrimaryKey, NotNull]
        public int KadroGrubuId { get; set; }
        [MapField("KADRO_GRUBU")]
        public string KadroGrubu { get; set; }

        #endregion

        #region Relations
        #endregion

        #region Public Methods

        public KadroGrubuCls Get()
        {
            return (new KadroGrubuCls());
        }

        #endregion

    } 
```

并尝试拨打电话：

```
TarkBaseSchema.KadroGrubuCls _tarkKadro = _tarkKadro.Get(); 
```

我得到错误：

```
 A network-related or instance-specific error occurred while establishing a connection to 
SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. 
(provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:35:55.487

错误消息显示它正在尝试连接到 SQL Server，而不是 SQLite。

更改连接字符串以选择正确的驱动程序。
（并且“数据”和“源”之间有两个空格。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-28T15:58:53.203

我认为这对我来说是一个答案；）

# linq2db

最佳解决方案 -**使用[linq2db](https://github.com/linq2db/linq2db)**

* * *

# BL工具包

如果您不想使用**linq2db ，请按照以下步骤使用****bltokit**连接到 sqlite db 。

## 安装库

安装 nuget 包（或手动下载）

```
PM> Install-Package BLToolkit.SQLite
PM> Install-Package System.Data.SQLite.Core 
```

## 修改 web.config/app.config

```
<configuration>
  <!-- 1 : Add providers to BLToolkit -->
  <bltoolkit>
    <dataProviders>
      <add type="BLToolkit.Data.DataProvider.SQLiteDataProvider, BLToolkit.Data.DataProvider.SQLite.4" />
    </dataProviders>
  </bltoolkit>

  <!-- 2 : Add connection string with the appropriate provider field -->
  <appSettings>
    <add key="ConnectionString.SQLite.localdb" value="Data Source=C:/TARKMANCAS_DB.sqlite;Version=3;Pooling=True;Max Pool Size=10;" />
  </appSettings>
</configuration> 
```

您可以在此处找到有关连接字符串的更多信息：http: [//www.connectionstrings.com/sqlite/](http://www.connectionstrings.com/sqlite/)

## 创建 DbManager 的实例

你已经使用`MyClass`了，所以它应该看起来像：

```
public class TarkBaseDb: DbManager
{
  public TarkBaseDb()
          : base("SQLite", "TARKMANCAS")
  {
      // definition of your tables
  }
} 
```

# c# - 启动并等待多个线程 - Resharper 抱怨修改了关闭

> ID：12521392
> 
> 赞同：2
> 
> 时间：2012-09-20T21:45:20.547
> 
> 标签：c#, .net, multithreading, resharper

我正在尝试按照此处的建议实现多线程：[Spawn Multiple Threads for work then wait until all finished](https://stackoverflow.com/questions/2528907/c-sharp-spawn-multiple-threads-for-work-then-wait-until-all-finished)

代码如下所示：

```
var resetEvent = new ManualResetEvent(false);
            var clientsCount = IDLocal.UserSessions.Count;

            // Load sessions:
            IDLocal.UserSessions = new IDSessions();

            // Start thread for each client 
            foreach (IDSession session in IDLocal.UserSessions)
            {
                var clnt = session;
                new Thread(
                    delegate()
                    {
                        Debug.WriteLine(Thread.CurrentThread.ManagedThreadId);
                        clnt.FailedToRespond = !this.SendDirect(data, this.GetHostAddress(clnt.HostName), clnt.PortNumber);

                        // If we're the last thread, signal 
                        if (Interlocked.Decrement(ref clientsCount) == 0) resetEvent.Set();
                    })
                    .Start();
            } 
```

在这里，我收到 ReSharper 警告：`if (Interlocked.Decrement(ref clientsCount) == 0)`

它表明我正在访问修改后的闭包（clientsCount）

这是一个有效的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:02:19.463

该警告旨在涵盖代码，例如

```
int i = 1;
Func<int> f = () => i + 1;
i = 2;
int j = f(); // What does this set j to? 
```

`i`调用时将使用的更新值在哪里`f`。警告建议将其更改为

```
int i = 1;
int icopy = i;
Func<int> f = () => icopy + 1;
i = 2;
int j = f(); // Now what does this set j to? 
```

**如果**您想`f`查看`i`创建委托时的值。在`foreach`循环的上下文中，很容易出现不直观的行为。`foreach`正因为如此，C# 5中循环的含义发生了变化。

由于这不是您想要的，因为您确实想查看对捕获变量的更改，所以不要更改代码中的任何内容。

# svn - 删除对 svn 安全的 ^M 字符

> ID：12521394
> 
> 赞同：0
> 
> 时间：2012-09-20T21:45:22.793
> 
> 标签：svn

我有一个文件，在 svn 的每一行末尾都有一堆 ^M 字符。

当我在文件上运行 dos2unix 时，它会删除 ^M 字符，但 svn 仍然认为文件的每一行都不同。

有没有办法修复文件而不会导致 svn 在每一行都看到它不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T00:31:38.653

某人的编辑正在找到一个 ^M 然后假设整个文件应该是这种方式并转换它们。我刚刚运行了 dos2unix 并使用此命令查看了真正的差异。

```
dos2unix filename.php
svn diff --diff-cmd diff -x -uw filename.php 
```

# android - android片段getArguments（）返回null

> ID：12521396
> 
> 赞同：4
> 
> 时间：2012-09-20T21:45:36.630
> 
> 标签：android, nullpointerexception, android-fragments

getArguments() 返回空值！

活动代码：

```
if (savedInstanceState == null) {
            // During initial setup, plug in the details fragment.
            FlightListFragment listFragment = 
                     FlightListFragment.newInstance(mSearchParams);
            getSupportFragmentManager().beginTransaction().add(
                    android.R.id.content, listFragment).commit();
 } 
```

在片段中：

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle 
                    savedInstanceState) {
        mSearchParams = 
               getArguments().getParcelable(SearchResultsActivity.EXTRA_SEARCH_PARAMS);
        return super.onCreateView(inflater, container, savedInstanceState);
    } 
```

和：

```
public static FlightListFragment newInstance(SearchParams sp) {
    FlightListFragment f = new FlightListFragment();
    Bundle b = new Bundle();
    b.putParcelable(SearchResultsActivity.EXTRA_SEARCH_PARAMS, sp);
    f.setArguments(b);
    return f;
} 
```

但我总是在这里得到 NullPointerException：getArguments()。
请解释一下我做错了什么。
谢谢！

已编辑：
我发现在 onCreateView 之后调用了 newInstance() 方法，因此我将代码从它移到了 onCreate，但问题并没有避免。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T21:54:38.407

这意味着实例化片段时没有提供任何参数......

您可以通过执行以下操作来检查是否提供了参数...

```
Bundle arguments = getArguments();
if (arguments != null)
{
    // then you have arguments
} else {
    // no arguments supplied...
} 
```

好的 - 我看错了你的问题......

在您执行 putParcelable 时 sp 是否为空？

# mysql - MySQL如何找到这个子字符串的位置？

> ID：12521407
> 
> 赞同：0
> 
> 时间：2012-09-20T21:47:01.470
> 
> 标签：mysql, substring

```
4 / 10  Used 
```

这是在一堆其他文本的中间：

```
Text text text text
 text text text text
 4 / 10  Used
text text text text 
```

我正在尝试访问`4`上面示例中的。我试过了：

```
SELECT * FROM `test`
WHERE CAST(
   SUBSTRING(ltrim(rtrim(substring(`file`, instr(`file`, '  Used') + 6, -12))), 1, 3) 
   AS SIGNED) >= 2 
```

这应该返回该行，因为 4 > 2 但我这个查询没有返回任何内容。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:35:43.227

根据要求，这是我的推荐评论：

看起来你总是想从“Used”备份到“4”并取第一个字符。如果是这样，试试这个：

```
select @foo := locate(" Used ", file), substring(file,@foo - 7,1)
from test; 
```

# python - Vim — 运行绑定到 F5 的外部命令来运行 Python 脚本会导致错误

> ID：12521409
> 
> 赞同：3
> 
> 时间：2012-09-20T21:47:07.447
> 
> 标签：python, vim

我将以下内容添加到我的 .vimrc 文件中：

```
nnoremap <silent> <F5>!python % 
```

当我按 F5 时，它应该在 Python 中运行当前文件。相反，它给出了以下错误：

```
Trackback (most recent call last):
  File "<string>", line 1, in <module>
  File "<string>", line 349, in f_with_update
  File "<string>", line 358, in run_this file
NameError: global name 'send' is not defined
Press Enter or type command to continue 
```

如果我每次运行 VIM 时都手动重新映射 F5，则此命令有效：

```
:map <silent> <F5>!python % 
```

我不记得将任何东西映射到 F5，而且我的 .vimrc 文件不包含任何映射器。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T04:11:05.777

```
nnoremap <silent> <F5>!python % 
```

映射`<F5>!python`到`%`. 你想要的是这样的：

```
nnoremap <silent> <F5> :!python %<CR> 
```

法线贴图需要`:`，如果你想使用一个普通的命令行命令，你需要结束它`<CR>`来执行命令。将右侧的所有内容视为您自己输入的键。

你可能会发现[这个关于 python 的 vim wiki 页面](http://vim.wikia.com/wiki/Python_-_check_syntax_and_run_script)很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:36:45.837

`<F5>`可能映射到其他地方。试试看`:verbose nmap <F5>`在哪里。

# python - cx_oracle 5.2.1 setup.py 如何自动查找其构建依赖项？

> ID：12521412
> 
> 赞同：2
> 
> 时间：2012-09-20T21:47:26.520
> 
> 标签：python, build, dependencies, cx-oracle, setup.py

我下载了 cx_oracle 5.2.1 并开始构建：

```
 python setup.py build 
```

我注意到它在我的系统中找到了构建依赖项，而我没有给出任何规范。我想更好地了解它是如何做到的。setup.py 中的内容不表示任何此类信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:11:58.133

我现在没有 cx_Oracle 的 setup.py 的源代码，但是在它包含的 BUILD.txt 文件中，它提到了一些环境变量的使用：

> 必须在 $HOME/.profile 中设置环境变量 ORACLE_HOME 和 LD_LIBRARY_PATH 以便 cx_Oracle 在安装后正确导入并正确构建。使用文本编辑器将以下设置添加到 $HOME/.profile 确保更改实际安装路径的位置。
> 
> ```
> Example ($HOME/.profile):
> -------------------------
> export ORACLE_HOME=[your installation path]/instantclient_11_1
> export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ORACLE_HOME 
> ```

这来自 Linux 提示部分，我记得我必须设置相同的东西才能在 Windows 下构建它。

至于它如何找到更多的标准库。我认为这是[distutils](http://docs.python.org/library/distutils.html#module-distutils)模块的魔力的一部分。在 unix 下 distutils 似乎只要通过你的 unix 的标准打包机制安装了所需的库和头文件就可以正常工作。这可能是因为 unix 有更好的标准化方法来定位构建资源（例如 Windows）。

我知道当我被迫在 Windows 下编译 Python 包时，我经常不得不明确告诉它在哪里可以找到头文件和库。在不得不出去找到所说的库并手动编译它们之后。

# javascript - 调用了 jquery click 事件，但某些 DOM 操作未执行

> ID：12521421
> 
> 赞同：0
> 
> 时间：2012-09-20T21:48:11.530
> 
> 标签：javascript, jquery, html

我有一个 html 页面，其 id 和 class'es 为空。它们由 ajax get 请求返回的数据填充。因此，用户将应用程序视为登录页面、主页、优惠页面和活动页面。成功登录后，他们会看到一个主页。只有成功登录后，用户才能看到页脚，即首页、优惠和活动的图像图标。html 页面中的元素`shown or hidden`基于用户想要通过单击图像图标来导航的页面。

**我的问题是：** 如果 I `already have offers, and events`，那么从任何其他页面导航到这些页面不会有问题，但如果有的话`one of these is empty`，那么从空内容页面导航到页面（有一些内容），一些 jquery 操作`do not occur`在`click event`. **而且，我试图找出为什么会这样？**

比如说，从空的报价页面到数据库中已经有一些事件的事件页面，事件内容被填充，但是

*   标题不会改变。标题仍然会说要约，但内容是事件。
*   图像图标不会改变。我有正常和点击图像。点击图像仍将提供，而不是事件。

但是，如果这两个页面都是空的或有一些数据，

*   标题正常更改。
*   图像图标正常变化。

下面是jquery点击事件脚本

```
$(".fevent").live('click', function(){
    $.ajax({
        url: 'http://192.168.3.100:3000/events.json?playerid='+$('#playerid').html(),
        type: "get",
        cache: false,
        success: function(data) {   
            //keep the element is always empty first before loading anything into it
            $('#events_table').html('');

            //fill the table with offers
            $.each(data, function(index, event) {
                if (event['read'] == 1){
                    $('#events_table').append('<tbody><tr class="event_list"><td class="spacer"><img alt="Spacer" src="css/images/spacer.png"></td><td class="image"><img height="60px" src="css/images/'+ event['code'] +'e.png" width="60px"></td></td><td class="description"><h3>'+ event['description']+ '</h3><p>Start Date: '+ month[(new Date(event["startdate"])).getMonth()] + ' ' + (new Date(event["startdate"])).getDate() +', '+ (new Date(event["startdate"])).getFullYear() +'</p><p>End Date: '+ month[(new Date(event["enddate"])).getMonth()] + ' ' + (new Date(event["enddate"])).getDate() +', '+ (new Date(event["enddate"])).getFullYear() +'</p></td></tr>');
                }
                else {
                    $('#events_table').append('<tbody><tr class="event_list_unread"><td class="spacer"><img alt="Spacer" src="css/images/spacer.png"></td><td class="image"><img height="60px" src="css/images/'+ event['code'] +'e.png" width="60px"></td></td><td class="description"><h3>'+ event['description']+ '</h3><p>Start Date: '+ month[(new Date(event["startdate"])).getMonth()] + ' ' + (new Date(event["startdate"])).getDate() +', '+ (new Date(event["startdate"])).getFullYear() +'</p><p>End Date: '+ month[(new Date(event["enddate"])).getMonth()] + ' ' + (new Date(event["enddate"])).getDate() +', '+ (new Date(event["enddate"])).getFullYear() +'</p></td><td class="mark_as_read"><img alt="Unread1" class="unread" src="css/images/unread1.png"><p class="read" style="display:none">events/'+event["id"]+'</p></td></tr></tbody>');    
                    $('#total_bulbs').html(event['total_bulbs']);
                }
                count_bulbs = count_bulbs + parseInt(event['total_bulbs']);
            });

            //working fine
            $('#signin_content').hide();
            //working fine
            $('#signin_header').hide();
            //working fine
            $('.submitimg').hide();
            //working fine
            $('#player_header').show();
            //working fine
            $('#player_content').hide();
            //working fine
            $('#offers_content').hide();
            //working fine
            $('#footer').show();
            //working fine
            $('#events_content').show();

            //*******************this is the header and it is not changing**************************
            $('.alignleft').html('Events');

            $('.fhome').html('<img alt="Home" class="footer_img" src="css/images/home.jpg" width="100%">');
            $('.foffer').html('<img alt="Offers" class="footer_img" src="css/images/offers.jpg" width="100%">');

            //****************this is not changing also****************************
            $('.fevent').html('<img alt="Events" class="footer_img" src="css/images/eventsover.jpg" width="100%">');

        }//end of fevent success
    });//end of fevent ajax
    $( "[data-position='fixed']" ).fixedtoolbar( 'updatePagePadding' );
});//end of fevent 
```

以下是我的标题：

```
 <div data-role="header" data-tap-toggle="false" data-position="fixed" id="player_header" style="display:none">
    <img alt="Header" src="css/images/header.jpg" width="100%" class="headerimg">
    <div class="ui-bar">
        <h3 class="alignleft"></h3>

        <div class="alignright" id="home_notification"><img alt="Redlight" height="31px" src="css/images/redlight.png" class="notification_img" width="35px"></div>
        <div style="clear: both;"></div>

    </div>
</div> 
```

以下是我的页脚

```
 <div id="footer" style="display:none">
    <ul>
        <li class="fhome"><img alt="Home" class="footer_img" src="css/images/home.jpg" width="100%"></li>
        <li class="foffer"><img alt="Offers" class="footer_img" src="css/images/offers.jpg" width="100%"></li>
        <li class="fevent"><img alt="Events" class="footer_img" src="css/images/events.jpg" width="100%"></li>
        <li class="fpromo"><img alt="Promo" class="footer_img" src="css/images/promo.jpg" width="100%"></li>
        <li class="fnews"><img alt="News" class="footer_img" src="css/images/news.jpg" width="100%"></li>
    </ul>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:13:54.973

. **不推荐使用live** .. 尝试使用 . **改为**..

```
$(function() {
    $(".fevent").on('click', function(){

}); 
```

还要确保您的代码在 DOM 就绪事件中。通过点击 F12 按钮，在浏览器中检查您是否首先看到正在发送的请求

# php - “解析错误，期待，或;” 连接服务器时

> ID：12521424
> 
> 赞同：0
> 
> 时间：2012-09-20T21:48:18.710
> 
> 标签：php, mysql

这是我的代码：

```
<?php db_connect.php

    echo "connecting to DB..."
    $host = "localhost";
    $user = "root";
    $pass = "*****";

    $databaseName = "atlas_test";
    $tableName = "sites";

    $con = mysql_connect($host, $user, $pass);

        if(!$con){
            die ('Could not connect: ' . mysql_error());
        }

    echo "DB connect successful..."

?> 
```

...我在尝试运行页面时收到以下错误消息：

“解析错误......期待'，'或';' 在 db_connect.php 中，第 4 行..."

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T21:49:38.910

echo 需要以 ; 结尾。

这不是连接错误；一个基本的 PHP 错误。解析错误是一个很好的提示。失踪 ; 错误通常会在下一个错误行中出现，因为这是 php 第一次注意到它应该看到 ; 之前就行了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T21:51:15.353

这一行：

```
echo "connecting to DB..." 
```

应该是这样的：

```
echo "connecting to DB..."; 
```

回声在第 3 行，现在没有分号，所以当 PHP 读取第 4 行的回声时，它吓坏了（这就是为什么它引用第 4 行，即使问题似乎在第 3 行）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T21:51:19.910

您在 echo 语句后忘记了分号。

```
echo "connecting to DB...";

echo "DB connect successful..."; 
```

# java - 以小时为单位的命名查询参数

> ID：12521431
> 
> 赞同：2
> 
> 时间：2012-09-20T21:49:14.023
> 
> 标签：java, hibernate, hql, named-query

我目前无法使用 HQL 执行此查询。

```
String queryString = "SELECT o FROM Orders o WHERE o.orderMade >= DATE_SUB(NOW(), INTERVAL :fetchTime HOUR)"; 
```

这将从最后的 ":fetchTime" 小时中获取最后的订单。

问题是，如何使用 HQL 设置这个参数？

我试过了

```
.em.createQuery(queryString).setParameter("fetchTime", fetchTime).getResultList(); 
```

但它会导致休眠错误。

我也尝试使用“？” 而是一个命名参数，但没有成功。

即使将数字写入 queryString 并且不设置任何参数，我仍然会收到此错误：

```
unexpected token: 6 
```

我知道这是指我使用的数字 6，而不是 fetchTime。

我得到这个工作的唯一方法是将它用作 NativeQuery，但是这个返回一个分离对象的列表，我真的很想使用 NamedQuery。

感谢您的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T06:58:36.047

SQL 中的时间计算总是很困难，因为每个数据库（MySQL、Oracle 等）的时间函数都不同。我向您推荐的最简单的解决方案是在 Java 中进行时间计算，例如：

```
long fetchTime = ....;  /* fetch time in hours */
String queryString = "FROM Orders o WHERE o.orderMade >= :orderTime";
Query query = session.createQuery(queryString);
Timestamp orderTime = new Timestamp(System.currentTimeMillis() - fetchTime * 60L * 60L * 1000L);
query.setTimestamp("orderTime", orderTime);
@SuppressWarnings("unchecked")
List<Orders> orders = query.list(); 
```

备注：`60L * 60L * 1000L`为一小时。不要忘记 L 来强制进行长时间计算。

然后您可以确定您的 HQL 将适用于每个数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:53:59.093

看来您有两个选择，要么原生，要么使用标准

[如何在 Hibernate 3.0 中实现 mysql date_sub() 函数](https://stackoverflow.com/questions/8648787/how-to-implement-mysql-date-sub-function-in-hibernate-3-0)

# jquery - 指向特定页面 Jquery Mobile

> ID：12521435
> 
> 赞同：0
> 
> 时间：2012-09-20T21:49:48.097
> 
> 标签：jquery, jquery-mobile

在 Jquery Mobile 2 页面中，尝试触发此事件时输入 DOM（隐藏的）

```
$(document).delegate('div[data-role=page]', 'pagebeforeshow', function (e, data) { 
```

它永远不会开火，我猜是因为这个原因。幸运的是，在我的情况下，两个页面都有不同的 id。如何更改此事件以在 id="AppPage" 的页面上触发？

```
<div data-role="page" data-theme="b" id="AppPage"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T23:01:41.913

我想你可能想试试：

```
$( '#AppPage' ).live( 'pagebeforeshow',function(){
    alert( "Before showing the page AppPage");
}); 
```

有关更多信息，请查看在线文档：http: [//jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

让我知道这就是你要找的

# c# - 如何在 C# 中使用 PowerShell 的 Invoke-WebRequest

> ID：12521436
> 
> 赞同：7
> 
> 时间：2012-09-20T21:49:48.067
> 
> 标签：c#, powershell

PowerShell 3.0 提供了一个非常不错的新 cmdlet，称为 Invoke-WebRequest。有没有办法在不直接调用 cmdlet 的情况下分别使用 C# 和 .NET 来利用其功能？它甚至基于.NET吗？

问候，凯文

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T03:35:01.313

您可以使用[System.Net.HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)来做同样的事情。你有[一篇](http://www.codeproject.com/Articles/6554/How-to-use-HttpWebRequest-and-HttpWebResponse-in-N)关于这个的代码项目文章。

# sql - SQL QUERY - 不同的行编辑

> ID：12521447
> 
> 赞同：1
> 
> 时间：2012-09-20T21:51:05.087
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我正在处理 SQL 查询

下面是输出：

```
PT_NO          PT_AGE         PT_SEX      DISEASE_CODE    PT_BILL_AMOUNT
--------     --------       --------     -----------     --------------   
1               50            M               52.01X         100.00
1               50            M               52.01X         100.00
1               50            M               52.01X         100.00
2               40            F               74.01          300.00
2               40            F               74.01          300.00
2               40            F               74.01          300.00 
```

下面是表结构：

```
PATIENT(pt_no,pt_age,pt_sex,pt_bill_amount)
PATIENT_DISEASE(pt_no,disease_code)

SELECT 
  pt_no,pt_age,pt_sex
  ,patient_disease.disease_code
  ,patient.pt_bill_amount
from patient "patient"
    inner join patient_disease "patient_disease" 
    on patient.pt_no = patient_disease.pt_no 
```

不知何故，我正在寻找一种不重复账单金额（仅 100 和 300 一次）的方法，这样当我对创建的上述视图求和时，我得到正确的账单金额为

```
PT_NO          PT_AGE         PT_SEX      DISEASE_CODE    PT_BILL_AMOUNT
--------     --------       --------     -----------     --------------   
1               50            M               52.01X         100.00
1               50            M               52.01X         0.00
1               50            M               52.01X         0.00
2               40            F               74.01          300.00
2               40            F               74.01          0.0
2               40            F               74.01          0.0 
```

任何关于相同的输入都会有所帮助！

谢谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:05:08.730

如果您希望这些行为空白，则可以使用`row_number()`：

```
select pt_no, pt_age, pt_sex
    ,disease_code
    ,case 
      when rn = 1 
      then pt_bill_amount
      else 0.00
    end as pt_bill_amount
from
(
  SELECT 
    p.pt_no, p.pt_age, p.pt_sex
    , pd.disease_code
    , p.pt_bill_amount
    , row_number() over(partition by p.pt_no, pd.disease_code order by p.pt_no, pd.disease_code) rn
  from patient p
  inner join patient_disease pd
      on p.pt_no = pd.pt_no
) x
order by pt_no, disease_code, rn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T22:07:57.963

您可以使用`ROW_NUMBER`函数为每组选择一行，用例函数仅显示该行中的金额。像那样：

```
SELECT pt_no,
       pt_age,
       pt_sex,
       patient_disease.disease_code,
       CASE
         WHEN ( ( Row_number()
                    OVER(
                      partition BY pt_no, pt_age, pt_sex,
                    patient_disease.disease_code
                      ORDER BY pt_no, pt_age, pt_sex,
                    patient_disease.disease_code) ) =
                1 ) THEN patient.pt_bill_amount
         ELSE 0
       END AS pt_bill_amount
FROM   patient "patient"
       INNER JOIN patient_disease "patient_disease"
               ON patient.pt_no = patient_disease.pt_no 
```

# cmake - 获取具有指定前缀的变量列表

> ID：12521452
> 
> 赞同：8
> 
> 时间：2012-09-20T21:51:23.293
> 
> 标签：cmake

有没有办法获取具有指定前缀的用户定义变量列表？例如：

```
set(vars_MyVar1 something)
set(vars_MyVar2 something)
getListOfVarsStartingWith(vars_) 
```

?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T08:22:00.490

该函数`getListOfVarsStartingWith`可以用以下方式编写：

```
function (getListOfVarsStartingWith _prefix _varResult)
    get_cmake_property(_vars VARIABLES)
    string (REGEX MATCHALL "(^|;)${_prefix}[A-Za-z0-9_]*" _matchedVars "${_vars}")
    set (${_varResult} ${_matchedVars} PARENT_SCOPE)
endfunction() 
```

这些函数使用 CMake 函数`string(REGEX MATCHALL`来计算所有匹配的变量名称，而无需循环。这是一个使用示例：

```
set(vars_MyVar1 something)
set(vars_MyVar2 something)
getListOfVarsStartingWith("vars_" matchedVars)
foreach (_var IN LISTS matchedVars)
    message("${_var}=${${_var}}")
endforeach() 
```

如果搜索应该只返回缓存变量，请使用以下函数：

```
function (getListOfVarsStartingWith _prefix _varResult)
    get_cmake_property(_vars CACHE_VARIABLES)
    string (REGEX MATCHALL "(^|;)${_prefix}[A-Za-z0-9_]*" _matchedVars "${_vars}")
    set (_resultVars "")
    foreach (_variable ${_matchedVars})
        get_property(_type CACHE "${_variable}" PROPERTY TYPE)
        if (NOT "${_type}" STREQUAL "STATIC") 
            list (APPEND _resultVars "${_variable}")
        endif()
    endforeach()
    set (${_varResult} ${_resultVars} PARENT_SCOPE)
endfunction() 
```

此函数查询`CACHE_VARIABLES`属性并确保不返回[CMake 内部使用](https://cmake.org/cmake/help/latest/prop_cache/TYPE.html)`STATIC`的类型缓存变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:01:57.497

我不知道有什么功能可以做到这一点，但是您可以通过请求所有已定义的变量`GET_CMAKE_PROPERTY`然后使用正则表达式过滤列表来轻松地自己构建一个。

例如：

```
SET(my_prefix_var1 "bob1")
SET(my_prefix_var2 "bob2")

# Get all variables
GET_CMAKE_PROPERTY(vars VARIABLES)

# Filter by prefix and build the "res" list
FOREACH(var ${vars})
    STRING(REGEX MATCH "^my_prefix" item ${var})
    IF(item)
        LIST(APPEND res ${var})
    ENDIF(item)
ENDFOREACH(var) 
```

# android - android 应用程序在尝试从网络服务器获取 txt 文件时崩溃

> ID：12521456
> 
> 赞同：1
> 
> 时间：2012-09-20T21:51:40.127
> 
> 标签：android, text-files

我的应用程序在尝试获取远程 txt 文件时崩溃。即使只是尝试解析一个 url 它也会崩溃。已设置互联网权限，并且设备/虚拟机已连接到互联网。

日志猫： ![在此处输入图像描述](../Images/9c51adf871b58b530120bdc227e0224c.png)

代码片段：

```
try {
    // the following line is enough to crash the app
    URL url = new URL("http://www.i.am/not/going/to/show/you/this.txt");

    BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
    String line = null;
    while ((line = in.readLine()) != null) {
        //get lines
    }
    in.close();

    } catch (MalformedURLException e) {

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    } 
```

我不明白我做错了什么。提前感谢您的帮助。

//编辑：添加日志猫片段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:06:40.727

由于主 UI 线程上的大量网络活动导致应用程序崩溃，这本身不是一个很好的做法，因为应用程序可能会停止响应并可能被操作系统杀死。您应该始终尝试在某个单独的线程中进行后台处理，而不是在主 UI 线程中。

[将您的代码放入 AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)**`doInBackground()`**中以获取文件。

```
private class DownloadFile extends AsyncTask<String, Integer, Void> {
     protected void doInBackground() {
         try {

       URL url = new URL("http://www.i.am/not/going/to/show/you/this.txt");       

    BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
    String line = null;
    while ((line = in.readLine()) != null) {
        //get lines
    }
    in.close();

    } catch (MalformedURLException e) {

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    }
 }

 protected void onProgressUpdate() {
    //called when the background task makes any progress
 }

  protected void onPreExecute() {
     //called before doInBackground() is started
 }
 protected void onPostExecute() {
     //called after doInBackground() has finished 
 }
  } 
```

您可以调用此任务以从**`new DownloadFile().execute("");`**您想要获取文件的任何位置获取文件。

# android - iPhone和安卓之间的接近检测（睡眠模式）

> ID：12521460
> 
> 赞同：2
> 
> 时间：2012-09-20T21:52:05.227
> 
> 标签：android, iphone, detection, proximity

我正在尝试使用 android 手机检测我的 iphone 是否在房间里。用例如下：当我离开家时（我的iphone放在口袋里），android手机检测到iphone太远，并启动安全服务。当我回到家时，它会检测到我的 iPhone，关闭闹钟并说“你好”

主要问题是当我的 iphone 是我的口袋时，它处于“睡眠”模式，在这种情况下，我无法检测到蓝牙。我知道这一定是可能的，它与新车的用途相同，当您进入时，它会检测您的 iPhone 并同步您的所有数据。

有人有想法解决我的问题吗？谢谢

数学

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T23:01:29.387

编写一个服务，或者任何它在 iPhone 上调用的东西，每 5 秒激活一次蓝牙，这样你家中的手机就可以检测到它。我猜它会很快耗尽你手机的电池。

# objective-c - 当字符串包含 \n 时 NSScanner 失败

> ID：12521478
> 
> 赞同：0
> 
> 时间：2012-09-20T21:53:45.570
> 
> 标签：objective-c, ios, nsstring

有谁知道将 \n 添加到字符串时 NSScanner 是否会正确扫描？

例如，我有一个要扫描的字符串 (myString) "\nTest\nSuper\n"

```
NSScanner *scanner = [NSScanner scannerWithString:myString];
NSString *str = @"Super";
if( [scanner scanString:str intoString:nil] )
{
    //It never reaches here
} 
```

任何想法为什么它看不到“超级”？当我没有 \n 符号时，这曾经有效。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:12:45.670

`-[NSScanner scanString:intoString:]`返回`NO`是因为您尝试从字符串的开头进行扫描，并且子字符串 'Super' 没有出现在那里。

我将使用它来尝试说明会发生什么：

```
BOOL success;
NSString *whatDidIGet;

// 'success' is YES, and 'whatDidIGet' contains "Test\n"
whatDidIGet = nil;
success = [scanner scanUpToString:str intoString:&whatDidIGet];

// 'success' is YES, and 'whatDidIGet' contains "Super"
whatDidIGet = nil;
success = [scanner scanString:str intoString:&whatDidIGet];

// 'success' is NO, and 'whatDidIGet' is nil.
whatDidIGet = nil;
success = [scanner scanUpToString:str intoString:&whatDidIGet]; 
```

忽略第一个换行符的原因是您的扫描仪（您设置它的方式）默认忽略空格和换行符，因此它会跳过第一个。最后，再次，因为它跳过空格和换行符，`whatDidIGet`所以为零。

编辑：

如果您在实例化扫描仪后立即插入：

```
[scanner setCharactersToBeSkipped:[[[NSCharacterSet alloc] init] autorelease]]; 
```

`whatDidIGet`您会在第一次和第三次扫描中看到所有换行符。

在您的努力中向您致以最良好的祝愿。

# jquery - 在 WebMatrix 中使用 JQUERY 和 JSON 级联下拉列表（剃刀语法）

> ID：12521484
> 
> 赞同：0
> 
> 时间：2012-09-20T21:54:29.937
> 
> 标签：jquery, json, relative-path, webmatrix, cascadingdropdown

我正在尝试建立一个`2-level` `cascading dropdown list`使用`JQUERY`和`JSON`

第一级应该列出`countries`，第二级，`cities`.

第二级应该是`disabled`直到从第一级选择一个值。

`Countries`并且`Cities`是连接表，表中的`CountryId`外键在哪里`Cities`

**这将检索国家/地区列表**

```
var db = Database.Open("MyDatabase");
var sqlCountryData = "SELECT CountryId, Name FROM Countries ORDER BY Name";
var countryData = db.Query(sqlCountryData); 
```

对于城市列表，我使用的是`external file`被调用的`GetCities`. 它与主文件夹位于同一文件夹中。

**这将/应该根据 Jquery 函数传递的 countryId 检索城市列表（我猜它在那里不起作用）**

```
Layout = null;
var countryId = UrlData[0].IsEmpty() ? 3 : UrlData[0].AsInt();
var db = Database.Open("MyDatabase");
var sqlCityData = "SELECT CityId, Name AS CityName FROM Cities WHERE CountryId = @0 ORDER BY Name";
var cityData = db.Query(sqlCityData, countryId);
Json.Write(cityData, Response.Output); 
```

**这是 HTML 标头中的 Javascript 部分：**

```
<head>
    <meta charset="utf-8" />
    <script src="~/scripts/jquery-1.8.1.min.js" type="text/javascript"></script>
    <script>
        $(function () {
            var citySelect = $('#cityId');
            citySelect.attr('disabled', true);
            $('#countryId').change(function() {
                var countryId = $(this).val();
                $.getJSON('/GetCities/' + countryId, function (cityData) {
                    citySelect.attr('disabled', false);
                    citySelect.empty();
                    citySelect.append(
                        $('<option/>')
                            .attr('value', '')
                            .text('-- Sélectionner --'));
                    $.each(cityData, function (index, city) {
                        citySelect.append(
                            $('<option/>')
                                .attr('value', city.CityId)
                                .text(city.CityName)
                        );
                    });
                });
            });
        });
    </script>
</head> 
```

**和 HTML 标记**

```
<li><label for="countryName">Pays</label>
    <select id="countryId" name="countryId">
        <option value="">-- Veuillez sélectionner --</option>
        @foreach(var countryrow in countryData) {
            <option value=@countryrow.CountryId>@countryrow.Name</option>
        }
    </select>
</li>

<li><label for="cityId">Ville</label>
    <select id="cityId"></select>
<li> 
```

**什么有效？**

> 在单击第一个下拉列表之前，第二个下拉列表被禁用
> 
> 第一个下拉列表列出了单击时的国家/地区

看起来如果 Json.Write/getJSON 没有达到我已经尝试过使用 /GetCities/ 的预期效果，但它没有帮助！

感谢您的专家建议。

# html - 从 JSP/servlet 中的数据库中选择的 HTML 下拉列表设置默认值

> ID：12521488
> 
> 赞同：4
> 
> 时间：2012-09-20T21:54:41.950
> 
> 标签：html, jsp, servlets, jstl

我有一个用于存储和编辑一组数据的 HTML 表单。我的表格中也有一个下拉框。打开编辑页面时我的问题是如何将下拉列表的默认值设置为我刚从数据库中获得的值。目前，我使用 JSTL 标记通过 if 条件添加属性“selected”。但是，如果我在下拉列表中有 100 个值，则执行 if 条件 100 次看起来不是一个好选择。这是我现在所拥有的。

```
<select name="outageType" id="outageType" class="span3">
<option
<c:if test='${operation.type == "Type1"}'>selected="selected"</c:if>
value="Type1">Type1</option>
<option
<c:if test='${operation.type == "Type2"}'>selected="selected"</c:if>
value="Type2">Type2</option>
<option
<c:if test='${operation.type == "Type3"}'>selected="selected"</c:if>
value="Type3">Type3</option>
</select> 
```

因此，如果我有 100 个值，那么最好的编码方式是什么。我正在使用带有 SQL 数据库的 JSP/Servlet。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:06:34.160

既然你有一个 SQL 数据库，我想你可以列出 100 种操作类型。如果您创建一个`ArrayList<String>`包含类型并将其设置为名为的请求属性`operationTypes`，您可以使用它[`c:forEach`](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSTL4.html#wp86154)来遍历列表：

```
<select name="outageType" id="outageType" class="span3">
  <c:forEach items="${operationTypes}" var="operationType">
    <option ${operation.type == operationType
             ? 'selected="selected"' 
             : ''
             } value="<c:out value="${operationType}"/>">
      <c:out value="${operationType}"/>
    </option>
  </c:forEach>
</select> 
```

# javascript - Javascript 按钮重定向

> ID：12521491
> 
> 赞同：9
> 
> 时间：2012-09-20T21:54:55.003
> 
> 标签：javascript, html

试图让我的按钮像一个链接一样（尝试了`<A>`标签，如果你在新标签中打开它会起作用，但如果你点击它就不行。然后尝试了这段代码，什么也没有。建议？

```
<button onClick="location.href='/secure/edit.aspx?id=671'">Edit</button> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-20T21:58:54.577

您需要明确说明`window.location`，因为`this`在按钮的上下文中是按钮对象本身。通常，JavaScript 在`window`对象的上下文中运行，因此您不需要这样做。

```
<button onClick="javascript:window.location.href='/secure/edit.aspx?id=671'">Edit</button> 
```

（此外，我还想明确声明脚本是`javascript:`，但这纯粹是个人的事情。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T21:57:56.333

```
<button onclick="window.location='/secure/edit.aspx?id=671'">Edit</button> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T21:58:39.963

尝试使用 window.location

```
<button onClick="window.location='/secure/edit.aspx?id=671'">Edit</button> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-23T09:52:55.500

添加`type = "button"`

```
<button type = "button" onClick="window.location='/secure/edit.aspx?id=671'">Edit</button> 
```

您需要添加`type`，否则该按钮将充当提交按钮并发布您的表单，而不是重定向到所需的 url。

# asp.net - asp.net，验证用户在文本框上书写

> ID：12521493
> 
> 赞同：0
> 
> 时间：2012-09-20T21:54:59.093
> 
> 标签：asp.net

我正在使用 C# 处理 ASP.NET。

我有一个`TextBox`并且我想验证用户是否为`TextBox`.

如果用户没有输入正确的长度，我希望在标签上显示一条消息。但我希望在用户写作时即时进行此检查。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:04:46.090

假设这些是你的 asp.net 元素

```
<asp:label id="message" runat="server"/><br/>
<asp:textbox runat="server" id="txtTest"/> 
```

你的 js 应该是这样的：

```
$(function(){
    $("input[id$='txtTest']").bind('keypress', function(){   
        if($("input[id$='txtTest']").val().length < 10)
            $("[id$='message']").text('incorrect length');
       else
        $("[id$='message']").text('');
    });
}); 
```

请注意，`id$='message`and`input[id$='txtTest']`在 jQuery 中表示[id 以](https://stackoverflow.com/questions/609382/jquery-selector-id-ends-with)

当您标记要在服务器上运行的元素时，asp.net 根据您的页面名称在实际客户端 ID 的开头附加一些其他名称。

这是[工作演示](http://jsfiddle.net/NrBNy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:01:04.647

使用 jQuery。在你的文本框旁边有一个 div，为你的文本框连接一个 onchange() 事件，如果文本框的 val() 的长度不够长，只需让 jQuery 用你的消息填充 div。

```
<input type="text" id="myTextBox" onchange="changeMessage" />
<div id="message"></div>

<script>
function changeMessage(){

  var textboxLength = $('#myTextBox').val().length;
  if(textboxLength < ...){
    $('#message').html('Your Message');
  }
}
</script> 
```

# javafx - javafx 2.2 keycode.enter

> ID：12521494
> 
> 赞同：3
> 
> 时间：2012-09-20T21:55:25.193
> 
> 标签：javafx, keyevent

我正在开发 JavaFX 2.2 中的应用程序。我正在使用两个字段（用户名和密码）登录到活动目录并有一个登录按钮。这一切都完美无缺。但是我添加了一个 KeyEvent EventHandler 来处理按下 ENTER 的关键事件。问题是当用户按下 SHIFT 键时也会使用它。下面是我的处理程序的代码，应用程序中没有使用其他 KeyEvent 处理程序。

```
import javafx.scene.input.KeyCode;
import javafx.scene.input.KeyEvent; 
...   
private EventHandler<KeyEvent> keyListener = new EventHandler<KeyEvent>() {
    @Override
    public void handle(KeyEvent event) {
        if(event.getCode() == KeyCode.ENTER); {
            startLogin();
            getContext();
            try {
                checkUserLevel();
            } catch (Exception e) {
                actionTarget.setText("Unable to authenticate user\n" + userTextField.getText());
            }
            event.consume();
        } 
    }
}; 
```

这是 JavaFX 中的错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T21:58:18.057

您必须删除分号。从

```
if(event.getCode() == KeyCode.ENTER); { 
```

到

```
if(event.getCode() == KeyCode.ENTER) { 
```

此外，在 Swing 中，我确信您可以直接将 an 添加`ActionListener`到 a中，并且当as 焦点`JTextBox`按下 enter 时它会触发动作事件。`JTextBox`它将防止在不相关的上下文中触发您的操作。希望JavaFX中存在类似的东西！

# css - 花哨的字段集图例

> ID：12521496
> 
> 赞同：2
> 
> 时间：2012-09-20T21:55:52.573
> 
> 标签：css, legend, fieldset, legend-properties

我正在尝试 html'ify 一个设计，其中视频周围有一个边框，并且在边框上有一个标题。实现这一点的完美方法是使用 fieldset 和 legand 标签，但是，我需要对样式有所了解，任何人都知道如何实现这一点，同时保持与 ie7+、firefox 和 chrome 的兼容性？

名声一： ![所需的一帧外观](../Images/472b3f3a6e55de2af8095f55bc9a1e5d.png)

第 2 帧： ![第二帧所需的外观](../Images/163e96ffc7113328141a04abfd972881.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:13:12.650

你可以做这样的事情 - [**DEMO**](http://jsfiddle.net/9ekgd/)

***HTML***

```
<div class="wrapper">
    <div class="content">
        <h2> Some lorem ipsum text title </h2>
    </div>
</div> 
```

***CSS***

```
.wrapper {
    margin: 25px;
    background: #000;
    height: 300px;
    padding: 5%;
}

.content {
    border: 1px solid #fff;
    width: 100%;
    height: 100%;
    position: relative;
    text-align: center;
}

h2 {
    color: yellow;
    font: bold 16px sans-serif;
    display: inline-block;
    padding: 0 25px;
    position: relative;
    top: -12px;
    background: #000;
} 
```

# asp.net - 使用 ASP.NET Web API 对 PUT 和 DELETE 的 CORS 支持

> ID：12521499
> 
> 赞同：37
> 
> 时间：2012-09-20T21:55:59.750
> 
> 标签：asp.net, cross-domain, asp.net-web-api, cors

我正在使用 ASP.NET Web API 的最终版本来实现对 JavaScript 友好的 API。根据各种教程，我在 web.config 中启用了 CORS：

```
<system.webServer>
 <httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*" />
    <add name="Access-Control-Allow-Headers" value="Content-Type" />
  </customHeaders>
 </httpProtocol>
</system.webServer> 
```

有了上述，跨域 GET 和 POST 请求工作正常，但 PUT 和 DELETE 请求都失败。

在 Chrome 中：

> Access-Control-Allow-Methods 不允许方法 PUT。
> 
> Access-Control-Allow-Methods 不允许方法 DELETE。

让 PUT 和 DELETE 动词跨域工作是否需要额外的东西？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-20T22:11:33.143

看起来添加另一个自定义标题对其进行了排序：

```
<system.webServer>
 <httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*" />
    <add name="Access-Control-Allow-Headers" value="Content-Type" />
    <add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE, OPTIONS" />
  </customHeaders>
 </httpProtocol>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-21T00:06:10.653

此外，除了 Nathan 的回答之外，请确保您禁用了 WebDAV IIS 模块并`runAllManagedModulesForAllRequests="true"`在 web.config 中设置设置：

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true">
    <remove name="WebDAVModule"/>
  </modules>
  <handlers>
    <remove name="WebDAV" />
  </handlers>
</system.webServer> 
```

没有这个，[预检 CORS 请求](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Preflighted_requests)（用于 PUT、DELETE 方法和发送额外的 OPTIONS 请求）将不起作用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-05-22T08:11:04.287

在 WEBAPI2.2 中克服 CORS 问题的非常简单的解决方案。

在您的 WebApi 配置文件中添加以下内容。

```
var cors = new EnableCorsAttribute("*", "*", "*");
Config.EnableCors(cors); 
```

在添加之前，请确保删除 Web.config 文件中的自定义标头。

```
 <add name="Access-Control-Allow-Origin" value="*" />
    <add name="Access-Control-Allow-Credentials" value="true" />
    <add name="Access-Control-Allow-Headers" value="Origin, X-Requested-With, Content-Type, Accept, X-Token" />
    <add name="Access-Control-Allow-Methods" value="GET,PUT,POST,DELETE,OPTIONS" /> 
```

如果您在 WebApiconfig 中同时启用了 customheader 以及 CORS，您将面临 cors 错误。

添加在 WebApi 配置中启用的 cors 将解决该问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-15T08:48:48.750

**请在部署应用程序时在 web.config 中使用它，不要在本地 web.config 中使用**

```
 <system.webServer>
  <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Headers" value="Content-Type" />
        <add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE, OPTIONS" />
      </customHeaders>
    </httpProtocol>
 <ModSecurity enabled="false" configFile="C:\inetpub\wwwroot\owasp_crs\modsecurity.conf" />
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <remove name="OPTIONSVerbHandler" />
      <remove name="TRACEVerbHandler" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>

  </system.webServer> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-19T13:28:38.550

尝试评论该行：`<remove name="OPTIONSVerbHandler" />`in `<handlers>`tag

# c# - 禁用表单身份验证以进行调试

> ID：12521500
> 
> 赞同：0
> 
> 时间：2012-09-20T21:56:03.867
> 
> 标签：c#, .net, asp.net-mvc-3

我目前正在使用一个由许多独立模块组成的应用程序，并且用户身份验证也由它自己的模块处理。

每个应用程序在每个控制器和指向安全模块的 web.config 顶部使用 [Authorize] 属性：

```
 <authentication mode="Forms">
        <forms loginUrl="/SecurityModule/Account/LogOn" timeout="30"/>
    </authentication> 
```

当我按 F5 启动应用程序时，它失败了：“找不到资源。” 未安装安全模块，无法找到登录页面。

在这一点上，我想做的就是能够按 F5 并运行这个特定的 Web 应用程序并删除安全依赖项并在构建时将其添加回来。

在我被“这是这个问题的副本”击中之前：关于这个主题有很多问题，我阅读了很多问答，但找不到任何我可以使用的东西。比如这个[问题](https://stackoverflow.com/questions/2839406/forms-authentication-disable-redirect-to-the-login-page)。

# c# - 处理异常后如何重试？

> ID：12521501
> 
> 赞同：0
> 
> 时间：2012-09-20T21:56:04.850
> 
> 标签：c#, exception-handling, try-catch

假设你有一个 TRY 块。我尝试写入文件，但该文件不存在，因此引发异常。

```
try
{
     TryWritingToFile();          
}
catch (Exception)
{
     CreateFile();
     //now I want to go back and try to write to the file again. 
} 
```

如何回到 try 块的开头？我需要在 catch 块中“重试”吗？这不是重复代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T22:01:19.633

```
bool ok = false; 

while(!ok)
{    
    try
    {
        TryWritingToFile();          
        ok = true; 
    }
    catch (Exception)
    {
        CreateFile();
        //now I want to go back and try to write to the file again. 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:57:48.623

> 如何回到 try 块的开头？

**你不能**，但你可以再次调用相同的函数——递归。

请注意，捕获全局`Exception`异常并不是最佳实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:58:26.567

对于从发生异常的确切点重试操作的一般情况，您需要一个异常过滤器，.NET 支持，但 C# 不支持。使用 VB.NET、F# 或 C++/CLI。或者也许是 MSIL。

而且我不太确定`EXCEPTION_CONTINUE_EXECUTION`在异常过滤器表达式中返回的 .NET 等价物是什么。

* * *

这必须在异常过滤器中完成的原因是异常过滤器是在第一次机会异常处理期间评估的，而调用堆栈仍然完好无损。在第二次机会异常处理期间执行 catch 块时，堆栈展开已经开始，并且无法恢复不再在调用堆栈上的调用帧的执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T22:00:47.727

在这里捕获一些特定的文件 I/O 异常可能比基类 Exception 更好。

为什么不将整个代码块包装在一个while循环中，检查成功设置的某种布尔值？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T22:07:09.697

您可以使用任意数量的复杂技巧来实现这种效果，例如：

```
bool success = false;
while(!success)
{
    try
    {
        WriteToFile();
        success = true;
    }
    catch()
    {
        CreateFile();
    }
} 
```

但它们都是有问题的，应该不惜一切代价避免。控制流不那么明显，而且通常还有其他缺点。例如，上面的代码是无限循环的好方法。

在这种情况下，问题的根源通常是您将异常用作控制流机制。例如，在这里您依靠异常来告诉您文件是否存在。这是有问题的，因为异常会破坏控制流并带来性能损失。更好的选择是重新排列代码，以便您不依赖异常来传达除异常情况之外的任何内容。几乎总是有一种更直接（和更有效）的方法来找出异常告诉你什么。

例如：

```
if(!CheckFileExists()) CreateFile();
WriteToFile(); 
```

# asp.net - 图表未显示 y 轴和 x 轴上的所有值

> ID：12521503
> 
> 赞同：0
> 
> 时间：2012-09-20T21:56:17.550
> 
> 标签：asp.net, mschart

我的网页上有这个条形图控件，我在 x 轴和 y 轴上添加了至少 10 个值，但图表仅在 x 上显示 2 个值，在 y 轴上显示 3 个值。下面是我的代码

```
<asp:Chart ID="ChartTest" runat="server" Height="296px" Width="600px" ImageType="Png" 
            BackColor="#D3DFF0" Palette="BrightPastel" BorderlineDashStyle="Solid" BackSecondaryColor="White" 
            BackGradientStyle="TopBottom" BorderWidth="2" BorderColor="26, 59, 105"> 
            <Titles> 
                <asp:Title ShadowColor="32, 0, 0, 0" Font="Trebuchet MS, 14.25pt, style=Bold" ShadowOffset="3" 
                    Text=" Bar Chart" Name="Title1" ForeColor="26, 59, 105"> 
                </asp:Title> 
            </Titles> 
            <Legends> 
                <asp:Legend Enabled="False" IsTextAutoFit="False" Name="Default" BackColor="Transparent" 
                    Font="Trebuchet MS, 8.25pt, style=Bold"> 
                </asp:Legend> 
            </Legends> 
            <BorderSkin SkinStyle="FrameThin1"></BorderSkin> 
            <ChartAreas> 
                <asp:ChartArea Name="ChartArea1" BorderColor="64, 64, 64, 64" BorderDashStyle="Solid" 
                    BackSecondaryColor="White" BackColor="64, 165, 191, 228" ShadowColor="Transparent" 
                    BackGradientStyle="TopBottom"> 
                    <Area3DStyle Rotation="9" Perspective="10" Enable3D="True" LightStyle="Realistic" 
                        Inclination="38" PointDepth="200" IsRightAngleAxes="False" WallWidth="0" IsClustered="False" /> 
                    <Position Y="10" Height="94" Width="94" X="10" ></Position> 
                    <AxisY LineColor="64, 64, 64, 64"> 
                        <LabelStyle Font="Trebuchet MS, 8.25pt, style=Bold" /> 
                        <MajorGrid LineColor="64, 64, 64, 64" /> 
                    </AxisY> 
                    <AxisX LineColor="64, 64, 64, 64"> 
                        <LabelStyle Font="Trebuchet MS, 8.25pt, style=Bold" /> 
                        <MajorGrid LineColor="64, 64, 64, 64" /> 
                    </AxisX> 
                </asp:ChartArea> 
            </ChartAreas> 
        </asp:Chart> 
```

后面的代码如下

```
 var series = ChartTest.Series.Add("series1"); 
        series.ChartType = SeriesChartType.Column; 
        series.XValueType = ChartValueType.Auto; 
        Chart_MRDBHull.Titles[0].Text = "chart 1"; 
        foreach (DataRow dr in ds.Tables[0].Rows) 
        { 
            //if(dr.Table.Columns.Contains( 
            var xValue = dr["class1"].ToString(); 
            var yValue = dr["Total"].ToString(); 
            series.Points.AddXY(xValue, yValue); 
        } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T01:53:32.183

这可能会有所帮助。设置间隔值。

[http://social.msdn.microsoft.com/Forums/en-US/MSWinWebChart/thread/e83917a2-2f06-433a-8ccc-6f1bc329617b/](http://social.msdn.microsoft.com/Forums/en-US/MSWinWebChart/thread/e83917a2-2f06-433a-8ccc-6f1bc329617b/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:18:53.817

在 XAxis 和 YAxis 上设置间隔值。如果您想要每个标签的刻度线，请在每个轴的 MajorTickMark 属性上设置间隔。

# macos - Silverlight 应用程序总是在 Safari/Mac 上重新下载

> ID：12521506
> 
> 赞同：2
> 
> 时间：2012-09-20T21:56:26.317
> 
> 标签：macos, silverlight, safari

我们公司开发了一个 Silverlight 应用程序，我在我的 Mac 和 Safari 上使用它。该应用程序本身运行良好，并且与 PC 上的行为完全相同。但是，每次我连接到该站点时，silverlight 应用程序都会自行下载。在 PC 上，这只发生在开发组对应用程序进行更改时。

我应该使用 Mac/Safari 上的设置吗？部署端有什么需要设置的吗？代码中有什么东西吗？

该应用程序相当大，因此每次下载都会增加相当长的启动时间 - 这不是让潜在客户在谈话开始时盯着进度条的最佳体验......

# android - Android DatabaseHelper 使用 orm

> ID：12521510
> 
> 赞同：-1
> 
> 时间：2012-09-20T21:56:39.103
> 
> 标签：android, orm, ormlite, android-sqlite

有谁知道如何在 Android 上实现 DatabaseHelper 以使用 ORM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:41:42.940

我建议从[教程开始。](http://www.ormlite.com/android/examples). 它们写得很好，应该可以很好地帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T22:08:37.567

认为您应该使用 SQLite 并可能将[这里](http://developer.android.com/reference/android/database/sqlite/package-summary.html)作为入门者？或者使用对象数据库（[也许是 DB4O？](http://www.db4o.com/Android/default.aspx)） - 否则这篇文章似乎重复[了这个](https://stackoverflow.com/questions/9033289/tutorials-for-using-hibernate-in-android)关于 Android 的休眠的文章 - 我会说这有点过头了，但我很想尝试 DB4O！

# javascript - 有人请解释工具链/样板的工作流程，例如 ember-skeleton 或 iridium

> ID：12521511
> 
> 赞同：2
> 
> 时间：2012-09-20T21:56:43.163
> 
> 标签：javascript, ember.js, boilerplate, toolchain

我试图自己在一定程度上理解工作流程，但我认为我并不满意，如果有人能解释一下，这对像我这样的初学者会有所帮助......

克隆存储库[https://github.com/interline/ember-skeleton](https://github.com/interline/ember-skeleton)后， 我们运行以下命令 `bundle install` ， `bundle exec rackup` 然后我们看到我们的服务器正在运行，我们所要做的就是`localhost:9292`看到我们的站点神奇地运行。要查看站点上的更改，我们在指定文件夹中添加新文件需要它们，在指定文件夹中添加 css 等。我认为那里的开发人员通过开发如此出色的骨架在简化开发过程方面做得很好。

我想知道所涉及的过程。比如， `bundle exec rackup` 它的启动是哪个文件攻击，比如`ASSET`file 或`config`file ？以及生成最终等文件的`js`步骤`css`。其他文件（例如`Guard`文件`rake`文件等）的作用是什么？

**注意** 如果对 ember-skeleton 的解释足以理解 Iridium 的工作流程，那么您也可以对 Iridium 有所了解。铱星的链接是[https://github.com/radiumsoftware/iridium](https://github.com/radiumsoftware/iridium)

**不确定这是否会有所帮助，但一旦它符合条件，我想为这个问题提供赏金。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:33:25.677

`bundle install`获取并安装在**Gemfile**中声明的所有项目依赖项。安装包后，在项目中运行命令以`bundle exec ...`使用捆绑的 gem 而不是系统 gem 执行。（见[捆绑器](http://gembundler.com/)。）

`bundle exec rackup`加载**config.ru**中声明的 Web 应用程序。（参见[Github 上的机架](https://github.com/rack/rack/wiki/%28tutorial%29-rackup-howto)。）

`rake`是用于运行测试、构建和其他实用程序的 Ruby 构建工具。您可以通过运行来查看项目的所有可用 rake 任务`bundle exec rake -T`。

rake-pipeline (with rake-pipeline-web-filters) 是一个 rake 任务库，它根据**Assetfile**对 JS 和 CSS 进行预处理（连接和缩小） ，并将处理后的文件复制到 web 服务器可以交付它们的“assets”目录作为静态文件。（参见Rubydoc 上的 rake-pipeline和[Rubydoc 上的](http://rubydoc.info/github/livingsocial/rake-pipeline/master/file/README.yard)[rake-pipeline-webfilters](http://rubydoc.info/github/wycats/rake-pipeline-web-filters/master/file/README.yard)。）

**Guardfile**声明了文件监视，这样 rake 任务可以在文件更改时自动运行。通常，这用于在每次对代码库进行更改时自动运行测试。（参见[Github 上的 guard-rake](https://github.com/rubyist/guard-rake)。）

# shell - 使用 sed 转换字符串

> ID：12521513
> 
> 赞同：0
> 
> 时间：2012-09-20T21:56:56.677
> 
> 标签：shell, unix

我的输入中有几行我正在初始化结构。例如：

```
head = (struct node) {5, NULL}; 
```

我需要将这些行转换为以下内容：

```
init_node( &head, 5, NULL); 
```

那就是......任何时候我在输入文件中看到以下行：

```
something = (struct something2){ something3, something4}; 
```

我需要将其转换为：

```
init_something2( &something1, something3, something4); 
```

我想我需要在这里使用 sed 功能。有人可以帮忙吗？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:12:31.427

Sed 可能也可以工作，但这里有一些适用于 perl 的东西：

`perl -pe 's|(.*) = \(struct node\) {(.*), (.*)};|init_node( &\1, \2, \3);|'`

请注意，我在匹配中使用括号表达式捕获每个“某物”，然后在替换中使用 \1、\2 等检索它们。这是您真正需要知道的唯一部分。希望您能弄清楚如何使任一表达式足够灵活以适合您的实际数据（除非您奇迹般地对每一行都有一致的样式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:19:07.160

我会做：

```
sed -e 's/\s*\([_a-zA-Z][0-9a-zA-Z_]*\)\s*=\s*(\s*struct\s*\([_a-zA-Z][0-9a-zA-Z_]*\)\s*)\s*{\s*\([^}]*\)}\s*;/init_\2( \&\1, \3);/' -i you_file.c 
```

解释疯狂的正则表达式：

1） \s* 跳过零个或多个空格（因此它变得更加灵活）。

其次，我们通过使用 ( ) 获取一个 C 标识符（如果我错了，请有人纠正我）可以以字母或下划线中的字符开头，并且可以包含字母数字字符和下划线（[ *a-zA-Z ][0-9a-zA-Z* ]*)。

第三次跳过等号后跟零个或多个空格，然后跳过左括号后跟空格，然后跳过结构后跟空格

第四：抓取另一个标识符

第五：跳过一个由零个或多个空格包围的右括号，然后是一个左括号，后跟空格

第六：在右括号之前抓取任何东西（注意这一点！你不能在代码中包含包含括号的表达式）

第七：跳过右括号，然后是空格，然后是分号

最后：重新排列抓取的内容 =)

编辑：注意“&”必须被转义：“\&”。如果不是，sed 将用整个匹配替换它

EDIT2：感谢 Jonathan 对如何包含任意数量的初始化程序（带逗号）的观察

希望这可以帮助，

贾尼托

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T22:12:58.123

正则表达式在这里是你的朋友（假设你的输入是一致的格式）。

该表达式`\([a-zA-Z]*\) = (struct \([a-zA-Z]*\)) {\([a-zA-Z0-9, ]*\)};`应该为您的输入字符串建模。使用这些捕获组，表达式`init_\2( \&\1, \3);`应该生成您想要的输出字符串。将这些放在一起，以下`sed`命令应该可以满足您的需要：

```
sed -e 's/\([a-zA-Z]*\) = (struct \([a-zA-Z]*\)) {\([a-zA-Z0-9, ]*\)};/init_\2( \&\1, \3);/g' 
```

这假定您的`struct`和变量名称仅由大写和小写字母组成（我保持简单，以防止示例变得太宽而无法容纳页面）。如果它们包含其他字符，则需要相应地调整表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T22:16:12.837

更一般的 sed 匹配：

```
sed -e 's/\([a-zA-Z0-9]*\)\s*=\s*(\s*struct\s\([a-zA-Z0-9]*\)\s*)\s*{\s*\([a-zA-Z0-9]*\)\s*,\s*\([a-zA-Z0-9]*\)\s*}\s*;/init_\2( \&\1, \3, \4);/g' 
```

这将匹配如下表达式：

*   `something=( struct something2) {something3,something4};`
*   `something = (struct something2) { something3 , something4 };`

等等

# bytearray - java.util.zip.DataFormatException：java.util.zip.Inflater.inflateBytes（Native Method）处的未知压缩方法

> ID：12521522
> 
> 赞同：0
> 
> 时间：2012-09-20T21:57:31.677
> 
> 标签：bytearray, firebird, unzip, inflate

我想从我的 Firebird DB 中解压缩压缩数据并选择使用**inflater 类**，但我得到了那个异常！你能给我一些小费吗！哪里有问题或者我怎样才能更好地解压这样的字节数组文件！！

这是我的代码：

```
byte[] ekgDaten = blobres.getBlinhalt();
         System.out.println(ekgDaten.length);
         if(ekgDaten != null && ekgDaten.length !=0){
             // Check if the data is compressed
             if(ekgDaten[0]== 80 && ekgDaten[1] == 75){
                 // Create a decompressor and give it the data to decompress
                 Inflater decompressor = new Inflater();               
                 decompressor.setInput(ekgDaten); 
                 ByteArrayOutputStream baos= new ByteArrayOutputStream(ekgDaten.length);

                 // Decompress the data
                 byte[] buf = new byte[1024];
                   try{
                    while(true){
                        int count = 0;
                            try {
                                count = decompressor.inflate(buf);
                            } catch (DataFormatException ex) {
                                Logger.getLogger(TbblobsFacadeREST.class.getName()).log(Level.SEVERE, null, ex);
                            }
                        if(count==0 && decompressor.finished()){
                        break;
                        }else if(count == 0){
                            throw new UnsupportedEncodingException("Bad zip data, size: " + ekgDaten.length);
                            }else{
                        baos.write(buf, 0, count);
                        }
                    }
                   }catch(UnsupportedEncodingException e){

                   }finally{
                   decompressor.end();
                   }
                    // Get decompressed Data
                    byte[] decompressed = baos.toByteArray();
                    map.put(ekgTyp, decompressed);
             }else{
                 map.put(ekgTyp, ekgDaten);
             }
         }
         i++;
     }
    return map; 
```

这是输出：

```
INFO: UREKGSIGN
INFO: 115200
INFO: URYEKGSIGN
INFO: 740845
SCHWERWIEGEND: java.util.zip.DataFormatException: unknown compression method
    at java.util.zip.Inflater.inflateBytes(Native Method)
    at java.util.zip.Inflater.inflate(Inflater.java:238)
    at java.util.zip.Inflater.inflate(Inflater.java:256)
    at de.ekg_android.service.TbblobsFacadeREST.getDaten(TbblobsFacadeREST.java:173)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
    at $Proxy130.getDaten(Unknown Source)
    at de.ekg_android.service.__EJB31_Generated__TbblobsFacadeREST__Intf____Bean__.getDaten(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:165)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:67)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:276)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:133)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:83)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:133)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:71)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1171)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1103)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1053)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1043)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:406)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:477)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:662)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)

INFO: URYIKGSIGN
INFO: 0
INFO: URYEKGVERM
INFO: 0
INFO: UBEKGSIGN
INFO: 1574863
SCHWERWIEGEND: java.util.zip.DataFormatException: unknown compression method
    at java.util.zip.Inflater.inflateBytes(Native Method)
    at java.util.zip.Inflater.inflate(Inflater.java:238)
    at java.util.zip.Inflater.inflate(Inflater.java:256)
    at de.ekg_android.service.TbblobsFacadeREST.getDaten(TbblobsFacadeREST.java:173)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
    at $Proxy130.getDaten(Unknown Source)
    at de.ekg_android.service.__EJB31_Generated__TbblobsFacadeREST__Intf____Bean__.getDaten(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:165)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:67)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:276)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:133)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:83)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:133)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:71)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1171)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1103)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1053)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1043)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:406)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:477)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:662)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)

INFO: UBIKGSIGN
INFO: 0
INFO: UBEKGVERM
INFO: 0
INFO: ULBDMDAT
INFO: 7224
INFO: URTRAINEKG
INFO: 149334
SCHWERWIEGEND: java.util.zip.DataFormatException: unknown compression method
    at java.util.zip.Inflater.inflateBytes(Native Method)
    at java.util.zip.Inflater.inflate(Inflater.java:238)
    at java.util.zip.Inflater.inflate(Inflater.java:256)
    at de.ekg_android.service.TbblobsFacadeREST.getDaten(TbblobsFacadeREST.java:173)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    ...... 
```

提前谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:05:12.593

`java.util.zip.inflater`解码 zlib 格式，而不是 zip 格式。从[文档](http://docs.oracle.com/javase/6/docs/api/java/util/zip/Inflater.html)中：

> 此类为使用流行的 ZLIB 压缩库的通用解压缩提供支持。

您需要使用[`java.util.zip.ZipFile`](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipFile.html)来读取 zip 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-24T16:41:34.130

利用

```
Inflater decompressor = new Inflater(true); 
```

而不仅仅是

```
Inflater decompressor = new Inflater(); 
```

它将提供与其他 zip 引擎的一些兼容性。

# python - 使用 Python 读取元数据

> ID：12521525
> 
> 赞同：4
> 
> 时间：2012-09-20T21:57:51.840
> 
> 标签：python, windows, metadata

在过去的两天里，我一直在扫描互联网，试图找到解决问题的方法。我有一个包含不同文件的文件夹。他们运行文件类型的策略。我正在尝试编写一个 python 脚本，该脚本将从每个文件中读取元数据（如果存在）。目的是最终将数据输出到文件中，以便与另一个程序的元数据提取进行比较。

我发现了一些示例，它适用于目录中的极少数文件。我发现的所有方法都涉及打开存储容器对象。我是 Python 新手，不确定什么是存储容器对象。我只知道我的大部分文件在尝试使用时都会出错

```
pythoncom.StgOpenStorage(<File Name>, None, flags) 
```

使用少数实际工作的标签，我可以获得主要的元数据标签，如标题、主题、作者、已创建等。

有谁知道存储容器以外的方法来获取元数据？此外，如果有更简单的方法可以使用另一种语言来做到这一点，请务必提出建议。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-22T07:45:26.233

您可以使用 Shell com 对象检索资源管理器中可见的任何元数据：

```
import win32com.client
sh=win32com.client.gencache.EnsureDispatch('Shell.Application',0)
ns = sh.NameSpace(r'm:\music\Aerosmith\Classics Live!')
colnum = 0
columns = []
while True:
    colname=ns.GetDetailsOf(None, colnum)
    if not colname:
        break
    columns.append(colname)
    colnum += 1

for item in ns.Items():
    print (item.Path)
    for colnum in range(len(columns)):
        colval=ns.GetDetailsOf(item, colnum)
        if colval:
            print('\t', columns[colnum], colval) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-08-30T21:40:25.900

我决定编写自己的答案，以尝试结合和澄清上述答案（这极大地帮助了我解决了我的问题）。

我想说有两种方法可以解决这个问题。

**情况1：您知道文件包含哪些元数据（您对哪些元数据感兴趣）。**

在这种情况下，假设您有一个字符串列表，其中包含您感兴趣的元数据。我在这里假设这些标签是正确的（即您对 .txt 文件的像素数不感兴趣）。

```
metadata = ['Name', 'Size', 'Item type', 'Date modified', 'Date created'] 
```

现在，使用 Greedo 和 Roger Upole 提供的代码，我创建了一个函数，该函数分别接受文件的完整路径和名称，并返回包含感兴趣的元数据的字典：

```
def get_file_metadata(path, filename, metadata):
    # Path shouldn't end with backslash, i.e. "E:\Images\Paris"
    # filename must include extension, i.e. "PID manual.pdf"
    # Returns dictionary containing all file metadata.
    sh = win32com.client.gencache.EnsureDispatch('Shell.Application', 0)
    ns = sh.NameSpace(path)

    # Enumeration is necessary because ns.GetDetailsOf only accepts an integer as 2nd argument
    file_metadata = dict()
    item = ns.ParseName(str(filename))
    for ind, attribute in enumerate(metadata):
        attr_value = ns.GetDetailsOf(item, ind)
        if attr_value:
            file_metadata[attribute] = attr_value

    return file_metadata

# *Note: you must know the total path to the file.*
# Example usage:
if __name__ == '__main__':
    folder = 'E:\Docs\BMW'
    filename = 'BMW series 1 owners manual.pdf'
    metadata = ['Name', 'Size', 'Item type', 'Date modified', 'Date created']
    print(get_file_metadata(folder, filename, metadata)) 
```

结果：

```
{'Name': 'BMW series 1 owners manual.pdf', 'Size': '11.4 MB', 'Item type': 'Foxit Reader PDF Document', 'Date modified': '8/30/2020 11:10 PM', 'Date created': '8/30/2020 11:10 PM'} 
```

这是正确的，因为我刚刚创建了文件，并且我使用 Foxit PDF 阅读器作为我的主要 pdf 阅读器。所以这个函数返回一个字典，其中键是元数据标签，值是给定文件的这些标签的值。

**情况 2：您不知道文件包含哪些元数据**

这是一个更艰难的情况，尤其是在最优性方面。我分析了 Roger Upole 提出的代码，基本上，他试图读取`None`文件的元数据，这导致他获得了所有可能的元数据标签的列表。所以我认为硬拷贝这个列表然后尝试读取每个标签可能更容易。这样，一旦完成，您将拥有一个包含文件实际拥有的所有标签的字典。

只需复制我**认为**所有可能的元数据标签，然后尝试从文件中获取所有标签。基本上，只需复制这个 python 列表的声明，并使用上面的代码（用这个新列表替换元数据）：

```
metadata = ['Name', 'Size', 'Item type', 'Date modified', 'Date created', 'Date accessed', 'Attributes', 'Offline status', 'Availability', 'Perceived type', 'Owner', 'Kind', 'Date taken', 'Contributing artists', 'Album', 'Year', 'Genre', 'Conductors', 'Tags', 'Rating', 'Authors', 'Title', 'Subject', 'Categories', 'Comments', 'Copyright', '#', 'Length', 'Bit rate', 'Protected', 'Camera model', 'Dimensions', 'Camera maker', 'Company', 'File description', 'Masters keywords', 'Masters keywords'] 
```

我不认为这是一个很好的解决方案，但另一方面，您可以将此列表保留为全局变量，然后使用它而无需将其传递给每个函数调用。为了完整起见，这里是使用这个新元数据列表的前一个函数的输出：

```
{'Name': 'BMW series 1 owners manual.pdf', 'Size': '11.4 MB', 'Item type': 'Foxit Reader PDF Document', 'Date modified': '8/30/2020 11:10 PM', 'Date created': '8/30/2020 11:10 PM', 'Date accessed': '8/30/2020 11:10 PM', 'Attributes': 'A', 'Perceived type': 'Unspecified', 'Owner': 'KEMALS-ASPIRE-E\\kemal', 'Kind': 'Document', 'Rating': 'Unrated'} 
```

如您所见，返回的字典现在包含文件包含的所有元数据。之所以有效，是因为*if 语句*：

```
if attribute_value: 
```

这意味着只要一个属性等于`None`，它就不会被添加到返回的字典中。

我要强调的是，在处理许多文件的情况下，最好将列表声明为全局/静态变量，而不是每次都将其传递给函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T04:55:55.107

问题在于 Windows 存储文件元数据的方式有两种。您使用的方法适用于 COM 应用程序创建的文件；此数据包含在文件本身中。但是，随着 NTFS5 的引入，任何文件都可以包含元数据作为备用数据流的一部分。因此，成功的文件可能是 COM 应用程序创建的文件，而失败的文件可能不是。

这是处理 COM 应用程序创建的文件的一种可能更可靠的方法：[Get document summary information from any file](http://timgolden.me.uk/python/win32_how_do_i/get-document-summary-info.html)。

使用备用数据流，可以直接读取它们：

```
meta = open('myfile.ext:StreamName').read() 
```

*更新：*好的，现在我认为这些都不相关，因为您关注的是*文档*元数据而不是*文件*元数据。一个问题的清晰度可以带来什么不同：|

试试这个：[如何在 python 中检索 office 文件的作者？](https://stackoverflow.com/questions/7021141/how-to-retrieve-author-of-a-office-file-in-python)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-30T18:22:25.460

Roger Upole 的回答非常有帮助。但是，我还需要阅读“.xls”文件中的“最后保存者”详细信息。

XLS 文件属性可以用`win32com`. 该`Workbook`对象具有`BuiltinDocumentProperties`. [https://gist.github.com/justengel/87bac3355b1a925288c59500d2ce6ef5](https://gist.github.com/justengel/87bac3355b1a925288c59500d2ce6ef5)

```
import os
import win32com.client  # Requires "pip install pywin32"

__all__ = ['get_xl_properties', 'get_file_details']

# https://docs.microsoft.com/en-us/dotnet/api/microsoft.office.tools.excel.workbook.builtindocumentproperties?view=vsto-2017
BUILTIN_XLS_ATTRS = ['Title', 'Subject', 'Author', 'Keywords', 'Comments', 'Template', 'Last Author', 'Revision Number',
                     'Application Name', 'Last Print Date', 'Creation Date', 'Last Save Time', 'Total Editing Time',
                     'Number of Pages', 'Number of Words', 'Number of Characters', 'Security', 'Category', 'Format',
                     'Manager', 'Company', 'Number of Btyes', 'Number of Lines', 'Number of Paragraphs',
                     'Number of Slides', 'Number of Notes', 'Number of Hidden Slides', 'Number of Multimedia Clips',
                     'Hyperlink Base', 'Number of Characters (with spaces)']

def get_xl_properties(filename, xl=None):
    """Return the known XLS file attributes for the given .xls filename."""
    quit = False
    if xl is None:
        xl = win32com.client.DispatchEx('Excel.Application')
        quit = True

    # Open the workbook
    wb = xl.Workbooks.Open(filename)

    # Save the attributes in a dictionary
    attrs = {}
    for attrname in BUILTIN_XLS_ATTRS:
        try:
            val = wb.BuiltinDocumentProperties(attrname).Value
            if val:
                attrs[attrname] = val
        except:
            pass

    # Quit the excel application
    if quit:
        try:
            xl.Quit()
            del xl
        except:
            pass

    return attrs

def get_file_details(directory, filenames=None):
    """Collect the a file or list of files attributes.
    Args:
        directory (str): Directory or filename to get attributes for
        filenames (str/list/tuple): If the given directory is a directory then a filename or list of files must be given
    Returns:
         file_attrs (dict): Dictionary of {filename: {attribute_name: value}} or dictionary of {attribute_name: value}
            if a single file is given.
    """
    if os.path.isfile(directory):
        directory, filenames = os.path.dirname(directory), [os.path.basename(directory)]
    elif filenames is None:
        filenames = os.listdir(directory)
    elif not isinstance(filenames, (list, tuple)):
        filenames = [filenames]

    if not os.path.exists(directory):
        raise ValueError('The given directory does not exist!')

    # Open the com object
    sh = win32com.client.gencache.EnsureDispatch('Shell.Application', 0)  # Generates local compiled with make.py
    ns = sh.NameSpace(os.path.abspath(directory))

    # Get the directory file attribute column names
    cols = {}
    for i in range(512):  # 308 seemed to be max for excel file
        attrname = ns.GetDetailsOf(None, i)
        if attrname:
            cols[i] = attrname

    # Get the information for the files.
    files = {}
    for file in filenames:
        item = ns.ParseName(os.path.basename(file))
        files[os.path.abspath(item.Path)] = attrs = {}  # Store attributes in dictionary

        # Save attributes
        for i, attrname in cols.items():
            attrs[attrname] = ns.GetDetailsOf(item, i)

        # For xls file save special properties
        if os.path.splitext(file)[-1] == '.xls':
            xls_attrs = get_xl_properties(item.Path)
            attrs.update(xls_attrs)

    # Clean up the com object
    try:
        del sh
    except:
        pass

    if len(files) == 1:
        return files[list(files.keys())[0]]
    return files

if __name__ == '__main__':
    import argparse

    P = argparse.ArgumentParser(description="Read and print file details.")
    P.add_argument('filename', type=str, help='Filename to read and print the details for.')
    P.add_argument('-v', '--show-empty', action='store_true', help='If given print keys with empty values.')
    ARGS = P.parse_args()

    # Argparse Variables
    FILENAME = ARGS.filename
    SHOW_EMPTY = ARGS.show_empty
    DETAILS = get_file_details(FILENAME)

    print(os.path.abspath(FILENAME))
    for k, v in DETAILS.items():
        if v or SHOW_EMPTY:
            print('\t', k, '=', v) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-23T20:31:20.340

**Windows API 代码包**可与**[Python for .NET](https://pythonnet.github.io/)**一起使用，以读取/写入文件元数据。

1.  [下载适用于WindowsAPICodePack-Core](https://www.nuget.org/packages/WindowsAPICodePack-Core/1.1.2)和 [WindowsAPICodePack-Shell](http://WindowsAPICodePack-Shell)的 NuGet 包

2.  *使用 7-Zip 等压缩实用程序将.nupkg*文件 提取到脚本路径或系统路径变量中定义的某个位置。

3.  使用 .NET 安装 Python `pip install pythonnet`。

获取和设置 MP4 视频标题的示例代码：

```
import clr
clr.AddReference("Microsoft.WindowsAPICodePack")
clr.AddReference("Microsoft.WindowsAPICodePack.Shell")
from Microsoft.WindowsAPICodePack.Shell import ShellFile

# create shell file object
f = ShellFile.FromFilePath(r'movie..mp4')

# read video title
print(f.Properties.System.Title.Value)

# set video title
f.Properties.System.Title.Value = 'My video' 
```

破解以检查可用属性：

```
dir(f.Properties.System) 
```

# youtube - 如何为视频（针对 Pinterest）创建“固定”URL？

> ID：12521528
> 
> 赞同：2
> 
> 时间：2012-09-20T21:58:09.590
> 
> 标签：youtube, vimeo, pinterest

我正在创建动态 WordPress“固定”按钮并让它在图片上工作。

例如，当我生成这个 URL 时，它会启动 pinterest 的 pin it 页面：

```
http://pinterest.com/pin/create/button/?url=http%3A%2F%2Fwww.mywebsite.com%2Ftest-post%2F&media=http://www.mywebsite.com/wp-content/uploads/2012/09/picture.jpg&description=Test+Post 
```

我该如何为 Vimeo 或 Youtube 视频执行此操作？

```
http://pinterest.com/pin/create/button/?url=http%3A%2F%2Fwww.mywebsite.com%2Ftest-post%2F&media=________????_________&description=Test+Post 
```

我只是在那里放一个 vimeo 或 youtube URL 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-29T20:29:43.153

要固定 Youtube 视频，您只需要将媒体链接设为 youtube 缩略图。然后 Pinterest 会自动将其识别为视频。

要获取 youtube 缩略图，您需要从 youtube url 获取视频 ID，如此处的[更多说明](https://stackoverflow.com/questions/2068344/how-to-get-thumbnail-of-youtube-video-link-using-youtube-api)

```
var youtubelink = "http://www.youtube.com/embed/wkBstmXvGtk"
var youtubecode = youtubelink.match(/\/embed\/(.*)/)[1];
var pinimage = 'http://img.youtube.com/vi/' + youtubecode + '/0.jpg'; 
```

我在这里写了一个完整的教程：

[http://thingsilearned.com/things/pin-button](http://thingsilearned.com/things/pin-button)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T01:12:18.760

不幸的是，我认为用于生成基于 Web 的 pin 的脚本无法处理视频。

我使用了以下代码...

```
<a href="http://pinterest.com/pin/create/button/?url=URL&media=MEDIA&description=DESCRIPTION" class="pin-it-button" count-layout="horizontal"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a>

<script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script> 
```

...其中 URL 是指向 YouTube 视频（或永久链接）的链接。问题是，该`pinit.js`脚本没有从 url 解析图像信息，也没有为 pin 提供视频截图。它出现空白，并且没有媒体值，脚本将不会创建图钉。

为了确认问题在`pinit.js`.，我用那个脚本代替`pinmarklet.js`. 该脚本所做的是在页面上创建一个叠加层，其中包含视频的屏幕截图和屏幕截图上的“PIN IT”按钮叠加层。但这可能不是您想要呈现的用户体验类型。

一种可能的选择（您可以通过动态提供 URL、媒体和描述值来解决这个问题）是用视频 URL 提供 URL，创建屏幕截图并将其提供给媒体，最后添加描述。这样做的缺点是，您只会固定图像而不是直接固定视频。

很抱歉成为坏消息的承担者。

# c# - 如何将 PropertyChanged 事件处理程序分配给 ObservableCollection 所有者

> ID：12521542
> 
> 赞同：1
> 
> 时间：2012-09-20T21:59:50.467
> 
> 标签：c#, observablecollection, propertychanged

我需要在 ObservableCollection 的所有者中处理 ObservableCollection 中项目的 PropertyChanged 事件。必须有比以下更优雅的方式：

```
ObservableCollection(MyViewModel) myViewModels = new ObservableCollection<MyViewModel>();
LoadMyViewModels(myViewModels); // populates the collection
foreach (MyViewModel myViewModel in myViewModels)
{
    myViewModel.PropertyChanged += PropertyChangedEventHandler(MyViewModelPropertyChanged);
} 
```

我想将 MyViewModelPropertyChanged 事件处理程序传递给 LoadMyViewModels，这样我就不必遍历集合两次（一次在加载时，一次在事件分配时）。

MyViewModelPropertyChanged 设置反映在 UI 上的包含视图的属性（集合绑定到 TreeView，我需要根据是否已检查项目来启用/禁用 UI 中的字段）。

如果不是所有引用的帖子，我已经看过最多，但我有点迷茫。

上面的代码做了我需要做的事情，但我知道有更好的方法。请引用适当的参考或代码示例。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:06:13.863

A[`BindingList`](http://msdn.microsoft.com/en-us/library/ms132679.aspx)可以给你你需要的...

> [`BindingList`在其项目实施时中继项目更改通知`INotifyPropertyChanged`。](https://stackoverflow.com/questions/4284663/difference-between-observablecollection-and-bindinglist)

# php - 从 PHP 中的 SoapClient 返回中检索特定值

> ID：12521545
> 
> 赞同：4
> 
> 时间：2012-09-20T22:00:06.890
> 
> 标签：php, soap, wamp, soap-client

我使用 PHP 5.3.1 调用网络服务，我的请求如下所示：

```
<?php

$client = new SoapClient('the API wsdl'); 
$param = array(
    'LicenseKey' => 'a guid'
  ); 

$result = $client->GetUnreadIncomingMessages($param);

echo "<pre>";
print_r($result);
echo "</pre>";

?> 
```

这是我得到的回复：

```
stdClass Object
(
[GetUnreadIncomingMessagesResult] => stdClass Object
    (
        [SMSIncomingMessage] => Array
            (
                [0] => stdClass Object
                    (
                        [FromPhoneNumber] => the number
                        [IncomingMessageID] => message ID
                        [MatchedMessageID] => 
                        [Message] => Hello there
                        [ResponseReceiveDate] => 2012-09-20T20:42:14.38
                        [ToPhoneNumber] => another number
                    )

                [1] => stdClass Object
                    (
                        [FromPhoneNumber] => the number
                        [IncomingMessageID] => 
                        [MatchedMessageID] => 
                        [Message] => hello again
                        [ResponseReceiveDate] => 2012-09-20T20:42:20.69
                        [ToPhoneNumber] => another number
                    )

            )

    )

) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T15:10:05.110

要获取要检索的数据，您需要浏览多个嵌套对象。对象是 stdClass 类型的。我的理解是您可以访问 stdClass 中的嵌套对象，但我会将它们转换为数组以使索引更容易。

所以开始：

```
<?php     

$client = new SoapClient('the API wsdl');      
$param = array('LicenseKey' => 'a guid');      
$result = $client->GetUnreadIncomingMessages($param); 
```

你现在有一个 stdClass 类型的 $result vavialble。这其中有一个对象，也是 stdClass 类型，称为“GetUnreadIncomingMessagesResult”。该对象又包含一个名为“SMSIncomingMessage”的数组。该数组包含可变数量的 stdClass 对象，这些对象包含您想要的数据。

因此，我们执行以下操作：

```
$outterArray = ((array)$result);
$innerArray = ((array)$outterArray['GetUnreadIncomingMessagesResult']);
$dataArray = ((array)$innerArray['SMSIncomingMessage']); 
```

现在我们有一个数组来保存我们想要从中提取数据的每个对象。所以我们遍历这个数组来获取持有对象，将持有对象转换为一个数组，然后提取必要的信息。您可以按如下方式执行此操作：

```
foreach($dataArray as $holdingObject)
                {
                $holdingArray = ((array)$holdingObject);
                $phoneNum = $holdingArray['FromPhoneNumber'];
                $message = $holdingArray['Message'];

                echo"<div>$fphone</div>
                     <div>$message</div>";

                }                   
?> 
```

这应该会给你你正在寻找的输出。您可以调整索引 holdingArray 的位置以获取您正在寻找的任何特定信息。

完整的代码如下所示：

```
<?php     

    $client = new SoapClient('the API wsdl');      
    $param = array('LicenseKey' => 'a guid');      
    $result = $client->GetUnreadIncomingMessages($param); 
    $outterArray = ((array)$result);
    $innerArray = ((array)$outterArray['GetUnreadIncomingMessagesResult']);
    $dataArray = ((array)$innerArray['SMSIncomingMessage']);
    foreach($dataArray as $holdingObject)
    {
         $holdingArray = ((array)$holdingObject);
         $phoneNum = $holdingArray['FromPhoneNumber'];
         $message = $holdingArray['Message'];

         echo"<div>$fphone</div>
              <div>$message</div>";
    }
?> 
```

# asp.net-mvc - 一个控制器，每种类型的表有许多视图

> ID：12521548
> 
> 赞同：-1
> 
> 时间：2012-09-20T22:00:19.747
> 
> 标签：asp.net-mvc, entity-framework, c#-4.0, table-per-type

我每个类型结构都有一个表，我想编写一个 mvc razor 应用程序，其中我在 mvc 路由中的唯一参数是主键 ID。从那里应用程序将确定 ID 属于我的 tpt 结构中的哪个类型，然后显示针对特定类型格式化的视图。

此外，根据 ID 的类型，视图还将包含来自 tpt 结构中其他表的与该 ID 相关的信息。

例如 Bob 是一个 ID 为 1234 的人

*   实体 1234 在评论表中有评论
*   实体 1234 在实体关系表中有一个到 Simon 的条目

我已经阅读了许多关于制作基类控制器的文章，但是我的 URL 会从`www.something.burp/1234?`

是否可以有一组具有按类型分隔的索引、编辑、创建、详细信息视图？

只是寻找一些指针或想法供我研究。

谢谢你的帮助。

* * *

MVC4、EF4、C#、SQL 2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:42:54.680

决定做多控制器，如果它在控制器之间移动，对用户来说并不重要。

# python - 使用下载缓存将 PIP 包安装到 Virtualenv

> ID：12521552
> 
> 赞同：9
> 
> 时间：2012-09-20T22:00:55.847
> 
> 标签：python, django, pip, pypi

使用缓存包将 pip 包安装到 virtualenv 的正确方法是什么？我试过设置`--timeout=360`and `--use-mirrors`，但是 pypi 的性能太不稳定了，它经常挂起或断开连接，使部署成为一个废话。

所以，我的计划是使用 --download-cache 选项来预下载所有包档案（但不安装它们），例如：

```
pip install --upgrade --timeout=120 --use-mirrors --no-install --download-cache /usr/local/pip/cache -r pip-requirements.txt 
```

然后在安装到 virtualenv 的过程中指定这个缓存位置，例如：

```
virtualenv /usr/local/myapp/.env
. /usr/local/myapp/.env/bin/activate; pip install --no-download --download-cache /usr/local/pip/cache -r pip-requirements.txt
deactivate 
```

创建缓存非常令人沮丧，因为 pip 似乎不确定地将下载的包保存到缓存目录。具体来说，它拒绝缓存`Django==1.4.0`，说“这个要求已经得到满足”，所以我不得不使用`--force-reinstall`.

使用缓存安装目前是我卡住的地方。运行上面的命令给了我错误：

```
Could not install requirement Django==1.4.0 (from -r pip-requirements.txt (line 1)) because source folder /usr/local/myapp/.env/build/Django does not exist (perhaps --no-download was used without first running an equivalent install with --no-install?)
Storing complete log in /home/chris/.pip/pip.log 
```

这是什么意思？

文件：

```
http%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2FD%2FDjango%2FDjango-1.4.tar.gz
http%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2FD%2FDjango%2FDjango-1.4.tar.gz.content-type 
```

肯定存在于缓存目录中，我使用了该`--no-install`选项。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-21T06:21:09.247

问题似乎是`--download-cache`只能用于指定缓存用于下载，不能用于安装。所以`pip`还是在看 `/usr/local/myapp/.env/build/Django`代替`/usr/local/pip/cache`。你试过搬家吗

```
pip install --upgrade --timeout=120 --use-mirrors --no-install --download-cache /usr/local/pip/cache -r pip-requirements.txt 
```

到创建后`virtualenv`？我想知道这是否会有所帮助。

您可能还想尝试导出`PIP_DOWNLOAD_CACHE`并查看它是否可以在不使用`--download-cache`.

这是我发现的有效方法：

```
pip install --no-install --use-mirrors --download=/DIRNAME PKGNAME
pip install --find-links=file:///DIRNAME --no-index --index-url=file:///dev/null PKGNAME 
```

**现在，实际上**，这是我将使用的工具而不是上述所有工具，它更优雅、更可靠地解决*了所有问题：David* [Wolever](https://github.com/wolever/pip2pi)的 pip2pi。

从文档：

> pip2pi 从 pip 需求构建一个与 PyPI 兼容的包存储库

`pip2pi`允许您使用两个简单的命令创建自己的 PyPI 索引：

1.  要镜像包及其所有要求，请使用`pip2tgz`：

    ```
    $ cd /tmp/; mkdir package/
    $ pip2tgz packages/ httpie==0.2
    ...
    $ ls packages/
    Pygments-1.5.tar.gz
    httpie-0.2.0.tar.gz
    requests-0.14.0.tar.gz 
    ```

2.  要从上一个目录构建包索引：

    ```
    $ ls packages/
    bar-0.8.tar.gz
    baz-0.3.tar.gz
    foo-1.2.tar.gz
    $ dir2pi packages/
    $ find packages/
    /httpie-0.2.0.tar.gz
    /Pygments-1.5.tar.gz
    /requests-0.14.0.tar.gz
    /simple
    /simple/httpie
    /simple/httpie/httpie-0.2.0.tar.gz
    /simple/Pygments
    /simple/Pygments/Pygments-1.5.tar.gz
    /simple/requests
    /simple/requests/requests-0.14.0.tar.gz 
    ```

3.  要从您在步骤 2 中构建的索引安装，您可以简单地使用：

    ```
    pip install --index-url=file:///tmp/packages/simple/ httpie==0.2 
    ```

奖励：您甚至可以使用`pip2pi`.

# php - 错误报告？从 PHP 导入 .sql 文件并显示错误

> ID：12521555
> 
> 赞同：3
> 
> 时间：2012-09-20T22:00:59.567
> 
> 标签：php, mysql

我正在构建一种将 .SQL 文件从 PHP 导入 MySQL 数据库的方法。这用于执行批量查询。我遇到的问题是错误报告。

```
$command = "mysql -u $dbuser --password='$dbpassword' --host='$sqlhost' $dbname < $file";
exec($command, $output); 
```

这基本上就是我将 .sql 文件导入数据库的方式。问题是我无法知道执行此命令的 PHP 脚本中是否发生任何错误。成功的导入与失败完全没有区别。

我努力了：

*   使用 PHP 的 sql 错误报告功能。
*   将详细参数添加到命令并检查输出。它只是返回 .sql 文件的内容，仅此而已。
*   将错误设置为 .sql 文件中的用户变量并从 PHP 脚本中查询它。

我希望我不会被迫将错误写入临时表。有没有更好的办法？

更新：如果可能的话，如果我能确定发生了什么错误，而不仅仅是如果发生了错误，那将是非常可取的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:32:37.737

```
$command = "mysql -u $dbuser --password='$dbpassword' --host='$sqlhost' $dbname"
  . " < $file 2>&1";
exec($command, $output); 
```

您要查找的错误消息可能会打印到 stderr 而不是 stdout。 `2>&1`导致 stderr 包含在 stdout 中，因此也包含在 $output 中。

更好的是，使用`proc_open`而不是 exec，这使您可以更好地控制进程，包括单独的 stdout 和 stderr 管道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:31:00.963

尝试使用 [shell_exec](http://php.net/manual/en/function.shell-exec.php)

```
$output = shell_exec( "mysql -u $dbuser --password='$dbpassword' --host='$sqlhost' $dbname < $file" );
// parse $output here for errors 
```

从手册：

shell_exec — 通过 shell 执行命令并将完整的输出作为字符串返回

笔记：

当 PHP 在安全模式下运行时，此功能被禁用。

编辑：完整解决方案：

您需要做的是抓住 STDERR 并丢弃 STDOUT。通过在命令末尾添加 '2>&1 1> /dev/null' 来执行此操作。

```
$output = shell_exec( "mysql -u $dbuser --password='$dbpassword' --host='$sqlhost' $dbname < $file 2>&1 1> /dev/null" );
$lines = explode( PHP_EOL, $output );

$errors = array();

foreach( $lines as $line )
{
    if ( strtolower( substr( $line, 0, 5 ) ) == 'error' )
    {
        $errors[] = $line;
    }
}

if ( count( $errors ) )
{
    echo PHP_EOL . 'Errors occurred during import.';
    echo implode( PHP_EOL, $errors );
}
else
{
    echo 'No Errors' . PHP_EOL;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T22:07:36.300

发出 exec 时，shell 将在成功时返回 0，或指示失败的数字。

$result = exec($command, $output);

应该做的伎俩。检查结果并妥善处理。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-20T22:12:42.057

除了查看 PHP 手册之外，您已经完成了所有工作！exec 有一个额外的参数来返回结果

[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

“如果 return_var 参数与输出参数一起存在，则执行命令的返回状态将写入此变量。”

```
exec($command,$output,$result);
if ($result === 0) {
 // success
} else {
 // failure
} 
```

# php - FOSOAuthServerBundle 配置

> ID：12521556
> 
> 赞同：0
> 
> 时间：2012-09-20T22:01:01.463
> 
> 标签：php, symfony, oauth-2.0

尝试配置 FOSOAuthServerBundle 时我真的很迷茫。

我想我已经正确安装了它。实际上，我已经创建了一个用于注册新客户的命令。我已经添加了一个，但是当我`oauth/v2/auth`使用所需的数据时，我得到了错误和错误。现在，我在一个真正停下来：

```
Fatal error: Call to a member function isAuthorizedClient() on a non-object in /Users/pgbonino/Sites/Symfony/vendor/bundles/FOS/OAuthServerBundle/Controller/AuthorizeController.php on line 62 
```

确切的行是带有 if 语句的行：

```
 $event = $this->container->get('event_dispatcher')->dispatch(
        OAuthEvent::PRE_AUTHORIZATION_PROCESS,
        new OAuthEvent($user, $this->getClient())
    );

    if ($event->isAuthorizedClient()) {
        $scope = $this->container->get('request')->get('scope', null);

        return $this->container
            ->get('fos_oauth_server.server')
            ->finishClientAuthorization(true, $user, null, $scope);
    } 
```

以前我遇到过其他错误，但我认为由于论坛、文档和问题而得到解决。但现在我停在这里了。

对此有任何线索吗？

我还在似乎相关的捆绑包中发现了这个已解决的问题。但仍然无法解决我的问题：[https ://github.com/FriendsOfSymfony/FOSOAuthServerBundle/pull/46](https://github.com/FriendsOfSymfony/FOSOAuthServerBundle/pull/46)

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:13:17.177

解决了！

Symfony 2.0 和 2.1 对调度程序的处理方式存在差异。

我在 Symfony2.0 环境下下载了一个 Symfony2.1 版本的 FOSAUthServerBundle。

它在捆绑包本身的几个问题中得到了很好的解释。

# objective-c - 如何在 iOS 6 上将图像发布到 Facebook

> ID：12521564
> 
> 赞同：-1
> 
> 时间：2012-09-20T22:02:09.920
> 
> 标签：objective-c, facebook, ios6

如何在 IOS 6 上将带有一张图片的状态消息发布到 Facebook？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:05:33.840

添加图像

```
 [controller addImage:[UIImage imageNamed:@"fb.png"]]; 
```

这是完整的代码片段

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

    SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
        if (result == SLComposeViewControllerResultCancelled) {

            NSLog(@"Cancelled");

        } else

        {
            NSLog(@"Done");
        }

        [controller dismissViewControllerAnimated:YES completion:Nil];
    };
    controller.completionHandler =myBlock;

    [controller setInitialText:@"Test Post from mobile.safilsunny.com"];
    [controller addURL:[NSURL URLWithString:@"http://www.mobile.safilsunny.com"]];
    [controller addImage:[UIImage imageNamed:@"fb.png"]];

    [self presentViewController:controller animated:YES completion:Nil];

}
else{
    NSLog(@"UnAvailable");
} 
```

如果您想逐步检查将 Facebook 集成到 iOS 中的过程，请查看我的文章，该文章列在我的[博客文章中](http://www.mobile.safilsunny.com/integrating-facebook-ios-6/)

# flask - 防止“&”在Jinja中被转换为“&”

> ID：12521567
> 
> 赞同：8
> 
> 时间：2012-09-20T22:02:43.563
> 
> 标签：flask, jinja2

我正在迭代 Python 中的字典。包含的值`&`将转换为`&amp;`. 我该如何阻止它？它在网页上显示如下：

```
兴趣爱好 闲暇

```

我的代码如下所示：

```
{% for k,v  in vertical.iteritems() %}
    {value: '{{k}}', text: "{{v}}"},
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T00:54:27.183

你可以试试`safe`Jinja 过滤器。

[http://jinja.pocoo.org/docs/templates/#safe](http://jinja.pocoo.org/docs/templates/#safe)

```
{% for k, v in vertical.iteritems() %}
    {value: '{{ k|safe }}', text: "{{ v|safe }}"},
{% endfor %} 
```

# php - 对文件中的单词使用 preg_replace 不起作用

> ID：12521570
> 
> 赞同：0
> 
> 时间：2012-09-20T22:03:13.440
> 
> 标签：php, preg-replace

这是我的来源

```
 $Message = $_GET["message"];
 $Username = htmlspecialchars($_GET["username"]);
 $unix = ($_GET["time"]);
 include 'mcheck.php'; 
$file1 = file_get_contents('filter.txt');
$bad_words = explode(PHP_EOL, $file1);
$compare = explode('', $Message);
foreach ($bad_words as $bad_word)
  $Message = preg_replace('/\b('.$bad_word.')\b/i', "***", $Message);
  echo $Message; 
```

说坏话是`go`

和`$Message = I Like to go to school`

我想要它`echo I Like to *** to school`

但我得到了

```
***I***Like***To******to***school*** 
```

我不知道问题是什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T22:06:10.180

根据输出，您的数组中可能有一个空元素。所以它最终匹配了一个单词边界（`\b`）。

要确认这一点，请添加以下内容以调试您的代码：

```
$bad_words = explode(PHP_EOL, $file1);
print_r($bad_words); 
```

顺便说一句，循环遍历每个*坏词*是一种浪费。一旦您解决了上述问题，我建议您使用带有更改的单个正则表达式。

例如：

```
\b(one|two|three)\b 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T22:07:24.580

你为什么不直接使用`str_replace`

例子

```
$badWords = array("go","school");
$message = " I like to go to school" ;
$newMessage = str_replace($badWords, "***", $message);
echo $newMessage ; 
```

输出

```
 I like to *** to *** 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T22:08:25.000

您的文件很可能以换行符结尾（这是一件好事：*nix 系统上的所有文本文件都应该如此），这意味着 的最后一个元素`explode(PHP_EOL, $file1)`是空的（它是最后一个换行符和文件末尾之间的所有内容，这没什么）。我建议写：

```
$file1 = trim(file_get_contents('filter.txt')); 
```

使用[该`trim`函数](http://php.net/manual/en/function.trim.php)消除最后一个换行符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T22:06:48.850

我认为你需要从爆炸结果数组中删除空字段

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T22:07:56.843

您应该`strtr`用于此目的。

您可以使用 key=>replace 传递数组，这将比 preg_replace 更有效率

除此之外，一定是不好的badwords dic。

# django - 无法将关键字“xxx”解析为字段。选项有：full_name、id、title

> ID：12521572
> 
> 赞同：0
> 
> 时间：2012-09-20T22:03:18.217
> 
> 标签：django, django-models, django-admin, python-2.7

我的一门课遇到了一个奇怪的错误，我不知道为什么。

我有一个等级模型：

```
class SchoolGrade(models.Model):
    title = models.CharField('Grade',max_length=10, null=True, blank=True)
    full_name = models.CharField('Description',max_length=100, null=True, blank=True)

    def __unicode__(self):
        return self.full_name

    class Meta:
        ordering = ('full_name',) 
```

我也有一个视频模型：

```
class Video(models.Model):

    active = models.BooleanField(default=True)    
    title = models.CharField('Gallery Name',max_length=255, null=True, blank=True)
    seo = models.SlugField('SEO Field',max_length=255, null=True, blank=True)    
    description = models.TextField(null=True, blank=True)
    gender = models.CharField(choices=GENDERS, max_length=1, default='u', null=True, blank=True)
    ages = models.ManyToManyField(Age, related_name='videos', null=True, blank=True)
    grades = models.ManyToManyField(SchoolGrade, verbose_name='Grades', related_name='grade_videos', null=True, blank=True) 
```

现在，问题是每当我尝试在管理员中打开任何视频时，都会收到异常错误：

```
FieldError at /admin/videos/video/150/
Cannot resolve keyword 'grade_videos' into field. Choices are: full_name, id, title 
```

上面引用的 Age 模型与 SchoolGrade 模型一样简单：

```
class Age(models.Model):

    name = models.CharField(max_length=25, unique=True)
    slug = models.SlugField(null=True, blank=True)

    def __unicode__(self):
        return self.name

    class Meta:
        ordering = ('name',) 
```

我在这个模型上没有任何错误，只有 SchoolGrade 模型。

最后，在 localhost 服务器上一切正常。这只发生在网络服务器上。Python、数据库和 Django 版本都是相同的。

其他几个人有这个错误，我尝试了他们所有的建议。我想我希望其他人可能有我的确切问题。

先感谢您，

L.

**年龄和学校年级**

```
class AgeAdmin(admin.ModelAdmin):

    list_display = ('name','slug',)
    prepopulated_fields = {"slug" : ('name',)}

class SchoolGradesAdmin(admin.ModelAdmin):

    list_display = ('title','full_name',)

admin.site.register(Age, AgeAdmin)
admin.site.register(SchoolGrade, SchoolGradesAdmin) 
```

**视频**

```
class VideoAdmin(admin.ModelAdmin):

    list_display = ('title','the_cats','the_grades','good_for','widget_name','active','featured','date_released')
    search_fields = ['title','description_markdown',]
    list_filter = ['active','featured','gender','grades','galleries','widget_name']
    prepopulated_fields = {"slug" : ('title',)}
    fieldsets = [
        (None, {'fields': (('active','featured'),'display_order', ('title', 'slug'),'grades','galleries',('gender', 'gender_scale'),'widget_name','good_for','quiz','description_markdown','why_like_markdown')}),
    ]
    formfield_overrides = {
        WYWIWYGField: {'widget': TinyMCE(attrs={'cols': 100, 'rows': 30})},
    }
    inlines = [VideoRankingInline, VideoAssetsInline]

admin.site.register(Video, VideoAdmin) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:11:52.730

答案是使用完全不同的名称从头开始重新创建 SchoolGrade 模型。很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:47:50.853

嗯，也许你忘了运行数据库迁移？

你可以通过`python manage.py migrate --list`在网络服务器上进行检查

# asp.net-mvc - 在控制器中创建多对多模型的模式

> ID：12521574
> 
> 赞同：-1
> 
> 时间：2012-09-20T22:03:28.407
> 
> 标签：asp.net-mvc, entity-framework-4.1

我正在使用 asp.net mvc 3。我有这样的场景：

1.  我有用户模型和组模型。一个用户可以有很多组，一个组可以有很多用户。因此，它是多对多的关系。
2.  我有一个 UserController 和一个 GroupController。
3.  用户可以创建一个新组。
4.  我有存储库模式中描述的 UsersRepository 和 GroupsRepository。
5.  GroupController 有一个 Create(Group newGroup) 动作。
6.  一个用户不得拥有超过 10 个组。
7.  组名必须是唯一的。

问题 1：要处理限制 6，我必须在类 User 上实现 IValidatableObject，如果 User 有超过 10 个组，则生成验证错误。但是，由于 GroupController 的 Create 操作仅接收 Group 作为参数，因此模型绑定器将永远不会调用 User.Validate()。

问题 2：处理限制 7 的唯一方法是针对 Groups 存储库中已经存在的所有 Groups 验证新组名。因此，此验证必须在 GroupsRepository 中。我说得对吗？

毕竟，我觉得我做错了什么。我的问题是：在我的场景中，实现现有用户创建新组的最佳方式是什么？我应该创建像 UserGrougViewModel 这样的视图模型并将其传递给 GroupController 的 Create 操作吗？或者我应该保持 Create(Group newGroup) 操作不变，并在 UserController 上添加一个 CreateGroup(User user) 操作以根据规则 6 验证用户，然后重定向到 GroupController 的操作 Create(Group newGroup)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T23:36:13.110

***问题1：***

不确定是否实现 IValidatableObject，但您可以在用户存储库中创建一个方法，该方法将返回用户所在组的数量。并且，从 GroupController 的 create 方法调用此函数。像这样：

**用户存储库**

* * *

```
public int GetNumberOfGroupsByUserId(int userId)
{
   return context.Users.SingleOrDefault(u=>u.Id==userId).Groups.Count;
} 
```

创建新组时从 GroupController 使用

```
 UserRepository userRepo= new UserRepository();
    if(userRepo.GetNumberOfGroupsByUserId(id)>10)
    {
      //write code to send error message to view saying the user already has more than 10 groups
    }
else
{
 //go ahead and create new group
} 
```

***问题2：***

> 处理限制 7 的唯一方法是针对组存储库中已存在的所有组验证新组名称。因此，此验证必须在 GroupsRepository 中。我说得对吗？

不，验证仍然可以在您的 GroupController（或您的业务层）中进行。就像在您的问题 1 中一样，您可以在 GroupRepository 中创建一个方法，`true`如果数据库中已经存在组名，则返回该方法，否则返回 false。该方法在 GroupRepository 中看起来像这样

```
public bool NameExists(string groupName)
{
 int count=0;
count= context.Groups.Where(g=>g.Name==groupName).Count;
if (count==0)
return false;
else
return true;
} 
```

创建新组时从 GroupController 使用

```
 GroupRepository groupRepo= new GroupRepository();
        if(groupRepo.NameExists(groupName))
        {
          //write code to send error message to view saying a group already exists with same name
        }
    else
    {
     //go ahead and create new group
    } 
```

# python - Python Regex 无法从 wiki 页面中提取信息

> ID：12521575
> 
> 赞同：0
> 
> 时间：2012-09-20T22:03:49.453
> 
> 标签：python, regex

我正在尝试从字符串中获取一段文本。我正在尝试使用：

```
def findPersonInfo(self):
    if (self.isPerson == True):
        regex = re.compile("\{\{persondata(.*)\}\}",re.IGNORECASE|re.MULTILINE|re.UNICODE)
        result = regex.search(self._rawPage)
    if result:
        print 'Match found: ', result.group() 
```

字符串是：（是的，它是一个 wiki 页面）

```
*[http://www.jsc.nasa.gov/Bios/htmlbios/acaba-jm.html NASA biography]

{{NASA Astronaut Group 19}}

{{Persondata
|NAME= Acaba, Joseph Michael "Joe"
|ALTERNATIVE NAMES=
|SHORT DESCRIPTION=[[Hydrogeologist]]
|DATE OF BIRTH={{Birth date and age|1967|5|17}}
|PLACE OF BIRTH=[[Inglewood, California]]
|DATE OF DEATH=
|PLACE OF DEATH=
}}
{{DEFAULTSORT:Acaba, Joseph M.}}
[[Category:1967 births]] 
```

但我一直没有匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:07:45.753

添加`re.DOTALL`到正则表达式选项：

```
In [193]: regex = re.compile(r"{{persondata(.*)}}",re.IGNORECASE|re.MULTILINE|re.UNICODE|re.DOTALL)

In [194]: regex.search(text).group()
Out[194]: '{{Persondata\n|NAME= Acaba, Joseph Michael "Joe"\n|ALTERNATIVE NAMES=\n|SHORT DESCRIPTION=[[Hydrogeologist]]\n|DATE OF BIRTH={{Birth date and age|1967|5|17}}\n|PLACE OF BIRTH=[[Inglewood, California]]\n|DATE OF DEATH=\n|PLACE OF DEATH=\n}}\n{{DEFAULTSORT:Acaba, Joseph M.}}' 
```

`DOTALL`导致`.`匹配任何字符，包括换行符。（没有`DOTALL`,`.`不匹配换行符。）

`MULTILINE`导致`^`匹配行的开头和字符串的开头，以及`$`匹配行的结尾和字符串的结尾。没关系，但这不会影响这里的比赛。

PS。反斜杠不是必需的，因此为了便于阅读，我省略了它们。

聚苯乙烯。如果该`findPersonInfo`方法被多次调用，您可能希望取消对该`re.compile`方法的调用，因为它不依赖于`self`：

```
class Foo:
    info_pat = re.compile("{{persondata(.*)}}",
                                  re.IGNORECASE|re.MULTILINE|re.UNICODE)
    def findPersonInfo(self):
        result = None
        if self.isPerson:
            result = self.info_pat.search(self._rawPage)
        if result:
            print 'Match found: ', result.group() 
```

# mysql - MySQL查询不返回所有记录

> ID：12521582
> 
> 赞同：6
> 
> 时间：2012-09-20T22:04:26.123
> 
> 标签：mysql

我的数据库中有几个表，并且正在使用左外连接来连接表并执行查询。问题是，并不是所有匹配的记录都被返回，第一个总是由于某种原因从结果中被跳过。

这是[SQL Fiddle](http://sqlfiddle.com/#!2/7da28/1)的链接，

*架构 + 测试数据：*

```
mysql> select * from main;
+----------+------------+----------------+---------------+-------------+-------------+----------------+----------------+-----------------+------------+------------+----------------+-----------------+---------------+--------------------------+--------------+
| username | date       | water_quantity | water_chilled | smoked_what | smoke_count | sleep_duration | study_duration | screen_duration | loud_level | heat_level | humidity_level | stress_physical | stress_mental | stress_notes             | menstruation |
+----------+------------+----------------+---------------+-------------+-------------+----------------+----------------+-----------------+------------+------------+----------------+-----------------+---------------+--------------------------+--------------+
| test123  | 2012-09-16 |              1 | no            | cigarettes  |          20 |            480 |              0 |             420 |          2 |          7 |              7 |               6 |             4 | Roamed a lot on the bike | no           |
| test123  | 2012-09-13 |              2 | no            | cigarettes  |          12 |            300 |              0 |               0 |          1 |          1 |              1 |               6 |             3 | met friends              | no           |
+----------+------------+----------------+---------------+-------------+-------------+----------------+----------------+-----------------+------------+------------+----------------+-----------------+---------------+--------------------------+--------------+
2 rows in set (0.00 sec)

mysql> select * from food;
+----------+------------+--------------+
| username | date       | food         |
+----------+------------+--------------+
| test123  | 2012-09-16 | rice         |
| test123  | 2012-09-16 | pizza        |
| test123  | 2012-09-16 | french fries |
| test123  | 2012-09-16 | burger       |
| test123  | 2012-09-13 | naan         |
| test123  | 2012-09-13 | fried rice   |
| test123  | 2012-09-13 | lemon juice  |
+----------+------------+--------------+
7 rows in set (0.00 sec)

mysql> select * from alcohol;
+----------+------------+--------------+------------------+
| username | date       | alcohol_type | alcohol_quantity |
+----------+------------+--------------+------------------+
| test123  | 2012-09-16 | beer         |                0 |
| test123  | 2012-09-16 | beer_ale     |                0 |
| test123  | 2012-09-16 | absinthe     |                0 |
| test123  | 2012-09-13 | rum          |                0 |
| test123  | 2012-09-13 | tequila      |                0 |
+----------+------------+--------------+------------------+
5 rows in set (0.00 sec)

mysql> select * from headache;
+----------+------------+-----------+----------+---------------------+
| username | date       | intensity | duration | notes               |
+----------+------------+-----------+----------+---------------------+
| test123  | 2012-09-16 |         6 |       12 | something something |
+----------+------------+-----------+----------+---------------------+
1 row in set (0.00 sec)

mysql> select * from headache_areas;
+----------+------------+-----------------+
| username | date       | area            |
+----------+------------+-----------------+
| test123  | 2012-09-16 | left_temple     |
| test123  | 2012-09-16 | right_temple    |
| test123  | 2012-09-16 | behind_left_ear |
+----------+------------+-----------------+
3 rows in set (0.00 sec)

mysql> select * from headache_symptoms;
+----------+------------+-----------+
| username | date       | symptoms  |
+----------+------------+-----------+
| test123  | 2012-09-16 | aura      |
| test123  | 2012-09-16 | vertigo   |
| test123  | 2012-09-16 | dizziness |
+----------+------------+-----------+
3 rows in set (0.00 sec)

mysql> select * from alcohol;
+----------+------------+--------------+------------------+
| username | date       | alcohol_type | alcohol_quantity |
+----------+------------+--------------+------------------+
| test123  | 2012-09-16 | beer         |                0 |
| test123  | 2012-09-16 | beer_ale     |                0 |
| test123  | 2012-09-16 | absinthe     |                0 |
| test123  | 2012-09-13 | rum          |                0 |
| test123  | 2012-09-13 | tequila      |                0 |
+----------+------------+--------------+------------------+
5 rows in set (0.00 sec)

mysql> select * from drugs;
+----------+------------+----------+
| username | date       | drug     |
+----------+------------+----------+
| test     | 2012-08-21 | crocin   |
| test     | 2012-08-21 | azithral |
| test     | 2012-08-21 | crocin   |
| test     | 2012-08-21 | azithral |
| test     | 2012-08-21 | crocin   |
| test     | 2012-08-21 | azithral |
| test123  | 2012-09-13 | ching    |
| test123  | 2012-09-13 | chong    |
| test123  | 2012-09-13 | blah1    |
| test123  | 2012-09-13 | blurg2   |
+----------+------------+----------+
10 rows in set (0.00 sec) 
```

*查询我尝试的结果：*

```
mysql> SELECT m.*,
    ->                 GROUP_CONCAT(DISTINCT f.food SEPARATOR ',') AS food, 
    ->                 GROUP_CONCAT(DISTINCT a.alcohol_type SEPARATOR ',') AS alcohol,
    ->                 a.alcohol_quantity,
    ->                 GROUP_CONCAT(DISTINCT d.drug SEPARATOR ',') AS drug,
    ->                 h.intensity AS headache_intensity,
    ->                 h.duration AS headache_duration,
    ->                 GROUP_CONCAT(DISTINCT ha.area) AS headache_areas,
    ->                 GROUP_CONCAT(DISTINCT hs.symptoms) AS headache_symptoms,
    ->                 h.notes AS headache_notes
    ->             FROM main AS m 
    ->                 LEFT OUTER JOIN food AS f ON f.username = m.username AND f.date = m.date 
    ->                 LEFT OUTER JOIN headache AS h ON h.username = m.username AND h.date = m.date
    ->                 LEFT OUTER JOIN headache_symptoms AS hs ON hs.username = m.username AND hs.date = m.date
    ->                 LEFT OUTER JOIN headache_areas AS ha ON ha.username = m.username AND ha.date = m.date
    ->                 LEFT OUTER JOIN drugs AS d ON d.username = m.username AND d.date = m.date
    ->                 LEFT OUTER JOIN alcohol AS a ON a.username = m.username AND a.date = m.date
    ->            ;
+----------+------------+----------------+---------------+-------------+-------------+----------------+----------------+-----------------+------------+------------+----------------+-----------------+---------------+--------------------------+--------------+------------------------------------------------------------+------------------------------------+------------------+--------------------------+--------------------+-------------------+------------------------------------------+------------------------+---------------------+
| username | date       | water_quantity | water_chilled | smoked_what | smoke_count | sleep_duration | study_duration | screen_duration | loud_level | heat_level | humidity_level | stress_physical | stress_mental | stress_notes             | menstruation | food                                                       | alcohol                            | alcohol_quantity | drug                     | headache_intensity | headache_duration | headache_areas                           | headache_symptoms      | headache_notes      |
+----------+------------+----------------+---------------+-------------+-------------+----------------+----------------+-----------------+------------+------------+----------------+-----------------+---------------+--------------------------+--------------+------------------------------------------------------------+------------------------------------+------------------+--------------------------+--------------------+-------------------+------------------------------------------+------------------------+---------------------+
| test123  | 2012-09-16 |              1 | no            | cigarettes  |          20 |            480 |              0 |             420 |          2 |          7 |              7 |               6 |             4 | Roamed a lot on the bike | no           | rice,pizza,french fries,burger,naan,fried rice,lemon juice | beer,beer_ale,absinthe,rum,tequila |                0 | ching,chong,blah1,blurg2 |                  6 |                12 | left_temple,right_temple,behind_left_ear | aura,vertigo,dizziness | something something |
+----------+------------+----------------+---------------+-------------+-------------+----------------+----------------+-----------------+------------+------------+----------------+-----------------+---------------+--------------------------+--------------+------------------------------------------------------------+------------------------------------+------------------+--------------------------+--------------------+-------------------+------------------------------------------+------------------------+---------------------+
1 row in set (0.00 sec) 
```

它没有显示表中的其他记录。有人可以帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:34:10.247

它准确地输出你“要求它”做的事情（通过使用`group concat`）：

```
USERNAME    |...| FOOD                                                       | ALCOHOL  ...
+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +
test123     |...| rice,pizza,french fries,burger,naan,fried rice,lemon juice |  beer,beer_ale,absinthe,rum,tequila  ... 
```

当您使用`group concat`它时，它将列的所有值连接`grouped`到一个输出字段中。

**更新：**
我想我知道你想要实现什么，因为它在表的两条记录中都是相同的用户名，`main`它将显示为一列，以解决你需要找到这两个不同的第一个字段记录 - 这是`date`. 因此，您所要做的就是添加`GROUP BY m.username, date`到[*查询的末尾*](http://sqlfiddle.com/#!2/7da28/22)。

# c# - 优化控件动画

> ID：12521590
> 
> 赞同：0
> 
> 时间：2012-09-20T22:05:07.337
> 
> 标签：c#, .net, winforms

项目中有实现简单“动画”的代码 - 幻灯片。有pictureBox作为内容单元，有两个按钮可以滑到下一个pictureBox，或者滑到上一个。此代码使用 winforms。

为了实现这个“幻灯片”，两个图片框的位置都会循环变化。但是滑到屏幕上的控件（它的起始位置在屏幕外）不能正确重绘。所以我们尝试将内容面板的刷新添加到循环中（如*this.contentPanel.Refresh()*）。它工作得很好。但是当 QA 在非常慢的虚拟机上测试这个应用程序时，问题就出现了。由于循环中的 refsresh，此动画需要很长时间。

作为快速修复，我们重构了代码以在恒定时间内执行此动画。这么慢的机器可以同时为它制作动画，但不是那么流畅。

**问题是，我们如何优化它？我们如何才能更优化地重绘这个控件？**

# mysql - 导出到文件时比较 SQL 数据库架构

> ID：12521594
> 
> 赞同：0
> 
> 时间：2012-09-20T22:05:32.647
> 
> 标签：mysql, compare, local

我有 2 个正在开发和开发的数据库，我想比较它们，但 phpMyAdmin 没有这个功能。

现在我可以使用一些程序，如 phpStorm、mySQLToad 等，但它们会从本地计算机连接到远程服务器，在我的服务器选项中，我不想允许除本地主机之外的任何连接。

是否有任何工具可以比较文件中的数据库结构，例如我用 phpMyAdmin 将数据库导出到文件 db1.sql 和 db2.sql 我可以比较它们的结构吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:12:17.680

你可以试试 redgate sqlcomprare。 [http://www.red-gate.com/products/sql-development/sql-compare/](http://www.red-gate.com/products/sql-development/sql-compare/)

oracle 也有一个： [http ://www.red-gate.com/products/oracle-development/schema-compare-for-oracle/](http://www.red-gate.com/products/oracle-development/schema-compare-for-oracle/)

# django - Tastypie-nonrel，django，mongodb：嵌套太多

> ID：12521595
> 
> 赞同：4
> 
> 时间：2012-09-20T22:05:38.967
> 
> 标签：django, mongodb, backbone.js, tastypie, django-mongodb-engine

我正在使用 django、backbone.js、tastepie 和 mongodb 开发一个 Web 应用程序。为了使tastepie和django适应mongodb，我使用了django-mongodb-engine和tastepie-nonrel。这个应用程序有一个模型项目，它有一个任务列表。所以它看起来像这样：

```
 class Project(models.Model):
       user = models.ForeignKey(User)
       tasks = ListField(EmbeddedModelField('Task'), null=True, blank=True)

   class Task(models.Model):
       title = models.CharField(max_length=200) 
```

感谢tastepie-nonrel，通过/api/v1/project/:id:/tasks/的GET请求以简单的方式获取项目的任务列表

现在我想用一个评论列表来扩展这个任务模型：

```
 class Task(models.Model):
       title = models.CharField(max_length=200)
       comments = ListField(EmbeddedModelField('Comment'), null=True, blank=True)

   class Comment(models.Model):
       text = models.CharField(max_length=1000)
       owner = models.ForeignKey(User) 
```

这个实现的问题是tastepie-nonrel不支持另一个嵌套，所以不可能简单地向/api/v1/project/:id:/task/:id:/comments/发表评论

另一种方法是只向 /api/v1/project/:id:/task/ 发出一个任务的 PUT 请求，但是如果两个用户决定同时向同一个任务添加评论，这会产生问题，因为最后一个 PUT 将覆盖前一个。

最后一个选项（除了更改tastepie-nonrel）是不将Comment 嵌入Task 中而只保留ForeignKey，因此请求将转到/api/v1/Comment/。我的问题是这是否破坏了使用 MongoDB 的好处（因为它需要交叉查询）？有没有更好的方法呢？

我对堆栈的任何技术都没有什么经验，所以可能是我没有很好地关注这个问题。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T10:10:40.470

看起来你嵌套太多了。也就是说，您可以为美味派创建自定义方法/URL 映射，然后运行自己的逻辑，而不是依赖“自动魔术”美味派。如果您担心评论覆盖问题，那么无论如何您都需要交易。然后，您的代码应该足够健壮以处理失败事务的行为，例如重试。如果您经常锁定一个有许多写入器的大型对象，这肯定会大大限制您的写入，但是，这也指向一个设计问题。

可以稍微缓解这种情况的一种方法是写入中间源，例如任务队列或 redis，然后根据需要转储到注释中。这仅取决于您的解决方案的可靠性/耐用性。任务队列至少会处理失败事务的重试；使用 redis，您可以使用 pub/sub 做一些事情。

您应该考虑有关 MongoDB 的设计 IMO 的一些事项。

*   避免创建过大的整体对象。虽然这是 Mongo 的一个好处，但这取决于你的使用情况。例如，如果您总是将项目作为顶级对象返回，那么随着任务和评论的增长，仅网络流量就会影响性能。

    想象一个非常做作的例子，其中项目特定数据是 10k，每个任务单独是 5k，每个评论单独是 2k，如果你有一个项目有 5 个任务，每个任务有 10 条评论，你说的是 10k + 5*5k + 10 * 2k。对于一个有很多评论的非常活跃的项目，这将是通过网络发送的大量信息。您可以执行切片/投影查询来协调此问题，但有一些限制和影响。

*   上述的推论，根据您的用例构建您的对象。如果您不需要将东西重新组合在一起，它们可以位于不同的集合中。仅仅因为您“认为”您需要将它们重新组合在一起，并不意味着它们需要在同一个提取中检索（尽管这通常是理想的）。

    即使您确实需要一个用例/屏幕中的所有内容，在某些设计中可能的另一种解决方案是使用 AJAX 并行加载内容，甚至在页面加载后通过 JavaScript 延迟加载。例如，您可以在顶部加载任务信息，然后进行异步调用以分别加载评论，类似于 Disqus 或 Livefyre 在其他站点中作为集成的工作方式。这可以帮助解决您的嵌套问题，因为您将摆脱任务/项目级别，只需在每个评论/记录上存储一些 ID，以便能够在集合之间进行查询。

*   请记住，您可能不想一次检索所有评论，如果您有很多评论，您可能会遇到一个文档大小的限制。在最近的 Mongo 版本中，现在的大小更大了，但是无论如何，拥有一条包含大量数据的记录通常是没有意义的，回到上面的第一项。

我的建议是：

1.  如果您担心丢失评论，请使用事务。

2.  如果您担心由于 #1 导致的竞争写入和丢失内容，请添加任务队列/redis/持久的东西。如果没有，请忽略它。如果您失去评论，是世界末日吗？

3.  考虑将特别是评论重组到一个单独的集合中，以缓解您的美味问题。如果需要，加载延迟或并行的东西。

# sql-server-2008 - sql server 导入向导不复制密钥

> ID：12521601
> 
> 赞同：1
> 
> 时间：2012-09-20T22:06:16.817
> 
> 标签：sql-server-2008, ms-access

我想在 SQL Server 中导入/复制 Microsoft Access 数据库。这是我尝试过的。

```
Created a database using SQL Server Management Studio.
Then right click on this new database and tasks -> import wizard.
on first screen selected the type as Access and selected the file .mdb
Then selected SQL Server as destination database.
and selected the tables which I want to copy.
I also checked the identity enable to true.

The problem is it copied all the table but the keys are not copied.... 
```

任何人都可以帮忙。我正在使用 sql server 2008。

谢谢。

# c# - Ruby 中 C# 的 int.TryParse() 方法的等价物是什么？

> ID：12521602
> 
> 赞同：8
> 
> 时间：2012-09-20T22:06:23.810
> 
> 标签：c#, ruby

> **可能重复：**
> [Ruby 中的安全整数解析](https://stackoverflow.com/questions/49274/safe-integer-parsing-in-ruby)

`int.Parse`将字符串转换为整数，但如果字符串无法转换则抛出异常。`int.TryParse`当它无法将字符串转换为 int 时不会抛出错误，而是返回`0`和`bool`表示字符串是否可以转换的 a。

Ruby中有类似的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T22:14:48.867

Ruby 中没有直接的等价物。两个主要选项是：

1.  使用`Integer('42')`. 这更像是 C# 的`Int32.Parse`，因为它会引发错误。
2.  使用[`String.to_i`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-to_i)，即：`"42".to_i`。`0`如果您传入的内容至少不能部分转换为整数，但不会导致错误，这将返回。（前提是您没有提供无效的基数。）将返回字符串的整数部分，如果字符串中不存在整数，则返回 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:08:19.917

Integer(str) 可能是您需要的东西 -`Integer('123')`将返回 123 并`Integer('123a')`抛出异常。

# html - CSS背景图像拉伸与背景图像属性

> ID：12521606
> 
> 赞同：2
> 
> 时间：2012-09-20T22:06:45.323
> 
> 标签：html, css

我需要在屏幕上拉伸背景图像并在此网站上调整大小时适合已删除，有人知道吗？

```
<body>
  <div id="background"></div>
  ...
  </div>
</body> 
```

CSS 文件：

```
html, body { }
body { height:100%; width: 100%; }
#background{ position: fixed; min-height: 1024px; height:100%; min-width: 100%; width: auto; background-repeat: no-repeat; z-index:1 } 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:12:57.870

你会在这里找到你需要的一切：http: [//css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

# android - StartActivity 的类型未定义？

> ID：12521623
> 
> 赞同：1
> 
> 时间：2012-09-20T22:08:02.693
> 
> 标签：android, android-intent

我知道这个问题已经被问过了，但现有的答案对我不起作用。

这是我的代码：

```
 public class OrganizatorActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_organizator);

        Button newText = (Button)findViewById(R.id.newText);

        newText.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent intent = new Intent(OrganizatorActivity.this, NewnoteActivity.class);
                OrganizatorActivity.this.StartActivity(intent);
            }
        });
    }
} 
```

错误：该`StartActivity(Intent)`类型的方法未定义`OrganizatorActivity`

我也试过这个：

```
StartActivity(intent); 
```

**错误**：`StartActivity(Intent)`新类型的方法未定义`View.OnClickListener(){}`

这也不起作用：

```
getApplicationContext().StartActivity(intent); 
```

**错误**：该`StartActivity(Intent)`类型的方法未定义`Context`

我的 API 级别是 8，Android 2.2。

`OrganizatorActivity`是我的主要活动，并且`NewnoteActivity`是我想要以意图打开的活动（从按钮单击调用）。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T22:10:14.343

StartActivity 应该是 startActivity。小写的's'。另外，作为事后的想法，你真的不需要`OrganizatorActivity.this`. 这个范围是隐含的。只是放置`startActivity(Intent)`就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T22:11:23.103

试试这个

```
public class OrganizatorActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_organizator);

    Button newText = (Button)findViewById(R.id.newText);

    final Context context = this; 
    newText.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Intent intent = new Intent(OrganizatorActivity.this, NewnoteActivity.class);
            context.startActivity(intent);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T23:09:57.313

尝试使用`startActivity(intent)`or`context.startActivity(intent)`代替`StartActivity(intent)`. （注意第一个字母，它没有大写）。

更多信息：http: [//developer.android.com/reference/android/content/Context.html#startActivity(android.content.Intent)](http://developer.android.com/reference/android/content/Context.html#startActivity%28android.content.Intent%29)

# android - Android App 显示有关哪个应用程序使用了多少时间的信息

> ID：12521625
> 
> 赞同：1
> 
> 时间：2012-09-20T22:08:04.897
> 
> 标签：android, android-layout, android-intent, android-widget

我正在寻找开发一个应用程序来显示手机上安装的所有其他应用程序的信息以及它们的使用时间。

我想知道的是，

有可能在Android上做这样的应用程序吗？

即使没有用户交互，Android也会在后台运行应用程序，我们能否获得只有用户与应用程序交互的时间？

请在这件事上给予我帮助..

提前致谢。

哈利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T23:18:06.917

SpareParts 应用程序可以做到这一点。幸运的是，SpareParts 是 Android 操作系统的一部分并且是开源的。
尝试在代码中获得一些提示。

源代码在这里可用：[https ://android.googlesource.com/platform/packages/apps/SpareParts/](https://android.googlesource.com/platform/packages/apps/SpareParts/)

将源克隆`git clone https://android.googlesource.com/platform/packages/apps/SpareParts`到您的计算机。

# ios - 通过使用 mergeModelFromBundles 合并两个模型来创建 MOM 时对一个核心数据模型进行版本控制：

> ID：12521626
> 
> 赞同：0
> 
> 时间：2012-09-20T22:08:08.263
> 
> 标签：ios, core-data, core-data-migration

我的应用程序已发布到应用商店。它以一种非正统的方式使用 Core Data。

我的 xCode 项目包含**两个 xcdatamodeld 文件**：userData 和 statisticsData。当我创建 ManagedObjectModel 时，我使用的是 mergeModelFromBundles。这需要我项目中的所有模型并将它们组合成一个模型。这允许我拥有一个持久性存储，并且我相信这简化了我的代码。

现在，我需要对我的 userData xcdatamodeld 进行版本控制。具体来说，我需要向我的一个实体添加一个字符串属性。

为了创建模型版本，我遵循了[Stian](https://stackoverflow.com/questions/1830079/iphone-core-data-automatic-lightweight-migration)概述的步骤。

我一直在清理项目和构建之间的构建文件夹，但仍然出现错误：

> NSCocoaErrorDomain 代码=134130 “操作无法完成。（Cocoa 错误 134130。）” ...原因=找不到源存储的模型

如果我将模型的当前版本设置为原始模型，应用程序运行良好并读取应用商店版本创建的数据。但是如果我将模型的当前版本设置为更新版本，它就会崩溃。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:52:04.590

If you successfully completed Stian's steps then you have added a new model version and activated it as the "current" version.

In my experience when I have more than one model version I have to switch from using "mom" to "momd".

Have you tried:

```
NSString* userDataPath = [[NSBundle mainBundle] pathForResource:@"User_data2" ofType:@"momd"]; 
```

# php - XML 解析：未捕获的类型错误：对象 [对象对象] 没有方法“建议”

> ID：12521634
> 
> 赞同：0
> 
> 时间：2012-09-20T22:08:56.497
> 
> 标签：php, xml, xml-parsing

```
$results = simplexml_load_string($results);
foreach($results as $result){
    $result_title = $result->label;
    $result_title = preg_replace('#[^a-zA-Z]+Extra Title#', '', $result_title);
    $result_title = ltrim($result_title); 
```

第一个 preg_replace 去掉了 $result->label 末尾的模式（var_dumps 作为 XML 对象）并输出，不是 XML 对象，而是字符串。

这很令人惊讶，因为我认为 preg_replace 只适用于**字符串**而不适用于 XML 对象。$result 中的A`var_dump`显示：

```
object(SimpleXMLElement)#1003 (1) { [0]=> string(31) " Some Text > Extra Title" } 
```

请注意“一些文本”之前的额外空格。但是，第二个`ltrim($result_title);`会导致此错误：

> 未捕获的类型错误：对象 [对象对象] 没有“建议”方法

那我在处理什么？字符串还是对象？以及如何修剪空白？

为第一个空格尝试 preg_replace 也会输出与上述相同的错误。

```
$result_title = preg_replace('/\s/', '', $result_title, 1); 
```

# xslt - 如何使用 XSLT 控制 Spring-WS 命名空间单引号或双引号

> ID：12521635
> 
> 赞同：1
> 
> 时间：2012-09-20T22:09:08.607
> 
> 标签：xslt, spring-ws, saxon, axiom, woodstox

**我想将文档中单个命名空间声明的双引号更改为单引号，同时将所有其他命名空间声明保留为双引号。我怎样才能做到这一点？**

这是来自服务器的响应文档：

> `<?xml version='1.0' encoding='UTF-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><InquiryResponse xmlns="http://www.openuri.org/"><Header><HeaderAttr1>abcd</HeaderAttr1><HeaderAttr2>xxx</HeaderAttr2><HeaderAttr3>string</HeaderAttr3></Header><Body><InquiryResult><ResultItem1>theresulttext</ResultItem1><ResultItem2>abcd</ResultItem2><ResultItem3>0</ResultItem3></InquiryResult></Body></InquiryResponse></soapenv:Body></soapenv:Envelope>`

我需要类似的东西（注意 open:InquiryResponse 没有“）。

> `<?xml version="1.0" encoding="utf-8"?> <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> <SOAP-ENV:Body> <open:InquiryResponse xmlns:open='http://www.openuri.org/'><open:Header><open:HeaderAttr1>abcd</open:HeaderAttr1><open:HeaderAttr2>xxx</open:HeaderAttr2><open:HeaderAttr3>string</open:HeaderAttr3></open:Header><open:Body><open:InquiryResult><open:ResultItem1>theresulttext</open:ResultItem1><open:ResultItem2>abcd</open:ResultItem2><open:ResultItem3>0</open:ResultItem3></open:InquiryResult></open:Body></open:InquiryResponse> </SOAP-ENV:Body> </SOAP-ENV:Envelope>`

我已经能够进行命名空间前缀更改、附加命名空间声明、空白修正、字符集更改，我现在只需要更改这两个字节。

我正在使用 Spring WS + Woodstox + Axiom 构建一个简单的查询 Web 服务。它是现有服务的替代品，我想让它逐字节相同（$$ 原因）。我可以将 XML 转换为相同的类型，但目前我们不知道哪些消费者使用 grep 或正则表达式来查找数据。

到目前为止，我正在尝试使用 XSLT 和 PayloadTransformingInterceptor 来解决这个问题。我也会对其他选项感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:16:37.100

评论非常正确：没有“干净”的编程解决方案可以如此精确地配置低级别。考虑到脆弱性，你最好使用文本修饰；如果这是用于测试等，最有可能的正则表达式会很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:04:06.240

解决方案是放弃 Spring-WS，转而使用 CXF。CXF 允许拦截器在任何处理阶段，因此可以完全访问消息流的字节。丑陋，但工作。构建一个拦截器以在 PRE_STREAM 处挂钩 OutputStream，然后在 PRE_STREAM_ENDING 处进行修复，您将完全控制 SOAP 信封。

谢谢大家的回复。它很糟糕，但它有效，并且当我们有时间正确地做它时很容易断开连接（！！）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:41:40.730

在重新阅读您的问题和示例几次后，我想我理解了这个问题:)

我认为你应该看看[PayloadTransformingInterceptor](http://static.springsource.org/spring-ws/site/apidocs/org/springframework/ws/server/endpoint/interceptor/PayloadTransformingInterceptor.html)。您可以在该拦截器中转换传入和传出消息。该拦截器的典型用法是通过将旧版本的 wsdl 转换为新版本来支持它。这个拦截器可以双向工作 - 在你的情况下只有传出。

我不确定这是否可以通过使用 XSLT 来解决。如果没有，您可以创建自己的拦截器来提供您需要的特定字符串替换功能。

# xslt - XSLT 转换错误

> ID：12521638
> 
> 赞同：0
> 
> 时间：2012-09-20T22:09:43.067
> 
> 标签：xslt

我有以下xml：

```
<RootNode xmlns="http://someurl/path/path/path">
    <Child1>
        <GrandChild1>Value</GrandChild1>
        <!-- Lots more elements in here-->
    </Child1>
</RootNode> 
```

我有以下 xslt：

```
<xsl:stylesheet version="1.0" xmlns="http://someurl/path/path/path" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        <NewRootNode xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
            <NewChild1>
                <xsl:for-each select="RootNode/Child1">
                    <NewNodeNameHere>
                        <xsl:value-of select="GrandChild1"/>
                    </NewNodeNameHere>
                <!-- lots of value-of tags in here -->
                </xsl:for-each>
            </NewChild1>
        </NewRootNode >
    </xsl:template>
</xsl:stylesheet> 
```

**问题：**这是我的结果：

```
<?xml version="1.0" encoding="utf-8"?>
<NewRootNode xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <NewChild1 />
</NewRootNode> 
```

我期待看到：

```
<?xml version="1.0" encoding="utf-8"?>
<NewRootNode xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <NewChild1>
        <NewNodeNameHere>Value</NewNodeNameHere>
        <!-- Other new elements with values from the xml file -->
    </NewChild1>
</NewRootNode> 
```

我缺少应该存在的 NewChild1 内部的信息。

我认为我的for-each选择是正确的，所以我唯一能想到的就是xml中的命名空间和xslt中的命名空间有问题。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:33:48.420

问题是由命名空间引起的。

由于 xml 定义`xmlns="http://someurl/path/path/path"`，它不再位于默认命名空间中。

您可以`xmlns:ns="http://someurl/path/path/path"`使用 xsl 中的名称定义该名称空间，然后在 XPath 表达式中使用该名称。

以下对我有用：

```
<xsl:stylesheet version="1.0" xmlns:ns="http://someurl/path/path/path" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
    <NewRootNode xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <NewChild1>
            <xsl:for-each select="ns:RootNode/ns:Child1">
                <NewNodeNameHere>
                    <xsl:value-of select="ns:GrandChild1"/>
                </NewNodeNameHere>
            <!-- lots of value-of tags in here -->
            </xsl:for-each>
        </NewChild1>
    </NewRootNode >
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:33:18.453

样式表命名空间应该`http://www.w3.org/1999/XSL/Transform`代替`http://someurl/path/path/path`.

此外，由于输入 XML 使用命名空间，所有 XPath 表达式都应该是命名空间限定的：

```
<xsl:template match="/" xmlns:ns1="http://someurl/path/path/path">
   <NewRootNode xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <NewChild1>
         <xsl:for-each select="ns1:RootNode/ns1:Child1">
            <NewNodeNameHere>
               <xsl:value-of select="ns1:GrandChild1"/>
            </NewNodeNameHere>
            <!-- lots of value-of tags in here -->
         </xsl:for-each>
      </NewChild1>
   </NewRootNode>
</xsl:template> 
```

# c# - 签署 EXE 时出现“文件的计算哈希值与清单中指定的不同”错误

> ID：12521642
> 
> 赞同：6
> 
> 时间：2012-09-20T22:09:54.973
> 
> 标签：c#, msbuild, clickonce, msbuild-task

我的 ClickOnce 安装失败并出现错误：

> 文件 WindowsFormsProject.exe 的计算哈希值与清单中指定的不同。

我使用 MSBuild 生成 ClickOnce 部署包。构建脚本中的相关行：

```
<MSBuild Targets="Publish"
         Projects="WindowsFormsProject.csproj"
         ContinueOnError="false" /> 
```

WindowsFormsProject.csproj 有一个对可执行文件进行签名的 Post-Build 步骤，如下所示：

```
signtool sign /a $(ProjectDir)\obj\$(PlatformName)\$(ConfigurationName)\$(TargetFileName) 
```

问题是，当我查看构建日志时，我看到清单是在 Post-Build 事件执行之前生成的。所以哈希码不匹配也就不足为奇了。构建日志中的相关行：

> _CopyManifest 文件：
> 
> WindowsFormsProject -> ...\WindowsFormsProject.application
> 
> ...
> 
> PostBuildEvent：
> 
> 成功签名：...\WindowsFormsProject.exe

所以，问题是：

1.  有没有办法在 <MSBuild> 任务期间生成清单之前对程序集进行签名？
2.  有没有办法在构建完成后重新生成清单（仅清单），以便哈希码再次匹配？

或者，如果您能想出一个不同的解决方案来解决这个问题，我会很感激您的想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T12:26:30.643

如果您使用的是 MSBuild 4，则可以使用**AfterTargets**属性在程序集刚创建后和采取任何进一步步骤之前对其进行签名。删除您的构建后步骤并将此块添加到您的项目中：

```
<Target Name="SignOutput" AfterTargets ="CoreCompile">
  <PropertyGroup>
    <TimestampServerUrl>http://timestamp.verisign.com/scripts/timstamp.dll</TimestampServerUrl>
  <ApplicationDescription>Foo bar</ApplicationDescription>
  <SigningCertificateCriteria>/sha1 578a9486f10ed1118f2b5f428afb842e3f374793</SigningCertificateCriteria>
  </PropertyGroup>
  <ItemGroup>
    <SignableFiles Include="$(ProjectDir)obj\$(PlatformName)\$(ConfigurationName)\$(TargetName)$(TargetExt)" />
  </ItemGroup>
  <GetFrameworkSdkPath>
          <Output
              TaskParameter="Path"
              PropertyName="SdkPath" />
  </GetFrameworkSdkPath>
    <Exec Command="&quot;$(SdkPath)bin\signtool&quot; sign $(SigningCertificateCriteria) /d &quot;$(ApplicationDescription)&quot; /t &quot;$(TimestampServerUrl)&quot; &quot;%(SignableFiles.Identity)&quot;" />
</Target> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-10T17:53:33.883

归功于 Dmitriy 的回答。但是，我不得不对 Dmitry 的回答稍作改动以使其对我有用。具体来说：

*   我为“目标”添加了一个结束标签
*   我使用的是 Windows 8.1，并且必须更改 signtool.exe 路径
*   我正在使用 PFX 文件并且必须指定密码
*   我不需要添加他提供的所有信息

请修改“my_signing_file.pfx”、“mypassword”、“myexe.exe”的值并使其适合您：

```
<Target Name="SignOutput" AfterTargets="CoreCompile">
<Exec Command="&quot;C:\Program Files (x86)\Windows Kits\8.1\bin\x64\signtool.exe&quot; sign /f &quot;$(ProjectDir)my_signing_file.pfx&quot; /p mypassword &quot;$(ProjectDir)obj\$(ConfigurationName)\myexe.exe&quot;" />
</Target> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-06T02:13:04.150

您可以从 VisualStudio 配置程序集和 ClickOnce 清单的签名过程：

1.  右键单击您的项目 > 属性 > 签名。
2.  选中“签署 ClickOnce 清单”并选择要使用的证书。
3.  选中“签署程序集”并选择要使用的证书。
4.  保存所有更改并再次发布。

当您使用 MsBuild 构建时，所有这些设置都将有效。

**注意：**如果需要，您可以从该屏幕生成自签名证书。

**注意 2：**请记住，您有两个清单“应用程序清单”和“部署清单”都必须使用相同的证书进行签名。

如果您需要在构建后的任何时间重新签署清单，您可以使用[Mage.exe](http://msdn.microsoft.com/en-us/library/acz3y3te(v=vs.110).aspx)。

# powershell - 让 TeamCity 识别 Powershell 消息

> ID：12521647
> 
> 赞同：9
> 
> 时间：2012-09-20T22:10:45.677
> 
> 标签：powershell, teamcity-7.0

如何让 TeamCity 使用 Powershell 在构建日志中输出消息？

我正在使用 TeamCity 7.1。

这是我的 Powershell 构建步骤：![在此处输入图像描述](../Images/a6aca282297f83331aa4082cc3f95243.png)

脚本是：

```
write-host "##teamcity[message 'Getting production info']"

if ($LASTEXITCODE -ne 0) {
    write-host "##teamcity[message 'Production Remote Not Found: Creating Remote']"

    write-host "##teamcity[message 'Pushing to Remote']"
    #git push production

} else {
    write-host "##teamcity[message 'write-output: Production Remote Found: Pushing to Remote']"
    #git push production
} 
```

我在构建日志中得到的唯一信息是：

```
[17:02:58]Skip checking for changes - changes are already collected
[17:02:59]Publishing internal artifacts (1s)
[17:03:00][Publishing internal artifacts] Sending build.start.properties.gz file
[17:02:59]Clearing temporary directory: C:\BuildAgent2\temp\buildTmp
[17:02:59]Checkout directory: C:\BuildAgent2\work\7669b6a04f96908d
[17:02:59]Updating sources: agent side checkout
[17:02:59][Updating sources] VCS Root: Portal Master
[17:02:59][VCS Root: Portal Master] revision: c5c6a9a0d491ee2c64ce98e48b0d67c422237698
[17:02:59][VCS Root: Portal Master] Resetting Portal Master in C:\BuildAgent2\work\7669b6a04f96908d to revision c5c6a9a0d491ee2c64ce98e48b0d67c422237698
[17:02:59]Starting: C:\Windows\sysnative\cmd.exe /c C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -NonInteractive -File C:\BuildAgent2\temp\buildTmp\powershell1349912883332714566.ps1
[17:02:59]in directory: C:\BuildAgent2\work\7669b6a04f96908d
[17:03:00]
[17:03:00]
[17:03:00]
[17:03:00]Process exited with code 0
[17:03:00]Publishing internal artifacts
[17:03:00][Publishing internal artifacts] Sending build.finish.properties.gz file
[17:03:00]Build finished 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T09:15:36.537

如[文档](http://confluence.jetbrains.net/display/TCD7/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-ReportingMessagesForBuildLog)“消息”中所述，服务消息可以有多个参数，因此您至少需要指定参数“文本”：`"##teamcity[message text='Getting production info']"`

您的脚本将是

```
write-host "##teamcity[message text='Getting production info']"

if ($LASTEXITCODE -ne 0) {
    write-host "##teamcity[message text='Production Remote Not Found: Creating Remote']"

    write-host "##teamcity[message text='Pushing to Remote']"
    #git push production

} else {
    write-host "##teamcity[message text='write-output: Production Remote Found: Pushing to Remote']"
    #git push production
} 
```

# c++ - cin.getline() 跳过

> ID：12521648
> 
> 赞同：2
> 
> 时间：2012-09-20T22:10:52.293
> 
> 标签：c++, getline, cin

好的，这是一个非常简单的问题：在以下代码部分中，“cin.getline()”没有运行：

```
cout<< "Specify USB drive letter: ";
char usbD[1];
char outputLoc [40];
cin.getline(usbD, 1, '\n');
cout<< "\n" << usbD << "\n"; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:18:56.627

您需要 usbD[2] - 用于 string 的字母和结尾`'\0'`。

来自[http://www.cplusplus.com/reference/iostream/istream/getline/](http://www.cplusplus.com/reference/iostream/istream/getline/)

*   istream& getline (char* s, streamsize n);
*   istream& getline (char* s, streamsize n, char delim );

> ```
> s
>     A pointer to an array of characters where the string is stored as a c-string.
> 
> n
>     Maximum number of characters to store (including the terminating null character). 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T22:26:21.297

您需要 2 个空格来存储单个字符的字符串，这是因为 c++ 使用 a`\0`来分隔字符串。您可以按如下方式更改代码：

```
cout<< "Specify USB drive letter: ";
char usbD[2];
char outputLoc [40];
cin.getline(usbD, 2, '\n'); // the 2 here will be the drive letter and the ending \0
cout<< "\n" << usbD << "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T22:21:36.067

@PiotrNycz 是对的，您没有为终止空值留出空间。但是，如果您只需要一个字符，则没有理由使用数组。

```
char usbD;
cin.get(usbD); 
```

# python - 扫描阅读框 [3] Python

> ID：12521650
> 
> 赞同：2
> 
> 时间：2012-09-20T22:10:55.577
> 
> 标签：python, list, frame

我正在尝试编写一个脚本，该脚本可以使用 3 的阅读框来检测某个模式，然后从该序列中，以 3 的倍数找到另一个模式

```
sequence = 'TCATGAGGCTTTGGTAAATAT' 
```

我需要它：

...使用阅读框 3 进行扫描，直到找到所需的模式（即“ATG”）

...标记原始序列中第一个模式（'ATG'）开始的位置和第二个模式开始的位置（'TAA'）。在这种情况下， 'ATG' 的位置为 3 ， 'TAA' 的位置为 15 。

...创建一个列表，其中每个三元组遵循第一个模式，直到它到达第二个模式“TAA”（即“ATG”、“AGG”、“CTT”、TGG'、“TAA”）

如何构建一个阅读框以 3 组阅读它？我知道一旦我找到了阅读的方法，我可以创建一个 if 语句说

```
reading_frame=[]

for frame in sequence:
    if k == 'ATG':
        reading_frame.append(k) 
```

首先我需要阅读框架

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:19:58.943

您可以首先将您分解`sequence`为一系列 3 元素框架

```
sequence = 'TCATGAGGCTTTGGTAAATAT'
frames = [sequence[i:i+3] for i in range(0,len(sequence),3)]
print "Frames:",frames
frames_before_ATG,frames_after_ATG = frames[:frames.index("ATG")],frames[frames.index("ATG")+1:] 
```

然后迭代`frames`列表，直到找到第一个模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:16:13.770

要找到`ATG`in的第一个位置`sequence`，到目前为止更容易：

```
>>> sequence.find('ATG') 
```

在您的示例中，这给出`2`了模式位置的索引。然后，只需在该位置之后寻找第二个模式：

```
>>> idx_1 = sequence.find('ATG')
>>> idx_2 = sequence[idx_1:].find('TTA') 
```

*（返回位置后`sequence[idx_1:]`的元素）`sequence``idx_1`*。

请记住，`idx_2`偏移量为`idx_1`(即，模式 2 在原始列表中的实际位置是`idx_2+idx_1`。请注意，如果找不到模式，该`.find`方法将返回 -1。您可能需要添加一些测试来处理该问题案子。

找到这两种模式后，您可以将中介列表构建为：

```
>>> subsequence = sequence[idx_1:idx_2+idx_1]
>>> [subsequence[i:i+3] for i in range(0, len(subsequence), 3)] 
```

您可以按照该示例轻松遍历模式列表。

您可能想检查 是否`idx_1%3 == 0`，即是否`idx_1`是三的倍数（假设第一帧从 0 开始）。如果不是，至少您知道序列的开头将被丢弃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T22:42:00.040

```
sequence = 'TCATGAGGCTTTGGTAAATAT'

frame1 = sequence.find('ATG')

my_list = []

for codon in range(len(sequence)):
    next_codon = sequence[frame1:frame1+3]
    my_list.append(next_codon)
    frame1 +=3
    if next_codon == 'TAA':
        break

print my_list 
```

['ATG'，'AGG'，'CTT'，'TGG'，'TAA']

# loops - 如何使用循环来判断字符串是否是回文？

> ID：12521653
> 
> 赞同：0
> 
> 时间：2012-09-20T22:11:25.967
> 
> 标签：loops, palindrome

这就是我必须解决的问题。我需要保留已经写好的内容，但我不知道如何使用循环和 charAt() 来查找回文。输入的是在终端行中写入字符串所需的代码，因此我无法输入任何内容。有什么建议么？

```
import java.io.*;
import java.util.*;

public class Palindrome
{
public static void main (String[] args) throws IOException
{
    try // WE WILL TALK ABOUT EXCEPTIONS EVENTUALLY - JUST PUT ALL YOUR CODE IN THIS TRY BLOCK
    {

        // --------------------------------------------------------------------------------------------------------

        if (args.length == 0) 
        {
            System.out.println("FATAL ERROR: Must enter a word on the command line!\n");
            System.exit(0);
        }

        String word = args[0];  

        boolean isPalindrome=true;  

        // --------------------------------------------------------------------------------------------------------

        // --------------------------------------------------------------------------------------------------------

        if (isPalindrome)
            System.out.println( word + " IS a palindrome." );
        else
            System.out.println( word + " NOT a palindrome." );

    }
    catch ( Exception e ) 
    {
        StringWriter sw = new StringWriter();
        e.printStackTrace(new PrintWriter(sw));
        System.out.println("EXCEPTION CAUGHT: " + sw.toString() );
        System.exit( 0 );
    }
} // END main

} //END CLASS Palindrome 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:13:50.123

*总而言之* ，请`i in 0..n/2`确保这`word[i] == word[someIndexThatDependsOnI]`是*真的*。（也就是说，如果*any* `word[i] == word[someIndexThatDependsOnI]`为*false*则不是回文。使用适当的关键字可以在此时停止循环。）

我将发现留给`someIndexThatDependsOnI`读者，但它涉及到字符串的大小..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T22:16:33.023

```
public bool isPalindrom(String word) {
  for (int i = 0;i < word.length/2; i++) {
     if (word.charAt(i) != word.charat(word.length - i - 1)) {
      return false;
     }
  }
   return true;
} 
```

不过，您必须检查编程错误，因为我现在没有 IDE

干杯

# sql - SQL Management Studio 过滤器值“不存在”在哪里？

> ID：12521657
> 
> 赞同：0
> 
> 时间：2012-09-20T22:11:41.557
> 
> 标签：sql, conditional-statements, not-exists

我加入了两个表（我们称它们为 Hours 和 Target），如果在围绕日期的时间段内存在关联的目标，则希望从第二个表中提取目标。（目标可能是这样的：用户：Joe，目标：70，从：2012 年 1 月 1 日，到：2012 年 5 月 31 日“

到目前为止，这很容易：

我根据“用户”加入了“所有”小时与目标，我输出目标并使用“从”和“到”过滤器：“<=Hours.Date”和“>=Hours.Date”，分别。

问题在于，并非所有用户都可能在任何时间范围内都有目标。在这种情况下，我希望返回 0 的目标。但是，根据条件，根本不返回不符合我上述条件的行。

如何设置返回如下内容的条件：

Target.Target where (Target.From <= Hours.Date and Target.To >= Hours.Date) 或在所有其他情况下为 0

谢谢你！

马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T00:49:52.240

你在追求这样的事情吗？ [http://sqlfiddle.com/#!3/18b5c/1/0](http://sqlfiddle.com/#!3/18b5c/1/0)

理想情况下，您将拥有一个用户表和存储 ID，但我对您所要求的内容的理解应该涵盖您尝试做的事情。

# sql - 如何转义嵌入在 XML 中的字符串以在 SQL Server 2008 XML 字段中使用？

> ID：12521661
> 
> 赞同：0
> 
> 时间：2012-09-20T22:11:51.853
> 
> 标签：sql, xml, tsql

我有以下 SQL 插入语句。

```
insert into [dbo].[Lookup] (XMLField)
        select          
            '<root>' +          
            '<SQL>' + SQLQueryToEscape + '</SQL>' +         
            '</root>' as CustomData         
        from dbo.CustomView 
```

我的困境是 SQLQueryToEscape 中的字符不是 XML 安全的。我需要转义字符串。在 tSQL 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:34:40.893

使用 FOR XML 生成正确的 XML 而不是连接字符串！

```
insert into [dbo].[Lookup] (XMLField)
select SQLQueryToEscape
from dbo.CustomView 
for xml path ('SQL'), root('root') 
```

# azure - Azure CloudDrive HTTPS Uri

> ID：12521664
> 
> 赞同：2
> 
> 时间：2012-09-20T22:12:10.297
> 
> 标签：azure, azure-storage, azure-blob-storage, azure-clouddrive

从[这篇 MSDN 文章中](http://msdn.microsoft.com/en-us/library/gg436003.aspx)，它说连接到存储帐户的**连接字符串**必须是**HTTP 而不是 HTTPS**。

当我使用这个构造函数时：

```
public CloudDrive (
    Uri uri,
    StorageCredentials credentials
) 
```

这是否意味着页面 blob 的**Uri**也必须是 HTTP 而不是 HTTPS？*对于哪个参数（或两者一起*）适合“连接字符串”描述，我有点困惑。

这种情况在开发模拟器中似乎不容易测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:24:47.657

页 blob的`URI`（*认为是连接字符串的服务器部分）表示存储帐户的***命名空间 + 容器 + blob**。`credentials`代表用户/通行证，它与 Azure 云存储服务的连接字符串一起组成`URI`。

`URI`假设您使用的是本地模拟器，它将始终是 HTTP 。

```
CloudStorageAccount storageAccount = CloudStorageAccount.DevelopmentStorageAccount; 
```

部署到 Azure 时，该`URI`方案将是[您在服务配置](http://msdn.microsoft.com/en-us/library/windowsazure/ee758697.aspx)( *ServiceDefinition.csdef / ServiceConfiguration.Cloud.cscfg* ) 中分配的任何内容。

```
CloudStorageAccount storageAccount = CloudStorageAccount.FromConfigurationSetting("CloudDrive.DataConnectionString"); 
```

您只想分配`CloudDrive.DataConnectionString`给 have `DefaultEndpointsProtocol=http`（*如果省略，则为默认值，但您可以是明确的*）。

### 服务定义.csdef

```
<ServiceDefinition>
  <WebRole>
    <!-- .... -->
    <ConfigurationSettings>
      <Setting name="CloudDrive.DataConnectionString" />
    </ConfigurationSettings>
  </WebRole>
</ServiceDefinition> 
```

### 服务配置.Cloud.cscfg

```
<ServiceConfiguration>
  <Role>
    <ConfigurationSettings>
     <Setting name="CloudDrive.DataConnectionString" value="DefaultEndpointsProtocol=http;AccountName=YOURNAMESPACE;AccountKey=YOURKEY" />
    </ConfigurationSettings>
  </Role>
</ServiceConfiguration> 
```

# xslt - 如何防止值被覆盖？

> ID：12521666
> 
> 赞同：0
> 
> 时间：2012-09-20T22:12:17.253
> 
> 标签：xslt, transform, apply-templates

我在转换 XML 消息的某些元素时遇到问题。我需要交换一些值，但是在将最后一个节点的值复制到第一个节点后，我无法达到第一个节点的原始值。

我一直在寻找几个小时，并在我的 XSL 中尝试了几种变体，但没有一个能给出令人满意的结果。我不是一个很有经验的 XSL 程序员，但我相信解决方案不会那么困难。我简化了原始消息来解释问题，我希望你们中的一个可以帮助我解决这个问题。让我通过下面的例子来解释：

来源：

```
<ProcessMessages>
  <Message>
    <SomeNode>Val</SomeNode>
    <SomeNode>Val</SomeNode>
    <Number>100000</Number>
    <ExternalRefID>EXX12345600000001</ExternalRefID>
    <SomeNode>Val</SomeNode>
    <SomeNode>Val</SomeNode>
  </Message>
  <RelatedMessages>
    <Message>     
      <SomeNode>Val</SomeNode>
      <Number>200000</Number>
      <ExternalRefID>EXX12345600000002</ExternalRefID>
      <SomeNode>Val</SomeNode>
    </Message>
    <Message>
      <SomeNode>Val</SomeNode>
      <Number>300000</Number>
      <ExternalRefID>EXX12345600000003</ExternalRefID>
      <SomeNode>Val</SomeNode>
    </Message>
  </RelatedMessages>
</ProcessMessages> 
```

期望的转变：

```
<ProcessMessages>
  <Message>
    <SomeNode>Val</SomeNode>
    <SomeNode>Val</SomeNode>
    <ExternalRefID>EXX12345600000003</ExternalRefID>
    <SomeNode>Val</SomeNode>
    <SomeNode>Val</SomeNode>
  </Message>
  <RelatedMessages>
    <Message>     
      <Number>200000</Number>
      <ExternalRefID>EXX12345600000002</ExternalRefID>
    </Message>
    <Message>
      <Number>100000</Number>
      <ExternalRefID>EXX12345600000001</ExternalRefID>
    </Message>
  </RelatedMessages>
</ProcessMessages> 
```

我的 XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

<xsl:template match="//ProcessMessages/Message/ExternalRefID">
    <xsl:apply-templates select="//ProcessMessages/RelatedMessages/Message[last()]/ExternalRefID"/>
  </xsl:template>
  <xsl:template match="//ProcessMessages/Message/Number">
    <xsl:apply-templates select="//ProcessMessages/RelatedMessages/Message[last()]/Number"/>
  </xsl:template>

  <xsl:template match="//ProcessMessages/RelatedMessages/Message[1]">
    <xsl:element name="Message">
      <xsl:apply-templates select="ExternalRefID"/>
      <xsl:apply-templates select="Number"/>
    </xsl:element>
  </xsl:template>
  <xsl:template match="//ProcessMessages/RelatedMessages/Message[2]">
    <xsl:element name="Message">
      <xsl:apply-templates select="//ProcessMessages/Message/ExternalRefID"/>
      <xsl:apply-templates select="//ProcessMessages/Message/Number"/>
    </xsl:element>
  </xsl:template>  
</xsl:stylesheet> 
```

当前结果

```
<ProcessMessages>
  <Message>
    <SomeNode>Val</SomeNode>
    <SomeNode>Val</SomeNode>
    <Number>100000</Number>
    <ExternalRefID>EXX12345600000001</ExternalRefID>
    <SomeNode>Val</SomeNode>
    <SomeNode>Val</SomeNode>
  </Message>
  <RelatedMessages>
    <Message>
      <ExternalRefID>EXX12345600000002</ExternalRefID>
      <Number>200000</Number>
    </Message>
    <Message>
      <ExternalRefID>EXX12345600000001</ExternalRefID>
      <Number>100000</Number>
    </Message>
  </RelatedMessages>
</ProcessMessages> 
```

请注意，将 的值复制到后，`ProcessMessages/RelatedMessages/Message`我`ProcessMessages/Message`无法达到默认值，`ProcessMessages/Message`因为它似乎被覆盖了。

有任何想法吗？如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T23:15:53.393

不，您没有覆盖输入中的任何内容。XSLT 转换的输出树是与输入分开的对象，并且输入是不可变的。输入中的任何内容都不会被覆盖或更改。

是的，你是对的：你的问题有一个简单的解决方案。

问题是您尝试将 ExternalRefID 和 Number of /ProcessMessages/Message 复制到 RelatedMessages 元素的末尾采用以下形式：

```
<xsl:apply-templates 
  select="//ProcessMessages
           /Message/ExternalRefID"/>
<xsl:apply-templates 
  select="//ProcessMessages
           /Message/Number"/> 
```

样式表引擎按照您的要求进行操作，并为这些元素寻找模板。它在您的示例代码中找到第二个和第三个模板，这些模板从相关消息中的最后一个消息元素中查找和复制值。

我并不完全清楚如何定义您要构建的转换，但*如果*您尝试做的是（1）将 RelatedMessages 的最终消息移动为 ProcessMessages 的第一个孩子，以及（2）将 ProcessMessages 的第一个孩子移动到 RelatedMessages 的末尾，然后这样的事情会起作用：

```
<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="ProcessMessages">
  <xsl:copy-of 
    select="RelatedMessages/Message[last()]"/>
  <xsl:apply-templates select="RelatedMessages"/>
</xsl:template>

<xsl:template 
  match="RelatedMessages/Message[last()]">
  <xsl:copy-of 
    select="../../self::ProcessMessages
            /Message[1]"/>
</xsl:template> 
```

如果您只想*更改*Number 和 ExternalRefID，则需要适当地修改此代码。

# linux - 关于 grep 命令

> ID：12521668
> 
> 赞同：4
> 
> 时间：2012-09-20T22:12:25.797
> 
> 标签：linux, bash, unix, grep

我正在尝试更改作业中的版权标题。通过使用以下命令，我能够列出所有带有版权标题的文件：

```
 grep -rni copyright * 
```

通过上面的命令，我得到了大约 1000 个文件。

谁能帮我一次更改所有文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:47:54.827

这将对包含“版权”一词的文件应用文本更改（不区分大小写）：

```
for filename in *; do
  if grep -qi "copyright" "$filename"; then
    sed -i'' -e 's/old text/new text/' "$filename"
  fi
done 
```

请注意，这仅适用于*当前*目录。要处理子目录中的文件，您可能需要使用该`find`命令。

如果您可以描述您想要进行的文本更改，我们或许可以建议更精确的方法来实现您的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:15:39.470

```
grep -ril copyright * | xargs sed -i 's/old text/new text/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T23:22:19.847

有一个名为[头痛](http://www.normalesup.org/~simonet/soft/headache/manual.html)的简单工具，我发现它对处理这类问题非常有用。至少在[Debian](http://packages.debian.org/search?keywords=headache&searchon=names&suite=all&section=all)和[Ubuntu](http://packages.ubuntu.com/search?keywords=headache&searchon=names&suite=all&section=all)上可用。

# android - 使用 Fedor onitemclick 实现的 LazyList

> ID：12521672
> 
> 赞同：1
> 
> 时间：2012-09-20T22:12:47.143
> 
> 标签：android, eclipse, image, listview

问这个问题对你们大多数人来说听起来很愚蠢，但我自己无法弄清楚，在找到答案之前无法进行下一个任务。到目前为止，我已经从Fedor 制作的[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)下载了 LazyList 项目，我试图了解它是如何工作的，以便可以在我自己的项目中实现它。我的问题是我不知道在哪里实现 onitemclicklistener 部分：

```
AdapterView.OnItemClickListener onitemClick = new AdapterView.OnItemClickListener()public   void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
noteId= //the item id from the list
Toast.makeText(getApplicationContext(), noteId, 2000).show();
} 
```

我尝试将它添加到我的 mainActivity 中，但是我找不到如何连接到我的 LazyAdapter 来查找要在 toast 中显示的项目 ID。我的项目将在列表中包含一些其他信息（作为表格的几列），因此我希望能够使用项目 ID 从该行访问特定列。用简单的吐司进行测试会有所帮助。谢谢，我希望你不要笑太多，并帮助我一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:24:52.530

我认为您以错误的方式进行操作：[AdapterView.OnItemClickListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)是一个接口，该`onItemClick()`方法采用四个参数...我认为这就是您要执行的操作：

```
ListView listView = (ListView) findViewById(R.id.list);
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        Toast.makeText(getApplicationContext(), id + "", 2000).show();
    }
}); 
```

# python - 给定模块 m 和代码对象 c，“exec c in m.__dict__”做什么？

> ID：12521675
> 
> 赞同：5
> 
> 时间：2012-09-20T22:13:05.937
> 
> 标签：python, exec

我正在编写 Python 3 代码，出于某种原因，我想在内存中运行所有内容，并且在磁盘上不保存任何文件。到目前为止，我通过在这里阅读答案设法解决了几乎所有的问题，但我被困在这些方面：

```
>>> code = compile(source, filename, 'exec')
>>> exec code in module.__dict__ 
```

我真的不明白第二行是做什么的，因为我有“in”与循环连接并测试某些东西是否在某个集合中，但情况并非如此。

那么，第二行是做什么的呢？由于在 py3 中是 exec 函数，而不是关键字，它的 Python 3 等价物是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T22:19:50.433

```
exec code in module.__dict__ 
```

表示执行名为'code'的文件或字符串中的命令，从'code'中获取全局和局部变量，并将'code'中`module.__dict__`创建的局部和全局变量存储到字典中`module.__dict__`

请参阅[http://docs.python.org/reference/simple_stmts.html#exec](http://docs.python.org/reference/simple_stmts.html#exec)

例如：

```
In [51]: mydict={}

In [52]: exec "val1=100" in mydict

In [53]: mydict['val1']
Out[53]: 100 
```

例2：

```
In [54]: mydict={}

In [55]: mydict['val2']=200

In [56]: exec "val1=val2" in mydict

In [57]: mydict.keys()
Out[57]: ['__builtins__', 'val2', 'val1']

In [58]: mydict['val2']
Out[58]: 200

In [59]: mydict['val1']
Out[59]: 200 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T22:19:55.627

在 Python 3 中，该 exec 行将转换为：

```
exec(code, module.__dict__) 
```

Python 3 帮助文件的摘录：

```
exec(object[, globals[, locals]]) 
```

> 在所有情况下，如果省略了可选部分，则代码将在当前范围内执行。如果只提供*全局变量*，它必须是一个字典，它将用于全局变量和局部变量。如果给出了*全局*变量和*局部*变量，则它们分别用于全局变量和局部变量。如果提供，*locals*可以是任何映射对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T22:21:08.063

`in`关键字指定用于全局和局部命名空间的字典。来自 python 2[文档`exec`](http://docs.python.org/reference/simple_stmts.html#the-exec-statement)：

> 在所有情况下，如果省略了可选部分，则代码将在当前范围内执行。如果只`in`指定了之后的第一个表达式，它应该是一个字典，它将用于全局变量和局部变量。

因此，python 3 等效项是`exec(code, module.__dict__)`.

# asp.net-mvc-4 - 如何在注册 ASP.NET MVC4 时收集成员资格、角色和配置文件数据

> ID：12521682
> 
> 赞同：2
> 
> 时间：2012-09-20T22:13:54.657
> 
> 标签：asp.net-mvc-4, asp.net-profiles, asp.net-roles

在注册页面上收集所有相关信息用户、角色和个人资料信息的最佳方式是什么？我目前的方法是在寄存器模型中设置额外的字段：

```
public class RegisterModel
{
    [Required]
    [Display(Name = "Email")]
    [DataType(DataType.EmailAddress)]
    public string UserName { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }

    [Required]
    [Display(Name = "Account type")]
    public string Role { get; set; }
} 
```

请参阅角色作为最后一项。我也计划在这里添加个人资料信息。

然后在我的控制器中我这样做。

```
public ActionResult Register(RegisterModel model)...
 WebSecurity.CreateUserAndAccount(model.UserName, model.Password);
 WebSecurity.Login(model.UserName, model.Password);
 Roles.AddUserToRole(model.UserName, model.Role); 
```

即使它们不是 UserProfile 类的一部分，也可以传递这些附加数据元素吗？我正在做的工作，但它似乎是错误的。

# python - 如何在字典数组中找到一个项目？

> ID：12521683
> 
> 赞同：1
> 
> 时间：2012-09-20T22:13:56.783
> 
> 标签：python, list, dictionary

假设我有这个：

```
list = [ { 'p1':'v1' } ,{ 'p2':'v2' } ,{ 'p3':'v3' } ] 
```

我需要找到 p2 并获得它的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:22:25.043

您可以尝试以下操作...这将返回所有字典中与 givenKey 等效的所有值。

```
ans = [d[key] for d in list if d.has_key(key)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:18:15.287

```
for d in list:
    if d.has_key("p2"):
        return d['p2'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T22:18:29.590

如果这是您的实际代码的样子（每个键都是唯一的），您应该只使用一个字典：

```
things = { 'p1':'v1', 'p2':'v2', 'p3':'v3' }
do_something(things['p2']) 
```

您可以通过将它们合并来将字典列表转换为一个字典`update`（但这会覆盖重复的键）：

```
dict = {}
for item in list:
    dict.update(item)
do_something(dict['p2']) 
```

如果这不可能，您只需要遍历它们：

```
for item in list:
    if 'p2' in item:
        do_something(item['p2']) 
```

如果您期望多个结果，您还可以建立一个列表：

```
p2s = []
for item in list:
    if 'p2' in item:
        p2s.append(item['p2']) 
```

另外，我不建议实际命名任何变量`dict`or `list`，因为这会导致内置`dict()`和`list()`函数出现问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T22:20:41.593

这些不应该存储在列表中，它们应该存储在字典中。但是，由于它们存储在列表中，您可以按原样搜索它们：

```
lst = [ { 'p1':'v1' } ,{ 'p2':'v2' } ,{ 'p3':'v3' } ]
p2 = next(d["p2"] for d in lst if "p2" in d) 
```

或者把它们变成字典：

```
dct = {}
any(dct.update(d) for d in lst)
p2 = dct["p2"] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T22:24:27.527

你也可以使用这个单行：

```
filter(lambda x: 'p2' in x, list)[0]['p2'] 
```

如果你有多个“p2”，这将挑选出第一个；如果你没有，它会引发 IndexError。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-20T22:46:05.937

如果是一次性查找，您可以执行以下操作

```
>>> [i['p2'] for i in my_list if 'p2' in i]
['v2'] 
```

如果您需要查找多个键，您应该考虑将列表转换为可以在恒定时间内进行键查找的东西（例如字典）

```
>>> my_list = [ { 'p1':'v1' } ,{ 'p2':'v2' } ,{ 'p3':'v3' } ]
>>> my_dict = dict(i.popitem() for i in my_list)
>>> my_dict['p2']
'v2' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-20T23:33:48.960

首先将字典列表展平为字典，然后您可以通过键对其进行索引并获取值：

```
{k:v for x in list for k,v in x.iteritems()}['p2'] 
```

# java - java.util.concurrent.LinkedBlockingQueue 不是先进先出？

> ID：12521684
> 
> 赞同：0
> 
> 时间：2012-09-20T22:14:05.037
> 
> 标签：java, fifo, java.util.concurrent, blockingqueue

[java.util.concurrent.LinkedBlockingQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedBlockingQueue.html)的简要描述说它是一个FIFO队列，这意味着如果线程A首先将一堆条目（a1，a2，...an）添加到队列中，然后线程B再添加一些东西进入队列（b1，b2，... bm），然后一些消费者线程应该在从 B 获取这些条目之前耗尽 A 中的所有条目（因此是 FIFO）。但我所看到的是，来自 A 的条目和来自 B 的条目是交错的，即使 B 添加其条目的时间比 A 晚得多。我正在对一些 Tomcat + Jersey 应用程序进行代码审查，它使用单例`LinkedBlockingQueue`加上少数异步工作线程来处理来自客户端的请求条目。

我质疑代码的公平性，因为迟到的请求必须在队列中等待，直到早期的条目全部用完（客户端可以为每个请求提交数千个条目），但令我惊讶的是，迟到的客户得到了他们的回应几乎立即回来。那么这是否意味着`LinkedBlockingQueue`不是FIFO？请帮忙，因为我很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:21:44.960

队列是先进先出的，线程从队列中取出对象的顺序是先进先出。一旦线程获得对象并开始运行方法，FIFO 排序就会丢失。

你怎么知道'来自 A 的条目和来自 B 的这些条目是交错的'？

# php - CakePHP - 根据孩子查找父母

> ID：12521686
> 
> 赞同：2
> 
> 时间：2012-09-20T22:14:34.677
> 
> 标签：php, mysql, cakephp

我有三张表公司、产品和价格。

```
Companies hasMany Products
Products hasMany Prices 
```

我目前正在尝试在这些表格中搜索低于某个价格的产品，我正在尝试的代码是：

```
$results = $this->Product->find('all', array(
    'conditions' => array(
        'Price.price <=' 10
    )
)); 
```

出于某种原因，使用此代码 cakephp 这会带来一个错误：

```
Unknown column 'Price.price' in 'where clause' 
```

我认为这是因为产品有多个价格（它加入的是公司表而不是价格表），谁能告诉我为什么会出错并知道如何让它工作？

**注意**：完成这项工作后，我希望能够根据价格和产品表中的标准查找产品，然后在结果页面中显示所有 3 个数据。

我想过先搜索价格表，然后搜索产品表，但我相信一定有更有效的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:19:35.947

您可以将 adhoc-joins 用于这些类型的查询。Cake 不会为 1:n 或 n:n 关系进行连接，因此您必须手动指定它。

```
$results = $this->Product->find('all', array(
    'joins' => array(
        array(
            'alias' => 'Price',
            'table' => 'prices',
            'foreignKey' => false,
            'conditions' => array('Price.product_id = Product.id'),
        ),
    ),
    'conditions' => array(
        'Price.price <=' => 10,
    ),
)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T22:30:34.883

在你的位置，我会这样做：

```
$results = $this->Product->Price->find('all', array(
    'recursive' => 2,
    'conditions' => array(
        'Price.price <=' => 10
    )
)); 
```

HasMany 不加入表，但 belongsTo 可以。

# jquery - jQuery砌体留下间隙

> ID：12521687
> 
> 赞同：2
> 
> 时间：2012-09-20T22:14:36.267
> 
> 标签：jquery, css-float, jquery-masonry

我正在尝试在一个项目中使用 jQuery Masonry，但它无法正常工作：网格的右上角有一个间隙。我尝试调整网格宽度和边距，这会导致每行一个块或所有块一起运行（但右上角仍然有间隙。）

尽管 Masonry 正在应用其类并按预期为元素分配绝对定位，但实际上看起来并没有重新排列块。

我确信我做错了什么，但现在我不太确定。我从 Stack (http://stackoverflow.com/questions/11695574/jquery-masonry-almost-always-empty-spaces) 上的一个类似问题中得到了一个工作小提琴，并仔细修改它以使用我正在工作的维度，它似乎无法处理这种元素选择。

小提琴：http: [//jsfiddle.net/dVPA9/4/](http://jsfiddle.net/dVPA9/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:19:33.540

好吧，并不是真正解决您的问题，所以我希望您不会对我投反对票。

我一直在使用这两个其他项目并取得了巨大的成功：

*   [https://github.com/yconst/Freetile](https://github.com/yconst/Freetile)
*   [http://www.wookmark.com/jquery-plugin](http://www.wookmark.com/jquery-plugin)

还有：

*   [https://github.com/xlune/jQuery-vGrid-Plugin](https://github.com/xlune/jQuery-vGrid-Plugin)

真挚地，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T07:21:04.287

对于 Masonry 和 Isotope，您需要记住这一切都适用于一个模块，这意味着您的列宽应该遵循最小公约数（以像素为单位）。然后，如果您的元素跨越多列（一个模块），则取决于可用的屏幕空间（您有巨大的元素），第二个元素（比第一个宽得多）不能安装在第一个元素的右侧（比第二个窄得多）。

此外，您正在为砌体#container (#grid) 设置固定宽度，这当然违背了插件的全部目的。

自己看：删除宽度：1104px；在您的#grid 上并将您的浏览器视图放大到小提琴页面上的最大值 - 您会看到如果有空间，第二个（宽黑色）元素最终将适合第一个（窄灰色）元素的右侧。

因此，这一切都归结为为您的列宽找到一个合适的最小公约数，并确保某些元素不会太大并且不会跨越太多列（超过两列）。然后它将起作用。

另请参阅[https://stackoverflow.com/a/11814339/963514](https://stackoverflow.com/a/11814339/963514)和[https://stackoverflow.com/a/11701171/963514](https://stackoverflow.com/a/11701171/963514)以了解对类似“问题”的更多解释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T03:56:01.650

显然这是 Masonry 和类似解决方案的一个不可磨灭的问题，我决定我需要在这里推出自己的解决方案。我还决定这会在 PHP 中更好地处理，因为默认的浮动 DIV 在很多情况下会有很大的差距。

这是我使用的算法，并带有注释来解释细节。这也可以在 jQuery 中轻松完成，但不利的一面是，对于没有 JavaScript 的用户来说，它看起来很讨厌。

```
$LeftPos = 0; //Tracks where we are on the grid. Our item grid is three wide, but some items may use up to three units of space.
  $j = 0; //Using a second counter to track total iterations. This is to prevent infinite loops, either because of future concerns I can't predict or because of someone setting a content block to be wider than the containing grid.

  for ($i = 0; $i < sizeOf($Items); $i++){
    if ($LeftPos == 3){ $LeftPos = 0; } //If we filled the third column on the last iteration, we loop back round.
    if ($Items[$i]['Placed'] !== true){ //If we've already put this object into the new array, skip it.
      if ($Items[$i]['SpanWidth'] + $LeftPos <= 3  || $j > (sizeOf($Items) * 3)){ //If inserting this would push us past the third column, save it for when we have more room. But if we've looped over the entire array three times, chances are we're stuck for some reason so just vomit everything out so the user can look at SOMETHING, even if it's an ugly page.
        $Placed++; //Increment the counter for placed objects.
        $Items[$i]['Placed'] = true; //Set this item as placed, too.
        $NewProducts[$i] = $Items[$i]; //Add the current item to the new array.
        $LeftPos = $LeftPos+ $Items[$i]['SpanWidth']; //And calculate our new position on the grid.
      }
    }

    if (($i+1 == sizeOf($Items) && $Placed < sizeOf($Items))) {$i = 0;} //If we reach the end and we have placed less items than we have total, loop through again.
  } 
```

# regex - 删除类似的行 csh

> ID：12521688
> 
> 赞同：2
> 
> 时间：2012-09-20T22:14:45.503
> 
> 标签：regex, duplicate-removal, csh, similarity

我看过几篇关于删除重复行的文章，但我需要一些更具体的东西。以下是一些原始数据的示例：

```
11111 AA 1  date1
11111 BB 64 date1
11111 BB 64 date2
...
11111 BB 64 date64
11111 BB 64 date1
11111 BB 64 date2
...
11111 BB 64 date64
11111 BB ## date1
11111 BB ## date2
...
11111 BB ## date##
22222 AA 1  date1
22222 BB 64 date1
22222 BB 64 date2
...
22222 BB 64 date64
22222 BB 64 date1
22222 BB 64 date2
...
22222 BB 64 date64
22222 BB ## date1
22222 BB ## date2
...
22222 BB ## date## 
```

注意：其中 ## 是一些 < 64 的数字。

我需要编辑该文件，使其看起来像这样：

```
11111 AA 1  date1
11111 BB 64 date1
11111 BB 64 date1
11111 BB ## date1
22222 AA 1  date1
22222 BB 64 date1
22222 BB 64 date1
22222 BB ## date1 
```

我已经看到了几个使用 awk、sed 或 ed 以及正则表达式来匹配行的第一部分的示例。我的困惑在于“BB 64”和“BB ##”的出现，而不仅仅是删除所有 BB 行，而是删除第一行。

重要信息：在 Solaris v5.8 上运行此 csh 脚本

AA 线在这个问题中并不重要，除了知道它们在那里（我们没有对它们做任何事情）。

到目前为止，这基本上是我所得到的（在查看使用其他语言的示例时仍然存在语法问题，所以如果你能纠正，请做）：

```
sed 'N;(\d{1,8}\sBB\s\d{1,2}.+\n);P;D' filename 
```

如果我没有因为语法而出错，我相信这会删除所有 BB 行，但第一个“BB 64 date1”除外。我认为我上面的 sed 正则表达式基于 uniq 但只匹配行的第一个部分而不是整行，因为我需要每个 BB 的第一个日期（如果每个 11111、22222 有超过 1 个系列的 BB 64等，每个系列的输出应包含相同的 BB 64 行 [只是 date1]）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:17:24.207

似乎`sort -k4,4 | uniq`会做的伎俩？（或者`sort +3`如果 Solaris 版本足够旧。）

# sql-server - 与 T-SQL 中的空字符串进行比较的最快方法是什么？

> ID：12521690
> 
> 赞同：2
> 
> 时间：2012-09-20T22:15:02.633
> 
> 标签：sql-server, tsql, string-comparison, string

我在 SQL Server 环境中工作，大量存储过程，其中许多过程使用 0 和 '' 而不是 Null 来表示没有传递有意义的参数值。

这些参数经常出现在 WHERE 子句中。通常的模式是这样的

```
WHERE  ISNULL(SomeField,'') = 
    CASE @SomeParameter 
        WHEN ''  THEN ISNULL(SomeField,'')
        ELSE @SomeParameter
    END 
```

由于各种原因，对 proc 进行更改比更改调用它的代码要容易得多。那么，鉴于调用代码将为空参数传递空字符串，与空字符串进行比较的最快方法是什么？

我想到的一些方法：

```
@SomeParameter = ''

NULLIF(@SomeParameter,'') IS NULL

LEN(@SomeParameter) = 0 
```

我还考虑过在 proc 的早期检查参数，如果它等于''，则将其设置为 NULL，然后`@SomeParameter IS NULL`在实际的 WHERE 子句中进行测试。

还有哪些其他方法？什么是最快的？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:40:25.050

在 proc 开始时对参数进行排序必须比 where 子句中的多个条件或在一个中使用函数更快。查询越复杂，或者需要过滤的记录越多，增益就越大。

让我害怕的一点是，如果过程参数中缺乏可空性也进入了数据中。如果它在您开始锁定时出现，您的查询将返回“错误”结果。

如果这个产品有一定的寿命，那么我会说容易长期是错误的解决方案，应该在调用应用程序中纠正它。如果没有，那么您可能应该不理会它，因为您所要做的就是从一张地毯下，另一张地毯下扫除乱七八糟的东西……

你将如何测试这些变化，你引入一个小错误的机会，而你的头骨无聊地一次又一次地做出同样的改变，是非常高的。

# c#-4.0 - C# 批量插入 SQLBulkCopy - 如果存在则更新

> ID：12521692
> 
> 赞同：22
> 
> 时间：2012-09-20T22:15:23.693
> 
> 标签：c#-4.0, bulkinsert, sqlbulkcopy

> **可能重复：**
> [SQLBulkCopy“如果存在则插入或更新”的任何方式？](https://stackoverflow.com/questions/4889123/any-way-to-sqlbulkcopy-insert-or-update-if-exists)

我`SQLBulkCopy`用来插入批量记录

如何对已存在的记录执行更新（而不是插入）？这可能`SQLBulkCopy`吗？

这是我的 SQLBulkCopy 代码

```
using (var bulkCopy = new SqlBulkCopy(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString, SqlBulkCopyOptions.KeepNulls & SqlBulkCopyOptions.KeepIdentity))
{
    bulkCopy.BatchSize = CustomerList.Count;
    bulkCopy.DestinationTableName = "dbo.tCustomers";
    bulkCopy.ColumnMappings.Clear();
    bulkCopy.ColumnMappings.Add("CustomerID", "CustomerID");
    bulkCopy.ColumnMappings.Add("FirstName", "FirstName");
    bulkCopy.ColumnMappings.Add("LastName", "LastName");
    bulkCopy.ColumnMappings.Add("Address1", "Address1");
    bulkCopy.ColumnMappings.Add("Address2", "Address2");
    bulkCopy.WriteToServer(CustomerList);
} 
```

申请详情

1.  ASP.net MVC 3.0 Razor 视图引擎
2.  SQL Server 2008

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-21T17:59:01.840

感谢@pst

有了他的建议，这就是我实施的方式，如果有人必须实施类似的话。

批量插入永久临时表

```
 using (var bulkCopy = new SqlBulkCopy(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString, SqlBulkCopyOptions.KeepNulls & SqlBulkCopyOptions.KeepIdentity))
            {
                bulkCopy.BatchSize = CustomerList.Count;
                bulkCopy.DestinationTableName = "dbo.tPermanentTempTable";
                bulkCopy.ColumnMappings.Clear();
                bulkCopy.ColumnMappings.Add("CustomerID", "CustomerID");
                bulkCopy.ColumnMappings.Add("FirstName", "FirstName");
                bulkCopy.ColumnMappings.Add("LastName", "LastName");
                bulkCopy.ColumnMappings.Add("Address1", "Address1");
                bulkCopy.ColumnMappings.Add("Address2", "Address2");
                bulkCopy.WriteToServer(CustomerList);
            } 
```

然后调用存储过程将临时表与实际表合并

```
 using (Entities context = new Entities())
            {
               System.Nullable<int> iReturnValue = context.usp_Customer_BulkUploadMerge(customerid, locationID).SingleOrDefault();
               if (iReturnValue.HasValue)
               {
                   // return was successful!
               }
            } 
```

这就是我在存储过程中使用 Merge 的方式

```
ALTER PROCEDURE usp_Customer_BulkUploadMerge
    (
      @CustomerID INT ,
      @locationID INT
    )
AS 
    BEGIN
    DECLARE @retValue INT
        BEGIN TRY
            IF OBJECT_ID('tCustomers') IS NOT NULL 
                BEGIN
                    BEGIN TRANSACTION MergPatientsTable
                    SET NOCOUNT ON;
                    MERGE dbo.tCustomers AS target
                        USING 
                            ( SELECT    PU.CustomerID ,
                                        PU.LocationID ,
                                        PU.FirstName ,
                                        PU.LastName ,
                                        PU.MiddleInitial ,
                                        PU.Gender ,
                                        PU.DOB

                              FROM      dbo.tPermanentTempTable PU
                              WHERE     PU.CustomerID = @CustomerID
                                        AND PU.LocationID = @locationID
                              GROUP BY  PU.CustomerID ,
                                        PU.LocationID ,
                                        PU.FirstName ,
                                        PU.LastName ,
                                        PU.MiddleInitial ,
                                        PU.Gender ,
                                        PU.DOB 

                            ) AS source ( CustomerID, LocationID, FirstName,
                                          LastName, MiddleInitial, Gender, DOB )
                        ON ( LOWER(target.FirstName) = LOWER(source.FirstName)
                             AND LOWER(target.LastName) = LOWER(source.LastName)
                             AND target.DOB = source.DOB
                           )
                        WHEN MATCHED 
                            THEN 
        UPDATE                SET
                MiddleInitial = source.MiddleInitial ,
                Gender = source.Gender,               
                LastActive = GETDATE()
                        WHEN NOT MATCHED 
                            THEN    
        INSERT  (
                  CustomerID ,
                  LocationID ,
                  FirstName ,
                  LastName ,
                  MiddleInitial ,
                  Gender ,
                  DOB ,
                  DateEntered ,
                  LastActive
                )             VALUES
                ( source.CustomerID ,
                  source.LocationID ,
                  source.FirstName ,
                  source.LastName ,
                  source.MiddleInitial ,
                  source.Gender ,
                  source.DOB ,
                  GETDATE() ,
                  NULL
                );
                    DELETE  PU
                    FROM    dbo.tPermanentTempTable PU
                    WHERE   PU.CustomerID = @CustomerID
                            AND PU.LocationID = @locationID 
                    COMMIT TRANSACTION MergPatientsTable
                    SET @retValue = 1
                    SELECT @retValue
                END
            ELSE 
                BEGIN
                SET @retValue = -1
                    SELECT  @retValue
                END
        END TRY
        BEGIN CATCH
            ROLLBACK TRANSACTION MergPatientsTable
            DECLARE @ErrorMsg VARCHAR(MAX);
            DECLARE @ErrorSeverity INT;
            DECLARE @ErrorState INT;
            SET @ErrorMsg = ERROR_MESSAGE();
            SET @ErrorSeverity = ERROR_SEVERITY();
            SET @ErrorState = ERROR_STATE();
        SET @retValue = 0
        SELECT @retValue
           -- SELECT  0 AS isSuccess
        END CATCH
    END 
```

# multithreading - 多线程实体框架：连接未关闭。连接的当前状态是正在连接

> ID：12521695
> 
> 赞同：25
> 
> 时间：2012-09-20T22:15:54.910
> 
> 标签：multithreading, entity-framework, dbcontext

所以我有一个执行工作流过程的 Windows 服务进程。后端在实体框架之上使用 Repository 和 UnitofWork 模式和 Unity，以及从 edmx 生成的实体类。我不会详细介绍它，因为它不是必需的，但基本上有 5 个工作流程要经过的步骤。一个特定的过程可能在任何时间点的任何阶段（当然是按顺序）。第一步只是为第二步生成数据，第二步通过一个长时间运行的进程验证数据到另一台服务器。然后在那里使用该数据生成一个pdf。对于每个阶段，我们都会生成一个计时器，但是可以配置为允许为每个阶段生成多个计时器。问题就在于此。当我将处理器添加到特定阶段时，它随机出现以下错误：

连接未关闭。连接的当前状态是正在连接。

阅读此内容似乎很明显，这是因为上下文试图从两个线程访问同一个实体。但这就是让我陷入困境的地方。我能找到的所有信息都表明我们应该为每个线程使用一个实例上下文。据我所知，我在做什么（见下面的代码）。我没有使用单例模式或静态或任何东西，所以我不确定为什么会发生这种情况或如何避免它。我已经在下面发布了我的代码的相关部分供您查看。

基础存储库：

```
 public class BaseRepository
{
    /// <summary>
    /// Initializes a repository and registers with a <see cref="IUnitOfWork"/>
    /// </summary>
    /// <param name="unitOfWork"></param>
    public BaseRepository(IUnitOfWork unitOfWork)
    {
        if (unitOfWork == null) throw new ArgumentException("unitofWork");
        UnitOfWork = unitOfWork;
    }

    /// <summary>
    /// Returns a <see cref="DbSet"/> of entities.
    /// </summary>
    /// <typeparam name="TEntity">Entity type the dbset needs to return.</typeparam>
    /// <returns></returns>
    protected virtual DbSet<TEntity> GetDbSet<TEntity>() where TEntity : class
    {

        return Context.Set<TEntity>();
    }

    /// <summary>
    /// Sets the state of an entity.
    /// </summary>
    /// <param name="entity">object to set state.</param>
    /// <param name="entityState"><see cref="EntityState"/></param>
    protected virtual void SetEntityState(object entity, EntityState entityState)
    {
        Context.Entry(entity).State = entityState;
    }

    /// <summary>
    /// Unit of work controlling this repository.       
    /// </summary>
    protected IUnitOfWork UnitOfWork { get; set; }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="entity"></param>
    protected virtual void Attach(object entity)
    {
        if (Context.Entry(entity).State == EntityState.Detached)
            Context.Entry(entity).State = EntityState.Modified;
    }

    protected virtual void Detach(object entity)
    {
        Context.Entry(entity).State = EntityState.Detached;
    }

    /// <summary>
    /// Provides access to the ef context we are working with
    /// </summary>
    internal StatementAutoEntities Context
    {
        get
        {                
            return (StatementAutoEntities)UnitOfWork;
        }
    }
} 
```

StatementAutoEntities 是自动生成的 EF 类。

存储库实现：

```
public class ProcessingQueueRepository : BaseRepository, IProcessingQueueRepository
{

    /// <summary>
    /// Creates a new repository and associated with a <see cref="IUnitOfWork"/>
    /// </summary>
    /// <param name="unitOfWork"></param>
    public ProcessingQueueRepository(IUnitOfWork unitOfWork) : base(unitOfWork)
    {
    }

    /// <summary>
    /// Create a new <see cref="ProcessingQueue"/> entry in database
    /// </summary>
    /// <param name="Queue">
    ///     <see cref="ProcessingQueue"/>
    /// </param>
    public void Create(ProcessingQueue Queue)
    {
        GetDbSet<ProcessingQueue>().Add(Queue);
        UnitOfWork.SaveChanges();
    }

    /// <summary>
    /// Updates a <see cref="ProcessingQueue"/> entry in database
    /// </summary>
    /// <param name="queue">
    ///     <see cref="ProcessingQueue"/>
    /// </param>
    public void Update(ProcessingQueue queue)
    {
        //Attach(queue);
        UnitOfWork.SaveChanges();
    }

    /// <summary>
    /// Delete a <see cref="ProcessingQueue"/> entry in database
    /// </summary>
    /// <param name="Queue">
    ///     <see cref="ProcessingQueue"/>
    /// </param>
    public void Delete(ProcessingQueue Queue)
    {
        GetDbSet<ProcessingQueue>().Remove(Queue);  
        UnitOfWork.SaveChanges();
    }

    /// <summary>
    /// Gets a <see cref="ProcessingQueue"/> by its unique Id
    /// </summary>
    /// <param name="id"></param>
    /// <returns></returns>
    public ProcessingQueue GetById(int id)
    {
        return (from e in Context.ProcessingQueue_SelectById(id) select e).FirstOrDefault();
    }

    /// <summary>
    /// Gets a list of <see cref="ProcessingQueue"/> entries by status
    /// </summary>
    /// <param name="status"></param>
    /// <returns></returns>
    public IList<ProcessingQueue> GetByStatus(int status)
    {
        return (from e in Context.ProcessingQueue_SelectByStatus(status) select e).ToList();
    }

    /// <summary>
    /// Gets a list of all <see cref="ProcessingQueue"/> entries
    /// </summary>
    /// <returns></returns>
    public IList<ProcessingQueue> GetAll()
    {
        return (from e in Context.ProcessingQueue_Select() select e).ToList();
    }

    /// <summary>
    /// Gets the next pending item id in the queue for a specific work        
    /// </summary>
    /// <param name="serverId">Unique id of the server that will process the item in the queue</param>
    /// <param name="workTypeId">type of <see cref="WorkType"/> we are looking for</param>
    /// <param name="operationId">if defined only operations of the type indicated are considered.</param>
    /// <returns>Next pending item in the queue for the work type or null if no pending work is found</returns>
    public int GetNextPendingItemId(int serverId, int workTypeId, int? operationId)
    {
        var id = Context.ProcessingQueue_GetNextPending(serverId, workTypeId,  operationId).SingleOrDefault();
        return id.HasValue ? id.Value : -1;
    }

    /// <summary>
    /// Returns a list of <see cref="ProcessingQueueStatus_dto"/>s objects with all
    /// active entries in the queue
    /// </summary>
    /// <returns></returns>
    public IList<ProcessingQueueStatus_dto> GetActiveStatusEntries()
    {
        return (from e in Context.ProcessingQueueStatus_Select() select e).ToList();
    }
    /// <summary>
    /// Bumps an entry to the front of the queue 
    /// </summary>
    /// <param name="processingQueueId"></param>
    public void Bump(int processingQueueId)
    {
        Context.ProcessingQueue_Bump(processingQueueId);
    }
} 
```

我们使用 Unity 进行依赖注入，一些调用代码例如：

```
#region Members
    private readonly IProcessingQueueRepository _queueRepository;       
    #endregion

    #region Constructors
    /// <summary>Initializes ProcessingQueue services with repositories</summary>
    /// <param name="queueRepository"><see cref="IProcessingQueueRepository"/></param>        
    public ProcessingQueueService(IProcessingQueueRepository queueRepository)
    {
        Check.Require(queueRepository != null, "processingQueueRepository is required");
        _queueRepository = queueRepository;

    }
    #endregion 
```

windows服务中启动定时器的代码如下：

```
 _staWorkTypeConfigLock.EnterReadLock();
        foreach (var timer in from operation in (from o in _staWorkTypeConfig.WorkOperations where o.UseQueueForExecution && o.AssignedProcessors > 0 select o) 
                              let interval = operation.SpawnInternval < 30 ? 30 : operation.SpawnInternval 
                              select new StaTimer
                            {
                                Interval = _runImmediate ? 5000 : interval*1000,
                                Operation = (ProcessingQueue.RequestedOperation) operation.OperationId
                            })
        {
            timer.Elapsed += ApxQueueProcessingOnElapsedInterval;
            timer.Enabled = true;
            Logger.DebugFormat("Queue processing for operations of type {0} will execute every {1} seconds", timer.Operation, timer.Interval/1000);                
        }
        _staWorkTypeConfigLock.ExitReadLock(); 
```

StaTimer 只是定时器添加操作类型的包装器。ApxQueueProcessingOnElapsedInterval 然后基本上只是根据操作将工作分配给进程。

我还将在我们生成任务的地方添加一些 ApxQueueProcessingOnElapsedInterval 代码。

```
 _staTasksLock.EnterWriteLock();
        for (var x = 0; x < tasksNeeded; x++)
        {
            var t = new Task(obj => ProcessStaQueue((QueueProcessConfig) obj),
                             CreateQueueProcessConfig(true, operation), _cancellationToken);

            _staTasks.Add(new Tuple<ProcessingQueue.RequestedOperation, DateTime, Task>(operation, DateTime.Now,t));

            t.Start();
            Thread.Sleep(300); //so there are less conflicts fighting for jobs in the queue table
        }
        _staTasksLock.ExitWriteLock(); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-21T07:33:15.103

看起来您的服务、存储库和上下文应该在应用程序的整个生命周期中都存在，但这是不正确的。您可以同时触发多个计时器。这意味着多个线程将并行使用您的服务，并且它们将在其线程中执行您的服务代码=上下文在多个线程之间共享=>异常，因为上下文不是线程安全的。

唯一的选择是为您要执行的每个操作使用一个新的上下文实例。例如，您可以更改您的类以接受上下文工厂而不是上下文，并为每个操作获取一个新上下文。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-20T23:55:36.387

如果这对任何人都有帮助：

就我而言，我确实确保非线程安全`DbContext`有一个`TransientLifetime`（使用 Ninject），但它仍然导致并发问题！事实证明，在我的一些自定义中，`ActionFilters`我使用依赖注入来访问`DbContext`构造函数中的 ，但是`ActionFilters`有一个生命周期可以使它们在多个请求中实例化，因此没有重新创建上下文。

我通过手动解决`OnActionExecuting`方法而不是构造函数中的依赖关系来修复它，以便它每次都是一个新实例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-26T00:00:34.850

就我而言，我遇到了这个问题，因为我在我的`await`一个 DAL 函数调用之前忘记了关键字。放在`await`那里解决了它。

# joomla - 如何禁用 Joomla 的 VirtueMart 组件的 SEF 分页？

> ID：12521701
> 
> 赞同：0
> 
> 时间：2012-09-20T22:16:38.413
> 
> 标签：joomla, joomla1.5, virtuemart, sef, joomla-sef-urls

是否可以为 VirtueMart 组件禁用 SEF？如果出于某些原因，我不需要分页...

但是，我只需要在分页时禁用它。对于 VM 上的其他链接，我需要分页。

是否可以通过对代码的微小更改来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:38:28.450

首先，我建议您尽快更新您的 joomla 版本，因为在最新版本上修复了一些安全错误。

至于您的问题，请确保您使用的是默认的 joomla .htaccess，并在“按组件”选项卡中转到 sh404sef 配置，并将 Virtuemart 组件（在第 4 个下拉框中）设置为“使用 joomla！router.php”。之后转到“URL 管理器”，删除旧的 sef 网址并应用更改。

安装说明

1.  下载[router.php](http://paulmason.name/media/uploads/blog/virtuemart-sef/virtuemart-sef-router.zip)文件
2.  将[router.php](http://paulmason.name/media/uploads/blog/virtuemart-sef/virtuemart-sef-router.zip)文件放入您的 joomla 安装中的 components/com_virtuemart 文件夹中。 ![在此处输入图像描述](../Images/4e154094347f94b683820e62061bb76f.png)

3.  在全局配置-> 站点-> SEO 设置下在您的 Joomla 管理员中启用 Joomla SEF URL，如下图所示：

![在此处输入图像描述](../Images/d88e445ed544b99f0287d51f85c811b0.png)

特征

1) 所有重要登录页面（产品、类别和制造商）的 SEF URL

2）处理具有相同名称的类别和产品

3) 将 / 字符转换为 - in URL

4）通过选择列表顺序最高的类别来处理一个产品的多个类别

5) 没有重复的 URL

# python - 当所有权正确时，为什么`killpg`会返回“不允许”？

> ID：12521705
> 
> 赞同：8
> 
> 时间：2012-09-20T22:16:53.990
> 
> 标签：python, macos, unix, bsd

我有一些代码，它`fork()`调用`setsid()`孩子，并开始一些处理。如果任何子进程退出（`waitpid(-1, 0)`），我将杀死所有子进程组：

```
child_pids = []
for child_func in child_functions:
    pid = fork()
    if pid == 0:
        setsid()
        child_func()
        exit()
    else:
        child_pids.append(pid)

waitpid(-1, 0)
for child_pid in child_pids:
    try:
        killpg(child_pid, SIGTERM)
    except OSError as e:
        if e.errno != 3: # 3 == no such process
            print "Error killing %s: %s" %(child_pid, e) 
```

但是，有时调用`killpg`会失败并显示“不允许操作”：

```
杀死 22841 时出错：[Errno 1] 不允许操作

```

为什么会发生这种情况？

一个完整的工作示例：

```
从信号导入 SIGTERM
从系统导入退出
从时间导入睡眠
从操作系统导入 *

定义慢（）：
    叉（）
    睡觉(10)

定义快速（）：
    睡觉(1)

child_pids = []
对于 [快、慢、慢、快] 中的 child_func：
    pid = fork()
    如果 pid == 0：
        设置ID（）
        child_func()
        退出(0)
    别的：
        child_pids.append(pid)

waitpid(-1, 0)
对于 child_pids 中的 child_pid：
    尝试：
        killpg(child_pid, SIGTERM)
    除了 OSError 为 e：
        print "错误杀死 %s: %s" %(child_pid, e)

```

产生：

```
$蟒蛇killpg.py
杀死 23293 时出错：[Errno 3] 没有这样的进程
杀死 23296 时出错：[Errno 1] 不允许操作

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T23:51:50.800

我也添加了一些调试（[稍微修改了源代码](http://pastebin.com/6cu9APE2)）。当您尝试杀死已经退出并处于僵尸状态的进程组时，就会发生这种情况。哦，它很容易重复`[fast, fast]`。

```
$ python so.py 
spawned pgrp 6035
spawned pgrp 6036
Reaped pid: 6036, status: 0
 6035  6034  6035 Z    (Python)
 6034   521  6034 S+   python so.py
 6037  6034  6034 S+   sh -c ps -e -o pid,ppid,pgid,state,command | grep -i python
 6039  6037  6034 R+   grep -i python

killing pg 6035
Error killing 6035: [Errno 1] Operation not permitted
 6035  6034  6035 Z    (Python)
 6034   521  6034 S+   python so.py
 6040  6034  6034 S+   sh -c ps -e -o pid,ppid,pgid,state,command | grep -i python
 6042  6040  6034 S+   grep -i python

killing pg 6036
Error killing 6036: [Errno 3] No such process 
```

不知道如何处理。也许您可以将 waitpid 放在一个 while 循环中以获取所有终止的子进程，然后继续 pgkill() 其余的。

但是您的问题的答案是您获得了 EPERM，因为您不允许 killpg 僵尸进程组负责人（至少在 Mac OS 上）。

此外，这在 python 之外是可验证的。如果你在那里休眠，找到其中一个僵尸的 pgrp，并尝试杀死它的进程组，你也会得到 EPERM：

```
$ kill -TERM -6115
-bash: kill: (-6115) - Operation not permitted 
```

确认这也不会在 Linux 上发生。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T00:13:04.547

您显然无法杀死由僵尸组成的进程组。当一个进程退出时，它会变成一个僵尸，直到有人调用`waitpid`它。通常，`init`会接管父母已经死亡的孩子，以避免孤儿僵尸孩子。

因此，从某种意义上说，该进程仍然是“周围”的，但它没有获得 CPU 时间并忽略`kill`直接发送给它的任何命令。但是，如果一个进程组完全由僵尸组成，则行为*似乎*是杀死进程组抛出`EPERM`而不是静默失败。请注意，杀死包含非僵尸的进程组仍然会成功。

演示这一点的示例程序：

```
import os
import time

res = os.fork()

if res:
    time.sleep(0.2)
    pgid = os.getpgid(res)
    print pgid

    while 1:
        try:
            print os.kill(-pgid, 9)
        except Exception, e:
            print e
            break

    print 'wait', os.waitpid(res, 0)

    try:
        print os.kill(-pgid, 9)
    except Exception, e:
        print e

else:
    os.setpgid(0, 0)
    while 1:
        pass 
```

输出看起来像

```
56621
None
[Errno 1] Operation not permitted
wait (56621, 9)
[Errno 3] No such process 
```

父母用 SIGKILL 杀死孩子，然后再试一次。第二次，它得到`EPERM`，所以它等待子进程（收获它并销毁它的进程组）。因此，第三个按预期`kill`产生。`ESRCH`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T23:34:34.680

通过添加更多日志记录，看起来有时 killpg 返回 EPERM 而不是 ESRCH：

```
#!/usr/bin/python

from signal import SIGTERM
from sys import exit
from time import sleep
from os import *

def slow():
    fork()
    sleep(10)

def fast():
    sleep(1)

child_pids = []
for child_func in [fast, slow, slow, fast]:
    pid = fork()
    if pid == 0:
        setsid()
        print child_func, getpid(), getuid(), geteuid()
        child_func()
        exit(0)
    else:
        child_pids.append(pid)

print waitpid(-1, 0)
for child_pid in child_pids:
    try:
        print child_pid, getpgid(child_pid)
    except OSError as e:
        print "Error getpgid %s: %s" %(child_pid, e)      
    try:
        killpg(child_pid, SIGTERM)
    except OSError as e:
        print "Error killing %s: %s" %(child_pid, e) 
```

每当 killpg 因 EPERM 失败时，getpgid 先前已因 ESRCH 失败。例如：

```
<function fast at 0x109950d70> 26561 503 503
<function slow at 0x109950a28> 26562 503 503
<function slow at 0x109950a28> 26563 503 503
<function fast at 0x109950d70> 26564 503 503
(26564, 0)
26561 Error getpgid 26561: [Errno 3] No such process
Error killing 26561: [Errno 1] Operation not permitted
26562 26562
26563 26563
26564 Error getpgid 26564: [Errno 3] No such process
Error killing 26564: [Errno 3] No such process 
```

我不知道*为什么*会发生这种情况——无论是合法行为，还是 Darwin 中的错误（继承自 FreeBSD 或其他）等等。

似乎您可以通过调用`kill(child_pid, 0)`;仔细检查 EPERM 来解决它。如果返回 ESRCH，则没有实际的权限问题。当然，这在代码中看起来很丑：

```
for child_pid in child_pids:
    try:
        killpg(child_pid, SIGTERM)
    except OSError as e:
        if e.errno != 3: # 3 == no such process
            if e.errno == 1:
                try:
                    kill(child_pid, 0)
                except OSError as e2:
                    if e2.errno != 3:
                        print "Error killing %s: %s" %(child_pid, e)
            else:
                print "Error killing %s: %s" %(child_pid, e) 
```

# ios - 注释视图中的子视图未检测到触摸事件

> ID：12521706
> 
> 赞同：1
> 
> 时间：2012-09-20T22:17:01.437
> 
> 标签：ios, ipad, mkannotationview

我有一个大问题。我已经分类`MKAnnotationView`并添加了三个`UIImageViews`，每个都带有一个图像。注释在地图上看起来很好。但是，它们不捕获触摸事件。我已经尝试了所有方法`self.userInteractionEnabled`，`exclusiveTouch`但似乎没有任何效果。

*   (id)initWithAnnotation:(id)注解重用标识符:(NSString *)reuseIdentifier {

    ```
    self = [super initWithAnnotation:annotation reuseIdentifier:reuseIdentifier];
    self.frame = CGRectMake(0, 0, kWidth, kHeight);

    UIImage *image = [UIImage imageNamed:@"geo-icon.png"];

    UIImageView * turbineView = [ [ UIImageView alloc ] initWithFrame:CGRectMake(0.0, 0.0, image.size.width, image.size.height) ];

    UIImageView * mastroView = [ [ UIImageView alloc ] initWithFrame:CGRectMake(20.0, 100.0, image.size.width, image.size.height) ];
    mastroView.image = image;
    mastroView.userInteractionEnabled = NO;
    mastroView.exclusiveTouch = NO;

    [turbineView addSubview:mastroView];

    image = [UIImage imageNamed:@"turbine-noshadow.png"];
    propellerView = [ [ UIImageView alloc ] initWithFrame:CGRectMake(4.0, 82.0, image.size.width, image.size.height) ];
    propellerView.image = image;
    propellerView.userInteractionEnabled = NO;
    propellerView.exclusiveTouch = NO;
    [turbineView addSubview:propellerView];

    image = [UIImage imageNamed:@"arrow.png"];
    UIImageView * arrowView = [ [ UIImageView alloc ] initWithFrame:CGRectMake(32.0, 114.0, image.size.width, image.size.height) ];
    arrowView.image = image;
    arrowView.userInteractionEnabled = NO;
    arrowView.exclusiveTouch = NO;
    [turbineView addSubview:arrowView];

    image = [UIImage imageNamed:@"run-turbine.png"];
    UIImageView * stoprunView = [ [ UIImageView alloc ] initWithFrame:CGRectMake(65.0, 155.0, image.size.width, image.size.height) ];
    stoprunView.image = image;
    stoprunView.userInteractionEnabled = NO;
    stoprunView.exclusiveTouch = NO;
    [turbineView addSubview:stoprunView];
    turbineView.userInteractionEnabled = NO;
    turbineView.exclusiveTouch = NO;

    [self addSubview:turbineView];
    self.userInteractionEnabled = NO;
    self.exclusiveTouch = NO;
    self.opaque = NO;

    [self rodar];  //
    return self; 
    ```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:09:31.547

使用 MKMapViewDelegate`mapView:didSelectAnnotationView:`来检测用户何时点击注释，而不是尝试与注释本身的点击进行交互。

您可以确定选择了哪些注释并从中采取适当的操作`mapView:didSelect...`。

# objective-c - 在 xcode 中创建一个类

> ID：12521707
> 
> 赞同：-4
> 
> 时间：2012-09-20T22:17:01.637
> 
> 标签：objective-c, xcode

我正在学习objective-c 并使用xcode 开发一个简单的“单视图”应用程序——到目前为止，我正在处理mainview.h 和mainview.m 以及xib 文件。我的问题是，我想创建一个名为“GetName”的类，并在该类中放置一些方法，然后从我的 mainview.m 调用该类？如何在 xcode 和 Objective-c 中做到这一点？你能给我一个简单的结构/例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T23:01:07.687

[http://developer.apple.com](http://developer.apple.com)

或者

`Xcode`➜ `Menu`➜ `Help`➜ `Documentation and API Reference`。

或者简单地说：`⌥</kbd>`⌘</kbd>`?```

# java - Java（和其他地方）在创建对象时设置多个属性的模式是什么？

> ID：12521712
> 
> 赞同：3
> 
> 时间：2012-09-20T22:17:19.517
> 
> 标签：java, design-patterns

我今天在 SO 的某个地方看到了一种设计模式，用于说明 Java 中关于不可变对象的观点。这个想法是允许用户在构造过程中为他想要的任何属性设置值，它看起来像这样：

```
MyObject obj = new MyObject().name("Foo")
                             .height(5)
                             .width(3)
                             .color("blue")
                             .age(7); 
```

这种模式有名字吗？

在 C++ 中，我知道你可以`this`在每个函数中返回一个指针。它是如何在 Java 中以同样的方式完成的？

对于不可变对象，您是否必须为要设置的每个属性制作对象的新副本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:23:07.430

如果你想构造一个大致具有这种风格的不可变对象，你可能需要[Builder 模式](http://en.wikipedia.org/wiki/Builder_pattern)。

这里可见的链接也称为[Fluent 接口](http://en.wikipedia.org/wiki/Fluent_interface)，确实可以通过返回来启用`this`。

使用您的代码在正在构建的实际对象上使用流利的接口，如果所有设置事物的方法实际上都是 mutators，则该对象将不是不可变的。如果这些方法都返回一个新对象而不是`this`它可能是不可变的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:21:45.460

这不是其他人在评论中提到的 Builder 模式。

它是[http://en.wikipedia.org/wiki/Fluent_interface](http://en.wikipedia.org/wiki/Fluent_interface)，类似但不一样。

我认为您的最后两个问题有些相关，因为您可以以可变和不可变的方式实现此模式。

如果你实现它是可变的，那么对于每个方法你改变状态并返回：

```
public class UsefulThing {

   Integer state;

   public UsefulThing(Integer state) {
      this.state=state;
   }

   public UsefulThing alter(Integer newState) {
     state = newState;
     return this;
   }
} 
```

对于不可变的实现，您可以根据提供的对象创建一个新对象并将其返回。

```
public class UsefulThing {

   Integer state;

   public UsefulThing(Integer state) {
      this.state=state;
   }

   public UsefulThing alter(Integer newState) {

     return new UsefulThing(newState);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T22:29:08.157

这看起来像是构建器模式的一种形式（尽管实际上并非如此）。

通常（使用您的示例并假设它是不可变的）它遵循类似于以下的模式：

```
public class MyObject {
    private final String name;
    private final int height;
    private final int width;
    private final String color;
    private final int age;

    private MyObject(Builder builder) { // Notice this is private
        name = builder.name;
        height = builder.height;
        width = builder.width;
        color = builder.color;
        age = builder.age;
    }

    // Getters

    public static class Builder {
        // Initialize these to defaults if you have any
        private String name;
        private int height;
        private int width;
        private String color;
        private int age;

        // Getters as usual

        // Every setter looks like this:
        public Builder setName(String name) {
            this.name = name;
            return this;
        }

        // Other setters

        public MyObject build() {
            return new MyObject(this);
        }
    }
} 
```

然后使用它：

```
MyObject obj = new MyObject.Builder()
        .setName("Foo")
        .setHeight(5)
        .setWidth(3)
        .setColor("blue")
        .setAge(7)
        .build(); 
```

您还可以重用构建器：

```
MyObject.Builder builder = new MyObject.Builder();
MyObject obj1 = builder
        .setName("Foo")
        .setHeight(5)
        .setWidth(3)
        .setColor("blue")
        .setAge(7)
        .build();
MyObject obj2 = builder
        .setName("Bar")
        .build(); 
```

在这里，将具有与除 之外的所有`obj2`属性相同的属性。`obj1``name`

这通常是长构造函数的替代方法。它还可以用于所有信息都不能立即获得的对象，并且您不想在需要创建对象的任何地方自己声明一堆变量。从最后一个示例中，您可以看到，如果您想要使用相同的属性初始化大量对象，而不必一遍又一遍地传递这些属性，则可以使用它。

结果是您拥有一个不可变对象，但您不必像使用构造函数或静态工厂方法那样同时设置/传递所有变量。

以下是一些参考资料：

*   维基百科[构建器模式页面](http://en.wikipedia.org/wiki/Builder_pattern)
*   OODesign.com 的[构建器模式页面](http://www.oodesign.com/builder-pattern.html)（还详细说明了如何使用构建器模式的接口）
*   Joshua Bloch's *Effective Java - 2nd Edition* is an excellent source of information about some of the patterns (and [anti-patterns](http://en.wikipedia.org/wiki/Anti-pattern)) in Java.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T22:19:39.327

这是建造者模式的一个例子。

更典型的用法是：

```
MyObject obj = new MyObjectBuilder().name("Foo").blah().build(); 
```

请注意使用不同的构建器类。

# linux - 有没有办法使用 perl 在我的 linux 中查找有效语言环境列表？

> ID：12521713
> 
> 赞同：27
> 
> 时间：2012-09-20T22:17:22.447
> 
> 标签：linux, perl, locale

我需要找到我的 linux 机器中安装/支持的语言环境列表。有没有办法使用 perl 在我的 linux 中找到有效语言环境的列表？

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-20T22:23:01.623

此命令将为您提供语言环境列表：

```
locale -a 
```

从 Perl 脚本中，您可以使用

```
system("locale -a"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-20T22:32:09.703

如果您想要所有受支持的语言环境的列表，在我的 Debian 发行版中它们位于 中`/usr/share/i18n/SUPPORTED`，因此您可以这样做：

```
system("cat /usr/share/i18n/SUPPORTED"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-17T06:51:22.900

[http://perldoc.perl.org/perllocale.html#Finding-locales](http://perldoc.perl.org/perllocale.html#Finding-locales)：

> 对于您系统中可用的语言环境，请参阅 setlocale(3) 以查看它是否导致可用语言环境列表（搜索 SEE ALSO 部分）。如果失败，请尝试以下命令行：

```
locale -a
nlsinfo
ls /usr/lib/nls/loc
ls /usr/lib/locale
ls /usr/lib/nls
ls /usr/share/locale 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T20:20:25.273

```
my @locale_list = `locale -a`;
chomp(@locale_list); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-18T08:04:15.350

如果您想通过说“有效的语言环境”来检查哪些语言环境是`supported`

然后你需要去文件（你可以用'nano'打开它来检查它是否仍然存在）

```
nano /usr/share/i18n/SUPPORTED 
```

在 Ubuntu 18 上测试

# html - Internet Explorer 10 忽略图像的宽度和高度

> ID：12521716
> 
> 赞同：24
> 
> 时间：2012-09-20T22:17:24.003
> 
> 标签：html, css, image, internet-explorer-10

我有一个网站，其中 Internet Explorer 10 完全忽略了显式设置的宽度和高度属性，以支持实际图像大小。

图像定义为：

```
<img style="float: left; margin: 0px 10px 0px 0px; display: inline;" 
     align="left" src="http://blog.hinshelwood.com/files/2012/09/metro-findings.png"
     width="64" 
     height="64"/> 
```

但它在 IE10 中呈现为 128x128。在 Chrome 中，正如您所期望的那样。

例如[http://blog.hinshelwood.com/tfs-integration-tools-issue-tfs-wit-invalid-submission-conflict-type/](http://blog.hinshelwood.com/tfs-integration-tools-issue-tfs-wit-invalid-submission-conflict-type/)

在此页面上，“适用于”、“解决方案”和“结果”图像都设置为 64x64，但在 IE10 中它们显示为 128x128。我尝试设置以下 CSS，但这也被忽略了：

```
h3 img {
 width: 64px;
 height: 64px;
} 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-21T00:33:09.190

你有

```
body .content img {
  max-width: 100%;
  height: auto;
  width: auto \9;
} 
```

[http://blog.hinshelwood.com/wp-content/themes/pagelines/pagelines-compiled-css-2_1348178943/](http://blog.hinshelwood.com/wp-content/themes/pagelines/pagelines-compiled-css-2_1348178943/)

在 IE 中，invalid`width: auto \9;`被解释为`width: auto;`

在 Chrome 中，无效的宽度会被忽略。

没有宽度自动，图像的行为是不同的：

在 Chrome 中，宽度现在来自`h3 IMG { width: 64px; }`，并且由于高度是自动的，因此图像会根据 64 像素进行缩放。

在 IE 中，宽度和高度仍然是“自动”的，因此它采用默认的 IMG 大小。

**CSS 样式覆盖 IMG 标签属性**：您可以尝试使用内联样式来覆盖继承的样式。

```
<img style="height: 64px; width: 64px;" src="..." /> 
```

# php - Facebook 发布到墙上的照片 - 粉丝墙页面上的分隔视图

> ID：12521717
> 
> 赞同：2
> 
> 时间：2012-09-20T22:17:29.653
> 
> 标签：php, facebook

我将这种代码用于我的 Post Cron 到 Facebook 脚本（将它用于我的粉丝专页）：

```
if($sch['status_type'] == 'photo')
{
    $facebook->setFileUploadSupport(true);
    $args = array();
    $args['message'] = $sch['status_message'];
    $args['image'] = '@'.realpath($sch['photo_url']);
    $args['access_token'] = $sch['access_token'];

    try
    {
        $data = $facebook->api('/'.$album_id.'/photos', 'post', $args);
    }
} 
```

一切正常，$album_id 是我的粉丝专页墙相册 ID，但是当脚本将照片发布到墙上照片时 - 在我的朋友墙上，它看起来像“粉丝专页向墙上照片添加了 2 张照片”。上传的照片可以单独分开吗？

谢谢！

# javascript - 链接 jQuery 承诺时缺少进度通知

> ID：12521718
> 
> 赞同：3
> 
> 时间：2012-09-20T22:17:30.357
> 
> 标签：javascript, jquery, jquery-deferred, deferred

如果我创建一个 Deferred 对象，那么它会像我预期的那样报告进度。

```
var d1 = function() {
    var d = $.Deferred();
    d.notify('d1');
    d.resolve('d1');
    return d.promise();
};

d1().progress(function(a) {
    log('Progress: ' + a);
}); 
```

但是，如果我使用 then() 链接两个 Deferred 对象，则不会调用进度回调。

```
d1().then(d1).progress(function(a) {
    log('Progress: ' + a);
}); 
```

在我看来 then() 应该传播进度通知，但似乎并非如此。我错过了什么吗？

我已经用 jQuery 1.8.0 和 1.8.1 对此进行了测试。一个完整的工作示例在这里：http: [//jsfiddle.net/eWQuG/13/](http://jsfiddle.net/eWQuG/13/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T01:46:36.870

我可以看到发生了什么，但解释起来有点棘手。你可能需要读几遍这个...

在测试 1 中，传递给的承诺`test()`是“原始承诺”，即。返回的对象`d1()`。简单的。

在测试 2 中，传递给的*对象*`test()`是由. 不那么简单。这个新的 Promise 将只继承原始 Promise 的一些属性 - 不包括它的 progressCallbacks（如在原始 Promise 中放置的那样）。这对于*由*. _ 简而言之，正如它的名字所暗示的那样——它指定了在处理了之前的延迟/承诺*之后*要做什么。*`d1().then(d2).then(d3)``notify()``.then()``.then()`*`.then()`**

 ***通过保留对原始承诺的引用（即 的输出`d1()`），您可以更好地了解发生了什么，从而允许在测试 2 之前和之后运行简单的测试 1。

这是一个复合测试 3：

```
log('-- Test 3 --');
var p = d1();//p is a promise
test(p);//equivalent to Test 1
test(p.then(d2).then(d3));//equivalent to Test 2
test(p);//equivalent to Test 1 again 
```

**[演示](http://jsfiddle.net/eWQuG/14/)**

在日志中，您将看到`test(p)`两种情况下的行为是相同的。但是，`test(p.then(d2).then(d3))`行为不同，因为传递的对象不再是原来的 Promise，而是一个没有 progressCallbacks 的新 Promise。

## 编辑

瑞安，在实现你想要的东西时可能值得考虑：

```
d1().then(d2).progress(function(a) {
    log('Progress: ' + a);
}); 
```

是一个链条可以重新排列如下：

```
d1().progress(function(a) {
    log('Progress: ' + a);
}).then(d2); 
```

进度回调因此应用于原始承诺，并且由于`.progress()`沿链传播原始承诺，`.then()`仍将像以前一样运行。

两个版本都有效，但适用于不同的情况。

如果我是对的，那么也许这是对您问题的简短回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T09:59:18.793

您在测试中做了一些不合逻辑的奇怪事情。

一，你甚至在返回之前就解决了承诺，这违背了承诺的目的。Promise 回调不应该在先前解决的 Promise 上被调用，就这么简单。

```
var p = $.Deferred();
p.then(function(p){log("ok")}).progress(function(p){log("progress " + p)});
p.notify('n1'); // will call handler and be logged
p.resolve();
p.notify('n2'); // will not call handler and will not be logged 
```

第二，您在设置进度回调之前调用“通知”，但这在某种程度上仍然可以正常工作 - 似乎 jQuery 的特定通知实现有点异步......除了链接失败。我不知道如何或为什么，但我认为调试并不重要，因为无论如何您的用法都不正确。

请参阅您的小提琴的此更新：http: [//jsfiddle.net/eWQuG/15/](http://jsfiddle.net/eWQuG/15/)***

# javascript - 在 KineticJS 中调整形状填充的图像对象大小

> ID：12521720
> 
> 赞同：0
> 
> 时间：2012-09-20T22:17:38.723
> 
> 标签：javascript, jquery, image, kineticjs

我有一个 Image() 对象，我需要调整它的大小。我正在使用它来[`fill`塑造](http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/).`canvas`

如果我尝试更改它`image.width = 300`，它不会调整大小。如果`console.log`是，则表明只有 html 属性已更改。

有没有办法直接编辑 Image() 大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T23:59:58.863

您可以使用设置`fill.scale`具有属性的对象`fill.scale.x`以及`fill.scale.y`您希望应用于图像的对象来执行此操作。

在示例中，可以这样做，例如：

> ```
> var patternPentagon = new Kinetic.RegularPolygon({
>    x: 220,
>    y: stage.getHeight() / 2,
>    sides: 5,
>    radius: 70,
>    fill: {
>        scale: { x:0.5, y:0.5 },
>        image: images.darthVader,
>        offset: [-220, -70]
>    },
>    stroke: 'black',
>    strokeWidth: 4,
>    draggable: true 
> ```
> 
> });

[您可以在此处](http://jsfiddle.net/jbalsas/Jz3nL/)查看此工作的示例

# cuda - 优雅地崩溃内核

> ID：12521721
> 
> 赞同：5
> 
> 时间：2012-09-20T22:17:40.310
> 
> 标签：cuda

跟进：[CUDA：停止所有其他线程](https://stackoverflow.com/questions/3735786/cuda-stop-all-other-threads)

如果发生“不良情况”，我正在寻找一种退出内核的方法。prog 手册说 NVCC 不支持异常处理。我想知道是否有用户定义的 cuda-error-code。换句话说，如果发生“错误”，则使用此用户错误代码终止。我怀疑有一个，所以我的另一个想法是引起一个。

比如，如果“坏”发生，除以零。但是我不确定一个线程是否会被零除，是否足以使整个内核崩溃，或者只是那个线程？

是否有更好的方法来终止内核？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T02:39:07.427

您应该首先阅读[这个问题以及 harrism 和 tera 的答案](https://stackoverflow.com/questions/12505750/how-can-a-global-function-return-a-value-or-break-out-like-c-c-does)（昨天提出/回答）。

您可能很想使用类似的东西

```
if (there_is_an_error) {
  *status = MY_ERROR_CODE; // store to device pointer
  __threadfence();         // ensure store issued before trap
  asm("trap;");            // kill kernel with error
} 
```

在我看来，这并不完全满足您“优雅”的条件。陷阱导致内核退出并且运行时报告`cudaErrorUnknown`。但是由于内核执行是异步的，您需要同步您的流/设备以捕获此错误，这意味着在每次内核调用之后进行同步，除非您可以接受不精确的错误（即您可能无法捕获错误代码，直到对后续 CUDA API 调用的调用）。

但这只是 CUDA 中内核错误处理的方式，编写良好的代码应该在调试版本中同步以检查内核错误，并在发布版本中解决不精确的错误消息。不幸的是，我认为没有比这更优雅的方式了。

**编辑：**在计算能力 2.0 及更高版本上，您可以使用 assert() 在调试版本中退出并出现错误。目前尚不清楚这是否是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:53:41.940

该断言可能会对您有所帮助。您可以在 CUDA C Programming Guide 的 B.15 中找到它。

# asp.net - Ayende 在 Raccoon 博客源代码中提到的 .NET 中的 Uri 错误是什么？

> ID：12521723
> 
> 赞同：5
> 
> 时间：2012-09-20T22:18:07.763
> 
> 标签：asp.net, .net, uri

在查看 Ayende 的 Racoon 博客的来源时，我在[`global.asax.cs`](https://github.com/ayende/RaccoonBlog/blob/56a192afdcbd3d9f8fdb0e086b420f87e252bee4/RaccoonBlog.Web/Global.asax.cs)：

```
// Work around nasty .NET framework bug
try
{
    new Uri("http://fail/first/time?only=%2bplus");
}
catch (Exception)
{
} 
```

这似乎是第一次请求时发生的错误的解决方法。有谁知道这个错误是什么或如何重现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:47:45.193

[在 2010 年 3 月的这篇 Ayende 博客文章](http://ayende.com/blog/4422/is-select-system-uri-broken)中进行了一些谷歌搜索，我从中引用了一段摘录：

> 我现在可以重现这个，这里是它是如何到达那里的：
> 
> ```
> public class Strange : MarshalByRefObject
> {
>     public void WTF()
>     {
>         Console.WriteLine(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile);
>         new Uri("http://localhost:58080/indexes/categoriesByName?query=CategoryName%3ABeverages&start=0&pageSize=25");
>     }
> }
> 
> public class Program
> {
>     private static void Main()
>     {
>         var instanceAndUnwrap = (Strange) AppDomain.CreateDomain("test", null, new AppDomainSetup
>         {
>             ConfigurationFile = ""
>         }).CreateInstanceAndUnwrap("ConsoleApplication5", "ConsoleApplication5.Strange");
>         instanceAndUnwrap.WTF();
>     }
> } 
> ```
> 
> 这需要一些时间才能弄清楚。

从下面的评论线程中，我已经略读但没有详细阅读，根本原因似乎是机器根配置文件中的错误，该文件每次只解析一次？`AppDomain`，因此第二次和随后的时间没有错误。

习惯性地使用这种被它烧过一次的构造是程序员通过艰苦的经验积累起来的一种习惯。经验不足的人可能会窃笑“货物崇拜”或“巧合的编程”，经验丰富的人只会微笑和点头。

# c++ - c++：更多的小文件还是更少的大文件？

> ID：12521725
> 
> 赞同：1
> 
> 时间：2012-09-20T22:18:16.003
> 
> 标签：c++, performance, file, file-access

我编写了一个 c++ prog 来查询一个 100 GB 的字典。我已将字典拆分为 n 个大小相等的文件。所有拆分文件都放在同一个目录中。字典是完全索引的，即，一旦有查询，我就知道要打开哪个 spit 文件以及在哪里寻找。我的问题是为了更好的性能，哪个拆分会更好：（a）少量大文件或（b）大量小文件？另外，理想的分裂是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T01:00:28.703

您的字典是静态的还是可以在运行时更改？

如果它是静态的，则对所有内容使用单个文件。

如果它是动态的并且您的索引是“向量”（不是最好的主意），请为数据使用一个文件，为每个索引使用一个文件。

如果它是动态的并且您的索引是“树”（包括非 100% 连续的双端队列和其他向量（如 ADT）），您可以再次使用单个文件，除非出于速度考虑将索引存储在单独的卷上有意义。

您应该在开始时打开文件，并且不再受到文件打开/关闭的惩罚。

如果您的应用程序是 64 位的，只需将整个文件映射到内存中，然后让操作系统完成其余的工作。

如果您的应用程序是 32 位的，仍然使用内存映射来访问文件。您需要为可能需要执行的每个可能的并发访问创建一个内存映射“窗口”（对于静态数据，可能每个数据线程一个，每个索引每个线程一个或两个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T22:32:29.153

我认为这个问题没有直接的答案。只有实验才能告诉你。打开文件进行读取的成本应该是恒定的，无论大小如何，读取文件的内容当然取决于文件大小。

还有其他提示，尽管我假设当您收到查询时，您打开文件，完全解析/读取它，或者直到找到单词然后关闭文件并返回结果，在这种情况下，有许多增强功能要做，也许你有，也许没有，但这里有

1.  如果您收到大量查询，打开文件可能会很昂贵，在这种情况下，您可能需要缓存文件或搜索查询以获得更好的性能
2.  当您打开一个文件并读取它时，您是按顺序执行的，这意味着文件或多或少地被加载到内存中，我曾经遇到过一个用于 java 的 sax xml 解析器，它只能加载所需的将 xml 块放入内存，用于处理非常大的 xml 文件，也许 c++ 有类似的东西。[SAX 项目](http://www.saxproject.org/)

检查[文件何时加载到内存中](https://stackoverflow.com/questions/9132737/when-is-the-file-loaded-into-memory-for-fread-fopen-and-fwrite-calls)

一种完全不同的方法是使用带有索引的数据库。这个问题你不必处理文件打开问题

# python - 正则表达式 - 如何使用子组

> ID：12521726
> 
> 赞同：0
> 
> 时间：2012-09-20T22:18:28.127
> 
> 标签：python, regex

> **可能的重复：**
> [用 Python 中的正则表达式匹配嵌套结构](https://stackoverflow.com/questions/1099178/matching-nested-structures-with-regular-expressions-in-python)

我正在尝试匹配来自 wiki 页面的一组数据。下面列出了我正在使用的一些 python 代码。问题是它会在自己组的末尾返回到`}}`页面的最后一个。

```
def findPersonInfo(self):
    if (self.isPerson == True):
        regex = re.compile(r"{{persondata(.*)}}",re.IGNORECASE|re.UNICODE|re.DOTALL)
        result = regex.search(self._rawPage)
        if result:
            print 'Match found: ', result.group() 
```

wiki 页面内容示例：

```
*[http://www.jsc.nasa.gov/Bios/htmlbios/acaba-jm.html NASA biography]

{{NASA Astronaut Group 19}}

{{Persondata
|NAME= Acaba, Joseph Michael "Joe"
|ALTERNATIVE NAMES=
|SHORT DESCRIPTION=[[Hydrogeologist]]
|DATE OF BIRTH={{Birth date and age|1967|5|17}}
|PLACE OF BIRTH=[[Inglewood, California]]
|DATE OF DEATH=
|PLACE OF DEATH=
}}
{{DEFAULTSORT:Acaba, Joseph M.}}
[[Category:1967 births]] 
```

我当前的正则表达式返回以下字符串：

```
{{Persondata
|NAME= Acaba, Joseph Michael "Joe"
|ALTERNATIVE NAMES=
|SHORT DESCRIPTION=[[Hydrogeologist]]
|DATE OF BIRTH={{Birth date and age|1967|5|17}}
|PLACE OF BIRTH=[[Inglewood, California]]
|DATE OF DEATH=
|PLACE OF DEATH=
}}
{{DEFAULTSORT:Acaba, Joseph M.}} 
```

我希望它返回：

```
{{Persondata
|NAME= Acaba, Joseph Michael "Joe"
|ALTERNATIVE NAMES=
|SHORT DESCRIPTION=[[Hydrogeologist]]
|DATE OF BIRTH={{Birth date and age|1967|5|17}}
|PLACE OF BIRTH=[[Inglewood, California]]
|DATE OF DEATH=
|PLACE OF DEATH=
}} 
```

棘手的一点是它需要计算其他`{{`打开和`}}`关闭来知道我想停在哪个组，但我不知道如何让正则表达式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:21:39.187

`{{persondata(.*)}}`会贪婪地匹配。即它将尝试返回可能的最长匹配。`{{persondata(.*?)}}`如果你想获得最短的匹配，你应该使用。（是没有这个名字，也许是节俭的搭配？）

但是，在这种情况下，您`}}`的字符串中有另一个。你可以做一些聪明的事情，比如`{{persondata((?:.*)}}(?:.*))}}`，但一般来说，一旦你到达递归结构（嵌套自己的结构），你应该放弃正则表达式并转向正确的解析解决方案。

你可能想看看`pyparsing`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T00:20:41.530

PyPI 上有一个为此目的而创建的模块。见[mwparserfromhell](http://pypi.python.org/pypi/mwparserfromhell/)。

# r - 如何在R中向数据框添加一行（在表格到数据框转换之后）

> ID：12521729
> 
> 赞同：2
> 
> 时间：2012-09-20T22:18:43.090
> 
> 标签：r, dataframe

我正在尝试向我的数据框添加一个新行，该行之前是一个表。当我尝试使用 rbind 命令添加新行时，它会给我一条警告消息，并且不会添加我尝试插入的向量。请找到我的命令和输出如下。

```
A9 <- BreastCancerData$V10
A9 <- table(A9)/nrow(BreastCancerData) //Generating a table of values
A9 <- as.data.frame(A9)//Table to Data Frame Conversion.
myvec <- c(9,0)
rbind(A9,myvec)[c(1,2,3,4,5,6,7,8,10,9),] 
```

输出：

```
 A9        Freq
1     1 0.823703704
2     2 0.051851852
3     3 0.047407407
4     4 0.017777778
5     5 0.008888889
6     6 0.004444444
7     7 0.013333333
8     8 0.011851852
10 <NA> 0.000000000
9    10 0.020740741
Warning message:
In `[<-.factor`(`*tmp*`, ri, value = 9) :
  invalid factor level, NAs generated 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:23:21.840

为什么不这样做：

```
A9 <- table(factor(A9,levels = 1:10))/nrow(BreastCancerData) 
```

并为自己省点麻烦？或者，如果你想偷偷摸摸，

```
A9 <- table(factor(A9,levels = seq_len(max(A9))))/nrow(BreastCancerData) 
```

# xamarin.ios - system.data 程序集参考

> ID：12521731
> 
> 赞同：0
> 
> 时间：2012-09-20T22:18:58.830
> 
> 标签：xamarin.ios, system.data

我试图`System.Data`在 iPhone 的 MonoTouch 应用程序中引用，但出现以下错误：

```
The type or namespace 'Data' does not exist in the namespace 'System'. 
Are you missing an assembly reference?" 
```

我尝试在“编辑参考”窗口中添加参考，但在任何地方都看不到它，或者使用“编辑参考”窗口左侧的搜索选项找到它。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T23:16:25.390

从 MonoDevelop 中查看您的**解决方案**垫（默认为左侧）。

您应该右键单击**引用**（在您的项目下）并选择“编辑引用...”。

该对话框应该向您显示一些选项卡，选择**Packages**之一。

应显示程序集列表。单击名为：

```
System.Data    2.0.5.0    mono-iphone 
```

然后单击**确定**关闭对话框并重建您的应用程序。

# javascript - jQuery 对话框 - 如何获取 .ui-widget-shadow 作为父元素？

> ID：12521738
> 
> 赞同：2
> 
> 时间：2012-09-20T22:19:39.603
> 
> 标签：javascript, jquery, css, jquery-dialog

当您在此处设置自己的 jQuery 主题样式时：http: [//jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)您可以看到“覆盖和阴影类”部分中的模式对话框周围有阴影。在源代码中，它显示对话框实际上是用另一个具有 class 的 div 包装的`ui-widget-shadow`。

对我来说，这个阴影永远不可见，因为对话框在创建时没有被这个 div 包裹。有谁知道如何让 jQuery 对话框将对话框包装在这个元素中以便阴影可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T23:08:32.553

在对话框的声明中，您只需要指定该类。

```
$(function () {
  $("#dialog").dialog({
    ...
    dialogClass: 'ui-widget-shadow'
  });
}); 
```

# java - 如何在 Java 中设置以下线程？

> ID：12521739
> 
> 赞同：4
> 
> 时间：2012-09-20T22:19:48.417
> 
> 标签：java, multithreading

我有一个具有以下形式的线程：

1.  每个线程的每次执行都应该在类中运行一个函数。该功能可以完全安全地自行运行。该函数返回一个值，比如一个 int。

2.  在所有线程都执行完毕后，需要对函数值进行累加。

所以，它（在伪代码中）是这样的：

```
 a = 0
  for each i between 1 to N
      spawn a thread independently and call the command v = f(i)
      when thread finishes, do safely: a = a + v
  end 
```

我不确定在这种情况下如何使用 Java。

问题不在于创建线程，我知道这可以使用

```
new Thread() { 
   public void run() { 
     ... 
   } 
} 
```

问题是积累所有的答案。

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T22:38:51.830

我可能会做类似的事情：

```
 public class Main {
     int a = 0;
     int[] values;
     int[] results;

     public Main() {
         // Init values array

         results = new int[N];
     }

     public int doStuff() {
         LinkedList<Thread> threads = new LinkedList<Thread>();

         for (final int i : values) {
             Thread t = new Thread() {
                 public void run() {
                     accumulate(foo(i));
                 }
             };

             threads.add(t);
             t.start();
          }

          for (Thread t : threads) {
              try {
                  t.join();
              } catch (InterruptedException e) {
                  // Act accordingly, maybe ignore?
              }
          }

          return a;
     }

     synchronized void accumulate(int v) {
          // Synchronized because a += v is actually
          //    tmp = a + v;
          //    a = tmp;
          // which can cause a race condition AFAIK
          a += v;
     }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T23:05:35.503

使用`ExecutorCompletionService`,`Executor`和`Callable`.:

`Callable`从调用您的`int`函数的 a 开始：

```
public class MyCallable implements Callable<Integer> {
    private final int i;

    public MyCallable(int i) {
        this.i = i;
    }

    public Integer call() {
        return Integer.valueOf(myFunction(i));
    }
} 
```

创建一个`Executor`：

```
private final Executor executor = Executors.newFixedThreadPool(10); 
```

`10`是一次执行的最大线程数。

然后将其包装`ExecutorCompletionService`并提交您的作业：

```
CompletionService<Integer> compService = new ExecutionCompletionService<Integer>(executor);

// Make sure to track the number of jobs you submit
int jobCount;
for (int i = 0; i < n; i++) {
    compService.submit(new MyCallable(i));
    jobCount++;
}

// Get the results
int a = 0;
for (int i = 0; i < jobCount; i++) {
    a += compService.take().get().intValue();
} 
```

`ExecutorCompletionService`允许您在完成任务时将任务从队列中拉出。这与加入线程有点不同。尽管总体结果是相同的，但如果您想在线程完成时更新 UI，您将不知道线程将使用联接完成什么顺序。最后一个`for`循环可能是这样的：

```
for (int i = 0; i < jobCount; i++) {
    a += compService.take().get().intValue();
    updateUi(a);
} 
```

这将在任务完成时更新 UI。使用 a`Thread.join`不一定会这样做，因为您将按照调用连接的顺序而*不是*线程完成的顺序获得结果。

通过使用执行器，这也将允许您限制在给定时间同时运行的作业数量，这样您就不会意外地对系统进行线程轰炸。

# c++ - 智能指针列表 - 管理对象生命周期和指针有效性

> ID：12521744
> 
> 赞同：2
> 
> 时间：2012-09-20T22:20:02.893
> 
> 标签：c++, list, constructor, c++11, smart-pointers

我有一个智能指针列表，其中每个指针指向一个单独的实体类。

`std::list<std::unique_ptr<Entity>> m_entities;`

我希望构造函数处理将每个指针分配给 std::list 类，因为它是由类实例化的代码“自动”处理的。但是，如果这种设计不好，那么我会欢迎一个更好的选择，因为它只对来自 C# 背景的我有意义。

```
Entity::Entity(Game &game) 
    : m_game(game),             
    m_id(m_game.g_idGenerator->generateNewID())             
{
    m_game.m_entities.push_back(std::unique_ptr<Entity>(this));
} 
```

我使用此方法遇到的主要问题是 Entity 类的生命周期不受 Entity 类管理。

例如，如果我在堆栈上分配一个实体类，它将在离开分配它的方法后调用实体析构函数，并且指针将不再有效。

因此，我考虑了创建智能指针的替代方法，将实体类分配给堆，然后显式地将指针添加到列表中。

```
std::unique_ptr<Entity> b(new Entity(*this));
m_entities.push_back(b);   // ERROR 
```

这会产生以下错误

```
error C2664: 'void std::list<_Ty>::push_back(_Ty &&)' : cannot convert parameter 1 from 'std::unique_ptr<_Ty>' to 'std::unique_ptr<_Ty> &&' 
```

将每个指针分配给列表的最佳方法被认为是什么，并且基于构造函数的版本是否可能？

我目前认为智能指针列表应该处理每个实体类的生命周期，并且在构造函数中分配指针不是一个好的设计选择。在这种情况下，我可能应该创建一个 CreateEntity 方法来添加指向列表的指针，而不是让构造函数处理它。这是否更好？

[在阅读了此处](https://stackoverflow.com/questions/94227/smart-pointers-or-who-owns-you-baby)、[此处](https://softwareengineering.stackexchange.com/questions/133302/stdshared-ptr-as-a-last-resort)和[此处](http://www.allegro.cc/forums/thread/601189)（场外）的问题后，我考虑了哪种类型的智能指针适合此操作。根据我目前所读到的内容，很难得到准确的答案，因为它们都提供了一些相互矛盾的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T23:09:11.107

以这种方式使用构造函数绝对不是一个好主意，因为构造函数没有关于如何创建和控制对象的信息 - 在堆栈上，静态地，通过一些智能指针动态地，通过哑指针动态地？

要解决此问题，您可以使用静态工厂方法创建`Entity`实例：

```
class Entity
{
public:

   // Variant with unique ownership
   static void CreateGameEntity(Game& game)
   {
     std::unique_ptr<Entity> p(new Entity());
     game.m_entities.push_back(std::move(p));
   }

   // OR (you cannot use both)

   // Variant with shared ownership
   static std::shared_ptr<Entity> CreateGameEntity(Game& game)
   {
     std::shared_ptr<Entity> p(new Entity());
     game.m_entities.push_back(p);
     return p;
   }

private:

   // Declare ctors private to avoid possibility to create Entity instances
   // without CreateGameEntity() method, e.g. on stack.
   Entity();
   Entity(const Entity&);
}; 
```

使用哪个智能指针？好吧，这取决于您的设计。如果`Game`对象单独拥有`Entity`实例并完全管理它们的生命周期，则使用[`std::unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)是可以的。如果您需要某种共享所有权（例如，您有多个`Game`可以共享相同`Entity`对象的对象），您应该使用[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr).

此外，在拥有唯一所有权的情况下，您可以使用[Boost Pointer Container library](http://www.boost.org/libs/ptr_container/doc/ptr_container.html)。它包含专门的拥有指针容器，如,`ptr_vector`等。`ptr_list``ptr_map`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T22:39:32.397

我不会评论您的设计问题，但要修复您的错误，请将您的代码更改为：

```
m_entities.push_back(std::unique_ptr<Boundary>(new Boundary(*this, body))); 
```

或者：

```
std::unique_ptr<Boundary> b(new Boundary(*this, body));
m_entities.push_back(std::move(b)); 
```

原因是`b`在您的代码中是一个左值，但`std::unique_ptr<>`它是一个只移动类型（即没有复制构造函数）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T22:42:13.417

您的代码中的问题是您尝试`std::unique_ptr<T>`从左值移动 a 。的实例化`std::unique_ptr<T>`是不可复制的，并且只能移动。要从左值移动，您需要明确地这样做：

```
this->m_entities.push_back(std::move(b)); 
```

调用`std::move()`不会真正移动任何东西，但它确实会产生一个类型，该类型向编译器指示可以移动对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T22:41:42.767

要解决堆栈创建实例的问题，您可以简单地向构造函数添加一个参数，告诉它不要将新实例添加到列表中，例如：

```
Entity::Entity(Game &game, bool AddToList = true)  
    : m_game(game),              
      m_id(m_game.g_idGenerator->generateNewID())              
{ 
    if (AddToList) m_game.m_entities.push_back(this); 
} 
```

.

```
{
    ...
    Entity e(game, false);
    ...
} 
```

另一种选择可能是向 Entity 添加一个析构函数，如果它仍然存在，则将其从列表中删除，但这可能会变得有点复杂，以避免直接`Entity`破坏和`unique_ptr`破坏之间的冲突。

# javascript - Javascript：表单验证，检查 URL

> ID：12521745
> 
> 赞同：0
> 
> 时间：2012-09-20T22:20:04.293
> 
> 标签：javascript, html, preg-match

下面是简单的表单验证代码，当没有输入值时提醒用户。

```
<script>
function validateForm()
{
var x=document.forms["myForm"]["fname"].value;
if (x==null || x=="")
  {
  alert("please enter value");
  return false;
  }
}
</script> 

<form name="myForm" action="hi.php" onsubmit="return validateForm()" method="post">
value: <input type="text" name="fname">
<input type="submit" value="Submit"> 
```

我想要的是，用户必须在 Value 字段中粘贴**https://www.games.com/#gamer=AAACiF5ZCZCq123**或**http://www.games.com/#gamer=AAACiF5ZCZCqFIBAJdzJmg**，其中 AAACiF5ZCZCq123 是动态内容，会发生变化.

因此，如果用户粘贴[https://www.games.com/#gamer=](https://www.games.com/#gamer=)*某些*内容，它应该返回 true，，，否则它应该返回 false。

任何人都可以提供代码或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:34:03.863

尝试这样的事情：

```
var checkForm=string.indexOf("https://www.games.com/#gamer="); 
```

其中变量`string`是用户从索引字段中输入的内容。如果`checkForm`是 -1，那么您知道文本“https://www.games.com/#gamer=" 没有被输入。如果它给出了除此之外的任何内容（很可能是 0，因为这是字符串开始的地方） ，那么你就知道用户正确输入了数据。

查看[http://www.w3schools.com/jsref/jsref_indexof.asp](http://www.w3schools.com/jsref/jsref_indexof.asp)以获取有关`.indexof()`javascript 命令的更多信息。

# ios - 如何使用 UIButton 对 UITabBar 进行子类化以实现折叠/展开行为

> ID：12521748
> 
> 赞同：1
> 
> 时间：2012-09-20T22:20:17.663
> 
> 标签：ios, custom-controls, uitabbar, expand, collapse

我有一个有趣的问题，我认为我在正确的轨道上，但需要指出正确的方向。我试图对 UITabBar 进行子类化，并希望在运行时添加一个 UIButton，该 UIButton 在标签栏“上方”偏移。我还想点击该按钮并将标签栏设置为动画进出视图。我已经看过类似的帖子，但是解决方案说将按钮添加到 UITabBarController 的视图中，而不是尝试使其在 UITabBar 中工作：

[将 UIButton 作为子视图添加到 UITabBar](https://stackoverflow.com/questions/11588752/add-a-uibutton-as-a-subview-to-a-uitabbar)

我想将它添加到 UIToolBar 或知道为什么我不应该以及为什么 UITabBarController 方法更好/更高效/更清洁，或者其他什么。这是我的 CollapsibleToolbar 实现文件（减去动画代码）。我对 iOS 还是很陌生，所以我可能会做一些非常简单的错误。

```
#import "CollapsibleTabBar.h"

@interface CollapsibleTabBar () {
    BOOL _isCollapsed;
    double _imageHeight;
    double _imageWidth;
}

@property (nonatomic, retain) UIImage *buttonImage;
@property (nonatomic, retain) UIButton *slideButton;

@end

@implementation CollapsibleTabBar

@synthesize slideButton;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];

    if (self) {
        // Initialization code

    }    

   return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder{

    self = [super initWithCoder:aDecoder];

    if (self){

        _isCollapsed = YES;

        // Place button in UI
        _imageHeight = 40;
        _imageWidth = 40;

        // Create button image
        self.buttonImage = [UIImage imageNamed:@"tab-bar-expander-button.png"];

        // Create an hook up button
        self.slideButton = [UIButton buttonWithType:UIButtonTypeCustom];
        self.slideButton.backgroundColor = [UIColor colorWithPatternImage:self.buttonImage];

       [self.slideButton addTarget:self action:@selector(slideButtonTapped) forControlEvents:UIControlEventTouchUpInside];

        // Set button frame
        self.slideButton.frame = CGRectMake((self.center.x - (_imageWidth/2.0)), -1*_imageHeight, _imageWidth, _imageHeight);

        double yOriginOffset = self.frame.origin.y - _imageHeight;

        // Must increase the bounds to allow the slide button to receive touch events?
        self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, self.frame.size.width, self.frame.size.height + _imageHeight);

        // Add button as sub view
        [self addSubview:self.slideButton];
   }

   return self;
}

- (void)slideButtonTapped {

    // Animate that junk ... 
}

- (void)dealloc{

    // Remove target 
    [self.slideButton removeTarget:self action:@selector(slideButtonTapped) forControlEvents:UIControlEventTouchUpInside];

    self.buttonImage = nil;
    self.slideButton = nil;
} 
```

我正在使用 initWithCoder，因为我在我的笔尖上拖放了一个 UITabBar，将它的类设置为 CollapsibleTabBar。我认为，initWithFrame 不会因此而触发。

无论如何，这会将按钮准确地放置在我想要的位置，但是 slideButtonTapped 方法永远不会触发。像这样更改 UIButton 的框架会将按钮的下半部分暴露给 UITabBar 的可点击区域，并且我的 slideButtonTapped 事件将触发：

```
self.slideButton.frame = CGRectMake((self.center.x - (_imageWidth/2.0)), -1*_imageHeight/2.0, _imageWidth, _imageHeight); 
```

由此我知道这是一个框架/边界问题。该按钮可见但不可点击，因为它位于 UITTabBar 的某些可点击区域之外。所以我开始弄乱 UITTabBar 的框架（正如 Dave H. 建议作为上面链接中的答案）并增加它的大小以包含 UIButton 以希望按钮能够响应点击事件。

我无法正确定位 UITabBar + UIButton 的框架，即使将框架放置在超级视图中的这个 Y 位置并将其高度增加按钮的高度似乎是合乎逻辑的：

```
self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y-_imageHeight, self.frame.size.width, self.frame.size.height + _imageHeight); 
```

更糟糕的是，这会禁用按钮点击，并且 UITabBar 会呈现在错误的位置。我已经阅读了文档，但我还没有意识到我可能做错了什么。

其他问题：

*   这是*正确*的方法吗？请记住，我想支持开箱即用的旋转，而在我的视图控制器中没有混乱的帧动画代码。
*   UIView 的可点击区域如何控制？那是 frame 或 bounds 属性还是其他什么？
*   Apple 文档说使用 UIView 的 layoutSubviews 方法来定位超级视图的子视图。我也尝试过，行为没有区别。我应该重新考虑吗？

如果您需要查看任何其他代码，请告诉我。任何帮助将不胜感激。

上帝保佑！

# c# - OpenXML 查找冻结的窗格

> ID：12521749
> 
> 赞同：0
> 
> 时间：2012-09-20T22:20:25.150
> 
> 标签：c#, .net, openxml

我很想在 Excel 文档中找到任何冻结的窗格。这对 OpenXML 可行吗？我知道您可以使用 OpenXML 创建冻结窗格，但我想知道是否可以确定是否存在冻结窗格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:33:41.510

```
Pane pane = new Pane()
{
    State = PaneStateValues.Frozen
}; 
```

这将实例化一个状态为冻结的新窗格。如果您有这样的窗格集合：

```
List<Pane> myPanes = new List<Pane>(); 
panes.Add(//pane//); 
```

遍历所有窗格，看看它们是否被冻结

```
foreach (var pane in myPanes)
{
    if (pane.State == PaneStateValues.Frozen)
    {
         //Do something with pane
    }
} 
```

# android - 在 iOS 和 android 的 Titanium 中存储大 JSON

> ID：12521750
> 
> 赞同：2
> 
> 时间：2012-09-20T22:20:33.360
> 
> 标签：android, ios, database, json, titanium

## 应用程序的工作原理

目前正在开发一个应用程序，该应用程序用于探索 5 个地区的活动。每个活动都表示为具有大量属性的 JS 对象。可以通过各自选项卡中的不同过滤器查看活动，例如类别或地图。在每个主过滤器内，都有用于过滤日期、区域、可访问性等的选项。

## 挑战

设备上需要存储大量的 JSON，**iOS 和 android**都需要支持。在最好的情况下，数据需要与数据库同步，并且所有数据都需要在设备上可用。应用程序需要敏捷才能获得良好的体验，这意味着获取数据需要尽可能快。此外，过滤数据需要尽可能快。

## 到目前为止考虑的可行解决方案（还没有完全削减它）

**[MongloDB](https://github.com/Monglo)与[MongloDB Titanium Store 适配器](https://github.com/Monglo/MongloDB-Titanium-Store)，银弹？**

这种方法起初似乎是灵丹妙药。尽管该项目看起来很有希望，但它是由一位英勇的黑客维护的，并且该项目需要一些文档。我检查了源代码，并通过 API 破解了我的方式，但无济于事，console.log 和 jasmine 测试这次不会削减它。更重要的是，它还没有完全完成，并且缺少与 MongoDB 相比的功能。一个伟大的项目，我希望它能够更受欢迎，并有足够的能力在未来帮助绝望的钛开发商。

**[JSONDB](https://github.com/irlgaming/jsondb-public/blob/master/faq.md) , 仅适用于 iOS**

这个应用程序确实需要在两个平台上运行，iOS 和 android，所以没有理由尝试这个。此外，JSONDB 只能在单一上下文中工作，这也是一个严重的问题。

**Ti Filesystem 和 JSON.stringify + JSON.parse，内存效率不高**

保存一小部分已保存项目的可行解决方案，这也是应用程序中的一项功能。但是在[其他帖子](https://stackoverflow.com/questions/5865621/how-to-parse-a-big-json-file-in-android)中，已经注意到 android 使用 JSON 方法的内存限制问题。虽然这可能不是我最不关心的问题，但总体内存效率将是一个大问题。我从来没有见过 Titanium 的文件读写性能基准，所以我不确定读写的影响有多大。过滤大对象也是一个大问题，[underscore](http://underscorejs.org/)不会管理这种大数据。无论我选择哪种方法，迭代大对象都是一个大问题。

**大屁股全局对象**

几乎与文件系统相同的方法，只是将其保存在全局中。这有同样的问题，只是一种明显的不道德做法。

**SQLite，糟糕**

高度以文档为导向的 JSON 数据到 SQlite，听起来比 samsung galaxy fanboys 还要糟糕。对此有何反馈？

**多个文件 + 需要维护的 SQLite + 延迟加载、独角兽和彩虹？**

迫切需要一个解决方案，我可能会在写这篇文章的过程中遇到一些事情。可能有 10-16 个主要类别，每个类别有 1 到 4 个子类别。将子类别的所有活动保存在它自己的文件中，这是一个非常纤细的 JSON。浏览类别，每个子类别都呈现在它自己的 TableViewSection 中，每个子类别根据用户向下滚动的程度独立附加到表格中，有效地延迟加载内容。只有一个非常快速的文件读取。在这个视图中，添加更多子过滤器只会影响已经加载的项目，并且迭代这些项目是合理的。

更新数据也很有效，只更新有变化的文件。SQLite 数据库可以维护所有具有到期日期的活动的日期，它可以为即将到来的 7 天或一个月动态构建自己的 JSON 文件。这将使日历视图在大多数情况下都非常流畅。不过，选择未来的日期将是一场噩梦。

地图还是个问题……

如果您已阅读所有这些内容，谢谢。如果您有类似的经验，或者可能正在做某事，请随时回复！我必须停止写作，停止编码并开始睡觉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T03:54:55.900

对不起，糟糕的 monglodb 文档。我为一些内部项目开发了它，并且真的很想与社区分享它，但是缺乏文档确实使它难以使用。但好消息是我现在有文档，哈哈，也精简并清理了源代码。希望它现在对你更好。[http://monglodb.com](http://monglodb.com)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T02:32:25.783

我是[JSONDB](https://github.com/irlgaming/jsondb-public)的原作者，我想我会加入并为通过 Googlefu 找到这个问题的任何人提供答案。

JSONDB 现在是不推荐使用的软件 - 它已被另一个名为[SculeJS](https://github.com/dan-eyles/sculejs)的项目所取代。SculeJS 旨在提供一个用纯 JavaScript 编写的全功能 NoSQL 数据库，用于 Titanium、NodeJS 和 Web 应用程序。

由于 Ti 原生模块构建方式的限制，JSONDB 最初仅可用于 iOS 应用程序 - JSONDB 和 SculeJS 的当前版本与 iOS 和 Android 应用程序兼容。

在很多方面 MongloDB 和 SculeJS 是相似的，它们的不同之处在于 SculeJS 的设计方式。SculeJS 旨在提供强大的通用数据结构和丰富的查询层，而不是 MongoDB 的直接端口。没有侮辱 Monglo - 它看起来像很棒的软件，我只是想指出两个项目之间的意图差异。

附带说明 - 所有纯 JavaScript 模块都仅限于 Titanium 应用程序中的单个执行上下文。

对于您正在构建的内容，我认为 MongloDB、JSONDB、SculeJS 和 TaffyDB 都可以完成这项工作，但实现的细节会略有不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T09:58:51.950

我遇到了同样的问题。我有大约 5mb 的数据，我想用应用程序存储，而不是让它下载。

我最终得到了一个高性能的 SQLite 数据库。它没有你想的那么糟糕。这可能不是一个很好的解决方案，但由于缺乏选择，恕我直言，这是一个非常好的解决方案。

只需创建几个表和函数来将它们解析到数据库，反之亦然，我向你保证，你会很高兴。

不要将 JSON 存储在数据库中，而是适当地存储值。

# python - C 或 Python 在创建套接字连接时的性能和可扩展性？

> ID：12521751
> 
> 赞同：2
> 
> 时间：2012-09-20T22:20:38.740
> 
> 标签：python, c, performance, sockets, scalability

我确实看到了这篇文章，但它没有回答我的问题：[C/Python 套接字性能？](https://stackoverflow.com/questions/1909471/c-python-socket-performance)

我的任务是创建一个可以基于套接字创建数千个连接的应用程序。我可以在 Python 中做到这一点，但我希望有提高性能的空间。由于我过去的项目，我知道在 Python 中这是可能的，但我很好奇如果我用 C（而不是 C++）来做这个项目，性能会有多大提升？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T22:49:22.597

It really depends on what you're doing with the sockets.

The best generic answer is: Usually Python is good enough that it doesn't matter, but sometimes it's not.

The overhead in the time taken to create and connect sockets is minimal, and reading and writing isn't much worse. But that doesn't matter, that's pretty much never any significant time spent doing that anyway.

There are reactors and proactors for Python every bit as good as the general-purpose ones available for C (and half of the C libraries have Python bindings). If you're not doing much significant work beyond the sockets, this is often your main bottleneck. If you've got a very specific use pattern and/or very tightly specified hardware, you might be able to write a custom reactor or proactor that beats out anything general-purpose. In that case, you pretty much have to go with C, not Python.

But usually, you've got significant work to do beyond just manipulating sockets.

If that work is mostly independent and highly parallelizable, C obviously beats Python (because of the GIL), unless the jobs are heavy enough that you can multi-process them (and keep in mind that "heavy enough" can be pretty heavy on Windows platforms). Except, of course, that it's incredibly easy to screw up performance (not to mention stability) writing multi-threaded C code; really, something like Erlang or Haskell is probably a better bet here than either C or Python. (If you're about to say, "But we've got people who are experienced at C but they can't learn Haskell", then those people are probably not good enough programmers to write multi-threaded code.)

If that work is mostly memory copying between socket buffers, and you can deal with a tightly-specified system, you may be able to write C code that optimizes zero-copies, and there's no way to do that in Python.

But if it's mostly typical things like waiting on disk or serialized computation, then it scarcely matters how you write the socket-stuff, because it's going to end up waiting on the real code anyway.

So, without any more information, I'd go with Python, because the time you save getting things up and running and debugged vs. C can be spent optimizing or otherwise improving whatever turns out to matter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:17:13.313

如果您使用的是 Windows 平台，请了解 IOCP 的每个核心一个线程的概念，并远离使用每个套接字使用或多或少需要一个线程的线程池。

# javafx - javaFX构建路径MVC fxml的问题

> ID：12521756
> 
> 赞同：1
> 
> 时间：2012-09-20T22:21:19.090
> 
> 标签：javafx, fxml

我目前正在使用 netbeans 7.2 在 java FX 2.1 中构建管理员

我有以下问题：

我正在以 MVC 模式开发这个特定工具，因此我创建了 3 个包，分别称为模型、视图和控制器。

我的问题是，在 netbeans 中构建项目时，如果它们不在视图包中，它只会读取应该在视图包中的文件。让我给你一个上下文路径：

```
.../administradorInfinix/view/
.../administradorInfinix/controller/
.../administradorInfinix/model 
```

所以它只会读取关于视图的 fxml 文件，如果它们在视图包之外（`.../administradorInfinix/`）

这是我设置文件地址的地方：

```
 private void irInicioSesion() {
    try {
        replaceSceneContent("InicioSesion.fxml");
    } catch (Exception ex) {
        Logger.getLogger(AdministradorINFINIX.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

您可以看到文件名为`InicioSesion.fxml`，它应该在视图包内，但如果是这种情况，它将不会加载。

这是我用来搜索 fxml 文件的 replaceSceneContent：

```
private Parent replaceSceneContent(String fxml) throws Exception {
    Parent page = (Parent) FXMLLoader.load(AdministradorINFINIX.class.getResource(fxml), null, new JavaFXBuilderFactory());
    Scene scene = stage.getScene();
    if (scene == null) {
        scene = new Scene(page,548,416);
        //scene.getStylesheets().add(AdministradorINFINIX.class.getResource("demo.css").toExternalForm());
        stage.setScene(scene);
    } else {
        stage.getScene().setRoot(page);
    }
    stage.sizeToScene();
    return page;
} 
```

这是它在尝试运行时给我的错误（它构建得很好但它不会运行）

```
> administradorinfinix.AdministradorINFINIX irInicioSesion
Grave: null
java.lang.IllegalStateException: Location is not set.
    at javafx.fxml.FXMLLoader.load(Unknown Source)
    at javafx.fxml.FXMLLoader.load(Unknown Source)
    at javafx.fxml.FXMLLoader.load(Unknown Source)
    at javafx.fxml.FXMLLoader.load(Unknown Source)
    at administradorinfinix.AdministradorINFINIX.replaceSceneContent(AdministradorINFINIX.java:126)
    at administradorinfinix.AdministradorINFINIX.irInicioSesion(AdministradorINFINIX.java:110)
    at administradorinfinix.AdministradorINFINIX.start(AdministradorINFINIX.java:46)
    at com.sun.javafx.application.LauncherImpl$5.run(Unknown Source)
    at com.sun.javafx.application.PlatformImpl$4.run(Unknown Source)
    at com.sun.javafx.application.PlatformImpl$3.run(Unknown Source)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(Unknown Source)
    at com.sun.glass.ui.win.WinApplication$2$1.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:722) 
```

第 110 行在哪里

```
 replaceSceneContent("InicioSesion.fxml"); 
```

第 126 行是

```
Parent page = (Parent) FXMLLoader.load(AdministradorINFINIX.class.getResource(fxml), null, new JavaFXBuilderFactory()); 
```

我希望你能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:45:53.887

您需要使用 FXML 文件的 URL 调用方法 FXMLLoader#setLocation。查看以下源代码，了解如何加载 FXML 文件的示例：

[https://github.com/cathive/fx-guice/blob/master/src/main/java/com/cathive/fx/guice/GuiceFXMLLoader.java](https://github.com/cathive/fx-guice/blob/master/src/main/java/com/cathive/fx/guice/GuiceFXMLLoader.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T10:15:04.650

FXMLLoader 无法找到 .fxml 文件。问题是您对 Class.getResource() 的调用返回 null。FXMLLoader.load(null) 抛出的异常非常具有误导性，它应该是诸如 ArgumentNullException 之类的东西。您可以通过指定完整的包路径来解决加载资源文件的问题，在我的情况下，这样的调用有效：

```
 FXMLLoader loader = new FXMLLoader(new Employee().getClass().getResource("/de/mycompany/mypackage/view/loginform.fxml")); 
```

我希望这有帮助。

# javascript - 如何在 Grails 的 jstree 中填充数据？

> ID：12521757
> 
> 赞同：0
> 
> 时间：2012-09-20T22:21:30.607
> 
> 标签：javascript, grails, jstree

我仍在努力在 Grails gsp 中填充 jstree。到目前为止我所拥有的是这个（重新输入所以原谅语法错误）：

```
<script>
    $("#treeView").jsTree();
</script>

<div id="treeView">
    <g:each in="${atomMap}">
        <li id="root"><a href="#">${it.key}<li>
            <ul>
                <g:each in="${it.value}">
                    <li><a href="#">${it.value}</a></li>
                </g:each>
            </ul>
        </li>
    </g:each>
</div> 
```

我的数据在页面上显示为项目符号列表，然后 jstree 用空数据覆盖它。如何将“atomMap”中的数据与树本身相关联？我看到的所有示例都使用树中“html_data”的静态数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:50:18.260

问题解决了 - 我错过了外部标签。

# javascript - 仅使用文本偏移量在字符串中插入标签

> ID：12521760
> 
> 赞同：3
> 
> 时间：2012-09-20T22:21:40.467
> 
> 标签：javascript, jquery, regex, text, offset

我一直在努力使用 javascript 字符串方法和正则表达式，我可能忽略了一些明显的东西。我希望通过更详细地重申 tofutim 的[问题，我没有违反任何协议。](https://stackoverflow.com/questions/11166810/given-offsets-adding-span-to-a-text-string-using-javascript)对他的问题的回答集中在 s.replace() 上，但要让它起作用，您必须知道要替换哪个子字符串，替换所有子字符串，或者能够以某种方式唯一地识别要替换的字符串正则表达式。像他一样，我**只有**一个这样的文本偏移数组：

```
[[5,9], [23,27]] 
```

和这样的字符串：

```
"eggs eggs spam and ham spam" 
```

鉴于这些限制，是否有一种直接的方法（javaScript 或 jQuery 的一些快捷方式）来获得这样的字符串？

```
"eggs <span>eggs</span> spam and ham <span>spam</span>" 
```

我事先不知道替换字符串是什么，或者在基本文本中可能出现了多少次。我只知道它们的偏移量，而且我**只想**用标签包装它们的偏移量所标识的事件。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T23:26:16.637

我找到了一种使用正则表达式的方法。不确定性能，但它简短而甜蜜：

```
/**
 * replaceOffset
 * @param str A string
 * @param offs Array of offsets in ascending order [[2,4],[6,8]]
 * @param tag HTML tag
 */
function replaceOffset(str, offs, tag) {
  tag = tag || 'span';
  offs.reverse().forEach(function(v) {
    str = str.replace(
      new RegExp('(.{'+v[0]+'})(.{'+(v[1]-v[0])+'})'), 
      '$1<'+tag+'>$2</'+tag+'>'
    );
  });
  return str;
} 
```

**演示：http:** [//jsbin.com/aqowum/3/edit](http://jsbin.com/aqowum/3/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T23:18:39.553

首先，您需要向后迭代，以确保您最终不会覆盖先前所做的替换，但是，在我的示例中，这并不重要，因为字符串最终会一次全部重新组装。

```
// > interpolateOnIndices([[5,9], [23,27]], "eggs eggs spam and ham spam");
// < 'eggs <span>eggs</span> spam and ham <span>spam</span>'

function interpolateOnIndices(indices, string) {
    "use strict";
    var i, pair, position = string.length,
        len = indices.length - 1, buffer = [];
    for (i = len; i >= 0; i -= 1) {
        pair = indices[i];
        buffer.unshift("<span>",
                       string.substring(pair[0], pair[1]),
                       "</span>",
                       string.substring(pair[1], position));
        position = pair[0];
    }
    buffer.unshift(string.substr(0, position));
    return buffer.join("");
} 
```

这比带有`splice`ing 的示例要好一些，因为它不会创建额外的数组（拼接本身会创建额外的数组）。在其他函数中重复使用映射和创建函数会占用一定的内存，但它的运行速度也不是很快......虽然它有点短。

从理论上讲，在大字符串连接上应该比多个连接更有优势，因为内存分配将进行一次，而不是随后丢弃半生不熟的字符串。当然，所有这些都不需要您关心，除非您正在处理大量数据。

* * *

**编辑：**

因为我手头有太多时间，所以我决定做一个测试，看看如何在更大（但相当现实）的数据集上比较变化，下面是我的测试代码和一些结果......

```
function interpolateOnIndices(indices, string) {
    "use strict";
    var i, pair, position = string.length,
        len = indices.length - 1, buffer = [];
    for (i = len; i >= 0; i -= 1) {
        pair = indices[i];
        buffer.unshift("<span>",
                       string.substring(pair[0], pair[1]),
                       "</span>",
                       string.substring(pair[1], position));
        position = pair[0];
    }
    buffer.unshift(string.substr(0, position));
    return buffer.join("");
}

function indexWrap(indexArr, str) {
    var chars = str.split("");
    for(var i = 0; i < indexArr.length; i++) {
        var indexes = indexArr[i];
        if(chars[indexes[0]] && chars[indexes[1]]){
            chars.splice(indexes[0], 0, "<span>");
            chars.splice(indexes[1], 0, "</span>");
        }
    }
    return chars.join("");
}

function replaceOffset(str, offs, tag) {
    tag = tag || "span";
    offs.reverse().forEach(
        function(v) {
            str = str.replace(
                new RegExp("(.{" + v[0] + "})(.{" + (v[1] - v[0]) + "})"), 
                "$1<" + tag + ">$2</" + tag + ">"
            );
        });
    return str;
}

function generateLongString(pattern, times) {
    "use strict";
    var buffer = new Array(times);
    while (times >= 0) {
        buffer[times] = pattern;
        times -= 1;
    }
    return buffer.join("");
}

function generateIndices(pattern, times, step) {
    "use strict";
    var buffer = pattern.concat(), block = pattern.concat();
    while (times >= 0) {
        block = block.concat();
        block[0] += step;
        block[1] += step;
        buffer = buffer.concat(block);
        times -= 1;
    }
    return buffer;
}

var longString = generateLongString("eggs eggs spam and ham spam", 100);
var indices = generateIndices([[5,9], [23,27]], 100,
                              "eggs eggs spam and ham spam".length);

function speedTest(thunk, times) {
    "use strict";
    var start = new Date();
    while (times >= 0) {
        thunk();
        times -= 1;
    }
    return new Date() - start;
}

speedTest(
    function() {
        replaceOffset(longString, indices, "span"); },
    100); // 1926

speedTest(
    function() {
        indexWrap(indices, longString); },
    100); // 559

speedTest(
    function() {
        interpolateOnIndices(indices, longString); },
    100); // 16 
```

在 amd64 Linux (FC-17) 上针对 V8 (Node.js) 进行了测试。

我没有测试未定义的答案，因为我不想加载那个库，尤其是它对这个测试没有任何用处。我想它会在 andbeyond's 和 elclanrs 的变体之间借用某个地方，尽管更倾向于 elclanrs 的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T22:38:53.117

你可以试试`slice`方法。

```
var arr = [[5,9], [23,27]];
arr = arr.reverse()

$.each(arr, function(i, v){
    var f = v[0], last = v[1];
    $('p').html(function(i, v){
        var o = v.slice(0, f);
        var a = '<span>' + v.slice(f, last) + '</span>';
        var c = v.slice(last, -1);
        return o+a+c
    })
}) 
```

[http://jsfiddle.net/rjQt7/](http://jsfiddle.net/rjQt7/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T22:41:10.193

快速解决方案（未测试）

```
function indexWrap(indexArr,str){
  // explode into array of each character
  var chars = str.split('');
  // loop through the MD array of indexes
  for(var i=0; i<indexArr.length;i++){
    var indexes = indexArr[i];
    // if the two indexes exist in the character array
    if(chars[indexes[0]] && chars[indexes[1]]){
      // add the tag into each index
      chars.splice(indexes[0],0,"<span>");
      chars.splice(indexes[1],0,"</span>");
    }
  }
  // return the joined string
  return chars.join('');  
} 
```

就个人而言，我喜欢字符串替换解决方案，但如果你不想要一个，这可能会奏效

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T22:39:59.680

您可以使用子字符串方法 String.substring (startIndex, endIndex); 描述：返回开始和结束索引之间的字符串使用：

```
var source="hello world";
var result=source.substring (3,7); //returns 'lo wo' 
```

你已经有一个带有初始和最终索引的数组，所以你几乎完成了:)

# backbone.js - Backbone.js 在模型中设置 URL 参数并将其与 fetch 一起使用

> ID：12521765
> 
> 赞同：9
> 
> 时间：2012-09-20T22:22:03.613
> 
> 标签：backbone.js, marionette

我想从带有参数的特定 url 获取模型： url: server/somecontroller/id/?type=gift

简单的工作方式是：

```
collection.fetch({ data: { type: 'gift'} }); 
```

但我想在模型中设置它：

```
 ...
    if(id){
      App.coupon = new AffiliatesApp.Coupon({id: id});
    } else {
      App.coupon = new AffiliatesApp.Coupon({id: 'somecontroller'}, {type: 'gift'});
    }
    App.coupon.fetch(); 
```

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T19:48:18.117

实现这一点的最简单方法是用您定义的方法在 Coupon 模型上覆盖 Backbone 的[url方法。](http://backbonejs.org/#Model-url)例如，您可以这样做：

```
Affiliates.Coupon = Backbone.Model.extend({
  urlRoot : "server/somecontroller/",
  url : function(){
    var url = this.urlRoot + this.id;
    if(this.get("type")){
      url = url + "/?type=" + this.get("type");
    }
    return url;
  }
}); 
```

此解决方案易于实现，但有一个缺点：生成的 URL 将用于同步到服务器的每个操作（获取、保存、..）。

如果您需要根据您正在执行的操作更好地控制 URL 的生成，您将需要为您的模型覆盖 Backbone 的[Sync](http://backbonejs.org/#Sync)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T11:22:16.250

可以通过覆盖模型中的 fetch 方法来使用一些自定义数据来完成。使用[CoffeeScript](http://coffeescript.org/)可能看起来像这样：

```
class AffiliatesApp.Coupon extends Backbone.Model
  fetch: ->
    super(data: { type: @get('type') }) 
```

请注意，此示例将忽略传递给 的任何属性`coupon.fetch()`，但是可以轻松地针对任何覆盖逻辑对其进行调整。

# java - 表达式错误的非法开始？

> ID：12521767
> 
> 赞同：0
> 
> 时间：2012-09-20T22:22:08.460
> 
> 标签：java

我在这一行中收到错误“表达式的非法开始”。我正在创建一个整数数组，我想在其中使用另一种方法，但我无法传递它。

```
import java.awt.Graphics;
import java.awt.Color;
import java.awt.Image;
import javax.swing.*;
import java.lang.Math;
import java.util.Random;

public class testApp extends JApplet 
{
    public void init() 
{
    this.add(new RandomCardsPanel());
}

public class RandomCardsPanel extends JPanel 
{
    public Image card1, card2, card3, card4, card5, card6, card7, card8, card9, card10, card11, card12, card13;
    public Image card14, card15, card16, card17, card18, card19, card20, card21, card22, card23, card24, card25, card26;
    public Image card27, card28, card29, card30, card31, card32, card33, card34, card35, card36, card37, card38, card39;
    public Image card40, card41, card42, card43, card44, card45, card46, card47, card48, card49, card50, card51, card52;

    public RandomCardsPanel() 
    {
        Image[] card = new Image[52];

        card[0] = getImage( getDocumentBase(), "c1.gif" );
        card[1] = getImage( getDocumentBase(), "c2.gif" );
        card[2] = getImage( getDocumentBase(), "c3.gif" );
        card[3] = getImage( getDocumentBase(), "c4.gif" );
        card[4] = getImage( getDocumentBase(), "c5.gif" );
        card[5] = getImage( getDocumentBase(), "c6.gif" );
        card[6] = getImage( getDocumentBase(), "c7.gif" );
        card[7] = getImage( getDocumentBase(), "c8.gif" );
        card[8] = getImage( getDocumentBase(), "c9.gif" );
        card[9] = getImage( getDocumentBase(), "c10.gif" );
        card[10] = getImage( getDocumentBase(), "cj.gif" );
        card[11] = getImage( getDocumentBase(), "cq.gif" );
        card[12] = getImage( getDocumentBase(), "ck.gif" );
        card[13] = getImage( getDocumentBase(), "d1.gif" );
        card[14] = getImage( getDocumentBase(), "d2.gif" );
        card[15] = getImage( getDocumentBase(), "d3.gif" );
        card[16] = getImage( getDocumentBase(), "d4.gif" );
        card[17] = getImage( getDocumentBase(), "d5.gif" );
        card[18] = getImage( getDocumentBase(), "d6.gif" );
        card[19] = getImage( getDocumentBase(), "d7.gif" );
        card[20] = getImage( getDocumentBase(), "d8.gif" );
        card[21] = getImage( getDocumentBase(), "d9.gif" );
        card[22] = getImage( getDocumentBase(), "d10.gif" );
        card[23] = getImage( getDocumentBase(), "dj.gif" );
        card[24] = getImage( getDocumentBase(), "dq.gif" );
        card[25] = getImage( getDocumentBase(), "dk.gif" );
        card[26] = getImage( getDocumentBase(), "h1.gif" );
        card[27] = getImage( getDocumentBase(), "h2.gif" );
        card[28] = getImage( getDocumentBase(), "h3.gif" );
        card[29] = getImage( getDocumentBase(), "h4.gif" );
        card[30] = getImage( getDocumentBase(), "h5.gif" );
        card[31] = getImage( getDocumentBase(), "h6.gif" );
        card[32] = getImage( getDocumentBase(), "h7.gif" );
        card[33] = getImage( getDocumentBase(), "h8.gif" );
        card[34] = getImage( getDocumentBase(), "h9.gif" );
        card[35] = getImage( getDocumentBase(), "h10.gif" );
        card[36] = getImage( getDocumentBase(), "hj.gif" );
        card[37] = getImage( getDocumentBase(), "hq.gif" );
        card[38] = getImage( getDocumentBase(), "hk.gif" );
        card[39] = getImage( getDocumentBase(), "s1.gif" );
        card[40] = getImage( getDocumentBase(), "s2.gif" );
        card[41] = getImage( getDocumentBase(), "s3.gif" );
        card[42] = getImage( getDocumentBase(), "s4.gif" );
        card[43] = getImage( getDocumentBase(), "s5.gif" );
        card[44] = getImage( getDocumentBase(), "s6.gif" );
        card[45] = getImage( getDocumentBase(), "s7.gif" );
        card[46] = getImage( getDocumentBase(), "s8.gif" );
        card[47] = getImage( getDocumentBase(), "s9.gif" );
        card[48] = getImage( getDocumentBase(), "s10.gif" );
        card[49] = getImage( getDocumentBase(), "sj.gif" );
        card[50] = getImage( getDocumentBase(), "sq.gif" );
        card[51] = getImage( getDocumentBase(), "sk.gif" );

        String cardNumber; 
        double cardRandom;
        int cardRandomNumber;
        int[] ranNum = new int [10];
        Random ran = new Random();

        for (int number = 0; number <=  9; )
        {
            cardRandom = ran.nextInt(52) + 1;
            cardRandomNumber = (int)Math.round( cardRandom );

            if ( cardRandomNumber > 0 && cardRandomNumber <= 52 )
            { 
                ranNum[number] = cardRandomNumber;
                number++;
            }
        }   
    }

   public void paintComponent(Graphics g) 
    {
        setBackground( Color.green );
        g.drawImage( cards[ranNum[0]], 10, 10, this);
    }
} 
```

}

有人知道我在这里做错了什么吗？我觉得好像这是一个简单的错误，但我无法理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:27:55.553

您可以在方法或构造函数中使用的唯一修饰符是 final 或 default。尝试删除 int 数组的 public 修饰符。

尝试改变这一点

```
 public int[] ranNum = new int [10];  // Its in this line 
```

至

```
 int[] ranNum = new int [10];  // Its in this line 
```

# java - 当线程在同步块内崩溃时，锁会发生什么？

> ID：12521776
> 
> 赞同：5
> 
> 时间：2012-09-20T22:23:10.803
> 
> 标签：java, multithreading, synchronization

假设 Thread-1 在对象上同步

```
synchronize(object){
  //statement1
  //statement2
  //statement3
} 
```

如果 Thread-1 在 statement2 上崩溃，对象上的锁会发生什么情况，当这种情况发生时，JVM 会自动释放 Thread-1 上的锁吗？因为否则如果 Thread-2 正在等待释放对象上的锁并且 Thread-1 崩溃，则 Thread-2 将永远等待。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T22:25:35.550

它在[JLS #14.19](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.19)中定义：

```
synchronized ( Expression ) Block 
```

> 如果 Block 的执行由于任何原因突然完成，则监视器被解锁并且同步语句由于同样的原因突然完成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T08:26:07.277

你应该想到`synchronized`块：

```
synchronized(lock) {
   // code
} 
```

相当于（伪代码）：

```
lock.acquire();
try {
   // code
} finally {
   lock.release();
} 
```

因此，无论代码部分发生什么，锁都会被释放。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T22:24:13.667

是的，监视器（非锁定）将被释放。

如果您想阅读它，Java VM 规范将对此进行具体说明。

JVM 规范中的确切参考可以在[第 2.11.10 节中找到](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.11.10)

> 当调用设置了 ACC_SYNCHRONIZED 的方法时，执行线程进入监视器，调用方法本身，然后退出监视器，无论方法调用正常完成还是突然完成。在执行线程拥有监视器期间，没有其他线程可以进入它。如果在调用同步方法期间抛出异常并且同步方法没有处理异常，*则在异常被（重新）抛出同步方法之前自动退出该方法的监视器。*

# javascript - 使用 jquery 进行文本操作

> ID：12521780
> 
> 赞同：1
> 
> 时间：2012-09-20T22:23:46.227
> 
> 标签：javascript, jquery

有没有办法可以更改这段代码在“{}”之间而不是在带有.chord的标签之间工作？（jQuery）

```
//Basically it iterates over my text and transposes chords based on an array 
   var match;
   var chords = ['C','C#','D','D#','E','F','F#','G','G#','A','A#','B','C','Db','D','Eb','E','F','Gb','G','Ab','A','Bb','B','C'];
   var chords2 = ['C','Db','D','Eb','E','F','Gb','G','Ab','A','Bb','B','C','C#','D','D#','E','F','F#','G','G#','A','A#','C'];
   var chordRegex = /(?:C#|D#|F#|G#|A#|Db|Eb|Gb|Ab|Bb|C|D|E|F|G|A|B)/g;

$('.chord').each(function(){
        ///// initializes variables /////
        var currentChord = $(this).text(); // gatheres each object
        var output = "";
        var parts = currentChord.split(chordRegex);
        var index = 0;
        /////////////////////////////////
        while (match = chordRegex.exec(currentChord)){
            var chordIndex = chords2.indexOf(match[0]);
            output += parts[index++] + chords[chordIndex+1];
        }
        output += parts[index];
        $(this).text(output);
    }); 
```

这是我到目前为止所拥有的，但它不起作用

```
 var iframeBody=$('iframe').contents().find('body');
    var str = $(iframeBody).html();
    var rec = /\{(.*?)\}/g, matchesc;
    while (matchesc = rec.exec(str)) {
        ///// initializes variables /////
        var currentChord = matchesc[1]; // gatheres each object
        var output = "";
        var parts = currentChord.split(chordRegex);
        var index = 0;
        /////////////////////////////////
        while (match = chordRegex.exec(currentChord)){
            var chordIndex = chords2.indexOf(match[0]);
            output += parts[index++] + chords[chordIndex+1];
        }
        output += parts[index];
        //$(this).text(output);
        matchesc[1] = output;
        $(iframeBody).html(str.replace(matchesc[1], output));
        //alert(matchesc[1]);
    } 
```

编辑

.chord 通常看起来像这样......

> ```
> <span class="chord">C#m</span> 
> ```

但现在看起来像这样......

> ```
> {C#m} 
> ```

但我仍然希望能够转置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:41:31.077

只需在文本中找到大括号，然后提取它们之间的文本。我曾经`.indexOf`找到括号并`.slice`提取它们之间的文本。

```
currentChord = currentChord.slice(currentChord.indexOf("{"),currentChord.indexOf("}")); 
```

它应该适用于您的原始代码片段：

```
$('.chord').each(function(){
    ///// initializes variables /////
    var currentChord = $(this).text(); // gatheres each object
    var output = "";
    currentChord = currentChord.slice(currentChord.indexOf("{")+1,currentChord.indexOf("}");
    var parts = currentChord.split(chordRegex);
    var index = 0;
    /////////////////////////////////
    while (match = chordRegex.exec(currentChord)){
        var chordIndex = chords2.indexOf(match[0]);
        output += parts[index++] + chords[chordIndex+1];
    }
    output += parts[index];
    $(this).text(output);
}); 
```

这是一个[jsFiddle](http://jsfiddle.net/6fEy9/1/)。

* * *

## 编辑：

随着你的标记看起来像`This {A} is a {G} great song. {B} How awesome is {D} this?`，我改变了整个方法。[更新后的jsFiddle](http://jsfiddle.net/6fEy9/2/)中的完整示例。

与其使用`.each`，不如将内容作为字符串 ( `text`)，使用字符串方法`.match`( `text`) 进行匹配，该方法返回一个数组，然后遍历该数组，从数组中取出和弦 ( `currentChord = String(matches[i])`)，用您的和弦进行操作，然后使用 string 方法`.replace`将数组 ( `matches[i]`) 中包含的匹配项替换为已编辑的和弦 ( `output`)。

也许这会更有意义：

```
var matches = $('#main').text().match(rec);
console.log(matches);
var text = $('#main').text();
for (var i = 0; i < matches.length; i++) {
    ///// initializes variables /////
    var currentChord = String(matches[i]);
    currentChord = currentChord.slice(currentChord.indexOf("{") + 1, currentChord.indexOf("}"));
    console.log(currentChord);
    var output = "";
    var parts = currentChord.split(chordRegex);
    var index = 0;
    /////////////////////////////////
    while (match = chordRegex.exec(currentChord)) {
        var chordIndex = chords2.indexOf(match[0]);
        output += parts[index++] + chords[chordIndex + 1];
    }
    output += parts[index];
    text = text.replace(matches[i], output);
}
$('#main').text(text); 
```

# php - 安全的 XML 提要导入

> ID：12521782
> 
> 赞同：0
> 
> 时间：2012-09-20T22:24:00.157
> 
> 标签：php, xml, curl, import, xml-parsing

我正在处理从实时 XML 提要导入的商店产品。

现在我有一个问题，我使用以下代码导入了几个 XML 提要，除了这个：

[XML 实时提要](https://services.it4profit.com/product/sl/712/PriceAvail.xml?USERNAME=tomicurk&PASSWORD=pocenipc1)

我用于所有提要的代码是：

```
<?php 
```

//dropshipper 的提要 URL $myFeed = 'http://feedurl/feed.xml';

// 指定要保存的文件的名称 $myFilename = 'some_feed.xml';

```
if ($myFeed != '') {
//  Initialize the cURL session
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $myFeed);
//Create a new file
$fp = fopen($myFilename, 'w');
// Save to file
curl_setopt($ch, CURLOPT_FILE, $fp);
// Execute the cURL session
curl_exec ($ch);
//Close cURL session and file
curl_close ($ch);
fclose($fp);

echo "Some Feed Imported Successfully!";

} 
```

?>

但是不能从脚本中读取 Mentoined 提要，而且我不知道如何创建导入。此提要可以在浏览器中打开，每个人都可以看到数据，但无法通过脚本将其导入服务器。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:35:25.127

首先，您确定将您的用户名 (tomicurc) 和密码发布到您的 XML-Feed 是一个好主意吗？其次，您是否尝试过 file_get_contents？它对我有用，是一种获取远程数据的简单方法，然后可以存储这些数据。

编辑：

尝试类似的东西

```
if ($myFeed != '') {
    if($ch = curl_init()) {
        if(curl_setopt($ch, CURLOPT_URL, $myFeed)) {
            if($fp = fopen($myFilename, 'w')) {
                if(curl_setopt($ch, CURLOPT_FILE, $fp)) {
                    if(curl_exec ($ch)) {
                        curl_close ($ch);
                        fclose($fp);
                        echo "close completed, finishing";
                    } else {
                        echo "curl_exec failed";
                    }
                } else {
                    echo "curl_setopt CURLOPT_FILE failed";
                }
            } else {
                echo "fopen failed";
            }
        } else {
            echo "curl_setopt CURLOPT_URL failed";
        }
    } else {
        echo "curl init failed";
    }
} 
```

# ios - Grails：在生产中的网络应用程序上找到文件

> ID：12521785
> 
> 赞同：0
> 
> 时间：2012-09-20T22:24:16.193
> 
> 标签：ios, grails, apple-push-notifications, grails-config

我在我的 grails 项目的 web-app 中有一个文件。在一些 apns 插件的配置文件中，将配置如下

```
 environments {
    development {
        apns {
            pathToCertificate = "web-app/apns-dev.p12"
            password = "password"
            environment = "sandbox"
        }
    }
    test {
        apns {
            pathToCertificate = "web-app/apns-dev.p12"
            password = "password"
            environment = "sandbox"
        }
    }

    production {
        apns {
            pathToCertificate = "apns-prod.p12"
            password = "password"
            environment = "production"
        }
    }
} 
```

我将生产的 p12 放在没有“web-app”的原因是因为我注意到该文件直接位于根目录下的生产上，但它给了我 fileNotFoundException .. 那么我该如何找到它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:43:01.477

apns[插件页面](http://grails.org/plugin/apns)状态

> 如果您无权访问服务器的文件系统，您还可以将 pathToCertificate 替换为 certificateResourcePath 并将其设置为您的证书路径，相对于 src/java。因此，例如，如果您的证书在 src/java/mycert.p12 中，则可以设置 certificateResourcePath=mycert.p12。

这可能是您最好的选择，允许您使用相对于 src/java 的路径而不是绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:32:32.003

这是获取文件绝对路径的（有点hacky）方法：

首先，将文件放在`classpath`某个地方（例如目录中的“资源”`conf`目录）。然后，将您的`pathToCertificate`行更改为：

```
pathToCertificate = ApplicationHolder.application.parentContext.getResource("classpath:resources/apns-dev.p12").file.absolutePath 
```

这应该解析为文件系统上该文件的绝对路径。

# java - 如何在另一个 JPanel 内的 JPanel 上绘制 Graphics2D？

> ID：12521788
> 
> 赞同：2
> 
> 时间：2012-09-20T22:24:39.223
> 
> 标签：java, graphics, jpanel, graphics2d

我想创建 4 个 JPanel，在每个 JPanel 上绘制一个白色矩形，然后将它们放入一个大 JPanel 中。Big JPanel 在主框架内。

但是，以下代码不起作用。请告诉我，如何解决这个问题？

```
import javax.swing.*;
import java.awt.Graphics;

import java.io.*;
import java.net.*;

import java.awt.*;
import java.awt.event.*;
import java.awt.geom.Rectangle2D;
import java.io.IOException;

public class Main extends JFrame
{

public void GUI () {
    setBounds(0, 0, 480, 960);
    addWindowListener(new WindowAdapter(){
        public void windowClosing(WindowEvent we){

            System.exit(0);
            }
        });
        setMinimumSize(new Dimension(480, 960));
        setResizable(false);

        JPanel mainPanel = new JPanel();
        GridLayout GL = new GridLayout(4,0);
        mainPanel.setLayout(GL);

    JPanel panel1 = new MyCanvas();
    JPanel panel2 = new MyCanvas();
    JPanel panel3 = new MyCanvas();
    JPanel panel4 = new MyCanvas();

    mainPanel.add(panel1);
    mainPanel.add(panel2);
    mainPanel.add(panel3);
    mainPanel.add(panel4);

    add(mainPanel);

    setVisible(true);
}

public static void main(String args[]) throws IOException
{
    new Main().GUI();
}

class MyCanvas extends JPanel {

    public void drawCanvas(Graphics g) {

        super.paintComponent( g ); // call superclass's paintComponent  

        Graphics2D g2 = ( Graphics2D ) g; // cast g to Graphics2D  

        g2.setColor(Color.WHITE);

        double x = 100;
        double y = 100;
        double width = x + 200;
        double height = y + 50;

        g2.fillRect(50, 50, 380, 200);
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T22:26:28.100

这应该做什么？：

```
public void drawCanvas(Graphics g) {
  ....
} 
```

此方法不会覆盖任何 JPanel 绘图方法，因此当 JVM 决定绘制您的 MyCanvas JPanel 时，不会定期调用此方法。

我认为相反，您想覆盖类的`paintComponent(...)`方法，只需将方法重命名为`paintComponent(...)`. 如果/当您这样做时，请不要忘记使用`@Override`注释以确保您使用正确的签名覆盖该方法。您还需要将方法的访问说明符更改为`protected`，而不是`public`。

接下来，您将想要对您正在创建的那些双变量做一些事情。

# jquery - 捕获动态 HTML 表格的单元格位置

> ID：12521792
> 
> 赞同：0
> 
> 时间：2012-09-20T22:25:18.007
> 
> 标签：jquery, html, partial-views

有没有办法在局部视图中识别动态 HTML 表格的单元格位置？

动态表：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<dynamic>" %>

<div>
<table>
        <tr>
            <th>
                Student ID
            </th>
            <th>
                Quarter
            </th>            
            <th>
                Subject
            </th>
            <th>
                Section
            </th>             
</table>
</div>
<div>
<table>
        <% if (Model != null)                    
           foreach (var item in Model) { %>
         <tr>
             <td>
                 Html.Encode(item.StudentID)
             </td>
            <td>
                 Html.Encode(item.Quarter)
            </td>  
            <td>
                 Html.Encode(item.Subject)
            </td>
            <td>
                 Html.Encode(item.Section)
            </td>        
    <%}%>
</table>
</div> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:34:06.937

如果我理解正确？

```
$('td').click(function(){
    var row = $(this).parent().index();
    var cell = $(this).index();
    $(this).text(row + '/' + cell);
}).trigger('click') 
```

​</p>

[http://jsfiddle.net/2HUtH/](http://jsfiddle.net/2HUtH/)

# c++ - 正整数 uniq 的组合（顺序不重要）

> ID：12521793
> 
> 赞同：1
> 
> 时间：2012-09-20T22:25:31.480
> 
> 标签：c++, algorithm, combinations

所以，我正在为我的问题寻找一个好的解决方案。

我需要生成（打印）整数列表的所有组合，例如：如果数组包含从 0 到 n-1 的整数，其中 n = 5：

```
int array[] = {0,1,2,3,4}; 
```

组合中整数的顺序并不重要，这意味着 {1,1,3}、{1,3,1} 和 {3,1,1} 实际上是相同的组合，因为它们都包含一个 3 和两个 1。

所以对于上面的数组，长度为 3 的所有组合：

```
0,0,0 -> the 1st combination
0,0,1
0,0,2
0,0,3
0,0,4
0,1,1 -> this combination is 0,1,1, not 0,1,0 because we already have 0,0,1\. 
0,1,2
0,1,3
0,1,4
0,2,2 -> this combination is 0,2,2, not 0,2,0 because we already have 0,0,2\. 
0,2,3
.
.
0,4,4
1,1,1 -> this combination is 1,1,1, not 1,0,0 because we already have 0,0,1\. 
1,1,2
1,1,3
1,1,4
1,2,2 -> this combination is 1,2,2, not 1,2,0 because we already have 0,1,2.
.
.
4,4,4 -> Last combination 
```

现在我为此编写了代码，但我的问题是：如果数组中的数字不是从 0 到 n-1 的整数，假设数组是这样的

```
int array[] = {1,3,6,7}; 
```

我的代码不适用于这种情况，任何用于解决此问题的算法或代码，，

这是我的代码：

```
unsigned int next_combination(unsigned int *ar, int n, unsigned int k){
    unsigned int finished = 0;
    unsigned int changed = 0;
    unsigned int i;

    for (i = k - 1; !finished && !changed; i--) {
        if (ar[i] < n - 1) {
            /* Increment this element */
            ar[i]++;
            if (i < k - 1) {
                /* Make the elements after it the same */
                unsigned int j;
                for (j = i + 1; j < k; j++) {
                    ar[j] = ar[j - 1];
                }
            }
            changed = 1;
        }
        finished = i == 0;
    }
    if (!changed) {
        /* Reset to first combination */
        for (i = 0; i < k; i++){
            ar[i] = 0;
        }
    }
    return changed;
} 
```

这是主要的：

```
int main(){
    unsigned int numbers[] = {0, 0, 0, 0, 0};
    const unsigned int k = 3;
    unsigned int n = 5;

    do{
        for(int i=0 ; i<k ; ++i)
            cout << numbers[i] << " ";
        cout << endl;
    }while (next_combination(numbers, n, k));

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T02:32:15.283

此代码要求“元素池”数组从最小值到最大值排序，没有重复条目。

该函数`first_combination`将结果数组（“dist”）初始化为第一个组合。在此之后，`next_combination`在循环中调用，直到它返回 false （就像在您的示例中一样）。“n”和“k”参数已被替换为获取数组大小的模板参数——因此除了结果之外，枚举函数还需要池数组。

```
#include <iostream>

template<typename T, int N, int K>
void first_combination(const T (&pool)[N], T (&dist)[K]) {
    for(int ki=0; ki<K; ++ki) {
        dist[ki] = pool[0];
    }
}

template<typename T, int N, int K>
bool next_combination(const T (&pool)[N], T (&dist)[K]) {
    int ni = 0;;
    int ki = 0;

    for(;;) {
        const int prev_ni = ni;
        // search the pool for the value in this slot 
        for(ni=0; pool[ni] != dist[ki]; ++ni) {
            if(ni == N) return false; // slot contains a value not found in the pool
        }

        if(++ni < N) break;

        ni = 0;
        dist[ki] = pool[0];
        if(++ki == K) return false;
    }

    int v = pool[ni];

    dist[ki] = v;

    // code below assumes pool[] is sorted
    for(--ki; ki>=0; --ki) {
        if(dist[ki] < v) {
            dist[ki] = v;
        }
        else {
            v = dist[ki];
        }
    }

    return true;
}

template<typename T, int COUNT>
void dumparray( T (&dist)[COUNT]) {
    std::cout << '{';
    for(int i=0; i<COUNT; ++i) {
        if(i) std::cout << ',';
        std::cout << dist[i];
    }
    std::cout << '}' << std::endl;
}

int main(int argc, char* argv[]) {
    const int pool[] = {1,3,6,7};
    int dist[3] = {0};

    first_combination(pool, dist);
    do {
        dumparray(dist);
    } while(next_combination(pool, dist));
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T22:35:02.430

如果您有工作代码来生成从`0`到的所有数字组合`n-1`，那么这非常简单。你有你的数字数组：

```
int array[] = {1,3,6,7}; 
```

现在， take `n = 4`，因为数组中有 4 个项目。生成从 0 到 3 的所有组合，并将它们用作数组的索引。您现在可以通过使用该数组的所有索引组合来获得数组值的所有组合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T22:34:25.550

所以你需要生成[组合的程序（wiki链接）](http://en.wikipedia.org/wiki/Combination)。

在这里你有完整的描述，甚至可以使用算法：[http ://compprog.wordpress.com/2007/10/17/generating-combinations-1/](http://compprog.wordpress.com/2007/10/17/generating-combinations-1/)

# asp.net-mvc - 为什么 imageresizer 不适用于 img 标签而仅适用于直接 url？

> ID：12521794
> 
> 赞同：-1
> 
> 时间：2012-09-20T22:25:33.027
> 
> 标签：asp.net-mvc, asp.net-mvc-4, imageresizer

我刚刚将 imageresizer 添加到我的 MVC4 应用程序中，但是对于如下的图像标签，它不会调整大小。如果我将 url 直接粘贴到浏览器中，它会调整大小。

```
<img class="store-display-image" src="/Images/ToughBook.jpg?width=130"> 
```

为什么是这样？我怀疑路由正在弄乱 imageresizer，但我按照指示安装了路由垫片。诊断网址 /resizer.debug.ashx 只警告我设置了 NoCache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:52:39.773

由于相同的 HTTP 请求以两种方式发生（除了这里无关的 Referer 标头），因此您的陈述不可能是真的。

必须发生以下情况之一：

1.  您的“store-display-image”css 类包含覆盖图像真实尺寸的客户端尺寸宽度/高度设置。
2.  两个图像都没有调整大小（也许您正在运行 IIS6 或 IIS7 Classic - 请参阅支持该功能的文档），但您的浏览器会自动调整“地址栏”版本的大小以适应窗口。
3.  您的页面有一个“base”标签，它正在更改“src”值。
4.  你只是在某个地方打错字。

为了避免对未来的问题投反对票，我建议提供更详细的信息，例如您在地址栏中使用的确切 URL、“store-display-image”的 css、包含 img 标签的文档 URL、您的服务器详细信息以及诊断页面的副本。

我还建议努力简化情况，例如尝试一个空的 HTML 页面和没有应用 CSS 的简单元素，以及（对于像这样的奇怪情况）两种情况的屏幕截图。

# android - 为什么我的 Android 应用程序的最大 RAM 限制为 64 MB？

> ID：12521796
> 
> 赞同：1
> 
> 时间：2012-09-20T22:25:43.417
> 
> 标签：android, crash, virtual-machine, max, ram

我正在开发一个 android 应用程序，它有很多位图，使用大量 RAM。我的问题是，当我让我的应用程序长时间运行并且内存使用量超过 64 MB 时，应用程序崩溃并出现“内存不足错误，VM 不会让我们分配......等等”。

而其他应用程序（例如 facebook）有时会达到 200 MB 内存而没有任何崩溃并且性能非常快。我的设备是 Galaxy S II。

请注意，我的问题不是关于减少内存使用量，而是关于我的应用程序和其他应用程序之间内存限制的差异。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:42:18.943

我认为应用程序可以使用的内存量是有限制的……以前是 32MB……可能有一个权限，您可以更改以请求更多内存，就像您可以请求硬件加速一样. 从快速谷歌 android:largeHeap="true" 可能是你的答案......还有 Runtime.getRuntime().maxMemory(); 可能有帮助？[这个链接](http://blog.javia.org/how-to-work-around-androids-24-mb-memory-limit/)也很有趣...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T22:47:51.840

The amount of memory that the vm is reserving for each application is not part of the Android ecosystem and can't be determined, it's part of the configuration given by the manufacturer.

Usually the last word about the memory size for each vm is given by the file `build.prop`.

Do not use the NDK trick if you do not know what are you doing.

# python - 什么是默认切片索引*真的*？

> ID：12521798
> 
> 赞同：18
> 
> 时间：2012-09-20T22:25:58.673
> 
> 标签：python, slice

从 python 文档[docs.python.org/tutorial/introduction.html#strings](http://docs.python.org/tutorial/introduction.html#strings)：

> 切片索引具有有用的默认值；省略的第一个索引默认为零，省略的第二个索引默认为被切片的字符串的大小。

对于标准情况，这很有意义：

```
>>> s = 'mystring'
>>> s[1:]
'ystring'
>>> s[:3]
'mys'
>>> s[:-2]
'mystri'
>>> s[-1:]
'g'
>>> 
```

到目前为止，一切都很好。但是，使用负步长值似乎暗示默认值略有不同：

```
>>> s[:3:-1]
'gnir'
>>> s[0:3:-1]
''
>>> s[2::-1]
'sym' 
```

很好，也许如果步骤是负数，默认值会相反。省略的第一个索引默认为被切片的字符串的大小，省略的第二个索引默认为零：

```
>>> s[len(s):3:-1]
'gnir' 
```

看起来不错！

```
>>> s[2:0:-1]
'sy' 
```

哎呀。错过了那个'm'。

然后就是大家最喜欢的字符串反转语句了。甜蜜的是：

```
>>> s[::-1]
'gnirtsym' 
```

然而：

```
>>> s[len(s):0:-1]
'gnirtsy' 
```

切片从不包含切片中第二个索引的值。我可以看到这样做的一致性。

所以我想我开始了解 slice 在各种排列中的行为。但是，我感觉第二个索引有些特殊，并且负步长的第二个索引的默认值实际上不能用数字来定义。

任何人都可以简明扼要地定义可以解释所提供示例的默认切片索引吗？文档将是一个巨大的优势。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-21T00:42:56.830

实际上没有任何默认值。省略的值会被特殊处理。

但是，在每种情况下，忽略值的处理方式与 None 完全相同。这意味着，除非您正在破解解释器（或使用`parser`,`ast`等模块），否则您可以假装默认值是 None （正如递归的答案所说），并且您总是会得到正确的答案。

引用的非正式文档不是很准确——这对于作为教程一部分的内容来说是合理的。对于真正的答案，您必须求助于参考文档。

对于 2.7.3，[序列类型](http://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)在注释 3、4 和 5 中描述了切片。

对于`[i:j]`：

> …如果省略*i*`None`或，请使用`0`。如果省略*j*`None`或，请使用`len(s)`。

对于`[i:j:k]`：

> 如果*i*或*j*被省略 or `None`，它们将成为“结束”值（结束取决于*k*的符号）。注意，*k*不能为零。如果*k*是`None`，则将其视为`1`。

对于 3.3，[序列类型](http://docs.python.org/dev/library/stdtypes.html#sequence-types-list-tuple-range)的措辞与 2.7.3 完全相同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T22:42:34.500

结束值总是*排他*的，因此 0 结束值意味着包括索引 1 但不包括 0。使用 None 代替（因为负数具有不同的含义）：

```
>>> s[len(s)-1:None:-1]
'gnirtsym' 
```

还要注意起始值；最后一个字符索引在`len(s) - 1`; 您也可以拼写为`-1`（因为负数是相对于长度解释的）：

```
>>> s[-1:None:-1]
'gnirtsym' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T22:28:37.033

[序列类型](http://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)的参考文档中的注释详细解释了这一点：

> (5.)从*i*到*j*步骤*k的**s*切片被定义为具有索引的项目序列，使得。换句话说，索引是, , ,等等，当达到*j*时停止（但从不包括*j*）。如果*i*或*j*大于，则使用。如果*i*或*j*被省略 or ，它们将成为“结束”值（结束取决于*k*的符号）。注意，*k*不能为零。如果*k*是***`x = i + n*k``0 <= n < (j-i)/k``i``i+k``i+2*k``i+3*k`****`len(s)``len(s)`**`None`***`None`, 它被当作`1`.************

 ***因此，您可以获得以下行为：

```
>>> s = "mystring"
>>> s[2:None:-1]
'sym' 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-20T22:31:23.133

我没有任何文档，但我认为默认值是`[None:None:None]`

```
>>> "asdf"[None:None:None]
'asdf'
>>> "asdf"[None:None:-1]
'fdsa' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T22:31:58.017

其实这是合乎逻辑的...

如果您查看最终值，它总是指向最后一个索引之后的索引。因此，使用`0`作为结束值，意味着它到达索引 1 处的元素。因此，您需要省略该值 .. 以便它返回您想要的字符串。

```
>>> s = '0123456789'
>>> s[0], s[:0]
('0', '')
>>> s[1], s[:1]
('1', '0')
>>> s[2], s[:2]
('2', '01')
>>> s[3], s[:3]
('3', '012')
>>> s[0], s[:0:-1]
('0', '987654321') 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-15T19:38:55.423

了解您是否正在实施很有用[**：**](https://docs.python.org/2/reference/datamodel.html#object.__getslice__)`__getslice__`默认`j`为`sys.maxsize`（[https://docs.python.org/2/reference/datamodel.html#object.getslice](https://docs.python.org/2/reference/datamodel.html#object.__getslice__)**）**

 **```
>>> class x(str):
...   def __getslice__(self, i, j):
...     print i
...     print j
...
...   def __getitem__(self, key):
...     print repr(key)
...
>>> x()[:]
0
9223372036854775807
>>> x()[::]
slice(None, None, None)
>>> x()[::1]
slice(None, None, 1)
>>> x()[:1:]
slice(None, 1, None)
>>> import sys
>>> sys.maxsize
9223372036854775807L 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-10T02:23:26.783

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-30T17:51:01.583

有很好的答案，最好的答案被选为接受的答案，但是如果您正在寻找一种方法来围绕切片的默认值进行思考，那么将列表想象为具有两端会有所帮助。从 HEAD 开始，然后是第一个元素，依此类推，直到最后一个元素之后的 TAIL 结束。

现在回答实际问题：

切片有两个默认值

1.  当 step 为 +ve 时的默认值

    0:TAIL:+ve 步

2.  step 为 -ve 时的默认值

    HEAD:-1:-ve 步骤*****

# ruby-on-rails - 加密数据 - rails + attachment_fu

> ID：12521801
> 
> 赞同：1
> 
> 时间：2012-09-20T22:26:05.917
> 
> 标签：ruby-on-rails, ruby, security, encryption, attachment-fu

我们一直在使用 attachment_fu 将文件上传到我们的应用程序中。我们现在必须能够使用 AES 加密上传的数据。我们使用 Rails 2.3.8 和 Ruby 1.8.7。Attachment_fu 用于检查 MIMEtypes，因此我们无法使用 before_save 回调进行加密（否则 MIMEtype 将被损坏）并且 attachment_fu 使用临时文件，所以我担心选择 attachment_fu 的最终 save_to_storage 方法，因为临时文件将在保存之前以明文形式存储。

# macos - 在 macOS 上打印可执行文件的 rpath

> ID：12521802
> 
> 赞同：83
> 
> 时间：2012-09-20T22:26:08.017
> 
> 标签：macos, command-line, terminal, dynamic-linking, darwin

我想使用 更改可执行文件的*rpath*`install_name_tool`，但我现在无法弄清楚*rpath*是什么。`install_name_tool`需要在命令行上同时给出旧的和新的*rpath*。我可以使用什么命令在 macOS 下打印可执行文件的*rpath ？*

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-09-20T22:56:18.450

首先，了解可执行文件不包含单个`rpath`条目，而是包含一个或多个条目的数组。

其次，您可以使用`otool`列出图像的`rpath`条目。使用`otool -l`，您将获得如下输出，最后是`rpath`条目：

```
Load command 34
          cmd LC_LOAD_DYLIB
      cmdsize 88
         name /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit (offset 24)
   time stamp 2 Wed Dec 31 19:00:02 1969
      current version 1038.32.0
compatibility version 45.0.0

Load command 35
          cmd LC_RPATH
      cmdsize 40
         path @loader_path/../Frameworks (offset 12) 
```

查找命令并记下条目`LC_RPATH`下的路径。`path`

编辑：关于什么`@loader_path`是：这是一种通用且动态的方式来引用想要加载框架的 Mach-O 对象。

虽然这是一个相当人为的例子，但我认为它应该明白这一点。假设我们有一个`MyApp.app`使用框架的应用程序`MyFramework.framework`。我们还会说，要正常运行，我要求我的应用程序安装在 /Applications 中，而不是其他任何地方。因此，所述应用程序和框架的结构如下：

`/Applications/MyApp.app/Contents/MacOS/MyApp`（可执行） `/Applications/MyApp.app/Contents/Frameworks/MyFramework.framework/MyFramework`（Mach-O dylib）

如果我们要`otool -L`在可执行文件上运行（注意大写 L），它将显示有关 MyFramework 的以下内容：

```
@rpath/MyFramework.framework/Versions/A/MyFramework
/System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
/usr/lib/libobjc.A.dylib
/usr/lib/libSystem.B.dylib
.... 
```

请注意，因为 MyFramework.framework 使用`@rpath`安装名称/路径，我们需要有运行时搜索路径条目，这些条目将在运行时代替`@rpath`。现在，我可以有一个 rpath 条目：

```
/Applications/MyApp.app/Contents/Frameworks 
```

这会起作用，并且在运行时这两个部分将放在一起：

`/Applications/MyApp.app/Contents/Frameworks`+ `/MyFramework.framework/Versions/A/MyFramework`==

```
/Applications/MyApp.app/Contents/Frameworks/MyFramework.framework/Versions/A/MyFramework 
```

显然，硬编码这样的路径并不理想，因为简单地将应用程序移动到不同的文件夹或重命名应用程序本身会导致链接失败。

`@loader_path`只是一种动态的方式来引用应用程序的可执行文件，无论它可能存在于文件系统中的何处。在这种特殊情况下，在运行时它将填充运行可执行文件的路径：`/Applications/MyApp.app/Contents/MacOS/MyApp`. 然后我们可以说要找到 MyFramework.framework，您只需上一个目录并转到`Frameworks`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-10-31T13:05:57.230

您可以使用`otool -l myexecutable`，但如果您只对*rpath*的列表感兴趣，这会打印出很多不必要的信息。

您可以通过以下方式过滤`otool -l`相关*rpath*条目的输出

```
otool -l myexecutable | grep RPATH -A2 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-28T07:46:55.983

我发现我可以使用 macOS 打印共享库的安装名称

```
otool -D mylib 
```

此外，我可以直接设置安装名称，而无需通过将`-id`标志传递给旧的安装名称`install_name_tool`：

```
install_name_tool -id @rpath/my/path mylib 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-17T23:41:13.603

我目前正在编写几个用于处理 DYLD 的脚本，这个脚本回答了这个问题，所以我将其发布以供参考：

```
#!/usr/bin/env ruby
require 'open3'
stdout, stderr, status = Open3.capture3('/usr/bin/otool', '-l', *ARGV)
stdout.scan(/^ +cmd LC_RPATH$.*?^ +path (.*?) \(offset \d+\)$/m) {|(p)| puts p} 
```

#### 例子：

```
lsrpath /usr/local/microsoft/powershell/7/{pwsh,createdump,unknown.xyz}
@loader_path 
```

'希望能帮助到你 ;-）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-02-26T17:41:28.590

我只是使用 otool 命令

```
otool -l <my executable> 
```

它打印出 rpath 字段。不需要任何长脚本。

# python - python主/子无意循环

> ID：12521810
> 
> 赞同：0
> 
> 时间：2012-09-20T22:26:40.080
> 
> 标签：python, sockets, windows-7, python-3.x, subprocess

问题：我希望孩子超时并完成。但相反，它超时并再次开始运行。

谁能告诉我为什么这个程序永远运行？我希望它运行一次并退出......

这是一个工作程序。Master线程一个函数来产生一个孩子。效果很好，除了它最终循环。

这里是大师：

```
# master.py
import multiprocessing, subprocess, sys, time

def f():
    p = subprocess.Popen(["C:\\Python32\\python.exe", "child.py"])
    # wait until child ends and check exit code
    while p.poll() == None:
        time.sleep(2)
    if p.poll() != 0:
        print("something went wrong with child.py")

# multithread a function process to launch and monitor a child
p1 = multiprocessing.Process(target = f())
p1.start() 
```

和孩子：

```
# child.py
import socket, sys

def main(args):
    try:
        sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        sock.settimeout(10)
        sock.bind(('', 54324))
        data, addr = sock.recvfrom(1024) # buffer size is 1024 bytes
        print(data)
        sock.close()
        return 0
    except KeyboardInterrupt as e:
        try:
            sock.close()
            return 0
        except:
            return 0

if __name__ == "__main__":
    sys.exit(main(sys.argv)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:28:09.873

问题是你`master.py`没有`if __name__ == '__main__'`警卫。在 Windows 上，`multiprocessing`必须能够`main`在子进程中重新导入模块，如果您不使用此`if`保护，您将在子进程中重新执行`multiprocessing.Process`（导致意外 forkbomb）。

要修复，只需将所有命令放入`master.py`防护中`if`：

```
if __name__ == '__main__':
    # multithread a function process to launch and monitor a child
    p1 = multiprocessing.Process(target = f())
    p1.start() 
```

# gwt - GWT 操作 DOM 元素的注意事项

> ID：12521813
> 
> 赞同：1
> 
> 时间：2012-09-20T22:27:10.953
> 
> 标签：gwt, dom, gwt2, gwt-2.4

**在这个问题之后我最近问过：** [了解 Document.createElement()](https://stackoverflow.com/questions/12503624/understanding-document-createelement/12513693)

***这是上下文：***

*   我的 GWT GUI 中有一个文本区域，其中包含一个文本
*   用户可以在此文本区域中选择一个单词（或一系列单词）并将其转换为`highlighted text`
*   `highlighted texts`需要能够听用户：点击、右键、拖放操作
*   文本区域中有 1000 个的场景`highlighted text`并非不可能。

***我想知道***：

1.  直接在 GWT 中操作 DOM 元素是一种不好的方法吗？（不使用小部件）
2.  [将侦听器添加到 SpanElement](https://stackoverflow.com/questions/10152272/add-listener-to-spanelement/10153663#10153663)是一种不好的方法吗？它会导致内存泄漏吗？
3.  实现这些目标的最佳方法是什么？我已经使用一个使用 span 元素的简单自定义小部件进行了一些测试，在 DevMode 中将 1000 个小部件添加到 RootPanel 大约需要 6 到 10 秒。当我直接使用 DOM 元素时，此操作持续时间不到 1 秒（经过优化甚至不到 200 毫秒）。

***编辑***

根据我在@Gilberto 建议后所做的一些实际测试，性能应该不是问题。[http://jmichelgarciagwt.appspot.com/DOMTesting.html](http://jmichelgarciagwt.appspot.com/DOMTesting.html)

尽管如此，我还是希望得到问题 1) 和 2) 的反馈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T23:39:20.230

将侦听器/处理程序添加到数百个跨度元素/小部件绝对是一种不好的方法。

如果您继续使用 GWT，您可以将单个事件处理程序附加到您的“文本区域”小部件，然后查找哪个元素是点击的来源： http: [//comments.gmane.org/gmane.org.google。重量/61911](http://comments.gmane.org/gmane.org.google.gwt/61911)

如果您使用 DOM 元素，您可以将单个事件侦听器附加到您的“文本区域”元素，并在它冒泡时找出事件源。例如：http: [//icant.co.uk/sandbox/eventdelegation/](http://icant.co.uk/sandbox/eventdelegation/)

# android - 如何让 Gson 序列化基本名称值对列表？

> ID：12521816
> 
> 赞同：1
> 
> 时间：2012-09-20T22:27:18.343
> 
> 标签：android, json, serialization, gson, key-value

我正在尝试使用类型适配器和 Gson 序列化 BasicNameValuePairs 列表

```
ArrayList<BasicNameValuePair> kvp=new ArrayList<BasicNameValuePair>();
kvp.add(new BasicNameValuePair("car","ferrari"));
kvp.add(new BasicNameValuePair("speed","fast")); 
```

这是我想要的结果

```
{"car":"ferrari","speed":"fast"} 
```

而不是这个

```
[{"name":"car","value":"ferrari"},{"name":"speed","value":"fast"}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:27:18.343

要根据规范对其进行序列化，您需要制作一个自定义类型适配器来处理通用列表。首先创建将对输出进行正确格式化的类。

```
public class KeyValuePairSerializer extends TypeAdapter<List<BasicNameValuePair>> {
@Override
public void write(JsonWriter out, List<BasicNameValuePair> data) throws IOException {
    out.beginObject();
    for(int i=0; i<data.size();i++){
        out.name(data.get(i).getName());
        out.value(data.get(i).getValue());
    }
    out.endObject();
}
/*I only need Serialization*/
@Override
public List<BasicNameValuePair> read(JsonReader in) throws IOException {
    return null;
}
} 
```

然后使用自定义 Gson 构建器来使用该类型适配器来创建正确的 JSON 字符串。

```
 GsonBuilder gsonBuilder= new GsonBuilder();
    gsonBuilder.registerTypeAdapter(KeyValuePairSerializer.class, new KeyValuePairSerializer());
    Gson gson=gsonBuilder.create();
    Logger.e(getClass().getSimpleName(),gson.toJson(kvp, KeyValuePairSerializer.class)); 
```

# c# - 从字符串中获取部分字符串

> ID：12521818
> 
> 赞同：0
> 
> 时间：2012-09-20T22:27:25.273
> 
> 标签：c#

我有以下字符串：

```
This isMyTest testing 
```

结果我想得到 isMyTest 。我只有两个可用的第一个字符（“is”）。单词的其余部分可能会有所不同。

基本上，我需要选择以 chk 开头的由空格分隔的第一个单词。

我从以下开始：

```
if (text.contains(" is"))
{
text.LastIndexOf(" is"); //Should give me index.
} 
```

现在我找不到这个词的正确边界，因为我需要匹配类似的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:46:15.607

您可以使用正则表达式：

```
    字符串模式 = @"\bis";
    string input = "这是我的测试测试";
    返回正则表达式匹配（输入，模式）；

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:30:45.583

您可以使用[IndexOf](http://msdn.microsoft.com/en-us/library/5xkyx09y.aspx)获取下一个空间的索引：

```
int startPosition = text.LastIndexOf(" is");
if (startPosition != -1)
{
    int endPosition = text.IndexOf(' ', startPosition + 1); // Find next space
    if (endPosition == -1)
       endPosition = text.Length - 1; // Select end if this is the last word?
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T22:31:58.733

使用正则表达式匹配怎么样？通常，如果您要在字符串中搜索模式（即以空格开头，后跟其他字符），则正则表达式非常适合这种情况。Regex 语句实际上只在上下文敏感区域（例如 HTML）中崩溃，但非常适合常规字符串搜索。

```
// First we see the input string.
string input = "/content/alternate-1.aspx";

// Here we call Regex.Match.
Match match = Regex.Match(input, @"[ ]is[A-z0-9]*",     RegexOptions.IgnoreCase);

// Here we check the Match instance.
if (match.Success)
{
    // Finally, we get the Group value and display it.
    string key = match.Groups[1].Value;
    Console.WriteLine(key);
} 
```

# javascript - 动态改变 JS

> ID：12521819
> 
> 赞同：1
> 
> 时间：2012-09-20T22:27:27.397
> 
> 标签：javascript, html, dynamic, upload

我正在制作一个 HTML 页面，并且我正在使用带有 JQuery 的 Javascript。我将有一张如下所示的地图：

```
var images = {
'Abstract' : 'http://i.imgur.com/MFkuQ.jpg',
'Animals' : 'http://i.imgur.com/QEt72.png',
'Beach' : 'http://i.imgur.com/nmrqv.jpg',
'Bad sky' : 'http://i.imgur.com/zoO2M.png',
'Colors' : 'http://i.imgur.com/bA718.png',
'Desert' : 'http://i.imgur.com/xvyzD.jpg',
'Dog no background' : 'http://i.imgur.com/k023O.png',
'Dog' : 'http://i.imgur.com/3c5EB.png',
'Gold' : 'http://i.imgur.com/jz4XX.png',
'Island' : 'http://i.imgur.com/7JXt7.jpg',
'Meteor' : 'http://i.imgur.com/iISwt.png',
'Ocean' : 'http://i.imgur.com/i8sy2.jpg',
'Rain' : 'http://i.imgur.com/V82Tb.png',
'Sky' : 'http://i.imgur.com/CMqv2.jpg',
'Textures' : 'http://i.imgur.com/lFKPp.jpg',
'Volcano' : 'http://i.imgur.com/7uy15.png'
} 
```

列出我制作的艺术作品。但是，我也会制作新的艺术作品，并且需要让这张地图动态变化。我尝试过 Mediafire、Pastebin 和其他几个网站，但它们要么不允许您编辑文件，要么无法生成链接（如[http://www.websitename.com/images.js](http://www.websitename.com/images.js)），要么获取一段时间后摆脱你的文件。有没有一个好的网站可以上传我的文件，然后编辑它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:47:13.053

将其托管在某处，或使用 github 存储库。

# mono - SIGSEGV 在 iOS6 上运行 Monotouch

> ID：12521821
> 
> 赞同：2
> 
> 时间：2012-09-20T22:27:43.760
> 
> 标签：mono, xamarin.ios, ios6

我们最近尝试为 iOS6 编译 MonoTouch 应用程序，它总是在按主菜单中的播放约 5 秒后崩溃。

这是堆栈跟踪：

```
Stacktrace:
  at MonoTouch.ObjCRuntime.Runtime.ConstructNSObject (intptr,intptr) [0x00007] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:208
  at MonoTouch.ObjCRuntime.Runtime.GetNSObject (intptr) [0x0001f] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:259
  at MonoTouch.ObjCRuntime.Runtime.GetNSObjectWrapped (intptr) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:276
  at (wrapper native-to-managed) MonoTouch.ObjCRuntime.Runtime.GetNSObjectWrapped (intptr) <0xffffffff>
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at Resistor5.Program.Main (string[]) [0x00000] in /Users/nullcandy/Projects/Resistor5/Resistor5_iOS/AppDelegate.cs:22
  at (wrapper runtime-invoke) object.runtime_invoke_dynamic (intptr,intptr,intptr,intptr) <0xffffffff>

Native stacktrace:

0   Resistor5_iOS                       0x011bf7b4 mono_handle_native_sigsegv + 280
1   Resistor5_iOS                       0x011a9380 mono_sigsegv_signal_handler + 268
2   libsystem_c.dylib                   0x31e17e93 _sigtramp + 42
3   ???                                 0x00000000 0x0 + 0
4   Resistor5_iOS                       0x0126191c single_arg_user_copy_or_mark + 28
5   Resistor5_iOS                       0x0128e4cc mark_tls_slots + 160
6   Resistor5_iOS                       0x012650f4 scan_from_registered_roots + 412
7   Resistor5_iOS                       0x01271c34 major_collection + 3040
8   Resistor5_iOS                       0x01272c98 minor_collect_or_expand_inner + 88
9   Resistor5_iOS                       0x012733a0 mono_gc_alloc_obj_nolock + 1336
10  Resistor5_iOS                       0x01262db0 mono_gc_alloc_vector + 136
11  Resistor5_iOS                       0x01249cf4 mono_array_new_specific + 132
12  Resistor5_iOS                       0x0108abb4 wrapper_managed_to_native_object___icall_wrapper_mono_array_new_specific_intptr_int + 68
13  Resistor5_iOS                       0x00088090 MonoTouch_ObjCRuntime_Runtime_GetNSObject_intptr + 144
14  Resistor5_iOS                       0x00088110 MonoTouch_ObjCRuntime_Runtime_GetNSObjectWrapped_intptr + 28
15  Resistor5_iOS                       0x000b8620 wrapper_native_to_managed_MonoTouch_ObjCRuntime_Runtime_GetNSObjectWrapped_intptr + 64
16  Resistor5_iOS                       0x012bd634 get_managed_object_for_ptr_fast + 108
17  Resistor5_iOS                       0x011a19f4 native_to_managed_trampoline_MonoTouch_UIKit_UIAccelerometer__UIAccelerometerDelegate_DidAccelerate + 324
18  UIKit                               0x35f16717 <redacted> + 222
19  UIKit                               0x35ca7359 <redacted> + 2820
20  UIKit                               0x35ca66d5 <redacted> + 72
21  UIKit                               0x35ca6123 <redacted> + 6154
22  GraphicsServices                    0x33f395a3 <redacted> + 590
23  GraphicsServices                    0x33f391d3 <redacted> + 34
24  CoreFoundation                      0x36311173 <redacted> + 34
25  CoreFoundation                      0x36311117 <redacted> + 138
26  CoreFoundation                      0x3630ff99 <redacted> + 1384
27  CoreFoundation                      0x36282ebd CFRunLoopRunSpecific + 356
28  CoreFoundation                      0x36282d49 CFRunLoopRunInMode + 104
29  GraphicsServices                    0x33f382eb GSEventRunModal + 74
30  UIKit                               0x35cfa301 UIApplicationMain + 1120
31  Resistor5_iOS                       0x000b769c wrapper_managed_to_native_MonoTouch_UIKit_UIApplication_UIApplicationMain_int_string___intptr_intptr + 240
32  Resistor5_iOS                       0x0094d158 Resistor5_Program_Main_string__ + 152
33  Resistor5_iOS                       0x01085ce0 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 200
34  Resistor5_iOS                       0x011ab3dc mono_jit_runtime_invoke + 1644
35  Resistor5_iOS                       0x0124aa8c mono_runtime_invoke + 128
36  Resistor5_iOS                       0x0124ec84 mono_runtime_exec_main + 436
37  Resistor5_iOS                       0x0124f044 mono_runtime_run_main + 756
38  Resistor5_iOS                       0x011aff14 mono_jit_exec + 140
39  Resistor5_iOS                       0x012b7f88 main + 2028
40  Resistor5_iOS                       0x000020c4 start + 52

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
================================================================= 
```

它适用于 iOS5。有任何想法吗？

PS 虽然在堆栈跟踪中提到了加速度计，但我们在代码中的任何位置都没有使用加速度计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:10:20.140

这看起来像内存损坏 - 我建议您使用测试用例/整个项目[提交错误报告。](http://bugzilla.xamarin.com)

# python - python html邮件失败

> ID：12521826
> 
> 赞同：1
> 
> 时间：2012-09-20T22:28:34.880
> 
> 标签：python, html, email

我正在努力弄清楚下面的代码出了什么问题。我正在尝试发送 html 邮件。

```
NOW = datetime.datetime.now()

 def sendEmail(msg):
    global NOW
    global SENDER
    global EMAILTARGET
    today = "%s/%s/%s" % (NOW.month,NOW.day,NOW.year)
    # Create message container - the correct MIME type is multipart/alternative.
    msg = MIMEMultipart('alternative')
    msg['Subject'] = "SAR Data Report - %s" % today
    msg['From'] = SENDER
    msg['To'] = EMAILTARGET
    chunk = MIMEText(msg, 'html')
    msg.attach(chunk)
    s = smtplib.SMTP('localhost')
    s.sendmail(SENDER, EMAILTARGET, msg.as_string())
    s.quit() 
```

上面的代码给了我以下错误：

```
Traceback (most recent call last):
 File "./html_mail.py", line 295, in <module>
 sendEmail(html)
 File "./html_mail.py", line 245, in sendEmail
 chunk = MIMEText(msg, 'html')
 File "/usr/lib/python2.7/email/mime/text.py", line 30, in __init__
  self.set_payload(_text, _charset)
 File "/usr/lib/python2.7/email/message.py", line 226, in set_payload
  self.set_charset(charset)
 File "/usr/lib/python2.7/email/message.py", line 268, in set_charset
  cte(self)
 File "/usr/lib/python2.7/email/encoders.py", line 73, in encode_7or8bit
  orig.encode('ascii')
  AttributeError: MIMEMultipart instance has no attribute 'encode' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T23:34:30.340

您的代码中的错误是您已将*msg*用作函数的参数，并且它与您的 MIME 消息容器（均名为*msg*）发生冲突。

您需要做的是将参数的名称更改为其他名称，例如*html*：

```
def sendEmail(html):
...
chunk = MIMEText(html, 'html')
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T23:20:50.070

您将`msg`作为`MIMEMultipart`对象的 传递给`MIMEText`需要一个字符串的初始化程序。您应该传递一个包含要附加的 HTML 的字符串，而不是您尝试附加的消息。

# file - JavaFX FileChooser 不返回 Windows 的文件扩展名

> ID：12521828
> 
> 赞同：4
> 
> 时间：2012-09-20T22:28:36.987
> 
> 标签：file, javafx, filechooser

以下代码在 Mac 上返回文件时工作正常，因为它会自动将文件扩展名附加到文件名。

然而，在 Windows 上，我必须输入文件的扩展名作为文件名的一部分，以便它以该扩展名返回......即使在“保存类型为”下拉菜单中选择了扩展名。

从 Windows 上的文件选择器返回文件时，有没有办法自动将扩展名附加到名称中？

```
FileChooser.ExtensionFilter extFilter = new   FileChooser.ExtensionFilter(fileExtension.toUpperCase()+" files(*."+fileExtension+")", "*."+fileExtension);
                fileChooser.getExtensionFilters().add(extFilter);

                //Show save file dialog 
                final File file = fileChooser.showSaveDialog(MyStage.this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:55:59.837

我遇到了同样的问题。我的解决方案是创建一个新文件，并将文件扩展名作为字符串附加到文件构造函数中。

如果您希望用户能够选择和覆盖现有文件，请确保并添加检查以确保初始保存文件在附加之前不包含特定扩展名，否则您将获得类似“test.xls.xls ”。

```
FileChooser fc = new FileChooser();
    FileChooser.ExtensionFilter extFilter = new FileChooser.ExtensionFilter("XLS File (*.xls)", "*.xls");

    fc.getExtensionFilters().add(extFilter);

    File save  = fc.showSaveDialog(stage);

    save = new File(save.getAbsolutePath()+".xls");

    FileOutputStream fileOut = new FileOutputStream(save); 
```

# linux - 通过 bash 脚本问题添加 FTP 用户

> ID：12521829
> 
> 赞同：0
> 
> 时间：2012-09-20T22:28:42.887
> 
> 标签：linux, bash, ssh, ftp, sh

我有一个 .sh 文件（比如说 adduser.sh），它通过一个包含创建 FTP 用户的命令的 cronjob 执行。

adduser.sh 文件看起来像这样......

```
#!/bin/bash
mkdir /var/www/vhosts/domain/path;
useradd -d /var/www/vhosts/domain/path -ou <uid> -g <group> -s /bin/false <username>;
echo <password> | passwd <username> --stdin; 
```

现在这是我的问题。如果我使用 SSH 直接运行它...

```
sh adduser.sh 
```

...没有问题，它按预期工作。

但是，如果我让 cronjob 运行它，则会创建目录但不会添加用户。

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T01:20:44.763

就目前而言，有一种替代方法`useradd`称为`adduser`. 在 Debian 或 Ubuntu 中，`adduser`是一个 perl 脚本并执行顺序功能，例如使用创建用户`adduser`、将其分配给组、创建主目录等。

根据`adduser`手册页-

> `adduser`并且`addgroup`是对 useradd、groupadd 和 usermod 程序等低级工具更友好的前端，默认选择符合 Debian 策略的 UID 和 GID 值，创建具有骨架配置的主目录，运行自定义脚本和其他功能。

在 Fedora、RedHat 和 CentOS 中，`adduser`只是一个指向`useradd`.

```
[root@hobbit ~]# which /usr/sbin/adduser
lrwxrwxrwx 1 root root 7 2012-09-20 20:20 /usr/sbin/adduser -> useradd 
```

如果您在上述操作系统上，那么您可以尝试`adduser`重定向`2>`到`add_user.log`文件并检查文件以查看是否出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:42:37.733

我已经解决了这个问题，只需将**/usr/bin/**添加到 useradd 函数。

```
#!/bin/bash
mkdir /var/www/vhosts/domain/path;
/usr/bin/useradd -d /var/www/vhosts/domain/path -ou <uid> -g <group> -s /bin/false <username>;
echo <password> | passwd <username> --stdin; 
```

感谢大家帮助我走上正轨。希望这可以帮助那里的人。

# c# - 优化“this”类型的循环

> ID：12521830
> 
> 赞同：1
> 
> 时间：2012-09-20T22:28:45.053
> 
> 标签：c#, optimization, loops, comparison, boolean

我目前（过去也曾）使用此循环来查看自定义类数组，并确保数组中每个类的布尔成员值相等。有没有更好的（更有效，可能更简单的编码）方法来做到这一点？

由于这种解释非常糟糕，并且缺乏更好的解释方法，我会简单地问：“有没有更好的方法来优化‘这个’循环？”

```
//set to true so the loop runs
boolean AllArentEqual = true;

while (AllArentEqual){
    //do some stuff to make stuff equal        

    ///// Check if stuff is equal /////
    //set to false to determine later
    AllArentEqual = false;

    //check if any aren't equal
    for (int i = 1; i < anArrayOfClass.length; i++){
        if (anArrayOfClass[i - 1].BooleanValue != anArrayOfClass[i].BooleanValue){
            //one isn't equal so set the loop to be re-run
            AllArentEqual = true;
        }
    } 

} //loop until stuff is equal 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:34:34.193

一个明显的小改进是添加了一个`break`：

```
for (int i = 1; i < anArrayOfClass.length; i++){
    if (anArrayOfClass[i - 1].BooleanValue != anArrayOfClass[i].BooleanValue){
        //one isn't equal so set the loop to be re-run
        AllArentEqual = true;
        break;   // We're done in this round
    }
} 
```

一旦确定并非所有人都是平等的，就没有必要进一步检查了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:34:19.310

我会通过提取一个方法来修改它，然后可能做一些类似的事情：

```
AttemptMakeEqual(anArrayOfClass);
while (anArrayOfClass.Any(c => c.BooleanValue != anArrayOfClass[0].BooleanValue))
{
    AttemptMakeEqual(anArrayOfClass);
}

// Extract out a method to:
void AttemptMakeEqual(YourClass[] values)
{
    //do some stuff to make stuff equal  
} 
```

如果您有可能拥有“所有相等”的值，并且您并不总是需要先运行该操作*（*即：您的新版本），您可以这样做：

```
while (anArrayOfClass.Any(c => c.BooleanValue != anArrayOfClass[0].BooleanValue))
{
    //do some stuff to make stuff equal  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T00:03:10.037

我可能会做这样的事情：

```
class Widget
{
  public Widget( bool truthiness )
  {
    this.Truthiness = truthiness ;
  }
  public bool Truthiness { get ; private set ; }
}

class FooBar
{
  private Widget[] Widgets { get ; private set; }

  private Widget[] GetSomeWidgets()
  {
      throw new NotImplementedException() ;
  }
  public FooBar()
  {
    Widgets = GetSomeWidgets() ;
  }

  private void WorkOnWidgets()
  {
    throw new NotImplementedException() ;
  }

  public void MakeEqual()
  {
    bool areEqual ; // zero or one widget and it's not a problem
    while ( !(areEqual=CheckIfAllWidgetsEqual()) )
    {
      WorkOnWidgets() ;
    }
    return ;
  }

  public bool CheckIfAllWidgetsEqual()
  {
    bool value = true ;
    if ( Widgets.Length > 1 )
    {
      Widget first        = Widgets[0] ;
      Widget firstUnequal = Widgets.Skip(1).FirstOrDefault( x => x.Truthiness != first.Truthiness ) ;
      value = firstUnequal != null ;
    }
    return value ;
  }

} 
```

# actionscript-3 - 将图片保存到影片剪辑/一次发送总和图片

> ID：12521831
> 
> 赞同：0
> 
> 时间：2012-09-20T22:28:44.913
> 
> 标签：actionscript-3, flash, file-upload, editor, image-editor

我有这个应用程序：[http ://www.jungle-g.co.il/#/System/](http://www.jungle-g.co.il/#/System/)

目前，当用户选择产品（例如衬衫）时，他只能制作衬衫的一侧。当用户想要编辑衬衫的另一面时，他必须完成第一面的预订，然后邀请另一面。

我的问题是我找不到如何将第一张图像保存在闪存或影片剪辑中。我的采访是为每一方用户编辑创建一个影片剪辑，仅当用户决定进行实际预订时，才发送影片剪辑中的所有图片。这可能吗？如果没有，还有其他方法吗？

我对该主题进行了研究，但没有找到可以使用它的解决方案。我找到了这个网站：[http](http://code.google.com/p/swfupload/) ://code.google.com/p/swfupload/ 但我不明白它对我的情况有何帮助。

感谢所有的帮助者，我为这个案子头疼了一个多月。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:49:37.607

You can create a class to hold statics of your bitmapData.

```
package {

    public class ShirtState
    {
        public static var ShirtFront:BitmapData;
        public static var ShirtBack:BitmapData;
    }
} 
```

Say you have a shirt that you're editing one side of.

```
 var shirtFront:MovieClip; //this is the shirt you are working with. 
```

once you are done

```
 var shirtFrontBitmap:Bitmap = new Bitmap(shirtFront.width, shirtFront.height);
 shirtFrontBitmap.draw(shirtFront); 
```

once you have the bitmap you can save it to your static class

```
 ShirtState.shirtFront = shirtFrontBitmap.bitmapData; 
```

you can then access it anytime in your app provided you don't reload it.

There are some caveats:

If you have a module application where individual swfs are loaded and unloaded by the DOM then you may want to use a LocalSharedObject to store your images. To do that you will have to convert the bitmap data to Base64 (I would anyways) and then store taht string in the local share object. Be mindful that object has a max file size (not sure what it is).

You don't necessarily have to store bitmaps of your shirt sides. You could create your application to create a Class for shirt and as long as an instance of it exists you can have access to both sides of the shirt.

I am not sure how you are building this app, but generally you wouldn't even need to use a static if everything is in the same context. The actual service call to deliver both sides of the shirt to a server for processing would be made at the absolute end.

# python - 将一个模型中的对象相应地过滤到另一个模型的字段

> ID：12521833
> 
> 赞同：0
> 
> 时间：2012-09-20T22:28:57.220
> 
> 标签：python, django

我正在网站上创建一个新部分，现有客户（`Customer`模型）可以选择出现在该部分上。
新用户不需要拥有主站点 ( `Customer`) 的帐户，只需为新部分 (`NewSecUser`模型)创建一个帐户

```
class Customer(models.Model):
    name = models.CharField(max_length=50)
    #[...]
    is_visible_on_new_section = models.BooleanField(default=False)

class NewSecUser(model.Model):
    name = models.CharField(max_length=50)
    #[...]
    customer_id = models.IntegerField(null=True)
    # customer_id refers to the id of a Customer model object 
    # its value is different from null only when a Customer chooses to appear
    # on the new section 
```

如何`exclude()`过滤掉`NewSecUser`对象`Customer`具有`id`等于`NewSecUser.customer_id`和`is_visible_on_new_section`设置为的对象`False`？

我相信 基本上类似于 SQL `JOIN`(with )。`new_sec_user.customer_id=customer.id`

我知道`customer_id`作为外键会容易得多，但我没有选择这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:33:34.523

```
Customer.filter(id__in = [nsu.pk for nsu in NewSecUser.all()]).filter(is_visible_on_new_selection=True).all()` 
```

或非常相似的东西

# c# - 获取 GAC 程序集的名称

> ID：12521837
> 
> 赞同：0
> 
> 时间：2012-09-20T22:29:10.573
> 
> 标签：c#, gac

> **可能重复：**
> [列出所有实现 GAC 特定接口的 DLL](https://stackoverflow.com/questions/747991/list-all-dlls-implementing-a-specific-interface-from-the-gac)

有没有办法以编程方式检索在 GAC 中注册的所有 .DLL 的完全限定名称？基本上，当您右键单击“引用”然后转到“添加引用”时，我想模拟 Visual Studio 的功能......它如何用所有程序集填充 ListBox。

# python - __init__.py 的用法

> ID：12521839
> 
> 赞同：7
> 
> 时间：2012-09-20T22:29:45.853
> 
> 标签：python

当我这样做时，我`__init__.py`会进行检查`from myprojects.something import blabla`。

今天我开始使用`pyzmq`，我想看看幕后发生了什么。所以我浏览了 github 中的代码，我发现（对我来说）`__init__.py`那里有一些我无法解释的奇怪用法。

例如[`zmq/core/__init__.py`](https://github.com/zeromq/pyzmq/blob/master/zmq/core/__init__.py). 添加`zmq.core.__all__`的`__all__`值有什么意义`zmq.core.constants, zmq.core.error, zmq.core.message, etc.`？

在[`zmq/__init__.py`](https://github.com/zeromq/pyzmq/blob/master/zmq/__init__.py)我看到最后

```
__all__ = ['get_includes'] + core.__all__ 
```

where`get_includes`是一个函数，它基本上返回一个列表，其中包含模块目录和父目录中的 utils 目录。

那有什么意义呢？这样做有什么`__init.py__`收获？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T22:39:12.517

这`__all__`是当有人`from module import *`按照[此处](http://docs.python.org/tutorial/modules.html?highlight=__all__#importing-from-a-package)记录的那样进行操作时。

> 唯一的解决方案是包作者提供包的显式索引。import 语句使用以下约定：如果包的`__init__.py`代码定义了一个名为 的列表 `__all__`，则当遇到 from package import * 时，它将被视为应导入的模块名称列表。当包的新版本发布时，由包作者保持这个列表是最新的。包作者也可能决定不支持它，如果他们没有看到从他们的包中导入 * 的用途。例如，该文件`sounds/effects/__init__.py`可能包含以下代码：

```
__all__ = ["echo", "surround", "reverse"] 
```

> 这意味着`from sound.effects import *`将导入声音包的三个命名子模块。

一个用途`__all__`是包构建者的工具，允许他们以适合他们的方式构建包，同时方便用户。特别是在 pyzmq 的情况下，它可以让您编写如下代码：

```
import zmq
print zmq.zmq_version() 
```

而不必使用完整的点模块名称：

```
print zmq.core.version.zmq_version() 
```

pyzmq 的包设计者正在使用`__all__`将命名空间元素从嵌套模块提升到其命名空间的顶层，这样用户就不会被他们的包结构所困扰。

# html - 2个div如何有1个边框

> ID：12521840
> 
> 赞同：5
> 
> 时间：2012-09-20T22:29:46.223
> 
> 标签：html, css

想象一下并排的 4 个盒子（div）。这些是一个菜单，当一个框被选中时，它的边框是红色的，而所有其他 div 的边框都是黑色的。我遇到的问题是，是否有一种简单的方法可以使选定的 div 的相邻 div 在接触选定 div 的一侧没有黑色边框。这是因为您将有一个带有红色边框的选定 div 具有我不想要的黑线的第二个边框。

你怎样才能让 2 个 div 表现得好像它们有一个边框？

我正在努力完善我在这里所拥有的东西。

[http://jsfiddle.net/hCK3D/1/](http://jsfiddle.net/hCK3D/1/)

目前，白色垂直边框打断了水平灰色。这不应该是这种情况，但我不知道如何改变它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T22:40:00.977

您应该使用 CSS 中的相邻选择器 ( `+`) 来实现这一点。看看吧，四个项目：

```
<div class="item"></div>
<div class="item"></div>
<div class="item"></div>
<div class="item"></div> 
```

这是你的 CSS：

```
​.item {
    float:left;
    background: #ccc;
    width: 50px;
    height: 50px;
    border: 1px #000 solid;
    border-right-width: 0;
}

.item:last-child {
    border-right-width: 1px;
}

.item:hover {
    border: 1px #f00 solid;
}

.item:hover + .item {
    border-left-width: 0;
} 
```

​<code>.item 只是正常设置每个项目。它使正确的`border`0。

`.item:last-child`使最后一个在右侧有一个钻孔器，因为它是最后一个并且旁边没有 div 来模拟边界。

`.item:hover`使悬停的项目具有红色边框，并且都是 4 种尺寸

`.item:hover +.item`抓取列表中的下一个项目并去掉它的左边框，因为它左边的项目现在在那里有一个红色边框。

你可以在这里试试：http: [//jsfiddle.net/hCK3D/](http://jsfiddle.net/hCK3D/)

**编辑：**这个应该可以解决问题！[http://jsfiddle.net/hCK3D/7/](http://jsfiddle.net/hCK3D/7/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T22:37:16.230

通过结合使用负边距*（与边框相同的尺寸）*和所选 div 的单个 z-index，您可以实现您正在寻找的布局。

![div的图像](../Images/14a800bed7dc21f302bfd5dec3cbe23c.png)

```
<style>
   .box { 
     width: 50px;
     height: 50px;
     float: left;
     border: 5px solid black;
     margin-left: -5px;
   }

   .selected {
     position: relative;
     width: 50px;
     height: 50px;
     border: 5px solid red;
     z-index: 20;
   }
</style>

<div>
  <div class="box"></div>
  <div class="box selected"></div>
  <div class="box"></div>
  <div class="box"></div>
</div> 
```

上述方法在 IE7 以上的所有主流浏览器中应该是可靠的......我应该想象它也应该适用于 IE6，但我没有它可以测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T22:51:54.357

似乎解决问题的最简单方法是将负边距设置为活动 div。您的代码可能看起来像这样

```
# HTML
​&lt;div class='menu'>
    <div class='item'>
        Item 1
    </div>
    <div class='item active'>
        Item 2
    </div>
    <div class='item'>
        Item 3
    </div>
    <div class='item'>
        Item 4
    </div>
</div>​

# CSS
.menu {
    position: relative;
}

.menu .item {
    display: inline;
    border: 1px solid black;
    position: relative;
    z-index:1;
}

.menu .item.active {
    border: 1px solid red;
    z-index: 2;
    margin: 0 -1px;
} 
```

为您的目的使用 div 对我来说看起来不是 html 语义。我认为使用列表进行导航会更好。

PS这里是这个代码 - [http://jsfiddle.net/r8XRP/](http://jsfiddle.net/r8XRP/) ​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T06:58:43.070

试试这个

[http://jsfiddle.net/D74mj/](http://jsfiddle.net/D74mj/)

我希望这是你要求的结果

# f# - 有什么办法可以简化这条线？

> ID：12521841
> 
> 赞同：1
> 
> 时间：2012-09-20T22:29:51.933
> 
> 标签：f#

```
if reelID = reelWeights.Count - 1
    then Array.fold calc1 (0L,0) reelWeights.[reelID]
    else Array.fold calc2 (0L,0) reelWeights.[reelID] 
```

我尝试使用管道，它似乎有点慢（不知道为什么）：

```
reelWeights.[reelID]
    |> (if reelID = reelWeights.Count - 1 then Array.fold calc1 else Array.fold calc2) (0L,0) 
```

如果我做

```
let calc x = if x then calc1 else calc2
Array.fold (calc reelID = reelWeights.Count - 1) (0L,0) reelWeights.[reelID] 
```

那么它看起来不错，代价是在循环中冗余检查条件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T22:49:14.857

Assuming `calc1` and `calc2` have the same signature (or if they're values rather than functions, are the same type):

```
let calc = if reelID = reelWeights.Count - 1 then calc1 else calc2
Array.fold calc (0L, 0) reelWeights.[reelID] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:01:20.100

或者在一行中：

```
let weight = 
    Array.fold (if reelID = (reelWeights.Count - 1) then calc1 else calc2) (0L,0) reelWeights.[reelID] 
```

# linux - .htaccess 301 重定向页面，没有 PHP 页面的扩展名

> ID：12521844
> 
> 赞同：1
> 
> 时间：2012-09-20T22:30:16.630
> 
> 标签：linux, .htaccess, http-redirect

我在将旧的 WordPress 网站页面重定向到新的基本 PHP 网站页面时遇到问题。

示例：没有扩展的旧 WordPress 页面位于`http://example.com/levelone/leveltwo/pagename`

新页面位于`http://example.com/directory/pagename.php`。

以下是我尝试过的几件事：

```
redirect 301  /levelone/leveltwo/pagename http://example.com/directory/pagename.php 
```

这根本不起作用

然后我尝试先重定向目录，然后是页面，如下所示：

```
RedirectMatch 301 ^/levelone/leveltwo/ http://example.com/directory/
redirect 301  /pagename http://example.com/pagename.php 
```

这几乎奏效了，但给了我正确的 URL，但没有 PHP 扩展。

我不能只是将旧目录重定向到新目录，因为实际上有很多。例子只是一个。问题似乎是从非扩展页面到带有`.php`扩展的页面。

这是我尝试的另一件事：

```
RedirectMatch 301 ^/levelone/leveltwo/(.*)$ /directory/$1.php
redirect 301  /pagename http://example.com/pagename.php 
```

这给了我`http://example.com/directory/pagename/.php`。

***已解决：我让它与以下内容一起使用：***

```
Redirect 301 /levelone/leveltwo/pagename/ http://example.com/directory/pagename.php 
```

问题似乎在于旧页面名称后缺少正斜杠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:34:46.180

尝试：

```
RedirectMatch 301 ^/levelone/leveltwo/(.*)$ /directory/$1.php 
```

* * *

可能发生的情况是 mod_alias 和 mod_rewrite 不能很好地相互配合。它们都在 URI 文件映射管道中，所以当一个处理它时，URI（即使最终会发生重定向响应）继续得到处理，然后当重定向发生时，URI 已被 mod_rewrite 破坏.

你应该坚持使用 mod_rewrite ，这样你就可以阻止任何 wordpress 规则做它的事情。在 htaccess 文件中的任何 wordpress规则**之上**添加这些规则：

```
RewriteEngine On
RewriteRule ^/?levelone/leveltwo/(.*)$ /directory/$1.php [L,R=301] 
```

# html - 如何在 HTML 中嵌入 .mov 文件？

> ID：12521849
> 
> 赞同：34
> 
> 时间：2012-09-20T22:30:46.003
> 
> 标签：html, .mov

**将.mov**文件添加到网页的正确方法是什么？

我只是将此功能添加到现有文件中，因此无法将其转换为 HTML5。该文件位于同一台服务器上，大小约为 1G。

客户也不想使用主页上的 YouTube 或 Vimeo。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-09-25T00:33:22.843

使用上面@haynar 提供的答案中的代码时遇到问题（无法在 Chrome 上播放），似乎确保它播放的更现代的方法之一是使用[视频标签](http://www.w3schools.com/tags/tag_video.asp)

例子：

```
<video controls="controls" width="800" height="600" name="Video Name">
  <source src="http://www.myserver.com/myvideo.mov">
</video> 
```

这就像我在 Safari 和 Chrome 中的 .mov 文件（从 Keynote 生成）的冠军，并且在大多数现代浏览器中被列为支持（Internet Explorer 9+、Firefox、Opera、Chrome 和 Safari 支持 video 标签.)

注意：可以在 IE / etc 中使用。如果你使用 MP4（这些家伙不正式支持 Mov）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T23:16:43.050

```
<object CLASSID="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" width="320" height="256" CODEBASE="http://www.apple.com/qtactivex/qtplugin.cab">
    <param name="src" value="sample.mov">
    <param name="qtsrc" value="rtsp://realmedia.uic.edu/itl/ecampb5/demo_broad.mov">
    <param name="autoplay" value="true">
    <param name="loop" value="false">
    <param name="controller" value="true">
    <embed src="sample.mov" qtsrc="rtsp://realmedia.uic.edu/itl/ecampb5/demo_broad.mov" width="320" height="256" autoplay="true" loop="false" controller="true" pluginspage="http://www.apple.com/quicktime/"></embed>
</object> 
```

[source](http://www.uic.edu/depts/accc/itl/realmedia/code/embed_quicktime.html)是[Google](http://www.google.com)的第一个[搜索结果](https://www.google.com/search?q=embeding%20.mov)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T23:17:20.987

好吧，如果你不想自己做这项工作（`object`元素并不那么难），你总是可以使用 Mike Alsup 的媒体插件：http: [//jquery.malsup.com/media/](http://jquery.malsup.com/media/)

# php - 使 next_posts_link() 返回一个绝对 URL

> ID：12521850
> 
> 赞同：0
> 
> 时间：2012-09-20T22:30:47.487
> 
> 标签：php, wordpress

在 wordpress中`next_posts_link();`返回`http://currenturl.com/currentpage**/page/x/**`. 我可以在functions.php中添加什么以`http://baseurl.com/page/x/`在所有情况下都返回，所以一个绝对URL而不只是将/page/x/添加到当前页面。

谢谢你们的想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:49:14.933

```
$url = 'http://' . $_SERVER['SERVER_NAME'] . next_posts_link(); 
```

输出：[http ://baseurl.com/page/x/](http://baseurl.com/page/x/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T23:20:48.400

正则表达式是你的朋友：

```
$test = 'http://example.com/test';
$test = preg_replace('/^http:\/\/.*?(\/.*)/', "http://baseurl.com$1", $test);
echo $test; 
```

调整以适应您的需要。将基本 url 定义为常量并将此功能封装在函数中可能是值得的。

# java - Java 克罗地亚语语言环境

> ID：12521851
> 
> 赞同：3
> 
> 时间：2012-09-20T22:30:51.650
> 
> 标签：java, locale

[http://www.oracle.com/technetwork/java/javase/locales-137662.html](http://www.oracle.com/technetwork/java/javase/locales-137662.html)

这是 Java 支持的语言环境列表。

我该如何设置它们？

线

```
Locale.setDefault(Locale.CROATIAN); 
```

不起作用，虽然它被列为受支持的克罗地亚语。是否有另一种使用它的方法或方式，还是我必须手动翻译？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:36:18.023

尝试：`Locale.setDefault(new Locale("hr", "HR"));`

在您的应用程序中支持该语言环境仍然取决于您

[在这里](http://docs.oracle.com/javase/tutorial/i18n/resbundle/index.html)查看 oracle i18n 文档。

# f# - 在 Async.FromContinuations 声明中获取取消标记

> ID：12521852
> 
> 赞同：1
> 
> 时间：2012-09-20T22:30:52.417
> 
> 标签：f#, cancellation-token

考虑以下定义

```
let test =
    Async.FromContinuations(
        fun (cont,econt,ccont) ->
            let rec inner () =
                async {
                    do printfn "looping..."
                    do! Async.Sleep 1000
                    return! inner ()
                }

            Async.Start(inner ())
            cont ()) 
```

假设我想像这样尝试计算

```
let cts = new CancellationTokenSource ()
Async.Start(test, cts.Token)
cts.Cancel() 
```

这自然不会使内部循环停止，因为我没有传递合适的取消令牌。有什么方法可以通过 Async.FromContinuations 获取外部取消令牌？我可以使用异步构建器和 Async.CancellationToken 重写它，但是我将失去将延续传递给内部表达式的能力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:53:16.093

像这样？

```
let test =
    async {
        let! ct = Async.CancellationToken
        return! Async.FromContinuations(
            fun (cont,econt,ccont) ->
                let rec inner () =
                    async {
                        do printfn "looping..."
                        do! Async.Sleep 1000
                        return! inner ()
                    }

                Async.Start(inner (), cancellationToken = ct)
                cont ())
    }
let cts = new CancellationTokenSource ()
Async.Start(test, cts.Token)
cts.CancelAfter(1000) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T10:41:37.653

你能描述一下你想做什么吗？如果我正确理解您的代码，您希望`inner`在后台启动循环功能，然后并行地继续运行工作流的其余部分（使用`cont()`调用）。

为此，您不需要`Async.FromContinuations`. 有一个函数可以做到*这一点*，它还负责处理异常、取消令牌等。

我认为你可以像这样重写你的程序：

```
let test = 
    // The inner loop function from your example
    let rec inner () = async { 
        do printfn "looping..." 
        do! Async.Sleep 1000 
        return! inner ()  } 

    async { 
      // Start the inner loop as a child async 
      let! _ = Async.StartChild(inner())
      // ... continue doing other things in parllel if you wish
      do printfn "main body running..." } 
```

计算的开始和取消看起来和以前一样：

```
let cts = new CancellationTokenSource () 
Async.Start(test, cts.Token) 
// This will cancel the 'inner' loop as well
cts.Cancel() 
```

如果您调用`Async.StartChild`using`let!`那么它将启动内部任务，将取消令牌传递给它等。它返回一个令牌，您可以稍后使用该令牌等待子任务完成，但由于您没有这样做，所以我使用了该`_`模式。

# yii - Yii：正确使用授权层次结构

> ID：12521854
> 
> 赞同：0
> 
> 时间：2012-09-20T22:31:22.073
> 
> 标签：yii

我正在尝试验证属于公司的用户是否可以查看属于公司的项目......换句话说，如果他们是员工，他们应该能够查看公司的项目。

我正在尝试遵循此处提供的示例： [http ://www.yiiframework.com/doc/guide/1.1/en/topics.auth](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth)

这是我生成的代码（运行一次）：

```
$auth=Yii::app()->authManager;
$auth->createOperation('viewItem','view an item');
$bizRule = 'return User::model()->findByPk(Yii::app()->user->getId())->company->id==$params["item"]->company->id';
$task=$auth->createTask('companyOwnedItem','view a company-owned item',$bizRule);
$task->addChild('viewItem'); 
```

这是 main.php 中的代码：

```
 'authManager'=>array(
        'class'=>'CDbAuthManager',
        'connectionID'=>'db', 
```

这是我的控制器中使用的授权部分：

```
if (Yii::app()->user->checkAccess('companyOwnedItem',array('item'=>$item))) {
    echo 'YES';
} else echo 'NO'; 
```

我总是在屏幕上得到“不”。

但是，如果我使用此代码：

```
if (User::model()->findByPk(Yii::app()->user->getId())->company->id==$item->company->id) 
```

然后我在屏幕上看到“是”。我做错了什么，如何使用 Yii 的内置 authManager 使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:05:26.080

最好的猜测是 items 数组中的项目无法正常工作。您是否为您的身份验证管理器打开了调试？忘记了属性，但是有一个可以打开以防 bizRule 错误。

除此之外，它看起来是正确的。另外，仅供参考，在 Yii 1.1.11 之后，有一个 $param['userId'] 选项，因此您无需查找当前用户的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:07:30.223

我最终使用了以下内容并且它有效：

在我的配置中：

```
'authManager'=>array(
   'class'=>'CDbAuthManager',
   'connectionID'=>'db',
   'defaultRoles'=>array('authenticated'),
   'showErrors'=>true,
), 
```

我的 authManager 代码：

```
$auth=Yii::app()->authManager;
    $bizRule = 'return User::model()->findByPk(Yii::app()->user->getId())->company->id==$params["item"]->company->id;';
    $auth->createOperation('companyOwnedItem','view a company-owned item',$bizRule);
    $role = $auth->createRole('authenticated');
    $role->addChild('companyOwnedItem'); 
```

然后在我的控制器中：

```
if (Yii::app()->user->checkAccess('companyOwnedItem',array('item'=>$item))) {
  echo 'YES';
} else {echo 'NO';} 
```

它现在有效！

# entity-framework - 实体框架版本问题

> ID：12521856
> 
> 赞同：3
> 
> 时间：2012-09-20T22:31:31.173
> 
> 标签：entity-framework

有一个类库和一个 WPF 应用程序，我试图在类库中包含所有实体框架项，并使用一个接口来获取信息。一切都已设置，但每次尝试时都会收到此消息：

消息“'System.Data.Entity.Internal.AppConfig' 的类型初始化程序引发了异常。”

当我查看内部异常时，它似乎找不到 EntityFramework 的 5.0.0.0 版本，当我检查它的参考时，它是 4.4.0.0。尝试通过 NuGet 卸载并重新安装 EntityFramework 但没有运气。关于下一步尝试什么的任何想法？

应用配置：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
<configSections>
<!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
  <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
</configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T22:35:45.173

我认为这是您的 app.Config 的问题，可能您没有以下内容：

```
 <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework> 
```

这需要在您的应用程序入口点的配置文件中（无论可执行文件/webapp 正在运行/使用您的类库）

需要注意的一个关键细节是 EF4.4 在 EF5 包中发布并用于非 .NET 4.5 应用程序（即，如果您有 .net 4.5，您的参考将为 5.0，否则 .net 4 将为 4.4）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T23:00:13.007

已卸载的 EntityFramework

将类库更新为 .Net 4.5 版

重新安装 EntityFramework

现在一切正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-11T10:00:47.400

我已尝试将 webconfig 中的 EF 版本更改为项目中当前安装的 EF 版本，并且一切正常。

# android - android小部件在点击时启动活动

> ID：12521857
> 
> 赞同：1
> 
> 时间：2012-09-20T22:31:31.417
> 
> 标签：android, android-activity, widget, onclick

对我来说，我有一个带有按钮的按钮小部件，当我单击它时，它只是假设启动一个 helloworld 活动。我试过在网上关注很多帖子，包括这个，但问题仍然存在。我按下按钮，没有任何反应。我正在开发 2.3 版的 android。有人可以指出我做错了什么吗？

我的小部件：

```
public class IconWidgetProvider extends AppWidgetProvider {

    @Override
    public void onUpdate(final Context context, final AppWidgetManager appWidgetManager, final int[] appWidgetIds) {
        final int N = appWidgetIds.length;

        for (int i=0; i<N; i++) {
            final Intent intent = new Intent(Intent.ACTION_MAIN, null);
            intent.addCategory(Intent.CATEGORY_LAUNCHER);
            // first param is app package name, second is package.class of the main activity
            final ComponentName cn = new ComponentName("com.followup","com.followup.FollowUpActivity");
            intent.setComponent(cn);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            final PendingIntent myPI = PendingIntent.getActivity(context, 0, intent, 0);

            final RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.icon_widget_layout);

            views.setOnClickPendingIntent(R.id.image_in_widget, myPI);

            final AppWidgetManager mgr = AppWidgetManager.getInstance(context);             mgr.updateAppWidget(cn, views);
        }
    }

} 
```

主屏幕图标信息.xml

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="146dip"
    android:minHeight="72dip"
    android:updatePeriodMillis="0"
    android:initialLayout="@layout/icon_widget_layout"  >
</appwidget-provider> 
```

icon_widget_layout.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">

    <Button android:name="@+id/image_in_widget"
        android:contentDescription="@string/iconDescription"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight=".50"
        android:clickable="true"
        />

</LinearLayout> 
```

主菜：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.followup"
    android:versionCode="1"
    android:versionName="1.0" >
.
.
.
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    .
            .
            .
    <!-- Home icon widget -->
    <receiver android:name="IconWidgetProvider" 
              android:label="@string/app_name"
              android:icon="@drawable/ic_launcher">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>
        <meta-data 
            android:name="android.appwidget.provider"
            android:resource="@xml/homescreeniconinfo" />
    </receiver>

        <activity
            android:name=".FollowUpActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:39:54.863

您是否尝试将事件处理程序添加到您的按钮？也许我在这里感到困惑，因为我实际上已经有一段时间没有进行一些激烈的 android 编程了，但据我所知，这是我过去所做的调用另一个意图的方法......

```
<Button android:name="@+id/image_in_widget"
        android:contentDescription="@string/iconDescription"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight=".50"
        android:clickable="true"
        android:onClick="onClickFunction"
        /> 
```

格外注意

```
android:onClick="onClickFunction" 
```

其中“onClickFunction”将是代码中某处的书面方法，在单击按钮时会被调用

```
public void onClickFunction(View view){ 
    //stuff to do on click
} 
```

编辑这是直接从我过去在我的 2.3 Android 手机上编译并成功运行的 HelloWorld android 教程中提取的，这是 xml

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send"
    android:onClick="sendMessage" /> 
```

这是在主 .java 文件中

```
/* called when the user clicks a button */
public void sendMessage(View view)
{
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText editText = (EditText)findViewById(R.id.edit_message);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
} 
```

DisplayMessageActivity.class 是本质上是一个新应用程序的类（从你的情况来看，我相信你希望它是一个 Hello World 应用程序）

所以你会为那个被调用的应用程序创建一个 XML 并更改/重写 DisplayMessageActivity 类来做任何你想要的“HelloWorld”-ey 的东西......

# java - 处理 controlP5 使用过多内存

> ID：12521858
> 
> 赞同：0
> 
> 时间：2012-09-20T22:31:36.860
> 
> 标签：java, memory, processing

如果我使用以下代码，我在使用处理和 controlP5 时遇到内存问题：

```
public class LabelTeste extends PApplet {

private static final long serialVersionUID = 1L;

private ControlP5 cp5;

Textlabel txtLabel;

public void setup() {
    size(600, 600);
    noStroke();
    cp5 = new ControlP5(this);

    cp5.addTextlabel("txtLabel").setText("Setup");
    txtLabel = (Textlabel) cp5.getController("txtLabel");
}

public void draw() {
    txtLabel.setText("draw");
}
} 
```

内存使用量呈天文数字上升...有人知道为什么以及如何协调吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:03:36.947

controlP5 默认使用位字体来呈现文本。当文本更新时（例如使用 setText()），将创建一个新的 PImage，然后在其中呈现和显示文本。我见过有人用 PImage 报告内存泄漏，但不能确认，只能怀疑。使用 controlP5 对文本进行默认位字体渲染的替代方法是使用处理 PFont。利用：

```
cp5 = new ControlP5(this);
cp5.setFont(createFont("",10)); 
```

# iphone - 选择表格视图的单元格时显示邮件编辑器

> ID：12521860
> 
> 赞同：0
> 
> 时间：2012-09-20T22:31:47.830
> 
> 标签：iphone, xcode, uitableview, mfmailcomposeviewcontroller

我试图让我的表格视图在选择单元格时呈现一个 mailcomposerviewcontroller。我试过使用：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;

// Set up recipients
if ([arryData objectAtIndex:0]) {
    [picker setSubject:@"To You"];

    NSArray *toRecipients = [NSArray arrayWithObject:@"emailaddress@here.com"];
    [picker setToRecipients:toRecipients];

    // Fill out the email body text
    NSString *emailBody = @"From Me";
    [picker setMessageBody:emailBody isHTML:NO];

    [self presentModalViewController:picker animated:YES];
    [picker release];
}
} 
```

然而，这让我崩溃了

```
which is waiting for a delayed presention of <MFMailComposeViewController: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:19:23.150

您的代码片段在这里似乎很好。如果您因此错过了某些内容，请再次执行这些步骤。

[http://www.roseindia.net/answers/viewqa/Mobile-Applications/18176-iPhone-MFMailcomposeviewcontroller-example.html](http://www.roseindia.net/answers/viewqa/Mobile-Applications/18176-iPhone-MFMailcomposeviewcontroller-example.html)

我希望它对你有帮助！干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:18:01.610

最好先**检查**设备是否配置为发送邮件。**你可以看到这个** [链接](http://ioscoderef.blogspot.com/2012/09/using-inapps-email-for-ios-in-xcode.html)

# html - WebKit 问题，父母的弯曲边框没有剪裁正在经历动画变换的孩子

> ID：12521870
> 
> 赞同：0
> 
> 时间：2012-09-20T22:32:52.087
> 
> 标签：html, css, css-transitions, css-transforms

与[这个问题](https://stackoverflow.com/questions/3248734/css3-border-radius-clipping-issues)类似，我有一个嵌套的 div，它是其父级的全宽和全高。但是，与其他问题不同，我想为嵌套 div 的翻译设置动画，因此建议的 position:static 修复不适用。

以下是我的测试用例：

HTML：

```
<div id="theBox">
<div id="innerBox"></div>
</div>​ 
```

CSS：

```
#theBox {
    border: 1px solid black;
    border-radius: 15px;
    width: 100px;
    height: 30px;
    overflow: hidden;
}

#innerBox {
    width: 100%;
    height: 100%;
    background-color: gray;
    -webkit-transition: -webkit-transform 300ms ease-in-out;
    -moz-transition: -moz-transform 300ms ease-in-out;
} 
```

JavaScript：

```
setTimeout(function () {
    var innerBox = document.getElementById("innerBox");
    var transformText = "translate3d(70px, 0, 0)";
    innerBox.style.webkitTransform = transformText;
    innerBox.style.MozTransform = transformText;
}, 1000); 
```

[http://jsfiddle.net/pv2dc/](http://jsfiddle.net/pv2dc/)

这在 Firefox 15.0.1 中运行良好，但在 Safari 6.0.1 中，内部 div 不会被父 div 的弯曲边框剪裁。

是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:32:52.087

有趣的是，如果`translate3d()`您不使用 2D`translate()`变换功能，则在完成过渡后会裁剪内部 div：http: [//jsfiddle.net/pv2dc/1/](http://jsfiddle.net/pv2dc/1/)

因此，一种解决方法是不使用转换，而是自己为转换设置动画：

CSS：

```
#theBox {
    border: 1px solid black;
    border-radius: 15px;
    width: 100px;
    height: 30px;
    overflow: hidden;
}

#innerBox {
    width: 100%;
    height: 100%;
    background-color: gray;
} 
```

JavaScript：

```
(function() {
    var requestAnimationFrame = window.requestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.msRequestAnimationFrame;
    window.requestAnimationFrame = requestAnimationFrame;
})();

setTimeout(function () {
    var start = window.mozAnimationStartTime || Date.now();
    function step(timestamp) {
        var progress = timestamp - start;
        var transformText = "translate(" + (70 * progress / 300) + "px)";
        if (progress >= 300) transformText = "translate(70px)";
        innerBox.style.webkitTransform = transformText;
        innerBox.style.MozTransform = transformText;
        if (progress < 300) {
            window.requestAnimationFrame(step);
        }
    }
    window.requestAnimationFrame(step);
}, 1000); 
```

[http://jsfiddle.net/pv2dc/2/](http://jsfiddle.net/pv2dc/2/)

此示例使用线性定时功能，但也可以使用缓入出功能。见： http: [//www.netzgesta.de/dev/cubic-bezier-timing-function.html](http://www.netzgesta.de/dev/cubic-bezier-timing-function.html)

# google-apps-script - 开发模式 - 其他用户制作的模板电子表格副本

> ID：12521872
> 
> 赞同：4
> 
> 时间：2012-09-20T22:32:59.200
> 
> 标签：google-apps-script

包含处于开发模式的库的电子表格副本是否应该在更改主脚本（由另一个帐户拥有）时立即更新？

我创建了一个脚本>>保存了一个版本>>在电子表格中添加了一个库引用（在开发模式下）>>制作了该 ss 的多个副本（在用于创建它的同一帐户下）并且它们都会自动更新主脚本已更改。这样可行。

但是，当我在另一个帐户下创建模板电子表格的副本时，即使我仍然可以看到库引用并且它仍处于开发模式，更改也不会更新。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T04:02:13.640

这取决于帐户对实际库的访问权限。如果他们具有编辑器访问权限，则尊重开发模式，否则如果他们只是脚本库的读者，则使用所选版本。[这是docs](https://developers.google.com/apps-script/guide_libraries#testAndDebug)中相关部分的链接。

# c++ - 如何在 OpenCV 中计算 Mat 的最大像素值

> ID：12521874
> 
> 赞同：9
> 
> 时间：2012-09-20T22:33:18.920
> 
> 标签：c++, opencv

这应该是显而易见的，我想。但是我找不到在 OpenCV Mat 的所有像素中找到最大值的简单方法。当然，我可以对每种像素类型进行以下操作。但是一般的 max 函数仍然有用。

```
double cvMax(cv::Mat& mat)
{
float max=0;
float* pData=(float*)mat.data;
for(int i=0;i<mat.rows;i++) 
{
    for(int j=0;j<mat.cols;j++)
    {
        float value = pData[j+i*mat.cols];
        if(value>max) 
        {
            max=value;
        }
    }
}
return max;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-10-16T17:01:16.443

[`cv::minMaxIdx`](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#minmaxidx)使用起来真的很简单。它在文档中看起来很复杂，但您可以省略大部分参数：

```
Mat m = ...;

double min, max;
minMaxIdx(m, &min, &max);

printf("min: %f, max: %f\n", min, max); 
```

而且，比 .`cv::minMaxIdx`快 10 倍以上`std::max_element`。这是因为`cv::minMaxIdx`针对处理`cv::Mat`数据进行了优化，并且尽可能使用多个线程。

如果您还需要图像中的最小值和最大值的位置，可以使用[`cv::minMaxLoc`](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#minmaxloc).

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-20T22:40:38.353

您始终可以将 std [max_element](http://en.cppreference.com/w/cpp/algorithm/max_element)函数与来自 opencv 的迭代器一起使用

```
std::max_element(Mat.begin<double>(),Mat.end<double>()); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-21T03:19:07.953

您还可以使用 cv::minMaxLoc 内置函数。不过，在您的情况下， std::max_element 更简单。

# sql - 我准备好的陈述有什么问题？

> ID：12521875
> 
> 赞同：0
> 
> 时间：2012-09-20T22:33:34.053
> 
> 标签：sql, oracle, prepared-statement

SQL 语句：

```
SELECT * FROM (
    SELECT rownum rid ,condata.*
    FROM (
        SELECT max(ODP_CTT.NUM_CTT_ID) conid  ,ODP_CTT.VC2_BUS_CTT_ID AS ecpid  ,ODP_CTT.vc2_title AS title   ,ODP_CTT.vc2_briefly AS description   ,EC_ECP_INFO.vc2_price AS opri   ,ec_ecp_info.vc2_discount AS npri   ,max(ODP_CTT.vc2_dft_icon) AS iurl   ,to_char(ec_ecp_info.dat_update, 'yyyymmddhhmiss') AS upt   
        FROM ODP_CTT ,ec_ecp_info
        where odp_ctt.num_status = 3
        and (
            lower(vc2_title) LIKE lower('%?%')
            or lower(ODP_CTT.vc2_briefly) LIKE lower('%?%')
        )
        AND ec_ecp_info.vc2_ecp_id = odp_ctt.VC2_BUS_CTT_ID
        GROUP BY ODP_CTT.VC2_BUS_CTT_ID   ,ODP_CTT.vc2_title ,ODP_CTT.vc2_briefly   ,EC_ECP_INFO.vc2_price ,ec_ecp_info.vc2_discount  ,to_char(ec_ecp_info.dat_update, 'yyyymmddhhmiss')
    ) condata
    order by  to_number (upt) desc
) 
```

我设置：

```
stmt.setString(1, keyword_f);
stmt.setString(2, keyword_f); 
```

我得到：

> java.sql.SQLException：oracle.jdbc.driver.DatabaseError.throwSqlException 的列索引无效（DatabaseError.java:112）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:41:51.897

```
lower(vc2_title) LIKE lower('%?%')
or lower(ODP_CTT.vc2_briefly) LIKE lower('%?%') 
```

我不认为你可以把`?`里面的字符串。你可能需要这样做：

```
lower(vc2_title) LIKE lower(?)
or lower(ODP_CTT.vc2_briefly) LIKE lower(?) 
```

然后在Java中：

```
stmt.setString(1, "%" + keyword_f + "%");
stmt.setString(2, "%" + keyword_f + "%"); 
```

# java - 直方图均衡问题

> ID：12521882
> 
> 赞同：1
> 
> 时间：2012-09-20T22:33:57.983
> 
> 标签：java, project, histogram

我正在做一个项目，在这个项目中我试图使用直方图均衡来做一些事情，比如从这个图像开始

[http://zerocool.is-a-geek.net/wp-content/uploads/2011/12/input-300x200.jpg](http://zerocool.is-a-geek.net/wp-content/uploads/2011/12/input-300x200.jpg)

“http://zerocool.is-a-geek.net/wp-content/uploads/2011/12/hist_before.png”

到这张图片

[http://zerocool.is-a-geek.net/wp-content/uploads/2011/12/output-300x200.jpg](http://zerocool.is-a-geek.net/wp-content/uploads/2011/12/output-300x200.jpg)

“http://zerocool.is-a-geek.net/wp-content/uploads/2011/12/hist_after.png”

但我似乎无法弄清楚。

这是我的增强图像代码，应该实现相同类型的调整..

```
public void EnhancedImage (File fileName) {

           double sumc = 0;
            for(int r = 0; r < array.length; r++){
                for(int c = 0; c < array[r].length; c++){ 
                    sumc = r+c;
                    if (sumc <= array[r][c]) {
                     sumc = array[r][c];
                    }
                        newc = Math.round(maxshade * ((double)sumc / pixtot));
                        array[r][c] = (int) (newc);
                        if (array[r][c] > 255) {
                            array[r][c] = 255;
                    }
                }

                } 
```

我想使用的算法如下，其中 maxShade 是图像的最大阴影（通常为 255） sumc 是图像中值小于或等于 c 的像素总数，而 pixtot 是像素总数在图片里：

```
newc := round(maxShade * ((double)sumc / pixtot)) 
```

但我不确定我是否做得对……目前我的图像变得非常暗。

任何帮助，将不胜感激！！谢谢。

还有我的pixtot例程：

```
 pixtot = 0;
           for(int y = 0; y < imageArray.length; y++)
                for(int x = 0; x < imageArray[0].length; x++)
                    pixtot = x+y; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:37:31.717

你的问题在这里：

```
pixtot = x+y; 
```

首先，你想要`+=`，不是`=`。其次，这是将像素的*索引*相加，而不是像素的*值*。你想要类似的东西

```
pixtot += imageArray[y][x]; 
```

你犯了同样的概念错误`sumc`。

**编辑：**

您的代码还有很多其他问题。如果要拉伸动态范围，则要计算`min`和`max`，所有像素值的最小值和最大值，然后将每个像素值计算为`value = maxshade * (value - min) / (max - min)`。`0`这为您提供了if`value==min`和`maxshade`if的结果像素值`value==max`。

然而，这并没有真正给你直方图均衡。为此，您需要计算输入像素值的[直方图](http://en.wikipedia.org/wiki/Histogram)并计算该直方图中的分位数以计算输出值，这并不容易。

# c# - 使用 RestSharp 显示 JSON 数据

> ID：12521883
> 
> 赞同：1
> 
> 时间：2012-09-20T22:34:00.433
> 
> 标签：c#, json, windows-phone-7

我正在尝试显示从 RestSharp 收集的数据。例如，我有以下代码，但不知道如何显示当前的数据。

```
 private void readJSON()
    {
        string url = "http://www.jsonurl.com";
        var restClient = new RestClient(url);
        var request = new RestRequest(Method.GET);
        //82.147.22.3
        //What we are requesting:value
        request.AddParameter("apikey", "xxxxxtheapikeygoesherexxxxx");

        restClient.ExecuteAsync<Entry>(request, response =>
        {
            //What to do with the JSON?
        });
    } 
```

我知道我需要将 JSON 放在 ExecuteAsync<>() 之间，但我希望能够获取数据，例如将其放入列表框中。下面是从 JSONtoSharp.com 返回给我的结果示例。代码：

```
 public class Change
    {
        public string direction { get; set; }
        public int amount { get; set; }
        public int actual { get; set; }
    }

    public class itementry
    {
        public int position { get; set; }
        public int prePosition { get; set; }
        public int Weeks { get; set; }
        public string ar { get; set; }
        public string ti { get; set; }
        public Change ch { get; set; }
    }

    public class RootObject
    {
        public int charDate { get; set; }
        public int retrieved { get; set; }
        public List<Entry> entries { get; set; }
    } 
```

我确信答案很简单，我只需要帮助，因为我完全迷失在这个问题中......找不到任何好的文档来帮助我！

注意：这是针对使用 RestSharp 和 Newtonsoft 的 Windows Phone 7 上的 C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:31:31.793

```
restClient.ExecuteAsync<Entry>(request, response =>
    {
        //Supply your JSON data to a callback
        Callback(response.Data);
    });

public void Callback(string jsonResponse)
{
    var responseList = JsonConvert.DeserializeObject<RootObject>(jsonResponse);
    //Assuming you have properly setup binding properties for Listbox, databind listbox here
    YourListBox.ItemsSource = responseList.entries;
} 
```

这里 JsonConvert 来自 NewtonSoft 包

# android - 从菜单上的按钮创建下拉菜单

> ID：12521888
> 
> 赞同：0
> 
> 时间：2012-09-20T22:34:10.213
> 
> 标签：android, user-interface, menu

在android中，我想创建一个下拉菜单，如下所示： ![在此处输入图像描述](../Images/80ddf8a26548f5c73a104b256cca36e2.png)

我见过一些例子，其中只有按钮，没有文本（如 QuickActionView），但没有一个像这样。如果有人可以指导我使用一些开源代码，那就太好了，或者指出我正确的方向。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:37:12.787

Android 的[ActionBar](http://developer.android.com/reference/android/app/ActionBar.html)正是这样做的。不幸的是，它仅适用于 3.0 及更高版本。但是，您可以使用[ActionBarSherlock](http://actionbarsherlock.com/)。

# c# - 如果网站上不存在指定的文件，不想下载

> ID：12521890
> 
> 赞同：1
> 
> 时间：2012-09-20T22:34:15.550
> 
> 标签：c#, winforms

我遇到了从网站下载文件的问题。

用户可以填写文本框（例如：hello.html），然后单击按钮下载 html 文件。现在我的问题是：即使文件“hello.html”不存在，我的代码也会倾向于下载它。文件夹中会出现“index.html”文件。如何编写“if”语句，以便在文件不存在时告诉代码不要下载？

我的代码：

```
if (FILE NOT EXIST ON THE WEBSITE)
         {
              //MessageBox.Show("There is no such file on the website. Please check your spelling.");             
         }
         else
         {
              client.DownloadFile("http://example.com/" + txtbox.Text.ToUpper().ToString(),
                                                sourceDir + txtbox.Text.ToUpper().ToString() + ".html");
         } 
```

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:45:54.370

[System.IO.File.Exists(fpath) 在 Chrome 和 Firefox 中返回 false](https://stackoverflow.com/questions/9295164/system-io-file-existsfpath-returns-false-in-chrome-firefox)

```
if (File.Exists(fileLocation))
{ 
    // Download File!
} 
```

该问题特定于上传，但其概念相同。

或者：

直接取自： http: [//www.dotnetthoughts.net/how-to-check-remote-file-exists-using-c/](http://www.dotnetthoughts.net/how-to-check-remote-file-exists-using-c/)

将此方法添加到您的课程中。

```
private bool RemoteFileExists(string url)
{
    try
    {
        //Creating the HttpWebRequest
        HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
        //Setting the Request method HEAD, you can also use GET too.
        request.Method = "HEAD";
        //Getting the Web Response.
        HttpWebResponse response = request.GetResponse() as HttpWebResponse;
        //Returns TURE if the Status code == 200
        return (response.StatusCode == HttpStatusCode.OK);
    }
    catch
    {
        //Any exception will returns false.
        return false;
    }
} 
```

然后，当您想检查某个文件是否存在于某个 url 时，请使用以下命令：

```
if (RemoteFileExists("http://blog.stackoverflow.com/wp-content/uploads/stackoverflow-logo-300.png")
{
    //File Exists
}
else
{
    //File does not Exist
} 
```

# javascript - 自定义 WHMCS 注册表单 Java 按钮验证

> ID：12521893
> 
> 赞同：1
> 
> 时间：2012-09-20T22:34:27.857
> 
> 标签：javascript, ajax, validation, whmcs

我们一直在为 WHMCS 定制一个 Ajax 注册表单：[这里](https://www.kahunahost.com/clients/cart.php?carttpl=organicformv4&systpl=organicthemev4&gid=2)。

当您选择一个包时，“下一步”按钮应该取消隐藏。这是一种确保用户在继续之前选择某些内容的方法。

问题是按钮陷入了似乎是无限验证循环的状态（您可以通过单击上面的链接查看）。

该表单只是 WHMCS Ajax Cart 的定制版本：[这里](http://demo.whmcs.com/cart.php?pid=1&systpl=default&carttpl=ajaxcart)。它使用 jQuery 验证。这是按钮的代码：

```
{if $hiddenproduct}<input type="hidden" name="pid" value="{$pid}"/>{/if} 
```

有谁知道问题可能是什么？即使是在正确的方向上的一点现在也会是一个巨大的帮助。谢谢！

# shell - 运行多个shell命令的有效方法？

> ID：12521897
> 
> 赞同：0
> 
> 时间：2012-09-20T22:34:57.373
> 
> 标签：shell, scripting

Shell 脚本 newb 在这里。首先感谢大家为帮助我解决这个问题所付出的任何时间和精力。

我需要创建一个 shell 脚本和一个 cron 作业来删除 /tmp 和存储在自定义目录中的会话。

几天来我一直在学习基础知识，并且正在尝试我的第一个 shell 脚本和 cron 作业。

我对运行多个 shell 命令的最佳方式感到困惑，即使其他命令失败，也允许命令通过。我还想要为那些失败的命令发送日志报告和电子邮件。

我知道我可以使用与号（&&）或分号。我还知道与号允许退出错误检查，而分号则不允许。

这是我的脚本

TmpPurge.sh

```
#!/bin/bash
find /home/username/sessions -iname 'sess_*' -mmin +480 -exec rm -rf {} \; &&
find /home/username/sessions -iname 'sess_*' -mmin +240 -exec rm -rf {} \; &&
/usr/sbin/tmpwatch -umc 5 /home/username/sessions &&
/usr/sbin/tmpwatch -umc 6 /var/tmp &&
/usr/sbin/tmpwatch -umc 12 /var/cache/eaccelerator

if [ $? = 0 ];
then
echo "$(date) Tmp purge completed successfully with error code: $?.  " >> /home/username/logs/TmpPurge.log
else
echo "$(date) Tmp purge exited with error code: $?.  " >> /home/username/logs/TmpPurge.log
fi
echo -e "\r" >> /home/username/logs/TmpPurge.log 
```

定时任务：

```
20 3 * * * /bin/sh /home/username/scriptsdir/TmpPurge.sh > /home/username/logs/TmpPurge.log 2>&1 
```

问题1：脚本是否正确？问题2：在多个命令之上运行的最佳方式是什么？是上面还是

```
find /home/username/sessions -iname 'sess_*' -mmin +480 -exec rm -rf {} \;
find /home/username/sessions -iname 'sess_*' -mmin +240 -exec rm -rf {} \;
/usr/sbin/tmpwatch -umc 5 /home/username/sessions;
/usr/sbin/tmpwatch -umc 6 /var/tmp;
/usr/sbin/tmpwatch -umc 12 /var/cache/eaccelerator 
```

或者

```
/usr/sbin/tmpwatch -umc 5 /home/username/sessions\%
/usr/sbin/tmpwatch -umc 6 /var/tmp\%
/usr/sbin/tmpwatch -umc 12 /var/cache/eaccelerator\% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:20:31.717

检查错误的另一种方法是通过“||” 操作员

```
 command || exit 1    # Will exit with return code 1 if command fails 
```

这个想法很简单：

&& 和 || 用于将命令链接在一起（与用于分隔命令的“;”不同）。

&& 是 AND 运算符，这意味着每个连续的命令只有在前面的命令成功时才会运行（以 0 退出）。

|| 是 OR 运算符，这意味着每个连续的命令只有在前一个命令失败时才会运行（退出时的值不是 0）。

; 用于结束命令（或命令链）。如果一行突然结束，shell（至少我知道的大多数 shell）假定该行以 ; 结尾。如果你不想这样，你需要用 \ 结束该行，但是 shell 会在将它作为一行运行之前将这些行连接在一起。

另请注意，您可以将这些链接在一起：

```
 echo a && echo b && ls /dir/doesnt/exist && echo c; echo d || echo e; ls /dir/doesnt/exist || echo f 
```

将打印：

```
 a
 b
 d
 f 
```

另请注意，您还可以以左关联的方式混合各种 &&s 和 ||s：

```
 echo a && ls /dir/doesnt/exist || echo b 
```

印刷：

```
 a
 b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T23:12:12.973

第一种方式，将命令与 链接在一起`&&`，将在第一个错误处停止，并报告该错误。如果您使用分号`;`（这实际上是不必要的，如果您将每个命令放在新行上），那么它们都会运行，无论它们是否失败，并且您的`if [ $? -eq 0 ]`检查只会在*最后一个*命令有时通知并报告错误一个错误。所以我认为这不是你想要的。

或者，您可以`if [ $? -ne 0 ]`在每个命令之后添加检查。也许尝试任何看起来最清晰和最容易理解的东西。

此外，使用 cron 作业清理 tmp 并且`find`如果`-exec rm -rf {}`它是多用户系统可能会很危险，只需[四处搜索](https://www.google.com/search?q=cron+%2Ftmp+clean+safely)一下我的意思。有人可能有一些好的、安全的代码，你可以看看。

# sql - 可以使 CASE 子句上的 ORDER BY 更快吗？

> ID：12521902
> 
> 赞同：2
> 
> 时间：2012-09-20T22:35:17.467
> 
> 标签：sql, performance, sql-server-2008, sql-order-by

我正在从约 3.5 亿条记录的表中选择结果，它的运行速度非常慢 - 大约 10 分钟。罪魁祸首似乎是**ORDER BY**，好像我删除了它，查询只需要一点时间。这是要点：

```
SELECT TOP 100
    (columns snipped)
FROM (
    SELECT 
        CASE WHEN (e2.ID IS NULL) THEN
            CAST(0 AS BIT) ELSE CAST(1 AS BIT) END AS RecordExists,
        (columns snipped)
    FROM dbo.Files AS e1
    LEFT OUTER JOIN dbo.Records AS e2 ON e1.FID = e2.FID
)  AS p1
ORDER BY p1.RecordExists 
```

基本上，我通过*Files*是否有相应的*Record*来排序结果，因为那些不需要首先处理。**我可以使用WHERE**子句运行两个查询，但如果可能的话，我宁愿在一个查询中进行。

有什么办法可以加快这个速度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:44:11.710

最终的问题是，在子查询中使用 CASE 会引入 ORDER BY，*而不是以*[sargable](http://en.wikipedia.org/wiki/Sargable)方式使用的东西。因此，必须首先对*整个中间结果集进行排序以找到 TOP 100 - 这是全部 350+ 百万条记录！*²

在这种特殊情况下，将 CASE 移动到外部 SELECT 并使用 DESC 排序（首先放置 NULL 值，这意味着当前 RecordExists 中的“0”）应该可以解决问题¹。*虽然这不是一种通用方法..但是如果 Files.ID*被索引，排序应该快得多。（如果查询仍然很慢，请查阅查询计划以找出 ORDER BY*不*使用索引的原因。）

另一种选择可能是为 RecordExists 包含一个*持久计算*列（也被索引），它可以用作 ORDER BY 中的索引。

再一次，**这个想法是 ORDER BY 可以处理一些[sargable](http://en.wikipedia.org/wiki/Sargable)**，它只需要在索引内按顺序读取（直到所需的记录数以匹配外部限制），而*不是*即时订购 350+ 百万条记录： )

然后 SQL Server 能够将此排序（和限制）*下推*到子查询中，而不是等待子查询的中间结果集*出现*。根据订购的*内容*查看查询计划差异。

* * *

¹示例：

```
SELECT TOP 100
    -- If needed
    CASE WHEN (p1.ID IS NULL) THEN
        CAST(0 AS BIT) ELSE CAST(1 AS BIT) END AS RecordExists,
    (columns snipped)
FROM (
    SELECT 
        (columns snipped)
    FROM dbo.Files AS e1
    LEFT OUTER JOIN dbo.Records AS e2 ON e1.FID = e2.FID
)  AS p1
-- Hopefully ID is indexed, DESC makes NULLs (!RecordExists) go first
ORDER BY p1.ID DESC 
```

* * *

²实际上，它似乎可以*假设*只是在前 100 个 0 之后停止而没有全排序 .. 至少在*封闭函数范围下的一些极端查询计划优化下*，但这取决于中间结果中*何时*遇到 0设置（在最初的几千或直到数亿或永远不会？）。无论如何，我*非常怀疑*SQL Server 是否会导致这种极端情况。也就是说，不要指望这种仍然*不可预测的*行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T22:43:19.913

试试这个表格

```
SELECT TOP(100) *
FROM (
    SELECT TOP(100)
        0 AS RecordExists
        --,(columns snipped)
    FROM dbo.Files AS e1
    WHERE NOT EXISTS (SELECT * FROM dbo.Records e2 WHERE e1.FID = e2.FID)
    ORDER BY SecondaryOrderColumn
) X
UNION ALL
SELECT * FROM (
    SELECT TOP(100)
        1 AS RecordExists
        --,(columns snipped)
    FROM dbo.Files AS e1
    INNER JOIN dbo.Records AS e2 ON e1.FID = e2.FID
    ORDER BY SecondaryOrderColumn
) X
ORDER BY SecondaryOrderColumn 
```

关键索引：
记录（FID）
文件（FID、SecondaryOrdercolumn）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T22:41:22.003

那么它慢得多的原因是因为它实际上是一个非常不同的查询，没有 order by 子句。

使用 order by 子句：从整个 3.5 亿行中查找所有匹配的记录。然后对它们进行排序。

没有 order by 子句：查找前 100 条匹配记录。停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T22:43:38.373

问：如果您说唯一的区别是“with/outout”和“order by”，那么您能否以某种方式将“top 100”移动到*内部*选择中？

例子：

```
SELECT
    (columns snipped)
FROM (
    SELECT TOP 100
        CASE WHEN (e2.ID IS NULL) THEN
            CAST(0 AS BIT) ELSE CAST(1 AS BIT) END AS RecordExists,
        (columns snipped)
    FROM dbo.Files AS e1
    LEFT OUTER JOIN dbo.Records AS e2 ON e1.FID = e2.FID
)  AS p1
ORDER BY p1.RecordExists 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T23:12:39.617

在 SQL Server 中，`null`值排序低于域中的任何值。鉴于这两个表：

```
create table dbo.foo
(
  id   int         not null identity(1,1) primary key clustered ,
  name varchar(32) not null unique nonclustered ,
)

insert dbo.foo ( name ) values ( 'alpha' )
insert dbo.foo ( name ) values ( 'bravo' )
insert dbo.foo ( name ) values ( 'charlie' )
insert dbo.foo ( name ) values ( 'delta' )
insert dbo.foo ( name ) values ( 'echo' )
insert dbo.foo ( name ) values ( 'foxtrot' )
go

create table dbo.bar
(
  id     int         not null identity(1,1) primary key clustered ,
  foo_id int             null foreign key references dbo.foo(id) ,
  name   varchar(32) not null unique nonclustered ,
)
go
insert dbo.bar( foo_id , name ) values( 1 , 'golf' )
insert dbo.bar( foo_id , name ) values( 5 , 'hotel' )
insert dbo.bar( foo_id , name ) values( 3 , 'india' )
insert dbo.bar( foo_id , name ) values( 5 , 'juliet' )
insert dbo.bar( foo_id , name ) values( 6 , 'kilo' )
go 
```

查询

```
select *
from      dbo.foo foo
left join dbo.bar bar on bar.foo_id = foo.id
order by bar.foo_id, foo.id 
```

产生以下结果集：

```
id name    id   foo_id name
-- ------- ---- ------ -------
2  bravo   NULL NULL   NULL
4  delta   NULL NULL   NULL
1  alpha   1    1      golf
3  charlie 3    3      india
5  echo    2    5      hotel
5  echo    4    5      juliet
6  foxtrot 5    6      kilo

(7 row(s) affected) 
```

这*应该*允许查询优化器使用合适的索引（如果存在）；但是，它不*保证*会使用任何此类索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T23:38:59.087

你能试试这个吗？

```
SELECT TOP 100
    (columns snipped)
FROM dbo.Files AS e1
LEFT OUTER JOIN dbo.Records AS e2 ON e1.FID = e2.FID
ORDER BY e2.ID ASC 
```

这应该首先为您提供 e2.ID 为空的位置。此外，请确保 Records.ID 已编入索引。这应该给你你想要的顺序。

# python - pydev 调试器不工作

> ID：12521903
> 
> 赞同：2
> 
> 时间：2012-09-20T22:35:18.153
> 
> 标签：python, pydev

我正在使用 pydev（最新版本）并且调试器不再工作（特别是断点不起作用）。我收到一个奇怪的错误：

pydev 调试器：启动 Traceback（最后一次调用）：

没有进一步的文字。...

我正在使用无堆栈 python 2.7 和 pyside（几乎是最新版本）。不工作的断点不在 stackless tasklet 中。

有人知道原因或解决方法吗？

好的，（有点尴尬）我过去也遇到过类似的问题，在这里发布并在这里得到了广泛的[帮助](https://stackoverflow.com/questions/9486871/pydev-breakpoints-not-working "这里")

我使用该帖子来确定此方法的问题：

```
def __getattr__(self, name):
    if name in self._code_:
        func = self.getfunction(name)
        setattr(self, name, func)
        return func 
    else:
        return super(AtomicProcess, self).__getattr__(name) 
```

我想使用这个或类似的方法在最晚的时间（当它被调用时）设置属性。我添加了超级调用来可能解决问题，但没有骰子。

*   有谁知道是什么导致了这种方法的问题？
*   有没有人有一个可以实现后期初始化但避免 pydev 问题的修复程序？

另外我应该提到我的代码运行没有问题，但是调试器似乎在上面的方法中进入了一些无限递归，在这个方法之后恢复并忽略了断点。

干杯，拉斯

PS：有人吗？pydev 开发人员是否在关注 stackoverflow，或者我可以尝试其他地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:58:58.863

似乎和上一期一样，虽然我不确定是什么（如果你能把代码传给我，我可以看一下，但没有它，我唯一能做的就是指向我们拥有的最后一个线程） .

请记住，如果您有递归异常，这会破坏 Python 调试工具......与此同时，您可以做的一种解决方法是使用远程调试器来改进它。

我确实有一个预感：我的猜测是您访问了“自我”中的某些东西，它正在`__getattr__`再次调用......（它会生成递归并破坏调试器）。

另一件可能的事情：不要在: 中使用“超级”习语，而是`super(AtomicProcess, self).__getattr__(name)`直接使用超类：`Superclass.__getattr__(self, name)`...

干杯，

法比奥

# angularjs - AngularJS ng-include 不包含视图，除非传入 $scope

> ID：12521905
> 
> 赞同：121
> 
> 时间：2012-09-20T22:35:34.113
> 
> 标签：angularjs, angularjs-ng-include

假设`ngInclude`可以采取原始路径是错误的吗？我一直在尝试将我的设置`ngInclude`如下：

```
<div ng-include src="views/header.html"></div> 
```

这不起作用，但如果我做这样的事情它确实有效。

```
// HeaderController
app.controller('HeaderCtrl', function($scope){
   $scope.templates = {[
     template: { url: 'views/header.html' }
   ]};

   $scope.template = $scope.templates[0].template;
}); 
```

在我的 index.html

```
<div ng-controller="HeaderCtrl">
  <div ng-include src="template.url"></div>
</div> 
```

是否`ngInclude`仅排除范围之外的值？如果是这样，为什么会这样，而不是直接包含 html 部分。

* * *

## 回答 #1

> 赞同：327
> 
> 时间：2012-09-20T22:38:29.340

[`ng-include`](https://docs.angularjs.org/api/ng/directive/ngInclude)接受一个表达式。如果要直接在其中指定显式 URL，则必须提供一个字符串。

```
<div ng-include src="'page.html'"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-07T09:34:49.017

[`ng-include`](https://docs.angularjs.org/api/ng/directive/ngInclude), 因为其他指令 ( [`ng-class`](https://docs.angularjs.org/api/ng/directive/ngClass), [`ng-src`](https://docs.angularjs.org/api/ng/directive/ngSrc)...)从范围内**评估 Angular 表达式。**如果没有引号 ( `''`)，它将搜索范围的变量。

* * *

请注意，您不必指定`src`属性。

```
<div ng-include src="'views/header.html'"></div> 
```

可以改写为：（*更简单）*

```
<div ng-include="'views/header.html'"></div> 
```

* * *

您还可以使用 ng-include 作为**元素**：

```
<ng-include src="'views/header.html'"></ng-include> 
```

# iphone - pushViewController 从不同的视图？

> ID：12521908
> 
> 赞同：0
> 
> 时间：2012-09-20T22:35:57.670
> 
> 标签：iphone, objective-c, ios

我正在开发一个在不同视图上具有菜单的应用程序（左侧的那个） 如何通过点击左侧的项目来更改右侧的视图？

![拆分视图屏幕](../Images/20b7f13f944fa0183786fde524251acf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:50:03.703

通过假设每个视图都有一个视图控制器，这样的通信应该通过`delegate`. 查看此[基本教程](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)以设置`protocols`和`delegates`. 这个想法是让左侧的导航控制器符合协议，并将右侧的视图控制器设置为导航控制器的委托。换句话说，您将让正确的视图控制器负责处理导航控制器中发生的事件。

# python - 如何在熊猫中将两个具有不同列标签的数据框相乘？

> ID：12521909
> 
> 赞同：6
> 
> 时间：2012-09-20T22:35:57.713
> 
> 标签：python, pandas

我正在尝试将具有不同列标签的两个数据框相乘（加/除/等）。

我确信这是可能的，但最好的方法是什么？我尝试使用 rename 首先更改一个 df 上的列，但是（1）我宁愿不这样做，并且（2）我的真实数据在列上有一个多索引（其中只有一层多索引的标签不同)，对于这种情况，重命名似乎很棘手......

因此，为了尝试概括我的问题，我怎样才能习惯于`df1 * df2`定义`map`要相乘的列？

```
df1 = pd.DataFrame([1,2,3], index=['1', '2', '3'], columns=['a', 'b', 'c'])
df2 = pd.DataFrame([4,5,6], index=['1', '2', '3'], columns=['d', 'e', 'f'])
map = {'a': 'e', 'b': 'd', 'c': 'f'}

df1 * df2 = ? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-26T22:31:01.863

我也被这个问题困扰。似乎熊猫需要矩阵乘法需要两个数据框具有相同的列名。

我搜索了很多，发现设置放大中的示例是在数据框中添加一列。

对于你的问题，

```
rs = pd.np.multiply(ds2, ds1) 
```

rs 将具有与 ds2 相同的列名。

假设我们想将多个列与同一数据框中的其他几列相乘，并将这些结果附加到原始数据框中。

例如 ds1,ds2 在同一个数据帧 ds 中。我们可以

```
ds[['r1', 'r2', 'r3']] = pd.np.multiply(ds[['a', 'b', 'c']], ds[['d', 'e', 'f']]) 
```

我希望这些会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-12T04:17:39.580

更新解决方案，因为 pd.np 已被弃用：`df1.multiply(np.array(df2)`

它将保留 df1 的列名并按顺序将它们乘以 df2 的列

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-25T17:56:41.540

我只是偶然发现了同样的问题。似乎熊猫希望列和行索引都对齐以进行逐元素乘法，因此您可以`rename`在乘法期间使用映射：

```
>>> df1 = pd.DataFrame([[1,2,3]], index=['1', '2', '3'], columns=['a', 'b', 'c'])
>>> df2 = pd.DataFrame([[4,5,6]], index=['1', '2', '3'], columns=['d', 'e', 'f'])
>>> df1
   a  b  c
1  1  2  3
2  1  2  3
3  1  2  3
>>> df2
   d  e  f
1  4  5  6
2  4  5  6
3  4  5  6
>>> mapping = {'a' : 'e', 'b' : 'd', 'c' : 'f'}
>>> df1.rename(columns=mapping) * df2
   d  e   f
1  8  5  18
2  8  5  18
3  8  5  18 
```

如果您想要列的“自然”顺序，您可以动态创建映射，例如：

```
>>> df1 * df2.rename(columns=dict(zip(df2.columns, df1.columns))) 
```

例如做两个矩阵的“Frobenius 内积”，你可以这样做：

```
>>> (df1 * df2.rename(columns=dict(zip(df2.columns, df1.columns)))).sum().sum()
96 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-15T22:13:36.527

这是一个相当古老的问题，正如 nnsk 所说，`pd.np`正在被弃用。

一个好看的解决方案是`df1 * df2.values`. 这将产生两个数据框的元素乘积，并保留`df1`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T01:12:41.477

假设索引已经对齐，您可能只想以正确的顺序对齐两个 DataFrame 中的列并将两个 DataFrame 的列`.values`分开。

假设`mapping = {'a' : 'e', 'b' : 'd', 'c' : 'f'}`：

```
v1 = df1.reindex(columns=['a', 'b', 'c']).values
v2 = df2.reindex(columns=['e', 'd', 'f']).values
rs = DataFrame(v1 / v2, index=v1.index, columns=['a', 'b', 'c']) 
```

# mysql - ruby on rails MySQL 服务器版本，以便在 '? 附近使用正确的语法 find_by_sql

> ID：12521910
> 
> 赞同：0
> 
> 时间：2012-09-20T22:36:03.537
> 
> 标签：mysql, ruby-on-rails, syntax-error, find-by-sql

**看法：**

```
<% Favorite.find_by_sql("SELECT p.* FROM favorites as f LEFT JOIN posts as p ON p.user_id = f.user_id WHERE f.user_id = ? limit 15", @user.id).reverse.each do |post| %> 
```

我收到以下错误：

```
Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '? limit 15' at line 1: SELECT p.* FROM favorites as f LEFT JOIN posts as p ON p.user_id = f.user_id WHERE f.user_id = ? limit 15 
```

我基本上想要的是获得我喜欢的帖子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:57:46.273

尝试

```
<% Favorite.find_by_sql(["SELECT p.* FROM favorites as f LEFT JOIN posts as p ON p.user_id = f.user_id WHERE f.user_id = ? limit 15", @user.id]).reverse.each do |post| %> 
```

需要将查询及其参数作为数组发送，以使参数替换发生。

您是否知道这种方法已被弃用，而不是与 db 无关，因此绝对是最后的手段和维护的噩梦。

应该是您模型上的一种方法来执行此操作，将 sql 放在视图中不仅会脱轨，而且是灾难性的火车事故。

# wordpress - 试图了解 WordPress 主题是如何构建的 - 奇怪的自定义帖子字段

> ID：12521911
> 
> 赞同：0
> 
> 时间：2012-09-20T22:36:04.063
> 
> 标签：wordpress, wordpress-theming

我正在尝试弄清楚主题是如何构建的，从以下代码中我可以看到正在创建自定义帖子类型的商店......

```
register_taxonomy( APP_TAX_STORE,
        array( 'promo_code','sale_offers','in_store','coupon' ),
        array(  'hierarchical' => true,
                'labels' => array(
                        'name' => __( 'Stores', 'appthemes'),
                        'singular_name' => __( 'Store', 'appthemes'),
                        'search_items' =>  __( 'Search Stores', 'appthemes'),
                        'all_items' => __( 'All Stores', 'appthemes'),
                        'edit_item' => __( 'Edit Store', 'appthemes'),
                        'update_item' => __( 'Update Store', 'appthemes'),
                        'add_new_item' => __( 'Add New Store', 'appthemes'),
                        'add_or_remove_items' => __( 'Add or remove Stores', 'appthemes'),
                        'separate_items_with_commas' => __( 'Separate Stores with commas', 'appthemes'),
                        'choose_from_most_used' => __( 'Choose from the most common Stores', 'appthemes'),
                        'new_item_name' => __( 'New Store Name', 'appthemes')
                ),
                'show_ui' => true,
                'query_var' => true,
                'update_count_callback' => '_update_post_term_count',
                'rewrite' => array( 'slug' => $store_tax_base_url, 'with_front' => false, 'hierarchical' => true ),
        )
); 
```

我理解这一点，但似乎还有一个名为“clpr_store_phone”的字段正在创建......

```
function clpr_edit_stores($tag, $taxonomy) {
$the_store_phone = get_metadata($tag->taxonomy, $tag->term_id, 'clpr_store_phone', true);
?>

<tr class="form-field">
    <th scope="row" valign="top"><label for="clpr_phone"><?php _e('Phone Number', 'appthemes'); ?></label></th>
    <td><input type="text" name="clpr_store_phone" id="clpr_store_phone" value="<?php echo $the_store_phone; ?>"/><br /></td>
</tr>

<?php
}
add_action('stores_edit_form_fields', 'clpr_edit_stores', 10, 2);

function clpr_save_stores($term_id, $tt_id) {
if (!$term_id) return;

if(isset($_POST['clpr_store_phone']))
  update_metadata($_POST['taxonomy'], $term_id, 'clpr_store_phone',     $_POST['clpr_store_phone']);
}
add_action('edited_stores', 'clpr_save_stores', 10, 2); 
```

这就是我困惑的地方，这里设置了什么？'clpr_store_phone' 是分类法中的自定义字段吗？

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T23:10:57.730

查看您发布的有限代码，他们似乎为分类类型创建了一个自定义元表。

如果您查找[get_metadata](http://phpxref.ftwr.co.uk/wordpress/nav.html?wp-includes/meta.php.source.html#l254)函数，它会尝试从缓存中获取元值，如果不存在，它会调用[update_meta_cache](http://phpxref.ftwr.co.uk/wordpress/nav.html?wp-includes/meta.php.source.html#l514)来准备元缓存。update_meta_cache 使用一个名为 _get_meta_table 的函数（见下文，因为我只能发布两个链接），它从`$meta_type`传递给的值生成一个表名，`get_metadata`因为分类类型不存在，他们必须创建一个自定义表并将表名添加到`$wpdb`

```
function _get_meta_table($type) {
    global $wpdb;

    $table_name = $type . 'meta';

    if ( empty($wpdb->$table_name) )
        return false;

    return $wpdb->$table_name;
} 
```

phpxref.ftwr.co.uk/wordpress/nav.html?wp-includes/meta.php.source.html#l811

# unix - 将 cron 运行的输出从 EC2 实例发送到外部电子邮件地址

> ID：12521912
> 
> 赞同：3
> 
> 时间：2012-09-20T22:36:06.280
> 
> 标签：unix, amazon-ec2, cron, exim

我想要做的很简单——我希望 EC2 实例上的 cron 输出发送到外部电子邮件地址。不过，我显然做了一些错误的事情，并且很困惑。

我已经将 exim4 配置为使用 gmail 作为智能主机，但不知何故，我设法做一些事情来让来自 cron 守护进程的电子邮件以`From: Cron Daemon <email address from /etc/exim4/passwd.client>`. 为什么 cron 决定像我一样运行？

我有

```
root: external@email.com
user-account: external@email.com 
```

在 /etc/别名中。但是，我收到发送给那个说的电子邮件

```
Delivery to the following recipient failed permanently:
root@domu-____.compute-1.internal 
```

为什么 exim4 试图通过这样一个看起来很奇怪的电子邮件地址来获取 root 权限？我理论上可以在 exim4 配置中添加 domu-(redacted).compute-1.internal 作为本地域，但这些是动态配置的实例，这将是一个真正的痛苦，而且我也不知道在世界的哪个地方该域来自 - 主机名 -f 提供 ip-11-11-11-11.ec2.internal。除了发送到 root@localhost （考虑到我的配置可以正常工作）之外，我做了什么让 cron 做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T19:59:47.963

确保您的 cron 文件中有以下内容：

mailto="external@email.com"

如果三个是交付错误，请将它们粘贴在这里

# vim - vim：尝试对 FuzzyFinder 使用自动完成功能

> ID：12521913
> 
> 赞同：1
> 
> 时间：2012-09-20T22:36:07.980
> 
> 标签：vim

我已经安装了 FuzzyFinder，但自动完成对我不起作用..

我正在写`:FufFile pattern:<enter>`，然后我开始在项目中写一个文件的名称，但它没有显示任何内容。它只是说：`Omni completion (^O^N^P) Pattern not found`。

我`FufRenewCache:`之前跑

我使用 VAM 安装了 FF。

任何的想法？

哈维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:04:50.577

如果您想通过目录递归搜索，请尝试添加`**/`到您的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T00:12:28.750

FuzzyFinder 不会在项目中递归搜索。您必须输入目录的几个字符，然后在文件路径下按回车键。如果您正在寻找一个对整个项目进行递归搜索的程序，您可能会查看[command-T](https://github.com/wincent/Command-T)。

如果这不是您要查找的内容，那么了解您正在输入的模式以及您尝试访问的文件路径将有所帮助。

# objective-c - 如何为窗口可可的一部分绘制平铺图像

> ID：12521915
> 
> 赞同：2
> 
> 时间：2012-09-20T22:36:16.940
> 
> 标签：objective-c, xcode, macos, cocoa, background-image

我是新手，我什至很难正确地提出我的问题，因为我不知道正确的术语。我已经完成了一些客观的 c 编码，所以除了使用 UI 之外，我有点超出初学者的水平。

我想知道实现这一目标的最佳实践——即正确的方法。

我有一个窗口，顶部有一些按钮。下面是一个区域，将有一个*image 或 webview*。这将是可变大小的，所以为了让它看起来不错，我希望它后面的区域有一个漂亮的平铺图案。

我已经尝试了一些可行的方法，但一切都感觉有点骇人听闻。是否有一个控件可以自动提供平铺背景并让我将其他控件放入其中？就此而言，是否有任何类型的控件可以将其他控件放入其中？（我在 GTK 中已经习惯了，但在 Cocoa 中似乎并不常见）

另外，考虑到图像可以根据上面的按钮改变大小，我应该使用核心动画和它的图层（我已经阅读过它们但没有使用它们）？

![在此处输入图像描述](../Images/e3fab98b68bd6364a2c9f5542e558a63.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:42:58.213

一种相当简单的方法是使用自定义 NSView 子类作为背景视图。在它的 -drawRect: 方法中，编写代码来获取图像并重复绘制它以填充视图的边界。执行此操作的算法非常简单。从左上角（或任何角落）开始，绘制图像，然后将 x 位置增加图像的宽度，然后再次绘制。当 x 位置超过视图的最大 x 坐标时，将 y 增加图像的高度并绘制下一行，依此类推，直到你填满整个东西。这应该可以解决问题：

```
@interface TiledBackgroundView : NSView
@end

@implementation TiledBackgroundView

- (void)drawRect:(NSRect)dirtyRect
{
    NSRect bounds = [self bounds];
    NSImage *image = ...
    NSSize imageSize = [image size];

    //  start at max Y (top) so that resizing the window looks to be anchored at the top left 
    for ( float y = NSHeight(bounds) - imageSize.height; y >= -imageSize.height; y -= imageSize.height ) {
        for ( float x = NSMinX(bounds); x < NSWidth(bounds); x += imageSize.width ) {
            NSRect tileRect = NSMakeRect(x, y, imageSize.width, imageSize.height);
            if ( NSIntersectsRect(tileRect, dirtyRect) ) {
                NSRect destRect = NSIntersectionRect(tileRect, dirtyRect);
                [image drawInRect:destRect
                         fromRect:NSOffsetRect(destRect, -x, -y)
                        operation:NSCompositeSourceOver 
                         fraction:1.0];
            }
        }
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:20:48.480

没有控件会自动为您平铺背景。

请记住，`NSView`s（通常是子类）完成所有绘图 - 例如，灰色区域将是的子类，`NSView`您可以将图像放入其中。

要实际绘制平铺图像（通过`NSView`子类），可以使用 Madsen 的方法，但不是最方便的。最简单的方法是：

```
NSColor *patternColor = [NSColor colorWithPatternImage:[NSImage imageNamed:@"imageName"]];
[patternColor setFill];
NSRectFill(rectToDraw); 
```

您应该将其放入`-drawRect:`自定义视图类的方法中。它创建一个`NSColor`代表平铺图像的图像。请注意，它也可以是滚动/剪辑视图等的子类。

我对 Core Animation 不太熟悉，但它对于操作视图很有用，并且可能是您想要查看的关于绘制图像的视图（并且仅限该视图）的方向。

# php - 选择菜单未使用已添加的新信息进行更新

> ID：12521916
> 
> 赞同：0
> 
> 时间：2012-09-20T22:36:26.383
> 
> 标签：php, jquery, ajax

最初，当页面加载时，ajax 会填充一个选择菜单。当我输入新的患者信息时，它会添加到数据库中，但患者选择菜单不会在选择新患者时追加/刷新。

我希望有人可以帮助我解决我做错的事情。

阿贾克斯调用

```
$('#newpatient').click(function() {
    var patientadd = $('#patientaddform').serializeArray();
    $.ajax({
        url: 'patientadd.php',
        type: "POST",
        data: patientadd,
        dataType: 'json',
        success: function(data) {
            var html = '';
            var len = data.length;
            for (var i = 0; i < len; i++) {
                html += '<option value="' + data[i].patient_id + '">' + data[i].patient_firstname + ' ' + data[i].patient_lastname + '</option>';
            }
            $('#patientselect').append(html);
        },
        complete: function() {
            $('#patientselect').selectmenu('refresh', true);
        }
    });
});​ 
```

病人添加.php

```
if (empty($_POST) === false) {
    $update_data = array('company_id' = > $_POST['company_id'], 'addpatient_firstname' = > $_POST['addpatient_firstname'], 'addpatient_lastname' = > $_POST['addpatient_lastname'], 'addpatient_dob' = > $_POST['addpatient_dob'], 'patient_added' = > $_POST['patient_added']);

    $required_fields = array('company_id', 'addpatient_firstname', 'addpatient_lastname', 'addpatient_dob', 'patient_added');
    foreach($update_data as $key = > $value) {
        if (empty($value) && in_array($key, $required_fields) === true) {
            $errors[] = 'Fields marked with an asterisk are required';
            break 1;
        }
    }
}

if (empty($_POST) === false && empty($errors) === true) {

    $company_id = $_POST['company_id'];
    $patient_id = $_POST['addpatient_id'];
    $first_name = $_POST['addpatient_firstname'];
    $last_name = $_POST['addpatient_lastname'];
    $dob = $_POST['addpatient_dob'];
    $updated = $_POST['patient_added'];

    $update = array();
    array_walk($update_data, 'array_sanitize');

    foreach($update_data as $field = > $data) {
        $update[] = '`'.$field.'` = \''.$data.'\'';
    }

    mysql_query("INSERT INTO `lab`.`patients` (`company_id`,  `patient_id`, `patient_firstname`, `patient_lastname`, `patient_dob`, `patient_added`) VALUES ('$company_id', NULL, '$first_name', '$last_name', '$dob', '$updated')");
    $patient_id = mysql_insert_id(); /*echo '<strong>' . $patient_id . ' ' . $first_name . ' ' . $last_name . '</strong> has been added!';*/
}

$data = array('patient_id' = > $patient_id, 'patient_firstname' = > $first_name, 'patient_lastname' = > $last_name);
echo json_encode($data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:38:47.693

将您的代码从函数`complete`移至`success`函数。

```
$('#newpatient').click(function() {
    var patientadd = $('#patientaddform').serializeArray();
    $.ajax({
        url: 'patientadd.php',
        type: "POST",
        data: patientadd,
        dataType: 'json',
        success: function(data) {
            var html = '';
            var len = data.length;
            for (var i = 0; i < len; i++) {
                html += '<option value="' + data[i].patient_id + '">' + data[i].patient_firstname + ' ' + data[i].patient_lastname + '</option>';
            }
            $('#patientselect').append(html);
            $('#patientselect').selectmenu('refresh', true);
        },
        complete: function() {
            //$('#patientselect').selectmenu('refresh', true);
        }
    });
});​ 
```

Ajax 执行是异步的。该`success`方法只执行请求返回的那些。但是， one`success`被触发，`complete`. 这意味着您最终会陷入一种竞争条件，其中`complete`执行之前`success`完成执行。`Complete`不等待`success`完成。`success`并且`complete`几乎同时执行。

为确保您的刷新调用包含新数据，请在`success`以下`append`.

# facebook - 如何在我创建的页面或组上授予我的应用程序权限？

> ID：12521917
> 
> 赞同：13
> 
> 时间：2012-09-20T22:36:28.717
> 
> 标签：facebook, authentication, facebook-group

我有一个应用程序，我可以用它写到用户的墙上，在他们登录时请求了 publish_stream 权限。

我还创建了一个页面和一个组，并希望我的应用程序能够写入这些内容。（具体来说，我希望我的后端服务器定期发布一些更新，而不涉及用户。）执行此操作的能力似乎暗示了这里[https://developers的 /feed 部分的描述.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)和这里[https://developers.facebook.com/docs/reference/api/group/](https://developers.facebook.com/docs/reference/api/group/)。但是，我似乎找不到授权应用程序写入这些页面的方法。那些文档说如果你有 publish_streams 和 manage_pages 就可以做到。好的，但是我如何将这些授予我的应用程序？

在用户案例中，您在用户通过 OAuth 流程登录时请求这些权限。但是，页面和组从不登录，因此他们无法授予应用权限。我查看了组和页面的设置页面，找不到任何可以让我添加应用程序的内容。那么如何为应用程序授予发布到组和页面所需的权限呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:18:57.497

找到了！

[http://developers.facebook.com/docs/reference/api/application/](http://developers.facebook.com/docs/reference/api/application/) http://developers.facebook.com/docs/howtos/login/login-as-page/

“应用程序页面访问令牌

要作为应用程序页面而不是当前用户执行以下操作，您必须使用应用程序的页面访问令牌，而不是通常用于修改 Graph API 对象的用户访问令牌或应用程序访问令牌。可以通过向具有 manage_pages 权限的 /USER_ID/accounts 发出 HTTP GET 来检索此访问令牌。这将返回用户具有管理访问权限的页面列表（包括应用程序配置文件页面），以及每个页面的 access_token。

注意：配置为本机/桌面应用程序的应用程序将无法进行需要应用程序 access_token 的 API 调用。”

所以：

我去了[http://developers.facebook.com/tools/explorer/](http://developers.facebook.com/tools/explorer/)并像我一样创建了一个具有“manage_pages”权限的访问令牌。

然后我去了[https://graph.facebook.com/](https://graph.facebook.com/) $myname/accounts?access_token=$accesstoken

它给了我一个列表页面和我允许的应用程序。我从相关页面复制了 access_token，并将其粘贴到我的代码中，以便服务器端创建事件代码始终使用该访问令牌。

它奏效了！

# asp.net - 使用 ASP.NET 的 Facebook 应用程序

> ID：12521919
> 
> 赞同：0
> 
> 时间：2012-09-20T22:36:35.813
> 
> 标签：asp.net, facebook

我想使用 ASP.NET 开发一个 Facebook 应用程序（这是一个包含 3 个问题的简单测验），但这是我第一次尝试这样做。我在互联网上发现了很多令人困惑的信息，我想问一下最好和最正确的方法是什么（API 或其他东西），以及是否有一个简单的教程可以帮助我入门。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:50:17.843

The way I've previously done this is to create a standard ASP.NET MVC application and use the .NET API:

[http://facebooktoolkit.codeplex.com/](http://facebooktoolkit.codeplex.com/)

# sencha-touch - Sencha Touch：防止多个并发转换

> ID：12521921
> 
> 赞同：0
> 
> 时间：2012-09-20T22:36:40.910
> 
> 标签：sencha-touch

QA 刚刚提交了一个真正的错误，我正在摸索如何修复它。

如果同时按下两个按钮，例如返回和搜索，每个按钮都会调用`Ext.dispatch`，从而导致两个同时相反的转换！这完全是 !@#$s 布局，使应用程序无法使用。

这确实是支持触控的应用程序的普遍问题……多根手指悬停在屏幕上，用户可以轻松触发奇怪且完全不兼容的动作组合，并且应用程序一次只需要接受一个。Sencha Touch 有什么方法可以优雅地处理这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:03:58.087

我通过监听事件来修复它，`before-dispatch`如果已经有调度，则取消它。

```
Ext.regApplication(...
    this._isDispatching = false,

    launch: function() {
        Ext.Dispatcher.on('before-dispatch', function () {
            var me;
            if (this._isDispatching)
                return false;
            else {
                this._isDispatching = true;
                me = this;
                setTimeout(function () {
                    me._isDispatching = false;
                }, 500);
                return true;
            }
        }, this);
    } 
```

是的，500 毫秒的延迟绝对是 hacky，但我想不出一种更强大的方法来检测过渡何时完成。没有`after-dispatch`事件，并且`dispatch`事件在转换完成之前触发。

希望这可以帮助某人。

# php - $.getJSON 不能在 Mac OS 10.8 上运行？

> ID：12521923
> 
> 赞同：1
> 
> 时间：2012-09-20T22:37:02.023
> 
> 标签：php, jquery, osx-mountain-lion

这是我的代码，几个月前运行良好：

```
$.getJSON("php/loadSites.php", function(result){

            console.log("LOADING QUERY...");

            $.each(result.Sites, function(i,v){

                site_list_array.push('<li class="site" id='+v.Site.plant_code+'> <b> '+v.Site.plant_code + '</b> ' + v.Site.city +'</li>');  //build small array for the sidebar
            sites.push(v.Site); // build large array of all site data
        });

            $('#site_list').html(site_list_array.join('')); // dynamically update the webpage with the results of the query
        }); 
```

...今天出于某种原因，它只是无法执行？（它甚至不会在控制台日志中显示“加载查询”行。）它不会抛出任何错误消息......它似乎只是忽略了 $.getJSON 调用中的所有内容。

唯一改变的是我将服务器更新到 Mac OS 10.8。还有人经历过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:44:18.930

加载浏览器的开发工具（Chrome 和 Safari 中的 CMD+OPT+I，如果我记得的话，Firefox 中的 Firebug 为 F12）切换网络 [work] 选项卡并重新加载您的页面。检查是否正在请求 loadSites.php，以及它是否返回错误。

如果您的 PHP 脚本抛出错误，您的回调将不会被调用，这可能就是您所看到的。

# python - pytest 在类中以正确的顺序运行场景

> ID：12521924
> 
> 赞同：2
> 
> 时间：2012-09-20T22:37:06.220
> 
> 标签：python, pytest

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T07:45:28.193

即将推出的 pytest-2.3 支持更好的（基于资源的）排序，我刚刚更新了文档中的场景示例：[https ://docs.pytest.org/en/latest/example/parametrize.html#a-quick -port-of-testscenarios](https://docs.pytest.org/en/latest/example/parametrize.html#a-quick-port-of-testscenarios)

您可以使用以下命令初步安装当前的开发版本

```
pip install -i http://pypi.testrun.org -U pytest 
```

并且应该使用“py.test --version”获得 pytest-2.3.0.dev15 并能够使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T03:12:00.973

`py.test`以分布式方式运行测试，这意味着顺序基本上是随机的。

您应该使用该`-n`选项并将进程号设置为`1`. 然后测试应该由生成的单个进程按字母顺序运行。

不止这些，不知道你能不能做到。无论如何，取决于测试的顺序通常是*糟糕的*设计。所以你应该尽量不依赖它。

# objective-c - 如何使用 NSString 检测字符串是否在字符串中

> ID：12521927
> 
> 赞同：0
> 
> 时间：2012-09-20T22:37:23.537
> 
> 标签：objective-c, ios, nsstring

假设我有一个字符串“Test Super”

我将如何检测“超级”并让函数返回“是”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T22:41:24.047

像这样的东西：

```
return (([@"Test Super" rangeOfString:@"Super"]).location != NSNotFound); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T22:39:44.440

使用`rangeOfString:`并检查结果的位置是否等于`NSNotFound`.

```
[@"Test Super" rangeOfString:@"Super"].location != NSNotFound //YES
[@"Test Super" rangeOfString:@"Supper"].location != NSNotFound //NO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T22:41:37.027

一个快速的谷歌发现这个： http: [//objcolumnist.com/2009/04/12/does-a-nsstring-contain-a-substring/](http://objcolumnist.com/2009/04/12/does-a-nsstring-contain-a-substring/)

NSRange 文本范围；textRange =[字符串 rangeOfString:substring];

```
if(textRange.location != NSNotFound)
{

//Does contain the substring
} 
```

# html - HTML+CSS 文本容器设计

> ID：12521929
> 
> 赞同：0
> 
> 时间：2012-09-20T22:37:54.567
> 
> 标签：html, css, textbox, webkit

所以这里有我想要模拟的容器的网站：[容器](http://www.class.pm/files/jquery/uscrollbar/demo/)

这是专门的文本框： ![网站容器](../Images/691d86ae8b18d05643ccb1318c31a063.png)

这是我的样子： ![我的容器](../Images/80131cd7f644da931d3ad661571dbe71.png)

他们提供了他们的 css 文件，我查看了他们的 html 源代码。我得到了与演示文本和样式有关的 html 和 css 部分。[这是小提琴](http://jsfiddle.net/XJqvG/)中的所有代码

我对网络编程很陌生，才几周。演示文本的 css 看起来令人生畏。我正在尝试弄清楚我的与众不同之处。谁能告诉我我需要做什么来修复我的容器看起来像他们的？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:49:58.040

这是一个固定版本：http: [//jsfiddle.net/dain/XJqvG/6/](http://jsfiddle.net/dain/XJqvG/6/)

主要问题是：

*   您尚未包含所需的 JavaScript 和 CSS 文件，此自定义滚动条需要文章顶部所述的库
*   您必须在示例元素上设置固定高度

出于某种原因，它仍然不想使用触摸板滚动，但这可能只是 JSFiddle 的问题。

# html - 如何使css图像溢出其所在的div

> ID：12521930
> 
> 赞同：4
> 
> 时间：2012-09-20T22:38:07.500
> 
> 标签：html, css

我在css中输入了一张图片，代码如下：

```
.imgtemp { 
          float:right; 
          top:0px; 
          left:0px; 
          overflow:visible; 
          width:100%;
        } 
```

我还在页面中添加了 div 标签以便显示，但由于设计原因，图像比 div 更宽。我怎样才能让它溢出它的 div 以使其正确。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T22:48:36.297

As Nelson said, overflow: hidden on your image won't help you. If you absolutely must have the container be smaller than the image inside it, you can use positioning (relative on the parent div, absolute on the image with a top and left of 0, for example) to ignore its parent's size. You'll want to use something other than % on the image, too, because the % will read off its parents size, which is counter-productive.

Or, did you mean you want the parent div to cut off the extra image?

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T22:44:23.953

您应该放置`overflow:visible`在您的 div 上，而不是图像上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-10T09:42:11.860

```
.contact__section{ //  your container
    width: 100%;
    display: block;
    overflow: hidden; // hide in case your XL image is too high to keep other sections of page neat
}
.contact__flexbox{
    position: relative; // you may not need it
    display: block; // for mobile size, or none; if not want to display on mobile
    width: 1100px; // our container width
    max-width: 100%; // for mobile
    margin: 0 auto; // center it on page
    @include tablet{ // My personal media query, replace with yours for tablet + size
        display: flex;
        align-items: center;
        justify-content:space-evenly;
    }
}
.contact__image-xl{
    position: relative; // important
    display: flex;
    flex:1; // make de 2 columns same size for a split in the middle of screen
    // No need: overflow: visible;
    img{
        // VERY IMPORTANT:
        max-width: 1000%!important;

        position: absolute;
        right: 0; // if your image is on left, otherwise: left:0;
        width: 1200px; // your image at the size you want it to display
    }
} 
```

# objective-c - xcode 框架和 API？

> ID：12521932
> 
> 赞同：0
> 
> 时间：2012-09-20T22:38:11.143
> 
> 标签：objective-c, xcode, ios4

我是 iphone 开发的新手，但我的问题是，例如，

辞职第一响应者

你们在哪里找到的？这被认为是 xcode 框架/API 中的内置函数吗？我在哪里可以找到那些内置的或 API 用于我的学习项目，看看我需要哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:07:00.913

如果您在 Xcode 中打开了一个项目，并且您看到这样的调用，您通常可以：

cmd 单击该方法调用以显示声明。

选择单击方法调用以查看文档（如果有）。

但是，如果您是 iPhone 开发的新手，那么这是您应该开始的最后一个地方。您应该从概述、概念指南等开始，然后逐步了解需要了解的各个方法。

具体来说，[从这里开始](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/Introduction/Introduction.html)。

# mysql - Mysql Join 3个表

> ID：12521933
> 
> 赞同：0
> 
> 时间：2012-09-20T22:38:13.533
> 
> 标签：mysql, join

***我检查了以前的帖子，但没有一个解决我的问题，任何帮助将不胜感激***

MYSQL 查询 3 个表（用户、匹配、面试）

想要返回指定 Match 的用户名和采访号（如果有采访号）。

但我不想将结果仅限于接受采访的用户。我尝试了 JOIN，但无法让它为 3 个表工作。

这是我到目前为止在 PHP 中的内容：

```
$query = "SELECT CONCAT(u.first_name,' ',u.last_name,'----',COALESCE(i.v_code,'')) as name, u.id as id
FROM #__users as u

 JOIN #__bl_match as m ON ( (u.team_id = m.team1_id) OR 
     (u.team_id = m.team2_id) OR 
     (u.team_id = m.team3_id AND m.team3_id != 0) OR 
     (u.team_id = m.team4_id AND m.team4_id != 0) OR 
     (u.team_id = m.team5_id AND m.team5_id != 0) OR 
     (u.team_id = m.team6_id AND m.team6_id != 0) OR
     (u.team_id = m.team7_id AND m.team7_id != 0) OR
     (u.team_id = m.team8_id AND m.team8_id != 0) OR 
     (u.team_id = m.team9_id AND m.team9_id != 0) OR
     (u.team_id = m.team10_id AND m.team10_id != 0)) 
   AND m.id = ".$t_id."AND m.id != 0 

JOIN #__bl_interview as i ON i.u_id = u.id";

        $db->setQuery($query);
    $parti12 = $db->loadObjectList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T23:17:56.480

如果您想要没有采访的用户，您需要对采访表使用 LEFT JOIN，但这意味着该用户的采访编号将为 NULL。

由于您将数字与 SELECT 列表中的用户名连接起来，因此当他们没有接受采访时，这会导致用户名返回为 NULL（因为将字符串与 NULL 值连接 - 或执行几乎任何其他操作在 NULL 值上 - 产生 NULL 结果）。

为避免这种情况，您必须处理`i.v_code`为 NULL 时的情况。在 MySQL 中执行此操作的典型方法是使用[COALESCE 函数](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)：

```
SELECT CONCAT(u.first_name, ' ', u.last_name, '----', COALESCE(i.v_code,'')) as name, 
       u.id as id
FROM #__users as u
JOIN #__bl_match as m ON ( (u.team_id = m.team1_id) OR 
     (u.team_id = m.team2_id) OR 
     (u.team_id = m.team3_id AND m.team3_id != 0) OR 
     (u.team_id = m.team4_id AND m.team4_id != 0) OR 
     (u.team_id = m.team5_id AND m.team5_id != 0) OR 
     (u.team_id = m.team6_id AND m.team6_id != 0) OR
     (u.team_id = m.team7_id AND m.team7_id != 0) OR
     (u.team_id = m.team8_id AND m.team8_id != 0) OR 
     (u.team_id = m.team9_id AND m.team9_id != 0) OR
     (u.team_id = m.team10_id AND m.team10_id != 0)) 
   AND m.id = ".$t_id."AND m.id != 0 
LEFT JOIN #__bl_interview as i ON i.u_id = u.id" 
```

现在，鉴于您应用到名称的格式，您可能会`----`在名称后留下无关紧要的内容，没有后续的采访代码。如果您想避免这种情况，我们可以使用[IF](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)而不是 COALESCE 来使我们的输出更智能，如下所示：

```
SELECT CONCAT(u.first_name, ' ', u.last_name, IF(i.v_code, '---- ' + i.v_code, '')) as name 
```

请注意这是在做什么：如果`i.v_code`不是 NULL，则 IF 中的第一个表达式的计算结果为 true，因此返回*第二个*表达式。否则，返回第三个表达式（空字符串） - 因此当`i.v_code`为 NULL 时，您只输出用户名。

# java - 在 Jersey 中获取具有相似前缀的查询参数

> ID：12521936
> 
> 赞同：0
> 
> 时间：2012-09-20T22:38:43.030
> 
> 标签：java, jersey

> **可能重复：**
> [@QueryParam 正则表达式](https://stackoverflow.com/questions/7672385/queryparam-regex-expression)

我可以处理同一查询参数有多个副本的传入请求：

```
// http://localhost:8080/myService?data=1&data=2 
@GET 
public String get(@QueryParam("data") List<String> data) 
```

我希望能够对具有相似前缀的数据进行分组。例如

```
// http://localhost:8080/myService?dataOne=1&dataTwo=2 
@GET 
public String get(@QueryParam("data*") List<String> data) 
```

有没有办法在泽西岛做这样的事情？现在我能看到的唯一方法是使用 UriInfo 以编程方式解析查询参数。

# f# - 无点函数能够内联吗？

> ID：12521937
> 
> 赞同：6
> 
> 时间：2012-09-20T22:38:45.813
> 
> 标签：f#, inline, currying, pointfree

```
let inline myfunction x y = ...

let inline mycurried = myfunction x // error, only functions may be marked inline 
```

`inline`显式地柯里化函数似乎是不可能的。所以无论何时调用，即使正确`mycurried`也不会得到，对吗？`inlined``myfunction``inlined`

那么这可以看作是柯里化函数的缺点之一吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T09:58:26.683

我认为您的问题是是否可以内联[无点函数。](http://en.wikipedia.org/wiki/Tacit_programming)

您发现的限制不是因为柯里化函数。请注意，在您的示例中，柯里化函数在右侧，在左侧，您有一个无点函数。

F# 只允许内联函数，而不是常量。

我原则上你可能认为这可以被认为是一个错误，因为类型推断足够聪明，可以发现这是一个（无点）函数，但请阅读 Tomas 关于副作用的注释。

显然，当编译器在左侧仅找到一个标识符时，它会因以下错误而失败：

```
let inline myfunction x y = x + y

let inline mycurried  = myfunction 1

--> Only functions may be marked 'inline' 
```

正如布赖恩所说，一种解决方法是在双方都添加一个显式参数：

```
let inline mycurried x  = (myfunction 1) x 
```

但是您的功能不再是无点的，它与以下内容相同：

```
let inline mycurried x  = myfunction 1 x 
```

另一种方法可能是添加显式泛型参数：

```
let inline mycurried<'a>  = myfunction 1 
```

当泛型参数显式出现在左侧时，它会编译。

我希望他们删除错误消息并将其变为警告，例如：

```
Since only functions can be 'inline' this value will be compiled as a function. 
```

**更新**

感谢 Tomas 的回答（以及您的反对票）。

我个人的观点是这应该是一个警告，所以你知道你的代码的语义最终会改变，但是接下来要由你来决定做什么。

您说内联*“只是一种优化”*，但这并不完全正确：

. 简单地将所有函数内联并不能保证最佳代码。

. 您可能想要使用静态约束，然后必须使用内联。

我希望能够定义我的（某种）泛型常量，就像 F# 库已经做的那样（即：GenericZero 和 GenericOne）。我知道我的代码是纯粹的，所以我不在乎它是否每次都执行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T22:43:41.843

我认为您只需要在双方都添加一个显式参数（尽管我没有尝试过）：

```
let inline myfunction x y = ... 

let inline mycurried y = myfunction 42 y  // or whatever value (42) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T10:34:14.240

编译器只允许`inline`定义函数的 on let 绑定。[这与 F# 值限制](http://blogs.msdn.com/b/mulambda/archive/2010/05/01/value-restriction-in-f.aspx)所发生的情况基本相同（另请参见[此处](https://stackoverflow.com/questions/1131456/understanding-f-value-restriction-errors)）。正如布赖恩所说，您可以通过向函数添加参数来轻松解决此问题。

为什么会有这个限制？如果它不存在，那么添加`inline`会改变程序的含义，那会很糟糕！

例如，假设您有一个这样的函数（它创建可变状态并返回一个计数器函数）：

```
let createCounter n = 
  let state = ref n
  (fun () -> incr state; !state) 
```

现在，下面的代码：

```
let counter = createCounter 0 
```

...创建一个可以多次使用的全局函数（调用`counter()`），它将为您提供从 1 开始的唯一整数。如果您可以将其标记为`inline`：

```
let inline counter = createCounter 0 
```

...然后每次使用`counter()`时，编译器都应将其替换为`createCounter 0 ()`，因此每次调用计数器时都会得到 1！

# hadoop - 使用 piggybank 和 AvroStorage 解决 EMR 问题

> ID：12521942
> 
> 赞同：1
> 
> 时间：2012-09-20T22:39:17.327
> 
> 标签：hadoop, apache-pig, elastic-map-reduce, amazon-emr, avro

我在 EMR 上运行一个猪脚本，它读取以 Avro 格式存储的数据。它一直在本地运行，但为了让脚本的其他部分在 EMR 上运行，我不得不将我使用的 piggybank.jar 恢复为 0.9.2 而不是 0.10.0。进行该更改后，AvroStorage 静默读取任何数据失败，仅返回零记录。日志中没有提到任何内容。这是脚本：

```
REGISTER ../../../lib/avro-1.7.0.jar                                                                    
REGISTER ../../../lib/json-simple-1.1.1.jar                                                             
REGISTER ../../../lib/jackson-core-asl-1.5.2.jar                                                        
REGISTER ../../../lib/jackson-mapper-asl-1.5.2.jar                                                      
REGISTER ../../../lib/piggybank.jar                                                                     
a = LOAD '/data/' USING org.apache.pig.piggybank.storage.avro.AvroStorage();
DUMP a; 
```

同样，如果 piggybank.jar 是 0.10.0 版，它可以工作。如果是 0.9.2 版，则不是。我应该使用任何其他库的不同版本吗？我尝试使用 avro-1.5.3.jar，但也没有用。

另一个注意事项：如果我`describe a;`正确地输出模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:52:08.413

Not sure if this is still an issue for you, but a set of registers I use is:

```
REGISTER s3://..path../lib/piggybank-0.10.0.jar;
REGISTER file:/home/hadoop/lib/pig/piggybank.jar;
REGISTER s3://..path../lib/avro-1.7.1.jar;
REGISTER s3://..path../lib/jackson-core-2.0.6.jar;
REGISTER s3://..path../lib/jackson-mapper-lgpl-1.9.9.jar;
REGISTER s3://..path../lib/json-simple-1.1.1.jar;
REGISTER s3://..path../lib/joda-time-2.1.jar;
REGISTER s3://..path../lib/snappy-java-1.0.4.1.jar

```

You can stack both piggybanks on top of each other. There's some weirdness with how the piggybank-0.10.0 jar plays with the piggybank jar - it seems to be order-sensitive, but hopefully this helps, or at least gives you something else to try.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:27:04.497

您可能已经考虑过这一点 - 但如果您将猪脚本中依赖于 0.9.2 的部分更改为在 0.1.0 上工作，可能会更快。

# python - Django - 同一张表上的两个不同的连接语句

> ID：12521947
> 
> 赞同：2
> 
> 时间：2012-09-20T22:39:53.920
> 
> 标签：python, django

在作为模型的 Django 项目中，我有类似的东西：

```
class Company(models.Model):
    name = models.CharField(_(u"Name"), max_length=100)

INPUT_TYPES = (('U', _(u"User")), ('A', _(u"Administrator")))
class CompanyData(models.Model):
    company = models.ForeignKey(Company, related_name='data')
    input_type = models.CharField(_(u"Input type"), max_length=2,
                                  choices=INPUT_TYPES)
    active = models.BooleanField(_(u"Active"))
    datafield_1 = models.CharField(_(u"Data field 1"), max_length=100)
    datafield_2 = models.CharField(_(u"Data field 2"), max_length=100)
    datafield_3 = models.CharField(_(u"Data field 3"), max_length=100) 
```

公司数据可以作为用户或管理员输入。

可以对公司进行搜索。可以在不处理输入类型的情况下进行搜索，但我想排除非活动公司（无论它是由用户还是管理员设置为非活动）。我试过这样的查询：

```
Company.objects.filter(data__data_1='query string'
                       ).exclude(Q(data__active=False)) 
```

但是，如果其中一个数据输入处于活动状态并且与查询字符串匹配，即使其他数据输入处于非活动状态，它也会返回公司。我试图通过强制输入类型来复杂化请求，但我发现没有办法强制 Django 在 CompanyData 表上创建两个不同的连接语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T23:15:31.287

恭喜，你发现了 Django 的 ORM 的弱点之一。不可能使用对象语法执行这种查询；您需要借助[原始查询](https://docs.djangoproject.com/en/dev/topics/db/sql/)来完成此操作。

# c# - 无法从自定义 RoleProvider 调用方法

> ID：12521956
> 
> 赞同：1
> 
> 时间：2012-09-20T22:40:25.547
> 
> 标签：c#, .net, roleprovider

我为 C# .NET 4.0 创建了一个自定义 RoleProvider。我已经实现了所有必需的方法，并且还添加了一些我自己的方法。我已更改 Web.config 以使用我的自定义 RoleProvider，但我无法调用我的任何自定义方法。例如，我在自定义 RoleProvider 中添加了以下方法：

```
public void Myfunc(string user)
{
  var a = user;
} 
```

但是，当我尝试使用此片段调用该方法时：

```
Roles.MyFunc("testuser"); 
```

我没有得到 Myfunc 函数的智能感知，并且 VS 给了我错误“System.Web.Security.RoleProvider 的未知方法 Myfunc。我可以告诉我我的自定义 RoleProvider 正在加载，因为我可以在所需/重写的方法，它命中了自定义的 RoleProvider。但是我怎样才能调用 RoleProvider 的自定义函数呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:48:11.770

`MyFunc` is not a member of `RoleProvider`.

Are you trying to create an Extension Method?
Then your method should look like this:

```
public static void Myfunc(this System.Web.Security.RoleProvider roleProvider, string user)
{
  var a = user;
} 
```

If `Roles` is your own class and you've implemented `MyFunc` then you need to show us more code. But from the looks of it `Roles` is an instance of `RoleProvider` or if it is your class itself then you need to make the `MyFunc` method static or create an instance of `Roles`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T16:50:50.297

听起来您的自定义角色提供程序设置正确。从那里您需要做的就是将 System.Web.Security.Roles.Provider 转换为您的自定义类并调用自定义方法。

它看起来像这样：

((MyProject.Helpers.CustomRoleProvider)System.Web.Security.Roles.Provider).MyFunc("testuser");

# google-chrome - Chrome 不执行 cgi 脚本

> ID：12521963
> 
> 赞同：0
> 
> 时间：2012-09-20T22:41:27.653
> 
> 标签：google-chrome, refresh, cgi-bin, awstats

关于 chrome 并让它执行 cgi(pl) 脚本是否有任何细节或特性。

我已将 awstats 添加到我的 apache2 服务器，它在 Firefox 和 IE 中运行良好。但是，当我在 chrome 中查看它时，它几乎就像在缓存请求一样。

无论我单击刷新多少次，它都只会显示旧数据。我已经在新选项卡中尝试过，但似乎无法让它触发脚本。

有什么建议么？

```
<Location "/awstats">
    AuthName "Private Site"
            AuthType basic
            AuthUserFile /etc/apache2/htusers
            Require valid-user
            Order deny,allow
            Deny from all
            Allow from 192.168.0.0/24
    Options +ExecCGI
</Location> 
```

对于熟悉awstats的人来说，我可以选择不同的月份，而且好像执行一次。但在那之后，那个月被缓存到并且不会重新触发。看起来它确实在缓存，实际上不会刷新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:16:10.320

看了之后（感谢plokuc）

[https://superuser.com/questions/89809/how-to-force-refresh-without-cache-in-google-chrome](https://superuser.com/questions/89809/how-to-force-refresh-without-cache-in-google-chrome)

Chrome 的刷新机制似乎存在某种错误。目前唯一的解决方案似乎是手动清除缓存并重新加载页面，或者以隐身模式运行。

错误报告： [http ://code.google.com/p/chromium/issues/detail?id=44122](http://code.google.com/p/chromium/issues/detail?id=44122)

# php - php strtotime 谜题 - 夏令时？

> ID：12521973
> 
> 赞同：2
> 
> 时间：2012-09-20T22:42:12.797
> 
> 标签：php, time, strtotime, dst

## PHP代码

```
$t = strtotime( '2012-09-21T03:00:00+00:00 America/Chicago' );
$t2 =  date('c',$t);
echo $t2; 
```

* * *

## 输出

```
 2012-09-20T23:00:00-04:00 
```

* * *

## 问题

芝加哥的时区是 UTC-5，为什么我没有得到`2012-09-20T22:00:00-05:00`结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T23:02:27.723

`strtotime`转换为 Unix 时间戳。`date`将使用当前时区将时间戳转换为字符串。首先尝试设置您的时区。

```
$t = strtotime( '2012-09-21T03:00:00+00:00 America/Chicago' );
date_default_timezone_set('America/Chicago');
$t2 =  date('c',$t);
echo $t2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T23:02:27.507

这并没有真正回答我的问题，但我做了以下修复它：

```
date_default_timezone_set('America/Chicago');
$t = strtotime( '2012-09-21T03:00:00+00:00' );
$t2 =  date('c',$t);
echo $t2; 
```

输出：`2012-09-20T22:00:00-05:00`

# php - 在 twitter api 中获取经过身份验证的用户的国家信息

> ID：12521974
> 
> 赞同：1
> 
> 时间：2012-09-20T22:42:16.540
> 
> 标签：php, json, twitter, twitter-oauth

我正在使用亚伯拉罕图书馆...

我正在尝试提取有关用户的信息并显示它..

我正在尝试获取经过身份验证的用户的国家/地区信息..

我试过**account/settings**，**users/show**和**account/verify_credentials**

但他们都没有给我用户的国家信息..

# android - 为什么 ViewFilpper 不翻转 webviews？

> ID：12521980
> 
> 赞同：0
> 
> 时间：2012-09-20T22:42:31.257
> 
> 标签：android, layout, webview, parent-child, viewflipper

我是 android 的菜鸟，我正在尝试在视图翻转器中切换 4 个视图。我的第一个视图是列表视图，它可以毫无问题地翻转。但是，我的 webview 都没有翻转。viewflipper 可以与其他子视图一起正常工作，例如按钮和图像视图，但不是 web 视图。非常感谢任何解决此问题的帮助。

```
 <?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tab2"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#FFFFFF"
android:orientation="vertical" >

<ViewFlipper
    android:id="@+id/viewFlipper1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@+id/ListViewId"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="#00000000" >
    </ListView>

    <WebView
        android:id="@+id/webViewnews"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </WebView>

    <WebView
        android:id="@+id/webViewcoinshows"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </WebView>

    <WebView
        android:id="@+id/webViewyoutube"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </WebView>
</ViewFlipper> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:46:28.410

而不是使用`ViewFlipper`你为什么不使用`ViewPager`：`android.support.v4.view.ViewPager`它很容易实现它并且在翻转时给你更好的效果，并且肯定会起作用，我以前做过。[您可以在此处](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)找到文档。

# python - 编辑 bash_profile for Mac 尝试安装 OpenCV 后 PythonPath 不正确

> ID：12521982
> 
> 赞同：3
> 
> 时间：2012-09-20T22:42:39.157
> 
> 标签：python, macos, opencv, homebrew, pythonpath

这里的总菜鸟试图通过 Homebrew 让 OpenCV 在 Python 上工作。我到处搜索，找不到我能理解的答案。我为此安装所做的 99% 都是盲目地关注论坛帖子，尽管我开始了解这一切意味着什么。
**安装的软件：**

OS 10.7.4
Xcode 4.4.1
- 命令行工具
HomeBrew
-Python
-GFortran
-OpenCV

**1\. 写在 .bash_profile 的第一行并保存并重新启动 Mac**
export PYTHONPATH="/usr/local/lib/python2.7/site-packages:$PYTHONPATH"

**2\. 打开位于 /usr/local/Cellar/python/2.7.3 的 IDLE**
.>>> import cv

Traceback（最近一次调用最后）：
文件“”，第 1 行，在
import cv
文件“/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site -packages/cv.py”，第 1 行，在
ImportError 中：没有名为 cv2.cv 的模块

**3.去终端检查PATH和PYTHONPATH**
myname-MacBook-Pro:~ myname$ set
.#edited out不必要的行PATH=/opt/local/bin:/opt/local/sbin:/opt/local/bin:/ opt/local/sbin:/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/opt /local/bin:/opt/local/sbin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin: /usr/X11/bin PYTHONPATH=/usr/local/lib/python2.7/site-packages：

**1）我的 PATH 需要是什么？由于反复尝试，我知道它可笑地不正常。
2) 为什么 IDLE 不使用这个 PYTHONPATH？**
***3\. 最重要的是，我需要做些什么才能在我的 Dock 上获得一个我可以点击的图标，它会打开一个程序，我可以在其中使用 华丽的 OPENCV 编写精彩的 Python 代码。***

非常感谢您提供的任何帮助。在过去的 3 天里，我一直在尝试解决这个问题，并且非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T21:24:38.563

因此，IDLE 是一个常规应用程序，而不是您从 bash 运行的命令行程序，因此它不会读取您的 .bash_profile 或 PYTHONPATH 等环境变量。

好消息是，有一种方法可以让 IDLE 识别可能位于不寻常位置的新 python 模块，只需从 IDLE 期望它们所在的位置（即 site-packages 目录）引用它们。令人困惑的部分是您可能安装了多个版本的 Python，因为默认情况下在 Mac OSX 中安装了 Python，并且您还使用 homebrew 安装了它（看起来您也尝试过 macports）。

根据错误中的路径，我们知道 IDLE 正在 /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages 中寻找模块/ 这是自制软件安装。

看起来你以某种方式在那里有 cv 模块或链接在 site-packages 目录中，但你缺少一些其他必要的文件。

我自己没有安装 OpenCV，但从这里的说明：http: [//jjyap.wordpress.com/2014/05/24/installing-opencv-2-4-9-on-mac-osx-with-python-support /](http://jjyap.wordpress.com/2014/05/24/installing-opencv-2-4-9-on-mac-osx-with-python-support/)看起来您还需要将 opencv cv2.so 文件从通过自制软件获得的 opencv 文件符号链接到您的站点包目录中。（请注意，您的站点包目录的路径与链接中的说明不同）。

# javascript - JS验证是否选择了下拉值

> ID：12521983
> 
> 赞同：1
> 
> 时间：2012-09-20T22:42:43.420
> 
> 标签：javascript, drop-down-menu

我正在尝试在我的 JS 中编写一个验证块，以检查用户是否选择了一个值，如果未选择该值，则会弹出一条消息。

```
function validate(form) {
    var success = true;
    var message = "";

    if (form.dropdown.selectedIndex ==  0 )  {  
        form.save.disabled=true;

        if (0 < message.length) {
            message += "\n"; 
        }
        message += "dropdown  value should be selected.";
    }

    if (0 < message.length) {
        alert(message);
        success = false;
    }

    return success;
} 
```

当我点击保存按钮时，我调用了这个函数。我没有在日志中看到错误。谁能告诉我我在这里做错了什么？或者你能指导我在允许保存之前验证用户是否选择了一个值的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:57:29.230

如果未选择任何选项，则选择元素的[selectedIndex](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-85676760)将为`-1`。建议始终将一个选项设置为*selected*，这样您就知道默认选择的选项是什么（如果您不这样做，用户代理可能会默认选择第一个选项）。

所以测试：

```
if (form.dropdown.selectedIndex ==  0 )  { 
```

仅当第一个选项具有 selected 属性时才为真。所以要么测试 -1 要么默认选择第一个选项，例如

```
<select name="dropdown" ...>
  <option selected value="default">Please select an option
  ...
</select> 
```

# jquery - JQuery 自动完成输入事件

> ID：12521984
> 
> 赞同：0
> 
> 时间：2012-09-20T22:42:52.353
> 
> 标签：jquery, html

在我的搜索网页上，我有一个简单的 JQuery 脚本，如果输入框中有文本，它会启用提交按钮。

我正在使用该`keyup`事件来检测输入，但是我不确定如何处理用户可能单击输入字段并向下滚动到先前搜索过的查询的事件。

没有按键事件能够检测到这个动作，我该怎么办？

**jQuery代码**

```
/* if search box has text then enable submit button otherwise disable it */
$(".searchContainer input[name=query]").keyup(function(){
    if($(".searchContainer input[name=query]").val().length > 0){
        $(".searchContainer input[type=submit]").attr("disabled", false);
    }
    else{
        $(".searchContainer input[type=submit]").attr("disabled", true);
    }
}); 
```

**HTML 标记**

```
<form method="post" action="/results.php">
   <input type="text" name="query" />
   <input type="submit" value="Search" disabled="disabled" />
</form> 
```

**编辑**

![在此处输入图像描述](../Images/d82cafb968d48ed6abbe347b4090e489.png)

我基本上想处理自动完成事件，我对禁用该功能不感兴趣，我想知道如何检测是否选择了自动完成选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:47:39.413

Try setting `autocomplete="off"` in your input field, like so:

```
<form method="post" action="/results.php">
   <input type="text" autocomplete="off" name="query" />
   <input type="submit" value="Search" disabled="disabled" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T22:52:24.957

您还可以使用 change() jQuery 事件而不是 keyup，它会在输入的任何更改时触发，而不仅仅是键入：

```
$(".searchContainer input[name=query]").change(function(){
   if($(".searchContainer input[name=query]").val().length > 0){
       $(".searchContainer input[type=submit]").attr("disabled", false);
   }
   else{
       $(".searchContainer input[type=submit]").attr("disabled", true);
   } 
```

});

见： [http ://api.jquery.com/change/](http://api.jquery.com/change/)

**编辑：** 由于 change() 事件似乎没有为你做，你可以尝试一种完全不同的方法：

```
$(".searchContainer input[type=submit]").click(function(){
    if ( $(".searchContainer input[name=query]").val().length == 0 ) {
        return false;
    }
}); 
```

# ruby-on-rails - config.assets.debug 是如何导致我的 Rails 应用程序崩溃的？

> ID：12521993
> 
> 赞同：3
> 
> 时间：2012-09-20T22:43:49.057
> 
> 标签：ruby-on-rails, arbor.js

我在 Rails 3.2.8 应用程序中包含了[arbor-rails](https://github.com/mockdeep/arbor-rails) gem，它在开发模式下运行良好，但在生产中出现以下错误：

```
Started GET "/nullarbor.js" for 127.0.0.1 at 2012-09-20 15:35:23 -0700

ActionController::RoutingError (No route matches [GET] "/nullarbor.js"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  thin (1.4.1) lib/thin/connection.rb:80:in `block in pre_process'
  thin (1.4.1) lib/thin/connection.rb:78:in `catch'
  thin (1.4.1) lib/thin/connection.rb:78:in `pre_process'
  thin (1.4.1) lib/thin/connection.rb:53:in `process'
  thin (1.4.1) lib/thin/connection.rb:38:in `receive_data'
  eventmachine (1.0.0) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.0) lib/eventmachine.rb:187:in `run'
  thin (1.4.1) lib/thin/backends/base.rb:63:in `start'
  thin (1.4.1) lib/thin/server.rb:159:in `start'
  rack (1.4.1) lib/rack/handler/thin.rb:13:in `run'
  rack (1.4.1) lib/rack/server.rb:265:in `start'
  railties (3.2.8) lib/rails/commands/server.rb:70:in `start'
  railties (3.2.8) lib/rails/commands.rb:55:in `block in <top (required)>'
  railties (3.2.8) lib/rails/commands.rb:50:in `tap'
  railties (3.2.8) lib/rails/commands.rb:50:in `<top (required)>'
  script/rails:6:in `require'
  script/rails:6:in `<main>' 
```

我已经完成了设置`environments/`并发现当我设置以下内容时`development.rb`：

```
config.assets.debug = false 
```

我在开发模式下也遇到错误。当我将其设置为`true`生产时，它可以正常工作。这可能是什么原因造成的？

**更新：** 这似乎实际上与[arbor.js](https://github.com/samizdatco/arbor/blob/master/src/etc.js)`arbor_path`中的函数有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:44:29.590

arbor.js 使用[Web Worker](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)，这意味着您需要为 Worker 创建提供指向 arbor.js 脚本所在位置的适当链接。

解决此问题的方法是提供 arbor.js 文件的绝对路径，而不是让代码使用 arbor_path 函数，因为缓存逻辑或提供 js 文件的方式可能会搞砸。

换句话说，尝试替换

```
i=new Worker(arbor_path()+"arbor.js"); 
```

和

```
i=new Worker("/final/path/to/arbor.js"); 
```

在 arbor.js 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T00:34:46.723

正如@Asimov4 所说，问题是在以下调用中产生的：

```
new Worker(arbor_path()+"arbor.js"); 
```

尽管如此，与资产预编译兼容的更优雅的解决方案是将其更改为：

```
new Worker("<%= asset_path('arbor.js') %>"); 
```

**注意：**记得将 .js 文件更改为 .js.erb！

# jquery - jQuery：ajax保存后重新绑定编辑器

> ID：12521994
> 
> 赞同：1
> 
> 时间：2012-09-20T22:43:54.250
> 
> 标签：jquery, ajax

我正在为我的一个项目使用 Redactor 文本编辑器插件。我正在使用模糊事件，因此当我退出文本字段时，它将保存文本，如下所示：

```
$(".redactor_editor").blur(function(){...}); 
```

但是通过ajax保存并用更新的内容替换内容后：

```
 ... $('.content').replaceWith(data); ... 
```

所有编辑器文本字段都不起作用。

重新加载内容后如何重新绑定编辑器文本字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:53:29.323

替换内容后，尝试解除绑定并再次绑定事件..

```
$('.content').replaceWith(data);
$(".redactor_editor").unbind().blur(function(){...}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:55:23.050

您不必重新绑定事件，您可以`.content`使用以下方法将绑定委托给父级[`.on()`](http://api.jquery.com/on/)：

```
$('.content').on('blur', '.redactor_editor', function(){...}); 
```

# ruby-on-rails - 我应该如何根据令牌登录用户？

> ID：12521995
> 
> 赞同：0
> 
> 时间：2012-09-20T22:44:00.403
> 
> 标签：ruby-on-rails, facebook, devise, omniauth

我有用户（一个模型），每个用户都具有对一个 oauth 系统或另一个（例如 facebook）的授权（一个相关模型）。

我希望用户能够使用查询字符串中传递的信息（电子邮件和令牌哈希）登录。我怎样才能做到这一点？我正在使用设计和omniauth。

例如：

[http://site.com/login?email=asdfdsafas&token_hash=43879237498237492347](http://site.com/login?email=asdfdsafas&token_hash=43879237498237492347)

而不是传递用户名和密码或身份验证令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:41:50.040

看看这个 Railscasts 插曲

[http://railscasts.com/episodes/274-remember-me-reset-password](http://railscasts.com/episodes/274-remember-me-reset-password)

您可以使用此功能，只需进行一点操作，即可创建一种安全的方式来完成您正在尝试做的事情。