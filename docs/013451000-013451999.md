# StackOverflow 问答 13451000-13451999

# liferay-6 - 如何以编程方式在liferay页面中添加元标记名称=“标题”？

> ID：13451000
> 
> 赞同：2
> 
> 时间：2012-11-19T09:35:07.567
> 
> 标签：liferay-6

我正在使用liferay 6.0。

我想以编程方式在 liferay 页面中添加标题元标记（SEO 标记）。liferay 具有添加描述和关键字元标记的 API，但它们没有任何用于标题元标记的 API。参考： http: [//www.devatwork.nl/2010/03/seo-optimize-a-liferay-portlet-title-description-keywords/](http://www.devatwork.nl/2010/03/seo-optimize-a-liferay-portlet-title-description-keywords/)

有没有办法通过 API 添加自定义 SEO 元标记？

谢谢，帕万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T21:58:32.537

您可以创建支持此功能的自定义主题。使用[主题设置](http://www.liferay.com/web/raymond.auge/blog/-/blogs/theme-settings-and-new-advanced-controls)来配置值。然后在 portal_normal.vm 中使用您的主题设置值添加元标记的呈现。

或者，您可以为 html\common\themes\top_meta.jspf 创建一个挂钩来呈现该值。该值本身可以放在主题设置中（尽管这仍然需要使用自定义主题），或者例如放在 portal-ext.properties 中（如果您更喜欢使用全局值）。或者，您可以根据需要使用每页或每个站点的自定义字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T07:53:23.840

您可以通过将标记头元素作为属性添加到 PortletResponse 来实现。

这是一个例子：

```
Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();

Element element = doc.createElement( "meta");

element.setAttribute( "name", "title" );
element.setAttribute( "content", "Your title" );

portletResponse.addProperty( MimeResponse.MARKUP_HEAD_ELEMENT, element ); 
```

# java - 在 JavaEditor 中跟踪跟随链接事件

> ID：13451001
> 
> 赞同：1
> 
> 时间：2012-11-19T09:35:13.880
> 
> 标签：java, eclipse-plugin, eclipse-rcp

在 Eclipse 插件中，我想跟踪 JavaEditor 的跟随链接事件，即我希望我的插件在开发人员按下控件并单击 java 元素时得到通知。

我已经获得了窗口打开事件，因此拥有`IWorkbenchWindow`打开的 JavaEditors 的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:05:02.687

我还没有尝试过，但我相信你需要添加一个依赖项

```
org.eclipse.ui.workbench.texteditor 
```

并使用扩展点

```
org.eclipse.ui.workbench.texteditor.hyperlinkDetectors 
```

也许这个链接也会有所帮助：[http ://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fextension-points%2Forg_eclipse_ui_workbench_texteditor_hyperlinkDetectors.html](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fextension-points%2Forg_eclipse_ui_workbench_texteditor_hyperlinkDetectors.html)

# css - p:layoutUnit 中的 p:inputText 在 p:dialog 中不起作用

> ID：13451002
> 
> 赞同：0
> 
> 时间：2012-11-19T09:35:15.303
> 
> 标签：css, primefaces

我有一个包含一些输入组件的模式对话框。

在对话框中使用 ap:layout 时会出现问题。ap:layoutUnit 中的 p:inputText 组件可以在第一时间获得焦点，但随后它变得对键盘没有响应，因为没有显示输入文本，我也无法使用 tab 关键字切换到其他输入字段（我只能用鼠标切换到另一个输入组件）。

设置 modal="false" 可以解决问题，但我需要一个模态对话框。

这是我的代码：

```
<h:form id="outerForm">
    <p:commandButton id="button" value="Show dialog" onclick="dialogVar.show()" type="button" />

    <p:dialog id="dialog" header="inputText inside p:layout will not work" widgetVar="dialogVar" modal="true" resizable="false" closeOnEscape="true">

            <h:inputText />
            <p:autoComplete />

            <p:panelGrid columns="2">
                <h:outputLabel value="Write something" />
                <p:inputText />
                <h:outputLabel value="Write something else" />
                <p:inputText />
                <h:outputLabel value="Text Area" />
                <p:inputTextarea rows="4" cols="30" autoResize="false" />
            </p:panelGrid>

            <p:layout id="diffDialogLayout" style="height:400px;width:900px;">

                <p:layoutUnit id="diffWestUnit" position="west" size="45%">
                    <p:panelGrid columns="2">
                        <h:outputLabel value="Write something" />
                        <p:inputText />
                        <h:outputLabel value="Write something else" />
                        <p:inputText />
                        <h:outputLabel value="Text Area" />
                        <p:inputTextarea rows="4" cols="30" autoResize="false" />
                    </p:panelGrid>
                </p:layoutUnit>

                <p:layoutUnit id="diffCenterUnit" position="center">
                    <br />
                </p:layoutUnit>
            </p:layout>

            <h:inputText />

    </p:dialog>
</h:form> 
```

我的环境：

*   PrimeFaces 3.4.2
*   PrimeFaces 扩展 0.6.1
*   莫哈拉 2.1.13
*   雄猫 7.0.30
*   日蚀靛蓝 SR1

**编辑**

建议的解决方案工作正常。可以使用以下 CSS 代码解决该问题：

```
.ui-dialog { z-index: 1005 !important; }
.ui-layout-pane-west { z-index: 1010 !important; }
.ui-layout-pane-center { z-index: 1010 !important; } 
```

或者，如果您只希望它用于特定对话框：

```
#outerForm\3A diffDialog.ui-dialog { z-index: 1005 !important; }
#outerForm\3A diffWestUnit.ui-layout-pane-west { z-index: 1010 !important; }
#outerForm\3A diffCenterUnit.ui-layout-pane-center { z-index: 1010 !important; } 
```

**\3A**字符用于与 IE 6-8 兼容，如下所述：在[CSS 选择器中处理元素 ID 中的冒号](https://stackoverflow.com/questions/122238/handling-a-colon-in-an-element-id-in-a-css-selector)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:42:59.323

我可以重现您的问题，此问题的根源是在 primefaces 中`z-index:1003`使用属性时自动插入的问题`modal=true``<p:dialog>`

你可以使用一个小的 css hack 来解决

CSS：

`.ui-layout-pane-west { z-index:1008 !important; /*any value higher than the modal dialog's z-index */ }`

在使用上述 css 之前，我建议您检查模态面板的 z-index 并相应地更改值。

**编辑**

查看以下链接[Problem with p:layout inside of p:dialog](http://forum.primefaces.org/viewtopic.php?f=3&t=13468) at primefaces forum，仔细查看构建primefaces组件的[jQuery Layout和jQuery Dialog](http://layout.jquery-dev.net/demos/layout_inside_dialog.html)的源代码，您可以看到`dialogLayout_settings = { zIndex: 0 }`模态对话框初始化为`z-index:0`，因此我建议您将 of 设置`z-index`为`<p:dialog>`某个恒定值，例如

`.ui-dialog{z-index:1005 !important;}`

但是，请使用您的其他组件对此进行测试以避免重叠。

希望这可以帮助。

# symfony - FOSFacebookBunlde 抛出“注意：在 vendor\doctrine\dbal\lib\Doctrine\DBAL\Statement.php 第 103 行中的数组到字符串转换”异常

> ID：13451011
> 
> 赞同：2
> 
> 时间：2012-11-19T09:35:55.943
> 
> 标签：symfony, symfony-2.1, fosfacebookbundle

由于我从 symfony 2.0 更新到 2.1，我无法通过 Facebook 登录。Symfony 将我重定向到我的登录页面并显示此错误：

> 注意：vendor\doctrine\dbal\lib\Doctrine\DBAL\Statement.php 第 103 行中的数组到字符串转换

您可以在下面看到我的日志文件：

```
[2012-11-19 09:17:48] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest". [] []
[2012-11-19 09:17:48] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest". [] []
[2012-11-19 09:17:48] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\RouterListener::onKernelRequest". [] []
[2012-11-19 09:17:49] request.INFO: Matched route "fos_facebook_security_check" (parameters: "_controller": "Strict\UserBundle\Controller\LoginController::loginFbAction", "_locale": "pl", "_route": "fos_facebook_security_check") [] []
[2012-11-19 09:17:49] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\LocaleListener::onKernelRequest". [] []
[2012-11-19 09:17:49] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\Security\Http\Firewall::onKernelRequest". [] []
[2012-11-19 09:17:49] doctrine.DEBUG: SELECT t0.username AS username1, t0.username_canonical AS username_canonical2, t0.email AS email3, t0.email_canonical AS email_canonical4, t0.enabled AS enabled5, t0.salt AS salt6, t0.password AS password7, t0.last_login AS last_login8, t0.locked AS locked9, t0.expired AS expired10, t0.expires_at AS expires_at11, t0.confirmation_token AS confirmation_token12, t0.password_requested_at AS password_requested_at13, t0.roles AS roles14, t0.credentials_expired AS credentials_expired15, t0.credentials_expire_at AS credentials_expire_at16, t0.id AS id17, t0.facebookId AS facebookId18, t0.name AS name19, t0.text AS text20, t0.location AS location21, t0.picturePath AS picturePath22, t0.www AS www23, t0.language AS language24, t0.facebookWww AS facebookWww25, t0.male AS male26, t0.reviewsCount AS reviewsCount27, t0.postsCount AS postsCount28, t0.emailEnabled AS emailEnabled29, t0.messagesEnabled AS messagesEnabled30, t0.wwwNofollow AS wwwNofollow31, t0.facebookWwwNofollow AS facebookWwwNofollow32, t0.yearBirth AS yearBirth33, t0.lastModified AS lastModified34, t0.picture_id AS picture_id35 FROM fos_user t0 WHERE t0.facebookId = ? LIMIT 1 ["000_facebook_id_here_0000"] []
[2012-11-19 09:17:51] doctrine.DEBUG: SELECT t0.username AS username1, t0.username_canonical AS username_canonical2, t0.email AS email3, t0.email_canonical AS email_canonical4, t0.enabled AS enabled5, t0.salt AS salt6, t0.password AS password7, t0.last_login AS last_login8, t0.locked AS locked9, t0.expired AS expired10, t0.expires_at AS expires_at11, t0.confirmation_token AS confirmation_token12, t0.password_requested_at AS password_requested_at13, t0.roles AS roles14, t0.credentials_expired AS credentials_expired15, t0.credentials_expire_at AS credentials_expire_at16, t0.id AS id17, t0.facebookId AS facebookId18, t0.name AS name19, t0.text AS text20, t0.location AS location21, t0.picturePath AS picturePath22, t0.www AS www23, t0.language AS language24, t0.facebookWww AS facebookWww25, t0.male AS male26, t0.reviewsCount AS reviewsCount27, t0.postsCount AS postsCount28, t0.emailEnabled AS emailEnabled29, t0.messagesEnabled AS messagesEnabled30, t0.wwwNofollow AS wwwNofollow31, t0.facebookWwwNofollow AS facebookWwwNofollow32, t0.yearBirth AS yearBirth33, t0.lastModified AS lastModified34, t0.picture_id AS picture_id35 FROM fos_user t0 WHERE t0.email = ? LIMIT 1 ["my_email_address_here"] []
[2012-11-19 09:17:52] doctrine.DEBUG: "START TRANSACTION" [] []
[2012-11-19 09:17:52] doctrine.DEBUG: "ROLLBACK" [] []
[2012-11-19 09:17:52] security.INFO: Authentication request failed: Notice: Array to string conversion in vendor\doctrine\dbal\lib\Doctrine\DBAL\Statement.php line 103 [] []
[2012-11-19 09:17:52] security.DEBUG: Redirecting to fos_user_security_login [] [] 
```

上面的两个 sql SELECT 查询不会导致任何错误并且不返回任何结果（在 phpmyadmin 中检查）。

作曲家.json：

```
"require": {
    "php": ">=5.3.3",
    "symfony/symfony": "2.2.*",
    "doctrine/orm": ">=2.2.3,<2.4-dev",
    "doctrine/doctrine-bundle": "1.0.*",
    "twig/extensions": "1.0.*",
    "symfony/assetic-bundle": "2.1.*",
    "symfony/swiftmailer-bundle": "2.1.*",
    "symfony/monolog-bundle": "2.1.*",
    "sensio/distribution-bundle": "2.2.*",
    "sensio/framework-extra-bundle": "2.2.*",
    "sensio/generator-bundle": "2.2.*",
    "jms/security-extra-bundle": "1.3.*",
    "jms/di-extra-bundle": "1.2.*",
    "facebook/php-sdk": "dev-master",
    "friendsofsymfony/user-bundle": "*",
    "friendsofsymfony/facebook-bundle": "dev-master",        
    "besimple/i18n-routing-bundle": "dev-master",
    "gregwar/captcha-bundle": "dev-master"
}, 
```

老实说，我不知道什么是错误的以及如何找到错误。如果您需要一些额外的数据/配置文件，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:49:01.577

嗨，我找到了解决方案。问题是 Facebook 不会返回`picture`要传递给实体`setFBData`的字符串属性。`User`

有`picture`一个包含图像 url 的字符串属性。现在它包含：

> 细绳; 如果您的应用启用了“October 2012 Breaking Changes”迁移设置，则此字段将是具有 url 和 is_silhouette 字段的对象；如果用户尚未上传个人资料图片，is_silhouette 为真

我的 setFBdata 如下所示：

```
public function setFBData($fbdata)
{
    ...
    if (isset($fbdata['picture']))
    {
        $this->setPicturePath($fbdata['picture']);
    }

} 
```

如您所见，它试图将对象/数组设置为字符串字段。

# c# - 如何将此表单中的选定值插入到数据库中？

> ID：13451012
> 
> 赞同：0
> 
> 时间：2012-11-19T09:35:59.003
> 
> 标签：c#, asp.net, sql-server-2008-r2

我是 ASP.NET 中使用 C# 的新开发人员。我开发了一个基于 Intranet Web 的建议应用程序，它作为我部门员工提交的建议的池。

我有以下数据库设计：

```
Log Table: ID, Title, Description, DateSubmitted, Username, TypeID, StatusID
SuggestionsType Table: ID, Type
SuggestionsStatus Table: ID, Status
Employee Table: Username, Name, Title 
```

我可以通过以下代码插入带有标题、提交日期、描述和用户名的建议：

**ASP.NET 代码**

```
<div ID="contactform">
                <ol>
                    <li>
                        <label for="subject">
                        Type</label>
                        <asp:DropDownList ID="DropDownList" runat="server" DataSourceID="SqlDataSource1" Width="155px" 
                                    Font-Bold="True" ForeColor="#006666" AppendDataBoundItems="false" 
                                    DataTextField="Type" DataValueField="ID" AutoPostBack="true" OnDataBound="DropDownList_DataBound">
                        </asp:DropDownList>
                        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                                    ConnectionString="<%$ ConnectionStrings:testConnectionString %>" 
                                    SelectCommand="SELECT * FROM [SafetySuggestionsType]"></asp:SqlDataSource>
                        <asp:TextBox ID="TextBox1" runat="server" CssClass="text"></asp:TextBox>
                        <br />
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" 
                            ControlToValidate="dropdownlist" 
                            ErrorMessage="Please select a type for your suggestion or choose Others and put a type for it"></asp:RequiredFieldValidator>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" 
                            ControlToValidate="TextBox1" 
                            ErrorMessage="Please enter a type for your suggestion"></asp:RequiredFieldValidator>
                    </li>
                    <li>
                        <label for="subject">
                        Subject</label>
                        <asp:TextBox ID="txtSubject" runat="server" CssClass="text"></asp:TextBox>
                        <br />
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                            ControlToValidate="txtSubject" 
                            ErrorMessage="Please enter a subject/title for your suggestion"></asp:RequiredFieldValidator>
                    </li>

                    <%--The following hidden field is for inserting the date--%>
                    <li>
                        <asp:TextBox ID="dateSubmitted" runat="server" CssClass="text" Visible="false"></asp:TextBox>
                        <br />
                    </li>

                    <li>
                        <label for="message">
                        Your Suggestion</label>
                        <asp:TextBox ID="txtSuggestion" runat="server" cols="50" CssClass="textarea" 
                            rows="6" TextMode="MultiLine"></asp:TextBox>
                        <br />
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
                            ControlToValidate="txtSuggestion" ErrorMessage="Please enter your suggestion"></asp:RequiredFieldValidator>
                    </li>
                    <li class="buttons">
                        <asp:ImageButton ID="imageField" runat="server" imageurl="images/Send.gif" 
                            OnClick="btnSubmit_Click" />
                        <%--<input type="image" name="imageField" id="imageField" src="images/Send.gif" />--%>
                    </li>
                </ol>
            </div> 
```

**C#代码：**

```
string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=Test;Integrated Security=True";
        string insertCommand = "INSERT INTO Log (Title, DateSubmitted, Description, Username) values(@Title, @DateSubmitted, @Description, @Username)";
        string username = netID;
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(insertCommand, conn))
            {
                cmd.Parameters.Clear(); 
                cmd.Parameters.AddWithValue("@Title", txtSubject.Text);
                cmd.Parameters.AddWithValue("@DateSubmitted", DateTime.Now.ToString());
                cmd.Parameters.AddWithValue("@Description", txtSuggestion.Text);
                cmd.Parameters.AddWithValue("@Username", username);
                cmd.ExecuteNonQuery();
            }
        } 
```

我现在需要的是插入所选类型的值，**那么该怎么做呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:41:38.917

在插入查询中为 seletedType 添加一个参数：

```
string connString = "Data Source=dha00730-pmtq01\\sqlexpress;Initial Catalog=psspdbTest;Integrated Security=True";
        string insertCommand = "INSERT INTO SafetySuggestionsLog (Title, DateSubmitted, Description, Username, TypeID) values(@Title, @DateSubmitted, @Description, @Username,@TypeID)";
        string username = netID;
        int typeID = Convert.ToInt64(DropDownList.SelectedValue);
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(insertCommand, conn))
            {
                cmd.Parameters.Clear(); 
                cmd.Parameters.AddWithValue("@Title", txtSubject.Text);
                cmd.Parameters.AddWithValue("@DateSubmitted", DateTime.Now.ToString());
                cmd.Parameters.AddWithValue("@Description", txtSuggestion.Text);
                cmd.Parameters.AddWithValue("@Username", username);
                cmd.Parameters.AddWithValue("@TypeID",typeID);    
                cmd.ExecuteNonQuery();
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:18:12.483

该解决方案与@Rohit Vyas 在他的解决方案中提到的相同，但我只是修改了以下代码行：

```
cmd.Parameters.AddWithValue("@TypeID",typeID); 
```

具有以下内容：

```
cmd.Parameters.AddWithValue("@TypeID",DropDownList.SelectedIndex); 
```

# python - 从python中的rsync列表命令中删除文件权限，创建日期？

> ID：13451013
> 
> 赞同：1
> 
> 时间：2012-11-19T09:36:01.817
> 
> 标签：python

我在 Django/Python 中使用 rsync --list-only 命令：

```
subprocess.Popen(['rsync', '--list-only', source],
                           stdout=subprocess.PIPE, 
                           env={'RSYNC_PASSWORD': password}).communicate()[0] 
```

它返回的结果是这样的：

```
drwxrwxrwx 4096 2012/11/07 09:56:23 upload 
```

我不想要所有文件信息。我只希望文件名显示如下：

```
upload 
```

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:12:53.957

rsync 没有缩写输出的选项，您需要使用正则表达式（或`split()`）

```
import re
retval = subprocess.Popen(['rsync', '--list-only', source],
                           stdout=subprocess.PIPE, 
                           env={'RSYNC_PASSWORD': password}).communicate()[0]
retval = re.sub('^.+?\d+:\d+:\d+\s+(\S+.+)', '\g<1>', retval) 
```

或者（只要文件名没有空格）......

```
retval = subprocess.Popen(['rsync', '--list-only', source],
                           stdout=subprocess.PIPE, 
                           env={'RSYNC_PASSWORD': password}).communicate()[0]
retval = retval.split(' ')[-1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:27:33.580

您可以使用[`str.split`](http://docs.python.org/2/library/stdtypes.html#str.rsplit)with`maxsplit`参数来丢弃前 4 个字段。例如

```
>>> "drwxrwxrwx 4096 2012/11/07 09:56:23 upload".split(None, 4)[-1]
'upload'
>>> "drwxrwxrwx 4096 2012/11/07 09:56:23 doc with spaces.txt".split(None, 4)[-1]
'doc with spaces.txt' 
```

`None`用作分隔符来表示*任何空格*。

在您的情况下，假设您的 rsync 命令可能返回多个文件，您可以尝试：

```
# retrieve output
out = subprocess.Popen(['rsync', '--list-only', source],
                       stdout=subprocess.PIPE, 
                       env={'RSYNC_PASSWORD': password}).communicate()[0]
# parse block of text into list of strings
lines = (x.strip() for x in out.split('\n'))
# take only filenames (ignoring empty lines)
filenames = [x.split(None, 4)[-1] for x in lines if x] 
```

# uml - 从 Smalltalk 代码生成 UML 类图

> ID：13451015
> 
> 赞同：7
> 
> 时间：2012-11-19T09:36:09.903
> 
> 标签：uml, smalltalk, visualworks

目前，我正在使用 Visual Works 处理基于 Smalltalk 的应用程序服务器。我正在寻找一种从代码生成 UML 类图的方法。我已经查找了许多工具，但似乎没有任何工作或有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T16:13:19.983

VisualWorks 发行版包含一个名为 ADvance 的工具，它允许往返 UML 类图，也就是说，您可以从代码中重新设计类图，编辑该类图，然后根据更改生成代码。您还可以直接从图表中编辑代码。相当方便的简单工具，可惜它鲜为人知。

要加载 ADvance，请打开 Parcel Manager，然后在建议中单击开发人员工具。ADvance 是那里列出的第一个包裹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:33:58.467

Moose 是 Smalltalk 的软件分析和可视化工具。它提供了关于 Smalltalk 代码的许多不同视图，您可以直观地探索您的系统。虽然没有严格的 UML 可视化。

你可以在这里找到更多， http: [//moose.unibe.ch](http://moose.unibe.ch)

[http://morlhon.net/blog/images/codecrawler.png](http://morlhon.net/blog/images/codecrawler.png)

# c# - 将当前时间添加到图表 xaxis

> ID：13451021
> 
> 赞同：0
> 
> 时间：2012-11-19T09:36:27.437
> 
> 标签：c#, charts, axis-labels

我有一个简单的问题，我做了一些测量并使用 windowsforms，.net 4 在图表上显示。当我将它添加到图表时，我还需要将当前时间添加到 xaxis。我找到了如何添加时间，但是当一个新的测量到来时，所有的旧标签都变成了最后一个测量的时间。
我应该在这一行之后添加什么？

```
chart1.Series["Example"].Points.Add(ms); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:36:23.577

我尝试添加 xy 点，它工作正常。然后可以设置角度 90 以更好地在图形上显示时间。

```
 chart1.Series["Example"].Points.AddXY(DateTime.Now.ToLongTimeString(), ms);
   chart1.ChartAreas[0].AxisX.LabelStyle.Angle = 90; 
```

谢谢。

# parsing - 如何使用 PARSE 方言从 CSV 中读取一行？

> ID：13451026
> 
> 赞同：5
> 
> 时间：2012-11-19T09:36:49.037
> 
> 标签：parsing, csv, rebol

我正在尝试使用 PARSE 将 CSV 行转换为 Rebol 块。很容易用开放代码编写，但与其他问题一样，我试图了解方言在没有它的情况下可以做什么。

所以如果一行说：

```
"Look, that's ""MR. Fork"" to you!",Hostile Fork,,http://hostilefork.com 
```

然后我想要块：

```
[{Look, that's "MR. Fork" to you!} {Hostile Fork} none {http://hostilefork.com}] 
```

需要注意的问题：

*   CSV 字符串中的嵌入引号用`""`
*   逗号可以在引号内，因此是文字的一部分，而不是列分隔符
*   相邻的列分隔逗号表示一个空字段
*   不包含引号或逗号的字符串可以不带引号出现
*   *目前，*我们可以将之类的内容保留`http://rebol.com`为 STRING！而不是[LOAD](http://www.rebol.com/r3/docs/functions/load.html)将它们转换为诸如[URL 之类的类型！](http://www.rebol.com/r3/docs/datatypes/url.html)

为了使它更统一，我做的第一件事是在输入行后面附加一个逗号。然后我有一个`column-rule`捕获以逗号结尾的单个列...可能在引号中或不在引号中。

由于标题行，我知道应该有多少列，所以代码然后说：

```
unless parse line compose [(column-count) column-rule] [
    print rejoin [{Expected } column-count { columns.}]
] 
```

但我有点坚持写作`column-rule`。我需要一种方言来表达*“一旦你找到一个引用，继续跳过引用对，直到你找到一个完全独立的引用。”* 这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:42:52.737

与大多数解析问题一样，我尝试构建一个最能描述输入格式元素的语法。

在这种情况下，我们有名词：

```
[comma ending value-chars qmark quoted-chars value header row] 
```

一些动词：

```
[row-feed emit-value] 
```

和操作名词：

```
[current chunk current-row width] 
```

我想我可以再把它分解一点，但足以使用。一、基础：

```
comma: ","
ending: "^/"
qmark: {"}
value-chars: complement charset reduce [qmark comma ending]
quoted-chars: complement charset reduce [qmark] 
```

现在是价值结构。引用的值是由我们找到的有效字符或引号组成的：

```
current: chunk: none
quoted-value: [
    qmark (current: copy "")
    any [
        copy chunk some quoted-chars (append current chunk)
        |
        qmark qmark (append current qmark)
    ]
    qmark
]

value: [
    copy current some value-chars
    | quoted-value
]

emit-value: [
    (
        delimiter: comma
        append current-row current
    )
]

emit-none: [
    (
        delimiter: comma
        append current-row none
    )
] 
```

请注意，在每一行的开头`delimiter`设置为，然后在我们传递一个值时立即更改为。因此，输入行定义为。`ending``comma``[ending value any [comma value]]`

剩下的就是定义文档结构：

```
current-row: none
row-feed: [
    (
        delimiter: ending
        append/only out current-row: copy []
    )
]

width: none
header: [
    (out: copy [])
    row-feed any [
        value comma
        emit-value
    ]
    value body: ending :body
    emit-value
    (width: length? current-row)
]

row: [
    row-feed width [
        delimiter [
            value emit-value
            | emit-none
        ]
    ]
]

if parse/all stream [header some row opt ending][out] 
```

把它包起来屏蔽所有这些词，你有：

```
REBOL [
    Title: "CSV Parser"
    Date: 19-Nov-2012
    Author: "Christopher Ross-Gill"
]

parse-csv: use [
    comma ending delimiter value-chars qmark quoted-chars
    value quoted-value header row
    row-feed emit-value emit-none
    out current current-row width
][
    comma: ","
    ending: "^/"
    qmark: {"}
    value-chars: complement charset reduce [qmark comma ending]
    quoted-chars: complement charset reduce [qmark]

    current: none
    quoted-value: use [chunk][
        [
            qmark (current: copy "")
            any [
                copy chunk some quoted-chars (append current chunk)
                |
                qmark qmark (append current qmark)
            ]
            qmark
        ]
    ]

    value: [
        copy current some value-chars
        | quoted-value
    ]

    current-row: none
    row-feed: [
        (
            delimiter: ending
            append/only out current-row: copy []
        )
    ]
    emit-value: [
        (
            delimiter: comma
            append current-row current
        )
    ]
    emit-none: [
        (
            delimiter: comma
            append current-row none
        )
    ]

    width: none
    header: [
        (out: copy [])
        row-feed any [
            value comma
            emit-value
        ]
        value body: ending :body
        emit-value
        (width: length? current-row)
    ]

    row: [
        opt ending end break
        |
        row-feed width [
            delimiter [
                value emit-value
                | emit-none
            ]
        ]
    ]

    func [stream [string!]][
        if parse/all stream [header some row][out]
    ]
] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T08:52:31.050

几年前我不得不这样做。我已经更新了我的函数来处理我发现的所有案例。我希望它现在更坚固。

请注意，它可以在**BUT**内处理带有换行符的字符串：

1.  字符串中的换行符只能是 LF**并且**...
2.  记录之间的换行符必须是 CRLF**和**...
3.  您必须使用 read/binary 加载文件，以便 Rebol 不会自动转换换行符。

（例如，1\. 和 2\. 是 Excel 给出的）

```
; Conversion function from CSV format
csv-to-block: func [
    "Convert a string of CSV formated data to a Rebol block. First line is header."
    csv-data [string!] "CSV data."
    /separator separ [char!] "Separator to use if different of comma (,)."
    /without-header "Do not include header in the result."
    /local out line start end this-string header record value data chars spaces chars-but-space
    ; CSV format information http://www.creativyst.com/Doc/Articles/CSV/CSV01.htm
] [
    out: copy []
    separ: any [separ #","]

    ; This function handle replacement of dual double-quote by quote while copying substring
    this-string: func [s e] [replace/all copy/part s e {""} {"}]
    ; CSV parsing rules
    header: [(line: copy []) value any [separ value | separ (append line none)] (if not without-header [append/only out line])]
    record: [(line: copy []) value any [separ value | separ (append line none)] (append/only out line)]
    value: [any spaces data any spaces (append line this-string start end)]
    data: [start: some chars-but-space any [some spaces some chars-but-space] end: | #"^"" start: any [some chars | {""} | separ | newline] end: #"^""]
    chars: complement charset rejoin [ {"} separ newline]
    spaces: charset exclude { ^-} form separ
    chars-but-space: exclude chars spaces

    parse/all csv-data [header any [newline record] any newline end]
    out
] 
```

如果需要，我有对应的`block-to-csv`。

[编辑]好的，对应的（注意：所有字符串！将用双引号括起来，如果您希望结果中出现标题，则标题必须位于块的第一行）：

```
block-to-csv: func [
    "Convert a block of blocks to a CSV formated string." 
    blk-data [block!] "block of data to convert"
    /separator separ "Separator to use if different of comma (,)."
    /local out csv-string record value v
] [
    out: copy ""
    separ: any [separ #","]
    ; This function convert a string to a CSV formated one
    csv-string: func [val] [head insert next copy {""} replace/all replace/all copy val {"} {""} newline #{0A} ]
    record: [into [some [value (append out separ)]]]
    value: [set v string! (append out csv-string v) | set v any-type! (append out form v)]

    parse/all blk-data [any [record (remove back tail out append out crlf)]]
    out
] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T16:42:01.143

此外，在来自 BrianH 的 rebol.org 上找到 %csv-tools.r 脚本。

[http://www.rebol.org/view-script.r?script=csv-tools.r](http://www.rebol.org/view-script.r?script=csv-tools.r)

很棒的一段代码。适用于 R2 和 R3。

# javascript - 在 Javascript 中访问 JavaScriptSerializer

> ID：13451027
> 
> 赞同：2
> 
> 时间：2012-11-19T09:36:58.747
> 
> 标签：javascript, asp.net, json, serialization

我有一个 json 数组，我将`, how do I access it in the javascript. I am using javascript`amcharts `and want to pass`vb.net` 数组序列化为 javascript 图表。代码如下：

**VB**

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    DataSetToJSON()
End Sub
Public Function SelectChartData(ByVal Name As String) As DataSet
    Dim sqlCmd As New SqlCommand
    Dim myData As New DataSet

    sqlCmd.CommandTimeout = 1200

    sqlCmd.CommandType = CommandType.StoredProcedure
    sqlCmd.CommandText = "SelectAmChartdata"

    sqlCmd.Parameters.Add("@Name", SqlDbType.VarChar)
    sqlCmd.Parameters("@Name").Value = Name

    Dim da As New dsSV1TableAdapters.tblGeneralTableAdapter

    da.Adapter.SelectCommand = sqlCmd

    sqlCmd.Connection = da.Connection
    sqlCmd.Connection.Open()
    da.Adapter.Fill(myData)

    sqlCmd.Dispose()
    sqlCmd = Nothing

    da.Connection.Close()
    da.Connection.Dispose()
    da.Connection = Nothing

    Return myData

End Function

Public Function DataSetToJSON()
    Dim dt As DataTable
    ds = SelectChartData("Weather")

    Dim dict As New Dictionary(Of String, Object)

    For Each dt In ds.Tables
        Dim arr(dt.Rows.Count) As Object

        For i As Integer = 0 To dt.Rows.Count - 1
            arr(i) = dt.Rows(i).ItemArray
        Next

        dict.Add(dt.TableName, arr)
    Next

    Dim json As New JavaScriptSerializer
    Return json.Serialize(dict)

End Function 
```

**ASPX**

```
<script type="text/javascript">

//var chartData =  **Access Serverside Array**

    window.onload = function () {
    var chart = new AmCharts.AmSerialChart();
    chart.dataProvider = chartData;
    chart.categoryField = "country";
    chart.marginTop = 15;
    chart.marginLeft = 55;
    chart.marginRight = 15;
    chart.marginBottom = 80;
    chart.angle = 30;
    chart.depth3D = 15;

    var catAxis = chart.categoryAxis;
    catAxis.gridCount = chartData.length;
    catAxis.labelRotation = 90;

    var graph = new AmCharts.AmGraph();
    graph.balloonText = "[[category]]: [[value]]";
    graph.valueField = "visits"
    graph.type = "column";
    graph.lineAlpha = 0;
    graph.fillAlphas = 0.8;
    chart.addGraph(graph);

    chart.write('chartContainer');
}
</script 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:55:28.640

您可以将序列化数据直接转储到 ASPX 页面中：

```
<script type="text/javascript">

    var my_data = <%= DataSetToJSON() %>;

</script> 
```

或者您可以在 ASPX 页面中使用：

```
<input type="hidden" id="my_data" clientidmode="static" runat="server" value="" /> 
```

在代码隐藏中：

```
my_data.Value = DataSetToJSON(); 
```

然后，您可以使用`document.getElementById('my_id').value`提取数据，使用类似的东西对其进行解码并将其`JSON.parse`传递到您的图表。

# c - 如何在C中将静态数组的所有元素重置为0

> ID：13451031
> 
> 赞同：1
> 
> 时间：2012-11-19T09:37:05.610
> 
> 标签：c, arrays, static

我在 c 中有一个静态数组，定义如下：

```
typedef struct
{
int a;
int b;
int c;
int d;
} Hello;

static Hello hello[6] = {{0}}; 
```

然后在某些时候，我需要将此静态数组中每个元素的所有属性重置为 0；这该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T09:37:42.400

您需要使用`memset()`：

```
#include <string.h>
memset(hello, 0, sizeof hello); 
```

请注意，这仅适用，因为“所有位 0”是将`int`变量设置为 0 的一个非常安全的假设。如果`hello`包含例如`float`s 或指针，则该假设根本不成立，您必须进行手动循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:26:23.687

我不同意 unwind 对浮点数和指针的初始化“该假设根本不成立” - 它在大多数情况下都成立。

在我看来，假设全为零是非常安全的`float 0`，因为您可能有 IEEE 754 浮点数。请参阅[如果所有位都为 0，那么 IEEE 浮点的值是多少？](https://stackoverflow.com/questions/8558813/if-all-bits-are-0-what-is-the-value-of-ieee-floating-point)

假设空指针为零是非常安全的，即`NULL == 0`。虽然也不能保证。

如果您想确保这些假设并证明在您的环境中`memset`是安全的，那么我提出以下建议：

```
void testFloatAssumptions()
{
    const float fzero=0;
    float f;
    memset(&f,0,sizeof(f));
    if(memcmp(&f,&fzero,sizeof(f))!=0)
    {
      //then you have a float problem w.r.t. memset(...,0,...)
    }
}

void testPointerAssumptions()
{
    const int* nullPointer=NULL;
    int* pointer;
    memset(&pointer,0,sizeof(pointer));
    if(memcmp(&pointer,&nullPointer,sizeof(pointer))!=0)
    {
      //then you have a pointer problem w.r.t. memset(...,0,...)
    }
} 
```

另一种方法是针对您不太可能遇到的情况进行大量手动编码。

# javascript - 鼠标悬停/单击时弹出 Div 锚点

> ID：13451032
> 
> 赞同：2
> 
> 时间：2012-11-19T09:37:07.430
> 
> 标签：javascript, jquery, html, css, web-applications

我是网络编程的新手。

我想在 facebook 中实现类似的东西，当我们将鼠标悬停在链接上时，锚定在链接上的箭头浮动 div 将显示在其顶部。

你们都如何解决这种组件？我找到的最近的库是[http://gristmill.github.com/jquery-popbox/](http://gristmill.github.com/jquery-popbox/)这有时在某些浏览器中不起作用。进一步搜索“Popbox”没有显示任何有用的结果。任何人都可以推荐任何类似的图书馆，比如我发布的链接吗？它可以使用 Jquery、Javascript、CSS、html 等。

除了使用库之外，谁能以最简单的方式向我展示如何在不使用库的情况下做到这一点。我只是想知道背后的粗略想法。大多数库都带有复杂的代码，初学者很难学习。

非常感谢先进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:50:32.453

检查这个工作演示：http: [//jsfiddle.net/fedmich/Aapw6/](http://jsfiddle.net/fedmich/Aapw6/)

您需要在顶部创建一个箭头图像并在弹出框中居中，然后通常移动弹出框以跟随目标锚点。

```
$('.hover').hover(function(){
        var popup_div = $('.popup_div');
        var obj = $(this);
        var offset = obj.offset();

        var new_top = offset.top + 30;

        var new_left = offset.left;

        new_left = new_left - ( popup_div.width() / 2);
        new_left = new_left + ( obj.width() / 2);

        popup_div.css('left', new_left + 'px');
        popup_div.css('top', new_top + 'px');

        popup_div.show();
    }
    , function (){
        //hovered away so hide popup
        $('.popup_div').hide();
    }
    ); 
```

CSS 代码应该是绝对位置

```
.popup_div{
    position:absolute;
    left:100px;
    top:100px;
    border:1px solid red;
    background-color:blue;
    width:150px;
    height:150px;
    background:url("http://i.imgur.com/zFWft.png") no-repeat scroll center 0 transparent;
    text-align:left;
} 
```

* * *

您可以通过获取目标 div 的位置，然后通过将宽度除以一半并将其添加到左侧来获取中心。

```
 new_left =  hovered_thing.left + (hovered_thing.width / 2) - (popup_div.width / 2) 
```

不过，让我在另一张纸条上尽快为您解答一下，您尝试过悬停卡吗？可能与您想做的类似

[http://designwithpc.com/Plugins/Hovercard](http://designwithpc.com/Plugins/Hovercard)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:52:21.567

jquery ui 提供了[对话框](http://jqueryui.com/dialog/)功能

它背后的想法是你有你的锚绑定它显示和隐藏你的弹出窗口

```
$('#anchor').bind({
    'mouseenter' : function() {
        $('#popUp').show();
    },
    'mouseleave' : function() {
        $('#popUp').hide();
    }
}); 
```

您必须将弹出窗口的位置设置为。请注意，只有当弹出 div 显示不是 none 时，您才能使用**$('#popup').outerWidth()/2**和**$('#anchor').outerWidth() /2** ...

# javascript - 如何在 JavaScript 中使用静态方法中的私有成员？

> ID：13451034
> 
> 赞同：0
> 
> 时间：2012-11-19T09:37:14.983
> 
> 标签：javascript, oop

我想在 JavaScript 中使用来自公共静态方法的私有（静态）方法。我正在研究这个解决方案：

```
function Calc() {
    var DoSmth = function (test) {
        return test + 1;
    }
}

Calc.Stat = function (x) {
    return DoSmth(x);
} 
```

但它不会工作。我该怎么做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:45:15.413

```
var Calc = (function() {
    var DoSmth = function (test) {
        return test + 1;
    };

    var klass = function() {

    };

    klass.Stat = function (x) {
        return DoSmth(x);
    };

    return klass;
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:42:59.803

您可以使用模块模式执行此操作：

```
var Calc = (function() {
  var run = function() { ... },
      stat = function() { return run(); };
  return { stat: stat };
}());

Calc.stat(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:47:15.050

在 JS 中执行私有函数的最简单方法是用另一个函数包装它。我建议这样的事情：

```
var Calc = (function() {
    var DoSmth = function (test) {
        return test + 1;
    };

    var result = function() {

    };

    result.Stat = function (x) {
        return DoSmth(x);
    }

    return result;
}()); 
```

# sql - 根据来自不同列的值排除记录

> ID：13451035
> 
> 赞同：5
> 
> 时间：2012-11-19T09:37:16.853
> 
> 标签：sql, oracle

我有一个看起来像这样的表：

```
| CODE   |  LEVEL1  |  LEVEL2  |  LEVEL3  |   SEC_ID   |
| CODE1  |  LEV1    |  LEV2    |  LEV3    |   123456   |
| CODE2  |  LEV1    |  LEV2    |  LEV3    |   234561   |
| CODE2  |  LEV1    |  LEV2    |  Term    |   345612   |
| CODE3  |  LEV1    |  LEV2    |  LEV3    |   456123   | 
```

我需要我的查询在列中查找单词“Term”，`Level3`然后排除具有相同`CODE`.

因此，在上面的示例中，查询将从结果中排除第 2 行和第 3 行。

如果不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T09:52:11.093

您可以使用`NOT EXISTS`排除任何具有`level3`相同值的记录`code`：

```
select *
from yourtable t1
where not exists (select *
                  from yourtable t2
                  where level3 = 'Term'
                   and t1.code = t2.code) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/e6a8c/3)

结果：

```
|  CODE | LEVEL1 | LEVEL2 | LEVEL3 | SEC_ID |
---------------------------------------------
| CODE1 |   LEV1 |   LEV2 |   LEV3 | 123456 |
| CODE3 |   LEV1 |   LEV2 |   LEV3 | 456123 | 
```

# red5 - 关于red5房间

> ID：13451037
> 
> 赞同：1
> 
> 时间：2012-11-19T09:37:25.730
> 
> 标签：red5

我有一个关于red5房间的问题，当我进入一个房间时，它会触发appDisconnect事件。因为当我关闭浏览器时，它只是触发了roomDisconnect，所以我无法获得用户退出的时间系统，当他离开房间时我无法得到。有人
有这个问题吗？怎么办？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:18:20.540

roomDisconnect 不存在 :) 我猜你的意思是

```
@Override
public void roomLeave(IClient client, IScope room) { ... } 
```

与 appDisconnect 相比，Event roomLeave 将为您提供基本相同的信息。事实上，用户不能在不断开连接的情况下离开房间。不离开房间就无法断开连接。

抛出事件只是时间问题。*在 appDisconnect之前*调用roomLeave。

但是，我们有时会遇到同样的问题，即 appDiconnect 不被调用。这就是为什么我将所有内容都更改为使用 roomLeave。同时我认为 roomLeave 也更有意义，因为在调用 roomLeave 时您仍然可以访问用户 IConnection 并从中读取一些值。在“appDisconnect”时，我认为用户的 IConnection 已经消失了。

塞巴斯蒂安

# php - 在 Drupal7 的注册表单中添加美式（XXX-XXX-XXXX）电话号码字段

> ID：13451039
> 
> 赞同：1
> 
> 时间：2012-11-19T09:37:34.377
> 
> 标签：php, drupal, drupal-7, drupal-modules

如何在 Drupal7 的注册表单中添加美式（XXX-XXX-XXXX）电话号码字段？该字段类型应选择哪个 CCK 字段（XXX-XXX-XXXX）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:49:53.233

试试[电话贡献模块](http://drupal.org/project/phone)。

> 验证以下国家的电话号码：法国、比利时、英国、瑞士、意大利、希腊、荷兰、以色列、俄罗斯、乌克兰、澳大利亚、西班牙、捷克、匈牙利、波兰（仅限手机）、哥斯达黎加、巴拿马、巴西、辣椒、新西兰、中国、香港、澳门、菲律宾、新加坡、瑞士、约旦、埃及、南非、巴基斯坦、美国和加拿大

# java - 将 java 系统属性传递给 ant 测试

> ID：13451045
> 
> 赞同：5
> 
> 时间：2012-11-19T09:37:52.047
> 
> 标签：java, ant

我让蚂蚁用以下代码执行一个 jar

```
 <target name="start.my.jar" description="start my jar">
  <echo message="Starting the jar" />
  <java jar="${jars.dir}/${my.stub.jar}" fork="true" dir="${jars.dir}" spawn="true">
            <sysproperty key="properties.filename" value="${basedir}/path/path/path/filename.properties"/>
        <arg value="start" />
    </java>
</target> 
```

jar里面有一个类，代码如下

```
public static MyFacade createFacade() throws FileNotFoundException, IOException {
    return createFacade(System.getProperty(properties.filename));
} 
```

然后有一个配置为这样的 ant 测试目标

```
 <target name="test" depends="compile, support" description="perform unit tests">
    <mkdir dir="${build.test}" />
    <mkdir dir="${test-classes.dir}" />
    <javac srcdir="${build.test}" destdir="${test-classes.dir}" debug="${debug}" nowarn="${nowarn}" includeantruntime="false" deprecation="${deprecation}">
        <classpath refid="main.classpath" />
    </javac>
    <junit printsummary="yes" haltonfailure="yes" showoutput="true" dir="${test-classes.dir}" fork="true" forkmode="perBatch" failureproperty="junit.failure" errorproperty="junit.error" haltonerror="no">
        <jvmarg value="-Xmx1G" />
        <jvmarg value="-Dcom.sun.management.jmxremote" />

        <classpath>
            <pathelement location="${test-classes.dir}" />
            <pathelement location="${classes.dir}" />
            <!--
            For module restful_api
            -->
            <pathelement location="${build.deploy}" />
            <pathelement location="${classes.dir}" />
            <fileset dir="${build.lib}">
                <include name="*.jar" />
            </fileset>
        </classpath>
        <formatter type="plain" />
        <batchtest fork="yes" todir="${build.test}">
            <fileset dir="${build.test}">
                <include name="**/*AllTests.java" />
                <include name="**/*TestCase.java" />
            </fileset>
        </batchtest>
    </junit>
    <fail message="Unittest failures - please check" if="junit.failure" />
    <fail message="Unittest errors - please check" if="junit.error" />
</target> 
```

我在这个测试目标模块中的测试无法获得我在 start.my.jar 目标上指定的文件的属性。有什么我做错了吗？

```
SEVERE: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container
[junit] java.lang.NullPointerException
[junit]     at java.io.File.<init>(File.java:222)
[junit]     at com.mycompany.myproduct.sdk.facade.MyFacadeFactory.getInputStream(MyFacadeFactory.java:47)
[junit]     at com.mycompany.myproduct.sdk.facade.MyFacadeFactory.loadFacade(MyFacadeFactory.java:43)
[junit]     at com.mycompany.myproduct.sdk.facade.MyFacadeFactory.createFacade(MyFacadeFactory.java:32)
[junit]     at com.mycompany.myproduct.sdk.facade.MyFacadeFactory.createFacade(MyFacadeFactory.java:28)
[junit]     at com.mycompany.myproduct.sdk.resources.impl.TransactionResourceImpl.<init>(TransactionResourceImpl.java:70)
[junit]     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
[junit]     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
[junit]     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
[junit]     at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
[junit]     at com.sun.jersey.server.spi.component.ResourceComponentConstructor._construct(ResourceComponentConstructor.java:191) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T10:01:01.303

那是因为您仅为`java`目标添加了属性，这是一个独立的运行时环境。目标指定了一个新环境（当`junit`您为其设置一些 JVM 开关时，您也需要指定系统属性）。

尝试这个：

```
<junit ...>
    <sysproperty key="properties.filename"
            value="${basedir}/path/path/path/filename.properties"/>
    ....
</junit> 
```

另一种选择是`-Dproperties.filename=...`每次都使用密钥运行 ant 任务（您可以在 Eclipse 的外部运行配置中进行设置）。然而，缺点是，您必须在每次想要运行任务时记住这一点（例如，在 CI 构建中或使用新签出时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T12:39:11.213

有趣的是，这很有效：

```
 <jvmarg value="-Dproperties.filename=${basedir}/path/path/path/filename.properties"/> 
```

我之前用过的那个：

```
 <sysproperty key="" value=""/> 
```

从来没有工作过

# azure - StreamInsight Austin 示例服务总线 404

> ID：13451047
> 
> 赞同：0
> 
> 时间：2012-11-19T09:37:55.853
> 
> 标签：azure, servicebus, streaminsight, azureservicebus

我一直在尝试基于 Austin Sample 创建一个示例应用程序。首先，我有一个带有示例的 404，我通过调整 App.Config 中的 connectionString 来修复它（我忘了那个，我的错）。现在我创建了第二个接收器，它应该将消息发送到服务总线队列而不是 Azure 表。启动 SampleApplication 和 EventSourceSimulator 时，前两条消息似乎正确传递，但第三条消息显示 404 错误。以下是错误的屏幕截图和我的接收器的类。如果您需要更多信息来帮助我，请告诉我。提前致谢，

![奥斯汀 404 错误](../Images/660effe081fbda082f0c6913152838bc.png)

```
public class ServiceBusQueueSink<TEvent>
{
    readonly QueueClient _queueClient;
    readonly NamespaceManager _namespaceManager;
    readonly string _connectionString;
    readonly string _queueName = "DeviceErrorsQueue";
    readonly string _errorType;
    readonly bool _storeCtis;

    ServiceBusQueueSink(string errorType, bool storeCtis)
    {
        _errorType = errorType;
        _storeCtis = storeCtis;

        // Configure Queue Settings
        QueueDescription qd = new QueueDescription(_queueName);
        qd.MaxSizeInMegabytes = 2048;
        qd.DefaultMessageTimeToLive = new TimeSpan(0, 1, 0);

        // Create the queue if it does not exist already
        _connectionstring =  CloudConfigurationManager.GetSetting("Microsoft.ServiceBus.ConnectionString");

        _namespaceManager = NamespaceManager.CreateFromConnectionString(_connectionString);

        if (!_namespaceManager.QueueExists(_queueName))
        {
            _namespaceManager.CreateQueue(_queueName);
        }

        _queueClient = QueueClient.CreateFromConnectionString(_connectionString, "DeviceErrorsQueue");

    }

    /// <summary>
    /// Write each received event into the service bus queue.
    /// </summary>
    /// <param name="e">Event to write.</param>
    public void OnNext(PointEvent<TEvent> e)
    {
        bool send = false;
        if (e.EventKind == EventKind.Cti)
        {
            if (_storeCtis)
                send = true;
            else
                send = false;
        }
        else
            send = true;

        if (send)
        {
            BrokeredMessage message = new BrokeredMessage(e);
            message.Properties["ErrorType"] = _errorType;
            _queueClient.Send(message);
        }
    }

    /// <summary>
    /// Static method that returns a new Service Bus Queue sink observer.
    /// </summary>
    /// <param name="storageConnection">Service Bus Queue connection string.</param>
    /// <param name="errorType">Type of error to be saved in properties of brokeredmessage.</param>
    /// <param name="storeCtis">Flag specifying whether to also persist CTI events.</param>
    /// <returns></returns>
    public static IObserver<PointEvent<TEvent>> CreateObserver(string errorType, bool storeCtis)
    {
        var res = new ServiceBusQueueSink<TEvent>(errorType, storeCtis);
        return Observer.Create<PointEvent<TEvent>>(e => res.OnNext(e));
    } 
```

更新：我在管理门户的服务总线队列中看不到任何东西，所以我想那里什么也没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:18:04.383

我想你在 (yourservice)/devices 有一个 HttpSource，对吧？问题是，在您的查询中收到两条消息后，我怀疑是输出接收器。因此，您在此地址收到 404，因为整个查询已关闭。请查看您的 StreamInsight 存储帐户中的日志表，您应该在那里看到错误/异常信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:06:41.377

您似乎找到了问题的原因。一般来说，如果 HTTP 端点返回 404（可能是在几次成功请求之后），那么您的查询管道中的某些东西很可能发生了故障，正如上面的第一个回复所暗示的那样。在这种情况下，您可以通过连接调试器并检查查询的诊断来获取引发的异常。Austin CTP 软件包（入门文档的一部分）随附的常见问题解答提供了有关此的更多信息。

# css - 条件属性中的布尔字符串与 MVC4/Razor 2 比较返回意外结果

> ID：13451051
> 
> 赞同：2
> 
> 时间：2012-11-19T09:38:15.570
> 
> 标签：css, attributes, asp.net-mvc-4, conditional, razor-2

在使用 Razor 2 将我的 MVC 3 解决方案升级到 MVC 4 后，我遇到了以下问题。

视图中的此代码

```
@{
    string main = "archive";
}
    <div class="selected-@(main == "archive")"></div> 
```

在 MVC 3 中返回这个

```
<div class="selected-True"></div> 
```

这在 MVC 4 中

```
<div class="selected-class"></div> 
```

这打破了我的 CSS。

这是 Razor 2 中新的条件属性功能引入的错误吗？

我的解决方法是这样的：

```
<div class="selected-@((main == "archive").ToString())"></div> 
```

它返回这个：

```
<div class="selected-True"></div> 
```

有人有更好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:05:05.127

作为替代方案：

```
<div class="selected-@(main == "archive" ? "true" : "false")"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:49:32.067

为什么不将此类作为视图模型的一部分，例如

```
public string MainClass {
            get { 
                if(main=="archive") return "True";
                return "False";
            }
} 
```

并在您的视图中使用它

```
<div class="selected-@MainClass"></div> 
```

Razor2 对视图编译更加严格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:35:15.757

我的 bug-or-not 问题在这里得到解答：[https ://stackoverflow.com/a/13455272/533460](https://stackoverflow.com/a/13455272/533460)

这不是错误，而是 Razor 2 的新功能！

我的代码中发生的事情是基于这个原则

```
<input checked="@ViewBag.Checked" type="checkbox"/> 
```

变成

```
<input checked="checked" type="checkbox"/> 
```

当 ViewBag.Checked == true。

所以

```
<div class="@(main == "archive")"></div> 
```

变成

```
<div class="class"></div> 
```

感谢@webdeveloper ( [https://stackoverflow.com/users/1667969/webdeveloper](https://stackoverflow.com/users/1667969/webdeveloper) ) 指出我的答案。

# java - 在 Apache-tomcat 上部署 .war 文件后，导出到 excel 和 pdf 不起作用

> ID：13451053
> 
> 赞同：0
> 
> 时间：2012-11-19T09:38:17.663
> 
> 标签：java, apache, tomcat6, itext, apache-poi

嗨伙计们！我制作了一个 Web 应用程序，在其中我提供了两个按钮来将数据导出为 .excel 和 .pdf 格式。我将以下 jar 文件 itext 2.1.0.jar,poi 2.5.1,poi scratchpad 3.0.1 -final 添加到我的库中我已将其保存到本地 PC 的 D:// 驱动器中。

有了这些东西在我的库中，我的应用程序在 netbeans 中完美运行。但是在清理和构建项目并将这个 .war 文件单独部署到 tomcat 导出事情之后并没有发生。

请大家帮帮我..任何 sugetions 将由衷地欢迎..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:40:37.450

这并不能直接回答您的战争部署问题，但它确实回答了您可能会在解决后立即提出的问题......

您声明您正在使用两个 POI 罐子，`poi-2.5.1`并且`poi-scratchpad-3.0.1-final`. 首先，您不应该使用来自不同版本的不匹配的 POI jar。您需要确保始终使用同一版本的 POI jar，例如`poi-3.8-final`++ 。额外的 jar 依赖于核心 jar，如果它们不匹配，事情将无法正常工作。`poi-scratchpad-3.8-final``poi-ooxml-3.8-final`

其次，您使用的是 POI 2.5.1，它于 2004 年 2 月 29 日发布，大约 9 年前！然后修复的错误列表[是巨大的！](http://poi.apache.org/changes.html). 您至少应该从这十年升级到 POI 版本……最好是最新版本。这将解决您尚未解决的许多问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:42:12.047

请仔细检查您的战争中是否有 itext 和 poi jar。并粘贴您的异常日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:40:44.457

这些 jars 应该包含在 war 文件中，您也应该将它们包含在构建脚本中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:59:57.143

作为参考评论的示例

```
 <path id="project.class.path">
        <pathelement location="war/WEB-INF/classes"/>
        <!-- Add any additional non-server libs (such as JUnit) -->
        <fileset dir="war/WEB-INF/lib" includes="**/*.jar"/>
        <fileset dir="compile-lib-gwt" includes="**/*.jar"/>
<!--        <fileset dir="D:\Eclipse\eclipse-Jonu\plugins\com.google.gwt.eclipse.sdkbundle_2.5.0.v201210291354-rel-r42\gwt-2.5.0" includes="**/*.jar"/> --> 
      </path> 
```

然后将要添加的 JAR 放在 WEB-INF/LIB 下

# php - php问题将数组保存到文本文件

> ID：13451054
> 
> 赞同：0
> 
> 时间：2012-11-19T09:38:18.830
> 
> 标签：php

嘿伙计们，我正在尝试将值保存到文本文件中。我尝试了不同的方法，当我打开文本文件时，所有值都写在一行中，没有空格。我想在自己的行中写下每个值，这是我到目前为止所拥有的：

```
 $filename = 'admin_liste.txt';
    $string   = '';

    foreach($arr as $key => $val) {
    $string .= "$val\n";
    }

    file_put_contents($filename, $string); 
```

这会在文本文件中写入这样的所有内容： `user1user2user3user4`

但我想要这样：

*   用户1
*   用户2
*   用户3
*   用户4

没有“●”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T09:41:47.063

您正在使用 Linux 换行符，您需要使用`\r\n`for windows。

因此，您的代码将如下所示：

```
$filename = 'admin_liste.txt';
$string   = '';

foreach($arr as $key => $val) {
    $string .= "$val\r\n";
}

file_put_contents($filename, $string); 
```

但是，PHP 有一个内置常量，它会根据您运行的操作系统来处理这个问题。因此，您可以简单地使用以下内容，而不是使用上述内容（如果您的网站总是在 Windows 上，则没有意义，但要知道）：

```
file_put_contents($filename, implode(PHP_EOL,array_values($arr))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T09:42:30.833

由于您在 Windows 上工作，因此您应该使用 '\r\n'。我建议您使用内置常量 PHP_EOL，因为它会根据您当前运行的平台呈现换行符。

**编辑**

将 PHP_EOL 添加到您的代码段中，并且似乎可以正常工作。

```
$filename = 'admin_liste.txt';
$string   = '';
$arr = array('user1', 'user2', 'user3');

foreach($arr as $key => $val) {

    $string .= "$val" . PHP_EOL;

}

file_put_contents($filename, $string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:42:55.170

试试这个代码

```
 $filename = 'admin_liste.txt';
$string   = '';

foreach($arr as $key => $val) {
$string .= "$val\n\r";

}
file_put_contents($filename, $string); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:44:12.343

您可以简单地使用 PHP_EOL 常量

```
file_put_contents($filename, implode(PHP_EOL,array_values($arr))); 
```

# c++ - Getline 错误 MFC vs2012 (msvcp110.dll)

> ID：13451055
> 
> 赞同：1
> 
> 时间：2012-11-19T09:38:19.463
> 
> 标签：c++, mfc, visual-studio-2012, getline

我在将 vs2012 中的 std::getline 函数与 MFC 应用程序一起使用时遇到问题。相同的代码在 vs2010 中运行，这就是为什么我确信这不是代码本身的问题。

```
void AddImage::OnClickedIdbAiRegistration(){
CFileDialog file(TRUE, NULL, NULL, OFN_OVERWRITEPROMPT, "(*.dat)|*.dat||");
file.DoModal();
UpdateData();
m_ai_file=file.GetPathName();
UpdateData(FALSE);
std::string buf=m_ai_file;
if(filecnt(buf, "Dat")){
    std::ifstream file(buf);
    AfxMessageBox(buf.c_str());
    std::getline(file, buf);//Here is my problem
    AfxMessageBox(buf.c_str());
    file.close();
    }
} 
```

第一个 AfxMessageBox 返回文件路径（正确且有效的 ASCII 文件）。我永远无法到达第二个 AfxMessageBox，因为 getline 产生：

> program.exe 中 0x000007FEF7B4AAEE (msvcp110.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0xFFFFFFFFFFFFFFFF。

和 vs11 将我重定向到 xiosbase 第 443 行

```
 locale __CLR_OR_THIS_CALL getloc() const
    {   // get locale
    return (*_Ploc);/*THIS IS LINE 443*/
    } 
```

对于项目属性，我使用“在共享 dll 中使用 MFC”和“多线程 DLL”和子系统“Windows”

附加程序代码，包括：

```
#include <afxwin.h>
#include <afxframewndex.h>
#include <afxcmn.h>
#include <afxdialogex.h>

#include <iostream>
#include <string>
#include <sstream>
#include <regex>
#include <fstream>
#include <time.h>
#include <Windows.h>

usign namespace std;

class AddImage:public CDialog{
        DECLARE_DYNAMIC(AddImage)
    public:
        AddImage(CWnd* pParent = NULL);
        virtual ~AddImage();
        enum {IDD=IDD_ADD_IMAGE};
    protected:
        virtual void DoDataExchange(CDataExchange* pDX);
        DECLARE_MESSAGE_MAP()
    public:
        CString m_ai_file;
    };

AddImage::AddImage(CWnd* pParent):CDialog(AddImage::IDD, pParent){
    m_ai_file=_T("");
    }

AddImage::~AddImage(){
    }

bool filecnt(string path, string type){
    if(filepathcnt(path, type)){
        if(GetFileAttributes(path.c_str())==-1){
            return(FALSE);
            }
        else{
            return(TRUE);
            }
        }
    else{
        return(FALSE);
        }
    }

bool filepathcnt(string path, string type){
    if(type==""){
        tr1::regex regex("[[:print:]]+\\.[[:alnum:]]+");
        if(regex_match(path.begin(), path.end(), regex)){
            return(TRUE);
            }
        else{
            return(FALSE);
            }
        }
    else if(type=="-"){
        tr1::regex regex("[[:print:]]+");
        if(regex_match(path.begin(), path.end(), regex)){
            return(TRUE);
            }
        else{
            return(FALSE);
            }
        }
    else{
        string upper=type;
        string lower=type;
        transform(upper.begin(), upper.end(), upper.begin(), toupper);
        transform(lower.begin(), lower.end(), lower.begin(), tolower);
        tr1::regex norm_regex("[[:print:]]+\\."+type);
        tr1::regex upper_regex("[[:print:]]+\\."+upper);
        tr1::regex lower_regex("[[:print:]]+\\."+lower);
        if(regex_match(path.begin(), path.end(), upper_regex) || regex_match(path.begin(), path.end(), lower_regex) || regex_match(path.begin(), path.end(), norm_regex)){
            return(TRUE);
            }
        else{
            return(FALSE);
            }
        }
    } 
```

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:16:19.047

我现在已经通过使用 VS10 解决了这个问题。该算法在那里没有任何问题。但我认为这不是解决方案！

它可以在同一台 PC 上与 vs10 一起使用，这也告诉我这不是 PC 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:17:48.470

也许在之前包含文件路径的字符串中写入行内容不是一个好主意。尝试以下操作：

```
CString csFilePath("C:\\example.txt");
ifstream infile;
infile.open(csFilePath);

std::string strLine;
std::getline(infile, strLine); 
```

顺便问一下，您是否复制并粘贴了您的代码？正如你所写：

> 使用命名空间标准；

而不是*使用*命名空间标准；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T07:28:00.970

首先让我们简化问题：

只需硬编码路径并在新的控制台项目中运行它：（我添加了更多保护代码）

```
 String buf="the data file path";
    std::ifstream file(buf);
    if(!file.is_open())
        return FALSE;
    while(file.good())
    {
        cout << buf << endl;
        std::getline(file, buf);
        cout << buf << endl;
    }
    file.close(); 
```

结果是什么？如果问题仍然存在，您可以在第二个 cout << buf << endl 设置一个调试点，以检查是否为 buf 分配了一个值。

您还应该按以下方式保护 FileDialog：或者一旦单击“取消”，它将失败。

```
 (dlg.DoModal()==IDOK)
  FilePathName=dlg.GetPathName();
  //....other opertiaon
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T19:13:58.100

当您打开一个文件对象时，您应该在尝试使用它之前始终确保它是有效的。

```
if (file.bad())
    AfxMessageBox("Bad file");
else
{ // existing code follows 
```

PS 你有两个`file`在同一个代码块中命名的对象。请不要这样做，即使编译器能够保持正确，它也可能会造成混淆。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-27T14:18:28.620

它正在工作，但不再有效。

对于调试和发布配置，将编译标志（在项目属性 > 配置属性 > C++ > 代码生成 > 运行时库中）从`/MD`（多线程 DLL）更改为`/MDd`（多线程调试 DLL）。

这至少应该在 VisualStudio 2012 中工作。

# windows-xp - qt-sdk - 'configure' 未被识别为内部或外部命令

> ID：13451058
> 
> 赞同：2
> 
> 时间：2012-11-19T09:38:29.643
> 
> 标签：windows-xp, qt-mobility

我正在尝试安装 qt-sdk，以便可以使用 qt-mobility 标头。（在 Win xp 平台上）我下载了 exe 文件并安装了它，现在我正在尝试按照[以下](http://doc.qt.nokia.com/qtmobility/installation.html)说明进行操作：

已安装的 qt-sdk 我被困在“在 Windows 上构建” - 它说：

```
 cd c:\QtMobility\%DISTNAME%

 configure -prefix %TARGET_DIR% 
```

我是否创建了一个名为“QtMobility”的 nwe 目录，并在其中创建了一个名为 Dist 的新目录。我收到此错误消息：

C:\QtMobility\Dist>configure C:\QtSDK\Desktop\Qt\4.8.0\msvc2008 'configure' 不是内部或外部命令、可运行程序或批处理文件。

我做错了吗？多谢！

# php - Opencart：客户资料照片上传

> ID：13451059
> 
> 赞同：0
> 
> 时间：2012-11-19T09:38:46.500
> 
> 标签：php, profile, opencart, avatar

我一直在尝试找到一种将照片添加到 Opencart 中的客户资料的方法。除了这个，他们什么都有，我在任何地方都找不到怎么做。任何帮助表示赞赏。我正在使用最新版本的opencart，如果有人知道任何以前版本的这个问题也非常有帮助......

感恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T14:27:27.703

Avatars are not a common feature of shopping carts, so it is not surprising that OpenCart does not have one. Indeed, the only time I could imagine it usefully appearing would be by user reviews.

Allowing customers to upload an arbitrary image, cropping and processing it, and then displaying it next to the customer's reviews is quite a big ask. And although the extension is possible, you'd then have to police the images for genitals and other inappropriateness. Even if the only people that see this are the customer and admin, this can be a problem if you are employing admin staff who are offendable and litigious.

The simplest solution is to use [Gravatar](http://en.gravatar.com/). This takes an MD5 hash of the customer's email address and returns an avatar. For example, to add one to the admin customer report you would add to admin\view\template\report\customer_order.tpl after the line

```
<td class="left"><?php echo $customer['email']; ?></td>: 
```

the line

```
<td class="left">
<img src="http://www.gravatar.com/avatar/
<?php echo md5(strtolower(trim($customer['email']))); ?>
"></td> 
```

(You'd want to tidy up the table header rows as well to match).

Some places where you'd want to show an avatar, like the reviews page, don't already show the email. You'd therefore need to adjust the query (for example in `getReviewsByProductId` in model/catalog/review.php) so that it pulls in the user table and the email field, and also add it to the relevant controller.

That's all great for people who already have a Gravatar (usually people who blog or comment on blogs), but everyone else gets a default image. How do you get customers to upload an image?

Simple. In your FAQ, add "How do I change my avatar profile picture? We use Gravatar. Upload your picture there." or similar. People who want to update their picture will follow the instructions.

A very real benefit to this approach is that you are not delaying people from becoming customers. Cart abandonment is bad enough without asking customers to go find a picture of themselves. Indeed, you should bear in mind that some people shop online because they don't want people to see them.

So, although not literally adding user photo upload facilities to OpenCart, this approach gives you customer avatars without modifying too much code.

# java - 为什么阿拉伯字母没有插入数据库？

> ID：13451061
> 
> 赞同：0
> 
> 时间：2012-11-19T09:38:46.023
> 
> 标签：java, mysql, jsf, jsf-2, utf-8

我正在帮助我的一位朋友。他正在使用 JSF 2.0 和 mysql 创建 Web 应用程序。

在创建数据库时，他使用了以下查询。

```
CREATE DATABASE dbName DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci; 
```

到目前为止，网站运行良好。今天客户尝试输入阿拉伯语文本，他们说输出很奇怪。我的朋友所做的是将数据输入数据库后，他还在另一页上打印相同的数据说`Congratulations, XYZ ABC is added successfully`。但是他认为输出为`Congratulations, Ù?Ø¸Ø§Ù? ØªÙ?Ù?Ù?Ø© Ù?ØªÙ?Ù?Ù? ØµØ¯Ù?Ù? Ù?Ù?Ø¨Ù?Ø¦Ø© is added successfully`. 我不明白为什么当数据库字符设置正确时他会这样。

**web.xml**内容如下。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            600
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>
    <filter>
        <filter-name>restrict</filter-name>
        <filter-class>com.sac.filter.MyFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>restrict</filter-name>
        <url-pattern>*.xhtml</url-pattern>
    </filter-mapping>
    <filter>
        <filter-name>MyFacesExtensionsFilter</filter-name>
        <filter-class>org.apache.myfaces.webapp.filter.ExtensionsFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>MyFacesExtensionsFilter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>

    <servlet>
        <servlet-name>DisplayImage</servlet-name>
        <servlet-class>com.sac.databean.DisplayImage</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>DisplayImage</servlet-name>
        <url-pattern>/DisplayImage</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>SaveMyImage</servlet-name>
        <servlet-class>com.sac.databean.SaveMyImage</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>SaveMyImage</servlet-name>
        <url-pattern>/SaveMyImage</url-pattern>
    </servlet-mapping>

<!-- for not using css and js of default richfaces   -->
    <context-param>
        <param-name>org.richfaces.SKIN</param-name>
        <param-value>plain</param-value>
    </context-param>
    <context-param>
        <param-name>org.richfaces.LoadStyleStrategy</param-name>
        <param-value>None</param-value>
    </context-param>
    <context-param>
        <param-name>org.richfaces.enableControlSkinning</param-name>
        <param-value>false</param-value>
    </context-param>
<!-- for not using css and js of default richfaces   -->    

</web-app> 
```

在每个**.xhtml**页面上，他都有`<?xml version='1.0' encoding='UTF-8' ?>`

如果您需要其他任何东西，请告诉我。

* * *

## 编辑 1

在我的 JSF 过滤器中，我还添加`req.setCharacterEncoding("UTF-8");`了`doFilter()`. 我还在数据库中看到`???????????`

* * *

## 编辑 2

在 JSF 页面中，当我将Java bean 中`<h:inputText value="#{PersonalInformationDataBean.fullName}">`的值打印为m 时，我得到的输出为.`fullName``System.out.println("my name while entering is " + fullName);``my name while entering is ???????????? ????`

***这意味着输入数据时出现问题***

有人可以帮助发生什么奇怪的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:14:32.633

> *然而，他将输出视为祝贺，Ù?Ø¸Ø§Ù？ØªÙ?Ù?Ù?Ø© Ù?ØªÙ?Ù?Ù? ØµØ¯Ù?Ù? Ù?Ù?Ø¨Ù?Ø¦Ø©添加成功。我不明白为什么当数据库字符设置正确时他会这样。*

这被称为[Mojibake](http://en.wikipedia.org/wiki/Mojibake)。这不是 DB 编码问题，而是 HTTP 编码问题。像您一样设置 POST 请求字符编码确实是正确的解决方案。

* * *

> *编辑 1：在我的 JSF 过滤器中，我还添加`req.setCharacterEncoding("UTF-8");`了`doFilter()`. 还在数据库中我看到?????????????*

*当连接的双方*都**知道**自己的编码时，就会出现问号。一侧编码未涵盖的发送/检索字符将替换为问号。阿拉伯字符不会出现在 ISO-8859-1 中，因此它们被问号取代。这就是 Mojibake 的不同之处，即发送字符而不检查对方使用的编码是否真的支持该字符。您最终会得到错误编码的字符，这些字符将自身呈现为难以理解的字符序列。

在这种特殊情况下，JDBC 驱动程序本身知道它默认使用 ISO-8859-1 将字符传输到 DB，而检索到的字符是 UTF-8（MySQL JDBC 驱动程序不查看 DB表编码，即使在您的情况下它已正确设置为 UTF-8）。在将数据传输到 DB 之前，您需要明确告诉 JDBC 驱动程序使用 UTF-8 解码字符。这将作为 JDBC 连接属性来完成，这些属性在 JDBC URL 中定义为查询字符串参数，如下所示：

```
jdbc:mysql://localhost:3306/db_name?useUnicode=yes&characterEncoding=UTF-8 
```

如果您使用的是容器管理的数据源，则只需分别指定这些属性，就像您为用户名和密码所做的那样

```
useUnicode=yes
characterEncoding=UTF-8 
```

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

# ant - 我需要参数化 jenkins 作业以运行 X 次

> ID：13451062
> 
> 赞同：2
> 
> 时间：2012-11-19T09:38:47.353
> 
> 标签：ant, command-line, jenkins, jmeter

我正在使用 jmeter 工具对 N 个用户进行压力测试。

我已经使用 ant 和 jenkins 自动化了测试，我的构建文件被配置为运行一个目标，即 jmeter 脚本。

它工作正常。

现在我正在尝试对詹金斯进行参数化，即尝试在运行时传递用户数“N”有什么办法可以完成吗？请指教。

蚂蚁脚本：

```
<project basedir=".">
  <property environment="env"/>
  <property name="jmeter-home" location="D:/apache-jmeter-2.7"/>
  <path id="ant.jmeter.classpath">
    <pathelement location="${jmeter-home}/extras/ant-jmeter-1.0.9.jar" />
  </path>
  <taskdef name="jmeter" classname="org.programmerplanet.ant.taskdefs.jmeter.JMeterTask" classpathref="ant.jmeter.classpath" />
  <target name="clean">
    <delete dir="results"/>
    <delete file="jmeter.log"/>
    <mkdir dir="results/jtl"/>
    <mkdir dir="results/html"/>
  </target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:50:57.677

请参阅[https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build)。您可以为您的工作定义一个参数。然后你只需要将它传递给和 -Denv_entry=value （普通的JVM Sswitch，你可以在Jenkins的Ant step的高级设置中找到它），它可以将它传递给jmeter（见这篇文章：[http://jmeter. apache.org/usermanual/get-started.html#override](http://jmeter.apache.org/usermanual/get-started.html#override)）

编辑：您根本不在您的 ant 脚本中运行 JMeter。所以一步一步来：

1.  使用以下命令调用您的 ant 脚本：`-DTHREADS=value`
2.  Ant 脚本包含`<property environment="env"/>`正确
3.  使用您的任务调用 JMeter，并提供如下 JVM 参数：

> ```
> <jmeter
>     jmeterhome="c:\jakarta-jmeter-1.8.1"
>     testplan="${basedir}/loadtests/JMeterLoadTest.jmx"
>     resultlog="${basedir}/loadtests/JMeterResults.jtl">
>   <jvmarg value="-Xincgc"/>
>   <jvmarg value="-Xmx128m"/>
>   <jvmarg value="-DTHREADS=${env.THREADS}"/>
> </jmeter> 
> ```

然后您将在 JMeter 中拥有一个系统属性。如果您想拥有 JMeter 属性，请改用 -JTHREADS=${env.THREADS} 。

EDIT2：添加：

```
<taskdef name="jvmarg" classname="org.programmerplanet.ant.taskdefs.jmeter.Arg" classpathref="ant.jmeter.classpath"/> 
```

然后应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:35:58.867

我认为，如果您不尝试运行 Jenkins 作业 N 次，而是将此 N 参数传递到您的 ant 脚本中，这将是一种更好的方法（请参阅有关如何将参数从 jenkins 传递给 ant 的其他答案）并处理启动测试并行 N 次。

# c++ - gvim 换行应该结束当前字符串并在下一行开始一个新字符串

> ID：13451065
> 
> 赞同：4
> 
> 时间：2012-11-19T09:39:10.593
> 
> 标签：c++, editor, word-wrap, vim

我的 .gvimrc 文件中有以下行，可以在 80 个字符处自动换行。

```
set textwidth=80 
```

我还有以下几行来控制 C++ 代码缩进。

```
set smartindent
set cindent 
```

这在大多数情况下都很好用，但在输入长字符串时有一个限制。自动缩进添加的空格或制表符成为字符串的一部分。例如，换行当前执行以下操作：

```
puts("I have put `set textwidth=80` in my `.gvimrc` file to make gvim
        automatically wrap long strings like this one."); 
```

而我希望它执行以下操作：

```
puts("I have put `set textwidth=80` in my `.gvimrc` file to make gvim "
        "automatically wrap long strings like this one."); 
```

这将确保输出中没有虚假的空格，同时保持一致的代码缩进。

有没有办法配置 gvim 来做到这一点？我在互联网和 StackOverflow 上进行了搜索，但无法弄清楚如何/是否可以这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:57:47.907

`'formatoptions'`恐怕还没有内置设置。但是，可以使用 custom 自定义格式化`gq`和中断文本，尽管我已经看到到目前为止很少使用。`'textwidth'``'formatexpr'`

如果您不想尝试这样的实现，一个简单的解决方法是设置`'colorcolumn'`；该视觉帮助将帮助您记住`Enter`在达到文本宽度之前关闭字符串并按下。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T15:22:28.860

Have a look at [this](http://www.cs.swarthmore.edu/help/vim/reformatting.html).

You can use the formatoption command to somewhat solve your problem

# matlab - MATLAB：以均匀的每月间隔进行 Datetick

> ID：13451067
> 
> 赞同：3
> 
> 时间：2012-11-19T09:39:11.810
> 
> 标签：matlab

从 2008 年 1 月到 2011 年 1 月，我想每隔一个月标记我的时间序列。

**编辑：时间序列已经有一个 datenum 格式的时间组件：**

```
733408 x1
733410 x2
etc... 
```

**对于在我最初的问题陈述中没有明确说明这一点，我深表歉意。**

一个简单的每年两次的实现变得非常混乱：

```
years = [2008 2008 2009 2009 2010 2010 2011];
months = [1 7 1 7 1 7 1];
days = ones(1,7);
for k = 1:7
    dates(k) = datenum(years(k), months(k), days(k));
end
labels = datestr(dates,'mmm-yy');
set(gca,'XTick',dates);
set(gca,'XTickLabel',labels); 
```

要将其扩展到每月刻度：

```
years = [2008 ...repeat10times 2009 ...repeat10times 2010 ...repeat10times 2011]
m = 1:11; months = repmat(m,1,3)
days = ones(1:34) 
```

一定有更简单的方法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T10:14:51.100

你知道`datetick`吗？对于您的示例：

```
% date (x-data)
years = [2008 2008 2009 2009 2010 2010 2011];
months = [1 7 1 7 1 7 1];

% do plot (NOTE: datenum is vectorized!)
plot( datenum(years, months,1),  [your y-data] )

% set axis labels
datetick('x','mm-yyyy') 
```

或者，更笼统一点，

```
% generate periodic data
[years, months] = meshgrid(2008:2011, 1:12); % or whatever range you want

% do plot and set axes
plot( datenum(years(:), months(:), 1),  [your y-data] )
datetick('x','mm-yyyy') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:09:28.203

在将您的序列日期编号转换为日期之前，您需要设置轴刻度。

我只是绘制了一些随机数与日期的例子：

```
date1 = datenum([2012 01 01 00 00 00]);
date2 = now;
dateV = date1:date2; % x-axis data
y = rand(length(dateV),1); % y-axis data
hl = plot(dateV,y);
hax = get(hl, 'Parent'); % axes handle 
```

通过像这样设置轴的 XTick 属性，将为 dateV 的每 30 个元素放置刻度。您可以更改它以适合您的滴答间隔。

```
set(hax, 'XTick', [dateV(1:30:end)]); 
datetick('x', 24, 'keepticks'); 24 is a date format identifier. You can select a format from the datetick documentation. 
```

正如[datetick](http://www.mathworks.com/help/matlab/ref/datetick.html)文档指出的那样，您需要在运行 datetick 函数之前设置轴刻度。

# java - 运行时添加的 Gridview 中的新项目

> ID：13451069
> 
> 赞同：2
> 
> 时间：2012-11-19T09:39:15.917
> 
> 标签：java, android, gridview, runtime, adapter

我的购物清单应用程序有问题。[我从本教程](http://www.stealthcopter.com/blog/2010/09/android-creating-a-custom-adapter-for-gridview-buttonadapter/comment-page-1/)中实现了一个按钮适配器，我将使用它来将产品添加到列表中。我的 gridview 中的每个按钮都是一个产品，每个产品都有上下文菜单，我可以在其中添加它以列出或删除产品。

问题是用户应该能够添加新产品或类别，我不知道如何在运行时将项目添加到 gridview。我以为我可以在 c++ 中创建一些动态数组，比如列表，但我是 android 和 java 的新手，所以我不知道如何实现这样的东西。

我试图实现堆栈，但每次我尝试推送某些应用程序时都会崩溃。数组列表也是如此。

按钮适配器：

```
ButtonAdapter(Context c, ArrayList<String> array){
  mContext = c; 
  arrayInAdapter = array; } 

public int getCount() {  
    int a;
    a = arrayInAdapter.size();
 return a;  
}  

public View getView(int position, View convertView, ViewGroup parent) {  
 Button btn;  

 if (convertView == null) {  
  //if it's not recycled, initialize some attributes  
  btn = new Button(mContext);  
  btn.setLayoutParams(new GridView.LayoutParams(130, 130));  
  btn.setPadding(8, 8, 8, 8);  
 }  
 else {  
 btn = (Button) convertView;  
 }  
 btn.setText(arrayInAdapter.get(position));   
 btn.setTextColor(Color.RED);  
 btn.setBackgroundResource(R.drawable.sample_0);  
 btn.setId(position); 
 btn.setOnClickListener(new MyOnClickListener(position));

 return btn;  
} 
```

}

在网格活动中我有另一个数组列表

```
public static ArrayList<String> arrayInGrid; 
```

在 onCreate 中：

```
gridView.setAdapter(new ButtonAdapter(this,arrayInGrid )); 
```

但是当我尝试将新项目发送到阵列程序时崩溃。

```
arrayInGrid.add("new"); 
```

事实上它崩溃了

```
arrayInAdapter.size(); 
```

在按钮适配器中。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:46:57.953

您可以将动态数组中的值传递给该 GridView 的 BaseAdapter。这里有教程，希望对你有帮助。 [http://www.mkyong.com/android/android-gridview-example/](http://www.mkyong.com/android/android-gridview-example/)

# sql - 如何在插入时获取最后一行的自动增量值

> ID：13451070
> 
> 赞同：28
> 
> 时间：2012-11-19T09:39:20.797
> 
> 标签：sql, sql-server, tsql, get

我已经用谷歌搜索了这个问题一个星期，但没有任何有用的东西我认为没有使用正确的词

我正在使用带有 t-sql 的 SQL Server 2008，我需要在插入新行时优化我的功能。

我有一个表，第一列是整数自动增量类型的键，其他列仅供参考

当我们进行插入时，SQL Server 会自动增加键，我必须做一个选择最大值来获取值，所以有没有像全局变量之类的方法`@@IDENTITY`或函数来避免开始结束事务并选择最大值

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-19T09:42:23.643

使用[`SCOPE_IDENTITY`](http://msdn.microsoft.com/en-us/library/ms190315%28v=sql.100%29.aspx)：

```
-- do insert

SELECT SCOPE_IDENTITY(); 
```

这会给你：

> 插入到同一范围内的标识列中的最后一个标识值。范围是一个模块：存储过程、触发器、函数或批处理。因此，如果两条语句在同一个存储过程、函数或批处理中，则它们属于同一范围。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-15T12:10:24.227

刚刚运行代码：

```
INSERT INTO Persons (FirstName) VALUES ('Joe');
SELECT ID AS LastID FROM Persons WHERE ID = @@Identity; 
```

它也有效！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-19T10:27:08.013

最后一个自动增量值怎么样

```
SELECT IDENT_CURRENT('tableName')-IDENT_INCR('tableName'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-25T16:12:13.517

就我而言，我必须使用@@Identity，因为我正在插入视图。SCOPE_IDENTITY 似乎只适用于您明确创建的那些。

看这里：

[http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

> @@IDENTITY 将返回在当前会话中输入到表中的最后一个标识值。虽然@@IDENTITY 仅限于当前会话，但它不限于当前范围。如果您在一个表上有一个触发器导致在另一个表中创建一个身份，您将获得最后创建的身份，即使它是创建它的触发器。

# forms - 在 cakephp2 中编辑时表单验证失败

> ID：13451079
> 
> 赞同：0
> 
> 时间：2012-11-19T09:40:06.893
> 
> 标签：forms, validation, cakephp, edit

```
'employees_firstname' => array(
    'rule' => 'alphaNumeric',
    'required' => true,
    'allowEmpty' => false,
    'on' => '',
    'message' => 'This field is required'
) 
```

这是我的验证。添加时效果很好。但是当我编辑时，即使该字段具有值，也会显示验证错误。什么问题？

```
function edit_employee($employees_id)
    {
       debug($this->request->data);
        $business_accounts = $this->BusinessAccount->get_business_accounts();
        $business_domains = $this->BusinessDomain->get_business_domains();
        $designations = $this->Designation->get_designations();
        $work_locations = $this->EmployeesWorkLocation->get_worklocations();
        //$employees = $this->Employee->get_user_details();
        $employees = $this->Employee->get_employee_details($employees_id);
        $employees_details = $this->EmployeesDetail->get_employee_personal_details($employees_id);
        $countries = $this->Country->get_countries();
        $additional_data = array(
                        'business_accounts' => $business_accounts,
                        'business_domains' => $business_domains,
                        'designations' => $designations,
                        'work_locations' => $work_locations,
                        'supervisors' => $employees,
                        'countries' => $countries,
                        'employees' => $employees,
                        'employees_details' => $employees_details
                     );
        $this->set($additional_data);
        $this->set('title_for_layout', 'Calpinemate - Admin');
        $this->layout = 'admin_console';
       // echo $employees_id;
        $this->Employee->id = $employees_id;
        //$this->Employee->save($this->params['data']['Employee']);
         //print_r($this->data);
        if(!empty($this->data)){ 
            if(isset($this->params['data']['add'])){
                if($this->Employee->validates(array('fieldList' => array('employees_firstname','employees_lastname','employees_emailaddress','employees_password','employees_code','employees_mobile')))){
                    echo "IN";
                $fileOK = $this->uploadFiles('img/Employees', $this->data['File'], $this->data['Employee']['employees_code']);
                if (array_key_exists('urls', $fileOK)) {
                    $this->request->data['Employee']['employees_image'] = $fileOK['urls'][0];
                }

                $this->Employee->save($this->params['data']['Employee']);

                $this->request->data['EmployeesDetail']['employees_id'] = $this->Employee->id;
                $this->EmployeesDetail->save($this->params['data']['EmployeesDetail']);
                $this->Session->setFlash("Employee  Details Updated Successfully!");
                $this->redirect('employee');
                }
            }
            elseif(isset($this->params['data']['cancel'])){
                $this->redirect('employee');
            }
        } 
    } 
```

这是控制器中的功能

```
echo $this->Form->create('Employee', array('url' => array('controller' => 'MasterConsole', 'action' => 'edit_employee',$employees[0]['Employee']['employees_id']),'type' => 'file'));

    <div class="listing1">
         <div class="list_grid">First name</div>
         <div class="list_grid7"><?php echo $this->Form->input('employees_firstname',array('type' => 'text','label' => false,'default' => isset($employees) ? $employees[0]['Employee']['employees_firstname'] : '')); ?></div>  

</div> 
```

这是视图文件中的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:01:08.267

`'on' => ''`除非您仅指定创建或更新，否则您不需要添加。

尝试完全删除该部分。此外，请确保在编辑时将字段的数据正确传递给模型。在控制器的编辑方法中，在顶部添加一个调试以打印出数据并检查它实际上是否在正确的字段中通过：

```
debug($this->request->data); 
```

否则，请发布您的控制器的编辑方法和您的视图代码。

# android - 带有python脚本的android设备信息

> ID：13451081
> 
> 赞同：1
> 
> 时间：2012-11-19T09:40:09.670
> 
> 标签：android, python, sl4a

再会！如何使用 python 脚本从无根设备获取设备信息？据我了解，python 在 Java 中没有像 os.android.build 这样的 API。

我需要从设备获取系统信息，例如 cpu 频率、gpu 供应商和其他（例如在 Antutu 和其他基准测试中）。我知道如何使用 shell 中的 $getprop 信息以及系统文件中的 buil.prop 文件编写 python 脚本，但这还不够。我也知道如何通过安装 shell 命令和busybox 来获取这些信息，但我不应该让它们/

有什么建议吗？谢谢

# css - 为什么我在最新的 Chrome 中看不到 -webkit-persective？

> ID：13451082
> 
> 赞同：0
> 
> 时间：2012-11-19T09:40:13.747
> 
> 标签：css

问题在标题中：

HTML：

```
<div class="out">
    <div class="in anim-photo zoom">
    </div>
</div>​ 
```

CSS：

```
.in {
    background: #d00;
    width: 100px; height: 100px;
    margin: 50px auto;            
}

.out {
    border: solid 1px #e4e4e4;
    width: 200px; height: 200px; 
}

.anim-photo,
.transition {

       -moz-transition: all 1s ease 0s; /* Firefox 4-15 */
         -o-transition: all 1s ease 0s;  /* Opera 10.5–12.00 */
            transition: all 1s ease 0s, top 0, left 0;  /* Firefox 16+, Opera 12.50+ */

            -webkit-transition: all 1s ease 0s;
            -webkit-transform-style: preserve-3d;
            -webkit-perspective: 500;            

}

.zoom {
    -webkit-transform: scale(1.6) rotateY(120deg);  /* Safari 3.1+, Chrome */    
} 
```

这是我的代码：http: [//jsfiddle.net/jBmeQ/2/](http://jsfiddle.net/jBmeQ/2/)

下图显示了我的问题。

![在此处输入图像描述](../Images/87e71437cb8ac27198e8ed90ec8e56b4.png)

在右边你会看到有一个视角。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:45:24.960

`-webkit-perspective`应该在**包含**需要在 3D 中的元素的容器上。此外，`-webkit-transform-style: preserve-3d;`仅当您将子元素添加到原始容器的子元素（在本例中为红色方块的子视图）时才需要。

[http://jsfiddle.net/jBmeQ/3/](http://jsfiddle.net/jBmeQ/3/)

# c# - AddWithValue 参数为 NULL 时的异常

> ID：13451085
> 
> 赞同：100
> 
> 时间：2012-11-19T09:40:29.263
> 
> 标签：c#, .net, ado.net

我有以下代码用于指定 SQL 查询的参数。使用时出现以下异常`Code 1`；但是当我使用`Code 2`. 在`Code 2`我们有一个空检查，因此是一个`if..else`块。

例外：

> *参数化查询“(@application_ex_id nvarchar(4000))SELECT E.application_ex_id A”需要参数“@application_ex_id”，但未提供该参数。*

**代码 1**：

```
command.Parameters.AddWithValue("@application_ex_id", logSearch.LogID); 
```

**代码 2**：

```
if (logSearch.LogID != null)
{
         command.Parameters.AddWithValue("@application_ex_id", logSearch.LogID);
}
else
{
        command.Parameters.AddWithValue("@application_ex_id", DBNull.Value );
} 
```

**问题**

1.  您能否解释一下为什么它无法从代码 1 中的 logSearch.LogID 值中获取 NULL（但能够接受 DBNull）？

2.  有更好的代码来处理这个吗？

**参考**：

1.  [将 null 分配给 SqlParameter](https://stackoverflow.com/questions/4555935/how-to-assign-null-to-a-sqlparameter)
2.  [返回的数据类型因表中的数据而异](https://stackoverflow.com/questions/13306275/datatype-returned-varies-based-on-data-in-table)
3.  [从数据库 smallint 到 C# nullable int 的转换错误](https://stackoverflow.com/questions/13265704/conversion-error-from-database-smallint-into-c-sharp-nullable-int?lq=1)
4.  [DBNull 的意义何在？](https://stackoverflow.com/questions/4488727/what-is-the-point-of-dbnull/9632050#9632050)

代码

```
 public Collection<Log> GetLogs(LogSearch logSearch)
    {
        Collection<Log> logs = new Collection<Log>();

        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();

            string commandText = @"SELECT  *
                FROM Application_Ex E 
                WHERE  (E.application_ex_id = @application_ex_id OR @application_ex_id IS NULL)";

            using (SqlCommand command = new SqlCommand(commandText, connection))
            {
                command.CommandType = System.Data.CommandType.Text;

                //Parameter value setting
                //command.Parameters.AddWithValue("@application_ex_id", logSearch.LogID);
                if (logSearch.LogID != null)
                {
                    command.Parameters.AddWithValue("@application_ex_id", logSearch.LogID);
                }
                else
                {
                    command.Parameters.AddWithValue("@application_ex_id", DBNull.Value );
                }

                using (SqlDataReader reader = command.ExecuteReader())
                {
                    if (reader.HasRows)
                    {
                        Collection<Object> entityList = new Collection<Object>();
                        entityList.Add(new Log());

                        ArrayList records = EntityDataMappingHelper.SelectRecords(entityList, reader);

                        for (int i = 0; i < records.Count; i++)
                        {
                            Log log = new Log();
                            Dictionary<string, object> currentRecord = (Dictionary<string, object>)records[i];
                            EntityDataMappingHelper.FillEntityFromRecord(log, currentRecord);
                            logs.Add(log);
                        }
                    }

                    //reader.Close();
                }
            }
        }

        return logs;
    } 
```

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-11-19T09:43:33.093

烦人是不是。

您可以使用：

```
command.Parameters.AddWithValue("@application_ex_id",
       ((object)logSearch.LogID) ?? DBNull.Value); 
```

或者，使用像“dapper”这样的工具，它会为你做所有这些事情。

例如：

```
var data = conn.Query<SomeType>(commandText,
      new { application_ex_id = logSearch.LogID }).ToList(); 
```

我*很想*向 dapper 添加一种方法来获得`IDataReader`……还不确定这是否是一个好主意。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2014-08-22T00:26:13.100

`SqlParameterCollection`我发现只为处理空值编写一个扩展方法更容易：

```
public static SqlParameter AddWithNullableValue(
    this SqlParameterCollection collection,
    string parameterName,
    object value)
{
    if(value == null)
        return collection.AddWithValue(parameterName, DBNull.Value);
    else
        return collection.AddWithValue(parameterName, value);
} 
```

然后你就这样称呼它：

```
sqlCommand.Parameters.AddWithNullableValue(key, value); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-23T13:57:39.647

以防万一您在调用存储过程时这样做：我认为如果您在参数上声明默认值并仅在必要时添加它，则更容易阅读。

SQL：

```
DECLARE PROCEDURE myprocedure
    @myparameter [int] = NULL
AS BEGIN 
```

C＃：

```
int? myvalue = initMyValue();
if (myvalue.hasValue) cmd.Parameters.AddWithValue("myparamater", myvalue); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-30T20:58:14.823

一些问题，允许设置 SQLDbType

```
command.Parameters.Add("@Name", SqlDbType.NVarChar);
command.Parameters.Value=DBNull.Value 
```

您在哪里键入 SqlDbType.NVarChar。必须设置 SQL 类型。

# regex - vb.net 中的正则表达式

> ID：13451087
> 
> 赞同：0
> 
> 时间：2012-11-19T09:40:36.813
> 
> 标签：regex, vb.net

如何检查以字符串或数字开头的特定值。在这里我附上了我的代码。我收到错误，喜欢预期的标识符。

```
code
----
 Dim i As String
 dim ReturnValue  as boolean
    i = 400087
    Dim s_str As String = i.Substring(0, 1)

   Dim regex As Regex = New Regex([(a - z)(A-Z)])
    ReturnValue = Regex.IsMatch(s_str, Regex)

error 

regx is type and cant be used as an expression 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:43:26.807

你的变量是`regex`,`Regex`是变量的类型。

所以它是：

```
ReturnValue = Regex.IsMatch(s_str, regex) 
```

但是您的正则表达式也有缺陷。正在创建一个与字符、范围和空格`[(a - z)(A-Z)]`完全匹配的字符类，仅此而已。`()-az``A-Z`

在我看来，好像你想匹配字母。为此，只需使用`\p{L}`Unicode 属性，该属性将匹配任何语言中的字母字符。

```
Dim regex As Regex = New Regex("[\p{L}\d]") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:44:42.187

检查字符串是否以**字母**或**数字开头**：

```
ReturnValue = Regex.IsMatch(s_str,"^[a-zA-Z0-9]+") 
```

正则表达式解释：

```
^           # Matches start of string
[a-zA-Z0-9] # Followed by any letter or number
+           # at least one letter of number 
```

[在这里](http://rubular.com/r/M4Y7ZHKme1)查看它的实际应用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T09:43:45.807

也许你的意思是

```
Dim _regex As Regex = New Regex("[(a-z)(A-Z)]") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T09:44:01.043

> ```
> Dim regex As Regex = New Regex([(a - z)(A-Z)])
> ReturnValue = Regex.IsMatch(s_str, Regex) 
> ```

注意大小写差异，使用`regex.IsMatch`. 您还需要引用正则表达式字符串：`"[(a - z)(A-Z)]"`。

* * *

最后，该正则表达式没有意义，您匹配字符串中任何位置的任何字母或左/右括号。

要在字符串的开头进行匹配，您需要包含 start anchor `^`，例如：`^[a-zA-Z]`匹配字符串开头的任何 ASCII 字母。

# javascript - 经过实战考验的 jquery / javascript 下拉菜单

> ID：13451089
> 
> 赞同：0
> 
> 时间：2012-11-19T09:40:48.170
> 
> 标签：javascript, jquery, drop-down-menu, cascadingdropdown

下拉菜单是一种常见且几乎无处不在的 UI 元素，然而，我发现很难“选择一个”。在开始我自己的滚动和“战斗测试”的漫长道路之前，我想把它放在那里，看看其他人在使用什么。

jquery 或 javascript 下拉菜单最流行的解决方案是什么？

应该是轻量级的、易于定制的和正确跨浏览器兼容的，并且至少可以正常运行到 IE8。

我过去尝试和使用过的具有满足此标准的最佳体验的产品包括：

*   超级鱼 - [http://users.tpg.com.au/j_birch/plugins/superfish/](http://users.tpg.com.au/j_birch/plugins/superfish/)
*   动态驱动平滑菜单[http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm](http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm)

澄清：专门寻找类似于上述示例的多级下拉菜单。如果您愿意，我也愿意“避免这些他们是狗屎”类型的答案。

PS：请避免在第一次在 google 上搜索时出现的 500 条下拉菜单文章之一中添加 5 条，我想知道您正在使用什么，您喜欢和讨厌哪些下拉菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:43:56.150

你试过这可能是这可以给你你想要的

[http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:57:45.263

我个人使用过 SuperFish，它是标准形式，它不是太漂亮，但经过相当多的调整，我发现它看起来相当不错。

然后使用这样的东西：[http ://snook.ca/archives/javascript/jquery-bg-image-animations](http://snook.ca/archives/javascript/jquery-bg-image-animations)

演示：[http ://snook.ca/technical/jquery-bg/](http://snook.ca/technical/jquery-bg/)

可以让他们看起来很酷！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T10:21:52.517

经过大量的研究和混乱，老实说，我对这个领域的选择感到相当失望，有几个选择，但正如上面评论的那样，滚动我自己的似乎是最好的前进方式。

# c++ - 是否有 MSG_MORE 等价物 ?

> ID：13451093
> 
> 赞同：2
> 
> 时间：2012-11-19T09:40:57.187
> 
> 标签：c++, sockets, winsock

在我的套接字 API 的 c++ 包装器中，我使用`send`and`recv`函数，因为它们具有（几乎）相同的签名。Linux 提供了一个 MSG_MORE 标志，它表示在发送所有部分消息之前不会发送消息。windows提供相同的功能吗？MSDN 文档告诉我只有两个标志，没有 MSG_MORE。但我不敢相信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:54:38.480

`WSASend()`和`WSARecv()`，和 的winsock 等价物`send()`，`receive()`有一个`MSG_PARTIAL`做同样事情的标志。一般来说，winsock 函数比 Windows 上的套接字 API 具有更多的功能。

# android - 在 ios 和 android 上查看 localStorage

> ID：13451096
> 
> 赞同：0
> 
> 时间：2012-11-19T09:41:08.683
> 
> 标签：android, ios, cordova, jquery-mobile, webview

是否可以通过此应用以其他方式访问我的应用的 localStorage？

我正在制作一个使用 localStorage 的应用程序，我想确保没有人可以访问我的数据。

感谢您的关注和解答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:59:35.800

Phonegap 应用程序在 UIWebView 上执行，它使用 WebKit 引擎处理所有与 Web 相关的内容。所有导航数据，例如本地存储、缓存等都存储在应用程序的数据存储（沙箱）中，因此无法从任何其他应用程序访问，除非您提供这样做的方法，即：共享钥匙串, URI 等等。

这是内置在 iOS 安全系统中的，并且没有通过公共 APIS 访问数据的官方方式（这并不意味着它是完全安全的）。如果您要存储不希望被访问的敏感信息，则应始终对此类数据进行加密。如果您需要有关该主题的更多信息，请参阅此[文档。](https://github.com/phonegap/phonegap/wiki/Platform-Security)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:59:48.077

默认情况下，除了您的应用程序本身，没有人可以访问存储在您的应用程序中的数据。在 info.plist 文件中，您可以添加一个条目

`Application supports iTunes file sharing`

如果您在 info.plist 中添加此字段并将其设置为 YES，则只有在这种情况下，用户才能通过将设备连接到 iTunes 来访问存储在文档目录中的数据。

# yacc - 在 yacc 中使用递归时如何检查值？

> ID：13451101
> 
> 赞同：0
> 
> 时间：2012-11-19T09:41:32.227
> 
> 标签：yacc, lex

我在 yacc 中使用递归，我想检查递归规则解析的所有值。我的 yacc 规则是

```
%{

#include<stdio.h>

.

.

.

%}

%%

abc:ABC expr

;

expr:VALUE','expr

|VALUE

;

%% 
```

如果我有这样的声明

```
ABC 1,2,3,4 
```

它被解析。
我想检查通过**expr**解析的所有数字 的总和是否等于某个值，比如 10
我该如何检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:44:04.993

**编辑：**

您可以计算解析的值并使用如下代码保持它们的运行总数：

```
%{

#include<stdio.h>
int count;

.

.

.

%}

%%

abc: { count = 0; } ABC expr { printf("count: %d; sum: %d\n", count, $2); }

;

expr: VALUE ',' expr { $$ = $1 + $3; }

| VALUE { $$ = $1; count++; }

;

%% 
```

# iphone - 提高 UIWebview 加载性能

> ID：13451102
> 
> 赞同：1
> 
> 时间：2012-11-19T09:41:35.283
> 
> 标签：iphone, performance, image, uiwebview, frame

在我的 iPhone 应用程序中，我使用 UIwebview 仅执行 javascript。webview 总是隐藏的，不需要交互。我正在寻找改善加载时间的技巧，以便我的应用程序可以变得更具响应性。根据您的经验：

*   以 1x1 像素设置 webview 框架可以提高性能吗？我假设这里的图像渲染和其他 UI 东西可以被忽略？

*   将 alpha 设置为 0 可以提高性能？我假设这里的图像渲染和其他 UI 东西可以被忽略？

*   禁用“缩放页面以适应”、链接、电话检测可以提高性能？

*   防止图像和 CSS 加载可能会有所帮助，但我仍然不知道如何做到这一点。

任何提示非常感谢谢谢！Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:37:53.093

为了防止在 web 视图中加载图像，我使用了这个[http://www.cocoawithlove.com/2010/09/substituting-local-data-for-remote.html](http://www.cocoawithlove.com/2010/09/substituting-local-data-for-remote.html)

我用存储在本地包中的 1 像素图像替换 web 视图中的所有大图像。它工作正常！

# javascript - Chrome 和 Safari 上的菜单淡出仍处于悬停状态

> ID：13451103
> 
> 赞同：2
> 
> 时间：2012-11-19T09:41:37.300
> 
> 标签：javascript, jquery, html, css

我正在开发一个新的 Joomla 2.5 网站，我必须在菜单上为 li 的第一级实现淡入淡出效果。

网址：http: [//goo.gl/Eu9Mt](http://goo.gl/Eu9Mt)

我添加了此效果，但仅在“Google Chrome”和“Safari”上存在问题。当我将鼠标悬停在子菜单上并将鼠标移开但不悬停父菜单时，淡入淡出效果仍然存在，但是当我将鼠标移开并且我悬停的最后一项是父项时，淡入淡出效果正确执行。

这是我的 jQuery 代码：

```
(function($){
    $(document).ready(function () {
    $('#ja-mainnav ul.level0 li').not('#ja-mainnav ul.level0 li ul li').append('<div class=\'hover\'><div><\/div><\/div>');
    $('#ja-mainnav ul.level0 li').not('#ja-mainnav ul.level0 li ul li').hover(
        function() {
            $(this).children('div').stop(true, true).fadeIn('1000');
        },
        function() {
            $(this).children('div').stop(true, true).fadeOut('fast');
    }).click (function () {
        $(this).addClass('selected');
    });
});
})(jQuery); 
```

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:30:06.567

在你的CSS上添加这个：

```
#ja-mainnav li.haschild .hover {
   background-image: none;
 }

#ja-mainnav li.haschild-over.over .hover {
   background-image: url("../../images/nav/menu_over.gif");
 }

 #ja-mainnav li.haschild .hover div {
   background-image: none;
 }

 #ja-mainnav li.haschild-over .hover div {
   background-image: url("../../images/nav/menu_overspan.gif");
 } 
```

要使用纯 css 添加过渡，您可以将其应用于悬停阶段（例如）：

```
 -webkit-transition: all 0.3s ease-out;  /* Safari 3.2+, Chrome */
 -moz-transition: all 0.3s ease-out;  /* Firefox 4-15 */
 -o-transition: all 0.3s ease-out;  /* Opera 10.5–12.00 */
 transition: all 0.3s ease-out;  /* Firefox 16+, Opera 12.50+ */ 
```

恐怕没有 IE 支持

希望这可以帮助

# c# - 嵌套用户控件的数据上下文

> ID：13451115
> 
> 赞同：1
> 
> 时间：2012-11-19T09:41:55.157
> 
> 标签：c#, wpf, mvvm, ninject, caliburn

背景 ：-

我有一个 wpf 视图，其中包含一个组合框，该组合框由使用 caliburn micro/ninject 和 mvvm 模式的视图模型填充；此视图还包含一个堆栈面板区域。当用户从组合框中选择适当的选项时，我将适当的用户控件插入到堆栈面板中，向用户呈现到相关显示的无缝过渡。

显示在堆栈面板中的每个“嵌套”用户控件都有自己的视图模型，由 caliburn micro 自动关联。

问题 ：-

“嵌套”用户控件绑定都尝试引用父视图模型，而不是专门与它们关联的视图模型。

最初，我可以通过指定来解决这个问题：-

```
<UserControl.DataContext>
    <vm:UserControlSpecificViewModel/>
</UserControl.DataContext> 
```

但这需要视图模型中的无参数构造函数，但我需要能够将参数传递给此视图模型，以便 Ninject 可以注入诸如 EventAggregator 之类的对象。

由于我对 WPF 还很陌生，所以在圆圈中四处走动，因此将不胜感激。

谢谢。

詹姆士。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:17:39.437

解决您的问题的一种方法可能是在代码中初始化您的视图模型并调用适当的构造函数。如果您不喜欢 WPF 应用程序中的代码，那么我想您可能只是将视图模型绑定到`IEventAggregator`对象。

XAML：

```
<UserControl1 x:Name="myUserControl">
</UserControl> 
```

代码隐藏：

```
public MainWindow() // Constructor for window
{
    InitializeContext();
    MyViewModel vm = new MyViewModel(...);
    myUserControl.DataContext = vm;
} 
```

# html - 引导响应列折叠

> ID：13451119
> 
> 赞同：3
> 
> 时间：2012-11-19T09:42:10.617
> 
> 标签：html, css, twitter-bootstrap, responsive-design

该应用程序需要具有响应性，并且在其中一个页面上它具有使用 span4 x3 的三列布局。

一切正常，但我只是对 iPad 尺寸调整时的响应能力有疑问。列从 3 直接变为 1，列从 3 折叠到 2 列并最终变成单列布局不是更有意义吗？

我是否遗漏了文档中的某些内容，或者这是否按预期工作？但是，如果可能的话，我希望它在开始崩溃时进入两列。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T11:36:45.840

Bootstrap 正在按预期工作。您可以覆盖这种行为思想，例如为 ipad 创建自定义响应式设计。像这样的东西：

```
/* Portrait tablet to landscape and desktop */
    @media (min-width: 768px) and (max-width: 979px) { ... }

/* Landscape phone to portrait tablet */
    @media (max-width: 767px) { ... } 
```

我不建议您直接覆盖引导程序 .less，只需创建一个侧面版本并`@import`在您的 .less 文件上使用

希望这可以帮助。

# jquery - 选择具有特定子层次结构的节点

> ID：13451121
> 
> 赞同：-2
> 
> 时间：2012-11-19T09:42:12.923
> 
> 标签：jquery

我想编写一个匹配一组 div 节点的 jQuery 选择器（下面的粗线）：

*   **class = 的所有`div`节点`.link`**
    *   who 包含一个`div`节点，其中 class =`.entry`
        *   who 包含一个`p`节点，其中 class =`.title`
            *   who 包含一个以`a`href 开头的节点`http://i.imgur.com/`

（点击下图查看完整尺寸。要测试内容，请访问[http://reddit.com](http://reddit.com)并使用 Firebug（已加载 jQuery））： [![包含部分 Reddits DOM 的 Firebug 屏幕截图](../Images/cb2732980e1e12da87da49d599c51735.png)](https://i.stack.imgur.com/FDD65.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:48:23.830

您可以使用`has`方法和属性`starts with`选择器。

```
$('div.link div.entry').has('p.title:has(a[href^="http://i.imgur.com/"])'); 
```

[编辑：]

或`filter`方法：

```
var $entries = $('div.link').filter(function() {
    return $('p.title:has(a[href^="http://i.imgur.com/"])', this).length
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:45:14.027

```
$('div.link').has('div.entry:has(p.title:has(a[href^="http://i.imgur.com/"]))'); 
```

编辑：实际上`:has`不是`:contains`（刚刚看到未定义的答案）

# c# - 在jqgrid中添加新行并排序

> ID：13451128
> 
> 赞同：0
> 
> 时间：2012-11-19T09:42:33.533
> 
> 标签：c#, asp.net-mvc, razor, jqgrid

我有一个具有日期选择器控件和文本列的网格。我可以使用模态对话框添加数据并将其保存到网格并将其传递给我的服务器端代码以用于保存/编辑目的。

问题：

我不确定如何对添加到客户端的记录进行排序。我见过一个示例，其中有内联编辑和排序，如此[处所示](http://www.ok-soft-gmbh.com/jqGrid/SortingDuringInlineOrCellEditing.htm)。虽然我还没有看到任何处理添加新行和在客户端对保存的数据进行排序的东西。

我用过 loadonce:true

正如 Oleg 所提到的，我已经使用[这种](https://stackoverflow.com/questions/5611065/adding-new-row-to-jqgrid-using-modal-form-on-client-only)方法在客户端添加记录和编辑记录。

# xml - 如何在循环（xsl）中获取当前变量值？

> ID：13451135
> 
> 赞同：1
> 
> 时间：2012-11-19T09:42:51.380
> 
> 标签：xml, xslt

我只想在`,`需要时添加''

我检查`<xsl:when test="$myvar!=''">`所以它不会像：

```
,one,two,three 
```

但会 `one,two,three`改为

但它说

> 变量 $myvar 尚未声明；

```
<xsl:variable name="myvar">
    <xsl:for-each select="$header/Packaging[@type='european']/UPCPackagingLevelCode">
        <xsl:choose>
            <xsl:when test="$myvar!=''">
                <xsl:value-of select="concat(',',.)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="."/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:for-each>
</xsl:variable> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:02:20.583

您确实在尝试在声明变量之前使用它。您指的是变量声明正文中的**$myVar**。**$myVar直到最后关闭****xsl:variable**之后才会真正声明

 **在这种情况下，您需要解决的问题是使用**position**函数来确定您是否位于第一个**UPCPackagingLevelCode**元素上。

所以，而不是这样做......

```
<xsl:when test="$myvar!=''"> 
```

做这个...

```
<xsl:when test="position() > 1"> 
```

实际上，您可以稍微简化一下，使用**xsl:if**代替**xsl:choose**

```
<xsl:if test="position() > 1">
    <xsl:text>,</xsl:text>
</xsl:if>
<xsl:value-of select="." /> 
```

如果您使用的是 XSLT2.0，您可以将整个事情简化为

```
<xsl:variable name="myvar">
   <xsl:value-of select="$header/Packaging[@type='european']/UPCPackagingLevelCode"
       separator="," />
</xsl:variable> 
```**

# jsp - 如何使用 Java 中的 Servlet 上下文侦听器发送自动电子邮件。并且邮件应该在tomcat服务器启动时在后台发送

> ID：13451137
> 
> 赞同：1
> 
> 时间：2012-11-19T09:42:52.690
> 
> 标签：jsp, servlets

我正在尝试使用 Java 中的 Servlet Context Listener 发送自动邮件。我希望在 tomcat 服务器启动时完成此操作。我在 web.xml 中写了以下内容

```
<listener>
    <listener-class>com.ServletListenerTimmer</listener-class>
</listener> 
```

在 ServletListenerTimmer 中，我放置了以下代码

```
package com;
import java.io.IOException;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Calendar;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
public String date,name,month,email;
public class ServletListenerTimmer implements ServletContextListener {

public void contextInitialized(ServletContextEvent event) {

new SendReport(event.getServletContext()), 0, 1 * 1000);

}
public void contextDestroyed(ServletContextEvent event) {

}
}
public class SendReport extends TimerTask {

private ServletContext context = null;
public SendReport(ServletContext context) {
this.context = context;
}
public void run() {
Calendar cal = Calendar.getInstance();
int sysdate=cal.get(Calendar.Date);
int sysmonth=cal.get(Calendar.Month);
sysmonth+=11;
Connection con=null;
Statement st=null;
ResultSet rs=null;
boolean f=false;

try{  

    Class.forName("com.mysql.jdbc.Driver").newInstance();  
    String connectionURL = "jdbc:mysql://localhost:1234/email"; 
    con=DriverManager.getConnection(connectionURL, "root", "root");  
    st=con.createStatement();  
    String sql = "SELECT * FROM emp"; 
    rs = st.executeQuery(sql); 
while(rs.next())
{
    name=rs.getString(2);
    date=rs.getString(3);
    month=rs.getString(4);
    email=rs.getString(6);
    if(date==sysdate && month==sysmonth)
    {
doReportTask();// you can write your sendmail task there
    }
}
}
} else {
context.log("the prevenient task is still running!");
}
}

 public void doReportTask()
{
String result;
final String username = "kavithagowda15@gmail.com";
 final String password = "Kavitha9480317174";
// Recipient's email ID needs to be mentioned.

String cc = "kruthi@corasent.com";
// Sender's email ID needs to be mentioned
String from = "kavithagowda15@gmail.com";

// Assuming you are sending email from localhost
String host = "localhost";

// Get system properties object
Properties properties = new Properties();
properties.put("mail.smtp.auth", "true");
properties.put("mail.smtp.starttls.enable", "true");
properties.put("mail.smtp.host", "smtp.gmail.com");
properties.put("mail.smtp.port", "587");

// Get the default Session object.
Session mailSession = Session.getInstance(properties,new javax.mail.Authenticator() {
    protected PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(username, password);
    }
  });

 try{
   Message message = new MimeMessage(mailSession);
    message.setFrom(new InternetAddress(from));
    message.setRecipients(Message.RecipientType.TO,
        InternetAddress.parse(email));

    // Add to Cc: header
    message.setRecipients(Message.RecipientType.CC, InternetAddress.parse(cc));
    message.setSubject("Testing Subject");
    message.setText("Dear " +name +","
        + "\n\n No spam to my email, please!");

    Transport.send(message);

    System.out.println("Done");
}catch (MessagingException mex) {
  mex.printStackTrace();
  result = "Error: unable to send message....";
}
}
} 
```

即使那样它也不起作用，我不知道问题是什么。请在这件事上给予我帮助

# javascript - 注入文本后检测窗口是否太宽

> ID：13451142
> 
> 赞同：0
> 
> 时间：2012-11-19T09:42:58.930
> 
> 标签：javascript, jquery, javascript-events

窗口更改时是否会触发跨浏览器窗口更改事件？我想要做的是在注入文本后检测窗口是否太宽：

HTML页面是空白的，然后我注入这个

```
$("body").append("cdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscscdscsdcsdcsdcsdcscs");` 
```

页面太宽，我想触发一个事件，所以我尝试了这个，但它不起作用？

```
$(window).change(function () {
   alert('test');
    //is the window too wide then --------- do this 
```

});

我怎样才能解决这个问题？

# php - javascript在php循环中引用输入ID并将值传递回相同的输入ID

> ID：13451145
> 
> 赞同：1
> 
> 时间：2012-11-19T09:43:15.840
> 
> 标签：php, javascript, mysql, loops

我有一个表单，它本质上是一个自动完成输入框。我可以让它完美地适用于单个文本框。我需要做的是使用 php for 循环创建唯一的输入框。这将使用计数器 $i 给每个输入框一个唯一的名称和 ID。

问题是输入框的唯一值需要传递给javascript。这会将输入的数据传递给外部 php 页面并返回 mysql 结果。

如前所述，我在单个输入框中工作，但需要帮助将正确的值传递给 javascript 并将其返回到正确的输入框。

**工作解决方案的现有代码（仅第一行有效，所有其他行更新第一行输入框）**

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    function lookup(inputString) {
        if(inputString.length == 0) {
            // Hide the suggestion box.
            $('#suggestions').hide();
        } else {
            $.post("autocompleteperson.php", {queryString: ""+inputString+""}, function(data){
                if(data.length >0) {
                    $('#suggestions').show();
                    $('#autoSuggestionsList').html(data);
                }
            });
        }
    } // lookup

    function fill(thisValue) {
        $('#inputString').val(thisValue);
        setTimeout("$('#suggestions').hide();", 200);
    }
</script>
</head>
<body>
<form name="form1" id="form1" action="addepartment.php" method="post">
<table>
<?  for ( $i = 1; $i <=10; $i++ ) { ?>
    <tr>
        <td> <? echo  $i; ?></td>
        <td>
            <div>
                <input type="text" size="30" value="" id="inputString" onkeyup="lookup(this.value);" onblur="fill();" />
            </div>
            <div class="suggestionsBox" id="suggestions" style="display: none;">
                <img src="upArrow.png" style="position: relative; top: -12px; left: 20px;" alt="upArrow" />
            <div class="suggestionList" id="autoSuggestionsList">
                &nbsp;
            </div>
            </div>  
        </td>
    </tr>
<?  }   ?>
</table>
</body>
</html> 
```

**autocompleteperson.php 的代码是：**

```
$query = $db->query("SELECT fullname FROM Persons WHERE fullname LIKE '$queryString%' LIMIT 10");
if($query) {
    while ($result = $query ->fetch_object()) {
        echo '<li onClick="fill(\''.$result->fullname.'\');">'.$result->fullname.'</li>';
    }
} 
```

为了让它适用于所有行，我在每个文件名中包含了计数器 $i，如下所示：

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    function lookup(inputString<? echo  $i; ?>) {
        if(inputString<? echo  $i; ?>.length == 0) {
            // Hide the suggestion box.
            $('#suggestions<? echo  $i; ?>').hide();
        } else {
            $.post("autocompleteperson.php", {queryString: ""+inputString<? echo  $i; ?>+""}, function(data){
                if(data.length >0) {
                    $('#suggestions<? echo  $i; ?>').show();
                    $('#autoSuggestionsList<? echo  $i; ?>').html(data);
                }
            });
        }
    } // lookup

    function fill(thisValue) {
        $('#inputString<? echo  $i; ?>').val(thisValue);
        setTimeout("$('#suggestions<? echo  $i; ?>').hide();", 200);
    }
</script>
</head>
<body>
<form name="form1" id="form1" action="addepartment.php" method="post">
<table>
<?  for ( $i = 1; $i <=10; $i++ ) { ?>
    <tr>
        <td> <? echo  $i; ?></td>
        <td>
            <div>
                <input type="text" size="30" value="" id="inputString<? echo  $i; ?>" onkeyup="lookup(this.value);" onblur="fill();" />
            </div>
            <div class="suggestionsBox" id="suggestions<? echo  $i; ?>" style="display: none;">
                <img src="upArrow.png" style="position: relative; top: -12px; left: 20px;" alt="upArrow" />
            <div class="suggestionList" id="autoSuggestionsList<? echo  $i; ?>">
                &nbsp;
            </div>
            </div>  
        </td>
    </tr>
<?  }   ?>
</table>
</body>
</html> 
```

The autocomplete suggestion works (although always shown on first row) but when selecting the data always returns to row 1, even if input was on row 5\. I have a feeling this has to do with the fill() but not sure? 是因为自动完成页面代码吗？或者引用 ThisValue 的填充是否与它有关。

此页面的示例（如上）可以在[这里找到](http://www.shedatabase.co.za/versionfour/configdept2.php)

感谢您的帮助，非常感谢。

**更新-LOLO**

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    function lookup(i, inputString) {
        if(inputValue.length == 0) {
            // Hide the suggestion box.
            $('#suggestions' + i).hide();
        } else {
            $.post("autocompleteperson.php", {queryString: ""+inputString+""}, function(data){
                if(data.length >0) {
                    $('#suggestions' + i).show();
                    $('#autoSuggestionsList' + i).html(data);
                }
            });
        }
    } // lookup

    function fill(i, thisValue) {
        $('#inputString' + i).val(thisValue);
        setTimeout("$('#suggestions' + i).hide();", 200);
    }
</script>
</head>
<body>
<form name="form1" id="form1" action="addepartment.php" method="post">
<table>
<?  for ( $i = 1; $i <=10; $i++ ) { ?>
    <tr>
        <td> <? echo  $i; ?></td>
        <td>
            <div>
                <input type="text" size="30" value="" id="inputString<?php echo $i; ?>" onkeyup="lookup(this.value);" onblur="fill();" />
            </div>
            <div class="suggestionsBox" id="suggestions<? echo  $i; ?>" style="display: none;">
                <img src="upArrow.png" style="position: relative; top: -12px; left: 20px;" alt="upArrow" />
            <div class="suggestionList" id="autoSuggestionsList<? echo  $i; ?>">
                &nbsp;
            </div>
            </div>  
        </td>
    </tr>
<?  }   ?>
</table>
</body>
</html> 
```

谷歌浏览器发现以下错误：

第一行输入，第二行失去焦点 ![图片](../Images/e44ab29e7f09921cde388937982015a9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:50:24.030

问题在于您的代码是否`ID`对所有文本框和`DIV`for 循环中的每个文本框都具有相同的

```
<input type="text" size="30" value="" id="inputString" onkeyup="lookup(this.value);" onblur="fill();" /> 
```

它应该是独一无二的，就像这个编辑一样。

```
<input type="text" size="30" value="" id="inputString<?php echo $i; ?>" onkeyup="lookup(this.value);" onblur="fill();" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:56:51.237

您不能将 JS 与 PHP 混合使用。PHP 是一种服务器端语言，你可以用它来渲染动态 JS，但是在它渲染之后你就不能在 JS 中使用 PHP。首先你应该改变你的 JS 函数，我建议添加参数，比如`i`它将包含输入数字：

```
<script type="text/javascript">
    function lookup(i, inputString) {
        if(inputString.length == 0) {
            // Hide the suggestion box.
            $('#suggestions' + i).hide();
        } else {
            $.post("autocompleteperson.php", {queryString: ""+inputString+""}, function(data){
                if(data.length >0) {
                    $('#suggestions' + i).show();
                    $('#autoSuggestionsList' + i).html(data);
                }
            });
        }
    } // lookup

    function fill(i, thisValue) {
        $('#inputString' + i).val(thisValue);
        setTimeout("$('#suggestions" + i + "').hide();", 200);
    }
</script> 
```

然后更改此函数的调用并提供编号：

```
<input type="text" size="30" value="" id="inputString<? echo  $i; ?>" onkeyup="lookup(<? echo $i; ?>, this.value);" onblur="fill(<? echo $i; ?>);" /> 
```

这应该足够了。

# java - 在 Java 中使用本地化格式化时间间隔

> ID：13451151
> 
> 赞同：2
> 
> 时间：2012-11-19T09:43:55.560
> 
> 标签：java, time

我们在数据库中存储了以秒为单位的间隔（两个 oracle 时间戳之间的经过时间），我们在前端使用 Java 对其进行格式化。

我们要在报告中实现的是“HH:MM”或“HH:MM:SS”形式的格式，时间分隔符“:”本地化为日期和时间信息，即'.'。意大利语和 ':' 英语。

不幸的是，与**日期相关的格式化类**（如 SimpleDateFormat）不起作用**，因为我们可以预期持续时间超过 24 小时。我们**也不想使用 3rdy 方库**。

你知道我们如何解决这个问题吗？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:47:20.460

如果您想要超过 24 小时，您可以单独打印。

```
int hour = time / 3600000;
String duration = time + new SimpleDateFormat(":mm:ss").format(new Date(time)); 
```

要支持其他语言环境，您可以执行这个更复杂的示例。

```
int hour = time / 3600000;
String duration = hour
                + DateFormat.getDateInstance(DateFormat.MEDIUM, locale)
                            .format(new Date(time % 3600000).substring(1); 
```

这将做的是使用特定于语言环境的格式作为小时+分钟+秒的最后一位数字，并在小时的其他数字前面加上。注意：这不适用于负数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-14T12:07:45.797

You can construct a date object, say "2000-01-01", then add your seconds to it. Then you can use this to extract the localized version of the time:

```
DateFormat format = DateFormat.getTimeInstance(DateFormat.MEDIUM, locale);
String formatted_time_part = format.format(some_date_object); 
```

Finally you still need to add elapsed days! I'm affraid that localization of long intervals (days, months, years, centuries) has no corresponding API in Java but I might be wrong. So you will have to figure out that for yourself.

# sql-server - SQL Server 上的 SQLite 链接服务器

> ID：13451153
> 
> 赞同：0
> 
> 时间：2012-11-19T09:43:57.367
> 
> 标签：sql-server, sqlite

我在 SQL Server 2008 上有一个 SqlLite 链接服务器。

我需要将图像列从 SQL Server 导入我的 SQLite 数据库。

那可能吗？

如果是的话，我需要什么样的 SQLite 列？

我需要转变......我认为

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:37:35.077

SQLite 中等效的图像列将是`BLOB`.

您可以通过编写连接到 SQL Server 和 SQLite 数据库的脚本来完成导入任务，然后从其中读取数据并将其插入到另一个中。

插入数据时，请务必使用准备好的语句并将变量绑定到正确的数据类型。例如，如果使用 Perl，请使用`SQL_BLOB`绑定：

```
use DBI qw(:sql_types);
my $dbh = DBI->connect("dbi:SQLite:my.db");
my $blob = `cat foo.jpg`; # you should read it from SQL Server here
my $sth = $dbh->prepare("INSERT INTO mytable VALUES (?)");
$sth->bind_param(1, $blob, SQL_BLOB);
$sth->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:02:21.447

来自：[这里](http://www.sqlite.org/datatype3.html)

> *   无效的。该值为 NULL 值。
>     
>     
> *   整数。该值是一个有符号整数，根据值的大小存储在 1、2、3、4、6 或 8 个字节中。
>     
>     
> *   真实的。该值是一个浮点值，存储为一个 8 字节的 IEEE 浮点数。
>     
>     
> *   文本。该值是一个文本字符串，使用数据库编码（UTF-8、UTF-16BE 或 UTF-16LE）存储。
>     
>     
> *   斑点。该值是一团数据，完全按照输入的方式存储。

并且，来自：[这里](http://msdn.microsoft.com/en-us/library/ms187993.aspx)

> **图像：**从 0 到 2^31-1 (2,147,483,647) 字节的可变长度二进制数据。

我想 BLOB 应该是你需要的类型

编辑：

顺便提一下“图像”类型：

> **重要的**
> 
> 在 MicrosoftSQL Server 的未来版本中将删除 ntext、text 和 image 数据类型。避免在新的开发工作中使用这些数据类型，并计划修改当前使用它们的应用程序。请改用 nvarchar(max)、varchar(max) 和 varbinary(max)。

# javascript - 手动启动引导工具提示

> ID：13451158
> 
> 赞同：4
> 
> 时间：2012-11-19T09:44:21.360
> 
> 标签：javascript, html, twitter-bootstrap

使用引导弹出框，您可以控制何时在任何元素上隐藏和显示它们

```
<span id="span">Click me</span>

<script>
$('#span').click(function(){
    $(this).popover({
        title: 'some title',
        content: 'nice popover',
        trigger: 'manual',
        placement:'top',
        html: true
    }).popover('show');
    clickedAway = false
    isVisible = true
});
$(document).click(function() {
    if(isVisible & clickedAway){
        $('#span').popover('hide')
    isVisible = clickedAway = false
    }else{
    clickedAway = true
    }
});
</script> 
```

如何使用引导工具提示完成相同的操作？弹出框和工具提示的区别似乎是工具提示是在 DOM 加载时启动的，而弹出框可以从事件侦听器手动启动。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T09:48:05.123

据我了解，您可以致电：

```
$('#id').tooltip({
    ...config...
});

$('#id').tooltip('show'); 
```

在任何时候？

# javascript - 在使用 Form.Request 将数据发送到服务器之前访问数据？

> ID：13451159
> 
> 赞同：0
> 
> 时间：2012-11-19T09:44:20.470
> 
> 标签：javascript, forms, mootools

有没有办法在使用 Form.Request 将其发送到服务器之前访问整个数据数组/对象（其中包含所有数据表单输入字段等）？我知道有一个 extraData 选项允许您传递其他数据，但我想访问实际的表单数据并对其进行一些操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:46:51.877

*在*被发送到服务器之前？我不完全确定，`send`附加到`Form.Request`表单本身和数据的方法发送，但这可能是在请求已经被触发之后。

我倾向于不使用`Form.Request`，正是因为我必须进行这些表单操作等。

我没有使用`Form.Request`类，而是根据需要简单地遍历表单的输入。

例如

```
<form id="foobar">
    <input type="text" id="lorem" />
    <select id="ipsum">
        <option>...
    </select>
</form>
<script>
    var formValues = document.id('foobar').getElements('input, select');
</script> 
```

# c++ - 在“.rodata”部分中引用

> ID：13451160
> 
> 赞同：2
> 
> 时间：2012-11-19T09:44:22.100
> 
> 标签：c++, linux, linker

嘿朋友们
，我遇到了一个严重的链接错误，我遇到了这样的错误`referenced in section .rodata' of xxx defined in discarded section .text._xxx.`

这就是我编译程序的方式

```
 g++  main.o CPQENReportBB1.o CPQENReportBB2.o CPQ10minRecord.o  PQ10minconfiguration.o  ENReportConfig.o CPQFreeRecording.o CPQFreeHistogramReport.o 
```

我有 8 个文件，它正在正确编译，但是在链接时我得到了前面提到的错误。
（我使用的是 g++ 3.4.3 版）
在两个文件中我收到此错误消息；我试图在链接中对文件进行洗牌，但随后在另外两个文件中出现错误。
请提出任何解决此问题的建议。我正在使用 C++ 模板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T14:04:11.847

2个可能的原因：

1.  文件格式和机器架构。
2.  指某东西的用途`__attribute__((section))`

# scala - 播放 2.0 意外异常 StackOverflowError: null

> ID：13451161
> 
> 赞同：4
> 
> 时间：2012-11-19T09:44:21.140
> 
> 标签：scala, playframework, playframework-2.0

当我尝试编译我的项目时，出现以下异常：

```
! Internal server error, for request [GET /] ->

play.api.UnexpectedException: Unexpected exception [StackOverflowError: null]
    at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$4$$anonfun$apply$12.apply(PlayReloader.scala:233) ~[na:na]
    at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$4$$anonfun$apply$12.apply(PlayReloader.scala:226) ~[na:na]
    at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.3]
    at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$4.apply(PlayReloader.scala:226) ~[na:na]
    at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$4.apply(PlayReloader.scala:224) ~[na:na]
    at scala.Either$LeftProjection.map(Either.scala:183) ~[scala-library.jar:0.11.3]
java.lang.StackOverflowError: null
    at scala.tools.nsc.transform.Erasure$Eraser.typed1(Erasure.scala:731) ~[scala-compiler.jar:na]
    at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4271) ~[scala-compiler.jar:na]
    at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:4138) ~[scala-compiler.jar:na]
    at scala.tools.nsc.transform.Erasure$Eraser.typed1(Erasure.scala:731) ~[scala-compiler.jar:na]
    at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4271) ~[scala-compiler.jar:na]
    at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$typedApply$1$1.apply(Typers.scala:3353) ~[scala-compiler.jar:na] 
```

我在 Play 2 问题跟踪器中发现了同样的[问题](https://play.lighthouseapp.com/projects/82401/tickets/613-stack-overflow-exception-while-trying-to-compile)，他们说当路由文件增长时，它会产生异常。

由于我的项目不再编译，是否有解决此异常的方法？

我正在为 scala 使用 Play 2.0.3（我的路由文件大约有 150 行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-24T11:28:46.163

我对 Play 2.0.6 也有同样的问题。升级到 Play 2.0.8 并没有帮助。然后我修改了**$play_dir/framework/build**脚本，所以它使用**-Xss2M**而不是**-Xss1M**构建，问题消失了（我现在可以正常编译）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:14:15.693

play 2.0 存在一个与路由文件大小有关的错误，与路由数量无关，而是文件的物理大小（32768 字节）。似乎这个天花板在 2.0.4 中增加了，在 2.1 中被消除了。

[https://groups.google.com/forum/?fromgroups=#!topic/play-framework/fZvgWJoCPLc](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/fZvgWJoCPLc)

所以，首先，我会看一下路由文件的物理大小。可能会删除注释和/或删除注释掉的行。接下来，我会尝试升级到 2.0.4 版本。这是一个相当容易的过程。您只需要下载 2.0.4，指向`play`这个新路径，然后将项目的 /project/plugins.sbt 更新为：

```
// Use the Play sbt plugin for Play projects
addSbtPlugin("play" % "sbt-plugin" % "2.0.4") 
```

更长期的解决方法可能是在项目稳定后将其升级到 2.1。

# c# - LinqToExcel 忽略 StrictMapping 中的某些列

> ID：13451162
> 
> 赞同：1
> 
> 时间：2012-11-19T09:44:21.063
> 
> 标签：c#, exception-handling, mapping, ace, linq-to-excel

我正在使用以下方法读取 Excel 文件`LinqToExcel`：

```
var Excel = new ExcelQueryFactory(Filename);

Excel.databaseEngine = DatabaseEngine.Ace;

Excel.strictMapping = true; 
```

我想排除某些列，以防止严格映射功能为这些列抛出异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:50:59.297

如果设置`StrictMapping`为假怎么办？这对你有用吗？

# ios - iPad 应用程序中所有标签的字体模糊

> ID：13451165
> 
> 赞同：3
> 
> 时间：2012-11-19T09:44:25.183
> 
> 标签：ios, ipad, antialiasing, labels

我们一直在开发一款 iPad 应用程序，但遇到了一个奇怪的问题。

一旦我们在设备上部署应用程序，在某些 iPad 中，我们会看到所有标签的字体都变得模糊（字体可见但褪色/模糊）。

在某些 iPad 中，我们可以看到该问题，但在所有 iPad 上都无法看到该问题。它不是特定于操作系统的（在 ios5 和 ios6 上都可以看到）。即使杀死应用程序或重新安装它，问题也不会消失。

如果设备显示问题，它将一直存在，如果设备未显示问题，则永远不会显示。

关于何时发生这种情况或任何人以前见过它的任何输入？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T09:50:00.313

也许问题可能是坐标不是整数。您可以使用 修复它`CGRectIntegral()`。样本：

```
subView.frame = CGRectIntegral(CGRectMake( 0, 0, sizeWidth, sizeHeight)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-06T07:02:07.287

这取决于 iPad 版本。似乎您只能在 iPad 2（非视网膜显示器）上看到模糊的标签。而且它不依赖于 iOS 版本。圆角框架和中心将修复它

# c# - Visual Studio 测试、Process.Start、SQLCMD 和 Windows 命令处理器错误

> ID：13451166
> 
> 赞同：2
> 
> 时间：2012-11-19T09:44:28.380
> 
> 标签：c#, visual-studio-2012, mstest, .net-4.5, sqlcmd

我正在使用 Visual Studio 2012，并且正在使用 Visual Studio 的测试框架 ( *mstest* ) 开发一些集成测试。

几天前，我发现了一些关于现在 Visual Studio 2012 可以在输出目录（即*bin\Debug*、*bin\Release*）中执行测试的信息，并且我禁用了*部署*以简化很多事情。

尽管大多数事情都按预期工作，但我发现了一个大问题：一些代码使用类`[ClassInitialize]`执行进程，并且在禁用*部署*之后，每当启动进程时，我都会收到此错误：`Process`

 *![在此处输入图像描述](../Images/592eef01f9a97b162cf01a9560d8a97d.png)

我的第一印象是，启动过程中的某些东西可能不正确，我将相同的命令和参数复制粘贴到**CMD**中，它按预期工作。

经过一番调查，我弄清楚了为什么会这样：因为我将测试运行器配置为作为 64 位进程启动。切换到 X86 后，例如`Process.Start("cmd")`工作。

但更糟糕的是**SQLCMD——**我在测试运行中启动的实际进程——仍然失败并出现所谓的错误。

在 Visual Studio 测试运行程序中启动任何进程时会发生此错误。

**从测试运行程序启动时 SQLCMD 会发生什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:26:06.967

经过大量的试验和错误，我终于解决了这个问题。

*   现在我可以将测试作为 64 位进程运行（我认为这是主要问题，但我错了！）。
*   我仍然可以从输出目录运行测试！

但是我必须改变什么才能让它正常工作？该`.runsettings`文件。**它只是注释掉`<DataCollectionRunSettings>`XML 元素......突然*SQLCMD*进程又开始工作了！**

我真的不知道为什么注释掉配置元素会起作用，但关键是，因为我只想要集成测试并“按原样”运行它们，所以这个解决方案对我来说很好。

无论如何，如果有人能解释为什么注释掉`<DataCollectionRunSettings>`元素会产生这种效果，我们将不胜感激。

还是非常感谢！*

# android - 从侧导航获取列表视图点击次数

> ID：13451168
> 
> 赞同：0
> 
> 时间：2012-11-19T09:44:37.023
> 
> 标签：android, eclipse

我已经在我的应用程序中实现了滑动菜单。来源：[https ://github.com/johnkil/SideNavigation](https://github.com/johnkil/SideNavigation)

它的工作原理应该是这样，但是当我单击菜单中的任何项目时，单击将无法正常工作。我添加了 onClick 监听器等等。

代码片段：

```
public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            sideNavigationView.toggleMenu();
            Toast.makeText(getApplicationContext(),( R.string.title1),
                    Toast.LENGTH_LONG).show();
            break;
        default:
            return super.onOptionsItemSelected(item);
        }
        return true;
    }

@Override
public void onSideNavigationItemClick(int itemId) {
    switch (itemId) {
    case R.id.side_navigation_menu_item1:
        Toast.makeText(getApplicationContext(),( R.string.title1),
                Toast.LENGTH_LONG).show();
        break;

    case R.id.side_navigation_menu_item2:
        Intent intent = new Intent(this, DiffAdapter.class);
        this.startActivity(intent);
        break;

    case R.id.side_navigation_menu_item3:
        invokeActivity(getString(R.string.title3), R.drawable.ic_action_storage);
        break;

    case R.id.side_navigation_menu_item4:
        invokeActivity(getString(R.string.title4), R.drawable.ic_action_settings);
        break;

    case R.id.side_navigation_menu_item5:
        invokeActivity(getString(R.string.title5), R.drawable.ic_launcher);
        break;

    default:
        return;
    }
    finish();
} 
```

你能帮忙的话，我会很高兴。当我点击一个项目时，它不会做任何事情。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:51:44.370

我忘了实现一些字符串，这会导致错误。通过添加解决了这个问题：

```
icon = (ImageView) findViewById(android.R.id.icon);
        sideNavigationView = (SideNavigationView) findViewById(R.id.side_navigation_view);
        sideNavigationView.setMenuItems(R.menu.ribbon_menu);
        sideNavigationView.setMenuClickCallback(this);

        if (getIntent().hasExtra(EXTRA_TITLE)) {
            String title = getIntent().getStringExtra(EXTRA_TITLE);
            int resId = getIntent().getIntExtra(EXTRA_RESOURCE_ID, 0);
            setTitle(title);
            icon.setImageResource(resId);
        } 
```

到我的代码：onCreate()

# python - Python 正则表达式：这有什么问题？

> ID：13451173
> 
> 赞同：1
> 
> 时间：2012-11-19T09:45:05.237
> 
> 标签：python, regex

我正在尝试做一个正则表达式来从这个 XML 中获取错误代码。

```
>>> re_code = re.compile(r'<errorcode>([0-9]+)</errorcode>', re.MULTILINE)
>>> re_code.match('''<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
... <methoderesponse>
...     <status>
...         <message/>
...         <errorcode>515</errorcode>
...         <value>ERROR</value>
...     </status>
... </methoderesponse>
... ''') 
```

这应该很容易。但我不明白为什么它不匹配。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T09:46:54.233

`.match()`尝试在开始时匹配。你想要`.search()`或更有可能`.findall()`

看看 XML 解析器 - 使用 XPath 或等效物来获取数据会更好（而且它会处理正则表达式不会处理的细微差别）

一个适用于您的示例 XML 的示例：

```
import xml.etree.ElementTree as ET
tree = ET.fromstring(text)

>>> tree.findall('.//errorcode')[0].text
'515' 
```

[有关ElementTree 的](http://docs.python.org/2/library/xml.etree.elementtree.html)更多信息，我会亲自查看[lxml](http://lxml.de/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:00:24.503

正如[@Jon Clements](https://stackoverflow.com/users/1252759/jon-clements)所说，`.match()`仅当表达式应该从字符串的开头运行，`.search()`搜索字符串的第一次出现并`.findall()`搜索所有出现时才有效。

但不管怎样，你应该稍微修改你的正则表达式到一个更易读的版本：

```
regex = re.compile(r'<errorcode>(\d+)</errorcode>') 
```

你不需要这个`re.MULTILINE`论点，它与这个问题无关。

# jquery - “Microsoft JScript 运行时错误：'Sys' 未定义”在呈现“登录部分视图”的 Jquery 对话框中

> ID：13451174
> 
> 赞同：1
> 
> 时间：2012-11-19T09:45:05.800
> 
> 标签：jquery, ajax, asp.net-mvc-3, asp.net-ajax, asp.net-mvc-ajax

我是 jquery、ajax 和 mvc 的新手。

我使用 Jquery 对话框显示部分视图的日志。当它被加载并且我点击它的文本框或它上面的任何其他地方时，我得到这个错误：

**“Microsoft JScript 运行时错误：‘Sys’未定义”**

并为其显示此脚本动态代码：

```
function onclick(event) { Sys.Mvc.AsyncForm.handleClick(this, new Sys.UI.DomEvent(event)); } 
```

我不能使用这些脚本来验证文本框，因为我的页面中有 jquery 手风琴，当我使用这些脚本时，手风琴不起作用。上面的错误也再次显示。

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

我应该怎么做才能解决它？如何验证用户名并在对话框中传递文本框？和 .. 我可以在**@Ajax.beginform(){}中使用****@Html.ActionLink**吗？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:49:07.683

试试这个在布局上添加参考： -

```
<script src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"></script> 
```**

# sql - 在列中插入默认值

> ID：13451175
> 
> 赞同：-3
> 
> 时间：2012-11-19T09:45:09.737
> 
> 标签：sql, sql-server, sql-server-2008

我想在一个表中插入记录，其中一列对于插入的所有记录具有相同的值。如何在**不改变表结构的情况下做到这一点。**

```
Insert into tableA(clientid,no_of_users)
select clientid
from tableB 
```

我想要所有记录的 no-of_users =3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T09:46:56.703

您可以为此使用[默认约束](http://msdn.microsoft.com/en-us/library/aa175912%28v=sql.80%29.aspx)，在 MSDN 上阅读它。

在不改变表结构的情况下，只需简单地使用这个：

```
Insert into tableA(clientid,no_of_users)
select clientid, 3
from tableB 
```

使用此语句，您`INSERT`始终**可以**将`SELECT`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T10:08:51.593

![ ](../Images/9e18913e4f94b3dbe93a176b85e89951.png)

在 Sql server 中修改你的表。选择列名并为该列设置默认值。

# solr - 从 solr 索引的文档中提取关键短语

> ID：13451179
> 
> 赞同：1
> 
> 时间：2012-11-19T09:45:17.677
> 
> 标签：solr, lucene, search-engine

我想从 solr 索引的文档中提取关键短语，并将这些短语显示为用户的标签。这应该在执行查询后执行。

例如：如果我输入一个查询`India`并在页面上获得前 50 个结果，我想将这 50 个文档中的**重要短语作为标签显示给用户（以进行进一步过滤）。**

如何从文本中提取关键短语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:24:39.227

我相信[org.apache.lucene.search.highlight.Highlighter](http://lucene.apache.org/core/3_6_0/api/contrib-highlighter/org/apache/lucene/search/highlight/Highlighter.html)是您正在寻找的。

可以在此处看到一个显示其使用的示例：[http](http://www.tinhtruong.me/2012/04/highlighting-text-with-lucene.html) ://www.tinhtruong.me/2012/04/highlighting-text-with-lucene.html （以及其他地方）。

# android - Android VideoView 无法播放视频mp4

> ID：13451180
> 
> 赞同：9
> 
> 时间：2012-11-19T09:45:19.500
> 
> 标签：android, video, mp4, android-videoview

我使用 Android VideoView 通过 HTTP 播放视频文件。我的问题是我的手机提示“无法播放视频对不起，此视频无法播放”。从 HTTP 播放 mp4 文件时。但是播放另一个 mp4 视频文件时可以。

在三星 Galaxy S 等较新的手机中使用时，我的程序可以成功播放来自 HTTP 的 mp4 视频文件。

我的手机：

```
Samsung GT-S5830  
Android version: 2.3.4  
Display: 320x480.

Video file 1 (OK):  
Video Codec: H.264  
Resolution: 640x360  
Others: 16:9, 340kbps, 29.92fps  
Audio Codec: AAC, 44kHz 96kbps Stereo.

Video file 2 (Fail):  
Video Codec: H.264  
Resolution: 640x360  
Others: 16:9, 993kbps, 25fps  
Audio Codec: AAC 44kHz 125kbps Stereo. 
```

下面是我硬编码以成功播放视频文件 1 的代码。

```
public class VideoPlayActivity extends Activity {
VideoView vv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //requestWindowFeature(Window.FEATURE_NO_TITLE);
    //getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    vv = new VideoView(this);
    RelativeLayout.LayoutParams param1 = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
    param1.addRule(RelativeLayout.CENTER_IN_PARENT);
    vv.setOnErrorListener(new OnErrorListener() {

        public boolean onError(MediaPlayer mp, int what, int extra) {
            Log.d("Dbg", "OnErrorListener: onError: " + what + ", " + extra);
            return false;
        }

    });

    RelativeLayout layout = new RelativeLayout(this);
    layout.addView(vv, param1);

    setContentView(layout);

    playContent();

 }

 private void playContent() {
    String path = "http://rmcdn.2mdn.net/MotifFiles/html/1248596/android_1330378998288.mp4";

    vv.setVideoPath(path);
    vv.requestFocus();
    vv.start();
    }
} 
```

播放视频文件2时的错误日志如下：

```
11-19 17:49:30.119: I/VideoView(16860): start()  
11-19 17:49:30.139: E/MediaPlayer(16860): error (1, -2147483648)  
11-19 17:49:30.149: E/MediaPlayer(16860): Error (1,-2147483648)  
11-19 17:49:30.149: D/VideoView(16860): Error: 1,-2147483648  
11-19 17:49:30.149: D/Dbg(16860): OnErrorListener: onError: 1, -2147483648 
```

请注意，我尝试安装 MX 播放器并将两个视频文件下载到手机的 SD 卡中。MX 播放器可以成功播放这两个视频文件。

那么，谁能帮我回答以下问题：

1.  为什么我的程序无法在手机上播放视频文件 2？
2.  如何在手机上播放视频文件 2？

感谢您的意见。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-21T05:00:42.190

感谢[Android MediaPlayer error (1, -2147483648)](https://stackoverflow.com/questions/11540076/android-mediaplayer-error-1-2147483648)的回答。

我发现视频文件2是用H.264 Main Profile编码的，我的手机无法播放。[Android 支持的媒体格式](http://developer.android.com/guide/appendix/media-formats.html)建议在基线配置文件中使用 H.264。所以将视频转换为基线配置文件后，它可以在我的手机上播放。

# ruby-on-rails - 在rails中使用没有脚手架的“资源”

> ID：13451181
> 
> 赞同：1
> 
> 时间：2012-11-19T09:45:21.933
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我不想在我的 rails 应用程序中使用脚手架，而且对于 routes.rb 中的“resources”关键字，我还不太了解（还没有！）。
“资源”的使用是否与“脚手架”的世代相关联？
我的理解是“脚手架”将创建一堆文件，其中一个控制器具有正确的操作名称（索引、显示、...）。
如果我创建模型（不使用“脚手架”）然后创建一个具有正确操作和正确视图的控制器，这足以在 routes.rb 中使用“资源”还是我会错过一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:57:01.033

脚手架和资源没有任何联系。

只是资源已经是一种脚手架，因为它总是创建同样由脚手架生成的 CRUD 路由。

所以如果你写：

```
resources :users 
```

您最终创建了 6 条路线：

*   指数
*   新的
*   创造
*   编辑
*   更新
*   破坏

您可以使用 :only 限制生成的资源

```
resources :users, :only => [:index, new] 
```

仅创建索引和新路由的位置。

然后，您可以在控制器中创建这些操作并为它们添加适当的视图。

简而言之：如果您只是将资源 :users 放在您的 routes.rb 中，您可以自己在控制器中创建这些操作，它就会正常工作。无需为它创建脚手架。

# ruby-on-rails - 在 Rails 中编写许多自定义验证器的 DRY 方式

> ID：13451182
> 
> 赞同：1
> 
> 时间：2012-11-19T09:45:28.457
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation, refactoring

在我的应用程序中，我将多个自定义验证器保存在 app/validators 中，然后调用多个模型。

大多数情况下，我为基于正则表达式的验证执行此操作，例如电子邮件、手机等，基本上是我需要采用特定格式的自定义数据字符串。

例如：

```
class EmailValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    unless value =~ /^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i
      record.errors[attribute] << (options[:message] || "is not a valid email format")
    end
  end
end

class IpValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    unless value =~ /^([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}$/
      record.errors[attribute] << (options[:message] || "is not a valid IP format")
    end
  end
end 
```

这种方法的缺点是我有很多额外的文件，它们的代码几乎相同，这在大型应用程序中会很烦人。

是否有更好的方法（更 DRY）来定义基于正则表达式的验证，以便它们可以跨模型重用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:56:20.613

您可以为正则表达式验证创建一个基类：

```
class RegexValidator < ActiveModel::EachValidator
  def regex_validate_each(regex, err_msg, record, attribute, value)
    unless value =~ regex
      record.errors[attribute] << (options[:message] || err_msg)
    end
  end
end 
```

然后像这样子类化它：

```
class EmailValidator < RegexValidator
  def validate_each(record, attribute, value)
    regex_validate_each(/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i, "is not a valid IP format", record, attribute, value)
  end
end 
```

# android - 使用 android <= 2.2 下载图像

> ID：13451183
> 
> 赞同：0
> 
> 时间：2012-11-19T09:45:30.250
> 
> 标签：android, image

我从互联网下载图像时遇到问题。问题是图像正在下载。当程序在 android <= 2.2 上运行时会出现问题。下载大约 50 张分辨率为 320x200 的图像

代码片段：

```
public class DownloadOfferImages extends AsyncTask<List<ImageOfferData>, Bitmap, Void> {

    private InputStream inputStream;
    private BufferedInputStream buffer;

    @Override
    protected Void doInBackground(List<ImageOfferData>... offer) {
        for(int i = 0 ; !isInteruppted() && i < offer[0].size() ; i++) {
            if(offer[0].get(i).getImage() == null)
                downloadImage(offer[0].get(i));
        }
        return null;
    }

    private void downloadImage(ImageOfferData offerData) {
        try {
            download(offerData);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (OutOfMemoryError e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                closeStreams();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    private void download(ImageOfferData offerData) throws MalformedURLException, OutOfMemoryError, IOException {
        URL imageUrl = new URL(offerData.getImageURL());
        URLConnection connection = imageUrl.openConnection();
        inputStream = connection.getInputStream();
        buffer = new BufferedInputStream(inputStream);
        Bitmap image = BitmapFactory.decodeStream(buffer);
        buffer.close();
        offerData.setImage(image);
        publishProgress(image);
    }

    /*
     * [rest of code]
     * 
     * 
     * */

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:03:45.057

我强烈推荐美妙的 Async Image Loader 库：

自述文件中包含的示例。在 github 上找到它：

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# unit-testing - 在zend服务器上安装phpunit

> ID：13451188
> 
> 赞同：0
> 
> 时间：2012-11-19T09:46:06.083
> 
> 标签：unit-testing, zend-framework, phpunit, zend-server

大家好我已经解决了这个问题的许多相关问题，但我仍然无法得到解决方案。我已经安装了`Zend Server`。现在我想安装`PHPunit`. 我已经安装`pear`然后安装了`PHPUnit`.

我的 Zend 服务器安装在

```
C:\xyz\zend\ZendServer 
```

我的梨安装在

```
C:\xyz\zend\ZendServer\bin\PEAR 
```

PHPunit 安装在

```
C:\xyz\zend\ZendServer\bin\PEAR\pear\PHPUnit 
```

我已经为变量添加了`pear`路径甚至 PHPUnit 路径。`Envrionmental PATH`然后我打开`php.ini`位于

```
C:\xyz\zend\ZendServer\etc 
```

并将 include_path 设置为

```
include_path = ".;c:\php\includes;c:\xyz\zend\ZendServer\bin\PEAR\pear;c:\xyz\zend\ZendServer\bin\PEAR\pear\PHPUnit" 
```

现在，当我在 cmd 运行命令创建 zend 项目时，项目已创建，但我也发现了这个注释

```
Testing Note: PHPUnit was not found in your include_path, therefore no testing action will be created. 
```

有人请告诉我我做错了什么以及在哪里设置这个包含路径？？？

最好的祝福 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:35:48.497

让我们做一些老式的调试:)

```
$ zf create project ./one
Creating project at /path/to/one
Note: This command created a web project, for more information setting up your VHOST, please see docs/README
Testing Note: PHPUnit was not found in your include_path, therefore no testing actions will be created. 
```

没有 PHPUnit！

`path/zend-framework/bin/zf.php`在顶部附近找到并添加：

```
var_dump(get_include_path()); 
```

现在让我们看看包含路径是什么样的：

```
$ zf create project ./two
string(32) ".:/usr/share/php"
Creating project at /path/to/two
Note: This command created a web project, for more information setting up your VHOST, please see docs/README
Testing Note: PHPUnit was not found in your include_path, therefore no testing actions will be created 
```

我的 PHPUnit 不在`/usr/share/php`目录中。让我们通过将 PHPUnit 添加到包含路径来解决这个问题。

例如，如果 PHPUnit 在 中`/path/to/phpunit`，打开`php.ini`文件并将其添加到包含路径。

第三次魅力：

```
$ zf create project ./three
string(56) ".:/usr/share/php:/path/to/phpunit"
Creating project at /path/to/three
Note: This command created a web project, for more information setting up your VHOST, please see docs/README 
```

如果您编辑了正确`php.ini`的 ，那么`var_dump()`您添加的`zf.php`现在将使用您修改的任何内容来回显包含路径，在我的情况下它是正确的，所以现在 PHPUnit 正在工作。

现在从`zf.php`

# eclipse-plugin - tycho clean 启动配置

> ID：13451189
> 
> 赞同：0
> 
> 时间：2012-11-19T09:46:08.097
> 
> 标签：eclipse-plugin, osgi, tycho

我想使用 tycho 来测试我的 eclipse 插件。我的测试类只是第一次列出了所有已安装的捆绑包。我已经尝试过构建和安装捆绑包。现在我需要在没有我的实验包的情况下启动框架，但我不管理这个。该列表仍然包含我曾经安装过的所有捆绑包。

我的 eclipse-test-plugin 模块使用 tycho-surefire-plugin 配置为`<appArgLine>-clean</appArgLine>`.

我希望在没有任何缓存数据、旧的未使用的捆绑包等的情况下启动 OSGi 框架。我也尝试过`<argLine>-Dosgi.clean=true</argLine>`但没有成功。我在 Eclipse 设置中寻找类似“启动前清理配置区域”的内容。

我有一种感觉，我错过了一些基本而重要的东西。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:15:59.427

If you call Tycho with something that involves the `clean` lifecycle of Maven, e.g. `mvn clean verify`, the tests will be executed in a fresh Equinox runtime.

So if you are still seeing your "experimental bundles" in the test runtime, this is because your test has a dependency to them. The test runtime by default contains exactly your test bundle and all its transitive dependencies.

# excel-formula - 是否可以在 Excel 工作表中显示弹出消息？

> ID：13451193
> 
> 赞同：0
> 
> 时间：2012-11-19T09:46:23.433
> 
> 标签：excel-formula

我想在 Excel 表中向用户显示以下场景的弹出消息

在 Excel 工作表中，如果 A1 和 A2 中的值不相等，则应弹出消息，其中包含一些输入的文本，例如“A1 中的值应 > A2”），指导用户输入正确的值。

请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:04:05.810

最简单的方法是使用 excel 的内置数据验证。

您可以在功能区菜单的数据选项卡上找到它 - 如下所示：

![在此处输入图像描述](../Images/33eb9e4dcdc9e1ba4daca23626eb4a48.png)

您需要将其设置为“用户定义”并将您的公式指定为`=A1>=A2`.

此外，您可以设置“A1 中的值应 > A2”消息显示在单元格选择（输入消息）或作为输入错误数字（错误警报）的弹出消息。

您需要为 A1 和 A2 设置此数据验证，以便在它们的关系发生任何变化时显示它。

# map - android mapsforge覆盖不显示在视图中

> ID：13451195
> 
> 赞同：0
> 
> 时间：2012-11-19T09:46:28.580
> 
> 标签：map, overlay, android-mapview

我需要一点帮助。我使用“org.mapsforge.android.maps”编写了一个安卓应用程序。在那里，我创建了一个我想在地图中显示的自定义叠加层。地图已显示，但没有我的叠加层。我看到“mapView.getOverlays().add(myOverlay)”将 myOverlay 添加到 mapView 但在屏幕上没有任何反应。有人知道为什么不吗？

非常感谢

汤姆

```
@Override
  public void onCreate(Bundle savedInstanceState) {
     try
     {
         res= this.getResources();
         context=this;
         requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
         super.onCreate(savedInstanceState);       
         setContentView(R.layout.openstreet);
         getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.main_title_back);

         // get the pointers to different system services
         this.locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
         this.myLocationListener = new MyLocationListener(this);

         if(getIntent().hasExtra("comingfrom") == true)
             comingfrom = getIntent().getExtras().getString("comingfrom");
         if(getIntent().hasExtra("latitude") == true)
             mlatitude = getIntent().getExtras().getDouble("latitude");
         if(getIntent().hasExtra("longitude") == true)
             mlongitude = getIntent().getExtras().getDouble("longitude");

         initMapView();

         Log.i(Properties.getProgramname(), "OpenStreetActivity->onCreate: Übergebene Koordinate Lat=" + mlatitude + " Lon=" + mlongitude);

         if (comingfrom.equals("ButtonArea"))
         {
             LoadData();
         }
         else
         {

         }

         if (this.locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
             initMyLocation(true);
            } else {
                 Toast.makeText(this,"GPS Provider not enabled",Toast.LENGTH_LONG).show();
        }

        // create a GeoPoint with the latitude and longitude coordinates   
        GeoPoint geoPoint = new GeoPoint(mlatitude, mlongitude);
        mapController.setCenter(geoPoint);
        mapController.setZoom(16);

     }
     catch (Exception ex)
     {
         Log.e(Properties.getProgramname(), "Fehler in OpenStreetActivity->onCreate: " +  ex.getLocalizedMessage());
         Toast.makeText(this,"UI problem " + ex.getMessage(),Toast.LENGTH_LONG).show();

     }
 }

 /**
 * Initialize the OSM 
 * 
 */
 private void initMapView()
 {
    settingsLayer = new TJHookerSettingsLayer(this);
    Cursor cur = settingsLayer.ladeSettings();
    String filename =cur.getString(cur.getColumnIndex(TJHookerSettingsTables.MAPFILE));
    cur.close();
    mapView = (MapView) this.findViewById(R.id.openmapview);
    this.mapView.setClickable(true);
    this.mapView.setBuiltInZoomControls(true);
    this.mapView.setFocusable(true);

     if (!this.mapView.getMapGenerator().requiresInternetConnection() ) {
         File file = new File(filename);
         if (file.exists())
             mapView.setMapFile(new File(filename));
         else
             Toast.makeText(this,"Problem: Mapfile not found. Please correct the path of your mapfile",Toast.LENGTH_LONG).show();
     }

     mapController = this.mapView.getController();
 }

 /**
 * Show the current location of my position
 * 
 */
 private void initMyLocation(boolean centerAtFirstFix) 
 {
     try
     {
         Criteria criteria = new Criteria();
         criteria.setAccuracy(Criteria.ACCURACY_FINE);
         String bestProvider = this.locationManager.getBestProvider(criteria, true);

         this.itemizedMyLocationOverlay = new ArrayItemizedOverlay(null);            
         this.overlayMyLocationItem = new OverlayItem();
         this.overlayMyLocationItem.setMarker(ItemizedOverlay.boundCenter(getResources().getDrawable(R.drawable.my_location)));
         this.itemizedMyLocationOverlay.addItem(this.overlayMyLocationItem);

         this.mapView.getOverlays().add(this.itemizedMyLocationOverlay);

         this.myLocationListener.setCenterAtFirstFix(centerAtFirstFix);
         this.locationManager.requestLocationUpdates(bestProvider, 1000, 0, this.myLocationListener);

     }
     catch(Exception ex)
     {
         Log.e(Properties.getProgramname(), "Fehler in OpenStreetActivity->initMyLocation: " +  ex.getLocalizedMessage());
         Toast.makeText(OpenStreetActivity.this, "!initMyLocation: " + ex.getMessage(), Toast.LENGTH_LONG).show();  
     }
 }    

        // neuen Thread starten
        private void LoadData()
        {
            if(mlongitude > 0 && mlatitude  > 0)
            {
                SystemInformation sys = new SystemInformation();
                if(sys.isNetworkAvailable(this))
                {
                    // Neuen Thread startenn der die Kontakte laden soll. Activity wir schon angezeigt
                    prog = ProgressDialog.show(this, res.getString(R.string.gc40_progtitle), "", true, false);
                    prog.setMessage(Html.fromHtml("<font color='white'>" + res.getString(R.string.gc40_progtext) + "</font>"));  

                    pdIsShow=true;
                    Thread thread = new Thread(this);
                    thread.start();   
                }
            }
        }

        @Override
        public void run() {
            GCApiRequests _apiRequests= new GCApiRequests();
            try {
                lc = _apiRequests.GetCacheByArea(Properties.getGCAccessToken(), mlongitude, mlatitude,"5000", GeocachingConstants.maxCachesPerPage);
                handler.sendEmptyMessage(0);
            } catch (Exception e) {
                Log.e(Properties.getProgramname(), "KartenAnzeigenActivity->Fehler in run: " + e.getLocalizedMessage());
                handler.sendEmptyMessage(1);

            }

        }     

           // Wenn Thread alle Kontakte geladen hat, dann in ListView anzeigen
        private Handler handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                if (pdIsShow)
                    prog.dismiss();
                setOverlayCaches();
                }
        };          
        private void setOverlayCaches()
        {
            try {
                CacheType typ = new CacheType();
                lc.trimToSize();
                Log.i(Properties.getProgramname(), "OpenStreetActivity->setOverlayCache: Anzahlgefundener Caches=" +lc.size());
                /** So, jetzt gehen wir erstmal durch alle Logs von geocaching.com durch  */
                // create an ItemizedOverlay with the default marker
                CacheOpenStreetMapItemizedOverlay myOverlay= new CacheOpenStreetMapItemizedOverlay(getResources().getDrawable(typ.getCacheType(2)), context);
                for(Geocache cache: lc)
                {

                    // create a GeoPoint with the latitude and longitude coordinates
                    int lat = (int) (Double.parseDouble(cache.GetLatitude()) * 1e6);    
                    int lon = (int) (Double.parseDouble(cache.GetLongitude()) * 1e6);
                    GeoPoint geoPoint = new GeoPoint(lat,lon);

                    // create an OverlayItem with title and description
                    OverlayItem item = new OverlayItem(geoPoint, cache.GetCacheName(), cache.GetGCCode(),
                            getResources().getDrawable(typ.getCacheType(Integer.parseInt(cache.GetCacheType()))));
                    myOverlay.addOverlay(item);
                }   
                myOverlay.requestRedraw();
                // add the ArrayItemizedOverlay to the MapView
                //if (traditionellOverlay != null)
                Log.i(Properties.getProgramname(), "OpenStreetActivity->setOverlayCache: Anzahl Overlay items=" + myOverlay.size());
                Log.i(Properties.getProgramname(), "OpenStreetActivity->setOverlayCache: Anzahl MapView Overlays=" + mapView.getOverlays().size());
                mapView.getOverlays().add(myOverlay);
                Log.i(Properties.getProgramname(), "OpenStreetActivity->setOverlayCache: Anzahl MapView Overlays=" + mapView.getOverlays().size());
        } catch (Exception e) {
                Log.e(Properties.getProgramname(), "KartenAnzeigenActivity->Fehler in setOverlayCaches: " + e.getLocalizedMessage());

            }
        }

        /** Back-Button in Titlebar wurde gedrückt */
        public void PressTitleBackButton_Click(View view)
        {
            /** Durch ein finish() wird der Back-Button Effekt ausgelöst. */
            finish();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:35:03.530

解决了！

您必须将代码重写为：

```
int cachetyp = typ.getCacheType(Integer.parseInt(cache.GetCacheType()));
Drawable itemMarker = getResources().getDrawable(cachetyp);

// Without that the icons aren't displayed. So you NEED it
itemMarker.setBounds(0, 0, itemMarker.getIntrinsicWidth(), itemMarker.getIntrinsicHeight()); 
```

该项目需要边界......

# mysql - 如果不为空，MySQL 选择父代而不是子代

> ID：13451199
> 
> 赞同：0
> 
> 时间：2012-11-19T09:46:40.620
> 
> 标签：mysql, sql, yii

这是一个表模式：

```
CREATE TABLE `tag` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL COMMENT 'The tag or keyword, always lowercase would be better',
  `community_id` int(10) unsigned NOT NULL COMMENT 'The community this tag belongs to',
  `parent_id` int(10) unsigned DEFAULT NULL COMMENT 'If the tag is an alias to another tag',
  `full_description` text COMMENT 'Content describing tag',
  `short_description` tinytext COMMENT 'Short description of the tag',
  PRIMARY KEY (`id`),
  UNIQUE KEY `name_2` (`name`,`community_id`),
  KEY `FK_tag_community_idx` (`community_id`),
  KEY `FK_tag_tag_idx` (`parent_id`),
  KEY `name` (`name`),
  CONSTRAINT `FK_tag_community` FOREIGN KEY (`community_id`) REFERENCES `community` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `FK_tag_tag` FOREIGN KEY (`parent_id`) REFERENCES `tag` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8 COMMENT='Valid tags for a question'; 
```

我想选择标签，但如果 parent_id 不是 NULL，我想返回父项而不是子项。理想情况下，这个查询也不会重复......

是否可以在单个查询中进行？

服务器端我使用 PHP Yii，如果重要的话......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:52:20.857

尝试将您的查询分为两部分：

```
SELECT *
FROM tag
WHERE parent_id IS NULL AND
      ...

UNION

SELECT *
FROM tag
WHERE parent_id IS NOT NULL AND
      id IN (SELECT parent_id
             FROM tag
             WHERE parent_id IS NOT NULL AND
             ...) 
```

而不是`...`应该是您需要的其他过滤选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:52:35.320

利用`COALESE`

例如，（*简化查询*）

```
SELECT  COALESCE(parent_ID, iD)
FROM    tag 
```

# java - 如何在 HTTP 代理认证中指定目标 URL 路径

> ID：13451200
> 
> 赞同：1
> 
> 时间：2012-11-19T09:46:46.330
> 
> 标签：java, authentication, proxy

我需要通过代理身份验证从 API 服务器获取 API 响应内容到我的本地服务器。API 请求将如下所示：

```
http://api.example.com/nav_page/head?locale=in&pointer=old&cont=/resque/&scope=old&release=new

import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.HttpHost;
import org.apache.http.HttpResponse;
import org.apache.http.auth.AuthScope;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.conn.params.ConnRoutePNames;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

public class ClientProxyAuthentication {

    public static void main(String[] args) throws Exception {

        DefaultHttpClient httpclient = new DefaultHttpClient();
        try {
            httpclient.getCredentialsProvider().setCredentials(
                    new AuthScope("proxy.example.com", 8080),
                    new UsernamePasswordCredentials("Domain\user", "pass"));

            HttpHost targetHost = new HttpHost("api.example.com", 80, "http");
            HttpHost proxy = new HttpHost("proxy.example.com", 8080);

            httpclient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy);

            HttpGet httpget = new HttpGet("/");

            System.out.println("executing request: " + httpget.getRequestLine());
            System.out.println("via proxy: " + proxy);
            System.out.println("to target: " + targetHost);

            HttpResponse response = httpclient.execute(targetHost, httpget);
            HttpEntity entity = response.getEntity();

            System.out.println("----------------------------------------");
            System.out.println(response.getStatusLine());
            if (entity != null) {
                System.out.println("Response content length: " + entity.getContentLength());
                System.out.println(EntityUtils.toString(entity));
            }
            Header[] headers = response.getAllHeaders();
            for (int i = 0; i<headers.length; i++) {
                System.out.println(headers[i]);
            }
            EntityUtils.consume(entity);

        } finally {
            // When HttpClient instance is no longer needed,
            // shut down the connection manager to ensure
            // immediate deallocation of all system resources
            httpclient.getConnectionManager().shutdown();
        }
    }
} 
```

在此代码中，如果目标 URL 指定为 api.example.com，则身份验证成功并获取资源（但基本目录中没有资源，因此没有收到任何有用的信息）。但要获得正确的响应，我需要提供该主机内的导航路径。

因此，如果我像这样附加路径

```
HttpHost targetHost = new HttpHost("api.example.com/nav_page/head?locale=in&pointer=old&cont=/resque/&scope=old&release=new", 80, "http"); 
```

我收到一些错误响应，但不正确。

```
HTTP/1.1 503 Service Unavailable
Response content length: 442
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>503 Service Temporarily Unavailable</title>
</head><body>
<h1>Service Temporarily Unavailable</h1>
<p>The server is temporarily unable to service your
request due to maintenance downtime or capacity
problems. Please try again later.</p>
<p>Additionally, a 404 Not Found
error was encountered while trying to use an ErrorDocument to handle the request.</p>
</body></html> 
```

如果我直接在浏览器中点击 URL，我能够得到响应。

我可以知道如何发送导航路径请求吗？

# android - 标签栏：点击进入主屏幕

> ID：13451202
> 
> 赞同：1
> 
> 时间：2012-11-19T09:46:53.540
> 
> 标签：android, android-intent, tabbar, multiscreen

我正在使用标签栏。我在每个选项卡中有三个以上的屏幕，当我按下所选选项卡的选项卡按钮时，它应该转到该选项卡的第一个屏幕，但它没有。
这是我的tabar代码。

```
public class TabUi extends TabActivity {
    private static final String TAG_DEALS = "DEAL";
    private static final String TAG_SEARCH = "SEARCH";
    private static final String TAG_BOOKMARKS = "ALERTS";
    private static final String TAG_FRIENDS = "BUZZ";
    private static final String TAG_MORE = "MORE";
    /*
     * private static final String TAG_DEALS = ""; private static final String
     * TAG_SEARCH = ""; private static final String TAG_BOOKMARKS = ""; private
     * static final String TAG_FRIENDS = ""; private static final String
     * TAG_MORE ="";
     */
    protected LocationManager locationManager;
    Location location;
    private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in
                                                                        // Meters
    private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in
                                                                    // Milliseconds

    // private TabHost host = null;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Resources res = getResources();

        TabHost tabHost = getTabHost();

        TabHost.TabSpec spec;

        Intent intent;

        intent = new Intent().setClass(this, DealsActivityGroup.class);
        spec = tabHost.newTabSpec(TAG_DEALS)
                .setIndicator(TAG_DEALS, res.getDrawable(R.drawable.deal_icon))
                .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, SearchActivityGroup.class);
        spec = tabHost
                .newTabSpec(TAG_SEARCH)
                .setIndicator(TAG_SEARCH,
                        res.getDrawable(R.drawable.search_icon))
                .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, BookmarksActivityGroup.class);
        spec = tabHost
                .newTabSpec(TAG_BOOKMARKS)
                .setIndicator(TAG_BOOKMARKS,
                        res.getDrawable(R.drawable.bookmark_icon))
                .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, FriendsActivityGroup.class);
        spec = tabHost
                .newTabSpec(TAG_FRIENDS)
                .setIndicator(TAG_FRIENDS,
                        res.getDrawable(R.drawable.friend_icon))
                .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, MoreActivity.class);
        spec = tabHost.newTabSpec(TAG_MORE)
                .setIndicator(TAG_MORE, res.getDrawable(R.drawable.more_icon))
                .setContent(intent);
        tabHost.addTab(spec);
    }

    /*@Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

    }*/

} 
```

这是选项卡活动组的代码：

```
public class DealsActivityGroup extends ActivityGroup {

    public static DealsActivityGroup group;
    private ArrayList<View> history;
    private ProgressDialog pDialog;
    String Url;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.history = new ArrayList<View>();
        group = this;

    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        // new DealsFirst().execute();
        View view = getLocalActivityManager().startActivity(
                "Dealsfirstactivity",
                new Intent(DealsActivityGroup.this, Dealsfirstactivity.class)
                        .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
                .getDecorView();

        replaceView(view);
    }

    public void replaceView(View v) {
        // Adds the old one to history
        history.add(v);
        v.setFocusable(true);
        v.setFocusableInTouchMode(true);
        v.requestFocus();

        // Changes this Groups View to the new View.
        setContentView(v);
    }

    public void back() {

        System.out.println("History size: " + history.size());
        if (history.size() > 1) {
            history.remove(history.size() - 1);
            View v = history.get(history.size() - 1);
            System.out.println("If size: " + history.size());
            v.setFocusable(true);
            v.setFocusableInTouchMode(true);
            v.requestFocus();
            System.out.println("View : " + v);
            setContentView(v);

        } else
            // System.out.println("History size: "+ history.size());
            this.finish();
    }

    @Override
    public void onBackPressed() {
        DealsActivityGroup.group.back();
        return;
    }

    public class DealsFirst extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            // pDialog = new ProgressDialog(Dealsfirstactivity.this);
            // pDialog.setMessage("Please wait!..");
            // pDialog.setIndeterminate(false);
            // pDialog.setCancelable(true);
            // pDialog.show();
        }

        protected String doInBackground(String... args) {
            if (StorageManager.Instance().GetdealscategoryData() == null) {
                ServiceHelper.Instance().Dealscategorylist();
            }
            return null;

        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String result) {
            // dismiss the dialog once done
            super.onPostExecute(result);

            if (StorageManager.Instance().GetdealscategoryData() != null
                    && StorageManager.Instance().GetdealscategoryData().size() > 0) {
                new Dealslistfirst().execute();

            }
        }

    }

        public class Dealslistfirst extends AsyncTask<String, String, String> {

            /**
             * Before starting background thread Show Progress Dialog
             * */
            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                pDialog = new ProgressDialog(getDialogContext());
                pDialog.setMessage("Please wait!..");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(true);
                pDialog.show();
            }

            protected String doInBackground(String... args) {

                ServiceHelper.Instance().dealsforyoulist(Url);
                return null;

            }

            /**
             * After completing background task Dismiss the progress dialog
             * **/
            protected void onPostExecute(String result) {
                // dismiss the dialog once done
                super.onPostExecute(result);

                if (StorageManager.Instance().GetdealsData() != null
                        && StorageManager.Instance().GetdealsData().size() > 0) {

                    // runOnUiThread(action)

                } else if (StorageManager.Instance().GetdealsData() == null) {

                }
                if (pDialog.isShowing()) {
                    pDialog.dismiss();
                }

                View view = getLocalActivityManager().startActivity(
                        "Dealsfirstactivity",
                        new Intent(DealsActivityGroup.this,
                                Dealsfirstactivity.class)
                                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
                        .getDecorView();

                replaceView(view);
            }

        }

        private Context getDialogContext() {
            Context context;
            if (getParent() != null)
                context = getParent();
            else
                context = this;
            return context;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:57:35.153

**TabActivity**可以识别您切换选项卡时（从一个选项卡切换到另一个选项卡），但它无法识别您是否选择当前选项卡。

> 我正在使用标签栏。我在每个选项卡中有三个以上的屏幕，当我按下所选选项卡的选项卡按钮时，它应该转到该选项卡的第一个屏幕，但它没有。

为此，您需要在 TabActivity 中实现**onTouchListener**。

请参考此链接以解决您的问题。 [选择当前选项卡时收到通知](https://stackoverflow.com/questions/5487770/get-notified-when-current-tab-is-selected-again)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T05:39:14.710

将“FLAG_ACTIVITY_CLEAR_TOP”标志放入您的根活动意图中

```
Intent intent;

        intent = new Intent().setClass(this, DealsActivityGroup.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        spec = tabHost.newTabSpec(TAG_DEALS)
                .setIndicator(TAG_DEALS, res.getDrawable(R.drawable.deal_icon))
                .setContent(intent);
        tabHost.addTab(spec); 
```

对选项卡的所有根意图执行相同操作，在更改选项卡后，您将通过执行此操作获得选项卡的第一个屏幕，您必须实现选项卡 ontouch 侦听器并将此意图放在触摸事件中

# php - PHP 清理“&$”

> ID：13451206
> 
> 赞同：1
> 
> 时间：2012-11-19T09:47:12.537
> 
> 标签：php, html, unicode

我正在尝试将 HTML 转换为纯文本。我得到很多`&\#8217;` `&\#8220;`等等。

我努力了：

1.  `html2text`命令行
2.  `html_entity_decode`+ `ENT_QUOTES`|`ENT_HTML401` `UTF-8`
3.  `html_entity_decode(htmlentities($str))`
4.  `strip_tags`
5.  `trim`

它确实对清理其他东西有很大帮助，但这些东西`&\#8217;` `&#8220;`并没有得到修复。如何正确转换它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:51:56.100

你试过“htmlspecialchars_decode”吗

```
<?php
$str = "<p>this -&gt; &quot;</p>\n";
echo htmlspecialchars_decode($str);
// note that here the quotes aren't converted
echo htmlspecialchars_decode($str, ENT_NOQUOTES);
?> 
```

上面的示例将输出：

```
<p>this -> "</p>
<p>this -> &quot;</p> 
```

# asp.net - asp.net 中用于特殊土耳其字符的字符集 utf-8

> ID：13451209
> 
> 赞同：4
> 
> 时间：2012-11-19T09:47:20.573
> 
> 标签：asp.net, razor, utf-8, character-encoding

我把`<meta http-equiv="content-type" content="text/html; charset=utf-8" />`头部和 DOCTYPE 放在我的顶部`_Layout.cshtml`，但是当我查看网站时，特殊的土耳其字符显示为 '1; 等在**源**中，而不是在页面中。网页正确显示它们，源文件有问题..你知道我应该做些什么来纠正这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-09T02:57:29.083

尝试将源文件保存为**带有**BOM 的 UTF-8。
我遇到了类似的问题，似乎 Razor 期望文件具有 BOM 签名。

在 Visual Studio 中：文件 > 高级保存选项：

![高级保存选项对话框](../Images/42a8bf23fa9497364fdedafbd17bdce9.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-10T22:27:04.837

我遇到了完全相同的问题，尝试了所有解决方案，但都没有奏效，使用 Notepad++ 检查 .cshtml 文件编码是否正确（带有 BOM 的 utf8），带有编码的 SaveAs 文件（如上所示），但问题仍然存在。

最后我发现我的剃须刀文件没有问题，似乎 ASP.Net core MVC 没有将 UTF-8 编码设置为默认编码，如果开发人员需要，必须设置它。

`ConfigureServices`我在方法的末尾添加了以下代码`Program.cs`（它将UTF-8编码添加到默认编码）并且问题解决了。

```
services.AddWebEncoders(o => {
            o.TextEncoderSettings = new System.Text.Encodings.Web.TextEncoderSettings(UnicodeRanges.All);
        }); 
```

# c# - WCF 服务在第一次调用时达到高内存使用率

> ID：13451211
> 
> 赞同：6
> 
> 时间：2012-11-19T09:47:24.423
> 
> 标签：c#, .net, wcf, web-services, iis

我们有一个 WCF 服务作为 BL 服务。该服务处于混合传输模式，具有 10 多个不同的端点，由 BasicHttpBinding 绑定，它们具有不同的合同和相同的地址。该服务在 IIS-7 上的应用程序池上运行。

问题是，服务运行正常，但第一次调用后，即使获取到WSDL，w3wp.exe的内存使用量直接达到300兆，服务内存使用量不断增加，占据了所有物理内存服务器 (98 - 100 %)。我们没有出现内存不足异常，但是这种情况会减慢其他应用程序和服务的速度，因此我们需要每隔几天手动刷新一次应用程序池。我已经尝试使用内存分析工具，但没有找到任何导致问题的原因。

有没有人遇到过这个问题？如果是，你做了什么？

附加信息：

*   BL 服务位于基于 NHibernate 的 DAL 框架之上，我们已经排除了内存泄漏源自那里。
*   配置文件

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <configuration>
        <appSettings>
        </appSettings>   
        <system.web>
            <compilation debug="true" targetFramework="4.0" />
            <httpRuntime maxRequestLength="20000" requestLengthDiskThreshold="20000" />
        </system.web>     
        <system.serviceModel>     
            <behaviors>
                <serviceBehaviors>
                    <behavior name="DefaultServiceBehavior">
                        <serviceMetadata httpGetEnabled="true" />
                        <serviceDebug includeExceptionDetailInFaults="true" />
                    </behavior>
                </serviceBehaviors> 

                <endpointBehaviors>
                    <behavior name="AnonymousBehavior">
                    </behavior>
                </endpointBehaviors>
          </behaviors>

          <bindings>
              <basicHttpBinding>
                  <binding name="SecureBinding" 
                   closeTimeout="00:10:00" 
                   openTimeout="00:10:00" receiveTimeout="00:10:00" 
                   sendTimeout="00:10:00" allowCookies="true" 
                   hostNameComparisonMode="StrongWildcard" maxBufferSize="65536000" 
                   maxBufferPoolSize="524288000" maxReceivedMessageSize="65536000" 
                   transferMode="Buffered">
                      <readerQuotas maxDepth="20000000"
                       maxStringContentLength="8192000"
                       maxArrayLength="16384000"
                       maxBytesPerRead="4096000"
                       maxNameTableCharCount="16384000" />
                          <security mode="None">
                              <transport clientCredentialType="None"/>
                          </security>
                  </binding>
             </basicHttpBinding>         
        </bindings>

    <services>
    <service name="BL.Services.MyService"
    behaviorConfiguration="DefaultServiceBehavior">

    <endpoint address=""
    binding="basicHttpBinding"
    bindingConfiguration="SecureBinding"
    bindingNamespace="Security/Anonymous"
    behaviorConfiguration="WithSecurityContextInspector"
    contract="BL.Services.Contracts.IAnonymousClaimsService" />

    <endpoint address=""
    binding="basicHttpBinding"
    bindingConfiguration="SecureBinding"
    bindingNamespace="Domain/App"
    behaviorConfiguration="WithSecurityContextInspector"
    contract="BL.Services.Contracts.IAppService" />

    <endpoint address=""
    binding="basicHttpBinding"
    bindingConfiguration="SecureBinding"
    bindingNamespace="Domain/App"
    behaviorConfiguration="WithSecurityContextInspector"
    contract="BL.Services.Contracts.IAttachmentService" />

    <endpoint address=""
    binding="basicHttpBinding"
    bindingConfiguration="SecureBinding"
    bindingNamespace="Domain/Site"
    behaviorConfiguration="WithSecurityContextInspector"
    contract="BL.Services.Contracts.ISecurityService" />

    <endpoint address=""
    binding="basicHttpBinding"
    bindingConfiguration="SecureBinding"
    bindingNamespace="Domain/Transaction"
    behaviorConfiguration="WithSecurityContextInspector"
    contract="BL.Services.Contracts.ITransactionService" />

    <endpoint address=""
    binding="basicHttpBinding"
    bindingConfiguration="SecureBinding"
    bindingNamespace="Domain/ActiveDirectory"
    behaviorConfiguration="WithSecurityContextInspector"
    contract="BL.Services.Contracts.IActiveDirectoryService" />

    <endpoint address=""
    binding="basicHttpBinding"
    bindingConfiguration="SecureBinding"
    bindingNamespace="Domain/Report"
    behaviorConfiguration="WithSecurityContextInspector"
    contract="BL.Services.Contracts.IReportService" />

    <host>
    <baseAddresses>
    <add baseAddress="//MyService.svc" />
    </baseAddresses>
    </host>
    </service>
    </services>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    </system.serviceModel>
    <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <defaultDocument>
    <files>
        <add value="MyService.svc" />
    </files>
    </defaultDocument>
    </system.webServer>
    </configuration> 
    ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T14:29:24.090

正如 AnkMannen 所说，300MB 并不罕见。大量使用的服务很容易达到 700MB 或更多。您对消耗最多可用服务器内存但未触发内存不足异常的服务的第二次观察可能是由于**非默认**配置值：

```
binding:
maxBufferSize="65536000"
maxBufferPoolSize="524288000"
maxReceivedMessageSize="65536000"
transferMode="Buffered"

readerQuotas:
maxDepth="20000000"
maxStringContentLength="8192000"
maxArrayLength="16384000"
maxBytesPerRead="4096000"
maxNameTableCharCount="16384000" 
```

您实际上正在配置 WCF 以使用您选择的值消耗过多的内存。除非您遇到需要更改任何这些属性的默认值的特定情况，否则不要更改它们。我经常更改的唯一值是`maxReceivedMessageSize`从默认的 64K 到大约 1 到 2 MB，如果不可避免的话。如果您经常使用大于 3 MB 的消息，您应该重新考虑您的数据合约设计。许多 WCF 被指责的性能问题实际上是错误配置，而不是 WCF 本身的性能问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T09:10:41.847

经过长时间的搜索，我们发现了问题。我们的服务在一个工作单元模式中使用了很多逻辑单元。每个逻辑单元都继承自一个 BaseLogic 类。在 BaseLogic 单元中有一个 Enterprise Library UnityContainer 属性，它创建了一个工厂。每次调用都会创建该工厂的许多实例，将此属性更改为静态属性可以解决问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-19T10:04:22.043

第一次初始跳转到 300MB 与我在我们的应用程序中看到的一致。还没有真正找到减少这个数字的方法，但随着时间的推移它会保持在这个数字。

对于越来越多的内存，这听起来像是标准的内存泄漏或至少是 GC 问题。您是否使用实体框架，您是否使用 Red Gates Memory Profiler 之类的工具进行分析，而不是内置的 VS 分析器？

根据问题中的信息，很难给出更具体的答案。

同时，尝试使用应用程序池的 IIS 自动刷新。将其设置为您选择的阈值并让它自动处理刷新。

# wordpress - wordpress 主题上的主菜单不会延续到新的复制粘贴主题

> ID：13451213
> 
> 赞同：0
> 
> 时间：2012-11-19T09:47:42.460
> 
> 标签：wordpress, wordpress-theming

抱歉，这里是 Wordpress 的新手。

我复制粘贴了一个现有的主题。大部分看起来都不错。但是，似乎主菜单样式和菜单项并未延续到新主题中。新主题没有样式，因为它没有`menu-top`原始主题的 id 。此外，新主题的菜单项太多了，而原来的主题只有 4 个。

我要进行哪些更改才能使我的新主题的主菜单获得该 ID，并包含相同的菜单项？

我检查了 Admin > Appearance > Menu 并且它正确地有 4 个项目，但它没有反映在我的新主题中。

此外，在 header.php 中，我尝试添加`'menu_id' => 'menu-top'`：

`wp_nav_menu( array( 'container'=>'none', 'theme_location' => 'primary' ) );`

但这并没有改变任何东西。

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:10:18.290

我 99% 确定，问题在于您没有在“主要”主题位置选择菜单，因此 WordPress 会显示您的所有页面。

要解决此问题，请前往`Appearance > Menus`查看您是否还有旧菜单。如果这样做，只需在左侧的“主要”下拉菜单中选择此菜单，然后单击保存。

如果您不再有菜单，请重建菜单并选择它作为主题位置。在那之后，事情应该会好起来的。

# css - 需要有关 css3 动画播放状态的当前帮助

> ID：13451214
> 
> 赞同：1
> 
> 时间：2012-11-19T09:47:43.113
> 
> 标签：css

我只需要知道动画是否更改了在动画发生之前定义的原始 css 值？

据我所知，答案是*肯定*的，但我有一个问题。我在 div 中放置了一个图像，我只想在它悬停时在其上运行动画。在图像中设置为“暂停”的动画播放状态帮助我停止动画，直到图像上发生悬停。悬停图像时，动画播放状态设置为“正在运行”。

一切都很顺利，但突然我注意到，如果动画改变了原始的 css 值，那么当鼠标悬停在图像上时，之前设置的动画播放状态也应该永久更改为“暂停”，然后继续播放动画。但是动画只在悬停状态下播放！为什么？

HTML

```
<div class="hs-wrapper">
    <img src="i.jpg" alt="image01"/>
    <img src="a.jpg" alt="image01"/>
    <img src="c.jpg" alt="image03"/>
    <img src="d.jpg" alt="image04"/>
    <img src="e.jpg" alt="image05"/>
    <img src="f.jpg" alt="image06"/>
</div> 
```

**CSS**

```
.hs-wrapper img {
    width: 333px;
    height: 500px;
    top: 0px;
    left: 0px;
    position: absolute;
    -webkit-animation: showMe 0.8s linear infinite 0s forwards;
    -moz-animation: showMe 0.8s linear infinite 0s forwards;
    -o-animation: showMe 0.8s linear infinite 0s forwards;
    -ms-animation: showMe 0.8s linear infinite 0s forwards;
    animation: showMe 0.8s linear infinite 0s forwards;
    -webkit-animation-play-state: paused;
    -moz-animation-play-state: paused;
    -o-animation-play-state: paused;
    -ms-animation-play-state: paused;
    animation-play-state: paused;
}

.hs-wrapper:hover img {
    -webkit-animation-play-state: running;
    -moz-animation-play-state: running;
    -o-animation-play-state: running;
    -ms-animation-play-state: running;
    animation-play-state: running;
}

@-moz-keyframes showMe {
    0% {
        visibility: visible;
        z-index: 100;
    }

    12.5% {
        visibility: visible;
        z-index: 100;
    }

    25% {
        visibility: hidden;
        z-index: 0;
    }

    100% {
        visibility: hidden;
        z-index: 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:06:07.510

Maizere what you should do is add a jquery event listener for when a user hovers over the image, once that happens, change the play state rules in your .hs-wrapper img section to all say running. That is the best solution.

# php - 我做错了什么？

> ID：13451215
> 
> 赞同：-3
> 
> 时间：2012-11-19T09:47:47.463
> 
> 标签：php, mysql, sql

我做错了什么？

```
$addedby=$_SESSION['id'];

$text="Subject: I want to add a New Phone Name :$name   Address :$address   Phone :$phone                 Category :$category   Email :$email   Website :$website    Details :$details";
$sql = "INSERT INTO messages SET  text='$text' , from='$addedby'";
mysql_query($sql) or die('Website Under Maintanance '.mysql_error()); 
```

Id 是整数，from 是`varchar(30)`。

请告诉我我做错了什么？

错误是：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'from='1' 附近使用的正确语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:50:00.347

你应该试试

```
$sql = "INSERT INTO messages (`text`,`from`) values ('$text' , '$addedby')"; 
```

请注意，在组装 SQL 查询之前，您应该始终清理您的手动输入，因为 SQL 注入非常讨厌，并且可以很容易地对您的数据库执行任何操作......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T09:50:18.587

这是正确的[**`INSERT`**](http://dev.mysql.com/doc/refman/5.5/en/insert.html)语法：

```
INSERT INTO messages(`text`, `from`) VALUES('$text', '$addedby'); 
```

**请注意：**您的代码采用这种方式，容易被[**SQL 注入**](http://en.wikipedia.org/wiki/SQL_injection)使用 PDO 或准备好的语句代替。有关更多信息，请参阅以下帖子：

*   [**防止SQL注入的最佳方法？**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:51:01.623

`$sql = "INSERT INTO messages SET text='$text' , from='$addedby'";`

应该

```
$sql = "INSERT INTO messages (`text`,`from`) VALUES('$text','$addedby')"; 
```

请开始使用`mysqli`or`PDO`代替 Mysql。它被弃用了。

您应该认真阅读一些有关 SQL 的示例和内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T09:53:54.630

你做错了什么：

1.  你没有提供足够的信息来回答这个问题。
2.  您不使用 PDO 代替 mysql_query。
3.  您的 SQL（可能）容易受到 SQL 注入的攻击。
4.  您使用`or die`构造而不是异常。
5.  您向用户显示 MySQL 错误消息。
6.  您混合使用 INSERT 和 UPDATE 查询的语法。

您想要的查询是（前提是 $text 和 $addby 被正确转义以防止 SQL 注入）

```
INSERT INTO messages (`text`, `from`) VALUES ('$text', '$addedby') 
```

# java - 为泛型类的每个类型参数创建单独的单例的最佳习惯用法？

> ID：13451217
> 
> 赞同：1
> 
> 时间：2012-11-19T09:47:55.940
> 
> 标签：java, generics, static, singleton, idioms

[（也许是“如何在 Java 中创建通用单例类？”](https://stackoverflow.com/q/75175/1593077)的补充问题：）

```
class MyClass<T> {
    private static Map<Class<MyClass<?>>, MyClass<?>> s_instances =
        new HashMap<Class<MyClass<?>>, MyClass<?>>();

    public static MyClass<?> blah(Class<MyClass<?>> clz)
            throws InstantiationException, IllegalAccessException {
        if (s_instances.get(clz) != null)
            return s_instances.get(clz);
        MyClass<?> instance = clz.newInstance();
        s_instances.put(clz, instance);
        return instance;
    }
} 
```

有一个更好的习惯用法来让每个类型参数值都具有一个单例吗？

**编辑**：请不要回答仅仅指出缺乏线程安全性。取点。我在问我是否可以做一些比这张地图更优雅的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:23:59.127

请不要那样做。
A. 你的单例不是线程安全的。
B. 注意[Java 的双重检查模式问题](https://stackoverflow.com/a/3580658/1593077)。
C. 在每个类中都有静态初始化程序并拥有：

```
static {
   instance = new MySingleton();
} 
```

进而

```
public static MySingleton getInstance() {
return instance
} 
```

如果你真的坚持 -
1\. 你可以定义一个单例来管理映射中的类型到一个实例（键是类或完整的类名，值是对象）
2\. 你可以在那里添加注册你想要的类型（我建议他们有私人 CTOR）。
3\. 使用[这个](https://stackoverflow.com/questions/5629706/java-accessing-private-constructor-with-type-parameters)答案来调用私有 CTOR ，并创建一个实例以放置在映射条目的值中。
4\. 向1中提到的repository提供一个getInstance方法，签名为：

```
public Object getInstanceByType(Class<?> clazz) 
```

此方法将从内部映射中获取实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:28:02.940

您的方法不是线程安全的：

```
private static Map<Class<MyClass<?>>, MyClass<?>> s_instances =
    new HashMap<Class<MyClass<?>>, MyClass<?>>();

public static MyClass<?> blah(Class<MyClass<?>> clz)
        throws InstantiationException, IllegalAccessException {
    if (s_instances.get(clz) != null)
        return s_instances.get(clz);
    // here1
    MyClass<?> instance = clz.newInstance();
    s_instances.put(clz, instance);
    // here2
    return instance;
} 
```

一旦一个线程越过标记的行`//here1`，第二个线程可能会在第一个线程到达标记的行之前进入该方法`//here2`，因此创建第二个相同类型的“单例”并覆盖映射中的第一个。

快速修复将是在地图上同步：

```
public static MyClass<?> blah(Class<MyClass<?>> clz)
        throws InstantiationException, IllegalAccessException {
  synchronized(s_instances){
    if (s_instances.get(clz) != null)
        return s_instances.get(clz);
    // here1
    MyClass<?> instance = clz.newInstance();
    s_instances.put(clz, instance);
    // here2
    return instance;
  }
} 
```

但是，这意味着许多线程将不得不等待很多时间，最终可能会杀死您的应用程序。可能你应该做的是一个两步的解决方案：

```
public static MyClass<?> blah(Class<MyClass<?>> clz)
        throws InstantiationException, IllegalAccessException {
  Object candidate = s_instances.get(clz);
  if(clz.isInstance(candidate)){ // implicit null check
      return clz.cast(candidate);
  }
  synchronized(s_instances){
    Object candidate = s_instances.get(clz);
    if(clz.isInstance(candidate)){  // gotta check a second time in a
        return clz.cast(candidate); // synchronized context
    }
    MyClass<?> instance = clz.newInstance();
    s_instances.put(clz, instance);
    return instance;
  }
} 
```

此外，HashMap 不适合并发访问，因此您应该将其包装在`Collections.synchronizedMap()`：

```
private static Map<Class<MyClass<?>>, MyClass<?>> s_instances =
    Collections.synchronizedMap(new HashMap<Class<MyClass<?>>, MyClass<?>>()); 
```

或者用 a`ConcurrentHashMap`代替。

# java - 如何将字符串“24-10-2012”解析为日期（dd-mm-yyyy）格式？

> ID：13451219
> 
> 赞同：-1
> 
> 时间：2012-11-19T09:47:59.340
> 
> 标签：java, date, simpledateformat

我正在使用 jdk-1.6。我尝试将字符串“24-10-2012”解析为日期（24-10-2012），但我收到此错误：

```
java.text.ParseException: Unparseable date: "18-11-2012"
java.text.DateFormat.parse(DateFormat.java:354) 
```

我是这样解析的：

```
SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
String currentDate = "24-10-2012";
 Date date = formatter.parse(currentDate); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:51:43.747

```
SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
String currentDate = "24-10-2012";
System.out.println(formatter.parse(currentDate)); 
```

印刷

```
Wed Oct 24 00:00:00 CEST 2012 
```

您发布的代码无法重现您的问题。

我的假设：您的异常是从一段代码引发的，而不是您指责错误的代码。您可以尝试仔细分析堆栈跟踪以追查真正的罪魁祸首。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T03:45:28.837

java中的日期不包含任何格式。阅读[更多...](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:52:12.103

当我跑

```
SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
String currentDate = "24-10-2012";
Date date = formatter.parse(currentDate);
System.out.println(date);
System.out.println(formatter.format(date)); 
```

我明白了

```
Wed Oct 24 00:00:00 BST 2012
24-10-2012 
```

正如我所料。你能弄清楚问题是什么吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T10:58:08.180

```
import java.util.Date;
import java.text.SimpleDateFormat;

public class SimpleFormatDate
{
  public static void main(String args[]){
  Date todaysDate = new java.util.Date();
  // Formatting date into  yyyy-MM-dd HH:mm:ss e.g 2008-10-10 11:21:10

  SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
  String formattedDate = formatter.format(todaysDate);
  System.out.println("Formatted date is ==>"+formattedDate);

  // Formatting date into  yyyy-MM-dd e.g 2008-10-10 
  formatter = new SimpleDateFormat("yyyy-MM-dd");
  formattedDate = formatter.format(todaysDate);
  System.out.println("Formatted date is ==>"+formattedDate);

  // Formatting date into  MM/dd/yyyy e.g 10/10/2008 
  formatter = new SimpleDateFormat("MM/dd/yyyy");
  formattedDate = formatter.format(todaysDate);
  System.out.println("Formatted date is ==>"+formattedDate);
  }
} 
```

输出

```
Formatted date is ==>2008-10-10 13:03:54
Formatted date is ==>2008-10-10
Formatted date is ==>10/10/2008 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T09:54:19.383

您可以将其用于“dd-mm-yyyy”格式

```
 SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy"); 
    String currentDate = "24-10-2012";
    Date date = formatter.parse(currentDate);
    System.out.println(formatter.format(date)); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-19T09:56:07.337

等一下..如果你有一个正确的值，为什么你需要解析它？无论如何，我用这个：

```
SimpleDateFormat oFormat = new SimpleDateFormat("yyyy-MM-dd");
String sDate = oFormat.format("24-10-2012"); 
```

它将出现日期如 2012-10-24。所以如果你想解析为 dd-MM-yyyy，你只需要将格式更改为你想要的。

注意：对不起，如果我的英语不好。:D

# wordpress - 如何托管两个网站？

> ID：13451229
> 
> 赞同：0
> 
> 时间：2012-11-19T09:48:32.973
> 
> 标签：wordpress, .htaccess

更新：好的，特斯拉（用户）用一个 php 片段（在下面）解决了大部分问题，所以我剩下的问题是如何处理 public_html .htaccess 中的这段代码：

```
# BEGIN WordPress
  <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
  </IfModule>

 # END WordPress 
```

public_html 中的 Index.php 目前是加载 wordpress 的内容。

Index2.php 是我的新站点。我非常想将其重命名为 index.php，以便启动新站点。但我对去哪里有点困惑。

* * *

我的（原始）问题：我想要它，以便当您访问 www.mysite.com 时，如果您使用的是 webkit，它将加载仅 webkit 的站点。但如果你运行的是 IE 或 Opera 或其他任何东西，你会被带到 www.mysite.com/wordpress

我正在失去理智试图弄清楚这一点。

我已经在其他地方发布了这个问题，并得到了一些很好的答案，但我仍然遇到了这个问题。

我安装了一个 wordpress 网站，运行良好，但我讨厌 wordpress，主要是因为它在每次点击时都会重新加载整个网站，而且总体上感觉“沉重”。

无论如何，我建立了一个新网站，但我很讨厌跨浏览器的友好性，所以暂时它是一个仅限 webkit 的网站，我实际上完全可以接受。这是一个非常漂亮的单页网站，通过 ajax 加载到各种相关页面中。它有大量的动画、平滑滚动等，我真的&*^% 对它很满意。

再说一次，我想要它，以便当您访问 www.mysite.com 时，如果您使用的是 webkit，它将加载新的仅 webkit 站点。但如果你运行的是 IE 或 Opera 或其他任何东西，你会被带到 www.mysite.com/wordpress

我一直想弄清楚这一点，但这样做我会心脏病发作。我一直在犯错误（我不是 PHP 程序员）。我讨厌做服务器级的事情，因为这意味着我必须让网站离线，然后玩弄生死攸关的事情。

我需要的是一步一步的演练准确地做什么，每一步，直到拥有 www.mysite.com（仅限 webkit）加上 www.mysite.com/wordpress（对于所有其他访问者）已实现。

这个网站的某个人给了我这个片段，效果很好：

（放置在根 index.php 中）

```
<!DOCTYPE html>
<?php   

$navigator_user_agent = ' ' . strtolower($_SERVER['HTTP_USER_AGENT']);
if (strpos($navigator_user_agent, "webkit")) { 
?>

//page goes here (html, jquery, content etc.) Then, all the way at the bottom:

<?php
} else {

    header('Location: www.mysite.com/wordpress'); //redirects user to the given location
  }
?> 
```

它就像一个魅力。Webkit 获取新站点，Opera、IE 等最终被发送到该 URL。

问题是 wordpress 还想在根目录中使用一个名为 index.php 的文件。

下一个问题是如何正确修改 htaccess，这样它就不会与我正在尝试做的事情发生冲突。

听着，如果这要求太多，我完全愿意按小时付费。我只是不认识任何人，但是如果有资格的人想上 Skype 并帮助我做这件事，也许这比在线讨论还要好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:14:30.633

假装你的网站是这个

```
<html>
  <head>
    //stuff here
  </head>
  <body>
    //stuff here
  </body>
</html> 
```

将以下内容添加到该文件的顶部

```
<?php   
if (strpos(strtolower($_SERVER['HTTP_USER_AGENT']), "webkit") === false) { 
  header('Location: www.mysite.com/wordpress'); //redirects user to the given location
  exit;
}
?> 
```

所以现在你有

```
<?php   
if (strpos(strtolower($_SERVER['HTTP_USER_AGENT']), "webkit") === false) { 
  header('Location: www.mysite.com/wordpress'); //redirects user to the given location
  exit;
}
?>

<html>
  <head>
    //stuff here
  </head>
  <body>
    //stuff here
  </body>
</html> 
```

将此文件保存为 public_html 中的 index.php。

您的 wordpress 网站应移至 public_html/wordpress

在那之后一切都应该工作

编辑：至于您更新的问题，也将 .htaccess 移至 public_html/wordpress，其中的所有内容都是针对 wordpress 的。在 public_html 文件夹中，您可以创建一个空白的 .htaccess，或者暂时没有，直到您需要一个用于 mysite.com 的文件。

# android - 如何从终端/外壳调整物理 android 屏幕的大小

> ID：13451231
> 
> 赞同：32
> 
> 时间：2012-11-19T09:48:36.023
> 
> 标签：android, resize, adb, screen, tablet

不久前，我能够在 Android 上调整屏幕大小。例如，我有一个 Xoom，并且能够运行来自 ADB 的命令，该命令将其缩小到 7 英寸屏幕（周围留有黑色边框）。当然，它有点错误，因为 home/back/app-开关按钮消失了，但我知道这是可能的。这是一个 1 行命令，我在其中输入 Xoom 的 X 和 Y 像素的新屏幕分辨率。

我想知道是否有人熟悉这个，并且知道怎么做。

（如果有人说这是不可能的，我可以向你保证是的）

（我想这样做，这样我就可以在我的 Nexus 10 上测试各种屏幕尺寸的应用程序，而且我不想使用模拟器）

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-09-03T21:00:38.540

[Android 开发者 Adam Powell 在 Google+ 上](https://plus.google.com/u/0/+AdamWPowell/posts/cz5TxuoNDfG)对 Jelly Bean 4.3 的此答案的更新（通过[此 SO 答案](https://stackoverflow.com/a/14322631/2577986)找到的链接）：

> 在 Android 4.3 中，这些选项从“am”命令 (ActivityManager) 移至“wm”命令 (WindowManager)。输入“adb shell wm”了解详情。

所以你现在可以在 4.3 设备上运行：

`adb shell wm size 1280x800`或任何大小或`reset`

和

`adb shell wm density 480`或任何密度或`reset`

只需确保在您运行命令时屏幕当前未显示。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-19T15:24:16.810

我相信它是：

```
adb shell am display-size 
```

但我远离电脑去尝试。一个示例用法是：

```
adb shell am display-size 640x480 
```

# search - 网站上的动态数据库搜索结果

> ID：13451232
> 
> 赞同：2
> 
> 时间：2012-11-19T09:48:39.323
> 
> 标签：search, dynamic, web, content-management-system

这个问题与网站编程有关。我的主要语言是 c++/c#，我对 Web 开发了解不多，除了说我了解 html 和 css。这就是为什么我正在寻找一个相对简单的解决方案，最好是开箱即用的东西。我对 JavaScript 没有任何经验，但为了这个项目，我愿意在必要时学习它。

假设我有一个数据库，其中每个条目都是关于一本书的。它包含以下字段：标题、作者和出版日期。

我想创建一个带有搜索框的简单网站，该搜索框具有此动态结果功能，以便您在输入几个字母后获得建议。所有这些建议以及搜索结果都需要完全基于数据库。

这可能是一个静态网站或基于任何内容管理系统，我对 Joomla 很熟悉，但无法找到可以做到这一点的开箱即用组件。所有这些搜索模块搜索整个网站，我只需要搜索数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:00:28.967

可能我可以帮助你如何实现这个功能。我们曾经将此功能称为自动完成菜单。

首先，您决定填充自动完成菜单的最少字符。例如 2

通过使用 javascript，您可以编写 keyup 事件。一旦字符数达到最小字符数。您向服务器发送 AJAX 请求。

服务器应处理此请求并进行数据库搜索并形成 json 或 xml 响应或纯文本给客户端。

客户端将该响应解析为 javascript 对象，并使用数据构造一个用于自动完成菜单的动态 html，并将其呈现到 DOM 中，因此显示在搜索文本框的正下方。

现在，如果您想在键入时在文本框中显示第一个结果。这是我可以建议的类似于谷歌搜索框的方法

在输入文本框的正下方放置一个标签或跨度。通过使用 css 使其位置与文本框的位置完全匹配。确保输入文本和标签的文本开头都匹配。使标签的文本颜色比文本的字体颜色更亮。标签的字体大小和字体系列应与输入文本字段的样式相匹配。现在通过使用 Javascript 在标签内显示第一个或最匹配的文本。请在下面找到示例代码

```
 <!DOCTYPE html>
     <head>
       <style>
         label {
           position:relative;
         }
         body, input {
      font-family: 'verdana';
      font-size: 12px;
         }

      </style>
    </head>
    <html>
    <body>

      <form action="demo_form.asp">
        <input type="text" name="fname" placeholder="Matched Text" /><br>
        <label> Matched Text</label><br>
     </form>

   </body>
  </html> 
```

# macos - 以编程方式将应用程序图标添加到安装时停靠

> ID：13451234
> 
> 赞同：8
> 
> 时间：2012-11-19T09:48:45.297
> 
> 标签：macos, package, dmg

我希望我的应用程序在安装包 (DMG) 后自动添加到扩展坞？

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T09:55:11.443

有几种方法可以做到这一点，Andrew，这在很大程度上取决于您如何进行应用程序安装。

如果您正在使用 PackageMaker 安装您的应用程序，您可以运行“postflight”脚本，将您的应用程序图标添加到 Dock 的“默认值”（即首选项）。[这个较旧的 MacRumors 线程显示了如何做到这一点](http://forums.macrumors.com/showthread.php?t=344100)。

如果您没有使用 PackageMaker，那么您可能必须在您的应用程序中运行一个 Applescript，它执行相同的“默认”写作技巧。[这是 AskDifferent 上的一个线程，它显示了](https://apple.stackexchange.com/questions/64307/alternative-to-additemtodock-from-henri-shustak).

在这两种情况下，您都需要关闭扩展坞（或 Finder？）并重新启动它，以便获取并显示更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-17T15:12:35.790

我建议您运行以下 AppleScript 代码，替换`myapp`为您要添加到 de Dock 的应用程序，包括其路径。

在下面的示例中，我添加了系统应用程序“系统偏好设置”，但您可以对自己的路径执行相同操作，只需将应用程序的路径分配给`myapp`变量即可。

```
 on run
   set myapp to "/Applications/System Preferences.app"
   try
     tell application "Dock" to quit
   end try
   do shell script "defaults write com.apple.dock persistent-apps -array-add '<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>" & myapp & "</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>'"
   try
     tell application "Dock" to activate
   end try
 end run 
```

这遵循迈克尔给出的建议，但它应该更温和，因为它只是*退出*Dock 而不是感谢杀死它。

如果您更喜欢 bash，您可以运行以下代码，再次将您自己的应用程序的路径分配给`myapp`变量。

**注意**：在 bash 案例中，您必须在指定路径时使用双斜杠，如示例中所示。

```
#!/bin/bash
myapp="//Applications//System Preferences.app"
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>$myapp</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"
osascript -e 'tell application "Dock" to quit'
osascript -e 'tell application "Dock" to activate' 
```

# python - 如何优雅地将 zip 文件夹内容与解压缩文件夹内容进行比较

> ID：13451235
> 
> 赞同：7
> 
> 时间：2012-11-19T09:48:48.973
> 
> 标签：python, zip, backup, unzip

这就是场景。我希望能够使用 python 脚本备份文件夹的内容。但是，我希望我的备份以压缩格式存储，可能是 bz2。

问题在于，如果“当前”文件夹中的内容与我最近备份的内容完全相同，我不想费心备份该文件夹。

我的过程将是这样的：

1.  启动备份
2.  根据最新压缩备份中存储的内容检查“当前”文件夹的内容
3.  如果相同 - 则“完成”</li>
4.  如果不同，则运行备份，然后“完成”</li>

任何人都可以推荐完成第 2 步的最可靠和最简单的方法吗？我是否必须解压缩备份的内容并将其存储在临时目录中才能进行比较，还是有更优雅的方法来做这件事？可能与修改日期有关？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T12:26:08.447

Zip 文件包含 CRC32 校验和，您可以使用 python zipfile 模块读取它们：http: [//docs.python.org/2/library/zipfile.html](http://docs.python.org/2/library/zipfile.html)。您可以从 ZipFile.infolist() 获取具有 CRC 成员的 ZipInfo 对象列表。ZipInfo 对象中也有修改日期。

您可以将 zip 校验和与解压缩文件的计算校验和进行比较。您需要阅读解压后的文件，但不必解压缩所有内容。

CRC32 不是加密校验和，但如果您只需要检查更改就足够了。

这适用于 zip 文件。其他存档格式（如 tar.bz2）可能不包含此类易于访问的元数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:56:29.240

Rsync 会自动检测并只复制修改过的文件，但是当你想要 bzip 结果时，你仍然需要检测是否有任何变化。

您如何将目录列表（包括时间戳）输出到存档旁边的文本文件中。下次您`diff`针对此存储文本的当前目录结构。您可以 grep 差异并将此文件列表通过管道传输到 rsync 到`include`那些更改的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T11:42:31.733

您也可以尝试以下过程：

1) 启动备份

2) 运行备份

3）比较两个压缩文件：

```
import filecmp
filecmp.cmp(Compressed_new_file, Compressed_old_file, shallow=True) 
```

4）如果相同 - 删除新的备份文件然后“完成”

5) 否则“完成”</p>

注意：如果您只需要检查修改之间的时间，您可以查看[此文档](http://docs.python.org/3/library/os.html#os.stat)

与其解压缩文件夹并比较单个文件，我认为比较压缩文件可能更容易。总的来说，我觉得（好吧，这只是一种直觉：D）如果文件夹的内容很可能在您运行脚本的时间之间发生变化，这会更好

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T15:25:45.263

仅当上次备份后目录内容发生更改时，我才使用此脚本创建目录的压缩备份。

我使用外部 md5 文件来存储备份文件的摘要，并检查它以检测目录更改。

```
import hashlib
import tarfile
import bz2
import cStringIO
import os

def backup_dir(dirname, backup_path):
    fobj = cStringIO.StringIO()
    t = tarfile.open(mode='w',fileobj=fobj)
    t.add(dirname)
    t.close()
    buf = fobj.getvalue()
    new_md5 = hashlib.md5(buf).digest()

    if os.path.isfile(backup_path + '.md5'):
        old_md5 = open(backup_path + '.md5').read()
    else:
        old_md5 = ''

    if new_md5 <> old_md5:
        open(backup_path, 'wb').write(bz2.compress(buf))
        open(backup_path + '.md5', 'wb').write(new_md5)
        print 'backup done!'
    else:
        print 'nothing to do' 
```

# javascript - 如何扭曲一组随机数的分布？

> ID：13451236
> 
> 赞同：2
> 
> 时间：2012-11-19T09:48:51.097
> 
> 标签：javascript, math, random, numbers, distribution

我想设计一种算法，它会给我随机的数字，因为我不知道它们会是什么，但与此同时，更接近的数字`0`必须更有可能作为输出出现，而那些更接近`1`一定不太可能。我想同时使用线性和指数分布，所以请至少给出实现两者的提示。

我已经考虑过如何解决这个问题，但我仍然没有任何线索，所以任何指针都将不胜感激。

注意：我不打算讨论，也不了解“真实”与“伪”随机性的复杂性......这与安全性或密码学无关，为此我将简单地使用Javascript`Math.random()`是一个种子，所以我们都清楚我在问什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:53:20.060

```
var random = Math.pow(Math.random(), 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:53:57.827

看看泊松分布，也许你可以将它用于你自己的目的，本质上泊松分布不是确定性的，但它有一定的发生频率：维基百科对此有很好的介绍性信息：[http://en.wikipedia .org/wiki/Poisson_distribution](http://en.wikipedia.org/wiki/Poisson_distribution)

算法：

```
algorithm poisson random number (Knuth):
init:
     Let L ← e−λ, k ← 0 and p ← 1.
do:
     k ← k + 1.
     Generate uniform random number u in [0,1] and let p ← p × u.
while p > L.
return k − 1. 
```

# jquery - 如何在将行从一个网格添加到另一个网格时删除行并重新加载网格

> ID：13451239
> 
> 赞同：0
> 
> 时间：2012-11-19T09:49:00.367
> 
> 标签：jquery, jqgrid

我在我的 jqgrid 中使用多选。我正在实现从第一个 jqgrid 到第二个 jqgrid 添加行，同时我从我被选中的第一个网格中删除同一行

通过使用[演示](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithPermanentMultiselect3.htm)，我使用了永久多选概念。

通过使用这个概念，我甚至可以在其他页面中选择行并且我可以复制它。

**我的问题从这里开始：**

我在第一个网格中有 6 条记录，我的行号是 5。所以我将有两页，第一页有 5 行，第二页有第 6 行。

当我选择 page1 中的一行和 page2 中的第 6 行并能够将数据从第一个 jqgrid 移动到第二个 jqgrid 时，同时我需要删除第一个 jqgrid 中的数据。正如我在第 2 页中删除数据时一样，第 6即使我使用了触发器（“reloadGrid”），行也将被删除并且它不显示第 1 页；

这是我用于从第一个 jqgrid 到第二个 jqgrid 添加和删除行的代码

```
var questionids = idsOfSelectedRows;
var questionLength = questionids.length;
for (var i=0; i < questionLength; i++) 
{
 var selectedId = questionids[i];
 var selectedData = $('#questions_list').jqGrid('getLocalRow', selectedId);
 $('#selectedQuestions_list').jqGrid('addRowData', selectedId, selectedData);
 $('#selectedQuestions_list').trigger("reloadGrid");
}

for (var i = 0; i < questionLength ; i++) { 
 var selectedId = questionids[i];
 console.log("delete is "+ $('#questions_list').jqGrid('delRowData', selectedId));
 //$('#questions_list').trigger("reloadGrid");
} 
```

请任何人在代码中提供帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:09:43.793

你从哪里得到`idsOfSelectedRows`？我想您曾经`getDataIDs`获取**当前页面的所有行的**id 。如果使用*本地*网格或带有`loadonce: true`内部参数的网格`data`，`_index`将由 jqGrid 填充。您可以使用`for-in`循环枚举`_index`. 通过这种方式，您将获得网格**所有页面上所有行的**ID 。

此外，如果您添加*多*行，则不应`reloadGrid`在添加每一行后调用。它会多次降低性能。取而代之的是，您可以手动操作目标网格，`_index`然后`data`调用`reloadGrid`一次。

更重要的是，我在上一个问题[的答案](https://stackoverflow.com/a/13444813/315935)中向您解释了您应该编写代码以使其不会产生**id duplicates**。您当前的代码肯定有 id 重复项。具有 id 的行`selectedId`存在于源网格中。如果您使用**具有相同 id**`.jqGrid('addRowData', selectedId, selectedData);`的行将被添加到下一个网格。因此，您将在页面上有两个具有相同 id 的元素。如果您将使用它可以从*另一个网格*中删除行。通常，使用具有 id 重复的页面会产生不可预知的结果。不同的网络浏览器会产生不同的结果。**`selectedId`**`<tr>``.jqGrid('delRowData', selectedId))`

 *如果您不确定是否有 id 重复问题，您应该`idPrefix`在您使用的所有网格中使用具有不同值的选项。*

# php - 使用单个参数对动态 URL 进行 URL 重写

> ID：13451240
> 
> 赞同：-2
> 
> 时间：2012-11-19T09:49:06.773
> 
> 标签：php, .htaccess, mod-rewrite

希望 URL 为：

```
http://localhost/web/a-st/type/car 
```

基本网址是`http://localhost/web/a-st/`

**我尝试过的重写规则：**

```
RewriteEngine On
RewriteRule ^type/([^/]*)$ /type.php?name=$1 [L] 
```

**错误显示：**

找不到对象！

在此服务器上找不到请求的 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:04:19.743

`^`表示开始，因此它将匹配`example.com/type/ca`使用 RewriteBase 或`web/a-st`在重写中定义额外的

```
RewriteEngine On
RewriteBase /web/a-st
RewriteRule ^type/([^/]*)$ /type.php?name=$1 [L] 
```

# algorithm - 找到数组中最长的平面子部分？

> ID：13451241
> 
> 赞同：-3
> 
> 时间：2012-11-19T09:49:29.273
> 
> 标签：algorithm

有人能告诉我什么是最长的平坦小节吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:13:19.693

> 给定一个数组 a[0:n) (n≧0)，如果 ∀i,j:p≦i≦j＜q，则它的子部分 a[p,q) (0≦p≦q≦n) 称为“平面” :a[i]＝a[j]。

翻译成英语为“当且仅当序列中的所有元素彼此相等时，子序列才被认为是平坦的”。由于等式是传递的、自反的和对称的，你可以发现它：

```
pre: a is a sequence of symbols
     n is its length

last = null
bestAt = null
bestLen = -1
for each i in 0..n-1
  if a[i] != last
    thisAt = i
    thisLen = 1
    last=a[i]
    if thisLen > bestLen
      bestLen = thisLen
      bestAt = thisAt
  else
    thisLen++
  last=a[i]

post: a is not modified
      n is not modified
      bestAt holds the position of the first longest subsequence
      bestLen holds the length of the first longest subsequence 
```

# android - Android 4.0 中的 C2DM

> ID：13451246
> 
> 赞同：0
> 
> 时间：2012-11-19T09:49:44.280
> 
> 标签：android, android-emulator, android-c2dm

![在此处输入图像描述](../Images/f75d1e2f3db4baed5e7ab1e37ea45647.png)我在我的项目中使用 C2DM。我能够在模拟器中的 Google API 2.2 版本中成功运行。如果我在 Google API 4.0 版本中运行相同的代码，我会遇到错误，因为注册错误 PHONE_REGISTRATION_ERROR 并且应用程序停止运行。谁能帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:05:03.667

来自 C2DM 网站：[https ://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

> C2DM 已于 2012 年 6 月 26 日正式弃用。这意味着 C2DM 已停止接受新用户和配额请求。

更好地寻找替代方案，例如：http: [//developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:06:13.523

官方文档说，它已被弃用，取而代之的是 GCM

> 重要提示：C2DM 已于 2012 年 6 月 26 日正式弃用。这意味着 C2DM 已停止接受新用户和配额请求

我不清楚新用户是否意味着新设备或项目，但如果它意味着“设备”，那么这将解释你的错误。尝试迁移到 GCM，这对我来说似乎很好

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-19T09:56:30.957

您必须重新安装您的应用程序。

# android - 获取屏幕高度和宽度

> ID：13451247
> 
> 赞同：0
> 
> 时间：2012-11-19T09:49:50.953
> 
> 标签：android

我检查参考以获得屏幕高度和宽度。我的手机的高度和宽度如下图

```
Point p = new Point();
getWindowManager().getDefaultDisplay().getSize(p);
p.x //width 540
p.y //height 960 
```

我写了一个demo，但是得到的值不对 像这样的demo

```
import android.graphics.Point;

public class Strike {
    private StrikeView view;
    private int left = 0;
    private int top = 0;
    private Point win;
    private boolean isDown = true;
    private boolean isRight = true;

    public Strike(StrikeView view, Point win) {
        this.view = view;
        this.win = win; 
        this.left = view.getLeft();
        this.top = view.getTop();
    }

    /**
     * Set direction and refresh
     */
    public void setPostion() {
        view.setLeft(left);
        view.setTop(top);
        view.invalidate();
    }

    /**
     * calculate view direction
     */
    public void postion() {
        if (isRight) {
            if (left + 30 < win.x)
                left++;
            else {
                isRight = false;
                left--;
            }
        } else {
            if (left > 0)
                left--;
            else {
                isRight = true;
                left++;
            }
        }
        if (isDown) {
            if (top + 30 < win.y)
                top++;
            else {
                isDown = false;
                top--;
            }
        } else {
            if (top > 0)
                top--;
            else {
                isDown = true;
                top++;
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:00:42.163

这是我使用的（在 Android 2.1+ 上测试）：

```
private void size() {
    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB_MR2) {
        size_old(getWindowManager().getDefaultDisplay());
    }
    else {
        size_new(getWindowManager().getDefaultDisplay());
    }
}

@TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
private void size_new(Display display) {
    Point point = new Point();
    display.getSize(point);
            // point.x and point.y
}

@SuppressWarnings("deprecation")
private String size_old(Display display) {
    // display.getWidth() and display.getHeight()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:27:49.977

要知道任何手机的尺寸都值得使用这种方法......

```
 DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    int height = displaymetrics.heightPixels;
    int wwidth = displaymetrics.widthPixels; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T10:14:43.670

用这个：

```
 DisplayMetrics metrics = context.getResources().getDisplayMetrics();
    int width = metrics.widthPixels;
    int height = metrics.heightPixels; 
```

# macos - 支持 LineBreak 和编码检测/更改的 Mac 文本编辑器

> ID：13451249
> 
> 赞同：1
> 
> 时间：2012-11-19T09:49:53.390
> 
> 标签：macos, character-encoding, editor

我习惯了 windows，我尝试在 mac world 中找到替代工具。

我在 Windows 上使用 Notepad++，并且经常使用检测和更改文件的字符集和换行模式的功能。

![记事本++](../Images/18b93922c01d6107fd40e7511e720088.png)

我找到了一些支持换行符更改的编辑器，但我没有找到可以显示当前文件的字符集并将其更改为另一个的编辑器。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:50:52.457

是的：我推荐[BBEdit](http://www.barebones.com/products/bbedit/index.html)或其免费的小兄弟[TextWrangler](http://www.barebones.com/products/textwrangler/)。两者都非常好，并且都可以很好地处理编码和换行符等的更改。

# datetime - 2 Coldfusion Dates 到格式化的日期列表列表

> ID：13451250
> 
> 赞同：0
> 
> 时间：2012-11-19T09:49:54.967
> 
> 标签：datetime, coldfusion

我有 2 个冷融合日期，比如

```
from: 2013-03-29 00:00:00.0 
to: 2013-04-05 00:00:00.0 
```

我想创建这两个日期之间所有日期的列表，例如

```
29.03.2013,30.03.2013,31.03.2013,......,05.04.2013 
```

是否有可用的功能，或者我必须从 to 循环`date_from`并`date_to`创建一个列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:52:13.597

有趣的是，您可以使用 cfloop 循环日期，而“索引”是自 Epoch 以来的天数，您也可以将其视为日期。通过对其执行日期函数，例如使用 dateAdd，它将其转换为日期对象。

```
<cfset date_From = createDate(2013, 3, 29)>
<cfset date_To = createDate(2013, 4, 5)>

<cfset allDates = []>

<cfloop from="#date_from#" to="#date_to#" index="i">
    <cfoutput>
    #i#<br>
    </cfoutput>

    <!--- adding zero will do nothing to the date other than turn it into a date object --->
    <cfset newDate = dateadd("d", 0, i)>

    <cfset arrayAppend(allDates, newDate)>
</cfloop>

<cfdump var="#allDates#"> 
```

# asp.net - 如何使用 LinkBut ton 删除记录并刷新表格？

> ID：13451251
> 
> 赞同：0
> 
> 时间：2012-11-19T09:49:54.867
> 
> 标签：asp.net, vb.net

我有一个 HTML 表，用于在用户输入患者代码后或在患者代码通过 Querystring 传递的页面加载期间显示数据库中的一组记录。每个数据行都有一个动态创建的删除链接按钮。

我想在删除后刷新表。但是，每当单击链接按钮时，它将回发并且所有记录都将被清除，除非我重新加载数据。如果我在删除后再次重新加载数据，将有 2 次数据获取，并且表行将增加一倍。

表格的前 2 行是在 ASPX 上定义的，以便于进行样式设置。如果我在获取数据时清除了表格，那么第一行也将被清除。我在以相同方式创建的不同页面上还有另外 8 个表，因此我宁愿找到其他解决方案，而不是从后面的代码中定义和样式化行。

任何帮助将不胜感激。

我使用的代码如下：

ASPX

```
<body>
    <form id="form1" runat="server">
    <div>
    <asp:Label ID="lblPatientCode" runat="server" Text="Patient Code : "></asp:Label>&nbsp; 
    <asp:TextBox ID="txtPatientCode" runat="server"></asp:TextBox>
    &nbsp;
    <asp:Button ID="btnFind" runat="server" name="Date" Text="Find" Width="90" CssClass="ButtonNormal" />
    <br /><br />

    <table id="tblDoctorInformation" class="PatientDetailsTable" runat="server">
        <tr><td colspan="2">DOCTOR INFORMATION</td></tr>
        <tr> 
            <td>Doctor In Charge</td>
            <td>&nbsp;</td>
        </tr>
    </table>
    </div>
    </form>
</body> 
```

代码背后：

```
Protected PM As New PatientManagement.Common

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not IsPostBack Then
        GetPatient()
    Else
        If txtPatientCode.Text <> "" Then
            GetPatient()
        End If
    End If
End Sub

Private Sub GetPatient()
    Dim sPatientCode As String = ""

    If IsPostBack Then
        sPatientCode = Trim(txtPatientCode.Text)
    Else
        sPatientCode = Trim(Page.Request.QueryString("PatientCode"))
    End If

    If sPatientCode <> "" Then
        Dim dr As SqlDataReader
        dr = PM.ExecuteReader("SELECT LOGID,DOCTORNAME FROM PMV_DOCTORINCHARGE WHERE PATIENTCODE='" & sPatientCode & "'")

        If dr.HasRows Then
            Do While dr.Read
                Dim tRow As New HtmlTableRow
                Dim tCellDoctorName As New HtmlTableCell
                Dim tCellModifyLink As New HtmlTableCell
                Dim lb As New LinkButton

                'Doctor Name
                tCellDoctorName.InnerHtml = PM.GetString_TableCell(dr("DoctorName"))
                tRow.Cells.Add(tCellDoctorName)

                'Delete links
                lb.Text = "Delete"
                lb.Attributes.Add("AutoPostBack", False)
                lb.CommandArgument = dr("LogID").ToString()
                AddHandler lb.Click, AddressOf DeleteRecord
                tCellModifyLink.Controls.Add(lb)
                tCellModifyLink.Align = "Center"
                tRow.Cells.Add(tCellModifyLink)

                tblDoctorInformation.Rows.Add(tRow)
            Loop
        End If
    End If
End Sub

Private Sub btnFind_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnFind.Click
    GetPatient()
End Sub

Protected Sub DeleteRecord(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim lbNew As New LinkButton
    Dim sResult As String = ""
    Dim bResult As Boolean
    lbNew = sender

    bResult = PM.DeleteMultiRecord(lbNew.CommandArgument, lbNew.CommandName, Session.Item("UserID"), sResult)
    If Not bResult Then
        MsgBox(sResult, MsgBoxStyle.OkOnly, "Deletion was not successful")
    Else
        GetPatient()
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:22:40.207

在删除记录之前，尝试`PatientID`在 Textbox 中放置 a 并删除记录，然后 Table 将显示与 TextBox 输入匹配的记录。

问题在于`PageLoad()`方法，如果 TextBox 是空的并且它是回发，则`GetPatient()`不会调用方法。所以尝试修改`PageLoad()`方法。

最好删除`PageLoad()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:18:34.390

我四处搜索，似乎动态处理程序最好在`PageInit`. 就我而言，由于链接按钮控件需要在相应的数据行上携带一些值，看来我无法避免调用`GetPatient`来创建控件。

为了解决这个问题，我使用 Javascript 做了一个解决方法。我`hidLogID`在 ASPX 页面上创建了一个隐藏字段。我将链接按钮更改为`<a>`控件并调用传递`dr("LogID")`. javascript函数会将值分配给`hidLogID`页面并提交。当值不为空时`PageLoad`将调用。的值将在 上清除。`DeleteRecord()``hidLogID``hidLogID``DeleteRecord()`

谢谢大家的帮助！

# java - 在文本字段中设置文本光标，Java

> ID：13451256
> 
> 赞同：1
> 
> 时间：2012-11-19T09:50:19.000
> 
> 标签：java, swing, cursor, jframe, textfield

我有两个文本字段和 text_field2 text_fiel1。程序运行时直接将文本光标自动移至text_field1。我想问当程序在text_field2而不是text_cursor1中自动运行时，如何使文本光标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T09:56:43.810

JTextfield 的 requestFocus() 方法就可以了。看看这个[http://www.java2s.com/Code/JavaAPI/javax.swing/JTextFieldrequestFocus.htm](http://www.java2s.com/Code/JavaAPI/javax.swing/JTextFieldrequestFocus.htm)

# python - 在“OS X”上使用 Python ArgParse 的 UTF-8 STDIN+STDOUT

> ID：13451264
> 
> 赞同：3
> 
> 时间：2012-11-19T09:50:46.277
> 
> 标签：python, macos, python-2.7, osx-lion, argparse

[argparse 文档](http://docs.python.org/dev/library/argparse.html)显示了一种默认为 stdin/stdout 的文件参数的方法，文本编码默认为 utf- 8

```
>>> parser = argparse.ArgumentParser()
>>> parser.add_argument('infile', nargs='?', type=argparse.FileType('r'),
...                     default=sys.stdin)
>>> parser.add_argument('outfile', nargs='?', type=argparse.FileType('w'),
...                     default=sys.stdout)
>>> parser.parse_args([])
Namespace(infile=<_io.TextIOWrapper name='<stdin>' encoding='UTF-8'>,
          outfile=<_io.TextIOWrapper name='<stdout>' encoding='UTF-8'>) 
```

但是，在此 OS X (10.7.5) 系统上，此代码`<stdin> <stdout>`使用 ascii 编解码器产生。例如，如果我的输出流包含中文或斯堪的纳维亚字符，它们将在终端上正常显示，但如果我将标准输出重定向到文件，则会触发 ascii 编解码器错误。有没有人找到绕过这个的路线？

（直接从 Python 代码编写 utf-8 文件不是问题——我正在使用`codecs.open(str_path, "w", 'UTF-8')`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:49:45.683

您正在阅读 Python 3 文档。在这里尝试[Python 2](http://docs.python.org/2.7/library/argparse.html)。

此外，您的应用可能需要调用[setlocale()](http://docs.python.org/2.7/library/locale.html)。

# wordpress - 如何删除 Gravatar bbPress + BuddyPress + Wordpress？

> ID：13451269
> 
> 赞同：0
> 
> 时间：2012-11-19T09:50:59.320
> 
> 标签：wordpress, buddypress, gravatar, bbpress

我在 WordPress 3.4.2 网站上安装了 bbPress 2.1.2 和 BuddyPress 1.6.1。

问题是，在论坛上，头像错误显示给没有头像图像的用户，`/wp-content/uploads/avatars/`而不是神秘人。

如何从 WordPress 中完全删除 Gravatar 并改用 BuddyPress 的头像？如果用户还没有任何头像，则应显示默认图像。

此刻错误分身的来源就像

```
http://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?d=http://mywebsite.com/forums/wp-content/plugins/buddypress/bp-core/images/mystery-man.jpg&s=80&r=G 
```

已正确上传头像的用户，头像来源如下：

```
http://mywebsite.com/forums/wp-content/uploads/avatars/1/d4f01e214d783339fc186ec365307ed1-bpfull.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:28:20.950

请尝试此代码并将其放入主题中的 functions.php 文件中：

```
function myavatar_add_default_avatar( $url ) {
    return get_stylesheet_directory_uri() .'/_inc/images/avatar-member.jpg';
}
add_filter( 'bp_core_mysteryman_src', 'myavatar_add_default_avatar' ); 
```

请使用您的默认图片替换 gravatar 照片。

# java - Lucene 中的德语 'ue' -> 'u' 转换

> ID：13451276
> 
> 赞同：1
> 
> 时间：2012-11-19T09:51:31.360
> 
> 标签：java, lucene, diacritics

关于在 Lucene 中处理德语变音符号，我有两个问题：

1.  我正在尝试找到一种方法将德语变音符号转换为“ue”、“ae”等形式的折叠形式“u”、“a”等。这是由 GermanAnalyzer（以及它使用的 German2StemFilter）完成的，但不幸的是，它也会进行词干提取，这在我的情况下是非常不希望的。是否有任何其他过滤器只能进行 'ue' -> 'u' 转换？

2.  是否有任何过滤器可以进行 'ü' -> 'ue' （不是 'u' 像 ASCIIFoldingFilter 那样）转换？我想要实现的是，只要用户搜索“über”或“ueber”，就应该在索引中找到“über”这个词，而不是“uber”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:15:28.820

您可以使用[MappingCharFilterFactory](http://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/charfilter/MappingCharFilterFactory.html)并提供您自己的映射文件，您可以在其中选择做任何您想做的事情，例如 'ü' -> 'ue'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T04:51:37.577

German2 的算法，但没有词干：

[https://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/de/GermanNormalizationFilter.html](https://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/de/GermanNormalizationFilter.html)

# javascript - 是否可以检测脚本标记的内容何时已加载然后由浏览器传递

> ID：13451286
> 
> 赞同：1
> 
> 时间：2012-11-19T09:52:06.723
> 
> 标签：javascript, html

在将脚本标记动态添加到 html 页面时，您可以将加载事件添加到脚本标记，但这似乎在脚本标记已添加到页面但在脚本标记的内容被传递之前触发浏览器。

当脚本标记的内容已被浏览器传递时，是否可以检测到触发事件。

我正在考虑在 javascript 的末尾添加一个标志，然后超时并等待它存在或一段时间后超时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:06:49.137

jQuery 用来检查文档是否已加载的测试之一是

```
if (!document.body) {
    return setTimeout(jQuery.ready, 1);
} 
```

理论上，您可以通过在 JavaScript 文件中设置要加载的变量来对脚本执行类似的操作

```
function checkLoaded( ) {

    if ( module && module.loaded ) {
        func(); // function to call after scripts are ready   
    }

    setTimeout( checkLoaded, 1 );

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:40:24.673

好吧，如果您只想为了测试目的而这样做，那么您可以简单地在您的 something.js 文件的顶部和底部尝试一条警报消息，因此，当您的文件加载时，它会显示警报消息，确认控件是否进入内部. 顶部消息意味着文件被正确包含，最后一条消息意味着js文件中的所有功能都很好

这是一些外行的方式，只应用于开发时的一些地面测试

# java - SWT，Jface - 为 tableviewer 列有效实现自己的渲染器？

> ID：13451293
> 
> 赞同：2
> 
> 时间：2012-11-19T09:52:33.707
> 
> 标签：java, swt, jface, tableviewer

我想渲染一些[`TableViewer`](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/TableViewer.html)列，以便该列中的单元格看起来像特殊的小部件。

( `Link`s, `Button`s 等应该出现在每个单元格中)

我将如何实现这些渲染器？
此实现应支持数千个表格行，并且在滚动表格时不会闪烁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:20:33.867

与其实现你自己的渲染器，它“看起来像”真正的控件，为什么不使用可以*实际*渲染自定义控件的表格呢？

[http://www.eclipse.org/nebula/widgets/compositetable/compositetable.php](http://www.eclipse.org/nebula/widgets/compositetable/compositetable.php)

而且它真的很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:46:26.527

您应该可以按照我在此处的帖子在表中添加 SWT 控件

[SWT - Tableviewer 将删除按钮添加到表中的列](https://stackoverflow.com/questions/12480402/swt-tableviewer-adding-a-remove-button-to-a-column-in-the-table/12486929#12486929)

用户`TableEditor`类。确保在表上添加监听器以获取`SWT.measureitem`事件并计算高度和宽度。如果您仔细实施它，您实际上可以重用小部件。

# iphone - “服务遇到错误。请稍后再试”在 Tumblr 上共享图像时出现错误消息

> ID：13451296
> 
> 赞同：0
> 
> 时间：2012-11-19T09:52:44.477
> 
> 标签：iphone, objective-c, ios

我正在使用 sharekit 登录 Tumblr 并在 Tumblr 上共享图像。几天前它工作正常，但现在它给出错误消息“服务遇到错误。请稍后再试”，当我尝试共享图像或登录 Tumblr 时。

有谁能够帮我。??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:57:46.770

这可能只是因为您使用的网络可能无法正常工作。或者可能是您调用 Web 服务或登录服务的服务器没有响应。检查您的服务器是否正常工作以及您的互联网连接是否正常工作..

# ios - 将应用程序提交到应用商店时如何解决与图标大小相关的错误？

> ID：13451315
> 
> 赞同：-1
> 
> 时间：2012-11-19T09:54:18.590
> 
> 标签：ios, app-store, submit

我在我的应用程序中使用 57x57 大小的应用程序图标。但是，当我将二进制文件提交到 iOS 应用商店时，我收到以下错误：

> iPhone/iPad Touch: icon.png: 图标尺寸 (590x621) 不符合尺寸要求。图标文件必须为 57x57 像素，为 .png 格式

请指导我解决此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:17:24.947

访问[链接](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html) [http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)。您可以在苹果开发者门户中找到有关图标大小和规格的详细信息。

```
512x512 iTunesArtwork.png 
resize 144x144 Icon-72@2x.png # Home screen for "The New iPad"
resize 114x114 Icon@2x.png # Home screen for Retina display iPhone/iPod
resize 72x72 Icon-72.png # App Store and Home screen on iPad
resize 58x58 Icon-Small@2x.png # Spotlight and Settings for Retina display
resize 57x57 Icon.png # Home screen on non-Retina iPhone/iPod
resize 50x50 Icon-Small-50.png # Spotlight on iPad 1/2
resize 29x29 Icon-Small.png 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:24:15.930

您需要检查捆绑包中的所有图像。也许有一些你忘记的图像。3个想法：

1.  您的项目（在左侧的项目导航器中）-> 选择您的
    目标-> 构建阶段-> 复制捆绑资源。然后看看你是否有这个大小的文件。

2.  检查您的 Info.plist 文件并检查您将哪些文件称为图标文件。

3.  在项目导航器中，如果找到文件 icon.png，右键单击它，在 Finder 中显示，然后检查它链接到哪个文件，以及它的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:48:44.513

Mac 上的预览应用程序有一个检查器，可以告诉你 png 的实际大小。根据您假设的图像尺寸检查它们，如果有不同之处则进行修复。如果原始文件中有任何异常，您还可以让预览保存 png 的副本。

检查您的应用程序的 plist 并确保 Xcode 正在使用您认为的图标文件。

# android - 如何更改 Kindle Fire 上 /mnt/SDcard 文件夹的读/写权限？

> ID：13451319
> 
> 赞同：6
> 
> 时间：2012-11-19T09:54:32.817
> 
> 标签：android, amazon, kindle-fire, in-app

我正在尝试在 android 中开发 Amazon In-app。为此，我从该站点[https://developer.amazon.com/sdk/in-app-purchasing/sample-code/button-clicker.html](https://developer.amazon.com/sdk/in-app-purchasing/sample-code/button-clicker.html)下载示例代码。本文建议我们必须将文件 amazon.sdktester.json 放在设备的 mnt/sdkcard 文件夹中。为此，我从该站点[https://developer.amazon.com/sdk/fire/connect-adb.html#InstallApp](https://developer.amazon.com/sdk/fire/connect-adb.html#InstallApp)阅读文章并执行相同操作。但是当我尝试在 sdcard 上推送文件时，eclipse 给了我以下错误：

```
[2012-11-19 13:39:39 - ddms] transfer error: Permission denied

[2012-11-19 13:39:39] Failed to push selection: Permission denied 
```

![在此处输入图像描述](../Images/b540b8a637c74ce82f48ed61a76c0838.png)

有什么办法可以更改 Kindle Fire 根文件夹的权限。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T10:10:04.433

请尝试在[ADB shell中使用](http://developer.android.com/tools/help/adb.html#shellcommands)[chmod](http://www.thegeekstuff.com/2010/06/chmod-command-examples/)命令...

以下是一些 chmod 示例：

> 1.  向文件/目录添加单一权限
> 
> 将权限更改为单个集合。+ 符号表示添加权限。例如，执行以下操作为用户授予执行权限，而不考虑其他任何内容：
> 
> ```
> $ chmod u+x filename 
> ```
> 
> 2.  向文件/目录添加多个权限
> 
> 使用逗号分隔多个权限集，如下所示。
> 
> > $ chmod u+r,g+x 文件名
> 
> 3.  从文件/目录中删除权限
> 
> 以下示例删除用户的读写权限。
> 
> > $ chmod u-rx 文件名
> 
> 4.  更改文件/目录上所有角色的权限
> 
> 以下示例将执行权限分配给用户、组和其他人（基本上任何人都可以执行此文件）。
> 
> > $ chmod a+x 文件名
> 
> 5.  使文件的权限与另一个文件相同（使用参考）
> 
> 如果要更改与另一个文件相同的文件权限，请使用参考选项，如下所示。在本例中，file2 的权限将被设置为与 file1 的权限完全相同。
> 
> > $ chmod --reference=file1 文件2
> 
> 6.  递归地对目录下的所有文件应用权限
> 
> 使用选项 -R 以递归方式更改权限，如下所示。
> 
> > $ chmod -R 755 目录名/
> 
> 7.  仅更改目录的执行权限（文件不受影响）
> 
> 在特定目录上，如果您有多个子目录和文件，则以下命令将仅将执行权限分配给当前目录中的所有子目录（而不是当前目录中的文件）。
> 
> > $ chmod u+X *

# c# - C#清除静态变量的方法

> ID：13451321
> 
> 赞同：1
> 
> 时间：2012-11-19T09:54:42.303
> 
> 标签：c#, asp.net-mvc, static

我在我的类中声明了一个静态变量，我希望它在使用后被清除。它是 int 类型。

另外，当视图被卸载时，是否有任何控制器函数被调用？也许我可以在那里清除变量。

如果需要更多信息，请告诉我。
**更新**：
我正在将一个值从我的视图传递给控制器​​。现在，当我的控制器具有此值时，我希望它能够持续。我正在使用静态。
现在证明它很方便。我欢迎提出更好的解决方案的建议。但请务必为我提供当前问题的解决方案:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:56:27.680

如果要清除静态变量 - 为其分配新值。

如果您想在控制器操作之前/之后执行某些操作，请使用[操作过滤器](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)。自定义操作过滤器允许您覆盖以下方法（并在那里执行您的逻辑）：

*   `OnActionExecuting`– 在执行控制器操作之前调用。
*   `OnActionExecuted`– 在执行控制器操作后调用。
*   `OnResultExecuting`– 在执行控制器操作结果之前调用。
*   `OnResultExecuted`– 在执行控制器操作结果后调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:09:27.573

我强烈建议您**不要**在 Web 应用程序的上下文中使用静态变量。请记住，许多请求可以由不同的线程同时处理，从而导致真正“难以发现”的错误。

改为使用静态[`ThreadLocal<T>`](http://msdn.microsoft.com/en-us/library/dd642243.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:26:28.250

您还可以将静态变量包装在会话中以维护每个会话的不同值，就像这样。

```
 public static Int32 MyInt
    {
        get
        {
            return (Int32)HttpContext.Current.Session["MyInt"];
        }
        set
        {
            HttpContext.Current.Session["MyInt"] = value;
        }
    } 
```

如果这就是您要清除该值的原因，您将不再需要清除它。

# clojure - 什么相当于 Clojure 在 Common Lisp 中的“做”？

> ID：13451322
> 
> 赞同：14
> 
> 时间：2012-11-19T09:54:50.390
> 
> 标签：clojure, common-lisp

即按顺序评估子表单并返回最后评估值的表单，例如

```
(do (println "Hello World") 3) => 3 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-19T09:57:27.583

它被称为[`progn`](http://www.lispworks.com/documentation/HyperSpec/Body/s_progn.htm)。

> ## *特殊操作员* [PROGN](http://www.lispworks.com/documentation/HyperSpec/Body/s_progn.htm)
> 
> ### 句法：
> 
> **progn** *形式** ⇒*结果**
> 
> ### 描述：
> 
> **progn**按照给定的顺序评估*forms 。*
> 
> 除了最后一个之外，每个*表单*的值都被丢弃。

# exception-handling - WSO2 ESB 捕获传输异常 (MessageBuilder)

> ID：13451323
> 
> 赞同：1
> 
> 时间：2012-11-19T09:54:54.847
> 
> 标签：exception-handling, wso2, wso2esb, synapse

当我使用 WSO2 ESB 代理读取消息时，我需要定义一个特定的数据类型，然后应用某个 MessageBuilder（在axis2.xml 中定义）。

但是当 MessageBuilder 失败时（即我尝试使用 XMLBuilder 读取文本文件）我在控制台中得到一个异常，但我的“faultSequence”没有被调用。但是如果出现任何读取问题，我需要进行一定的错误处理。

如何从代理中的传输层 (MessageBuilder) 捕获异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:06:01.430

据我了解，您的要求是在传输层中捕获错误并在应用程序级别（即：中介级别）处理该错误。这意味着上面的层。

但我认为它违反了消息传递框架的分层架构。您应该在消息生成器本身捕获异常并抛出 Axis Fault，以便底层突触传输层（在本例中为 Axis2）将处理该错误。（它将向客户端发送故障。）

如果我们看一下 TCP 协议栈，那是常用的做法。

如果您真的想在中介级别过滤此错误。在消息生成器中捕获该错误并添加消息上下文属性或自定义消息并将其作为成功消息传递。并在中介级别进行过滤和处理。

但这又是丑陋的。:)

--Charith

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T10:14:56.747

Have you defined onError attribute in your configuration?

```
 <sequence name="main" onError="myFaultSequence"> 
```

You can have more information in this [sample](http://docs.wso2.org/wiki/display/ESB450/Sample+5%3a+Creating+SOAP+Fault+Messages+and+Changing+the+Direction+of+a+Message).

# opengl - 带有 glPrimitiveRestartIndex 的段错误

> ID：13451325
> 
> 赞同：1
> 
> 时间：2012-11-19T09:55:07.643
> 
> 标签：opengl, glew

我`glPrimitiveRestartIndex` 的代码编译和链接有问题，但是当我运行它时，它会出现段错误：

```
glPrimitiveRestartIndex(0xffff); 
```

`glEnable(GL_PRIMITIVE_RESTART)`当我用and`invalid enumerant`投票时给我`glGetError``glGetErrorString`

我发现了一个[类似的问题](https://stackoverflow.com/questions/6803295/primitive-restart-index-error-in-c-with-opengl)，它表明 glew 可能没有正确初始化。

在执行此操作之前，我正在初始化 glew ，并且我还包括`glew.h`before `gl.h`。

还有，`glewinfo | grep Restart`给我

```
glPrimitiveRestartIndex:                                     OK
glPrimitiveRestartIndexNV:                                   OK
glPrimitiveRestartNV:                                        OK 
```

那么它不应该在我的系统上工作吗？有什么问题？

我的代码相当大，所以我不能发布所有内容，以下是我认为相关的内容：

```
if (GLEW_OK != glewInit()){
    // GLEW failed!
    std::cout << "Failed to initialize glew!\n";
    exit(1);
}
glEnable(GL_PRIMITIVE_RESTART); //invalid enumerator
glPrimitiveRestartIndex(0xffff); //segfault! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:03:15.267

```
glPrimitiveRestartIndex 
```

是 OpenGL 3.1 + 你应该检查你的驱动程序是否支持它，像这样检查它：

```
if(GLEW_VERSION_3_1) {
  //we are running on 3.1 +
} else {
  //some version lower than 3.1
} 
```

# css - 最初隐藏元素上的 CSS 过渡

> ID：13451328
> 
> 赞同：6
> 
> 时间：2012-11-19T09:55:17.923
> 
> 标签：css, css-transitions

我想对已`display: none`设置的元素进行 css 转换。考虑以下代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>CSS Transition From Hidden</title>

        <style type="text/css">
            div {
                -webkit-transition-property: all;
                -webkit-transition-duration: 2s;
            }       

            div.hidden {
                display: none;
                opacity: 0;
            }    

            div.from {
                opacity: 0;
            }
        </style>     

        <script type="text/javascript">
            function loaded() {
                var e = document.getElementById("foo");
                e.className = "from";
                window.webkitRequestAnimationFrame(function(t) {
                    e.className = null;
                });
            }
        </script>
    </head>
    <body onload="loaded()">
        <div id="foo" class="hidden">
            My test div
        </div>
    </body>
</html> 
```

我想从`class="div.hidden"`to `class=""`，即从`display: none; opacity: 0;`to`display: block; opacity: 1;`但是，在 chrome 中（至少）一个`display: none`没有动画的对象。元素立即进入结束状态。

我的解决方法是首先将元素设置为`display: block; opacity: 0;`，然后在下一帧中进行转换（使用. 这有点尴尬，我在[规范](http://www.w3.org/TR/css3-transitions/)`requestAnimationFrame()`中找不到这种行为的任何解释。我知道我可以使用-属性，但我不想使用它，因为我不想布局隐藏元素。`visibility`

所以，问题是：这是正确的行为还是错误？如果这是正确的行为，是否有更好的方法来编写代码？请注意，我不是在问是否有任何库可以做到这一点，我想知道是否有更好的方法可以直接在 DOM 上做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T10:31:30.307

关于这是否在规范中的问题，这里的 www-style@w3.org 列表中有一个有趣的[线程](http://lists.w3.org/Archives/Public/www-style/2011Dec/0353.html)。我还没有读完它，但似乎他们没有从动画开始，`none`并且过渡规范也需要澄清这一点。

**更新**：我已经询问了邮件列表，并且我得到了工作组会议[记录](http://lists.w3.org/Archives/Public/www-style/2012Jan/0099.html)的链接，在该会议记录中决定如果开始状态是不应该有过渡`display: none`。

要确保执行转换，您必须确保在将动画属性设置为新目标之前计算动画属性的值。当显示设置为无时，通常不计算值。这是一个工作示例：

```
<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    <title>Fade</title>

    <style>
      .hidden { display: none }
      .start { opacity: 0 }
      .transition { opacity: 1; -webkit-transition: opacity 1s }
    </style>
  </head>
  <body>
    <div id='div' class="hidden">Test</div>

    <script>
      var elem = document.getElementById('div');

      function ontransitionend(event) {
        elem.className = null;
        elem.removeEventListener('transitionend', ontransitionend);
      }
      elem.addEventListener('transitionend', ontransitionend);

      elem.className = 'start';
      window.getComputedStyle(elem).opacity;
      elem.className = 'transition';
    </script>
  </body>
</html> 
```

请注意，您必须访问 opacity 属性。打电话是不够的`getComputedStyle()`！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-22T16:23:42.837

您不一定要中继`transitionend`回调。
要在 opacity 属性（或其他属性）上显示最初具有 的隐藏元素`display:none`，只需使用内联样式设置`display:block`然后删除您的 CSS 类`.hidden`以根据需要为元素设置动画：

CSS：

```
#foo {
    display: none;
    opacity: 1;
    /*optional, other ending properties...*/
    transition: opacity 1s;
}
.hidden {
    opacity: 0;
    /*optional, other starting properties...*/
} 
```

HTML：

```
<div id="foo" class="hidden">
    My test div
</div> 
```

最后，用过渡显示元素的 javascript 部分：

```
var elem = document.getElementById('foo');
elem.style.display = 'block';
elem.classList.remove('hidden'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:59:09.767

有几个 css 属性不能以小步长递增（和`display`之间的 25% 的值是多少？），尤其是那些具有非数值的属性。您描述的解决方法几乎是处理此问题的标准方法。例如，jQuery 在其和方法中使用了类似的东西。`none``block``fadeIn``fadeOut`

如果你想动画从不占用空间到标准布局的过渡，你可以过渡`height`和`width`属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T10:23:52.393

display: none 意味着您可以到达该元素，但首先您应该确保该元素已被渲染。您可以在 jquery 中使用 ready 函数或在 javascript 中实现它以确保元素存在。您可以使用以下方法执行上述操作：javascript（使用计时器增加不透明度）或 jquery

```
<html>
    <head>
        <meta charset="utf-8">
        <title>CSS Transition From Hidden</title>

    <script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
        <style type="text/css">

            div.hidden {
                display: none;
                opacity: 0;
            }    

                    </style>     

        <script type="text/javascript">
$.ready = function () {

                $("#foo").fadeIn(2000);

            }
        </script>
    </head>
    <body>
        <div id="foo" class="hidden">
            My test div
        </div>
    </body>
</html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-23T23:43:09.413

我有同样的问题，我认为浏览器不应该将其视为可接受的行为。问题不在于有人试图为实际的显示属性设置动画。它不能让元素具有显示：无，将属性更新为内联或其他内容，然后为不透明度设置动画，例如，即使您在显示更新后将超时设置为 10 秒也不行。

我现在的解决方法是将宽度和高度设置为 0，溢出到隐藏，更新这些值，然后更新动画属性。至少它的行为更像是显示不显示而不是隐藏可见性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-25T13:13:01.240

display:none 提升动画效果。很遗憾，我认为应该由浏览器解决。我之前通过将 z-index 设置为 -1 来解决这个问题，这会隐藏元素，如果绝对定位也会将其从静态布局中删除。您实际上可以转换 z-index（虽然它看起来不像动画），因此不会弄乱不透明动画。

这在我的应用程序上对我有用，尽管我最终不得不使用 JavaScript 将显示属性从无设置为阻塞，因为我最终需要在溢出：自动元素中使用淡入淡出元素，当它没有被隐藏时，在不希望的时间创建滚动条。

# objective-c - UserInterfaceState.xcuserstate 在 Xcode 中使用 git 时未提交

> ID：13451329
> 
> 赞同：4
> 
> 时间：2012-11-19T09:55:18.860
> 
> 标签：objective-c, git, xcode4.5

当我尝试提交我的代码项目时，它会显示一个必须提交的名为“UserInterfaceState.xcuserstate”的文件。一旦我提交它并尝试将我的项目推送到 git，Xcode 会给我一条弹出消息，说“工作副本“应用程序”有未提交的更改。当我再次尝试提交时，我会再次提交相同的文件“UserInterfaceState.xcuserstate”。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-14T04:24:16.670

`UserInterfaceState.xcuserstate`是 Xcode 保存 GUI 状态的地方，例如窗口位置、打开的选项卡、项目检查器中的扩展节点等。

简单地调整 Xcode 窗口的大小将导致该文件发生更改并被您的源代码控制系统标记为已修改。您可以让您的 SCM 系统忽略对项目本身不重要的特定文件。

您希望 Git 忽略该文件，您可以将其添加到 中`.gitignore file`，但您必须删除跟踪。要停止跟踪当前跟踪的文件，请使用`git rm –cached`.

```
git rm --cached ProjectFolder.xcodeproj/project.xcworkspace/xcuserdata/myUserName.xcuserdatad/UserInterfaceState.xcuserstate
git commit -m "Removed file that shouldn't be tracked" 
```

之后`.gitignore`将生效`UserInterfaceState.xcuserstate` 现在开始你不会收到一条弹出消息说`'The working copy "app" has uncommitted changes.'`

# javascript - 基础 JavaScript OO

> ID：13451335
> 
> 赞同：6
> 
> 时间：2012-11-19T09:55:37.437
> 
> 标签：javascript

好的，我**应该**知道这个问题的答案，但由于某种原因，我从来没有真正理解或需要真正了解 JavaScript。

> 我的问题是：查看下面的代码示例，我的理解是正确的还是我遗漏了一些信息。

* * *

**样品 1**

需要实例化函数（或类）才能使用该`IsOld`方法，并且`IsOld`将为每个实例创建一个单独的函数副本。

```
function MyClass1() {
    this.IsOld = function (age) {
        if (age > 40) {
            return true;
        }
        return false;
    };
}

// sample usage
var m1 = new MyClass1();
console.log(m1.IsOld(34)); 
```

* * *

**样品 2**

需要实例化但与`MyClass1`脚本引擎不同的是不需要`IsOld`为每个类实例创建方法的副本。

```
var MyClass2 = (function () {
    function MyClass2() { }

    MyClass2.prototype.IsOld = function (age) {
        if (age > 40) {
            return true;
        }
        return false;
    };

    return MyClass2;
})();

// sample usage
var m2 = new MyClass2();
console.log(m2.IsOld(34)); 
```

* * *

**样品 3**

无需实例化函数/类即可访问该`IsOld`方法。该方法的单个实例`IsOld`用于所有调用。

```
var MyClass3 = {
    IsOld: function (age) {
        if (age > 40) {
            return true;
        }
        return false;
    },
};

// sample uage
console.log(MyClass3.IsOld(34)); 
```

注意：我猜这里有很多类似的问题/答案，但由于某种原因，我找不到对我来说真正有意义的问题/答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:14:40.460

你的理解似乎是正确的。

如果“需要实例化”是指使用“新”关键字，我想在这里添加一些内容。

在 JavaScript 中使用 new 关键字并不是创建新实例的唯一方法。（根据评论编辑）任何函数都可以作为构造函数。

当你使用'new'关键字后跟任何函数（比如'x'）时，它的作用是

1.  创建新对象（比如“y”），并将函数 x 的原型设置为新对象（y）的原型。
2.  在新创建的对象 y 的上下文中调用函数“x”，即 this 将在函数“x”中引用这个新对象“y”
3.  如果函数没有返回对象，则返回由 new 运算符创建的新对象 'x' 作为 new 表达式的结果。

这是 Douglas Crockford ( [http://javascript.crockford.com/](http://javascript.crockford.com/) )为您学习 JavaScript 的一个很好的资源

因此，如果您关心内存（应该如此），请使用构造函数，并将所有常用方法添加到函数原型中，就像您在示例 2 中所做的那样。

然后所有这些方法将被继承到使用此函数作为构造函数创建的所有对象。但是，如前所述，我认为示例 2 可以更简单：

```
var MyClass2 = function MyClass2() { };

MyClass2.prototype.IsOld = function (age) {
    if (age > 40) {
        return true;
    }
    return false;
};

var obj = new MyClass2(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:50:28.060

在我看来，对于类的结构和 Javascript 的动态特性存在一些误解：对于所有呈现的案例，“类”的每个实例都会创建一个新的未命名函数。

如果您想以更传统的方式（如 C++ 或 Java）声明“类”，您最好：

1）定义功能：

```
function MyClass_IsOld(age) {
    return (age > 40);
} 
```

2）创建“类”并定义其原型：

```
function MyClass() { /* put any instance constructor logic here */ };
MyClass.prototype.IsOld = MyClass_IsOld; 
```

3）使用类：

```
var myInstance = new MyClass();
console.log(myInstance.IsOld(37)); 
```

如果您想将“方法”用作常规函数，请在全局范围内声明它，例如：

```
function MyClass_IsOld(age) {
    return (age > 40);
} 
function MyClass() { /* put any instance constructor logic here */ };
MyClass.prototype.IsOld = MyClass_IsOld;

var myInstance = new MyClass();
console.log(myInstance.IsOld(37));        // use as a method
console.log(MyClass_IsOld(37));           // use as a function 
```

如果要隐藏实现细节，请创建一个闭包：

```
var MyClass = (function () {
    function _MyClass_IsOld(age) {
        return (age > 40);
    } 
    function _MyClass() { /* put any instance constructor logic here */ };
    _MyClass.prototype.IsOld = _MyClass_IsOld;  // use as a method

    return _MyClass;
})();

var myInstance = new MyClass();
console.log(myInstance.IsOld(37));        // use as a method
console.log(MyClass_IsOld(37));           // ERROR: undefined function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T10:00:56.620

据我所知，您在所有 3 种情况下都是正确的。

1.  确实需要实例化`IsOld`，并且对于每个实例都会创建新函数。
2.  不需要`IsOld`像在原型中那样实例化。
3.  不需要实例化`IsOld`，因为 MyClass3 已经是一个实例（对象不是函数）。

# c# - ASP.net 数据绑定非空行

> ID：13451341
> 
> 赞同：0
> 
> 时间：2012-11-19T09:56:04.157
> 
> 标签：c#, asp.net, datagrid, dataset, datalist

我的数据表中有 200 行，其中有很多带有“”（string.empty）值的行，所以我需要在数据出价之前将它们从我的数据表中删除。

我不知道如何对数组进行数据绑定

我的数据列表：

```
<asp:DataList
      id="list1"
      runat="server">
      <ItemTemplate>
         <cc1:SWCLabel 
             runat="server"
             Text ='<%# Eval("myfield1")%>'
              />
      </ItemTemplate>
</asp:DataList>

// My code behind
DataView view = dt3.DefaultView;
DataRow[] rows = dt3.Select("myfield1 <> ''");
... // Something here 
```

请帮助我解决非 linq 解决方案，因为我目前无法理解它。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:58:39.080

您可以使用`Linq`：

```
IEnumerable<DataRow> dataSource = dt3.AsEnumerable()
         .Where(r => !string.IsNullOrEmpty(r.Field<string>("myfield1")));
list1.DataSource = dataSource;
list1.DataBind(); 
```

# php - PHP - 动态引用对象属性

> ID：13451343
> 
> 赞同：2
> 
> 时间：2012-11-19T09:56:15.123
> 
> 标签：php, object

我有这样的代码：

```
$result = $object->property[0]; 
```

但我想做类似的事情：

```
if ($a) {  
  $property = 'blue' }  
else {  
  $property = 'black'}  
$result = $object->$property[0]; 
```

但是，这给了我一个`Cannot use string offset as an array`错误。

任何指针（没有双关语）表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T09:59:28.113

使用大括号：

```
$result = $object->{$property}[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:01:43.003

> $result = $object->{$property}

# command-line - 命令行 NSIS 脚本编译 - 静默选项

> ID：13451344
> 
> 赞同：0
> 
> 时间：2012-11-19T09:56:19.430
> 
> 标签：command-line, installation, nsis

我想让我的安装程序保持沉默。我希望根据命令行选项灵活地使安装程序静音或不静音。在 doc 中，我发现它可以启动 NSIS 脚本编译：

```
"C:\Program Files\NSIS\makensis.exe" "D:\Produts\folder\Install\nsis\MyApp.nsi" 
```

这是有效的。默认情况下，这会生成一个非静默安装程序。要拥有一个静默安装程序（仅使用命令行选项），我尝试了这个

```
"C:\Program Files\NSIS\makensis.exe" \S "D:\Produts\folder\Install\nsis\MyApp.nsi" 
```

但 \S 不是一个公认的选项。如何使用命令行选项使安装程序静音？

我可以在文档中找到这个

> 4.8.1.36 静默安装
> 
> normal|silent|silentlog 指定安装程序是否应该静默。如果它是 'silent' 或 'silentlog'，所有带有 SF_SELECTED 标志的部分都被安静地安装（你可以使用 SectionSetFlags 设置这个标志），安装程序本身没有屏幕输出（脚本仍然可以显示它想要的任何内容，使用MessageBox 的 /SD 为静默安装程序指定默认值）。请注意，如果将其设置为“正常”并且用户在命令行上使用 /S（区分大小写）运行安装程序，则其行为就像使用了 SilentInstall 'silent'。注意：另请参阅 LogSet。
> 
> 有关详细信息，请参阅第 4.12 节。

让我感到被虐待

或者是否应该在 NSIS 脚本中添加一些指令，以便编译可以接受 /S 选项？

用 -S 试过了，也没有用。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T10:28:56.007

`/S`选项可用于您的安装程序，而不是`makensis.exe`. 因此，您可以从命令行以静默模式运行安装程序： `MyApp.exe /S`

如果您想*将安装程序构建为始终保持静默*，您可以使用以下技术：

在`.onInit`函数中：

```
Function .onInit
  !ifdef IsSilent
    SetSilent silent
  !endif
FunctionEnd 
```

然后使用选项构建安装程序`/D`以定义`IsSilent`常量：

`makensis.exe /DIsSilent MyApp.nsi`

这意味着，如果您使用`/D`上述选项进行构建，安装程序将始终保持沉默；如果没有`/D`选项，您的安装程序将默认为非静音，您仍然可以从命令行运行它`MyApp.exe /S`以使其静音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:58:20.063

如果您想从命令行静默编译 NSI 脚本，这与让安装程序静默运行不同。

在我的编译批处理脚本中，我使用：

```
c:\progra~1\nsis\makensis /V0 .\sample.nsi | findstr /b /r /c:"YouCantFindMe" 
```

该`/V#`选项会抑制所有输出，但在编译器启动时仍包含功能区/横幅（请参阅 NSIS 命令行选项文档。通过“findstr”管道所有输出也会抑制该输出。

# web-applications - 唯一用户注册

> ID：13451347
> 
> 赞同：1
> 
> 时间：2012-11-19T09:56:23.617
> 
> 标签：web-applications, web

我有一个网站，我们会定期在其中举办一些摄影比赛。我们还有一群用户，他们注册了很多虚假账户进行投票。这是一个让我们的比赛名誉扫地的大问题。所以问题是 - 如何检测哪个用户是真实的，哪个是假的。

这里有一些我们尝试过的案例：1）电子邮件验证 - 没有帮助，因为像 10minutemail 这样的服务允许获取验证电子邮件 2）IP 验证 - 我们有很多 ISP，它为所有用户使用 1-2 个 IP，也是许多公司使用一个外部 IP。3) 使用社交网络按钮投票 - 并非我们的每个用户在任何社交网络中都有一个帐户，并且 SN 按钮只允许每张照片投票一次。但我们希望允许每 24 小时投票一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:04:43.777

由于 SMS 需要花钱，我认为如果真的关心可信度，可能会使用 Paypal。人们可以投票给 0.01 美元，我认为这比 SMS 的成本要低，但它提供了良好的身份验证。当然，不是每个人都有 PayPal 帐户...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:59:06.537

你真的无能为力。

甚至像 Hotmail 和 GMail 这样的服务也允许您设置多个帐户，因此一个人可能拥有 10 个 GMail 帐户、10 个 Hotmail 帐户等。

如果您使用基于 cookie 的解决方案，那会更好一些，但人们可以随时清除所有 cookie，也可以使用不同的浏览器。不过，我可能会选择这种方法，因为它不像电子邮件地址或 IP 地址那样不可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:00:24.020

一个想法是将注册基于电话号码 - 确保某些用户拥有超过 1 部电话，但不如电子邮件那么多。您不会通过邮件验证帐户，而是通过短信验证帐户。

# java - 我们可以为多个包中的一组 xsd 生成 JAXB 类吗？

> ID：13451349
> 
> 赞同：5
> 
> 时间：2012-11-19T09:56:25.277
> 
> 标签：java, xml, jaxb, jaxb2

我有一个 xsd，其中嵌入**了几个子 XSD**（使用“xsd:include”。）（但每个 xsd 属于**同一个命名空间**）。我被要求在**单独的子包**中生成 jaxb 类（每个子 XSD 一个子包）而不是一个包。

根据我目前阅读的内容，我们可以添加`jaxb:schemaBindings`到这些单独的 xsd 中并在单独的包中生成类，只要这些 xsd 属于**不同的命名空间**。

但就我而言，我想做的是在几个子包中为一组属于**同一个命名空间**的 xsd 创建类。你能帮我用 JAXB 做这件事吗？

* * *

**编辑：**我添加了更多关于我的问题的描述以进一步澄清它。

我所有的 XSD 都有以下标题。因此**相同的命名空间**。

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:srm="http://www.mycompany.com/srm/"
    targetNamespace="http://www.mycompany.com/srm/" xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" jaxb:version="2.0" elementFormDefault="qualified"
    attributeFormDefault="unqualified" version="1.0"> 
```

假设我的架构文件名是 A.xsd、B.xsd 和 C.xsd。

*   在 C.xsd 中，我用上述标题定义了一些元素（字符串类型）。

*   在 B.xsd 中，我使用“xsd:include”标签包含了 C.xsd，然后有一个使用 C.xsd 中定义的复杂类型的 complexType 定义。（具有我上面提到的相同标题）

*   在 A.xsd 中，我使用“xsd:include”标签包含了 B.xsd，然后使用 B.xsd 中定义的复杂类型定义了 complexType。（具有我上面提到的相同标题）

我想生成下面提到的 JAXB 类。

*   在 com.generate.packageA 包中生成与 A.xsd 相关的 JAXB 类。

*   在 com.generate.packageB 包中生成与 B.xsd 相关的 JAXB 类。

*   在 com.generate.packageC 包中生成与 C.xsd 相关的 JAXB 类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:30:43.210

您可以从每个“包含”模式分别生成 JAXB 类到单独的包中，并利用 XJC 工具中可用的情节机制。

**示例（来自 Stack Overflow 上给出的答案）**

*   [什么是 .episode 文件..？](https://stackoverflow.com/questions/9756185/what-is-an-episode-file/9757472#9757472)
*   [如何使两个 XSD 使用相同的自定义对象](https://stackoverflow.com/questions/8701141/how-to-make-two-xsds-to-use-the-same-custom-object/8704129#8704129)
*   [Castor 可以处理从基础 XSD 导入的多个 XSD 的类生成吗？](https://stackoverflow.com/questions/7986082/can-castor-handle-class-generation-from-multiple-xsds-importing-from-a-base-xsd/7986486#7986486)

# c - c代码中指向函数的指针

> ID：13451355
> 
> 赞同：0
> 
> 时间：2012-11-19T09:56:40.253
> 
> 标签：c, pointers

我是 C 编程的新手。我正在使用“C 中的数值食谱”一书中的 ac 代码进行多项式回归。在这个程序中，我需要用 fpoly 函数替换 (*funcs) 函数。但我不知道如何做到这一点以及如何将 fpoly 函数更改为像 (*fpoly)。你能帮我解决这个问题吗？

我真的很感激任何帮助。

```
void fpoly(float x, float p[], int np)
//Fitting routine for a polynomial of degree np-1, with coefficients in the array p[1..np].
{
    int j;
    p[1]=1.0;
    for (j=2;j<=np;j++) p[j]=p[j-1]*x;
}

void lfit( float x[], float y[], float sig[], int ndat, float a[], int ia[], int ma, float **covar, float *chisq, void (*funcs)(float, float [], int)) 
```

这是完整的程序：

```
void lfit(float x[], float y[], float sig[], int ndat, float a[], int ia[],
      int ma, float **covar, float *chisq, void (*funcs) (float,float[],  int))

/*Given a set of data points x[1..ndat], y[1..ndat] with individual standard deviations
sig[1..ndat], use χ2 minimization to fit for some or all of the coefficients a[1..ma] of
a function that depends linearly on a, y =sum(i)( ai × afunci(x)). The input array ia[1..ma]
indicates by nonzero entries those components of a that should be fitted for, and by zero entries
those components that should be held fixed at their input values. The program returns values
for a[1..ma], χ2 = chisq, and the covariance matrix covar[1..ma][1..ma]. (Parameters
held fixed will return zero covariances.)Th e user supplies a routine funcs(x,afunc,ma) that
returns the ma basis functions evaluated at x = x in the array afunc[1..ma].*/
{

    void covsrt(float **covar, int ma, int ia[], int mfit);
    void gaussj(float **a, int n, float **b, int m);

    int i, j, k, l, m, mfit = 0;
    float ym, wt, sum, sig2i, **beta, *afunc;

    beta = matrix(1, ma, 1, 1);
    afunc = vector(1, ma);

    for (j = 1; j <= ma; j++)
        if (ia[j])
          mfit++;
    if (mfit == 0)
       nrerror("lfit: no parameters to be fitted");

    for (j = 1; j <= mfit; j++) {   //Initialize the (symmetric)mat rix.
        for (k = 1; k <= mfit; k++)
            covar[j][k] = 0.0;
        beta[j][1] = 0.0;
    }

    for (i = 1; i <= ndat; i++) {
    (*funcs) (x[i], afunc, ma);
    ym = y[i];
    if (mfit < ma) {              //Subtract off dependences on known pieces
        for (j = 1; j <= ma; j++)     //of the fitting function.
        if (!ia[j])
            ym -= a[j] * afunc[j];
    }
    sig2i = 1.0 / SQR(sig[i]);
    for (j = 0, l = 1; l <= ma; l++) {
        if (ia[l]) {
        wt = afunc[l] * sig2i;
        for (j++, k = 0, m = 1; m <= l; m++)
            if (ia[m])
            covar[j][++k] += wt * afunc[m];
        beta[j][1] += ym * wt;
        }
    }
    }
    for (j = 2; j <= mfit; j++)      //Fill in above the diagonal from symmetry.
        for (k = 1; k < j; k++)
           covar[k][j] = covar[j][k];
    gaussj(covar, mfit, beta, 1);      //Matrix solution.
    for (j = 0, l = 1; l <= ma; l++)
         if (ia[l])
           a[l] = beta[++j][1];    //Partition solution to appropriate coefficients
    *chisq = 0.0;   

    for (i = 1; i <= ndat; i++) {      //Evaluate χ2 of the fit.
        (*funcs) (x[i], afunc, ma);
            for (sum = 0.0, j = 1; j <= ma; j++)
                sum += a[j] * afunc[j];
    *chisq += SQR((y[i] - sum) / sig[i]);
    }
    covsrt(covar, ma, ia, mfit);      //Sort covariance matrix to true order of fittin
    free_vector(afunc, 1, ma);    //coefficients.
    free_matrix(beta, 1, ma, 1, 1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:03:51.687

如果我理解正确，如果是这样，您想传递函数`poly`，那么只需传递函数的名称：

```
lfit(x, y,...., poly); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:13:10.667

在

```
void lfit( float [], float [], float [], int, float [], int [], int, float**, float*, void (*funcs)(float, float [], int)) 
```

“void (*funcs)(float, float [], int)”是函数指针的类型签名。如果它在范围内，您可以只传递函数的名称 (fpoly) 来代替“void (*funcs)(float, float [], int)”，不带括号或任何东西。您也可以使用 & 运算符获取其地址，但我相信它是等效的：

```
lfit( all_the_other_args, ..., fpoly); 
```

您还可以有一个保存 fpoly 的本地函数指针：

```
void (*local_function_pointer_variable)(float, float [], int) = fpoly;
lfit( all_the_other_args, ..., local_function_pointer_variable); 
```

在 C 中，函数指针类型的语法有点不方便，但希望你可以定义一个类型来在某种程度上隐藏它

```
typedef void (*poly_fitter)(float, float [], int);
poly_fitter function_pointer_var_of_type_poly_fitter = fpoly;
lfit( all_the_other_args, ..., function_pointer_var_of_type_poly_fitter) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T10:15:19.960

lfit 函数有很多输入参数。

参数的 1 是函数的**地址**。这就是我们`*`在该输入参数的定义中添加的原因。

```
void (*funcs) (float, float[], int)) 
```

因此，当您调用`lfit()`函数时，您可以提及函数地址作为函数`fpoly()`的输入`lfit()`

的地址`void fpoly(float x, float p[], int np)`是`fpoly`或`&fpoly`

所以当你调用你的函数时，`lfit()`你可以这样做：

`lfit(x,y,...,fpoly)`

或以这种方式：

`lfit(x,y,...,&fpoly)`

# c# - 将pdf文件存储在数据库中

> ID：13451357
> 
> 赞同：1
> 
> 时间：2012-11-19T09:56:50.143
> 
> 标签：c#, database, postgresql, pdf

我想设计一个 C# 应用程序来存储员工数据，我有大约 500 名员工。我还想存储每位员工的 pdf 扫描档案。我打算使用`PostgreSQL`. 将pdf扫描的配置文件存储在数据库中是否实用？我需要使用`blob`数据类型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:06:20.633

假设 PDF 不会很大（我假设可能小于 5MB），那就没问题了。您应该[`BYTEA`](http://www.postgresql.org/docs/9.1/static/datatype-binary.html)为此使用类型。

阅读有关如何使用[Npgsql 的更多信息：.NET Postgresql 驱动程序](http://npgsql.projects.pgfoundry.org/docs/manual/UserManual.html)（滚动到*使用二进制数据和 bytea 数据类型*）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T10:03:30.800

是的，您需要将它们保存为 BLOB 对象或 bytea 或文本类型，并且您需要考虑 Postgres 对此的限制。每个条目限制为 2G，每个数据库限制为 40 亿个 blob，每个条目限制为 1G，每个表限制为 40 亿个条目用于字节茶或文本，但如果我是你，我将在数据库中保存对该文件的引用“此 PDF 所在的位置位于本地文件系统中”，然后在需要时流式传输此文件

对于 PostgreSQL 限制，请检查以下链接[http://wiki.postgresql.org/wiki/BinaryFilesInDB](http://wiki.postgresql.org/wiki/BinaryFilesInDB)

# android-holo-everywhere - 如何使用 HoloEverywhere 在 ViewPager 中获取 Roboto 字体

> ID：13451358
> 
> 赞同：1
> 
> 时间：2012-11-19T09:56:49.083
> 
> 标签：android-holo-everywhere

我正在尝试在片段中使用的 ViewPager 中使用 Christophe Versieux 出色的 HoloEverywhere 库。

如果我的片段有以下布局......

```
<?xml version="1.0" encoding="utf-8"?><LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:holo="http://schemas.android.com/apk/res-auto"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Roboto Font" />

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" /></LinearLayout> 
```

然后 Roboto 字体出现在 TextView 中，正如我所期望的那样。

但是，如果 ViewPager 膨胀的视图中存在相同的 TextView xml，则 Roboto 字体不会出现在寻呼机的 textview 中。它只是默认字体。

我错过了什么？

# c++ - 从 Xcode 调试器调用 lua_getstack

> ID：13451360
> 
> 赞同：0
> 
> 时间：2012-11-19T09:56:51.757
> 
> 标签：c++, xcode, lua, lldb

我正在尝试调试使用 Lua 5.1 的 C/C++ 应用程序。在这个阶段，有一种方法可以在调试时将数据的人类可读表示转储到 Lua 堆栈上，这将非常有用。我找到了`lua_getstack`看起来像正确类型的函数，但是我找不到通过 LLDB 命令行调用它并将其打印为人类可读的东西的方法。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:23:25.180

您可以使用这样的东西，然后从调试器中调用它：

```
void lua_stackdump(lua_State *L) 
{
  int i;
  int top = lua_gettop(L);
  for (i = 1; i <= top; i++) { /* repeat for each level */
    int t = lua_type(L, i);
    switch (t) {
      case LUA_TSTRING: { /* strings */
         printf("’%s’\n", lua_tostring(L, i));
         break;
      }
      case LUA_TBOOLEAN: { /* booleans */
         printf(lua_toboolean(L, i) ? "true" : "false");
         break;
      }
      case LUA_TNUMBER: { /* numbers */
         printf("%g\n", lua_tonumber(L, i));
         break;
      }
      default: { /* other values */
         printf("%s\n", lua_typename(L, t));
         break;
      }
    }
  }
  printf("\n"); /* end the listing */
} 
```

# php - 如何用另一个服务替换 Symfony2 的 CsrfProvider？

> ID：13451366
> 
> 赞同：0
> 
> 时间：2012-11-19T09:57:21.213
> 
> 标签：php, symfony, configuration, csrf

Symfony2 的默认 SessionCsrfProvider 可以替换为另一个实现[CsrfProviderInterface](http://api.symfony.com/2.1/Symfony/Component/Form/Extension/Csrf/CsrfProvider/CsrfProviderInterface.html)的服务。但是，文档没有说明在哪里定义替换服务 ID。

[默认框架配置](http://symfony.com/doc/current/reference/configuration/framework.html#full-default-configuration)只允许设置 field_name 和启用/禁用标志。会话中没有与“storage_id”类似的配置选项。

那么，如何替换默认的 CSRF Provider 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:54:41.747

将此添加到您的 config.yml

```
services:
    form.csrf_provider: 
        class: YourNamespace\YourProvider
        arguments: [ @session, %kernel.secret% ] 
```

# php - PHP与Javascript中MT实现中相同种子的不同输出

> ID：13451368
> 
> 赞同：1
> 
> 时间：2012-11-19T09:57:27.683
> 
> 标签：php, algorithm, mersenne-twister

我正在尝试在 PHP中实现**Mersenne Twister算法。**我从[http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/VERSIONS/JAVASCRIPT/java-script.html获取了 Javascript 实现](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/VERSIONS/JAVASCRIPT/java-script.html)

我几乎已经从上面的 js 代码中进行了行到行的转换。但是，为给定种子生成的随机数在 PHP 中是不同的。

在 PHP 中实现（选择数据类型等）时是否需要遵循任何特定步骤？

代码片段如下

```
/************* PHP ***************************/

<?php

require_once "mersenne_twister.php";
use mersenne_twister\twister;

$range = array(1,2,3,5,6,7,8,9,12,13,15);
$twister1 = new twister(1347299472.0059);
$t1 =  $twister1->int32()* (1.0 / 4294967296.0) ;
$foo = $t1 * count($range);
echo $foo;

/************* Javascript ***************************/

var seed = 1347299472.0059;
var range = [1,2,3,5,6,7,8,9,12,13,15];// the numbers to chose from
var foo = Math.floor(genrand_float(range ) * range .length);
document.write(foo); 
```

**$twister1->int32() * (1.0 / 4294967296.0)**和 **genrand_float(range)**给出不同的输出。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:00:50.010

[mt_rand()](http://php.net/mt_rand)函数已经实现了 Mersenne Twister 算法，无需编写自己的版本。

# c++ - 最后一个数组打印 0 C++

> ID：13451369
> 
> 赞同：0
> 
> 时间：2012-11-19T09:57:44.290
> 
> 标签：c++, arrays, kubuntu

我正在用 C++ 制作一个骰子游戏，在我的程序中我有一些数组。

```
die[5] = { (rand()%6)+1, (rand()%6)+1, (rand()%6)+1, (rand()%6)+1, (rand()%6)+1 }; 
```

然后我使用数组

```
cout<<"First die: "<< die[0] <<"\n" 
```

ETC

但是，当我运行程序时，最后一个数组*总是*会打印 0，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T10:04:15.323

您并没有真正提供太多信息，但这是我的猜测：

*   你走得太远了。数组中的最后一个位置是 die[4]，您可能正在使用 die[5]，这意味着您正在访问您不应该访问的内存。在某些系统上，这将自动初始化为“0”。

大小为 N 的数组总是包含从 0 到 N-1 的 N 个元素。使用 array[N] 访问*超出*数组范围的内存。这可能是未使用的内存（最佳情况）或分配给其他东西的内存。结果是麻烦。不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:06:42.213

在您的代码中，您有这一行：

```
54\.  cout<<"Sixth die: " << die[5] <<"\n"; 
```

这是无效的访问，因为 die 只有 5 个元素，因此 0 到 4 是有效索引。

这实际上是“未定义的行为”。您的程序可能会进行核心转储/访问冲突，但并非必须如此。相反，它可以只输出一些随机数或零......

# java - 从 xml 文档中获取 html 字符串

> ID：13451371
> 
> 赞同：-1
> 
> 时间：2012-11-19T09:57:49.970
> 
> 标签：java, xml, xml-parsing

我有以下xml：

```
<version>
    <name>2.0.2</name>
    <description>
-Stop hsql database after close fist <br />
-Check for null category name before adding it to the categories list  <br />
-Fix NPE bug if there is no updates  <br />
-add default value for variable, change read bytes filter, and description of propertyFile  <br />
-Change HTTP web Proxy (the “qcProxy” field ) to http://web-proxy.isr.hp.com:8080  <br />
</description>
    <fromversion>>=2.0</fromversion>
</version> 
```

我想使用 Java 返回描述标签字符串内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:14:58.080

This is pretty standard Java XML parsing, you can find it anywhere on the internet, but it goes like this using XPath in standard JDK.

```
String xml = "your XML";

// load the XML as String into a DOM Document object
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
ByteArrayInputStream bis = new ByteArrayInputStream(xml.getBytes());
Document doc = docBuilder.parse(bis);

// XPath to retrieve the content of the <version>/<description> tag
XPath xpath = XPathFactory.newInstance().newXPath();
XPathExpression expr = xpath.compile("/version/description");
Node description = (Node)expr.evaluate(doc, XPathConstants.NODE);
System.out.println("description: " + description.getTextContent()); 
```

* * *

**Edit**

Since you are having XML `<br/>` in your text content, it cannot be retrieved from `Node.getTextContent()`. One solution is to transform that `Node` to XML String equivalent, stripping the root node `<description>`.

This is a complete example:

```
String xml = "<version>\r\n" + //
        "    <name>2.0.2</name>\r\n" + //
        "    <description>\r\n" + //
        "-Stop hsql database after close fist <br />\r\n" + //
        "-Check for null category name before adding it to the categories list  <br />\r\n" + //
        "-Fix NPE bug if there is no updates  <br />\r\n" + //
        "-add default value for variable, change read bytes filter, and description of propertyFile  <br />\r\n" + //
        "-Change HTTP web Proxy (the “qcProxy” field ) to http://web-proxy.isr.hp.com:8080  <br />\r\n" + //
        "</description>\r\n" + //
        "    <fromversion>>=2.0</fromversion>\r\n" + //
        "</version>";

DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
ByteArrayInputStream bis = new ByteArrayInputStream(xml.getBytes());
Document doc = docBuilder.parse(bis);

// XPath to retrieve the <version>/<description> tag
XPath xpath = XPathFactory.newInstance().newXPath();
XPathExpression expr = xpath.compile("/version/description");
Node descriptionNode = (Node) expr.evaluate(doc, XPathConstants.NODE);

// Transformer to convert the XML Node to String equivalent
Transformer transformer = TransformerFactory.newInstance().newTransformer();
transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
StringWriter sw = new StringWriter();
transformer.transform(new DOMSource(descriptionNode), new StreamResult(sw));
String description = sw.getBuffer().toString().replaceAll("</?description>", "");
System.out.println(description); 
```

prints:

```
-Stop hsql database after close fist <br/>
-Check for null category name before adding it to the categories list  <br/>
-Fix NPE bug if there is no updates  <br/>
-add default value for variable, change read bytes filter, and description of propertyFile  <br/>
-Change HTTP web Proxy (the “qcProxy” field ) to http://web-proxy.isr.hp.com:8080  <br/> 
```

* * *

**Edit 2**

In order to have them all you need to get a NODESET of the different nodes and iterate over it to do the exact same operation as above.

```
// XPath to retrieve the content of the <version>/<description> tag
XPath xpath = XPathFactory.newInstance().newXPath();
XPathExpression expr = xpath.compile("//description");
NodeList descriptionNode = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);

List<String> descriptions = new ArrayList<String>(); // hold all the descriptions as String
Transformer transformer = TransformerFactory.newInstance().newTransformer();
transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
for (int i = 0; i < descriptionNode.getLength(); ++i) {
    Node descr = descriptionNode.item(i);
    StringWriter sw = new StringWriter();
    transformer.transform(new DOMSource(descr), new StreamResult(sw));
    String description = sw.getBuffer().toString().replaceAll("</?description>", "");
    descriptions.add(description);
}
// here you can do what you want with the List of Strings `description` 
```

# java - 如何从服务器获取数据作为 json 数组并将其转换为 java 数组以在 android 应用程序中使用

> ID：13451373
> 
> 赞同：4
> 
> 时间：2012-11-19T09:57:53.933
> 
> 标签：java, android, json

> **可能重复**
> 
> [如何解析 JSON 并将其值转换为数组？](https://stackoverflow.com/questions/2255220/how-to-parse-a-json-and-turn-its-values-into-an-array)

```
[
   [
      "sn1",
      "Liquid_level",
      "85"
   ],
   [
      "sn2",
      "Liquid_level,Temperature",
      "95"
   ],
   [
      "sn2",
      "Liquid_level,Temperature",
      "50"
   ],
   [
      "sn3",
      "Liquid_level",
      "85.7"
   ],
   [
      "sn4",
      "Liquid_level",
      "90"
   ],
   [
      "sn5",
      "Volt_meter",
      "4.5"
   ],
   [
      "sn6",
      "Temperature",
      "56"
   ],
   [
      "sn8",
      "Liquid_level",
      "30"
   ]
] 
```

这是我想要获取到 java 数组的数据（创建一个动态表来显示数据）。

我可以使用这个获取文本值

```
String response = null;
            try {
                response = CustomHttpClient.executeHttpPost("http://test.tester.com/check.php", postParameters);
                String res=response.toString();} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T10:11:13.403

从[如何解析 JSON 并将其值转换为数组？](https://stackoverflow.com/questions/2255220/how-to-parse-a-json-and-turn-its-values-into-an-array)：

> 对于您的示例：
> 
> ```
> {'profiles': [{'name':'john', 'age': 44}, {'name':'Alex','age':11}]} 
> ```
> 
> 你将不得不做一些这种效果：
> 
> ```
> JSONObject myjson = new JSONObject(the_json);
> JSONArray the_json_array = myjson.getJSONArray("profiles"); 
> ```
> 
> 这将返回数组对象。
> 
> 然后迭代将如下：
> 
> ```
>  int size = the_json_array.length();
>     ArrayList<JSONObject> arrays = new ArrayList<JSONObject>();
>     for (int i = 0; i < size; i++) {
>       JSONObject another_json_object = the_json_array.getJSONObject(i);
>             //Blah blah blah...
>             arrays.add(another_json_object);
>     }
> 
> //Finally
> JSONObject[] jsons = new JSONObject[arrays.size()];
> arrays.toArray(jsons);
> 
> //The end... 
> ```
> 
> 您将必须确定数据是否为数组（只需检查`charAt(0)`以`[`字符开头）。
> 
> 希望这可以帮助。

归功于[https://stackoverflow.com/users/251173/the-elite-gentleman](https://stackoverflow.com/users/251173/the-elite-gentleman)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:42:43.530

您将 JSON 转换为 Java 很大程度上取决于您用于执行任务的库。这里的其他答案使用该`org.json`库，但大多数极客会对它的使用做出激烈反应，因为它很慢。我所知道的最快的库是 Jackson，但我个人更喜欢 Google-GSON，因为它足够快而且非常易于使用。

查看您的示例字符串，您似乎有一个字符串数组。在 Gson 中，您想将它们视为 a `Collection`of a `Collection`of `String`s。这是示例代码：

```
import java.lang.reflect.Type;
import java.util.Collection;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

public class Main {
    public static void main(String[] args) {
        // your sample JSON string, converted to a java string
        String json = "[\n   [\n      \"sn1\",\n      \"Liquid_level\",\n      \"85\"\n   ],\n   [\n      \"sn2\",\n      \"Liquid_level,Temperature\",\n      \"95\"\n   ],\n   [\n      \"sn2\",\n      \"Liquid_level,Temperature\",\n      \"50\"\n   ],\n   [\n      \"sn3\",\n      \"Liquid_level\",\n      \"85.7\"\n   ],\n   [\n      \"sn4\",\n      \"Liquid_level\",\n      \"90\"\n   ],\n   [\n      \"sn5\",\n      \"Volt_meter\",\n      \"4.5\"\n   ],\n   [\n      \"sn6\",\n      \"Temperature\",\n      \"56\"\n   ],\n   [\n      \"sn8\",\n      \"Liquid_level\",\n      \"30\"\n   ]\n]";

        // instantiate a Gson object
        Gson gson = new Gson();

        // define the type of object you want to use it in Java, which is a collection of a collection of strings
        Type collectionType = new TypeToken<Collection<Collection<String>>>(){}.getType();

        // happiness starts here
        Collection<Collection<String>> stringArrays = gson.fromJson(json, collectionType);

        // simply print out everything
        for (Collection<String> collection : stringArrays) {
            for (String s : collection) {
                System.out.print(s + ", ");
            }
            System.out.println();
        }
    }
} 
```

和输出：

```
sn1, Liquid_level, 85, 
sn2, Liquid_level,Temperature, 95, 
sn2, Liquid_level,Temperature, 50, 
sn3, Liquid_level, 85.7, 
sn4, Liquid_level, 90, 
sn5, Volt_meter, 4.5, 
sn6, Temperature, 56, 
sn8, Liquid_level, 30, 
```

这取自 Google-GSON 用户指南：[https ://sites.google.com/site/gson/gson-user-guide#TOC-Collections-Examples](https://sites.google.com/site/gson/gson-user-guide#TOC-Collections-Examples)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T10:11:52.340

首先解析这个json数组并存储在ArrayList中

```
 try 
             {
                      ArrayList<String> arl= new ArrayList<String>();
                      JSONObject jobj = new JSONObject(signedData);
                      JSONArray jroot = jobj.getJSONArray("xxxxx");

              for(int i=0;i<jroot.length();i++)
              {

                  JSONObject jElement = jroot.getJSONObject(i);

                  arl.add(jElement.getString("xxxxx"));

              }

          }

          catch (Exception e)
          {
               Log.v("log", "Error parsing data " + e.toString());

          } 
```

然后使用 forloop 存储到字符串数组..

# jsf - Richfaces：组件丰富：dataScroller 不起作用

> ID：13451374
> 
> 赞同：1
> 
> 时间：2012-11-19T09:58:06.023
> 
> 标签：jsf, richfaces, datascroller

我正在使用richfaces 3.3.3 我在另一个rich:dataTable 中有一个rich:dataTable 并且两者都有一个rich:dataScroller 但内部不起作用：

```
<rich:dataTable id="dataTableVisibility" value="#{jsfGridUtenti.itemKeys}"                        
    var="roleName" cellspacing="1"
    cellpadding="1" border="1"
    styleClass="tab" style="width:60%"                                                 
    rowClasses="rdispari,rpari"
    headerClass="headTab" rows="3"
    rendered="#{jsfGridUtenti.renderPanelReportVisibility}">

    <f:facet name="footer">
        <rich:datascroller for="dataTableVisibility"
            fastStep="10" pagesVar="pageCountCl"
            pageIndexVar="pageIndexCl"
            maxPages="9" renderIfSinglePage="false"
            selectedStyle="font-weight:bold;">
        </rich:datascroller>
    </f:facet>
    <h:column>
        <f:facet name="header">
           #{applicationMessages.ruolo}
        </f:facet> 

        <a4j:commandLink reRender="reportUserVisibilityCompanyRoleClass"  action="#{jsfGridUtenti.deleteAssociationRole(roleName)}">                                                           
            <h:graphicImage styleClass="toolbarLabel"  url="../resources/img/cancella.png" />
        </a4j:commandLink>
        <rich:spacer height="1" width="8" /> 
        <h:outputText  style="font-size:11px" value="#{roleName}"/>                                          
    </h:column>
    <h:column>                                        
        <f:facet name="header">
            #{applicationMessages.companyAssociate}
        </f:facet>  

        <h:column>
             <rich:dataTable  id="dataTableCompany"
                 var="company" value="#{jsfGridUtenti.findCompanyInHashMap(roleName)}"                                                                                                         
                 style="width:100%" rows="5"
                 rowClasses="rdispari,rpari"
                 columnsWidth="10%,10%,80%"
                 headerClass="headTab">

                 <f:facet  name="footer">
                     <rich:datascroller for="dataTableCompany"
                         fastStep="10" pagesVar="pageCountCls"
                         pageIndexVar="pageIndexCls"
                         maxPages="9" ajaxSingle="true"
                         selectedStyle="font-weight:bold;"
                         renderIfSinglePage="false">                                                          
                     </rich:datascroller>
                 </f:facet>

                 <h:column>
                     <a4j:commandLink reRender="reportUserVisibilityCompanyRoleClass"  action="#{jsfGridUtenti.deleteAssociationCompany(roleName,company)}">
                         <h:graphicImage  styleClass="toolbarLabel"  url="../resources/img/cancella.png" />
                     </a4j:commandLink>                                                                                        
                 </h:column>
                 <h:column>
                     <a4j:commandLink  immediate="true" action="#{jsfGridUtenti.setCompanyToShow(roleName,company)}"            
                         reRender="showClassi,panelGridReport">
                         <h:graphicImage  styleClass="toolbarLabel"  url="../resources/img/lente.png" />                                                             
                     </a4j:commandLink>
                 </h:column>
                 <h:column>
                     <h:outputText style="font-size:11px" value="#{company.label}"/>
                 </h:column>
             </rich:dataTable>                                                                                                                                                                                                                                                                                                
         </h:column> 
     </h:column>
 </rich:dataTable> 
```

现在，当我单击外部`rich:dataScroller`时，它运行良好，相反，当我单击内部时，没有任何反应。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:09:14.153

这是一个已知的问题。`rich:datascroller`不支持嵌套迭代组件，例如`dataTable`等`repeat`。这有一个[JIRA 问题](https://issues.jboss.org/browse/RF-6538)。

你说'什么都没有发生'？你看你的控制台了吗？它不会显示这样的警告吗？

```
The requested page #2 isn't found in the model containing 1 pages. Paging is reset to page #1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-05T10:26:25.487

我得到了同样的警告信息，并通过添加一个会话变量来解决它：

```
<rich:dataScroller for="table" page="#{sessionBean.page}" /> 
```

在我的情况下，在我更改代码之前无法访问 bean（由于范围）。我走错了路，因为我本以为会出现警告/错误，指出问题与表达式语言有关。

# android - 将变量从主类传递到异步类

> ID：13451378
> 
> 赞同：0
> 
> 时间：2012-11-19T09:58:20.000
> 
> 标签：android, android-asynctask, global-variables

不知何故，我无法完成这件事。这就是我到目前为止所尝试的全部：

1.  **主要**：

    ```
    private String myState;

    public String getState() {
        return myState;
    }

    public void setState(String s) {
        myState = s;
    } 
    ```

    **异步**：

    ```
    Main appState = ((Main)getApplicationContext());
    String state = appState.getState(); 
    ```

    错误： `No enclosing instance of the type Main is accessible in scope`

2.  尝试使用 Helper(Globals) 类。

    ```
    public class Globals extends Application{
          private String test= "1";
    } 
    ```

    **主要**：

    ```
    private Globals mGlobals;
    mGlobals = new Globals();  
    mGlobals.test = "2";
    //Do Async thing 
    ```

    **异步**：

    ```
    private Globals mGlobals;
    mGlobals = new Globals();
    print mGlobals.test;
    // (result is 1, should be 2) 
    ```

3.  还有别的东西，但不记得很好。
    尝试了很多东西（退格和删除按钮被过度使用：p）
    但我无法让一切正常工作。

    异步类没有活动。

粘贴代码：http: [//pastebin.com/ikcsdL1p](http://pastebin.com/ikcsdL1p)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:07:27.873

在你的异步类中声明一个构造函数，比如

```
public class Task extends AsyncTask<Void,Void,Void>

{

private Context context;

        public Task(Context context)
        {
         this.context=context;
        }    
} 
```

从你的主要课程

```
new Task(this).execute((Void)null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:47:23.233

与其尝试获取 Application Context ，不如尝试直接在 AsyncTask 构造函数中传递 Context 。正如@Mohd Mufiz 在他的回答中已经提到的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:22:17.493

尝试使用 SharedPreferences... 创建和调用 String var 使用 ...

```
String button_name_11 = getSharedPreferences("PREFERENCE", MODE_PRIVATE).getString("butname11", "EMPTY"); 
```

然后改变，只是...

```
getSharedPreferences("PREFERENCE", MODE_PRIVATE)
                .edit()
                .putString("butname11", "NEW_STRING" )
                .commit(); 
```

# c# - 错误 位置 1 没有行

> ID：13451380
> 
> 赞同：0
> 
> 时间：2012-11-19T09:58:22.967
> 
> 标签：c#, .net, visual-studio-2010

我遇到了一个例外

System.ArgumentOutOfRangeException：位置 1 没有行。RBTree`1.GetNodeByIndex(Int32 userIndex)**

位置处没有行可以是 0 或 1 或 2 。我想我正在尝试读取或写入一些超出数组边界的数组元素。代码片段如下所示

```
public void ManageAlarm(string textName, int leaveValue)
{
   try
   {
      int indices = team.Find(textName);
      if (indices >= 0)
      {
         DataRow row = teamTable.Rows[indices];
         row[m_leaveValues] = leaveValue;
      }
   } 
```

我应该在这里做什么来防止这个警报跟踪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:02:16.713

在访问其中的行之前，您需要检查 m_tblAlert 中的行数。`m_tblAlert.Rows.Count must be greater then indx`

```
public void ManageDuplicateAlarm(string alertName, int dupValue)
{
   try
   {
      int indx = m_alerts.Find(alertName);
      if (indx >= 0 && m_tblAlert.Rows.Count > indx)
      {
         DataRow row = m_tblAlert.Rows[idx];
         m_dcDuplicates.ReadOnly = false;
         row[m_dcDuplicates] = dupValue;
         m_dcDuplicates.ReadOnly = true;
      }
   } 
```

编辑关于 OP 评论的更多解释

你是`checking indx >= 0 to make sure that that -1 could not be row index`声明 m_tblAlert.Rows[idx]; `Similarly you need to check if the value return by m_alerts.Find(alertName) must be valid row number i.e it should not be greater then the number of rows`你在数据表中。

# actionscript-3 - 带外圆角的 Tab 按钮

> ID：13451382
> 
> 赞同：0
> 
> 时间：2012-11-19T09:58:24.747
> 
> 标签：actionscript-3, mxml, skinning

我想为 TabBarButton 创建一个看起来像该示例的皮肤：![在此处输入图像描述](../Images/32a29af849bbb216e3b418d617e799d5.png)

有外圆底角。我如何使用 MXML 标记来制作它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:58:01.843

在您的按钮皮肤中`Rect`设置正 y 半径和负 x 半径。

```
<s:Rect left="0" right="0" top="0" bottom="0"
            bottomLeftRadiusX="-5" bottomLeftRadiusY="5"
            bottomRightRadiusX="-5" bottomRightRadiusY="5"> 
```

# c# - C#：数十亿次计算的最快数组

> ID：13451383
> 
> 赞同：-6
> 
> 时间：2012-11-19T09:58:36.307
> 
> 标签：c#, performance, types

它会是 char、byte、Int16、Int32、Int64（也许最后三个无符号，因为我不会有负数？）。

我需要它来进行乘法和加法。较小的数字可以包含一个类型，一个大的数字将分成更多的部分。

```
An example: 1234567898765321
In char: {1, 2, 3, 4, 5, 6, 7, 8, 9, 8, 7, 6, 5, 4, 3, 2, 1}
In Int32: {123456789, 87654321} 
```

那么，对于数十亿次计算，哪个更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:01:24.097

如果你的意思是：

> 我可以通过将大数分成小块并自己执行加法和乘法逻辑来获得速度优势吗？

答案是不。使用大到足以容纳整个值的类型，编译器/JIT 将生成机器代码，在一条指令中执行每个算术运算，这将尽可能快。

# c# - 如何获取显示图像的（x，y）坐标？

> ID：13451388
> 
> 赞同：1
> 
> 时间：2012-11-19T09:58:40.627
> 
> 标签：c#, wpf, image, events, user-interface

目前，我正在使用 WPF`Image`控件来显示图像。我想做以下事情：在`MouseUp`,`MouseDown`或`MouseMove`事件上，我想获取光标下点的坐标，而不是参考控件的左上角，而是相对于显示的位图的实际坐标，可能已重新缩放，或者可能具有与控件本身不同的纵横比。如果备用控件提供此功能，我同样会很高兴听到它。提前致谢。

编辑：如果由于纵横比不同，控件的坐标超出了图像的范围，我也想知道它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:13:46.967

您可以通过这种方式获取鼠标的坐标：

```
private void image1_MouseDown(object sender, MouseButtonEventArgs e)
{
Point point = e.GetPosition(image1); //position relative to the image
Point point2 = e.GetPosition(this);  //position relative to the window
} 
```

希望回答了您的部分问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T10:09:04.547

您可以使用类的各种[TransformTo*](http://msdn.microsoft.com/en-us/library/ms635661.aspx)方法`Visual`来获取相对于特定控件的坐标，它将考虑应用于可视树的所有转换。

此外，如果您将`MouseUp`,`MouseDown`和附加`MouseMove`到`Image`控件本身，您应该已经`MouseButtonEventArgs`从代码检查坐标是否超出范围。

如果您的**实际**目标是找出位图图像的哪个实际像素已被鼠标触摸（因为您需要位图/像素编辑软件），那么事情会变得更加困难，因为 WPF 使用不直接相关的虚拟设备缩进像素到屏幕上的像素或已在`Image`控件中呈现的位图中的像素。该`Image`控件在内部根据位图文件本身的 DPI 设置和操作系统的 DPI 设置来缩放位图图像。

# preg-replace - 带括号和引号的 Preg_replace 模式

> ID：13451392
> 
> 赞同：-1
> 
> 时间：2012-11-19T09:59:00.310
> 
> 标签：preg-replace

如何转换这个：

```
<a href="{cms_selflink href='my-link' }">My text</a> 
```

进入这个：

```
<a href="/page/my-link">My text</a> 
```

我试过这个：

```
$masque1 = "/\{cms_selflink href=\'(.*?)\'(.*)\}/i";
$masque2 = '/page/$1';
$texte = preg_replace($masque1, $masque2, $texte); 
```

但这不起作用。

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:50:18.670

这项工作：

```
$masque1 = "/\{cms_selflink href=\'(.+?)\' \}/s"; 
```

# r - 如何用 NA 而不是 X 制作交叉表？

> ID：13451394
> 
> 赞同：1
> 
> 时间：2012-11-19T09:59:01.997
> 
> 标签：r, pivot-table, crosstab

我有以下数据集（请参阅下面的加载数据集）

```
 ID       Date qty
1  ID25 2007-12-01  45
2  ID25 2008-01-01  26
3  ID25 2008-02-01  46
4  ID25 2008-03-01   0
5  ID25 2008-04-01  78
6  ID25 2008-05-01  65
7  ID25 2008-06-01  32
8  ID99 2008-02-01  99
9  ID99 2008-03-01   0
10 ID99 2008-04-01  99 
```

我想创建一个数据透视表。我使用以下命令执行此操作，并且似乎工作正常：

```
pivottable <- xtabs(qty ~ ID + Date, table) 
```

输出如下：

```
ID     2007-12-01 2008-01-01 2008-02-01 2008-03-01 2008-04-01 2008-05-01 2008-06-01
ID25         45         26         46          0         78         65         32
ID99          0          0         99          0         99          0          0 
```

但是，对于 ID99，只有 3 个周期的值，其余的被标记为“0”。我想在第一个表中没有值的字段中显示 NA 。我想得到一个如下所示的表格：

```
ID     2007-12-01 2008-01-01 2008-02-01 2008-03-01 2008-04-01 2008-05-01 2008-06-01
ID25         45         26         46          0         78         65         32
ID99         NA         NA         99          0         99         NA         NA 
```

关于如何做到这一点的任何建议？

**加载数据集：**

```
table <- structure(list(ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 
2L, 2L), .Label = c("ID25", "ID99"), class = "factor"), Date = structure(c(7L, 
1L, 2L, 3L, 4L, 5L, 6L, 2L, 3L, 4L), .Label = c("01/01/2008", 
"01/02/2008", "01/03/2008", "01/04/2008", "01/05/2008", "01/06/2008", 
"01/12/2007"), class = "factor"), qty = c(45L, 26L, 46L, 0L, 
78L, 65L, 32L, 99L, 0L, 99L)), .Names = c("ID", "Date", "qty"
), class = "data.frame", row.names = c(NA, -10L))

table$Date <- as.POSIXct(table$Date, format='%d/%m/%Y') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:27:33.877

您可以使用`xtabs`两次来获得您正在寻找的输出：

1.  创建表：

    ```
    pivottable <- xtabs(qty ~ ID + Date, table) 
    ```

2.  将不存在的组合的所有零替换为`NA`：

    ```
    pivottable[!xtabs( ~ ID + Date, table)] <- NA 
    ```

输出：

```
 Date
ID     2007-12-01 2008-01-01 2008-02-01 2008-03-01 2008-04-01 2008-05-01 2008-06-01
  ID25         45         26         46          0         78         65         32
  ID99                               99          0         99 
```

请注意，`NA`不显示 s。这是由于此类的`print`功能。但是您可以使用`unclass(pivottable)`来实现`print`.

# java - 休眠不维护持久性顺序

> ID：13451398
> 
> 赞同：0
> 
> 时间：2012-11-19T09:59:12.743
> 
> 标签：java, hibernate, persistence

我正在研究导入功能，我必须从文件中导入数据并使用休眠将其更新到数据库。

对象结构是：有一个父级，它有一组子级。

当我进行导入时，我首先删除所有现有的孩子，然后添加我从文件中读取的新孩子。

我这样做的方式如下

```
parent = session.load(<id of parent>)  
parent.getchildrenSet.clear()  
parent.saveOrUpdate(parent); 
```

然后，在一个循环中创建新的子节点并将其添加到父节点的 childrenSet 中。然后

```
parent.saveOrUpdate(parent); 
```

映射如下

在父级

```
@OneToMany(cascade = CascadeType.ALL)
    @JoinTable(name = "CHILD_TABLE", joinColumns = { @JoinColumn(name = "CHILD_PARENT_ID") }, inverseJoinColumns = { @JoinColumn(name = "CHILD_ID") })
    @MapKeyColumn(name = "CHILD_ID")
    private Map<Long, Children> childrenMap; 
```

在孩子

```
 @ManyToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "CHILD_PARENT_ID")
    private Parent parent; 
```

**当我运行此代码时，我希望日志按以下顺序打印 DML**
1\. 删除所有子级
2\. 插入新子级
3\. 更新父级

**但它打印的是**
1\. 插入新子
2\. 更新父
3\. 删除所有子

因此，由于上述顺序，它会从父级中删除所有子级，甚至是我因导入而新添加的子级。

似乎休眠不保持我调用 DML 的顺序。谁能给我一些建议？如果问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:17:46.083

Collections.clear() 不等于删除。您需要调用显式删除以确保在插入之前删除。否则，当您的会话终止时，隐式删除将被执行。

# python - 使用python将数据保存到txt文件

> ID：13451400
> 
> 赞同：-1
> 
> 时间：2012-11-19T09:59:22.493
> 
> 标签：python

我是 python 新手，我真的需要一些帮助。我正在做这个记忆游戏，我需要使用 python 将用户、游戏分数和时间保存到文本文件中。我尝试了几种方法来做到这一点，但似乎没有任何效果。我需要使用 python 将 html 页面 (statsParagraph) 上的游戏后显示的文本获取到 *txt 文件中在我的 html 代码中，我有这个：

```
<form  action="http://....python file addres" method="GET">
<p id="statsParagraph" name="user" value=""></p>
</form> 
```

在我的 javascript 代码中，我有这个：

```
function showstatistic(){ 
var user = prompt ("What is your name?","");
alert (user + ". game is over!")
var s="";
for(var i=0;i<statistic.length;i++){
    var t=statistic[i].time;
    var timeString= (t-(t%60))/60+":"+(t%60);
    s += "User: " + user 
    +" <br/>"
    + " Game #"+ (i+1) +"  "
    +" <br/>"
    +" Guessed: "+ statistic[i].guessed
    +" <br/>"
    +" Minus points: "+ statistic[i].minuses
    +" <br/>"
    +" Guessed right: "+ statistic[i].plusPoints
    +" <br/>"
    +" Time: "+ timeString
    +" <br/>"
    +" <br/>";
    }   
$("#statsParagraph").html(s);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:06:04.183

你会打开代码

```
from sys import argv

script, filename = argv

target = open(filename, 'w') 
```

然后将每条信息分配给具有适当名称的变量

```
time = #x
score = #x
user = #name 
```

然后输入以下内容

```
target.write(time)
target.write("\n")
target.write(score)
target.write("\n")
target.write(user)
target.write("\n")

target.close() 
```

当您运行文件时，您将使用参数运行它，该参数是您要写入信息的文件。

```
>python mymemorygame.py savegamefile.txt 
```

您可能还需要考虑在写入文件之前截断文件，具体取决于您保存信息的方式（多个文件或一个文件）

我希望这会有所帮助，如果没有，请道歉，我可能误解了您要做什么。

或者，它可能更难编写但更易于管理/实现，您可以将信息放入存储在单个文件中的列表中，而不是一直编写新的 .txt 文件。

# rabbitmq - 配置 RabbitMQ 以用新消息替换旧的待处理消息

> ID：13451401
> 
> 赞同：3
> 
> 时间：2012-11-19T09:59:23.840
> 
> 标签：rabbitmq, amqp

是否可以配置 RabbitMQ 交换或队列，以便在任何时候最多有一条具有给定路由键的消息处于挂起状态？如果有新消息到达，旧消息将被丢弃，新消息将入队。

如果这样的选项不可用，那么在应用程序级别实现它的最佳方法是什么？即当应用程序收到一条消息时，它如何检查是否还有更多未决消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T11:02:51.640

您需要安装 Last Value Cache 并启用它。您的交换将是类型“x-lvc”，它继承自直接交换类型。

每次连接到 MQ 时，创建一个队列并绑定到此交换。它将最新的消息传递到队列。它非常适合确保您只收到最新消息。除非有连接的队列，否则发送到此交换的所有其他消息都将被丢弃。因此，一旦连接，您将继续收到更新。

这里是安装说明： [https ://github.com/simonmacmullen/rabbitmq-lvc-plugin](https://github.com/simonmacmullen/rabbitmq-lvc-plugin)

这是一个类似的问题： [RabbitMQ 消息传递 - 初始化消费者](https://stackoverflow.com/questions/10585598/rabbitmq-messaging-initializing-consumer)

# java - 双重检查问题是否在 1.6 或 1.7 中修复？

> ID：13451402
> 
> 赞同：0
> 
> 时间：2012-11-19T09:59:26.533
> 
> 标签：java, memory-model

[1.4 http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)中存在双重检查问题 在后来的 JDK 中修复了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T10:03:36.660

一个简单的谷歌显示

*   如果以特定方式使用，它在 Java 5 中已修复（请参阅 Marko 的回答）
*   它仍然不是一个好主意。通常一个简单`enum`的就是更好的解决方案。

而不是写

```
public final class Singleton {
    // Double-check idiom for lazy initialization of instance fields.
    private static volatile Singleton instance;

    private Singleton() {
    }

    public static Singleton getInstance() {
        Singleton result = instance;
        if (result == null) { // First check (no locking)
            synchronized (Singleton.class) {
                result = instance;
                if (result == null) // Second check (with locking)
                    instance = result = new Singleton();
            }
        }
        return result;
    }
} 
```

你可以写

```
public enum Singleton {
    // Thread safe lazy initialization of instance field.
    INSTANCE
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T10:11:17.553

不，它没有修复，也不会修复。Java 5 刚刚明确指出这个习语被打破了，这是最终的判决。懒惰地初始化实例字段的正确方法涉及另一个类似称为习语的方法：*双重检查习语*：

```
// Double-check idiom for lazy initialization of instance fields.
private volatile FieldType field;
FieldType getField() {
  FieldType result = field;
  if (result == null) { // First check (no locking)
    synchronized(this) {
      result = field;
      if (result == null) // Second check (with locking)
        field = result = computeFieldValue();
    }
  }
  return result;
} 
```

参考：Josh Bloch，*Effective Java*。另请参阅[对 Josh Bloch 的 Oracle technetwork 采访](http://www.oracle.com/technetwork/articles/javase/bloch-effective-08-qa-140880.html)。

# sharepoint - Sharepoint 2010 JQuery Ajax 不工作

> ID：13451407
> 
> 赞同：4
> 
> 时间：2012-11-19T09:59:42.137
> 
> 标签：sharepoint, jquery, sharepoint-2010

我在 Sharepoint 中有一个自定义 Web 部件，并且正在尝试将一些 ajax 应用到 Web 部件。

相同的代码适用于 .net Web 应用程序，但不适用于 Sharepoint Web 部件。

.net web 应用程序的代码如下所示（aspx 页面和后面的代码），它运行良好。：

**ASPX 文件**

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="WebApplication3._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
  // Add the page method call as an onclick handler for the div.
    $("#Result").click(function () {
        var loc = window.location.href;
    $.ajax({
      type: "POST",
      url: loc + "/GetMessage",
      data: "{}",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function(msg) {
        // Replace the div's content with the page method's return.
        $("#Result").text(msg.d);
      }
    });
  });
});

   </script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <div id="Result">Click here for the time.</div>
    <asp:Button ID="btnClick" runat="server" Text="Button" />
</asp:Content> 
```

**.CS 文件**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Services;

namespace WebApplication3
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }
        [WebMethod]
        public static string GetMessage()
        {
            return "Codebehind method call...";
        }
        [WebMethod]
        public static string GetDate()
        {
            return DateTime.Now.ToString();
        }
    }
} 
```

当我在不进行回发的情况下单击它时，文本“Click here for the time”会更改为“Code behind method call”。我可以进入代码，这会`GetMessage()`在 .net Web 应用程序中调用代码中的方法。

但是，这在 sharepoint 2010 中的 webpart 上不起作用。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:21:21.577

另一种选择是创建一个 SharePoint 应用程序页面。这是您的代码稍作修改以用作应用程序页面（使用 SharePoint 母版页内容部分，并且 AJAX 指向应用程序页面：

```
<%@ Assembly Name="$SharePoint.Project.AssemblyFullName$" %>
<%@ Register Tagprefix="SharePoint" Namespace="Microsoft.SharePoint.WebControls" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Assembly Name="Microsoft.Web.CommandUI, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="ApplicationPageWS.aspx.cs" Inherits="WebMethod.Layouts.WebMethod.ApplicationPageWS" DynamicMasterPageFile="~masterurl/default.master" %>

<asp:Content ID="PageHead" ContentPlaceHolderID="PlaceHolderAdditionalPageHead" runat="server">
<SharePoint:ScriptLink ID="ScriptLink1" runat="server" Localizable="false" Name="js/jquery-1.8.2.js"></SharePoint:ScriptLink> 
```

```
<asp:Content ID="Main" ContentPlaceHolderID="PlaceHolderMain" runat="server">
<script type="text/javascript">
    $(document).ready(function () {
        // Add the page method call as an onclick handler for the div.
        $("#Result").click(function () {

            $.ajax({
                type: "POST",
                url: "**/_layouts/WebMethod/ApplicationPageWS.aspx/GetMessage**",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#Result").text(msg.d);
                },
                error: function (msg) {
                    alert(msg.responseText);
                }
            });
        });
    });
</script>

<div id="Result">Click here for the time.</div>
<asp:Button ID="btnClick" runat="server" Text="Button" />

</asp:Content>

<asp:Content ID="PageTitle" ContentPlaceHolderID="PlaceHolderPageTitle" runat="server">
     Application Page
</asp:Content>

<asp:Content ID="PageTitleInTitleArea" ContentPlaceHolderID="PlaceHolderPageTitleInTitleArea" runat="server" >
    My Application Page
 </asp:Content> 
```

接下来将您的服务端更改为从 LayoutsPageBase 而不是 WebPart 继承：

```
using System;
using System.Web.UI;
using System.Web.Services;
using Microsoft.SharePoint.WebControls;

namespace WebMethod.Layouts.WebMethod
{
    public partial class ApplicationPageWS : LayoutsPageBase
    {
        protected override void OnInit(EventArgs e)
        {
             base.OnInit(e);
             //InitializeControl();
    }

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    [WebMethod]
    public static string GetMessage()
    {
        return "Codebehind method call...";
    }

    [WebMethod]
    public static string GetDate()
    {
        return DateTime.Now.ToString();
    }
} 
```

}

希望此解决方案适用于您的情况，如果不是，并且您需要从 Web 部件调用 Web 服务，则需要在 Web 部件之外创建 Web 服务。[这在http://dbremes.wordpress.com/2011/01/03/ajax-style-web-parts-in-sharepoint-the-easy-way/](http://dbremes.wordpress.com/2011/01/03/ajax-style-web-parts-in-sharepoint-the-easy-way/)中有很好的解释

史蒂夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:48:58.883

首先确保所有需要的 js 文件都已正确部署和加载。在 html 源代码中查找 url 并将它们复制到新选项卡中，看看它们是否正确加载。

还尝试将所有 JavaScript 文件放在服务器上（所以没有 'https://ajax.googleapis.com/...' 网址）。我曾经遇到过跨域脚本权限的问题。

加载的不同 JavaScript 库也可能存在冲突。对于 SharePoint 上下文中的 jQuery，我通常使用“noConflict”选项。

var $j = jQuery.noConflict(); $j(document).ready(function() { .....

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-02-13T03:07:02.223

我只想说你必须使用 POST 你不能使用 GET 发现很难。

# ruby-on-rails - 如何允许一个人注册一个“事件”，并在 Rails 中同时创建一个“用户”

> ID：13451412
> 
> 赞同：1
> 
> 时间：2012-11-19T09:59:53.350
> 
> 标签：ruby-on-rails, user-interface, refactoring, identity

我创建了一个简单的 Rails 应用程序，**用户**可以在其中注册参加**活动**。为了创造令人愉悦的用户体验，身份不明的用户可以浏览活动，然后如果他们看到他们想参加的活动，他们可以单击“注册活动”。然后，应用程序使用 Twitter Bootstrap 向用户呈现一个模式（弹出窗口），要求他们先注册，以参加活动。

modal上的表格如下：

```
simple_form_for @user do |f|
  f.input :name, :placeholder => "Name", :label => false
  f.input :email, :placeholder => "Email", :label => false
  f.input :postcode, :placeholder => "Postcode", :label => false
  hidden_field_tag :event_id, @event.id
  f.button :submit, "Sign me up for this event"
end 
```

因此，您可以看到基本上我将 event_id 值传递给用户控制器的*创建*操作。为了处理这个，创建动作变成：

```
 def create
    if params[:event_id].blank?
      event_registration = false
    else
      event_id = params[:event_id].to_s
      event_registration = true
    end

    if event_registration == true
      # The user is being created as part of signing up to an event
      @user_check = User.find_by_email(params[:user][:email])

      unless @user_check.nil?
        # The user already exists, but the visitor forgot
        @user = @user_check
      else
        # The user is a new sign up
        @user = User.new(params[:user])
      end

      # Now create the attendance for the user
      @event = Event.find(event_id)
      @attendance = @event.attendances.new
      @attendance.attendee = @user
      @attendance.save

      redirect_target = event_attendance_thank_path(@event, @attendance)

    else
      # The user is being created cleanly

      @user = User.new(params[:user])
    end

    if @user.save
      redirect_to root_path, notice: "Thanks for signing up, check your email"
    else
      # We should destroy the failing attendance?
      redirect_to root_path, alert: "Something's up with the signup.  Have you already registered with this email address?"
    end
  end 
```

对我来说，在控制器中处理这种级别的复杂性感觉很混乱，我想知道有什么更好的方法可以解决这个问题？

任何帮助或重构这将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:11:08.047

如果已经登录并登录的用户可以标记他们的活动出席情况，您应该在两个地方使用相同的代码。只需创建将标记用户出勤的助手并从两者`UsersController#create`和`Events#attend`（或任何它被称为的）操作中调用它。

现在——如果你听说过“胖模型，瘦控制器”模式，你可能开始注意到它是一个你可以使用它的地方。

只需创建`User`模型方法来参加一些活动，该活动将接受 id 或活动本身作为参数。这样您就可以简单地在控制器中编写：

```
User.create(...).tap do |user|
  user.attend(params[:event_id]) if params[:event_id]
end 
```

# javascript - 不显眼的淘汰赛

> ID：13451414
> 
> 赞同：34
> 
> 时间：2012-11-19T09:59:58.790
> 
> 标签：javascript, knockout.js, unobtrusive-javascript

我最近开始使用 Knockout，我认为这是一个很棒的框架。不过我有一个担心。

我发现在非平凡的绑定案例中，我的视图（标记）中有一些 javascript 代码片段。事实上，Knockout 文档中的很多代码示例也证明了这一点。

**这是否使 Knockout 天生就显得突兀？**

我应该接受它的本来面目，而不是在实践中担心吗？

**或者我应该采用什么模式/技术来使 Knockout 不引人注目？**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-19T21:30:17.507

好问题。一段时间以来，我一直在编写复杂的 KnockoutJS 视图，直到我改用[Ryan Niemeyer 的类绑定提供程序](https://github.com/rniemeyer/knockout-classBindingProvider)时才感到满意。

Knockout ClassBindingProvider 允许您在 JavaScript 对象中声明绑定，然后从`data-class`类似于 css 类工作方式的属性引用它们。效果很好！

查看[示例 TodoMVC 应用程序](https://github.com/rniemeyer/knockout-classBindingProvider/tree/418226f32b6229aaea5b9a70836c82ea79e9d677)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-19T10:06:36.127

尝试将 Javascript 排除在绑定之外，仅将其用于元数据

所以而不是做

```
<span data-bind="visible: errors().length > 0">You have errors</span> 
```

使用计算的 observable

```
<span data-bind="visible: hasErrors">You have errors</span> 
```

**更新：我继续为 KO 创建了一个基于配置 API 的约定** 它可以在这里找到[https://github.com/AndersMalmgren/Knockout.BindingConventions/wiki](https://github.com/AndersMalmgren/Knockout.BindingConventions/wiki)

而不是做`<button data-bind="click: save">Save</button>`你在做`<button data-name="save">Save</button>`。该库将按照约定理解您要将保存功能连接到按钮单击处理程序。按照惯例，如果存在 canSave 成员，它也会绑定启用。 [http://jsfiddle.net/3Ajnj/15/](http://jsfiddle.net/3Ajnj/15/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-19T18:26:36.140

> 我应该接受它的本来面目，而不是在实践中担心吗？

我的理解是“不引人注目”意味着一些不同的东西。

“不引人注目”的一个方面是网站应该在 JavaScript 支持有限或根本不支持的浏览器上维护核心功能。为此，您对这一原则的关注应该取决于您的目标受众。我参与过一些我非常了解我的目标受众的项目，以至于我有幸说：“如果你想利用这个网络应用程序，请使用启用 JavaScript 的 Chrome 等现代浏览器。” 在这种情况下，您可以随意使用最新、最棒的前端框架。

我参与过其他项目，但情况并非如此，我们必须非常小心地使用 Knockout 等框架。如果您在应用程序中严重依赖 Knockout 来完成核心功能，那么您的应用程序本质上是突兀的。这是否会打扰您取决于您​​的目标受众。

“不显眼的 JS”的另一个原则是 JavaScript 和 HTML 之间的关注点分离。我实际上在争论这个原则的重要性。我认为更重要的原则是*视图模型逻辑*和*显示逻辑*之间的关注点分离，遵循 MVVM 模式。即使您在数据绑定中添加了一些 JavaScript 逻辑，Knockout 在鼓励清晰分离视图/虚拟机关注点方面做得非常出色。只要是严格的*视图*逻辑，我认为它实际上*属于*视图。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-25T20:12:27.730

我建议您访问 Ryan 的博客并阅读：“在 KnockoutJS 中简化和清理视图”，如果您还没有这样做的话……

[http://www.knockmeout.net/2011/08/simplifying-and-cleaning-up-views-in.html](http://www.knockmeout.net/2011/08/simplifying-and-cleaning-up-views-in.html)

它为您解释了一些重构代码的好方法，因此它不会使 html 变得混乱并保持更干净。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-08T09:00:00.410

所选答案中建议的绑定提供程序的替代方案是[knockout.unobtrusiveBindingProvider](https://github.com/stevenbey/knockout.unobtrusiveBindingProvider)，它是“用于 Knockout JS 的不显眼的、基于约定的绑定提供程序，可以将 HTML 和 Knockout 数据绑定完全分离”。

# android - Android：如何避免使用包装内容在圆形按钮的圆圈外按下？

> ID：13451416
> 
> 赞同：7
> 
> 时间：2012-11-19T10:00:12.947
> 
> 标签：android, eclipse, android-layout, imagebutton

谁能告诉我如何避免按下圆形按钮的圆圈，因为“wrap_content”似乎不起作用。我使用图像文件来创建按钮。我很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T10:22:46.493

仅供您理解..（默认情况下，android View 为矩形，因此它适用于 Button）

1.  将**Touch Listener**设置为您的按钮和`onTouch()`圆形区域的地图 XY 坐标。如果它位于内部区域，请执行您想要的操作，否则返回**false**。

2.  使用`Inset`看这个教程[http://www.anotherandroidblog.com/2011/07/01/button-hit-area-for-custom-graphics/](http://www.anotherandroidblog.com/2011/07/01/button-hit-area-for-custom-graphics/)

3.  实现**TouchDelegates**看看这个教程[http://www.vogella.com/blog/2012/04/15/android-using-touchdelegates/](http://www.vogella.com/blog/2012/04/15/android-using-touchdelegates/)

# django - ForeignKey 在 Django Admin 中不可编辑

> ID：13451418
> 
> 赞同：1
> 
> 时间：2012-11-19T10:00:16.423
> 
> 标签：django, unicode, django-admin

直到最近一直有效的东西已经停止工作。具有另一个对象的外键的模型在标准 django 管理员中无法按预期进行编辑。问题是这样的：某些模型的外键在管理界面中不可编辑，尽管它们应该是，尽管标签确实出现在管理页面中。它看起来像这样：![问题模型的 Django 界面编辑页面](../Images/cf0ee1ab5783ce30b8626ee6c65548b2.png)

应该编辑 Story-model 的外键位的 HTML 代码：

```
<div class="form-row field-story">
        <div>
            <label for="id_story" class="required">Story:</label>           
        </div>
</div> 
```

2 个相关模型及其各自的**unicode** defs：

```
class Question(models.Model):
    question = models.CharField(max_length = 200)#the Actual question
    correct_answer = models.ForeignKey(Answer, verbose_name = 'Correct Answer', related_name = 'Correct answer')
    incorrect_answers = models.ManyToManyField(Answer, verbose_name = 'Distractor options', related_name = 'Incorrect answers')
    story = models.ForeignKey(Story)

    def __unicode__(self):
        try:
             return self.question.decode('latin-1') + '(%i)'%(self.id)
        except:
            return str(self.id)

class Story(models.Model):
    class Meta:
        verbose_name_plural = 'Stories'

    author = models.ForeignKey(User, blank = True, null = True, on_delete = models.SET_NULL, editable = False)
    name = models.CharField(max_length = 150, verbose_name = 'Name/Summary')
    story = models.TextField(verbose_name = 'Story', max_length = 13 * 54)#the actual story
    publish = models.BooleanField(default = False, help_text = 'If this is published, it will be uneditable.')
    date_added = models.DateTimeField (auto_now_add = True, editable = False)#date of reply
    ready = models.BooleanField(default = False, help_text = 'Whether the author thinks this is ready')
    erf = models.CharField(max_length = 20, verbose_name = 'ERF label', editable = False, blank  = True, null = True)

    def __unicode__(self):
        try:
            return "'"+self.name.encode( 'latin-1') + "'"
        except:
            return "Story with unicode name or something: %i" %(self.id) 
```

在 admin.py 中：

```
admin.site.register(Question, ) 
```

看看什么有效，什么无效，我开始觉得它与故事模型有关。其他外键关系运行良好。当然，外键不可编辑的事实意味着无法从管理员保存对象，即使 MySQL 显示问题表中存在有效的 story_id。

我记得我用过这个，而且效果很好。我怀疑某个地方存在 unicode 问题，但我无法想象究竟是什么，更不用说如何解决它们了。有人可以帮忙吗？

PS。我认为，在 ForeignKey 字段中发生的事情[不会出现在 Django 管理站点](https://stackoverflow.com/questions/5820739/foreignkey-field-will-not-appear-in-django-admin-site)中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:18:57.143

呃..寻找其他外域问题，我[在 Django 中遇到了 ForeignKey 域问题](https://stackoverflow.com/questions/1974876/foreignkey-field-problem-in-django)。在对问题的评论中，[Daniel Roseman](https://stackoverflow.com/users/104349/daniel-roseman)指出**，模型上的 unicode defs 应该返回 unicode**。试过了，我的问题就解决了。

Grrr.. Unicode... 这次你赢了！

# asp.net-mvc - 迭代 json 列表时来自第二个索引的未定义错误

> ID：13451427
> 
> 赞同：0
> 
> 时间：2012-11-19T10:00:46.733
> 
> 标签：asp.net-mvc, jquery, asp.net-web-api

我的代码运行为，

```
 $.ajax({
            url: "api/WepAPI/",
            dataType: 'json',
            success: function (result) {
                alert(result.length);
                $.each(result, function (index, element) {
                    alert(element.StartDate);                        
                });
            },
        }); 
```

在迭代时，它会正确显示第一个元素的开始日期，对于所有其他元素，它会在警报中返回未定义的消息。

我的 WEBAPI 控制器代码看起来像，

```
 public IEnumerable<Employees> GetAllEmployess()
    {
        EmpDataContainer context = new EmpDataContainer();

        return context.Employees.AsEnumerable();
    } 
```

帮我解决这个错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:06:41.243

看来您的数据可能不是您所期望的，或者它可能缺少某些东西，或者它可能是小写/不同的字母大小写。

在任何一种情况下，都无法看到 JSON 的结果；无法确定此问题的可能原因。

您能否为典型的结果对象添加 JSON？

您可以使用它`console.log(result);`来输出 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:00:35.217

经过一些调试和浏览，我发现问题是由于使用了具有导航属性的实体对象本身，即该对象又具有一些子对象。

然后找到解决问题的方法，创建视图模型并将所需的值分配给视图模型。确保视图模型没有子对象。

# sql - 如何在 PLSQL 中访问数组

> ID：13451434
> 
> 赞同：1
> 
> 时间：2012-11-19T10:01:03.613
> 
> 标签：sql, oracle, plsql

请问，是否可以访问可变数组中的单个值？

类似`newVariable := myArray(value2)`--> 这会将数组中的第二个值分配给新变量...

我也需要这样的东西：

```
FOR CYCLE...
x++
newVariable(x) := myArray(value(x))
END FOR CYCLE 
```

是否可以？

Thx，我是信息技术的学生，我正在努力解决这个问题。不知道在哪里看...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T20:19:56.913

根据 oracle 在线文档，varray 类型是 PL/SQL 中用于创建类数组对象的其他集合类型中的类型（我的意思是我们在其他经典编程语言如 C、Java 等中理解的数组）。除了长度可以从 0 变化到其定义期间指定的最大大小。

这是一个例子：

```
DECLARE
    SUBTYPE country_ty IS VARCHAR2(50);
    TYPE countries_varr_ty IS VARRAY(10) OF country_ty;
    l_varr_countries countries_varr_ty :=
        countries_varr_ty
        (
            'Iran', 'France', 'United Kingdom', 'United States', 'Germany',
            'Spain', 'Canada', 'Australia', 'South Africa', 'Afganistan'
        );
    l_country country_ty;
BEGIN
    FOR counter IN l_varr_countries.FIRST .. l_varr_countries.LAST
    LOOP
        l_country := l_varr_countries(counter);
        DBMS_OUTPUT.PUT_LINE('The current value in the array is: ' 
            || l_country);
    END LOOP;
END;
/ 
```

有关 varray 的更多信息，您可以参考以下链接：

[http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CHDEIJHD](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CHDEIJHD)

问候，

达里约什

# javascript - HTML5 Canvas 文本调整大小、旋转和更改颜色

> ID：13451438
> 
> 赞同：1
> 
> 时间：2012-11-19T10:01:14.173
> 
> 标签：javascript, html, html5-canvas

我正在尝试以与此类似的方式调整画布中的文本大小和旋转：

[http://simonsarris.com/project/canvasdemo/demo2.html](http://simonsarris.com/project/canvasdemo/demo2.html)

但我还想添加旋转和更改颜色功能。
我将如何最好地实现此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:05:54.943

如果您真的想使用所有这些功能，那么我建议您使用这些 javascript 库中的任何一个来完成此操作

*   [拉斐尔JS](http://raphaeljs.com/)
*   [KineticJS](http://kineticjs.com/)
*   [FabricJS](http://fabricjs.com/)
*   [GuryJS](http://guryjs.org/)

我和他们所有人都合作过。与往常一样，没有什么能满足您的需求，但我建议您研究一下，以便更好地了解您可以使用 HTML5 画布实际做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:05:27.037

从我想说的关于 Canvas 的一个很好的教程开始。像[https://developer.mozilla.org/en/docs/Canvas_tutorial](https://developer.mozilla.org/en/docs/Canvas_tutorial)这样的东西是一个很好的资源。

# ruby-on-rails - Rails 3远程表单不触发回调

> ID：13451444
> 
> 赞同：0
> 
> 时间：2012-11-19T10:01:34.940
> 
> 标签：ruby-on-rails, ajax, forms, jquery

我有一个由带有 AJAX 请求的 jQuery 填充的远程表单。然后，我将此表单绑定到 AJAX 回调，但未触发回调。

```
var msgSuccess=function(evt, data, status, xhr){
  alert('ok!!!');
  console.log(evt);
  console.log(data);
  console.log(status);
  console.log(xhr);
}

var bindMsg = function() {   // BIND IT TO THE CALLBACKS
  $("#composeMsgPopup")
  .live('ajax:beforeSend', loadingCallback)
  .live('ajax:success', msgSuccess)
  .live('ajax:error', failureCallback)
  .live('ajax:complete',completeCallback);
}

$.ajax({      // GETTING THE FORM CODE
  url: link,
  type: "get",
  success: function(response, textStatus, jqXHR) {
    ans=response;
    $("#popup_content").html(ans);
    $("#popup").bPopup();
    bindMsg();
  },
  error: function(jqXHR, textStatus, errorThrown) {
    failureCallback(errorThrown, textStatus, jqXHR);
  },
  complete: function(jqXHR, textStatus) {
    completeCallback("", jqXHR, textStatus);
  },
  beforeSend: loadingCallback
}); 
```

表格的代码：

```
<%= form_for(:conversation, :remote => true, 
 :url=> {:controller=>:conversations,:action=>:create},
 :html=>{:id => 'composeMsgPopup' }) do |f| %>
<div id="founder-name" class="field"><b>Recipient: <%= @user.name %></b></div>
<div class="field">
  <%= f.label :subject,"Subject" %>
  <%= f.text_field :subject,:class=>"composeMsgField" %>
</div>
<div class="field">
  <%= f.label :content,"Message Content" %>
  <%= f.text_area :content,:class=>"composeMsgField" %>
</div>
<%= f.hidden_field :to_user, :value => @user.id  %>
<%= f.submit "Send", :class=>"submitbt",:id=>'sendMessage' %>
<% end % > 
```

我尝试使用 bind() 或 on() 进行绑定，但它不起作用。代码已执行，但是当我提交表单时，未执行回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:22:07.593

好的，我找到了解决方案。远程表单由于未知原因未触发回调，所以我所做的是更改提交按钮的行为：

```
 <%= f.button :submit, "Update",:class=>"submitbt",:id=>"submitnewpass",:onclick=>"return false;" %> 
```

并绑定按钮手动提交表单

```
 var action=$('#composeMsgPopup')[0].action;   // action url
$("#sendMessage").click(function() {         // bind submit button

    $.ajax({
        type: "POST",
        url: action,
        data: $("#submitnewpass").serialize(), // serializes the form's elements.
        success: function(data)
        {
           // do my stuff

        },
        error:      failureCallback,
        beforeSend: loadingCallback,
        complete:   completeCallback
    });

    return false;
}); 
```

# php - PHP - 更改代码以适应以前的设置

> ID：13451445
> 
> 赞同：0
> 
> 时间：2012-11-19T10:01:39.913
> 
> 标签：php, sql

我目前正在使用以下代码作为我的 MySQL 登录名

```
<?php
    $database="";
    $mysql_user = "";
    $mysql_password = ""; 
    $mysql_host = "";
    $mysql_table_prefix = "";

    $success = mysql_pconnect ($mysql_host, $mysql_user, $mysql_password);
    if (!$success)
        die ("<b>Cannot connect to database, check if username, password and host are correct.</b>");
    $success = mysql_select_db ($database);
    if (!$success) {
        print "<b>Cannot choose database, check if database name is correct.";
        die();
    }
?> 
```

而且我正在尝试集成一个开源脚本以使用相同的登录名，但是它使用以下内容：

```
define("DB_HOST", "");
define("DB_NAME", "");
define("DB_USER", "");
define("DB_PASS", ""); 
```

有没有办法更改第二个脚本以使用与第一个脚本相同的详细信息，这样我就不需要 2 个数据库或重复输入登录详细信息两次？

我希望有一些查找和替换的解决方案！

# ruby - 为什么 rvm install ruby 不起作用？

> ID：13451447
> 
> 赞同：12
> 
> 时间：2012-11-19T10:01:42.253
> 
> 标签：ruby, ruby-on-rails-3, rvm

[Rails 3.2.9博客上](http://weblog.rubyonrails.org/2012/11/12/ann-rails-3-2-9-has-been-released/)说推荐安装Ruby 1.9.3-p327。但

```
rvm install ruby-1.9.3-p327 
```

实际上给出了一个错误，日志说：

> or没有校验和 `'http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p327.tar.bz2'`， `'ruby-1.9.3-p327.tar.bz2'`无法验证它。如果您希望继续未经验证的下载`'--verify-downloads 1'` ，请在命令后添加。

但我检查了[http://ftp.ruby-lang.org/pub/ruby/1.9/](http://ftp.ruby-lang.org/pub/ruby/1.9/)和. 那么校验和在哪里呢？是在文件里面吗？那么我们应该如何安装p327，只是通过`ruby-1.9.3-p286``p327``.bz2`

```
rvm install 1.9.3-p327 --verify-downloads 1 
```

是否存在安全问题，或者是否有其他方法可以安全地安装它？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-19T11:10:33.510

首先，确保您的`rvm`版本通过运行知道此版本`rvm list known`

在我的机器上，当我第一次运行它时，我得到以下输出`known MRI Rubies`：

```
$ rvm list known
# MRI Rubies
[ruby-]1.8.6[-p420]
[ruby-]1.8.7-p370
[ruby-]1.8.7[-p371]
[ruby-]1.9.1[-p431]
[ruby-]1.9.2-p180
[ruby-]1.9.2-p290
[ruby-]1.9.2-p318
[ruby-]1.9.2[-p320]
[ruby-]1.9.2-head
[ruby-]1.9.3-preview1
[ruby-]1.9.3-rc1
[ruby-]1.9.3-p0
[ruby-]1.9.3-p125
[ruby-]1.9.3-p194
[ruby-]1.9.3-[p286]
[ruby-]1.9.3-head
ruby-head 
```

所以我的版本`rvm`只知道`1.9.3-[p286]`最新的1.9.3版本。

我`rvm`使用以下命令获得了最新版本：

```
$ rvm get stable 
```

之后，名单`known MRI rubies`如下：

```
$ rvm list known
# MRI Rubies
[ruby-]1.8.6[-p420]
[ruby-]1.8.7-p370
[ruby-]1.8.7[-p371]
[ruby-]1.9.1[-p431]
[ruby-]1.9.2-p180
[ruby-]1.9.2-p290
[ruby-]1.9.2-p318
[ruby-]1.9.2[-p320]
[ruby-]1.9.2-head
[ruby-]1.9.3-preview1
[ruby-]1.9.3-rc1
[ruby-]1.9.3-p0
[ruby-]1.9.3-p125
[ruby-]1.9.3-p194
[ruby-]1.9.3-p286
[ruby-]1.9.3-[p327]
[ruby-]1.9.3-head
[ruby-]2.0.0-preview1
ruby-head 
```

[rvm googlegroups 讨论论坛上的相关主题](https://groups.google.com/forum/?fromgroups=#!topic/rubyversionmanager/aT2OdZFrblQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:43:49.163

在ubuntu 12.04中，我使用cmd如下，最新版本“-p327”会自动检测并安装：

```
rvm install 1.9.3 
```

[在支持 RVM 的 Ubuntu 12.04 上安装 Rails](http://mattslay.com/installing-rails-on-ubuntu-12-04-with-rvm-support/)指南可能会有所帮助：

# mysql - 请帮我优化这个 mysql 查询。加载需要更多时间

> ID：13451451
> 
> 赞同：-1
> 
> 时间：2012-11-19T10:01:46.670
> 
> 标签：mysql

```
SELECT 
           f_workorders_shipments.date,
           f_inventory.id AS item_id,
           f_workorders_shipments.inventory_code AS code,
           f_inventory`.status,
           f_inventory.type,
           f_workorders.id AS order_id
         FROM f_workorders
         LEFT JOIN f_workorders_shipments
         ON f_workorders.id = f_workorders_shipments.order_id
         LEFT JOIN `f_inventory`
         ON f_workorders_shipments.inventory_code = f_inventory.code
         WHERE contact_id = "'.$_POST['id'].'"
         AND inventory_code IS NOT NULL
         ORDER BY due DESC' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:22:09.383

由于连接将要检查的行数相乘，因此您必须注意索引。

请为每个对过滤或与其他表中的其他字段连接很重要的字段建立索引。

一个好的索引可以减少执行 sql 命令的时间

# c++ - 将函数指针插入到具有多态返回类型的映射中

> ID：13451454
> 
> 赞同：1
> 
> 时间：2012-11-19T10:01:53.003
> 
> 标签：c++

我不知道如何为这个问题命名。我有一个基类和两个继承类：

```
class Base {};
class Action : public Base {};
class Title : public Base {}; 
```

现在假设我有两个返回`Action *`or的函数`Title *`：

```
Action *getAction() { return new Action; }
Title *getTitle() { return new Title; } 
```

有没有办法把这两个功能放到一个地图中？像这样：

```
int main()
{
    std::map<std::string, Base *(*)()> myMap;
    myMap["action"] = getAction;
    myMap["title"] = getTitle;

    return 0;
} 
```

现在我收到一个错误：

```
invalid conversion from `Action* (*)()' to `Base* (*)()' 
```

我可以更改函数的签名以始终返回基类，然后它会起作用，但我想知道是否有另一种方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:06:49.257

如果您使用：

```
Base *getAction() { return static_cast<Base *>(new Action); }
Base *getTitle() { return static_cast<Base *>(new Title); } 
```

那么您将不会收到此错误。

[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)是 STL 提供的多态函数指针包装器。

当然，使用模板，您可以编写自己的函数包装器来存储目标、传递前向参数并进行转换。不过，这已经完成了，在决定推出自己的产品之前，您应该认真考虑。除非您喜欢重新发明轮子或有非常特殊的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:34:43.580

作为概念证明，我有以下代码：

```
#include <iostream>
#include <map>
#include <functional>

struct A
{
    virtual void f() = 0;
};

struct B : public A
{
    void f() { std::cout << "B::f\n"; }
};

struct C : public A
{
    void f() { std::cout << "C::f\n"; }
};

B* getB() { return new B; }
C* getC() { return new C; }

int main()
{
    std::map<std::string, std::function<A*()>> m;
    m["b"] = getB;
    m["c"] = getC;

    m["b"]()->f();
    m["c"]()->f();
} 
```

它会泄漏内存，但它[可以工作](http://ideone.com/Jj6bMP)。

# jquery - 单击外部 jQuery 模态以关闭

> ID：13451456
> 
> 赞同：1
> 
> 时间：2012-11-19T10:02:03.040
> 
> 标签：jquery, modal-dialog

我已经看到了解决这个问题的各种方法，但是找不到适合我情况的解决方案（反正我对 java / jQuery 不太熟练）。我有一个生成以下代码的 php 脚本 - 工作正常。

我的问题是如何修改它以便在框外单击也会关闭模式？（我可以处理更改驱动器代码的php）

```
jQuery(document).ready(function()
                {
                    jQuery('#modal-messages').css('margin-top', ((jQuery(window).height() - jQuery('#modal-messages').outerHeight())/2) + jQuery(window).scrollTop() + 'px');
                    jQuery('#modal-messages').css('margin-left', ((jQuery(window).width() - jQuery('#modal-messages').outerWidth())/2) + jQuery(window).scrollLeft() + 'px');
                    jQuery('#modal-messages').show();jQuery('#messages-overlay').show();

                    jQuery('#messages-close-button').click(function()
                    {
                        jQuery('#messages-overlay').hide();
                        jQuery('#modal-messages').hide();
                    });

                    jQuery('#messages-overlay').click(function()
                    {
                        jQuery('#messages-overlay').hide();
                        jQuery('#modal-messages').hide();
                    });jQuery('#modal-messages').bind( 'clickoutside', function(event)
                    {
                        jQuery('#messages-overlay').hide();
                        jQuery('#modal-messages').hide();
                    });}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:10:04.170

为什么不在模态下方添加另一个“灰色”区域

```
<div id="greyedArea"></div> 
```

与CSS

```
#greyedArea {
 background: black;
 opacity:0.25;
 width: 100%;
} 
```

然后您可以使用它来触发关闭过程

```
$('#greyedArea').on('click', function() {
 $('#messages-overlay').hide();
 $('#modal-messages').hide();
}); 
```

# actionscript-3 - AS3 Vector 移除显示列表

> ID：13451458
> 
> 赞同：0
> 
> 时间：2012-11-19T10:02:17.247
> 
> 标签：actionscript-3

我有一个应用程序，它使用矢量对象在舞台上创建和显示多个动态项目。

当我退出游戏然后返回 inGame 屏幕时，对象仍然可见。我尝试了多种删除方法，但没有任何效果。

我已经取消了向量，但对象仍然保留在舞台上。

基本上我只需要在游戏退出时清除舞台。

我在用：

```
var item = new Vector.<Item>(); 
```

去创造。

用户通过点击暂停按钮然后点击“返回菜单”按钮退出游戏。

任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:50:27.120

如果您的所有 DisplayObject 都在`item`Vector 中，并且 Item 是您进入主屏幕时执行的后续循环的祖先，`DisplayObject`则会将它们从容器中删除。

```
var child:Item;
while(item.length)
{
    child = item.shift();
    if(child)
    {
        //perform some cleaning functionality e.g. child.destroy();//if there is destroy method for disposing Item class
        //
        if(child.parent)
        {
            child.parent.removeChild(child);
        }
        child = null;
    }
}
//
item = null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:07:52.707

一旦你对某事物执行了一个`addChild()`操作，该事物就会收到另一个指向它的链接，即来自显示列表。`removeChild()`因此，在实际删除向量之前，您必须手动调用存储在向量中的每个动态对象。

```
var item:Vector.<Item>;
for (var i:int=item.length-1;i>=0;i--) 
    item[i].parent.removeChild(item[i]);
item=null; 
```

# java - Java HashMap 实现中的 hash() 方法有什么技巧？

> ID：13451465
> 
> 赞同：18
> 
> 时间：2012-11-19T10:02:50.567
> 
> 标签：java, hash, hashmap

> **可能重复：**
> [理解奇怪的 Java 哈希函数](https://stackoverflow.com/questions/9335169/understanding-strange-java-hash-function)

```
static int hash(int h) {   
    // This function ensures that hashCodes that differ only by   
    // constant multiples at each bit position have a bounded   
    // number of collisions (approximately 8 at default load factor).   
    h ^= (h >>> 20) ^ (h >>> 12);   
    return h ^ (h >>> 7) ^ (h >>> 4);   
} 
```

我不太明白这个实现的算法原理。我可以参考任何解释或任何资源？谢谢 ！

**更新**

感谢所有人的答案和资源。实际上，我了解哈希的工作原理，但不知道为什么此代码将确保`a bounded number of collisions`，如评论所述。有没有理论上的验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T10:51:34.593

此功能只是有助于更好地避免`HashMap`.

如果你有很好的`hashCode`实现，你仍然会因为你`hashCode % size`检测对象的桶而发生碰撞。

例子：

假设，你的大小`HashMap`是`20`。

1.  您计算了`hashCode()`for`object1`和 get `401`。桶是`401 % 20 = 1`.
2.  您计算了`hashCode()`for`object2`和 get `3601`。桶是`3601 % 20 = 1`
3.  您计算了`hashCode()`for`object3`和 get `1601`。桶是`1601 % 20 = 1`.

因此，即使您有三个不同的 hashCode，您也会为所有三个对象获得一个桶，这意味着您的 HashMap 的复杂性`O(n)`而不是`O(1)`.

如果我们将函数`hash`应用于所有获得的哈希码，我们得到

1.  `hash = 395`,`bucket = 395 % 20 = 15`
2.  `hash = 3820`,`bucket = 3820 % 20 = 0`
3.  `hash = 1577`,`bucket = 1577 % 20 = 17`

很明显，`hash`作为附加步骤，我们得到了三个不同的存储桶，它们可以保持对对象的恒定时间访问。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T10:07:52.347

主要目标是为相似的输入参数生成非常不同的值并最小化碰撞次数。 [http://en.wikipedia.org/wiki/Hash_function](http://en.wikipedia.org/wiki/Hash_function)

这种实现只是许多可能功能中令人满意的一种选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T10:18:00.407

>>> 运算符是位移位，但被视为无符号。

^ 是 XOR（异或）

所以这条线

```
h ^= (h >>> 20) ^ (h >>> 12); 
```

表示 xor 原始与 h 位移 20 位， XOR 与 h 位移 12 位

然后

```
h ^ (h >>> 7) ^ (h >>> 4); 
```

上面的 h，xor h 移位 7 位，xor h 移位 4 位。我不是 100% 确定它为什么会这样设置

# iphone - 使用 uitableview、tabbar 和更多对象查看

> ID：13451466
> 
> 赞同：0
> 
> 时间：2012-11-19T10:02:55.997
> 
> 标签：iphone, objective-c, ios

我正在开发一个应用程序，我需要一个包含这些元素的视图： - UITableView - UITextField 和 UIButton - TabBar

你可以猜到，我正在开发一个聊天工具，但是当我将元素放在 .xib 中时，我无法显示 de layer：UITextField 和 UIButton。如果我把它们放在没有视图的地方，它们就不会出现。如果我在表格下方放置一个视图，并在该视图中放置文本和按钮，则会收到此错误： http: [//pastebin.com/CKfxijz9](http://pastebin.com/CKfxijz9)（我将错误放在那里，因为它太长了）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:27:33.160

有一些方法可以解决这个问题，这取决于它应该如何表现。他们之中有一些是：

1.  提供包含按钮和文本字段的表格页脚或标题视图。
2.  将表格视图嵌套到另一个视图中。表格视图和包含按钮和文本字段的视图在视图层次结构中处于同一级别。他们更像是兄弟姐妹，而不是彼此的子视图和超级视图。
3.  使用 UISlider 而不是表格。（但是，我个人会使用这张桌子。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:47:38.967

这是我过去使用的一种方法（不确定它是否是最佳实践，但它有效）。

1.  将您的按钮和文本字段添加到新视图（我们称之为bottomView）
2.  将 bottomView 添加到 tableview 的 superview
3.  设置底部视图的框架，使其适合屏幕底部（这将使您的表格视图滚动，但保持底部视图始终连接到主视图的底部）

# python - 使用 ifchanged

> ID：13451467
> 
> 赞同：0
> 
> 时间：2012-11-19T10:03:03.313
> 
> 标签：python, django

> **可能重复：**
> [Python-Django：ifchanged 模板标签](https://stackoverflow.com/questions/13430520/python-django-ifchanged-template-tag)

这是我现在的代码：

```
{% for eachSc in DBShots1 %}
 <tr>
    {% ifchanged eachSc.laEmpNum %} 

      <td> </td><td> </td>                                  
      <td bgcolor="#FFFACD" width="1%">Tot={{ result }}</td>

    {% endifchanged %}

 </tr>
  <td bgcolor="#FFFACD" width="1%">{{ forloop.counter }} </td> 

  <td bgcolor="#CCFACD" width="1%">{{ eachSc.sName }}</td>

   <td bgcolor="#CCF0F5" width="1%">{{ eachSc.duration }}</td>

  <td bgcolor="#CCFACD" width="1%">{{ eachSc.frames }}</td>

  <td bgcolor="#CCFACD" width="5%">{{ GetEmpDept }} - {{ eachSc.laEmpNum }}</td>

{% endfor %} 
```

从上面的代码显示如下：

```
 Tot=[(u'1046', 5.5), (u'8008', 4.5), (u'8011', 1.3)] 
```

1--------01------2.5------------60-----allLayout - 1046

2--------02------2.0------------48--------allLayout - 1046

3--------04--------1.0----------------0-----allLayout - 1046

```
 Tot=[(u'1046', 5.5), (u'8008', 4.5), (u'8011', 1.3)] 
```

4--------03------2.3------------50-----allLayout - 8008

5--------06------2.2-------------0-------allLayout - 8008

```
 Tot=[(u'1046', 5.5), (u'8008', 4.5), (u'8011', 1.3)] 
```

6--------05------1.3-------------0-----allLayout - 8011

但是我的输出应该如下所示：如果 empID 更改（1046,8008,8011），那么 {{ forloop.counter }} 应该以 one(1) 开头，{{ result }} 应该显示第一个元素（(1046,5.5)对于第一个 ID(1046) 第二个(8008',4.5) 元素对于第二个 ID(8008) 等等：

1--------01------2.5------------60-----allLayout - 1046

2--------02------2.0------------48--------allLayout - 1046

3--------04--------1.0-------------0-------allLayout - 1046

```
 Tot=(1046,5.5) 
```

1--------03------2.3-------------50-----allLayout - 8008

2--------06------2.2-------------0-----allLayout - 8008

```
 Tot=(8008', 4.5) 
```

1--------05--------1.3-------------0-------allLayout - 8011

```
 Tot=(8011', 1.3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:17:23.770

你有2个问题：

1.  仅显示特定的 empID 而不是全部来自字符串：

    **Ans**：您不能这样做，因为您不能将变量用于属性名称、字典键或列表索引，这使得您不能仅从计数器显示数组中的特定索引。您可能需要将此值放入您的列表 DBShots1，然后再将其显示在模板上或创建自定义模板标签。

2.  每次更改 empID 时重置计数器：

    **Ans**：您可以使用 regroup 函数对列表进行排序，这将为每个 empID [https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#regroup创建另一个 for 循环](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#regroup)

例如

```
{% regroup DBShots1 by eachSc.laEmpNum as emp_list %}
{% for eachSc in emp_list %}
        <tr>
            <td> </td><td> </td> 
            <td bgcolor="#FFFACD" width="1%">EmpNum : {{ eachSc.grouper }}</td>
        </tr>
        {% for item in eachSc.list %}
            <td bgcolor="#FFFACD" width="1%">{{ forloop.counter }} </td> 
            <td bgcolor="#CCFACD" width="1%">{{ item.sName }} </td>
            <td bgcolor="#CCF0F5" width="1%">{{ item.duration }}</td>
            <td bgcolor="#CCFACD" width="1%">{{ item.frames }}</td>
            <td bgcolor="#CCFACD" width="5%">{{ GetEmpDept }} - {{ item.laEmpNum }}</td>
        {% endfor %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:08:43.093

你不需要在这里使用 ifchanged。

您应该使用 django 模板系统为您的索引编制索引`result`，`forloop.counter0`但这是不可能的。

您可以编写一个自定义标签来执行此操作或更改您的视图，将您的结果添加到对象上下文中。

# googlebot - 页面存在，谷歌机器人返回 404 错误

> ID：13451469
> 
> 赞同：2
> 
> 时间：2012-11-19T10:03:20.503
> 
> 标签：googlebot

我有一个在线的网站。当我通过浏览器使用它时，一切正常，并且该页面出现在浏览器中。当我将它用作 googlebot 时（通过 webmastertools ）我收到错误

```
HTTP/1.1 404 Not Found
Date: Mon, 19 Nov 2012 09:57:37 GMT
Server: Apache
X-Powered-By: PHP/5.2.17
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: symfony=55240a0a341202d07fc96cbc1c1bcca5; path=/
Keep-Alive: timeout=2, max=200
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: text/html; charset=utf-8

and rest of the html code... 
```

当我试图通过 wc3 验证器验证它时，同样的事情。

请帮助:(我尝试了一切:(

网站地址是 mojaczestochowa.pl

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:07:12.613

尝试使用[web-sniffer](http://web-sniffer.net/)检查 pae并将用户代理设置为 google.bot

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-22T15:51:29.417

这是确切的查询，它将模拟服务器对 GoogleBot 爬虫的响应： [https ://websniffer.cc/?url=http://mojaczestochowa.pl/&uak=9](https://websniffer.cc/?url=http://mojaczestochowa.pl/&uak=9)

# android - `TextClock` 和 `DigitalClock` 之间有什么区别？

> ID：13451470
> 
> 赞同：1
> 
> 时间：2012-11-19T10:03:22.330
> 
> 标签：android, android-widget, clock

随着 API 级别 17 的发布，我开始了解`TextClock`小部件与数字时钟的不同之处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:10:43.197

`DigitalClock`随着 API 级别 17 的发布已弃用。此外`TextClock`，建议在处理 API 级别 17 的应用程序时使用。

# c# - 以不同的格式将数据库数据分发给多个消费者

> ID：13451471
> 
> 赞同：0
> 
> 时间：2012-11-19T10:03:22.313
> 
> 标签：c#, .net, database, web-services, biztalk

我有一个大型数据库，其中包含来自大型企业的大量数据。

我们希望能够将这些数据分派到不同的外部应用程序（外部，意味着不是我们开发的，但只能在我们的本地网络中访问）。

消费者可以是非常不同的类型：会计、报告、技术（商业）、网站，......

具有多种格式：CSV、webservice、RSS、Excel、...

这些导出的执行可以有两种不同的类型：计划的（如每小时）或按需。

主要有两种导出：几乎实时数据（意味着我们想要拥有当前数据），或统计数据（意味着我们正在考虑一段时间）。

我还没有找到允许这些访问的好方法。

想到了Biztalk，但是我对这个产品不是很了解，不确定它是否可以进行定时通话，是否有业务逻辑。有没有人对 Biztalk 有足够的了解，可以告诉我它是否能满足我的需求？

如果 Biztalk 不是一个好方法，是否有任何库可以简化定制服务的开发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:09:51.580

Biztalk 可以做你想做的事情，即从数据库中提取数据，将其转换为各种格式，并按计划或在需要时通过将其公开为 web 服务/WCF 服务将其发送到各种系统（不完全开箱即用，但您可能需要购买额外的适配器、管道等）。

但是，这里的问题是，这项任务的数据库密集程度如何？如果它的数据量很大，显然 Biztalk 不是最受青睐的候选者，因为 Biztalk 难以处理大数据。但是，即使它的数据文件很大，它也适合路由（无需转换/检查）。

另一方面，SSIS 适用于数据密集型任务。如果您现有的数据库位于 SQL Server 上，那么它更适合您的数据密集型导出/导入和转换。但是当涉及到连接到外部系统（协议）所需的各种方式时，它就不足了。

因此，您正在寻找一个好的 ETL 工具（如 SSIS）和擅长路由的工具（如 Biztalk）的组合。在可扩展性、容量、连接性、数据格式等方面，它们都不能完全满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:42:32.723

我认为您可以使用 ASP.NET MVC API。[http://www.asp.net/web-api](http://www.asp.net/web-api) 我发现它是导出不同类型信息和文件格式的最简单方法。

它不会生成预定的报告或文件，您将需要客户端应用程序或 Windows 服务来调用该应用程序。类似于 web 服务，但它可以返回不同的格式和文件。

并创建 excel 文件等，您必须手动创建它们。这有点让人失望，但我喜欢这种方法，因为它可以很容易地托管在 IIS 上，并且您的客户端要调用的所有函数都可以在同一个地方，甚至可以从 javascript 调用，所以我认为它有点为您做更多的工作，但它创建了非常容易使用的服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T20:13:26.753

通过调度，我假设您正在寻找 pub/sub 模型。仔细看看 NServiceBus (NSB) 的 pub/sub 功能，[http](http://nservicebus.com/docs/Samples/PublishSubscribe.aspx) ://nservicebus.com/docs/Samples/PublishSubscribe.aspx 。在幕后 NSB 大量使用 MSMQ，随着时间的推移，它变得更加稳定。

如果您想在 .NET 舒适区之外冒险，请查看[Apache Camel](http://camel.apache.org/)或 Fuse 的[Enterprise Service Bus](http://fusesource.com/open_source/enterprise-service-bus/)。这些工具中的任何一个都将支持您的需求。我在一些极高吞吐量的领域使用了 Camel，没有任何重大问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T14:05:11.680

您的问题可能会导致相当广泛的实施。您可以考虑使用服务总线（pub/sub）以及某种形式的 CQRS（如果适用）。

我的 FOSS Shuttle ESB 项目在这里：[http ://shuttle.codeplex.com/](http://shuttle.codeplex.com/)

它内置了一个通用调度程序。当然，您可以使用任何其他服务总线，例如 MassTransit 或 NServiceBus。

# mysql - 获取最新日期记录的分组最大查询

> ID：13451472
> 
> 赞同：1
> 
> 时间：2012-11-19T10:03:24.170
> 
> 标签：mysql, aggregate-functions

我正在尝试构建一个查询，该查询仅根据日期获取一组记录的最新记录。

表的布局如下：

```
| date | category | action | label | label2 | count_today | count_total | period | 
```

主键基于列`date`, `category`, `action`, `label`, `label2`, `period`。`date`有 format`yyyy-mm-dd`和 period 可以有值`Day`, `Week`, `month`.

对于每个独特的组合，`category | action | label | label2`我需要拥有最新日期的记录。

我的第一次尝试是这样的：

```
SELECT * FROM `statistic` 
WHERE 
 (action='total' OR action='' OR category='user')
 AND
 (period='day' 
   OR (period='week' AND DATEDIFF(now(), `date`) > 30)
   OR (period = 'Month' AND DATEDIFF(now(), `date`) > 7*26)
 )
GROUP BY category, action, label, label2
ORDER BY date DESC 
```

此查询的问题在于它在 ORDER BY 之前执行 GROUP BY，导致返回不正确的记录。

经过搜索，我发现我想要的是所谓的[分组最大](http://kristiannielsen.livejournal.com/6745.html)查询。

我的下一次尝试是这样的：

```
SELECT s1.* FROM `statistic` AS s1
LEFT JOIN statistic AS s2 
ON 
 s1.category = s2.category
 AND s1.action = s2.action
 AND s1.label = s2.label
 AND s1.label2 = s2.label2
 AND s1.date > s2.date
WHERE 
   (s1.action='total' OR s1.action='' OR s1.category='user')
   AND
   (s1.period='day' 
   OR (s1.period='week' AND DATEDIFF(now(), s1.`date`) > 30)
   OR (s1.period = 'Month' AND DATEDIFF(now(), s1.`date`) > 7*26)
 )
GROUP BY category, action, label, label2 
```

但是这个查询也没有给我正确的结果（它看起来类似于第一个查询）。

有什么线索可以获取我需要的数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T11:00:55.377

你是对的，你想要[group-wise maximum](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)，但是你可以通过将你的表与一个查找每个组的最新日期的子查询连接起来来实现这一点：

```
SELECT * FROM statistic NATURAL JOIN (
  SELECT   category, action, label, label2, MAX(date) date
  FROM     statistic
  GROUP BY category, action, label, label2
) t 
```

然后，如果仍然需要以下过滤器：

```
WHERE 
 (action='total' OR action='' OR category='user')
 AND
 (period='day' 
   OR (period='week' AND DATEDIFF(now(), `date`) > 30)
   OR (period = 'Month' AND DATEDIFF(now(), `date`) > 7*26)
 ) 
```

# webview - Titanium如何让webview加载一次然后重置

> ID：13451485
> 
> 赞同：1
> 
> 时间：2012-11-19T10:04:04.900
> 
> 标签：webview, load, titanium

我正在使用 webview 加载来检测页面何时加载，但我需要它只触发一次，但它会触发很多次我想出了下面的解决方案让它触发一次，但这只会发生一次，而且只有我需要每次加载页面时都会触发它，但只有一次示例。

```
webviewload = true;
webview.addEventListener('load', function() {

    if(webviewload){

        //run code to add stuff to webview this will run once
            webview.remove(oldsidebar);
            webview.add(newsidebar);
            webviewload = false;
       }

}); 
```

以上对于一个 webview 加载工作正常，但如果你再次运行它显然设置为 false，所以我只能运行这个代码一次。我发现一个对我有用的黑客，但我正在寻找一个更好的解决方案，我理解它的触发，因为它会触发 webview 上的每个元素加载广告等。

```
webviewload = true;
webview.addEventListener('load', function() {

    if(webviewload){

        //run code to add stuff to webview this will run once
            webview.remove(oldsidebar);
            webview.add(newsidebar);
            webviewload = false;
       }

       setTimeout(function(){
        webviewload = true;
    },5000)

}); 
```

好的，但如果页面加载时间超过 5 秒等我遇到问题，则不理想。谁能给我一个关于如何触发 webview 加载然后重置的建议，以便我可以正确运行代码块。希望这是有道理的谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:41:04.737

是的，这是因为您正在加载的页面，就像几乎所有门户主页一样，几乎完全由对其他页面和脚本等的 ajax 调用组成。这将导致您的加载事件触发，然后触发，并再次开火，直到一切都装满为止。

我想解决这个问题的一种方法是侦听 load 事件并设置一些间隔，如果通过将杀死侦听器并继续。

# xcode - 由于 UIView 的 xcode 4.5 中的扩展，如何解决控件的更改位置？

> ID：13451491
> 
> 赞同：0
> 
> 时间：2012-11-19T10:04:21.470
> 
> 标签：xcode, uiview, xcode4.3, xcode4.5

我已经将我的 xcode 升级到 4.5 一切都很好，直到我添加到我以前的解决方案（我已经使用 xcode 4.3 开发它）新`UIView`的有一个`UIImageview`控件我注意到**xib**`UIImage`中的控制位置 与我运行时的位置不同我在设备上的应用**`ios5`**

 **任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:08:32.720

我不确定我是否正确理解了您的问题。尝试隐藏设备的状态栏。

您可以在当前目标设置中或以编程方式执行此操作：

[UIApplication sharedApplication] setStatusBarHidden...**

# android - 创建具有较低版本的新 AVD

> ID：13451493
> 
> 赞同：0
> 
> 时间：2012-11-19T10:04:33.357
> 
> 标签：android, eclipse, android-emulator

我想将我的 android 应用程序的 minSDKversion 从 10 更改为 7。所以我读到我应该改变我的清单以包括：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" /> 
```

我当然想用运行版本 7 的模拟器来测试它。但是当我去创建一个新的 AVD 时，那个版本没有目标。所以，我去了 Android sdk manager 并选择了 Android 2.1（即版本 7）。尝试安装时，出现此错误：

```
Downloading SDK Platform Android 2.1, API 7, revision 3 File not found: /home/dorien/bin/android-sdk-linux/temp/android-2.1_r03-linux.zip (Permission denied) 
```

我将此文件夹的权限更改为 755。当我仔细观察时，我注意到 /temp/ 是空的？我该如何解决？重新安装安卓插件？

另外，当我导出项目时，它给了我以下错误：

```
Conversion for Dalvik format failed. Unable to execute .dex: wrapper was not properly loaded. 
```

我想这又是因为没有安装第 7 版？我在论坛上读到我应该重新启动 Eclipse，但无济于事。关于我的下一步行动有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:22:25.543

您只需将 androidsdk 文件夹复制到另一个文件夹，然后转到 windows -> 首选项 -> android-> 更改 sdk 位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:44:05.663

我在 Windows 中没有在 Linux 中遇到同样的问题，但是您唯一需要知道的是权限，如果您可以授予该目录的读写权限，那就没问题了。

# windows-runtime - 如何在 WinRT 中设置应用程序启动屏幕背景颜色

> ID：13451494
> 
> 赞同：3
> 
> 时间：2012-11-19T10:04:34.683
> 
> 标签：windows-runtime

如何在 WinRT 应用程序中设置开始屏幕（AKA 启动屏幕）的背景颜色？默认为深灰色，对眼睛非常不友好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:04:34.683

在应用清单中，有“应用程序 UI”选项卡，将“背景颜色”条目设置为所需的颜色。

现在已移至“视觉资产”选项卡，然后您需要在设置“背景颜色”之前选择“启动画面”。

# android - GCM phonegap 插件消息错误

> ID：13451495
> 
> 赞同：2
> 
> 时间：2012-11-19T10:04:35.540
> 
> 标签：android, cordova, google-cloud-messaging

我正在使用 phonegap 在 android 上实现 GCM。在我向设备发送消息之前，该过程运行良好。当我的设备收到消息时，它会关闭并显示我的应用程序出现内部错误...错误消息来自 dalvik VM。我仍在使用插件附带的演示应用程序进行测试。

LogCat 中的错误是：

Activity com.cordova2.gcm.MainActivity 泄露了最初在这里注册的 IntentReceiver com.google.android.gcm.GCMBroadcastReceiver@4a31f700。您是否错过了对 unregisterReceiver() 的调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:54:00.957

您必须在 mainactivity 中调用它才能消除该错误

```
@Override
public void onDestroy() {
    GCMRegistrar.onDestroy(this);
    super.onDestroy();
} 
```

# php - php sql update 只填写字段

> ID：13451498
> 
> 赞同：0
> 
> 时间：2012-11-19T10:04:40.367
> 
> 标签：php, sql

（这是所有基本的php voor学校）我做了一个表格，您可以在其中更新您的帐户信息，当您点击提交按钮时，它会来到这个php代码。如果一个字段没有填写，它不需要更新，我试过“WHERE field IS NOT NULL”但它似乎不起作用，它给出了一个空记录......

（变量都是荷兰语，对不起）

```
$klantnummer = $_COOKIE['klantnummer'];
$naam =($_POST["naam"]);
$adres =($_POST["adres"]);
$postcode =($_POST["postcode"]);
$gemeente =($_POST["gemeente"]);
$leden =($_POST["gezinsleden"]);
$huidigemeterstand =($_POST["huidigemeterstand"]);
$vorigemeterstand =($_POST["vorigemeterstand"]);
$provincie =($_POST["provincie"]);

//set up connection and choose database
$con = mysql_connect("localhost","root","root");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("opdracht3", $con);
mysql_query("UPDATE waterstand SET naam = '$naam', adres = '$adres', postnummer = '$postcode', gemeente = '$gemeente', vorigemeterstand='$vorigemeterstand', huidigemeterstand='$huidigemeterstand', provincie='$provincie', aantalgezinsleden = '$gezinsleden'
WHERE klantnummer = '$klantnummer' AND naam IS NOT NULL");` 
```

当然我需要添加“字段”的其余部分不为空，但例如我只使用“naam”..但它不起作用：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:25:05.380

如果您将这部分逻辑远离数据库，这可能是最简单的，例如

```
<?php
$con = mysql_connect("localhost","root","root");
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

if ( !mysql_select_db("opdracht3", $con) ) {
    die('Could not connect: ' . mysql_error());
}

// contains strings/parameters/identifiers ready-for-use with mysql  
$sql_params = array(
    'fields' => array('naam', 'adres', 'postcode', 'gemeente', 'gezinsleden', 'huidigemeterstand', 'vorigemeterstand', 'provincie'),
    'klantnummer' => mysql_real_escape_string($_COOKIE['klantnummer']),
    'updates' => array()
);

// the names of the POST-fields are the same as the column identifiers of the database table
// go through each identifier
foreach( $sql_params['fields'] as $f ) {
    // put in here the conditions for "an empty field, e.g.
    // if there is such POST-field and its value is one or more "usable" characters long
    if ( isset($_POST[$f]) && strlen(trim($_POST[$f])) > 0 ) {
        // create a new `x`=`y` "line" as in UPDATE ... SET `x`='y'
        // and append it to the array $sql_params['updates']
        $sql_params['updates'][] = sprintf("`%s`='%s'", $f, mysql_real_escape_string($_POST[$f]));
    }
}

// the "lines" in $sql_params['updates'] need to be concatenated with , between them
// join(', ', $sql_params['updates']) does that
// insert that string and the parameter klantnummer into the query string
$query = sprintf(
    "
        UPDATE
            waterstand
        SET
            %s
        WHERE
            klantnummer = '%s'
    ",
    join(', ', $sql_params['updates']),
    $sql_params['klantnummer']
); 
```

（未经测试）

# php - 显示剩余时间再次投票

> ID：13451499
> 
> 赞同：1
> 
> 时间：2012-11-19T10:04:42.277
> 
> 标签：php, mysql, date

我有一个投票脚本，允许人们每 24 小时为数据库中的一个项目投票，还有一些代码可以检查 24 小时是否已经过去或没有使用`'NOW()'`and `'DATE_SUB( NOW()`, `'INTERVAL 1 DAY'`.

我目前正在尝试添加该功能以显示在用户可以使用下面的代码再次投票之前还剩多少时间。

```
$time = explode(" ", $voteCheck[1]);
$year = explode("-", $time[0]);
$date = explode(":", $time[1]);

// Set it all to one long string
$time = $year[0].$year[1].$year[2].$date[0].$date[1].$date[2];

// Current time and date
$cTime = date("YmdHis");

// I get lost here 
```

votcheck 是一个来自 sql 字符串的数组，它只将第一行返回为 0 或 1。如果用户已经投票，则返回 1，如果用户可以再次投票，则返回 0。第二行返回用户投票的日期和时间。我似乎无法弄清楚在用户可以再次投票之前如何获得剩余的 x 小时数。

我的主要问题是 $time 字符串的长度有时是 13 有时是 14 个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:40:02.633

好的，在这里

```
$voted = new DateTime($time);
$daylater = date('Y-m-d H:i:s', strtotime('+1 day', $voted->format('U')));
$canvote = new DateTime($daylater);
$now = new DateTime(date("Y-m-d H:i:s"));

$diff = $canvote->format('U') - $now->format('U'); 

if ( $diff > 0 && $diff < 86400 ) {
    $left = gmdate("H:i:s", $diff);
    echo $left . ' left till you can vote again';
} else {
    echo 'You can vote again' ;
} 
```

让我知道它是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:24:10.360

不能直接`strtotime()`用来转换吗？`$voteCheck[1]`然后，您可以根据当前时间戳检查 unix 时间戳。

# google-apps-script - 您可以在 Google 电子表格自定义菜单中设置菜单项吗？

> ID：13451501
> 
> 赞同：1
> 
> 时间：2012-11-19T10:04:45.300
> 
> 标签：google-apps-script, google-sheets

当使用将菜单项添加到电子表格时`spreadsheet.addMenu()`，有没有办法让它们像项目 View>Normal 一样可勾选？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:05:33.147

如果你真的想这样做，也许你可以做一些像下面这样笨拙的事情，并`updateMenu`在必要时调用以添加复选标记。

```
function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var menuEntries = [ {name: "  item 1", functionName: "one"},
                      {name: "  item 2", functionName: "two"} ];
  ss.addMenu("myMenu", menuEntries);
}

function one() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  ss.updateMenu("myMenu", [ {name: "✓ item 1", functionName: "one"},
                            {name: "  item 2", functionName: "two"} ]);
  // ... item 1 actions
}

function two() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  ss.updateMenu("myMenu", [ {name: "  item 1", functionName: "one"},
                            {name: "✓ item 2", functionName: "two"} ]);
  // ... item 2 actions
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T02:35:56.740

我尝试使用@KalyanReddy 提供的答案，但遇到了问题，因为电子表格 UI 会压缩空格并修剪菜单名称。通过反复试验，我找到了解决方法。

![截屏](../Images/f9a62957f5373c6a1f8aab8bb367a220.png)

这是一个生成复选框对齐菜单的实用程序函数：

```
/**
 * Make a checkbox menu item. Returns a string with the original text aligned to
 * leave room for a check mark. (Dependent on font, compatible with default
 * font used in Google Spreadsheets as of May 2013\. YMMV.)
 *
 * @param {String} name Original item name
 * @param {boolean} check True if menu item should have a check mark
 *
 * From an idea by Kalyan Reddy, http://stackoverflow.com/a/13452486/1677912
 */
function buildItemName( name, check ) {
  // Prepend with check+space, or EM Space
  return ( check ? "✓ " : "\u2003" ) + name;
} 
```

要真正使用它，您应该编写一个函数来跟踪状态并通过调用 buildItemName 构建菜单项，然后`updateMenu()`在状态更改时调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:00:16.170

最简洁的答案是不。

较长（更）的答案是菜单项只能调用函数，因此它没有用处来显示“状态”。然而，您可以想象在电子表格本身中使用某种标题来显示您想要显示的状态，或者通过修改文本值或通过更改颜色来显示某个函数已被调用。

我假设您请求的最终目标是显示是否已调用函数...如果我错了，请解释这是您的意图。

# c# - 取决于数据库中是否存在文件的 ASP.Net 按钮的可见性

> ID：13451502
> 
> 赞同：0
> 
> 时间：2012-11-19T10:04:50.907
> 
> 标签：c#, asp.net, sql-server, visibility

我有一个 gridview 有几行（每行都有一个唯一的`rowId`），每行都有一个`FileUpload`控件，现在一切正常`FileUpload`。

（我上传的文件数据库图片可以在下面看到）

我有下载按钮，它也可以正常工作，但是如果相应行不存在文件，我想让这个按钮不可见。

没有什么合适的东西浮现在我的脑海里。

我的按钮和`FileUpload`控件：

```
 <asp:TemplateField HeaderText="BatchList">
        <EditItemTemplate>
            <asp:ImageButton ID="ibt_Download" runat="server" src="Images/Download.png" CommandName="Download" CommandArgument='<%# Container.DataItemIndex %>' ></asp:ImageButton>
        </EditItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="UploadBatchList">
        <HeaderTemplate>
            <asp:Label ID="lbl_Header" ToolTip="Upload Batch List" runat="server" Text="UBL"></asp:Label>
        </HeaderTemplate>
        <EditItemTemplate>
            <asp:FileUpload ID="fu_UploadBatchList" runat="server" />
            <asp:Button ID="btn_Upload" runat="server" Text="Upload" OnClick="btn_Upload_Click" />
        </EditItemTemplate>
    </asp:TemplateField> 
```

这就是它在我的 gridView 上的样子

![在此处输入图像描述](../Images/ded9f6ff5c2958155c954dbd56d3d76f.png)

首次创建 gridview 时，如果之前已上传文件，则绿点必须不可见。

我的文件数据库：

![在此处输入图像描述](../Images/48232b38fc624f3cb14ce9aab999fcce.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:49:10.647

您可以检查数据项的某些属性（在您的情况下为 DocName），如果它包含一个值（复制粘贴时它可能不起作用，我有点即兴发挥）：

```
<asp:Button ID="btn_Upload" runat="server" 
            Text="Upload" 
            Visible='<% DataBinder.Eval(Container.DataItem, "DocName") == null %>
            OnClick="btn_Upload_Click" /> 
```

或者您可以创建一个评估可见性的函数。有关更多信息，请参阅[掌握 ASP.NET 数据绑定](http://www.codeproject.com/Articles/8659/Mastering-ASP-NET-DataBinding)。

# php - 在弹性搜索中过滤？

> ID：13451509
> 
> 赞同：1
> 
> 时间：2012-11-19T10:05:18.737
> 
> 标签：php, elasticsearch

我正在使用 date_histogram api 使用间隔（小时/天/周或月）获取实际计数。此外，我还有一个难以实现的功能，用户可以通过输入将使用字段时间戳查询的 startDate 和 endDate （文本框）来过滤结果。那么如何在使用 date_histogram api 或任何 api 时仅查询一个字段（即 TIMESTAMP）来过滤结果，以便实现我想要的结果。

在 SQL 中，我将只使用 between 运算符来获取结果，但从我目前阅读的内容来看，它们在 Elastic Search 中没有 BETWEEN 运算符（不确定）。

到目前为止，我有这个脚本：

```
curl 'http://anotherdomain.com:9200/myindex/_search?pretty=true' -d '{
               "query" : { 
                  "filtered" : { 
                     "filter" : { 
                        "exists" : { 
                           "field" : "adid" 
                        } 
                     }, 
                     "query" : { 
                        "query_string" : {
                          "fields" : [
                            "adid", "imp"
                            ],
                            "query" : "525826 AND true"
                        }
                     }

                  } 
               },
               "facets" : {
                  "histo1":{
                    "date_histogram":{
                      "field":"timestamp",
                      "interval":"day"
                    }
                  }
                } 
            }' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:10:46.940

在弹性搜索中，您可以使用过滤器的[范围](http://www.elasticsearch.org/guide/reference/query-dsl/range-query.html)查询来实现这一点。

# visual-studio - 仅使用一个版本的 Visual Studio 安装 DevExpress DXperience

> ID：13451512
> 
> 赞同：2
> 
> 时间：2012-11-19T10:05:24.697
> 
> 标签：visual-studio, devexpress, dxperience

我的计算机上安装了 Visual Studio 2008 和 Visual Studio 2012，我想安装`DevExpress DXperience 12.1.4`但只能使用 Visual Studio 2008。

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:21:21.367

```
I want to install DevExpress DXperience 12.1.4 but only with Visual studio 2008. 
```

不，安装程序将在所有版本的 Visual Studio 中安装 DXperience 控件。

但是您可以通过从 Visual Studio 2012[重置开发环境设置来删除所有控件。](http://msdn.microsoft.com/en-us/library/ms247075.aspx)

> 在工具菜单上，单击导入和导出设置。
> 
> 在欢迎使用导入和导出设置向导页面上，单击重置所有设置，然后单击下一步。

现在工具栏中显示的控件从 Visual Studio 2012 中消失。如果您想使用它们，请使用 devexpress 的 toolBax 创建者将它们恢复到所有 Visual Studio 实例中。

参考： [在 Visual Studio 中重置 IDE 设置](http://www.alexjamesbrown.com/blog/development/reset-ide-settings-in-visual-studio-2008/)

希望这是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:13:45.533

没门。安装程序将在找到的所有 VS 实例下安装 DXperience。

# php - 包含页面的功能

> ID：13451517
> 
> 赞同：0
> 
> 时间：2012-11-19T10:05:31.387
> 
> 标签：php, arrays, function, include

我正在尝试制作一个包含页面的功能。

事实上，一开始我使用的是检查所有页面的长代码：

```
if (isset($_GET]['p']) && $_GET['p']=='something') {include 'something.php'}; 
```

现在我处理了 600 多页，这段代码太长了，我想简化一下。

有时我确实有一些页面的标题就像它们被使用一样，例如 home 将对应于 accueil.php 等。

所以我做了一个数组，其中列出了所有异常：

像那样：

```
$paramListepages = array(
    'corbeille' => array(
        'libelle'     => 'corbeille',
        'page'        => 'php/trash.php'
    ),   
    'nouveaumessage' => array(
        'libelle'     => 'nouveaumessage',
        'page'        => 'php/envoyer.php'
    ), 
```

ETC...

在这个数组中，我有大约 20 页。

现在我尝试创建一个包含页面的函数，所以这是我的代码：

```
function getPage($var)
{
    if (isset($var)) {
        $key = array_search($var, $paramListepages);
        if ($key == false()) {
            include('php/'.$var.'.php');    
        } else {

        }
    }
} 
```

我不明白为什么第一部分不起作用。

我首先检查数组中是否存在 var，如果不存在，则包含与 var 对应的页面。

我仍然不知道如何做第二部分，但现在第一部分不起作用。

我没有消息错误，即使在我的 ubunto 中我激活了所有错误的显示。

在主页中`index.php`，我调用该函数`getPage($_GET['p'])`

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:13:23.460

我建议直接访问数组中的条目：

```
function getPage($var) {
    if (empty($var))
        // no page specified => default page
        inlude('index.php')
    elseif (array_key_exists($var,$paramListepages))
        // page found => include it!
        include (sprintf('php/%s.php', $paramListepages[$var]['page']));
    else
        // page not found => default page
        inlude ('index.php')
} 
```

# wordpress - 如何从子域博客显示主域中的最新帖子

> ID：13451524
> 
> 赞同：0
> 
> 时间：2012-11-19T10:06:04.287
> 
> 标签：wordpress

需要将最近的帖子从我的子域显示到我的主域前端。我正在使用下面的代码，但它只选择主域最近的帖子。对获取子域最近的帖子有什么帮助吗？

```
<h2>Recent Posts</h2>
<ul>
<?php
    $args = array( 'numberposts' => '5' );
    $recent_posts = wp_get_recent_posts( $args );
    foreach( $recent_posts as $recent ){
        echo '<li><a href="' . get_permalink($recent["ID"]) . '" title="Look '.esc_attr($recent["post_title"]).'" >' .   $recent["post_title"].'</a> </li> ';
    }
?>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:12:36.377

编辑2：

事实证明，您没有从同一个 WordPress 安装（也称为 WordPress 网络）运行两个站点。这是我可以建议您在这种情况下使用的内容。

将此代码放在主站点的`functions.php`：

```
/**
* this function retrieves the requested part of the main site
* ok, well basically can be from any site, depending on the $url param, as long as it has the proper function that will display the requested content
* @param $url - the url of the site
* @param $key - part of the name of the function that will display the content
* @param $add_qs - any additional query string that will be appended, use "&params=param1,param2,param3" to pass "param1", "param2" and "param3"
* to the loading function
*/
function get_main_site_part($url, $key, $add_qs = '') {

    // cache the result, so we don't make a request with each page load
    $cache = ABSPATH . 'wp-content/uploads/main_site_' . $key . '.txt';
    $cache_lifetime = 300;

    // just to make sure - try to remove the trailing slash in the $url
    $url = untrailingslashit($url);
    $uri = $url . '/?including_template_part=1&load_part=' . $key . $add_qs;

    # reload the cache on every 5 minutes
    if (!file_exists($cache) || time() - filemtime($cache) > $cache_lifetime) {
        $main_site_html = wp_remote_get($uri);
        if (is_a($main_site_html, 'WP_Error')) {
            //print_r($main_site_html);
            //exit('error! ');
            return;
        }

        $fp = fopen($cache, 'w');
        fwrite($fp, $main_site_html);
        fclose($fp);
    } else {
        $main_site_html = file_get_contents($cache);
    }

    return $main_site_html;
} 
```

现在将此功能放在您的子域中`functions.php`：

```
/* HTML LOADING HOOK - For loading content from one site to another - best application in multisite */
function print_requested_template_part() {
    // Respond only to requests from the same address... 
    if ( $_SERVER['REMOTE_ADDR'] == $_SERVER['SERVER_ADDR'] && $_SERVER['REQUEST_METHOD'] == 'GET' && isset($_GET['including_template_part']) && isset($_GET['load_part']) && $_GET['load_part'] != '' ) {
        $part = $_GET['load_part'];
        $func = 'render_' . str_replace('-', '_', $part); // if you have declared a function called "render_footer_include", then "?load_part=footer_include"
        if ( function_exists($func) ) {
            // Allow for passing parameters to the function
            if ( isset($_GET['params']) ) {
                $params = $_GET['params'];
                $params = ( strpos($params, ',') !== false )? explode(',', $params) : array($params);
                call_user_func_array($func, $params);
            } else {
                call_user_func($func);
            }
        }
        exit; // if we don't exit here, a whole page will be printed => bad! it's better to have empty footer than a footer with the whole main site...
    }
}
add_action('init', 'print_requested_template_part', 1);

function render_my_recent_posts( $numberposts = 5 ) { ?>
    <h2>Recent Posts</h2>
    <ul>
    <?php
        $args = array( 'numberposts' => '5' );
        $recent_posts = wp_get_recent_posts( $args );
        foreach( $recent_posts as $recent ) {
            echo '<li><a href="' . get_permalink($recent["ID"]) . '" title="Look '.esc_attr($recent["post_title"]).'" >' .   $recent["post_title"].'</a> </li> ';
        }
    ?>
    </ul><?php
} 
```

然后在您的主站点中调用此函数，您希望在其中显示您最近的帖子：

```
echo get_main_site_part( 'http://questions.admissiontimes.com/', 'my_recent_posts', '&params=5' ) 
```

编辑1：

使用您在问题中的示例代码，结合下面我的解决方案，最终代码如下所示：

```
<?php 
switch_to_blog( 2 ); // Switch to the blog that you want to pull posts from. You can see the ID when you edit a site through the Network Admin - the URL will look something like "http://example.com/wp-admin/network/site-info.php?id=2" - you need the value of "id", in this case "2" ?>
<h2>Recent Posts</h2>
<ul>
<?php
    $args = array( 'numberposts' => '5' );
    $recent_posts = wp_get_recent_posts( $args );
    foreach( $recent_posts as $recent ) {
        echo '<li><a href="' . get_permalink($recent["ID"]) . '" title="Look '.esc_attr($recent["post_title"]).'" >' .   $recent["post_title"].'</a> </li> ';
    }
?>
</ul>
<?php restore_current_blog(); // Restore the current blog ?> 
```

现在，您只需将该代码放在您拥有原始代码的任何地方，并且一切都应该正常工作。

* * *

您需要切换到相关博客，使用[`switch_to_blog($blog_id)`](http://codex.wordpress.org/WPMU_Functions/switch_to_blog)功能，`$blog_id`相关博客（子站点）的 ID 在哪里。

然后执行您正常的 get_posts/或等效/功能并以您想要的方式显示/存储帖子。

一旦你完成了，只需打电话[`restore_current_blog()`](http://codex.wordpress.org/WPMU_Functions/restore_current_blog)就可以了。

# html - Internet Explorer 6/7 中的精灵

> ID：13451528
> 
> 赞同：1
> 
> 时间：2012-11-19T10:06:15.083
> 
> 标签：html, css, internet-explorer, png, sprite

我似乎无法让我的精灵在 IE 7 及以下版本中正常工作。（IE 9 工作正常）下面是我的 CSS：

```
#info 
{
    width:100%;
    height:77px;
    background:url('../img/ck_sprite.png')no-repeat;
    background-position: 0px 0px;
    float:left;
    display:block;
    clear:both;
}
#info:hover
{ 
    width:100%;
    background:url('../img/ck_sprite.png')no-repeat;
    background-position: 0px -300px;
    cursor: default;
    float:left;
} 
```

**还有两节这样的课**

我试图搜索该问题的解决方案，但解决方案不适用于我的问题。

编辑：对不起，我没有描述我的实际问题。图像在 IE 中根本不显示。

这是我的html代码：

```
 <div id="info">
              </div>        

                    <asp:Literal ID="litInfo" runat="server" />        

              <div id="bestilling">
              </div>          
                    <asp:Literal ID="litBestilling" runat="server" />          

              <div id="kontakt">

                    <asp:Literal ID="litKontakt" runat="server" /> 
```

如您所见，我用 C# 对站点进行了编码。文字放置在 div 之外，因为它们应该包含的唯一内容是图像。（他们作为头条新闻）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:35:14.250

你没有提供你的**HTML**，所以我会假设你的 ID 应用到的标签不是锚标签？

IE6/7 仅支持`:hover`伪锚标记。

这应该有效：

```
a#info 
{
    width:100%;
    height:77px;
    background:url('../img/ck_sprite.png')no-repeat;
    background-position: 0px 0px;
    float:left;
    display:block;
    clear:both;
}
a#info:hover
{ 
    width:100%;
    background:url('../img/ck_sprite.png')no-repeat;
    background-position: 0px -300px;
    cursor: default;
    float:left;
} 
```

...如果您的**HTML**是：

```
<p><a id="info" href="#">Hello World</a></p> 
```

希望有效吗？提供更多信息以获得更好的答案！

谢谢，迈克尔。

# php - 多页表单中的 Wordpress Gravity Form 奇怪错误

> ID：13451529
> 
> 赞同：1
> 
> 时间：2012-11-19T10:06:16.063
> 
> 标签：php, wordpress, gravity

我在我的 wordpress 网站上遇到了一个多页重力表单的奇怪问题，这是表单的链接： http: [//cc.marknetdev.com/small-business/apply-for-a-loan/apply-now /](http://cc.marknetdev.com/small-business/apply-for-a-loan/apply-now/)

一旦我按下提交/下一步，表单既不会显示验证错误，也不会跳转到下一步。

我调查了这个问题，发现这个问题只发生在这台服务器上，我在不同的域和主机上尝试了相同的安装，它在那里工作： [http ://comcap.taqih.com/small-business/apply-for -贷款/立即申请/](http://comcap.taqih.com/small-business/apply-for-a-loan/apply-now/)

我尝试更新 htaccess 文件，停用所有插件，在新的 wordpress 安装上尝试相同的操作，但此页面上一次又一次地出现问题：http: [//cc.marknetdev.com/small-business/apply-for-a -贷款/立即申请/](http://cc.marknetdev.com/small-business/apply-for-a-loan/apply-now/)

你能帮我吗，有什么问题吗？跟服务器有关系吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:11:26.493

我发现了问题：

“我的服务器上的 Mod Security 阻止了表单提交，因为表单有很多输入，它被认为是垃圾邮件攻击，并阻止了表单提交”

我希望这对将来的某人有所帮助。

# php - 突出显示字符串中的多个单词

> ID：13451536
> 
> 赞同：2
> 
> 时间：2012-11-19T10:06:41.417
> 
> 标签：php, regex, preg-replace

我可以像这样突出显示字符串中的一个单词：

```
$str = "my bird is funny";
     $keyword = "fun";
     $str = preg_replace("/($keyword)/i","<b>$0</b>",$str); 
```

蚂蚁这会给我：我的鸟很**有趣**ny

但是当关键字来自多个单词时如何使这项工作发挥作用，例如当

```
$keyword = "bird fun"; 
```

我想得到这个结果：我的**鸟**很**有趣**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T10:09:15.320

正则表达式最基本的概念之一是交替。`bird|fun`将匹配`bird`或`fun`。`implode`使用and可以很容易地生成这种交替`explode`：

```
$keywords = explode(' ', trim($keyword));
$str = preg_replace('/'.implode('|', $keywords).'/i', '<b>$0</b>', $str); 
```

正如 pritaeas 指出的那样，您还可以使用`str_replace`：

```
$str = preg_replace('/'.str_replace(' ', '|', trim($keywords)).'/i', '<b>$0</b>', $str); 
```

当然，如果您`$keyword`自己编写并且不在其他任何地方使用它，那么请立即将其编写为正则表达式：

```
$keyword = 'bird|fun'; 
```

甚至

```
$keyword = '/bird|fun/i'; 
```

这样，您根本不需要任何爆炸或内爆。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T10:12:04.517

```
$str = "my bird is funny";
$keyword = "bird fun";
$keyword = implode('|',explode(' ',preg_quote($keyword)));
$str = preg_replace("/($keyword)/i","<b>$0</b>",$str); 
```

[**看见**](http://ideone.com/uwjZe5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T10:27:02.223

试试这个：

```
<?
$str = "my bird is funny";
     $keyword= array("bird","fun");
     foreach($keyword as $k=>$v)
{
     $str = preg_replace("/($v)/i","<b>$0</b>",$str);
}
//echo $str;
?> 
```

# java - jar中Java资源的最后修改时间

> ID：13451541
> 
> 赞同：3
> 
> 时间：2012-11-19T10:06:48.503
> 
> 标签：java, jar, resources, last-modified

我需要获取 java 资源的最后修改时间。当我使用

```
url.openConnection().getLastModified() 
```

它返回整个 jar 的最后修改时间（内部所有项目都相同），但我需要特定文件的修改时间。信息就在那里（当我以 zip 格式打开 jar 时，我会在特定文件中看到正确的时间）。有人知道如何访问它吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:10:53.137

您可能需要使用 JarInputStream 查询 JAR 内容。
您将遍历条目，并获取[ZipEntry](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipEntry.html)的对象。
ZipEntry 的访问器方法之一是[getTime](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipEntry.html#getTime%28%29)。
我相信这是您正在寻找的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:38:14.397

尝试类似：

```
try (FileSystems jarFS = FileSystems.newFileSystem(URI.create("jar:" + jarURI), Collections.<String, Object>emptyMap())){
    Path resourcePath = jarFS.getPath(resourcePathString); 
    FileTime fileTime = Files.getLastModifiedTime(resourcePath);
} 
```

我还使用 NIO 文件 API 编写了一些实用程序方法来处理 Jar 文件：

[http://softsmithy.sourceforge.net/lib/0.2/docs/api/softsmithy-lib-core/org/softsmithy/lib/nio/file/JarFiles.html](http://softsmithy.sourceforge.net/lib/0.2/docs/api/softsmithy-lib-core/org/softsmithy/lib/nio/file/JarFiles.html)

该库是开源的。

马文：

```
<dependency>  
    <groupId>org.softsmithy.lib</groupId>  
    <artifactId>softsmithy-lib-core</artifactId>  
    <version>0.2</version>   
</dependency> 
```

# c# - 使用会话变量有多安全 - asp.net / c#

> ID：13451543
> 
> 赞同：31
> 
> 时间：2012-11-19T10:06:59.607
> 
> 标签：c#, asp.net, session

所以基本上我想知道我使用 Session 变量的方式有多安全。

我有一个登录表单，用户输入他的用户名/密码，它被参数化然后查询，如果用户名/密码存在，则从 db 表返回一个用户 ID。这对每个用户来说都是独一无二的。

当我有这个值时，这就是我想知道这种方式是否是在会话变量 uID 中存储用户 ID 的安全方式？不管怎样，我就是这样做的，

```
Session["uID"] = (int)dt.DefaultView[0]["userID"];

FormsAuthentication.RedirectFromLoginPage(username.Text, false);

Response.Redirect("userPage.aspx", false); 
```

然后页面被重定向到另一个页面，我使用会话变量从数据库中获取用户表。

提前感谢您的反馈

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-19T10:10:31.390

会话状态完全保存在服务器端，无论您使用哪种存储方法（内存中、会话状态服务器或数据库）。

因此，除非您的服务器被黑客入侵，否则会话变量是安全的。如果您的服务器确实被黑客入侵，黑客只能访问他自己会话中的数据，除非他找到一种方法来分析 IIS 进程的内存。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-19T10:10:11.423

非常安全，.NET 会话变量与可以从客户端查看的 cookie 变量不同，此实例中的会话变量只能从 C# 代码访问。

因此，您可以放心，除了运行后台的代码之外，任何人/事物都不能编辑 Session 变量。

**与您的问题不完全相关，但在您的情况下可能很高兴知道：**

您还可以将整个对象存储在会话中，因此您可以将用户对象存储在会话中，例如

```
user_Class user = new user_Class();
user.UID = 1;
Session["User"] = user; 
```

然后在加载每个页面时将其重新加载。

```
user_Class user = (user_Class)Session["User"]; 
```

然后您每次都可以从会话中获取 user.UID。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T10:14:58.167

一切都好，直到您的网站超出单个服务器。然后，您必须将会话[提供程序迁移到状态服务器或使用 sql server](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.80%29.aspx)将其备份，这最终会有点糟糕。

有关会话安全问题的完整列表，请参阅[http://msdn.microsoft.com/en-us/library/ms178201%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms178201%28v=vs.80%29.aspx)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-19T10:41:21.677

当谈到会话时，您可以放心，数据不可直接访问。如果由于某种原因，您的应用程序曾经直接从会话中返回可能被利用的数据，但很少有任何理由这样做，因此风险相当小。

会话中最危险的部分是会话劫持。看，即使您的所有数据都安全地存储在服务器上，我们仍然需要处理整个“HTTP 是无状态的”问题。因此必须在客户端上存储某种标识符，以便服务器可以查找正确的会话数据。但是，如果另一个系统以某种方式获得了该 ID，那么只要服务器保持会话处于活动状态，他们就可以假装是您。

除了不断解决您网站中的任何跨站点脚本潜力之外，如果没有安全连接，您将无能为力。即使这样，它也可能被不当实施。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-21T07:09:51.923

即使**您的服务器没有受到损害**，您仍然很容易受到攻击， 会话可以通过使用[MITM 攻击](https://en.wikipedia.org/wiki/Man-in-the-middle_attack)轻松劫持，并且当攻击者获取您的会话时，他可以做任何您能做的事情。

您可以使用技术来避免会话劫持，但请记住，如果存在编码问题等导致您的应用程序易受攻击，您仍然容易受到攻击。

**使用 SSL**

[SSL](http://info.ssl.com/article.aspx?id=10241)您的网站

[![在此处输入图像描述](../Images/828da6d1d622bc4acfe8173856ad3c37.png)](https://i.stack.imgur.com/7Vyvh.jpg)

**生成[哈希](https://cs.stackexchange.com/questions/55471/what-exactly-and-precisely-is-hash/55472)**

[保护会话](https://www.codeproject.com/Articles/859579/Hack-proof-your-asp-net-applications-from-Session)

# javascript - 在jQuery中将下拉列表值设置为文本框

> ID：13451545
> 
> 赞同：0
> 
> 时间：2012-11-19T10:07:06.250
> 
> 标签：javascript, jquery

如果我的下拉列表选择了一个值，我想在我的文本框中显示选定的项目文本。如果没有，我想清空它。

```
<asp:DropDownList ID="ddl"  runat="server" AutoPostBack="true" onselectedindexchanged="ddlSelectedIndexChanged" Width="200px" onchange="ddlChange()">
</asp:DropDownList>
<asp:TextBox ID="hdntxtbxTaksit" runat="server" Visible="false"></asp:TextBox> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:08:44.140

如果您想将下拉列表的选定值分配给文本框，您可以在没有和条件的更改事件中分配为`change event means dropdown have been selected`.

**使用 javascript**

改变

```
onchange="ddlChange()" 
```

到

```
onchange="ddlChange(this)" 
```

你的 javascrpt 方法是

```
function ddlChange(ddl)
{      
      document.getElementById('<%= hdntxtbxTaksit.ClientId %>').value = this.value;
} 
```

**使用 jQuery**

删除 onchange="ddlChange()" 因为我们将绑定事件与 jquery。

```
$('<%= ddl.ClientId %>').change(function(){          
          $('<%= hdntxtbxTaksit.ClientId %>').val($(this).val());    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:14:53.517

使用 jQuery；

```
$().ready(function(){           
  $('#<%=ddl.ClientID %>').change(function () {               
    $('#<%=hdntxtbxTaksit.ClientID %>').val($(this).val() == "0" ? "" : $(this).val());              
  });
}); 
```

**编辑：**使用上述方法，您不需要调用`onchange`下拉菜单的事件。所以你的标记可以是

```
<asp:DropDownList ID="ddl"  runat="server" AutoPostBack="true"
         onselectedindexchanged="ddlSelectedIndexChanged" Width="200px">
</asp:DropDownList>
<asp:TextBox ID="hdntxtbxTaksit" runat="server" Visible="false"></asp:TextBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:11:47.187

你可以这样做

```
function ddlChange()
{
   if(document.getElementById('<%= ddl.ClientId %>').value=='0')
   {
      document.getElementById('<%= hdntxtbxTaksit.ClientId %>').value = "";
   }
   else
   {
      document.getElementById('<%= hdntxtbxTaksit.ClientId %>').value = document.getElementById('<%= ddl.ClientId %>').value;    
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T10:13:16.300

尝试此代码并删除在您的 asp:dropdownlist 中添加的 onchange 事件

**注意：** AUTOPOSTBACK 属性总是会做一个页面提交，即使你在下拉的 onchange 方法中返回 false 也不会停止

```
 $(document).ready(function () {
            $('#<%=ddl.ClientID %>').change(function () {

                if ($(this).val() != "0") {
                    $('#<%= hdntxtbxTaksit.ClientID %>').val($(this).val());
                }
                else {
                    $('#<%= hdntxtbxTaksit.ClientID %>').val("");
                }
            });

        }); 
```

# python - 如何用python处理一个1GB的文本文件

> ID：13451551
> 
> 赞同：0
> 
> 时间：2012-11-19T10:07:14.723
> 
> 标签：python, text-files

我正在尝试处理超过 1GB 的文本文件并使用 python 将数据保存到 Mysql 数据库中。

我在下面粘贴了一些示例代码

```
import os
import MySQLdb as mdb

conn = mdb.connect(user='root', passwd='redhat', db='Xml_Data', host='localhost', charset="utf8")

file_path = "/home/local/user/Main/Module-1.0.4/file_processing/part-00000.txt"

file_open = open('part-00000','r')

for line in file_open:
    result_words = line.split('\t')
    query = "insert into PerformaceReport (campaignID, keywordID, keyword, avgPosition)"
    query += " VALUES (%s,%s,'%s',%s) " % (result_words[0],result_words[1],result_words[2],result_words[3])
    cursor = conn.cursor()
    cursor.execute( query )
    conn.commit() 
```

实际上插入数据的列超过 18 列，我只粘贴了 4 列（例如）

所以当我运行上面的代码时，执行时间需要一些`hours`

我所有的疑惑都是

1.  有没有其他方法可以非常快速地处理 python 中的 1GB 文本文件？
2.  是否有任何框架可以处理 1GB 文本文件并将数据快速保存到数据库中？
3.  如何在几分钟内（有可能）处理大尺寸（1GB）的文本文件并将数据保存到数据库中？我所关心的是，我们需要尽可能快地处理 1GB 文件，而不是几个小时。

**编辑代码**

```
query += " VALUES (%s,%s,'%s',%s) " % (int(result_words[0] if result_words[0] != '' else ''),int(result_words[2] if result_words[2] != '' else ''),result_words[3] if result_words[3] != '' else '',result_words[4] if result_words[4] != '' else '') 
```

实际上我以上述格式提交值（通过检查结果存在）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T10:08:56.917

有点疯狂的猜测，但我会说`conn.commit()`文件中的每一行都会产生很大的不同。尝试将其移出循环。您也不需要在循环的每次迭代中重新创建光标 - 只需在循环之前执行一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T10:12:01.863

除了蒂姆所说的，我还要看看 MySQL 的[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)。在 Python 中进行任何必要的预处理并将其写入 MySQL 可以访问的单独文件，然后执行适当的查询并让 MySQL 进行加载。

或者，可能将 Python 代码重新编写为它应该是的（你应该将参数作为值传递，而不是进行字符串操作 - SQL 注入攻击）：

```
query = 'insert into something(a, b, c, d) values(%s, %s, %s, %s)'
with open('file.tab') as fin:
    values = (row.split('\t')[:4] for row in fin)
    cursor.executemany(query, values) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:22:45.667

```
import os
import MySQLdb as mdb
import csv

def read_file():
    file_path = "/home/local/user/Main/Module-1.0.4/file_processing/part-00000.txt"
    with open('part-00000','r') as infile:
        file_open= csv.reader(infile, delimiter='\t')
        cache = []
        for line in file_open:
            cache.append(line)
            if len(cache) > 500:
                yield cache
                cache = []
        yield cache 

conn = mdb.connect(user='root', passwd='redhat', db='Xml_Data', host='localhost', charset="utf8")
cursor = conn.cursor()
query = "insert into PerformaceReport (campaignID, keywordID, keyword, avgPosition) VALUES (%s,%s,%s,%s)"
for rows in read_file():
    try:
        cursor.executemany(query, rows)
    except mdb.Error:
        conn.rollback()
    else:
        conn.commit() 
```

该代码未经测试，可能包含小错误，但应该更快，但不如使用快`LOAD DATA INFILE`。

# c# - 转换字典 到字典 通过使用 LINQ 跳过空值

> ID：13451558
> 
> 赞同：3
> 
> 时间：2012-11-19T10:07:55.157
> 
> 标签：c#, linq, nullable

我有以下`Product`课程：

```
public class Product
{
    public string Name { get; set; }
    public float Price { get; set; }     
    public int? CategoryId { get; set; }
} 
```

`Product`现在我必须计算每个人有多少个`CategoryId`并将它们放在一个`Dictionary<int, int>`. 所以：

```
IQueryable<Product> products = _productServices.GetAll(); //return IQueryable<Product>

Dictionary<int, int> productDict =  products.ToList()
                                            .GroupBy(p => p.CategoryId)
                                            .ToDictionary(pgroup => pgroup.key, pgroup => pgroup.Count()); 
```

问题是我`Dictionary<int?, int>`从`ToDictionary()`. 即使我通过放置来预先过滤空值，`Where(p => p.CategoryId != null)`我也不会将类型更改`CategoryId`为`int`。我还尝试创建匿名类型：

```
products.ToList()
        .GroupBy(p => p.CategoryId)
        .Select(p => new { p.key ?? -1, p.Count() }  
        .ToDictionary(pgroup => pgroup.key, pgroup => pgroup); 
```

但它给出了一个`Invalid anonymous type member declarator`错误。我也试图删除`ToList()`但没有运气。我用谷歌搜索了一下，没有发现有人遇到这个问题，尽管我认为这种情况可能很常见，尤其是在使用**EF**和**databases**时。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T10:12:05.350

那是因为`CategoryId`它是可空的。所以你需要先选择它的[`Value`](http://msdn.microsoft.com/en-us/library/ydkbatt6.aspx)属性：

```
products.ToList()
        .Where(p => p.CategoryId.HasValue)
        .Select(p => p.CategoryId.Value)
        .GroupBy(i => i)
        .ToDictionary(g => g.Key, g => g.Count()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T10:10:44.153

只需使用

```
products.ToList()
    .GroupBy(p => p.CategoryId)
    .Where(pgroup => pgroup.Key.HasValue)
    .ToDictionary(pgroup => pgroup.Key.Value, pgroup => pgroup.Count()); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-19T10:10:03.390

这个怎么样？

```
.ToDictionary(pgroup => pgroup.Key ?? -1, pgroup => pgroup.Count()); 
```

关于匿名类型的语法错误，正确的语法如下：

```
.Select(p => new { Key = p.Key ?? -1, Count = p.Count() }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T10:11:59.827

您需要过滤掉空值，然后使用 的`.Value`属性`int?`作为分组键：

```
products.ToList()
        .Where(p => p.CategoryId.HasValue)
        .GroupBy(p => p.CategoryId.Value)
        .ToDictionary(pgroup => pgroup.key, pgroup => pgroup.Count()); 
```

# javascript - 通过选择`property`属性获取`Meta`属性`content`

> ID：13451559
> 
> 赞同：9
> 
> 时间：2012-11-19T10:08:11.280
> 
> 标签：javascript, jquery, meta-tags

在 jQuery 中，您可以这样做：

```
$("meta[property='fb:app_id']").attr("content"); 
```

这将为您提供带有属性“fb:app_id”的-tag的`content`属性值。`meta``property`

我怎样才能用普通的 Javascript 做到这一点？

先感谢您。:-)

肯尼斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-19T23:05:43.963

恐怕不如 JQuery 优雅......

```
var metaTags=document.getElementsByTagName("meta");

var fbAppIdContent = "";
for (var i = 0; i < metaTags.length; i++) {
    if (metaTags[i].getAttribute("property") == "fb:app_id") {
        fbAppIdContent = metaTags[i].getAttribute("content");
        break;
    }
}

console.log(fbAppIdContent); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-09-12T20:38:10.917

```
document.querySelector('meta[property~="fb:app_id"][content]').content 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-17T04:13:55.427

注意：有些使用`property`属性：

```
<meta property="fb:app_id" content="1234567890"> 
```

而其他人使用该`name`属性：

```
 <meta name="fb:app_id" content="1234567890"> 
```

我使用以下内容从两个变体中获取值：

```
var appId = (function(c) { for (var a = document.getElementsByTagName("meta"), b = 0;b < a.length;b++) {
  if (c == a[b].name || c == a[b].getAttribute("property")) { return a[b].content; } } return false;
})("fb:app_id");

console.log(appId); //(bool)false if meta tag "fb:app_id" not exists. 
```

* * *

同样的方法也可以用于所有其他元标记 - 只需更改闭包函数上的输入值（例如 from`fb:app_id`到`description`）。

* * *

**编辑：**或者作为更通用的功能：

```
function getContentByMetaTagName(c) {
  for (var b = document.getElementsByTagName("meta"), a = 0; a < b.length; a++) {
    if (c == b[a].name || c == b[a].getAttribute("property")) { return b[a].content; }
  } return false;
}

console.log(getContentByMetaTagName("og:title")); 
```

# macos - OSX Kext 没有被正确释放

> ID：13451563
> 
> 赞同：4
> 
> 时间：2012-11-19T10:08:19.400
> 
> 标签：macos, memory-management, device-driver, kernel-extension

我已经为热插拔 SCSI 设备编写了一个设备驱动程序 kext，在某种程度上基于[Wagerlabs 代码](http://wagerlabs.com/blog/2008/02/04/writing-a-mac-osx-usb-device-driver-that-implements-scsi-pass-through/ "Wagerlabs 代码")（使用驱动程序-用户客户端-应用程序模型）并且一切正常。唯一剩下的问题是驱动程序似乎没有被持续释放，尤其是在应用程序崩溃的情况下。例如，当我尝试卸载 kext 时，即使设备断开连接并且应用程序关闭，驱动程序和用户客户端的未完成实例仍然存在（驱动程序的数量通常超过用户客户端）。

我已经登录了类似的驱动程序功能`free()`，当我关闭计算机时，我可以看到这些正在执行，因此显然仍然可以终止实例。什么是确保驱动程序实例被终止和释放的“正确”方法，即使主机应用程序崩溃、不正确终止或事情通常不按计划进行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T10:44:07.473

如果您在没有用户客户端应用程序运行时拥有用户客户端类实例，那么您肯定会更频繁地保留用户客户端实例而不是发布它们。例如，您可能会在主驱动程序类中保留对客户端实例的保留引用。在您的用户客户端类的`stop()`方法中，确保从驱动程序中删除该客户端实例。

另一件需要注意的事情：确保从内置 IOService 方法（例如 等）的覆盖版本调用超类实现`stop()`。`free()`不这样做通常会使 IO Kit 进入不一致的状态。

最后，在 I/O Kit 驱动程序中调试保留泄漏的一个有用技术是通过使用日志版本覆盖方法来实际记录保留和释放：

```
void MyClass::taggedRetain(const void* tag) const
{
    OSReportWithBacktrace(
        "MyClass" CLASS_OBJECT_FORMAT_STRING "::taggedRetain(tag=%p)\n", CLASS_OBJECT_FORMAT(this), tag);
    IOService::taggedRetain(tag);
}
void MyClass::taggedRelease(const void * tag) const
{
    OSReportWithBacktrace(
        "MyClass" CLASS_OBJECT_FORMAT_STRING "::taggedRelease(tag=%p)\n", CLASS_OBJECT_FORMAT(this), tag);
    int count = getRetainCount();
    IOService::taggedRelease(tag);
    if (count == 1)
        printf(
            "MyClass::taggedRelease(tag=%p) final done\n", tag);
    else
        printf(
            "MyClass" CLASS_OBJECT_FORMAT_STRING "::taggedRelease(tag=%p) done\n", CLASS_OBJECT_FORMAT(this), tag);
} 
```

此代码中的宏在标头中定义如下：

```
#define CLASS_OBJECT_FORMAT_STRING "[%s@%p:%dx]"
#define CLASS_OBJECT_FORMAT(obj) myClassName(obj), obj, myRefCount(obj)

inline int myRefCount(const OSObject* obj)
{
    return obj ? obj->getRetainCount() : 0;
}

inline const char* myClassName(const OSObject* obj)
{
    if (!obj) return "(null)";
    return obj->getMetaClass()->getClassName();
}
#endif 
```

我应该解释一下`taggedRetain()`and是and`taggedRelease()`的实际底层实现- 如果您覆盖后者，您将不会看到来自 OSCollections 的任何保留和释放，因为它们使用标记版本（带有非空标记）。`retain()``release()`

不幸的是，生成的回溯`OSReportWithBacktrace()`只是一堆十六进制指针，但您可以使用 gdb 查找它们。

在任何情况下，通过记录对象的保留和释放，您可以检查所有保留并确保它们与正确位置的释放相匹配。注意循环！

# jquery - 如何在 jQuery 中正确克隆元素（适用于 IE7 和 8）

> ID：13451565
> 
> 赞同：0
> 
> 时间：2012-11-19T10:08:23.517
> 
> 标签：jquery, internet-explorer

我有一个[小提琴示例](http://jsfiddle.net/Ynhya/)，说明我如何尝试根据下拉值选择克隆元素，但是它在 IE7 和 8 中不起作用（显示“null”而不是克隆的元素）。谁能看到如何纠正这个？非常感谢。JS代码如下：

```
 // Dropdown select
$('#quantity').live("change", function(){

    $('.questions_clonable:not(:first)').remove();

    // Get value of selection
    var num = $(this).val();

    var cloned_el = $('.questions_clonable').clone();   

    if (num > 1)
    {  
        for (var i = 1; i < num; i++)
        {
            // Assign cloned block to new var
            var new_block = cloned_el;  

            // Bit of a workaround needed to clone properly, reiterating class name
            $('.multiple_questions_container').append('<span class="questions_clonable hidden">'+new_block.html()+'</span>');

        }   
    }
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:39:37.580

IE 不支持 CSS :not 选择器，所以要完成它

改变这个

```
$('.questions_clonable:not(:first)').remove(); 
```

至

```
$('.questions_clonable:not(.questions_clonable:first)').remove(); 
```

[演示](http://jsfiddle.net/Ynhya/5/)

# cakephp - 模型关联无法正常工作

> ID：13451569
> 
> 赞同：1
> 
> 时间：2012-11-19T10:08:37.117
> 
> 标签：cakephp, associations, cakephp-2.0

我有两个模型。PostModel & CommentModel。
我在这些类中定义了两个关系。

```
<?php
class PostModel extends AppModel {
    var $name = 'Post';
    var $hasMany = array(
        'Comment' => array(
            'className' => 'Comment',
            'foreignKey' => 'post_id'
        )
    );
}
 ?> 
```

和

```
<?php 
class CommentModel extends AppModel {
var $name = 'Comment';
var $belongsTo = array(
    'Post' => array(
        'className' => 'Post',
        'foreignKey' => 'post_id'
    )
);
}
?> 
```

在数据库中，我有带有 post_id 列的帖子表和评论表。在 PostController 类中，当我使用此命令获取记录时：

```
$this->set('post',$this->Post->findById($id)); 
```

并调试 $post 数组我看到了这个数组：

```
array(
'Post' => array(
    'id' => '4',
    'title' => 'روز اول دانشگاه',
    'body' => 'سلام. روز اول بود که اومده بودیم '
    'created' => '2012-11-11 21:49:48',
    'modified' => null
)
) 
```

我希望 [comment] 行在此数组中，但没有。

我搜索网络调试我的应用程序，但我无法解决这个问题。！！！！！！

注意：cakephp 版本是 2.2.3 稳定版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T06:42:30.013

您的模型命名不正确。PostModel 应该是带有 posts 表的 Post，CommentModel 应该是带有 comments 表和 post_id 的 Comment。此外，这不起作用，因为您已告诉您的 Comments 模型在帖子表上查找“post_id”作为外键。这对于 Posts hasMany Comments 关系是不正确的，并且由于该列不存在，它将会失败。如果您遵循[Models 的约定](http://book.cakephp.org/2.0/en/models.html#understanding-models)，则实际上不需要将任何内容传递到数组中。ORM 会解决的。

```
class Post extends AppModel {
    public $hasMany = array('Comment');
}
class Comment extends AppModel {
    public $belongsTo = array('Post');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:33:52.140

你使用可容纳的吗？如果没有，请这样做！

public $actsAs = array('Containable');

在你的模型中

接着

```
$this->Post->find('first', array(
    'conditions' => array('Post.id'=>$id), 
    'contain' => array('Comment')); 
```

正如 Dave 指出的那样，您还应该重命名您的模型。所以只需“Post extends AppModel”（Post.php）和“Comment extends AppModel”（Comment.php）来遵循约定。

PS：然后您可以从模型中删除“var $name”。`?>`还从您的 php 文件中删除关闭。最后但同样重要的是，将所有剩余的“var”重命名为“public”。

# python - Numpy 将二进制字符串解包到单个变量中

> ID：13451571
> 
> 赞同：2
> 
> 时间：2012-11-19T10:08:42.847
> 
> 标签：python, numpy, binary, packing

在 Numpy 中，我需要将一些二进制数据解压缩到一个变量中。过去，我一直在使用 Numpy 中的“fromstring”函数对其进行解包并提取第一个元素。有没有办法可以直接将二进制数据解压缩为 Numpy 类型，并避免创建我几乎忽略的 Numpy 数组的开销？

这就是我目前所做的：

```
>>> int_type
dtype('uint32')
>>> bin_data = '\x1a\x2b\x3c\x4d'
>>> value = numpy.fromstring(bin_data, dtype = int_type)[0]
>>> print type(value), value
<type 'numpy.uint32'> 1295788826 
```

我想做这样的事情：

```
>>> value = int_type.fromstring(bin_data)
>>> print type(value), value
<type 'numpy.uint32'> 1295788826 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:23:15.557

```
>>> np.frombuffer(bin_data, dtype=np.uint32)
array([1295788826], dtype=uint32) 
```

虽然这会创建一个数组结构，但实际数据在字符串和数组之间共享：

```
>>> x = np.frombuffer(bin_data, dtype=np.uint32)
>>> x[0] = 1
------------------------------------------------------------
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
RuntimeError: array is not writeable 
```

而`fromstring`会复制它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T10:13:47.670

```
In [16]: import struct

In [17]: bin_data = '\x1a\x2b\x3c\x4d'

In [18]: value, = struct.unpack('<I', bin_data)

In [19]: value
Out[19]: 1295788826 
```

# sql-server - 动态sql查询输入输出值传入变量

> ID：13451576
> 
> 赞同：2
> 
> 时间：2012-11-19T10:08:51.353
> 
> 标签：sql-server, tsql, dynamic-sql

动态传递列名和值并将查询结果获取到另一个变量中。

```
@ColumnName , @SKU_ID are input variables, output data store into @ColumnValue variable.
DECLARE @ColumnName
char(50)
DECLARE @SKU_ID
varchar(50)
DECLARE @ColumnValue
varchar(150)
DECLARE @Sqlcommand
nvarchar(1000)
DECLARE @ColumnData
varchar(50)

SET @ColumnName = 'Color_Code'
SET @SKU_ID  = 'W16933'

SET @Sqlcommand = 'SELECT @ColumnData ='+@ColumnName+ 'FROM Stagetable WHERE SKU_ID = @SKU_ID' 
exec sp_executesql @Sqlcommand, N'ColumnData varchar(50) out' , @ColumnValue out 
```

# 我低于错误

消息 102，级别 15，状态 1，第 1 行 'ColumnData' 附近的语法不正确。Msg 137, Level 15, State 1, Line 1 必须声明标量变量“@ColumnData”。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:12:25.973

您需要在变量声明前加上`@`

```
exec sp_executesql 
    @Sqlcommand, 
    N'@ColumnData varchar(50) out, @SKU_ID varchar(50)' , 
    @ColumnValue out, @SKU_ID 
```

# android - 如何在android中修改已经发送的广播

> ID：13451579
> 
> 赞同：3
> 
> 时间：2012-11-19T10:09:02.013
> 
> 标签：android, broadcastreceiver, broadcast

我在我的 SMS 调度应用程序中使用广播接收器。我想修改已经发送的广播。我应该怎么做才能编辑或删除已经发送的广播？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:17:43.703

这些链接将帮助你。 [广播成本接收器](http://developer.android.com/reference/android/content/BroadcastReceiver.html)，

[http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

[http://www.techrepublic.com/blog/app-builder/an-android-coders-introduction-to-broadcast-receivers/1173](http://www.techrepublic.com/blog/app-builder/an-android-coders-introduction-to-broadcast-receivers/1173)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:17:44.120

我认为已经发送的广播无法编辑。您可以重新发送正确的数据。

# python-2.7 - 从另一个模块访问模块的功能，该模块本身导入第一个模块

> ID：13451582
> 
> 赞同：0
> 
> 时间：2012-11-19T10:09:06.193
> 
> 标签：python-2.7, tkinter, importerror

抱歉标题令人困惑，我试图在标题中尽可能多地解决问题。

* * *

### 场景：

我有一个模块（比如`ModuleA`），其中包含一些 Tkinter GUI 元素的类定义。这些元素还具有与其绑定/绑定的某些事件/功能（例如`'<Button-1>','<Button-2>'...`.

现在有另一个模块（比如说`ModuleB`）。这是程序的主要（核心）。在这个模块中，我导入`ModuleA`以使用它的对象。的对象`ModuleA`在数组中占有一席之地（例如`Array1`）；还有另一个数组（比如`Array2`），它只存储 的每个对象的一个​​数据成员的值`Array1`，这些是由`Event Bindings`.

所以问题是，当一个`Event`发生时，对象（存储在 中`Array1`）会`ModuleA`根据需要进行视觉响应，但在后端它们相应的数据成员值也必须相应地更新`Array2`。

* * *

### 简而言之：

```
#ModuleA.py

from ModuleB import foo

class bar
    data = 1
    # some tkinter code 
    # bind mouse click to function foo of ModuleB

-------------------------------------------------------

#ModuleB.py

from ModuleA import bar

Array1 = [objects of class bar]
Array2 = [value of data of objects in Array1]

def foo(#obj of class bar)
    # find index of bar object which called this function in Array1
    # accordingly change Array2 
```

* * *

### 我尝试了什么：

在`Event Bindings`of 的对象中，`ModuleA`我添加了所需的函数（比如`foo`），它将处理所需的数组操作，并定义`ModuleB`为它必须处理`Array2`of `ModuleB`。但这给了我一个错误`global name 'foo' is not defined`

`ModuleA`所以在我添加的类定义中`global foo`，这也没有解决它。

最后我尝试插入`ModuleA`

```
from ModuleB import foo 
```

这提出了一个`ImportError`说法，它不能导入 foo（我猜这是因为`ModuleB`它本身正在导入`ModuleA`因此循环引用）

* * *

### 一个解法

一种清晰可见的解决方案是将整个`ModuleA`（包含类定义）复制到`ModuleB`. 但这并不总是实用的，也不是太 Pythonic。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:04:30.030

实际上你做错了，因为假设有两个模块 moduleA 和 moduleB。如果您将 moduleA 导入到 moduleB 中，那么如果您尝试执行此操作，则无法将 moduleB 导入到 moduleA 中，您应该会收到 Import 错误。

让我们看看你正在做的错误方式

下面是moduleA.py

```
import moduleB
print " I am moduleA"
class foo():
     pass 
```

这是模块B.py

```
from  moduleA import foo
print "I am moduleB" 
```

现在执行 moduleB.py

```
python moduleB.py 
```

你会得到 ImportError ，但如果你这样做就不会发生

```
python moduleA.py 
```

上面的过程是错误的，python 不允许这种类型的导入，这里我们正在创建导入循环，因为在每次第一次导入时，都会执行整个模块的顶级代码，当然 python 不会允许这样做。

要解决您的问题，只需更改模块层次结构。

这是简单的解决方案：如果您想要两个模块（模块A和模块B）的内容，只需再创建一个模块模块C并在模块C中导入两个模块（模块A和模块B）并做您必要的事情。

请参考编辑过的东西，你在做同样的事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:01:58.547

Python 中的循环导入可能会令人困惑。很容易出错，因此如果可能的话，通常最好避免它们。但是，它们并不违法，如果您小心，它们可以正常工作。

当您键入以下内容时，导入过程的工作方式如下`import foo`：

1.  首先，Python 检查`sys.modules`字典以查看模块`foo`是否已经加载。如果是这样，则预先存在的模块只需放入当前模块的名称空间中（并且该过程会停在那里）。
2.  如果没有，它会检查是否`foo.py`可以找到要加载的文件。如果不存在，`ImportError`则引发 an 并停止该过程。
3.  如果找到文件，则会创建一个新的空模块对象并将其放入`sys.modules`name 下`foo`。
4.  然后，Python 打开文件并开始执行它，使用在步骤 3 中创建的模块对象作为本地命名空间。

现在，如果`foo`上面描述的模块有它自己的`import`语句，导入过程可以递归，在继续执行`foo`模块代码之前加载另一个模块。但是，由于在处理任何更多导入之前将空模块对象添加到`sys.modules`字典中，因此它永远不会一直循环并尝试多次加载同一个文件（在大多数情况下）。

有几件事可能会出错。

如果`foo`作为脚本执行（而不是由其他模块导入），它的初始条目`sys.modules`将在名称下`__main__`而不是`foo`. 这意味着如果`foo`从其他地方导入，您最终会得到相同代码的两个副本。这是一个模块不会被加载两次的一般规则的一个例外，在某些情况下它会让你措手不及。

此外，如果您的循环导入的模块正在相互进行顶级访问，那么如果它们以错误的顺序（或任何顺序，如果它们都以错误的方式从顶层）。您可以通过确保在模块加载时运行尽可能少的代码来避免大多数问题（改为将其放入函数中！）。然后在加载完所有内容后，从定义明确的入口点调用函数。

因此，在您的情况下，我将检查以下内容：

1.  你需要做什么`from moduleB import foo`？您可以改为稍后`import moduleB`访问吗？`moduleB.foo`这将是最简单的解决方法（尽管它不会解决所有可能的问题）。
2.  您是否需要在模块的顶层工作？通常，您可以将对象创建放入工厂函数中，而不是在顶层（这使得解决方案 #1 更频繁地工作）。无论如何，这可能是一个很好的设计理念，因为如果您希望能够更改（或自定义）它们在运行时创建对象的方式（您只需编写第二个工作方式不同的函数，或者添加工厂的论据）。
3.  您能否将部分代码从不需要导入其中任何一个的第三个模块中移出`ModuleA`或移入，从而消除循环导入的需要？`ModuleB`这通常是一个好主意，因为它可以让您回避何时加载的整个问题。

**编辑**：这是您的模块的固定版本可能的样子：

模块A.py：

```
import ModuleB

class bar():
    def __init__(self, data):
        self.data = data
        # do something here that accesses ModuleB.foo 
```

模块B.py：

```
import ModuleA

def foo():
    # do whatever

Array1 = [ModuleA.bar(i) for i in range(10)]
Array2 = [whatever] 
```

主要.py：

```
import ModuleB # import order is important here!
import ModuleA

if __name__ == "__main__":
    # do stuff 
```

这应该是最小的修复。ModuleA 只能`ModuleB.foo`从`bar`类的`__init__`方法内访问，因此只要在创建任何实例`ModuleB.foo`之前定义，循环导入就可以正常工作。`bar`

如果您希望导入以任何顺序工作，那就有点棘手了。您不希望在模块的顶层完成任何工作：

ModuleA.py 如上。

模块B.py：

```
import ModuleA

def foo():
    #do stuff

def setupArrays():
    global Array1, Array2 # lets us create these global variables

    Array1 = [ModuleA.bar(i) for i in range(10)]
    Array2 = [whatever] 
```

主要.py：

```
import ModuleA, ModuleB  # import order doesn't matter

if __name__ == "__main__":
    ModuleB.setupArrays()
    # do stuff 
```

这仍然是一个小问题。如果你能完全打破循环导入，也许代码可以以更明显的方式简化。例如，我们可以将回调函数作为参数传递给`bar`类的构造函数：

模块A.py：

```
# No import statement here! Circular imports avoided!

class bar():
    def __init__(self, data, callback):
        self.data = data
        # bind stuff to call the callback function provided 
```

模块B：

```
import ModuleA

def foo():
    # do whatever

Array1 = [ModuleA.bar(i, foo) for i in range(10)]
Array2 = [whatever] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:47:05.837

你应该检查这个链接：[http](http://effbot.org/zone/import-confusion.htm) ://effbot.org/zone/import-confusion.htm 有一段有趣的段落是关于如何通过移动模块末尾的 import 语句来处理循环引用。但是恕我直言，不要尝试处理那件事，只需重构您的代码；）

# ruby-on-rails - Ruby on Rails 获得所有评论

> ID：13451583
> 
> 赞同：3
> 
> 时间：2012-11-19T10:09:08.913
> 
> 标签：ruby-on-rails, ruby, activerecord, many-to-many, polymorphic-associations

我有一个（多态）对象`Comment`（将用于`Vehicle`和`Review`对象）。我怎样才能得到所有`comments`的`User`s `Vehicle`: `@user.vehicles.comments`？它说该方法`comments`未定义`ActiveRecord::Relation`。有什么简单的方法让它工作吗？是否是多对多关系：很多车辆有很多评论？还是我错了？`@user.vehicles.first.comments`工作正常。

对象之间的关系（不完整）：

```
User 
has_many Vehicles. 

Vehicle 
belongs_to User. 
has_many Comments (as commentable). 

Comment 
belongs_to Commentable, :polymorphic => true 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T11:44:03.680

它的评论部分很好。问题是 - 你在打电话：

```
@user.vehicles.comments 
```

在这里，车辆是一个 AR 关系对象，它对评论一无所知。ie - @user.vehicles 是该用户的车辆集合。

要获取与用户关联的车辆的所有评论，您可以执行以下操作：

```
@user.vehicles.to_a.collect{|v| v.comments.to_a }.flatten 
```

这将返回有关任何用户车辆的所有评论的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:27:44.163

试试这个：

在 user.rb 中写下：

```
 has_many :comments, :through => :vehicles 
```

现在做

```
 @user.comments 
```

它将获取为您的车辆创建的所有评论

您还可以通过以下方式获取评论：

```
 @user.vehicles(:include => :comments).collect{|v| v.comments}.flatten 
```

但在我看来，这不是正确的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T10:37:04.947

我认为您正在尝试进行复杂的关联，或者您可能误解了多态关联。它比你想象的要简单。这是您应该定义的关联：

```
User 
has_many vehicles 

Vehicle 
belongs_to user 
has_many comments, as: :commentable

Comment 
belongs_to :commentable, polymorphic: true 
```

要获取用户车辆的所有评论，您可以`has_many :through`在用户模型中定义关联：

```
User 
has_many vehicles 
has_many comments, through: :vehicles 
```

现在您可以使用`@user.comments`获取有关用户车辆的所有评论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T10:37:13.487

试试这个：

在用户模型中添加：

```
has_many :comments, :through => :vehicles 
```

编辑车辆和评论：

在用户模型中：

```
has_many :comments, :through => :vehicles, :as => :comments_vehicles
has_many :comments, :through => :reviews, :as => :comments_reviews

def comments
  self.comments_vehicles + self.comments_reviews
end 
```

# erlang - supervisor:start_child 的返回值 {ok, Child, Info} 中的 Info 来自哪里？

> ID：13451588
> 
> 赞同：3
> 
> 时间：2012-11-19T10:09:19.167
> 
> 标签：erlang, erlang-otp, erlang-supervisor

我从 Erlang 文档中看到 supervisor:start_child 可以返回两个不同的非错误结果：{ok, Child} 和 {ok, Child, Info}。此信息在哪里设置？simple_one_for_one sups 与其他sups 有什么不同吗？我无法找到有关此的示例/文档...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T10:15:25.020

`Info` comes from the function that starts the child process (as given in the child specification in the supervisor). Most of the time, that function will eventually call [gen_server:start_link/4](http://www.erlang.org/doc/man/gen_server.html#start_link-4) which only returns `{ok, Pid}` and never `{ok, Pid, Info}`, so that case only applies when you have a custom function for spawning the process, probably using the functions in [the proc_lib module](http://www.erlang.org/doc/man/proc_lib.html).

Processes that don't use a pre-defined behaviour are called "special processes" and are [described in the OTP Design Principles User's Guide](http://www.erlang.org/doc/design_principles/spec_proc.html#id72588).

# unit-testing - “element(selector, label).query(fn)”方法在 Angular E2E 测试中如何工作？

> ID：13451594
> 
> 赞同：4
> 
> 时间：2012-11-19T10:09:39.723
> 
> 标签：unit-testing, angularjs, bdd, acceptance-testing

**在为Angular Scenario Runner**编写 E2E 测试时，我遇到了一种`query()`方法：

```
element(selector, label).query(fn) 
```

[文档](http://docs.angularjs.org/guide/dev_guide.e2e-testing)说：

> 执行函数 fn(selectedElements, done)，其中 selectedElements 是与给定 jQuery 选择器匹配的元素，而 done 是在 fn 函数末尾调用的函数。标签用于测试输出。

所以我为我的html页面上的一组按钮写了一个it-case：

```
it('should display all buttons on page load', function () {
    var buttonText = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'];
    element('button', 'UI elements').query(function (selectedElements, done) {
        selectedElements.each(function (idx, elm) {
            expect(elm.innerText in buttonText).toEqual(true);
        });
        done();
    });
}); 
```

作为测试执行的结果，我收到了一个包含 10 个失败的期望子句的列表：

> 预期为真但未定义

中间调试表明`elm.innerText in buttonText`情况属实。

所以我的问题是，出了什么问题？是不是`done()`方法的错误使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T18:01:07.810

您不能在 element().query() 函数中调用 expect()。

但是您可以执行以下操作

```
var promise = element('SELECTOR').query(function(selectedElements, done) {
    // We are in JQuery land.
    if (selectedElements < 1) {
      done('ERROR MESSAGE')
    } else {
      done(null, selectedElements[0].innerText)
    }
    // For documentation only.
    // Don't return anything... just continue.
    done()
})
expect(promise).toEqual('i am waiting for you') 
```

您可以将 promise 和 expect 组合成一个调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:40:18.110

除了 'expect' 行之外，代码看起来是正确的：

```
expect(elm.innerText in buttonText).toEqual(true); 
```

“期望”的参数是未来。从文档中，由于*所有 API 语句都返回一个未来对象*，因此`elm.innerText`返回一个未来，但`elm.innerText in buttonText`没有，导致未定义。也许，编码的方式是：

```
expect(elm.innerText).toMatch(/\d/); 
```

# math - 导出透视投影平面

> ID：13451597
> 
> 赞同：1
> 
> 时间：2012-11-19T10:09:50.003
> 
> 标签：math, graphics, matrix

给定透视投影矩阵和投影中心，如何推导出投影平面？例如，让我们假设透视投影矩阵是一个 4x4 齐次矩阵：

```
1 0 0 0
0 1 0 0
0 0 1 0
0 2 0 0 
```

和投影的中心 [0, 0, 0]。从这些数据中可以清楚地看出每个点是如何投影到投影平面中的。但是如何使用这些数据来找到投影平面的精确方程/表示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T00:45:29.273

与“投影中心”（即相机在 3D 场景中的有效位置）不同，在图像投影到的概念平面的意义上，不需要具体的“投影平面”。

相反，投影矩阵确定了到“剪辑空间”的变换，该变换确定了视口边界和深度映射，从中进一步缩放`x`和`y`偏移坐标以获得目标像素位置。但是，这些都不能转化为场景中的实际平面，该平面以某种方式对应于物理相机的焦平面。

您可以从相机矩阵中导出相关平面：

*   `w=0`平面，即投影矩阵的第四行。该平面通过投影中心，将相机前面的点与后面的点分开；平面上的任何点都不`w=0`可见。在您的示例中，该平面为`0 2 0 0`，即 XZ 坐标平面。

*   `z=0`平面，即投影矩阵的第三行。结合`w=0`平面，它决定了深度映射函数和近/远裁剪平面。在您的示例中，该平面为`0 0 1 0`，即 XY 坐标平面。

相机矩阵的其余行也代表平面：第一行和第二行分别是`x=0`和`y=0`平面。从某种意义上说，它们根本不像`w=0`平面那么具体；传统上，它们将剪辑空间（和视锥）分成象限。`w=0`它们通过对平面坐标求和和差来确定视锥体的水平和垂直边界平面。

`x=0`“投影中心”是、`y=0`和`w=0`平面（即投影矩阵的第一行、第二行和第四行）的交点。我应该注意，这表明您的示例是一个非常规的配置：“投影中心”没有明确定义，并且您的所有点都将使用剪辑空间坐标进行映射，例如 ，`y/w = 1/2`通常是四分之一的水平线屏幕下方。另请注意，通常，`z=0`平面应平行于`w=0`平面，仅在无穷远处相交（而不是沿 X 轴，如您的示例中所示）。

近和远裁剪平面是根据图形系统的裁剪空间约定从`z=0`和平面派生的：`w=0`

*   OpenGL的深度裁剪是`z/w = [near=-1, far=+1]`
    *   它的近剪裁平面是上述平面`w=0`和`z=0`平面的总和（`0 2 1 0`在您的示例中）
    *   它的远剪辑平面是它们的区别（`0 2 -1 0`在示例中）
*   DirectX 的深度裁剪是`z/w = [near=0, far=-1]`
    *   它的近剪裁平面是`z=0`平面（`0 0 1 0`在您的示例中）
    *   并且它的远剪辑平面是两者的总和（`0 2 1 0`在您的示例中，与 OpenGL 近剪辑平面相同）

# visual-studio-2008 - Reporting Services 设计器中的字体不可用？

> ID：13451599
> 
> 赞同：0
> 
> 时间：2012-11-19T10:09:55.433
> 
> 标签：visual-studio-2008, reporting-services, fonts

我们使用 Visual Studio 2008 中的报告服务设计器设计了一份报告，该报告碰巧使用了非标准 TrueType 字体（即不是随 Microsoft 产品安装的字体）。

该字体已部署并可在 Microsoft Word 等应用程序中使用，但无论出于何种原因，在*一些*机器上，该字体在设计器或查看器中均不可用。该字体显示在“控制面板”>“字体”中，并报告它支持“打印和预览”的可嵌入性。

为什么会这样？显而易见的结论是机器有些“不同”，但我不知道从哪里开始寻找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:06:47.637

在这种情况下，丢失的字体是通过登录脚本安装的。通过控制面板删除字体并重新安装字体（通过拖放，而不是登录脚本）似乎已经解决了这个问题。

# mysql - 如何在 MySQL 的 CONCAT 中使用 GROUP_CONCAT

> ID：13451605
> 
> 赞同：129
> 
> 时间：2012-11-19T10:10:09.410
> 
> 标签：mysql, concat, group-concat

如果我在 MySQL 中有一个包含以下数据的表：

```
id       Name       Value
1          A          4
1          A          5
1          B          8
2          C          9 
```

如何将其转换为以下格式？

```
id         Column
1          A:4,5,B:8
2          C:9 
```

我想我必须使用`GROUP_CONCAT`. 但我不确定它是如何工作的。

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-11-19T10:33:11.880

```
select id, group_concat(`Name` separator ',') as `ColumnName`
from
(
  select 
    id, 
    concat(`Name`, ':', group_concat(`Value` separator ',')) as `Name`
  from mytbl
  group by 
    id, 
    `Name`
) tbl
group by id; 
```

你可以在这里看到它的实现：[**Sql Fiddle Demo**](http://sqlfiddle.com/#!9/42f994/1)。正是你需要的。

**分两步**更新拆分。**首先，我们得到一个表，其中所有值（逗号分隔）都针对唯一的 [Name,id]。然后从获得的表中，我们将所有名称和值作为每个唯一 id 的单个值查看这里解释的[**SQL Fiddle Demo**](http://sqlfiddle.com/#!9/42f994/4)（向下滚动，因为它有两个结果集）**

 ****编辑**阅读问题时出错，我只按id分组。但是如果（值将按名称和 id 分组，然后按 id 分组）则需要两个 group_contacts。**以前的答案是**

```
select 
id,group_concat(concat(`name`,':',`value`) separator ',')
as Result from mytbl group by id 
```

你可以在这里看到它的实现：[**SQL Fiddle Demo**](http://sqlfiddle.com/#!9/42f994/3)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-19T10:20:56.030

尝试：

```
CREATE TABLE test (
  ID INTEGER,
  NAME VARCHAR (50),
  VALUE INTEGER
);

INSERT INTO test VALUES (1, 'A', 4);
INSERT INTO test VALUES (1, 'A', 5);
INSERT INTO test VALUES (1, 'B', 8);
INSERT INTO test VALUES (2, 'C', 9);

SELECT ID, GROUP_CONCAT(NAME ORDER BY NAME ASC SEPARATOR ',')
FROM (
  SELECT ID, CONCAT(NAME, ':', GROUP_CONCAT(VALUE ORDER BY VALUE ASC SEPARATOR ',')) AS NAME
  FROM test
  GROUP BY ID, NAME
) AS A
GROUP BY ID; 
```

SQL 小提琴：[http ://sqlfiddle.com/#!2/b5abe/9/0](http://sqlfiddle.com/#!2/b5abe/9/0)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-22T13:20:36.257

```
SELECT ID, GROUP_CONCAT(CONCAT_WS(':', NAME, VALUE) SEPARATOR ',') AS Result 
FROM test GROUP BY ID 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-08-14T16:55:15.307

首先，我看不出 ID 不唯一的原因，但我想这是一个连接到另一个表的 ID。其次，不需要子查询，这会破坏服务器。您在一个查询中执行此操作，如下所示

```
SELECT id,GROUP_CONCAT(name, ':', value SEPARATOR "|") FROM sample GROUP BY id 
```

你得到快速和正确的结果，你可以用分隔符“|”分割结果。我总是使用这个分隔符，因为不可能在字符串中找到它，因此它是唯一的。有两个 A 没有问题，您只识别值。或者你可以再多一列，带字母，这样会更好。像这样 ：

```
SELECT id,GROUP_CONCAT(DISTINCT(name)), GROUP_CONCAT(value SEPARATOR "|") FROM sample GROUP BY name 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-17T07:04:55.493

```
 SELECT id, GROUP_CONCAT(CONCAT_WS(':', Name, CAST(Value AS CHAR(7))) SEPARATOR ',') AS result 
    FROM test GROUP BY id 
```

您必须使用 cast 或 convert，否则将返回 BLOB

结果是

```
id         Column
1          A:4,A:5,B:8
2          C:9 
```

您必须通过 python 或 java 等程序再次处理结果

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-06T18:05:32.427

```
SELECT 
    id, 
    Group_concat(`column`) 
FROM
    (SELECT 
        id, 
        Concat(`name`, ':', Group_concat(`value`)) AS `column` 
    FROM mytbl 
    GROUP  BY id, name) tbl 
GROUP BY id; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-28T09:35:30.763

`IF OBJECT_ID('master..test') is not null Drop table test`

```
CREATE TABLE test (ID INTEGER, NAME VARCHAR (50), VALUE INTEGER );
INSERT INTO test VALUES (1, 'A', 4);
INSERT INTO test VALUES (1, 'A', 5);
INSERT INTO test VALUES (1, 'B', 8);
INSERT INTO test VALUES (2, 'C', 9);

select distinct NAME , LIST = Replace(Replace(Stuff((select ',', +Value from test where name = _a.name for xml path('')), 1,1,''),'<Value>', ''),'</Value>','') from test _a order by 1 desc 
```

我的表名是 test ，对于连接，我使用 For XML Path('') 语法。stuff 函数将一个字符串插入到另一个字符串中。它在开始位置删除第一个字符串中指定长度的字符，然后将第二个字符串插入到开始位置的第一个字符串中。

STUFF 函数如下所示： STUFF (character_expression , start , length ,character_expression )

character_expression 是字符数据的表达式。character_expression 可以是常量、变量或字符或二进制数据的列。

start 是一个整数值，指定开始删除和插入的位置。如果 start 或 length 为负数，则返回空字符串。如果 start 比第一个 character_expression 长，则返回一个空字符串。start 可以是 bigint 类型。

length 是一个整数，指定要删除的字符数。如果长度比第一个 character_expression 长，则删除直到最后一个 character_expression 中的最后一个字符。长度可以是 bigint 类型。**

# iphone - 计数地图别针

> ID：13451608
> 
> 赞同：0
> 
> 时间：2012-11-19T10:10:25.510
> 
> 标签：iphone, objective-c, ios, mapkit

我有一个地图应用程序，当用户移动到某些位置时插入地图针，我的问题是我如何计算用户经过或在同一个地方的次数。

在以下示例中有：

用户已在（纬度，经度）地点 A 上五次。

这是我到目前为止的代码：

> ```
> [outletMapView setMapType:MKMapTypeStandard];
>                     [outletMapView setZoomEnabled:YES];
>                     [outletMapView setScrollEnabled:YES];
> 
>                     MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
>                     region.center.latitude = [[eachObject objectForKey:@"latitudeFrom"] floatValue];
>                     //NSLog(@"latitudeFrom=%f",[[eachObject objectForKey:@"latitudeFrom"] floatValue]);
>                     region.center.longitude = [[eachObject objectForKey:@"longitudeFrom"] floatValue];
>                     //NSLog(@"longitudeFrom=%f",[[eachObject objectForKey:@"longitudeFrom"] floatValue]);
>                     region.span.longitudeDelta = 6;
>                     region.span.latitudeDelta = 7;
>                     [outletMapView setRegion:region animated:YES];
>                     /////
>                     float longitude = [[eachObject objectForKey:@"latitudeFrom"] floatValue];
>                     float latitude = [[eachObject objectForKey:@"longitudeFrom"] floatValue];
> 
>                     CLLocationCoordinate2D locationco = {latitude,longitude};
> 
>                     ann = [[DisplayMap alloc] init];
>                     ann.coordinate = locationco;
>                     ann.title = [eachObject objectForKey:@"setDepartureAirportOrCode"];
> 
>                     int count=0;
>                     for(int j = aux; j < [objects count]; j++){
>                         for(int k = j+1;k < [objects count]-j;k++){
>                             NSMutableDictionary *item1 = [objects objectAtIndex:j];
>                             NSMutableDictionary *item2 = [objects objectAtIndex:k];
> 
>                             NSString *str1 = [item1 valueForKey:@"setDepartureAirportOrCode"];
>                             NSString *str2 = [item2 valueForKey:@"setDepartureAirportOrCode"];
>                            // NSLog(@"%@==%@ ???",str1,str2);
>                             if([str1 isEqualToString:str2])
>                                  NSLog(@"%@==%@ MATCH!!!",str1,str2);
>                                 count++;
>                         }
>                     }
> 
>                     /* Contagem */
> 
>                     ann.subtitle = [NSString stringWithFormat:@"%d",count];
>                     ann.coordinate = region.center;
>                     [outletMapView addAnnotation:ann]; 
> ```

对不起，我的英语很差，请不要降价，任何问题或疑问都会问我，我总是在线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:48:53.813

您可以在每个引脚周围设置一个区域，并告诉 cllocationmanager 在设备接近时告诉您。

```
CLLocationAccuracy acc = kCLLocationAccuracyNearestTenMeters;
[self.locationManager startMonitoringForRegion:aRegion desiredAccuracy:acc]; 
```

当您收到回调（委托方法`didEnterRegion`）时，您可以增加一个计数器

```
- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region
{
   NSLog(@"GeoFence: didEnterRegion");    
} 
```

我会留给你来计算你需要为每个区域增加哪个计数器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:17:44.473

您已经使用 [objects count] 获得了引脚数。

# c# - 在 C# 中将船向后和向前移动到船的方向

> ID：13451609
> 
> 赞同：1
> 
> 时间：2012-11-19T10:10:25.837
> 
> 标签：c#, xna-4.0

我正在尝试编写两个合适的键来以合适的速度更新船舶前进/后退方向的位置，我想出的是：在 Cmodel 中：

```
//Update method
        public void Update(Vector3 position, Vector3 orientation)  
        {

            //TO DO - Create an updated version of this.local matrix

            this.local *= Matrix.CreateFromYawPitchRoll(orientation.Y, orientation.X, orientation.Z);

            this.local *= Matrix.CreateTranslation(position.X, position.Y, position.Z);
        } 
```

比在 Game1 中：

```
 protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        // TODO: Add your update logic here
        //Update the camera
        camera.Update();

       KeyboardState keyState = Keyboard.GetState();

        // The time since Update was called last.
        float elapsed = (float)gameTime.ElapsedGameTime.TotalSeconds;

        float RotationAngle = 0;
        RotationAngle += elapsed;
        float circle = MathHelper.Pi * 2;
        RotationAngle = RotationAngle % circle;

        Vector3 orientation = new Vector3(0, 0, 0);
        Vector3 position = new Vector3(0, 0, 0);

        if (keyState.IsKeyDown(Keys.W))
            orientation.X = RotationAngle;

        if (keyState.IsKeyDown(Keys.S))
            orientation.X = -RotationAngle;

        if (keyState.IsKeyDown(Keys.A))
            orientation.Y = RotationAngle;

        if (keyState.IsKeyDown(Keys.D))
            orientation.Y = -RotationAngle;

        if (keyState.IsKeyDown(Keys.Z))
            orientation.Z = RotationAngle;

        if (keyState.IsKeyDown(Keys.X))
            orientation.Z = -RotationAngle;

        //TO DO - Code two suitable keys to update position in the forward/backward direction of Ship travel at a suitable velocity

        if (keyState.IsKeyDown(Keys.F))
            position.Z = 1f;
        if (keyState.IsKeyDown(Keys.B))
            position.Z = 1f;

        //Update the first model i.e. the Ship
        scene[0].Update(position, orientation);

        base.Update(gameTime);
    } 
```

问题是当我向左或向右旋转船头时，这些按钮仍然像向后和向前一样朝着我（相机）工作。我要添加什么让它在船“鼻子”的方向前后移动？

回答！！！！我所要做的就是将矩阵与不同的矩阵相乘：首先旋转而不是平移，最后是本地！！！谢谢大家的回答。它真的很重要！

```
this.local = Matrix.CreateFromYawPitchRoll(orientation.Y, orientation.X, orientation.Z) * Matrix.CreateTranslation(position.X, position.Y, position.Z) * this.local; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:36:44.590

我可能不正确，因为我已经在 AS3 中这样做了。

当你旋转船时，你需要重新计算它的运动。

为简化起见，如果只有`X`和`Y`，并且该按键使您移动 10 个单位（无论您的单位是什么（例如像素））。当您将船旋转到某个角度时，您需要重新计算它在两个轴上`X`的运动。`Y`

他的移动函数如下所示：

```
Ship.X += Math.Cos(currentAngle) * Ship.DefaultMoveUnits;
Ship.Y += Math.Sin(currentAngle) * Ship.DefaultMoveUnits; 
```

的原理相同`XYZ`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:33:23.810

记住你在学校的数学课！你的“船”在某一点，你有你想要移动它的速度/距离和角度。这是一些帮助的伪代码：

```
float a = math.rad(angle);
float newX = currentX + math.sin(a) * distanceToMove;
float newZ = currentZ - math.cos(a) * distanceToMove; 
```

这是一个基本的向量计算，但我现在不确定轴，但如果你稍微修改一下 X、Y 和 Z，你应该弄清楚！抱歉，如果上面的公式是错误的，那是很久以前的事了，因为我实际上是这样计算的；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:53:44.407

为了前进，您需要了解船的方向。这不是问题，因为您已经在代码中设置了方向：`Matrix.CreateFromYawPitchRoll(orientation.Y, orientation.X, orientation.Z);`
使用此 RotationMatrix 您可以提取船头指向的方向所需的值：

```
//this method uses 'orientation' as the current orientation of the ship
public Vector3 GetForward()
{
    Matrix rotation = Matrix.CreateFromYawPitchRoll(orientation.Y, orientation.X, orientation.Z);
    //i don't know the matrix structure of XNA, but it should be possible
    //to access each field seperately
    //M13 is here: row 1, column 3
    //M23 is here: row 2, column 3 and so on
    return new Vector3(rotation.M13, rotation.M23, rotation.M33);
}

//now that you got the appropriate vector
//you just can move into the direction of this vector like
Vector3 position = new Vector3(0, 0, 0);
if(keyState.IsKeyDown(Keys.F))
{
    position += ship.GetForward();
}

position *= elapsed;

//update the position of the ship here 
```

您可以使用相同的方法获得右向量和上向量，只需使用旋转矩阵的其他列：

```
public Vector3 GetRight()
{
    Matrix rotation = Matrix.CreateFromYawPitchRoll(orientation.Y, orientation.X, orientation.Z);
    return new Vector3(rotation.M11, rotation.M21, rotation.M31);
}

public Vector3 GetUp()
{
    Matrix rotation = Matrix.CreateFromYawPitchRoll(orientation.Y, orientation.X, orientation.Z);
    return new Vector3(rotation.M12, rotation.M22, rotation.M32);
} 
```

您可以通过否定相应的向量来获得所有其他方向（向后、向左、向下）。所以要得到你使用的向后方向`-GetForward()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T19:52:29.483

为了让它工作，我所要做的就是改变矩阵乘法：

this.local = Matrix.CreateFromYawPitchRoll(orientation.Y,orientation.X,orientation.Z) * Matrix.CreateTranslation(position.X, position.Y, position.Z) * this.local;

# mysql - 我需要用数据库将表设置为 utf 吗？

> ID：13451618
> 
> 赞同：0
> 
> 时间：2012-11-19T10:10:48.193
> 
> 标签：mysql, utf-8

我想将表格的字符编码设置为 UTF-8。所以我计划将数据库设置为 UTF-8 而不是表。

我的问题是，如果我将 UTF-8 设置为数据库，默认该数据库下的所有表也都使用 utf-8？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:28:02.520

默认排序规则就是这样，只是一个默认值，因此当您创建一个没有排序规则信息的表时，该表将使用默认值。特别是，设置数据库默认值*无法*完成两件事：

*   更改现有表的编码
*   强制新表使用这种编码

# zooming - 结合 Highstock ，想设置合适的缩放对象

> ID：13451621
> 
> 赞同：0
> 
> 时间：2012-11-19T10:10:55.367
> 
> 标签：zooming, highstock

我有一个 highstock 图表，其中包含一个堆积柱 + 一条样条线。我对底部显示的预览有一些问题：它既不是堆叠列也不是样条线，我想将其设置为其中之一（最好是堆叠列）。根据我的猜测，highstock 会为它们的组合提供预览，但我不确定。请帮忙！ ![在此处输入图像描述](../Images/03035dd97ac949ebd91284b44e800cd2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:03:59.697

导航器：{ baseSeries：'样条线'，高度：35 }，

'spline' 是我要在预览中渲染的系列的 ID

# c# - 从 StackTrace 中过滤掉非用户代码方法

> ID：13451622
> 
> 赞同：7
> 
> 时间：2012-11-19T10:11:05.900
> 
> 标签：c#, asp.net, .net

我正在尝试实现更复杂的错误处理。为了实现我的目标，我需要从当前的 StackTrace 中过滤掉非用户代码方法（帧）。

在 ASP.NET 典型的 StackTrace 中，您可能会猜到许多方法与调试目的完全无关，因为它们在用户代码之外。Visual Studio 为您提供了过滤掉这个非用户代码（帧）的选项，所以我猜测它是可能的。然而，在探索 StackFrames（以及方法、模块、程序集……）的方法和属性大约 30 分钟后，我找不到任何可用于识别“系统”框架的内容。

我最终手动指定了要记录的模块（模块是程序集的一部分，在我的情况下为 1:1）。

有没有更好的方法来做到这一点？只需包含核心 ASP.NET 之外的所有内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T10:25:52.117

`StackFrame`类具有`GetMethod()`成员函数，来自检索到的`MethodBase`对象。

如果您只需要一个简单的过滤器，您可以执行以下操作之一：

*   去掉以“System”开头的类中的所有方法。或“微软”。（因为所有 .NET 库都放在那里）。
*   找到方法所在的程序集（见前文），然后检查`AssemblyCompanyAttribute`并过滤“Microsoft Corporation”制造的程序集）。这比以前的方法要好，因为有时我会看到将自己的类型放入`System`命名空间的库。

如果您需要更多内容，您可以获取`MethodBase.Module`定义该方法的模块 ()。现在你有两个选择：

*   如果您的所有程序集都已签名，则只能显示具有该公钥令牌的方法（获取使用`Module.Assembly`属性定义模块的程序集，构建一个`AssemblyName`对象，`Assembly.FullName`然后检查公钥的`AssemblyName.KeyPair`属性，它必须与您的公钥令牌匹配（只需比较与`GetExecutingAssembly()`）。
*   *如果不是所有程序集都已签名，您可以执行相同的操作，但过滤掉与系统*程序集的公钥令牌匹配的所有程序集（这可能是最简单的情况，它也将包括第 3 部分库）。

请注意，并非所有系统程序集都具有相同的公钥令牌（即使在相同的框架版本中），因此您必须收集并检查密钥列表（只需浏览`c:\windows\assembly`即可阅读它们）。一个好的方法可能是检查公钥，然后使用`AssemblyCompanyAttribute`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-21T11:57:34.667

如果您部署您的“*.pdb”文件并且您只是试图从异常中获取堆栈跟踪，您可以获取异常的`StackTrace`属性并将其拆分为行并过滤掉没有源代码引用的行。

```
 catch (Exception ex)
        {
            var lines = ex.StackTrace
                .Split(new[] {Environment.NewLine}, StringSplitOptions.None)
                .Where(l => Regex.IsMatch(l, @"([^\)]*\)) in (.*):line (\d)*$"));
            var userStackTrace = string.Join(Environment.NewLine, lines);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T13:16:19.073

我遇到了同样的问题，但我使用了 NLog 和 TraceSource 并将 System.Net 跟踪事件重定向到 NLog 目标。也就是说，过滤掉系统程序集并没有完全消除它，所以我必须检查自定义属性：

```
 private static bool IsOkay(StackFrame arg)
    {
        var method = arg.GetMethod();
        var methodAttributes = new Attribute[] { }
            .Concat(method.GetCustomAttributes<DebuggerHiddenAttribute>())
            .Concat(method.GetCustomAttributes<CompilerGeneratedAttribute>());

        if (methodAttributes.Any())
            return false;

        var methodDeclearingType = method.DeclaringType;
        var methodDeclearingTypeAttributes = new Attribute[] { }
            .Concat(methodDeclearingType.GetCustomAttributes<CompilerGeneratedAttribute>());

        if (methodDeclearingTypeAttributes.Any())
            return false;

        var methodDeclearingTypeModule = methodDeclearingType.Module;
        var methodDeclearingTypeModuleAttributes = new Attribute[] { }
            .Concat(methodDeclearingTypeModule.GetCustomAttributes<UnverifiableCodeAttribute>());

        if (methodDeclearingTypeModuleAttributes.Any())
            return false;

        return true;
    } 
```

BR，无效的

# amazon-web-services - Amazon EC2 服务器的存储限制

> ID：13451626
> 
> 赞同：2
> 
> 时间：2012-11-19T10:11:14.073
> 
> 标签：amazon-web-services, amazon-ec2

我在 AWS EC2 服务器上运行一个 Web 应用程序。现在我需要将一些图像发送到服务器并存储。谁能告诉我在 EC2 服务器中存储文件是否有大小限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:22:08.857

如果您希望存储在重新启动后仍然存在，则必须安装[EBS](http://aws.amazon.com/ebs/)卷。EBS 卷最大可达 1TB。您最多可以将 20 个 EBS 卷附加到一个实例，这将为您提供约 20TB 的存储空间。

如果您需要这么多数据，您可能还需要考虑[S3](http://aws.amazon.com/s3/)，理论上它是无限的，但它要求您使用 S3 API 而不是直接使用文件系统。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-19T11:13:45.483

我认为 EC2 层本身没有硬性限制。但是，您应该考虑以下几点：

*   是否有最大允许上传大小的网络服务器配置？
*   是否有最大允许大小的服务器端语言配置？
*   有文件系统限制吗？
*   或者：如果您将图像存储在数据库中，是否有限制？
*   有操作系统限制吗？

如果不了解您的应用程序的更多信息（例如编程语言、服务器软件等），很难给出一般性的答案。但是对于“普通图像”和“普通应用程序”，您可能应该只查看给出的前两点:)

# java - 手动创建 SOAP 请求 - 服务器接收空字符串作为参数

> ID：13451627
> 
> 赞同：0
> 
> 时间：2012-11-19T10:11:15.907
> 
> 标签：java, string, web-services, soap, ios6

所以，问题是，我已经（在 localhost 上）设置了一个 Java Webservice 服务器，它使用 Endpoint.publish 来发布服务，它是 WSDL，以及尝试向 localhost 服务器发送手写 SOAP 请求的 iOS 6 项目。

我有一个接收字符串并返回 int 的“getCostForName”函数。在 iOS 端，这就是我正在做的事情：

```
{
    NSString *soapMessage = @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
    "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"http://endpoints/\" >"
    "<soap:Body>"
    "<getCostForName>"
    "<name>Gdansk</name>"
    "</getCostForName>"
    "</soap:Body>"
    "</soap:Envelope>";

    NSURL *url = [NSURL URLWithString:@"http://localhost:9999/ws/wycieczka/"];
    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
    NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

    [theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [theRequest addValue: @"http://localhost:9999/ws/wycieczka/" forHTTPHeaderField:@"SOAPAction"];
    [theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
    [theRequest setHTTPMethod:@"POST"];
    [theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if( theConnection )
    {
        webData = [[NSMutableData data] retain];
    }
    else
    {
        NSLog(@"theConnection is NULL");
    }

}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [webData setLength: 0];
}
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [webData appendData:data];
}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"ERROR with theConenction");
    [connection release];
    [webData release];
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"DONE. Received Bytes: %d", [webData length]);
    NSString *theXML = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
    NSLog(@"%@",theXML);
    [theXML release]; 
```

}

在 Java 方面，它看起来像这样：

```
 @Override
    public Integer getCostForName(String name) {
        System.out.println("getCostForName received:" + name);
        //Calculate the cost for a given name...
    } 
```

webservice接口由以下注解定义：

```
@WebService
@SOAPBinding(style=SOAPBinding.Style.RPC) 
```

使用以下端点发布方法托管 Web 服务：

```
Endpoint.publish("http://localhost:9999/ws/wycieczka", new WycieczkaServiceImpl()); 
```

在 Java 方面，这就是我得到的：

```
Nov 19, 2012 11:08:52 AM com.sun.xml.internal.ws.transport.http.HttpAdapter fixQuotesAroundSoapAction
getCostForName received:null
WARNING: Received WS-I BP non-conformant Unquoted SoapAction HTTP header: http://localhost:9999/ws/wycieczka/ 
```

因此，如您所见，服务器接收到空字符串。而且我不知道为什么我不能通过网络服务传输字符串:(那么，有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-28T11:02:42.097

我在使用 ksopa2 ver3 时遇到了同样的问题，但我没有使用手写 SOAP，我使用的是从 www.wsdl2code.com 自动生成的分类。有一条线

肥皂信封.dotNet = true;

在为我的 EndPoint 生成的 java 文件中。我将其更改为 false，之后它运行良好。

阿基尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:54:54.533

我认为这可能是因为您在请求中缺少 SOAP 标头，尽管我真的会避免通过字符串连接来做到这一点。SOAP 是一个非常复杂的协议，它需要适当的客户端实现。尝试这个...

[如何从 iPhone 访问 SOAP 服务](https://stackoverflow.com/questions/204465/how-to-access-soap-services-from-iphone)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-11T12:00:54.610

根据 SOAP 1.1 规范的第 6.1.1 节，SOAPAction HTTP 标头必须在 URI 引用（如果存在）周围有双引号。

这就是您收到此警告的原因：

```
WARNING: Received WS-I BP non-conformant Unquoted SoapAction HTTP header: http://localhost:9999/ws/wycieczka/ 
```

应该：

```
 [theRequest addValue: @"\"http://localhost:9999/ws/wycieczka/\"" forHTTPHeaderField:@"SOAPAction"]; 
```

# assembly - 在 8086 上将两个 32 位数字相乘得到一个 64 位数字（32x32 => 64 位乘以 16 位乘法）

> ID：13451628
> 
> 赞同：-1
> 
> 时间：2012-11-19T10:11:16.257
> 
> 标签：assembly, x86-16, multiplication, bigint

我如何在汇编中将两个 32 位数字相乘或一个 32 位另一个 16 位相乘，有人知道算法吗？

```
data1 dw 32bit
data2 dw 32bit    
mov ax,data2
Mul data1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T12:08:42.573

首先，`dw`用于创建一个 16 位（“字”）值。它不会保存 32 位值。您需要使用`dd`来存储 32 位“dword”，或使用一对 16 位值。

要将一对 32 位值相乘，结果可以是 64 位（例如 0xFFFFFFFF * 0xFFFFFFFF = 0xFFFFFFFE00000001）。对于 8086（而不仅仅是 80386 或更高版本的实模式代码），有一条 MUL 指令，但它仅限于乘以 2 个 16 位值（并获得 32 位结果）。这意味着您希望将每个 32 位值视为一对 16 位值。

如果将A拆分为A_low（前32位数字的最低16位）和A_high（前32位数字的最高16位），同样将B拆分为B_low和B_high；然后：

```
 A * B = A_low * B_low
          + ( A_high * B_low ) << 16
          + ( A_low * B_high ) << 16
          + ( A_high * B_high ) << 32 
```

代码可能如下所示（NASM 语法）：

```
 section .data
first:   dw 0x5678, 0x1234  ;0x12345678
second:  dw 0xDEF0, 0x9ABC  ;0x9ABCDEF0
result:  dw 0, 0, 0, 0      ;0x0000000000000000
         section .text

    mov ax,[first]          ;ax = A_low
    mul word [second]       ;dx:ax = A_low * B_low
    mov [result],ax
    mov [result+2],dx       ;Result = A_low * B_low

    mov ax,[first+2]        ;ax = A_high
    mul word [second]       ;dx:ax = A_high * B_low
    add [result+2],ax
    adc [result+4],dx       ;Result = A_low * B_low
                                     ; + (A_high * B_low) << 16

    mov ax,[first]          ;ax = A_low
    mul word [second+2]     ;dx:ax = A_low * B_high
    add [result+2],ax
    adc [result+4],dx       ;Result = A_low * B_low
                                     ; + (A_high * B_low) << 16
                                     ; + (A_low * B_high) << 16
    adc word [result+6], 0   ; carry could propagate into the top chunk

    mov ax,[first+2]        ;ax = A_high
    mul word [second+2]     ;dx:ax = A_high * B_high
    add [result+4],ax
    adc [result+6],dx       ;Result = A_low * B_low
                                     ; + (A_high * B_low) << 16
                                     ; + (A_low * B_high) << 16
                                     ; + (A_high * B_high) << 32 
```

第二步( ) 之后我们*不需要*，因为它的高半部分最多为。 那时已经为零（因为此代码仅工作一次），因此无法包装并产生进位。它最多可以产生.`adc word [result+6], 0``[first+2] * [second]``0xfffe``[result+4]``adc [result+4],dx``0xffff`

（它可以作为`adc dx, 0`/`mov [result+4], dx`来避免依赖于`result`已经被归零的那部分。类似地，`adc`可以将归零寄存器用于第一次写入`[result+6]`，以使此代码在没有第一次归零的情况下可用`result`。）

* * *

如果您实际上使用的是 80386 或更高版本，那么它要简单得多：

```
 section .data
first:   dd 0x12345678
second:  dd 0x9ABCDEF0
result:  dd 0, 0            ;0x0000000000000000
         section .text

    mov eax,[first]          ;eax = A
    mul dword [second]       ;edx:eax = A * B
    mov [result],eax
    mov [result+4],edx       ;Result = A_low * B_low 
```

# android - fullscreenwrapper2 和 sl4a 中 OptionsMenuItem 的事件处理程序

> ID：13451634
> 
> 赞同：0
> 
> 时间：2012-11-19T10:11:35.680
> 
> 标签：android, python, user-interface, interface, sl4a

如何在 fullscreenwrapper2 和 sl4a 中为 OptionsMenuItem 制作事件处理程序？

```
 FullScreenWrapper2App.get_android_instance().addOptionsMenuItem("Exit","exit",None,"ic_menu_revert") # adding exit options successfully, but how to make event handler of this?
    self.views.exit.add_event(click_EventHandler(self.views.exit, self.close_out)) #this is works, trigger close_out function when clicked.
    self.views.but_exit.add_event(click_EventHandler("exit", self.close_out)) # and this is too! this is works, trigger close_out function when clicked. 
```

任何人都可以让它出汗吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T04:45:48.680

解决了我自己的问题。`add_event(EventHandler())`用作 OptionsMenuItem 本身的处理程序。

```
class MainScreen(Layout):
    def __init__(self):
        #initialize your class data attributes
        #load & set your xml
        super(MainScreen,self).__init__(pathhelpers.read_layout_xml("main.xml"),"Some title")

    def on_show(self):
    FullScreenWrapper2App.get_android_instance().addOptionsMenuItem("Exit",'exit','exit',"ic_menu_revert")
    self.add_event(EventHandler("exit", None, None, None, self.close_out)) 
```

# android - 我可以在android中自定义标签布局和主题吗？

> ID：13451640
> 
> 赞同：3
> 
> 时间：2012-11-19T10:11:51.870
> 
> 标签：android, tabs

我很难理解如何在 android 中使用自定义选项卡。我不想仅仅能够设置文本和东西。我怎样才能改变大小，图像，以及所有这些。例如，我想更改选项卡主题（圆角而不是角）或创建新主题，例如六边形。

几乎，我想创建一个标签，例如`File Expert 5.0.4`： ![在此处输入图像描述](../Images/9a10e93336e9877e48818872de7e9bc2.png)

我用谷歌搜索，我找不到任何有意义的东西

# c# - 如何使用 asp.net OData 协议将分页专门应用于作为 JSON 一部分的列表

> ID：13451649
> 
> 赞同：1
> 
> 时间：2012-11-19T10:12:11.620
> 
> 标签：c#, asp.net, asp.net-web-api, odata

下面是我的控制器中的 get 方法。它返回一个包含布尔“成功”、字符串“消息”和一个列表的 JSON。我如何使用 OData 查询列表？通常，如果返回类型是 IQueryable，那么以下将起作用 api/Category/all?$top=5获得前 5 名....但是在我的情况下我该怎么办？

```
// Get all Categories
    [HttpGet]
    [ActionName("all")]
    [Queryable]
    public HttpResponseMessage GetCategoryList()
    {          

        var categoryList = this.Repository.GetCategories().AsQueryable<Category>();

        return Request.CreateResponse(HttpStatusCode.OK, new ResponseMessage<IQueryable<Category>> { success = true, data = categoryList });

    }

public class ResponseMessage<T>  where T: class
{
    public string message;

    public bool success;

    public T data;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:12:46.940

你可以用它`ODataQueryOptions<T>`来解决问题。您的代码将如下所示：

```
[HttpGet]
[ActionName("all")]
public HttpResponseMessage GetCategoryList(ODataQueryOptions<Category> options)
{          

    var categoryList = this.Repository.GetCategories().AsQueryable<Category>();
    categoryList = options.ApplyTo(categoryList) as IQueryable<Category>;

    return Request.CreateResponse(HttpStatusCode.OK, new ResponseMessage<IQueryable<Category>> { success = true, data = categoryList });

} 
```

ODataQueryOptions 应该与 QueryableAttribute 一样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:55:28.440

根据您提供的详细信息，该解决方案似乎只是使用了**odata 格式**。我的意思是这里没有使用支持您提到的查询语法的 ODATA 提供程序。因此，您必须自己处理分页场景。

即将推出的库 Microsoft ASP.NET Web API OData 0.2.0-alpha 将提供该功能，但仍处于 alpha 阶段。

您可以通过将操作参数命名为与查询字符串 ID 相同的名称，将查询字符串绑定到操作参数。所以，通过修改action as`GetCategoryList(int top)`你就可以得到参数中top参数的值。您还必须处理下一个 X 的场景。

# php - 数组按索引变量排序

> ID：13451651
> 
> 赞同：4
> 
> 时间：2012-11-19T10:12:18.307
> 
> 标签：php, multidimensional-array, sorting

我在排序一个看起来像这样的简单数组时遇到了一些困难：

```
Array
(
    [3] => Array
        (
            [0] => EU West (Ireland)
            [1] => eu-west-1
        )

    [7] => Array
        (
            [0] => South America (Sao paulo)
            [1] => sa-east-1
        )

    [0] => Array
        (
            [0] => US East (Virginia)
            [1] => us-east-1
        )

    [4] => Array
        (
            [0] => Asia Pasific (Tokyo)
            [1] => ap-northeast-1
        )

    [2] => Array
        (
            [0] => US West (Oregon)
            [1] => us-west-2
        )

    [1] => Array
        (
            [0] => US West (N. California)
            [1] => us-west-1
        )

    [5] => Array
        (
            [0] => Asia Pasific (Singapore)
            [1] => ap-southeast-1
        )

    [6] => Array
        (
            [0] => Asia Pasific (Sydney)
            [1] => ap-southeast-2
        )

) 
```

我想在索引上对这个数组进行排序。我用过`ksort()`，但它不起作用，它留下一个输出 1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T10:14:39.720

[`ksort()`](http://php.net/ksort)不返回排序后的数组，而是对数组进行适当的排序。调用后`ksort($array)`，对 的内容`$array`进行排序。该函数返回排序是否成功。

例子：

```
$array = array(1 => 1, 20 => 1, 5 => 1);

echo "Before ksort():\n";
print_r($array);

if (ksort($array)) {
    echo "ksort() completed successfully.\n";
}

echo "After ksort():\n";
print_r($array); 
```

以上打印：

```
Before ksort():
Array
(
    [1] => 1
    [20] => 1
    [5] => 1
)
ksort() completed successfully.
After ksort():
Array
(
    [1] => 1
    [5] => 1
    [20] => 1
) 
```

你不应该检查`ksort()`虽然的返回值，因为`ksort()`它只会在它甚至没有返回失败的情况下失败。因此，函数要么返回，要么`true`脚本终止，在这种情况下，返回值是无关紧要的（它总是`true`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:16:04.560

Sort uses pass-by-reference for the array, and the return value is a boolean success or failure. I assume you're doing

```
$myArray = ksort($myArray); 
```

change to

```
$sorted = ksort($myArray);
if (!$sorted) {
    echo 'Failed to sort';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:24:52.683

使用喜欢

```
ksort($array); 
```

在那之后打印

```
print_r($array); 
```

如果你用过

```
print_r(ksort($array)); 
```

然后如果数组已排序，它将返回 1

# sql - 从表中选择多行

> ID：13451654
> 
> 赞同：0
> 
> 时间：2012-11-19T10:12:30.967
> 
> 标签：sql, sqlite

我有这个查询从表中选择一行： -

```
select identifier, name from content where rawid=
        (select contentid from content where rawid='002cd122-f604-4093-b242-1bd12eafaceb') 
```

我想要一个查询，它将从中选择所有行，`content`使得每一行对应`rawid`于另一个表中的一个，称为 rawIdentifiers。我想从这个表中给出 rawid，rawIdentifiers：-

![在此处输入图像描述](../Images/7314716a381e7d01d90f6a70d63509e7.png)

例如，这个查询会给我一行：-

```
select identifier, name from content where rawid=
            (select contentid from content where rawid='00504a25-bc6a-4edd-8c30-cb57e12b7c3d') 
```

这将给出其他行：

```
 select identifier, name from content where rawid=
                    (select contentid from content where rawid='002cd122-f604-4093-b242-1bd12eafaceb') 
```

等等。

我想要一个查询来获取表中的所有行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:23:31.393

听起来你想加入。您可能需要阅读有关联接的内容，以便了解它们到底在做什么。我认为您想要以下内容：

```
select identifier, name 
from content 
inner join rawidentifiers ON content.identifier = rawidentifiers.identifier 
```

我不确定您的确切表结构，所以我猜测列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:20:13.830

我认为你想要一个内部连接来为你做匹配。由于您没有为您的`content`表格提供表格结构，因此我尝试结合您的示例代码片段为您提供一个工作示例：

```
select identifier, name 
from content 
inner join content ON rawid = (select contentid from content where rawid='00504a25-bc6a-4edd-8c30-cb57e12b7c3d') 
```

这里的想法是从中获取所有记录，`content`但每条记录都有另一条记录 from`content`加入它。连接的完成类似于您`where`针对 1 条记录的子句。

# facebook - 无法通过画布页面 url 访问我的应用

> ID：13451657
> 
> 赞同：0
> 
> 时间：2012-11-19T10:12:41.293
> 
> 标签：facebook, canvas

我正在尝试在 facebook 上设计一个画布应用程序。一开始，它运行良好，我可以通过单击我的 Facebook 页面上的书签并输入画布页面 url（如“https://apps.facebook.com/namespace/”）来访问和测试我的演示。但最近它停止了工作。

它只显示带有错误空白页面的 facebook 框架，显示浏览器无法连接到我的服务器。但是我可以通过输入“http://my domain/index.html”之类的网址远程访问我自己的服务器上的应用程序网站。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:33:15.207

您需要在服务器上拥有 SSL 证书，以便 Facebook 可以通过 HTTPS 在 iframe 中加载您的页面。您还需要在应用设置中输入应用的安全 URL。

# mongodb - Mongodb - 事件的数据类型

> ID：13451659
> 
> 赞同：0
> 
> 时间：2012-11-19T10:12:56.067
> 
> 标签：mongodb, non-relational-database, nosql

我是 Mongo DB 初学者。

我必须创建一个可以存储事件的集合。事件中的所有文档都将具有 FROM_TIME 和 TO_TIME 键，其值可以如下变化：

1.  {FROM_TIME：“1939 年 9 月 1 日”，TO_TIME：“1945 年 8 月”}
2.  {FROM_TIME：“1947 年 8 月 15 日”，TO_TIME：“1947 年 8 月 15 日”}
3.  {FROM_TIME：“1857”，TO_TIME：“1858”}
4.  {FROM_TIME ：“1944 年 12 月 7 日 11:00”，TO_TIME ：“1944 年 12 月 7 日 14:40”}
5.  {FROM_TIME：“1971 年 1 月”，TO_TIME：“1972 年 11 月”}

鉴于 FROM_TIME 和 TO_TIME 的随机发生，是否可以查询以下事件：

1.  19世纪下半叶事件列表
2.  8 月 15 日的事件列表等等。

我要求这里的人们提供线索，以防我需要重新考虑我的集合的结构，因为我对 Mongo（或任何其他非关系）DB 非常天真。

* *** *第一次编辑从这里开始

我写了以下代码：

```
DBObject dbObject = new BasicDBObject();

        dbObject.put("EVNTATMC_ID", new ObjectId());
        dbObject.put("EVNTATMC_DESC", "Pearl Harbour");
        dbObject.put("EVNTATMC_FROM_TIME", Date.valueOf("1944-12-07"));
        dbObject.put("EVNTATMC_TO_TIME", Date.valueOf("1944-12-07"));
        dbObject.put("EVNTATMC_EVNTCMPD_ID", new ObjectId());
        dbObject.put("EVNTATMC_MTRL_ID", null);
        // dbObject.put("EVNTATMC_AUDIT", 1);
        dbObject.put("EVNTATMC_REMARKS", "First insert");

        eventAtomic.insert(dbObject);
dbObject = new BasicDBObject();

        dbObject.put("EVNTATMC_ID", new ObjectId());
        dbObject.put("EVNTATMC_DESC", "1857 Revolt");
        dbObject.put("EVNTATMC_FROM_TIME", "1857");
        dbObject.put("EVNTATMC_TO_TIME", "1858");
        dbObject.put("EVNTATMC_EVNTCMPD_ID", new ObjectId());
        dbObject.put("EVNTATMC_MTRL_ID", null);
        // dbObject.put("EVNTATMC_AUDIT", 1);
        dbObject.put("EVNTATMC_REMARKS", "Only years");

        eventAtomic.insert(dbObject); 
```

在这里，我愚蠢地使用 String 来存储不完整的日期，但是我应该如何存储像 1992、2001、2012 这样的一年或像 January、September 或像 August 2010 这样的一个月？我不确定我是否期待正确的事情！请指导我如何处理这种“不完整”的时间安排。

* *** *第一次编辑到此结束

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:35:08.397

将 FROM_TIME 和 TO_TIME 存储为 DateTime。见这里： [http ://www.mongodb.org/display/DOCS/Dates](http://www.mongodb.org/display/DOCS/Dates)

然后，您可以查询（例如响查询）
在此处查看答案： [https ://stackoverflow.com/a/8136834/131809](https://stackoverflow.com/a/8136834/131809)

因此，对于 2012 年 8 月 15 日的所有事件：

```
var start = new Date(2012, 08, 15);
var end = new Date(2012, 08, 16);

db.myEventCollection.find({created_on: {$gte: start, $lt: end}}); 
```

# javascript - 在 RequireJS 中包含 Modernizr 并在 head 标签中包含 Modernizr

> ID：13451661
> 
> 赞同：13
> 
> 时间：2012-11-19T10:13:07.093
> 
> 标签：javascript, requirejs, modernizr

我对 RequireJS 和 Modernizr 有疑问。

我希望 Modernizr 资源处于领先地位。以及身体中的其他一切。原因是 Modernizr 需要在 DOMContentLoad 之前做一些事情。我希望能够使用 RequireJS 将 Modernizr 模块加载到其他模块中。如何在开发和生产环境中实现这一点？我使用 requirejs 来提取所有依赖项并缩小所有资源。并且 yeoman 构建替换`<script data-main="scripts/main" src="scripts/vendor/require.js"></script>`为缩小版本。

**在正文标签下：**

```
<!-- build:js ikl.app.js -->
<script data-main="scripts/main" src="scripts/vendor/require.js"></script>
    <!-- endbuild -->
    <script>
    requirejs.config({

        paths: {

            'jquery'        : 'vendor/jquery',
            'handlebars'    : 'vendor/handlebars',
            'ember'         : 'vendor/ember',
            'ember-data'    : 'vendor/ember-data',
            'modernizr'     : 'vendor/modernizr' // This should be removed

        },

        baseUrl: 'scripts',

        shim: {

            'jquery' : {

                exports : 'jQuery'

            },

            'ember': {

                deps: ['jquery', 'handlebars'],
                exports: 'Ember'

            },

            'ember-data': {

                deps: ['ember'],
                exports: 'DS'

            },

            'handlebars': {

                exports: 'Handlebars'

            },

            'modernizr': {
                exports: 'Modernizr'
            }

        }

    });

    require([

        'modules/system/controllers/system.controller',
        'jquery',
        'ember',
        'ember-data',
        'handlebars',
        'modernizr'

    ], 
        function( systemController ) {
            systemController.renderView();
        }

    );

    </script> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-05-08T17:12:37.960

您应该能够同时获得两者。

*   首先，删除与modernizr相关的路径配置，你不需要它
*   接下来在头部加载 Modernizr - 这将创建一个 window.Modernizr 变量。
*   最后，在您的引导要求之前，定义 modernizr 模块

    ```
    define('modernizr', [], Modernizr);
    require(['foo', 'bar', 'modernizr'], function(foo, bar, modernizr) {
         //..profit
    } 
    ```

# tomcat6 - slf4j-logj12.jar 与 Tomcat6 上其他 Webapp 的 log4j-over-slf4j.jar 并发

> ID：13451664
> 
> 赞同：1
> 
> 时间：2012-11-19T10:13:16.987
> 
> 标签：tomcat6, jira

我想在与其他 Web 应用程序相同的 Tomcat6 上运行 Jira，这需要 log4j-over-slf4j.jar。

如[https://confluence.atlassian.com/display/JIRA/Installing+JIRA+on+Tomcat+6.0+or+7.0](https://confluence.atlassian.com/display/JIRA/Installing+JIRA+on+Tomcat+6.0+or+7.0)中所述，我必须将 .jar 库文件从存档复制到 Tomcat 安装的 lib 子目录目录。这个档案实现了 slf4j-logj12.jar。

当我尝试启动另一个 Webapp 时，它失败了，因为 log4j-over-slf4j.jar 和 slf4j-logj12.jar 不能同时存在。

是否可以告诉 jira 在他自己的 lib 子目录中使用 slf4j-logj12.jar 而不是 Tomcat 的？

使用 Jira 5.2 和 Tomcat 6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:16:06.033

You could try to put the log4j-over-slf4j.jar in the WEB-INF/lib/endorsed folder. This way it should override the the information in catalina_home/lib.

Make sure to redeploy Webapp after these changes.

# google-apps-script - 不同工作表应用程序脚本上的 getactiverange

> ID：13451669
> 
> 赞同：0
> 
> 时间：2012-11-19T10:13:27.467
> 
> 标签：google-apps-script

我正在处理一个有多个工作表的电子表格，而且我对应用程序脚本和脚本也很陌生。我想知道是否可以制作一个脚本或其中的一部分只在一张特定的工作表上工作，而不是在所有工作表上工作。

这是代码：

```
function setppl() {

 var ss = SpreadsheetApp.getActiveSpreadsheet();
 var sheet = ss.getSheetByName('START');

 var eventRange = sheet.getActiveRange();
 // var eventRange = SpreadsheetApp.getActiveRange(); it works as i need but it does it 
 on all of the sheets, not just 'START
 var eventColumn = eventRange.getLastColumn();
 var eventRow = eventRange.getLastRow();
 var currvalue = eventRange.getValue();
 var email = Session.getActiveUser().getEmail();

 if (eventColumn == 3) { .... 
```

我的猜测是，这种方式没有有效范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:06:55.220

当您调用`sheet.getActiveRange()`它时，它会按照它所说的去做，即它会以某种方式获取您正在访问的范围。这会覆盖您使用 所做的工作表选择`ss.getSheetByName('START')`。

您可以简单地通过其值（行、列、高度、宽度或 A1 表示法）定义范围，或者使工作表“开始”处于活动状态以强制显示器显示此工作表（但它不会阻止用户去到另一张纸）。

# android - 将 ContentProviders 用于非持久数据

> ID：13451670
> 
> 赞同：0
> 
> 时间：2012-11-19T10:13:36.610
> 
> 标签：android, android-contentprovider

我可以使用一点帮助理解`ContentProviders`

**问题：**

*   我有一个`String`应该在活动中显示的实体（s）列表。
*   这些信息由第三方应用程序提供。并且仅在应用程序运行时才有效。
*   每个应用程序都会有自己的活动来显示他们的数据。

**解决方案：**

*   我提供一个`ContentProvider`.

**问题：**

我必须使用数据库作为底层持久性吗？作为替代方案，我可以使用纯文本`ArrayList<String>`来存储实体并`ContentProvider`为每个应用程序单独使用。

我要问的原因是完整的接口和基础设施接缝集中在使用 DB传输*持久数据。*所以我想知道我是否滥用了这个框架。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:18:30.053

不，您绝对不需要使用数据库——您可以自由地实现您想要（或缺少）的任何存储机制。然而，大多数时候，您的应用程序中似乎有一个支持数据库，因此事情是持久的。

# c++ - VS Profiler 启动功能

> ID：13451671
> 
> 赞同：1
> 
> 时间：2012-11-19T10:13:37.030
> 
> 标签：c++, visual-studio-2010

我正在使用 VS2010 Profiler，但在指定分析起点时遇到问题。也就是说，如果 a 有 FunctionA() 调用的 FunctionB()，我只想分析 FunctionB() 及其所有子函数的性能。

这是一个示例代码：

```
FunctionA()
{

  ... other functions, initializations, etc

    FunctionB()
} 
```

目前我使用这个命令：

```
vsinstr File.dll /start:outside,FunctionB 
```

我有一个问题，因为它被分析了一些不需要的东西（对于其他功能，初始化）

请问有什么建议吗？

# c# - NHibernate：聚合和 rownum

> ID：13451674
> 
> 赞同：1
> 
> 时间：2012-11-19T10:13:41.850
> 
> 标签：c#, nhibernate, linq-to-nhibernate, criteria-api

我正在尝试从 NHibernate 实现以下 SQL（通过 NHibernate Criteria 或 LINQ）。

```
SELECT MIN(ID)
FROM 
(SELECT * 
 FROM PERSON 
 WHERE CITY = 'SYDNEY' and ROWNUM < 1000) 
```

即居住在悉尼市的前 1000 人中的最低 ID。

有任何想法吗？干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:23:39.953

这是使用 Criteria API 的类似查询：

```
session.CreateCriteria<Person>()
    .SetProjection(Projections.Min("ID"))
    .Add(Subqueries.PropertyIn("ID", 
             DetachedCriteria.For<Person>()
                  .Add(Restrictions.Eq("CITY", "SYDNEY")) 
                  .SetProjection(Projections.Property("Id"))
                  .SetMaxResults(1000)))
    .List(); 
```

生成的 SQL 查询使用 TOP() 而不是 ROWNUM，但我认为它应该可以完成这项工作。

# apache - mod_rewrite - 在 url 的开头注入标题

> ID：13451675
> 
> 赞同：0
> 
> 时间：2012-11-19T10:13:41.460
> 
> 标签：apache, mod-rewrite

我有一个 URL 结构，例如： /index.php?id=1&a=2&b=3 或 /index.php?id=29&d=5&e=6&f=8

传递的变量会根据您所在的页面而变化。

我正在寻找一个允许我这样做的重写规则：

/page-name/?id=1&a=2&b=3 或 /page-name/?id=29&d=5&e=6&f=8

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:49:28.493

以下代码会将查询字符串（之后的 URL 部分`?`）传递给 index.php / 现有文件不会以任何方式处理：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !^index\.php$
RewriteRule .* index.php [QSA,L] 
```

它假设您对标题是什么不感兴趣并且它完全忽略它。

# html - 如何将asp生成的页面保存在html存档中？

> ID：13451676
> 
> 赞同：1
> 
> 时间：2012-11-19T10:13:41.283
> 
> 标签：html, asp-classic

我想将处理 ASP 页面的结果保存为 html 文件。任何人都知道这是否可能？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:01:46.027

这可以帮助您保存 ASP 页的输出

```
<script runat="server">
void Page_Load() {
  String inputFile = MapPath("input-page.aspx");
  String sDiskFile = "result.htm";

  WebRequest webRequest = WebRequest.Create(inputFile);

  WebResponse webResponse = webRequest.GetResponse();
  Stream stream = webResponse.GetResponseStream();

  StreamReader oReader = new StreamReader(stream, Encoding.ASCII);

  StreamWriter oWriter = new StreamWriter(Server.MapPath(sDiskFile));
  oWriter.Write(oReader.ReadToEnd());

  oWriter.Close();
  oReader.Close();
  webResponse.Close();

  // display confirmation that it worked
  lblOutput.Text = inputFile;
  aLink.Text = sDiskFile;
  aLink.NavigateUrl = sDiskFile;

}
//-----------------------------------------
</script> 
```

# c++ - 实现定义的缩小转换？

> ID：13451681
> 
> 赞同：9
> 
> 时间：2012-11-19T10:14:11.270
> 
> 标签：c++, c++11, implicit-conversion, list-initialization

C++11 形式化了**窄化转换**的概念，并且不允许在列表初始化的顶层使用一个。

我想知道，给定两种类型`T`和`U`，是否有可能实现定义从`T`to的转换是否`U`正在缩小。根据我对标准的阅读，情况就是这样。这是我的推理：

*   根据**dcl.init.list** (8.5.4) 第 7 段，转换可以缩小的一种方法是，如果它是“从整数类型或无范围枚举类型到不能表示原始值的所有值的整数类型的隐式转换”类型”。
*   `unsigned int`考虑从到的隐式转换`long`。
*   关于 和 的相对大小`int`，`long`C++ 只需要`sizeof(int) <= sizeof(long)`.
*   考虑一个实现 A，其中`sizeof(int) == sizeof(long)`. 在这个实现中，`long`不能代表 的所有值`unsigned int`，因此转换会变窄。
*   考虑一个实现 B，其中`sizeof(int) < sizeof(long)`. 在此实现中，`long`可以表示 的所有值`unsigned int`，因此转换不会缩小。

我的分析是否正确，可以由实现定义转换是否正在缩小？这是可取的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T11:49:26.940

我确实更喜欢在类型本身上定义“缩小转换”。在某种程度上，`int i{long(non_constant_expression)}`永远不允许编译。原因很简单：要么你不需要长范围，那么你应该`int`首先使用，或者你真的想要“cut”，这对于我来说似乎是一个非常罕见的情况，需要显式类型转换或投掷。回答第一个问题：它是实现定义的。

但老实说，我几乎从不使用这种原始类型，只是`size_t`,`int32_t`等`uint16_t`，这会自动解决问题。（`uint16_t {uint8_t()}`总是缩小，`uint16_t{uint16_t()}`从不。）一个人只需要深思熟虑地转换`size_t`成别的东西，但情况总是如此。

# python - Subprocess.Popen() => 无输出

> ID：13451685
> 
> 赞同：7
> 
> 时间：2012-11-19T10:14:22.177
> 
> 标签：python, subprocess, stdout, popen

我正在尝试从 Python 中运行 Perl 脚本，但我在 stdout() 中没有得到任何输出，而当我从 shell 运行它时，我的脚本可以完美运行。

首先，这是我从 shell 执行它的方式（假设我在正确的目录中）：

```
./vmlinkedclone.pl --server 192.168.20.2 --username root --password root 
--vmbase_id 2 --vm_destination_id 41 --vmname_destination "clone-41-snapname" --snapname Snapname

#=> True, []
#=> or False, and a description of the error here 
#=> or an argument error 
```

这是我尝试从 Python 调用它的方式：

```
cmd = ['/home/user/workspace/vmlinkedclone.pl', '--server', '192.168.20.2', '--username', 'root', '--password', 'root' ,'--vmbase_id', '2', '--vm_destination_id', '41', '--vmname_destination', 'clone-41-snapname', '--snapname', 'Snapname']
pipe = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
result = pipe.stdout.read()

print "Result : ",result
#=> Result : 
```

为什么当我从 Shell 运行脚本时得到所需的输出，而从 Python 中什么也得不到？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T10:17:51.140

你可以试试：

```
pipe = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE) 
```

**编辑**

我确实发现了一些与编码相关的问题，我通过以下方式解决了它：

```
import subprocess
cmd = ['/home/user/workspace/vmlinkedclone.pl', '--server', '192.168.20.2', '--username', 'root', '--password', 'root' ,'--vmbase_id', '2', '--vm_destination_id', '41', '--vmname_destination', 'clone-41-snapname', '--snapname', 'Snapname']
pipe = subprocess.Popen(cmd, shell = True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
out, err = pipe.communicate()
result = out.decode()
print "Result : ",result 
```

# objective-c - 将 ivars 添加到 NSManagedObject 子类

> ID：13451686
> 
> 赞同：0
> 
> 时间：2012-11-19T10:14:23.453
> 
> 标签：objective-c, ios, core-data, nsmanagedobject

当我使用核心数据创建实体然后从中生成一个子类时`NSManagedObject`，我得到以下输出（在 .h 中）：

```
@class Foo;

@interface Foo : NSManagedObject

@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSSet *otherValues;

@end 
```

但是，在我的 .m 文件中，我想使用`name`and`otherValues`值。通常我会简单地创建几个 ivars，然后根据需要为它们添加属性。这样我就可以轻松地在我的 .m 文件中访问它们。

在这种情况下可以接受吗？将 ivars 添加到 .h (for `name`and `otherValues`) 会导致对象的持久性和检索出现任何异常行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T10:30:29.777

您不使用实例变量来访问 Core Data 托管对象的属性。

生成的实现文件包含语句

```
@dynamic name;
@dynamic otherValues; 
```

这意味着 Core Data 属性的 getter/setter 函数是动态创建的，例如从托管对象上下文或从底层持久存储中检索值。

因此，您应该始终使用属性来访问属性，例如：

```
Foo *myFoo = [NSEntityDescription insertNewObjectForEntityForName:@"Foo" inManagedObjectContext:context];
myFoo.name = @"test"; 
```

或者，您可以使用键值方法：

```
[myFoo setValue:@"test" forKey:@"name"]; 
```

另请参阅：“核心数据编程指南”中的[建模属性：](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdManagedObjects.html#//apple_ref/doc/uid/TP40003397-258615)

> Core Data**动态生成**高效的公共和原始的 get 和 set 属性访问器方法……在托管对象子类中，您可以在接口文件中声明建模属性的属性，但**不声明实例变量**。

# c# - 以图像格式保存 ms word 中的表格？

> ID：13451692
> 
> 赞同：1
> 
> 时间：2012-11-19T10:14:38.917
> 
> 标签：c#, ms-word

我正在word文档中生成一个表格，由于一些对齐问题，我想以图像格式将该表格保存在我的系统中，是否有从word文档中保存该表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:28:09.413

您可以使用 Windows API 剪贴板函数来执行此操作。见`GetClipboardData()`。

所以它可以在 C# 中引用剪贴板 API 来完成。

还要检查[http://www.codeproject.com/Articles/2207/Clipboard-handling-with-NET](http://www.codeproject.com/Articles/2207/Clipboard-handling-with-NET)，它使用`System.Windows.ClipBoard`类，Windows API 上的一个瘦包装器。

# wireshark - 在多个 TCP 会话上跟踪 TCP 流？

> ID：13451695
> 
> 赞同：2
> 
> 时间：2012-11-19T10:14:50.067
> 
> 标签：wireshark

我正在使用 Wireshark 来嗅探一些 HTTP 流量（Fiddler 不会这样做，因为我的应用程序不使用代理）。

我想从“数据包视图”转移到整个 HTTP 会话的视图——所有会话，而不仅仅是其中一个。

有没有像“Follow TCP Stream”这样不限于单个 TCP 连接的东西？

（所需的输出基本上是一系列 HTTP 请求/响应 - 我只对响应的文本感兴趣）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:39:13.977

1.  使用过滤器“http”在数据包视图中仅显示 http 请求和响应。
2.  单击其中一个响应数据包（HTTP 1.1 200 OK）
3.  响应的主体由响应数据包底部的 Wireshark 解码

![在此处输入图像描述](../Images/f484badc081ba7cf9c72ee7619344441.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:50:31.573

或者只是使用统计信息 -> 对话列表 -> TCP

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T05:35:01.143

在 Wireshark 上嗅探 HTTP 流量是有限的。我建议你使用 www.ntop.org 的 PF_RING

更多详情，请查看网站 [http://www.ntop.org/products/pf_ring/](http://www.ntop.org/products/pf_ring/)

# opengl - 将 4 个单独的组件 RGBA 组合在一个纹理中

> ID：13451702
> 
> 赞同：2
> 
> 时间：2012-11-19T10:14:56.733
> 
> 标签：opengl, streaming, video-streaming, fbo

我正在开发视频序列的查看器。我使用基于扫描线的方法，对每一行进行并发计算（获取）。我得到的每一行都在几个缓冲区（通道）中分开，即 R、G、B、A。

因此，将问题想象为：我想将所有通道组合成一个纹理。我曾想过自己做，通过分配一个临时缓冲区，我可以在其中上传多个组件，并使用 glTexSubImage2D(...) 将其提供给 openGL，但解决方案非常昂贵...尤其是对于图像流！

然后我想到了多重纹理：简而言之，为每个通道制作一个单独的纹理（GL_LUMINANCE？），然后将它与 GLSL 着色器结合起来。我认为这可行，不幸的是我没有多重纹理方面的经验。有人可以给我一个完整的多纹理教程的链接吗？

我能从互联网上挖掘出来的最后一件事是使用带有缓冲纹理的 FBO。在缓冲区纹理中，使用具有多个索引的缓冲区对象。但是我无法获得有关缓冲区对象中索引的更多详细信息，以及它是否能满足我的需求。

无论如何，这是最后一个问题：是否可以从 4 个单独的组件（缓冲区）创建一个纹理？或更准确地说：如何在视频序列的上下文中有效地绘制 4 个组合缓冲区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:48:14.073

多重纹理确实是要走的路。最重要的是，它允许您为每个通道设置不同的格式，从而允许进行 4:2:2 二次采样或类似的操作。

FBO 是绘图目标，而不是图像源，因此不太适合您。

多重纹理背后的基本思想是，有许多所谓的*纹理单元*，OpenGL 调用`glActiveTexture`选择在调用之后的单元`glBindTexture`将起作用。它需要一些簿记，哪个纹理绑定在哪里，但这不是很困难。

在片段着色器中，您可以通过所谓的*sampler uniform*从纹理中获取样本。采样器制服绑定到纹理单元。一个重要的陷阱是，它`glActiveTexture`作为参数`GL_TEXTURE0 + n`，而传递给采样器的单元号使用`glUniformi`is just `n`。

如果您只是对上传数据感兴趣，则纹理绑定在哪个纹理单元中并不重要。（我个人希望新版本的 OpenGL 有一个特殊的纹理单元，它不能用作源，但只允许绑定纹理以进行图像上传，并且没有纹理目标优先级。）

# xml - 如何记录 xml 批处理文件的加密和签名要求？

> ID：13451706
> 
> 赞同：0
> 
> 时间：2012-11-19T10:15:02.770
> 
> 标签：xml, security, soa, ws-security

我有一个 xml 批处理文件，它将通过 scp/sftp 在两方之间传输（不涉及 web 服务）。我发送的部分 xml 批处理文件需要加密和签名。

我需要记录加密/签名要求，以便第三方可以了解如何使用批处理文件。我可能只是创建一个描述加密和签名要求的接口规范文档（例如，MS word）。但是，我想知道 WS-Policy 是否也可以用于记录不属于 Web 服务的 xml 消息的安全要求？

即使没有使用 Web 服务，为该服务创建 wsdl 是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:15:22.577

这是一个好主意 :) 当然，您可以使用 WS-SecurityPolicy 来描述它并使其保持正式 :) 如果您愿意，您可以编写一个验证器来理解 WS 范围之外的 ws-securityPolicy。

# c++ - Invalid parameter passed to C runtime function with QTest

> ID：13451709
> 
> 赞同：0
> 
> 时间：2012-11-19T10:15:10.943
> 
> 标签：c++, qt

I am developing a Qt project with Qt creator, all works fine, but when i came to the unit testing part using QTest, after compilation I get the error "Invalid parameter passed to C run-time function".

Can anyone help me to find the source of the problem? Is it due to the use of `cstdio` functions or has it something to do with the `.pro` configuration?

This is a test method I implemented and did not work:

```
void TestFichier::testLoad()
{
    Fichier a;
    a.load("input.txt");
    FILE *f=fopen("input.txt","rb");
    int c;
    int i,*tab=a.getHexValues();
    for (i=0;i<3;i++)
        c=fgetc(f);
    fclose(f);
    QCOMPARE(tab[2],c);
} 
```

Fichier is a class I created with a method `load`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:07:26.390

[MSDN fgetc 文档](http://msdn.microsoft.com/en-us/library/c7sskzc1.aspx)指出：

> 如果 [参数] 流为 NULL，则 fgetc 和 fgetwc 调用无效参数处理程序，如[参数验证](http://msdn.microsoft.com/en-us/library/ksazx244.aspx)中所述。

因此，您应该检查是否`fopen`返回`NULL`，在这种情况下，使用 查找错误类型`errno`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:49:47.017

可能，您的问题是您在使用动态内存时犯了一些错误。例如，您可以使用指向未分配内存的指针，等等。`getHexValues()`在方法中检查您的代码。

# wpf - How to access ViewModel property(value) in another ViewModel?

> ID：13451715
> 
> 赞同：0
> 
> 时间：2012-11-19T10:15:25.160
> 
> 标签：wpf, visual-studio-2010, c#-4.0, mvvm

I have a one ViewModel like this:

```
public class TaskTrayViewModel<T> : ViewModelBase where T : IBlotterRow, new()
{ } 
```

this ViewModel contains one property :

```
private Product sp;
public Product selectedProduct
{
   get { return sp; }
   set
   {
    sp = value; 
   } 
```

}

I want to access this property(value) in BlotterCriteriaViewModel (other viewModel). All the viewmodels implements InotiFyPropertyChange. I have read some related questions but didnt get anything. I am not using frameworks(prism,galasoft)?

How to pass the property(value) here? Kindly suggest>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:27:18.073

好的，至少有两种方法。

1.  直接方式：实例`BlotterCriteriaViewModel`获取对实例的引用`TaskTrayViewModel`（在构造时，或者可能在需要值的点）。有了`TaskTrayViewModel`引用，就可以轻松访问公共属性。
2.  间接方式： 的实例从事件中`BlotterCriteriaViewModel`获取`INotifyPropertyChange`引用`TaskTrayViewModel`并订阅`PropertyChanged`事件。你不会得到属性的*初始*值，但是一旦属性发生变化，你就会得到事件并且可以在事件 args 中看到新的值。

这些有问题吗？

# sql - Copy or Clone SQL table with constraints

> ID：13451716
> 
> 赞同：1
> 
> 时间：2012-11-19T10:15:32.957
> 
> 标签：sql, sql-server, sql-server-2008, tsql

I want to create same structure of table in another table..

But it should create same table structure with all primary keys and indexes of that old table.

I tried below but it copies only columns.. not primary key nor indexes.

```
SELECT *
INTO dbo.NewTable
FROM dbo.ExistingTable
WHERE 1 = 2 
```

How can I copy/clone that too?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:21:49.640

我正在向您发布我用来创建数据库克隆的脚本的一部分，我删除了一些部分并且它缺少 FK 和索引（但是 PK 在那里，忽略身份：P）但应该给你一个提示你如何能做到这

当心：它没有经过优化，因为我需要运行它 1 次而不是按计划运行，我只是让它与我的数据库一起工作：P 根据您的需要修复它：

```
declare @DestinationSchema nvarchar(50) = 'frontier'
declare @SourceSchema nvarchar(50) = 'dbo'

select  so.name as TableName
        ,N'create table [' + @DestinationSchema + '].[' + so.name + '] (' + o.list + (case when kc.name IS NULL then '' else ' CONSTRAINT ' + kc.name  + ' PRIMARY KEY CLUSTERED ' + ' (' + LEFT(j.List, Len(j.List)-1) + '))' end) as TableScript
from    sys.objects so
cross apply
    (select 
        -- column name
        '  ['+cl.name+'] ' + 
        -- column type
        t.name + 
        -- type lenght
        (case t.name
            when 'sql_variant' then ''
            when 'text' then ''
            when 'ntext' then ''
            when 'bit' then '' 
            when 'int' then ''
            when 'tinyint' then ''
            when 'smallint' then ''
            when 'bigint' then ''
            when 'timestamp' then ''
            when 'date' then ''
            when 'smalldatetime' then ''
            when 'datetime' then ''
            when 'datetime2' then ''
            when 'real' then ''
            when 'float' then ''
            when 'time' then ''
            when 'decimal' then '(' + cast(cl.[precision] as varchar) + ', ' + cast(cl.scale as varchar) + ')'
            else '('+ (case when cl.max_length = -1 then 'MAX' else cast(cl.max_length as varchar) end) +')' end) + ' ' +
        -- nullable
        (case when cl.is_nullable = 0 then 'NOT ' else '' end ) + 'NULL,'
     from sys.columns cl
            inner join sys.types t on cl.user_type_id = t.user_type_id
     where object_id = so.object_id
     order by cl.column_id
    for xml path('')
    ) o (list)
inner join sys.schemas sch on so.[schema_id] = sch.[schema_id] AND sch.name = @SourceSchema
left join sys.key_constraints kc on so.[object_id] = kc.parent_object_id AND kc.[type] = 'PK' AND kc.[schema_id] = so.[schema_id]
cross apply
    (select N'[' + col.name + '], '
     from   sys.columns col 
                inner join sys.indexes i on col.[object_id] = i.[object_id] and i.is_primary_key = 1
                inner join sys.index_columns ic on ic.object_id = so.object_id and ic.column_id = col.column_id and ic.index_id = i.index_id
     where  col.[object_id] = so.[object_id]
     order by ic.key_ordinal
     for xml path('')) j (list)
cross apply
    (select N'[Destination].[' + col.name + '] = [Source].[' + col.name + '] AND '
     from   sys.columns col 
                inner join sys.indexes i on col.[object_id] = i.[object_id] and i.is_primary_key = 1
                inner join sys.index_columns ic on ic.object_id = so.object_id and ic.column_id = col.column_id and ic.index_id = i.index_id
     where  col.[object_id] = so.[object_id]
     order by ic.key_ordinal
     for xml path('')) k (list)     
where
    so.[type] = 'U'
order by
    so.name 
```

# php - from xml to json formatting

> ID：13451717
> 
> 赞同：0
> 
> 时间：2012-11-19T10:15:35.420
> 
> 标签：php, xml, json, domdocument

Hi i need some help i have the following code

```
 $producers = simplexml_import_dom($xmlDoc);
    $file = fopen('producers.json','w');
    foreach( $producers as $producer)
    {
       $info[] = $producer; 
    }
    $jsonInfo = json_encode($info);
    fwrite($file, $jsonInfo);
    fclose($file); 
```

this outputs

[{"id":"8","name":"Em\u00e5mejeriet","street":" Grenv\u00e4gen 1-3\n\t\t\t\t\t","postal":" 577 39\n\t\t\t\t\t","city":" Hultsfred\n\t\t\t\t","weburl":"http://www.emamejeriet.se","logourl":"http://172.16.206.1/~thajo/1DV449/laboration01/producenter/images/ema.png"},{"id":"57","name":"\u00d6lands \u00f6rtag\u00e5rd","street":" Stora Fr\u00f6 2393 \n\t\t\t\t\t","postal":" 380 62\n\t\t\t\t\t","city":" M\u00f6rbyl...and so on

I need som help to format it, i need to get rid of the newlines and format it to more readable json format. aswell I cannot get the UTF-8 to work.

/thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:30:17.847

尝试这个 ：

PHP 5.4 提供了 JSON_PRETTY_PRINT 选项以用于 json_encode() 调用。

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

```
$json_string = json_encode($data, JSON_PRETTY_PRINT); 
```

或者

```
 $string = '{"a":"apple","b":"banana","c":"catnip"}';
 $pattern = array(',"', '{', '}');
 $replacement = array(",\n\t\"", "{\n\t", "\n}");
 echo str_replace($pattern, $replacement, $string); 
```

# c# - What is the difference between EnumerateFiles and EnumerateFileSystemEntries in .NET 4?

> ID：13451718
> 
> 赞同：20
> 
> 时间：2012-11-19T10:15:41.223
> 
> 标签：c#, .net

In .Net 4 there are two functions to enumerate files in a path. The EnumerateFiles and EnumerateFileSystemEntries. The MSDN does not give enough explanations about their differences. Which are these differences?

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-19T10:17:24.047

[EnumerateFileSystemEntries](http://msdn.microsoft.com/en-us/library/system.io.directory.enumeratefilesystementries.aspx) => 枚举文件、目录以及**文件和目录**。

[EnumerateFiles](http://msdn.microsoft.com/en-us/library/system.io.directory.enumeratefiles.aspx) =>**仅用于枚举文件**。（不是目录）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-19T10:17:24.807

[`EnumerateFiles`](http://msdn.microsoft.com/en-us/library/system.io.directory.enumeratefiles.aspx)仅返回文件名。还[`EnumerateFileSystemEntries`](http://msdn.microsoft.com/en-us/library/dd413381.aspx)返回*目录名称*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-28T12:21:42.167

正如@Habib 和@Sergey 回答的那样，您需要使用`EnumerateFileSystemEntries`而不是`EnumerateFiles`. 我将用一个例子来扩展他们的答案。

*   [EnumerateFiles](http://msdn.microsoft.com/en-us/library/system.io.directory.enumeratefiles.aspx)：返回与指定路径中的搜索模式匹配的可枚举文件名集合，并可选择搜索子目录。
*   [EnumerateFileSystemEntries](http://msdn.microsoft.com/en-us/library/dd413381.aspx)：返回指定路径中文件名和目录名的可枚举集合。

这是展示差异的代码：

```
public static void Main()
{
    Directory.CreateDirectory("dir");
    Directory.CreateDirectory("dir2");
    File.WriteAllText(Path.Combine("dir", Path.GetRandomFileName()), "file");
    var datapath = ".";

    var files = Directory.EnumerateFiles(datapath, "*", SearchOption.AllDirectories);
    files.Dump();

    var fileSystemEntries  = Directory.EnumerateFileSystemEntries(datapath, "*", SearchOption.AllDirectories);
    fileSystemEntries.Dump();
} 
```

输出

```
Dumping object(System.IO.FileSystemEnumerableIterator`1[String])
[
   .\dir\epp3114y.jjr
]
Dumping object(System.IO.FileSystemEnumerableIterator`1[String])
[
   .\dir
   ,
   .\dir2
   ,
   .\dir\epp3114y.jjr
] 
```

[在线尝试！](https://dotnetfiddle.net/gwsYSC)

# html - Force external download url

> ID：13451720
> 
> 赞同：13
> 
> 时间：2012-11-19T10:15:45.747
> 
> 标签：html, header, download

I want to host on my webpage an external url containing a mp3 file. The problem is that clicking on that link will open the player, i have to right click and "Save link as" in order to download the file. Is there any solution to force the file download?

I don't want to download the file and then use headers to force the download.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-12T11:26:33.080

现在[HTML5 规范](http://developers.whatwg.org/links.html#downloading-resources)在超链接上定义了一个非常有用的属性，它基本上允许在客户端强制下载行为，而`download`不管来自服务器的内容是什么：`Content-Type``Content-Disposition`

> 在某些情况下，资源旨在供以后使用，而不是立即查看。为了指示资源打算被下载以供以后使用，而不是立即使用，可以在创建该 资源的or元素`download` 上指定属性。`a``area``hyperlink`

<...>

> 如果存在该`download`属性，则表明作者打算将超链接用于下载资源。属性可能有值；该值（如果有）指定作者推荐用于标记本地文件系统中的资源的默认文件名。

所以你需要做的就是将属性添加到你的超链接中，支持它的浏览器会明白需要下载内容：

```
<a href="http://example.com/media.mp3" download>Download Your File</a> 
```

您甚至可以通过设置属性值来为下载的文件建议一个不同的名称：

```
<a href="http://example.com/media.mp3" download="check this out.mp3">Download Your File</a> 
```

**更多信息和演示：**

*   [在 HTML5 中下载资源：a[download]](http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download) (HTML5 Rocks)
*   [HTML5 下载属性](http://davidwalsh.name/download-attribute)(David Walsh)

浏览器支持：[caniuse.com](http://caniuse.com/#feat=download)

* * *

**下载生成的内容**

您甚至可以创建一个链接来下载您生成的内容，只要有办法为其获取 base64 编码的数据 URI：

```
<a href="data:application/octet-stream;base64,YOUR_ENCODED_DATA" download="song.mp3">Download</a> 
```

有关保存生成内容的更多详细信息，请参阅 Eli Grey 的这篇文章：

[在客户端保存生成的文件](http://eligrey.com/blog/post/saving-generated-files-on-the-client-side/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T10:20:47.683

**编辑：如果您仅控制目标 MP3 文件，则以下答案适用，如果它是外部链接则不适用**

该链接不应直接指向 MP3 文件，而是指向一段逻辑（例如，您使用的是 ASPX 吗？在这种情况下，您可以使用 .aspx 页面作为目标，或者您可以为 .aspx 页面创建一个 HTTP 处理程序。 mp3 扩展名），*它将*HTTP 标头添加到包含以下行的输出中：

```
Content-Disposition: attachment;filename="whatever.mp3"; 
```

这将指示浏览器将输出的内容视为要在本地保存的文件。

# javascript - 将对象 [key] 分配给 javascript“for...in”循环中的临时变量？

> ID：13451729
> 
> 赞同：2
> 
> 时间：2012-11-19T10:16:11.513
> 
> 标签：javascript, object, for-in-loop

我正在开发一个 JS 来根据当前 url 的哈希显示不同的消息。现在，一切正常，但我想知道访问我的消息的最佳方式是什么（它们将被编码到一个 .js 文件中）

目前，我将消息存储在这样的对象中：

```
popups = {
    TemplateMessage: {
        title: "Template Popup Title", 
        message: "This is a template popup message! Copy this to add a message.",
        modal: true
    },
    AnotherMessage: {
        title: "another title", 
        message: "message.",
        modal: true
    } /* etc */
}; 
```

我访问这些消息的方式是使用“for in: 循环，如下所示：

```
for (key in popups) {
    //Do something with...
    popups[key].title;
    popups[key].message;
    popups[key].modal;
} 
```

但是将 popups[key] 分配给临时变量会更有效吗？像：

```
var p;
for (key in popups) {
    p = popups[key];
    //Do something with...
    p.title;
    p.message;
    p.modal;
} 
```

目前这一切都是相对较小的规模，在这个阶段它并不重要（如果有的话），但是如果你有 25 个不同的对象，每个对象有 50 个属性怎么办？我想我真正的问题是，从临时变量或从对象中的对象获取变量是否存在（相对）显着差异？

我不太确定如何正确测试这个，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:11:11.767

事实证明，将您分配给具有大对象`object[key]`的循环中的临时变量确实更快，如[jsPerf test 所示](http://jsperf.com/tempvarforin)。这样，您就不必获取对象的每个属性。`for-in``object[key]`

# java - BeanIO - segment manipulation

> ID：13451730
> 
> 赞同：1
> 
> 时间：2012-11-19T10:16:12.553
> 
> 标签：java, exception, csv, bean-io

This is my problem: I must use BeanIO to read a CSV. This CSV is something like:

```
s1_el1;s1_el2;s1_el3;s1_el4;X1;Y1;Z1
s2_el1;s2_el2;s2_el3;s2_el4;X2;Y2;Z2
s2_el1;s2_el2;s2_el3;s2_el4;X3;Y3;Z3 
```

Where the sN_elM (where N and M are incremental values for row and column) must be placed in a section (BeanIO section).

What I actually have is a mapping XML like this:

```
<?xml version="1.0" encoding="UTF-8"?>
<beanio xmlns="http://www.beanio.org/2012/03" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.beanio.org/2012/03 http://www.beanio.org/2012/03/mapping.xsd">   
    <stream name="fileTabellaSconti" format="csv">      
        <parser>
            <property name="delimiter" value=";" />
            <property name="unquotedQuotesAllowed" value="true" />
            <property name="whitespaceAllowed" value="true" />
        </parser>       
        <record name="tabellaSconti" class="map">           
            <segment name="sconto" class="map" >
                <field name="categoria" />
                <field name="nome" />
                <field name="tipologia" />
                <field name="profilo" />
            </segment>          
            <field name="valoreSconto" type="java.lang.Integer" />
            <field name="codiceSts" />
            <field name="scontoEquivalente" type="java.lang.Integer" />         
        </record>       
    </stream>   
</beanio> 
```

In my "writer()" function I do this:

```
public static void writer( File csv_file )
{
    factory.load(new File(user_dir+"/docroot/WEB-INF/src/it/saleshub/csv/mapping/map_sconto.xml"));

    BeanWriter out = factory.createWriter( "fileTabellaSconti", csv_file );

    int c = 0;
    while (c < 5)
    {
        c++;

        HashMap<String, Object> record = new HashMap<String, Object>();

        HashMap<String, Object> sconto = new HashMap<String, Object>();

        sconto.put( "categoria",        "cat_"+c );
        sconto.put( "nome",             "nome_"+c );
        sconto.put( "tipologia",        "tipologia_"+c );
        sconto.put( "profilo",          "profilo_"+c );

        record.put( "sconto" , sconto );

        record.put( "valoreSconto",     new Integer(c) );
        record.put( "codiceSts",        "sts_"+c );
        record.put( "scontoEquivalente",new Integer(c) );

        System.out.println(record);
        out.write(record);

    }

    out.flush();
    out.close();
} 
```

But every time I use this function, the code show me this exception:

```
Bean identification failed: no record or group mapping for bean class 'class java.util.HashMap' [...] 
```

Where is my error? I think I'm using in a wrong way the segment, but I can't find any kind of documentation about how to use it correctly..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T18:46:24.883

问题在于您的映射文件和您的 pojo 类。

对于映射文件中定义的每个字段，都应该在父标记中定义的类中具有 setter 和 getter 方法，无论是段还是记录。

在这里，您使用了一个类映射，我认为它在您的代码中不能用作 pojo。此外，如果您想在段上使用集合，您需要使用集合属性并提供值作为地图或列表。

```
 <record name="tabellaSconti" class="com.test.Parent">           
        <segment name="scontos" collection="list" class="com.test.Sconto" >
            <field name="categoria" />
            <field name="nome" />
            <field name="tipologia" />
            <field name="profilo" />
        </segment>
        <field name="valoreSconto" type="java.lang.Integer" />
        <field name="codiceSts" />
        <field name="scontoEquivalente" type="java.lang.Integer" />         
    </record> 
```

在 com.test.Parent 中，您必须定义 getScontos 和 setScontos 方法以及用于侧段之外的字段的其他 getter 和 setter 方法，同样在 Sconto 类中，您必须为段中定义的所有字段定义 getter 和 setter。

最后你的主类中的代码是

```
 Parent record = new Parent;
    Sconto sconto = new Sconto();
    List<Sconto> scontos = new ArrayList<Sconto>();

    sconto.setCategoria("cat_"+c );
    sconto.setNome("nome_"+c );
    sconto.setTipologia("tipologia_"+c );
    sconto.setProfilo("profilo_"+c );

    scontos.add(sconto);

    record.setScontos(scontos);

    -------
    ---------
    out.write(record); 
```

# javascript - 使用 css/javascript 平滑滚动固定 div 在 IE 中给出看似随机的结果

> ID：13451732
> 
> 赞同：0
> 
> 时间：2012-11-19T10:16:24.450
> 
> 标签：javascript, css

我有一个绝对定位的“左菜单”和一个“右菜单”div。我希望他们在滚动时跟随浏览器窗口。我的解决方案在 Opera、Firefox 和 Chrome 中运行良好，但在 IE 中的结果是不可预测的。有时它会按预期工作，但有时 div 不会恢复“位置：绝对”样式。

这是我的代码：

```
if(window.pageYOffset) {

    if(window.pageYOffset > 142) {

        document.getElementById("menuRight").style.position = "fixed";
        document.getElementById("menuRight").style.top = "0";
        document.getElementById("menuRight").style.marginTop = "10px";

        document.getElementById("menuLeft").style.position = "fixed";
        document.getElementById("menuLeft").style.top = "0";
        document.getElementById("menuLeft").style.marginTop = "10px";

    } else {

        document.getElementById("menuRight").style.position = "absolute";
        document.getElementById("menuRight").style.top = "152px";
        document.getElementById("menuRight").style.marginTop = "0px";

        document.getElementById("menuLeft").style.position = "absolute";
        document.getElementById("menuLeft").style.top = "152px";
        document.getElementById("menuLeft").style.marginTop = "0px";

    }

} else if(document.body && document.body.scrollTop) {

    if(document.body.scrollTop > 142) {

        document.getElementById("menuRight").style.position = "fixed";
        document.getElementById("menuRight").style.top = "0";
        document.getElementById("menuRight").style.marginTop = "10px";

        document.getElementById("menuLeft").style.position = "fixed";
        document.getElementById("menuLeft").style.top = "0";
        document.getElementById("menuLeft").style.marginTop = "10px";

    } else {

        document.getElementById("menuRight").style.position = "absolute";
        document.getElementById("menuRight").style.top = "152px";
        document.getElementById("menuRight").style.marginTop = "0px";

        document.getElementById("menuLeft").style.position = "absolute";
        document.getElementById("menuLeft").style.top = "152px";
        document.getElementById("menuLeft").style.marginTop = "0px";

    }

} else if(document.documentElement && document.documentElement.scrollTop) {

    if(document.documentElement.scrollTop > 142) {

        document.getElementById("menuRight").style.position = "fixed";
        document.getElementById("menuRight").style.top = "0";
        document.getElementById("menuRight").style.marginTop = "10px";

        document.getElementById("menuLeft").style.position = "fixed";
        document.getElementById("menuLeft").style.top = "0";
        document.getElementById("menuLeft").style.marginTop = "10px";

    } else {

        document.getElementById("menuRight").style.position = "absolute";
        document.getElementById("menuRight").style.top = "152px";
        document.getElementById("menuRight").style.marginTop = "0px";

        document.getElementById("menuLeft").style.position = "absolute";
        document.getElementById("menuLeft").style.top = "152px";
        document.getElementById("menuLeft").style.marginTop = "0px";

    }

} 
```

我该怎么做才能使 IE 中的结果更可预测？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:32:33.927

我想这可能是你的条件的问题。如果滚动处理程序在滚动返回 0 时触发，则每个条件都将返回`false`，因为`0`已转换为 false。我想到的最简单的解决方法是在最后添加另一个 else 来恢复绝对位置：

```
if(window.pageYOffset) {
    [...]
} else if(document.body && document.body.scrollTop) {
    [...]
} else if(document.documentElement && document.documentElement.scrollTop) {
    [...]
} else {

    document.getElementById("menuRight").style.position = "absolute";
    document.getElementById("menuRight").style.top = "152px";
    document.getElementById("menuRight").style.marginTop = "0px";

    document.getElementById("menuLeft").style.position = "absolute";
    document.getElementById("menuLeft").style.top = "152px";
    document.getElementById("menuLeft").style.marginTop = "0px";

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:33:50.477

`pageYOffset`并且`pageXOffset`在 IE8 及之前的版本中不受支持。你应该开始使用 jQuery，这段代码有点难看。如果您使用 jQuery，您无法确保即使 IE 也会显示相同的结果。您的代码将如下所示

```
var pageXOffset = $(window).scrollLeft()
var pageYOffset = $(window).scrollTop();
var menuRight = $('#menuRight');
var menuLeft = $('#menuLeft');

if(pageYOffset) {
 if(pageYOffset > 142) {
  menuRight.css({position: "fixed", top: "0", marginTop: "10px"});
  menuLeft.css({position: "fixed", top: "0", marginTop: "10px"});
 } else {
  menuRight.css({position: "absolute", top: "152px", marginTop: "0px"});
  menuLeft.css({position: "absolute", top: "152px", marginTop: "0px"});
 }
} else if(document.body && document.body.scrollTop) {
 //etc.
} 
```

# vba - 在打开文档时模拟在 Word 中键入和按下组合键

> ID：13451734
> 
> 赞同：1
> 
> 时间：2012-11-19T10:16:32.313
> 
> 标签：vba, ms-word

打开 Word 文档后，我想模拟键入“abcd”，然后按 ALT+J。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:53:48.050

内部**[`ThisDocument`](http://msdn.microsoft.com/en-us/library/office/aa189914%28v=office.10%29.aspx)**模块。

```
Private Sub Document_Open()
    Selection.TypeText ("abcd")
    SendKeys "%{K}"
End Sub 
```

**参考：[`SendKeys()`](http://msdn.microsoft.com/en-us/library/office/aa202943%28v=office.10%29.aspx)**

# jquery - Show scrollbar with jqGrid, when grid initially wider than page

> ID：13451735
> 
> 赞同：0
> 
> 时间：2012-11-19T10:16:38.287
> 
> 标签：jquery, jqgrid

I am using jqGrid in various places throughout a web app. I want to use specified column widths (which I don't want to be changed to avoid wrapping/text cut off) and if the total of the column widths for a particular grid goes over the page width I want a scroll bar to appear on the grid, not on the page. Is this possible with jqGrid options, or would some extra javascript be required as I haven't been able to get this behaviour.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:33:49.627

您可以通过设置它的宽度选项来限制网格的宽度（还要记住您需要`shrinkToFit: false`在选项中设置），例如：

```
$('#gridId').jqGrid({
    ...
    shrinkToFit: false,
    width: $(document).width()
}); 
```

这也可以通过以下方法动态更改（例如在页面调整大小时）`setGridWidth`：

```
$('#gridId').jqGrid('setGridWidth', $(document).width()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:30:49.860

我不确定我是否理解您的更正：有很多意见是设置网格宽度的最佳方法。

一般来说`shrinkToFit: false`，`width`如果你想拥有像你在`colModel`. 如果您不希望用户能够在列标题之间的分区的拖放方面更改列宽，则可以对某些列使用[fixed: true属性。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)

此外，我建议您阅读[另一个答案](https://stackoverflow.com/a/9599685/315935)，其中我描述了如何修改 jqGrid 的代码，以便在用户调整列大小后调整网格的总宽度。我不确定您是否想要这种行为。我个人使用这种方法。

# iphone - 从自定义单元格加载时如何调整单元格表的高度？

> ID：13451738
> 
> 赞同：0
> 
> 时间：2012-11-19T10:16:51.110
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我在其中加载了`UITableView`3 种类型的 custom `cells`。我为此制作了 3 个自定义类，并使用布局`subview`方法添加了所有元素 Programmatic。但问题是所有 3 都有一个文本视图。它可以是可变的。在该文本视图内容之后，我需要添加一个按钮和一个`label`. 我可以做到，但是如何根据内容视图大小增加单元格的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:29:04.373

请检查自定义单元格高度是否与表格视图每个单元格高度相同。

您可以使用以下功能来调整表格视图的单元格高度。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return height;
} 
```

您可以使用这样的代码。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    Defination *definition = [self.dataSource objectAtIndex:indexPath.row];
    NSString *detailString = definition.detailString;
    CGSize detailSize;
    detailSize = [detailString sizeWithFont:fontSize(12.0) constrainedToSize:CGSizeMake(420, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap];

    return detailSize.height + 20.0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:47:28.930

生病添加另一个测量更复杂细胞的例子。请注意我的测量代码不是 100% 正确，但它显示了方法

```
+ (CGFloat)calculatedCellHeightForTweet:(id)tweet width:(CGFloat)width {
//text
CGSize s1 = [tweet[@"text"] sizeWithFont:[UIFont systemFontOfSize:[UIFont smallSystemFontSize]]
                       constrainedToSize:CGSizeMake(width, MAXFLOAT)
                           lineBreakMode:NSLineBreakByWordWrapping];

//user
NSString *text;
if(![tweet[@"to_user"] isKindOfClass:[NSNull class]])
    text = [NSString stringWithFormat:@"%@ > %@", tweet[@"from_user"], tweet[@"to_user"]];
else
    text = tweet[@"from_user"];
CGSize s2 = [text sizeWithFont:[UIFont boldSystemFontOfSize:[UIFont labelFontSize]]
                      forWidth:width
                 lineBreakMode:NSLineBreakByWordWrapping];

return fmaxf(s1.height + s2.height + /*padding*/ 44, 60);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:39:49.077

您可以使用以下函数计算高度

```
-(CGSize)SizeOfString:(NSString *)string withFont:(UIFont *)font constrainedToWidth:(CGFloat)width 
{
    CGSize size = [string sizeWithFont:font constrainedToSize:CGSizeMake(width, 4000) lineBreakMode:UILineBreakModeWordWrap];
    return CGSizeMake(width, size.height + 10);
} 
```

称呼

```
CGSize size = [self SizeOfString:your_text withFont:your_font constrainedToWidth:width_of_showing_area]; 
```

# delphi - 实时音频处理

> ID：13451740
> 
> 赞同：0
> 
> 时间：2012-11-19T10:16:55.637
> 
> 标签：delphi, firemonkey, delphi-xe3, firemonkey-fm2

我在大学里有一堂课，我们在那里探索 Embercader RAD Studio XE3。我们试图找到一个 Firemonkey 或 VCL 组件/库来支持我们进行音频处理，例如采样或处理实时 microfone 源。

每一个帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:38:24.857

试试[mitov Software](http://www.mitov.com)[`AudioLab`](http://www.mitov.com/products/audiolab#overview)的组件。

# mysql - Groovy：解析具有特定扩展名的文件以导入 MySQL，然后将其重命名为 *.bak

> ID：13451741
> 
> 赞同：1
> 
> 时间：2012-11-19T10:16:55.777
> 
> 标签：mysql, file, parsing, groovy

我制作了一个脚本，用于连接数据库并更改特定列中的数据以确定数字。现在我想从具有特定扩展名的文本文件中读取一个数字，对数据库中的这些数字进行更改，然后用 .bak 扩展名重命名文件。请帮帮我。我提前感谢您的帮助！

```
import groovy.sql.Sql
sql = Sql.newInstance('jdbc:mysql://localhost:3306/database', 'login', 'password', 'com.mysql.jdbc.Driver')
int rowsAffected = sql.executeUpdate('update tablename set column = '01' where number=$NumberFromFile')
println "updated: ${rowsAffected}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:53:06.273

像这样的东西应该工作：

```
def newValue = '01'

new File( '/path/to/data.input' ).with { file ->
  file.withReader { reader ->
    new Scanner( reader ).useDelimiter( ';' ).with { scanner ->
      while( scanner.hasNext() ) {
        sql.executeUpdate "UPDATE tablename SET column=$newValue WHERE number=${scanner.nextInt()}"
      }
    }
  }
  file.renameTo( new File( file.parent, "${file.name}.bak" ) )
} 
```

显然，您可能希望在事务或批次中执行此操作，但这应该会给您这个想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T09:55:15.267

现在我有一个脚本：

```
def tmn_file = ~/.*\.tmn/
def tmc_file = ~/.*\.tmc/
def newTerm = new Properties().with { props ->
    new File(inputPath).eachFile(tmn_file) { file ->
        file.withReader    { reader ->
            load( reader )
            println "Read data from file $file:"
            something read from file...
            switch( props.ACTION ) {
                case 'NEW':
                    do something...
                    }
            switch( props.ACTION ) {
                case 'CHANGE':
                    do something...
                    } 
```

此脚本在目录中查找路径 inputPath 扩展名为 tmn_file 的文件，该文件可以包含 ACTION - NEW 或 CHANGE。

脚本效果很好，但我想做另一件事：

如果文件具有扩展名 *.tmn (tmn_file) - 仅以新案例开始 ACTION

如果文件具有扩展名 *.tmc (tmc_file) - 仅以更改大小写开始操作

我怎样才能实现决定？

# html - 您可以使用条件标签定位 IE10 Metro 吗？

> ID：13451743
> 
> 赞同：1
> 
> 时间：2012-11-19T10:17:06.523
> 
> 标签：html, css, internet-explorer, internet-explorer-10

我有一个页面，并且字段的宽度显示在所有浏览器和操作系统组合中都可以找到，但在`IE10 Metro`内容中下拉到下一行，因为该字段显然不够宽。

我不想再扩展字段的宽度，因为我已经不得不为`Firefox`on`OSx`和其他 IE 变体这样做了；所以不想让它更广泛。

有没有办法可以`IE10 Metro`使用条件标签或其他方式来定位 - 就像其他 IE 一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:22:41.643

`IE10 Metro`由于 IE 10 已删除条件注释，您将无法检测到。资料来源：[http ://www.sitepoint.com/microsoft-drop-ie10-conditional-comments/](http://www.sitepoint.com/microsoft-drop-ie10-conditional-comments/)

一种解决方案可能是使用 Javascript 功能检测来确定浏览器。

# c++ - SegFault 与一个版本的等效代码？

> ID：13451745
> 
> 赞同：1
> 
> 时间：2012-11-19T10:17:10.580
> 
> 标签：c++, segmentation-fault, equivalent

我认为有两组代码是等效的，但一组会导致段错误，另一组不会。我真的很困惑为什么会这样……

我想要的是创建一个查找功能

此代码确实有效：

```
 MyPair <Comparable, BinomialNode<Comparable>*> dummy(x, NULL);
    MyPair <Comparable, BinomialNode<Comparable>*>* pair = hashTable.find(dummy);
    if(pair!=NULL)
    {
        addDupe(x, pair);   
    }

void addDupe( Word & x, MyPair<Word, BinomialNode<Word>*>* pair)
{
    list<int>::iterator it;
    list<int> lines = x.getLineNums();
    for ( it=lines.begin(); it != lines.end(); it++ )
    {
        pair->second->element.addLineNum(*it);
    }
} 
```

下面的代码不起作用。上面的变化是我试图做的是尝试将查找函数移出并使其返回一个 BinomialNode*，这将是 MyPair 中的第二个元素。此版本中的 addDupe 处理 BinomialNode* 而不是 MyPair*。

我跟踪了段错误以返回pair-> second。
为什么这会导致段错误但上面的 pair->second->element.addLineNum(*it) 不会？

```
BinomialNode<Comparable>* node = find(x);
if(node!=NULL)
{
    addDupe(x, node);
}

BinomialNode<Comparable>* find(Comparable& x)
{
    MyPair <Comparable, BinomialNode<Comparable>*> dummy(x, NULL);
    MyPair <Comparable, BinomialNode<Comparable>*>* pair = hashTable.find(dummy);
    if(pair!=NULL)
         return NULL;
     return pair->second; //LINE CAUSES SEGFAULT
}

void addDupe( Word & x, BinomialNode<Word>* node)
{
    list<int>::iterator it;
    list<int> lines = x.getLineNums();
    for ( it=lines.begin(); it != lines.end(); it++ )
    {
            node->element.addLineNum(*it);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:18:46.080

```
if(pair!=NULL) //when pair is not 0
         return NULL; 
```

所以在那之后你试图访问`NULL`指针是什么原因`SEGFAULT`

您必须检查`NULL`：

```
if(pair==NULL) //when pair is 0
             return NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:20:46.780

`if(pair!=NULL) return NULL;`

应该`if(pair==NULL) return NULL;`

# java - 如何从选择查询中获取另一个字符串？

> ID：13451746
> 
> 赞同：0
> 
> 时间：2012-11-19T10:17:14.823
> 
> 标签：java, mysql, string, jsp

我想从列号中获取字符串。4 从我的数据库中检查用户权限。

我可以`rs.getString(index)`用来从第 4 列获取数据吗？我想检查用户的权限...所以如果列数据等于 4，页面将被重定向到 AdminControlPanel.jsp 但是，此代码不起作用:(

```
String user=request.getParameter("login");
String pass=request.getParameter("password");
 Class.forName("com.mysql.jdbc.Driver").newInstance();
    Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/android","root","root");  
           Statement st=con.createStatement();
           ResultSet rs=st.executeQuery("select * from users where login='"+user+"' and password='"+pass+"'");
           String p = rs.getString(4);                   
           int count=0;
           while(rs.next()){
           count++;
          }
      if(count>0 && p == "4"){
             // out.println(rs);
                           response.sendRedirect("AdminControlPanel.jsp");
                      }
          else{
               out.println("aaa");
               response.sendRedirect("#");
           }
        }
                 catch(Exception e){
    System.out.println(e);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:20:55.363

```
String p = rs.getString(4);   // This should be inside your while                  
int count=0;
while(rs.next()){
    count++;
} 
```

*   您应该在`while`循环内移动第一行。在使用 将光标移动到该行之前，您无法获取一行的列`res.next()`。

*   此外，由于您的数据库理想情况下应该只有和`one`组合的记录。因此，您可以更好地使用 an 而不是.`username``password``if``while`

*   而且你真的不需要`count`那里的变量。

**所以，你的代码应该是： -**

```
ResultSet rs=st.executeQuery("select * from users where login='"+user+"' " +
                              "and password='"+pass+"'");
if (rs.next()) {
    String p = rs.getString(4);  // Note that using Column name is a better idea

    // or rs.getInt(4) if the column type is `int`

    if(p.equals("4")) {   // Use equals method to compare string content
         response.sendRedirect("AdminControlPanel.jsp");

    } else{
         out.println("aaa");
         response.sendRedirect("#");
    }
} 
```

另外，请注意，您应该使用`equals`方法比较您的字符串。`if (p == "4")`会给你错误的结果。`==`运算符不比较字符串的内容，而是比较用于比较的引用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:40:31.690

您正在比较两个字符串对象，而不是检查字符串中的值。

只需将代码更改为**p.equals("4")**并尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:18:46.193

你要

```
while (rs.next()) {
   String val = rs.getString(4);
   .... 
```

请注意，遍历 a`ResultSet`会遍历*rows*。对于每一行，列索引从“1”开始。

但是，通过列名获取更安全，因为您的 SQL 查询既没有指定列，也没有指定它们返回的顺序：

```
String val = rs.getString("COLUMN_NAME"); 
```

我从下面看到你需要一个整数。查看[ResultSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html)的文档以获取更多信息，但是：

```
int val = rs.getInt("COLUMN_NAME"); 
```

顺便说一句，我没有看到你在上面关闭你的`ResultSet`// `Statement`。`Connection`如果你不是，那么你需要！

# string - 反向字符串回文

> ID：13451747
> 
> 赞同：2
> 
> 时间：2012-11-19T10:17:17.803
> 
> 标签：string, reverse

嗨，我正在尝试反转字符串以制作回文。有人可以给我一个关于如何反转字符串的教程吗？我已经在线阅读了一些教程，并尝试将它们应用于我正在编写但没有成功的回文程序。

```
import java.util.Random;

public class IterativePalindromGenerator {

    public static void main(String[] args) {

        Random random = new Random();

        int floorValue = 1;

        int cielingValue = 20;

        int randomNumber = random.nextInt(cielingValue - floorValue)
                + floorValue;

        String alphabetLetters = "abcdefghijklmnopqrstuvwxyz";

        for (int i = 0; i < randomNumber; i++) {

            char generatedLetters = alphabetLetters.charAt(random
                    .nextInt(alphabetLetters.length()));

            String generatedLetterSTRINGType = Character
                    .toString(generatedLetters);// converts char to string

            System.out.print(generatedLetterSTRINGType);

        }   
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:21:16.890

要反转字符串，您可以使用 StringBuffers reverse() 方法：

```
public String reverse(String stringToReverse) {
    return new StringBuffer(stringToReverse).reverse().toString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-19T16:27:58.083

嘿，这是我大学课程的代码。我们的任务是实现一个递归过程。希望这可以帮助社区。

```
package DiskreteMathe;
import java.util.*;

public class AufgabePalindromTestRekursiv {

    public static void main (String[] args){
        Scanner sc = new Scanner(System.in);     
        System.out.println("Please enter text here:");
        String text= sc.next();
        System.out.println(testPalindrom(text));
    }
    public static boolean testPalindrom (String text){
        if (text.length()==2 && text.charAt(0)==text.charAt(1) || text.length()==1)
            return true;
        if(text.charAt(0)!=text.charAt(text.length()-1)){
            return false;
        } else {
            text = text.substring(1, text.length()-1);
            return testPalindrom(text);
        }
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T19:07:02.767

在为现有字符串创建回文时，您需要考虑结果字符串的偶数和奇数情况。例如，如果您输入字符串“abc”，您应该期望有两个结果回文字符串：abccba（偶数）和 abcba（奇数）。

这是我的代码：

```
public class PalindromeGenerator {

public static void main(String[] args) {
    String str = "abc";
    String reverse_str = "";

    for (int n = str.length(); n>0; n--){
        reverse_str += str.substring(n-1, n);
    }

    String even_str = str + reverse_str;
    String odd_str = str.substring(0, str.length()-1) + reverse_str;

    System.out.println(even_str); // print "abccba"
    System.out.println(odd_str); //print "abcba"
}

} 
```

我希望这可以帮助你。

# java - 验证具有属性 PSEUDONYM 的有效证书

> ID：13451762
> 
> 赞同：0
> 
> 时间：2012-11-19T10:18:16.007
> 
> 标签：java, x509certificate

目前，我正在接收使用证书签名的消息。到目前为止，一切都很好。然而，证书包含一个属性 PSEUDONYM。现在 Java 运行时不接受它。我得到一个 IO 异常。（当我删除 PSEUDONYM 异常消失时）有没有人知道您验证这些消息，因为我确信属性 PSEUDONYM 是允许的。C=DE,O=InfoCompany,OU=SoftwareMe,CN=SIGNER,SERIALNUMBER=1,假名=SIGNER

任何想法如何更改默认的 java 验证以允许 PSEUDONYM 标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T18:55:23.190

使用构造函数`X500Principal(String name, Map<String,String> keywordMap)`允许您在keywordMap 中指定自定义RDN。映射的键是 RDN 名称，值是 OID 的字符串表示形式。有关详细信息，请参阅[Java 文档](http://docs.oracle.com/javase/6/docs/api/javax/security/auth/x500/X500Principal.html#X500Principal%28java.lang.String,%20java.util.Map%29)。

# jquery - 如何动态地将单选按钮推入数组

> ID：13451764
> 
> 赞同：3
> 
> 时间：2012-11-19T10:18:23.623
> 
> 标签：jquery, asp.net-mvc-4, kendo-ui

我在下面给出的小提琴中使用了这种代码。

[http://jsfiddle.net/darrenarbell/4HTEr/](http://jsfiddle.net/darrenarbell/4HTEr/)

在那个小提琴而不是 2 我想要一个`radio button`或`checkbox` 我该怎么做。希望你能理解我的问题。

感谢和问候斯里尼瓦斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:41:58.167

API 文档：[columns.encoded](http://docs.kendoui.com/api/web/grid#columnsencoded%20booleandefault)

演示：http: [//jsfiddle.net/4HTEr/248/](http://jsfiddle.net/4HTEr/248/)

重要组成部分：

```
columns.push({
        field: entryIndex,
        title: "Column " + i,
        encoded: false
    }); 
```

请参阅`encode: false`列说明。当然，在准备数据时：

```
for (var i = 0; i < 5; i++) {
    var entryArray = [];
    for (var j = 0; j < 5; j++) {
        entryArray.push("<input type=\"checkbox\" />");
   }
    rows.push(kendo.observable({
        entries: entryArray
    }));
} 
```

复选框 HTML 代码推送而不是“2”

# python - python函数带有参数的奇怪行为

> ID：13451765
> 
> 赞同：0
> 
> 时间：2012-11-19T10:18:26.503
> 
> 标签：python

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

在下面的代码中，输出应该不是 6 6 7 6 但实际输出有很大不同，如下所述

```
i=5
def fs(args=i):
 print args
 print i

i=6
fs()
fs(7)

Actual Output is 5 6 7 6 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T10:19:45.737

代码在*定义*`args=i`函数时运行，而不是在*调用*函数时运行。

 **当您定义函数时，值`i`是 5。这意味着默认值`args`将始终为 5，即使您稍后将值更改`i`为 6。**

# .net - EF 5 - 获取导航属性的外键值

> ID：13451766
> 
> 赞同：1
> 
> 时间：2012-11-19T10:18:27.410
> 
> 标签：.net, entity-framework, entity-framework-5

我想获取导航属性的外键值，而不必定义外键属性（在加载导航属性之前）。

**为什么？**

我们缓存（例如）应用程序范围内的所有“状态”对象（是的，我们不能为此使用枚举）。当我们将具有导航属性的对象加载到此状态类时，存储库会将属性设置为缓存项。

我可以使用外键属性，但由于 EF 知道键，我想从 EF 中获取它（可能通过导航属性的 RelationshipManager 或 DBEntityReference），但我似乎找不到它。

*注意*：我使用的是 EF5，首先在 .Net 4.5 中编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:04:46.770

[我从Slauma](https://stackoverflow.com/questions/12334534/how-to-get-foreign-key-value-for-independent-association-without-hitting-databas?rq=1)找到了一个答案（在 stackoverflow 上）（不确定我是否应该将其标记为重复？）。我不得不稍微更改代码来处理具有多个关系的实体。很多东西仍然很丑，但它有效:)

```
RelationshipManager relMgr = ((IObjectContextAdapter)context).ObjectContext.ObjectStateManager.GetRelationshipManager(document);
IEnumerable<IRelatedEnd> relEnds = relMgr.GetAllRelatedEnds();
IRelatedEnd relEnd = relEnds.Where(r => r.RelationshipName.EndsWith("Document_Status")).Single();
EntityReference<Status> entityRef = relEnd as EntityReference<Status>;
var entityKey = entityRef.EntityKey;

short statusId =(short)entityKey.EntityKeyValues[0].Value; 
```

唯一的缺点是（据我所知。希望有人找到更好的方法？）一旦您分离实体或使用 AsNoTracking() 加载它，这些信息就会丢失。

# magento - 使用 Enterprise Magento 和 Solr 进行搜索和处理

> ID：13451768
> 
> 赞同：0
> 
> 时间：2012-11-19T10:18:40.030
> 
> 标签：magento, solr, enterprise

我在谷歌上搜索了很多，找不到这个问题的答案。

我们有 Enterprise Magento 并且正在使用 SOLR。我们想选择一组产品，并在 SOLR 返回时将它们放在搜索结果的顶部。我们会将其用于清仓产品等。

我的想法是将这些项目放在后端的一个特殊的非显示类别中，并以某种方式配置 SOLR 以在搜索结果中对这些产品施加更大的权重。但我看不到如何做到这一点。我只能看到如何加权产品属性。

有人有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:58:39.953

在 Solr 中为字段赋予不同的权重非常简单——只需将以下内容添加到 solrconfig.xml 中的默认 requestHandler

```
<requestHandler name="/select" class="solr.SearchHandler">
    <lst name="defaults">
       ...
       <qf>Weighted_Category^3 Lesser_Category^0.5</qf>
    </lst>
</requestHandler> 
```

如果存在匹配，这会将“加权类别”加权 3 倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T00:48:40.857

Magento-solr 有一个内置函数可以做到这一点。

magento/lib/apache/solr/config/elevate.xml：

```
<elevate>
    <query text="foo bar">
        <doc id="1" />
        <doc id="2" />
        <doc id="3" />
    </query>

    <query text="ipod">
        <doc id="MA147LL/A" />  <!-- put the actual ipod at the top -->
        <doc id="IW-02" exclude="true" /> <!-- exclude this cable -->
    </query>

</elevate> 
```

[QueryElevationComponent](https://wiki.apache.org/solr/QueryElevationComponent)

# select - 通过在 dojo 1.8 中设置预选值，存储馈送 dijit/form/Select 中的问题

> ID：13451771
> 
> 赞同：0
> 
> 时间：2012-11-19T10:18:47.270
> 
> 标签：select, dojo

当我尝试设置我的商店提供的 dijit/form/Select 小部件的预选（或任何）值时，还有另一个问题。

标记代码是：

```
<div data-dojo-type="dijit/form/Select" jsId="editOptionsDialog_select" id="editOptionsDialog_select"></div> 
```

和js：

```
function editOptionsDialog_fetchData(cId, fieldName, vId) {
        var store;
        var def;
        var return_def = new Deferred();

        store = new degreeStore();
        def = store.getJsonData();

        def.then(function(data) {
            store.data = data.items;
            editOptionsDialog_select.setStore(new ObjectStore({
                objectStore : store
            }));

            editOptionsDialog_select.value = vId;

            editOptionsDialog_select.startup();
            editOptionsDialog_select.set('value', 5);

            console.info(editOptionsDialog_select);
            // here, firebug still shows value = 1
            return_def.resolve();
        });

        return return_def;
    } 
```

提前谢谢

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:11:47.923

**终于找到了解决问题的办法：**

由于选择元素不支持数字索引，因此必须将索引转换为字符串。这样，editOptionsDialog_select.set('value', vId.toString()) 终于奏效了！

确保通过强制转换的数字 id 或默认的 textual-keys 为您的商店提供数据 -> (String)id ，其中 id 是一个整数。

问候

# iphone - 在 iphone 中选择轻按手势上的图像

> ID：13451774
> 
> 赞同：1
> 
> 时间：2012-11-19T10:18:58.017
> 
> 标签：iphone, objective-c, ios, cocoa-touch

如何在轻按手势上选择图像。我想添加另一个与我点击的图像相同的图像。如果我有 3 张图片并且我点击了第 2 张，那么它将动态添加与第 2 张相同的第 4 张图片。

```
UIImage *image = [[info objectForKey:@"UIImagePickerControllerOriginalImage"] retain];

    UIView *holderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, image.size.width/4, image.size.height/4)];
    UIImageView *imageview = [[UIImageView alloc] initWithFrame:[holderView frame]];

UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
    [tapRecognizer setNumberOfTapsRequired:1];
    [tapRecognizer setDelegate:self];
    [holderView addGestureRecognizer:tapRecognizer];

-(void)tapped:(id)sender {

    [[[(UITapGestureRecognizer*)sender view] layer] removeAllAnimations];
    NSLog(@"Tapped");
    [self.view bringSubviewToFront:[(UITapGestureRecognizer*)sender view]];
    UIImageView *image = (UIImageView *)[(UITapGestureRecognizer*)sender view];
    [self.view addSubview:image];
} 
```

我`[(UITapGestureRecognizer*)sender view]]`用来获得这种观点。但我不能。在点击时，我想添加我点击的图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T11:36:48.360

问题在于您的点击方法。当您编写时，`(UIImageView *)[(UITapGestureRecognizer*)sender view];`您将添加相同`imageView`的内容，并且它的框架将与添加时相同。然后，您使用 来添加它`addSubview`，如果这样做，它将被添加到与之前添加的位置相同的位置。

只需更改您的`tapped`喜欢：

```
-(void)tapped:(id)sender
{
  [[[(UITapGestureRecognizer*)sender view] layer] removeAllAnimations];
  UIImageView *imgView = (UIImageView *)[(UITapGestureRecognizer*)sender view];
  UIImageView *imageview = [[UIImageView alloc] initWithFrame:yourFrame]; //Set the next frame for the image view
  imageView.image = imgView.image;
  [self.view addSubview:imageView];
  [imageView release];
  imageView = nil;
} 
```

还将手势添加到 UIImageView，例如：

`[imageview addGestureRecognizer:tapRecognizer];`不是 UIView。

还设置`imageview.userInteractionEnabled = YES;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:01:39.333

您似乎将 a`UIImage`与 a混淆了`UIImageView`。A`UImageView`是一种`UIView`并且可以有一个（并且只有一个）超级视图。如果您想知道它拥有什么图像，您可以使用该`'image'`属性。然后你可以创建一个`UIImageView`与点击的相同的新的`UIImage`。根据您的应用程序，您可能需要调整其框架的大小，并将其设置为`contentMode`.

无论如何，如果点击事件根本没有被注册，很可能是因为`UIImageView`默认情况下`userInteractionEnabled=NO`，您必须将其显式设置为`YES`在代码中或在 XIB 文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T17:09:54.113

3个问题：

1.  正如乔恩罗斯指出的那样，您需要一个`UIImageView`具有相同功能的新产品。`UIImage`
2.  您需要为 new 设置框架`UIImageView`，就像 Midhun MP 指出的那样。
3.  两者都错过了手势识别器逻辑，这在您的情况下也被破坏了。您一次只能将手势识别器添加到一个视图。

要解决 3，您需要 (a) 每个 一个识别器`UIImageView`，或者 (b) 为包含视图采用一个识别器，这就是`self`您的情况。

在情况 (a) 中，您确实应该继承`UIImageView`并在那里实现手势处理。在情况 (b) 中，您可以将识别器添加到您将循环遍历子视图以找到通过点击`self`的事件上`tapped:`

```
for(UIView* subject in self.subviews)
{
    CGPoint pointInSubjectsView = [recognizer locationInView:subject];
    BOOL pointInsideObject = [subject pointInside:pointInSubjectsView withEvent:nil];
    if(pointInsideObject){
        //subject is the tapped view. do the work...
    }
} 
```

您的代码表明您正在制作要在点击时取消的动画，并且图像可能会重叠，并且您想将点击的图像放在前面？如果是这种情况，您可能应该选择 (a)。

祝你好运。

# asp.net-mvc - Log4Net 仅在从 localhost 浏览时记录

> ID：13451775
> 
> 赞同：0
> 
> 时间：2012-11-19T10:19:08.513
> 
> 标签：asp.net-mvc, iis, asp.net-mvc-4, log4net

我在多个应用程序中使用 Log4Net 有一段时间了。它一直运行良好，但最近我注意到应用程序突然不再记录。原来这个问题对于我所有的应用程序都是一样的，几个月前它们都突然停止了记录。奇怪的是，当我直接在服务器 (http://localhost/myApp) 上访问应用程序时，日志记录工作，而当我从另一台 PC 访问应用程序时，没有任何记录。我的第一个想法是它必须与文件/文件夹权限有关，但允许“每个人”（Windows 用户组）完全访问日志文件夹并没有帮助。

它们都是在 IIS7（Windows 2008 R2 Enterprise OS）上运行的 ASP.Net MVC 4 应用程序，应用程序池使用“ApplicationPoolIdentity”。Log4Net 版本是 1.2.10.0，我使用的是自定义 CompositeRollingFileAppender。我认为自定义 appender 可能有问题，但是当我尝试切换到标准 RollingFileAppender 时问题仍然存在。我已经在多台服务器上看到了这个问题。

有没有人见过类似的东西？请分享您的想法，因为我不明白为什么在本地或远程访问应用程序应该有任何区别。

这是我的一个应用程序的 web.config 中的 log4net 部分：

```
<log4net>
    <appender name="RollingFileAppender" type="[mynamespace].CompositeRollingFileAppender">
      <file value="Logs/ApplicationLog.log" />
      <appendToFile value="true" />
      <rollingStyle value="Composite" />
      <maxSizeRollBackups value="20" />
      <maximumFileSize value="10MB" />
      <datePattern value="_yyyy-MM-dd" />
      <staticLogFileName value="true" />
      <preserveLogFileNameExtension value="true" />
      <layout type="log4net.Layout.PatternLayout,log4net">
        <param name="ConversionPattern" value="%utcdate;%property{ErrorCode};%property{Severity};%property{ErrorName};%property{Module};%m%n" />
      </layout>
    </appender>
    <root>
      <priority value="ALL" />
      <appender-ref ref="RollingFileAppender" />
      <level value="Warn" />
    </root>
    <logger name="NHibernate">
      <level value="OFF" />
    </logger>
    <logger name="NHibernate.SQL">
      <level value="OFF" />
    </logger>
  </log4net> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:23:05.127

事实证明，这个问题与 log4net 没有直接关系，而是与 ASP.Net MVC3 和更新版本默认处理异常的方式有关。几个月前，我们将应用程序从 MVC2 更新到 MVC4，并且由于默认情况下从 global.asax.cs.Application_Start() 执行的这段代码，当 CustomErrors 设置为 RemoteOnly 或 On 时，它“绕过”了我们的异常处理模块：

```
public class FilterConfig
    {
        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
        }
    } 
```

[这个线程](https://stackoverflow.com/questions/6508415/application-error-not-firing-when-customerrors-on)让我走上了正确的轨道。我最终删除了 filters.Add(..) 行，现在它似乎工作正常！

# ios - 在 iOS SDK 中使用 mov、3gp 和 mp4 播放 RTSP 扩展

> ID：13451778
> 
> 赞同：3
> 
> 时间：2012-11-19T10:19:32.010
> 
> 标签：ios, rtsp

我想`stream ,play video`从`RTSP`网址

rtsp://184.72.239.149/vod/mp4:BigBuckBunny_175k.mov 也在 3gp,mp4 中

我已经下载了[测试代码](https://github.com/mooncatventures-group/RTSPPlay)， 可以正常使用`rtsp://184.72.239.149/vod/mp4:BigBuckBunny_175k.mov`但无法使用`3gp``mp4`

我们`play` `video`可以`audio`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:16:18.647

看看这个项目以获得一些提示

[https://github.com/mooncatventures-group/WebStreamX_flv_demo/](https://github.com/mooncatventures-group/WebStreamX_flv_demo/)

它与其他 gits 类似，但显示了如何在本地播放视频，还在 github 问题日志上为您回答了类似的问题

# javascript - 浏览器选项卡计时器在异步跨域ajax请求的情况下旋转？

> ID：13451782
> 
> 赞同：0
> 
> 时间：2012-11-19T10:19:56.970
> 
> 标签：javascript, jquery, asynchronous, webserver, cross-domain

我有 jsp page1，它是从托管在 tomcat1 上的 application1 进行的。我正在从我的浏览器（通过页面）向不同 web 服务器（node.js）上的不同应用程序（跨域请求）发出异步跨站点 ajax 请求。发生了什么直到我没有得到响应（我在 3-4 分钟后得到），我的 firefox/chrome 客户端选项卡继续显示处理（如计时器继续在选项卡上旋转，左下角显示等待服务器名称）这不会发生在 IE 上。由于这是异步调用，我不希望用户感觉某些东西正在服务器上处理。

**有没有办法阻止计时器在 Firefox/chrome 的浏览器选项卡上不断旋转的行为？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:26:24.233

您可以使用以下任何方法来隐藏 chrome/firefox 的“加载”栏（希望它会起作用）：

1.  在不同的线程中进行 Ajax 调用（阅读有关[Web_worker 的信息](http://en.wikipedia.org/wiki/Web_worker "Web_worker")）。（这是 HTML5 标准，不适用于旧浏览器）

2.  如果您将 ajax 调用作为页面 onload() 的一部分启动，请尝试将其放在 setTimeout() 或 setInterval() 中。

3.  尝试将您的请求提交到隐藏的 iframe（将隐藏的表单和 iframe 嵌入到您的页面中，将您的请求参数添加为隐藏变量，将表单的目标设置为该 iframe 的名称，将表单的操作设置为您的 ajax 请求的 url，提交表单）。这可能不起作用，因为它会加载隐藏页面（但值得尝试）。

# spring - @Autowired 不适用于我的 SOAP 处理程序类。抛出 nullPointerException？

> ID：13451784
> 
> 赞同：0
> 
> 时间：2012-11-19T10:19:59.293
> 
> 标签：spring, annotations, autowired

这是我的 SOAP 处理程序类，用于为 CRM 生成安全服务处理程序。当我硬编码我的凭据 - 用户名和密码时，一切正常。现在，我尝试通过在属性文件中定义凭据并在此类中自动装配来删除硬编码。这种方法不起作用，每次我尝试访问我的 CRM 时，Spring 都会抛出 NullPointerExc（我猜不会发生自动装配！）。为什么@Autowired 在我的@Service 和@Controller 类中运行良好却不能在这里工作？这是我的代码：

```
package com.myPortlet.crmService;

import java.util.Properties;

import javax.xml.namespace.QName;
import javax.xml.soap.SOAPElement;
import javax.xml.soap.SOAPEnvelope;
import javax.xml.soap.SOAPFactory;
import javax.xml.soap.SOAPHeader;
import javax.xml.ws.handler.MessageContext;
import javax.xml.ws.handler.soap.SOAPHandler;
import javax.xml.ws.handler.soap.SOAPMessageContext;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
public class ECMClientHeaderHandler implements SOAPHandler<SOAPMessageContext> {

final static Logger logger = LoggerFactory
        .getLogger(ECMClientHeaderHandler.class);
private static final String AUTH_NS = "http://schemas.xmlsoap.org/ws/2002/12/secext";
private static final String AUTH_PREFIX = "wss";

public ECMClientHeaderHandler() {
}

public boolean handleFault(SOAPMessageContext smc) {
    return true;
}

public void close(MessageContext mc) {
}

@Autowired
private Properties applicationProperties;

public boolean handleMessage(SOAPMessageContext smc) {
    boolean direction = ((Boolean) smc
            .get(SOAPMessageContext.MESSAGE_OUTBOUND_PROPERTY))
            .booleanValue();

    String userName = applicationProperties.getProperty("myCRM.userName");  /*previously hard-coded*/
    String password = applicationProperties.getProperty("myCRM.password"); /*previously hard-coded*/
    logger.info("This is USERNAME:"+ userName);
    logger.info("This is PASSWORD:"+ password);

    if (direction) {
        try {
            SOAPEnvelope envelope = smc.getMessage().getSOAPPart()
                    .getEnvelope();
            SOAPFactory soapFactory = SOAPFactory.newInstance();

            // WSSecurity <Security> header
            SOAPElement wsSecHeaderElm = soapFactory.createElement(
                    "Security", AUTH_PREFIX, AUTH_NS);
            SOAPElement userNameTokenElm = soapFactory.createElement(
                    "UsernameToken", AUTH_PREFIX, AUTH_NS);
            SOAPElement userNameElm = soapFactory.createElement("Username",
                    AUTH_PREFIX, AUTH_NS);
            userNameElm.addTextNode(userName);

            SOAPElement passwdElm = soapFactory.createElement("Password",
                    AUTH_PREFIX, AUTH_NS);
            passwdElm.addTextNode(password);

            userNameTokenElm.addChildElement(userNameElm);
            userNameTokenElm.addChildElement(passwdElm);

            // add child elements to the root element
            wsSecHeaderElm.addChildElement(userNameTokenElm);

            // create SOAPHeader instance for SOAP envelope
            SOAPHeader sh;
            if(envelope.getHeader()==null){
                logger.info("SOAPHeader null.Add header");
                sh = envelope.addHeader();
            }else{
                logger.info("SOAPHeader already present");
                 sh = envelope.getHeader();
            }   

            // add SOAP element for header to SOAP header object
            sh.addChildElement(wsSecHeaderElm);

        } catch (Exception ex) {
            ex.printStackTrace();
            throw new RuntimeException(ex);
        }
    }
    return true;
}

public java.util.Set<QName> getHeaders() {
    return null;
} 
```

}

“myCRM.userName”和“myCRM.password”在我的 application.properties 文件中定义。而application.properties的classPath在applicationContext.xml中定义：

```
<util:properties id="applicationProperties" location="classpath:/i18n/application.properties"/> 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:29:51.547

必须让 Spring Context 意识到它需要在特定类上加载一些自动装配的组件。@Controller 注释和 spring-servlet.xml 中的引用确保了这一点。您可以尝试将其添加到您的 spring-servlet.xml

```
<context:component-scan base-package="com.myPortlet.crmService" /> 
```

还在你的类中添加一个 @Controller 注释以在服务器启动时启动自动连接。否则，您的 Properties 实例将在您每次尝试访问它时为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T01:04:53.860

我在尝试在 @webservice 类中注入依赖项时遇到了类似的问题。我解决了它在类中添加下面的方法（org.springframework.web.context.support.SpringBeanAutowiringSupport;）

```
@PostConstruct
    @WebMethod(exclude = true)
    public void init() {
        SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);
    } 
```

# twig - Twig 有空合并运算符吗？

> ID：13451785
> 
> 赞同：25
> 
> 时间：2012-11-19T10:19:59.933
> 
> 标签：twig, coalesce

我正在使用[Twig](http://twig.sensiolabs.org/) PHP 模板引擎。

是否有可用的运算符将输出第一个非空值（合并）？

例如（使用 PHP 伪代码）：

```
{{ title ?: "Default Title" }} 
```

我知道我可以做这样的事情，但这有点啰嗦：

```
{% if title %}{{ title }}{% else %}{{ "Default Title" }}{% endif %} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2016-10-24T04:44:22.747

**空合并运算符在Twig 1.24**（2016 年 1 月 25 日）中正式引入。

> [* 添加对`??`运营商的支持](https://github.com/twigphp/Twig/blob/7e5c06a3be86f8321ea826ea80483dc5cfc9f081/CHANGELOG#L57)

这意味着现在可以做到这一点......

```
{{ title ?? "Default Title" }} 
```

您甚至可以将它们链接在一起，以检查多个变量，直到找到有效的非空值。

```
{{ var1 ?? var2 ?? var3 ?? var4 }} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-19T13:43:42.097

是的，有一个名为[default](http://twig.sensiolabs.org/doc/filters/default.html)的过滤器。您可以将其应用于您的代码，如下所示：

```
{{ title|default("Default Title") }} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-02T23:01:17.180

从 Twig 1.12.0 开始，它*确实*有`?:`运算符，但它并不是真正的“空值合并”。它检查真实性，而不仅仅是空值，因此`0 ?: 1`会出来`1`。

[文档](http://twig.sensiolabs.org/doc/templates.html#other-operators)

# macos - 可可 (MAC) 应用程序中的 NSTimer

> ID：13451787
> 
> 赞同：0
> 
> 时间：2012-11-19T10:20:04.757
> 
> 标签：macos, cocoa, nstimer, nsthread

我正在开发一个计时器应用程序，我一次使用了 5-6 个计时器，我需要所有计时器同时运行。例如。计算时间，更新 UI 等。

但这是挂起我的应用程序，一段时间后，它开始没有响应。

然后我退出应用程序并重新启动，但这次我没有启动计时器（只有一个计时器在运行），我发现这次应用程序很好。

我认为问题是由于同时使用了多个计时器，因为这些计时器每秒钟后都会频繁更新 UI。我需要用更新的时间来更新我的标签，但是我如何在不使用 NSTimer 的情况下做到这一点。如果 NSThread 是一个选项，那么请给我一个例子来实现这一点。

# php - 仅获取对象返回 1 个值

> ID：13451789
> 
> 赞同：0
> 
> 时间：2012-11-19T10:20:13.520
> 
> 标签：php, pdo

嗨，伙计们，我在获取对象时遇到问题，请参阅下面的代码。

餐桌动物

```
-----------------------
id   |   type    | name
-----------------------
1      Cat         Muning
2      Kookaburra  Bruce
3      Dog         Bruce
----------------------- 
```

动物.php

```
class Animal extends DatabaseObject{

static $db_fields;
static $table_name = 'animals';

public function animal_group(){
global $database;

$sql = "SELECT animal_name as ani_name, COUNT(animal_name) as quantity FROM " . static::$table_name . " GROUP BY animal_name";

$stmt = $database->query($sql);
return $result = $database->fetch_object($stmt);
}

}

$animal = new Animal(); 
```

索引.php

```
<?php
require_once('includes/database.php');
require_once('includes/animal.php');
$ani = $animal->animal_group();

echo $ani->ani_name . " - " . $ani->quantity;
?> 
```

结果

```
Bruce - 2 
```

它应该是什么

```
Bruce - 2
Muning - 1 
```

我也尝试过 While 和 Foreach 但仍然没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:22:33.937

`fetch_object`返回*一行*作为对象。如果要获取所有这些，则必须在循环中调用它，或者使用另一种方法返回结果集中的所有行（如果您使用的是`mysqli`，那将是`fetch_all`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:24:09.283

> 你在使用 PDO 吗？
> 
> 使用 fetchAll() 而不是 fetch_object。

# entity-framework - 如何拦截 EF POCO 对象的检索？

> ID：13451790
> 
> 赞同：0
> 
> 时间：2012-11-19T10:20:15.620
> 
> 标签：entity-framework, ef-code-first, objectcontext

我有一些使用 EF POCO 加密和解密数据的代码。为了实现这一点，我截获了 Saving Changes 和 ObjectMaterialized 事件，并且它工作（大部分时间）。

我遇到的问题是，如果我在保存对象后直接读回加密对象，则物化事件不会触发，因为它不会返回数据库检索记录，因此无法触发事件。

有没有人对我如何改进我的方法来掩盖这种情况有任何想法？

# c# - 为什么某些属性和方法在 Powershell 中可用，但在 C# 中不可用

> ID：13451791
> 
> 赞同：2
> 
> 时间：2012-11-19T10:20:20.403
> 
> 标签：c#, powershell

以下所有内容都可以在 PowerShell 中完美运行，但它们甚至无法在 Visual Studio 中的 C# 中编译：

```
D:\> $dow = [DayOfWeek]'Monday'
D:\> $dow.ToInt32($null)
1
D:\> $dow.value__
1 
```

为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:24:27.817

因为 PowerShell 和 C# 是完全不同的系统。

C# 是一种强类型编译语言，而 PowerShell 是一种脚本语言。就像 C# 不同于 VBA 一样，它不同于 PowerShell，而 PowerShell 又不同于 VBA。

所以每个都有独特的功能，有些在不同的环境中是相同的，必须大多数功能都没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T10:25:13.493

我的猜测是这是因为所有枚举都实现了`IConvertible`. 在 C# 中，该[`ToInt32`](http://msdn.microsoft.com/en-us/library/bb468863.aspx)方法不是直接可见的，因为接口是显式实现的，但 Powershell 可能有不同的规则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T11:37:33.263

在大多数情况下，C# 是一种静态类型的语言，而 PowerShell 主要是动态类型的。基本上，这意味着类型检查在 C# 中的编译时完成（不包括动态代码块），而类型检查在 PowerShell 中在运行时完成。

C# 还具有类型安全性，可防止您将一种类型的值视为另一种类型的值。因此你会得到一个编译错误。

# java - version column does not get increased with JPA (Hibernate)

> ID：13451792
> 
> 赞同：3
> 
> 时间：2012-11-19T10:20:22.917
> 
> 标签：java, hibernate, jpa, locking, jpa-2.0

I have the following Entity structure:

```
 public abstract class BaseEntity {

    private int _version;

    public BaseEntity() {
    }

    @Version
    @Column(name = "oplock", nullable = false)
    private int getVersion() {
        return _version;
    }

    @SuppressWarnings("unused")
    private void setVersion(final int version) {
        _version = version;
    }
    //some other code goes here....

} 
```

the concrete Entity:

```
 @Table(name="my_table", schema="public", 
    uniqueConstraints=@UniqueConstraint(columnNames={"username", "attribute"})
)
public class MyEntity extends BaseEntity implements java.io.Serializable {

    private int id;
    private String username;
    private String attribute;
    private String op;
    private String value;

    public MyEntity() {
    }
    //some code goes here ....

} 
```

Now, I select from the database an entity of `MyEntity` type, lock it with `entityManager.lock(myEntityInstance, LockModeType.OPTIMISTIC);`, modify it, and persist modifications. The thing that I expect to get is to have `oplock` column's value incremented (`oplock` is the version column), but it is untouched.

**Question:** Does it behave right or am I missing something? I think the right behavior would be that the `oplock`'s value would be incremented.

* * *

Edit: After I switched from `hibernate` 3.6 to `hibernate` 4.1, I still get the same behavior.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:47:31.617

Finally I solved my problem:

I put only `@MappedSuperclass` annotation above `BaseEntity` class. For more details you can read [here](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#d5e3498).

# sql - SQL“NOT IN”由于某种原因无法正常工作..？

> ID：13451796
> 
> 赞同：1
> 
> 时间：2012-11-19T10:20:37.497
> 
> 标签：sql, sql-server

以下 SQL 语句不起作用：

```
SELECT  stock.IdStock
        ,stock.Descr       
FROM    [Inventory].[dbo].[Stock] stock
WHERE   stock.IdStock NOT IN
        (SELECT foreignStockId FROM
         [Subset].[dbo].[Products]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T10:23:52.390

可能返回一个`NULL`. 尝试

```
SELECT  stock.IdStock
        ,stock.Descr       
FROM    [Inventory].[dbo].[Stock] stock
WHERE   stock.IdStock NOT IN
        (SELECT foreignStockId FROM
         [Subset].[dbo].[Products]
         WHERE foreignStockId IS NOT NULL ) 
```

对于这种类型的查询，我通常使用 NOT EXISTS

```
SELECT stock.idstock,
       stock.descr
FROM   [Inventory].[dbo].[Stock] stock
WHERE  NOT EXISTS (SELECT *
                   FROM   [Subset].[dbo].[Products] p
                   WHERE  p.foreignstockid = stock.idstock) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T10:23:10.767

最可能

```
SELECT foreignStockId FROM
         [Subset].[dbo].[Products] 
```

查询返回至少一个 NULL 值

尝试存在

```
SELECT  stock.IdStock
        ,stock.Descr       
FROM    [Inventory].[dbo].[Stock] stock
WHERE   NOT EXISTS
        (SELECT * FROM [Subset].[dbo].[Products] 
         where stock.IdStock =foreignStockId ) 
```

# sql - 如何使用 sql 查询生成序列号并用它更新表？

> ID：13451807
> 
> 赞同：-2
> 
> 时间：2012-11-19T10:21:13.080
> 
> 标签：sql, sql-server, sql-server-2008

我有一个看起来像的 sql 表：

```
srno | passportnumber|flightnumber
Null | ABC123        |AI-2000
Null | ab3333        |AI-2011
Null | ab565235      |AI-2562
Null | ABC123        |AI-2025
Null | ABC123        |AI-5623
Null | XYZ12334      |AI-5625 
```

我需要一个查询来按护照号对它们进行排序，以便重复的护照号 rpws 彼此相邻，然后我想更新表以插入序列号。结果应该是这样的：

```
1    | ABC123        |AI-2000
2    | ABC123        |AI-2025
3    | ABC123        |AI-5623
4    | ab3333        |AI-2011
5    | ab565235      |AI-2562
6    | XYZ12334      |AI-5625 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T10:23:01.407

尝试这个：

```
;WITH Ranked
AS
(
   SELECT *, ROW_NUMBER() OVER(ORDER BY passportnumber) row_num
   FROM Tablename
) 
UPDATE Ranked
SET srno = row_num; 
```

## [现场演示](https://data.stackexchange.com/stackoverflow/query/86329)

# magento - 如何为 onepagechekout 自动填写运输方式 Magento

> ID：13451810
> 
> 赞同：3
> 
> 时间：2012-11-19T10:21:21.770
> 
> 标签：magento, magento-1.4, magento-1.5, magento-1.7, magento-1.6

我想自动填写运输方式，而不是在单页结账时显示。我可以通过在**app/code/local/Mage/Checkout/controllers/OnepageController.php**上更改它来隐藏 Onepagechekout 上的运输方式：

```
/**
 * save checkout billing address
 */
public function saveBillingAction()
{
    if ($this->_expireAjax()) {
        return;
    }
    if ($this->getRequest()->isPost()) {
//            $postData = $this->getRequest()->getPost('billing', array());
//            $data = $this->_filterPostData($postData);
        $data = $this->getRequest()->getPost('billing', array());
        $customerAddressId = $this->getRequest()->getPost('billing_address_id', false);

        if (isset($data['email'])) {
            $data['email'] = trim($data['email']);
        }
        $result = $this->getOnepage()->saveBilling($data, $customerAddressId);

        if (!isset($result['error'])) {
            /* check quote for virtual */
            if ($this->getOnepage()->getQuote()->isVirtual()) 
            {
                $result['goto_section'] = 'payment';
                $result['update_section'] = array(
                    'name' => 'payment-method',
                    'html' => $this->_getPaymentMethodsHtml()
                );
            } elseif (isset($data['use_for_shipping']) && $data['use_for_shipping'] == 1) 
              {
                $result['goto_section'] = 'payment';
                $result['update_section'] = array(
                    'name' => 'payment-method',
                    'html' => $this->_getPaymentMethodsHtml()
                );

                $result['allow_sections'] = array('shipping');
                $result['duplicateBillingInfo'] = 'true';
            } else {
                $result['goto_section'] = 'shipping';
            }
        }
        $this->saveShippingMethodAction();
        $this->getResponse()->setBody(Mage::helper('core')->jsonEncode($result));
    }
} 
```

如您所见，我更改了在计费操作后将下一步重定向到付款步骤的链接。

为了自动保存运输方式，我添加了

```
$this->saveShippingMethodAction(); 
```

在函数的末尾，这个方法如下所示：

```
 public function saveShippingMethodAction()
{
    $this->_expireAjax();
    if ($this->getRequest()->isPost()) {
        /* $this->savePaymentAction(); */
        $data = $this->getRequest()->getPost('shipping_method', 'flatrate_flatrate');
        $result = $this->getOnepage()->saveShippingMethod($data);
           $this->getResponse()->setBody(Zend_Json::encode($result));
    }

} 
```

所以我所做的是尝试将自动**flatrate_flatrate**方法作为默认方法。

但是当我尝试完成销售时，它说我没有指定运输方式。知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:32:59.460

现在您需要在报价和会话中强制使用 shipping_method ：

```
$forcedMethod = "your_method_code";

$this->getOnePage()->getQuote()
    ->getShippingAddress()
    ->setShippingMethod($forcedMethod)
    ->save();

Mage::getSingleton('checkout/session')->setShippingMethod($forcedMethod); 
```

就在你打电话之前：

```
$this->saveShippingMethodAction(); 
```

添加一个：

```
$this->getRequest()->setPost('shipping_method', $forcedMethod); 
```

它应该工作;）

# android - 仅在横向上播放视频 - Android

> ID：13451812
> 
> 赞同：2
> 
> 时间：2012-11-19T10:21:44.730
> 
> 标签：android

我正在 VideoView 上开发一个应用程序......我只需要在横向模式下播放视频。我尝试了以下代码，但整个活动都打开了横向模式。但是，我只需要 Xml 布局中的视频视图就可以在风景中播放。

```
<activity android:name=".Video_play"
    android:screenOrientation="landscape"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
...
</activity> 
```

# c# - 在 C# 中从 excel 文件格式化时间字段

> ID：13451815
> 
> 赞同：1
> 
> 时间：2012-11-19T10:21:59.913
> 
> 标签：c#, .net, excel

我需要将我从 excel 文件中获得的时间值格式化为字符串，然后将其插入到 sql 表中。我用过这段代码：

```
dtTruck = string.Format(dtTruck, "Long Time");
dtPlane = string.Format(dtPlane, "Long Time"); 
```

这仅适用于我第一次执行项目时的 dtTruck 领域。所以这根本没有形成价值。它将时间值作为字符串插入到我的 sql 表中，作为**0,29166666667**而不是**07:00**

我的代码：

```
public void ReadExcelFile()
{
    string filename = @"C:\Temp\Copy2.xlsx";
    using (OleDbConnection connection = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + filename + ";Extended Properties=\"Excel 12.0;HDR=YES;IMEX=1\""))
    {
        try
        {
            connection.Open();
            string sqlCmd1 = "SELECT  * FROM [Sheet1$]";
            using (OleDbCommand command = new OleDbCommand(sqlCmd1, connection))
            {
                command.CommandType = System.Data.CommandType.Text;
                using (OleDbDataReader reader = command.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        alias = "" + reader[3];
                        codeT = "" + reader[4];
                        dtTruck = "" + reader[5];
                        codeP = "" + reader[6];
                        dtPlane = "" + reader[7];
                        dtDealer = "" + reader[8];

                        dtTruck = string.Format(dtTruck, "Long Time");
                        dtPlane = string.Format(dtPlane, "Long Time");

                        SearchForAdrIDAndCustID(Convert.ToString(reader[0]), Convert.ToString(reader[3]));
                        InsertData(custID, "" + reader[3], adrID, dtTruck, codeT, dtPlane, codeP, dtDealer);
                    }
                }
            }

        }
        catch (Exception exception)
        {
            Console.WriteLine("ERROR in ReadExcelFile() method. Error Message : " + exception.Message);
        }
    }
} 
```

谁能帮我这个 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:27:43.033

你试过这个吗：

```
dtTruck = string.Format(dtTruck,"{0:T}"); 
```

参考 ：

[http://www.csharp-examples.net/string-format-datetime](http://www.csharp-examples.net/string-format-datetime)

# c# - C# 2010 Express + SQL Server 2008 Express - 连接“登录失败”

> ID：13451828
> 
> 赞同：2
> 
> 时间：2012-11-19T10:22:57.617
> 
> 标签：c#, sql-server-2008, connection

我实际上正在使用 Visual C# Express 2010 开发一个 Windows 窗体应用程序，它将使用来自 SQL Server 2008 Express DB 的（读/写）数据

我已经使用 SQL Server Management Studio (2008 Express) 创建了我的数据库，我知道实例名为`ATLELAG786576\SQLEXPRESS` My DB is called 'TEST'

在 SQL Server Management Studio (2008 Express) 中查看我的数据库“测试”属性：在文件下，我是 ( `ATLE\bneveux`) 数据库的所有者

查看安全、登录、Mylogin (ATLE\bneveux)

*   我的默认数据库是“测试”
*   服务器角色是“公共”+“系统管理员”
*   用户映射 DB 'TEST' 用户 'dbo' 默认架构 'dbo'

在我的 C# 应用程序中

**应用程序配置：**

```
<?xml version="1.0" encoding="utf-8" ?> <configuration>
    <configSections>
    </configSections>
    <connectionStrings>
        <add name="connectionStringTestDb"
            connectionString="Data Source=ATLELAG786576\SQLEXPRESS;Initial Catalog=D:\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\TEST.mdf;Integrated Security=True;Connect Timeout=30;User Instance=False"
            providerName="System.Data.SqlClient" />
    </connectionStrings> </configuration> 
```

**dbConnection.cs：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;

namespace SQLServerConnectionDemo
{
    class dbConnection
    {
        public static SqlConnection newCon;
        public static string connectionStringTestDb = ConfigurationManager.ConnectionStrings["connectionStringTestDb"].ConnectionString;

        public static SqlConnection GetConnection()
        {
            newCon = new SqlConnection(connectionStringTestDb);
            return newCon;
        }
    }
} 
```

**dbAccess.cs：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data;
using System.Data.SqlClient;

namespace SQLServerConnectionDemo
{
    class dbAccess
    {
        SqlConnection conn;
        public dbAccess()
        {
            conn = dbConnection.GetConnection();
        }

        //Method insert new in tblEmployees
        public void addEmployee(string Id, string Name, string Email)
        {
            if (conn.State.ToString() == "Closed")
            {
                conn.Open();
            }
            SqlCommand newCmd = conn.CreateCommand();
            newCmd.Connection = conn;
            newCmd.CommandType = CommandType.Text;
            newCmd.CommandText = "INSERT INTO tblEmployees VALUES ('"+ Id +"','"+ Name +"','"+ Email +"')";
            newCmd.ExecuteNonQuery();
        }

    }
} 
```

**在 formEmployeeAdd.cs 中：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace SQLServerConnectionDemo
{
    public partial class formEmployeeAdd : Form
    {

        dbAccess access = new dbAccess();

        public formEmployeeAdd()
        {
            InitializeComponent();
        }

        private void btnInsert_Click(object sender, EventArgs e)
        {
            access.addEmployee(txtId.Text, txtName.Text, txtEmail.Text);
            MessageBox.Show("Data successfully added");
        }
    }
} 
```

这里是我在尝试运行此过程时总是收到的错误消息：

> System.Data.SqlClient.SqlException (0x80131904)：无法打开登录请求的数据库“D:\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\TEST.mdf”。登录失败。用户“ATLE\bneveux”登录失败。

请注意，我从来没有真正能够在 Visual C# 2010 Express 中添加我的数据源，因此我可以从 VS 管理数据库，我总是收到以下错误消息：

> 无法打开物理文件“D:\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\TEST.mdf”。操作系统错误 32：“32（Le processus ne peut pas accéder au fichier car ce fichier est utilisé par un autre processus.）”。尝试为文件 D:\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\TEST.mdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:57:15.430

尝试更换

```
Initial Catalog=D:\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\TEST.mdf 
```

简单地

```
Initial Catalog=TEST 
```

# line - Three.js 用于碰撞检测的光线投射

> ID：13451830
> 
> 赞同：6
> 
> 时间：2012-11-19T10:23:03.693
> 
> 标签：line, three.js, raycasting

我正在尝试使用光线投射画一条线。基本上我想设置一些来自我的“玩家”对象的线在各个方向。

（像这样：[https](https://gamedev.stackexchange.com/questions/35013/how-to-handle-3d-collisions-using-raycasting-with-a-reflection-vector) ://gamedev.stackexchange.com/questions/35013/how-to-handle-3d-collisions-using-raycasting-with-a-reflection-vector ）

我想要这个，然后我可以使用我可以直观地看到我的碰撞检测。

我知道我可以使用不同的方式进行碰撞检测，但我将这种方式用作学习检测。

我的问题是下面的代码画了一条线，但它似乎随机改变长度，并不总是指向同一个角度。

`var ray = new THREE.Ray( player.model.objects.position, new THREE.Vector3(1, 1, 1));`

 ````
var geometry = new THREE.Geometry();

// my issue is here. I don't think this is the right way use a ray to workout the second vector?

// EDIT: Realized this should be set at player position and outwards. 
//var newx = 300 * ray.direction.x;
//var newz = 300 * ray.direction.z;

// EDIT CODE UPDATE
var newx = (player.model.objects.position.x) + (60 * ray.direction.x);
var newz = (player.model.objects.position.z) + (60 * ray.direction.z);

// THREE.Vector3 {x: 1310.1526178356803, y: 0, z: 1290.8237947033065} 
console.log(player.model.objects.position); 

geometry.vertices.push( player.model.objects.position); 
geometry.vertices.push( new THREE.Vector3(newx, player.model.objects.position.y, newz));

var line = new THREE.Line(geometry, material);

scene.add(line); 
````  `任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:13:07.203

看到那个模型后，我试图做同样的事情。因为我试图以同样的方式做，但无法弄清楚，我会提供一个替代方案。

```
var line;

function update() {

    // Z- DIRECTION
    raycaster.ray.direction.set(0, 0, -1);

    var geometry = new THREE.Geometry();

    intersections = raycaster.intersectObjects( objects );
    if ( intersections.length > 0 ) {
        var geometry = new THREE.Geometry();

        // POSITION OF MESH TO SHOOT RAYS OUT OF
        geometry.vertices.push( obj.position );
        geometry.vertices.push( intersections[0].point );

        scene.remove(line);
        line = new THREE.Line(geometry, new THREE.LineBasicMaterial({color: 0x990000}));
        scene.add(line);
    }

} 
```

所以现在你有一条线从你的网格射到最近的相交处。

[https://dl.dropbox.com/u/42766757/guy.png](https://dl.dropbox.com/u/42766757/guy.png)`

# google-maps - 与某个位置最近的地址列表

> ID：13451831
> 
> 赞同：1
> 
> 时间：2012-11-19T10:23:04.933
> 
> 标签：google-maps, google-maps-api-3, asp.net-mvc-4

有谁知道我如何为设定半径内的每个位置返回一个带有大头针的谷歌地图。不一定需要与潜在绘制路线的特定距离。我希望用户能够指定他们的地址（邮政编码）和设定的距离（10、20、50 英里），然后我可以在地图上显示这些结果。我有邮政编码列表，保存在我的数据库中，我需要生成类似 kml 的东西吗？

干杯蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:53:25.883

这听起来像是一个经典的**Store Locator**应用程序，在 SE 答案中的细节有点复杂。

不过，谷歌有[一个示例](https://developers.google.com/maps/articles/phpsqlsearch_v3)记录。

# excel - 如何以小时的参数消除带有“文件目录”的行

> ID：13451833
> 
> 赞同：2
> 
> 时间：2012-11-19T10:23:12.343
> 
> 标签：excel, vba

例如，我在 excel 中有带有文件结构的行。

```
Row 1 c:\User\Folder100\13-25\File100.log
Row 2 c:\User\Folder200\11-16\File200.log
Row 3 c:\User\Folder300\21-20\File300.log
Row 4 c:\User\Folder400\13-25\File400.log
Row 5 c:\User\Folder400\9-10\File400.log
Row 6 c:\User\Folder500\8-16\File500.log
Row 7 c:\User\Folder600\8-16\File600.log
Row 8 c:\User\Folder700\11-16\File700.log
Row 9 c:\User\Folder700\9-40\File700.log 
```

第一行没有任何问题，因为文件日志不同，但行（4 和 5） a 在两个不同的文件夹“c:\User\Folder400\13-25\”和 c 中有相同的日志:\User\Folder400\9-10\ 我想只保留 13-25（消除第 5 行），因为时间更近。

还有第 8 行和第 9 行，我只想保留第 8 行 (11-16)

```
Row 1 c:\User\Folder100\13-25\File100.log
Row 2 c:\User\Folder200\11-16\File200.log
Row 3 c:\User\Folder300\21-20\File300.log
Row 4 c:\User\Folder400\13-25\File400.log
Row 6 c:\User\Folder500\8-16\File500.log
Row 7 c:\User\Folder600\8-16\File600.log
Row 8 c:\User\Folder700\11-16\File700.log 
```

（删除第 5 行和第 9 行）

你知道如何在 VBA 中制作它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:26:04.250

下面的代码

1.  使用 a`RegEx`将文件夹名称和文件编号提取到两个新列中（见下图）
2.  按 B 列排序，然后按 C 列降序排序
3.  使用 Excels 功能删除 B 列中存在重复项的整行`Remove Duplicates`（最新时间在 CV 列中排在首位，因此被保留）
4.  删除两个工作列

*更新：下面的代码假定“用户”之后的第一个文件夹**和****文件**名都非常匹配，因为它是重复的 - 最初的指导方针仍然模棱两可。此代码确实解决了问题中显示的示例*

![在此处输入图像描述](../Images/8a07dd035698e6ff0c929e7f89374c01.png)

```
Sub Sliced()
    Dim lngRow As Long
    Dim lngCalc As Long
    Dim objReg As Object
    Dim objDic As Object
    Dim rng1 As Range
    Dim X()
    Dim Y()

    Set rng1 = Range([a1], Cells(Rows.Count, "A").End(xlUp))

    'See Patrick Matthews excellent article on using Regular Expressions with VBA
    Set objReg = CreateObject("vbscript.regexp")
    objReg.Pattern = "(.+\\){2}(.+\\)(\d+)\-\d+\\(.+)"

    'Speed up the code by turning off screenupdating and setting calculation to manual
    'Disable any code events that may occur when writing to cells
    With Application
        lngCalc = .Calculation
        .ScreenUpdating = False
        .Calculation = xlCalculationManual
        .EnableEvents = False
    End With

    'Test each area in the user selected range
    X = rng1.Value2
    Y = X
    For lngRow = 1 To UBound(X)
        'replace the leading zeroes
        X(lngRow, 1) = objReg.Replace(X(lngRow, 1), "$2$4")
        Y(lngRow, 1) = objReg.Replace(Y(lngRow, 1), "$3")
    Next

    Columns("B:C").Insert
    rng1.Offset(0, 1) = X
    rng1.Offset(0, 2) = Y

    With ActiveSheet.Sort
        .SortFields.Clear
        .SortFields.Add Key:=rng1.Offset(0, 1), _
                        SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
        .SortFields.Add Key:=rng1.Offset(0, 2), _
                        SortOn:=xlSortOnValues, Order:=xlDescending, DataOption:=xlSortNormal
        .SetRange rng1.Cells(1).Offset(0, 1).Resize(rng1.Rows.Count, 2)
        .Header = xlGuess
        .MatchCase = False
        .Orientation = xlTopToBottom
        .SortMethod = xlPinYin
        .Apply
    End With
    ActiveSheet.UsedRange.RemoveDuplicates Columns:=2, Header:=xlNo
    Columns("B:C").Delete

    'cleanup the Application settings
    With Application
        .ScreenUpdating = True
        .Calculation = lngCalc
        .EnableEvents = True
    End With

    Set objReg = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T11:10:01.837

这并不**完全**符合目的，而是**说明了一种**解决此类问题的方法。

它只考虑文件名和它前面的时间字符串。如果需要，可以添加该文件夹。

**主要模块：**

```
Option Explicit
Private dict As dictionary

'Prints the rows you need (time criterion applied) 
Private Sub FindDuplicates()
    Dim lastRow As Long, row As Long
    Dim x As Variant, v As Variant
    Dim fileName As String, timeString As String

    Set dict = CreateObject("Scripting.Dictionary")

    'Determine last row
    lastRow = Worksheets(1).Cells(Rows.Count, 1).End(xlUp).row

  'Iterate and store in dictionary  
  For row = 1 To lastRow
        x = Split(Cells(row, 1), Application.PathSeparator)
        fileName = x(UBound(x))
        timeString = x(UBound(x) - 1)
        AddDictEntry fileName, row, timeString
    Next row

    'Print results
    For Each v In dict.Keys
        Debug.Print "FileName: " & v & ", Recent Version: " & dict.Item(v)
    Next
End Sub 
```

**添加/删除字典条目：**

```
Private Sub AddDictEntry(fileName As String, rowNo As Long, timeString As String)
    Dim timeParts As Variant, timeLong As Long

   'converts time string to long, for comparison
    timeParts = Split(timeString, "-")
    timeLong = CInt(timeParts(0)) * 100 + CInt(timeParts(1))

    'Adds entry to dictionary if time is more recent
    If (dict.Exists(fileName)) Then
        If CInt(dict.Item(fileName)) < timeLong Then
            dict(fileName) = timeLong
        End If
    Else
        dict.Add fileName, timeLong
    End If

End Sub 
```

* * *

**输入：**

```
c:\User\Folder100\13-25\File100.log
c:\User\Folder200\11-16\File200.log
c:\User\Folder300\21-20\File300.log
c:\User\Folder400\13-25\File400.log
c:\User\Folder400\9-10\File400.log
c:\User\Folder300\22-20\File300.log 
```

**输出：**

```
FileName: File100.log, Recent Version: 1325
FileName: File200.log, Recent Version: 1116
FileName: File300.log, Recent Version: 2220
FileName: File400.log, Recent Version: 1325 
```

# python - 如何在 Django 中隐藏成功页面

> ID：13451838
> 
> 赞同：1
> 
> 时间：2012-11-19T10:23:21.500
> 
> 标签：python, html, django, redirect

我想知道是否有人知道：

例如，我有一个用户填写的表单，当他提交时，页面将重定向到“谢谢”页面。一切正常。在 urls.py 我有这一行指出该页面存在：

```
url(r'^thankyou/$', 'render_form'), 
```

但是，当我输入 url mysite.com/thankyou/ 时，会出现“谢谢”页面......但我需要它仅在我提交表单时出现并在用户尝试直接打开它时隐藏它。

请帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:31:29.757

您可以在重定向之前在表单处理视图中的会话中放置一些内容，并在感谢 URL 中检查它：如果它不存在，则返回 403 错误。就像是：

```
def form_handling_view(request):
    if request.POST:
    form = MyForm(request.POST)
        if form.is_valid():
            ... handle the form ...
            request.session['form_posted'] = True
            return redirect('thank_you')

def thank_you(request):
    if not request.session.pop('form_posted', False):
        return HttpResponseForbidden('not permitted')
    ... render thank_you page ... 
```

注意我`pop`在thank_you中使用以确保无论如何都从会话中删除密钥。

# function - 在 HSQL 2.2 例程中使用 SELECT INTO

> ID：13451839
> 
> 赞同：2
> 
> 时间：2012-11-19T10:23:23.390
> 
> 标签：function, hsqldb, procedures, routines

当我将 Oracle 函数迁移到 HSQLDB 时，我需要为 HSQLDB 翻译“选择为”。Oracle 脚本可能如下所示：

```
CREATE FUNCTION getId()
RETURN NUMBER IS 
       temp_id NUMBER;
...

BEGIN
....    
  SELECT id id INTO temp_id from ( select id form ..... ); 
```

在 HSQLDB 2.0.0 中，我可以执行以下操作：

```
 CREATE FUNCTION getId()
RETURNS BIGINT 
BEGIN ATOMIC 
  DECLARE temp_id BIGINT;
....

  SET temp_id = SELECT id id FROM .... 
```

但是，它不再适用于 HSQLDB 2.2.9。错误信息是：

> [CREATE - 0 行，0.000 秒] [错误代码：-5608，SQL 状态：42608] 声明中错误或缺少数据影响子句：在语句中读取 SQL

从 HSQLDB 2.2 的发行说明中，它说他们已经支持“选择进入”，但我没有找到方法。

任何人都知道如何在 HSQLDB 2.2.9 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:05:52.900

在 2.2.x 系列中有更严格的数据访问检查。读取表数据的例程必须这样声明。

```
CREATE FUNCTION getId()
RETURNS BIGINT READS SQL DATA 
BEGIN ATOMIC 
  DECLARE temp_id BIGINT;
....

  SET temp_id = SELECT id id FROM .... 
```

最近几个月引入了更多增强和修复。最好使用最新的快照 jar（以及发布时的 2.3.0 版本）而不是 2.2.9。

[http://www.hsqldb.org/repos/org/hsqldb/hsqldb/SNAPSHOT/](http://www.hsqldb.org/repos/org/hsqldb/hsqldb/SNAPSHOT/)

快照目录是一个 Maven 存储库。

# java - 使用大 IF ELSE 字符串比较来调用不同的方法。更有效的方法？

> ID：13451840
> 
> 赞同：1
> 
> 时间：2012-11-19T10:23:23.073
> 
> 标签：java, ajax, string, servlets, comparison

我用来从多个地方`JQuery`调用 a来调用 servlet 中的多个不同方法。`Java Servlet`目前，我传递了一个字符串（称为 methodName），然后使用不断增加的 IF ELSE 块来查看要调用哪个函数：

```
public String methodCaller(String methodName) throws SQLException, IOException
{
    if(methodName.equals("method1"))
    {
        return method1(attr("permit"));
    }
    else if(methodName.equals("method2"))
    {
        return method2(attr("ring"));
    }
    else if(methodName.equals("method3"))
    {
        return method3(attr("gridRef"));
    }
    else if(methodName.equals("method4"))
    {
        return method4(attr("ring"));
    }
    else if(methodName.equals("method6"))
    {
        return method6(attr("ring"), Integer.parseInt(attr("quantity")));
    } 
```

然而，这对我来说似乎非常笨拙和低效，尤其是在未来方法的数量会增加的情况下。有没有更有效的方法来比较字符串？或者我应该简单地为每个方法制作一个单独的 servlet（并简单地在`processRequest`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:31:07.863

我建议，您应该考虑使用 RESTful Web 服务。REST 定义了一组架构原则，您可以通过这些架构原则设计专注于系统资源的 Web 服务，包括各种客户端如何通过 HTTP 处理和传输资源状态不同语言。

有许多开源可以帮助您非常轻松地实现 restful servlet...其中之一是 Apache Wink [http://incubator.apache.org/wink/](http://incubator.apache.org/wink/)

IBM Developerworks 中有同样的好文章

[http://www.ibm.com/developerworks/web/library/wa-apachewink1/](http://www.ibm.com/developerworks/web/library/wa-apachewink1/)

[http://www.ibm.com/developerworks/web/library/wa-apachewink2/index.html](http://www.ibm.com/developerworks/web/library/wa-apachewink2/index.html)

[http://www.ibm.com/developerworks/web/library/wa-apachewink3/index.html](http://www.ibm.com/developerworks/web/library/wa-apachewink3/index.html)

其他选择：

春季MVC

阿帕奇 CXF [http://cxf.apache.org/docs/jax-rs.html](http://cxf.apache.org/docs/jax-rs.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T10:52:20.537

我建议将您的每个方法都设为实现简单接口的对象。在您的类中，创建一个 HashMap 将接口的每个实现链接到其各自的键。

**界面**

```
public interface MyMethod {
   public String call();
} 
```

**执行**

```
 public class MethodOne implements MyMethod{

   } 
```

**映射和调用**

```
 private Map<String, MyMethod> mappings = new HashMap<String,MyMethod>();

    static{
        mappings.put("method1", new MethodOne());
        //.. other mappings
    }

   public String methodCaller(String methodName) throws SQLException, IOException
   {
      MyMethod myMethod = mappings.get(methodName);
      return myMethod.call();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:30:47.717

我会简单地开始使用整数。

在你的 javascript 中有这样的功能

```
function convertmethod(methodname)
    {
    thereturn = -1;
    switch(methodname) {
        case "Method1" : thereturn = 1;break;
        case "Method2" : thereturn = 2;break;
        case "Method3" : thereturn = 3;break;
        case "Method4" : thereturn = 4;break;
        }
    return thereturn;
    } 
```

然后在你的java代码中你也可以使用一个开关

```
public String methodCaller(int methodName) throws SQLException, IOException
    {
    switch(methodName) 
        {
        case 1: return method1(attr("permit"));break;
        case 2: return method2(attr("permit"));break;
        case 3: return method3(attr("ring"));break;
        case 4: return method4(attr("gridRed"));break;
        }

    } 
```

# php - Symfony 2 形式——在数据库上创建一个要序列化的数组？

> ID：13451851
> 
> 赞同：1
> 
> 时间：2012-11-19T10:24:19.277
> 
> 标签：php, symfony

如何制作 Symfony 2 表单以便在数据库中序列化特定字段？

客户端将为字段发送一个数组，该数组`foo`位于`VARCHAR`数据库中。我想要`foo`通过`serialize()`，但我不知道该怎么做，因为我所做的就是：

```
$form->bind($request); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:40:10.030

您应该使用[数据转换器](http://symfony.com/doc/current/cookbook/form/data_transformers.html)

# visual-studio-2010 - IE 中的 Selenium 测试“无法定位元素”

> ID：13451852
> 
> 赞同：2
> 
> 时间：2012-11-19T10:24:23.933
> 
> 标签：visual-studio-2010, selenium, automated-tests

我创建了一个自动化测试，将用户登录到站点并执行某些操作。测试首先在 Firefox、Chrome 和 IE 中运行。它在 Firefox 中完美运行，关闭浏览器，然后在 Chrome 中执行测试并再次关闭浏览器。当完全相同的测试在 IE 中打开 URL 时，它说它无法为登录过程找到元素“用户名”。

我有一个等待功能，我试图扩展它以防页面渲染出现问题，但这不起作用。使用开发工具并搜索元素时，它发现没有问题，所以我对它在测试中如何失败感到困惑。

有谁知道在 IE 中可能导致这种情况的原因是什么？

文本字段的 HTML 如下所示...

在 FF 和 Chrome 但不适用于 IE 的 Selenium 代码是：

私人结果_Test_Login（IWebDriver驱动程序）{结果rt；

```
 driver.Navigate().GoToUrl("MyURL");
        driver.FindElement(By.Id("UserName")).Click();
        TextboxOperation type = new TextboxOperation("UserName", driver, "Success", EnumSearchType.ById);
        OperationExecutor.PerformOperations(type);

        rt = new Results(driver.Url, driver.PageSource, "Existing Users");

        return rt;
    }

    [TestMethod]
    public void Test_Login()
    {
        List<IWebDriver> drivers = new List<IWebDriver>() { firefoxDriver, chromeDriver, ieDriver };
        foreach (IWebDriver driver in drivers)
        {
            Results results = _Test_Login(driver);

            if (results.Exception != null)
            {
                throw results.Exception;
            }

            Assert.IsFalse(results.ErrorState);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T16:38:31.197

有时您需要在尝试定位元素之前暂停，因为页面或框架尚未准备好。或者，如果您不想暂停，您可以使用限时 while 循环包装 try-catch 来处理错误条件并在失败时重试查找。）

# git - 两个人如何使用 GitHub 处理同一个项目

> ID：13451853
> 
> 赞同：3
> 
> 时间：2012-11-19T10:24:23.917
> 
> 标签：git, github

我有一个 git hub 帐户，我创建了一个项目并将其推送到我的在线 git hub 存储库，然后我的一个朋友使用他的 git hub 帐户登录并分叉我的存储库。在他修改了该项目后，他想推送该项目。为此，我所做的是将他的 SSH 密钥添加到我的 git hub 帐户，但是当他将项目推送到他的 git 帐户时，无论他修改或添加了新代码，我如何获取代码。我对版本控制很陌生。谁能帮助我我们两个或更多人如何在同一个项目上工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T10:29:57.477

在设置中有一个名为添加合作者的选项，在该字段中添加您的朋友姓名，以便将他添加到项目中

```
-> Go to your project 

-> Click on admin

-> Add Collaborator

-> Add your friend 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:33:05.003

同意 Akhilraj 关于将您的朋友添加为合作者的观点。

Fork 更适合您项目外部想要处理它的人，然后向您发送拉取请求，以便您可以将他的更改从 fork 拉到您的原始存储库中。既然这个人是你的朋友，我猜你想更直接地和他一起工作，所以我会说不要乱用叉子。

**重要提示：**不要**将**您朋友的 SSH 密钥添加到您的帐户中！SSH 密钥用于身份验证（即证明您就是您所说的那个人），而不是用于授权（即授予对存储库的访问权限）。通过将您朋友的 SSH 密钥添加到您的帐户，您可以让他以您的身份进行身份验证。实际上，您是在告诉 GitHub，拥有该密钥对私有一半的任何人都是您。

# java - 切割链java

> ID：13451854
> 
> 赞同：0
> 
> 时间：2012-11-19T10:24:25.570
> 
> 标签：java, etl, talend

你好，我有这个字符串，它是一个数据表，我想测试字符串是否包含超过 _，然后我们正在切割链，在表行中的每个子字符串中，我使用 talend，我的输入是一个 excel，我真的卡住了谁能帮助我，请举例：JEN3030_1_2_3

*   JEN3030_1
*   JEN3030_2
*   JEN3030_3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:28:29.990

试`String.split()`...

```
String input = "JEN3030_1_2_3"; //or whatever
List<String> output = new ArrayList<String>();
String[] parts = input.split("_");

for(int i = 1; i < parts.length; i++) {
    output.add(parts[0] + "_" + parts[i]);
} 
```

# java - 如何在Java中返回类的数组

> ID：13451857
> 
> 赞同：-2
> 
> 时间：2012-11-19T10:24:35.850
> 
> 标签：java, oop, wrapper

我正在尝试包装`TestClass1[]`，`TestClass`为此我创建了一个`TestClass`. 另一个类`FunctionClass`中有一个方法将返回`TestClass`. 我在`Testclass`一个是定义了一些变量，`String`另一个是一个类`TestClass2`。我将包裹`TestClass2`在`Testclass`.

`Testclass2`也有 2 个变量，一个是`String`，一个是`int`。我想知道如何构造一个数组，`Testclass`其中应该包含相应的变量。

我有以下代码。

```
public class Testclass {

private String attrName;
    private TestClass1 tc;
    private TestClass2 tc2;

Testclass(Testclass1[] tc1){

    for(int i=0; i<tc1.length; i++){
    tc = tc1[i];
    attrName = this.tc.name; 
    tc2 = new TestClass2 (this.tc.elements); //this.tc.elements will return an Array of SomeClass which is not implemented by me.
    }

}

/**
 * Returns the Name.
 */
public String getName()
{
    return attrName;
}

/**
 * Returns the Testclass2 Array
 */
public TestClass2[] getTestClass2(){

//What to do ??
}

 /**
 * Testclass2 which is inner class of TesTClass.
 */
 private class Testclass2 {

    private int value;
    private string attribute;
    private SomeClass some;

    TestClass2 (SomeClass[] someClass){

        for(int i=0; i<someClass.length; i++){
        some= someClass[i]; 
        this.value= some.value;
                    this.attributes = some.attribute;

        }
    }

            /**
             * Returns the Value.
             */
    public int getValue(){
        return value;
    }

            /**
             * Returns the Attribute.
             */
            public string getAttribute(){
        return attribute;
    } 
```

类中的方法`Function`如下：

```
public Testclass[] getTestClass(){

 //What to do?

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:30:24.057

我发现你的构造函数很奇怪。你编码甚至编译？您想将一个数组分配给 tc2，但您没有选择它作为数组类型。然后使用它：

```
private TestClass2[] tc2; 
```

然后在 getTestClass2 中，执行以下操作：

```
return tc2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:44:56.910

使类的属性`TestClass`成为数组。如有必要，创建*getter和 setter。*创建接受值或初始化数组的构造*函数初始化程序。*为 . 创建默认构造函数。`TestClass1``TestClass2``TestClass2`

```
TestClass(TestClass1[] tc1, String attrName){

    tc = tc1;
    this.attrName = attrName; 
    if (tc != null) {
      tc2 = new TestClass2[tc.length];
      for(int i = 0; i< tc.length; i++) {
        TestClass2 t2c = new TestClass2(tc[i].getElements()); //this.tc.elements will   return an Array of SomeClass which is not implemented by me.
        tc2[i] = t2c;
      }
   }
}

/**
 * Returns the Testclass2 Array
 */
public TestClass2[] getTestClass2(){

  //What to do ?? 
  return tc2;
}

class TestClass2 {
   /**
    * Default constructor
    */ 
   TestClass2(){} 
```

# python - Eclipse - Pydev，不识别未导入的方法

> ID：13451858
> 
> 赞同：2
> 
> 时间：2012-11-19T10:24:47.723
> 
> 标签：python, eclipse, pydev

我的 64 位 Ubuntu 上安装了 Eclipse 版本：4.2.1 和 PyDev 版本 2.7.1。我正在使用 Python 2.7，但 Eclipse 存在这个问题，它无法识别我未导入的方法。例如，如果我编写这样的代码：

```
def main():
  myfiles = os.listdir('src')

if __name__ == '__main__':
  main()
  print'done!' 
```

我收到此错误：

```
Traceback (most recent call last):
  File "tset.py", line 5, in <module>
    main()
  File "tset.py", line 2, in main
    myfiles = os.listdir('src')
NameError: global name 'os' is not defined 
```

这是一个非常明显的错误，因为我没有在代码开头写“import os”。我的问题是 Eclipse 不再为我突出显示这些错误。要么我必须自己找到它们，要么我会在运行代码时找到它们。我的 Eclipse 之前工作正常，但我不知道发生这种情况我做了什么改变。

我还应该提到我的项目中有“lib”文件夹，并且在该文件夹中我有一些自己的模块，并且我已将“lib”文件夹添加到项目的 PYTHONPATH 中。我正在运行的代码在另一个名为“test”的文件夹中，而不是在 PYTHONPATH 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:21:33.213

问题是我的代码在这样的文件夹中：

> /MyProject/src/test/test.py

但是“src”文件夹不在 PYTHONPATH 中。这就是为什么 Eclipse 没有将它们识别为源代码并且没有分析它们的原因。

要解决此问题，请访问：

> Eclipse -> 项目 -> 属性 -> PyDev-PYTHONPATH -> 源文件夹

并将“/MyProject/src”添加到源文件夹。（我的源文件夹中只有“/MyProject/src/lib”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T12:13:32.890

除了@183.amir 的回答之外，如果您的某个应用程序是符号链接的（不是实际目录），您需要将其单独添加到 PYTHONPATH（使用上述步骤）。

# objective-c - 如何将标题文件夹添加到我的项目中？

> ID：13451861
> 
> 赞同：0
> 
> 时间：2012-11-19T10:24:53.273
> 
> 标签：objective-c, ios, xcode, xcode4

我正在使用最新的 Xcode 4.5.2 开发一个 iOS 应用程序。

我有以下文件夹结构：

```
/.../SourceCode/MyProjectFolder/projectName.xcodeproject
/.../SourceCode/MyProjectFolder/projectName/
/.../SourceCode/MyProjectFolder/projectName/xxx.m
/.../SourceCode/MyProjectFolder/projectName/xxx.h
/.../SourceCode/MyProjectFolder/projectName/PVRT/
/.../SourceCode/MyProjectFolder/projectName/PVRT/header1.h
/.../SourceCode/MyProjectFolder/projectName/PVRT/OtherFolder/header2.h 
```

如果在我的头文件中添加以下内容：

```
#include "header1.h" 
```

我得到一个`"header1.h" not found error.`

但是，如果我添加：

```
#include "PVRT/header1.h" 
```

我得到一个`"header2.h" not found.`

在项目设置中，我添加了以下路径：

```
${SOURCE_ROOT}/projectName/PVRT 
```

但我遇到了同样的错误。

**我怎样才能解决这个问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:41:43.010

根据项目的头文件路径调整目标和设置的构建设置中的“头搜索路径”值。希望它可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:55:26.183

在目标的“构建设置”中，搜索“标题搜索路径”。在最高的字段中（所以在“调试”和“发布”之前）输入以下行：

```
"$(SRCROOT)"/** 
```

这会将您的整个源目录添加到标题搜索路径。如果要包含特定文件夹，您可以随时展开路径。

# file - 如何在 tcl 中将文件读取为 ansi 编码？

> ID：13451865
> 
> 赞同：0
> 
> 时间：2012-11-19T10:25:12.463
> 
> 标签：file, encoding, tcl

我无法将文件读取为 ansi 编码。

```
fconfigure $fd -encoding CP1250 
```

我想将 ansi 中的 utf-8 文件转换为将通道传递给 xml 解析器（tdom）。你能帮助我吗？ **编辑：**我想通过 tdom 解析 xml 文件，它是 utf-8 文件编码。然后，当我直接（没有 fconfigure 或编码 tcl 命令）打开并读取该文件并传递给 tdom 时，tdom 会给出完全返回文件数据的错误。我使用 CP1250 是因为我想将该文件读取为 ANSI（因为 ansi 编码不会在 tdom 中给出任何错误）。

感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:00:04.790

定义“我无法将文件读取为 ansi 编码”——`fconfigure`在代码片段中调用时是否出现任何错误？要不然是啥？

你有可用的必要编码吗？应该是的，但是通过`encoding names`在你的解释器中运行来验证。

可能发生的另一个问题（我不确定）是，当您执行时，`fconfigure $fd -encoding CP1250`Tcl 会将读取的数据解释`$fd`为在“CP1250”Windows 代码页中编码并将其转换为*Tcl 的内部编码，*这不能保证是UTF-8。因此，如果`tdom`真的需要 UTF-8 编码的字节流，则必须明确将从文件中读取的内容转换为 UTF-8。你可以这样做：

```
set fd [open $filename]
fconfigure $fd -encoding cp1250
set data [encoding convertto utf-8 [read $fd]]
tdom whatever $data 
```

您可以尝试的另一种方法是将文件作为二进制文件读取（不对其内容进行任何解释，然后以您希望的任何方式对其进行重新编码）：

```
set fd [open $filename]
fconfigure $fd -translation binary
set data [encoding convertto utf-8 [encoding convertfrom cp1250 [read $fd]]]
tdom whatever $data 
```

P.S. Next time please *explain* what the real problem is. For some bizzare reason people tend to think that the actual error message is not relevant while it's the most crucial bit of information in fact.

# c++ - 无法理解模板类中的友元函数

> ID：13451867
> 
> 赞同：5
> 
> 时间：2012-11-19T10:25:37.063
> 
> 标签：c++, templates, friend

这是我为理解这个概念而编写的代码。代码很好，可以运行。

我不明白为什么需要标记线？

```
template <class T>
class D
{
    public :
    template <class P>  //<------------------Why is this needed ? --------------
    friend void print(D <P> obj);
};

template <class T>
void print(D<T> obj)
{std::cout<<sizeof(T);};

int main()
{
    D <char>obj3;
    print(obj3);
    return 0;
} 
```

或者换句话说，为什么以下不运行？

```
template <class T>
class D
{
    public :
    friend void print(D <T> obj);
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T10:33:29.073

根据 [temp.friend]，您必须提供显式模板参数才能使模板函数的特化成为友元：

```
template <class T>
class D
{
    public :
    friend void print<T>(D <T> obj);
}; 
```

没有它，编译器将寻找一个函数`print()`，而不是一个函数模板`print()`。

# android - 安卓和系统变量

> ID：13451870
> 
> 赞同：0
> 
> 时间：2012-11-19T10:25:47.107
> 
> 标签：android, networking, system, environment-variables

Android 是否设置和管理一些系统/环境变量，以及如何访问和管理它们？某处是否有这些变量的完整列表？例如，在我的情况下，有用的是一些“网络是/否变量”，例如：NETWORK_AVALAIBLE、WIFI_AVAILABLE、3G_AVAILABLE、aso...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:47:10.990

以下代码将有助于检查连接性。

```
ConnectivityManager manager = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo mobile = manager
        .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
NetworkInfo wifi = manager
        .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
if (!wifi.isAvailable() && !mobile.isAvailable()) {
    return false;
} else {
    return true;
} 
```

还将以下代码添加到清单文件

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

对于此类问题，您始终可以参考 android 开发者网站

# javascript - 使用 javascript 更改警报消息文本颜色

> ID：13451873
> 
> 赞同：11
> 
> 时间：2012-11-19T10:25:51.947
> 
> 标签：javascript

我正在使用下面的脚本来更改脚本的颜色，但像这样显示'font color="red">Hello world /font>。是否有任何可能的方法来更改警报文本颜色..

```
<html>
<head>
<title>JavaScript String fontcolor() Method</title>
</head>
<body>
<script type="text/javascript">

var str = new String("Hello world");

alert(str.fontcolor( "red" ));

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T10:27:23.517

不。`alert()`接受一个字符串并使用本机小部件呈现它。没有规定样式。

最接近的方法是通过 DOM 修改 HTML 文档以显示消息，而不是使用`alert()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-20T14:47:52.580

您可以使用 JQuery 来解决您的问题

```
<html>
<head>
<meta charset="utf-8" />
<title>JavaScript String fontcolor() Method</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-                  ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(function() {
 $( "#dialog-message" ).dialog({
  modal: true,
  buttons: {
  Ok: function() {
   $( this ).dialog( "close" );
   } 
}});
});
</script>
</head>

<body>
 <div id="dialog-message" title="My Dialog Alternative">
 <p style='color:red'> Hello world </p>
 </div>
</body>
 </html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-23T12:17:44.853

希望这有帮助：

```
<!doctype html>
<html>
<head>
<title>JavaScript String fontcolor() Method</title>
<style>
#alertoverlay{display: none;
    opacity: .8;
    position: fixed;
    top: 0px;
    left: 0px;
    background: #FFF;
    width: 100%;}

#alertbox{display: none;
    position: fixed;
    background: #000;
    border:7px dotted #12f200;
    border-radius:10px; 
    font-size:20px;}

#alertbox > div > #alertboxhead{background:#222; padding:10px;color:#FFF;}
#alertbox > div > #alertboxbody{ background:#111; padding:40px;color:red; } 
#alertbox > div > #alertboxfoot{ background: #111; padding:10px; text-align:right; }
</style><!-- remove padding for normal text alert -->

<script>
function CustomAlert(){
    this.on = function(alert){
        var winW = window.innerWidth;
        var winH = window.innerHeight;

        alertoverlay.style.display = "block";
        alertoverlay.style.height = window.innerHeight+"px";
        alertbox.style.left = (window.innerWidth/3.5)+"pt";
        alertbox.style.right = (window.innerWidth/3.5)+"pt"; // remove this if you don't want to have your alertbox to have a standard size but after you remove modify this line : alertbox.style.left=(window.inner.Width/4);
    alertbox.style.top = (window.innerHeight/10)+"pt";
        alertbox.style.display = "block";
        document.getElementById('alertboxhead').innerHTML = "JavaScript String fontcolor() Method :";
        document.getElementById('alertboxbody').innerHTML = alert;
        document.getElementById('alertboxfoot').innerHTML = '<button onclick="Alert.off()">OK</button>';
    }
    this.off = function(){
        document.getElementById('alertbox').style.display = "none";
        document.getElementById('alertoverlay').style.display = "none";
    }
}
var Alert = new CustomAlert();
</script>
</head>
<body bgcolor="black">
<div id="alertoverlay"></div>
<div id="alertbox">
  <div>
    <div id="alertboxhead"></div>
    <div id="alertboxbody"></div>
    <div id="alertboxfoot"></div>
  </div>
</div>
<script>Alert.on("Hello World!");</script>
</body>
</html> 
```

这个概念取自：http: [//www.developphp.com/video/JavaScript/Custom-Alert-Box-Programming-Tutorial](http://www.developphp.com/video/JavaScript/Custom-Alert-Box-Programming-Tutorial)

# javascript - 删除链接按钮

> ID：13451875
> 
> 赞同：0
> 
> 时间：2012-11-19T10:26:02.600
> 
> 标签：javascript, asp.net

我有一个`div`and 在这个 div 里面， a`ContentPlaceHolder`和里面的持有人 a `Linkbutton`。

我正在尝试动态删除链接按钮，但出现此错误：

> 错误：DOM 异常：NOT_FOUND_ERR (8)。

这是我的代码：

```
<div id="leftcol" style="z-index: 0">
    <asp:ContentPlaceHolder ID="ContentPlaceHolder2" runat="server">
    <asp:LinkButton  CssClass="childLI" ID="tblRSManswers" runat="server" Text="RS Manswers" OnClick="ChildLink_Click" > 
```

Javascript代码：

```
var child = document.getElementById("tblRSManswers"));
alert(child);
var parent = document.getElementById("ContentPlaceHolder2"));
alert(parent);
parent.removeChild(child); 
```

PS：警报不是NULL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:35:57.437

`removeChild`期望直接的父母。您粘贴的 HTML 似乎只是最相关代码的摘录，所以即使它在您的代码中看起来像，我不确定在您的实际应用程序中是否是这种情况？

尝试

```
child.parentNode.removeChild(child); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:30:27.220

试试这个代码

```
document.getElementById("<%= tblRSManswers.ClientID %>").parentNode.removeChild(document.getElementById("<%= tblRSManswers.ClientID %>")); 
```

**更新：**

在 ASP.Net 中，ContentPlaceHolders 只是呈现某些 HTML 元素的占位符，但它不是实际的 DOM 元素。它将在页面中不可见。所以**用javascript查找内容占位符总是返回null，因为它不会在DOM中呈现**

# c# - 如何使用 PRISM 在 WPF 中导航并绑定 DataContext

> ID：13451877
> 
> 赞同：3
> 
> 时间：2012-11-19T10:26:10.853
> 
> 标签：c#, wpf, mvvm, prism

围绕这个领域肯定有很多问题，但在我的例子中我找不到任何帮助。

我遇到的问题是让我的 ViewModel，特别是 ViewModel 中的一个属性，更新到我的 View。下面是我的实现。我想我明白我要去哪里错了，但不知道如何解决它。

我有一个具有列表和编辑视图的模块。很简单地列出域对象，然后能够编辑域对象。

我的 xaml 将 DataContent 绑定到我的视图中的 ViewModel 属性。

然后我使用 INavigationAware.NavigateTo 方法导航到我的 ViewModel，这是我加载域对象的地方。

问题是显然这并没有反映到视图中。该视图已经有一个 ViewModel 的实例。当 ViewModel 使用 ObservableCollection 使用对象列表时，此方法运行良好。但是，这在使用简单对象甚至 ObservableObject 时不起作用。

有人可以帮助我理解或指出一些可以更好地实现我想要实现的目标的链接吗？

**我的模块**

```
public class MyModule : IModule
{
    private readonly IRegionManager _regionManager;

    public MyModule(IRegionManager regionManager)
    {
        _regionManager = regionManager;
    }

    public void Initialize()
    {
        _regionManager.RegisterViewWithRegion(Constants.MainRegionName, typeof(MyListView));
        _regionManager.RegisterViewWithRegion(Constants.MainRegionName, typeof(MyEditView));
    }
} 
```

**XAML**

```
<UserControl
    DataContext="ViewModel">
    ...
    <TextBlock Text="{Binding Path=MyDomainObject.AProperty}" />
    ... 
```

**看法**

```
public partial class MyEditView
{
    public readonly static string ViewName = "MyEditView";

    public MyEditView(MyEditViewModel viewModel)
    {
        InitializeComponent();
        ViewModel = viewModel;
    }

    public MyEditViewModel ViewModel
    {
        get { return DataContext as MyEditViewModel; }
        private set { DataContext = value; }
    }
} 
```

**视图模型**

```
public class MyViewModel : INavigationAware
{
    private readonly IRegionManager _regionManager;

    public MyDomainObject MyDomainObject { get; set; }

    public void Load(ViewModelKey key)
    {
        // get domain object
        // this method worked when MyDomainObject was 
        // ObservableCollection<T> as just adding elements to list
        // where this is creating a new instance of MyDomainObject
        var id = parameter from navigationContext;
        MyDomainObejct = server.GetDomainObject(id);
    }

    public void OnNavigatedTo(NavigationContext navigationContext)
    {
        var key = key from navigationContext;
        Load(key);
    }
} 
```

**解决方案**

```
public class MyEditViewModel : INavigationAware
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged([CallerMemberName]string propertyName = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    private MyDomainObject _myDomainObject;
    public MyDomainObject MyDomainObject
    {
        get
        {
            return _myDomainObject;
        }
        set
        {
            if (value != _myDomainObject)
            {
                _myDomainObject = value;
                NotifyPropertyChanged();
            }
        }
    } 
```

**看法**

```
public partial class MyEditView
{
    public MyEditView(MyEditViewModel viewModel)
    {
        InitializeComponent();
        ViewModel = viewModel;

        ViewModel.PropertyChanged += ViewModel_PropertyChanged;
    }

    public MyEditViewModel ViewModel
    {
        get { return DataContext as MyEditViewModel; }
        private set { DataContext = value; }
    }

    private void ViewModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        if (!(sender is MyEditViewModel))
            return;

        ViewModel = (MyEditViewModel)sender;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:53:50.577

要更新绑定，您需要在域对象的 set 访问器上实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)并引发 PropertyChanged 事件。

```
public event PropertyChangedEventHandler PropertyChanged = delegate {};

public MyDomainObject MyDomainObject
{
    get
    {
        return myDomainObject;
    }
    set
    {
        if(value != myDomainObject)
        {
            myDomainObject = value;
            RaisePropertyChanged("MyDomainObject");
        }
    }
}

private void RaisePropertyChanged(String p)
{
    PropertyChanged(this, new PropertyChangedEventArgs(p));
} 
```

或者如在 Prism 书中，继承 NotificationObject 并调用 RaisePropertyChanged(()=> PropertyName) 这是重构安全的

# ruby-on-rails-3 - 如何创建启用和禁用的单选按钮？

> ID：13451878
> 
> 赞同：0
> 
> 时间：2012-11-19T10:26:23.497
> 
> 标签：ruby-on-rails-3, radio-button

> **可能重复：**
> [如何通过单选按钮启用和禁用邮件通知？](https://stackoverflow.com/questions/13470934/how-to-enable-and-disable-mailer-notification-through-radio-buttons)

我正在制作一个应用程序，当用户创建、更新或删除用户时，它将收到一封通知邮件。现在我想要的是在创建用户时会询问用户您希望通过通知邮件用户可以启用或禁用单选按钮。现在谁能告诉我如何创建这两个单选按钮？？？任何帮助，将不胜感激..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:03:23.910

这是我的用户控制器

```
class UsersController < ApplicationController
# GET /users
# GET /users.json

def index
@users = User.all

respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @users }
end
end

# GET /users/1
# GET /users/1.json
def show
@user = User.find(params[:id])

respond_to do |format|
  format.html # show.html.erb
  format.json { render json: @user }
end
end

# GET /users/new
# GET /users/new.json
def new
@user = User.new

respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @user }
end
end

# GET /users/1/edit
def edit
@user = User.find(params[:id])
end

# POST /users
# POST /users.json
def create
@user = User.new(params[:user])

respond_to do |format|
  if @user.save
   if @user.Notification then
     UserMailer.welcome_email(@user).deliver
  end

    format.html { redirect_to(@user, :notice => 'User was successfully created.') }
    format.json { render :json => @user, :status => :created, :location => @user }
  else
    format.html { render :action => "new" }
    format.json { render :json => @user.errors, :status => :unprocessable_entity }
  end
end
end

# PUT /users/1
# PUT /users/1.json
def update
@user = User.find(params[:id])

respond_to do |format|

    format.html { redirect_to @user, notice: 'User was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @user.errors, status: :unprocessable_entity }
  end
end
end

# DELETE /users/1
# DELETE /users/1.json
def destroy
@user = User.find(params[:id])
respond_to do |format|
  if @user.destroy
    # Tell the UserMailer to send a welcome Email after save
    UserMailer.welcome_email(@user).deliver

    format.html { redirect_to(@user, :notice => 'User was successfully created.') }
    format.json { render :json => @user, :status => :created, :location => @user }
  else
    format.html { render :action => "new" }
    format.json { render :json => @user.errors, :status => :unprocessable_entity }
  end
end
end

end 
```

这是我的 _form.html

```
<%= form_for(@user) do |f| %>
<% if @user.errors.any? %>
<div id="error_explanation">
  <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>

  <ul>
  <% @user.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
</div>
<% end %>

<div class="field">
<%= f.label :name %><br />
<%= f.text_field :name %>
</div>
<div class="field">
<%= f.label :email %><br />
<%= f.text_field :email %>
</div>
<div class="field">
<%= f.label :login %><br />
<%= f.text_field :login %>
</div>

<%= f.radio_button(:Notification, "True") %>
<%= f.label(:Notification_True, "True") %>
<br />
<%= f.radio_button(:Notification, "False") %>
<%= f.label(:Notification_False, "False") %>
<div class="actions">

<%= f.submit %>
</div>
<% end %> 
```

我已将 Notification 属性添加到我的模型 User 中，该属性是单选按钮的布尔类型。

# java - Java/Scala 中的“封闭”HashMap

> ID：13451881
> 
> 赞同：4
> 
> 时间：2012-11-19T10:26:30.447
> 
> 标签：java, scala, collections, hashmap

使用哈希映射时，性能瓶颈通常是`equals`方法。`equals`对于深度数据结构来说可能非常昂贵。

请注意，以下是关于*不可变*哈希映射的。因此，至少您永远不会删除密钥。我认为添加密钥应该没问题。

# 不安全`get`

假设您查询一个哈希映射，*并确定它包含查询的 key*。然后，如果给定键没有冲突，则可以仅基于哈希命中返回找到的单个条目，因为它*必须是*查询的对象。

这可以避免在大多数情况下调用`equals`（`get`当没有碰撞时）。

# 问题

1.  这个概念怎么称呼？
2.  是否有任何可用于 Java 或 Scala 的哈希映射实现支持这种不安全的`get`操作？

顺便说一句，我愿意接受更好的主题行的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T10:36:03.290

> 这个概念怎么称呼？

身份图。它在查找元素时不会调用`equals()`，只使用身份（即`==`）。

正确的解决方案不是“修复”地图，而是仅使用使用默认值的键`Object.equals()`：

```
public boolean equals( Object other ) { return this == other; } 
```

问题在于，除非所有键都是单例，否则在此映射中查找元素可能会出现问题。因此，您不能使用`String`，例如，因为 Java 不能**保证**所有字符串实例都是实习的。对于以下情况也是如此`Integer`：实例 < -128 和 > 127 会有所不同。

但是如果你使用自己优化的键实现，你可以解决这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T13:40:50.533

据我所知，这种数据结构并不存在，因为它不安全——没有办法可靠地编码您的特定条件。

但是，可惜的是，Scala 集合库允许使用少量新代码非常快速地实现新的丰富数据结构。这是您的请求的实现：

```
class ParticularHashMap[A, +B] private(buckets: Vector[List[(A, B)]]) extends Map[A, B]{

    def this() = this(Vector.fill(ParticularHashMap.BucketsNo)(List.empty))

    def get(key: A) = {
        val bucket = buckets(bucketIndex(key))

        bucket match {
            case List((_, v)) => Some(v) //YOUR SPECIAL OPTIMIZATION !
            case list => list.find(key == _._1).map(_._2)
        }
    }

    def iterator = buckets.flatten.iterator

    def -(key: A) = mkWithUpdatedBucket(key, _ filterNot (_._1 == key))

    def +[B1 >: B](kv: (A, B1)) = mkWithUpdatedBucket(kv._1, insert(kv._1, kv._2.asInstanceOf[B], _))

    //if you're wondering why it's Bucket[A, Any] and not Bucket[A, B] it's because of the covariance of B
    private def mkWithUpdatedBucket(key: A, f: Bucket[A, Any] => Bucket[A, Any]) = {
        val index = bucketIndex(key)
        val newBucket = f(buckets(index))
        (new ParticularHashMap[A, Any](buckets.updated(index, newBucket))).asInstanceOf[ParticularHashMap[A, B]]
    }

    private def insert(k: A, v: Any, bucket: List[(A, Any)]): Bucket[A, Any] = bucket match {
        case List() => List((k, v))
        case (k1, v1) :: kvs if k == k1 => (k, v) :: kvs
        case (k1, v1) :: kvs => (k1, v1) :: insert(k, v, kvs)
    }

    private def bucketIndex(key: A) = Math.abs(key.hashCode()) % ParticularHashMap.BucketsNo
}

object ParticularHashMap {
    private val BucketsNo = 256

    private type Bucket[+A, +B] = List[(A, B)]

    def apply[A, B](kvs: (A, B)*) = new ParticularHashMap[A, B] ++ kvs

} 
```

请注意，这是一个**幼稚的实现**，但您可以根据自己的需要对其进行改进。

它将按预期工作：

```
val myMap = ParticularHashMap("hello" -> 2, "world" -> 4)
println(myMap.get("hello")) >> Some(2)
println(myMap.get("world")) >> Some(4)
println(myMap.get("world1")) >> None 
```

但是，当然要注意，如果你不尊重你的合同，坏事就会发生。下面是一个特别精心设计的例子来展示它的缺点：

```
val evilMap = ParticularHashMap(1 -> 2)
println(evilMap.get(1)) >> Some(2)
println(evilMap.get(257)) >> Some(2) //BUT 257 IS NOT IN THE MAP !!! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:38:33.473

> 1）这个概念怎么称呼？

AFAIK，它没有名字。人们通常只为有效的解决方案命名。不起作用的解决方案（或仅在非常有限的情况下有效）通常不值得命名。

> 2) 是否有任何可用于 Java 或 Scala 的哈希映射实现支持这种不安全的 get 操作？

不是我知道的。再一次，人们倾向于不编写和发布仅在有限情况下工作或行为有*问题*的库。

* * *

> 它的破绽在哪里？为什么它不起作用？

首先，`Map.get(...)`如果您给它一个无法识别的键，则返回错误值的方法从根本上破坏了 Java`Map.get`契约。很可能还有其他不完善的方法；例如`Map.containsKey`、`Map.put`和`Map.putAll`/或`Map.remove`。

其次，如果您的假设不正确，则给出错误答案的数据结构是一个坏主意……如果您可以避免的话。

第三，以我们不知道您的实际用例为模，几乎可以肯定有更好的方法来解决问题。显而易见的是：

*   更改`equals`密钥类别以降低成本，
*   如果您不能更改`equals`、定义和使用代理密钥类，或者
*   使用 a`Map<Integer, List<Pair<Key,ValueClass>>>`其中用作键的整数是实际键的哈希码。

（最后一种方法需要可疑的“始终包含密钥”假设，但至少您没有破坏 Map 抽象，因此可以在需要时进行适当的检查。）

最后，即使您确实决定您的“脏”优化对于您的应用程序是必要的，并决定自己实现它。我声称我的回答仍然是正确的解释：

1.  为什么这个“黑客”没有一个普遍接受的术语，以及
2.  为什么在 3 个主要的 Java 集合库（或我目前知道的任何其他库）中没有现成的实现。

你可能不喜欢它，但没有更好的解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-26T16:39:37.233

在这种情况下，您唯一需要的是一个数组，不是吗？

如果您知道没有冲突 - 这意味着没有两个键具有相同的哈希码 - 您可以使用哈希码作为地址来索引数组。例如，如果您的键对象的哈希码之一是 1003，则可以将相应的值对象放入 yourArray[1003]。

如果你买不起巨大的数组，假设你可以执行“不安全”的 get 操作，你可以将地址计算为 key.hashcode() % yourArray.length。每当 key1 和 key2 因为模运算而映射到同一个插槽时，只需覆盖该插槽即可。

```
class SimpleMap<K, V> {
    private V [] data;

    public SimpleMap(int size){
        data = (V[])new Object[size];
    }

    public void put (K key, V value){
        data[key.hashCode() % data.length] = value;
    }

    public V get(K key) {
        return data[key.hashCode() % data.length];
    }
} 
```

# c# - 在 XmlReader C# 中跳过子项

> ID：13451883
> 
> 赞同：0
> 
> 时间：2012-11-19T10:26:38.483
> 
> 标签：c#, xml, xmlreader

我有以下 XML

```
<Company name="Kinanah Computers">
  <Computer Name="Computer" type="Dell">
      <Accessory type="screen" model="dell"/>
      <Accessory type="mouse" model="dell"/>
      <Accessory type="keyboard" model="dell"/>
  </Computer>
  <Computer Name="Computer" type="HP">
        <Accessory type="screen" model="hp"/>
        <Accessory type="mouse" model="chinese"/>
        <Accessory type="keyboard" model="dell"/>
  </Computer>
  <Computer Name="Computer" type="HP">
        <Accessory type="screen" model="hp"/>
        <Accessory type="mouse" model="chinese"/>
        <Accessory type="keyboard" model="dell"/>
  </Computer>
  <Computer Name="Computer" type="acer">
        <Accessory type="screen" model="acer"/>
        <Accessory type="mouse" model="acer"/>
        <Accessory type="keyboard" model="acer"/>
  </Computer>
</Company> 
```

我想做的是跳过HP电脑，如果它的类型是HP，有谁能告诉我该怎么做吗？

我正在使用以下 C# 代码：

```
var stream = new StringReader(instanceXml/*the xml above*/);
var reader = XmlReader.Create(stream);
var hpCount = 0;
reader.MoveToContent();

while (reader.Read())
{
  if(reader.NodeType == XmlNodeType.Element)
  {
     if(reader.GetAttribute("Name") == "Computer" && reader.GetAttribute("type") == "HP")
     {
        if(hpCount >1)
        {
           reader.Skip();
          continue;
        }
        hpCount++;
     }
  }
} 
```

但是 Skip 不起作用，读取的下一个元素是

```
<Accessory type="screen" model="hp"/> 
```

关于如何跳过这些行的任何帮助？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:32:30.573

您可以使用 Linq 轻松解析您的 xml：

```
XDocument xdoc = XDocument.Parse(instanceXml);
var query = from c in xdoc.Descendatns("Computer")
            where (string)c.Attribute("type") != "HP"
            select new {
               Name = (string)c.Attribute("Name"),
               Type = (string)c.Attribute("type"),
               Accessories = from a in c.Elements()
                             select new {
                                Type = (string)a.Attribute("type"),
                                Model = (string)a.Attribute("model")
                             }
            }; 
```

这将为您提供强类型匿名对象的集合，用嵌套的附件集合表示计算机数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:06:53.767

> 实际上这无济于事，因为我要根据计数进行过滤，对不起，我已经更新了那里的代码，你能重新检查一下吗？

```
List<XElement> query = from c in xdoc.Decendants("Computer") // from <Computer> tag or lower
where (string)c.Attribute("type") == "HP" // where <Computer> attribute name is "type" and "type" equals string value "HP"
select c; // return List of matching `<Computer>` XElements

int HpComputers = query.count; // You want to filter by amount of HP computers? 
```

像这样根据计数过滤？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:14:14.507

> **不是检查 hpCount > 1，而是检查 hpCount > 0**

```
if(hpCount >1)
{
  reader.Skip();
  continue;
 } 
```

# asp.net - 跟踪用户控件和页面的编译时间

> ID：13451885
> 
> 赞同：0
> 
> 时间：2012-11-19T10:26:41.103
> 
> 标签：asp.net, visual-studio-2010, dynamic-compilation

在 Visual Studio 2010 中使用构建前和构建后任务，我可以记录一天中的编译时间。我想对动态编译的用户控件和页面做同样的事情，以监控`Temporary ASP.NET`.

我应该创建一个调用“真实”编译器的自定义 C# 编译器，并在之前/之后输出日志吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:16:44.013

创建一个“自定义”编译器并从 web.config 引用它似乎是一种方法。

*我现在遇到了奇怪的行为：* [在 ASP.NET 中使用简单的 CSharpCodeProvider 时出现与 LINQ 相关的错误](https://stackoverflow.com/q/13458605/446576)

# php - 使用 LAMP 在 PHP 上发送邮件

> ID：13451887
> 
> 赞同：0
> 
> 时间：2012-11-19T10:26:57.407
> 
> 标签：php, email, smtp, lamp

我一直在尝试使用 PHP 发送邮件，但我似乎无法让它工作。

我查看了教程，它们使它看起来很简单。然而，它实际上似乎需要比提到的更多的工作。通过研究（为了简短起见），似乎不是“发件人：”标题实际上具有我给它的地址，似乎...... sendmail 用 daemon@ubuntu 替换它或其他东西？好的，即使我不包含标头，我仍然会从 daemon@ubuntu 的 gmail 帐户中收到垃圾邮件（我在 vm 上运行 ubuntu，并将邮件发送到我的 gmail 帐户）。我想这可以解释为什么我在尝试发送邮件时不断收到错误，说“MAIL FROM 命令”中存在错误。

因此，在我开始搞乱 sendmail 之前，这是 daemon@ubuntu 胡说八道的（可能）罪魁祸首吗？教程中提到了诸如 sendmail 之类的东西，但实际上并没有详细说明如何处理它们。我确实确保在我的 php 配置文件中使用了 sendmail。

我听说过 PHPmail 之类的替代邮件服务器或类似的东西。我真的不想参与安装和配置更多软件，除非我真的必须这样做。因此，除非你们真的认为 sendmail 不值得，否则我会更喜欢关于 sendmail 的建议。

感谢您的时间。

编辑：我在 VMware Player 的 Ubuntu vm 上使用 PHP mail() 函数。

所以有人想看看我的代码。我有点想避免这种情况，因为我尝试了许多不同的可能性。我现在只包含我在文件中的内容：

```
<?php
                    $myEmail    = "####@gmail.com";
                    $fromAddr   = $_POST['sender-email'];

                    $headers    = "MIME-Version: 1.0\r\n";
                    $headers   .= "Content-type: text/html; charset=iso-8859-1\r\n";
                    $headers   .= "From: $fromAddr\r\n";
                    $headers   .= "'X-Mailer: PHP/'" . phpversion() . "\r\n";
                    $message    = $_POST['message'];

                    $status     = mail($myEmail, $_POST['subj'], $message);

                    if($status) {
                        echo "Your message has been sent, " .$fromAddr. "!";
                    }
                    else {
                        echo "An error occurred while trying to send the mail.";
                    }
                ?> 
```

MIME 类型的东西，以及我稍后添加的内容类型的东西。我试过没有他们。我也尝试过在不使用任何标题的情况下发送邮件，但显然仍然得到了 daemon@ubuntu 的东西。另外，我编辑了我的电子邮件地址以在此处发布代码。好的，我想我也应该添加这个：我正在从另一个页面的 HTML 表单中获取数据。在提交时，我来到这个 php 页面，它获取该数据然后发送电子邮件（这不适合任何专业人士，我这样做只是为了了解更多关于网络的东西）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:35:34.587

[根据我的经验， Postfix](http://www.postfix.org/)是一个非常易于使用和安装的电子邮件服务器。您需要安装和配置电子邮件服务器，然后才能在本地主机上发送电子邮件。

# magento - 在 1.7 中打印一个 magento 文本字段属性

> ID：13451892
> 
> 赞同：0
> 
> 时间：2012-11-19T10:27:22.613
> 
> 标签：magento, magento-1.7

我已经设置了一个新的文本字段属性（下载）并希望在列表页面上打印它。

我已经尽一切努力让它打印出来，包括下面的这些，1.7有什么变化吗？

```
<?php $_product->getData('download'); ?>
<?php echo $item->getDownload(); ?>
<?php echo Mage::getModel('catalog/product')->load($this->getProduct()->getId())->getAttributeText('download'); ?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:15:08.927

您是否也尝试过 $_product->getDownload()？这应该适用于 Magento 1.7 中的文本字段属性。

# iphone - 游戏编程难的数学题

> ID：13451898
> 
> 赞同：2
> 
> 时间：2012-11-19T10:27:33.797
> 
> 标签：iphone, objective-c, math, positioning

我要问的问题可能有点挑战性。我会尽量使这一点尽可能清晰和有凝聚力。

我目前正在制作一个游戏，其中我有一个“激光环”，如下所示：

![一个激光环](../Images/103ef43e431453cf20ea06b2c2ec8116.png)

当出现提示时，这个激光环会发射一个“抓钩”，如下图所示。调整此图像的`frame.width`属性以使其触发（加长）和缩回（缩短）。它从宽度 0 开始，随着帧的进行，它会加长直到达到所需的点。

![在此处输入图像描述](../Images/4e9086879b842a1b8bc500a862c3890b.png)

这个抓钩在发射时应该与环对齐，以便它们看起来是一个物品。为清楚起见，请参阅下图：

![在此处输入图像描述](../Images/f9185e048a8cc868e0149f81b6ae5a13.png)

*请注意，抓钩的宽度几乎每帧都在变化，因此不能假设宽度恒定。

还有一点需要注意的是，由于难以解释的原因，我只能访问`frame.center`抓钩的属性，而不能访问该`frame.origin`属性。

所以，我对你们所有人的问题是：我如何才能仅访问抓钩的`frame.center.x`和`frame.center.y`属性，将其放置在激光环周围，使其看起来从环无缝延伸，如上图所示- 大概是根据任何给定框架的抓钩的角度和宽度计算的？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T10:42:10.703

好的，我在自己的应用程序中做了同样的事情。

我做的让它更容易的技巧是有一个函数来计算线的“unitVector”。

即基于线长1的线中的矢量变化。

它只是使用简单的毕达哥拉斯......

```
- (CGSize)unitVectorFromPoint:(CGPoint)start toPoint:(CGPoint)end
{
    //distance between start an end
    float dX = end.x - start.x;
    float dY = end.y - start.y;
    float distance = sqrtf(dX * dX + dY * dY);  // simple pythagorus

    //unit vector is just the difference divided by the distance
    CGSize unitVector = CGSizeMake(dX/distance, dY/distance);

    return unitVector;
} 
```

注意......开始和结束的哪一种方式并不重要，因为数字的平方只会给出正值。

现在您可以使用此向量到达两点（圆心和目标）之间的直线上的任何点。

所以，这条线的开始是......

```
CGPoint center = // center of circle
CGPoint target = // target
float radius = //radius of circle

float dX = center.x - target.x;
float dY = center.y - target.y;

float distance = sqrtf(dX * dX + dY * dY);

CGSize unitVector = [self unitVectorFromPoint:center toPoint:target];

CGPoint startOfLaser = CGPointMake(center.x + unitVector.x * radius, center.y + unitVector.y * radius).

CGPoint midPointOfLaser = CGPointMake(center.x + unitVecotr.x * distance * 0.5, center.y + unitVector.y * distance * 0.5); 
```

这只是将单位矢量乘以您想要到达该距离线上的点的距离（半径）。

希望这会有所帮助：D

如果您想要两点之间的中点，那么您只需将“半径”更改为您要计算的距离，它将为您提供中点。（等等）。

# c# - 文化信息逗号不会将我的十进制读取为十进制

> ID：13451911
> 
> 赞同：0
> 
> 时间：2012-11-19T10:28:04.093
> 
> 标签：c#, cultureinfo

我用逗号输入的 db 中 my_waste 的值是：

```
16.78 
```

我通过 linq 进行选择，然后：

```
res.Add("testdb", p.my_waste); 
```

我得到1678。

我试过：

```
res.Add("test", double.Parse(p.my_waste.ToString(), CultureInfo.InvariantCulture)); 
```

和

```
res.Add("test", string.Format(CultureInfo.InvariantCulture, "{0:0.00}", p.my_waste)); 
```

我仍然得到1678。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:32:52.750

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)

> 不变的文化是文化不敏感的；它与英语相关，但与任何国家/地区无关。

这意味着它希望数字具有小数点，因为英语（所有变体）使用小数点而不是小数点逗号。

如果您输入带有小数点逗号的数据，您需要使用带有小数点逗号的文化（例如法语）到字符串<-> 数字转换。

目前，逗号被视为千位分隔符并被有效忽略，因此正如您所观察到的，“16,78”作为 1678 出现。

# json - 在linux中解析Json

> ID：13451915
> 
> 赞同：-2
> 
> 时间：2012-11-19T10:28:11.893
> 
> 标签：json

我需要在 linux 命令中转换这些数据。任何人都可以帮忙吗？

```
{"date":"2005\u5e7405\u670812\u65e5(\u6728) 02\u664216\u5206","quiz_no":"1469","body":"\u4e09\u56fd\u5fd7\u3092\u30e2\u30c1\u30fc\u30d5\u306b\u3057\u305f\u6a5f\u7a2e\u3002\u6b63\u3057\u3044\u6a5f\u7a2e\u540d\u306f\u3069\u308c\u304b\uff1f","choice":[{"c1":"CR\u4e09\u56fd\u904a\u622f","c2":"CR\u4e09\u56fd\u904a\u7fa9","c3":"CR\u4e09\u56fd\u6f14\u7fa9"}],"answer":"c2"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:18:04.510

您可以使用[下划线](https://github.com/ddopson/underscore-cli)（基于 NodeJS）之类的工具来美化输出：

```
echo '{"date":"2005\u5e7405\u670812\u65e5(\u6728) 02\u664216\u5206","quiz_no":"1469","body":"\u4e09\u56fd\u5fd7\u3092\u30e2\u30c1\u30fc\u30d5\u306b\u3057\u305f\u6a5f\u7a2e\u3002\u6b63\u3057\u3044\u6a5f\u7a2e\u540d\u306f\u3069\u308c\u304b\uff1f","choice":[{"c1":"CR\u4e09\u56fd\u904a\u622f","c2":"CR\u4e09\u56fd\u904a\u7fa9","c3":"CR\u4e09\u56fd\u6f14\u7fa9"}],"answer":"c2"}'|underscore pretty

// Result:

{
  date: "2005年05月12日(木) 02時16分",
  quiz_no: "1469",
  body: "三国志をモチーフにした機種。正しい機種名はどれか？",
  choice: [{ c1: "CR三国遊戯", c2: "CR三国遊義", c3: "CR三国演義" }],
  answer: "c2"
} 
```

# php - PHP：具有特征的奇怪行为

> ID：13451916
> 
> 赞同：0
> 
> 时间：2012-11-19T10:28:11.287
> 
> 标签：php, traits

以下代码输出 1，但为什么呢？该属性是私有的，子类不应访问它。

```
<?php
trait PropertiesTrait {
    private  $same = true;
}

class PropertiesExample {
    use PropertiesTrait;
    public function foo(){
        echo $this->same;
    }
}
(new PropertiesExample())->foo();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:33:13.163

1.  您没有子课程。你只有`PropertiesExample`.

2.  您不是从外部访问该物业。你有一个getter方法。

# amazon-ec2 - 除非明确提及，否则 Amazon EC2 自动缩放工具不会显示特定的自动缩放组

> ID：13451921
> 
> 赞同：1
> 
> 时间：2012-11-19T10:28:32.160
> 
> 标签：amazon-ec2, autoscaling

我有一个自动缩放组，除非我明确请求，否则使用自动缩放[命令行工具](http://docs.amazonwebservices.com/AutoScaling/latest/DeveloperGuide/US_BasicSetup.html)似乎不会出现。IE：

```
as-describe-auto-scaling-groups qa-MyAppName 
```

返回自动缩放组：

```
AUTO-SCALING-GROUP  qa-MyAppName  release_1_by_john_smith  us-east-1a  qa-MyAppName  5  10  5
... 
```

然而 as-describe-auto-scaling-groups 命令根本不显示这个特定的 AS 组：

```
as-describe-auto-scaling-groups 
```

根本不返回此 Auto Scaling 组。但显示了其他 AS 组。

为什么这个 AS 组没有显示在所有 AS 组的列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:56:47.983

你有多少个SG？除非另有说明，否则 as-describe... 命令将仅返回结果的子集（默认为 20，IIRC）。也许这是21号？

# ios - NSURLConnection 有问题

> ID：13451923
> 
> 赞同：0
> 
> 时间：2012-11-19T10:28:47.510
> 
> 标签：ios, nsurlconnection

我有上传和下载图像和音频文件的单一视图。这是我在做什么

要开始下载我正在使用这个：

```
 NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

这会触发它的 delagate 方法

```
connection:didReceiveResponse:

connection:didReceiveData:

connectionDidFinishLoading: 
```

在这些方法中，我正在计算文件大小，通过进度条显示下载进度并将文件保存在我的设备中。

为了上传我正在这样做

```
[NSURLConnection connectionWithRequest:request delegate:self]; 
```

并使用这个`connection:didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite:`

这个委托方法工作正常上传文件，还告诉 bytesWritten，totalBytesWritten，totalBytesExpectedToWrite 但它也调用

```
connection:didReceiveResponse:

connection:didReceiveData:

connectionDidFinishLoading: 
```

并且它是有效的，因为它们都是委托方法。

但问题是我正在使用这三个来处理下载。

关于上传和下载数据，使用 NSURLConection 的正确方法是什么？

参考[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:44:04.697

对我来说最好的方法是在专用类（例如 DownloadingDelegate 和 UploadingDelegate）中实现委托，并为每个连接实例化不同的委托。然后可以完全独立地处理下载和上传过程。

或者，如果下载和上传不是并发的，使用布尔值作为标志并在您的委托函数中测试它会更简单。

例如，假设您使用一个名为 的布尔实例变量`downloading`。

您将有下载：

```
downloading = true;
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

和上传：

```
downloading = false;
[NSURLConnection connectionWithRequest:request delegate:self]; 
```

然后在你的代表中：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    if( downloading )
    {
        // handle the response when downloading ...
    }
    else
    {
        // when uploading
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:50:27.003

保存指向 NSURLConnections 的指针，并在委托内部确定使用哪一个。

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    if(connection==downloaderConn) {
       //handle download
    }
    else {
       //handle upoad
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T10:31:17.987

您可以`AFNetworking`用于您的任务。

`AFNetworking`是一个令人愉快的网络库`iOS`和`Mac OS X`. 它建立在`NSURLConnection`,`NSOperation`和其他熟悉的`Foundation technologies`. 它具有`modular architecture`精心设计、功能丰富的 API，使用起来很愉快。

在这里找到[SDK](https://github.com/AFNetworking/AFNetworking)

# linux - 按字母顺序列出 du 命令的结果

> ID：13451926
> 
> 赞同：25
> 
> 时间：2012-11-19T10:29:26.680
> 
> 标签：linux, du

如何`du`按字母顺序列出命令的结果？

我知道我可以使用该`find`命令按字母顺序列出它们，但没有目录大小，我也使用这`-maxdepth`两个命令的选项，以便列表只出现在一个子目录中。

这是斜体字的问题：

*编写一个实现目录大小分析器的 shell 脚本。在您的脚本中，您可以使用常见的 Linux 命令。该脚本应该列出给定参数的每个直接子目录或当前目录（如果没有给出参数）占用的磁盘存储空间，子目录名称按字母顺序排列。此外，列出磁盘使用率最高的子目录的名称及其存储大小。如果多个子目录具有相同的最高磁盘使用率，请列出这些子目录中的任何一个。包括有意义的简短评论。适用于此脚本的 bash 命令列表包括但不限于：cat、cut、du、echo、exit、for、head、if、ls、rm、sort、tail、wc。您可以使用 bash 变量以及临时文件来保存中间结果。在执行结束时删除所有临时文件。*

这是我在命令行中输入`du $dir -hk --max-depth=2 | sort -o temp1.txt`then后的结果：`cat temp1.txt`

```
12      ./IT_PLAN/Inter_Disciplinary
28      ./IT_PLAN
3       ./IT_PLAN/Core_Courses
3       ./IT_PLAN/Pre_reqs
81      .
9       ./IT_PLAN/IT_Electives 
```

它应该如下所示：

```
28      ./IT_PLAN
3       ./IT_PLAN/Core_Courses
12      ./IT_PLAN/Inter_Disciplinary
9       ./IT_PLAN/IT_Electives
The subdirectory with the maximum disk space use:
28      ./IT_PLAN 
```

再一次，我无法按字母顺序对结果进行排序。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-19T10:37:04.470

尝试这样做：

```
du $dir -hk --max-depth=2 | sort -k2 
```

`-k2`是列号 2

请参阅[http://www.manpagez.com/man/1/sort/](http://www.manpagez.com/man/1/sort/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:39:15.863

`du $dir -hk --max-depth=2 |awk '{print $2"\t"$1}'|sort -d -k1 -o temp1.txt` 如果你想删除 ./ 路径

```
 du $dir -hk --max-depth=2 |awk '{print $2"\t"$1}'|sed -e 's/\.\///g'|sort -d -k1 -o temp1.txt 
```

# c# - 使用 Linq 创建字典

> ID：13451929
> 
> 赞同：4
> 
> 时间：2012-11-19T10:29:41.890
> 
> 标签：c#, linq, dictionary, concurrentdictionary

如何使用 Linq创建一个`Dictionary`（甚至更好的一个）？`ConcurrentDictionary`

例如，如果我有以下 XML

```
<students>
    <student name="fred" address="home" avg="70" />
    <student name="wilma" address="home, HM" avg="88" />
    .
    . (more <student> blocks)
    .
</students> 
```

加载`XDocument doc;`并想要填充一个`ConcurrentDictionary<string, Info>`（其中键是名称，并且`Info`是某个类持有地址和平均值。填充`Info`现在不是我关心的问题），我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T10:36:21.693

```
XDocument xDoc = XDocument.Parse(xml);
var dict = xDoc.Descendants("student")
                .ToDictionary(x => x.Attribute("name").Value, 
                              x => new Info{ 
                                  Addr=x.Attribute("address").Value,
                                  Avg = x.Attribute("avg").Value });

var cDict = new ConcurrentDictionary<string, Info>(dict); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T10:37:07.397

这样的事情会做：

```
var dict = xml.Descendants("student")
              .ToDictionary(r => (string)r.Attribute("name").Value, r => CreateInfo(r)); 
```

这产生了一个平常的`Dictionary`; 您可以`ConcurrentDictionary` [从通常的`Dictionary`](http://msdn.microsoft.com/en-us/library/dd287236.aspx).

* * *

编辑：更改`Element`为`Attribute`，感谢@spender 注意到这一点。还有“学生”->“学生”，感谢@Jaroslaw。

# android - 即使在我的安卓手机root后，内存显示空间不足？

> ID：13451930
> 
> 赞同：0
> 
> 时间：2012-11-19T10:29:48.757
> 
> 标签：android

实际上，由于内部内存空间（200mb）问题，我将我的 android 手机植根。植根后，我将大部分应用程序移至 SD 卡，但即使它显示只有 35mb 的内部空间可用。谁能告诉我如何释放内部空间并占用 SD 卡中的所有文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:37:16.487

主要问题不是缓存。内部内存被您的android操作系统占用。并且使用所有的软件你不能移动存储卡中的完整应用程序。它的一部分保留在内存中，甚至应用程序的数据也在内存中。例如，在植根 facebook 后，内部仅占用 9 mb，其中数据为 7mb，内部应用程序大小仅为 2 mb。

# c++ - C ++将朋友添加到模板类以进行类型转换

> ID：13451934
> 
> 赞同：8
> 
> 时间：2012-11-19T10:30:01.670
> 
> 标签：c++, templates

我目前正在阅读“Effective C++”，其中有一章包含与此类似的代码：

```
template <typename T>
class Num {
public:
  Num(int n) { ... }
};

template <typename T>
Num<T> operator*(const Num<T>& lhs, const Num<T>& rhs) { ... }

Num<int> n = 5 * Num<int>(10); 
```

这本书说这不起作用（实际上它不起作用），因为您不能期望编译器使用隐式类型转换来专门化模板。

作为一种解决方案，建议使用“friend”语法在类中定义函数。

```
//It works
template <typename T>
class Num {
public:
  Num(int n) { ... }

  friend 
  Num operator*(const Num& lhs, const Num& rhs) { ... }
};

Num<int> n = 5 * Num<int>(10); 
```

并且本书建议每当我需要隐式转换为模板类类型时使用这个朋友声明。这一切似乎都说得通。

但是，为什么我不能使用通用函数而不是运算符获得相同的示例？

```
template <typename T>
class Num {
public:
  Num(int n) { ... }

  friend 
  void doFoo(const Num& lhs) { ... }
};

doFoo(5); 
```

这次编译器抱怨他根本找不到任何“doFoo”。如果我在类之外声明 doFoo，我会得到合理的不匹配类型错误。似乎“朋友……”部分只是被忽略了。

那我的理解有问题吗？在这种情况下，函数和运算符有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:35:17.867

原因是这里

```
doFoo(5); 
```

`foo`给定`int`参数，编译器无法找到。这相当于像这样调用您的朋友运算符：

```
Num<int> n = 5 * 10; 
```

这将“起作用”，但不是通过调用类中的`friend operator*`定义`Num`，而是通过调用整数的内置`operator*`函数，然后使用来自`Num`转换构造函数的隐式转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:51:19.257

核心问题是查找。声明提供`friend`了命名空间级别函数的声明，但该声明仅在与其友好的类中可用。在本书提供的示例中，这不是问题：该函数接受两个封闭类型的参数，只要其中一个是封闭类型，Argument Dependent Lookup 将查看类的定义并找到运算符。在您的情况下，情况并非如此，因为只有一个参数并且需要转换，编译器不会查看类的定义。

请注意，这与模板和转换无关：

```
class A {
   friend void f( int ) {}
   friend void g( int, A ) {}
};
int main() {
   f(5);           // Error: lookup cannot find 'f' declared *only* inside A
   g(5,A());       // Ok, one argument is 'A', lookup will find the function
} 
```

在上面的例子中，没有涉及模板，您可能会在命名空间级别添加一个声明来修复它，但这并不是模板类的真正选择。

```
class A {
   friend void f() { std::cout << "inside A\n"; }
};
void f(int);     // only declaration
int main() {
   f(5);         // "inside A"
} 
```

这不能用于模板（以及所有实例化类型），因为友元声明是非模板函数的声明。尽管您可以只是为了测试而使用代码：

```
template <typename T>
struct Num {
   Num(int x) ...
   friend void f( Num const & );
};
Num<int> f(Num<int> const &);    // only declaration
int main() {
   f(5);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:55:34.153

是的，这些代码编译器不知道如何使用它。喜欢 doFoo(5)

编译器不知道 5 是 int

# c++ - OpenCV：将 3 通道图像转换为 4 通道

> ID：13451936
> 
> 赞同：14
> 
> 时间：2012-11-19T10:30:05.020
> 
> 标签：c++, opencv, image-processing

我正在尝试将 3 通道图像更改为 4 通道，如下所示：

```
cv::VideoCapture video;
video.open("sample.avi");
cv::Mat source;
cv::Mat newSrc;
int from_to = { 0,0, 1,1, 2,2, 3,3 };
for ( int i = 0; i < 1000; i ++ )
{
   video >> source;
   cv::mixChannels ( source, 2, newSrc, 1, from_to, 4 );
} 
```

然后我得到了

```
too many input arguments in function call 
```

对于“mixChannels”行。此外，我不确定我是否为我的目标正确地给出了论据。有人能帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-19T12:19:21.373

您可以将 3 通道图像转换为 4 通道，如下所示：

```
cv::Mat source = cv::imread(path);

cv::Mat newSrc(source.size(), CV_MAKE_TYPE(source.depth(), 4));

int from_to[] = { 0,0, 1,1, 2,2, 2,3 };

cv::mixChannels(&source,1,&newSrc,1,from_to,4); 
```

这样，通道 4 将成为通道 3 的副本。通过在列表中使用负数`from_to`，输出通道被零填充。例如：

```
int from_to[] = { 0,0, 1,1, 2,2, -1,3 }; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-19T10:39:46.243

第 4 个频道应该包含什么？怎么样：

```
VideoCapture cap(0);
Mat frame;
cap >> frame;

Mat RGBA(frame.size(), CV_8UC4, camData);
cv::cvtColor(frame, RGBA, CV_BGR2RGBA, 4); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-24T10:11:56.647

我认为应该是这样的：

```
cv::Mat source = cv::imread(path);
cv::Mat newSrc = cv::Mat(source.rows,source.cols,CV_8UC4);

int from_to[] = { 0,0, 1,1, 2,2, 3,3 };
cv::mixChannels(&source,1,&newSrc,1,from_to, source.channels()); 
```

在 C++11 中，您可以使用初始值设定项列表为内联批量转换提供多个矩阵：

```
cv::mixChannels({{source}}, {{newSrc}}, from_to, source.channels()); 
```

我们设置了 3 对要复制，所以这使得 newsrc 中的 4 通道为空。第二个和第四个参数中的 1 表示指针 source 和 newSrc 指向一个要处理的元素。最后一个参数给出 from_to 的长度。

# .net - 如何同时发送电子邮件（批量）

> ID：13451939
> 
> 赞同：0
> 
> 时间：2012-11-19T10:30:25.117
> 
> 标签：.net, vb.net, multithreading, email

我用 vb.net 制作了一个客户端应用程序，我想同时向多个收件人发送电子邮件。我知道如何发送一封电子邮件，但我不知道如何发送其中许多。我应该做什么，创建许多 smtpclient 对象或用线程发送它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:38:48.500

如果您只是想向多人发送一封电子邮件，请用分号分隔要发送给的人员列表。例如：

```
Send("me@me.com", "you@you.com; someone@else.com; h@i.com", "Hi!", "Hi there guys!") 
```

另外，同时发送所有电子邮件的重要性是什么？如果它们在彼此之后发送一秒钟可以吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:32:20.877

使用线程功能发送它们。
使用许多 smtpclient 对象创建需要很多资源c，这可能是性能低下的原因。
因此最好在队列的帮助下使用线程工具，一次从队列中获取一些工作并处理它们

```
Dim t As New Threading.Thread(New Threading.ParameterizedThreadStart(AddressOf SendEmails))
t.Start(emailThread) 
```

# sql - SQL 语句中过程的并行执行 (Oracle 11g)

> ID：13451944
> 
> 赞同：3
> 
> 时间：2012-11-19T10:30:50.500
> 
> 标签：sql, plsql, oracle11g, optimizer-hints

我有一个 SQL 语句，它使用一个`Check-Function`需要很长时间才能执行的语句。

现在我想并行化 的执行`Check-Function`，但它不起作用。

我犯的错误在哪里？

下面的示例需要 5 秒来执行，但据我了解，由于并行性，它应该需要大约 1 秒。

测试代码片段：

```
CREATE TABLE PERSON AS
SELECT LEVEL AS ID, 'Person_'||LEVEL AS NAME
FROM DUAL 
CONNECT BY LEVEL <= 5;

CREATE OR REPLACE FUNCTION LONGCHECKFUNC(ID NUMBER)
RETURN NUMBER IS
BEGIN
    --Doing some very heavy Checks....
    DBMS_LOCK.SLEEP(1 /*second*/);
    RETURN 1;
END;

SELECT /*+PARALLEL(person, 5) */ *
 FROM PERSON
WHERE LONGCHECKFUNC(ID)=1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:54:38.413

并行查询不是为这种尝试的功能而设计的。

这里最好的做法是开始调整函数本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T06:05:03.227

```
CREATE TABLE PERSON
PARTITION BY HASH(ID) PARTITIONS 16 /* <-- ADDED*/
AS
SELECT LEVEL AS ID, 'Person_'||LEVEL AS NAME
FROM DUAL 
CONNECT BY LEVEL <= 5;

CREATE OR REPLACE FUNCTION LONGCHECKFUNC(ID NUMBER)
RETURN NUMBER PARALLEL_ENABLE /* <-- ADDED*/ IS
BEGIN
    --Doing some very heavy Checks....
    DBMS_LOCK.SLEEP(1 /*second*/);
    RETURN 1;
END;
/

SELECT /*+PARALLEL(person, 5) */ *
 FROM PERSON
WHERE LONGCHECKFUNC(ID)=1; 
```

首先，您需要将[PARALLEL_ENABLE](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/create_function.htm#LNPLS1919)添加到您的函数中。这告诉 Oracle 函数调用不共享任何会话数据，并且可以独立运行。

第二个变化，添加哈希分区，我不太明白。它取决于 Oracle 用来划分工作负载的内部算法。当存在散列分区时，在并行服务器之间划分段可能是最简单的。如果没有分区，则只有少量块，Oracle 可能认为在单个并行服务器上运行所有内容是最快的。

（即使你使用`ASSOCIATE STATISTICS`这个函数并给它一个荒谬的成本，Oracle 仍然会串行运行它。也许有一些限制，Oracle 永远不会在多个并行服务器之间分割一个块？）

这在大约 1.1 中运行。在我的机器上秒。但由于它取决于（AFAIK）未记录的行为，我不确定它是否会为你运行同样的。Oracle 的散列函数不会以简单的循环方式将值放入桶中。为了最大限度地减少冲突并增加最佳并行性的机会，您将需要使用大量分区。

正如@David Aldridge 提到的，并行查询并不是真正为此设计的。如果您想要一个更具确定性的过程，您将需要类似@Polppan 建议的解决方案（使用 DBMS_SCHEDULER）。

# magento - 当我尝试在 Magento 管理员中编辑订单地址时出现空白页面

> ID：13451953
> 
> 赞同：0
> 
> 时间：2012-11-19T10:31:22.417
> 
> 标签：magento, magento-1.6

我正在运行 Magento 1.6.2。当我在管理系统中单击送货或账单地址 DIV 上方的编辑链接时，我得到的只是一个空白页面。我如何找出错误在哪里？我已经尝试打开模板路径提示（用于管理系统），但是因为当我单击链接时绝对没有呈现任何内容，所以我什至看不到任何模板信息来开始调试这个问题？

谁能指出我正确的方向？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:23:40.767

您应该在 Magento 中启用开发人员模式以查看打印的实际错误。有不同的方法，最简单的一种是临时编辑`index.php`和更改

```
if (isset($_SERVER['MAGE_IS_DEVELOPER_MODE'])) {
    Mage::setIsDeveloperMode(true);
} 
```

至

```
Mage::setIsDeveloperMode(true); 
```

然后你应该看到打印的实际问题。

# php - MySQL 和 PHP 上的慢查询超过了执行时间

> ID：13451960
> 
> 赞同：-1
> 
> 时间：2012-11-19T10:31:32.900
> 
> 标签：php, mysql

我有 20 个表，我想通过比较数据来获取记录。

这些表有超过 5000 条记录。

现在的问题是数据获取非常慢并且生成一个错误而不是显示数据

> 致命错误：超过 30 秒的最大执行时间

那是在 PHP 中，查询是 "$query1 = "SELECT employees.*,upgradations.EmpID, upgradations.BPZ,picture.PicPath, designation.Designat FROM upgradations,employees,picture,designation
WHERE upgradations.Designationz=designation.Code AND upgradations.UPStatus=1 AND picture.EmpID=employees.EmpID AND upgradations.EmpID=employees.EmpID
AND employees.DEntry='$UCNIC' ORDER BY employees.ID ASC LIMIT $start, $limit ";"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:36:16.453

您必须超过 php.ini 文件中的最大执行时间

```
 ini_set('max_execution_time', 300); //300 seconds = 5 minutes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:44:25.100

在 php.in 文件中

搜索 ini_set

换成这个

```
ini_set('max_execution_time', 1000); //1000 second 
```

# html - 如何制作适用于移动和桌面网络浏览器的应用程序？

> ID：13451963
> 
> 赞同：-1
> 
> 时间：2012-11-19T10:31:44.477
> 
> 标签：html, css, cross-browser, mobile-application

我正在尝试制作一个将托管在服务器上的网络应用程序。它应该能够被所有智能手机上的移动浏览器以及桌面网络浏览器访问。

我对此很陌生。在 Google 上查看这个让我更加困惑，因为我知道我可以用 HTML5、CSS3 和 JavaScript 制作应用程序，并且它们可以像桌面浏览器一样在移动浏览器上访问，但我想知道的是如何处理手机的尺寸和规格。UI 组件在移动环境中应该是用户友好的。

是否有任何 IDE 或 API 使这成为可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:43:37.217

> 但我想知道的是如何照顾手机的尺寸和规格，

您应该为此使用 CSS 媒体查询：

```
@media (max-width:480px) 
{
  // styles for devices with width 480px or less, e.g. iPhone

} 
```

[媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

# c# - C# HttpWebRequest Post 方法表单中的许多参数

> ID：13451964
> 
> 赞同：2
> 
> 时间：2012-11-19T10:32:01.120
> 
> 标签：c#, .net, html, parameters, httpwebrequest

我正在编写一个简单的 C# 程序来执行一些 Web 请求和发布数据。我了解基础知识的工作原理，例如如何使用密码和 html 表单的内容登录。但是我想知道是否有很多输入参数（例如这个问题页面），例如复选框和文本字段，有没有比在字符串中硬编码 20 个参数并传递它更有效的方法？我可以读取 html 文件解析它并扫描输入并使用 String builder 来制作这样的字符串，但我想知道有没有比这样做更有效的方法？

```
 private HtmlAgilityPack.HtmlDocument getpage(string url ,String input)
    {
        try
        {
            Stream datastream;
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
            request.CookieContainer = new CookieContainer();
            request.CookieContainer.Add(cookies);
            request.AllowAutoRedirect = true;
            request.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2";
            request.ContentType = "application/x-www-form-urlencoded";

            if (input!=null)
            {
                String postData = "";
                request.Method = "POST";
                if (input == "login")
                {
                    postData = String.Format("username={0}&password={1}", "myusername", "mypassword");
                }
                else if (input == "sendMessage")
                {
                //THIS IS THE LONG STRING THAT I DON'T WANT TO HARD CODE
                    postData = String.Format("reciever={0}&sendmessage={1}", "thepersontomessage" ,this.DefaultMessage);
                //I am just puting two parameters for now, there should be alot
                }
                byte[] byteArray = Encoding.UTF8.GetBytes(postData);
                request.ContentLength = byteArray.Length;
                datastream = request.GetRequestStream();
                datastream.Write(byteArray, 0, byteArray.Length);
                datastream.Close();
            }

            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            datastream = response.GetResponseStream();
            String sourceCode = "";
            using (StreamReader reader = new StreamReader(datastream))
            {
                sourceCode = reader.ReadToEnd();
            }

            HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();
            htmlDoc.LoadHtml(sourceCode);
            this.cookies.Add(response.Cookies);
            return htmlDoc;
        }
        catch (Exception)
        {
            return null;
        } 
```

还有一种简单的方法可以查看当我在浏览器中单击 html 表单上的按钮时设置的参数值是什么（基本上是发送的 post url 字符串和参数值），因此我可以将这些值硬编码到 Postdatastring 中（复选框、文本等）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T10:38:37.943

就我个人而言，我要做的是将参数构建为 a`Dictionary<string,string>`以便您可以执行以下操作：

```
var parms = new Dictionary<string,string>();

parms.Add("username","fred"); 
```

然后，您可以使用以下方法：

```
string DictToString(Dictionary<string,string> dict)
{
   StringBuilder builder = new StringBuilder();

   foreach(KeyValuePair<string,string> kvp in dict) {
      builder.Append(kvp.Key + "=" + kvp.Value + "&");
   }

   return builder.ToString();
} 
```

然后，您可以使用以下命令获取最终参数字符串：

```
var parms_str = builder.ToString(); 
```

# codeigniter - 如何同时为两种不同的语言使用 codeigniter 表单验证库？

> ID：13451966
> 
> 赞同：0
> 
> 时间：2012-11-19T10:32:14.853
> 
> 标签：codeigniter, codeigniter-2, codeigniter-form-helper

我正在尝试使用 codeigniter 表单验证库同时以两种不同的语言显示两条不同的行，但它会引发错误：

```
$this -> form_validation -> set_message('required', 'Warning %s should not be empty! <br /> Dikkat %s alanı boş bırakılmamalıdır.'); 
```

有没有办法像这样使用该功能而不会遇到该错误：

```
A PHP Error was encountered

Severity: Warning

Message: sprintf(): Too few arguments

Filename: libraries/Form_validation.php

Line Number: 525 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:51:47.807

core/libraries/form_validation.php 中第 525 行的 sprintf() 函数只有两个参数。

```
$message = sprintf($line, $this->_translate_fieldname($row['label'])); 
```

第一个参数必须是具有指定插入点的字符串。以下参数（在 sprintf 函数中）必须与插入点的数量相匹配。而codeigniter只使用一个。

来自 Codeigniter 用户指南：http: [//ellislab.com/codeigniter/user_guide/libraries/form_validation.html](http://ellislab.com/codeigniter/user_guide/libraries/form_validation.html)

`If you include %s in your error string, it will be replaced with the "human" name you used for your field when you set your rules.`

但是，您的问题的解决方案是：

```
$this->form_validation->set_message('required', 'Warning %1$s should not be empty! <br /> Dikkat %1$s alanı boş bırakılmamalıdır.'); 
```

%1$s 表示 sprintf() 中字符串参数之后的第一个参数。在这里的例子中解释得很好：http: [//dk1.php.net/sprintf](http://dk1.php.net/sprintf)

# tomcat - tomcat 6和tomcat 7中的HttpServletRequest.getParameterValues奇怪

> ID：13451967
> 
> 赞同：1
> 
> 时间：2012-11-19T10:32:16.400
> 
> 标签：tomcat, servlets

有没有人在 Tomcat 6 和 Tomcat 7 附带的 servlet-api 中遇到过这种奇怪的情况？

在 Tomcat 6`HttpServletRequest.getParameterValues`中返回参数值的内部数组。在 tomcat 7 中，它返回一个副本。

现在的问题是，如果您的代码将参数值拉出到数组中并修改数组，就像这样

```
String[] params = m_request.getParameterValues(property);
.
.
.
// do some operations that modify params. 
```

内部数组被修改了，所以如果你再次拉出数组，它就会改变！

在 Tomcat 7 中，情况并非如此，您获得了数组的副本，而不是直接访问内部数组。只是想知道是否有人可以证明是这种情况......

# email - 有人可以重新发送数字签名的电子邮件吗

> ID：13451969
> 
> 赞同：0
> 
> 时间：2012-11-19T10:32:27.490
> 
> 标签：email, digital-signature

如果有人收到一份经过数字签名的电子邮件副本，他们有什么办法可以从自己的帐户重新发送，以使其看起来仍然是由原始发件人进行数字签名的。即，如果他们重新发送电子邮件的精确二进制副本，该电子邮件是否会被签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:37:25.133

是的。由于它仍然是由原始发件人进行数字签名的，因此它看起来仍然是由原始发件人签名的。它与物理签名的工作方式相同——我可以取一封由其他人签名的信，然后邮寄给你。这封信似乎仍然是由同一个人签署的。我就是不能篡改信的内容。

如果不是这样，服务器如何将签名的电子邮件发送给您？他们收到的只是数字签名电子邮件的副本。他们并没有自己的帐户可以发送它们。重新发送一个精确的数字副本，当然它似乎仍然是签名的，因为它仍然是签名的，因为数字副本与原件无法区分。

> ...从他们自己的帐户重新发送，以便它看起来仍然由原始发件人进行数字签名...

请注意，正如您所说，由于电子邮件看起来仍然是由原始发件人签名的，而实际上是由原始发件人签名的，因此这里没有漏洞或问题。

# terminal - 如何在一行中使用用户名和密码执行 scp 命令

> ID：13451974
> 
> 赞同：18
> 
> 时间：2012-11-19T10:32:35.097
> 
> 标签：terminal, command, scp

在终端中运行 scp 时，我想将密码放在一行中

`scp user1@xxx.xxx.x.5:sys_config /var/www/dev/`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-19T12:49:51.320

感谢您的反馈让它工作我使用了 sshpass 工具。

`sshpass -p 'password' scp user1@xxx.xxx.x.5:sys_config /var/www/dev/`

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-11-26T15:45:49.830

使用 sshpass 效果最好。要在 scp 中包含您的密码，请使用“”：

```
scp user1:'password'@xxx.xxx.x.5:sys_config /var/www/dev/ 
```

# active-directory - 是否可以将 CRM 从一个 Active Directory 移动到另一个具有不同用户的 Active Directory？

> ID：13451976
> 
> 赞同：0
> 
> 时间：2012-11-19T10:32:44.090
> 
> 标签：active-directory, dynamics-crm-2011

客户有一个虚拟机，其中安装了 CRM 2011 的暂存版本，用于开发目的。到目前为止，它已在客户端使用，因此所有内容都针对客户端自己的 Active Directory 设置进行身份验证。

我现在需要在他们的网络之外使用这个虚拟机，但当然 CRM 不会与 AD 网络分开运行。

如果我在 VM 中安装域控制器、Active Directory 等，有没有办法告诉 CRM 使用本地 AD 进行身份验证，而不是寻找客户端的 AD 服务器？

基本上，我想让这个 VM 成为一个完全独立的 CRM 2011 安装，而不必从头开始重新安装 CRM。那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T11:54:52.467

您可以通过备份 CRM SQL 数据库并将其作为新组织重新导入新环境来实现此目的。在此过程中，您将能够重新映射您的用户。

您应该首先对源环境的 OrganisationName_MSCRM 数据库进行完整的 SQL 备份。然后，您需要将其还原到目标 SQL 服务器，就像任何其他 SQL 还原一样。从那时起，您可以按照[本文](http://technet.microsoft.com/en-us/library/hh127042.aspx)详细介绍重新配置 CRM 部署所涉及的步骤。它还包括用户映射过程的屏幕截图。

* * *

## 编辑：

我没有正确阅读这个问题，@JamesWood 提醒我注意那里的细节，这让我的回答有点不准确。

我认为这是一个简单的问题，“我如何让这个 CRM 数据（库）在新环境中工作”，而实际上这个问题更像是“我如何将 CRM VM 移动到不同的 AD 并让它像前”。

在前一种情况下，我上面的回答仍然有效。

在后一种情况下，我不知道有任何方法可以重新配置 CRM (VM) 服务器或 AD 以在不同的环境中工作。鉴于原始海报准备考虑的步骤（“...在 VM 中安装域控制器、Active Directory 等...”），我认为最好的解决方案是创建一个新的原始 VM，安装 CRM 和根据我回答的第一部分重新导入数据库。

感谢詹姆斯的提醒。

# silverlight - Silverlight 自定义 xmllanguage

> ID：13451978
> 
> 赞同：2
> 
> 时间：2012-11-19T10:32:49.887
> 
> 标签：silverlight, localization

我正在尝试本地化我的 SL 4 应用程序。

为了本地化 SL 控件，我必须使用：

```
this.Language = XmlLanguage.GetLanguage(System.Threading.Thread.CurrentThread.CurrentUICulture.Name); 
```

问题是我使用自定义文化来覆盖小数分隔符和日期格式。

XmlLanguage.GetLanguage 函数基于 IETF 语言标记创建文化。

所以我的问题是：如何将我的自定义参数传递给 XmlLanguage？

多谢

# python - Python 的多种字符串格式化方式——旧的（将要被）弃用了吗？

> ID：13451989
> 
> 赞同：112
> 
> 时间：2012-11-19T10:33:16.900
> 
> 标签：python, printf, string-formatting, deprecated, backwards-compatibility

Python 至少有六种格式化字符串的方法：

```
In [1]: world = "Earth"

# method 1a
In [2]: "Hello, %s" % world
Out[2]: 'Hello, Earth'

# method 1b
In [3]: "Hello, %(planet)s" % {"planet": world}
Out[3]: 'Hello, Earth'

# method 2a
In [4]: "Hello, {0}".format(world)
Out[4]: 'Hello, Earth'

# method 2b
In [5]: "Hello, {planet}".format(planet=world)
Out[5]: 'Hello, Earth'

# method 2c
In [6]: f"Hello, {world}"
Out[6]: 'Hello, Earth'

In [7]: from string import Template

# method 3
In [8]: Template("Hello, $planet").substitute(planet=world)
Out[8]: 'Hello, Earth' 
```

不同方法的简要历史：

*   `printf`- 样式格式从 Python 婴儿期就已经存在
*   该类`Template`是在 Python 2.4 中引入的
*   该`format`方法在 Python 2.6 中引入
*   `f`-strings 是在 Python 3.6 中引入的

我的问题是：

*   -style 格式是否`printf`已弃用或将被弃用？
*   在`Template class`,`substitute`方法是被弃用还是将被弃用？（我不是在谈论`safe_substitute`，据我了解，它提供了独特的功能）

类似的问题以及为什么我认为它们不重复：

*   [Python 字符串格式化：% 与 .format](https://stackoverflow.com/q/5082452/974555) — 只处理方法 1 和 2，并询问哪个更好；我的问题是明确地根据 Python 的禅宗弃用

*   [字符串格式化选项：优点和缺点](https://stackoverflow.com/q/8395925/974555)- 仅处理问题中的方法 1a 和 1b，答案中的方法 1 和 2，也没有关于弃用

*   [高级字符串格式化与模板字符串](https://stackoverflow.com/q/11630106/974555)——主要是关于方法 1 和 3，并且不涉及弃用

*   [字符串格式化表达式 (Python)](https://stackoverflow.com/q/1763184/974555) — 答案提到*计划弃用原始的 '%' 方法*。*但是计划弃用*、*待弃用*和实际*弃用*之间有什么区别？而且`printf`-style 方法甚至不会引发 a `PendingDeprecationWarning`，所以这真的会被弃用吗？这个帖子也很老了，所以信息可能已经过时了。

## 也可以看看

*   [PEP 502：字符串插值 - 扩展讨论](https://www.python.org/dev/peps/pep-0502/)
*   [字符串格式化程序](https://docs.python.org/2/library/string.html#string.Formatter)

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-19T10:57:05.907

新[`.format()`方法](http://docs.python.org/2/library/stdtypes.html#str.format)旨在替换旧的`%`格式化语法。后者已被淡化，（但尚未正式弃用*）*。方法文档说明了很多：

> 这种字符串格式化方法是 Python 3 中的新标准，**应该优先**于新代码中[*字符串格式化操作*](http://docs.python.org/2/library/stdtypes.html#string-formatting)`%`中描述的格式化。[](http://docs.python.org/2/library/stdtypes.html#string-formatting)

 *（强调我的）。

为了保持向后兼容性并使过渡更容易，旧格式暂时*保留*。从最初的[PEP 3101 提案](http://www.python.org/dev/peps/pep-3101/)：

> ### 向后兼容性
> 
> 通过保留现有机制可以保持向后兼容性。新系统不会与现有字符串格式化技术的任何方法名称发生冲突，因此两个系统可以共存，直到需要弃用旧系统。

请注意，*直到要弃用旧系统*；它还没有被弃用，但是每当你编写*新代码*时都会使用新系统。

新系统的一个优点是您可以*结合*旧`%`格式化程序的元组和字典方法：

```
"{greeting}, {0}".format(world, greeting='Hello') 
```

并且可以通过`object.__format__()`用于处理单个值格式的钩子进行扩展。

请注意，旧系统具有`%`和`Template`类，后者允许您创建添加或更改其行为的子类。新型系统具有填补相同细分市场的[`Formatter`类。](http://docs.python.org/2/library/string.html#string.Formatter)

Python 3 进一步远离了弃用，而是在[*`printf`-style 字符串格式*部分](https://docs.python.org/3/library/stdtypes.html#printf-style-string-formatting)给你警告：

> **注意**：此处描述的格式化操作有多种怪癖，会导致一些常见错误（例如无法正确显示元组和字典）。使用较新[的格式化字符串文字](https://docs.python.org/3/reference/lexical_analysis.html#f-strings)或`str.format()`接口有助于避免这些错误。这些替代方案还提供了更强大、更灵活和可扩展的文本格式设置方法。

Python 3.6 还添加了[*格式化字符串文字*](https://docs.python.org/3/reference/lexical_analysis.html#f-strings)，它将表达式内联*到*格式字符串中。这些是使用内插值创建字符串的最快方法，应该在`str.format()`任何可以使用文字的地方使用它们。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-11-19T13:29:46.323

不推荐使用字符串格式的`%`运算符，也不会删除 - 尽管有其他答案。
每次在 Python 开发列表上提出这个话题，都会有激烈的争论，关于哪个更好，但没有关于是否删除经典方式的争论——它会留下来。尽管在 PEP 3101 上有所说明，但 Python 3.1 来来去去，`%`格式仍然存在。

保持经典风格的陈述很明确：简单，快速，做短小的事情很快。使用该`.format`方法并不总是更具可读性 - 几乎没有人 - 即使在核心开发人员中，也可以使用提供的完整语法`.format`而无需查看参考 甚至早在 2009 年，就有这样的消息：[http://mail。 python.org/pipermail/python-dev/2009-October/092529.html](http://mail.python.org/pipermail/python-dev/2009-October/092529.html) - 从那以后，该主题几乎没有出现在列表中。

**2016 年更新**

在当前的 Python 开发版本（将成为 Python 3.6）中，有第三种字符串插值方法，在[PEP-0498](https://www.python.org/dev/peps/pep-0498/)中进行了描述。它定义了一个新的引号前缀`f""`（除了当前`u""`的`b""`和`r""`）。

为字符串添加前缀`f`将在运行时调用字符串对象上的方法，该方法会自动将当前作用域中的变量插入到字符串中：

```
>>> value = 80
>>> f'The value is {value}.'
'The value is 80.' 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-11-19T11:00:00.710

Guido 在这方面的最新立场似乎在这里表明：

[Python 3.0 的新特性](http://docs.python.org/3/whatsnew/3.0.html)

> PEP 3101：字符串格式化的新方法
> 
> 用于内置字符串格式化操作的新系统替换了 % 字符串格式化操作符。（但是，仍然支持 % 运算符；它将在 Python 3.1 中弃用，并在稍后从该语言中删除。）阅读 PEP 3101 以获得完整的独家新闻。

而[PEP3101](http://www.python.org/dev/peps/pep-3101/)本身的最后一次修改可以追溯到（2011 年 9 月 30 日星期五），所以我想最近没有进展。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-04-30T06:30:30.723

查看较旧的 Python 文档和 PEP 3101 有一个声明，即 % 运算符将在未来被弃用并从语言中删除。以下[语句](https://docs.python.org/3.2/tutorial/inputoutput.html#old-string-formatting)位于 Python 3.0、3.1 和 3.2 的 Python 文档中：

> 由于 str.format() 很新，很多 Python 代码仍然使用 % 运算符。但是，由于这种旧式格式最终会从语言中删除，因此通常应该使用 str.format()。

如果您转到 Python 3.3 和 3.4 文档中的[同一部分](https://docs.python.org/3.3/tutorial/inputoutput.html#old-string-formatting)，您将看到该语句已被删除。我在文档中的其他任何地方也找不到任何其他声明，表明该运算符将被弃用或从该语言中删除。还需要注意的是，[PEP3101](http://legacy.python.org/dev/peps/pep-3101/)已经超过两年半（2011 年 9 月 30 日星期五）没有修改过。

**更新**

[PEP461](http://legacy.python.org/dev/peps/pep-0461/)接受向字节和字节数组添加 % 格式，并且应该是 Python 3.5 或 3.6 的一部分。这是 % 操作符还活着并且在踢的另一个迹象。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2019-01-20T14:48:36.100

虽然文档中有各种迹象表明`.format`f-strings 优于`%`字符串，但没有幸存的计划来弃用后者。

在提交[*问题 #14123：明确提到旧样式 % 字符串格式有一些警告，但不会很快消失。*](https://github.com/python/cpython/commit/3bbdc8e822b483fdfb66e0422e94630af10d1b80), 受问题的启发[*指示当前没有弃用 printf-style 格式的计划*](https://bugs.python.org/issue14123)，编辑了有关`%`-formatting 的文档以包含以下短语：

> 由于新的字符串格式化语法更加灵活并且可以自然地处理元组和字典，因此建议用于新代码。但是，**目前没有弃用 printf 样式格式的计划**。

（强调我的。）

这个短语后来在提交[*Close #4966: revamp the sequence docs 中被删除，以便更好地解释现代 Python 的状态*](https://github.com/python/cpython/commit/273069cf7d79293fa0c2cca7fe6ab386a4e5c02a)。这似乎表明弃用`%`格式的计划重新出现在卡片上……但深入研究错误跟踪器会发现其意图恰恰相反。在错误跟踪器上，提交的作者描述了[这样](https://bugs.python.org/issue4966)的变化：

> *   更改了描述 printf 样式格式和 str.format 方法之间关系的散文（故意消除前者存在真正消失的危险的暗示——我们认真考虑将其杀死是不切实际的）

换句话说，我们对`%`-formatting 文档进行了两次连续更改，旨在*明确强调*它*不会*被弃用，更不用说删除了。文档仍然对不同类型的字符串格式的相对优点持意见，但他们也很清楚`%`-formatting 不会被弃用或删除。

更重要的是，2017 年 3 月[对那段的最近一次更改，](https://github.com/python/cpython/pull/856/files)从这个...

> 此处描述的格式化操作表现出各种怪癖，这些怪癖会导致许多常见错误（例如无法正确显示元组和字典）。使用较新的格式化字符串文字或`str.format`接口有助于避免这些错误。这些替代方案还提供了更强大、更灵活和可扩展的文本格式设置方法。

...对此：

> 此处描述的格式化操作表现出各种怪癖，这些怪癖会导致许多常见错误（例如无法正确显示元组和字典）。使用较新的格式化字符串文字、`str.format`接口或模板字符串可能有助于避免这些错误。这些替代方案中的每一个都提供了它们自己的权衡和简单性、灵活性和/或可扩展性的好处。

请注意从“有助于避免”到“可能有助于避免”的变化，以及关于每种风格如何*“提供自己的权衡和好处”*`.format`的蓬松、模棱两可的散文如何取代了对 f-strings的明确推荐。也就是说，不仅正式的弃用不再出现在卡片上，而且当前的文档公开承认格式化至少比其他方法有一些“好处”。*`%`*

 *我从这一切推断出，弃用或删除`%`格式的运动不仅步履蹒跚，而且被彻底和永久地击败。**

# jquery - 如何将 jquery 对话框中的“X”按钮更改为“关闭”

> ID：13451994
> 
> 赞同：5
> 
> 时间：2012-11-19T10:33:40.587
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui-dialog

我在 MVC 剃须刀视图中有一个 jquery 对话框，里面有一个关闭按钮。但是在单击关闭按钮时，对话框只是被**隐藏**并**没有被删除**，因此当单击页面上的任何链接时它不起作用，这是不希望的；不，我每次关闭对话框时都想重定向到我的操作方法。

单击对话框标题上的“X”按钮时，我得到了我想要的。所以我的学长现在希望我完全删除“关闭”按钮并在标题中写“关闭”而不是“X”。我设法通过我的 chrome 浏览器控制台编辑我的对话框，删除了对话框标题使用的**大量 CSS 类。**但我不知道在哪里更改我的项目中的代码（CSS或jquery）以实现这一点！请赐教对话框！

这是我的对话框：

```
$(function () {

        $.ajaxSetup({ cache: false });
        $(".ExportStatus").live("click", function (e) {

            e.preventDefault();
            var height = 350, width = 370;  //height = 350 width = 345; 
            $('<div><span class="well"  style="position: absolute; top: 85px; left: 70px"><img src="' + loaderimagePath + '" alt="Processing your request. Please wait..." /></span></div>')
            .addClass("dialog")
            .attr("id", $(this).attr("data-dialog-id"))
            .appendTo("body")
            .dialog({
                //                    open: function () {
                //                        $(".ui-dialog-titlebar-close").val() = closebutton;
                //                    },
                title: $(this).attr("data-dialog-title"),
                closeOnEscape: true,
                resizable: false,
                //                    close: $(this).attr("data-dialog-titlebar-close"),         
                //                      $("data-dialog-title-close").live("click", 
                //                    function () {
                //                        $(".ui-dialog").hide();
                //                        $(".ui-widget-overlay").hide();
                //                    },                       
                //window.setTimeout('location.reload()', 0);   $(this).remove()
                buttons: {
                    "Close": function () {
                        e.preventDefault();
                        $(".ui-dialog").remove();
                        $(".ui-widget-overlay").remove();
                        // $(" #quickfillDialog").dialog("hide");

                        return false;
                    }

                },![enter image description here][1]
                modal: true,
                position: 'middle',
                width: width,
                height: height
            })

            // $(".ui-dialog-titlebar-close").click( function() {
            // $(this).parent().children().children("a.ui-dialog-titlebar-close").remove();
            .load(this.href, function (response, status, xhr) {
                if (status == "error") {
                    var msg = "Sorry but there was an error: ";
                    $('.dialog').html(msg + xhr.status + "<br/>" + xhr.statusText + "<br/>" + xhr.responseText);
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:38:31.697

您可以将上述 jQuery 代码的对话框部分修改为：

```
.dialog({
    open: function(event, ui) {
        $('.ui-dialog-titlebar-close')
            .removeClass("ui-dialog-titlebar-close")
            .html('<span style="float:right;">Close</span>');
    }
}) 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-17T14:48:12.520

这有效。

创建自定义 CSS。

```
.ui-dialogpopupclose {
      visibility: hidden;
} 
```

使用下面的代码在对话框中添加/删除。

```
open: function (event, ui) {
                $(".ui-dialog-titlebar-close").addClass('ui-dialogpopupclose');
},
close: function (event, ui) {
                $(".ui-dialog-titlebar-close").removeClass('ui-dialogpopupclose');
} 
```

# function - Matlab函数的动态命名

> ID：13451995
> 
> 赞同：0
> 
> 时间：2012-11-19T10:33:41.670
> 
> 标签：function, matlab, variables

我目前有一个 MATLAB 函数，如下所示：

```
function outfile=multi_read(modelfrom,modelto,type)

models=[modelfrom:1:modelto];
num_models=length(models);

model_path='../MODELS/GRADIENT/'

for id=1:num_models
    fn=[model_path num2str(models(id)) '/'];  %Location of file to be read
    outfile=model_read(fn,type);              %model_read is a separate function
end
end 
```

该函数的思想是对`model_read`一系列文件执行另一个函数，并将这些文件输出到工作区（而不是磁盘）。**请注意，model_read 的输出是一个结构！**我希望该函数使用顺序名称将文件保存到工作区，类似于键入：

```
file1=multi_read(1,1,x)
file2=multi_read(2,2,x)
file3=multi_read(3,3,x)
etc. 
```

这将在工作区中给出`file1`,`file2`和`file3`，而是只调用一次命令，例如：

```
multi_read(1,3,x) 
```

这将提供相同的工作区输出。

本质上我的问题是，我如何获得一个函数来输出具有多个名称的变量，而不必多次调用该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:20:35.093

正如评论中所建议的，我会尝试这种更强大的方法，至少恕我直言：

```
 N = tot_num_of_your_files; %whatever it is          

    file = cellfun(@(i)multi_read(i,i,x),mat2cell(1:N,1,ones(1,N)),...
                         'UniformOutput' , false); %(x needs to be defined) 
```

您将通过执行来恢复对象`file{i}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:02:48.380

这是执行您要求的代码：

```
for i = 1:3
   istr=num2str(i)
   line = ['file' istr '= multi_read(' istr ', ' istr ', x)']
   eval(line)
end 
```

或者，这是执行您想要的代码的代码：

```
for i = 1:3
    file{i} = multi_read(i,i,x)
end 
```

# olap - Pentaho Mondrian - Java 程序中的 Olap 钻取

> ID：13451999
> 
> 赞同：0
> 
> 时间：2012-11-19T10:33:53.373
> 
> 标签：olap, olap-cube, mondrian

我使用 Mondrian 3.4 作为我用 Java 编写的应用程序的 Olap 服务器。目前我想在多维数据集中执行一些典型的 Olap 操作，但我找不到任何指导我如何使用 Mondrian 在多维数据集中执行向下钻取操作的指针。我在 Mondrian API 中找不到执行此操作的方法。这可能吗？我该怎么做？

提前Thks。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:11:24.710

有两种方法可以进行向下钻取。您可以获取 MDX 查询的下钻，或特定单元格的下钻。

要在 olap4j 中运行向下钻取查询，您可以：

```
ResultSet rs =
    olapConnection.createStatement().executeQuery(
        "DRILLTHROUGH\n"
        + "SELECT {[Measures].[Unit Sales]} on columns\n"
        + "from [Sales]\n"
        + "where ([Promotions].[One Day Sale],\n"
        + " [Store].[Store City].[Walla Walla],\n"
        + " [Product].[Product Category].[Bread])\n"
        + "RETURN [Customers].[Name], [Gender].[Gender]"); 
```

RETURN 子句是可选的，它指定要返回的字段。要深入了解特定单元格，请运行查询，访问所需的单元格并调用：

```
org.olap4j.Cell.drillthrough() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:25:11.440

我认为您可以检查`MDDataSet_Tabular`内部类`mondrian.xmla.XmlaHandler`，它提供了 API 函数来`MDDataSet`在您执行向下钻取操作时将维度值和名称存储到对象中。我使用的是 Mondrian 3.1，但我认为源代码在 3.4 中应该是相同的。

如果您有其他问题，请告诉我.. 祝你好运