# StackOverflow 问答 13307000-13307999

# sql - 将一个函数返回到同一行中的另一个函数

> ID：13307000
> 
> 赞同：1
> 
> 时间：2012-11-09T11:11:39.890
> 
> 标签：sql, sql-server, function, alias

我需要传递在前一列中选择的函数的返回值，并将其作为参数传递给同一行中的后续函数。我不能使用别名：

我想要的是：

```
SELECT
    dbo.GetSecondID(f.ID) as SecondID,
    dbo.GetThirdID(SecondID) as ThirdID
FROM Foo f 
```

任何解决方法？谢谢！

**编辑：**

该方法`dbo.GetSecondID()`非常繁重，我正在处理表中的几百万条记录。将方法作为参数传递是不明智的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:36:50.807

SQL 的设计方式旨在使所有列都可以并行计算（理论上）。这意味着您*不能*让一列的值取决于计算不同列的结果（在同一`SELECT`子句中）。

为了能够引用该列，您可以引入一个子查询：

```
SELECT SecondID,dbo.GetThirdID(SecondID) as ThirdID
FROM
(
    SELECT
        dbo.GetSecondID(f.ID) as SecondID   
    FROM Foo f
) t 
```

或 CTE：

```
;WITH Results1 AS (
    SELECT
        dbo.GetSecondID(f.ID) as SecondID   
    FROM Foo f
)
SELECT SecondID,dbo.GetThirdID(SecondID) as ThirdID
FROM Results1 
```

如果您要多次建立计算（例如 A 取决于 B，B 取决于 C，C 取决于 D...），那么 CTE 表格通常最终看起来更整洁（IMO）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:04:09.027

答对了！应用`CROSS APPLY`. 以下代码很有帮助

```
SELECT
    sndID.SecondID,
    dbo.GetThirdID(sndID.SecondID) as ThirdID
FROM Foo f
CROSS APPLY
(
    SELECT dbo.GetSecondID(f.ID) as SecondID
) sndID 
```

**编辑：**

这仅在`SecondID`唯一（仅返回一条记录）或`GROUP BY`使用时才有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:19:06.263

你是不是这个意思：

```
SELECT
     dbo.GetThirdID(dbo.GetSecondID(f.ID)) as ThirdID
FROM Foo f 
```

# java - 使用正则表达式从字符串中读取多个变量

> ID：13307001
> 
> 赞同：0
> 
> 时间：2012-11-09T11:11:48.837
> 
> 标签：java, regex, string, io

我正在尝试将字符串拆分为不同的变量。类似的东西`String.format()`。我想要一个特定的*正则表达式*匹配，然后字符串的那部分应该分配给一个特定的变量。可以使用`StringReader`或任何其他类吗？

示例我的字符串`5 13-DEC-2010 16:47 A Tach 220 380` 现在应该分配给如下变量：

1.  `number = 5`
2.  `date = 13-DEC-2010`
3.  `time = 16:47`
4.  `type = A Tach`
5.  `num1 = 220`
6.  `num2 = 380`

其中所有变量都可以是字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:20:04.983

试试这个：

```
var s = '5 13-DEC-2010 16:47 A Tach 220 380';
var re = /(\d+)\s+(\d{1,2}-[A-Z]{3}-\d{4})\s+(\d{2}:\d{2})\s+([\w\s+]*)\s+(\d+)\s+(\d+)/
var m = s.match(re); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:27:34.097

根据我过去的经验，没有任何内置类可以做到这一点。只需手动操作您的数据。就像拆分它（str.split（“\s”）;），然后存储在它们各自的变量中。但问题是“A Tach”的情况。

如果您问我，我将使用不会出现在您的字符串中的正则表达式替换数据分隔符（在您的情况下为空格），例如“;=;” 您的字符串将转换为 "5;=;13-DEC-2010;=;16:47;=;A Tach;=;220;=;380" 然后只需拆分数据并将其解析为各自的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:43:05.730

```
public static void main(String[] args) {
    String s = "5 13-DEC-2010 16:47 A Tach 220 380";
    String re = "(\\d+)\\s+(\\d{1,2}-[A-Z]{3}-\\d{4})\\s+(\\d{2}:\\d{2})\\s+([\\w\\s+]*)\\s+(\\d+)\\s+(\\d+)";
    Pattern p = Pattern.compile(re);
    String number=null,date=null,time=null,type=null,num1=null,num2=null;
    Matcher m = p.matcher(s);
    if (m.matches()) {
        number = m.group(1);
        date = m.group(2);
        time = m.group(3);
        type = m.group(4);
        num1 = m.group(5);
        num2 = m.group(6);
    }
    System.out.println(number);
    System.out.println(date);
    System.out.println(time);
    System.out.println(type);
    System.out.println(num1);
    System.out.println(num2);
} 
```

# extjs3 - Ext js3.4 中的字符验证

> ID：13307009
> 
> 赞同：0
> 
> 时间：2012-11-09T11:12:18.407
> 
> 标签：extjs3

我想检查 Ext js3.4 中文本字段的验证...验证条件是前 5 个字符必须是“ROLE_”...我将如何检查它们...我还尝试通过 getKey 方法获取按键事件的值。 .但我只有ASCII值..我将如何转换它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:20:46.760

您是否在侦听器中尝试过 keydown keyup 事件，在这些事件中，您将使用文本字段的 id 直接获取值......这里有一个示例代码

```
xtype:'textfield'
fieldLabel: 'First Name',
name: 'first',
allowBlank:false,
id:'name',
listeners:
 keyup:function(this,e){
var desiredname= Ext.getCmp('name').value;
if(desiredname.length==5)
{
             //YOUR CODE :)
}

} 
```

希望这可以帮助你...

# regex - 用正则表达式匹配字符串

> ID：13307016
> 
> 赞同：0
> 
> 时间：2012-11-09T11:12:53.603
> 
> 标签：regex, expression

我在创建正则表达式时遇到问题。我有一个这样的字符串（来自网络服务器的简单 json 响应）：

```
{
    "key1":valueInt1,
    "key2":valueInt2,
    [...]
    "specialKey":"",
    "subtitle":"Every kind of character, like char, num or punct",
    "key3":"Useful line",
} 
```

我想要的是删除键“specialKey”及其值和“副标题”及其值。它们都可以为空（例如我的示例中的 specialKey）。

我尝试过这样的事情：

```
(\"subtitle\"\:\")([:punct:]*[:space:]*[:word:]*)*(\",) 
```

没有成功。错误是匹配我的随机句子的部分 ([:punct:] *[:space:]* [:word:] *) 。*

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:35:37.210

JSON[不是正则语言](https://cstheory.stackexchange.com/questions/3987/is-json-a-regular-language)，因此正则表达式不是这种操作的最佳工具。您最好使用 JSON 解析器来实现您的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:31:47.963

字符类通常只在括号表达式中使用。如果你改变你所拥有的：

```
(\"subtitle\"\:\")([[:punct:][:space:][:word:]]*)*(\",) 
```

它应该工作。

# git - 如何使用 kdiff 获取目录 git 分支差异

> ID：13307017
> 
> 赞同：13
> 
> 时间：2012-11-09T11:12:53.900
> 
> 标签：git, diff, difftool, kdiff3

我已经用我的**git配置****了 kDiff3**。

 **我需要的是查看两个分支之间的目录差异。当我跑步时

`git difftool <headbranch>`

命令它一个一个地打开所有文件。但这不是我想要的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-01-21T09:57:35.530

**git-difftool(1)**现在满足这个用例。只需使用 --dir-diff（或 -d）开关：

```
-d
--dir-diff
  Copy the modified files to a temporary location and perform
  a directory diff on them. This mode never prompts before
  launching the diff tool. 
```

例如：

```
git difftool -d --tool=kdiff3 10c25f0da62929cca0b559095a313679e4c9800e..980de1bbe1f42c327ed3c9d70ac2ff0f3c2ed4e1 
```

另请参阅[https://www.kernel.org/pub/software/scm/git/docs/git-difftool.html](https://www.kernel.org/pub/software/scm/git/docs/git-difftool.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T16:27:07.243

我还没有发现使用 kdiff3 和标准 git 工具在目录比较模式下查看两个分支之间的目录差异的可能性。

使用标准工具可以做什么（如果我错了，请纠正我：）是使用 difftool 逐个文件比较，并使用以下命令在控制台中进行概述：

```
git diff --name-status <other-branch> 
```

但是我找到了[Comprehensive Graphical Git Diff Viewer Script](http://www.vflare.org/2009/12/comprehensive-graphical-git-diff-viewer.html)，它为我完成了所需的工作 - 比较 kdiff3 中的整个目录。

该工具只是一个 shell 脚本，它在 /tmp 文件夹中创建要比较的分支快照并在它们上运行 kdiff3 文件夹比较。

[在此处](https://code.google.com/p/compcache/source/browse/sub-projects/scripts/git-diffc)签出脚本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T11:40:16.140

你可以使用

```
git diff --name-status <other-branch> 
```

它列出了具有差异的文件，状态为 A/M/D。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-29T12:22:32.250

比方说，我们有两个分支***master***和***base*** 为了查看这些分支之间的区别，只需执行：

```
git difftool -d base:src/ master:src/ 
```

然后你的预设差异工具应该开始了，在我的例子中是 kdiff3。或者您也可以使用该`--tool`选项来启动另一个：例如使用**vimdiff**

```
git difftool -d --tool=vimdiff  base:src/ master:src/ 
```

或以相同的方式使用**kdiff3**

```
git difftool -d --tool=kdiff3  base:src/ master:src/ 
```**

# ruby - 实现实时更新通知功能

> ID：13307018
> 
> 赞同：0
> 
> 时间：2012-11-09T11:12:58.397
> 
> 标签：ruby

我想为我的应用程序中状态为待处理的项目实现一些视觉指示器，类似于 facebook/google 加上未读通知指示器......我已经编写了一个 API 来获取要显示的计数，但我是每次添加或删除项目时都坚持更新它，我可以想到两种我不满意的方法，

*   第一个是在执行`POST`or`DELETE`操作时进行与计数相关的 API 调用*   第二个在一段时间后刷新页面......

    我认为应该有更好的方法从服务器端执行此操作，有任何建议或任何宝石这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:32:21.667

即使在 gmail 中，它也会根据客户请求进行刷新。服务器计算新项目的数量，客户端发起请求（可能使用 AJAX）。这需要几乎可以忽略不计的数据量和处理时间，因此您可能可以摆脱它。各种缓存 gem 甚至可以存储自上次请求以来没有数据更改的页面刷新部分，这甚至解决了仅在发生更改时才计算的问题。

更新：

您基本上可以通过两种方式解决该问题：服务器端推送和客户端查询。推送是有问题的，由于各种原因，很少在web环境中使用，至少据我所知。大多数页面（如果不是全部）使用定时查询来刷新此类信息。您可以使用正确的工具进行检查，例如 firebug for firefox。您可以看到向服务器发起的单个请求。

当您通过 AJAX 发出请求时，服务器会回复您。通常它会生成一个页面片段来用新的内容替换旧的内容，但是一些缓存机制可以干预，如果没有任何改变，你可能会得到之前存储的缓存片段。请参阅此处的一些[教程](http://railscasts.com/episodes?utf8=%E2%9C%93&search=cache)，对于各种宝石，其中一种可能适合您的需求。

如果您更喜欢完整的解决方案，请查看 Faye（[此处的教程](http://railscasts.com/episodes/260-messaging-with-faye?view=asciicast)）。我没用过，但可能值得一试，看起来很简单。

# c++ - 我的列表类的 C++ Seg 错误，但一切似乎都在检查中

> ID：13307023
> 
> 赞同：0
> 
> 时间：2012-11-09T11:13:16.097
> 
> 标签：c++, error-handling

我正在编写一个有点像 Boggle 的程序，但是我在制作 Pairs 并将它们放入列表中然后将它们从列表中取出时遇到了问题。

```
List.cc
    #include <iostream>
    #include <cassert>
    #include <cstdlib>
    #include "list.h"

    using namespace std;

    List::Node::Node()
    {
     prev = next = NULL;
    }

    List:: List()
    {
     front = new Node()
     rear = new Node()
     front->next = rear;
     rear->prev = front;

     currentIndex=0;
     current = front->next;
     size=0;
    }

    List::~List()
    {
     _setCurrentIndex(0);
     while(current)
      {
       Node *temp = current;
       current = current -> next;
       delete temp;
      }
    //not showing deep copy function b/c it isn't important for this program
    void List::add(const ElementType & item, size_t index)
    {
     assert(0<=index && index <= size);
     _setCurrentIndex(index);
     size++;

     Node *born = new Node;
     born->data = item;
     born->prev = current->prev;
     born->prev->next = current;
     born->prev = born;
     current = born;
    }

    void List::removeAt(size_t index)
    {
     assert(0<=index<=getSize());
     _setCurrentIndex(index);

     Node *old = current;
     current->prev->next = current->next;
     current->next->prev = current->prev;
     delete old;
     size--;
    }

    void List::remove(const ElementType & item)
    {
     for(size_t i=0; i<size; i++)
      {
      _setCurrentIndex(i);
       if(find(item)<getSize())
        {
         Node *tempOld = current;
         current->next->prev = current->prev;
         current->prev->next = current->next;
         current = current->next;

         delete tempOld;
         size--;
        }
      }
    }

    size_t List::find(const ElementType & item) const
    {
     for(size_t i=0; i<size; i++)
      {
       _setCurrentIndex(i)
       if(get(i) == item)
        return i;
      }
     return getSize();
    }

    List::ElementType List::get(size_t index) const
    {
     assert(0 <= index < size);
     _setCurrentIndex(index);
     assert(current->next != NULL);
     return current->data;
    }

    size_t List::getSize() const
    {
     return size;
    }

    void List::output(std::ostream & ostr) const
    {
     for(size_t i=0; i<size; i++) 
      {
      _setCurrentIndex(i);
      ostr << current->data << " ";
      }
     ostr << endl;
    }

    void List:: _setCurrentIndex(size_t index) const
    {
     int x;
     if(currentIndex > index)
      x = currentIndex - index;
     else
      x = index-currentIndex;

     if(index < (sizez_t)x)
      {
      current = front->next;
      curentIndex=0;
      while(currentIndex != index)
       {
       current = current->next;
       currentIndex++;
       }
      }
     else if((size-index) < (size_t)x)
      {
       current = rear;
       currentIndex = size;
       while(currentIndex != index)
        {
         current = current->prev;
         currentIndex--;
        }
      }
     else
      {
       if(currentIndex > index)
        {
        while(currentIndex!=index)
         {
          current = current->prev;
          currentIndex--;
         }
        }
       else
        {
         while(currentIndex!=index)
          {
           current = current->next;
           currentIndex++;
          }
        }
      }
    } 
```

似乎当我尝试从我的列表中添加或删除任何内容时，它会导致我的断言出现问题，并且它会中止或只是分段错误。

如果我把一个简单的声明

```
List history;
Pair p1 = Pair(1,1)
history.add(p1,0) 
```

结果是：

```
scramble: list.cc:154: Pair List::get(size_t) const: assertion 0 <= index <size failed
aborted 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:16:59.940

断言：

```
assert(0 <= index < size); 
```

在不正确。改成：

```
assert(0 <= index && index < size); 
```

# iphone - xcode标签栏可自定义

> ID：13307024
> 
> 赞同：0
> 
> 时间：2012-11-09T11:13:29.550
> 
> 标签：iphone, xcode

我想知道是否有此标签栏自定义的教程或任何提示，当您选择标签栏并按住时，您可以将图标更改为用户喜欢的类型（检查底部）。[标签] [http://tapbots.com/software/tweetbot/](http://tapbots.com/software/tweetbot/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:19:12.460

使用**UIGestures**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

{

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UITabBarController *tabController = [[UITabBarController alloc] init];  

    UIViewController *viewController1 = [[UIViewController alloc] init]; 
   // UIlongtapGusture alloc and add it to  viewController1

    UIViewController *viewController2 = [[UIViewController alloc] init];  
    // UIlongtapGusture alloc and add it to  viewController2

    UIViewController *viewController3 = [[UIViewController alloc] init];    
   // UIlongtapGusture alloc and add it to  viewController3

    UIViewController *viewController4 = [[UIViewController alloc] init];  
     // UIlongtapGusture alloc and add it to  viewController4

    tabController.viewControllers = [NSArray arrayWithObjects:viewController1, 

                                     viewController2, 

                                     viewController3, 

                                     viewController4, nil];

    self.window.rootViewController = tabController;  

    [self.window makeKeyAndVisible];

    return YES;

} 
```

[在此处查看标签栏](http://ios-blog.co.uk/tutorials/how-to-customize-the-tab-bar-using-ios-5-appearance-api/)的自定义

# android - Android ScrollView 导致项目消失

> ID：13307026
> 
> 赞同：0
> 
> 时间：2012-11-09T11:13:36.903
> 
> 标签：android, scrollview, popupwindow

我有以下布局来显示弹出窗口：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ppba_dimmer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/dimming"
        android:orientation="vertical">

        <LinearLayout 
            android:id="@+id/ppba_llPopup"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="100dp"
            android:layout_gravity="center"
            android:orientation="vertical" 
            android:background="@drawable/popup_bg">

            <!-- HEADER: Titol del Popup-->
            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:textColor="#10bcc9"
                android:typeface="sans" 
                android:textSize="15dip"
                android:textStyle="bold"
                android:padding="12dip"
                android:text="@string/ppfa_tvTitolPopup" />

            <!-- Linia-->
            <View 
               android:background="#10bcc9" 
               android:layout_height="2dp"
               android:layout_marginLeft="2dip"
               android:layout_marginRight="2dip" 
               android:layout_width="fill_parent"/>

            <!-- Pais i Ciutat-->
            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="#ffffff"
                android:text="@string/ppfa_tvPaisCiutat" 
                android:layout_marginLeft="5dip"
                android:layout_marginRight="5dip"/>

            <Spinner
                android:id="@+id/ppba_spPaisos"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dip"
                android:layout_marginRight="5dip" />

            <Spinner
                android:id="@+id/ppba_spCiutats"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dip"
                android:layout_marginRight="5dip"/>

            ....
                        (i crop it, just because it's too long)

        </LinearLayout>

    </LinearLayout> 
```

此布局如下所示：

好像我不能发图片，所以我给你链接，[在这里](http://i.stack.imgur.com/P7njC.png)

我意识到在某些设备屏幕中，弹出窗口会被裁剪，因为它太长了。所以我决定添加一个这样的 Scrollview（在第二个 LinearLayout 之后，实际上是弹出窗口）：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ppba_dimmer"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/dimming"
    android:orientation="vertical">

    <LinearLayout 
        android:id="@+id/ppba_llPopup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="100dp"
        android:layout_gravity="center"
        android:orientation="vertical" 
        android:background="@drawable/popup_bg">

        <ScrollView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"  >

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"  >

                <!-- HEADER: Titol del Popup-->
                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:textColor="#10bcc9"
                    android:typeface="sans" 
                    android:textSize="15dip"
                    android:textStyle="bold"
                    android:padding="12dip"
                    android:text="@string/ppfa_tvTitolPopup" />

                <!-- Linia-->
                <View 
                   android:background="#10bcc9" 
                   android:layout_height="2dp"
                   android:layout_marginLeft="2dip"
                   android:layout_marginRight="2dip" 
                   android:layout_width="fill_parent"/>

                <!-- Pais i Ciutat-->
                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:textColor="#ffffff"
                    android:text="@string/ppfa_tvPaisCiutat" 
                    android:layout_marginLeft="5dip"
                    android:layout_marginRight="5dip"/>

                <Spinner
                    android:id="@+id/ppba_spPaisos"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="5dip"
                    android:layout_marginRight="5dip" />

                <Spinner
                    android:id="@+id/ppba_spCiutats"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="5dip"
                    android:layout_marginRight="5dip"/>

                ...

            </LinearLayout>

        </ScrollView>

    </LinearLayout>

</LinearLayout> 
```

布局如下所示：

图片[在这里](http://i.stack.imgur.com/BLpw3.png)

我尝试了不同的“layout_width”，每一个都给了我奇怪的结果。我很确定我做错了什么，但我无法弄清楚是什么。你能指点我一个好的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:14:19.323

也许只是因为之前的线性布局 `<!-- HEADER: Titol del Popup-->`没有属性：

```
 android:orientation="vertical" 
```

# javascript - IE8 的 jQuery.offset() 问题

> ID：13307028
> 
> 赞同：0
> 
> 时间：2012-11-09T11:13:39.180
> 
> 标签：javascript, jquery

我在另一个列表中有一个列表，如下所示：

```
<ul>
    <li class="cat">
        <a href="#">Category 1</a>
        <ul>
            <li>SubCat in another ul</li>
            <li>Subcat2</li>
        </ul>
    </li>
    <li class="cat">etc...</li>
</ul> 
```

我对这个实现有一个错误：

```
$('ul li.cat').live('mouseenter', function() {
    console.log($(this).find('ul').offset().left);
}); 
```

在 Chrome 和 FF 中，我得到类似 760 的东西（这很好），但在 IE 中我得到 0，我不知道为什么。我已经尝试过使用 $.position() 和 JS 原生函数，但这没关系。发生了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:45:18.243

您是否尝试过这种方式：

```
$('ul li.cat').live('mouseenter', function() {
    console.log($('ul',this).offset().left);
}); 
```

这样：

```
$('ul li.cat').on('mouseenter', function() {
    console.log($('ul',this).position().left);
}); 
```

我更喜欢使用 .on 处理程序，因为我听说 .live 在最新版本的 jquery 中已被弃用。

# php - 如何链接方法

> ID：13307033
> 
> 赞同：1
> 
> 时间：2012-11-09T11:13:55.763
> 
> 标签：php

我正在使用[https://github.com/j4mie/idiorm](https://github.com/j4mie/idiorm)并像这样查询数据库：

```
$result = ORM::for_table('users')->join('messages', array('users.uid', '=', 'messages.uid'))->where('mid', '5')->find_many(); 
```

现在我想添加一个条件：

```
$result = ORM::for_table('users')->join('messages', array('users.uid', '=', 'messages.uid'));
if(true) {
  $result->where('mid', '5');
}
$result->find_many(); 
```

但是它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:51:52.530

扩展 air4x 的评论：

这些方法的接口被认为是[“流畅的”或“流畅的”](http://en.wikipedia.org/wiki/Fluent_interface)，因为它们返回自己（因此该`join()`函数返回嵌入了连接的 ORM 对象，而不是说返回`true`or `false`）

```
$result->where('mid, '5'); 
```

..将设置`where`但随后对象被丢弃。

```
$result = $result->where('mid', '5'); 
```

..将保存修改后的对象。

# ruby - 如何在不明确提及的情况下默认要求文件

> ID：13307034
> 
> 赞同：1
> 
> 时间：2012-11-09T11:13:54.843
> 
> 标签：ruby

`String`我在要在其他 ruby​​ 文件中使用的类中定义了一个自定义实例方法。我可以通过`require`-ing 文件（我在其中定义了我的自定义方法）来做到这一点，但我想自然地使用它（不必`require`）。

例如：我在“custom_string.rb”文件中定义了这个：

```
class String
  def set_style(style)
    puts "\n#{self}"
    self.size.times do
    print style
    end
  end
end 
```

然后，要`set_style`在我的“test.rb”文件中使用我的方法，我必须这样做：

```
require 'custom_string'
puts "hello".set_style("*") 
```

我没有使用 Rails 项目。有没有办法将我的文件默认包含在 ruby​​ 中（从 ruby​​ 命令行），以便它可用于 Ruby 中的所有文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T11:25:59.523

如果您不这样做，`require 'custom_string'`但发现它会自动包含在内，那么当您在另一个位置、不同的服务器上运行程序、在 github 上共享代码等时会发生什么。代码将不再按预期执行。您在寻求帮助时发布的结果将不再与其他人匹配。在无法追踪的庄园中改变 Ruby 行为听起来是个坏主意。

如果您只想`irb`拥有这种行为，那么您可以将 require 添加到您的`~/.irbrc`.

将其添加到命令行的@Hauleth 解决方案允许跟踪行为的变化。默认情况下，可以将别名添加到`.bashrc`其他 shell rc 以提供此行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:25:21.383

Ruby 1.9 帮助：

```
$ ruby --help
Usage: ruby [switches] [--] [programfile] [arguments]
  -0[octal]       specify record separator (\0, if no argument)
  -a              autosplit mode with -n or -p (splits $_ into $F)
  -c              check syntax only
  -Cdirectory     cd to directory, before executing your script
  -d              set debugging flags (set $DEBUG to true)
  -e 'command'    one line of script. Several -e's allowed. Omit [programfile]
  -Eex[:in]       specify the default external and internal character encodings
  -Fpattern       split() pattern for autosplit (-a)
  -i[extension]   edit ARGV files in place (make backup if extension supplied)
  -Idirectory     specify $LOAD_PATH directory (may be used more than once)
  -l              enable line ending processing
  -n              assume 'while gets(); ... end' loop around your script
  -p              assume loop like -n but print line also like sed
  -rlibrary       require the library, before executing your script
  -s              enable some switch parsing for switches after script name
  -S              look for the script using PATH environment variable
  -T[level=1]     turn on tainting checks
  -v              print version number, then turn on verbose mode
  -w              turn warnings on for your script
  -W[level=2]     set warning level; 0=silence, 1=medium, 2=verbose
  -x[directory]   strip off text before #!ruby line and perhaps cd to directory
  --copyright     print the copyright
  --version       print the version 
```

看看：

```
-rlibrary       require the library, before executing your script 
```

# java - 仅枚举 jaxb 中的限制默认值

> ID：13307038
> 
> 赞同：1
> 
> 时间：2012-11-09T11:14:06.147
> 
> 标签：java, xml, xsd, jaxb

我在 xsd 中有这样的东西（我无法编辑）：

```
<xsd:simpleType name="Foo">
    <xsd:restriction base="xsd:string">
        <xsd:enumeration value="BAR"/>
    </xsd:restriction>
</xsd:simpleType> 
```

JAXB 在表示元素的类中生成此 java 代码，该元素`Foo`作为子元素：

```
 public Foo getValue() {
        return value;
    }

    public void setValue(Foo value) {
        this.value = value;
    } 
```

但是只有一个可能的值`Foo`，所以我希望在我的 java 代码中看到这样的内容：

```
public Foo getValue() {
    if( value == null )
    {
        return Foo.BAR; //Foo already is defined as enum, so this code is fine
    }
    return value;
} 
```

有没有一些简单的方法可以在 JAXB 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:47:02.087

总而言之，您期望 Foo 的默认值？如果是这样，请尝试在 Foo 类型元素上添加默认值。

有关默认值，请参见[http://www.w3.org/TR/xmlschema-0/#OccurrenceConstraints](http://www.w3.org/TR/xmlschema-0/#OccurrenceConstraints)

# php - 一次使用 PHP 执行多个 MSSQL 查询

> ID：13307040
> 
> 赞同：1
> 
> 时间：2012-11-09T11:14:15.327
> 
> 标签：php, sql-server

我在 PHP 中一次执行大量 ms_sql 查询时遇到问题：

以下是我正在尝试做的简化版本：

```
$updatesql = "UPDATE Pricing SET Price = '".$_POST['price1']."' WHERE PriceID = 1 ";
$updatesql = "UPDATE Pricing SET Price = '".$_POST['price2']."' WHERE PriceID = 2 ";
$updatesql = "UPDATE Pricing SET Price = '".$_POST['price3']."' WHERE PriceID = 3 ";
$updatesql = "UPDATE Pricing SET Price = '".$_POST['price4']."' WHERE PriceID = 4 ";
$updatesql = "UPDATE Pricing SET Price = '".$_POST['price5']."' WHERE PriceID = 5 ";
$updatesql = "UPDATE Pricing SET Price = '".$_POST['price6']."' WHERE PriceID = 6 ";
$updatesql = "UPDATE Pricing SET Price = '".$_POST['price7']."' WHERE PriceID = 7 ";
$updatesql = "UPDATE Pricing SET Price = '".$_POST['price8']."' WHERE PriceID = 8 ";

$executesql = mssql_query($updatesql); 
```

当我一一浏览它们时，它们都可以工作，但是当我尝试一次全部执行它们时，似乎只有**最后一个查询被执行。**

我正在尝试做的事情可能吗？任何指示我哪里出错了？抱歉，对 PHP 来说还很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:18:57.257

那是因为您每次都过度编写查询字符串。尝试以下操作：

```
 $updatesql = '';
    for ($i = 1; $i < 9; $i++) {
        $updatesql .= "UPDATE Pricing SET Price = '".$_POST['price' + $i]."' WHERE PriceID = {$i}; ";
    }
    $executesql = mssql_query($updatesql); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T11:23:50.280

您正在用新查询覆盖您自己的查询，因此最后只有您创建的最后一个查询将仅在该变量中。

因此，您无法执行所有操作，要执行所有操作，您必须选择循环或 ; 用mysql的方法。

即使您可以在查询之前编写 mysql_query ，所以所有查询都将被更新。

```
$updatesql = mssql_query("UPDATE Pricing SET Price = '".$_POST['price1']."' WHERE PriceID = 1 ");
$updatesql = mssql_query"UPDATE Pricing SET Price = '".$_POST['price2']."' WHERE PriceID = 2 ");
$updatesql = mssql_query"UPDATE Pricing SET Price = '".$_POST['price3']."' WHERE PriceID = 3 ");
$updatesql = mssql_query"UPDATE Pricing SET Price = '".$_POST['price4']."' WHERE PriceID = 4 ");
$updatesql = mssql_query"UPDATE Pricing SET Price = '".$_POST['price5']."' WHERE PriceID = 5 ");
$updatesql = mssql_query"UPDATE Pricing SET Price = '".$_POST['price6']."' WHERE PriceID = 6 ");
$updatesql = mssql_query"UPDATE Pricing SET Price = '".$_POST['price7']."' WHERE PriceID = 7 ");
$updatesql = mssql_query"UPDATE Pricing SET Price = '".$_POST['price8']."' WHERE PriceID = 8 "); 
```

// $executesql = mssql_query($updatesql);

有很多方法可以在单个语句中执行查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T11:16:15.743

试试这个

```
$updatesql = "UPDATE Pricing SET Price = '".$_POST['price1']."' WHERE PriceID = 1 ;";
$updatesql.= "UPDATE Pricing SET Price = '".$_POST['price2']."' WHERE PriceID = 2 ;";
$updatesql.= "UPDATE Pricing SET Price = '".$_POST['price3']."' WHERE PriceID = 3 ;";
$updatesql.= "UPDATE Pricing SET Price = '".$_POST['price4']."' WHERE PriceID = 4 ;";
$updatesql.= "UPDATE Pricing SET Price = '".$_POST['price5']."' WHERE PriceID = 5 ;";
$updatesql.= "UPDATE Pricing SET Price = '".$_POST['price6']."' WHERE PriceID = 6 ;";
$updatesql.= "UPDATE Pricing SET Price = '".$_POST['price7']."' WHERE PriceID = 7 ;";
$updatesql.= "UPDATE Pricing SET Price = '".$_POST['price8']."' WHERE PriceID = 8 ;";

$executesql = mssql_query($updatesql); 
```

# wordpress - CSS没有在IE8中加载，当从WP Super Cache中删除缓存时它工作正常

> ID：13307042
> 
> 赞同：0
> 
> 时间：2012-11-09T11:14:19.347
> 
> 标签：wordpress

我有一个 WordPress 网站，可以在每个浏览器中正常工作，但有时 CSS 不会在 IE8 中加载。

我认为这与 WP Super Cache 有关。当我删除缓存并再次打开网站时，它可以完美运行。但过了一段时间 IE8 css 不再加载。

问题是什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:59:35.457

可能是您的主题检查浏览器并根据它决定是否加载 IE8 CSS。换句话说，它动态加载 CSS。

如果是，请更改该行为。该插件缓存静态 HTML 文件，如果该静态文件不是为 IE8 创建的，它将错过 IE8 css。

更改为 W3 Total Cache 不会改变这一点。

# javascript - 更改日期对象

> ID：13307047
> 
> 赞同：1
> 
> 时间：2012-11-09T11:14:42.560
> 
> 标签：javascript, json

我正在尝试从

```
Mon Jul 30 2012 10:57:56 GMT 0100 (GMT Daylight Time) 
```

至

```
30 July 2012 10:57:56 
```

尝试了大多数日期功能，但仍然没有答案/格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:20:45.323

不要发明自行车，为此使用图书馆：http: [//blog.stevenlevithan.com/archives/date-time-format](http://blog.stevenlevithan.com/archives/date-time-format)

# python - Python将嵌套循环转换为简单行

> ID：13307049
> 
> 赞同：1
> 
> 时间：2012-11-09T11:14:44.827
> 
> 标签：python, python-2.7

在 Python 2.7.x 我有两个列表我想要一个返回第一个值（不是索引）的函数，如下所示

```
def first_incorrect_term(polynomial, terms):
    for index in range(len(polynomial), len(terms)):
        if evaluate(polynomial, index) != terms[index-1]:
            return evaluate(polynomial, index) 
```

让我们假设 evaluate 是一个有效的函数。我想将这三行看起来面向对象的内容替换为在 Python 中使用“查找”或某些此类函数的内容。

基本上，我正在遍历第二个列表的索引，而不是多项式中的数字项（因为我相信前 X 项将匹配），对其进行评估并与预期项进行比较。对于条款不匹配的第一个实例，我希望返回评估的多项式。

我正在寻找使用 Python find/lambda 或类似的东西来替换这 3 行，这是因为我绝对可以看到我没有使用[链接中描述的 Python 功能](http://tomayko.com/writings/cleanest-python-find-in-list-function)

PS：这与 Project Euler 问题有些相关，但是我已经使用上面的代码片段解决了它，并希望提高我的“Python”技能:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:34:30.473

首先，使用`yield`生成函数的生成器版本：

```
def incorrect_terms(polynomial, terms):
    for index in range(len(polynomial), len(terms)):
        eval = evaluate(polynomial,index)
        if eval != terms[index-1]:
            yield (polynomial, index, eval) 
```

那么第一个结果就是第一个不匹配：

```
mismatches = incorrect_terms(polynomial, terms)
first_mismatch = mismatches.next() 
```

我认为您实际上想要迭代所有项的值，而不是多项式长度之后的值，在这种情况下您可以压缩：

```
results = (evaluate(polynomial,index) for index in count(0))
pairsToCompare = itertools.izip(results, terms)
mismatches = (pair for pair in pairsToCompare if pair[0] != pair[1])

first_mismatch = mismatches.next() 
```

假设这里`evaluate(polynomial, n)`正在计算给定多项式的第 n 项，并且这些项正在与 中的值进行比较`terms`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:34:17.510

我会使用生成器表达式来做到这一点，但它们也不适合一行：

```
def first_incorrect_term(polynomial, terms):
    evaled = ((index, evaluate(polynomial, index)) for index in range(len(polynomial), len(terms)))
    return next((val for index, val in evaled if val != terms[index-1]), None) 
```

# listview - JQM：如何在合理的时间内呈现 100 个项目的嵌套列表视图

> ID：13307052
> 
> 赞同：1
> 
> 时间：2012-11-09T11:14:48.477
> 
> 标签：listview, jquery-mobile

我需要使用 JQM 显示一个最多包含 100-120 个项目的嵌套列表视图，每个项目平均有 4 个子项目。这是我使用的相关代码（数据来自 getJSON() 调用）：

```
var groups = [];
$.each(data, function(i, group) {
    groups.push("<div data-role='collapsible' data-collapsed='true'><h3 class='group-title'>" + group.group + "</h3>");
    $.each(group.items, function(j, item) {
        groups.push("<li class='news-item'><a href='http://exaple.com'>" + item.des + "</a></li>");
    });
    groups.push("</div>");
});
$('<ul/>', {
    'html': groups.join('\n'),
}).
attr("id", "list").
appendTo("#content");
$("#list").trigger('create'); 
```

在我不那么低端的 Android 手机上，在 wifi 连接上，渲染需要 56 秒！！！

我正在动态渲染它；呈现的页面保存为静态 html 文件（您可以[在此处查看](http://www.resistenze.org/mobile.wip/staticlist.html)）确实会在 22 秒内呈现（这不是一个选项，但是仍然需要很多时间......）。

由于[JQM 已经讨论过弃用嵌套的 listviews](http://jquerymobile.com/blog/2011/06/14/jquery-mobile-update-week-of-june-13/)，我也在考虑放弃它们。

你会建议用哪种方法来替换它们？在刚才提到的讨论中，他们建议“使用我们的标准页面模型可以实现相同的效果[...]”，但我觉得它很笼统：您有更具体的建议/示例吗？

# asp.net-mvc - 从控制器使用 ASP.NET Javascript 包

> ID：13307055
> 
> 赞同：2
> 
> 时间：2012-11-09T11:15:03.103
> 
> 标签：asp.net-mvc, optimization, asp.net-mvc-4, minify, asp.net-optimization

我意识到这打破了 MVC 模式，但在我目前正在构建的应用程序中这样做是有可行的理由的 :)

我想要做的是直接从控制器输出一个 JavaScript 包，而不是通过视图的链接。

因此，例如，我有一个名为“~/jQueryPlugin”的包，我想做的是类似于

`return this.JavaScript(BundleTable.GetBundle("~jQueryPlugin").BundleContent)"`

但是，对于我的一生，我无法弄清楚该`BundleTable.GetBundle("~jQueryPlugin").BundleContent`部分应该是什么才能获得组合最小化捆绑包的字符串表示形式。

任何帮助，将不胜感激·

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:53:48.390

在 1.1-alpha1 版本中，我们添加了一个新的 Optimizer 类，它可以让您更轻松地做到这一点。它旨在成为一个独立的类，可以在 ASP.NET 托管之外使用，因此设置它会略有不同。

您可以通过以下方式获取捆绑内容：

```
 OptimizationSettings config = new OptimizationSettings() {
            ApplicationPath = "<your physical path to the app>",
            BundleSetupMethod = (bundles) => {
                bundles.Add(new ScriptBundle("~/bundles/js").Include("~/scripts/jqueryPlugin.js"));
            }
        };

        BundleResponse response = Optimizer.BuildBundle("~/bundles/js", config);
        Assert.IsNotNull(response);
        Assert.AreEqual("<your bundle js contents>", response.Content);
        Assert.AreEqual(JsMinify.JsContentType, response.ContentType); 
```

下一个版本应该更加充实这个场景，因为它是构建时间捆绑与 Visual Studio 集成所必需的。

# c++ - 奇怪的 cout 排序：MPI_Send 之前的 MPI_Recv？

> ID：13307056
> 
> 赞同：1
> 
> 时间：2012-11-09T11:15:14.187
> 
> 标签：c++, openmpi

我有类似的东西：

```
if (rank == winner) {
    ballPos[0] = rand() % 128;
    ballPos[1] = rand() % 64;
    cout << "new ball pos: " << ballPos[0] << " " << ballPos[1] << endl;
    MPI_Send(&ballPos, 2, MPI_INT, FIELD, NEW_BALL_POS_TAG, MPI_COMM_WORLD);
} else if (rank == FIELD) {
    MPI_Recv(&ballPos, 2, MPI_INT, winner, NEW_BALL_POS_TAG, MPI_COMM_WORLD, MPI_STATUS_IGNORE);
    cout << "2 new ball pos: " << ballPos[0] << " " << ballPos[1] << endl;
} 
```

但我在控制台中看到：

```
new ball pos: 28 59
2 new ball pos: 28 59 
```

为什么`cout`接收后的打印在发送前的打印之前？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:48:27.257

这是两个不同的进程同时进行输出。MPI 实现通常为所有进程执行标准输出重定向，但它通常被缓冲以提高性能并最小化网络利用率。所有进程的输出然后被发送到`mpiexec`（或发送到`mpirun`，或发送到用于启动 MPI 作业的任何其他命令）并组合到其标准输出中。来自不同进程的不同块/行最终在输出中的顺序大多是随机的，因此您不能期望来自某个级别的消息会首先出现，除非使用某种进程同步。

另请注意，MPI 标准不保证所有等级都可以写入标准输出。该标准提供了`MPI_IO`可以查询的预定义属性键，`MPI_COMM_WORLD`以获得允许执行标准输出的进程的等级。现在大多数 MPI 实现对 MPI 作业中的所有进程执行输出重定向，因此返回`MPI_ANY_SOURCE`此类属性查询，但不能保证总是如此。

# mysql - 带有带引号的连字符字符串的布尔模式查询在 MySQL 中的意外行为

> ID：13307059
> 
> 赞同：1
> 
> 时间：2012-11-09T11:15:22.237
> 
> 标签：mysql, hyphen, match-against

我对引用的带连字符的搜索字符串有问题，或者更确切地说是理解问题。

在我的表中有一个表，其中有一列“公司”。
该列中的条目之一是：**AZ Electro**

下面的例子被简化了很多（虽然真正的查询要复杂得多）——但效果还是一样的。

当我进行以下搜索时，我没有得到上述公司的行：

```
SELECT  i.*
FROM my_table i
WHERE MATCH (i.company) AGAINST ('+\"A-Z\" +Electro*' IN BOOLEAN MODE)
GROUP BY i.uid ORDER BY i.company ASC LIMIT 0, 40; 
```

如果我进行以下搜索，请获取上述公司所在的行（注意仅在“AZ”之前将 - 更改为 +：

```
SELECT  i.*
FROM my_table i
WHERE MATCH (i.company) AGAINST ('-\"A-Z\" +Electro*' IN BOOLEAN MODE)
GROUP BY i.uid ORDER BY i.company ASC LIMIT 0, 40; 
```

如果我完全删除运算符，我也会得到该行：

```
SELECT  i.*
FROM my_table i
WHERE MATCH (i.company) AGAINST ('\"A-Z\" +Electro*' IN BOOLEAN MODE)
GROUP BY i.uid ORDER BY i.company ASC LIMIT 0, 40; 
```

谁能向我解释这种行为？因为我希望，当用 + 搜索时，我也应该得到结果......

**编辑**

我刚刚用 myisam_ftdump 检查了表索引。两个字符的词被正确索引，因为有像
14f2e8 0.7908264 ab
3a164 0.8613265 dv 这样的条目

还有一个条目：
de340 0.6801047 az
我想这应该是 AZ 的条目 - 所以搜索应该找到这个条目，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:50:31.140

默认值为`ft_min_word_len`4。有关此信息，请参阅[此链接](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_ft_min_word_len)。简而言之，您的系统不会索引少于 4 个字符的单词。

为什么这很重要？出色地：

*   `A-Z`长度少于 4 个字符
*   ...因此它不在索引中
*   ...但是您的第一个查询`+"A-Z"`表明它必须在索引中才能使匹配成功
*   另外两个（如果它不在索引中则匹配，如果 this 或 that 在索引中则匹配）工作，因为它*不在*索引中。

连字符是一条红鲱鱼 - 原因是因为“AZ”是三个字符长，而您的 FT 索引会忽略它。

# javascript - javascript 文件的数量可以使项目变慢或产生任何影响吗？

> ID：13307060
> 
> 赞同：3
> 
> 时间：2012-11-09T11:15:24.307
> 
> 标签：javascript, html, client-side

我正在开发一个使用 HTML 和 JavaScript 的项目。我在我的项目中使用了许多 JavaScript 文件。我想知道 Web 项目中 JavaScript 文件的数量是否有任何副作用？（在效率或速度方面）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T11:18:25.097

> 我想知道 web 项目中没有 JavaScript 文件有什么影响吗？在效率或速度方面。

如果您的意思是，将所有 JavaScript 嵌入到 HTML 中的内联`script`标签中是否会产生速度成本，那么可能会，也可能不会；这取决于有多少 JavaScript。

这是一个权衡：

*   如果你把所有的 JavaScript 都放在 HTML 文件中，这意味着你必须在每个 HTML 文件中复制它，使每个文件都变大。如果有很多脚本，那么每个 HTML 文件就会变得更重，这意味着当您更改*内容*（而不是代码）时，您会强制用户重新下载所有这些代码。

*   如果您将 JavaScript 放在单独的文件中，则在加载页面时会产生额外的 HTTP 请求，但前提是 JavaScript 文件尚未在缓存中 - 并且您的所有 HTML 文件都小得多。

因此，在大多数情况下，如果您有大量代码，最好使用单独的 JavaScript 文件并正确设置缓存标头，这样浏览器就不需要每次都发送单独的 HTTP 请求。例如，配置您的服务器以告诉浏览器 JavaScript 文件在很长一段时间内都是有效的，因此它甚至不会发出`If-Modified-Since`HTTP 请求。然后，如果您需要更新 JavaScript，请更改文件名并引用 HTML 中的新文件。

这只是缓存控制的*一种*方法，这是一个重要且非平凡的话题。但你明白了。将其分开为您提供了类似的选项，并且初始成本相当低（一个额外的 HTTP 请求将其加载到缓存中）。但是对于非常少量的代码来说，它可能是矫枉过正的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T11:18:38.747

在执行方面，我相信根据您拥有的 JavaScript 文件的数量，应该没有太大差异。但是，大量的 JavaScript 文件在加载页面时需要大量请求，这肯定会影响加载页面所需的时间。

至少有两种方法可以处理这个问题，使用哪种方法取决于手头的情况。

**将所有文件打包成一个：**

对服务器的每个请求都会增加加载页面所需的时间。正因为如此，通常认为将 JavaScript 文件打包并压缩到一个包含所有脚本的文件中是一种很好的做法，因此只需一个请求即可加载所有 JavaScript。

但是，在某些情况下，例如，如果您有大量 JavaScript，则该单个文件可能会变得非常大，即使您只加载单个文件，加载该文件也可能需要一些时间，从而减慢您的页面加载速度。在这种情况下，可能值得考虑选项二。

**根据需要加载模块：**

在其他情况下，例如，如果您的网站有很多 JavaScript，但每个页面上只使用了所有代码的几个模块，则使用条件加载可能会给您带来更好的性能。在这种情况下，您将代码保存在单独的模块中，并将每个模块放在单独的文件中。然后，您可以仅在每个页面上加载您需要的模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:21:57.987

大量的 JavaScript 文件可能会导致您的页面加载速度变慢，但如果所有内容都正确缓存，它们应该不会有任何问题。从缓存请求大量文件的浏览器在渲染之前会慢一些，但我们谈论的是 0.001 秒。

在 Crowders 帖子中，如果您正确缓存，则必须更改文件名并引用它，但如果您在 web 项目中实现了一个很好的缓存机制，则使用查询字符串引用 JavaScript 会更容易，例如：

```
scripts/foo.js?version=1 
```

我们使用软件版本号，因此每个新版本我们都会更改查询字符串，所有客户端都会获得新的脚本文件。

每次发布时，最好将所有 JavaScript 打包在一起，但它对小型项目没有多大用处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T11:18:48.463

这将完全取决于您将包含的 javascript 文件。自然，当包含一个 javascript 文件时，它必须由浏览器加载。这是如何征税取决于文件的大小。一般来说，通过将所有代码组合在一个文件中来最小化脚本文件的单独请求的数量是有利的

# java - Android Jelly Bean 不支持 PullToRefreshListView

> ID：13307062
> 
> 赞同：0
> 
> 时间：2012-11-09T11:15:28.010
> 
> 标签：java, android

我已经在一个应用程序中实现了来自[johan](https://github.com/johannilsson/android-pulltorefresh)的 PullToRefreshListView ，该应用程序在除新的 Jelly Bean 之外的所有其他版本的 Android 上都运行良好。有谁知道这可能是什么原因，或者是否有解决这个问题的方法？我已经在三星 Galaxy S3 的 android 版本 4.1.1 上对此进行了测试。

此外，是否可以在应用程序中设置过滤器，以便它可以识别设备是否运行 android 版本 > 4.0。这可能是一个临时解决方案。

谢谢拉贾特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T09:19:03.850

原来这是果冻豆中的一个实际问题。解决方案在作者的页面中：

您需要在 PullToRefreshListView 类中更改以下几行：

```
@Override
protected void onAttachedToWindow() {
    super.onAttachedToWindow();
    setSelection(1);
} 
```

更多[在这里](https://github.com/johannilsson/android-pulltorefresh/pull/53)

一切顺利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:16:57.440

您提出的临时解决方案在此[博客文章](http://android-developers.blogspot.co.uk/2010/07/how-to-have-your-cupcake-and-eat-it-too.html)中有详细说明，称为延迟加载。

# heroku - 如何使用 sinatra 创建通配符重定向

> ID：13307064
> 
> 赞同：0
> 
> 时间：2012-11-09T11:15:34.680
> 
> 标签：heroku, sinatra

我最近在 Heroku 上升级到新的 cedar 堆栈时遇到了问题。因此，我通过将旧网站转储到由下面的 sinatra 代码驱动的静态公共文件夹中来解决这个问题。

但是，旧 url 的链接不会加载静态页面，因为它们无法将 .html 附加到 url 的末尾。

```
require 'rubygems'
require 'sinatra'

set :public, Proc.new { File.join(root, "public") }

before do
  response.headers['Cache-Control'] = 'public, max-age=100' # 5 mins
end

get '/' do
  File.read('public/index.html')
end 
```

如何将 .html 附加到所有网址的末尾？会是这样的吗：

```
get '/*' do
  redirect ('/*' + '.html')
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:43:08.403

您可以通过`params[:splat]`helper 或从 helper获取匹配的路径`request.path_info`，我倾向于使用第二个：

```
get '/*' do
  path = params[:splat].first # you've only got one match
  path = "/#{path}.html" unless path.end_with? ".html" # notice the slash here!
  # or
  path = request.path_info
  path = "#{path}.html" unless path.end_with? ".html" # this has the slash already
  # then
  redirect path
end 
```

# sql-server - 在 SQL Server 2008-r2 上启用 CLR 集成

> ID：13307065
> 
> 赞同：9
> 
> 时间：2012-11-09T11:15:35.710
> 
> 标签：sql-server, sql-server-2008, configuration, sql-server-2008-r2, sqlclr

寻找启用 CLR 集成我发现了这个文档： http: [//msdn.microsoft.com/en-us/library/ms131048.aspx](http://msdn.microsoft.com/en-us/library/ms131048.aspx)说使用以下代码将“启用crl”变量设置为1。

```
sp_configure 'show advanced options', 1;
GO
RECONFIGURE;
GO
sp_configure 'clr enabled', 1;
GO
RECONFIGURE;
GO 
```

我想知道是否需要重新启动 SQL Server？或者，更一般地说，启用 CRL 集成需要遵循哪些步骤？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T11:36:17.833

如果使用`with override`选项，则不需要重新启动。

```
EXEC sp_CONFIGURE 'show advanced options' , '1';
GO
RECONFIGURE WITH OVERRIDE
GO

EXEC sp_CONFIGURE 'clr enabled' , '1'
GO
RECONFIGURE WITH OVERRIDE
GO 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-30T15:23:24.263

接受的答案不正确。的`WITH OVERRIDE`选项`RECONFIGURE`与是否需要重新启动 SQL Server 完全无关。[RECONFIGURE](https://msdn.microsoft.com/en-us/library/ms176069.aspx)的 MSDN 文档指出`WITH OVERRIDE`：

> 禁用配置值检查（对于无效值或非推荐值）...

事实上，在*启用或禁用*`sp_configure`. 一个简单的测试（在 SQL Server 2008 R2 上运行，但在所有支持 SQLCLR 的版本上都一样）证明了这一点：

```
EXEC sp_configure 'clr enabled'; -- show current value
EXEC sp_configure 'clr enabled', 0; RECONFIGURE;
EXEC sp_configure 'clr enabled'; -- show current value
GO
EXEC sp_configure 'clr enabled'; -- show current value
EXEC sp_configure 'clr enabled', 1; RECONFIGURE;
EXEC sp_configure 'clr enabled'; -- show current value
GO 
```

结果：

注意`run_value`场。它以“1”开头，因为我的系统上已经启用了“CLR 集成”。但它只用 call 切换`RECONFIGURE`。

```
name          minimum   maximum   config_value   run_value
clr enabled   0         1         1              1

clr enabled   0         1         0              0

clr enabled   0         1         0              0

clr enabled   0         1         1              1 
```

此外，应该说明问题中显示的初始代码，声明

```
sp_configure 'show advanced options', 1; 
```

是不必要的，因为`clr enabled`它不是高级选项。

为了证明`clr enabled`不是高级选项，甚至显示另一种方法来证明此选项不需要重新启动，只需执行以下简单查询：

```
SELECT [name], [value], [value_in_use], [is_dynamic], [is_advanced]
FROM   sys.configurations
WHERE  [configuration_id] = 1562;
/*
name           value    value_in_use    is_dynamic    is_advanced
clr enabled    1        1               1             0
*/ 
```

如您在上面显示的结果集中所见，`is_advanced`is`0`表示“不是高级选项（是的，Microsoft 官方文档目前不正确；我有时间会更新它）。另外，`is_dynamic`is`1`表示只需执行即可`RECONFIGURE`启用立即选项，不需要重新启动实例。

**总结一下：**启用“CLR 集成”所需的所有步骤的总和，并且不需要重新启动 SQL Server 服务，如下所示：

```
EXEC sp_configure 'clr enabled', 1;
RECONFIGURE; 
```

就是这样。^(**)

* * *

^(**) WOW64 服务器*需要*重新启动服务器才能使此选项生效。（[clr 启用服务器配置选项](https://msdn.microsoft.com/en-us/library/ms175193.aspx)）

# google-maps - 为什么单击标记时没有得到准确的经度？

> ID：13307066
> 
> 赞同：4
> 
> 时间：2012-11-09T11:15:37.430
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

在我的网络应用程序中，当我单击它时，我试图获取标记的经度和纬度。以下是设置标记的代码，然后当我单击它时尝试获取相同标记的纬度和经度：

```
 var myLatlng = new google.maps.LatLng(55.68322317670628, 13.177157360327598);
  var marker_obj = new google.maps.Marker({
    clickable: true,
    position: myLatlng,
    map: dashboard_map,
    zIndex: i
 });

  marker_obj.setIcon('marker.png');

  google.maps.event.addListener(marker_obj, "click", function(event) {
        var myLatLng = event.latLng;
        var lat1 = myLatLng.lat();
        var lng1 = myLatLng.lng();
        console.log('marker latitude: '+lat1);
        console.log('marker longitude: '+lng1);

        $.ajax({
            type: 'POST',
            url: 'http://localhost:8888/action',
            data: { latitude: lat1, longitude: lng1},
            success: function(result) {
                console.log(result);
            }
        });
    }); 
```

当我点击标记时，我得到正确的纬度，但经度不一样。经度值为 13.177157360327556，原始标记经度值为 13.177157360327598。为什么我没有得到正确的经度？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:03:13.500

要获取标记的位置（不是点击），请使用 marker_obj.getPosition() 而不是 event.latLng。

```
google.maps.event.addListener(marker_obj, "click", function(event) {
    var myLatLng = marker_obj.getPosition();
    var lat1 = myLatLng.lat();
    var lng1 = myLatLng.lng();
    console.log('marker latitude: '+lat1);
    console.log('marker longitude: '+lng1);

    $.ajax({
        type: 'POST',
        url: 'http://localhost:8888/action',
        data: { latitude: lat1, longitude: lng1},
        success: function(result) {
            console.log(result);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:27:36.217

我会称之为错误。

这不是标记或事件的问题，它在您创建 LatLng 对象时已经发生。

尝试这个：

```
var lat=55.68322317670628,
     lng=13.177157360327598,
     myLatLng = new google.maps.LatLng(lat,lng); 
```

你会看到，那`lng`有`myLatLng.lng()`不同的价值观。

**[http://jsfiddle.net/doktormolle/Jm9Ww/](http://jsfiddle.net/doktormolle/Jm9Ww/)**

作为一种解决方法，我建议使用精度为 6-10 位小数的不太准确的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:25:57.643

“错误”发生在 google.maps.LatLng 对象的构造函数中。

```
var latitude = 55.68322317670628;
var longitude = 13.177157360327598;
var myLatlng = new google.maps.LatLng(latitude, longitude);

var longitude_diff = longitude-myLatlng.lng(); 
```

“错误”是：

```
longitude diff: 4.263256414560601e-14 degrees
longitude diff: 2.681678819840079e-9 meters  (2.68 nanometers) 
```

可能与您将使用地图的现实世界中的任何事物无关。

[示例计算](http://www.geocodezip.com/v3_simpleMap_coordinates.html) 经度到米的计算从此[页面](http://www.csgnetwork.com/degreelenllavcalc.html)

# python - 工人死亡后重新开始组中的长时间任务

> ID：13307067
> 
> 赞同：4
> 
> 时间：2012-11-09T11:15:40.433
> 
> 标签：python, celery

我正在使用 Celery 运行数千个任务组，其中每个任务都需要几分钟才能运行。下面的代码是我的简单替换`multiprocessing.pool.Pool.map`：

```
def map(task, data):
    """
    Perform the *task* on *data* in distributed way. Blocks until finished.
    """
    ret = celery_module.group(task.s(val) for val in data).apply_async()
    return ret.get(interval = 0.1) 
```

只要工人从不休息，这就像一种魅力。但有时会发生一个节点死亡，并带走一些正在运行的任务。然后发生的事情是所有其他任务都完成了，工人变得空闲，但`get`永远等待死亡工人的结果。

如何让死任务在超时后重试？这些任务是幂等的，我完全不担心重复执行。我试过`CELERY_ACKS_LATE`在这里和那里玩弄和设置超时，但似乎没有任何东西可以纠正这种情况。我觉得我错过了一些明显的东西，但找不到什么。

编辑：用于代理和结果的传输是 Redis。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:03:25.513

这里的正确行为是设置超时，当超时重试整个`map`任务。

# php - 间接访问 PHP 中对象的受保护成员

> ID：13307075
> 
> 赞同：3
> 
> 时间：2012-11-09T11:16:00.550
> 
> 标签：php

我对 PHP 中的指针有疑问。

在 A 类中，我有：

```
protected $startDate;
public function getStartDate()
{
    return $this->startDate;
}
public function setStartDate($startDate)
{
    $this->startDate = $startDate;
} 
```

我在我的代码中使用它是这样的：

```
$day = new \DateInterval('P1D');
$a->startDate->add($day); 
```

**结果：“无法访问受保护的财产”（如预期的那样）**

* * *

如果我尝试：

```
$day = new \DateInterval('P1D');

print_r($a->getStartDate());

$date = $a->getStartDate();
$date->add($day);

print_r($a->getStartDate());
die(); 
```

结果 ：

```
DateTime Object
(
    [date] => 2012-11-08 00:00:00
    [timezone_type] => 3
    [timezone] => Europe/Paris
)

DateTime Object
(
    [date] => 2012-11-09 00:00:00
    [timezone_type] => 3
    [timezone] => Europe/Paris
) 
```

我在没有设置器的情况下修改了受保护的值

我认为我修改了日期值，因为它是由 getter 方法作为指针返回的。我不明白如何在不使用 setter 方法的情况下修改受保护的值。

你知道为什么吗？

谢谢

编辑：好的，正如我解释的那样，我的 A 类的成员是 DateTime 对象。如果我希望它真正受到保护，也许我必须创建一个“时间戳”成员并返回我的时间戳的新 DateTime（或克隆成员）。

再次感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:20:48.787

对象总是通过*引用*传递。更准确地说，只有一个对象，而一个变量只是保存对该对象的引用。通过将变量值分配给另一个变量，您可以复制该值，但该值只是对该对象的引用。

简而言之：在 PHP 中使用对象时，您总是在传递*对象*，并且对它的所有修改都将对所有可以看到该对象的人可见。

如果你想打破那个引用，[`clone`](http://php.net/clone)对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:23:38.233

试试这个：

```
protected $startDate;
public function getStartDate()
{
    return clone $this->startDate;
}
public function setStartDate($startDate)
{
    $this->startDate = $startDate;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-30T10:26:29.073

与`$date = $a->getStartDate();`您一起创建一个新变量。随着`$date->add($day);`您更改新变量的值，而不是原点。

# javascript - Leaflet 和 Cloudmade：将两个示例合并在一起

> ID：13307076
> 
> 赞同：0
> 
> 时间：2012-11-09T11:16:05.803
> 
> 标签：javascript, api, maps, leaflet, cloudmade

我一直在尝试使用 cloudmade 和小册子，并希望将 cloudmade 中的一段代码用于我的小册子代码中。我的标题中有两个脚本标签，并通过以下方式定义传单地图：

```
var map = L.map('map').setView([lat, -long], 13);

L.tileLayer('http://{s}.tile.cloudmade.com/APIKEY/STYLE/256/{z}/{x}/{y}.png', {
    minZoom:6,
    maxZoom: 18,
    keyboardZoomOffset:2
}).addTo(map); 
```

我想从 Cloudmade 使用的片段是这样的：http: [//developers.cloudmade.com/projects/web-maps-api/examples/custom-map-controls](http://developers.cloudmade.com/projects/web-maps-api/examples/custom-map-controls)

我试图重新构建它并使用它包含 CM 对象/方法的代码来实现。我只需要地图上的 3 个链接，因此当用户单击它们时，它们会将它们带到存储的纬度/经度。如果有人可以指导我，那就太好了。

我不是 Javascript 地图专家，但假设这不是一个大问题，是我对这两个插件的误解。

注意：我在这个例子中取出了我的 API 和样式 ID。注意：我也在leaflet/cloudmade论坛上问过，没有回复，但有很多意见！

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:03:58.727

传单创建者在这里。查看 Leaflet API 参考页面上的代码示例：http: [//leafletjs.com/reference.html#icontrol](http://leafletjs.com/reference.html#icontrol) 希望这会有所帮助。

# android - 使用 surfaceView 进行 PinchZoom 和平移

> ID：13307081
> 
> 赞同：0
> 
> 时间：2012-11-09T11:16:21.573
> 
> 标签：android, surfaceview, pinchzoom

我正在使用 android 3.0 开发 RDP 应用程序。我正在使用表面视图来显示图像。有没有办法为表面视图实现捏缩放功能（我正在尝试缩放图像）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:42:20.813

子类表面视图和实现`onTouchEvent()`。使用 GestureDetector 和 GestureListener 修改表示当前操作状态的矩阵并绘制由该矩阵修改的画布。

它可以工作，但需要一个软件来解决。我花了大约 6 周的时间来正确设置所有内容，特别是如果您想要一些也可以监听触摸事件的叠加项目。我会考虑发布该代码，但它是公司代码......

# sencha-touch-2 - 更改 sencha touch 2 地图中的默认缩放级别

> ID：13307084
> 
> 赞同：0
> 
> 时间：2012-11-09T11:16:33.763
> 
> 标签：sencha-touch-2

如何更改 sencha touch 2 中的默认缩放级别？目前我正在使用这样的代码

```
 var gmaps={
                xtype    : 'panel',
                height    : Math.ceil(Ext.Element.getDocumentHeight()*.25),
                width    : Math.ceil(Ext.Element.getDocumentWidth()*.96),
                layout:'card',
                items:[{
                    xtype: 'map',
                    useCurrentLocation: true,geo: geo, //Ext.util.Geolocation object
                    useCurrentLocation: geo, //same var geo with geolocation object
                    config: {
                        mapOptions:{
                            zoom: 25,
                            disableDefaultUI: true,
                        //--Available Map Options--//

                            panControl: false,
                            zoomControl: false,
                            mapTypeControl: false,
                            scaleControl: false,
                            streetViewControl: false,
                            overviewMapControl: false 
                        }, 
```

但即使我改变缩放值，它也不会改变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:38:07.270

那是因为你把你`mapOptions`的对象放在一个`config`对象中。

只需删除配置对象，您就应该准备就绪：

```
xtype: 'map',
useCurrentLocation: true,geo: geo, //Ext.util.Geolocation object
useCurrentLocation: geo, //same var geo with geolocation object
mapOptions:{
    zoom: 25,
    disableDefaultUI: true,
//--Available Map Options--//

    panControl: false,
    zoomControl: false,
    mapTypeControl: false,
    scaleControl: false,
    streetViewControl: false,
    overviewMapControl: false 
}, 
```

希望这有帮助

# jquery-mobile - Jquery mobile - 延迟自动隐藏地址栏

> ID：13307085
> 
> 赞同：0
> 
> 时间：2012-11-09T11:16:45.783
> 
> 标签：jquery-mobile

我很高兴地使用 JQuery Mobile 开发了一个移动网站，除了主页上隐藏浏览器地址栏的明显延迟（iOS Safari 上大约 5 秒）外，一切都运行良好。

AJAX 转换意味着从那时起它总是被隐藏，但在打开页面上，站点徽标在页面加载后最多隐藏 5 秒，给用户一种非常无品牌和混乱的感觉。

谁能想到延迟的任何原因/加快速度的方法？页面上没有加载大图像，在隐藏地址栏之前在窗口加载事件中发出警报，并且 JQuery Mobile 代码中代码触发的 setTimeout 延迟仅为 20 毫秒左右。

在此先感谢，特德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:46:02.737

我已经看到当内容与 Safari“阅读器”兼容时会发生这种情况（当您在 url 栏上的 url 旁边看到“阅读器”标签时）。我不确定，但如果是这种情况，也许您可​​以尝试使您的内容与阅读器不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:30:09.933

可悲的是，我不得不求助于一个非常老套的解决方案。

我在页面顶部添加了一个 60px 高的虚拟分隔符 div，它将标题向下推，因此它始终可见。然后在 5 秒 setTimeout 调用后被 Javascript 隐藏，这大致相当于我们在 url 栏上得到的延迟被 JQuery mobile 自动隐藏。

这仅在起始页上是必需的，以及我们必须在 rel="external" 链接上加载的其他链接，因为我们犯了将需要回发的 ASP.net 站点与 JQuery mobile 混合的错误，[但这是另一个故事...](http://scottnorberg.blogspot.co.uk/2011/11/mixing-jquery-mobile-and-aspnet.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:58:37.783

我使用 Mobile Boilerplate 的[MBP.hideUrlBarOnLoad()](https://github.com/h5bp/mobile-boilerplate/blob/v4.0.0/doc/js.md#hide-url-bar)并且没有遇到五秒钟的延迟。

> 隐藏网址栏
> 
> MBP.hideUrlBarOnLoad 用于隐藏 iOS 上移动 Safari 顶部的 URL 栏。移动空间有限，这有助于利用屏幕上的每个像素来最大化显示区域。

# android - 在android中解码原始H264流？

> ID：13307086
> 
> 赞同：35
> 
> 时间：2012-11-09T11:16:48.147
> 
> 标签：android, ffmpeg, h.264, rtsp, decoding

我有一个项目，我被要求在 android 中显示视频流，该流是原始 H.264，我正在连接到服务器并将接收来自服务器的字节流。

基本上我想知道有没有办法将原始字节发送到android中的解码器并将其显示在表面上？

我已经成功地使用 android 4.1 中的新 MediaCodec 和 MediaExtractor API 解码包装在 mp4 容器中的 H264，不幸的是我还没有找到使用这些 API 解码原始 H264 文件或流的方法。

我知道一种方法是编译和使用 FFmpeg，但我宁愿使用可以使用硬件加速的内置方法。我也了解 android 支持 RTSP 流，但这不是一个选项。安卓版本不是问题。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-09-05T13:55:23.937

不幸的是，我无法为此提供任何代码，但我会尽力根据我如何让它工作来解释它。

所以这里是我如何使用[MediaCodec](http://developer.android.com/reference/android/media/MediaCodec.html)类获得原始 H.264 编码视频的概述。

使用上面的链接有一个获取解码器设置以及如何使用它的示例，您需要设置它以解码 H264 AVC。

H.264 的格式是它由 NAL 单元组成，每个单元都以三个字节的起始前缀开头，值为 0x00、0x00、0x01，每个单元都有不同的类型，具体取决于这些之后的第 4 个字节的值3 个起始字节。一个 NAL 单元**不是**视频中的一帧，每一帧由多个 NAL 单元组成。

基本上，我编写了一个方法来查找每个单独的单元并将其传递给解码器（一个 NAL 单元作为起始前缀，之后的任何字节直到下一个起始前缀）。

现在，如果您设置了用于解码 H.264 AVC 的解码器，并且有来自解码器的 InputBuffer，那么您就可以开始了。您需要使用 NAL 单元填充此 InputBuffer 并将其传递回解码器并继续为流的长度执行此操作。但是，为了完成这项工作，我必须首先向解码器传递一个 SPS（序列参数集）NAL 单元。该单元在起始前缀（第 4 个字节）之后的字节值为 0x67，在某些设备上，除非首先收到此单元，否则解码器会崩溃。基本上直到你找到这个单元，忽略所有其他 NAL 单元并继续解析流直到你得到这个单元，然后你可以将所有其他单元传递给解码器。

有些设备首先不需要 SPS，有些则需要，但您最好先传递它。

现在，如果您有一个在配置时传递给解码器的表面，那么一旦它为一帧获得足够的 NAL 单元，它应该在表面上显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:48:52.443

您可以从服务器下载原始 H.264，然后通过手机上运行的本地 HTTP 服务器提供它，然后让 VLC for Android 从该 HTTP 服务器进行播放。您应该使用 VLC 的 http/h264:// 方案强制解复用器为原始 H.264（如果您不强制解复用器 VLC 可能无法识别流，即使 HTTP 服务器返回的 MIME 类型是设置正确）。看

[https://github.com/rauljim/tgs-android/blob/integrate_record/src/com/tudelft/triblerdroid/first/VideoPlayerActivity.java#L211](https://github.com/rauljim/tgs-android/blob/integrate_record/src/com/tudelft/triblerdroid/first/VideoPlayerActivity.java#L211)

有关如何创建将启动 VLC 的 Intent 的示例。

注意：原始 H.264 显然没有时间信息，因此 VLC 将尽可能快地播放。首先将其嵌入MPEGTS会更好。还没有找到可以做到这一点的 Android 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-13T18:49:23.743

以下是我在类似项目中发现的有用资源：

1.  [该视频](https://www.youtube.com/watch?v=5mzVaWtxwos)在理解 MediaCodec 如何处理高级别原始 h.264 流方面非常有见地。
2.  [该线程](https://stackoverflow.com/questions/19742047/how-to-use-mediacodec-without-mediaextractor-for-h264)更详细地介绍了具体处理 SPS/PPS NALU。如上所述，您需要使用起始前缀分隔各个 NAL 单元，然后将剩余数据交给 MediaCodec。
3.  [这个 repo](https://github.com/fyhertz/libstreaming) (libstreaming) 是在 Android 中使用 RTSP/RTP 解码 H264 流进行传输的一个很好的例子。

# c++ - std::function 和 std::bind 做动态内存分配吗？

> ID：13307090
> 
> 赞同：13
> 
> 时间：2012-11-09T11:17:00.627
> 
> 标签：c++

如果我这样做：-

```
class Thing  
{
    ...
    void function (const std::string& message);
};

std::list<std::function<void()>> work; 
```

在“事物”的一些成员中

```
work.push_back(std::bind(&Thing::function, this, "Hello")); 
```

对 std::bind 的调用或使用 std::function<> 是否会导致使用 new 或其他方式进行任何动态内存分配？还是在编译时分配了所有存储空间？如果标准没有说什么，那么在 Visual Studio 2012 中怎么样，因为我的程序只需要在那里构建，为了提高效率，我可能需要在我考虑使用这种机制的地方避免动态内存分配。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-09T11:21:27.820

标准没有规定，但总的来说很容易看出`std::function`至少在某些情况下必须分配内存：

```
struct huge { char c[10000]; };
void foo(const huge &);
std::function<void()>{std::bind(foo, huge{})}; 
```

另一方面，至少在某些情况下，它可以通过将其函数对象放置在`function`对象占用空间内的预分配缓冲区中来避免分配；显然有一个权衡，因为这可能会使其他用途占用更多的堆栈内存。一个好的实现将能够在将原始函数指针存储在`function`对象中时避免内存分配，也可能用于 a `mem_fn`，但不太可能为 a 这样做`bind`。

例如，libstdc++ (g++) 内联（函子）对象指针、函数指针和（非虚拟）成员函数指针，以及任何其他适合相同占用空间的东西，例如无状态函子 ( [`union _Nocopy_types`](http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a00297_source.html#l01652))。

如果可以的话，通过反转你的控制流来接受模板化仿函数对象而不是`function`你可以避免任何额外的内存分配：

```
template<typename F>
void my_algorithm(const F &);
my_algorithm(std::bind(foo, huge{})); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-11-18T14:22:07.000

我只是针对 g++ 的情况对此进行了一些研究。

当谈到 std::function 和动态内存分配时，有两个关键点。

1.  std::function 可以存储任意大小的对象，这意味着它在某些情况下*必须执行动态内存分配。*
2.  有某些类型保证 std::function 不会抛出异常。这意味着它*必须*在没有动态内存分配的情况下存储某些类型。

gccs libstd+++ 中 std::function 的实现将在没有动态内存分配的情况下存储其他大小/对齐要求小于或等于它必须存储的东西的大小/对齐要求的东西。

在没有动态内存分配的情况下，它必须存储的最大内容是指向成员函数的指针。在基于“itanium c++ ABI”* 的编译器上，[这是普通指针大小的两倍](http://lazarenko.me/wide-pointers/)。因此，您可以在 g++ 中的 std::function 中存储最多两个大小的指针，而不会触发动态内存分配。

据我所知，std::bind 只是将东西连接在一起形成一个对象，因此将任何东西绑定到成员函数将产生一个大小至少为三个指针的对象。将此对象分配给 std::function 将导致动态内存分配。

更好的选择是使用 lambda。这指的是静态成员函数，为您提供最多捕获两个指针的空间，而不会触发动态内存分配。

为了演示，我根据您的松散地编写了一些测试代码。我摆脱了字符串和列表并使用了 const char * （以避免与 std::string 相关的内存分配）和放置 new （此代码仅用于构建，而不是运行）并将其输入到 Godbolt 中。

```
#include <functional>
using namespace std;

class Thing  
{
    void foo();
    void bar();
    void function (const char * message);
};

char baz[1024];

void Thing::foo() {
    new (baz) std::function<void()>(std::bind(&Thing::function, this, "Hello"));
}

void Thing::bar() {
    const char * s = "Hello";
    new (baz) std::function<void()>([this,s](){function(s);});
} 
```

结果是。

```
Thing::foo():
        mov     r3, #0
        push    {r4, r5, r6, lr}
        ldr     r4, .L34
        mov     r6, r0
        sub     sp, sp, #16
        mov     r0, #16
        str     r3, [r4, #8]
        bl      operator new(unsigned int)
        ldr     r2, .L34+4
        mov     r1, #0
        mov     r3, r0
        str     r2, [sp]
        mov     r2, sp
        ldr     r5, .L34+8
        ldr     lr, .L34+12
        ldr     ip, .L34+16
        str     r1, [sp, #4]
        str     r6, [r0, #12]
        str     r0, [r4]
        str     r5, [r3, #8]
        ldm     r2, {r0, r1}
        str     lr, [r4, #12]
        stm     r3, {r0, r1}
        str     ip, [r4, #8]
        add     sp, sp, #16
        pop     {r4, r5, r6, pc}
        ldr     r3, [r4, #8]
        cmp     r3, #0
        beq     .L27
        ldr     r1, .L34
        mov     r2, #3
        mov     r0, r1
        blx     r3
.L27:
        bl      __cxa_end_cleanup
.L34:
        .word   .LANCHOR1
        .word   Thing::function(char const*)
        .word   .LC0
        .word   std::_Function_handler<void (), std::_Bind<void (Thing::*(Thing*,     char const*))(char const*)> >::_M_invoke(std::_Any_data const&)
        .word   std::_Function_base::_Base_manager<std::_Bind<void (Thing::*(Thing*, char const*))(char const*)> >::_M_manager(std::_Any_data&, std::_Any_data const&, std::_Manager_operation)
Thing::bar():
            ldr     r2, .L38
            sub     sp, sp, #8
            stm     sp, {r0, r2}
            add     r2, sp, #8
            ldr     r3, .L38+4
            ldmdb   r2, {r0, r1}
            ldr     ip, .L38+8
            ldr     r2, .L38+12
            stm     r3, {r0, r1}
            str     ip, [r3, #12]
            str     r2, [r3, #8]
            add     sp, sp, #8
            bx      lr
    .L38:
            .word   .LC0
            .word   .LANCHOR1
            .word   std::_Function_handler<void (), Thing::bar()::{lambda()#1}>::_M_invoke(std::_Any_data const&)
            .word   std::_Function_base::_Base_manager<Thing::bar()::{lambda()#1}>::_M_manager(std::_Any_data&, std::_Function_base::_Base_manager<Thing::bar()::{lambda()#1}> const&, std::_Manager_operation) 
```

我们可以清楚地看到在 bind 情况下有内存分配，但在 lambda 情况下没有。

* 尽管名称被 g++ 和 clang++ 在许多不同的架构中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:12:34.470

我不确定。我想，正如 ecatmur 所建议的，这取决于该平台的 std 的实现。对于类似的问题，我在代码项目中使用这个实现取得了很好的成功。它支持很多平台。非常有据可查，没有动态内存分配。

[http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible)

应避免在游戏或模拟运行时进行通用动态内存分配。问题并不总是碎片化或大瓶颈（这两个都是避免的正当理由），而且时间量通常是不确定的。一个更特定于域的内存分配策略，例如“池”或“框架”在这里将是有利的。

[http://g.oswego.edu/dl/html/malloc.html](http://g.oswego.edu/dl/html/malloc.html)

# iphone - UIWebView 在横向视图的右侧加载一些黑屏

> ID：13307093
> 
> 赞同：1
> 
> 时间：2012-11-09T11:17:12.290
> 
> 标签：iphone, ios, cocoa-touch, uiwebview, uiwebviewdelegate

我正面临这个奇怪的问题，而不是正常行为。我正在从 web 视图中的 url 加载图像。如果我将方向从纵向更改为横向，将横向更改为纵向，则没有问题。但是在纵向如果我进行一些放大、缩小并双击图像以适应屏幕，那么如果我现在更改为横向，我可以看到右侧出现白色/黑色屏幕。

我已经用谷歌搜索过这个问题，我尝试了很多方法，比如不透明属性、清晰颜色等。即使我尝试了自己的方法来解决这个问题，但我失败了。如何解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:19:53.923

我发布这个是因为我也遇到了同样的问题，我也解决了这个问题，我的代码如下。下面是可以解决问题的整个代码。需要正确放入所有代码`ViewControler`

为此，我设置了捏合手势，以便当用户倾斜时`UIwebView`可以检查缩放大小`UIwebView.`

```
 //One This Please import The `UIGestureRecognizerDelegate` Protocol in '.h file' 

     //call below method in ViewDidLoad Method for setting the Pinch gesture 

    - (void)setPinchgesture
    {
     UIPinchGestureRecognizer * pinchgesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(didPinchWebView:)];

    [pinchgesture setDelegate:self];

    [htmlWebView addGestureRecognizer:pinchgesture];
    [pinchgesture release];
   // here htmlWebView is WebView user zoomingIn/Out 

   }

 //Allow The allow simultaneous recognition

    - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer   *)otherGestureRecognizer
   {
     return YES;
   } 
```

返回 YES 保证允许同时识别。不保证返回 NO 会阻止同时识别，因为其他手势的代表可能会返回 YES

```
 -(void)didPinchWebView:(UIPinchGestureRecognizer*)gestsure
   {
   //check if the Scaled Fator is same is normal scaling factor the allow set Flag True.
    if(gestsure.scale<=1.0)
    {
    isPinchOut = TRUE;

    }
    else// otherwise Set false
    {
    isPinchOut = FALSE;
    }
    NSLog(@"Hello Pinch %f",gestsure.scale);
  } 
```

**如果用户在这种情况下捏入/拉出 Web 视图，只需设置 THat Zooming Factor 。这样 WebView 可以随着 Oreintaion 的变化而调整其 ContentSize。**

```
 - (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation   duration:(NSTimeInterval)duration {

   //Allow the Execution of below code when user has Skewed the UIWebView and Adjust the Content Size of UiwebView.

  if(isPinchOut){
  CGFloat ratioAspect = htmlWebView.bounds.size.width/htmlWebView.bounds.size.height;
  switch (toInterfaceOrientation) {
    case UIInterfaceOrientationPortraitUpsideDown:
    case UIInterfaceOrientationPortrait:
        // Going to Portrait mode
        for (UIScrollView *scroll in [htmlWebView subviews]) { //we get the scrollview
            // Make sure it really is a scroll view and reset the zoom scale.
            if ([scroll respondsToSelector:@selector(setZoomScale:)]){
                scroll.minimumZoomScale = scroll.minimumZoomScale/ratioAspect;
                scroll.maximumZoomScale = scroll.maximumZoomScale/ratioAspect;
                [scroll setZoomScale:(scroll.zoomScale/ratioAspect) animated:YES];
            }
        }
        break;

    default:
        // Going to Landscape mode
        for (UIScrollView *scroll in [htmlWebView subviews]) { //we get the scrollview
            // Make sure it really is a scroll view and reset the zoom scale.
            if ([scroll respondsToSelector:@selector(setZoomScale:)]){
                scroll.minimumZoomScale = scroll.minimumZoomScale *ratioAspect;
                scroll.maximumZoomScale = scroll.maximumZoomScale *ratioAspect;
                [scroll setZoomScale:(scroll.zoomScale*ratioAspect) animated:YES];
            }
        }
        break;
     }
     }

     } 
```

这对于即使用户倾斜 UIWebView 也非常有效。

# delphi - Delphi 类过程重载

> ID：13307095
> 
> 赞同：0
> 
> 时间：2012-11-09T11:17:18.437
> 
> 标签：delphi, delphi-xe

考虑这段代码：

```
 TForm3 = class(TForm)
  public
   class procedure GetAConn(var res:String); overload;
   class procedure GetAConn(var res:Integer);overload;
    { Public declarations }
  end;

class procedure TForm3.GetAConn(var res: String);
begin
 showmessage(res);
end;

class procedure TForm3.GetAConn(var res: Integer);
begin
 showmessage(IntToStr(res))
end; 
```

编译没有任何问题。

现在，如果我这样做：

```
procedure TForm3.FormCreate(Sender: TObject);
begin
 TForm3.GetAConn('aaa');
 TForm3.GetAConn(10);
end; 
```

我得到 [DCC 错误] Unit3.pas(64): E2250 没有可以使用这些参数调用的“GetAConn”的重载版本。

我没有发现这在 Delphi XE 中受到限制。

LE：正在以这种方式工作：

```
class procedure TForm3.GetAConn(var res: String);
begin
 res := res + 'modif';
end;

class procedure TForm3.GetAConn(var res: Integer);
begin
 res := res + 100;
end;
procedure TForm3.FormCreate(Sender: TObject);
var s:String;
    i:Integer;
begin
 s:='aaa';
 TForm3.GetAConn(s);
 showmessage(s);
 i:=10;
 TForm3.GetAConn(i);
 showmessage(IntToStr(i))
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T11:21:44.180

您[通过引用](http://en.wikipedia.org/wiki/Call_by_reference#Call_by_reference)传递参数。删除`var`，一切都应该很好：

```
class procedure GetAConn(const res: String); overload;
class procedure GetAConn(res: Integer); overload; 
```

（由于您不修改字符串参数，我建议将其传递为`const`.）

如果您确实需要引用参数，那么您当然不能传递文字或常量。但这与使用无关`overload`。（除了重载会混淆错误消息这一事实。）

# php - Zend 框架 - 致命错误：未找到接口“Zend\Stdlib\DispatchableInterface”

> ID：13307106
> 
> 赞同：0
> 
> 时间：2012-11-09T11:17:47.593
> 
> 标签：php, zend-framework

我是第一次使用 Zend 框架。我收到此错误：

> 致命错误：在第 27 行的 /www/htdocs/w000000/myfolder/mysubfolder/Zend/Http/Client.php 中找不到接口“Zend\Stdlib\DispatchableInterface”

下面的代码来自需要 Zend 框架的[服务器端 Google Analytics](http://code.google.com/p/serversidegoogleanalytics/)：

```
 public function getHttpClient () {
        if(!$this->httpClient instanceof Zend_Http_Client) {
            include_once("Zend/Http/Client.php");
            $this->httpClient = new Zend_Http_Client();
            $this->httpClient->setConfig(array(
                'maxredirects' => 1,
                'timeout'      => 4
            ));
            $this->httpClient->setHeaders('Referer', "http://" . self::$trackingDomain . "/");
            $this->httpClient->setHeaders("User-Agent", "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.7) Gecko/2009021910 Firefox/3.0.7 (.NET CLR 3.5.30729)");
            $this->httpClient->setCookieJar();
        }
        return $this->httpClient;
    } 
```

错误来自哪里？

谢谢你，乌利

# python - 你能从 python 中重新分配 __builtins__ 中恢复过来吗？

> ID：13307110
> 
> 赞同：28
> 
> 时间：2012-11-09T11:17:50.413
> 
> 标签：python, cpython

如果我打开交互模式并输入：

```
__builtins__ = 0 # breaks everything 
```

我完全破坏了会话吗？如果是这样，幕后发生了什么将 __builtins__ 分配给解释器无法处理的内置模块？如果没有，我该如何从中恢复？

只是我自己尝试修复它的一些尝试：

*   任何导入任何内容的尝试都会导致错误“ImportError __import__ not found”
*   除了评估数值表达式之外，我可能用来做任何事情的所有函数都被破坏了
*   还有另一个变量 __package__ 仍然可以访问，但我不知道是否/如何使用它。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-09T11:39:08.953

您通常可以访问您需要的任何内容，即使`__builtins__`已被删除。这只是挖掘足够远的问题。例如：

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> __builtins__ = 0
>>> open
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'open' is not defined
>>> dir
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'dir' is not defined
>>> int
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'int' is not defined
>>> float
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'float' is not defined
>>>
>>> __builtins__ = [t for t in ().__class__.__bases__[0].__subclasses__() if 'warning' in t.__name__][0]()._module.__builtins__
>>>
>>> open
<built-in function open>
>>> int
<type 'int'>
>>> float
<type 'float'>
>>> 
```

要了解这里到底发生了什么，请阅读[Eval 确实很危险](http://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html)，其中使用了类似的技术来证明您无法安全地执行不受信任的 Python 代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T11:30:01.430

基本上弄乱受保护和保留的名称意味着中断您的会话，有时无法从中恢复。

例如，您可以输入 shell：

```
True = False # The chaos begins! 
```

这些在其他编程语言中是不可能的，但是 python 可以让你做你想做的事，即使它会破坏一切。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T11:42:12.827

你是对的; 您实际上可以中断 Python 会话。我怀疑有没有办法完全摧毁它——看到内德的回答对我来说是一个很大的启示。

作为一种非常动态的语言，Python 为您提供了很多可以吊死自己的绳索。但是，不要将其视为缺陷；一个常见的 Python 口号是“我们在这里都是成年人”。如果你理解这门语言并且真的知道你在做什么，那么你基本上可以对 Python 的各个方面进行疯狂的控制。

# php - PHP Excel设置整列数据对齐不起作用

> ID：13307111
> 
> 赞同：18
> 
> 时间：2012-11-09T11:17:52.073
> 
> 标签：php, phpexcel

我正在将此代码用于 E 列数据集以右对齐但它没有显示我的效果

```
$objPHPExcel->getActiveSheet()
    ->getStyle('E')
    ->getAlignment()
    ->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_RIGHT); 
```

如果我写 E6 而不是“E”，那么它会向右显示 E6 单元格数据。

```
$objPHPExcel->getActiveSheet()
    ->getStyle('E6')
    ->getAlignment()
    ->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_RIGHT); 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-09T12:18:32.047

你是对的：PHPExcel 不支持行和列样式。

单元格样式是，但您也可以通过一系列单元格设置样式：

```
$objPHPExcel->getActiveSheet()
    ->getStyle('E1:E256')
    ->getAlignment()
    ->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_RIGHT); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-10-13T08:40:01.650

由于没有人解释如何设置整个列的样式，这是问题的一部分，这里是代码：

```
$lastrow = $objPHPExcel->getActiveSheet()->getHighestRow();

$objPHPExcel->getActiveSheet()
        ->getStyle('E1:E'.$lastrow)
        ->getAlignment()
        ->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_RIGHT); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-09-18T07:28:39.767

试试这个代码。它运作良好。我已经确认。

```
 $activeSheet = $phpExcelObject->getActiveSheet();
    //..
    //...
     $activeSheet->getStyle("E")
                 ->getAlignment()
                 ->setHorizontal(\PHPExcel_Style_Alignment::HORIZONTAL_RIGHT); 
```

此代码将 E 列水平向右对齐

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T00:51:25.093

我在尝试将某些数字格式应用于列时也确认了这一点：您不能将样式应用于列 - *getStyle('E')*，您必须指定范围 - *getStyle('E1:E50')*。

```
$objPHPExcel->getActiveSheet()->fromArray($row_array, NULL, 'A2');
$rows = count($row_array);
$objPHPExcel->getActiveSheet()->getStyle('C2:C'.$rows)->getNumberFormat()->setFormatCode('000000000'); 
```

此代码将用零填充 C 列中的数字

# visual-studio-2010 - .wsp 文件的 manifest.xml 中出现的解决方案 ID 是什么

> ID：13307115
> 
> 赞同：0
> 
> 时间：2012-11-09T11:18:09.993
> 
> 标签：visual-studio-2010, sharepoint-2010, manifest, wsp

解决方案 ID 有什么用？

例如

```
<Solution xmlns="http://schemas.microsoft.com/sharepoint/" SolutionId="12345678-c983-4553-1234-74c609831d33" SharePointProductVersion="14.0"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:18:49.773

SharePoint 中的大多数内容都由 GUID 跟踪/识别。解决方案包也不例外。对于大多数开发人员来说，这可能影响不大。

在某些情况下它可以发挥作用。一个示例是当您尝试更新具有相同名称但不同 ID 的解决方案包时。SharePoint 将阻止您执行此操作，因为它（合理地）认为包不同，因此不应更新。

我遇到了上述情况，其中多个开发人员（甚至一个具有不同开发环境的开发人员）使用 WSPBuilder 等工具构建解决方案，并且他们在源代码管理中共享的源代码中没有包含带有解决方案 ID 的文件. 结果是不同的环境可能会构建实际上是相同的包，因为源是共享的，但分配了不同的解决方案 ID。

*对于一个简单的问题，这似乎是一个很长的回答。* :P

# android - Android从任何提供相应id的游标中获取任何列的值

> ID：13307116
> 
> 赞同：1
> 
> 时间：2012-11-09T11:18:12.560
> 
> 标签：android, database, sqlite, cursor

我`Cursor`从任何数据库表创建。它由_id 的值和相应的名称组成。为了进一步操作，我需要任何特定“_id”的“名称”值。如何使用光标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:40:46.107

```
String selecttSqlStr2 = "SELECT * FROM Tablename  WHERE TRIM(QST_Id) = '" + _id;

Cursor c = datasource.execSelectSQL(selecttSqlStr);//datasource is object for opening database
c.moveToFirst();
String name=c.getString(c.getColumnIndex("name")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T14:00:38.593

非常简单，您可以通过以下任一方式获得它

字符串 id = cursor.getString( cursor.getColumnIndex("id") ); // id 是 db 中的列名

或者

字符串 id = cursor.getString(cursor.getColumnIndex(0)); // id 是 db 中的第一列

# python - Django 投票：按投票排序

> ID：13307120
> 
> 赞同：0
> 
> 时间：2012-11-09T11:18:29.277
> 
> 标签：python, html, django

已经有很多关于此的文档，但无法让其中任何一个为我工作。就像标题暗示的那样，试图获取一组使用 Django Voting 的对象，根据他们的投票数（从高到低）进行排序。已经尝试过[这个](https://stackoverflow.com/questions/476017/django-queryset-order-by-method)和其他一些，但没有任何成果。

使用 Django 投票，这里是 URL Conf & HTML

```
#urls.py
url(r'^$', 'questions'),
url(r'^(?P<object_id>\d+)/(?P<direction>up|down|clear)/vote/$', 
        vote_on_object, dict(model = Question, template_object_name = 'question',
        template_name = 'qanda/confirm_vote.html', post_vote_redirect = '/home/', allow_xmlhttprequest=True)), 
```

URLconf 中的问题会导致呈现 questions.html 的问题视图

```
#questions.html
{% load voting_tags %}
    {% votes_by_user user on the_question as vote_dict %}
    {% scores_for_objects the_question as score_dict %}
        <div class="question">
            {% if the_question %}
        <ul>
            {% for question in the_question %}
               {% dict_entry_for_item question from vote_dict as vote %}
                {% dict_entry_for_item question from score_dict as score %}
           <div class="votearrowdiv">
           <div class="upvotearrow"></div></a>
            <form class="linkvote" id="linkup{{ question.id }}" action="/home/{{ question.id }}/{% if vote and vote.is_upvote %}clear{% else %}up{% endif %}/vote/" method="POST">
                {% csrf_token %}
                <input type="image" id="linkuparrow{{ question.id }}" src="{{ media_url }}img/aup{% if vote and vote.is_upvote %}mod{% else %}grey{% endif %}.png">
            </form>

            <div class="downvotearrow"></div></a>
            <form class="linkvote" id="linkdown{{ question.id  }}" action="/home/{{ question.id }}/{% if vote and vote.is_downvote %}clear{% else %}down{% endif %}/vote/" method="POST">
                {% csrf_token %}
                <input type="image" id="linkdownarrow{{ question.id  }}" src="{{ media_url }}img/adown{% if vote and vote.is_downvote %}mod{% else %}grey{% endif %}.png">
            </form>
            </div>
            <li>
                <div class="votecounter"><div class="numbercount">
                   <span class="score" id="linkscore{{ question_id }}"
                    title="after {{ score.num_votes|default:0 }} vote{{ score.num_votes|default:0|pluralize }}">
                    {{ score.score|default:0 }}
                   </span>
                </div></div>
                <a href="/home/{{ movie.id }}/{{ question.id }}/">{{ question.question_text }}</a>
        {% endfor %}
{% endif %} 
```

这是我目前的看法：

```
#views.py
def questions(request, movie_id):
    p = Movie.objects.get(pk=movie_id)
    k = Question.objects.filter(movie=p).order_by('q_pub_date')
    l = k.reverse()
    return render_to_response('qanda/questions.html', {'movie':p, 'the_question':l}, context_instance = RequestContext(request)) 
```

我知道我不能使用“分数”进行排序，因为它不在模型中。我需要更改哪些视图才能正确排序？

编辑：

罗伯特，这里是 models.py。尝试了您的解决方案和许多变体，但我没有该模型的投票属性。看一看：

```
#models.py
class Question(models.Model):
    movie           = models.ForeignKey(Movie, blank=True, null=True)
    question_text   = models.CharField(verbose_name = "Question", max_length = 250)
    question_detail = models.CharField(verbose_name = "Details (Optional)", max_length = 5000, blank = True, null = True)
    q_pub_date      = models.DateTimeField(auto_now_add = True)
    q_author        = models.ForeignKey(User) 
```

有什么见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:46:54.193

如果您发布您的 ，那会很方便`model.py`，但我会做一些猜测。

首先，这可能会有所帮助：

```
#views.py
def questions(request, movie_id):
    p = Movie.objects.get(pk=movie_id)
    k = Question.objects.filter(movie=p).order_by('-q_pub_date')
    ... 
```

（不需要使用reverse，可以以 开头`-`）

我猜你的分数可以排序如下：

```
 k = Question.objects.filter(movie=p).order_by('movie__score', '-q_pub_date') 
```

（`__`双下划线）将引用相关模型的属性。

众所周知，我生死攸关：[https ://docs.djangoproject.com/en/dev/topics/db/queries/#related-objects](https://docs.djangoproject.com/en/dev/topics/db/queries/#related-objects)

# ios - 如何知道我的 UITableView 中没有选择任何行？

> ID：13307132
> 
> 赞同：0
> 
> 时间：2012-11-09T11:19:02.913
> 
> 标签：ios, ipad, uitableview, selection, uisplitviewcontroller

I use a `UITableView`to display a list of items, and when a row is selected I show that item in a detail view next to it (using a split view controller).

随着表视图中的选择发生变化，我希望我的详细视图也发生变化，这当然是标准行为，并且它可以完美地工作......除非在表视图中不再选择任何行。

例如，用户可以从表视图中删除一行，并且在删除期间和删除之后，表视图中将没有选定的行。当然删除一行后我让我的细节视图控制器知道，但是在表格视图的编辑过程中，当没有选择行时，我的细节视图控制器不知道这一点。

我尝试使用，`UITableViewSelectionDidChangeNotification`但只有在用户选择不同的行时才会发送，而不是在取消选择时发送。

如何通知我表格视图从选择行切换到完全没有选择的事实？

编辑：

作为临时解决方案，我尝试将“编辑”按钮重命名为“重新排序”，并且只允许将行从 A 移动到 B，但不允许删除控件，但这无法做到，如果不启用对行的编辑，则没有移动控件. 问题是，我确实得到了一个指向要移动的行的指针，所以我可以保持选中状态。我没有得到这个指针来删除一行，所以不适合我。我总是想知道用户在哪一行工作，并始终选择该行。

我可能不得不放弃标准的编辑行为并为其添加自己的按钮和方法。或者看看我可以用什么手势来捕捉任何一行的触摸......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:52:27.413

有一个属性`indexPathForSelectedRow`。我不确定当没有选定的行时它会返回什么，但它可能会返回 nil 或类似的东西，您可以将其用作触发器来了解是否选择了任何行。就像是

```
if (myTable.indexPathForSelectedRow == nil)
{
  //do something here to account for no rows being selected
}
else
{
  //do stuff here to set up your detail view
} 
```

让我知道这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:28:26.693

你如何实现行的删除？您是否正在实施以下数据源方法？

> tableView:commitEditingStyle:forRowAtIndexPath:

你可以有一个像

> NSIndexPath *selectedIndexPath

并在删除一行时将其设置为 nil。

例子：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
   //select another row in your table
   [tableView selectRowAtIndexPath:*indexPathOfTheRowToBeSelected* animated:YES scrollPosition:UITableViewScrollPositionNone];
   //then delete row from data source
} 
```

当用户触摸他/她选择删除的表上的删除按钮时，将调用上述方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T05:24:05.063

我也为此苦苦挣扎。事实证明，当点击“编辑”按钮时，此时所有行都被取消选择。您可以覆盖 setEditing:animated: 以检测它何时被击中，但您必须在返回之前调用 [super setEditing:editing animated:animated]。

请参阅此链接了解我在哪里找到的：

[如何识别 self.editButtonItem 按钮的单击事件？](https://stackoverflow.com/questions/7334126/how-can-i-identify-self-editbuttonitem-buttons-clicked-event)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T14:38:14.077

好吧，我误读了您最初的要求，我很确定您想要的是 `– tableView:willDeselectRowAtIndexPath:`or `– tableView:didDeselectRowAtIndexPath:`。当用户取消选择一行时（分别在取消选择该行之前或之后），这些方法将自动触发。在您的表格视图委托代码中实现其中一个，您将知道何时取消选择一行，并且您可以将您的代码放入其中一个方法中选择下一行或您想要的任何内容。

# c++ - 如何从 LLVM 中的终止符指令中删除后继指令

> ID：13307142
> 
> 赞同：4
> 
> 时间：2012-11-09T11:19:38.700
> 
> 标签：c++, c, compiler-construction, llvm

对于基本块，我想将条件跳转更改为无条件跳转。因此，如果一个基本块有两个后继者，我想删除其中一个后继者的边缘。我希望基本块直接跳转到后继者之一。我怎样才能做到这一点？

为了说明我的观点，我想改变

```
 A
    /  \
   /    \
  B      C 
```

到

```
 A
      \
       \
        C 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:29:18.120

我认为最简单的方法就是创建一个新的无条件分支指令，然后用它替换旧的。所以，像：

```
#include "llvm/Transforms/Utils/BasicBlockUtils.h"

BranchInst* Old = ...
BranchInst* New = BranchInst::Create(Old->getSuccessor(X));
ReplaceInstWithInst(Old, New); 
```

0 或 1在哪里`X`，取决于您想要“真”分支还是“假”分支。

# c# - Outlook 2010 嵌入式附件的上下文菜单 - idMso？

> ID：13307143
> 
> 赞同：1
> 
> 时间：2012-11-09T11:19:39.580
> 
> 标签：c#, outlook, vsto, outlook-addin, ribbonx

我正在开发 Otlook 2010 插件，目前正在自定义功能区 UI。到目前为止一切顺利，但我在为邮件中的嵌入对象自定义上下文菜单时遇到了一个问题。我尝试了许多**idMso**上下文菜单，但它们都不起作用。

有没有人有经验**哪个 idMso 是下面显示的上下文菜单**或**如何在那里添加新按钮**？

![在此处输入图像描述](../Images/09699b803b72fe9d00c9f4c8f63d4d91.png)

我的 custom-ribbon.xml 示例：

```
<?xml version="1.0" encoding="utf-8"?>
<customUI onLoad="OnRibbonLoad" xmlns="http://schemas.microsoft.com/office/2009/07/customui">
  <contextMenus>
    <contextMenu idMso="ContextMenuText">
      <button id="MyContextMenuText"
              imageMso="HappyFace"
              label="ContextMenuAttachments"
              onAction="OnMyButtonClick" />
    </contextMenu>
  </contextMenus>
</customUI> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:20:01.363

你的 xml 看起来不错。但是根据您单击的内容，会显示不同的上下文菜单。

这`ContextMenuText`是在编写或编辑电子邮件时右键单击时显示的上下文菜单。

`ContextMenuPicture`是右键单击图片的上下文菜单。

等等..

[Office 2010 的 ContextMenus 加载项](http://archive.msdn.microsoft.com/contextmenusaddin)使用此加载项可帮助确定上下文菜单名称。安装后，上下文菜单名称出现在菜单底部。

还要确保在 ThisAddIn.cs 文件中，您已覆盖以下方法

```
protected override Office.IRibbonExtensibility CreateRibbonExtensibilityObject()
{
    return new Ribbon1();
} 
```

# javascript - 从 Google +1 按钮共享时指定图像

> ID：13307146
> 
> 赞同：7
> 
> 时间：2012-11-09T11:19:55.623
> 
> 标签：javascript, jquery, google-plus, google-plus-one

在这个链接中，我学会了为 Google +1 按钮指定一个 URL。

[将自定义 url 指定为 gplus one button](https://stackoverflow.com/questions/13297837/specify-custom-url-to-gplus-one-button)。

我还可以指定特定图像吗？

**已编辑**

我不需要更改 Google plus 按钮 gif 或 Google plus 按钮的背景。我需要指定用户想要在社交网络中分享的图像。

有可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T17:27:04.903

是的，这是可能的。

您的意思是您要指定一个图像，该图像将显示在通过在 Google+ 上共享生成的片段中。+1 按钮有两件事情：1) 它在点击时为计数添加 +1，以及 2) 可选地，它允许用户将您的 URL 分享到 Google+ 并对其发表评论。

您要问的是该交互的第二部分，并记录在[https://developers.google.com/+/plugins/snippet/](https://developers.google.com/+/plugins/snippet/)

该页面有一个工具可以帮助您生成需要插入页面的 HTML。您还可以从指定片段信息的三种不同方法中进行选择。

使用 schema.org 标记的示例：

```
<!-- Update your html tag to include the itemscope and itemtype attributes. -->
<html itemscope itemtype="http://schema.org/Article">

<!-- Add the following three tags inside head. -->
<meta itemprop="name" content="My Cool Article">
<meta itemprop="description" content="This is the greatest site ever">
<meta itemprop="image" content="http://example.com/mycoolimage.png"> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-09T11:35:13.000

## 要通过“共享”按钮指定要共享的自定义图像：

~~不幸的是，这是不可能的。您只能自定义 URL 和语言；[请参阅文档](https://developers.google.com/+/plugins/share/#sharelink-endpoint)。~~

**编辑：**这实际上是可能的，请参阅[BrettJ 的回答](https://stackoverflow.com/a/13312956/1419007)。

## 要为“+1”按钮使用自定义图像：

因为 Google 希望 +1 按钮看起来一致，所以使用官方的 Google +1 JavaScript 是不可能的。但是，通过[这样的技巧，](http://dannyscodesnippets.blogspot.com/2011/08/tutorial-how-to-apply-custom-google.html)可以自定义图像。

诀窍在于将 CSS 不透明度设置为`0`，如下所示：

```
.myCustomButton *{
    /*Hide real +1 button*/
    opacity:0;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";  
    filter:alpha(opacity=0);
}

.myCustomButton{
  display:inline-block;

  /*The width and height of your image. Not bigger than the Like button!*/
  width: 10px;
  height: 10px;

  /*Your image*/
  background:url(gplus.png);
} 
```

# asp.net-mvc-3 - @Html.ActionLink 不重定向

> ID：13307151
> 
> 赞同：0
> 
> 时间：2012-11-09T11:20:13.213
> 
> 标签：asp.net-mvc-3

我目前正在做一个简单的登录应用程序，它还允许用户更改密码。但是，我`@Html.ActionLink`没有重定向到更改密码页面，我认为这是因为我在 web.config 中的设置。我如何解决它？

这是我的代码。

**Index.chtml（登录页面）**

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript">   </script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<h2>@ViewBag.Title</h2>

@using(Html.BeginForm())
{
    @Html.LabelFor(login => login.Username) 
    @Html.TextBoxFor(login => login.Username)<br/>
    @Html.LabelFor(login => login.Password) 
    @Html.PasswordFor(login => login.Password)<br/>
    <input type="submit" value="Login" />
    @Html.ActionLink("Change Password", "Index", "ChangePW")
    @Html.ValidationSummary()
}
@ViewBag.Error 
```

**网页配置**

```
 <location>
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location>

  <location path="Content">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location>

  <location path="Scripts">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

单击后生成的 HTML 代码`Change Password`：

```
<div>
  <h2>BlueBerry Login</h2>

  <script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
  <script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script>
  <script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript">    </script>
  <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
  <h2></h2>

  <form action="/Login?ReturnUrl=%2fChangePW" method="post">
    <label for="Username">User name: </label>
    <input data-val="true" data-val-required="The User name:  field is required."   id="Username" name="Username" type="text" value="" />
    <br/>
    <label for="Password">Password: </label>
    <input data-val="true" data-val-required="The Password:  field is required." id="Password" name="Password" type="password" />
    <br/>
    <input type="submit" value="Login" />
    <a href="/ChangePW">Change Password</a>
    <div class="validation-summary-valid" data-valmsg-summary="true">
    <ul>
      <li style="display:none"></li>
    </ul>
    </div>
  </form>
</div> 
```

**更新**`@Html.ActionLink`当我进入应用程序时 我尝试使用它并且它有效。真的很奇怪……

**更新 2**

这是登录控制器的代码

```
public class LoginController : Controller
{
    //
    // GET: /Login/
    #region Declarations

    MembershipHelper _mem = new MembershipHelper();
    #endregion

    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Index(MasterUser user)
    {
        if (ModelState.IsValid)
        {
            if (_mem.ValidateUser(user.Username, user.Password)) //successful
            {
                FormsAuthentication.SetAuthCookie(user.Username, false);
                user = _mem.LoggedUser;
                Session["loggedUser"] = user;
                return RedirectToAction("Index", "Home");

            }
            ModelState.AddModelError("",_mem.Status);
        }
        else
        {
            ModelState.AddModelError("", "User does not exist");
        }
        return View();
    }        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:20:29.950

错误答案，见下文

在你的 web.config 中，这个：

```
<location>
  <system.web>
    <authorization>
      <deny users="?"/>
    </authorization>
  </system.web>
</location> 
```

使您的应用程序/站点中的所有 URL 只能由登录用户访问。添加这个

```
<location path="ChangePW">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
</location> 
```

使您的“更改密码”页面不受先前规则的约束，即使没有登录也可以访问。

您可以在此之后安全地放回您的`@HtmlActionLink`产品，它现在可以按预期工作。

* * *

编辑

显然，[MVC 路由根本不适用于 web.config 中的授权内容](https://stackoverflow.com/a/9651417/1111088)。如该链接的答案中所述，只需添加`[Authorize]`您希望在登录后限制的所有控制器操作。当然，您必须删除拒绝 web.config 中所有用户的授权部分。

一种不那么乏味的方法可能是将 ChangePassword 操作移动到新控制器，然后您可以通过允许所有用户使用新控制器来使用 web.config 中的授权。

# java - 如何使用休眠更新数据库？

> ID：13307153
> 
> 赞同：0
> 
> 时间：2012-11-09T11:20:31.577
> 
> 标签：java, hibernate, jakarta-ee, nhibernate-mapping, hibernate-mapping

我正在开发使用 jsf 1.X 和休眠的项目，这是新的。我们正在使用下面的代码来更新_

```
 Shift4DAO dao = Shift4DAO.getInstance();
        Session session = dao.createNewSession();
        Transaction transaction = null;
        try {
            transaction = session.beginTransaction();
            session.saveOrUpdate(shift4B);
            transaction.commit();
        } catch (final HibernateException e) {
            e.printStackTrace();
            if (transaction != null) {
                transaction.rollback();
            } 
```

*session.saveOrUpdate(shift4B);*如何 它正在工作（流）？其中*Shift4DAO.java*

```
public class Shift4DAO extends BaseShift4DAO {

public Shift4DAO () {}
} 
```

和*Shift4.java*

```
public class Shift4 extends BaseShift4 {
private static final long serialVersionUID = 1L;

public Shift4 () {
    super();
}

public Shift4 (java.lang.Integer id) {
    super(id);
}

public Shift4 (
    java.lang.Integer id,
    org.azureworlds.dao.Employee createdBy,
    org.azureworlds.dao.Employee lastUpdatedBy,
    org.azureworlds.dao.Reservation reservation) {

    super (
        id,
        createdBy,
        lastUpdatedBy,
        reservation);
}

} 
```

我不明白如何连接到更新以更新数据。有没有人可以简化这一点，我需要在哪里检查或如何连接到 HB？感谢你！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:45:42.163

`dao.createNewSession();`创建一个封装数据库连接并实现“工作单元”模式的休眠会话。`session.saveOrUpdate(shift4B);`根据实体的状态（新的或更改的）告诉会话`shift4B`应该被创建（插入）或更新。

# android - 如何在android中刷新视图组件运行时间

> ID：13307154
> 
> 赞同：0
> 
> 时间：2012-11-09T11:20:39.287
> 
> 标签：android

我想在我的 android 应用程序中实用地更改文本视图的文本，这是我将字符串设置为文本视图的代码

```
TextView dateTime;
dateTime = (TextView) findViewById(R.tasksheetlist.txtdatetime);

    private void updateDateValue(String date)
    {
        String text = dateTime.getText().toString();
        text = text+"\n"+date;
        dateTime.setText(text);
    } 
```

这就是函数在某些地方调用的方式

```
 Date date = new Date();
            String dateStr = Helper.ConvertDateStringFromDate(date, "DD MMM");
            updateDateValue(dateStr); 
```

此代码调用但不反映在视图上。

我想我需要刷新布局但不知道如何？

请帮我解决这个问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:27:55.593

我想这篇文章会对你有所帮助。[http://android-developers.blogspot.com/2007/11/stitch-in-time.html](http://android-developers.blogspot.com/2007/11/stitch-in-time.html)基本上你想使用SDK中提供的Handler类。您不需要像这样调用 invalidate ，因为 setText 会为您执行此操作。希望这可以帮助！

# php - php 返回 odbc_exec 查询的字段名称

> ID：13307157
> 
> 赞同：0
> 
> 时间：2012-11-09T11:20:48.443
> 
> 标签：php, sql, odbc

我正在使用 odbc_exec 来执行 sql。它返回结果很好，但我想得到一个 sql 字段名称的数组。显然，我在 SQL 中有它们，但我需要一种编程方式来快速从查询中返回它们

```
$sql = "SELECT  mv_value, mv_entered_by, mv_student_id, mc_module_id, mc_type
                FROM MarkbookValue t1
                RIGHT JOIN MarkbookColumn t2 ON t1.mv_column_id = t2.mc_id
            WHERE DateDiff(minute, mc_date_entered, '" . $date . "') = 0
                AND mc_entered_by = '" . $name . "' "; 
```

运行它：

```
 $result = odbc_exec(CONN, $sql); 
```

我想获得一个数组列表：

```
 mv_value, mv_entered_by, mv_student_id, mc_module_id, mc_type 
```

所以我可以输出带有标题的CSV

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:19:14.107

这似乎是一个 hack，有没有更优雅的解决方案？

```
$result = odbc_exec($server, $sql);

$fp = fopen($name, 'w');

while ($export = odbc_fetch_array($result)) {
    if (!isset($headings))
    {
        $headings = array_keys($export);
        fputcsv($fp, $headings, ',', '"');
    }
    fputcsv($fp, $export, ',', '"');
}
fclose($fp); 
```

# python - 大多数没有返回的pythonic函数方式？

> ID：13307158
> 
> 赞同：12
> 
> 时间：2012-11-09T11:20:51.673
> 
> 标签：python, pep8

AI 在 PEP 8 中找不到任何相关内容。我对您对没有返回的最 Pythonic 函数语法的想法感兴趣？

是否有任何理由阻止没有返回线的函数（示例 3）？

示例 1：

```
def foo():
   print 'foo'
   return None 
```

示例 2：

```
def foo():
   print 'foo'
   pass 
```

示例 3：

```
def foo():
   print 'foo' 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-09T11:24:59.657

把事情简单化。示例 3 是最 Pythonic 的方式。

```
>>> import this

The Zen of Python, by Tim Peters

...
Simple is better than complex.
... 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-09T11:26:10.590

有两个用例：

*   一个从不返回任何东西的函数（又名“过程”）。你应该完全省略 return 。
*   为某些输入返回 None 的函数。我个人更喜欢放在`return None`那里，否则可能会使读者感到困惑：

例子：

```
 def find_user(name):
     if database.is_ready():
        return database.find_user_by_name(name)
     else:
        return None 
```

从技术上讲，您可以删除该`else`部分，但这会使函数看起来令人困惑。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-01-13T12:40:50.013

PEP8对此主题提出了建议[：](https://www.python.org/dev/peps/pep-0008/#programming-recommendations)

> 在返回语句中保持一致。**函数中的所有**return 语句都应该返回一个表达式，或者它们**都不**应该返回。如果任何 return 语句返回一个表达式，则任何没有返回值的 return 语句都应将其显式声明为 return None ，并且显式的 return 语句应出现在函数的末尾（如果可访问）。

是的：

```
def foo(x):
    if x >= 0:
        return math.sqrt(x)
    else:
        return None

def bar(x):
    if x < 0:
        return None
    return math.sqrt(x) 
```

不：

```
def foo(x):
    if x >= 0:
        return math.sqrt(x)

def bar(x):
    if x < 0:
        return
    return math.sqrt(x) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-09T11:26:03.773

如果你的函数返回一个值，那可能`None`是某种情况，`return None`很好。

如果您的函数没有返回值，但您想提前返回，请使用`return`不带任何参数的函数。在最后一行，您可以省略它。

`pass`什么都不做，只有在需要语句来避免语法错误时才有用（例如，在空类中）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-14T14:58:53.983

正如其他人所说，选项 3 是迄今为止最好的。

选项 3 是一个好主意的更多原因是，许多人认为`None`（`null`在其他语言中也称为）通常不应该被返回，并且您应该抛出异常或使用 Null Object 模式。虽然我不完全同意这一点，但我认为`None`当它在语义上没有意义并且模棱两可时，避免特别明确地使用是有道理的。

我并不是说你永远不应该回来`None`，但总的来说，我认为这不是一个好主意。

您甚至可以在今天的 Python 中看到这一点，其中`blah['DOESNOTEXIST']`将抛出异常，而在 Java`map.get("DOESNOTEXIST")`中将返回`null`。

# javascript - 在 Chrome 中启用 cookie.js

> ID：13307160
> 
> 赞同：2
> 
> 时间：2012-11-09T11:20:58.657
> 
> 标签：javascript, html, google-chrome, cookies

我为我的应用程序使用 jquery.cookie.js 插件（在服务器内，只有 html5）

以下代码适用于 IE9 an firefox 但不适用于 Chrome：

```
$.cookie('the_cookie', 'the_value'); 
```

如果我使用选项 --enable-file-cookies 运行 Chrome 就可以了，并且我的 Chrome 浏览器支持 cookie

我的问题：有没有办法用javascript而不是终端启用这个选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:25:10.133

如果您在“本地主机”上进行测试，chrome 会出现问题。改用 127.0.0.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:23:58.500

不，这是 Google Chrome 中与安全相关的方法。如果您能够启用客户端禁用它的某些功能，那应该是 Chrome 中的一个错误。

# c - 使用 gcc 使用 c 语言更改 gtk 中按钮的颜色

> ID：13307162
> 
> 赞同：0
> 
> 时间：2012-11-09T11:21:03.820
> 
> 标签：c, gcc, gtk, mingw, gtk2

我在 Windows 7 上使用 gcc 在 MinGW 中使用：“gtk+-bundle_2.24.10-20120208_win32”...

我很难在按钮中设置颜色..我的代码是

`GdkColor color;
gdk_color_parse ("red", &color);
gtk_widget_modify_bg ( GTK_WIDGET(a3), GTK_STATE_NORMAL, &color);
gtk_widget_show_all(window);`

但是我无法获得红色的按钮...该怎么办..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:57:57.080

这适用于 Linux 上的 GTK 2：

```
#include <gtk/gtk.h>

int main (int argc,char **argv)
{
    GtkWidget *button;
    GtkWidget *window;

    gtk_init (&argc,&argv);
    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
    g_signal_connect (G_OBJECT(window), "destroy",
            G_CALLBACK (gtk_main_quit), NULL);

    button = gtk_button_new_with_label ("Hello World !");
    gtk_container_add (GTK_CONTAINER (window), button);

    GdkColor color;
    gdk_color_parse ("red", &color);
    gtk_widget_modify_bg (GTK_WIDGET(button), GTK_STATE_NORMAL, &color);

    gtk_widget_show_all (window);
    gtk_main ();

    return 0;
} 
```

编译它并检查它是否适用于您的平台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-14T02:04:00.280

我在gtk2.24.10中使用了事件框，它可以工作。

我在网上找到了这个。

**“modify_bg() 仅影响具有关联 gtk.gdk.Window 的小部件。**

没有关联窗口的小部件包括：

*gtk.Arrow，gtk.Bin，gtk.Box，gtk.Button，gtk.CheckButton，gtk.Fixed，gtk.Image，gtk.Label，gtk.MenuItem，gtk.Notebook，gtk.Paned，gtk.RadioButton，gtk。范围，gtk.ScrolledWindow，gtk.Separator，gtk.Table，gtk.Toolbar，gtk.AspectFrame，gtk.Frame，gtk.VBox，gtk.HBox，gtk.VSeparator，gtk.HSeparator。*

可以将这些小部件添加到 gtk.EventBox 以克服此限制。”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-04T23:30:29.660

### 安装 Gtk

要安装 Gtk 库，我们可以访问以下链接。向下滚动到页面中间，您将找到多合一捆绑包。下载会安装运行时库和开发人员版本。

[http://www.gtk.org/download/win32.php](http://www.gtk.org/download/win32.php)

运行安装程序并安装到默认位置，`C:\Program Files (x86)\GTK2-Runtime\`然后继续将 Path 环境变量附加到二进制文件和库文件中： `C:\Program Files (x86)\GTK2-Runtime\bin; C:\gtk\bin; C:\gtk\lib; C:\gtk\include;`

### 按钮修复

建议重命名`share`GTK2-Runtime 目录中的目录。默认目录是`C:\Program Files (x86)\GTK2-Runtime\`. 我将`share`目录重命名`_share`为，小部件的所有颜色代码现在都很好用！

有一些`gtkrc`文件存储了所有 Gtk 小部件的 GUI 属性。如果此目录未重命名、移动或删除，则 ATST GUI 的所有样式将显示为运行时设置的默认样式或灰色。

# wix - Moving Wix to another file

> ID：13307167
> 
> 赞同：2
> 
> 时间：2012-11-09T11:21:09.257
> 
> 标签：wix, wix3.5

I am trying to split out my wix file into two separate files. With everything that exists under my `<UI> </UI>` tag living in this secondary file.

I have googled this quite a bit but I don't seem to be getting any conclusive results.

Has anyone done this successfully?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:35:54.853

You can move the `<UI>` element with its contents to a separate file easily. Just make sure to reference it from the main `Product.wxs` with [`<UIRef>`](http://wix.sourceforge.net/manual-wix3/wix_xsd_uiref.htm) element.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:16:24.733

In your Wix project add the reference to the WixUIExtension

In your Product.wxs (Main Install file) add a line like this

```
<UIRef Id="UserInterface"/> 
```

Add the UserInterface.wxs to your project solution and customize the UI of your MSI:

```
 <TextStyle Id="WixUI_Font_Normal" FaceName="Tahoma" Size="8" />
  <TextStyle Id="WixUI_Font_Bigger" FaceName="Tahoma" Size="9" Bold="yes" />
  <TextStyle Id="WixUI_Font_Title"  FaceName="Tahoma" Size="9" Bold="yes" />

  <Property Id="DefaultUIFont" Value="WixUI_Font_Normal" />

  <DialogRef Id="ProgressDlg" />
  <DialogRef Id="ErrorDlg" />
  <DialogRef Id="FilesInUse" />
  <DialogRef Id="FatalError" />
  <DialogRef Id="UserExit" />
  <DialogRef Id="InstallDirDlg"/>
  <DialogRef Id="FeaturesDlg" />

  <Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="FeaturesDlg" Order="2"></Publish>

  <Publish Dialog="FeaturesDlg" Control="Back" Event="NewDialog" Value="WelcomeDlg">1</Publish>

  <Publish Dialog="InstallDirDlg" Control="Back" Event="NewDialog" Value="FeaturesDlg">1</Publish>
  <Publish Dialog="InstallDirDlg" Control="ChangeFolder" Property="_BrowseProperty" Value="[WIXUI_INSTALLDIR]" Order="1">1</Publish>
  <Publish Dialog="InstallDirDlg" Control="ChangeFolder" Event="SpawnDialog" Value="BrowseDlg" Order="2">1</Publish>
  <Publish Dialog="InstallDirDlg" Control="Next" Event="SetTargetPath" Value="[WIXUI_INSTALLDIR]" Order="1">1</Publish>
  <Publish Dialog="InstallDirDlg" Control="Next" Event="NewDialog" Value="ExitDialog" Order="2">1</Publish>

  <Publish Dialog="ExitDialog" Control="Finish" Event="EndDialog" Value="Return" Order="999">1</Publish>

</UI>
<UIRef Id="WixUI_Common" /> 
```

The complete sample of this code can be found at this [answer](https://stackoverflow.com/questions/9367670/wix-3-5-install-features-based-on-checkboxes/9583544#9583544)

Look at this [link](http://www.dizzymonkeydesign.com/blog/misc/adding-and-customizing-dlgs-in-wix-3/), explains how to create Custom Dialogs

Good luck!

# c# - SSAS：以编程方式创建属性关系

> ID：13307170
> 
> 赞同：0
> 
> 时间：2012-11-09T11:21:24.107
> 
> 标签：c#, ssas, dimension

使用 AMO，我可以很高兴地确认二维属性的存在。我想建立关系。以下（结果）返回结果代码 0 这意味着但是在处理多维数据集之后没有关系。建议？

```
 // confirm db exists
 db = objServer.Databases.FindByName(strCubeDBName);

// find the dimension
  string dimName = "Product";
  Dimension dim = db.Dimensions.FindByName(dimName);

attrSource = dim.Attributes.FindByName("Spanish Product Subcategory Name");
if (attrSource != null)
    Console.WriteLine(attrSource + " - source attribute exists");
else
    throw new Exception(attrSource + " - source attribute does not exist");

attrRelated = dim.Attributes.FindByName("French Product Subcategory Name");
if (attrRelated != null)
    Console.WriteLine(attrRelated + " - Related attribute exists");
else
    throw new Exception(attrRelated + " - Related attribute does not exist");

int result;

result = attrSource.AttributeRelationships.Add(new AttributeRelationship(attrRelated));
Console.WriteLine(result);

dim.Process(ProcessType.ProcessUpdate); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:41:24.473

添加新的属性关系后，需要对维度调用Update。在上面的代码中，就在调用之前`Process`，添加以下行：

```
dim.Update(UpdateOptions.ExpandFull | UpdateOptions.AlterDependents) 
```

# web-applications - 在 jboss 4.2.3 中设置最大活动会话数

> ID：13307179
> 
> 赞同：0
> 
> 时间：2012-11-09T11:21:46.477
> 
> 标签：web-applications, jboss, java-ee-5

我正在使用**JBOSS 4.2.3.GA**，在服务器的 JMX 控制台中，我们有**maxActiveSessions**属性（允许的最大活动会话数，或 -1 表示无限制），默认情况下为 -1，更改此值并重新启动该值再次重置为 -1 。如何改变这个值？如果有另一种设置 maxActiveSession 计数的方法，请告诉我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:42:47.603

**maxActiveSessions**是管理器（Session Manager）组件的一个**属性**。

有关它的详细信息，请参见例如[http://tomcat.apache.org/tomcat-6.0-doc/config/manager.html](http://tomcat.apache.org/tomcat-6.0-doc/config/manager.html)

需要在特定的 tomcat 中定义管理器及其选项`<Context>`

JBoss 4.2.3.GA 的默认管理器选项位于默认上下文配置中`jboss-4.2.3.GA\server\default\deploy\jboss-web.deployer\context.xml`（替换`default`为您正在运行的任何配置。）

您可以将属性添加到现有定义中，如下所示：

```
<Context ....>
    ...
  <Manager pathname="" maxActiveSessions="42"/>
</Context> 
```

如果您需要为其他人的 Manager 配置特定于应用程序的选项，您应该在部署存档中`<Context>`创建自定义。`/META-INF/context.xml`（有关更多详细信息，请参见[http://tomcat.apache.org/tomcat-6.0-doc/config/context.html](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)）

**补充：***关于 JMX 控制台的使用：

使用 JMX 控制台，您只能检查和修改当前 MBean 实例的属性。这些值通常仅在相同的实例在内存中时才成立。

重新启动服务（在这种情况下为 JBoss/JVM）时，会创建新实例，并且属性从配置文件中的默认值或代码中的默认值接收它们的值。

因此，请始终查找配置文件/选项以进行持久更改。

# c# - 无法删除强制转换事件处理程序

> ID：13307185
> 
> 赞同：3
> 
> 时间：2012-11-09T11:22:09.070
> 
> 标签：c#, events

我有一个设计模式（不确定这是否是常用的 DP，如果有人有名字，请告诉我）我有一个类的非泛型和泛型接口。实现存储泛型值并隐式实现泛型接口。它还显式地实现了非泛型接口，每个属性将泛型属性的值适当地转换为其非泛型形式。这对于属性非常有效，但是我遇到了一些问题，使其在事件中也能很好地工作。

下面是我正在做的一个大大简化的版本。这个想法是，将处理程序添加到 Event 的任一接口版本都应该将其添加到同一个事件中，这样当事件触发时，它是如何订阅的都无关紧要。Main 中的测试代码表明事件处理程序没有像我预期的那样被删除。使用 INormalInterface.Event 的添加/删除块添加/删除事件的正确代码是什么？

```
class Program
{
    static void Main(string[] args)
    {
        INormalInterface x = new ImplementingClass<int>();

        Console.WriteLine("Created x and invoking...");
        x.InvokeEvent();

        Console.WriteLine("Adding event and invoking...");
        x.Event += x_Event;
        x.InvokeEvent();

        Console.WriteLine("Removing event and invoking...");
        x.Event -= x_Event;
        x.InvokeEvent();

        Console.WriteLine("Done.");
        Console.ReadKey(true);
    }

    static void x_Event(object sender, NormalEventArgs e)
    {
        Console.WriteLine("Event Handled!");
    }
}

interface INormalInterface
{
    event EventHandler<NormalEventArgs> Event;

    void InvokeEvent();
}

interface IGenericInterface<T> : INormalInterface
{
    new event EventHandler<GenericEventArgs<T>> Event;
}

class ImplementingClass<T> : IGenericInterface<T>
{
    public event EventHandler<GenericEventArgs<T>> Event;
    event EventHandler<NormalEventArgs> INormalInterface.Event
    {
        add { Event += new EventHandler<GenericEventArgs<T>>(value); }
        remove { Event -= new EventHandler<GenericEventArgs<T>>(value); }
    }

    public void InvokeEvent()
    {
        if (Event != null)
        {
            Event(this, new GenericEventArgs<T>());
        }
    }
}

class NormalEventArgs : EventArgs
{
}

class GenericEventArgs<T> : NormalEventArgs
{
} 
```

我认为问题是因为我每次都在“新建”代表，所以在添加/删除时它不会解析为相同的值，有没有办法投射代表？我确实有一个解决方案，但它需要为每个事件都有一个字段，因此希望有任何避免这种情况的解决方案：

```
class ImplementingClass<T> : IGenericInterface<T>
{
    private readonly Dictionary<EventHandler<NormalEventArgs>, EventHandler<GenericEventArgs<T>>> m_eventDictionary = new Dictionary<EventHandler<NormalEventArgs>, EventHandler<GenericEventArgs<T>>>();

    public event EventHandler<GenericEventArgs<T>> Event;
    event EventHandler<NormalEventArgs> INormalInterface.Event
    {
        add { Event += m_eventDictionary[value] = new EventHandler<GenericEventArgs<T>>(value); }
        remove { Event -= m_eventDictionary[value]; }
    }

    public void InvokeEvent()
    {
        if (Event != null)
        {
            Event(this, new GenericEventArgs<T>());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T12:18:18.753

这可以解决问题，但我不会称之为漂亮：

```
 event EventHandler<NormalEventArgs> INormalInterface.Event
    {
        add
        {
            var handler = (EventHandler<GenericEventArgs<T>>)Delegate.CreateDelegate(typeof(EventHandler<GenericEventArgs<T>>), value.Target, value.Method);
            Event += handler;
        }
        remove
        {
            var handler = (EventHandler<GenericEventArgs<T>>)Delegate.CreateDelegate(typeof(EventHandler<GenericEventArgs<T>>), value.Target, value.Method);
            Event -= handler;
        }
    } 
```

问题与

```
 add { Event += new EventHandler<GenericEventArgs<T>>(value); } 
```

是它为 Delegate.Invoke 方法创建了一个委托，因此它在事件的多播委托中找不到匹配项。是这样，而不是新对象本身的创建，会阻止您删除处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:54:40.580

**新答案**

不是最漂亮的，但这似乎可以解决问题：

```
 event EventHandler<NormalEventArgs> INormalInterface.Event
    {
        add { Event += new EventHandler<GenericEventArgs<T>>(value); }
        remove
        {
            var d = Event.GetInvocationList().First(x => x.Target.GetHashCode() == value.GetHashCode());
            Event -= (EventHandler<GenericEventArgs<T>>) d;
        }
    } 
```

**原答案：**

* * *

在我看来，您的界面方式错误 - 除非您有现有的理由，否则我会将其更改为：

```
class Program
{
    static void Main(string[] args)
    {
        IGenericInterface<int> x = new ImplementingClass<int>();

        Console.WriteLine("Created x and invoking...");
        x.InvokeEvent();

        Console.WriteLine("Adding event and invoking...");
        x.Event += x_Event;
        x.InvokeEvent();

        Console.WriteLine("Removing event and invoking...");
        x.Event -= x_Event;
        x.InvokeEvent();

        Console.WriteLine("Done.");
        Console.ReadKey(true);
    }

    static void x_Event(object sender, NormalEventArgs e)
    {
        Console.WriteLine("Event Handled!");
    }
}

interface IBaseInterface<T> where T : EventArgs
{
    event EventHandler<T> Event;

    void InvokeEvent();
}

interface INormalInterface : IBaseInterface<NormalEventArgs>
{
}

interface IGenericInterface<T> : IBaseInterface<GenericEventArgs<T>>
{
}

class ImplementingClass<T> : IGenericInterface<T>
{
    public event EventHandler<GenericEventArgs<T>> Event;

    public void InvokeEvent()
    {
        if (Event != null)
        {
            Event(this, new GenericEventArgs<T>());
        }
    }
}

class NormalEventArgs : EventArgs
{
}

class GenericEventArgs<T> : NormalEventArgs
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:30:56.057

我认为可以在这里使用观察者模式[http://www.dofactory.com/Patterns/PatternObserver.aspx](http://www.dofactory.com/Patterns/PatternObserver.aspx)

```
using System;
using System.Collections.Generic;

namespace DoFactory.GangOfFour.Observer.RealWorld
{
  /// <summary>
  /// MainApp startup class for Real-World
  /// Observer Design Pattern.
  /// </summary>
  class MainApp
  {
    /// <summary>
    /// Entry point into console application.
    /// </summary>
    static void Main()
    {
      // Create IBM stock and attach investors
      IBM ibm = new IBM("IBM", 120.00);
      ibm.Attach(new Investor("Sorros"));
      ibm.Attach(new Investor("Berkshire"));

      // Fluctuating prices will notify investors
      ibm.Price = 120.10;
      ibm.Price = 121.00;
      ibm.Price = 120.50;
      ibm.Price = 120.75;

      // Wait for user
      Console.ReadKey();
    }
  }

  /// <summary>
  /// The 'Subject' abstract class
  /// </summary>
  abstract class Stock
  {
    private string _symbol;
    private double _price;
    private List<IInvestor> _investors = new List<IInvestor>();

    // Constructor
    public Stock(string symbol, double price)
    {
      this._symbol = symbol;
      this._price = price;
    }

    public void Attach(IInvestor investor)
    {
      _investors.Add(investor);
    }

    public void Detach(IInvestor investor)
    {
      _investors.Remove(investor);
    }

    public void Notify()
    {
      foreach (IInvestor investor in _investors)
      {
        investor.Update(this);
      }

      Console.WriteLine("");
    }

    // Gets or sets the price
    public double Price
    {
      get { return _price; }
      set
      {
        if (_price != value)
        {
          _price = value;
          Notify();
        }
      }
    }

    // Gets the symbol
    public string Symbol
    {
      get { return _symbol; }
    }
  }

  /// <summary>
  /// The 'ConcreteSubject' class
  /// </summary>
  class IBM : Stock
  {
    // Constructor
    public IBM(string symbol, double price)
      : base(symbol, price)
    {
    }
  }

  /// <summary>
  /// The 'Observer' interface
  /// </summary>
  interface IInvestor
  {
    void Update(Stock stock);
  }

  /// <summary>
  /// The 'ConcreteObserver' class
  /// </summary>
  class Investor : IInvestor
  {
    private string _name;
    private Stock _stock;

    // Constructor
    public Investor(string name)
    {
      this._name = name;
    }

    public void Update(Stock stock)
    {
      Console.WriteLine("Notified {0} of {1}'s " +
        "change to {2:C}", _name, stock.Symbol, stock.Price);
    }

    // Gets or sets the stock
    public Stock Stock
    {
      get { return _stock; }
      set { _stock = value; }
    }
  }
} 
```

# python - 如何将多行字符串拆分为数组

> ID：13307186
> 
> 赞同：1
> 
> 时间：2012-11-09T11:22:18.410
> 
> 标签：python, parsing, beautifulsoup

我使用这段代码：

```
from bs4 import BeautifulSoup

parser = BeautifulSoup(remote_data)
parse_data = parser.find_all('a')
for atag_data in parse_data:
    URL_list = atag_data.get('href') 
```

当我尝试将 URL_list 拆分为数组时：

```
array = str.split(URL_list) 
```

我给这3个数组：

```
['index1.html']
['example.exe']
['document.doc'] 
```

但我只需要一个数组，例如：

```
['index1.html','example.exe','document.doc'] 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:32:33.737

你没有得到一个数组——它是一个列表！此外，您应该避免命名变量，如内置函数。

关于你的问题：

```
from bs4 import BeautifulSoup
parser = BeautifulSoup(remote_data)
link_list = [a['href'] for a in parser.find_all('a')] 
```

# c# - 使用 MongoDB 时 ModelState.IsValid 包含错误

> ID：13307188
> 
> 赞同：3
> 
> 时间：2012-11-09T11:22:30.200
> 
> 标签：c#, asp.net-mvc, mongodb, asp.net-mvc-4, modelstate

我正在尝试使用 ASP.NET MVC 4 和 MongoDB 创建一个基本的电影数据库。我的问题出在我的 MovieController 的 POST Update 方法中。

```
[HttpPost]
    public ActionResult Update(Movie movie)
    {
        if (ModelState.IsValid)
        {

            _movies.Edit(movie);

            return RedirectToAction("Index");
        }

        return View();
    } 
```

ModelState 包含电影的 Id 字段（它是一个 ObjectId 对象）的错误并引发以下异常：

```
 {System.InvalidOperationException: The parameter conversion from type 'System.String' to type 'MongoDB.Bson.ObjectId' failed because no type converter can convert between these types 
```

这是更新视图：

```
@model MVCMovie.Models.Movie

@{
    ViewBag.Title = "Update";
}

<h2>Update</h2>

@using (Html.BeginForm())
{
    @Html.HiddenFor(m => m.Id);
    @Html.EditorForModel()

    <p>
        <input type="submit" value="Update" />
    </p>
} 
```

和模型中的电影类：

```
namespace MVCMovie.Models
{
    public class Movie
    {
        [BsonId]
        public ObjectId Id { get; set; }

        public string Title { get; set; }

        public DateTime ReleaseDate { get; set; }

        public string Genre { get; set; }

        public decimal Price { get; set; }

        [ScaffoldColumn(false)]
        public DateTime TimeAdded { get; set; }
    }
} 
```

编辑：解决方案我将 [ScaffoldColumn(false)] 添加到 Id 中，以便浏览器不会尝试呈现它。但是我仍然需要实现 Mihai 提供的解决方案才能传递正确的 ID。

我假设问题是在视图中引起的，因为它试图发送一个字符串而不是一个 ObjectId 对象。但我不知道如何解决这个问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T20:40:01.787

对于其他正在寻找这个答案的人，从这篇文章中可以完美运行： http: [//www.joe-stevens.com/2011/06/12/model-binding-mongodb-objectid-with-asp-net-mvc/](http://www.joe-stevens.com/2011/06/12/model-binding-mongodb-objectid-with-asp-net-mvc/)

创建模型绑定器：

```
public class ObjectIdBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var result = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        return new ObjectId(result.AttemptedValue);
    }
} 
```

然后在 app start 中注册：

```
protected void Application_Start()
{
    ModelBinders.Binders.Add(typeof(ObjectId), new ObjectIdBinder());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T11:28:08.493

问题是 MVC 不知道如何将您的 Id 转换为 ObjectId 类型。它只将其视为字符串。

您必须为您的方法使用自定义活页夹。看看这个链接[http://www.dotnetcurry.com/ShowArticle.aspx?ID=584](http://www.dotnetcurry.com/ShowArticle.aspx?ID=584)

看看这个

```
public class MovieModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var modelBinder = new DefaultModelBinder();
        var movie = modelBinder.BindModel(controllerContext, bindingContext) as Movie;
        var id = controllerContext.HttpContext.Request.Form["Id"];
        if (movie != null)
        {
            movie.Id = new ObjectId(id);
            return movie ;
        }

        return null;
    }
} 
```

并更改您的更新方法

```
public ActionResult Update([ModelBinder(typeof(MovieModelBinder))] Movie movie) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T11:32:55.117

似乎您需要编写自己的自定义类型转换器。
查看此讨论： [ObjectId 类型转换器](https://groups.google.com/forum/?fromgroups=#!searchin/mongodb-csharp/objectid/mongodb-csharp/AmSUcTc3clo/6ODcdnwrvBgJ)

# android - 如何在android中绘制谷歌地图路线

> ID：13307189
> 
> 赞同：0
> 
> 时间：2012-11-09T11:22:36.693
> 
> 标签：android, google-maps, http, android-intent

我尝试在android中的两个地方之间获取地图路线，我[在这里引用了这个链接](https://stackoverflow.com/questions/5608601/android-google-maps-and-drawing-route)

但是在这两个地方显示错误，

```
HttpClient oHttp = HttpClient.getInterfaces();
        String szXml = oHttp.doGet(szUrl,""); 
```

如何解决这个问题

# c - 限制结构内的关键字和指针

> ID：13307190
> 
> 赞同：18
> 
> 时间：2012-11-09T11:22:41.030
> 
> 标签：c, function, struct, restrict-qualifier

通过使用这样的`restrict`关键字：

```
int f(int* restrict a, int* restrict b); 
```

我可以指示编译器数组 a 和 b 不重叠。假设我有一个结构：

```
struct s{
(...)
int* ip;
}; 
```

并编写一个接受两个`struct s`对象的函数：

```
int f2(struct s a, struct s b); 
```

在这种情况下，我如何类似地指示编译器`a.ip`并且`b.ip`不重叠？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T11:27:58.153

您也可以`restrict`在结构内部使用。

```
struct s {
    /* ... */
    int * restrict ip;
};

int f2(struct s a, struct s b)
{
    /* ... */
} 
```

因此，编译器可以假定`a.ip`并`b.ip`用于在`f2`函数的每次调用期间引用不相交的对象。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-09T11:29:51.993

检查这个**指针**示例，您可能会得到一些帮助。

```
// xa and xb pointers cannot overlap ie. point to same memmpry location.
void function (restrict int *xa, restrict int *xb)
{
    int temp = *xa;
    *xa = *xb;
    xb = temp;
} 
```

如果两个指针被声明为restrict，那么这两个指针不会重叠。

**已编辑**

[检查此链接以获取更多示例](http://www.devx.com/tips/Tip/13825)

# php - 从字符串中去除特定字符

> ID：13307191
> 
> 赞同：0
> 
> 时间：2012-11-09T11:22:46.097
> 
> 标签：php

我已经阅读过，我真的很挣扎！

我有包含单词“未完成”的字符串，我想去掉“un”，所以它只会打印“完成”。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T11:26:08.603

```
<?php

$str = "unfinished";
$newstr = str_replace ( "unfinished","finished", $str );

?> 
```

或者

```
<?php

$str = "unfinished";
$newstr = str_replace ( "un","", $str );

?> 
```

[str_replace](http://uk3.php.net/str_replace)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T11:24:42.917

我不确定我是否理解您的问题，但如果我理解了，您可以使用[str_replace](http://php.net/manual/pt_BR/function.str-replace.php)函数（或[preg_replace](http://php.net/manual/pt_BR/function.preg-replace.php)）。

```
$string_you_want_to_search_in = str_replace("unfinished", "finished", $string_you_want_to_search_in); 
```

如果你想从任何地方删除“un”字符串，只需将“un”替换为“”，如下所示：

```
$string = str_replace("un", "", $string); 
```

# windows-phone-7 - Windows Phone 8 中的 ContextMenuService，还在使用 Toolkit？

> ID：13307192
> 
> 赞同：1
> 
> 时间：2012-11-09T11:22:51.737
> 
> 标签：windows-phone-7, silverlight-toolkit, windows-phone-8

我想在我的 WP8 应用程序的 LongListSelector 中应用 ContextMenu。但是我找不到 WP7 工具包中的 ContextMenu。我还需要使用那个（我宁愿不用）吗？

如果这是真的，我该如何解决工具包和手机都有 LongListSelector 的问题。因为当我尝试构建我的项目时，编译器抱怨有两个 LongListSelector 并且构建失败。

> 错误 2 类型 'Microsoft.Phone.Controls.LongListSelector' 存在于两个 'x:\Dropbox\Dropbox\X\packages\SilverlightToolkitWP.4.2012.10.9\lib\sl3-wp\Microsoft.Phone.Controls.Toolkit.dll'和 'c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\WindowsPhone\v8.0\Microsoft.Phone.dll' X:\Dropbox\Dropbox\X\X\obj\Debug\Views\MainPage.g 。CS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:01:13.957

> 但是我找不到 WP7 工具包中的 ContextMenu。我还需要使用那个（我宁愿不用）吗？

是的。

> 如果这是真的，我该如何解决工具包和手机都有 LongListSelector 的问题。

[从http://phone.codeplex.com/](http://phone.codeplex.com/)将您的 Toolkit 版本更新为 WP8 版本

# java - 传递单元素数组内联

> ID：13307195
> 
> 赞同：6
> 
> 时间：2012-11-09T11:23:04.120
> 
> 标签：java, arrays

我是 Java 新手，我遇到了几个接受给定元素数组的函数（例如`int[]`）。但是，在某些情况下，我只有一个 int 可以传递，我想知道如何内联执行此操作（例如，不首先定义数组变量）。

例如，如何简化：

```
int[] pidArray = { mySinglePID };
am.getProcessMemoryInfo(pidArray); // This one accepts arrays only 
```

对于类似的东西（编造，不能这样工作）：

```
am.getProcessMemoryInfo([mySinglePID]); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T11:25:48.930

只需将匿名数组用于您的代码：

```
am.getProcessMemoryInfo(new int[]{mySinglePID }); // This one accepts arrays only 
```

**匿名数组：**在 java 中，使用以下语法创建匿名数组是完全合法的。

```
new <type>[] { <list of values>}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T11:23:50.343

尝试

```
int[] pidArray = new int[]{ mySinglePID };
am.getProcessMemoryInfo(pidArray); 
```

oneliner 将是

```
am.getProcessMemoryInfo(new int[]{mySinglePID }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-09T11:24:33.363

你可以这样做： -

```
am.getProcessMemoryInfo(new int[]{ mySinglePID }); 
```

所以，你不需要在这里声明你的数组变量。只需传递一个*未命名* `array`的对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T11:27:17.717

事实上你想做：

```
am.getProcessMemoryInfo( new int[] { mySinglePID } ); 
```

您只能在声明中跳过`new int[]`，如果您破坏它，则该语法不起作用

```
// NOT WORKING EXAMPLE
int[] pidArray;
pidArray = { mySinglePID }; 
```

# jquery - Blueimp jquery 文件上传 - 在上下文中进行进度回调，最后一个不更新

> ID：13307197
> 
> 赞同：7
> 
> 时间：2012-11-09T11:23:04.990
> 
> 标签：jquery, file-upload, blueimp

我正在使用：[https](https://github.com/blueimp/jQuery-File-Upload) ://github.com/blueimp/jQuery-File-Upload （基本插件，没有添加ui）

我正在使用 data.context 链接各个节点以更新每个文件上传的进度，但它不会更新最后加载的文件。因此，例如，如果我选择 4 个文件，它们将显示在我的页面上，并且进度将适用于列表中的前 3 个，但不适用于第 4 个。无论选择什么数字，它始终是列表中的最后一个。（如果只选择了一项，则可以正常工作）。

此外，它似乎也没有更新相关的进度条。

有任何想法吗？

这是我的代码：

```
$('.aws').fileupload({

    limitMultiFileUploads: 1,

    dataType: 'html',

    add: function (e, data) {

            var file = data.files[0];
            var fileDetails = '<tr><td>' + 
            file.name + 
            '</td><td class="progress"><span class="progress"><span class="js-progress-active progress-active"></span>' + 
            '</span></td><td class="cancel-file"><a href="#" class="cancel-file-load-icon js-cancel-file">Cancel</a></td></tr>';

            if ($('.file-list table tr:last').length > 0) {
                data.context = $('.file-list table tr:last').after(fileDetails);
            } else {
                data.context = $(fileDetails).appendTo('.file-list table');
            }

            data.submit();
    },

    progress: function (e, data) {
        var progress = parseInt(data.loaded / data.total * 100, 10);
        data.context.find('.js-progress-active').css(
            'width',
            progress + '%'
            ).text(progress + '%');
    }

}) 
```

**更新**原来它是'tr：last'选择器。所以这不起作用：

```
data.context = $('.file-list table tr:last').after(fileDetails); 
```

但这确实：

```
data.context = $(fileDetails).appendTo('.file-list table'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T18:46:04.190

Just repeat your Answer for accuracy and System consistency.
Now, Its not reproducible anymore.

*"Turns out it's the 'tr:last' selector. so this doesn't work:
`data.context = $('.file-list table tr:last').after(fileDetails)`;
but this does:
`data.context = $(fileDetails).appendTo('.file-list table');`"*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T09:06:42.397

选择器`:last`不存在。改为使用`:last-child`。

```
data.context = $('.file-list table tr:last-child').after(fileDetails); 
```

是正确的

# wpf - 为空时调试异常绑定到列表项

> ID：13307198
> 
> 赞同：0
> 
> 时间：2012-11-09T11:23:09.723
> 
> 标签：wpf, list, xaml, exception, binding

有这段代码：

```
<ContentControl
    Content="{Binding SelectedDispositivos[0]}" 
    ContentTemplate="{StaticResource DispositivoInfoViewTemplate}">
</ContentControl> 
```

SelectedDispositivos 是绑定到 DataGrid SelectedItems 属性的项目列表。该列表可以为空，因此它会引发如下异常：

```
System.Windows.Data Error: 17 : Cannot get 'Item[]' value (type 'DispositivoViewModel')
from 'SelectedDispositivos' (type 'ObservableCollection`1'). 
BindingExpression:Path=SelectedDispositivos[0]; DataItem='DispositivosViewModel'  
(HashCode=45398538); target element is 'ContentControl' (Name=''); target property is  
'Content' (type 'Object') 
ArgumentOutOfRangeException:'System.ArgumentOutOfRangeException: El argumento 
especificado está fuera del intervalo de valores válidos.
Nombre del parámetro: index' 
```

它只发生在调试模式下的结果窗口中，并且应用程序继续运行而没有问题。无论如何，异常是异常，所以我想知道是否有一种简单的方法来修复它，而 ViewModel 中没有另一个变量来公开 FirstSelectedItem 或类似的东西。

**编辑：**

即使用 DataTriggers 来处理它，它也会抛出相同的绑定错误。我删除了 DataTrigger Content setter，问题就消失了，以确保问题存在：

```
<ContentControl
    ContentTemplate="{StaticResource DispositivoInfoViewTemplate}">
    <ContentControl.Style>
        <Style TargetType="ContentControl">
            <Setter Property="Content" Value="{x:Null}" />
            <Setter Property="Visibility" Value="Collapsed" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding SelectedDispositivos.Count}" Value="1">
                    <Setter Property="Visibility" Value="Visible" />
                    <Setter Property="Content" Value="{Binding SelectedDispositivos[0]}" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </ContentControl.Style>
</ContentControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:31:37.833

您可以将 a`Style`设置为null**或**其他内容`DataTrigger`。默认绑定需要移动到 a ，这样它就不会[覆盖](http://msdn.microsoft.com/en-us/library/ms743230.aspx).`SelectedDispositivos.Count = 0``Content`**`Setter``DataTrigger`**

# google-places-api - Google Places 更改自动完成提示和结果语言？

> ID：13307199
> 
> 赞同：3
> 
> 时间：2012-11-09T11:23:10.627
> 
> 标签：google-places-api

[https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)

我有一个与上述 google 地方演示类似的页面。请注意，位置输入字段有“输入位置”的提示。如何更改此提示的语言？以及如何更改结果返回的语言？我猜他们两个都去相同的设置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T01:25:36.577

根据[文档](https://developers.google.com/maps/faq#languagesupport)：

> *“API 检测用户的浏览器设置并适当地设置语言。可以覆盖 API 中的语言。”*

输入字段占位符将根据用户浏览器代理语言设置自动更改。

您还可以通过将`language`引导请求中的参数设置为[受支持](https://spreadsheets.google.com/a/google.com/pub?key=p9pdwsai2hDMsLkXsoM05KQ&gid=1)的语言来覆盖自动语言检测。

例如

```
<script src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false&language=ja"></script> 
```

# maps - OpenLayers：可缩放的 WMS 覆盖？

> ID：13307201
> 
> 赞同：0
> 
> 时间：2012-11-09T11:23:22.620
> 
> 标签：maps, gis, openlayers, wms

我在 OpenLayers 中遇到 WMS 覆盖问题。基本上我只想将来自 WMS 服务器的数据添加为覆盖层而不是基础层。这似乎是一个非常简单的问题，但我无法找到解决方案。如果我将*singleTile*设置为*true*，则覆盖显示在整个地图上，但您无法放大。如果设置为*false*，则每个缩放级别仅显示一个图块。如果我将它设置为基础层，它工作得很好，但我真的想要覆盖解决方案，所以我可以让它透明并看到它后面的地图。

问题的演示，使用不同的数据集，但问题是相同的：http: [//jsfiddle.net/adbnC/2/](http://jsfiddle.net/adbnC/2/)

我认为这可能与某些坐标系问题有关，但我不是专家，因此不胜感激。

非常感谢！

以下是无法按预期工作的代码的相关部分：

```
var pop_layer = new OpenLayers.Layer.WMS("Population Density in 2000",
    "http://sedac.ciesin.columbia.edu/geoserver/ows", {
        layers: 'gpw-v3:gpw-v3-population-density_2000',
        transparent: true
     }, {
         opacity: 0.5,
         isBaseLayer: false,
         // Setting single tile to true will kind of work but than one
         // cannot zoom in any more.
         singleTile: false
     }
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:20:06.457

我不太明白这里到底出了什么问题，但我认为这与混乱的参考系统有关。这是一种解决方法：

[修改后的 Jsfiddle.net](http://jsfiddle.net/MartinDueren/fjCKd/)

我将地图投影更改为球形墨卡托，现在它似乎对我来说工作正常：

```
var mapOptions = {
    div: "map",
    projection: new OpenLayers.Projection("EPSG:900913"),
    units: "m"
};

map = new OpenLayers.Map('map', mapOptions);

var osm = new OpenLayers.Layer.OSM();
map.addLayer(osm);

var pop_layer = new OpenLayers.Layer.WMS("Population Density in 2000", "http://sedac.ciesin.columbia.edu/geoserver/ows", {
    layers: 'gpw-v3:gpw-v3-population-density_2000',
    transparent: true
}, {
    opacity: 0.5,
    isBaseLayer: false
});

map.addLayer(osm);
map.addLayer(pop_layer);
map.addControl(new OpenLayers.Control.LayerSwitcher());
map.setCenter(new OpenLayers.LonLat(0, 0), 2);​ 
```

让我知道这是否有帮助！

# ruby-on-rails - 设计向任何电子邮件 ID 发送忘记密码说明

> ID：13307203
> 
> 赞同：3
> 
> 时间：2012-11-09T11:23:29.987
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我正在寻找设计中的自定义项，如果我们单击忘记密码，它应该将邮件发送到任何电子邮件 ID。无论电子邮件 ID 是否存在，Gmail 中都会发生类似的事情。

**屏幕一** ![在此处输入图像描述](../Images/9da8975073953fa9d4c3fb7c7ee6d209.png)

**屏幕 2** ![在此处输入图像描述](../Images/5be84d21301ef2058b80791c7ac0b7fa.png)

**目前我所拥有的是**它尝试与系统中的有效用户进行验证。

![在此处输入图像描述](../Images/ba1fa9a81fecc2683c0ef1cba8732496.png)

[设计](https://github.com/plataformatec/devise)，[可恢复模块](https://github.com/plataformatec/devise/blob/master/lib/devise/models/recoverable.rb)负责这个

```
 def send_reset_password_instructions(attributes={})
          recoverable = find_or_initialize_with_errors(reset_password_keys, attributes,   :not_found)
          recoverable.send_reset_password_instructions if recoverable.persisted?
          recoverable
        end 
```

如何删除此验证并将电子邮件发送到任何电子邮件 ID？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-06-07T16:21:19.847

有一个称为设计的配置`paranoid`，当设置为 true 时，会以某种方式更改消息以避免电子邮件枚举。只需`config.paranoid = true`在您的设计配置中进行设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T15:27:37.433

我的解决方案是扩展/覆盖 Devise 的密码控制器。为此，创建一个从 Devise 的密码控制器继承的控制器（我们称之为密码），如下所示：

```
class PasswordsController < Devise::PasswordsController 
```

然后编辑您的路线文件，使此更改生效：

```
devise_for :users, :controllers => { :passwords => 'passwords' } 
```

现在，您将要覆盖[`create`action](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/passwords_controller.rb#L12)。有几种方法可以做到这一点，但由于我不确定你想做什么，我将向你展示你可以做的 2 件事：

1.  您只想防止“找不到电子邮件”错误，以便人们无法找到您的数据库中存在或不存在哪些电子邮件：

    ```
    def create
      self.resource = resource_class.send_reset_password_instructions(resource_params)

      respond_with({}, :location => after_sending_reset_password_instructions_path_for(resource_name))
    end 
    ```

2.  您真的想向任何输入的电子邮件发送电子邮件：

    ```
    def create
      self.resource = resource_class.send_reset_password_instructions(resource_params)

      unless successfully_sent?(resource)
        Devise::Mailer.reset_password_instructions(resource).deliver
      end

      respond_with({}, :location => after_sending_reset_password_instructions_path_for(resource_name))
    end 
    ```

现在，最后一个解决方案的问题是您正在向不存在的用户发送电子邮件......所以当用户回来时，他将无法输入他的新密码，因为他的用户帐户可以找不到。但如果你真的想这样做，希望我能让你走上正确的轨道。

# android - 如何从 Android 的 SD 卡中的 DCIM/Camera 文件夹中检索最后保存的图像

> ID：13307206
> 
> 赞同：1
> 
> 时间：2012-11-09T11:23:37.670
> 
> 标签：android

我想从相机捕获的 DCIM/Camera 文件夹中检索最后保存的图像，并在特定活动的图像视图中显示它。请告诉我如何使用文件从 DCIM/Camera 文件夹中检索最后保存的图像类。提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:42:08.107

要在您的应用程序中从相机捕获图像，您需要使用意图，这里是有关如何使用 android 相机应用程序捕获图像的示例。

[从相机捕获图像并在活动中显示](https://stackoverflow.com/questions/5991319/capture-image-from-camera-and-display-in-activity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:34:35.000

您必须使用 MediaStore 内容提供程序来获取图像，按日期排序，最多 1 个结果

# jms - JMS / ActiveMQ：发送带有对象作为类成员的对象

> ID：13307207
> 
> 赞同：0
> 
> 时间：2012-11-09T11:23:39.080
> 
> 标签：jms, activemq, spring-jms

我正在使用 ActiveMQ（带有 Spring）将消息发送到远程 OSGi-Container。这工作得很好，但有一个问题。

我有两个实现可序列化的类。一个类是另一个类的类成员，如下所示：

```
public class Member implements Serializble {
private int someValue;
private static final long serialVersionUID = -4329617004242031635L;
... }

public class Parent implements Serializable {
    private static final long serialVersionUID = -667242031635L;
private double otherValue;
private Member;
} 
```

因此，当发送 Parent 实例时，Parent 的 Member 为 null。

希望你明白我的问题是什么:)

编辑：有趣的问题：我的班级中有一个 java.util.date 被正确序列化，但这是唯一的，所有双打等都是空的

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T15:27:15.810

如果对象是一个选项，你可能会选择这样的东西

制作方：

```
SomeObject someObject = new SomeObject();
ObjectMessage objectMessage = session.createObjectMessage();
objectMessage.setObject(someObject);
producer.send(objectMessage); 
```

消费端：

```
private class MessageConsumer implements MessageListener {
    @Override
    public void onMessage(Message message) {
        logger.debug("onMessage() " + message);

        if (message instanceof ObjectMessage) {
            ObjectMessage objectMessage = (ObjectMessage) message;
            SomeObject someObject = (SomeObject)objectMessage.getObject();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:57:47.873

字节消息中的序列化对象有点难以处理。

正如 Aksel Willgert 建议的那样，我会使用对象消息，或者只是将其采用更松散耦合的格式，例如序列化 XML。我的快速解决方案是使用 XStream 以更松散耦合的方式进出 XML，这里有一个快速指南：[XStream](http://xstream.codehaus.org/tutorial.html)

*更新*，以及这里的一些代码（需要将 xstream-.jar 添加到您的项目中）

```
// for all, instanciate XStream
XStream xstream = new XStream(new StaxDriver());

// Producer side:
TextMessage message = session.createTextMessage(xstream.toXML(mp));
producer.send(message);

// consumer side:
TextMessage tmsg = (TextMessage)msg;
Parent par = (Parent)xstream.fromXML(tmsg.getText());

par.getMember() // etc should work just fine. 
```

# c - fgets/scanf 读取文件没有给出值

> ID：13307211
> 
> 赞同：3
> 
> 时间：2012-11-09T11:23:48.497
> 
> 标签：c, memory, opencv

我有一个包含多行无符号字符三元组的 txt 文件。数据来自 OpenCV BGR 图片，因此每个字节三元组都是一个 BGR 颜色值。

当我尝试读取文件时，我用 fgets() 读取的行在图片文件的三分之一之后是空的。这是我的代码：

```
 FILE* DS;
    DS = fopen("Data.txt", "r");
    char line[100];
    for (int x=0; x<image->width; x++)
    {
        for (int y=0; y<image->height; y++)
        {
            fgets(line, 10, DS);
            sscanf(line, "%c %c %c", &FrontTexture->imageData[FrontTexture->widthStep * y + x * 3 + 0], 
                                     &FrontTexture->imageData[FrontTexture->widthStep * y + x * 3 + 1],
                                     &FrontTexture->imageData[FrontTexture->widthStep * y + x * 3 + 2]);
        }
    }
    fclose(DS); 
```

我确定这些行是用三个字符填充的，因为我进入文件并查看了行 x*y。尽管如此，在文件的三分之一之后，我的行中只得到一个空白字符。

希望那足够清楚。提前致谢。

编辑：

txt文件的一部分：

```
Z a `
Y ^ a
Z ` a
Y ^ a
Y _ `
Z ` a
Y a `
Z b a
V c a
X b a
V c a
V c a
V c a
V c a
T c a
T c a
S c a
S c a
R b `
R b `
U b `
W a `
W a `
Y a `
Z b a
[ b a
Z b a
[ c b
Y c b
Y c b 
```

这是通过以下方式写入文件的：

```
for (int x=0; x<image->width; x++)
    {
        for (int y=0; y<image->height; y++)
        {
            fprintf(DS, "%c %c %c\n",   FrontTexture->imageData[FrontTexture->widthStep * y + x * 3 + 0], 
                                        FrontTexture->imageData[FrontTexture->widthStep * y + x * 3 + 1], 
                                        FrontTexture->imageData[FrontTexture->widthStep * y + x * 3 + 2]);
        }
    } 
```

编辑2：

这是我的文本文件： [http](http://www.2shared.com/document/SmLbhYzH/Datensatz.html) ://www.2shared.com/document/SmLbhYzH/Datensatz.html 大小：6,15mb

EDIT3 我的 OpenCV 图像的图像数据只是一个字符数组，应该用 b0 g0 r0 b1 g1 r1 ...

定义如下： char *imageData;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:16:35.280

Using a code base very similar to yours I'm able to read the whole file:

```
unsigned char a, b, c;

DS = fopen("/home/mike/win_share/Datensatz.txt", "r");
char line[100];
while(fgets(line, 10, DS) != NULL)
{
    sscanf(line, "%c %c %c", &a, &b, &c);
    printf("%c (%d) %c (%d) %c (%d)\n", a, a, b, b, c, c);
} 
```

I'm seeing you say this `I get only one blank character in my line after a third of the file` and then I'm wondering...

Are you verifying that the characters are read correctly by looking at the file? You know you have non-displayable characters in there correct?

```
x (120) o (111) m (109)
{ (123) t (116) s (115)  <-- I'm guessing this is the last line that looks OK
  (127) u (117) w (119)  <-- (127) DEL char won't show
� (129) z (122) | (124)
� (131)   (127) � (128) 
```

* * *

Second thought... is your array index access correct? I'm not sure what `widthStep` is set to, but it could cause problems:

if `FrontTexture->widthStep == 1`, and `x == 0` and `y == 0`

```
[1 * 0 + 0 * 3 + 0] => [0 + 0 + 0] => [0]
[1 * 0 + 0 * 3 + 1] => [0 + 0 + 1] => [1]
[1 * 0 + 0 * 3 + 2] => [0 + 0 + 2] => [2] 
```

Then on the next iteration: if `FrontTexture->widthStep == 1`, and `x == 0` and `y == 1`

```
[1 * 1 + 0 * 3 + 0] => [1 + 0 + 0] => [1]  // Overwrite the data in imageData[1]
[1 * 1 + 0 * 3 + 1] => [1 + 0 + 1] => [2]  // Overwrite the data in imageData[2]
[1 * 1 + 0 * 3 + 2] => [1 + 0 + 2] => [3] 
```

Have you tried printing out a few steps to verify everything's working as you expect?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T11:35:23.623

您需要检查这些函数的返回值。请参阅[fgets](http://linux.die.net/man/3/fgets)和[sscanf](http://linux.die.net/man/3/sscanf)。这些返回值很重要，会告诉你哪里出了问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T11:29:00.680

利用：

```
sscanf(line, " %c %c %c", ... 
```

注意字符串开头的空格。这将避免将空白读取为有效的第一个字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T11:32:53.480

我们真的需要查看输入文件的样本。然而，有许多问题。

fgets 最多读取 10 个字符，如果一行是 11 个字符，那么第一次调用将读取其中的 10 个，第二个调用将读取剩余的一个。您还应该测试 fgets 返回的内容，并且为了更加安全， sscanf 返回 3 - 它匹配的事物的数量。直接调用 fscanf 可能会更好，避免使用 fgets

```
fscanf(DS, "%c %c %d", ... 
```

因为这样可以更好地处理空间。

# android - 如何在 < 4.0 设备上使用 Actionbarsherlock 在操作栏中强制溢出菜单

> ID：13307214
> 
> 赞同：8
> 
> 时间：2012-11-09T11:23:52.467
> 
> 标签：android, android-actionbar, actionbarsherlock

> **可能重复：**
> [ActionBarSherlock 和 HoloEverywhere - 强制溢出？](https://stackoverflow.com/questions/10509510/actionbarsherlock-holoeverywhere-forcing-overflow)

我正在使用 ActionbarSherLock 库在 Gingerbread 之前的设备上显示 Actionbar。

我想要操作栏上的溢出菜单..我搜索了很多，我知道有硬件菜单按钮的设备然后溢出菜单将不会显示..

我还查看了该解决方案的 ActionbarSherlock 示例演示，但我仍然无法获得解决方案..

我已经为操作栏创建了演示，当在没有菜单按钮的设备上进行仿真时，它将显示溢出菜单，但如果设备有菜单按钮，则溢出菜单将不会显示..

以下是我的配置：-

```
 public class MainActivity extends SherlockActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        setTheme(R.style.Theme_Sherlock);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater=getSupportMenuInflater();
        inflater.inflate(R.menu.activity_main, menu);

//        return true;
        return super.onCreateOptionsMenu(menu);
    }
} 
```

显现 ：-

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="demo.menu.actionbar_using_lib"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

 <uses-feature android:name="android.hardware.touchscreen" android:required="false"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock"
     >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" 
       >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

菜单配置：-

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item android:id="@+id/save"
    android:title="@string/menu_save"
    android:icon="@drawable/ic_action_search"
    android:showAsAction="ifRoom|withText"/>

 <item android:id="@+id/setting"
    android:title="@string/menu_settings"
    android:icon="@drawable/ic_action_search"
    android:showAsAction="ifRoom|withText"/>

  <item android:id="@+id/search"
    android:title="@string/menu_search"
    android:icon="@drawable/ic_action_search"
    android:showAsAction="never"/>

   <item android:id="@+id/refresh"
    android:title="@string/menu_refersh"
    android:icon="@drawable/ic_action_search"
    android:showAsAction="never"/>

    <item android:id="@+id/edit"
    android:title="@string/menu_edit"
    android:icon="@drawable/ic_action_search"
    android:showAsAction="never"/>

     <item android:id="@+id/delete"
    android:title="@string/menu_delete"
    android:icon="@drawable/ic_action_search"
    android:showAsAction="never"/> 
```

我想显示溢出菜单..所以请给我建议..提前谢谢..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-09T11:51:50.697

**注意：**有了这个建议，我**不**建议任何读者使用 ForceOverFlow。这只是列出了使其工作的可能性（而是强制它工作）。各有各的。有些人可能想要它并且也喜欢它。其他人可能不会。

我可能在推测，但也许，这可能对你有用。

您可以认为这是一种*hack*，但我之前使用它来强制在我的一个应用程序中使用溢出菜单并且它可以工作。

```
try {
    ViewConfiguration config = ViewConfiguration.get(MainPage.this);
    Field menuKeyField = ViewConfiguration.class.getDeclaredField("sHasPermanentMenuKey");
    if (menuKeyField != null) {
        menuKeyField.setAccessible(true);
        menuKeyField.setBoolean(config, false);
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

此外，*MisterSmith*的第二个链接有一个解决方案，其中包含我的答案。*Commonsware*已经提出了一些关于强制使用 OverFlow 菜单的想法：[How To Control use of OverFlow Menu in ICS](https://stackoverflow.com/questions/12871850/how-to-control-use-of-overflow-menu-in-ics/12872537#12872537)

EDIT: While typing out this suggestion, you added a comment. To respond to that, I would like to point out that *Jake Wharton* took out .ForceOverFlow themes. I haven't tried it with version **4.2.0**, but with a custom theme, it just might work. If you absolutely must use ForceOverFlow, you might have to use an older version. Read my answer here: [https://stackoverflow.com/a/13180285/450534](https://stackoverflow.com/a/13180285/450534). Something might just make it work.

EDIT 2: As pointed out by the OP in a comment, the Demos Sample APK, in fact, does ForceOverFlow the action bar in `Action Modes`. I have a feeling, after checking the relevant Java files on github, that the answer to that lies perhaps in 3 Java files.

1.  Activity以非常规的方式`ActionModes`添加： [https](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/ActionModes.java) ://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/ActionModes.java （第 53 行）`menu items`
2.  ABS库中的`ActionMode`Java文件：[https ://github.com/JakeWharton/ActionBarSherlock/blob/master/library/src/com/actionbarsherlock/view/ActionMode.java](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/src/com/actionbarsherlock/view/ActionMode.java)
3.  `MenuItem`Java 文件又是 ABS 库的一部分：https [://github.com/JakeWharton/ActionBarSherlock/blob/master/library/src/com/actionbarsherlock/view/MenuItem.java](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/src/com/actionbarsherlock/view/MenuItem.java)

# naming - 像“info”和“manager”这样的通用名称的好命名候选？

> ID：13307217
> 
> 赞同：2
> 
> 时间：2012-11-09T11:24:12.537
> 
> 标签：naming

有些书说我们应该避免使用类似的名字`'XXInfo'`，`'XXManager'`（我忘记了书名），所以我试图找到这些名字的好人选，但我找不到一些好的替代品`'UserInfo'`，`'ProxyManager'`或者类似的东西。

任何人都可以就如何选择更具表现力的名称提供一些好的建议吗？我不是说英语的人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T12:02:05.053

Instead of UserInfo, you could just call your class "User", especially if it is in a module called "Data" or "InfoStore" or something like that. The word "Info" conveys a meaning that can be taken for granted.

It's harder to get rid of the "manager" word - I have tried this myself. (Sometimes one ends up with so many "Managers" that one almost needs a "ManagerManager" to sort them all out.) I think the important thing here, is to think "what does the class really do?"

Is it really a Wrapper, Helper, Retriever, Decider, Organiser, or Mapper?

If none of the above, then perhaps the "manager" class is simply too big, and should be split into separate functions that could be named accordingly. In some cases, you might be able to replace the word "manager" with "boss", especially if it is a manager of other managers objects.

(Answer, because I couldn't fit this long post into the comments)

# json - 使用 gson 和 GsonBuilder() 解析 JSON

> ID：13307222
> 
> 赞同：5
> 
> 时间：2012-11-09T11:24:33.710
> 
> 标签：json, gson

```
String jsons = "{'appname':'application', 'Version':'0.1.0', 'UUID':'300V', 'WWXY':'310W', 'ABCD':'270B', 'YUDE':'280T'}"; 
```

这是我的 json 字符串。我如何将它解析为 GsonBuilder() 以便我将对象取回？我尝试了很少的想法，但没有一个有效。

我还阅读了[https://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-09T11:37:09.377

```
public class YourObject {
   private String appname;
   private String Version;
   private String UUID;
   private String WWXY;
   private String ABCD;
   private String YUDE;
   //getters/setters

} 
```

解析为对象

```
YourObject parsed = new Gson().fromJson(jsons, YourObject.class); 
```

或者

```
YourObject parsed = new GsonBuilder().create().fromJson(jsons, YourObject.class); 
```

小试

```
String jsons = "{'appname':'application', 'Version':'0.1.0', 'UUID':'300V', 'WWXY':'310W', 'ABCD':'270B', 'YUDE':'280T'}";
YourObject parsed = new Gson().fromJson(jsons, YourObject.class); 
```

效果很好

**编辑**
在这种情况下使用`JsonParser`

```
JsonObject object = new JsonParser().parse(jsons).getAsJsonObject();
object.get("appname"); // application 
object.get("Version"); // 0.1.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T11:30:27.640

JSON 对字符串使用双引号 ( `"`)，而不是单引号，因此您拥有的 JSON 无效。这可能是您将其转换为对象时遇到任何问题的原因。

# php - Joomla 2.5 最新文章来自类别链接

> ID：13307223
> 
> 赞同：3
> 
> 时间：2012-11-09T11:24:41.513
> 
> 标签：php, joomla2.5, article

我想创建一个菜单项，其中包含指向给定类别中发布的最新文章的动态链接。

我不想使用默认类别博客链接，因为我希望链接直接指向文章页面并避免重复内容。

希望这是可以理解的，谢谢帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:56:04.527

有两种方法可以做到这一点，一种使用代码，一种没有。

无代码方法涉及用 CCK 扩展替换标准的 Joomla com_content，该扩展具有内置的最新项目功能 - 我知道 K2 肯定有它，可能还有其他的。

另一种方法需要您创建一个新的模型/视图/菜单项，它只提取最新发布的文章。这实际上并不难，因为您基本上可以复制大部分类别模型并使用大部分文章视图来提出您需要的内容。但是，这些更改有点过于复杂，无法在此处发布。

# javascript - 显示/隐藏菜单子链接的内容并在单击下一个新链接时关闭内容

> ID：13307233
> 
> 赞同：0
> 
> 时间：2012-11-09T11:25:30.530
> 
> 标签：javascript, jquery, css

我正在寻找一种解决方案，它也必须在 IE 中工作，我可以隐藏内容，然后当您单击其中一个菜单项时，它会显示内容。但是，在用户单击下一个链接之前，内容不会隐藏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:33:58.790

请检查此链接 [http://jsfiddle.net/varada/YLX9x/](http://jsfiddle.net/varada/YLX9x/)

您可以为此使用 jquery hide() 和 show() 函数。

设要隐藏的div的id为hidden_​​div，菜单项为menu_item，next按钮为next，

导入 jquery.js 并编写 ready 函数如下..

```
$(document).ready(function() {

$('#menu_item').click(function() {
$('#hidden_div').show();
});

$('#next').click(function() {
$('#hidden_div').hide();
});

}); 
```

或者如果您的意思是在他单击菜单项上的下一个链接之前内容可见，请在菜单项中添加一个类名，例如 menu_class 并编写代码

```
$('.menu_class').click(function() {
    $('#hidden_div').hide();
    }); 
```

代替`$('#next').click(function()`

如果您有类似的菜单

```
<ul>
<li class='menu_class'>item 1</li>
<li id='menu_item' >item 2</li>
<li class='menu_class'>item 3</li>
</ul> 
```

和 div

```
<div id='hidde_div' style='display:none'>
content
</div> 
```

然后，如果您单击第 2 项，则会显示 div。如果您单击第 1 项或第 3 项，它将被隐藏。确保您使用的是代码 `$('.menu_class').click(function() {`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:38:23.117

html:

```
<li class="main"><a href="#">Web</a> 
    <ul>
        <li><a href="#" class="a1">Designing</a></li>
        <li><a href="#" class="a2">Development</a></li>
    </ul>
</li>
<li class="main"><a href="#">IT</a>
    <ul>
        <li><a href="#" class="a1">Sales & Service</a></li>
        <li><a href="#" class="a2">CCTV</a></li>
        <li><a href="#" class="a3">DVR</a></li>
    </ul>
</li>
<li class="main"><a href="#">ITES</a>
    <ul>
        <li><a href="#" class="a1">BPO</a></li>
        <li><a href="#" class="a2">Online Portal</a></li>
        <li><a href="#" class="a3">Online Marketing</a></li>
    </ul>
</li>​ 
```

js：

```
$(document).ready(function(){
    $('li  ul:not(:first)').hide();
    $('ul li').click(function(){
        $(this).closest('.main').next().find('ul').show();
        $(this).closest('ul').hide();
    });
});​ 
```

[http://jsfiddle.net/7QheB/](http://jsfiddle.net/7QheB/)

# objective-c - 如何将 UISearchBar（tableview 内部）更改为 UIToolBar 运行时？

> ID：13307234
> 
> 赞同：0
> 
> 时间：2012-11-09T11:25:30.227
> 
> 标签：objective-c, ios

我有一个带有搜索栏的表格视图。我想为用户提供打开或关闭搜索栏的选项。当搜索栏关闭时，该区域应显示 UIToolBar。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:29:49.457

为您的 searchBar 分配一个标签

```
-(IBAction) searchbarOFF: (id) sender {

    [[urTableView viewWithTag:100] removeFromSuperview];

     //Add UIToolBar to your TableView here.
} 
```

# php - 在php中一次显示一条记录

> ID：13307244
> 
> 赞同：0
> 
> 时间：2012-11-09T11:26:14.530
> 
> 标签：php

> **可能重复：**
> [PHP 错误消息“注意：使用未定义的常量”是什么意思？](https://stackoverflow.com/questions/2941169/what-does-the-php-error-message-notice-use-of-undefined-constant-mean)

我试图在同一页面中一次显示一个（记录）问题。我在代码的开头放了一个条件来检查这是否是页面第一次加载，如果是，则显示第一条记录。否则，转到将显示第二条记录的“else”语句。每显示一条记录，计数器就会增加一 ($i++)。此外，我将所有检索到的记录保存在一个数组中，并从该数组中一次读取一个记录。我不知道为什么我在这里收到如下错误：

> (1) 使用未定义的常量 i - 假定为 'i'
> 
> (2) 未定义索引：i

有谁知道如何解决这个问题？

这是我的代码：

```
<?php

 $f_name = $_SESSION['first_name'];
 $l_name = $_SESSION['last_name'];

 $arr_rows;
 $i;

 if (!isset($_POST['next'])) 

 { //if form is not submitted,

  $command2 = "SELECT user_id FROM user_info WHERE user_info.first_name = '$f_name' 
  and user_info.last_name = '$l_name'";

  $command1 = "SELECT * FROM topics, documents WHERE topics.topic_id =documents.topic_id";  

  $i=0; // Counter for the number of documents per topic

  $userid = mysql_query($command2);
  $results = mysql_query($command1);
  $num=mysql_numrows($results);

  //////////////

  $arr_rows = array();
  while( $row = mysql_fetch_array( $results ) )
  $arr_rows[] = $row;

  $arr = mysql_fetch_row($userid);
  $id_user = $arr[0]; 

  echo $f_name;
  $relevancy = "This is the first time to load this page";

  $f1=$arr_rows[i]['topic_name'];
  $f1_topic_description=$arr_rows[i]['topic_descrip'];
  $f1_doc_content=$arr_rows[i]['doc_content'];

  ++$i;

  } 

  else 

  { //otherwise,

    $relevancy = $_POST['RadioGroup1'];

    $f1=$arr_rows[i]['topic_name'];
    $f1_topic_description=$arr_rows[i]['topic_descrip'];
    $f1_doc_content=$arr_rows[i]['doc_content'];

    ++$i;

    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:28:55.577

```
$f1=$arr_rows[i]['topic_name'];
$f1_topic_description=$arr_rows[i]['topic_descrip'];
$f1_doc_content=$arr_rows[i]['doc_content']; 
```

应该

```
$f1=$arr_rows[$i]['topic_name'];
$f1_topic_description=$arr_rows[$i]['topic_descrip'];
$f1_doc_content=$arr_rows[$i]['doc_content']; 
```

您缺少变量“i”上的美元符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:32:39.990

PHP 不会将您的变量存储到下一个请求中。

您可以将计数器信息 ($i) 添加到会话变量、cookie 或请求参数中。否则，您的 $i 将始终从零开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T11:33:07.447

使用“i”在数组中指定索引时，您缺少 $. 例如：

`$f1=$arr_rows[i]['topic_name']; $f1_topic_description=$arr_rows[i]['topic_descrip']; $f1_doc_content=$arr_rows[i]['doc_content'];`

应该读

```
$f1=$arr_rows[$i]['topic_name'];
$f1_topic_description=$arr_rows[$i]['topic_descrip'];
$f1_doc_content=$arr_rows[$i]['doc_content']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T11:28:07.790

你错过了`$`变量名之前的。检查您的代码并替换`i`为`$i`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T11:28:53.603

我认为错误就在这里......替换`i`为`$i`所以你实际上是在调用你的变量

```
$f1=$arr_rows[$i]['topic_name'];
$f1_topic_description=$arr_rows[$i]['topic_descrip'];
$f1_doc_content=$arr_rows[$i]['doc_content']; 
```

# google-maps - 将用户位置标记添加到现有 gmap

> ID：13307245
> 
> 赞同：0
> 
> 时间：2012-11-09T11:26:17.680
> 
> 标签：google-maps, drupal, drupal-7, drupal-gmap

我正在使用 Drupal 7 - 位置，GMap 模块。我有一个在 gmap 中呈现结果的视图。这里一切正常，我得到了所有的标记。现在我需要一个“查找我的位置”按钮，它显示用户当前位置并向现有地图添加标记。Google Map Api V3 始终适用于新创建的地图，我找不到返回当前页面中现有地图的函数。

Gmap 模块提供了一个 JS 函数 - Drupal.gmap.getMap('ur-map-id') 应该返回一个指向给定 id 的地图的指针。但这没有用。

有人可以指导我如何解决这个问题吗？我可以让它与 Google Maps API 一起使用吗？我需要保留原始地图及其所有标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-26T01:35:20.003

这里有一些东西供参考。

```
if (typeof(navigator.geolocation) !== 'undefined') {
  var showUserOnMap = function(position) {
    var map = Drupal.gmap.getMap('gmap-auto1map-gmap0');
    if (typeof(map) !== 'undefined' && map !== false) {
      latitude = position.coords.latitude;
      longitude = position.coords.longitude;
      var marker = {
        latitude: latitude,
        longitude: longitude,
        markername: Drupal.t('You'),
        opts: {
          title: Drupal.t('You')
        }
      }
      marker.opts.position = new google.maps.LatLng(latitude, longitude);
      marker.opts.map = map.map;
      Drupal.gmap.factory.marker(marker.opts);
    }
  };

  // Get the current location
  navigator.geolocation.getCurrentPosition(showUserOnMap);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:51:01.727

我也遇到了这个问题，你可以把这个 jquery 代码放进去，让它实际上以你当前的位置为中心——但没有添加标记。只需将其添加到您的主题中的任何位置，

```
jQuery(document).ready(function() {

jQuery(function($) {
$.extend({
initialize: function () {
var m = Drupal.gmap.getMap('auto1map');
if (m.map && m.markersready) {
$.setCoords();
}
else {
m.bind('markersready', function(data) {
$.setCoords();
});
}
},
setCoords: function () {
navigator.geolocation.getCurrentPosition(function (position) {
var gmap = Drupal.gmap.getMap('auto1map').map;
var lat = position.coords.latitude;
var lng = position.coords.longitude;
gmap.setCenter(new google.maps.LatLng(lat, lng));
gmap.setZoom(13);
});
}
});
$.initialize();
});

}); 
```

现在您可以将地图围绕您的位置居中，现在我需要想办法在该位置放置一个标记。

# php - zend auth 与 joomla 的会话冲突

> ID：13307249
> 
> 赞同：1
> 
> 时间：2012-11-09T11:26:32.500
> 
> 标签：php, zend-framework, joomla

我试图将 zend 中的应用程序构建集成到 joomla 中构建的网站中。

当我尝试设置 zend 的身份验证时，它给了我一个错误“会话已由 session.auto-start 或 session_start() 启动”，因为我正在使用 joomla 的功能登录用户的详细信息

是否可以让 zend 的身份验证与 joomla 的会话并行？

如果没有，那么是否可以在不使用任何 joomla 功能的情况下登录用户信息（我认为这是不可能的）

我如何在我的 zend 应用程序中使用 joomla 已经启动的会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:53:18.137

会话 cookie 的文件名可能有问题。如果您需要单独的会话尝试设置会话选项：

```
Zend_Session::setOptions(array(
    'name'                 => 'ZENDSession',
    'save_path'            => $appRoot . '/session',
    'remember_me_seconds'  => 864000
));

try
{
    Zend_Session::start();
}
catch (Exception $e)
{
    //Exception
} 
```

如果您想针对 Joomla UserDatabase 进行身份验证，请尝试使用 Zend_Auth_Adapter： [http ://www.plainlycode.com/Joomla/Joomla-Authentication-Adapter-for-the-Zend-Framework.html](http://www.plainlycode.com/Joomla/Joomla-Authentication-Adapter-for-the-Zend-Framework.html)

# facebook - Facebook 打开图表视图

> ID：13307252
> 
> 赞同：1
> 
> 时间：2012-11-09T11:26:43.920
> 
> 标签：facebook, facebook-graph-api

有没有办法只使用 facebook API 来获取 Open Graph 对象的视图数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:19:02.720

不可以，[Insights for Open Graph](https://developers.facebook.com/docs/opengraph/insights/)目前只能通过 Insights 仪表板使用，还没有任何 API。

假设 OG 对象可能在您的服务器上，您应该能够使用一些简单的跟踪代码来跟踪该对象的各个视图。

# android - 使用相机作为传感器的 Android 应用 Mini4WD Lap Timer

> ID：13307260
> 
> 赞同：2
> 
> 时间：2012-11-09T11:27:23.980
> 
> 标签：android, timer, camera, calibration

我的摩托罗拉 Defy 中的这个应用程序（Mini4WD Lap Timer）有问题。他们提供了源代码。也许你可以帮助我在我的设备上兼容它 [。https://play.google.com/store /apps/details?id=com.pimentoso.android.laptimer&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5waW1lbnRvc​​28uYW5kcm9pZC5sYXB0aW1lciJd](https://play.google.com/store/apps/details?id=com.pimentoso.android.laptimer&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5waW1lbnRvc28uYW5kcm9pZC5sYXB0aW1lciJd)

问题是校准时，它有库存..计时器左上角的小预览不起作用，只显示黑色..

这是代码

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.pimentoso.android.laptimer" android:versionCode="8"
    android:versionName="1.4.1" android:installLocation="auto">
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" />
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".TimerActivity" android:label="@string/app_name"
            android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".SensitivityDialogActivity"
            android:label="@string/label_sensitivity" android:theme="@android:style/Theme.Dialog" />
    </application>
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.SET_ORIENTATION" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />
</manifest> 
```

**FPSCounter.java**

```
package com.pimentoso.android.laptimer;

import android.util.Log;

public class FPSCounter {
    long startTime = System.nanoTime();
    int frames = 0;

    public void logFrame() {
        frames++;
        if(System.nanoTime() - startTime >= 1000000000) {
            Log.d("FPSCounter", "fps: " + frames);
            frames = 0;
            startTime = System.nanoTime();
        }
    }
} 
```

**SensitivityDialogActivity.java**

```
package com.pimentoso.android.laptimer;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;

public class SensitivityDialogActivity extends Activity implements OnClickListener, OnSeekBarChangeListener
{
    private SeekBar bar;
    private TextView barValue;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sensitivity);
        findViewById(R.id.button_sensitivity_close).setOnClickListener(this);

        LayoutParams params = getWindow().getAttributes();
        params.width = LayoutParams.FILL_PARENT;
        getWindow().setAttributes((android.view.WindowManager.LayoutParams) params);

        String currentValue = getPreferences(MODE_PRIVATE).getString("sensitivity", "15");

        bar = (SeekBar) findViewById(R.id.seekbar_sensitivity);
        bar.setOnSeekBarChangeListener(this);

        barValue = (TextView) findViewById(R.id.seekbar_sensitivity_value);
        barValue.setText(currentValue);

        bar.setProgress(Integer.valueOf(currentValue));

        // settare il valore nel timer a (25-barValue)
        // barra 20 = 5
        // barra 15 = 10
        // barra 10 = 15
        // barra 5 = 20
        // barra 0 = 25
    }

    @Override
    public void onClick(View v)
    {
        String finalValue = barValue.getText().toString();
        getPreferences(MODE_PRIVATE).edit().putString("sensitivity", finalValue).commit();
        TimerActivity.calibrateThreshold = 25 - Integer.valueOf(finalValue);
        this.finish();
    }

    @Override
    public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2)
    {
        String t = String.valueOf(arg1);
        barValue.setText(t);
    }

    @Override
    public void onStartTrackingTouch(SeekBar arg0)
    {
    }

    @Override
    public void onStopTrackingTouch(SeekBar arg0)
    {       
    }
} 
```

**TimerActivity.java**

```
package com.pimentoso.android.laptimer;

import java.io.IOException;
import java.util.ArrayList;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.ImageFormat;
import android.hardware.Camera;
import android.os.Bundle;
import android.os.Handler;
import android.os.SystemClock;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class TimerActivity extends Activity implements SurfaceHolder.Callback, Camera.PreviewCallback, OnClickListener {

    // elementi del layout
    SurfaceView mSurfaceView;
    SurfaceHolder mSurfaceHolder;
    Camera mCamera;

    TextView timerLabel;
    TextView statusLabel;
    TextView lap1Label;
    TextView lap2Label;
    TextView lap3Label;
    TextView lapBestLabel;
    Button startButton;

    // flags
    boolean isPreviewRunning = false;
    boolean isCalibrating = false;
    boolean isCalibrated = false;
    boolean isStarted = false;
    boolean isTimerRunning = false;
    boolean caughtPreviousFrame = false;

    // contatore dei frame per calibrazione
    int frame = 0;

    // offset dei pixel da controllare
    int[] pixelOffset = new int[3];

    // array di calibrazione
    int[][] calibrateRange = new int[3][20];

    // valori finali di calibrazione
    int[] calibrateValue = new int[3];

    // soglia di differenza di luminositÃ  per catchare il frame
    public static int calibrateThreshold = 10;

    // tempo iniziale
    long mStartTime = 0L;

    // millisecondi di ultimo catch
    long mLastCatchTime = 0;

    // tempo del giro migliore
    long bestLap = 0;

    // tempi dei giri
    // long[] laps = new long[3];
    ArrayList<Long> laps = new ArrayList<Long>();

    // contatore dei giri
    int lapCount = 0;

    FPSCounter fps = new FPSCounter();
    Handler mHandler = new Handler();
    StringBuffer timerBuffer;
    StringBuffer lapBuffer;

    private Runnable mUpdateTimeTask = new Runnable() {

        public void run() {

            long millis = SystemClock.uptimeMillis() - mStartTime;
            timerLabel.setText(convertTime(millis));
            mHandler.postAtTime(this, SystemClock.uptimeMillis() + 40);
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        findViewById(R.id.button_start).setOnClickListener(this);
        findViewById(R.id.button_calibrate).setOnClickListener(this);

        mSurfaceView = (SurfaceView) findViewById(R.id.surface_camera);
        mSurfaceHolder = mSurfaceView.getHolder();
        mSurfaceHolder.addCallback(this);
        mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        String threshold = getPreferences(MODE_PRIVATE).getString("sensitivity", "15");
        calibrateThreshold = Integer.valueOf(threshold);

        timerLabel = (TextView) findViewById(R.id.text_timer);
        statusLabel = (TextView) findViewById(R.id.text_status);
        lap1Label = (TextView) findViewById(R.id.text_lap_1);
        lap2Label = (TextView) findViewById(R.id.text_lap_2);
        lap3Label = (TextView) findViewById(R.id.text_lap_3);
        lapBestLabel = (TextView) findViewById(R.id.text_lap_best);
        startButton = (Button) findViewById(R.id.button_start);

        statusLabel.setText(getString(R.string.label_status_init));
        startButton.setEnabled(false);
    }

    @Override
    public void onStart() {

        super.onStart();

        // show help
        if (getPreferences(MODE_PRIVATE).getString("first_time", "1").equals("1")) {
            showAlertBox();
            getPreferences(MODE_PRIVATE).edit().putString("first_time", "0").commit();
        }
    }

    @Override
    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {

    }

    @Override
    public void surfaceCreated(SurfaceHolder arg0) {

        synchronized (this) {

            try {
                mCamera = Camera.open();
            }
            catch (RuntimeException e) {

                // camera service already in use: schianta
                new AlertDialog.Builder(this).setMessage(getString(R.string.error_camera_locked_text)).setTitle("Error").setCancelable(true).setIcon(android.R.drawable.ic_dialog_info).setNeutralButton(android.R.string.ok, new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int whichButton) {

                        TimerActivity.this.finish();
                    }
                }).show();

                return;
            }

            if (mCamera == null) {

                // camera not found: schianta
                new AlertDialog.Builder(this).setMessage(getString(R.string.error_camera_null_text)).setTitle("Error").setCancelable(true).setIcon(android.R.drawable.ic_dialog_info).setNeutralButton(android.R.string.ok, new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int whichButton) {

                        TimerActivity.this.finish();
                    }
                }).show();

                return;
            }

            Camera.Parameters parameters = mCamera.getParameters();

            Camera.Size mCameraSize = parameters.getPreviewSize();
            int bytesPerPixel = ImageFormat.getBitsPerPixel(parameters.getPreviewFormat());

            int bufferSize = (mCameraSize.width * mCameraSize.height * bytesPerPixel) >> 3;

            mCamera.addCallbackBuffer(new byte[bufferSize]);
            mCamera.addCallbackBuffer(new byte[bufferSize]);
            mCamera.addCallbackBuffer(new byte[bufferSize]);

            pixelOffset[0] = (int) (mCameraSize.width / 2) + (mCameraSize.width * (int) (mCameraSize.height * 0.1));
            pixelOffset[1] = (int) (mCameraSize.width / 2) + (mCameraSize.width * (int) (mCameraSize.height * 0.5));
            pixelOffset[2] = (int) (mCameraSize.width / 2) + (mCameraSize.width * (int) (mCameraSize.height * 0.9));

            mCamera.setDisplayOrientation(90);

            try {
                mCamera.setPreviewDisplay(arg0);
            }
            catch (IOException e) {
                Log.e("Camera", "Could not set preview display");
            }

            mCamera.setPreviewCallbackWithBuffer(this);
            mCamera.startPreview();
            isPreviewRunning = true;
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder arg0) {

        synchronized (this) {
            try {
                if (mCamera != null) {
                    mCamera.setPreviewCallback(null);
                    mCamera.stopPreview();
                    isPreviewRunning = false;
                }
            }
            catch (Exception e) {
                Log.e("Camera", e.getMessage());
            }
            finally {
                if (mCamera != null) {
                    mCamera.release();
                }
            }
        }
    }

    @Override
    public void onPreviewFrame(byte[] yuv, Camera arg1) {

        int value0 = (int) yuv[pixelOffset[0]] & 0xFF;
        int value1 = (int) yuv[pixelOffset[1]] & 0xFF;
        int value2 = (int) yuv[pixelOffset[2]] & 0xFF;

        // sto calibrando...
        if (isCalibrating) {
            frame++;

            Log.d("Timer", "Calibrating, " + value0 + ";" + value1 + ";" + value2);

            calibrateRange[0][frame - 1] = value0;
            calibrateRange[1][frame - 1] = value1;
            calibrateRange[2][frame - 1] = value2;

            if (frame >= 20) {
                // finito di calibrare
                isCalibrating = false;
                isCalibrated = true;
                startButton.setEnabled(true);
                statusLabel.setText(getString(R.string.label_status_ready));

                // calcolo la media
                int tot0 = 0, tot1 = 0, tot2 = 0;
                for (int i = 0; i < 20; i++) {
                    tot0 += calibrateRange[0][i];
                    tot1 += calibrateRange[1][i];
                    tot2 += calibrateRange[2][i];
                }

                calibrateValue[0] = tot0 / 20;
                calibrateValue[1] = tot1 / 20;
                calibrateValue[2] = tot2 / 20;

                Log.d("Timer", "Calibrated on [" + calibrateValue[0] + "][" + calibrateValue[1] + "][" + calibrateValue[2] + "]");
            }
        }

        // sono in ascolto di variazioni
        else if (isStarted) {

            // catch del frame
            if (isCalibrated && (value0 < calibrateValue[0] - calibrateThreshold || value0 > calibrateValue[0] + calibrateThreshold || value1 < calibrateValue[1] - calibrateThreshold || value1 > calibrateValue[1] + calibrateThreshold || value2 < calibrateValue[2] - calibrateThreshold || value2 > calibrateValue[2] + calibrateThreshold)) {

                // se ho catchato il frame precedente, ignoro
                if (!caughtPreviousFrame) {

                    Log.d("Timer", "Frame caught!");

                    caughtPreviousFrame = true;

                    if (isTimerRunning) {

                        // calcolo dei lap
                        long catchTime = SystemClock.uptimeMillis();
                        lapCount++;

                        long lapTime = catchTime - mLastCatchTime;
                        laps.add(lapTime);

                        if (lapCount == 1) {
                            bestLap = lapTime;
                        }
                        else if (bestLap > lapTime) {
                            bestLap = lapTime;
                        }

                        printLaps();

                        mLastCatchTime = catchTime;
                    }
                    else {

                        // devo far partire il timer
                        isTimerRunning = true;
                        mStartTime = SystemClock.uptimeMillis();
                        mLastCatchTime = mStartTime;
                        mHandler.removeCallbacks(mUpdateTimeTask);
                        mHandler.postDelayed(mUpdateTimeTask, 50);
                    }
                }
            }
            else {

                caughtPreviousFrame = false;
            }
        }

        mCamera.addCallbackBuffer(yuv);
        fps.logFrame();
    }

    @Override
    public void onClick(View v) {

        switch (v.getId()) {

            case R.id.button_start: {

                if (!isCalibrated || isCalibrating) {

                    // non Ã¨ calibrato
                    break;
                }

                if (isStarted) {

                    // ho stoppato
                    startButton.setText("Start");
                    statusLabel.setText(getString(R.string.label_status_ready));
                    isStarted = false;
                    isTimerRunning = false;
                    mHandler.removeCallbacks(mUpdateTimeTask);
                }
                else {

                    // ho startato
                    startButton.setText("Stop");
                    statusLabel.setText(getString(R.string.label_status_started));
                    timerLabel.setText("0:00:0");
                    isStarted = true;
                    mStartTime = 0L;
                    lapCount = 0;

                    // resetto i laps
                    laps = new ArrayList<Long>();
                    bestLap = 0;

                    printLaps();
                }

                break;
            }
            case R.id.button_calibrate: {

                if (isTimerRunning) {
                    // devo stoppare prima di calibrare
                    break;
                }

                // ho pigiato calibra, devo resettare tutto
                statusLabel.setText(getString(R.string.label_status_calibrating));
                timerLabel.setText("0:00:0");

                frame = 0;
                mStartTime = 0L;
                lapCount = 0;
                isStarted = false;
                isTimerRunning = false;
                isCalibrating = true;
                isCalibrated = false;

                // resetto i laps
                laps = new ArrayList<Long>();
                bestLap = 0;

                printLaps();

                break;
            }
        }
    }

    private String convertTime(long millis) {

        if (millis == 0) {
            return "0:00:0";
        }

        timerBuffer = new StringBuffer();
        int split = ((int) (millis / 100)) % 10;
        int seconds = (int) (millis / 1000);
        int minutes = seconds / 60;
        seconds = seconds % 60;

        if (seconds < 10) {
            timerBuffer.append(minutes).append(":0").append(seconds).append(":").append(split);
            return timerBuffer.toString();
        }
        else {
            timerBuffer.append(minutes).append(":").append(seconds).append(":").append(split);
            return timerBuffer.toString();
        }
    }

    private void printLaps() {

        lapBuffer = new StringBuffer();

        try {
            lapBuffer.append("Lap ").append(lapCount).append(": ").append(convertTime(laps.get(laps.size() - 1)));
        }
        catch (IndexOutOfBoundsException e) {
            lapBuffer.append("Lap ").append(lapCount).append(": ").append(convertTime(0));
        }
        lap1Label.setText(lapBuffer.toString());

        lapBuffer = new StringBuffer();

        if (lapCount > 1) {
            lapBuffer.append("Lap ").append(lapCount - 1);
        }
        else {
            lapBuffer.append("Lap 0");
        }

        try {
            lapBuffer.append(": ").append(convertTime(laps.get(laps.size() - 2)));
        }
        catch (IndexOutOfBoundsException e) {
            lapBuffer.append(": ").append(convertTime(0));
        }
        lap2Label.setText(lapBuffer.toString());

        lapBuffer = new StringBuffer();

        if (lapCount > 2) {
            lapBuffer.append("Lap ").append(lapCount - 2);
        }
        else {
            lapBuffer.append("Lap 0");
        }

        try {
            lapBuffer.append(": ").append(convertTime(laps.get(laps.size() - 3)));
        }
        catch (IndexOutOfBoundsException e) {
            lapBuffer.append(": ").append(convertTime(0));
        }
        lap3Label.setText(lapBuffer.toString());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        super.onCreateOptionsMenu(menu);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {
            case R.id.menu_tutorial: {
                showAlertBox();
                return true;
            }
            case R.id.menu_sensitivity: {
                // devo stoppare tutto
                startButton.setText("Start");
                statusLabel.setText(getString(R.string.label_status_ready));
                isStarted = false;
                isTimerRunning = false;
                mHandler.removeCallbacks(mUpdateTimeTask);

                Intent i = new Intent(this, SensitivityDialogActivity.class);
                startActivity(i);
                return true;
            }
            case R.id.menu_email: {
                if (isStarted || isTimerRunning) {
                    Toast.makeText(this, getString(R.string.error_timer_started), Toast.LENGTH_SHORT).show();
                    return true;
                }
                if (laps == null || laps.size() == 0) {
                    Toast.makeText(this, getString(R.string.error_laps_empty), Toast.LENGTH_SHORT).show();
                    return true;
                }

                String emailBody = lapsToString();

                final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
                emailIntent.setType("plain/text");
                emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, getString(R.string.app_name));
                emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailBody);
                startActivity(Intent.createChooser(emailIntent, getString(R.string.menu_mail_laps)));

                return true;
            }
        }
        return false;
    }

    public void showAlertBox() {

        new AlertDialog.Builder(this).setMessage(getString(R.string.dialog_tutorial_text)).setTitle("Tutorial").setCancelable(true).setIcon(android.R.drawable.ic_dialog_info).setNeutralButton(android.R.string.ok, new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int whichButton) {

            }
        }).show();
    }

    private String lapsToString() {

        StringBuffer s = new StringBuffer();

        s.append("Mini 4WD Android Lap Timer data");
        s.append("\n\n");

        for (int i = 0; i < laps.size(); i++) {
            long lap = laps.get(i);
            s.append("Lap ").append(i + 1).append(": ").append(convertTime(lap)).append("\n");
        }

        s.append("\n");
        s.append("Best lap: " + convertTime(bestLap));

        return s.toString();
    }
} 
```

先感谢您.. ：）

# jquery - 使用数据库 codeigniter 的 JSON RPC 服务

> ID：13307263
> 
> 赞同：0
> 
> 时间：2012-11-09T11:27:51.780
> 
> 标签：jquery, mysql, json, codeigniter, rpc

我的 JSON RPC 服务有问题。我创建了一个类并将其放在应用程序文件夹的输出中（我将它放在根目录的服务文件夹中）。这个服务是我通过 jQuery 调用并使用 Ajax 来响应数据库结果的类。我如何访问放在 application/config/database.php 中的数据库文件你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:36:27.497

如果尚未加载数据库，请加载它：

```
$this->load->database(); 
```

然后调用配置项：

```
$db['default']['hostname'];
$db['default']['username'];
//etc 
```

* * *

更新

如果您希望在 codeigniter 应用程序之外获取这些变量，请定义`BASEPATH`并包含该文件：

```
define('BASEPATH','');
include('/full/path/to/codeigniter/application/config/database.php'); 
```

然后就可以调用如上图的配置项了。

# wpf - 将 WPF ComboBox 绑定到字典 >

> ID：13307272
> 
> 赞同：1
> 
> 时间：2012-11-09T11:28:27.700
> 
> 标签：wpf, binding, dictionary, combobox

在我的 ViewModel 中，我有一个可观察字符串集合的字典，声明如下。

```
public Dictionary<string, ObservableCollection<string>> NamePartsDict { get; set; } 
```

我想在我的用户界面中将 Dictionary 绑定到 ComboBoxes，这样每个 ComboBox 都可以“选择”要绑定到的集合。

所以在我的 XAML 中，我想使用：

```
<ComboBox x:Name="comboBox" IsEditable="True"
    ItemsSource="{Binding CurrentLibrary.NamePartsDict[Year]}" Margin="80,0,0.871,0"></ComboBox> 
```

我希望将其绑定到由键“Year”索引的集合，并使用存储在集合中的字符串填充组合框。

但是，此 XAML 会产生一个空的 ComboBox。

我已经验证可以绑定字典本身。下面的 XAML 使用每个键、值对的字符串表示形式填充组合框。

```
<ComboBox x:Name="comboBox" IsEditable="True"
    ItemsSource="{Binding CurrentLibrary.NamePartsDict}" Margin="80,0,0.871,0"></ComboBox> 
```

从字典中获取值时，我的绑定路径中有什么错误吗？还是我正在尝试做一些不可能的事情（在这种情况下，我必须找到另一种方法！）？

非常感谢任何帮助！

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:15:12.827

我通过使用转换器解决了这个问题：

```
/// <summary>
/// Returns a 
/// </summary>
public class DomainValueConverter : IValueConverter
{
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        ObservableCollection<DomainValue> retVal = null;
        DomainDefinitionCollection dds = value as DomainDefinitionCollection;
        if (dds != null)
        {
            retVal = dds[parameter.ToString()];
        }
        return retVal;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
}

<controls:ComboBox VerticalAlignment="Center"
        DisplayMemberPath="Name"
        SelectedValuePath="Value"
        SelectedValue="{Binding ChildClientEntity.EditableEntity.EditableAttributes.TeamPosition, Mode=TwoWay}"
        ItemsSource="{Binding ChildClientEntity.Domains, Converter={StaticResource DomainValueConverter}, ConverterParameter=SiteVisitTeamPosition}" /> 
```

其中 ConverterParameter 是字典 Domains 的键。

```
public Dictionary<string, ObservableCollection<DomainValue>> Domains { get; private set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:28:07.073

您应该在这里使用数据模板：http: [//www.codeproject.com/Articles/47923/Using-a-different-DataTemple-when-a-WPF-ComboBox-i](http://www.codeproject.com/Articles/47923/Using-a-different-DataTemple-when-a-WPF-ComboBox-i)

# php - 用字符串加密IV并解密它？

> ID：13307273
> 
> 赞同：0
> 
> 时间：2012-11-09T11:28:31.043
> 
> 标签：php, encryption, cryptography

今晚我几乎完成了关于基本密码学的速成课程，我想我不想清楚地发送 IV，所以我用字符串加密它。

```
$iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
$iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);

$encrypt = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key1, $string, MCRYPT_MODE_CBC, $iv);
$string = $iv.$encrypt;
$encrypt = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key2, $string, MCRYPT_MODE_ECB);

$return = urlencode(base64_encode($encrypt)); 
```

并解密我有这个，但它不工作

```
$encrypted = base64_decode(urldecode($_GET['password']));
$encrypted = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key2, $encrypted, MCRYPT_MODE_ECB);

$iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);

$iv = mb_strcut($encrypted, 0, $iv_size);
$password = mb_strcut($encrypted, $iv_size);

$password = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key1, $password, MCRYPT_MODE_CBC, $iv); 
```

谁能看到我的代码的问题并向我解释我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T12:24:56.707

您不需要加密您的 IV，以明文形式发送它是安全的。通常它被添加到密文之前。如果分析 CBC 模式的结构，可以看到 IV 只影响第一个 cypher 块。第二个密码块的“IV”是第一个密码块，第三个密码块的“IV”是第二个密码块。任何攻击者都已经知道每个密码块，因此他们已经知道大部分“IV”。

CBC模式的安全性在于密钥，而且只在于密钥。拥有密文和 IV 的攻击者无法恢复密钥，因此没有必要做额外的工作来加密 IV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:03:00.133

我相信你需要写：

```
$encrypted = base64_decode(urldecode($_GET['password'])); 
```

而不是有什么错误的解密顺序。

# java - Spring Integration - url-variable 在 http:outbound-gateway 中不起作用

> ID：13307281
> 
> 赞同：0
> 
> 时间：2012-11-09T11:29:02.440
> 
> 标签：java, spring, spring-integration

为了根据消息头向动态 url 发送 http 请求...

我正在尝试从 Message 标头中设置 url 值，如下所示：

```
 <int-http:outbound-gateway id="httpOutboundGateway" request-channel="fromMyQueue" 
    url="{outboundGatewayUrl}" reply-channel="nullChannel" 
    http-method="POST" expected-response-type="java.lang.String" charset="UTF-8">
<int-http:uri-variable name="outboundGatewayUrl" expression="headers['X-CUSTOM-HTTP-REQUEST-URL']" /> 
```

但这不起作用。
显然`{outboundGatewayUrl}`价值根本没有被取代。
如果我`{outboundGatewayUrl}`用实际的 URL 替换它，这将有效。

**错误信息：**

```
Caused by:
org.springframework.integration.MessageHandlingException: HTTP request execution failed for URI [{outboundGatewayUrl}]...

Caused by:<br> java.lang.IllegalArgumentException: URI is not absolute
    at java.net.URI.toURL(URI.java:1080)
    at org.springframework.http.client.SimpleClientHttpRequestFactory.createRequest(SimpleClientHttpRequestFactory.java:109) 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:00:28.483

我认为您在您之前缺少一个`$`标志`{outboundGatewayUrl}`，因此它没有被 SEL 扩展。错误消息中也建议了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:38:05.210

看起来消息中不存在标头 X-CUSTOM-HTTP-REQUEST-URL。

如果表达式返回 null（即，如果标头不存在），您将收到该错误（URI 不是绝对的）。

我刚刚进行了一个测试，它对我来说很好，有一个合适的标题；如果你认为标题是正确的，你应该分解问题；例如，首先使用文字表达式...

```
<int-http:uri-variable name="outboundGatewayUrl" expression="'http://foo/bar'" /> 
```

错误消息可能有点误导：

```
Caused by:
org.springframework.integration.MessageHandlingException: HTTP request execution failed    for URI [{outboundGatewayUrl}]... 
```

因为它暗示 url 没有被扩展。问题是扩展是在 RestTemplate 内部完成的，并且适配器无权访问它。

# android - Android自定义画笔图案/图像

> ID：13307282
> 
> 赞同：8
> 
> 时间：2012-11-09T11:29:05.310
> 
> 标签：android, design-patterns, drawing, paint, brush

我有一个 8x8 图像。（位图 - 可以更改）

我想要做的是能够绘制一个形状，给定 a`Path`和`Paint`对象到我的`SurfaceView`.

目前我所能做的就是用纯色填充形状。我怎样才能用图案画出来。

![例子](../Images/866e3c5672fbdf9bb3013cf942181745.png)

在图像中，您可以看到画笔图案（十字）。它可以是任何东西，从十字架到甜甜圈或精灵。

我将如何绘制这种图案背景。

我最终也想给它涂上颜色。

到目前为止，我的理论是创建一个形状的剪辑区域，然后平铺位图直到覆盖该区域，但这在处理中是极端的过度杀伤力。听起来也不理想。

在着色方面，我可以将画笔编辑为 alpha，用背景颜色填充，然后在顶部绘制图像。真正的问题是这种模式的平铺。

我发现了一些类似性质的问题，都没有答案，和/或不适用于我的情况。（在视图等上使用 xmls）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-09T11:49:27.420

你检查过这个[博客](http://www.41post.com/4794/programming/android-rendering-a-path-with-a-bitmap-fill)吗？它使用[BitmapShader](http://developer.android.com/reference/android/graphics/BitmapShader.html)

例子：

```
 //Initialize the bitmap object by loading an image from the resources folder  
    fillBMP = BitmapFactory.decodeResource(m_context.getResources(), R.drawable.cross);  
    //Initialize the BitmapShader with the Bitmap object and set the texture tile mode  
    fillBMPshader = new BitmapShader(fillBMP, Shader.TileMode.REPEAT, Shader.TileMode.REPEAT);  

    fillPaint.setStyle(Paint.Style.FILL);  
    //Assign the 'fillBMPshader' to this paint  
    fillPaint.setShader(fillBMPshader);  

    //Draw the fill of any shape you want, using the paint object.
    canvas.drawCircle(posX, posY, 100, fillPaint); 
```

# backbone.js - 请求的超级简单的最小骨干脚本

> ID：13307291
> 
> 赞同：1
> 
> 时间：2012-11-09T11:29:51.590
> 
> 标签：backbone.js

寻找让 Backbone 工作的绝对最小脚本。尝试将各种教程和示例拼凑在一起，但在让视图工作时遇到问题。没什么特别的，我现在就在浏览器中获取原始 json。只是一个基本的骨架，可以帮助连接点并在此基础上进行构建。我尝试了以下各种变化：

```
(function ($) {

    var model = Backbone.Model.extend({
        idAttribute: 'custId'
    });

    var collection = Backbone.Collection.extend({
        initialize: function(){
        },
        model: model,
        url: '/cust'
    });

    var view = Backbone.View.extend({
        initialize: function(){
            _.bindAll(this, 'render'); // fixes loss of context for 'this' within methods
            this.collection.bind("reset", this.render);

            this.render();
        },
        el: $('#content'),
        template: Handlebars.compile($("#contentTemplate").html()),
        render: function(){
            $(this.el).html( this.template(this.model.toJSON()));
        },
        tagName: "li"
    });

    var router = Backbone.Router.extend({
        initialize: function(){
            var newCollection = new collection;
            newCollection.fetch();
        },
        route: {
            "": "home"
        },
        home: function(){
            this.view = new view({collection: newCollection});
            $('#content').html(this.view.el);
        }
    });

    var app = new router();
}(jQuery)) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:15:45.300

您在滥用该`el`属性。`$('#content').html(this.view.el)`将导致复制`$('#content')`自身内部的元素（因为 view.el 等于`$('#content')`）。

您应该尝试`el`从视图对象中删除该属性并让它自行生成。然后`$('#content').html(this.view.el);`应该工作。

另一个可能的问题是您将整个集合呈现在一个`li`元素中 - 这就是您想要的吗？最好的方法是让集合中的每个模型代表一个`li`标签，而集合代表一个`ul`标签。

其他问题：

*   元素正在接收集合，`view`但您正在尝试渲染模型
*   在路由器中，`newCollection`在 home 方法中无法访问
*   你没有打电话`Backbone.history.start()`

这是我将如何重写代码：

```
var model = Backbone.Model.extend({
    idAttribute: 'custId'
});

var model_view = Backbone.View.extend({
    template: Handlebars.compile($("#modelTemplate").html()),
    tagName: 'li',
    initialize: function() {
        _.bindAll(this, 'render');
        this.render();
        this.on('change',this.render);
    },
    render: function() {
        $(this.el).html( this.template(this.model.toJSON()) );
        return this;
    }
});

var collection = Backbone.Collection.extend({
    initialize: function(){
    },
    model: model,
    url: '/cust'
});

var collection_view = Backbone.View.extend({
    tagName: "ul",
    initialize: function(){
        _.bindAll(this, 'render','renderModels');
        this.render();
        this.renderModels();
        this.collection.bind("reset", this.render);
        this.collection.bind("reset", this.renderModels);
    },
    render: function(){
        // just create the 'ul' tag; we will populate it with model view elements; a collection template is no longer needed
        return this;
    },
    renderModels: function() {
        this.collection.each(function(obj){
            var view = new model_view({
                model: obj
            });
            $(this.el).append(view.el);
        },this);
    }
});

var router = Backbone.Router.extend({
    initialize: function(){
        this.newCollection = new collection();
        this.newCollection.fetch();
    },
    route: {
        "": "home"
    },
    home: function(){
        this.view = new collection_view({collection: this.newCollection});
        $('#content').html(this.view.el); // #content should not be a 'ul' tag, the 'ul' is generated by the collection_view
    }
});

var app = new router();
Backbone.history.start(); 
```

确保相应地更新您的模板。

请原谅可能的错误，我无法测试代码，但我相信它指出了您应该使用的逻辑。

干杯!

# sql-server-2008 - 如果 Column1 为空或 NULL，则选择 Column2

> ID：13307293
> 
> 赞同：2
> 
> 时间：2012-11-09T11:29:54.627
> 
> 标签：sql-server-2008

如果 Column1 为空或 NULL，SQL Server 中是否有任何方法或函数来选择 Column2？

```
SELECT IsEmpty(Column1,Column2) FROM Table 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:33:19.493

```
SELECT CASE WHEN Column1 <> '' THEN Column1 ELSE Column2 END 
```

（`Column1 <> ''`也不评估到`true`什么时候`NULL`）

或者

```
SELECT COALESCE(NULLIF(Column1,''),Column2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:31:13.433

```
SELECT CASE WHEN ISNULL(Column1,'')='' THEN Column2 ELSE Column1 END FROM Table 
```

`ISNULL(Column1,Column2)``Column2`如果`Column1`is将返回`NULL`。如果`Column1`是一个空字符串，它将返回`Column1`. 这就是为什么您必须使用上面的 case 语句对其进行测试的原因。

# c# - Windows 8 通过代码添加附件

> ID：13307298
> 
> 赞同：1
> 
> 时间：2012-11-09T11:30:11.417
> 
> 标签：c#, windows-8

`emailcomposetask`我在使用in添加附件时遇到问题，`wp7`因为它不支持它。他们有`fixed this in windows 8`吗？如果是，那么如何`via the code`在 Windows 8 商店应用程序中添加附件？

从我从[这里](http://mobile.dzone.com/articles/windows-8-metro-app-sending)学到的东西，我想我们做不到。但我想确定一下，有人做到了吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:26:07.243

是的，您不能通过 Windows 应用商店应用程序中的代码将文件附加到邮件。您需要为此任务使用共享，如下所述：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/hh871371.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh871371.aspx)。

# javascript - jQuery stop() 是否适用于自定义函数？

> ID：13307301
> 
> 赞同：0
> 
> 时间：2012-11-09T11:30:15.953
> 
> 标签：javascript, jquery

我为三张图片分别制作了工具提示。我想在定时间隔内显示工具提示，比如第一个工具提示显示 2 秒，第二个间隔显示第二个工具提示，依此类推。

例如，可以使用此功能完成

```
function cycle(id) {
    var nextId = (id == "block1") ? "block2": "block1";
    $("#" + id)
        .delay(shortIntervalTime)
        .fadeIn(500)
        .delay(longIntervalTime)
        .fadeOut(500, function() {cycle(nextId)});
} 
```

现在我想要的是在每个图像上发生鼠标悬停动作时停止循环功能并显示相应的工具提示。当鼠标再次离开时，循环功能再次触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:50:09.363

如果我正确理解一切，请尝试此代码。如果您将图像悬停，Tt 将停止该过程，如果您离开该图像，则继续。如果您像 jquery 的 fadeOut()、slideIn()、... 函数那样实现自定义函数，则 stop() 函数将适用于自定义函数。

```
 $('#' + id)
.fadeIn(500, function () {
   var img = $(this).find('img'),
       self = $(this),
       fadeOut = true;

   img.hover(function () {
                fadeOut = false;                    
            }, 
            function () {
                window.setTimeout(function () {
                    self.fadeOut(500);
                }, 2000);
            }
      );

    window.setTimeout(function () {
        if (fadeOut === false) {
            return;
        }
        self.fadeOut(500);
    }, 2000);
});​ 
```

# git - git中的硬合并

> ID：13307303
> 
> 赞同：2
> 
> 时间：2012-11-09T11:30:26.580
> 
> 标签：git, merge, branch

我想将分支`A`与`master`分支合并，以便在发生任何冲突分支的情况下`A`覆盖该`master`分支。

基本上我想通过分支替换主分支`A`

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T11:33:07.133

你可以试试：

```
git checkout master
git merge -Xtheirs branchA 
```

（如 " 中所述，[`git merge -s ours`“<code>their”</a>" 怎么样：
这将避免`merge -ours`from `master`to `branchA`，然后是`branchA`“`master`如何](https://stackoverflow.com/questions/173919/git-merge-s-ours-what-about-their)[从另一个分支完全替换 git 中的 master 分支？](https://stackoverflow.com/questions/2862590/how-to-replace-master-branch-in-git-entirely-from-another-branch) ")

您还可以在“ [git 命令中使用各种其他选项，使一个分支像另一个分支一样](https://stackoverflow.com/questions/4911794/git-command-for-making-one-branch-like-another/4912267#4912267)”

正如“ [Git：在自动选择用分支覆盖主文件时合并到主文件](https://stackoverflow.com/a/3364616/6309)”中所述，重置也可以完全*替换* `master`为`branchA`.

# ruby-on-rails - 看看一个人在字母表中是否在另一个之前，ruby，rails

> ID：13307306
> 
> 赞同：0
> 
> 时间：2012-11-09T11:30:28.787
> 
> 标签：ruby-on-rails, ruby, postgresql

我正在为会员数据库做一个应用程序。

每个人都可能有一个伴侣。在显示列表时，我只想为每个家庭设置一行，所以目前我正在比较名字，如果该人的名字排在第二位，则不显示该行。像这样

```
person.first_name != [person.first_name, person.partner.first_name].sort[0] 
```

这意味着每个家庭只显示一次，而不是两次 - 每个合作伙伴一次。

我正在视图中执行此操作。

必须有更好的方法来做到这一点，如果我能在数据库级别做到这一点，那就太好了。如果这有所作为，我正在使用 postgresql。

编辑

* * *

抱歉，如果不清楚。

假设第 1 个人的名字为“Edward”，第 2 个人的名字为“Fay”。爱德华和费伊结婚了。

我只想在我的列表中显示一次 - 我希望一行看起来像这样

```
Surname     First name    Address    etc
Mysurname   Edward        ....
            Fay 
```

我不想先用 Fay 再次显示它，因为我在人员列表中同时拥有 Fay 和 Edward，所以我在问题的第一部分使用 ruby​​ 来检查我是否应该显示该行 - 它比较了他们名字，并且仅当该人的名字在他/她的伴侣的名字之前时才执行该行。

这是我的人模型的相关部分

```
class Person < ActiveRecord::Base

  has_one :relationship_link,  :foreign_key => :person_id, :dependent => :destroy, :include => :partner
  has_one :partner, :through => :relationship_link, :source => :person_b, :class_name => "Person" 
```

我希望这更清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:19:15.293

对于这种情况，我将创建一个数据结构（哈希）来存储给定特定姓氏的人员实例。像这样的东西：

```
def build_surnames_hash(people_array)
  surnames_hash = {}
  people_array.each do |person|
    last_name = person.last_name
    surnames_hash[last_name] ||= []
    surnames_hash[last_name] << person
  end
  surnames_hash
end 
```

这样，您可以遍历哈希并使用存储为哈希键的姓氏显示人员：

```
surnames_hash = build_surnames_hash(Person.all)

surnames_hash.each do |surname, person_instances_array|
  # display the surname once
  # iterate over person_instances_array displaying their properties
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:40:28.470

您需要使用`DISTINCT ON`或`GROUP BY`。在 postgres 中，您需要小心按您选择的所有内容进行分组。如果您只需要获取姓氏即可`select("DISTINCT ON(last_name) last_name").pluck("last_name")`。不过，您只会得到一组姓氏。

如果您按表中的所有其他字段排序，也许您可​​以获得记录，如下所示：

```
select("DISTINCT ON(people.last_name) people.*").order("people.last_name ASC, people.first_name ASC, people.field2 DESC, people.field3 ASC...") 
```

您需要按**每个**属性排序，这样结果才不会模棱两可。

# html - 在像 Newser.com 这样的图像上显示文本（例如，深色背景）

> ID：13307308
> 
> 赞同：0
> 
> 时间：2012-11-09T11:30:39.400
> 
> 标签：html

我想像 Newser.com 那样在图像上显示文本。这是一个示例： ![http://img854.imageshack.us/img854/8506/newser.jpg](../Images/2281fca7d9d2e60642013887c845539d.png)

乍一看，这似乎很简单。但事实证明，这对我来说非常具有挑战性。

解决方案可能在于 DIV 和 SPAN 的某种组合（可能 span 嵌套在块 DIV 中......？）

想法？

（注 1：注意每个文本跨度如何具有唯一长度的背景 - 例如直接在文本下方）

（注2：暂时不用担心不透明度的值。我基本上只是想做4个黑色文本块（如jpg所示。））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:53:43.467

Newser.com 似乎会生成带有文本的图像，但您可以仅使用 html 和 css 来完成此操作。

下面是一个例子：

[http://codepen.io/anon/pen/jDdAb](http://codepen.io/anon/pen/jDdAb)

# jquery - solr 在 IE 中不起作用

> ID：13307309
> 
> 赞同：0
> 
> 时间：2012-11-09T11:30:46.733
> 
> 标签：jquery, solr

我正在尝试将数据保存在 mysql 中。通过调用 solr url。它适用于除 IE 之外的所有浏览器。

**我的代码**

```
dataTable = "<ol>";
                //Check the data is present form the searching element.
                if (data.response.docs.length != 0) {
                    $.each(data.response.docs, function (key, value) {
                        dataTable += "<li><a href=\"" + value.id + "\" onmousedown=\"javascript:StoreClickedURL(" + userId + ",'" + encodeURI(userInput) + "','" + value.id + "')\">" + value.id + "</a></li>";
                    });

                    //Check whether persons there or not.
                    dataTable += "</ol>";
                } 
```

**功能**

```
function StoreClickedURL(userId, query, event) {
var urlsearch = "http://192.168.10.113:8080/collective-intellegence/StoreClicks?userid=" + userId + "&query=" + query;
$.ajax({
type: 'POST',
url: urlsearch,
dataType: 'json',
success: function (data) {
}
});
} 
```

这在所有浏览器中都可以正常工作，但在 IE 中不起作用（在 IE7、IE8 和 IE9 中测试）。

它在任何浏览器中都没有显示任何错误。我已经使用 Firebug 进行了测试。

当我单击一个链接时，它会转到该函数（通过在函数中放置警报进行测试），但不会将数据存储在数据库中。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:45:48.483

IE 不支持跨域 ajax 调用，我们在下面的代码中执行此操作。

```
if (window.XDomainRequest) // Check whether the browser supports XDR. 
{
    xdr = new XDomainRequest(); // Create a new XDR object.
    if (xdr) {
        xdr.open("post", urlSearch);
        xdr.send();
    }
    else {
        alert('Server Error!! Try Later.');
    }
}
else {
    //Inserted data in the database.
    $.ajax({
        type: 'POST',
        url: urlSearch,
        dataType: 'json',
        success: function (data) {
        }
    });
} 
```

# java - 将一个值与 mongoDB 中的下一个值进行比较

> ID：13307310
> 
> 赞同：0
> 
> 时间：2012-11-09T11:30:46.467
> 
> 标签：java, mongodb, database

我的数据库中有这些文件

`{ "_id" : { "$oid" : "50906d7fa3c412bb040eb579"} , "student_id" : 0 , "type" : "homework" , "score" : 14.8504576811645}
{ "_id" : { "$oid" : "50906d7fa3c412bb040eb57a"} , "student_id" : 0 , "type" : "homework" , "score" : 63.98402553675503}
{ "_id" : { "$oid" : "50906d7fa3c412bb040eb57d"} , "student_id" : 1 , "type" : "homework" , "score" : 21.33260810416115}
{ "_id" : { "$oid" : "50906d7fa3c412bb040eb57e"} , "student_id" : 1 , "type" : "homework" , "score" : 44.31667452616328}
{ "_id" : { "$oid" : "50906d7fa3c412bb040eb581"} , "student_id" : 2 , "type" : "homework" , "score" : 60.9750047106029}
{ "_id" : { "$oid" : "50906d7fa3c412bb040eb582"} , "student_id" : 2 , "type" : "homework" , "score" : 97.75889721343528}
{ "_id" : { "$oid" : "50906d7fa3c412bb040eb585"} , "student_id" : 3 , "type" : "homework" , "score" : 50.81577033538815}
{ "_id" : { "$oid" : "50906d7fa3c412bb040eb586"} , "student_id" : 3 , "type" : "homework" , "score" : 92.71871597581605}
{ "_id" : { "$oid" : "50906d7fa3c412bb040eb589"} , "student_id" : 4 , "type" : "homework" , "score" : 5.244452510818443}
{ "_id" : { "$oid" : "50906d7fa3c412bb040eb58a"} , "student_id" : 4 , "type" : "homework" , "score" : 28.656451042441}
{ "_id" : { "$oid" : "50906d7fa3c412bb040eb58d"} , "student_id" : 5 , "type" : "homework" , "score" : 23.29430953857654}
{ "_id" : { "$oid" : "50906d7fa3c412bb040eb58e"} , "student_id" : 5 , "type" : "homework" , "score" : 41.21853026961924}
{ "_id" : { "$oid" : "50906d7fa3c412bb040eb591"} , "student_id" : 6 , "type" : "homework" , "score" : 81.23822046161325}
{ "_id" : { "$oid" : "50906d7fa3c412bb040eb592"} , "student_id" : 6 , "type" : "homework" , "score" : 89.72700715074382}`

where`student_id`代表每个学生，每个学生做了两个作业，总共得分为 100，所以，我想比较两个作业的分数并删除该学生的较低分数

到目前为止，这是我的代码

`try {
Mongo mongo = new Mongo("localhost");

```
 DB db = mongo.getDB("students");   

        DBCollection collection = db.getCollection("grades");  

        DBCursor cursor = collection.find();  
        BasicDBObject query = new BasicDBObject();  
        query.put("type", "homework");  
        cursor = collection.find(query).sort(new BasicDBObject("student_id", 1));  
        System.out.println(cursor.count());  

        try{  
            while(cursor.hasNext()){  

                System.out.println(cursor.next());  

            }  
        }finally{  
            cursor.close();  
        }  

    } catch (UnknownHostException e) {  

        e.printStackTrace();  
    }` 
```

# c - 为什么将指针作为参数传递给函数

> ID：13307316
> 
> 赞同：2
> 
> 时间：2012-11-09T11:31:18.010
> 
> 标签：c

你为什么要这样做：

```
void f(Struct** struct)
{
   ...
} 
```

如果我想对结构列表进行操作，传递 a 还不够`Struct*`吗？这样我可以`struct++`解决下一个结构，还是我在这里很困惑？:)

如果我想以某种方式重新排列结构列表，它不是很有用吗？但是，如果我只是阅读，我不明白这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:34:04.707

这取决于您的数据结构是什么样的。假设这`p`是一个以空结尾的指针数组`struct s`，您可以使用这样的循环运行它：

```
void f(struct s **p)
{
    while (*p != NULL) {
        /* some stuff */
        (*p)++;
    }
} 
```

通常，仅当您尝试修改指针本身时，使用指向指针的指针才有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T13:51:37.290

这种参数有很多用途......

一个已经提到的并且很常见的是允许调用者使用函数来修改指针。这里最明显的情况是在获取一些数据时......

```
void getData( void** pData, int* size )
{
    *pData = getMyDataPointer();
    *size = getMyDataSize();
} 
```

另一种选择是，也许额外的间接级别允许列表以某种方式运行？例如，通过使用索引来引用特定元素，它们可以被分配和重新分配，而不会有悬空指针的风险。

另一种选择是列表非常大并且存在于碎片内存中，或者被快速访问，因此列表实际上是几个组合在一起的较小列表。这种技术也可以用来“懒惰地”分配巨大的数组，例如为十亿个元素的数组提供一个接口，然后根据需要分配 100k 的块，因为它们是用指向整体的 struct** 读取/写入的东西，每个 struct* 要么为空，要么指向 100k 结构......

老实说，上下文非常重要......三重指针作为函数参数也有很多用途，遵循类似的推理。（例如，将我提到的第一件事与第二件事结合起来，或者将第二件事与第三件事结合起来，等等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T11:38:35.093

如果你想修改调用者中传递给这个函数的指针，你通常会这样做。

因为，在 C 中一切都是按值传递的，传递`struct*`只会传递指针的副本，不会修改调用者中的指针。**[此C-FAQ](http://c-faq.com/ptrs/passptrinit.html)**`struct *`中解释了为什么通过。

如果您不打算修改调用者中的指针，则无需传递`struct **`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T11:35:01.313

API 的创建者可能认为，如果每个函数的第一个参数都相同，则参数列表会更容易记住。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T11:36:09.460

您是对的，除非您的函数旨在修改传入的指针，否则没有理由将指针传递给指针。在访问`struct`s 数组的情况下，单级间接绝对足够了。

# android - 当我尝试编辑活动时，Google 日历崩溃了

> ID：13307318
> 
> 赞同：0
> 
> 时间：2012-11-09T11:31:26.840
> 
> 标签：android, google-calendar-api

我有一个奇怪的问题，我不知道如何解决这个问题。我已经测试了很多东西，但不知道是什么问题。

好的，我已经创建了简单的程序来将事件插入谷歌日历设备，这将成功插入谷歌日历。

当我尝试从谷歌日历编辑或点击编辑菜单谷歌日历将崩溃。我在许多设备上进行了测试，所有设备日历的问题都是一样的。

这是我的代码

```
ContentResolver cr = getContentResolver();
        ContentValues values = new ContentValues();
        Uri EVENTS_URI = null;

        EVENTS_URI = Uri.parse("content://com.android.calendar/events");

        long time = System.currentTimeMillis();

        values.put("calendar_id", 1);
        values.put("title", "event.eventName");
        values.put("allDay", 0);
        values.put("dtstart", time); 
        values.put("dtend", time + 1000 * 60 * 60 * 2);
        values.put("description", "description");
        values.put("visibility", 0);
        values.put("transparency", 0);
        values.put("hasAttendeeData", 0);
        values.put("hasAlarm", 1);
        values.put("eventLocation", "location");
        cr.insert(EVENTS_URI, values); 
```

我无法检测或推断为什么仅在我插入的事件中发生这种情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:11:37.073

如果你考虑这样做，你可以这样做：

```
Intent intent = new Intent(Intent.ACTION_EDIT);
int sdk = android.os.Build.VERSION.SDK_INT;
if(sdk < ICE_CREAM_BUILD_ID) {
    // all SDK below ice cream sandwich
    intent.setType("vnd.android.cursor.item/event");
    intent.putExtra("beginTime", startTime);
    intent.putExtra("endTime", endTime);
    intent.putExtra("title", title);
    intent.putExtra("description", description);
    intent.putExtra("eventLocation", location);
    intent.putExtra("allDay", isAllDay);

//  intent.putExtra("rrule", "FREQ=YEARLY");
} else {
    // ice cream sandwich and above
    intent.setType("vnd.android.cursor.item/event");
    intent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, startTime);
    intent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime);
    intent.putExtra(Events.TITLE, title);
    intent.putExtra(Events.ACCESS_LEVEL, Events.ACCESS_PRIVATE);
    intent.putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY , isAllDay);
    intent.putExtra(Events.DESCRIPTION, description);
    intent.putExtra(Events.EVENT_LOCATION, location);

//  intent.putExtra(Events.RRULE, "FREQ=DAILY;COUNT=10") 
}
try {
    context.startActivity(intent);
    return true;
} catch(Exception e) {
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T09:38:46.837

在对插入事件进行分析并在 logcat 中搜索日历后，我发现当我尝试编辑从我的应用程序插入的事件时，我的日历被强制关闭。

原因是我没有为我的事件设置 TimeZone 字段值，并且在日历中它将在编辑时获得空指针，这就是它强制关闭的原因

我还搜索了适用于 android 的 logcat 应用程序，我发现了这个

[https://play.google.com/store/apps/details?id=org.jtb.alogcat&feature=search_result](https://play.google.com/store/apps/details?id=org.jtb.alogcat&feature=search_result)

要从该日志中检测对我非常有用的所有日志，我知道 TimeZone 填充值 null 并且日历应用程序崩溃了。

所以我只是在插入时添加这个填充值，它工作得很好。

用于 ICS

```
values.put(CalendarContract.Events.EVENT_TIMEZONE, TimeZone.getDefault().getID()); 
```

低于 ICS

```
values.put("eventTimezone", TimeZone.getDefault().getID()); 
```

# python - 在 Python 中使用多重继承强制执行特定的 __init__

> ID：13307319
> 
> 赞同：4
> 
> 时间：2012-11-09T11:31:26.953
> 
> 标签：python, multiple-inheritance, method-resolution-order

我试图让`__init__`执行顺序正确。层次结构由两个分支组成。左分支实现了右分支的一些抽象方法。在右分支也有一个分裂。现在我希望他们执行：首先从左上到下，然后从右上到下。

有没有办法在 Python 3 中实现这一点？

所以基本上以下应该按顺序打印数字（它没有）：

```
from abc import abstractmethod, ABCMeta

class L1:
    def __init__(self):
        super().__init__()
        print(1)

class R1(metaclass=ABCMeta):
    def __init__(self):
        super().__init__()
        print(3)

    @abstractmethod
    def m(self):
        pass

class L2(L1):
    def __init__(self):
        super().__init__()
        print(2)

    def m(self):
        pass

class R2a(R1):
    def __init__(self):
        super().__init__()
        print(4)

class R2b(R1):
    def __init__(self):
        super().__init__()
        print(4)

class X(L2, R2a):
    pass

class Y(L2, R2b):
    pass

x = X()
print("--")
y = Y() 
```

不幸的是，我无法更改 L2 和 R2 的顺序，因为 L2 实现了 R2 的抽象方法（如果我更改它会出现错误）。

可能吗？

（您知道如何考虑 MRO 以轻松解决此类问题吗？）

编辑：我认为我没关系，但我想指出，在我的真实结构中，L 侧实际上有一颗钻石，如 L2a(L1)、L2b(L1) 和 L2(L1a、L2a)。那就是完全拆分一些功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:13:01.713

怎么样：

```
from abc import abstractmethod, ABCMeta

class L1:
    def __init__(self):
        self.init()
        super().__init__()
    def init(self):
        print(1)

class R1(metaclass=ABCMeta):
    def __init__(self):
        print(3)
        super().__init__()

    @abstractmethod
    def m(self):
        pass

class L2(L1):
    def __init__(self):
        super().__init__()
    def init(self):
        super().init()
        print(2)

    def m(self):
        pass

class R2a(R1):
    def __init__(self):
        super().__init__()
        print(4)

class R2b(R1):
    def __init__(self):
        super().__init__()
        print(4)

class X(L2, R2a):
    pass

class Y(L2, R2b):
    pass

x = X()
print([cls.__name__ for cls in X.mro()]) 
```

产生

```
1
2
3
4
['X', 'L2', 'L1', 'R2a', 'R1', 'object'] 
```

我认为您无法更改 MRO `['X', 'L2', 'L1', 'R2a', 'R1', 'object']`，. 但是您可以选择将初始化语句放在之前或之后`super().__init__()`。

将打印语句放在前面`super().__init__()`会按照 MRO 的顺序为您提供打印语句。之后放置它们，颠倒顺序。

您希望部分颠倒顺序：L1 在 L2 之前，R1 在 R2a 之前。

当我们到达 L1 时，通过调用`self.init()`，我们可以从 MRO 链的开头重新开始，并`init`以所需的顺序调用：`L1, L2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:07:46.240

我更喜欢避免使用超级：

```
class A:
    def __init__(self):
        print('init A')

class B:
    def __init__(self):
        print('init B')

class C(B,A):
    def __init__(self):
        A.__init__(self)
        B.__init__(self)
        print('init C')

c = C() 
```

这打印：

```
init A
init B
init C 
```

因此，对于您的具体情况，只需按您想要的任何顺序调用 _ *init _。*真的。去尝试一下。钻石或没有钻石，它会工作得很好。

例如：

```
class X(L2,R2a):
    def __init__(self):
        L1.__init__(self)
        L2.__init__(self)
        R1.__init__(self)
        R2a.__init__(self) 
```

如果您需要为层次结构中更高的东西调用**init**并且您害怕为某些对象重复调用某些类的**init函数，那么只需制作一些布尔标志。**

例如：

```
class L1:
    def __init__(self):
        try:
            if self.l1_initialised:
                return
        except NameError:
            self.l1_initialised = True
        blah blah blah 
```

# java - eclipse 的检查功能像个傻瓜一样欺骗我，为什么在调试时看起来那么棘手？

> ID：13307321
> 
> 赞同：1
> 
> 时间：2012-11-09T11:31:29.040
> 
> 标签：java, eclipse, debugging

Eclipse 非常适合编写 java 程序，但今天我发现欺骗像我这样的新编码人员真是太棒了。@_@

我写了一个片段如下，

```
public static void main(String[] args) {
    for(int i=0;i<3;i++){
        System.out.println("i = " + i);
    }
} 
```

然后我在“System.out.print ....”行添加一个断点，单击“Debug”按钮，eclipse进入“Debug”透视图并突出显示断点行，然后将光标移到变量上“i”，正如预期的那样，它的值是“0”。

然后，我选择“i++”并单击“Inspect”（或按“Ctrl+Shift+I”）一次，将光标移到变量“i”上，其值变为“1”。我再次重复“Inspect”，i的值变为“2”......（每次点击“Inspect”它的值都会加1）！

为什么会这样！？我只想查看调试 propuse 的“i”值，在进入下一个语句之前不想真正改变它的值。我认为“检查”和“显示”仅用于查看变量/表达式，它们不应该影响值，但在这种情况下，它不能像我预期的那样工作。

谁能告诉我出了什么问题？

```
My eclipse version info:
Version: Indigo Service Release 2
Build id: 20120216-1857 
```

![选择](../Images/03cf41e78f32067b241eb159e931f317.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:37:27.833

如果您检查一个表达式，eclipse 必须执行该表达式以便您可以获取该值。因此，如果您检查`i++`，eclipse 会在`i`.

这样想：如果不是 i++，而是检查`myFunction(i)`，你会期望 eclipse 执行函数“myFunction”来获取值吗？与 相同`i++`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T13:03:38.503

如果您担心在调试时显示/显示值，并且您想确保不影响值，您应该选择变量或表达式并使用“Watch”选项。

这将在不执行的情况下跟踪变量/表达式值，只需在每次运行时更新新值。我认为是最安全的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T11:42:02.567

在 Eclipse 中，如果您检查一个表达式，则 Eclipse 执行该表达式并为您提供结果。
所以在你的情况下，如果你检查`i++`然后 eclipse 执行它并增加`i`. 只要你运行这个，这将增加`i`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-19T23:03:59.153

正如 Pablo 所提到的，它必须评估代码才能告诉您它返回的值。相反，您可以将手表放在“i+1”上，这将为您提供您想要的价值，而不会产生您不想要的副作用。

基本上，您需要了解您启动的任何内容的任何副作用，无论是来自“主”代码还是来自调试工具。正如 Erhannis 所提到的，这有时对于在调试代码时修改值非常有用。（例如，您可以在实际调整代码之前验证调整/修复确实有用。）

您期待“一个隔离区域”，但这将非常难以做到，尤其是在许多对象链接到许多其他对象的面向对象的上下文中。并行运行整个事情有时可能会奏效，但你会失去上面的调整能力。在任何情况下，你都会遇到大量争夺资源的问题；例如，两个副本都试图读取/写入特定文件，例如日志文件。此外，两条执行路径可能会出现分歧，从而导致不正确/误导的监视值。

因此，防止这种副作用在这里并不是一个真正可行的选择，而且无论如何也很少有用。只是期望手表可以反映和影响代码执行。

# jquery - 在将数据发送到服务器之前，可编辑、干净的数据

> ID：13307328
> 
> 赞同：0
> 
> 时间：2012-11-09T11:31:51.500
> 
> 标签：jquery, jeditable

我正在尝试使用 Jeditable，一个用于 jQuery 的在线插件编辑器。

但是，我看不到在发送到服务器之前如何处理编辑的数据。

现在我有这个：

```
$('.edit_area').editable('http://www.example.com/save.php', { 
         type      : 'textarea',
         cancel    : 'Cancel',
         submit    : 'OK',
         indicator : '<img src="img/indicator.gif">',
         tooltip   : 'Click to edit...'
     }); 
```

但是，在发送到服务器之前我将如何处理数据？我想清理一些字符，但我不知道该怎么做。

# php - DATE_RFC3339 PHP 常量是否严格等于 DATE_W3C

> ID：13307332
> 
> 赞同：1
> 
> 时间：2012-11-09T11:32:11.877
> 
> 标签：php, html, datetime, datetime-format

我正在使用 HTML5 和日期时间输入类型。为了设置它的值，我使用了一个 iIformat 与 W3C 规范匹配的 PHP DateTime 对象（实际上是使用 DATE_RFC3339）。我想知道 DATE_RFC3339 是否严格等于 W3C[在这里](http://www.w3.org/TR/html-markup/datatypes.html#common.data.datetime)所说的 DATE_W3C 。

最后，我想知道是否`'Y-m-d\TH:i:s'`是好的格式，`<input type="datetime-local" />`因为我们可以使用以下格式（带有毫秒）`1985-04-12T23:20:50.52`：。

在此先感谢，请原谅我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T11:38:34.050

是的，它们是相同的。

来自 php.net 文档：

```
const string RFC3339 = "Y-m-d\TH:i:sP";
const string W3C = "Y-m-d\TH:i:sP"; 
```

[http://php.net/manual/en/class.datetime.php](http://php.net/manual/en/class.datetime.php)

# jquery - 拦截表单通过表单的子提交？

> ID：13307338
> 
> 赞同：0
> 
> 时间：2012-11-09T11:32:50.037
> 
> 标签：jquery, forms

我有一个使用 jQuery 的插件，它修改输入以在输入模糊时为其提供格式掩码，但是我不想在提交表单时通过格式化值发送。

有没有办法可以拦截父表单提交事件，调整元素的值以删除掩码，然后继续提交，而不必为每个使用插件输入的表单定义它？

当然，另一种选择是使用隐藏输入并将原始值存储在其中，并使用未命名的输入来显示掩码，但如果可以的话，我想避免额外的标记（另外这将是一个方便的技巧！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:33:38.150

```
$("#formid").submit(function(e){

    e.preventDefault(); //prevent the form from submitting

    var formatted_string = $("#formatted_input"); // get the formatted string you want to unformat

    var unformatted_string = formatted_string.replace(/regularexpression or string to be replaced/,'replacement string');  // use .replace() function to find and replace either a string or regular expression to undo your previous formatting

    $("#formatted_input").val(unformatted_string);       // set the input value as the new unformatted value

    $(this).submit(); //submit this form

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:48:46.997

您可以使用`onsubmit`表单的事件。
此事件拦截表单提交事件，让您操作数据，甚至决定是否提交表单（通过其返回码）。

一个常见的用例是验证：

```
<script type="text/javascript">
function ValidateInput() {
  //validate something here
  return true; //true will submit the form, false will stop the submission here
}
</script>

<form action="yourfile.html" onsubmit="return ValidateInput();">
    ...
</form> 
```

您可以轻松地调整它来操作您的数据。

# android - 使用意图将 xml 布局发送到 Android 活动

> ID：13307341
> 
> 赞同：0
> 
> 时间：2012-11-09T11:32:55.980
> 
> 标签：android, android-layout, android-intent

1）是否可以使用 Android 上的意图机制向某些活动发送 .xml 文件的 URI 并让该活动使用该 xml 文件作为其视图布局？

2）具体来说，我想为游戏制作一个通用的关卡选择器。所以我希望它在外观方面能够具有尽可能多的灵活性。并且仍然保留了类似列表视图的功能（能够将用户选择的级别数返回给调用活动）。发送一个 xml 文件作为布局是否可以达到这个目的？如果没有，你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:38:16.177

您可以发送布局的 id 号，然后仅`setContentView(layoutId);`使用接收到的值。

# django - Django 注册失败，Postgres 中的模式搜索路径

> ID：13307344
> 
> 赞同：0
> 
> 时间：2012-11-09T11:33:12.197
> 
> 标签：django, postgresql, database-schema, django-registration

我需要在多个 django 应用程序之间共享用户凭据。每个应用程序都完全不同并且服务于不同的目的，但我希望用户只需注册一次即可使用任何应用程序。

我已经设法通过在我的 Postgres 数据库中定义多个模式来设置它。据我所知，Django 不明确支持网络模式，但我确实（主要）通过为每个应用程序定义不同的搜索路径（每个应用程序使用自己的用户名连接到 Postgres）来使其工作。

我有以下模式（例如）：

```
- auth
- app1    
- app2
- app3
- common 
```

因此，应用的用户搜索路径可能如下所示：

```
app1, common, auth 
```

一切似乎都很好，除了 django-registration 提供的注册功能。当我尝试注册一个新用户时，它会在 auth_user 表和 registration_registrationprofile 表中创建一个新行（两者都位于 auth 模式中）。激活电子邮件也已发送，但是当我单击激活链接时，我收到一条消息“帐户激活失败”。没有其他信息。

有没有其他人看到过这个并且可能有一个解决方案来让激活在这样的设置中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:19:27.870

啊，激活失败的原因与注册模块无关。我的激活电子邮件模板包含生产站点的激活 URL，并且我正在临时站点上进行测试。（脸红）

# java - @OneToOne-Relation 与“不为空”

> ID：13307345
> 
> 赞同：0
> 
> 时间：2012-11-09T11:33:14.200
> 
> 标签：java, jpa-2.0

我正在使用 JPA2、Unitils、jUnit + 其他东西。我的问题涉及两个实体：

```
@Entity
public class CaseStuff implements Serializable {
....
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private long caseStuffId;

@OneToOne(mappedBy = "CaseStuff")
private XCase xcase;
...
}

@Entity
public class XCase implements Serializable {
....
@OneToOne
@JoinColumn(name = "CASESTUFFID")
private CaseStuff caseStuff;
....
} 
```

两个表都获得了另一个表的 ID，因此也可以反过来映射。在 jUnit-Test 中，Unitils 插入一个没有 XCase 的 CaseStuff 记录。我确认，它确实是空的。但是，然后我使用以下查询：

```
"select s from CaseStuff s where s.xcase is null" 
```

它返回 0 个 CaseStuff 对象。对“不为空”执行相同操作会返回对象，但在调试时检查 CaseStuff.xcase 时，它​​显然为空。

任何想法，这里出了什么问题？

编辑：由 Hibernate 生成的 SQL 转换为

```
select
    *
from
    CaseStuff casestuff0_ 
where
     (
        casestuff0_.xcaseid is null
    ) 
```

*将所有字段名称替换为*

EDIT2：在我将其更改为 OneToOne-Relation 之前，它是不必要的 ManyToOne。以前 jUnit 测试有查询

```
"select s from CaseStuff s where not exists (select x from s.xcase x)" 
```

由于某种原因，这仍然可以正常工作，就好像 s.xcase 仍然是一个 Set。

感谢所有试图和我一起解决问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:13:49.017

正如您定义的那样，您的实体 Xcase 将具有外键

所以它的 id 旁边的 Xcase 表将有 caseStuff_id（或其他名称）作为 Xcase id 的外键。

就像在这张图片中一样（对名称进行抽象）

![在此处输入图像描述](../Images/e7047e15ff26084b91d841a608343131.png)

在您的情况下，Person 是 Xcase，CaseStuff 是 PersonDetails

所以可能你的 CaseStuff 表（如果它是由持久性提供程序生成的，没有案例 id）

请检查 db 级别以查看您的表是如何定义的，从结构上讲。

# c++ - Deviarev2 Hook API：挂钩到现有进程 winapi 调用？

> ID：13307351
> 
> 赞同：0
> 
> 时间：2012-11-09T11:33:43.167
> 
> 标签：c++, winapi, hook, detours

我想使用 Deviare V2 API 来拦截来自测试应用程序的 winapi 调用。问题是挂钩和系统调用在同一个进程中，因此不会拦截调用。

如果我为它们中的每一个打开单独的进程，那么拦截将起作用。有没有其他人遇到过这种情况/问题？

问题是我正在尝试将一些单元测试添加到代码的和平中，而不是修改现有的生产代码来包装/模拟所有系统调用，我认为我可以简单地拦截所有这些调用并按照我的意愿伪造它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:36:26.087

在您自己的进程中挂钩 API 实际上要容易得多（实际上，当您想挂钩另一个进程时，无论如何都需要将 DLL 注入该进程，因此基本上当您挂钩自己的进程时，您可以跳过该步骤）。这可能是您正在使用的库的错误。尝试 Microsoft Detours，或者如果您愿意，可以自己修补内存，实际上并不难，如果您是该主题的新手，只需几个小时即可。

您需要注意的是，某些 C++ 编译器在某些情况下（我认为是调试版本）会使用一些跳转存根或类似的东西，这可能会干扰挂钩过程。在这种情况下，您在挂钩时必须格外小心 - MS Detours 可能会正确执行此操作。如果这会影响您的成功，您可以尝试调试/发布版本。我的意思是获取 API 的正确地址。如果函数在 DLL 中，就像 WinAPI 的情况一样，如果您使用 LoadLibrary 和 GetProcAddress，您可以确保获得正确的地址。

在旁注中，我不认为 API 挂钩是避免模拟/存根测试的正确方法，尽管它应该有效。

如果您对挂钩的工作原理更感兴趣，可以在这里查看我的论文：http: [//lkm.fri.uni-lj.si/zoranb/research/berdajs-bosnic%20SPE%202011.pdf](http://lkm.fri.uni-lj.si/zoranb/research/berdajs-bosnic%20SPE%202011.pdf)

# xcode - 检查 UINavigationBar 后退按钮的可见性

> ID：13307356
> 
> 赞同：1
> 
> 时间：2012-11-09T11:34:04.063
> 
> 标签：xcode, storyboard, uinavigationbar

我将如何检查我的 UINavigation 的栏后退按钮是否可见？

如果它不可见，我想用其他功能替换它。

# webdriver - webdriver - 如何打印页面中的所有主要链接

> ID：13307360
> 
> 赞同：2
> 
> 时间：2012-11-09T11:34:04.647
> 
> 标签：webdriver, selenium-webdriver

我想打印所有主要模块链接......但是如果使用框架然后使用标签“a”提取所有链接，我会打印所有链接。请纠正我..

```
List All_Module_Links=driver.findElements(By.xpath("//*[@id='top-menu']"));
WebElement modules_box = All_Module_Links.get(0);
List links =modules_box.findElements(By.tagName("a"));
System.out.println("Total links are : "+links.size());

for(int i=0;i    {
System.out.println(links.get(i).getText());
}![enter image description here][1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:17:30.083

```
 WebElement topmenu = driver.findElements(By.xpath("//*[@id='top-menu']"));

     List<WebElement> links =topmenu.findElements(By.tagName("a"));
     System.out.println("Total links are : "+links.size());

     for(int i=0;i<links.size();i++)
     {
        System.out.println(links.get(i).getText());
     } 
```

# php - 谷歌浏览器在没有被要求的情况下刷新

> ID：13307363
> 
> 赞同：0
> 
> 时间：2012-11-09T11:34:18.817
> 
> 标签：php, javascript, html, google-chrome

我有没有解决方案的问题，需要帮助。

我采用安全代码来防止 http 刷新，它监视客户端请求是否过多地抑制 http 响应并防止它关闭服务器。

如果我们在页面上进行过多的刷新，客户端会获得标题为“正在加载...”的空白页面 2 秒，然后正常页面加载。

为了使代码使用：“meta http-equiv="Refresh"”标签，并且由于某种原因在确定的情况下页面仍然不停地刷新。

我搜索了一些解决方案，发现这是 Chrome 的“问题”，显然没有解决方案。

我尝试使用 javascript 来验证客户端是否使用 Chrome，如果 Chrome 不使用元标记刷新，请使用 javascript 进行刷新。

无论如何，Chrome 仍然表现出这种行为，这让我很抓狂。

如果您想尝试，您可以访问 www.sport4u.com.br 访问页面上的任何产品或链接，当您出现空白屏幕时按 F5 多次（10 秒）加载标题按“历史返回”按钮，然后等待。

是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T12:25:53.147

好的，这很奇怪，因为它似乎是由 Chrome 的自动翻译功能引起的。我`Chrome 24.0.1312.5 dev-m`在英文 Windows 7 上运行，当我加载[http://www.sport4u.com.br/](http://www.sport4u.com.br/)时，页面每 2 秒自动重新加载一次。事实上，如果我查看页面源代码，我会得到以下信息：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-9" />

<meta http-equiv="Content-Language" content="tr">
<script>
    window.setTimeout('window.location.reload(); ',2000);
</script>
<title>Loading...</title>
</head>

<body topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0" marginwidth="0" marginheight="0" bgcolor="#fff"> 
```

立即您可以看到`reload()`代码。

Chrome 还弹出打开页面顶部的自动翻译栏，因为它认为该页面是葡萄牙语并提供翻译。然而，在第二次重新加载时（2 秒后），Chrome 现在认为该页面是土耳其语（因为这是上面代码中的语言）！这种情况会持续很多次，直到 Chrome 最终停止。即使关闭顶部的翻译栏也不会停止重新加载。

如果我禁用 Chrome 翻译设置 (chrome://settings/search#languages) 并加载页面，则不会刷新并且*查看源代码*会返回正确的页面。

我建议要么指示 Chrome 不刷新页面 - 请参阅[为什么 Chrome 会错误地确定页面使用不同的语言并提供翻译？](https://stackoverflow.com/questions/2467454/why-does-chrome-incorrectly-determine-page-is-in-a-different-language-and-offer)或修复某些字符的编码问题，这使 Chrome 认为页面使用了错误的语言。如果您通过[W3C 验证器](http://validator.w3.org/check?uri=http://www.sport4u.com.br/&charset=%28detect%20automatically%29&doctype=Inline&group=0)运行该页面，它会显示一个错误编码的字符，这*可能*是原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:50:10.680

您是否尝试过任何替代方法`"meta http-equiv='refresh'"`？

`header();`在加载任何内容以重定向之前查看使用，因为该元标记已贬值。

```
header("Location: index.php");
die(); 
```

# jquery - 当鼠标进入新对象时停止和回滚其他 jQuery 动画对象

> ID：13307364
> 
> 赞同：2
> 
> 时间：2012-11-09T11:34:25.590
> 
> 标签：jquery, jquery-animate, mouseenter, mouseleave, animated

我正在研究一个带有活动类的 jQuery`.slider-active`滑块`mouseEnter`。

通过这种方式，我想以`.slider-imgcontainer`一种很酷的效果为我和我的 figcaption 设置动画：

更改时`.slideractive`，前一个对象的宽度必须减小`.slider-imgcontainer`到 250px，and 之后`width`必须`padding`减小`figcaption`到 0。当我减小`width`of`figcaption`时，文本太高，所以我只使用`.hide`and`.show`来纠正这个问题。

然后滑块开始工作，但是......当鼠标滚过多个图形时，它们都是动画的。我试图纠正这个问题，但我找不到任何解决方案（使用`.clearQueue()`et `.stop()`）。

结果：[当前滑块](http://hugo.gresse.io/old_2014/ "最终网站")

主要动画代码：

```
$(document).ready(function(){

    var GLOBAL = {
        window:$(window),
        slider:$('.slider-work'),
        container:$('#container'),
        figure:$("figure")
    }

    /********* SLIDER MAIN *************/
    // INIT LARGEUR ---
    GLOBAL.slider.width($(".slider-work img").size() * 250 + 900);

    // save width of figcaption in attr to animate them after (no auto animate)
    GLOBAL.slider.find("figcaption").each(function(i) {
        var t = $(this);
        if(!t.parent().hasClass("slider-active"))
            t.hide();

        t.attr("largeur", t.width());

    });

    // hover
    GLOBAL.slider.children("figure").mouseenter( function () {

        var oldActive = $(".slider-active");
        var thiss = $(this);

        oldActive.removeClass("slider-active");
        thiss.addClass("slider-active");

        oldActive.find("figcaption").animate({
            width: 0,
            padding: 0
            }, 220, 'linear', function() {
                oldActive.find(".slider-imgcontainer").animate({
                    width : 250
                    }, 400, 'linear', function() {

                            // Animation de l'ancien active fini , alors : 

                            //$(".slider-imgcontainer").removeAttr("style");

                            thiss.removeAttr("style").children(".slider-imgcontainer").animate({
                                    width : 400
                                }, 400, 'linear', function(){
                                    var largeurFigcaption = thiss.find("figcaption").show().attr("largeur");

                                    thiss.find("figcaption").animate({
                                        width : largeurFigcaption,
                                        padding : " 0 20px 20px 20px"
                                        }, 220, 'linear', function(){

                                    });
                            });

                    });
        });
    });
    // END MouseEnter

//End ready
}); 
```

还有我调试滑块的代码

```
 GLOBAL.slider.children("figure").mouseout( function () {
            var thiss = $(this);
            //$("#title span").append(" toto");

            var myChildrenBehave =  GLOBAL.slider.filter(function() {
                var filtered = $(this).children().is(":animated");
                return filtered;
            });

            myChildrenBehave.clearQueue().stop();

        }); 
```

我接受所有想法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:04:17.623

有多种方法可以解决这个问题，但我更喜欢在初始鼠标悬停的动画完成后检查鼠标是否仍在该项目上。如果不是，则将其关闭。

jQuery 没有内置的检查鼠标是否仍在我知道的对象上，但我为非常简单的情况编写了自己的一个。

```
var mouse = {
mouseX: null,
mouseY: null,
mouseInWindow: true,
init: function() {
    $(document).bind('mousemove', function(event) {
        mouse.mouseX = event.pageX;
        mouse.mouseY = event.pageY;
        mouse.mouseInWindow = true;
    });
    $(document).bind("mouseleave", function(event) {
        mouse.mouseInWindow = false;
    });
    $(document).bind("mouseenter", function(event) {
        mouse.mouseInWindow = true;
    });
},
isOver: function($element) {
    $elementPosition = $($element).offset();
    $elementWidth = $($element).width();
    $elementHeight = $($element).height();
    $returnValue = true;
    if (mouse.mouseX !== null) {
        if (mouse.mouseX < $elementPosition.left) { $returnValue = false; }
        if (mouse.mouseY < $elementPosition.top) { $returnValue = false; }
        if (mouse.mouseX > $elementPosition.left + $elementWidth) { $returnValue = false; }
        if (mouse.mouseY > $elementPosition.top + $elementHeight) { $returnValue = false; }
        if (!mouse.mouseInWindow) { $returnValue = false; }
    }
    return $returnValue;
} 
```

}

你需要在你的其他代码之前运行 mouse.init() ，但是你可以使用 mouse.isOver($(yourSlideActivator));

# c++ - vs c++ 跨端联合

> ID：13307368
> 
> 赞同：0
> 
> 时间：2012-11-09T11:34:39.360
> 
> 标签：c++, endianness

> **可能重复：**
> [有什么方法可以用小端程序读取大端数据？](https://stackoverflow.com/questions/2022462/any-way-to-read-big-endian-data-with-little-endian-program)

我的项目中有下面的联合结构，我正在尝试修改它以读取大端文件，并且由于程序在 x86 上运行，它尝试以小端方式读取文件并从联合返回错误的结果。有没有办法修改联合以大端格式读取它？或获取正确数据类型的替代方法？

```
struct AptConstItem {
    AptConstItemType type;
    union {
        const char *strvalue;
        unsigned int numvalue;
    };
}; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:41:53.697

无论字节顺序如何，您都使用相同的基本技术：阅读大字节序：

```
uint32_t
readBigEndian( std::istream& binaryInput )
{
    uint32_t result 
            = (binaryInput.get() << 24) & 0xFF000000;
    result |= (binaryInput.get() << 16) & 0x00FF0000;
    result |= (binaryInput.get() <<  8) & 0x0000FF00;
    result |= (binaryInput.get()      ) & 0x000000FF;
    return result;
} 
```

对于小端，您只需颠倒班次和掩码的顺序。

# actionscript-3 - 如何指向或引用动态创建的项目

> ID：13307375
> 
> 赞同：0
> 
> 时间：2012-11-09T11:35:08.023
> 
> 标签：actionscript-3, air

我正在开发发票系统。我需要通过**addchild**方法动态添加发票项目，如下所述

1.选择产品（组合框）--数量（文本框）--价格（文本框）--***总计（文本框）***

2.选择产品（组合框）--数量（文本框）--价格（文本框）--***总计（文本框）***

我的问题是我不能带来每个子元素的所有***总文本框的总和..***

***如何指向或引用动态创建的项目？？？？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:34:26.353

或者您可以创建参考对象，例如：

```
class Bind {
   public var target:Object;
   public var key:String;

   public function Bind(t:Object , k:String){
      target = t;
      key = k;
   }
   public function get value():* {
      return target[key];
   }
}

var myItem:SomeClass;
myItem.param = 100;
var bind:Bind = new Bind(myItem,"param");

trace("get myItem value:", bind.value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:37:54.087

您可以将所有创建的项目存储在一个数组（或向量）中，然后通过一个循环访问它们中的每一个。

例如：

```
var allPrices:Array = [15.50, 20.24, 36.12];

var allElements:Array = new Array();

for (price in prices) {

      // PriceText class is, for example, a movieclip with a textbox inside
      var obj:PriceText = new PriceText(price);

      addChild(obj);

      allElements.push(obj);

} 
```

`allElements`现在您已经在数组中添加了所有元素。

# actionscript-3 - Flex 中的标题窗口

> ID：13307379
> 
> 赞同：3
> 
> 时间：2012-11-09T11:35:22.307
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

我想在 flex 中制作标题窗口（弹出）.. 如果我点击任何按钮，其中包含一些按钮，然后必须在标题窗口之外添加另一个按钮，谁能帮助我。感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:37:02.900

可以使用`Alert`该类来实现弹出窗口。说在代码下面显示一个弹出窗口可能会起作用

```
Alert.show("Alert Text", "Title", Alert.OK, this, start_app); 
```

`Alert.OK`指定要包含的按钮。您可以使用`OR`运算符包含更多内容。这些按钮的标签也可以更改以满足您的要求。如果按下`start_app`中`closeHandler`的任何按钮，就会触发`Alert`。进一步的逻辑可以放在`closeHanlder`. 有关详细信息，请参阅[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Alert.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Alert.html)

# jquery - 如何让 4 个元素绕一圈旋转？

> ID：13307383
> 
> 赞同：5
> 
> 时间：2012-11-09T11:35:34.740
> 
> 标签：jquery, css, rotation

首先我想说我是一个完整的 jquery 初学者。我想让这些 div 以 500px 的直径沿顺时针方向绕一圈移动。我怎么能这样做呢？

```
<div id="move0" class="textBox"></div>
<div id="move1" class="textBox"></div>
<div id="move2" class="textBox"></div>
<div id="move3" class="textBox"></div> 
```

请看我的网站[http://tragicclothing.co.uk/T-Shirts.html](http://tragicclothing.co.uk/T-Shirts.html) 这就是我希望能够发生的事情

脚步：

1.  点击中间的按钮
2.  图像出现在此按钮周围（淡入）
3.  围绕此按钮缓慢旋转图像

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T12:20:20.340

> ***注意：****这不是我的代码，而是由[Lea Verou](http://lea.verou.me/2012/02/moving-an-element-along-a-circle/)在她各自的博客上编写的。*

## 仅限 CSS3 的圆形动画

这个特殊[的 JSFiddle](http://jsfiddle.net/leaverou/zXPzY/)显示了一个元素围绕某个中心点旋转。它的 CSS 实际上非常简单：

```
@keyframes circle {
    from { transform:rotate(0deg); }
    to { transform:rotate(360deg); }
}

@keyframes inner-circle {
    from { transform:rotate(0deg); }
    to { transform:rotate(-360deg); }
}

body > div {
    width:100px;
    height:100px;
    margin: 20px auto 0;
    color:orange;
    font-size:100px;
    line-height:1;
    animation: circle 5s linear infinite;
    transform-origin:50% 200px;
}

div > div {
    animation: inner-circle 5s linear infinite;
}
```

```
<div><div>☻&lt;/div></div>
```

基本上，您所要做的就是将这些转换为 CSS 类，然后只需在您的中央按钮上添加一个单击处理程序，该处理程序会淡入它周围的图像并向它们添加一个 CSS 类，这样它们也将开始旋转。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T11:52:38.327

这对我有用，您可以根据`INPUT`需要在 HTML 中添加任意数量的元素。

（**更新**：[JSFiddle](http://jsfiddle.net/nYyJs/1/)链接。）

```
// fetch all DIV.txtBoxRotate elements inside DIV#txtBoxRotateContainer
var txt = $('#txtBoxRotateContainer .txtBoxRotate'), txtLen = txt.size();
// utility functions to convert degrees to radians    
var deg2rad = function(a) { return a*Math.PI/180.0; }
// rotation settings
var angle = 0, speed = 1, delay = 10, r = 250;

(function rotate() {
    for (var i=0; i<txtLen; i++) {
        // we know how many elements we have, so we will add an even
        // amount of degrees of angle for each of them to complete a circle
        var a = angle + (i * 360 / txtLen);
        // we reposition our element by using {sin(a),cos(a)} for our initial
        // position. If you want to change direction, switch to {cos(a),sin(a)}!
        // then we multiply the x,y by our radius and add our radius to center
        // then element. You may add another offset if you want (ex: y+r+(Math.sin...)
        $(txt[i]).css({top: r+(Math.sin(deg2rad(a))*r), left: r+(Math.cos(deg2rad(a))*r)});
    }
    // increment our angle and use a modulo so we are always in the range [0..360] degrees
    angle = (angle + speed) % 360;
    // after a slight delay, call the exact same function again
    setTimeout(rotate, delay);
})();  // invoke this boxed function to initiate the rotation
```

```
#txtBoxRotateContainer { height: 800px; }
.txtBoxRotate { position:absolute; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<div id="txtBoxRotateContainer">
    <div class="txtBoxRotate"><img src="http://www.google.com/logos/2012/uganda12-hp.jpg" alt="Google!" /></div>
    <div class="txtBoxRotate"><img src="http://www.google.com/logos/2012/Googles_14th_Birthday-2012-2-hp.gif" alt="Google!" /></div>
    <div class="txtBoxRotate"><img src="http://www.google.com/logos/2012/bohr11-hp.jpg" alt="Google!" /></div>
</div>
```

**注意**：原始代码有`INPUT`元素（因为这是我对你的假设`class="textBox"`），因此有`id`和 CSS`class`名称。你可以使用任何你想要的命名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:30:02.873

```
 $(document).ready(function() {
      var elements = $('.textBox');
      var length = elements.length;
      var offsetX = 300;
      var offsetY = 300;
      var radius = 250; //radius = diameter(500px) / 2 
      var incr = Math.PI * 2 / length;
      var progress = 0;

      setInterval(function() {
        progress++;
        elements.each(function(i) {
          $(this).css({
            top: offsetY + Math.sin(i * incr + ((progress / 100) * Math.PI * 2)) * radius,
            left: offsetX + Math.cos(i * incr + ((progress / 100) * Math.PI * 2)) * radius
          });
        });
        if (progress >= 100) {
          progress = 0;
        }
      }, 50);
    });
```

```
.textBox {
  position: absolute;
  width: 50px;
  height: 50px;
  background: red;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="move0" class="textBox"></div>
<div id="move1" class="textBox"></div>
<div id="move2" class="textBox"></div>
<div id="move3" class="textBox"></div>
```

# java - 用 groovy 扩展 Java 类

> ID：13307386
> 
> 赞同：2
> 
> 时间：2012-11-09T11:35:56.777
> 
> 标签：java, dynamic, groovy, extend

我有一个需要由 groovy 执行的 java 类（名为 A）。这个类是独立的。我想用 B 类动态扩展它。

A类代码：

```
public class A {
    public void run() {
        System.out.println(context);
    }
} 
```

B类代码：

```
public class B {
    protected String context;

    public void setContext(Context c) {
        this.context = c;
    }
} 
```

控制groovy的代码：

```
String code = FileUtils.readFileAsString(new File("A.java"));
GroovyObject obj = new GroovyClassLoader().parseClass(code).newInstance();
// here I want to make A extend B 
```

我尝试使用 obj.setMetaClass 但在 Java 中找不到任何示例。

有人可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:22:23.157

如果您尝试在 java 中执行，请尝试以下操作：

```
Class a = new GroovyClassLoader().parseClass(aSourceString);//your A class; 
Class b = new GroovyClassLoader().parseClass(bSourceString);//your B class

ExpandoMetaClass emc = new ExpandoMetaClass(a, false, true);

List<Class> classes = new ArrayList<Class>();
classes.add(b);
MixinInMetaClass.mixinClassesToMetaClass(emc, classes);

MetaClassRegistry mcreg = MetaClassRegistryImpl.getInstance(MetaClassRegistryImpl.LOAD_DEFAULT);
mcreg.setMetaClass(a, emc);
emc.initialize();

System.out.println(((GroovyObject)j.newInstance()).invokeMethod("setContext", new Context()));//or however you get a Context obj 
```

如果在 Groovy 中，则简单得多：

```
//given same class parsing as above
a.mixin(b)

def aObj = a.newInstance()
aObj.context = new Context() 
```

# c# - Visual Studio 2008 使用表适配器将文本框与数据库表连接起来

> ID：13307387
> 
> 赞同：1
> 
> 时间：2012-11-09T11:35:58.310
> 
> 标签：c#, sql, visual-studio-2008, windows-mobile

我正在尝试通过表适配器将我的 UI 元素与数据库表连接起来。我创建了一个查询以将数据插入数据库，没有错误但数据库没有更新。

```
private void SaveBtn_Click(object sender, EventArgs e)
        {
            string Bcode = InvTxt1.Text;
            string Cid = customerTxt.Text;
            string s = "notassign";
            DateTime Ctime = DateTime.Now;

            AppDatabase1DataSet ds = new AppDatabase1DataSet();
            AppDatabase1DataSet.orderTableDataTable dt = new AppDatabase1DataSet.orderTableDataTable();
            this.orderTableTableAdapter1.GetData();
            this.orderTableTableAdapter1.InsertQuery(@Bcode, @Cid, @s, @Ctime);
        } 
```

# jquery - JQuery left: += not working in IE

> ID：13307397
> 
> 赞同：1
> 
> 时间：2012-11-09T11:37:06.000
> 
> 标签：jquery, internet-explorer-7, jquery-animate

所以我在这里有一个非常简单的问题，一直在网上寻找，但我找不到任何答案。我有一个带有一些 JQuery 的页面 - 第一个设置为一组带有设置值的按钮设置动画（在 IE 中运行良好）。但是，当我尝试使用时遇到一些问题：

```
left: '+=1024' 
```

这只是在 IE 中不起作用，事实上，它会破坏整个脚本。这是我使用它的部分（它基本上只是用一些按钮移动背景）：

```
//BG rotator
  $counter = 2;

//left-btn
$("#left-btn").click(function(){
    $("#rotator").animate({
        left: '+=1024',
    },1000); 
    --$counter;
    if ($counter == 1) {
        $("#left-btn").css("display", "none");
    } else {
        $("#left-btn").css("display", "block");
        $("#right-btn").css("display", "block");
    }
}); 
```

我最初的想法是只获取 div 的当前 left 属性，并将其分配给一个变量，但由于某种原因，使用带有左侧动画的变量也不起作用。我测试了所有代码，当我删除动画中的“左”位时一切正常。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:51:12.977

更改此行并查看是否有效：

```
left: '+=1024px' // <-- note the missing , 
```

因为 IE7 中存在 JavaScript 错误，因为不允许使用尾随逗号 - 请参阅[Can you use a trailing comma in a JSON object?](https://stackoverflow.com/questions/201782/can-you-use-a-trailing-comma-in-a-json-object)

# petapoco - 使用 petapoco 数据访问框架在类文件中声明新数据成员时显示异常

> ID：13307399
> 
> 赞同：0
> 
> 时间：2012-11-09T11:37:08.667
> 
> 标签：petapoco

我正在使用 petapoco 数据访问框架，在根据数据库表在类文件中声明一个新参数后，我在启动服务时在 Windows 服务中得到了下面提到的异常。

无法启动服务。System.MissingMethodException：找不到方法：'System.String projectname.Models.EmailTemplatePOCO.get_Subject()'。在 EmailService.EmailService.StartEmailService() 在 EmailService.EmailService.ScheduledService() 在 d:\Project\Projectname\trunk\projectname\EmailService\EmailService.cs:line 85 在 EmailService.EmailService.OnStart(String[] args) 在 d :\Project\projectname\trunk\projectname\EmailService\EmailService.cs: System.ServiceProcess.ServiceBase.ServiceQueuedMainCallback 的第 66 行（对象状态）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:46:35.723

你的 poco 使用属性吗？它需要例如；

```
public string Subject {get; set;} 
```

不确定您是否收到 petapoco 错误

# rdf - 如何从不同的未知结构化 rdf 图中查询数据？

> ID：13307400
> 
> 赞同：4
> 
> 时间：2012-11-09T11:37:17.143
> 
> 标签：rdf, sparql, semantic-web, ontology

几年以来，关联数据的数量快速增长。使用[RDF 发布了不同的图表](http://richard.cyganiak.de/2007/10/lod/)。每个图表都有自己的前缀和词汇结构。

那么，如何使用此图查询特定实体和相关数据？

是否有必要研究每个图的单独结构并在系统逻辑中实现它？

或者有什么好的方法可以在不知道结构的情况下使用 SPARQL 查询数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T14:06:59.520

不，不是。您不能只是盲目地查询数据库，您必须了解*其中*的内容才能提出合理的查询来获取您感兴趣的数据片段。

但是缺乏任何数据集的知识，你可以启动一些*非常*通用的查询来开始创建导航的构建块，ala

```
select distinct ?p where { ?s ?p ?o } 
```

这将返回数据库中使用的每个谓词。大致获得所有类：

```
select distinct ?t where { ?s a ?t } 
```

或者您可以将这些组合起来以获取每个类使用的所有谓词

```
select distinct ?p ?t where { ?s a ?t . ?s ?p ?o } 
```

通过发出这些类型的查询，您可以开始了解数据库中的内容。但这些实际上只是试图近似（即猜测）数据的底层模式是什么。因此，您最好查看与数据关联的 RDF 模式或 OWL 本体，假设有一个。此外，考虑到这些查询的一般性，根据数据库提供的优化，这些查询在数据库上运行可能并非易事。因此，在将它们发射到任何随机端点之前，您可能需要考虑这一点。

LoD 云中的一些数据集可能会提供[voiD 描述](http://www.w3.org/TR/void/)，该描述概述了您从上述查询中获得的一些内容或粗略的模式，并且足以让您继续前进。

通常，您不想只是开始遍历图，最好了解图的结构并提出一些精确的查询，以获取您对应用程序最感兴趣的数据子集。LoD 云的一个好处是，许多数据集在某种程度上重叠在他们使用的词汇表中。因此，掌握了常见词汇的知识，例如 FOAF 或 Dublin Core，您可以从探索中获得一些里程。然后，如果您将其与部分云使用的词汇结合起来，您就可以开始制定适用于您的应用程序的查询。

要回答您最初的问题，如果现在还不清楚，是的，您可以在图中查询特定实体，您只需要知道它的 URI。事实上，一旦你知道：

```
describe <uri_of_the_interesting_entity> 
```

将为您提供该实体的相关图表子集。describe 查询中返回的内容取决于数据库使用的算法，但通常，它至少会包括该事物所涉及的所有三元组。

如果您还不熟悉[SPARQL 规范](http://www.w3.org/TR/sparql11-query/)，您可能需要一些时间来查看它。祝你好运。

# regex - sed 命令中的正则表达式

> ID：13307401
> 
> 赞同：0
> 
> 时间：2012-11-09T11:37:27.163
> 
> 标签：regex, sed, sh

我在将正则表达式放入 sed 命令时遇到了一点问题，这是我的代码：

```
RAW_LIST_B=`echo $RAW_LIST_A | sed s/[0-9a-f]{8} / /g` 
```

我得到这个错误：

```
sed: -e expression #1, char 13: unterminated `s' command 
```

我不确定如何引用，`[0-9a-f]{8}`以便它删除所有 8 位十六进制数字和尾随空格`RAW_LIST_A`

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:40:24.293

做这个：

```
RAW_LIST_B=`echo $RAW_LIST_A | sed 's/[0-9a-f]\{8\} / /g'` 
```

由于您没有将参数引用到`sed`，shell 将其拆分为三个参数：`s/[0-9a-f]{8}`，`/`然后`/g`将其传递给`sed`.

另外，请注意反斜杠以转义大括号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T11:40:34.210

您应该将 sed experssion 括在引号中，这样它将是 shell 传递给 sed 的一个字符串参数

```
RAW_LIST_B=`echo $RAW_LIST_A | sed "s/[0-9a-f]\{8\} //g"` 
```

样本输出：

```
$ echo "hello a5a5a5a6 world" | sed "s/[0-9a-f]\{8\} //g"
hello world 
```

# objective-c - 为 UNEVEN 图像设置 UIEdgeInsetsMake 的问题

> ID：13307403
> 
> 赞同：0
> 
> 时间：2012-11-09T11:37:34.627
> 
> 标签：objective-c, ios

我需要帮助设置 resizableImageWithCapInsets:UIEdgeInsetsMake 以获取 UNEVEN 图像。我已经成功地将它与 EVEN 图像一起使用，它工作正常，但很难为特定图像设置正确的值。我有一个尺寸为 49 X 158 的标注气泡图像（附加），并为 resizableImageWithCapInsets:UIEdgeInsetsMake 使用以下值：

```
dialogueBubbleImage = [[UIImage imageNamed:@"BubbleBottomRightLong_1.png"]
                                   resizableImageWithCapInsets:UIEdgeInsetsMake(20, 23, 138, 23)];//49 × 158\. UIEdgeInsetsMake: CGFloat top, left, bottom, right; 
```

整个想法是在白框区域内显示带有文本的标签，保持标注箭头不变。

这是我正在使用的图像：

![在此处输入图像描述](../Images/f56acc55a6ac8e7656cd884054fa9166.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:49:11.523

究竟是什么问题？您的 top 值太高，您要留下 0px 的垂直区域来平铺。理想情况下，您将只剩下一个像素来平铺，所以我会选择如下值：

```
dialogueBubbleImage = [[UIImage imageNamed:@"BubbleBottomRightLong_1.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(12, 24, 145, 24)]; 
```

# ios - 如何在ios中控制UISlider

> ID：13307406
> 
> 赞同：-1
> 
> 时间：2012-11-09T11:37:58.860
> 
> 标签：ios, slider, uislider

> **可能重复：**
> [增量为 5 的 UISlider](https://stackoverflow.com/questions/2519460/uislider-with-increments-of-5)

如何创建滑块和滑动值增加 10,20,30... 并减少 -10,-2​​0,-30...以这种格式。帮助教程或源代码的任何其他链接。提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:39:39.700

```
UISlider* mySlider = [[UISlider alloc] init];
mySlider.minimumValue = -30.0f;
mySlider.maximumValue = 30.0f;  

-(IBAction) sliderChanged:(id) sender{

      UISlider *slider = (UISlider *) sender;
      int progressAsInt =(int)(slider.value + 0.5f);
      NSString *newText =[[NSString alloc]
                      initWithFormat:@"%d",progressAsInt];
      self.sliderLabel.text = newText;
} 
```

# php - PHP标签内自定义字段的PHP

> ID：13307407
> 
> 赞同：0
> 
> 时间：2012-11-09T11:38:03.117
> 
> 标签：php, wordpress, plugins

我正在显示一个滑块，该滑块从自定义字段中获取图像，现在我需要滑块根据语言（es - ca）显示不同的图像：

这是滑块的代码：

```
 <a href="<?php the_field('slider_home_1_enlace') ?>">
            <img src="<?php the_field('slider_home_1'); ?>">
        </a> 
```

所以我正在创建一个条件标签来根据 qtranslate 插件的语言加载图像：

```
 <?php
        _e('<!--:es-->
                <a href="<?php the_field('slider_home_1_enlace') ?>">
                    <img src="<?php <the_field('slider_home_1'); ?>">
                </a>
            <!--:-->
            <!--:ca-->
                <a href="<?php the_field('slider_home_1_enlace_ca') ?>">
                    <img src="<?php the_field('slider_home_1_ca'); ?>">
                </a>
            <!--:-->');
        ?> 
```

我是 php 初学者，所以我看到问题可能是 php 在另一个 php 中，因为这样它不起作用，如果我只是在标签之间放置文本，它就可以正常使用该语言。

任何想法如何语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:51:26.880

您需要先检查语言，使用*if - else*

检测语言并将其存储到名为**$language**的变量中，然后检查如下条件。

```
<?php
if(qtrans_getLanguage()=="es"){
?>
  <a href="<?php the_field('slider_home_1_enlace'); ?>">
      <img src="<?php the_field('slider_home_1'); ?>">
  </a>
<?php
} else if(qtrans_getLanguage()=="ca"){
?>
  <a href="<?php the_field('slider_home_1_enlace_ca'); ?>">
      <img src="<?php the_field('slider_home_1_ca'); ?>">
  </a>
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:43:29.607

你不能那样使用它。比较：（我猜 the_field() 返回字符串；））

```
<a href="'.the_field("slider_home_1_enlace").'">
    <img src="'.the_field("slider_home_1").'" />
</a> 
```

有多个错误。起初，您无法使用

```
'.(your things here).' 
```

其次，在你的第四行有一个 < 并且你忘记关闭你的 img-tag。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:42:52.253

彼此之间不能有 php-tags。

使用基本的字符串连接来组合你的字符串： http: [//php.net/manual/en/language.operators.string.php](http://php.net/manual/en/language.operators.string.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T15:48:43.263

首先，安装 qTranslate Wordpress 插件。

然后，你可以试试这个：

```
<?php

    $slider_img_fields_langs = array(
        '',
        'ca',
        'es',
    );

    $lang = qtrans_getLanguage();
    if( !in_array( $lang, $slider_img_fields_langs ) );
        $lang = '';

    echo '
<a href="' . the_field( 'slider_home_1_enlace' . $lang ) . '">
    <img src="' . the_field( 'slider_home_1' . $lang ) . '">
</a>';

?> 
```

# python - Python 打包：数据文件已正确放入 tar.gz 文件中，但未安装到虚拟环境中

> ID：13307408
> 
> 赞同：46
> 
> 时间：2012-11-09T11:38:09.763
> 
> 标签：python, packaging, setuptools, setup.py

我无法将项目正确安装`package_fiddler`到我的虚拟环境中。

我发现**`MANIFEST.in` 它负责将 `Package_fiddler-0.0.0.tar.gz`**执行时生成的非 .py 文件放入其中`python setup.py sdist`。

然后我做了：

`(virt_envir)$ pip install dist/Package_fiddler-0.0.0.tar.gz`

但这并没有将数据文件或软件包安装到`/home/username/.virtualenvs/virt_envir/local/lib/python2.7/site-packages`.

我尝试了许多设置参数的配置，`package_data`但似乎每次都使用了错误的配置。`include_package_data``data_files`

**哪种配置`package_data`和/或`include_package_data`和/或`data_files`将正确安装`package_fiddler`到我的虚拟环境中？**

**项目树**

```
.
├── MANIFEST.in
├── package_fiddler
│   ├── data
│   │   ├── example.html
│   │   └── stylesheets
│   │       └── example.css
│   └── __init__.py
├── README.rst
└── setup.py 
```

**安装程序.py**

```
from setuptools import setup

setup(
    name='Package_fiddler',
    entry_points={
    'console_scripts': ['package_fiddler = package_fiddler:main', ],},
    long_description=open('README.rst').read(),
    packages=['package_fiddler',]) 
```

**清单文件**

```
include README.rst
recursive-include package_fiddler/data * 
```

## 我尝试了哪些 setup.py 配置（上面有代码库）？

**配置1**

添加：

```
package_data={"": ['package_fiddler/data/*',]} 
```

**配置2**

添加：

```
package_data={"": ['*.html', '*.css', '*.rst']} 
```

**配置3**

添加：

```
include_package_data=True 
```

**配置4**

添加：

```
package_data={"": ['package_fiddler/data',]} 
```

删除：

```
packages=['package_fiddler',] 
```

**配置5**（克里斯的建议）

添加：

```
package_data={"data": ['package_fiddler/data',]} 
```

删除：

```
packages=['package_fiddler',] 
```

**配置6**

添加：

```
package_data={"": ['package_fiddler/data/*',]} 
```

删除：

```
packages=['package_fiddler',] 
```

**这些配置都导致根本没有文件安装在`/home/username/.virtualenvs/virt_envir/local/lib/python2.7/site-packages`.**

## 编辑

*Toshio Kuratomi*的注意事项：在我的原始帖子中，为了清楚起见，我使用了最简单的树结构，但实际上我的树看起来更像下面的树。对于那棵树，奇怪的是，如果我只是`__init__.py`以`stylesheets`某种方式放入文件夹中的所有数据文件`texts`也正确安装！！！这让我很困惑。

**树 2**（这会以某种方式正确安装所有数据文件！！）

```
.
├── MANIFEST.in
├── package_fiddler
│   │── stylesheets
|   |     ├── __init__.py
|   |     ├── example.css  
|   |     └── other
|   |          └── example2.css
|   |__ texts
|   |     ├── example.txt  
|   |     └── other
|   |          └── example2.txt
│   └── __init__.py
├── README.rst
└── setup.py 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-08-19T04:29:34.500

[在这里](http://danielsokolowski.blogspot.ru/2012/08/setuptools-includepackagedata-option.html)找到了对我有用的解决方案。

使用`setuptools==2.0.2`我做了：

```
setuptools.setup(
    ...
    packages=setuptools.find_packages(),
    include_package_data=True,  # use MANIFEST.in during install
    ...
) 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-09T20:01:35.753

我个人不喜欢 setuptools 在概念上和实现上混合代码和数据的方式。我认为正是这种实现让你陷入了困境。为了让 setuptools 找到并使用 package_data，它需要将数据驻留在 python 包中。python包可以是一个目录，但目录中必须有一个`__init__.py`文件。所以看起来你需要以下（空的很好）文件：

```
./package_fiddler/data/__init__.py
./package_fiddler/data/stylesheets/__init__.py 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-09-17T16:53:51.417

The easiest way to include package data in "setup.py" is like so:

```
package_data = {'<package name>': ['<path to data file within package dir>']} 
```

So in your example:

```
package_data = {'package_fiddler': ['data/*', 'data/stylesheets/*']} 
```

`package_data` is a dictionary where the keys are the names of the packages included in the installer. The values under these keys should be lists of specific file paths or globs/wildcards within the package directory.

You also need to include the flag:

```
zip_safe=False 
```

in `setup(...)` if you want to be able to resolve file system paths to your data. Otherwise you can use `pkg_resources` to do this: [http://peak.telecommunity.com/DevCenter/PythonEggs#accessing-package-resources](http://peak.telecommunity.com/DevCenter/PythonEggs#accessing-package-resources)

You definitely don't need an `__init__.py` file in the "data" directory - this directory is not a module and is not meant to be imported.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-09T11:41:07.803

利用

```
package_data={"data": ['package_fiddler/data',]} 
```

代替

```
packages=['package_fiddler',] 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-12-28T22:42:15.757

这对我有用。希望能帮助到你。

```
package_data={
    "package_fiddler": [
        '\*.\*',
        '\*/\*.\*',
        '\*/\*/\*.\*',
    ],
}, 
```

# ios - 如何添加橡皮擦 cocos2d？

> ID：13307409
> 
> 赞同：2
> 
> 时间：2012-11-09T11:38:13.617
> 
> 标签：ios, cocos2d-iphone

这是我的 cocos2d 屏幕。我想添加橡皮擦。（不干净只是像橡皮擦一样擦除线条）。背景是图像。所以它不应该被删除。我该怎么做？

![这是截图](../Images/51a8b5d29646f41bbd4d95228298495e.png)

编辑：我使用了这段代码。[https://github.com/krzysztofzablocki/smooth-drawing](https://github.com/krzysztofzablocki/smooth-drawing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:45:19.667

Yatanadam，我认为您最初的问题非常广泛，并且能够解决您的所有问题，它需要有人了解您要使用的示例的所有代码。如果您要求提供特定的代码片段或提供有关示例的更多信息，您会更快地找到答案。

我做了一个快速检查，在 LineDrawer.m 类中有一个名为 draw 的方法，它首先计算所需曲线所需的点，然后调用 drawLines 来完成实际的绘图工作。您可以尝试计算需要消除哪些点，然后从数组点中删除它们。每次用户触摸屏幕进行擦除时，您都需要从数组中删除点以使其工作。

不过，您所问的需要对样本有更深入的了解

# c# - 如何在动态创建的 Gridview 中创建按钮？

> ID：13307415
> 
> 赞同：0
> 
> 时间：2012-11-09T11:38:46.123
> 
> 标签：c#, button, gridview, datatable

我正在使用 AJAX 控件工具包来创建`Tabpanels`. 根据以下代码，每个面板都填充了一个网格视图。

现在，我想每行添加一个按钮。单击它时，它应该作为参数传递该行的单元格之一，但是由于 Gridview 是动态创建的，我不知道如何。有小费吗？

```
foreach (DataTable dt in DataSet1.Tables)
{
    GridView gv = new GridView();
    var thepanel = new AjaxControlToolkit.TabPanel();
    gv.DataSource = dt;
    gv.DataBind();
    thepanel.Controls.Add(gv);
    TabContainer.Controls.Add(thepanel);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:31:05.307

您可以将选择按钮添加到网格中，如下所示：

```
Gridview1.AutoGenerateSelectButton=true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:43:22.833

我刚刚找到了一个可能感兴趣的解决方案：

首先，您应该在数据绑定之前包含以下行：

```
gv.RowDataBound += gv_RowDataBound;
gv.RowCommand += gv_RowCommand; 
```

然后定义 RowDataBound 以插入 Linkbutton：

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {

            LinkButton butIgnorar = new LinkButton()
            {
               CommandName = "Ignorar",
               ID = "butIgnorar",
               Text = "Ignorar",
               //optional: passes contents of cell 1 as parameter
               CommandArgument =  e.Row.Cells[1].Text.ToString()
            };
            //Optional: to include some javascript cofirmation on the action
            butIgnorar.Attributes.Add("onClick", "javascript:return confirm('Are you sure you want to ignore?');");
            TableCell tc = new TableCell();
            tc.Controls.Add(butIgnorar);
            e.Row.Cells.Add(tc);
        }
    } 
```

最后，您从 RowCommand 调用命令

```
protected void gv_RowCommand(object sender, GridViewCommandEventArgs e)
    {

        string currentCommand = e.CommandName;
        string parameter= e.CommandArgument.ToString();

        if (currentCommand.Equals("Ignorar"))
        {
            yourMethodName(parameter);
        }
    } 
```

希望这对某人有帮助！

# scala - 可以按名称调用的Scala变量参数列表？

> ID：13307418
> 
> 赞同：9
> 
> 时间：2012-11-09T11:39:09.883
> 
> 标签：scala

我有一些这样的代码：

```
def foo (s: => Any) = println(s) 
```

但是当我想将其转换为具有可变长度的参数列表时，它将不再编译（在 Scala 2.10.0-RC2 上测试）：

```
def foo (s: => Any*) = println(s) 
```

我必须写什么，它是这样工作的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T12:23:59.527

您必须改用零参数函数。如果你愿意，你可以

```
implicit def byname_to_noarg[A](a: => A) = () => a 
```

接着

```
def foo(s: (() => Any)*) = s.foreach(a => println(a()))

scala> foo("fish", Some(7), {println("This still happens first"); true })
This still happens first
fish
Some(7)
true 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-10T01:00:02.940

有一个问题： [https ://issues.scala-lang.org/browse/SI-5787](https://issues.scala-lang.org/browse/SI-5787)

对于接受的答案，要恢复所需的行为：

```
object Test {
  import scala.language.implicitConversions
  implicit def byname_to_noarg[A](a: => A) = () => a
  implicit class CBN[A](block: => A) {
    def cbn: A = block
  }
  //def foo(s: (() => Any)*) = s.foreach(a => println(a()))
  def foo(s: (() => Any)*) = println(s(1)())
  def goo(a: =>Any, b: =>Any, c: =>Any) = println(b)

  def main(args: Array[String]) {
    foo("fish", Some(7), {println("This still happens first"); true })
    goo("fish", Some(7), {println("This used to happens first"); true })
    foo("fish", Some(7), {println("This used to happens first"); true }.cbn)
  }
} 
```

原谅lolcats语法。

# ruby - “.each do |x|”的循环控制器 在再培训局

> ID：13307419
> 
> 赞同：1
> 
> 时间：2012-11-09T11:39:14.250
> 
> 标签：ruby, loops, erb

我正在尝试`object.each do |x|`通过应用 .active 类来通过命令设置第一个元素输出的样式。我无法弄清楚 - 我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T11:50:27.847

使用`each_with_index()`. 为清楚起见，在下面的非 ERB 示例中显示。

```
['hello', 'world'].each_with_index do |item, index|
  if index == 0
    puts "This is the first item"
  end

  puts item
end 
```

打印出来：

```
This is the first item
hello
world 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:25:55.177

这似乎很明显：

```
objects.first.css_options += ' .active' 
```

然后以通常的方式遍历所有对象。

如果变化可能不同，例如您还希望将 css 选项应用于最后一个元素：

```
objects.zip(['active','','',...]).each do |obj,klass|
  obj.css_option += klass
  ...
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T13:08:06.900

```
[obj1, obj2].each_with_index do |item, index|
  item.css_option += ' .active' if index == 0
end 
```

# amazon-web-services - Amazon 的预置 IOPS 是硬性限制还是保证最低？

> ID：13307428
> 
> 赞同：5
> 
> 时间：2012-11-09T11:39:56.427
> 
> 标签：amazon-web-services, amazon-rds, amazon-ebs, provisioned-iops

[预置 IOPS](http://aws.typepad.com/aws/2012/08/fast-forward-provisioned-iops-ebs.html)是硬限制吗？IO 峰值是否会超过预置 IOPS 的数量？

我无法轻易找到关于这个问题的明确答案。虽然我几乎认为它是作为硬限制强制执行的，但文档并不是很确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:39:56.427

根据[已发布的基准测试结果](http://aws.typepad.com/aws/2012/08/ebs-provisioned-iops-some-interesting-resources.html)和一些自己的测试，不可能超过预置 IOPS 的数量。这在很大程度上暗示了一个硬性限制。

更新：

我刚刚看到一个具有 4000 预置 IOPS 的 RDS 实例在大约 20 分钟内获得大约 4400 IOPS，同时同时导入转储（几 GB）。因此，预置的 IOPS 不是硬性限制。但是，尽管有可能超过规定的限制，但期望这样可能不是一个好主意。

# netbeans - 为什么tomcat运行的tomcat实例只对localhost地址可见，而不是我的真实网络ip？

> ID：13307429
> 
> 赞同：0
> 
> 时间：2012-11-09T11:39:55.963
> 
> 标签：netbeans, tomcat7, ubuntu-12.04

我有带有 tomcat 7 的 netbeans 7.1.2 和一个 javaEE Web 应用程序。每当我从 netbeans 运行项目时，我只能在“localhost”上看到运行，而不是在任何其他 ips 或地址（例如“192.168.0.1”）上运行

我怎么解决这个问题？

我的操作系统是 ubuntu 12.04。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-22T21:58:44.557

请试试这个：

在 Apache 的文件配置**Httpd.conf**中为 Tomcat 服务（连接器文件）的行（假设在 Windows 中）：

```
Include ".../Tomcat/conf/auto/mod_jk.conf" 
```

在文件**mod_jk.conf**中，您可能有：

```
...
JkWorkersFile "...LocationOfYourWorkerFile..."
...
<VirtualHost localhost>
  ...
  ServerName localhost
  ...
  JkMount /*.jsp ajp13
</VirtualHost> 
```

其中**ajp13**是 JkWorkersFile 中定义的 Tomcat 工作者。

在**JkWorkersFile**中，您可能有：

```
worker.list=ajp13
worker.ajp13.port=8009
worker.ajp13.host=localhost
worker.ajp13.type=ajp13
# END workers.properties 
```

**在mod_jk.conf**文件中更改为：

```
<VirtualHost  *:80>
  ...
  ServerName localhost
  ...
  JkMount /*.jsp ajp13
</VirtualHost> 
```

在这种情况下，您是说不仅适用于 localhost，而且适用于所有通过 80 端口的 ip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:27:46.160

这可能是因为您的 Internet 服务提供商可能没有为您提供在 Internet 上运行您的应用程序所必需的全局 IP 地址。要检查您是否有全局 IP 地址，请输入`ipconfig`命令提示符并检查所有可用的 IP地址。您可以联系您的 ISP 要求全球 IP 地址！

# spring - 我可以使用占位符将文本动态添加到使用 Spring 的 @Value 注释从属性文件导入的字符串中吗

> ID：13307431
> 
> 赞同：0
> 
> 时间：2012-11-09T11:39:57.207
> 
> 标签：spring, properties, annotations

有谁知道我是否可以将占位符与 Spring 的 @Value 注释一起使用？

例如：

```
@Value("${a.url.from.propertiesFile}")
private void setUrl(String myUrlFromProperties) 
{
    this.url = myUrlFromProperties;
} 
```

我的属性文件将在哪里：

```
a.url.from.propertiesFile=/firstPartOfUrl{dynamicBitToAddTo}restOfUrl 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:12:26.380

是的，你可以这么做。

在这种情况下，如果您在参数中传递了一个空值，那么将采用注释 @Value 定义的默认值。

但是，如果您在参数中传递一个非空值，那么它将不会采用默认值。

希望这对您有所帮助。

# php - 使用 p4a，我如何在 MySQL 数据库中插入一行？

> ID：13307432
> 
> 赞同：0
> 
> 时间：2012-11-09T11:40:04.107
> 
> 标签：php, mysql, zend-framework

我正在使用 p4a 应用程序框架，我需要通过我之前制作的字段将行插入到我的数据库中，当用户按下提交时，数据库应该更新，因此其他新行应该能够制作等。

我正在努力寻找如何将数据输入到数据库中，我可以通过将值放入 sql 语句中轻松地做到这一点，但这对我来说完全陌生，

代码是：

```
public function submit()

{

    $location = $this->location->getNewValue();           
        $date = $this->date->getNewValue();
        $merono = $this->merono->getNewValue();

    $sql = $db->query("INSERT INTO 'meetingrooms'(location, date, merono)
        VALUES
        ($location, $date, $merono)");

    p4a_db::singleton()->newRow($sql, array($location));

$this->load(); 
```

位置、日期和 merono 都设置在我在此函数之前创建的字段中，它应该像我之前为登录页面所做的那样工作，所以我知道第一部分应该获取变量。并且因为我之前访问过数据库，所以我知道它正在连接，所以它必须与 MySQL 语句有关。

谢谢，
史蒂夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:41:51.193

在您的查询中，我发现您用单引号将表名括起来，如果您想转义 tableName 或 columnName 使用`backtick`，

```
INSERT INTO `meetingrooms`(location, date, merono)
       VALUES ($location, $date, $merono) 
```

但由于您的 tableName 不是保留字或包含任何无效字符，您可以摆脱反引号。

如果要在表上插入非数字值，请用单引号将其括起来，

```
INSERT INTO meetingrooms (location, date, merono)
       VALUES ('$location', '$date', '$merono') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:27:29.130

我终于设法弄清楚了（即使这个问题只活跃了几分钟 XD）

SQL 语句一开始是错误的（感谢 John Woo 的帮助（y））现在语句变为：

```
query("INSERT INTO meetingrooms(location, date, merono)
        VALUES
        ('$location', '$date', '$merono')"); 
```

这个成功的语句允许将放置在 $location $date 和 $merono 中的变量插入到表中，并在语句的开头添加额外的内容

如下：

```
p4a_db::singleton()-> 
```

这调用了我在这个弹出类中创建的 P4A 数据库扩展，无法访问，

所以现在完整的功能是：-

```
public function submit()

{

    $location = $this->AreaName->getNewValue();
    $date = $this->date->getNewValue();
    $merono = $this->merono->getNewValue();

    p4a_db::singleton()->query("INSERT INTO meetingrooms(location, date, merono)
        VALUES
        ('$location', '$date', '$merono')"); 
```

谢谢您的帮助，

史蒂夫。

# activerecord - ActiveRecord 查询超时

> ID：13307436
> 
> 赞同：1
> 
> 时间：2012-11-09T11:40:18.583
> 
> 标签：activerecord, timeout

我想使用 Ruby 核心的 Timeout 使 ActiveRecord 查询超时，但是 ActiveRecord 似乎正在捕获`Timeout::Error`并将其包装在`ActiveRecord::StatementInvalid`异常中。

```
> Timeout::timeout(3) { sleep 4000 }
Timeout::Error: execution expired
...

> Timeout::timeout(3) { ActiveRecord::Base.connection.execute "select pg_sleep(4)"}
(3001.5ms)  select pg_sleep(4)
: execution expired: select pg_sleep(4)
ActiveRecord::StatementInvalid: : execution expired: select pg_sleep(4)
... 
```

这很不幸，因为我还想捕获生成`ActiveRecord::StatementInvalid`异常的真正 SQL 错误并以不同的方式处理它们。有没有办法区分两者？（比匹配“执行已过期”的异常消息更清晰）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:59:29.080

尝试使用此代码：

```
begin  
  Timeout::timeout(3) do  
    begin  
      ActiveRecord::Base.connection.execute "select pg_sleep(4)"  
    rescue ActiveRecord::StatementInvalid  
      # handle ActiveRecord::StatementInvalid exception  
    end
  end
rescue Timeout::Error  
  # handle Timeout::Error exception
end 
```

如果你想接收 Timeout::Error 你应该在 timeout 块中捕获所有其他异常。

# jquery - 带有基本身份验证的 href 链接

> ID：13307446
> 
> 赞同：1
> 
> 时间：2012-11-09T11:40:56.120
> 
> 标签：jquery, html

> **可能重复：**
> [如何使用 Basic Auth 和 Jquery 和 Ajax](https://stackoverflow.com/questions/5507234/how-to-use-basic-auth-and-jquery-and-ajax)

我有一个网站，如果我通过基本身份验证登录，效果很好。但是当我想下载一个 .pdf 文件（由服务器生成）时，我会弹出一个弹出窗口，其中包含我需要登录的信息......再次：/。

我怎样才能防止这种情况？或者如何通过链接发送基本身份验证信息？我看到了一些例子，比如：[http://username:password@yourserver.com/filename.pdf](http://username:password@yourserver.com/filename.pdf)。但这在 IE 中不起作用。

我怎样才能只用 html 和或 jQuery 来解决这个问题？

编辑：我通过网站中的表格登录，这很有效。但是，当我想在登录时下载 .pdf 文件时，我会弹出窗口。

```
<a href="http://yourserver.com/yourpdffile.pdf">Report1.pdf</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:43:08.350

基本身份验证是基于服务器的，HTML 和 jQuery 在这里都束手无策。

但是，在向此类页面发送 AJAX 请求之前，您可以提供这些详细信息。这是一个例子。

```
$.ajax({
    'url': 'http://yourdomain.com/action/',
    'beforeSend': function(xhr) {
        xhr.setRequestHeader("Authorization", "Basic " + encodeBase64(username + ":" + password) 
    },
    //.....
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:46:33.937

从理论上讲，您编写的方式是可能的（浏览器和服务器都应该支持）。不过，那是

1.  出于安全考虑，这是一个坏主意（每个人都可以看到用户名和密码！）和
2.  正如您所写，它不完全受支持。

我不知道为什么它在IE中不起作用，但最好不要使用它。

# java - 导出 Java 对象并将其导入 matlab

> ID：13307450
> 
> 赞同：1
> 
> 时间：2012-11-09T11:41:17.043
> 
> 标签：java, matlab, serialization

我尝试将大型数组从 java 获取到 matlab 中。我的问题是，java程序很大，无法在matlab中运行java，所以我需要从java中导出数据并将其加载到matlab中。有人试过这个吗？

这就是我得到的结果：我编写了一个包含所有应该导出的值的类

```
------- Export.java -------
import java.io.Serializable;
public class Export implements Serializable {
private double[][] values;
private String description;
public Export(String description,double[][] values){
    this.description=description;
    this.values=values;
}
public String getDescription(){return description;}
public double[][] getValues(){return values;}
}
-------------------------- 
```

和一个主要方法

```
------- StartPoint.java -------
public class StartPoint {
public static void main(String[] args) {
    Export serial= new Export("description",new double[][]{{1,2},{3,4}});
      OutputStream file;
    try {
        file = new FileOutputStream( "object.ser" );
        OutputStream buffer = new BufferedOutputStream( file );
        ObjectOutput output = new ObjectOutputStream( buffer );
        output.writeObject(serial);
        output.close();
    } 
    catch (FileNotFoundException e) {e.printStackTrace();}
    catch (IOException e) {e.printStackTrace();}
    System.out.println("done");
    }
}
-------------------------- 
```

根据[http://www.weizmann.ac.il/matlab/techdoc/matlab_external/ch_java9.html，matlab](http://www.weizmann.ac.il/matlab/techdoc/matlab_external/ch_java9.html)代码应该很容易，但我不明白。因此，对 matlab 代码的任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:51:13.057

为了方便在 Matlab 中导入，我建议您使用[MAT 文件格式](http://www.mathworks.com/help/pdf_doc/matlab/matfile_format.pdf)编写数据。然后您将能够将文件[加载](http://www.mathworks.se/help/matlab/ref/load.html)到 Matlab 变量中。

# enums - EclipseLink 将 Enum 转换为 BigDecimal

> ID：13307452
> 
> 赞同：0
> 
> 时间：2012-11-09T11:41:37.407
> 
> 标签：enums, eclipselink, converter, bigdecimal, column-types

我尝试使用 EclipseLink 的转换器将 Enum 转换为 BigDecimal。转换有效，但生成的数据库列具有字符串类型。是否可以设置一个参数，即 EclipseLink 在数据库中构建十进制列类型？

我使用了一个类，它实现了 org.eclipse.persistence.mappings.converters.Converter。

应用服务器日志

默认表生成器无法定位或将 java 类型 (null) 转换为数据库字段 (xyz) 的数据库类型。生成器使用 java.lang.String 作为字段的默认 java 类型。

此消息是为使用转换器的每个字段生成的。如何为这些字段定义特定的数据库类型？

```
public enum IndirectCosts {

EXTENDED {
    public BigDecimal getPercent() {
        return new BigDecimal("25.0");
    }
},
NORMAL {
    public BigDecimal getPercent() {
        return new BigDecimal("12.0");
    }
},
NONE {
    public BigDecimal getPercent() {
        return new BigDecimal("0.0");
    }
};

public abstract BigDecimal getPercent();

public static IndirectCosts getType(BigDecimal percent) {
    for (IndirectCosts v : IndirectCosts.values()) {
        if (v.getPercent().compareTo(percent) == 0) {
            return v;
        }
    }
    throw new IllegalArgumentException();
}
} 
```

数据库必须存储数值。我使用这样的转换器：

```
public class IndirectCostsConverter implements Converter {

@Override
public Object convertObjectValueToDataValue(Object objectValue, Session session) {
    if (objectValue == null) {
        return objectValue;
    } else if (objectValue instanceof IndirectCosts) {
        return ((IndirectCosts) objectValue).getPercent();
    }
    throw new TypeMismatchException(objectValue, IndirectCosts.class);
}

@Override
public Object convertDataValueToObjectValue(Object dataValue, Session session) {
    if (dataValue == null) {
        return dataValue;
    } else if (dataValue instanceof String) {
        return IndirectCosts.getType(new BigDecimal((String) dataValue));
    }
    throw new TypeMismatchException(dataValue, BigDecimal.class);
}

@Override
public boolean isMutable() {
    return false;
}

@Override
public void initialize(DatabaseMapping databaseMapping, Session session) {
}
} 
```

在`convertDataValueToObjectValue(Object`我必须使用的范围内，`String`因为 SQL 生成器将数据库列定义为 varchar(255)。我想要小数（15,2）或其他东西。

非常感谢安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:47:43.133

EclipseLink Converter接口定义了一个initialize(DatabaseMapping mapping, Session session)；可用于设置用于字段的类型的方法。其他人在此处发布了一个示例，展示了如何从映射中获取字段：[Using UUID with EclipseLink and PostgreSQL](https://stackoverflow.com/questions/13346089/using-uuid-with-eclipselink-and-postgresql)

如果设置了 DatabaseField 的 columnDefinition，它将是唯一用于定义 DDL 生成类型的东西，因此请谨慎设置。仅当未设置 columnDefinition 时，才会使用其他设置（非 null、可为 null 等）。

# c# - 对象引用未设置为 Windows 8 应用程序中的对象实例

> ID：13307460
> 
> 赞同：2
> 
> 时间：2012-11-09T11:41:56.510
> 
> 标签：c#, .net, windows-8

因此，在查看了无数资源试图找出这真正意味着什么之后，我发现绝对没有任何用处。让我们澄清一下，我知道错误是什么意思。但我不知道是什么原因造成的。我的代码如下：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    ListView selector = this.itemListView;
    FeedItem item = selector.SelectedItem as FeedItem;
    if (item != null && this.Frame != null)
    {
        this.Frame.Navigate(typeof(WebViewPage), item.Title); //This line is the problem
    }
} 
```

我正在尝试做的是根据 itemListView 中的选择导航到完整的 webview 页面。我通过使用 AppBar 按钮来做到这一点。当我逐行浏览此代码时，一切都按预期运行，直到我尝试导航。在导航之前，我的所有对象都不是空的（根据智能感知和输入 if 语句的事实），并且在我逐步完成导航后它仍然是这种方式。该程序没有失败，它只是在 Intellitrace 框中显示为异常，并且导航永远不会发生，让用户尽可能多地单击 appbar 按钮无济于事。

Webview 页面代码（根据 IntelliTrace，我实际上从未接触过此页面中的任何代码）。

```
protected override void LoadState(Object navigationParameter, Dictionary<String,Object> pageState)
{
    FeedItem item = FeedUtilities.GetItemByTitle((string)navigationParameter);
    pageTitle.DataContext = item;

    itemContentWebView.Navigate(item.Link);
} 
```

这几天让我很沮丧，所以非常感谢任何和所有的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-29T07:27:43.013

尝试这个：

```
var rootFrame = new Frame();
rootFrame.Navigate(typeof(SearchResultsPage1));

Window.Current.Content = rootFrame;
Window.Current.Activate(); 
```

# c++ - Qt 中的可伸缩 gui

> ID：13307466
> 
> 赞同：0
> 
> 时间：2012-11-09T11:42:20.863
> 
> 标签：c++, qt, user-interface, aspect-ratio

是否可以在 C++/Qt 中创建一个在屏幕上无缝延伸的 GUI？我不是指 GUI 元素（按钮/文本等）的重新排列，我指的是 GUI 纵横比的完全变化，因为它是纯图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:56:30.343

Qt 使用大小策略[Qt doc](http://doc.qt.digia.com/qt/qsizepolicy.html)来定义 GUI 如何调整大小。将元素设置为应该消耗额外空间的 QSizePolicy::Expanding。

# javascript - 是否可以为已用于加载 PDF 文件的 iframe 触发按键事件

> ID：13307468
> 
> 赞同：1
> 
> 时间：2012-11-09T11:42:35.140
> 
> 标签：javascript, html, pdf

我 99% 确定这是不可能的，但我会问一下，以防有人有想法。

**一点背景：**

我的用户使用条形码扫描仪将物品托运出系统。每个条形码都是一个 ID 号，前面有一个“^”（因此系统可以判断是否有人在扫描，而不仅仅是打字）。当他们扫描每个条形码时，页面会自动下载 PDF（到 iframe），该 PDF 打印在标签上并粘贴在盒子上。然后他们移动到下一个和下一个等等。

`onkeypress`自动打印由附加到文档的事件处理。这是被调用的函数：-

```
function quickEntry() {
    if (String.fromCharCode(event.keyCode) == "^") {
        if (!scanning) {
            grn = '';
            scanning = true;
            setTimeout('addBarcode()', 1000);
        }
        else {
            alert("Still processing previous GRN.");
        }
    }
    else
        grn += String.fromCharCode(event.keyCode);
} 
```

**问题：**

问题是，在打印第一个标签后，即使窗口本身仍然具有焦点，用户也需要单击主 html 文档的某个区域才能再次扫描条形码。

**编辑**

任何遇到此问题的人都可以查看[此问题](https://stackoverflow.com/questions/34094059/print-pdf-created-in-itextsharp-and-then-return-control-to-browser)以获取更多最新答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:08:20.813

我的猜测是窗口有焦点，但`input`元素失去了焦点（焦点可能已经移动到其中的`iframe`某个元素或某个元素）。

[要找出哪个元素偷走了你的注意力，你可以使用`document.activeElement`](https://stackoverflow.com/questions/497094/how-do-i-find-out-which-javascript-element-has-focus)并更改它的 CSS 样式以使其更加突出，或者使用 CSS 和`:focus`选择器。

要解决您的问题，请`iframe`使用 JavaScript 打印，然后将焦点重新放在`input`元素上。

这可能涉及主页面和`iframe`;之间的 JavaScript 调用。这个网站上有[答案](https://stackoverflow.com/questions/6271313/pass-a-javascript-variable-from-an-iframe-to-the-parent-frame)如何做到这一点。

**[编辑]**有几种方法可以将 PDF 嵌入网页。当您使用 时`iframe`，PDF 插件将控制浏览器窗口（因此它可以响应键盘和鼠标事件）。

尝试使用`<object>`(pdfobject.com/markup/index.php) 加载 PDF，而不是使用`iframe`

# java - Java中的并发修改异常

> ID：13307471
> 
> 赞同：3
> 
> 时间：2012-11-09T11:42:45.610
> 
> 标签：java, list, arraylist, concurrentmodification, listiterator

我在执行此代码时收到 ConcurrentModificationException。我无法弄清楚为什么会这样？

```
private void verifyBookingIfAvailable(ArrayList<Integer> list, int id) {

        Iterator<Integer> iterator = list.iterator();
        while (iterator.hasNext()) {
                int value = iterator.next();
                if (value == id) {
                    int index = list.indexOf(id);

                    if (index != -1) {
                        list.remove(index);
                    }
                }
        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T11:44:39.697

您正在使用`list`引用本身删除列表中的元素，它可以抛出`ConcurrentModificationException`. 请注意，这有时可能会起作用，但并非总是如此，并且不能保证完美地工作。

此外，即使您使用`Iterator`迭代列表，您仍然不应该使用`list.remove`，您应该只使用`iterator.remove()`删除元素，否则它不会有任何区别，无论您使用迭代器还是增强的 for 循环。

因此，用于`iterator.remove()`删除元素。

```
if (index != -1) {
    iterator.remove(value);
} 
```

请参阅这篇文章：- [java-efficient-equivalent-to-removing-while-iterating-a-collection](https://stackoverflow.com/questions/223918/efficient-equivalent-for-removing-elements-while-iterating-the-collection)以获得更详细的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:45:32.963

仅仅是因为您试图`ArrayList`在迭代它们时从中删除元素。要解决此问题，请使用[java.util.concurrent.CopyOnWriteArrayList](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:45:36.090

发生的情况是 ArrayList 迭代器并非旨在在您对其进行迭代时启用修改。

所以，为了避免来自不连贯数据的更严重的错误，它有一个修改计数，当你删除一个项目时更新它，并在你迭代时检查：

从 ArrayList.java ：

```
411     public E remove(int index) {
412         rangeCheck(index);
413 
414         modCount++;
415         E oldValue = elementData(index);
416 
417         int numMoved = size - index - 1;
418         if (numMoved > 0)
419             System.arraycopy(elementData, index+1, elementData, index,
420                              numMoved);
421         elementData[--size] = null; // Let gc do its work
422 
423         return oldValue;
424     }
     ...
779 
780         final void checkForComodification() {
781             if (modCount != expectedModCount)
782                 throw new ConcurrentModificationException();
783         } 
```

如 javadoc 中所述：

> 返回的列表迭代器是快速失败的。

为避免此问题，请使用迭代器删除当前元素，而不是直接删除列表。迭代器的`remove`方法确保迭代器保持一致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T11:45:37.113

试试这个

```
private void verifyBookingIfAvailable(ArrayList<Integer> list, int id) {

        List<Integer> tempList =new ArrayList<Integer>();
    tempList.addAll(list);

     for(Integer value :tempList) {

         if (value == 1) {
             int index = tempList.indexOf(1);

             if (index != -1) {

                 list.remove(index);
             }
         }
 }
} 
```

迭代时，您正在删除对象

# android - Android USB 安装尺寸

> ID：13307474
> 
> 赞同：1
> 
> 时间：2012-11-09T11:42:59.523
> 
> 标签：android, root

我有一个 Android 设备，它有一个“su”二进制的变体，它不回显传递的命令的标准输出。所以，我看不到“su -c df”告诉我什么。有没有办法在不使用 df 的情况下获取安装到设备的 USB 闪存的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:33:49.483

您可以使用以下标准方法来发现 sdcard 的大小：

```
StatFs stat = new StatFs(Environment.getExternalStorageDirectory().getPath());
long size = (long)stat.getBlockSize() * (long)stat.getBlockCount(); 
```

因此，您看到您唯一需要的就是安装点的路径。

# firewall - 需要帮助在我的 Intranet 中打开 stackoverflow

> ID：13307479
> 
> 赞同：1
> 
> 时间：2012-11-09T11:43:11.043
> 
> 标签：firewall, webproxy

当我在受防火墙保护的 Intranet 上打开 www.stackoverflow.com 时遇到问题，打开速度非常慢并且只出现文本，浏览器上没有图像或格式呈现。

我的管理员说他已经在网络拦截器中进行了设置以允许该网站，但是如果该网站打开任何其他网址，那么我必须告诉他然后他将取消阻止该网址，

请建议我在防火墙中需要哪些设置才能打开此站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:46:53.903

您还需要为`cdn.sstatic.net`和添加例外`ajax.googleapis.com`

# javascript - 没有身份验证的 Twitter 用户时间线 json 请求

> ID：13307480
> 
> 赞同：1
> 
> 时间：2012-11-09T11:43:22.173
> 
> 标签：javascript, html, json, twitter

我正在使用请求 url 的方法，它返回了一个带有预期推文的 JSON。

像这样：[https ://twitter.com/statuses/user_timeline/MyUserHere.json?callback=twitterCallback&count=2](https://twitter.com/statuses/user_timeline/MyUserHere.json?callback=twitterCallback&count=2)

但突然它停止工作了。仅返回错误消息。

也许我错过了 twitter API 中的某些内容。但据我所见，现在您必须登录才能请求此类数据。

有什么方法可以在不暴露我的用户的用户和密码的情况下调用这些推文？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T11:50:34.103

Twitter 将提要 URL 从 [https://twitter.com](https://twitter.com)更改为[https://api.twitter.com/1/](https://api.twitter.com/1/) 所以试试下面

[https://api.twitter.com/1/statuses/user_timeline/MyUserHere.json?callback=twitterCallback&count=2](https://api.twitter.com/1/statuses/user_timeline/MyUserHere.json?callback=twitterCallback&count=2)

此处的示例提要网址

[https://api.twitter.com/1/statuses/user_timeline/codecocktail.rss](https://api.twitter.com/1/statuses/user_timeline/codecocktail.rss)

[你可以在这里](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)找到更多资源

# android - 无法在 Twitter 上通过 AddThis 完成分享

> ID：13307484
> 
> 赞同：0
> 
> 时间：2012-11-09T11:43:55.477
> 
> 标签：android, twitter, twitter-oauth, addthis

如果我尝试使用 TwitPic 将图像发送到 Twitter。

这是我的方法onCreate：

```
...
Config.configObject().setAddThisPubId("...");
    Config.configObject().setAddThisAppId("...");

    Config.configObject().setShouldUseTwitterOAuth(true);
    Config.configObject().setTwitterViaText("Title");

    Config.configObject().setTwitterConsumerKey("...");
    Config.configObject().setTwitterConsumerSecret("...");

    Config.configObject().setTwitPicApiKey("...");

    Config.configObject().setTwitterCallbackUrl(
            "http://addthis.com/mobilesdk/twittertesting");

    Button button = (Button) findViewById(R.id.button);
    button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            try {
                Bitmap bmpImage = BitmapFactory.decodeStream(getAssets()
                        .open("image.png"));

                AddThis.shareItem(MainActivity.this, "twitter", "Title",
                        "Description", bmpImage);

            } catch (IOException e1) {
                e1.printStackTrace();
            } catch (ATDatabaseException e) {
                e.printStackTrace();
            } catch (ATSharerException e) {
                e.printStackTrace();
            }

        }
    });
... 
```

当我尝试分享时，logcat 打印：

```
 11-09 15:35:03.230: I/Activity Group(4646): Service = twitter
    11-09 15:35:03.230: I/Activity Group(4646): Service = twitter
    11-09 15:35:03.230: I/Activity Group(4646): LoadViews
    11-09 15:35:03.230: I/ATTwitter(4646): Already authenticated
    11-09 15:35:03.240: D/dalvikvm(4646): GC_EXTERNAL_ALLOC freed 155K, 49% free 2783K/5447K, external 930K/1038K, paused 10ms
    11-09 15:35:07.590: D/dalvikvm(4646): GC_FOR_MALLOC freed 298K, 50% free 2925K/5767K, external 1037K/1532K, paused 0ms
    11-09 15:35:09.620: I/ATTwitter(4646): Inside async taskTitle: Description via @Cocktail maker: http://twitpic.com/bbnwvm
    11-09 15:35:09.780: D/dalvikvm(4646): GC_FOR_MALLOC freed 179K, 48% free 3081K/5895K, external 973K/1485K, paused 10ms
    11-09 15:35:10.500: I/global(4646): Loaded time zone names for en_US in 100ms.
    11-09 15:35:10.530: E/TwitterConnector(4646): 404: Not Found 
```

并显示 Toast 消息：

```
 Couldnot complete the share, please try again later. 
```

有时 Logcat 打印：

```
11-09 15:40:05.130: I/Activity Group(4714): Service = twitter
11-09 15:40:05.130: I/Activity Group(4714): Service = twitter
11-09 15:40:05.140: I/Activity Group(4714): LoadViews
11-09 15:40:05.160: D/dalvikvm(4714): GC_CONCURRENT freed 160K, 46% free 3115K/5767K, external 1315K/1564K, paused 0ms+0ms
11-09 15:40:05.160: I/ATTwitter(4714): Already authenticated
11-09 15:40:05.170: D/Resources(4714): returning fake Configuration with orientation changed to portrait
11-09 15:40:05.170: D/Resources(4714): returning fake Configuration with orientation changed to portrait
11-09 15:40:06.630: D/Resources(4714): returning fake Configuration with orientation changed to portrait
11-09 15:40:06.630: D/Resources(4714): returning fake Configuration with orientation changed to portrait
11-09 15:40:06.850: D/dalvikvm(4714): GC_FOR_MALLOC freed 325K, 46% free 3398K/6215K, external 1315K/1564K, paused 10ms
11-09 15:40:06.880: D/dalvikvm(4714): GC_CONCURRENT freed 10K, 46% free 3406K/6215K, external 1315K/1564K, paused 0ms+0ms
11-09 15:40:08.420: W/DefaultRequestDirector(4714): Authentication error: Unable to respond to any of these challenges: {}
11-09 15:40:08.420: E/Twitpic(4714): 401: Unauthorized
11-09 15:40:08.420: D/Resources(4714): returning fake Configuration with orientation changed to portrait
11-09 15:40:08.420: I/ATTwitter(4714): Inside async taskBerry Mule: 35 ml Funkin Mixed Berry Puree
11-09 15:40:08.420: I/ATTwitter(4714): 20 ml Funkin Pure Pour Lime
11-09 15:40:08.420: I/ATTwitter(4714): 50 ml Vodka
11-09 15:40:08.420: I/ATTwitter(4714): 50 ml Ginger Beer via @Cocktail maker
11-09 15:40:08.420: D/Resources(4714): returning fake Configuration with orientation changed to portrait
11-09 15:40:09.380: I/global(4714): Loaded time zone names for en_US in 90ms.
11-09 15:40:09.390: W/DefaultRequestDirector(4714): Authentication error: Unable to respond to any of these challenges: {oauth=WWW-Authenticate: OAuth realm="http://twitter.com"}
11-09 15:40:09.390: E/TwitterConnector(4714): 401: Unauthorized 
```

为什么会这样？有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:19:52.107

我认为这是由于 Twitter API 的变化。AddThis 的 Android SDK 需要使用 OAuth 的新端点进行更新。

# sql - SQL 服务器：清除缓存对 IO 统计数据没有影响

> ID：13307485
> 
> 赞同：1
> 
> 时间：2012-11-09T11:43:56.870
> 
> 标签：sql, sql-server, sql-server-2012

使用的查询：

（从网上某处复制了缓存清理代码）

```
CHECKPOINT; 
GO 
DBCC DROPCLEANBUFFERS; 
GO
DBCC DROPCLEANBUFFERS
GO

SET STATISTICS TIME ON;
SET STATISTICS IO ON;

select a.a,a.b from t1 a JOIN t1 b on a.i=b.i 
```

t1 的架构是

```
CREATE TABLE [dbo].[t1](
    [i] [int] NULL,
    [a] [varchar](1000) NULL,
    [b] [varchar](1000) NULL,
    [c] [varchar](1000) NULL
) ON [PRIMARY] 
```

并且 t1 填充了随机数据（`I`范围从 0-11 和 a,b,c 填充了`NEWID()`值）

它包含大约 900 行（准确地说是 934 行）

执行查询的结果是：

> SQL Server 解析和编译时间：CPU 时间 = 0 毫秒，运行时间 = 0 毫秒。
> 
> SQL Server 执行时间：CPU 时间 = 0 毫秒，经过时间 = 55 毫秒。SQL Server 解析和编译时间：CPU 时间 = 0 毫秒，运行时间 = 0 毫秒。DBCC 执行完成。如果 DBCC 打印错误消息，请联系您的系统管理员。
> 
> SQL Server 执行时间：CPU 时间 = 0 毫秒，经过时间 = 4 毫秒。SQL Server 解析和编译时间：CPU 时间 = 0 毫秒，运行时间 = 0 毫秒。DBCC 执行完成。如果 DBCC 打印错误消息，请联系您的系统管理员。
> 
> SQL Server 执行时间：CPU 时间 = 0 毫秒，经过时间 = 1 毫秒。SQL Server 解析和编译时间：CPU 时间 = 0 毫秒，运行时间 = 0 毫秒。
> 
> SQL Server 执行时间：CPU 时间 = 0 毫秒，经过时间 = 0 毫秒。
> 
> SQL Server 执行时间：CPU 时间 = 0 毫秒，经过时间 = 0 毫秒。
> 
> （受影响的 115974 行）表“工作表”。扫描计数 0，逻辑读取 0，**物理读取 0**，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。表 't1'。扫描计数 2，逻辑读取 32，**物理读取 0**，预读读取 20，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> 
> SQL Server 执行时间：CPU 时间 = 79 毫秒，经过时间 = 15858 毫秒。

据我了解，干净的缓存应该会导致大量物理读取，不是吗？

（SQL Server 2012 在 Win 8 主机上的 Hyper V 上运行的 Win 8 来宾 VM 上运行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:45:51.957

您突出显示的项目是针对在查询过程中`Worktable`创建的（例如线轴） 。`tempdb`不是需要从磁盘读取的预先存在的表。

行`t1`应该显示一些物理读取和/或预读读取。

（编辑：没有看到最初包含在内）。下面显示了 20 次预读`t1`

```
Table 't1'. Scan count 2, logical reads 32, physical reads 0, read-ahead reads 20 
```

这意味着所有页面都通过预读机制进入缓存。

# android - 在android中动态设置微调器位置？

> ID：13307486
> 
> 赞同：1
> 
> 时间：2012-11-09T11:44:12.920
> 
> 标签：android, spinner, android-spinner

我正在开发一个应用程序，我需要根据以前的屏幕值动态设置微调器值。我的代码...

主.java。

```
String[] values = {"All","Only Walk-in","Only Phone","Only Web","Walkin-phone","Walkin-web","phone-web"};

 /*ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item,apttypes);
    spinner.setAdapter(adapter);*/ 
```

但在这里我想要的是从前一个屏幕我得到一些价值（比如微调器位置）。基于此，我需要设置微调器值以显示...

如果我得到值 = 0，则表示上一个屏幕的意思，

我需要设置微调器值以显示顶部值数组中的“全部”。

如果我得到 value= 5 的意思，

我想将微调器值设置为“Walkin-web”

我怎样才能做到这一点。谁能帮我这个...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T11:50:06.253

使用您用来启动它`Activity`的附加功能将之前的值传入。`Intent`然后当你读到值调用

```
int position = getIntent().getIntExtra( "name", defaultValue );
spinner.setSelection( position ); 
```

这会将微调器移动到您选择的索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T11:56:26.210

每次使用以下数组代码并创建新的数组适配器

```
 String[] str=new String[maxsize-4]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T11:50:12.450

```
you can implement onItemClick event on Spinner like this and setSelection(position)

        //Spinner OnItemClick Event here
        payfeeTabStudentNameSpinner.setOnItemSelectedListener(new OnItemSelectedListener(){

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id) {
                payfeeTabStudentNameSpinner.setSelection(position);
                spinnerSelectedValue = parent.getItemAtPosition(position).toString();
            }
            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T11:57:10.310

您可以使用以下代码分配 Spinner 的位置。

```
 Spinner s1;
 -----------
 -----------
 int position=valueFromPrevious;
 s1.setSelection(position);
 -----------
 ----------- 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T11:52:52.803

在您的第一个活动 A.java 中

```
public static String Position = YOUR_SPINNER1.getSelectedItem().toString(); 
```

在您的第二个活动 B.java 中

```
 if(A.Position.equals("0")){
//Set your adapter accordingly
 }else if(A.Position.equals("1")){
//Set your adapter accordingly
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-15T09:39:19.747

使用 Extras 传递先前活动的值，然后当您想在当前活动中使用它时，请遵循以下步骤：

如果你得到字符串值，然后通过 parseInt 方法将其类型转换为整数......

```
String strtext4 = getIntent().getStringExtra("qualification"); 
```

然后

```
int position = Integer.parseInt(strtext4); 
```

在此之后只需将其设置为您的微调器

```
qualificationspinner.setSelection(position); 
```

# grizzly - Grizzly 锁定静态服务资源

> ID：13307489
> 
> 赞同：1
> 
> 时间：2012-11-09T11:44:20.143
> 
> 标签：grizzly

如果带有 StaticHttpHandler 的 Grizzly 正在运行，并且对静态文件（例如 index.html）发出请求，则该文件将被锁定。也就是说，在 Grizzly 运行时无法编辑和保存 index.html。

有任何解决方案或解决方法可以保存当前提供的静态资源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T23:18:42.250

一种可能的解决方法是禁用 FileCache。

```
HttpServer server = HttpServer.createSimpleServer();
server.getNetworkListener("grizzly").getFileCache().setEnabled(false); 
```

如果这没有帮助，我建议您记录一个[问题](http://java.net/jira/browse/GRIZZLY)，以便我们尝试解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-07T13:27:06.580

我在 Grizzly 2.3.16 中找不到 server.getNetworkListnener 方法，所以当我这样做时它对我有用：

```
 HttpServer server = GrizzlyHttpServerFactory.createHttpServer(URI.create(baseUri), rc);
    StaticHttpHandler staticHttpHandler = new StaticHttpHandler("docRoot");
    staticHttpHandler.setFileCacheEnabled(false);
    server.getServerConfiguration().addHttpHandler(staticHttpHandler); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-19T01:18:32.700

我为此挣扎了一段时间。上面的帖子有效，但前提是在服务器启动后完成。

如果您在运行之前将其设置为 false，则服务器会在您启动它时重新打开文件缓存。确保在调用 server.start() 后将其关闭，如此处所示。

看起来 Jersey 2.3.17 / Grizzly HttpServer 在您调用时打开缓存

```
server.start(); 
```

尽管在启动之前将其设置为 false。

```
server.start(); // turns file cache back on
handler.setFileCacheEnabled(false); // turn it off again
// get every NetworkListener and set it to false (as these will also lock files)
for (NetworkListener l : server.getListeners()) {l.getFileCache().setEnabled(false);  } 
```

# javascript - 使用已将表单加载到 DOM 中的 jQuery 操作表单字段值

> ID：13307496
> 
> 赞同：0
> 
> 时间：2012-11-09T11:45:17.447
> 
> 标签：javascript, jquery, html, ajax, dom

我有一个 HTML 表单，我根据用户采取的某些操作在 DOM 中上下移动，因此地址表单被加载到一个变量中，以便稍后重新注入到 DOM 中。

```
/* Load the address form into a variable to be re-injected into the dom later */
var address_form = $('#address_temp').html();
$('#address_temp').remove(); 
```

再往下，我进行了 AJAX 调用，并根据我希望用值填充表单字段的响应。因此，表单中有一个地址 1、地址 2 和邮政编码，我想做类似的事情：

```
$.ajax({
   url: "/qualify/",
   dataType: "json",
   data: {
      ajax : 'true',
      lookup : 'true',
      postcode : $('#avail_input').val()                
   },
   success: function(data) {    
      $('#address1').val(data.street);          
      $('#address2').val(data.city);
      $('#postcode').val(data.postcode);
}}); 
```

但是，这不起作用，因为地址已经加载到 DOM 中并且副本已放置在变量中。如何替换表单字段的值？我是否需要将其重新加载回 DOM 以再次操作它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:52:49.447

不要将表单保存为 html 字符串，而是将 dom 本身复制为 jquery 对象：

```
/* Load the address form into a variable to be re-injected into the dom later */
var address_form = $('#address_temp').clone(true);
$('#address_temp').remove(); 
```

然后，即使它不在文档的 dom 中，您也可以操作表单的 dom：

```
success: function(data) {    
      $('#address1', address_form).val(data.street);          
      $('#address2', address_form).val(data.city);
      $('#postcode', address_form).val(data.postcode);
} 
```

我正在做的是在`address_form`.

附言

在我看来，一个更干净的等价物会改变，但这主要是一个品味问题:)

```
success: function(data) {
    address_form
        .find('#address1').val(data.street).end()
        .find('#address2').val(data.city).end()
        .find('#postcode').val(data.postcode);
} 
```

您可能想了解 jQuery 的[clone()](http://api.jquery.com/clone/)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:48:27.357

在成功处理程序中，您将不得不操纵`address_form`变量。我相信这可以这样做：

```
 success: function(data) {    
        address_form.find('#address1').val(data.street);          
        address_form.find('#address2').val(data.city);
        address_form.find('#postcode').val(data.postcode);
  } 
```

# http - http下载文件名

> ID：13307499
> 
> 赞同：57
> 
> 时间：2012-11-09T11:45:23.210
> 
> 标签：http

我可以知道如何为 a-href 文件下载分配文件名。

```
<a href="http://localhost:8080/couch/getFile?dbName=xxx&file=test.xml">get-file</a> 
```

右键另存为：后台运行的服务将返回 test.xml 内容，用户可以将其保存在本地。但是这里每次用户都需要输入一个文件名来保存。相反，我想拉 test.xml。我可以知道如何告诉浏览器使用“test.xml”作为下载文件名吗？

在 HTTP 响应上设置标头会起作用吗？如果是这样，我可以知道我们该怎么做吗？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-11-09T12:28:37.900

您需要附加 HTTP 响应标头“Content-Disposition”

```
Response.AppendHeader("content-disposition", "attachment; filename=\"" + fileName +"\""); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-08-12T22:20:53.797

HTTP 标头[`Content-Disposition`](https://www.rfc-editor.org/rfc/rfc6266#section-4)允许您建议一个文件名。

> Content-Disposition 响应头字段 […] 可用于附加其他元数据，例如在本地保存响应负载时使用的文件名。

如果您查看[BNF](https://www.rfc-editor.org/rfc/rfc6266#section-4.1)，您会看到文件名被指定为[`quoted-string`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html)：

> 引用字符串 = ( <"> *(qdtext | 引用对) <"> )

这将是一个有效的例子：

```
Content-Disposition: attachment; filename="fname.ext" 
```

请注意，单引号`'`无效。如果您需要在文件名中包含引号 (")，您可以使用 ". 然而[RFC-6266 建议避免包含引号](https://www.rfc-editor.org/rfc/rfc6266#appendix-D)：

> 避免在文件名参数的引号字符串形式中包含“”字符，因为某些用户代理不实现转义，并且“”可以被视为非法路径字符。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-07-30T07:08:21.773

在现代浏览器中，您还可以在链接标签上使用下载属性：

```
<a href="http://localhost:8080/couch/getFile?dbName=xxx&file=test.xml" download="test.xml">
    get-file
</a> 
```

[您可以在Can I use](https://caniuse.com/#feat=download)上查看它的支持情况

# java - 如何在列中显示饼图的图例？

> ID：13307500
> 
> 赞同：3
> 
> 时间：2012-11-09T11:45:23.417
> 
> 标签：java, render, jfreechart, legend

我有一个包含许多部分的饼图，这个饼图的图例呈现为一行。如何将图例呈现为两列？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T14:07:14.250

[在这里](https://stackoverflow.com/a/12222818/230513)`getLegendItem()`看到的方法提供了在您选择的任何地方呈现图例项目所需的所有信息。将为任意数量的行将它们排列在两列中。要抑制现有图例，请在调用图表工厂时设置为；[正如此处](https://stackoverflow.com/a/8302953/230513)建议的那样，这些项目仍然可用。`Container``GridLayout(0, 2)``legend``false`

附录：基于[`PieChartDemo1`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/demo/PieChartDemo1.html)，此片段使用`getLegendItems().iterator`和 的变体[`ColorIcon`](https://stackoverflow.com/a/3072979/230513)。

![图例图像](../Images/94a6e96fde013ce9d352fa0543c0fc74.png)

```
public static JPanel createDemoPanel() {
    JPanel panel = new JPanel();
    JFreeChart chart = createChart(createDataset());
    panel.add(new ChartPanel(chart));
    panel.add(createLegendPanel((PiePlot) chart.getPlot()));
    return panel;
}

private static JPanel createLegendPanel(PiePlot plot) {
    JPanel panel = new JPanel(new GridLayout(0, 2, 5, 5));
    Iterator iterator = plot.getLegendItems().iterator();
    while (iterator.hasNext()) {
        LegendItem item = (LegendItem) iterator.next();
        JLabel label = new JLabel(item.getLabel());
        label.setIcon(new ColorIcon(8, item.getFillPaint()));
        panel.add(label);
    }
    return panel;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T13:28:38.213

看看这个关于[*Legend Alignment*](http://www.jfree.org/forum/viewtopic.php?f=3&t=13694&p=175283)的论坛主题，也在（[网络档案](https://web.archive.org/web/20121209023729/http://www.jfree.org/phpBB2/viewtopic.php?f=3&t=13694)）中。

看起来像你正在寻找的东西。如果没有，请发布更多信息或屏幕截图，说明您拥有什么以及您需要什么。

# ios - iOS 6 中的 openActiveSessionWithReadPermissions 同时打开两个“连接系统”

> ID：13307501
> 
> 赞同：0
> 
> 时间：2012-11-09T11:45:25.183
> 
> 标签：ios, facebook-ios-sdk

我正在使用（尝试使用...）适用于 iOS 3.1.1 的 Facebook SDK 和 iOS 6。当我在 iOS 5 模拟器上检查我的应用程序时，一切正常。但是，当我尝试在 iOS 6 中使用 openActiveSessionWithReadPermissions 打开会话时，我遇到了一个问题。两件事同时发生：

1.  出现一些系统要求应用程序的权限：safari、facebook 应用程序或 iOS 6 集成。这部分没问题。但...
2.  在应用程序上方会出现一种弹出窗口，Facebook 要求我们连接到 facebook。这第二个“屏幕”不应该出现。

有人知道它为什么会出现吗？

我想我的项目有问题。因为我将这部分复制到一个新项目中，并且一切正常。

非常感谢，

卡洛斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:49:00.253

我的错误，非常愚蠢的解释。我调用了两次在 Facebook 中连接和发布的方法，然后应用程序出现了“奇怪”的行为。

# tfs - 是否可以通过 VPN 连接设置 TFS 代理服务器？

> ID：13307503
> 
> 赞同：1
> 
> 时间：2012-11-09T11:45:29.827
> 
> 标签：tfs, proxy

是否可以通过 VPN 连接设置 TFS 代理服务器？我们需要通过连接到客户端网络在本地网络上设置 TFS 代理服务器。我们唯一的选择是通过 VPN 连接到客户端网络。

连接到 VPN 后，本地 TFS 代理服务器如何与远程 TFS 服务器通信。需要设置哪些所需的网络连接/通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:44:23.647

TFS 代理服务器需要以下内容：

*   它必须能够连接到主 TFS 服务器。这通常是到 TFS 服务器上端口 8080 的 HTTP 流量。
*   它必须作为有权访问 TFS 的 Windows 帐户运行。这意味着它需要安装在与 TFS 服务器（或受信任的域）在同一域中的机器上*

因此，在您的场景中 - 只要 VPN 连接由 TFS 代理服务器自动拨号，或者您使用的是站点到站点 VPN 设备，那么一切都应该是甜蜜的。

**在 TFS 2010 代理中，您可以使用“影子帐户”在完全不相关的域中的机器上运行它。影子帐户是您在代理服务器上创建本地用户帐户的地方，该帐户具有与 TFS 服务器域中的帐户匹配的用户名/密码。*

# iphone - Core Data 如何避免额外的实体？

> ID：13307508
> 
> 赞同：0
> 
> 时间：2012-11-09T11:45:41.700
> 
> 标签：iphone, ios, cocoa, core-data, entity-relationship

简单的问题：我在销售代表和联系人之间有多对多的关系：

```
SalesRep <<---------------->> Contact 
```

对于每个联系人，每个销售代表都可以指定他是否是收藏夹 ( `BOOL isFavorite`) 并保留一些备注 ( `NSString *notes`)。

当前建模的方式是使用临时实体：

```
SalesRep <------>> Relationship <<-------> Contact 
```

其中附加信息保存在关系实体的两个属性中。

有没有办法绕过新的关系实体，只需使用附加属性对其进行建模？如果注释字段被省略怎么办？是否有父/子实体的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:04:40.287

显然，没有真正的简化机会。
这被视为*最干净*的解决方案。

多谢你们。

# ruby-on-rails - Active Record 中的哈希条件

> ID：13307509
> 
> 赞同：0
> 
> 时间：2012-11-09T11:45:47.730
> 
> 标签：ruby-on-rails, ruby

据我所知，我可以重写这个活动记录查询

```
Some.where("a = :a and b = :b", { :a => params[:a], :b => params[:b] }) 
```

这边走：

```
Some.where(:a => params[:a], :b => params[:b]) 
```

现在我需要重写这个查询：

```
Some.where("a = :a and b > :b", { :a => params[:a], :b => params[:b] }) 
```

我怎么才能得到它 ？

我可以使用范围条件：

```
Some.where(:a => params[:a], :b => params[:b]+1..100000) 
```

但我不能确定在恒定的 100000。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T12:09:20.507

我不明白为什么你“需要”重写它。它按原样工作，并且没有办法在基于哈希的条件下正确地做到这一点。

也就是说，如果你不喜欢 SQL 让你的 Ruby 变得一团糟，你可以看看优秀的[Squeel gem](https://github.com/ernie/squeel)，它可以让你重写类似的东西

```
where("name LIKE :name AND salary < :salary", {:name => "A%", :salary => 50000}) 
```

作为

```
where{(name =~ "A%") & (salary < 50000)} 
```

我认为这很酷。

# drupal - 打印一个内容类型的所有标题

> ID：13307516
> 
> 赞同：0
> 
> 时间：2012-11-09T11:46:11.777
> 
> 标签：drupal, drupal-7

我创建了一个内容类型：“句点”然后，我创建了这个内容类型的实例。现在我想，在一个页面上。Tpl.php 放置说明，以制作我放在此内容类型上的实例的所有标题。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:25:04.517

有很多不同的方法可以实现这一目标。

**Drupal 方式 - 视图**

当您拥有内容类型时，您可以创建一个视图。开始有点复杂，但是一旦你掌握了这个概念，它就是创建列表的最佳方式。但是，这不会导致生成 .tpl.php 文件。 [http://drupal.org/project/views](http://drupal.org/project/views)

**自定义模块**

您可以使用页面创建菜单条目。然后你会想使用 db_query 或 DB API 的其他部分来获取实例，然后你可以自己实现一个模板。

这将是一个相当长的示例，因此我将向您推荐模块开发文档：[http ://drupal.org/node/361112](http://drupal.org/node/361112)

我希望这些是有帮助的。你的问题范围很广。

# jquery - Twitter Bootstrap iFrame 用法？

> ID：13307518
> 
> 赞同：7
> 
> 时间：2012-11-09T11:46:29.550
> 
> 标签：jquery, twitter-bootstrap, jquery-ui-tabs

刚开始探索 Twitter 的 Bootstrap，我喜欢我所看到的。但是，我对如何实现包含 iFrame 的选项卡有疑问。我知道 iFrame 很糟糕，但如果使用得当，它对于显示不同类型的数据很有用。

我有 jQueryUI 选项卡的经验，它允许我在选项卡内显示 iFrame。但是我找不到任何文档可以对 Bootstrap 做同样的事情。

从 jQueryUI 的角度来看，我过去曾这样做过：

```
<div id="tabs">
  <ul>
    <li><a class="tabref" href="#tabs-1" rel="page1-iframe.html">Page 1 Title</a></li>
    <li><a class="tabref" href="#tabs-2" rel="page2-iframe.html">Page 2 Title</a></li>
  </ul>
  <div id="tabs-1"></div>
  <div id="tabs-2"></div>
</div> 
```

以上比标准 jQueryUI 选项卡实现更先进。它允许我偏移 iFrame 的负载，直到用户选择选项卡，这是加载大量页面等时的最佳方式。

但是，我看不到 Bootstrap 的类似方式。

在这里寻找指针。

干杯尼克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T13:52:41.650

下面是使用自定义数据属性和一些 jQuery 的解决方案。或者查看[Bootstrap "LazyLoading" iFrames](http://jsfiddle.net/technotarek/YbT7r/)的相同解决方案的工作 jsFiddle 。

```
<div class="container">
    <div class="row">
        <div class="span12">
            <ul class="nav nav-tabs" id="myTabs">
              <li class="active"><a href="#home" data-toggle="tab">Home</a></li>
              <li><a href="#dpa" data-toggle="tab">DPA</a></li>
              <li><a href="#twon" data-toggle="tab">Antwon</a></li>
            </ul>

            <div class="tab-content">
              <div class="tab-pane active" id="home">
                  <p>test</p>            
                </div>
              <div class="tab-pane" id="dpa" data-src="http://www.drugpolicy.org/">
                  <iframe src=""></iframe>
                </div>
              <div class="tab-pane" id="twon" data-src="http://player.vimeo.com/video/37138051?badge=0">
                  <iframe src="" width="500" height="203" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> <p><a href="http://vimeo.com/37138051">ANTWON ♦ HELICOPTER</a> from <a href="http://vimeo.com/tauszik">Brandon Tauszik</a> on <a href="http://vimeo.com">Vimeo</a>.</p>
                </div>
            </div>
        </div>
    </div>
</div>​

<script>
$('#myTabs').bind('show', function(e) {  

    // identify the tab-pane
    paneID = $(e.target).attr('href');

    // get the value of the custom data attribute to use as the iframe source
    src = $(paneID).attr('data-src');

    //if the iframe on the selected tab-pane hasn't been loaded yet...
    if($(paneID+" iframe").attr("src")=="")
    {
        // update the iframe src attribute using the custom data-attribute value
        $(paneID+" iframe").attr("src",src);
    }
});
</script> 
```

# c# - 如何使用 watin 登录博客？

> ID：13307527
> 
> 赞同：0
> 
> 时间：2012-11-09T11:47:03.010
> 
> 标签：c#, .net, gmail, watin

这是我的代码：

**编辑：**

```
 ie.GoTo("http://blogger.com");
            ie.WaitForComplete();
            ie.TextField("Email").TypeText("test");
            ie.TextField("Passwd").TypeText("test");
            ie.Button(Find.ByValue("Sign in")).Click(); 
```

它不是在电子邮件字段中输入“测试”。

我正在使用 IE 9。

**我得到的例外：**找不到 INPUT（隐藏）或 INPUT（密码）或 INPUT（文本）或 INPUT（文本区域）或 TEXTAREA 元素标记匹配条件：属性“id”等于“电子邮件”在[https://accounts.google .com/ServiceLogin?service=blogger&passive=1209600&continue=http://www.blogger.com/home&followup=http://www.blogger.com/home<mpl=start#s01](https://accounts.google.com/ServiceLogin?service=blogger&passive=1209600&continue=http://www.blogger.com/home&followup=http://www.blogger.com/home&ltmpl=start#s01)

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:17:00.817

使用此答案中列出的代码。 [对 HTML5 标签的 WatiN 支持](https://stackoverflow.com/questions/10024178/watin-support-for-html5-tags)

如果尚未*使用* `WatiN.Core.Native`，则需要将其添加到*using*指令中，或修改 TextFieldExtended 方法声明以具有完整的对象路径：WatiN.Core.Native.INativeElement

```
browser.GoTo("http://www.blogger.com");
browser.ElementOfType<TextFieldExtended>("Email").TypeText("me@you.com"); 
```

像冠军一样工作。仅在 Watin2.1 - IE9 - Win7 上检查

# javascript - 无法让我的 XML 文档删除孩子

> ID：13307531
> 
> 赞同：1
> 
> 时间：2012-11-09T11:47:43.923
> 
> 标签：javascript, xml, dom, removechild

我在从文档中删除 XML 元素时遇到问题。我已经搜索了论坛，我认为我做的事情是正确的，请你能帮我弄清楚我在哪里搞砸了吗？

我有一个包含我正在循环的 ID 的数组。在该循环中，我循环遍历 XML 文档以查找“myId”属性与数组中的 ID 相同的元素。当我找到一个我想从 XML 文档中删除该元素时。

这是我的代码：

```
var xmlFilename=document.getElementById('xmlFilename').value;
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }

    xmlhttp.open("GET",xmlFilename,false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML;

    // lets get all the xml elements into xAll
    var xAll=xmlDoc.getElementsByTagName('*');
    // lets use the buttonList array - this corresponds to the elements in the xml to hide

    for (var i=0; i<buttonList.length;i++) {
        alert ("Looking for "+buttonList[i]);
        //find the XML node with the same id
        for(var j=0;j<xAll.length;j++) {
            y=xAll[j];
            if (y.getAttribute('myId')==buttonList[i]) {
                alert('Found a match');
                xmlDoc.documentElement.removeChild(y);
                alert('removed');
            } 
        }
        alert('next!');
    }
    alert('all done'); 
```

它按预期循环，但是当它找到匹配项时 xmlDoc.documentElement.removeChild(y); 行导致脚本失败，并且永远不会进入“已删除”状态。

我很感激任何正确方向的帮助/指示。

谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:15:27.293

`getElementsByTagName`可以在 DOM 树的所有级别找到元素，而不仅仅是文档元素的直接子元素。与其尝试`y`从*.*`documentElement` _ `y`_

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:30:37.957

尝试：

```
var i = 0, j, y;
for (; i < buttonList.length; i += 1) {
  // Running "backwards" is done on purpose, as `xAll` is a "live" NodeList.
  // If otherwise, you'd run into problems regarding wrong indexes. 
  for(j = xAll.length - 1; j >= 0; j -= 1) {
    y = xAll[j];
    if (y.getAttribute('myId') == buttonList[i]) {
      y.parentNode.removeChild(y);
    } 
  }
} 
```*

# javascript - 在函数中执行 javascript 函数

> ID：13307532
> 
> 赞同：0
> 
> 时间：2012-11-09T11:47:46.030
> 
> 标签：javascript, scope, kineticjs, local-variables

这个问题是指 kineticJS 但问题是关于我相信的嵌套函数的基本逻辑。我在 div 上有一个 kineticjs 阶段：

```
<div id="container"></div> 
```

kineticjs 脚本在舞台上放置了一个形状：

```
function displayVizualization(){
    //SKETCH SIZE
    var SKETCH_WIDTH = 800;
    var SKETCH_HEIGTH = 800;

    var stage = new Kinetic.Stage({
        container: document.getElementById('container'),
        width: SKETCH_WIDTH,
        height: SKETCH_HEIGTH
    });
    var layer = new Kinetic.Layer();

    var rect = new Kinetic.Rect({
        x: 239,
        y: 75,
        width: 100,
        height: 50,
        fill: 'green',
        stroke: 'black',
        strokeWidth: 4
    });

    // add the shape to the layer
    layer.add(rect);

    // add the layer to the stage
    stage.add(layer);

    function updateViz(){
        console.log("we are in the updateViz function")
        var count = document.getElementById("formID:counter").value;
        console.log("count is: "+count);
        rect.transitionTo({
            x: 100*count,
            duration: 2,
            easing: easing
        });
    }
} 
```

我需要在此页面上的另一个脚本中以 oncomplete 属性调用函数“updateViz”。我有句话说：

```
oncomplete: updateViz(); 
```

但是我当然会收到“函数未定义”错误，因为 updateViz() 嵌套在 displayVizualization() 中。

那我应该如何调用 updateViz() 呢？谢谢！

[编辑：将 updateViz() 移到 displayVisualization() 之外对我来说非常好。但是请解释一下 updateViz 中的变量应该如何引用 displayVisualization 中的变量？]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:52:46.950

基本上，您不能，除非您修改`displayVisualization`以返回对其中的引用`updateViz`（或更重要的重构）。这是因为没有**一个** `updateViz`函数，*每次*调用`displayVisualization`. 它们引用（“关闭”）对`rect`* 的不同引用，其中`rect`问题取决于调用。

让我们用一个更简单的例子：

```
function foo(n) {
    setTimeout(bar, 1000);

    function bar() {
        console.log(n);
    }
}
foo(10);
foo(20); 
```

上面的代码会发生什么？你清楚地知道你的东西，所以答案是第一次调用`foo`设置了一个延迟函数调用，该调用将在一秒钟后发生，并将“10”记录到控制台。第二个调用设置记录“20”。

但为什么？因为没有*一个* `bar`函数：`bar`每次调用时都会创建一个函数`foo`，并引用创建它的执行上下文（调用创建的上下文`foo`）。

如果您修改`displayVisualization`为返回对 的引用`updateViz`，那么您可以使用该返回值来调用`updateViz`，因为它将根据需要引用每个函数。

* * *

（我应该提到，大多数现代 JavaScript 引擎实际上不会复制 的*代码*，`bar`它们只会创建多个函数对象，这些函数对象使用不同的执行上下文指针引用相同的底层代码。但这是一个实现细节。）

* * *

* 从技术上讲，它们不会关闭不同的`rect`引用，它们会关闭称为*执行上下文*的东西，其中包含`rect`其他内容。关于闭包的更多信息：[*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:12:21.677

如果上面的代码片段作为单独的 js 文件加载，您可以将变量分配给容器函数并返回对您的函数的引用

```
var displayVizualization = function (){
...
return { updateViz:updateViz }
} 
```

现在您可以使用 updateViz 调用此函数

```
displayVizualization.updateViz() 
```

# java - 使用 HTML 内联外部 CSS

> ID：13307537
> 
> 赞同：8
> 
> 时间：2012-11-09T11:48:31.763
> 
> 标签：java, html, css, parsing, jstyleparser

我正在寻找一个 java 库，它可以根据其 ID/类属性将外部`CSS`文件与文档内联。`HTML`

我找到[**了 jStyleParser**](http://cssbox.sourceforge.net/jstyleparser/index.php)，但我不确定这是否适合我。我似乎无法理解它是否可以完成`CSS`从 HTML 中内联元素的工作。文档和示例不是我所期望的。

有没有人可以回答这个问题，或者是否存在另一个图书馆？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T12:28:16.977

你可以试试[CSSBox](http://cssbox.sourceforge.net)。只需查看包中包含的*ComputeStyles*演示（有关运行演示的信息，请参阅分发包中的*doc/examples/README文件）。*它计算所有样式并使用相应的内联样式定义创建一个新的 HTML 文档（由 DOM 表示）。

源代码在*src/org/fit/cssbox/demo/ComputeStyles.java 中*，而且很短。实际上，它使用 jStyleParser 来完成主要工作，CSSBox 只是为此提供了一个更好的界面。

```
 //Open the network connection 
        DocumentSource docSource = new DefaultDocumentSource(args[0]);

        //Parse the input document
        DOMSource parser = new DefaultDOMSource(docSource);
        Document doc = parser.parse();

        //Create the CSS analyzer
        DOMAnalyzer da = new DOMAnalyzer(doc, docSource.getURL());
        da.attributesToStyles(); //convert the HTML presentation attributes to inline styles
        da.addStyleSheet(null, CSSNorm.stdStyleSheet(), DOMAnalyzer.Origin.AGENT); //use the standard style sheet
        da.addStyleSheet(null, CSSNorm.userStyleSheet(), DOMAnalyzer.Origin.AGENT); //use the additional style sheet
        da.getStyleSheets(); //load the author style sheets

        //Compute the styles
        System.err.println("Computing style...");
        da.stylesToDomInherited();

        //Save the output
        PrintStream os = new PrintStream(new FileOutputStream(args[1]));
        Output out = new NormalOutput(doc);
        out.dumpTo(os);
        os.close();

        docSource.close(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-03T14:30:35.540

我对[JSoup](http://jsoup.org) (v1.5.2) 非常满意。我有这样的方法：

```
 public static String inlineCss(String html) {
    final String style = "style";
    Document doc = Jsoup.parse(html);
    Elements els = doc.select(style);// to get all the style elements
    for (Element e : els) {
      String styleRules = e.getAllElements().get(0).data().replaceAll("\n", "").trim();
      String delims = "{}";
      StringTokenizer st = new StringTokenizer(styleRules, delims);
      while (st.countTokens() > 1) {
        String selector = st.nextToken(), properties = st.nextToken();
        if (!selector.contains(":")) { // skip a:hover rules, etc.
          Elements selectedElements = doc.select(selector);
          for (Element selElem : selectedElements) {
            String oldProperties = selElem.attr(style);
            selElem.attr(style,
                oldProperties.length() > 0 ? concatenateProperties(
                    oldProperties, properties) : properties);
          }
        }
      }
      e.remove();
    }
    return doc.toString();
  }

  private static String concatenateProperties(String oldProp, @NotNull String newProp) {
    oldProp = oldProp.trim();
    if (!oldProp.endsWith(";"))
      oldProp += ";";
    return oldProp + newProp.replaceAll("\\s{2,}", " ");
  } 
```

# netbeans - Netbeans XDebug 忽略项目之间的断点

> ID：13307540
> 
> 赞同：2
> 
> 时间：2012-11-09T11:48:40.593
> 
> 标签：netbeans, xdebug, breakpoints

是否可以在 2 个单独的项目之间使用 Netbeans xdebug 进行调试？

第一个项目是主代码，第二个是库。我可以成功调试主代码，但该库对我不起作用，Netbeans 调试器只是跳过断点。

我使用 Netbeans 7.2 和 XDebug 2.2.1。

我尝试按照此处所述（http://stackoverflow.com/questions/5746952/xdebug-across-projects-in-netbeans）在项目之间创建符号链接引用，但这并没有解决问题。

我还尝试将“lib”项目链接为“库”，但这也没有解决问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:32:37.147

我认为 Netbeans 不允许同时调试两个不同的项目。因此，您必须将这两个项目合并为一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:56:33.110

这是符号链接的 xdebug 问题，但如果您想尝试，看起来有一个补丁： [http ://bugs.xdebug.org/view.php?id=627](http://bugs.xdebug.org/view.php?id=627)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T12:25:31.220

我的设置是这样的：我使用托管主要项目代码和库的远程 Web 服务器。我已将主项目作为驱动器安装在本地 PC 上（使用 MacFusion），并让 NetBeans 直接处理那里的文件。我的 NetBeans 运行配置设置为使用远程 Web 服务器。

以下配方适用于该设置：

1.  在主项目中创建指向库的符号链接（并让 SCM 忽略它）
2.  扫描 NetBeans 中的外部更改
3.  转到主项目的“属性”>“运行配置”
4.  单击高级按钮并向路径映射表添加新行
5.  在 Server Path 列中输入库的绝对（远程主机）路径（不是您创建的符号链接的路径）
6.  输入库符号链接的本地绝对路径

我尚未针对本地堆栈设置对此进行测试，但我认为它应该可以正常工作。诀窍在于符号链接和路径映射组合。

# c++ - 当响应在数据包之间拆分但 SSL_pending 为零并且 SSL_get_error 返回 SSL_ERROR_NONE 时，如何查找是否有更多数据要读取

> ID：13307542
> 
> 赞同：3
> 
> 时间：2012-11-09T11:48:49.590
> 
> 标签：c++, c, openssl

我们有一个用 C++ 编码的客户端应用程序，它使用 openssl 通过 SSL 连接到 Java 应用程序服务器。我们使用非阻塞套接字连接模式，可以选择“选择”或“轮询”机制来识别可供读取的数据包。

客户端已经正常工作了很长一段时间，但最近我们注意到一个问题，即响应被拆分为多个数据包，并且 SSL_read 仅返回一个字符“H”且 SSL_ERROR_NONE 和 SSL_pending 为零，因此我们的 SSL_read 循环以不完整的回应结束。在随后重新调用 SSL_read [as a hack] 时，我们得到以“TTP 1.1”开头的剩余响应。

由于 SSL_pending=0 和 SSL_get_error()=SSL_ERROR_NONE，我们找不到任何其他方法来知道是否还有更多数据要读取，从而结束仅读取一个字符的“SSL_read”循环。

```
Here is the relevant pseudo code... 

bool done=false;
int pending=1; bool inited=false;
bool want_read=false; bool want_write=false;
timeval tv;
String response; //internal class for string, legacy            
while(!done) {
if( !inited || want_read || want_write ) {
    try {
        /* Wait a few seconds. */
        if(!inited) {
            tv.tv_sec = timeOutValue.tv_sec;
            tv.tv_usec = timeOutValue.tv_usec;
        } else {
            tv.tv_sec = 0;
            tv.tv_usec = 500000; //hack to reduce the waiting period
        } 
                    #ifdef USE_POLL
            poll the socket
        #else
            call 'select' on the socket
        #endif
        inited=true;
        continue;
    } catch(const XSeption&) {
        close_socket(&sock);
        done=true;
        cout << "Error waiting on select/poll call" << endl;
        break;
    }
}

memset(temp, 0, BUFSIZE);
charsRead = SSL_read(ssl,temp, (sizeof(char)*BUFSIZE));
cout << endl << "charsRead = " << charsRead << endl;    

if(charsRead>0) {
    response.append(temp, charsRead);
}
cout << "Response : " << response << endl;

int sslerror = SSL_get_error(ssl,charsRead);
cout << "SSL_error_code = " << sslerror << endl;

pending=SSL_pending(ssl);
cout << "pending characters in the current SSL buffer : " << endl;

/*
if(charsRead==1) {
    memset(temp, 0, BUFSIZE);
    cout << "read only one character which is odd,hence reading again" << endl;
    charsRead = SSL_read(ssl,temp, (sizeof(char)*BUFSIZE));
    cout << endl << "charsRead in second read = " << charsRead << endl;
    if(charsRead>0) {
        response.append(temp, charsRead);
    }
    cout << "Second Response : " << response << endl;

    sslerror = SSL_get_error(ssl,charsRead);
    cout << "SSL_error_code = " << sslerror << endl;

    pending=SSL_pending(ssl);
    cout << "pending characters in the current SSL buffer : " << endl;
}
*/

switch(sslerror){

    case SSL_ERROR_NONE:
        cout << "No SSL Error" << endl;
        done=true; //ideally, we should mark the process completed here; but if mark this completed here, then we are getting only 1 character 'H'
        break;
    case SSL_ERROR_WANT_READ:
        cout << "In SSL_ERROR_WANT_READ" << endl;
        //SSLread Still pending
        want_read=true;
        //continue;
        break;

    case SSL_ERROR_WANT_WRITE:
        cout << "In SSL_ERROR_WANT_WRITE" << endl;
        //SSLread Still pending
        want_write=true;
        //continue;
        break;

    case SSL_ERROR_SSL:
        done=true;
        cout << "encountered SSL INTERNAL ERROR" << endl;
        close_socket(&sock);
        break;

    case SSL_ERROR_SYSCALL:
        done=true;
        cout << "encountered ERROR SYSCALL" << endl;
        close_socket(&sock);
        break;

    case SSL_ERROR_ZERO_RETURN:
        done=true;
        cout << "encountered SSL ZERO RETURN" << endl;
        close_socket(&sock);
        break;

    default:
        done=true;
        cout << "encountered default error" << endl;
        close_socket(&sock);
        break;
    } //end of switch  
} //end of while  

cout << "Final Response : " << response << endl; 
```

那么，当 SSL_pending 返回零并且 SSL_get_error 是 SSL_ERROR_NONE 并且我不知道响应的字节数/字符数可以是多长时间时，我如何确定响应是完整的还是待处理的？

我的期望错了吗？即使我们提供了更大的缓冲区，为什么 SSL_read 第一次返回单个字符？

非常感谢这方面的任何帮助......

更新：

```
while(!done) {
currentTime = getTime();
tval.tv_sec = timeOutValue.tv_sec - (currentTime - beginTime);
tval.tv_usec = timeOutValue.tv_usec;
if ( tval.tv_sec <= 0 ) //the allotted time for processing this request has elapsed
{
    //do not close the socket or SSL session since this is just a timeout issue
    throw Exception::TIMEOUT);
}

#ifdef USE_POLL
    fds.fd = sock;
    fds.events = POLLIN;
#else
    FD_ZERO(&rset);
    FD_SET(sock, &rset);
#endif

if(!inited || want_read || want_write) {
    timeval tv;
    /*
    When we first enter this method or for NON-SSL requests, we would wait till the SELECT call returns a ready file-descriptor but in the case of a SSL requests processing the response message , we just issue SELECT with 0(zero) or very little timeout since SSL_read is giving us a common error code for actual need to check at the socket (SELECT/POLL) and the need to call SSL_read again, if we can find a way to differentiate the need to call SELECT/POLL Vs invoke SSL_read, then this if-else construct needs to be removed and we can then use the complete remaining time for timeout parameter in SELECT/POLL call even for SSL requests
    */
    if(!inited ) {
        tv.tv_sec=tval.tv_sec;
        tv.tv_usec=tval.tv_usec;
    } else {
        tv.tv_sec=0;
        tv.tv_usec=1000;
    }
    try {
        #ifdef USE_POLL
            poll_call(&fds, 1, &tv);
        #else
            select_call(sock+1, &rset, NULL, NULL, &tv);
        #endif
    } catch(const Exception&) {
        /*
        do not close the socket or throw exception; the socket will be closed only if an error occurs or if the server itself the closed the connection
        */
    }
    inited=true;
    want_read=false;
    want_write=false;
}

memset(temp, 0, BUFSIZE);

charsRead = openSSL->SSLread(temp, (sizeof(char)*BUFSIZE));
if(charsRead>0) {
    response.append(temp, charsRead);
    done=is_response_complete(response);
} else {
    int sslerror=openSSL->SSLgetErrorCode(charsRead);
    switch(sslerror){

        case SSL_ERROR_NONE:
            break;

        case SSL_ERROR_WANT_READ:
            want_read=true;
            break;

        case SSL_ERROR_WANT_WRITE:
            want_write=true;
            break;

        case SSL_ERROR_SSL:
            close(openSSL, Exception::SSL_CONNECTION_PROBLEM, 
                    ErrorDescription(sslerror));
            break;

        case SSL_ERROR_SYSCALL:
            close(openSSL,Exception::SERVER_CONNECTION_PROBLEM,
                    ErrorDescription(sslerror));
            break;

        case SSL_ERROR_ZERO_RETURN:
        default:
            close(openSSL,Exception::SSL_CONNECTION_PROBLEM,
                        ErrorDescription(sslerror));
            break;
    } //end of switch
} //end off ssl_error check
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:51:06.267

使用 OpenSSL，正常的过程被反转了；

*   使用普通套接字，`select()`直到它说套接字是可读或可写的。

*   使用 SSL 套接字，您可以读取和写入，直到它们返回 SSL_ERROR_WANT_READ/WRITE。只有这样你才打电话`select()`。

“由于 SSL_pending=0 和 SSL_get_error()=SSL_ERROR_NONE，我们找不到任何其他方法来知道是否还有更多数据要读取”

所以你应该假设在你得到 SSL_ERROR_WANT_READ 之前总是有更多的数据要读取。OpenSSL 不是告诉您有更多数据要读取，而是告诉您`WANT_READ/WANT_WRITE`没有**更多**数据要读取。

我在我的应用程序中看到了相同的行为；当我执行 时`SSL_read`，我得到 1 个字节：

```
G 
```

因为我没有得到 a `WANT_READ/WRITE`，所以我再次执行 SSL_read 并得到其余数据

```
ET /index.html HTTP/1.1
Host: etc etc 
```

我继续这样做，直到我得到 WANT_READ/WRITE，然后我等待，`select()`因为 OpenSSL 说要这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T12:58:31.653

我也看到了这种行为。处理它的正确方法是您的应用程序应该随时期待任何数量的数据......它是数据的“流”，而不是打包的请求/响应。识别“完整请求/响应”的唯一方法是在应用程序级别对其进行解析。如果您没有完整的数据，请将其缓冲并等待更多数据。传输机制不能也不会告诉你......它只是说“嘿，我有数据”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T10:39:21.223

当您通过非阻塞 BIO 读取时，不能保证您将收到所有预期的数据^(**+**)只需一次调用`SSL_read()`.

因此，可能需要`SSL_read()`再次调用多次，直到您期望的所有数据都^(**被**)读取，或连接已关闭，或发生错误。

为此，您可以在-loop`SSL_read()`内部调用.`while``select()`

* * *

^(*(+) 传输层不知道实际预计要传输多少数据。这要么是（发送方和接收方）都知道的，要么协商需要是应用程序级协议的一部分。*)

# android - Android：带有提示的Edittext

> ID：13307546
> 
> 赞同：0
> 
> 时间：2012-11-09T11:49:06.780
> 
> 标签：android

嗨，我有一个带有提示的编辑文本。我试图实现的是每当我将信息输入编辑文本或用户输入编辑文本时。提示应该保留，文本用户类型应该从提示下方或旁边开始。 .**我们可以使提示永久化吗？**.或者有什么方法可以实施..任何建议都值得赞赏

```
EditText address = new EditText(activity);

                if (data.getAddress() != null
                        && !data.getAddress().trim().equals("")) {

                    address.setText(data.getAddress());
                } else {
                    address.setHint(R.string.address);
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:52:36.173

您可以设置编辑文本的背景图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:58:07.243

您不能直接为 editext 设置永久提示。相反，您可以使用文本视图和 editext 来显示提示文本并将两者的背景设置为透明，并为包含文本视图和编辑文本的布局提供自己的背景。它将创建一个带有永久提示的 editext 视图。

这篇[文章](https://stackoverflow.com/a/13135075/1626878)会帮助你。

# java - Glassfish v3 客户端。什么是 gf-client.jar？

> ID：13307551
> 
> 赞同：1
> 
> 时间：2012-11-09T11:49:26.873
> 
> 标签：java, glassfish, ejb

根据我的阅读，gf-client.jar，自 Glassfish 3 以来，是您需要在客户端包含的唯一 jar，因为它应该包含 Glassfish 安装中的**javaee.jar**。但是当我将 gf-client.jar 添加到作为客户端的独立 Java 应用程序中时，我无法引用标准 Java EE 中的任何内容，没有 javax.persistence，没有 javax.ejb 等......

我的问题是为什么？我只是将 gf-client.jar 添加到我的客户端，就足够了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T11:56:03.823

如果你打开`gf-client.jar`（使用像 winrar 这样的压缩工具）并打开`META-INF/MANIFEST.MF`你可以在`Class-Path:`属性中看到所有需要的库。

如果您的客户端应用程序没有所有这些库（您的应用程序所需的库不是全部），那`gf-client.jar`将毫无用处。

# sql - 在sql中删除一行

> ID：13307552
> 
> 赞同：0
> 
> 时间：2012-11-09T11:49:33.747
> 
> 标签：sql, sql-server

如何在之前不知道该表中是否存在的情况下删除 sql 表中的一行

```
 delete from table id=4 
```

例如我想删除一个等于 4 的 id 但我不知道这个表中是否存在数字 4 的 id 是否应该使用一个过程来检查它是否存在或者我可以只使用一个简单的删除语句

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:50:17.627

```
DELETE FROM tableName WHERE id=4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:52:34.257

是的，您可以使用简单的删除语句来尝试删除记录。

如果该记录存​​在于表中，则将其删除。如果它不存在，那么什么都不会发生。

```
delete 
from yourTable
where id=4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:55:02.067

去做就对了。语法是这样的：

```
DELETE FROM tableName WHERE id=4; 
```

删除的行数将存储在`@@ROWCOUNT`. 如果没有删除任何行，您将不会收到异常，但`@@ROWCOUNT`会是`0`.

[你可以在这里](https://stackoverflow.com/questions/1103260/return-number-of-rows-affected-by-update-statements)找到一个例子。该示例是一个 UPDATE 语句，但 DELETE 的工作方式相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-25T07:02:01.377

这样做：从表名中删除，其中 id=4；

如果存在 id= 4 的行，它将删除，否则不会发生任何事情

# statistics - PCA中通过term document matrix构造的协方差矩阵有什么意义？

> ID：13307555
> 
> 赞同：1
> 
> 时间：2012-11-09T11:49:41.877
> 
> 标签：statistics, neural-network, pca, eigenvector, term-document-matrix

我正在研究神经网络，为了减少通过文档构造的术语-文档矩阵的维度以及其中包含 tf-idf 值的各种术语，我需要应用 PCA。像这样的东西

```
 Term 1       Term 2       Term 3       Term 4\. ..........
Document 1 

Document 2            tfidf values of terms per document

Document 3 
.
.
.
.
. 
```

PCA 的工作原理是获取数据的平均值，然后减去平均值，然后对协方差矩阵使用以下公式

令矩阵 M 为维度为 NxN 的术语-文档矩阵

协方差矩阵变为

```
( M x transpose(M))/N-1 
```

然后我们计算特征值和特征向量作为神经网络中的特征向量。我无法理解的是协方差矩阵的重要性以及它找到协方差的维度。

因为如果我们考虑简单的二维 X，Y，就可以理解。这里关联了哪些维度？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:09:43.790

[潜在语义分析](http://en.wikipedia.org/wiki/Latent_semantic_analysis) 很好地描述了这种关系。它还解释了如何首先使用完整的文档术语矩阵，然后使用简化的矩阵，将术语列表（向量）映射到近似匹配的文档——即为什么要减少。
另请参阅 [Making-sense-of-PCA-eigenvectors-eigenvalues](https://stats.stackexchange.com/questions/2691/making-sense-of-principal-component-analysis-eigenvectors-eigenvalues)。（那里的许多不同答案表明没有一个对每个人都是直观的。）

# sql - 在带有子查询的 SQL 查询中，WHERE 子句不起作用

> ID：13307556
> 
> 赞同：0
> 
> 时间：2012-11-09T11:49:48.990
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我有 3 个表-`DimWarehouses`和. 我在 SQL Query 中做了一个集合。一切都会好起来的，但我需要这个结果是成本或库存不等于 0 的地方。在我的查询中，WHERE 子句不起作用。`DimProducts``DimTime`

如何编写可以工作的 Where 子句？

```
where bb.COST <>0 or bb.stock <> 0 
```

询问：

```
 select 
    bb.TimeKey,
    bb.ProductKey,
    bb.WarehouseKey,
    bb.stock,
    bb.COST
    from(
    SELECT dt.timekey, 
           a.productkey, 
           b.warehousekey,
           Isnull((SELECT SUM(quantyti) 
                   FROM   aa f 
                   WHERE  a.productkey = f.productkey
                          AND b.warehousekey = f.warehousekey 
                          AND f.timekey <= dt.timekey), 0) AS stock, 
           Isnull((SELECT SUM(COST) 
                   FROM   aa f 
                   WHERE  a.productkey = f.productkey 
                          AND b.warehousekey = f.warehousekey 
                          AND f.timekey <= dt.timekey), 0) AS COST
FROM   dimproducts a, 
       (SELECT warehousekey FROM   dimwarehouses) b, 
       (SELECT 20121002 AS timekey ) dt         
     )bb
                where 
bb.COST <>0 or 
bb.stock <> 0 
```

表 aa：

```
TimeKey ProductKey   WarehouseKey   Quantyti    Cost
20120901    1              1          10.000    100.00
20120901    1              1         -10.000    -100.00
20120901    2              1           5.000    50.00
20120901    2              1          15.000    150.00
20120901    2              2           3.000    30.00
20120901    3              1           0.000    20.00
20120901    3              2          10.000    0.00 
```

结果：

```
TimeKey ProductKey  WarehouseKey    stock   COST
20121002    2                  1    20.000  200.00
20121002    3                  1    0.000   20.00
20121002    2                  2    3.000   30.00
20121002    3                  2    10.000  0.00 
```

我需要结果：

```
TimeKey ProductKey  WarehouseKey    stock   COST
20121002    2                  1    20.000  200.00
20121002    2                  2    3.000   30.00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:53:13.567

最后你应该说

```
where 
bb.COST <>0 and bb.stock <> 0 
```

代替

```
where 
    bb.COST <>0 or bb.stock <> 0 
```

如果你想要那个结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:54:33.487

要获得您想要的结果，您应该使用

```
where bb.COST <>0 AND bb.stock <> 0 
```

使用 OR 它将返回具有不同于 0 的值的行，而您希望这两个值都不同于 0。

# android - 屏幕开/关检测

> ID：13307565
> 
> 赞同：12
> 
> 时间：2012-11-09T11:50:30.103
> 
> 标签：android

在这里，我试图确定屏幕是否打开，但按下电源锁定/解锁按钮时它似乎不起作用。应用程序正常工作，但 if-else 中的代码似乎没有效果。 **现在编辑** 了代码工作（感谢**Olgun**），但媒体播放器播放不会停止，并且每次打开/关闭屏幕时都会创建新的媒体播放器对象（多次播放）。

**SCBroadcaster.java**

```
 public class SCBroadcaster extends BroadcastReceiver {
    PowerManager pm;
    MediaPlayer mp;
    public static boolean wasScreenOn = true;

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub
        mp = MediaPlayer.create(arg0, R.raw.gale);
        if (arg1.getAction().equals(Intent.ACTION_SCREEN_ON)) {
                    mp.stop();
            mp.release();
            Toast.makeText(arg0, "oNONONO", Toast.LENGTH_LONG).show();

        } else if (arg1.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            mp.start();
        }

    }

} 
```

**MainActivity.java**

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_OFF);
    filter.addAction(Intent.ACTION_SCREEN_ON);
    BroadcastReceiver bre = new SCBroadcaster();
    registerReceiver(bre, filter);
}

protected void onPause() {
    super.onPause();
    if (SCBroadcaster.wasScreenOn) {
        System.out.println("SCREEN TURNED OFF");
    } else {

    }
}

protected void onResume() {
    super.onResume();
    if (!SCBroadcaster.wasScreenOn) {

    } else {

    }
} 
```

}

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-02-26T16:42:02.610

ACTION_SCREEN 的方法对我不起作用。经过一些不同的解决方案后，这段代码终于为我解决了这个问题：

```
/**
 * Is the screen of the device on.
 * @param context the context
 * @return true when (at least one) screen is on
 */
public boolean isScreenOn(Context context) {
    if (android.os.Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT_WATCH) {
        DisplayManager dm = (DisplayManager) context.getSystemService(Context.DISPLAY_SERVICE);
        boolean screenOn = false;
        for (Display display : dm.getDisplays()) {
            if (display.getState() != Display.STATE_OFF) {
                screenOn = true;
            }
        }
        return screenOn;
    } else {
        PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
        //noinspection deprecation
        return pm.isScreenOn();
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-09T11:54:10.863

Intent.ACTION_SCREEN_OFF 和 ACTION_SCREEN_ON 检查上述广播注册。[在这里](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)你可以找到一个很好的例子。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T18:40:27.883

您可以尝试将其添加到您的活动中。

```
IntentFilter filter = new IntentFilter(); 
filter.addAction(Intent.ACTION_SCREEN_OFF); 
BroadcastReceiver mReceiver = new ScreenReceiver(); 
registerReceiver(mReceiver, filter); 
```

同样，您也可以`ACTION_SCREEN_ON`添加

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-25T16:10:02.067

`BroadcastReceiver`在背景`Service`中 注册您的活动`Intent.ACTION_SCREEN_ON`和`Intent.ACTION_SCREEN_OFF`活动。它对我有用。

# javascript - 闭包中的变量

> ID：13307568
> 
> 赞同：0
> 
> 时间：2012-11-09T11:50:41.843
> 
> 标签：javascript, jquery

我有一个 JS 对象，在我使用函数表达式的属性中，在变量结果中。

我需要填充结果变量并在调用 processData 时返回它。

你能告诉我我在这里做错了什么吗，如果你简要解释问题并添加一些好的东西会很棒。

```
$(document).ready(function () {

    // General Settings
    var 
    ApiSettings = {
        clientId: 'aaa',
        clientSecret: 'bbb'
    }

    ApiSettings.uriGetToken = 'https://ccc.com/oauth/token?grant_type=client_credentials&client_id=' + encodeURIComponent(ApiSettings.clientId) + '&client_secret=' + encodeURIComponent(ApiSettings.clientSecret);

    ApiSettings.token = (function () {
        var result; // I'm not able to set this variable
        // Make an Ajax Request
        $.getJSON(ApiSettings.uriGetToken, processData);
        function processData(data) {
            result = data.access_token;
        }
        return result;
    })();

    console.log(ApiSettings);
    console.log(ApiSettings.uriGetToken);
    console.log('FINAL:' + ApiSettings.token);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:57:40.170

您实际上可以使用您的代码设置结果变量。问题是您使用`.getJSON()`的是异步方法。您将触发 Ajax 请求，然后您的 JavaScript 将直接转到 return 方法并返回结果，然后服务器才有机会响应。因此，您在有时间更新结果之前就从函数中返回。

异步方法最初可能有点难以掌握，特别是如果您是初学者。您要做的就是重组代码，这样您就不会使用与读取值相同的方法来获取值。

另一种选择是使用同步 Ajax 请求，强制您的 JavaScript 在返回结果之前等待服务器响应。但这**很少是一个好主意**，因为您的 UI 在服务器返回之前将无响应。

# c# - 分组然后展平项目

> ID：13307569
> 
> 赞同：10
> 
> 时间：2012-11-09T11:50:44.743
> 
> 标签：c#, linq

我有一个具有以下属性的对象列表：

```
int TownId, int CompanyId, int ProductId, int[] Prices 
```

我想把它变成一个`TownCompany`对象列表；每个项目具有以下属性：

```
int TownId, int CompanyId, int[] Products, int[] Prices 
```

所以我可以

```
flatList.GroupBy(l => new { l.TownId, l.CompanyId }) 
```

获取组列表，其中包含每个城镇/公司对的所有产品和价格。现在，对于此查找中的每个键，我想展平/合并所有值。似乎我应该能够使用`SelectMany`，但我总是对提供给它的预测感到有点困惑......

如何将此组列表转换为每个键的扁平列表列表？我希望我说得通。

例子：

如果我的原始清单是这样的：

```
new[] {
    new Item { TownId = 1, CompanyId = 10, ProductId = 100, Prices = new [] { 1, 2 } },
    new Item { TownId = 1, CompanyId = 10, ProductId = 101, Prices = new [] { 3 } },
}; 
```

我想要一个看起来像这样的列表：

```
{
    { TownId: 1, CompanyId: 10, Products: [100, 101], Prices: [1, 2, 3] }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T11:55:19.537

你`SelectMany`只需要`Prices`; 因为`ProductId`它很简单`Select`：

```
flatList
.GroupBy(l => new { l.TownId, l.CompanyId })
.Select(g => new {
    g.Key.TownId
,   g.Key.CompanyId
,   ProductIds = g.Select(o => o.ProductId).ToArray()
,   Prices = g.SelectMany(o => o.Prices).ToArray()
}); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-09T11:56:29.643

如果我理解正确，那么是这样的：

```
flatList.GroupBy(l => new { l.TownId, l.CompanyId })
        .Select(g => new 
        {
            TownId = g.Key.TownId,
            CompanyId = g.Key.CompanyId,   
            Products = g.Select(o => o.ProductId).ToArray(),
            Prices = g.SelectMany(o => o.Prices).ToArray()
        }); 
```

# powershell - 查找进程并返回进程、计算机名和用户名的 Powershell 脚本

> ID：13307572
> 
> 赞同：0
> 
> 时间：2012-11-09T11:51:03.033
> 
> 标签：powershell

我想在运行特定程序的用户之后搜索十个终端服务器。我希望输出包括进程、计算机名和用户。

这个命令基本上做我想要的：

```
Invoke-Command -ComputerName (Get-Content .\test-servers.txt) -ScriptBlock { get-wmiobject win32_process|where{$_.name -eq "iexplore.exe" }|select name, __SERVER,@{n="owner";e={$_.getowner().user}}} | Format-Table name, PSComputerName, owner -AutoSize

name         PSComputerName owner 
----         -------------- ----- 
iexplore.exe mrdsh-test     dojo03
iexplore.exe mrdsh-test     dojo03
iexplore.exe mrdsh-test     baob12
iexplore.exe mrdsh-test     baob12 
```

但是当我尝试创建一个将进程作为参数的脚本时，我无法让它工作。

```
CmdletBinding()]
Param (
[parameter(mandatory=$true)][string]$process
)

Invoke-Command -ComputerName (Get-Content .\test-servers.txt) -ScriptBlock { get-wmiobject win32_process | where{param($process)$_.name  -eq $process } | select name, __SERVER,@{n="owner";e={$_.getowner().user}}} | Format-Table name, PSComputerName, owner -AutoSize 
```

我还没有设法将 $process 参数发送到调用命令的服务器。我该怎么做？或者有没有更简单的方法来查找进程并返回进程、计算机名和用户名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:54:45.543

您的 where 脚本块中有 param($process) ，并且您没有设置它，因此它将为空。

**编辑：**

根据要求，在我的机器上取出以下参数：

```
[CmdletBinding()]
Param (
[parameter(mandatory=$true)][string]$process
)

Invoke-Command -ScriptBlock { get-wmiobject win32_process | where{ $_.name  -eq $process } | select name, __SERVER,@{n="owner";e={$_.getowner().user}}} | Format-Table name, PSComputerName, owner -AutoSize 
```

它也适用于 Powershell 版本 1：

```
powershell -version 1.0 -noprofile -Command ".\test.ps1 -process 'chrome.exe'" 
```

工作得很好。

# php - 无休止地加载具有高 memory_limit 的巨大 php 文件

> ID：13307579
> 
> 赞同：0
> 
> 时间：2012-11-09T11:51:39.593
> 
> 标签：php, memory-limit

# 介绍

目前我正在处理 XML 文件。使用 PHP，我结合了几个 XML 文件。这是一个超出 PHP 默认 memory_limit 的大操作。

当我用致命错误扩展限制时`ini_set('memory_limit', '1024M');`，脚本不再超过限制。

我现在遇到的问题是，在组合 XML 文件后，我的脚本有问题。浏览器加载无穷无尽，我仍然能够在服务器端做所有事情。就像我自己发电子邮件一样，向数据库中添加行。但是所有客户端都不起作用。像一个简单的`echo 'Hello World';`或`header('location: http://www.google.com');`

在合并文件时，我记录了这些步骤。

```
$stores = $this->Store->getAll();
$this->log(2, 'all', 1337, 'Start processing ' . count($stores) . ' stores ';
foreach($stores as $store)
{
    $this->log(2, $store->id, 1337, 'Start processing store ';
    $this->process_store($store->id, false);
}
$this->log(2, 'all', 1337, 'Done with processing ' . count($stores) . ' stores ';
header('location: ' . BASE_URL . '/datatest');
die(); 
```

奇怪的是我的脚本确实记录了最后一个日志`Done with processing`。我在服务器端所做的任何事情都有效。

但是标题（重定向）却没有。我的浏览器只是无休止的加载。

# 问题

*   出了什么问题？
*   浏览器是否会在一段时间后禁用与服务器的通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:57:44.260

您可以通过使用 simpleXML 进行递归 XML 合并来规避内存问题

**代码**

```
<?php
private function mergeXML(&$base, $add)
{
    $new = $base->addChild($add->getName());
    foreach ($add->attributes() as $a => $b) {
        $new[$a] = $b;
    }
    foreach ($add->children() as $child) {
        $this->mergeXML($new, $child);
    }
}?> 
```

**用法**

```
<?php mergeXML($xmlElement, simplexml_load_string($toMerge)) ?> 
```

因此，您将开始并将 XML 1 与 XML2 合并到 TempXML1，然后将 TempXML1 与 XML3 合并，等等。这样，您只需查看 xml 文件列表，而无需将它们全部加载到内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:58:03.790

你确定 BASE_URL 。'/datatest' 是正确的 URL？您还应该在 Location 上加上大写 L 以确保重定向正常工作。

在不进行整个合并的情况下尝试此操作，以首先验证您的标头重定向是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:34:50.960

我注意到服务器和客户端彼此断开连接。

最后我找到了解决方案，这真的很难看！

我必须`sleep(1);`在 foreach 循环内设置一个以保持服务器和客户端的连接。

天哪，这比以前慢了:'(

# java - Java 应用程序 - 获取 JTextField 的文本

> ID：13307580
> 
> 赞同：0
> 
> 时间：2012-11-09T11:51:42.663
> 
> 标签：java, swing, netbeans, jtextfield, joptionpane

我的应用程序上有两个类，主要的一个和接口的另一个。使用 netbeans 我创建了一些字段，包括 JTextFields。

现在，我假装使用主类的这个方法对嵌入式数据库进行插入：

```
try {
        stmtSaveNewRecord = dbConnection.prepareStatement(
    "INSERT INTO APP.Alunos " +
    "   (FIRSTNAME, AGE) " +
    "VALUES (?, ?)",
    Statement.RETURN_GENERATED_KEYS);
    } catch (SQLException ex) {
        Logger.getLogger(Aquitex.class.getName()).log(Level.SEVERE, null, ex);
    }

int id = -1;
try {
    stmtSaveNewRecord.clearParameters();
    stmtSaveNewRecord.setString(1, da.getjTextField1());
    stmtSaveNewRecord.setInt(2, da.getjTextField2());
    int rowCount = stmtSaveNewRecord.executeUpdate();
    ResultSet results = stmtSaveNewRecord.getGeneratedKeys();
    if (results.next()) {
        id = results.getInt(1);
    }
} catch(SQLException sqle) {
    sqle.printStackTrace();
}
return id; 
```

如您所见，我调用了在接口类上创建的两个方法（getjTextField1 和 getjTextField2）。

```
public String getjTextField1(){
    JOptionPane.showMessageDialog(null,jTextField1.getText());
    return jTextField1.getText();

} 
```

问题是我无法获得在 jFieldTexts 上输入的值。正如您在上面的代码中看到的，我什至调用 JOptionPane 来查看在我在 jTextField1 上输入一些数据后它返回的内容，但始终为空。

# linux - 给定输入中的空文件夹列表

> ID：13307581
> 
> 赞同：0
> 
> 时间：2012-11-09T11:51:43.647
> 
> 标签：linux, bash, shell, scripting, scripting-language

我有一个目录，其中包含每天的日志。每个目录都使用此名称模式格式化`2012_07_01`，`2012_07_02`.

我想要的是从给定`$startdate`和 a中检查`$enddate`，并查看在 start 和 enddate 变量的任何时间之间是否存在搜索的返回列表中的空文件夹。如果是这种情况，那么我从返回值列表中删除空文件夹。

至于其中有文件的那些，我想在其中的每一个中搜索`$startdate`and`$enddate`值。如果它们存在于任何目录中，那么我希望脚本返回该文件名列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:33:14.927

这是一个想法：

```
for dir in `ls | sort | sed -n "/$startdate/,/$enddate/p"` ; do
  if [ `ls $dir | wc -l` -gt 0 ] ; then
    ls $dir
  else
    rmdir $dir
  fi
done 
```

另外，请注意，这`rmdir *`只会删除空目录。

# scala - 将私有类实例作为构造函数参数

> ID：13307585
> 
> 赞同：3
> 
> 时间：2012-11-09T11:52:00.897
> 
> 标签：scala

在具有内部类的 Scala 类中，如何声明一个以该类的实例作为参数的构造函数？

即这有效

```
class Element[T](val v : T, val next : Element[T])

class MyStack[T] private (private val first : Element[T]) {
    def this() = this(null)
    def push(v : T) = new MyStack[T](new Element[T](v,first))
    def pop() = new MyStack[T](first.next)
    def top() = first.v
} 
```

这没有。

```
class MyStack[T] private (private val first : Element) {
    private class Element(val v : T, val next : Element)
    def this() = this(null)
    def push(v : T) = new MyStack[T](new Element(v,first))
    def pop() = new MyStack[T](first.next)
    def top() = first.v
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:21:35.540

由于`Element`无法从外部看到，您应该在外部类的上下文中引用它

```
class MyStack[T] private (first: MyStack[T]#Element) {
  class Element(val v: T, val next: MyStack[T]#Element)
  def this() = this(null)
  def push(v: T) = new MyStack[T](new Element(v, first))
  def pop() = new MyStack[T](first.next)
  def top() = first.v
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:48:50.093

我不知道您为什么要这样做（您可能应该添加一些有关此的信息），但这是可能的，只是没有私有内部类。参数本身必须是按名称调用，并且必须分配给惰性 val，以便仅在外部实例准备好后才对其进行评估。

```
class Foo[A](_x: => Foo[A]#Bar) {
  lazy val x = _x
  class Bar
}

scala> lazy val x: Foo[Int] = new Foo[Int](new x.Bar)
x: Foo[Int] = <lazy>

scala> x.x
res8: Foo[Int]#Bar = Foo$Bar@76ba819c 
```

# android - Android中有任何普通的表格视图吗？

> ID：13307586
> 
> 赞同：0
> 
> 时间：2012-11-09T11:52:04.877
> 
> 标签：android, jtable

我需要建立这样的东西

![](../Images/2a8032a9e8513ce50093cb8083a0856f.png)

但在安卓中。如何创建表（如摇摆中的 JTable），它将具有：

1.  静态标题
2.  可点击的行（如 ListView 元素）
3.  可滚动内容

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:17:11.190

Android 上没有这样的组件。您应该`ListView`在内容行和标题行上方创建一个布局。并在您将用来表示 ListView 上的每一行的布局上进行列划分。

Other way is create a `TableLayout` inside a scroll, like this answer suggests: [focusable row inside table android](https://stackoverflow.com/questions/4873556/focusable-row-inside-table-android/5258310#5258310)

# c# - 无法访问本地主机上的存储过程

> ID：13307589
> 
> 赞同：0
> 
> 时间：2012-11-09T11:52:22.517
> 
> 标签：c#, asp.net, sql-server

一直试图让它工作大约一个小时，但没有运气。我已将数据库从主机复制到本地计算机并更改了连接字符串，但由于某种原因，我不断收到此错误：

`Could not find stored procedure`

它连接到正确的数据库，当我通过管理工作室连接时，我可以执行存储过程，所以我不知道出了什么问题。我该如何调试？

谢谢。

这是代码，但请记住，这在托管服务器上运行良好：

```
private void openDatabaseConnection()
{
    myConnection = new SqlConnection(_connectionString);
    myCommand = new SqlCommand();
    myCommand.Connection = myConnection;
    myCommand.Parameters.Clear();
    myConnection.Open();
}

    using (myConnection)
    {
        openDatabaseConnection();
        using (myCommand)
        {
            myCommand.CommandText = "storedProcedureName";
            myCommand.CommandType = CommandType.StoredProcedure;

            using (myReader)
            {
                myReader = myCommand.ExecuteReader();

                myReader.Read();
                //Get Data
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:56:10.127

当您将数据库从一台服务器复制到另一台服务器时，您需要在目标服务器上设置数据库的**所有者**，如果您使用 SQL Server 帐户运行存储过程，则需要将数据库的所有者设置为该帐户.

要更改所有者，请执行以下步骤：

1.  右键单击数据库，选择属性
2.  转到文件选项卡
3.  所有者文本框的右侧是一个按钮，单击它
4.  从 SQL 帐户中选择您的应用程序用于访问数据库的帐户

# android - 如何使用robotium连接数据库？

> ID：13307590
> 
> 赞同：1
> 
> 时间：2012-11-09T11:52:25.720
> 
> 标签：android, robotium

我正在使用 Robotium 来测试 android 应用程序。

下面是我的一段代码。我也想验证数据库详细信息。如何添加数据库连接并验证这一点？

```
package com.robotiumtest.android;

import android.test.ActivityInstrumentationTestCase2;

import com.jayway.android.robotium.solo.Solo;

@SuppressWarnings("unchecked")
public class Home extends ActivityInstrumentationTestCase2 {

    private static final String TARGET_PACKAGE_ID = "com.robotiumtest.android";
    private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME = "xxxxx";
    private static Class<?> launcherActivityClass;
    static {
        try {
            launcherActivityClass = Class
                    .forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
        } catch (ClassNotFoundException e) {
            throw new RuntimeException(e);
        }
    }

    @SuppressWarnings("unchecked")
    public Home() throws ClassNotFoundException {
        super(TARGET_PACKAGE_ID, launcherActivityClass);
    }

    private Solo solo;

    @Override
    protected void setUp() throws Exception {
        solo = new Solo(getInstrumentation(), getActivity());
    }

    public void testCanOpenSettings() {
        // Press the Menu
        solo.pressMenuItem(0);
            int i = 0;
        //solo.clickOnButton(3);
        //solo.wait(10);
        //solo.clickOnButton(0);
        //solo.waitForText("Title");
        //solo.clickOnText("Title");
        solo.enterText(0,"xxxxx");
        solo.clickOnButton(0);
        solo.waitForText("xxx");
        solo.clickOnButton("xx");
        solo.waitForText("xxxx");
        solo.enterText(0, "robot2@gmail.com");
        solo.enterText(1, "asdfghjkl");
        solo.clickOnButton(1);        
        solo.sleep(10000);
        solo.waitForText("school");
        solo.enterText(0, "vsb");
        solo.clickOnButton(0);
        solo.waitForText("xxxxxx"); 
        solo.clickOnText("1");
        solo.clickOnText("2");
        solo.enterText(0, "672");
        solo.searchButton("BUY");
        solo.clickOnButton("BUY");
        solo.waitForText("Please confirm");
        solo.clickOnButton(1);
        /*solo.sleep(10000);*/  
        solo.waitForText("Thank you");
        solo.sleep(10000);
        solo.clickOnButton(1);
        if (solo.searchText("No thanks"))
        {
            solo.clickOnText("No thanks");
        }
        solo.waitForText("Welcome");
        solo.clickOnButton("LOGOUT");
        solo.sleep(10000);
        }
/*
    @Override
    public void tearDown() throws Exception {
        try {
            solo.finalize();
        } catch (Throwable e) {
            e.printStackTrace();
        }
        getActivity().finish();
        super.tearDown();
    }*/
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:24:58.027

您可以为此使用 Java API，首先建立与数据库的连接：

```
Class.forName("com.mysql.jdbc.Driver");
connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);
Statement st=con.createStatement(); 
```

然后使用`executeQuery()`方法创建查询。

# android - 资源重新打包失败

> ID：13307592
> 
> 赞同：0
> 
> 时间：2012-11-09T11:52:35.453
> 
> 标签：android, unity3d, augmented-reality

无法构建 n 运行 Unity3d make Apk

> 资源重新打包失败！包 -v -f -m -J gen -M AndroidManifest.xml -S "res" -I "C:/Program Files/android-sdk-windows/platforms/android-10\android.jar" -F bin/resources .ap_
> 
> AndroidManifest.xml:13：错误：错误：不允许使用字符串类型（在 'configChanges' 处，值为 'fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen'）。
> AndroidManifest.xml:19：错误：错误：
> AndroidManifest.xml:21：错误：错误：
> AndroidManifest.xml:25：错误：错误：
> 
> UnityEngine.Debug:LogError(Object)
> PostProcessAndroidPlayer:PostProcess(BuildTarget, String, String, String, String, String, String, BuildOptions)
> (在 C:/BuildAgent/work/842f9557127e852/Editor/Mono/BuildPipeline/PostProcessAndroidPlayer.cs:210 ) UnityEditor.HostView:OnGUI()

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T03:41:28.343

对我来说，修复相对简单：阅读此处的发行说明后，我发现“Editor 需要至少 API 级别 14 才能构建 Android 应用程序。” 所以我所要做的就是更新我安装的软件。（对于 Windows，这些步骤可能略有不同） 打开 Eclipse。单击“帮助”->“检查更新”（我必须先执行此步骤，因为我的 Android SDK 管理器无法正常工作）然后打开 Android SDK 管理器并下载最新的 SDK 和工具。

就是这样。

# objective-c - 如何在 xcode 中关闭 VoiceOver？

> ID：13307596
> 
> 赞同：1
> 
> 时间：2012-11-09T11:52:43.303
> 
> 标签：objective-c, xcode, accessibility, voice

我正在尝试关闭语音，以便可以使用我们自己的 tts，但我还不能这样做。
当我打开应用配音时也在我的 tts 之前说话，我想配音保持沉默。
可能吗？

# windows-server-2008-r2 - NFS 客户端使用越来越多的 CPU

> ID：13307599
> 
> 赞同：0
> 
> 时间：2012-11-09T11:52:51.260
> 
> 标签：windows-server-2008-r2, nfs, nfsclient

在访问 linux 机器上的 NFS 共享时，我们遇到了 Microsoft 的 NFS 客户端有时会使用大量 CPU (50-100%) 的问题。

服务器似乎处于访问 NFS 开始使用越来越多的 CPU 来执行相同操作的状态，从而导致系统变慢。一旦它进入这种状态，它似乎永远不会恢复。重新启动系统确实可以暂时修复它。任何有关诊断方法、可能原因以及更好的可能解决方案的指导都将不胜感激。

**设置：**

我们有几台 win 2008 R2 云服务器访问 NFS 共享（访问 NFS 的 redhat 集群）。他们都使用 NFS 客户端来访问它，使用此处描述的注册表修复：http: [//blog.cuongnv.com/2009/11/windows-7-client-for-nfs-and-user-name.html](http://blog.cuongnv.com/2009/11/windows-7-client-for-nfs-and-user-name.html)，我们没有用户名映射或活动目录。他们通过 IP 而不是挂载的驱动器访问它，据我了解，它仍然使用 Microsoft 客户端进行 NFS 访问 linux 机器上的 NFS 共享。每台服务器都安装了驱动器，因此我们可以查看 NFS 上的文件。

出于参考目的，我们还有两个访问 NFS 的 linux 云服务器，但没有注意到它们存在问题。

**用法：** 大约 8-15KB 的所有文件 NFS 每分钟获取包含总共大约 8500 个文件的几个目录的文件列表，然后单独检查文件的日期。大约每分钟 26 次列出该目录的子集，其中包含大约 640 个文件，并检查每个文件的日期。每分钟还有大约 60 个文件写入和 60 个文件删除。

附带说明一下，我们还遇到了（一个可能不相关的）问题，即服务器在访问 NFS 时出现停止错误。我们相信这个补丁会解决这个问题：http: [//support.microsoft.com/kb/2584874](http://support.microsoft.com/kb/2584874)（尚未应用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T10:20:45.137

很抱歉碰到了问题，但终于有了一个半解决方案。

这是为了增加服务器上的 NFS 线程并提高代码的效率，因此它不会做那么多的目录列表。这些组合确实允许它合理地工作（至少在我们的情况下）。

# iphone - iPhone Mapview 更新标注视图

> ID：13307602
> 
> 赞同：0
> 
> 时间：2012-11-09T11:52:54.360
> 
> 标签：iphone, mkmapview, cllocation, callouts

想知道如何根据我当前不同的 userLocation 更改引脚的标注视图。Pin 停留在某个地方。例如，在教堂放置了一枚别针。如果我在家，我想要图钉显示消息的标注@“从家到教堂的距离是什么什么”如果我在学校，我想要图钉显示消息的标注@“从学校到学校的距离”教会是什么什么什么”

如何更新标注视图？我应该在委托中使用哪种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:55:20.470

`MKMapView`这是当您点击引脚标注按钮时调用的委托方法

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control 
```

对于 annotationView （用于查看引脚）使用波纹管委托方法..

```
- (MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:(id <MKAnnotation>)annotation 
```

# python - 使用OpenCV，Python中的关闭“X”按钮关闭视频窗口

> ID：13307606
> 
> 赞同：18
> 
> 时间：2012-11-09T11:53:11.383
> 
> 标签：python, opencv, video

我正在使用 Python 中的 OpenCV 显示来自摄像机的实时视频。这是代码：

```
capture = cv.CaptureFromCAM(0)
if capture:
    cv.NamedWindow("Live Video", cv.CV_WINDOW_AUTOSIZE)
    frame = cv.QueryFrame(capture)
    if frame:
        cv.ShowImage("Live Video", frame)    
        cv.WaitKey(0)

cv.DestroyWindow("Live Video") 
```

现在，我只能通过按“esc”关闭视频窗口，但是当我点击窗口的关闭“X”按钮时什么也没有发生。有没有办法让它工作？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-06-17T12:40:11.210

使用`cv2`Python 模块有一种方法可以做到这一点，我在这里发布了解决方案：

[https://stackoverflow.com/a/37881722/2897426](https://stackoverflow.com/a/37881722/2897426)

这篇文章仅供参考，任何寻找它的人都可以找到它

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-08-05T00:18:25.320

我遇到了同样的问题，我找到了一种简单的方法：

您可以 `cv2.getWindowProperty(windowName, cv2.WND_PROP_VISIBLE)`用来检查当前窗口是否可见，如果不可见，您可以销毁该窗口。该方法返回一个`1`如果它是可见的，`0`如果它不是。下面是一个实现：

```
 while True: 
    _, frame = cap.read()

    cv2.imshow(windowName, frame)
    keyCode = cv2.waitKey(1)

    if cv2.getWindowProperty(windowName, cv2.WND_PROP_VISIBLE) <1:
        break
cv2.destroyAllWindows() 
```

接受的答案链接到一个永远不会工作的解决方案，因为 0 包含在 >=0 中，并且在 中使用了错误的第二个参数`cv2.getWindowProperty()`，而这些问题只是在线程的稍后部分得到间接解决。我将其添加为答案，因为当我第一次访问此线程时找不到正确的解决方案，而这正是我需要和使用的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-09T12:24:13.040

OpenCV 没有这个特性，默认只处理按键。

如果你想这样做，你必须使用创建你的窗口的窗口管理器的句柄（GTK，QT，...）。

[如果您使用 Windows，这篇文章描述了一个类似的问题。](https://stackoverflow.com/questions/9887310/opencv-close-window-with-mouse-issue) 如果没有，请告诉我；）

# wpf - ListViewItem.IsSelected 上的 WPF DataTrigger

> ID：13307610
> 
> 赞同：0
> 
> 时间：2012-11-09T11:53:34.967
> 
> 标签：wpf, xaml, listview, triggers

我有一个 ListView，样式如下：

```
<ListView.View>
    <GridView>
        <GridViewColumn Header="Reset" Width="60">
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <CheckBox IsChecked="{Binding ResetThisItem}" />
                </DataTemplate>
             </GridViewColumn.CellTemplate>             
        </GridViewColumn>
    </GridView>
</ListView.View> 
```

在 ViewModel-Class 我有属性“ResetThisItem”。

当用户选择 ListView 的完整行时，我希望此属性设置为 true。如果该项目被取消选择，则不会发生任何事情。

我知道我在这里需要 DataTriggers，但我不知道在哪里，因为我不知道我可以在哪里访问 ListViewItem.IsSelected 和我的 ViewModel.ResetThisItem 以及如何在 xaml 中绑定它们......

任何提示表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:28:50.430

```
<ListView>
    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
            <Setter Property="IsSelected" Value="{Binding ResetThisItem, Mode=OneWayToSource}"/>
        </Style>
    </ListView.ItemContainerStyle>
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Reset" Width="60">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox IsChecked="{Binding ResetThisItem}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

这可能是完成您所追求的最简单的方法。如果您更喜欢代码方法或不同的角度，请告诉我。我希望这有帮助。:)

# google-visualization - Google 可视化 - 突出显示表格中的数据

> ID：13307612
> 
> 赞同：1
> 
> 时间：2012-11-09T11:53:48.527
> 
> 标签：google-visualization

我是谷歌可视化的初学者。我用谷歌可视化制作了一个仪表板。我的仪表板有一个在 ChartWrapper 的帮助下绘制的表格，我在字符串过滤器的帮助下按其中一列过滤表格。请检查下面我的脚本的样子

```
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1.1', {packages: ['controls']});
    </script>
    <script type="text/javascript">
      function drawVisualization() {
        // Prepare the data.
        var data = google.visualization.arrayToDataTable([
          ['Name', 'Age'],
          ['Michael' , '17'],
          ['Elisa', '17'],
          ['Robert', '17'],
          ['John', '17'],
          ['Jessica', '18'],
          ['Aaron', '19'],
          ['Margareth', '17'],
          ['Miranda', '15']
        ]);

        // Define a StringFilter control for the 'Name' column
        var stringFilter = new google.visualization.ControlWrapper({
          'controlType': 'StringFilter',
          'containerId': 'control1',
          'options': {
            'filterColumnLabel': 'Name'
          }
        });

        // Define a table visualization
        var table = new google.visualization.ChartWrapper({
          'chartType': 'Table',
          'containerId': 'chart1',
          'options': {'height': '13em', 'width': '20em'}

        });

        // Create the dashboard.
        var dashboard = new google.visualization.Dashboard(document.getElementById('dashboard')).
          // Configure the string filter to affect the table contents
          bind(stringFilter, table).
          // Draw the dashboard
          draw(data);
      }

      google.setOnLoadCallback(drawVisualization);
    </script> 
```

但我想突出显示表格中所有“红色”的行，其中一个人的年龄不等于 17。所以任何人都可以请帮助我做到这一点。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-29T03:52:46.150

使用颜色格式化程序语法来指定您的范围和样式。

```
var formatter = new google.visualization.ColorFormat();
formatter.addRange(null, 17, 'white', 'red');
formatter.addRange(17, null, 'white', 'red');
formatter.format(data, 1); 
```

这将搜索从 -∞ 到 17 和 17 到 +∞ 的值，但不包括 17，因为它不包含在内。但这只会给单元格上色，而不是整行。您可以使用另一种技巧来为行中的其余单元格着色。

# icons - LWUIT：无法设置选项卡图标

> ID：13307613
> 
> 赞同：1
> 
> 时间：2012-11-09T11:54:04.063
> 
> 标签：icons, lwuit, lwuit-tabs

我正在使用 lwiit 资源编辑器来设计我的应用程序表单。我有一个选项卡，我想设置图标，但是在我选择它们并按 OK 后，我得到了空值，什么也没发生。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:39:15.327

LWUIT 1.5 中有一个与此相关的错误，它仅在[Codename One](http://www.codenameone.com)中得到解决。没有迁移到 Codename 您的另一个选择是在代码中设置图标。

# javascript - jQuery中的正则表达式：括号内的数字

> ID：13307616
> 
> 赞同：1
> 
> 时间：2012-11-09T11:54:19.227
> 
> 标签：javascript, jquery, regex

是否可以使用 RegEx 从字符串中获取括号内的数字？例如，我选择的内容如下：

```
<select class="selectoption">
    <option value="1">no numbers</option>
    <option value="2">3 (+110.0 грн.)</option>
    <option value="3">Blabla (+95.5 грн.)</option>
</select> 
```

当用户选择带括号的选项（110 或 95.5）时，我只需要获取数字。

我现在有：

```
$('.selectoption').change(function() {
    if ( $("select option:selected").text().match(/\(.*\)/).length ){}
        alert (
            $("select option:selected").text().match(/\(.*\)/)
        );
    end
}); 
```

但它返回`(+110.0 грн.)`:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T12:09:32.887

尝试：

```
$('.selectoption').on('change', function () {
  var m = $(this).find(':selected').text().match(/\(.*?([\d.]+).*?\)/);
  console.log(
    m && m[1] || 'n/a'
  ); 
}); 
```

[http://jsbin.com/ekanog/1/](http://jsbin.com/ekanog/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T12:04:08.447

匹配返回您在正则表达式中定义的字符组数组。您可以使用替换而不是匹配

```
 $("select option:selected").text().replace(/^(.*)\([^\)\d]*(\d+\.\d+)[^\)\d]*\)$/, '$2') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T12:06:14.543

应该看起来像这样：

```
$('form').on('change', '.selectoption', function() {
    var content = $('option:selected', this).text(),
        matches = content.match(/\([^\d]*(\d+(\.\d*)?)/);
    if (matches.length) {
        alert(matches[1]);
    }
}); 
```

`form`作为`.selectoption`父母之一，如果选择器不正确，请更改选择器。

如果您不需要委托，您可以使用：

```
$('.selectoption').on('change', function() { 
```

正如您在编辑中所做的那样。它的工作原理都是一样的:)

**[示例代码](http://jsfiddle.net/h4T2J/1/)**

# ajax - ajax回调，如何传递消息和数据？

> ID：13307620
> 
> 赞同：1
> 
> 时间：2012-11-09T11:54:34.373
> 
> 标签：ajax, codeigniter

嗨，我正在学习一些 ajax 并且有点困惑。

这一切都有效，但不是 100% 确定为什么？我有下面的脚本，说明它的结构。我想知道的是 success: function(result) 是如何工作的。在我的 php 中，我有 1 或 0 的回声，但我想在我的 php 中包含更多信息，即正确的消息。

我的 javascript 是。

```
$("#username1").blur(function(){

 var username1 = $('#username1').val();
  $.ajax({
    type: "POST",
    url: "http://localhost/gonnabook/check_username_availability",
    data:  'username1='+ username1,
    success: function(result){
    if(result == 1){
        alert("true");
        }
    else{
        alert("false");
        }
   }
}); 
```

php是

```
function check_username_availability(){

        $check_this = $this->input->post('username1');  
        $data = $this->tank_auth->is_username_available($check_this);
        // the above code does all the query and results in the data
        if($data){
              echo 1;
             //ideally I would like to add a message here ie This is not available
        }else{
            echo 0;

        }
 } 
```

到目前为止，我的理解是 php 中的 echo 1 是 javascript 中的成功函数接收到的。但是如何在 php 中包含一条消息？可以通过数组或其他东西来做到这一点，然后结果是 result.check 或类似的东西吗？重点是javascript中的结果与php的echo有什么关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:58:52.557

it is this:

server-side(php) echoes and ajax listens this in success function

simple:

```
in php: echo "1"  ==> in ajax: success will get this 1 as result argument 
```

you can pass anything you want.. array, list, dict, json...

here you can read with real examples what happens in the background when you work with ajax [https://web.archive.org/web/20140203201657/http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/](https://web.archive.org/web/20140203201657/http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:03:47.183

您最好的选择是，而不是回显`0`或`1`回显 JSON 对象......试试这个......

**PHP**

```
function check_username_availability(){

        //This array will hold the data we return to JS- as many items as you want
        $result=array();  

        $check_this = $this->input->post('username1');  
        $data = $this->tank_auth->is_username_available($check_this);
        // the above code does all the query and results in the data
        if($data){
             $result['success']=1;
             $result['message']='This is a random message';
             $result['data']=data; //You can even return the retrieved data
        }else{
             $result['success']=0;

        }
        die(json_encode($result)); //Encode the array into JSON and echo the string
 } 
```

**JS**

```
$("#username1").blur(function(){
  var username1 = $('#username1').val();
  $.post(
        "http://localhost/gonnabook/check_username_availability", 
        {'username1': username1},
        function(result){
            if (result.success==1){
                alert('success: ' + result.message);
            } else {
                alert('error');
            }
        }, 
        'json'  //Tell JS we expect JSON in return
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:04:19.303

您通常在 PHP 脚本中执行的操作是将数据序列化为 JSON 字符串。然后可以在 ajax 调用的成功回调中使用该对象

**php脚本**：

```
function check_username_availability(){

 //do something fancy

 //create your JSON return
 var $data = array("foo" => "bar","bar" => "foo");
 echo json_encode($data);
} 
```

**客户**：

```
$.ajax({
 type: "POST",
 url: "http://localhost/gonnabook/check_username_availability",
 data:  'username1='+ username1,
 success: function(data){
  console.log(data['foo'] + ' ' + data['bar']); //echos "bar foo"
 }
}); 
```

# iis - iis7 在我的服务器上的 localhost 中可见多个网站，但只有一个在线可见

> ID：13307628
> 
> 赞同：0
> 
> 时间：2012-11-09T11:54:58.213
> 
> 标签：iis, iis-7, asp-classic, iis-7.5

我有一个带有 IIS7.5 的 Web 服务器（Windows Server 2008 R2），在 Telecity,com 上购买，我可以通过远程桌面访问；在这台服务器上，我有一个生产中的网站，可以通过 IP 访问（目前我没有域），现在我想添加一个测试环境，所以我在另一个端口（8888）上配置了另一个网站，并且我在包含测试文件的文件夹上创建了一个应用程序。

现在，当我尝试使用本地主机地址 (http://localhost:8888) 在服务器上浏览这个新网站时，一切正常，但如果我尝试使用公共 IP (http://xxx.xxx.xxx. xxx:8888）它不起作用。

奇怪的是，“生产”网站在 localhost 和 web 上都运行良好。

你有什么提示或建议吗？我要疯了！

非常感谢

此致

# c++ - 有没有办法将 std::iostream 对象与 boost::asio 一起使用？

> ID：13307630
> 
> 赞同：1
> 
> 时间：2012-11-09T11:55:05.917
> 
> 标签：c++, boost, boost-asio

我有一个`std::iostream`对象（例如`fstream`），我想用它来进行异步操作`boost::asio`。那可能吗？我知道 asio 不支持文件操作，但有时异步处理文件 IO 很有用。我可以使用特定于平台的本机文件描述符，然后将它们与 asio 一起使用，但我认为使用标准 C++ 流在 C++ 中会更优雅，而且更便携。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:32:35.347

虽然 Boost.Asio 不支持文件操作，但它确实为应用程序提供了以异步方式执行文件操作的工具集。实现此目的的常用方法是使用 Boost.Asio 创建线程池。应用程序会将文件操作发布到线程池中，并立即返回。然后线程池将同步执行操作，并在完成时调用或发布完成处理程序。

有几点需要考虑：

*   允许应用程序提示线程池的并发级别。这将允许线程池分配足够的线程来满足应用程序的预期需求。
*   将在其中调用完成处理程序的线程。例如，它可以在执行同步操作的同一线程中执行，或者发布到在`io_service`发布文件操作时提供给池的不同线程中。
*   完成处理程序的同步或异步行为。例如，如果完成处理程序是[strand::wrap](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/io_service__strand/wrap.html)的结果，那么它将被异步调用到工作线程。因此，完成处理程序的参数必须保持有效，直到处理程序被调用。这通常可以通过允许按值传递或移动参数来解决。

最后，[libuv](https://github.com/joyent/libuv)是一个提供同步和异步文件操作的 C 库。它可能能够作为有价值的底层实现或参考材料。

# mysql - 来自 2 个查找表的 Mysql 查询

> ID：13307631
> 
> 赞同：1
> 
> 时间：2012-11-09T11:55:10.330
> 
> 标签：mysql

对于改善广告公司工作流程的项目，您可以使用不同的表进行查询，这些表被使用：

```
clients: Contains ID, business, lastname, name, addresse, city and zoneID etc
lookupClients: ID, clientID, productID, date, part1, part2, sizeID, design, quant
lookupPrices: ID, productID, sizeID, price
products: ID, artname, image, category
size: ID, size, width, height 
```

为了获得我需要的信息，你做了以下 SQL 查询

```
SELECT products.ID AS PID, clients.zoneID AS ZID, clients.business, clients.address, size.size, lookupClients.quant, lookupClients.date, lookupClients.part1, lookupClients.part2, lookupPrices.price
FROM lookupClients, lookupPrices, clients, products, size, zone
WHERE lookupClients.clientID = clients.ID
AND lookupClients.sizeID = lookupPrices.sizeID
AND lookupClients.sizeID = size.ID
AND lookupClients.productID = products.ID
AND lookupPrices.productID = products.ID
AND clients.zoneID = zone.ID
ORDER BY clients.zoneID, lookupClients.sizeID, clients.business 
```

到目前为止，这个查询工作正常，我用它在 mysql 中构建一个视图。但问题是，当您想要构建此视图的总和并对列 part1、part2 和 price 求和时，mysql 返回完全错误的结果。有没有人想改进这个查询以获得正确的总和？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:07:00.040

像这样添加一个`GROUP BY`子句：

```
SELECT 
  p.ID AS PID, 
  c.zoneID AS ZID, 
  c.business, 
  c.address, 
  s.size, 
  lc.quant, 
  lc.date, 
  SUM(lc.part1), 
  SUM(lc.part2), 
  SUM(lp.price)
FROM lookupClients lc 
INNER JOIN lookupPrices lp ON lc.sizeID = lp.sizeID
INNER JOIN clients c ON lc.clientID = c.ID
INNER JOIN products p ON lc.productID = p.Id 
INNER JOIJ size s ON s.ID = lc.sizeId
INNER JOIN zone z ON c.zoneID = z.id
GROUP BY p.ID, c.zoneID, c.business, c.address, s.size, lc.quant, lc.date
ORDER BY c.zoneID, lc.sizeID, c.business 
```

# android - Android：PhoneStateListener 在长时间发送/接收数据操作期间未更新

> ID：13307635
> 
> 赞同：1
> 
> 时间：2012-11-09T11:55:31.033
> 
> 标签：android, updates, phone-state-listener

我已经使用 PhoneStateListener 编写了一个应用程序来获取级别（信号强度）、单元位置等的更新。通常这工作正常，我没有问题。我通常每 1 或 2 秒看到一次关卡更新。

在同一个应用程序中，我可以开始文件下载，然后上传。该文件是 2MB - 但我有一个超时，所以我在 10 秒后取消下载/上传。所有这些我都在一个额外的线程中完成，这也很好。

但是：在下载/上传过程中不会发生关卡更新。通常这可能是我的代码中的一个问题 - 是的。

但我可以重现它：如果我坐火车，我会浏览一个包含大量文本和图像的新闻页面 (www.spiegel.de)。正如我所看到的，下载挂在中间的某个地方我打开了电话信息。而且关卡更新也挂了！该级别更新近5-10秒，下载完成。

此问题出现在具有不同操作系统的不同手机（三星、htc、android 2.3.3-4.0.x）上。

所以这似乎是一个系统问题，而且可能是，这不是正确的组。

但我希望有人可以帮助或知道这个问题。

在此先感谢，阿克塞尔

# android - Facebook Android 教程注销

> ID：13307636
> 
> 赞同：0
> 
> 时间：2012-11-09T11:55:36.340
> 
> 标签：android, facebook, login, logout

我正在关注[本教程](https://developers.facebook.com/docs/mobile/android/build/#sig)。我知道您从中检索访问令牌`savedPreferences`，然后创建了一个注销按钮。问题是，无论我是从我的应用程序还是从 Facebook 应用程序注销，我的 access_token 似乎总是正确的。

这是我的代码：

```
public class MainActivity extends Activity {
    private String TAG = MainActivity.class.getName();      

    Facebook mFacebook = new Facebook("whatever");
    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(mFacebook);

    private SharedPreferences mPrefs;

    //UI elements
    private ImageButton fbLoginButton;
    private Button getInfoButton;
    private Button fbLogoutButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);

        if(access_token != null) {
            Log.d(TAG, "Token found. Setting token " + access_token);
            mFacebook.setAccessToken(access_token);
        }

        if(expires != 0) {
            Log.d(TAG, "Setting expire " + expires);
            mFacebook.setAccessExpires(expires);
        }

        if(!mFacebook.isSessionValid()) {
            mFacebook.authorize(this, new String[] {"email", "read_friendlists" }, new DialogListener() {
                @Override
                public void onComplete(Bundle values) {
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token", mFacebook.getAccessToken());
                    editor.putLong("access_expires", mFacebook.getAccessExpires());
                    editor.commit();
                    Log.d(TAG, "Logging you in");
                }

                @Override
                public void onFacebookError(FacebookError error) {
                     Log.d(TAG, "Facebook error: " + error.getMessage() );

                }

                @Override
                public void onError(DialogError e) {
                     Log.d(TAG, "Error: " + e.getMessage());
                }

                @Override
                public void onCancel() {
                    Log.d(TAG, "User Canceled");
                }
            });
        }
        else{
            Toast.makeText(this, "Already logged in", Toast.LENGTH_LONG).show();
        }

        fbLoginButton = (ImageButton) findViewById(R.id.buttonFBLogin);
        getInfoButton = (Button) findViewById(R.id.buttonGetInfo);
        fbLogoutButton = (Button) findViewById(R.id.buttonLogout);

        fbLogoutButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                doLogout();
            }
        });
    }

    protected void doLogout() {
        mAsyncRunner.logout(this, new RequestListener() {
              @Override
              public void onComplete(String response, Object state) {
                  Log.d(TAG, "Logging you out");
              }

              @Override
              public void onIOException(IOException e, Object state) {}

              @Override
              public void onFileNotFoundException(FileNotFoundException e,
                    Object state) {}

              @Override
              public void onMalformedURLException(MalformedURLException e,
                    Object state) {}

              @Override
              public void onFacebookError(FacebookError e, Object state) {}
            });
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        mFacebook.authorizeCallback(requestCode, resultCode, data);
    }
} 
```

我总是得到`Already logged in`吐司。我做错了什么吗？

PS。在从中检索 access_token 之前`sharedpreferences`，该应用程序似乎运行良好，因此我的 API 密钥或调试密钥没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:09:32.820

尝试`mFacebook.logout`检查响应值。如果注销成功，它将为“true”。为我工作。

不要忘记单点登录功能。如果您仍将登录 Facebook 应用程序，它不会真正注销您。

# ios - 忍者图表条形图自定义

> ID：13307638
> 
> 赞同：4
> 
> 时间：2012-11-09T11:55:41.863
> 
> 标签：ios, graph, charts

我正在使用 Shinobi Controls Charts 来做这个项目，我很难找到如何自定义我的图表以尽可能接近这个：

![目标图](../Images/824756dc2b56d0b484c75ca07cbd4c98.png)

这是我到目前为止所拥有的：

![到目前为止我有这个](../Images/606bf52abafdbe644c703ced07dbf25f.png)

底部的标签是在第一个图表中表示为 [name] 的标签。

条的颜色还可以，我知道如何更改它们。我的问题在于每个栏顶部的标签以及网格和背景网格。

1）如何删除网格并将图形颜色更改为透明？`chart.xAxis.style.gridStripeStyle.showGridStripes = NO;`不删除网格。

2）径向系列有一个回调，我可以在其中更改标签位置，但是在查看了演示附带的所有文档后，我找不到任何东西来更改条形图的轴标签位置并添加更复杂的图像和 2 或 3 个标签。这些盒子也必须与酒吧一起移动。

有谁知道如何做这两个主题？

预先感谢您提供的任何帮助。

**编辑：** 我已经能够删除轴

```
axis.style.gridStripeStyle.showGridStripes = NO; // removes the main bar
axis.style.majorGridLineStyle.showMajorGridLines = NO; // removes the grid bars 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:12:54.193

关于你的第二点，使用

```
- (void)sChart:(ShinobiChart *)chart alterTickMark:(SChartTickMark *)tickMark
beforeAddingToAxis:(SChartAxis *)axis 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:38:19.617

关于你的第一点使用

```
chart.axis.style.majorGridLineStyle.showMajorGridLines = NO 
```

# android - Calabash-Android - 找不到测试服务器并且无法签署测试服务器

> ID：13307640
> 
> 赞同：1
> 
> 时间：2012-11-09T11:55:51.130
> 
> 标签：android, cucumber

我已按照[此处](https://github.com/calabash/calabash-android)的步骤操作：我正在使用默认功能文件。当我运行时：`calabash-android run <some.apk>`然后我收到以下错误：

`No test server found for this combination of app and calabash version. Recreating test server.`

`jarsigner command: "/bin/jarsigner.exe" -sigalg MD5withRSA -digestalg SHA1 -signedjar test_servers/dc8cdea9d4248b575be609b25c1668fd_0.3.2.apk -storepass android -keystore`

我们正在使用 calabash-android 0.3.2

任何帮助，将不胜感激。

**更新：** 我已经删除了葫芦设置文件，现在我得到了不同的错误：

C:/Ruby193/lib/ruby/gems/1.9.1/gems/calabash-android-0.3.3.pre5/bin/calabash-android-build.rb:38:in `block in calabash_build': 无法签名测试服务器

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:50:05.413

看起来您的`.calabash-settings`文件配置错误。（所有空值）

`calabash-android setup`仅当您的应用使用 ~/.android/debug.keystore 以外的其他证书签名时，您才需要运行。

如果您确实跑步，则`calabash-android setup`需要回答所有问题。

# php - 在wordpress中使用php将数据输入mysql数据库

> ID：13307645
> 
> 赞同：0
> 
> 时间：2012-11-09T11:56:17.587
> 
> 标签：php, mysql, wordpress

我目前正在尝试将 wordpress 网页中表单中的数据输入 mysql 数据库。

这是wordpress上html页面的代码

```
<table>
<form name="form1" method="post" action="basisForm.php">
<strong>Please enter your information in order to download the Macs Cabs App</strong>
<tr><td>
Surmane Name:</td><td><input name="sname" type="text" id="sname"></td></tr> 
<tr><td>
First Name:</td><td><input name="fname" type="text" id="fname"></td></tr>
<tr><td>
Home Address:</td><td><input name="homeaddr" type="text" id="homeaddr"></td></tr>
<tr><td>
Most common Destination:</td><td><input name="commondest" type="text" id="commondest"></td></tr>
<tr><td>
Mobile Number:</td><td><input name="mobileno" type="text" id="mobileno"></td></tr>
<tr><td>
Home Number:</td><td><input name="homeno" type="text" id="homeno"></td></tr>
<tr><td>
Email Address:</td><td><input name="email" type="text" id="email"></td></tr>
<tr><td>
<input type="submit" name="Submit" value="Submit"></td></tr>
</form>
</table>

<?php
$con = mysql_connect("localhost","root","");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

 mysql_select_db("macs cabs", $con);

$sql="INSERT INTO customers (sname, fname, homeaddr, commondest, mobileno, homeno, email)
VALUES
  ('$_POST[sname]','$_POST[fname]','$_POST[homeaddr]','$_POST[commondest]','$_POST[mobileno]','$_POST[     homeno]','$_POST[email]')";          

if (!mysql_query($sql,$con))
 {
 die('Error: ' . mysql_error());
  }
 echo "1 record added";

 mysql_close($con);
?> 
```

我已经安装了 phpexec 插件，这似乎运行良好。

当我在表单中输入数据并提交时，它不会出现在数据库中。

我的主键似乎自动递增，告诉我发生了什么事，但没有数据出现。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:10:14.360

尝试这个：

```
 $sql="INSERT INTO customers (sname, fname, homeaddr, commondest, mobileno, homeno, email)
VALUES  ('{$_POST['sname']}','{$_POST['fname']}','{$_POST['homeaddr']}','{$_POST['commondest']}','{$_POST['mobileno']}','{$_POST['homeno']}','{$_POST['email']}')"; 
```

另外，我假设您了解将 SQL 注入数据库的风险。即，您永远不应该将用户输入的数据直接插入数据库，您应该事先进行某种清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:05:22.653

避免使用 mysql_* 函数。您的插入查询不会转义用户输入。并且很可能导致sql注入

请改用 PDO 或 mysqli。两者都允许准备好的语句。

`$_POST`是一个关联数组。因此，您将传递密钥以获取特定值。例如，如果 POST 数组包含一个名为“name”的键，那么您可以像这样访问它`$_POST['name']`：您可以使用单引号/双引号。

学习 PDO 的好教程：[http ://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:16:03.070

可能不是您正在寻找的答案，但...

我可能会为此使用内置功能的wordpress。自定义帖子类型允许此功能。(http://codex.wordpress.org/Post_Types) 这里有一篇关于它的文章：http://wpshout.com/wordpress-submit-posts-from-frontend/

这意味着您可以利用 wordpress 的输入过滤并允许用户界面查看后端中的数据以进行编辑和删除等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T12:34:59.647

@jamalali81 的答案是正确的，但我会删除 $_POST 变量周围的 '' ，因此代码如下所示：

```
$sql="INSERT INTO customers (sname, fname, homeaddr, commondest, mobileno, homeno, email)
VALUES ({$_POST['sname']},{$_POST['fname']},{$_POST['homeaddr']},{$_POST['commondest']},{$_POST['mobileno']},{$_POST['homeno']},{$_POST['email']})"; 
```

您还应该使用 PDO 并清理变量以避免 SQL 注入。

如果上述方法不能解决您的问题，customers 表结构也会有所帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-09T12:00:59.700

check with this query:-

```
"INSERT INTO customers (sname, fname, homeaddr, commondest, mobileno, homeno, email)
VALUES
  ('$_POST['sname']','$_POST['fname']','$_POST['homeaddr']','$_POST['commondest']','$_POST['mobileno']','$_POST['homeno']','$_POST['email']')"; 
```

may helpful...:)

# php - 以 codeigniter 形式传递 ID

> ID：13307646
> 
> 赞同：0
> 
> 时间：2012-11-09T11:56:19.003
> 
> 标签：php, forms, codeigniter

如何以 codeigniter 形式传递行 ID？我有这个代码

```
if(isset($records)) : foreach($records as $row) : ?>
    <?php echo form_open('site/update/'); ?>
    <td><?php echo form_input('solution_time', $row->solution_time); ?></td>
    <td><textarea><?php echo $row->note; ?></textarea></td>
    <td><?php echo form_submit('update', 'Update'); ?></td>
    <?php form_close(); ?>
    </tr>
    <?php endforeach; ?>
    <?php else : ?>
    <h2>No Records</h2>
    <?php endif; ?> 
```

但它每次都会为每一行的 ID 返回 1：

```
localhost/it/index.php/site/update/1 
```

更新：我添加了一个新行（form_hidden），但它也不起作用

```
if(isset($records)) : foreach($records as $row) : ?>
        <?php echo form_open('site/update/'); ?>
    <?php echo form_hidden('id', $row->id); ?>
        <td><?php echo form_input('solution_time', $row->solution_time); ?></td>
        <td><textarea><?php echo $row->note; ?></textarea></td>
        <td><?php echo form_submit('update', 'Update'); ?></td>
        <?php form_close(); ?>
        </tr>
        <?php endforeach; ?>
        <?php else : ?>
        <h2>No Records</h2>
        <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:11:58.547

尝试将行 ID 传递给打开的表单。您正在做的是创建一堆具有相同操作的表单，并且提交只是将第一个表单传递回控制器。在表单操作中传递 ID 应该可以解决这个问题。

```
 <?php echo form_open('site/update/'.$row->id); ?> 
```

另一种选择是使用 jQuery 进行更新。

```
 $(document).on("click", ".updateLink", function() {
    $row = $(this).closest('tr');

    $.ajax({
        type: "GET",
        url: "<?=base_url()?>site/update/",
        data: $row.find('input').serialize(),
  dataType: "json",
        success: function(content) {
            if (content.status == "success") {
                $row.stop().css("background-color", "#99FF66").animate({backgroundColor: "#FFF"}, 1500);
            } else {

            $("#error").html('<p>'+content.message+'</p>');
            }
        }
    });
    return false;
}); 
```

在您的表单中将提交按钮更改为链接：

```
<td><?php echo <a href="#" class="updateLink">Update</a></td> 
```

然后在您的控制器中，您只需在成功时回显一条成功消息。

```
if(update successfull)
{
    print json_encode(array("status"=>"success","message"=>""));
} 
```

# c++ - 将 'double*' 转换为 'boost::any*'

> ID：13307653
> 
> 赞同：0
> 
> 时间：2012-11-09T11:56:44.140
> 
> 标签：c++, boost, boost-any

我有一个可变`boost::any*`项目。我的要求是：

使用可以是 int、double 或任何其他数据类型的值列表分配项目。但是在给定的时间，数据类型将是唯一的。

问题：

对于单个值，我可以使用 items[index] = value; 但是，如果我这样做 item = values; 其中 values 是一个双精度数组，它不能自动转换。另外，如果我使用

```
items = boost::any_cast<boost::any*>(values) 
```

我收到“boost::bad_any_cast”：使用“boost::any_cast”转换失败。

关于如何将双数组转换为数组的一些提示将非常有用`boost::any`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:57:34.133

它只是行不通。在 a`double[]`中，双打是连续的。两个双打之间没有空格。大致相同的情况适用于 a ：两个对象`boost::any[]`之间没有空间。但是存储在相邻包装器`any`内的两个双精度之间存在空间。`boost::any<>`

您必须编写一个函数。

# powershell - 无法使用参数和脚本文件调用脚本

> ID：13307654
> 
> 赞同：0
> 
> 时间：2012-11-09T11:56:47.707
> 
> 标签：powershell

当我同时传递脚本文件和参数时，我无法使用启动进程调用 powershell

```
start-process powershell d:\startTask.ps1 "param1" "param2" "param3" 
```

我的 startTask.ps1 如下所示

```
param([string]$x="default",[string]$y="default",[string]$z="default")
echo "x: $x"
echo "y: $y"
echo "z: $z" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:15:05.507

尝试：

```
Start-Process Powershell -ArgumentList "-noexit","-File d:\startTask.ps1 param1 param2 param3" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:22:00.997

```
& powershell d:\startTask.ps1 "param1" "param2" "param3" 
```

# c# - 网格视图。取属性名

> ID：13307655
> 
> 赞同：1
> 
> 时间：2012-11-09T11:57:02.170
> 
> 标签：c#, asp.net, gridview

如果我通过 DataSource 动态填充 gridview，我在哪里可以获得列名？

```
 OracleDataAdapter adapter = new OracleDataAdapter();
        DataTable tableD = new DataTable();
        tableD.Locale = System.Globalization.CultureInfo.InvariantCulture;
        adapter.SelectCommand = oracleCom;
        adapter.Fill(tableD);
        tableResults.DataSource = tableD.AsDataView();
        tableResults.DataBind(); 
```

其中 tableResults 是 GridView。

此代码不起作用：

```
updatingAtributes += tableResults.Columns[i].HeaderText; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:49:59.560

如果您在 GridView 上配置列，则会设置 GridView 的 Columns 属性。如果您依靠 GridView 的默认行为通过将 AutoGenerateColumns 属性设置为 true 来呈现列，则不会为 Columns 集合设置任何值。在这种情况下，您将不得不使用您用作 GridView 的 DataSource 的对象（在您的情况下是 DataTable tableD）来获取列名。

# php - android、ios和php加密/解密

> ID：13307656
> 
> 赞同：1
> 
> 时间：2012-11-09T11:57:07.787
> 
> 标签：php, android, ios, encryption, private-key

我正在开发一个移动应用程序`android`，`ios`它需要与服务器通信`php`。我需要确保通信是安全的。我知道我可以使用，但我认为为这个项目购买证书`ssl`不值得。`ssl`

所以我想加密移动应用程序中的数据，然后在服务器端解密。我为[android/php](http://www.androidsnippets.com/encrypt-decrypt-between-android-and-php)找到了这个。但是呢`ios`？我怎么能实现这个类？

# c# - C#在sqlite中存储图像的最佳方法

> ID：13307658
> 
> 赞同：0
> 
> 时间：2012-11-09T11:57:15.403
> 
> 标签：c#, image, sqlite

我正在尝试建立一个非常简单的数据库，我应该有一个由图像和与之关联的单词组成的实体。我将 SQLite 与 C# 一起使用，因为这将是一个最终会部署的应用程序，所以我想知道是否有将图像保存在数据库中的最佳方法。

我看到了很多使用字节流的技术，所以我的问题是：

最好将字节流保存在实体字段中，还是只保存应存储图像的应用程序的路径？..为什么选择的方法应该更好？..

感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:00:52.930

It is better to save path in database and image(or other files) on hdd

[Storing Images in DB - Yea or Nay?](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

# windows-phone-7 - 将 ListBox 馈送更改为 Pivot（SyndicationItem 消息而不是文本）

> ID：13307666
> 
> 赞同：1
> 
> 时间：2012-11-09T11:57:50.060
> 
> 标签：windows-phone-7, pivot, syndication-item

因此，我找到了一种为 Windows Phone 创建 RSS 提要应用程序的方法。它将 SyndicationFeed 项绑定到 Listbox 模板中。而且效果很好！但是，我想制作一个应用程序，它的处理方式有点不同。我想，将 Listbox 模板更改为 Pivot 会很容易。问题是，我得到的不是文章，而是“System.ServiceModel.Syndication.SyndicationItem”。

我不知道如何解决这个问题，有人可以帮助我吗？

xml:

```
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768" 
d:DataContext="{d:DesignData SampleData/MainViewModelSampleData.xaml}"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait"  Orientation="Portrait"
shell:SystemTray.IsVisible="True">

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">

    <Popup Name="myPopup" IsOpen="True" Width="Auto">
        <ProgressBar Height="Auto" IsIndeterminate="True"  Width="480" />
    </Popup>

    <controls:Pivot Name="FeedPivot" Loaded="loadFeed">
        <controls:Pivot.Title>
            <TextBlock FontSize="56"> Komorkomania </TextBlock>
        </controls:Pivot.Title>

        <controls:Pivot.HeaderTemplate>
            <DataTemplate>
                <Grid>
                    <TextBlock>test1</TextBlock>
                 </Grid>
            </DataTemplate>
        </controls:Pivot.HeaderTemplate>

        <controls:Pivot.DataContext>
            <DataTemplate>
                <StackPanel>
                    <TextBlock>test</TextBlock>
                    <!--
                    <TextBlock FontWeight="Bold" FontSize="28" Name="feedTitle" TextWrapping="Wrap" Margin="12,0,0,0" HorizontalAlignment="Left" Foreground="{StaticResource PhoneAccentBrush}" Text="{Binding Title.Text, Converter={StaticResource RssTextTrimmer}}" Width="430" />
                    <TextBlock Name="feedSummary" FontSize="24" TextWrapping="Wrap" Margin="12,0,0,0" Text="{Binding Summary.Text, Converter={StaticResource RssTextTrimmer}}" Width="430" />
                    <TextBlock Name="feedPubDate" Foreground="{StaticResource PhoneSubtleBrush}" Margin="12,0,0,10" Text="{Binding PublishDate.DateTime}" Width="430" />
                    -->
                 </StackPanel>
            </DataTemplate>
        </controls:Pivot.DataContext>

      </controls:Pivot>
</Grid> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using System.IO;
using System.ServiceModel.Syndication;
using System.Xml;
using Microsoft.Phone.Tasks;
using Microsoft.Phone.Shell;
using System.ComponentModel;
using System.Windows.Controls.Primitives;

namespace KomorkomaniaRss
{
    public partial class MainPage : PhoneApplicationPage
    {
    // Constructor
    public MainPage()
    {
        InitializeComponent();
        myPopup.IsOpen = true;
    }

    // Co robimy jak już w końcu się ściągnie?
    private void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                MessageBox.Show(e.Error.Message);
            });
        }
        else
        {
            // Save the feed into the State property in case the application is tombstoned. 
            this.State["feed"] = e.Result;

            UpdateFeedList(e.Result);
            myPopup.IsOpen = false;
        }
    }

    // This method determines whether the user has navigated to the application after the application was tombstoned.

    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        // First, check whether the feed is already saved in the page state.
        if (this.State.ContainsKey("feed"))
        {
            // Get the feed again only if the application was tombstoned, which means the ListBox will be empty.
            // This is because the OnNavigatedTo method is also called when navigating between pages in your application.
            // You would want to rebind only if your application was tombstoned and page state has been lost. 
            if (FeedPivot.Items.Count == 0)
            {
                UpdateFeedList(State["feed"] as string);
            }
        }
    }

    // This method sets up the feed and binds it to our ListBox. 
    private void UpdateFeedList(string feedXML)
    {
        // Load the feed into a SyndicationFeed instance.
        StringReader stringReader = new StringReader(feedXML);
        XmlReader xmlReader = XmlReader.Create(stringReader);
        SyndicationFeed feed = SyndicationFeed.Load(xmlReader);

        Deployment.Current.Dispatcher.BeginInvoke(() =>
        {
            // Bind the list of SyndicationItems to our ListBox.
            FeedPivot.ItemsSource = feed.Items;

        });
    }

    public void feedLoader()
    {
        myPopup.IsOpen = true;
        WebClient webClient = new WebClient();
        webClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(webClient_DownloadStringCompleted);
        webClient.DownloadStringAsync(new System.Uri("http://komorkomania.pl/feed/rss2"));
    }

    private void runBrowser(object sender)
    {
        ListBox listBox = sender as ListBox;

        if (listBox != null && listBox.SelectedItem != null)
        {
            // Get the SyndicationItem that was tapped.
            SyndicationItem sItem = (SyndicationItem)listBox.SelectedItem;

            // Set up the page navigation only if a link actually exists in the feed item.
            if (sItem.Links.Count > 0)
            {
                // Get the associated URI of the feed item.
                Uri uri = sItem.Links.FirstOrDefault().Uri;

                // Create a new WebBrowserTask Launcher to navigate to the feed item. 
                // An alternative solution would be to use a WebBrowser control, but WebBrowserTask is simpler to use. 
                WebBrowserTask webBrowserTask = new WebBrowserTask();
                webBrowserTask.Uri = uri;
                webBrowserTask.Show();
            }
        }

    }

    // The SelectionChanged handler for the feed items 
    private void feedListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        runBrowser(sender);
    }

    private void loadFeed(object sender, RoutedEventArgs e)
    {
        feedLoader();
        if (!App.ViewModel.IsDataLoaded)
        {
            App.ViewModel.LoadData();
        }
    }
}
} 
```

有一些“剩菜”用于处理其他操作。请忽略它们，我还没有开始。最大的重点是让它在应用程序加载后显示文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:20:16.560

我相信我解决了这个问题。枢轴概念存在问题。这就是我解决这个问题的方法：

```
 <controls:Pivot Name="FeedPivot" Loaded="loadFeed" ScrollViewer.VerticalScrollBarVisibility="Visible" Tap="feedPivotTap" Margin="0,88,0,0" LoadedPivotItem="getPivotItem">

         <controls:Pivot.HeaderTemplate>
            <DataTemplate>
                    <TextBlock FontWeight="Bold" FontSize="28" Name="feedTitle" TextWrapping="Wrap" Margin="12,0,0,0" HorizontalAlignment="Left" Foreground="#FF5DBA00" Text="{Binding Title.Text, Converter={StaticResource RssTextTrimmer}}" Width="430" />
                </DataTemplate>
        </controls:Pivot.HeaderTemplate>

        <controls:Pivot.ItemTemplate>
            <DataTemplate>
                <ScrollViewer>
                     <StackPanel>
                        <TextBlock Name="feedSummary" FontSize="24" TextWrapping="Wrap" Margin="12,0,0,0" Text="{Binding Summary.Text, Converter={StaticResource RssTextTrimmer}}" Width="430" />
                        <TextBlock Name="feedPubDate" Foreground="{StaticResource PhoneSubtleBrush}" Margin="12,0,0,10" Text="{Binding PublishDate.DateTime}" Width="430" />    
                      </StackPanel>
                </ScrollViewer>
            </DataTemplate>     
        </controls:Pivot.ItemTemplate>

    </controls:Pivot> 
```

# android - 在不使用 Intent 的情况下在 Android 中显示通知

> ID：13307668
> 
> 赞同：2
> 
> 时间：2012-11-09T11:57:59.513
> 
> 标签：android, android-layout, android-intent, notifications

我是 android 的初学者。我想在我的应用程序中显示通知。我使用以下代码

```
 String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager notificationManager = (NotificationManager)  getSystemService(ns);
        int icon = R.drawable.icon;
        CharSequence tickerText = "";
        long when = System.currentTimeMillis();
        Notification notification  = new Notification(icon, tickerText, when);
        Context context = getApplicationContext();
        CharSequence contentTitle = "Hello";
        CharSequence contentText = "Welcome ";
        Intent notificationIntent = new Intent();
        PendingIntent contentIntent = PendingIntent.getActivity(context, 0, null, 0);
        notification.defaults |= Notification.DEFAULT_SOUND;
        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);       
        notificationManager.notify(HELLO_ID, notification); 
```

但我的问题是每当运行我的应用程序时，意图都会加载图标。然后图标会显示在状态栏中。如何在不使用意图的情况下显示通知？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:32:07.507

我不确定这是否是你想要的，但如果你想显示一些快速通知，我会想到祝酒词：

```
 Context context = getApplicationContext();
    CharSequence text = "Notification!";
    int duration = Toast.LENGTH_SHORT;
    Toast toast = Toast.makeText(context, text, duration);
    toast.show(); 
```

您可以更改 toast 显示的持续时间。

# php - 无法使用 php 连接到 SQL SERVER 2000

> ID：13307675
> 
> 赞同：0
> 
> 时间：2012-11-09T11:58:32.917
> 
> 标签：php, sql, sql-server, sql-server-2000

> **可能重复：**
> [无法连接到 SQL SERVER 2000](https://stackoverflow.com/questions/13467286/cannot-connect-to-sql-server-2000)

我正在使用 php 5.3.1 连接到远程机器上的 SQL SERVER 2000。我使用 Windows XP。在使用这样的简单程序时：

```
$conn = mssql_connect("VBNET","sa","anythinghere") or die ( 'Can not connect to server' ); 
```

我收到以下错误：

> 警告：mssql_connect() [function.mssql-connect]：消息：用户“sa”登录失败。原因：未与受信任的 SQL Server 连接关联。（严重性 14）在第 8 行的 C:\wamp\www\Mssql\test.php
> 
> 警告：mssql_connect() [function.mssql-connect]：无法连接到服务器：第 8 行 C:\wamp\www\Mssql\test.php 中的 VBNET 无法连接到服务器

我在我的 SQL SERVER 中启用了 TCP/IP 和命名管道并重新启动它。其身份验证也设置为混合模式身份验证。那么我在这里缺少什么？

提前致谢。

***编辑***这个问题首先是关于 SQL SERVER 2008，但后来我知道它是 SQL SERVER 2000。请原谅我的无知，但问题仍然存在。所以请给我一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:01:56.540

请查看 Microsoft 知识库文章[889615](http://support.microsoft.com/kb/889615)以获取解决方案。我发现这是在 Google 搜索您的错误消息：“与受信任的 SQL Server 连接相关联”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:10:30.620

> **当 SQL Serversecurity 身份验证设置为仅 Windows 并且以下条件之一为真时，会出现此问题**：
> 
> *   您正在尝试使用 SQL Server 登录名连接到 SQL Server 数据库。
> *   您正在尝试使用受信任的 SQL Server 连接连接到安装在基于 Microsoft Windows 98 的计算机上的 SQL Server 2000 桌面引擎（也称为 MSDE 2000）数据库。
> *   您正在尝试从没有足够权限连接到
>     服务器的 Windows 帐户连接到 SQL Server 数据库。
> 
> **若要解决此问题，请根据您遇到的症状使用以下方法之一：**
> 
> **- SQL Server 登录**
> 
> 使用有效的 Windows 登录名连接到 SQL Server。如果必须继续使用 SQL Server 登录，可以将 SQL Server 中的安全身份验证模式更改为 SQL Server 和 Windows。为此，请按照下列步骤操作：
> 
> 1.  启动企业管理器。
> 2.  展开 Microsoft SQL Server，然后展开 SQL Server 组。
> 3.  右键单击要更改为 SQL Server 和 Windows 身份验证的服务器，然后单击“属性”。
> 4.  在 SQL Server 属性对话框中，单击安全选项卡，单击 SQL Server 和 Windows，然后单击确定。
> 5.  当系统提示您重新启动 SQL Server 服务时，单击是。
> 
> **- 权限不足的 Windows 帐户**
> 
> 要变通解决此问题，您必须将 Windows 帐户添加到 SQL Server，然后将适当的权限授予用户需要访问的每个数据库。若要在 SQL Server 2000 中执行此操作，请按照下列步骤操作：
> 
> 1.  启动企业管理器。
> 2.  展开 Microsoft SQL Server，然后展开 SQL Server 组。
> 3.  展开您的服务器，然后展开安全性。
> 4.  右键单击登录，然后单击新建登录。
> 5.  在 SQL Server 登录属性对话框中，在名称框中输入 Windows 帐户名称。在域列表中，选择 Windows 帐户所属的域。
> 6.  单击“数据库访问”选项卡，为客户端设置适当的权限，然后单击“确定”。

[http://support.microsoft.com/kb/889615](http://support.microsoft.com/kb/889615)

# delphi - 在 Delphi 6 专业 IDE 中使用 DCC32 编译项目

> ID：13307682
> 
> 赞同：3
> 
> 时间：2012-11-09T11:59:48.470
> 
> 标签：delphi, delphi-6

IDE：德尔福 6 专业版。

我们有大项目。

我不能使用 Project Groups 来构建它们，因为我在构建时遇到了 OM 错误和奇怪的文件错误。

我的想法是我将使用 DCC32.exe 之前我与命令行参数（dcc32.cfg）发生了争执，但我认为我解决了它......

今天我尝试用它编译项目，但在第一个项目我得到了错误。

chdir c:\d\anyproject dcc32 -b any.dpr

该错误报告我找不到单位。我尝试在Delphi中编译，它是成功的。

所以我检查了这个问题。为什么以前的项目建筑是成功的，为什么这不是……？

然后我意识到这个 dpr 正在使用对子目录的引用，但并非所有文件都添加到项目中，其中更多是通过项目的“搜索路径”链接的。

但如果这是真的，那么这意味着 DCC32 没有使用项目的 DOF/CFG 文件！

所以问题在于 Delphi 合并所有内容以提供结果。它合并了全局搜索路径、项目的编译器指令、搜索路径等所有内容，并使用了项目的条件指令。

如果我理解得很好，DCC32 不用，只有 dcc32.cfg，而且我必须合并所有内容以进行编译，这是不可能的工作，因为我需要编写一个解析器来解释项目的参数，并合并与全局变量。

或者我误解了什么，问题是由我错过的其他事情引起的？

我在等你的建议！

感谢所有的想法、链接、信息等。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T12:15:30.337

来自以下位置的 dcc32 选项：

1.  一个 dcc32.cfg 文件。这可以在当前目录中，也可以在与 dcc32.exe 相同的目录中。
2.  命令行。
3.  源代码。

我按优先级递增的顺序排列了这些。因此，源代码中指定的选项始终会覆盖 dcc32.cfg 文件或命令行中的设置。

dcc32.exe 将选择它首先找到的任何 dcc32.cfg 文件。它首先在当前目录中查找。

这一切意味着您负责从 .dof 文件中获取设置，并从 IDE 获取到命令行编译环境中。

这是您应该升级的众多原因之一。现代 Delphi 版本使用 msbuild 进行命令行编译，并且很容易确保您的命令行构建与 IDE 构建相同。

当您观看正在进行的 msbuild 时，您会看到它会调用 dcc32.exe 并在命令行中指定所有选项。将项目设置转换为对 dcc32.exe 的调用是您现在面临的问题。在 Delphi 6 中，您必须自己执行此操作。在现代 Delphi 中，工具是产品的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:09:32.293

这可能会有所帮助：

[http://delphi.wikia.com/wiki/Compile_from_Commandline](http://delphi.wikia.com/wiki/Compile_from_Commandline)

它描述了如何使用从 Delphi 1 到 XE3 的 Delphi 版本进行 commanline 编译，还提供了对您可能会发现有用的工具 dof2cfg 的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:15:07.127

IIRC 命令行编译器始终使用一个名为 dcc32.cfg 的配置文件，该文件位于当前文件夹或 dcc32.exe 所在的位置。您可以尝试将您的 .cfg 文件重命名或复制到 dcc32.cfg 并查看是否可以解决您的问题。

# python - 删除反斜杠继续符

> ID：13307684
> 
> 赞同：1
> 
> 时间：2012-11-09T11:59:52.103
> 
> 标签：python

我正在尝试使用 AST 解析一些代码，但由于反斜杠延续字符而出现问题。

当我有一个连续字符**\**时，textwrap 将无法消除代码，我想知道如何摆脱它。

```
code = """
    def foo():
        message = "This is a very long message that will probably need to wrap at the end of the line!\n \
And it actually did!"
"""

import textwrap
print textwrap.dedent(code)

import ast
ast.parse(textwrap.dedent(code)) 
```

我正在添加更多细节来澄清这个问题：

我有一个包含以下内容的模块 nemo.py：

```
class Foo(object):

    def bar(self):
        message = "This is a very long message that will probably need to wrap at the end of the line!\n \
And it actually did!" 
```

和试图解析代码的主模块：

```
import ast
import nemo
import inspect
import textwrap

code = str().join(inspect.getsourcelines(nemo.Foo.bar)[0])
ast.parse(textwrap.dedent(code)) 
```

和追溯：

```
Traceback (most recent call last):
  File "/Users/kelsolaar/Documents/Development/Research/_BI.py", line 7, in <module>
    ast.parse(textwrap.dedent(code))
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ast.py", line 37, in parse
    return compile(source, filename, mode, PyCF_ONLY_AST)
  File "<unknown>", line 1
    def bar(self):
    ^
IndentationError: unexpected indent 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:15:45.517

这是因为你误解了什么[`textwrap.dedent()`](http://docs.python.org/2/library/textwrap.html#textwrap.dedent)。

它只删除任何***常见的****前导*空格。在您的情况下，没有常见的前导空格，因此不会删除任何内容。

 *此外，你想要的实际上是`\\`而不是`\n \`在这种情况下。这是因为您实际上希望解析*打印的内容。*`\\`只会打印一个`\`，这就是你想要的。将在无效`\n \`的子句中打印一个新行。`"..."`

现在考虑这段代码：

```
>>> code = """
    def foo():
        message = "This is a very long message that will probably need to wrap at the end of the line! \\
    And it actually did!"
"""

>>> print textwrap.dedent(code)

def foo():
    message = "This is a very long message that will probably need to wrap at the e
nd of the line! \
And it actually did!"

>>> ast.parse(textwrap.dedent(code))
<_ast.Module object at 0x10e9e5bd0> 
```

在这种情况下，有***常见的***前导空格，因此它们被删除。

* * *

编辑：

如果你想一起摆脱`\`所有，你可以考虑使用`"""My sentence"""`for `message`in `def bar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:49:05.113

对于问题的第二部分，我下面的简单替换涵盖了我的需求：**code.replace("\\n", str())**

```
import ast
import nemo
import inspect
import textwrap

code = str().join(inspect.getsourcelines(nemo.Foo.bar)[0])
code.replace("\\\n", str())
ast.parse(textwrap.dedent(code)) 
```*

# ruby-on-rails-3 - ActiveRecord: Adding condition to ON clause for includes

> ID：13307685
> 
> 赞同：10
> 
> 时间：2012-11-09T11:59:58.167
> 
> 标签：ruby-on-rails-3, activerecord, join

I have a model offers and another historical_offers, one offer has_many historical_offers.

Now I would like to eager load the historical_offers of one given day for a set of offers, if it exists. For this, I think I need to pass the day to the ON clause, not the WHERE clause, so that I get all offers, also when there is no historical_offer for the given day.

With Offer.where(several_complex_conditions).includes(:historical_offers).where("historical_offers.day = ?", Date.today)

I would get

```
SELECT * FROM offers 
LEFT OUTER JOIN historical_offers 
ON offers.id = historical_offers.offer_id 
WHERE day = '2012-11-09' AND ... 
```

But I want to have the condition in the ON clause, not in the WHERE clause:

```
SELECT * FROM offers 
LEFT OUTER JOIN historical_offers 
ON offers.id = historical_offers.offer_id AND day = '2012-11-09' 
WHERE ... 
```

I guess I could alter the has_many definition with a lambda condition for a specific date, but how would I pass in a date then?

Alternatively I could write the joins mysqlf like this:

```
Offer.where(several_complex_conditions)
  .joins(["historical_offers ON offers.id = historical_offers.offer_id AND day = ?", Date.today]) 
```

But how can I hook this up so that eager loading is done?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-01T16:49:06.427

经过几个小时的头疼并尝试各种方法来完成急切加载一组受限的关联记录后，我在这个线程中遇到了@dbenhur 的[答案，这](https://stackoverflow.com/questions/9642900/eager-loading-the-right-way-to-do-things)对我来说很好 - 但是条件不是我传递的东西（它是相对于 Date.today 的日期）。基本上，它与我想将 LEFT JOIN ON 子句放入 has_many 条件的条件建立关联。

```
has_many :prices, order: "rate_date"
has_many :future_valid_prices,
    class_name: 'Price',
    conditions: ['rate_date > ? and rate is not null', Date.today-7.days] 
```

然后在我的控制器中：

```
@property = current_agent.properties.includes(:future_valid_prices).find_by_id(params[:id]) 
```

# java - 我可以在 HashMap 中通过 Key 实现类型安全吗？

> ID：13307686
> 
> 赞同：3
> 
> 时间：2012-11-09T12:00:09.073
> 
> 标签：java, generics, map

以下场景要解决：我需要创建一个类，该类将根据给定的 id+classtype 返回或存储水果列表。所以我在质疑自己，`Collection`使用哪个以及是否能够将所有水果列表存储在同一个`Collection`中以用于 simplecity。我决定`HashMap`尝试一次存储所有列表，因为键值原则听起来对我的用例很熟悉，只是它可能需要更复杂的键，因为我需要两个方面（在我的情况下是 id 和水果类），以识别值。

所以我创建了一个自己的关键对象：

```
class FruitKey
{
  int                     id;
  Class<? extends Fruits> type;

  public FruitKey( int id, Class<? extends Fruits> type )
  {
    this.id = id;
    this.type = type;
  }

  //equals, hashcode, etc.
} 
```

创建 a 后`Map<FruitKey, List<? extends Fruits>>`， put 可以正常工作，但是当然，当我尝试将 FruitLists 从 Map 中取出时，我无法保证特定的水果类型，而必须转换结果：

```
public static void main( String[] args )
{
  Map<FruitKey, List<? extends Fruits>> fruitMap = new HashMap<>();

  Apple oneApple = new Apple();
  List<Apple> manyApples = new ArrayList<>();
  manyApples.add( oneApple );

  fruitMap.put( new FruitKey( 1, Apple.class ), manyApples);

  //Any way to avoid typesafty and cast?
  List<Apple> myApples = (List<Apple>) fruitMap.get( new FruitKey( 1, Apple.class ) );
} 
```

由于 classtype 已经包含在 key 中，我不知何故认为我可以将这些与 maps 值联系起来，但不幸的是我没有成功，没有将 map 专门用于特殊水果。您是否有机会避免我的 typesafe/classcast 问题，或者可以推荐另一种收集类型来实现我的目标？当然我可以为每个水果创建一个地图，但是因为那里有很多好吃的水果，我尽量避免它，因为我总是不得不在它们之间有所不同。

简而言之，这就是我想要的：

```
List<Apple> apples = SomeCollection.get( Key(id, Apple.class) ); 
```

之所以有 Id，是因为在同一个 Map 中可以有多个 Apples 列表，以及其他 Fruits 的多个 Lists。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:16:02.757

您可以使用异构容器。您仍然必须在容器内进行强制转换，但是由于泛型方法和`final`类的 ，强制转换是安全的，您可以抑制警告。

它是安全的，因为泛型`put`确保您永远不会在其中放入任何会导致演员表失败的东西。

```
public final class SomeCollection {

     private Map<FruitKey<? extends Fruits>, List<? extends Fruits>> fruitMap = new HashMap<>();

     //safe cast
     @SuppressWarnings("unchecked")
     public <T extends Fruits> List<T> get(FruitKey<T> key)
     {
         return (List<T>) fruitMap.get(key);
     }

     public <T extends Fruits> void put(FruitKey<T> key, List<T> fruits)
     {
         fruitMap.put(key, fruits);
     }
} 
```

用打字的`FruitKey`

```
class FruitKey<T extends Fruits>
{
   int                     id;
   Class<T> type;

   public FruitKey( int id, Class<T> type )
   {
      this.id = id;
      this.type = type;
   }     
} 
```

## 编辑

您还可以在内部创建一个内部类`Key<T>`，`SomeCollection`它封装了`FruitKey`篮子的 a 并带有适当的`hashCode`and `equals`。

```
private Map<Key<? extends Fruits>, List<? extends Fruits>> fruitMap = new HashMap<>();

//safe cast
@SuppressWarnings("unchecked")
public <T extends Fruits> List<T> getBasket(T fruit)
{
    Key<T extends Fruit> = new Key<T>(fruit.getBasketId());
    return (List<T>) fruitMap.get(key);
}
//or
//safe cast
@SuppressWarnings("unchecked")
public <T extends Fruits> List<T> getBasket(Class<T> klass, FruitKey key)
{
    Key<T extends Fruit> = new Key<T>(key);
    return (List<T>) fruitMap.get(key);
}

public <T extends Fruits> void addToBasket(T fruit, List<T> fruits)
{
    Key<T extends Fruit> = new Key<T>(fruit.getBasketId());
    fruitMap.put(key, fruits);
} 
```

# data-structures - 有效的数据结构，返回大于或等于给定键的最小元素并允许减少键

> ID：13307687
> 
> 赞同：1
> 
> 时间：2012-11-09T12:00:10.127
> 
> 标签：data-structures

是否存在允许以下操作的高效（log n）数据结构：

*   返回大于或等于给定键的最小元素
*   将此元素与较小的元素交换并相应地重新排列结构

元素的数量是已知的，并且在生命周期内不会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:35:48.033

你可以实现一个[平衡的二叉树，](http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree)比如[红黑树](http://en.wikipedia.org/wiki/Red-black_tree)

红黑树的搜索、插入和删除时间复杂度为 O(log(n))。

您必须进行一些修改以返回大于或等于给定键的最小元素。但我猜这个数据结构提供了基本行为。

# performance - SignalR performance issues with HubConnection (lots of threads in server, long delays between delivery)

> ID：13307695
> 
> 赞同：3
> 
> 时间：2012-11-09T12:00:50.010
> 
> 标签：performance, signalr, signalr-hub

we've written a prototype to test SignalR performance to check whether we can use it for our software. In that prototype we've tested both, forwarding data to clients via PersistentConnection and via HubConnection.

Our stresstest consists of three components:

*   1 "client" that registers to the hub and subscribes to messages
*   1 hub that is responsible for receiving and forwarding messages (selfhosted)
*   1 "driver" that involves 5 threads where each of thread fires 1000 messages through the hub to the clients

The PersistentConnection runs rather stable, but in the HubConnection we noticed lots of threads in the Hub and long delays (varies between 1 and 10 seconds) between every few hundred packets. The delays mainly occur within the Hub (and also between the hub and the client). We also have slight delays within the delivery from the "driver" to the Hub. With delay I mean that the method call to the Hub return delays (in the driver) or that the client receive method call is called much later. From time to time we also have some messages lost (not delivered to the client).

Any idea where that might come from? Is this a known bug? Is there any option that we can tweak? I have a complete solution as working example that I can provide upon request.

Thx alex

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:24:22.983

据我所知，SignalR 的性能要好得多。

观看此处的视频：[使用 ASP.NET SignalR 构建实时 Web 应用程序，](http://channel9.msdn.com/Events/Build/2012/3-034)以更好地了解 SignalR 和性能可能性。

另请查看：[性能](https://github.com/SignalR/SignalR/wiki/Performance)wiki 页面。

SignalR 有负载测试工具供您使用。首先使用这些工具测试性能，以清楚地了解您的硬件功能。

**工具：**

尝试使用[**Crank运行负载测试**](https://github.com/SignalR/crank)

> Crank 是 SignalR 的负载测试工具。

并看看 [**飞轮**](https://github.com/SignalR/flywheel)。

> 一个用于测量 SignalR 性能的简单性能工具项目。与曲柄配合使用

# wpf - wpf ToolTip and Style

> ID：13307703
> 
> 赞同：0
> 
> 时间：2012-11-09T12:01:26.320
> 
> 标签：wpf, xaml, tooltip

How I can add **ToolTip** to this *code* ?

```
<Style TargetType="{x:Type ListBoxItem}">  

</Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:21:30.920

您可以像设置任何其他属性一样在样式中设置 ToolTip 属性。

示例代码如下

```
<Style TargetType="{x:Type ListBoxItem}">  
    <Setter Property="ToolTip" Value="ToolTip Value" />
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:58:57.273

对于更复杂的工具提示使用

```
<Style TargetType="{x:Type ListBoxItem}">  
    <Setter Property="ToolTip">
        <Setter.Value>
            <!--Content Here-->
            <!--<Grid> or <StackPanel> or <ContentPresenter>...-->
        </Setter.Value>
    </Setter>
</Style> 
```

# xmpp - 在 ejabberd 中存储叶节点的无限数量的 pubsub 项

> ID：13307704
> 
> 赞同：0
> 
> 时间：2012-11-09T12:01:30.673
> 
> 标签：xmpp, openfire, ejabberd

我试图配置一个叶子节点来存储无限数量的项目，pubsub#max_items:-1。在 openfire 中它就像一个魅力，但不是在 ejabberd 上。ejabberd 中无穷大的值是多少？我在网上也找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:10:52.477

在 ejabberd 中，您必须更改 ejabberd.cfg 中的 mod_pubsub 配置，如下所示：

```
{max_items_node, 1000000} 
```

然后在配置时指定数量，直到 ejabberd.cfg 中的指定数量（这里：1000000）。

在我看来，像在 openfire 中那样做会容易得多..

# iphone - iOS：如何在显示前预加载数据

> ID：13307706
> 
> 赞同：2
> 
> 时间：2012-11-09T12:01:43.657
> 
> 标签：iphone, objective-c, asynchronous, preload, appdelegate

在`IPhone`我正在制作的应用程序中，我有一个`initialViewController`

(1) 带按钮。单击按钮后，它会转到另一个视图控制器

(2)，此时从`CoreData`文件加载数据并将其显示给用户。

我的问题是（2）的加载和数据的实际显示之间有一个小的延迟。这当然是因为加载数据需要一点时间。我正在这样做`asynchronously`，我的目标是永远不显示旋转的轮子或加载屏幕（更用户友好）。

我想要做的是“ `preload`”在（1）处的数据，而不是在（2）处，这样数据应该在（2）加载时已经加载并且应该立即显示。**我知道如何在 (1) 处加载数据，但我不知道如何轻松地将其传递给 (2)**。我不能用 segue 来做，因为我的应用程序实际上比上面的描述要复杂一些，而且通过 segue 做起来很麻烦。

我听说可以使用“ `AppDelegate`”，但由于我是编程新手，所以我不知道如何有效地使用它。我一直在关注的在线课程并没有对如何使用它提供非常清晰的见解，所以我有点迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:28:50.677

在看到您对 Paras 帖子的评论后，我为您提供了更好的解决方案：

创建一个名为 fileLoader 的 NSObject 子类

```
//in fileLoader.h
@interface fileLoader : NSObject {
}
+(fileLoader *)sharedInstance;
+(void)createSharedInstance;
//add functions and variables to load, store data for use in another class
@end 
```

然后，

```
//in fileLoader.m
@implementation fileLoader
static id _instance;

+(void)createSharedInstance{
    _instance = [[fileManager alloc] init];
}
+(fileManager *)sharedInstance{
    return _instance;
}
//other functions for storing, retrieving, loading, standard init function, etc. 
```

@end 现在你可以调用`[fileManager createSharedInstance]`实例化一个文件管理器，你可以通过调用函数在任何地方使用`[fileManager sharedInstance]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:06:38.990

属性`NSMutableArray`与您合成这样的数据..在`yourNextViewController.h`文件中

```
@property(nonatomic, retain) NSMutableArray *nextViewArray; 
```

并在`yourNextViewController.m`文件中像下面这样合成..

```
@synthesize nextViewArray; 
```

然后像下面这样昏倒..

```
 yourNextViewController *objNextView = [[yourNextViewController alloc]initWithNibName:@"yourNextViewController" bundle:nil];
      objNextView.nextViewArray = [[NSMutableArray alloc]init];
      objNextView.nextViewArray = yourDataArray;
      [objNextView.nextViewArray retain];
      [self.navigationController pushViewController:objNextView animated:YES];
      [objNextView release]; 
```

您也可以传递字符串或字典而不是数组..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:08:00.597

您可以使用某种 DataManager 对象，在加载数据后在其中存储数据，以便在应用程序的任何位置轻松检索。如果您只需要在应用程序启动时加载数据一次即可。

诀窍是使它成为一个单例对象，因此无论您在应用程序中的哪个位置引用它，它都将是已经预加载数据的同一个实例。我在我的项目中经常使用这些来管理我在应用程序中需要的任何和所有数据。

那里有无数的例子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T12:15:42.983

AppDelegate 更适合将数据从 (2) 传递到 (1)。要将数据从 (1) 加载到 (2)，您可以使用与 (2) 加载相同的函数，因为 (1) 将 (2) 视为 viewController 的实例。就像这样：

```
//In OneViewController.m
-(void)viewDidLoad:(BOOL)animated{
    [super viewDidLoad:animated];

    TwoViewController *VCTwo = [[TwoViewController alloc] initWithNibName:@"TwoViewController" bundle:nil];
    //note that I am only instantiating VCTwo, I am not displaying it.
}

-(void)loadVCTwoFromVCOne{
    [TwoViewController preloadInformation];
    //simply call the function to load the data on the instance of the viewController before displaying it
}

-(IBAction)presentVCTwo{
    [self presentViewController:VCTwo animated:YES completion:nil];
    //when you are ready, you can display at any time
} 
```

# c++ - LLVM中直接跳转的分支指令

> ID：13307711
> 
> 赞同：3
> 
> 时间：2012-11-09T12:02:05.787
> 
> 标签：c++, c, llvm

在 LLVM 中，如何生成直接跳转的分支指令，而不是 if-else。我知道有 LLVM::BranchInst 类，但不知道如何为此目的使用它，或者我是否需要使用其他类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T12:24:20.977

您需要一个无条件分支：

```
static BranchInst * llvm::BranchInst::Create(BasicBlock *IfTrue,
                                             Instruction *InsertBefore = 0)

static BranchInst * llvm::BranchInst::Create(BasicBlock *IfTrue,
                                             BasicBlock *InsertAtEnd) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T12:17:07.337

使用[此方法](http://llvm.org/doxygen/classllvm_1_1BranchInst.html#a77b75549a5089f42fa422070a3676c48)：

```
static BranchInst *     Create (BasicBlock *IfTrue, BasicBlock *InsertAtEnd) 
```

第一个参数是您要跳转到的位置，第二个参数是应放置已创建指令的位置。

# javascript - 更改内容后提醒整个 div

> ID：13307713
> 
> 赞同：0
> 
> 时间：2012-11-09T12:02:08.550
> 
> 标签：javascript, jquery

> **可能重复：**
> [获取选定元素的外部 HTML](https://stackoverflow.com/questions/2419749/get-selected-elements-outer-html)
> [显示我的 div 的字符串并附加](https://stackoverflow.com/questions/13306107/show-a-string-of-my-div-and-append)

使用下面的代码，我需要提醒这一点`<div id="myDiv"><h1>test</h1></div>`

但我的代码提醒了这一点`<h1>test</h1>`

我该怎么做呢？谢谢

这是我的小提琴[http://jsfiddle.net/5GCEQ/](http://jsfiddle.net/5GCEQ/)

```
 <div id="myDiv">

            <div>test</div>
            <div>test</div>
            <div>test</div>
            <div>test</div>
            <div>test</div>
            <div>test</div>
            <div>test</div>

        </div>​ 
```

* * *

```
 var s = $('#myDiv').html('<h1>test</h1>');

    alert(s.html()); //alerts <h1>test</h1>

//
//but I want it to alert    <div id="myDiv"><h1>test</h1></div>
//​​​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:04:16.360

用这个：

```
alert(s[0].outerHTML); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:16:14.473

您可以[`parent()`](http://api.jquery.com/parent/)在 JQuery 中使用：

```
var s = $('#myDiv').html('<h1>test</h1>');
alert(s.parent().html()); 
```

这是[jsfiddle](http://jsfiddle.net/feZed/)代码。

# silverlight - failed to create a ‘System.Windows.Input.ICommand’ from the text

> ID：13307715
> 
> 赞同：1
> 
> 时间：2012-11-09T12:02:13.633
> 
> 标签：silverlight, mvvm

hi in my silverlight5 and mvvm pattern, i had one mainpage that page contains one button,

```
<Button Command="MyCommand"> Click Me </Button> 
```

This above error can occur when binding a Command inside a Xaml file.

Why this error coming.. Any Help..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T12:57:23.820

你有没有尝试过

```
<Button Command="{Binding MyCommand}"> Click Me </Button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:12:38.463

解决方案是，

事实上，这种语法的问题在于我们调用命令的方式。前面的示例没有使用 Binding 语法。

我使用了 Binding 关键字。

```
<Button Command="{Binding MyCommand}"> Click Me </Button> 
```

当然，您需要将 ICommand 属性绑定到所需的命令。

```
public ICommand MyCommand
{
    get {
        return ....
    }
} 
```

# sql-server - multi client database design : is separation by schema a good design?

> ID：13307716
> 
> 赞同：2
> 
> 时间：2012-11-09T12:02:15.650
> 
> 标签：sql-server, sql-server-2008, database-design, multi-tenant

I am designing a multi-client database (think SAS) in SQL server 2008 R2\. During my research in this forum I found that segregating cient data using different database is preferred in the long run (when performance becomes an issue).

But I was wondering if for the short term (and for quick startup), is it a good idea to segregate client specific data by creating different schemas in same database ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T18:55:16.190

这种应用程序的术语是“多租户”架构。SO 有一个多租户标签。让它成为你的最爱之一。

多租户架构的范围从“不共享”到“共享一切”。在频谱的“无共享”端，您为每个租户构建一个数据库。在“共享一切”端，租户共享每张桌子；每行都有一个租户标识符，告诉您该行属于谁。

在这两者之间，您会发现每个租户一个模式。

[有关此 SO 答案](https://stackoverflow.com/a/8343142/562459)中成本、数据隔离和保护、维护和灾难恢复之间权衡的更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T12:09:31.547

我的直觉说不。通过您提出的方法，您在快速启动或短期内获得了什么？
最好从头开始养成良好的习惯：使用您的架构和默认值保持更新的脚本。当另一个客户需要一个新的数据库时，您就可以开始了。更不用说您的客户端代码只需要动态地选择正确的连接而无需任何其他问题

# svn - Tortoise svn update file after empty folder checkout

> ID：13307719
> 
> 赞同：1
> 
> 时间：2012-11-09T12:02:29.890
> 
> 标签：svn, tortoisesvn

I checked out empty folder from svn, then later on based on the need I want to update the file I need.

From command prompt, once we check out empty folder, we can use svn update filename. How can we do the same in windows tortoise svn.

Regards, Venkat

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:59:40.337

我认为您指的是所谓的“稀疏签出”，它没有将存储库的所有项目都提取到工作副本中。

由于您使用的是 TortoiseSVN，您可能需要阅读文档中有关[稀疏检出的部分。](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-checkout.html#tsvn-dug-checkout-depth)

请注意，您可以通过多种方式获取所需的文件：

*   使用从工作副本开始的存储库浏览器（上下文菜单中的“更新到修订版”）
*   单击“检查存储库”按钮后，从检查修改对话框中还有“更新到修订”上下文菜单条目
*   从资源管理器“更新到修订”上下文菜单条目中，使用更新对话框中的“选择项目...”按钮

我敢肯定还有更多的方法，但它们并不那么明显......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T12:04:44.200

我不确定这是否是您要查找的内容，但导航到该文件夹​​，右键单击它，然后选择“SVN 更新”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T12:11:13.413

假设您要签出一个空文件夹。现在您已经添加了一个文件，只需右键单击您添加的文件和 TortoiseSVN -> 添加。这将添加文件（在文件中显示 + 符号）。然后您可以右键单击文件夹 TortoiseSVN -> 提交。将文件添加到存储库。

# bash - Using asterisk in bash ls alias

> ID：13307721
> 
> 赞同：3
> 
> 时间：2012-11-09T12:02:38.053
> 
> 标签：bash, alias, repeat, ls

In ~/.bash_aliases I want to create an alias for repeat word that will repeat given command n times.

```
repeat() {
    n=$1
    shift
    while [ $(( n -= 1 )) -ge 0 ]
    do
        "$@"
    done
} 
```

I want to use repeat to list updated files in a directory so I made following function (WAIT,CLEAR,LIST):

```
wcls() {
    m=$1
    shift
    clear
    date
    ls -l "$@"
    sleep $m
} 
```

I have a folder where are my_file1 and my_file2. If I run the script :

```
repeat 500 wcls 2 my_file* 
```

i get

```
my_file1 ...
my_file2 ... 
```

and in the mean time I change my_file2 to my_file3 the script wont update the contents showing

```
my_file1 ...
my_file2 no such file or directory 
```

what should I do for my functions to correctly handle asterisks?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:50:03.930

这里的问题是您的星号正在被交互式外壳扩展。当你执行别名时，你给它一个文件列表，而不是一个带有星号的文件规范。

除了转义星号并让别名进行扩展之外，我认为没有简单的方法可以解决此问题。这是一个坏主意，因为带有有趣字符的文件名可能仅通过它们的存在来影响正在执行的内容。

# java - 本地日期和时间到 UTC，然后 UTC 到本地日期和时间

> ID：13307724
> 
> 赞同：0
> 
> 时间：2012-11-09T12:02:58.983
> 
> 标签：java, android

我正在尝试将语言环境时间转换为 UTC，然后将 UTC 转换为语言环境时间。但我没有得到结果。

```
public class DateDemo
{

public static void main(String args[])
{
    DateFormat dateFormatter = 
               DateFormat.getDateTimeInstance
                 (DateFormat.SHORT, DateFormat.SHORT, Locale.getDefault());

    TimeZone.setDefault(TimeZone.getDefault());

    SimpleDateFormat simpleDateFormatter = new SimpleDateFormat("dd/MM/yyyy");
    SimpleDateFormat simpleTimeFormatter = new SimpleDateFormat("hh:mm:ss a");

    Date today = new Date();
    String localeFormattedInTime = dateFormatter.format(today);

    try
    {
        Date parsedDate = dateFormatter.parse(localeFormattedInTime);
        System.out.println("Locale:" + localeFormattedInTime);
        System.out.println("After parsing a date: " + parsedDate);

        simpleDateFormatter.setTimeZone(TimeZone.getDefault());
        simpleTimeFormatter.setTimeZone(TimeZone.getDefault());

        String date = simpleDateFormatter.format(today);
        String time = simpleTimeFormatter.format(today);
        System.out.println("Today's only date: " + date);
        System.out.println("Today's only time: " + time);

        //// Locale to UTC converting

        simpleDateFormatter.setTimeZone(TimeZone.getTimeZone("UTC"));
        simpleTimeFormatter.setTimeZone(TimeZone.getTimeZone("UTC"));

        String utcDate = simpleDateFormatter.format(today);
        String utcTime = simpleTimeFormatter.format(today);
        System.out.println("Convert into UTC's date: " + utcDate);
        System.out.println("Convert into UTC's only time: " + utcTime);

         //// UTC to locale converting

        simpleDateFormatter.setTimeZone(TimeZone.getDefault());
        simpleTimeFormatter.setTimeZone(TimeZone.getDefault());

        Date getDate = simpleDateFormatter.parse(utcDate);
        Date getTime = simpleTimeFormatter.parse(utcTime);

        String getLocalDate = simpleDateFormatter.format(getDate);
        String getLocalTime = simpleTimeFormatter.format(getTime);
        System.out.println("Get local date: " + getLocalDate);
        System.out.println("Get local time: " + getLocalTime);

    } catch (ParseException e) {
        e.printStackTrace();
    }
  }
 } 
```

我正在向 Web 服务发送本地日期和时间，然后在需要时我需要检索 UTC 日期和时间，然后转换为区域设置日期和时间（即用户的本地设置）。

**样本输出：**

```
Locale:11/9/12 8:15 PM
After parsing a date: Fri Nov 09 20:15:00 SGT 2012
Today's only date: 09/11/2012
Today's only time: 08:15:30 PM
Convert into UTC's date: 09/11/2012
Convert into UTC's only time: 12:15:30 PM
Get local date: 09/11/2012
Get local time: 12:15:30 PM 
```

* * *

**Saksak & ADTC 回答后：**

对于代码片段，UTC 日期和时间（实际上是*GMT-5*，因为数据库可能在美国）是输入，我想获取本地日期和时间作为输出。但是下面这个部分仍然给*GMT-5*时间。

```
SimpleDateFormat simpleDateTimeFormatter = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss a");

....

Date inDateTime = simpleDateTimeFormatter.parse(intent.getExtras().getString("inTime")); Date outDateTime = simpleDateTimeFormatter.parse(intent.getExtras().getString("outTime"));

simpleDateTimeFormatter.setTimeZone(TimeZone.getDefault()); simpleDateTimeFormatter.setTimeZone(simpleDateTimeFormatter.getTimeZone());

//TimeZone tzTimeZone = TimeZone.getDefault();

//System.out.println("Current time zone: " + tzTimeZone.getDisplayName());

String getLocalInTimeString = simpleDateTimeFormatter.format(inDateTime); 

String getLocalOutTimeString = simpleDateTimeFormatter.format(outDateTime); 
```

我的问题：`getLocalInTimeString`&`getLocalOutTimeString`仍然显示*GMT-5*时间。这里有什么问题？我需要设置任何其他东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T12:23:20.310

您的问题在第 54 和 55 行：

```
 Date getDate = simpleDateFormatter.parse(utcDate);
    Date getTime = simpleTimeFormatter.parse(utcTime); 
```

这些行只是解析包含日期和时间的字符串，但这些字符串没有任何时区信息：

```
 utcDate = "09/11/2012"
    utcTime = "12:15:30 PM" 
```

因此，解析器假定字符串已经在您在第 51 行和第 52 行中设置的时区的语言环境中。

现在考虑如何解决它；)*提示：确保解析器假定字符串表示的时间的正确时区。*

**PS：[已解决！]** ~~我解决了这个问题，但我发现时区转换是不稳定的，至少在我所在的地方。~~时间是`8:30 pm`当地的。转换为 UTC，`12:30 pm`（正确，8 小时差异）。转换回来，它是`8:00 pm`（错误的，即使设置的时区是正确的 -*我得到了原来的时区并将其传回*- 我只有 7.5 小时的差异）。~~**你应该寻找更可靠的方法，除非你能弄清楚发生了什么以及如何解决它。**~~

**[RESOLUTION:]**上面的问题实际上是因为原始代码将日期和时间分成两个不同的解析器。如果您只对日期和时间使用一个解析器，您将在目标语言环境中获得正确的日期和时间。所以总而言之，解析器*是*可靠的，但你使用它的方式有很大的不同！

```
 SimpleDateFormat simpleDateTimeFormatter
            = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss a");
    Date getDateTime
            = simpleDateTimeFormatter.parse(utcDate + " " + utcTime);
    //use above line if you have the date and time as separate strings
    simpleDateTimeFormatter.setTimeZone(TimeZone.getDefault());
    String getLocalDateTime = simpleDateTimeFormatter.format(getDateTime);
    System.out.println("Get local date time: " + getLocalDateTime); 
```

**为什么对日期和时间使用两个单独的解析器是不可靠的：**
如上所述，对日期和时间部分使用两个单独的解析器是个坏主意。原因如下：

```
 Date getDate = simpleDateFormatter.parse(utcDate);
    Date getTime = simpleTimeFormatter.parse(utcTime);
    //Time zone changed to local here
    String getLocalDate2 = simpleDateTimeFormatter.format(getDate);
    String getLocalTime2 = simpleDateTimeFormatter.format(getTime);
    System.out.println("Get local date2: " + getLocalDate2);
    System.out.println("Get local time2: " + getLocalTime2);

    OUTPUT:
    Get local date2: 10/11/2012 08:00:00 AM
    Get local time2: 01/01/1970 10:35:10 AM 
```

我得到了半小时的差异，因为在变量存储时间（第二行）`01/01/1970`中使用了默认日期。`Date`将其转换为本地时区时，会发生错误，因为格式化程序将其转换基于默认日期`01/01/1970` *（[我住的地方，](http://en.wikipedia.org/wiki/Singapore_Standard_Time)**1970**年的时差是 +7.5 小时- 今天是 +8 小时）*。**这就是为什么即使您得到正确的结果**，两个单独的解析器也不可靠，并且您必须始终使用同时接受日期和时间信息的组合解析器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T12:31:23.523

你需要做的是解决你的问题，你有你的代码按这个顺序转换回本地时间：

```
simpleDateFormatter.setTimeZone(TimeZone.getDefault());
simpleTimeFormatter.setTimeZone(TimeZone.getDefault());

Date getDate = simpleDateFormatter.parse(utcDate);
Date getTime = simpleTimeFormatter.parse(utcTime); 
```

您需要做的是等到您将 utcDate、utcTime 字符串解析回日期对象，然后将日期格式化程序时区设置为本地区域，如下所示：

```
Date getDate = simpleDateFormatter.parse(utcDate);
Date getTime = simpleTimeFormatter.parse(utcTime);

simpleDateFormatter.setTimeZone(TimeZone.getDefault());
simpleTimeFormatter.setTimeZone(TimeZone.getDefault()); 
```

这应该在本地打印正确的日期/时间。

编辑：这是完整的主要方法：

```
public static void main(String[] args) {
    DateFormat dateFormatter = DateFormat.getDateTimeInstance(DateFormat.SHORT, DateFormat.SHORT, Locale.getDefault());
    TimeZone.setDefault(TimeZone.getDefault());
    SimpleDateFormat simpleDateFormatter = new SimpleDateFormat("dd/MM/yyyy");
    SimpleDateFormat simpleTimeFormatter = new SimpleDateFormat("hh:mm:ss a");
    Date today = new Date();
    String localeFormattedInTime = dateFormatter.format(today);
    try {
        Date parsedDate = dateFormatter.parse(localeFormattedInTime);
        System.out.println("Locale:" + localeFormattedInTime);
        System.out.println("After parsing a date: " + parsedDate);

        simpleDateFormatter.setTimeZone(TimeZone.getDefault());
        simpleTimeFormatter.setTimeZone(TimeZone.getDefault());

        String date = simpleDateFormatter.format(today);
        String time = simpleTimeFormatter.format(today);
        System.out.println("Today's only date: " + date);
        System.out.println("Today's only time: " + time);

        //// Locale to UTC converting

        System.out.println("TimeZone.getDefault() >>> " + TimeZone.getDefault());

        simpleDateFormatter.setTimeZone(TimeZone.getTimeZone("UTC"));
        simpleTimeFormatter.setTimeZone(TimeZone.getTimeZone("UTC"));

        String utcDate = simpleDateFormatter.format(today);
        String utcTime = simpleTimeFormatter.format(today);
        System.out.println("Convert into UTC's date: " + utcDate);
        System.out.println("Convert into UTC's only time: " + utcTime);

        //// UTC to locale converting
        /**
         ** //////EDIT
        */
        // at this point your utcDate,utcTime are strings that are formated in UTC
        // so first you need to parse them back to Dates using UTC format not Locale
        Date getDate = simpleDateFormatter.parse(utcDate);
        Date getTime = simpleTimeFormatter.parse(utcTime);

        // NOW after having the Dates you can change the formatters timezone to your
        // local to format them into strings
        simpleDateFormatter.setTimeZone(TimeZone.getDefault());
        simpleTimeFormatter.setTimeZone(TimeZone.getDefault());

        String getLocalDate = simpleDateFormatter.format(getDate);
        String getLocalTime = simpleTimeFormatter.format(getTime);
        System.out.println("Get local date: " + getLocalDate);
        System.out.println("Get local time: " + getLocalTime);

    } catch (ParseException e) {
        e.printStackTrace();
    }

} 
```

# django - Django，如何过滤一系列行然后选择具有最大日期的行？

> ID：13307729
> 
> 赞同：2
> 
> 时间：2012-11-09T12:03:07.863
> 
> 标签：django

**目标：**

在这里，我正在过滤具有给定 ID 的交易，并从那些我想选择具有最新日期的交易中进行筛选。

```
contact.deal_set.filter(deal_id=deal_id).aggregate(Max('deal_start_datetime')) 
```

但是，这只会返回一个包含最大日期的字典。不过我需要这一行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:44:04.957

使用 .latest 方法提供 django 查询集。

例如在您的特定情况下：

contact.deal_set.filter(deal_id=deal_id).latest('deal_start_datetime')

Django 文档：[https ://docs.djangoproject.com/en/dev/ref/models/querysets/#latest](https://docs.djangoproject.com/en/dev/ref/models/querysets/#latest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:06:29.783

用这个

```
contact.deal_set.filter(deal_id=deal_id).order_by('-deal_start_datetime') 
```

这将`deal_start_datetime`反向排序查询集，第0个元素是最新的，你可以得到它

```
latest_contact = contact.deal_set.filter(deal_id=deal_id).order_by('-deal_start_datetime')[0] 
```

# windows - win7 64bit - 手动更改驱动程序签名

> ID：13307731
> 
> 赞同：1
> 
> 时间：2012-11-09T12:03:18.817
> 
> 标签：windows, driver, signature

我想编辑/更改驱动程序签名。因为当我启动它时，我收到消息，该签名未设置。现在唯一的选择是单击 F8，然后单击“禁用驱动程序签名强制”。但我真的不想使用这个选项，它不安全。那么如何为该驱动程序设置签名？或者可能仅对选定的驱动程序禁用驱动程序签名强制？有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:51:16.103

如果您从 Verisign 或 Globalsign 购买代码签名证书（其他 CA 将不起作用），您可以删除现有签名（如果驱动程序存在），然后通过签署驱动程序文件应用您自己的签名。使用 Windows SDK 或 Windows Driver Kit 中的 signtool.exe 完成签名。当驱动程序被签名时，您需要包含一个[交叉签名证书](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487315.aspx)。

# sql - 四天前的 ColdFusion 查询

> ID：13307733
> 
> 赞同：1
> 
> 时间：2012-11-09T12:03:26.117
> 
> 标签：sql, coldfusion

我想查询4天前的订单信息。不过，我不能完全让查询使用全天 24 小时：

```
<cfquery name="rsByDate" datasource="#request.dsn#">
    SELECT tbl_customers.cst_FirstName
            , tbl_customers.cst_LastName
            , tbl_customers.cst_Email
            , tbl_orders.order_ID
            , tbl_orders.order_Date
    FROM  tbl_customers INNER JOIN tbl_orders 
               ON tbl_customers.cst_ID = tbl_orders.order_CustomerID
    WHERE tbl_orders.order_Date >= #CreateODBCDateTime(DateAdd("d",-5,Now()))#
    AND   tbl_orders.order_Date <= #CreateODBCDateTime(DateAdd("d",-4,Now()))#
    AND   order_Status = 3
    ORDER BY tbl_orders.order_Date DESC
</cfquery> 
```

我希望实现的是执行此查询，然后`cfmail`在客户的订单被标记为状态 3“已发货”四天后要求客户对我们进行审查。

我想我的日期设置不太正确。我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T12:13:37.343

这是因为您的筛选日期基于`now()`，它具有时间组件。所以`now()-4`对我来说是 2012 年 5 月 11 日，但在下午 12:10。您只想将日期部分用于过滤器。

无论如何，您都不应该在 SQL 字符串中硬编码您的动态值，因此首先使用`<cfqueryparam>`参数化您的动态值，然后使用 a`CF_SQL_DATE`作为类型，它*应该*只传递日期，而不是日期/时间。我目前无法为您测试，但请尝试...如果它仍然超过日期/时间的时间部分，则使用`createDate()`.

# c# - 如何使用数据表在 C# 中构建数据层次结构

> ID：13307735
> 
> 赞同：1
> 
> 时间：2012-11-09T12:03:27.473
> 
> 标签：c#, xml, list, object, hierarchy

我正在进行一项练习，我试图从用户输入表的数据中手动创建一个 XML 文件。这是一个示例表：

**请注意，在我稍后的代码示例中，为了将来的目的，公开了比此表更多的字段。**

**注意 2，此表中的数据由用户手动输入到我的 windows 窗体应用程序上的 datagridview 控件中。这里不涉及 SQL。**

```
ID | ParentID | Element | DefaultValue |
========================================
0  | -1       | root    |              |
1  | 0        | first   | SomeData     |
2  | 0        | second  | OtherData    |
3  | 0        | third   |              |
4  | 3        | firstCh | Child of ID=3| 
======================================== 
```

我正在尝试使用 C# 构造一个 XML 文件，而不使用任何 XML 类。我试图通过纯字符串操作和格式化来做到这一点，因为如果这个测试成功，我可能会扩展它来做更多可以证明在我们工作的生产环境中对我们有用的事情。

我目前的思维模式是遍历每个元素，确定某个 ID 的元素是否包含子元素，然后从这些子元素中构建一个对象列表。遍历子列表，然后确定子列表中的子元素中是否存在“孙子”。这是我制作的代码类。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace XMLtoXSDconverter
{
    class XMLConstruct
    {
        public enum ElementType { None, StringElement, LongElement, BoolElement, DateTimeElement, FloatElement, IntElement, DoubleElement };
        public int id;
        public int parentID;
        public string element;
        public string comment;
        public int minOccurs;
        public int maxOccurs;
        List<XMLConstruct> children;
        int indent = 0;

        public string buildXMLConstruct(int id, int parentId, string element, string comment, ElementType elementType, List<XMLConstruct> children, int minOccurs, int maxOccurs)
        {
            this.id = id;
            this.parentID = parentId;
            this.element = element;
            this.comment = comment;
            this.minOccurs = minOccurs;
            this.maxOccurs = maxOccurs;

            string elementTypeString = string.Empty;
            switch (elementType)
            {
                case ElementType.StringElement: elementTypeString = "xs:string"; break;
                case ElementType.LongElement: elementTypeString = "xs:long"; break;
                case ElementType.IntElement: elementTypeString = "xs:int"; break;
                case ElementType.FloatElement: elementTypeString = "xs:float"; break;
                case ElementType.DoubleElement: elementTypeString = "xs:double"; break;
                case ElementType.DateTimeElement: elementTypeString = "xs:dateTime"; break;
                case ElementType.BoolElement: elementTypeString = "xs:boolean"; break;
                default: elementTypeString = string.Empty; break;
            }

            if (this.id == 0)
                element += "Wrapper";

            //Hiccup here, how would I construct the children elements? Recursion perhaps? These children should come in the List<XSDConstruct>, which may contain children too
            return null;
        }
    }
} 
```

我一直在摸索如何解决这个问题以及如何解决它。正如您所看到的，读者和我可能从这个星期五下午的噩梦中拯救出来的人，`XSDConstruct`包含了能够从中生成 XML 和 XSD 文件所需的大部分字段。有一个`List<XSDConstruct>`子对象可以包含每个元素的子对象，依此类推，显然对使用递归大喊大叫。

所以我的问题是，我将如何将表中的数据读入我的对象以包含 n 级深的对象树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:29:41.857

希望这有帮助：

```
Node MakeTree()
{   
    // create root, build subtree and return it
    var node = new Node() {Id = 0, ParentId = -1};
    MakeSubTree(node);
    return node;
}
void MakeSubTree(Node parentNode)
{
    // find all children of parent node (they have parentId = id of parent node)
    var nodes = TableItems.Where(e => e.ParentId == parentNode.Id)
                    .Select(e => new Node {ParentId = e.ParentId, Id = e.Id});

    // build subtree for each child and add it in parent's children collection
    foreach (var node in nodes)
    {
        MakeSubTree(node);
        parentNode.Children.Add(node);             
    }
} 
```

`TableItems`是您的物品的集合。类`Node`定义为：

```
public class Node
{
    public int Id { get; set; }
    public int ParentId { get; set; }
    public List<Node> Children { get; set; } 

    public Node()
    {
        Children = new List<Node>();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:16:53.553

首先想到的是处理`XMLConstruct`. 您应该能够像这样构建一个查找表：

```
var lookupTable = new Dictionary<int, XMLConstruct>();
// note: this is probably not how you iterate over gridview rows,
// just making a proof of concept:
foreach(var row in gridView)
{
    var xc = GetXmlConstruct(row); // build the construct from the gridvew row
    lookupTable.Add(xc.id, xc);
} 
```

现在您已经拥有了所有构造，您可以对所有构造进行传递并分配子代：

```
foreach(var xc in lookupTable.Values)
{
    XMLConstruct parent;
    if (lookupTable.TryGetValue(xc.parentID, out parent))
        parent.children.Add(xc);
} 
```

初始化属性很重要`children`，否则你会得到一个空指针异常。

现在可以像这样遍历树：

```
// assuming that the element with id=0 is the root element
var rootElement = lookupTable[0];
Traverse(rootElement, "");

// remember, this is just a proof of concept, 
// you probably need to render opening/ending tags etc.
public Traverse(XMLConstruct xc, string indentation)
{
    Console.WriteLine(indentation + xc.Element);
    foreach(var child in xc.Children)
        Traverse(child, indentation + "  ");
} 
```

# asp.net-mvc - 如何在剃须刀中分配一个变量并通过帖子传递另一个变量

> ID：13307739
> 
> 赞同：1
> 
> 时间：2012-11-09T12:03:40.247
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, model

我想从我的模型中获取一些信息，编辑一个变量并将其传递给 post 函数。这是我的模型：

```
public class TaskInputModel
{
    [Required]
    [Display(Name = "Input Value")]
    public decimal Value { get; set; }

    public long InputId { get; set; }

    public MetriceModelTaskShedule[] Tasks;
} 
```

这是我的 Index.cshtml：

```
@model MetriceWeb.Models.TaskInputModel

@foreach (var item in Model.Tasks)
    {

        using (Html.BeginForm())
        {
@Html.ValidationSummary(true)
<fieldset>
    <div class="editor-label">
        @Html.LabelFor(model => item.Task)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model =>  model.Value)
        @Html.ValidationMessageFor(model =>model.Value)
    </div>

    @Html.Hidden("Model.InputId", Model.InputId)

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
        }
} 
```

我收到这样的：

```
[HttpPost]
    public ActionResult Index(TaskInputModel model)
    {
        ...
    } 
```

当我只提交 InputId 有一些值时，值总是 0。当我删除行时：@Html.Hidden("Model.InputId", Model.InputId) 值是好的，但我不知道如何接收 InputId . 你能告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:06:08.497

问题解决了。我只需要使用 @Html.Hidden("InputId", Model.InputId) 而不是 @Html.Hidden("Model.InputId", Model.InputId)

# iis-7.5 - 如何允许所有人访问应用程序

> ID：13307740
> 
> 赞同：2
> 
> 时间：2012-11-09T12:03:42.447
> 
> 标签：iis-7.5

我已经在 IIS 中设置了一个应用程序。在 IP 和域限制中，没有为允许或拒绝指定 IP 地址。当我尝试从外部访问应用程序时，我得到“403 - 禁止访问：访问被拒绝”。信息。但是，我可以访问也在同一台机器 IIS 中设置的另一个应用程序。我查看了该应用程序的 IP 和域限制，但列表为空。我怎样才能授予对我的应用程序的相同访问权限，因为它已经可以工作了？

注：服务器为Windows Server 2008R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:16:10.740

雅虎，我找到了。要允许任何人访问应用程序，您应该遵循以下基本步骤：

1.  选择应用程序，然后在 IIS 部分的右侧选择 IP 地址和域限制。
2.  Doube 单击它或在最右侧的窗格中选择打开功能，称为操作
3.  然后在同一操作窗格中选择编辑功能设置。将出现一个带有组合框的对话框。选择允许。就这样。要拒绝所有人，您当然会选择拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:15:18.740

如果您将站点设置为指向 UNC 路径的虚拟目录，则需要在高级设置下设置物理路径凭据。

# maven - 如何运行快照插件

> ID：13307742
> 
> 赞同：2
> 
> 时间：2012-11-09T12:03:47.917
> 
> 标签：maven, maven-plugin

当我尝试使用此命令在 maven 插件下运行时：

> com.wordpress.pomfromjarmavenplugin:generate:0.0.1-SNAPSHOT:generatepom

我收到此错误：

> 下载： [https ://oss.sonatype.org/content/repositories/snapshots/com/wordpress/pomfromjarmavenplugin/generate/0.0.1-SNAPSHOT/generate-0.0.1-SNAPSHOT.pom](https://oss.sonatype.org/content/repositories/snapshots/com/wordpress/pomfromjarmavenplugin/generate/0.0.1-SNAPSHOT/generate-0.0.1-SNAPSHOT.pom) 快照 (https://oss.sonatype.org/content/repositories/snapshots/) -> [Help 1] [ERROR] [ERROR] 要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven . [错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。[ERROR] [ERROR] 有关错误和可能的解决方案的更多信息，请阅读以下文章： [ERROR] [Help 1] [http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException](http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException)

问题似乎是所有的 pom 文件都有与之关联的时间戳： [https ://oss.sonatype.org/content/repositories/snapshots/com/wordpress/pomfromjarmavenplugin/generate/0.0.1-SNAPSHOT/](https://oss.sonatype.org/content/repositories/snapshots/com/wordpress/pomfromjarmavenplugin/generate/0.0.1-SNAPSHOT/)

我怎样才能运行这个插件？我是否需要等到插件发布或以某种方式指示 maven 运行最新版本的快照？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:54:52.270

将这些行添加到您的 pom 中：

```
<pluginRepositories>
    <pluginRepository>
        <id>oss.sonatype</id>
        <url>https://oss.sonatype.org/content/repositories/snapshots/</url>
    </pluginRepository>
</pluginRepositories> 
```

然后你的命令应该工作：

```
mvn com.wordpress.pomfromjarmavenplugin:generate:0.0.1-SNAPSHOT:generatepom 
```

或者将这些行添加到您的 pom 中：

```
<build>
    <plugins>
        <plugin>
            <groupId>com.wordpress.pomfromjarmavenplugin</groupId>
            <artifactId>generate</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </plugin>
    </plugins>
</build> 
```

然后发出：

```
mvn generate:generatepom 
```

# java - 在 JFrame 中显示 JTable

> ID：13307743
> 
> 赞同：3
> 
> 时间：2012-11-09T12:03:57.907
> 
> 标签：java, swing, jtable, jframe, indexoutofboundsexception

**我想做的事：**

我想列出数据库的一些记录。此列表应显示在 JFrame 弹出窗口中。

**描述：**

我有 3 节课：

*   Main.java（运行程序）
*   PeopleTableModel.java（保存数据，扩展 AbstractTableModel）
*   PeopleTable.java（保存逻辑，扩展 JTable）

为什么在将 JFrame 设置为可见时出现 ArrayIndexOutOfBoundsException？

**更新：**

当我使用自己的 PeopleTable 类时，似乎只出现此错误。当我将表分配给普通的 JTable 时，它​​可以工作。

这是我得到的堆栈跟踪：

```
java.lang.ArrayIndexOutOfBoundsException: 0 >= 0
    at java.util.Vector.elementAt(Vector.java:470)
    at javax.swing.table.DefaultTableColumnModel.getColumn(DefaultTableColumnModel.java:294)
    at javax.swing.JTable.getCellRect(JTable.java:2969)
    at javax.swing.plaf.basic.BasicTableUI.createTableSize(BasicTableUI.java:1694)
    at javax.swing.plaf.basic.BasicTableUI.getPreferredSize(BasicTableUI.java:1733)
    at javax.swing.JComponent.getPreferredSize(JComponent.java:1660)
    at javax.swing.ScrollPaneLayout.preferredLayoutSize(ScrollPaneLayout.java:495)
    at java.awt.Container.preferredSize(Container.java:1788)
    at java.awt.Container.getPreferredSize(Container.java:1773)
    at javax.swing.JComponent.getPreferredSize(JComponent.java:1662)
    at java.awt.BorderLayout.preferredLayoutSize(BorderLayout.java:719)
    at java.awt.Container.preferredSize(Container.java:1788)
    at java.awt.Container.getPreferredSize(Container.java:1773)
    at javax.swing.JComponent.getPreferredSize(JComponent.java:1662)
    at javax.swing.JRootPane$RootLayout.preferredLayoutSize(JRootPane.java:917)
    at java.awt.Container.preferredSize(Container.java:1788)
    at java.awt.Container.getPreferredSize(Container.java:1773)
    at javax.swing.JComponent.getPreferredSize(JComponent.java:1662)
    at java.awt.BorderLayout.preferredLayoutSize(BorderLayout.java:719)
    at java.awt.Container.preferredSize(Container.java:1788)
    at java.awt.Container.getPreferredSize(Container.java:1773)
    at java.awt.Window.pack(Window.java:809)
    at ch.bs.jsd.personen.Main.main(Main.java:67) 
```

这是我的全部代码：

```
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.sql.ResultSet;
import java.util.ArrayList;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableModel;

public class Main {

    public static void main(String[] args) {
        ArrayList<String[]> result = new ArrayList<String[]>();
        SQLConnection sql = new SQLConnection();
        String OBNr = "";
        String firstName = "";
        String lastName = "";
        String qry = "SELECT loginid,ctitle as Grad,"
                + "name+' '+firstname as SachB,"
                + "cposition as Tour,Ressort,"
                + "left(location,2) as FNr "
                + "FROM dbo.abf_muPostenAdressen "
                + "WHERE loginid LIKE '%" + OBNr + "%'"
                + "AND name LIKE '%" + lastName + "%'"
                + "AND firstname LIKE '%" + firstName + "%'";
        try {
            ResultSet rs = sql.getConnection().prepareStatement(qry).executeQuery();
            while (rs.next()) {
                result.add(new String[]{
                            Integer.toString(rs.getRow()),
                            rs.getString("loginid"),
                            rs.getString("Grad"),
                            rs.getString("SachB"),
                            rs.getString("Tour"),
                            rs.getString("Ressort"),
                            rs.getString("FNr")
                        });
            }
            if (result.size() != 0) {
                String[] selectedData = null;
                if (result.size() > 1) {
                    String[] title = {"#", "loginid", "Grad", "SachB", "Tour",
                        "Ressort", "FNr"};
                    TableModel model = new PeopleTableModel(title, parse_2d_array(result));
                    JTable table = new PeopleTable(model);
                    JFrame frame = new JFrame();
                    frame.getContentPane().add(new JScrollPane(table));
                    frame.setVisible(true);
                    while (table.getSelectedRow() != -1) {
                    }
                    selectedData = result.get(table.getSelectedRow());
                    frame.dispose();
                } else {
                    selectedData = result.get(0);
                }
                System.out.println(join(selectedData, ", "));
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        sql.closeConnection();
    }

    private static String join(String[] s, String delimiter) {
        if (s.length == 0) {
            return null;
        }
        StringBuilder out = new StringBuilder();
        out.append(s[0]);
        for (int i = 1; i < s.length; ++i) {
            out.append(delimiter).append(s[i]);
        }
        return out.toString();
    }

    private static String[][] parse_2d_array(ArrayList<String[]> al) {
        String[][] data = new String[al.size()][6];
        for (int i = 0; i < al.size(); i++) {
            data[i] = al.get(i);
        }
        return data;
    }
}

class PeopleTableModel extends AbstractTableModel {

    private static final long serialVersionUID = -1080095595481949205L;
    private String[] title;
    private Object[][] data;

    public PeopleTableModel(String[] title, Object[][] data) {
        this.title = title;
        this.data = data;
    }

    @Override
    public int getColumnCount() {
        return title.length;
    }

    @Override
    public int getRowCount() {
        return data.length;
    }

    @Override
    public Object getValueAt(int row, int col) {
        return data[row][col];
    }

    @Override
    public String getColumnName(int column) {
        return title[column];
    }
}

class PeopleTable extends JTable {

    private static final long serialVersionUID = -1080095595481949205L;
    private JTable table;
    private int selectedRow = -1;
    private StringBuilder pressedKeys = new StringBuilder();
    private long now = 0;
    private long last = 0;

    public PeopleTable(TableModel model) {
        table = new JTable(model);

        table.addMouseListener(new java.awt.event.MouseAdapter() {

            @Override
            public void mouseClicked(java.awt.event.MouseEvent e) {
                if (e.getClickCount() == 2) {
                    setSelectedRow(table.rowAtPoint(e.getPoint()));
                }
            }
        });
        table.addKeyListener(new KeyAdapter() {

            @Override
            public void keyTyped(KeyEvent evt) {
            }

            @Override
            public void keyReleased(KeyEvent evt) {
            }

            @Override
            public void keyPressed(KeyEvent evt) {
                int key = evt.getKeyCode();

                // add only numbers
                if ((key > 47 && key < 58) || (key > 95 && key < 106)) {
                    last = now == 0 ? 0 : now;
                    now = evt.getWhen();

                    if (now - last > 700) {
                        pressedKeys = new StringBuilder();
                    }
                    pressedKeys.append(evt.getKeyChar());
                    int row = Integer.parseInt(pressedKeys.toString()) - 1;
                    table.setRowSelectionInterval(row, row);
                    table.scrollRectToVisible(table.getCellRect(row, 0, true));
                } else if (key == KeyEvent.VK_ENTER) {
                    if (pressedKeys.length() == 0) {
                        pressedKeys.append(1);
                    }
                    setSelectedRow(Integer.parseInt(pressedKeys.toString()) - 1);
                }
            }
        });
    }

    public JTable getTable() {
        return table;
    }

    private void setSelectedRow(int i) {
        selectedRow = i;
    }

    @Override
    public int getSelectedRow() {
        return selectedRow;
    }

    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
        return false;
    }

    @Override
    public int getColumnCount() {
        return table.getColumnCount();
    }

    @Override
    public int getRowCount() {
        return table.getRowCount();
    }

    @Override
    public Object getValueAt(int row, int col) {
        return table.getValueAt(row, col);
    }
} 
```

附加问题：是否有更好的方法来实现我的目标，或者这可以说是最佳实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:20:29.007

*   [请参阅 JTable 教程，所有内容都在那里进行了描述](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

*   我看不出有使用的理由`AbstractTableModel`，不知道为什么要打扰 for`JTable`包含实际数量的行和列（最多`500`/ `1000`& `20`/ `50`），`DefaultTableModel`而是从

*   或`DefaultTableModel`使用此[AbstractTableModel更改](https://stackoverflow.com/a/6901508/714968)

可以从

![在此处输入图像描述](../Images/bcbadc78328a814d23124536ba2772c3.png)

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.UIManager.LookAndFeelInfo;
import javax.swing.border.LineBorder;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.*;

public class RemoveAddRows extends JFrame {

    private static final long serialVersionUID = 1L;
    private Object[] columnNames = {"Type", "Company", "Shares", "Price"};
    private Object[][] data = {
        {"Buy", "IBM", new Integer(1000), new Double(80.50)},
        {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)},
        {"Sell", "Apple", new Integer(3000), new Double(7.35)},
        {"Buy", "Nortel", new Integer(4000), new Double(20.00)}
    };
    private JTable table;
    private DefaultTableModel model;
    private javax.swing.Timer timer = null;

    public RemoveAddRows() {
        model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model) {

            private static final long serialVersionUID = 1L;

            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                Component c = super.prepareRenderer(renderer, row, column);
                if (isRowSelected(row) && isColumnSelected(column)) {
                    ((JComponent) c).setBorder(new LineBorder(Color.red));
                }
                return c;
            }
        };
        ListSelectionModel rowSelMod = table.getSelectionModel();
        rowSelMod.addListSelectionListener(new ListSelectionListener() {

            public void valueChanged(ListSelectionEvent e) {
                int row = table.getSelectedRow();
                int col = table.getSelectedColumn();
                String str = "Selected Row(s): ";
                int[] rows = table.getSelectedRows();
                for (int i = 0; i < rows.length; i++) {
                    str += rows[i] + " ";
                }
                str += "Selected Column(s): ";
                int[] cols = table.getSelectedColumns();
                for (int i = 0; i < cols.length; i++) {
                    str += cols[i] + " ";
                }
                str += "Selected Cell: " + table.getSelectedRow() + ", " + table.getSelectedColumn();
                System.out.println(str);
                Object value = table.getValueAt(row, col);
                System.out.println(String.valueOf(value));
            }
        });
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
        JButton button1 = new JButton("Remove all rows");
        button1.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                if (model.getRowCount() > 0) {
                    for (int i = model.getRowCount() - 1; i > -1; i--) {
                        model.removeRow(i);
                    }
                }
                System.out.println("model.getRowCount() --->" + model.getRowCount());
            }
        });
        JButton button2 = new JButton("Add new rows");
        button2.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                start();
            }
        });
        JPanel southPanel = new JPanel();
        southPanel.add(button1);
        southPanel.add(button2);
        add(southPanel, BorderLayout.SOUTH);
    }

    private void start() {
        timer = new javax.swing.Timer(2500, updateCol());
        timer.start();
    }

    public Action updateCol() {
        return new AbstractAction("text load action") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                DefaultTableModel model = (DefaultTableModel) table.getModel();
                Object[] data0 = {"Buy", "IBM", new Integer(1000), new Double(80.50)};
                model.addRow(data0);
                Object[] data1 = {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)};
                model.addRow(data1);
                Object[] data2 = {"Sell", "Apple", new Integer(3000), new Double(7.35)};
                model.addRow(data2);
                Object[] data3 = {"Buy", "Nortel", new Integer(4000), new Double(20.00)};
                model.addRow(data3);
                System.out.println("model.getRowCount() --->" + model.getRowCount());
                timer.stop();
                int rowIndex = table.getRowCount() - 1;
                table.changeSelection(rowIndex, 0, false, false);
            }
        };
    }

    public static void main(String[] args) {
        try {
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                System.out.println(info.getName());
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (UnsupportedLookAndFeelException e) {
            // handle exception
        } catch (ClassNotFoundException e) {
            // handle exception
        } catch (InstantiationException e) {
            // handle exception
        } catch (IllegalAccessException e) {
            // handle exception
        }
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                RemoveAddRows frame = new RemoveAddRows();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T16:08:55.260

您不需要编写这么多行代码来显示一个文件。只需下载 jar 文件 rs2xml 并将其添加到您的项目库中。

注意：如果您使用的是 netbeans，这将很有用

如何使用它？

*   在后端创建表
*   下载 rs2xml jar 文件
*   将其添加到项目库中
*   将 JTable 从 swing 控件拖到 JFrame
*   现在编写如下代码：

写下你的查询：

```
 ps=con.prepareStatement("select * from register");       
    ResultSet r=ps.executeQuery();
    jTable1.setModel(DbUtils.resultSetToTableModel(r)); //display the register 
```

# knockout.js - 绑定对象作为默认值

> ID：13307749
> 
> 赞同：1
> 
> 时间：2012-11-09T12:04:20.273
> 
> 标签：knockout.js

有时我需要绑定对象。我喜欢那样。

```
var obj = {id: null, name: null}
var obs = ko.observable(obj); 
```

然后，当我更改 obs 中的某些值时， obj 也会更改。就像这样：

```
obs().id = 1;
console.log(obj.id) 
```

输出

```
Object { id=5, name=null } 
```

是预期的吗？我使用 obj 来保留编辑表单的原始值以检查哪些数据已更新，并且仅将已编辑的值更新到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:17:08.957

这是预期的行为。你传递了`obj`对`obs`observable 的引用。如果你想`obj`保留原始值，你应该克隆它。

如果您使用的是 jQuery，则可以使用`extend`克隆对象：

```
var obj = {id: null, name: null}
var cloneOfObj  = jQuery.extend(true, {}, obj);
var obs = ko.observable(cloneOfObj); 
```

# php - 使用 Codeigniter 对带有验证的注册表单进行编码时遇到问题

> ID：13307753
> 
> 赞同：1
> 
> 时间：2012-11-09T12:04:36.877
> 
> 标签：php, mysql, codeigniter

我是新手。请帮帮我。我真的很困惑。请帮我。

出现此错误：我不知道我的错误是什么。我是从教程中看到的，他甚至从未犯过任何错误

```
 Parse error: syntax error, unexpected '(', expecting T_STRING or 
    T_VARIABLE or '{' or '$' in 
    C:\xampp\htdocs\test\application\controllers\user.php on line 50 
```

如果你们能帮助我。这是我的文件：

这是我的**user.php**

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    class User extends CI_Controller {
     private $view_data = array();
function _construct()
{
parent::_construct();
$this->view_data['base_url']=base_url();
}

function index()
{
$this->register();
}

function register()
{
$this->load->library('form_validation');

$this->form_validation->set_rules('firstname', 'First Name', 'trim|required|max_length[100]|min_length[1]|xss_clean');
$this->form_validation->set_rules('lastname', 'Last Name', 'trim|required|max_length[100]|min_length[1]|xss_clean');
$this->form_validation->set_rules('email', 'Email Address', 'trim|required|max_length[100]|xss_clean|valid_email');
$this->form_validation->set_rules('dateofbirth', 'Date of Birth', 'trim|max_length[100]|min_length[1]|xss_clean');
$this->form_validation->set_rules('gender', 'Gender', 'trim|max_length[6]|min_length[6]|xss_clean');
$this->form_validation->set_rules('username', 'User Name', 'trim|required|alpha_numeric|callback_username_not_exists|max_length[100]|min_length[6]|xss_clean'); 

if ($this->form_validation->run() == FALSE)
{
//not run
$this->load->view('view_register', $this->view_data);

}
else
{
//good
$firstname=$this->input->post('firstname'); 
$lastname=$this->input->post('lastname');
$email=$this->input->post->('email');
$dateofbirth=$this->input->post('dateofbirth');
$gender=$this->input->post('gender');
$username=$this->input->post('username');
$password=$this->input->post('password');

$this->User_model->register_user($firstname, $lastname, $email, $dateofbirth, $gender, $username, $password);

function username_not_exists($username){
$this->form_validation->set_message('username_not_exists','the username %s is existing');
if($this->User_model->check_exists_username($username))
{
return false;
}
else
{
return true;
}
}

}
$this->load->view('view_register', $this->view_data);
}
} 
```

这是我的**view_register.php**

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Registration</title>

<style type="text/css">

::selection{ background-color: #E13300; color: white; }
::moz-selection{ background-color: #E13300; color: white; }
::webkit-selection{ background-color: #E13300; color: white; }

body {
    background-color: #fff;
    margin: 40px;
    font: 13px/20px normal Helvetica, Arial, sans-serif;
    color: #4F5155;
}

a {
    color: #003399;
    background-color: transparent;
    font-weight: normal;
}

h1 {
    color: #444;
    background-color: transparent;
    border-bottom: 1px solid #D0D0D0;
    font-size: 19px;
    font-weight: normal;
    margin: 0 0 14px 0;
    padding: 14px 15px 10px 15px;
}

code {
    font-family: Consolas, Monaco, Courier New, Courier, monospace;
    font-size: 12px;
    background-color: #f9f9f9;
    border: 1px solid #D0D0D0;
    color: #002166;
    display: block;
    margin: 14px 0 14px 0;
    padding: 12px 10px 12px 10px;
}

#body{
    margin: 0 15px 0 15px;
}

</style>
</head>
<body>

<h1>IMAGE HERE</h1>

<div id="body">
    <br/>

    <p class="body">

    <?php
    echo form_open('start');
    $firstname = array(
    'name'  =>  'firstname',
    'value' =>  set_value('firstname')
    );

    $lastname = array(
    'name'  =>  'lastname',
    'value' =>  set_value('lastname')
    );

    $email = array(
    'name'  =>  'email',
    'value' =>  set_value('email')
    );

    $dateofbirth = array(
    'name'  =>  'dateofbirth',
    'value' =>  set_value('dateofbirth')
    );

    $gender = array(
    'name'  =>  'gender',
    'value' =>  set_value('gender'),
    'style' =>  'margin:10px'
    );

    $username = array(
    'name'  =>  'username',
    'value' =>  set_value('username')
    );

    $password = array(
    'name'  =>  'password',
    'value' =>  ''
    );

    $confpass = array(
    'name'  =>  'confpass',
    'value' =>  ''
    );

    ?>

    <strong>User Information: </strong>
    &nbsp;
    <div align="right"><font color="red">*</font>Denotes Required Field</div>

    <div align="left">
    First Name<font color="red">*</font>:
    <?php echo form_input($firstname)?>
    <br/>

    Last Name<font color="red">*</font>:
    <?php echo form_input($lastname)?>
    <br/>

    Email Address<font color="red">*</font>:
    <?php echo form_input($email)?>
    <br/>

    Date Of Birth:
    <?php echo form_input($dateofbirth)?>
    <br/>

    Gender:
        <?php 
        echo form_radio($gender, 'Male');
        echo "Male";
        echo form_radio($gender, 'Female'); 
        echo "Female";
        ?>
        <br/>

    <strong>Account Information:</strong><br/>

    Username<font color="red">*</font>:
    <?php echo form_input($username)?><br/>

    Password<font color="red">*</font>:
    <?php echo form_password($password)?><br/>

    Password Confirmation<font color="red">*</font>:
    <?php echo form_password($confpass)?><br/>

    <?php 
    echo validation_errors();?>
    <?php echo form_submit(array('name'=>'register'), 'Register');?>
    <?php echo form_reset(array('name'=>'reset'), 'Reset')?>

</div>

</body>
</html> 
```

这是我的**usermodel.php代码**

```
<?php

class User_model extends CI_Model {
function User_model() {
parent::Model();
}
function register_user($firstname, $lastname, $email, $dateofbirth, $gender, $username, $password)
{
$sha1_password=sha1($password);
$query_str="INSERT INTO tbl_user(firstname, lastname, email, dateofbirth, gender, username, password) VALUES (?,?,?,?,?,?,?)";

$this->db->query-($query_str, array($firstname, $lastname, $email, $dateofbirth, $gender, $username, $sha1_password));

function check_exists_username($username)
{
$query_str = "SELECT username FROM tbl_user WHERE username = ?";
$result=$this->db->query->($query_str, $username);
if($result -> num_rows() > 0)
{
return true;
}
else
{
return false;
}
}
}

} 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T12:11:30.660

**user.php**中有语法错误

 **```
$email=$this->input->post->('email'); 
```

这应该是

```
$email=$this->input->post('email'); 
```

我不确定你为什么在 register() 操作中创建 username_not_exists() 函数**

# iphone - UITableViewCellAccessoryDe tailDisclosureButton 未显示在单元格中

> ID：13307754
> 
> 赞同：0
> 
> 时间：2012-11-09T12:04:43.077
> 
> 标签：iphone, ios, uitableview

我正在使用 tableView 分组样式。我的 DisclosureButton 未显示在我的表格单元格中。我缺少什么？

谢谢

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";

NSArray *listData =[self.tableContents objectForKey:[self.sortedKeys objectAtIndex:[indexPath section]]];

UITableViewCell * cell = [tableView 
                          dequeueReusableCellWithIdentifier:SimpleTableIdentifier];

if(cell == nil) {

     cell = [[[UITableViewCell alloc] 
     initWithStyle:UITableViewCellStyleDefault 
     reuseIdentifier:SimpleTableIdentifier] autorelease];

}

NSUInteger row = [indexPath row];

cell.textLabel.text = [listData objectAtIndex:row];

   // cell.backgroundColor=[UIColor brownColor];

   cell.accessoryType =UITableViewCellAccessoryDetailDisclosureButton;

return cell;
} 
```

![在此处输入图像描述](../Images/1f9ec190b6665a877da5195252c4c629.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:08:02.317

您的表格似乎处于编辑状态。您应该在编辑模式下设置附件类型。

```
cell.editingAccessoryType=UITableViewCellAccessoryDetailDisclosureButton; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:13:21.770

`UITableView`在编辑模式下隐藏附件按钮。因此，如果要显示它，则需要自定义`UITableViewCell`. 或者你可以像 **Vito Limandibhrata给出的答案那样做**

# android - 如何将 PagerTabStrip 的 TextStyle 设置为粗体？

> ID：13307758
> 
> 赞同：17
> 
> 时间：2012-11-09T12:04:50.377
> 
> 标签：android, styles, android-viewpager

我用`PagerTabStrip`in`ViewPager`来显示每一页的标题。这是我的 XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:background="@drawable/bg">

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    >
    <android.support.v4.view.PagerTabStrip
            android:id="@+id/pager_title_strip"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:background="#33b5e5"
            android:textColor="#a4c639"
            android:paddingTop="4dp"
            android:paddingBottom="4dp" />
    </android.support.v4.view.ViewPager>

</RelativeLayout> 
```

我想将 textStyle 设置为粗体，`PagerTabStrip`如下所示 `android:textStyle="bold"`：但这在`PagerTabStrip`. 似乎它只有`textcolor`文本属性。我可以通过什么方式将样式设置为粗体？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-16T21:46:52.097

您需要做的是为文本创建样式，然后使用 android:textAppearance 属性...

也许是这样的：

```
 <style name="PagerTabStripText">
      <item name="android:textSize">14sp</item>
      <item name="android:textStyle">bold</item>
      <item name="android:textColor">#a4c639</item>
 </style> 
```

然后在您的 PagerTabStrip XML 中执行以下操作：

```
 <android.support.v4.view.PagerTabStrip
        android:id="@+id/pager_title_strip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:background="#33b5e5"
        android:paddingTop="4dp"
        android:paddingBottom="4dp" 
        android:textAppearance="@style/PagerTabStripText"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-11T13:57:15.097

PagerTabStrip 不接受 textAppearance。

就像上面的@Justin 所说，但是在 xml 上：

`style="@style/PagerTabStripText"`

不是：

`android:textAppearance="@style/PagerTabStripText"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-08T18:04:11.277

如果您想将中心选项卡标题设置为与其他选项卡不同的样式，则需要使用反射：

```
try {
    final Class pagerTitleStripClass = PagerTitleStrip.class;
    final Field mCurrTextField = pagerTitleStripClass.getDeclaredField("mCurrText");
    mCurrTextField.setAccessible(true);

    // mTitle is my class's PagerTabStrip member variable
    final TextView mCurrText = (TextView) mCurrTextField.get(mTitle);
    mCurrText.setTypeface(Typeface.DEFAULT_BOLD);
} catch (final Exception e) {
    Log.w(TAG, "Exception when styling currently selected title!", e);
} 
```

[不幸的是，当Android 支持库](https://developer.android.com/tools/support-library/index.html)的更新发布时，此解决方案可能不再起作用（因为这是[PagerTitleStrip](https://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html)类的来源）。特别是，此代码示例适用于[修订版 20](https://developer.android.com/tools/support-library/index.html#revisions)。

# ios - 为什么有时我按下 AnnotationView 时图像消失了？

> ID：13307760
> 
> 赞同：1
> 
> 时间：2012-11-09T12:05:12.497
> 
> 标签：ios, uibutton, uiimage, mkannotation, mkpinannotationview

在我的 MapView 中有多个 annotationView，每个都有自己的图像，有时当我按下图像时，它会消失并且如果不重新加载 viewController 就永远不会回来。为什么会这样？

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapview viewForAnnotation:(id 
    <MKAnnotation>)annotation
    {
         if ([annotation isKindOfClass:[AnnotationView class]]) {

               return nil;
         }

         if ([annotation isKindOfClass:[AnnotationCustom class]]){

            static NSString* AnnotationIdentifier = @"AnnotationIdentifier";

           MKPinAnnotationView *annotationView = (MKPinAnnotationView*) [mapView 
                   dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];

           annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation

                             reuseIdentifier:AnnotationIdentifier];

        if ([self.nameTable isEqualToString:@"Movies"]){
            if(UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){

                  annotationView.image = [UIImage imageNamed:@"iphone_movies.png"];

            }else{
                  annotationView.image = [UIImage imageNamed:@"ipad_movies.png"];

            }

     }else if ([self.nameTable isEqualToString:@"Food_Drink"]){
             if(UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){
                 annotationView.image = [UIImage imageNamed:@"iphone_foodDrink.png"];

             }else{
                 annotationView.image = [UIImage imageNamed:@"ipad_foodDrink.png"];

             }
     }else if (......){
              //same procedure for all annotationView

     }

    UIButton *detailButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    annotationView.rightCalloutAccessoryView=detailButton;

    annotationView.canShowCallout = YES;
    annotationView.draggable = YES;

    return annotationView;
    } 
```

缺了点什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:15:08.327

你在做什么

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view 
```

我还注意到您没有为注释视图设置注释。设置注释视图时，您还应该这样做

```
annotationView.annotation = annotation; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:06:16.327

我换了

```
 MKPinAnnotationView *annotationView = (MKPinAnnotationView*) [mapView 
               dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];

 annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation
 reuseIdentifier:AnnotationIdentifier]; 
```

和

```
 MKAnnotationView *annotationView = (MKAnnotationView*) [mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];
  annotationView = [[MKAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier]; 
```

# c# - TCP 响应缩短

> ID：13307769
> 
> 赞同：0
> 
> 时间：2012-11-09T12:05:37.573
> 
> 标签：c#, windows-phone-7, networking, tcp

我在 WP7 中使用 TCP 客户端。目前我只是使用来自 MSDN 的示例代码，所以它应该可以工作。但由于某种原因，这种特殊的反应被缩短了。

它应该回复（后跟来自缓冲区的大量空字节）：

> 202- 多行响应如下\r\ntimestamp=0x00000000 校验和=0x00000000\r\nname=\"FLASH:Flash\xshell.xex\"\r\n。\r\n

但相反，它正在返回（并且没有任何尾随空字节）：

> 202- 多行响应如下\r\n

我从 TCP 服务器获取响应的代码是：

```
 try
        {
            if (!_isConnected)
                Connect();
            if (!_isConnected)
                return null;

            SendTextCommand(command);

            string response = "";

            SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();
            socketEventArg.RemoteEndPoint = _socket.RemoteEndPoint;
            socketEventArg.UserToken = null;

            socketEventArg.SetBuffer(new Byte[MAX_BUFFER_SIZE], 0, MAX_BUFFER_SIZE);

            socketEventArg.Completed += new EventHandler<SocketAsyncEventArgs>(delegate(object s, SocketAsyncEventArgs e)
            {
                if (e.SocketError == SocketError.Success)
                {
                    response = Encoding.ASCII.GetString(e.Buffer);
                    response = response.Trim('\0');
                }
                else
                    throw new Exception(e.SocketError.ToString());

                _pausingThread.Set();
            });

            _pausingThread.Reset();
            _socket.ReceiveAsync(socketEventArg);
            _pausingThread.WaitOne(TIMEOUT_MILLISECONDS);

            return response;
        }
        catch (Exception ex) { GenerateException(ex.Message); return "123"; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:52:38.123

要修复它，您必须检查响应是否是多行的。如果是，则循环直到它以“.\r\n”结束。否则你读一次就完成了。像这样：

```
public string GetFromTextCommand(string command)
    {
        try
        {
            if (!_isConnected)
                Connect();
            if (!_isConnected)
                return null;

            SendTextCommand(command);

            string response = GetFromTextCommand();

            if (response.StartsWith("202"))
            {
                while (!response.EndsWith(".\r\n"))
                {
                    string newResponse = GetFromTextCommand();

                    response += newResponse;
                }
            }

            return response;
        }
        catch (Exception ex) { GenerateException(ex.Message); return null; }
    }
    public string GetFromTextCommand()
    {
        try
        {
            if (!_isConnected)
                Connect();
            if (!_isConnected)
                return null;

            string response = "";

            SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();
            socketEventArg.RemoteEndPoint = _socket.RemoteEndPoint;
            socketEventArg.UserToken = null;

            socketEventArg.SetBuffer(new Byte[MAX_BUFFER_SIZE], 0, MAX_BUFFER_SIZE);

            socketEventArg.Completed += new EventHandler<SocketAsyncEventArgs>(delegate(object s, SocketAsyncEventArgs e)
            {
                if (e.SocketError == SocketError.Success)
                {
                    response = Encoding.ASCII.GetString(e.Buffer);
                    response = response.Trim('\0');
                }
                else
                    throw new Exception(e.SocketError.ToString());

                _pausingThread.Set();
            });

            _pausingThread.Reset();
            _socket.ReceiveAsync(socketEventArg);
            _pausingThread.WaitOne(TIMEOUT_MILLISECONDS);

            return response;
        }
        catch (Exception ex) { GenerateException(ex.Message); return null; }
    } 
```

# jquery - 随站点流动的对象

> ID：13307770
> 
> 赞同：-1
> 
> 时间：2012-11-09T12:05:39.570
> 
> 标签：jquery, html, css

这是怎么做的？

[http://www.axxamo.de/](http://www.axxamo.de/)

如果有人能告诉我技术是什么，那就太好了，当您滚动时导航栏与窗口顶部边框一起流动？询问？还是只有CSS？

谢谢，

丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:07:49.407

您将需要使用一种称为“浮动导航栏”的技术

你可以在这里找到一个教程：[浮动导航栏](http://liljosh.com/how-to-build-a-floating-navigation-when-scrolling/)

# php - 为什么 Facebook 登录忽略电子邮件和 user_birthday 权限？

> ID：13307773
> 
> 赞同：1
> 
> 时间：2012-11-09T12:05:52.257
> 
> 标签：php, javascript, facebook, login

真的很奇怪，我在谷歌上做了一些搜索，做了一些测试，也是用不同的方式登录，但我总是得到相同的结果。

```
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<fb:login-button autologoutlink="true" perms="email,user_birthday,user_hometown" size="large" onlogin="window.location = '/index.php';">Connect with Facebook</fb:login-button>
</div>
<script>
    FB.init({appId: 'xxxxxx', status: true,cookie: true, xfbml: true});
    FB.Event.subscribe('auth.login', function(response) 
    {
        window.location.reload();
    });
</script> 
```

似乎电子邮件和 user_birthday 被忽略了：Facebook 不要求用户允许我访问这些信息。

在下面的例子中，我收到了授权家乡的提示，如果我删除家乡，我不会收到任何提示，我只能访问基本信息。

为什么会发生？有没有办法要求这些信息是强制性的？

我也尝试`$facebook->getLoginUrl`使用正确的范围，但结果相同。

我希望有人能够提供帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:10:23.003

对于用户生日和电子邮件，您需要用户的扩展权限

```
 FB.login(function(response) {
   // handle the response
 }, {scope: 'email,user_likes'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:32:32.067

> `<fb:login-button perms="email,user_birthday,user_hometown"`

`perms`是一个过时的参数 - 请`scope`改用。

# wordpress - 我想在 wordpress 管理页面中下载 csv ......它在本地服务器上工作正常，但它给标题已经发送错误

> ID：13307775
> 
> 赞同：2
> 
> 时间：2012-11-09T12:06:03.240
> 
> 标签：wordpress, csv, http-headers, localhost, administration

```
The code for download that works at localhost is but live at hostgather server it throughs error 

ob_get_clean();
    header("Content-type: text/x-csv"); # DECLARING FILE TYPE
    header("Content-Transfer-Encoding: binary");
    header("Content-Disposition: attachment; filename=".$csv_file_name); # EXPORT GENERATED CSV FILE
    header("Pragma: no-cache");
    header("Expires: 0");

    echo $fields;
    exit; 
```

错误是

警告：无法修改标头信息 - 标头已由 /home/londoner/public_html/pkfones 中的（输出开始于 /home/londoner/public_html/pkfones.com/pinquest/wp-admin/includes/template.php:1679）发送。 com/pinquest/wp-content/plugins/wp-gamesize/setgamesize_admin.php 在第 131 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-16T20:12:49.827

确保您在`ob_start()`代码执行的开始（或非常接近）时调用。这将缓冲您的所有输出并允许您随时发送标头。您可以将它放在您的functions.php 的最顶部。

这适用于您的本地而不是实时的原因可能是服务器配置的差异，默认情况下您在本地缓冲但不是实时。这是确保您的开发和生产环境尽可能相似的一个很好的理由。

# ruby-on-rails - Ruby on Rails：rails3_fullcalendar 更新事件

> ID：13307776
> 
> 赞同：0
> 
> 时间：2012-11-09T12:06:09.417
> 
> 标签：ruby-on-rails, model, controller

我正在尝试基于此应用程序 [https://github.com/bokmann/rails3_fullcalendar启动一个应用程序](https://github.com/bokmann/rails3_fullcalendar)

我`rake db:migrate`从从下载的 zip 中提取的文件夹的根目录运行，然后启动服务器。

当我导航到`localhost:3000`我看到日历时，一切正常。我可以输入一个事件，然后它会出现在数据库中，并正确显示在日历上。

当我尝试移动事件时，问题就开始了，事件移动了，日期改变了，但是一旦我离开页面，事件就会从日历中消失，即使它仍在数据库中。

有人在使用这个示例应用程序时遇到过这个问题吗？该示例已有 2 年以上的历史，因此可能与我正在使用的 rails 或 ruby​​ 版本有关（Rails 3.0.7，ruby 1.9.2p320（2012-04-20 修订版 35421）[i686-linux]）

最好只是下载并运行自己以了解我的意思。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:59:41.300

您应该在 github 项目的页面上打开一个问题。

# python - Python 和 Excel 中的 TAN(X) 值错误

> ID：13307779
> 
> 赞同：2
> 
> 时间：2012-11-09T12:06:19.160
> 
> 标签：python, math

如何获得正确的 TAN(X) 值？

假设 TAN 为 27.2。

**预期**：`0.51301`，正如科学计算器正确给出的那样

**相反**，像 Python 甚至 Excel 这样的语言`-1.8459788894`

**我尝试**转换`-1.845979`，`rad_to_deg`然后我得到`-105.7668`.
我还尝试`-1.845979`使用`deg_to_rad`which 结果转换为`-0.0322184`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T12:09:16.293

您需要将*角度*转换为弧度，而不是无单位的结果。

```
tan(deg_to_rad(27.2)) 
```

*27.2°*是*0.4747 弧度*：[tan(0.4747rad)](http://www.wolframalpha.com/input/?i=tan%280.4747rad%29)

# symfony - Symfony2 翻译：语言环境被忽略

> ID：13307780
> 
> 赞同：1
> 
> 时间：2012-11-09T12:06:24.963
> 
> 标签：symfony, translation, symfony-2.1

前段时间，我开始翻译我正在处理的 Symfony 2.1 网站，使用 URL 中通过 /{ _locale } 的“正确方式”。现在翻译对大多数路线都很好，但其中一些（/login、/register、...）一直使用默认语言（在本例中为 fr），因为它们的 { _locale } 部分没有网址。

通过调试面板，我意识到区域设置实际上并没有通过 url 导航更改（不像[这](http://symfony.com/doc/current/book/translation.html#book-translation-locale-url)让我相信）。

于是我去了[那里](https://stackoverflow.com/questions/12951792/set-locale-in-symfony-2-1)，在那里我找到了设置监听器的信息和链接，以便根据调用的路径更改会话区域设置。所有默认语言环境声明（在 config.yml 和侦听器本身中）都是“fr”。

当我切换语言时，我实际上可以在调试面板上看到会话区域设置发生了变化。然而，翻译似乎被破坏了：每个翻译位都是用英语制作的，即使默认语言是法语，尽管会话区域设置是“fr”。

那是从哪里来的？我该如何解决？

提前致谢。

更多技术信息：

路由.yml：

```
AuraeLCUserBundle:
    resource: "@AuraeLCUserBundle/Resources/config/routing.yml"
    prefix: /{_locale}/
    defaults: { _locale: fr }
    requirements:
        _locale: en|fr 
```

树枝示例：

```
<p>{{ 'layout.greeting.welcome'|trans({}, 'AuraeLCUserBundle') }}</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:20:07.210

这里有 3 件事很关键。默认语言（设置在 中`config`），如果您使用可翻译的学说扩展：

```
# app/config/config.yml
framework:
    session:          { default_locale: 'fr_FR' }
    translator:       { fallback: 'en' }
.....

stof_doctrine_extensions:
    default_locale: 'fr_FR' 
```

它们必须不同，因为默认语言环境不会出现时会出现循环引用异常。

翻译器正在寻找`yaml|xml|gettext`带有后缀`fr_FR`ex 的文件：

```
messages.fr_FR.yml
messages.en.yml
yourcatalogue.fr_FR.yml
yourcatalogue.en.yml 
```

阅读本文了解更多详情：

[更改 Symfony2 中的默认语言环境](https://stackoverflow.com/questions/6986017/change-default-locale-in-symfony2)

[http://symfony.com/doc/2.0/book/translation.html](http://symfony.com/doc/2.0/book/translation.html)

[http://0hlsson.se/2011/07/27/symfony2-and-translatable-example/](http://0hlsson.se/2011/07/27/symfony2-and-translatable-example/)

# django - 如何使用 django-cumulus 提供静态文件？

> ID：13307781
> 
> 赞同：5
> 
> 时间：2012-11-09T12:06:26.477
> 
> 标签：django, rackspace-cloud, django-staticfiles

我正在尝试使用[django-cumulus](https://github.com/richleland/django-cumulus/)从 Rackspace CloudFiles 提供文件。我目前只在我的本地开发服务器上使用 Django 1.4.2 进行尝试。

我可以使用 cumulus 的`syncstatic`管理命令成功上传我所有的静态资产，但我似乎无法使用相同的设置在我的网站上显示它们。

如果我的相关设置是：

```
STATIC_URL = '/static/'
CUMULUS = {
    'USERNAME': 'myusername',
    'API_KEY': 'myapikey',
    'CONTAINER': 'mycontainername',
    'STATIC_CONTAINER': 'mycontainername',
}
DEFAULT_FILE_STORAGE = 'cumulus.storage.CloudFilesStorage'
STATICFILES_STORAGE = 'cumulus.storage.CloudFilesStaticStorage' 
```

然后当我运行`syncstatic`我所有的应用程序的静态文件时`/mycontainername/static/`，正如我所期望的那样。但是当我在 admin 中加载一个页面时，它会忽略`STATIC_URL`并尝试从 URL 提供资产，`http://uniquekey....r82.cf2.rackcdn.com/path/to/file.css`而不是`http://uniquekey....r82.cf2.rackcdn.com/static/path/to/file.css`.

此外，我看不到如何让我的公共（非管理员）页面使用 CloudFiles 上的静态文件，而不是从本地`/static/`目录提供它们。

我错过了一些关键的设置，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:55:53.550

我有同样的问题。我所做的是

git 克隆[https://github.com/richleland/django-cumulus.git](https://github.com/richleland/django-cumulus.git)

编辑 context_processors.py

```
from django.conf import settings

from cumulus.storage import CloudFilesStorage

def cdn_url(request):
    """
    A context processor to expose the full cdn url in templates.

    """
    cloudfiles_storage = CloudFilesStorage()
    static_url = '/'
    container_url = cloudfiles_storage._get_container_url()
    cdn_url = container_url + static_url

    print {'CDN_URL': cdn_url}

    return {'CDN_URL': cdn_url} 
```

完成后，使用 sudo python setup.py install 安装它

请注意，来自 django cumulus 的 context_processors.py 实际上很慢

# c++ - 我可以从派生类中排除基类成员吗？

> ID：13307783
> 
> 赞同：1
> 
> 时间：2012-11-09T12:06:32.763
> 
> 标签：c++, oop, inheritance, polymorphism, virtual

假设我有一个名为`CWindow`：

```
class CWindow
{
public:
    virtual bool Create();
}; 
```

在派生类`CMyWindow`中，我想将`Create(void)`方法​​重载到`Create(int someParam)`，但是，我不希望用户能够调用该`Create(void)`方法，只有`Create(int someParam)`. 这可能吗？我可以这样做：

```
class CMyWindow : public CWindow
{
private:
    bool Create();
public:
    virtual bool Create(int someParam);
}; 
```

这是有效的吗？它基本上会使以前的公共成员`CWindow`成为私人成员`CMyWindow`吗？

`youcantbeamember`我想如果有可能从一个类中“排除”一个成员，这是最接近这样做的，因为 AFAIK在 C++中没有魔法关键字

我最好的猜测是，不，你不能这样做。但我只是希望，因为我想避免创建一个包含除`Create()`成员之外的所有内容的基类，`CWindow`并`CMyWindow`从`CWindowBase`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T12:13:16.927

您实际上*可以*这样做，它会按预期工作。唯一的问题是 a`CMyWindow`仍然是 a `CWindow`，它允许`Create()`：

```
CMyWindow w;
w.Create(); // does not compile
static_cast<CWindow>(w).Create(); // compiles just fine 
```

如果您不想不惜一切代价允许这样做，那么您必须进行`CWindow::Create`抽象并可能提供当前实现（如果有）作为`protected`派生类可以显式调用的成员：

```
class CWindow
{
public:
    virtual bool Create() = 0;
protected:
    bool DefaultCreateImplementation();
};

class CNormalWindow : public CWindow
{
public:
    bool Create() { return DefaultCreateImplementation(); }
}

class CMyWindow : public CWindow
{
private:
    virtual bool Create(); // declared but not defined
                           // if called by accident will produce linker error
public:
    virtual bool Create(int someParam);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:37:16.753

似乎您从 CWindow 公开继承以继承其实现。使用公共继承时，这不应该是您的意图。公共继承意味着接口的继承。但是你不想继承CWindows接口，你想隐藏它！

考虑这样的替代设计

```
class Window
{
public:
    // EVERY Window can create the window using this method
    virtual bool Create();  
};

class MyWindow : public Window
{
public:
    // Initialize MyWindow with an additional parameter, 
    // that is used to create the window
    MyWindow(int param);

    // Create the window using the parameter
    virtual bool Create() override;
private:
    int param;
};

class View
{
public:
    void AddWindow(Window& window)
    {
        myWindows.Add(&window);
        window.Create();  // I can call this on EVERY Window instance
    }
}; 
```

# listbox - 如何使用 MVVM 将 RadList SelectedItems 收集到集合中

> ID：13307786
> 
> 赞同：1
> 
> 时间：2012-11-09T12:06:47.257
> 
> 标签：listbox

嗨朋友，我正在使用 Teleric RadListbox 并且**SelectedItems**存在问题，因为它是只读的，我需要将选定项目的列表收集到可观察的集合中并为此执行进一步操作我正在使用 EventTrigger 并且它会触发，但是我无法将命令传递给参数，因为我没有使用 MVVM light 或其他框架，而且我绑定了

```
SelectedIndex="{Binding Path=AuSelectedIndex, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}" 
```

如上所述，将 SelectedIndex 属性设置为 viewmdoel，但这不会在我每次选择新项目时触发，并且 _auSelectedIndex 每次都保持为 0。

```
public void AuditLogSelectionChanged()
    {
            listSelIdx.Add(_auSelectedIndex);
    } 
```

Belwo 是我的 RadList 代码片段是否有任何其他方法可以实现相同的，即 ObservableCollection 中的 selectedItems。

```
<telerik:RadListBox x:Name="RadListBox" Height="120" Grid.Row="3" Margin="10 10 10 10" ItemsSource="{Binding OutputIndexFields, Mode=TwoWay}" IsTextSearchEnabled="{Binding ElementName=IsTextSearchEnabledCheckBox, Path=IsChecked, Mode=TwoWay}"                  TextSearchMode="{Binding ElementName=TextSearchModeComboBox}" SelectionMode="Multiple"  IsEnabled="{Binding ElementName=IsEnabledCheckBox, Path=IsChecked}"> 
                        <i:Interaction.Triggers>
                            <i:EventTrigger SourceObject="{Binding ElementName=RadTabCtrlAdminSetting}"
                                    EventName="SelectionChanged">
                                <ei:CallMethodAction MethodName="LogSelectionChanged"
                                             TargetObject="{Binding DataContext, ElementName=RadTabCtrlAdminSetting}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </telerik:RadListBox> 
```

# php - 压缩 PHP 代码

> ID：13307788
> 
> 赞同：0
> 
> 时间：2012-11-09T12:07:01.033
> 
> 标签：php, optimization

我创建了一个 PHP 脚本，但是在我的托管服务器中使用它时显示致命错误，然后我发现我需要压缩这个 PHP 代码才能使我的脚本工作。这是代码，任何人都可以用相同的输出，我是编码初学者，所以无法理解如何以最少的代码和努力来执行相同的输出，以便服务器可以轻松执行此代码。感谢代码需要优化：

```
$yar = 3;
while ($yar <= 9) {
    $ax = 31;
    while ($ax > 0) {
        $jaan = "$ax Jan 200$yar";
        $result = str_replace($jaan, " ", $result);
        $ax = $ax - 1;
    }
    $ax = 31;
    while ($ax > 0) {
        $feeb = "$ax Feb 200$yar";
        $result = str_replace($feeb, " ", $result);
        $ax = $ax - 1;
    }
    $ax = 31;
    while ($ax > 0) {
        $maar = "$ax Mar 200$yar";
        $result = str_replace($maar, " ", $result);
        $ax = $ax - 1;
    }
    $ax = 31;
    while ($ax > 0) {
        $appr = "$ax Apr 200$yar";
        $result = str_replace($appr, " ", $result);
        $ax = $ax - 1;
    }
    $ax = 31;
    while ($ax > 0) {
        $maay = "$ax May 200$yar";
        $result = str_replace($maay, " ", $result);
        $ax = $ax - 1;
    }
    $ax = 31;
    while ($ax > 0) {
        $juun = "$ax Jun 200$yar";
        $result = str_replace($juun, " ", $result);
        $ax = $ax - 1;
    }
    $ax = 31;
    while ($ax > 0) {
        $juul = "$ax Jul 200$yar";
        $result = str_replace($juul, " ", $result);
        $ax = $ax - 1;
    }
    $ax = 31;
    while ($ax > 0) {
        $auug = "$ax Aug 200$yar";
        $result = str_replace($auug, " ", $result);
        $ax = $ax - 1;
    }
    $ax = 31;
    while ($ax > 0) {
        $seep = "$ax Sep 200$yar";
        $result = str_replace($seep, " ", $result);
        $ax = $ax - 1;
    }
    $ax = 31;
    while ($ax > 0) {
        $occt = "$ax Oct 200$yar";
        $result = str_replace($occt, " ", $result);
        $ax = $ax - 1;
    }
    $ax = 31;
    while ($ax > 0) {
        $noov = "$ax Nov 200$yar";
        $result = str_replace($noov, " ", $result);
        $ax = $ax - 1;
    }
    $ax = 31;
    while ($ax > 0) {
        $deec = "$ax Dec 200$yar";
        $result = str_replace($deec, " ", $result);
    }
        $ax = $ax - 1;
    $yar++;
} //years start after 2010 to 2014
$yr = 10;
while ($yr <= 14) {
    $x = 31;
    while ($x > 0) {
        $jan = "$x Jan 20$yr";
        $result = str_replace($jan, " ", $result);
        $x = $x - 1;
    }
    $x = 31;
    while ($x > 0) {
        $feb = "$x Feb 20$yr";
        $result = str_replace($feb, " ", $result);
        $x = $x - 1;
    }
    $x = 31;
    while ($x > 0) {
        $mar = "$x Mar 20$yr";
        $result = str_replace($mar, " ", $result);
        $x = $x - 1;
    }
    $x = 31;
    while ($x > 0) {
        $apr = "$x Apr 20$yr";
        $result = str_replace($apr, " ", $result);
        $x = $x - 1;
    }
    $x = 31;
    while ($x > 0) {
        $may = "$x May 20$yr";
        $result = str_replace($may, " ", $result);
        $x = $x - 1;
    }
    $x = 31;
    while ($x > 0) {
        $jun = "$x Jun 20$yr";
        $result = str_replace($jun, " ", $result);
        $x = $x - 1;
    }
    $x = 31;
    while ($x > 0) {
        $jul = "$x Jul 20$yr";
        $result = str_replace($jul, " ", $result);
        $x = $x - 1;
    }
    $x = 31;
    while ($x > 0) {
        $aug = "$x Aug 20$yr";
        $result = str_replace($aug, " ", $result);
        $x = $x - 1;
    }
    $x = 31;
    while ($x > 0) {
        $sep = "$x Sep 20$yr";
        $result = str_replace($sep, " ", $result);
        $x = $x - 1;
    }
    $x = 31;
    while ($x > 0) {
        $oct = "$x Oct 20$yr";
        $result = str_replace($oct, " ", $result);
        $x = $x - 1;
    }
    $x = 31;
    while ($x > 0) {
        $nov = "$x Nov 20$yr";
        $result = str_replace($nov, " ", $result);
        $x = $x - 1;
    }
    $x = 31;
    while ($x > 0) {
        $dec = "$x Dec 20$yr";
        $result = str_replace($dec, " ", $result);
        $x = $x - 1;
    }
    $yr++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T12:10:41.363

我将发布我[在您之前](https://stackoverflow.com/a/13233920/247893)的帖子中发布的相同代码：

> 当你可以做这样的事情时，为什么要经历如此漫长而奇怪的过程？

```
<?php
    $yearStart = 2004;
    $yearEnd = 2012;
    $unixTime = strtotime($yearStart . "-01-01 00:00:00");
    $endUnixTime = strtotime($yearEnd . "-12-31 23:59:59");
    while ($unixTime < $endUnixTime) {
        echo date("d M Y", $unixTime) . PHP_EOL;
        $unixTime = strtotime("+1 day", $unixTime);
    }
?> 
```

输出：

```
01 Jan 2004
02 Jan 2004
03 Jan 2004
...
29 Dec 2012
30 Dec 2012
31 Dec 2012 
```

这还具有不显示“2008 年 2 月 31 日”等的额外好处，因为该日期甚至不存在。

[代码的键盘示例（警告：长输出！）](http://codepad.org/EvODIXwP)

**编辑**

如果你想用空格替换这样的每个日期，你可以使用这个单行（用空格替换每个日期）：

```
$result = preg_replace("/([0-2][0-9]|3[0-1]) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) [0-9]{4}/", " ", $result); 
```

会转

> 2004 年 1 月 1 日等等等等 2004 年 1 月 2 日和 2004 年 1 月 3 日等等，谁甚至在乎 2050 年 12 月 31 日？我知道我没有。

进入

> 等等等等等等，还有谁在乎呢？我知道我没有。

# flurry - 来自 AppSpot 的 Flurry Ads 是否在 Xcode 模拟器或仅在设备上工作

> ID：13307789
> 
> 赞同：0
> 
> 时间：2012-11-09T12:07:04.467
> 
> 标签：flurry

我即将开始使用 Flurry，我可以期待广告在模拟器中显示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T22:27:00.090

You can - check out [http://support.flurry.com/index.php?title=Publisher/Code](http://support.flurry.com/index.php?title=Publisher/Code) for integration instructions.

No special setup is required to see ads render in the simulator vs on a device.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:59:33.763

我最近将它集成到我们的项目中，我可以向您确认广告确实出现在模拟器中。但是，我在开发时只有 5.1 模拟器可用，并注意到安装了 iOS 4 的设备存在问题。在 iOS 5 以下，可能不支持 Flurry Appspot...

# jquery - 遍历 XML DOM

> ID：13307790
> 
> 赞同：1
> 
> 时间：2012-11-09T12:07:09.270
> 
> 标签：jquery, xml-parsing, xmldocument

如何使用 javscript/jquery 遍历 XML DOM？我的 xml 是自定义命名空间。我正在使用 ajax get 并在控制台中返回 Document 。我如何解析/遍历这个？

```
$.ajax({
    type: 'GET',
    url: 'xmlsimple.xml',
    dataType: 'xml',
    success: function(data) {
        parseXml(data);
    },
    error: function() {
        alert('fail');       
    }
  });

}); 
```

我正在使用 jQuery 1.8，据我所知，它不允许您使用反斜杠转义命名空间或使用 find([namespace="*"])。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T14:52:43.937

```
//  
//  this might help:
//  
//      traverse.dom( 
//                    function() {
//                        // this === current_node ( inside callback )
//                        // doStuffWith( this );
//                        // return ( === )false, to break iteration
//                    }, 
//                    
//                    startNode  // provide a node to start traversing from ( it is included in traversal )
//                    
//                 );
//  
//  
//      $.ajax({
//              url       : 'xmlsimple.xml',
//              dataType  : 'xml',
//              success   : function( doc ) {
//                  traverse.dom( function() { console.log( this ); }, doc );
//              }
//            });
//  
;
( function( w, _a ) { 

     var
        pn = this.toString(), 
        F  = {}, 
        t  = !0, 
        f  = !t, 
        _s = _a.slice, 
        _d = w.document;

     function _gather_nodes( node, coll ) { 

        coll.push( node );

        node = node.firstChild;

        while ( node ) { 

            _gather_nodes( node, coll );

            node = node.nextSibling;

        }

        return coll;

     }

     _a.each = function( callback ) { 

                   return ( function ( fn, len, k ) { 

                        for ( ; k < len ; k++ ) 
                            if (
                                ( function( i ) { 
                                     return fn.call( this, i, this[i] );
                                } ).call( this, k ) === f ) break;

                        return this;

                   } ).call( this, callback, this.length, 0 );

               };

     F.dom = function( callback_fn, startNode/*, ...args*/ ) {

                  var
                     args1 = _s.call( arguments, 2 );

                  return ( _gather_nodes( ( startNode || _d ), [] ) ).each( function ( pos, N ) { 

                      return callback_fn.apply( N, args1 );

                  } );

             };

     w[pn] = F;

} ).call( new String('traverse'), window, Array.prototype ); 
```

# android - android 使用 SimpleOnGestureListener 平滑旋转

> ID：13307791
> 
> 赞同：0
> 
> 时间：2012-11-09T12:07:09.947
> 
> 标签：android, gesture, rotateanimation

我有要旋转的圆圈。我正在使用 SimpleOnGestureListener 来处理手势，尤其是 onScroll 方法。

```
 @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2,
            float distanceX, float distanceY) {

        float lWidth = e1.getX() - centeralPointX;
        float lHeight = e1.getY() - centeralPointY;
        float lRadius = FloatMath.sqrt(lWidth * lWidth + lHeight * lHeight);

        if ((lRadius <= bigCircleRadius) && (lRadius >= smallCircleRadius)) {

            mLastAngle = (float) (Math.atan(lHeight / lWidth) * 180 / Math.PI)
                    + step / 2;

            float currWidth = e2.getX() - centeralPointX;
            float currHeight = e2.getY() - centeralPointY;
            mCurrentAngle = (float) (Math.atan(currHeight / currWidth) * 180 / Math.PI)
                    + step / 2;

            mAngle = mLastAngle - mCurrentAngle;
            mLastAngle = mCurrentAngle;

            // show angles
            TextView lastANGLE, endANGLE, ANGLE;
            lastANGLE = (TextView) findViewById(R.id.currentAngle);
            lastANGLE.setText("last " + mLastAngle);
            endANGLE = (TextView) findViewById(R.id.endAngle);
            ANGLE = (TextView) findViewById(R.id.angle);

            endANGLE.setText("current " + mCurrentAngle);
            ANGLE.setText("ANGLE " + mAngle);

            rotation = (float) (-mAngle - step / 2);
            if (rotate != null && !rotate.hasEnded()) {
                rotate.cancel();
                rotate.reset();
            }
            rotate = RotateCircle(radius, radius);
            words_layout.startAnimation(rotate);
            return true;
        } else
            return false;
    } 
```

但它不能正常工作。我希望那个圆圈能顺利旋转，但事实并非如此。我怎样才能做到这一点？我曾尝试使用 onFling 方法，但它会在运动结束后旋转我的圆圈。但我需要在移动过程中旋转它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:20:16.523

您可以尝试[`View.onTouchEvent(MotionEvent e)`](http://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)像这样覆盖：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    switch(event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            lastEventX = e.getX();
            lastEventY = e.getY();
            return true;

        case MotionEvent.ACTION_MOVE:
            // put your code to rotate here using lastEventX and lastEventY instead of e1.getX() and e1.getY()
            return true;
    }
    return super.onTouchEvent(MotionEvent event);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:26:33.213

不要在每次触发 onScroll 时调用 findViewByID()，一遍又一遍地调用相同的 3 个对象。

# solr - 在 JBoss AS7 中启动多个 SolrCloud 实例

> ID：13307794
> 
> 赞同：1
> 
> 时间：2012-11-09T12:07:19.353
> 
> 标签：solr, jboss, lucene, apache-zookeeper, solrcloud

我已经在我的 JBoss 中运行了一个 Solr 实例，其中包含自定义类、配置等。

现在，我的下一个步骤是设置 SolrCloud。

我只在 Jetty 周围找到了示例和帮助，所以，我基本上不知道两件事：

*   我应该把动物园管理员配置文件放在哪里
*   如何将参数传递给 JBoss，告诉他其他实例在哪里（像[这样](http://people.apache.org/~markrmiller/2shard4serverFull.jpg)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:50:28.197

所有参数都是JAVA_OPTS。

最简单的设置方法（单机，用于测试/开发等）是使用嵌入式 ZooKeeper。

-DzkRun (启用 zookeeper) -DnumShards=2 (你的分片数量在这里) -Dbootstrap_confdir=$SOLR_HOME/collection1/conf - 配置 Zookeeper 数据的引导。-Djetty.port=8080 (你的端口) -Dcollection.configName=myconf (zookeeper 的配置名称)

如果您有多个节点，请安装独立的 zookeeper：使用 -DzkHost: 而不是 zkRun。您可以使用 solr 脚本中的 zkCli 脚本进行引导，或者仅在一个节点上配置 -Dbootstrap_confdir。其余都一样

# c# - 通过 DesignerHost.CreateComponent 创建非私有组件

> ID：13307795
> 
> 赞同：0
> 
> 时间：2012-11-09T12:07:21.583
> 
> 标签：c#, winforms, visual-studio-2010

再会！

如何`IDesignerHost.CreateComponent`使用非私有修饰符创建组件？默认情况下，组件/控件被创建为私有的。有没有办法覆盖这种行为？

# sql - SQL LIKE 没有返回正确的结果

> ID：13307796
> 
> 赞同：3
> 
> 时间：2012-11-09T12:07:36.687
> 
> 标签：sql, sql-server-2008, tsql, sql-like

我有一个姓氏和名字的人表。

考虑以下记录，其中

> FirstName == 'Pete' 和 LastName == 'Aaaa'

当我运行以下选择语句时：

```
select * from Person where FirstName='Pete' and LastName like 'a%' -- 0 record returned
select * from Person where FirstName='Pete' and LastName like 'aa%' -- 1 record returned
select * from Person where FirstName='Pete' and LastName like 'aaa%' -- 0 record returned
select * from Person where FirstName='Pete' and LastName like 'aaaa%' -- 1 record returned 
```

当我在 SQL Fiddle 中运行它时 - 为每个选择返回 1 条记录，因为它应该[SQL Fiddle 查询](http://sqlfiddle.com/#!3/1e603/2)

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:25:21.777

尝试这个

```
select * from Person where FirstName='Pete' and LastName collate Latin1_General_CI_AS like 'a%'
select * from Person where FirstName='Pete' and LastName collate Latin1_General_CI_AS like 'aa%'
select * from Person where FirstName='Pete' and LastName collate Latin1_General_CI_AS like 'aaa%'
select * from Person where FirstName='Pete' and LastName collate Latin1_General_CI_AS like 'aaaa%' 
```

# asp.net-mvc - 在 asp.net mvc 3 控制器操作中找到选中的单选按钮

> ID：13307806
> 
> 赞同：0
> 
> 时间：2012-11-09T12:08:09.203
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个 asp.net MVC 3 razor 视图，它生成这样的复选框：

```
 @foreach (LoanQuestionIncludesStatement statement in item.Statements)
                {
                    _question = statement.Question;                  
                    @Html.RadioButton("_Q_" + counter.ToString("0#") + _question.ToString(), false, new { @class = "answer " + qOrderedClass, id = "_Q_" + questionOrderedNumber }) @statement.Statement
                    @Html.Hidden("_S_" + counter.ToString("0#") + _question.ToString(), statement.KeyOrStatement) 
                    <br />
                    counter++;
                } 
```

这是生成的html：

```
<div id="result">
    Please check the correct answer to each of the following questions.
<form method="post" id="frmLoanAuth" action="/CreditRegistry/Verify/VerifyByAccountInfo">        <ol>
        <li class="loanauthquestion">
            <b>Your other obligor's name is</b> <div>
<input type="radio" value="False" name="_Q_002" id="_Q_0" class="answer _QO0">Ann Fillmore<input type="hidden" value="Ann Fillmore" name="_S_002">                    <br>
<input type="radio" value="False" name="_Q_012" id="_Q_0" class="answer _QO0">Alexander Cleveland<input type="hidden" value="Alexander Cleveland" name="_S_012">                    <br>
<input type="radio" value="False" name="_Q_022" id="_Q_0" class="answer _QO0">Abraham Reagan<input type="hidden" value="Abraham Reagan" name="_S_022">                    <br>

                <input type="radio" value="False" name="_N_002" id="_Q_0" class="noneabove _QO0">None of above<br>
            </div>
        </li>
        <li class="loanauthquestion">
            <b>Your guarantor or co-signer's name is</b> <div>
<input type="radio" value="False" name="_Q_035" id="_Q_1" class="answer _QO1">Jude Taylor plc<input type="hidden" value="733824657071694816" name="_S_035">                    <br>
<input type="radio" value="False" name="_Q_045" id="_Q_1" class="answer _QO1">Felix Cleveland plc<input type="hidden" value="733824657071861723" name="_S_045">                    <br>
<input type="radio" value="False" name="_Q_055" id="_Q_1" class="answer _QO1">Eve Cameron plc<input type="hidden" value="733824657071409055" name="_S_055">                    <br>

                <input type="radio" value="False" name="_N_005" id="_Q_1" class="noneabove _QO1">None of above<br>
            </div>
        </li>
        <li class="loanauthquestion">
            <b>Your account balance in a history is in between</b> <div>
<input type="radio" value="False" name="_Q_0610" id="_Q_2" class="answer _QO2">$288,518.79 - $362,585.72<input type="hidden" value="$288,518.79 - $362,585.72" name="_S_0610">                    <br>
<input type="radio" value="False" name="_Q_0710" id="_Q_2" class="answer _QO2">$439,500.00 - $886,344.32<input type="hidden" value="$439,500.00 - $886,344.32" name="_S_0710">                    <br>
<input type="radio" value="False" name="_Q_0810" id="_Q_2" class="answer _QO2">$-51,500.00 - $1,050,052.31<input type="hidden" value="$-51,500.00 - $1,050,052.31" name="_S_0810">                    <br>

                <input type="radio" value="False" name="_N_0010" id="_Q_2" class="noneabove _QO2">None of above<br>
            </div>
        </li>
        </ol>
<input type="hidden" value="3" name="_accountInfoQoNumber" id="_accountInfoQoNumber"><input type="hidden" value="GJMgySz1thj6chtAmRJGr/MaT0YdCY24DZfD1OKju9o5byr/sRPw86gKdEOjjmWGUmSfZ+RJ6AcVVnplGRSiNgFshxaqeRSS/7xAOz3T+q1lEek5whYUL7ggW+PXTX+wVfsNMUrMdeVVVHFjJYYYntxjwt8USjxzY2K0cnDsFqK2vxwa" name="__RequestVerificationToken">        <p><input type="submit" class="readon button" value="Verify"></p>
</form></div> 
```

1.  我想确保在一组中只选中一个单选按钮，这没有发生

2.  我想检查控制器动作，哪个单选按钮被选中，我该怎么做？

我在控制器操作中使用此代码：

```
 var questionRequests = from x in Request.Form.AllKeys
                                   where x.StartsWith("_Q_") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:16:19.550

如果要确保在一组中只选中一个单选按钮，则必须为该组中的所有单选按钮提供相同的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:17:41.083

`id`分组时必须是唯一的并且`name`属性相同

看看这个网址：[html单选按钮](http://www.echoecho.com/htmlforms10.htm)

# asp.net-mvc - 实体框架创建关系和约束

> ID：13307807
> 
> 赞同：0
> 
> 时间：2012-11-09T12:08:10.357
> 
> 标签：asp.net-mvc, entity-framework

我可以访问一个有两个表的数据库。这两个表有一个共同的键，从文档中可以看出，表是相关的。当我询问这两个表时，我被告知当然有关系，但没有强制执行。

我使用 Visual Studio 2010 并创建了一个实体模型，并且正如预期的那样，它显示了两个没有关系的表。

我需要在模型上创建这两者之间的关系并且有两个问题。首先，我使用的是 asp.net MVC 3，并且想要一个 0..1 到很多的关系。这是因为当我删除表 A 中的值或更新时，我希望相关值受到影响。

其次，我需要帮助在视图的同一页面上从我的实体模型中显示这些相关值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:24:59.750

在这里，我提供了一些youtube视频的链接，这将有助于充分理解。 [Microsoft Entity Framework 1](http://www.youtube.com/watch?v=iQqzTr-1waE)和第二个是[Microsoft Entity Framework 2](http://www.youtube.com/watch?v=OTasIwcXNyE)，这肯定会帮助您理解。

# javascript - jquery中的图像从文件夹路径动态地显示

> ID：13307809
> 
> 赞同：0
> 
> 时间：2012-11-09T12:08:33.247
> 
> 标签：javascript, html

这里先加载图像，然后再完成滑动图像。因为动态图像被放置在 div 中。加载 div。之后，图像被一张一张地滑动 SlidePicture() 函数我希望在页面被引用时完成滑动图像

代码：

```
 <html xmlns="http://www.w3.org/1999/xhtml">
        <head id="Head1" runat="server">
            <title></title>
            <script src="Scripts/jquery-1.7.1.js" type="text/javascript"></script>
            <style type="text/css">
                body
                {
                    margin: 0px;
                    padding: 0px;
                }
                #divSlideShow
                {
                    position: absolute;
                    height: 500px;
                    padding: 30px 20px 60px 20px;
                    width: 1500px;
                }

                #divSlideShow IMG
                {
                    position: absolute;
                    top: 0;
                    left: 0;
                    z-index: 8;
                }

                #divSlideShow IMG.active
                {
                    z-index: 10;
                }

                #divSlideShow IMG.last-active
                {
                    z-index: 9;
                }
                .ImageClass
                {
                    padding: 50px 100px 50px 220px;
                    width: 600px;
                    height: 400px;
                }
            </style>
            <script type="text/javascript">
                function GetData() 
                {

                    var dynamicDiv = document.createElement('div');
                    dynamicDiv.setAttribute('Id', 'divSlideShow');
                    setTimeout("showIt()", 100000);
                    var fileNamesData = document.getElementById('hdnFileNames').value.split('‡');
                    for (var i = 0; i < fileNamesData.length - 1; i++) 
                    {
                        var dynamicImg = document.createElement('img');
                        dynamicImg.setAttribute("src", "Images/" + fileNamesData[i]);
                        dynamicImg.setAttribute("class", "ImageClass");
                        // document.getElementById('divSlideShow').appendChild(dynamicImg);
                        dynamicDiv.appendChild(dynamicImg);
                    }

                    document.getElementById('form2').appendChild(dynamicDiv);
                }
                function showIt() {
                    document.getElementById("divSlideShow").style.visibility = "none";
                }
                $(function () {
                    setInterval("slidePictures()", 5000);
                });

            function slidePictures() {
                var $active = $('#divSlideShow IMG.active');
                //if ($active.length == 0) $active = $('#divSlideShow IMG:last');
                var $next = $active.next().length ? $active.next() : $('#divSlideShow IMG:first');
                $active.addClass('last-active');
                $next.css({ opacity: 0.0 })
                .addClass('active')
                .animate({ opacity: 10.0 }, 1000, function () {
                    $active.removeClass('active last-active');
                });
            }
            </script>
        </head>
        <body onload="GetData()">
            <form id="form2" runat="server">
            <label id="lblImage"></label>
            <asp:HiddenField ID="hdnFileNames" runat="server" />

            </form>
        </body>
        </html>

.cs:
----
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;

namespace JquerySlideShow
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            var data="";
            string[] fileName = Directory.GetFiles(@"D:\Experiments\Jquery\JquerySlideShow\JquerySlideShow\Images");//D:\Experiments\Jquery\JquerySlideShow\JquerySlideShow\Images
            foreach (var path in fileName)
            {
                 data += (System.IO.Path.GetFileName(path)+"‡");
            }
            hdnFileNames.Value = data;   
        }
    }
}

    Anyone help me. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:25:33.193

试试这个 jQUery 插件。-jQuery Cycle
[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:57:15.870

抱歉，我无意冒犯，但您的帖子很难理解。我假设您希望加载图像，然后设置动画，并且当页面刷新时您不希望幻灯片再次发生？

如果是这种情况，您可以使用第二个 ASP 隐藏字段，并在动画完成后向其写入一个值。下次页面回发时，该值将保留在视图状态中，并且不会发生动画。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="Javascripts/jquery-1.7.2.min.js"></script>
<style type="text/css">
body {
    margin: 0px;
    padding: 0px;
}
#divSlideShow {
    position: absolute;
    height: 500px;
    padding: 30px 20px 60px 20px;
    width: 1500px;
}
#divSlideShow IMG {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 8;
}
#divSlideShow IMG.active {
    z-index: 10;
}
#divSlideShow IMG.last-active {
    z-index: 9;
}
.ImageClass {
    padding: 50px 100px 50px 220px;
    width: 600px;
    height: 400px;
}
</style>
<script type="text/javascript">
                function GetData() 
                {

                    var dynamicDiv = document.createElement('div');
                    dynamicDiv.setAttribute('Id', 'divSlideShow');
                    setTimeout("showIt()", 100000);
                    var fileNamesData = document.getElementById('hdnFileNames').value.split('‡');
                    for (var i = 0; i < fileNamesData.length - 1; i++) 
                    {
                        var dynamicImg = document.createElement('img');
                        dynamicImg.setAttribute("src", "Images/" + fileNamesData[i]);
                        dynamicImg.setAttribute("class", "ImageClass");

                        dynamicDiv.appendChild(dynamicImg);
                    }

                    document.getElementById('form2').appendChild(dynamicDiv);
                }
                function showIt() {
                    document.getElementById("divSlideShow").style.visibility = "none";
                }
                $(function () {
                    setInterval("slidePictures()", 5000);
                });

            function slidePictures() {
                var $active = $('#divSlideShow IMG.active'),
                    slideState = jQuery("#hdnSlideState");

                    if (slideState.val() == "") {           

                        var $next = $active.next().length ? $active.next() : $('#divSlideShow IMG:first');
                        $active.addClass('last-active');
                        $next.css({ opacity: 0.0 })
                        .addClass('active')
                        .animate({ opacity: 10.0 }, 1000, function () {
                            $active.removeClass('active last-active');

                            jQuery("#hdnSlideState").val("noMoreSliding");

                        });

                    }
            }
            </script>
</head>
<body onload="GetData()">
<form id="form2" runat="server">
        <label id="lblImage"></label>
        <asp:HiddenField ID="hdnFileNames" runat="server" />
        <asp:HiddenField ID="hdnSlideState" runat="server" value="" clientIDmode="static" />
</form>
</body>
</html> 
```

# c++ - 计算总能量

> ID：13307813
> 
> 赞同：2
> 
> 时间：2012-11-09T12:09:01.807
> 
> 标签：c++, audio, vector, matrix, sum

我正在研究一个计算向量总能量的函数。

通过研究和另一个系统（在 MatLab 中完成），方程组得出，它采用每个向量的绝对值求和。每个向量的向量总和值为“0”，代码如下：

```
vector<double> Audio::filter(vector<iniMatrix>&blocks, double sumThres, double ZeroThres)
{
   vector<double> totalEnergy;

   for(unsigned i=0; (i < blocks.size()); i++)
   {
      totalEnergy.push_back(abs(this->energy(blocks[i])));
   }

   for(unsigned i=0; (i < totalEnergy.size()); i++)
   {
      cout << totalEnergy[i] << endl;
   } 
```

}

```
double Audio::energy(vector<double>&blocks)
{
    return accumulate(blocks.begin(), blocks.end(), 0);
} 
```

有 96 个块，每个块包含 600 个值。值是双倍的：

0.0078125、0.0234375、0.015625

0.0078125、0.0234375、……、

任何人都知道为什么我每个都得到“0”值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T12:13:27.967

Accumulate 是以下模板：

```
template <class InputIterator, class T>
T accumulate ( InputIterator first, InputIterator last, T init ); 
```

尝试使用双精度作为“初始化”：

```
return accumulate(blocks.begin(), blocks.end(), 0.0); 
```

# php - Twig 扩展 - symfony2 环境

> ID：13307815
> 
> 赞同：0
> 
> 时间：2012-11-09T12:09:19.313
> 
> 标签：php, symfony, twig

我试图编写一个有效的扩展将取决于环境。如何在扩展类中检索当前环境的名称？什么是最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:13:42.430

您必须在扩展构造函数中注入参数。

或者，您可以将 twig 模板中的当前环境称为`app.environment`.

# c++ - backtrace_symbols() 与 -static 和 -rdynamic

> ID：13307820
> 
> 赞同：11
> 
> 时间：2012-11-09T12:09:24.920
> 
> 标签：c++, c, symbols, static-linking, backtrace

看着[这个问题](https://stackoverflow.com/questions/6934659/how-to-make-backtrace-backtrace-symbols-print-the-function-names)和[这个问题](https://stackoverflow.com/questions/5945775/how-to-get-more-detailed-backtrace)，我可以看到`backtrace_symbols()`要工作，必须使用`-rdynamic`标志进行编译。

我已经在测试程序中尝试过它并且它可以工作，但是我正在编写一个也被编译的程序，`-static`并且[这个页面](http://www.acsu.buffalo.edu/~charngda/backtrace.html)说当传递给编译器/链接器时它`backtrace_symbols()`不起作用。`-static`

是否有任何快速的解决方法，或者我的静态链接程序中永远不会有人类可读的回溯功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T12:58:30.427

答案就在眼前：它在[我在问题中链接的同一页面中](http://www.acsu.buffalo.edu/~charngda/backtrace.html)。最后，我成功使用了`libunwind`.

```
#include <libunwind.h>
#include <stdio.h>

void do_backtrace()
{
    unw_cursor_t    cursor;
    unw_context_t   context;

    unw_getcontext(&context);
    unw_init_local(&cursor, &context);

    while (unw_step(&cursor) > 0)
    {
        unw_word_t  offset, pc;
        char        fname[64];

        unw_get_reg(&cursor, UNW_REG_IP, &pc);

        fname[0] = '\0';
        (void) unw_get_proc_name(&cursor, fname, sizeof(fname), &offset);

        printf ("%p : (%s+0x%x) [%p]\n", pc, fname, offset, pc);
    }
}

int main()
{
 do_backtrace();
 return 0;
} 
```

我遇到了链接错误，因为我（再次）忘记在命令行末尾放置链接器选项。我真的不明白为什么`g++`/`gcc`在忽略命令行选项时至少不发出警告。正确的编译命令行是（`-g`不需要）：

```
g++ -static unwind.cpp -o unwind -lunwind -lunwind-x86 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T14:19:46.387

如果您绝对必须将程序编译为静态，您仍然可以使用`backtrace()`来查找函数的地址，然后通过解析调试信息来查找函数名称，例如使用[libdwarf 。](http://reality.sgiweb.org/davea/dwarf.html)

但这不是一项简单的任务，所以我建议使用`-rdynamic`flag。

# jquery - jQuery mobile - 根据条件取消pageinit事件

> ID：13307827
> 
> 赞同：1
> 
> 时间：2012-11-09T12:09:46.940
> 
> 标签：jquery, jquery-mobile, jquery-events

我正在使用 jQuery mobile 1.2，并且正在尝试编写一些代码来处理所有页面初始化。

例如，假设我需要在每个页面中执行某些操作之前检查用户是否首先登录到应用程序。如果用户未登录，我应该重定向到另一个页面，例如登录。

例如，下面的代码应该在每个页面初始化之前执行：

```
$(document).live('pagebeforecreate', function(event) {
if (ifUserIsNOTLoggedIn()) {
    $.mobile.changePage("login.html");
    event.preventDefault();
}}); 
```

页面 A：

```
$('#a').live('pageinit', function () {
// Do things }); 
```

B页：

```
$('#b').live('pageinit', function () {
// Do things }); 
```

pagebeforecreate 代码应该在 pageinit 之前运行（默认情况下会正确触发），但也应该取消到 A 或 B 的页面转换，并且不应触发 pageinit。

你能帮我如何取消“pagebeforecreate”部分的pageinit事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:41:40.943

只是我的两分钱，但如果可能的话，页面重定向应该在服务器端完成，例如：如果您请求页面，服务器代码将验证您是否经过身份验证。如果是，它将返回您要求的页面，否则它将返回登录页面。

如果出于某种原因您必须在客户端执行所有操作，则应在更改页面之前检查用户是否已登录。如果`pagebeforecreate`被解雇，那么页面*将*被创建，现在改变主意为时已晚（可能）。

来自[jQM 文档](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)：

> 请注意，通过绑定到 pagebeforecreate，您可以在 jQuery Mobile 的默认小部件自动初始化之前操作标记。例如，假设您想通过 JavaScript 而不是在 HTML 源中添加数据属性，这就是您要使用的事件。

对我来说，这看起来就像 pagebeforecreate 的事件处理程序仅用于修改即将显示的页面。似乎用于完成您正在做的事情的更好事件是`pagebeforechange`事件：

> 此事件在任何页面加载或转换之前触发。回调可以通过在传递给回调的事件对象上调用 preventDefault 来阻止 changePage() 函数的执行。(...) 应该注意，回调可以修改 toPage 和 options 属性来改变当前 changePage() 调用的行为。因此，例如，toPage 可以从回调中映射到不同的 url 以进行某种重定向。

# cordova - PhoneGap 安装失败并显示“缺少其中之一”错误消息

> ID：13307828
> 
> 赞同：1
> 
> 时间：2012-11-09T12:09:50.250
> 
> 标签：cordova

我正在尝试将最新的 PhoneGap 版本安装到我的 Eclipse 项目中，但我遇到了问题，这是我收到的错误消息：

![在此处输入图像描述](../Images/d6b1ee3c2ed410366961f469379dfeb3.png)

虽然这些我都有！我用[这个](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)来安装PhoneGap。
为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:02:25.683

是的，入门指南应该更明确地说明您需要设置的其他位，以便让 create 命令正常工作。我最近对文档进行了更改，但它没有出现在 docs.phonegap.com 网站上。

您需要做的是打开命令提示符并键入：

```
java 
```

如果在 PATH 中找不到该程序，则需要将 $JAVA_HOME\bin 目录添加到 PATH 环境变量中。

然后输入：

```
android 
```

如果在 PATH 中找不到该程序，则需要将 $ANDROID_HOME\tools 和 $ANDROID_HOME\platform_tools 添加到 PATH 环境变量中。

然后输入：

```
ant 
```

如果在 PATH 中找不到该程序，则需要将 $ANT_HOME\bin 添加到 PATH 环境变量中。

一旦可以在 PATH 中找到所有这些程序，那么 create 应该适合您。让我知道这是否有帮助，因为我需要使文档更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:43:29.277

这是整个过程非常好的资源：[How to install Phonegap latest for Android](http://cleancodedevelopment-qualityseal.blogspot.in/2012/11/how-to-install-phonegap-for-android.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-18T11:01:14.683

这是我拼凑的从头到尾的指南，您可以完成这些步骤，看看您有哪些/没有完成：

*   下载/安装 Node.JS
*   下载/安装 Windows 版 GIT
*   通过打开 NODE.JS 命令行并输入以下命令来下载/安装 Phonegap：`npm install -g phonegap`
*   下载/安装 Apache 2.4
*   下载/安装 Apache Ant
*   添加变量名称：`ANT_HOME`带有文件路径到用户/系统变量
*   添加`%ANT_HOME%/bin`到`PATH`用户变量下
*   下载/安装 JRE（选择适用的版本号（如果有疑问，请选择最新版本）
*   下载/安装 JDK（选择适用的版本号（如果有疑问，请选择最新版本）
*   添加变量名称：`JAVA_HOME`带有用户/系统变量的文件路径（例如`C:\Program Files\Java\jdk1.7.0_60` ）
*   将 %JAVA_HOME%/bin 添加到用户变量下的 PATH
*   下载/提取Android SDK（选择“下载其他平台”并选择版本以避免下载他们的包
*   添加 Android SDK Tools 文件夹，例如：`C:\android-sdk-windows\tools`到`PATH`变量
*   添加 Android SDK 平台工具，例如：`C:\android-sdk-windows\platform-tools`到`PATH`变量

如果以上都完成了，那么你就可以开始用户设置了，你需要用Phonegap创建一个新项目，并通过android虚拟设备管理器创建一个新的模拟器。

# jquery - jquery Datepicker，将默认日期设置为跨度的值

> ID：13307830
> 
> 赞同：0
> 
> 时间：2012-11-09T12:09:56.393
> 
> 标签：jquery, date, datepicker, jquery-ui-datepicker

如果我这样做`alert($(this).parents().find("span:first").html())`，它会显示`03/28/2011`

如果我查看源代码`<span id="ctl00_ContentPlaceHolder1_GridView1_ctl03_StDt">03/28/2011</span>`

如果我在日期选择器中设置 defaultDate

```
defaultDate: new Date($(this).parents().find("span:first").html()), 
```

默认为 1969 年 12 月 31 日

**编辑** 在下面 vtortola 的解决方案的帮助下，我明白了。我需要解析日期并检查是否有空跨度。

```
 var myDate = null;
        var minDate = null;
        $(".StartDateImg").datepicker({
            beforeShow: function (input, inst) {
                myDate = null;
                if ($(this).parents().find("span:first").html().length > 1) {
                    myDate = $.datepicker.parseDate("mm/dd/yy", $(this).parents().find("span:first").html());
                    $(this).parents().find("input:first").datepicker('option', 'defaultDate', myDate);

                }
                minDate = null;
                if ($(this).parents().closest('tr').find('td:last').length > 1) {
                    minDate = $.datepicker.parseDate('mm/dd/yy', $(this).parents().closest('tr').find('td:last').html())
                    $(this).parents().find("input:first").datepicker('option', 'minDate', minDate);
                }
            },
            duration: '',
            showTime: false,
            constrainInput: false,
            onSelect: function (dateText) {
                $(this).parents().find("span")[0].innerHTML = dateText;
            }

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:25:19.920

尝试：

```
 defaultDate:  $.datepicker.parseDate('dd/mm/yy', $(this).parents().find("span:first").text()) 
```

干杯。

# c# - 锁定字符串键

> ID：13307831
> 
> 赞同：4
> 
> 时间：2012-11-09T12:10:00.200
> 
> 标签：c#, locking

如何`lock`基于特定的字符串键执行？

```
public void PerformUpdate(string key)
{
    // TODO: Refine this, since they key-string won't 
    // be the same instance between calls

    lock(key)
    {
        PerformUpdateImpl()
    }
} 
```

我试图将锁定对象保留在 a 中`ConcurrentDictionary`，但不知何故这也不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T12:13:56.503

虽然这不是并发的（你可以这样做），但是`Dictionary<string,object>`.

这不行吗？

```
dict.Add("somekey",new object());

lock (dict["somekey"]) {
  ...
} 
```

这将允许线程锁定对象的命名实例，我认为这会做你想做的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T12:13:53.153

我做过类似的事情的一种方法是创建一个`Dictionary<string,object>`并使用它从字符串转到我锁定的对象。您可能需要确保以线程安全的方式访问该字典（例如，锁定它），如果您需要在不同实例之间锁定，请将其设为静态等。但这是我用来执行此操作的广泛技术.

# android - SurfaceView 和 Activity 之间的组织方法

> ID：13307832
> 
> 赞同：0
> 
> 时间：2012-11-09T12:10:07.193
> 
> 标签：android, layout, surfaceview

两天来，我一直试图在视图中显示相机。我遵循了很多这样的教程：

[http://code.google.com/p/openmobster/wiki/CameraTutorial](http://code.google.com/p/openmobster/wiki/CameraTutorial) [http://developer.android.com/training/camera/cameradirect.html](http://developer.android.com/training/camera/cameradirect.html)

但没有成功在屏幕上显示相机。

我终于找到[了这个](http://android-er.blogspot.com/2010/12/camera-preview-version-ii.html)直接有效的方法。只需删除一种已弃用的方法。从那个我尝试构建与前两个站点中的示例类似的东西，但我无法让它工作。

在这一行：

```
surfaceView = (PreView)findViewById(R.id.camerapreview); 
```

我试图通过以下方式修改它：

```
surfaceView = new PreView(this);
      FrameLayout layout = (FrameLayout)findViewById(R.id.camerapreview); 
      layout.addView(surfaceView); 
```

但它不起作用。然后我也改变`SurfaceView`了`LinearLayout`. `activity_main.xml`我没工作。的构造函数`PReView`甚至都没有运行（我在里面放了一个断点，但是这个bug就在那之前）。我是否需要嵌套布局才能使其正常工作？我尝试了很多东西。我希望有人会看看：

**MainActivity.java：**

```
package com.example.cameratest2;
import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.graphics.PixelFormat;
import android.os.Bundle;

public class MainActivity extends Activity{
PreView surfaceView;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

      getWindow().setFormat(PixelFormat.UNKNOWN);
      surfaceView = (PreView)findViewById(R.id.camerapreview);
      //surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
  }
} 
```

**预览.java：**

```
package com.example.cameratest2;

import java.io.IOException;

import android.content.Context;
import android.hardware.Camera;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class PreView extends SurfaceView implements SurfaceHolder.Callback {
Camera camera;
boolean previewing = false;
SurfaceHolder surfaceHolder;

public PreView(Context context) {
    super(context);

    surfaceHolder = this.getHolder();
    surfaceHolder.addCallback(this);
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, 
    int width,int height)   {
    if(previewing){
     camera.stopPreview();
     previewing = false;
    }

    if (camera != null){
     try {
      camera.setPreviewDisplay(surfaceHolder);
      camera.startPreview();
      previewing = true;
     } catch (IOException e) {
      e.printStackTrace();
     }
    }
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    camera = Camera.open();
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    camera.stopPreview();
    camera.release();
    camera = null;
    previewing = false;
}
  } 
```

**activity_main.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 >
 <SurfaceView
 android:id="@+id/camerapreview"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 />
 </LinearLayout> 
```

**日志猫：**

```
 11-09 04:22:58.856: W/dalvikvm(1612): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
    11-09 04:22:58.975: E/AndroidRuntime(1612): FATAL EXCEPTION: main
    11-09 04:22:58.975: E/AndroidRuntime(1612): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.cameratest2/com.example.cameratest2.MainActivity}: java.lang.ClassCastException: android.view.SurfaceView cannot be cast to com.example.cameratest2.PreView
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at android.os.Handler.dispatchMessage(Handler.java:99)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at android.os.Looper.loop(Looper.java:137)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at android.app.ActivityThread.main(ActivityThread.java:4745)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at java.lang.reflect.Method.invokeNative(Native Method)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at java.lang.reflect.Method.invoke(Method.java:511)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at dalvik.system.NativeStart.main(Native Method)
    11-09 04:22:58.975: E/AndroidRuntime(1612): Caused by: java.lang.ClassCastException: android.view.SurfaceView cannot be cast to com.example.cameratest2.PreView
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at com.example.cameratest2.MainActivity.onCreate(MainActivity.java:19)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at android.app.Activity.performCreate(Activity.java:5008)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
    11-09 04:22:58.975: E/AndroidRuntime(1612):     ... 11 more 
```

**[编辑]**

我发现了这个：[从布局 xml 绘制 SurfaceView](https://stackoverflow.com/questions/5203547/draw-surfaceview-from-layout-xml)。
如此链接中所述，我在`activity_main.xml`替换和修改 MainActivity.java 中进行了修改以`<SurfaceView>`替换`<com.example.cameratest2.PreView>`

```
 surfaceView = (PreView)findViewById(R.id.camerapreview); 
```

和

```
 surfaceView = new PreView(this); 
```

...但它仍然不起作用，我收到此错误：

```
11-09 05:01:14.114: E/AndroidRuntime(1700): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class com.example.cameratest2.PreView 
```

# single-sign-on - 桌面 SSO 客户端（C/C++）的参考实现，基于 Kerberos 的身份验证（服务器端是 Java 和 MS AD）

> ID：13307842
> 
> 赞同：0
> 
> 时间：2012-11-09T12:10:52.970
> 
> 标签：single-sign-on, kerberos, autologin, spnego

我们需要在托管的 Windows 环境（一些 Vista 机器，一些带有 Win 2008 Citrix 后端的 Citrix 客户端）中为富客户端实施桌面 SSO。

富客户端（用 C/C++ 编写）使用 SOAP Web 服务连接到服务器。服务器是一个运行在 JBoss EAP 上的 Java 应用程序。用户数据存储在 Microsoft ActiveDirectory 中。ADFS 2.0 对我们不可用。富客户端不使用 Internet Explorer 组件。

我们计划在服务器端使用 PicketLink。**然而，中心问题是：我们如何将 SSO 注入 C/C++ 客户端？**我们使用哪些 API？我的理解是我们需要在客户端读取 Kerberos 令牌，但我想避免手动实现所有 Kerberos 交互。Windows API 中是否有任何抽象层？有没有第三方库？

**也许有一个开源参考实现或产品展示了如何在托管 Windows 环境中实现基于 Kerberos 的富客户端 SSO？**

任何建议将不胜感激！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:38:33.770

如果您使用 HTTP 作为您的 SOAP 传输，您可以简单地使用 Microsoft 的 WinHTTP。它具有开箱即用的 SPNEGO 支持。JGSS 很乐意接受这些票。如果您真的需要了解如何在客户端使用 SSPI，请查看 libneon 或 libserf 的 C 源代码。但是所有三个库都将使用 SPNEGO 提供开箱即用的 HTTP。

注意：neon 需要一个小补丁，但这个可以在邮件列表中找到。注 2：我认为其他一切都有效：域、dns、帐户、spns 等等。

# iphone - 检测按下相机记录按钮

> ID：13307843
> 
> 赞同：1
> 
> 时间：2012-11-09T12:11:11.573
> 
> 标签：iphone, objective-c, ios, camera

我需要知道相机上的录制按钮何时被按下，以便我可以在按下时执行一些操作。有人知道怎么做这个吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:17:20.127

使用默认的 UIPicker，我认为这是不可能的。

当用户点击按钮时您不会收到通知，但您可以提供自己的捕获按钮

隐藏其标准图像选择器控件 (showsCameraControls) 并提供自定义叠加视图 (cameraOverlayView)。在该覆盖视图中，放置一个连接到目标/操作的自定义按钮。

# python - 将解析的 email.message.Message 实例附加到创建的 email.mime.multipart 实例作为 Python 中的有效负载

> ID：13307845
> 
> 赞同：1
> 
> 时间：2012-11-09T12:11:21.723
> 
> 标签：python, email, mime, email-attachments

到目前为止，我还无法在 stackexchange 或 Google 上找到解决此特定问题的方法。

在 Python 中有很多将文件附加到多部分消息的示例，但**我想从已解析的消息中提取附件，然后将其重新附加到新的多部分电子邮件中**。

在我对文档的解释之后，这就是我执行此任务的方式，并在一个小的工作测试脚本中进行了演示。

```
#!/usr/bin/env python

import sys
from email.parser import Parser
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

email = Parser().parse(sys.stdin)

payloads = email.get_payload()

newMail = MIMEMultipart()
newMail['From'] = 'me@domain.tld'
newMail['Subject'] = 'Some subject'
newMail['To'] = 'someguy@ibm.com'
newMail.preamble = 'You need a MIME reader'

for p in payloads:
    p.add_header('Content-Disposition', 'attachment', filename='att.eml')
    newMail.attach(p)

body = MIMEText('This is some body')
newMail.attach(body)

o = open('testoutput', 'w')
o.write(newMail.as_string())
o.close()

sys.exit(0) 
```

这实际上是一个成功的测试，当我检查生成的 testoutput 文件时看起来就像预期的那样。

但是，这是我正在尝试制作[的代码，但它失败并显示以下消息。](https://github.com/swehack/devops/blob/master/spam/spamutbildning.py)

```
Traceback (most recent call last):
  File "../devops/spam/spamutbildning.py", line 232, in <module>
    if main():
  File "../devops/spam/spamutbildning.py", line 127, in main
    messageText = newMail.as_string()
  File "/usr/lib/python2.6/email/message.py", line 135, in as_string
    g.flatten(self, unixfrom=unixfrom)
  File "/usr/lib/python2.6/email/generator.py", line 83, in flatten
    self._write(msg)
  File "/usr/lib/python2.6/email/generator.py", line 115, in _write
    self._write_headers(msg)
  File "/usr/lib/python2.6/email/generator.py", line 161, in _write_headers
    header_name=h, continuation_ws='\t').encode()
  File "/usr/lib/python2.6/email/header.py", line 403, in encode
    return self._encode_chunks(newchunks, maxlinelen)
  File "/usr/lib/python2.6/email/header.py", line 363, in _encode_chunks
    _max_append(chunks, s, maxlinelen, extra)
  File "/usr/lib/python2.6/email/quoprimime.py", line 97, in _max_append
    L.append(s.lstrip())
AttributeError: 'tuple' object has no attribute 'lstrip' 
```

我不明白第`newMail.as_string()`127 行和我试图用作字符串的这个元组之间的关系。

编辑：我无法回答我自己的问题，但我已经确定了问题。具体`__setitem__`在`Message`对象中的使用。

它应该是这样的。

```
msg['from'] = 'from me' 
```

这就是我正在做的事情，但是当我改用 add_header 时，它的效果要好得多。每当我使用缩写形式 [..]=foo 时，都会出现元组错误。

# java - Hibernate 返回具有空值的列表（具有 List 类型的 OneToMany 注释）

> ID：13307849
> 
> 赞同：7
> 
> 时间：2012-11-09T12:11:34.773
> 
> 标签：java, mysql, hibernate

我遇到了一个问题，因为 Hibernate (4.1.8.FINAL) 返回一个具有 NULL 值的列表（单向 OneToMany 映射）。

**我得到了什么：** 我得到一个大小为 21 的列表，其中 EntryAddress 在第 10 个索引上，第二个 Entry Address 在第 20 个索引上。

```
Entry [addresses=[null, null, null, null, null, null, null, null, null, null, EntryAddress [id=5, entryId=3, precedence=10, line=Line 3.1], null, null, null, null, null, null, null, null, null, EntryAddress [id=6, entryId=3, precedence=20, line=Line 3.2]]] 
```

**我的期望**- 我期望一个只有两个 EntryAddress 对象的列表：

```
Entry [addresses=[EntryAddress [id=5, entryId=3, precedence=10, line=Line 3.1], EntryAddress [id=6, entryId=3, precedence=20, line=Line 3.2]]] 
```

这是最小的源代码：

```
@Entity
@Table(name = "entry")
public class Entry {
    ...
    @OneToMany(fetch = FetchType.EAGER, orphanRemoval = true)
    @JoinColumn(name = "entry_id")
    @OrderColumn(name = "precedence")
    private List<EntryAddress> addresses;
    ...
} 
```

```
@Entity
@Table(name = "entry_address")
public class EntryAddress {
    @Id
    @GeneratedValue
    @Column(name = "id")
    private Integer id;

    @Column(name = "entry_id")
    private Integer entryId;

    @Column(name = "precedence")
    private Integer precedence;
...
} 
```

这是mysql结构（引擎InnoDB）：

```
CREATE TABLE  entry  (
   id  int(10) unsigned NOT NULL AUTO_INCREMENT,
   name  varchar(500) NOT NULL,
   active  int(1) NOT NULL DEFAULT '0',
   modifiedTS  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP,
   createdTS  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY ( id )
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

CREATE TABLE  entry_address  (
   id  int(10) unsigned NOT NULL AUTO_INCREMENT,
   entry_id  int(10) unsigned NULL,
   precedence  int(2) NULL DEFAULT '0',
   line  varchar(255) DEFAULT NULL,
  PRIMARY KEY ( id ),
  UNIQUE KEY  entry_address_uq  ( entry_id , precedence )
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

当我尝试用“Set”替换“List”时，集合没有 NULL 值，但顺序/优先级不起作用。

我发现的一个有趣的点是，如果我将第一个 EntryAddress 的优先级设置为 1，并将第二个 EntryAddress 的优先级设置为 2，那么我将得到一个大小为 2 的列表。所以看起来优先级在返回 List 时起作用，尽管优先级应该只用于排序。

你能告诉我我做错了什么吗？谢谢 ：-）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-09T14:52:34.487

来自 OrderColumn 的 javadocs：“订单列必须是整数类型。持久性提供程序在更新关联或元素集合时维护订单列的值的**连续（非稀疏）排序**。第一个的订单列值元素为 0。”

因此，期望 OrderColumn 的值从 0 开始并且是连续值。因此，当值不连续时，Hibernate 会将空元素添加到您的 Java 列表中。

我认为 OrderColumn 的这种行为类似于休眠 xml 映射中的列表索引行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T12:54:06.613

问题是List和Set之间的区别。

> 我得到一个大小为 21 的列表，其中 EntryAddress 位于第 10 个索引上，而 2nd Entry Address 位于第 20 个索引上。

这是一个非常重要的集合，它应该是列表！

当您“用 Set 替换 List”时，您是否记得删除了`@OrderColumn(name = "precedence")`? 因为如果您使用 Set，则不能有 Order 列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T19:45:00.840

我找到了解决方案，我使用了它，这解决了问题

```
@OneToMany(orphanRemoval = true)
@LazyCollection(LazyCollectionOption.FALSE)
@JoinColumn(name = "entry_id")
@OrderBy("precedence")
private List<EntryAddress> addresses;

@OneToMany(orphanRemoval = true)
@LazyCollection(LazyCollectionOption.FALSE)
@JoinColumn(name = "entry_id")
@OrderBy("precedence")
private List<EntryContact> contacts; 
```

# matlab - 随机分布数据的Matlab直方图

> ID：13307852
> 
> 赞同：4
> 
> 时间：2012-11-09T12:11:50.347
> 
> 标签：matlab, histogram, curve

我是 matlab 的新手，我已经搜索了一大堆不同的网站，但我没有找到解决方案（至少是一个可以理解的解决方案）。

我有一个 290x233 的矩阵，其 double 值范围从 0.1 到 4.7。我想从这个矩阵中的所有数据中生成一个直方图，其中有 0.5 范围内的条形 -> 我希望能够查看 0 到 0.5、0.5 到 1 之间有多少个值等等上 ...

到目前为止，我设法接近绘制条形图。使用此代码：

```
bins=[0.25:0.5:4.75];
n2=histc(a_dif_1, bins);
bar(bins,n2,'hist'); 
```

我设法得到了一个结果，每个箱内都有一大堆峰（见下图）。这意味着它向我展示了 bin 范围内每个单个值的出现。

![在此处输入图像描述](../Images/23833ce6d21635e817c527d080db3c33.png)

然后我发现了“堆叠”选项并使用

```
bins=[0.25:0.5:4.75];
n2=histc(a_dif_1, bins);
bar(bins,n2,0.8,'stacked','b'); 
```

这样，我至少得到了只显示 1 个 bin 内出现的总次数的大条（因此下面显示了 10 个矩形条）。

![在此处输入图像描述](../Images/8aa40754d16d81fbb6b976ab78010e6b.png)

现在我想知道这是否是绘制条形图的正确方法，只显示一个 bin 中的值的总量？除此之外，我注意到我的栏杆有点偏离了垃圾箱的中心（右侧的栏杆并不完全位于两个 x-ticks 的中间） - 我把垃圾箱弄乱了吗？

作为一种奖励，我最后想在条形图上画一条曲线。曲线应该以非常概括的方式显示在我之前描述的峰值之后，因此我可以提供有关除条形之外的数据分布的更详细信息。

感谢您的各种帮助或想法！

### 更新

非常感谢您的提示。我改变`histc`了`hist`

```
bins=[0.25:0.5:4.75]; 
hist(a_dif_1(:), bins) 
```

...而且 Matlab 给了我我想要的东西：

![在此处输入图像描述](../Images/8ccb9ae2714d3fdc52566ac5be787e1c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:19:21.197

```
a = 0.1;
b = 4.7;
r = a + (b-a).*rand(290,233);
bins=[0.25:0.5:4.75];
hist(r(:))
hist(r(:),bins) 
```

这个可以吗？

![在此处输入图像描述](../Images/25a7f34346ba11a0d85cfb22d5c6f0e6.png)

# php - codeigniter - 在同一个 url 上显示多个下拉列表和结果

> ID：13307855
> 
> 赞同：0
> 
> 时间：2012-11-09T12:11:54.287
> 
> 标签：php, ajax, codeigniter, jquery

我有两个下拉列表，锦标赛和类别。视图的输出将是这样的：

```
<select id="tournament">
<option selected="selected" value="1">Tournament1</option>
<option value="2">Tournament2</option>
<option value="3">Tournament3</option>
</select> 

<select id="category">
<option selected="selected" value="1">Category1</option>
<option value="2">Category2</option>
<option value="3">Category3</option>
</select> 
```

选项的值是从 db 表中获取的。在这张桌子上，我有锦标赛和类别之间的关系。它的记录看起来像这样：

锦标赛id category_id team_id ...

```
 1           1       1
        1           1       2
        1           1       3
        2           1       4
        2           2       5
        2           3       6 
```

我想要做的是，当“锦标赛”下拉列表发生变化时，比如说从 1 到 2，然后下拉“类别”应该用新值（步骤 1）和下面显示的结果记录（例如团队名称、胜利等）进行更新。 ） （第2步）。这意味着，url (localhost/ci/results/) 不应更改。

我按照本教程了解了如何制作第 1 步： [dynamic_dependent_dropdown_filtering_with_codeigniter_and_jquery](http://mikeheavers.com/main/code-item/dynamic_dependent_dropdown_filtering_with_codeigniter_and_jquery)，但停留在第 2 步。

我想，我必须以某种方式触发控制器，然后是视图，以便在两个下拉列表中的任何一个发生一些更改后显示新记录。

任何有关如何执行此操作的帮助或提示将不胜感激。

基本上，我需要这样的东西：

[摩托车比赛结果](http://www.motogp.com/en/Results+Statistics)

* * *

更新#1：

这是我的控制器（results.php）：

```
class Results extends CI_Controller {
public function __construct()
{
    parent::__construct();
    $this->load->model("tournaments_model");
}

function index(){
    $data['mytitle'] = 'Results';

    if($this->input->post('tournaments')){
        $tournament_id = $this->input->post('tournaments');
    }else{
        $tournament_id=1;
    }

    if($this->input->post('categories')){
        $category_id = $this->input->post('categories');
    }else{
        $category_id=1;
    }

    $data['tournaments'] = $this->tournaments_model->getTournaments();
    $data['categories'] = $this->tournaments_model->getCategories($tournament_id);

    $data['rows'] = $this->tournaments_model->getAll($tournament_id, $category_id);

    if($data['rows']>0){
        $this->load->view('header_view', $data);
        $this->load->view('results_view', $data);
        $this->load->view('footer_view');   
    }else{
        $this->load->view('header_view', $data);
        $this->load->view('norecords_view');
        $this->load->view('footer_view');
    }   
}

function postCategory($tournament_id)
{
    $this->load->model("tournaments_model");
    $data['categories'] = $this->tournaments_model->getCategories($this->input->post('tournaments'));
    $data['categories'] = json_encode($data['categories']);
    $this->load->view('jsonCategory_view', $data);
} 
```

这是视图（results_view.php）：

```
<table>
<tr>
<td>Tournament</td>
<td>
<?php 
echo '<form id="frmTCG"  action="'; echo base_url().'results/" method="post" name="frmTCG"/>';

foreach($tournaments as $r){
 $opTournament[$r->tournament_id] = $r->tournament_name;
}

if(isset($_POST['tournaments'])){
 echo form_dropdown('tournaments', $opTournament, $_POST['tournaments'], 'id="tournament"');
}else{
 echo form_dropdown('tournaments', $opTournament, null, 'id="tournament"');
}

?>
</td>
</tr>
<tr>
<td>Category</td>
<td>
<?php 
foreach($categories as $r){
 $opCategory[$r->category_id] = $r->category_name;
}

if(isset($_POST['categories'])){
 echo form_dropdown('categories', $opCategory, $_POST['categories'], 'id="category"');                   
}else{
 echo form_dropdown('categories', $opCategory, null, 'id="category"');                   
}
?>

</td>
</tr>
<tr>
</table> 
```

这是 jquery（从 footer_view 调用）：

```
$('#tournament').change(function(){
var tournament_id = $('#tournament').val();

if (tournament_id != ""){

    var post_url = "results/postCategory/" + tournament_id;
    //var post_url = "results/";

    $.ajax({
        type: "POST",
         url: post_url,
         //data:     $('#tournament').serialize(),     
         data:  $('#frmTCG').serialize(),// 
         dataType: 'json',

         success: function(data) 
          {

            $('#category').empty();
            $('#category').show();

               $.each(data,function(id, name) 
               {                    
                var opt = $('<option />'); 
                  opt.val(id);
                  opt.text(name);

                  $('#category').append(opt); 

                });

           }, //end success
         error: function(jqXHR, textStatus, errorThrown) {
            console.log("getTestData failed with textStatus '" + textStatus + "' errorThrown '" + errorThrown + "'");
    }

     });

} 
}); //end change    

$('#category').change(function(){
  var category_id = $('#category').val();

  if (category_id != ""){
       var post_url = "results/postCategory/" + category_id;
    ...same as $('#tournament').change()
} 
```

问题是 index() 中的 $tournament_id 和 $category_id 永远不会更新，它们不会从 $_POST[] 中获取值，这意味着 getAll() 不会带来新记录。

那么，在两个下拉列表中的任何一个更改之后，我如何强制它再次调用我的控制器的 index() ？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:32:36.557

正如 Karoly 所说，这是 ajax 的一个问题。

在控制器中创建一个函数，返回锦标赛的类别

```
function ajax_return_categories($tournament_id = NULL)
{
    if($tournament_id != NULL)
    {
         $this->db->select('categories')->from('db_table')->where('category_id',$tournament_id);
         $query = $this->db->get();
         return json_encode($query->result_array());
    }
} 
```

并在第一个下拉列表更改时使用 ajax 调用它

```
$('#tournament').change(function(){
    var tournament_id = this.value;
    var result = $.get('/tournament_controller/ajax_return_categories/'+tournament_id);
    $.each(result, function(val, text) {
        $('#category').append(
            $('<option></option>').val(val).html(text)
        );
    });
}) 
```

类似的东西。

* * *

更新：

如果您希望页面上的数据根据​​下拉选择更新并且您不希望 URL 更改，则需要使用 ajax 来请求和填充数据。

在 result.php 控制器中创建一个返回结果的函数：

```
function get_results($tournament_id = NULL, $category_id = NULL){

    $data['rows'] = $this->tournaments_model->getAll($tournament_id, $category_id);

    if($data['rows']>0){
        $this->load->view('results_view', $data);
    }else{
        $this->load->view('norecords_view');
    }   
} 
```

并在下拉列表更改时调用它

```
$('#tournament').change(function(){
    var tournament_id = this.value;
    var result_table = $.get('/tournament_controller/get_results/'+tournament_id);
    $('#results_holder').html(result_table);
    var result = $.get('/tournament_controller/ajax_return_categories/'+tournament_id);
    $.each(result, function(val, text) {
        $('#category').append(
            $('<option></option>').val(val).html(text)
        );
    });
}) 
```

# php - PHP regex 删除一些不需要的 div

> ID：13307857
> 
> 赞同：-2
> 
> 时间：2012-11-09T12:12:01.610
> 
> 标签：php, html, regex

我想删除一些带有 id 或 class 的 div，其中包含单词`comment`或`share`（如：`<div id="comment">`、、、、）`<div class="header-comment">`，我使用的东西`<div id="comment-footer">``<div class="social-share">`

```
preg_replace('/<div[^>]*(comment|share)[^>]*>(.*?)<\/div>/is', '', $htmls); 
```

不行。如何做一个正确的正则表达式？这是一些测试代码，我想删除`comment`部分并保留`content`和`footer`，

```
$htmls = <<<EOT
<div id="content">
     Main content.
</div>
<div id="comment">
    <ul>
        <li class="comment">
            <div class="header-comment">
                Comment:
                <span class="date-comment">8/11/2012, 21:25</span>
            </div>
            <h4>Some Text</h4>
            <p class="test-comment">Blah~~ Blah~~ Blah~~</p>
            <div class="share">
                <div class="vote">
                    <a class="vota yes" title="Like">2</a>
                    <a class="vota no" title="Unlike">0</a>
                </div>
            </div>
        </li>
        <li class="comment">
            <div class="header-comment">
                Comment:
                <span class="date-comment">8/11/2012, 23:08</span>
            </div>
            <h4>Other Text</h4>
            <p class="test-comment">Blah~~ Blah~~ Blah~~</p>
            <div class="share">
                <div class="vote">
                    <a class="vota yes" title="Like">4</a>
                    <a class="vota no" title="Unlike">0</a>
                </div>
            </div>
        </li>     
     </ul>
</div>
<div id="footer">
     Footer content.
</div>
EOT;

$htmls = preg_replace('/<div[^>]*(comment|share)[^>]*>(.*?)<\/div>/is', '', $htmls);
echo $htmls; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:28:43.717

考虑使用[DOMDocument](http://php.net/manual/en/class.domdocument.ph)函数来解析 HTML，然后定位`div`您不想要的并将其[删除](http://www.php.net/manual/en/domnode.removechild.php)。这将更快，更容易理解和维护，并且可能更快地编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:31:21.213

我认为你应该使用的是 `DomDocument`尝试：

```
$dom = new DOMDocument();
$dom->loadHTML($htmls);
$remove = array("comment","share");
$removeList = array();
foreach ( $dom->getElementsByTagName("div") as $div ) {
    if (in_array($div->getAttribute("class"), $remove) || in_array($div->getAttribute("id"), $remove)) {
        $removeList[] = $div;
    }
}

foreach ( $removeList as $div ) {
    $div->parentNode->removeChild($div);
}

$dom->formatOutput = true;
echo "<pre>";
echo htmlentities($dom->saveHTML()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:15:56.827

> 如何做一个正确的正则表达式？

为此，您[首先识别所有 DIV，提取它们的文本](http://php.net/DOMXpath)，然后使用[`preg_match`](http://php.net/preg_match).

但是，您也可以使用正则表达式来保留部分，而只需使用*xpath*。在您的情况下，这更直接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T12:25:09.390

请参阅此站点以测试您的正则表达式 [http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

# java - 使用随时间变化的数据创建对象

> ID：13307858
> 
> 赞同：0
> 
> 时间：2012-11-09T12:12:02.140
> 
> 标签：java, time, statistics

我创建了一个对象来存储大量数据。

总共有 15 种不同类型的对象，我需要在以下时间范围内存储数据：

```
8.00 9.00 10.00 11.00 12.00 //ect ect 
```

这方面的一个例子是：在 8.00 - 9.00 之间，这种类型的数据将是 15，而在 9.00 和 10.00 之间，它将是 5。

现在，当我想计算这些数字的平均值时，我想获得每个时间段的平均值，例如，我希望找到 8.00 到 9.00 之间数据的平均值

我的问题不是如何获取数据，而是如何将数据存储在我的对象中。

到目前为止，我的对象看起来像这样：

```
 public class CallQueue {

    private String type;
    private int data;

    public CallQueue(String type, int data){
        this.type = type;
        this.data = data;   
    }
    public void setType(String type){
        this.type = type;
    }
    public String getType(){
        return type;
    }
    public void setData(int data){
        this.data = data;
    }
    public int getData(){
        return data;
    }
} 
```

我的问题是：存储`Integer`时间戳的最佳方法是什么？我宁愿避免`Hashmap`或`Hashtable`因为它们更难循环！我可以以某种方式避免这种情况吗？如果，那怎么办？

**更新 - 更多信息**

我的目标是使用以下方法（这是在我的统计类中）

```
public void calculateAverage(double time){
        if (time != 20.00) {
        double data =0; 
        int times = 0;
        for (CallQueue cq : getData()) {
            data += cq.getData();
            times++;
        }       
        averageData.add(data/times);
        calculateAverage(time + 1);
        }
    } 
```

如您所见，我想添加 8 - 19.00 之间的数据平均值（间隔 1 小时）所有这些都将添加到 arrayList ( `averageData`)！

所以`for each loop`需要在给定时间从每个对象获取所有数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:00:58.693

**我的问题是：存储带有时间戳的整数的最佳方法是什么？**

我会说。

创建一个有两个成员的类

> 一个整数
> 一个日期

这是我能想到的方式。如果有更好的存在。没有把握。

# ios - 验证原始应用购买

> ID：13307860
> 
> 赞同：-1
> 
> 时间：2012-11-09T12:12:05.317
> 
> 标签：ios, app-store, iad

有没有办法检测用户是否已经为应用付费？

我想将 iAd 集成到一个已经售出的应用程序中 - 现在我不想在老用户升级时向他们展示广告。

编辑：那么新版本的应用程序将是免费的！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:26:09.377

不幸的是，你不能这样做。抱歉，您不应该向曾经付费的产品添加广告。考虑在付费版本旁边发布带有广告的应用程序的免费版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:26:41.693

您可以对应用内购买运行收据验证，但我还没有看到有人进行初始购买验证工作。（如果是这样的话，对反盗版世界来说将是一件幸事。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:38:20.793

它可以通过[NSUserDefaults](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)轻松完成。

当用户付费时，向 NSUserDefault 添加一个值，例如：

```
[[NSUserDefaults standardUserDefaults] setBool:TRUE forKey:@"Paid"]; 
```

当您需要检查他是否付款时：

```
if([[NSUserDefaults standardUserDefaults] boolForKey:@"Paid"])
{
  //paid user
}
else
{
 //Not paid user can show iAd
} 
```

# javascript - Jquery attr 不能在 IE 9 上运行？

> ID：13307862
> 
> 赞同：0
> 
> 时间：2012-11-09T12:12:34.490
> 
> 标签：javascript, jquery

我正在尝试为 id 和 onclick 添加一个 attr，它可以在 firefox 和 chrome 上运行，但由于某种原因它不能在 IE 9 上运行。我的代码有任何替代方法或有问题吗？

```
$(".extendedGridView tr td a").each(function (index) 
{
   if ($(this).html() == "Update") 
   {
       $(this).attr('id', 'insertButton');
       $(this).attr('onclick', "return Validate('extendedGridView')");
   }        
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T12:14:42.277

不要为此使用 attr 。利用

```
 this.id = 'insertButton';
 $(this).click(function(){return Validate('extendedGridView')}); 
```

另请注意，如果有返回或空格或任何标签，则使用 html() 检查文本将不起作用。喜欢这个测试：

```
if ($(this).text().trim() == "Update") { 
```

然后，确保每个元素都有不同的 id。在您的代码中不清楚您在这一点上是否可以，但是当您使用`each`时，恐怕不是。如果您需要使您的元素更容易选择，请使用一个类：

```
$(this).addClass('update'); 
```

# multiplayer - 我想知道在线游戏（如 zynga poker 或 pool toor live）如何在 2 个用户之间进行交流

> ID：13307865
> 
> 赞同：0
> 
> 时间：2012-11-09T12:12:59.813
> 
> 标签：multiplayer

出于好奇，我想知道在线游戏（如 zynga poker 或 pool toor live）如何在 2 个用户之间进行交流......

应用程序是否不断 ping 服务器以检查其他玩家的移动或服务器向浏览器发送一些动态信息...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:18:24.637

“应用程序是否会不断 ping 服务器以检查其他玩家的移动，或者服务器会向浏览器发送一些动态信息......”

回合制游戏大多依靠推（彗星）机制。

一旦服务器（彗星也减少了这种等待的需要）从其中一个玩家那里获得了输入，它就会广播给其他玩家；但所需的更新机制也可以通过服务器定期询问客户端的轮询来实现。

客户端也可以执行相同的轮询过程，它们会定期询问服务器......

取决于游戏需要，但其中之一应考虑网络调用，首选方式始终是网络调用和延迟最少的方式。

# jquery - jquery.validate：带有ajax的addMethod不返回true

> ID：13307866
> 
> 赞同：0
> 
> 时间：2012-11-09T12:13:00.813
> 
> 标签：jquery, validation

这是我的方法：

```
$.validator.addMethod("password_verify_old", function(value, element){ 

     $.ajax({
         type: "GET", 
         url: verify_old_password_url,
         data: {oldPassword: value},   
         dataType: "json",
         success: function (msg) { 
           return eval(msg);
         }
       });

}, "Old password is incorrect."); 
```

在这里，我调用我的控制器，它只返回一个“真”字符串。为什么 jquery.validate.js 将其解释为“假”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T04:04:37.813

我不相信您可以使用调用 ajax 的 addMethod 添加验证方法

您正在寻找的是规则中的远程选项，它将对为输入中的值指定的 url 进行 ajax 调用

```
 $(form).validate({
       rules:{ your_field :{
               required:true,
               remote: check_passwordurl, 
```

哦，是的，你的检查密码 url 返回一个布尔值 true 或 false，否则你需要做一些额外的编码，因为这个 SO 显示 [如何使用 jQuery 远程验证依赖于表单中另一个字段的字段？](https://stackoverflow.com/questions/2710548/how-do-i-use-jquery-validate-remote-validation-on-a-field-that-depends-on-anothe)

# ruby-on-rails - 如何设置学生、考试、普通考试、结果的关联

> ID：13307873
> 
> 赞同：1
> 
> 时间：2012-11-09T12:13:29.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design

我正在构建一个在线考试应用程序，该应用程序的目的是，它可以让老师创建课程，课程主题和问题（每个问题都有标记），并且老师可以为学生创建考试，学生可以在线进行考试。由于我会使用很多单词`examination`and `examinations`，所以我将其简称为`exam`and `exams`。

关于我的应用的业务：

*   老师可以创建话题，问题和每个话题，问题只属于一位老师。
*   老师可以`general exam`为一门课程创建一个，它会从`question bank`.
*   由此`general exam`，教师将生成`number of exams`与`number of students`需要做课程考试的对应。考试将在生成后自动随机分配给学生。
*   生成的考试会有不同`number of questions`，但`total mark of questions`每次考试的考试都是一样的。例如，在生成考试后：

    `Student A take exam with 20 questions, student B take exam only has 10 questions, it means maybe every question in exam of student A only has mark is 1, but questions in exam of student B has mark is 2.`

    所以 20 = 10 x 2，这就是我的意思`total mark of questions in every examination will be the same.`

我设计了以下表格：

*   用户（包括学生和教师帐户）
*   课程
*   话题
*   问题
*   回答

当学生做考试时，我认为它会有表格：

*   结果，包含列：user_id、exam_id、mark

这是我想我会创建的表`general examination`：

*   GeneralExamination，列：name、description、dateStart、dateFinish、numberOfMinutes、maxMarkOfExam

但现在我不知道如何在用户（学生）、问题、考试、普通考试之间建立关联。总结一下关联：

*   学生可以参加很多考试。
*   学生只能参加分配给他们的考试。
*   A`general exam`有很多问题，从题库中获得，但每次考试都会从`general exam`生成的问题中获取问题。
*   Exams 属于 one `general examination`，用于生成它们。

我怎样才能建立这些协会？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:05:28.317

```
Course has_many :topics belongs_to :teacher
Topic has_many :questions belongs_to :course belongs_to :teacher
Question belongs_to :teacher belongs_to :topic has_and_belongs_to_many :general_exams has_and_belongs_to_many :exams
GeneralExam belongs_to :teacher belongs_to :course has_many :exams has_and_belongs_to_many :questions
Exam belongs_to :general_exam belongs_to :student has_and_belongs_to_many :questions has_one :exam_result
Student has_many :exams has_many :exam_results, :through => :exams
ExamResult belongs_to :exam belongs_to :teacher

class QuestionBank < ActiveRecord::Base
  belongs_to :course
  def questions
    Question.where("topic_id IN (?)", course.topic_ids)
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:10:50.643

我正在[做类似](http://github.com/maxcobmara/catechumen)的事情，请随时学习、分叉和贡献。

# facebook - 我通过 FB 上的 getAccessToken 获取访问令牌的旧方法不再起作用了？

> ID：13307882
> 
> 赞同：-1
> 
> 时间：2012-11-09T12:13:55.367
> 
> 标签：facebook, facebook-graph-api, oauth-2.0

我正在尝试获取应用程序访问令牌以在我的配置文件中使用它，但是即使用户接受来自 facebook 的应用程序，我也无法获取它。

过去它曾经可以工作，但现在不行。在我得到一长串令牌之前，但现在，我的旧方法不起作用，所以我试图通过它

```
https://graph.facebook.com/oauth/access_token?
            client_id=YOUR_APP_ID
           &client_secret=YOUR_APP_SECRET
           &grant_type=client_credentials 
```

但是我现在得到的是`xxxxxxxxxxxx|yyyyyyyyyyyyyyy`，我相信这不是正确的，因为它也不起作用。

`$facebook->getAccessToken();`过去可以做到这一点，但现在不行。

我能做些什么呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:11:36.817

当用户使用您的应用程序时，请尝试`$facebook->getAccessTokenFromCode($_GET['code']);` 我遇到了同样的问题，而这个问题已为我解决。

# jquery - jQuery Mobile 日历组件

> ID：13307884
> 
> 赞同：1
> 
> 时间：2012-11-09T12:13:56.800
> 
> 标签：jquery, jquery-mobile, calendar, google-calendar-api

我需要将约会详细信息添加到我的 jQuery Mobile 驱动的移动应用程序中。我需要谷歌日历之类的东西。

我可以查看哪些可能的日历组件？

我知道 Sage 的[DateBox](http://dev.jtsage.com/jQM-DateBox2/)是一个很棒的工具，但它不提供每周视图，此外，我们不能在日历单元格中写入颜色代码和事件，如 Google 日历。

任何人都可以建议我找到一个好的组件，即使我必须付钱我不介意。提前感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:48:27.180

以下是一些您需要的相当受欢迎的日历：

[http://www.webdesignbooth.com/9-useful-jquery-calendar-and-date-picker-plugins-for-web-designers/](http://www.webdesignbooth.com/9-useful-jquery-calendar-and-date-picker-plugins-for-web-designers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:42:54.083

你可以试试[Mobiscroll Calendar Control](http://mobiscroll.com/component/calendar)。它带有日历视图，还可以与日期和时间微调器一起使用。

它还有一个继承 jQM 样本的 jQuery Mobile 主题。

# java - 您能否解释一下 DriverManager.class 中与 ClassLoader 相关的代码片段

> ID：13307885
> 
> 赞同：0
> 
> 时间：2012-11-09T12:13:58.843
> 
> 标签：java, jvm, classloader

以下代码来自`java.sql.DriverManager`：

```
public static Connection getConnection(String url,String user, String password)    {
    // Gets the classloader of the code that called this method, may 
    // be null.
    ClassLoader callerCL = DriverManager.getCallerClassLoader();
    return (getConnection(url, info, callerCL));
 } 
```

我的第一个问题是为什么结果值`DriverManager.getCallerClassLoader();`可能为空？我认为调用者类应该是用户自己的类，通常是**AppClassLoader**。

上述代码的子序列，`getConnection(url, info, callerCL)`方法体包含以下代码片段。

```
if(callerCL == null) {
    callerCL = Thread.currentThread().getContextClassLoader();
} 
```

有什么`Thread.currentThread().getContextClassLoader()`用？我浏览了文档，无法理解。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:11:01.430

要回答你的第一个问题，

*为什么结果值`DriverManager.getCallerClassLoader();`可能为空？*

这是因为，如果您看到它在类中定义的方式`DriverManager`

```
/* Returns the caller's class loader, or null if none */
    private static native ClassLoader getCallerClassLoader(); 
```

它是本机方法，并且可以返回空值。

回答你的第二个问题：

有什么`Thread.currentThread().getContextClassLoader()`用？

**每个线程都有一个与之关联的类加载器**。如果线程是主线程，则与之关联的类加载器是系统类加载器。

很多时候，您通过一个类加载器创建一个对象，并且该对象可能被其他一些类加载器启动的线程使用。因此`getContextClassLoader()`，您可以访问一个类加载器，该类加载器不是加载对象的类加载器，并且可以访问线程的类加载器可用的资源。

[这是](https://stackoverflow.com/questions/1771679/difference-between-threads-context-class-loader-and-normal-classloader)同一论坛上的另一个主题，详细说明了同一主题。

# windows - MS Access 在打开访问时自动创建副本

> ID：13307896
> 
> 赞同：0
> 
> 时间：2012-11-09T12:15:03.320
> 
> 标签：windows, ms-access

我有以下问题：

我们在远程服务器上有一个 MS Access 文件，可供 3 人访问。每天都应该通过复制文件并重命名来进行备份。（我无法访问服务器，所以不能在那里放脚本！）

一旦第一个人打开文件并进行备份，除非它已经存在，否则是否有可能开始备份过程？

或者您还有其他易于实施的建议吗？

我会非常感谢这里的任何帮助。不是真正的 Windows 人。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:23:34.350

您也许可以使用 VBA 和 FileSystemObject：

```
Function BackUp()
Dim fs As Object 'FileSystemObject
Set fs = CreateObject("Scripting.FileSystemObject")
FileName = CurrentProject.Path & "\" & Format(DATE, "yyyymmdd.bak")
If Not fs.FileExists(FileName) Then
    fs.copyfile CurrentProject.FullName, FileName, False
End If
End Function 
```

该函数可以通过创建一个 autoexec 宏来运行——一个名为 autoexec 的宏将在数据库打开时运行。

但是，似乎存在一些问题，因为您没有指定应用程序的后端或前端所在的位置。此外，当没有用户访问后端时运行这样的副本是迄今为止最好的事情。

# windows - 如何通过 msysgit bash 在 gnuplot 脚本中运行 awk

> ID：13307900
> 
> 赞同：1
> 
> 时间：2012-11-09T12:15:08.873
> 
> 标签：windows, awk, gnuplot, msysgit, git-bash

我的 gnuplot 脚本用于`awk`预处理一些数据。在 Linux 中一切正常。但我也喜欢在 Windows 中运行这些脚本。大多数时候，我使用**Git Bash** (msysgit) 在 Windows 中进行命令行工作。除了我的 shell 脚本之外，这使我免于维护 Windows 批处理文件。

问题是 Git Bash 没有提供`gnuplot`命令，尽管它提供了`awk`. 我手动安装了 Gnuplot (MinGW) 并将它的 bin 目录添加到`%PATH%`.

现在我可以`gnuplot`从 Git Bash 运行了。但由于它是一个“Windows 应用程序”，它无法识别 MSYS Git 提供的工具/二进制文件，例如`awk`. 我想我可以将 Git 的 MSYS`bin`目录添加到 . `%PATH%`，但是（正如 Git 安装程序告诉你的那样）这可能会干扰某些 OS 系统功能。我也不想安装另一个 MSYS。Git 版本对我来说很好。

有没有更好的解决方案让 gnuplot 与我的 MSYS 二进制文件（尤其是`awk`）一起运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:55:36.190

我找到了一个非常简单的解决方案来解决我的问题。一种解决方案是将完整的 Git/bin 添加到`%PATH%`我不想做的事情中（见上文）。`bin`但是，如果您只需要一些命令，您可以在您的一个文件夹（那些已经在您的文件夹中）中设置一个简单的非侵入式“迷你”MSYS `%PATH%`，或者您创建一个新文件夹并将其添加到`%PATH%`.

**`awk`为我的`gnuplot`脚本设置：**

1.  `gawk.exe`从`Git/bin`到复制`%HOME%/bin/awk.exe`
2.  `msys-1.0.dll`从复制`Git/bin`到`%HOME%/bin`
3.  添加`%HOME%/bin`到您的`%PATH%`（如果还没有）

要对其进行测试，只需打开命令行并键入`awk`. 我现在可以双击`plot.sh`通过 Git 自动运行的脚本`bash`。该脚本调用`gnuplot`Windows 二进制文件，你也应该在你的`%PATH%`，`gnuplot`最后（内部）调用`awk`.

奇迹般有效！

# wcf - 如何针对这组安全要求配置 WCF 客户端

> ID：13307901
> 
> 赞同：4
> 
> 时间：2012-11-09T12:15:09.760
> 
> 标签：wcf, web-services, wcf-security, sap

我的客户有一些 SAP 服务，我需要调用它。我有预先生成的代理类，一切正常（当他们禁用安全性时），现在我需要启用他们的安全策略。他们给了我这个作为“规范”：

> *   肥皂 1.1
> *   SSL
> *   仅 WS-Security 签名，加密可选...
> 
> [http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0.pdf](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0.pdf)
> 
> SAP 对其服务的声明：
> 
> XML 签名的消息格式
> 
> SOAP 消息必须包含以下数据：
> 
> a) 具有 ValueType“ [http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3) ”和 EncodingType“ [http://docs.oasis ”的 BinarySecurityToken -open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary) "
> 
> b) 时间戳元素
> 
> c) 签名签名时间戳和正文，使用直接引用引用 BinarySecurityToken。
> 
> d）摘要算法是[http://www.w3.org/2000/09/xmldsig#sha1](http://www.w3.org/2000/09/xmldsig#sha1)
> 
> e) 签名算法为[http://www.w3.org/2000/09/xmldsig#rsa-sha1](http://www.w3.org/2000/09/xmldsig#rsa-sha1)

这是足够的信息让我得到这个工作吗？我不是 WCF 安全方面的专家，因此我很乐意提供任何帮助和有用的资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:44:00.943

听起来您需要使用 WCF 消息检查器，它可以拦截您发送和接收的消息并应用自定义肥皂标头。

检查以下链接以获取有关如何实施它们的一些指导：

1.  [MSDN - IDispatchMessageInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.aspx) - 修改发送的消息
2.  [MSDN - IClientMessageInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iclientmessageinspector.aspx) - 拦截和阅读您收到的消息
3.  [Paolo Pialorsi 博客 - 编写 WCF 消息检查器](http://weblogs.asp.net/paolopia/archive/2007/08/23/writing-a-wcf-message-inspector.aspx)
4.  [Kirk Evans 博客 - 使用 WCF 修改消息内容](http://blogs.msdn.com/b/kaevans/archive/2008/01/08/modify-message-content-with-wcf.aspx)
5.  [Steven Cheng 文章 - 如何通过自定义 MessageInspector 检查和修改 WCF 消息](http://blogs.msdn.com/b/stcheng/archive/2009/02/21/wcf-how-to-inspect-and-modify-wcf-message-via-custom-messageinspector.aspx)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:14:29.627

我想你应该问问对方等待的肥皂信封。然后可能使用 CustomBinding 或实现 Message Inspector 接口。

# networking - 同一台计算机上的多个应用程序可以接收 UDP 广播吗？

> ID：13307904
> 
> 赞同：13
> 
> 时间：2012-11-09T12:15:25.613
> 
> 标签：networking, tcp, udp, broadcast

例如，假设我有一个“智能”温度计，它每 N 秒将当前温度作为 UDP 数据报进行广播。

现在，我可以编写一个客户端来监听这些消息并以图形方式显示它们，并且我可以让该客户端同时在多台计算机上运行。到目前为止没有问题。

但是，当我尝试在同一台 Windows 计算机上运行客户端的两个实例时，我收到有关尝试“*绑定到已在使用的端口*”的错误。

这是：-

*   A: 就像在所有操作系统上使用 UDP 广播一样？
*   B：Windows 网络堆栈的限制？
*   C：或者，可能是我读取数据报的方式中的一个错误？

如果是A或B，有什么办法可以绕过它。

如果是C，*那么*我会发布一些代码..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T12:35:20.770

在 Windows 上，您可以使用

```
SocketOptionName.ReuseAddress 
```

选项（请参阅此答案[Is there a way for multiple processes to share a listener socket?](https://stackoverflow.com/questions/670891/is-there-a-way-for-multiple-processes-to-share-a-listening-socket)）。广播数据包应强制 Windows 将该数据包的副本提供给该端点上的每个侦听器。

回答 Roddy，是的，SO_REUSEADDR 在 *nix 上也以这种方式工作。

如需深入解答，请参阅[https://stackoverflow.com/a/14388707/705086](https://stackoverflow.com/a/14388707/705086)。

# java - HTTP 500 错误：如何修复我的 `dispatcher-servlet.xml` 文件？

> ID：13307909
> 
> 赞同：0
> 
> 时间：2012-11-09T12:15:36.417
> 
> 标签：java, spring, jakarta-ee, spring-mvc

由于我是 Spring MVC 框架的新手并尝试学习，但抛出了异常。可能是什么原因？

我的文件中似乎有错误`dispatcher-servlet.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc     http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">
  <annotation-driven />
  <context:component-scan base-package="kz.controller" />
  <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
    <property name="prefix" value="/WEB-INF/jsp/"/>
    <property name="suffix" value=".jsp"/>
  </bean>
</beans:beans> 
```

我的控制器类是注释驱动的，但它抛出了这个错误：

> HTTP 状态 500 -`Servlet.init()`用于 servlet 调度程序抛出异常
> 
> **类型**异常报告
> 
> **`Servlet.init()`servlet 调度程序的**消息引发异常****
> 
>  ****描述**服务器遇到一个内部错误，阻止它完成这个请求。
> 
> **例外**
> 
> `javax.servlet.ServletException`：`Servlet.init()`对于 servlet 调度程序抛出异常 ：来自资源 [ ]`org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException`的 XML 文档中的第 23 行无效；`ServletContext``/WEB-INF/dispatcher-servlet.xml`**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T12:31:51.463

您的 XML 不正确。您在 beans 命名空间下定义了 bean 命名空间。正确的 XML 是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc     http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <annotation-driven />
    <context:component-scan base-package="kz.controller" />
    <beans:bean id="viewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <beans:property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <beans:property name="prefix" value="/WEB-INF/jsp/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>
</beans:beans> 
```

通常在 spring 应用程序中 beans 模式是默认的，所以如果你将 beans 模式更改为默认值会更好，然后你可以删除所有“beans:”并将“mvc:”添加到其他标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:22:34.493

检查错误消息。它说文件 /WEB-INF/dispatcher-servlet.xml 不是有效的 xml 文件。使用 IDE（eclipse、intellij、netbeans 等）打开文件，它应该说明文件无效的原因。

特别是错误在于

```
</bean>
</beans:beans> 
```

你不需要`</bean>`。

底线，**使用一个好的IDE！**我们不再需要在 60 年代使用打孔卡进行编码并希望我们的代码是正确的 :)。**

# java - 正则表达式查找字符返回 5 次

> ID：13307924
> 
> 赞同：1
> 
> 时间：2012-11-09T12:16:27.127
> 
> 标签：java, regex, sequence, fsm

我正在尝试构建一个有限状态机，并且我想使用正则表达式检查我得到的序列。我需要检查序列是否来自以下形式：

例如：

`"A,B,C,C,C,C,C,A"`-> 被接受。

`"A,B,C,C,C,C,A"`-> 被忽略。

`"A,B,C,C,C,C,C,C,A"`-> 被忽略。

我找到了这篇[文章](https://stackoverflow.com/questions/7732852/regular-expression-to-match-character-repeated-three-times)和那篇[文章](https://stackoverflow.com/questions/7147810/regular-expression-same-character-3-times)，但我尝试的一切都不起作用。

我尝试了接下来的事情：`A\B\D{5}\A`，`ABD{5}A`还有更多，但再次没有成功。

**编辑：**我想知道 C 字符是否准确返回 5 次，前后都无关紧要，这意味着它也可能是这样的：

A，A，A，F，F，R，E，D，C，C，C，C，C，......

不要考虑逗号。

问题是我需要确定一个序列是否被接受，但是该序列来自下一种形式：A、B、C*10，我创建了机器类、状态类和事件类。但现在我需要知道我是否正好有 5 个 C 回报，这给我带来了很多问题。

**编辑：** 它不起作用，请参阅我添加的代码。

```
String sequence1 = "A,B,C,C,C,C,A";
String sequence2 = "A,B,C,C,C,C,C,A";
String sequence3 = "A,B,C,C,C,C,C,C,A";
Pattern mPattern = Pattern.compile("(\\w)(?:,\\1){4}");
Matcher m = mPattern.matcher(sequance1);
m.matches(); //FALSE
Matcher m = mPattern.matcher(sequance2);
m.matches(); //FALSE
Matcher m = mPattern.matcher(sequance3);
m.matches(); //FALSE 
```

它总是返回错误的。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T12:20:43.043

您的正则表达式不起作用，因为您没有考虑字符串中的逗号，我认为它是可用的。

您可以尝试以下正则表达式（我在这里发布了一个通用模式，您可以相应地对其进行修改）：-

```
"(\\w)(?:,\\1){4}" 
```

这将匹配用逗号分隔的任何 5 个相同字符序列。

`\1`用于反向引用第一个匹配的字符，其余4个字符应与此相同。

**解释： -**

```
"(         // 1st capture group
   \\w     // Start with a character
 )
 (?:       // Non-capturing group
    ,      // Match `,` after `C`
    \\1    // Backreference to 1st capture group. 
           // Match the same character as in (\\w)
 ){4}"     // Group close. Match 4 times 
           // As 1st one we have already matched in (\\w) 
```

**更新： -**

如果您只想匹配`5 length`序列，您可以在第 5 次匹配后添加匹配字符的否定：-

```
"(\\w)(?:,\\1){4}(?!,\\1)" 
```

`(?!,\\1)`-> 是否定的前瞻断言。它将匹配 5 个连续的字符，后面没有相同的字符。

**更新： -**

在上面的 Regex 中，我们还需要做一个`\\1`我们不能做的负面回顾。所以，我想出了这个看起来很奇怪的正则表达式。我自己不喜欢，但无论它是否有效，您都可以尝试：-

*未测试*：-

```
"(\\w),(^\\1)(?:,\\2){4}(?!,\\2)" 
```

**解释： -**

```
(       // First Capture Group
  \\w   // Any character, before your required sequence. (e.g. `A` in `A,C,C,C,C,C`)
)       // Group end
,       // comma after `A`

(          // Captured group 2
   ^\\1    // Character other than the one in the first captured group. 
           // Since, We now want sequence of `C` after `A`
)
(?:        // non-capturing group
   ,       // Match comma
   \\2     // match the 2nd capture group character. Which is different from `A`, 
           // and same as the one in group 2, may be `C`

){4}       // Match 4 times

(?!        // Negative look-ahead
    ,
    \\2    // for the 2nd captured group, `C`
) 
```

我不知道这种解释是否最有意义。但是你可以试试。如果它有效，而您无法理解，那么我将尝试解释得更好一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T12:20:42.350

我不明白你尝试了什么，但你不需要转义字母来匹配它们。

我不确定您的要求是什么，但是要找到 5 个重复的字符，您可以使用它：

```
(\\p{L})(?:,\\1){4} 
```

这将找到所有重复 5 次的字母。[在 Regexr 上](http://regexr.com?32okm)查看。

在我使用的 Regexr上，`\w`因为`\p{L}`那里不支持，但它在 Java 中。

`\p{L}`是一个 Unicode 属性，匹配任何语言中的每个字母。

1.  这里的想法是匹配一个字母。这是由`\\p{L}`.

2.  该字母存储在反向引用中，因为 . 周围有括号`(\\p{L})`。

3.  然后是非捕获组`(?:,\\1)`。这与逗号匹配，并且`\\1`是对之前捕获的字母的引用。

4.  该非捕获组重复4次`(?:,\\1){4}`。

==> 结果，此模式匹配 5 个相同的字母，中间有逗号。

这里的问题是，这个表达式将匹配至少 5 个相同的字母。如果它们更多，它也将（部分）匹配。

**更新：**

我看不到直接从正则表达式获得结果的机会。但这是一种间接获取长度的方法：

```
String[] TestInput = { "A,B,C,C,C,C,C", "A,B,C,C,C,C,C,D,E",
        "C,C,C,C,C", "C,C,C,C,C,D,E", "A,B,C,C,C,C", "C,C,C,C",
        "A,B,C,C,C,C,C,C,D,E", "C,C,C,C,C,C,D,E", "C,C,C,C,C,C" };

// Match at least 5 letters in a row
// The letter is in group 2
// The complete found sequence is in group 1
Pattern p = Pattern.compile("((\\p{L})(?:,\\2){4,})");

for (String t : TestInput) {
    Matcher m = p.matcher(t);
        if (m.find()) {

            // Get the length of the found sequence, after the commas has
            // been removed
            int letterLength = m.group(1).toString().replace(",", "")
                    .length();
            // Check your condition of exactly 5 equal letters
            if (letterLength == 5) {
                System.out.println(t + " ==> " + true);
            } else {
                System.out.println(t + " ==> " + false);
            }
        }else {
            System.out.println(t + " ==> " + false);
        }
} 
```

输出：

> A,B,C,C,C,C,C ==> 真
> A,B,C,C,C,C,C,D,E ==> 真
> C,C,C,C,C ==>真
> C,C,C,C,C,D,E ==> 真
> A,B,C,C,C,C ==> 假
> C,C,C,C ==> 假
> A,B,C, C,C,C,C,C,D,E ==> 错误
> C,C,C,C,C,C,D,E ==> 错误
> C,C,C,C,C,C ==>错误的

# php - 我在哪里可以获得 Eclipse Indigo 的 PHP 语法工具提示帮助插件？

> ID：13307925
> 
> 赞同：0
> 
> 时间：2012-11-09T12:16:31.527
> 
> 标签：php, eclipse, plugins, eclipse-plugin, eclipse-indigo

我使用 Eclipse Indigo 进行开发，因为我们使用 SVN 来同步我们的文件。我希望能够在键入 PHP 函数时获得语法的工具提示。那么我应该添加什么插件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:23:45.207

在 Eclipse 菜单中：帮助 > 安装新软件

在**使用中**选择“Indigo (http://download.eclipse.org/releases/indigo)”。

在列表中，查找“Programming Languages > PHP Development Tools (PDT) SDK Feature”或输入过滤文本“php”。

选择它并单击下一步安装它，您将获得 PHP 透视图和帮助语法。

# excel - 忽略重复并在 Excel 中创建新的唯一值列表

> ID：13307927
> 
> 赞同：77
> 
> 时间：2012-11-09T12:16:41.150
> 
> 标签：excel, excel-formula, excel-2010

我有一列经常显示为重复值的值。我需要根据第一列创建一个具有唯一值的新列，如下所示：

```
Column A   Column B  
a          a
a          b
b          c
c
c 
```

这个 B 列实际上需要出现在同一个工作簿中的不同工作表上，所以我认为它需要使用`sheet2!A1`样式格式。

我对数据/过滤器菜单选项没有任何运气，因为这似乎只适用于命令。每当在 A 列中输入新值时，我都需要 B 列自动更新。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-24T09:20:08.923

托特罗的回答是正确的。该链接也很有帮助。

基本上你需要的公式是：

```
B2=INDEX($A$2:$A$20, MATCH(0, COUNTIF($B$1:B1, $A$2:$A$20), 0)) 
```

然后按`ctrl`+ `shift`+ `enter`（否则使用数组公式将不起作用）。

这里要记住两件重要的事情：完整的列表在单元格中`A2:A20`，然后这个公式必须粘贴到单元格中`B2`（不是`B1`因为这会给你循环引用）。其次，这是一个数组公式，所以你需要按`ctrl`++`shift`否则`enter`它将无法正常工作。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-09T12:28:45.653

这里有一个很好的指南来说明如何做到这[一点](http://www.get-digital-help.com/2009/03/30/how-to-extract-a-unique-list-and-the-duplicates-in-excel-from-one-column/)。

基本上类似于：

```
=INDEX(Sheet1!$A$1:$A$20, MATCH(0, COUNTIF($B$1:B1,Sheet!$A$1:$A$20), 0)) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-10-13T13:23:43.180

在我的情况下，excel在使用公式时被冻结

> B2=INDEX($A$2:$A$20, MATCH(0, COUNTIF($B$1:B1, $A$2:$A$20), 0))

因为有很多行（10000）。所以我以另一种方式做了，如下所示。

我已将原始列表复制到第二列，然后使用 Excel 的“删除重复项”功能，我可以找到唯一值列表。

复制自 Microsoft Office 网站：

> ```
> Select all the rows, including the column headers, in the list 
> ```
> 
> 你想过滤。
> 
> 单击区域左上角的单元格，然后拖动到右下角的单元格。
> 
> ```
> On the Data menu, point to Filter, and then click Advanced Filter.
> In the Advanced Filter dialog box, click Filter the list, in place.
> Select the Unique records only check box, and then click OK. 
> ```
> 
> 显示过滤的列表并隐藏重复的行。
> 
> ```
> On the Edit menu, click Office Clipboard. 
> ```
> 
> 将显示剪贴板任务窗格。
> 
> ```
> Make sure the filtered list is still selected, and then click Copy Copy button. 
> ```
> 
> 过滤后的列表以边界轮廓突出显示，所选内容显示为剪贴板顶部的 > > 项目。
> 
> ```
> On the Data menu, point to Filter, and then click Show All. 
> ```
> 
> 重新显示原始列表。
> 
> ```
> Press the DELETE key. 
> ```
> 
> 原始列表被删除。
> 
> ```
> In the Clipboard, click on the filtered list item. 
> ```
> 
> 过滤后的列表显示在与原始列表相同的位置。

来源：Microsoft Office 网站（链接已删除，导致死机）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-09T12:45:32.687

在***sorted column 上***，你也可以试试这个想法：

```
B2=A2
B3=IFERROR(INDEX(A:A,MATCH(B2,A:A,1)+1),"") 
```

B3可以粘贴下来。在最后一个唯一匹配之后，结果为 0。如果这是不需要的，请放置一些 IF 语句以排除它。

**编辑：**

比 IF 语句更容易，至少对于文本值：

```
B3=IFERROR(T(INDEX(A:A,MATCH(B2,A:A,1)+1)),"") 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-08-28T21:52:27.997

从列中删除重复项

1.  对 A A->Z 列中的值进行排序
2.  选择 B 列
3.  在 B 列仍处于选中状态时，在公式输入框中，输入

    ```
    =IF(TRIM(A1)=TRIM(A2),"",TRIM(A1)) 
    ```

4.  在 B 列仍处于选中状态时，选择 Edit -> Fill -> Down（在较新的版本中，只需选择单元格 B1 并拉下外框以在列中一直向下展开）

***注意***：如果 B 列在另一张纸上，您可以使用 Sheet1!A1 和 Sheet1!A2。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-09T21:56:21.560

在包含列表的工作表的工作表模块中：

```
Private Sub Worksheet_Change(ByVal Target As Range)

    Dim rngDest As Range

    If Not Intersect(Target, Me.Columns(1)) Is Nothing Then

        Set rngDest = ThisWorkbook.Sheets("Sheet2").Range("A1")

        Me.Range(Me.Range("A2"), Me.Cells(Rows.Count, 1).End(xlUp)).AdvancedFilter _
            Action:=xlFilterCopy, CopyToRange:=rngDest, Unique:=True

    End If

End Sub 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-07T08:23:46.483

我有一个 A2:A8 范围内的颜色名称列表，在 BI 列中想要提取一个不同的颜色名称列表。

请按照以下给定步骤操作：

*   选择单元格 B2；编写公式以从列表中检索唯一值。
*   `=IF(COUNTIF(A$2:A2,A2)=1,A2,””)`
*   按下`Enter`键盘。
*   该函数将返回第一种颜色的名称。
*   要返回其余单元格的值，请向下复制相同的公式。要在 B3:B8 范围内复制公式，请按`CTRL+C`键盘上的键复制单元格 B2 中的公式，然后按 键粘贴到 B3:B8 范围内`CTRL+V`。
*   在这里，您可以看到我们拥有唯一颜色名称列表的输出。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-09T11:29:41.490

```
=SORT(UNIQUE(A:A)) 
```

如果您想在列中列出唯一值，则上述公式效果最佳。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-22T11:48:18.963

因此，对于此任务，首先按从 A 到 Z 或 Z 到 A 的顺序对数据进行排序，然后您可以使用一个简单的公式，如下所述：

```
=IF(A2=A3, "Duplicate", "Not Duplicate") 
```

上面的公式表明，如果 A2 列的数据（A 是列，2 是行号）与 A3 相似（A 是列，3 是行号），那么它将打印 Duplicate，否则将打印 Not Duplicate。

让我们考虑一个示例，A 列包含电子邮件地址，其中一些是重复的，因此在第 2 列中，我使用了上述公式，结果显示我有 2 个重复的单元格，其中一个是第 2 行和第 6 行。

一个你得到重复的数据只是把过滤器放在你的工作表上，只显示重复的数据并删除所有不必要的数据。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-14T00:06:54.783

老实说，我按照这些示例进行了发球，但它们根本不起作用。在毫无意义地试图让 Excel 工作之后，我最终做的只是将我的列的全部内容复制到 NotePad++，我能够在几分钟内找到一个简单的解决方案。看看这个： [Removing duplicate rows in Notepad++](https://stackoverflow.com/questions/3958350/removing-duplicate-rows-in-notepad)

编辑：以下是如何在 TextFX 中执行此操作的简要概述：

插件 -> 插件管理器 -> 显示插件管理器 -> 可用选项卡 -> TextFX -> 安装

在 NotePad++ 中安装 TextFX 后，选择所有要从中删除重复的文本，然后确保检查：TextFX -> TextFX Tools -> Sort output only UNIQUE lines

然后单击“排序行区分大小写”或“排序行不区分大小写”，它将执行唯一排序。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-21T09:40:29.480

[在这里](https://www.extendoffice.com/documents/excel/4032-excel-dynamic-list-of-unique-values.html)找到上面提到的带有错误控制的公式

```
=IFERROR(INDEX($B$2:$B$9, MATCH(0,COUNTIF($D$1:D1, $B$2:$B$9), 0)),"") 
```

其中：（B2:B9 是要提取唯一值的列数据，D1 是公式所在的上述单元格）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-05-03T22:37:35.310

您所要做的就是： 转到“数据”选项卡 在“排序和过滤”中选择高级 在操作中选择：如果需要新列表，请复制到另一个位置 - 复制到任何位置 在列表范围内选择您要删除记录的列表。最重要的是检查：只有唯一的记录。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-06-13T19:09:26.037

自 Excel 2016 以来，另一种方法是使用 Power Query。

如何：

*   选择数据（包括字段名称），
*   使用菜单`Data`> `From a table or a range`,
*   （Excel会将您的工作表变成Excel表格，非常方便），
*   在 Power Query 编辑器中，右键单击 ColumnA（列标题），然后`Remove duplicates`，
*   在菜单中，选择`Close and load`，选择你想要的结果，你就完成了，[像这样](https://i.stack.imgur.com/v8gbh.png)。
*   每当您想要更新结果表时，右键单击它并选择`Refresh`。

好处 ：

*   它仅在手动更新时才使用 CPU，这对于长列表非常方便，
*   如果您好奇，这提供了许多其他强大的选项。

缺点 ：

*   它不会即时更新（您必须右键单击并刷新结果表），
*   使用旧版 Excel 的人将无法刷新结果表。

* * *

## 回答 #14

> 赞同：-6
> 
> 时间：2014-12-18T22:08:43.500

现代方法是考虑信息列来自 Web 服务（如 OData 源）的情况。如果您需要从具有列复制值的大量数据中生成过滤器选择字段，请考虑以下代码：

```
var CatalogURL = getweb(currenturl)
                 +"/_api/web/lists/getbytitle('Site%20Inventory%20and%20Assets')/items?$select=Expense_x0020_Type&$orderby=Expense_x0020_Type";

/* the column that is replicated, is ordered by <column_name> */

    OData.read(CatalogURL,
        function(data,request){

            var myhtml ="";
            var myValue ="";

            for(var i = 0; i < data.results.length; i++)
            {
                myValue = data.results[i].Expense_x0020_Type;

                if(i == 0)
                {
                        myhtml += "<option value='"+myValue+"'>"+myValue+"</option>";
                }
                else
                if(myValue != data.results[i-1].Expense_x0020_Type)
                {
                        myhtml += "<option value='"+myValue+"'>"+myValue+"</option>";

                }
                else
                {

                }

            }

            $("#mySelect1").append(myhtml);

        }); 
```

# android - 线程中不支持的操作异常

> ID：13307931
> 
> 赞同：0
> 
> 时间：2012-11-09T12:16:53.270
> 
> 标签：android, multithreading

我已经为某个进程创建了一个线程，并且我正在使用 Progress Dialog 同时运行这个线程。进程完成后，进度对话框将关闭。直到这没有问题，但是当用户按下手机的后退按钮两次时，活动将被破坏，我的进程应该停止。所以我已经停止了 onDestroy() 中的线程。但是应用程序在我的代码中崩溃`mt.stop()`并且错误日志如下所示。请给我任何解决方案，如果可能的话，我想要这背后的原因。使用标志，进程将仅在每次迭代开始时检查是否停止。我想显着地停止进程。

代码

```
Button b;
ProgressDialog pd = null;
MyThread mt;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    b = (Button) findViewById(R.id.btn_start);
    b.setOnClickListener(this);
}

public void onClick(View v) {
    pd = ProgressDialog.show(this, "one", "two", true, true);
    mt = new MyThread();
    mt.start();
}

class MyThread extends Thread {
    @Override
    public void run() {
        // assume this loop is my process.
        for (int i = 0; i < 10; i++) {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Log.v("log_tag", "" + i);
        }
        Log.v("log_tag", "process COmplited");
        pd.dismiss();
        super.run();
    }
}

@Override
protected void onDestroy() {
    Log.v("log_tag", "OnDestroy");
    pd.dismiss();
    mt.stop();
    super.onDestroy();
} 
```

日志猫错误；

```
11-09 17:26:45.313: E/global(594): Deprecated Thread methods are not supported.
11-09 17:26:45.313: E/global(594): java.lang.UnsupportedOperationException
11-09 17:26:45.313: E/global(594):  at java.lang.VMThread.stop(VMThread.java:85)
11-09 17:26:45.313: E/global(594):  at java.lang.Thread.stop(Thread.java:1379)
11-09 17:26:45.313: E/global(594):  at java.lang.Thread.stop(Thread.java:1344)
11-09 17:26:45.313: E/global(594):  at com.example.threaddemo.MainActivity.onDestroy(MainActivity.java:53)
11-09 17:26:45.313: E/global(594):  at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3642)
11-09 17:26:45.313: E/global(594):  at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3673)
11-09 17:26:45.313: E/global(594):  at android.app.ActivityThread.access$2900(ActivityThread.java:125)
11-09 17:26:45.313: E/global(594):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)
11-09 17:26:45.313: E/global(594):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 17:26:45.313: E/global(594):  at android.os.Looper.loop(Looper.java:123)
11-09 17:26:45.313: E/global(594):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-09 17:26:45.313: E/global(594):  at java.lang.reflect.Method.invokeNative(Native Method)
11-09 17:26:45.313: E/global(594):  at java.lang.reflect.Method.invoke(Method.java:521)
11-09 17:26:45.313: E/global(594):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-09 17:26:45.313: E/global(594):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-09 17:26:45.313: E/global(594):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T05:10:14.320

请参考我的解决方案： [android kill specific thread on action bar event](https://stackoverflow.com/questions/13311198/android-kill-specific-thread-on-action-bar-event)

使用 TimerTask 代替线程的解决方案可以更好、更优化地为您服务。

即使取消也会起作用:)

PS：它也有信息为什么`stop`不适合你。

# xproc - 转换输出非 XML 文档

> ID：13307936
> 
> 赞同：4
> 
> 时间：2012-11-09T12:17:09.993
> 
> 标签：xproc

我只想将一个输入文档（它只是一个文件引用列表）转换为几个输出文档。

这有效：

```
 <p:xslt name="MainTransformation1-b">
        <p:input port="source">
            <p:pipe step="CI" port="result"/>
        </p:input>
        <p:input port="stylesheet">
            <p:document href="Transform.xsl"/>
        </p:input>
        <p:with-param name="ProjectName" select="$Name"/>
    </p:xslt>

    <p:sink/>

    <p:for-each>
        <p:iteration-source>
            <p:pipe step="MainTransformation1-b" port="secondary"/>
        </p:iteration-source>
        <p:store method="text" media-type="text/text">
            <p:with-option name="href" select="p:base-uri()"/>
        </p:store>
    </p:for-each> 
```

XSL：

```
<xsl:template match="/">
    <xsl:for-each select="//p">
        <xsl:result-document href="{'tmp', position(), '.xml'}">
            <xsl:apply-templates/>
        </xsl:result-document>
    </xsl:for-each>
</xsl:template> 
```

问题：输出文档不包含根元素 - 我需要输出框架，稍后在此过程中创建框架文件并包含所有输出文档。

错误信息：

09.11.2012 13:06:27 com.xmlcalabash.util.DefaultXProcMessageListener 错误 SCHWERWIEGEND: err:XD0001:XD0001 09.11.2012 13:06:27 com.xmlcalabash.drivers.Main 错误 SCHWERWIEGEND：**如果非XML 资源在步骤输出中产生或在步骤输入中到达。**

当然它不是 XML - 我试图代表 @method (method=text) 修复它，但它没有奏效。

有任何想法吗？我搜索了适用的解决方案，但我只找到一个条目说这在此刻是不可能的......希望不是

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T12:31:14.647

p:store 的输入必须是 XML。将转换的文本输出包装在包装元素中，并对其应用 method=text，包装元素将被自动忽略，因此您将获得文本/纯文件..

！

# c# - 使用 C# 网站如何让用户在某个位置的图像上放置一个箭头，然后保存图像

> ID：13307943
> 
> 赞同：0
> 
> 时间：2012-11-09T12:17:49.033
> 
> 标签：c#, image

现在我们正在使用 C# 在网站上上传图片，效果很好。

我现在有一个请求，允许用户在图像的特定部分中放置一个箭头（覆盖）以突出显示图像的一部分。

我们已经在文件上传时向图像添加了文本，但文本总是在同一个位置，但我们希望用户将箭头放在他们想要的任何位置。这将是 POST 上传。IE用户上传图片，我们保存，另一个用户打开图片，这时我们要允许他们添加箭头，然后重新保存图片。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:27:01.123

您需要在客户端使用 javascript（或 jquery）来找出箭头所在的位置。比如说，你得到了 x-pos=100, y-pos=50，然后将这些值传递给在相同位置覆盖该图像的服务器方法。有像 c# 类这样的位图，它有许多处理图像的方法。您应该检查 msdn。不幸的是，我无法为您编写所有代码。但是，你明白了。你不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:48:58.663

不完整，您有 ASP.NET 网站或使用 Silverlight 的网站吗？第一种情况，需要使用客户端技术，如javascript、Jquery（如前所述）Flash、silverlight等，有很多选择，但操作无法实现为服务器端操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:34:52.077

你可以使用`document.elementFromPoint`方法。
使用 jQuery

```
jQuery(document.elementFromPoint(x, y)).click(); 
```

这也可以帮助您完成示例。
[如何获取鼠标单击画布元素的坐标？](https://stackoverflow.com/questions/55677/how-do-i-get-the-coordinates-of-a-mouse-click-on-a-canvas-element)

# actionscript - 如果计时器上的语句不起作用

> ID：13307944
> 
> 赞同：0
> 
> 时间：2012-11-09T12:17:51.467
> 
> 标签：actionscript, if-statement, timer

我`if`创建的声明有问题。不明白为什么它不起作用，所以希望一些新鲜的眼睛可能会有所帮助！

我有一个计时器：

```
var delayTimer:Timer = new Timer(9000,1); 
```

和另一个框架上的一个功能

```
delayTimer.addEventListener(TimerEvent.TIMER_COMPLETE, timesUp);
function timesUp(evt:TimerEvent):void
{
   if (delayTimer.currentCount == 9)
   {
      trace.("which it does")
      incorrect.stop();
      timesup.play();
   }
   else
   {
      incorrect.play();
      timesup.stop();
   }
} 
```

我的示踪剂似乎没有增加，所以很明显我的功能出了点问题。`incorrect`并且`timesup`都是我需要在计时器 = 9 时播放的影片剪辑。因此，如果计时器用完，它将播放影片剪辑`times up`而不是`incorrect`.

我还有其他一些使用相同结构但有效的 if else 语句，所以我对此感到有些困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:27:01.193

# apache - 使用 Apache Shiro 和 Sesame 进行用户登录

> ID：13307945
> 
> 赞同：0
> 
> 时间：2012-11-09T12:17:57.893
> 
> 标签：apache, login, shiro, sesame

我有一个芝麻三重商店，我在其中存储用户帐户，并且正在构建一个带有登录表单的 Java Web 应用程序。我想使用 Apache Shiro 来做到这一点。

有谁知道如何使用 Shiro 和 Sesame 对用户进行身份验证？

谢谢你。-安东尼奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:08:35.773

您将需要一个自定义[Shiro Realm](http://shiro.apache.org/realm.html)才能使用 Sesame 作为底层数据库。由于 Sesame 目前不提供这样的 Realm 实现，因此您必须自己实现。我希望您可以通过创建[AuthenticatingRealm](http://shiro.apache.org/static/current/apidocs/org/apache/shiro/realm/AuthenticatingRealm.html)的 Sesame 特定扩展来做到这一点。

# c# - 获取浏览器中打开的标签页的 URL

> ID：13307946
> 
> 赞同：3
> 
> 时间：2012-11-09T12:18:01.880
> 
> 标签：c#, vb.net, winforms, winapi, desktop-application

我正在做一个项目，我需要获取浏览器中所有打开的选项卡的 URL（例如 Google Chrome、IE、Firefox、...）

有没有办法使用 c# 或 vb.net 来做到这一点？

ps它是一个windows窗体应用程序

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T05:05:31.557

IE：

```
 Dim browser As SHDocVw.InternetExplorer
    Dim myLocalLink As String
    Dim myDoc As mshtml.IHTMLDocument2
    Dim shellWindows As SHDocVw.ShellWindows = New SHDocVw.ShellWindows()
    Dim filename As String

    For Each ie As SHDocVw.InternetExplorer In shellWindows
        filename = System.IO.Path.GetFileNameWithoutExtension(ie.FullName).ToLower()

        If filename = "iexplore" Then
            browser = ie
            myDoc = browser.Document
            myLocalLink = myDoc.url
            MessageBox.Show(myLocalLink)
        End If
    Next 
```

C＃：

```
 SHDocVw.InternetExplorer browser;
        string myLocalLink;
        mshtml.IHTMLDocument2 myDoc;
        SHDocVw.ShellWindows shellWindows = new SHDocVw.ShellWindows();
        string filename;
        foreach (SHDocVw.InternetExplorer ie in shellWindows)
        {
            filename = System.IO.Path.GetFileNameWithoutExtension(ie.FullName).ToLower();
            if ((filename == "iexplore"))
            {
                browser = ie;
                myDoc = browser.Document;
                myLocalLink = myDoc.url;
                MessageBox.Show(myLocalLink);
            } 
```

你需要：

```
microsoft.mshtml 
```

和

```
shdocvw.dll 
```

火狐c#：

```
using NDde.Client; 
```

```
 DdeClient dde = new DdeClient("Firefox", "WWW_GetWindowInfo");
        dde.Connect();
        string url = dde.Request("URL", int.MaxValue);
        dde.Disconnect();
        MessageBox.Show(url); 
```

下载 NDde.2.01.0563 (NDde.dll)

我也对 Chrome 做过：

VB.net：

共享功能：

```
<DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
Private Shared Function FindWindow( _
 ByVal lpClassName As String, _
 ByVal lpWindowName As String) As IntPtr
End Function

<DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
Private Shared Function FindWindowEx(ByVal parentHandle As IntPtr, _
                  ByVal childAfter As IntPtr, _
                  ByVal lclassName As String, _
                  ByVal windowTitle As String) As IntPtr
End Function

<DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
Private Shared Function SendMessage(ByVal hWnd As IntPtr, ByVal Msg As UInteger, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As IntPtr
End Function 
```

```
 Dim h As IntPtr
    For Each p As Process In Process.GetProcessesByName("chrome")
        h = FindWindow("Chrome_WidgetWin_1", p.MainWindowTitle)
        Exit For
    Next
    Dim urlH As IntPtr
    urlH = FindWindowEx(h, 0, "Chrome_OmniboxView", Nothing)
    Dim urlHH As IntPtr = Marshal.AllocHGlobal(100)
    Dim NumText As Integer = SendMessage(urlH, &HD, 50, urlHH)
    Dim url As String = Marshal.PtrToStringUni(urlHH)
    MsgBox(url) 
```

# blackberry - 静态变量变为零

> ID：13307956
> 
> 赞同：0
> 
> 时间：2012-11-09T12:19:09.693
> 
> 标签：blackberry, java-me, static

我有以下代码：

```
public static int smsCount = 0 ;

public void startListener()
{
    SendListener smsListener;
    smsListener = new SendListener() {

        public boolean sendMessage(Message message) {
            ++smsCount;
            return true;
        }
    };

    SMS.addSendListener(smsListener);

} 
```

当我使用调试器时，我看到 的值`smsCount`正在增加。但是，由于某种原因，当我尝试从课堂外访问它时，它返回零。这段代码有什么问题吗？`sendMessage`每当发送 SMS 时调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:00:46.590

为了扩展 John B 的评论，更具体地说，您是否从不同的运行时（应用程序）上下文访问它？每个运行时上下文都有自己的全局（因此）静态命名空间。要确保对象是全局单例，您应该使用 RuntimeStore。

# wcf - 针对远程 WCF 服务调试 silverlight 应用程序

> ID：13307957
> 
> 赞同：0
> 
> 时间：2012-11-09T12:19:14.263
> 
> 标签：wcf, silverlight, cross-domain

我遇到了一个非常奇怪的问题（至少它很奇怪，因为它过去对我有用）使用 WCF 服务的 Silverlight 应用程序。

当我在 localhost 中同时调试 Silverlight 应用程序和 WCF 时，它运行良好。当我发布这两个项目时，它们运行良好。问题是当我尝试针对已发布的 WCF 调试 Silverlight 应用程序时……它会引发典型的跨域异常。

我保证我已经将 clientaccesspolicy.xml 和 crossdomain.xml 上传到服务器的根路径中。

查看提琴手，它甚至不会在崩溃之前尝试读取 clientaccesspolicy 文件。

你有什么主意吗？？？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:27:06.973

将这些文件放在您的服务文件夹中

**客户端访问策略.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="*">
        <domain uri="*"/>
      </allow-from>
      <grant-to>
        <resource include-subpaths="true" path="/"/>
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

**跨域.xml**

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
  <allow-http-request-headers-from domain="*" headers="*"/>
</cross-domain-policy> 
```

# windows-phone-7 - 我可以在其中绘制文本的遮罩区域？

> ID：13307959
> 
> 赞同：0
> 
> 时间：2012-11-09T12:19:16.440
> 
> 标签：windows-phone-7, xna

我的游戏有在线高分，我将其显示在一个页面中，该页面包含一个顶行，其中包含一个后退按钮和一个标题。页面的其余部分用于排名前 10 的分数。

问题是在横向模式下，屏幕仅包含 10 个元素中的 9 个。所以我实现了拖动，因此用户可以上下拖动列表以查看整个列表。

但是通过向上拖动列表，它的项目将位于后退按钮和标题下方。我可以以某种方式掩盖上面每个项目的列表`y=80`吗？

后退按钮和标题是具有透明背景的 png，因此看起来一点也不好看：-/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:29:55.883

您可以通过 sccisor 矩形裁剪或更改相机视口来实现...

一个。您可以更改视口

```
 GraphicsDevice.Viewport = yourCamera.Viewport;   
 GraphicsDevice.Viewport = new Viewport(yourClippingArea); 
```

湾。您可以使用剪刀矩形...设置启用剪刀测试的光栅化状态...

```
 GraphicsDevice.ScissorRectangle = yourClippingArea;    
 GraphicsDevice.RasterizerState = new RasterizerState( ) { ScissorTestEnabled = true }; 
```

# java - Java 溢出问题

> ID：13307960
> 
> 赞同：3
> 
> 时间：2012-11-09T12:19:27.320
> 
> 标签：java

我编写了以下代码，当我有打印语句和没有它时，它的答案不同。

```
class test
{
    public static void main(String args[])
    {
      int i = Integer.MAX_VALUE;
      int j = Integer.MAX_VALUE-100;
      int count = 0;
      for(; j<=i; j++){
        count++;
        //System.out.println(j); // If we remove comment, answer is different
      }
     System.out.println(count + ", " + j + ", " + (j<=i));        
    }
} 
```

没有打印语句的答案是：

```
101, -2147483648, true 
```

并且带有打印语句是：

```
15588, -2147468161, true 
```

在这两种情况下，最终条件都应该返回`false`，但它会返回`true`。任何人都可以解释这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T12:25:20.257

`j <= Integer.MAX_VALUE`根据定义总是正确的。在这两种情况下，您的循环都不会结束。

如果将此更改为`j < i`，则循环将终止，并且无论打印语句如何，都将返回相同的答案。

**编辑**

使用 Netbeans / Oracle JDK 7u9 测试代码时，循环永远不会按预期结束。但是，有些人报告说他们看到的行为与问题中描述的行为相同。@auselen 指向[这个类似的帖子](https://stackoverflow.com/questions/12793248/for-loop-terminating-early-when-comparing-to-integer-max-value-and-using-system)，它指的是一个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T12:24:31.667

最终的条件是正常的，`true`因为在最后一次迭代之后，`j`将从`Integer.MAX_VALUE`变为`Integer.MIN_VALUE`，因此变得小于`i`。

但是，我不知道为什么放置打印语句会影响变量的值......据我所知，它不应该有任何副作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:55:19.887

我得到的结果和你不太一样。

没有 print 语句，我得到`Integer.MAX_VALUE - 1`and `true`。

循环实际执行`4294967395`次数（更改`count`为 a`long`以查看此内容）：

```
long count = 0; // make this change 
```

输出是：

```
4294967395, 2147483646, true 
```

`4294967395`确切地说，这意味着它会一直`Integer.MAX_VALUE - Integer.MIN_VALUE + 100`迭代每个`int`值，然后再次*返回*`Integer.MAX_VALUE`。

 *从理论上讲，循环永远不应该终止，因为 an 不可能`int`超过`Integer.MAX_VALUE`，但它*确实会*终止。

在这种情况下，计数显示`j`溢出`Integer.MAX_VALUE` *两次*，此时它显然被认为大于`Integer.MAX_VALUE`！？

这是JVM中的错误吗？

* * *

如果 print 语句有条件阻止 40 亿个 println：

```
if (j > Integer.MAX_VALUE - 1)
     System.out.println(count + " " + j); 
```

输出变为：

```
101 2147483647
230627, -2147253122, true 
```

第一行预计在第一次溢出之前，但第二次计数对我来说是个谜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T12:25:28.483

循环在`j`is `<=`to`i`时结束，因此最后`(j <= i)`为真。如果您希望它为假，则必须`j <= i + 1`在 for 循环中进行设置。*

# java - 如何获取 JPanel 中点的颜色？

> ID：13307962
> 
> 赞同：5
> 
> 时间：2012-11-09T12:19:31.693
> 
> 标签：java, swing, graphics, colors, jpanel

通过知道 JPanel 中一个点的坐标，我怎样才能得到它的颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T12:27:58.900

`Graphics2D`在从 a 创建的对象内绘制面板的内容，`BufferedImage`然后检索像素颜色：

```
BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_4BYTE_ABGR);
Graphics2D g2 = image.createGraphics();
_mainPanel.paint(g2);
image.getColorModel().getRGB(pixel);
g2.dispose(); 
```

# android - Android 阻止库读取应用程序图像

> ID：13307965
> 
> 赞同：2
> 
> 时间：2012-11-09T12:20:09.487
> 
> 标签：android, image, gallery

我的应用程序正在使用应用程序使用的图像填充 SD 卡。我想阻止画廊以编程方式阅读这些图像。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:22:54.623

`.nomedia`可以将不想被图库扫描的空文件添加到文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:24:24.707

如果您想阻止 Gallery 显示应用文件夹中的图像，您可以在该文件夹中放置一个名为`.nomedia`的文件。

来源：[https ://stackoverflow.com/a/6713863/450534](https://stackoverflow.com/a/6713863/450534)

# python - 如何使用 psycopg2 查询 postgres-db 视图？

> ID：13307969
> 
> 赞同：2
> 
> 时间：2012-11-09T12:20:27.653
> 
> 标签：python, postgresql, psycopg2

我已经开始`psycopg2`运行，我可以成功查询我的数据库的表。这是查询表的工作示例`my_table`：

```
import psycopg2
try:
  conn_string="dbname='my_dbname' user='user' host='localhost' password='password'"
  print "Connecting to database\n->%s" % (conn_string)

  conn = psycopg2.connect(conn_string)
  print "connection succeeded"
except:
  print "no connection to db"

cur = conn.cursor()

try:
  cur.execute(""" SELECT *  from my_table; """)

  records = cur.fetchall()
  cur.close()

except:
  print "Query not possible" 
```

问题：如何`my_view`在同一个数据库中查询视图，让它被调用`my_dbname`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T12:21:31.153

与查询表的方式相同。从某种角度`SELECT`来看， a`VIEW`与 a 完全相同`TABLE`：

```
cur.execute("SELECT * from my_view") 
```

请注意，您通常*不想*使用黑色`except:`。如果必须，捕获特定异常，但通常最好不要捕获异常*，*而不是像这里所做的那样阻止所有关于错误的反馈。

# c# - 将 DependencyProperty 转发到包含在用户控件中的控件

> ID：13307970
> 
> 赞同：3
> 
> 时间：2012-11-09T12:20:30.090
> 
> 标签：c#, wpf, xaml, user-controls, wpf-controls

我正在尝试制作一个用户控件，`DependencyProperties`其中有一些转发给用户控件中的子控件。经过几次尝试，我得到了这个工作。为测试做了一个小例子。

在示例中，我有一个名为的用户控件，`Ctrl`它只包含 a`TextBox`并公开`Text`. 此控件用于包含绑定到同一属性的`TextBox`a`TextBox`和我的自定义的窗口中。`Ctrl`

### 用户控制

XAML

```
<UserControl x:Class="trying.Ctrl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    DataContext="{Binding RelativeSource={RelativeSource self}}"
    Height="Auto" Width="Auto">
    <TextBox Text="{Binding MyText}" />
</UserControl> 
```

背后的代码

```
using System.Windows;
using System.Windows.Controls;

namespace trying
{
    public partial class Ctrl : UserControl
    {
        public static readonly DependencyProperty MyTextProperty = DependencyProperty.Register(
            "MyText",
            typeof( string ),
            typeof( UserControl ),
            new FrameworkPropertyMetadata( default(string), FrameworkPropertyMetadataOptions.BindsTwoWayByDefault));
        public string MyText
        {
            get { return (string)GetValue( MyTextProperty ); }
            set { SetValue( MyTextProperty, value ); }
        }

        public Ctrl()
        {
            InitializeComponent();
        }
    }
} 
```

### 窗户

XAML

```
<Window x:Class="trying.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cc="clr-namespace:trying"
    DataContext="{Binding RelativeSource={RelativeSource self}}"
    Title="Window1" Height="300" Width="300">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <TextBox Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Center" Text="{Binding DisplayText}" />
        <cc:Ctrl Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center" MyText="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=DisplayText}" />
    </Grid>
</Window> 
```

后面的代码

```
using System.Windows;
using System.ComponentModel;

namespace trying
{
    public partial class Window1 : Window, INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        protected void NotifyPropertyChanged( string propertyName )
        {
            if( PropertyChanged != null )
                PropertyChanged( this, new PropertyChangedEventArgs( propertyName ) );
        }

        private string m_displayText = "asdf";
        public string DisplayText
        {
            get { return m_displayText; }
            set
            {
                m_displayText = value;
                NotifyPropertyChanged( "DisplayText" );
            }
        }

        public Window1()
        {
            InitializeComponent();
        }
    }
} 
```

### 问题

我如何发布它的工作代码。我现在的问题是：我做错了什么，我必须使用绑定

```
 MyText="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}} 
```

绑定`MyText`属性的时候`Ctrl`，能不能像我绑定原来的时候那样只用简单的绑定`TextBox`？

如果我不以这种方式绑定，它将不起作用，我会收到警告

```
 System.Windows.Data Error: 39 : BindingExpression path error: 'DisplayText' property
  not found on 'object' ''Ctrl' (Name='')'. BindingExpression:Path=DisplayText; 
  DataItem='Ctrl' (Name=''); target element is 'Ctrl' (Name=''); target property
  is 'MyText' (type 'String') 
```

我有什么需要改变原来的绑定是可能的`TextBox`？

在执行期间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:27:06.767

`UserControl`'s指向自身，因此控件实例上的`DataContext`任何绑定都将查看`Ctrl`实例而不是继承的`DataContext`.

尝试将`DataContext`树设置得更远：

```
<UserControl 
   x:Class="trying.Ctrl" x:Name="root"
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   Height="Auto" Width="Auto"
>
   <TextBox 
      DataContext="{Binding ElementName=root}"
      Text="{Binding MyText}" 
   />
</UserControl> 
```

# magento - 需要复杂的 Magento 多站点和多货币解决方案

> ID：13307976
> 
> 赞同：1
> 
> 时间：2012-11-09T12:20:58.463
> 
> 标签：magento, magento-1.7

我有一个复杂的在线商店，这意味着我们直接向零售客户销售，我们批发到不同国家的商店，我很困惑你如何使用多站点和多货币进行设置。

**产品**

批发商可以在零售客户之前订购产品，因此批发购物者群体只能在他们的批发网站上以他们的货币看到的产品，然后一段时间后，该产品*也*可以在零售店购买。

**批发挑战**

批发商需要以他们的货币收费，并且需要为该货币手动设置价格。这很重要。

因此，例如，如果您是澳大利亚的批发客户，您需要在浏览时看到 AUD 价格，并在您的发票上收取 AUD 费用。此澳元价格**需要**我们手动设置。*由于市场限制*，澳元批发价不能只是从新西兰（我的基础货币）转换而来的货币。

这需要针对多种货币进行 - 新西兰元、澳元、英镑、欧元等。我们也为批发客户提供了一些用户组定价 - 因此以英镑购物的特定客户可能与所有其他客户的价格不同英镑批发客户。这似乎很容易为不同的群体设定一个新的价格。

**零售挑战**

目前，零售客户可以在每日兑换率上看到兑换后的价格，然后在结账时以基础货币付款，并从银行收取兑换费。但在未来，我们希望改变为他们实际以当地货币支付。

关于如何正确设置的任何想法，因为它非常令人困惑。我们已经在 Magento 上经营零售店，而且进展顺利。

我们正在使用社区版 1.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:14:44.830

你懂德语吗？看看我的教程。 [http://www.magecoder.de/mehrere-wahrungen-currencies-in-magento/](http://www.magecoder.de/mehrere-wahrungen-currencies-in-magento/)

# sql - 父子关系中级联软删除的方法

> ID：13307978
> 
> 赞同：3
> 
> 时间：2012-11-09T12:21:08.427
> 
> 标签：sql, sql-server, postgresql, soft-delete

我有一个使用软删除的简单模式（这就是它的设计方式并且无法更改）。有两个表参与架构：`Company (id, is_deleted)`其中当然是表的`Employee (id, company_id, is_deleted)`FK 。规则是：`company_id``Company`

*   如果一个`Company`有`is_deleted = true`，那么所有`Employee`提到的那个公司都应该有`is_deleted = true`。
*   但是即使父母有，`Employee`也可能有。`is_deleted = true``Company``is_deleted = false`

我的两个问题是 a) 如何执行这些约束？b）当a被软删除时，如何最简单地确保`is_deleted = true`级联。`Company`

我添加了标签 postgresql 和 sql server 因为这些是我最感兴趣的数据库。如果其他 rdbms:es 中还有其他解决方案，我也想听听它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T12:34:24.327

严格来说，像这样级联值的唯一方法是使用 ON UPDATE CASCADE。为此*，* “is_deleted”列必须是唯一约束的一部分。

仅此一点并不难。如果 company.id 是您的主键，那么这对列 {id, is_deleted} 也将是唯一的。该对列的唯一约束将允许您通过外键引用进行级联更新。

但这不适用于*您的*情况，因为您需要允许引用值与引用值*不同*。

所以在你的情况下，我认为你有三个选择。

*   触发器
*   存储过程
*   应用代码

在所有这些情况下，您需要注意权限（可能撤销删除权限）以及可以避免您的代码的情况。例如，dbms 命令行界面和 GUI 界面可用于绕过应用程序代码和存储过程中的限制，具体取决于权限。

# iphone - 如何使用 RubyMotion 进行本地化？

> ID：13307980
> 
> 赞同：3
> 
> 时间：2012-11-09T12:21:16.093
> 
> 标签：iphone, ios, ruby, localization, rubymotion

我认为不可能使用[I18n](https://github.com/svenfuchs/i18n)，那么最好的方法是什么？

据我所知，您可以这样使用[Bubblewrap](https://github.com/rubymotion/BubbleWrap)：

```
# Localization (using NSBundle.mainBundle.localizedStringForKey):
BubbleWrap.localized_string(:foo, 'fallback')
=> "fallback" 
```

但是没有关于如何设置翻译键的解释，[只是一个映射](https://github.com/rubymotion/BubbleWrap/blob/master/motion/core.rb#L15)：

```
NSBundle.mainBundle.localizedStringForKey(key, value:value, table:nil) 
```

...所以我不知道该怎么办。

Bubblewrap 还提供了一种`App.current_locale`方法，但这会返回一个据我所知似乎无法使用的对象。

**那么，如何本地化我的 RubyMotion 应用程序，或者至少获取用户的语言环境来创建我自己的本地化系统。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:59:00.710

RubyMotion 使用 CocoaTouch API。您可以查看有关本地化的苹果文档[https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/LoadingResources/Strings/Strings.html](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/LoadingResources/Strings/Strings.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-03T18:32:02.600

使用它的方法在[colinta 的博](http://colinta.com/thoughts/rubymotion_i18n.html)文中得到了很好的解释。

[chsh 的 GitHub gist](https://gist.github.com/chsh/2651921)也提供了一个合理的示例。

但要详细回答：

使用内容创建`resources/en.lproj/Localizable.strings`：

```
/* This is a sample greeting for my app */
"GREETING" = "Hello World!"; 
```

（对于其他语言也是如此：`cs.lproj`, `de.lproj`, ...）。

然后您可以使用[sugarcube 的本地化](https://github.com/rubymotion/sugarcube#localized)支持：`"HELLO"._`这将导致`"Hello World!"`for `en`locale 和任何缺少`GREETING`相应文件的locale。`lproj`您可以在上面链接的 Sugarcube 文档中找到更多详细信息。

您很可能还可以使用[BubbleWrap 的本地化字符串](https://github.com/rubymotion/BubbleWrap#misc)支持：`BW.localized_string("GREETING", "fallback")`。不过，我不能保证它，因为我自己没有测试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-23T15:07:09.290

I18n 现在可以通过这个包装器 gem 用于 Rubymotion：[motion-i18n](https://github.com/tkadauke/motion-i18n)。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-05T15:01:13.500

我们刚刚发布了用于 RubyMotion 的[motion-phrase](https://github.com/phrase/motion-phrase) gem，它使用 PhraseApp 实现了[本地化工作流程](https://phraseapp.com)。这是一种完全不同的方法，但有很多优点。

# r - 从 lme(nlme-package) 计算 HPD 间隔

> ID：13307981
> 
> 赞同：0
> 
> 时间：2012-11-09T12:21:18.480
> 
> 标签：r, model, mixed, mcmc

我想知道是否有人知道如何创建 mcmc 采样并计算由包制作的线性混合模型的 HPD`lme`间隔`nlme`。我熟悉使用`lme4`包执行此操作，但我需要来自`nlme`.

# json - 用于解析来自 NSArray 的 JSON 数据的递归函数 - 未返回正确数量的结果

> ID：13307987
> 
> 赞同：0
> 
> 时间：2012-11-09T12:21:45.997
> 
> 标签：json, core-data, recursion, nsarray

我正在尝试将通过 REST 以 JSON 数组格式提供的网上商店中的类别数据解析为 iOS 上的核心数据。在我开始插入核心数据之前，我只是将输出记录到屏幕上并记录结果以检查一切是否正常。

**问题**在我的测试数据集中，我有**152 个**类别，但是我只得到**141**的“最终计数器”输出到日志？

我查看并查看了递归函数并相信它没问题，因此我认为问题出在 findSubcategoriesForCategoryID 函数的某个地方？

任何有关该问题的反馈都将不胜感激，因为这已经让我好几个小时了。

从 Web 服务返回的示例 JSON 数据：

```
Node: {
    categoryID = 259;
    categoryTitle = "Engine Parts";
    parentID = 0;   // Parent ID of 0 indicates a root category
}
Node: {
    categoryID = 300;
    categoryTitle = "Camshafts";
    parentID = 259; // Parent ID indicates this category is a subcategory
}
Node: {
    categoryID = 317;
    categoryTitle = "Kent Camshafts";
    parentID = 300;
} 
```

以下方法是我迄今为止在我的应用程序中使用的方法。

```
/**
 *   Kickstarts parsing operation
 */
- (void)parseCategoriesData:(NSArray *)downloadedData {
    NSMutableDictionary *fakeCategory = [NSMutableDictionary dictionary];
    [fakeCategory setObject:[NSNumber numberWithInt:0] forKey:@"categoryID"];

    int counter = 0;
    [self recursiveFunction:downloadedData parentCategory:fakeCategory counter:&counter];

    NSLog(@"Final counter = %d", counter);
}

/**
 *   Recursive function to traverse the passed NSArray
 */
- (void)recursiveFunction:(NSArray *)array parentCategory:(id)parentCategory counter:(int *)i {    
    NSArray *subCategories = [self findSubcategoriesForCategoryID:[[parentCategory valueForKey:@"categoryID"] intValue] categoryData:array];

    for (id object in subCategories) {
        NSLog(@"Node: %@  depth: %d",[object description], *i);
        *i = *i + 1;
        [self recursiveFunction:array parentCategory:object counter:i];
    }
}

/**
 *   Returns an NSArray of subcategories for the passed categoryID
 */
- (NSArray *)findSubcategoriesForCategoryID:(int)categoryID categoryData:(NSArray *)categoryData {
    NSIndexSet *indexsForFilteredCategories = [categoryData indexesOfObjectsPassingTest:^(id obj, NSUInteger idx, BOOL *stop) {
        return (BOOL)([[obj valueForKey:@"parentID"] intValue] == categoryID);
    }];

    return [categoryData objectsAtIndexes:indexsForFilteredCategories];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:49:14.083

您的递归函数看起来不错，但它相当复杂，因此只有测试才能保证它确实适用于所有特殊情况。

如果我正确理解了您的算法，您将从顶部开始，然后向下查找以当前 ID 作为父 ID 的项目。因此，**您可能有不作为类别 id 存在的父 ID**。

这很容易测试：

```
NSArray *allIDs = [downloadedData objectForKey:@"categoryID"];
NSArray *allParentIDs = [downloadedData objectForKey:@"parentID"];

for (NSNumber *x in allParentIDs) {
   if (x.intValue==0) continue;
   NSArray *allChildren = [allIDs filteredArrayUsingPredicate:
     [NSPredicate predicateWithFormat:@"self = %@", x]];
   if (allChildren.count == 0) {
      NSLog(@"There are no category ids for parent id %d.", x.intValue); 
   }      
} 
```

# c# - 更改 FileUpload UserControl 的语言设置

> ID：13307990
> 
> 赞同：0
> 
> 时间：2012-11-09T12:22:08.397
> 
> 标签：c#, internationalization, webusercontrol

如何更改 FileUpload UserControl 的语言设置。

无论我设置哪种语言，按钮都会一直显示“浏览”。

我让网站的其余部分以选定的语言工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:48:14.413

您无法从服务器更改 FileUpload 按钮文本，语言由操作系统设置，为此您需要使用像[uploadify这样的 JS 文件上传器](http://www.uploadify.com/)

# c++ - 使用 new 运算符创建对象导致未解决的外部符号错误 C++ FTGL

> ID：13307993
> 
> 赞同：1
> 
> 时间：2012-11-09T12:22:17.620
> 
> 标签：c++, ftgl

我在我的 Microsoft Visual Studio 2012 C++ 项目中使用 FTGL 库。我终于设法将它正确链接到我的项目，因为我可以使用以下方法正确渲染字体：

```
FTGLPixmapFont font("C:/Windows/Fonts/Arial.ttf");
font.Render("Hello world"); 
```

在我尝试使用运算符创建对象之前，一切似乎都很好`new`：

```
FTGLPixmapFont* font = new FTGLPixmapFont("C:/Windows/Fonts/Arial.ttf"); // This causes error
font->Render("Hello world"); 
```

上面的代码会产生这个错误：

```
AppLayer.obj : error LNK2001: unresolved external symbol "public: virtual float __thiscall FTFont::Advance(unsigned short const *,int,class FTPoint)" (?Advance@FTFont@@UAEMPBGHVFTPoint@@@Z)
1>AppLayer.obj : error LNK2001: unresolved external symbol "public: virtual class FTBBox __thiscall FTFont::BBox(unsigned short const *,int,class FTPoint,class FTPoint)" (?BBox@FTFont@@UAE?AVFTBBox@@PBGHVFTPoint@@1@Z)
1>AppLayer.obj : error LNK2001: unresolved external symbol "public: virtual class FTPoint __thiscall FTFont::Render(unsigned short const *,int,class FTPoint,class FTPoint,int)" (?Render@FTFont@@UAE?AVFTPoint@@PBGHV2@1H@Z) 
```

我完全不知道这可能是什么原因。我真的很感激任何答案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:27:11.083

您似乎忘记链接库或在构建中包含文件。这个类继承了类FTFont。检查您是否正确链接了包含此定义的库。

在视觉上，您可以通过将 .lib 文件添加到项目中来链接列表，就像它是一个 cpp 一样。

如果您从可视化解决方案链接另一个项目，请检查项目的属性是否正确设置了对另一个项目的依赖关系。

最好的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T00:59:45.960

如果将“将 WChar_T 视为内置类型”属性（在属性页中的 C/C++/语言中找到）设置为“是”以用于 FTGL 库的复杂化，而将“否”用于编译您的应用程序使用该库。

编译器使用“WChar_t const*”作为 FTGL 库中的参数类型来准备函数，但是您的程序将寻找“unsigned short *const”，因此不会找到任何具有该签名的函数。

要解决此问题，请更改项目中的“将 WChar_T 视为内置类型”属性，使其与 FTGL 库中的设置相匹配；清理并重新编译它应该可以工作。

# maven - Maven - POM 在 Eclipse 中解决依赖关系，但在部署时不解决

> ID：13307994
> 
> 赞同：1
> 
> 时间：2012-11-09T12:22:24.710
> 
> 标签：maven, nexus

我对解决 Maven 问题还很陌生，需要一些指导。我的项目在 eclipse 中，我正在使用 m2eclipse 插件。当我将我的项目导入到 Eclipse 时，所有依赖项都已解决，并且它的业务照常。但是，当我部署到我的一个共享环境时，由于某些 Spring 组件上的“包 ... 不存在”异常，mvn deploy 失败。我也看到了很多“找不到符号”的问题。

我检查的第一件事是我在本地使用的 Settings.xml 文件与共享环境使用的内容是相同的。

关于还有什么可能导致部署失败的任何建议？顺便说一句，我的 POM 使用 teh repositories 标签来指定一个额外的存储库，但这似乎对失败的部署没有任何影响。

谢谢，

```
org.apache.maven.BuildFailureException: Compilation failure
Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
    at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:516) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:21:44.387

很可能您的依赖项使用了错误的范围，这会导致库不包含在例如输出 war 文件中。

作为第一步，我将确认您的构建通过命令行并可能在此处共享您的 pom 文件。

# html - 为什么不！重要在这里覆盖以前的设置

> ID：13307996
> 
> 赞同：0
> 
> 时间：2012-11-09T12:22:31.563
> 
> 标签：html, css

我有一段：

```
<body>
<div id="attachment_839" class="wp-caption aligncenter" style="width: 462px">
<p class="wp-caption-text">Pargraph text which is much wider than 270px</p>
</div>
<body> 
```

并应用样式：

```
body{
    width:270px !important; 
} 
```

问题是：

为什么这一段太宽了？由于`!important`用于以我的方式覆盖以前的设置和样式页面。

为了解决这个问题，我添加了以下代码：

```
.wp-caption-text {
     width: 270px ! important;
} 
```

它已被证明并且有效，但为什么不`!important`覆盖以前的宽度？我该怎么做才能找到可能的答案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T12:29:46.117

没有声明宽度的段落`<p>`占据了父容器的整个宽度（因为默认`auto`）。

在您定义了宽度的情况下 - 它脱离了父级。

[**演示**](http://codepen.io/anon/pen/sxrkq)

如果您`style="width: 462px"`从您的`div`- 它不会再破坏布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:54:42.377

这个问题已经回答了，我只是添加我的观察。

我尝试了有问题的代码，发现段落宽度为 270px，而 div 宽度为 420px。所以没有使用 !important 进行覆盖。

`!imporatant`只能覆盖外部样式，不能覆盖任何内联样式。在这种情况下，我们将 div 的宽度声明为内联样式。所以如果我们在`.wp-caption`类声明和 use中添加宽度`!important`，这不会影响 div 的宽度。

为了验证宽度，我在段落和 div 中添加了边框。下面是定义的样式。

```
<style type="text/css">
body{
    width:270px !important; 
}
.wp-caption-text {
     width: 270px !important;
     border: 1px dotted green;
}
.wp-caption
{
    border: 1px dotted blue;
}
</style> 
```

屏幕截图显示了段落宽度和 div 宽度。 ![在此处输入图像描述](../Images/e46387bd76534facac2c96ce8c441d25.png)

# c# - 使用反射访问对象中结构的字段

> ID：13307998
> 
> 赞同：15
> 
> 时间：2012-11-09T12:22:36.533
> 
> 标签：c#, reflection, typedreference

我正在尝试使用反射（最终在编译时未知）`object`，其中包括`struct`. 我已经做到了，`TypedReference.MakeTypedReference`但我撞到了墙。

这是我的类和结构

```
public class MyObject
{
    public int Id;
    public Money Amount; 
}

public struct Money
{
    public int Vaule;
    public string Code;
} 
```

这就是我如何尝试使用反射在 MyObject 中设置“金额”的“代码”。正如我上面提到的，我正在寻找一个在编译时不知道这些类型的解决方案（这太容易了！）

这是我到目前为止的代码（我使用 [0]、[1] 使代码更简单）

```
var obj = new MyObject() { Id = 1 };
obj.Amount.Vaule = 10;
obj.Amount.Code = "ABC";

FieldInfo[] objFields = obj.GetType().GetFields();
FieldInfo[] moneyFields = objFields[1].GetValue(obj).GetType().GetFields();

List<FieldInfo> fields = new List<FieldInfo>() { objFields[1] };
fields.AddRange( moneyFields );

TypedReference typeRef = TypedReference.MakeTypedReference( 
                           objFields[1].GetValue( obj ), fields.ToArray() );

moneyFields[1].SetValueDirect( typeRef, "XXX" ); 
```

TypedReference.MakeTypedReference 爆炸了；“FieldInfo 与目标类型不匹配。” 同样，如果我只是通过`objFields[1]`. 如果只是通过，`moneyFields`我会得到“TypedReferences 不能被重新定义为原语”。

**为什么？**假设我正在创建随机测试装置并想用随机数据填充类字段:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-09T12:40:34.303

坦率地说，这里没有任何必要`TypedReference`- 只是一个盒装结构应该可以正常工作：

```
 var amountField = obj.GetType().GetField("Amount");
    object money = amountField.GetValue(obj);
    var codeField = money.GetType().GetField("Code");
    codeField.SetValue(money, "XXX");
    amountField.SetValue(obj, money); 
```

然而！我会给你一些建议：

*   公共字段而不是属性通常不是一个好主意；以后经常会咬你
*   可变结构（即可以在创建后更改的结构）*几乎从来都不*是一个好主意，而且会更频繁地咬，咬得更紧
*   将可变结构和公共字段组合起来，使其变得更加复杂，但是以后更改会很成问题

# java - 片段和视图

> ID：13307999
> 
> 赞同：0
> 
> 时间：2012-11-09T12:22:39.643
> 
> 标签：java, android

我的应用程序分为多个片段，每个片段都有自己的布局（.xml 文件）。

当我开始在我的活动方法中可视化第一个片段时`onCreate()`，我使用`setContentView(fragment_first)`. 例如，如何更改`TextView`包含在第二个片段 (fragment_second) 中的 a？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:36:44.170

一般来说， a`Fragment`或任何`Activity`or`View`都应该更新它自己的内部 UI 控件。它更容易，而且它的设计很好。其他类/事件可能会更新`Fragment`数据的状态，但它会处理该状态的显示方式。

编辑以回答评论的问题：

这是在片段中加载内容视图的方法：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflate the layout for this fragment
    view = inflater.inflate(R.layout.pump_info, container, false);
    return view;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:05:05.863

似乎您为活动中的第一个片段设置了 xml 文件。简而言之，你应该做的是创建一个全新的类并让它扩展`android.support.v4.app.Fragment`，也让你的活动扩展 FragmentActivity 而不仅仅是 Activity。

然后在你的`android.support.v4.app.Fragment`类（从现在开始我将调用你的片段）中，你应该重写该`onCreateView(LayoutInflater inflate, ViewGroup container, Bundle savedInstanceState){}`方法，并且在这个方法中你应该像这样写一行： `View view = inflater.inflate(R.layout.the_xml_layout_for_this_fragment, container, false);`它膨胀片段的布局并将它放置在你的活动布局中的适当位置.

在此之后您需要`return view;`，但在您返回此视图之前，您可以`view.findViewById(R.id.id_of_a_view_from_the_xml_layout_file);`找到一个元素并对其进行操作。

您应该为应用程序中需要的每个片段创建这样一个片段类，并让它膨胀它自己的 xml 布局文件。

有关更详细的说明，您可以查看[http://www.youtube.com/watch?v=4BKlST82Dtg](http://www.youtube.com/watch?v=4BKlST82Dtg)或其他视频或书面教程。

编辑：这是一个基本的片段类：

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class MyFrag extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    // inflate the view:
    View view = inflater.inflate(R.layout.myfrag_layout, container, false);

    // manipulate widgets, for example:
    TextView textView = (TextView) view.findViewById(R.id.textView);
    textView.setText("read me!!!");

    // return the view:
    return view;
    }

} 
```

这是育儿活动：

```
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;

public class MyFragmentActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // notice that there is a different layout file for the activity and for
    // the fragment!
    setContentView(R.layout.xml_layout_for_the_activity);

    // to start the fragment and stick it into your activity (not needed if
    // you use ViewPager)
    FragmentManager fragMan = getSupportFragmentManager();
    fragMan.beginTransaction()
        .add(R.id.the_visual_element_that_will_contain_your_fragments_layout, fragMan)
        .commit();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:12:57.490

在您的`onCreateView()`方法中，您应该将稍后需要访问的所有视图分配给片段类中的字段，如下所示，

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    view = inflater.inflate(R.layout.xxx, container, false);

    this.aTextView = (TextView)view.findViewById(R.id.a_text_view);
    this.anImageView = (ImageView)view.findViewById(R.id.an_image_view);
    ...
} 
```

然后，您可以`aTextView`在片段执行的其他地方使用等。