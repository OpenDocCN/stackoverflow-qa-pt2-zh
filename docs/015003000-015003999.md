# StackOverflow 问答 15003000-15003999

# c# - 将sql查询结果添加到类

> ID：15003002
> 
> 赞同：0
> 
> 时间：2013-02-21T13:06:02.670
> 
> 标签：c#, linq

我正在尝试使用 linq to sql 将单行添加到类中。我有一个表（AdressesTable），其中包含一个名为 ID 的键和一个 adress1 和 adress2 列...

我创建了一个类：

```
public class Adresses
{
public int ID { get; set; }
public int adress1 { get; set; }
public int adress2 { get; set; }
} 
```

我创建了一个数据上下文并写了一个查询

```
DBDataContext db = new DBDataContext();

Adresses adr = (from p in db.AdressesTable 
    where p.ID ==1 
    select p).First(); 
```

但它不工作......如何将 sql 查询结果添加到类对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:10:11.373

你需要建立一个`DbContext`这样的：

```
public class MyDbContext : DbContext
{
    public DbSet<Addresses> Addresses { get; set; }
} 
```

然后你可以像这样使用它：

```
var db = new MyDbContext();
var adr = (from p in db.Addresses
    where p.ID == 1
    select p).First(); 
```

# android - 当我得到 LocationManager 时发生异常。（Android）

> ID：15003003
> 
> 赞同：0
> 
> 时间：2013-02-21T13:06:17.147
> 
> 标签：android, locationmanager

我想获取 Android 移动位置。所以我需要得到`LocationManager`，但是发生了异常，我不知道为什么。你能帮助我吗？下面是我的代码。

```
public static String getMobileLocation(Context context) {
    LocationManager lm = (LocationManager) context
            .getSystemService(Context.LOCATION_SERVICE);

    if (null == lm) {
        return "error01";
    }
    lm.setTestProviderEnabled(LocationManager.GPS_PROVIDER, true);
    lm.setTestProviderEnabled(LocationManager.NETWORK_PROVIDER, true);

    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setCostAllowed(true);
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    String provider = lm.getBestProvider(criteria, true);
    if (provider == null || provider.length() == 0) {
        return "error02";
    }

    LocationListener locationListener = new LocationListener() {

        @Override
        public void onStatusChanged(String provider, int status,
                Bundle extras) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
            LocationInfo.location = location;
        }
    };

    lm.requestLocationUpdates(provider, 0, 0, locationListener);

    while (null == location) {
        location = lm.getLastKnownLocation(provider);
    }
    if (null == location) {
        return "error03";
    }
    StringBuilder strBuilder = new StringBuilder();
    strBuilder.append(location.getLatitude());
    strBuilder.append(",");
    strBuilder.append(location.getLongitude());
    String str = strBuilder.toString();
    str = str.trim();
    if (null == str || str.length() == 0) {
        return "error04";
    }

    lm.removeUpdates(locationListener);
    lm.setTestProviderEnabled(LocationManager.GPS_PROVIDER, false);
    lm.setTestProviderEnabled(LocationManager.NETWORK_PROVIDER, false);
    location = null;

    return str;
} 
```

当我得到`LocationManager`. DDMS 日志在这里。引起：java.lang.IllegalArgumentException：在 android.os.Parcel.readException(Parcel.java:1331) 在 android.os.Parcel.readException(Parcel.java:1281) 在 android.location.ILocationManager 提供者“gps”未知$Stub$Proxy.setTestProviderEnabled(ILocationManager.java:1122) 在 android.location.LocationManager.setTestProviderEnabled(LocationManager.java:1140) 在***.record.LocationInfo.getMobileLocation(LocationInfo.java:35) 在****.MainActivity.initLocation(MainActivity.java:45) 在 ** *.MainActivity.onCreate(MainActivity.java:40)*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:56:45.213

**更新：**

`LocationManager.GPS_PROVIDER`不适用于`setTestProviderEnabled()`

它似乎在某种程度上被弃用了。

利用：

```
locationManager.setTestProviderLocation(LocationManager.GPS_PROVIDER, location); 
```*

# jquery - 只循环一次 SlideJS

> ID：15003007
> 
> 赞同：1
> 
> 时间：2013-02-21T13:06:21.107
> 
> 标签：jquery, slider

我正在使用非常简单的[SlidesJS](http://www.slidesjs.com/)，但目前没有自动启动选项，只能播放一次并停止。它当前循环。

我需要它播放一次，然后再次停在第一张幻灯片上。

但是，有一个 animationComplete 函数，所以我想我可以用它来测试完整动画何时完成，它会检查长度（幻灯片的数量），如果它大于数字，那么它会停止滑块。

**jsfiddle：http: [//jsfiddle.net/55Evw/](http://jsfiddle.net/55Evw/)**

这是我到目前为止所拥有的：

```
$(function(){
    $('.slides').slides({
        play: 5000,
        slideSpeed: 1000,
        bigTarget: true,
        generatePagination: false,
        hoverPause: true,
        animationComplete: function(current) { 
            var total = $(".slides_container div").length; 
            if (current >= total) {                 
                clearInterval($('.slides').data('interval')); 
            }
        }
    });
}); 
```

以及我的 HTML 结构的基础知识：

```
 <div class="slides">
        <div class="slides_container">
            <div>
                <img src="http://placehold.it/570x270">
            </div>
            <div>
                <img src="http://placehold.it/570x270">
            </div>
            <div>
                <img src="http://placehold.it/570x270">
            </div>
            <div>
                <img src="http://placehold.it/570x270">
            </div>
        </div>
    </div> 
```

干杯，R

# html - 是否存在图像可能无法正确缩放的情况？

> ID：15003009
> 
> 赞同：0
> 
> 时间：2013-02-21T13:06:25.063
> 
> 标签：html, image

假设我有 < img src="http://www.always-going-to-be-absolute.com/images/thisimage1.jpg" width="some px" /> （只有 .jpg 或 .gif） . 仅指定宽度后，假设没有 CSS 或其他代码影响它，是否存在任何（任何！）图像的高度和宽度可能无法相应缩放或根本无法缩放的情况？我想不出任何情况（研究并没有提出任何情况），但我想通过一些比我更有经验的人来确定。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:09:31.300

不是，没有。但是，请注意，加载正确尺寸的图像会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:12:52.657

如果任何其他 css 代码或其他任何东西都没有影响它，那么我认为应该没有问题。尝试使用正确尺寸的图像。有助于减少加载时间并保持图像质量。试试看，如果你遇到任何缩放或其他问题，你知道去哪里问，对吧？^_^

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:25:23.607

看起来您正在通过`width`. 从HTML 4 规范的[第 13.7 节：](http://www.w3.org/TR/html401/struct/objects.html#visual)

> 所有与视觉对齐和表示有关的 IMG 和 OBJECT 属性都已被弃用，取而代之的是样式表。

我认为您在这里可能遇到的唯一两个问题是：

小图像：如果图像是 10x10px 并被缩放以适应 1000x1000px 的容器，那么很难确定图像应该是什么。

瘦图像：如果您的容器为 1000x1000 像素且图像为 250x25 像素，则缩放图像以适应容器将产生 1000x100 像素的图像。

> 或者，有没有办法至少从 URL.jpg 确定图像的宽度（如果它没有在 html 中指定）而不下载图像？

在前端 JavaScript 中，您可以简单地：

```
img.clientWidth;
img.clientHeight; 
```

在后端，PHP 有一个`getimagesize()`返回高度和宽度的函数。我想其他语言也有类似的功能。

# node.js - 通过 ObjectId 查询 Mongoose Schema

> ID：15003010
> 
> 赞同：4
> 
> 时间：2013-02-21T13:06:26.693
> 
> 标签：node.js, mongoose, objectid

再次需要您的帮助，希望对于这个项目，我在这里所拥有的答案将是最后一个。我已经看到这是一个相当常见的问题，但我已经尝试了另一篇[Stack Overflow 帖子](https://stackoverflow.com/questions/7878557/cant-find-documents-searching-by-objectid-using-mongoose)和[Google Group](https://groups.google.com/forum/?fromgroups=#!topic/mongoose-orm/5H4XyGSyncs)的提示，但这些解决方案对我不起作用。

我的代码有点像：

```
mongoose = require('mongoose');
Schema = mongoose.Schema;
mongoose.connect(MONGO_SERVER);
ObjectId = Schema.ObjectId;

var RacesSchema = new Schema({
    venue_id        : { type: mongoose.Schema.ObjectId, ref: 'Venues' },
    racetype            : String
});
var races = mongoose.model('Races', RacesSchema );

function test() {
    var MyObjectId = require('mongoose').Types.ObjectId;
    queryVenue = new MyObjectId("50e3dcdbf30375180c078f64");

    races.find({venue_id: queryVenue, racetype:'Test'})
    .exec(function(err,data) {
}

test(); 
```

但我没有得到任何结果，我知道有。

提前谢谢了！

**更新**

已最小化上述代码示例，如果我自己查询字符串值，则此测试有效，仅查询 ObjectId 是它失败的地方，并且我知道它存在。

**JSON更新**

这是我正在寻找的：

```
{
    "_id" : ObjectId("50e3dcddf30375180c078f85"),
    "venue_id" : "50e3dcdbf30375180c078f64",
    "racetype" : "A"
} 
```

突然之间，我相信我的答案对我来说已经很清楚了。仅仅是因为venue_id实际上是一个字符串吗？如果是这样，我可以保持我的猫鼬模式不变，并在查找字符串时对查询进行强制转换吗？或者我应该更改这些值的存储方式（来自我开发的单独的.net 应用程序）以作为 ObjectId 插入？

目前对于另一个查询，当前的猫鼬模式和数据库[实际设置]的方式，使用 populate() 可以很好地使用该模型当前设置的方式填充引用表 (venue_id) 的结果，唯一的区别是上面的查询，我没有指定venue_id ...

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T13:52:36.107

是的，问题正在发生，因为`venue_id`模式（ObjectId）中的数据类型与文档（String）中的数据类型不匹配。所以`find`正在寻找 ObjectId 值但没有找到匹配项，因为它是文档中的字符串。

解决这个问题的正确方法是编写一个小程序来`venue_id`将文档中的值更新为 ObjectIds 而不是字符串，然后您的查询将起作用。这也会将这些字段的大小从 24 个字节缩小到 12 个。

# php - MYSQL COUNT HAVING 问题

> ID：15003013
> 
> 赞同：1
> 
> 时间：2013-02-21T13:06:35.737
> 
> 标签：php, mysql, join, count, having

我有 2 个表一个论坛主题表和论坛评论。

我正在尝试获取所有论坛主题的列表，并计算每个主题中有多少评论。

评论表包含每个主题的论坛主题的PK。

我试过了

```
SELECT
  `forum_topics`.`topic_id`,
  `forum_topics`.`topic_name`,
  `forum_topics`.`topic_info`, 
  `forum_topics`.`topic_img`,
  `forum_topics`.`creation_date`,
  `forum_topics`.`is_deleted`
FROM
  `forum_topics`
JOIN
  `forum_comments`
ON
  `forum_comments`.`topic_id` = `forum_topics`.`topic_id`
GROUP BY
  `forum_topics`.`topic_id`
HAVING
  COUNT(`forum_comments`.`comment_id`) >= 0
  AND `forum_topics`.`review_status` = 'reviewed'; 
```

这似乎没有返回任何结果，但也没有错误

希望有人可以帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:16:37.893

试试这个

```
SELECT forum_topics.topic_id, forum_topics.topic_name, forum_topics.topic_info, 
   forum_topics.topic_img, forum_topics.creation_date, forum_topics.is_deleted
FROM forum_topics 
JOIN forum_comments ON forum_comments.topic_id = forum_topics.topic_id 
WHERE forum_topics.review_status = 'reviewed'
GROUP BY forum_topics.topic_id
HAVING COUNT(forum_comments.comment_id) >= 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T13:20:48.553

尝试以下操作：

```
SELECT
  `forum_topics`.`topic_id`,
  `forum_topics`.`topic_name`,
  `forum_topics`.`topic_info`, 
  `forum_topics`.`topic_img`,
  `forum_topics`.`creation_date`,
  `forum_topics`.`is_deleted`,
  `forum_topics`.`review_status`,
  COUNT(`forum_comments`.`comment_id`) count_comments
FROM
  `forum_topics`
LEFT JOIN
  `forum_comments`
ON
  `forum_comments`.`topic_id` = `forum_topics`.`topic_id`
order by case when `forum_topics`.`review_status` = 'reviewed' then 1 else 2 end, 
         count_comments desc 
```

# excel - 使用 excel vba 更改网站上下拉菜单的值

> ID：15003015
> 
> 赞同：3
> 
> 时间：2013-02-21T13:06:38.257
> 
> 标签：excel, vba, internet-explorer, web-scraping, drop-down-menu

我正在编写一个 Excel 宏来填写网站上的表格。我已经编写了很容易填充文本框的代码，并找到了选择单选框的代码，但是我在从下拉菜单中选择信息时遇到了问题。

> **示例“性别”：**
> 
> 组合框有三个选项：
> 
> ```
> Select / Male / Female 
> ```
> 
> 我已经尝试了一些变化：
> 
> ```
> doc.getElementsByName("xs_r_gender").Item(0).Value="Male" 
> ```
> 
> ...但没有运气。

这是网络源代码：

```
<td> <select name="xs_r_gender" id="xs_r_gender">
<option value="" selected>Select</option>
<option value="male">Male</option>
<option value="female">Female</option> </select></td> 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T12:00:25.537

`doc.getElementById("xs_r_gender").selectedindex=1`
似乎可以解决问题。（其中 1 代表男性）

虽然这意味着我需要进行大量查找以确定下拉列表中项目的值。（对于性来说很容易，只有两个选项，但我有一些组合框，最多有 50 个选项）。如果有人知道更快的解决方案，那就太好了。与此同时，我会开始整理一些桌子！！！

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T15:35:33.630

在您的代码中使用它来调用下面的函数。

```
xOffset = SetSelect(IE.Document.all.Item("shipToStateValue"), "Texas")
doc.getElementById("shipToStateValue").selectedindex = xOffset 
```

然后将其用于您的功能

```
Function SetSelect(xComboName, xComboValue) As Integer
    'Finds an option in a combobox and selects it.

    Dim x As Integer

    For x = 0 To xComboName.options.Length - 1
        If xComboName.options(x).Text = xComboValue Then
            xComboName.selectedindex = x
            Exit For
        End If
    Next x

    SetSelect = x

End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T01:10:47.597

假设 doc = ie.document 尝试下面的代码

```
doc.getElementById("xs_r_gender").value = "Male" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-24T11:55:39.047

您可以尝试应用带有属性的标签的 CSS 选择器的[`querySelector`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector)方法：`document``option``value = 'male'`

```
doc.querySelector("option[value='male']").Click 
```

或者

```
doc.querySelector("option[value='male']").Selected = True 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-30T16:02:34.483

谢谢堆栈，为我工作！我操作 IE HTML 组合框下拉列表的解决方案原来是两个部分。

第 1 部分是单击下拉菜单，代码如下：

```
Dim eUOM1 As MSHTML.HTMLHtmlElement
Set eUOM1 = ie.document.getElementsByTagName("input")(27).NextSibling
eUOM1.Focus
eUOM1.Click 
```

第 2 部分是选择并单击该值，如下所示（*实际元素名称已更改）：

```
Dim eUOM2 As MSHTML.HTMLHtmlElement
Set eUOM2 = ie.document.getElementsByName("[*PutNameHere]")(0)
eUOM2.Value = "EA"
eUOM2.Click 
```

以下是参考资料：[refs](https://i.stack.imgur.com/feaXM.jpg)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-16T22:21:47.933

```
Function SetSelect(s, val) As Boolean

'Selects an item (val) from a combobox (s)
'Usage:
'If Not SetSelect(IE.Document.all.Item("tspan"), "Custom") Then
'something went wrong
'Else
'continue...
'End If

Dim x As Integer
Dim r As Boolean
r = False
For x = 0 To s.Options.Length - 1
If s.Options(x).Text = val Then
s.selectedIndex = x
r = True
Exit For
End If
Next x

SetSelect = r
End Function 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-01T19:57:32.360

你可以这样做：

`doc.getElementsByName("xs_r_gender").Item(1).Selected=True`

或者

`doc.getElementById("xs_r_gender").selectedindex = 1`

其中 1 是男性选项（在这两种情况下）。

如果 Dropbox 需要触发某个事件以确认您的选择，则很可能是“onchange”事件。你可以像这样开火：

`doc.getElementById("xs_r_gender").FireEvent("onchange")`

如果您希望能够根据选项的文本选择一个选项，您可以使用 Lansman（[此处](https://stackoverflow.com/a/26063225/961546)）提供的功能。基于相同的答案，如果您想通过它的 value 属性调用选项（而不是文本，您可以将行更改`If xComboName.Options(x).Text = xComboValue Then`为`If xComboName.Options(x).value = xComboValue Then`）。

这应该涵盖所有基础。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-18T17:16:26.353

试试这个代码：

```
doc.getElementById("xs_r_gender").value = "Male"
doc.getElementById("xs_r_gender").FireEvent("onchange") 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-04-10T13:01:14.577

从这里复制到最后一行：

```
Sub Filldata()

Set objShell = CreateObject("Shell.Application")

IE_count = objShell.Windows.Count

For X = 0 To (IE_count - 1)

On Error Resume Next    ' sometimes more web pages are counted than are open

my_url = objShell.Windows(X).document.Location

my_title = objShell.Windows(X).document.Title

   If my_title Like "***Write your page name***" Then

    Set IE = objShell.Windows(X)

        Exit For

    Else

        End If

    Next

With IE.document.forms("***write your form name***")

' Assuming you r picking values from MS Excel Sheet1 cell A2

i=sheet1.range("A2").value 

.all("xs_r_gender").Item(i).Selected = True

End with

End sub 
```

# amazon-web-services - 如何在通过 Amazon SES 发送之前检查电子邮件是否有效

> ID：15003022
> 
> 赞同：9
> 
> 时间：2013-02-21T13:06:56.467
> 
> 标签：amazon-web-services, amazon-ses

我刚开始实施 Amazon Web 服务。我正在实现一个从队列发送批量电子邮件的应用程序。在发送之前，我必须检查电子邮件并从队列中删除未经验证的电子邮件。

我的问题是：亚马逊是否有任何方法可以检查电子邮件是否有效？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-11T08:01:27.977

您可以使用“getIdentityVerificationAttributes”操作来检查电子邮件是否有效。您可以使用它，如下所示：

```
var params = {
    Identities: arr // It is a required field (array of strings).
};
ses.getIdentityVerificationAttributes(params, function(err, data) {
    if(err)
        console.log(err, err.stack); // an error occurred
    else
        console.log(data);           // successful response
}); 
```

响应将是：

```
{ ResponseMetadata: { RequestId: '7debf2356-ddf94-1dsfe5-bdfeb-efsdfb5b653' },
  VerificationAttributes: 
   { 'abc@gmail.com': { VerificationStatus: 'Pending' },
     'xyz@gmail.com': { VerificationStatus: 'Success' } } } 
```

> 如果之前没有为电子邮件验证请求发送电子邮件 ID，则“验证属性”对象中不存在密钥。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T15:34:59.530

从您的问题来看，您是否要：
1-避免向格式错误的电子邮件地址发送消息；或
2-避免向未在您的 AWS 账户下验证的电子邮件地址发送消息。

1 的答案在论坛、SO 等中以不同的形式传播。你要么做简单，即制作一个简短而清晰的正则表达式来验证大约 80% 的情况，或者你使用一个非常复杂的正则表达式（在为了验证完全合规性 - 祝你好运，检查[这个例子](http://ex-parrot.com/~pdw/Mail-RFC822-Address.html)），检查域是否不仅有效而且正常运行，最后但同样重要的是，检查帐户在该域下是否有效。由你决定。我会用一个简单的正则表达式。

2 的答案可在[验证 Amazon SES 中的电子邮件地址中](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/verify-email-addresses.html)找到——Amazon SES API 和开发工具包支持以下操作，因此在任何情况下都应该涵盖您：

> 使用 Amazon SES API
> 
> 您还可以使用 Amazon SES API 管理经过验证的电子邮件地址。可以使用以下操作：
> 
> VerifyEmailIdentity
> ListIdentities
> DeleteIdentity
> GetIdentityVerificationAttributes
> 
> 注意
> 上述 API 操作优于以下较旧的 API 操作，这些操作已于 2012 年 5 月 15 日发布的域验证中弃用。
> 
> 验证
> 电子邮件地址列表验证电子邮件地址删除验证电子邮件
> 地址
> 
> 您可以使用这些 API 操作来编写用于电子邮件地址验证的自定义前端应用程序。有关与电子邮件验证相关的 API 操作的完整描述，请访问 Amazon Simple Email Service API Reference。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-24T10:31:40.870

```
AmazonSimpleEmailServiceClient ses= new AmazonSimpleEmailServiceClient(credentials);

    List lids = ses.listIdentities().getIdentities();
    if (lids.contains(address)) {
        //the address is verified so            
          return true;
    } 
```

# cocos2d-x - CCSpriteBatchNode assert happening when I actually don't use CCSpriteBatchNode

> ID：15003026
> 
> 赞同：1
> 
> 时间：2013-02-21T13:07:31.360
> 
> 标签：cocos2d-x

I'm on my way with porting [SneakyInput Joystick lib](https://github.com/sneakyness/SneakyInput) to Cocos2d-x and I've basically managed to finish this work, but sometimes I'm getting strange CCAssert error:

```
CCNode::void CCSprite::addChild(CCNode *pChild, int zOrder, int tag)
{
 // ...
 CCAssert( pChildSprite, "CCSprite only supports CCSprites as children when using CCSpriteBatchNode"); // SIGABRT here
 // ...
} 
```

On my side calling of CCNode's 'addChild' method happening here:

```
void SneakyButtonSkinnedBase::setButton(SneakyButton *pButton)
{
 if (button) {
    if (button->getParent()) {
        button->getParent()->removeChild(button, true); 
    }
    button->release();
 }

 pButton->retain();
 button = pButton;

 if (pButton) {
     this->addChild(button, 4); /* !!! crash here !!! */
     if (defaultSprite) {
         button->setRadius(defaultSprite->boundingBox().size.width/2);
     }
 }

/* Original iOS code */     

//    if(button){
//      if(button.parent)
//          [button.parent removeChild:button cleanup:YES];
//      [button release];
//  }
//  button = [aButton retain];
//  if(aButton){
//      [self addChild:button z:4];
//      if(defaultSprite)
//          [button setRadius:defaultSprite.contentSize.width/2];
//  }
} 
```

I have absolutely no idea what happening: I have no any references to BatchNode class in my project (and in library too). Moreover, error appearing randomly (~7-8 times from 10 attempts). I wonder - it is a hided logic of framework? It performs some conversion when I'm trying to add several similar sprites to the layer (four navigation buttons)? So why does it work on cocos2-d without errors in this case?

# qt - Set column width for QTableWidget in designtime

> ID：15003027
> 
> 赞同：7
> 
> 时间：2013-02-21T13:07:33.520
> 
> 标签：qt, design-time, qtablewidget

I cannot find any information for the following question: is there a possibility to set width to columns for QTableWidget in **designtime**. When I opened `ui`-file in text editor, I found, that columns are declared like this:

```
<column>
    <property name="text" >
        <string>My column name</string>
    </property>
</column> 
```

I tried to add some properties like `width`, but had no success.

The only question I found at qtcentre.org is [this](http://www.qtcentre.org/threads/29022-QTableWidget-set-column-width-at-designtime). But unfortunaly it is without an answer.

Thank you for advise (even if it would be "You can't").

P.S. Please, do not answer, that I can do it in runtime like this:

```
table->headerView()->resizeSection( columnIdx, width ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:20:36.153

这是不可能的，至少在 Qt Designer 2.5.2 中是不可能的。Designer 仅提供一组有限的定制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-02T08:43:18.407

正如@UmNyobe 所说，设计师不可能，但你可以使用这个技巧至少在视觉上将宽度设置为你想要的。

将此代码添加到对话框的析构函数中，它将打印出每列的列宽，以及树小部件和对话框本身的宽度。

```
SettingsDialog::~SettingsDialog()
{
    QHeaderView *header = ui.treeWidget->header();
    for (int ii = 0; ii < header->count(); ++ii) {
        qDebug() << "column" << ii << ":" << header->sectionSize(ii);
    }
    qDebug() << "tree widget width: " << ui.treeWidget->width() << ", dialog width:" << width();
} 
```

然后你可以运行你的程序，将列宽调整到你想要的，当你关闭对话框时，它会打印出你需要的宽度，如下所示：

```
第 0 列：110
第 1 栏：110
第 2 栏：110
第 3 栏：110
树小部件宽度：440，对话框宽度：543
```

这并不多，但总比在没有视觉反馈的情况下猜测哪些宽度看起来不错要好。

# java - How to deserialize object or array

> ID：15003028
> 
> 赞同：0
> 
> 时间：2013-02-21T13:07:33.627
> 
> 标签：java, gson

How to handle name from children. I'm using `gson`. here is my code and i get illegalstateexception : expected Begin object but was begin array at line .. i don't know how to iterate gson object

```
 Reader reader = jSONParser.getGSONFromUrl(url);
    Root response=null;
    try {
        response = new Gson().fromJson(reader, Root.class);
        person
        = new ArrayList<Person>(Arrays.asList(response.person.clone()));
       children 
       = new ArrayList<Child>(Arrays.asList(response.Children.clone()));
       job
        = response.job;
        } catch (Exception e) {
        // TODO: handle exception
        System.out.println("JSONReader "+e.getMessage());
    }
}

public class Root{  
    @SerializedName("person")       
    Person[] persons;
    @SerializedName("job")
    Job job;
    @SerializedName("children")
    Child[] children; 
```

}

```
 class Child{ 
    int cID;
    List<String>names;
}

{
person:[{}, {}, {}..], 

job:{..},

children:{"cID":"1", "name":{"firstname":"mark"}} 

} 
```

or

```
{

person:[{}, {}, {}..],

job:{..},

children:{"cID":"1", "name":[{"firstname":"mark"}, {"firstname":"jan"}, {"firstname":"tamara"}...]}

} 
```

How to handle name from children. I'm using `gson`. here is my code and i get illegalstateexception : expected Begin object but was begin array at line .. i don't know how to iterate gson object

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:27:40.950

要获取名称，您需要具有以下路径：

`children.name`

如果你有一个名字数组，你应该作为一个数组访问：

`children.name.firstname[number]`

由于您的“名称”是一个对象类型，您可以通过“。”引用它的任何字段。

# size - Gnuplot resize with key below

> ID：15003030
> 
> 赞同：0
> 
> 时间：2013-02-21T13:07:35.047
> 
> 标签：size, gnuplot

When I use gnuplot I make a multiplot with 2x2 Pics. They got all the same lines with something different in there though. Thus I want them just one line title for all of them. When I scale on on below of there it resizes that special plot. Any Idea how to archieve it properly?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:51:57.867

最近向 gnuplot sourceforge 站点添加了一个补丁（[此处为补丁 611](http://sourceforge.net/p/gnuplot/patches/)），该补丁允许在绘图周围添加显式边距，同时保持绘图大小相同。

如果您不想自己[修补和构建 gnuplot](http://gnuplot.sourceforge.net/development/index.html)，您可能不得不[像我之前所做](https://stackoverflow.com/questions/14712251/place-key-below-multiplot-graph-in-gnuplot/14735402#14735402)的那样手动或以半自动方式设置边距。

# python - How to properly write utf8 IPTC metadata with python library IPTCInfo?

> ID：15003031
> 
> 赞同：2
> 
> 时间：2013-02-21T13:07:37.043
> 
> 标签：python, python-imaging-library

After generating a JPEG thumbnail file with [PIL](http://www.pythonware.com/products/pil/), I would like to use [IPTCInfo](https://pypi.python.org/pypi/IPTCInfo/) in order to write IPTC metadata containing french characters with accents. I was thinking about using UTF8 character encoding.

So I tried the following:

```
info = IPTCInfo(input_file, force=True, inp_charset='utf8')
info.data['credit'] = some_unicode_string
info.saveAs(output_file) 
```

and many other variations:

```
info = IPTCInfo(input_file, force=True)
info = IPTCInfo(input_file, force=True, inp_charset='utf8')
info = IPTCInfo(input_file, force=True, inp_charset='utf_8')
info = IPTCInfo(input_file, force=True, inp_charset='utf8', out_charset='utf8')
info = IPTCInfo(input_file, force=True, inp_charset='utf_8', out_charset='utf_8')
... 
```

While reading with IPTCInfo the metadata written by IPTCInfo preserves the unicode python string, I always find weird characters when trying to read with other piece of software: OSX file information, Exiftools, PhotoShop, ViewNX2. So what is the right way to write unicode with IPTCInfo and produce a standard compliant file understandable by all software?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T07:04:31.777

与你的问题有关的东西。来自[IPTC 论坛](https://groups.yahoo.com/neo/groups/iptc-photometadata/conversations/messages/303)

> *   使用 XMP 数据包让事情变得非常简单：UTF-8 是默认字符集。因此，您可以使用甚至混合不同的字符集和脚本。
> *   IPTC IIM 标头有点棘手：它包含一个字段来指示哪个字符集已用于文本字段（对于 IIM 专家：这是数据集 1:90）但不幸的是，该字段尚未被绝大多数人使用成像软件，只有在最近几年，他们中的一些人才使用它。

同样在[IPTC EnvelopeRecord Tags](http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/IPTC.html)中，您会发现：

> `90 CodedCharacterSet string[0,32]!`
> 
> （值以“ESC XY[, ...]”的形式输入。UTF-8 字符编码的转义序列是“ESC % G”，但为方便起见显示为“UTF8”。可以使用任一字符串写的时候，这个标签的值会影响Application和NewsPhoto记录中字符串值的解码，这个标签被标记为“不安全”是为了防止它在组操作中被默认复制，因为目标图像中的现有标签可能会使用不同的编码。从头开始创建新的 IPTC 记录时，如果可能有特殊字符，建议将其设置为“UTF8”）

另请参见[-charset CHARSET](http://owl.phy.queensu.ca/~phil/exiftool/faq.html#Q10)

> 某些元信息格式允许使用纯 ASCII 以外的编码字符集。读取时，大多数已知编码会根据 exiftool "-charset CHARSET" 或 -L 选项转换为外部字符集，或默认转换为 UTF-8。写入时，进行逆变换。或者，可以使用 -E 选项将特殊字符转换为 HTML 字符实体/从 HTML 字符实体转换。

虽然IPTC[的 IPTCInfo](https://bitbucket.org/gthomas/iptcinfo/src/0dc2b4e3de4ec3708002fcd1b23b9aed5df3b237/iptcinfo.py?at=default#cl-561)实现代码中的注释不是很令人鼓舞，但代码中仍然有一个[编码字典](https://bitbucket.org/gthomas/iptcinfo/src/0dc2b4e3de4ec3708002fcd1b23b9aed5df3b237/iptcinfo.py?at=default#cl-930)，提供了更多线索。

在您似乎正确的代码示例中，您正在给予。:)

`info.data['credit'] = some_unicode_string`

你怎么称呼 some_unicode_string？你确定它是一个 utf-8 字符串（！= unicode）。

# extjs - Call function in ExtJs TreeStore

> ID：15003032
> 
> 赞同：0
> 
> 时间：2013-02-21T13:07:45.597
> 
> 标签：extjs, extjs4

How can I access the function getTree in my TreeStore-Instance from the configuration of the DirectProxy? Like this etc. nothing works....

Is somebody able to help me?

```
Ext.define('PM.store.Projects', {
    extend: 'Ext.data.TreeStore',
    model: 'PM.model.Project',
    autoLoad: true,

    /*proxy: {
        type: 'ajax',
        url: 'data/projectTree.json',
        reader: {
            type: 'json',
        },
    },
    root: {
        name: 'Test',
        id: -1,
    }*/

    proxy: {
        type: 'direct',
        directFn: PM.controller.Projects.getTree,
    },

    /*root: {
        name: 'Demo',
        children: [
            {
                name: 'Test',
                leaf: true,
            },
        ],
    },*/

    getTree: function() {
        alert("Test");
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:15:16.680

我想你可以在构造函数中构建你的代理。

```
Ext.define('PM.store.Projects', {
    extend: 'Ext.data.TreeStore',
    model: 'PM.model.Project',
    autoLoad: true,

    constructor: function(config) {
        var me = this;
        Ext.apply(me, config);
        me.proxy = {
            type: 'direct',
            directFn: me.getTree
        };
        me.callParent();
    },

    getTree: function() {
        alert("Test");
    }
}); 
```

# c# - Firmata over nRF24

> ID：15003036
> 
> 赞同：3
> 
> 时间：2013-02-21T13:08:01.213
> 
> 标签：c#, serial-port, arduino, spi, firmata

I'm having some technical problems... I'm trying to use Firmata for arduino but over nrf24, not over Serial interface. I have tested nRF24 communication and it's fine. I have also tested Firmata over Serial and it works.

Base device is simple "serial relay". When it has data available on Serial, read it and send it over [nRF24 network](http://maniacbug.github.com/RF24Network/index.html). If there is data available from network, read it and send it through Serial.

Node device is a bit complex. It has custom [Standard Firmata](https://github.com/arduino/Arduino/tree/master/libraries/Firmata) where I have just added write and read override.

![Diagram](../Images/f5e40d74f7709dec589074bde3344e9d.png)

Read override id handeled in `loop` method in this way:

```
while(Firmata.available())
    Firmata.processInput();

// Handle network data and send it to Firmata process method
while(network.available()) {
    RF24NetworkHeader header;
    uint8_t data;
    network.read(header, &data, sizeof(uint8_t));
    Serial.print(data, DEC); Serial.print(" ");
    Firmata.processInputOverride(data);
    BlinkOnBoard(50);
}

currentMillis = millis(); 
```

Firmata `processInputOverrride` is little changed method of `processInput` where `processInput` reads data directly from `FirmataSerial`, and in this method we pass data down to method from network. This was tested and it should work fine.

Write method is overloaded in a different way. In `Firmata.cpp` I have added an method pointer that can be set to a custom method and used to send data using that custom method. I have then added custom method call after each of the `FirmataSerial.write()` call:

```
Firmata.h
...
size_t (*firmataSerialWriteOverride)(uint8_t);
...

void FirmataClass::printVersion(void) {
  FirmataSerial.write(REPORT_VERSION);
  FirmataSerial.write(FIRMATA_MAJOR_VERSION);
  FirmataSerial.write(FIRMATA_MINOR_VERSION);
  Firmata.firmataSerialWriteOverride(REPORT_VERSION);
  Firmata.firmataSerialWriteOverride(FIRMATA_MAJOR_VERSION);
  Firmata.firmataSerialWriteOverride(FIRMATA_MINOR_VERSION);
} 
```

I have then set the overrided write method to a custom method that just writes byte to network instead of `Serial`.

```
size_t ssignal(uint8_t data) {
    RF24NetworkHeader header(BaseDevice);
    network.write(header, &data, sizeof(uint8_t));
}

void setup() {
...
Firmata.firmataSerialWriteOverride = ssignal;
...
} 
```

Everything seems to be working fine, it's just that some data seems to be inverted or something. I'm using sharpduino (C#) to do some simple digital pin toggle. Here's how output looks like: (< came from BASE, > sent to BASE)

```
> 208 0
> 209 0
...
> 223 0
> 249
< 4 2 249 
and here communication stops... 
```

That last line came inverted. So i tough that I only need to invert received bytes. And it worked for that first command. But then something happens and communication stops again.

```
> 208 0
> 209 0
...
> 223 0
> 249 // Report firmware version request
< 249 2 4
> 240 121 247 // 240 is sysex begin and 247 is systex end
< 240 121
< 101 0 67 0 0 1 69 0 118
< 117 0 115 0
< 0 70 0 105 0 116 0 111 0 109
< 0 97 0
< 0 109
< 116 0 97 0 247
> 240 107 247 
```

So what could be the problem here? It seems that communication with Firmata works but something isn't right...

**-- EDIT --**

I solved that issue. The problem was that I didn't see `Serial.write()` calls in sysex callback. Now that that is solved, I came up to another problem... All stages pass right (I guess) and then I dont get any response from Node when I request pin states

```
...
< f0 6a 7f 7f 7f ... 7f 0 1 2 3 4 5 6 7 8 9 a b c d e f f7 // analog mapping
> f0 6d 0 f7 // sysex request pin 0 state and value
> f0 6d 1 f7 
> f0 6d 2 f7
...
> f0 6d 45 f7
// And I wait for response... 
```

There is no response. Any ideas why would that happen? Node receive all messages correctly and code for handling pin states exist.

# android - Move layout above soft keyboard

> ID：15003042
> 
> 赞同：1
> 
> 时间：2013-02-21T13:08:20.260
> 
> 标签：android, android-layout, android-softkeyboard

I have tried to google my problem but couldn't find anything that could help me, or I just did't understand. I want to move some controls above soft keyboard when it opens, is this possible. To be specific i want to move everything above login_btnLogin, including this button too when soft keyboard pops up.

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/background"
android:padding="10dp" >

<ImageView
    android:id="@+id/login_img_logo"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginBottom="40dp"
    android:layout_marginTop="30dp"
    android:contentDescription="@string/app_name"
    android:scaleType="center"
    android:src="@drawable/logo" >
</ImageView>

<RelativeLayout
    android:id="@+id/login_loginLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/login_img_logo"
    android:background="@drawable/rounded_edittext_with_gray_borderline"
    android:paddingBottom="5dp" >

    <EditText
        android:id="@+id/login_txt_username"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="5dp"
        android:background="@drawable/rounded_edittext_without_borderline"
        android:ems="10"
        android:gravity="center_vertical"
        android:hint="@string/register_username"
        android:inputType="text"
        android:textColor="@android:color/black" >

    </EditText>

    <View
        android:id="@+id/login_separator"
        android:layout_width="wrap_content"
        android:layout_height="1dp"
        android:layout_below="@+id/login_txt_username"
        android:background="@android:color/darker_gray" />

    <EditText
        android:id="@+id/login_txt_password"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/login_txt_username"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignRight="@+id/login_txt_username"
        android:layout_below="@+id/login_separator"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:background="@drawable/rounded_edittext_without_borderline"
        android:gravity="center_vertical"
        android:hint="@string/register_password"
        android:inputType="textPassword"
        android:textColor="@android:color/black" >

    </EditText>
</RelativeLayout>

<LinearLayout
    android:id="@+id/login_buttonslayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/login_loginLayout"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="15dp"
    android:gravity="center_horizontal" >

    <Button
        android:id="@+id/login_btnLogin"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:background="@drawable/button"
        android:gravity="center"
        android:text="@string/login"
        android:textColor="#000000"
        android:textSize="20sp"
        android:textStyle="bold" 
        />

</LinearLayout>

<RelativeLayout
    android:id="@+id/login_bottom_layout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/login_buttonslayout"
    android:layout_marginBottom="10dp"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/login_txt_forgot_password"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="10dp"
        android:gravity="center_horizontal"
        android:text="@string/forgotPassword"
        android:textColor="@android:color/background_dark"
        android:textSize="15sp"
        android:textStyle="bold" >

    </TextView>

    <Button
        android:id="@+id/login_btn_info"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@string/forgotPassword"
        android:background="@drawable/info"
        android:textAppearance="?android:attr/textAppearanceSmallInverse"
        android:textColor="@android:color/primary_text_light" />

</RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:12:57.960

用这个

在 Manifest.xml 中：

```
android:configChanges="keyboardHidden|orientation" 
```

和

```
android:windowSoftInputMode="adjustPan" 
```

让我知道使用这两种方法是否对您有帮助，并且在您的虚拟键盘产生问题的布局中使用滚动视图也有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:02:37.460

尝试使用这个：这将适用于所有设备。

```
android:configChanges="orientation|screenSize|keyboardHidden" 
```

而且您仍然遇到问题，然后尝试将其添加到您的清单文件中

```
android:windowSoftInputMode="stateAlwaysHidden" 
```

尝试集中您的 EditText 以便在第一时间解决您的布局问题。

# c++ - 如何使用 Visual Studio 2012 构建 cppunit

> ID：15003043
> 
> 赞同：1
> 
> 时间：2013-02-21T13:08:19.997
> 
> 标签：c++, visual-studio-2012, cppunit

我从[http://cppunit.svn.sourceforge.net/](http://cppunit.svn.sourceforge.net/)获得了 cppunit，直到现在它工作正常，当我需要在 Visual Studio 2012 中重建它时。

所以我从 ..\branches\HB_VS2010\cppunit\ 打开解决方案，将所有项目更新到 v110，添加 x64 平台以进行发布配置并尝试构建它。

发生的错误是`error C2440: 'static_cast' : cannot convert from 'void (__cdecl cdxCDynamicDialog::* )(UINT)' to 'void (__cdecl CWnd::* )(UINT_PTR)'`

当我尝试在 debug/win32 或 release/win32 中构建时 - 一切正常。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T06:25:14.927

我在尝试为 64 位构建 cppunit 时遇到了同样的错误。对我有用的是更改其中两个函数的签名。

在类 cdxCDynamicDialog

```
afx_msg void OnTimer(UINT nIDEvent); 
```

变成了

```
afx_msg void OnTimer(UINT_PTR nIDEvent); 
```

以便签名与 CDialog::OnTimer 函数匹配。

在此之后，我还更改了 cdxCDynamicWnd

```
void DoOnTimer(UINT nIDEvent); 
```

变成了

```
void DoOnTimer(UINT_PTR nIDEvent); 
```

这不会在 32 位构建中引起问题，因为在该平台上 UINT 与 UINT_PTR 相同。

# c# - Recursive Hierarchical Joins with Depth

> ID：15003048
> 
> 赞同：2
> 
> 时间：2013-02-21T13:08:26.743
> 
> 标签：c#, jquery, linq, dynatree

I followed this [**Recursive Hierarchical Joins in C# and LINQ**](http://www.superstarcoders.com/blogs/posts/recursive-hierarchical-joins-in-c-sharp-and-linq.aspx) post to implement recursive join extension to show a tree view data in my application. As i have 15000 tree nodes, the jQuery [**DynaTree**](http://wwwendt.de/tech/dynatree/doc/dynatree-doc.html) at client side preparation takes lot of time (50 Secs) in buggy browser I.E 7&8

To avoid this i decided to load only one level initially, then load other children on demand (Lazy Loading).

But i could not see the effect in setting depth in recursive join. Even i specify, it prepare all nodes.

```
public static List<DynaTreeNode> GenerateTreeByDepth(List<NodeDTO> nodeList, 
   int deepLevel)
  {

  StringBuilder hirTree = new StringBuilder();
  List<DynaTreeNode> tree = new List<DynaTreeNode>();

  IEnumerable<DynaTreeNode> nodes = nodeList.RecursiveJoin
  (element => element.DataPointSK,element => element.DataPointSKParent,
  (NodeDTO element, int index, int depth,IEnumerable<DynaTreeNode> childNodes) => 
                new DynaTreeNode()
               {
                   title = element.DataPoint,
                   key = element.DataPointSK.ToString(),
                   children = childNodes.ToList(),
                   select = element.selected,
                   expand = element.selected,                      
                   Depth = deepLevel
               });
        tree = nodes.ToList();          
        return tree;

    } 
```

I tried setting depth

> **Depth = deepLevel**

But no use. What could be the issue? How can i do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:13:03.290

RecursiveJoin 扩展方法用于从原始节点构建树。您正在使用的重载传递了 int depth 参数，以初始化新创建的节点及其所在的级别，并且与构建的树的深度无关。

扩展本身是惰性的。当您第一次调用 RecursiveJoin 时，它将返回根的 IEnumerable<>，在您开始枚举之前不会具体化。

您的代码的问题是您急切地将 IEnumerable<> 的孩子转换为列表：

> 孩子 = childNodes.ToList()

这会强制子集合的具体化，再次递归调用相同的方法来构造 DynaTreeNode，并在所有级别重复。尝试用 IEnumerable 替换 DynaTreeNode 中的子列表 - 这将按需生成 DynaTreeNode。

或者您可以保留列表，并将上面的行替换为以下代码：

> 孩子=深度>=深度？null : childNodes.ToList()

正如预期的那样，这将在通过的级别切断树。

# java - JButton and JLabel dissappears when adding custom background

> ID：15003052
> 
> 赞同：1
> 
> 时间：2013-02-21T13:08:36.803
> 
> 标签：java, swing, jframe, jbutton, jlabel

`JButton` and `JLabel` disappears when adding custom background. I don't see any problems in my program, but maybe you guys find an solution! I think it's only a little thing I forgot, but I can't figure it out.

Here's the code:

`GameWindow.java`:

```
setContentPane(new StartImagePanel(RollrackLogo));
out.println("adding JLWelcome");
JLWelcome.setText("Welcome to Rollrack, " + namewindow.name);
add(JLWelcome);
JLWelcome.setVisible(true);
out.println("JLWelcome added");
out.println("adding JBRandom");
JBRandom.setText("Random");
add(JBRandom);
JBRandom.setVisible(true);
out.println("added JBRandom"); 
```

The background appears perfect, but not the `JButton` and `JLabel`!

Code to the `StartImagePanel.java`:

```
public class StartImagePanel extends JComponent{
    private Image image;
    public StartImagePanel(Image image) {
        this.image = image;
    }
    @Override
    protected void paintComponent(Graphics g) {
        g.drawImage(image, 0, 0, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:14:49.433

Your button and label are added to your `GameWindow` frame while they should be added to its contentPane, `setContentPane(new StartImagePanel(RollrackLogo));` instead. That's why they are not showing, they are added to the frame.

Make a variable of the `StartImagePanel` and add the button and label to it and they should show up.

```
StartImagePanel contentPanel = new StartImagePanel(RollrackLogo);
setContentPane(contentPanel);

...

out.println("adding JLWelcome");
JLWelcome.setText("Welcome to Rollrack, " + namewindow.name);
contentPanel.add(JLWelcome);
JLWelcome.setVisible(true);
out.println("JLWelcome added");
out.println("adding JBRandom");
JBRandom.setText("Random");
contentPanel.add(JBRandom);
JBRandom.setVisible(true);
out.println("added JBRandom"); 
```

## Answer dispute

The claims in the first paragraph are plain wrong. Here is source that proves it.

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class AddToCustomContentPane {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                // the GUI as seen by the user (without frame)
                JPanel gui = new JPanel(new FlowLayout());
                gui.setBorder(new EmptyBorder(2, 3, 2, 3));
                gui.setBackground(Color.RED);

                JFrame f = new JFrame("Demo");
                f.setContentPane(gui);

                // Acid test.  Can we add buttons direct to the frame?
                f.add(new JButton("Button 1"));
                f.add(new JButton("Button 2"));

                // Ensures JVM closes after frame(s) closed and
                // all non-daemon threads are finished
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                // See http://stackoverflow.com/a/7143398/418556 for demo.
                f.setLocationByPlatform(true);

                // ensures the frame is the minimum size it needs to be
                // in order display the components within it
                f.pack();
                // should be done last, to avoid flickering, moving,
                // resizing artifacts.
                f.setVisible(true);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

### Edit after the custom panel code was given

Here's a snippet that works to show both button and label on a black image background, I removed that was not needed (listeners).

```
public static void main(String[] v) {

class StartImagePanel extends JPanel {
  private Image image;
  public StartImagePanel(Image image) {
      this.image = image;
  }
  @Override
  protected void paintComponent(Graphics g) {
    g.drawImage(image, 0, 0, null);
  }
}

class GameWindow extends JFrame{
  public GameWindow() {
    BufferedImage RollrackLogo;
    RollrackLogo = new BufferedImage(400,200,BufferedImage.TYPE_INT_RGB);
    final JButton JBRandom = new JButton();
    final JLabel JLWelcome = new JLabel();
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    StartImagePanel panel = new StartImagePanel(RollrackLogo);
    setContentPane(panel);
    setExtendedState(MAXIMIZED_BOTH);
    setVisible(true);
    JLWelcome.setText("Welcome to Rollrack");
    panel.add(JLWelcome);
    JLWelcome.setVisible(true);
    JBRandom.setText("Random");
    panel.add(JBRandom);
    JBRandom.setVisible(true);
  }
}

GameWindow window = new GameWindow();
window.pack();
window.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:40:58.923

I rather use an instance of a `JFrame`, instead of extending it, as @Andrew Thompson suggested in another question.
However, if you're extending it, it might be a good practice to call `super()` in the constructor.

Additionally, we *may* need to know what is going on in your `StartImagePanel`.
It seems, to me, to be the problem.

1.  Ensure both your `GameWindow` and `StartImagePanel` extend properly their superclasses (call `super();`).
2.  Ensure your `StartImagePanel` has a proper `Layout`.
3.  Add your components *before* you set your frame visible. This also means you won't need `JLWelcome.setVisible(true);`.
4.  Ensure that your code is executed in the EDT (*Event-Dispatch Thread*).

**Example:**

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.*;

@SuppressWarnings("serial")
public class GameWindow extends JFrame{
    BufferedImage rollrackLogo;
    JButton jbRandom;
    JLabel jlWelcome;

    public GameWindow() {
        super();
        jbRandom = new JButton("Random");
        jlWelcome = new JLabel("Welcome to Rollrack, " +
                namewindow.name);

        rollrackLogo = new BufferedImage(400, 200,
                BufferedImage.TYPE_INT_RGB);

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setContentPane(new StartImagePanel(rollrackLogo));

        // Add your components.
        add(jlWelcome);
        add(jbRandom);

        addKeyListener(new KeyListener() {
            @SuppressWarnings("static-access")
            @Override
            public void keyPressed(KeyEvent e) {
                if(e.getKeyCode() == e.VK_ESCAPE){
                    System.exit(7);
                }
            }

            @Override
            public void keyReleased(KeyEvent arg0) {}

            @Override
            public void keyTyped(KeyEvent arg0) {}
        });

        // Pack, or otherwise set fullscreen.
        pack();

        // Now, set frame visible.
        setVisible(true);
    }
} 
```

**Edit:** Now that you've posted the code for your `StartImagePanel`, I see that you're extending `JComponent`. Follow my previous advice, (call `super`), set a `Layout`, and extend `JPanel` instead.

# javascript - jQuery toggle() - 为活动元素添加和删除类

> ID：15003057
> 
> 赞同：0
> 
> 时间：2013-02-21T13:08:53.563
> 
> 标签：javascript, jquery, html, css, toggle

目前，我正在使用这个片段：

```
$('.element-block').click(function(){
    $(this).siblings(".key-element").toggle();

    $('.background-area').removeClass("active_bg");
    $(this).parent('.background-area').addClass("active_bg");
}); 
```

我有`DIV`元素列表。在这个块中，当我点击 时`.element-block`，`jQuery`函数**toggle()**显示需要的区域，如果我再次点击，**切换**隐藏它，并且我正在向该区域添加背景颜色。

这很好用，例如：我单击 A `.block-element`- 数据出现 + 背景颜色已更改。然后我点击B `.block-element`- 数据出现+背景颜色改变。凉爽的。

但是如果我点击A-`.block-element`数据出现+背景颜色改变，然后如果我再次点击A-`.block-element`数据将被隐藏，但背景颜色**没有改变**。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:14:15.140

那是因为你总是在添加类。您可以事先检查是否只想删除它或添加它：

```
var $active_bg = $('.background-area.active_bg').removeClass("active_bg");
var $bg = $(this).parent('.background-area');

// Only add the class if the current background didn't have the class
if ($bg[0] !== $active_bg[0]) {
    $bg.addClass("active_bg");
} 
```

上面的代码只允许一个`.background-area`元素是“活动的”。如果可以有多个，您可以将代码简化为：

```
$(this).parent('.background-area').toggleClass("active_bg"); 
```

# tsql - 从我的 PitchValues 表中提取正确的结果

> ID：15003058
> 
> 赞同：0
> 
> 时间：2013-02-21T13:08:53.813
> 
> 标签：tsql

我有点沮丧，想知道您是否可以提供帮助：

我有一个音高值表，其中包含以下列 PitchValues_Skey、PitchType_Skey（这是一个外键）、开始日期、结束日期和最后的值：

例如：

```
1    7   01/01/2010    31/12/2010   £15
2    7   01/01/2011    31/12/2011   £20 
```

我想要做的就是更新我的 Bookings 表，其中包含每次预订的金额，所以我将下面的代码放在一起，当我只有 2010 年的数据时它工作得很好，但我知道有 2011 年和 2012 年并且想要更新它但它只会更新 2010 年的价格。

```
SELECT        Bookings.Booking_Skey, DATEDIFF(day, Bookings.ArrivalDate, Bookings.DepartureDate) * PitchValues.Value AS BookingValue, 
                         PitchValues.PitchType_Skey
FROM            Bookings INNER JOIN
                         PitchValues ON Bookings.PitchType_Skey = PitchValues.PitchType_Skey
WHERE        (Bookings.Booking_Skey = 1) 
```

因此，当我运行上面的查询时，我希望看到一行数据，但我看到的是 4（见下文）

我希望这样：

```
Booking_Skey    BookingValue    PitchType_Skey
      1               420                     4 
```

但我明白了

```
Booking_Skey    BookingValue    PitchType_Skey
     1                 420                  4
     1                 453.6                4
     1                 476.7                4
     1                 476.7                4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:49:00.677

现在都整理好了，谢谢你的帮助。

```
SELECT  Bookings.Booking_Skey, DATEDIFF(DAY, Bookings.ArrivalDate, Bookings.DepartureDate) * PitchValues.Value AS BookingValue, PitchValues.PitchType_Skey
FROM    Bookings
INNER JOIN PitchValues ON Bookings.PitchType_Skey = PitchValues.PitchType_Skey
    AND Bookings.ArrivalDate BETWEEN PitchValues.StartDate AND PitchValues.EndDate
WHERE (Bookings.Booking_Skey = 1) 
```

# excel - VBScript：等待 Excel MsgBox，点击 OK

> ID：15003059
> 
> 赞同：2
> 
> 时间：2013-02-21T13:08:55.753
> 
> 标签：excel, vbscript, automation, msgbox

我编写了一个 VBScript，它可以自动处理 Excel 工作簿的负载。

对于其中一些工作簿，打开它们时会触发一个 MsgBox。此消息框正在中断自动化。

有没有办法在 VBScript 中侦听此 MsgBox 并在弹出时“单击”确定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:12:44.497

尝试使用这个包装器：

```
Application.DisplayAlerts = False
Application.Workbooks.Open ([your code])
Application.DisplayAlerts = True 
```

这将抑制打开时的任何警告，例如兼容性问题等。

更新：

如果 MsgBox 是从工作簿代码生成的，请尝试使用：

```
Application.AutomationSecurity = msoAutomationSecurityForceDisable 
```

如果使用后期绑定，这将起作用：

```
Application.AutomationSecurity = 3 
```

阅读更多： http: [//support.microsoft.com/kb/886633](http://support.microsoft.com/kb/886633)

# ruby-on-rails-3 - 带有符号链接的独角兽工作目录

> ID：15003063
> 
> 赞同：7
> 
> 时间：2013-02-21T13:09:01.093
> 
> 标签：ruby-on-rails-3, deployment, signals, unicorn

我们在使用 unicorn 进行热部署时遇到了问题。我们几乎使用规范`unicorn.rb`配置，将 设置`working_directory`为指向符号链接的文件夹，但不知何故，它在第一次启动时似乎卡在实际文件夹中并且无法遵循符号链接。

```
# config/unicorn.rb
if ENV['RAILS_ENV'] == 'production'
  worker_processes 4
else
  worker_processes 2
end

working_directory "/var/local/project/symlinkfolder"

# Listen on unix socket
listen "/tmp/unicorn.sock", :backlog => 64

pid "/var/run/unicorn/unicorn.pid"

stderr_path "/var/log/unicorn/unicorn.log"
stdout_path "/var/log/unicorn/unicorn.log"

preload_app true

before_fork do |server, worker|
  # the following is highly recomended for Rails + "preload_app true"
  # as there's no need for the master process to hold a connection
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.connection.disconnect!
  end

  # Before forking, kill the master process that belongs to the .oldbin PID.
  # This enables 0 downtime deploys.
  old_pid = "/var/run/unicorn/unicorn.pid.oldbin"
  if File.exists?(old_pid) && server.pid != old_pid
    begin
      Process.kill("QUIT", File.read(old_pid).to_i)
    rescue Errno::ENOENT, Errno::ESRCH
      # someone else did our job for us
    end
  end
end

after_fork do |server, worker|
  # the following is *required* for Rails + "preload_app true",
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
  end

  # this makes sure the logging-rails framework works when preload_app = true
  Logging.reopen
  # if preload_app is true, then you may also want to check and
  # restart any other shared sockets/descriptors such as Memcached,
  # and Redis.  TokyoCabinet file handles are safe to reuse
  # between any number of forked children (assuming your kernel
  # correctly implements pread()/pwrite() system calls)
end 
```

当我们发出 a`USR2`时，我们会在 unicorn 日志中看到：

```
executing ["/var/local/project/project.d/6/vendor/bundle/ruby/1.9.1/bin/unicorn_rails", "-E", "staging", "-D", "-c", "/var/local/project/symlinkfolder/config/unicorn.rb"│·
, {12=>#<Kgio::UNIXServer:fd 12>}] (in /var/local/project/project.d/8) 
```

所以独角兽在某种程度上“卡在”版本 6 上，而实际的符号链接文件夹在版本 8 上……一旦我们在几次部署后为版本 6 修剪文件夹，这就会成为一个问题……

*   `working_directory`设置为符号链接文件夹
*   符号链接正确指向`/var/local/project/project.d/[id]`文件夹
*   我们在发送信号*之前*更新符号链接`USR2`

我们错过了什么？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T16:10:46.583

解决方案是显式设置独角兽二进制路径，如[http://unicorn.bogomips.org/Sandbox.html上解释的（以某种令人困惑的方式）](http://unicorn.bogomips.org/Sandbox.html)

```
app_root = "/var/local/project/symlinkfolder"
working_directory app_root
# see http://unicorn.bogomips.org/Sandbox.html
Unicorn::HttpServer::START_CTX[0] = "#{app_root}/vendor/bundle/ruby/1.9.1/bin/unicorn_rails" 
```

然后我们需要发出一个`unicorn reload`( `kill -HUP`) 命令，所以 unicorn 会重新加载配置文件。从那时起，发出`USR2`信号就可以正常工作了。

# javascript - Javascript/Jasmine：ReferenceError：找不到变量：Float64Array

> ID：15003067
> 
> 赞同：3
> 
> 时间：2013-02-21T13:09:14.873
> 
> 标签：javascript, ruby-on-rails, qt4, jasmine, emscripten

我正在使用 rails，对 javascript 来说非常新，并设置我的测试框架来测试我的 javascript `Jasmine`。情况如下：

*   我`Viz.js`在我的源代码中使用，它被`Graphviz`编译为 JS`Emscripten`
*   我在用着`jasmine-rails`
*   `jasmine`从浏览器成功构建
*   但是，`jasmine:headless`（它使用 Qt webdriver（我使用 Qt 版本 4.8.1）），给出以下错误：

    > `ReferenceError: Can't find variable: Float64Array`

来自 Viz.js

所以我的问题是：我可以断定 Qt 中存在错误`Float64Array`吗？emscripten 做的很乱吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:05:00.210

什么环境？哪个浏览器？哪个`emscripten`建筑？

Safari 5 及以下版本没有`Float64Array`. 更新 Safari

此外，如果您使用的是`emscripten` `box2d`构建，请将`Float64Array`代码中的用法替换为`Float32Array`

编辑：

另请参阅此链接 - [https://github.com/kripken/box2d.js/issues/6](https://github.com/kripken/box2d.js/issues/6)

# php - 需要表格排序器（手动完成）

> ID：15003070
> 
> 赞同：-1
> 
> 时间：2013-02-21T13:09:16.930
> 
> 标签：php, jquery, html, sorting, html-table

我在网页中有一个如下表格来显示从数据库中获取的结果，

```
<table id="newspaper-a">
    <thead>
        <tr>
            <th scope="col">Word</th>
            <th scope="col">Rank</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>stol</td><td>0</td></tr>
        <tr><td>stole</td><td>0</td></tr>
        <tr><td>stoll</td><td>0</td></tr>
        <tr><td>strohl</td><td>0</td></tr>
        <tr><td>strole</td><td>0</td></tr>
        <tr><td>stroll</td><td>0</td></tr>
        <tr><td>thoele</td><td>0</td></tr>
    </tbody>
</table> 
```

我尝试了所有网站上可用的每个**tablesorter** jquery 插件，但是一些 jquery 库函数（在我的网页中）阻止了**tablesorter**工作......我不知道哪个（虽然这里没有给出）......我需要手动进行表格排序。

有什么想法吗，求指教。。。。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:24:44.117

嗨试试这个代码它的工作原理

```
<!DOCTYPE html>
<html>
    <head>
<title>Light Javascript Table Sorter</title>
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap.no-icons.min.css" rel="stylesheet">
<style>

h2 {
  margin-bottom: 50px;
}

.container {
  text-align: center;
  overflow: hidden;
  width: 800px;
  margin: 0 auto;
}

.container table {
  width: 100%;
}

.container td, .container th {
  padding: 10px;
}

.container td:first-child, .container th:first-child {
  padding-left: 20px;
}

.container td:last-child, .container th:last-child {
  padding-right: 20px;
}

.container th {
  border-bottom: 1px solid #ddd;
  position: relative;
  cursor: pointer;
}

.container th.desc:after {
  border-top-color: #666;
}

.container th.asc:before {
  border-bottom-color: #666;
}

.container th:after, .container th:before {
  content: '';
  display: block;
  position: absolute;
  right: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px;
  width: 0;
  height: 0;
}

.container th:after {
  border-top-color: #ddd;
  top: 22px;
}

.container th:before {
  border-bottom-color: #ddd;
  top: 10px;
}

.github {
  margin-top: 50px;
}

</style>

<script>

(function(document) {
    'use strict';

    var LightTableSorter = (function(Arr) {

        var _th, _cellIndex, _order = '';

        function _text(row) {
            return row.cells.item(_cellIndex).textContent.toLowerCase();
        }

        function _sort(a, b) {
            var va = _text(a), vb = _text(b), n = parseInt(va, 10);
            if (n) {
                va = n;
                vb = parseInt(vb, 10);
            }
            return va > vb ? 1 : va < vb ? -1 : 0;
        }

        function _toggle() {
            var c = _order !== 'asc' ? 'asc' : 'desc';
            _th.className = (_th.className.replace(_order, '') + ' ' + c).trim();
            _order = c;
        }

        function _reset() {
            _th.className = _th.className.replace('asc', '').replace('desc', '');
            _order = '';
        }

        function onClickEvent(e) {
            if (_th && _cellIndex !== e.target.cellIndex) {
                _reset();
            }
            _th = e.target;
            _cellIndex = _th.cellIndex;
            var tbody = _th.offsetParent.getElementsByTagName('tbody')[0],
                rows = tbody.rows;
            if (rows) {
                rows = Arr.sort.call(Arr.slice.call(rows, 0), _sort);
                if (_order === 'asc') {
                    Arr.reverse.call(rows);
                }
                _toggle();
                tbody.innerHtml = '';
                Arr.forEach.call(rows, function(row) { tbody.appendChild(row); });
            }
        }

        return {
            init: function() {
                var ths = document.getElementsByTagName('th');
                Arr.forEach.call(ths, function(th) { th.onclick = onClickEvent; });
            }
        };
    })(Array.prototype);

    document.addEventListener('readystatechange', function() {
        if (document.readyState === 'complete') {
            LightTableSorter.init();
        }
    });

})(document);
</script>
    </head>
    <body>
<section class="container">

    <h2>Light Javascript Table Sorter</h2>

    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Price</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>John Doe</td>
                <td>john.doe@gmail.com</td>
                <td>0123456789</td>
                <td>99</td>
            </tr>
            <tr>
                <td>Jane Vanda</td>
                <td>jane@vanda.org</td>
                <td>9876543210</td>
                <td>349</td>
            </tr>
            <tr>
                <td>Alferd Penyworth</td>
                <td>alfred@batman.com</td>
                <td>6754328901</td>
                <td>199</td>
            </tr>
        </tbody>
    </table>

</section>

    </body>
</html> 
```

对于现场演示，请参阅此链接.... [http://cssdeck.com/labs/light-javascript-table-sorter](http://cssdeck.com/labs/light-javascript-table-sorter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:27:01.067

使用来自 Chrisrtian Bach 的出色的[tablesorter 插件](http://tablesorter.com/docs/) ，它可以很好地与您提供的代码配合使用（[请参见此处](http://jsfiddle.net/tXkb4/)）。

**脚本**

```
/*Make sure to include javascript and table sorter libraries*/    
$(document).ready(function () {
    $("#newspaper-a").tablesorter({widgets: ['zebra']});
}); 
```

尝试分解你的问题。为自己设置一个最低限度的测试页面。我建议使用 table 和 tablesorter 脚本（和 jquery）。然后一次添加一个其他 javascritpt 库，直到您可以确定是哪一个导致了问题。如果在添加库后仍然无法复制问题，则需要进一步挖掘页面上的其他脚本和标记。是否有其他具有相同 ID 的元素与您尝试将表绑定到等。

# fancybox - fancyBox 画廊 喜欢不在 facebook 上发帖

> ID：15003072
> 
> 赞同：2
> 
> 时间：2013-02-21T13:09:22.377
> 
> 标签：fancybox, facebook-like, image-gallery

我有一个带有fancyBox 画廊的网站。我已将 Facebook 的点赞按钮添加到图库中，因此我对图库中的每张图片都点了一个赞。问题是，当点击其中一个时，它不会发布到 Facebook。然而，它保存了谁喜欢什么，所以当其他人打开同一个画廊时，他们可以看到谁喜欢什么，但它没有发布。

我需要将每个喜欢的图像发布在 Facebook 上。

我尝试过使用 jsfiddle，但无论我做什么我都无法让它工作：http: [//jsfiddle.net/sZG4L/](http://jsfiddle.net/sZG4L/)

```
 <script type="text/javascript">
    $(document).ready(function() {
    $(".fancybox-button").attr('rel', 'gallery').fancybox({
        beforeShow: function () {
            if (this.title) {
                // New line
                this.title += '';

                // Add FaceBook like button
                this.title += '<iframe src="//www.facebook.com/plugins/like.php?href=' + this.href + '&amp;layout=standard&amp;show_faces=true&amp;width=450&amp;action=like&amp;font&amp;colorscheme=light&amp;height=90" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:90px;" allowTransparency="true"></iframe>';
            }
        },
    helpers     : {
        title   : { type : 'inside' },
        buttons : {}
    },
    afterLoad : function() {
                this.title = (this.index + 1) + ' / ' + this.group.length + '  ';
    }
});
}); 
```

我想我需要某种变量，所以我的“this.href”指向每个图像，也在它关闭之后，也许是一些动态函数。我一直在寻找这个，但无法找到。

我也尝试过将 facebook 更新为 html5，但是我无法让它可见。

希望有人可以提供帮助。

# python - Python：在守护进程时关闭文件描述符

> ID：15003074
> 
> 赞同：3
> 
> 时间：2013-02-21T13:09:30.623
> 
> 标签：python, fork, daemon

我的应用程序中有此代码：

```
def daemonize_process(stdin='/dev/null', stdout='/dev/null', stderr='/dev/null'):
'''
Fork the current process as a daemon (background process), redirecting
standard file descriptors

@param string stdin standard input file name
@param string stdout standard output file name
@param string stderr standard error file name
'''

# To transform a process in a daemon, it is necessary to fork, decouple from
# parent environment, fork again and close all opened file descriptors.

# do first fork
try:
    pid = os.fork()
    if pid > 0:
        # exit from first parent process
        # using os._exit() instead of sys.exit() in a child process after
        # a fork is recommended by Python API docs
        os._exit(0)
except OSError as e:
    sys.stderr.write("fork #1 failed: (%d) %s\n" % (e.errno, e.strerror))
    sys.exit(1)

# decouple from parent environment
os.chdir("/")
os.umask(0)
os.setsid()

# do second fork
try:
    pid = os.fork()
    if pid > 0:
        # exit from second parent process
        # using os._exit() instead of sys.exit() in a child process after
        # a fork is recommended by Python API docs
        os._exit(0)
except OSError, e:
    sys.stderr.write("fork #2 failed: (%d) %s\n" % (e.errno, e.strerror))
    sys.exit(1)

# close all file descriptors
import resource
maxfd = resource.getrlimit(resource.RLIMIT_NOFILE)[1]
if (maxfd == resource.RLIM_INFINITY):
    maxfd = 1024

for fd in range(0, maxfd):
    try:
        os.close(fd)
    except OSError:
        sys.stderr.write("error closing file: (%d) %s\n" % (e.errno, e.strerror))
        pass

# process is now daemonized, redirect standard file descriptors.
for f in sys.stdout, sys.stderr:
    f.flush( )
si = file(stdin, 'r')
so = file(stdout, 'a+')
se = file(stderr, 'a+', 0)
os.dup2(si.fileno( ), sys.stdin.fileno( ))
os.dup2(so.fileno( ), sys.stdout.fileno( ))
os.dup2(se.fileno( ), sys.stderr.fileno( )) 
```

在我在网上看到的守护进程代码中，文件描述符没有在子进程中关闭。我为什么要这样做？在我看来，我可能想继续处理在 fork-detach-fork 进程之前已经在工作的文件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:16:13.847

为什么要关闭文件描述符？通常你可以假设启动你的守护进程的进程知道它在做什么，并且会在 exec() 之前关闭它的文件描述符。

例如，如果您从 bash 运行，您将获得的唯一打开文件描述符是标准的，以及在 shell 中手动设置的任何重定向。

如果一个程序让文件描述符保持打开状态，那么它就是错误的。无论如何，可以使用 FD_CLOEXEC 打开文件，这样它们就会在 exec() 上自动关闭。

# android - 为图像的一部分设置动画

> ID：15003076
> 
> 赞同：3
> 
> 时间：2013-02-21T13:09:33.423
> 
> 标签：android, animation, android-animation

我在我的应用程序中有一个飞溅。在客户要求我实现不同的启动动画之前一切都很好，比如 PowerPoint 中的幻灯片转换（溶解、棋盘、百叶窗、切碎、门等）你可以[在 YouTube 上查看它们](http://www.youtube.com/watch?v=nE7PJK3JTwA)

例如，对于棋盘格，我可以将飞溅图像切割成一组部分并使用默认的 android xml 动画。对于百叶窗或门，我将需要另外两组不同的飞溅图像部件。这种方法需要为每个动画提供不同的布局。因此应用程序的大小将急剧增长，并且启动的复杂性也会增加。

有没有办法在不将飞溅图像切割成部分的情况下做到这一点？我可以分别为一张图像的不同部分设置动画吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T03:03:03.923

正如@Th0rndike 建议的那样，我们在 github 上创建了[CanvasAnimation](https://github.com/vasart/CanvasAnimationView)项目，用于`Canvas`绘制动画。有两个带有单元格和椭圆动画的示例。

![细胞动画示例](../Images/aecfa61ad04e0ff302ce84a51c3f40eb.png)

# java - 如何使用 Google Map v2 在 android 中根据 lat、long 在 Map 中显示用户输入位置？

> ID：15003085
> 
> 赞同：0
> 
> 时间：2013-02-21T13:09:52.850
> 
> 标签：java, android, google-maps

我需要根据经纬度在地图中显示特定位置，并在该特定位置显示标记。但是，我已经显示了整个地图，但没有得到具体的位置。

```
public class MapActivity extends FragmentActivity {

GoogleMap googleMap;
MarkerOptions markerOptions;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
       setContentView(R.layout.map);

    Intent intent = getIntent();
    String title = intent.getStringExtra("title");
    String lat = intent.getStringExtra("lat");
    String lon = intent.getStringExtra("long");
    double Lon = Double.parseDouble(lon);
    double Lat = Double.parseDouble(lat);

    SupportMapFragment supportMapFragment = (SupportMapFragment)
    getSupportFragmentManager().findFragmentById(R.id.map);

    googleMap = supportMapFragment.getMap();

    googleMap.addMarker(new MarkerOptions()
            .position(new LatLng(Lat, Lon))
            .title(title));
      } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:39:03.300

尝试如下：

> ```
>  private Marker myMarker;
>     myMarker=googleMap.addMarker(new MarkerOptions()
>         .position(new LatLng(Lat, Lon))
>         .title(title)
>         .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE))); 
> ```

# slf4j - slf4j 实现冲突

> ID：15003087
> 
> 赞同：1
> 
> 时间：2013-02-21T13:09:59.783
> 
> 标签：slf4j

我的测试失败是因为

```
SLF4J: The requested version 1.5.10 by your slf4j binding is not compatible with [1.6, 1.7]
SLF4J: See http://www.slf4j.org/codes.html#version_mismatch for further details. 
```

我发现我可以添加以下实现来解决这个冲突。

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.7.2</version>
        <scope>test</scope>
    </dependency> 
```

但是，我想知道如何确定哪个依赖会带来 1.5.10。运行时，`mvn dependency:tree`我只会列出我的 slf4j-api。

**编辑**

好的，我知道为什么它没有被列出：我的依赖项之一实现了 Logger 本身。但是，我仍然不确定如何在添加 slf4j-simple 依赖项之前弄清楚这一点。但我想这与maven无关。

# html - 什么是 Spring 的等效 HTML 代码 标签？

> ID：15003088
> 
> 赞同：1
> 
> 时间：2013-02-21T13:10:01.503
> 
> 标签：html, spring

我使用 Spring 3.2，我使用 jquery 将输入元素动态添加到我的 Spring 表单中。我想添加与之相关的*错误。*但我不知道标签的等效 HTML 代码`<form:errors />`。当您在 JSP 页面中使用以下 Spring 标记时

```
<form:text path="abc" /> 
```

它在渲染时生成以下 HTML

```
<input type="text" name="abc" /> 
```

在呈现为 HTML 时，它会为以下 Spring 表单错误标记产生什么？

```
<form:errors path="abc"/> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:11:47.700

a) 使用 JavaScript 或 b) 在服务器上生成错误。没有 HTML-only `<form:errors />`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:18:23.910

这取决于您如何使用错误标签。用你的具体例子：

```
<form:errors path="abc"/> 
```

我相信生成的 HTML 将是：

```
<span id="abc.errors">abc is messed up for some reason</span> 
```

就个人而言，我使用这样的错误标签：

```
<form:errors path="*" cssClass="error"/> 
```

我的 HTML 是：

```
<span id="*.errors" class="error">Title is required</span> 
```

我希望这会有所帮助！

# tridion - SDl Tridion 许可证

> ID：15003091
> 
> 赞同：3
> 
> 时间：2013-02-21T13:10:26.933
> 
> 标签：tridion, tridion-2011

有人可以分享他们在以下情况下购买 SDL Tridion 许可证的知识吗：

1) 有人想出于个人目的获取/购买许可证 - 无组织、无生产网站、无商业用途 - 仅用于学习目的。为此，他们是称为试用许可证还是互惠许可证。请注意，个人不是 SDL Tridion MVP

2) 有人想出于营销目的获取/购买许可证 - 除了提供演示之外，没有组织，没有商业用途

3) 组织注册成为 SDL Tridion 合作伙伴的程序是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:47:08.870

我知道（您似乎已经发现）免费个人研究许可证的唯一选择是获得 SDL Tridion MVP 身份，或者为拥有合作伙伴许可证的 SDL 合作伙伴工作。除此之外，您可能需要购买一个。

您需要就此联系 SDL - 他们是唯一可以为您提供 SDL Tridion 定价信息的人。

[http://www.sdl.com/products/tridion/](http://www.sdl.com/products/tridion/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T13:50:57.983

不能拥有个人许可证，也不能用于个人或培训用途。

当您想获得用于营销目的的许可证时，您需要注册为合作伙伴。您可以使用以下表格来表明您想成为其中的一员：

[http://www.sdl.com/community/partner/partner-programs/tridion-partners/index-tab5.html#10-7785](http://www.sdl.com/community/partner/partner-programs/tridion-partners/index-tab5.html#10-7785)

通常特定的 POC 许可证是在销售周期内颁发的，但它们是特定于潜在客户环境的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-06T16:28:31.653

SDL 现在提供免费的开发人员许可证（不用于商业用途）。他们的社区网站上的详细信息：

[https://community.sdl.com/solutions/content-management/tridion/tridion-developer/w/wiki/863.sdl-web-licenses](https://community.sdl.com/solutions/content-management/tridion/tridion-developer/w/wiki/863.sdl-web-licenses)

# c# - 获取列表框中所选项目的值作为字符串

> ID：15003095
> 
> 赞同：31
> 
> 时间：2013-02-21T13:10:40.027
> 
> 标签：c#, winforms, listbox

我正在尝试使用下面的代码获取列表框中所选项目的值，但它总是返回空字符串。

```
DataSet ds = searchforPrice(Convert.ToString(listBox1.SelectedItem)); 
```

在这里，我试图将所选项目的值作为字符串传递给方法 searchforPrice 以从数据库中检索数据集。

如何将所选项目的值检索为字符串？

我正在从组合框将项目添加到列表框中，组合框又从数据库中加载项目。

```
 listBox1.Items.Add(comboBox2.Text); 
```

![在此处输入图像描述](../Images/2bcd2f23054617671c2db4793a4e8427.png)

任何人都有这个答案..

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-02-21T13:13:28.903

如果要检索项目的显示文本，请使用以下[`GetItemText`](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.listcontrol.getitemtext.aspx)方法：

```
string text = listBox1.GetItemText(listBox1.SelectedItem); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-05T10:06:36.063

如果您在应用程序中使用 ListBox 并且想要返回 ListBox 的选定值并将其显示在标签或其他任何东西中，然后使用此代码，它将帮助您

```
 private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
         label1.Text  = listBox1.SelectedItem.ToString();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-29T18:18:49.780

要检索 à listbox 中所有选定项目的值，您可以在 DataRowView 中转换选定项目，然后选择数据所在的列：

```
foreach(object element in listbox.SelectedItems) {
    DataRowView row = (DataRowView)element;
    MessageBox.Show(row[0]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-11T09:27:46.423

```
string textValue = ((ListBoxItem)listBox1.SelectedItem).Content.ToString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-17T09:47:13.567

如果您想从列表框中检索您的值，您应该尝试以下操作：

```
String itemSelected = numberListBox.GetItemText(numberListBox.SelectedItem); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-16T13:13:48.480

在文件列表框中获取 FullName（完整路径）列表（Thomas Levesque 回答修改，感谢 Thomas）：

```
...
        string tmpStr = "";
        foreach (var item in listBoxFiles.SelectedItems)
        {
            tmpStr += listBoxFiles.GetItemText(item) + "\n";
        }
        MessageBox.Show(tmpStr);
... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-10T18:45:15.207

你可以使用这个来获取选中的 ListItme Name::

```
String selectedItem = ((ListBoxItem)ListBox.SelectedItem).Name.ToString(); 
```

确保您的每个 ListBoxItem 都有一个 Name 属性

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-24T12:38:47.930

详细说明 Pir Fahim 先前的回答，他是对的，但我使用的是 selectedItem.Text （唯一让它对我有用的方法）

使用 SelectedIndexChanged() 事件将数据存储在某处。就我而言，我通常填写一个自定义类，例如：

```
class myItem {
    string name {get; set;}
    string price {get; set;}
    string desc {get; set;}
}

private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
     myItem selected_item = new myItem();
     selected_item.name  = listBox1.SelectedItem.Text;
     Retrieve (selected_item.name);
} 
```

然后您可以从“myItems”列表中检索其余数据..

```
myItem Retrieve (string wanted_item) {
    foreach (myItem item in my_items_list) {
        if (item.name == wanted_item) {
               // This is the selected item
               return item; 
        }
    }
    return null;
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-11-26T05:50:25.913

正确的解决方案似乎是：

`string text = ((ListBoxItem)ListBox1.SelectedItem).Content.ToString();`

请务必使用**.Content**而不是**.Name**。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-09-29T16:54:46.403

如果您想检索从列表框中选择的项目，这里是代码...

```
String SelectedItem = listBox1.SelectedItem.Value; 
```

# text - 我想要一个脚本在文本文件中搜索特定模式的字符串并将这些文件移动到另一个目录

> ID：15003097
> 
> 赞同：0
> 
> 时间：2013-02-21T13:10:43.317
> 
> 标签：text, batch-file, full-text-search, notepad++

如果可能，我需要知道如何使用 notepad++、freecommander 和 windows 等工具对文本文件执行高级搜索。一个 bat 脚本文件会很棒。

问题是我需要在一个目录中搜索大约 1000 个 txt 文件。我需要知道这 1000 个 txt 文件的形式，这些文件具有例如“SYR_SHA/245/4”形式的字符串。我只想让它搜索模式，例如可以改变数字的字符`*****_******/*****/******`在哪里。`*`

`_`如上例所示，第一组和第二组字符之间必须有一个。该脚本应该遍历整个 txt 文件并搜索上述模式。然后脚本应该将所有结果移动到一个单独的目录中

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:02:11.153

Create this batch file and copy it into your folder where you have all the 1000 .txt files

Change the `yourdestinationdirectory` directory and run the batch file

```
@Echo Off
FindStr /M /R "[a-zA-Z]*_[a-zA-Z]*\/[0-9]*\/[0-9]*" *.Txt > findstr.out
For /F "tokens=*" %%a In (FindStr.out) Do call :move_Rtns %%a
del FindStr.out
Exit /B

:move_rtns
copy %1 yourdestinationdirectory\*
del /Q %1
Exit /B 
```

Please change the Regex according to your requirement, for eg. If you are expecting number and letter together you can replace `[a-zA-z]` with `[a-zA-Z0-9]`

Good luck

# java - 如何将 Java 字符串转换为 MS 访问代码标准

> ID：15003098
> 
> 赞同：0
> 
> 时间：2013-02-21T13:10:43.487
> 
> 标签：java, jdbc-odbc

我是一名 java 编码员，在我的项目中，我想将特定字体存储到 microsoft access 数据库中。但在数据库中，他们只显示“？？？？？？” 符号。具体来说，我是使用 JTextField 来获取字符串，然后插入到 MS 数据库表中。但在表格字段中，它只显示“？？？”。是否有任何方法（statement.executeUpdate()）可以在数据库中显示“Zawgyi-One”字体类型。

提示，我从我的文本字段中获取字符串并插入到 ms 访问中，但它只显示“????”。有什么方法可以在java中将Unicode字符串更改为ASCII？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:04:45.460

自从我上次使用 ms-access 以来已经有一段时间了。首先，我不太确定 ms-access 一开始就支持 unicode。

假设确实如此，您可能会在 jdb-odbc 连接定义中查找参数。您现在所拥有的是，多字节 Unicode 字符无法被识别为多个 ​​ASCII 字符写入数据库。

除了这个错误之外，您还会遇到任意长度的问题，因为对于每个非 ascii unicode 字符，当这种事情发生时，您的字符串将比预期的要长。我曾经咬过一张名为“带有变音符号的名称的数据库写入失败”的故障单

:-)

要检查一下，您可以尝试通过 ms-access GUI 将其中一个（缅甸语？）字符写入表中，然后通过 JDBC-ODBC 读取表。

如果您实际上可以将字符存储在 ms-access 中，那么下一步就是调整 JDBC-ODBC 连接，使您最终在 Java 端使用这些字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:14:00.393

这不是字体的问题。这是java正在存储一个Unicode字符串（UTF-16）并且MS Access认为它应该是ASCII并且Unicode值是2个字节，不匹配任何东西。

您需要按照以下方式编写一个小实用程序：

```
public static String cleanString(String s) {
    String temp = Normalizer.normalize(s, Normalizer.Form.NFD);
    Pattern pattern = Pattern.compile("\\p{InCombiningDiacriticalMarks}+");
    return pattern.matcher(temp).replaceAll("");
} 
```

在将输入存储到数据库之前调用它。

# git - Git 拉取不更新本地仓库

> ID：15003101
> 
> 赞同：0
> 
> 时间：2013-02-21T13:10:51.047
> 
> 标签：git, version-control

当我们从远程仓库中提取更改时，本地仓库中的更改不会更新。相反，它显示为在本地存储库中提交的更改。我不太确定我是否正确解释了我的问题。

有谁知道为什么本地仓库在拉取完成时没有更新，以及为什么它显示为提交到本地仓库的更改。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:12:56.213

您有合并冲突。您需要解决冲突并提交合并以继续。

# html - 使用 css，如何在透明 div 中创建一个白色圆圈？

> ID：15003102
> 
> 赞同：1
> 
> 时间：2013-02-21T13:10:52.210
> 
> 标签：html, css, gradient

我希望通过使用 css 渐变创建一个包含在透明 div 中的模糊边缘的白色圆圈。

随着 z-index 高于正文和绝对定位，我应该能够将其移动到页面的任何部分并“白化”圆圈下方的所有内容。

我已经尝试过我最喜欢的渐变生成器，但没有奏效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T13:13:36.163

```
<div id="circle"></div> 
```

css

```
#circle {
    width: 50px;
    height: 50px;
    -webkit-border-radius: 25px;
    -moz-border-radius: 25px;
    border-radius: 25px; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:15:38.810

尝试使用[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)。

这是我使用他们的工具制作的一个：（将方向设置为径向）

[http://www.colorzilla.com/gradient-editor/#ffffff+24,ffffff+59&1+31,0+34;自定义](http://www.colorzilla.com/gradient-editor/#ffffff+24,ffffff+59&1+31,0+34;Custom)

要使边缘更加模糊，请将第二个不透明色标拖离白色更远 - 反之亦然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T13:19:26.943

**尝试使用带有box-shadow**的**inset**属性的白色背景来创建模糊边缘。虽然我不明白模糊对你意味着什么。如果您对边缘有特定的颜色，我也许可以给您代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:09:20.667

我想径向渐变对于这种目的来说是一种过度杀伤。这是具有更好浏览器支持的更简单的解决方案：http: [//cdpn.io/yrJji](http://cdpn.io/yrJji)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T13:38:45.800

使用 George Reith 建议的渐变。

CSS

```
#white-circle {
background: radial-gradient(ellipse at center center , #FFFFFF 24%, #FFFFFF 31%, rgba(255, 255, 255, 0) 34%, rgba(255, 255, 255, 0) 71%) repeat scroll 0 0 transparent;
height: 100px;
left: 150px;
position: absolute;
top: 0;
width: 100px;
z-index: 1;
} 
```

结果如下：http: [//jsbin.com/avipih/1](http://jsbin.com/avipih/1)

# clojure - Clojure 表单转字符串

> ID：15003103
> 
> 赞同：3
> 
> 时间：2013-02-21T13:10:58.543
> 
> 标签：clojure

有没有办法将 Clojure 表单转换为字符串？例如转换：

```
(and (f 1) (g 3)) 
```

至：

```
"(and (f 1) (g 3))" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T13:20:42.197

```
=> (defmacro string-it [x] (str x))
#'user/string-it
=> (string-it (+ 1 2))
"(+ 1 2)" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T13:16:21.827

你可以这样做：

```
(str '(and (f 1) (g 3))) 
```

编辑

如果您不熟悉它，`'`("quote") 字符是一个阅读器宏字符 ( [more](http://clojure.org/reader) )，它会转义代码 - 即阻止它被评估。

您还可以设置一个变量：

```
(def x '(and (f 1) (g 3)))
(str x) 
```

然后如果你想运行代码，你可以评估它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T13:23:15.973

或者，如果您事先不知道表格，您可以这样做，

```
(defmacro to-str [f]
  (str f))

(to-str (and (f 1) (g 3))) 
```

并得到，

```
"(and (f 1) (g 3))" 
```

# c - 使用线程的并发 TCP 服务器

> ID：15003105
> 
> 赞同：1
> 
> 时间：2013-02-21T13:11:11.630
> 
> 标签：c, multithreading, sockets, networking, tcp

我正在尝试创建一个并发 TCP 服务器，它接受多个（N 个连接），其中 N 是已知的。（例如 N = 8）所以我正在尝试创建一个预线程 TCP 服务器。

......

```
 for(i=0;i<NUMBER_OF_CONNECTIONS;i++)
    {
       CreateThreads(i);         
    }

    return 0;
}

//Create threads to handle the connection
void CreateThreads( int i )
{
  pthread_create(&thread_tid[i], NULL, thread_function, (void *) i);

  return; 
}

void* thread_function(void *arg)
{
        puts("In thread_function");
        int    client_soc,clilen;

        struct sockaddr_in *clientaddr;

        if( (clientaddr = malloc(addrlen)) == NULL)
          printf("malloc Error\n");

        printf("thread %d starting\n", (int) arg);
        while(1)
        {

                clilen = sizeof(struct sockaddr_in);
                pthread_mutex_lock(&mlock);

                puts("Calling accept \n");
                if ( (client_soc = accept(socket_desc, (struct sockaddr *)&clientaddr,(socklen_t*)&clilen)) < 0)
                {
                    printf("accept error\n");
                }
                pthread_mutex_unlock(&mlock);

                printf("Process Request...calling connection handler \n");
                connection_handler(client_soc);              /* process request */
                close(client_soc);
        }
}

//This will handle connection for each client
void *connection_handler(void *socket_desc)
{
    //Receive and process.....  
    return 0;
} 
```

在上面的代码中，创建了线程并调用了 thread_function()，但它没有按预期工作。该程序在调用 thread_function() 后结束，直到创建了几个线程。我实际上希望创建“N”个线程并等待客户端连接（使用accept（））。连接后，我想接收/收集数据（或）发送命令等。这就是我有 connection_handler() 的原因，但在那之前我被卡住了。

任何人都可以尝试更正 thread_function() 函数吗？我有点卡在这里。谢谢。 **更新** 该程序基于 [http://www.cse.fau.edu/~jie/research/publications/Publication_files/roussevwu.pdf](http://www.cse.fau.edu/~jie/research/publications/Publication_files/roussevwu.pdf) 查看第 3.2 节以了解如何使用锁定和接受。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:12:57.120

> 调用thread_function()后程序结束

问题是在创建线程后，主线程会通过并结束程序。你应该打电话`pthread_join`。

* * *

你的方法有问题。在你的代码中你锁定`mlock`然后你`accept(2)`。**您正在关键部分**调用阻塞函数。这严重限制了并行性，从而破坏了线程的大部分用途。

您可以尝试一种方法，其中主线程`accept`s 并将新套接字分派给线程。

# c# - 打开网络浏览器

> ID：15003109
> 
> 赞同：0
> 
> 时间：2013-02-21T13:11:16.550
> 
> 标签：c#, winforms, browser, tabcontrol

我创建了两个按钮关闭和新标签和一个加载谷歌的网络浏览器。当我单击新标签时，它会打开新标签，但不会打开网络浏览器。这是我到目前为止来自 Microsoft 帮助站点的代码。我正在使用带有 c# 的 Visual Studio 2012。

```
private void newTab_Click(object sender, EventArgs e)
{
    string title = "TabPage " + (tabControl1.TabCount + 1).ToString();
    TabPage myTabPage = new TabPage(title);
    tabControl1.TabPages.Add(myTabPage);
}

private void closeTab_Click(object sender, EventArgs e)
{
    tabControl1.TabPages.Remove(tabControl1.SelectedTab);
} 
```

目前我有这个代码，但是当我在搜索框中输入时，它只适用于标签页 1，而不适用于我打开的任何新标签，所以我需要在搜索框中添加一些代码？

我的代码是：

```
private void newTab_Click(object sender, EventArgs e)
{
    string title = "TabPage " + (tabControl1.TabCount + 1).ToString();
    TabPage myTabPage = new TabPage(title);

    var browser = new WebBrowser();
    browser.Dock = DockStyle.Fill;
    browser.Url = new Uri(@"http://www.google.com");

    myTabPage.Controls.Add(browser);
    tabControl1.TabPages.Add(myTabPage);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:17:06.827

您还必须将[`WebBrowser`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.webbrowser.aspx)控件的新实例添加到您的选项卡：

```
private void newTab_Click(object sender, EventArgs e)
{
    string title = "TabPage " + (tabControl1.TabCount + 1).ToString();
    TabPage myTabPage = new TabPage(title);

    // Create new WebBrowser instance
    var browser = new WebBrowser();
    browser.Dock = DockStyle.Fill;
    browser.Url = new Uri(@"http://www.google.de");

    // Add the WebBrowser control to the TabPage.
    myTabPage.Controls.Add(browser);
    tabControl1.TabPages.Add(myTabPage);
} 
```

每个`TabPage`最初都是空的，就像您使用设计器添加它一样。它的内容取决于您要添加的内容。共享`WebBrowser`-Control 没有意义，因为您想在不同的选项卡上打开不同的网站，我猜。

如果您不希望用户关闭第一个选项卡，您可以简单地检查用户请求关闭的选项卡是否是第一个创建的选项卡：

```
private void closeTab_Click(object sender, EventArgs e)
{
    // Is the Tab Page the first one?
    if (tabControl1.SelectedTab == tabControl1.TabPages[0])
        return;

    tabControl1.TabPages.Remove(tabControl1.SelectedTab);
} 
```

或者，如果您希望**至少一个**标签页保持“打开”状态，您可以使用[`TabCount`](http://msdn.microsoft.com/de-de/library/system.windows.forms.tabcontrol.tabcount.aspx)-Property：

```
private void closeTab_Click(object sender, EventArgs e)
{
    // Is the Tab Page the last one opened?
    if (tabControl1.TabCount == 1)
        return;

    tabControl1.TabPages.Remove(tabControl1.SelectedTab);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:17:11.370

您的代码中缺少[webbrowser](http://msdn.microsoft.com/de-de/library/aa752040%28v=vs.85%29.aspx)控件：

```
private void newTab_Click(object sender, EventArgs e)
{
        string title = "TabPage " + (tabControl1.TabCount + 1).ToString();
        TabPage myTabPage = new TabPage(title);
        tabControl1.TabPages.Add(myTabPage);
        WebBrowser wb = new WebBrowser();
        myTabPage.Controls.Add(wb);
        wb.Navigate("google.com");
}

private void closeTab_Click(object sender, EventArgs e)
{
    if(tabControl1.TabPages.Count == 1)
       return;

    tabControl1.TabPages.Remove(tabControl1.SelectedTab);
} 
```

# java - PKCS11 机制区别+JAVA

> ID：15003113
> 
> 赞同：2
> 
> 时间：2013-02-21T13:11:20.160
> 
> 标签：java, digital-signature, public-key-encryption, pkcs#11

我正在使用 PKCS11 机制实现功能 - CKM_RSA_PKCS 和 CKM_RSA_X_509。我知道两者都是在 Botan C++ 库中实现的，但我必须在 Java 中找到等价物。第二个问题是两者之间有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:14:50.743

[`CKM_RSA_PKCS`](http://www.cryptsoft.com/pkcs11doc/v220/group__SEC__12__1__6__PKCS____1__V1__5__RSA.html)指用于 RSA 加密和数字签名的 PKCS#1 v1.5 标准（参见[RFC3447 ）。](http://www.ietf.org/rfc/rfc3447.txt)在 Java JCE 中，它通常是 RSA 的默认选择。

*   对于数字签名，将*"MD5WithRSA"*、*"SHA1WithRSA"*等传递给`Signature.getInstance()`
*   对于加密，将*“RSA/None/PKCS1Padding”*传递给`Cipher.getInstance()`.

[`CKM_RSA_X_509`](http://www.cryptsoft.com/pkcs11doc/v220/group__SEC__12__1__12__X__509____RSA.html)指的是教科书（或原始）RSA 算法，即没有定义填充的算法。在这种情况下，您可以简单地将*“RSA/None/NoPadding”*传递给`Cipher.getInstance()`. 签名可以通过解密来完成，而验证可以通过加密来完成（然后是比较）。

我会避免实施和使用原始 RSA，除非您有特定的用例。PKCS#1v 1.5 签名更安全。不过，对于加密，我实际上不建议使用它们中的任何一个，因为它们都不安全。最好只依赖 PKCS#1 OAEP ( [`CKM_RSA_PKCS_OAEP`](http://www.cryptsoft.com/pkcs11doc/v220/group__SEC__12__1__8__PKCS____1__RSA__OAEP.html)); 为此，您将*“RSA/None/OAEPWithSHA1AndMGF1Padding”*传递给`Cipher.getInstance()`.

# asp.net-mvc - Visual Studio 中的 ASP.NET、MVC、C# 项目需要很长时间才能启动

> ID：15003114
> 
> 赞同：2
> 
> 时间：2013-02-21T13:11:27.273
> 
> 标签：asp.net-mvc, visual-studio-2010

我正在 Visual Studio 中测试一个 ASP.NET、MVC、C# 项目，当我尝试启动它时，它需要很*长时间*才能出现。在我尝试停止调试后，它也需要*永远停止。*是否有一些工具或实用程序可以用来查看阻塞在哪里？

谢谢！

# extjs - GXT 网格布局问题 - 没有垂直滚动条

> ID：15003115
> 
> 赞同：1
> 
> 时间：2013-02-21T13:11:27.783
> 
> 标签：extjs, grid, scrollbar, gxt

我正在尝试将 Grid 添加到固定大小（250 像素）的 VerticalLayoutContainer 中，并让用户能够垂直滚动。

我正在使用以下代码，但是，网格根本不显示。

```
 VerticalLayoutContainer vPanel = new VerticalLayoutContainer();
    vPanel.setHeight("250px");
    vPanel.add(grid, new VerticalLayoutData(1, 1));

    grid.setHeight("auto");

    add(vPanel); 
```

Grid 在其他情况下显示，但会覆盖其他 GUI 元素（无滚动条）。

希望这对于那些对 Sencha GXT 更有经验的人来说是一个简单的解决方法。

感谢任何花时间帮助我的人...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:11:05.123

尝试这个：

`vPanel.getScrollSupport().setScrollMode(ScrollMode.auto);`

如果它不起作用，那么，试试这个：

`

```
ContentPanel p = new ContentPanel();
p.setHeaderVisable(false);
p.setBodyBorder(false);
p.setBorder(false);
p.setHeigh(250);
vPanel.add(p);
p.add(grid); 
```

`

然后网格，将自动具有滚动模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T18:41:14.440

`Grid`我在 a中遇到了同样的问题`ContentPanel`，即网格没有显示垂直滚动条。我`ContentPanel#forceLayout`在将网格添加到面板后立即使用，它解决了问题。这是实际的代码：

```
Grid<Pet> grid = new Grid<>(listStore, columnModel);
grid.setBorders(true);
grid.setColumnReordering(true);
grid.setLoadMask(true);
grid.setSelectionModel(selectionModel);
grid.setView(createGridView());
ContentPanel contentPanel = new ContentPanel();
contentPanel.setHeaderVisible(false);
contentPanel.add(grid);
contentPanel.forceLayout(); // <---- this is the line that fixed the problem! 
```

# mongodb - Meteor -MongoDB - 用于 SaaS 产品的单个数据库或多个数据库

> ID：15003125
> 
> 赞同：0
> 
> 时间：2013-02-21T13:11:50.213
> 
> 标签：mongodb, meteor

这是另一个问题，我认为应该由流星团队回答，因为到目前为止我找不到直接的答案。

“..我们决定将 MongoDB 用于我们正在创建的 SaaS 产品。每个注册的公司都有自己的 url (mycompany.domain.com) 和他们自己的一组私有用户、项目等......因为我们是使用 NoSQL 解决方案，并且不必像使用 MySQL 那样管理向每个数据库推送模式更新，我想知道是拥有一个包含所有数据的大型数据库，还是每个客户端拥有一个数据库会更好……”

那么，我可以使用流星方法（使用一个流星项目/服务器）：1）每家公司的不同网址 2）每家公司和特定公司用户的不同数据库（在同一个 monodb 服务器中）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:34:07.890

如果您查看流星自己的托管，他们使用 MongoHQ 的 mongodb 服务器。您可以将多个流星服务器与单个 mongodb 服务器和多个数据库一起使用。

我认为这更多地取决于您的应用程序设计，Meteor 可以使用任何一种设计。

1）您可以使用发布功能为每个客户提供来自一个巨大数据库的仅他/她自己的记录，使用一种方法将子域 http 主机获取到发布功能，因此它只给出该集合的数据。

2）在一台服务器上使用单独的流星实例连接到他们自己的 mongodb 数据库，并使用某种代理将它们服务到子域。您可以使用您想要的任何数据推送每个，甚至可能是单独的应用程序集。

这真的取决于你正在建造什么。如果您*只想*更新一组数据，以便为每个人更新，您可以使用 1)，所以如果您的用例需要这样做，它可能是一个更好的选择。

使用单独的流星实例的好处主要是定制。用你提供的细节很难得到你想要的东西的要点，所以请简短地说：如果你希望每个客户的能力非常不同，请使用 2)，否则使用 1)

如果您查看 Meteor.com 的托管，我认为每个部署都有自己的数据库，主要原因：自定义，每个人的部署可能完全不同。

更新：

截至 2014 年 3 月，有一个第三方[环境包meteor-dbproxy](https://github.com/TimHeckel/meteor-dbproxy)允许您在后端使用多个 mongodb 服务器（以及单独的 oplog 集成端点），从而允许您进行 db 级沙盒多租户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:33:10.963

从 MongoDB 的角度来看，您可以为每个客户端创建一个数据库。当前稳定的 MongoDB 版本 2.2 具有数据库级锁定，而不是以前版本的大型全局锁定。

这样，如果您的一个客户正在敲击系统，它们不会影响您的其他具有全局锁的客户。

# java - 我应该音译来本地化个人资料信息/网站内容吗

> ID：15003126
> 
> 赞同：0
> 
> 时间：2013-02-21T13:11:51.317
> 
> 标签：java, jsp, localization, transliteration

我想在我的网站中实现本地化，它是在 JSP 中。我应该如何本地化存储在表中的内容？

1.  我应该将不同语言的数据本身存储在表中吗
2.  如果是，我应该如何接受输入数据？
3.  或者我应该接受数据并以英语存储并在显示该内容时进行音译。

网站 UI 可以轻松本地化，但对存储在数据库中的内容感到很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:07:50.613

想到了两个解决方案：

1.  为每种语言创建不同的`Books`表。并将每本书的所有数据存储在那里。

2.  用,等表`Books`的辅助键创建单个表。然后这些辅助表存储每个字符串的翻译版本。该建议的优点是不复制不需要翻译的数据（例如 ISBN 号）。`Titles``Authors`

# c++ - SQL 解析器库 - 从查询中获取表名

> ID：15003128
> 
> 赞同：4
> 
> 时间：2013-02-21T13:12:01.567
> 
> 标签：c++, sql, c, parsing

我正在寻找一个 C/C++ SQL 解析库，它能够为我提供查询所依赖的表的名称。

我的期望：

```
 SELECT * FROM TABLEA NATURAL JOIN TABLEB 
```

结果：TABLEA、TABLEB

当然提供的例子非常简单。我已经编写了自己的解析器（基于 Boost.Spirit）来处理 SQL 语法的一个子集，但我需要的是一个能够处理复杂（递归等）查询的解析器。

你知道什么有用的吗？

我发现的是[http://www.sqlparser.com](http://www.sqlparser.com) - 它是商业的，但正是我需要的。我还深入研究了 PostgreSQL 源代码，但没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:01:25.033

Antlr 可以为您生成一个不错的 SQL 解析器（解析器的源代码可以是 C++），并且可用的 SQL 语法很少：[http ://www.antlr3.org/grammar/list.html](http://www.antlr3.org/grammar/list.html)

如果您只对表名感兴趣，那么采用其中一种语法并添加收集这些名称的语义操作应该相当容易。

对 Antlr 和 Bison/Yacc & Lex/Flex 有一些经验，我绝对推荐 Antlr。它是用 Java 编写的，但目标语言可以是 C++ - 生成的代码实际上是可读的，看起来像是由人类编写的。Antlr生成解析器的调试还算OK，Bison生成的就不好说了。。

还有其他选项，例如 Lemon 和 sqlite 语法，如果您愿意，可以看看这个问题：[SQL parser in C](https://stackoverflow.com/questions/1147212/sql-parser-in-c)

# android - 在Unity3D生成的“AndroidManifest.xml”中找到“Android类名”

> ID：15003129
> 
> 赞同：9
> 
> 时间：2013-02-21T13:12:04.783
> 
> 标签：android, facebook, unity3d, facebook-apps

在 Facebook 应用程序中配置“Android 原生应用程序”时，它们需要**Android 类名**。如果您从 Unity3D 创建了 Android APK，您怎么知道要使用哪个类？

![在此处输入图像描述](../Images/7c3563c98f398210d76a3f325835b52a.png)

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:installLocation="preferExternal" package="--------------" android:versionName="1.02" android:versionCode="8">
  <supports-screens android:smallScreens="true" android:normalScreens="true" android:largeScreens="true" android:xlargeScreens="true" android:anyDensity="true" />
  <application android:icon="@drawable/app_icon" android:label="@string/app_name" android:debuggable="true">
    <activity android:name="com.unity3d.player.UnityPlayerProxyActivity" android:label="@string/app_name" android:configChanges="fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen" android:screenOrientation="landscape">
      <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
    </activity>
    <activity android:name="com.unity3d.player.UnityPlayerActivity" android:label="@string/app_name" android:configChanges="fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen" android:screenOrientation="landscape">
    </activity>
    <activity android:name="com.unity3d.player.UnityPlayerNativeActivity" android:label="@string/app_name" android:configChanges="fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen" android:screenOrientation="landscape">
      <meta-data android:name="android.app.lib_name" android:value="unity" />
      <meta-data android:name="unityplayer.ForwardNativeEventsToDalvik" android:value="false" />
    </activity>
    <activity android:name="com.unity3d.player.VideoPlayer" android:label="@string/app_name" android:configChanges="fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen" android:screenOrientation="landscape">
    </activity>
    <!-- ACTIVITIES -->
    <activity android:name="com.prime31.FacebookProxyActivity" />
    <!-- META-DATA -->
  </application>
  <!-- PERMISSIONS -->
  <uses-permission android:name="android.permission.INTERNET" />
  <uses-feature android:glEsVersion="0x00020000" />
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
  <uses-feature android:name="android.hardware.sensor.accelerometer" />
  <uses-feature android:name="android.hardware.touchscreen" />
  <uses-feature android:name="android.hardware.touchscreen.multitouch" android:required="false" />
  <uses-feature android:name="android.hardware.touchscreen.multitouch.distinct" android:required="false" />
  <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T17:34:31.063

该字段应该是您的主要活动（与 MAIN 和 LAUNCHER 相关联）。在这种情况下，我认为应该是 com.unity3d.player.UnityPlayerProxyActivity。

如果您使用本机深层链接，这主要是必需的（因此 FB 应用程序可以创建直接调用您的活动的意图）。在这方面，您的应用程序中的任何可公开访问的 Activity 都可以。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-23T22:04:33.797

主要活动的标签应该包含一个`intent-filter`带有 action`android.intent.action.MAIN`和 category的标签`android.intent.category.LAUNCHER`。

`intent-filter`标签的描述（来自文档）：

> 指定活动、服务或广播接收器可以响应的意图类型。意图过滤器声明其父组件的功能——活动或服务可以做什么以及接收器可以处理哪些类型的广播。它打开组件以接收广告类型的意图，同时过滤掉那些对组件没有意义的意图。过滤器的大部分内容由其`<action>`、`<category>`和`<data>` 子元素描述。
> 
> 有关过滤器的更详细讨论，请参阅单独的 Intents 和 Intent Filters 文档，以及简介中的 Intents Filters 部分。

Android 应用程序的主要活动有一个`intent-filter`类别`LAUNCHER`，它基本上告诉活动可以“启动应用程序”（换句话说，它是启动器/条目）。

`activity`标签应如下所示：

```
<activity android:name="ActivityClassName" android:label="Activity title">
    <!-- The intent filter -->
    <intent-filter>
        <!-- The action -->
        <action android:name="android.intent.action.MAIN"/>
        <!-- The category -->
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>
</activity> 
```

通过查看您`AndroidManifest.xml`的 Activity，您可以得出结论，您的应用程序的主要 Activity 是`com.unity3d.player.UnityPlayerProxyActivity`Activity，因为它包含`intent-filter`匹配这些条件。

祝你游戏好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-15T08:21:52.890

不再适用于所有统一版本的“UnityPlayerProxyActivity”。您可能必须改用“UnityPlayerActivity”。

细节：

如果您从 unity 导出 Android 项目，您可能会在 src 中找到三个类：

*   unityPlayerActivity
*   unityPlayerNativeActivity
*   UnityPlayerProxyActivity

自 Unity 5.0 beta12 起，“UnityPlayerProxyActivity”和“UnityPlayerNativeActivity”已被弃用，因此您必须改用“UnityPlayerActivity”。

在 Facebook 中输入：

**[tld.yourdomain.game].UnityPlayerActivity**

当然，将 [...] 部分替换为您的应用程序细节。注意：如果您有一些插件/扩展与您的清单摆弄，那么这可能会有所不同。

更新：在较新版本的 Facebook SDK for Unity（使用 7.9.4 测试）中，您只需在 Assets 文件夹中搜索“FacebookSettings”，它就会告诉您要使用的类名（“com.facebook.unity.FBUnityDeepLinkingActivity”例如）。

# python - 在 NLTK 中使用 POS 标签的 CFG

> ID：15003136
> 
> 赞同：-4
> 
> 时间：2013-02-21T13:12:31.333
> 
> 标签：python, nlp, nltk

我正在尝试使用 NLTK检查给定的句子是否符合*语法。*

前任：

> OK : 鲸舔悲伤
> 
> 不好：我曾经拥有过的最好的

我知道我可以进行 POS 标记，然后使用 CFG 解析器并以这种方式进行检查，但我还没有找到使用 POS 标记而不是实际单词作为终端分支的 CFG。

有没有人可以推荐的CFG？我认为自己制作是愚蠢的，因为我不是语言学家，可能会遗漏重要的结构。

另外，我的应用程序是这样的，理想情况下，系统会拒绝许多句子，只批准它非常确定的句子。

感谢：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T02:01:29.003

CFG 的终端节点可以是任何东西，甚至是 POS 标签。只要您的短语规则将 POS 而不是单词识别为输入，使用 POS 声明语法应该没有问题。

```
import nltk
# Define the cfg grammar.
grammar = nltk.parse_cfg("""
S -> NP VP
NP -> 'DT' 'NN'
VP -> 'VB'
VP -> 'VB' 'NN'
""")

# Make your POS sentence into a list of tokens.
sentence = "DT NN VB NN".split(" ")

# Load the grammar into the ChartParser.
cp = nltk.ChartParser(grammar)

# Generate and print the nbest_parse from the grammar given the sentence tokens.
for tree in cp.nbest_parse(sentence):
    print tree 
```

# jquery - jQuery：一键触发多个事件

> ID：15003138
> 
> 赞同：1
> 
> 时间：2013-02-21T13:12:32.597
> 
> 标签：jquery, ajax

我有一个登录表单，其中有 和 的两个`Add member`链接`Reset password`。我还使用 jQuery Ajax 来更新相应的 div。我正在研究 Google App Engine 和 Python。代码如下：

base.html：

```
...
<div id="loginDiv">{% include "login.html" %}</div>
... 
```

登录.html：

```
<a href="/login?arg1=resetPassword" class="resetPassword">Reset Password</a>
<a href="/addMember" class="addMember">Add member</a>

$(document).ready(function() {
  // Add member
  $('body').on('click', 'a.addMember', function() {
    var url = $(this).attr('href');
    $('#content').load(url);
      return false;
  });
  // Reset password
  $('body').on('click', 'a.resetPassword', function() {
    var url = $(this).attr('href');
    $('#loginDiv').load(url);
      return false;
  });
}); 
```

问题是：当我单击其中一个按钮时，将触发多个事件。问题是否来自我对 jQuery 的错误使用`$('body')`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:16:34.940

如果代码是通过 ajax 加载的，请确保您没有多次运行该 javascript 代码。

快速解决方法是执行以下操作：

```
$('body').off('click','a.resetPassword');
$('body').on('click', 'a.resetPassword', function() { ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:21:33.110

使用以下代码

```
$("a.resetPassword").click(function(){
                                        // Write your logic here
                                     });

$("a.addMember").click(function(){
                                        // Write your logic here
                                     }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T13:24:34.993

我建议您像这样干燥您的代码：

HTML：

```
<a href="/login?arg1=resetPassword" class="loadLink" data-target="#loginDiv">Reset Password</a>
<a href="/addMember" class="loadLink" data-target="#content">Add member</a> 
```

jQuery：

```
$(function() {

  $('body').on('click', 'a.loadLink', function(e) {

    e.preventDefault();
    var $this = $(this);
    $( $this.data('target') ).load($this.attr('href'));
    return false;

  });

}); 
```

您使用单个类，然后依靠`data-target`属性告诉 js 在哪里加载 href 内容。

# java - JavaFX幻灯片动画闪烁

> ID：15003145
> 
> 赞同：0
> 
> 时间：2013-02-21T13:12:49.293
> 
> 标签：java, user-interface, animation, javafx-2, javafx

如果用户将鼠标悬停在 a 的顶部 3% 上，我有一个从场景顶部滑出的菜单，`WebView`否则它将占据场景的整个高度。在滑动动画期间我无法摆脱“闪烁”。

* * *

下面是控制器的 FXML 的一个想法：

```
<fx:root type="javafx.scene.layout.StackPane" minHeight="768.0" minWidth="1024.0" xmlns:fx="http://javafx.com/fxml">
  <children>
    <WebView fx:id="wv" onKeyPressed="#onKeyDown" onMouseMoved="#onMouseMove" prefHeight="768.0" prefWidth="1024.0" />
    <VBox fx:id="vbox_slideview" fillWidth="true" maxHeight="326.0" maxWidth="1024.0" minHeight="326.0" minWidth="1024.0" prefHeight="326.0" prefWidth="1024.0" visible="false" StackPane.alignment="TOP_CENTER">
      ...
      <StackPane.margin>
       <Insets top="-326.0" />
      </StackPane.margin>
    </VBox>
  </children>
</fx:root> 
```

请注意，该`root`元素是我的扩展控制器类`StackPane`。

这是基本的 onMouseMove （现在我只想让它正确向下滑动）：

```
public void onMouseMove(MouseEvent e)
{
    if (e.getSceneY() < 0.03 * stage.getScene().getHeight())
    {
        this.vbox_slideview.setVisible(true);
        TimelineBuilder.create().keyFrames(
            new KeyFrame(
                Duration.millis(300),
                new KeyValue(this.vbox_slideview.layoutYProperty(),
                0)))
            .build().play();
    }
} 
```

这会闪烁，所以我添加了一个“阻止机制”来阻止新动画运行，而另一种方式是：

```
Timeline    anim    = null;
boolean     blocked = false;

public boolean isBlocked()
{
    return blocked;
}

public void setBlocked(boolean blocked)
{
    this.blocked = blocked;
}

public void onMouseMove(MouseEvent e)
{
    if (isBlocked())
        return;

    setBlocked(true);

    if (e.getSceneY() < 0.03 * stage.getScene().getHeight())
    {
        this.vbox_slideview.setVisible(true);
        this.anim = TimelineBuilder.create().keyFrames(new KeyFrame(Duration.millis(300), new KeyValue(this.vbox_slideview.layoutYProperty(), 0))).build();
        this.anim.statusProperty().addListener(new ChangeListener<Status>() {
            @Override
            public void changed(ObservableValue<? extends Status> observableValue, Status oldValue, Status newValue)
            {
                if (newValue == Status.STOPPED)
                {
                    setBlocked(false);
                }
            }
        });
        this.anim.play();
        return;
    }

    setBlocked(false);
} 
```

*你会注意到我把动画放在了一个类变量中。这是因为我尝试了其他几种阻止动画的方法，由以下问题中的帖子建议：[如何找出转换是否已经在节点上运行？](https://stackoverflow.com/questions/12663730/how-to-find-out-if-a-transition-is-already-running-on-a-node)所有这些方法都提供相同的结果。*

我还为滑动菜单的 Y 属性引入了一个监听器`initialize()`：

```
vbox_slideview.layoutYProperty().addListener(new ChangeListener<Number>() {
    @Override
    public void changed(ObservableValue<? extends Number> arg0, Number arg1, Number arg2)
    {
        System.out.println("y = " + arg0.getValue().intValue());
    }
}); 
```

结果很奇怪（强调我的）：

```
(Status == RUNNING)
y = -325
y = -308
y = -287
y = -269
y = -326 <<
y = -218
y = -326 <<
y = -196
y = -178
y = -326 <<
y = -158
y = -326 <<
y = -132
y = -120
y = -326 <<
y = -96
y = -326 <<
y = -76
y = -60
y = -326 <<
y = -28
y = -326 <<
y = -2
y = 0
(Status == STOPPED) 
```

该`layoutY`属性在动画期间随机设置为起始值。此外，当鼠标光标在菜单上时，`onMouseMove`不应触发，因为它只是`WebView`. 但是，动画完成后，我将光标移到窗口顶部 3% 的下方，`vbox_slideview`消失并`layoutY`立即设置为`-326`. 结束时不应发生这种情况`vbox_slideview`。

为什么总是`vbox_slideview`被重置到它的起始位置？

* * *

## 更新

如果我将光标快速移动到顶部 3% 上，使其不会停留在那里，动画运行良好。这让我认为这些事件是并行处理的，而不是顺序处理的，即使第一个事件阻止了后续事件的处理，也已经有很多其他事件正在处理中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:06:28.667

您向我们展示了滑块的“弹出”部分，还需要自动隐藏部分进行全面检查。我怀疑您的自动隐藏部分在弹出滑动时和完成后都不断被触发。无论如何，为什么每次都创建时间线，只使用它的一个实例。
在我的测试用例（Javafx 版本 2.2.0）中，与你的代码相似，滑块显示没有闪烁，并在动画完成后以 layoutY = 0 停留在屏幕上：

示例.fxml

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.web.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<StackPane id="StackPane" minHeight="568.0" minWidth="824.0" xmlns:fx="http://javafx.com/fxml" fx:controller="demo.SampleController">
  <children>
    <WebView fx:id="wv" onMouseMoved="#onMouseMove" prefHeight="568.0" prefWidth="824.0" />
    <VBox fx:id="vbox_slideview" fillWidth="true" maxHeight="326.0" maxWidth="824.0" minHeight="326.0" minWidth="824.0" prefHeight="326.0" prefWidth="824.0"
          visible="false" StackPane.alignment="TOP_CENTER" style="-fx-background-color: green">
      <StackPane.margin>
       <Insets top="-326.0" />
      </StackPane.margin>
    </VBox>
  </children>
</StackPane> 
```

样品控制器

```
public class SampleController implements Initializable {

    @FXML
    private VBox vbox_slideview;

    private Timeline timeline;

    @FXML
    public void onMouseMove(MouseEvent e) {
        if (e.getSceneY() < 0.03 * JavaFXApplication110.instance.stage.getScene().getHeight()) {
            this.vbox_slideview.setVisible(true);
            if (timeline.getStatus().equals(Animation.Status.STOPPED)) {
                timeline.play();
            }
        }
    }

    @Override
    public void initialize(URL url, ResourceBundle rb) {
        vbox_slideview.layoutYProperty().addListener(new ChangeListener<Number>() {
            @Override
            public void changed(ObservableValue<? extends Number> arg0, Number arg1, Number arg2) {
                System.out.println("y = " + arg0.getValue());
            }
        });

        timeline = TimelineBuilder.create().keyFrames(
                new KeyFrame(
                Duration.millis(300),
                new KeyValue(this.vbox_slideview.layoutYProperty(),
                0)))
                .build();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T07:04:19.037

不要使用 LayoutX/Y() ... 使用 TranslateX/Y()

# visual-studio-2010 - SolutionContext.ConfigurationName 设置返回 E_FAIL

> ID：15003146
> 
> 赞同：1
> 
> 时间：2013-02-21T13:12:49.380
> 
> 标签：visual-studio-2010, envdte, vs-extensibility

我在基于 MPF for Projects - Visual Studio 2010 的自定义项目中有以下代码：

```
 EnvDTE.Project dteProj = CurrentProject();
  dteProj.ConfigurationManager.AddConfigurationRow("MyCustomConfig", "Debug", false);
  var solution = dteProj.DTE.Solution as EnvDTE90.Solution3;
  foreach (EnvDTE80.SolutionConfiguration2 solConfig in solution.SolutionBuild.SolutionConfigurations)
  {
    foreach (EnvDTE.SolutionContext solContext in solConfig.SolutionContexts)
    {
      if (dteProj.UniqueName != solContext.ProjectName)
        continue;

      //Returns E_FAIL 
      solContext.ConfigurationName = "MyCustomConfig";
    }
  } 
```

如您所见，一切都非常简单。我为我的项目创建了一个新配置，并希望在解决方案上下文中使用它。设置配置名称返回 E_FAIL。

为什么任务失败？从“配置管理器”对话框的下拉列表中为项目选择项目配置的正确编程等效项是什么？

谢谢

# android - 使用存储在 SDCard 中的文件作为浏览器上内部网站的资源

> ID：15003155
> 
> 赞同：0
> 
> 时间：2013-02-21T13:13:01.993
> 
> 标签：android

我需要从网上下载一些资源，然后在本地处理它们并在 BrowserActivity 上显示它们。

由于资源（图像）可能非常大，我将它们保存在 SDCard 中。

1.  如何从 html 页面引用那些存储的资源？html 页面嵌入到我的应用程序中（它位于 assets 文件夹中）。我认为这会引发某种安全问题。
2.  这是正确的方法吗？还是有更好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:25:51.903

问题 1) 的答案：您可以使用“file://”前缀引用 sd 卡上的文件。请参见下面的示例：

```
String fileName = "x"; // here is the file name of the downloaded image

String imagePath = "file://" + getApplicationContext().getFileStreamPath(fileName.getAbsolutePath();    

String html = html+"<img src=\"" + imagePath + "\"/>" // embed that code in your modified html source. 
```

# java - 如何打印出 JTable 的特定行/列？

> ID：15003159
> 
> 赞同：1
> 
> 时间：2013-02-21T13:13:20.810
> 
> 标签：java, swing, jtable, awt

我可以打印一个完整的 JTable，但实际上我想要更多只打印 JTable 的特定部分，例如从第 10 行到第 50 行和第 70 列到第 150 列。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-26T10:31:37.817

我也遇到过这个问题。通过在打印前隐藏列并在打印后恢复列来解决：

```
// get column num from settings
int num = gridSettings.getColumnsOnPage();// first <num> columns of the table will be printed   

final TableColumnModel model = table.getColumnModel();

// list of removed columns. After printing we add them back
final List<TableColumn> removed = new ArrayList<TableColumn>();

int columnCount = model.getColumnCount();

// hiding columns which are not used for printing
for(int i = num; i < columnCount; ++i){
    TableColumn col = model.getColumn(num);
    removed.add(col);
    model.removeColumn(col);
}                                                   

// printing after GUI will be updated
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        // table printing
        try {
            table.print(PrintMode.FIT_WIDTH, null, null, true, hpset, true); // here can be your printing
        } catch (PrinterException e) {
            e.printStackTrace();
        }

        // columns restoring
        for(TableColumn col : removed){
            model.addColumn(col);
        }
    }
}); 
```

要打印 JTable 的特定部分，只需稍微更改此代码即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:55:37.613

获取所选片段的单元格边界并计算所需区域（`Rectangle`），定义剪辑区域以仅绘制所需区域，在可打印中使用`Graphics's`translate() 方法来移动渲染。

# css - 多个类同名？

> ID：15003164
> 
> 赞同：5
> 
> 时间：2013-02-21T13:13:36.557
> 
> 标签：css, class

多个类同名？我知道它有效，但它有效吗？

```
.color {color:orange;}
.first .color {color:blue;}
.second .color {color:red;} 
```

```
<div class="color">
some text here
</div>

<div class="first">
some <span class="color"> text here</span>
</div>

<div class="second">
some <span class="color"> text here</span>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T13:21:00.480

这是完全有效的，并且完全可读。请特别注意，声明类的顺序并不重要。CSS 的工作原理是最具体的选择器获胜。

```
.color {color:orange;} 
```

> 定义任何具有类**颜色**的元素都是橙色的。

```
.first .color {color:blue;} 
```

> 定义任何具有 class **color** *的元素是具有 class **first***的元素的后代的元素是蓝色的

```
.second .color {color:red;} 
```

> 定义任何具有类**color且是类** ***second****的元素的后代的元素***都是红色的**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:25:47.283

那是一个后代选择器：

```
.first .color {color:blue;} 
```

将作为具有类的元素`color`的后代的具有类的元素`first`。请注意，这与`>`仅匹配直接子代的子选择器 ( ) 不同。后代选择器匹配任何级别的从父级下降的元素。

来自[W3C 文档](http://www.w3.org/wiki/CSS/Selectors/combinators/descendant)：

> **后代组合子 AB**
> 
> “A B”形式的选择器表示元素“B”，它是某个祖先元素“A”的任意后代。后代组合器是分隔两个简单选择器序列的空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:17:45.303

它会起作用，但在这种情况下它不是很可读。**

# ruby-on-rails - 在 Rails 日志中，“DB”和“View”时间之和有时大于“Completion”时间。为什么？

> ID：15003169
> 
> 赞同：1
> 
> 时间：2013-02-21T13:13:54.107
> 
> 标签：ruby-on-rails, ruby, performance, logging, rails-activerecord

在对我的一个 Rails 应用程序的本地副本运行一些性能测试后，日志中出现了这一行：

```
Completed in 32ms (View: 1, DB: 1143) | 200 OK [http://127.0.0.1/salons/1/calendar/events?staff_id=false&start=1361397600&end=1361484000&_=1361451249651] 
```

这是另一个：

```
Completed in 133ms (View: 99, DB: 145) | 200 OK [http://127.0.0.1/salons/1/checkins] 
```

这一点意义都没有！你知道什么会导致这样的事情吗？

顺便说一句，该应用程序在 Rails 2.3.17 和 Ruby 1.9.3 下运行。

# java - 来自 JOptionPane 的返回值，指示选定的按钮

> ID：15003170
> 
> 赞同：1
> 
> 时间：2013-02-21T13:13:53.843
> 
> 标签：java, switch-statement, joptionpane

我已经制作了一个选项面板，但我无法让按钮按预期执行。我试图将 action 设置为连接到面板的 int，但这不起作用。

```
Object[] choices = null;
    Object[] options = { "Criticals", "Pure Damage", "Heal 300 points", "Flee" };
    JOptionPane.showOptionDialog(null, "What will you do?", "action",
            JOptionPane.DEFAULT_OPTION, JOptionPane.QUESTION_MESSAGE,
            null, options, options[0]);

    switch (action)
    {
    case 0: 
        int Criticals = (int) (Math.random()*500);
        Criticals++;
        caitlyn.enemyhealth = (caitlyn.enemyhealth-Criticals);
        JOptionPane.showMessageDialog(null, "Caitlyn now has" +" " + caitlyn.enemyhealth + "HP left");
        break;
    case 1:
        int PureDamage = (int) (Math.random()*300);
        PureDamage++;
        caitlyn.enemyhealth = (caitlyn.enemyhealth-PureDamage);
        JOptionPane.showMessageDialog(null, "Caitlyn now has" + " " + caitlyn.enemyhealth + "HP left");
        break;
    case 2:
        int heal = 300;
        heal++;
        newchamp.health = (newchamp.health+heal);
        JOptionPane.showMessageDialog(null,  "You now have"+ " " + newchamp.health + "HP points!");
        break; 
```

另外，我不知道我将如何做到这一点，以便已经完成的伤害或治疗被保存并在下一次攻击时保持在该水平，而不是返回默认值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:17:25.533

我认为你需要：

```
 int action = JOptionPane.showOptionDialog(null, "What will you do?", "action",
        JOptionPane.DEFAULT_OPTION, JOptionPane.QUESTION_MESSAGE,
        null, options, options[0]); 
```

您忽略了该方法的返回值，该值告诉您按下了哪个按钮。

# javascript - jquery append 不会附加来自 for 循环的大 html

> ID：15003171
> 
> 赞同：0
> 
> 时间：2013-02-21T13:13:56.683
> 
> 标签：javascript, jquery

我不太清楚为什么当我有很多数据要附加时我没有附加任何数据。

当我有 3 个对象时它工作正常，对于更大的数量它不会附加数据。我相信在 for 循环完成之前调用了 append 。可能是这样吗？

**建设`<tr>`的：**

```
for (var i = 0; i < obj.length; i++) {
    if (obj[i].indiceId === 4 && dinamicDom !== 'dinamic_index_busca_edit') {
        var dateChkBox = '<p class="pDtPeriodoChk"><input type="checkbox" name="dtPeriodoChk" class="dtPeriodoChk" id="' + i + '_chk">Por Período</p>';
        trs = trs + '<tr class="' + dinamicDom + '" style="padding-top:10px;"><td class="smallMediumField ' + i + '" style="padding-top:10px;"><fieldset class="dataFieldset"><legend>' + obj[i].indiceName + '</legend>' + dateChkBox + '<span id="' + i + '_lblDtInicio" class="lblDataInicio" style="display:none"><br />Data Inicio:</span><table><tr><td><img src="/Images/equal.png" alt="Igual a"/></td><td><input type="text" id="' + i + '" name="data" class="selectInput limpar" ';

        if (obj[i].valor !== null && obj[i].valor !== '') {
            trs = trs + ' value="' + obj[i].valor + '" ';
        }    
        trs = trs + '></td></tr></table><input type="hidden" id="' + obj[i].indiciId + '" name="data_indices" value="' + obj[i].indiciId + '" class="selectInput"></fieldset></td></tr>';
   } else {
       trs = trs + '<tr class="' + dinamicDom + '"><td class="smallMediumField ' + i + '" style="padding-top:10px;">' + obj[i].indiceName + '<br /><input type="text" id="' + i + '" name="groupBusca" class="selectInput limpar" ';
       if (obj[i].valor !== null && obj[i].valor !== '') {
           trs = trs + ' value="' + obj[i].valor + '" ';
       }
       trs = trs + '></td></tr></table><input type="hidden" id="' + obj[i].indiciId + '" name="indicesBusca" value="' + obj[i].indiciId + '" class="selectInput"></td></tr>';
   } 
```

}

**附加：**

```
$('#tblBusca').append(trs); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:20:35.547

尝试逐行追加

```
for (var i = 0; i < obj.length; i++) {
    var trs;

    if (obj[i].indiceId === 4 && dinamicDom !== 'dinamic_index_busca_edit') {
        var dateChkBox = '<p class="pDtPeriodoChk"><input type="checkbox" name="dtPeriodoChk" class="dtPeriodoChk" id="' + i + '_chk">Por Período</p>';
        trs = trs + '<tr class="' + dinamicDom + '" style="padding-top:10px;"><td class="smallMediumField ' + i + '" style="padding-top:10px;"><fieldset class="dataFieldset"><legend>' + obj[i].indiceName + '</legend>' + dateChkBox + '<span id="' + i + '_lblDtInicio" class="lblDataInicio" style="display:none"><br />Data Inicio:</span><table><tr><td><img src="/Images/equal.png" alt="Igual a"/></td><td><input type="text" id="' + i + '" name="data" class="selectInput limpar" ';

        if (obj[i].valor !== null && obj[i].valor !== '') {
            trs = trs + ' value="' + obj[i].valor + '" ';
        }    
        trs = trs + '></td></tr></table><input type="hidden" id="' + obj[i].indiciId + '" name="data_indices" value="' + obj[i].indiciId + '" class="selectInput"></fieldset></td></tr>';
   } else {
       trs = trs + '<tr class="' + dinamicDom + '"><td class="smallMediumField ' + i + '" style="padding-top:10px;">' + obj[i].indiceName + '<br /><input type="text" id="' + i + '" name="groupBusca" class="selectInput limpar" ';
       if (obj[i].valor !== null && obj[i].valor !== '') {
           trs = trs + ' value="' + obj[i].valor + '" ';
       }
       trs = trs + '></td></tr></table><input type="hidden" id="' + obj[i].indiciId + '" name="indicesBusca" value="' + obj[i].indiciId + '" class="selectInput"></td></tr>';
   }

    $('#tblBusca').append(trs);
} 
```

# python - 同步 PySCXML

> ID：15003174
> 
> 赞同：2
> 
> 时间：2013-02-21T13:14:02.470
> 
> 标签：python, state-machine, scxml

我目前正在研究 Python 的习语和库，以帮助我进行控制任务的状态机设计。

我在另一个 SO 问题中找到了很好的建议：[Python state-machine design](https://stackoverflow.com/questions/2101961/python-state-machine-design)。在答案中，建议使用[PySCXML](https://github.com/jroxendal/PySCXML)来解释[状态图 XML](http://www.w3.org/TR/scxml/)文件。

我关心 PySCXML 自述文件中的以下句子：

> 您可以使用 StateMachine 实例的 send 方法将事件发送到您的状态机 [...] 当然，您必须从不同的线程发送

**这是否意味着我不能让状态机处理同步运行？**

当我想象在我的控制任务中使用 PySCXML 时：

1.  读入输入
2.  将输入转换为状态机域中的抽象输入变量
3.  将变量发送到 PySCXML 状态机实例
4.  PySCXML 状态机实例计算新状态，并设置抽象输出变量
5.  将抽象输出变量转换为输出
6.  写出输出
7.  睡到下一个

（如果 PySCXML 完全可以做到这一点。这将允许我将整个排序逻辑完全分离到一个 SCXML 文件中。）我需要按顺序处理所有步骤，尤其是 4\. 不允许异步运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:32:44.030

你想要做的事情是很有可能的。尽管这确实**行不通**：

```
xml = '''\
<scxml version="1.0" datamodel="python">
    <state id="s1">
        <transition event="e" target="f" />
    </state>
    <final id="f" />
</scxml>
    '''
sm = Statemachine(xml)
sm.start()
# never runs
sm.send("e") 
```

相反，这样做：

```
xml = '''\
<scxml version="1.0" datamodel="python">
    <state id="s1">
        <transition event="e" target="f" />
    </state>
    <final id="f" />
</scxml>
'''
sm = Statemachine(xml)
sm.start_threaded()
sm.send("e") 
```

它在自己的 greenlet 中运行状态机的 maineventloop，让您可以在主线程中与它进行交互。`sm.send('e')`将阻塞直到状态机进入稳定状态（即直到它等待进一步的外部事件）。

# ruby-on-rails - 在 Ruby on Rails 中更新用户评论

> ID：15003182
> 
> 赞同：2
> 
> 时间：2013-02-21T13:14:19.210
> 
> 标签：ruby-on-rails

嗨，我想知道用户是否有办法更新他们已经写过的评论，我尝试使用 cancan 但遇到了一些问题，所以我想看看是否有更简单的方法。这是评论控制器中“新”方法的代码

```
def new
  if logged_in?
    @review = Review.new(:film_id => params[:id], :name =>
      User.find(session[:user_id]).name)

    session[:return_to] = nil
  else 
    session[:return_to] = request.url
    redirect_to login_path, alert: "You must be logged in to write a review"
  end
end 
```

和“创建”方法

```
def create
  # use the class method 'new' with the parameter 'review', populated 
  # with values from a form 
  @review = Review.new(params[:review])
  # attempt to save to the database, the new review instance variable 
  if @review.save
    # use the class method 'find' with the id of the product of the 
    # saved review and assign this product object to the variable 'product'
    film = Film.find(@review.film.id)
    # redirect the reviewer to the show page of the product they reviewed,
    # using the product variable, and send a notice indicating the review 
    # was successfully added
    redirect_to film, notice: "Your review was successfully added"
  else
    # if the review could not be saved, return / render the new form
    render action: "new"
  end
end 
```

如果他们已经为产品写过评论，我希望用户编辑他们的评论。而不是来自同一用户对同一产品的两次评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:24:14.033

要更新记录，您应该使用`update`用户提交`edit`表单后请求的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:28:42.983

让你的用户模型有 has_many/has_one :reviews。并查看模型 belongs_to :user。然后，如果您有任何类型的授权（并且您应该拥有，例如：设计），您就会知道审阅用户当前是否是登录用户。如果是，则渲染编辑按钮，否则不渲染。

同样根据 CRUD 约定，您需要 2 个操作。首先它`edit`和另一个`update`。您可以在 railsguides.com 上了解它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:36:34.367

您可能会将这样的内容放入该`create`方法中：

```
# Assumes that your user names are unique
@review = Review.find_or_create_by_film_id_and_name(params[:review][:film_id], User.find(session[:user_id]).name)
@review.update_attributes(params[:review]) 
```

这将执行以下操作

1.  检查用户是否为电影创建了评论
2.  如果是，则将现有评论分配给`@review`实例变量
3.  如果不是，则创建一个新`Review`对象并将其分配给`@review`
4.  更新`@review`_`params[:review]`

或者，以下语句将在不使用 Rails`find_or_create`便捷方法的情况下完成相同的操作：

```
user_name = User.find(session[:user_id]).name # To avoid two DB lookups below
@review = Review.find_by_film_id_and_name(params[:review][:film_id],  user_name) || Review.new(:film_id => params[:review][:film_id], :name => user_name)
@review.update_attributes(params[:review]) 
```

# c# - 在程序运行时编译/执行 XAML

> ID：15003183
> 
> 赞同：2
> 
> 时间：2013-02-21T13:14:20.783
> 
> 标签：c#, wpf, xaml, runtime, code-generation

我想创建一个 WPF 应用程序，它从数据库中检索 XAML 代码并显示检索到的代码。

假设数据库返回以下代码：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid x:Name="mainGrid">
        <Button Content="test case 1" 
                HorizontalAlignment="Left" 
                Margin="10,10,0,0" 
                VerticalAlignment="Top" 
                Width="100" 
                Click="TestCase1_OnClick" 
                Height="29"/>
    </Grid>
</Window> 
```

我如何在运行时执行此代码（或者可能只是 mainGrid 的内容）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:18:23.577

[XamlReader](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlreader.aspx)类就是为此目的而设计的。使用其[Load](http://msdn.microsoft.com/en-us/library/ee149743.aspx)方法动态加载 xaml。

编辑 -[这里](http://elegantcode.com/2010/12/21/wpf-dynamically-compile-and-run-event-handlers-within-loose-xaml-using-codedom/)的这个链接可能是你感兴趣的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-16T08:36:32.147

这是一个老问题，但我想提出一种更好的方法，而无需在运行时编译。

1.  将“click”属性替换为“Command”。实现您的 Relay 命令或其他第三方库（例如：[MVVM Light 工具包](http://www.mvvmlight.net/) ）。ICommand [MVVM 实施](https://stackoverflow.com/questions/1468791/icommand-mvvm-implementation/1468830#1468830)也会有所帮助。
2.  从 Window 节点的 xaml 中删除`x:Class`属性。

现在您有了一个松散的 xaml，任务可以由 XamlReader 完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:29:20.957

这就是我解决问题的方法：

我有 3 个文件 MainWindow.xaml、MainWindow.xaml.cs 和 wpftest.csproj。

**MainWindow.xaml：**

```
<Window x:Class="wpftest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Content="Button" HorizontalAlignment="Left" Margin="122,75,0,0" VerticalAlignment="Top" Width="75" Click="ButtonBase_OnClick"/>
    </Grid>
</Window> 
```

**主窗口.xaml.cs**

```
namespace wpftest
{
    using System.Windows;

    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void ButtonBase_OnClick(object sender, RoutedEventArgs e)
        {
            MessageBox.Show("Hello world", "does it work?");
        }
    }
} 
```

**wpftest.csproj** （注意：这个文件非常大，大部分东西都不是必需的。您可以按照本指南创建一个更简化的解决方案：[演练：从头开始创建 MSBuild 项目文件](http://msdn.microsoft.com/de-de/library/vstudio/dd576348.aspx)）

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProjectGuid>{E3FBAE41-AF7E-4C7E-A69E-ADAEAEE76FA2}</ProjectGuid>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>wpftest</RootNamespace>
    <AssemblyName>wpftest</AssemblyName>
    <TargetFrameworkVersion>v4.5</TargetFrameworkVersion>
    <FileAlignment>512</FileAlignment>
    <ProjectTypeGuids>{60dc8134-eba5-43b8-bcc9-bb4bc16c2548};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <PlatformTarget>AnyCPU</PlatformTarget>
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <PlatformTarget>AnyCPU</PlatformTarget>
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Core" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="System.Xaml">
      <RequiredTargetFramework>4.0</RequiredTargetFramework>
    </Reference>
    <Reference Include="WindowsBase" />
    <Reference Include="PresentationCore" />
    <Reference Include="PresentationFramework" />
  </ItemGroup>
  <ItemGroup>
    <Page Include="MainWindow.xaml">
      <Generator>MSBuild:Compile</Generator>
      <SubType>Designer</SubType>
    </Page>
    <Compile Include="MainWindow.xaml.cs">
      <DependentUpon>MainWindow.xaml</DependentUpon>
      <SubType>Code</SubType>
    </Compile>
  </ItemGroup>
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
</Project> 
```

**解决方案：**

以下代码片段将编译代码，创建 dll 文件并通过反射使用创建的 dll。这在应用程序运行时（全部）发生。

特别感谢[doug](https://stackoverflow.com/users/115749/doug)提出这个[stackoverflow 问题](https://stackoverflow.com/questions/11921184/running-msbuild-through-code-and-getting-asynchronous-progress)

```
 private void TestCase4_OnClick(object sender, RoutedEventArgs e)
    {
        var globalProperties = new Dictionary<string, string>();
        var buildRequest = new BuildRequestData(@"C:\Users\jbu\wpftest\wpftest.csproj", globalProperties, null, new string[] { "Build" }, null);
        var pc = new ProjectCollection();

        var result = BuildManager.DefaultBuildManager.Build(new BuildParameters(pc), buildRequest);

        Assembly assembly = Assembly.LoadFrom(@"C:\Users\jbu\wpftest\bin\Debug\wpftest.dll");
        var instance = assembly.CreateInstance("wpftest.MainWindow") as Window;

        if (instance != null)
        {
            instance.Show();
        }
    } 
```

# node.js - 快速中间件挂载点中的占位符段

> ID：15003184
> 
> 赞同：1
> 
> 时间：2013-02-21T13:14:30.227
> 
> 标签：node.js, express, connect

使用 Express 时，我可以在路由字符串中使用占位符定义路由，例如：

```
app.get("/users/:user_id/photos", function(req,res){<blah>}); 
```

然后在我的处理程序中，我可以用户`req.params["user_id"]`获取 URL 中的任何内容并在我的请求中使用它。

中间件可以安装在某些路径上，这样只有匹配该路径的请求才会使用中间件。我可以在中间件的挂载路径中使用占位符吗？例如，我可以做类似的事情：

```
app.use("/users/:user_id/photos", <middleware>); 
```

然后在中间件内部有一些方法可以访问映射到的段`:user_id`是什么？

编辑1：

我知道我可以将中间件直接放在路由声明中，à la：

```
app.get("/users/:user_id/photos", <middleware>, function(req,res){<blah>}); 
```

随着应用程序的发展，不难想象这将如何失控。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:37:02.057

中间件按照您添加它们的顺序进行链接。

```
middleware = function(req,res,next){
  if(valid(req))
    next();
  else
    res.send(400, "Emergerd");
}

// First middleware
app.get("/users/:user_id/photos", middleware);

app.get("/users/:user_id/photos", function(req,res){
  // function after middleware
}); 
```

# java - Java Web 应用程序：监控进度

> ID：15003185
> 
> 赞同：2
> 
> 时间：2013-02-21T13:14:35.073
> 
> 标签：java, jakarta-ee, web-applications, progress-bar

很多时候，Java Web 应用程序中有一些由 http servlet 调用的长时间运行的进程。一个典型的例子是，将 100 个 mp3 文件转换为 flak 格式（只是一个随机示例）。http 连接将是活动的，但由于该过程需要很长时间，因此我们可以构建一些进度条以显示在网页上（最好是 uisng ajax），以指示任务的进度。这应该是什么设计模式？比如说，Servlet 的 post 方法会调用实际的长期进程，而 Servlet 的 get 方法会调用进度监听器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:30:02.057

在 Java EE 中，我会推荐以下结构：

*   Servlet 调用（例如 POST）将启动该过程
*   POST 将使用`@Asynchronous`EJB 调用来处理繁重的负载，因此将开始执行耗时的过程
*   它还将传递一个*进度持有者对象*，例如放入上下文/会话中的 POJO（@Stateful EJB 也可以）
*   POST 返回，后台作业继续
*   状态检查由 Ajax HTTP 调用执行，它们使用与启动器相同的会话
*   Ajax 调用从 session/context/@Stateful 获取*进度持有者对象*，读取状态并返回
*   状态由后台线程持续更新（更新应该是同步的，除非你只使用 boolean、char、int 或 float 的一个属性（最大 32 位原语））

请注意，`@Asynchronous`它从 EJB 3.1 开始可用。

# ms-access - 访问 Continuos 子表单重复信息

> ID：15003188
> 
> 赞同：1
> 
> 时间：2013-02-21T13:14:44.827
> 
> 标签：ms-access, loops, subroutine, subform, continuous-forms

Access 数据库 Form1 是一个具有 EmployeeID 字段的连续表单，您可以双击以转到另一个包含有关员工信息的表单。为了留住正确的员工，我使用此代码...

```
Private Sub EmployeeID_DblClick(cancel as integer)
  Dim myID as variant 
  myID = me.EmployeeID

  DoCmd.OpenForm "frm_EmployeeInfo",,,,,,myID
End Sub 
```

这不仅会显示正确的员工信息，还会将数字填充到隐藏的文本框中以保留信息。

在员工表单上有一个带有 4 个选项卡的 TabControl，其中一个选项卡包含一个连续子表单，我正在尝试填充员工信息，而不是向下填充信息（假设员工 X 有 8 行不同的属性要显示）它在重复同一个。这是我的子表单代码：

```
Option Compare Database

Private Sub Form_open(cancel As Integer)
  Dim strConnection, strSQL As String
  Dim conn As ADODB.Connection
  Dim tbl As ADODB.Recordset
  Dim SourceCode As String
  Dim myID As Variant

  Set conn = New ADODB.Connection
  strConnection = "ODBC;Driver={SQLserver};DSN=AccessDatabase;Server=Labor;DATABASE=Source;Trusted_Connection=Yes;"
  conn.Open strConnection

  myID = CInt(Me.OpenArgs)
  SourceCode= Nz(DLookup("[SourceCode]", "Locaton", "[LOC_ID] = Forms!frmUtility![Site].value"), "")

  If SourceCode<> "" Then
    strSQL = "SELECT EmployeeID,BenefitID,DeductionAmount,BenefitAmount,CoverageAmount,EffectiveDate,"
    strSQL = strSQL & "EligibleDate,ExpirationDate FROM "
    strSQL = strSQL & SourceCode & "_EmployeesBenefitsNew WHERE EmployeeID= " & myID
  Else
    strSQL = "SELECT EmployeeID,BenefitID,DeductionAmount,BenefitAmount,CoverageAmount,EffectiveDate,"
    strSQL = strSQL & "EligibleDate,ExpirationDate FROM "
    strSQL = strSQL & "EmployeesBenefitsNew WHERE EmployeeID= " & myID
  End If

  Set tbl = New ADODB.Recordset

  With tbl
    Set .ActiveConnection = conn
    .Source = strSQL
    .LockType = adLockOptimistic
    .CursorType = adOpenKeyset
    .CursorLocation = adUseClient
    .Open
  End With

  With tbl
    On Error Resume Next
      .MoveFirst
      Do Until tbl.EOF
        Me.txtBenefitID.Value = tbl!BenefitID
        Me.txtDeductionAmt.Value = tbl!DeductionAmount
        Me.txtBenefitAmt.Value = tbl!BenefitAmount
        Me.txtCoverageAmt.Value = tbl!CoverageAmount
        Me.txtEffDt.Value = tbl!EffectiveDate
        Me.txtTermDt.Value = tbl!ExpirationDate
        Set Me.Recordset = tbl
        .MoveNext

      Loop
    .Close
  End With

  conn.Close
  Set conn = Nothing
  Set tbl = Nothing

End Sub 
```

任何人都可以对这种情况有所了解吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:05:36.547

您需要使用数据设置记录集或记录源，您不能在不同的行上写入连续表单，如果您有记录集，这些行只会显示为不同。

所以

```
 ''********************
     Set Me.Recordset = tbl
  ''******************** 
```

在你的代码中：

```
Private Sub Form_open(cancel As Integer)
  Dim strConnection, strSQL As String
  Dim conn As ADODB.Connection
  Dim tbl As ADODB.Recordset
  Dim SourceCode As String
  Dim myID As Variant

  Set conn = New ADODB.Connection
  strConnection = "ODBC;Driver={SQLserver};DSN=AccessDatabase;Server=Labor;DATABASE=Source;Trusted_Connection=Yes;"
  conn.Open strConnection

  myID = CInt(Me.OpenArgs)
  SourceCode= Nz(DLookup("[SourceCode]", "Locaton", "[LOC_ID] = Forms!frmUtility![Site].value"), "")

  If SourceCode<> "" Then
    strSQL = "SELECT EmployeeID,BenefitID,DeductionAmount,BenefitAmount,CoverageAmount,EffectiveDate,"
    strSQL = strSQL & "EligibleDate,ExpirationDate FROM "
    strSQL = strSQL & SourceCode & "_EmployeesBenefitsNew WHERE EmployeeID= " & myID
  Else
    strSQL = "SELECT EmployeeID,BenefitID,DeductionAmount,BenefitAmount,CoverageAmount,EffectiveDate,"
    strSQL = strSQL & "EligibleDate,ExpirationDate FROM "
    strSQL = strSQL & "EmployeesBenefitsNew WHERE EmployeeID= " & myID
  End If

  Set tbl = New ADODB.Recordset

  With tbl
    Set .ActiveConnection = conn
    .Source = strSQL
    .LockType = adLockOptimistic
    .CursorType = adOpenKeyset
    .CursorLocation = adUseClient
    .Open
  End With

  ''********************
  Set Me.Recordset = tbl
  ''********************

  conn.Close
  Set conn = Nothing
  Set tbl = Nothing

End Sub 
```

# c++ - unordered_map 元素显示

> ID：15003193
> 
> 赞同：-4
> 
> 时间：2013-02-21T13:14:53.457
> 
> 标签：c++, unordered-map

```
 #include "stdafx.h"
 #include <unordered_map>
 #include <iostream> 
 using namespace std;

 typedef tr1::unordered_map<int, int>MyMap ;

 int _tmain(int argc, _TCHAR* argv[])
 {
    MyMap PolicyMap;
    PolicyMap.insert(Myap::value_type(0, 10));
    PolicyMap.insert(Myap::value_type(1, 20));
    PolicyMap.insert(Myap::value_type(2, 30));

    for (Myap::const_iterator i = PolicyMap.begin(); i != PolicyMap.end() ; i++)
    {
      cout << " [" << i->first << ", " << i->second << "]" << endl;
    } 
return 0; 
```

}

为什么上面代码的输出是 [0, 10], [2, 30], [1, 20] 。它应该是 [2, 30], [1, 20], [0, 10]。只有当我从零开始输入键值时才会发生这种情况，请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:22:44.633

你错过了`unordered_map`. 它不会像 a`map`那样对元素进行排序，也不会按照您放入它们的顺序保留元素，它不能保证元素在底层结构中的顺序或元素的顺序使用迭代器时返回。

以上允许 C++ 实现使用更有效的底层结构（哈希表）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:23:43.260

您当前正在滥用`unordered_map`. 这个容器宣称*它不会以任何特定的顺序保留其元素*，因此结果不应该是意外的。

您应该使用 (ordered)`std::map`代替：

```
#include <map>
#include <functional>  // needed for std::greater<>

// The third template argument defines the sort direction for the map
// std::greater results in the map being ordered descending (and always by key)
typedef std::map<int, int, std::greater<int> > MyMap; 
```

# c# - 与将一个用户控件的对象创建到另一个用户控件相关的问题

> ID：15003196
> 
> 赞同：0
> 
> 时间：2013-02-21T13:15:00.720
> 
> 标签：c#, asp.net, user-controls

我有一个 asp.net 应用程序，我在根目录中添加了一些 .aspx 页面。现在我创建了名为`usercontrols`具有以下结构的文件夹：

![在此处输入图像描述](../Images/d58d85ea1896a3ef8894ff90daf22e73.png)

现在我想将一个用户控件的方法调用到另一个..但我没有得到任何用户控件之间的类名..

我在所有 .ascx.cs 文件中使用了相同的命名空间。

那么如何将一个用户控件的方法调用到另一个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:18:50.303

您需要参考声明才能在代码中使用 uc：将其添加到您的页面：

```
 <%@ Reference Control ="~/WebUserControl1.ascx"%> 
```

# java - 使用准备好的语句从数据库中删除值

> ID：15003197
> 
> 赞同：0
> 
> 时间：2013-02-21T13:15:09.717
> 
> 标签：java, sql, prepared-statement

如何使用准备好的语句从数据库中删除条目？我发现我必须编写以下代码

```
String deleteSQL = "DELETE DBUSER WHERE USER_ID = ? 
```

但我想指定一个包含多个变量的子句。我使用了`AND`运算符，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:19:13.103

它必须工作/例如

```
Select from Employee e where e.ID < ? and e.ID >= ? order by e.ID 
```

设置值使用这个：

```
 int id1 = 1;
    int id2 = 10;
    preparedStatement.setInt(2, id1);
    preparedStatement.setInt(1, id2); 
```

删除我使用这个代码：

```
public synchronized boolean deleteNewsById(Integer[] idList)
        throws NewsManagerException {
    DatabaseConnection connection = pool.getConnection();
    StringBuffer buffer = new StringBuffer();
    buffer.append("(");
    buffer.append(idList[0]);
    for (int i = 1; i < idList.length; i++) {
        buffer.append(",");
        buffer.append(idList[i]);
    }
    buffer.append(")");
    PreparedStatement statement = connection
            .getPreparedStatement(DELETE_NEWS_BY_ID + buffer);
} 
```

和 sql 查询看起来像这样

```
private static final String DELETE_NEWS_BY_ID = "delete from NEWS where ID in "; 
```

或简单的写入`delete from NEWS where ID in (?,?,?)`和设置值，如第一个示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:21:31.480

如果您的语法不正确，这是一个示例。

```
DELETE DBUSER WHERE USER_ID = ? and USER_NAME = ?; 
```

您可以通过使用更多运算符在 where 子句中附加更多条件`AND ...`。

或者，如果您在单个查询中要删除多个 USER_ID。

```
DELETE DBUSER WHERE USER_ID in (?, ?, ?, ?); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:20:32.057

您是否正在寻找允许您在 WHERE 子句中指定多个值的[IN](http://www.w3schools.com/sql/sql_in.asp)运算符，例如在我的示例中。

```
String deleteSQL = "DELETE DBUSER WHERE USER_ID IN (?)" 
```

尽管在[PreparedStatement IN 子句替代方案](https://stackoverflow.com/questions/178479/preparedstatement-in-clause-alternatives)中，您可能想查看一些有用的答案和链接，例如[JDBC 中的批处理语句，](http://www.javaranch.com/journal/200510/Journal200510.jsp#a2)其中讨论了不同批处理方法的优缺点。`IN`我建议的方法是该讨论的一部分。最终结果是您只需访问数据库一次，而不是每次删除一次，并且由于所需的网络活动减少，因此性能更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T13:52:37.550

我认为 Aleksei Bulgak 的回应是正确的，但也许更直接地说......你可以这样设置你的参数：

```
String stmt = "DELETE DBUSER WHERE USER_ID = ? and (USER_NAME = ? or USER_NAME = ?)";
preparedStatement.setInt(1, firstParam);
preparedStatement.setString(2, secondParam);
preparedStatement.setString(3, thirdParam); 
```

...并且对于 SQL 中的许多参数（问号）（无论您使用的是 IN 还是任何您想要的），您都应该在此处设置这么多参数（使用 setInt 表示整数，使用 setString 表示字符串等）。这适用于选择和删除查询。

# php - 默认情况下，PHP 5.3 似乎缺少 Intl 扩展

> ID：15003199
> 
> 赞同：10
> 
> 时间：2013-02-21T13:15:18.030
> 
> 标签：php, linux, ubuntu, icu, intl

我的系统是 Ubuntu 12.04，PHP 5.3，我正在尝试运行一些基本的 Intl 代码，如下所示：

```
<?php
$coll  = collator_create('en_US');
$result = collator_compare($coll, "string#1", "string#2"); 
```

它输出

```
PHP Fatal error:  Call to undefined function collator_create() 
```

自 5.3 版以来，国际扩展不应该与 PHP 捆绑在一起吗？

PHP是通过`apt-get`这个命令行安装的（我不使用Apache）：

```
apt-get install php5 php5-cli php5-mysql php5-cgi php5-fpm php5-curl php-apc php5-memcache php5-memcached php5-common php5-gd php-xml-parser php-pear php5-imap php5-mcrypt php5-xdebug php5-suhosin 
```

这就是`php -v`产生的结果：

```
PHP 5.3.10-1ubuntu3.5 with Suhosin-Patch (cli) (built: Jan 18 2013 23:40:19) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies
    with Xdebug v2.1.0, Copyright (c) 2002-2010, by Derick Rethans
    with Suhosin v0.9.33, Copyright (c) 2007-2012, by SektionEins GmbH 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-21T13:23:59.043

您在安装时已指定`--enable-intl`使用捆绑版本的 intl，或者您可以通过 PECL 安装它。见：[http ://www.php.net/manual/en/intl.installation.php](http://www.php.net/manual/en/intl.installation.php)

`apt-get install php5-intl`也将工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:28:18.913

添加`php5-intl`到您安装的内容列表中。

看起来它不是核心 PHP5 版本的一部分，尽管它是一个选项，类似于`php-apc`现在 PHP 的标准部分，尽管您必须显式安装它。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-02-21T13:21:00.277

尝试在 php.ini 中取消注释 extension intl "extension = php_intl.dll"，应该删除 ";" 在“扩展”之前，然后重新启动服务器。

# video - Flowplayer 剪辑不缩放

> ID：15003200
> 
> 赞同：1
> 
> 时间：2013-02-21T13:15:20.307
> 
> 标签：video, scaling, flowplayer

我认为问题在于 flowplayer 没有识别出具有我想应用于播放器的属性的附加内容。但我尝试了很多组合，但似乎无法让它发挥作用

```
 /* custom player skin */
    .flowplayer { width: 100%; background-color: #000;}
    .flowplayer .fp-controls { display:none;}
    .flowplayer .fp-timeline { display:none;}
    .flowplayer .fp-progress { display:none;}
    .flowplayer .fp-buffer { display:none;}

    </style>

    <!-- flowplayer depends on jQuery 1.7.1+ -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

    <!-- flowplayer javascript component -->
    <script src="http://releases.flowplayer.org/5.3.2/flowplayer.min.js"></script>

 </head>

 <body>
    <div data-swf="http://releases.flowplayer.org/5.3.2/flowplayer.swf"
      class="flowplayer fixed-controls no-toggle no-time no-volume no-mute"
      data-ratio="0.416" data-embed="false" data-fullscreen="false" data-scaling="scale" data-keyboard="false">
      <script>
             flowplayer("player", "flowplayer.swf", {
        clip:  {
            autoPlay: true,
          autoBuffering: true
          scaling: scale
         }
         });
     </script>
        <video loop="loop">

         <source type="video/mp4" src="whitenoise.mp4"/>

         </video>

       </div>

     </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:05:23.723

根据这个文档 [http://flash.flowplayer.org/documentation/configuration/clips.html](http://flash.flowplayer.org/documentation/configuration/clips.html) 缩放参数是字符串。所以你应该使用引号。

```
scaling: 'scale' 
```

'scale' 也是默认值，所以你不必写。如果您想了解此参数有何不同，请使用 16:9 视频

```
scaling: 'fit' 
```

# c# - Linq查询后从Xdocument获取文件名

> ID：15003201
> 
> 赞同：2
> 
> 时间：2013-02-21T13:15:21.337
> 
> 标签：c#, xml, linq, linq-to-xml

我正在查询一堆 SGML 文档以获取特定的元素和属性。这工作正常，当它找到包含指定项目的文件时会显示一个消息框。但是，我需要它做的也是给我找到它们的文件的名称，否则它几乎没用。我似乎找不到获取文件文件名的方法。我有：

```
XDocument doc = XDocument.Load(sgmlReader);
IEnumerable<XElement> selectedElement =
    from el in doc.Descendants(Element_textBox.Text)
        where (string)el.Attribute(Attribute_textBox.Text) == Value_textBox.Text
        select el; 
        //need to select the DMC and title and put in a variable, and list them

foreach (XElement elem in selectedElement)
   //Console.WriteLine(elem);

   MessageBox.Show("Data Module Found: " + elem); 
```

正如我所说，我需要以某种方式识别查询从中找到匹配项的文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:21:10.010

您可以指定必须在加载时设置文档的基本 URI：

```
var doc = XDocument.Load(@"file.xml", LoadOptions.SetBaseUri); 
```

然后您可以从任何元素获取文档 URI：

```
var someElement = doc.Root;
var uri = element.Document.BaseUri;
Console.WriteLine(uri);    // Prints: file:///C:/file.xml 
```

* * *

如果您使用`Stream`or `TextReader`，则必须从其他地方获取文件名并自己存储。否则无法获取文件名。

想象一下我传递了一个`MemoryStream`or `NetworkStream`to `XDocument.Load()`，那么就没有文件名了。通常，在使用流或阅读器时，您没有文件名。

但是有一个例外：如果您可以获得阅读器的基本流并将其转换为 a `FileStream`，那么您可以获得文件名：

```
var fs = File.OpenRead(@"C:\myxml.xml");
var reader = new StreamReader(fs);
DoSomething(reader);

static void DoSomething(TextReader reader)
{
    var streamReader = reader as StreamReader;
    if (streamReader != null)
    {
        var fileStream = streamReader.BaseStream as FileStream;
        if (fileStream != null)
            Console.WriteLine(fileStream.Name);
        else { /* No filename */ }
    }
    else { /* No filename */ }

    // ...
} 
```

# python - Hadoop作业描述

> ID：15003202
> 
> 赞同：1
> 
> 时间：2013-02-21T13:15:21.807
> 
> 标签：python, hadoop, mapreduce, hadoop-streaming

我有一个 Hadoop 集群，不同的进程能够向这个集群提交 mapreduce 作业（它们都使用相同的用户帐户）。

有没有办法区分这些工作？某种描述，可以在提交期间添加到作业中，例如“这是进程“1234”的作业，请勿触摸”？

我正在使用 Python 和 HadoopStreaming，并且想使用简单`hadoop job -list`（或至少使用 Web 管理界面）来区分作业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:59:33.750

是的，您可以使用 为每个作业指定一个名称`job.setJobName(String)`。

如果您要将作业名称设置为可区分的名称，您应该能够将它们区分开来。

例如，通过使用类似的东西，`ManagementFactory.getRuntimeMXBean().getName()`您可以获得进程 id 和机器名称（无论如何在 linux 上，不确定在其他操作系统上的行为）格式为，进程 id`1234@localhost`在哪里，您可以将其设置为作业名称来告诉`1234`他们分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:20:09.463

对于交叉兼容的解决方案，您始终可以使用`mapred.job.name`来指定您的工作名称，这样您`hadoop job -list`以后可以轻松区分所有内容。

在 Hadoop 流的情况下，这应该看起来像这样：

```
hadoop jar $HADOOP_STREAMING_JAR -Dmapred.job.name='something' -mapper mapper.py -reducer reducer.py -input /path/to/input -output /path/to/output 
```

# javascript - 使电话号码仅可在移动浏览器上点击

> ID：15003205
> 
> 赞同：3
> 
> 时间：2013-02-21T13:15:30.697
> 
> 标签：javascript, html, tel

我正在为客户建立一个网站，并被要求在使用移动浏览器时在网站上制作一个可点击的电话号码，以便客户可以使用它轻松致电他的公司。我对html“tel:”标签做了一些研究，但我假设这会使数字在所有浏览器上都可以点击，而不仅仅是在手机上。

所以我想知道的是，在手机上使用浏览器时，使电话号码可点击的最佳方法是什么，但要防止它们在其他地方可点击？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:21:25.243

看到这个：[http ://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

或者

您可以验证屏幕尺寸：

```
if ($(window).width() < 480 || $(window).height() < 480) {
//small screen, load other JS files
$.getScript('/js/script.js', function () {
    //the script has been added to the DOM, you can now use it's code
});
} 
```

有关 $.getScript() 的更多信息：http: [//api.jquery.com/jquery.getscript](http://api.jquery.com/jquery.getscript)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T17:08:03.707

屏幕尺寸总是在变化。在此处查看我对类似问题的解决方案。操作标签：

[如何在桌面上禁用链接到电话号码](https://stackoverflow.com/questions/15425356/how-to-disable-link-to-phone-number-when-on-desktop/15437859#15437859)

# google-chrome-extension - 托管应用程序中的滚动条

> ID：15003206
> 
> 赞同：2
> 
> 时间：2013-02-21T13:15:35.057
> 
> 标签：google-chrome-extension, google-chrome-app

我正在为 Chrome 开发一个打包的应用程序。它的启动页面将从 localStorage 访问数据并以 HTML 格式输出。但我的问题是应用程序在没有滚动条的单独窗口（外壳/面板）中启动。如何恢复滚动条或将其作为选项卡启动？我知道`"launch": { "local_path": "app.html" }`诀窍，但它是贬值。我在用着`"background": { "scripts": ["background.js"] }`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T19:43:33.287

在您的 CSS 中添加适当的`overflow`样式`html`：

```
html {
  overflow: auto;
} 
```

（您可能只想使用`overflow-x`或`overflow-y`根据您的需要使用）

# php - 我们如何将动态创建的文本框值获取到另一个 php 文件

> ID：15003207
> 
> 赞同：0
> 
> 时间：2013-02-21T13:15:36.740
> 
> 标签：php, javascript, mysql, phpmyadmin, server-side

我正在使用 XAMPP 1.7.7[PHP: 5.3.8]，MYSQL Server 版本：5.5.16，Web 服务器 Apache/2.2.21，phpMyAdmin 版本信息：3.4.5。

我正在尝试生成一个应用程序，例如用户输入计数（根据我的应用程序为“Number_of_Bidders_Participated”）然后显示多个表单（动态）以输入多个客户记录。然后使用 PHP 获取所有记录值，在表中动态创建列并在其中插入值。

例如：用户类型 count("Number_of_Bidders_Participated") value=3 然后显示 3 个表单用于更新客户信息。我在 JavaScript 的帮助下做到了这一点。

**我为此使用以下代码：**

```
<!-- Basic code-->
        Number of Bidders Participated:     
            <input name="no_of_bidders_participated" id="no_of_bidders_participated" type="text" style="vertical-align: middle;" /> 
            <input type="button" onclick="increment_value()" value="Add Bidders info" />
            <div id="container">
            </div>                      
<script type="text/javascript">
        var counter = 0;
        function increment_value(chk) 
        {       
            var get = $("#no_of_bidders_participated").val();           
            if (counter > 0)
            {
              return;
            }
            else
            {
                counter++;                  
                for(i=1; i<=get; i++)
                {               
                       $('#container').append('<br>Bidder '+ i +' Name: <input id="biddername'+ i +'" type="text" value=""/> Bidder'+ i +' Address: <input id="bidderadd'+ i +'" type="text" value=""/> Bidder'+ i +' Phone Number: <input id="bidderphone '+ i +'" type="text" value=""/><br><br> Bidder'+ i +' Email ID: <input id="bidderemail'+ i +'" type="text" value=""/> Bidder'+ i +' Cotted Amount: <input id="biddercotted_amount'+ i +'" type="text" value=""/> Bidder'+ i +' Tender Awarded: <select id="biddertender_awarded'+ i +'"><option value="No">No</option><option value="Yes">Yes</option></select><br><br><br>');
                }                                           

            }
        }   
</script> 
```

在图 1 中，您可以看到此过程的输出。在这里，我正在分配将`id="biddername'+ i +'"`数据提取到另一个 php 文件。但是，使用下面的代码我没有得到正确的结果。

```
${"biddername" . $i} = $_POST['biddername'.$i]; 
```

**它显示以下错误：**

```
Notice: Undefined index: biddername1 in C:\xampp\htdocs\tender_monitoring_system\add_participated_bidders_info_submit.php on line 15 
```

请帮助我获得以下输出。并请帮助我在 MySQL 服务器中动态创建列。

完整代码：邮件文件

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>.::Tender Monitoring System::.</title>
        <link rel="stylesheet" href="application.css" type="text/css" />

        <script type="text/javascript" src="date/jquery-latest.js"></script>
        <script type="text/javascript">
        var counter = 0;
        function increment_value(chk) 
        {       
                var get = $("#no_of_bidders_participated").val();   

                if (counter > 0)
                {
                  return;
                }
                else
                {
                    counter++;                  
                    for(i=1; i<=get; i++)
                    {               
                           $('#container').append('<br>Bidder '+ i +' Name: <input id="biddername'+ i +'" type="text" value=""/> Bidder'+ i +' Address: <input id="bidderadd'+ i +'" type="text" value=""/> Bidder'+ i +' Phone Number: <input id="bidderphone '+ i +'" type="text" value=""/><br><br> Bidder'+ i +' Email ID: <input id="bidderemail'+ i +'" type="text" value=""/> Bidder'+ i +' Cotted Amount: <input id="biddercotted_amount'+ i +'" type="text" value=""/> Bidder'+ i +' Tender Awarded: <select id="biddertender_awarded'+ i +'"><option value="No">No</option><option value="Yes">Yes</option></select><br><br><br>');
                    }                                           

                }
        }   

        </script>       
    </head>
    <body>
        <a href="http://localhost/tender_monitoring_system/"><img align="right" width="100px" height="40px" src="home.gif" alt="Home" /></a>
        <a href="http://localhost/tender_monitoring_system/add_participated_bidders_information.php"><img align="right" width="100px" height="40px" src="back.gif" alt="Back" /></a>    
        <div id="heading"><br><h1>Tender Monitoring System</h1><h3>Tender Status</h3><br>  
        </div>
        <?php
         $txtSearch = $_POST['txtSearch'];
         require('db_connect.php'); 
        // The form has been submitted, query results
            if ($txtSearch!='none')
            {
                ?>
                <center><br><br>
                <form id="search_form" name="search_form" action="submit.php" method="post">
                    <?php           
                    $queryitem = "SELECT tender_status,tender_number FROM tender WHERE tender_number='$txtSearch'";
                    // Execute the query 
                    $result = mysql_query($queryitem);  
                    ?><b>
                    Tender Number :     
                    <select name="qtender_number" id="qtender_number" disabled="disabled">
                        <?php   
                        while($row = mysql_fetch_array($result))
                        {   
                        $getvalue_number=$row["tender_number"]; //$getvalue_status has old tender_number value ramesh
                        ?>
                            <option value="<?php echo $row['tender_number'] ?>"><?php echo $row['tender_number'] ?></option>
                        <?php
                        }
                        ?>        
                    </select>   
                    <input type="hidden" name="getvalue_number" value="<?php echo $getvalue_number ?>"> <?php //for passing variable value to another file?>
                    <?php           
                    $queryitem = "SELECT tender_status FROM tender WHERE tender_number='$txtSearch'";
                    // Execute the query 
                    $result = mysql_query($queryitem);  
                    ?><b>                   
                    Tender Call:
                  <select name="call" id="call">
                   <option selected="selected" label="none" value="none">- - Select Tender Call - -</option>
                      <option value="1st Call">1st Call</option>
                      <option value="2nd Call">2nd Call</option>
                      <option value="3rd Call">3rd Call</option>
                      <option value="4th Call">4th Call</option>
                      <option value="5th Call">5th Call</option>
                      <option value="6th Call">6th Call</option>
                      <option value="7th Call">7th Call</option>
                      <option value="8th Call">8th Call</option>
                      <option value="9th Call">9th Call</option>
                      <option value="10th Call">10th Call</option>
                  </select><b><br><br>                
                  Tender Status:  
                  <select name="tender_status" id="tender_status">
                   <option selected="selected" label="none" value="none">- - Select Tender Status - -</option>
                      <option value="AA Received">AA Received</option>
                      <option value="NIT Awaited">NIT Awaited</option>
                      <option value="NIT Received">NIT Received</option>
                      <option value="Online Tender">Online Tender</option>
                      <option value="Locked Tender">Locked Tender</option>
                      <option value="Opened Tender">Opened Tender</option>
                      <option value="Online Technical Opened">Online Technical Opened</option>
                      <option value="Online Financial Opened">Online Financial Opened</option>
                      <option value="Sanctioned For Award">Sanctioned For Award</option>
                      <option value="Rejected Tender">Rejected Tender</option>
                      <option value="Recalled Tender">Recalled Tender</option>
                  </select>               
                    Number of Bidders Participated:     
                        <input name="no_of_bidders_participated" id="no_of_bidders_participated" type="text" style="vertical-align: middle;" /> 
                        <input type="button" onclick="increment_value()" value="Add Bidders info" />
                        <div id="container">
                        </div>

                    <br><br>        
                    <input id="submit" type="submit" value="Submit" />
                </form> 
                    <?php               
            }           
        ?>          
    </body>
</html> 
```

提交.php 文件

```
<?php
    //$qtender_number = $_POST['qtender_number'];

    $getvalue_number = $_POST['getvalue_number'];
    $tender_call = $_POST['call'];
    $getvalue_status = $_POST['tender_status']; 
    $no_of_bidders = $_POST['no_of_bidders_participated'];

    echo $getvalue_number; //working
    echo $tender_call;
    echo $getvalue_status;
    echo $no_of_bidders;
    for($i=1; $i<=$no_of_bidders; $i++)
    {
        ${"biddername" . $i} = $_POST['biddername'.$i]; //problem here..
        echo ${"biddername" . $i};
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:11:25.487

在 php 中使用动态变量名通常不是最好的主意，使用数组可能是一个更好的主意，但这不会是您的代码的问题。

以下只是一个小建议，我认为您的`increment_value`函数应该只运行一次，但运行`no_of_bidders_participated`后可以更改。由于这个值被传回 php 中，`$_POST`它应该被锁定以防止它在提交表单之前被更改。

```
<script type="text/javascript">
var counter = 0;
function increment_value(chk) 
{       
  var bidder_count = $("#no_of_bidders_participated").val();           
  if (counter > 0) {
    return;
  } else {
    counter++;
    $("#no_of_bidders_participated").setAttribute("disabled", true); // stop changes
    for(i=1; i<=bidder_count; i++) {               
      $('#container').append('<br>Bidder '+ i +' Name: <input id="biddername'+ i +'" type="text" value=""/> Bidder'+ i +' Address: <input id="bidderadd'+ i +'" type="text" value=""/> Bidder'+ i +' Phone Number: <input id="bidderphone '+ i +'" type="text" value=""/><br><br> Bidder'+ i +' Email ID: <input id="bidderemail'+ i +'" type="text" value=""/> Bidder'+ i +' Cotted Amount: <input id="biddercotted_amount'+ i +'" type="text" value=""/> Bidder'+ i +' Tender Awarded: <select id="biddertender_awarded'+ i +'"><option value="No">No</option><option value="Yes">Yes</option></select><br><br><br>');
    }
  }
}   
</script> 
```

您能否转储 php $_POST 变量，以便我们可以看到您发送回服务器的内容？

`var_dump($_POST);`或者`print_r($_POST);`应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:14:35.287

您必须在输入标签中添加“名称”属性，

```
<input name="biddername'+ i +'" id="biddername'+ i +'" type="text" value=""/> 
```

# java - 如何创建“离线”Java MimeMessage？

> ID：15003211
> 
> 赞同：4
> 
> 时间：2013-02-21T13:15:46.103
> 
> 标签：java, api, email, mime-types, jakarta-mail

Java [MimeMessage](http://docs.oracle.com/javaee/6/api/javax/mail/internet/MimeMessage.html)似乎需要一个文件夹或会话进行实例化。是否有一种“离线”类型允许首先创建消息，然后可以将其转换为成熟的 MIME 消息？我想留在 Java SE 中，但如果 SE 中没有这样的规定，备用 API 就可以了。

如果您创建这样的消息：

```
 Properties properties = new Properties();
    properties.put("mail.smtp.host", "smtp.example.com");
    properties.put("mail.smtp.port", "25");
    Session session = Session.getDefaultInstance(properties, null);
    MimeMessage m = new MimeMessage(session); 
```

消息对象可以发送到其他方法或类吗？还是会因为连接是虚假的而引发错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-26T23:02:36.210

您可以将空会话传递给 MimeMessage 构造函数，但稍后您必须管理自己的会话和传输。请参阅[在没有邮件会话的情况下在 Java 中创建电子邮件](https://stackoverflow.com/questions/17557332/creating-a-email-message-in-java-without-a-mail-session/17747165)

# html - css3中的图像动画

> ID：15003212
> 
> 赞同：0
> 
> 时间：2013-02-21T13:15:54.290
> 
> 标签：html, css

我想改变背景图像的不透明度（两个图像都相同），但改变应该是`30 to 45 degree`

还有这个动画`front image`到`background image`然后`backgroung image`再到`front image`

两个图像是：

![在此处输入图像描述](../Images/cb54b91db0d594bd448195c264ec23dd.png) 和 ![在此处输入图像描述](../Images/d37125807939e9094190252b377052a0.png)

我想要动画，如果显示第一张图像，然后在一段时间后显示第二张，但它的高度应该从 0 增加到图像的最大高度。动画也应该是角度的`30 degree`

我使用了代码

**HTML：**

```
 <div class="img_shake">          
        <img id="img_shake" src="img_shake.png" alt="img_shake">    
    </div>

    <div id="div_img_shake_patchwork">
        <img id="img_shake_patchwork" src="img_shake_patchwork.png" alt="img_shake_patchwork">  
    </div>
</div> 
```

**CSS：**

```
#main-container{
    position: relative;
    top:0%;
    left:0%;
    height: 480px;
    width: 320px;   
    overflow: hidden;       
    background-size: 100% 100%;
    background-position: center center; 
    opacity:1;
}

#img_shake {
    position: absolute;
    right: 27%;
    opacity: 0;
    top: 27%;
    z-index:2;
}
@-webkit-keyframes img_shake_anim
{
    from {right:-30%;}
    to {right:27%;}
}

@-webkit-keyframes img_shake_anim_again
{
    from {left:27%}
    to {left:0%}
}
@-webkit-keyframes img_shake_fade_in
{
   0%    {opacity:0;}
   100%  {opacity:1;} 
}

#img_shake_patchwork {
    width:100%;
}

#div_img_shake_patchwork
{
    position:absolute;
    top:27%;
    right:27%;  
    overflow : hidden;
    z-index:2;
    height:277px;
    opacity:0;
}

@-webkit-keyframes div_img_shake_patchwork_anim
{
   0%    {height:0;opacity:1;/*-webkit-transform: rotate(-30deg);*/}  
   100%  {height:277px;opacity:1;/*-webkit-transform: rotate(0deg);*/} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:19:33.957

`background-image`不会做过渡。您需要使用`position: absolute`and`z-index`将一个图像放在另一个图像之上。然后，您可以转换`opacity`顶部图像的 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:30:45.017

通过改变样式可以做到：

```
#img_shake_patchwork {
    width:148px;/*Width of Image*/
    -webkit-transform: rotate(30deg);
    left: 22%;
    position: absolute;
    top: 0%;
}

#div_img_shake_patchwork
{
    position:absolute;
    top:26%;
    left:6%;  
    overflow : hidden;
    z-index:2;
    height:277px;/*Height of Image*/
    opacity:0;
    width:296px;/*Double width of Image*/
    -webkit-transform: rotate(-30deg);
}

@-webkit-keyframes div_img_shake_patchwork_anim
{
   0%    {height:0;opacity:1;left:-16% ;top:30%; }  
   100%  {height:277px;opacity:1;left:6%; top:26%; /*-webkit-transform: rotate(0deg);*/} 
} 
```

# php - 匹配“img”标签和“alt”标签和行号之间的字符串

> ID：15003214
> 
> 赞同：4
> 
> 时间：2013-02-21T13:16:02.933
> 
> 标签：php, regex, dom

我试图从下面的行中获取“img”标签结尾和关闭“a”标签（你好，我来自 img 标签之后）之间的字符串。

```
<a href="products.html><img src="image.jpg"  alt="alt value">hello i am from after img tag</a> 
```

然后检查它们是否匹配。同时我想找出那条线的编号。我尝试了以下代码，它给了我网页的行号和行。

```
 $dom = new domDocument;
        $dom->loadHTMLFile('http://www.google.com');
        $dom->preserveWhiteSpace = true;
        $dom->formatOutput = true;
        $new = htmlspecialchars($dom->saveHTML(), ENT_QUOTES);
        $lines = preg_split('/\r\n|\r|\n/', $new);
        foreach ($lines as $lineNumber => $line) {
         echo $lineNumber . \r\r. $line;
        } 
```

以下代码为我提供了图像源和 alt 标签。我无法获取行号或“img”标签末尾和关闭“a”标签之间的文本（你好，我来自 img 标签之后）。

```
$alts = array();
$tags = $dom->getElementsByTagName('img');
foreach($tags as $tag) {
    $alts[$tag->attributes->getNamedItem('src')->nodeValue] 
            = $tag->attributes->getNamedItem('alt')->nodeValue;
}
foreach($alts as $key => $alt) {
    echo "{$key} => {$alt}<br/>";
} 
```

我知道 regexp 不适用于 html 解析，但我也尝试过，看看它是否适用于以下行。$alt = 'hello i am from after img tag' 我拥有的正则表达式是，//alt 中的任何内容

```
preg_match_all('|\s*alt[^>]*=[\'"](.*?)[\'"]|i', $alt, $altTag); 
```

//“img”标签结束和“a”标签结束之间的任何内容。

```
preg_match_all("#<\s*a[^>]*><\s*img[^>]*>(.*?)<\s*/\s*a>#s", $alt, $foo); 
```

它以这种方式完美运行，但是当尝试在变量 $line 上使用相同的 regExp（来自上面的代码）时，它不会给我任何东西。谁能帮帮我吗。我真的需要完成这项工作。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:41:51.530

在你的情况下使用 Regexp 不是一个好主意，但如果你真的想使用它，那么你需要更改你的 foreach 循环。这是代码。

```
foreach ($lines as $lineNumber => $l){ 
$line= html_entity_decode($l);
} 
```

现在您可以应用 regExp 来查找您想要的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:27:09.023

试试看

```
$str = '<a href="products.html><img src="image.jpg"  alt="alt value">hello i am from after img tag</a>';
preg_match_all('#<a[^>]+>(.*)</a>#isU', $str, $match);
$result = array_map('strip_tags', $match[1]);
print_r($result); 
```

# php - 在 Select 语句 SQL PHP 中转义特殊字符

> ID：15003219
> 
> 赞同：1
> 
> 时间：2013-02-21T13:16:18.373
> 
> 标签：php, sql

如何在 SQL 选择语句中转义列的特殊字符。

我有那个 sql select 语句，并且 account_name 列的值包含特殊字符，它给了我错误，因为它没有转义这些特殊字符。

```
select * from account where account_name ='$account_name' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:28:33.373

不要使用任何 MySQL 扩展命令，它们已过时且不再推荐。

使用 PDO 和准备好的 atatements。

[http://php.net/pdo](http://php.net/pdo)

```
$name = '$somethingHere';
$stmt = $db->prepare("Select * from account where account_name = :name");
$stmt->bindValue(':name', $name, PDO::PARAM_STR);
$stmt->execute();
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:17:13.100

使用`mysql_real_escape_string($account_name)`功能。

# java - 标记一个包含多个类别的测试类

> ID：15003222
> 
> 赞同：9
> 
> 时间：2013-02-21T13:16:21.940
> 
> 标签：java, junit

我必须使用 JUnit 4.11 注释 @Category 用多个测试类别标记一个测试。是否可以？如果是，请提供一些示例代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T13:26:46.683

传递一个类别数组，如[javadoc 中所示](http://junit.org/javadoc/latest/org/junit/experimental/categories/Categories.html)。

```
@Category({SlowTests.class, FastTests.class})
public static class B {
    @Test
    public void c() {
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:27:29.197

```
public static class B {
       @Test
       @Category( { SlowTests.class, FastTests.class })
       public void c() {
       }
} 
```

这取自[用于](http://www.jarvana.com/jarvana/view/junit/junit/4.8/junit-4.8-javadoc.jar!/org/junit/experimental/categories/Categories.html).`Categories`

# c# - Asp.net 加载屏幕/隐藏表单

> ID：15003231
> 
> 赞同：0
> 
> 时间：2013-02-21T13:16:43.247
> 
> 标签：c#, jquery, asp.net, forms, loading

我有一个带有文本框、ddls、按钮等的 asp.net 表单。其中一个帖子需要一段时间才能完成。

使页面变暗、使用户无法选择任何表单控件并显示旋转加载栏的最快方法是什么，直到发布表单？

jquery中是否有类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:25:20.737

这是我的解决方案。我添加了一个隐藏的模式弹出窗口，然后当您单击按钮时我将其打开。由于弹出窗口有 autoOpen=false 它将在回发后关闭。

```
<script type="text/javascript">
    $(function () {
        $("#<%=dialog.ClientID %>").dialog({
            autoOpen: false,height: 100,width: 200,modal: true,closeOnEscape: false,resizable: false,
            open: function(event, ui) { $(".ui-dialog-titlebar-close").hide(); },
            beforeClose: function (event, ui) { return false; }
        });
        $("#buttonId").click(function () {
                $("#<%=dialog.ClientID %>").dialog("open");
        });
    })
</script>
    <div runat="server" id="dialog" title="Loading ">
    <p>Loading...</p>
    </div> 
```

一个可能的改进是将它嵌入到用户控件或母版页中，并使用类选择器而不是按钮名称。即 $('.slowButton')。

这意味着您可以选择哪些按钮应用效果来简单地添加 slowButton css 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:25:38.343

```
var $loader = $('<img src="loader.gif">').appendTo(document.body); 
```

然后在成功方法中

```
success: function (data) {
           $loader.remove();
        } 
```

它将隐藏屏幕直到不调用成功方法

或者你可以使用下面的插件

[http://www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/)

# php - PDO 在 SELECT 语句后返回错误的 rowCount()

> ID：15003232
> 
> 赞同：-1
> 
> 时间：2013-02-21T13:16:44.227
> 
> 标签：php, sqlite, pdo

我正在执行类似这样的代码：

```
// first select
$query = $link->prepare("
            SELECT id FROM table
            WHERE name = ?;"); 

$param = 'foo';

$query->bindParam(1, $param); // should return 1 row
$query->execute();
echo $query->rowCount(); // displays 0 (??????) 
```

其他示例：

```
// second select
$query = $link->prepare("
            SELECT id FROM table
            WHERE name = ?;"); // should return 0 rows

$param = 'bar';

$query->bindParam(1, $param);
$query->execute();
echo $query->rowCount(); // displays 1 (?????) 
```

我的桌子：

```
id | name
---------
1  | foo 
```

我不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:30:40.067

该`bindParam`方法是错误的，它需要一个变量或变量名。您想`bindValue`改用它，它需要您使用的文字值。

手册参考：

*   [http://www.php.net/manual/en/pdostatement.bindparam.php](http://www.php.net/manual/en/pdostatement.bindparam.php)
*   [http://www.php.net/manual/en/pdostatement.bindvalue.php](http://www.php.net/manual/en/pdostatement.bindvalue.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:20:08.670

某些数据库可能会返回 SELECT 语句返回的行数。但是，不能保证所有数据库都可以使用此行为，因此不应依赖 . [**手动**](http://php.net/manual/en/pdostatement.rowcount.php)您可以使用`COUNT(*)`and`fetchColumn()`如下查询来模拟`rowCount()`.

```
$query = $link->prepare("SELECT COUNT(*) FROM table  WHERE name = ?");
$param = 'bar';
$query->bindParam(1,$param);
$query->execute();
// Check the number of rows that match the SELECT statement 
if($query->fetchColumn() == 0) {
    echo "No records found";
 }else{
        $query = $link->prepare("SELECT id FROM table WHERE name = ?")
        //Etc
} 
```

# javascript - 选中网格视图中的所有复选框

> ID：15003234
> 
> 赞同：2
> 
> 时间：2013-02-21T13:16:47.703
> 
> 标签：javascript, asp.net, gridview

我有以下网格视图 -

```
<asp:GridView ID="group_table" Runat="server" 
    AutoGenerateColumns="False" onprerender="group_table_PreRender" 
    onrowdatabound="group_table_RowDataBound"
    ClientIDMode="Static"  CellPadding="4" ForeColor="#333333" 
    GridLines="None" Width="915px" BorderStyle=Ridge >
    <AlternatingRowStyle BackColor="White" />

    <Columns>
    <asp:TemplateField ItemStyle-Width=90>
       <HeaderTemplate>
           <asp:CheckBox ID="selectAllCheckBox" runat="server" Text="Select all"/>
       </HeaderTemplate>
     <ItemTemplate>

       <asp:CheckBox ID="selectCheckBox" runat="server"/>

     </ItemTemplate>

  </asp:TemplateField> 
```

并尝试实现以下 javascript 函数，以便当用户单击`selectAllCheckBox`所有复选框时将被选中 -

```
 $(document).ready(function() {

  var headerCheckbox = $('#group_table > tbody > tr > th > input:checkbox');

  headerCheckbox.click(function() {
     var headerChecked = $(this).attr('checked');
     var rowCheckboxes = $('#group_table > tbody > tr > td > input:checkbox');
     rowCheckboxes.attr('checked', headerChecked);
  }); 

}); 
```

但由于某种原因，这没有影响，我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:26:51.033

正如我对问题的评论中所述（您说的是正确的），您的`headerCheckbox`变量选择器错误。表标题`thead` **不在**. `tbody`试试这个：

```
var headerCheckbox = $("#group_table > thead > tr > th > input:checkbox"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:41:02.630

如果我是你，我会这样做

```
<asp:GridView ID="group_table" runat="server" AutoGenerateColumns="False" ClientIDMode="Static"
        CellPadding="4" ForeColor="#333333" GridLines="None" Width="915px" BorderStyle="Ridge">
        <AlternatingRowStyle BackColor="White" />
        <Columns>
            <asp:TemplateField ItemStyle-Width="90">
                <HeaderTemplate>
                    <asp:CheckBox ID="selectAllCheckBox" runat="server" Text="Select all" onclick="toggleChecks(this);" />
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:CheckBox ID="_CheckBox" runat="server" CssClass="psudoClass" />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
</asp:GridView> 
```

将 a 添加`psudoClass`到要检查的复选框中，然后执行此操作

```
function toggleChecks(sender) {
   $(".psudoClass").each(function (index, item) {
        item.children[0].checked = sender.checked;
   });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:23:41.677

我不知道 asp:GridView 是如何生成 html 的，但也许问题是你添加了点击处理程序 `tbody > tr > th` 而不是 `thead > tr > th`?

# android - 这可以在Android中设置图像而不是文本吗

> ID：15003238
> 
> 赞同：1
> 
> 时间：2013-02-21T13:16:56.703
> 
> 标签：android

我想在 Android 中设置图像而不是编辑文本视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:54:51.793

一种解决方案是使用 OnTextChangedListener 创建您自己的 TextView。在侦听器中，获取输入的最后一个字符并将其附加到缓存值。然后将值替换为您自己的角色。（任何 ASCII 字符）

如果您想在其中获取图像，那么您必须更深入地了解这个概念并创建您自己的 TextView 类，该类可能会覆盖`onDraw`并添加图像而不是文本。

# android - 获取安卓音频流

> ID：15003241
> 
> 赞同：3
> 
> 时间：2013-02-21T13:17:06.167
> 
> 标签：android, audio, android-framework

我想创建 Android 应用程序，它将记录来自设备扬声器的所有音频。例如，有人正在手机上观看 youtube 视频，他将能够使用我的应用程序从中保存声音。

是否可以不修改框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:53:45.703

[Visualizer](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)类可让您获取当前播放音频的低质量版本。但是，对于您描述的用例，它可能还不够好。

除此之外，没有官方支持的在 Android 中录制音频输出的方式。您当然可以调高扬声器音量并尝试使用手机的麦克风录制扬声器输出，但这听起来很可能与您通过`Visualizer`.

有些平台在硬件和驱动程序级别提供支持，通过将音频循环回 ALSA PCM 捕获设备来访问音频输出（在混合和音量/效果应用程序之后）作为录音设备。但我不知道有任何 Android 手机以应用开发者可以使用的方式实现这一点。

# gcc - 在 Windows 7 中为 JNI 编译

> ID：15003250
> 
> 赞同：1
> 
> 时间：2013-02-21T13:17:26.940
> 
> 标签：gcc, java-native-interface, cygwin

我正在尝试在 Windows 7 下将一个名为[jbliss](http://www.tcs.hut.fi/Software/bliss/jbliss-0.50beta2.zip)的开源项目编译为 DLL，以便我可以在 Java 中将它与 JNI 一起使用。使用软件包中已经提供的 makefile 在 Linux 中一切正常。

我的第一次搜索将我指向 cygwin，然后我遵循了几个建议，比如[这个](http://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html)，它基本上告诉我使用：

```
gcc-3 -D __int64="long long" -mno-cygwin -Wl,--add-stdcall-alias 
  -I"<JAVA_HOME>\include" -I"<JAVA_HOME>\include\win32" -shared -o jbliss.dll *.cc 
```

这主要给我带来以下错误：

```
bliss-0.50/timer.cc:2:23: sys/times.h: No such file or directory 
```

我用谷歌搜索了这个错误，发现[了这篇文章](https://stackoverflow.com/questions/12749529/cannot-compile-c-code-with-include-sys-times-h-in-cygwin)，建议使用`-I /usr/include/`. 但这会导致比它解决的错误更多：

```
In file included from /usr/lib/gcc/i686-pc-mingw32/3.4.4/include/c++/bits/stl_algobase.h:67,
                 from /usr/lib/gcc/i686-pc-mingw32/3.4.4/include/c++/bits/stl_tree.h:66,
                 from /usr/lib/gcc/i686-pc-mingw32/3.4.4/include/c++/set:66,
                 from bliss-0.50/graph.cc:4:
/usr/lib/gcc/i686-pc-mingw32/3.4.4/include/c++/cstdlib:181: error: `::strtold' has not been declared
/usr/lib/gcc/i686-pc-mingw32/3.4.4/include/c++/cstdlib:200: error: `__gnu_cxx::strtold' has not been declared 
```

所以我现在很困惑，希望得到一个答案，使用 gcc 的哪些选项来让它正确。我刚刚下载了 cygwin，我会说我有最新版本。

提前致谢。

* * *

额外的本地信息：

```
$ which gcc
/usr/bin/gcc

$ echo $PATH
/usr/local/bin:/usr/bin:/cygdrive/c/WATCOM/BINNT:/cygdrive/c/WATCOM/BINW:/cygdrive/c/Windows/system32:/cygdrive/c/Windows:/cygdrive/c/Windows/System32/Wbem:/cygdrive/c/Windows/System32/WindowsPowerShell/v1.0:/cygdrive/c/Program Files (x86)/QuickTime Alternative/QTSystem:/cygdrive/c/Program Files/TortoiseSVN/bin:/cygdrive/c/Program Files/MATLAB/R2011b/runtime/win64:/cygdrive/c/Program Files/MATLAB/R2011b/bin:/cygdrive/c/Program Files (x86)/OpenSSH/bin:/cygdrive/c/Program Files/MiKTeX 2.9/miktex/bin/x64:/cygdrive/c/Program Files (x86)/Graphviz 2.28/bin 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T18:01:58.120

谷歌搜索进一步向我展示了 sys/times.h 在 mingw 上确实不可用（而且显然不应该）。sys/times.h 下的包含文件据说是平台相关的，因此在 Windows 上不受支持。

解决方案是尽可能删除对 sys/times.h（或任何平台相关库）的任何调用。删除这些包含文件（当然还有向编译器添加适当的选项）会导致构建成功。

# php - 为什么我的推进级联被外键约束阻止？

> ID：15003252
> 
> 赞同：2
> 
> 时间：2013-02-21T13:17:43.320
> 
> 标签：php, foreign-keys, constraints, propel, cascade

我在数据库中有以下结构：

![在此处输入图像描述](../Images/eadc42a657855f1b7374ead469f4ab06.png)

在我的代码中，我首先创建了一个公司，然后是一个日志，然后是一些时间表，然后是一个用户，然后是一个日志责任。有点像这样（不是为了简洁起见的确切代码，但我*认为*这并不重要：

```
<?php

$company = new Company();
$company->setSomething(123);

$logbook = new Logbook();
$logbook->setSomething('abc');
$logbook->setCompany($company);

$schedules = array();
for ($x=0; $x<$something; $x++) {
  $schedule = new Schedule();
  $schedule->setSomething(doSomethingWithSomething($something[$x]);
  $schedule->setLogbook($logbook);
  $schedules[] = $schedule;
}

$user = new User();
$user->setSomething('something');
$user->setCompany($company);
$user->setCurrentLogbook($logbook);

$logbookResponsibility = new LogbookResponsibility();
$logbookResponsibility->setLogbook($logbook);
$logbookResponsibility->setResponsibilityId(1);
$logbookResponsibility->setUser($user);

$errors = someFormOfCheck();

if (!$errors) {
  $user->save();
  $logbookResponsibility->save();
  foreach ($schedules as $schedule) {
    $schedule->save();
  }
} 
```

我收到以下错误：

```
<b>Fatal error</b>:  Uncaught exception 'PDOException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`logbook`.`logbook_responsibility`, CONSTRAINT `fk_logbook_responsbility_user` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON UPDATE CASCADE)' in C:\wamp\bin\php\php5.3.8\pear\propel\connection\DebugPDOStatement.php:90 
```

该`logbook_responsibility`表由三个外键组成，每个外键都有一个`RESTRICT`更新，因为如果存在日志责任，我不希望删除用户、日志或责任类型。但是，我相信问题是由级联的顺序决定的。

如果我完全取出`$logbookResponsibility`零件，它会完美运行。如果我将这些`$logbookResponsibility`部分放在*之后*，`$user->save();`然后再发出 a `$logbookResponsibility->save();`，那也很有效。

那么，我的问题是，我哪里出错了？为了使级联工作，我在假设不正确或做错了什么？还是有其他可能阻止它的东西？

**更新：**如果我执行以下操作，它工作得很好：

```
$company->save();
$logbook->save();
$user->save();
$logbookResponsibility->save();
foreach ($schedules as $scheudle) {
  $schedule->save();
} 
```

即，如果我先手动保存它们而不是依赖级联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:29:23.757

对于您所看到的确切问题，我无法给您一个好的、直接的答案，但是我在 Propel 中遇到了与外键和关系类似的令人困惑的问题。我现在的最佳实践是手动设置 ID，而不是让 Propel 尝试通过定义的关系来管理设置它们。在这种情况下，这意味着不打电话`$logbookResponsibility->setLogbook()`或根本不打电话`$logbookResponsibility->setUser()`。而是在调用and`$logbookResponsibility->setLogbookId()`之后`$logbookResponsibility->setUserId()`调用and 。`save()``$user``$logbook`

Propel 通过引用做了很多事情，当您处理外键并通过调用期望对象的方法（例如`setLogbook()`）而不是期望关系 ID 的方法（例如 ）来设置关系时，这可能会产生意想不到的后果`setLogbookId()`。

# visual-studio-2010 - CodedUI 测试：识别 html 实体字符

> ID：15003253
> 
> 赞同：0
> 
> 时间：2013-02-21T13:17:43.540
> 
> 标签：visual-studio-2010, testing, automated-tests, coded-ui-tests

在我的 CodedUI 测试中，我正在做这个字符串比较：“Provider BAO”，但在应用程序中，字符串看起来像这样：“Provider  BAO”，测试不理解字符串。如何做测试理解这个字符串？Ps：字符串分配在组合框字段上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T15:20:22.530

您可以使用
**HttpUtility.HtmlDecode**方法将“Provider  BAO”转换为“”Provider BAO”

您将需要导入 System.Web 命名空间。

# c++ - 在 C++ 中创建线程进程

> ID：15003260
> 
> 赞同：2
> 
> 时间：2013-02-21T13:18:11.670
> 
> 标签：c++, pthreads

首先，thread和pthread有什么区别。我应该在 C++ 中使用什么。

我正在尝试使用 pthread，如下所示：

```
//MyPatcher.h

class MyPatcher
{
   public:
     void createThread();

   private:
     void * Checkingdata(void *arg);
}

// MyPatcher.cpp
#include "MyPatcher.h"
#include <pthread.h>
using namespace std;

void MyPatcher::createThread()
{
  pthread_t threadDataReading;

  if(pthread_create(&threadDataReading, NULL, Checkingdata, NULL))  
    printf("Could not create thread\n");

  if(pthread_join(threadReadingGps, NULL))  
    printf("Could not join thread\n");
}

void * MyPatcher::Checkingdata(void *arg)
{
  return NULL;
} 
```

但我遇到了这些问题：

```
./MyPatcher.cpp:71:73: error: argument of type 'void* (SampleApp::MyPatcher::)(void*)' does not match 'void* (*)(void*)' 
```

我怎么解决这个问题？

// 然后我也尝试使用线程：

```
//MyPatcher.h

    class MyPatcher
    {
       public:
         void createThread();

       private:
         void Checkingdata();
    }

    // MyPatcher.cpp
    #include "MyPatcher.h"
    #include <thread>
    using namespace std;

    void MyPatcher::createThread()
    {
      pthread_t threadDataReading(Checkingdata);

      threadDataReading.join();
    }

    void MyPatcher::Checkingdata()
    {

    } 
```

但我遇到了这个问题：错误：没有匹配函数调用'std::thread::thread()'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:31:45.997

> 首先，thread和pthread有什么区别。

pthread 是一个线程库实现，可以用 C、C++ 和其他语言访问。

thread 是 std::thread，一个 C++ 对象（C++11 的一部分）——至少我认为你所说的线程就是这个意思。

> 我应该在 C++ 中使用什么。

如果您有支持它的编译器，请使用 std::thread。否则，看看你是否可以使用 boost::thread。如果出于某种原因这两个都不是好的选择（您的项目不允许使用 boost，您必须使用旧的 C++ 编译器等），那么 pthread 是一个不错的选择。

> 我该如何解决这个[特定编译]问题？

您的实现尝试将 C++ 对象成员函数作为自由函数指针传递（这应该不起作用）。您应该创建一个自由函数来调用您的对象函数。

编辑 [std::thread 示例]：

```
class MyPatcher
{
   public:
     void createThread();

   private:
     void Checkingdata();
}

// MyPatcher.cpp
#include "MyPatcher.h"
#include <thread>
#include <functional> // std::bind
using namespace std;

void MyPatcher::createThread()
{
    // std::bind -> return a functor with signature void functor(void);
    std::thread threadDataReading(std::bind(&MyPatcher::Checkingdata, this));

    threadDataReading.join();
}

void MyPatcher::Checkingdata()
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:22:53.120

`pthread_create()`需要一个普通的 C 风格的函数指针。`this`你传递给它的是一个成员函数指针，如果没有（通常是隐式的）参数就不能调用它。

您可以通过定义一个普通函数的小包装器来使其工作：

```
static void * Checkingdata(void *arg)
{
  static_cast<MyPatcher*>(arg)->CheckingData();
} 
```

`pthread_create()`然后你将该函数以及你的类实例的地址作为最后一个参数传递给（而你有 NULL）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T13:27:19.080

您传递给`pthread_create`的函数不能是成员函数。您可以通过创建静态函数来解决此问题。由于您将 NULL 作为参数传递，因此我将重用`void *arg`来传递对象：

```
 static void * Checkingdata(void *self)
 {
      MyPatcher *me = reinterpret_cast<MyPatcher*>(self);
      me->DoCheckingData();
 }

 void * DoCheckingdata();   // Does the things you want to do. 
```

原因是线程函数没有“this-pointer”作为隐藏参数传递给成员函数。

还有其他替代方案，例如 using `std::thread`，它将`std::function`对象作为参数 - 或者可以转换为`td::function`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T13:26:44.843

如果您正在开发一个绿地项目，并且您正在使用兼容 c++11 的编译器的平台上工作，我强烈建议您考虑使用`std::thread`. 正如命名空间所暗示的，线程支持现在已内置到标准库中。谷歌“C++11 线程”获取大量教程信息。

# internet-explorer - IE9 不清除帖子之间的缓存

> ID：15003263
> 
> 赞同：0
> 
> 时间：2013-02-21T13:18:15.163
> 
> 标签：internet-explorer, session, post, http-headers, browser-cache

我有一个执行以下操作的页面：

1.  点击按钮提交表单
2.  页面发布到自身，并执行 SQL 查询以更新数据库中的字段。
3.  然后代码检查查询执行中是否有任何受影响的行，并进行回显。我希望它能够回显受影响的行“1”

在 Firefox、Safari 和 Chrome 中，此操作每次都有效。但在 IE9 中，它第一次工作，可能是 2 次甚至 3 次，然后它做了一些奇怪的事情 -**它回显受影响的行“0”** -**即使查询执行得很好（数据库已更新）。**

我相信这是某种**缓存问题**，因为当我在第 1 步（提交表单）之前清除 IE 中的浏览器缓存时，它每次都可以按需要工作。

我试过使用这段代码：

```
header('Cache-Control: no-cache, no-store, must-revalidate'); // HTTP 1.1.
header('Pragma: no-cache'); // HTTP 1.0.
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past 
```

这在`<head>`标签中：

```
<meta http-equiv="Cache-Control" content="no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="Mon, 26 Jul 1997 05:00:00 GMT" /> 
```

到底是怎么回事？我怎样才能阻止 IE 像这样播放？

**更新：**

PHP PDO 的 rowCount() 似乎存在某种不一致（用于获取受影响的行）......在我的情况下，我无法想象如何，但这种不一致与浏览器缓存有关。在执行我的查询后，我没有使用 rowCount()，而是执行了一个 SELECT 来确定该字段是否已使用新的 val 进行了更新。这似乎一直在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:58:29.713

执行查询后，不要使用 PDO 的 rowCount()，而是执行 SELECT 查询以确定该字段是否已使用新 val 进行了更新。

伪代码/SQL：

1.  更新表集字段 = '新值' where field = '旧值'
2.  从表中选择行，其中字段 = '新值'
3.  如果返回行，则该字段已更新

# module - 在自定义模块创建中如何查看 drupal 7.15 中的基本数据库表

> ID：15003264
> 
> 赞同：2
> 
> 时间：2013-02-21T13:18:20.867
> 
> 标签：module, drupal-7, entity, drupal-modules

我正在 drupal 7.15 中创建一个模块，它依赖于实体 api 。我的模块名称是employee 我已经创建了一个employee.info 文件以及employee.install 文件。但是在数据库中，我在employee.install 文件中看不到我自己创建的数据库模式。这是我的 .info 文件和 .install 文件分别编辑：

```
name = Employee Management
description = A module that describes about the employee management 
core = 7.x
package = Employee management module
files[] = employee.module 
```

编辑：

```
<?php
/**
* @file
* Install for a employee entity - need to create the base table for our entity.
* This table can have as many colums as you need to keep track of entity-specific
* data that will not be added via attached fields.
* The minimum information for the entity to work is an id and an entity name.
*/

/**
* Implements hook_schema()
*/
function employee_schema() {
$schema = array();

$schema['employee'] = array(
'description' => 'The base table for employee entity.',
  'fields' => array(
   'employee_id' => array(
   'description' => 'Primary Key: Identifier for a employee entity.',
   'type' => 'serial',
   'unsigned' => TRUE,
   'not null' => TRUE,
   ),
   'first_name' => array(
   'description' => 'The First name of employee entity.',
   'type' => 'varchar',
   'length' => 255,
   'not null' => TRUE,
   'default' => '',
   ),
   'last_name' => array(
   'description' => 'The Last name of employee entity.',
   'type' => 'varchar',
   'length' => 255,
   'not null' => TRUE,
   'default' => '',
   ),
   'employee_add' => array(
   'description' => 'The address of employee entity.',
   'type' => 'varchar',
   'length' => 255,
   'not null' => TRUE,
   'default' => '',
   ),
   'employee_doj' => array(
   'description' => 'The address of employee entity.',
   'type' => 'date',
   'not null' => TRUE,
   'default' => '',
   ),
   ),
   'primary key' => array('employee_id'),
    );

return $schema;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:49:45.823

最初安装模块后，您是否在 .install 文件中添加了 hook_schema()？仅在安装模块时才安装模式。（不要与启用混淆）

尝试完全卸载模块，然后重新安装：

1）禁用模块 2）卸载模块（从管理模块页面上的卸载选项卡） 3）重新安装模块

这应该会在安装时触发 hook_schema。你的钩子实现看起来不错。

如果架构有问题，您应该在安装模块时看到错误。（完全卸载后）如果错误未设置为在屏幕上显示，请检查报告 -> 数据库日志。

另请注意，您无需`files[] = employee.module`在信息文件中声明。

# objective-c - 自定义类初始化时的 EXC_BAD_ACCESS

> ID：15003268
> 
> 赞同：2
> 
> 时间：2013-02-21T13:18:27.590
> 
> 标签：objective-c, memory-management

我写了以下课程：

`.h`：

```
#import <Foundation/Foundation.h>
@class TDLPaneViewController;

@interface TDLSubViewController : NSObject

@property (nonatomic, strong) IBOutlet UIView* view;
@property (nonatomic, strong) TDLPaneViewController* paneViewController;

- (id) initWithNibName:(NSString*)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil;

- (void)viewWillAppear:(BOOL)animated;
- (void)viewDidAppear:(BOOL)animated;
- (void)viewWillDisppear:(BOOL)animated;
- (void)viewDidDisppear:(BOOL)animated;

@end 
```

`.m`：

```
#import "TDLSubViewController.h"

@interface TDLSubViewController ()
{
     UIView *view;
}

@property (nonatomic, strong) NSString* nibName;
@property (nonatomic, strong) NSBundle* nibBundle;

@end

@implementation TDLSubViewController

@synthesize paneViewController, view;
@synthesize nibName, nibBundle;

- (id)initWithNibName:(NSString*)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super init];

    if (self)
    {
          self.nibName = nibNameOrNil;
          self.nibBundle = nibBundleOrNil;
    }
}

- (void)viewWillAppear:(BOOL)animated
{
     NSLog(@"viewWillAppear:%i", animated);
}
- (void)viewDidAppear:(BOOL)animated
{
     NSLog(@"viewDidAppear:%i", animated);
}
- (void)viewWillDisppear:(BOOL)animated
{
     NSLog(@"viewWillDisppear:%i", animated);
} 
- (void)viewDidDisppear:(BOOL)animated
{
     NSLog(@"viewDidDisppear:%i", animated);
}

@end 
```

显示另一个视图时出现错误： - (void)viewDidAppear:(BOOL)animated { [super viewDidAppear:animated];

```
 TDLTestSubViewController* subView = [[TDLTestSubViewController alloc] initWithNibName:@"TDLTestSubViewController" bundle:nil] ;

     [self pushSubViewController:nil animated:YES leftSide:YES];

} 
```

TDLTestSubViewController 是 TDLSubViewController 的子类。

如果我使用 UIViewController 而不是 TDLTestSubViewController 一切正常，如果我关闭 ARC 也可以。所以我认为问题出在 TDLSubViewController 类中。请，建议什么可能是错的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:21:23.237

您的方法在必须时`initWithNibName:bundle:`不会返回。`self`

# android - 搜索按钮不起作用

> ID：15003277
> 
> 赞同：0
> 
> 时间：2013-02-21T13:18:56.593
> 
> 标签：android, search, android-edittext

我需要在设备的软键盘上做搜索按钮。我的代码：

**XML 文件：**

```
<EditText
    android:id="@+id/searchText"
    android:layout_width="match_parent"
    android:layout_height="40dp"
    android:textSize="15sp"
    android:hint="@string/search"
    android:drawableLeft="@drawable/ic_btn_search"
    android:singleLine="true"
    android:drawablePadding="5dp"
    android:imeOptions="actionSearch"
    android:imeActionLabel="Search" android:layout_weight="1"/> 
```

**Java 文件：**

```
 searchFild = (EditText) findViewById(R.id.searchEditTxt);
    searchFild.setImeOptions(EditorInfo.IME_ACTION_SEARCH);
    searchFild.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        @Override
        public boolean onEditorAction(TextView textView, int arg, KeyEvent keyEvent) {
            if(arg == EditorInfo.IME_ACTION_SEARCH) {
                String searchString=searchFild.getText().toString();
                searchBibles(searchString);
                return true;
            }
            return false;
        }
    }); 
```

搜索按钮预设在键盘中，但点击后没有任何反应。arg 为零。它适用于 android 2.2，但不适用于 android 4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:05:29.050

在 xml 中，您需要`inputType`将`text`. 在您可以删除的 Java 代码中`searchFild.setImeOptions(EditorInfo.IME_ACTION_SEARCH);`，至少这使它可以在 Android 4.1.2 上运行（这是我测试过的唯一版本）

我使用的完整代码如下所示：

```
<EditText
        android:id="@+id/txtSearch"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:drawableLeft="@drawable/action_search"
        android:drawablePadding="5dp"
        android:hint="@string/input_keywords_for_search"
        android:imeActionLabel="Search"
        android:inputType="text"
        android:imeOptions="actionSearch" /> 
```

和 Java 代码

```
final EditText txtSearch = (EditText) findViewById(R.id.txtSearch);
txtSearch.setOnEditorActionListener(new OnEditorActionListener() {

    @Override
    public boolean onEditorAction(TextView v, int actionId,
        KeyEvent event) {
        if (actionId == EditorInfo.IME_ACTION_SEARCH) {
        String searchString = txtSearch.getText().toString();
        search(searchString);
        return true;
    }
    return false;
    }
}); 
```

我希望这有帮助！

# grails - Grails 未将 DataSource.groovy 文件用于测试环境

> ID：15003284
> 
> 赞同：0
> 
> 时间：2013-02-21T13:19:24.073
> 
> 标签：grails

我想在 grails 中将数据库从 inbuild H2 更改为 Mysql 数据库，Grails 文档说 Datasource.groovy 文件中的更改将更改数据库，但它仅适用于我的开发环境而不适用于测试环境，即使我尝试删除完整的Datasource.groovy 文件并从 mysql 中删除数据库并尝试运行测试它就成功了，所以任何人都可以帮助我做错了什么。

我已经在 stackoverflow 中解决了几乎所有问题，每个人都建议在 DataSource.groovy 文件中进行更改，但它对我不起作用。

```
dataSource {
pooled = true
driverClassName = "com.mysql.jdbc.Driver"
dialect = "org.hibernate.dialect.MySQL5InnoDBDialect"
username = "root"
logSql =true
password = "root"

properties {
    maxActive = -1
    minEvictableIdleTimeMillis = 1800000
    timeBetweenEvictionRunsMillis = 1800000
    numTestsPerEvictionRun = 3
    testOnBorrow = true
    testWhileIdle = true
    connectionProperties = "[autoReconnectForPools=true]"
    testOnReturn = true
    validationQuery = "SELECT 1"
}
}

hibernate {
cache.use_second_level_cache = true
cache.use_query_cache = true
cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}

environments {
development {
    dataSource {
        dbCreate = "update" // one of 'create', 'create-drop','update'
        url = "jdbc:mysql://127.0.0.1/devenvi"
    }
}
test {
    dataSource {
        dbCreate = "update" // one of 'create', 'create-drop','update'
        url = "jdbc:mysql://127.0.0.1/testenvi"
    }
}
production {
    dataSource {
        dbCreate = "update"
        url = "jdbc:mysql://127.0.0.1/prodenvi"
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:07:37.997

1) 确保您在 DataSource.groovy 中有一个用于您的测试环境的部分，例如：

```
dataSource {
    pooled = true
    driverClassName = "com.mysql.jdbc.Driver"
    dialect = org.hibernate.dialect.MySQL5InnoDBDialect
}
environments {
    test {
        dataSource {
            url = "jdbc:mysql://liveip.com/liveDb"
            // other environment-specific settings here
        }
    }
} 
```

2）确保您正在执行指定**测试**环境的构建：

```
/path/to/grails -Dgrails.env=test war 
```

将生成 project.war 文件，该文件将使用 DataSource.groovy 文件中的适当环境设置

# java - 从 requestscoped 获取 sessionscoped cdi

> ID：15003286
> 
> 赞同：0
> 
> 时间：2013-02-21T13:19:28.967
> 
> 标签：java, cdi, inject

我想在另一个 RequestBean 中注入一个已经在会话中的 SessionScoped 对象，并且它成功地注入了它，但似乎它创建了一个新的类实例，而不是现在给我带来它在会话中的内容。

我的问题与它有关： [Get access to session scoped CDI bean from request scoped CDI Bean](https://stackoverflow.com/questions/8512206/get-access-to-session-scoped-cdi-bean-from-request-scoped-cdi-bean)

但最后它没有解决它。

# vba - 处理多个工作表中的数据 - VBA

> ID：15003293
> 
> 赞同：2
> 
> 时间：2013-02-21T13:19:43.923
> 
> 标签：vba

我是 VBA 的新程序员，我需要比较不同工作表中的值才能做出决定。

我在其中一个工作表中有一个测试模板，其他工作表有每个学生的答案。实际上，在 Sheet1 的单元格 A1 中是正确答案。现在我必须浏览所有表格并检查每个答案的单元格 A1 中是否正确。

我的代码如下：

```
Function Answer(Var As Range) As Long

   For Each Plan In ThisWorkbook.Worksheets
       Plan.Activate
       If Plan.Range(Var).Value = 1 Then 'Line 4
          Answer = Answer + 1
       End If
   Next Plan

End Function 
```

在第 4 行中，我尝试获取当前单元格的值。但是，它返回一个#Value 错误。谁能帮我？

非常感谢您的帮助！

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:33:52.850

**编辑：**

对不起，那太快了。这个应该工作：

```
Function Answer(Var As Range) As Long
   For Each Plan In ThisWorkbook.Worksheets
       If Plan.Range(Var.Address).Value = 1 Then 'Line 4
          Answer = Answer + 1
       End If
   Next Plan

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:34:34.003

似乎您将错误的参数传递给函数。由于您想检查`A1`每张纸的范围，我建议进行以下修改：

```
Function Answer(rngAddress as String) As Long
   For Each Plan In ThisWorkbook.Worksheets  
      If Plan.Range(rngAddress).Value = 1 Then  Answer = Answer + 1       
   Next Plan
End Function
'Usage:
Debug.Print Answer("A1") 
```

**提示：**您无需激活工作表即可从单元格中获取值

# python - python中以10为底的int（）的无效文字

> ID：15003296
> 
> 赞同：0
> 
> 时间：2013-02-21T13:19:52.380
> 
> 标签：python

我的编码有问题。我编写了一个 python 代码，它读取一个文本文件并将行拆分为单词，然后将这些单词放入数组中。这是我的代码：

```
from whoosh import fields, index
import os.path
import csv
import codecs

# This list associates a name with each position in a row
columns = ["juza","chapter","verse","voc"]

schema = fields.Schema(juza=fields.NUMERIC,
                       chapter=fields.NUMERIC,
                       verse=fields.NUMERIC,
                       voc=fields.TEXT)

# Create the Whoosh index
indexname = "indexdir"
if not os.path.exists(indexname):
  os.mkdir(indexname)
ix = index.create_in(indexname, schema)

# Open a writer for the index
with ix.writer() as writer:
  # Open the CSV file
  with open("tt.txt", 'r') as txtfile:
    # Create a csv reader object for the file
    #csvreader = csv.reader(csvfile,delimiter='\t')
    lines=txtfile.readlines()

    # Read each row in the file
    for i in lines:

      # Create a dictionary to hold the document values for this row
      doc = {}
      thisline=i.split()
      u=0

      # Read the values for the row enumerated like
      # (0, "juza"), (1, "chapter"), etc.
      for w in thisline:

        # Get the field name from the "columns" list
          fieldname = columns[u]
          type(w)
          u+=1

        # Strip any whitespace and convert to unicode
        # NOTE: you need to pass the right encoding here!
        #value = unicode(value.strip(), "utf-8")

        # Put the value in the dictionary
          doc[fieldname] =u"w"

      # Pass the dictionary to the add_document method
      writer.add_document(**doc)
    writer.commit() 
```

但我面临这个问题：

```
Traceback (most recent call last):
  File "C:\Python27\yarab.py", line 53, in <module>
    writer.add_document(**doc)
  File "C:\Python27\whoosh\filedb\filewriting.py", line 369, in add_document
    items = field.index(value)
  File "C:\Python27\whoosh\fields.py", line 466, in index
    return [(txt, 1, 1.0, '') for txt in self._tiers(num)]
  File "C:\Python27\whoosh\fields.py", line 454, in _tiers
    yield self.to_text(num, shift=shift)
  File "C:\Python27\whoosh\fields.py", line 487, in to_text
    return self._to_text(self.prepare_number(x), shift=shift,
  File "C:\Python27\whoosh\fields.py", line 476, in prepare_number
    x = self.type(x)
ValueError: invalid literal for int() with base 10: 'w' 
```

这是输入文本文件的示例：

```
1   1   1   hala
1   1   2   yomna
1   1   3   hala
1   1   4   yomna
1   2   1   hala
1   2   2   yoomna 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:01:16.530

你在哪里：

```
doc[fieldname] =u"w" 
```

您正在将文字 unicode 字符串“w”分配给字段`fieldname`。如果`fieldname`是整数，这显然会失败。

相反，请执行以下操作：

```
if isinstance(w, basestring):
    w = unicode(w)
doc[fieldname] = w 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:31:57.463

尝试将`hala`和其他转换为字符串。使用功能`str()`。

# mysql - 如何在sql中将goup_concat分隔符设置为列字段

> ID：15003304
> 
> 赞同：2
> 
> 时间：2013-02-21T13:20:14.207
> 
> 标签：mysql, sql, group-concat

我有一个表格，其中有一列艺术家和另一列符号，并希望将它们加入一个单元格。加入时，尝试此操作时出现以下错误

```
SELECT LOOK_UP_TO_CAT_ID, group_concat( ARTIST
SEPARATOR SYMBOL )
FROM artist_view
GROUP BY LOOK_UP_TO_CAT_ID 
```

1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 'SYMBOL) FROM artist_view group by LOOK_UP_TO_CAT_ID LIMIT 附近使用的正确语法

如何让分隔符成为我的 SYMBOL 字段

# 编辑：什么对我有用

这最终对我有用。我在这里找到了答案：

[在 MySQL 中将多行连接成单行](https://stackoverflow.com/questions/9116501/concatenate-multiple-rows-in-single-rows-in-mysql)

```
SELECT 
  LOOK_UP_TO_CAT_ID,
  group_concat( concat( ARTIST, " ",SYMBOL," " ) SEPARATOR '' )
FROM artist_view
GROUP BY LOOK_UP_TO_CAT_ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:27:01.637

您不能这样做，`SEPARATOR`必须是字符串文字，不能放置列或表达式。引用自[**`GROUP_CONCAT`**](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)：

> 使用 SEPARATOR 后跟应插入组值之间**的字符串文字值。**

改为使用字符串文字作为分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:56:42.183

我不确定你想如何`ARTIST,SYMBOL,SEPARATOR`在每个组合中分开，`LOOK_UP_TO_CAT_ID`但这应该让你开始：

```
select LOOK_UP_TO_CAT_ID,group_concat(grouped)
from
(
select LOOK_UP_TO_CAT_ID,ARTIST,`SEPARATOR`,`SYMBOL`,
concat(ARTIST,`SEPARATOR`,SYMBOL) as grouped
from artist_view av
) t
group by LOOK_UP_TO_CAT_ID; 
```

# ruby-on-rails - 回形针多个调整大小条件

> ID：15003306
> 
> 赞同：0
> 
> 时间：2013-02-21T13:20:20.153
> 
> 标签：ruby-on-rails, imagemagick, paperclip

我正在开发一个具有多种图像上传条件的应用程序。条件是它必须*至少*350px 高，并且具有 500px 的固定宽度。

我已经玩了一段时间了，我想出了一种使用方法`convert_options`：

```
:convert_options => {
    :medium => "-resize 500x350^ -crop 500x1000+0+0 +repage"
} 
```

我可以将裁剪中的高度参数设置为任何值，但 1000 是一个合适的数字。

这行得通，但是我觉得我把它复杂化了，我很想知道在`:styles`使用标志时是否可以使用单个参数来做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:26:35.490

您可以在`:styles`属性内的过程中根据条件设置图像的大小尺寸。

有关详细信息，请查看[此](https://stackoverflow.com/questions/2656939/ror-paperclip-how-to-set-minimal-width-of-an-attachement)SO 帖子。

# android - Android如何在Android中添加多个ContentProvider？

> ID：15003310
> 
> 赞同：4
> 
> 时间：2013-02-21T13:20:28.573
> 
> 标签：android, sqlite, android-contentprovider

1.  这可以使用多个 ContentProvider 吗？

2.  如果可能，如何在清单中声明？我尝试使用以下方式，但`getContentResolver()`只获得第一个提供者。

    ```
     <provider
            android:name=".bean.ItemBean"
            android:authorities="com.waveletandroid.bean" >
        </provider>

       <provider
            android:name=".bean.CustomerBean"
            android:authorities="com.waveletandroid.bean" >
        </provider> 
    ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T13:39:34.503

> 这可以使用多个 ContentProvider 吗？

是的。或者，您可以拥有一个`ContentProvider`根据路径部分`Uri`或通过不同权限提供多个数据集的数据集。

> 如果可能，如何在清单中声明？

你所拥有的几乎是正确的。但是，他们不能同时拥有相同的权限。将一个更改为其他内容（例如，`com.waveletandroid.bean2`）。

# gwt - 如何在 GWT 中获取实体标识符？

> ID：15003311
> 
> 赞同：0
> 
> 时间：2013-02-21T13:20:31.260
> 
> 标签：gwt, entity, requestfactory

在 GWT 应用程序中创建新实体（在关系数据库术语中，表中的新行）时，我需要为新实体提供唯一标识符，并且该标识符需要在系统的所有并发用户中是唯一的。鉴于此，我无法在客户端生成新标识符......我需要从服务器请求它。我正在为应用程序使用请求工厂，因此我通常不使用 GWT RPC 与服务器通信，但我认为在这种情况下它可能是请求唯一标识符的最佳方式。获得唯一标识符的最佳方法是什么？如果新实体中的某些字段（列）有默认值，您将从哪里获得这些值？你会从服务器获取它们吗？或者将它们嵌入到客户端代码中？

# jquery - 通过 Ajax 更新两个下拉框

> ID：15003314
> 
> 赞同：1
> 
> 时间：2013-02-21T13:20:38.067
> 
> 标签：jquery, bind, onchange, eventtrigger

我有两个通过 Ajax 更新的下拉框，手动使用时都可以正常工作。

用户单击第一个下拉菜单并选择一个进行 Ajax 调用的项目并更新第二个下拉框。当用户单击第二个下拉 Ajax 响应更新表单时。

现在我的问题：我希望能够使用 URL 将用户发送到该表单并传递两个变量，以便表单检查变量并自动更新两个下拉列表。我能够毫无问题地更新第一个下拉菜单，并触发更改事件。但由于某种原因，第二个下拉框值不会更新。

以下是我拥有的代码片段：

```
jQuery('#jform_make').val('<?php echo $make; ?>');
jQuery('#jform_make').trigger('change', function() {
    console.log("state changed");
    jQuery('#jform_service').val('<?php echo $service; ?>');
    jQuery('#jform_service').change();
});
//jQuery('#jform_make').change( function(){
jQuery('#jform_make').bind('change', function() {
    console.log("state changed");
}); 
```

这甚至不会在控制台中记录任何内容。

更新：

```
jQuery('#jform_make').val('<?php echo $make; ?>').change();
jQuery('#jform_make').change(function(event) {
    console.log(jQuery(this).val());
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:41:23.100

**演示：http:** [//jsfiddle.net/dU7kz/1/](http://jsfiddle.net/dU7kz/1/)

**HTML：**

```
<select id="dd1" class="dropdown"></select>
<select id="dd2" class="dropdown"></select> 
```

**JS：**

```
$('#dd1').append('<option value="1">My option 1</option>');
$('#dd1').append('<option value="2">My option 2</option>');
$('#dd1').append('<option value="3">My option 3</option>');
$('#dd1').append('<option value="4">My option 4</option>');
$('#dd1').append('<option value="5">My option 5</option>');
$('#dd1').val('3');

$('#dd2').append('<option value="6">My option 6</option>');
$('#dd2').append('<option value="7">My option 7</option>');
$('#dd2').val('7');

$('.dropdown').change(function(event) {
    alert($(this).val());
}); 
```

# android - Android 应用版权问题

> ID：15003318
> 
> 赞同：0
> 
> 时间：2013-02-21T13:20:54.363
> 
> 标签：android, google-play

目前我正在为开发者控制台使用较旧的设计。现在对于我的应用程序，我在版权部分选择了关闭选项。几天后，我的开发者控制台主页上出现了一条通知，说版权功能已被弃用，我们应该使用许可服务。如果我更改为新版本设计，我不会在主页中收到任何此类通知。但我对旧设计感到满意，所以我使用的是旧设计。现在只想澄清一下我有什么需要担心的（因为我没有启用版权功能）？？？？？？欢迎任何想法...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:33:18.277

取决于你害怕什么。

使用许可服务或版权的原因是为了保护您的代码不被复制或在未经您同意的情况下使用。

因为您已经选择了关闭选项，所以新的更改不会影响您的设置。但我的建议是，使用设置/服务，比抱歉更安全。

# assembly - x86 中的变量大小

> ID：15003320
> 
> 赞同：3
> 
> 时间：2013-02-21T13:20:55.300
> 
> 标签：assembly, disassembly

C 文件中定义的变量的大小在编译后的代码的汇编等效项中出现在哪里？

想象一下你的第一个代码是：

```
char buffer[2];
char a[3]; 
```

你的下一个代码是：

```
char buffer[3];
char a[2]; 
```

其中“buffer”和“a”是函数的局部变量。

在这两种情况下，`esp`当你进入函数时，它都会减少相同的字节数，但是如果你没有访问源代码并且只是在反汇编二进制文件，有没有办法区分边界？

我想知道二进制文件中是否有一个段可以跟踪变量的大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:23:00.203

据我所知，在这种情况下判断的唯一方法是查看堆栈的使用方式。

一旦代码被编译为汇编，类型信息并没有真正保留，唯一可以推断的是正在使用的汇编指令的类型（无论它们是对位、字、双字等进行操作）

IDA Pro 有一个反汇编为 C 的功能，该功能通常是准确的，它在大多数情况下不会简化为工作 C，但在 ASM 的快速分析方面非常强大。它所做的一件事是找出数组的大小，但是很多时候它只会将它们键入为字节（或字符）数组，您可能必须分析代码以查看它是如何被准确使用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:23:55.563

> 我想知道二进制文件中是否有一个段可以跟踪变量的大小。

不，没有。

最多您可以找到变量的相对偏移量，以及分配的总堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:29:38.790

通常它被放在一个单独的文件中（或者更常见的是：无处），但诸如此类的调试信息*可能*保存在二进制文件中。显然，您不能依赖它，但是如果您可以控制二进制文件的生成，则可以安排信息在那里。

# javascript - 将表示对象的字符串转换为 javascript 对象

> ID：15003333
> 
> 赞同：0
> 
> 时间：2013-02-21T13:21:30.863
> 
> 标签：javascript, string, object

我目前正在使用 jqplot 来显示一些图表并使用 php 准备 javascript 代码。

在我的一个图表上，我使用 Ajax 来获取一个新图表。为此，我得到一个 json 数组，其中包含值列表和图表选项作为字符串，如下所示：

这是我得到的 JSON：

```
{"idGraphe":"bar_chart_5","conditions":"[]","data":"[[[1,80423],[2,62634],[3,70625],[4,72187],[5,72739],[6,70078],[7,72751],[8,74300],[9,75550],[10,72482],[11,70971],[12,77579]],[[1,73386],[2,70068],[3,85018],[4,69761],[5,75317],[6,68240],[7,72487],[8,74716],[9,74340],[10,75012],[11,74800],[12,83105]]]","options":"{series : [{label : 'consommationtotale Pilote1' , yaxis : 'yaxis' },{label : 'consommationtotale Pilote2' , yaxis : 'yaxis' }] , seriesDefaults : {renderer : $.jqplot.BarRenderer , rendererOptions : {barWidth : null} } , cursor : {show : true , zoom : true, showTooltip : false}, highlighter : {showTooltip : true , tooltipAxes : 'both' , tooltipContentEditor : getPointInfo , show : true} , title : 'Bar chart', legend : {show : true , renderer: $.jqplot.EnhancedLegendRenderer}, axes : {xaxis:{ tickRenderer:$.jqplot.CanvasAxisTickRenderer , renderer: $.jqplot.CategoryAxisRenderer,pad : 0 , label : 'mois' , labelRenderer: $.jqplot.CanvasAxisLabelRenderer}, yaxis:{ label : 'consommationtotale' , labelRenderer: $.jqplot.CanvasAxisLabelRenderer }}}"} 
```

这是我有问题的部分：

```
"{series : [{label : 'consommationtotale Pilote1' , yaxis : 'yaxis' },{label : 'consommationtotale Pilote2' , yaxis : 'yaxis' }] , seriesDefaults : {renderer : $.jqplot.BarRenderer , rendererOptions : {barWidth : null} } , cursor : {show : true , zoom : true, showTooltip : false}, highlighter : {showTooltip : true , tooltipAxes : 'both' , tooltipContentEditor : getPointInfo , show : true} , title : 'Bar chart', legend : {show : true , renderer: $.jqplot.EnhancedLegendRenderer}, axes : {xaxis:{ tickRenderer:$.jqplot.CanvasAxisTickRenderer , renderer: $.jqplot.CategoryAxisRenderer,pad : 0 , label : 'mois' , labelRenderer: $.jqplot.CanvasAxisLabelRenderer}, yaxis:{ label : 'consommationtotale' , labelRenderer: $.jqplot.CanvasAxisLabelRenderer }}}" 
```

我的问题是，为了使用适当的选项绘制图表，我需要将其作为 javascript 对象传递。而且我不知道如何将我的字符串转换为相应的 javascript 对象。

我试图将它转换为一个对象，但没有成功，我没有太多使用 javascript 的经验。

有没有人有解决方案或提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:51:19.697

一些现代浏览器支持将 JSON 解析为本机对象：

```
var x = "{series : [{label : 'consommationtotale Pilote1' , yaxis : 'yaxis' },{label : 'consommationtotale Pilote2' , yaxis : 'yaxis' }] , seriesDefaults : {renderer : $.jqplot.BarRenderer , rendererOptions : {barWidth : null} } , cursor : {show : true , zoom : true, showTooltip : false}, highlighter : {showTooltip : true , tooltipAxes : 'both' , tooltipContentEditor : getPointInfo , show : true} , title : 'Bar chart', legend : {show : true , renderer: $.jqplot.EnhancedLegendRenderer}, axes : {xaxis:{ tickRenderer:$.jqplot.CanvasAxisTickRenderer , renderer: $.jqplot.CategoryAxisRenderer,pad : 0 , label : 'mois' , labelRenderer: $.jqplot.CanvasAxisLabelRenderer}, yaxis:{ label : 'consommationtotale' , labelRenderer: $.jqplot.CanvasAxisLabelRenderer }}}";
var result = JSON.parse(x); 
```

对于不支持它的浏览器，您可以从 json.org 下载 json2.js 以安全解析 JSON 对象。

# c#-4.0 - JavaScriptSerializer 正在从日期中减去一天

> ID：15003335
> 
> 赞同：20
> 
> 时间：2013-02-21T13:21:32.307
> 
> 标签：c#-4.0, datetime, javascriptserializer

我正在使用`JavaScriptSerializer`序列化 DateTime，但是当我反序列化它时，它显示的日期比它序列化的日期少一天：

这是测试：

```
 DateTime startDate=new DateTime(2012,1,20);//set the 20th of January
  JavaScriptSerializer  serializer=new JavaScriptSerializer();
  string serializeDate= serializer.Serialize(startDate);
  DateTime afterDeserialize= serializer.Deserialize<DateTime>(serializeDate);//I get 19th of Jan
  Assert.Equals(startDate, afterDeserialize); 
```

首先我认为它是因为 javascript datetime 格式，但我知道 javascript Month 是零索引`0=January`，但我比原始日期少一天。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-21T13:30:45.147

它不会任意浪费一天，它正在转换为 UTC 日期（或者我应该说使用 UTC 日期格式的日期），所以当它被反序列化时，你不再在你的个人时区内。它基本上在执行：

```
DateTime whateverDate = /* incoming date */;
long ticks = whateverDate.ToUniversalTime() // make UTC
  .Subtract(new DateTime(1970, 1, 1))       // subtract UNIX Epoch
  .TotalMilliseconds();                     // get milliseconds since then
// push in to the "\/Date(ticks)\/" format
String value = String.Format(@"\/Date({0})\/", ticks); 
```

但是，请尝试以下操作：

```
// or you rely on it serializing, then bring it back to your own local time
// (apply the time zone).
afterDeserialize = afterDeserialize.ToLocalTime(); 
```

您现在将 UTC 时间恢复为您的本地时间（应用时区）。

* * *

要通过测试：

```
DateTime startDate              = new DateTime(2012,1,20);
JavaScriptSerializer serializer = new JavaScriptSerializer();
String serializeDate            = serializer.Serialize(startDate);
DateTime afterDeserialize       = serializer.Deserialize<DateTime>(serializeDate)
                                  .ToLocalTime(); // Note: this is added

Assert.Equals(startDate, afterDeserialize); // pass! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-07T11:56:07.463

我有同样的问题并通过使用解决了它

```
Newtonsoft.Json.JsonConvert.SerializeObject() 
```

代替

```
new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(). 
```

后一个调用将您的 DateTime 转换为某个随机时区（GMT+0 似乎是硬编码的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T13:48:54.927

在反序列化`JavaScriptSerializer`给我输出时`UTC (Universal Time)`，由于时间的变化而改变了日期。正如`Brad Christie`建议将 DateTime 更改为 UTC 它可以解决问题。

但实际上没有必要更改：

```
DateTime startDate = new DateTime(2012, 1, 20).ToUniversalTime(); 
```

因为它已经将其作为世界时间。所以我只是将反序列化的输出转换为`LocalTime`：

```
 DateTime afterDeserialize= serializer.Deserialize<DateTime>(serializeDate);
 afterDeserialize.ToLocalTime(); 
```

它解决了这个问题。

# xml - XML 到可填写的 PDF 表单？

> ID：15003337
> 
> 赞同：4
> 
> 时间：2013-02-21T13:21:41.633
> 
> 标签：xml, pdf

我想通过 xml 文档创建一个可填写的 PDF 表单？

我们目前有一个包含清单项目的数据库，然后我们将其输出为 xml 格式。我们可以生成一些不错的 HTML 5 清单，但我们现在正在转向 PDF 表单。

我已经进行了一些搜索，但是从 XML 创建 PDF 并没有真正确定的内容。我们希望能够定义哪些字段是必需的、下拉列表、文本框等。

如何在给定 XML 文档的情况下创建 PDF 可填写表单？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T14:33:43.863

**附录（见评论）：**我是 iText Software Group 的 CEO，iText（一个开源 PDF 库）的原始开发者，以及 Manning 出版的两本“iText in Action”书籍的作者。我是 NBN 的成员，NBN 是比利时标准办公室（包括 ISO-32000 和相关 PDF 标准）。我不隶属于 Adob​​e、Open Office 等...

PDF 中有两种“风格”的表单：基于 AcroForm 的表单和 XFA 表单。

在基于 AcroForm 的表单中，表单使用 PDF 语法进行描述，并且每个字段都有固定的坐标。把它想象成数字纸。如果您有一个代表发票的表格，那么这样的表格可以提供 20 个发票行。假设您需要更少的行，您将有许多未使用的字段将保持可见。假设您需要更多行，您将无法将它们全部放入表单中。[我在本书的第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)中描述了如何使用 Open Office 创建这样的表单（参见第 6.3.5 节）。与 XML 的唯一链接是您可以以 XFDF 格式导入/导出此类表单，这是 ISO-32000-1 中引用的规范。它是表单数据格式 (FDF) 的 XML 版本。如果您想以 XML 的形式将人们的响应存储在服务器上，这可能是理想的选择。[在这里](http://itextpdf.com:8180/book/submit_me.pdf)。填写表格并选择 XFDF 按钮。接收您的请求的 servlet 将返回由 Adob​​e Reader 发送到服务器的流。

看看 XML Forms Architecture (XFA) 可能也很有趣。在这种情况下，PDF 充当 XML 流的容器。嵌入的 XML 由不同的部分组成，其中模板和数据集是最重要的。在模板中，特定的语法用于定义表单的外观（它必须如何由 Adob​​e Reader 呈现）。数据集部分由类似于 XSD 的 dataDescription 和数据组成。XFA 的主要优点之一是数据由使用您想要的任何模式的 XML 组成。XFA 表单通常使用 Adob​​e LiveCycle Designer 创建，您可以在其中将自己的 XSD 作为数据源导入，然后您可以开始设计表单。结果将是一个空模板。填写表单就像将 XML 注入数据标签一样简单。

哪种类型的表格最适合您？

AcroForms 总是静态的。如果您的表格需要与纸上的现有表格完全匹配，这是您的最佳匹配。如果您需要可以动态增长的表单（很像 HTML），您很快就会对 AcroForms 感到沮丧，尽管有些变通方法似乎可以完美运行。

XML 表单可以是非常动态的。例如，请参见[电影表格](http://examples.itextpdf.com/resources/pdfs/xfa_movies.pdf)。它仅包含一页。现在让我们注入一个[包含 120 部电影的 XML 文件](http://examples.itextpdf.com/results/part2/chapter08/movies.xml)。结果是一个[有 23 页的表格](http://examples.itextpdf.com/results/part2/chapter08/xfa_filled_in.pdf)。如您所见，一部电影的字段重复了 120 次。如有必要，也可以重复与导演和电影制作国家有关的领域。一个主要的缺点是这样的表格只能在 Adob​​e Reader 中呈现；它们不会出现在 Apple 的 Preview 和许多其他非 Adob​​e PDF 查看器中。

我不确定这个答案是否对您有所帮助。如果不是，请澄清，因为您似乎专注于复选框等细节。

**附录：**

啊哈，第二次阅读您的问题，我现在发现我误解了这个问题。您不想在填写表单后创建 XML 输出。您想创建一个基于 XML 输入的表单（您的问题中关于输入/输出的观点令人困惑）。

所以：您没有使用 Open Office、Adobe Acrobat 或 Adob​​e LiveCycle Designer 来创建表单。您想将自己的自定义 XML 转换为交互式 PDF。除了 Adob​​e LiveCycle ES 之外，我不知道有任何软件可以让您基于 XML 创建 XFA 表单。如果 AcroForms 是可接受的，那么您需要为您的自定义 XML 编写解析器并使用 PDF 库来创建表单。这样的 PDF 库可以是 iText（可能结合 XML Worker 的自定义实现），但请注意，这将需要一些额外的编程。

没有“开箱即用”的解决方案可以自动将自定义 XML 转换为交互式 PDF 表单。

# git - curl 总是在 63 个字符后截断用户名

> ID：15003338
> 
> 赞同：10
> 
> 时间：2013-02-21T13:21:43.653
> 
> 标签：git, curl, msysgit

我正在使用该[`_netrc`](https://stackoverflow.com/a/6031266/29407)文件来存储客户端凭据以进行基本身份验证，并注意到 msysgit 总是在第 63 个字符处截断用户名。

这是我的`%HOME%\_netrc`样子：

```
# username for local repos
machine localhost
login 12345678901234567890123456789012345678901234567890123456789012345
password secret 
```

我定义了一个 65 个字符的用户名。

然后我尝试克隆一个存储库：

```
C:\work>git clone https://localhost:44305/git myrepo 
```

这是输出（带有`GIT_CURL_VERBOSE=1`和`GIT_SSL_NO_VERIFY=true`）：

```
Cloning into 'myrepo'...
* About to connect() to localhost port 44305 (#0)
*   Trying 127.0.0.1... * connected
* Connected to localhost (127.0.0.1) port 44305 (#0)
* successfully set certificate verify locations:
*   CAfile: C:\Program Files (x86)\Git/bin/curl-ca-bundle.crt CApath: none
* 0x214a410 is at send pipe head!
* Expire cleared
* SSL connection using AES128-SHA
* Server certificate:
*        subject: CN=localhost
*        start date: 2012-10-23 06:41:25 GMT
*        expire date: 2022-10-23 00:00:00 GMT
*        issuer: CN=localhost
*        SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
> GET /git/info/refs?service=git-upload-pack HTTP/1.1
User-Agent: git/1.7.11.msysgit.1
Host: localhost:44305
Accept: */*
Pragma: no-cache

< HTTP/1.1 401 Unauthorized
< Cache-Control: private
< Content-Type: text/html; charset=utf-8
< Server: Microsoft-IIS/8.0
< WWW-Authenticate: Basic Realm="MyRealm"
< X-AspNet-Version: 4.0.30319
< X-SourceFiles: =?UTF-8?B?Yzpcd29ya1xUb0REXFdlYkFwcGxpY2F0aW9uMVxXZWJBcHBsaWNhdGlvbjFcZ2l0XGluZm9ccmVmcw==?=
< X-Powered-By: ASP.NET
< Date: Thu, 21 Feb 2013 13:05:56 GMT
< Content-Length: 4975
<
* Ignoring the response-body
* Connection #0 to host localhost left intact
* Issue another request to this URL: 'https://localhost:44305/git/info/refs?service=git-upload-pack'
* Re-using existing connection! (#0) with host localhost
* Connected to localhost (127.0.0.1) port 44305 (#0)
* 0x214a410 is at send pipe head!
* Server auth using Basic with user '123456789012345678901234567890123456789012345678901234567890123☻'
> GET /git/info/refs?service=git-upload-pack HTTP/1.1
Authorization: Basic MTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzAjpzZWNyZXQ=
User-Agent: git/1.7.11.msysgit.1
Host: localhost:44305
Accept: */*
Pragma: no-cache

< HTTP/1.1 200 OK
< Cache-Control: private
< Content-Type: text/plain; charset=utf-8
< Server: Microsoft-IIS/8.0
< X-AspNet-Version: 4.0.30319
< X-SourceFiles: =?UTF-8?B?Yzpcd29ya1xUb0REXFdlYkFwcGxpY2F0aW9uMVxXZWJBcHBsaWNhdGlvbjFcZ2l0XGluZm9ccmVmcw==?=
< X-Powered-By: ASP.NET
< Date: Thu, 21 Feb 2013 13:05:56 GMT
< Content-Length: 2
<
* Expire cleared
* Connection #0 to host localhost left intact
* Re-using existing connection! (#0) with host localhost
* Connected to localhost (127.0.0.1) port 44305 (#0)
* 0x214a410 is at send pipe head!
* Server auth using Basic with user '123456789012345678901234567890123456789012345678901234567890123☻'
> GET /git/HEAD HTTP/1.1
Authorization: Basic MTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzAjpzZWNyZXQ=
User-Agent: git/1.7.11.msysgit.1
Host: localhost:44305
Accept: */*
Pragma: no-cache

< HTTP/1.1 200 OK
< Cache-Control: private
< Content-Type: text/plain; charset=utf-8
< Server: Microsoft-IIS/8.0
< X-AspNet-Version: 4.0.30319
< X-SourceFiles: =?UTF-8?B?Yzpcd29ya1xUb0REXFdlYkFwcGxpY2F0aW9uMVxXZWJBcHBsaWNhdGlvbjFcZ2l0XEhFQUQ=?=
< X-Powered-By: ASP.NET
< Date: Thu, 21 Feb 2013 13:05:56 GMT
< Content-Length: 2
<
* Expire cleared
* Connection #0 to host localhost left intact
warning: You appear to have cloned an empty repository. 
```

请注意 msysgit 如何在第 63 个字符处截断用户名：

```
123456789012345678901234567890123456789012345678901234567890123☻ 
```

然后我禁用了该`_netrc`文件并尝试以交互方式输入用户名和密码，但这次我尝试输入 256 个字符：

```
C:\work>git clone https://localhost:44305/git myrepo 
```

这是交互式会话：

```
Cloning into 'myrepo'...
* Couldn't find host localhost in the _netrc file; using defaults
* About to connect() to localhost port 44305 (#0)
*   Trying 127.0.0.1... * connected
* Connected to localhost (127.0.0.1) port 44305 (#0)
* successfully set certificate verify locations:
*   CAfile: C:\Program Files (x86)\Git/bin/curl-ca-bundle.crt CApath: none
* 0x22ea410 is at send pipe head!
* Expire cleared
* SSL connection using AES128-SHA
* Server certificate:
*        subject: CN=localhost
*        start date: 2012-10-23 06:41:25 GMT
*        expire date: 2022-10-23 00:00:00 GMT
*        issuer: CN=localhost
*        SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
> GET /git/info/refs?service=git-upload-pack HTTP/1.1
User-Agent: git/1.7.11.msysgit.1
Host: localhost:44305
Accept: */*
Pragma: no-cache

* The requested URL returned error: 401
* Closing connection #0
Username for 'https://localhost:44305': 1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456 
Password for 'https://1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456@localhost:44305':
* Couldn't find host localhost in the _netrc file; using defaults
* About to connect() to localhost port 44305 (#0)
*   Trying 127.0.0.1... * connected
* Connected to localhost (127.0.0.1) port 44305 (#0)
* successfully set certificate verify locations:
*   CAfile: C:\Program Files (x86)\Git/bin/curl-ca-bundle.crt CApath: none
* SSL re-using session ID
* 0x22ea410 is at send pipe head!
* Expire cleared
* SSL connection using AES128-SHA
* Server certificate:
*        subject: CN=localhost
*        start date: 2012-10-23 06:41:25 GMT
*        expire date: 2022-10-23 00:00:00 GMT
*        issuer: CN=localhost
*        SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
> GET /git/info/refs?service=git-upload-pack HTTP/1.1
User-Agent: git/1.7.11.msysgit.1
Host: localhost:44305
Accept: */*
Pragma: no-cache

< HTTP/1.1 401 Unauthorized
< Cache-Control: private
< Content-Type: text/html; charset=utf-8
< Server: Microsoft-IIS/8.0
< WWW-Authenticate: Basic Realm="GitApi"
< X-AspNet-Version: 4.0.30319
< X-SourceFiles: =?UTF-8?B?Yzpcd29ya1xUb0REXFdlYkFwcGxpY2F0aW9uMVxXZWJBcHBsaWNhdGlvbjFcZ2l0XGluZm9ccmVmcw==?=
< X-Powered-By: ASP.NET
< Date: Thu, 21 Feb 2013 13:16:35 GMT
< Content-Length: 4975
<
* Ignoring the response-body
* Connection #0 to host localhost left intact
* Issue another request to this URL: 'https://localhost:44305/git/info/refs?service=git-upload-pack'
* Couldn't find host localhost in the _netrc file; using defaults
* Re-using existing connection! (#0) with host localhost
* Connected to localhost (127.0.0.1) port 44305 (#0)
* 0x22ea410 is at send pipe head!
* Server auth using Basic with user '123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345'
> GET /git/info/refs?service=git-upload-pack HTTP/1.1
Authorization: Basic MTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1OnNlY3JldA==
User-Agent: git/1.7.11.msysgit.1
Host: localhost:44305
Accept: */*
Pragma: no-cache

< HTTP/1.1 200 OK
< Cache-Control: private
< Content-Type: text/plain; charset=utf-8
< Server: Microsoft-IIS/8.0
< X-AspNet-Version: 4.0.30319
< X-SourceFiles: =?UTF-8?B?Yzpcd29ya1xUb0REXFdlYkFwcGxpY2F0aW9uMVxXZWJBcHBsaWNhdGlvbjFcZ2l0XGluZm9ccmVmcw==?=
< X-Powered-By: ASP.NET
< Date: Thu, 21 Feb 2013 13:16:35 GMT
< Content-Length: 2
<
* Expire cleared
* Connection #0 to host localhost left intact
* Couldn't find host localhost in the _netrc file; using defaults
* Re-using existing connection! (#0) with host localhost
* Connected to localhost (127.0.0.1) port 44305 (#0)
* 0x22ea410 is at send pipe head!
* Server auth using Basic with user '123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345'
> GET /git/HEAD HTTP/1.1
Authorization: Basic MTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1OnNlY3JldA==
User-Agent: git/1.7.11.msysgit.1
Host: localhost:44305
Accept: */*
Pragma: no-cache

< HTTP/1.1 200 OK
< Cache-Control: private
< Content-Type: text/plain; charset=utf-8
< Server: Microsoft-IIS/8.0
< X-AspNet-Version: 4.0.30319
< X-SourceFiles: =?UTF-8?B?Yzpcd29ya1xUb0REXFdlYkFwcGxpY2F0aW9uMVxXZWJBcHBsaWNhdGlvbjFcZ2l0XEhFQUQ=?=
< X-Powered-By: ASP.NET
< Date: Thu, 21 Feb 2013 13:16:35 GMT
< Content-Length: 2
<
* Expire cleared
* Connection #0 to host localhost left intact
warning: You appear to have cloned an empty repository. 
```

这次用户名在第 255 个字符处被截断。

我曾尝试在标准 MS-DOS 提示以及 PowerShell 提示和 Git Bash 提示下使用 msysgit，结果相同。

所以这是我的问题：

1.  这是 msysgit 的一些限制吗？
2.  是否可以增加此限制（对于`_netrc`文件和交互式提示）？
3.  有什么解决方法吗？

如果你问我为什么需要这么长的用户名，那是因为我的目标是为自定义 GIT 服务器发送 OAuth 令牌，就像 GitHub 一样（除了他们的 OAuth 令牌很短）。

* * *

更新：

进一步调查似乎问题在于[`cURL`](http://curl.haxx.se/docs/manual.html)GIT用于HTTP客户端的内容。我可以使用以下命令重现完全相同的行为：

```
curl --netrc -kv https://localhost:44305/git 
```

所以我重新提出这个问题。

* * *

更新 2：

进一步调查[`netrc.c`](http://www.opensource.apple.com/source/curl/curl-57/curl/lib/netrc.c)：

```
/* make sure we have room for at least this size: */
#define LOGINSIZE 64
#define PASSWORDSIZE 64 
```

我开始失去对由此产生良好结果的乐观情绪。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T15:17:14.540

是的，这似乎是 curl 的限制。您引用的代码不是最新的：[我认为 this 是](https://github.com/bagder/curl/blob/master/lib/netrc.h)，并且具有相同的值。

对于 windows，cygwin 版本的 git 修复了 msysgit 的一些限制，例如路径大小限制。但是，由于这是 curl 而不是 msysgit 的限制，因此它无能为力，而且当我测试时确实存在相同的行为。

请注意，这似乎是 .netrc 文件使用的限制，因为[HTTP 规范](https://stackoverflow.com/questions/4027825/is-there-a-maximum-length-for-a-http-basic-authentication-username)或[curl 编程接口](https://stackoverflow.com/questions/13617278/php-curl-max-length-on-curlopt-userpwd)都没有这个限制。实际上，如果您只是在 url 中指定它，它似乎可以工作：

```
C:\REMenu>git remote add origin https://1234567890123456789012345678901234567890123456789012345678901234567890@github.com/romaonthego/REMenu.git

C:\REMenu>git push origin master
...
* Server auth using Basic with user '1234567890123456789012345678901234567890123456789012345678901234567890'
..
Password for 'https://1234567890123456789012345678901234567890123456789012345678
901234567890@github.com': 
```

如果您需要使用 _netrc，我认为您唯一的选择是自己编译 curl 如果您需要它工作。

如果您不必这样做，您还有其他选择：

*   运行为您指定用户/密码的本地代理，并在连接时使用该代理，为 git 或 curl 指定无用户/密码
*   在 url 中使用用户名
*   使用基于 ssh 的 url

* * *

编辑：回顾一下，到目前为止我们看到的限制：

*   _netrc：64（卷曲 .netrc 限制）
*   互动：256
*   credential.helper wincred: 512 (windows credential store limit)
*   credential.helper 平原：4000+
*   网址：4000+
*   代理：无限制（应仅受 HTTP 和代理软件限制）

# php - Symfony2 TinymceBundle - 更新后 CTRL-S 不保存

> ID：15003342
> 
> 赞同：2
> 
> 时间：2013-02-21T13:21:51.860
> 
> 标签：php, symfony, tinymce

我正在开发一个 PHP-web 应用程序，它使用 TinymceBundle 将文本框设置为所见即所得编辑器的样式（我接管了那个项目，我最初没有实现这个功能）。

显然，标准的 tinyMCE 编辑器有一个内置功能，可以捕获`Ctrl`+ `S`Click 事件并将其视为表单提交（而不是浏览器尝试保存当前站点）。

但是现在我更新了供应商库，包括 TinymceBundle 和`Ctrl`+`S`以保存表单不再起作用。

这是`app/config.yml`我如何找到它的小部件的配置：

```
stfalcon_tinymce:
    include_jquery: true
    textarea_class: "tinymce"
    theme:
        simple:
            mode: "textareas"
            theme: "advanced"
            width: '728' #firefox on windows made it too wide for some reason
            theme_advanced_buttons1: "mylistbox,mysplitbutton,bold,italic,underline,separator,strikethrough,justifyleft,justifycenter,justifyright,justifyfull,bullist,numlist,undo,redo,link,unlink"
            theme_advanced_buttons2: ""
            theme_advanced_buttons3: ""
            theme_advanced_toolbar_location: "top"
            theme_advanced_toolbar_align: "left"
            theme_advanced_statusbar_location: "bottom"
            plugins: "fullscreen"
            theme_advanced_buttons1_add: "fullscreen"
        advanced:
            language: de
            theme: "advanced"
            plugins: "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,noneditable,visualchars,nonbreaking,xhtmlxtras,template"
            theme_advanced_buttons1: "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,formatselect,fontselect,fontsizeselect"
            theme_advanced_buttons2: "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,cleanup,code,|,insertdate,inserttime,preview,|,forecolor,backcolor"
            theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,|,ltr,rtl,|,fullscreen"
            theme_advanced_buttons4: "moveforward,movebackward,|,scite,del,ins,|,visualchars,nonbreaking,pagebreak"
            theme_advanced_toolbar_location: "top"
            theme_advanced_toolbar_align: "left"
            theme_advanced_statusbar_location: "bottom"
            theme_advanced_resizing: true 
```

就我所见，没有什么特别启用`Ctrl`+`S`保存功能，所以我假设它默认启用，但现在我需要一些东西来再次启用它（因为客户在更新后丢失了它）而且我没有在[tinyMCE 文档](http://www.tinymce.com/wiki.php/Configuration)中找到一个配置选项。

保留旧版本并不是一个真正的选择。

有谁知道如何手动启用`Ctrl`+ `S`= 表单提交功能，**或者**在更新 TinymceBundle 后是否也遇到过这种行为（如果它是 tinyMCE 的错误，我猜我无能为力）？

**编辑：**以下是应用程序中用于呈现编辑器的代码 - 不幸的是，几乎所有 JS 初始化都`TinymceBundle`封装`tinyMCE.init( ... )`在`app/config.ym`.

具有文本字段的`NoticeType`类：

```
class NoticeType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
        ->add('contact')
        ->add('user')
        ->add('direction', 'choice', array(
                        'choices'   => array('out' => 'Ausgehend', 'in' => 'Eingehend', ),
                        'required'  => true,
        ))
        ->add('text', 'textarea', array(
            'attr' => array('class' => 'tinymce'),
        ))
        ->add('customer')
        ->add('date', 'datetime', array(
                'input'  => 'datetime',
                // 'date_format' => \IntlDateFormatter::FULL,
                'widget' => 'single_text',
        ))
        ;
    }

    public function getName()
    {
        return 'evenos_enoticebundle_noticetype';
    }
} 
```

在呈现表单的模板中：

```
{% extends 'EvenosEnoticeBundle::base.html.twig' %}
{% block body %}
<h1>Neue Notiz</h1>
{{ tinymce_init() }}
<form action="{{ path('notice_create') }}" method="post" {{ form_enctype(form) }}>
    [...other fields...]
    {{ form_label(form.text, 'Text') }}
    {{ form_widget(form.text, { 'attr': {'cols': '100', 'rows': 20} }) }}
    [...]
    <p>
        <button type="submit" class="btnCreate">Anlegen</button>
    </p>
</form>

[...]

{% endblock %} 
```

**更新的问题：**有人知道我如何**专门使用`Stfalcon/TinymceBundle`for配置 tinyMCE`Symfony2`吗？**. 据我了解，它意味着只能通过 symfony`.yml`文件进行配置，这些文件不允许您添加诸如

```
setup: function (ed) { ... } 
```

tinyMCE 的配置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:00:10.560

对于类似的问题，您可以实施我[在此处建议的方法。](https://stackoverflow.com/questions/14965490/disabling-tinymce-ctrls-shortcut-to-enable-this-shortcut-for-ajax-content-save)

**编辑**：这是[symfone/tinymce](http://symfony-world.blogspot.de/2010/03/using-tinymce-with-symfony.html)的优秀教程。在“覆盖渲染方法”部分中，您插入一个设置配置参数，如下所示

```
tinyMCE.init({
    ...

    setup : function(ed) {
        ed.onKeyDown.add(function onkeydown(ed, evt) {
            // Shortcut:  ctrl+h 
            if (evt.keyCode == 72 && !evt.altKey && !evt.shiftKey && evt.ctrlKey && !evt.metaKey) {
                setTimeout(function(){
                    var e = { type : 'keydown'};
                    e.charCode = e.keyCode = e.which = 72;
                    e.shiftKey = e.altKey = e.metaKey = false;
                    e.ctrlKey = true;
                    window.parent && window.parent.receiveShortCutEvent && window.parent.receiveShortCutEvent(e);
                }, 1);
            }
        });
    },
}); 
```

`receive_shortcutevents`现在您在模板中插入包含 javascript 函数的脚本标记。

# ios - 为什么 Apple 更改 UITableViewCell 工作顺序？

> ID：15003348
> 
> 赞同：0
> 
> 时间：2013-02-21T13:22:05.970
> 
> 标签：ios, objective-c, ios6

现在我们必须在 ViewDidLoad 的某个地方使用这个代码 -

```
[self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:CellIdentifier]; 
```

我不确定旧方法有什么问题，方法是检查单元格是否实际上是由旧方法中的队列返回的

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

让我感到困惑的是，为什么在不相关的地方使用一些任意的方法调用，而这个“注册”方法到底有什么作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:33:43.207

自从在 iOS 5 中，Apple 引入了一种从 NIB 文件中实例化单元格的快捷方法，该方法具有三个阶段：

1.  声明单元标识符的属性
2.  注册包含单元格的 NIB 对象，并将其与单元格标识符相关联
3.  创建单元格本身（然后像往常一样自定义控件）

注册 NIB 对象只需要在控制器的生命周期中发生一次，因此放置代码的明显位置是`viewDidLoad`tableView 的控制器的方法：

```
cellIdentifier = @"CustomCell";
[tableView registerNib:[UINib nibWithNibName:@"customCell" bundle:nil] 
```

这需要两个参数：

1.  对 UINib 实例的引用，通过传入 UINib 的`nibWithNibName`方法获得
2.  `NSString`先前创建的单元格标识符

在将 NIB 注册为单元后，该`dequeueReusableCellWithIdentifier`方法将执行以下两项操作之一：

1.  如果有一个缓存单元可供重用，它将被出列并可以通过单元变量访问。
2.  如果没有可重复使用的单元格， `dequeueReusableCellWithIdentifier`将从已注册的 NIB 创建一个。

**这两件事都发生在幕后，因此现在不再需要手动检查单元格的存在**。`dequeueReusableCellWithIdentifier` **将为您处理所有这些**。

# python - 为什么我的颜色条中有线条？

> ID：15003353
> 
> 赞同：50
> 
> 时间：2013-02-21T13:22:29.040
> 
> 标签：python, matplotlib, matplotlib-basemap

**编辑**：由于这似乎是一个受欢迎的帖子，所以这里的解决方案似乎对我很有效。感谢@gazzar 和@mfra。

```
cbar.solids.set_rasterized(True)
cbar.solids.set_edgecolor("face") 
```

* * *

有谁知道为什么我的颜色条中似乎有线条？或者更确切地说，为什么颜色过渡不平滑？显然，我正在使用底图，但这无关紧要，因为它是 AFAICT 引擎盖下的所有 matplotlib 调用。我创建地图做类似的事情

```
grays = plt.cm.get_cmap("Grays")
sc = mymap.scatter(xpoints, ypoints, s=sizes, c=color_values, cmap=grays, alpha=.75,
                   marker="o", zorder=10, vmin=0, vmax=1)
cbar = mymap.colorbar(sc, drawedges=True, location="bottom") 
```

我试过没有和没有阿尔法，结果是一样的。也许是因为我的 color_values 数组不够好？我可以在某处设置映射到颜色条的基础值吗？我不知道如何，我在其他地方也没有看到这个问题。即，我可以复制 matplotlib show_colorbars 示例而不会出现此问题。

![错误的颜色条示例](../Images/fef297e78728707553128d8c6f252658.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-22T10:06:01.450

如果您创建矢量图形，您是否尝试过这个（取自[http://matplotlib.org/api/pyplot_api.html?highlight=colorbar#matplotlib.pyplot.colorbar](http://matplotlib.org/api/pyplot_api.html?highlight=colorbar#matplotlib.pyplot.colorbar)）：

“众所周知，某些矢量图形查看器（svg 和 pdf）会在颜色条的段之间呈现白色间隙。这是由于查看器中的错误而不是 matplotlib。作为一种解决方法，可以使用重叠段来渲染颜色条：

```
cbar = colorbar()
cbar.solids.set_edgecolor("face")
draw() 
```

然而，这在其他情况下会产生负面影响。特别是对于半透明图像（alpha < 1）和颜色条扩展，默认情况下未启用，请参阅（问题 #1188）。”

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-26T03:10:24.307

看起来您的绘图使用了一些透明（alpha）值。我遇到了同样的问题（半透明的情节，但希望颜色条是实心的），这个[问题](https://stackoverflow.com/questions/4478725/partially-transparent-scatter-plot-but-with-a-solid-color-bar)和[答案](https://stackoverflow.com/a/4480124/1988505)为我解决了这个问题！以供参考：

```
cbar.set_alpha(1)
cbar.draw_all() 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-02-27T16:25:42.683

我尝试了其他评论中给出的两种设置，即

```
cbar.solids.set_rasterized(True)
cbar.solids.set_edgecolor("face") 
```

不幸的是，它们都不适合我。

所以我尝试了一种完全不同的方法，这是一个巨大的 hack，但至少完成了工作。当您传递`alpha`给`imshow`它时，它会设置一个 alpha 值，该值将用于与其他图像混合。由于更高功率的原因（正如@mfra 所提到的），这会产生我们如此鄙视的白线。显然，关键是*不要*将 alpha 值传递给`imshow`. 但是，我们仍然需要以某种方式创建颜色条。

因此，作为一种解决方法，我们可以在给`imshow`. 例如，让我们使用`winter`颜色图：

```
import numpy as np
import matplotlib as mpl
import matplotlib.pyplot as plt

xx, yy = np.meshgrid(np.linspace(-1, 1, 100), np.linspace(-1, 1, 100))
zz = xx**2 + yy**2

my_cmap_rgb = plt.get_cmap('winter')(np.arange(256))
alpha = 0.5

for i in range(3): # Do not include the last column!
    my_cmap_rgb[:,i] = (1 - alpha) + alpha*my_cmap_rgb[:,i]
my_cmap = mpl.colors.ListedColormap(my_cmap_rgb, name='my_cmap') 
```

`my_cmap_rgb`在这里，我基于非 Alpha 通道（0、1 和 2）创建一个新的颜色图，`winter`然后编辑非 Alpha 通道（0、1 和 2）以自己进行 Alpha 混合。然后我可以简单地使用这个新的颜色图来绘制我的图。

```
f, ax = plt.subplots()
cim = ax.imshow(zz, cmap=my_cmap)
cbar = plt.colorbar(cim)
ax.set_title("No lines and no transparency") 
```

[![没有线条也没有透明度](../Images/c9e578ed06cf4ec8cd6dbe32fd8ac867.png)](https://i.imgur.com/LlEbfww.png) 现在将其与您在没有此技巧的情况下获得的图像进行比较：

```
f, ax = plt.subplots()
cim = ax.imshow(zz, cmap='winter', alpha=0.5)
cbar = plt.colorbar(cim)
ax.set_title("Lines and transparency") 
```

[![线条和透明度](../Images/bfe4ca1acaa753600a480af958176437.png)](https://i.stack.imgur.com/Y3uAM.png)

显然，如果您不需要透明度，问题就解决了。另一方面，如果您确实需要透明度，还有另一种解决方法。您必须首先绘制没有透明度的图像以获得颜色条，然后绘制具有透明度但不会使用其颜色条的图像。

```
f, ax = plt.subplots()
cim = ax.imshow(zz, cmap=my_cmap)
cbar = plt.colorbar(cim)
plt.cla()  # Clears axis
ax.plot(50,50, 'ko')
ax.imshow(zz, cmap='winter', alpha=0.5)
ax.set_title("No lines and transparency") 
```

这会导致图像的颜色条没有线条但仍保持透明度。虽然它仍然是一个巨大的黑客，但至少我们不必再忍受这些线了！

[![没有线条和透明度](../Images/631cf33c3d7100c0772e870dd496b9b6.png)](https://i.stack.imgur.com/w8ez3.png)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-08-15T15:17:00.000

我通常更喜欢使用 Eric Firing 的建议[在此处](http://matplotlib.1069221.n5.nabble.com/rasterized-colorbar-td39582.html)添加以下行来光栅化颜色栏内容以避免此问题。

```
cbar.solids.set_rasterized(True) 
```

据说这种解决方法对于具有透明度的图像会失败，但对于大多数正常情况，它会产生所需的结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T15:32:55.330

尝试：

```
cbar = mymap.colorbar(sc, drawedges=False, location="bottom") 
```

它现在在网络上有很好的记录（我可以找到），但是

```
*drawedges*   [ False | True ] If true, draw lines at color
              boundaries. 
```

（从`matplotlib/lib/matplotlib/colorbar.py`）我认为通过设置`drawedges`你`True`告诉它画那些线。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-29T16:45:37.030

由于没有其他建议对我有用，我最终从颜色条实例中删除了 alpha 通道：

```
from matplotlib.colors import to_rgb

lut = colorbar.solids.get_facecolor()
bg_color = to_rgb('white')
lut[:, :3] *= lut[:, 3:]
lut[:, :3] += (1 - lut[:, 3:]) * bg_color
lut[:, 3] = 1.
colorbar.solids.set_facecolor(lut) 
```

在能够访问面部颜色之前，必须绘制一次颜色条。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-11T09:53:55.217

以下可以是另一种解决方案，即使它不优雅。

```
In [1]: children = cbar.ax.get_children()
In [2]: children
Out[2]:
[<matplotlib.collections.QuadMesh at 0x21783c41b70>,
 <matplotlib.collections.LineCollection at 0x21783bfdc18>,
 <matplotlib.patches.Polygon at 0x21783ba0588>,
 <matplotlib.patches.Polygon at 0x21783beef98>,
 <matplotlib.spines.Spine at 0x21783b77c88>,
 <matplotlib.spines.Spine at 0x21783b77470>,
 <matplotlib.spines.Spine at 0x21783b70c88>,
 <matplotlib.spines.Spine at 0x21783b70860>,
 <matplotlib.axis.XAxis at 0x21783b6ac50>,
 <matplotlib.axis.YAxis at 0x21783ba60f0>,
 <matplotlib.text.Text at 0x21783bc2198>,
 <matplotlib.text.Text at 0x21783bc2320>,
 <matplotlib.text.Text at 0x21783bc22b0>,
 <matplotlib.patches.Rectangle at 0x21783bc2358>]
In [3]: obj = children[1]  # Get the LineCollection object
In [4]: obj.set_linewidth(0) 
```

# java - 在 resteasy 服务中使用 ArrayList 时出现异常

> ID：15003356
> 
> 赞同：1
> 
> 时间：2013-02-21T13:22:33.900
> 
> 标签：java, jakarta-ee, jax-rs, resteasy

尝试在客户端接收 resteasy web 服务的响应时出现异常。我的响应类包括另一个 Jaxb 类，其中包含一个 ArrayList。

```
clientRequest = new ClientRequest("myserviceurl");
clientRequest.body(MediaType.APPLICATION_XML, myreqdetail);
clientResponse = clientRequest.post(MyResponseDetail.class);
myResponseDetail =  clientResponse.getEntity(); 
```

在使用上面的代码片段时，出现以下错误。，

```
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host]. StandardWrapper.Throwable: java.lang.RuntimeException: Unable to find a public constructor for class org.jboss.resteasy.core.AsynchronousDispatcher
at org.jboss.resteasy.plugins.server.resourcefactory.POJOResourceFactory.registered(POJOResourceFactory.java:35) [resteasy-jaxrs-2.3.2.Final.jar:]
at org.jboss.resteasy.core.ResourceMethodRegistry.addResourceFactory(ResourceMethodRegistry.java:121) [resteasy-jaxrs-2.3.2.Final.jar:]
at org.jboss.resteasy.core.ResourceMethodRegistry.addResourceFactory(ResourceMethodRegistry.java:107) [resteasy-jaxrs-2.3.2.Final.jar:]
at org.jboss.resteasy.core.ResourceMethodRegistry.addResourceFactory(ResourceMethodRegistry.java:84) [resteasy-jaxrs-2.3.2.Final.jar:]
at org.jboss.resteasy.core.ResourceMethodRegistry.addPerRequestResource(ResourceMethodRegistry.java:73) [resteasy-jaxrs-2.3.2.Final.jar:]
at org.jboss.resteasy.spi.ResteasyDeployment.registration(ResteasyDeployment.java:367) [resteasy-jaxrs-2.3.2.Final.jar:]
at org.jboss.resteasy.spi.ResteasyDeployment.start(ResteasyDeployment.java:225) [resteasy-jaxrs-2.3.2.Final.jar:]
at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.init(ServletContainerDispatcher.java:67) [resteasy-jaxrs-2.3.2.Final.jar:]
at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.init(HttpServletDispatcher.java:36) [resteasy-jaxrs-2.3.2.Final.jar:]
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1202) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:952) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:188) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_06]

ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host]  Allocate exception for servlet javax.ws.rs.core.Application: java.lang.RuntimeException: Unable to find a public constructor for class org.jboss.resteasy.core.AsynchronousDispatcher
 at org.jboss.resteasy.plugins.server.resourcefactory.POJOResourceFactory.registered(POJOResourceFactory.java:35) [resteasy-jaxrs-2.3.2.Final.jar:]
 at org.jboss.resteasy.core.ResourceMethodRegistry.addResourceFactory(ResourceMethodRegistry.java:121) [resteasy-jaxrs-2.3.2.Final.jar:]

 at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.init(HttpServletDispatcher.java:36) [resteasy-jaxrs-2.3.2.Final.jar:]
 at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1202) [jbossweb-7.0.13.Final.jar:]
 at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:952) [jbossweb-7.0.13.Final.jar:]
 at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:188) [jbossweb-7.0.13.Final.jar:]
 at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
 at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]

 at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
 at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_06]

org.jboss.resteasy.client.ClientResponseFailure: Unable to find a MessageBodyReader of content-type text/html;charset="utf-8" and type null
       at org.jboss.resteasy.client.core.BaseClientResponse.createResponseFailure(BaseClientResponse.java:523)
       at org.jboss.resteasy.client.core.BaseClientResponse.createResponseFailure(BaseClientResponse.java:514)
       at org.jboss.resteasy.client.core.BaseClientResponse.readFrom(BaseClientResponse.java:415)
       at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:377)
       at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:338)
       at MyBean.mygetmethod(MyBean.java:401)
       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
       at java.lang.reflect.Method.invoke(Method.java:597)
       at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
       at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
       at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
       at com.sun.faces.facelets.tag.jsf.core.DeclarativeSystemEventListener.processEvent(EventHandler.java:128)
       at javax.faces.component.UIComponent$ComponentSystemEventListenerAdapter.processEvent(UIComponent.java:2486)
       at javax.faces.event.SystemEvent.processListener(SystemEvent.java:106)
       at com.sun.faces.application.ApplicationImpl.processListeners(ApplicationImpl.java:2168)
       at com.sun.faces.application.ApplicationImpl.invokeComponentListenersFor(ApplicationImpl.java:2116)
       at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:288)
       at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:246)
       at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:108)
       at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
       at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
       at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
       at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
       at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
       at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50)
       at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
       at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
       at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
       at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
       at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
       at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
       at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
       at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
       at java.lang.Thread.run(Thread.java:619) 
```

我不知道那出了什么问题。我是否需要为此添加任何特定的罐子。请提供任何关于此的想法。

我的 JAXB 课程：

```
@XmlRootElement(name="Serviceresponse") 
```

公共类 MyResponseDetail {

```
private String employeename;

private String age;

private String department;

private Additionaldetail adetail;

//getters and setters 
```

}

@XmlRootElement(name="assitionaldetail") 公共类 AdditionalDetail {

```
private ArrayList worksdone;

private String address; 
```

}

我已经单独包含了 resteasy-jaxrs-2.3.2.Final.jar。

# c# - 如何从 RadNumericTextBox 检索值

> ID：15003357
> 
> 赞同：1
> 
> 时间：2013-02-21T13:22:34.297
> 
> 标签：c#, asp.net, telerik

我很抱歉这个问题，但不知何故我停电了（我知道这不是借口），但我怎样才能从`RadNumbericTextBox`使用按钮中检索值来发送值（我需要一个 int）

```
<div class="fromRowDiv">
   <asp:Label ID="label1" CssClass="fromLabel" runat="server" Text="From Date" ></asp:Label>
   <telerik:RadNumericTextBox ID="fromYear" runat="server" MinValue="2000" NumberFormat-DecimalDigits="0" NumberFormat-GroupSeparator="" ></telerik:RadNumericTextBox>   
   <asp:Label ID="Tolabel2" CssClass="fromLabel" runat="server" Text="To Date"></asp:Label>
   <telerik:RadNumericTextBox ID="toYear" runat="server" MinValue="2000" NumberFormat-DecimalDigits="0" NumberFormat-GroupSeparator=""></telerik:RadNumericTextBox>    
</div>

protected void CalcButton_Click(object sender, EventArgs e)
{
            AnnualVacationManager mng = new AnnualVacationManager();

            mng.CalcForNextYear(fromYear,toYear);
} 
```

我需要来自 RadNumbericTextBox 的值（动态）

```
 public AnnualVacationManager() {
    }

    public void CalcForNextYear(int fromYear, int toYear)
    {
        IEnumerable<HtUser> allUsers = HtUser.GetAll();
        List<AnnualVacation> newAnnualVacations = new List<AnnualVacation>();
        if (allUsers.Any()) {
            foreach (HtUser user in allUsers) {
                //int fromYear = 2013;
                //int toYear = 2014;
                IEnumerable<AnnualVacation> usersCurrentAnnualVacation = new List<AnnualVacation>(user.AnnualVacations.Where(a =>a.FromDate.Value.Year >= fromYear && a.FromDate.Value.Year < toYear));
                if (usersCurrentAnnualVacation.Any()) {
                    foreach (AnnualVacation existing in usersCurrentAnnualVacation) {
                        AnnualVacation newAnnualVacation = new AnnualVacation();
                        //Year stuff
                        DateTime newFromDate = existing.FromDate.Value;
                        newFromDate.AddYears(toYear - fromYear);
                        DateTime newToDate = existing.ToDate.Value;
                        newToDate.AddYears(toYear - fromYear);
                        //
                        newAnnualVacation.FromDate = newFromDate;
                        newAnnualVacation.ToDate = newToDate;
                        newAnnualVacation.WorkingTime = existing.WorkingTime;
                        newAnnualVacation.VacationDays = existing.VacationDays + (existing.VacationDays - user.GetBookedVacation(fromYear));

                        newAnnualVacations.Add(newAnnualVacation);

                        newAnnualVacation.HtUser = user;
                    }
                }
            }

            HtEntityFactory.Context.SaveChanges();
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:26:38.540

RadNumericTextBox 在服务器端有一个 Value 属性，它返回一个可以为空的十进制（或者可能是双精度）以及用户输入的数值。要获取该值，只要它提供了一个有效值，您可以：

```
//First .Value returns the nullable decimal or double
//second .Value gets the decimal or double in non-nullable form
fromYear.Value.Value 
```

在客户端，它应该有一个`get_value()`方法来获取它，如下所示：

```
var box = $find("<%= fromYear.ClientID %>");
var val = box.get_value(); 
```

您可能需要将数字格式化为特定格式，因此[请参阅](http://www.telerik.com/help/aspnet-ajax/input-numerictextbox-formatting-numeric-values.html)此处了解如何定制数字输入的具体信息，特别是：

```
<NumberFormat DecimalDigits="0" /> 
```

将值提供给方法：

```
mng.CalcForNextYear(Convert.ToInt32(fromYear.Value.Value), 
   Convert.ToInt32(toYear.Value.Value)); 
```

这应该可以解决问题。您必须在 RadNumericTextBox 控件中有一个值才能使其工作。否则，首先检查 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:26:35.130

```
int fromyearvalue = convert.toint32(fromYear.text)
int toyearvalue = convert.toint32(toYear.text)

 mng.CalcForNextYear(fromyearvalue ,toyearvalue ); 
```

或者

```
mng.CalcForNextYear(= convert.toint32(fromYear.totext)),convert.toint32(toYear.totext)); 
```

# r - 在 R 中拟合 Log Pearson III 的问题

> ID：15003362
> 
> 赞同：2
> 
> 时间：2013-02-21T13:22:52.557
> 
> 标签：r

我想对我拥有的一些数据点执行对数 Pearson III 拟合。但是，每次我尝试它时，我都会收到错误消息，我真的不知道该怎么办。我也许应该补充一点，我几天前才开始使用 R，所以，我不是这方面的专家。

重要的代码部分，没有导入内容的部分等等是这样的：

```
pIIIpars<-list(shape=1, location=1, scale=1) 

dPIII<-function(x, shape, location, scale) PearsonDS::dpearsonIII(x, shape=1, location=1, scale=1, params=pIIIpars, log=FALSE)

pPIII<-function(q, shape, location, scale) PearsonDS::ppearsonIII(q, shape=1, location=1, scale=1, params=pIIIpars, lower.tail = TRUE, log.p = FALSE)

qPIII<-function(p, shape, location, scale) PearsonDS::qpearsonIII(p, shape=1, location=1, scale=1, params=pIIIpars, lower.tail = TRUE, log.p = FALSE)

fitPIII<-fitdistrplus::fitdist(flowdata3$OEP, distr="PIII", method="mle", start=list("shape"=5000, "location"=5000, "scale"=5000))

summary(fitPIII)

plot(fitPIII) 
```

我正在使用 PearsonDS 包来定义 Log Pearson III 分布，并使用 fitdistrplus 来进行拟合。

我总是得到的错误信息是这样的：

```
[1] "Error in optim(par = vstart, fn = fnobj, fix.arg = fix.arg, obs = data,  : \n  function cannot be evaluated at initial parameters\n"
attr(,"class")
[1] "try-error"
attr(,"condition")
<simpleError in optim(par = vstart, fn = fnobj, fix.arg = fix.arg, obs = data,     ddistnam = ddistname, hessian = TRUE, method = meth, lower = lower,     upper = upper, ...): function cannot be evaluated at initial parameters>
Error in fitdistrplus::fitdist(flowdata3$OEP, distr = "PIII", method = "mle",  : 
  the function mle failed to estimate the parameters, 
                with the error code 100 
```

我确实理解错误消息，它只是；如果这不是传递初始值的正确方法，那是什么？有人有想法吗？

干杯，罗伯特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T11:56:27.137

以下示例遵循 Kite (2004) 并匹配他的结果。

```
# Annual maximum discharge data for the St Mary River at Stillwater Nova Scotia (Kite, 2004)
# PIII fit to the logs of the discharges

StMary <- c(565,294,303,569,232,405,228,232,394,238,524,368,464,411,368,487,394,
            337,385,351,518,365,515,280,289,255,334,456,479,334,394,348,428,337,
            311,453,328,564,527,510,371,824,292,345,442,360,371,544,552,651,190,
            202,405,583,725,232,974,456,289,348,564,479,303,603,514,377,318,342,
            593,378,255,292)

LStMary <- log(StMary)

m <- mean(LStMary)
v <- var(LStMary)
s <- sd(LStMary)
g <- e1071::skewness(LStMary, type=1)

# Correct the sample skew for bias using the recommendation of 
# Bobee, B. and R. Robitaille (1977). "The use of the Pearson Type 3 and Log Pearson Type 3 distributions revisited." 
# Water Resources Reseach 13(2): 427-443, as used by Kite

n <- length(StMary)
g <- g*(sqrt(n*(n-1))/(n-2))*(1+8.5/n)

# We will use method of moment estimates as starting values for the MLE search

my.shape <- (2/g)^2
my.scale <- sqrt(v)/sqrt(my.shape)*sign(g) # modified as recommended by Carl Schwarz
my.location <- m-sqrt(v * my.shape)

my.param <- list(shape=my.shape, scale=my.scale, location=my.location)

dPIII<-function(x, shape, location, scale) PearsonDS::dpearsonIII(x, shape, location, scale, log=FALSE)
pPIII<-function(q, shape, location, scale) PearsonDS::ppearsonIII(q, shape, location, scale, lower.tail = TRUE, log.p = FALSE)
qPIII<-function(p, shape, location, scale) PearsonDS::qpearsonIII(p, shape, location, scale, lower.tail = TRUE, log.p = FALSE)

fitdistrplus::fitdist(LStMary, distr="PIII", method="mle", start=my.param) 
```

另请注意，MLE 估计可能并不总是适用。参见风筝 (2004, p119)。他引用了 Matalas 和 Wallis (1973) 的话，他们指出如果样本偏差很小，那么解决方案是不可能的。您可以在矩估计器的方法中看到这一点，因为随着 g 变为零，形状参数会爆炸。

Kite, GW (2004) 水文学中的频率和风险分析。水资源出版物

北卡罗来纳州马塔拉斯和 JR 沃利斯 (1973)。“尤里卡！它符合 Pearson Type 3 Distribution。” 水资源研究 9（2）：281-289。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-19T05:44:46.933

如果数据正偏斜，即长右尾，则上述代码将起作用。但是，如果要将数据拟合到负偏态分布，则需要将 my.scale 乘以偏态系数的符号。

请参阅第 24 页的公式 (8)、(9) 和 (10)

确定洪水流量和频率的指南 公告 17

可在 [https://acwi.gov/hydrology/Frequency/b17c/获得](https://acwi.gov/hydrology/Frequency/b17c/)

所以修改`my.scale`为

```
my.scale <- sqrt(v)/sqrt(my.shape)*sign(g) 
```

如果不修改尺度，初始值往往不会导致拟合函数收敛。

# ruby-on-rails - 如何让 bundle 使用/查看 RVM 正在使用的 Ruby 版本？

> ID：15003369
> 
> 赞同：2
> 
> 时间：2013-02-21T13:23:00.210
> 
> 标签：ruby-on-rails, ruby, rvm, bundler

这里有很多关于 Ruby 版本和 RVM 的问题 - 我已经查看了它们，但找不到针对我的具体问题的解决方案：

据我所知，我已经正确安装和设置/配置了 RVM。

```
$ ruby -v
ruby 1.9.3p362 (2012-12-25 revision 38607) [x86_64-darwin12.2.0] 
```

但是，在运行 bundle install 时，我收到以下消息：

```
$ bundle install
Updating http://github.com/rails/prototype_legacy_helper.git
Fetching gem metadata from http://rubygems.org/......
Fetching gem metadata from http://rubygems.org/..
Enter your password to install the bundled RubyGems to your system: 
Using rake (10.0.3) 
Using RedCloth (4.2.9) 
Using i18n (0.6.1) 
Using multi_json (1.6.1) 
Using activesupport (3.2.12) 
Using builder (3.0.4) 
Using activemodel (3.2.12) 
Using erubis (2.7.0) 
...

...
Using eventmachine (1.0.0) 
Using excon (0.17.0) 
Installing factory_girl (3.6.2) 
Gem::InstallError: factory_girl requires Ruby version >= 1.9.2.
An error occurred while installing factory_girl (3.6.2), and Bundler cannot continue.
Make sure that `gem install factory_girl -v '3.6.2'` succeeds before bundling. 
```

对我来说，重要的一行`factory_girl requires Ruby version >= 1.9.2.`让我认为 bundle 不尊重 RVM 设置使用的 ruby​​ 版本。不过，我不确定我的配置哪里出错了。我以前从未遇到过 RVM 的问题。确实，`gem install factory_girl -v '3.6.2'`可以正常工作，但是 bundle 之后仍然看不到它。

手动安装 factory_girl 的输出：

```
$ sudo gem install factory_girl -v '3.6.2'
Password:
Successfully installed factory_girl-3.6.2
1 gem installed
Installing ri documentation for factory_girl-3.6.2...
Installing RDoc documentation for factory_girl-3.6.2... 
```

如何让捆绑包与 RVM 一起玩得很好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:38:06.177

检查一次，完成后，它工作正常

`$ rvm --default use 1.9.2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:46:13.263

可能是因为您根本没有使用 rvm。通过使用 gem install，您已经在系统上安装了 gem。鉴于此，如果您没有以 root 身份安装 rvm，则需要在开始使用 bundle 和安装 gems 之前设置一个 ruby​​ 版本。

rvm 所做的东西对捆绑是完全透明的。如果使用得当，bundle 将按预期工作。

尝试从系统中删除您可能拥有的所有宝石。然后使用 rvm 命令来使用一些 ruby​​ 版本，例如：

```
rvm use 1.9.2 
```

然后，运行捆绑安装。=p

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T15:08:09.003

两个因素：

1.  不要使用`sudo`它使用非 RVM 命令或 ruby​​gems 使用的 RVM 环境

2.  检查`.bundle/config`- 如果它包含`PATH`/`STANDALONE`它将强制捆绑器跳过 RVM gemsets 并在 RVM 范围之外的本地目录中使用额外的捆绑器隔离，`bundle install --system`应该修复它，如果你使用 capistrano 捆绑器集成，你需要设置正确的标志`set :bundle_flags, "--system"`

# django - Django 帮助系统的 URL 问题

> ID：15003372
> 
> 赞同：0
> 
> 时间：2013-02-21T13:23:09.450
> 
> 标签：django, django-admin

我正在为 Django 应用程序的管理站点实现帮助系统。帮助文本在名为 admin-help 的单独应用程序中作为模型对象实现。管理站点使用`Grappelli`.

设置如下。

在我的主要`urls.py`我有：

```
(r'^admin-help/', include('admin-help.urls')), 
```

它位于默认`admin`url 和`Grappelli`url 之前。

在我拥有`urls.py`的应用程序中：`admin-help`

```
urlpatterns = patterns('',
    ...
    url(r'^admin-help/list-modelXYZ', 'admin-help.views.list-modelXYZ'),
    ...
) 
```

我的计划是通过 AJAX 调用从管理页面中提取帮助页面。因此，我修改了一个特定的管理模板，以包含一个带有`onclick`处理程序的帮助按钮，以调用传递主题的 Javascript 函数：

```
<li>
  <a href="#" onclick="showHelp('list_modelXYZ')" class="grp-state-focus">Help</a>
</li> 
```

该`showHelp()`函数执行 AJAX 调用，将请求的主题作为请求的 url 的一部分传递：

```
function showHelp(topic) {
  grp.jQuery.ajax({
    type: 'GET',
    url: '/admin-help/' + topic,
    success: function(html) {
      grp.jQuery('#help-content-area').html(html);
      grp.jQuery('#help-frame').show();
    }
  });
} 
```

在我的 admin-help 应用程序中`views.py`：

```
def list_modelXYZ():
  return HttpResponse("Hello world!") 
```

当我单击帮助按钮时，我得到一个带有以下 url 的 404：

```
http://localhost:8080/admin-help/list_modelXYZ 
```

为什么我会得到 404？我不是 Django Jedi，希望有人能指出我的错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:37:44.690

urlconf 期望`list-modelXYZ`

```
url(r'^admin-help/list-modelXYZ', 'admin-help.views.list-modelXYZ'), 
```

当您访问时`list_modelXYZ`（注意下划线）

```
http://localhost:8080/admin-help/list_modelXYZ 
```

错字？

urlconf`'admin-help.views.list-modelXYZ'`里面似乎也应该是`'admin_help.views.list_modelXYZ'`

此外，`^admin-help`两个 urls.py 文件中有两个...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:20:13.030

如果您在“admin-help”前缀下包含您的网址，

```
(r'^admin-help/', include('admin-help.urls')), 
```

然后在该前缀下“植根”这些 URL。请参阅[https://docs.djangoproject.com/en/dev/topics/http/urls/#include-other-urlconfs](https://docs.djangoproject.com/en/dev/topics/http/urls/#including-other-urlconfs) 这意味着前缀“admin-help”在到达您的子处理程序时已经“处理”。问题是您的子处理程序正在重复前缀：

```
urlpatterns = patterns('',
    ...
    url(r'^admin-help/list-modelXYZ', 'admin-help.views.list-modelXYZ'),
    ...
) 
```

所以你匹配“admin-help/admin-help/list-modelXYZ”。只需从您的子网址中删除前缀，您就会得到您所追求的：

管理员帮助/urls.py：

```
urlpatterns = patterns('',
    ...
    url(r'^list-modelXYZ', 'admin-help.views.list-modelXYZ'),
    ...
) 
```

如果你有很多这些，你可以快捷方式：

```
urlpatterns = patterns('admin-help.views',
    ...
    url(r'^list-modelXYZ', 'list-modelXYZ'),
    url(r'^more$', 'something_else'),
    ...
) 
```

PS：“admin-help”不是一个好模块的名字，因为“-”是“减号”运算符。“import admin-help”会给你一个 SyntaxError。“帮助”也不好（内置功能），我建议“管理员帮助”。:-)

# objective-c - 如何从PDF文件中提取页面

> ID：15003377
> 
> 赞同：3
> 
> 时间：2013-02-21T13:23:15.213
> 
> 标签：objective-c, pdf, extract, code-snippets

我正在尝试使用 Objective C 为 iOS 创建一个代码，它可以让我从 pdf 文件中提取多个页面：我有一个 30 页的 PDF 文件（例如 source.pdf）。我想在一个**唯一的**pdf 文件（例如 result.pdf）中创建（或更好）从第 3 页到第 15 页的提取页面

我怎样才能做到这一点？

# php - 如何过滤此表？

> ID：15003378
> 
> 赞同：0
> 
> 时间：2013-02-21T13:23:18.903
> 
> 标签：php, mysql

我应该在这个 sql 中添加什么？在我的系统中，我有*外键*，`ID_Number`.我希望只有一个`ID_Number`必须显示在所有`ID_Numbers`具有相同的.并`ID_Number`选择所有没有 0 的 Bill.Arrears125 或没有 0 的 Bill.Arrears521 并且 Bill.Pay_Date 必须是最新的。

我只需要显示所有`ID_Number`Arrears125 和 Arrears521 不等于 0 并且`Pay_Date`是最新的

```
 __________________________________________________________
|  ID   | Arrears125 | Arrears521|  Pay_Date  |  ID_Number |
 ----------------------------------------------------------
|   1   |      0     |     0     |  12-01-01  |      1     |
 ----------------------------------------------------------
|   2   |      0     |     0     |  12-01-02  |      1     |
 ----------------------------------------------------------
|   3   |      25    |     25    |  12-01-03  |      1     |
 ----------------------------------------------------------
|   4   |      0     |     0     |  12-01-01  |      2     |
 ----------------------------------------------------------
|   5   |      0     |     0     |  12-01-02  |      2     |
 ----------------------------------------------------------
|   6   |      0     |     0     |  12-01-01  |      3     |
 ----------------------------------------------------------
|   7   |      25    |     25    |  12-01-02  |      3     |
 ---------------------------------------------------------- 
```

仅查看 ID 3 和 ID 7

```
 $sql=mysql_query("SELECT
                        Bill.*,users.* from Bill,users
                    WHERE
                        users.ID_Number=Bill.ID_Number
                    AND
                        (Bill.Arrears125!=0 OR Bill.Arrears521!=0)
                    GROUP BY
                        Bill.ID_Number")or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:28:16.130

```
select str_to_date(Pay_Date,"%Y-%m-%d") as date_temp, ID_number from Bill where Appears125 != 0 and Appears521 != order by date_temp desc 
```

# java - 无论如何，如果运行一定次数，就做一个 else ？

> ID：15003380
> 
> 赞同：0
> 
> 时间：2013-02-21T13:23:34.283
> 
> 标签：java, if-statement, statements

例如

```
else if (currentImage == nekoPics[4]) 
currentImage = nekoPics[5]; 
```

需要这个运行两次，所以我的猫动画在移动到 else 之前会划伤两次，这可能是最糟糕的方法，但我很感兴趣如果你可以在没有复制粘贴的情况下执行两次 else

```
else if (currentImage == nekoPics[5]) 
currentImage = nekoPics[4]; 
```

并且更改索引会导致循环，他会一直抓挠。

任何帮助表示赞赏

编辑：整个代码

```
private void scratch(){
    for (int i = xPos; i <getWidth()/2; i+=0){
            xPos = getWidth()/2;
            // swap images

            if (currentImage == nekoPics[0]) 
                currentImage = nekoPics[1];
            else if (currentImage == nekoPics[1]) 
                    currentImage = nekoPics[2];
            else if (currentImage == nekoPics[2]) 
                    currentImage = nekoPics[4];
            else if (currentImage == nekoPics[4]) 
                currentImage = nekoPics[5];
            else 
                i+=10;

            repaint();
            pause(150) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:28:56.617

整个 if-else 逻辑是多余的。按照应该显示的顺序将图像放入有序集合（数组，列表）中，如下所示

```
 Pictures[] seq = new Pictures[] { pic1, pic2, pic3, pic3, pi2, pic4, pic5 }; 
```

然后浏览集合，或维护一个指向下一张图片的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:29:14.287

我收集您正在浏览一系列图像，因此您可以执行以下操作：

```
else if (currentImage == nekoPics[3]) {
    currentImage = nekoPics[4];
    countdown = 5;
} else if (currentImage == nekoPics[4]) {
    currentImage = nekoPics[5];
} else if (currentImage == nekoPics[5]) {
    if (countdown-- > 0)
        currentImage = nekoPics[4];
    else
        currentImage = nekoPics[6];
} else if ... 
```

换句话说，当从 3 过渡到 4 时，根据您想要重复`4,5`序列的频率设置倒计时变量。

然后从倒计时过渡`5`到其中之一`4`或`6`基于倒计时。

# events - Backbone.js 查看 img onload

> ID：15003381
> 
> 赞同：3
> 
> 时间：2013-02-21T13:23:36.950
> 
> 标签：events, backbone.js, image, onload

我正在为骨干.js 苦苦挣扎。我对 js 很陌生，并且习惯了 as3 什么是面向对象的

我尝试用主干制作一个简单的图片库。我加载了 100 张图像，如果它们被加载，我希望它们淡入。

我的 AppView 中有这个。对于我得到的每个图像网址，我都会创建一个 PhotoView

```
var view = new PhotoView({model: photo, list:this.imageList});
this.imageList.append(view.render().el); 
```

在 Photoview 中，我使用此代码将 onload() 附加到 img 标签上（在[此处](https://stackoverflow.com/questions/9829580/using-backbonejs-view-what-is-the-best-way-to-attach-an-onload-event-to-an-im)找到）：

```
render: function() {
    var self = this;
    this.$el.append(some_html_with_img_elements);
    this.$el.find('img').on('load', function() { self.img_loaded() });
    return this;
} 
```

问题是在 img_loaded() 我一遍又一遍地得到相同的视图（最后一个视图）。任何人都知道如何保持对正确视图的引用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:48:32.817

`this`作为参数传递给`img_loaded`，以便您获得对刚刚加载的图像的引用，并根据需要对其进行操作。

由于您没有发布该`img_loaded`函数的代码，我不确定您是否尝试在每个加载时一次淡化它们（一旦您传入图像参考，这是一项简单的工作），或者等到它们'全部加载并立即将它们全部淡入（需要一些额外的代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:34:13.010

您可以将视图的引用传递给这样的回调函数。

```
var me = this;
me.$el.find("img").on("load", { me: me }, function (event) { event.data.me.img_loaded(); }); 
```

# java - 如何在我的导出项目存档中包含外部库

> ID：15003386
> 
> 赞同：0
> 
> 时间：2013-02-21T13:23:46.040
> 
> 标签：java, eclipse

我正在尝试使用 eclipse 将我的项目导出到存档文件。但是，由于我包含了一个外部库 db4o lb，因此我的项目无法在另一台计算机上运行单元测试。所以我想知道如何将我的项目导出到可以包含外部库的存档文件，以便导入我的项目的人可以在不先更改内置配置的情况下运行单元测试。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:45:11.463

您可以在 Eclipse 中创建一个可运行的 jar——有一个选项可以将所需的库打包到生成的 jar 中。为此，您需要有一个运行配置，即您的至少一个类应该包含一个 main 方法。jar 可以像不可运行的 jar 一样从项目中引用。

或者，这些是使用 Maven 的方法： 使用 Maven [在 jar 中包含依赖项](https://stackoverflow.com/questions/1729054/including-dependencies-in-a-jar-with-maven)

并使用 Ant（Lucas Pottersky 的回答）： [Eclipse: How to build an executable jar with external jar？](https://stackoverflow.com/questions/502960/eclipse-how-to-build-an-executable-jar-with-external-jar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:36:48.043

看看maven。

否则，您可以将您的项目和相关依赖项放在版本管理器（SVN、Git 等）上，并告诉其他人从那里签出它。

如果您不想设置自己的 Google 代码是一个很好的解决方案

# sql - 如何存储稀疏邻接矩阵

> ID：15003397
> 
> 赞同：4
> 
> 时间：2013-02-21T13:24:03.713
> 
> 标签：sql, nosql, sparse-matrix, bigdata, database

我已经阅读了几个主题，但我迷路了。我对此很陌生。我想存储巨大的稀疏矩阵并有几个想法，但可以在它们之间进行选择。这是我的需求：

1.  邻接矩阵约。5000 万个顶点。
2.  每个顶点的最大邻居数量 - 大约。10 000。
3.  每个顶点的平均邻居数量 - 大约。200-300。
4.  快速行查询 - 向量将乘以该矩阵。
5.  添加边缘的 O(1) 复杂度。
6.  很可能，边缘不会被删除。
7.  尽可能快地枚举与 v 相邻的顶点。
8.  可移植性——必须有一种方法可以将基地从一台计算机转移到另一台计算机。

所以，这是我的想法：

1.  带有对（行，列）的巨大表。非常简单，但顶点的枚举至少为 O(log N)，其中 N - 表的大小。正如我认为的那样，它很慢。此外，它必须被索引。每个 RDBMS 都会有什么好处。
2.  大量列表：每个顶点一个列表。非常快的枚举，但是存储它不会占用太多资源吗？另外，我不确定在这种情况下使用哪个 DBMS：也许是一些 NoSql？
3.  巨大的表（行 | 列集）。以上两种结合。我不确定是否有任何 RDBMS 支持任意集合。你知道任何？也许 NoSql 在这里有用？
4.  邻接列表的集合。任何 RDBMS 都适用于此，并且在复杂性方面的成本是好的，但它们可能会被多个对 DB 的请求杀死一个顶点。
5.  HDF5 - 我认为它会因为 I/O 而变慢。
6.  Neo4j - 据我了解，它将数据存储在双链表中，所以它实际上与 №4 相同，对吗？

请帮助我选择或提供更好的决定。

如果我在某个地方的估计有误，请纠正我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T00:17:43.223

混合 neo4j / hbase 方法可能会很好地工作，其中 neo4j 优化了图形处理方面，而 hbase 则明智地进行了繁重的可扩展性 - 例如用于存储大量额外属性。

neo4j 包含节点和关系。在可扩展性方面可能已经足够了。我在独立的非 neo4j 网站上对网络的调查声称，在一台机器上拥有多达数十亿个节点/关系，其遍历性能比 RDBMS 好几个数量级。

但是..如果需要更多的可扩展性，您可以引入 hbase big iron 来存储非关系/节点标识符的额外属性。然后只需将 hbase 行键添加到 neo4j 节点信息中，以便在应用程序需要时进行查找。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-03T07:04:36.237

最后，我实施了第一个解决方案。

我将 PostgreSQL 与两个表一起使用：一个用于具有两列的边 - 开始/结束，另一个用于具有唯一序列的顶点用于顶点编号和一些列用于顶点描述。

我已经基于 pg_advisory_xact_lock 实现了 upsert。这有点慢，但对我来说已经足够了。

此外，从这个配置中删除顶点也很痛苦。

为了加快乘法速度，我已将边表导出到文件中。它甚至可以放在 x64 机器上的 RAM 中。

公平地说，数据量比我预期的要少。而不是 5000 万个顶点和 1 个顶点的平均 200-300 条边，总共只有 700 万个顶点和 1.6 亿条边。

# python - 类型错误：需要浮点数

> ID：15003403
> 
> 赞同：8
> 
> 时间：2013-02-21T13:24:22.403
> 
> 标签：python, types, floating-point

不能发图，所以：`a[i]={(-1)^(i+1)*sin(x)*ln(x)}/{i^2*(i+1)!}`

任务：
需要找到a1,a2,...,an。
n 是自然的，它是给定的。

这就是我尝试这样做的方式：

```
import math
a=[]
k=0
p=0
def factorial(n):
   f=1
   for i in range(1,n+1):
     f=f*i
   return f

def narys(n):
    x=input('input x: ') #x isn't given by task rules, so i think that is error else.
    float(x)
    k=(math.pow(-1,n+1)*math.sin(x)*math.log10(n*x))/(n*n*factorial(n+1))
    a.append=k

n=int(input('input n: '))
narys(n)
for i in a:
   print(a[p])
   p=p+1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T13:34:35.017

好像您使用的是 Python 3.x 版本。`input`调用的结果是从键盘获取的**字符串**，您将其传递给`math.sin(...)`函数。`float(x)`转换`x`为`float`但不将转换后的值存储在任何地方，因此请更改：

```
float(x) 
```

至：

```
x = float(x) 
```

获得正确的代码行为。

# jquery - AngularJS 是否有任何 jQuery.ajaxSuccess 等价物

> ID：15003404
> 
> 赞同：4
> 
> 时间：2013-02-21T13:24:32.573
> 
> 标签：jquery, angularjs

我正在尝试将使用 jQuery 编写的模块转换为 AngularJS。

我有一个`ajaxSuccess`和`ajaxError`处理程序，它在全局级别进行 ajax 响应处理。它负责在所有 ajax 请求中显示成功/失败消息。

在 AngularJS 中是否有等价物？

我已经完成了该`$http`服务，但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:52:21.397

您可以使用拦截器来实现这一点。例子：

```
 myapp.config(function($httpProvider) {
      var myInterceptor = ['$rootScope','$q', function(scope, $q) {

        function onSuccess(response) {
          return response;
        }

        function onError(response) {
          return $q.reject(response);
        }

        return function(promise) {
          return promise.then(onSuccess, onError);
        };

      }];

      $httpProvider.responseInterceptors.push(myInterceptor);
    }); 
```

这将捕获您所有的角度 $http 和 $resource 调用并调用 onError 或 onSuccess ，然后再继续您的自定义回调。

# c - mutex_unlock 是否起到内存围栏的作用？

> ID：15003405
> 
> 赞同：10
> 
> 时间：2013-02-21T13:24:33.200
> 
> 标签：c, ipad, arm, mutex, memory-barriers

我将描述的情况发生在 iPad 4 (ARMv7s) 上，使用 posix 库进行互斥锁定/解锁。不过，我在其他 ARMv7 设备上也看到过类似的事情（见下文），所以我认为任何解决方案都需要更全面地了解 ARMv7 的互斥锁和内存栅栏的行为。

场景的伪代码：

**线程 1 – 生产数据：**

```
void ProduceFunction() {
  MutexLock();
  int TempProducerIndex = mSharedProducerIndex; // Take a copy of the int member variable for Producers Index
  mSharedArray[TempProducerIndex++] = NewData; // Copy new Data into array at Temp Index 
  mSharedProducerIndex = TempProducerIndex; // Signal consumer data is ready by assigning new Producer Index to shared variable
  MutexUnlock();
} 
```

**线程 2 – 消费数据：**

```
void ConsumingFunction () {
  while (mConsumerIndex != mSharedProducerIndex) {
    doWorkOnData (mSharedArray[mConsumerIndex++]);
  }
} 
```

以前（当问题出现在 iPad 2 上时），我认为这`mSharedProducerIndex = TempProducerIndex`不是原子执行的，因此改为使用`AtomicCompareAndSwap`to assign `mSharedProducerIndex`。到目前为止，这一直有效，但事实证明我错了，错误又回来了。我猜“修复”只是改变了一些时间。

我现在得出的结论是，实际问题是互斥锁内的写操作乱序执行，即如果编译器或硬件决定重新排序：

```
mSharedArray[TempProducerIndex++] = NewData; // Copy new Data into array at Temp Index 
mSharedProducerIndex = TempProducerIndex;  // Signal consumer data is ready by assigning new Producer Index to shared variable 
```

... 至：

```
mSharedProducerIndex = TempProducerIndex; // Signal consumer data is ready by assigning new Producer Index to shared variable
mSharedArray[TempProducerIndex++] = NewData; // Copy new Data into array at Temp Index 
```

...然后消费者交错生产者，当消费者试图读取数据时，数据还没有被写入。

在阅读了一些内存屏障之后，我因此认为我会尝试将信号移动到 之外的消费者`mutex_unlock`，相信解锁会产生一个内存屏障/栅栏，这将确保`mSharedArray`已写入：

```
mSharedArray[TempProducerIndex++] = NewData;  // Copy new Data into array at Temp Index 
MutexUnlock();
mSharedProducerIndex = TempProducerIndex; // Signal consumer data is ready by assigning new Producer Index to shared variable 
```

然而，这仍然失败，并让我质疑 a`mutex_unlock`是否肯定会充当写栅栏？

我还阅读[了 HP 的一篇文章，](http://www.hpl.hp.com/personal/Hans_Boehm/misc_slides/reordering.pdf)其中建议编译器可以将代码移入（但不能移出）`crit_sec`s。因此，即使在上述更改之后，写入`mSharedProducerIndex`也可能在屏障之前。这个理论有什么意义吗？

通过添加明确的栅栏，问题就消失了：

```
mSharedArray[TempProducerIndex++] = NewData; // Copy new Data into array at Temp Index 
OSMemoryBarrier();
mSharedProducerIndex = TempProducerIndex; // Signal consumer data is ready by assigning new Producer Index to shared variable 
```

因此，我认为我理解这个问题，并且需要围栏，但是任何对解锁行为以及为什么它似乎没有执行屏障的洞察都会非常有用。

**编辑：**

关于消费者线程中缺少互斥锁：我依赖于`int mSharedProducerIndex`单个指令的写入，因此希望消费者能够读取新值或旧值。两者都是有效状态，并且如果`mSharedArray`按顺序编写（即在编写之前`mSharedProducerIndex`），这将是可以的，但从目前所说的来看，我无法对此作出答复。

按照同样的逻辑，当前的屏障解决方案似乎也存在缺陷，因为`mSharedProducerIndex`写入可能会移动到屏障内，因此可能会被错误地重新排序。

是否建议向消费者添加一个互斥锁，只是作为一个读取屏障，或者是否有一个`pragma`or 指令来禁用生产者上的乱序执行，比如[`EIEIO`](http://en.wikipedia.org/wiki/Enforce_In-Order_Execution_of_I/O)在 PPC 上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T13:39:09.413

您的产品已同步，但您在消费时不进行任何同步（您还需要将内存与屏障同步）。因此，即使您为生产者提供了完美的内存屏障，但内存屏障也无助于消费者。

在您的代码中，您可能会受到编译器的排序、硬件排序的影响，甚至会受到`mSharedProducerIndex`运行线程#2 的其他核心上的陈旧值的影响。

您应该阅读[Cortex™-A 系列程序员指南](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.den0013c/index.html)`Chapter 11: Memory Ordering`，尤其是.`11.2.1 Memory barrier use example`

我认为您的问题是您在消费者线程中获得了部分更新。问题是生产者的关键部分内部不是原子的，它可以重新排序。

`not atomic`我的意思是，如果您不是`mSharedArray[TempProducerIndex++] = NewData;`单词存储（NewData 具有 int 类型），则可以分几个步骤完成，其他核心可以将其视为部分更新。

`reordering`我的意思是互斥体提供进出障碍，但在关键部分不强加任何顺序。由于您在消费者方面没有任何特殊构造，因此您可以看到`mSharedProducerIndex`已更新，但仍可以看到对`mSharedArray[mConsumerIndex]`. Mutex 仅在执行离开临界区后保证内存可见性。

我相信这也解释了为什么当您`OSMemoryBarrier();`在临界区中添加它时它会起作用，因为这种方式 cpu 被迫将数据写入`mSharedArray`然后更新`mConsumerIndex`，并且当其他核心/线程看到`mConsumerIndex`我们知道`mSharedArray`由于障碍而被完全复制时。

假设您有多个生产者和一个消费者，我认为您的实现`OSMemoryBarrier();`是正确的。我不同意任何建议在消费者中设置内存屏障的评论，因为我相信这不会修复生产者内部关键部分中发生的部分更新或重新排序。

作为标题中您问题的答案，一般来说，afaik `mutex`es 在他们进入之前阅读障碍并在他们离开后写障碍。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T13:30:49.040

“理论”是正确的，写可以​​从写栅栏之后移到它之前。

您的代码的根本问题是线程 2 中根本没有同步。您在`mSharedProducerIndex`没有读取障碍的情况下阅读，所以谁知道您会得到什么值。您在线程 1 中所做的任何事情都无法解决该问题。

# objective-c - 更改文件夹的 Finder 侧边栏图标

> ID：15003407
> 
> 赞同：6
> 
> 时间：2013-02-21T13:24:35.730
> 
> 标签：objective-c, macos, finder

有一些像 DropBox 这样的应用程序在 Finder 侧边栏中有自己的图标。其他一些应用程序也这样做了。我找到了将文件夹放入 Finder 收藏夹的方法，但我无法更改默认图标。

```
IconRef iconRef;
    FSRef fref;

    CFURLRef iconURLRef = (CFURLRef)[NSURL fileURLWithPath:@"icon"];
    CFURLGetFSRef(iconURLRef, &fref);
    RegisterIconRefFromFSRef('SSBL', 'ssic', &fref, &iconRef);

    CFURLRef url = (CFURLRef)[NSURL fileURLWithPath:path];
    LSSharedFileListRef favoriteItems = LSSharedFileListCreate(NULL, kLSSharedFileListFavoriteItems, NULL);

    if (favoriteItems) {
        LSSharedFileListItemRef item = LSSharedFileListInsertItemURL(favoriteItems, kLSSharedFileListItemBeforeFirst, NULL, iconRef, url, NULL, NULL);

        if (item){
            CFRelease(item);
        }
    }

    CFRelease(favoriteItems); 
```

没有错误。检查 10.7 和 10.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:36:26.740

采用`[[NSWorkspace sharedWorkspace] setIcon:folderIcon forFile:lPath options:0];`

# c# - HtmlAgilityPack 并选择节点和子节点

> ID：15003409
> 
> 赞同：48
> 
> 时间：2013-02-21T13:24:46.500
> 
> 标签：c#, xpath, html-agility-pack

希望有人能帮助我。

假设我有一个`html`包含多个`divs`这样的示例的文档：

```
<div class="search_hit">
    <span prop="name">Richard Winchester</span>
    <span prop="company">Kodak</span>
    <span prop="street">Arlington Road 1</span>
</div>
<div class="search_hit">
    <span prop="name">Ted Mosby</span>
    <span prop="company">HP</span>
    <span prop="street">Arlington Road 2</span>
</div> 
```

我`HtmlAgilityPack`用来获取`html`文件。我需要知道的是如何获得每个跨度`search_hit-div`？

我的第一个想法是这样的：

```
foreach (HtmlAgilityPack.HtmlNode node in
    doc.DocumentNode.SelectNodes("//div[@class='search_hit']"))
{
     foreach (HtmlAgilityPack.HtmlNode node2 in node.SelectNodes("//span[@prop]"))
     {
     }
} 
```

每个都`div`应该是一个包含跨度作为属性的对象：

```
public class Record
{
    public string Name { get; set; }
    public string company { get; set; }
    public string street { get; set; }
} 
```

然后应填写此列表：

```
public List<Record> Results = new List<Record>(); 
```

但是`XPATH`我正在使用的不是应该在子节点中进行搜索。它似乎一次又一次地搜索整个文档。

`spans`我的意思是我已经以这种方式工作了，我只是获得了整个页面的跨度，但是我与and之间没有关系`divs`。意思是，我不再知道哪个`span`与哪个有关`div`。

有人知道解决方案吗？我已经玩了那么多，现在我完全糊涂了。:)

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-21T13:55:06.840

如果使用`//`，它会从文档开始搜索。

用于`.//`从当前节点搜索所有

```
 foreach (HtmlAgilityPack.HtmlNode node2 in node.SelectNodes(".//span[@prop]")) 
```

或完全删除前缀以仅搜索直接子级：

```
 foreach (HtmlAgilityPack.HtmlNode node2 in node.SelectNodes("span[@prop]")) 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-02-21T23:06:38.527

以下对我有用。正如 BeniBela 指出的那样，重要的一点是在第二次调用“SelectNodes”时添加一个点。

```
List<Record> lstRecords=new List<Record>();
foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//div[@class='search_hit']"))
{
  Record record=new Record();
  foreach (HtmlNode node2 in node.SelectNodes(".//span[@prop]"))
  {
    string attributeValue = node2.GetAttributeValue("prop", "");
    if (attributeValue == "name")
    {
      record.Name = node2.InnerText;
    }
    else if (attributeValue == "company")
    {
      record.company = node2.InnerText;
    }
    else if (attributeValue == "street")
    {
      record.street = node2.InnerText;
    }
  }
  lstRecords.Add(record);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T07:16:33.367

首先看一下这个：**[Html Agility Pack - Problem selection subnode](https://stackoverflow.com/questions/6181014/html-agility-pack-problem-selecting-subnode/6182495#6182495)**

这是您问题的完整解决方案：

```
IList<Record> results = new List<Record>();
foreach (var node in doc.DocumentNode.SelectNodes("//div[@class='search_hit']")) {
    var record = new Record();
    record.Name = node.SelectSingleNode(".//span[@prop='name']").InnerText;
    record.company = node.SelectSingleNode(".//span[@prop='company']").InnerText;
    record.street = node.SelectSingleNode(".//span[@prop='street']").InnerText;
    results.Add(record);
} 
```

如果您阅读了我指出的问题，您会发现做的事情`./span[@prop='name']`是完全相同的，因为这些`span`节点是节点的（直接）子`div`节点。

* * *

如果`span`节点没有这些`prop`属性，并且您想根据它们出现的顺序分配它们，您可以执行以下操作：

```
foreach (var node in doc.DocumentNode.SelectNodes("//div[@class='search_hit']")) {
    var spanNodes = node.SelectNodes("./span");
    var record = new Record();
    record.Name = spanNodes[0].InnerText;
    record.company = spanNodes[1].InnerText;
    record.street = spanNodes[2].InnerText;
    results.Add(record);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T12:47:08.547

为我感到羞耻:)

你们都是对的。

我发现了问题。这个 NullReferenceException 一直困扰着我，所以我花了更多时间详细查看它。在所有这些 div 之间，有一个 div 具有相同的“class='search-hit'”属性，但内部没有跨度。这就是它在第二个循环中出现错误的原因。

```
foreach (HtmlAgilityPack.HtmlNode node in doc.DocumentNode.SelectNodes("//span[@prop]/ancestor::div[@class='search_hit']"))
   {
        Record rec = new Record();
        foreach (HtmlAgilityPack.HtmlNode node2 in node.SelectNodes(".//span[@prop]"))
           {
           }
           rList.Results.Add(rec);
   } 
```

上面的代码正在运行。

谢谢你们的时间和帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-14T07:27:27.707

我用那个。类转换id

```
 HtmlNodeCollection nodes = dokuman.DocumentNode.SelectNodes("//div[@id='search_hit']//span[@prop]");

            for (int i = 0; i < nodes .Count; i++)
        {
            var record = new Record();

                record.Name = links[i].InnerText;   results.Add(record);  } 
```

# java - 为什么 ContextThemeWrapper 会覆盖 ContextWrapper 中定义的字段“mBase”？

> ID：15003411
> 
> 赞同：2
> 
> 时间：2013-02-21T13:24:50.617
> 
> 标签：java, android

我是java初学者。现在我正在学习android开发，对**android.view.ContextThemeWrapper**的类定义感到困惑。它是**android.content.ContextWrapper**的子类。这两个类都包含一个字段 mBase（和 android.content.Context 的实例）。在基类中，它声明时没有访问修饰符，但在子类中，它声明时使用私有修饰符。

所以 android.view.ContextThemeWrapper 的一个实例确实有两个名为“mBase”的字段，只有在派生部分中定义的那个是可见的，而在基类部分中声明的那个是隐藏的。为什么在这里派生类的实例中需要两个“mBase”字段的副本？在哪种情况下，我应该将基类中定义的字段覆盖为私有字段？

我需要你的帮助。提前致谢。

下面是这两个类的定义：

**android.content.ContextWrapper：**

```
 /**
 * Proxying implementation of Context that simply delegates all of its calls to
 * another Context.  Can be subclassed to modify behavior without changing
 * the original Context.
 */
public class ContextWrapper extends Context {
    Context mBase;

    public ContextWrapper(Context base) {
        mBase = base;
    }

    /**
     * Set the base context for this ContextWrapper.  All calls will then be
     * delegated to the base context.  Throws
     * IllegalStateException if a base context has already been set.
     * 
     * @param base The new base context for this wrapper.
     */
    protected void attachBaseContext(Context base) {
        if (mBase != null) {
            throw new IllegalStateException("Base context already set");
        }
        mBase = base;
    }

    /**
     * @return the base context as set by the constructor or setBaseContext
     */
    public Context getBaseContext() {
        return mBase;
    }

    @Override
    public AssetManager getAssets() {
        return mBase.getAssets();
    }

    @Override
    public Resources getResources()
    {
        return mBase.getResources();
    }

    @Override
    public PackageManager getPackageManager() {
        return mBase.getPackageManager();
    }

    @Override
    public ContentResolver getContentResolver() {
        return mBase.getContentResolver();
    }

    @Override
    public Looper getMainLooper() {
        return mBase.getMainLooper();
    }

    @Override
    public Context getApplicationContext() {
        return mBase.getApplicationContext();
    }

    @Override
    public void setTheme(int resid) {
        mBase.setTheme(resid);
    }

    /** @hide */
    @Override
    public int getThemeResId() {
        return mBase.getThemeResId();
    }

    @Override
    public Resources.Theme getTheme() {
        return mBase.getTheme();
    }

    @Override
    public ClassLoader getClassLoader() {
        return mBase.getClassLoader();
    }

    @Override
    public String getPackageName() {
        return mBase.getPackageName();
    }

    @Override
    public ApplicationInfo getApplicationInfo() {
        return mBase.getApplicationInfo();
    }

    @Override
    public String getPackageResourcePath() {
        return mBase.getPackageResourcePath();
    }

    @Override
    public String getPackageCodePath() {
        return mBase.getPackageCodePath();
    }

    /** @hide */
    @Override
    public File getSharedPrefsFile(String name) {
        return mBase.getSharedPrefsFile(name);
    }

    @Override
    public SharedPreferences getSharedPreferences(String name, int mode) {
        return mBase.getSharedPreferences(name, mode);
    }

    @Override
    public FileInputStream openFileInput(String name)
        throws FileNotFoundException {
        return mBase.openFileInput(name);
    }

    @Override
    public FileOutputStream openFileOutput(String name, int mode)
        throws FileNotFoundException {
        return mBase.openFileOutput(name, mode);
    }

    @Override
    public boolean deleteFile(String name) {
        return mBase.deleteFile(name);
    }

    @Override
    public File getFileStreamPath(String name) {
        return mBase.getFileStreamPath(name);
    }

    @Override
    public String[] fileList() {
        return mBase.fileList();
    }

    @Override
    public File getFilesDir() {
        return mBase.getFilesDir();
    }

    @Override
    public File getExternalFilesDir(String type) {
        return mBase.getExternalFilesDir(type);
    }

    @Override
    public File getObbDir() {
        return mBase.getObbDir();
    }

    @Override
    public File getCacheDir() {
        return mBase.getCacheDir();
    }

    @Override
    public File getExternalCacheDir() {
        return mBase.getExternalCacheDir();
    }

    @Override
    public File getDir(String name, int mode) {
        return mBase.getDir(name, mode);
    }

    @Override
    public SQLiteDatabase openOrCreateDatabase(String name, int mode, CursorFactory factory) {
        return mBase.openOrCreateDatabase(name, mode, factory);
    }

    @Override
    public SQLiteDatabase openOrCreateDatabase(String name, int mode, CursorFactory factory,
            DatabaseErrorHandler errorHandler) {
        return mBase.openOrCreateDatabase(name, mode, factory, errorHandler);
    }

    @Override
    public boolean deleteDatabase(String name) {
        return mBase.deleteDatabase(name);
    }

    @Override
    public File getDatabasePath(String name) {
        return mBase.getDatabasePath(name);
    }

    @Override
    public String[] databaseList() {
        return mBase.databaseList();
    }

    @Override
    public Drawable getWallpaper() {
        return mBase.getWallpaper();
    }

    @Override
    public Drawable peekWallpaper() {
        return mBase.peekWallpaper();
    }

    @Override
    public int getWallpaperDesiredMinimumWidth() {
        return mBase.getWallpaperDesiredMinimumWidth();
    }

    @Override
    public int getWallpaperDesiredMinimumHeight() {
        return mBase.getWallpaperDesiredMinimumHeight();
    }

    @Override
    public void setWallpaper(Bitmap bitmap) throws IOException {
        mBase.setWallpaper(bitmap);
    }

    @Override
    public void setWallpaper(InputStream data) throws IOException {
        mBase.setWallpaper(data);
    }

    @Override
    public void clearWallpaper() throws IOException {
        mBase.clearWallpaper();
    }

    @Override
    public void startActivity(Intent intent) {
        mBase.startActivity(intent);
    }

    /** @hide */
    @Override
    public void startActivityAsUser(Intent intent, UserHandle user) {
        mBase.startActivityAsUser(intent, user);
    }

    @Override
    public void startActivity(Intent intent, Bundle options) {
        mBase.startActivity(intent, options);
    }

    /** @hide */
    @Override
    public void startActivityAsUser(Intent intent, Bundle options, UserHandle user) {
        mBase.startActivityAsUser(intent, options, user);
    }

    @Override
    public void startActivities(Intent[] intents) {
        mBase.startActivities(intents);
    }

    @Override
    public void startActivities(Intent[] intents, Bundle options) {
        mBase.startActivities(intents, options);
    }

    /** @hide */
    @Override
    public void startActivitiesAsUser(Intent[] intents, Bundle options, UserHandle userHandle) {
        mBase.startActivitiesAsUser(intents, options, userHandle);
    }

    @Override
    public void startIntentSender(IntentSender intent,
            Intent fillInIntent, int flagsMask, int flagsValues, int extraFlags)
            throws IntentSender.SendIntentException {
        mBase.startIntentSender(intent, fillInIntent, flagsMask,
                flagsValues, extraFlags);
    }

    @Override
    public void startIntentSender(IntentSender intent,
            Intent fillInIntent, int flagsMask, int flagsValues, int extraFlags,
            Bundle options) throws IntentSender.SendIntentException {
        mBase.startIntentSender(intent, fillInIntent, flagsMask,
                flagsValues, extraFlags, options);
    }

    @Override
    public void sendBroadcast(Intent intent) {
        mBase.sendBroadcast(intent);
    }

    @Override
    public void sendBroadcast(Intent intent, String receiverPermission) {
        mBase.sendBroadcast(intent, receiverPermission);
    }

    @Override
    public void sendOrderedBroadcast(Intent intent,
            String receiverPermission) {
        mBase.sendOrderedBroadcast(intent, receiverPermission);
    }

    @Override
    public void sendOrderedBroadcast(
        Intent intent, String receiverPermission, BroadcastReceiver resultReceiver,
        Handler scheduler, int initialCode, String initialData,
        Bundle initialExtras) {
        mBase.sendOrderedBroadcast(intent, receiverPermission,
                resultReceiver, scheduler, initialCode,
                initialData, initialExtras);
    }

    @Override
    public void sendBroadcastAsUser(Intent intent, UserHandle user) {
        mBase.sendBroadcastAsUser(intent, user);
    }

    @Override
    public void sendBroadcastAsUser(Intent intent, UserHandle user,
            String receiverPermission) {
        mBase.sendBroadcastAsUser(intent, user, receiverPermission);
    }

    @Override
    public void sendOrderedBroadcastAsUser(Intent intent, UserHandle user,
            String receiverPermission, BroadcastReceiver resultReceiver, Handler scheduler,
            int initialCode, String initialData, Bundle initialExtras) {
        mBase.sendOrderedBroadcastAsUser(intent, user, receiverPermission, resultReceiver,
                scheduler, initialCode, initialData, initialExtras);
    }

    @Override
    public void sendStickyBroadcast(Intent intent) {
        mBase.sendStickyBroadcast(intent);
    }

    @Override
    public void sendStickyOrderedBroadcast(
        Intent intent, BroadcastReceiver resultReceiver,
        Handler scheduler, int initialCode, String initialData,
        Bundle initialExtras) {
        mBase.sendStickyOrderedBroadcast(intent,
                resultReceiver, scheduler, initialCode,
                initialData, initialExtras);
    }

    @Override
    public void removeStickyBroadcast(Intent intent) {
        mBase.removeStickyBroadcast(intent);
    }

    @Override
    public void sendStickyBroadcastAsUser(Intent intent, UserHandle user) {
        mBase.sendStickyBroadcastAsUser(intent, user);
    }

    @Override
    public void sendStickyOrderedBroadcastAsUser(Intent intent,
            UserHandle user, BroadcastReceiver resultReceiver,
            Handler scheduler, int initialCode, String initialData,
            Bundle initialExtras) {
        mBase.sendStickyOrderedBroadcastAsUser(intent, user, resultReceiver,
                scheduler, initialCode, initialData, initialExtras);
    }

    @Override
    public void removeStickyBroadcastAsUser(Intent intent, UserHandle user) {
        mBase.removeStickyBroadcastAsUser(intent, user);
    }

    @Override
    public Intent registerReceiver(
        BroadcastReceiver receiver, IntentFilter filter) {
        return mBase.registerReceiver(receiver, filter);
    }

    @Override
    public Intent registerReceiver(
        BroadcastReceiver receiver, IntentFilter filter,
        String broadcastPermission, Handler scheduler) {
        return mBase.registerReceiver(receiver, filter, broadcastPermission,
                scheduler);
    }

    /** @hide */
    @Override
    public Intent registerReceiverAsUser(
        BroadcastReceiver receiver, UserHandle user, IntentFilter filter,
        String broadcastPermission, Handler scheduler) {
        return mBase.registerReceiverAsUser(receiver, user, filter, broadcastPermission,
                scheduler);
    }

    @Override
    public void unregisterReceiver(BroadcastReceiver receiver) {
        mBase.unregisterReceiver(receiver);
    }

    @Override
    public ComponentName startService(Intent service) {
        return mBase.startService(service);
    }

    @Override
    public boolean stopService(Intent name) {
        return mBase.stopService(name);
    }

    /** @hide */
    @Override
    public ComponentName startServiceAsUser(Intent service, UserHandle user) {
        return mBase.startServiceAsUser(service, user);
    }

    /** @hide */
    @Override
    public boolean stopServiceAsUser(Intent name, UserHandle user) {
        return mBase.stopServiceAsUser(name, user);
    }

    @Override
    public boolean bindService(Intent service, ServiceConnection conn,
            int flags) {
        return mBase.bindService(service, conn, flags);
    }

    /** @hide */
    @Override
    public boolean bindService(Intent service, ServiceConnection conn, int flags, int userHandle) {
        return mBase.bindService(service, conn, flags, userHandle);
    }

    @Override
    public void unbindService(ServiceConnection conn) {
        mBase.unbindService(conn);
    }

    @Override
    public boolean startInstrumentation(ComponentName className,
            String profileFile, Bundle arguments) {
        return mBase.startInstrumentation(className, profileFile, arguments);
    }

    @Override
    public Object getSystemService(String name) {
        return mBase.getSystemService(name);
    }

    @Override
    public int checkPermission(String permission, int pid, int uid) {
        return mBase.checkPermission(permission, pid, uid);
    }

    @Override
    public int checkCallingPermission(String permission) {
        return mBase.checkCallingPermission(permission);
    }

    @Override
    public int checkCallingOrSelfPermission(String permission) {
        return mBase.checkCallingOrSelfPermission(permission);
    }

    @Override
    public void enforcePermission(
            String permission, int pid, int uid, String message) {
        mBase.enforcePermission(permission, pid, uid, message);
    }

    @Override
    public void enforceCallingPermission(String permission, String message) {
        mBase.enforceCallingPermission(permission, message);
    }

    @Override
    public void enforceCallingOrSelfPermission(
            String permission, String message) {
        mBase.enforceCallingOrSelfPermission(permission, message);
    }

    @Override
    public void grantUriPermission(String toPackage, Uri uri, int modeFlags) {
        mBase.grantUriPermission(toPackage, uri, modeFlags);
    }

    @Override
    public void revokeUriPermission(Uri uri, int modeFlags) {
        mBase.revokeUriPermission(uri, modeFlags);
    }

    @Override
    public int checkUriPermission(Uri uri, int pid, int uid, int modeFlags) {
        return mBase.checkUriPermission(uri, pid, uid, modeFlags);
    }

    @Override
    public int checkCallingUriPermission(Uri uri, int modeFlags) {
        return mBase.checkCallingUriPermission(uri, modeFlags);
    }

    @Override
    public int checkCallingOrSelfUriPermission(Uri uri, int modeFlags) {
        return mBase.checkCallingOrSelfUriPermission(uri, modeFlags);
    }

    @Override
    public int checkUriPermission(Uri uri, String readPermission,
            String writePermission, int pid, int uid, int modeFlags) {
        return mBase.checkUriPermission(uri, readPermission, writePermission,
                pid, uid, modeFlags);
    }

    @Override
    public void enforceUriPermission(
            Uri uri, int pid, int uid, int modeFlags, String message) {
        mBase.enforceUriPermission(uri, pid, uid, modeFlags, message);
    }

    @Override
    public void enforceCallingUriPermission(
            Uri uri, int modeFlags, String message) {
        mBase.enforceCallingUriPermission(uri, modeFlags, message);
    }

    @Override
    public void enforceCallingOrSelfUriPermission(
            Uri uri, int modeFlags, String message) {
        mBase.enforceCallingOrSelfUriPermission(uri, modeFlags, message);
    }

    @Override
    public void enforceUriPermission(
            Uri uri, String readPermission, String writePermission,
            int pid, int uid, int modeFlags, String message) {
        mBase.enforceUriPermission(
                uri, readPermission, writePermission, pid, uid, modeFlags,
                message);
    }

    @Override
    public Context createPackageContext(String packageName, int flags)
        throws PackageManager.NameNotFoundException {
        return mBase.createPackageContext(packageName, flags);
    }

    /** @hide */
    @Override
    public Context createPackageContextAsUser(String packageName, int flags, UserHandle user)
            throws PackageManager.NameNotFoundException {
        return mBase.createPackageContextAsUser(packageName, flags, user);
    }

    @Override
    public Context createConfigurationContext(Configuration overrideConfiguration) {
        return mBase.createConfigurationContext(overrideConfiguration);
    }

    @Override
    public Context createDisplayContext(Display display) {
        return mBase.createDisplayContext(display);
    }

    @Override
    public boolean isRestricted() {
        return mBase.isRestricted();
    }

    /** @hide */
    @Override
    public CompatibilityInfoHolder getCompatibilityInfo(int displayId) {
        return mBase.getCompatibilityInfo(displayId);
    }
} 
```

**android.view.ContextThemeWrapper：**

```
/**
 * A ContextWrapper that allows you to modify the theme from what is in the 
 * wrapped context. 
 */
public class ContextThemeWrapper extends ContextWrapper {
    private Context mBase;
    private int mThemeResource;
    private Resources.Theme mTheme;
    private LayoutInflater mInflater;
    private Configuration mOverrideConfiguration;
    private Resources mResources;

    public ContextThemeWrapper() {
        super(null);
    }

    public ContextThemeWrapper(Context base, int themeres) {
        super(base);
        mBase = base;
        mThemeResource = themeres;
    }

    @Override protected void attachBaseContext(Context newBase) {
        super.attachBaseContext(newBase);
        mBase = newBase;
    }

    /**
     * Call to set an "override configuration" on this context -- this is
     * a configuration that replies one or more values of the standard
     * configuration that is applied to the context.  See
     * {@link Context#createConfigurationContext(Configuration)} for more
     * information.
     *
     * <p>This method can only be called once, and must be called before any
     * calls to {@link #getResources()} are made.
     */
    public void applyOverrideConfiguration(Configuration overrideConfiguration) {
        if (mResources != null) {
            throw new IllegalStateException("getResources() has already been called");
        }
        if (mOverrideConfiguration != null) {
            throw new IllegalStateException("Override configuration has already been set");
        }
        mOverrideConfiguration = new Configuration(overrideConfiguration);
    }

    @Override
    public Resources getResources() {
        if (mResources != null) {
            return mResources;
        }
        if (mOverrideConfiguration == null) {
            mResources = super.getResources();
            return mResources;
        } else {
            Context resc = createConfigurationContext(mOverrideConfiguration);
            mResources = resc.getResources();
            return mResources;
        }
    }

    @Override public void setTheme(int resid) {
        mThemeResource = resid;
        initializeTheme();
    }

    /** @hide */
    @Override
    public int getThemeResId() {
        return mThemeResource;
    }

    @Override public Resources.Theme getTheme() {
        if (mTheme != null) {
            return mTheme;
        }

        mThemeResource = Resources.selectDefaultTheme(mThemeResource,
                getApplicationInfo().targetSdkVersion);
        initializeTheme();

        return mTheme;
    }

    @Override public Object getSystemService(String name) {
        if (LAYOUT_INFLATER_SERVICE.equals(name)) {
            if (mInflater == null) {
                mInflater = LayoutInflater.from(mBase).cloneInContext(this);
            }
            return mInflater;
        }
        return mBase.getSystemService(name);
    }

    /**
     * Called by {@link #setTheme} and {@link #getTheme} to apply a theme
     * resource to the current Theme object.  Can override to change the
     * default (simple) behavior.  This method will not be called in multiple
     * threads simultaneously.
     *
     * @param theme The Theme object being modified.
     * @param resid The theme style resource being applied to <var>theme</var>.
     * @param first Set to true if this is the first time a style is being
     *              applied to <var>theme</var>.
     */
    protected void onApplyThemeResource(Resources.Theme theme, int resid, boolean first) {
        theme.applyStyle(resid, true);
    }

    private void initializeTheme() {
        final boolean first = mTheme == null;
        if (first) {
            mTheme = getResources().newTheme();
            Resources.Theme theme = mBase.getTheme();
            if (theme != null) {
                mTheme.setTo(theme);
            }
        }
        onApplyThemeResource(mTheme, mThemeResource, first);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:17:09.963

> 为什么在这里派生类的实例中需要两个“mBase”字段的副本？

没有必要有两个，因为`super.mBase`在`ContextThemeWrapper`. 所以我认为这些字段具有相同的名称只是一个巧合。

> 在哪种情况下，我应该将基类中定义的字段覆盖为私有字段？

您不能覆盖字段。子类中的字段与超类中的字段不同，即使它们都具有相同的名称。我认为`mBase`in`ContextThemeWrapper`是私有的，因为它永远不应该从类外部更改（因此没有 getter 和 setter）。

* * *

**编辑：**

> 但是这两个类中的 mBase 引用的是同一个 Context 实例。如果 ContextThemeWrapper 不希望客户端更改 mBase 字段，只需从 ConextWrapper 继承即可。为什么 ContextThemeWrapper 在 ContextWrapper 中包含另一个 Context 实例的引用？

是的，我以前没有看到这个。这很有趣，但让我们看看文档：

> “ContextThemeWrapper 是一个 ContextWrapper，它允许您从包装的上下文中修改主题。”

和

> “ContextWrapper 是 Context 的代理实现，它简单地将其所有调用委托给另一个 Context。

因此`ContextWrapper`，例如由`Service`类`ContextThemeWrapper`扩展，并由例如`Activity`类（以及更多......）扩展。

`ContextThemeWrapper`可以修改`Context`...所以当创建这个类的对象时，它会用它自己的 mBase（在构造函数中传递）替换超类中的 mBase。所以两个 mBase 具有相同的值。这样做是因为`ContextThemeWrapper`可以修改`Context`传递给它的内容。当 Context 被修改时，`ContextThemeWrapper`它也会被更新，`ContextWrapper`所以`ContextWrapper`它的所有子类都可以访问这个 modified `Context`。

很抱歉解释混乱，但我现在没有太多时间，我希望你现在明白了:)

# opencv - 使用 createTrackbar 显示类型

> ID：15003420
> 
> 赞同：0
> 
> 时间：2013-02-21T13:25:23.700
> 
> 标签：opencv

我在 openCV 中使用 createTrackbar 来选择图像上的不同操作：旋转、调整大小或阈值等。Basicactions 是回调函数。

```
createTrackbar(trackbar_type, window_name, 
                &type_action, type_max, basicactions);

void basicactions( int, void* )
{
    switch(type_action)
    {
    case 0: // Original image
        {
            imshow(window_name,im);
            break;
        }
    case 1: // Change contrast
        {
            double contrast = (double) (2*value-255);
            Mat out=imcontrast(im,contrast);
            imshow( window_name, out );
            break;
        }
    case 2: //Resizing
        { 
```

问题是我想向用户显示当前操作。但是，trackbar 只能显示数字。并且轨迹栏的名称在 Windows 上不能全尺寸显示（它被缩短了）。无论如何要在轨迹栏中显示字符串而不是数字？

![在此处输入图像描述](../Images/c7f9ec41c2bb872f6a171d5ed41403a9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:44:32.960

不，不可能。

也许 createButton() 代替你的每一个动作

# iphone - 水平 UIScrollView 问题上的 UIButton

> ID：15003421
> 
> 赞同：0
> 
> 时间：2013-02-21T13:25:35.647
> 
> 标签：iphone, objective-c, uiscrollview, uibutton

我有两个 ViewController，“firstVC”和“secondVC”。我想创建一个水平分页的滚动视图，保持两个视图控件分开：所以我创建了一个新的视图控制器“主页”，我在其中创建了滚动视图并添加了 fisrtVC 和 secondVC。

```
-(void)viewDidLoad {

    self.firstVC = [[firstVC alloc] initWithNibName:@"firstVC" bundle:nil];
    self.secondVC = [[secondVC alloc] initWithNibName:@"secondVC" bundle:nil];

    //setup frame
    CGRect frame = self.scrollView.frame;
    frame.origin.y = 0;
    self.firstVC.view.frame = frame; //this is useless, I know... it's just for understand what I'm doing

    frame.origin.x = 320;
    self.secondVC.view.frame = frame;

    //add the VC to the scrollView
    [self.scrollview addSubview:self.firstVC.view];
    [self.scrollview addSubview:self.secondVC.view];

    //setup the scrollView
    self.scrollView.contentSize = CGSizeMake(640 , frame.size.height);
    self.scrollView.pagingEnabled = YES;
    self.scrollView.showsHorizontalScrollIndicator = YES;
    self.scrollView.userInteractionEnabled = YES;
    self.scrollView.exclusiveTouch = YES;
    self.scrollView.canCancelContentTouches = YES;
    self.scrollView.delaysContentTouches = YES;
} 
```

HomePage 在 UINavigationController 中；FirstVC 和 SecondVC 有更多的自定义（带图像）UIButton。每个按钮都应该在 nagivationController 上推送一个新的 ViewController：为了做到这一点，FirstVC 和 SecondVC 对 HomePage 有一个弱引用，因此它们可以调用

```
[self.homePage.navigationController pushViewController:abc animated:YES]; 
```

一切正常，但我有两个问题：

1）如果按钮与IBAction连接，但方法为空，当我按下按钮时，我可以看到突出显示的图片。如果方法不为空（因为，当然，它必须做一些事情！）按钮立即调用该方法，所以没有高亮！似乎不是在用户将手指从按钮上移开时调用该方法（因为它应该可以工作），而是在他触摸屏幕的那一刻。我认为这个问题与第二个问题有关：

2）因此，滚动scrollView（从左到右，反之亦然）非常困难，因为很多时候它会调用与按钮相关的方法......

我想要的是移动版本上的 AppStore 之类的东西：例如，在“顶部购买”中，您可以按下图标然后滚动视图。如果我尝试这样做，按钮会立即被按下！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:34:22.803

尝试将`UIButton`控制事件设置为`UIControlEventTouchUpInside`.

# iphone - 无法将 OCMock 标头导入 iOS 项目

> ID：15003423
> 
> 赞同：5
> 
> 时间：2013-02-21T13:25:41.070
> 
> 标签：iphone, ios, xcode, ocmock

我正在尝试使用 ocmock.org 上的说明将 OCMock 添加到我当前的项目 [中](http://ocmock.org)。

1.  将库和标题添加到项目中。
2.  确保将其`libOCMock.a`添加到我的测试目标中。
3.  为测试目标添加了头文件的搜索路径`Header Search Paths`。`Build Settings`
4.  添加了 flags`-force_load`和to （也添加`PATH/TO/libOCMock.a`到了测试目标）。`-ObjC``Other Linker Flags`
5.  最后，我在这样的测试类中导入标题：`#import <OCMock/OCMock.h>`

发生的第一件事是 Xcode 抱怨找不到标头。如果我继续尝试构建测试目标，我会收到一个错误：`OCMock/OCMock.h`未找到。

当我检查构建输出时，我可以确定它正在添加正确的搜索路径：`-I/Users/username/Development/proj/iphone/frameworks/OCMock_2_0_1/headers`

当我在终端中列出路径时，我可以清楚地看到那里的文件。

任何正确方向的帮助或指示将不胜感激。<3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:53:47.677

在朋友的帮助下解决了（非常感谢 A.）！

`headers`当导入指向时，我已将包含标题的文件夹的名称更改为`OCMock/OCmock.h`. ：/

# python - 使用python搜索字符串并在存在另一个字符串时执行某些操作

> ID：15003427
> 
> 赞同：0
> 
> 时间：2013-02-21T13:25:58.330
> 
> 标签：python, file

我有一个搜索文件的python脚本：

这是输入文本文件的示例：

```
String A 1
String B 1
String B 2
String B 3
String A 2
String B 4 
```

它在字符串 A 中存储一个数值，然后对字符串 B 的每个片段的存在进行一些处理，其中每个片段都是不同的数字

```
y=0
while y < len(InFileStr):
    if "String A" in InFileStr[y]:
        StringA = int(InFileStr[y].split("")[2])
    elif "String B" in InFileStr[y]):
        print "String B" + int(InFileStr[y].split("")[2])"\n"
    y+=1 
```

这个“应该”产生：

```
String B 1
String B 2
String B 3
String B 4 
```

其中 StringA =2 因为它被覆盖了

但是，无法弄清楚如何打印

```
String B 1
String B 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:16:35.907

只是试图解释您要查找的内容，似乎您只是想将最接近的 A 弦与 B 弦配对。在这种情况下，您只需要一个变量来跟踪最后一个 A 字符串，这样您就知道可以在 B 字符串上执行。如果是这种情况，下面的代码应该对你有用。

```
lastLineStraingA = False

for line in infile.readlines():
    if "StringA" in line:
        lastLineStringA = True
        storeValueInLine(line)
        continue
    elif ("StringB" in line) and (True == lastLineStringA):
        process(line)

    lastLineStringA = False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:17:20.690

看看这是否对你有帮助

```
while y < len(InFileStr):
    if "String A" in InFileStr[y]:
        flag = True    
        storevalueInLine()
    elif "String B" in InFileStr[y]):
        if flag:
            process(StringB)
            flag = False
    y+=1 
```

# ios - 使用 CATransition 时，链接器命令失败，退出代码为 1

> ID：15003430
> 
> 赞同：0
> 
> 时间：2013-02-21T13:26:03.793
> 
> 标签：ios, linker, quartz-core

我想让我的视图转换为从右向左滑动，而不是通常的从左向右滑动。所以我找到了这段代码：

```
- (void) imgSlideInFromLeft : (UIView *) view
{
    CATransition *transition = [CATransition animation];
    transition.duration = 0.4;
    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionPush;
    transition.subtype =kCATransitionFromLeft;
    transition.delegate = self;
    [view.layer addAnimation:transition forKey:nil];
} 
```

然后我添加了 QuartzCore 的框架并导入`<QuartzCore/QuartzCore.h>`了，但我现在得到了这些错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_CAMediaTimingFunction", referenced from:
      objc-class-ref in SearchResultsController.o
  "_OBJC_CLASS_$_CATransition", referenced from:
      objc-class-ref in SearchResultsController.o
  "_kCAMediaTimingFunctionEaseInEaseOut", referenced from:
      -[SearchResultsController imgSlideInFromLeft:] in SearchResultsController.o
  "_kCATransitionFromLeft", referenced from:
      -[SearchResultsController imgSlideInFromLeft:] in SearchResultsController.o
  "_kCATransitionPush", referenced from:
      -[SearchResultsController imgSlideInFromLeft:] in SearchResultsController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:32:51.643

看起来您忘记了添加`QuartzCore.framework`到您的应用程序？

# javascript - 从客户端上运行的脚本更新服务器上的 javascript 变量

> ID：15003432
> 
> 赞同：0
> 
> 时间：2013-02-21T13:26:11.730
> 
> 标签：javascript, jquery, html, geolocation

嗨，我有一个网页，其中包含一些用于定位我的机器的 javascript，我希望能够从在我的机器上运行的脚本更新 javascript 中包含的变量，我只是想知道这是否可能 下面是编码

```
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position){
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;
    var coords = new google.maps.LatLng(latitude, longitude);
    var mapOptions = {
        zoom: 15,
        center: coords,
        mapTypeControl: true,
        navigationControlOptions: {
            style: google.maps.NavigationControlStyle.SMALL
        },
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(
            document.getElementById("mapContainer"), mapOptions
            );
        var marker = new google.maps.Marker({
                position: coords,
                map: map,
                title: "Your current location!"
        });

    });
}else {
    alert("Geolocation API is not supported in your browser.");
} 
```

我希望能够更新的变量是 position.coords.latitude 和 position.coords.longitude 但从我的笔记本电脑完成 感谢您的任何输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:35:16.950

每 x 秒发出一次地理定位请求：

```
var mapOptions = {
    zoom: 15,
    center: new google.maps.LatLng(0, 0),
    mapTypeControl: true,
    navigationControlOptions: {
        style: google.maps.NavigationControlStyle.SMALL
    },
    mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(
        document.getElementById("mapContainer"), mapOptions
        );
    var marker = new google.maps.Marker({
            position: coords,
            map: map,
            title: "Your current location!"
    });

 $.ajax({
     url: 'ajax-file', //create a file that querys your lap top position
     success: function (response){
         map.setCenter(response);
     } 
 }); 
```

ajax 文件可能是 php 文件或 aspx 文件，您只需要查询 SELECT lat, long FROM 表并将其回显到文件中，然后您使用 ajax 捕获该值

# python - 迭代器用尽，但 For 循环没有错误

> ID：15003437
> 
> 赞同：1
> 
> 时间：2013-02-21T13:26:32.883
> 
> 标签：python, python-3.x, iterator

（在 Python 3.2 中）

```
miters = map(abs,(-1,2,5))
for i in miters:
    print(i)
1
2
5

next(miters)
--> StopIteration

for i in miters:
    print(i)
--> ?? Nothing Happens.. 
```

为什么我不能在第二个 for 循环中收到“StopIteration”错误消息？'miter' 已经用尽了，所以如果我再次循环它，我认为会有一个 'StopIteration' ......

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:29:30.770

`for`循环用于计算`StopIteration`何时停止。所以它吞下异常并立即停止。

# java - 在不使用工作区的情况下获取变更集中文件的路径

> ID：15003442
> 
> 赞同：1
> 
> 时间：2013-02-21T13:26:41.387
> 
> 标签：java, rtc, jazz, ibm-jazz

我正在搜索位于变更集的 .txt 文件。然后我需要在我的电脑上本地创建这个文件的完整路径目录。

例如，如果有一个名为“test.txt”的文件位于：Project1-->Folder1-->Folder2-->test.txt

直到现在我已经设法搜索到这个文件。现在我需要获取完整目录并在我的电脑上创建类似的目录：我的电脑上的结果：Folder1-->Folder2-->test.txt

这就是我在变更集中搜索文件并检索它的方法：

```
public IFileItem getTextFileFile(IChangeSet changeSet, ITeamRepository repository) throws TeamRepositoryException{
    IVersionableManager vm = SCMPlatform.getWorkspaceManager(repository).versionableManager();
    List changes = changeSet.changes();
    IFileItem toReturn = null;
    for(int i=0;i<changes.size();i++) {="" <br="">             Change change = (Change) changes.get(i);
        IVersionableHandle after = change.afterState();
        if( after != null && after instanceof IFileItemHandle) {
            IFileItem fileItem = (IFileItem) vm.fetchCompleteState(after, null);
            if(fileItem.getName().contains(".txt")) {
                   toReturn = fileItem;
                   break;
            } else {
               continue;
            }
        }
    }
    if(toReturn == null){
        throw new TeamRepositoryException("Could not find the file");
    }
    return toReturn;
} 
```

我在论坛上搜索并发布了大部分内容，我发现我可以使用：configuration.determineAncestorsInHistory

但是，为了获得 IConfiguration，我需要 workspaceConnection，这在我的情况下无效。

谢谢。

我使用 RTC:4 Win:XP

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T20:47:26.127

文件/文件夹具有独立于其名称/路径的标识。这允许跨重命名/移动跟踪文件。文件的名称/路径可能会有所不同，具体取决于对该文件（或包含文件夹）所做更改的历史记录。

这意味着，如果您没有指向您关心的特定历史点的工作区（或基线），那么您无法确定实际路径是什么。这`IConfiguration.determineAncestorsInHistory`确实是获得路径的唯一方法。

在服务器深处有一种算法可以猜测文件的“流行”路径，但这并没有在任何地方公开。

# android - 使控件适合自定义 ActionBar 视图

> ID：15003443
> 
> 赞同：3
> 
> 时间：2013-02-21T13:26:42.250
> 
> 标签：android, android-actionbar, actionbarsherlock, android-ui

我的应用程序使用包含导航微调器和几个操作按钮的拆分 ActionBar。我想使用顶部多余的空间来添加一个额外的微调器，这里以蓝色突出显示：

![人像模式](../Images/0c5f8b67331b183de0bb488a6f374127.png)

虽然它以纵向正确显示（在此特定设备上），但横向显示了问题：

![横向模式](../Images/aad0c8feb64ff7012acd19d7ede962e2.png)

自定义视图似乎夹在导航微调器和操作按钮之间。

有什么可以让操作按钮折叠到溢出中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:06:34.863

我认为你有两个选择：

1.  设置`android:minWidth`第二个的属性`Spinner`。我可以想象这会将最后一个项目推入溢出菜单。

2.  纵向和横向使用两个不同的菜单 xml 文件。保留文件`/res/menu/menu.xml`原样并`/res/menu-land/menu.xml`在您`android:showAsAction="never"`为某些菜单项设置的位置创建一个新文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:36:02.563

我要采用的确切方法是不好的做法；如果操作栏是拆分的，导航应该在顶部，动作应该在底部。虽然您可能会争辩说选择时间跨度是一种导航控件，但它仍然违反了在窗口顶部具有单个导航控件的原则。

我决定不使用自定义视图，而是通过操作按钮在周和月之间切换，因为这更适合 Android UX。

至于精确的布局问题，我相信可以为导航列表和不允许列表项跨越多行的时间段列表使用不同的列表行布局来解决。

# ios - 如何在调试我的应用程序时跳过内存读取？

> ID：15003459
> 
> 赞同：0
> 
> 时间：2013-02-21T13:27:22.190
> 
> 标签：ios, objective-c, xcode, cocoa-touch, cocoa

如果我在我的应用程序上设置一个断点，点击几下后`step over`我会得到如下信息：

```
0x36589606:  mov    r0, r4
0x36589608:  mov    r2, r6
0x3658960a:  movs   r3, #4
0x3658960c:  mov    r1, r10
0x3658960e:  blx    0x369e4aa4                ; symbol stub for: -[_UIHostedTextServiceSession dismissTextServiceAnimated:]
0x36589612:  mov    r1, r8
0x36589614:  mov    r5, r0 
```

如何将其跳回我的代码？（越过停留在内存读数中..）谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:30:47.367

最简单的方法是“退出”，即调试器窗口左侧带有向上箭头的按钮。您可能需要单击它几次，但肯定比单步执行代码要少。

希望这可以帮助。

# icefaces-3 - 使用 ace:printer 在 ICEfaces 中打印

> ID：15003463
> 
> 赞同：0
> 
> 时间：2013-02-21T13:27:33.680
> 
> 标签：icefaces-3

我对 ICEfaces 很陌生。我使用的版本是 3.0.0。

我正在尝试使用 ace:printer 打印网页。

我的页面包含一个带有垂直滚动条的数据表。

我的问题是它只打印在浏览器上可见的页面部分。

它没有打印整个数据表。

我同意根据 ace:printer 的规范，提到“在表格的情况下，只会打印可见的列/行/面板”。

我应该如何打印整个页面。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:44:55.257

这是我做的一种解决方法：

1.  有一个 Ajax 监听器

> ```
> <h:commandLink id="printImgLnk1">
> <h:graphicImage id="printerImg1"
> value="/images/printIcon.png"
> alt="Print"
> style="border: 0 none;" />
> <h:outputText id="printAll" value="Print ALL" style="text-decoration:none" />
> <ace:ajax event="click" execute="@this" listener="#{backingBean.printListener}"/>
> </h:commandLink> 
> ```

所以，在你的后端 bean 中有一个布尔打印：让我们说 boolean print=false;

现在听众：

```
 public void printListener(AjaxBehaviorEvent e){
setPrint(true);
} 
```

现在在存在数据表的 .xhtml 中，为可滚动属性执行此操作：

```
scrollable='#{!backingBean.print}' 
```

谢谢！

# c++ - SDL 相机和背景

> ID：15003464
> 
> 赞同：-3
> 
> 时间：2013-02-21T13:27:35.180
> 
> 标签：c++, background, camera, sdl

您好，我正在使用 SDL 库开展一个项目，我对它很陌生，并试图掌握它......我不确定它是否可能，但我试图制作一个独立于相机的背景（地图）。假设背景是相机的父函数，它会有自己的坐标，比如英雄联盟的例子，地图在游戏开始时加载，每个玩家、怪物等都会更新它的位置和一切否则，您可以在地图上自由移动相机。现在我相信你的相机（屏幕）是父级，它有自己的坐标，它实际上是在屏幕上移动的背景，而不是在地图上移动的相机。如果可能的话，我将非常感谢任何帮助或有关如何做到这一点的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:03:26.597

本教程涵盖了这一主题以及与使用 SDL 进行游戏编程相关的许多其他主题。[http://lazyfoo.net/SDL_tutorials/index.php](http://lazyfoo.net/SDL_tutorials/index.php)

# c++ - 测量分布式应用程序的内存使用情况

> ID：15003465
> 
> 赞同：4
> 
> 时间：2013-02-21T13:27:35.403
> 
> 标签：c++, linux, performance, memory, distributed-computing

测量分布式应用程序的内存使用情况的最佳方法是什么？

我不确定`ps`在每台机器上使用是否是解决这个问题的最佳方法——解决方案越理智越好（：

PS：应用程序在 中`c++`，将使用`linux`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T05:47:05.493

安装几个非常好的开源企业数据中心监控工具之一。好的是：

*   [海瑞克](http://sourceforge.net/projects/hyperic-hq/)
*   [纳吉奥斯](http://www.nagios.org/)

它们非常易于安装，不仅为您提供内存，还为您提供任何其他您可以动摇的系统属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-17T14:52:50.153

要以编程方式获取内存使用情况，请从以下内容读取`/proc/self/statm`：

```
#include <fstream>
#include <iostream>

int main()
{
        std::ifstream statm("/proc/self/statm");
        size_t mem_virt, mem_rss, mem_shared;
        statm >> mem_virt >> mem_rss >> mem_shared;
        std::cout << "Memory stats:" << std::endl <<
                     "Virtual memory size:  " << mem_virt   << std::endl <<
                     "Resident memory size: " << mem_rss    << std::endl <<
                     "Shared memory size:   " << mem_shared << std::endl;
        return 0;
} 
```

我猜您最感兴趣的是*resident memory size*，即程序现在可以访问多少 RAM。请参阅[ServerFault 的回答，](https://serverfault.com/questions/48582/how-is-memory-usage-reported-in-linux/48610#48610)其中描述了这三种类型的含义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-16T18:16:10.410

我建议在应用程序的单独线程中实现简单的逻辑。它大部分时间都在睡觉，几分钟后醒来一次，调用[mallinfo](http://man7.org/linux/man-pages/man3/mallinfo.3.html)并将该数据放入日志或网络。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-13T21:41:19.060

有一个名为 alleyoop 的内存检查器应用程序（它使用 valgrind 库）可以监控程序。我建议检查一下：[http ://alleyoop.sourceforge.net/](http://alleyoop.sourceforge.net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-14T21:37:07.133

您可以使用

```
cat /proc/PROC_PID/smaps 
```

为了获取您的进程使用的所有内存页面的详细信息。但是，您不知道内存是真正使用还是只是保留。还有

```
pmap -x PROC_ID, doing similar work. 
```

最后，有

```
cat/proc/PROC_ID/status | grep Vm 
```

为您提供有关程序使用的所有内存类型的信息。

# python - 如何在 IDLE 或 Pydev 中打印 '\007' 或 '\a' （哔）

> ID：15003468
> 
> 赞同：1
> 
> 时间：2013-02-21T13:27:41.247
> 
> 标签：python

环境：

*   windows 7 英文 32bit
*   Python 2.7.3

我可以在 IPython 中打印哔哔声，但在 Pydev 或 IDLE 中，它不起作用。
它只打印一个无法识别的字符，但不会发出哔声。
为什么？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:22:50.990

ASCII BEL 字符仅在支持铃声的情况下才会发出铃声。许多终端和终端仿真器确实为 BEL 字符赋予了这种特殊含义，但正如您所注意到的，IDLE 和 Pydev 没有。它不一定是错误，而仅仅是缺少的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T02:24:56.380

它不会发出哔哔声，因为由终端`\a`为您解释，IDLE 和 Pydev 不会将其解释为听觉哔哔声。

如果您只想发出哔声，请查看[`winsound`](http://docs.python.org/2/library/winsound.html)标准库模块。如果你想让 IDLE 或 Pydev 将 BEL 解释为哔哔声，你可能不走运。

# java - java中的访问器

> ID：15003469
> 
> 赞同：4
> 
> 时间：2013-02-21T13:27:43.090
> 
> 标签：java

我想知道为什么在 java 中使用 getter 和 setter 方法。如果您可以通过 getter 和 setter 读取或修改私有字段的值，为什么不直接将它们更改为 public？我知道 getter 和 setter 必须是合理的，但是不能放弃它们的直接答案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T13:30:08.063

一些原因是：

*   您可以添加额外的约束和检查。例如，如果一个特定的整数属性必须在 [10..20] 范围内，您可以轻松地添加一个检查以`setter`确保该属性上没有设置其他值。
*   您可以通过提供 only 将它们设为“只读” `getter`。
*   您可以轻松地在 setter 上设置源断点，以查看修改值的时间和位置。
*   您可以轻松添加日志记录以跟踪曾经设置的值。

有关其他原因，请参阅@Aditi 提供的链接中的答案：[为什么使用 getter 和 setter？](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:35:10.093

这是将接口与实现分离 (1) 并准备更改 (2) 的方法。也许简单的例子可以提供帮助。

(1)
假设您有一个 User 类，它将 firstName 和 secondName 存储在单独的字段中。现在您可以拥有连接 fisrtName 和 secondName 的方法 getFullName 但是使用 User 类的程序员不必知道 firstName 和 secondName 是两个独立的字段。

(2)
现在您想将全名存储在用户类中的一个字段中，因此您所要做的就是在用户类中进行更改，并且您不必更改 getFullName 方法的所有调用，以防万一如果您直接使用字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T13:31:05.453

最难追踪的错误形式之一是数据项值的意外、不适当的变化。

如果数据是公开的，那么进行更改的代码可能在程序中的任何位置。

如果它是私有的，则进行更改的代码必须在同一个源文件中，通常是同一个类。很容易找到和检测所有可能更改它的代码，包括它的 setter。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T13:31:51.243

将字段设为私有以保留 Java 类中的封装是一种很好的做法。应用程序中的任何内容都不应该知道您的类的“内部”，即实现细节。他们唯一需要访问的是对象上的方法，以请求值或执行流程。

在某些情况下，您可能希望将某些内部值的访问权限授予另一个类。在这种情况下，建议通过 getter 进行，而不是直接进行。这样，当您需要更改该类的契约和/或其实现细节（如何在内部存储值）时，重构会容易得多。

此外，由于使用 getter/setter 是一种常见模式，这使您的代码更容易被外部读者或同事阅读，并且一些第三方库希望它们存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T13:32:18.337

通过使用 getter 和 setter 而不是直接访问成员变量，我们可以进行数据验证。

例如

```
public void setAge(){
  if(age < 0){
     //throw exception
  }
} 
```

# c - 使用 GCC 编译后，Uint16 的大小为 32 位

> ID：15003472
> 
> 赞同：1
> 
> 时间：2013-02-21T13:27:53.387
> 
> 标签：c, gcc

我对以下代码感到非常困惑：

```
typedef struct
{
    Uint16          first:8;   // has a size of 8 bit
    Uint16          second:8;  // has a size of 8 bit
    Uint16          third;     // has a size of 32 bit; what's wrong here?
} TSomeStruct; 
```

我预计“第三”的大小为 16 位而不是 32 位。我确信错误一定是我自己造成的。

背景：这不是我的代码库，我正在对其进行验证。因为它是为嵌入式系统和我没有的专有编译器编写的，所以我只是使用“-fdump-translation-unit”选项生成语法树并对其进行验证。但是 Uint16 在 GCC 中也应该是 16 位长，所以这不应该是问题，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:30:02.503

结构成员 a 通常填充到一个字长。

为了强制编译器打包结构，有不同的方法。我更喜欢以下内容：

```
struct __attribute__((__packed__)) packed_struct {
    unsigned char a;
    unsigned char b;
    unsigned char c;
}; 
```

在这种情况下`sizeof(packed_struct)`会给你`3`。

不幸的是，您将按程序性能为此付费。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:14:32.520

`Uint16`不是 C 中的标准类型，所以它的大小取决于它被`typedef`编辑的内容。

它可能会被`typedef`编辑，`unsigned int`因为在嵌入式平台的专有编译器中保证为 16 位。但是当使用当前用于 x86 平台的 gcc 编译时，它将成为 32 位类型。

> 有没有办法强制 gcc 使用 16 位而不是 32 位`int`？

我一个都不知道。如果您有权访问代码，则使用`short`而不是`int`很可能会起作用。如果`stdint.h`可用，`uint16_t`/`int16_t`将起作用（除非平台上没有 16 位整数类型）。

# delphi - 如果某些菜单项不适合水平放置，如何将 Chevron（双箭头）添加到 TActionMainMenuBar

> ID：15003473
> 
> 赞同：4
> 
> 时间：2013-02-21T13:27:53.687
> 
> 标签：delphi, menu, delphi-xe2, tactionmanager

![雪佛龙](../Images/de808d96a04ec1b3cc146916e87af32b.png "雪佛龙")
TActionMainMenuBar 没有这个功能。
TActionToolBar 自动添加 Chevron，但是这个菜单有一些自定义命令。

如何将此功能添加到 TActionMainMenuBar 并隐藏 Chevron 菜单中的自定义命令？
或者也许模仿这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-20T15:56:57.353

TActionToolBar 的解决方案：

将 Vcl.ActnMenus 和 Vcl.ActnCtrls 复制到您的项目源文件夹。

现在修改 ActCtrls 中的过程 TCustomToolScrollBtn.DrawArrows

```
procedure TCustomToolScrollBtn.DrawArrows;
const
  ArrowDirection: array[TAlign] of TScrollDirection = (sdDown, sdUp,
    sdDown, sdDown, sdDown, sdDown, sdDown);
var
  P: TPoint;
  TempCanvas: TCanvas;
  LDetails: TThemedElementDetails;
  LColor: TColor;
begin
  case FDirection of
    sdUp,
    sdDown : P := Point(Width div 2 - FArrowSize, 3);
    sdRight,
    sdLeft : P := Point(Width div 2 - FArrowSize div 2, 3);
  end;
  TempCanvas := TCanvas.Create;
  TempCanvas.Handle := Canvas.Handle;
  try
    if TCustomActionToolBar(Parent).HiddenCount < 1 then
     begin
       self.Enabled:=false;
       exit;
     end else self.Enabled:=true;
   if TStyleManager.IsCustomStyleActive then
    begin
      if not Enabled then
        LDetails := StyleServices.GetElementDetails(ttbButtonDisabled)
      else
      if Self.FDown then
        LDetails := StyleServices.GetElementDetails(ttbButtonPressed)
      else
      if FMouseInControl then
        LDetails := StyleServices.GetElementDetails(ttbButtonHot)
      else
        LDetails := StyleServices.GetElementDetails(ttbButtonNormal);
      if not StyleServices.GetElementColor(LDetails, ecTextColor, LColor) then
        if Enabled then
          LColor := StyleServices.GetSystemColor(clBtnText)
        else
          LColor := StyleServices.GetSystemColor(clGrayText);
      TempCanvas.Pen.Color := LColor;
    end
    else
    if Enabled then
      TempCanvas.Pen.Color := ActionBar.ColorMap.FontColor
    else
      TempCanvas.Pen.Color := ActionBar.ColorMap.DisabledFontColor;
    if Parent is TCustomActionToolBar then
      if TCustomActionToolBar(Parent).HiddenCount > 0 then
          DrawChevron(TempCanvas, sdDown, Point(Width div 2 - FArrowSize, Height div 2 - FArrowSize), FArrowSize);
  finally
    TempCanvas.Handle := 0;
    TempCanvas.Free;
  end;
end; 
```

并在 Vcl.ActnMenus 中更改过程 TCustomizeActionToolBar.DoAddCustomizeItems 只需注释代码：

```
 if Assigned(ActionBarItem) then
    begin
     {
      if AnActionClient.Items.Count > 0 then
        AddSeparator(AnActionClient.Items);
      FAddlItem := AnActionClient.Items.Add;
      FAddlItem.Caption := SAddRemoveButtons;
      AddItems(FAddlItem.Items, ActionBarItem.Items, ActionBarItem.Items.Count - 1);
      with TActionBarItem(RootMenu.ParentControl.ActionBar.ActionClient) do  AddItems(FAddlItem.Items, Items, Items.Count - 2);
      }
      if ActionBarItem.Items.Count > 0 then
      begin
       {
        FResetAction := TCustomAction.Create(Self);
        with FResetAction do
          Caption := SResetActionToolbar;
        if FAddlItem.Items.Count > 0 then
          AddSeparator(AnActionClient.Items);
        FResetItem := AnActionClient.Items.Add;
        with FResetItem do
        begin
          Action := FResetAction;
          UsageCount := -1;
        end;
        }
      end;
    end;
  end; 
```

如果某些元素被隐藏，现在雪佛龙是可见的，并且在其菜单中没有用于自定义的工具。

# windows-runtime - 如何在 WinRT 自定义控件上声明事件

> ID：15003474
> 
> 赞同：0
> 
> 时间：2013-02-21T13:27:57.423
> 
> 标签：windows-runtime, windows-store-apps

我正在试验的 WinRT 应用程序中有一个自定义控件。

我这样声明它，它按预期工作：

```
public event RoutedEventHandler AdvertMoreInfoButton_Clicked; 
```

CodeAnalysis 抱怨我需要正确声明它，今天早上我已经用谷歌搜索了很长时间，但找不到任何让 Code analysis 满意的解决方案。

什么 codeAnalysis 说：

CA1009 正确声明事件处理程序 将“MyApplication.MyCustomEventHandler”的第二个参数声明为 EventArgs，或扩展 EventArgs 的类型的实例，名为“e”。

# android - Facebook 中的问题 为我的 Android 应用安装广告

> ID：15003477
> 
> 赞同：1
> 
> 时间：2013-02-21T13:28:03.510
> 
> 标签：android, facebook, facebook-ads-api

我正在尝试为我的 android 应用程序安装 Facebook 广告。

遵循[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)中解释的指南。我还从[https://github.com/facebook/facebook-android-sdk/archive/sdk-version-3.0.1.b.zip下载了 Facebook-android-sdk](https://github.com/facebook/facebook-android-sdk/archive/sdk-version-3.0.1.b.zip)

如上述指南中所述，对于此集成，我必须在所有活动的**onResume()中编写以下代码：**

```
com.facebook.Settings.publishInstallAsync(this, MY_FACEBOOK_APP_ID); 
```

对于上述集成，我需要 Facebook SDK jar。所以我已将上述项目（Facebook-android-sdk）导入到我的 Eclipse IDE 中，并将其导出为 jar 文件。我已将此新 jar 添加到我的 libs 目录中，该目录也包含在我的 android 应用程序的 Java 构建路径（库）中。

完成上述步骤后，当我尝试调试或运行我的应用程序时，我在控制台中收到以下错误：

```
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx 
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Lcom/facebook/android/AsyncFacebookRunner$1;
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.dx.command.dexer.Main.processClass(Main.java:486)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.dx.command.dexer.Main.access$400(Main.java:67)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.dx.command.dexer.Main.processOne(Main.java:418)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.dx.command.dexer.Main.run(Main.java:206)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at java.lang.reflect.Method.invoke(Method.java:597)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:703)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:577)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.core.internal.resources.Project.build(Project.java:124)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1251)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx     at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Dx 1 error; aborting
[2013-02-21 18:35:09 - com.org.product.view.welcome.WelcomeView] Conversion to Dalvik format failed with error 1 
```

我对上述错误无能为力，我无法调试/运行我的应用程序。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:09:59.953

这是由于 android-support-v4.jar 和我的新 facebook-android-sdk 中的重复依赖问题。

I have created a new jar from the facebook-android-sdk (which uses only the necessary items needed for me) and that fixed.

Thank You.

# python - 如何在 views.py 中使用 get() 获取整数值？

> ID：15003480
> 
> 赞同：0
> 
> 时间：2013-02-21T13:28:08.500
> 
> 标签：python, django

我试图在我的views.py 中创建一个对象，它是models.py 中的一个整数。通常我们在 models.py 对象中有列表，但在这种情况下它只是一个数字。

```
def answer(request, level_id):
    o = Level.objects.get(id=level_id)
    correct = o.answers.filter(value__iexact=guess).exists() <--- working boolean function
    points = o.points.get('points')
    values = { 'score':points }
    return render_to_response('game.html', values) 
```

这给了我们一个错误：

> Int 没有属性 get。

我们正在尝试创建 points 变量来包含我们的 models.py 中的点数：

```
class Level(models.Model):
    points = models.IntegerField("Point Value",default=1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:33:33.020

一旦你有了你的 Level 对象，你就可以调用`o.points`来获取 points 属性的值，你不需要调用`o.points.get('points')`.

与`o.points`整数一样，您会看到此错误，因为整数没有`.get`方法。

# mysql - 当我尝试加入两个表时，Mysql 抛出“on 子句中的未知列 column_name”错误。

> ID：15003481
> 
> 赞同：0
> 
> 时间：2013-02-21T13:28:09.923
> 
> 标签：mysql

我试图从两张桌子下面显示价格低廉的不同酒店房间（低价房间的酒店，无需显示该酒店的其他房间）。但我收到错误“on 子句中的未知列 column_name”。请检查我的查询

```
 SELECT  r.*,h.*
    FROM hotels_temp h,rooms_temp r
    INNER JOIN
    (
      SELECT 
        hotel_code,MIN(amount) mincost
      FROM 
        rooms_temp 
      GROUP BY hotel_code
    ) m ON r.amount = m.mincost and h.hotel_code=r.hotel_code 
    ORDER BY r.amount
    LIMIT 30 
```

**表名：** hotels_temp

![在此处输入图像描述](../Images/4fc983096ce9729d6de9a56da42fcd1a.png)

表名：rooms_temp

![在此处输入图像描述](../Images/0037a218916428d82af4a398fbdd4bab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:48:08.447

我可以通过以下查询自己解决这个问题。

```
 SELECT * FROM hotels_temp
    INNER JOIN
    (
        SELECT  r.amount,r.hotel_code FROM rooms_temp r
        INNER JOIN
        (
            SELECT hotel_code,amount, MIN(amount) mincost FROM rooms_temp  GROUP BY hotel_code
        ) m ON 
        r.amount = m.mincost GROUP BY r.hotel_code
    ) ht ON 
    ht.hotel_code=hotels_temp.hotel_code LIMIT 0,30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:02:51.173

根据亩假设，您需要成本较低的房间，每家酒店最多一间客房。然后你实现如下，

```
SELECT DISTINCT r.id, r.*,h.*
FROM rooms_temp r LEFT JOIN hotels_temp h ON h.hotel_code = r.hotel_code
ORDER BY r.amount DESC LIMIT 0,30 
```

在这里我假设 r.id 是房间的唯一 ID。

# wpf - WPF 自定义窗口和最大化大小

> ID：15003484
> 
> 赞同：2
> 
> 时间：2013-02-21T13:28:16.210
> 
> 标签：wpf, winapi, window, maximize

我正在开发一个完全自定义的窗口控件并处理它的最大化，我已经覆盖了 WindowProc 函数并自己处理 WM_GETMINMAXINFO 消息。

我填充 MINMAXINFO 结构并将其发送到窗口句柄，然后就完成了。

它适用于我的主显示器，但在我的第二台显示器上，窗口太大..

我不明白的是，我在第二台显示器上最大化时发送的 MINMAXINFO 结构具有正确的尺寸信息（1920x1080），但是一旦最大化，窗口的尺寸就会以 2160x1100 结束。

有人知道发生了什么吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:40:29.347

@Karnalta - 不久前我正在做类似的事情。看看我的[一篇旧博](http://codekong.wordpress.com/2010/11/10/custom-window-style-and-accounting-for-the-taskbar/)文。我在上面链接的可下载示例中考虑了任务栏和任务栏的自动隐藏。我的两台显示器尺寸相同，所以它似乎对我来说很完美，但请试一试。以下是您可能最感兴趣的两种方法。

```
private static void WmGetMinMaxInfo(IntPtr hwnd, IntPtr lParam)
{
    MINMAXINFO mmi = (MINMAXINFO)Marshal.PtrToStructure(lParam, typeof(MINMAXINFO));
    IntPtr monitorContainingApplication = MonitorFromWindow(hwnd, MONITOR_DEFAULTTONEAREST);

    if (monitorContainingApplication != System.IntPtr.Zero)
    {
        MONITORINFO monitorInfo = new MONITORINFO();
        GetMonitorInfo(monitorContainingApplication, monitorInfo);
        RECT rcWorkArea = monitorInfo.rcWork;
        RECT rcMonitorArea = monitorInfo.rcMonitor;
        mmi.ptMaxPosition.x = Math.Abs(rcWorkArea.left - rcMonitorArea.left);
        mmi.ptMaxPosition.y = Math.Abs(rcWorkArea.top - rcMonitorArea.top);
        mmi.ptMaxSize.x = Math.Abs(rcWorkArea.right - rcWorkArea.left);
        mmi.ptMaxSize.y = Math.Abs(rcWorkArea.bottom - rcWorkArea.top);
        mmi.ptMaxTrackSize.x = mmi.ptMaxSize.x;                                                 //maximum drag X size for the window
        mmi.ptMaxTrackSize.y = mmi.ptMaxSize.y;                                                 //maximum drag Y size for the window
        mmi.ptMinTrackSize.x = 800;                                                             //minimum drag X size for the window
        mmi.ptMinTrackSize.y = 600;                                                             //minimum drag Y size for the window
        mmi = AdjustWorkingAreaForAutoHide(monitorContainingApplication, mmi);                  //need to adjust sizing if taskbar is set to autohide
    }
    Marshal.StructureToPtr(mmi, lParam, true);
}

private static MINMAXINFO AdjustWorkingAreaForAutoHide(IntPtr monitorContainingApplication, MINMAXINFO mmi)
{
    IntPtr hwnd = FindWindow("Shell_TrayWnd", null);
    if (hwnd == null) return mmi;
    IntPtr monitorWithTaskbarOnIt = MonitorFromWindow(hwnd, MONITOR_DEFAULTTONEAREST);
    if (!monitorContainingApplication.Equals(monitorWithTaskbarOnIt)) return mmi;
    APPBARDATA abd = new APPBARDATA();
    abd.cbSize = Marshal.SizeOf(abd);
    abd.hWnd = hwnd;
    SHAppBarMessage((int)ABMsg.ABM_GETTASKBARPOS, ref abd);
    int uEdge = GetEdge(abd.rc);
    bool autoHide = System.Convert.ToBoolean(SHAppBarMessage((int)ABMsg.ABM_GETSTATE, ref abd));

    if (!autoHide) return mmi;

    switch (uEdge)
    {
        case (int)ABEdge.ABE_LEFT:
            mmi.ptMaxPosition.x += 2;
            mmi.ptMaxTrackSize.x -= 2;
            mmi.ptMaxSize.x -= 2;
            break;
        case (int)ABEdge.ABE_RIGHT:
            mmi.ptMaxSize.x -= 2;
            mmi.ptMaxTrackSize.x -= 2;
            break;
        case (int)ABEdge.ABE_TOP:
            mmi.ptMaxPosition.y += 2;
            mmi.ptMaxTrackSize.y -= 2;
            mmi.ptMaxSize.y -= 2;
            break;
        case (int)ABEdge.ABE_BOTTOM:
            mmi.ptMaxSize.y -= 2;
            mmi.ptMaxTrackSize.y -= 2;
            break;
        default:
            return mmi;
    }
    return mmi;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:40:04.750

与其使用 win32 事件，不如让 WPF 自己最大化窗口（使用`WindowState = System.Windows.WindowState.Maximized;`）并修改您的窗口内容模板以适合您想要的大小可能会更容易。

例如，也许您可​​以将窗口内容封装在 Grid 中，并为此 Grid 设置边距。最后，然后将窗口的背景属性（如果有）移动到网格中，并为窗口背景设置透明颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T14:48:42.157

听起来您正在根据第二台显示器的尺寸提供尺寸。[WM_GETMINMAXINFO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632605%28v=vs.85%29.aspx)的文档指出宽度/高度是根据主监视器的大小表示的，即使窗口将以不同的分辨率显示在不同的监视器中。

# javascript - Sublime 编辑器树视图

> ID：15003487
> 
> 赞同：0
> 
> 时间：2013-02-21T13:28:23.947
> 
> 标签：javascript, python, json, sublimetext2

是否可以为任意数据 (JSON) 创建树视图作为 Sublime 编辑器的插件。我喜欢使用 javascript，并且不喜欢切换到我的 Firefox 控制台来检查对象。

是否有现有的插件/解决方案？我是否可以自己制作 - 可以轻松地在 Sublime 编辑器中显示树视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:27:12.420

我不知道树视图，但是使用 jsFormat 你可以得到一个很好的 json-object 格式，基本上是一个漂亮的打印。

如果您想更进一步，并且您的 JSON 包含很多对象，您可以随时使用代码折叠。尽管这不适用于数组（它至少会为我折叠完整的 json）。

# regex - 正则表达式网络安全

> ID：15003489
> 
> 赞同：1
> 
> 时间：2013-02-21T13:28:38.030
> 
> 标签：regex, security

我有一个成像库，它接受查询字符串参数来动态操作图像，我使用正则表达式来解析参数以确定在传递的图像上运行哪些方法。

对于我的所有其他过滤器，我有非常严格的表达式，以确保处理器只会尝试对明确的模式匹配采取行动，但对于一种方法“水印”，表达式被分解成更小的部分，因为它太大而且太乱而无法使用它是自己的，因为每个可能的匹配都是可选的。

我担心的是，`watermark=[^&]*`进行初始匹配的父 Regex 过于宽松，会让我面临 XXS 攻击。

有什么更好的方法来做到这一点？我应该硬着头皮创造一个巨大的表情还是有更好的选择？

我正在解析的示例字符串：

**yourimage?watermark=test|color-fff|size-36|style-italic|opacity-80|position-30-150|shadow-true|font-arial**

我的表达：

```
/// <summary>
/// The regular expression to search strings for.
/// </summary>
private static readonly Regex QueryRegex = new Regex(@"watermark=[^&]*",
                                                     RegexOptions.Compiled);

/// <summary>
/// The regular expression to search strings for the text attribute.
/// </summary>
private static readonly Regex TextRegex = 
                                  new Regex(@"text-[^/:?#\[\]@!$&'()*%\|,;=]+",
                                            RegexOptions.Compiled);

/// <summary>
/// The regular expression to search strings for the position attribute.
/// </summary>
private static readonly Regex PositionRegex = new Regex(@"position-\d+-\d+",
                                                        RegexOptions.Compiled);

/// <summary>
/// The regular expression to search strings for the color attribute.
/// </summary>
private static readonly Regex ColorRegex = 
                                      new Regex(@"color-([0-9a-fA-F]{3}){1,2}",
                                                RegexOptions.Compiled);

/// <summary>
/// The regular expression to search strings for the fontsize attribute.
/// </summary>
private static readonly Regex FontSizeRegex = new Regex(@"size-\d{1,3}",
                                                        RegexOptions.Compiled);

/// <summary>
/// The regular expression to search strings for the fontstyle attribute.
/// </summary>
private static readonly Regex FontStyleRegex = 
                 new Regex(@"style-(bold|italic|regular|strikeout|underline)",
                           RegexOptions.Compiled);

/// <summary>
/// The regular expression to search strings for the font family attribute.
/// </summary>
private static readonly Regex FontFamilyRegex = 
                              new Regex(@"font-[^/:?#\[\]@!$&'()*%\|,;=0-9]+",
                                        RegexOptions.Compiled);

/// <summary>
/// The regular expression to search strings for the opacity attribute.
/// </summary>
private static readonly Regex OpacityRegex = 
                                new Regex(@"opacity-(?:100|[1-9]?[0-9])",
                                          RegexOptions.Compiled);

/// <summary>
/// The regular expression to search strings for the shadow attribute.
/// </summary>
private static readonly Regex ShadowRegex = new Regex(@"shadow-true",
                                                      RegexOptions.Compiled); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:59:27.037

无论您使用一个正则表达式还是多个正则表达式都没有关系。重要的是，在以可能打开漏洞的方式使用输入之前，您要充分检查输入。只要您在以任何方式使用输入之前应用所有这些正则表达式，它就不会比一步完成所有操作更容易受到攻击。

在这种情况下，我认为多重正则表达式方法显然更胜一筹。单个正则表达式将过于复杂和混乱（特别是如果参数可以以可变顺序出现）。您的代码越清晰，您犯错误导致安全问题的可能性就越小。

我看不出你的正则表达式有什么本质上的错误，尽管我同意 Capilé 的观点，即你应该积极地陈述你想要允许的内容，而不是禁止大量特殊字符。

不过，最终的答案取决于它们在您的代码中的使用方式。

# javascript - JSON.parse：JSON 数据后出现意外的非空白字符

> ID：15003491
> 
> 赞同：1
> 
> 时间：2013-02-21T13:28:41.497
> 
> 标签：javascript, jquery, json

我正在尝试使用该`json`对象从数据库中检索数据。但是当我调用 servlet 时，Jquery 将返回`SyntaxError: JSON.parse: unexpected non-whitespace character after JSON data`此错误仅在响应包含更多数据时显示。

我的脚本是：

```
 $.ajax({
       type: "GET",
        url: "VComment",
        data:'comm='+encodeURIComponent(comm)+'&'+'data-id='+encodeURIComponent(dataid)+'&'+'data-alid='+encodeURIComponent(dataalid),
        dataType: "json",
        success: function( data, textStatus, jqXHR) 
        {
            if(data.success)
            {
                    var newcommhtml = '<div id="c0'+thecid+'" class="cnew clearfix"> <section class="c-author">';
                    newcommhtml = newcommhtml + '<h3>Anonymous</h3>';
                    newcommhtml = newcommhtml + '<span class="pubdate">'+month+' '+day+', '+year+'</span> </section>';
                    newcommhtml = newcommhtml + '<section class="c-content">';
                    newcommhtml = newcommhtml + '<img src="images/green-avatar.png" alt="avatar" width="80" height="80" class="ava">';
                    newcommhtml = newcommhtml + '<p>'+nl2br(data.commentInfo.comment)+'</p> </section></div>';

                    var thelm = "#c0"+thecid;
                    commwrap.append(newcommhtml);
                    $(thelm).hide().fadeIn('slow');

                    setTimeout(function() { $(thelm).addClass('green'); }, 800);

                    $("#comm").val("");
                    thecid++;

                    if(errorspan.html() != null) {
                        errorspan.remove();
                    }
            }

          },
     error: function(jqXHR, textStatus, errorThrown)
      {
         alert("error"+errorThrown);
         console.log("Something really bad happened " + textStatus);
      },
}); 
```

并收到回复..

```
 {"success":true,"commentInfo":{"uname":"shyam","comment":"rreter","itemId":0}}
    {"success":true,"commentInfo":{"uname":"shyam","comment":"dfdsfdd","itemId":0}}
    {"success":true,"commentInfo":{"uname":"shyam","comment":"xzdfdsfdd","itemId":0}}
    {"success":true,"commentInfo":{"uname":"shyam","comment":"sdfsd fsdfs","itemId":0}}
    {"success":true,"commentInfo":{"uname":"shyam","comment":"sdsd","itemId":0}}
    {"success":true,"commentInfo":{"uname":"shyam","comment":"dd","itemId":0}}
    {"success":true,"commentInfo":{"uname":"shyam","comment":"dddf","itemId":0}} 
```

小服务程序代码：

```
 while(rs.next()){
            Commenter comment = new Commenter();
            comment.setUname(rs.getString("uname").trim());
            comment.setComment(rs.getString("comments").trim());
            commentObj=gson.toJsonTree(comment);
            myObj.add("commentInfo", commentObj);
            out.println(myObj.toString());
            } 
```

请任何人告诉我如何解决这个问题......谢谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:31:26.847

响应中有几个独立的 JSON 对象。将它们包装在一个数组中，你会过得更好

```
[{"success":true,"commentInfo":{"uname":"shyam","comment":"rreter","itemId":0}},
{"success":true,"commentInfo":{"uname":"shyam","comment":"dfdsfdd","itemId":0}},
{"success":true,"commentInfo":{"uname":"shyam","comment":"xzdfdsfdd","itemId":0}},
{"success":true,"commentInfo":{"uname":"shyam","comment":"sdfsd fsdfs","itemId":0}},
{"success":true,"commentInfo":{"uname":"shyam","comment":"sdsd","itemId":0}},
{"success":true,"commentInfo":{"uname":"shyam","comment":"dd","itemId":0}},
{"success":true,"commentInfo":{"uname":"shyam","comment":"dddf","itemId":0}}] 
```

并将功能更改为：

```
success: function( data, textStatus, jqXHR) 
    {
       for(var i = 0,len=data.length;i<len;i += 1){
        if(data[i].success)
        {
          //code
        }
       }
    } 
```

在服务器端只需更改为

```
out.println("[");
Boolean first = true
while(rs.next()){
        Commenter comment = new Commenter();
        comment.setUname(rs.getString("uname").trim());
        comment.setComment(rs.getString("comments").trim());
        commentObj=gson.toJsonTree(comment);
        myObj.add("commentInfo", commentObj);
        if(!first){
          out.print(",");
        } else {
          first = false;
        }
        out.println(myObj.toString());
        }   
out.println("]"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:51:30.473

试试这个代码我认为它可以解决你的问题：

```
 ArrayList<JSONObject> CommArray=new ArrayList<JSONObject>();

         while(rs.next()){
            JSONObject Obj = new JSONObject();
            Obj.put("uname",rs.getString("uname").trim());     //Adds your uname to Object
            Obj.put("comment",rs.getString("comments").trim());//Adds your comment to Object
            CommArray.add(Obj);                                //Inserts your Object to ArrayList
            System.out.println(rs.getString("comments").trim());
            }    
         JSONArray arrayObj=JSONArray.fromObject(CommArray);//Converts the Array List to JSONArray
         commentObj=gson.toJsonTree(arrayObj);   //Converts the JSONArray to Jsontree
         myObj.add("commentInfo", commentObj);   //Adds the Tree to JsonObject as commentInfo Array
         out.println(myObj.toString());        //Prints the result
         rs.close();                                                              
         stmt.close();                                                            
         stmt = null;                                                             
         conn.close();                                                            
         conn = null;                                                  

     }                                                              
     catch(Exception e){} 
```

我希望这能解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:32:56.717

尝试临时更改`dataType`并发出相同的错误请求，输出响应 e 让我们看看有什么问题。

# aem - 新页面在发布环境中不可见

> ID：15003496
> 
> 赞同：2
> 
> 时间：2013-02-21T13:28:57.830
> 
> 标签：aem

我在 CQ5 的 Geometrixx 站点的“服务”菜单下创建了一个新页面。导航项在发布环境（端口 4503）中可见，但单击时，页面显示为空白页面。

我也激活了“英语”菜单、“服务”菜单和新页面。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:35:36.007

这可能有许多可能的原因。请检查以下几点：

1.  页面的模板/组件也被发布。
2.  任何开发并添加到页面的新组件也会被发布。（在`/apps/geometrixx`）
3.  如果页面需要登录，您可能首先需要在发布环境中登录 Geometrixx 站点

请检查这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:34:09.183

你能尝试比较crxde中的内容节点吗

```
http://localhost:4502/crxde 
```

新创建节点的作者和发布模式之间

# java - 为什么 SimpleDateFormat.parse().getTime() 返回不正确的（负）值？

> ID：15003498
> 
> 赞同：9
> 
> 时间：2013-02-21T13:29:02.257
> 
> 标签：java, date

我有一个字符串类型的时间戳，我正在尝试将其转换为双精度（并在几秒钟内找到结果），这就是我所做的：

```
double mytimeStamp = 0;

String timeStamp = new SimpleDateFormat(" mm ss S").format(new Date( ));   

SimpleDateFormat dateFormat = new SimpleDateFormat(" mm ss S");

try {
  mytimeStamp = ((double)dateFormat.parse(timeStamp).getTime())/1000;
} catch (ParseException e1) {
  // TODO Auto-generated catch block
  e1.printStackTrace();
}

System.out.println("timeStamp is: "+ mytimeStamp); 
```

问题是我获得了一个值`-2722.515`，我不知道为什么。

为什么是负面的？

代码有问题吗？

当我将此时间戳转换为`mm ss S`与实时不匹配时，这似乎是另一个问题！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T13:44:59.750

这是时区差异问题。

由于您只指定了分钟和秒，因此日期将打开`1 Jan 1970 00:mm:ss`（`mm`并且`ss`是当前时间的分钟和秒）。

我将您的示例简化为：

```
String timeStamp = "00 00 00";
SimpleDateFormat dateFormat = new SimpleDateFormat("HH mm ss");
double hour = dateFormat.parse(timeStamp).getTime()/1000.0/60/60;
System.out.println("hour is: "+ hour); 
```

打印出来的小时应该是`GMT`与当地时区的偏移量。

**这样做的原因是：**

`SimpleDateFormat`是区域敏感的，因此将返回为给定时区`dateFormat.parse(timeStamp)`创建对象（默认为本地时区）。`Date`然后`getTime()`从 获取毫秒数`midnight 1 Jan 1970 **GMT**`。因此，该值将被本地时区与多远的距离所抵消`GMT`。

**如何修复它：**

`dateFormat`您可以通过在调用之前设置对象的时区来修复它，`parse`如下所示：

```
dateFormat.setTimeZone(TimeZone.getTimeZone("GMT")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:56:53.353

---实际上有一个更好的方法可以做到这一点，但如果你想使用日期，请跳到预编辑答案---

日期实际上并没有按照您的意愿行事，这似乎是在实际需要从现实世界日历中挑选时间之外的时间计算。

你最好编写自己的类，以避免 Dates 为了跟上公历而必须做的所有讨厌的特殊处理。这种特殊处理包括（但不限于）时区意识、夏令时、声明的“跳过的日子”、闰秒、闰年等。

```
public TimeOnly {

   private long timestamp;
   private int millis;
   private int seconds;
   ... etc ...

   public TimeOnly(int hours, int minutes, int seconds, int millis) {
     this.timestamp = millis + seconds * 1000L + minutes * 60000L + hours * 3600000L; 
     this.millis = millis;
     this.seconds = seconds;
     ... etc ...
   }

   private TimeOnly(long timestamp) {
     this.timestamp = timestamp;
     this.millis = timestamp % 1000;
     this.seconds = timestamp % 60000L - this.millis;
     ... etc ...
   }

   public long getTimestamp() {
     return timestamp;
   }

   public int getMillis() {
     return millis;
   }

   public int getSeconds() {
     return seconds;
   }

   ... etc ...
}

public TimeFormatter {

  public TimeFormatter() {

  }

  public String format(Time time) {
    StringBuilder builder = new StringBuilder();
    builder.append(String.valueOf(time.getHours()));
    builder.append(":");
    builder.append(String.valueOf(time.getMinutes()));
    builder.append(":");
    builder.append(String.valueOf(time.getSeconds()));
    builder.append(".");
    if (time.getMillis() < 10) {
      builder.append("00");
    } else if (time.getMillis() < 100) {
      builder.append("0");
    }
    builder.append(time.getMillis());
    return builder.toString();
} 
```

这个解决方案看起来像是在重新发明轮子，但实际上它是在避免使用八角形作为轮子。Date 的行为似乎不是您想要的，尽管您可以使 Date 适用于某些有限的值范围。

如果您想变得真正花哨，可以使上述工具具有可比性，等等。但是，我建议不要这样做。不要在构造后提供更新方法，因为这会强制进行一些非常讨厌的重新计算并使代码更难维护。而是提供返回新 TimeOnlys 以响应您希望实现的操作的方法。

```
public TimeOnly addSeconds(int value) {
  int stamp = this.timestamp;
  stamp += value * 60000L;
  if (stamp < timestamp) {
    throw new Excepton("overflow");
  }
  return new TimeOnly(stamp);
} 
```

另外，不要实现你不会使用的东西。未使用的代码往往是滋生错误的沃土。

当然，所有“时间”事物的标准答案，考虑使用 JodaTime，它区分所有不同类型的时间测量。但是，对于这样一个小问题，它类似于使用坦克杀死一只蚂蚁。

---预编辑答案---

如果没有完整的时间规范（年、月、日、小时、分钟、秒、毫秒），您在第一步中格式化的时间值将有很多未指定的字段。这些领域的内容很可能是垃圾。

然后`getTime()`作用于整个`Date`对象，将有效字段和垃圾转换为一个值，其中垃圾甚至可以修改有效值（96 秒 = 1 分 36 秒，因为字段交互）。

解决此问题的最佳方法是将所有“仅时间”日期初始化为一个已知日期，因此当您进行比较和数学运算（是，`3 11 23`> `1 02 10`？）时，您会得到一致的结果（是的，`3 11 23`> `1 02 10`，因为它实际上是`2013 02 10 00 03 11 23`>`2013 02 10 00 03 11 23`而不是`2013 02 10 00 03 11 23`比较`2000 02 10 00 03 11 23`

选择使用日期时，请避开 2 月 29 日附近的日子、接近夏令时的日子等。

# asp.net-mvc - 托管在子目录中的 mvc3 应用程序的 Url.Action

> ID：15003499
> 
> 赞同：8
> 
> 时间：2013-02-21T13:29:09.467
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-areas

我已经在 web.xml 中部署了一个 mvc3 应用程序。如何在 Url.Action() 方法中添加虚拟目录名称？

例如：我的应用程序位于 mydomain.com\app

现在当我做

Url.Action 返回 action="/Home/Create" 但我想要的是 action = "/app/Home/Create"。

应该做什么 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T14:18:02.277

你不应该这样做。如果您的应用程序正确部署在 IIS 中的虚拟目录（例如`App`）中，那么`Url.Action("Create", "Home")`帮助程序将生成`/app/home/Create`正确的 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:50:47.137

映射路线（**注意**：此路线必须出现在默认路线之前）

```
 context.MapRoute(
            name: "app",
            url: "app/{controller}/{action}/{id}",
            defaults: new { controller = "Test", action = "Index", id = UrlParameter.Optional }
        ); 
```

然后像这样使用 Url.Action（应该给你 /app）：

```
@Url.Action("Index", "Test") 
```

您可以在 Global.asax.cs 文件中找到路线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T21:09:40.390

看来您要做的是创建一个区域。MVC 支持使用区域来进一步组织应用程序中的控制器和操作。

请参阅此 MSDN arcticle 了解更多信息： http: [//msdn.microsoft.com/en-us/library/ee671793 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee671793(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T07:32:00.673

最后，我使用 Url.Content("~/Home/Create") 返回整个 URL，无论是托管在主目录还是子目录上。

# ruby-on-rails - 在我的 Rails 应用程序中实现实时通知（消息）功能

> ID：15003503
> 
> 赞同：1
> 
> 时间：2013-02-21T13:29:22.903
> 
> 标签：ruby-on-rails, node.js, redis

我需要在我的 rails 应用程序中实现实时通知功能。谁能告诉我实现此功能的可能好方法是什么？

我的一位同事建议我使用 node.js 和 redis。这是继续此功能的正确方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:33:56.313

看看[私人酒吧](https://github.com/ryanb/private_pub)。这是一个使用名为[Faye](http://faye.jcoglan.com/)的发布/订阅系统的 Ruby gem 。

您在 Javascript 中设置客户端消息处理程序以侦听特定通道。然后，从 Rails 方面，您可以将消息发布到这些通道。消息在客户端“实时”有效地拾取。

它对我来说效果很好；我强烈建议任何人尝试一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:31:18.713

试试[Ajax 推送引擎](http://www.ape-project.org/)。不要为 Node.js 烦恼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:41:34.957

对于实时通知，请尝试[Pusher](http://pusher.com/)。

如果您收到任何通知，`new message`那么您可以继续在客户端设置处理程序。同样在服务器端，您可以告诉 pusher 向`notify`您想要的任何客户端发送消息，通常是发送通知的客户端。

# limit - 垃圾邮件预防（速率限制）

> ID：15003505
> 
> 赞同：0
> 
> 时间：2013-02-21T13:29:27.517
> 
> 标签：limit, spam, rate

要注册，最终用户提交一个电子邮件表单，只有电子邮件表单，然后他们会收到一个“激活”链接，该链接会将他们指向一个表单，他们可以在其中填写密码和全名。

我这样做是为了防止虚假帐户，唯一的问题是，如果黑客创建一个脚本，将电子邮件表单 POST 1.000.000 次并代理每个请求的 IP 地址，该怎么办。

由于黑客可以使用代理，因此基于 IP 的速率限制不是一种选择，他们可以跳过代理。

我的应用程序使用 Amazon SES（10.000 封电子邮件花费了我 1 美元，因此在我的电子邮件表单中发送 1.000.000 个帖子，将给我 100 美元的账单）

我一直在考虑设置一个自定义的 SMTP 服务器，所以我阻止了计费，但是我该如何阻止呢？我不想在用户注册时使用验证码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:39:47.060

它不一定是验证码——有时甚至一些验证码系统产生的图像文本也可以被机器人或代理读取——你可以使用一些基于人的问题，比如简单的数学术语，或者关于几个著名国家首都的问题。您也可以将此方法用作中间页面，如果回答正确，它会将用户带到表单页面。

# oauth - 是否可以将 OAuth 与 Salesforce Cloud 连接器流操作一起使用？

> ID：15003511
> 
> 赞同：0
> 
> 时间：2013-02-21T13:29:48.767
> 
> 标签：oauth, streaming, salesforce, mule

我想使用 Salesforce 流操作订阅主题。它在文档中说它支持 oauth 并具有 accessTokenId 的属性，请参见此处：[http ://mulesoft.github.com/salesforce-connector/mule/sfdc-config-with-oauth.html#subscribe-topic](http://mulesoft.github.com/salesforce-connector/mule/sfdc-config-with-oauth.html#subscribe-topic)

但是，每当我尝试运行我的流程时，都会出现此错误：

cvc-complex-type.3.2.2：属性“accessTokenId”不允许出现在元素“sfdc:subscribe-topic”中。

在 MuleStudio 中，它说我正在使用 Salesforce v5.0 和 mule.module-sfdc-5.1.3.jar。

另外，如果这是可能的，我该如何获取 accesstokenid，因为订阅主题是消息源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:51:30.163

我也看了看这个。@Source 似乎不支持 OAuth atm。只是@Processor 的。查看 Salesforce 连接器源，该方法标记为 @OAuthProtected，并且 LongPollingTransport 设置为使用所需的 OAuth 标头。我猜如果方法是@Processor，DevKit 只会生成必填字段。请参阅： http: [//www.mulesoft.org/documentation/display/current/OAuth+Migration+Guide](http://www.mulesoft.org/documentation/display/current/OAuth+Migration+Guide)

我对连接器提出了一个问题：[https ://github.com/mulesoft/salesforce-connector/issues/55](https://github.com/mulesoft/salesforce-connector/issues/55)

至于第二个问题。是否以及何时支持或修复 OAuth。我可以看到将访问令牌动态传递给消息源的最佳方法是使用动态流模块。更多信息在这里：http: [//blogs.mulesoft.org/adding-flows-dynamically/](http://blogs.mulesoft.org/adding-flows-dynamically/)。如果失败，您将不得不自己动态地生成 = 并开始流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-05T14:41:25.427

您可以删除此令牌，但为此您需要配置 Org Salesforce：转到 setup->Security Controls->Network Access

在 Salesforce 中，我们可以选择输入配置文件的 IP 范围，这样当用户分配了该配置文件（IP 受限配置文件）并尝试登录系统时，只需要用户名和密码。

所以这种方式用户可以在没有安全令牌的情况下登录系统。为配置文件设置登录 IP 范围：

1.  转到配置文件详细信息页面。（用户可以在配置文件详细信息页面上查看“登录 IP 范围”相关列表。）
2.  转到配置文件的登录 IP 范围相关列表。
3.  单击新建按钮（输入 IP 范围）
4.  输入 IP 范围：起始 IP 地址：0.0.0.0 结束 IP 地址：255.255.255.255 这是通用 IP 范围，用户可以从任何地方访问 Salesforce 帐户。您可以根据公司政策设置开始和结束 IP 范围。

# xslt - 将样式表应用于样式表？

> ID：15003512
> 
> 赞同：2
> 
> 时间：2013-02-21T13:29:49.297
> 
> 标签：xslt

我正在编辑一个大型 Microsoft InfoPath 文档。InfoPath 在内部使用 XSLT 进行表单布局。GUI 非常繁琐，我想通过使用 XSLT 编辑内部样式表来加快这个过程。所以这里有一个有趣的 XSLT 问题：如何将一个 XSLT 样式表应用到另一个？这是一个开始：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:output method="xml" indent="yes"/>

  <xsl:strip-space elements="*"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="select">
    ...
  <xsl:template>

</xsl:stylesheet> 
```

也就是说，我复制了所有内容，但更改了 <select> 元素。在“选择”模板中，我想要一块 XSLT。但是，我*不*希望处理 XSLT。但我*确实*希望它具有 XSLT 命名空间，以便输出仍可用作样式表。

我想我可以将 XSLT 块的命名空间 URI 设置为任何值，然后将其更改为 XSLT 命名空间 URI，但这需要额外的步骤。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:35:12.740

为了将 XSLT 元素输出到结果 XML 文档，您不能按原样使用这些元素，因为正如您所说，它们将作为 XSLT 处理。但是，您可以使用元素 <xsl:element> 来输出 XSLT 元素。

例如，

```
<xsl:template match="select">
    <xsl:element name="xsl:apply-templates">
        <xsl:attribute name="select">*</xsl:attribute>
    </xsl:element>
<xsl:template> 
```

这将为每个选择元素输出，

```
<xsl:apply-templates select="*" /> 
```

您可以使用 <xsl:element> 和 <xsl:attribute> 来构建要输出的 XSLT 代码。

更新：根据您的场景，您有一个大型 XSLT 代码需要在选择模板中输出，因此使用 <xsl:element> 和 <xsl:attribute> 重写所有代码会很耗时。但是您不需要花费那么多时间，因为您可以编写一个 XSL 模板，将模板匹配 select 中的 XSLT 转换为用 <xsl:element> 和 <xsl:attribute> 编写的 XSL 代码。

以下代码将执行此操作：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:myname="http://www.myname.co.uk/def">
    <xsl:output method="xml" indent="no"/>

    <!-- Copy by default all elements which do not belong to the xsl namespace -->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*" />
        </xsl:copy>
    </xsl:template>

    <!-- Match elements which their namespace match the namespace matched with xsl -->
    <xsl:template match="xsl:*">
        <!-- Transform all the elements to xsl:element name="xsl:element" nodes -->
        <xsl:element name="xsl:element">
            <xsl:attribute name="name">
                <xsl:value-of select="name()" />
            </xsl:attribute>
            <xsl:apply-templates select="@*" mode="xsl-attr" />
            <xsl:apply-templates select="node()" />
        </xsl:element>
    </xsl:template>

    <!-- Transform all the attributes to xsl:element name="xsl:attribute" -->
    <xsl:template match="@*" mode="xsl-attr">
        <xsl:element name="xsl:attribute">
            <xsl:attribute name="name">
                <xsl:value-of select="local-name()" />
            </xsl:attribute>
            <xsl:value-of select="." />
        </xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

因此，您可以将从该转换中获得的代码复制并粘贴到与选择元素匹配的模板中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:02:08.443

这是目的`<xsl:namespace-alias>`

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
                xmlns:xslout="urn:dummy"
                exclude-result-prefixes="xslout">
  <xsl:namespace-alias stylesheet-prefix="xslout" result-prefix="xsl" />

  <xsl:output method="xml" indent="yes"/>

  <!-- ... -->

  <xsl:template match="select">
    <xslout:value-of select="{@valueXpath}" />
  <xsl:template>

</xsl:stylesheet> 
```

在这里，`xslout:`样式表中的任何元素都将成为`xsl:`输出，并且此类元素中的任何属性值模板都将由*该样式表*处理（因此在上面的 a`<select valueXpath="@foo" />`中将生成一个`<xsl:value-of select="@foo" />`作为输出）。如果要在输出中放置 AVT，则必须将大括号加倍

```
<xslout:element name="{{@elementName}}" /> 
```

如果您已经有大量`<xsl:...>`不想重写的东西，那么您可以使用不同的前缀，例如

```
<?xml version="1.0" encoding="utf-8"?>
<sty:stylesheet xmlns:sty="http://www.w3.org/1999/XSL/Transform" version="1.0"
                xmlns:xsl="urn:dummy"
                exclude-result-prefixes="xsl">
  <sty:namespace-alias stylesheet-prefix="xsl" result-prefix="sty" />

  <sty:template match="select">
    <xsl:value-of select="{@valueXpath}" />
  <sty:template> 
```

尽管关于 AVT 的注释仍然有效。

如果您只想将 XSLT 代码块`select`逐字复制到元素中（而不是根据`select`元素的内容生成它），一个可能更简单的替代方法是将 XSLT 代码放在另一个文件中并使用该`document`函数

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:output method="xml" indent="yes"/>

  <xsl:strip-space elements="*"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="select">
    <xsl:copy-of select="document('to-insert.xml')/*/node()" />
  <xsl:template>

</xsl:stylesheet> 
```

其中`to-insert.xml`包含类似的东西

```
<data xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:for-each select="*">
    <!-- ... -->
  </xsl:for-each>
</data> 
```

# azure - 已达到或超过 Topic:"TestTopic" azure service bus 的最大允许连接数

> ID：15003516
> 
> 赞同：1
> 
> 时间：2013-02-21T13:29:55.693
> 
> 标签：azure, azureservicebus

昨晚我在将我的网站部署到 Windows azure 后遇到了以下问题。我正在使用服务总线主题

## 已达到或超过主题 testTopic:Topic:testTopic2 的最大允许连接数。活动连接数：100，最大允许连接数：100..TrackingId:de48e192-e8a8-401c-aeae-731c8630fb06_H3_G3_B6,TimeStamp:2/20/2013

我有一个主题 testTopic 和 3 个订阅来做不同的工作。我没有使用 testtopic2 它的空主题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:13:58.610

此错误表明您有超过 100 个并发进程连接到该主题。每次创建 MessagingFactory 或 Topic/SubscriptionClient 时，都会连接到 Topic。如果您可以共享任何代码片段，那么我们可以确认，但看起来有一些循环可能只是创建越来越多的客户端连接（可能每条消息 1 个）？

# scheme - 对 Scheme 中 let 和 let* 的区别感到困惑

> ID：15003518
> 
> 赞同：28
> 
> 时间：2013-02-21T13:30:01.893
> 
> 标签：scheme, let

谁能简单解释一下区别？我不认为我从我咨询过的教科书/网站中理解了这个概念。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-21T15:28:56.837

**`Let`**是并行的，^(（有点；见下文）) **`let*`**是顺序的。**`Let`**翻译为

```
((lambda(a b c)  ... body ...)
  a-value
  b-value
  c-value) 
```

但**`let*`**作为

```
((lambda(a)
    ((lambda(b)
       ((lambda(c) ... body ...)
        c-value))
     b-value))
  a-value) 
```

并因此创建嵌套范围块，其中`b-value`表达式可以引用`a`，`c-value`表达式可以同时引用`b`和`a`。`a-value`属于外部范围。这也相当于

```
(let ((a a-value))
  (let ((b b-value))
    (let ((c c-value))
      ... body ... ))) 
```

还有**`letrec`**，允许递归绑定，其中所有变量和表达式属于一个共享范围并且可以相互引用（有一些与初始化有关的警告）。它相当于

```
(let ((a *undefined*) (b *undefined*) (c *undefined*))
  (set! a a-value)
  (set! b b-value)
  (set! c c-value)
  ... body ... ) 
```

（[在 Racket 中](http://docs.racket-lang.org/reference/let.html?q=letrec#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._letrec%29%29)，也可以**`letrec*`**在 Scheme 中使用，从[R6RS 开始](http://docs.racket-lang.org/r6rs/r6rs-std/r6rs-Z-H-14.html#node_idx_406)），或者

```
(let ((a *undefined*) (b *undefined*) (c *undefined*))
  (let ((_x_ a-value) (_y_ b-value) (_z_ c-value))   ; unique identifiers
    (set! a _x_)
    (set! b _y_)
    (set! c _z_)
    ... body ... )) 
```

（[在方案中](http://docs.racket-lang.org/r5rs/r5rs-std/r5rs-Z-H-7.html#%_idx_134)）。

update:`let`实际上并没有并行地评估它的值表达式，只是它们都在`let`表单出现的相同初始环境中被评估。这从基于 - 的翻译中也很清楚：首先*在相同的外部环境*`lambda`中评估每个值表达式，并收集结果值，然后才***为****每个id*创建新位置，并将值放入每个位置. 如果其中一个值表达式改变了由后续存储访问的存储（即数据，如列表或结构），我们仍然可以看到顺序性。

 **** * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-21T13:33:56.750

如果使用`let`，则不能引用出现在同一表达式中的*其他绑定。*`let`

例如，这不起作用：

```
(let ((x 10)
      (y (+ x 6))) ; error! unbound identifier: x
  y) 
```

但是如果你使用`let*`，就可以引用*以前*出现在同一个`let*`表达式中的绑定：

```
(let* ((x 10)
       (y (+ x 6))) ; works fine
  y)
=> 16 
```

这一切都[在](http://docs.racket-lang.org/reference/let.html)文档中。***

# cocoa - 将应用程序全屏显示

> ID：15003524
> 
> 赞同：1
> 
> 时间：2013-02-21T13:30:09.670
> 
> 标签：cocoa, fullscreen, nsview, nswindow

我有一个适用于 OS X 的可可应用程序，我想在其中实现全屏模式。

我知道我可以`toggleFullScreen:`在 my 上执行此操作`NSWindow`，但这只会以完全相同的布局显示窗口。

我希望能够重新排列窗口的内容，即将单个`NSView`屏幕显示为全屏并添加几个新的子视图。

这可以使用`toggleFullScreen:`吗？我喜欢应用程序如何使用这种方法简单地移动到新空间，而不是通过独占屏幕来阻止使用其他空间。

# c# - 定义和调用方法

> ID：15003525
> 
> 赞同：0
> 
> 时间：2013-02-21T13:30:16.300
> 
> 标签：c#

我是 OOP 的新手。希望有人澄清我的疑问。

如果我想调用类似的方法

```
int number = numberMethod(); 
```

方法定义应该是什么？

```
public void numberMethod(out int num)
{
    num = 3;
} 
```

或者

```
public int numberMethod()
{
    int num = 3;
    return num;
} 
```

还是两个定义都一样？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:32:26.930

不，它们不一样。你必须使用第二种形式，而不是第一种。

如果您尝试使用该方法的返回值 - 这就是您在这里所做的：

```
int number = numberMethod(); 
```

那么该方法必须有一个适当的返回类型——一个可以隐式转换为`int`. 您不能调用这样的`void`方法，并且 C# 不会将“具有`out`参数和`void`返回类型的方法”隐式视为“具有与参数类型匹配的返回类型的方法`out`”。

在具有返回类型的方法中包含参数*很少*是一个好主意。（事实上​​，使用参数相对来说很少是一个好主意，IMO。它们通常表明一个方法正在尝试做太多事情。）`out``void``out`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T13:32:00.277

第二个，

因为您正在调用如下方法，这意味着您正在调用返回值的方法

```
int number = numberMethod(); 
```

方法

```
public int numberMethod()
{
    int num = 3;
    return num;
} 
```

如果你想使用第一个而不是你需要调用它

```
int number ;
numberMethod(out number); 
```

因为你有 void 返回值并在 param 中指定

方法

```
public void numberMethod(out int num)
{
    num = 3;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T13:32:41.803

不，它们不是同一种方法，从消息的签名中非常清楚，

```
public int numberMethod()  // return as integer
{
    int num = 3;
    return num;
} 
```

是用于您需要的正确方法。

第二种方法

```
public void numberMethod(out int num)
{
    num = 3;
} 
```

也可以用但是**`You need to change the way it is invoked`**

它可以像

```
int num;
numberMethod(out num); 
```

两种方法都将具有相同的效果，即`num`具有 value `3`。

* * *

`out`方法中的参数仅在需要从`method/function`.

# javascript - 如何为页面上的图像禁用或启用所有 onClick

> ID：15003526
> 
> 赞同：11
> 
> 时间：2013-02-21T13:30:21.170
> 
> 标签：javascript, html, onclick, image

当用户单击图像时，我希望在我的功能完成之前禁用所有其他图像上的 onClicks。

我目前有禁用它们的代码：

```
var eles = document.getElementsByTagName('img');
for (var i=0; i < eles.length; i++)
   eles[i].onclick = false; 
```

但我不确定如何重新启用它们。我努力了：

```
var eles = document.getElementsByTagName('img');
for (var i=0; i < eles.length; i++)
   eles[i].onclick = true; 
```

但它不起作用。任何人都有这个问题的解决方案

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T13:34:39.767

您的解决方案不起作用，因为您使用 onClick = false 删除了 onClick。之后，您需要再次创建 onClick 事件处理程序。

这可能是您添加 onclick 事件的方式，我对其进行了更改，因此它应该可以工作。

```
<img src="image1.jpg" onclick="when_i_click();"/>
<img src="image2.jpg" onclick="when_i_click();"/> 
```

*尝试向您的 onclick 添加一个函数，如上所述。*

**您的点击功能：**

```
var when_i_click = function(){
    alert('image clicked!');
} 
```

**这就是您禁用 onclicks 的方式（您的方法）**

```
var eles = document.getElementsByTagName('img');
for (var i=0; i < eles.length; i++)
   eles[i].onclick = null; 
```

**这就是您重新启用它们的方式（将功能重新附加到 onClick ）**

```
var eles = document.getElementsByTagName('img');
for (var i=0; i < eles.length; i++)
   eles[i].onclick = when_i_click; 
```

**这是一个jquery解决方案jquery：**

尝试使用通畅的 javascript，不要在 DOM 中添加 onclick 事件处理程序。

```
<script>
(function(){
    var function_is_finished = false;
    $('img').on('click',function(event){
        if(function_is_finished) {
            //Do your stuff when someone clicks on Img
        }
    });
})();
</script> 
```

当您的功能完成后，只需设置`function_is_finished`为`true`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T13:43:20.157

一种解决方案是保存之前的 onclick 值并恢复它：

```
var disable_all = function () {
    var eles = document.getElementsByTagName('div');
    for (var i=0; i < eles.length; i++) {
      eles[i].prev_click = eles[i].onclick; // save the previous value
      eles[i].onclick = false;
    }
}

var enable_all = function() {
    var eles = document.getElementsByTagName('div');
    for (var i=0; i < eles.length; i++)
       eles[i].onclick = eles[i].prev_click;  // restore the previous value
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T13:35:13.910

onclick 它应该指向一个javascript函数。而不是 onclick 尝试。

```
eles[i].disabled="true" 
```

并在您的方法结束时返回 eles[i].disabled="false"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T13:35:20.930

通过设置`eles[i].onclick = false;`您将`onclick`事件重新分配给`false`. 设置回 true 不会将其分配回原始函数。最好在事件函数中处理取消分配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T13:41:32.327

基本上你将元素设置`onclick`为`false`and `true`。这相当于做类似的事情

```
<img src=".." onclick="false"/> 
```

然后

```
<img src=".." onclick="true"/> 
```

你应该做的是维护一些你检查的变量，看看你是否可以启动这个函数。

```
locked = false;
function yourFunction() {
    if (locked) {
        locked = true;
        //... Do what you have to do here
        locked = false;
    };
} 
```

# iphone - UITableView 单元格文本字段上的滚动视图

> ID：15003532
> 
> 赞同：0
> 
> 时间：2013-02-21T13:30:49.153
> 
> 标签：iphone, ios, objective-c

当专注于表格视图单元格中的文本框时，我想滚动视图。我想获取文本字段的 y，目前我正在按单元格检索。但我想要它，根据观点。

目前我已经硬编码了这些值。

```
CGRect aRect = self.view.frame;

aRect.size.height -= kbSize.height;
CGRect cellRect = activeField.frame;
cellRect.origin.y = 350;

if (!CGRectContainsPoint(aRect, cellRect.origin) ) {

    CGPoint scrollPoint = CGPointMake(0.0, cellRect.origin.y - kbSize.height);

    [scrollView setContentOffset:scrollPoint animated:YES];

} 
```

是否有可能根据视图获得归档高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:43:17.983

如果您使用`scrollToRowAtIndexPath`而不是滚动视图本身滚动到单元格会更好......

```
[self.tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:row inSection:0] atScrollPosition:UITableViewScrollPositionMiddle animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:30:31.460

```
CGFloat animatedDistance;
static const CGFloat KEYBOARD_ANIMATION_DURATION = 0.3;
static const CGFloat MINIMUM_SCROLL_FRACTION = 0.2;
static const CGFloat MAXIMUM_SCROLL_FRACTION = 0.8;
static const CGFloat PORTRAIT_KEYBOARD_HEIGHT = 215;
static const CGFloat LANDSCAPE_KEYBOARD_HEIGHT = 140;

- (void)textFieldDidBeginEditing:(UITextField *)textField
{

    CGRect textFieldRect = [self.view.window convertRect:textField.bounds fromView:textField];
    CGRect viewRect = [self.view.window convertRect:self.view.bounds fromView:self.view];
    CGFloat midline = textFieldRect.origin.y + 0.5 * textFieldRect.size.height;
    CGFloat numerator = midline - viewRect.origin.y - MINIMUM_SCROLL_FRACTION * viewRect.size.height;
    CGFloat denominator = (MAXIMUM_SCROLL_FRACTION - MINIMUM_SCROLL_FRACTION) * viewRect.size.height;
    CGFloat heightFraction = numerator / denominator;
    if (heightFraction < 0.0)
    {
        heightFraction = 0.0;
    }
    else if (heightFraction > 1.0)
    {
        heightFraction = 1.0;
    }
    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
    if (orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        animatedDistance = floor(PORTRAIT_KEYBOARD_HEIGHT * heightFraction);
    }
    else
    {
        animatedDistance = floor(LANDSCAPE_KEYBOARD_HEIGHT * heightFraction);
    }

    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y -= animatedDistance;
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];
    [toolbar setAlpha:1];
    [tbl setContentOffset:CGPointMake(0, [tbl contentOffset].y + 1.35*animatedDistance )];
    [UIView commitAnimations];
} 
```

# php - Yii在gridview中使用不同模型自定义ajax搜索

> ID：15003538
> 
> 赞同：1
> 
> 时间：2013-02-21T13:31:11.183
> 
> 标签：php, ajax, yii

我想为我的模型自定义 yii gridview 搜索，在 gridview 上方使用一些不属于模型但会影响搜索结果的复选框。这是关于应该由用户可以选择的标志修改的联系人搜索。我不知道如何执行 ajax 请求，以便复选框的值在模型 search() 函数中可用。

```
<?php
// print all flags
echo '<table class="flag_table"><tr>';
echo '<tr><th>Flags:</th></tr>';
foreach($flagRows as $key=>$value)
{
    echo '<td>';
    echo CHtml::tag('span', array(), "$value->flag:&nbsp;");
    echo CHtml::checkBox('flagId__'.$value->id, false, array('value'=>"$value->id"));
    echo '</td>';
}
echo '</tr></table>';

$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'contact-grid',
'dataProvider'=>$model->search(),
'filter'=>$model,
//'cssFile'=>Yii::app()->request->baseUrl.'/css/grid_view.css',
'columns'=>array(
    'firm',
    'last_name',
    'forename',
    'street',
    'city',
    'mobile_number',
    'email',
    'search_word',
    array(
        'class'=>'CButtonColumn',
    ),
),
)); ?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:50:40.317

我仍然没有完全理解这些标志，但我认为我有足够的信息可以给你一个例子。它是这样的：

在您的视图中，在复选框周围添加一个表单：

```
echo CHtml::form('','post', array('id' => 'checkbox-form')); 
echo '<table class="flag_table"><tr>';
echo '<tr><th>Flags:</th></tr>';
foreach($flagRows as $key=>$value)
{
    echo '<td>';
    echo CHtml::tag('span', array(), "$value->flag:&nbsp;");
    echo CHtml::checkBox('flagId__'.$value->id, false, array('value'=>"$value->id"));
    echo '</td>';
}
echo '</tr></table>';
echo CHtml::endForm(); 
```

在您的视图中，将其添加到您的 cgridview：

```
'beforeAjaxUpdate' => "function(id, options){
    options['data'] = getContactGridData(id);
}", 
```

在您看来，请在下面添加此 javascript：

```
Yii::app()->clientScript->registerScript('updateGrid', "

function getContactGridData(id)
{
   var inputSelector = '#'+id+' .filters input, '+'#'+id+' .filters select';
   var origData = $.param($(inputSelector));
   return $('#checkbox-form').serialize() + '&' + origData;
}

$(function(){

    $('#checkbox-form').change(function() {
        $.ajax({
            url: $(this).attr('action'),
            data: $(this).serialize(),
            type: 'get',
            success: function(data) {
               var id = 'emoticon-grid'; 
               $.fn.yiiGridView.update(id, {data: getContactGridData(id)});
            }
        }); 
        return false;
    });
});

", CClientScript::POS_END); 
```

*感谢[这个线程](http://www.yiiframework.com/forum/index.php/topic/14242-modifying-cgridviews-default-filtersearch-behaviour/)帮助我完成上述工作。

然后在您现有的控制器方法中 - 用于填充网格视图的方法 - 您需要检查是否已设置任何标志值，并相应地调整 $model->search 标准。

我没有足够的信息来确切知道如何调整 $model->search 条件，但您需要使用以下格式。下面的格式只是一个随机示例，与您的代码没有直接关系。

```
$model = new ModelName('search');
$model->unsetAttributes();  // clear any default values

if(isset($_GET['cat_id'])){
    $model->getDbCriteria()->mergeWith(array(
        'condition' => 'cat_id = :cat_id',
        'params' => array(':cat_id' => 1),
     ));
 }

 $this->render('index',array(
     'model'=>$model,
 )); 
```

您应该查看[CDbCriteria 页面](http://www.yiiframework.com/doc/api/1.1/CDbCriteria)，因为它解释了 mergeWith 并且还有其他方法，如 addInCondition() 和 addCondition() 可用于修改搜索条件。

让我知道事情的后续。

# javascript - 当按钮移动并且未触发“mouseup”时如何处理按钮单击？

> ID：15003542
> 
> 赞同：0
> 
> 时间：2013-02-21T13:31:21.550
> 
> 标签：javascript, jquery, dom

我有一个输入框和一个按钮。当用户编辑输入文本并单击按钮时，会发生以下事件：

1.  按钮 -`mousedown`
2.  输入 -`change`
3.  输入 -`focusout`
4.  按钮 - `mouseup`[不会发生]
5.  按钮 - `click`[不会发生]

[http://jsfiddle.net/W2MMb/](http://jsfiddle.net/W2MMb/)

原因：在输入`change`事件时，一个包含警告消息的 div 元素被插入到按钮上方的 DOM 中，导致按钮移动。因此，该`mouseup`事件不会发生在按钮上，也不会注册任何点击。

限制：我无法处理按钮`mouseup`或`mousedown`单独处理 - 这是第 3 方按钮和事件。

处理这种情况的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:31:21.550

处理输入`keypress`事件而不是`change`事件，但是这样做的缺点是每次用户按键时都必须运行可能很复杂的代码。它可能会受到限制等，但这似乎有点矫枉过正。

处理`mousedown`on 按钮会有点可怕，因为用户希望事情发生在`mouseup`.

# jquery - 在不裁剪的情况下缩放 iFrame/对象

> ID：15003545
> 
> 赞同：0
> 
> 时间：2013-02-21T13:31:29.873
> 
> 标签：jquery, html, css, ajax, iframe

我正在尝试将来自[http://www.transmog.net](http://www.transmog.net)的 iPhone 模拟器嵌入到我们自己的网站中。我有一个表格让用户填写 URL，然后通过移动浏览器传递并显示用户站点。

然而，嵌入式模拟器对于我们的目的来说太大了，我们希望它更小。我目前正试图通过将模拟器放在 iFrame 中并使用 CSS 进行缩放/转换，或者做同样的事情来实现这一点。

但是，如果我放大到 50%，并减小模拟器的大小，它也只显示 50% 并“裁剪”其余部分。

在这里搜索过，似乎找不到我正在寻找的答案。

任何帮助将非常感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:54:54.680

CSS 不会通过 iframe 级联（除非它们与主机页面在同一个域中，并且具有该属性）——您必须*在*`seamless`iframe中实例化您想要的任何技术，以使其对其内容生效。可悲的是，使用变形器的自定义设置这看起来是不可能的。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:00:22.913

我将给出一些指示并为每个指针添加注释。

有几个选项取决于您想在解决这个问题上投入多少资金。但话又说回来，它似乎是您[网站](http://transmog.net/iphone-simulator/)中的一个关键产品，所以我认为值得花一些时间来解决这个问题。

* * *

**第一个选项：**您创建iphone 框架的**svg版本：**

*   如果您不知道 SVG 是什么，它基本上是一个矢量图形，当您放大和缩小时不会损失质量.. 将其视为此屏幕上的文本.. 当您看到文本像素化时放大吗？）
*   您可以将 svg 包含在 div 中，并为其赋予 css 样式：`position: relative`。
*   在上面的 div 中，放置另一个 div 并将 css 样式设置为，`position:absolute`然后将其设置为相对于父 div 的左侧和顶部 x 和 y 坐标。
*   不要使用 px，而是使用 ems。当您放大/缩小时，像素的可预测性较差（放大和缩小几乎就像让您的内容显示在不同的屏幕分辨率上......但我们不要进入那个）

* * *

**第二种选择：**使用**位图**

*   与上面的类似..但不是使用 iphone 的 SVG 描述..您可以只使用位图..然后将其设置为背景并几乎使用与上述相同的技术..
*   这个解决方案的问题是当用户放大和缩小时..你会看到一些图像质量损失（我已经可以用你的..放大500％，你会看到边缘像素化（即看起来很粗糙）在边缘））。同样，如果这是我的网站，我会努力让它看起来不错。HTML5 为您提供了执行此操作的所有功能。

* * *

**明确的选择：**远离**iframe** .. 这是一个更难的选择，它的好处不适用于您的情况。*

# c# - 打开频道时出现异常

> ID：15003546
> 
> 赞同：1
> 
> 时间：2013-02-21T13:31:31.410
> 
> 标签：c#, wcf

我有 EndpointAddress 类的实例。构造函数参数是包含通过方法 IdnMapping.GetAscii(string) 传递的德语变音符号 (net.tcp://süd:8001/EmployeeService) 的地址。该方法的结果是 net.tcp://xn--sd-xka:8001/EmployeeService。EndopointAddress 类没有抛出异常。之后我想创建 DuplexChannelFactory 的实例。我有：

```
_factory = new DuplexChannelFactory<ISomeServiceClass>(new InstanceContext(callbackImplementation), binding, endpointAddress);
_channel = _factory.CreateChannel(); 
(_channel as ICommunicationObject).Open(); 
```

方法 Open() 引发异常：主机 xn--sd-xka 不存在 DNS 条目。以前有人遇到过类似的问题吗？我正在使用 .net 框架 4.0。先感谢您

# java - 如何在准备好的语句java中使用特殊字符

> ID：15003549
> 
> 赞同：1
> 
> 时间：2013-02-21T13:31:43.170
> 
> 标签：java, mysql, prepared-statement

我不是喜欢子句的频繁用户，但现在我有一个要求，我想根据它的名称获取一些文件。我试过了

```
"SELECT *  FROM FILES WHERE FILENAME LIKE "+"%"+"?"+"%"; 
```

接下来我尝试转义角色

```
 "SELECT *  FROM FILES WHERE FILENAME LIKE "+"\\%"+"?"+"\\%"; 
```

我创建准备好的语句并执行其给出错误的两种方式，

请帮助我如何使用 % ？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:33:05.440

只需这样做：

```
"SELECT *  FROM FILES WHERE FILENAME LIKE ?"; 
```

然后将参数传递为

```
"%.jpg" 
```

或者使用您想要的任何通配符。

例如

```
PreparedStatement st = connection.prepareStatement("SELECT *  FROM FILES WHERE FILENAME LIKE ?");
st.setString(1, "%.jpg");
ResultSet rs = st.executeQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:37:52.183

我同意 cowls 的回答，但我认为根据您最初的帖子，您还希望在搜索字符串后加一个百分号。

所以，像：

```
"%myfilename%" 
```

# javascript - 如何为 jQuery UI 对话框编写 qUnit 测试？

> ID：15003551
> 
> 赞同：3
> 
> 时间：2013-02-21T13:31:48.027
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog, qunit

我开始深入研究 qUnit，但遇到了一个问题，我不确定如何正确编写测试。

该函数基本上会在按下按钮时提醒 jQuery UI 对话框。这是我的 qUnit 测试：

```
test( "If Text is Type, and Control is Textbox, Check Alert if Two Values are Present",  function() {

    //Add New Row
    $('.button').click();

    equal($('#jquery_ui_id').is(':visible'), true, "Prompt is Shown" );

}); 
```

问题是测试在 qUnit 中通过，**但仅在重新加载时通过。**所以当我第一次运行测试时它总是失败，然后在我重新加载它时成功。

有谁知道这里发生了什么，或者以前遇到过这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:44:40.697

通常，当您重新加载页面时 qUnit 测试在失败和成功之间切换时，这意味着您在测试后没有正确清理并且它们相互冲突。

如果您将元素添加到 DOM 并在模块或测试中操作而不使用特殊`#qunit-fixture`元素，您应该在该模块的末尾删除它们，以便下一个可以重新开始。

有关更多信息，请参阅[保持 qUnit 测试原子性](http://qunitjs.com/cookbook/#keeping-tests-atomic)的部分。

> QUnit 将在每次测试后重置 #qunit-fixture 元素内的元素，删除任何可能存在的事件。只要您仅在此夹具中使用元素，您就不必在测试后手动清理以保持它们的原子性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-15T01:35:17.477

有同样的问题，我肯定会在元素 #qunit-fixture 下渲染我的所有 dom。在调查时，我发现**JQuery-UI 将对话框的元素直接添加到`<body>`.**

所以**解决这个问题的一种方法是在身体之前渲染#qunit-fixture。**就我而言，我在正文中有javascript脚本，这不在#qunit-fixture下。所以我需要在此之前从正文中删除脚本。

```
<html>
   <head></head>
   <div id="qunit-fixture"><!--Wrap whole body into fixture-->
       <body>
       </body>
   </div>
</html> 
```

**另一种解决方法是手动删除拆解中添加的内容。**

```
module("SomeModule",
{
    teardown: function ()
    {
        $('.ui-front').remove();//Need to be reset manually, because jquery dialog add these outside of fixture...
    }
}); 
```

为了清理添加的元素，我们使用它们都具有“ui-front”类的事实。

# php - FFMPEG 无法取帧并另存为图像

> ID：15003561
> 
> 赞同：-5
> 
> 时间：2013-02-21T13:32:19.530
> 
> 标签：php, ffmpeg

我正在尝试从视频帧中保存图像并将其保存为 jpeg。此功能适用于较小的视频文件，但如果视频超过 10 分钟，则不会保存 jpeg 图像。与之前一样出现错误。

```
public function VideoToJpeg($localVideoPath, $localOutImgPath)
{
    $Name = dirname(__FILE__) . "/ffmpeg";
    $Str = "$Name -i \"$localVideoPath\" -an -ss 00:00:03 -an -r 1 -vframes 1 -y \"$localOutImgPath\"";

    exec($Str);
} 
```

这是我从 ffmpeg 得到的错误

```
[NULL @ 0370e760] Unable to find a suitable output format for 'path'
: Invalid argument 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T06:33:43.940

您的问题尚不清楚，但我认为`$localOutImgPath`参数`$localVideoPath`传递了一些错误的值，因为错误清楚地说明了这一点：

`[NULL @ 0370e760] Unable to find a suitable output format for 'path'`

请检查一下。

有关更多示例，请参阅[FFmpeg：终极视频和音频操作工具](http://blog.superuser.com/2012/02/24/ffmpeg-the-ultimate-video-and-audio-manipulation-tool/)和 [FFmpeg 和 x264 编码指南](https://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:33:11.667

不确定这是否会有所帮助，但我已经成功使用以下 PHP 包（尽管我从未遇到过你提到的问题）：

[http://ffmpeg-php.sourceforge.net/](http://ffmpeg-php.sourceforge.net/)

另一种选择可能是更改 php 内存分配设置：

[http://drupal.org/node/207036](http://drupal.org/node/207036)

您可能没有使用 Drupal，但该页面上的大多数建议都是相关的并且涉及 PHP 本身（而不是 Drupal）。

# codeigniter - 在codeigniter codeigniter中使用ftp库检查文件夹是否存在

> ID：15003564
> 
> 赞同：0
> 
> 时间：2013-02-21T13:32:36.690
> 
> 标签：codeigniter, ftp, directory

如何使用codeigniter中的ftp库检查远程目录中是否存在文件夹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:41:30.443

使用列表命令

```
$this->ftp->list_files(); 
```

然后检查您要求的目录是否存在于数组中

# erlang - systools.make_tar 在 .ez 存档中找不到 .app 文件

> ID：15003566
> 
> 赞同：1
> 
> 时间：2013-02-21T13:32:37.320
> 
> 标签：erlang, release, erlang-shell, reltool

我正在使用`reltool`. 输出文件夹`rel/lib`包含所有应用程序及其`ebin`文件夹打包到`.ez`档案中，例如`crypto`：

```
crypto-2.2
crypto-2.2/priv/ (with some files in the priv folder)
crypto-2.2.ez
crypto-2.2.ez/crypto-2.2/ebin/crypto.app
crypto-2.2.ez/crypto-2.2/ebin/ (with some .beam files in the ebin folder) 
```

我从`erl`文件`rel`夹开始。文件夹的路径`ebin`位于代码路径中，即`code:get_path().`在其他中返回（对于`lib`文件夹中的其他应用程序也是如此）：

```
"/usr/home/g/work/project/rel/lib/crypto-2.2.ez/crypto-2.2/ebin" 
```

但是当试图调用`systools:make_tar("releases/0.1/project").`它时抱怨它找不到`.app`文件（对于发布中提到的所有应用程序）：

```
crypto: File not found: "crypto.app" 
```

我看到`.app`文件在存档中，只是`systools`由于某种原因看不到它。我尝试在使用该选项`ebin`调用时指定文件夹，但它似乎不起作用（缺少相同的错误）。还：`make_tar``path``crypto.app`

```
file:consult("/usr/home/g/work/project/rel/lib/crypto-2.2.ez/crypto-2.2/ebin/crypto.app"). 
```

给我：`{error,enotdir}`。

也许`systools`还没有处理档案？有没有其他方法可以从使用的版本创建 tar 存档`reltool`？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:29:07.903

您还可以通过将以下内容添加到 reltool.config 从 .ez 文件中排除 ebin 目录来完全避免这种情况

```
{excl_archive_filters, ["^include$","^priv$","^ebin$"]} 
```

在大多数情况下，这基本上意味着禁用大多数 .ez 文件的创建，但该版本应该仍然可以正常工作。

# c# - 执行点击原子时发生错误

> ID：15003569
> 
> 赞同：0
> 
> 时间：2013-02-21T13:32:40.367
> 
> 标签：c#, .net, selenium, webdriver, selenium-webdriver

使用 C# 和 Selenium，我正在构建一个自动化脚本，其中我尝试从下拉列表中选择某个值（在 .csv 文件中指定的值）。我得到了错误；

“**执行点击原子时发生错误**（警告：服务器未提供任何堆栈跟踪信息）”

我不知道点击原子是什么，更不用说如何修复它了......非常感谢任何帮助！

提前致谢

这是下拉列表的代码：

```
public bool isellHOSelectAdultsDroplist(string adults)
{
    writeToLog(String.Format("Selecting adults from drop list"), this.GetType().Name);
    String xpathString = HO_ADULT_SELECTION;

    if(GpoExplicitWaitXpathElement(xpathString, 3, 5))
    {
        IWebElement dropListObjects = webDriver.FindElement(By.XPath(xpathString));
        writeToLog(String.Format("DEBUG: Trying to click on appropriate number of adults..."), this.GetType().Name);
        selectValueFromAdultDropList(dropListObjects, adults);
        return true;
    }
    else
    {
        return false;
    }
} 
```

//...这是我的选择方法

```
private void selectValueFromAdultDropList(IWebElement dropListObjects, string adults)
{

    SelectElement manipulateDroplistObject = new SelectElement(dropListObjects);
    manipulateDroplistObject.SelectByValue(adults);
    String selection = manipulateDroplistObject.SelectedOption.Text;

    int numberOfElements = manipulateDroplistObject.Options.Count;
    writeToLog("Number of elements in Adult Droplist: " + numberOfElements, this.GetType().Name);
    writeToLog("Selection from adult droplist: " + selection, this.GetType().Name);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T07:10:27.940

我将回答您提出的具体问题，即“什么是点击原子？” IE 驱动程序中有相当多的功能，而该功能的实现依赖于三个支柱。

首先是IE的COM接口。这些是十多年来用于自动化 IE 各个部分的对象和方法。

第二种技术是所谓的“原生事件”。也就是说，使用操作系统级别的机制来执行用户交互，例如按键和鼠标点击。在 Windows 上，这意味着使用 Windows SendMessage API。几乎任何时候您在 IE 驱动程序中使用键盘或鼠标时，您都默认使用本机事件。

最后，IE 驱动程序功能的很大一部分是使用 JavaScript 函数实现的，这些函数由所有浏览器共享。这些功能被称为“[自动化原子](http://code.google.com/p/selenium/wiki/AutomationAtoms)”。

使用本机事件进行鼠标操作的极少数例外之一是`<option>`从元素中选择`<select>`元素。由于 IE 没有为`<option>`元素提供可发现的尺寸，IE 驱动程序被迫通过 JavaScript 模拟点击动作。这意味着使用自动化*原子*进行点击操作。在您的情况下，执行该 JavaScript 一定出错了，这被忠实地报告为“执行点击原子失败”。如果没有更多细节（包括重现问题的示例 HTML 页面），诊断问题的根本原因将非常困难。

在这一点上，我将响应更新到最新 IE 驱动程序的调用。这方面的一些代码已经过大修，至少应该可以使用更新的驱动程序从故障案例中提取更精确的错误。

# php - 如何通过 IP 地址数组而不是纬度和经度坐标在谷歌地图上标记位置

> ID：15003571
> 
> 赞同：1
> 
> 时间：2013-02-21T13:32:47.277
> 
> 标签：php, javascript, arrays, google-maps, google-maps-api-3

我知道如何使用[Google Maps API v3](https://developers.google.com/maps/documentation/javascript/tutorial)在 google map 上标记位置。如果我有一个 php/javascript 的 IP 地址数组，而不是 lat 和 lng 坐标，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:36:32.130

您需要一些方法将它们从 IP 地址转换为坐标 - StackOverflow 上有一篇帖子问[这个问题](https://stackoverflow.com/questions/2663371/longitude-and-latitude-value-from-ip-address)。

我最喜欢的是[IPInfoDB](http://ipinfodb.com/)，它免费提供服务，并且可以使用非常简单的 GET 请求返回您需要的信息：

```
http://api.ipinfodb.com/v3/ip-country/?key=<your_api_key>&ip=74.125.45.100 
```

如果您替换`ip-country`为，`ip-city`那么您将获得城市级别的精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:34:15.353

您需要一个可以将 IP 地址转换为*近似*地理坐标的 ip-geolocation 服务。查看类似[http://ip2location.com/](http://ip2location.com/)的内容，我相信它提供了付费 API 服务。我不知道是否有任何无限制的免费服务可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T20:05:09.710

我喜欢[http://www.iptolatlng.com/](http://www.iptolatlng.com/)因为它给了我直接的 JSON 并且以最简单的方式给了我想要的结果。

# razor - 为什么 Razor 看不到包含的命名空间？

> ID：15003573
> 
> 赞同：1
> 
> 时间：2013-02-21T13:32:48.607
> 
> 标签：razor, asp.net-mvc-4, namespaces, include

现在我有了下一个，它可以工作

```
@foreach (TestLogs.Repository.DatabaseModel.Platforms CurrentPlatform in     Model.ApplicationPlatforms)
    {
...
    } 
```

我想将 TestLogs.Repository.DatabaseModel 命名空间包含到 Razor 的视图中。我在视图文件夹中打开 web.config 并在那里添加行

```
<system.web.webPages.razor>
<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
<pages pageBaseType="System.Web.Mvc.WebViewPage">
  <namespaces>
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
    <add namespace="TestLogs.Repository.DatabaseModel" />
  </namespaces>
</pages> 
```

但是在那之后，下一个构造不起作用

```
 @foreach (Platforms CurrentPlatform in Model.ApplicationPlatforms)
    {
...
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:39:15.423

对不起我的愚蠢问题。它可以工作，但我的 Visual Studio 2012 没有像往常那样用青色标记类名。

[![我的 VS2012 截屏](../Images/f1ee862e24e3c18c063f41f92dce88c6.png)](https://i.stack.imgur.com/DmPQ8.jpg)
[（来源：[piccy.info](http://i.piccy.info/i7/7f90d48e82726b44d1729b812ffd4874/4-55-2142/48623818/Result.jpg)）]

# algorithm - 使用排序算法

> ID：15003574
> 
> 赞同：1
> 
> 时间：2013-02-21T13:32:49.077
> 
> 标签：algorithm, sorting

考虑数字 20 题游戏。在这个游戏中，玩家 1 想出一个介于 1 到 n 之间的数字。玩家 2 必须通过询问最少数量的真/假问题来计算出这个数字。假设没有人作弊。一世。如果 n 已知，最优策略是什么？ii. 什么是好的策略是 n 未知？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T13:36:40.290

请参考这个wiki：[二分搜索数字猜谜游戏](http://en.wikipedia.org/wiki/Binary_search_algorithm#Number_guessing_game)。

如果 n 已知，则使用二分查找算法查找，所以问的问题不超过`floor(log2(n))`.

如果 n 未知，您可以先通过重复加倍找到一个上限，然后应用二分查找。很明显，问的问题不超过`2 * floor(log2(k)) + 1`，其中 k 是未知的选定数。

# mysql - 连接属性尚未设置或为空

> ID：15003577
> 
> 赞同：0
> 
> 时间：2013-02-21T13:32:58.030
> 
> 标签：mysql, vb.net, exception, date, command

当我运行这个功能

```
 For RepeatBooking = 1 To 51
        dateConvertedDateToBook = dateDateToBook.Date
        dateDateToBook = dateDateToBook.AddDays(7)
        strDateToBook = dateConvertedDateToBook.ToString("yyyy-MM-dd")

        Try
            Dim command As MySqlCommand = New MySqlCommand
            Dim sqlQuery As String = "INSERT INTO bookings SET Date=" & "'" & strDateToBook & "',RoomID='" & strComputerRoomToBook & "',Length='" & intNewBookingLength & "',Period='" & intNewStartPeriod & "',UserID='" & intid & "'"
            Dim reader As MySqlDataReader
            SQLConnection.Open()
            command.CommandText = sqlQuery
            command.Connection = SQLConnection
            reader = command.ExecuteReader
            SQLConnection.Close()
        Catch excep As Exception
            MsgBox(excep.ToString)
        End Try

    Next 
```

在我的程序中，我收到一条错误消息“连接属性尚未设置或为空”我该如何摆脱这个？

当它到达 SQLconnection.Open() 时出现异常 我在模块顶部创建了 ServerString 和 MySQL 连接，如下所示：

```
Dim ServerString As String = "Server=localhost;User Id=root;Password=**********;Database=rooms"
Dim SQLConnection As MySqlConnection = New MySqlConnection 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:56:12.357

您正在打开一个没有其属性的连接
它应该是，

```
Dim SQLConnection As New MySqlConnection(ServerString)
SQLConnection.Open 
```

此外，您可能希望使用该`USING`功能以正确关闭连接。
您似乎只是在数据库中插入了一堆值，而没有检索任何内容，那么为什么要使用 DataReader？
你的代码应该是这样的：

```
Using SQLConnection = New MySqlConnection(ServerString)  
    SQLConnection.Open  'You should open a connection only once
    For RepeatBooking = 1 To 51
        dateConvertedDateToBook = dateDateToBook.Date
        dateDateToBook = dateDateToBook.AddDays(7)
        strDateToBook = dateConvertedDateToBook.ToString("yyyy-MM-dd")
        Try
            Dim sqlQuery As String = "INSERT INTO bookings SET " & _ 
                "Date='" & strDateToBook & "'," & _
                "RoomID='" & strComputerRoomToBook & "', " & _
                "Length='" & intNewBookingLength & "', " & _
                "Period='" & intNewStartPeriod & "', " & _
                "UserID='" & intid & "'"
            Dim command = New MySqlCommand(sqlQuery, SQLConnection)
            command.ExecuteNonQuery
        Catch excep As Exception
            MsgBox(excep.Message)
        End Try  
     Next  
End Using 
```

此外，您可能希望更改将值传递给参数的方式。这将防止 SQL 注入。

# c++ - std::move 应该放弃常量吗？

> ID：15003585
> 
> 赞同：25
> 
> 时间：2013-02-21T13:33:11.413
> 
> 标签：c++, c++11, constants, move-semantics

以下代码在 MSVC2010 上编译并运行，应该吗？

```
const std::string s = "foo";
std::string s2(std::move(s)); 
```

我明白为什么这可能不会破坏任何东西，因为如果我采用 s 的内部结构，我必须知道没有人会使用它，所以我放弃 const 并不重要。但是，编译器在 ROM 中（在嵌入式应用程序中）在哪里实现 const 对象呢？此举会变成副本吗？还是 MSVC 应该给我一个错误？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-21T13:35:26.347

我认为`std::move(T const&)`只是返回`T const &&`。这意味着，它实际上不会被移动（因为移动赋值运算符/构造函数与参数类型不匹配）。

发生的情况是，构造函数采用`T const&`匹配*`lvalue`*（*变量*typed `T const &&`），因此，移动降级为副本。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-21T13:37:27.127

这与

```
const std::string f() { return "foo"; }
std::string s2 = f(); 
```

这曾经是推荐的 C++03，并且委员会在引入右值引用时没有*破坏此代码。*它只是降级为副本。

# php - .htaccess 500 内部服务器错误

> ID：15003589
> 
> 赞同：1
> 
> 时间：2013-02-21T13:33:19.973
> 
> 标签：php, apache, .htaccess

每当我在我的 WAMP 服务器`www`文件夹中应用 .htaccess 文件时，它都会显示：

> 内部服务器错误 服务器遇到内部错误或配置错误，无法完成您的请求。请联系服务器管理员 webmaster@ [http://www.domain.com](http://www.domain.com) 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。服务器错误日志中可能提供有关此错误的更多信息

我的 .htaccess 文件是：

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /
RewriteRule ^finduser/(.*)/(.*)/$ finduser/finduserResult.php?City=$1&txtAreaRzip=$2 [L,NC] 
```

hhtpd.conf 文件：我已启用 LoadModule rewrite_module modules/mod_rewrite.so。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-31T05:33:02.563

确保您的 wamp rewrite_modue 已打开..

在 APACHE > APACHE 模块 > rewrite_module

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T05:52:13.210

试试做这个功能

```
RewriteEngine On 
Options All -Indexes
RewriteBase /directoryname/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

其他然后尝试设置 sh4040 插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:39:34.333

您需要设置以下设置：在 htaccess

```
php_flag display_errors on 
```

在 php 脚本中需要添加

```
error_reporting(-1);
ini_set('display_errors', 1); 
```

你会收到错误信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-28T05:34:37.603

请检查错误日志转到目录 cd /var/log/apache2 type ls -->enter。如果您有错误 .htaccess: Invalid comman$

比通过运行命令解决了这个问题。

```
sudo a2enmod rewrite && sudo service apache2 restart 
```

# sql-server - 自定义过程中的错误“必须声明标量变量@startdate”

> ID：15003594
> 
> 赞同：0
> 
> 时间：2013-02-21T13:33:40.777
> 
> 标签：sql-server, database, date

我有一个根据传递的标准获取数据的程序。我与@month、@year、@quater 合作得很好。

```
ALTER PROCEDURE dbo.SPReportTimeSpan
    (
    @Week int = null,
    @Month int = null,
    @Year int = null,
    @Quater int = null
    )
AS
    SET NOCOUNT ON 
    DECLARE @sql nvarchar(4000)

    If (@Week) IS NOT NULL
    BEGIN
        DECLARE @startdate Date, @enddate Date
        EXEC dbo.SPReturnStartEndDateOfSpecifiedWeek  @Week, @startdate OUTPUT, @enddate OUTPUT 
        SELECT @startdate, @enddate
    END

    SELECT @sql='SELECT
    CRMDR.Id as Id,.  
    CRMDR.Request_For_Id as Request_For_Id

    From [CRM].[dbo].[CRM_Doctor_Request] AS CRMDR

    WHERE CRMDR.Is_Deleted=0 '
    If (@Month) IS NOT NULL
        SELECT @sql=@sql + ' AND MONTH(CRMDR.Date_Created) like (@Month)  '
    If (@Year) IS NOT NULL
        SELECT @sql=@sql + ' AND YEAR(CRMDR.Date_Created) like (@Year) '
    If (@Week) IS NOT NULL
        SELECT @sql=@sql + ' AND (CRMDR.Date_Created) BETWEEN (@startdate) AND (@enddate) '
    If (@Quater) IS NOT NULL
        IF (@Quater = 1)
            SELECT @sql=@sql + ' AND MONTH(CRMDR.Date_Created) in (4,5,6) '
        IF (@Quater = 2)
            SELECT @sql=@sql + ' AND MONTH(CRMDR.Date_Created) in (7,8,9) '
        IF (@Quater = 3)
            SELECT @sql=@sql + ' AND MONTH(CRMDR.Date_Created) in (10,11,12) '
        IF (@Quater = 4)
            SELECT @sql=@sql + ' AND MONTH(CRMDR.Date_Created) in (1,2,3) '

    SELECT @sql=@sql + ' ORDER BY CRMDR.Id DESC '

    EXEC sp_executesql @sql, N'@Month int, @Year int, @Quater int', 
                   @Month, @Year, @Quater

    RETURN 
```

但是对于@week，它给出了错误。

```
Running [dbo].[SPReportTimeSpan] ( @Week = 3, @Month = <NULL>, @Year = <NULL>, @Quater = <NULL> ).

Must declare the scalar variable "@startdate".
Column1                        Column2                        
------------------------------ ------------------------------ 
2013-02-10 00:00:00.0000000    2013-02-17 00:00:00.0000000    
No rows affected.
(1 row(s) returned)
@RETURN_VALUE = 0
Finished running [dbo].[SPReportTimeSpan]. 
```

我不明白为什么它不符合周标准。如果有人有想法，请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:36:35.927

`@startdate`并且`@enddate`只能在您的`IF`声明范围内访问：

```
If (@Week) IS NOT NULL
BEGIN
    DECLARE @startdate Date, @enddate Date
    EXEC dbo.SPReturnStartEndDateOfSpecifiedWeek  @Week, @startdate OUTPUT, @enddate OUTPUT 
    SELECT @startdate, @enddate
END 
```

`IF`如果您希望在其他地方引用这些变量，请将声明移到语句之外：

```
DECLARE @startdate Date, @enddate Date
If (@Week) IS NOT NULL
BEGIN        
    EXEC dbo.SPReturnStartEndDateOfSpecifiedWeek  @Week, @startdate OUTPUT, @enddate OUTPUT 
    SELECT @startdate, @enddate
END 
```

* * *

仅供参考：您在语句之外引用这些变量的区域在`IF`这里：

```
If (@Week) IS NOT NULL
        SELECT @sql=@sql + ' AND (CRMDR.Date_Created) BETWEEN (@startdate) AND (@enddate) ' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:47:47.167

我得到了我的问题的解决方案。为了解决这个问题，我需要将日期时间值显式转换为字符类型，以便可以按预期连接查询字符串。

```
If (@Week) IS NOT NULL
        SELECT @sql=@sql + ' AND (CRMDR.Date_Created) BETWEEN ''' + convert(VARCHAR,@startdate) + ''' AND ''' +convert(VARCHAR,@enddate) + '''' 
```

或者这个（更优化）

```
SELECT @sql=@sql + ' AND (CRMDR.Date_Created BETWEEN @startdate AND @enddate)' 
```

这需要添加一些东西`sp_executesql`

```
EXEC sp_executesql @sql, N'@Month int, @Year int, @Quater int, @Week int, @startdate datetime, @enddate datetime ', 
     @Month, @Year, @Quater, @Week, @startdate, @enddate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:51:39.923

您的变量[超出范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)。

# javascript - 为什么 YouTube iframe 播放器在加载时不调用 onYouTubePlayerReady？

> ID：15003597
> 
> 赞同：4
> 
> 时间：2013-02-21T13:33:44.760
> 
> 标签：javascript, youtube-api, youtube-javascript-api

我想加载一个 YouTube 视频，然后立即静音、播放、暂停和取消静音。在这样做时，我希望向用户展示一个没有大播放按钮的视频，并且底部有控件。为了做到这一点，我有以下代码：

```
<script type="text/javascript">
function onYouTubePlayerReady(playerid)
{
    mutePlayPauseUnmute(playerid);
}
function onYouTubePlayerAPIReady(playerid)
{
    mutePlayPauseUnmute(playerid);
}
function onYouTubeIframeAPIReady(playerid)
{
    mutePlayPauseUnmute(playerid)
}
function onPlayerReady(playerid)
{
    mutePlayPauseUnmute(playerid)
}

function mutePlayPauseUnmute(playerid)
{
    var player = document.getElementById(playerid);
    player.mute();
    player.playVideo();
    player.pauseVideo();
    player.unMute();
}
</script>
<iframe id="quotedVideo1" type="text/html" width="246" height="160" src="https://www.youtube.com/embed/NWHfY_lvKIQ?modestbranding=1&rel=0&showinfo=0&autohide=1&iv_load_policy=3&theme=light&enablejsapi=1&playerapiid=quotedVideo1" frameborder="0"> <!-- Magic Comment --> </iframe> 
```

然而，经过检查，既没有`onYouTubePlayerReady`, `onYouTubePlayerAPIReady`, `onYouTubeIframeAPIReady`, `onPlayerReady`, 也没有`mutePlayPauseUnmute`被调用过。**我做错了什么？**根据[https://developers.google.com/youtube/js_api_reference#onYouTubePlayerReady](https://developers.google.com/youtube/js_api_reference#onYouTubePlayerReady)，它看起来应该可以工作，但事实并非如此。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T16:24:15.837

您在这里混淆了两个不同的播放器 API。

你想使用**iframe 播放器**吗？如果是这样，您需要查看：[https](https://developers.google.com/youtube/iframe_api_reference) ://developers.google.com/youtube/iframe_api_reference 。

`onYouTubePlayerReady`您需要定义以下方法，而不是定义: `onYouTubeIframeAPIReady`，创建您的播放器，然后分配一个`onPlayerReady`回调。

确保包含 iframe 播放器 API 的 JavaScript，以便`onYouTubeIframeAPIReady`被调用：

```
var tag = document.createElement('script');
tag.src = o.protocol + "://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); 
```

* * *

值得注意的是文档，因为您正在编写 iframe 而不是使用 JavaScript 为您执行此操作：

> 如果确实写了标签，那么在构造 YT.Player 对象时，不需要指定宽度和高度的值，这些值被指定为标签的属性，或者指定的 videoId 和 player 参数在 src URL 中。

此外，在您的 mutePlayPauseUnmute 功能中..

```
playerid.mute();
playerid.playVideo();
playerid.pauseVideo();
playerid.unMute(); 
```

您将要触发实际的方法，`player`而不是`playerid`如上所述。

# ruby-on-rails - Rails 3.1.10 中脚手架生成的视图规范中缺少部分错误

> ID：15003600
> 
> 赞同：2
> 
> 时间：2013-02-21T13:33:49.900
> 
> 标签：ruby-on-rails, rspec, partial, scaffold

我刚刚在 rails 3.1.10 中生成了一个脚手架，当我运行 rspec 时出现以下错误：

```
Failures:   1) organizations/edit.html.erb renders the edit organization form
     Failure/Error: render
     Missing partial /form with {:handlers=>[:erb, :builder, :coffee], :formats=>[:html], :locale=>[:en, :en]}. Searched in:
       * "/home/ubuntu/Documents/github/LocalSupport/app/views"
     # ./app/views/organizations/edit.html.erb:3:in `_app_views_organizations_edit_html_erb__643434798_103899540'
     # ./spec/views/organizations/edit.html.erb_spec.rb:18:in `block (2 levels) in <top (required)>'

  2) organizations/new.html.erb renders new organization form
     Failure/Error: render
     Missing partial /form with {:handlers=>[:erb, :builder, :coffee], :formats=>[:html], :locale=>[:en, :en]}. Searched in:
       * "/home/ubuntu/Documents/github/LocalSupport/app/views"
     # ./app/views/organizations/new.html.erb:3:in `_app_views_organizations_new_html_erb__277486420_91000650'
     # ./spec/views/organizations/new.html.erb_spec.rb:17:in `block (2 levels) in <top (required)>'

Finished in 0.68276 seconds 29 examples, 2 failures, 2 pending 
```

似乎规范在运行渲染时找不到部分表单。这是 rails 生成规范中的失败部分（当它到达“render”关键字时失败）：

```
require 'spec_helper'

describe "organizations/index.html.erb" do
  before(:each) do
    assign(:organizations, [
      stub_model(Organization,
        :name => "Name",
        :address => "Address",
        :postcode => "Postcode",
        :email => "Email",
        :description => "Description",
        :website => "",
        :telephone => "Telephone"
      ),
      stub_model(Organization,
        :name => "Name",
        :address => "Address",
        :postcode => "Postcode",
        :email => "Email",
        :description => "Description",
        :website => "",
        :telephone => "Telephone"
      )
    ])
  end

  it "renders a list of organizations" do
    render
    # Run the generator again with the --webrat-matchers flag if you want to use webrat matchers
    assert_select "tr>td", :text => "Name".to_s, :count => 2 
```

我在谷歌上搜索了这个，但找不到任何特定于这个脚手架的东西。我发现了这个 SO 帖子：

[Rails：在 RSpec 测试中调用“渲染”时“缺少部分”](https://stackoverflow.com/questions/4425662/rails-missing-partial-when-calling-render-in-rspec-test)

但似乎表明渲染是正确的方法，即脚手架是正确的。有任何想法吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:56:27.433

我至少找到了一个临时解决方案，即在渲染操作之前将以下内容添加到规范中：

view.lookup_context.prefixes = %w[组织应用程序]

基于此处记录的rails问题：

[https://github.com/rails/rails/issues/5213](https://github.com/rails/rails/issues/5213)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:44:20.203

文件“./app/views/organizations/edit.html”在第 3 行有一个调用，可能读到类似

渲染“form”，它可以等同于 =>“organizations/_form.html.erb”

该文件丢失....

您可以提供一个或在 edit.html(.erb/.haml) 中编辑该行

# ruby - ruby 是否需要三元运算符？

> ID：15003603
> 
> 赞同：0
> 
> 时间：2013-02-21T13:33:53.537
> 
> 标签：ruby, conditional-operator

今天做了一个小测试：

```
> false && 1 || 2
> 2
> true && 1 || 2
> 1 
```

因此，如果我们已经可以使用二元运算符，为什么还需要三元呢？

```
> false ? 1 : 2
> 2
> true ? 1 : 2
> 1 
```

因为它不仅仅是一个别名并且使解析复杂化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:39:04.580

处理您问题中的具体案例……</p>

如果`1`是不同的值，一个被评估为假的值怎么办？

一般来说：

不，您始终可以用`if/else`构造替换三元运算符。不过那样不太方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:53:53.107

在 C 等语言中需要条件运算符，因为`if`/`else`是一个*语句*，它不会计算返回值。但在 Ruby 中，*一切*都是表达式，*一切*都有返回值，没有语句。

因此，您*始终*可以将条件运算符替换为条件表达式：

```
foo = bar ? baz : qux 
```

完全等同于

```
foo = if bar then baz else qux end 
```

在 C 中，你不能写这个，你必须写

```
if bar then foo = baz else foo = aux end 
```

导致代码重复。这就是为什么您需要 C 中的条件运算符。在 Ruby 中，它是不必要的。

实际上，由于 Ruby 是一门面向对象的语言，*所有*的条件都是不必要的。您可以只使用多态性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T13:37:06.327

没有语言*需要*三元运算符。

三元运算符是一种众所周知的语言结构。IMO 人们通常期望它使用类似脚本（外观）的语言，所以它就是这样。我看不出有什么理由*不*拥有它。

# null - 在左连接中检查空值时是否可以使用 Querydsl CaseBuilder？

> ID：15003604
> 
> 赞同：2
> 
> 时间：2013-02-21T13:33:57.100
> 
> 标签：null, left-join, case, querydsl

是否可以使用`CaseBuilder`以下示例？我们正在使用带有 JPA / Hibernate 设置的 Querydsl。

```
public class Foo {
    Bar bar
}
public class Bar {}

// query:
Expression<Boolean> isNull = new CaseBuilder()
    .when(foo.bar.isNull()).then(false)
    .otherwise(true)

new JPAQuery(em)
    .from(foo)
    .leftJoin(foo.bar)
    .list(foo.name, isNull); 
```

尝试类似查询时，出现以下错误：

```
java.lang.ClassCastException: org.hibernate.hql.internal.ast.tree.ParameterNode cannot be cast to org.hibernate.hql.internal.ast.tree.SelectExpression
    at org.hibernate.hql.internal.ast.tree.CaseNode.getFirstThenNode(CaseNode.java:43)  
    at org.hibernate.hql.internal.ast.tree.CaseNode.getDataType(CaseNode.java:39)
    at org.hibernate.hql.internal.ast.tree.SelectClause.initializeExplicitSelectClause(SelectClause.java:152)
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T06:48:24.037

它在语法上是可行的，但目前 Hibernate 不支持。这是一张相关的票[https://github.com/mysema/querydsl/issues/185](https://github.com/mysema/querydsl/issues/185)

# java - java中无法解析的日期 - 从日期转换为日历

> ID：15003606
> 
> 赞同：0
> 
> 时间：2013-02-21T13:33:58.373
> 
> 标签：java, date, calendar

我需要从转换`Date(the object :insuree.getBirthDate())` 为`Calendar(the object : request_MDP.setBIRTH_DATE)`

但我得到了错误：

> 21/02/13 15:20:26 错误 [MdmInsureeService]：ServiceProxy 更新异常：'无法解析的日期：“Mon Nov 15 15:00:00 IST 1982”' 21/02/13 15:20:26 错误 [MdmInsureeService] : ServiceProxy 更新异常 (toString): 'java.text.ParseException: Unparseable date: "Mon Nov 15 15:00:00 IST 1982"

这是我的代码：

```
DateFormat formatter = new SimpleDateFormat("EEE MMM d HH:mm:ss zzz yyyy");
Date date_MDP =(Date)formatter.parse(insuree.getBirthDate().toString()); 
Calendar cal_MDP=Calendar.getInstance();
cal_MDP.setTime(date_MDP);
request_MDP.setBIRTH_DATE(cal_MDP); 
```

我怎样才能转换`Date(insuree.getBirthDate())`成`Calendar(setBIRTH_DATE)`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:47:19.503

您是否可以在具有非英语语言环境的系统上运行此代码？这样的语言环境可能无法识别示例日期中的工作日或月份（“Mon Nov 15 15:00:00 IST 1982”），因为它使用不同的名称（例如，“Tue”在德语中将是“Di”）。

将代码段中的第一行替换为

```
DateFormat formatter = 
    new SimpleDateFormat("EEE MMM d HH:mm:ss zzz yyyy", Locale.US); 
```

它将适用于您的示例日期。无论哪种方式，您都必须使用与生成这些日期字符串相同的格式**和语言环境。**也许您甚至可以说服生成器使用一些标准格式，例如[ISO 8601](http://www.w3.org/TR/NOTE-datetime)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:39:11.387

试试这个代码：

```
 SimpleDateFormat df = new SimpleDateFormat("KK:mm aa");
    Date date = df.parse("10:30 PM");
    System.out.print(date);
    Calendar cal = GregorianCalendar.getInstance();
    cal.setTimeInMillis(date.getTime());
    System.out.print(cal.getTime()); 
```

# c# - 索引超出范围异常视觉工作室

> ID：15003613
> 
> 赞同：3
> 
> 时间：2013-02-21T13:34:14.580
> 
> 标签：c#, winforms, listbox

在我的 winform 中，我试图通过传递项目的名称从数据库中获取项目的价格。用户可以在从数据库中填充项目的组合框中看到项目。当用户从组合框中选择项目并单击添加时，它将该特定项目添加到数据库中。

在用户添加商品的同时，其中一个文本框添加了价格。如果用户添加五个项目，则文本框显示五个项目价格的总和。到这里一切正常。

现在，当用户想要从列表框中删除该项目时，用户选择该项目并单击删除项目，Visual Studio 会抛出错误“索引超出范围”。

我使用相同的代码来获取 add 方法和 substract 方法的价格，但不知道为什么只有 add 方法有效而不是 substract

**添加价格的代码**

```
public int addPrice()
        {

            DataSet ds = searchforPrice(comboBox2.Text);
            int sum;
            bool success = int.TryParse(maskedTextBox10.Text, out sum);
            int price = Convert.ToInt32(ds.Tables[0].Rows[0]["Price"]);
            return sum + price;

        } 
```

**减价代码**

```
 public int subPrice()
        {

            DataSet ds = searchforPrice(listBox1.GetItemText(listBox1.SelectedItem));
            int sum;
            bool success = int.TryParse(maskedTextBox10.Text, out sum);
            int price = Convert.ToInt32(ds.Tables[0].Rows[0]["Price"]);
            return sum - price;

        } 
```

**从数据库获取价格的代码**

```
public DataSet searchforPrice(string itemName)
{
    DataSet dataSet = new DataSet();

    // Create connection object
    OleDbConnection oleConn = new OleDbConnection(connString);
    try
    {
        oleConn.Open();
        string sql = "SELECT [Price]  FROM [Product] WHERE [Product Name] ='" + itemName + "'";
        OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sql, oleConn);
        dataAdapter.Fill(dataSet, "Product");

    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.ToString());
    }
    finally
    {
        oleConn.Close();
    }
    return dataSet;
} 
```

![在此处输入图像描述](../Images/e557ec940f19d916c0f0b2d4d8bc5e87.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:37:10.320

结果集中没有表或没有行。这意味着访问第一个条目（索引 0）将不起作用，因为没有第一个条目。你得到一个`IndexOutOfRangeException`. 检查您的请求和数据源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:38:29.223

这是失败的，因为`searchForPrice`没有返回表中的任何行。因此错误

> 位置 0 处没有行。

因此，如果您更改该行以从列表框或表单上的其他位置获取值，这将返回数据，您的错误将得到修复。

真正的潜在问题是传递给`searchForPrice`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:00:49.063

提供的代码应该可以工作。

您需要检查实际数据源中的列是否与通过 ListBox 项传递的内容相匹配。在我看来，您的命名约定很可能存在差异。

如果通过 ListBox 传递的列名与数据源中的列名匹配，则以下代码应该可以工作：-

```
public int subPrice()
        {
            if (listBox1.SelectedItems.Count > 0)
            {
                string SearchString = listBox1.SelectedItem.ToString().Trim();
                DataSet ds = searchforPrice(SearchString);

                if (ds.Tables["Product"].Rows.Count > 0)
                {
                    bool success = int.TryParse(maskedTextBox10.Text, out sum);
                    int price = Convert.ToInt32(ds.Tables["Product"].Rows[0]["Price"]);
                    return sum - price;
                }                
            }

          return null;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T13:37:53.053

方法 searchforPrice 返回一个没有行的数据集。因此，Rows[0] 不存在。检查您的方法并使其适应 searchforPrice 未返回数据（未找到任何价格）的情况。

```
if (ds.Tables[0].Rows.Count != 0 
```

{ ...}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T13:44:38.783

问题是因为您的数据集返回 0 行。那是因为项目名称没有传递给 SQL 查询。您只需要对 subPrice() 函数进行细微更改，

```
public int subPrice()
        {

            DataSet ds = searchforPrice(listBox1.SelectedItem.ToString());
            int sum;
            bool success = int.TryParse(maskedTextBox10.Text, out sum);
            int price = Convert.ToInt32(ds.Tables[0].Rows[0]["Price"]);
            return sum - price;

        } 
```

# php - 如何使用更改其他选项的下拉列表创建表单，具体取决于选择

> ID：15003618
> 
> 赞同：-5
> 
> 时间：2013-02-21T13:34:21.413
> 
> 标签：php, html, cakephp

我正在尝试使用下拉列表创建表单，当您从下拉列表中选择一个元素时，该下拉列表可以动态显示不同的选项。

例如，如果您有一个国家下拉列表和另一个州下拉列表，当用户从国家下拉列表中选择美国时，州下拉列表应更改为显示美国各州。如果用户选择 Canada ，它应该在 states 下拉列表中显示 Canadian states。

我希望我的解释很清楚，很抱歉。

我需要一个针对 cakePHP 的特定解决方案，而另一个线程没有回答和解决更新版本的 CakePHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:54:36.973

将数组从 Cake 转换为 Javascript：

```
<script language="javascript">
var pdcs = new Array();

<?php foreach($districts as $d_id => $d_name):
    echo 'pdcs['.$d_id.'] = new Array();';
    echo 'pdcs['.$d_id.'][0] = new Array(';
    if(!empty($project_duty[$d_id])):
        $last_key = end(array_keys($project_duty[$d_id]));
        foreach($project_duty[$d_id] as $code_id => $code):
            if($code_id != $last_key)
            {
                echo '\''.$code.'\',';
            } else {
                if(empty($project_duty['all']))
                {
                    echo '\''.$code.'\'';
                } else {
                    echo '\''.$code.'\',';
                }
            }
        endforeach;
    endif;
    echo ');';

    echo 'pdcs['.$d_id.'][1] = new Array(';
    if(!empty($project_duty[$d_id])):
        foreach($project_duty[$d_id] as $code_id => $code):
            if($code_id != $last_key)
            {
                echo '\''.$code_id.'\',';
            } else {
                if(empty($project_duty['all']))
                {
                    echo '\''.$code_id.'\'';
                } else {
                    echo '\''.$code_id.'\',';
                }
            }
        endforeach;
    endif;
    echo ');';
endforeach;?>
</script> 
```

创建一些函数来实际更改下拉列表中的数据。这里最后的函数 changeList 将清空该框，选择我们之前创建的数组之一，然后将其填满。

```
<script language="javascript">

// This function goes through the options for the given
// drop down box and removes them in preparation for
// a new set of values

function emptyList( box ) {
    // Set each option to null thus removing it
    while ( box.options.length ) box.options[0] = null;
}

// This function assigns new drop down options to the given
// drop down box from the list of lists specified

function fillList( box, arr ) {
    // arr[0] holds the display text
    // arr[1] are the values

    for ( i = 0; i < arr[0].length; i++ ) {

        // Create a new drop down option with the
        // display text and value from arr

        option = new Option( arr[0][i], arr[1][i] );

        // Add to the end of the existing options

        box.options[box.length] = option;
    }

    // Preselect option 0

    box.selectedIndex=0;
}

// This function performs a drop down list option change by first
// emptying the existing option list and then assigning a new set

function changeList() {
    // Isolate the appropriate list by using the value
    // of the currently selected option
    box = document.getElementById('TrooperActivityDistrictWorked');
    var boxValue = box.options[box.selectedIndex].value;
    //list = lists[box.options[box.selectedIndex].value];
    pdc = pdcs[boxValue];
    // Next empty the slave list
    slave = document.getElementById('TrooperActivityProjectDuty');
    emptyList( slave );

    // Then assign the new list values

    fillList( slave, pdc );
}
</script> 
```

调用 javascript 函数的下拉菜单：

```
<?php echo $this->Form->input('district_worked', array('label' => '','options' => $districts,'title' => 'Select district daily was worked in', 'empty' => 'Please Choose a Type', 'onchange' => 'changeList()')); ?> 
```

根据所选内容更改的下拉列表：

```
<?php echo $this->Form->input('project_duty', array('label' => '','options' => '', 'empty' => '(choose one)')); ?> 
```

这只是最近的一个例子，让我知道我是否可以对此进行扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:44:38.293

一旦第一个选择被更改，您需要使用 Javascript 来更改第二个选择的内容。

一个使用 jQuery 的简单示例：

```
$(function(){
    $("select#selectOne").change(function(){
       // Load options into select two depending on value of select 1
       var currentValue = $(this).find('option:selected').val();
       // here you can decide what to load, you could use Ajax etc
       $('select#selectTwo').empty().append($("<option>something</option>");
    });
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:49:01.783

我正在尝试为 cakePHP 找到一个特定的解决方案，但我被欺负而不是得到一个好的答案。经过大量搜索，我发现这篇很棒的博客文章正好解决了我的问题。 [http://blog.jandorsman.com/2011/01/using-ajax-and-cakephp-to-dynamically-populate-select-form-fields/](http://blog.jandorsman.com/2011/01/using-ajax-and-cakephp-to-dynamically-populate-select-form-fields/)

如果您使用的是更新版本的 CakePHP。你需要使用不同的功能 JS helper

```
 $this->Js->get('#BookId')->event(
    'change',
    $this->Js->request(
        array('controller'=>'Books','action'=>'your_ajax_function'),
        array('update' => '#BooksAuthorId', 'dataExpression' => true, 'data' => '$("#BookId").serialize()')
    )
); 
```

上面的代码不会生成 javaScript 代码。它只会缓存它。您需要在视图文件的末尾执行此函数以生成代码。

```
<?php echo $this->Js->writeBuffer(); ?> 
```

# c# - 以编程方式添加子视图并使其拉伸，因此如果它是通过 XCode 添加的

> ID：15003620
> 
> 赞同：1
> 
> 时间：2013-02-21T13:34:26.273
> 
> 标签：c#, xamarin.ios

我需要将一个自定义视图放在另一个自定义视图中，并使其延伸到父视图的整个宽度。有可能以编程方式实现吗？（而不是跟踪父视图的宽度并更新它的矩形）。或者是否可以将我的自定义视图添加到 XCode 的自定义对象列表中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:49:25.083

您想要一个即使在调整大小（旋转）时也能填充父视图的子视图？

```
var childView = new UIView(parentView.Bounds) 
{ 
    AutoresizingMask = UIViewAutoresizing.FlexibleDimensions
};
parentView.Add(childView); 
```

我建议阅读框架、边界和中心。这是一个很好的概述： [UIView frame, bounds and center](https://stackoverflow.com/questions/5361369/ios-programming-frame-bounds-and-center)

以及 Apple 文档：[在运行时调整视图的大小和位置](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingViews/CreatingViews.html)。

# opengl - 使用 CCRenderTexture 用纹理/颜色填充多边形

> ID：15003626
> 
> 赞同：0
> 
> 时间：2013-02-21T13:34:39.383
> 
> 标签：opengl, textures, cocos2d-x

我有一个凹多边形。我要做的第一件事是对其进行三角测量并将所有三角形点存储在顶点数组中。我正在尝试用纹理或颜色填充该多边形，但这两种解决方案都不起作用。

以下是尝试获取具有一种颜色的纹理时的代码：

```
CCTexture2D* TextureTest::textureColorWithVertices(CCPoint* vertices,
                                                  int count,
                                                  CCRect spriteRect)
{
    CCRenderTexture *renderTexture = CCRenderTexture::create(spriteRect.size.width, spriteRect.size.height);

    renderTexture->beginWithClear(1, 1, 1, 0);

    mShaderProgram->use();
    mShaderProgram->setUniformForModelViewProjectionMatrix();

    ccVertex2F* verts = new ccVertex2F[count];
    for( int i=0;i<count;i++) {
        verts[i].x = vertices[i].x + spriteRect.size.width / 2;//*CC_CONTENT_SCALE_FACTOR();
        verts[i].y = vertices[i].y + spriteRect.size.height / 2;//*CC_CONTENT_SCALE_FACTOR();
    }

    ccColor4F* colors = new ccColor4F[count];
    ccColor4F red = ccc4f(1, 0, 0, 1);
    for (int i = 0; i < count; i++)
    {
        colors[i] = red;
    }
    glDisable(GL_TEXTURE_2D);
    mShaderProgram->setUniformLocationWith4f(mColorLocation, 1.0f, 1.0f, 1.0f, 1.0f);

    glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, verts);
    glVertexAttribPointer(kCCVertexAttrib_Color, 4, GL_FLOAT, GL_FALSE, 0, colors);
    glDrawArrays(GL_TRIANGLES, 0, count);
    glEnable(GL_TEXTURE_2D);

    CC_INCREMENT_GL_DRAWS(1);
    delete[] colors;
    delete[] verts;

    renderTexture->end();

    return renderTexture->getSprite()->getTexture(); 
```

}

另一个是 256*256 的无缝纹理：

```
CCTexture2D* TextureTest::textureWithVertices(CCPoint* vertices,
                                             int count,
                                             CCTexture2D* baseTexture,
                                             CCRect spriteRect)
{    
     CCRenderTexture *renderTexture = CCRenderTexture::create(spriteRect.size.width, spriteRect.size.height);

     renderTexture->beginWithClear(1, 1, 1, 0);

     mShaderProgram->use();
     mShaderProgram->setUniformForModelViewProjectionMatrix();

     ccVertex2F* verts = new ccVertex2F[count];
     for( int i=0;i<count;i++) 
     {
         verts[i].x = vertices[i].x + spriteRect.size.width / 2;//*CC_CONTENT_SCALE_FACTOR();
         verts[i].y = vertices[i].y + spriteRect.size.height / 2;//*CC_CONTENT_SCALE_FACTOR();
     }

     ccTex2F* uvs = new ccTex2F[count];
     float baseTexturePixelsWide = baseTexture->getPixelsWide();
     float baseTexturePixelsHigh = baseTexture->getPixelsHigh();
     for( int i=0;i<count;i++) 
     {
         uvs[i].u = ((spriteRect.size.width / 2 + vertices[i].x) / baseTexturePixelsWide) * CC_CONTENT_SCALE_FACTOR();
         uvs[i].v = ((spriteRect.size.height / 2 - vertices[i].y) / baseTexturePixelsHigh) * CC_CONTENT_SCALE_FACTOR();
     }

     ccGLBindTexture2D( baseTexture->getName() );

     mShaderProgram->setUniformLocationWith4f(mColorLocation, 1.0f, 1.0f, 1.0f, 1.0f);

     glVertexAttribPointer(kCCVertexAttrib_TexCoords, 2, GL_FLOAT, GL_FALSE, 0, uvs);
     glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, verts);
     glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
     glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
     glDrawArrays(GL_TRIANGLES, 0, count);

     CC_INCREMENT_GL_DRAWS(1);
     delete[] uvs;
     delete[] verts;

     renderTexture->end();

     return renderTexture->getSprite()->getTexture();
 } 
```

最后我在这段代码中调用了这些函数，rockPolygon 就是原来的精灵：

```
 //Get the seamless square texture
    CCSpriteBatchNode* rockBatch = CCSpriteBatchNode::create("rock_small.png", kDefaultSpriteBatchCapacity);
    //Triangulate the old sprite
    vector<CCPoint> triangles = triangulateSprite(rockPolygon);

    //CCTexture2D* rockTexture = textureColorWithVertices(&triangles[0], triangles.size(), rockPolygon->getOriginalRect());
    CCTexture2D* rockTexture = textureWithVertices(&triangles[0], triangles.size(), rockBatch->getTexture(), rockPolygon->getOriginalRect());
    CCSprite* genSprite = new CCSprite();
    genSprite->initWithTexture(rockTexture);
    genSprite->setPosition(ccp(200,200));
    addChild(genSprite); //add generated sprite to main layer 
```

我检查了三角测量，它工作正常。我还删除了 renderTexture->beginWithClear(1, 1, 1, 0); 之间的所有代码 和 renderTexture->end()，将 alpha 通道设置为 1 beginWithClear(1, 1, 1, 1) 并且白色方块正确显示。所以我猜问题来自opengl调用，但我找不到问题所在。您对如何解决此问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:53:00.183

你已经在 cocos2d 2.x 上了。您对凸形的三角剖分有效。然后就可以用 CCDrawNode 绘制图形了，不需要自己写渲染代码。

# .net - X509Certificate2 使 IIS 崩溃

> ID：15003628
> 
> 赞同：27
> 
> 时间：2013-02-21T13:34:40.930
> 
> 标签：.net, certificate, x509certificate, x509certificate2

当更新我的 IIS 进程的实例时，它`X509Certificate2(string, string)`只会崩溃。没有 .Net 异常，什么都没有，除了我的事件日志中的这个

```
Faulting application name: w3wp.exe, version: 8.0.9200.16384, time stamp: 0x50108835
Faulting module name: ntdll.dll, version: 6.2.9200.16420, time stamp: 0x505ab405
Exception code: 0xc0000374
Fault offset: 0x00000000000ea485
Faulting process id: 0x102c
Faulting application start time: 0x01ce10301e250c4d
Faulting application path: c:\windows\system32\inetsrv\w3wp.exe
Faulting module path: C:\Windows\SYSTEM32\ntdll.dll
Report Id: 5e55321c-7c23-11e2-93f9-00155d8a0f17
Faulting package full name: 
```

我很震惊，不知道从哪里开始寻找。将调试器附加到进程时，我可以中断这一行，但是当跨过它时，整个事情都会崩溃。

```
_certificate = new X509Certificate2(pfxFile, pfxPassword); 
```

pfxFile 是一个有效路径，如果我更改它，我会立即得到一个正确的 .Net PathNotFound 异常。

服务器是 Windows 2012，运行 IIS8 和 .Net 4.5。

**更新**
[本文](http://connect.microsoft.com/VisualStudio/feedback/details/790360/ssl-certificates-wont-load-into-an-iis-worker-process-unless-loaduserprofile-is-enabled)描述了相同的问题，解决方案是确保 App Pool 身份启用了*LoadUserProfile 。*

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-05-21T09:46:16.493

我有一个类似的问题，也在 Windows Server 2012 上，它在使用时崩溃了 IIS

```
new X509Certificate2(fileName, keyPassword, X509KeyStorageFlags.Exportable) 
```

这已通过将构造函数更改为

```
new X509Certificate2(fileName, keyPassword, X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.PersistKeySet | X509KeyStorageFlags.Exportable) 
```

# extjs - 将参数从 deftjs 控制器传递到另一个

> ID：15003631
> 
> 赞同：0
> 
> 时间：2013-02-21T13:34:48.333
> 
> 标签：extjs, deftjs

我正在使用 Deftjs 的 ViewControllers，现在我不得不将一些变量从一个控制器传递到另一个控制器。

最好的方法是什么，因为我创建的是视图而不是控制器？

我的实际解决方案是：

在控制器 1 中：

```
var me = this;
var win = Ext.create('App.view.car.Window');
win.getController().setBrandId(me.brandId);
win.getController().setColorId(me.colorId);
win.show(); 
```

和我的汽车视图控制器：

```
Ext.define('App.controller.car.WindowController', {
    extend: 'Deft.mvc.ViewController',
    config: {
        brandId: null,
        colorId: null
    },
.... 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:16:09.883

您的问题的解决方案是这样的：

```
var win = Ext.create('App.view.car.Window' {
    controllerConfig: {
        brandId: me.brandId,
        colorId: me.colorId    
});
win.show(); 
```

**controllerConfig**是配置的一部分，它作为控制器的正常配置传递。

# html - html 和 node.js 脚本在同一个 heroku 实例上

> ID：15003632
> 
> 赞同：0
> 
> 时间：2013-02-21T13:34:54.227
> 
> 标签：html, node.js, heroku

我正在尝试使用 node.js 做一些非常简单的事情，而我现在有点卡住了。希望有人可以帮助我解决这个问题..我正在尝试一个非常简单的node.js应用程序..基本上有一个index.html文件，其中有一个名称作为参数的表单..按钮的点击调用一个JQuery脚本使用从 html 表单获取的 NAME 值对 node.js 脚本执行 POST 请求。现在，向 node.js 脚本发出 post 请求，该脚本在其默认端口上运行 HTTP 服务器。所有 node.js脚本所做的是接受参数并回复一个非常简单的响应，其中包括发送的 POST 参数。这个响应被 JQuery 捕获并使用警报提供给用户。所以我有 index.html 和 login.js 作为我的两个脚本.. 现在我使用 heroku 来托管这些文件..

[https://dl.dropbox.com/u/904687/index.html](https://dl.dropbox.com/u/904687/index.html) [https://dl.dropbox.com/u/904687/login.js](https://dl.dropbox.com/u/904687/login.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:21:14.740

一种选择是使用 Node.js Express.js 提供 html 文件，然后处理登录路由。

整个事情看起来像。

文件：package.json

```
{
  "name" : "LoginPage",
  "version" : "0.0.1",
  "dependencies" : {
    "express" : "3.x"
  },
  "main" : "index.js"
} 
```

文件：index.js

```
var express = require('express');
var app = express();

var oneDay = 86400000;

app.use(express.compress());

app.use(express.static(__dirname + '/public', { maxAge: oneDay }));

app.use(express.bodyParser());

app.listen(process.env.PORT);

app.post('/', function(req, res){
  var result = req.rawBody;
  res.send("hello there world data is " + result);
}); 
```

目录结构

```
package.json
index.js
public
  index.html 
```

# ios - Xcode调试，退出不起作用

> ID：15003643
> 
> 赞同：0
> 
> 时间：2013-02-21T13:35:19.947
> 
> 标签：ios, xcode

我在代码中只有一个断点。在调试模式下运行我的应用程序后，调试会将我导航到我的断点，然后我单击“退出”。预期结果：应用程序应继续运行。我所拥有的：它将我导航到陌生的地方

![在此处输入图像描述](../Images/37353a5d2f97fcf9c817641bfaaf97f3.png)

**更新：**如果我的应用程序中有 2 个断点，则在第一个断点之后它应该将我导航到第二个。但它仍然把我带到这个陌生的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:38:13.640

不要按步出，使用继续按钮（类似于播放按钮）。这将继续您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:40:37.693

如果您的方法是由您没有源代码的代码调用的，则会发生这种情况 - Apple 执行“跳出”，您最终会进入 Apple 的库之一。

您可以继续点击“退出”，直到您最终回到您自己的库之一——或者，如果您的代码被封装在 Apple 代码中（例如，它是从 UIKit 调用的），则可能没有属于您的封装代码。

读取 LHS 上的堆栈进行检查。

注意：LHS 上的堆栈现在*默认总是有点*不正确，Apple 添加了一个“功能”，它提供了一个“漂亮”的堆栈，缺少很多。这通常很有帮助，但如果你没有注意到它的发生，它可能会非常混乱。您需要抓住屏幕 LHS 底部的滑块并一直拖动到一侧以查看“真实”堆栈。

# android - 在 RelativeLayout 中动态添加自定义视图

> ID：15003648
> 
> 赞同：0
> 
> 时间：2013-02-21T13:35:27.967
> 
> 标签：android, android-layout, android-custom-view

我正在尝试将自定义视图从 xml 添加到 ScrollView 内的 RelativeLayout。自定义视图包含几个 TextView。我设置了 TextViews 的文本并设置了视图的宽度、高度和 topMargin 并将其添加到 relativeLayout。但我不断收到错误，我不知道为什么。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        RelativeLayout board = (RelativeLayout) findViewById(R.id.Dashboard);
        List<Data> dummyData = new InitData().getDummyData();

        for (Data data : dummyData) {
            View view = null;
            LayoutInflater inflater = LayoutInflater.from(MainActivity.this);
            view = inflater.inflate(R.layout.my_view, board);
            TextView titleTextView = (TextView) view
                    .findViewById(R.id.title_text_view);
            titleTextView.setText(data.getTitle()); //I think error occurs here

            int width = LayoutParams.MATCH_PARENT;
            int height = data.getHeight();
            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                    width, height);
            params.topMargin = data.getTopMargin();
            view.setLayoutParams(params);
        }
    } 
```

**LogCat 错误**

```
02-21 20:33:56.903: E/AndroidRuntime(3322): FATAL EXCEPTION: main
02-21 20:33:56.903: E/AndroidRuntime(3322): java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:654)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:306)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.view.View.measure(View.java:8171)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.widget.ScrollView.measureChildWithMargins(ScrollView.java:989)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.widget.ScrollView.onMeasure(ScrollView.java:286)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.view.View.measure(View.java:8171)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:578)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:362)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.view.View.measure(View.java:8171)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.view.View.measure(View.java:8171)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.view.View.measure(View.java:8171)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.view.View.measure(View.java:8171)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.os.Looper.loop(Looper.java:123)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at android.app.ActivityThread.main(ActivityThread.java:4627)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at java.lang.reflect.Method.invokeNative(Native Method)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at java.lang.reflect.Method.invoke(Method.java:521)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-21 20:33:56.903: E/AndroidRuntime(3322):     at dalvik.system.NativeStart.main(Native Method) 
```

**R.layout.my_view**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/title_text_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/data_text_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:49:17.373

看起来您使用了错误的`LayoutParams`. 请注意，LayoutParams 必须与您要添加孩子的**父视图相匹配。**因此，如果您有一个 LinearLayout 并且想要添加一个 RelativeLayout 到它，您必须使用.`LinearLayout.LayoutParams`而**不是**`RelativeLayout.LayoutParams`.

# css - 使用 css 设置原始图片宽度和高度的 50%

> ID：15003649
> 
> 赞同：5
> 
> 时间：2013-02-21T13:35:35.187
> 
> 标签：css, image, image-processing

有没有办法使用css设置原始图片宽度和高度的50%？例如我有这个代码：

```
 <img src="http://content.captive-portal.com/files/ign/movie-news/content/2b.jpg"> 
```

我没有在 html 中指定任何宽度和高度，但我希望它是原始高度和宽度的 50%。我可以使用 CSS 来做到这一点吗？

这不起作用：

```
img{width:50%; height:50%} 
```

有什么办法可以克服这个吗？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T13:44:31.650

您可以按此处所述缩放图像： [CSS 图像调整自身的百分比？](https://stackoverflow.com/questions/8397049/css-image-resize-percentage-of-itself)

```
img {-webkit-transform: scale(0.5); /* Saf3.1+, Chrome */
 -moz-transform: scale(0.5); /* FF3.5+ */
  -ms-transform: scale(0.5); /* IE9 */
   -o-transform: scale(0.5); /* Opera 10.5+ */
      transform: scale(0.5);
         /* IE6–IE9 */
         filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.9999619230641713, M12=-0.008726535498373935, M21=0.008726535498373935, M22=0.9999619230641713,SizingMethod='auto expand');}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:40:40.750

正如我在评论中所说。CSS 中的设置`width: 50%`只会将图像的宽度设置为其包含元素的 50%。

您将需要使用 JavaScript 来实现这一点。jQuery 让它变得非常简单，例如：

```
$('img').each(function() {  
    var the_width = $(this).width(),
        new_width = Math.round(the_width / 2);
    $(this).width(new_width);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-24T10:19:39.587

可以内联解决：

```
<img src="..." onload="this.width*=0.5"/> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-02T08:14:00.450

CSS... myIMG{zoom:50%;}

内联 CSS

```
    <IMG STYLE="zoom:50%;" SRC="...">

```

# c# - 如何在 C# 中比这更快地在服务器上上传文件

> ID：15003651
> 
> 赞同：-1
> 
> 时间：2013-02-21T13:35:42.910
> 
> 标签：c#

目前我正在使用以下代码，有没有更好（意味着快速）上传文件的方法，这是我的完整代码，在每次文件上传时都会调用它：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("request_uri_string");
FileStream fileStream = new FileStream("path_to_my_file",
                                FileMode.Open, FileAccess.Read); 
Stream requestStream = request.GetRequestStream(); 
byte[] buffer = new Byte[checked((uint)Math.Min(4096,
                            (int)fileStream.Length))];   
int bytesRead = 1;
while (bytesRead != 0)
{
    bytesRead = fileStream.Read(buffer, 0, buffer.Length);
    if (bytesRead > 0)
    {
        requestStream.Write(buffer, 0, bytesRead);
    }
} 
requestStream.Close();
fileStream.Close();
String responseFromServer = null;
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
if (((HttpWebResponse)response).StatusDescription.Contains("OK"))
{
   Encoding encode = System.Text.Encoding.GetEncoding(((HttpWebResponse)response).CharacterSet);
   Stream dataStream = response.GetResponseStream();
   StreamReader reader = new StreamReader(dataStream, encode);
   responseFromServer = reader.ReadToEnd();
   reader.Close();
   dataStream.Close();
}
response.Close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:38:21.797

可能不会更快，但更容易：

```
WebClient client = new WebClient();
//client.Credentials = new NetworkCredential("username", "password");
client.UploadFile(uriString,fileName); 
```

# android - 在ListView的onClick上获取嵌套项

> ID：15003652
> 
> 赞同：0
> 
> 时间：2013-02-21T13:36:01.927
> 
> 标签：android, listview

我有带有嵌套 LinearLayout 和多个 ImageViews 的 row_item.xml。它在 ListView 的每一行中生成 2 x 2 图像网格。在 onClick a 我想知道用户点击了哪个 Image 项目。

在 onClick 方法中，我尝试使用 item.getClass() 查看实际出现的项目，它显示了 LinearLayout。我确信这将是行项中的顶级布局。这是我的行项目骨架布局。我正在寻找一些通用的方法，我可以在其中获取任何深度的点击项目。

```
<LinearLayout>
       <LinearLayout>
           <ImageView> </ImageView>
           <ImageView> </ImageView>
       </LinearLayout>         

       <LinearLayout>
           <ImageView> </ImageView>
           <ImageView> </ImageView>
       </LinearLayout>         
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:52:37.340

为每个 ImageView 添加以下内容：

```
android:clickable="true"
android:onClick="myOnClickFunction" 
```

并添加如下代码：

```
public void myOnClickFunction(final View imageView) {
    // imageView.getId() - actual image view id.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:38:55.877

您可以通过在声明 listView 的 xml 中设置适当的选项来设置可点击的图像视图。然后只需将 onclickListeners 添加到您的 imageViews。对我来说有效的解决方案是设置：

```
clickable
focusable
focusableInTouchMode 
```

为**真**。如果你完成了这个，你可以在你的适配器 getView/bindView setonClickListeners 到你的 imageviews。

# objective-c - 定义自定义类的操作

> ID：15003654
> 
> 赞同：0
> 
> 时间：2013-02-21T13:36:10.983
> 
> 标签：objective-c, class, operators

我想知道如何在我创建的任何自定义类上实现标准操作。例如，取一个类`A`和这个类的三个对象 a、b 和 c。如果我写下代码`a = b + c`，编译器将无法理解。我该怎么做才能让它理解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:38:30.870

Objective-C 不提供运算符重载。

所以你不能在 Objective-C 中做到这一点。

但是你最清楚这一点，你必须这样做 `a=[b addWith:c];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:39:55.517

如果您要问的话，我们不能用这种语言重载运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:44:06.267

如果您希望确保`a`将始终等于`b+c`，我认为没有办法以这种方式定义它。但是，如果您覆盖`init`您的类的方法，并将其放入`a=b+c;`其中，然后永远不会重新分配`a`，`a`将始终 equal `b+c`，我相信这是您正在寻找的行为。

# signalr - 客户端不断重新连接

> ID：15003655
> 
> 赞同：5
> 
> 时间：2013-02-21T13:36:21.137
> 
> 标签：signalr, signalr.client

我连接到信号器集线器的 .net 应用程序不断重新连接。

这个问题只发生在某些其他公司网络上，这让我相信某些东西被阻止了。我尝试使用同一网络中的 jabbr.net 网站，但这也不起作用（在 chrome 中）。

我如何追踪/解决这个问题？

![在此处输入图像描述](../Images/9f0614ce752edf833218427d09edd56f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:58:42.543

我认为您遇到了这个问题[https://github.com/SignalR/SignalR/pull/1553](https://github.com/SignalR/SignalR/pull/1553)。我们正在努力解决这个问题。当服务器发送事件请求超时但实际的 http 请求仍在进行时，就会出现此问题。然后发生的是长轮询传输和服务器发送事件 http 请求争夺连接。

要解决此问题，您可以专门指定 LongPollingTransport。我们将在下一个版本中解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T17:33:26.460

对于您的服务器，在 web.config 的 system.diagnostics 部分添加：

```
<sharedListeners>
  <add name="SignalR" 
       type="System.Diagnostics.TextWriterTraceListener" 
       initializeData="signalr.log.txt" />
</sharedListeners> 
```

对于您的客户端（我假设是 .net C#），它的日志记录是通过 Debug.Writes 进行的。此外，我建议您连接到错误处理程序。

如果您使用 JS 客户端，您可以通过以下方式打开登录

```
// Non dynamically made connection
connection.logging = true;
// Dynamically made connection
$.connection.hub.logging = true 
```

希望这可以帮助！

# android - Android：如何阻止软键盘在其上方显示拆分操作栏？

> ID：15003656
> 
> 赞同：2
> 
> 时间：2013-02-21T13:36:26.007
> 
> 标签：android, android-actionbar, actionbarsherlock

我的应用程序使用拆分操作栏界面，因此我的菜单操作项位于屏幕底部的栏中。每当软键盘弹出时，底部操作栏也会向上移动并悬停在键盘上方。如何阻止底部栏移动，并在打开时让键盘盖住它？如果重要的话，我正在使用 actionbarsherlock。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:40:14.067

通过添加 `android:windowSoftInputMode="adjustPan"`到清单中的每个活动声明来解决这个问题。

# c++ - 为专用模板方法设置 DSO 接口

> ID：15003657
> 
> 赞同：0
> 
> 时间：2013-02-21T13:36:27.683
> 
> 标签：c++, visual-c++, shared-libraries

我有一个具有模板方法的类：

```
class DoStuffWithAnything {
public:
    template <typename T>
    void doStuff(const T&);
}; 
```

请注意，该方法没有定义，也永远不会被通用定义。编译单元将定义这些方法的实现。

在 gcc 上，我实际上没有问题，因为如果未定义符号，它将在 DSO 上搜索。

在 msvc 上我有一个问题，我如何告诉 MSVC 它应该导入定义（并且在编译 DSO 时，它应该导出定义）？

### 澄清

假设我有一个名为 XX 的库。并且`libXX`有一个`class XX`. 此外，`libXX`定义`<> doStuff(const XX&)`.

所以，`XX.hpp`

```
class XX {
    //...
}; 
```

并且，`XX.cpp`：

```
#include <XX.hpp>
#include <do_stuff_with_anything.hpp>

//...
template <>
void DoStuffWithAnything::doStuff(const XX&) {
    //...
} 
```

所以，我的`app.exe`, 会有这样的代码：

```
#include <XX.hpp>
#include <do_stuff_with_anything.hpp>

int main() {
    XX a;
    DoStuffWithAnything stuffer;
    stuffer.doStuff(a);
} 
```

`app.exe`必须知道`doStuff<XX>`是进口的。我怎么能说呢？

# magento - Magento 表费率在一定数量后禁用

> ID：15003660
> 
> 赞同：0
> 
> 时间：2013-02-21T13:36:37.997
> 
> 标签：magento

我正在使用 Magento 的表格费率。他们工作正常。

我使用“重量（及以上）”设置。

但现在我的问题是：如果订购的金额 > 10.000 美元，我想禁用表费率。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:49:55.520

您将要覆盖或子类 /app/code/core/Mage/Shipping/Model/Carrier/Tablerate.php 具体查看`collectRates()`方法，在这里您可以访问当前报价/购物车并根据价格和其他因素。

# spring - 春书：选哪一本

> ID：15003661
> 
> 赞同：0
> 
> 时间：2013-02-21T13:36:38.873
> 
> 标签：spring

它可能不是放置此查询的确切类别，但我找不到比这更好的了。我请求管理员处理此问题。

自去年以来，我一直在研究 Spring 框架。但是没有涉及概念，只是根据项目需要使用它。现在我需要尽可能多地探索它。请让我知道哪一个比较好—— 1\. Spring In Action 2\. Clarence Ho 和 Rob Haroop 的 Pro.Spring.3 3\. Spring 食谱：Gary Mak 的问题解决方法

或者还有别的书吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:50:21.853

我读了**春季食谱**，我推荐它。它清晰易懂，涵盖了我需要的一切。

我实际上是从 Spring in Action 开始的，然后转向食谱。它只是组织得更好，范围更广。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:52:40.553

也许您正在寻找对依赖注入本身的更好理解。在这种情况下，我建议您阅读 Manning 的 Dependency Injection [http://www.manning.com/prasanna/](http://www.manning.com/prasanna/)。它也使用 Spring 作为示例。

# eclipse-juno - Eclipse 中的弹出菜单被缩小

> ID：15003669
> 
> 赞同：2
> 
> 时间：2013-02-21T13:36:55.767
> 
> 标签：eclipse-juno, eclipse-plugin

我对 Eclipse Juno 中的上下文菜单有疑问。我有一个扩展课程的`ContributionItem`课程。这将创建菜单项。每个菜单项都有一个索引。但我不知道，索引包含什么值以及它应该如何表现。我想，它应该在该位置插入项目。例如，我有贡献 URI：

```
popup:org.eclipse.jdt.ui.PackageExplorer?before=common.new.menu 
```

然后是我的`fill(Menu menu, int index)`方法以 0 作为索引调用，因为`common.new.menu`是第一项。但总是**新**菜单项（这是弹出菜单中的第一个）消失，当我第二次右键单击时，弹出菜单会缩小并且只包含分隔符和几个项目（包括我的项目） . 我完全迷路了...

注意：当一个资源被点击时，该`fill()`方法总是被调用两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:17:43.997

赫里卡！谷歌搜索了很长时间，我找到了它。`isDynamic()`有人在一次讨论中指出，重写类中定义的方法也很重要`ContributionItem`。默认实现总是返回 false。在 Indigo 中，这通常无关紧要，但 Juno 更严格一些。在自己的贡献项中需要重写该`isDynamic()`方法以使其始终返回 true。

# python - 为什么容器没有通过引用传递给我的工作函数？

> ID：15003684
> 
> 赞同：0
> 
> 时间：2013-02-21T13:37:59.477
> 
> 标签：python, multithreading, threadpool, pass-by-reference

我的印象是python通过引用传递对象，所以在逻辑上（我认为），将字典传递给线程的工作函数将允许我设置新的键值对，这些键值对将在工作函数返回后保留。不幸的是，好像我错了！

事不宜迟，下面是一个测试用例：

```
from Queue import Queue
from threading import Thread

def work_fn(dictionary, dfield):
    dictionary[dfield] = True

class Worker(Thread):
    """Thread executing tasks from a given tasks queue"""
    def __init__(self, tasks):
        Thread.__init__(self)
        self.tasks = tasks
        self.daemon = True
        self.start()

    def run(self):
        while True:
            func, args, kargs = self.tasks.get()
            try:
                func(*args, **kargs)
            except Exception, e:
                print e
            self.tasks.task_done()

class ThreadPool(object):
    """Pool of threads consuming tasks from a queue"""
    def __init__(self, num_threads):
        self.tasks = Queue(num_threads)

        for i in range(num_threads):
            Worker(self.tasks)

    def add_task(self, func, *args, **kargs):
        """Add a task to the queue"""
        self.tasks.put((func, args, kargs))

    def wait_completion(self):
        """Wait for completion of all the tasks in the queue"""
        self.tasks.join()

if __name__ == '__main__':
    pool = ThreadPool(4)

    data = [{} for _ in range(10)]
    for i, d in enumerate(data):
        pool.add_task(work_fn, d, str(i))

    pool.wait_completion()

    for d in data:
        print d.keys() 
```

这里到底发生了什么？

我应该做些什么不同的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:43:42.247

在打印结果之前，我看不到您在哪里等待任务完成。似乎您需要在生成作业后在后续循环中收集结果。

# highcharts - 当我单击高库存（高图表）中的光标时如何获取轴值？

> ID：15003688
> 
> 赞同：2
> 
> 时间：2013-02-21T13:38:10.380
> 
> 标签：highcharts, highstock

我正在使用高库存 API 参考。

我想知道单击光标时在哪里可以获得轴值？

请帮我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T08:56:34.813

如果您使用 Highstock，那么您可以获得 x 值（以毫秒为单位的时间）并使用 Highcharts.dateFormat() 以适当的格式返回数据。( [http://api.highcharts.com/highstock#highcharts.dateFormat()](http://api.highcharts.com/highstock#highcharts.dateFormat()) )

[http://jsfiddle.net/NX4KN/](http://jsfiddle.net/NX4KN/)

```
 plotOptions: {
            series: {
                cursor: 'pointer',
                point: {
                    events: {
                        click: function () {
                            alert('Date: ' + Highcharts.dateFormat('%Y-%m-%d',this.x) + ', value: ' + this.y);
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T13:42:33.903

您可以用户系列`click`事件：

[演示](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-point-events-click/)

```
series: {
    cursor: 'pointer',
    point: {
        events: {
             click: function() {
                 alert ('Category: '+ this.category +', value: '+ this.y);
             }
        }
    }
} 
```

# jquery - 无法正确创建 jsfiddle 以在悬停时重叠 div

> ID：15003693
> 
> 赞同：-5
> 
> 时间：2013-02-21T13:38:22.053
> 
> 标签：jquery, html, css, jsfiddle

我无法为我的实际问题创建 jsfiddle。

HTML

```
<div class="item1">
  item1
</div>
<div class="item2">
    item2
</div> 
```

CSS

```
item1 {
    position:absolute;
    width:100px;
    height:100px;
    background-color:red;
    top:5%;
}

.item2 {
    position:absolute;
    width:50px;
    height:50px;
    background-color:blue;
    top:8%;
    left:1%;
    display:none;
} 
```

我正在尝试在 item1 悬停时显示 item2

[http://jsfiddle.net/z9Unk/23/](http://jsfiddle.net/z9Unk/23/)

但是在悬停时它不显示 item2。应该对吧？？

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:40:28.727

您在 () 周围错过`$`的 (jQuery 函数) 应该是：

```
$(".item1").hover(
    function() {
      $(".item2").css("display", "block");
    }
); 
```

不是

```
(".item1").hover(
    function() {
      (".item2").css("display", "block");
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:40:34.360

您需要`$`在 jQuery 选择器的开头。

改变这个：

```
(".item1").hover(
    function() {
      (".item2").css("display", "block");
    }
); 
```

对此：

```
$(".item1").hover(
    function() {
      $(".item2").css("display", "block");
    }
); 
```

***现场演示：http:** [//jsfiddle.net/z9Unk/25/](http://jsfiddle.net/z9Unk/25/)*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T15:06:47.160

我认为您还需要隐藏它，因为 item1 失去悬停

```
$(".item1").hover(
    function() {
      $(".item2").show();
    },function(){
    $(".item2").hide()
    }
); 
```

当然，我更改了您**对显示的 css 属性进行更改以**显示**和隐藏的代码。**达到同样的效果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T13:41:33.530

用这个...

```
$(".item1").on('hover', function() {
      $(".item2").css("display", "block");
    }
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T13:41:51.127

你的 jQuery 不正确。jQuery 需要一个`$`before 选择器，而`.mouseover`不是`.hover`如果你不需要任何`mouseleave`. 我还通过压缩行并更改`.css`为`.show()`.

```
$(".item1").mouseover(function() {
    $(".item2").show();
}); 
```

小提琴：http: [//jsfiddle.net/z9Unk/30/](http://jsfiddle.net/z9Unk/30/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T13:42:00.947

像这样使用你会错过 $ 符号

```
$(".item1").hover(
function() {
  $(".item2").css("display", "block");
}
); 
```

[见小提琴](http://jsfiddle.net/z9Unk/31/)

# android - ADT 需要更新但找不到更新

> ID：15003695
> 
> 赞同：41
> 
> 时间：2013-02-21T13:38:24.083
> 
> 标签：android, eclipse, adt, update-site

今天我从 SDK 管理器安装了 API8，以前我只使用 API14。SDK 管理器完成后，重新启动 ADT 后出现此错误：

> 此 android SDK 需要 Android Developer Toolkit 版本 21.1.0 及更高版本。当前版本是 21.0.1.2012-12-6-2-58。

所以我点击查找更新，但我得到“没有找到更新”。

**我做了以下事情：**

*   使用 SDK 管理器重新安装 android SDK 工具 (rev 21.1)。

*   使用 SDK 管理器重新安装 API8 和 API14。

还是不行:(

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-07T09:01:35.197

我遇到过同样的问题。请在eclipse中尝试以下

帮助 --> 安装新软件

然后从下拉列表中选择“Android Developer Tools Update Site - [http://dl-ssl.google.com/android/eclipse/ ”并更新 ADT](http://dl-ssl.google.com/android/eclipse/)

IF THIS THROWS ERROR 像这样

未找到包含以下内容的存储库：osgi.bundle,com.android.ide.eclipse.adt,21.1.0.v201302060044-569685

***修改 http: 为 https:***

示例：[https ://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)

然后更新 ADT。这种方法对我有用。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-02-21T13:42:59.217

当您的 eclipse ADT 插件版本与您的 SDK 工具版本不匹配时，您会遇到该问题。

您是否尝试过在 Eclipse 中更新 ADT 插件？

帮助 -> 安装新软件，然后使用[ADT 更新站点](http://dl-ssl.google.com/android/eclipse/)应该可以工作。

如果您在`No Respository Found`使用此站点时遇到错误，则应改用[HTTPS 版本](https://dl-ssl.google.com/android/eclipse/)。

如果您仍然无法安装它，您可以单独下载 zip 并手动安装。[您可以在ADT 故障排除页面上](http://developer.android.com/sdk/installing/installing-adt.html#Troubleshooting)找到最新的 zip 和安装说明。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-05-22T14:41:13.023

如果“http”出现问题。

*   1) 帮助 --> "安装新软件" --> "可用软件站点"
*   2) 点击“Android 开发者工具更新站点”
*   3) 点击“编辑”
*   **4) 将“http”修改为“https”**
*   5) 点击“确定”-->“确定”
*   6) 再次尝试更新。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-06-30T12:55:01.320

我尝试了这里提到的所有方法，但仍然没有成功。最终有帮助的是[No repository found error in Installation ADT in eclipse Indigo](https://stackoverflow.com/questions/9499563/no-repository-found-error-in-installing-adt-in-eclipse-indigo)的提示：

> 取消选中“安装期间联系所有更新站点以查找所需软件”</p>

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-02-21T13:57:22.663

您应该通过以下方式将您的 ADT 更新到最新版本。

> Eclipse--> 转到帮助--> 安装新软件--> 添加--> 在内部添加存储库写入 Name="ADT"（如您所愿）和 Location="https://dl-ssl.google.com/ android/eclipse/" --> 加载几次后你会得到开发者工具和 NDK 插件 --> 如果你想安装使用 NDK 作为未来使用或者只选中开发者工具 --> 点击下一步 --> 完成。

在此之后，您可以将您的 SDK 更新到最新版本。

希望它会有所帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-06-29T17:38:24.470

也有这个，从 ADT 22.3 到 23。

不确定是什么让 Eclipse 无法找到更新（可能是某些 ID 已更改或其他），但**解决方案是使用 Help -> Install New Software 在现有插件上安装 ADT 插件**，只需选择相同的站点，无需更正从*https*到*http*的 URL，反之亦然。向导会告诉你有一堆冲突会导致删除旧版本的插件——没关系，去吧。

**UPD**看起来，（至少有一个人对答案投了反对票），强行安装新版本而不是旧版本并不适合所有人。这是[相关的错误](https://code.google.com/p/android/issues/detail?id=72584)，据说旧安装的 Exclipse/ADT 是不可更新的，人们应该下载新的捆绑包来解决这个问题。

**PS**无论如何，你现在应该使用 Android Studio。与 Eclipse 相比，它是一个内存猪，对它有非常不同的感觉和不同的热键，但是*（尽管我讨厌说它已经是一个依偎的 Eclipse 用户很长一段时间）*它要好得多，至少对于 Android发展。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-02-22T11:23:20.560

同样的问题在这里，但幸运的是它现在已经解决了。帮助-> 安装新软件和 android 工具管理器没有帮助。

我重新下载了 ADT 包并简单地复制了失败的安装，它现在可以工作了。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-21T13:41:25.573

上周末我遇到了同样的问题。转到帮助-> 安装新软件。这里使用 Android 开发者工具更新站点 url - [http://dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)，应该会出现两个选项，我不记得选择哪一个；）（应该是带 DEV 的那个)

我认为没有必要，但在我使用 ADT 删除并下载整个 Eclipse 之前。但这不应该是必要的。

# linux - 'BL' arm 指令反汇编如何工作？

> ID：15003701
> 
> 赞同：9
> 
> 时间：2013-02-21T13:38:48.693
> 
> 标签：linux, arm, disassembly

'bl' 或带有链接指令的分支几乎总是变成 0xebffffffe

然而，处理器和 GNU binutils objdump 不知何故知道在哪里分支：

```
00000000 <init_module>:
   0:   e1a0c00d        mov     ip, sp
   4:   e92ddff0        push    {r4, r5, r6, r7, r8, r9, sl, fp, ip, lr, pc}
   8:   e24cb004        sub     fp, ip, #4
   c:   e24dd038        sub     sp, sp, #56     ; 0x38
  10:   ebfffffe        bl      0 <init_module>
  14:   e59f0640        ldr     r0, [pc, #1600] ; 65c <init_module+0x65c>
  18:   ebfffffe        bl      74 <init_module+0x74> 
```

他们怎么知道？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T14:14:54.033

该问题是由于您正在查看对象文件的反汇编，而不是最终的可执行文件或共享对象。

当汇编程序生成目标文件时，`bl`目标的最终地址尚未确定（它取决于将与其链接的其他目标文件）。因此，汇编器将地址设置为 0，但还添加了一个重定位，告诉链接器这`bl`应该在最终文件中的位置。（您可以`objdump`通过添加`-r`开关来查看重定位信息。）

链接时，链接器处理重定位，计算目标函数的最终地址并修补指令以使目标地址对齐。如果您反汇编最终的链接可执行文件，您将看到不同的操作码。

# javascript - 如何将样式文本从 div 提取到选择对象 JavaScript 和其他

> ID：15003704
> 
> 赞同：0
> 
> 时间：2013-02-21T13:38:57.843
> 
> 标签：javascript, styles, selection, getselection

好的，我有 2 个问题，我已经上网探索，用 div 元素中的文本替换选定的文本，但我还没有设法用 firefox（“不知道”位）做到这一点，除此之外我可以“ t 为我的一生弄清楚如何让样式文本从 div 输出；我的意思是，这就是使用 div 的全部意义，因此可以设置文本样式。有任何想法吗？顺便说一句 inputText 是对 div 元素的引用。

问题的主要领域是在第 5 到最后一行：

```
 if (highlight){ 
                if (ie){
                    document.selection.createRange().text = inputText.innerHTML;
                }
                else{
                    // (no idea!?!) = inputText.innerHTML;
                }
                inputText.parentNode.removeChild(inputText);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:25:03.567

这曾经对我有用。希望它可以帮助你。

```
var r = window.getSelection().getRangeAt(0);
r.deleteContents();
r.insertNode(inputText); 
```

# sql-server - SQL Server 2012：选择序列化数据

> ID：15003707
> 
> 赞同：0
> 
> 时间：2013-02-21T13:39:06.823
> 
> 标签：sql-server, string, serialization, nvarchar

我有一些包含序列化字符串的 nvarchar 类型的列。询问

```
SELECT * FROM table; 
```

返回所有数据，但序列化的字符串为空。你对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:21:54.717

问题出在 MS SQL Server Native Client 11.0 ODBC 驱动程序中。使用php_pdo_sqlsrv驱动连接解决，sqlsrv: ...

# mysql - 查找已支付和待处理的金额

> ID：15003714
> 
> 赞同：0
> 
> 时间：2013-02-21T13:39:18.540
> 
> 标签：mysql

我是 Mysql Db 中的一只新蜜蜂，你能帮我从我当前的表中获取 ginven 输出吗？

请检查表结构和输出的给定链接

![](../Images/5fd69fbf3d70792efc2988f57ca4e76f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:45:37.333

使用`GROUP BY`, `SUM`, And `CASE`(或 IF):

```
SELECT Buyer, TotalAmount, PaidAmount, TotalAmount-PaidAmount BalanceAmount
FROM (
  SELECT Buyer, 
    SUM(Amount) TotalAmount, 
    SUM(CASE WHEN PaidStatus = 1 THEN Amount ELSE 0 END) PaidAmount
  FROM YourTable
  GROUP BY Buyer
  ) t 
```

[样品小提琴](http://sqlfiddle.com/#!2/57f0d/1)

# iphone - 将 ipad 应用程序转换为 iphone5

> ID：15003717
> 
> 赞同：0
> 
> 时间：2013-02-21T13:39:26.987
> 
> 标签：iphone, ios, ios5

如何修改我的代码，以便相同的应用程序可以在具有相同 UI 元素的 iphone 上运行。我对 info Plist 进行了更改并使其具有通用性，但问题是我没有使用 stroryboard 或 nib 、 xib 文件来显示 UI 元素。我还硬编码了特定按钮或标签、框架等的高度和宽度。

那么有没有办法将屏幕自动调整为 ipad 视图到 iphone 或者我需要为 iPhone 编写具有新高度和宽度的每个代码？

就像在 android 中一样，我检测高度和宽度，并据此将其除以 2 或 3 以将特定的 UI 项目放置在不同的屏幕尺寸上。

另外，我如何检测到该应用程序正在 iphone 4 或 iphone 5 或 iPad 上运行，以便我可以更改我的图像和值或高度 n 宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:47:04.080

您可以使用以下方法获取屏幕边界：

```
[[UIScreen mainScreen] bounds]; 
```

您必须进行的更改数量取决于您之前设计代码的方式，如果您一直使用绝对值，那么您将遇到比使用相对值更多的问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:26:52.597

您可以查看视图的 UIViewAutoresizingMask 属性，例如：

```
 view.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin; 
```

至于如何检查你是否在 iPhone 5 上，你可以使用这行代码：

```
BOOL isIPhone5 = [[UIScreen mainScreen ] bounds ].size.height == 568  ? YES : NO ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:41:28.717

为 iphone 和 ipad 创建单独的笔尖

在代码方面做得很好，那么你必须为所有组件代码设置框架，检查设备是 ipad 还是 iphone。

[检查 iPad 或 iPhone 看这里](https://stackoverflow.com/questions/3202558/determine-ipad-device)

# css - JSF 2.x 为空时隐藏消息层

> ID：15003724
> 
> 赞同：0
> 
> 时间：2013-02-21T13:39:45.293
> 
> 标签：css, jsf-2, icefaces

有没有办法在输出层（？如果这是正确的术语）为空时隐藏它，这样当向它写入信息/错误消息时，它会扩展到适合消息所需的高度，垂直拉伸面板它包含在里面吗？（也许使用 CSS ??）

```
<h:body>  
  <ace:panel>
...
...
    <h:panelGroup>   
      <h:messages
        infoStyle="color:darkgreen"
        errorStyle="color:darkred">
      </h:messages> 
    </h:panelGroup>   
  </ace:panel>
</h:body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:50:50.067

如果**所有**消息都由 one and same 处理`<h:messages>`，您可以检查它[`FacesContext#getMessageList()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#getMessageList%28%29)是否不为空。

```
<ace:panel rendered="#{not empty facesContext.messageList}"> 
```

# c# - 为什么 TileUpdater.Clear() 不删除所有更新？

> ID：15003726
> 
> 赞同：6
> 
> 时间：2013-02-21T13:39:48.963
> 
> 标签：c#, windows-runtime

我即将安排相当多的磁贴更新，并注意到 .Clear() 方法似乎不起作用。它应该“删除所有更新并恢复到应用程序清单中声明的​​默认内容” [（MSDN）](http://msdn.microsoft.com/en-us/library/windows/Apps/windows.ui.notifications.tileupdater.clear)

编辑：厚脸皮的女士！在该方法的文档下，它说：“注意：此方法不会停止定期更新”

假设我安排了 3000 次更新（顺便说一句，我不会这样做！），在调用 clear 之后计数仍然是 3000。

![在此处输入图像描述](../Images/fc77aed959b27075295669167b3e9e36.png)

此处提出了相同的问题：[TileUpdater.Clear() not freeing up notifications quota](http://social.msdn.microsoft.com/Forums/pl/winappswithnativecode/thread/a8af50ca-ff61-49f9-9b05-72a8956eb969)，唯一的建议是手动删除每个更新。

我决定通过使用 StopWatch 类来测试需要多少时间，它花费了 11 秒多一点，18 秒的最大计划更新量为 4096，所以这个解决方案似乎有点疯狂。

![在此处输入图像描述](../Images/153078b68b5216a026462b1ddfd3b586.png)

由于我不会按小时安排超过几天的时间，并且可能会使用带有维护触发器的后台任务来添加新任务，因此我可以使用删除循环。但我仍然希望我在这里做错了什么并且有更好的解决方案。

那么，你知道为什么 .Clear() 不起作用，最好的选择是什么？

如果您想尝试一下，这是代码：

```
 private void Button_Click_1(object sender, RoutedEventArgs e)
    {

        var updater = TileUpdateManager.CreateTileUpdaterForApplication();
        updater.Clear();
        var test = updater.GetScheduledTileNotifications();

        var stopWatch = new Stopwatch();
        stopWatch.Start();
        foreach (var update in test)
        {
            updater.RemoveFromSchedule(update);
        }
        stopWatch.Stop();
        var time = stopWatch.Elapsed;

        notify.Text = String.Format("{0:00}:{1:00}:{2:00}.{3:00}",
            time.Hours, time.Minutes, time.Seconds,
            time.Milliseconds / 10);

        for (int i = 0; i < 4096; i++)
        {
            var wide = TileContentFactory.CreateTileWideText09();
            var square = TileContentFactory.CreateTileSquareText04();
            wide.TextHeading.Text = "The heading";

            wide.TextBodyWrap.Text = "The body text for notification: " + i;
            square.TextBodyWrap.Text = "The body text for notification: " + i;

            wide.SquareContent = square;

            var tileNotification = new ScheduledTileNotification(wide.GetXml(), DateTime.Now.AddMinutes(i + 1));
            updater.AddToSchedule(tileNotification);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:52:35.540

虹膜，

清除仅清除对磁贴的更改。

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.clear.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.clear.aspx)

StopPeriodicUpdate 仅取消计划的更新，但不会删除它们。 [http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.stopperiodicupdate.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.stopperiodicupdate.aspx)

底线是 - 功能不存在。文档不清楚/.NET 就像 Clear 实际上意味着清除而不是**重置内容**一样。可悲的事态，但这就是我们所拥有的一切

# filesystems - 从目录中创建一个 ext2 文件系统以用作 ramdisk

> ID：15003732
> 
> 赞同：0
> 
> 时间：2013-02-21T13:40:01.913
> 
> 标签：filesystems, block, ext4, ramdisk, ext2

我正在尝试自动确定目录将创建的 ext2 ramdisk 文件系统的大小。我目前正在做的是：

```
BLOCK_COUNT=`du $RAMDISK_FS_DIR| tail -1 |awk '{print $1}'

dd if=/dev/zero of=ramdisk.img bs=1024 count=$BLOCK_COUNT
mke2fs -F ramdisk.img -L "ramdisk" -b 1024 -m 0
tune2fs ramdisk.img -i 0 
```

但是当我安装并`cp -r` `$RAMDISK_FS_DIR`进入时，`ramdisk.img`我会收到这样的消息

```
cp: cannot create directory `ramdisk/var/www': No space left on device 
```

我确定在我的这种特定情况下，将 BLOCK_COUNT 增加 48 个块正是我需要多少才能使操作成功。我需要一种方法来找到任意目录大小的这个数字。

请注意，我的主机文件系统是 ext4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:00:57.043

我不认为一般来说有一个好方法可以做到这一点。通常，文件系统中的超级块、inode 表、块位图和各种其他结构的大小会根据文件系统的大小和其中的内容而有所不同。即使文件占用的空间（由 计算`du`）在源文件系统上也可能与目标文件系统上的不同。

我想知道您为什么要创建一个大小与其内容完全相等的文件系统。由于这个文件系统在构建后总是满的，你不能向它添加任何东西（除非你先删除东西），这让我觉得它可能是只读的。如果它是只读的，为什么不使用专门用于此类应用程序的文件系统类型，例如[cramfs](http://en.wikipedia.org/wiki/Cramfs)或[squashfs ？](http://squashfs.sourceforge.net/)

# mongodb - MongoDB聚合返回以值作为键的嵌套组？

> ID：15003738
> 
> 赞同：3
> 
> 时间：2013-02-21T13:40:26.140
> 
> 标签：mongodb

我的文件如下所示：

```
{
        "_id" : "Tvq579754r",
        "Status" : "passed",
        "Title" : "up08c",
        "ProjectID" : "Tvq5p",
        "Version" : "1.0.0",
        "Platform" : "platform_x",
        "METRIC_A" : 11114.85,
        "METRIC_B" : 68.9,
        "METRIC_C" : 65.35,
},
{
        "_id" : "Tvq579755r",
        "Status" : "passed",
        "Title" : "up09c",
        "ProjectID" : "Tvq5p",
        "Version" : "1.0.0",
        "Platform" : "platform_x",
        "METRIC_A" : 21114.85,
        "METRIC_B" : 168.9,
        "METRIC_C" : 165.35,
},
{
        "_id" : "Tvq579756r",
        "Status" : "passed",
        "Title" : "up09c",
        "ProjectID" : "Tvq5p",
        "Version" : "1.0.0",
        "Platform" : "platform_x",
        "METRIC_A" : 31114.85,
        "METRIC_B" : 268.9,
        "METRIC_C" : 265.35,
} 
```

现在我通过按、和分组来分组`$avg`和获取`$sum`我的`METRIC_`字段没有问题，但是我想在聚合框架中做的（如果可能的话）是返回一个**使用分组值作为键**的对象，例如：`ProjectID``Version``Platform``Title`

 **```
{ 
        <Project ID> : {
                <Version> : {
                        <Platform> : {
                                <Title> : {
                                        "METRIC_A": <sum of METRIC_A>,
                                        "METRIC_B": <sum of METRIC_B>,
                                        "METRIC_C": <sum of METRIC_C>,
                                }
                        }
                }
        }
} 
```

或者，在我的示例中：

```
{ 
        'Tvq5p' : {
                '1.0.0' : {
                        'platform_x' : {
                                'up08c' : {
                                        "METRIC_A": 11114.85,
                                        "METRIC_B": 68.9,
                                        "METRIC_C": 65.35,
                                },
                                'up09c' : {
                                        "METRIC_A": 52229.7,
                                        "METRIC_B": 437.8,
                                        "METRIC_C": 430.7,
                                }
                        }
                }
        }
} 
```

一旦消费服务收到查询结果，我目前正在这样做，这并不是非常慢或任何东西，但我只是认为从 Mongo 中走出来会很好。这甚至可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T20:50:31.420

在 MongoDB 中有[group operation](http://docs.mongodb.org/manual/reference/command/group/)。

```
db.records.group( {
   key: { 'platform_x': 1, 'title': 1 },
   reduce: function(cur, result) { 
     result.metric_a += cur.metric_a;
     result.metric_b += cur.metric_b;
     result.metric_c += cur.metric_c;
   },
   initial: { metric_a = 0, metric_b = 0, metric_c = 0 }
 } ) 
```

如果这不起作用，我建议使用[Map Reduce](http://docs.mongodb.org/manual/core/map-reduce/)。**

# validation - Grails feeds-插件， && , 验证错误

> ID：15003747
> 
> 赞同：0
> 
> 时间：2013-02-21T13:40:50.463
> 
> 标签：validation, grails, groovy, rss, feed

我刚刚试用了***grails feeds-plugin*** [http://grails.org/Feeds+Plugin](http://grails.org/Feeds+Plugin)

它工作起来非常简单而且效果很好，但有一件事我不明白。

只要我添加一个`publishedDate`，比如：

```
 reviews.each() {
         review -> entry('fooTitle'){
             publishedDate = review.dtCreated
             review.rating + ' ' + review.comment
        }
     } 
```

它生成两个标签：

```
 <pubDate>Tue, 04 Sep 2012 12:10:02 GMT</pubDate>
      <dc:date>2012-09-04T12:10:02Z</dc:date> 
```

数据库中的条目是：

```
"dtCreated": ISODate("2013-01-15T00:52:47.0Z"), 
```

但我只希望`<pubDate>`生成，因为提要验证器会引发此错误：

```
An item should not include both pubDate and dc:date 
```

我该如何解决这个问题？我很想使用这个插件，但我需要一个有效的 RSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:30:06.810

如果你不介意快速而肮脏的解决方案，你可以试试这个（它取自插件的集成测试并修改）：

```
import groovy.xml.XmlUtil
import groovy.xml.StreamingMarkupBuilder
import feedsplugin.FeedBuilder
import com.sun.syndication.io.SyndFeedOutput

class TestController {
private renderToString(feedType, feedVersion, Closure closure) {
    def builder = new FeedBuilder()
    builder.feed(closure)

    def type = feedType
    def version = feedVersion

    SyndFeedOutput output = new SyndFeedOutput()
    def sw = new StringWriter()
    output.output(builder.makeFeed(type, version),sw)
    sw.toString()

}

private removeDcDate(String rssFeed) {

    def dom = new XmlSlurper().parseText(rssFeed)
    dom.channel[0].item.eachWithIndex { item, i ->
        dom.channel[0].item[i].date = {}
    }

    def newResp = XmlUtil.serialize(new StreamingMarkupBuilder().bind {
        mkp.declareNamespace (rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#")
        mkp.declareNamespace (dc:"http://purl.org/dc/elements/1.1/")
        mkp.declareNamespace (content:"http://purl.org/rss/1.0/modules/content/")
        mkp.declareNamespace (itunes:"http://www.itunes.com/dtds/podcast-1.0.dtd")
        mkp.declareNamespace (taxo:"http://purl.org/rss/1.0/modules/taxonomy/")

        mkp.yield dom 
    })

    newResp

}

def test = {
    def articles = ['A', 'B', 'C']

     def outStr= renderToString("rss", "2.0") {
        title = 'Test feed'
        link = 'http://somewhere.com/'
        description = "This is a test feed" 

        articles.each() { article ->
            entry("Title for \$article") {
                content(type:'text/html') {
                    return "Content for \$article"
                }

                link = 'http://somewhere.com/x'

                publishedDate = new Date()

            }
        }
    }
    def cleanedFeed = removeDcDate(outStr)

    render text: cleanedFeed, contentType: "application/rss+xml", encoding: "UTF-8"

    }
} 
```

基本上它所做的是直接调用 feedbuilder 来获取 feed 的字符串表示，然后对其进行解析并删除“dc:date”标签。结果照常呈现。

我已经在带有 grails 1.3.7 的插件测试套件中测试了这个解决方法

# jquery - asp.net mvc：jQuery 中的索引超出范围异常

> ID：15003749
> 
> 赞同：0
> 
> 时间：2013-02-21T13:40:53.613
> 
> 标签：jquery, asp.net-mvc, exception

在 jQuery 中，我需要有这样的东西：

```
if (@(Model.ListItems.Count) > 0)
          if ('@(Model.ListItems[0].Date)' != '')
               ....... 
```

当 Model.ListItems.Count 为 0 时不起作用，因为它会抛出

> 指数超出范围

下一行出现异常。由于表达式的评估，这样做是有道理的，但是我能做些什么来按照我的意图行事呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:59:14.253

我终于想通了：
代码变为：

```
@if (Model.ListItems.Count > 0) 
{
    if (Model.ListItems[0].Date!= null)
        <text>
             ......
         </text>
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:59:21.220

您混淆了您的客户端脚本和 javascript。

为什么您会认为 javascript`if`分支会影响服务器端代码剃须刀代码，因为它会替换您`@(...)`在 html 响应中的表达式？

您需要在 razor 本身中执行分支逻辑，以便它执行服务器端。

# linux - lxde 意外退出

> ID：15003750
> 
> 赞同：0
> 
> 时间：2013-02-21T13:40:54.717
> 
> 标签：linux, desktop, gentoo

我在 Gentoo 上使用 lxde。

软件版本：

```
lxappearance 0.5.2
lxde-common 0.5.5
lxde-icon-theme 0.5.0
lxinput 0.3.2
lxmenu-data 0.1.2
lxpanel 0.5.12
lxrandr 0.1.2
lxsession 0.4.6.1
lxsession-edit 0.2.0
lxshortcut 0.1.2
menu-cache 0.4.1 
```

有时 lxde 会从会话退出到会话管理器（我使用 slim-1.3.5）。之后，项目 reboot 和 halt 从 Logout 菜单中消失，并且 ck-list-sessions 显示两个会话：一个处于活动状态，一个处于非活动状态。

问题附近的系统日志：http: [//vpaste.net/zOZFl](http://vpaste.net/zOZFl)

问题是我在哪里可以尝试寻找这个问题的原因？lxde 在哪里存储日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:55:11.537

检查 /var/log/Xorg.0.log.old 是否有错误。可能是正在重新启动的 X 服务器。如果做不到这一点，请尝试使用 startx 从控制台启动 X。您需要先停止 /etc/init.d/xdm。如果它仍然引导你，你可能会看到一些有用的输出。作为旁注，我发现 slim 有点不可靠，但我已经有一段时间没有尝试过了。我现在改用 lightdm。

# javascript - JS window.location.href 和跨域策略

> ID：15003753
> 
> 赞同：2
> 
> 时间：2013-02-21T13:41:07.680
> 
> 标签：javascript, same-origin-policy

据我所知，当来自域 a.com 的 iFrame 尝试`top.location.href`在域 b.com 上获取或设置时，它会破坏同源策略并引发“拒绝访问”错误。

什么会导致这种行为不起作用？在我们的测试应用程序中，iframe 从站点 www.test-a.com 成功设置`top.location.href`到 www.test-b.com 到 other-site.com 时，我感到非常惊讶？

问题特别是关于使用`top.location.href = 'other-site.com'`而不是`top.location = 'other-site.com'`？

# javascript - 如何在 contenteditable iframe 中的图像上设置选择

> ID：15003754
> 
> 赞同：-2
> 
> 时间：2013-02-21T13:41:08.273
> 
> 标签：javascript, jquery

我有一个内容可编辑的 div 和图像，其中包含一些 ID。如何使用 javascript 在这个 img 上设置选择？

[看看这个链接（它的图片）](http://test.standarta.net/test.jpg)

位置1：点击前的图片，

位置 2：点击后的图像。

我需要什么：我将单击一些链接，并且带有一些 id 的图像将变成可编辑 div 中的位置 2。链接超出可竞争字段

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:44:24.493

我不太确定你的意思，但是使用 jQuery 定位图像会是这样的。

`$('#DivID #ImgID')`

或者

`$('#DivID img')`

要不就

`$('#ImgID')`

**EIDT--------------------------**

下面在一个 div 中找到一个图像并用一个变量引用它`divImg`。然后第二行向该 img 添加一个 ID。

类似的东西？

```
divImg = $('#DivID').find('img');
divImg.attr('id', 'imgNewID'); 
```

如果你想设置一个点击事件来做到这一点。

```
$('#IdClicked').on('click',function(){
   divImg = $('#DivID').find('img');
   divImg.attr('id', 'imgNewID');
}); 
```

# jenkins - 我们可以在詹金斯上一次并行运行多少个构建/作业

> ID：15003755
> 
> 赞同：1
> 
> 时间：2013-02-21T13:41:09.630
> 
> 标签：jenkins

我们可以在 jenkins 上一次并行运行多少个构建/作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:25:53.450

詹金斯可以运行尽可能多的工作，因为你有可用的“执行者”。您可以在配置中随意更改执行器的数量。

**真正的问题是：您的硬件**可以处理多少工作。这完全取决于您的硬件规格**和**您正在运行的作业类型（maven 编译、xcode 构建、脚本作业）。

另外，每项工作都会经历不同的阶段：有**SCM 签出阶段**，这将是硬盘 IO 和网络 IO 繁重的阶段，**构建阶段**将是 CPU 和/或内存繁重的阶段，还有**归档阶段**，这将是硬盘（但不是网络）IO 繁重[这取决于您是在本地存档还是通过网络存档]。

并行作业中的所有这些阶段很少同时发生。例如：由于网络带宽限制，您的硬件可能只能支持 5 个并行 SCM 检出阶段，但由于这种情况很少会同时发生，您可以安全地并行运行 10 个作业。

最后，使用相同的负载配置文件，您的所有工作不太可能完全相同。

因此，除非您的每一项工作都完全相同，具有完全相同的负载配置文件，并且您指定了硬件规格，并描述了该工作的负载配置文件（所需的带宽，CPU 利用率等），否则没有人可以回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:44:11.980

这取决于您的服务器规格，但尽量不要运行更多

# android - 限制用户在android中禁用gps选项

> ID：15003756
> 
> 赞同：0
> 
> 时间：2013-02-21T13:41:13.857
> 
> 标签：android, gps

我的应用程序会经常根据 GPS 监控用户位置。现在谜底是用户可以手动禁用其设备中的 GPS 选项...如何限制用户禁用 GPS 选项。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:49:18.510

您可以检查 GPS 是否已禁用。

```
LocationManager locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

boolean isGPSEnabled = locManager.isProviderEnabled(LocationManager.GPS_PROVIDER); 
```

如果 isGPSEnabled 为 false，则打开一个对话框，意图打开 gps 设置

```
private void showSettingsGPSAlert() {

    AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);

    // Setting Dialog Title
    alertDialog.setTitle("GPS settings");

    // Setting Dialog Message
    alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int which) {
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            startActivity(intent);
        }
    });

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        dialog.cancel();
        }
    });

    // Showing Alert Message
    alertDialog.show();

} 
```

还要监听 Location 监听器回调的变化。

```
public void onProviderDisabled(String provider) {

         //Do something here. Example tell user that gps is disabled

}

public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

} 
```

我希望这些对您有所帮助，祝您编码愉快！:)

# sql-server - SQL 2012 Pivot - 动态列和结果异常

> ID：15003757
> 
> 赞同：0
> 
> 时间：2013-02-21T13:41:15.993
> 
> 标签：sql-server, tsql, pivot, sql-server-2012

我被要求将一些数据显示为数据透视表以使其更具可读性，因此经过一些研究后将这个查询放在一起：

```
SELECT
    regionName,
    [Not Yet Set],
    [Not Applicable],
    [Not met],
    [Achieved],
    [Excelled],
    [Accepted],
    [Declined]
FROM
    (
    SELECT
        regionID,
        regionName,
        resultID,
        resultDesc
    FROM
        @tbl_results) ps
PIVOT
    (
        COUNT (resultID)
        FOR resultDesc IN
            (
            [Not Yet Set],
            [Not Applicable],
            [Not met],
            [Achieved],
            [Excelled],
            [Accepted],
            [Declined]
            )) as pvt 
```

...产生：

```
regionName      Not Yet Set Not Applicable Not met  Achieved  Excelled Accepted  Declined
--------------------------------------------------------------------------------------
China           3           2              1        0         0        0         0
United Kingdom  8           0              1        2         0        0         1 
```

但是据我了解，pvt 中引用的列必须与基础表中的数据库行值完全匹配。这是一个问题，所以我重写了查询以使用 ID 值

```
SELECT
    regionName,
    [1] as [Not yet set],
    [2] as [Not applicable],
    [3] as [Not met],
    [4] as [Achieved],
    [5] as [Excelled],
    [6] as [Accepted],
    [7] as [Declined]
FROM
    (
    SELECT
        regionID,
        regionName,
        resultID,
        resultDesc
    FROM
        @tbl_results) ps
PIVOT
    (
        COUNT (resultID)
        FOR resultID IN ([1],[2],[3],[4],[5],[6],[7])) as pvt 
```

这会产生这个结果集：

```
regionName      Not yet set  Not applicable    Not met    Achieved    Excelled    Accepted    Declined
------------------------------------------------------------------------------------------------------
United Kingdom  0            0                 0          2           0           0           0
United Kingdom  0            0                 0          0           0           0           1
United Kingdom  0            0                 1          0           0           0           0
United Kingdom  8            0                 0          0           0           0           0
China           0            2                 0          0           0           0           0
China           0            0                 1          0           0           0           0
China           3            0                 0          0           0           0           0 
```

任何人都可以向我解释为什么在使用 resultID 来执行 COUNT 的情况下，为什么 regionNames 在上述查询中会重复？

此外，数据透视表中使用的 resultDesc 列是硬编码的（结果表中只有这七个潜在值）。是否可以动态提取这些内容，以便在创建新数据库行时不必更新过程？甚至更好的是，仅包含在 @tbl_results 中的描述，例如枢轴使用`SELECT DISTINCT resultID, resultDesc FROM @tbl_results`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:51:53.263

您的第二个查询的问题是`resultDesc`在`GROUP BY`for 中使用了`PIVOT`并且您有不同的值，因此您为每个`resultDesc`.

第二个查询应该是：

```
SELECT
    regionName,
    [1] as [Not yet set],
    [2] as [Not applicable],
    [3] as [Not met],
    [4] as [Achieved],
    [5] as [Excelled],
    [6] as [Accepted],
    [7] as [Declined]
FROM
    (
    SELECT
        regionID,
        regionName,
        resultID
    FROM
        @tbl_results) ps
PIVOT
    (
        COUNT (resultID)
        FOR resultID IN ([1],[2],[3],[4],[5],[6],[7])) as pvt 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!6/25a65/2)。

如果要使用`resultDesc`，则可以删除 ，`resultId`因此查询为：

```
SELECT
    regionName,
    [Not yet set],
    [Not applicable],
    [Not met],
    [Achieved],
    [Excelled],
    [Accepted],
    [Declined]
FROM
    (
    SELECT
        regionID,
        regionName,
        resultDesc
    FROM
        tbl_results) ps
PIVOT
    (
        COUNT (resultDesc)
        FOR resultDesc IN ([Not yet set],[Not applicable],
                           [Not met],[Achieved],[Excelled],
                           [Accepted],[Declined])) as pvt 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!6/25a65/3)。

如果要动态执行此操作，则可以使用：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(resultDesc) 
                    from tbl_results
                    group by resultid, resultDesc
                    order by resultid
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT regionname, ' + @cols + ' from 
             (
                select regionid, regionname, resultdesc
                from tbl_results
            ) x
            pivot 
            (
                count(resultdesc)
                for resultdesc in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!6/25a65/6)。

编辑#1，根据您的评论，您得到的错误是因为临时表超出了动态 SQL 的范围。因此，您将需要创建一个用户定义类型的表，类似于：

```
create type mytable as table
(
  regionid int,
  regionname varchar(50),
  resultid int,
  resultdesc varchar(50)
); 
```

然后将表传递到动态 sql 中：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(resultDesc) 
                    from @tbl_results
                    group by resultid, resultDesc
                    order by resultid
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT regionname, ' + @cols + ' from 
             (
                select regionid, regionname, resultdesc
                from @tbl_results
            ) x
            pivot 
            (
                count(resultdesc)
                for resultdesc in (' + @cols + ')
            ) p '

EXECUTE sp_executesql @query, N'@tbl_results mytable READONLY', @tbl_results 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!6/e5064/4)

# git - 让 maven 3.0.4 和 GIT 工作

> ID：15003760
> 
> 赞同：2
> 
> 时间：2013-02-21T13:41:27.197
> 
> 标签：git, maven, ssh

我尝试从 maven 结帐。我有以下 pom.xml 内容：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>groupId</groupId>
<artifactId>server</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>war</packaging>

<build>
    <sourceDirectory>${basedir}/src</sourceDirectory>
    <outputDirectory>${basedir}/build</outputDirectory>
    <resources>
        <resource>
            <directory>${basedir}/src</directory>
            <excludes>
                <exclude>**/*.gitignore</exclude>
                <exclude>**/*.java</exclude>
            </excludes>
        </resource>
    </resources>

    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-scm-plugin</artifactId>
            <dependencies>
                <dependency>
                <groupId>org.codehaus.plexus</groupId>
                <artifactId>plexus-utils</artifactId>
                <version>2.1</version>
                </dependency>
                <dependency>
                <groupId>org.apache.maven.scm</groupId>
                <artifactId>maven-scm-provider-gitexe</artifactId>
                <version>1.2</version>
                </dependency>
            </dependencies>
            <version>1.0</version>
            <configuration>                
                <connectionType>connection</connectionType>
                <checkoutDirectory>${project.basedir}/target/checkout</checkoutDirectory>
                <workingDirectory>${project.basedir}/target/checkout</workingDirectory>
            </configuration>
            <executions>
                <execution>
                    <id>check-out-master</id>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>checkout</goal>
                    </goals>
                                <configuration>
                        <servers>
                            <server>staging</server>
                        </servers>
                    </configuration>
                 </execution>
             </executions>
        </plugin>
    </plugins>
</build>

<!-- THIRD PARTY DEPENDENCIES -->
<!-- ... -->

<!-- GIT -->

<scm>
    <connection>scm:git:ssh://10.0.50.12/opt/git-repos/server.git</connection>
    <url>scm:git:ssh://10.0.50.12/opt/git-repos/server.git</url>

    <developerConnection>scm:git:ssh://10.0.50.12/opt/git-repos/server.git</developerConnection>
</scm> 
```

在我的 settings.xml 中，我有以下内容：

```
<server>
    <id>staging</id>
    <username>username</username>
    <password>password</password>
</server> 
```

我无法让它工作，也无法获得密码提示。

在执行时我得到这个：

```
[INFO] --- maven-scm-plugin:1.0:checkout (check-out-master) @ server ---

[INFO] Removing C:\workspace\server\server\target\checkout

[INFO] Executing: cmd.exe /X /C "git clone ssh://10.0.50.12/opt/git-repos/server.git C:\workspace\server\server\target\checkout"

[INFO] Working directory: C:\workspace\server\server\target 
```

它卡在这一点上......我猜它正在等待密码。

有人知道使用密码或至少提示输入密码的解决方案吗？

**编辑**

今天我做了一个简单的测试：我从 linux 运行 mvn compile 命令，我得到了 git 密码的提示。也许我应该需要一个 ssh 代理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:19:43.143

确保在您运行它的机器上正确设置了 git（定义了名称和电子邮件设置）。然后先尝试从控制台结帐。如果可行，它也应该适用于 Maven。如您所见，它正在执行一个外部进程。

如果失败，请尝试运行 Maven 在打印时为 git 调用的命令。

# iphone - 当用户在 iphone 中选择该单词时，如何突出显示文本中的重复单词？

> ID：15003761
> 
> 赞同：0
> 
> 时间：2013-02-21T13:41:27.260
> 
> 标签：iphone, textview, word, highlight

我在文本视图中有文本。当我从该文本中选择一个单词时。如果该词在 textview 中重复 3 次。那么我需要突出显示该词 3 次..如何从文本视图中突出显示该词 3 次..

谢谢你的建议。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:45:13.843

您需要扫描整个 textView 中的文本，然后计算出现次数是否为 3 或更多，使用 NSAttributedString 并突出显示选定文本和所有类似文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:45:08.190

请检查[此](https://stackoverflow.com/questions/10572363/how-to-find-the-range-of-duplicate-or-same-words-in-uitextview-or-from-string)以从文本中获取重复的单词

为了在 textview 中突出显示单词的范围，请参考[这个](https://stackoverflow.com/questions/1940212/how-can-i-highlight-a-portion-of-the-text-of-a-uitextview)

# xpages - SSJS 等效于 LotusScript 中的 LSI_Info

> ID：15003768
> 
> 赞同：1
> 
> 时间：2013-02-21T13:41:39.140
> 
> 标签：xpages, xpages-ssjs

我的大部分代码都是用 try/catch 和[OpenLog](http://www.openntf.org/internal/home.nsf/project.xsp?name=OpenLog)处理的错误（修改为处理 SSJS 异常）。不幸的是，SSJS 中的异常使[堆栈跟踪难以阅读](https://stackoverflow.com/questions/13516712/regex-for-javascript-source)。

所以我需要传递更多信息——至少事件/方法在哪里是错误处理程序。我可以简单地将“方法 XY”参数放在每个 OpenLog.logError 调用中，但这使得每个处理程序都是独一无二的并且容易出错（程序员喜欢 copypasta）。[拥有LSI_Info](http://zatz.com/dominopower/article/lsi_info-obscure-but-useful-information-in-lotusscript/)等价物会很好，这使错误处理程序保持不变（因此您可以将它们定义为 Eclipse 中的模板）。

是否有任何调用返回 SSJS 代码（包括库）的方法/事件的“我在哪里”信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T15:12:50.610

**查看我的调试工具栏的Message**类中的代码（[在](https://github.com/markleusink/XpageDebugToolbar/blob/master/XPage%20Debug%20Toolbar/Code/Java/eu/linqed/debugtoolbar/Message.java)GitHub 上找到）。我包含一种“漂亮打印”错误的方法，还捕获了 com.ibm.jscript.InterpretException。我使用它将格式化的错误消息发送到**OpenLog**事件文档。它（某种程度上）模仿了您在默认 XPage 错误页面中获得的信息。

要查看格式化错误的样子，请转到我工具栏的[演示页面](http://demo.linqed.eu/debugToolbar/debugToolbar.nsf)并点击测试 1 或测试 2 按钮。这将引发由自定义错误表单捕获的 SSJS 错误。该表单将一条消息写入工具栏，该工具栏配置为还将错误消息存储在单独的 OpenLog 数据库中。

（可以在 OpenNTF 上找到工具栏[下载](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XPage%20Debug%20Toolbar)）

# php - $.Post 不包含任何响应

> ID：15003769
> 
> 赞同：0
> 
> 时间：2013-02-21T13:41:42.757
> 
> 标签：php, http-headers, .post

我有一个`.php`来自另一台处理数据的服务器的文件。该数据被制成表格。因此，每当我使用`$.post`正确的参数调用此页面时，它的响应都没有。我检查了我的代码，也许标题是负责它的那个。我实际上想要的是返回我的表格数据，以便我可以将其填充到另一个页面。我的标题是这样的，`header("Content-type: application/json");`. 我错过了什么？

```
$.post('http://333.333.33.33/reporting/table.php?loc_id='+locid+'&loc_type='+loctype+'',{loc_id:locid, loc_type: loctype},function(data){
    $('table#default_table').hide();
    $('div#generated_table').html(data);
}); 
```

这就是我如何称呼我的 $.post。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:45:56.617

你我的朋友已经成为同源策略的另一个受害者 - 幸运的是，这可以通过使用称为 JSONP 的方法“解决”。但是，这确实需要 GET 而不是 POST 请求。我自己不得不使用它，我不知道它是如何工作的，所以我[问了一个问题并得到了一个很好的答案！](https://stackoverflow.com/questions/6809053/simple-jquery-php-and-jsonp-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:47:15.107

您需要在 2 个不同的域之间进行通信，对吗？

您需要在这里使用 JSONP 而不是 JSON。 [检查细节](https://stackoverflow.com/questions/2067472/what-is-jsonp-all-about)

# asp.net - 解析函数中的文件路径

> ID：15003770
> 
> 赞同：1
> 
> 时间：2013-02-21T13:41:50.293
> 
> 标签：asp.net

我有一个在开发环境中工作的功能，但我需要更改路径，以便它在主机服务器上正确解析。

此代码行；

```
doc.Load("H:\Website_Sep2012\OtherDataFiles\dataXML.xml") 'this needs to be changed to the server path 
```

在这个函数内

```
Public Shared Function GetList(ByVal nodestring As String) As List(Of String)
    Dim doc As New XmlDocument()

    'Load XML from the file into XmlDocument object
    doc.Load("H:\Website_Sep2012\OtherDataFiles\dataXML.xml") 'this needs to be changed to the server path
    Dim root As XmlNode = doc.DocumentElement

    'Select all nodes with the tag paramter indicated by the nodestring variable
    Dim nodeList As XmlNodeList = root.SelectNodes(nodestring)
    Return (From node As XmlNode In nodeList Select node.InnerText).ToList()
End Function 
```

将字符串替换为`Server.MapPath("~/OtherDataFiles\dataXML.xml")`不起作用，因为 Server 在该范围内不可用。如何解决此路径的任何想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:49:29.133

你也可以试试：

[System.Web.Hosting.HostingEnvironment.MapPath()](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.mappath.aspx)不需要`HttpContext`

或者

```
using System.Web;

HttpContext.Current.Server.MapPath("~/OtherDataFiles/dataXML.xml"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:44:26.957

始终可以像这样访问服务器：

```
string filePath = System.Web.HttpContext.Current.Server.MapPath("~/OtherDataFiles/dataXML.xml");
doc.Load(filePath); 
```

如果在类库项目中，您只需添加对 System.Web 程序集的引用。

# python - 我想在 Python 中使用套接字编程流式传输网络摄像头提要

> ID：15003778
> 
> 赞同：7
> 
> 时间：2013-02-21T13:42:15.027
> 
> 标签：python, sockets, camera, streaming, pygame

这是我的代码：

### 服务器.py：

```
#The server receives the data

import socket
from PIL import Image
import pygame,sys
import pygame.camera
from pygame.locals import *
import time

host = "localhost"
port = 1890
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((host,port))
s.listen(1)
conn, addr = s.accept()
print "connected by",addr

screen = pygame.display.set_mode((640,480))

while 1:
        data = conn.recv(921637)
        image = pygame.image.fromstring(data,(640,480),"RGB")
        screen.blit(image,(0,0))
        pygame.display.update()
        if not image: 
               break;
        conn.send(data)
conn.close() 
```

### 客户端.py

```
#The client sends the data

import socket
from PIL import Image
import pygame,sys
import pygame.camera
from pygame.locals import *
import time

host = "localhost"
port = 1890
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((host, port))

pygame.init()
pygame.camera.init()
cam = pygame.camera.Camera("/dev/video0",(640,480))
cam.start()

while 1:
        image = cam.get_image()
        data = pygame.image.tostring(image,"RGB")
        s.sendall(data)     

s.close()
print "recieved", repr(data) 
```

只是为了测试，我尝试了以下代码，它工作正常，但上面没有......

没有套接字实现时的工作代码：camcapture.py

```
import sys
import time
import pygame
import pygame.camera
from pygame.locals import *

pygame.init()
pygame.camera.init()
cam = pygame.camera.Camera("/dev/video0",(640,480))
cam.start()

screen = pygame.display.set_mode((640,480))

while 1:
        image = cam.get_image()
        data = pygame.image.tostring(image,"RGB")
        img = pygame.image.fromstring(data,(640,480),"RGB")
        screen.blit(img,(0,0))
        pygame.display.update() 
```

错误是：

```
image = pygame.image.fromstring(data,(640,480),"RGB")
ValueError: String length does not equal format and resolution size 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T15:26:13.913

问题不在于相机。

问题是您通过套接字发送了一个非常大的字符串，并且您错误地假设您可以一次读取整个字符串`conn.recv(921637)`。

您必须多次调用`recv`才能接收所有数据。尝试打印`data`您发送的长度并在调用之前`client.py`打印输入的长度，您会看到。`data``server.py``pygame.image.fromstring`

有几种方法可以解决这个问题：

*   为您发送的每张图片建立新的连接
*   发送数据的大小，以便服务器知道要读取多少数据
*   使用某种结束标记

* * *

这是一个简单的例子：

### 发件人：

```
import socket
import pygame
import time

host = "localhost"
port = 1890
pygame.init()
image = pygame.surface.Surface((640, 480))
i=0
j=0
while 1:
    image.fill((i,j,0))
    i+=10
    j+=5
    if i >= 255: i = 0
    if j >= 255: j = 0
    data = pygame.image.tostring(image,"RGB")
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((host, port))
    s.sendall(data)
    s.close()
    time.sleep(0.5) 
```

### 接收者：

```
import socket
import pygame

host="localhost"
port=1890

screen = pygame.display.set_mode((640,480))

while 1:
    s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.bind((host,port))
    s.listen(1)
    conn, addr = s.accept()
    message = []
    while True:
        d = conn.recv(1024*1024)
        if not d: break
        else: message.append(d)
    data = ''.join(message)
    image = pygame.image.fromstring(data,(640,480),"RGB")
    screen.blit(image,(0,0))
    pygame.display.update() 
```

# matlab - 从 Matlab 发布到 Latex

> ID：15003779
> 
> 赞同：6
> 
> 时间：2013-02-21T13:42:16.360
> 
> 标签：matlab, latex, publish

在从 Matlab 生成 Latex 输出时，我在命令窗口中使用了以下内容：

```
publish('filename.m',struct('format','latex','showCode',false,  ...
        'maxWidth',3,'outputDir','Desktop')); 
```

生成的乳胶文件的图形宽度始终为 4 英寸。即使我
将 maxWidth 更改为 5、6、1000 等，图形宽度始终保持不变：4 英寸。

如何直接从 Matlab 改变乳胶中的图形宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:14:46.403

看起来`maxWidth`选项只影响像素图像，如 png、bmp 等。它影响实际图像大小，因此将 maxWidth 设置为 3，您将获得最大 3 像素宽度的图像。它不受格式本身的控制，例如`width`html 或 latex 中的参数。PUBLISH 函数使用 XML 作为中间格式，我相信这是当前 XML 模式设计的问题。

使用乳胶格式 PUBLISH 默认使用 epsc2 打印驱动程序并生成 EPS 格式的矢量图像。所以 maxWidth 被简单地忽略了。如果您`...'imageFormat','png',...`在发布调用中使用，您会注意到输出 png 文件的大小根据`maxWidth`. 无论如何，tex 文档中图像的大小将为 4 英寸（在低 maxWidth 的情况下图像分辨率不佳），如乳胶的默认样式表中设置的那样。

看起来无法在 PUBLISH 中更改此行为。

您可以修改 xml 样式表 (matlabroot/toolbox/matlab/codetools/private/mxdoom2latex.xls)。

检查这些行：

```
<xsl:template match="img">
\includegraphics [width=4in]{<xsl:value-of select="@src"/>}
</xsl:template> 
```

复制此文件，修改并使用`stylesheet`选项指定新文件。

或者只是更改输出 .tex 文件中的宽度参数。

# symfony - 来自 routing.yml 的 Symfony2 模板配置

> ID：15003781
> 
> 赞同：0
> 
> 时间：2013-02-21T13:42:30.837
> 
> 标签：symfony

在处理 Sylius 电子商务捆绑包时，我发现似乎是一种为路线配置模板的方法，但我不知道：

我已经在安装了供应商的全新 Symfony RC 2.2.0 中进行了测试。这将在 routing.yml

```
_welcome:
    pattern:  /
    defaults:
      _controller: AcmeDemoBundle:Welcome:index
      _template: AcmeDemoBundle:Welcome:index # added by me 
```

这会产生一个错误：

> FatalErrorException: 错误: 调用 .... \vendor\sensio\framework-extra-bundle\Sensio\Bundle\FrameworkExtraBundle\EventListener\TemplateListener.php 中的非对象的成员函数 getTemplate() 第 62 行

现在，在 TemplateListener 中，我们拥有的是：

```
 if (!$configuration = $request->attributes->get('_template')) {
        return;
    }

    if (!$configuration->getTemplate()) {
        $guesser = $this->container->get('sensio_framework_extra.view.guesser');
        $configuration->setTemplate($guesser->guessTemplateName($controller, $request, $configuration->getEngine()));
    } 
```

$configuration 是一个String，其实就是我在routing.yml(AcmeDemoBundle:Welcome:index)中放的模板。通过添加 a`var_dump`并检查 ParameterBag -> get 方法来检查它是什么`$request->attributes`。

所以。为什么 TemplateListener 需要一个对象？我错过了什么？我在 routing.yml 中配置错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:53:16.900

Symfony 本身没有这个参数。

功能由**SyliusResourceBundle**提供，仅在 Sylius 控制器中可用。显然`_template`请求属性与使用相同名称存储对象的 SensioFrameworkExtraBundle 冲突。

我们必须将这些参数移到更深的一个配置节点，以避免将来出现此类问题。您可以密切关注[https://github.com/Sylius/SyliusResourceBundle](https://github.com/Sylius/SyliusResourceBundle)存储库，修复程序应该在今天到达。

# java - Javafx 应用程序中的内存问题

> ID：15003782
> 
> 赞同：0
> 
> 时间：2013-02-21T13:42:33.373
> 
> 标签：java, performance, memory-management, memory-leaks, javafx

我在 netbean 中创建了一个 Javax 应用程序。我正面临着它的内存问题。我有一个表，其中包含需要处理的项目列表，我正在处理多线程中项目的任务。当它一一处理项目时，它会增加系统内存

**我对上述过程的发现** Netbean - 将内存从 ~130 到 300mb Jar - 当我使用相同的源代码运行构建 exe 并运行应用程序时，内存从 ~130 到 300mb 并运行应用程序，它需要 300m 到 800mb/1100mb，所以没有我们在设置中传递以下参数的构建 exe....

```
<target name="CreatingExe" depends="SignedJar">
<fx:deploy width="800" height="600" nativeBundles="all" outdir="${dist}/winx86" outfile="${app.name}" verbose="true">
<fx:info title="${app.title}"/>
<fx:application name="${app.title}" mainClass="${main.class}"/>
<fx:resources>
<fx:fileset dir="${dist}/winx86" includes="*.jar"/>
<fx:fileset dir="${WorkingFolder}/temp"/>
</fx:resources>
<fx:platform>
<fx:jvmarg value="-Xms512m"/>
<fx:jvmarg value="-Xmx1g"/>
<fx:jvmarg value="-XX:NewRatio=2"/>
<fx:jvmarg value="-XX:MaxPermSize=250m"/>
</fx:platform>
</fx:deploy>
</target> 
```

使用这个构建 exe，我捆绑了 jre (java 7) 的副本

我需要添加更多设置以减少内存使用量。

# java - 如何替换 android 4.0.3 的 type_orientation（已弃用）？

> ID：15003787
> 
> 赞同：23
> 
> 时间：2013-02-21T13:43:02.993
> 
> 标签：java, android, eclipse, android-sensors

您好，我想使用该类型`type_orientation`，但不推荐使用 android 4.0.3 。我将它用于增强现实。我试图在网上找到但没有成功。我的应用程序有效，但我里面的文字留在同一个地方！这是我的代码：

```
 @Override
    protected void onStart() {      
        super.onStart();
        sensorMngr = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        sensorLstr = createListener();
        sensorMngr.registerListener(sensorLstr, sensorMngr.getDefaultSensor(Sensor.TYPE_ORIENTATION), SensorManager.SENSOR_DELAY_UI);
    }

    @Override
    protected void onStop() {       
        super.onStop();
        sensorMngr = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        sensorMngr.unregisterListener(sensorLstr, sensorMngr.getDefaultSensor(Sensor.TYPE_ORIENTATION));        
    } 
```

一切都很好，我已经在[http://developer.android.com/reference/android/hardware/Sensor.html](http://developer.android.com/reference/android/hardware/Sensor.html)上看过，但我听不懂（我是法国人，我的英语不是很完美...... ） 非常感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-04T20:53:11.240

[这是一个](http://www.codingforandroid.com/2011/01/using-orientation-sensors-simple.html)包含解决方案的博客的链接。从本质上讲，您停止使用方向传感器并同时使用磁场传感器和加速度传感器来获得等效的功能。这是更多的工作，但它确实允许您继续使用回调来处理方向更改。

编辑：由于原始站点不再可用，因此这里是以前托管在那里的代码示例：

```
package com.samplecompass;
import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.view.View;

public class CompassActivity extends Activity implements SensorEventListener {

  Float azimut;  // View to draw a compass

  public class CustomDrawableView extends View {
    Paint paint = new Paint();
    public CustomDrawableView(Context context) {
      super(context);
      paint.setColor(0xff00ff00);
      paint.setStyle(Style.STROKE);
      paint.setStrokeWidth(2);
      paint.setAntiAlias(true);
    };

    protected void onDraw(Canvas canvas) {
      int width = getWidth();
      int height = getHeight();
      int centerx = width/2;
      int centery = height/2;
      canvas.drawLine(centerx, 0, centerx, height, paint);
      canvas.drawLine(0, centery, width, centery, paint);
      // Rotate the canvas with the azimut      
      if (azimut != null)
        canvas.rotate(-azimut*360/(2*3.14159f), centerx, centery);
      paint.setColor(0xff0000ff);
      canvas.drawLine(centerx, -1000, centerx, +1000, paint);
      canvas.drawLine(-1000, centery, 1000, centery, paint);
      canvas.drawText("N", centerx+5, centery-10, paint);
      canvas.drawText("S", centerx-10, centery+15, paint);
      paint.setColor(0xff00ff00);
    }
  }

  CustomDrawableView mCustomDrawableView;
  private SensorManager mSensorManager;
  Sensor accelerometer;
  Sensor magnetometer;

  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mCustomDrawableView = new CustomDrawableView(this);
    setContentView(mCustomDrawableView);    // Register the sensor listeners
    mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
      accelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    magnetometer = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
  }

  protected void onResume() {
    super.onResume();
    mSensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_UI);
    mSensorManager.registerListener(this, magnetometer, SensorManager.SENSOR_DELAY_UI);
  }

  protected void onPause() {
    super.onPause();
    mSensorManager.unregisterListener(this);
  }

  public void onAccuracyChanged(Sensor sensor, int accuracy) {  }

  float[] mGravity;
  float[] mGeomagnetic;
  public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
      mGravity = event.values;
    if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
      mGeomagnetic = event.values;
    if (mGravity != null && mGeomagnetic != null) {
      float R[] = new float[9];
      float I[] = new float[9];
      boolean success = SensorManager.getRotationMatrix(R, I, mGravity, mGeomagnetic);
      if (success) {
        float orientation[] = new float[3];
        SensorManager.getOrientation(R, orientation);
        azimut = orientation[0]; // orientation contains: azimut, pitch and roll
      }
    }
    mCustomDrawableView.invalidate();
  }
} 
```

# jenkins - 詹金斯存档工件不包括所有子目录

> ID：15003788
> 
> 赞同：0
> 
> 时间：2013-02-21T13:43:03.537
> 
> 标签：jenkins, archive, artifact, fileset

我在 Jenkins 有几份工作，将源树中的工件存档用于另一份工作（一些单元测试或类似的）。我有目前的情况：

```
top_dir
  \scripts_dir
      \some_files
      \dir1
      \dir2
      \dir3
  \other_dir 
```

我想归档“top_dir”中的所有内容，包括“scripts_dir”中的*文件*，但不归档“scripts_dir”中的子目录“dir1，dir2，...”，我不知道它们的名称。这些子目录实际上是指向磁盘上其他位置的 Windows 目录连接，我不希望它们被复制。

如何使用 Jenkins 的 inculde/excludes 模式实现这一点？

我已经试过了，有 include=top_dir/ ， exclude=

```
**/scripts_dir/*/
**/scripts_dir/*/**
**/scripts_dir/**/* 
```

但它总是排除整个“scripts_dir”文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:05:56.260

最后，通过使用蛮力，我发现以下表达式确实排除了`scripts_dir`（无论是否有符号链接）的子目录中的所有文件，然后删除这些子目录，同时将文件直接保留在`scripts_dir`：

```
**/scripts_dir/**/*/*/ 
```

无论如何感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:59:36.153

阅读[ANT 手册](http://ant.apache.org/manual/Types/fileset.html)，有一个`followsymlinks`属性默认为 true。您说您要排除的那些东西是符号链接（尽管我不确定这是否适用于 Windows 关节）。尝试添加`followsymlinks=false`

另一种解决方案：如果您的所有文件在`scripts_dir`扩展名中都有一定数量的字符，您可以将其放入您的 include 语句中。这只会拾取扩展名为 3 个字符的文件：
`**/scripts_dir/*.???`
更多信息请[点击此处](http://ant.apache.org/manual/dirtasks.html#patterns)

# python - Python 用 for 循环绘图

> ID：15003789
> 
> 赞同：0
> 
> 时间：2013-02-21T13:43:06.213
> 
> 标签：python

我是 python 和绘图的新手。我试图使用以下脚本生成一个情节。目标是为所有值绘制 Q 与 F 的关系图。

```
from pylab import *

n = 5
D = 13
B = 10

x = linspace(-6.5, 6.5, 1000)
y = 1/sqrt(2*pi)*exp(-(x)**2/2)

for i in range(1,n):
    F = sum(y*cos(2*pi*i*x/D)*exp(-i**2*B/(4*D**2)))
    print F

for j in range(1,n):
    Q = 2*pi*(j)/D
    print Q

plt.plot(Q,F,'rx')
plt.show() 
```

当我运行脚本时，它只绘制一个数据点而不是全部。我敢肯定，我犯了一些愚蠢的错误。有人可以帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:46:19.227

这是因为您将 F 和 Q 设置为每个循环上的值，而不是将值附加到数组的末尾。

```
from pylab import *

n = 5
D = 13
B = 10

x = linspace(-6.5, 6.5, 1000)
y = 1/sqrt(2*pi)*exp(-(x)**2/2)

F,Q = [],[]

for i in range(1,n):
    F.append(sum(y*cos(2*pi*i*x/D)*exp(-i**2*B/(4*D**2))))
    Q.append(2*pi*(j)/D)

plt.plot(Q,F,'rx')
plt.show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:45:45.210

您只是在循环中设置 Q、F 相等。

```
from pylab import *

n = 5
D = 13
B = 10

x = linspace(-6.5, 6.5, 1000)
y = 1/sqrt(2*pi)*exp(-(x)**2/2)

for i in range(1,n):
    F.append(sum(y*cos(2*pi*i*x/D)*exp(-i**2*B/(4*D**2))))
    print F
    Q.append(2*pi*(j)/D)
    print Q

plt.plot(Q,F, 'rx')    
plt.show() 
```

# c - 添加值时保持相同的数组大小

> ID：15003791
> 
> 赞同：0
> 
> 时间：2013-02-21T13:43:14.143
> 
> 标签：c, arrays

我试图想办法将命令的历史记录保存在一个大小为 [10] 的数组中，并在保持其大小不变的同时，始终显示最后 10 个命令。是否有不涉及队列或列表的实现？也许是这样，给数组更多的空间，并填充命令，但打印不同的索引？我在 Windows 机器上使用 C。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:45:55.960

你想要一个[循环缓冲区](http://en.wikipedia.org/wiki/Circular_buffer)。周围有很多实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:48:55.687

只需将您的数组视为循环缓冲区并保持一个`cur`指向最新条目的变量即可。

*   要添加条目：

    ```
    cur = (cur + 1) % size; 
    ```

*   要打印数组中的所有内容：

    ```
    printf("%d\n", cur);
    for (i = (cur + 1) % size; i != cur; i = (i + 1) % size)
        printf("%d\n", i); 
    ```

# css - 如何在 IE 中重新创建框这个阴影效果

> ID：15003795
> 
> 赞同：0
> 
> 时间：2013-02-21T13:43:20.143
> 
> 标签：css

这是我要复制的内容：

```
 -webkit-box-shadow: 0px 0px 3px 5px black; 
```

这是我在 IE 中尝试过的：

```
filter: progid:DXImageTransform.Microsoft.DropShadow(OffX=5, OffY=5, Color=#000000); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:31:53.003

使用过滤器

```
filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=5, OffY=5, Color='#00000000'); 
```

[您可以在 MSDN 上](http://samples.msdn.microsoft.com/workshop/samples/author/filter/DropShadow.htm)测试过滤器

# mysql - 用于 ios 的 MySQL 包装器

> ID：15003796
> 
> 赞同：2
> 
> 时间：2013-02-21T13:43:20.257
> 
> 标签：mysql, ios, objective-c, database

我正在开发我的第一个 iOS 应用程序，我想使用 MySQL 作为我的远程数据库。

我一直在 Stack 上四处寻找和阅读，但我找不到`new`问题的答案。那里有没有好的包装纸？我找到了这个链接：[mysql for ios](http://www.karlkraft.com/index.php/2010/09/17/mysql-for-iphone-and-osx/)，但它明确指出不能保证在 App Store 中被接受。

我真的想要一个包装器而不是使用某种网络服务。

有人对此有更多更新的消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:10:04.297

最好的办法是使用 SQLite 或 CoreData 库，它们的开销非常低。CoreData 内置于 iOS 功能中，SQLite 只需要导入 .db 文件和库（iOS 的一部分）。

如果你能以某种方式让你的 MySQL 数据库联机并通过 REST 公开它，你可能会使用 REST 来获取和设置数据进出数据库。但这会减慢您的应用程序的爬行速度。

CoreData 速度很快，当在这样的上下文中使用数据时，它可以简化一切。编写 SQL 语句正在慢慢成为一个古老的过程。

# javascript - 仅调用 Javascript 函数的第一部分

> ID：15003798
> 
> 赞同：0
> 
> 时间：2013-02-21T13:43:39.800
> 
> 标签：javascript, if-statement, syntax

我所做的这个函数有问题，第一部分调用得很好，但在第一个 if 语句之后没有调用其他任何东西。我用过 JSfiddle，但它并没有发现一个严重的问题。

我通常使用 PHP 而不是 JS，所以我想知道这里是否缺少一些简单的东西？

```
function validatequestion(form){
        var e = document.getElementById("chooseqtype");
        var strQtype = e.options[e.selectedIndex].value;

        if(strQtype == "default"){
            alert("Please select a question type");
            return false;
        }

        if(strQtype == "textquestion"){
            fail = validatetextq(form.textquestiondesc.value)
            if(fail == "") return true
            else {
                alert(fail);
                return false;
            }
        }

        if(strQtype == "videoquestion"){
            fail = validatevideoq(form.videoquestiondesc.value)
            if(fail == "") return true;
            else {
                alert(fail);
                return false;
            }
        }

        //everything above works, after this point nothing seems to get called
        var a = document.getElementById("chooseatype");
        var strAtype = a.options[a.selectedIndex].value;

        if(strAtype == "textanswer"){
            //get the value of the number of text answers select box
            var t = document.getElementById("choosetextnumber");
            //put the value in variable strQtype
            var strTextno = t.options[t.selectedIndex].value;

            if(strTextno == "2tanswers"){
                fail = validatetexta1(form.textanswer1.value)
                fail += validatetexta2(form.textanswer2.value)
                if(fail == "") return true;
                else {
                    alert(fail);
                    return false;
                }
            }

        }   

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:59:06.973

如果`strQtype`只能是您正在测试的 3 个值之一，那么您将无法进入代码的第二部分，因为您总是从每个`if`语句中返回。

编辑：

你需要做的**不是** `return`什么时候`fail == ""`。由于您只是返回`true`，我假设您不需要返回值，只需验证验证是否成功。你应该做的只是测试失败，例如`if (! fail=="" )` （语法可能是错误的，javascript 不是我的第一个语言。）在这种情况下，做你的`alert`.

或者你总是可以只写 3 个不同的函数，一个来测试每个菜单项，这就是我可能会做的。

# php - 对于拥有大量用户的社区网站，我应该使用什么数据库引擎？

> ID：15003802
> 
> 赞同：-3
> 
> 时间：2013-02-21T13:43:51.687
> 
> 标签：php, mysql, database, rdbms

我需要的是一个 RDBMS，它允许非常快速地检索小块数据（例如，用户的帖子、帖子的喜欢等），但在并发插入时同样快（例如，当有一个查询正在运行以检索喜欢一个项目，200 人可能喜欢 200 个其他帖子）。

我读到 Facebook 面临 MySQL 的问题，并且已经做了大量的分片来弥补 MySQL 在处理大量事务方面的缺点。我正在寻找一种解决方案，它允许开发人员只编写代码，并将扩展留给数据库引擎。我听说 NewSQL 引擎对此很有用，但我没有第一手知识，并且正在寻找管理过具有大量数据和并发事务的系统的人，并且需要非常短的查询时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:12:44.213

如果您的产品尚未编写，请使用您已经使用的任何技术将其编写好。使用标准的关系数据库，如果您想在 MySQL 和其他数据库之间轻松交换，可以使用 ORM。然后，如果您遇到缩放问题，请从那里修复。同时，您可以向外扩展。

这里的关键信息是：如果您不确定是否需要它，请不要在扩展成本上花费大量精力。如果您想了解更多相关信息，请搜索“过早优化是万恶之源” `:)`。

出于这个原因，我喜欢将 Propel 与 Web 框架相结合。我从 MySQL 之类的东西开始，然后我可能会决定 PostgreSQL 更适合 - 如果我已经完成了“推进方式”的所有工作，那么切换到新引擎是微不足道的 - 重建并继续。即使我出于性能原因使用了自定义 SQL，一个好的 MVC 结构也可以让分支、找出需要更改的内容以及为新系统进行修改变得更加容易。

如果您以后需要它，您可以将完全不同的系统零散地连接起来。可能是一张巨大的表导致了性能问题——将 HTML 片段缓存到内存缓存，或者在 NoSQL 中以非规范化的形式存储一些数据。在实践中，以上所有内容的混合比从一个到另一个的“纯粹”转换更实用，而且工作量也少得多！

# sql - Ruby on Rails：SQLite3::SQLException：没有这样的列：

> ID：15003804
> 
> 赞同：-1
> 
> 时间：2013-02-21T13:43:59.073
> 
> 标签：sql, ruby-on-rails, associations, rails-activerecord

```
SELECT "groups".* FROM "groups"
INNER JOIN "groups_interests" ON "groups"."id" = "groups_interests"."group_id"
WHERE "groups_interests"."interest_id" = 1

SQLite3::SQLException: no such column: groups_interests.interest_id: SELECT "groups".* FROM "groups" INNER JOIN "groups_interests" ON "groups"."id" = "groups_interests"."group_id" WHERE "groups_interests"."interest_id" = 1

ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: groups_interests.interest_id: SELECT "groups".* FROM "groups" INNER JOIN "groups_interests" ON "groups"."id" = "groups_interests"."group_id" WHERE "groups_interests"."interest_id" = 1 
```

我想我对外键和 has_many 关系有误解

为了得到错误，我使用了 rails c

```
Interest.find(1).groups 
```

我也希望这个命令正确运行

```
Groups.find(5).interests

class Group < ActiveRecord::Base
  attr_accessible :description, :name, :project_id
  has_many :students
  has_many :group_interests
  has_many :interests, :through => :group_interests
  belongs_to :project

  validates :name, presence: true, uniqueness: { case_sensitive: false }
end

class Interest < ActiveRecord::Base
  attr_accessible :name

  has_many :group_interests
  has_many :groups, :through => :group_interests

  validates :name, presence: true, uniqueness: { case_sensitive: false }

end

class GroupInterest < ActiveRecord::Base
  attr_accessible :group_id, :interest_id

  belongs_to :groups
  belongs_to :interests

end 
```

[我从ruby​​ on rails guides](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)得到了这样做的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:51:40.657

**你的错误原因：**有两个错别字

```
class GroupInterest < ActiveRecord::Base
  attr_accessible :group_id, :interest_id

  belongs_to :groups      #should be :group
  belongs_to :interests   #should be :interest

end 
```

*   `Group`has_many `:group_interests`（复数）
*   `GroupInterest`属于_to `:group` （单数）

**编辑**`has_and_belongs_to_many`-除非您确定永远不需要关联表中的新属性，否则不要使用。`has_many :through`灵活得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:48:11.260

```
 class GroupInterest < ActiveRecord::Base
  attr_accessible :group_id, :interest_id

  belongs_to :group
  belongs_to :interest

end

Group.find(5).interests 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T13:49:19.317

你为什么不使用[has_and_belongs_to_many](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_and_belongs_to_many)：

```
class Group < ActiveRecord::Base
  attr_accessible :description, :name, :project_id
  has_many :students
  has_and_belongs_to_many :interests
  belongs_to :project
  validates :name, presence: true, uniqueness: { case_sensitive: false }
end

class Interest < ActiveRecord::Base
  attr_accessible :name  
  has_and_belongs_to_many :groups
  validates :name, presence: true, uniqueness: { case_sensitive: false }
end

class GroupInterest < ActiveRecord::Base
  attr_accessible :group_id, :interest_id    
end 
```

您需要更改您的表结构`join_table`。请参阅为此提供的链接。

# android - 如何在android上的sd卡中获取默认图片文件夹？

> ID：15003806
> 
> 赞同：0
> 
> 时间：2013-02-21T13:43:59.767
> 
> 标签：android

我有一个小应用程序，可以显示来自网络的图片。我希望我的用户能够将图片保存到 sd 卡，但我不想将它们保存在根文件夹中。有没有办法在 sd 卡中获取默认图片文件夹来保存图片？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:50:44.010

这种方法可以如愿以偿。为我工作

```
private String getAlbumName() {
    return root folder name;
}

public File getAlbumDir() {
    File storageDir = null;

    if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {

        storageDir = mAlbumStorageDirFactory.getAlbumStorageDir(getAlbumName());

        if (storageDir != null) {
            if (! storageDir.mkdirs()) {
                if (! storageDir.exists()){
                    Log.d("CameraSample", "failed to create directory");
                    return null;
                }
            }
        }

    } else {
        Log.v(getString(R.string.app_name), "External storage is not mounted READ/WRITE.");
    }

    return storageDir;
} 
```

# c# - IHttpModule RewritePath 与 StatusCode 404

> ID：15003807
> 
> 赞同：0
> 
> 时间：2013-02-21T13:44:00.517
> 
> 标签：c#, asp.net, iis-7, httpmodule, ihttpmodule

我有一个如下所示的 URL：/employees?employeeId=3992，它显示 ID 为 3992 的员工。它工作正常，HTTP 状态代码为 200 OK。

但是，当有人在 URL 中写入无效 ID 时，例如：/employees?employeeId=39920，我希望我的 HTTP 处理程序重写错误页面的路径，并发送 HTTP 状态代码 404。

这是我正在使用的代码：

```
if (employee == null)
{
    context.RewritePath("/error-page");
    context.Response.StatusCode = 404; // if I remove this line, the error-page is displayed, and the StatusCode is 200.
} 
```

当我将 HTTP 状态代码设置为 404 时，页面会显示此标准 ASP.NET 404 错误页面。

![在此处输入图像描述](../Images/2fac7603542a7e3234ca3ef8971822e0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:47:03.500

也叫

```
context.Response.TrySkipIisCustomErrors = true; 
```

例如：

```
if (employee == null)
{
    context.Response.TrySkipIisCustomErrors = true;
    context.RewritePath("/error-page");
    context.Response.StatusCode = 404; 
} 
```

# xaml - 如何正确地将 RibbonGalleryCategory 绑定到集合

> ID：15003810
> 
> 赞同：3
> 
> 时间：2013-02-21T13:44:13.147
> 
> 标签：xaml, data-binding, ribbon

我正在使用 Microsoft.Windows.Controls.Ribbon。

我想在我的功能区中有一个带有图片按钮的动态组合框。

如果我直接在 xaml 中执行此操作，我会得到我想要的：

```
<ribbon:RibbonComboBox 
                      SelectionBoxWidth="62"
                      VerticalAlignment="Center" 
                      >
                    <ribbon:RibbonGallery SelectedValue="0"
                      SelectedValuePath="Content"
                      MaxColumnCount="1">
                        <ribbon:RibbonGalleryCategory>
                            <ribbon:RibbonButton Label="Histo"  HorizontalContentAlignment="Stretch"
                                       Command="{Binding NewHistogrammCommand}" 
                                       SmallImageSource="/Test;component/Resourcen/Histogramm32.png" 
                                       LargeImageSource="/Test;component/Resourcen/Histogramm32.png" />
                            <ribbon:RibbonButton Label="3D"  HorizontalContentAlignment="Stretch"
                                       Command="{Binding NewDreiDCommand}" 
                                       SmallImageSource="/Test;component/Resourcen/DreiD32.png" 
                                       LargeImageSource="/Test;component/Resourcen/DreiD32.png" />
                        </ribbon:RibbonGalleryCategory>
                    </ribbon:RibbonGallery>
                </ribbon:RibbonComboBox> 
```

但是，如果我尝试通过这种方式绑定到集合来做到这一点：

```
 <ribbon:RibbonComboBox 
                      SelectionBoxWidth="62"
                      VerticalAlignment="Center" 
                      IsEditable="True" >
                    <ribbon:RibbonGallery
                      MaxColumnCount="1">
                        <ribbon:RibbonGalleryCategory ItemsSource="{Binding LayoutContentTypeList, ElementName=mainWindow}">
                            <ribbon:RibbonGalleryCategory.ItemTemplate>
                                <DataTemplate>
                                    <ribbon:RibbonButton Label="{Binding Header}" HorizontalContentAlignment="Stretch"
                                           Command="{Binding Command}" 
                                           CommandParameter="{Binding CommandParameter}" 
                                           SmallImageSource="{Binding ImageSource}"
                                           LargeImageSource="{Binding ImageSource}" />
                                </DataTemplate>
                            </ribbon:RibbonGalleryCategory.ItemTemplate>
                        </ribbon:RibbonGalleryCategory>
                    </ribbon:RibbonGallery>
                </ribbon:RibbonComboBox> 
```

我明白了

> System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“ContentPresenter”（名称=“”）上找不到“IsDropDownOpen”属性。绑定表达式：路径=IsDropDownOpen；DataItem='ContentPresenter' (Name=''); 目标元素是'RibbonButton'（名称=''）；目标属性是“NoTarget”（类型“对象”）

按钮可以正常工作，但如何解决此绑定错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-18T15:28:50.707

我猜您已经找到了解决问题的方法，但是对于遇到此帖子的其他人，在寻找答案时，您可以找到一个完整的解决方案，您可以在[我如何添加中下载并在闲暇时检查画廊到我的功能区？](http://blogs.msdn.com/b/wpf/archive/2010/08/04/how-do-i-add-galleries-to-my-ribbon.aspx)在“Windows Presentation Foundation 团队的官方博客”上发帖。基本思路如下。

无论您设置为什么对象，都`RibbonGallery.DataContext`应该有一个集合属性来绑定到该`RibbonGalleryCategory.ItemsSource`属性。该集合中的对象应具有包含您希望在图库项目中显示的值的属性。声明一个`HierarchicalDataTemplate`来`RibbonGallery.CategoryTemplate`绑定你的属性。这是链接帖子中的一个示例：

```
<Ribbon:RibbonGallery DataContext="{x:Static data:WordModel.StylesParagraphGalleryData}" 
ItemsSource="{Binding CategoryDataCollection}" 
ScrollViewer.VerticalScrollBarVisibility="Hidden">
    <Ribbon:RibbonGallery.CategoryTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding GalleryItemDataCollection}">
            <Border Background="LightGray">
                <TextBlock Text="{Binding}" FontWeight="Bold" />
            </Border>
            <HierarchicalDataTemplate.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Image Source="Images\Paragraph_32x32.png" />
                        <TextBlock Margin="10,0,0,0" Text="{Binding}" />
                    </StackPanel>
                </DataTemplate>
            </HierarchicalDataTemplate.ItemTemplate>
        </HierarchicalDataTemplate>
    </Ribbon:RibbonGallery.CategoryTemplate>
</Ribbon:RibbonGallery> 
```

# java - java执行期间log4j更改CONSOLE阈值

> ID：15003813
> 
> 赞同：0
> 
> 时间：2013-02-21T13:44:22.183
> 
> 标签：java, log4j

我在我的`log4j.properties`文件中：

```
log4j.rootLogger=WARN, CONSOLE, FILEWARN
...
log4j.appender.CONSOLE.threshold=ERROR
... 
```

在 Java 执行期间，我想把它放到`WARM`.

我没有找到类似`Logger.getRootLogger().getAppender("CONSOLE").`*...setThreshold("WARN")*
之类的东西 ，它是某种方法的解决方案，还是我必须在
`log4j.appender.CONSOLE.threshold=WARN`里面重新加载一些专用属性文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:51:05.700

该`setThreshold`方法是在`AppenderSkeleton`（所有标准附加程序的抽象基类）上定义的，而不是`Appender`直接在接口上定义的。

```
((AppenderSkeleton)Logger.getRootLogger().getAppender("CONSOLE"))
  .setThreshold(Level.WARN); 
```

# java - 从java中查找sql 和mysql和pgsql中的最后一个查询执行时间

> ID：15003820
> 
> 赞同：0
> 
> 时间：2013-02-21T13:44:31.663
> 
> 标签：java, mysql, sql, postgresql

我需要使用查询在 mysql/sql/pgsql 中执行最后一次查询的时间......我怎样才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:50:05.233

MySql 生成一个日志日志，包括查询日志。[在此处](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)查看日志所在位置以及如何配置它的详细信息。现在您可以打开文件并找到任何查询，包括最后一个。

# php - 在 Javascript/PHP 中无重复随机数

> ID：15003825
> 
> 赞同：5
> 
> 时间：2013-02-21T13:44:48.253
> 
> 标签：php, javascript, arrays, shuffle

我在这里搜索了一些答案，但它似乎不是我需要的东西，或者我只是不知道如何应用它。

我还没有开始任何代码，我只是在想怎么做，我不知道怎么做。我需要你们的帮助。

假设我有一个由以下这些值组成的数组

```
[1,2,3,4,5,6,7,8,9] 
```

而且我需要在不重复**最后一个结果**的每个数字的位置的情况下对其进行洗牌。所以它可能会喜欢

```
[5,3,9,6,2,8,1,4,7] 
```

如果我再次洗牌它会像

```
[4,7,2,1,8,3,6,9,5] 
```

等等。

好吧，我不知道是否与它有任何相关性，但是，我宁愿不使用**rand()**。这东西有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:50:39.850

试试这个，

```
$count = 15;
$values = range(1, $count);
shuffle($values);
$values = array_slice($values, 0, 15); 
```

**或者**

```
$numbers = array();
do {
   $possible = rand(1,15);
   if (!isset($numbers[$possible])) {
      $numbers[$possible] = true;
   }
} while (count($numbers) < 15);
print_r(array_keys($numbers)); 
```

这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:04:07.857

您要做的是将数组中的元素随机添加到另一个数组，但要确保元素不在相同的索引位置。试试这个：

```
$array = [1,2,3,4,5,6,7,8,9];
$new = array();
for($i = 0; $i < $array.length; $i++){
  $rand = $i;
  do {
    $rand = Math.floor( Math.random() * ( $array.length + 1 ) );
  } while ($rand == $i || array_key_exists($rand, $new))
  // Check that new position is not equal to current index
  // and that it doesnt contain another element

  $new[$rand] = $array[i];
} 
```

不是最有效的，但保证将元素放在不同的索引中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:57:36.403

您可以使用[Fisher-Yates-Shuffle](http://en.wikipedia.org/wiki/Fisher-Yates_shuffle)的变体，它会随机选择交换的元素，称为[Sattolo 算法](http://en.wikipedia.org/wiki/Fisher-Yates_shuffle#Sattolo.27s_algorithm)：

```
function shuffleArray(array) {
    for (var i = array.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * i); // no +1 here!
        var temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }
    return array;
} 
```

这样，可以保证每个元素都被交换并且不会出现在与以前相同的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T13:50:04.907

这使得数组的值不会重复 n 次随机播放的任何先前位置（我使用数组大小​​的一半作为 n，之后我重新启动禁止索引）。最后修改了这个版本，使其不重复当前位置。

为此，您必须保存原始数组的每个值所在的所有索引的历史记录。为此，我为您的数字增加了一点复杂性

```
var numberArray = [{value:1, unavailable_indexes:[0]},
                   {value:2, unavailable_indexes:[1]},
                   {value:3, unavailable_indexes:[2]},
                   {value:4, unavailable_indexes:[3]},
                   {value:5, unavailable_indexes:[4]},
                   {value:6, unavailable_indexes:[5]},
                   {value:7, unavailable_indexes:[6]},
                   {value:8, unavailable_indexes:[7]},
                   {value:9, unavailable_indexes:[8]}
                  ]; 
```

这样你就有了值中的数字和它所在的所有位置的数组。接下来我们需要运行所有数组并切换数字。

```
var arrayLen = numberArray.length-1;
$.each(numberArray, function(index, value){
    var newIndex;
    //restart the array when half of the index have been covered or it will take awhile to get a random index that wasn't used
    if(value.unavailable_indexes.length >= numberArray.length/2)
        value.unavailable_indexes = [index];//restart the unavailable indexes with the current index as unavailable
    do{
        newIndex = Math.floor(Math.random()*arrayLen);
    //verify if you can swap the 2 values, if any of them have been on the destination index get another random index
    }while($.inArray(value.unavailable_indexes, newIndex) || $.inArray(numberArray[newIndex].unavailable_indexes, index));

    numberArray[index] = numberArray[newIndex];
    numberArray[newIndex] = value;
}) 
```

在所有阵列移动后，您需要保存它们降落的位置

```
$.each(numberArray, function(index, value){
   value.unavailable_indexes.push(index);
} 
```

**编辑：**如果你只是想防止它只是重复以前的位置然后`unavailable_indexes`保持它的最后一个位置并替换为`do{...}while()`：

```
do{
    newIndex = Math.floor(Math.random()*arrayLen);
}while(newIndex != value.unavailable_indexes) 
```

最后一种方法看起来像：

```
$.each(numberArray, function(index, value){
   value.unavailable_indexes = index;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-02T16:53:10.970

我刚刚想出了以下代码，以解决我遇到的一个问题，有时我的随机打乱的数组会以原始顺序结束（是*太*随机了，还是不够随机*？*）。

它是如何工作的，它在一个 while 循环上循环，直到 $isDifferent 变量变为真，这只有在数组不匹配时才会发生。这可能与 Fisher-Yates 方法的工作方式类似，尽管当我尝试这样做时，有时我仍然会得到匹配的数组。

这个解决方案是用 PHP 编写的，但可以很容易地转换为 JavaScript。

```
guaranteedShuffle($array){
    $isDifferent = false;
    while(!$isDifferent){
        $arrayCopy = $array;
        shuffle($arrayCopy);
        if($array !== $arrayCopy){
            $isDifferent = true;
        }
    }
    return $arrayCopy;
} 
```

用法：

```
$array = ['1','2']; 
$shuffled = guaranteedShuffle($array); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-21T13:50:12.227

您可以使用[Fisher Yates Shuffle进行随机播放](http://en.wikipedia.org/wiki/Fisher-Yates_shuffle)

```
function fisherYates ( myArray ) {
var i = myArray.length, j, tempi, tempj;
if ( i == 0 ) return false;
while ( --i ) {
 j = Math.floor( Math.random() * ( i + 1 ) );
 tempi = myArray[i];
 tempj = myArray[j];
 myArray[i] = tempj;
 myArray[j] = tempi;
}
} 
```

[请参阅此参考](https://stackoverflow.com/questions/2450954/how-to-randomize-a-javascript-array)

# c# - IValueConverter 的异步实现

> ID：15003827
> 
> 赞同：28
> 
> 时间：2013-02-21T13:44:49.953
> 
> 标签：c#, windows-runtime, async-await, c#-5.0, winrt-async

我有一个异步方法，我想在`IValueConverter`.

有没有比通过调用`Result`属性强制它同步更好的方法？

```
public async Task<object> Convert(object value, Type targetType, object parameter, string language)
{
    StorageFile file = value as StorageFile;

    if (file != null)
    {
        var image = ImageEx.ImageFromFile(file).Result;
        return image;
    }
    else
    {
        throw new InvalidOperationException("invalid parameter");
    }
} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-21T16:45:00.503

`Task.Result`出于几个原因，您可能不想打电话。

首先，正如我在我的博客中详细解释的那样，除非您的代码在任何地方都使用过，否则您[可能会出现死锁](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)。其次，您可能不想（同步）阻止您的 UI；最好在从磁盘读取时暂时显示“正在加载...”或空白图像，并在读取完成时更新。`async``ConfigureAwait`

所以，就我个人而言，我会将这部分作为我的 ViewModel，而不是值转换器。我有一篇博客文章描述了一些[数据绑定友好的异步初始化方法](http://blog.stephencleary.com/2013/01/async-oop-2-constructors.html)。那将是我的第一选择。*让一个值转换器*启动异步后台操作感觉不对。

但是，如果您考虑过您的设计并且真的认为异步值转换器是您所需要的，那么您必须要有一点创造性。值转换器的问题在于它们*必须*是同步的：数据绑定从数据上下文开始，评估路径，然后调用值转换。只有数据上下文和路径支持更改通知。

因此，您必须在数据上下文中使用（同步）值转换器将原始值转换为类似数据绑定的`Task`对象，然后您的属性绑定只使用类似对象的属性之一`Task`来获取结果。

这是我的意思的一个例子：

```
<TextBox Text="" Name="Input"/>
<TextBlock DataContext="{Binding ElementName=Input, Path=Text, Converter={local:MyAsyncValueConverter}}"
           Text="{Binding Path=Result}"/> 
```

这`TextBox`只是一个输入框。第`TextBlock`一个将自己`DataContext`的`TextBox`输入文本设置为通过“异步”转换器运行它的输入文本。`TextBlock.Text`设置`Result`为该转换器的。

转换器非常简单：

```
public class MyAsyncValueConverter : MarkupExtension, IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var val = (string)value;
        var task = Task.Run(async () =>
        {
            await Task.Delay(5000);
            return val + " done!";
        });
        return new TaskCompletionNotifier<string>(task);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return null;
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return this;
    }
} 
```

转换器首先启动异步操作等待 5 秒，然后添加“完成！” 到输入字符串的末尾。转换器的结果不能只是简单的`Task`，因为`Task`没有实现`IPropertyNotifyChanged`，所以我使用的类型将在我的[AsyncEx 库](http://nitoasyncex.codeplex.com)的下一个版本中。它看起来像这样（此示例已简化；[完整源可用](http://nitoasyncex.codeplex.com/SourceControl/changeset/view/7776f08613e7#Source/Nito.AsyncEx%20%28NET4,%20Win8,%20SL4,%20WP75%29/TaskCompletionNotifier%20%28of%20TResult%29.cs)）：

```
// Watches a task and raises property-changed notifications when the task completes.
public sealed class TaskCompletionNotifier<TResult> : INotifyPropertyChanged
{
    public TaskCompletionNotifier(Task<TResult> task)
    {
        Task = task;
        if (!task.IsCompleted)
        {
            var scheduler = (SynchronizationContext.Current == null) ? TaskScheduler.Current : TaskScheduler.FromCurrentSynchronizationContext();
            task.ContinueWith(t =>
            {
                var propertyChanged = PropertyChanged;
                if (propertyChanged != null)
                {
                    propertyChanged(this, new PropertyChangedEventArgs("IsCompleted"));
                    if (t.IsCanceled)
                    {
                        propertyChanged(this, new PropertyChangedEventArgs("IsCanceled"));
                    }
                    else if (t.IsFaulted)
                    {
                        propertyChanged(this, new PropertyChangedEventArgs("IsFaulted"));
                        propertyChanged(this, new PropertyChangedEventArgs("ErrorMessage"));
                    }
                    else
                    {
                        propertyChanged(this, new PropertyChangedEventArgs("IsSuccessfullyCompleted"));
                        propertyChanged(this, new PropertyChangedEventArgs("Result"));
                    }
                }
            },
            CancellationToken.None,
            TaskContinuationOptions.ExecuteSynchronously,
            scheduler);
        }
    }

    // Gets the task being watched. This property never changes and is never <c>null</c>.
    public Task<TResult> Task { get; private set; }

    Task ITaskCompletionNotifier.Task
    {
        get { return Task; }
    }

    // Gets the result of the task. Returns the default value of TResult if the task has not completed successfully.
    public TResult Result { get { return (Task.Status == TaskStatus.RanToCompletion) ? Task.Result : default(TResult); } }

    // Gets whether the task has completed.
    public bool IsCompleted { get { return Task.IsCompleted; } }

    // Gets whether the task has completed successfully.
    public bool IsSuccessfullyCompleted { get { return Task.Status == TaskStatus.RanToCompletion; } }

    // Gets whether the task has been canceled.
    public bool IsCanceled { get { return Task.IsCanceled; } }

    // Gets whether the task has faulted.
    public bool IsFaulted { get { return Task.IsFaulted; } }

    // Gets the error message for the original faulting exception for the task. Returns <c>null</c> if the task is not faulted.
    public string ErrorMessage { get { return (InnerException == null) ? null : InnerException.Message; } }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

通过将这些部分放在一起，我们创建了一个异步数据上下文，它是值转换器的结果。数据绑定友好的`Task`包装器将只使用默认结果（通常是`null`or `0`）直到`Task`完成。所以包装器`Result`与 完全不同`Task.Result`：它不会同步阻塞并且没有死锁的危险。

但重申一下：我会选择将异步逻辑放入 ViewModel 而不是值转换器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-02T13:53:08.023

另一种方法是制作您自己的支持异步源或数据的控件。

这是带有图像的示例

```
 public class AsyncSourceCachedImage : CachedImage
{
    public static BindableProperty AsyncSourceProperty = BindableProperty.Create(nameof(AsyncSource), typeof(Task<Xamarin.Forms.ImageSource>), typeof(AsyncSourceSvgCachedImage), null, propertyChanged: SourceAsyncPropertyChanged);

    public Task<Xamarin.Forms.ImageSource> AsyncSource
    {
        get { return (Task<Xamarin.Forms.ImageSource>)GetValue(AsyncSourceProperty); }
        set { SetValue(AsyncSourceProperty, value); }
    }

    private static async void SourceAsyncPropertyChanged(BindableObject bindable, object oldColor, object newColor)
    {
        var view = bindable as AsyncSourceCachedImage;
        var taskForImageSource = newColor as Task<Xamarin.Forms.ImageSource>;

        if (taskForImageSource != null)
        {
            var awaitedImageSource = await taskForImageSource;

            view.Source = awaitedImageSource;
        }
    }
} 
```

此外，您可以在图像上实现加载活动指示器，直到任务得到解决。

# python - 从 pandas groupby 返回聚合数据框

> ID：15003828
> 
> 赞同：18
> 
> 时间：2013-02-21T13:44:51.463
> 
> 标签：python, group-by, pandas

我正试图围绕 Pandas groupby 方法。我想编写一个函数来执行一些聚合函数，然后返回一个 Pandas DataFrame。这是一个使用 sum() 的非常简化的示例。我知道有更简单的方法来做简单的求和，在现实生活中我的功能更复杂：

```
import pandas as pd
df = pd.DataFrame({'col1': ['A', 'A', 'B', 'B'], 'col2':[1.0, 2, 3, 4]})

In [3]: df
Out[3]: 
  col1  col2
0    A     1
1    A     2
2    B     3
3    B     4

def func2(df):
    dfout = pd.DataFrame({ 'col1' : df['col1'].unique() ,
                           'someData': sum(df['col2']) })
    return  dfout

t = df.groupby('col1').apply(func2)

In [6]: t
Out[6]: 
       col1  someData
col1                 
A    0    A         3
B    0    B         7 
```

我没想到`col1`那里有两次，也没有想到那个神秘的索引。我真的以为我会得到`col1`& `someData`。

在我的现实生活应用程序中，我按不止一列进行分组，并且真的想取回 DataFrame 而不是 Series 对象。
在上面的示例中，关于 Pandas 正在做什么的解决方案或解释的任何想法？

**----- 添加信息 -----**

我应该从这个例子开始，我认为：

```
In [13]: import pandas as pd

In [14]: df = pd.DataFrame({'col1':['A','A','A','B','B','B'], 'col2':['C','D','D','D','C','C'], 'col3':[.1,.2,.4,.6,.8,1]})

In [15]: df
Out[15]: 
  col1 col2  col3
0    A    C   0.1
1    A    D   0.2
2    A    D   0.4
3    B    D   0.6
4    B    C   0.8
5    B    C   1.0

In [16]: def func3(df):
   ....:         dfout =  sum(df['col3']**2)
   ....:         return  dfout
   ....: 

In [17]: t = df.groupby(['col1', 'col2']).apply(func3)

In [18]: t
Out[18]: 
col1  col2
A     C       0.01
      D       0.20
B     C       1.64
      D       0.36 
```

在上图中，`apply()`函数的结果是 Pandas Series。它缺少来自`df.groupby`. 我苦苦挣扎的本质是如何创建一个应用于 groupby 的函数，该函数返回函数的结果和分组的列？

**----- 又一个更新 ------**

看来，如果我这样做：

```
 pd.DataFrame(t).reset_index() 
```

我得到了一个非常接近我所追求的数据框。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T14:27:46.680

您看到 0 列的原因是因为 的输出`.unique()`是一个**数组**。

了解您的应用程序如何工作的最佳方法是按组检查每个操作：

```
In [11] :g = df.groupby('col1')

In [12]: g.get_group('A')
Out[12]: 
  col1  col2
0    A     1
1    A     2

In [13]: g.get_group('A')['col1'].unique()
Out[13]: array([A], dtype=object)

In [14]: sum(g.get_group('A')['col2'])
Out[14]: 3.0 
```

*大多数情况下，您希望这是一个聚合**值**。*

的输出`grouped.apply`将始终将组标签作为索引（“col1”的唯一值），因此您的示例构造`col1`对我来说似乎有点迟钝。

注意：要弹出`'col1'`（索引）回到您可以调用的列[`reset_index`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.reset_index.html)，因此在这种情况下。

```
In [15]: g.sum().reset_index()
Out[15]: 
  col1  col2
0    A     3
1    B     7 
```

# jquery - jQuery自动完成自定义数据并显示除了标签，值

> ID：15003830
> 
> 赞同：4
> 
> 时间：2013-02-21T13:44:54.700
> 
> 标签：jquery, jquery-ui, autocomplete, jsonp, jquery-ui-autocomplete

我正在尝试从 json 中提取一些数据并使用 jquery 自动完成来显示它们。

json 数组包含 ID、Title、Date。在显示屏上，我想显示标题和日期，单击时我想解析该标题的特定 ID。

所以目前我有：

```
$("input").autocomplete({
      source: function (d, e) {
          $.ajax({
              type: 'GET',
              url: url + mode + encodeURIComponent(d.term) + key,
              dataType: "jsonp",
              success: function (b) {
                  var c = [];
                  $.each(b.results, function (i, a, k) {
                    c.push(a.title + " " + a.date) // Displays Title and Date
                  });
                  e(c)
              }
          })
      },
      select: function (a, b) {
          console.log(b);
            // Appends an array with 2 keys: Value and Label. 
            // Both display the title and date as shown above.
          }
      }).data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li></li>" )
                    .data( "item.autocomplete", item )
                    .append( "<a>"+ item.label + "</a>" ) 
                       // Here I want to append a.id as class of this
                       // but the only values are value and label.
                    .appendTo( ul );
            }; 
```

那么我该如何追加`<li class="' + a.id + '">" + a.title + " " + a.date + "</li>"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:58:28.950

您正在使用`$.each`AJAX 成功函数内部的循环去除额外的属性（作为旁注，我很确定`$.each`' 的回调不采用第三个参数）。只需将一个属性附加`label`到每个结果项，它应该可以正常工作：

```
 source: function (d, e) {
      $.ajax({
          type: 'GET',
          url: url + mode + encodeURIComponent(d.term) + key,
          dataType: "jsonp",
          success: function (b) {
              var c = [];
              $.each(b.results, function (i, a) {
                a.label = a.title + " " + a.date;
                c.push(a);
              });
              e(c);
          }
      })
  }, 
```

该小部件可以与*额外的*属性一起正常工作，您只*需要*至少有一个`label`or`value`属性。

现在在您的`_renderItem`函数中，您可以访问每个项目的`title`and`date`属性：

```
.data( "autocomplete" )._renderItem = function( ul, item ) {
    return $( "<li></li>" )
        .data( "item.autocomplete", item )
        .append( "<a>"+ item.label + "</a>" ) 
        .addClass(a.id) // <---
        .appendTo( ul );
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T14:02:16.687

试试这个。将 ID 放在 ajax 调用的值中。

```
$( "input" ).autocomplete({
      source: function( request, response ) {
        $.ajax({
          url: url + mode + encodeURIComponent(d.term) + key,,
          dataType: "jsonp",
          success: function( data ) {
            response( $.map( data, function( item ) {
              return {
                label: item.title ", " + item.date,
                value: item.id
              }
            }));
          }
        });
      }
    }).data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li></li>" )
                    .data( "item.autocomplete", item )
                    .append( "<li "+ "class="+"item.value + ">"item.label + "</li>" ) 
                    .appendTo( ul );
            }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:01:17.003

在 $.ajax 成功时，您应该传递一个包含标签和值的对象，而不仅仅是标签字符串，然后您可以将 a.id 分配给 item.value。像这样：

```
$("input").autocomplete({
  source: function (d, e) {
      $.ajax({
          type: 'GET',
          url: url + mode + encodeURIComponent(d.term) + key,
          dataType: "jsonp",
          success: function (b) {
              var c = [];
              $.each(b.results, function (i, a, k) {
                c.push({'value':a.id, 'label':a.title + " " + a.date}) // Displays Title and Date
              });
              e(c)
          }
      })
  },
  select: function (a, b) {
      console.log(b);
        // Appends an array with 2 keys: Value and Label. 
        // Both display the title and date as shown above.
      }
  }).data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li class=\""+item.value+"\"></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>"+ item.label + "</a>" ) 
                .appendTo( ul );
        }; 
```

您也可以将原始对象作为标签 ( `c.push({'value':a.id, 'label':a})`) 传递，并将格式保留为`_renderItem`(其中`item.label`与 相同`a`)

# c++ - 在 Ncurses 中跟踪 KEY_ENTER

> ID：15003831
> 
> 赞同：0
> 
> 时间：2013-02-21T13:44:57.020
> 
> 标签：c++, c, ncurses, curses

`KEY_ENTER`ncurses中的一首曲目如何？我尝试`\n`使用`getch()`,`KEY_ENTER`和`raw()`, 进行跟踪，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:01:31.850

似乎要使用像 KEY_ENTER 这样的关键缩写，您必须调用：

```
keypad(win, true); 
```

在使用它们之前。看看这个： http: [//osr600doc.sco.com/en/man/html.CURSES/keypad.CURSES.html](http://osr600doc.sco.com/en/man/html.CURSES/keypad.CURSES.html)

# iphone - 批准后应用程序崩溃

> ID：15003832
> 
> 赞同：1
> 
> 时间：2013-02-21T13:44:58.800
> 
> 标签：iphone, ios, app-store, app-store-connect, itunes-store

我的申请在应用商店获得批准。

但由于提要发生了一些变化，我正在使用我的应用程序现在崩溃了。我现在该怎么办？

提供更新需要 7 天的时间让苹果批准，如果有人在这期间下载它，我会收到差评。

我现在该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:47:01.313

你可以：

1.  修复饲料。
2.  在您修复错误并且更新获得批准之前，请停止销售该应用程序。
3.  [在您修复错误并且更新被批准并请求快速审查](http://developer.apple.com/appstore/contact/appreviewteam/)之前，请停止销售该应用程序。

要从销售中删除应用程序，请转到 `Rights and Pricing`iTunnesConnect 中该应用程序的 并`Availability Date`在未来设置。这将从销售中删除该应用程序。只需将日期放回现在即可再次使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:49:45.983

您可以要求加急审查 ( [http://developer.apple.com/appstore/contact/appreviewteam/](http://developer.apple.com/appstore/contact/appreviewteam/) )，如果您还没有滥用它并且有真正的理由（看起来）要求它，他们将在 1 到 3 天内审核您的应用程序... :)

如果您想在应用程序发生时停止销售，您可以转到 iTunes Connect 中的定价菜单并删除所有可用的国家...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:41:20.250

您需要提交加急审核请求。根据我的个人经验，我通常会在 24 小时内推出这些内容。通常，Apple 将这些作为一次性例外，并且应该在很长一段时间内使用一次。我在 2 年内完成了 4 次。无论如何，由于网站上有联系信息，如果用户下载并联系您，您会回复说有待更新，并且很快就会出来。

您可以暂停应用程序的交付，直到准备好等等。可用性可以通过日期更改和自动化。您可以从可用的国家/地区中删除。

这是加急审查的链接。您将需要您的 App ID 和名称等。 [http://developer.apple.com/appstore/contact/appreviewteam/](http://developer.apple.com/appstore/contact/appreviewteam/)

# php - ModX 自定义包 xPDO 语句未正确评估

> ID：15003834
> 
> 赞同：0
> 
> 时间：2013-02-21T13:45:09.107
> 
> 标签：php, forms, pdo, modx

我正在开发一个接受表单输入的自定义包，将其与表格进行比较并在屏幕上显示相关信息，我正确设置了传输和模式（我希望！我按照 BobsGuides.com 上的指南进行操作）并且我可以毫无问题地从表中读取。当我开始实现表单输入时，我的问题就开始了。

基本上，我发布的会话变量似乎从未收到过，因此 isset 永远不会评估为 true，我只是一遍又一遍地看到表单。

我才刚刚开始使用 PHP，并且在 xPDO 方面完全是新手，所以我接受可能不止一些我没有注意到的事情，但如果有人能指出我正确的方向，我将非常感激。

```
<?php
    $path = MODX_CORE_PATH . 'components/dataease/';
    var_dump($_POST['submit']);
    var_dump($_POST['accNo']);

    // get POST variable this is captured
    $accNo = $_POST['accNo'];
    $output = '';

// Check if form has been submitted
if (isset($_POST['submit'])) {
    // Get info from the database
    $query = $modx->newQuery('accno');
    $query->select($modx->getSelectColumns('Dataease','Dataease','',array('*')));
    $query->where(array('accNumber:LIKE' => '$accNo'));
    var_dump($query);
    // Place it into a variable for output
    if (!$query) {
        return "Query failed";
    } else {
    $dataease = $modx->getCollection('Dataease',$query);
    // Count the returned rows, should only ever be 1
    $output .= '<p>Total: '. count($dataease) . '</p>';

    // Show the found data
    foreach($dataease as $sql) {
        $fields = $sql->toArray();
        $output .= $modx->getChunk('showData', $fields);
    } 
}
return $output;

} else {
    // Get the form chunk
    $form = $modx->getChunk('dataEntryForm');
    return $form;

} 
```

这是我的表单块

```
<h2>Enter Account Number:</h2>
<form method="POST" action="">
    <input name="accNo" type="text"/>
    <input name="submit" type="submit" value="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:41:41.807

试试这个看看有没有post提交

```
if($_SERVER['REQUEST_METHOD'] == "POST") 
```

和/或给你的表单一个隐藏的提交字段，如果你只是在提交按钮不在焦点时点击返回，一些浏览器[至少有些曾经]不会发布提交字段。对此也进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:27:02.237

您是否尝试使用[http://rtfm.modx.com/display/ADDON/Rowboat](http://rtfm.modx.com/display/ADDON/Rowboat)处理您的表格？

# iphone - 从 UITextView 获取前两行的内容而不使用下一行对象

> ID：15003837
> 
> 赞同：0
> 
> 时间：2013-02-21T13:45:11.197
> 
> 标签：iphone

我需要从 uitextview 获取两行内容，但不使用 nextline。我在 uitextview 上连续输入文本，无需按 Enter，该行自动转到第二行。当我打印这些文本时，它显示单行。但内容是两行或两行以上。我如何从 UITextView 获取该内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:49:07.883

您需要计算（大致）可以在一行中输入的字符数。

然后使用模数和除法，您可以找到文本消耗的行数。

# sql-server - 如何在 PS SQLSERVER:\> 中访问远程计算机文件夹

> ID：15003840
> 
> 赞同：0
> 
> 时间：2013-02-21T13:45:20.710
> 
> 标签：sql-server, powershell, remote-access

最近我开始知道如何使用 Powersehll 命令执行 SQL 查询，如下所述：

```
Import-Module “sqlps” -DisableNameChecking   

$ds=Invoke-Sqlcmd -Query $Query -Database $Database -ServerInstance $server -ConnectionTimeout $ConnectionTimeout -QueryTimeout $QueryTimeout 
```

这时候Powershell ISE输出控制台会在

```
PS SQLSERVER:\> 
```

我能够执行 Select 和 Update 查询而没有任何错误。当我想访问远程计算机中的一个文件时，就会遇到这个问题。我试图访问该文件，如下所示：

```
PS SQLSERVER:\> Get-Content -Path \\Server\D$\Log\App.log 
```

甚至尝试过，只是将文件/文件夹列为

```
PS SQLSERVER:\> ls \\Server\D$\Log\ 
```

我收到以下错误：

获取内容：找不到路径“\Server\D$\Log\App.log”，因为它不存在。ls : 找不到路径'\Server\D$\Log\'，因为它不存在。

不用说，该服务器上存在文件夹和文件，因为当 Powershell 在没有 SQL 模块的情况下运行时，我能够访问它们。我的意思是控制台只显示 PS C:\User\abc\

很抱歉这个长篇大论——现在，简单的问题！当 Shell 在 SQLSERVER 控制台中时，如何访问远程文件/文件夹？

提前致谢！

-拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:57:55.070

只需像这样更改您的目录：

```
cd c:\ 
```

然后：

```
ls \\server\d$\log 
```

然后，您可以通过执行相同的操作更改回 sql server：

```
cd sqlserver:\ 
```

可以像使用普通驱动器号一样使用 powershell 提供程序，非常酷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:37:10.140

您应该能够像这样显式使用文件系统提供程序：

```
ls filesystem::\\server\d$\log 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:10:08.560

我相信它在 SQL 服务器上远程运行命令，这使得从那里访问另一台服务器上的数据成为“双跳”场景，并且您需要 CredSSP 身份验证才能工作......

# ruby-on-rails - rails assets 样式表 config.rb

> ID：15003841
> 
> 赞同：3
> 
> 时间：2013-02-21T13:45:23.853
> 
> 标签：ruby-on-rails, asset-pipeline

我有这个文件 app/assets/stylesheets/config.rb 包含以下内容：

```
http_path = "/"
css_dir = "."
sass_dir = "."
images_dir = "img"
javascripts_dir = "js"
output_style = :compressed
relative_assets=true
line_comments = false 
```

它是干什么用的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T00:11:04.953

要回答您的问题“它是做什么用的”，它是 Compass scss 编译器的配置。另一个答案中的参考资料很方便，但要获取最新的详细信息，无需猜测，请在此处查看 Compass 配置文件的详细信息：

[http://compass-style.org/help/tutorials/configuration-reference/](http://compass-style.org/help/tutorials/configuration-reference/)

我最初发布的目的还在于提供文件来源的答案（如果您不是自己创建的。我回答这个问题是因为它“神奇地”出现在我的 Rails 项目中，并且谷歌搜索生成 config.rb在 Rails 中结束在这里。我首先怀疑 sass-rails，但该项目中的某个人确认他们没有生成该文件。然后我发现该文件的自动生成是由带有 LiveReload 包的 Sublime Text 引起的。见相关的[github 问题](https://github.com/dz0ny/LiveReload-sublimetext2/issues/40)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:09:03.990

我猜它定义了如何从样式表文件夹中查找资产，以及一些关于资产在发送到客户端浏览器之前发生的情况的输出选项。

```
http_path = "/"              <= probably the root path to assets, so if you had
                                application.css, the URL path to it would be
                                http://example.com/application.css
css_dir = "."                <= the directory to look for css files. "." in linux
                                means "the current directory", so this would set you
                                CSS path to app/assets/stylesheets
sass_dir = "."               <= same as above, except for .sass/.scss files
images_dir = "img"           <= images go in app/assets/stylesheets/img
javascripts_dir = "js"       <= javascript go in app/assets/stylesheets/js
                                (seems like a strange place to put them)
output_style = :compressed   <= either to produce .gzip'ed versions of files
                                or to minify them, maybe both - consult docs on this
relative_assets=true         <= relative, as opposed to absolute paths to assets, I think
line_comments = false        <= I think this turns on/off the ability to include comments,
                                or maybe whether the comments are included in the
                                compressed versions of the file. turn it to "true" and
                                compare the assets, as served to the browser, and see
                                what the difference is 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:06:48.377

您可以通过从 Sublime Text 中删除 Live Reload 插件来修复它。

```
Sublime Text > Preferences > Package Control > Remove Package > Live Reload 
```

对我来说，这是一个很好的解决方案，因为我没有使用 Live Reload。谁使用实时重新加载请关注问题：[github](https://github.com/dz0ny/LiveReload-sublimetext2/issues/40)。

# vb.net - 在不使用 Microsoft.Visualbasic.Compatibility.dll 的情况下，等效于 vb.net 中的 VB6.TwipsPerPixelX

> ID：15003849
> 
> 赞同：1
> 
> 时间：2013-02-21T13:45:59.897
> 
> 标签：vb.net, vb6-migration

在从 VB6 迁移到 VB.NET 期间，**Screen.TwipsPerPixelX**函数被转换为**Microsoft.Visualbasic.Compatibility.dll**中定义的**VB6.TwipsPerPixelX**。

 **我不想使用**Microsoft.Visualbasic.Compatibility.dll**。在 .NET 中是否有任何等价物。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:49:25.527

vb.net 不再使用 Twips [，](http://en.wikipedia.org/wiki/Twip)所以不需要这样的功能**

# android - zlib 的 main 的多重定义

> ID：15003856
> 
> 赞同：0
> 
> 时间：2013-02-21T13:46:23.263
> 
> 标签：android, android-ndk, java-native-interface, cocos2d-x

我正在尝试编译我的 cocos2d-x 项目，但是当我运行 build_native.sh 时出现此错误：

```
/Users/default/Documents/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: ./obj/local/armeabi/objs-debug/game_shared/__/__/Classes/3rdParty/zlib-1.2.3/minigzip.o: multiple definition of 'main'
/Users/default/Documents/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/objs-debug/game_shared/__/__/Classes/3rdParty/zlib-1.2.3/example.o: previous definition here
/Users/default/Documents/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: ./obj/local/armeabi/tiff.a(mkg3states.o): multiple definition of 'main'
/Users/default/Documents/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/objs-debug/game_shared/__/__/Classes/3rdParty/zlib-1.2.3/example.o: previous definition here
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/libgame.so] Error 1
make: Leaving directory //..... 
```

我可以在没有 zlib 的情况下构建项目，但我需要它。

**编辑**：

删除example.c后，我得到这个：

```
/Users/default/Documents/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: ./obj/local/armeabi/tiff.a(mkg3states.o): multiple definition of 'main'
/Users/default/Documents/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/objs-debug/game_shared/__/__/Classes/3rdParty/zlib-1.2.3/minigzip.o: previous definition here 
```

我可以从 cocos2d 中排除 libtiff 还是如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:51:34.270

您的`minigzip`和`example`源代码文件都包含一个`main()`函数。删除你不需要的那个。我猜它在`example`.

# matlab - 平滑matlab绘图数字

> ID：15003864
> 
> 赞同：1
> 
> 时间：2013-02-21T13:46:54.963
> 
> 标签：matlab, matlab-figure

我使用 120x120 矩阵和`surf`函数获得了下图。

![在此处输入图像描述](../Images/982a6b9351d68a9fcfc5a9ee8461e934.png)

有没有一种简单的方法可以让不同颜色之间的线条看起来更平滑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:43:21.743

首先，`surf`可能不是显示 2D 图像的最佳方式 - 如果您实际上不需要高度信息，`imagesc`则可以正常工作。更好的是，它不会显示六边形之间的不同颜色的线条，因为它不会通过交叉点的颜色图。

但是，无论您采用哪种方法，低分辨率位图都不会自动转换为“任意”分辨率的矢量图形 - 无论如何，如果您使用该图允许您检查哪种组合，您可能不希望这样`(x,y)`您以给定的值获得。

有三种方法可以使您的图像更漂亮 - (1) 分割六边形，并用于`patch`创建矢量图形图像。(2) 用 对图像进行上采样`imresample`。(3) 创建一个 RGB 图像并分别平滑每种颜色以获得更柔和的过渡：

```
%# assume img is your image
nColors = length(unique(img));
%# transform the image to rgb
rgb = ind2rgb((img+fliplr(img)),jet(nColors)); %# there are much better colormaps than jet
%# filter each color
for i=1:3,rgbf(:,:,i)=imfilter(rgb(:,:,i),fspecial('gaussian',9,3),'replicate');end 
```

# c++ - 更改任意数值类型的值的范围比例

> ID：15003865
> 
> 赞同：6
> 
> 时间：2013-02-21T13:46:56.840
> 
> 标签：c++, templates, range

我需要将一组数字从一个范围转换为另一个范围，同时保持值的相对分布。

例如，可以缩放包含随机生成的浮点数的向量以适合可能的无符号字符值 (0..255)。忽略类型转换，这意味着无论提供什么输入（例如 -1.0 到 1.0），所有数字都将缩放到 0.0 到 255.0（或大约）。

我创建了一个模板类来执行此转换，可以使用以下方法将其应用于集合`std::transform`：

```
template <class TYPE>
class scale_value {
    const TYPE fmin, tmin, ratio;
public:
    TYPE operator()(const TYPE& v) {
        TYPE vv(v);
        vv += (TYPE(0) - fmin); // offset according to input minimum
        vv *= ratio;            // apply the scaling factor
        vv -= (TYPE(0) - tmin); // offset according to output minimum
        return vv;
    }
    // constructor takes input min,max and output min,max
    scale_value(const TYPE& pfmin, const TYPE& pfmax, const TYPE& ptmin, const TYPE& ptmax)
        : fmin(pfmin), tmin(ptmin), ratio((ptmax-tmin)/(pfmax-fmin)) { }
    // some code removed for brevity
}; 
```

但是，上述代码仅适用于实数（`float`, `double`, ...）。整数在按比例放大时起作用*，*但即使这样也只能按*整数比率*：

```
float scale_test_float[] = {0.0, 0.5, 1.0, 1.5, 2.0};
int scale_test_int[] = {0, 5, 10, 15, 20};

// create up-scalers
scale_value<float> scale_up_float(0.0, 2.0, 100.0, 200.0);
scale_value<int> scale_up_int(0, 20, 100, 200);

// create down-scalers
scale_value<float> scale_down_float(100.0, 200.0, 0.0, 2.0);
scale_value<int> scale_down_int(100, 200, 0, 20);

std::transform(scale_test_float, scale_test_float+5, scale_test_float, scale_up_float);
// scale_test_float -> 100.0, 125.0, 150.0, 175.0, 200.0
std::transform(scale_test_int, scale_test_int+5, scale_test_int, scale_up_int);
// scale_test_int -> 100, 125, 150, 175, 200

std::transform(scale_test_float, scale_test_float+5, scale_test_float, scale_down_float);
// scale_test_float -> 0.0, 0.5, 1.0, 1.5, 2.0
std::transform(scale_test_int, scale_test_int+5, scale_test_int, scale_down_int);
// scale_test_int -> 0, 0, 0, 0, 0 : fails due to ratio being rounded to 0 
```

我目前对此问题的解决方案是将内部的所有内容存储`scale_value`为 a `double`，并根据需要使用类型转换：

```
TYPE operator()(const TYPE& v) {
    double vv(static_cast<double>(v));
    vv += (0.0 - fmin);                // offset according to input minimum
    vv *= ratio;                       // apply the scaling factor
    vv -= (0.0 - tmin);                // offset according to output minimum
    return static_cast<TYPE>(vv);
} 
```

这适用于大多数情况，尽管整数有一些错误，因为值被截断而不是四舍五入。例如`{0,5,10,15,20}`从`0..20`to缩放`20..35`，然后返回给`{0,4,9,14,20}`.

所以，我的问题是，有没有更好的方法来做到这一点？在缩放`float`s 集合的情况下，类型转换似乎相当多余，而在缩放`int`s 时，由于截断而引入了错误。

顺便说一句，我很惊讶没有发现一些东西（至少，没有什么明显的）来[提升](http://www.boost.org/)这个目的。也许我错过了 - 各种数学库让我感到困惑。

**编辑：**我意识到我可以专注`operator()`于特定类型，但这意味着大量的代码重复，这会破坏模板的有用部分之一。除非有一种方法可以对所有非浮点类型（short、int、uint、...）进行一次专门化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:14:08.577

首先，我认为您`ratio`可能需要某种浮点类型并使用浮点除法计算（可能另一种机制也可以）。否则，例如，如果您尝试从 到 缩放`[0, 19]`，`[0, 20]`您将得到一个整数比，`1`并且不执行任何缩放！

接下来，让我们假设浮点类型工作正常。现在我们将所有的数学运算都设为`double`，但如果输出类型是整数，我们希望舍入到最接近的输出整数而不是截断。所以我们可以`is_integral`用来强制进行一些舍入（注意我现在无权编译/测试）：

```
TYPE operator()(const TYPE& v)
{
    double vv(static_cast<double>(v));
    vv -= fmin;                // offset according to input minimum
    vv *= ratio;               // apply the scaling factor
    vv += tmin;                // offset according to output minimum
    return static_cast<TYPE>(vv + (0.5 * is_integral<TYPE>::value));  // Round for integral types
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:25:53.813

Following @John R. Strohm's suggestion, which would work for Integers, I have come up with the following, which seems to work with only a need to provide two specializations of the class (my concern was having to write a specialization for every type). It does require writing a "trait" for each non-whole type, however.

First I create a "traits"-style class (note that in C++11 I think this is already provided in std::is_floating_point, but for now I'm stuck with vanilla C++):

```
template <class NUMBER>
struct number_is_float { static const bool val = false; };

template<>
struct number_is_float<float> { static const bool val = true; };

template<>
struct number_is_float<double> { static const bool val = true; };

template<>
struct number_is_float<long double> { static const bool val = true; }; 
```

Using this traits-style class, we can provide a basic "whole number" implementation of the `scale_value` class:

```
template <class TYPE, bool IS_FLOAT=number_is_float<TYPE>::val>
class scale_value
{
private:
    const double fmin, tmin, ratio;
public:
    TYPE operator()(const TYPE& v) {
        double vv(static_cast<double>(v));
        vv += (0.0 - fmin);
        vv *= ratio;
        vv += 0.5 * ((static_cast<double>(v) >= 0.0) ? 1.0 : -1.0);
        vv -= (0.0 - tmin);
        return static_cast<TYPE>(vv);
    }
    scale_value(const TYPE& pfmin, const TYPE& pfmax, const TYPE& ptmin, const TYPE& ptmax)
        : fmin(static_cast<double>(pfmin))
        , tmin(static_cast<double>(ptmin))
        , ratio((static_cast<double>(ptmax)-tmin)/(static_cast<double>(pfmax)-fmin))
    {
    }
}; 
```

...and a partial specialization for cases where the `TYPE` parameter has a "trait" that says it's a float of some kind:

```
template <class TYPE>
class scale_value<TYPE, true>
{
private:
    const TYPE fmin, tmin, ratio;
public:
    TYPE operator()(const TYPE& v) {
        TYPE vv(v);
        vv += (TYPE(0.0) - fmin);
        vv *= ratio;
        vv -= (TYPE(0.0) - tmin);
        return vv;
    }
    scale_value(const TYPE& pfmin, const TYPE& pfmax, const TYPE& ptmin, const TYPE& ptmax)
        : fmin(pfmin), tmin(ptmin), ratio((ptmax-tmin)/(pfmax-fmin)) {}
}; 
```

The main differences between these classes is that with the whole-number implementation, the data in the classes is stored as a `double`, and there is built-in rounding as per John's answer.

If I decided I needed to implement a fixed-point class, then I guess I would need to add this as another trait.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:00:34.617

四舍五入是您的责任，而不是计算机/编译器的责任。

在您的 operator() 中，您需要在乘法中提供一个“舍入位”。

我会尝试从以下内容开始：

```
TYPE operator()(const TYPE& v) {
    double vv(static_cast<double>(v));
    vv += (0.0 - fmin);                // offset according to input minimum
    vv *= ratio;                       // apply the scaling factor
    vv += SIGN(static_cast<double>(v))*0.5;
    vv -= (0.0 - tmin);                // offset according to output minimum
    return static_cast<TYPE>(vv);
} 
```

如果您的编译器尚未提供 SIGN(x) 函数，则必须定义一个函数。

```
double SIGN(const double x) {
    return (x >= 0) ? 1.0 : -1.0;
} 
```

# c# - Convert.FromBase64String c# 上的 FormatException

> ID：15003866
> 
> 赞同：3
> 
> 时间：2013-02-21T13:46:58.857
> 
> 标签：c#, .net, compact-framework, base64, formatexception

在使用 .NET CF 的 Windows CE 设备上。我正在通过来自 REST 服务的流接收一个大文件 (12MB)。

这个大文件是 base64 格式，但它有两个小细节，用双引号 ( ) 包围的内容`"`和每 N 个字符有一个`\\n`（不是换行符`\n`，而是实际的 2 个文字字符）。所以我需要做的是，删除引号，`\\n`或者用实际的换行符替换它们。并且还从base64格式转换。

这是我拥有的代码：

```
var input = ApplicationContext.restProxy.GetData();

using (StreamReader sr = new StreamReader(input))
{
    StringBuilder sb = new StringBuilder();
    char[] buffer = new char[32];
    while (sr.Read(buffer, 0, 32) > 0)
    {
       var s = new string(buffer);
       s = s.Replace("\\n", "\n");
       s = s.Trim('"');
       sb.Append(s);
    }

    byte[] fileBytes = Convert.FromBase64String(sb.ToString());

} 
```

但是有了这段代码，我要么有一个`OutOfMemoryException`，要么`FormatException`当我调用`Convert.FromBase64String`.

一些输入数据具有以下格式：

```
"U1FMaXRlIGZvcm1hdCAzAAQAAQEAQCAgAAAABAAAI2oAAAAAAAAAAAAAAAQAAAABAAAAAAAAAAAA\\nAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAC3iGgUAAAABA/sAAAAaSQP7\\nApsA0wDTAAAAAAAAAAAAAAAAAAAAAAAAAAA ... 
```

如何在不填满设备内存的情况下进行这些操作，或者结果字符串的格式有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:51:09.417

如果您写入一个逐字符检查的缓冲区，您可以获得更好的结果。

此外，由于文件太大，您可以通过将这些数据直接写入输出文件来获得更好的结果。否则，您将尝试将所有这些数据保存在内存中。

将输出直接发送到文件可能会解决这个问题，但我不知道。我从来没有遇到过，所以我不知道如何测试它。

这是一个可以解决您的问题的示例方法：

```
private void ReadData(Stream input) {
  using (StreamReader sr = new StreamReader(input)) {
    using (StreamWriter sw = new StreamWriter(File.Create("outfile.dat"))) {
      char[] buffer = new char[32];
      while (-1 < sr.Peek()) {
        int len = sr.Read(buffer, 0, 32);
        List<char> output = new List<char>();
        for (int i = 0; i < len; i++) {
          char c = buffer[i];
          if ((c != '\\') && (c != '\n')) {
            output.Add(c);
          }
        }
        sw.Write(output.ToArray());
      }
      sw.Flush();
      sw.Close();
    }
    sr.Close();
  }
} 
```

虽然`Close()`不是必需的，但我发现它有助于在垃圾收集器有机会为您清理内容之前多次调用某个方法的情况。最好是安全的。

我希望它提供一些用处。

# java - JProfiler 内存视图 -> 对象大小

> ID：15003868
> 
> 赞同：6
> 
> 时间：2013-02-21T13:47:01.323
> 
> 标签：java, profile, jprofiler

我的应用程序中有以下类：

```
class A {
  String someString;
  Locale someLocale;

  Map<Integer, B> someMap = new HashMap<Integer, B>();

  fillMap() {
    // some logic to fill the map with instances of B
  }
}

class B {
  // lots of filled collections
} 
```

我正在使用 JProfiler 进行分析会话以识别一些内存问题。在“内存视图”选项卡上，具有聚合级别的类，例如，我有 2000 个 A 实例，总大小为 156KB。

我的问题是这个尺寸意味着什么？它只是对 A 对象的引用的大小，还是 A 的所有填充成员的大小（我特别想知道 Map）？我想这只是 A 参考尺寸，但想确保这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T20:46:26.940

动态内存视图不显示保留大小，仅显示浅大小。

要查看保留的大小，请转到 heap walker，双击该类以创建一个新的对象集。然后，单击标题中的“计算保留和深度大小”。

这将为您提供整个类的保留大小，尽管单个实例的保留大小可能更有趣。为此，请转到“参考”视图或“最大对象”视图。

# xampp - 防止通过 IP 从另一台本地 PC 访问 XAMPP localhost

> ID：15003869
> 
> 赞同：2
> 
> 时间：2013-02-21T13:47:01.283
> 
> 标签：xampp, localhost

众所周知如何从本地网络中的另一台计算机访问 XAMPP 站点（通过键入 IP 地址），请告诉我如何禁止这样做并且仍然有一个正在运行的 localhost。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-14T10:24:06.180

就这么简单，

只需创建一个名为 **index.php/index.html的文件**

让它们空着，

现在任何访问您的 IP 的人都将被重定向到 index.php，他们无法知道您拥有哪些文件。

希望这个答案有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:49:09.617

localhost（IPv4 为 127.0.0.1）只能从本地主机访问。查找任何“Listen”和“VirtualHost”指令并确保它们都说“localhost”而不是另一个主机名或 IP 地址。

# xcode - 如何在使用 Xcode 故事板创建的 UITextView 的代码中设置高度

> ID：15003870
> 
> 赞同：1
> 
> 时间：2013-02-21T13:47:02.820
> 
> 标签：xcode, storyboard, uitextview

在 Xcode for iPhone（版本 4.6 (4H127) 中运行 UITextView 对象时，我无法设置高度。我使用 MainStoryboard_iPhone.storyboard 来创建 UITextView。

我试过这个，没有效果：

```
UITextView *textMultiLine1;
[textMultiLine1 setContentSize:CGSizeMake(320, 320)]; 
```

感谢您的回答，我是 Xcode 的初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:58:30.900

您首先需要在头文件中创建一个 Outlet：

```
IBOutlet UITextView *textMultiLine1; 
```

然后你需要在 StoryBoard 中连接它：

![在此处输入图像描述](../Images/7ce941cb4cfa77b778c3e20460d035e0.png)

然后你必须设置它的框架：

```
textMultiline1.frame = CGRectMake(originX, originY, width, height); 
```

或者，如果你只想改变它的高度：

```
float newHeight = 200.0;

CGRect textViewFrame = textMultiline1.frame;
textMultiline1.frame = CGRectMake(textViewFrame.origin.x, textViewFrame.origin.y, textViewFrame.size.width, newHeight); 
```

设置内容大小只会更改内部 TextView 区域，从而导致更长（或更短，取决于您设置的值）滚动

# java - 如何让 Maven 检查源代码行尾？

> ID：15003871
> 
> 赞同：4
> 
> 时间：2013-02-21T13:47:03.877
> 
> 标签：java, maven, coding-style, end-of-line, dos2unix

出于一致性原因，我想在我们项目的 Java 源代码中强制执行 Unix 样式的行尾 (\n)。由于我们中的许多人都在 Windows 下工作，因此大多数 IDE 默认配置为使用 Windows 样式的行尾 (\r\n)。每次配置新工作区时，我们都会尝试更改该设置，但由于某些原因，某些文件是使用 Windows 行尾提交的。

是否有任何 Maven 配置或插件可以帮助我们强制执行 Unix 样式的行尾，或者至少警告我们 Windows 样式的文件？

我首先考虑的是 PMD 或 Checkstyle，但它似乎并不那么简单。我还检查了 Maven Enforcer Plugin，但我不认为它是开箱即用的。我应该能够创建自己的规则，但我想确保我不会重新发明轮子:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T14:08:42.347

使用 Checkstyle，我们在项目中成功地使用了它来强制 Unix 行尾。

您可以使用正则表达式来执行此操作（Windows 行结尾是 \r\n，但您可能知道这一点）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-29T14:27:48.767

我们使用以下 Checkstyle 配置来强制 UNIX 行尾：

```
<module name="RegexpMultiline">
    <property name="format" value="\r\n"/>
    <property name="maximum" value="0"/>
    <property name="message" value="Do not use Windows line endings"/>
</module> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T13:53:33.410

我不知道如何检查换行符，但我知道如何自动修复它（我相信这会更好。）

ANT 有这样的任务，maven 可以运行 ant 任务。看看[这里](https://stackoverflow.com/questions/2196394/full-search-and-replace-of-strings-in-source-files-when-copying-resources)了解详情

# c# - 在编译时解决错误的函数BUG？

> ID：15003876
> 
> 赞同：5
> 
> 时间：2013-02-21T13:47:22.320
> 
> 标签：c#, delegates

我正在使用 Visual Studio 2012 Update 1 和 .NET 4.5 这里是代码。

```
void Test(Action a) { }
void Test(Func<int> a) { }
void TestError()
{
    bool throwException = true;
    //Resolves to Test(Action a)
    Test(() =>
    {
    });
    //Resolves to Test(Action a)
    Test(() =>
    {
        if (throwException) throw new Exception();
    });
    //Resolves to Test(Func<int> a)
    //(This seems like a bug since there is no return value)
    Test(() =>
    {
        throw new Exception();
    });
    //Resolves to Test(Action a)
    //(With warning unreachable code detected)
    Test(() =>
    {
        throw new Exception();
        return; //unreachable code detected
    });
} 
```

似乎最后一个函数调用错误地解析为 Func 而不是 Action，它与无条件抛出异常有关。

这是一个BUG吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T13:51:12.610

好吧，对我来说，两者都是有效的候选人似乎是合理的。换句话说，我认为将 转换为和`() => { throw new Exception(); }`都很好。在这两种情况下，方法的结尾都是不可到达的——将它放入一个普通的命名方法中是完全有效的，如下所示：`Func<int>``Action`

```
public int GoBang()
{
    throw new Exception();
} 
```

然后写：

```
Func<int> foo = GoBang; 
```

因此，从 lambda 表达式到两者的转换`Func<int>`都是`Action`有效的。我们现在需要选择使用哪种方法。这在规范第 7.5.3.2 节（更好的功能成员）中指定，其中包括：

> 对于至少一个论点，从 E [x]到 P [x]的转换优于从 E [x]到 Q [x的转换]

此时，第 7.5.3.3 节（更好地从表达式转换）开始：

> 如果以下至少一项成立，则C [1]是比 C [2]*更好的转换：*
> 
> *   [...]
> *   E 是一个匿名函数，T [1]是委托类型 D [1]或表达式树类型 Expression<D [1] >，T [2]是委托类型 D [2]或表达式树类型 Expression<D [2] >，其中之一以下持有：
>     
>     
>     *   [...]
>     *   D [1]和 D [2]具有相同的参数列表，并且以下条件之一成立：
>     *   D [1]有一个返回类型 Y，而 D [2]是 void 返回。

所以这就是为什么`Func<int>`优先于`Action`......编译器做正确的事情。

# python - 如何在 Windows 上运行现有的 Django 站点 Linux 设置，同时保留模块的版本？

> ID：15003878
> 
> 赞同：-1
> 
> 时间：2013-02-21T13:47:36.830
> 
> 标签：python, django, deployment

我有一个基于 Django/Python 构建的站点，我需要对其进行分析。它在带有 Apache 的 Ubuntu 服务器上运行，我想在本地计算机上的 Django-dev-server 上的 Windows 下启动它。

问题是该站点需要特定（过时）版本的库，否则我将需要做很多浪费时间的事情才能使其运行（例如迁移、处理模块中 API 的更改等）。

所以我基本上需要在 Windows 上构建一个 Python 解释器版本，它将对应于 Linux 服务器上运行的版本——所有版本的模块都匹配。

如果没有针对 Windows 的解决方案，Linux 也可以。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:57:17.573

为什么不在 VirtualBox 中将 Linux 作为 VM 运行？如果有 requirements.txt 文件，使用 pip 安装模块应该不难运行，除非这些模块的版本不再可用。

如果项目太旧以至于没有必要的模块，你最好用更新的模块编写新代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:18:48.350

您可以按如下方式创建测试实验室。

*   windows 或 linux 上虚拟机中库和操作系统的版本。
*   对于 python 版本，您可以使用虚拟环境。

> [配置](http://wiki.dreamhost.com/Python#Installation)自定义 Python 环境的最简单方法是使用 virtualenv 为 Python 设置“虚拟环境”。Virtualenv 允许您添加和修改 Python 模块，而无需访问全局安装。

```
wget http://pypi.python.org/packages/source/v/virtualenv/virtualenv-1.5.2.tar.gz
tar xzf virtualenv-1.5.2.tar.gz

python virtualenv-1.5.2/virtualenv.py $HOME/env 
```

或者

```
python virtualenv-1.5.2/virtualenv.py --no-site-packages --distribute $HOME/env 
```

# javascript - 使用 Highcharts 时如何在 Highslide 弹出窗口中显示多行标题？

> ID：15003880
> 
> 赞同：0
> 
> 时间：2013-02-21T13:47:50.130
> 
> 标签：javascript, jquery, highcharts, highslide

我正在使用 Highcharts 显示图表，当用户单击图表中的某个点时，我正在使用 Highslide 在弹出窗口中显示其他信息。但是，我想在弹出窗口中向标题/标题文本添加其他信息。

我已经让 Highslide 使用以下代码显示基本信息：

```
$(function () {
    var options = {
        chart: {
            renderTo: 'container',
            defaultSeriesType: 'line'
        }
        credits: {
            enabled: false
        }
        plotOptions: {
            series: {
                cursor: 'pointer',
                point: {
                    events: {
                        click: function() {
                            hs.htmlExpand(null, {
                                pageOrigin: {
                                    x: this.pageX,
                                    y: this.pageY
                                },
                                headingText: this.series.name,
                                maincontentText: Highcharts.dateFormat('%A, %b %e, %Y', this.x) +':<br/> '+
                                    this.y +' visits',
                                width: 200
                            });
                        }
                    }
                },
                marker: {
                    lineWidth: 1
                }
            }
        },
        series: []
    }
}); 
```

我已经通读了 Highslide 的 API，发现您可以将 'heading' 变量与 'Expander.prototype.onAfterGetHeading' 函数一起使用，如下所示，但我不确定如何使用 Highcharts 实现它.

```
hs.Expander.prototype.onAfterGetHeading = function () {
    this.heading.html = 'this.a.title';
} 
```

[HERE](http://www.roadrash.no/hs-support/multiline-heading.html)是一个在 Highslide 弹出窗口中显示带有多行标题的弹出窗口的站点，例如。但是，请记住，我正在尝试在 Highcharts 中实现这一点，可能在标题中使用动态文本。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:54:44.410

这是您可以与 Highcharts 一起使用的解决方案：http: [//jsfiddle.net/roadrash/gd3xz/](http://jsfiddle.net/roadrash/gd3xz/)

请注意，这是在标题中插入锚的标题文本的正确代码，作为附加标题文本：

```
hs.Expander.prototype.onAfterGetHeading = function (sender) {
    if (sender.heading) {
        sender.heading.innerHTML += this.a.title;
    }
}; 
```

我对 Highcharts 不熟悉，但我认为您不能使用`this.a.title`，因为`a`它指的是锚标记。您当然可以插入除`this.a.title`上述代码之外的其他内容，就像我在演示中所做的那样。

# iphone - performSelector:withObject: 不能正常工作

> ID：15003890
> 
> 赞同：0
> 
> 时间：2013-02-21T13:48:08.213
> 
> 标签：iphone, ios, objective-c, mkoverlay

我有这种方法不能按我需要的方式工作。它创建了一个 MKPolyline “动画”：假设我有 85 分。连接这些点的每条折线都是在前一条折线之后 0.1 秒创建的。为此，它通过 performSelector:withObject:afterDelay: 调用自身。

```
-(void)addOverlaysFromPointsWithStartFromAndPoints:(NSArray *)arguments
{

    NSLog(@"end: %@ / coordinates count: %d",[arguments objectAtIndex:0],[[arguments objectAtIndex:1] count]);

    CLLocationCoordinate2D *locations = malloc(sizeof(CLLocationCoordinate2D)*2);
    Location *loc1 = (Location *)[[arguments objectAtIndex:1] objectAtIndex:[(NSNumber *)[arguments objectAtIndex:0] intValue]-1];
    Location *loc2= (Location *)[[arguments objectAtIndex:1] objectAtIndex:[(NSNumber *)[arguments objectAtIndex:0] intValue]];
    locations[0] = loc1.location;
    locations[1] = loc2.location;
    routeLine = [MKPolyline polylineWithCoordinates:locations count:2];

    [self.map addOverlay:routeLine];

    if(([(NSNumber *)[arguments objectAtIndex:0] intValue]+1) < [[arguments objectAtIndex:1] count])//add more overlays after delays unless this is the endpoint
    {
        NSArray *parameters = [NSArray arrayWithObjects:[NSNumber numberWithInt:[(NSNumber *)[arguments objectAtIndex:0] intValue] + 1],[arguments objectAtIndex:1],nil];
        [self performSelector:@selector(addOverlaysFromPointsWithStartFromAndPoints:) withObject:parameters afterDelay:0.1];
    }

} 
```

就我而言，我要创建 3 个子路由，所以最初我有一个数组，每个数组有 7、68 和 85 个索引。检查此日志：

```
2013-02-21 10:31:22.372 SIGView[329:907] end: 1 / coordinates count: 7
2013-02-21 10:31:22.433 SIGView[329:907] end: 1 / coordinates count: 68
2013-02-21 10:31:22.528 SIGView[329:907] end: 1 / coordinates count: 85
2013-02-21 10:31:22.541 SIGView[329:907] end: 2 / coordinates count: 85
2013-02-21 10:31:22.542 SIGView[329:907] end: 2 / coordinates count: 85
2013-02-21 10:31:22.650 SIGView[329:907] end: 2 / coordinates count: 85
2013-02-21 10:31:22.653 SIGView[329:907] end: 3 / coordinates count: 85
2013-02-21 10:31:22.655 SIGView[329:907] end: 3 / coordinates count: 85
2013-02-21 10:31:22.796 SIGView[329:907] end: 3 / coordinates count: 85
2013-02-21 10:31:22.798 SIGView[329:907] end: 4 / coordinates count: 85
2013-02-21 10:31:22.801 SIGView[329:907] end: 4 / coordinates count: 85
2013-02-21 10:31:22.898 SIGView[329:907] end: 4 / coordinates count: 85
2013-02-21 10:31:22.905 SIGView[329:907] end: 5 / coordinates count: 85
2013-02-21 10:31:22.909 SIGView[329:907] end: 5 / coordinates count: 85
2013-02-21 10:31:23.013 SIGView[329:907] end: 5 / coordinates count: 85
(...) 
```

我似乎在第一次为每个数组调用该方法时，它工作正常，但它假定最后一个数组（包含 85 个对象）。所以，我只有一个创建和动画的“路线”。

日志应类似于：

```
2013-02-21 10:31:22.372 SIGView[329:907] end: 1 / coordinates count: 7
2013-02-21 10:31:22.433 SIGView[329:907] end: 1 / coordinates count: 68
2013-02-21 10:31:22.528 SIGView[329:907] end: 1 / coordinates count: 85
2013-02-21 10:31:22.541 SIGView[329:907] end: 2 / coordinates count: 7
2013-02-21 10:31:22.542 SIGView[329:907] end: 2 / coordinates count: 68
2013-02-21 10:31:22.650 SIGView[329:907] end: 2 / coordinates count: 85
2013-02-21 10:31:22.653 SIGView[329:907] end: 3 / coordinates count: 7
2013-02-21 10:31:22.655 SIGView[329:907] end: 3 / coordinates count: 68
2013-02-21 10:31:22.796 SIGView[329:907] end: 3 / coordinates count: 85 
```

我希望您了解问题并帮助解决此问题。

提前致谢！

**编辑**

以下是该方法的调用方式：

```
NSArray *argumentsToOverlay = [NSArray arrayWithObjects:[NSNumber numberWithInt:1],locationsToLoadRegion, nil];

[self addOverlaysFromPointsWithStartFromAndPoints:argumentsToOverlay]; 
```

`locationsToLoadRegion`当数组分别包含 7、68 和 85 个对象时，这部分代码被调用了 3 次。

问题开始`performSelector:`的时间是第一次调用。

**编辑**

```
- (void)createPathWithCoordinates:(NSMutableArray *)coordinates{

    int count;

// This for run through all sub routes
    for (NSArray *trackings in coordinates) {
        [locationsToLoadRegion removeAllObjects];

        count = [trackings count];

        if (count > 1){

            // This for save the coordinates available for sub route
            for (NSInteger index = 0; index < count; index++)
            {
                Location *tempLocation = [trackings objectAtIndex:index];
                [locationsToLoadRegion addObject:tempLocation];
            }

            NSArray *argumentsToOverlay = [NSArray arrayWithObjects:[NSNumber numberWithInt:1],locationsToLoadRegion, nil];

            [self addOverlaysFromPointsWithStartFromAndPoints:argumentsToOverlay];

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:07:22.367

```
 NSArray *parameters = [NSArray arrayWithObjects:...];
    [self performSelector:... withObject:parameters ...]; 
```

您创建一个自动释放的数组（参数），它将在下一次调用函数之前被销毁。您仍然可以获得可用数据而不是异常/崩溃，这纯属巧合。

例如，一种解决方案是将参数保留为调用类的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:38:59.063

试试这个：

```
NSArray *argumentsToOverlay = [NSArray arrayWithObjects:
    [NSNumber numberWithInt:1],
    [[locationsToLoadRegion copy] autorelease],
    nil]; 
```

# c# - 调试和发布配置中的 C# 自定义控件

> ID：15003894
> 
> 赞同：0
> 
> 时间：2013-02-21T13:48:15.153
> 
> 标签：c#, visual-studio-2010, linker, custom-controls

我最近开始学习如何在 C# 中创建自定义控件，但我找不到任何关于它如何处理 Debug 和 Release 配置的好的解释。

我的项目的简化版本如下所示：

```
MyProject
  |- CustomControl.cs
  |- Form.cs 
```

`CustomControl.cs`是我的控件，并且`Form.cs`是一个包含`CustomControl`. 我添加`CustomControl`到`Form`使用设计工具箱，为了能够这样做，我必须右键单击它，选择“选择项目”并手动指向我的项目生成的程序集：.../bin/ **debug** / MyProject.exe .

这是我的问题：如果我选择了调试程序集，它会在发布模式下导致任何问题吗？我检查了它是否可以编译和工作，但这是否意味着 VS 足够聪明，可以链接到 Release 程序集，或者它仍然链接到 Debug 程序集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:09:51.083

*根据我的评论*

组件应自动出现在工具箱中。撤消您对工具箱所做的操作以添加自定义控件并查看此链接：[演练：使用自定义组件自动填充工具箱](http://msdn.microsoft.com/en-us/library/fw694kde%28v=vs.100%29.aspx)

*请[在此处查看 OP 的评论](https://stackoverflow.com/questions/15003894/c-sharp-custom-control-in-debug-and-release-configurations#comment21077025_15003894)，了解有关`AutoToolboxPopulate`.*

# image - 有没有办法强制 JavaFX 释放视频内存？

> ID：15003897
> 
> 赞同：3
> 
> 时间：2013-02-21T13:48:22.053
> 
> 标签：image, graphics, javafx

我正在编写一个利用 JavaFX 的应用程序，该应用程序每 20-30 秒在屏幕上滚动和关闭大量图像内容。它意味着能够运行多个小时，每隔几分钟就会引入全新的内容并丢弃旧内容。我的系统上有 512Mb 的图形内存，几分钟后，所有这些内存都被 JavaFX 消耗掉了，无论我对 JavaFX 场景做什么，它都没有被释放。当节点离开场景时，我一直非常小心地丢弃节点，一次最多在内存中有 50-60 个图像节点。我真的需要能够硬释放支持这些图像的图形内存，但无法弄清楚如何实现这一点，因为 JavaFX 中的图像接口似乎非常高级。

我正在寻找类似 java.awt.image.Image 上的 flush() 方法：http: [//docs.oracle.com/javase/7/docs/api/java/awt/Image.html#flush()](http://docs.oracle.com/javase/7/docs/api/java/awt/Image.html#flush())

我在 Linux 上运行 java 7u13。

编辑：

我设法找到了一个潜在的解决方法（见下文），但也输入了 JavaFX JIRA 票证以请求上述功能：

[RT-28661 在节点上添加对本机资源清理功能的显式访问。](https://bugs.openjdk.java.net/browse/JDK-8092301)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:14:53.683

我能想到的最佳解决方法是将 JVM 的最大堆设置为显卡可用限制的一半。（我有 512mb 的图形内存，所以我将其设置为 -Xmx256m ）这迫使 GC 更主动地清理我丢弃的 javafx.image.Image 对象，这反过来似乎触发了 JavaFX 的图形内存清理.

以前我的堆空间设置为 512mb，（我有 4gb 的系统内存，所以这是一个非常易于管理的限制）。问题似乎是 JVM 非常懒惰地清理我的图像，直到它开始接近这个 512mb 的限制。由于我所有的图像数据都被复制到了图形内存中，这意味着我很可能在 JVM 真正开始真正关心清理之前已经耗尽了我的图形内存。

我确实尝试了jewelsea的一些建议：

我正在调用 setCache(false)，所以这可能会产生积极的影响，但是直到我降低了最大堆大小后我才注意到改进。

我尝试使用 Java8 运行并取得了一些积极的结果。它似乎在图形内存管理方面表现得更好，但它仍然吞噬了我所有的内存，并且似乎直到我快要出局时才开始关心图形内存。如果降低应用程序的堆限制不可行，那么评估 Java8 预发行版可能是值得的。

我将向 JavaFX 项目发布一些功能请求，并将提供指向 JIRA 票证的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:22:57.570

也许您遇到了与以下问题的根本原因相关的行为：

[RT-16011 需要让 PG 节点知道它们何时不再是场景图的一部分的机制](https://bugs.openjdk.java.net/browse/JDK-8100710)

从问题描述：

> 一些 PG 节点包含非堆资源的句柄，例如 GPU 纹理，当节点不再是场景图的一部分时，我们希望积极回收这些资源。不幸的是，没有机制向他们报告这种状态变化，以便他们可以释放他们的资源，所以我们必须依靠 GC、Ref 队列和有时完成来回收资源的组合。当垃圾收集落后并且我们用完这些有限的资源时，对其中一些资源的延迟回收可能会导致异常。

当您查看我链接的问题页面时，您可以看到许多其他相关问题（需要注册才能查看问题，但任何人都可以注册）。

与示例相关的问题是：

[RT-15516 与从场景中删除的缓存节点关联的图像数据未积极释放](https://bugs.openjdk.java.net/browse/JDK-8090091)

一位用户评论说：

> 我为我的应用程序找到了一个解决方法，只是将所有经常使用的节点设置为使用 Cashe 为 false。工作 2 天没有任何崩溃。

因此，请尝试在您的节点上调用[setCache(false) 。](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#setCache%28boolean%29)

还可以尝试使用已修复其中一些问题的[Java 8 预览版](http://jdk8.java.net/download.html)，看看它是否提高了应用程序的稳定性。尽管目前，即使在 Java 8 分支中，仍然存在以下未解决的问题：

[RT-25323 Prism 需要一个统一的纹理资源管理系统](https://bugs.openjdk.java.net/browse/JDK-8102008)

> 目前纹理资源至少在两个地方单独管理，具体取决于它的使用方式；一个是图像的纹理缓存，另一个是 RTT 的 ImagePool。这种方法在其设计上存在缺陷，即 2 个缓存彼此不知道，并且假定系统具有无限的本地资源。

使用[具有更多内存的视频卡](http://www.geforce.com/hardware/desktop-gpus/geforce-gtx-titan/specifications) *可以*减少或消除该问题。

您可能还希望组合一个[最小的可执行示例](http://sscce.org/)来演示您的问题并[针对 JavaFX 运行时项目提出错误请求，](https://bugs.openjdk.java.net/browse/JDK/component/11900)以便 JavaFX 开发人员可以调查您的方案并查看它是新问题还是已知问题的重复。

# asp.net - 在不知道旧密码的情况下更改 Umbraco 会员密码

> ID：15003898
> 
> 赞同：2
> 
> 时间：2013-02-21T13:48:23.687
> 
> 标签：asp.net, umbraco

我需要一个以编程方式更改 umbraco 成员密码的功能。用户可以在我在 umbraco 节点上设置的字段中添加他们的新密码。当他们发布节点时，新密码将生效。我找到了一种将当前密码更改为的方法给定一个

```
 member.ChangePassword(oldPassword, password); 
```

但这需要旧密码才能工作。我无法提供它，因为用户已经在 umbraco 节点中更改了旧密码。然后我尝试以编程方式获取旧密码。

```
 string theUserPassword = Membership.GetUser(username).GetPassword(); 
```

但这也会引发错误

```
Password Retrieval Not Enabled. 
```

有没有办法以编程方式获取旧密码？还是我走错了方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-10T12:52:19.777

我知道这是一个旧帖子，并且已经接受了答案，但是您实际上可以通过将方法的返回值用于`ResetPassword`方法的`oldValue`参数来实现 OP 想要做的事情`ChangePassword`：

`member.ChangePassword(member.ResetPassword(), "New Password")`

这允许您在不知道用户现有密码的情况下将用户的密码更改为特定值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T15:15:21.457

Umbraco 使用 Microsoft Membership Provider。您可能已将属性“ [EnablePasswordRetrieval](http://msdn.microsoft.com/en-us/library/2x0c6sfa.aspx) ”设置为 false。

如果您不知道密码但需要更改密码，您可以使用[ResetPassword](http://msdn.microsoft.com/en-us/library/d94bdzz2.aspx)方法重置密码 bij。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-17T14:17:29.600

旧问题的另一种选择：

我正在使用 Umbraco 7.2.4，这是我更改密码的方法。

```
var member = Services.MemberService.GetByUsername("username");
Services.MemberService.SavePassword(member, "new password"); 
```

其中“Services.MemberService”来自 ApplicationContext.Current.Services.MemberService。

第一行代码是您获取要更改密码的成员的位置。这也可以通过电子邮件或身份证来完成。

```
Services.MemberService.GetByEmail("email")
Services.MemberService.GetById(id) 
```

第二行是更改密码的地方。它是自动散列的。

# checkbox - 复选框外键在 Yii 中属于很多

> ID：15003899
> 
> 赞同：0
> 
> 时间：2013-02-21T13:48:26.120
> 
> 标签：checkbox, yii, foreign-keys, one-to-many, belongs-to

我是 yii 框架的新手，所以我可以使用一些帮助。假设我在我的数据库中有一个带有 POST 的表，其中 1 个字段是 TYPE。在另一个表中，我有很多这样的类型：

表类型：

```
id  name
1   Politic
2   Sport
3   Espiritual 
```

表帖：

```
id  title
1   Politic in Barsovia
2   God exist!
3   Del Po Win in Rotterdam 
```

表 Post_type

```
id  id_post id_type
1   1       1
2   2       3 
3   3       2 
```

我在 TYPE 中有关系

```
'posttype' => array(self::HAS_MANY, 'Post_type', 'ID_TYPE'), 
```

我在 POST 中有关系

```
'posttype' => array(self::HAS_MANY, 'Post_type', 'ID_POST'), 
```

我想要这个[例子](http://www.mkyong.com/wp-content/uploads/2010/08/SpringMVC-CheckBox-Example-2.jpg)

问题：

**如何从表 TYPE 中制作复选框列表**

**如何使用 activeCheckBoxList 宽度 CAdvancedArBehavior**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:16:36.860

You can use the CHtml::checkBoxList() (or CHtml::activeCheckBoxList() or its wrapper in CActiveForm). For example, in your controller, you can have this line to retrieve all your related types:

```
$types = CHtml::listData($model->posttype, 'id', 'name'); // prepare the data for check box list
// the rest of your controller code ...
$this->render('create', array(
    'model' => $model,
    'types' => $types,
)); 
```

In your view, you can use CActiveForm::checkBoxList() to generate the check boxes:

```
<?php echo $form->checkBoxList($model, 'type', $types); ?> 
```

Also, I recommend you make your relationships more user-friendly by changing the names: You should have "posts" as the name of your relation in your Type model, and "types" as the name of your relation in the Post model.

# javascript - 我想在我的博客中使用“LaTeX”语法（MathJax）

> ID：15003902
> 
> 赞同：2
> 
> 时间：2013-02-21T11:19:26.087
> 
> 标签：javascript, html, equation, math-mode

我检查了许多关于如何在 blogspot 中设置 LaTeX 的说明。我去了“添加小工具”、“配置 HTML/JavaScript”以及*[如何在 blogspot 上使用 LaTeX？](https://tex.stackexchange.com/questions/13865)*.

然后我发布了这段代码：

```
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js">
MathJax.Hub.Config({
 extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"],
 jax: ["input/TeX", "output/HTML-CSS"],
 tex2jax: {
     inlineMath: [ ['$','$'], ["\\(","\\)"] ],
     displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
 },
 "HTML-CSS": { availableFonts: ["TeX"] }
});
</script> 
```

但是什么都没有成功。

该过程的屏幕截图是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:16:34.157

尝试删除`displayMath`分隔符后的多余逗号。这些额外的逗号经常会混淆 Internet Explorer，因此如果您使用 Internet Explorer 作为浏览器，这可能就是问题所在。

# ant - 使用项目名称创建 Ant 类路径

> ID：15003924
> 
> 赞同：0
> 
> 时间：2013-02-21T13:49:31.453
> 
> 标签：ant, classpath

在一个 ant 构建脚本中，我有一个我们依赖的项目列表。我需要为编译创建一个类路径。

我有：

```
included.projects=ProjectA, ProjectB 
```

我需要：

```
included.project.classpath=../ProjectA/bin, ../ProjectB/bin 
```

当前代码：

```
<echo message="${included.projects}" />

<pathconvert property="included.projects.classpath" dirsep="," >
      <map from="" to="../"/>
        <path location="${included.projects}"/>
    </pathconvert>

<echo message="${included.projects.classpath}" />

<javac srcdir="${src.dir}" destdir="${build.dir}" includeantruntime="false" source="1.6">
    <classpath>
        <pathelement path="${classpath}" />
        <dirset includes="${included.projects.classpath}" />
    </classpath>
</javac> 
```

我也尝试过明确声明，但没有奏效：

```
<path id="modules.classpath"> 
  <fileset dir="../ModuleA/bin" /> 
  <fileset dir="../ModuleB/bin"/> 
</path> 
<path id="libraries.classpath"> 
  <fileset dir="lib" includes="*.jar"/> 
</path> 
<javac srcdir="${src.dir}" destdir="${build.dir}" includeantruntime="false" source="1.6"> 
   <classpath refid="libraries.classpath" /> 
   <classpath refid="modules.classpath" /> 
</javac> 
```

我很好奇，显式声明代码有什么问题，是否可以使用逗号分隔字符串到类路径解决方案来解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:06:36.667

我认为在构建顶部显式声明类路径会更简单，如下所示：

```
<path id="compile.path">
   <fileset dir="../ProjectA/bin" includes="*.jar"/>
   <fileset dir="../ProjectB/bin" includes="*.jar"/>
</path> 
```

使用如下：

```
<javac srcdir="${src.dir}" destdir="${build.dir}" includeantruntime="false" source="1.6">
    <classpath>
        <path refid="compile.path"/>
        <pathelement path="${classpath}" />
    </classpath>
</javac> 
```

笔记：

*   我再次阅读了您的问题，才意识到您没有使用其他项目构建的 jar 文件，是吗？....不是一个好主意....

# html5-canvas - HTML5 贝塞尔曲线动画

> ID：15003927
> 
> 赞同：0
> 
> 时间：2013-02-21T13:49:42.803
> 
> 标签：html5-canvas

我在 HTML5 领域有点新手，我有一个问题要问。我正在尝试在 HTML5 画布中创建绘图，如铅笔、贝塞尔曲线。虽然我已经创建了我的曲线，但在加载窗口时我无法让它自己绘制。任何建议都是因为我已经在所有网络上搜索了这个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:32:04.843

澄清一下：你想动画贝塞尔曲线的绘制，让它看起来像是在屏幕上绘制的？

如果是这样，请看[这个答案](https://stackoverflow.com/questions/878862/drawing-part-of-a-bezier-curve-by-reusing-a-basic-bezier-curve-function)。这向您展示了如何绘制贝塞尔曲线的一部分。

您想要做的是重复绘制曲线的一部分（例如每 50 毫秒一次，或您选择的任何间隔）。但是，每次绘制它时，都会绘制曲线的较大部分，直到绘制出整个曲线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:08:31.140

在**window.onload**事件上，在画布上绘制贝塞尔曲线。

```
window.onload=function()
{
  // here your your code
} 
```

如需更多帮助，请检查此检查此 ans

*   [使用贝塞尔曲线](https://stackoverflow.com/questions/14724574/using-bezier-curves/14725463#14725463)

# c# - 在构建时引用要复制的资源

> ID：15003930
> 
> 赞同：1
> 
> 时间：2013-02-21T13:49:50.933
> 
> 标签：c#, visual-studio-2010

在 Visual Studio 中，我可以将资源（文本文件、图像等）添加到项目中，并在构建时将其复制到输出目录。这样做的问题是项目将文件复制到项目目录中。我有一个多项目解决方案，其中许多项目都引用相同的资源，我不希望将资源复制到每个项目目录中。我希望资源保留在一个单独的资源目录中，该目录与解决方案的其余部分一起处于源代码控制之下。有没有办法让我将资源添加到项目中，并让项目将资源复制到构建时的调试和发布目录，而不会强制文件进入项目目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:54:10.320

在项目资源管理器中选择要添加文件的文件夹或项目并右键单击。`Add Existing Item`从菜单中选择。

找到文件并单击按钮附近的箭头`Add`。从打开的菜单中，选择`Add As Link`。

不要忘记更改链接项目的属性（复制到输出目录等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:53:52.687

您应该能够将文件链接到您的项目中，而不是复制它们。有关步骤，请参阅[http://support.microsoft.com/kb/306234](http://support.microsoft.com/kb/306234)。

# backup - 如何自动进行日志文件备份

> ID：15003931
> 
> 赞同：0
> 
> 时间：2013-02-21T13:49:50.723
> 
> 标签：backup, logfile

如何在日志文件（.txt）的大小达到阈值级别（例如 5MB）时自动备份它。备份文件名应类似于 (log_file_name)_(system_date) 并且应清除原始日志文件 (0 KB)。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T12:46:43.040

使用 lenght() 检查您的日志文件大小。然后检查它是否大于 5mb 调用 extendLogFile() 函数。

这是您可以轻松转换为 java 的 c# 代码

尺寸检查：

```
if (size > 400 * 100 * 100)
{
   extendLogFile(Path);
} 
```

复制存档目录中的旧日志文件并创建新的日志文件：

```
private static void extendLogFile(string lPath)
{
        string name = lPath.Substring(0, lPath.LastIndexOf("."));
        string UniquName = GenerateUniqueNameUsingDate(); // create a unique name for old log files like '12-04-2013-12-43-00'

        string ArchivePath = System.IO.Path.GetDirectoryName(lPath) + "\\Archive";
        if (!string.IsNullOrEmpty(ArchivePath) && !System.IO.Directory.Exists(ArchivePath))
        {
            System.IO.Directory.CreateDirectory(ArchivePath);
        }

        string newName = ArcivePath + "\\" + UniquName;

        if (!File.Exists(newName))
        {

            File.Copy(lPath, newName + ".txt");

            using (FileStream stream = new FileStream(lPath, FileMode.Create))
            using (TextWriter writer = new StreamWriter(stream))
            {
                writer.WriteLine("");
            }
        }

 } 
```

# c++ - CEDel.exe 中 0x03f7111c 的第一次机会异常：0xC0000005：访问冲突写入位置 0x002e0364

> ID：15003936
> 
> 赞同：0
> 
> 时间：2013-02-21T13:50:11.120
> 
> 标签：c++, visual-studio-2008, visual-c++, windows-ce

我收到“CEDel.exe 中 0x03f7111c 处的第一次机会异常：0xC0000005：访问冲突写入位置 0x002e0364。” 运行我的代码时出错。我目前正在调试模式下运行，并且在插入我的计算机的实际 Win Mobile CE 6.5.3 设备上运行。堆栈的顶部（不是反汇编）指向一个 if 语句，我不确定是什么导致了错误。该项目是几年前在 MS eMbedded C++ 中创建的，我正在将其移植到 MS Visual Studio 2008。

代码是

```
CDeviceFuncCursor& curs = tempDeviceFunc.GetCursor();// added for debug checks

if (((wcscmp(_wcsupr(tempDeviceFunc.GetCursor().m_szSection), _wcsupr(INI_SERVERS_SECTION)) == 0) &&    //INI_SERVERS_SECTION == _T("Servers")
    ((wcscmp(_wcsupr(tempDeviceFunc.GetCursor().m_szVariable), _wcsupr(FTP_PRIMARY)) == 0) ||   //FTP_PRIMARY == _T("Primary")
*    (wcscmp(_wcsupr(tempDeviceFunc.GetCursor().m_szVariable), _wcsupr(SERVER_PORT)) == 0))))   //SERVER_PORT == _T("SERVERPORT")
{
    CString csValue = tempDeviceFunc.GetCursor().m_szValue;
    csValue = EncryptData(csValue.GetBuffer(csValue.GetLength()));

    WriteProfileString(tempDeviceFunc.GetCursor().m_szSection, tempDeviceFunc.GetCursor().m_szVariable, csValue.GetBuffer(csValue.GetLength()+1));
} 
```

带有 * 的行是堆栈指向的行。

在断点处：curs.m_szSection = "APPLICATIONCONTROL", curs.m_szVariable = "AppLanguage", curs.m_szValue == "0"

我不确定在哪里可以找到错误，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:46:07.083

我猜你有一个宏

```
#define SERVER_PORT _T("SERVERPORT") 
```

在这种情况下`_T("SERVERPORT")`是一个 const 数组。
你不能修改它（`_wcsupr`就地修改它的参数）。

用变量替换宏：

```
TCHAR SERVER_PORT[] = _T("SERVERPORT"); 
```

# jquery - jQuery Sum 数组

> ID：15003938
> 
> 赞同：1
> 
> 时间：2013-02-21T13:50:12.907
> 
> 标签：jquery, arrays, sum

我想从许多游乐设施中获得总数和平均值。现在我整天都被这个困住了，首先我尝试了它周围的跨度，但我想也许有一个数组更好，希望有人能帮助我解决缺失的部分。

示例：http: [//jsbin.com/inapey/31/edit](http://jsbin.com/inapey/31/edit)

```
<tbody id="rides">
    <tr>
        <td class="muted"><small>Mr.</small></td>
        <td>John</td>
        <td>Smith</td>
      <!-- Every ride of this person -->
        <td class="ride_km" style="display:none;">225,75</td>
      <!-- Sum & Average of this person -->
        <td class="ride_total_km"></td>
        <td class="ride_average_km"></td>
    </tr>
    <tr>
        <td class="muted"><small>Mrs.</small></td>
        <td>Jane</td>
        <td>Smith</td>
     <!-- Every ride of this person -->
      <td class="ride_km" style="display:none;">150,300</td>
      <!-- Sum & Average of this person -->
        <td class="ride_total_km"></td>
        <td class="ride_average_km"></td>
    </tr>
 </tbody> 
```

jQuery

```
$(document).ready(function(){
  var total = 0;

  $('#rides tr').each(function() {
  var RidesKM = $(this).fin('.ride_km').html().split(",");  
  var arr = jQuery.makeArray(RidesKM); 
  alert(arr);

  var SumKM = ???;
  var AveKM = ???;  

  /* Total KM's */
    $(this).find('.ride_total_km').html(SumKM);
  /* Average KM's */
    $(this).find('.ride_average_km').html(AveKM.toFixed(0));  

  }); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:07:51.913

*更新的答案。

[这是一个小提琴。](http://jsfiddle.net/9pr3A/6/)

这是代码：

```
$(document).ready(function () {
    $('#rides tr').each(function () {
        var that = $(this);
        var sum = 0;

        that.find('.ride_km').each(function () {
            var values = $(this).text().split(',');
            $.each(values,function() {
                sum += parseFloat(this);
             });
            /* Total KM's */
            that.find('.ride_total_km').html(sum.toFixed(2));
            /* Average KM's */
            that.find('.ride_average_km').html((sum / values.length).toFixed(2))
        });
    });
}); 
```

将值存储在隐藏的 td 中很奇怪。我会建议（如果您可以使用 javascript 或如果可能的话从服务器进行所有计算（如果您使用的是 PHP 或其他）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:18:18.927

如果我理解正确，您需要每个人的总数。在这种情况下，您不需要`total`变量：

```
$(document).ready(function(){
  $('#rides tr').each(function() {
    var SumKM = 0;
    var RidesKM = $(this).find('.ride_km').html().split(",");

    for (i = 0; i < RidesKM.length; i++) {
      SumKM += parseInt(RidesKM[i]);
    }

    var AveKM = SumKM / RidesKM.length;  

    /* Total KM's */
    $(this).find('.ride_total_km').html(SumKM);
    /* Average KM's */
    $(this).find('.ride_average_km').html(AveKM.toFixed(0));  
  }); 
}); 
```

# python - Python中的矩阵乘法

> ID：15003939
> 
> 赞同：0
> 
> 时间：2013-02-21T13:50:17.097
> 
> 标签：python, matrix, multiplication

你好（对不起我的英语），我对矩阵乘法的python有很大的疑问，我创建了一个列表列表并乘以一个缩放矩阵，这就是我所做的，我不能用索引执行乘法运算问题，我用纸和铅笔检查并且它有效，我在做一些不好的事情来容纳索引或者我从一开始就错误地容纳矩阵？

```
def main():
if len(sys.argv) > 1:
    v = int(sys.argv[1])
else:
    print "error python exe:"
    print "\tpython <programa.py> <num_vertices>"
A = []
for i in range(v):
    A.append([0]*2)
for i in range(v):
    for j in range(2):
        A[i][j] = input("v: ")  

print A 
    Escala(A)

def Escala(A):
    print "Escala"
    sx = input("Sx: ")
    sy = input("Sy: ")
    S = [(sx,0),(0,sy)]
    print S
    M = mult(S,A)
    print M

def mult(m1,m2):
M = zero(len(m1),len(m2[0])) 
    for i in range(len(m2)):   
        for j in range(len(m2[0])): 
            for k in range(len(m1)): 
                M[i][j] += m1[k][j]*m2[k][j]
    print M                 
    return M

def zero(m,n):
# Create zero matrix
new_matrix = [[0 for row in range(n)] for col in range(m)]
return new_matrix 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:52:20.360

这对我来说似乎是错误的：

```
M[i][j] += m1[k][j]*m2[k][j] 
```

不应该是：

```
M[i][j] += m1[i][k]*m2[k][j] 
```

# c++ - 确定多字符文字是否等于一个值或另一个

> ID：15003940
> 
> 赞同：3
> 
> 时间：2013-02-21T13:50:19.270
> 
> 标签：c++, if-statement

这是一件非常简单的事情，但我想知道是否有办法检查多字符文字是否等于两个（或更多）多字符文字之一。

我要更改的代码将是这样的：

```
if (value == 'test' || value == 'example') 
```

我想也许它会是类似的东西

```
if (value == ('test' | 'example') 
```

...但这似乎不起作用。真的有办法吗？我想是这样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:51:28.853

你可以这样做：

```
std::string const s = "blah blah";
if( s == "test" || s == "example" )
{
    // ...
} 
```

您还可以检查字符串是否是 a 的成员`std::set`。

例如

```
static char const* const data[] = {"test", "example"};
set<string> const values( data, data + 2 );

if( values.find( "blah blah" ) != values.end() )
{
    cout << "found!" << endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:51:44.393

任何变量一次只能与一个值进行比较，并且您不能“或”字符串...所以不，恐怕您不走运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T13:55:35.653

你可以用这个

```
std::vector<string> v;
v.push_back("Test");
v.push_back("Example");

if (std::find(v.begin(), v.end(), stringToMatch) != v.end())
{
  //It was similar to one of the strings
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T13:54:03.720

你越接近正则表达式，但它们只能在 C++11 中使用（或通过像 PCRE 这样的外部库），并且与 OR'ed 比较相比，它们会产生很多开销，所以我怀疑你是否想那样做对于这么简单的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T13:57:27.580

你可以有一个[`set`](http://en.cppreference.com/w/cpp/container/set)字符串并检查是否存在。正如其他人所指出的那样[`unordered_set`](http://en.cppreference.com/w/cpp/container/unordered_set)，查找可能更有效。

```
unordered_set<string> validStrings = {"test",
                                      "example"};

if(validStrings.count("example") > 0) {
    //...
} else {
    //...
} 
```

*编辑*

将其包装在一个类中：

```
template<typename Type>
class Container {
    unordered_set<Type> values;
public:
    //...
    bool contains(const Type& value) const {
        return values.count(values) > 0;
    }
}; 
```

并用作：

```
Container<string> validStrings = {"test",
                                  "example"};

if(validStrings.contains("example") {
    //...
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-21T13:57:38.153

可能的解决方案：

*   使用正则表达式（[`boost::regex`](http://www.boost.org/doc/libs/1_53_0/libs/regex/doc/html/index.html)或[`std::regex`](http://en.cppreference.com/w/cpp/regex/basic_regex)）：

    ```
    const boost::regex r("test|example");
    if (boost::regex_match(s, r))
    {
    } 
    ```

*   使用字符串填充容器并搜索容器：

    ```
    std::set<std::string> strings { "example", "test" };
    if (strings.count(s) > 0)
    {
    } 
    ```

*   或者你有什么问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-21T13:51:03.517

很简单，不，没有。您将尝试在两个字符串上进行按位或操作，我认为这不是`std::string`.

你可以编写一个可变参数函数来为你做这件事，尽管它可能比正常做更多的工作。

# ajax - PhoneGap 在线事件和发送数据到服务器

> ID：15003942
> 
> 赞同：0
> 
> 时间：2013-02-21T13:50:22.383
> 
> 标签：ajax, cordova

我正在制作一个下订单的应用程序。但是当设备没有网络连接时，订单将被保存在设备本地，直到再次获得网络访问权限，此时数据被发送到服务器。

不过我有一个担心。当设备获得连接并开始传输时，是什么在几毫秒后停止连接失败并破坏传输？有一个功能会在持续网络访问后触发 10 秒，还是仅在 3G 连接时发送会更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:57:19.773

当您在上传过程中断开连接时，您还会收到一条失败/错误消息。您应该提供一个错误回调并处理要做什么。如果请求成功，实体将从本地存储中删除 - 如果出现错误，则不会删除。

# node.js - 监听不同的 IP 地址

> ID：15003947
> 
> 赞同：21
> 
> 时间：2013-02-21T13:50:34.950
> 
> 标签：node.js, express

这是我的代码：

```
var server = express();

// Create the HTTP server
http
    .createServer(server)
    .listen(80, '10.10.10.10'); 
```

服务器启动后，如何动态更改侦听的 IP 地址，例如`11.11.11.11`改为`10.10.10.10`. 有没有“不听”的方法？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-21T15:09:14.653

你必须使用 server.close() 而不是 app.close()..

```
var express = require('express')
  , http = require('http')
  , app = express()
  , server = http.createServer(app)

app.get('/',function(req,res){
  ...
})

server.listen(8000,'127.0.0.1',function(){
 server.close(function(){
   server.listen(8001,'192.168.0.202')
 })
}) 
```

应该管用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:57:01.767

我认为您正在寻找的“unlisten”功能称为“close”：[http ://nodejs.org/api/http.html#http_server_close_callback](http://nodejs.org/api/http.html#http_server_close_callback)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:58:19.217

在我看来，你想要完成的事情是非常不标准的。我建议[server.close()](http://nodejs.org/api/net.html#net_server_close_callback)。关闭将等待所有请求完成并触发“关闭”事件。您可以绑定该事件以侦听新 IP。这很奇怪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-09T16:28:39.813

```
app.listen(3000,'0.0.0.0',function(){
  console.log('Server running at http://127.0.1.1:8000/')
}) 
```

将与快递合作

# excel - 使用 Excel 值调整 SQL 查询

> ID：15003951
> 
> 赞同：1
> 
> 时间：2013-02-21T13:50:48.603
> 
> 标签：excel, sql-server-2012

我正在使用 Excel 2013 从 SQL Server 2012 数据库中获取数据，我使用 SQL 查询成功获取数据，但现在我希望该查询是动态的，基于月份和年份。如何使用单元格值（电子表格单元格）作为此类查询的参数？我使用这个查询：

```
 SELECT [Class_02] AS [MS Part Number]
          ,[701].[dbo].[ItemClasses].[Description] AS [Item Name]
          ,ROUND([701].[dbo].[frhsrg].[esr_aantal]/3, 0) AS [Aantal]
          ,[701].[dbo].[ItemAccounts].[SlsPkgsPerPurPkg] AS [Prijs]
          ,SUM(DISTINCT [701].[dbo].[frhsrg].[esr_aantal]) * [701].[dbo].[ItemAccounts].[SlsPkgsPerPurPkg] as Totaalprijs

FROM [701].[dbo].[Items] 

      WHERE DATEPART(YEAR, fakdat) =  '2013'
      AND DATEPART(QUARTER, fakdat) =  '1'
      AND [701].[dbo].[frhsrg].[docnumber] LIKE '%kwartaal%' 
```

我在**Excel**中有两个值（月份和年份），例如 2013 年 3 月，然后 SQL 中的 DATEPART 语句必须基于此。我使用 Excel 2013 加载项 PowerPivot 用 SQL 查询输出填充 Excel 工作表。SQL 查询需要如何做到这一点？

转发，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:01:03.957

...我将查询保存为 Excel VBA 宏中的字符串（我假设这是运行此查询的位置），只需将其编写如下：

```
WHERE DATEPART(YEAR, fakdat) =  <<YEAR>>
AND DATEPART(QUARTER, fakdat) = <<MONTH>> 
```

基本上将`<<YEAR>>`and`<<MONTH>>`作为占位符，然后您可以使用如下`Replace`所示的函数：

```
Replace strSQL, "<<YEAR>>", Range("A1").Text 
```

`strSQL`SQL 字符串在哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:06:47.683

自定义参数查询 - [http://office.microsoft.com/en-us/excel-help/customize-a-parameter-query-HP010216113.aspx](http://office.microsoft.com/en-us/excel-help/customize-a-parameter-query-HP010216113.aspx)

# android - JNIEnv 全局引用与 C 中的 jobject 有何不同？

> ID：15003952
> 
> 赞同：1
> 
> 时间：2013-02-21T13:50:49.603
> 
> 标签：android, c, java-native-interface, jnienv

到目前为止，我已经在本地保存了我的 JNI 环境和 jobject 对象。我发现要让我的 JNI 运行 ICS 和升级设备，我需要修复我的 JNI 代码。这是我得到的错误：

```
02-20 10:20:59.523: E/dalvikvm(21629): JNI ERROR (app bug): attempt to use stale local reference 0x38100019
02-20 10:20:59.523: E/dalvikvm(21629): VM aborting
02-20 10:20:59.523: A/libc(21629): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1), thread 21629 
```

我对如何创建/销毁这些全局变量以及我是否做得对感到困惑。

我的应用程序目前在所有使用此代码的 pre-ICS 设备上运行良好：

```
BYTE Java_my_eti_commander_RelayAPIModel_00024NativeCalls_InitRelayJava( JNIEnv *env, jobject obj  ) {

    myEnv = (env);
    myObject = obj;

    changeID = (*myEnv)->GetStaticMethodID( myEnv, myObject, "changeItJavaWrapper", "(S)V"  );
    getID    = (*myEnv)->GetStaticMethodID( myEnv, myObject, "getItJavaWrapper"   , "(S)S"   );
    putID    = (*myEnv)->GetStaticMethodID( myEnv, myObject, "putItJavaWrapper"   , "(B)V" );
    flushID  = (*myEnv)->GetStaticMethodID( myEnv, myObject, "flushItJavaWrapper" , "()V"   );
    delayID  = (*myEnv)->GetStaticMethodID( myEnv, myObject, "delayItJavaWrapper" , "(S)V"  );

    RelayAPI_SetBaud= WrapSetBaud;
    RelayAPI_get    = WrapGetIt;
    RelayAPI_put    = WrapPutIt;
    RelayAPI_flush  = WrapFlushIt;
    RelayAPI_delay  = WrapDelayIt;
    ...
} 
```

在`GetStaticMethodID`调用下，RelayAPI_ 变量都是指向这里的函数指针：

```
void WrapSetBaud( WORD w ) {
    return (*myEnv)->CallStaticVoidMethod( myEnv, myObject, changeID, w );
}

short WrapGetIt( WORD time ) {
    return (*myEnv)->CallStaticShortMethod( myEnv, myObject, getID, time );
}

void WrapPutIt( BYTE buff ) {
    return (*myEnv)->CallStaticVoidMethod( myEnv, myObject, putID, buff );
}

void WrapFlushIt( void ) {
    return (*myEnv)->CallStaticVoidMethod( myEnv, myObject, flushID );
}

void WrapDelayIt( WORD wait ) {
    return (*myEnv)->CallStaticVoidMethod( myEnv, myObject, delayID, wait );
} 
```

最后，它在这里返回我的 Java 代码：

```
public static void changeItJavaWrapper( short l ) throws IOException {
    mModelService.changeitJava( l );
}

public static void flushItJavaWrapper() {
    mModelService.flushitJava();
}

public static void putItJavaWrapper( byte p ) {
    mModelService.putitJava( p );
}

public static void delayItJavaWrapper( short wait ) {
   mModelService.delayitJava( wait );
}

public static short getItJavaWrapper( short s ) throws IOException {
    return mModelService.getitJava( s );
} 
```

我已将初始化更改为：

```
myEnv = (*env)->NewGlobalRef(env,obj);
myObject = (*env)->NewGlobalRef(env,obj); 
```

但是我对此感到非常困惑，因为它们具有相同的参数，而且没有任何意义。我在任何地方都找不到这种方法的文档，听起来很愚蠢，[`this tutorial`](http://android-developers.blogspot.com/2011/11/jni-local-reference-changes-in-ics.html), [`this page`](http://developer.android.com/training/articles/perf-jni.html)，并且[`the oracle docs`](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/design.html#wp1242)没有关于`NewGlobalRef`方法本身的任何信息。

**编辑**

```
jmethodID changeID;
jmethodID getID;
jmethodID putID;
jmethodID flushID;
jmethodID delayID;
jobject myObject;
jclass    bluetoothClass;
JNIEnv *myEnv; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T14:27:08.877

首先：`myEnv = (*env)->NewGlobalRef(env,obj);`是错误的。[你不能缓存这个值](https://stackoverflow.com/questions/6202621/how-to-create-static-jni-environment-pointer)。

您可以缓存方法 ID、字段 ID、类引用……（但请确保之后清理这些内容）。但是缓存这些值需要特殊措施。

**为什么？**问题是JVM被允许根据程序的需要加载和卸载类。因此，一旦类的最后一个实例被垃圾收集器销毁，就可能会卸载一个类。一旦发生这种情况，您的缓存 ID 将不再有效。在 JVM 再次加载类后，ID 可能会相同，但这不能保证。

**解决方案：**如果您想缓存这些 ID，您必须告诉 JVM 不允许卸载类。这正是这样`NewGlobalRef`做的。您只需增加传递给的引用的引用，`NewGlobalRef`因此引用计数永远不会下降到零，并且不允许抓取收集来清理被引用的元素。

**注意：**创建 a`NewGlobalRef`有一个严重的缺点：除了在 Java 中，您必须确保在`DeleteGlobalRef`不再需要此引用时调用以重新启用引用的垃圾收集。（因为垃圾收集器不知道你是否还需要这个引用）或者换句话说：你必须确保你自己清理你的垃圾，否则你会留下内存泄漏。

我还要说为对象创建全局引用不是一个好主意（除非你真的想让对象保持活动状态），因为这意味着对象永远不会进入垃圾，因此永远不会被释放。

**更好的变体：**如果您想缓存这些 ID 以加快对某个对象的访问，请保留类的全局引用（使用）并从类对象返回中`FindClass`获取 ID 。`FindClass`

这是我的意思的（不完整）示例。我通常会创建一个结构来保存访问类所需的所有 ID，以保持命名空间干净。你可以想象如下：

```
/*! \brief Holds cached field IDs for MyClass.java */
typedef struct MyClass {
    int loaded;   /*!< Nonzero if the information are valid */

    jclass clazz;    /*!< Holds a global ref for the class */
    jfieldID aField; /*!< Holds the field ID of aField */
}tMyClass;

static tMyClass me = { 0 }; 
```

最简单的方法是为您的对象提供一个“连接”函数，该函数对上面定义的结构进行初始化。

```
/*! \brief This function fetches field IDs for a specific class in order to have
           faster access elsewhere in the code 

    \param env  a valid JNI environment 

    \return
            -  0 if OK
            - <0 if an error occured */
int MyClass_connect(JNIEnv *env)
{
    jobject theClass = env->FindClass("MyClass");
    if (theClass == NULL) goto no_class;

    me.clazz = (jclass) env->NewGlobalRef(theClass);    // make it global to avoid class unloading and therefore
                                                    // invalidating the references obtained.
    if (me.clazz == NULL) goto no_memory;

      me.aField = env->GetFieldID(me.clazz, "aField", "I")    ;
    if (me.aField == NULL) goto no_aField;

    me.loaded = 1;
    return 0;

no_aField:
    env->DeleteGlobalRef(me.clazz);
no_memory:
no_class:
    return -1;
} 
```

调用`MyClass_connect`成功后，您可以使用`me.aField`缩短代码来访问代码中的字段。当然，您必须提供一个断开功能，当不再需要 MyClass 时调用该功能：

```
void MyClass_disconnect(JNIEnv *env)
{
    if (me.loaded == 0) return;

    env->DeleteGlobalRef(me.clazz);
    memset(me, 0, sizeof(tMyClass));
} 
```

Sorry for this a bit lengthy posting but I hope this helps to solve your confusion a bit and gives you a bit an insight of the inner workings of JNI together with a little receipe how to deal with this efficiently.

**Edit:** You can find documentation about JNI calls on [oracle's website](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/jniTOC.html)

# android - 有没有一种简单的方法可以将图像和文本嵌入到“视图”中，如图所示？

> ID：15003955
> 
> 赞同：1
> 
> 时间：2013-02-21T13:50:55.307
> 
> 标签：android, android-layout

我知道可以使用`WebView`html 页面，但是是否可以让这个 GUI 使用只有一个`TextView`和一个的 xml 布局`ImageView`？请注意，文本会根据图像大小**自动环绕图像。**

PS：我知道我可以使用两个`TextView`s 并使用某种算法拆分我的文本内容，并将我的文本内容的一部分设置为 upper `TextView`，另一部分设置为 lower `TextView`。

![在此处输入图像描述](../Images/46e6f2fe16009c7f2336b506e68bf674.png)

# php - 在 php 中创建文件时下载文件

> ID：15003963
> 
> 赞同：-1
> 
> 时间：2013-02-21T13:51:18.810
> 
> 标签：php, download

我在 php 中创建了一个文件，如下面的代码

```
 $my_file = WP_OPTIONS_REPLACE.'/my_options.sql';
    $handle = fopen($my_file, 'w') or die('Please give write permission to the folder.  '.$my_file); 
```

之后我在那个文件中写了一些包含。喜欢

```
 fwrite($handle, $sql); 
```

如何自动下载文件？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:56:56.327

您将需要执行以下操作：

```
header('Content-disposition: attachment; filename=document.pdf');
header('Content-type: application/pdf');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize('document.pdf'));
readfile('document.pdf'); 
```

首先我们输出标题告诉浏览器期待一个文件下载附件，以及文件类型等，然后我们将实际的文件数据输出到浏览器。

# c# - 如何从 invokescript() Webbrowser 取回结果

> ID：15003965
> 
> 赞同：0
> 
> 时间：2013-02-21T13:51:23.883
> 
> 标签：c#, visual-studio-2012

我正在尝试从网页中提取数据有很多索引 `this.webBrowser1.Document.InvokeScript("__doPostBack", new object[] { "ctl00$ContentPlaceHolder1$gvTickets", "Page$2" });` 这些代码正在工作并转到 webbrowser 中的第二页但是在调试时它不会返回到 documentcompleted 方法。我怎样才能在secodpage上获得responsetext

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T14:33:25.650

这是一个代码示例。此方法是从控制台应用程序调用的 - 因此如果您使用控制台应用程序，则线程执行并将 [STAThread] 属性添加到您的主方法。documentCompleted 将被递归调用，直到条件失败。

```
protected override void StartScan( string url )
    {
        WebBrowser browser = new WebBrowser();
        int i = 1;
        Thread thread = new Thread( () =>
        {
            WebBrowserDocumentCompletedEventHandler documentCompleted = null;
            documentCompleted = async ( o, s ) =>
            {

                if ( i < 27 )
                {

                    HtmlAgilityPack.HtmlDocument document = new HtmlAgilityPack.HtmlDocument();
                    document.LoadHtml(browser.DocumentText);
                    List<Establishment> establishments = GetEstablishments(document).ToList();
                    SaveResults(establishments);
                    string var = i < 10 ? "0" + i.ToString(CultureInfo.InvariantCulture) : i.ToString(CultureInfo.InvariantCulture);
                    browser.Navigate( string.Format( "javascript:__doPostBack('SchoolDirectoryWebPart1$ctl{0}','')", var ) );
                    i++;
                } else {
                    browser.Dispose();
                    Application.ExitThread();
                }
            };

            browser.ScriptErrorsSuppressed = true;
            browser.DocumentCompleted += documentCompleted;
        browser.Navigate( url );
            Application.Run();

        } );
        thread.SetApartmentState( ApartmentState.STA );
        thread.Start();
    } 
```

# mysql - MYSQL 中的 CONCAT 字符串和 INT 并将大 mysql 表导出到小 csv 文件

> ID：15003967
> 
> 赞同：0
> 
> 时间：2013-02-21T13:51:27.343
> 
> 标签：mysql, int, concat

我是 MYSQL 编程的新手。我想使用 MYSQL 循环脚本将一个非常大的表选择到几个 csv 文件中。我的脚本如下：

```
BEGIN
        SET @t_lines=0;
        SET @t_count=0;
        SET @t_filepath='/home/ab/path/table_name_02212013_';
        WHILE t_lines<=5000000
        SET @t_filename=CONCAT(@t_filepath,CAST(@t_count as CHAR));
        select * into outfile @t_filename fields terminated by ',' optionally enclosed by '"' lines terminated by '\n' from table_name limit @t_lines,@t_lines+300000;
        SET @t_lines= @t_lines+300000;
        SET @t_count= @t_count+1;
        END WHILE;
        COMMIT;
END 
```

我在一行中遇到语法错误：

> SET @t_filename=CONCAT(@t_filepath,CAST(@t_count as CHAR));

WHILE ... DO 导致的语法错误。感谢您的快速回复。在这里，“限制”之后，“@t_lines,@t_lines+300000”处仍然存在语法错误。我想通了，似乎“限制”不允许“@t_lines+300000”给出行范围。可以通过提供一个新变量来修复它：

```
 BEGIN
            DECLARE t_lines INT DEFAULT 0;
            DECLARE t_count INT DEFAULT 0;
            DECLARE t_endlines INT DEFAULT 300000;
            DECLARE t_linerange INT DEFAULT 300000;
            SET @t_filepath='/home/ab/path/table_name_02212013_';
            WHILE t_lines<=5000000 DO
            SET @t_filename=CONCAT(@t_filepath,CAST(@t_count as CHAR));
            select * into outfile '@t_filename' fields terminated by ',' optionally enclosed by '"' lines terminated by '\n' from table_name limit t_lines,t_endlines;
            SET t_lines= t_lines+t_linerange;
            SET t_endlines= t_endlines+t_linerange
            SET t_count= t_count+1;
            END WHILE;
            COMMIT;
    END 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:58:28.580

[MySQL 中循环](http://dev.mysql.com/doc/refman/5.0/en/while.html)的[语法`WHILE`](http://dev.mysql.com/doc/refman/5.0/en/while.html)需要一个`DO`;

```
WHILE t_lines<=5000000 DO
...
END WHILE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:13:03.400

的文件名参数`INTO OUTFILE` [必须是文字字符串](http://bugs.mysql.com/bug.php?id=13870)。您不能使用变量或表达式作为文件名。

的参数`LIMIT`必须是整数常量。您可以使用参数占位符 ( `?`)、存储过程参数或本地过程变量（您[声明](http://dev.mysql.com/doc/refman/5.5/en/declare.html)的那些）。但是您[不能使用会话变量](http://bugs.mysql.com/bug.php?id=8094)（带有`@`前缀的变量），[也不能使用表达式](http://bugs.mysql.com/bug.php?id=6673)。

您必须将查询创建为 SQL 字符串，并将值插入到字符串中。
然后将该 SQL 字符串与[`PREPARE`and`EXECUTE`](http://dev.mysql.com/doc/refman/5.5/en/sql-syntax-prepared-statements.html)一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:59:17.523

尝试 ：

```
convert(columnName, char) 
```

-->

```
BEGIN
        SET @t_lines=0;
        SET @t_count=0;
        SET @t_filepath='/home/ab/path/table_name_02212013_';
        WHILE t_lines<=5000000
        SET @t_filename=CONCAT(@t_filepath,convert(@t_count, CHAR));
        select * into outfile @t_filename fields terminated by ',' optionally enclosed by '"' lines terminated by '\n' from table_name limit @t_lines,@t_lines+300000;
        SET @t_lines= @t_lines+300000;
        SET @t_count= @t_count+1;
        END WHILE;
        COMMIT;
END 
```

# ruby-on-rails-3 - 使用 FactoryGirl 的未定义方法 after_create

> ID：15003968
> 
> 赞同：11
> 
> 时间：2013-02-21T13:51:28.340
> 
> 标签：ruby-on-rails-3, rspec, factory-bot

我正在尝试使用 after_create 回调在 FactoryGirl 中定义 has_many 关系，就像在 /spec/factories/emails.rb 中一样：

```
FactoryGirl.define do
    factory :email do
        after_create do |email|
            email.attachments << FactoryGirl.build(:attachment)
        end
    end
end 
```

附件在单独的工厂 /spec/factories/attachment.rb 中定义：

```
FactoryGirl.define do
    factory :attachment do
        # Attach the file to paperclip
        file { fixture_file_upload(Rails.root.join('spec', 'support', 'myimage.png'), 'image/png') }
    end
end 
```

在我的规范中使用 :attachment 工作得很好，所以我相信工厂不是问题所在，但是当我尝试从工厂创建一个 :email 时，我会抛出以下异常：

```
Failure/Error: email = FactoryGirl.create(:email)
    NoMethodError:
        undefined method `after_create=' for #<Email:0x007ff0943eb8e0> 
```

我对该怎么做有点茫然，似乎找不到其他人得到同样的错误。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-21T14:30:38.410

FactoryGirl[最近更改](http://robots.thoughtbot.com/post/23039827914/get-your-callbacks-on-with-factory-girl-3-3)了回调的语法。我认为以下将起作用：

```
FactoryGirl.define do
  factory :email do
    after(:create) do |email|
      email.attachments << FactoryGirl.build(:attachment)
    end
  end
end 
```

# haskell - 为什么所有 Haskell 类型类都有规律？

> ID：15003974
> 
> 赞同：19
> 
> 时间：2013-02-21T13:51:35.683
> 
> 标签：haskell, typeclass

[Typeclassopedia](http://www.haskell.org/haskellwiki/Typeclassopedia)中的所有类型类都有相关的规律，例如某些运算符的结合性或交换性。“法则”的定义似乎是一种无法在类型系统中表达的约束。我当然理解你为什么想要拥有 monad 法则，但是有一个根本原因为什么可以在类型系统中完全表达的类型类毫无意义吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-21T15:59:49.640

你会注意到几乎所有的定律都是代数定律。它们可以通过类型系统通过一些扩展来表达，但是证明表达起来会很麻烦。所以你有未经检查的法律，潜在的实施可能会破坏它们。为什么这样好？

原因是 Haskell 中使用的设计模式是由数学结构驱动的（并且在大多数情况下是镜像的），通常来自抽象代数。虽然大多数其他语言对某些特性（如安全性、性能和语义）都有直观的概念，但我们 Haskell 程序员更喜欢建立一个*正式*的概念。这样做的好处是：一旦你的类型和函数遵守安全法则，它们在底层代数结构的意义上是安全的。它们被*证明*是安全的。

以函子为例。Haskell 函子有以下两条定律：

```
fmap f . fmap g = fmap (f . g)
fmap id         = id 
```

首先这很重要：Haskell 中的函数是不透明的。你不能检查、比较或其他任何东西。虽然这在 Haskell 中听起来像是一件坏事，但实际上是一件非常好的事情。该`fmap`函数无法检查您传递给它的函数。特别是它无法检查您是否通过了身份功能或您是否通过了组合。简而言之：它不能作弊！它遵守这两条规律的唯一方法实际上是不引入任何自身的影响。这意味着，在一个适当的仿函数`fmap`中，永远*不会*做任何意想不到的事情。事实上，除了映射给定的函数之外，它不能做任何事情。这是一个非常简单的例子，我没有解释为什么`fmap`不能作弊的所有细节，但它证明了这一点。

现在将其扩展到整个语言、基础库和最明智的第三方库。这为您提供了一种语言可以预测的语言。当你编写代码时，你就知道它会做什么。这是 Haskell 代码经常开箱即用的主要原因之一。我经常在编译之前写几页 Haskell 代码。一旦我的类型错误得到修复，我的程序通常可以工作。

这样做的另一个原因是它允许一种更具组合性的编程风格。这在团队合作时特别有用。首先，您将应用程序映射到代数结构并建立必要的定律。例如：您表达了成为有效 Web 服务器的含义。特别是，您建立了 Web 服务器组合的正式概念。如果您组合两个 Valid Web Server，则结果是一个 Valid Web Server。你知道这是怎么回事吗？在制定了这些法律之后，队友们开始工作，他们孤立地工作。完成工作几乎不需要沟通。当他们再次见面时，每个人都会展示他们的有效 Web 服务器，然后他们只是将它们组合成最终产品，一个网站。由于各个组件都是有效的 Web 服务器，最终结果必须是有效的 Web 服务器。可以证明。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T14:18:13.410

是和不是。例如，`Show`该类没有任何与之相关的法律，它当然是有用的。

但是，类型类表示接口。一个接口需要满足的不仅仅是一堆函数——你希望这些函数满足一个*规范*。规范通常比用 Haskell 的类型系统表达的要复杂。例如，`Eq`上课。它只需要为我们提供一个函数，其类型必须是`a -> a -> Bool`. 这是 Haskell 的类型系统允许我们从一个`Eq`类型的实例中要求的最多的东西。但是，我们通常会期望从这个函数中得到更多——你可能希望它是一个等价关系（自反、对称和传递）。因此，您将这些要求声明为单独的“法律”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:13:03.657

类型类不需要有规律，但如果有规律，它通常会更有用。许多类型类都希望以某种方式发挥作用，这些法律规定了用户的期望。法律允许用户对类型类实例的工作方式做出假设。如果你违反了 typeclass 法律，你不会被 Haskell 警察逮捕，你只会让用户感到困惑。

# joomla - 如何在 Joomla 2.5 中添加类别

> ID：15003979
> 
> 赞同：2
> 
> 时间：2013-02-21T13:51:45.220
> 
> 标签：joomla, joomla2.5

有谁知道如何以编程方式将新内容类别正确插入数据库？对于 category 表中的每个帖子，在 assets 表中还保存了一个设置了 lft 和 rgt 的帖子。有没有可以用来代替普通 SQL 的本地 Joomla 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:39:50.890

请仅使用本地类，哪些类别将为您无缝处理。一旦您添加类别，整个事情就会自动处理。只要看看任何核心组件，看看如何。

使用 sql 更新 assets 表并不容易，它都是非常专门管理的，并且是一系列复杂的外键表的一部分。

扩展 JTable 或 JTableContent 来处理这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-13T12:03:19.923

这是我刚刚整理的一些代码，它们只使用了这个`JTableCategory`类，所以它可以简单地在 Joomla 的前端或管理端使用

```
$table = JTable::getInstance('category');

$data = array();
// name the category
$data['title'] = $title;
// set the parent category for the new category
$data['parent_id'] = $parent_id;
// set what extension the category is for
$data['extension'] = $extension;
// Set the category to be published by default
$data['published'] = 1;

// setLocation uses the parent_id and updates the nesting columns correctly
$table->setLocation($data['parent_id'], 'last-child');
// push our data into the table object
$table->bind($data);
// some data checks including setting the alias based on the name
if ($table->check()) {
    // and store it!
    $table->store();
    // Success
} else {
    // Error
} 
```

当然，您会希望正确设置数据片段，但这些是要设置的核心数据片段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-20T07:33:06.860

这是我为此目的创建的一个函数，经过一些挖掘和实验。

它使用核心类，因此需要访问它们（对我来说，它基本上是 Joomla 组件的一部分）。

请注意，对于 Joomla 3，对于 Joomla 2.5 及之前的版本，您需要将**JModelLegacy**更改为**JModel**。

```
function createCategory( $name, $parent_id, $note )
{
    JTable::addIncludePath( JPATH_ADMINISTRATOR . '/components/com_categories/tables' );

    $cat_model = JModelLegacy::getInstance( 'Category', 'CategoriesModel' );

    $data = array (
        'id' => 0,
        'parent_id' => $parent_id,
        'extension' => 'com_content',
        'title' => $name,
        'alias' => '',
        'note' => $note,
        'description' => '',
        'published' => '1',
        'access' => '1',
        'metadesc' => '',
        'metakey' => '',
        'created_user_id' => '0',
        'language' => '*',
        'rules' => array(
            'core.create' => array(),
            'core.delete' => array(),
            'core.edit' => array(),
            'core.edit.state' => array(),
            'core.edit.own' => array(),
        ),
        'params' => array(
            'category_layout' => '',
            'image' => '',
        ),
        'metadata' => array(
            'author' => '',
            'robots' => '',
        ),
    );

    if( !$cat_model->save( $data ) )
    {
        return NULL;
    }

    $categories = JCategories::getInstance( 'Content' );
    $subcategory = $categories->get( $cat_model->getState( "category.id" ) );
    return $subcategory;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:54:28.957

您也许可以使用 category.php 文件中的**save()**。

文件位置：`root\administrator\components\com_categories\models\category.php`

它保存提供给它的表单数据！

JOS_assets 表用于存储创建的每个资产的 ACL。

如果您在以编程方式创建类别时不更新此表，则将应用默认 ACL。当您稍后在管理面板中打开并保存类别时，ACL 将被更新，因为它应该由核心 Joomla! 更新。

不过，您可以非常轻松地创建 SQL 查询并更新资产表。一旦您在 phpmyadmin 中打开表格的内容，它就很容易理解。

# javascript - jquery tablesorter：addParser 没有正确排序

> ID：15003983
> 
> 赞同：1
> 
> 时间：2013-02-21T13:52:03.790
> 
> 标签：javascript, jquery, tablesorter

我创建了一个表并使用 tablesorter 对其进行排序。其中一列是字母和数字的组合（chr1、chr2、...、chr10、...、chrM）。我希望将此列排序为仅是数字（从 1 到 22，然后按此顺序排列 X、Y 和 M）。我创建了自己的解析器，它可以工作，但仅适用于某些行。然后，我找到另一个正确排序的行块，然后是其他一些块。我不知道为什么会形成这些块。

代码在[这里](http://invrppr.uab.cat/invdb/prova.php)。也许使用较小的桌子它会正常工作，因为我展示了一张大桌子。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:19:00.903

试试这个解析器（[演示](http://jsfiddle.net/eY8uH/377/)）

```
$.tablesorter.addParser({
    // set a unique id 
    id: 'chrom',
    is: function (s) {
        // return false so this parser is not auto detected 
        return false;
    },
    format: function (s) {
        // format your data for normalization 
        return s.toLowerCase()
            .replace('chr', '')
            .replace('x', '97')
            .replace('y', '98')
            .replace('m', '99');
    },
    // set type, either numeric or text 
    type: 'numeric'
}); 
```

# java - 如何拦截特定文件类型的请求？

> ID：15003984
> 
> 赞同：0
> 
> 时间：2013-02-21T13:52:03.830
> 
> 标签：java, spring, spring-mvc, spring-3

我们的应用程序是基于 Java/Spring3/Spring MVC/Hibernate 的应用程序。

我们有一些资源存储在服务器机器上的不同位置。位置存储在数据库中。基本上，当 Web 应用程序从 uri 请求文件`/<our-app>/page/file.kml`时，例如需要拦截此调用时，忽略请求的 uri，查找文件的实际位置并将其作为响应返回。

我们`servlet-context.xml`有一些拦截器；

```
<interceptors>
    <interceptor>
        <mapping path="/page/**" />
        <beans:bean class="com.ourapp.AuthenticationInterceptor" />
    </interceptor>
    <interceptor>
        <mapping path="/page/*.kml" />
        <beans:bean class="com.ourapp.KmlInterceptor" />
    </interceptor>
</interceptors> 
```

第一个拦截用于我们的身份验证，效果很好。基本上确保用户登录任何请求。

第二个拦截器是我们设置的，用于尝试拦截来自 geoXML3 的 KML 文件请求。拦截器似乎没有开火？（即 KmlInterceptor.preHandle 没有被调用？）。

我们在那里做正确的映射吗？

这是拦截特定文件类型的请求并返回从其他地方检索到的实际文件的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:34:45.873

实际上，我们不再尝试使用拦截器，而是使用了普通`@RequestMapping`注解；

```
@RequestMapping(value = "/page/location/*.kml", method = RequestMethod.GET)
public void getKMLFile(HttpServletRequest httpRequest, HttpServletResponse httpResponse) {
    try {
        // Getting the filename (ie splitting off the /page/location/ part)
        String uri = httpRequest.getRequestURI();
        String[] parts = uri.split("/");
        String alais = parts[parts.length - 1];

        // Our app specific code finding the file from the db location 
        Resource resource = resourceService.getResourceByAlias(alais);
        File file = resource.getAbsFile();

        // Putting the file onto the httpResponse 
        InputStream is = new FileInputStream(file);
        IOUtils.copy(is, httpResponse.getOutputStream());
        httpResponse.flushBuffer();

    } catch (IOException e) {
        throw new RuntimeException("IOError writing file to output stream");
    }
} 
```

# javascript - 使用javascript在其父母附近弹出显示

> ID：15003985
> 
> 赞同：1
> 
> 时间：2013-02-21T13:52:08.367
> 
> 标签：javascript, jquery, popup, position

我的网页中有一些图像，当用户将鼠标悬停在每个图像附近时，我想显示一个弹出窗口，当用户将鼠标移动到其他地方时，弹出窗口消失

我在很多网站上都看到了这个功能，但我不知道该怎么做我看到了 jquery UI，但对话框与我的目标不匹配

你有什么主意吗

我刚刚测试过，但没有结果：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>title</title>

<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script>
  $("#hover1").mouseenter(function() {
   $("#content").fadeIn('fast');
});

$("#hover1").mouseleave(function() {
    $("#content").fadeOut('slow');
});
  </script>
</head>
<body>

    <p id="hover1">
   Hover here!
</p>
    <div id="content" style="display:none">
   Content here!
</div>

</body>
</html> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:57:08.710

您需要使用`jQuery` `mouseenter`和`mouseleave`功能：

```
<p id="hover1">
   Hover here!
</p>

<div id="content" style="display:none">
   Content here!
</div>

$("#hover1").mouseenter(function() {
   $("#content").fadeIn('fast');
});

$("#hover1").mouseleave(function() {
    $("#content").fadeOut('slow');
}); 
```

[http://jsfiddle.net/SzgqR/](http://jsfiddle.net/SzgqR/)

**文档**

[http://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)

[http://api.jquery.com/mouseleave/](http://api.jquery.com/mouseleave/)

**编辑**

请记住包含`jQuery`在您的页面中。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:55:20.427

用相对容器包装图像并放入绝对容器（弹出窗口）中，仅显示他（显示：块；来自显示：无；）然后包装容器悬停。不要忘记为弹出窗口设置 z-index。

# windows-store-apps - Windows_UI_Xaml!DirectUI::Application::OnLaunchedProtected 中的未知异常

> ID：15003987
> 
> 赞同：2
> 
> 时间：2013-02-21T13:52:15.633
> 
> 标签：windows-store-apps

商店认证测试报告我的应用程序在启动时崩溃。到目前为止，我无法在我的台式电脑或 Surface RT 上重现该错误。该应用程序确实实现了搜索合同。请在[此处查看小型转储](https://skydrive.live.com/redir?resid=F3D91D8E2EEF858A!4485&authkey=!AIy8OJaaHEzZ8so)。

**更新：我附上[了源代码的链接](https://skydrive.live.com/redir?resid=F3D91D8E2EEF858A!4498&authkey=!AP7OcsmHUDP42JE)，请去看看你是否可以重现错误或发现任何明显的错误！**

> Microsoft Corporation 的 Windows.UI.Xaml.dll 中的 Windows_UI_Xaml!DirectUI::ErrorHelper::ProcessUnhandledErrorForUserCode+7a 处的指令导致未知异常 (0xc000027b)

```
combase!RoFailFastWithErrorContextInternal+112     aaaaaaaa     aaaaaaaa     aaaaaaaa     0056516c   d:\win8_gdr\com\combase\winrt\error\error.cpp @ 853 
Windows_UI_Xaml!DirectUI::ErrorHelper::ProcessUnhandledErrorForUserCode+7a     aaaaaaaa     005b3bdc     00000000     aaaaaaaa    
Windows_UI_Xaml!DirectUI::Application::OnLaunchedProtected+7b     050726ac     aaaaaaaa     0079d280     00000000    
Windows_UI_Xaml!DirectUI::FrameworkView::OnActivated+b3     00798b40     00000000     04b1ee80     6e8f2f42    
Windows_UI_Xaml!`Microsoft::WRL::Callback<Windows::Foundation::IAsyncOperationCompletedHandler<Windows::UI::Xaml::Data::LoadMoreItemsResult>,DirectUI::ListViewBase,Windows::Foundation::IAsyncOperation<Windows::UI::Xaml::Data::LoadMoreItemsResult> *,enum ABI::Windows::Foundation::AsyncStatus>'::`2'::ComObject::Invoke+19     050b45d8     00798b40     005b3bdc     00798b48    
twinapi!Microsoft::WRL::EventSource<Windows::Foundation::ITypedEventHandler<Windows::ApplicationModel::Search::SearchPane *,Windows::ApplicationModel::Search::SearchPaneQueryChangedEventArgs *> >::DoInvoke<`Microsoft::WRL::EventSource<Windows::Foundation::ITypedEventHandler<Windows::ApplicationModel::Search::SearchPane *,Windows::ApplicationModel::Search::SearchPaneQueryChangedEventArgs *> >::InvokeAll<CSearchPaneClient *,CSearchPaneQueryChangedEventArgs *>'::`3'::<lambda_AB69E19221CB48D5> >+48     aaaaaaaa     00798b40     005b3bdc     04b1f0c4   d:\win8_gdr.public.x86fre\sdk\inc\wrl\event.h @ 928 + e 
twinapi!Windows::ApplicationModel::Core::CoreApplicationView::Activate+ab     0079e370     00000000     005b3bdc     aaaaaaaa   d:\win8_gdr\shell\coreapplication\application\lib\coreapplicationview.cpp @ 874 
rpcrt4!Invoke+2a     6e8dbd11     04b1f0c8     aaaaaaaa     aaaaaaaa    
rpcrt4!NdrStubCall2+33b     050cf998     050d3e80     aaaaaaaa     04b1f310    
combase!CStdStubBuffer_Invoke+c1     050cf998     aaaaaaaa     050d3e80     aaaaaaaa   d:\win8_gdr\com\combase\ndr\ndrole\stub.cxx @ 1507 + 75caf44b 
combase!SyncStubInvoke+d0     aaaaaaaa     aaaaaaaa     00580678     6e8d4430   d:\win8_gdr\com\combase\dcomrem\channelb.cxx @ 1263 + d 
combase!CCtxComChnl::ContextInvoke+213     04b1f4dc     75c2189c     050d3e80     aaaaaaaa   d:\win8_gdr\com\combase\dcomrem\ctxchnl.cxx @ 1344 + 96 
KERNELBASE!WaitForMultipleObjectsEx+10b     00000000     00000000     00000010     aaaaaaaa    
user32!RealMsgWaitForMultipleObjectsEx+16b     0058e760     00000000     0058e760     0058e768    
combase!ComInvoke+171     04b1f878     00000000     04b1f840     75c1eb0d   d:\win8_gdr\com\combase\dcomrem\channelb.cxx @ 1575 
combase!CComApartment::ASTAHandleMessage+2c     aaaaaaaa     007976f0     04b1f904     aaaaaaaa   d:\win8_gdr\com\combase\dcomrem\applicationsta.cpp @ 2301 
combase!ASTAWaitContext::Wait+39b     04b1f878     aaaaaaaa     007976f0     aaaaaaaa   d:\win8_gdr\com\combase\dcomrem\applicationsta.cpp @ 850 
combase!ASTAWaitInNewContext+78     aaaaaaaa     aaaaaaaa     00000000     75c0d900   d:\win8_gdr\com\combase\dcomrem\applicationsta.cpp @ 2547 + 14 
combase!ASTAThreadWaitForHandles+4a     00000000     aaaaaaaa     00000000     007976f0   d:\win8_gdr\com\combase\dcomrem\applicationsta.cpp @ 2773 + 36 
combase!CoWaitForMultipleHandles+a4     00000008     aaaaaaaa     aaaaaaaa     007976f0   d:\win8_gdr\com\combase\dcomrem\sync.cxx @ 120 + 65 
twinapi!`Windows::ApplicationModel::Core::CoreApplicationViewAgileContainer::RuntimeClassInitialize'::`55'::<lambda_A2234BA2CCD64E2C>::operator()+39     00000000     04b1f9c8     750d5a10     007976d0   d:\win8_gdr\shell\coreapplication\application\lib\coreapplicationview.cpp @ 552 
twinapi!`Windows::ApplicationModel::Core::CoreApplicationViewAgileContainer::RuntimeClassInitialize'::`55'::<lambda_A2234BA2CCD64E2C>::<helper_func>+e     007976d0     00000000     00000000     001beeb4   d:\win8_gdr\shell\coreapplication\application\lib\coreapplicationview.cpp @ 613 + e 
SHCore!SHWaitForThreadWithWakeMask+13b     aaaaaaaa     04b1fa18     77c8ac69     001beeb4    
kernel32!BaseThreadInitThunk+e     001beeb4     aaaaaaaa     00000000     00000000    
ntdll!__RtlUserThreadStart+72     750d5931     001beeb4     aaaaaaaa     77d01d8e    
ntdll!_RtlUserThreadStart+1b 

Image Name: Windows.UI.Xaml.dll   Symbol Type:  PDB 
Base address: 0x00905a4d   Time Stamp:  Thu Sep 20 06:25:43 2012  
Checksum: 0x00000000   Comments:   
COM DLL: False   Company Name:  Microsoft Corporation 
ISAPIExtension: False   File Description:  Windows.UI.Xaml dll 
ISAPIFilter: False   File Version:  6.2.9200.16420 (win8_gdr.120919-1813) 
Managed DLL: False   Internal Name:  Windows.UI.Xaml.dll 
VB DLL: False   Legal Copyright:  © Microsoft Corporation. All rights reserved. 
Loaded Image Name:  Windows.UI.Xaml.dll   Legal Trademarks:   
Mapped Image Name:  c:\symcache\Windows.UI.Xaml.dll\505A9AC7a54000\Windows.UI.Xaml.dll   Original filename:  Windows.UI.Xaml.dll 
Module name:  Windows_UI_Xaml   Private Build:   
Single Threaded:  False   Product Name:  Microsoft® Windows® Operating System 
Module Size:  10,33 MBytes   Product Version:  6.2.9200.16420 
Symbol File Name:  c:\symcache\windows.ui.xaml.pdb\F3AFE9A212494DCAB4068DD4A4A781232\windows.ui.xaml.pdb   Special Build:  & 
```

**编辑：通过在应用程序验证器中启用 LuaPriv，我能够使应用程序在本地崩溃。如果我禁用它，它不会崩溃。我不确定这是否是相同的崩溃，因为我遇到了 AppVerif 无法写入日志的问题。有什么帮助吗？认证测试人员是否使用 LuaPriv 运行？我想弄清楚如何在我的应用程序上运行标准用户分析器，任何提示如何做到这一点？我的应用确实使用我在某处找到的 IsolatedStorageHelper 的实现写入 ApplicationData.Current.RoamingSettings。这是一个问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-10T17:52:11.797

我的应用在下一次提交时获得了认证。我发现使用 x:Uid 指令的 en-US 标签缺少字符串资源。通过在我的计算机上更改为这种语言，我确实得到了一个调用堆栈，使我能够找到丢失的字符串。太糟糕了，我没有保存调用堆栈，所以我可以发布它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T15:38:00.177

我在以前版本的应用程序中遇到了同样的问题，这是运行时的一些错误，目前已解决，

以下是解决方法的详细信息：

[http://answers.flyppdevportal.com/categories/metro/csharpvb.aspx?ID=0dcffd79-3848-4cc3-839d-ab7d3544f80a](http://answers.flyppdevportal.com/categories/metro/csharpvb.aspx?ID=0dcffd79-3848-4cc3-839d-ab7d3544f80a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-10T14:00:50.473

我的应用程序运行良好后出现了这个问题。然后每次我运行应用程序时都会突然发生这个异常。我发现如果我进入“Metro”并卸载该应用程序，再次运行它，问题就解决了。这显然是 WinRT 中的一个错误，一旦发生它就会卡住，只有卸载/重新安装才能修复它。

我的经验是在我的开发机器上，所以我不知道这是否会在生产环境中修复它，但它应该。希望这对某人有帮助！

更新：过了一会儿我还是得到了这个，并尝试重新安装 Win8/VS'13，它也出现在那里。毕竟这显然是 WinRT 中的一个错误......现在如果我只能找到解决方法......

# php - PHP用河豚和盐和胡椒存储密码

> ID：15003988
> 
> 赞同：1
> 
> 时间：2013-02-21T13:52:17.570
> 
> 标签：php, hash, salt, blowfish, crypt

我想用 PHP 将安全用户密码存储在 MySQL 数据库中。

我怎样才能让它变得更好？

我的课：

```
private static $algo = '$2a';
private static $cost = '$10';
private static $pepper = 'eMI8MHpEByw/M4c9o7sN3d';

public static function generateSalt($length) {
    $randomBinaryString = mcrypt_create_iv($length, MCRYPT_DEV_URANDOM);
    $randomEncodedString = str_replace('+', '.', base64_encode($randomBinaryString));
    return substr($randomEncodedString, 0, $length);
}

public static function generateHash($password) {
    if (!defined('CRYPT_BLOWFISH'))
        die('The CRYPT_BLOWFISH algorithm is required (PHP 5.3).');
    $password = hash_hmac('sha256', $password, self::$pepper, false);
    return crypt($password, self::$algo . self::$cost . '$' . self::generateSalt(22));
}

public static function checkPassword($hash, $password) {
    $salt = substr($hash, 0, 29);
    $password = hash_hmac('sha256', $password, self::$pepper, false);
    $new_hash = crypt($password, $salt);
    return ($hash == $new_hash);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:00:39.143

要么使用[这个](https://stackoverflow.com/a/14274045/575765)答案的建议（对于 PHP >= 5.5），要么使用下面的类。感谢[martinstoeckli](https://stackoverflow.com/users/575765/martinstoeckli)指出`password_hash`功能。我阅读了代码，唯一不同的是`password_hash`，我可以看到操作系统的错误检查和`DEV_URANDOM`使用以生成更随机的盐。

```
class PassHash {
    public static function rand_str($length) {
        $chars = "0123456789./qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM";
        //only allowed chars in the blowfish salt.
        $size = strlen($chars);
        $str = "";
        for ($i = 0; $i < $length; $i++)
            $str .= $chars[rand(0, $size - 1)]; // hello zend and C.
        return $str;
    }
    public static function hash($input) {
        return crypt($input, "$2y$13$" . self::rand_str(22));
        // 2y is an exploit fix, and an improvement over 2a. Only available in 5.4.0+
    }
    public static function hash_weak($input) {
        return crypt($input, "$2a$13$" . self::rand_str(22)); }
        // legacy support, Add exception handling and fall back to <= 5.3.0
    public static function compare($input, $hash) {
        return (crypt($input, $hash) === $hash);
    }
} 
```

这是我一直用的。一个建议也是[PHPass](http://www.openwall.com/phpass/)。它已经过试验和测试。

* * *

此脚本中唯一的缺点是我从 生成随机数`rand()`，而不是从操作系统的源生成随机数，但这很容易改变。

此外，没有真正的理由`SHA256`在 bcrypt 之上使用散列。`SHA256`很弱，可以用相对较小的努力³打破。

此外，散列密码是必不可少的做法，但为了真正的安全性，**至少通过[John the Ripper](http://www.openwall.com/john/)的[单词表](http://www.openwall.com/wordlists/)¹**运行所有输入以删除最常见的密码并通知用户使用不同的密码。由于密码非常弱，单词列表的使用比任何暴力破解都有效得多。

* * *

最后一点，***不要强迫你的用户使用符号、大写和数字，强迫他们使用长密码***²。

当涉及到暴力破解密码时，长度就是一切（没有幽默感）。除非编辑配置，否则几乎所有预设破解程序都将设置为不超过 12 个字符。如果您曾经看到一个网站的密码具有“最大长度”，请确保永远不要在那里重复使用密码，因为它们没有任何安全性⁴。

* * *

^(1.饼干的任意选择；选择你认为最有效的方法
2\. [http://xkcd.com/936/](http://xkcd.com/936/)
3\. 相对而言（它快几个数量级，并且在技术上通过默默无闻来保证安全）
4\. 我什至见过银行这样做。他们的密码有最大长度让我换了银行。)

# c# - LookUpEdit 中没有 DisplayMemberChanged

> ID：15003991
> 
> 赞同：2
> 
> 时间：2013-02-21T13:52:21.720
> 
> 标签：c#, winforms, devexpress

似乎没有显示成员更改的事件`LookUpEdit`。

如果弹出详细信息有两个具有相同`ValueMember`值但具有不同`DisplayMember`值的选项，即使您选择不同的显示值，您也无法在组合框中看到更新，`ValueMember`因为两个键的值相同。这导致`EditValueChanged`事件被触发。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:29:04.183

从[DevExpress 文档](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsRepositoryRepositoryItemLookUpEditBase_ValueMembertopic)：

> ValueMember 是您在设置查找编辑器时需要分配的关键属性。

如果您通过指定非唯一值来违反此约束，则始终返回第一行（我不相信该行为已记录在案，因此我希望它将来可能会改变）。要解决此问题，请将唯一键指定为`lookUpEdit1.Properties.ValueMember`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:42:37.973

deveexpress 中的 LookUpEdit 有两个属性 ValueMember 和 DisplayMember

分配要在 LookUpEdit 中显示的值和要保存（在数据库中）的值，将其分配给 ValueMember

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:17:52.973

至于[DevExpress 网站](http://www.devexpress.com/Support/Center/p/CQ57857.aspx)上的许多帖子，LookUpEdit 没有 SelectedIndexChanged 事件。您有 2 个可行的选择：

1.  将 GridLookUpEdit 与 FocusedRowChanged 事件结合使用
2.  查看您的代码： EditValue 应该是唯一的。有什么方法可以管理您的场景服务器端为每个 LookUp 行发送不同的 EditValues？

# javascript - 从头开始构建 jQuery 幻灯片

> ID：15003994
> 
> 赞同：3
> 
> 时间：2013-02-21T13:52:27.773
> 
> 标签：javascript, jquery

我正在尝试从头开始构建一个自动播放的幻灯片，既适用于我正在开发的网站，也适用于学习练习。因此，我想自己学习如何做，而不是求助于使用插件或许多优秀的免费幻灯片之一。这是我到目前为止所得到的：http: [//jsfiddle.net/mandrill/zTdxs/15/](http://jsfiddle.net/mandrill/zTdxs/15/)

继承人的JS：

```
$("#s1").css("display", "block"); // displays slide one as default on page load
$("#slideshow").click(function () {
    $(".slide").each(function (index) {
        var n = index + 1;
        $("#s" + n).toggle("fade");
        return index;
    });
}); 
```

它目前只是在第一张幻灯片和所有其他幻灯片之间切换。如何让它在连续循环中按顺序循环播放幻灯片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:26:55.273

与任何一段代码一样，如果您不确定如何去做（但正在寻找学习经验），那么没有比查看已经编写的真实实时代码更好的学习方法了。获取您找到并阅读代码的一些幻灯片的（未缩小的）版本。

我最喜欢的幻灯片插件是`cycle`一个 - 有一个带有相当可读代码的轻量级版本：http: [//malsup.github.com/jquery.cycle.lite.js](http://malsup.github.com/jquery.cycle.lite.js)

要为您的特定问题提供更具体的答案，您可以将索引重新设置为开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:36:09.133

我想出了怎么做。我对循环缺乏了解是我的失败。.each() 函数不是必需的。这是工作的JS：

```
$("#s1").css("display","block").addClass("active");
$("#slideshow").click(function(){
    var currentSlide =  $(".active").attr("id"); 
    if ($("#slideshow .slide:last").hasClass("active")) {
        $(".active").toggle("fade").removeClass("active");
        $("#slideshow .slide:first").toggle("fade").addClass("active");
    } else {
        $(".active").toggle("fade").removeClass("active");
        $("#"+currentSlide).next(".slide").toggle("fade").addClass("active");
    }
}); 
```

它可以在这里看到：http: [//jsfiddle.net/mandrill/wLTns/6/](http://jsfiddle.net/mandrill/wLTns/6/)

感谢大家的意见:) 下一步：让它自动播放并添加一个计时器......

# github - 使用 Stylecop SDK 以编程方式检查 github diff

> ID：15003995
> 
> 赞同：0
> 
> 时间：2013-02-21T13:52:28.307
> 
> 标签：github, stylecop, github-api

我正在尝试创建一个实用程序，该实用程序将使用 stylecop 规则对 github 上的代码进行自动代码审查。现在 stylecop SDK 仅适用于整个文件 - 所以要审查提交，我需要下载文件并在其上运行 stylecop。对于每一个（甚至是次要的）提交 - 我需要做同样的事情。

所以我只是想知道是否有办法让 stylecop 与当前提交的差异一起工作？这将允许我确保我只审查当前提交和当前作者的更改。