# StackOverflow 问答 15640000-15640999

# matlab - 圆形图像的轮廓 - 更有效的方法？

> ID：15640002
> 
> 赞同：0
> 
> 时间：2013-03-26T14:46:48.873
> 
> 标签：matlab, image-processing, signal-processing

我需要获得圆形图像的一维轮廓，例如 256x256 sin(R) 图像 ![256x256 sin(R) 图像](../Images/5e1cb7ecc2c5f97d6b1c5856e2f3bcae.png)

我已经为该任务编写了一个 matlab 函数，但结果证明效率很低。该函数对原始图像的半径间隔进行平均。

**matlab 分析器显示 for 循环 [indxs=find(...)] 中的第一行占用了约 86% 的运行时间。**

我需要在数千个模拟图像（一些大于 256x256）上运行该功能，并且需要很长时间才能完成。

有谁知道我怎样才能让这段代码运行得更快？也许有人有另一种更有效的方式来完成任务？

我还尝试使用 matlab 编码器将函数转换为 C++ 和 mex 文件，但执行任务需要更长的时间（x3），可能是因为子函数“findC”使用一些 2D-ffts 来查找图像的中心.

谢谢大家，杜达斯

我的 Matlab 函数：

```
function [sig R_axis Center]= Im2Polar (imR,ch,Center_Nblock)
% Converts Circular image to 1-D sig
% based on true image values w/o interpolation

% Input -
% imR - circular sinuns image
% ch - number of data-points in output signal (sig)
% Center_Nblock - a varible related to the image center finding method

% Output -
% sig - 1D vector of the circular image profile
% R_axis - axis data-points for sig
% Center - image center in pixels

[Mr Nr] = size(imR); % size of rectangular image
[Center]=findC(imR,Center_Nblock);
Xc=Center(1);
Yc=Center(2);

rMax=sqrt((Mr/2)^2 + (Nr/2)^2);

x=[0:1:Mr-1]-Xc+1;
y=[0:1:Nr-1]-Yc+1;

[X,Y]=meshgrid(x,y);
[TH,R] = cart2pol(X,Y);

% Assembling 1-D signal
sig=single([]);
ii=1;
dr=floor(rMax)/ch;
V=dr:dr:floor(rMax);

for v=V
    indxs=find((v-dr)<=R & R<v);**
    sig(ii)=mean(imR(indxs));
    Nvals(ii)=length(indxs);

    ii=ii+1;
end %for v

R_axis=V-dr/2;

end % of function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:56:55.003

下面的评论是我可能会尝试的一个例子。让我们使用一个 9x9 示例。假设您有以下环。

```
A =

 0     0     0     0     0     0     0     0     0
 0     0     1     1     1     1     1     0     0
 0     1     1     1     0     1     1     1     0
 0     1     1     0     0     0     1     1     0
 0     1     0     0     0     0     0     1     0
 0     1     1     0     0     0     1     1     0
 0     1     1     1     0     1     1     1     0
 0     0     1     1     1     1     1     0     0
 0     0     0     0     0     0     0     0     0 
```

然后你的面具的索引是，让我们说 [kn]

```
 >> [k n]

 ans =

 3     2
 4     2
 5     2
 6     2
 7     2
 2     3
 3     3
 4     3
 6     3
 7     3
 8     3
 2     4
 3     4
 7     4
 8     4
 2     5
 8     5
 2     6
 3     6
 7     6
 8     6
 2     7
 3     7
 4     7
 6     7
 7     7
 8     7
 3     8
 4     8
 5     8
 6     8
 7     8 
```

现在手头有一个名为 B 的 9x9 零矩阵，我们可以使用公式 (i+9*(j-1)) 将整个事物向左移动一个像素，如下所示，将双索引转换为单索引。

```
 >> B=zeros(9,9);
 >> B((k)+9*(n-2))=1

 B =

 0     0     0     0     0     0     0     0     0
 0     1     1     1     1     1     0     0     0
 1     1     1     0     1     1     1     0     0
 1     1     0     0     0     1     1     0     0
 1     0     0     0     0     0     1     0     0
 1     1     0     0     0     1     1     0     0
 1     1     1     0     1     1     1     0     0
 0     1     1     1     1     1     0     0     0
 0     0     0     0     0     0     0     0     0 
```

或按如下方式向下和向右移动

```
 >> B=zeros(9,9);
 >> B((k+1)+9*(n-0))=1

 B =

 0     0     0     0     0     0     0     0     0
 0     0     0     0     0     0     0     0     0
 0     0     0     1     1     1     1     1     0
 0     0     1     1     1     0     1     1     1
 0     0     1     1     0     0     0     1     1
 0     0     1     0     0     0     0     0     1
 0     0     1     1     0     0     0     1     1
 0     0     1     1     1     0     1     1     1
 0     0     0     1     1     1     1     1     0 
```

只要它不超出范围，您应该能够通过简单的添加来移动单个环形蒙版，以将中心放在图像中心。

# python - 如何使用 Python 从 ftp 文件夹中检索最新文件？

> ID：15640003
> 
> 赞同：0
> 
> 时间：2013-03-26T14:46:50.007
> 
> 标签：python, file, ftp

在我的公司，我们有一个秤，可以在将箱子装入卡车之前检查它们的重量。如果盒子包含的产品多于或少于可接受的产品，则该盒子将被拒绝并传送到另一条传送带。电子秤记录操作的执行情况。文件存储在秤的磁盘中，并使用 ftp 从附近的台式计算机访问。我的老板希望报告自动通过电子邮件发送到他的帐户，这样他就不需要去那个设施检查前一天的拒绝情况。我开始用 Python 编写一个程序来做到这一点，但被困在从文件夹中检索文件的部分。这是我的代码：

```
#This program tries to retrieve the latest report and send it by email.
import urllib
import shutil
import ftplib
import os
import sys
import glob
import time
import datetime
import smtplib
import email

#Define the server and folder where the reports are stored.
carpetaftp = "/reports/"

#This function looks for the last file in the folder.
def obtenerultimoarchivo(camino):
    for cur_path, dirnames, filenames in os.walk(camino):
        for filename in filenames:
            datos_archivo = os.stat(filename)
            tiempo_archivo = datos_archivo.st_mtime

#Connects to an ftp folder and downloads the last report.
def descargareporteftp(carpetaftp):
    ftp = ftplib.FTP("server.scale.com")
    ftp.login()
    ftp.cwd(carpetaftp)
    #Uses 'ultimoreporte.pdf' as a copy of the last report.
    archivo = open('C:\\Balanza\\Reportes\\ultimoreporte.pdf',"wb")
    ftp.retrbinary("RETR " + obtenerultimoarchivo(),archivo.write)
    archivo.close()
    return archivo

#The function enviaemail() sends an email with an attachment.
def enviaemail(destinatario, adjunto):
    remitente = "electronic_scale@email.com.uy"
    msg = email.MIMEMultipart()
    msg['From'] = remitente
    msg['To'] = destinatario
    msg['Subject'] = "Ultimo informe de la balanza."
    adjunto = open('C:\\Balanza\\Reportes\\ultimoreporte.pdf', 'rb')
    attach = email.MIMENonMultipart('application', 'pdf')
    payload = base64.b64encode(adjunto.read()).decode('ascii')
    attach.set_payload(payload)
    attach['Content-Transfer-Encoding'] = 'base64'
    adjunto.close()
    attach.add_header('Content-Disposition', 'attachment', filename = 'ultimoreporte.pdf')
    msg.attach(attach)
    server = smtplib.SMTP('smtp.email.com.uy')
    server.login('electronic_scale@email.com.uy', 'thermofischer')
    server.sendmail('electronic_scale@email.com.uy',destinatario, msg.as_string())
    server.quit()

#The main routine, to retrieve the last report and send it by email.
adjunto = descargareporteftp(carpetaftp)
print("Reporte descargado")
enviaemail('myemail@email.com.uy',reporte)
print("Reporte enviado") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-14T06:56:27.237

这是我通过犯错误发现的一种肮脏方式：

如果在 urllib 检索命令中没有指定文件，它将返回目录中的文件列表（如 ls 命令中）。

因此，使用它，代码执行以下操作：

1.  检索 FTP 文件夹中的文件列表并将文件保存到本地
2.  读取文件并找到列表中的最后一个条目
3.  从 FTP 文件夹中检索最后一个文件

    ```
    import urllib

    def retrieve(address,output):
       # Run the ftp retrieve command here
       urllib.urlretrieve(address, output)
       # Flush the urllib so that we can download a second file
       urllib.urlcleanup()

    def main():
       #let's build the ftp address here:
       usr = "usrname"
       psswrd = "password"
       host = "host.com"
       path = "/foo/bar/"
       list_file = "list"
       address = 'ftp://%s:%s@%s%s' % (usr,psswrd,host,path)
       print "Getting file listing from: " + address

       # Retrieve the list
       retrieve(address,list_file)

       # read a text file as a list of lines
       # find the last line, change to a file you have
       list_file_reader = open ( 'list',"r" )
       lineList = list_file_reader.readlines()
       last_file = lineList[-1].split(' ')[-1:][0].rstrip()

       output = "wanted_file.dat"
       address = 'ftp://%s:%s@%s%s%s' % (usr,psswrd,host,path,last_file)

       # Retrieve the file you are actually looking for
       retrieve(address, output)

       print address

    main() 
    ```

这当然不是最有效的方法，但它适用于我的场景。

参考：

[Python：通过 FTP 服务器下载文件](https://stackoverflow.com/questions/11768214/python-download-a-file-over-an-ftp-server)

[https://www.daniweb.com/programming/software-development/threads/24544/how-do-i-read-the-last-line-of-a-text-file](https://www.daniweb.com/programming/software-development/threads/24544/how-do-i-read-the-last-line-of-a-text-file)

[从 ftp 下载第二个文件失败](https://stackoverflow.com/questions/44733710/downloading-second-file-from-ftp-fails)

# facebook - 如何关闭 facebook api 上过期的会话访问令牌？

> ID：15640005
> 
> 赞同：1
> 
> 时间：2013-03-26T14:46:59.343
> 
> 标签：facebook, access-token

我去[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)在 facebook 中获取我的照片，我使用以下代码：

```
$json = file_get_contents('https://graph.facebook.com/me?access_token=AAAGRD7DAWfgBAEhuOpVW9OhUg8JVvylV5uA9dB7VCWP5IFfTUg6ktBZCPpsmdf3hBJtxbOsdWFzrCEwFZCMUSdKTCGBZBPdZCIuzbfoOyqW8PC8R6cZCB&fields=photos.limit(14).fields(name,source,picture,link)'); 
```

获取json，但它总是在2小时内过期。

有没有办法设置访问令牌永不过期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:33:25.613

无法获得不会过期的用户令牌。Facebook 有意这样做，以便忘记安装的用户自动将其从访问权限中删除。

您最多可以将其延长至两个月。

请参阅：[https ://developers.facebook.com/docs/howtos/login/extending-tokens/](https://developers.facebook.com/docs/howtos/login/extending-tokens/)

# php - Ajax Post到php将父目录设置为子目录

> ID：15640006
> 
> 赞同：0
> 
> 时间：2013-03-26T14:46:59.867
> 
> 标签：php, ajax, jquery

我正在使用 ajax 将数据发布到 php 文件并且代码工作正常

```
 $.ajax({
            type: 'POST',
            url: '/ajax/delete.php', 
            data: 'do=add', 
            success: function(responseText) {
            alert(responseText);

                alert('done');

                }
            }); 
```

该文件位于名为“ajax”的文件夹中，如 /ajax/index.php

php文件是

```
 <?php 
require_once('/check_fields.php');
           // more processing
      ?> 
```

位于/www/

ajax 没有运行，我启用了错误报告，它说

```
 'No file such as /ajax/check_fields.php' 
```

ajax 将父目录设置为我访问 . 因为在“ajax”文件夹中被设置为默认目录而不是 /www/

我知道我可以使用 ./../check_fields.php 来解决这个问题，但是如果我包含了很多 php 文件，那么上面的任务就很乏味了。

任何帮助解决这个问题将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:54:23.820

我可能会创建一个配置文件，该文件会加载到任何定义绝对路径的 php 文件中。

```
<?
//constants
  define( 'ROOT_PATH', '/www/ );
?> 
```

然后在你的文件中：

```
<?php 
  require_once(ROOT_PATH . '/check_fields.php');
  // more processing
?> 
```

# ipad - 触摸“拍照或录像”时，iPad 会强制使用纵向模式

> ID：15640007
> 
> 赞同：1
> 
> 时间：2013-03-26T14:47:03.503
> 
> 标签：ipad, file, upload, camera, photo

我已经在横向模式下构建了一个 HTML5 iPad 网络应用程序，现在我需要让用户通过拍摄图像或从相机胶卷中选择一个图像来添加图像。

这是问题所在：

iPad 被锁定为横向模式，用户触摸我的按钮：“添加照片” Apple 菜单提醒：“拍照或录像”或“选择现有” 用户触摸“拍照或录像”。

当相机滑过并打开网络应用程序进入纵向模式！，在用户拍摄图像甚至取消拍摄图像后，我的网络应用程序卡在纵向模式并且在您解锁之前不会回到横向iPad，先转纵向再转横向！！

注意：如果用户选择“选择现有”并从相机胶卷上传，则没有问题。

有什么我可以做的吗？有没有办法不提供“拍照或录像”选项而只允许“选择现有”选项？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T14:39:47.563

我遇到了类似的问题。就我而言，相机胶卷仅在我在横向使用的 iPad 上以纵向模式显示。在查看 API 参考后，它看起来是设计使然：

> 重要提示： UIImagePickerController 类仅支持纵向模式。此类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改，但有一个例外。您可以将自定义视图分配给 cameraOverlayView 属性，并使用该视图来呈现附加信息或管理相机界面和代码之间的交互。

[UIImagePickerController 参考](https://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

# magento - 在多商店网站中打开产品时，它会重定向到 404 - 找不到页面

> ID：15640010
> 
> 赞同：1
> 
> 时间：2013-03-26T14:47:09.293
> 
> 标签：magento, http-status-code-404, multiple-sites

我有**Multi-Store Magento 网站**，仅由**一位管理员管理**

在其商店网站之一中，

当我点击产品名称时，它会将我重定向到**404 页面**。

可能是什么问题？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:48:17.673

在某些情况下可能会发生这种情况：-

1 - 确保将产品分配给您想要的商店（在目录->管理产品中），然后单击产品，您会在左侧选项卡（网站）上找到，确保它已检查到商店。

2 - 产品在此商店/商店视图（在产品编辑页面）中被禁用，将商店（选择商店视图）更改为您想要的商店/商店视图，并确保产品已启用。

3-您可能正在检查目录类别产品 url（来自 url_rewrites），它可能无效，因此导致 404。

除此之外，目录会重新索引到您的目录产品平面（如果您使用的是平面表）

您还可以检查产品是否存在直接查看网址（没有重新编写的网址）

试试（www.your-store.com/store_view/catalog/product/view/id/product_id）

如果上述链接有效（因此请检查上述步骤并运行所有索引器并重试）。

# c - 十六进制字符串作为 gdb 中 scanf 的输入

> ID：15640021
> 
> 赞同：0
> 
> 时间：2013-03-26T14:47:34.940
> 
> 标签：c, gdb, scanf, buffer-overflow

我们可以通过它在 gdb 中的十六进制值给出输入字符串吗？例如，一个简单的程序

```
#include <stdio.h>

int main() {
    char buffer[20];
    fscanf(stdin, "%s", buffer);
    printf("%s", buffer);
} 
```

调试它：

```
ravi@ravi-desktop:~$ gdb -q ./a.out
Reading symbols from /home/ravi/a.out...done.
(gdb) list 1
1   #include <stdio.h>
2   
3   int main() {
4       char buffer[20];
5       fscanf(stdin, "%s", buffer);
6       printf("%s", buffer);
7   }
(gdb) r
Starting program: /home/ravi/a.out 
\x41\x41\x41\x41
\x41\x41\x41\x41
Program exited with code 014.
(gdb) quit 
```

我想`A`使用十六进制值输入四个作为输入，`\x41`但它正在分别考虑每个字符。

**真正的要求是我在基于堆栈的缓冲区溢出中使用 Shellcode，并且我需要在调试时以十六进制输入 shellcode。**

任何人都可以在这里帮助我。

谢谢拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:03:55.913

您似乎期望 gdb 具有此功能，它应该解释输入中的 C 样式转义，以便调试的程序`'A'`在您键入`\x41`.

不幸的是，这不是它的工作原理。gdb 不在被调试程序和终端之间。并且终端不支持该功能，因此它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:22:40.463

您可以简单地从套接字而不是标准输入中读取，这使得在 gdb 中设置断点并查看一个 shell 中详细发生的情况并在另一个 shell 中注入代码变得非常容易！

这只是一个如何将十六进制注入套接字的示例：

```
echo -e "`perl -e 'print "\x14\xee\xff\xbf"x10 . "\x90"x10'`" | nc 127.0.0.1 1337 
```

--> 在这种情况下，使用 perl 打印内存地址和 NOP 并将其通过管道传输到 nc 到端口 1337 上的 localhost（或远程系统）。

我认为这正在解决您的问题！如果您需要通过套接字进行通信的帮助，我相信您也会在 stackoverflow 上找到答案！

# php - 使用 javascript/jQuery 隐藏从 $.post 检索到的屏幕上的某些元素

> ID：15640025
> 
> 赞同：0
> 
> 时间：2013-03-26T14:47:48.313
> 
> 标签：php, jquery

很可能是一个简单的解决方案，但请原谅我在编程领域的早期学习曲线以及一起使用 php 和 jquery。我能够轻松地从数据库中检索信息并将其显示在屏幕上。但是，我希望能够隐藏从数据库中检索并在页面上用 php 写出的某些元素，并在单击事件中显示它们。我可以在网站的其他部分轻松做到这一点，这些部分没有使用 $.post 检索。一旦我使用 $.post 和 ajax 从数据库中检索信息，是否有某些适用于 jQuery 的规则？

下面的php：

```
<?php echo "
    <div class='phone_tracking customCall separation'>
        <h3>Phone Tracking</h3>
        <a class='showCustomDatePhone' href='#customDate_individualPhone'>View &amp; Listen to Individual Phone Leads >></a>
        <table>
            <tr class='tableHead'>
                <td>Date</td>
                <td>Traffic+ Calls</td>
                <td>New Vehicle Calls</td>
                <td>Used Vehicle Calls</td>
                <td>Service Calls</td>
                <td class='totalTally'>Total Calls</td>
            </tr>
            <tr>
                <td>`$valueRetrieved` - `$valueRetrieved2`</td>
                <td>$customDateTrafficPlusTally</td>
                <td>$customDateNewVehicleTally</td>
                <td>$customDateUsedVehicleTally</td>
                <td>$customDateServiceTally</td>
                <td>$customDateTally</td>
            </tr>
        </table>
        <div id='customDate_individualPhone'>
            <h4>All Individual Phone Calls For `$valueRetrieved` - `$valueRetrieved2`</h4>
            <table>
                <tr>
                    <td>Date</td>
                    <td>Ad Source</td>
                    <td>Caller Phone Number</td>
                    <td>Tracking Phone Number</td>
                    <td>Target Phone Number</td>
                    <td>Call Duration (in seconds)</td>
                    <td>Result of Phone Call</td>
                    <td>Call Listen Link</td>
                </tr> " . $showTheCustomDatePhoneTable ."
            </table>
        </div>
    </div>
"; ?> 
```

下面的jQuery：

```
 $('#customDate_individualPhone').hide();
                $('.showCustomDatePhone').click(function(){
                    var txt = $("#customDate_individualPhone").is(':visible') ? 'View & Listen to Individual Phone Leads >>' : '<< Hide Individual Phone Leads';
                    $(".showCustomDatePhone").text(txt);
                    $('#customDate_individualPhone').toggle();
                }); 
```

用于检索数据的 ajax（如果有帮助的话）

```
 $('#getDateRange').on('click', function(){
                    var startDate = $('#dateStart').val();
                    var endDate = $('#dateEnd').val();
                    if ($.trim(startDate) != '') {
                        $.post('../../includes/dateRangeWhitePlainsNissan.php', {dateStart: startDate, dateEnd: endDate}, function(data){
                            $('#fromDatabase').html(data);
                        });
                    }
                }); 
```

我对编程还是很陌生，因此非常感谢您的帮助！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:53:33.533

您需要使用回调重新初始化您的点击函数，或将它们转换为使用[on()](http://api.jquery.com/on/)。

```
$('.showCustomDatePhone').on('click', function(){}); 
```

# cluster-computing - 是否可以设置 Neo4j HA 集群 1.9 配置，以便只有图形数据库的一部分是集群的一部分

> ID：15640032
> 
> 赞同：0
> 
> 时间：2013-03-26T14:48:06.307
> 
> 标签：cluster-computing, neo4j, high-availability

是否可以配置和/或编码，以便只有图形数据库的一部分是集群的一部分？因此，例如，只有具有指定类型关系的节点才会成为 HA 集群的一部分——使主从可以拥有图形数据库的“私有”部分并访问公共部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:04:36.690

使用 HA 的 Neo4j 实例始终完全复制到从属实例。如果您需要将图形的某些部分保持为单台机器的私有，您应该使用一个额外的、单独的、非 HA Neo4j 实例。

# vb.net - 将 fileStream 的内容放入数据集中

> ID：15640033
> 
> 赞同：1
> 
> 时间：2013-03-26T14:48:06.523
> 
> 标签：vb.net, dataset, devexpress, filestream

我想阅读从 DevExpress 的 XtrapivotGrid 获得的 Stream。我可以将它保存在计算机中，但我想要将它保存在我的数据集中的一个表中，称为 dataset1。现在我有允许将其保存在目录 Temp: 的代码。

```
Using FS As New IO.FileStream("D:\Temp\qqc.layout", IO.FileMode.Create)
     PivotGridControl1.SaveLayoutToStream(FS)
End Using

Dim read As New System.IO.FileStream("D:\Temp\qqc.layout", IO.FileMode.Open, IO.FileAccess.Read)
DataSet1.LayoutMainRapport.ReadXml(read)
DataSet1.AcceptChanges()
read.Close() 
```

表格 LayoutMainRapport 有 3 列：

*   ID（整数）
*   名称（nvarchar（50））
*   内容（xml）。

流的输出是 xml。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T19:10:43.050

我只需要为 xml 保存一个名称，然后将其保存到我的数据集中。

```
 Dim saveDialog As SaveLayout = New SaveLayout
    If saveDialog.ShowDialog() = Windows.Forms.DialogResult.OK Then
        Dim read As New IO.MemoryStream
        PivotGridControl1.SaveLayoutToStream(read)
        read.Position = 0
        Dim lecteur As New IO.StreamReader(read)
        Dim ligne As DataRow = DataSet1.LayoutMainRapport.NewRow()

        ligne("Nom") = saveDialog.txtNom.Text
        ligne("Contenu") = lecteur.ReadToEnd()
        DataSet1.LayoutMainRapport.Rows.Add(ligne)
        LayoutMainRapportTableAdapter.Update(DataSet1)
    End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:14:45.577

我相信您应该将保存的布局转换为字符串，然后将此字符串保存到数据库（当然您可以从数据库字符串值加载此布局）：

```
Private Function SaveLayoutToString(ByVal dxControl As DevExpressControl) As String
    Using ms As MemoryStream = New MemoryStream()
        dxControl.SaveLayoutToStream(ms)
        Return Convert.ToBase64String(ms.ToArray())
    End Using
End Function
Private Sub RestoreLayoutFromString(ByVal dxControl As DevExpressControl, ByVal layout As String)
    If String.IsNullOrEmpty(layout) Then
        Return
    End If
    Using ms As MemoryStream = New MemoryStream(Convert.FromBase64String(layout))
        dxControl.RestoreLayoutFromStream(ms)
    End Using
End Sub 
```

这`DevExpressControl dxControl`是支持保存和加载布局的 DevExpress 控件（XtraPivotGrid、XtraGrid、XtraLayoutControl 等）

# c++ - 部分更改 C++ 库同时保持库其余部分完整的最佳实践

> ID：15640035
> 
> 赞同：11
> 
> 时间：2013-03-26T14:48:17.320
> 
> 标签：c++

在像 OpenCV 这样完善的 C++ 库中添加或修改单个类方法的最佳实践是什么，同时仍然重用剩余的库代码，最好是 lib 格式。

在这一点上，我知道的唯一方法是将属于特定库（比如说 OpenCV 的核心库）的所有源文件和头文件复制到当前源文件夹，修改一个函数并使用其余代码重新编译模块. 理想情况下，我希望能够以它们的方式链接所有当前的 .lib 文件，但只需为在这些库中定义的类定义一个新方法（或修改当前方法），以一种我的方法实现取代的方式默认库文件的实现。

继承似乎并不总是一种选择，因为有时基类具有正确继承类实现所需的私有成员。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T15:27:58.543

我不知道 C++ 中有一种干净的方式来完成您的要求。您真正要求做的事情（假设您需要使用或修改私有方法）违反封装，而 C++ 语言旨在不允许您这样做。

存在几个选项：

*   文件`.lib`只是文件的集合`.obj`。`.obj`你的编译器工具链应该有一个命令行程序`.lib`来添加、删除和`.obj`替换`.lib`. 我怀疑这个解决方案会是丑陋和脆弱的。
*   如果有一些库不做而应该做的事情，那么您总是有机会向库作者提交补丁或功能请求以进行更改。当然，这可能需要一段时间，如果它完全有效的话。
*   正如[@fatih_k](https://stackoverflow.com/a/15640315/25507)建议的那样，将您的更改添加为朋友类是可行的。如果您对 OpenCV 所做的*唯一*`friend`更改是在头文件中添加一行，那么库的[ABI](http://en.wikipedia.org/wiki/Application_binary_interface)将保持不变，您不必触摸`.lib`.
*   最干净的选择是简单地接受您需要修改 OpenCV 库并跟踪其源代码以及您的修改以及您自己开发的源代码，并与您自己构建的源代码一起构建它。这是一种非常常见的方法，并且存在各种模式和技术可以帮助您做到这一点；例如，Subversion 有[供应商分支](http://svnbook.red-bean.com/en/1.7/svn.advanced.vendorbr.html)的概念。这种方法需要更多的设置工作，但从长远来看绝对是最干净的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T15:28:47.423

如果这个库已经编译好了，那么你就没有什么可移植的和干净的了。

如果您知道程序将在其上运行的特定目标体系结构，您可以获取指向成员函数的指针，并使用`jmp`您自己的方法版本的指令对指令进行修补。如果方法是虚拟的，则可以修改 vtable。这些需要大量特定于编译器的知识，并且不可移植。

如果库在动态链接存档中提供，您可以提取存档并将方法替换为您自己的版本，然后重新打包存档。

另一种方法是您可以从标题中复制类的声明并添加朋友声明。或者，您可以在包含头文件之前`#define private public`或之前执行此操作。`#define private protected`这些将使您可以访问他们的私人成员。

对于上述任何一项，您需要注意您的更改不会修改库的 ABI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:21:31.483

好吧，OpenCV 在 BSD 下获得许可，因此您可以进行更改而不必担心重新发布它们。

您始终可以遵循代理设计模式并将新方法添加到库外部，然后从那里调用库。这意味着您无需担心维护自己的 OpenCV 版本并分发它。[在 Wiki 上有更多关于代理模式的信息](http://en.wikipedia.org/wiki/Proxy_pattern)，可以帮助您入门。

# magento - Magento - 使用 Upsell 产品的数量字段添加到购物车

> ID：15640036
> 
> 赞同：4
> 
> 时间：2013-03-26T14:48:18.240
> 
> 标签：magento

我试图让我使用的 Upsell 产品而不是 view.phtml 上的相关产品，以使用“添加到购物车”按钮前面的“数量”字段。我也在使用 AheadWorks Ajax AddToCart Pro 2.5 扩展。

现在，我正在使用此代码段添加没有数量字段的产品：

```
<form action="<?php echo $this->getAddToCartUrl($_link) ?>" method="post" id="view_addtocart_form_<?php echo $_link->getId(); ?>"><button onclick="setLocation('<?php echo $this->getAddToCartUrl($_link) ?>')" class="greenbutton" title="Add to Cart" type="button"><span><span>Add to Cart</span></span></button></form> 
```

这很好用，但由于缺少数量字段，我无法更改数量。然后我尝试从我的 list.phtml 中使用它，它在类别视图中运行良好：

```
<script type="text/javascript">
                    function setQty(id, url) {
                        var qty = document.getElementById('qty_' + id).value;
                        document.getElementById('cart_button_' + id).innerHTML = '<button type="button" class="greenbutton-small" onclick="setLocation(\'' + url + 'qty/' + qty + '/\')"><span><span>Læg i kurv</span></span></button>';   
                    }
                </script>
                <label for="qty"><?php echo $this->__('Qty:') ?></label>
                <input type="text" name="qty_<?php echo $_product->getId(); ?>" id="qty_<?php echo $_product->getId(); ?>" maxlength="12" value="1" onkeyup="setQty(<?php echo $_product->getId(); ?>, '<?php echo $this->getAddToCartUrl($_product) ?>');" title="<?php echo $this->__('Qty') ?>" class="input-text qty" />
                <span id="cart_button_<?php echo $_product->getId(); ?>">
                <button type="button" class="greenbutton-small" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></span> 
```

现在，有趣的是，如果我尝试在 upsell.phtml 中使用它，这不起作用，但我不知道为什么？这与类别视图中来自 AW 的 Ajax Cart Pro 完美配合。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:42:42.033

根据以下代码`upsell.phtml`调用产品对象：`$_link`

```
<?php if($_link=$this->getIterableItem()): ?> 
```

如果您尝试将代码包含在您的代码中，`upsell.phtml`则必须更改`$_product`为`$_link`：

```
<label for="qty"><?php echo $this->__('Qty:') ?></label>
            <input type="text" name="qty_<?php echo $_link->getId(); ?>" id="qty_<?php echo $_link->getId(); ?>" maxlength="12" value="1" onkeyup="setQty(<?php echo $_link->getId(); ?>, '<?php echo $this->getAddToCartUrl($_link) ?>');" title="<?php echo $this->__('Qty') ?>" class="input-text qty" />
            <span id="cart_button_<?php echo $_link->getId(); ?>">
            <button type="button" class="greenbutton-small" onclick="setLocation('<?php echo $this->getAddToCartUrl($_link) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></span> 
```

它应该在以下行之后：

```
<?php if($_link=$this->getIterableItem()): ?> 
```

# python - 映射 pandas DataFrame 索引

> ID：15640038
> 
> 赞同：3
> 
> 时间：2013-03-26T14:48:24.007
> 
> 标签：python, datetime, pandas

假设我有一个由以下索引的数据框`datetime`：

```
> df.head()

                        value
2013-01-01 00:00:00 -0.014844
2013-01-01 01:00:00  0.243548
2013-01-01 02:00:00  0.463755
2013-01-01 03:00:00  0.695867
2013-01-01 04:00:00  0.845290
(...) 
```

如果我想按日期绘制所有值，我可以这样做：

```
times = map(lambda x : x.date(), df.index)
values = df.value
plot(values, times) 
```

有没有更“熊猫惯用”的方式来做到这一点？我尝试了该`.rename`方法，但出现断言错误：

```
df.rename(lambda x : x.time()) 
```

我真正想要的是做一些类似于箱线图的事情：

```
df.boxplot(by = lambda x : x.time()) 
```

但没有标准偏差框（将由估计的置信带代替）。有没有办法用一个简单的 pandas 命令来做到这一点？

* * *

我不知道我是否清楚问题所在。问题是我有一个日期时间字段作为数据帧的索引，我只需要提取时间部分并按时间绘制值。这会给我很多具有相同 x 轴的点，这很好，但该`rename`方法似乎期望结果索引中的每个值都是唯一的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:00:22.337

您可以使用 DataFrame[`plot`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.plot.html)方法进行本地绘图，例如：

```
df.plot()
df.plot(kind='bar')
... 
```

*这种方法为您提供了很大的灵活性（具有 matplotlib 的所有功能）。
文档的[可视化部分](http://pandas.pydata.org/pandas-docs/stable/visualization.html)介绍了很多细节，并提供了大量示例。*

* * *

在 0.12+ 中有一个 DatetimeIndex 上的时间方法/属性（IIRC 由于这个问题）：

```
df.index.time  # equivalent to df.index.map(lambda ts: ts.time()) 
```

要仅绘制时间，您可以使用：

```
plot(df.index.time, df.value) 
```

但是，如果有的话，这似乎只比您的解决方案好一点。也许时间序列索引应该提供一种时间方法，类似于每小时的方式（我隐约记得一个类似的问题......）：

```
plot(df.index.hour, df.value)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:03:09.610

如果您想要时间值，那么这是相当快的。

```
def dt_time(ind):
  return np.array([time(*time_tuple) for time_tuple in zip(ind.hour, ind.minute, ind.second)]) 
```

调用`map`速度会慢很多。

```
In [29]: %timeit dt_time(dt)
1000 loops, best of 3: 511 µs per loop

In [30]: %timeit dt_map(dt)
10 loops, best of 3: 96.3 ms per loop 
```

对于 100 长度的 DatetimeIndex。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T02:50:49.930

这是我的解决方案：

装箱数据：

```
import pandas as pd
from pandas import *
from numpy.random import randn
rng = date_range('1/1/2011', periods=72, freq='H')
ts = TimeSeries(randn(72), index=rng) 
```

绘制日期值：

```
ts.to_period("D").plot(style="o") 
```

![在此处输入图像描述](../Images/db2f79f46b90707a4d02ea711699f67f.png)

绘制时间值：

```
TimeSeries(ts.values, index=DatetimeIndex(ts.index.values - 
    ts.index.to_period("D").to_timestamp().values)).plot(style="o") 
```

![在此处输入图像描述](../Images/5d85190d2b0cf3295c372d206834909f.png)

# java - 当我有足够的端口时，为什么会出现“没有可用的缓冲区空间”错误？

> ID：15640039
> 
> 赞同：2
> 
> 时间：2013-03-26T14:48:25.360
> 
> 标签：java, windows, networking, tcp, coldfusion

我有三台运行 Windows 2003 和 ColdFusion 9 (JRun 4) 和 ColdFusion 10 (Tomcat 7) 的服务器。

每周有几次，其中一台服务器到处都出现套接字错误：

```
javax.mail.MessagingException: Could not connect to SMTP host: 192.168.1.3, port: 25;     nested exception is: java.net.SocketException: No buffer space available (maximum connections reached?): connect 
```

和

```
SQLException while attempting to connect: java.sql.SQLNonTransientConnectionException: [Macromedia][SQLServer JDBC Driver]Error establishing socket to host and port: 192.168.1.11:1433\. Reason: No buffer space available (maximum connections reached?): connect. 
```

和

```
java.io.IOException: Socket read failed at org.apache.coyote.ajp.AjpProcessor.read(AjpProcessor.java:323) 
```

当然，我一直在 Google 和 Stack Overflow 上搜索这个错误，并尝试了许多可能的修复方法。如 MaxPorts 注册表值。我遇到的问题是这些服务器**没有**用完端口。他们有很多。我一直在使用 TCPview 和 netstat（甚至 CurrPorts 将所有 TCP 和 UDP 更改记录到文件中）来分析情况。但每一个看起来都很好。任何时候都没有超过几百个进出连接。

此外，并非所有来自服务器的传出请求都会引发套接字异常。在这些机器上运行的网站是可访问的，但有时（似乎是随机的）访问者会收到上述套接字错误。

使用 RDP 连接到这些机器不是问题，并且从这些服务器到其他地方执行 ping 或 telnet 调用绝不是问题。

那么，当我有足够的端口时，我怎么能用完端口呢？

# jquery - 如何在完整日历的每个日期中添加一个图标，该图标弹出一个用于插入、更新和删除事件详细信息的表单

> ID：15640042
> 
> 赞同：1
> 
> 时间：2013-03-26T14:48:40.947
> 
> 标签：jquery, fullcalendar

你好朋友这是我更新的代码现在我想添加与日期相同的唯一 id 的图像（mysql-格式），如果我点击图像然后只有弹出页面需要为新事件打开每个日期的其他部分无法打开弹出表单，但如果单击事件，则需要重新打开表单，并且不想在每个日期之前附加或预先添加图像，但图像需要个人提前感谢建议是可以接受的

* * *

JAVASCRIPT

```
<script>

$(document).ready(function() {
$('#calendar').fullCalendar({
      if(count==0){
            $(".fc-day-number").before("<img src='/assets/images/add2.png' style='' name='date' id='data-date'>")
            alert(count);
            count++;
            }
});
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:04:53.223

您可以使用 dayClick 事件显示带有添加事件表单的弹出窗口：

```
dayClick: function(date, allDay, jsEvent, view) {
    $('#dialog-form').data('date', date).dialog('open');
} 
```

结束绑定双击事件进行编辑：

```
eventRender: function(event, element) {
    element.bind('dblclick', function() {
        $('#dialog-form').data('eventid', event.id.toString()).dialog('open');
    });
} 
```

要添加一些图像，您可以使用这个[问题](https://stackoverflow.com/questions/3750521/add-icons-in-first-line-of-an-event-fullcalendar)

# sql-server - 如何确认分支是否通过 SQL 合并？

> ID：15640048
> 
> 赞同：2
> 
> 时间：2013-03-26T14:48:54.317
> 
> 标签：sql-server, reporting-services, branching-and-merging

有谁知道如何确认分支是否通过 SQL 查询合并？从长远来看，我想创建一个按需 SSRS 报告，以便在部署了一系列版本后对其进行审查。我知道有从 tbl_Version 获取的特定命令位值（我这样做是为了识别重命名的分支），但是如果合并，我无法识别识别分支的位值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:17:10.340

**报告不支持这些表格。**您构建的任何解决方案都应使用 TFS 对象模型将数据加载到仓库中。或者直接使用客户端对象模型来检索数据。

你要做的事情真的很难，因为数据没有存储在仓库中。您可以通过调用方法来查询合并数据，也可以[`VersionControlServer.QueryMerges`](http://msdn.microsoft.com/en-us/library/bb138969%28v=vs.100%29.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)在调用[`VersionControlServer.QueryHistory`](http://msdn.microsoft.com/en-us/library/bb138960%28v=vs.100%29.aspx).

构建 DatawarehouseAdapter 更加困难，因为可用的文档很少，而且您应该对 TFS 对象模型、仓库结构和分析服务器都有深入的了解。有一个 Ranger 项目正在进行中以提供有关此主题的额外指导，但在完成之前，您会发现大部分只是零散的几篇博文和一个非常糟糕的例子。

您可能能够找到在开源项目（例如[TfsChangeLog](http://tfschangelog.codeplex.com/SourceControl/changeset/view/19920#180640)项目或[社区 TFS 构建管理器](http://tfsbuildextensions.codeplex.com/SourceControl/changeset/view/83023#1631565)）中构建 Reporting Server 范围之外的内容的良好指针。

# javascript - 用于更改对象的 url 源的按钮栏

> ID：15640049
> 
> 赞同：0
> 
> 时间：2013-03-26T14:48:55.053
> 
> 标签：javascript, jquery, html

我正在尝试制作一个按钮栏来更改已定义对象的属性但无法使其正常工作。请参阅下面的代码片段（不包括 CSS）：

按钮条码

```
<ul id="filtering-nav">
<li class="work button active" value="../servlet/Web">Work</li>
<li class="like button"  value="../servlet/Home">home</li></ul> 
```

脚本代码

```
<script> var buttons = $("#filtering-nav .button"); buttons.click(function(){
buttons.removeClass("active");
$(this).addClass("active");
$( "#alpha100" ).attr("data", $("#filtering-nav .button.selected").val() );});</script> 
```

目标对象代码

```
<object id='alpha100' type="text/html" data=""  width="100%" height="100%"></object> 
```

有谁知道我在这里做错了什么？

我可以得到类似于使用下拉框的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:53:19.827

你似乎想要`.button.active`而不是`.button.selected`.

但是你可以让你的代码更简单：

```
var buttons = $("#filtering-nav .button");
buttons.click(function(){
   buttons.removeClass("active");
   $(this).addClass("active");
   $("#alpha100" ).attr("data", $(this).attr('value'));
}); 
```

请注意，今天的自定义属性应命名为`data-something`. `data`并且`value`不是好的属性名称。使用标准的自定义数据属性，您将使用特定的[数据](http://api.jquery.com/jQuery.data/)函数：

```
 $("#alpha100" ).data("something", $(this).data('otherthing')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:56:50.220

`value`当您尝试使用`li`标签时，我不知道幕后发生了什么。这可能是问题的一部分，所以我建议您使用这种方法（使用`data`属性）

**HTML**

```
<ul id="filtering-nav">
   <li class="work button active" data-value="../servlet/Web">Work</li>
   <li class="like button"  data-value="../servlet/Home">home</li>
</ul> 
```

**JS**

```
<script> 
    var buttons = $("#filtering-nav .button"); buttons.click(function(){
    buttons.removeClass("active");
    $(this).addClass("active");
    $( "#alpha100" ).attr("data", $("#filtering-nav .button.selected").data('value') );});
</script> 
```

别的东西（正如dystroy指出的那样）：你的意思是`.button.active`不是`.button.selected`？

# c# - 密码检索和存储

> ID：15640051
> 
> 赞同：2
> 
> 时间：2013-03-26T14:48:57.380
> 
> 标签：c#, security, encryption, passwords

在我的应用程序中，我必须重复调用需要身份验证的 Web 服务。用户不想重复输入认证信息（用户名和密码）。

是否有一种安全的方法可以至少在应用程序运行的会话期间存储密码，因此用户只需输入一次数据？

目前我将密码保存在内存中，输入后加密，用于服务调用时解密。但我对此感到有些不舒服。这是处理此类数据的推荐方法吗？

将密码存储在数据库中以在多个会话中使用如何？有推荐的处理方法吗？我听说过 bcrypt 和 pbkdf2。但它们仅用于散列目的并将输入的密码与输入的密码进行比较，而不是再次使用“解密”密码。

或者使用外部密码缓存是否是更好的方法，例如keepass（或任何可以使用的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:50:02.873

对于内存存储，请使用 SecureString 类或[NetworkCredentials](http://msdn.microsoft.com/en-us/library/system.net.networkcredential.aspx)，它们在内部使用 SecureString。

[对于持久存储，请使用Data Protection API](http://msdn.microsoft.com/en-us/library/ms995355.aspx)加密密码。它将使用只有这台计算机上的当前 Windows 用户可以访问的密钥对其进行加密。

# gcc - 如何使用 gccgo 构建完整的 go 程序二进制文件？

> ID：15640054
> 
> 赞同：7
> 
> 时间：2013-03-26T14:49:03.367
> 
> 标签：gcc, go, gccgo

我注意到使用`go build`二进制结果时可能会超过 2MB；但使用`gccgo`二进制小于35k。

我在使用时注意到的另一个问题`gccgo`是生成的二进制文件不能在另一个 linux 机器上运行（`libgo.so`我相信缺少）但`go build`二进制文件运行得很好（所以我想这是因为二进制文件包含运行所需的所有内容？）；有没有办法做到这一点`gccgo`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T17:34:13.410

您必须使用 -static 标志：

> 使用 -static 选项进行完全静态链接（gc 编译器的默认值）。

[http://golang.org/doc/install/gccgo](http://golang.org/doc/install/gccgo)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T15:30:56.970

您可以使用 -static-libgo 选项静态链接 libgo，同时仍动态链接系统库。（这仅适用于 gccgo）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-14T15:16:15.220

使用 go 1.8 或更高版本，如果使用 go 构建`CGO_ENABLED=1`（默认为 1），则本地编译会动态链接。通过运行检查此变量`go env CGO_ENABLED`。您可以在运行 go build 时通过将环境变量 CGO_ENABLED 设置为 0 来切换到静态链接。

```
CGO_ENABLED=0 go build 
```

顺便说一句，交叉编译自动使用静态链接。

# c++ - 确定 const char* 是字符串文字还是变量

> ID：15640060
> 
> 赞同：2
> 
> 时间：2013-03-26T14:49:26.153
> 
> 标签：c++, winapi, string-literals

是否有任何简单的方法可以检测传递给函数的参数（const char *argument）是常量文字还是变量？

我正在尝试修复一些代码中的错误，这些代码充满了 IsBadWritePtr 调用，如果参数是常量文字，则会引发访问冲突异常。

这是一个可怕的设计愚蠢，但现在我不允许改变尴尬的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:57:27.360

您可以添加一个更适合字符串文字的不同重载。这不是真正的*科学*，而只是启发式：

```
void f(const char* p); // potential literal
void f(char *p);       // pointer to non-const 
```

另一个想法是利用文字实际上是*数组*：

```
template <int N>
void f(const char (&_)[N]); // potential literal 
```

请注意，它们并没有完全检测到*literal*与*not literal*，而是检测到其他一些特性。`const char* p = createANewString(); f(p);`将解析为`f(const char*)`，`const char x[] = { 'A', 'b', 'c', '\0' };`并将解析为模板。它们都不是*literals*，但您可能也不想修改。

一旦进行了更改，就应该很容易找出每个重载的调用位置。

这一切的前提是主函数不应该像`const char*`在内部修改它一样接受参数，并且您面临的问题是因为为了向后兼容，您的编译器允许调用一个函数，该函数需要一个指向非带有文字的 const...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:53:31.753

~~我不认为有一种方法可以在不使用一些黑客的情况下检测到这一点。~~
由于接口承担`const char *`了函数的责任，因此无论如何都不修改传递的字符串。您需要修改实现，因为它根本不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:56:34.007

[`VirtualQuery`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366902)可用于检测地址是可写、只读还是不可访问。检查返回结构的`State`和`Protect`成员`MEMORY_BASIC_INFORMATION`以查看内存是否可访问以及是否具有您需要的访问权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-10T03:30:23.730

一种非常骇人听闻的方法是检查指针是否在 .rdata 段中。

在构建之后使用`dumpbin /headers`来检索 .rdata 部分的偏移量和长度，或者自己解析 PE 标头。自然，这是特定于工具链的，通常是个坏主意。此外，如果代码需要与 DLL 互操作，您必须检查几个可执行文件和几个 .rdata 段。

# extjs - 如何使边框布局中心区域无限滚动？

> ID：15640064
> 
> 赞同：0
> 
> 时间：2013-03-26T14:49:36.480
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我在 extjs4 工作。我有一个任务在那里我要处理边框布局。我想让我的边框布局中心区域无限滚动，即它在中心区域加载子组件当时我的页脚向下方向基于子组件。如何使用边框布局创建它？边框布局可以吗？我工作并搜索了很多，但没有得到解决方案。请给我一些建议......提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:16:47.007

是的，这是可能的。保持配置滚动：中心面板垂直。你能正确解释你的问题吗，我的意思是你想要实现的目标。我只知道你想要一个带有页眉、中心和页脚区域的边框布局。我的意思是你在哪里面临问题？

# php - 使用 tmhOAuth 更新 Twitter

> ID：15640065
> 
> 赞同：2
> 
> 时间：2013-03-26T14:49:38.857
> 
> 标签：php, twitter

我想更新我的推特。我使用 themattharris 的 tmhOAuth 。我已启用 Curl 并且 Twitter 应用程序设置正确，具有读写访问权限。我检查了标头，请求为空。起初，代码应该只需要更改 Twitter 中的密钥和更改即可。你觉得我做错了什么？

```
require 'tmhOAuth.php';
require 'tmhUtilities.php';
$tmhOAuth = new tmhOAuth(array(
 // 'consumer_key'    => 'YOUR_CONSUMER_KEY',
  //'consumer_secret' => 'YOUR_CONSUMER_SECRET',
  //'user_token'      => 'A_USER_TOKEN',
 // 'user_secret'     => 'A_USER_SECRET',
        'consumer_key'               => 's8wEiEo0EFk7fCX5jHfVfw',
        'consumer_secret'            => 'db2qENrjCRxtaOFs9a7wT7YPjWNRxO1yHHxT9EkM',
        'user_token'                 => '92957047-suEq4sH6ADTFXfOqrWfpbX6D9OqYGMyKA8CMAQVz4',
        'user_secret'                => 'LqhbQRp29M7L5UfdtJhde3kHxzB5oOn5xtGIdy35bOY',
));

$code = $tmhOAuth->request('POST', $tmhOAuth->url('1/statuses/update'), array(
  'status' => 'My Twitter Message'
));

if ($code == 200) {
  tmhUtilities::pr(json_decode($tmhOAuth->response['response']));
} else {
  tmhUtilities::pr($tmhOAuth->response['response']); 
```

# garbage-collection - 为什么不是Full GC？

> ID：15640071
> 
> 赞同：2
> 
> 时间：2013-03-26T14:49:46.123
> 
> 标签：garbage-collection

Eden是8M，survivor1和survivor2总共是2M，Old area是10M。创建对象alloc4时，触发了第一次Minor GC，并且alloc1/alloc2/alloc3被移动了old area。创建alloc6时，alloc4被移动了old area，alloc5被移动了移动sur​​vivor area。创建alloc7时，Eden不能hold住alloc7，所以它被移动了old area，但是old areahold alloc1/alloc2/alloc3/alloc4,9M，也不能hold alloc7，所以old area应该触发Full GC，回收alloc1，alloc3。但是为什么第3次GC不是full gc而是minor gc？

```
 /**
 * VM Args:-Xms20M -Xmx20M -Xmn10M -XX:SurvivorRatio=8 -XX:+PrintGCDetails
 * 
 * @author yikebocai@gmail.com
 * @since 2013-3-26
 * 
 */
public class Testjstat {
    private static final int _1MB = 1024 * 1024;

    public static void main(String[] args) throws InterruptedException {
        byte[] alloc1 = new byte[2 * _1MB];
        byte[] alloc2 = new byte[2 * _1MB];
        byte[] alloc3 = new byte[1 * _1MB];

        // first Minor GC
        byte[] alloc4 = new byte[4 * _1MB];
        byte[] alloc5 = new byte[_1MB / 4];

        // second Minor GC
        byte[] alloc6 = new byte[6 * _1MB];

        alloc1 = null;
        alloc3 = null;

        // first Full GC
        byte[] alloc7 = new byte[3 * _1MB];

    }

     } 
```

gc 细节是：

```
[GC [DefNew: 5463K->148K(9216K), 0.0063046 secs] 5463K->5268K(19456K), 0.0063589 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] 
[GC [DefNew: 4587K->404K(9216K), 0.0046368 secs] 9707K->9620K(19456K), 0.0046822 secs] [Times: user=0.02 sys=0.00, real=0.01 secs] 
[GC [DefNew: 6548K->6548K(9216K), 0.0000373 secs][Tenured: 9216K->6144K(10240K), 0.0124560 secs] 15764K->12692K(19456K), [Perm : 369K->369K(12288K)], 0.0126052 secs] [Times: user=0.00 sys=0.02, real=0.01 secs] 
Heap
 def new generation   total 9216K, used 6712K [0x322a0000, 0x32ca0000, 0x32ca0000)
  eden space 8192K,  81% used [0x322a0000, 0x3292e2a8, 0x32aa0000)
  from space 1024K,   0% used [0x32aa0000, 0x32aa0000, 0x32ba0000)
  to   space 1024K,   0% used [0x32ba0000, 0x32ba0000, 0x32ca0000)
 tenured generation   total 10240K, used 9216K [0x32ca0000, 0x336a0000, 0x336a0000)
   the space 10240K,  90% used [0x32ca0000, 0x335a0030, 0x335a0200, 0x336a0000)
 compacting perm gen  total 12288K, used 369K [0x336a0000, 0x342a0000, 0x376a0000)
   the space 12288K,   3% used [0x336a0000, 0x336fc548, 0x336fc600, 0x342a0000)
    ro space 10240K,  51% used [0x376a0000, 0x37bccf58, 0x37bcd000, 0x380a0000)
    rw space 12288K,  54% used [0x380a0000, 0x38738f50, 0x38739000, 0x38ca0000) 
```

# java - 对地图列表进行排序

> ID：15640074
> 
> 赞同：1
> 
> 时间：2013-03-26T14:49:46.537
> 
> 标签：java, list, sorting, map

我有一张地图清单

`List<Map<String, Object>> people = new ArrayList<Map<String,Object>>();`

像这样被填充

```
map.put("firstName",John);
map.put("lastName",Smith);
map.put("type","1"); //type is either 1 or a 0

people.add(map); 
```

在这个列表被填充之后，我想要对它做的就是让所有人都`0`在列表的顶部输入类型，并且所有人都`1`在底部输入类型。

我知道我需要使用 a `Comparator`，但我以前从未使用过，所以我不知道如何使用它或它是如何工作的。

有人可以帮我吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:58:39.597

像这样

```
Collections.sort( people, new Comparator<Map<String, Object>>() {
    @Override
    public int compare( Map<String, Object> o1, Map<String, Object> o2 ) {
        return (Integer.parseInt((String)o1.get( "type" ))) - 
                (Integer.parseInt((String)o2.get( "type" )));
    }
} ); 
```

但是，有很多方法可以使这一点变得更好。如果您不能按照@Pshemo 的建议使用 Person 对象来表示地图，那么至少为您的 type 属性使用合理的数据类型。最好的是枚举：

```
public enum PersonType {
    TYPE_1, TYPE_2
} 
```

然后比较更清晰，更快，更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:58:16.597

Comparator 只是一个需要实现的接口，它只包含一个需要重写的方法。

例如：

```
 List<Map<String, Object>> people = new ArrayList<Map<String,Object>>();

    Map<String, Object> map = new HashMap<String, Object>();
    map .put("firstName","John");
    map.put("lastName","Smith");
    map.put("type","1"); //type is either 1 or a 0

    people.add(map);

    Collections.sort(people, new Comparator<Map<String, Object>>() {
        @Override
        public int compare(Map<String, Object> o1, Map<String, Object> o2) {
            // you may compare your map here
            return 0;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T15:02:08.373

尝试这个

```
 Collections.sort(people, new Comparator<Map<String, String>>() {

    @Override
    public int compare(Map<String, String> m1, Map<String, String> m2) {
        return m1.get("type").compareTo(m2.get("type"));
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T15:03:34.347

You can try like this :

```
class ListByType 
{
    private static class MyComparator implements Comparator<HashMap<String,String>>
    {
        @Override
        public int compare(HashMap mp1 , HashMap mp2)
        {
            return ((String)(mp1.get("type")).compareTo((String)mp2.get("type"));
        }
    }
    public static void main(String[] args) 
    {
        List<Map<String, String>> people = new ArrayList<Map<String,String>>();
        HashMap<String,String> map = new HashMap<String,String>();
        map.put("firstName","John");
        map.put("lastName","Smith");
        map.put("type","1"); //type is either 1 or a 0
        people.add(map);
        /*...
        ..
        ...
        Add more maps here..
        */
        //Sort the list
        Collections.sort(people,new MyComparator());
    }
} 
```

# mysql - Mysql全文不返回结果

> ID：15640075
> 
> 赞同：0
> 
> 时间：2013-03-26T14:49:48.800
> 
> 标签：mysql, full-text-search

我有一个定义了两个全文索引的表。“show create table upload”语句中的表格布局为：

```
CREATE TABLE `upload` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `when_uploaded` datetime DEFAULT NULL,
  `bywho` int(10) unsigned DEFAULT NULL,
  `notes` text COLLATE utf8_unicode_ci,
  PRIMARY KEY (`id`),
  KEY `bywho` (`bywho`),
  KEY `when_uploaded` (`when_uploaded`),
  FULLTEXT KEY `title` (`title`),
  FULLTEXT KEY `notes` (`notes`)
) ENGINE=MyISAM AUTO_INCREMENT=31 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

用于搜索的sql是：

```
select * from upload where match(notes) against('comments' in boolean mode) 
```

我已验证“评论”一词至少出现在 4 个测试行中的一个中。我可以使用以下方法搜索标题：

```
select * from upload where match(title) against('upload' in boolean mode) 
```

在同一张桌子上没有问题并让它返回结果。我尝试过不同的单词，我知道它们在注释字段中，但无济于事。

我知道这个搜索以前有效。我将最小单词大小更改为 3。删除标题和注释的索引并重新添加它们。标题有效，注释无效。

由于我使用的是“布尔模式”，因此 50% 噪声规则不应生效。我在 5.6.10 MySQL 上运行。我已经从我的 PHP 脚本和 mysql 命令行尝试了这些搜索。任何指导将不胜感激。

# python - 一种在python中制作函数列表的优雅方法

> ID：15640083
> 
> 赞同：1
> 
> 时间：2013-03-26T14:50:08.017
> 
> 标签：python, list

[编辑] 例如我有一个函数，我有不同的 y 值。

```
 def h(x):
    return x*y 
```

我尝试在我的列表中附加 h(x)，比如 y = 3。但是，当我将 y 更改为另一个值并在我的列表中再次附加 h(x) 时，我的第一个 h(x) 中的 y 也发生了变化。

例子：

```
>> func_list = []
>> def h(x):
>>    return x*y
>> y = 1
>> func_list.append(lambda x:h(x))
>> func_list[0](5)
>> 5
>> y = 2
>> func_list.append(lambda x:h(x))
>> func_list[1](5)
>> 10
>> func_list[0](5)
>> 10 
```

因为我不能制作很多具有不同 y 值的 h(x)，所以有什么好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:52:06.857

由于您`y`可能生活在一个闭包中（顺便说一句：一个*工作*最小的例子怎么样？），您必须在它周围包裹一层：

```
def mk_func(y):
    def h(x):
        return x * y
    return h 
```

接着

```
my_funcs=[mk_func(i) for i in (1, 3, 4, 7)] 
```

.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T14:52:20.003

你可以用[`functools.partial`](http://docs.python.org/2/library/functools.html#functools.partial)这个：

```
import functools

def h(y, x):
    return x * y

func_list = [functools.partial(h, y) for y in [1, 3, 5, 7, 9]]
print [f(3) for f in func_list] 
```

# xml - 使用 xslt 调整 XML 中的重复项

> ID：15640086
> 
> 赞同：1
> 
> 时间：2013-03-26T14:50:08.863
> 
> 标签：xml, xslt, xpath

我有一个如下的xml：

```
<?xml version="1.0" encoding="utf-8"?><Master>
<Account ID="38058226">
    <Property ID="66591454">
        <Profile ID="111234">\Acct_38058226\Prop_66591454\Prof_111234.xml</Profile>
    </Property>
</Account>
<Account ID="38058226">
    <Property ID="66591454">
        <Profile ID="22222222222">\Acct_38058226\Prop_66591454\Prof_22222222222.xml</Profile>
    </Property>
</Account>
<Account ID="38058226">
    <Property ID="66591455">
        <Profile ID="000000">\Acct_38058226\Prop_66591454\Prof_000000.xml</Profile>
    </Property>
</Account>
<Account ID="38058227">
    <Property ID="66591454">
        <Profile ID="000000">\Acct_38058226\Prop_66591454\Prof_000000.xml</Profile>
    </Property>
</Account>
</Master> 
```

我正在寻找的输出是：

```
<Master>
<Account ID="38058226">
    <Property ID="66591454">
        <Profile ID="111234">\Acct_38058226\Prop_66591454\Prof_111234.xml</Profile>
        <Profile ID="22222222222">\Acct_38058226\Prop_66591454\Prof_22222222222.xml</Profile>
    </Property>
    <Property ID="66591455">
        <Profile ID="000000">\Acct_38058226\Prop_66591454\Prof_000000.xml</Profile>
    </Property>
</Account>
<Account ID="38058227">
    <Property ID="66591454">
        <Profile ID="000000">\Acct_38058226\Prop_66591454\Prof_000000.xml</Profile>
    </Property>
</Account>
</Master> 
```

我正在使用 XSLT 1.0。xml 每天晚上都在不断扩展。我对 xml/xslt 很陌生。我花了几个小时研究它，但交付非常接近，因此寻求帮助。我得到的提示是我可能必须使用 Muenchian 分组，形成键和分组。我还在学习，还不能为自己创造逻辑。提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:02:39.373

这是一种方法。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:key 
    name="kAccounts"
    match="Account"
    use="@ID"/>
  <xsl:key
    name="kPropertiesByAccount"
    match="Property"
    use="parent::Account/@ID"/>
  <xsl:key
    name="kPropertiesByIdAndAccount"
    match="Property"
    use="concat(@ID, '+', parent::Account/@ID)"/>
  <xsl:key
    name="kProfileByPropertyAndAccount"
    match="Profile"
    use="concat(parent::Property/@ID, '+', ancestor::Account/@ID)"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <Master>
      <xsl:apply-templates
        select="Account[
          generate-id() = generate-id(key('kAccounts', @ID)[1])
        ]"/>
    </Master>

  </xsl:template>

  <xsl:template match="Account">
    <xsl:copy>
      <xsl:apply-templates
        select="@*|key(
          'kPropertiesByAccount', @ID)[
            generate-id() =
            generate-id(
              key('kPropertiesByIdAndAccount',
                concat(@ID, '+', parent::Account/@ID))[1])
          ]"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Property">
    <xsl:copy>
      <xsl:apply-templates
        select="@*|key(
          'kProfileByPropertyAndAccount',
           concat(@ID, '+', parent::Account/@ID))"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

**...针对提供的 XML 运行：**

```
<?xml version="1.0" encoding="UTF-8"?>
<Master>
  <Account ID="38058226">
    <Property ID="66591454">
      <Profile ID="111234">\Acct_38058226\Prop_66591454\Prof_111234.xml</Profile>
    </Property>
  </Account>
  <Account ID="38058226">
    <Property ID="66591454">
      <Profile ID="22222222222">\Acct_38058226\Prop_66591454\Prof_22222222222.xml</Profile>
    </Property>
  </Account>
  <Account ID="38058226">
    <Property ID="66591455">
      <Profile ID="000000">\Acct_38058226\Prop_66591454\Prof_000000.xml</Profile>
    </Property>
  </Account>
  <Account ID="38058227">
    <Property ID="66591454">
      <Profile ID="000000">\Acct_38058226\Prop_66591454\Prof_000000.xml</Profile>
    </Property>
  </Account>
</Master> 
```

**...产生了想要的结果：**

```
<Master>
  <Account ID="38058226">
    <Property ID="66591454">
      <Profile ID="111234">\Acct_38058226\Prop_66591454\Prof_111234.xml</Profile>
      <Profile ID="22222222222">\Acct_38058226\Prop_66591454\Prof_22222222222.xml</Profile>
    </Property>
    <Property ID="66591455">
      <Profile ID="000000">\Acct_38058226\Prop_66591454\Prof_000000.xml</Profile>
    </Property>
  </Account>
  <Account ID="38058227">
    <Property ID="66591454">
      <Profile ID="000000">\Acct_38058226\Prop_66591454\Prof_000000.xml</Profile>
    </Property>
  </Account>
</Master> 
```

请注意，Muenchian 分组（如使用`<xsl:key>`and所证明的那样`generate-id()`）确实是要走的路。

# javascript - javascript：取消选中所有复选框

> ID：15640087
> 
> 赞同：9
> 
> 时间：2013-03-26T14:50:09.850
> 
> 标签：javascript

我在处理取消选中所有复选框时遇到问题。当我单击切换所有复选框时，它可以选中所有复选框。但是，如果我取消选中全部切换复选框，则不会发生任何事情。所有复选框都未选中。以下是我在 javascript 中的编码：

```
<script>
var isAllCheck = false;
function togglecheckboxes(cn){

    var cbarray = document.getElementsByName(cn);
    for(var i = 0; i < cbarray.length; i++){

        if( isAllCheck == false ){
            cbarray[i].checked = "true";
            //alert( "it is false" );
        }else{ 
            cbarray[i].removeAttribute("checked");
            //alert( "it is true" );
        }
}   
isAllCheck = !isAllCheck;   
}
</script> 
```

我什至尝试过这种编码，但仍然失败：

```
<script>
var isAllCheck = false;
function togglecheckboxes(cn){

    var cbarray = document.getElementsByName(cn);
    for(var i = 0; i < cbarray.length; i++){

        if( isAllCheck == false ){
            cbarray[i].checked = "true";
            //alert( "it is false" );
        }else{ 
            cbarray[i].checked = "false";
            //alert( "it is true" );
        }
}   
isAllCheck = !isAllCheck;   
}
</script> 
```

以下是我的 PHP 编码供您参考：

```
echo "\t<div class='item'>
<span class='CDTitle'>{$cd['CDTitle']}</span>
<span class='CDYear'>{$cd['CDYear']}</span>
<span class='catDesc'>{$cd['catDesc']}</span>
<span class='CDPrice'>{$cd['CDPrice']}</span>
<span class='chosen'><input type='checkbox' name='cd[]' value='{$cd['CDID']}' title='{$cd['CDPrice']}' /></span>
</div>\n"; 
```

有关解决此问题的任何提示。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T15:01:43.610

问题归结为您如何设置`checked`checkox 的属性。您正在分配一个带有“true”的字符串，您应该在其中分配布尔值`true`。

所以修复你的代码很容易：

```
if( isAllCheck == false ){
    cbarray[i].checked = true;
}else{ 
    cbarray[i].checked = false;
} 
```

或者，更简洁地说

```
cbarray[i].checked = !isAllCheck 
```

现场示例：http: [//jsfiddle.net/SEJZP/](http://jsfiddle.net/SEJZP/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-08-17T19:16:01.520

**更新**

根据评论，`Array.from`在现代浏览器上不再需要，所以你可以这样做

```
document.querySelectorAll('input[type=checkbox]').forEach(el => el.checked = isAllCheck); 
```

**原始答案**

在用你的 UI 逻辑验证这`isAllCheck`是正确的之后，你可以用一个简单的 vanilla-js one-liner 来做这两个

```
Array.from(document.querySelectorAll('input[type=checkbox]')).forEach(el => el.checked = isAllCheck); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-08T12:48:26.860

```
function uncheckElements()
{
 var uncheck=document.getElementsByTagName('input');
 for(var i=0;i<uncheck.length;i++)
 {
  if(uncheck[i].type=='checkbox')
  {
   uncheck[i].checked=false;
  }
 }
}
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-25T22:27:19.197

您也可以将其设为布尔变量。

```
<script>
var isAllCheck = new Boolean(false);
function togglecheckboxes(cn){

var cbarray = document.getElementsByName(cn);
for(var i = 0; i < cbarray.length; i++){

    if(isAllCheck){ //and then you could make this shorter.
        cbarray[i].checked = true;
        //alert( "it is false" );
    }else{ 
        cbarray[i].removeAttribute("checked");
        //alert( "it is true" );
    }
}   
isAllCheck = !isAllCheck;   
}
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T14:52:05.930

尝试这个

```
 <script>
var isAllCheck = false;
function togglecheckboxes(master,cn){

    var cbarray = document.getElementsByName(cn);
    for(var i = 0; i < cbarray.length; i++){

        if( isAllCheck == false ){
            cbarray[i].checked = true;
            //alert( "it is false" );
        }else{ 
            cbarray[i].checked = false;
            //alert( "it is true" );
        }
}   
isAllCheck = !isAllCheck;   
}
</script> 
```

# php - 一个自动将新闻分类到页面的php脚本？

> ID：15640091
> 
> 赞同：-3
> 
> 时间：2013-03-26T14:50:12.660
> 
> 标签：php, html

我正在开发一个基于新闻的网站。问题是我希望我的网站像其他新闻网站一样。其中新闻有缩略图，如果没有空间，旧的新闻会转到下一页！我只是想对此有一个大致的了解。这种工作背后是否有某种编程（每次你想添加新闻时，程序会自动对其进行排序并给它一个缩略图），或者应该页面的管理员（以我为例）重写新闻的html文件？我希望我已经足够清楚我想要做什么了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:53:27.550

这叫做分页，我建议你做一些关于这个主题的阅读。没有人会给你所有的代码，你似乎不知道自己在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:53:34.817

是的，当您查询数据库时，您将希望`LIMIT`查询到一定数量的结果，并设置查询的开始和结束。[在此处](http://www.phpjabbers.com/php--mysql-select-data-and-split-on-pages-php25.html)查看教程

例子：

```
$sql = "SELECT * FROM students ORDER BY name ASC LIMIT 0, 20"; 
```

例如，当`next`单击按钮时，您的下一个查询可能如下所示：

```
$sql = "SELECT * FROM students ORDER BY name ASC LIMIT 20, 20";  -- Start from 20, and take 20 
```

您将使用一些服务器端语言来跟踪查询的开始和结束位置。

# ios - 目标 c 的 DES 加密

> ID：15640104
> 
> 赞同：2
> 
> 时间：2013-03-26T14:50:48.207
> 
> 标签：ios, objective-c, security, des

我正在尝试使用 DES 算法加密目标 c 中的数据。这是我的代码。我正在从这段代码中获取我的数据 :<> 和加密的 str: 。任何人都可以说有什么问题吗？

```
 NSString *token = @"hello world";
    const void *vplainText;
    size_t plainTextBufferSize;

    plainTextBufferSize = [token length];
    vplainText = (const void *) [token UTF8String];

    uint8_t *bufferPtr = NULL;
    size_t bufferPtrSize = 0;
    size_t *movedBytes;

    bufferPtrSize = (plainTextBufferSize + kCCBlockSize3DES) & ~(kCCBlockSize3DES - 1);
    bufferPtr = malloc( bufferPtrSize * sizeof(uint8_t));
    memset((void *)bufferPtr, 0x0, bufferPtrSize);

    NSString *key = [[NSString alloc] initWithString:@"12345678"];
    const void *vkey = (const void *) [key UTF8String];
    CCCryptorStatus cryptStatus =CCCrypt(
                            kCCEncrypt,         /* kCCEncrypt, etc. */
                            kCCAlgorithmDES,        /* kCCAlgorithmAES128, etc. */
                           kCCOptionPKCS7Padding | kCCOptionECBMode,    /*kCCOptionPKCS7Padding, etc. */
                            vkey,
                            kCCKeySizeDES,
                            NULL,           /* optional initialization vector */
                            vplainText,     /* optional per op and alg */
                            plainTextBufferSize,
                            (void *)bufferPtr,          /* data RETURNED here */
                            bufferPtrSize,
                            movedBytes);

    NSString *result;

    NSData *myData = [NSData dataWithBytes:(const void *)bufferPtr length:(NSUInteger)movedBytes];
    NSLog(@"my data :%@",myData);

    result = [self base64Encoding:myData];
    NSLog(@"enrypted str: %@",result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-03T23:45:13.913

示例代码...

```
- (void) testDES
{
    NSData * data = [OpenSSLProxy getRandomBytes:20]; // generate some random bytes
    NSData * key = [OpenSSLProxy getRandomBytes:kCCKeySizeDES];
    NSData * enc = [self encryptDESByKey:key data:data];
    NSData *dec = [self decryptDESByKey:key data:enc];
    STAssertEqualObjects(data, dec, @"");
}

- (NSData *)encryptDESByKey:(NSData *)key data:(NSData *)data
{
    size_t numBytesEncrypted = 0;
    size_t bufferSize = data.length + kCCBlockSizeDES;
    void *buffer = malloc(bufferSize);

    CCCryptorStatus result = CCCrypt( kCCEncrypt, kCCAlgorithmDES, kCCOptionPKCS7Padding,
                                     key.bytes, kCCKeySizeDES,
                                     NULL,
                                     data.bytes, data.length,
                                     buffer, bufferSize,
                                     &numBytesEncrypted);
    NSData *output = [NSData dataWithBytes:buffer length:numBytesEncrypted];
    free(buffer);
    if( result == kCCSuccess )
    {
        return output;
    } else {
        NSLog(@"Failed DES encrypt...");
        return nil;
    }
}

- (NSData *) decryptDESByKey:(NSData *)key data:(NSData *)data
{
   size_t numBytesEncrypted = 0;

    size_t bufferSize = data.length + kCCBlockSizeDES;
    void *buffer_decrypt = malloc(bufferSize);
    CCCryptorStatus result = CCCrypt( kCCDecrypt , kCCAlgorithmDES, kCCOptionPKCS7Padding,
                                     key.bytes, kCCKeySizeDES,
                                     NULL,
                                     data.bytes, data.length,
                                     buffer_decrypt, bufferSize,
                                     &numBytesEncrypted );

    NSData *output = [NSData dataWithBytes:buffer_decrypt length:numBytesEncrypted];
    free(buffer_decrypt);
    if( result == kCCSuccess )
    {
        return output;
    } else {
        NSLog(@"Failed DES decrypt ...");
        return nil;
    }
} 
```

# ibm-mobilefirst - Worklight 5.0.5：运行应用程序生成器时违反加载程序约束

> ID：15640108
> 
> 赞同：0
> 
> 时间：2013-03-26T14:50:59.223
> 
> 标签：ibm-mobilefirst, classloader

在 Worklight 应用程序的“全部构建并部署”期间，我收到以下错误。

```
An internal error occurred during: "Worklight application builder". 
loader constraint violation: when resolving method "org.apache.commons.io.FileUtils.iterateFiles(Ljava/io/File;Lorg/apache/commons/io/filefilter/IOFileFilter;Lorg/apache/commons/io/filefilter/IOFileFilter;)Ljava/util/Iterator;" 
the class loader (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader) 
of the current class, com/worklight/builder/skins/impl/SkinBuilderImpl, 
and the class loader (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader) 
for resolved class, org/apache/commons/io/FileUtils, 
have different Class objects for the type leUtils.iterateFiles(Ljava/io/File;Lorg/apache/commons/io/filefilter/IOFileFilter;Lorg/apache/commons/io/filefilter/IOFileFilter;)Ljava/util/Iterator; 
used in the signature 
```

控制台输出是

```
[2013-03-26 15:30:13]             Worklight Server started successfully on localhost:8080
[2013-03-26 15:30:13]             Activating Worklight project: AA...
[2013-03-26 15:30:28] FWLSE3005I: Application raw reports are disabled.
[2013-03-26 15:30:28] FWLST0010I: ====== Started server for project AA-project-customization; Worklight version=5.0.5.20130115-0926-developer-edition
[2013-03-26 15:30:28]             Activation done.
[2013-03-26 15:30:28]             Starting build process: application 'ap', all environments 
```

我相信这个错误也在[https://www.ibm.com/developerworks/forums/thread.jspa?threadID=465649](https://www.ibm.com/developerworks/forums/thread.jspa?threadID=465649)（只读）中讨论过

对我来说，这个错误似乎可以很好地重现。每次安装另一个包含/使用 org.apache.commons.io 包的插件时都会发生这种情况

就我而言，我的插件文件夹中有一个 org.apache.commons.io_2.0.1.v201105210651.jar（由 Sonar 2.4.0 提供）。它包含与 plugins\com.worklight.worklight-3rd-parties_5.0.5.20130115-0926\target\dependency 相同的 java 类。

这也是一个排序问题，因为只有在安装了另一个 org.apache.commons.io-using 包之后安装了 Worklight 时才会出现错误。

所以我坚信问题是因为有不同的类具有相同的（包）名称（为什么？？）我考虑过设置类加载器首选项（父优先等）。但我不知道如何设置，也不知道在哪里设置。

仅删除 3rd 方 .jar 只会导致其他错误...

非常感谢任何提示。非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:01:38.130

作为一种解决方法，您可以尝试从 Eclipse 中删除 commons.io 插件吗？希望 Sonar 使用的是 import-package 而不是 require-bundle，它会起作用，这样 Worklight 就不会发生冲突。

# python-3.x - 在 Linux Mint 上安装 Python

> ID：15640109
> 
> 赞同：2
> 
> 时间：2013-03-26T14:51:05.820
> 
> 标签：python-3.x, linux-mint

我一直在尝试在 Linux Mint 上安装 python3.3.0。阅读自述文件后，我运行了以下命令：

```
 ./configure
make
make test
sudo make install 
```

我运行了该`make test`命令，但它跳过了一些测试，说它找不到所需的模块并给出以下错误：

```
 FAIL: test_urlwithfrag (test.test_urllib2net.OtherNetworkTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/Python-3.3.0/Lib/test/test_urllib2net.py", line 165, in test_urlwithfrag
    "http://docs.python.org/glossary.html#glossary")
AssertionError: 'http://docs.python.org/2/glossary.html' != 'http://docs.python.org/glossary.html#glossary'
- http://docs.python.org/2/glossary.html
?                        --
+ http://docs.python.org/glossary.html#glossary
?  

                               +++++++++

Ran 15 tests in 58.905s

FAILED (failures=1, skipped=1)
test test_urllib2net failed
make: *** [test] Error 1 
```

请告诉我我需要做什么才能让 python 在我的系统上运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-14T18:48:19.127

你打算用 Python 做什么？（作为评论回复）

在系统本身上安装更新版本的 Python 是一个非常糟糕的主意，因为它可能会破坏操作系统的许多功能（因为操作系统是使用特定版本的 Python 构建的）。

我建议您考虑使用以下工具：

[https://github.com/utahta/pythonbrew](https://github.com/utahta/pythonbrew)（已弃用但仍然有效）

或者

[https://github.com/yyuu/pyenv](https://github.com/yyuu/pyenv)（推荐替代）

这些工具将像一种沙箱一样运行，并且可以在不破坏操作系统功能的情况下安装不同的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T05:09:46.933

[此处](http://bugs.python.org/issue16969)报告了该错误。

我遇到了同样的错误，python3 工作正常，但是，在安装之前，请安装以下依赖项。它将为您节省数小时的痛苦，因为我必须通过尝试让 tkinter 工作（请注意，以下几个不存在，但只是通过动作，因为我忘记了哪些不再相关）：

*   sudo apt-get install zlib1g-dev
*   sudo apt-get install build-essential
*   sudo apt-get install libncursesw5-dev
*   sudo apt-get install libreadline5-dev
*   sudo apt-get install libssl-dev
*   sudo apt-get install libgdbm-dev
*   sudo apt-get install libc6-dev
*   sudo apt-get install libsqlite3-dev
*   sudo apt-get install tk-dev
*   sudo apt-get install python-support

您仍然会收到有关 test_urllib2net 的相同错误，但它不会在将来阻止您（至少根据上面列出的错误报告我不这么认为）。

# shell - 使用 sed 无需写入文件

> ID：15640110
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:51:08.233
> 
> 标签：shell, redirect, sed, command, sh

我正在寻找一种绕过文件读写的方法。是否可以直接在命令结果上使用 sed？ `#!/bin/sh`使用了，因为我使用了 NetBSD，`sed -i`所以我必须使用`sed -e`然后将结果重定向到文件。

命令的结果`disklabel xbd0`

```
netbsd# disklabel xbd0 >/file ;
# /dev/rxbd0d:
type: unknown
disk: xbd0
label: 
flags:
bytes/sector: 512
sectors/track: 2048
tracks/cylinder: 1
sectors/cylinder: 2048
cylinders: 1000
total sectors: 2048000
rpm: 3600
interleave: 1
trackskew: 0
cylinderskew: 0
headswitch: 0           # microseconds
track-to-track seek: 0  # microseconds
drivedata: 0 

16 partitions:
#        size    offset     fstype [fsize bsize cpg/sgs]
 a:   2048000         0     4.2BSD   1024  8192     0  # (Cyl.      0 -    999)
 c:   2048000         0     unused      0     0        # (Cyl.      0 -    999)
 d:   2048000         0     unused      0     0        # (Cyl.      0 -    999)

netbsd# disklabel xbd0 | sed -e "s/match1/replace/" \
-e "s/match2/replace/" \
-e "s/match3/replace/" /file > /file.1 ; 
```

如何在另一个命令中发送结果？

```
$ new_command -add $(results) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:00:39.757

您已经成功地将 to 的结果通过管道`disklabel`传输`sed`。那么为什么不直接将结果`sed`传递给 new_command 呢？

```
disklabel xbd0 | sed -e "s/match/replace/" | new_command 
```

例如，将 sed 的输出通过管道传输到`sort`，然后将其输出通过管道传输到`grep`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-13T08:05:47.560

> 如何在另一个命令中发送结果？作为`$ new_command -add $(results)`

如果这真的是您的意思，您可以使用以下`xarg`命令来实现：

```
disklabel xbd0 | sed -e "s/match/replace/" | xargs new_command -add 
```

请注意，这`xargs`会破坏您在空格处的输入，如果您只想要一个大参数，您可以使用`xargs -0`.

很可能最好进行设计`new_command`，使其从`stdin`辅助管道获取输入并通过该输入传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:09:10.567

在您的代码中，您尝试将命令的输出重定向到 /file，除非您以超级用户身份执行此操作，否则您将获得 "permission denied" 。要将一个命令的结果发送到另一个命令，请执行以下操作：

```
command2 `command1` #if command2 needs output of command1 as an argument 
```

或者

```
command2 $(command1)  #if command2 needs output of command1 as an argument 
```

# javascript - Tinymce 无法从服务器在 IE 中工作

> ID：15640119
> 
> 赞同：1
> 
> 时间：2013-03-26T14:51:31.433
> 
> 标签：javascript, internet-explorer, tinymce

我有一个 Rails 应用程序，它使用 Tinymce 允许用户从多种形式写帖子。

它在 Firefox 和 chrome 中完美运行，但在 IE 中不起作用。我可以假设，但问题是......当我在我的开发环境中尝试它时，它在 IE 中运行良好。

当我尝试从服务器使用这些表单时，我收到以下错误：

```
 SCRIPT438: Object doesn't support this property or method 'parentElement',
tiny_mce.js?1364308119 line 1 character 41026 
```

我知道这不是太具体，但我希望有人在 8-) 之前遇到这个问题

Tinymce 版本是 3。

提前致谢

# ruby-on-rails - ActiveModel::MassAssignmentSecurity::Error: / Can't mass-assign protected attributes: user

> ID：15640123
> 
> 赞同：3
> 
> 时间：2013-03-26T14:51:38.290
> 
> 标签：ruby-on-rails

我正在阅读 Michael Hartl 的 Ruby on Rails 教程，并且正在为用户建模。User_spec.rb 测试失败，我对错误的解读是，由于某种原因，这些属性没有被读取为可访问的，尽管代码说它们应该是。我也完成了 rake db:test:prepare 。任何帮助将不胜感激。

用户模型很简单。

应用程序/模型/user.rb

```
class User < ActiveRecord::Base
  attr_accessible :name, :email

end 
```

在 spec/models/user_spec.rb 的测试是这样的：

```
require 'spec_helper'

describe User do

    before { @user = User.new(user: "Example User", email: "user@example.com") }

    subject { @user }

    it { should respond_to(:name) }
    it { should respond_to(:email) }

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:55:48.513

应该`name`不是`user`...请检查以下内容

```
require 'spec_helper'

describe User do

  before { @user = User.new(name: "Example User", email: "user@example.com") }

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }
end 
```

`Example User`您在使用for创建新记录时犯了错误`user`。应该是`name`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:53:31.910

您想通过批量分配更新的任何内容都需要在您的`attr_accessible`.

改变这个

```
class User < ActiveRecord::Base
  attr_accessible :name, :email

end 
```

对此：

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :user

end 
```

虽然`user`看起来不像是正确的属性名称。也许应该是`username`？

# html - 为什么我的元素没有以正确的方式浮动？

> ID：15640126
> 
> 赞同：0
> 
> 时间：2013-03-26T14:51:43.397
> 
> 标签：html, css, css-float, wrapper

这是我的网站：

[http://violetoeuvre.com/](http://violetoeuvre.com/)

我很困惑为什么我的代码没有按照我想要的方式运行。我希望侧包装（side_nav_wrapper）位于页面的左侧，左边距约为 200 像素。这在我没有指定浮点数时有效。（如果我指定float：left；它不应该工作吗？）

然后我希望照片框（home_photo）浮动到它的右侧。（基本上它会从 Carmichael 中的 C 开始）。但是，它一直被推到底部。我尝试了各种浮动场景，但无法弄清楚。

我希望文本框 (home_text) 位于照片框下方和侧面导航的右侧。为什么这不起作用！

（黑色和白色的顶部包装工作得很好）

提前致谢。这是我的CSS：

```
/* Wrapper - Main *********/

.top_wrapper{ 
        display:block;
        background: rgba(0,0,0,1);
        width:100%;
        height: 200px;
        margin-top: 0px;
}

.top_emma {
    float:left;
    width:600px;
    height: 100px;
    padding-left: 100px;
    padding-top: 121px;
}

/* Top Navigation *********/

.wrapper_nav_box { 
        float: left;
        width:686px;
        height: 200px;
        background-color: rgba(255,255,255,0);
        margin-left: 10px;
}

.nav_box_l {
    display: block;
    float:left;
    width:247px;
    text-align: right;
    padding-top: 169px;
}

.nav_box_m {
    display: block;
    float:left;
    width:165px;
    text-align: center;
    padding-top: 169px;
}

.nav_box_r {
    display: block;
    float:left;
    width:219px;
    text-align: left;
    padding-right: 40px;
    padding-top: 169px;
}

/* Side Navigation ***********************/

.side_nav_wrapper {
        display:block;
        background: rgba(255,255,0,.5);
        width:200px;
        height: 2000px;
        margin-left: 104px;
}

.side_nav_about {
        display:block;
        float:left;
        background: rgba(255,0,255,.5);
        width:200px;
        height: 100px;
}

.side_nav_writing {
        display:block;
        float:left;
        background: rgba(0,255,255,.5);
        width:200px;
        height: 200px;
}

.side_nav_contact {
        display:block;
        float:left;
        background: rgba(100,255,255,.5);
        width:200px;
        height: 200px;
}
/* Photo Box on Home Page ************************/

.home_photo { 
        display:block;
        float: right;
        width: 980px;
        height: 400px;
        background: rgba(0,0,255, .5);
        margin-left: 322px;

}

/* Text Box on Home Page */

.home_text{ 
        display:block;
        background: rgba(255,255,255,0);
        width:980px;
        height: 250px;
        margin-left: 322px;

} 
```

和html：

```
<div class="top_wrapper">

<!-- Top _____________________________________________________-->

    <div id="emma_home" class="top_wrapper">
            <div class="top_emma">
                <a href="index.html">Emma Carmichael</a>
            </div>

        <!--- Top Navigation Menu ______________________________________________-->

        <div class="wrapper_nav_box">
            <div class="nav_box_l" id="nav_menu">
                <a href="writing.html">WRITING  |</a> 
            </div>
            <div class="nav_box_m" id="nav_menu">
                <a href="http://tumblr.com">BLOG  |</a>
            </div>
            <div class="nav_box_r" id="nav_menu">
                <a href="contact.html">CONTACT</a>
            </div>
        </div>
    </div>

<!-- Side Navigation__________________________________-->
    <div class="side_nav_wrapper">
        <div class="side_nav_about">about</div>
        <div class="side_nav_writing">writing</div>
        <div class="side_nav_contact">contact</div>
    </div>
<!-- Photo __________________________________________-->

    <div class="home_photo">
    </div>

<!-- About___________________________________________________-->

    <div class="home_text">
        <p>Emma Carmichael is a writer and editor based in Brooklyn, NY, although she hails from Brattleboro, VT. Emma graduated from Vassar College in 2010 with a degree in Urban Studies; the theme of her thesis about contextualizing female rappers, “XXX,” was prescient of her interest in writing about women in the media at The Awl and elsewhere. A point guard for Vassar’s Basketball team from 2006 – 2008, Carmichael has also explored sports writing and women in sports as a writer and then editor at Deadspin.com, a child of Gawker Media. From March 2012 to March 2013, Emma was the managing editor of Gawker.com, a new position at the site; she currently holds the position of Managing Editor at Deadspin.com.
    </p>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:58:28.507

**编辑：**

现在我想起来了，您可能忘记关闭了`top_wrapper`，因为您的布局似乎在`div`某处缺少结束标记。因此，“快速修复”将是执行我在下面推荐的操作，但实际上您应该`HTML`首先尝试验证。

由于`side_nav_wrapper`放置**在内部** `top_wrapper`（可能需要重新考虑），因此您还需要添加一个`float: left`to`top_wrapper`以使侧边栏以您想要的方式向左浮动。

```
.top_wrapper{
display: block;
background: rgba(0,0,0,1);
width: 100%;
height: 200px;
margin-top: 0px;
float: left;
} 
```

# android - 检查设备支持的 PCM 采样率

> ID：15640131
> 
> 赞同：0
> 
> 时间：2013-03-26T14:51:50.110
> 
> 标签：android, audiorecord, sample-rate

我想检查设备是否支持特定的采样率。

我已经尝试了以下（它应该根据[http://developer.android.com/reference/android/media/AudioRecord.html#getMinBufferSize(int](http://developer.android.com/reference/android/media/AudioRecord.html#getMinBufferSize(int) , int, int) 工作）但没有（它永远不会得到AudioRecord。 ERROR_BAD_VALUE）：

```
 int bufferSize8000 = AudioRecord.getMinBufferSize(90000000, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT);

    if(bufferSize8000 != (AudioRecord.ERROR_BAD_VALUE | AudioRecord.ERROR ))    {
        Log.v("samplerate", String.valueOf(bufferSize8000));
    } else {

        Log.v("samplerate", "NOTsupported");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:17:36.637

```
(AudioRecord.ERROR_BAD_VALUE | AudioRecord.ERROR ) 
```

表示-2 | -1，等于 -1，等于`AudioRecord.ERROR`，这就是为什么你永远不会得到你期望的结果。

所以这

```
if(bufferSize8000 != (AudioRecord.ERROR_BAD_VALUE | AudioRecord.ERROR ))    { 
```

应该

```
if (bufferSize8000 != Audiorecord.ERROR_BAD_VALUE && bufferSize8000 != AudioRecord.ERROR) { 
```

# r - 将 POSIXct 对象强制为 Date 对象

> ID：15640133
> 
> 赞同：4
> 
> 时间：2013-03-26T14:51:57.647
> 
> 标签：r, xts, zoo, quantmod, posixct

可重现的代码：

```
# Loading quantmod

library(quantmod)

# Please, put in R this structure

a <- structure(c(2.4, 2.35, 2.44, 2.44, 2.31, 2.32, 2.41, 2.43, 2.46, 
            2.42, 2.45, 2.39, 2.3, 2.41, 2.33, 2.37, 2.38, 2.4, 2.275, 2.235, 
            -0.0300000000000002, -0.0499999999999998, 0.0899999999999999, 
            0, -0.13, 0.00999999999999979, 0.0900000000000003, 0.02, 0.0299999999999998, 
            -0.04, 0.0300000000000002, -0.0600000000000001, -0.0900000000000003, 
            0.11, -0.0800000000000001, 0.04, 0.00999999999999979, 0.02, -0.125, 
            -0.04, 2.75684036527164, 2.80336038090653, 2.85070650150373, 
            2.80638610182307, 2.78192004966867, 2.75238601492226, 2.72915916431245, 
            2.7324175575505, 2.77446196662146, 2.78562833574758, 2.90799335924598, 
            2.96217549002515, 2.93863268151342, 2.86048512414597, 2.89259151463448, 
            2.94864066602014, 2.88926002904347, 2.86619290219901, 2.83438912314523, 
            2.7868613815265, -0.0410505398303571, 0.0465200156348926, 0.0473461205971986, 
            -0.0443203996806614, -0.0244660521544064, -0.0295340347464039, 
            -0.0232268506098166, 0.00325839323805921, 0.0420444090709573, 
            0.0111663691261232, 0.1223650234984, 0.0541821307791639, -0.02354280851173, 
            -0.078147557367453, 0.0321063904885124, 0.0560491513856629, -0.0593806369766661, 
            -0.0230671268444684, -0.031803779053778, -0.0475277416187283, 
            0.172217775014356, 0.147897402545627, 0.107842980922542, 0.111384630261207, 
            0.116199395018325, 0.119482271409344, 0.130753386099011, 0.119444345583785, 
            0.101923549299963, 0.1002890717992, 0.032754605975247, 0.00669932935895989, 
            0.0105319562242379, 0.0453224418800389, 0.0294942187512146, -0.0142520227072014, 
            0.0285107030408045, 0.0335789802090738, 0.0520861644718136, 0.0759107647712609, 
            0.0100035842055157, -0.0243203724687295, -0.0400544216230849, 
            0.0035416493386653, 0.00481476475711817, 0.00328287639101843, 
            0.0112711146896673, -0.0113090405152261, -0.0175207962838217, 
            -0.00163447750076351, -0.0675344658239525, -0.0260552766162871, 
            0.00383262686527797, 0.034790485655801, -0.0158282231288243, 
            -0.043746241458416, 0.0427627257480059, 0.0050682771682693, 0.0185071842627398, 
            0.0238246002994473, -0.0191994306395253, -0.0205181532675806, 
            -0.0249013268238319, -0.0237728532488024, 0.023560859824188, 
            0.0493604748650355, -0.0226612828685699, -0.0242381517516994, 
            -0.0229683470958784, 0.0193184371423425, -0.0146720746595668, 
            -0.0103171513510591, -0.0153945062856312, -0.0207074718973363, 
            0.113843134319118, -0.017036109656239, 0.00401445822575002, -0.0152979313119177, 
            -0.00168455008690644, 0.0234396377388245), .indexTZ = "", .indexCLASS = c("POSIXct", 
                                                                                      "POSIXt"), tclass = c("POSIXct", "POSIXt"), tzone = "", na.action = structure(1L, class = "omit", index = 1090364400), class = c("xts", 
                                                                                                                                                                                                                       "zoo"), index = structure(c(1090450800, 1090537200, 1090796400, 
                                                                                                                                                                                                                                                   1090882800, 1090969200, 1091055600, 1091142000, 1091401200, 1091487600, 
                                                                                                                                                                                                                                                   1091574000, 1091660400, 1091746800, 1092006000, 1092092400, 1092178800, 
                                                                                                                                                                                                                                                   1092265200, 1092351600, 1092610800, 1092697200, 1092783600), tzone = "", tclass = c("POSIXct", 
                                                                                                                                                                                                                                                                                                                                       "POSIXt")), .Dim = c(20L, 7L), .Dimnames = list(NULL, c("Inflation", 
                                                                                                                                                                                                                                                                                                                                                                                               "dInflation", "Fear", "dFear", "Greed", "dGreed", "Growth")))
# These are 'a' dates

index(a)

# You can see it is a POISXct object whose last element is equal to 
# "2004-08-18 01:00:00 CEST"

is(index(a))

# Coercing to Date object

as.Date(index(a))

# Last element goes back by 1 day to "2004-08-17" 
```

从代码中您可以看到，当我尝试将 POSIXct 对象强制为 Date 对象时，每个日期都会返回 1 天。

我想在运行此代码时保留原始日期：我应该在我的代码中修改什么？

这些是我的会话信息：

```
R version 2.15.2 (2012-10-26)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] parallel  stats     graphics  grDevices datasets  utils     methods   base     

other attached packages:
 [1] quantmod_0.4-0             TTR_0.21-1                 Defaults_1.1-1            
 [4] PerformanceAnalytics_1.1.0 Matrix_1.0-11              lattice_0.20-13           
 [7] MASS_7.3-23                Rsolnp_1.14                truncnorm_1.0-6           
[10] numDeriv_2012.9-1          xts_0.9-3                  zoo_1.7-9                 
[13] RcppArmadillo_0.3.6.3      Rcpp_0.10.2                rcom_2.2-5                
[16] rscproxy_2.0-5            

loaded via a namespace (and not attached):
[1] grid_2.15.2        rmgarch_1.00-4     rugarch_1.01-5     timeDate_2160.97  
[5] timeSeries_2160.95 tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:55:32.210

我认为您只需将您的时区添加到转换中。你有没有尝试过...

```
as.Date(index(a) , tz = "CET")
 [1] "2004-07-22" "2004-07-23" "2004-07-26" "2004-07-27" "2004-07-28"
 [6] "2004-07-29" "2004-07-30" "2004-08-02" "2004-08-03" "2004-08-04"
 [11] "2004-08-05" "2004-08-06" "2004-08-09" "2004-08-10" "2004-08-11"
 [16] "2004-08-12" "2004-08-13" "2004-08-16" "2004-08-17" "2004-08-18"

index(a)
[1] "2004-07-22 BST" "2004-07-23 BST" "2004-07-26 BST" "2004-07-27 BST"
[5] "2004-07-28 BST" "2004-07-29 BST" "2004-07-30 BST" "2004-08-02 BST"
[9] "2004-08-03 BST" "2004-08-04 BST" "2004-08-05 BST" "2004-08-06 BST"
[13] "2004-08-09 BST" "2004-08-10 BST" "2004-08-11 BST" "2004-08-12 BST"
[17] "2004-08-13 BST" "2004-08-16 BST" "2004-08-17 BST" "2004-08-18 BST" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T15:02:18.093

这是一个时区问题。您需要设置索引和/或系统`TZ`环境变量的时区。

```
Sys.setenv(TZ="Europe/Berlin")
indexTZ(a) <- "Europe/Berlin"
as.Date(index(a)) 
```

`TZ`在处理日期/时间对象时，最好设置系统环境变量。

# yii - Yii - 重新加载动态添加的 CGridView

> ID：15640135
> 
> 赞同：0
> 
> 时间：2013-03-26T14:52:03.697
> 
> 标签：yii, cgridview

如果通过ajax附加到页面CGridView（'myGridViewID'），我无法重新加载它。
$.fn.yiiGridView.update('myGridViewID');

> 类型错误：设置未定义
> 
> $grid.addClass(settings.loadingClass);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T16:14:07.223

在控制器动作中使用 renderPartial：

```
$cs = Yii::app()->clientScript;
$cs->reset();
$cs->scriptMap = array(
    'jquery.js'  =>  false,   // prevent produce jquery.js in additional javascript data
);

// Look at 4th parameter: with TRUE value, your view will have additional javascript data.
$this->renderPartial('_partialViewWithGrid', array(), false, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T20:56:42.620

这是同一视图中动态[CgridViews的 wiki。](http://www.yiiframework.com/wiki/323/dynamic-parent-and-child-cgridview-on-single-view-using-ajax-to-update-child-gridview-via-controller-after-row-in-parent-gridview-was-clicked)那应该行得通。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-26T15:26:56.130

动态加载的 CGridViews（以及包含 ajax 的所有内容）的问题是 CController::renderPartial() 不会呈现所需的 javascript 代码以使其正常工作，这与包含所需布局和 JS 的 CController::render() 不同。

有[一个名为 ZController 的扩展程序](http://www.yiiframework.com/forum/index.php/topic/10427-ajax-clientscript/)提供了解决此问题的方法，但由于重新加载 CGridviews 的方式（通过对同一 URL 进行 ajax 调用）...当您尝试过滤/排序/分页通过 AJAX 加载的 CGridView ，随后的 Ajax 调用将替换您浏览器窗口的全部内容，但老实说，我认为**也许**（*只是也许*）[这种解决方法](http://www.yiiframework.com/wiki/163/avoiding-rendering-entire-page-when-using-cgridview-and-clistview-via-ajax/)可能会有所帮助，但我没有时间尝试它。

这就是我目前*避免使用 AJAX 加载 CGridViews*的原因。

# c# - GridView 项上的 Winrt IValueConverter

> ID：15640140
> 
> 赞同：0
> 
> 时间：2013-03-26T14:52:11.550
> 
> 标签：c#, gridview, windows-runtime, ivalueconverter

我有一个`ObservableCollection<TimeSpan> Laps`数据绑定到gridview。这按预期工作，但我需要应用转换器来设置格式`TimeSpan`：

在我的资源中：

```
<utils:TimeToStringConverter x:Key="myConverter"/> 
```

我的网格视图：

```
<GridView HorizontalAlignment="Left" Height="278" Margin="78,220,0,0" VerticalAlignment="Top" Width="1278" ItemsSource="{Binding model.Laps}" /> 
```

我有以下转换器，我想将其应用于 Winrt 中的 GridView / ListView 的项目：

```
public class TimeToStringConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        TimeSpan t = (TimeSpan) value;

        return t.ToString(@"hh\:dd\:ss\.fff");

    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

我不知道如何让转换器工作，当我应用它时，`GridView`它正在寻找我转换一个 Observable 集合而不仅仅是一个 TimeSpan 项目。我应该在这里做什么？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:15:09.067

你需要类似的东西

```
<GridView
    ...>
    <GridView.ItemTemplate>
        <DataTemplate>
            <TextBlock
                Text="{Binding Converter={StaticResource myConverter}}" />
        </DataTemplate>
    </GridView.ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T14:58:13.423

使用下面的修改行

我刚刚修改了项目来源，如下所示

```
ItemsSource="{Binding model.Laps,Converter={StaticResource myConverter}}"

<GridView HorizontalAlignment="Left" Height="278" Margin="78,220,0,0" VerticalAlignment="Top" Width="1278" ItemsSource="{Binding model.Laps,Converter={StaticResource myConverter}}" /> 
```

# matlab - Matlab：一维热扩散模型中的时间步长稳定性

> ID：15640147
> 
> 赞同：0
> 
> 时间：2013-03-26T14:52:27.183
> 
> 标签：matlab, time, heat

我在 Matlab 中有一个 1D 热扩散代码，我在 10 年的时间尺度上使用它，我现在正尝试使用相同的代码在数百万年的尺度上工作。显然，如果我保持我的时间步长相同，这将需要很长时间来计算，但如果我增加我的时间步长，我会遇到数值稳定性问题。

我的问题是：

我应该如何解决这个问题？什么影响最大稳定时间步长？我该如何计算呢？

非常感谢，

亚历克斯

```
close all
clear all

dx = 4;    % discretization step in m
dt = 0.0000001; % timestep in Myrs
h=1000;        % height of box in m
nx=h/dx+1;
model_lenth=1; %length of model in Myrs
nt=ceil(model_lenth/dt)+1;     % number of tsteps to reach end of model
kappa = 1e-6; % thermal diffusivity
x=0:dx:0+h;     % finite difference mesh
T=38+0.05.*x;  % initial T=Tm everywhere ...
time=zeros(1,nt);
t=0;
Tnew = zeros(1,nx);

%Lower sill
sill_1_thickness=18;
Sill_1_top_position=590;
Sill_1_top=ceil(Sill_1_top_position/dx);
Sill_1_bottom=ceil((Sill_1_top_position+sill_1_thickness)/dx);

%Upper sill
sill_2_thickness=10;
Sill_2_top_position=260;
Sill_2_top=ceil(Sill_2_top_position/dx);
Sill_2_bottom=ceil((Sill_2_top_position+sill_2_thickness)/dx);

%Temperature of dolerite intrusions
Tm=1300;

T(Sill_1_top:Sill_1_bottom)=Tm; %Apply temperature to intrusion 1

% unit conversion to SI:
secinmyr=24*3600*365*1000000;   % dt in sec
dt=dt*secinmyr;

%Plot initial conditions
figure(1), clf
f1 = figure(1); %Make full screen
set(f1,'Units', 'Normalized', 'OuterPosition', [0 0 1 1]); 
plot (T,x,'LineWidth',2)
xlabel('T [^oC]')
ylabel('x[m]')
axis([0 1310 0 1000])
title(' Initial Conditions')
set(gca,'YDir','reverse');

%Main calculation
for it=1:nt

  %Apply temperature to upper intrusion
  if it==10;  
      T(Sill_2_top:Sill_2_bottom)=Tm; 
  end

  for i = 2:nx-1
      Tnew(i) = T(i) + kappa*dt*(T(i+1) - 2*T(i) + T(i-1))/dx/dx;
  end

  Tnew(1) = T(1);
  Tnew(nx) = T(nx);

  time(it) = t;

  T = Tnew; %Set old Temp to = new temp for next loop
  tmyears=(t/secinmyr);

  %Plot a figure which updates in the loop of temperature against depth
  figure(2), clf
  plot (T,x,'LineWidth',2)
  xlabel('T [^oC]')
  ylabel('x[m]')
  title([' Temperature against Depth after ',num2str(tmyears),' Myrs'])
  axis([0 1300 0 1000])
  set(gca,'YDir','reverse');%Reverse y axis

  %Make full screen     
  f2 = figure(2); 
  set(f2,'Units', 'Normalized', 'OuterPosition', [0 0 1 1]); 

  drawnow

  t=t+dt;
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:43:28.680

The stability condition for an explicit scheme like FTCS is governed by $r = K dt/dx^2 < 1/2$ or $dt < dx^2/(2K)$ where K is your coefficient of diffusion. This is required in order to make the sign of the 4th order derivative leading truncation error term be negative.

If you do not want to be limited by timestep I suggest using an implicit scheme (albeit at a higher of computational cost than an explicit scheme). This can be achieved simply by using backward Euler for the diffusion term instead of forward Euler. Another option is Crank-Nicholson which is also implicit.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-17T22:42:30.573

@Isopycnal 振荡是完全正确的，因为最大稳定步长在显式方案中受到限制。仅供参考，这通常称为离散傅立叶数或只是傅立叶数，可以针对不同的边界条件进行查找。以下内容也可以帮助您推导隐式或 Crank-Nicholson 方案，并提到[Gerald W. Recktenwald 的热方程的稳定性有限差分近似](http://www.nada.kth.se/~jjalap/numme/FDheat.pdf)。

抱歉，我还没有代表添加评论

# ubuntu - 如何将 GraphicsMagick 与应用程序捆绑在一起？

> ID：15640149
> 
> 赞同：5
> 
> 时间：2013-03-26T14:52:30.793
> 
> 标签：ubuntu, deployment, build, web-deployment, graphicsmagick

我想将 GraphicsMagick`gm`二进制文件的独立版本与应用程序捆绑在一起，这样我就不必在应该运行应用程序的服务器上构建和安装 GraphicsMagick 库。

## 细节

我正在创建一个构建系统，它可以生成一个包含整个 node.js 应用程序的 tar-ball，其中包括所有二进制依赖项（在我们的例子中是`node`二进制文件和 GraphicsMagick 库）。然后它将其上传到服务器，提取并运行它。

我试图将它与预编译的`gm`二进制文件一起发布，但正如预期的那样，它`gm`依赖于几个库，所以我得到了类似`gm: error while loading shared libraries: libGraphicsMagick.so.3: cannot open shared object file: No such file or directory`.

我在本地运行 OSX，我们的服务器运行 Ubuntu。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T16:15:36.023

一种解决方案是从源代码构建 GraphicsMagick 并使用选项 --disable-shared --disable-installed 进行配置。这将产生一个静态的可重定位可执行文件，它只依赖于系统上已有的共享库。通过“make DESTDIR=/tmp/gminstalldir install”之类的方式安装到用于打包的临时目录中。您还需要评估哪些库在目标操作系统上作为标准可用（以便可以依赖它们），并添加配置选项以禁用那些不能保证可用的库，或者链接到库的静态版本所以它包含在“gm”二进制文件中。

另一个解决方案是获取库存的“gm”二进制文件并创建一个 shell 脚本包装器，该包装器设置某些环境变量（例如 LD_LIBRARY_PATH），以便它仍然可以运行。这种方法会增加一些运行时开销，并且需要一些试验/错误才能使其正常工作。

# javascript - jquery手风琴激活不起作用

> ID：15640153
> 
> 赞同：9
> 
> 时间：2013-03-26T14:52:39.203
> 
> 标签：javascript, jquery, html, jquery-ui, accordion

我有一个`accordion`这样的

```
<div id="accordion">
    <h3 id="idname1">text</h3>
    <div>
        Text TEXT text
    </div>
    <h3 id="idname2">text</h3>
    <div>
        Text TEXT text
    </div>
    <h3 id="idname3">text</h3>
    <div>
        Text TEXT text
    </div>
</div> 
```

现在我希望人们单击一个链接（在页面顶部），然后该面板将打开，人们现在每次调用我的函数时都会看到它

```
$('.myclass').click(function() {
    // this is to open the right pannel 
    var getal = $(this).attr('id');
    alert(getal); // i get the right name

    $("#accordion").accordion('activate', 1);
}); 
```

我的控制台给了我这个错误

> 错误：手风琴小部件实例没有这样的方法“激活”

我不知道问题出在哪里，我尝试了很多不同的方法，但都没有奏效。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-26T15:00:32.147

我认为您正在寻找以编程方式打开手风琴窗格。如果是这样，你想要这样的东西：

```
$("#accordion").accordion("option", "active", 1); 
```

（假设您使用的是 jQuery UI 库）

[http://api.jqueryui.com/accordion/#option-active](http://api.jqueryui.com/accordion/#option-active)

请注意，这将打开第二个手风琴窗格，因为选项接受基于 0 的整数。（0 是第一，1 是第二，等等）。所以只要确保你将正确的整数传递给方法调用:)

您的代码不起作用的原因是 jQuery UI 团队刚刚删除了`activate`v1.10 中的方法，并特别推荐使用我提供的方法：http: [//jqueryui.com/upgrade-guide/1.10/#re ​​moved-activate-method -使用主动选项](http://jqueryui.com/upgrade-guide/1.10/#removed-activate-method-use-active-option)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T15:06:22.943

像这样激活它

```
$( "#accordion" ).accordion( "option", "active", 0 ); 
```

仅启用/禁用用于该目的的方法。

```
$("#accordion" ).accordion( "enable" );
$("#accordion" ).accordion( "disable" ); 
```

要在第一次初始化后访问手风琴的选项，请使用选项对象。

```
$("#accordion").accordion( "option", "disabled", true ); // set
var x = $("#accordion").accordion( "option", "disabled"); // get 
```

查看 API [http://api.jqueryui.com/accordion/](http://api.jqueryui.com/accordion/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-26T15:01:59.087

这应该有效，但是，它不会动画：

```
$('.myclass').click(function () {
         // this is to open the right pannel 
         var getal = $(this).attr('id');
         alert(getal); // i get the right name

         $("#accordion").accordion('option', 'active', 1);
     }); 
```

您尝试在 1.9.x 中使用 WAS 但在 1.10.x 中删除的方法 [http://api.jqueryui.com/accordion/#option-active](http://api.jqueryui.com/accordion/#option-active)

# php - CakePHP：shell脚本的键“PRIMARY”的重复条目

> ID：15640155
> 
> 赞同：0
> 
> 时间：2013-03-26T14:52:41.810
> 
> 标签：php, mysql, cakephp, cakephp-2.0, rets

我正在创建一个房地产网站，每个列表都附加了列表 ID。我正在通过 CakePHP 中的 shell 运行一个脚本，该脚本正在解析一个 csv 文件，并且应该更新任何已经存在的列表，或者如果不存在则插入一个新列表。

问题是我不断得到一个`Duplicate entry '###' for key "PRIMARY'`where ### 是 CSV 提供的列表 ID。此脚本正在从命令行运行。

这是我的表包含的较小版本：

```
CREATE TABLE `listings` (
  `ListingID` int(11) NOT NULL,
  `AccessibilityYN` varchar(50) DEFAULT NULL COMMENT 'AccessibilityYN',
  `BathsFull` int(6) DEFAULT NULL COMMENT 'BathsFull',
  `BathsPartial` int(6) DEFAULT NULL COMMENT 'BathsPartial',
  `BathsTotal` decimal(5,1) DEFAULT NULL COMMENT 'BathsTotal',
  `Beds` int(11) DEFAULT NULL COMMENT 'Beds',
  PRIMARY KEY (`ListingID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

这是我的列表模型（注意我有`public $primaryKey = 'ListingID';`）

```
class Listing extends AppModel {
    public $name = 'Listing';
    public $primaryKey = 'ListingID'; 
    public $belongsTo = array(
        'Agent' => array(
            'className'    => 'Agent',
            'foreignKey'   => 'AgentID'
        )
    );
} 
```

这是我通过命令行运行的 shell：

```
class MyShell extends AppShell {

    public $uses = array('Listing');

    public function update_imported_listings() {

       /***SOME CODE HERE TO GET THE $entry FROM THE CSV***/

        $this->Listing->ListingID = $entry['ListingID'];

        if(!$this->Listing->exists()){
            $this->Listing->create();
        }

        if($this->Listing->save($entry)){
          echo "Saved Listing";
        } else {
          echo "Listing Failed";
        }
    }
} 
```

我知道 CakePHP 通常喜欢`id`作为数据库中使用的字段，但是我已经`$primaryKey = 'ListingID'`在我的模型中设置了。我尝试`Auto Increment`在数据库中将 ListingID 设置为，但这没有用。

有人有什么想法吗？我很新鲜。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:58:18.580

## 设置 ListingID 没有任何作用

这条线是你的问题：

> `$this->Listing->ListingID = $entry['ListingID'];`.

无论您的实际主键字段在数据库中是什么，主键值始终使用`Model->id`属性指定。因此，将其更改为：

```
$this->Listing->id = $entry['ListingID']; 
```

## 你不需要调用存在

不需要显式检查具有特定主键值的记录是否存在。`save()`如果传递给的数据数组包含 db 中存在的有效主键值，Cake 将自动更新和记录而不是创建新的。`create()`如果您`save()`在循环中使用，请确保在保存之前调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:59:49.290

不要破坏 CakePHP 的约定，使用 'id' 字段作为主键。

[http://book.cakephp.org/view/24/Model-and-Database-Conventions](http://book.cakephp.org/view/24/Model-and-Database-Conventions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T22:51:56.643

我在运行 cakePHP shell 脚本时遇到了同样的错误，结果发现最新记录的 ID 处于列大小允许的最大值（谁制作表格的 id 列使用了中等 int），所以 auto_increment 不是在职的。更改了列以允许修复更大的数字。可能是显而易见的，但可能会帮助那里的人。

# netbeans - 未在 netbeans IDE 中设置 GET/POST 变量

> ID：15640158
> 
> 赞同：0
> 
> 时间：2013-03-26T14:52:45.757
> 
> 标签：netbeans

我不知道它是否是一个愚蠢的错误，但没有设置 post/get 变量，而它应该是。以下是 HTML 和 php 代码片段：

```
<html>
<head>
    <title>
        Chain Story
    </title>
</head>
<body>
    <form method="GET" action="check-valid.php">
        <textarea name="a" rows="5" cols="50"></textarea>
        <input type="submit" value="Add" />
    </form>
</body>
</html> 
```

检查-valid.php：

```
<?php
    require 'includes/connect.inc.php';

    $conn_ref = connect_db('chainstory') or die(mysqli_error());

    if(isset($_GET)){
        echo 'Get variable set';
        if(isset ($_GET['a'])){
            $as = $_GET['a'];
            $query = "insert into story1 values (1, " . $as . ")";
            mysql_query($query, $conn_ref);
    }

    else{
        echo $_GET;
    }}

?> 
```

我得到以下输出：

```
Get variable set
Notice: Array to string conversion in /home/kevin/Code/php/myWebsite/check-valid.php on line 15
Array 
```

我在netbeans中对此进行编码。谁能指出我犯了什么错误？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:19:02.857

您是否尝试重命名文本区域？更长的 name ，并将 id 赋予 textarea 相同的名称。

您使用什么浏览器进行测试？我遇到了输入名称的一些问题，`IE`例如，如果输入名称与 javascript 函数名称或受保护的名称匹配。您的代码中是否有 javascript 函数或变量，名称是`a`什么？因为如果输入的名称与 js var 或名称冲突，IE 不会将输入字段发送到服务器。（Chrome Firefox 和其他浏览器可以）

# spring - 春天，检票口：测试时大气Eventbus nullpointerexception

> ID：15640163
> 
> 赞同：0
> 
> 时间：2013-03-26T14:53:08.573
> 
> 标签：spring, testing, wicket, atmosphere, wicket-1.6

我正在使用以下代码：

```
private WicketTester tester;

@Autowired
private ApplicationContext applicationContext;
@Autowired
private LDBApplication ldbApplication;

@Before
public void setUp() {
  tester = new WicketTester(ldbApplication);
  tester.getApplication().getComponentInstantiationListeners().add(new SpringComponentInjector(tester.getApplication(), applicationContext, true));
} 
```

我在 LDBApplication init() 方法中初始化一个 Eventbus：

```
@Override
protected void init() {
  super.init();
  eventBus = new EventBus(this);
} 
```

发生这种情况时，我得到一个空指针异常：

```
java.lang.NullPointerException
at org.apache.wicket.atmosphere.EventBus.<init>(EventBus.java:113)
at com.phoenixbv.wicket.http.PxWebApplication.init(PxWebApplication.java:55)
at com.phoenixbv.ldb_wicket.LDBApplication.init(LDBApplication.java:67)
at org.apache.wicket.Application.initApplication(Application.java:818)
at org.apache.wicket.util.tester.BaseWicketTester.<init>(BaseWicketTester.java:287)
at org.apache.wicket.util.tester.BaseWicketTester.<init>(BaseWicketTester.java:231)
at org.apache.wicket.util.tester.WicketTester.<init>(WicketTester.java:184)
at com.phoenixbv.ldb_wicket.scan.test.ScanServiceTest.setUp(ScanServiceTest.java:45)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.junit.runners.Suite.runChild(Suite.java:128)
at org.junit.runners.Suite.runChild(Suite.java:24)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

我知道这与大气.xml 文件有关。但是，我不能只更改 web.xml 文件，因为我没有使用这个文件，因为我只是在测试。有人有其他解决方案吗？

# javascript - 集成 iCanHaz 和 Marionette

> ID：15640168
> 
> 赞同：0
> 
> 时间：2013-03-26T14:53:25.423
> 
> 标签：javascript, backbone.js, marionette, icanhaz.js

我是 ICanHaz 的忠实粉丝，我正在尝试将它直接集成到我正在构建的新 Marionette 应用程序中。然而，从[这篇文章](https://stackoverflow.com/questions/11642794/icanhaz-not-finding-template)开始，我已经写了这个进入渲染方法并在 Marionette 中更改它：

```
// Set up Initalizer
    APP.addInitializer(function() {

        //Reach into Marionette and switch out templating system to ICH
        Backbone.Marionette.Renderer.render = function(template, data){
            return ich[template](data);
        }

        //Create Router
        new APP.Routers.GlobalRouter();

        //Start Backbone History
        Backbone.history.start();

    }); 
```

如果我浏览此功能，所有数据似乎都可以正常工作。但是，当投入使用并尝试将其用于布局和项目视图时，没有任何内容被附加或插入。这是来自我的 GlobalRouter：

```
 //Grab the main Layout
        var layout = new APP.Views.LayoutView();

        //Render that layout
        layout.render();

        //Make the model
        var userModel = new APP.Models.UserModel({
          "user_name" : "nweingartner@awesome.com",
          "tenant" : "Ginger Ale is Great"
        });

        //Make the Header Region
        var headerRegion = new APP.Views.HeaderView({model: userModel});
        layout.header.show(headerRegion); 
```

这一切都发生在一个在索引被命中时被调用的方法中。没有 JS 错误，所以我无事可做。但是，在渲染函数中，我将数据附加到正文中，它会添加（但是破坏了我的布局和区域结构）。

我将模板存储在 index.html 中。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:40:35.203

好的，我找不到使用 ICH 的简单方法。但是，由于我发现了另一个 SO，仅使用 Mustache 就可以找到非常相似的功能。

使用此代码：

```
 Backbone.Marionette.TemplateCache.prototype.compileTemplate = function(rawTemplate) {
    return Mustache.compile(rawTemplate);
 } 
```

允许您更改渲染器，以便您可以使用 Marionette 的模板调用从 index.html 中提取 mustache 模板。小胡子模板如下所示：

```
 <script id="headerTemplate" type="text/template">
        <p>{{user_name}}</p>
        <p>{{tenant}}</p>
    </script> 
```

不同之处在于类型是“text/template”而不是“text/html”。否则它的行为非常相似。

希望这对其他人有帮助。

# jquery - 在真/假条件下使用可见的淘汰赛

> ID：15640178
> 
> 赞同：0
> 
> 时间：2013-03-26T14:53:37.143
> 
> 标签：jquery, data-binding, knockout.js

我正在尝试使用`knockout 2.2`在.`data-bind="visible..."``div`

```
<div id="test" style="display:none">this is visible</div>
<div data-bind="visible: $('#test').is(':visible')">show if test is visible</div> 
```

照原样，“测试”设置为，`display:none`但第二个 div 仍然显示。为什么？这可以做到吗？注意：我已经包含了所有脚本参考，to`jQuery`和`knockout 2.2`.

在这里演示：http: [//jsbin.com/uviwiz/1/edit](http://jsbin.com/uviwiz/1/edit)

注意：我没有`ko.applyBindings`打电话或类似的事情。也许我需要在声明一个可观察函数之后？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:14:33.620

第一个和第二个 div 之间没有依赖关系。因此，如果第一个 div 发生更改，它不会将其更改应用于第二个。

你可以试试这个：

```
var ViewModel = function()
{
  var self = this;

  self.boolean =  ko.observable(true);

};
var vm = new ViewModel();

ko.applyBindings(vm);

setTimeout(function(){
  vm.boolean(false);
}, 2000);

<!DOCTYPE html>
<html>
<head>
<script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/2.2.0/knockout-min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div id="test" data-bind="visible:boolean">this is visible</div>
  <div data-bind="visible:boolean">only show if above div is visible or not</div>
  <div id="debug"></div>

</body>
</html> 
```

# php - Javascript lastIndex 正则表达式属性到 PHP 正则表达式

> ID：15640184
> 
> 赞同：3
> 
> 时间：2013-03-26T14:53:46.047
> 
> 标签：php, javascript, regex

我正在尝试用 PHP 翻译一个 javascript 脚本。到目前为止进展顺利，但我偶然发现了一些我一无所知的代码：

```
while (match = someRegex.exec(text)) {
    m = match[0];

    if (m === "-") {

       var lastIndex = someRegex.lastIndex,
           nextToken = someRegex.exec(parts.content);

       if (nextToken) {
              ...
       }

       someRegex.lastIndex = lastIndex;
    }
} 
```

`someRegex`变量如下所示：

```
/[^\\-]+|-|\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)/g 
```

exec 应该等同于 PHP 中的 preg_match_all：

```
preg_match_all($someRegex, $text, $match);
$match = $match[0];  // I get the same results so it works

foreach($match as $m){

   if($m === '-'){

     // here I don't know how to handle lastIndex and the 2nd exec :(

   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:43:56.633

我根本不会使用那个`lastIndex`魔法——本质上你在每个索引上执行了两次正则表达式。如果您真的想这样做，则需要设置`PREG_OFFSET_CAPTURE`标志[`preg_match_all`](http://www.php.net/manual/en/function.preg-match-all.php)以便获得位置，添加捕获长度并将其用作下一个[`preg_match`](http://www.php.net/manual/en/function.preg-match.php)偏移量。

最好使用这样的东西：

```
preg_match_all($someRegex, $text, $match);
$match = $match[0]; // get all matches (no groups)

$len = count($match);
foreach($match as $i=>$m){

    if ($m === '-') {
        if ($i+1 < $len) {
            $nextToken = $match[$i+1];
            …
        }
        …
    }
    …
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:16:19.193

实际上，exec 不等同于 preg_match_all，因为 exec 在第一次匹配时停止（g 修饰符仅设置 lastIndex 值以循环遍历字符串）。它相当于[preg_match](http://www.php.net/manual/en/function.preg-match.php)。因此，您找到第一个匹配项，通过 $array 参数获取值，该值的偏移量（包含在 $flags 中）并通过设置偏移量（最后一个参数）继续搜索。

我想第二次执行不会有问题，因为你会做与 javascript 版本完全相同的事情。

请注意，我没有尝试过循环，但是一旦您弄清楚 preg_match 如何与可选参数完全配合（我将运行一些测试），它应该非常简单。

```
$lastIndex = 0;
while(preg_match($someRegex, $text, $match, PREG_OFFSET_CAPTURE, $lastIndex) {
  $m = $match[0][0];
  $lastIndex = $match[0][1] + strlen($m); //thanks Bergi for the correction

  if($m === '-') {
            // assuming the $otherText relate to the parts.content thing
    if(preg_match($someRegex, $otherText, $secondMatch, 0, $lastIndex)) {
      $nextToken = $secondMatch[0];
      ...
    }
  }
} 
```

我想应该是这样（请原谅任何小错误，有一段时间没有做 php）。

# orchardcms - 将 MediaPicker 添加到常规站点设置

> ID：15640187
> 
> 赞同：2
> 
> 时间：2013-03-26T14:53:49.133
> 
> 标签：orchardcms, orchardcms-1.6

我正在进行的当前项目是利用租户站点。对于每个站点，我们希望能够通过修改其设置（在管理页面上，设置 > 常规）来更改整个租户站点的徽标。

[按照这个有据可查的教程](http://docs.orchardproject.net/Documentation/Adding-custom-settings)，我在站点设置中添加了两个文本字段。但是，我希望用户能够使用媒体选择器而不是输入路径来选择徽标。

目前我有一个带有记录、驱动程序和处理程序的 LogoBarSettings 部分。我不确定如何将媒体选择器添加到我的 LogoBarSettings 中，即使我这样做了，我是否还必须为其创建另一个处理程序、驱动程序和记录？我无法想象我会，但我在这一点上很困。

有人可以提供一些方向吗？

这是我的 LogoBarSettings

```
public class LogoBarSettings : ContentPart<LogoBarSettingsPartRecord>
{
    public string ImageUrl
    {
        get { return Record.ImageUrl; }
        set { Record.ImageUrl = value; }
    }

    public string ImageAltText
    {
        get { return Record.ImageAltText; }
        set { Record.ImageAltText = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:29:32.557

MediaPicker 是通过 Javascript 调用的，因此您不需要更改任何模型类。当为页面加载 MediaPicker 时，它会为页面上的所有表单元素设置一个 jQuery 事件处理程序。触发事件`orchard-admin-pickimage-open`将打开 MediaPicker。提供一个回调函数来捕获选择的媒体。

这是一个快速示例，您可以从加载了 MediaPicker 的页面（例如页面编辑器）在 Firebug 或 Chrome 开发人员工具中运行：

```
$('form').trigger("orchard-admin-pickimage-open", { 
    callback: function(data) { 
        console.log(data); 
}}) 
```

这应该打印出类似这样的内容：

```
Object {img: Object}
    img: Object
        align: ""
        alt: ""
        class: ""
        height: "64"
        html: "<img src="/Media/Default/images/test.jpg" alt="" width="64" height="64"/>"
        src: "/Media/Default/images/test.jpg"
        style: ""
        width: "64"
    __proto__: Object
__proto__: Object 
```

编辑器将`BodyPart`Orchard 的 MediaPicker 与 TinyMce 集成在一起，因此您可以开始查看该模块以获得更完整的示例，特别是`Modules\TinyMce\Scripts\plugins\mediapicker\editor_plugin_src.js`.

# heap-memory - 有人可以告诉我如何使用 JConsole 或 VisualVM 测量堆转储所花费的时间吗？

> ID：15640190
> 
> 赞同：1
> 
> 时间：2013-03-26T14:53:56.130
> 
> 标签：heap-memory, visualvm, jconsole, heap-dump, jvisualvm

我正在尝试分析尝试为使用接近 3 GB 堆内存的应用程序进行堆转储对性能的影响。这是为了决定和理解我是否应该启用将堆转储作为一种主动而不是最后的被动措施来监控内存泄漏的可能性。以前有没有人研究过这样的事情。是这样吗，请你帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:49:40.457

JVM 在堆转储期间停止，因此取决于硬件的 I/O 吞吐量和 CPU 速度，这可能需要几秒到几十秒。如果您只想获取活动对象，则还需要为完整的 GC 添加时间。您可以尝试`jmap -dump:live,format=b,file=heap.bin <pid>`从命令行运行以查看您的情况需要多长时间。

# vhdl - 后路由模拟中的警告

> ID：15640191
> 
> 赞同：0
> 
> 时间：2013-03-26T14:53:56.830
> 
> 标签：vhdl

这是警告：

```
 Expected := 1.602 ns; Observed := -960.942 ns; At : 1.231 ns
at 1231 ps(3), Instance /qw/uut/matrixinput_88/ : Warning: /X_FF PULSE

                       WIDTH High VIOLATION ON CLK; 
```

观察到的和预期的值是多少？他们的意思是什么 ！？正如所观察到的那样是负值！！

此过程代码介于

```
if(rising_edge(clk)) then
end if; 
```

我只想知道这些值的含义..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:02:31.690

这意味着您的时钟脉冲必须至少为 1.602ns 宽。错误发生在仿真的 1.231ns。

观察到的值为 -960+ns（即在模拟开始之前）这一事实让我认为某处的时间检查存在错误！

# css - 固定标题随窗口大小移动

> ID：15640192
> 
> 赞同：0
> 
> 时间：2013-03-26T14:54:05.890
> 
> 标签：css, header, window, size, fixed

抱歉，如果这是一个之前已经回答过的问题，但我一直在寻找，但找不到非常合适的解决方案。我试图让我的固定标题与内容保持一致，但似乎无法让它保持在那里。每当调整窗口大小时，标题都会向左或向右移动。我现在设置它的方式是我发现让标题完全与内容保持一致的唯一方法。否则它只会挂在页面的左侧。

理想情况下，我想要的只是让标题略大于其余内容，并且无论窗口大小如何都与它完全一致，主要是因为徽标挂起。现场直播： [andrewillustration.com](http://www.andrewillustration.com)

这是代码：

CSS

```
body{
background-attachment: fixed;
margin: 0px;
font: 400 16px/22px 'PT Sans Narrow', sans-serif;
color: #099;
background-color: #B4BFCD;
background-image: url(images/noisy_grid.png);
}
h1{font: 400 58px/60px 'Open Sans Condensed', sans-serif; color:#F05522; margin-left:65px;}
h2{
font: 400 18px/22px 'Open Sans Condensed', sans-serif;
color: #069;
}
h3{font: 400 14px/16px 'Open Sans Condensed', sans-serif; color:#6a6969;}
ul{margin:0px; padding:0px;}
a {
text-decoration: none;
color: #FFF;
}
a:hover {color:#099;}
a img{border:0px;}

#container{
width: 950px;
margin: 0px auto 300px auto;
Background:url(images/torn_paper_background.png)            repeat-y;
overflow: auto;
padding-bottom: 100px;
}

/****************************************************/
/* HEADER */
/****************************************************/

#header{
background-color: #F05522;
width:712px;
height: 115px;
padding: 0px 43px;
position: fixed;
top: 0px;
left:62%;
margin: 0 auto 0 -475px;
}
#header #logo{
position: absolute;
float:left;
left: -157px;
}
#header #main-menu{float:right; padding-top:45px;}
#header #main-menu li{
float:left;
list-style:none;
margin-left:27px;
font: 400 16px/20px 'Open Sans Condensed', sans-serif;
color: #FFF;
} 
```

HTML

```
<div id="header">
<div id="logo"><img src="images/logo-corners.png"></div>
<ul id="main-menu">
    <li><a href="#work">Portfolio</a></li>
    <li><a href="#about">About</a></li>
    <!--<li><a href="#experience">Experience</a></li> -->
    <li><a href="#connect">Contact</a></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:34:53.550

我这样做的方法是在标题周围添加一个固定位置的包装器（宽度为 100%）。然后，您可以给标题一个固定的宽度以匹配您的内容，并给它一个边距`0 auto`以使其居中。将您的徽标浮动到左侧，并将背景颜色应用于菜单`ul`（向右浮动），根据需要设置边距和填充，以便占用剩余的可用空间。

不过，您需要在最顶层的内容 div 中添加一些填充，以阻止它被菜单隐藏。

# mongodb - Java EE 使用没有 JPA 或 EJB 的 MongoDB？

> ID：15640193
> 
> 赞同：1
> 
> 时间：2013-03-26T14:54:10.313
> 
> 标签：mongodb, session, jakarta-ee, ejb, ejb-3.0

有人可以解释一下我所做的是否有意义吗？

我目前正在开发一个使用 MVC 架构的 Java EE 应用程序，并将 MongoDB 作为我的数据库。我所拥有的是几个编写为 Java 对象的实体，这些实体具有自定义映射方法以在我的 MongoDB 中持久化，以及一个单独的控制器类来执行数据库查询和操作。我可以毫无问题地将这些实体存储在我的会话中，但我还没有在更大范围内对此进行过测试。我尝试将我的对象注释为 bean，但是我收到了错误。

我传输数据的典型方法是查询我的 MongoDB，接收信息，将其映射到 java 对象，并将其存储在会话中以供前端访问。这是解决这个问题的正确方法吗？

我的实体需要是 EJB 吗？使它们成为 EJB 有什么好处？很抱歉，如果这个问题的表述很糟糕并且看起来很不明智。我只是想在进一步开发之前更好地了解我正在尝试使用的技术。我对这些主题所做的大部分阅读都无济于事。如果有人有一些清晰的阅读或解释可以帮助我理解我的要求，将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T16:33:37.497

I assume by "EJBs", you are referring to "Entity Beans"? In EJB 3, entity beans are "replaced" by JPA. Think of JPA as a "specification" for ORM frameworks. JPA/ORM are frameworks for mapping Java objects to and from relational databases. You are using MongoDB, which is not a relational database, and hence not that suitable for JPA. So I would say no, there is no need for you to consider JPA. Instead you should consider other frameworks, like Spring Data, which can simplify the task you are doing.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-02T16:35:09.437

在我看来，您可以在没有 JPA 和实体管理器的情况下将 EJB3 与 mongodb 一起使用，但是您将拥有具有 0 配置和完美可管理后端的 Stateless/Singleton/Startup/MDB bean。

# java - 在 Delphi 上读取 JAVA 生成的二进制文件

> ID：15640194
> 
> 赞同：2
> 
> 时间：2013-03-26T14:54:14.630
> 
> 标签：java, delphi, type-conversion

我从 JAVA 生成了一个二进制文件：

```
RandomAccessFile out = new RandomAccessFile(file, "rwd");
out.writeLong(calendar.getTimeInMillis());
out.writeDouble(double1);
out.writeDouble(double2);
out.writeDouble(double3); 
```

如何从 Delphi 2007 读取这些信息？

我试过这样的事情：

```
type TData = record
  time: TDateTime;
  double1: double;
  double2: double;
  double3: double;
end;
var
   data: TData;
   F : file of TData;
begin
  AssignFile(F,fileName) ;
  Reset(F) ;
  Read (F, data);
... 
```

但是 time、double1、double2 和 double3 的值完全不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:01:49.873

calendar.getTimeInMillis() 返回一个 long。

如果使用 delphi 7+，你最好的选择是 UInt64 来匹配 java long

有关 java 原始数据类型的描述，请参见[此处](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)并尝试与 delphi 数据类型匹配

编辑：正如大卫赫弗南注意到的那样，你还必须转换字节序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:02:49.167

There are two issues here.

1.  Java is big endian and Delphi is little endian.
2.  The Java code writes the date as a 64 bit integer. The Delphi code reads a floating point `TDateTime`.

Assuming you are going to change the Delphi code rather than the Java code, here's what you would do to bring the two sides together:

*   Find or write some helper utilities to deal with the endian issue. Convert from big endian to little endian as soon as you read the data.
*   Read the date as a 64 bit integer. Then you need to work out what the Java epoch is and convert from milliseconds since the Java epoch into a Delphi `TDateTime` which measures days elapsed since the Delphi epoch.

Dealing with endianness is simple enough, albeit rather tiresome.

The time conversion is perhaps a little more involved. The key information is that the Java epoch is the same as the Unix epoch. So a function that converts Unix time to Delphi `TDateTime` is all you need. Fortunately the Delphi RTL supplies the very function. It's in the `DateUtils` unit and is named `UnixToDateTime`. Note that `UnixToDateTime` receives a Unix time measured in seconds so you'll need to divide your value in milliseconds by `1000`.

One other point that I would make is that the Java code writes the data out with no gaps between fields. But the Delphi code uses an aligned record. Now, since all the members are the same size, there is no padding in this case. But it's something to watch out for. If I were you I would not be using legacy Pascal I/O to read this. I'd use a binary reader class that operates in a similar way to your Java writer. And I'd use that reader to read in the fields one at a time.

There may be something to be gained from finding (or writing) a reader class that handles the endian conversion for you.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T17:50:57.657

最后的解决方案是：

```
function Swap8ToDouble(A:double): double;
var
  hold:double;
asm
  mov edx,dword ptr[A]
  mov ecx,dword ptr[A+4]
  bswap edx
  bswap ecx
  mov dword ptr [hold],ecx
  mov dword ptr [hold+4],edx
  fld hold;
end;

function Int64Swap(A: int64): int64;
asm
  mov edx,dword ptr [A]
  mov eax,dword ptr [A+4]
  bswap edx
  bswap eax
end;

type TData = record
    time: Int64;
    double1: double;
    double2: double;
    double3: double;
end;

...

data.time := UnixToDateTime(Int64Swap(data.time) div 1000);
data.double1 := Swap8ToDouble(data.double1);
data.double2 := Swap8ToDouble(data.double2);
data.double3 := Swap8ToDouble(data.double3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:03:24.060

Your primary logic is OK but, since you're writing and reading binary data, you have to maintain DataType compatibility between the writer and the reader, and you also have to take endianness of writer and reader.

The java `calendar.getTimeInMillis()` returns a `long`, the Delphi equivalent is `Int64`, whereas Double is equivalent in both (64 bit IEEE), so your record should look like this:

```
type TData = record
  Millis: Int64;
  double1: double;
  double2: double;
  double3: double;
end; 
```

# artificial-intelligence - 如何确定神经网络中神经元放电的阈值？

> ID：15640195
> 
> 赞同：1
> 
> 时间：2013-03-26T14:54:18.693
> 
> 标签：artificial-intelligence, neural-network

我有一个简单的任务，即使用神经网络按身高和头发长度将人分类为 MAN 或 WOMAN 类别。也用一些例子教它模式，然后用它自己分类。

我对神经网络有基本的了解，但在这里确实需要一些帮助。

我知道每个神经元将区域划分为两个子区域，基本上这就是为什么在这里使用 P = w0 + w1*x1 + w2*x2 + ... + wn*xn （如果我们考虑几何，权重只是移动线表示）。

我确实理解每个时代都应该修改权重以更接近正确的结果，但我从未对其进行编程，我对如何开始感到绝望。

我应该如何进行，意思是：我如何确定阈值以及我应该如何处理输入？

对于感兴趣的人来说，这不是家庭作业，而是任务。我是，我想理解它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:26:52.053

看起来您正在处理一个带有阈值激活函数的简单感知器。看看[这个问题](https://stackoverflow.com/questions/6554792/whats-the-point-of-the-threshold-in-a-perceptron)。由于您使用的是偏置神经元 (w0)，因此您可以将阈值设置为 0。

然后，您只需将网络的输出与 0 进行比较，例如，如果 x < 0，则输出类 1，如果 x > 0，则输出类 2。您可以将案例 x=0 建模为“模糊”。

为了学习权重，您需要应用可以很容易实施的[Delta 学习规则。](http://en.wikipedia.org/wiki/Delta_rule)但要小心：只有当您的数据是线性可分的时，具有简单阈值激活函数的感知器才能正确。如果您有更复杂的数据，您将需要一个多层感知器和一个非线性激活函数，如 Logistic Sigmoid 函数。

有关详细信息，请查看[Geoffrey Hintons Coursera Course, Lecture 2](https://class.coursera.org/neuralnets-2012-001/lecture/index)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:02:25.587

我最近一直在研究机器学习（但我不是专家），但你应该看看[Accord.NET](http://code.google.com/p/accord/)框架。它包含开箱即用的所有常见机器学习算法。因此，很容易获取现有样本并对其进行修改，而不是从头开始。此外，该框架的开发人员在同一页面上的论坛中非常有帮助。

通过可用的示例，您还可能会发现比神经网络更好的东西，例如[内核支持向量机](http://www.codeproject.com/Articles/106583/Handwriting-Recognition-Revisited-Kernel-Support-V)。如果你坚持使用神经网络，那么修改所有不同的变量会很有趣，通过尝试和错误，你会理解它是如何工作的。

玩得开心！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T02:15:39.713

既然你说：

> 我知道每个神经元将区域划分为两个子区域

&

> 如果我们考虑几何表示，权重只是在移动线

我认为您想使用 perseptron 或 ADALINE 神经网络。这些神经网络只能对线性可分离模式进行分类。由于您的输入数据很复杂，因此最好使用多层非线性神经网络。（我的建议是具有 tanh 激活函数的两层神经网络）。为了训练这些网络，您应该使用反向传播算法。

为了回答

> 我应该如何处理输入？

我需要了解有关输入的更多详细信息（例如：它们只是身高和头发长度还是更多，它们的范围和您的分辨率等）

如果您只处理身高和头发长度，我建议在某些类别（例如 160cm-165cm、165cm-170cm 等）中划分身高和长度，并为这些类别中的每一个设置一个开/关输入神经元。然后在与身高相关的所有类之后放置一个隐藏层，在与头发长度相关的所有类之后放置另一个隐藏层（tanh 激活函数）。这两个隐藏层中的神经元数量是根据训练案例的数量确定的。然后将这两个隐藏层输出发送到具有 1 个输出神经元的聚合层。

# c++ - 如何根据向量对结构向量进行排序 在要排序的向量内？

> ID：15640202
> 
> 赞同：3
> 
> 时间：2013-03-26T14:54:28.763
> 
> 标签：c++, sorting, vector, struct

根据结构向量中所有结构的每个向量中的第一个单词按字母顺序对结构向量进行排序的最佳方法是什么？

```
struct sentence{
    vector<string> words;
};

vector<sentence> allSentences; 
```

换句话说，如何根据 words[0] 对 allSentences 进行排序？

* * *

**编辑：**我使用了以下解决方案：

```
bool cmp(const sentence& lhs, const sentence & rhs)
{
  return lhs.words[0] < rhs.words[0];
}

std::sort(allSentences.begin(), allSentences.end(), cmp); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:56:32.493

提供一个合适的比较二进制函数并将其传递给`std::sort`. 例如

```
bool cmp(const sentence& lhs, const sentence & rhs)
{
  return lhs.words[0] < rhs.words[0];
} 
```

然后

```
std::sort(allSentences.begin(), allSentences.end(), cmp); 
```

或者，在 C++11 中，您可以使用 lambda 匿名函数

```
std::sort(allSentences.begin(), allSentences.end(), 
          [](const sentence& lhs, const sentence & rhs) {
                     return lhs.words[0] < rhs.words[0];}
         ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T15:03:16.537

Generally, there are three different types of scenarios for comparison implementations you should consider.

1.  A comparison of your object that makes **always** sense. It's independent from the scenario in which you want to compare objects. Then: Implement `operator<` for your class. This operator is used whenever two objects are compared (with `<`, which the standard algorithms do). (For single scenarios, you can still "overwrite" this behavior using the other methods below).

    For this, extend your class with the following function:

    ```
    struct sentence{
        vector<string> words;
        bool operator<(const sentence &other) const {
            return this->words[0] < other.words[0];
        }
    }; 
    ```

    Then, just call the standard sorting algorithm on your vector of sentences without other arguments:

    ```
    std::sort(allSentences.begin(), allSentences.end()); 
    ```

    However, your scenario doesn't sound like this is the best method, since comparing by the first word is something you don't want to have *always*, maybe only in one case.

2.  A comparison of your object which will be used **only once**. In C++11, you have lambda functions (anonymous, literally inlined functions), which can be passed directly to the algorithm function in which it will be used, like `std::sort` in this scenario. This is my favorite solution:

    ```
    // Sort lexicographical by first word
    std::sort(allSentences.begin(), allSentences.end(),
              [](const sentence& a, const sentence& b) {
        a.words[0] < b.words[0];
    }); 
    ```

    In C++03, where you don't have lambdas, use to the 3rd solution:

3.  A set of **different, re-usable** comparison methods, maybe a parameterized comparison function. Examples are: Compare by the first word, compare by length, compare by something else... In this case, implement the comparison function(s) either as free-standing functions and use function pointers, or implement them as functors (which can be parameterized). Also, lambdas stored in variables do the job in this case.

    This method has the advantage to **name** the comparison methods, giving them a *meaning*. If you use different comparisons for the same object, but re-use them, this is a huge advantage:

    ```
    // Lexicographical comparison by the first word only
    bool compareLexByFirstWord(const sentence& a, const sentence& b) {
        return a.words[0] < b.words[0];
    }

    // Lexicographical comparison by all words
    bool compareLex(const sentence& a, const sentence& b) {
        return a.words < b.words;
    }

    // Decide which behavior to use when actually using the comparison:
    std::sort(sentence.begin(), sentence.end(), compareLexByFirstWord);
    std::sort(sentence.begin(), sentence.end(), compareLex); 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T14:56:04.940

您需要一些可以传递给的比较函数`std::sort`：

```
bool compare(const sentence& a, const sentence& b)
{
  return a.words[0] < b.words[0];
} 
```

如您所见，如果第一个单词的第一个单词“小于”第二个单词的第一个单词，则它需要两个`sentences`并返回 true 。`sentence``sentence`

`allSentences`然后你可以很容易地排序：

```
std::sort(allSentences.begin(), allSentences.end(), compare); 
```

当然，使用这种比较意味着句子 like`{"hello", "world"}`和`{"hello", "friend"}`will 比较相等。但这就是你所要求的。

# .net - 无法序列化属于 DataSet 的 DataTable

> ID：15640204
> 
> 赞同：4
> 
> 时间：2013-03-26T14:54:33.063
> 
> 标签：.net

我有一个包含一些数据表的数据集。我可以成功二进制序列化数据集。

如果我尝试单独序列化其中一个 DataTable，我会得到 NullReferenceException。

如果我制作 DataTable 的副本，则该副本可以很好地序列化。

有人知道我在做什么错吗？

此代码重现了该问题：

```
internal class Program
{
    private static void Main(string[] args)
    {
        System.String xml =
            "<CR><AN>543</AN><Br>XYZ</Br><Id>888</Id><M>123456</M><EVT>DATA</EVT><data><telephony><S>2012-01-11T14:01:54.9571247Z</S><CID>100000</CID><reason>test</reason></telephony></data></CR>";

        var ds = new System.Data.DataSet();
        using (var stringReader = new System.IO.StringReader(xml))
        {
            ds.ReadXml(stringReader);
        }

        //This works.
        var serializer = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
        using (var memStream = new System.IO.MemoryStream())
        {
            serializer.Serialize(memStream, ds);
        }

        System.Data.DataTable dt0 = ds.Tables[0];

        //Serializing a copy works
        System.Data.DataTable copy = dt0.Copy();
        using (var memStream = new System.IO.MemoryStream())
        {
            serializer.Serialize(memStream, copy);
        }

        //Serializing the original fails with a NULL Reference Exception
        using (var memStream = new System.IO.MemoryStream())
        {
            serializer.Serialize(memStream, dt0);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:38:03.920

IMO 这是一个错误。我将序列化数据集称为案例 A，数据表称为案例 B，复制数据表案例 C

您的反序列化数据集有两个表`CR`，并且`data`它们之间存在关系。在情况 B 中，内部会丢失一些有关`data`表的信息（`rowsOrder`更准确地说是集合）。

失败顺序：

1.  内部类`NewDiffgramGen`维护行顺序：
    *   数据集中的所有表（案例 A）
    *   一张提供的桌子（案例B）
    *   一张提供的桌子（案例C）
2.  内部类`XmlDataTreeWriter`通过子关系递归地序列化DataRows，这些在应对过程中被清除，以防C
3.  万一B`XmlDataTreeWriter`失败`this.rowsOrder[row].ToString()`并抛出`NullReferenceException`

所以你有三个选择：

*   序列化整个数据集
*   清除`dt0.ChildRelations`
*   序列化副本

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-26T15:34:24.293

`dt0.Copy()`不会复制与`dt0`. 我调试了您的代码，并且该`copy`对象不包含`DataSet`实例。所以，如果你需要序列化`DataTable`对象，可能序列化副本是最好的选择。

# sql-server - SQL Server 中的 XML 1.1 版

> ID：15640209
> 
> 赞同：4
> 
> 时间：2013-03-26T14:54:42.073
> 
> 标签：sql-server, xml, unicode, version, for-xml

是否可以在 SQL Server 中使用 XML 版本 1.1（不是 1.0）？

基本上我需要使用该`FOR XML`语句将一些 C0 字符（如 0x0001）包含到 xml 中，但我不能，因为它在 XML v1.0 中是不允许的。

我知道我可以使用 base64 或 CDATA 编码，但我想保持我的 xml 数据可读。

# html - HTML 和 CSS 高度属性

> ID：15640211
> 
> 赞同：0
> 
> 时间：2013-03-26T14:54:49.190
> 
> 标签：html, css, height, footer

我开始对 CSS 感到沮丧。每当我认为我已经掌握了它的许多方面之一时，我就会完全被意想不到的行为所震撼。

我一直在尝试制作一个粘性页脚。所以我将我的 body 元素的高度设置为 100%，这样它就占据了整个 html 元素的高度（浏览器窗口）。然后，我将除页脚元素之外的所有内容都包裹在一个 div 中，并将这个 div 的高度设置为 100%，认为这将占据整个身体的高度，因此将页脚推离屏幕底部。然后我可以应用一个负边距，把它拉起来并固定在底部。

但是页脚位于整个正文下方的页面底部，不需要负边距。所以我将高度设置为 100% 的想法完全被抛弃了。这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-16T09:34:44.227

如果要创建固定页脚，则无需担心 height 属性。

```
.footer {
  position: fixed;
  left: 0;
  bottom: 0;
  width: 100%;
  text-align: center;
  background-color: yellow;
}
```

```
<body>
  <p>This is the body</p>

  <div class="footer">
    <p>Footer</p>
  </div>
</body>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:46:28.820

HTML

```
<div class="footer">Content</div> 
```

CSS

```
body{
margin:0; //you need it for the correct bottom margin
}

.footer
{
    position: fixed;
    bottom:0;
    height:75px; //height of the footer
    color:white;
    background-color: black;
    width:100%;
    margin:0px;

} 
```

# printing - Tablesorter 自定义选择打印

> ID：15640213
> 
> 赞同：0
> 
> 时间：2013-03-26T14:54:54.827
> 
> 标签：printing, tablesorter

我可能走错了路，但是有没有办法在使用[http://mottie.github.com/tablesorter/docs/example-widget-filter-formatter-1 提供的 tablesorter 自定义过滤器过滤后打印表格。 html](http://mottie.github.com/tablesorter/docs/example-widget-filter-formatter-1.html) ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:52:55.507

如果您只使用基本页面打印，它应该打印您在屏幕上看到的应用了过滤器的表格。

如果要显示所有行，请使用打印样式显示所有隐藏行：

```
@media print {
  table.tablesorter tbody tr {
    display: table-row !important;
  }
} 
```

# c++ - ocl::CRException 的类型信息

> ID：15640215
> 
> 赞同：0
> 
> 时间：2013-03-26T14:54:55.977
> 
> 标签：c++, linux, g++, exception-specification

我尝试使用 g++ 运行我的 C++ 程序，但出现以下异常： **“typeinfo for ocl::CRException”**正在使用包含 CRException 类的 ocl 命名空间。请帮助我。

这是包含 OCL 类的代码：

```
#ifndef VOIDSOFT_ADA2_LIND_HH

#define VOIDSOFT_ADA2_LIND_HH
#include <string>
#include <list>
#include <queue>
#include <map>
#include <ocl.h>
#include "threaded.hh"

using namespace std;
using namespace ocl;

class circuit;

class Lind: public Threaded 
{
public:
    typedef int lookup_t;

private:
    OraConnection connection;
    pthread_mutex_t *done_m;
    queue<pthread_t> *q;
    lookup_t type;

public:
    circuit *c;
    Lind();
    ~Lind();

    void *run();    

    map<string, pair<string, string> > *getnodes(string);

    bool connect();
    void disconnect();

private:
    circuit *getcircuitinfo(string, circuit *c = 0);               
    void bindInStr(OraQuery &q, string arg, string bindvar, map<string, string> *properties);

    map<string, pair<string, string> > *node2name(string);
};

/* Lookup types */
namespace LindLookupTypes {
    /* Get overlying */
    const int OL = 0x001;
    /* Get underlying */
    const int UL = 0x002;
}
#endif /* VOIDSOFT_ADA2_LIND_HH */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:10:53.280

这通常意味着您忘记在某处定义（实现）虚拟方法。检查`ocl::CRException`是否定义了所有虚拟方法，以及定义它们的目标文件是否实际链接到您的代码。

如果没有帮助，请编辑答案并向我们展示`CRException`.

# android - Android：从库中调用重写类的方法

> ID：15640224
> 
> 赞同：0
> 
> 时间：2013-03-26T14:55:12.590
> 
> 标签：android, interface, overriding, android-library

在此示例中，我有一个正在播放 mp3 歌曲的应用程序，但公司有不同的许可证检查。

所以在我的库中，我有 3 个文件：

```
public interface UserCheckerInterface {
    public void appIsEnabled(boolean result);
}

public class UserChecker {

    public static void appisEnabled(final UserCheckerInterface userCheckerInterface) {
         userCheckerInterface.appIsEnabled(true);
    }

}

public class MainActivity extends Activity {

    @Override
    public void onCreate(final Bundle savedInstanceState) {

         ....

         UserChecker.appisEnabled(new UserCheckerInterface(

             @Override
             public void appisEnabled(final boolean result) {
                 Toast.makeText(getApplicationContext(), "" + result, 0).show();
             }

         )); 

    }

} 
```

我想覆盖`UserChecker.appisEnabled`我的应用程序中使用这个库的方法，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:58:37.197

我不确定我是否理解了你的问题，如果我理解了，那么你只需要通过编写来实现你的界面

```
public class UserChecker implements UserCheckerInterface{

    @Override
    public static void appisEnabled(final UserCheckerInterface userCheckerInterface) {
         userCheckerInterface.appIsEnabled(true);
    }

} 
```

一旦你这样做了，如果你没有实现这个方法，IDE 会显示一个错误；在这种情况下并非如此。

# jena - 在 Jena TDB 中存储数据并使用推理

> ID：15640226
> 
> 赞同：1
> 
> 时间：2013-03-26T14:55:23.063
> 
> 标签：jena, owl, reasoning

我有一个 OWL 本体文件作为 RDF，想将我的数据存储在 TDB 中并想使用推理。实际上，到目前为止这听起来很简单:)

但这是我感到困惑的一点：

我创建了一个 TDB 并通过 SPARQL 存储了一些语句。然后我尝试通过模型和 OWL 推理器加载 TDB：

```
OntModelSpec ontModelSpec = OntModelSpec.OWL_MEM;
Reasoner reasoner = ReasonerRegistry.getOWLReasoner();
ontModelSpec.setReasoner(reasoner);

Model schemaModel = FileManager.get().loadModel("D:/Users/jim/Desktop/ontology/schema.rdf");
OntModel schema = ModelFactory.createOntologyModel( ontModelSpec,  schemaModel);

Location location = new Location("D:/Users/jim/Desktop/jena-fuseki-0.2.5/DB");
Dataset dataset = TDBFactory.createDataset(location);
Model model = dataset.getDefaultModel();

OntModel ontModel = ModelFactory.createOntologyModel(ontModelSpec, model); 
```

当我现在通过 API 创建新资源时，它们不会存储在 TDB 中。而且我看不到通过 SPARQL 添加的 Statments？！SPAQRL 语句只显示我使用 SPARQL 添加的条目

```
QueryExecution qExec = QueryExecutionFactory.create(
     StrUtils.strjoinNL("SELECT ?s ?p ?prop",
                "WHERE {?s ?p ?prop}"),
                dataset) ;
ResultSet rs = qExec.execSelect() ;
try {
ResultSetFormatter.out(rs) ;
} finally { qExec.close() ; System.out.println("closed connection");} 
```

这仅返回使用 API 添加的资源

System.out.print("实例：" + ontModel.getResource(NS + "TestItem"));

当我称之为：

```
ExtendedIterator<Statement> iter = ontModel.listStatements(); 
```

我收到以下异常：org.openjena.atlas.lib.InternalErrorException：主题的无效 id 节点（空节点）：（[0000000000000067]，[0000000000000093]，[00000000000000C8]）

有人能够解释这种行为吗？或者有人可以给我一个提示，如何使用 OntModel 以正确的方式将模式和日期与 TDB 分开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:54:47.297

部分答案：

```
 org.openjena.atlas.lib.InternalErrorException: Invalid id node for subject (null node): ([0000000000000067], [0000000000000093], [00000000000000C8]) 
```

您正在使用没有事务的 TDB - 在退出之前尝试添加 TDB.sync 以将更改刷新到磁盘。

# selenium-ide - Selenium IDE 测试持续时间

> ID：15640227
> 
> 赞同：2
> 
> 时间：2013-03-26T14:55:22.967
> 
> 标签：selenium-ide, duration

我想知道如何获得测试持续时间的回声。

我已经在测试开始和结束时获得了时间戳，但是出于懒惰的原因，最好能得到一个显示运行测试所用时间的回显。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:37:05.950

这是适用于我的代码。它显示 5 秒持续时间（在测试中暂停）。自己试试：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="https://www.google.com.ua/" />
<title>New Test</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">New Test</td></tr>
</thead><tbody>
<tr>
<td>storeEval</td>
<td>{new Date()}</td>
<td>Cur_time</td>
</tr>
<tr>
<td>echo</td>
<td>${Cur_time}</td>
<td></td>
</tr>
<tr>
<td>pause</td>
<td>5000</td>
<td></td>
</tr>
<tr>
<td>storeEval</td>
<td>{new Date()}</td>
<td>Cur_time2</td>
</tr>
<tr>
<td>echo</td>
<td>${Cur_time2}</td>
<td></td>
</tr>
<tr>
<td>storeEval</td>
<td>{(storedVars["Cur_time2"].getTime() - storedVars["Cur_time"].getTime())/1000}</td>
<td>diff</td>
</tr>
<tr>
<td>echo</td>
<td>${diff}</td>
<td></td>
</tr>

</tbody></table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:28:04.973

`storeEval`是你的朋友吗？

我假设您将开始和结束时间戳存储在变量中，因此您可以 storeEval end-start 并回显结果

# cookies - Cookies：即使在全部删除后仍按请求发送

> ID：15640230
> 
> 赞同：0
> 
> 时间：2013-03-26T14:55:31.097
> 
> 标签：cookies

我对如何设置 cookie 感到困惑。似乎可以在请求标头中发送 cookie，即使在我将它们全部删除之后也是如此。

我所做的：

1.  在 IE 中：删除所有 cookie（扳手-东西->安全->删除浏览历史记录->检查所有，除了保留收藏夹->删除）
2.  转到随机站点 (google.com) 并打开网络选项卡 (F12/网络) - 因为它不会从空白选项卡打开。
3.  确保浏览历史记录仍然存在（工具-> 清除导航条目-> 取消选中两者）
4.  点击“开始拍摄”
5.  前往网站：[http ://www.klm.com/travel/dk_da/index.htm](http://www.klm.com/travel/dk_da/index.htm)
6.  查看网络数据。对于第一个 url ( [http://www.klm.com/travel/dk_da/index.htm](http://www.klm.com/travel/dk_da/index.htm) )，单击“转到详细视图”。点击“饼干”

我查看正在发送的 cookie（在 Cookie 选项卡或“请求标头”下），它已经发送了 7 个值，例如 EBT_JSESSIONID。但是，这些价值从何而来？目前我还没有收到任何东西。我意识到可以通过 javascript 设置 cookie，但此时我也没有加载任何 js。

我试图将其作为网络抓取的一部分来解决。真的希望能够在没有 Selenium 等的情况下做到这一点，并且需要生成/使用在各种调用中传递的各种 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-29T11:59:09.237

在 Mac 中使用 chrome 我们遇到了这个问题，重新启动浏览器确实解决了这个问题。这种情况很奇怪，因为该值仅针对一个特定的 HTML 发送。

# javascript - ECMAScript v 6 何时成为标准

> ID：15640233
> 
> 赞同：54
> 
> 时间：2013-03-26T14:55:36.700
> 
> 标签：javascript, ecmascript-6

抱歉，之前是否有人问过这个问题，但我想知道 ECMAScript v 6 何时会不仅仅是一个草案，而是成为新标准。访问[ECMA 网站（第 262 节）](http://www.ecma-international.org/publications/standards/Ecma-262.htm)仍然显示 5.1 版是最新的，它于 2011 年 6 月发布。

注意：（*我计划在接下来的几个月内就 ECMA 262 5.1 版进行一次演讲，我希望我不是在谈论过时的材料 :)*

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-26T14:58:12.297

截至 2015 年 6 月：**就在这里**！

> [http://www.ecma-international.org/ecma-262/ **6.0**](http://www.ecma-international.org/ecma-262/6.0/)

* * *

截至[2014 年 6 月](https://twitter.com/awbjs/status/474662357516689410)：

> [**GA 将在2015 年 6 月**的会议上投票批准将其作为 Ecma 标准。](http://wiki.ecmascript.org/doku.php?id=harmony:specification_drafts)

* * *

在撰写本文时（2013 年 3 月）：

> 该标准的第六版目前正在开发中，目标日期为 2013 年 12 月完成。

[http://ecma-international.org/memento/TC39-M.htm](http://ecma-international.org/memento/TC39-M.htm)

# excel - Excel 公式在 X 行后自动递增

> ID：15640236
> 
> 赞同：9
> 
> 时间：2013-03-26T14:55:40.973
> 
> 标签：excel, excel-2007, excel-formula

我将几千行数据导入 Excel，虽然一个项目代表一行，但我必须修改每个项目，以便 11 行代表相同的项目 ID。

例如：-

原来的

```
63 --->data
64 --->data
65 --->data 
```

当前的

```
63 --->data
63 --->data
63 --->data
63 --->data
63 --->data
63 --->data
63 --->data
63 --->data
63 --->data
63 --->data
63 --->data
64 --->data
64 --->data
64 --->data
64 --->data
64 --->data
64 --->data
64 --->data
64 --->data
64 --->data
64 --->data
64 --->data 
```

（你明白了）...

但是，由于我用来填充每个项目的额外 10 行的公式，我在 A 列中留下了与公式所基于的所有行相同的 ID。

我正在寻找一个公式，它将基于但仅每 11 行自动增加单元格值，以便我可以单击并向下拖动 A 列，它将为 11 行填充相同的 id，然后自动增加（+1 ) 并像这样填充接下来的 11 行。

我尝试了许多变体都无济于事。谢谢。

# 编辑

这是我目前拥有并希望简化的示例：-

```
A    B    C    D    E    F
79 <--already correct id
79 <--already correct id
79 <--already correct id
79 <--already correct id
79 <--already correct id
79 <--already correct id
79 <--already correct id
79 <--already correct id
79 <--already correct id
79 <--already correct id
79 <--already correct id
80 <--already correct id
80 <--already correct id
80 <--already correct id
80 <--already correct id
80 <--already correct id
80 <--already correct id
80 <--already correct id
80 <--already correct id
80 <--already correct id
80 <--already correct id
80 <--already correct id

58 <-- needs to be changes to 81
57 <-- needs to be changes to 81
57 <-- needs to be changes to 81
57 <-- needs to be changes to 81
57 <-- needs to be changes to 81
57 <-- needs to be changes to 81
57 <-- needs to be changes to 81
57 <-- needs to be changes to 81
57 <-- needs to be changes to 81
57 <-- needs to be changes to 81
57 <-- needs to be changes to 81
58 <-- needs to be changes to 82
57 <-- needs to be changes to 82
57 <-- needs to be changes to 82
57 <-- needs to be changes to 82
57 <-- needs to be changes to 82
57 <-- needs to be changes to 82
57 <-- needs to be changes to 82
57 <-- needs to be changes to 82
57 <-- needs to be changes to 82
57 <-- needs to be changes to 82
57 <-- needs to be changes to 82 
```

有成千上万行这样的......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T15:55:09.223

如果您有兴趣，这是另一种方法：

进入`1`_`A1`

然后将此公式输入`A2`：

`=IF(MOD(ROWS($A$1:A1),11)=0,A1+1,A1)`

然后只需将公式从`A2`下拉

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-21T20:54:22.387

您也可以使用此公式，它也适用于偶数和奇数编号

```
=INT(((ROW(a1)-1)/11))*1+1 
```

> > *1 表示 1 增量，*2 表示 2 增量，+1 是起始编号，如果要从 79 开始，请在末尾使用 +79

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-26T15:16:09.083

如果您将一列包含从 1 到您拥有的行数的直线序列。(1, 2, 3, 4, 5, ...)

您可以使用该列除以 11，只取结果的整数部分。

假设具有直序列的列是 A：

```
= int(A1/11)
= int(A2/11) 
```

看：

```
A        B            Result
0    =int(A1/11)        0
1    =int(A2/11)        0 
2    =int(A3/11)        0
3    =int(A4/11)        0
4    =int(A5/11)        0
5    =int(A6/11)        0
6    =int(A7/11)        0
7    =int(A8/11)        0
8    =int(A9/11)        0
9    =int(A10/11)       0
10    =int(A11/11)      0
11    =int(A12/11)      1
12    =int(A13/11)      1
13    =int(A14/11)      1
14    =int(A15/11)      1
15    =int(A16/11)      1
16    =int(A17/11)      1
17    =int(A18/11)      1
18    =int(A19/11)      1
19    =int(A20/11)      1
20    =int(A21/11)      1
21    =int(A22/11)      1
22    =int(A23/11)      2
23    =int(A24/11)      2
.......keep on until the last line 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-10T14:29:52.367

如果我正确理解了这个问题，就不需要复杂的公式。

在一个专栏中尝试这个来测试你自己，看看这是否是你需要的。

从 A1 开始，将 num 1 放入 3 个单元格中的每个单元格 (a1,a2,a3)

在 A4 中放 A4 = A1+1

然后向下拖动。你会看到你需要的序列... 1 1 1 2 2 2 3 3 3

如果您需要的序列确实是连续的，那么您可以根据需要应用它。

# php - 从 Facebook 注册 JSON 对象获取值

> ID：15640246
> 
> 赞同：0
> 
> 时间：2013-03-26T14:56:09.990
> 
> 标签：php, json, facebook, facebook-graph-api, foreach

我在为我正在构建的竞赛表单使用 Facebook 注册时遇到问题，表单提交并在使用 print_r 时为我提供了以下 JSON 数组：

```
Array (
    [algorithm] => HMAC-SHA256
    [expires] => 1364313600
    [issued_at] => 1364306406
    [oauth_token] => AAAB8bFGZCv4MBAIpl7rSmqzMnJ6V6Om78oZAEvWtxlGZCMoMgiNNIWjLHv2nf7ZAQulTr8fqrwFKFnKROX4rpwbaiZACTMIsrwMZBtDI47jgZDZD
    [registration] => Array (
        [name] => Ben Franklin
        [email] => email@email.com
        [address] => 455 Hickory Rd.
        [city] => Array
            (
                [name] => Baltimore, Maryland
                [id] => 1.04052369632E+14
            )

        [gender] => male
        [birthday] => 07/12/1978
        [phone] => 5550005555
    )

    [registration_metadata] => Array (
        [fields] => [{'name':'name'},
             {'name':'email'},
             {'name':'address', 'description':'Address', 'type':'text'},
             {'name':'city', 'description':'City', 'type':'typeahead', 'categories':['city','country','state_province']},
             {'name':'gender'},
             {'name':'birthday'},
             {'name':'phone', 'description':'Phone Number', 'type':'text'}]
    )

    [user] => Array (
        [country] => us
        [locale] => en_US
    )

    [user_id] => 574207194
) 
```

我现在的问题是我已经按照 Facebook PHP 示例阅读了他们应该做的签名请求，最后使用 print_r 获取上面的输出。现在我需要获取一些可以存储在数据库中的实际变量。我一直在尝试使用 foreach 循环来获取 Registration 数组中我需要的字段，然后是其中的 City 数组，但为了简单起见，我只是试图获取 [address] 值并存储它，以下是 Facebook 建议的我的 PHP 代码，在 print_r 命令下，我在 foreach 循环中添加了我的尝试以获取我的值，我一直收到类似“致命错误：无法将字符串偏移量用作数组中的数组...。 ”。任何人都有任何见解，以下是我处理提交表单的 PHP 文件：

```
<?php
define('FACEBOOK_APP_ID', 'MY_APP_ID');
define('FACEBOOK_SECRET', 'MY_SECRET_ID');

function parse_signed_request($signed_request, $secret) {
  list($encoded_sig, $payload) = explode('.', $signed_request, 2); 

  // decode the data
  $sig = base64_url_decode($encoded_sig);
  $data = json_decode(base64_url_decode($payload), true);

  if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
    error_log('Unknown algorithm. Expected HMAC-SHA256');
    return null;
  }

  // check sig
  $expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true);
  if ($sig !== $expected_sig) {
    error_log('Bad Signed JSON signature!');
    return null;
  }

  return $data;
}

function base64_url_decode($input) {
     return base64_decode(strtr($input, '-_', '+/'));
}

if ($_REQUEST) {
   $response = parse_signed_request($_REQUEST['signed_request'], 
                               FACEBOOK_SECRET);
   echo '<pre>';
   print_r ($response);
   echo '</pre>';

  foreach ($response as $r) {
    echo $r["registration"]["address"];
  }

} else {
   echo '$_REQUEST is empty';
}
?> 
```

# css - 检查哪些属性可用于设置标签样式的参考？

> ID：15640250
> 
> 赞同：0
> 
> 时间：2013-03-26T14:56:18.593
> 
> 标签：css

我正在设计我的样式`<blockquote>`，但我找不到完整的参考资料，可以让我检查我可以使用什么（这里是新手）。

例如，“box-shadow”属性。如何检查我是否可以定义`<blockquote>`？试错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:01:08.750

您可以将***任何***CSS 属性应用于***任何***HTML 元素。

一些内联元素不支持块级元素的属性（即 padding on `<span>`），但您可以通过定义它们`block`或`inline-block`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:04:17.023

您会发现的大多数文档都非常密集，并且读起来像规范。作为一个正在学习的人，我给你的最好建议是测试它，犯错误并从中学习！您将花费更少的时间在这里等待可以在几秒钟内测试自己的答案。

话虽如此，[Mozilla 开发者网络](https://developer.mozilla.org/en-US/)（恕我直言）是最容易吸收的文档。

PS是的，你可以在blockquotes上使用box-shadow

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:09:34.293

这是所有属性的官方列表：http: [//www.w3schools.com/cssref/](http://www.w3schools.com/cssref/)

我也喜欢这个列表： http: [//www.blooberry.com/indexdot/css/propindex/all.htm](http://www.blooberry.com/indexdot/css/propindex/all.htm)

虽然可能有一些特定属性最适合某些特定块，但一般规则是您可以将任何属性应用于任何元素。结果可能因浏览器而异。

请注意，某些浏览器支持自己的一组属性。

# config - QuickFix 故障 - 重复组

> ID：15640257
> 
> 赞同：3
> 
> 时间：2013-03-26T14:56:45.200
> 
> 标签：config, quickfix, fix-protocol, forex

我的修复引擎不断拒绝消息，我希望有人能帮我找出原因……我收到以下示例消息：

```
8=FIXT.1.1 9=518 35=AE 34=4 1128=8 49=XXXXXXX 56=YYYYYYY 52=20130322-17:58:37 552=1 54=1 37=Z00097H4ON 11=NOREF 826=0 78=1 79=NOT SPECIFIED 80=100000.000000 5967=129776.520000 453=5 448=BCART6 452=3 447=D 448=BARX 452=1 447=D 448=BARX 452=16 447=D 448=bcart6 452=11 447=D 448=ABCDEFGHI 452=12 447=D 571=6611540 150=F 17=Z00097H4ON 32=100000.000000 38=100000.000000 15=EUR 1056=129776.520000 31=1.2977652 194=1.298120 195=-3.5480 64=20130409 63=W2 60=20130322-17:26:50 75=20130322 1057=Y 460=4 167=FOR 65=OR 55=EUR/USD 10=121 

8=FIXT.1.1 9=124 35=3 34=4 49=XXXXXXX 52=20130322-17:58:37.917 56=YYYYYYY 45=4 58=Tag appears more than once 371=448 372=AE 373=13 10=216 
```

但正如您所看到的，它被 quickfix 引擎拒绝。我正在使用 5.0sp1 数据字典并在我的配置文件中对其进行了配置：

```
[DEFAULT]
ConnectionType=initiator
HeartBtInt=30
ReconnectInterval=10
SocketReuseAddress=Y
FileStorePath=D:\XXX\Interface\ReutersStore
FileLogPath=D:\XXX\Interface\ReutersLog

[SESSION]
BeginString = FIXT.1.1
SenderCompID = XXXXX
TargetCompID= YYYYY
DefaultApplVerId = FIX.5.0  
UseDataDictionary=Y
AppDataDictionary=FIX50SP1.xml
StartDay=sunday
StartTime=20:55:00
EndTime=06:05:00
EndDay=saturday
SocketConnectHost= A.B.C.D
SocketConnectPort= 123 
```

有谁知道引擎为什么会拒绝此消息？我知道 quickfix 通常能够处理带有重复组的消息，这是配置的东西吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:23:35.483

你的信息似乎是有序的。试着把它放在你的配置文件中。

```
ValidateFieldsOutOfOrder=N 
```

默认情况下，Quickfix 将其设置为 Y，并且存储选项卡和字段值的底层结构无法看到之前的计数。453 > 448。

作为旁注，请始终检查这些字段。他们应该指出问题的根源。

```
58=Tag appears more than once 
371=448 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:14:55.500

也许这是在黑暗中拍摄，但我在使用 5.0sp2 字典时遇到了类似的问题。我使用从库 SVN 存储库编译的 quickfix 库的更新版本解决了问题。如果我没记错的话，[这](http://sourceforge.net/tracker/?func=detail&aid=3413228&group_id=37535&atid=1126912)是错误。

quickfix 库似乎很久没有更新了，对于较新版本的修复，我建议您使用 repo 的“主干”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-25T21:49:11.517

我有同样的问题，我通过在消息 AE TradeCaptureReport 中调整我的 DataDictionary 来解决它

# javascript - 实现正则表达式的javascript函数问题

> ID：15640259
> 
> 赞同：0
> 
> 时间：2013-03-26T14:56:48.170
> 
> 标签：javascript, jquery, regex

我正在尝试获取该行的 URL 属性，但它不起作用，您能帮帮我吗？我只想在管道后获取 URL 值 | 和之前的“，小麦壳”

[http://jsfiddle.net/6cJQZ/1](http://jsfiddle.net/6cJQZ/1)

```
<z:row ows_Title='We are together!' ows_ImageSize='620' 
            ows_MetaInfo='16;#vti_parserversion:SR|14.0.0.6120&#13;&#10; 
            URL:SW|http://collaboration/sites/athapali/SliderImages/nature1.jpg, Wheat Husk&#13;&#10;               
            vti_lastheight:IW|250&#13;&#10;vti_lastwidth:IW|620&#13;&#10;
            vti_description:SW|Lorem ipsum dolor sit volutpat.' /> 
```

我的 Javascript 返回 null..

```
var myurl=getURL( $('[ows_MetaInfo]').attr("ows_MetaInfo"));
alert (myurl);

function getURL(str){
    str = str.replace(/(\r\n|\n|\r)/gm,"");
    str =   str.match(/URL:([^URL]*)/);
    str = parseInt(str[1].split('|')[1]);
    console.log(str);
    return str;
;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:05:35.643

尝试这个：

```
var myurl=getURL( $('[ows_MetaInfo]').attr("ows_MetaInfo"));

function getURL(str){
    str =   str.match(/URL:\w{2}\|(.+),/);
    alert(str[1]);   
    return str[1];
} 
```

# c# - 如何在不使用线程的情况下将展开前事件添加到 wpf 树视图

> ID：15640263
> 
> 赞同：0
> 
> 时间：2013-03-26T14:56:57.037
> 
> 标签：c#, wpf, treeview

我正在尝试添加一个进度条，当在树视图中单击扩展项目时将显示该进度条。此栏应在单击项目后立即显示，并在项目展开后使其不可见。我试图为这个事件添加一个处理程序，我在[这里](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/246c3eb0-2e93-4a45-9ffc-b2e3632b8925)找到了 ，但它不起作用。

我这样使用它：

```
 treeItemsToAdd = new MyTreeViewItem();
 treeItemsToAdd.Expanding += treeItemsToAdd_Expanding; 
```

我无法弄清楚为什么这不起作用...... treeItemsToAdd_Expanding 事件仅在项目展开后才会触发

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T15:17:43.753

我建议在默认实现之前覆盖 OnExpanded 虚拟方法并引发 Expanding 事件。

```
public class MyTreeViewItem : TreeViewItem
{
        public static readonly RoutedEvent CollapsingEvent =
        EventManager.RegisterRoutedEvent("Collapsing",
             RoutingStrategy.Bubble, typeof(RoutedEventHandler),
             typeof(MyTreeViewItem));

    public static readonly RoutedEvent ExpandingEvent =
             EventManager.RegisterRoutedEvent("Expanding",
             RoutingStrategy.Bubble, typeof(RoutedEventHandler),
             typeof(MyTreeViewItem));

    public event RoutedEventHandler Collapsing
    {
        add { AddHandler(CollapsingEvent, value); }
        remove { RemoveHandler(CollapsingEvent, value); }
    }

    public event RoutedEventHandler Expanding
    {
        add { AddHandler(ExpandingEvent, value); }
        remove { RemoveHandler(ExpandingEvent, value); }
    }

    protected override void OnExpanded(RoutedEventArgs e)
    {
        OnExpanding(new RoutedEventArgs(ExpandingEvent, this));
        base.OnExpanded(e);
    }

    protected override void OnCollapsed(RoutedEventArgs e)
    {
        OnCollapsing(new RoutedEventArgs(CollapsingEvent, this));
        base.OnCollapsed(e);
    }

    protected virtual void OnCollapsing(RoutedEventArgs e) { RaiseEvent(e); }
    protected virtual void OnExpanding(RoutedEventArgs e) { RaiseEvent(e); }
} 
```

# php - 如何根据值将mysql中的行计数为两个或多个变量？

> ID：15640264
> 
> 赞同：1
> 
> 时间：2013-03-26T14:57:01.763
> 
> 标签：php, mysql, count

我想根据一个查询中的条件将升级或标准的用户计入**users['upgraded']**或**users['standard']**变量。我正在使用 mysql 和 PDO。“id”是主键

像这样的东西：

```
$user[upgraded] =

SELECT COUNT(*)
FROM users
AS upgraded
WHERE (status1 > 0 OR status2 > 0 OR status3 > 0)
AND upgraded = 1
AND paused = 0
AND timestamp < $timestamp
ORDER BY id DESC 
```

和

```
$user[standard] =

SELECT COUNT(*)
FROM users
AS standard
WHERE (status1 > 0 OR status2 > 0 OR status3 > 0)
AND upgraded = 0
AND paused = 0
AND timestamp < $timestamp
ORDER BY id DESC 
```

我如何在一个查询中得到这个？帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:58:40.190

MySQL布尔算术，*我相信这是最短的答案*

```
SELECT  SUM(upgraded = 1) upgraded,
        SUM(upgraded = 0) downgraded
FROM    users
WHERE   (status1 > 0 OR status2 > 0 OR status3 > 0) AND 
        paused = 0  AND 
        timestamp < $timestamp 
```

但如果您想要更友好的 RDBMS，请使用`CASE`

```
SELECT  SUM(CASE WHEN upgraded = 1 THEN 1 ELSE 0 END) upgraded,
        SUM(CASE WHEN upgraded = 0 THEN 1 ELSE 0 END) downgraded
FROM    users
WHERE   (status1 > 0 OR status2 > 0 OR status3 > 0) AND 
        paused = 0  AND 
        timestamp < $timestamp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:00:30.897

```
select sum(if(upgraded=1,1,0)) as upgraded,
       sum(if(upgraded=0,1,0) as standard from users
  where  etc. 
```

# jquery - 使用 jQuery Mobile，输入字段的行为与不同页面的行为不同

> ID：15640265
> 
> 赞同：0
> 
> 时间：2013-03-26T14:57:03.260
> 
> 标签：jquery, forms, mobile

我有一个链接到另一个页面。在第二页上，我有一个表单输入文本字段，当来自第一页时它不起作用。但是，当直接浏览到第二页时，表单可以完美运行。这是我在第一页上的代码：

```
<div data-role="page" id="page1">
        <div data-role="content">
            <div style=" text-align:center">
                <img style="width: 300px; height: 43px" src="http://www.jimand.se/explore/images/logoblue.png" />
            </div>
            <ul data-role="listview" data-divider-theme="a" data-inset="true">
                <li data-role="list-divider" role="heading">
                    Uppdrag
                </li>
                <li data-theme="d">
                    <a href="task1.html" data-transition="slide">
                        1
                    </a>
                </li> 
```

这是我在第二页（task1.html）上的代码：

```
<div data-role="content"> 
<p>Ange l&ouml;senord</p>
<form id="login" action="" method="">
    <input name="pwtext" id="pwtext" placeholder="" value="" type="text" class="required" />
    <input type="submit" data-theme="b" data-icon="check" data-iconpos="left" value="Klicka h&auml;r" id="sendbtn" name="sendbtn" />
</form> 
```

我的 document.ready 在我的第二页：

```
$(document).ready(function(){

            $("#login").submit(function() {
                var emptyFields = $(":input.required").filter(function() {
                return !$.trim(this.value).length;
            });

            if(emptyFields.length) {
                $("#pwtext").css("background-color", "#ffff76");
                $("#pwtext").attr("placeholder", "Passeword required!");
            return false;
            }
            if ($('#pwtext').val() != 'llab') {
                $("#pwtext").css("background-color", "#ffff76");
                $("#pwtext").attr("placeholder", "Passeword required!");
                return false;
            }
            if ($('#pwtext').val() == 'llab') {
                $.mobile.changePage("#page2", "slideup");
                return false;
             }
            });

        }); 
```

这一切都可以在这里测试： [http](http://jimand.se/explore/start.html) ://jimand.se/explore/start.html pw:llab 来试试我的表格

# java - 如何在 JUnit (Play Framework) 中测试删除？

> ID：15640268
> 
> 赞同：1
> 
> 时间：2013-03-26T14:57:11.940
> 
> 标签：java, frameworks, junit, playframework-2.1

我需要进行一个 JUnit 测试来检查是否可以从数据库中删除某些内容。我正在使用带有内存数据库的 Play 2.1 框架。

我尝试了 assertNull(...)，但失败了。然后我尝试了 assertNotNUll(...) 并且测试通过了，但我不确定这是最好的方法，或者它甚至可以确认删除。**有没有更好的方法来检查项目是否已被删除？**我应该查找对象并期待错误吗？

这是我的代码（我也有一些 @BeforeClass 和 @AfterClass 代码，但这与我的问题无关）：

```
@Test
public void UserDelete(){
    // Test ID: 3
    // creating a new user
    User user = new User();
    user.id = (long) 4;
    user.facebookId = "0000004";
    user.email = "test4@gmail.com";
    user.name = "name4";
    user.save();

    // deleting the user
    user.delete();

    // checking deletion
    assertNotNull(user);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:56:44.017

您应该在数据库中插入新对象，检查是否已插入，删除它并检查它是否已删除。最明显的方法是用来`select count(*)`获取行数。

```
public class ApplicationTest extends WithApplication {

    @Before
    public void setup() {
        start(fakeApplication(inMemoryDatabase("default-test"), fakeGlobal()));
    }

    @Test
    public void UserModify() {
        // create user (User extends Model)
        User user = new User();
        user.setId(1);
        user.setName("name1");
        user.save();

        int rowCount = Ebean.find(User.class).where().eq("id", 1).findRowCount();
        assertEquals(1, rowCount);

        user.delete();

        rowCount = Ebean.find(User.class).where().eq("id", 1).findRowCount();
        assertEquals(0, rowCount);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:09:17.393

一般来说，你通常必须做这样的事情。当然，这是一个粗略的示例，但它指出您应该使用一些持久性解决方案（例如 JPA）来持久化您的域对象。

```
@Test(expected = WhateverObjectNotFoundException.class) 
public void removeUserTest(){
    User u = UserFactory.createTestUser();
    Long id = myEntityManager.persist(u);
    assertNotNull(id);
    myEntityManager.remove(u);
    myEntityManager.findById(id);
} 
```

在我看来，`User`不应该对它的生命周期负责，因为要求一个对象删除自己是没有意义的，因此你的问题有点自相矛盾。

稍后可以推广此解决方案，因此当您测试相同类型的行为时，您不必重新编写它。

# python - Python猪拉丁语翻译器

> ID：15640269
> 
> 赞同：-3
> 
> 时间：2013-03-26T14:57:19.450
> 
> 标签：python

所以我在 Codecademy.com 工作了一段时间，试图学习 python。我真的不知道我是否只是盲人，不明白为什么这不起作用或什么。这是它不会让我使用的代码。它的功能是在我实际输入的内容时打印变量，如果我没有输入任何内容，则打印“空”。

```
print "Welcome to the English to Pig Latin translator!"
original = raw_input("What's your name?")
if len(original) > 0
        print original
    else
        print "empty" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:00:19.590

```
if len(original) > 0
else 
```

上面的行包含语法错误。尝试：

```
if len(original) > 0:
else: 
```

请注意添加的冒号 ( `:`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:09:45.333

如果环境是 linux，请尝试使用以下代码。请查看您的代码有什么区别。

```
#!/usr/bin/python
print "Welcome to the English to Pig Latin translator!"
original = raw_input("What's your name?")
if len(original) > 0:
    print original
else:
    print "empty" 
```

# joomla - Joomla 2.5 + 如何在 url 中显示类别

> ID：15640272
> 
> 赞同：1
> 
> 时间：2013-03-26T14:57:24.170
> 
> 标签：joomla, joomla2.5, categories, joomla-sef-urls

我希望有人能帮助我。我一直在寻找这个答案的高低，但我无法找到确切的答案（即使在论坛中）。

如何在 Joomla (v2.5) 的 url 中显示类别名称。到目前为止，我的网站中有 2 个类别。例如，我有一个名为 Refrigeration 的类别。我创建了一篇名为 test 的文章，并将其放在 Refrigeration 类别下。但由于某种原因，它只会在 URL 中显示为：www.something.com/test.html。
我希望它显示如下：**www.something.com/refrigeration/test.html**

我知道您可以创建一个隐藏菜单，使用类别（例如“冷藏”）作为父项，并将相关文章放在该类别下方（即 - 将“冷藏”作为其父项）。但这似乎效率很低。我只是真的希望能够将我在网站上的文章分成不同的类别，并在 url 中显示该类别。

或者，是安装 SEF 扩展的唯一方法吗？

任何帮助是极大的赞赏。如果我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T16:03:23.693

默认的 Joomla SEF 仅在菜单结构上起作用。很难相信，但是一旦您接受 Joomla 菜单并不是真正用于“构建菜单”而更多地用于构建 url/站点结构，生活会变得更容易一些。

为了做你想做的事，你可以为每个类别创建隐藏菜单，它应该可以工作，而不必将每篇文章作为菜单项放在隐藏菜单下面。但是，使用 SEF 组件为您处理它会容易得多。可能有一些轻量级的插件可用，但我还没有见过。

SEF 组件可以在这里找到：[http ://extensions.joomla.org/extensions/site-management/sef](http://extensions.joomla.org/extensions/site-management/sef)

# asp.net-mvc - 如何使用默认值创建一个空的下拉列表？

> ID：15640275
> 
> 赞同：8
> 
> 时间：2013-03-26T14:57:27.880
> 
> 标签：asp.net-mvc, drop-down-menu

我想创建一个只有默认值的空下拉列表。我使用以下代码：

```
@Html.DropDownList("parent","--Select Parent--") 
```

但在运行时我看到这个错误：

> 没有具有键“父”的“IEnumerable”类型的 ViewData 项。

我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-11-01T04:43:20.753

您可以像这样构建一个空的 DropDownList：

```
@Html.DropDownList("parent", Enumerable.Empty<SelectListItem>(), "--Select Parent--") 
```

参考：[为 Cascade Sub-List 构建一个空的 MVC DropdownListFor](https://stackoverflow.com/questions/13051228/build-an-empty-mvc-dropdownlistfor-for-a-cascade-sub-list)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-05-22T19:22:01.567

在上面的示例中添加 html 属性：

```
 @Html.DropDownList("Idparent", Enumerable.Empty<SelectListItem>(), "Select one...", new {@class="form-control"}) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-26T15:04:00.103

您可以简单地在视图中创建一个 HTML Select 选项。

```
<select id="parent" name="parent">
   <option value="">Select parent </option>
</select> 
```

**编辑：** *根据评论*。

提交表单时，您可以通过具有`parent`名称的参数来获取所选值

```
[HttpPost]
public ActionResult Create(string parent,string otherParameterName)
{
  //read and save and return / redirect
} 
```

**或者**`parent`在您用于模型绑定的 ViewModel 中有一个属性。

```
public class CreateProject
{
  public string parent { set;get;}
  public string ProjectName { set;get;}
} 
```

并在您的操作方法中。

```
[HttpPost]
public ActionResult Create(CreateProject model)
{

  // check model.parent value.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-12T18:59:52.917

你可以在你的控制器中做这样的事情来构建一个空的下拉列表

```
 ViewBag.ClassID = new SelectList(db.Classes.Where(c => c.ClassID == 0)  , "ClassID", "ClassName").ToList(); 
```

# css - CSS 选择器中 * 和 * * 是什么意思

> ID：15640276
> 
> 赞同：1
> 
> 时间：2013-03-26T14:57:32.423
> 
> 标签：css, selector

下面的 CSS 选择器中的`*` 和是什么意思？`* *`

我试图折叠一个选择器中的定义，但效果不佳。如果我在第一个选择器中评论 mainNav`* *`或折叠`*`，布局将被破坏。

```
#mainNav { padding-top: 20px; padding-bottom: 20px; }  
#mainNav * { padding-left: 20px; padding-right: 20px; } 
#mainNav * * { padding-left: 0; padding-right: 0; } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T15:00:27.903

`#mainNav`= ID 为“mainNav”的任何元素

`#mainNav *`=为 ID 为“mainNav”的元素及其所有后代的*子元素设置样式*

`#mainNav * *`= 为 ID 为“mainNav”的元素及其所有后代的孙子元素设置样式

[**例子**](http://jsfiddle.net/mRSWd/1/)

# java - 在java中将根元素添加到xml文档

> ID：15640281
> 
> 赞同：4
> 
> 时间：2013-03-26T14:57:50.120
> 
> 标签：java, xml, dom

我正在尝试生成一个 XML 文件并保存它。以下代码显示了我将根元素附加到文档的方式。当我这样做时，抛出异常如下。

**线程“main”org.w3c.dom.DOMException 中的异常：HIERARCHY_REQUEST_ERR：尝试在不允许的位置插入节点。**

```
public void comUnitIterator() {
    System.out.println("This is the iterator");
    Document fileDeclarationDocument = documentBuilder();
    if (comUnits != null && comUnits.size() > 0) {

        for (int i=0; i<comUnits.size();i++) {
            CompilationUnit cu=comUnits.get(i);
            SourceCodeClassVisitor classVisitor = new SourceCodeClassVisitor();
            ClassOrInterfaceDeclaration classOrInterface = classVisitor.visit(cu, null);
            Element rootElement = fileDeclarationDocument.createElement("class");
            fileDeclarationDocument.appendChild(rootElement);
            //classVisitor.visit(cu, null);
        }
    }
    createXML(fileDeclarationDocument, "ABC");
} 
```

有人可以告诉我这个例外的原因。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:02:02.450

您正在为此循环的每次迭代添加一个根元素：

`for (int i=0; i<comUnits.size();i++)`

将您的代码更改为：

```
Element rootElement = fileDeclarationDocument.createElement("class");
fileDeclarationDocument.appendChild(rootElement);
for (int i=0; i<comUnits.size();i++) {
     //add children here
 } 
```

只能有一个根元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:00:37.920

您需要创建一个*根*元素。目前，您正在为`comUnits`. 你应该拉这个声明：

```
Element rootElement = fileDeclarationDocument.createElement("class"); 
```

...并将其附加到文档中：

```
fileDeclarationDocument.appendChild(rootElement); 
```

然后在您的循环中，您可以为每次迭代创建一个新元素，并将其附加*到*根元素。（说实话，您还不清楚您希望您的 XML 结构是什么。有了更多详细信息，我们可能会为您提供更多帮助。）

# ember.js - 在路径之外创建 ember 应用程序

> ID：15640284
> 
> 赞同：0
> 
> 时间：2013-03-26T14:57:52.640
> 
> 标签：ember.js

我一直在使用 Ember (RC1) - 我可以创建从网站根目录 (foo.com/) 加载的应用程序，但现在我试图延迟加载应用程序，直到我到达给定的路径在我的网站 (foo.com/app) 中，而不是在根目录中加载它。

该“应用程序”页面是从服务器提供的，其中一个 div 与我的路由器的根元素相关联。我的应用程序的根目录应该显示我的 applicationView 和相关模板。

我认为我所做的一切都是正确的，并且没有出错，但是我在 div 中看到的唯一我希望我的应用程序显示的内容是：

`<div id="ember247" class="ember-view"></div>`

在这一点上，我的模板应该只显示一些原始 html，但我什么也没得到！有人有想法么？

# mysql - 将 MySQL 命令行结果的输出格式更改为 CSV

> ID：15640287
> 
> 赞同：74
> 
> 时间：2013-03-26T14:58:04.637
> 
> 标签：mysql, csv, command-line

我想在命令行上从查询输出到 MySQL 获取无标题 CSV 数据。我在与 MySQL 服务器不同的机器上运行此查询，因此所有那些带有“INTO OUTFILE”的 Google 答案都不好。

所以我跑`mysql -e "select people, places from things"`。输出看起来有点像这样的东西：

```
+--------+-------------+
| people | places      |
+--------+-------------+
|   Bill | Raleigh, NC |
+--------+-------------+ 
```

嗯，那不好。但是，嘿，看！如果我只是将它传递给*任何东西*，它会将它变成一个制表符分隔的列表：

```
people  places
Bill    Raleigh, NC 
```

这更好——至少它是可程序解析的。但我不想要 TSV，我想要 CSV，也不想要那个标题。我可以用 摆脱标题`mysql <stuff> | tail -n +2`，但如果 MySQL 只是有一个标志来省略它，我想避免这样的麻烦。而且我不能只用逗号替换所有选项卡，因为它不能处理带有逗号的内容。

那么，如何让 MySQL 省略标头并以 CSV 格式提供数据？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-05-16T16:33:22.703

作为部分答案：`mysql -N -B -e "select people, places from things"`

`-N`告诉它不要打印列标题。`-B`是“批处理模式”，并使用制表符分隔字段。

如果制表符分隔值不够用，请参阅[此 Stackoverflow Q&A](https://stackoverflow.com/questions/356578/how-to-output-mysql-query-results-in-csv-format)。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-11-21T19:36:45.513

上述解决方案仅适用于特殊情况。在一般情况下，嵌入逗号、嵌入引号以及其他使 CSV 变得困难的事情会让您陷入各种麻烦。

帮自己一个忙，使用一个通用的解决方案——做对了，你就不必再考虑它了。一个非常强大的解决方案是`csvkit`命令行实用程序 - 通过 Python 可用于所有操作系统。通过安装`pip install csvkit`。这将为您提供正确的 CSV 数据：

```
 mysql -e "select people, places from things" | csvcut -t 
```

这会产生逗号分隔的数据，并且标题仍然存在。要删除标题行：

```
 mysql -e "select people, places from things" | csvcut -t | tail -n +2 
```

这产生了 OP 要求的内容。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-07-28T16:18:39.443

我最终编写[了自己的命令行](https://github.com/spiffytech/csvmaster)工具来解决这个问题。它类似于`cut`，除了它知道如何处理带引号的字段等。这个工具与@Jimothy 的答案配对，允许我从远程 MySQL 服务器获取无头 CSV，我没有文件系统访问权限到我的本地机器上：

```
$ mysql -N -e "select people, places from things" | csvm -i '\t' -o ','
Bill,"Raleigh, NC" 
```

[github上的csvmaster](https://github.com/spiffytech/csvmaster)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-10-13T12:15:43.613

它是如何在客户端将结果保存到 CSV 而无需额外的非标准工具。此示例**仅使用** `mysql`客户端和`awk`.

**一条线：**

```
mysql --skip-column-names --batch -e 'select * from dump3' t | awk -F'\t''{ sep=""; for(i = 1; i <= NF; i++) { gsub(/\\t/,"\t",$i); gsub(/\\n/,"\n",$i); gsub(/\\\\/,"\\",$i); gsub(/"/,"\"\"",$i); printf sep"\""$i"\""; sep=","; if(i==NF){printf"\n"} }}'

```

**需要做什么的逻辑解释**

1.  首先，让我们看看**数据在 RAW 模式下的样子**（带`--raw`选项）。`t`数据库和表分别是`dump3`

    您可以看到从“新行”（第一行）开始的字段被分成三行，因为值中放置了新行。

```
mysql --skip-column-names --batch --raw -e 'select * from dump3' t

一行 2 新行
引号 " 反斜杠 \ 两个引号 "" 两个反斜杠 \\ 两个制表符换行
场的尽头

另一行 1 另一行描述，没有任何特殊字符

```

2.  **批处理模式下的输出数据**（无选项） - 每条记录通过转义字符（如和`--raw`）更改为单行文本`\` `<tab>``new-lines`

```
mysql --skip-column-names --batch -e 'select * from dump3' t

一行 2 新行\n引号 " 反斜杠 \\ 两个引号 "" 两个反斜杠 \\\\ 两个制表符\t\t新行\n字段结尾
另一行 1 另一行描述，没有任何特殊字符

```

3.  并**以CSV格式输出数据**

线索是使用转义字符以 CSV 格式保存数据。

这样做的方法是将`mysql --batch`产生（`\t`作为`\\`反斜杠和`\n`换行符的制表符）的特殊实体转换为每个值（字段）的等效字节。然后整个值被 转义`"`和包围`"`。顺便说一句 - 使用相同的字符进行转义和封闭可以轻柔地简化输出和处理，因为您没有两个特殊字符。出于这个原因，您对值所做的一切（从 csv 格式的角度来看）就是更改`"`为`""`whithin 值。以更常见的方式（分别转义和封闭`\`and `"`）您必须先更改`\`为`\\`，然后更改`"`为`\"`.

以及**命令的逐步解释**：

```
# 我们产生单行输出，如步骤 2 所示。
mysql --skip-column-names --batch -e 'select * from dump3' t

# 将字段分隔符设置为，因为 mysql 以这种方式生成
| awk -F'\t'

# 这开始从 mysql 数据中迭代每一行/记录 - awk 的标准行为
'{

# 字段分隔符为空，因为我们没有在第一个输出字段之前打印分隔符
sep="";

-- 遍历每个字段并将字段转换为 csv 正确值
for(i = 1; i <= NF; i++) {
-- 注意：\\ 下面的两个斜杠表示 awk 的 \ 因为它们被转义了

-- 把 \t 改成 <tab> 对应的字节
    gsub(/\\t/, "\t",$i);

-- 把 \n 改成新行对应的字节
    gsub(/\\n/, "\n",$i);

-- 将两个 \\ 变为一个 \  
    gsub(/\\\\/,"\\",$i);

-- 将 value 更改为 CSV 正确的字面值 - 将 " 更改为 ""
    gsub(/"/, "\"\"",$i);

-- 打印由 " 包围的输出字段并在之前添加分隔符
    printf sep"\""$i"\"";  

-- 处理第一个字段后设置分隔符 - 因为之前我们不需要它
    sep=",";

-- 在处理完最后一个字段后添加新行 - 这表示 csv 记录分隔符
    if(i==NF) {printf"\n"}
    }
}'

```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-01T06:07:16.610

使用 sed 怎么样？它是大多数（全部？）Linux 操作系统的标准配置。

`sed 's/\t/<your_field_delimiter>/g'`.

此示例使用 GNU sed (Linux)。对于 POSIX sed (AIX/Solaris)，我相信您会键入文字 TAB 而不是`\t`

示例（用于 CSV 输出）：

```
#mysql mysql -B -e "select * from user" | while read; do sed 's/\t/,/g'; done

localhost,root,,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,,,,,0,0,0,0,,
localhost,bill,*2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,,,,,0,0,0,0,,
127.0.0.1,root,,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,,,,,0,0,0,0,,
::1,root,,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,,,,,0,0,0,0,,
%,jim,*2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,,,,,0,0,0,0,, 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-26T22:46:00.897

`mysqldump`实用程序可以帮助您，基本上可以`--tab`选择它是一个包装的 for`SELECT INTO OUTFILE`语句。

例子：

```
mysqldump -u root -p --tab=/tmp world Country --fields-enclosed-by='"' --fields-terminated-by="," --lines-terminated-by="\n" --no-create-info 
```

这将创建 csv 格式的文件`/tmp/Country.txt`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-25T15:11:05.870

mysql客户端可以检测到输出fd，如果fd是S_IFIFO(pipe)则不输出ASCII TABLES，如果fd是字符设备（S_IFCHR）则输出ASCII TABLES。

您可以使用 --table 强制输出 ASCII TABLES，例如：

```
$mysql -t -N -h127.0.0.1 -e "select id from sbtest1 limit 1" | cat
+--------+
| 100024 |
+--------+ 
```

-t, --table 以表格格式输出。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2022-01-04T08:03:30.763

您可以使用[spyql](https://github.com/dcmoura/spyql)读取 mysql 的制表符分隔输出并生成逗号分隔的 CSV 并关闭标题写入：

```
$ mysql -e "SELECT 'Bill' AS people, 'Raleigh, NC' AS places" | spyql -Oheader=False "SELECT * FROM csv TO csv"
Bill,"Raleigh, NC" 
```

spyql 检测输入是否有标题以及分隔符是什么。默认情况下，输出分隔符是逗号。如果您愿意，可以手动指定所有这些选项：

```
$ mysql -e "SELECT 'Bill' AS people, 'Raleigh, NC' AS places" | spyql -Idelimiter="'\t'" -Iheader=True -Odelimiter="," -Oheader=False "SELECT * FROM csv TO csv"
Bill,"Raleigh, NC" 
```

我不会关闭 mysql 上的标头写入，因为 spyql 可以利用它，例如，如果您选择生成 JSON 而不是 CSV：

```
$ mysql -e "SELECT 'Bill' AS people, 'Raleigh, NC' AS places" | spyql "SELECT * FROM csv TO json" 
{"people": "Bill", "places": "Raleigh, NC"} 
```

或者如果您需要引用您的列：

```
$ mysql -e "SELECT 'Bill' AS people, 'Raleigh, NC' AS places" | spyql -Oindent=2 "SELECT *, 'I am {} and I live in {}.'.format(people, places) AS message FROM csv TO json"
{
  "people": "Bill",
  "places": "Raleigh, NC",
  "message": "I am Bill and I live in Raleigh, NC."
} 
```

免责声明：我是spyql的作者

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-01T12:32:57.687

如果您使用的是 mysql 客户端，则可以为每个会话设置 resultFormat，例如

```
mysql -h localhost -u root --resutl-format=json 
```

或者

```
mysql -h localhost -u root --vertical 
```

[在此处](https://dev.mysql.com/doc/mysql-shell/8.0/en/mysqlsh.html#option_mysqlsh_result-format)查看完整的参数列表。

# c# - 会话 mvc 4 出错

> ID：15640294
> 
> 赞同：0
> 
> 时间：2013-03-26T14:58:17.240
> 
> 标签：c#, asp.net-mvc-4

当 HomeController 在 Index ActionResults 中启动时，我设置了一个值为 1 的会话

```
Session["login_fail"] = 1; 
```

当用户尝试登录时，如果失败，则 sessio 变量更改为 0

```
Session["login_fail"] = 0; 
```

如果它失败了，这里应该发生什么

```
 @using(Html.BeginForm()) {
        <fieldset>
            <legend>Tbl_Users</legend>

    <table>
        <tr>
            <td>User Name</td>
            <td><input type="text" id="username" name="userName" /></td>
            <td id="ErrorMessage"></td>
        </tr>
        <tr>
            <td>Password </td>
            <td><input type="text" id="pass" name="pass" /></td>
            <td id="ErrorMessage"></td>

        </tr>

        @{
        if(Convert.ToInt32(Session["login_fail"]) == 0) 
        {
                <p>User name or password are incorrect. Please, try again.</p>  //here should apper the error message if it fails but it doesnt
        }
      }
    </table>
            <p>
                <input type="submit" onclick="return validate()" value="Login" />
            </p>

        </fieldset> 
```

请注意，当我提交表单时，另一个操作是接收帖子的值，他们检查用户和密码是否正常，如果没有（我检查过它确实返回 0），它将显示错误消息和将返回到与 LoginUser 位于同一控制器中的 Index actionresults（返回 0 或 1 的控制器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:10:29.440

我发现了错误。问题是，当我单击提交时，帖子值会转到另一个 actionresuts，然后如果登录失败，会话的值会变为 0，并且他们再次重定向到 Index actionresults，并且由于某种原因，会话的值会丢失。就像使用 ViewBag 一样，您无法在另一个视图中看到它的值。我不知道为什么会发生这种情况，因为会话应该在整个项目中可见。但我客人说这是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-28T20:52:13.067

似乎在您的 LoginUser() 方法之后， Index() 再次工作并再次设置`Session["login_fail"] = 1;`。

您知道每次加载页面时您的 [Get] Index() 都会起作用。我建议您使用 TempData 通过控制器方法传递数据。

TempData["login_fail"] = 1;

因此，您可以在 Index() 中检查 TempData 是 1 还是 0，并根据 TempData 设置会话。

# c# - 如何从 WindowsApplication Sqlite 数据库连接

> ID：15640295
> 
> 赞同：0
> 
> 时间：2013-03-26T14:58:17.893
> 
> 标签：c#, asp.net, sqlite, host

我有一个用 C# 编写的 Windows 应用程序，使用 Sqlite3 作为其数据库。我想用我的 Windows 应用程序数据库更新**Host中的数据库。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:06:54.677

您可以使用以下代码连接到 SQLite3 数据库。

```
SQLiteConnection db = new SQLiteConnection("Data Source=/path/to/file.db;Version=3;");
db.Open(); 
```

如果要指定其他连接参数，[ConnectionStrings.com](http://connectionstrings.com/sqlite)始终是一个很好的资源。另外，您可以查看与您的[问题](https://stackoverflow.com/questions/26020/what-is-the-best-way-to-connect-and-use-a-sqlite-database-from-c-sharp)类似的问题。

# c# - 如何关闭服务器端的radwindow并刷新父页面

> ID：15640301
> 
> 赞同：6
> 
> 时间：2013-03-26T14:58:37.420
> 
> 标签：c#, javascript, asp.net, telerik, radwindow

我想关闭[RadWindow](http://demos.telerik.com/aspnet-ajax/window/examples/contenttemplatevsnavigateurl/defaultcs.aspx)并刷新父级：如何执行此服务器端：

我有以下情况：

两页说：

# 父.aspx：

```
<telerik:RadWindowManager ID="RadWindowManager1" runat="server" EnableViewState ="false">
</telerik:RadWindowManager> 
```

* * *

和 parent.cs

```
 protected void OpenNewWindow(string url, int width, int height,int mode)
        {
            RadWindow newWindow = new RadWindow();
            newWindow.NavigateUrl = url;
            newWindow.VisibleOnPageLoad = true;
            newWindow.KeepInScreenBounds = true;
            if (width > 0)
            {
                newWindow.Width = width;

            }
            if (height > 0)
            {
                newWindow.Height = height;
            }
            newWindow.VisibleStatusbar = false;
            if (mode == 0)
            {
                newWindow.DestroyOnClose = true;
                newWindow.InitialBehaviors = WindowBehaviors.Maximize;
            }
            RadWindowManager1.Windows.Add(newWindow);
        } 
```

我在父页面上的某些 gridview 的 rowcommand 中调用此方法：

像这样 ：

```
OpenNewWindow("child.aspx", 0, 0,0); 
```

* * *

现在我想在服务器端单击`child`页面上某个按钮的事件来关闭 rad 窗口并刷新父窗口怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T15:48:16.983

正如你所说，你想从后面的代码中关闭。因此，您可以从后面的代码渲染`Page.ClientScript.RegisterClientScriptBlock(GetType(), "CloseScript", "refreshParentPage()", true);`以刷新父级。

只需在子页面中添加以下代码和脚本。父页面中不需要代码。

```
<script>         
    function getRadWindow() {
        var oWindow = null;
        if (window.radWindow)
            oWindow = window.radWindow;
        else if (window.frameElement.radWindow)
            oWindow = window.frameElement.radWindow;
        return oWindow;
    }

    // Reload parent page
    function refreshParentPage() {
        getRadWindow().BrowserWindow.location.reload();
    }
</script>

<asp:Button runat="server" Text="Close" ID="CloseButton" 
    OnClick="CloseButton_Click"/>

protected void CloseButton_Click(object sender, EventArgs e)
{
    Page.ClientScript.RegisterClientScriptBlock(GetType(), 
        "CloseScript", "refreshParentPage()", true);
} 
```

**更新**：

```
// Redirect page page to url
function redirectParentPage(url) {
    getRadWindow().BrowserWindow.document.location.href = url;
}

// Code behind
Page.ClientScript.RegisterClientScriptBlock(GetType(), 
"CloseScript", "redirectParentPage('Parent.aspx')", true); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T15:32:38.110

您应该使用`getRadWindow().close()`方法和`OnClientClose`事件。

在 Child.aspx 上：

```
<script type="text/javascript">

    function getRadWindow() {
        var oWindow = null;

        if (window.radWindow) 
            oWindow = window.radWindow;
        else if (window.frameElement.radWindow) 
            oWindow = window.frameElement.radWindow;

        return oWindow;
    }

    function clientClose(arg) {   
        getRadWindow().close(arg);
    }

</script> 
```

在 Child.cs 中：

```
protected void btn_Click(object sender, EventArgs e)
{         
    ScriptManager.RegisterStartupScript(Page, typeof(Page), "closeScript", "clientClose('');", true);
} 
```

在 Parent.cs 中创建 RadWindow 时，添加`OnClientClose`事件：`newWindow.OnClientClose = "OnChildWindowClosed";`.

在 Parent.aspx 上：

```
<script type="text/javascript">

    function OnChildWindowClosed(sender, eventArgs) {
        document.location.reload(); // there may be a cleaner way to do the refresh
    }

</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-24T19:41:47.663

强制关闭 rad 窗口的简单方法，只需将其放在更新面板中，如下所示：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" RenderMode="Block">
  <ContentTemplate>
     <telerik:RadWindow ID="RadWindow1" runat="server">
       <ContentTemplate>

       </ContentTemplate>
    </telerik:RadWindow>
  </ContentTemplate>
</asp:UpdatePanel> 
```

重要提示：您必须将此属性应用于更新面板：

UpdateMode="条件" RenderMode="块"

​</p>

然后在要执行关闭命令的按钮内执行：

```
UpdatePanel1.update() 
```

此命令将关闭 radwindow 并且不会刷新您的网页，也不需要 javascript，我试过了。

# facebook - 如何将文本“此应用可能代表您发布..”更改为自定义文本

> ID：15640309
> 
> 赞同：0
> 
> 时间：2013-03-26T14:58:52.490
> 
> 标签：facebook

在 facebook 上使用“publish_actions”权限时，弹出窗口会显示“此应用可以代表您发布，包括状态更新、照片等”的文字。默认。我们可以将文本更改为一些特定于应用程序的自定义文本吗？

# ios - 在地图中搜索注释

> ID：15640318
> 
> 赞同：0
> 
> 时间：2013-03-26T14:59:20.000
> 
> 标签：ios, search, filter, annotations, mkmapview

我想知道是否有人知道是否可以在地图视图中具有搜索功能？我希望能够使用 UISearchbar 搜索/过滤注释，就像在 tableview UI 中所做的那样。注释是从 plist 加载的。很高兴得到任何提示或帮助，一直在搜索，但我找不到任何东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:10:35.303

使用谓词按名称过滤它们。例如：

```
NSArray *filteredAnnotations = [self.mapView.annotations filterUsingPredicate:[NSPredicate predicateWithFormat:@"SELF.name beginswith[dc] %@",userInput]]; 
```

然后删除所有，并使用过滤数组中的注释重新加载地图。

```
[self.mapView removeAnnotations:self.mapView];
self.mapView.annotations = filteredAnnotations; 
```

`searchBarTextDidEndEditing:`从.delegate的委托中的方法触发此代码`UISearchBar`。如果您不想要搜索的表格预览，请使用不带 UISearchBarDisplayController 的 UISearchBar。

或者正如 rckoenes 所说，放大过滤后的注释区域。SO中可能有代码。

# mysql - MySQL 中的条件内连接语句

> ID：15640321
> 
> 赞同：4
> 
> 时间：2013-03-26T14:59:26.003
> 
> 标签：mysql, inner-join, conditional-statements

有没有一种方法可以根据另一个表中字段的值有条件地更改我内部加入的表？这是我到目前为止得到的（但它错误）：

```
SELECT 
    j.jobID, j.jobNumber,
    CASE
        WHEN j.idType = 'dealership' THEN d.dealershipName
        WHEN j.idType = 'Group' THEN g.groupName
        WHEN j.idType = 'Agency' then a.agencyName
    END as dealershipName,
    CASE
        WHEN p.manualTimestamp != '0000-00-00 00:00:00' THEN UNIX_TIMESTAMP(p.manualTimestamp)
        WHEN p.manualTimestamp = '0000-00-00 00:00:00' THEN p.timestamp
    END as checkTS,
    CONCAT_WS(' ', ui.fName, ui.lName) as salesRep
FROM jobs j
LEFT JOIN dealerships d ON j.dealershipID = d.dealershipID
LEFT JOIN dealershipgroups g ON j.dealershipID = g.groupID
LEFT JOIN agencies a ON j.dealershipID = a.agencyID
INNER JOIN payments p ON j.jobID = p.jobID
IF j.idType = 'dealership' THEN 
    INNER JOIN smdealershipjoins smdj ON j.dealershipID = smdj.dealership
    INNER JOIN userinfo ui ON smdj.sm = ui.userID           
ELSEIF j.idType = 'Group' THEN 
    INNER JOIN smgroupjoins gj ON j.dealershipID = gj.groupID
    INNER JOIN userinfo ui ON gj.sm = ui.userID
ELSEIF j.idType = 'Agency' THEN 
    INNER JOIN smagencyjoins aj ON j.dealershipID = aj.agencyID
    INNER JOIN userinfo ui on aj.sm = ui.userID
END IF 
```

因此，有一个表（jobs），它具有 idType（dealership、group 或 Agency）和 clientID（称为dealershipID）。我需要做的是加入某个表（基于 idType）以确定哪个销售经理“拥有”客户帐户。如果 idType = 'dealership' 我需要加入 smdealershipjoins，如果是 'Group' 我需要加入 smgroupjoins，如果它是 'agency' 我需要加入 smagencyjoins 以便我可以将该表加入 userinfo 以获得销售额经理的名字。

我也尝试使用 case 语句进行内部连接，但这也产生了错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T15:05:01.060

左/外连接到三个选项中的每一个，您选择的条件将处理其余部分。

也许是这样的：

```
...
LEFT JOIN smdealershipjoins smdj 
    ON j.dealershipID = smdj.dealership
LEFT JOIN smgroupjoins gj 
    ON j.dealershipID = gj.groupID
LEFT JOIN smagencyjoins aj 
    ON j.dealershipID = aj.agencyID
LEFT JOIN userinfo ui 
    ON ui.userID = CASE
        WHEN j.idType = 'dealership' THEN smdj.sm
        WHEN j.idType = 'Group' THEN gj.sm
        WHEN j.idType = 'Agency' then aj.sm
    END 
```

# sql - 出售物品时更改库存表的触发器

> ID：15640322
> 
> 赞同：-2
> 
> 时间：2013-03-26T14:59:28.120
> 
> 标签：sql, postgresql, triggers

这是在商品出售时触发更改库存表的语法正确吗？

```
create trigger tr_stockquant
on tbl_ticket for insert, update, delete as $$
begin
update s set stockQty = s.stockQty - isnull(i.Qty,0) + isnull(d.Qty,0)
from tbl_stock s
left join inserted i
on s.itemID = i.itemID
left join deleted d on itemID = s.itemID
end;
$$ language plpgsql; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:46:07.120

您将需要首先创建一个适当的函数，然后遵守[CREATE TRIGGER](http://www.postgresql.org/docs/9.2/static/sql-createtrigger.html)语句的语法和语义。

所以首先你创建一个函数：

```
CREATE FUNCTION alter_stock_table() RETURNS TRIGGER AS $$
    BEGIN
        IF tg_op = 'INSERT' THEN
            ...
        ELSIF tg_op = 'UPDATE' THEN
            ...
        ELSIF tg_op = 'DELETE' THEN
            ...
        ENDIF
$$ LANGUAGE PLPGSQL; 
```

然后你可以创建一个触发器：

```
CREATE TRIGGER alter_stock_table_trigger
    AFTER INSERT, UPDATE, DELETE ON tbl_ticket
    FOR EACH ROW
    EXECUTE PROCEDURE alter_stock_table(); 
```

Google 将帮助您找到更多关于如何定义函数的示例。例如，[这个页面](http://michael.otacoo.com/postgresql-2/postgres-trigger-for-beginners/)给出了一个简单的介绍。

# javascript - 键入时如何比较javascript中的值

> ID：15640328
> 
> 赞同：2
> 
> 时间：2013-03-26T14:59:43.963
> 
> 标签：javascript, jquery, javascript-events

我尝试比较两个字符串，第一个 ASCII（英文）和第二个 Unicode（中文）。用户需要在 textarea 中输入消息，javascript 将计算文本的长度并显示一些消息。

现在它仅适用于 ASCII（英语），但我需要比较，因为 ASCII 和 Unicode 的条件不同。

以下是我当前的代码片段：

```
$('#myinput').keyup(function() {
    if(this.value.length<=152)
     $('#charcount').text('We will deduct 1 credit for this message per contact'), 
     $('#credit_value').val('1');
    else if(this.value.length>152 && this.value.length<298)
         $('#charcount').text('We will deduct 2 credit for this message per contact'),  
         $('#credit_value').val('2');
    else if (this.value.length>=298 && this.value.length<450)
        $('#charcount').text('We will deduct 3 credit for this message per contact'),
        $('#credit_value').val('3');
    else if (this.value.length>=450 && this.value.length<596)
        $('#charcount').text('We will deduct 4 credit for this message per contact'),   
        $('#credit_value').val('4');
    else if (this.value.length>=602 && this.value.length<754)
        $('#charcount').text('We will deduct 5 credit for this message per contact'),  
        $('#credit_value').val('5');
    })
</script> 
```

对于 ASCII（英文），我以 152 开头，但在 Unicode（中文）中，我需要以 60 开头并增加...

下面是我在 php 中使用的代码来检查英文或中文的文本/字符串

```
// check if message is type in chinese or english/UTF8
    if (preg_match("/\p{Han}+/u", $message)) {
        $msg_type = '2';
        //this is chinese
    } else {
        $msg_type = '1';
        //this is UTF8/English
    } 
```

所以我的问题现在我需要检查字符串是 ASCII 还是 Unicode 类型，然后是中文开始条件值是 60 还是英文是 152 开始。

[在这里](http://jsfiddle.net/ruslyrossi/ayPBk/2/)检查我的 jsfiddle

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:23:51.757

取自这个[答案](https://stackoverflow.com/a/150078/1487756)

以下正则表达式`[^\x00-\x80]+`可用于测试非 ASCII 字符。*（`[^\u0000-\u0080]+`对于非 Unicode 字符）*

*我假设你想匹配非 ASCII 字符，这在你的问题中没有说明*

更新：如果您只想匹配中文字符，请改用它

`var isChinese = /[\u4E00-\u9FFF\u6300-\u77FF\u7800-\u8CFF\u8D00-\u9FFF]+/`

鉴于此，您可以只`test`针对`RegExp`文本并显示相应的消息

*为了演示的简单性，我稍微精简了代码，它只占了 60/152 步*

```
 var charCount = $('#charcount')
    $('#myinput').keyup(function () {
        var text = this.value;
        var isChinese = /[^\x00-\x80]+/
        var step = isChinese.test(text) ? 60 : 152;
        charCount.text('We will deduct '+ ~~(1 + ((text.length - 1) / step)) +' credit for this message per contact. Characters: '+text.length);
    }) 
```

这是一个关于 JSFiddle的[演示](http://jsfiddle.net/4Q6LF/)

## 更新

所以我改变了一点，显示非中文 Unicode 字符的错误。并让您定义自定义范围

```
var charCount = $('#charcount');
$('#myinput').keyup(function () {
    var text = this.value;
    var isChinese = /[\u4E00-\u9FFF\u6300-\u77FF\u7800-\u8CFF\u8D00-\u9FFF]+/.test(text);
    if (!isChinese && (/[^\x00-\x80]+/.test(text))) {
        charCount.text("Error: Neither ASCII nor Chinese Unicode Character Entered");
        return;
    }
    var credits = {
        chinese: [
            [1, 60],
            [60, 130],
            [130, 190]
        ],
        english: [
            [1, 152],
            [152, 298],
            [298, 450],
            [450, 596],
            [602, 754]
        ]
    };
    var _credits = credits[isChinese ? "chinese" : "english"];
    var i;
    for (i = _credits.length; i > 1; i--) {
        if (text.length >= _credits[i - 1][0] && text.length < _credits[i - 1][1]) break;
    }
    charCount.text('We will deduct ' + i + ' credit for this message per contact. Characters: ' + text.length);
}); 
```

这是给你的另一个[小提琴](http://jsfiddle.net/gKvYW/)

# c# - 克隆没有自定义类的通用 ConfigurationSection

> ID：15640330
> 
> 赞同：2
> 
> 时间：2013-03-26T14:59:47.343
> 
> 标签：c#, .net, app-config, configurationmanager

我正在尝试`ConfigurationSection`从外部 app.config 文件的配置复制 a ，最终目标是将其合并到正在执行的应用程序当前加载的配置中。

目的是允许加载到单个 AppDomain 中的大量库从执行的应用程序接收配置，*并*合并它们自己的 app.config 设置，以便读取任何设置只需调用`ConfigurationManager.AppSettings`or即可`ConfigurationManager.GetSection()`。

我遇到的问题是克隆`ConfigurationSection`.

我试过的：

1.  [`ConfigurationSectionCloner`](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.common.configuration.configurationsectioncloner%28v=pandp.50%29.aspx)在企业库中。

    ```
    Configuration externalConfig = ConfigurationManager.OpenExeConfiguration(externalLibPath);
    var section = externalConfig.GetSection("some.section");
    ConfigurationSectionCloner sectionCloner = new ConfigurationSectionCloner();
    section = sectionCloner.Clone(section);

    Configuration localConfig = ConfigurationManager.OpenExecConfiguration(ConfigurationUserLevel.None);
    localConfig.Sections.Add("some.section", section); 
    ```

    *   然而，这运行良好，两者`localConfig.GetSection("some.section")`都是`ConfigurationManager.GetSection("some.section")`空的。
    *   即使调用`localConfig.Save()`（使用任何参数组合）也不会填充该部分。

2.  [`CompositeConfigurationSourceHandler`](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.common.configuration.compositeconfigurationsourcehandler%28v=pandp.50%29.aspx)在企业库中

    ```
    SystemConfigurationSource localConfig = new SystemConfigurationSource();
    FileConfigurationSource externalConfig = new FileConfigurationSource(externalLibPath + ".config");
    CompositeConfigurationSourceHandler ccsh = new CompositeConfigurationSourceHandler(externalConfig);
    ConfigurationSection section = externalConfig.GetSection("some.section");
    if (!ccsh.CheckAddSection("some.section", section)) {
        try {
            localConfig.Add("some.section", section);
        } catch (Exception) { }
    } 
    ```

    *   `localConfig.add()`这会在声明的行上引发异常`Cannot add a ConfigurationSection that already belongs to the Configuration.`。问题是`localConfig` *没有*那个部分。即使添加`localConfig.Remove("some.section");`也无法解决。
    *   我还尝试了许多`*ConfigurationSource`对象组合，看看它们是否有所作为，但没有一个有所作为。

从块中复制实际的 ApplicationSettings `appSettings`，甚至从块中复制 ConnectionStrings`connectionStrings`是非常简单的调用，`ConfigurationManager.AppSettings.Set("some key", "some value");`但使用 ConfigurationSections 似乎并不容易。

有没有办法复制、克隆和/或只是将`ConfigurationSection`一个配置从一个配置合并到另一个配置？

笔记：

1.  我不想合并物理文件。一切都应该在运行时发生并且只保留在内存中。
2.  我不想编写一个自定义类来表示每个 ConfigurationSection。这些部分将是通用的并且对于执行的应用程序是未知的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T01:41:30.387

我已经找到了一种方法，[`ConfigurationSection`](http://msdn.microsoft.com/en-us/library/x0kca287.aspx)可以将从任何 app.config 文件中读取的 a 与主执行应用程序加载的配置合并！

该方法使用 Enterprise Library 中的 #1 扩展了我[`ConfigurationSectionCloner`](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.common.configuration.configurationsectioncloner%28v=pandp.50%29.aspx)的[代码](http://msdn.microsoft.com/en-us/library/ff672062%28v=pandp.50%29.aspx)：

```
// open the external configuration
Configuration externalConfig = ConfigurationManager.OpenExeConfiguration(externalLibPath);

// get the section we're looking to clone & merge
var sectionToClone = externalConfig.GetSection(sectionName);

// "clone" the section; this will create a `DefaultSection` object - not a "pure clone" =[
ConfigurationSectionCloner sectionCloner = new ConfigurationSectionCloner();
var clonedSection = sectionCloner.Clone(sectionToClone);

// set the `Type` of the new section to the one we're cloning (most likely a NameValueCollection)
clonedSection.SectionInformation.Type = sectionToClone.SectionInformation.Type;

// set the new section's XML to match the original one (really? the cloner doesn't do this?!)
clonedSection.SectionInformation.SetRawXml(sectionToClone.SectionInformation.GetRawXml());

// open our local configuration (the "executing application's config)
Configuration localConfig = ConfigurationManager.OpenExecConfiguration(ConfigurationUserLevel.None);

// add the cloned section to it
localConfig.Sections.Add(sectionName, clonedSection);

// save the section (this can be any variation-of-parameters for `.Save()`)
localConfig.Save(ConfigurationSaveMode.Minimal);

// force ConfigurationManager to refresh the new section
ConfigurationManager.RefreshSection(sectionName); 
```

奇怪的是，在我所有的测试中，以上步骤都是**必需**的。每个部分需要的主要是设置新部分的[`Type`](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.type.aspx)、调用[`SetRawXml()`](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.setrawxml.aspx)和刷新该部分。

与我最初的愿望相反，这种方法的缺点是调用`localConfig.Save()`将其保存到磁盘会覆盖原始的 app.config 文件。在多个 AppDomain 中异步执行此操作会导致争用问题，但这是一个不同的主题！

# javascript - JavaScript 和 UTF-8 编码

> ID：15640332
> 
> 赞同：1
> 
> 时间：2013-03-26T14:59:49.633
> 
> 标签：javascript, python, dictionary, utf-8

`<script type="text/javascript" charset="UTF-8">`似乎没有做这项工作:(

我将从头开始，因为我正在寻找的解决方案可能不是我所要求的。

所以我在一个简单的CRM上。它的“简单”功能之一是注册尚未在`Customers`数据库中的客户的请求 - 如果 CRM 找不到名称与提供的名称匹配的客户，则注册新客户。这个非常流行的功能导致许多`Customers`实体除了comany名称属性之外都是空的。

后来用户确实添加了联系人属性，但工作流程非常缓慢和无聊。[为了加快速度，我编写了一个 python 函数，通过本地黄页](http://detalizetas-meklesanas-rezultats.zl.lv/?QNosaukums=AG%20SIA%20%C4%80BOLTI%C5%85A%20B%C5%AAVUZ%C5%85%C4%92MUMS)上的客户名称查找客户，解析 HTML 并将其转换为 dict()。这需要相当长的时间，所以我把它放在单独的查询页面上，根据请求由 JavaScript 显示为红色。

查询页面将字典呈现为这样的字符串： `[{'name': '"AG \xc4\x80bolti\xc5\x86a b\xc5\xabvuz\xc5\x86\xc4\x93mums", SIA', 'phone': '67244222'}]` **注意文字 UTF-8 编码**

`$.get('/zl?name=AG SIA ĀBOLTIŅA BŪVUZŅĒMUMS', function(data){...` 以与上面相同的方式检索。将检索到的 dataString 转换为 Object `result = eval(data)[0]`。所以现在不要`$('#zl').html(result.name)`把`"AG ÄboltiÅa bÅ«vuzÅÄmums", SIA`“ĀBOLTIŅA BŪVUZŅĒMUMS”放在应有的位置上。

我`<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>`在页眉和脚本开头，`<script type="text/javascript" charset="UTF-8">`但没有任何帮助。

**所以问题：**

1.  如何设置正确的 JS 输出编码？有什么技巧`string.toProperUTF-8()`吗？
2.  有没有办法在`.decode(UTF-8)`不导致服务器错误的情况下使用 python 字典？
3.  有没有问题较少的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:08:19.413

**这不起作用，因为 Javascript 和 Python 具有不同的字符转义语义**

如果我做对了，那么`eval`当它到达您的 javascript 时，您将使用 json 将其转换为对象。

*请不要这样做。*

相反，使用 python 的内置`json`模块以正确格式的 json 回复请求，然后`JSON.parse()`在您的 javascript 中使用来读取回复。这应该确保解析正确发生。

一个简单的例子，从 python 开始：

```
import json 

# lots of code...

@route("/my_page")
def my_page(request):
  return json.dumps({
    "siblings":["Eenie", "Meanie", "Meinie", "Mo"], 
    "ages":[1,2,3,4]
  })

# lots more code... 
```

现在从 Javascript 调用：

```
$.getJSON('/my_page', function(data, textStatus, jqXHR) {
  /* Do stuff with the object */
}); 
```

请注意我如何使用内置的 jQuery[`getJSON()`](http://api.jquery.com/jQuery.getJSON/)来获取对象。您也可以使用普通的旧 AJAX `JSON.parse()`。

**为什么`eval()`是个坏主意**

使用 eval 而不是`JSON.parse()`实际上会使您的代码面临大量安全漏洞。如果恶意用户（或分心的开发人员）可以在请求中放置 JavaScript 代码，则该代码可以自由支配您的页面，这会危及您的用户安全，并可能导致一些非常难以发现的错误。生产页面`eval()`在任何情况下都不应使用，特别是当被评估的数据不受信任时，就像它来自网络一样。

**关于 mime 类型的随机注释**

虽然这在大多数情况下不会导致问题，但您应该确保您的 python 代码返回[JSON 的正确 mime 类型](https://stackoverflow.com/questions/477816/what-is-the-correct-json-content-type)。弄错这个错误可能会导致难以调试的奇怪问题。如何做到这一点取决于您使用的 python 框架。

# c# - WPF - 从触发器访问子级

> ID：15640333
> 
> 赞同：4
> 
> 时间：2013-03-26T14:59:50.983
> 
> 标签：c#, wpf, listbox, styles, itemcontainerstyle

我有一个`ListBox`像我在那里展示的声明。关键是在项目定义中我有很多关于网格和元素的东西。我只想更改项目中一个图像的可见性，使其仅在选择元素本身时可见。

例如，当项目被选中时，我设法更改了项目的背景和总体外观，但我无法访问内部元素:(

```
<ListBox stuff stuff stuff>
    <ListBox.ItemTemplate>
        <DataTemplate DataType="local:Patient">
            <grids , borders, things, stuff
                <Image Name="image1" source opacity stuff/>
            </ grids bordes and design in general>
        </DataTemplate>
    </ListBox.ItemTemplate>

    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Foreground" Value="White"/>
                    <!--HERE I WANT TO CHANGE VISIBILITY OF THE IMAGE-->
                </Trigger>
            </Style.Triggers>
        </Style>
    </ListBox.ItemContainerStyle>

    <ListBox.Template>
        <!-- some other styles when deselected and other things -->
    </ListBox.Template>
</ListBox> 
```

我尝试使用：

```
<Setter TargetName="physiciansSettinsImage" Property="Visibility" Value="Visible"/> 
```

但它不能在样式设置器上设置。有什么线索吗？

整个设计相当复杂，所以我想尽可能避免重新编码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T15:18:34.413

将触发器移至`DataTemplate`。

我想***image1*** `Visibility`是`Collapsed`

```
<DataTemplate.Triggers>
    <DataTrigger Binding="{Binding RelativeSource=
        {RelativeSource Mode=FindAncestor, AncestorType=
            {x:Type ListBoxItem}},Path=IsSelected}" Value="True">
        <Setter TargetName="image1" Property="Visibility" Value="Visible"/>
    </DataTrigger>
</DataTemplate.Triggers> 
```

Now when the item is selected your `Image's Visibility`is set to `Visible`.

# html - HTML 表格高度和宽度大小按比例缩放

> ID：15640335
> 
> 赞同：0
> 
> 时间：2013-03-26T14:59:59.320
> 
> 标签：html, css

我有一个 HTML 表格，里面有一个单元格。表格根据单元格内的内容展开。

我的问题是我希望表格保持正方形大小，这样如果宽度缩放，高度将按比例缩放。即使内容是文本，我也需要像图像缩放这样的相同功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:35:10.967

这是一个例子

```
<body onLoad="tableSquare('table1');">
  <table class="square" id="table1" >
    <tr>
      <td>lalalalalallc sald;asd;l</td>
      <td>gf sdfgds gdsf gdsfg dfg dfg</td>
      <td>dfg dfgdf gxcvxcvxcvxcvxcvxcvxc jhkvxcvxcvdfgdfgdf gdfg</td>
    </tr>
    <tr>
      <td>dfg dfgdfg dfgdfg</td>
      <td>dfg dfgdf </td>
      <td></td>
    </tr>
  </table>
</body> 
```

风格

```
.square{
  background-color:#cfcfcf;
  width:100px;
  height:100px;
} 
```

Javascript 函数

```
function tableSquare(tableName){
  var t = document.getElementById(tableName);
  var max_size = Math.max(t.offsetWidth,t.offsetHeight);
  t.style.width = max_size+"px";
  t.style.height = max_size+"px";
} 
```

JSBIN 上的演示页面 [http://jsbin.com/ivepak/1/edit](http://jsbin.com/ivepak/1/edit)

# c# - 是否可以使用 postsharp 拦截通用列表上的添加/删除方法？

> ID：15640338
> 
> 赞同：1
> 
> 时间：2013-03-26T15:00:07.327
> 
> 标签：c#, validation, aop, postsharp

我是 AOP 的新手并发布了尖锐的 (2.1.0.0)。我一直在试验属性/方法拦截，并且能够为我编写的类编写拦截器方面。

我的目标是在编译之前没有包含任何逻辑的列表。

我想要实现的一个例子是：

```
public class Foo
{
    //Implementation should throw an exception if more than 1 string added.
    public List<string> MyList { get; set; }
} 
```

我不确定的一件事是列表。我希望能够在列表上调用 Add() 或 Remove() 时运行一些验证。如果我将列表包装在我自己的自定义列表类中并使用 aspect 属性装饰该类，我想我可以做到这一点。

我知道我可以使用我自己的自定义列表来完成此操作，并在我自己的添加/删除实现中做一些聪明的事情——但如果可能的话，这是我宁愿避免的。

是否有任何其他（或更好的）方法来拦截这些方法 - 特别是使用 post sharp？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:09:37.240

没有办法以`List<T>`这种方式修改类，因为该`Add`方法不是虚拟的。如果该`MyList`属性返回一个`IList<string>`，那么它返回的对象可以执行这种类型的验证。

.NET 框架提供[`Collection<T>`](http://msdn.microsoft.com/en-us/library/ms132397.aspx)类来帮助您扩展某些列表功能。实现您描述的功能的最简单方法是从中派生一个类并在[`InsertItem`](http://msdn.microsoft.com/en-us/library/ms132412.aspx).

该类`Collection<T>`实现`IList<string>`了 ，因此您仍然需要更改 的属性类型`Foo.MyList`。

**编辑 AOP：**如果你想为这个特性使用 AOP，而不是从`MyList`用户操作的列表中返回一个列表，`Foo`该类将提供在对支持列表进行更改之前执行必要验证的方法`Add`。`Remove`在这种情况下，我会`ReadOnlyCollection<T>`从`MyList`属性返回以明确列表仅通过`Foo`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:04:18.880

.NET 中的通用列表没有集合更改事件。我知道你不想听到这个，但你要么需要包装 List，要么需要创建一个实现 IList 的类。

# java - 从 Hibernate (JPA) + Tomcat 到 DataNucleus (JPA) + GAE：我的模型需要进行哪些更改才能工作？

> ID：15640341
> 
> 赞同：1
> 
> 时间：2013-03-26T15:00:16.450
> 
> 标签：java, google-app-engine, gwt, jpa, datanucleus

我有一个功能齐全的 Web 应用程序，它在 Tomcat 6 上使用 GWT（2.5.0）、Hibernate（具有 JPA 风格）。我现在想将此应用程序转换为在 Google App Engine (GAE) 上运行（我有 1.7.6） . GAE 使用 DataNucleus，一切都开始了，因为我必须从 Hibernate 转换为 JDO 或 JPA（我选择了后者，因为我已经将 JPA 用于我的模型），因此使用了 EntityManager。

我已经完成了从`Hibernate Session`到的转换`EntityManager`， `Transaction`成为`EntityTransaction`，`beginTransaction()`成为`getTransaction()`，我必须`begin()`在它之后添加一个，`saveOrUpdate`成为`merge`，`delete`成为`remove` 等等。问题来自映射。

在休眠中：

```
@Entity
@DiscriminatorValue("extend")
public class Admin extends User implements Serializable {

    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
    @JoinColumn(name="admin_id")
    @IndexColumn(name="users_index")
    private List<User> users;

    //...
}

@Entity
@Inheritance(strategy=InheritanceType.JOINED)
public class User implements Serializable {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    protected long id;

    @ManyToOne
    @JoinColumn (name="admin_id", updatable = false, insertable = false)
    private Admin admin;

    //...
} 
```

好吧，首先我不允许使用带有@OneToMany/@ManyToOne/其他关系的long（或Long）类型的id，所以我的选择是`Key`编码字符串。`Key`我不允许在 GWT 中使用（阅读有关 resmarksystems gwt jar 文件的信息，但这似乎是错误的做法/黑客，如果我错了，请纠正我）所以我认为编码字符串是要走的路：

```
@Entity
@DiscriminatorValue("extend")
public class Admin extends User implements Serializable {
    @OneToMany(mappedBy="admin", cascade = CascadeType.ALL, fetch = FetchType.EAGER)
    private List<User> users;

    //...
}

@Entity
@Inheritance(strategy=InheritanceType.JOINED)
@MappedSuperclass //Had to add this or exception: Found inheritance strategy "new-table" on Admin.  This strategy is not supported in this context. Please see the documentation for information on using inheritance with JPA: http://code.google.com/appengine/docs/java/datastore/usingjpa.html#Inheritance
public class User implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Extension(vendorName="datanucleus", key="gae.encoded-pk", value="true")
    protected String id;

    @Extension(vendorName="datanucleus", key="gae.pk-id", value="true")
    protected Long keyId;

    @ManyToOne
    private Admin admin;

    //...
} 
```

这只会给我这些警告：

```
15:58:51,181 WARN  [DataNucleus.MetaData] - Meta-data warning for Admin.users: Error in meta-data for Admin.users : The datastore does not support joins and therefore cannot honor requests to place related objects in the default fetch group.  The field will be fetched lazily on first access.  You can modify this warning by setting the datanucleus.appengine.ignorableMetaDataBehavior property in your config.  A value of NONE will silence the warning.  A value of ERROR will turn the warning into an exception.
15:58:51,182 WARN  [DataNucleus.MetaData] - Meta-data warning for Admin.admin: Error in meta-data for User.admin : The datastore does not support joins and therefore cannot honor requests to place related objects in the default fetch group.  The field will be fetched lazily on first access.  You can modify this warning by setting the datanucleus.appengine.ignorableMetaDataBehavior property in your config.  A value of NONE will silence the warning.  A value of ERROR will turn the warning into an exception. 
```

我的一个主要问题是，我将如何使用上述方法查询我的数据存储？例如，在 Hibernate 中，当我想获取给定管理员 (admin_id) 的所有用户时，我会执行以下操作：

```
 Query queryResult = session.createQuery("from " + User.class.getName() + " where admin_id='" + id + "'"); 
```

使用编码字符串作为 id，我可以简单地做：

```
 Query queryResult = em.createQuery("select from " + User.class.getName() + " where admin_id='" + id + "'"); 
```

图片在哪里`keyId`出现？据我了解，您必须在我调用之前为其设置一个值，`merge`或者`persist`给定该值，生成我的编码字符串`id`。我有这个权利吗？当我在对象的持久性之前设置它时，该值应该是什么？更新记录时是否必须提供不同的值？我可以为多条记录使用相同的 keyId 吗？我猜不是（鉴于以下代码）。

为了说明我的意思，假设以下内容：

```
@Entity
public class Log implements Serializable {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Long id; //can't use long or I get another exception here...

    @OneToOne(cascade=CascadeType.ALL)
    @JoinColumn(referencedColumnName="id")
    private LogType type;

    public Log(LogType type, Admin admin, String message, long timestamp) {
        this();
        this.type = type;
        this.admin = admin;
        this.message = message;
        this.timestamp = timestamp;
    }

    //...
} 
```

和

```
@Entity
public class LogType implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Extension(vendorName="datanucleus", key="gae.encoded-pk", value="true")
    protected String id;

    @Extension(vendorName="datanucleus", key="gae.pk-id", value="true")
    protected Long keyId;

    private String name;

    public LogType(Long id, String name) {
        this();
        this.keyId = id;
        this.name = name;
    }
} 
```

然后，假设我创建了一个新的 LogType（我有一个用于日志类型的枚举 LogTypeEnum）：

公共静态 LogType INFO = new LogType(String.valueOf(LogTypeEnum.INFO.ordinal()), "INFO");

然后当我尝试在数据库中插入以下内容时：

```
Log myLog = new Log(INFO, admin, msg, System.currentTimeMillis());
tx.begin();
em.merge(myLog);
tx.commit(); 
```

第一次它工作正常（好吧，只有当不是`ordinal`0 ... 我想 10 是我的实际日志 ID，而 11 是我的实际 LogType id。请注意，我每次都清除表格，因此它不是表格中的第 11 个条目。每张表只有一条记录。`keyId``LogType``Log``Log(10)/LogType(11)`

**我第二次**调用上面的代码（不清除表格），我得到：

```
javax.persistence.PersistenceException: Attempt to assign child with key "Log(10)/LogType(11)" to parent with key "Log(no-id-yet)". Parent keys are immutable 
```

请注意，第二次，包含在 myLog 中的 LogType INFO 确实有一个 id（一个编码字符串），因为它在第一次运行时就已经存储了。

我对此进行了搜索，但没有发现任何解释错误或解决方案的内容。似乎它不想写另一个具有相同 LogType 的 Log。有任何想法吗？

非常感谢阅读！

# php - 从 url 获取外部页面标题

> ID：15640344
> 
> 赞同：2
> 
> 时间：2013-03-26T15:00:20.383
> 
> 标签：php, javascript, jquery, ajax

代码：

```
<input type="text" id="url_value"/>
<input type="button" id="get_title" value="Get title"/><br/>

<span class="url_title"></span> 
```

小提琴：http: [//jsfiddle.net/AdNgZ/](http://jsfiddle.net/AdNgZ/)

有没有办法将任何 url 放在文本输入上，获取页面标题并将其显示在 span 上而不转到该页面？

示例：如果我把这个页面的 url: [Get external page title from url](https://stackoverflow.com/questions/15640344/get-external-page-title-from-url)，我得到页面标题： php - Get external page title from url

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:31:42.323

```
<?php
$page = file_get_contents($_REQUEST["url"]);
$title = preg_replace('/<title>(.*)</title>/i', '$1', $page);
echo htmlentities($title);
?> 
```

使用此代码，您需要激活`allow_url_fopen`php.ini 指令。

**警告**：尝试制作安全网站列表并允许仅在其页面中获取标题，以避免 XXS 攻击。

# javascript - Google Maps API - 获取油耗

> ID：15640351
> 
> 赞同：0
> 
> 时间：2013-03-26T15:00:32.777
> 
> 标签：javascript, google-maps

我正在构建一个基于 Google Maps API 的网页，让用户要求旅行，比如说从 A 点到 B 点。
我现在可以显示路线，但是......我不能找到一种显示油耗的方法，就像谷歌地图一样......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:06:44.537

我不相信这是地图 API 的一部分，而是 maps.google.com 上的一个功能。不过，您可以获取距离，然后根据某些因素自己计算油耗。

# r - 当我将 knitr 和 Rscript 与 opts_chunk 一起使用时，执行停止

> ID：15640353
> 
> 赞同：4
> 
> 时间：2013-03-26T15:00:37.663
> 
> 标签：r, bash, knitr, rscript

我在 Mac OS 中编写了一个 bash 脚本，它获取我的 .rnw 文件，编织它，然后制作一个 .pdf。要编织我的文件，我正在使用命令

```
Rscript -e "library(knitr); knit('file.rnw', encoding='utf8')" 
```

一切正常。但是，我不想在我的最终文档中出现 ## 字符。我使用 R 提示符测试了以下命令

```
library(knitr)
opts_chunk$set(comment=NA)
knit('file.rnw', encoding='utf8') 
```

他们给了我我想要的东西：R 命令输出中没有注释的文档。但是如果我尝试运行

```
Rscript -e "library(knitr); opts_chunk$set(comment=NA); knit('livro.rnw', encoding='utf8')" 
```

我明白了

```
Error: could not find function "opts_chunk"
Execution halted 
```

结果。我究竟做错了什么？如何使用命令行在 knitr 中请求我的块的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:47:39.120

我不确定易辉说“把答案移到这里”是什么意思，但*这里*是邓肯默多克的 R-help 答案，易辉批准了：

> 这看起来像一个 bash 问题：它似乎正在用空白字符串替换 $set。使用适当的引用或转义来告诉它不要这样做。（我认为在命令周围使用单引号会起作用；您需要在其中使用双引号。）

* * *

易辉补充道：

> 是的，我相信这就是问题所在。同样的问题在这里问： [https ://github.com/yihui/knitr/issues/162#issuecomment-9017997](https://github.com/yihui/knitr/issues/162#issuecomment-9017997)

# iphone - iOS iPhone Core Data如何使用特定属性在一对多关系中查找对象？

> ID：15640356
> 
> 赞同：0
> 
> 时间：2013-03-26T15:00:53.550
> 
> 标签：iphone, ios, objective-c, search, core-data

我有一个名为 Application 的核心数据实体，它可以将多个屏幕截图作为一组添加到其中。每个屏幕截图都有一个“订单”属性，我希望用它来仅从每组中提取第一个屏幕截图。

下面是我目前正在使用的代码，但**也许有一些更简单/更有效的方法可以用来从 -to many 关系中提取具有特定顺序的屏幕截图？**

```
 if(managedObject.screenshots.count>0)
        {

            //search for a screenshot 
            NSMutableArray* predicatesArray = [[NSMutableArray alloc] initWithCapacity:2];
            [predicatesArray addObject:
            [NSPredicate predicateWithFormat:@"SELF.order == %d",0]];
            [predicatesArray addObject:
            [NSPredicate predicateWithFormat:@"SELF.application == %@",managedObject]];

            NSPredicate* compoundPredicate = [NSCompoundPredicate andPredicateWithSubpredicates: predicatesArray];

            NSFetchRequest *firstScreenshot = [NSFetchRequest fetchRequestWithEntityName:@"Screenshot"];
            firstScreenshot.predicate = compoundPredicate;

            NSError* error;
            NSArray* results =  [managedObject.managedObjectContext executeFetchRequest:firstScreenshot error:&error];

            if(error)
            {
                DLog(@"%@",[error localizedDescription]);
            }

            //if we got a result
            if(results.count>0)
            {
                Screenshot* screenshot = [results objectAtIndex:0];
                cell.screenshot.image = [UIImage imageWithData:screenshot.image];
            }else
            {
              cell.screenshot.image = [UIImage imageNamed:@"blank1.png"];  
            }

        } 
```

# groovy - 奇怪的常规类加载异常

> ID：15640366
> 
> 赞同：1
> 
> 时间：2013-03-26T15:01:33.673
> 
> 标签：groovy, classloader

我们想使用 groovy/grails 作为 Glassfish-Remote-Client，但我们遇到了奇怪的类加载问题。

首先是通过 groovy/grails 调用时触发错误的测试代码。没关系，当它通过 java 调用时。通过groovy运行时，会触发java.lang.ClassCastException: com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject cannot be cast to javax.rmi.CORBA.PortableRemoteObjectDelegate in (PortableRemoteObject.java:77) 之前错误，可以手动进行转换。

==========来源==========

```
package test;

import java.lang.reflect.Field;

public class J2EETest {
   public static void main(String[] args) throws Exception {
            new J2EETest().classLoaderTest();
   }

   public static void classLoaderTest() throws Exception {
           ClassLoader classLoader = J2EETest.class.getClassLoader();
           ClassLoader threadClassLoader = Thread.currentThread().getContextClassLoader();
           System.out.println("classLoader: " + classLoader);
           System.out.println("threadClassLoader: " + threadClassLoader);

           Class klass = Class.forName( "com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject", false, threadClassLoader );
           Object obj = klass.newInstance();
           System.out.println("Object -> " + obj.toString());
           // This works
           javax.rmi.CORBA.PortableRemoteObjectDelegate del = (javax.rmi.CORBA.PortableRemoteObjectDelegate) obj;
             try {
                 System.out.println("Init of javax.rmi.PortableRemoteObject");
                   // This doesn't work ! 
                   System.out.println( Class.forName("javax.rmi.PortableRemoteObject", true, threadClassLoader));
                   Class prOklass = javax.rmi.PortableRemoteObject.class;
                   Field staticfield = prOklass.getDeclaredField("proDelegate");
                   staticfield.setAccessible(true);
                   System.out.println("Reflection: PortableRemoteObject.proDelegate ->" + staticfield.get(null));
                   System.out.println("OK");
               }
               catch(Throwable e) {
                   System.err.println("BOOM");
                   e.printStackTrace();
              }

  }

  } 
```

======= JAVA 测试运行 =======

```
$ export CLASSPATH=build:lib/glassfish/gf-client-module.jar     # gf-client-module.jar -> GLASSFISH-Client Libs
$ java  -Djavax.rmi.CORBA.PortableRemoteObjectClass=com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject test.J2EETest 
classLoader: sun.misc.Launcher$AppClassLoader@e776f7
threadClassLoader: sun.misc.Launcher$AppClassLoader@e776f7
Object -> com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject@5511e28
Init of javax.rmi.PortableRemoteObject class javax.rmi.PortableRemoteObject
Reflection: PortableRemoteObject.proDelegate -> com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject@20e5f01b

OK 
```

======= 现在是 Groovy 版本 =======

```
$ groovy -Djavax.rmi.CORBA.PortableRemoteObjectClass=com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject -e "test.J2EETest.classLoaderTest()"
classLoader: org.codehaus.groovy.tools.RootLoader@5dcba031
threadClassLoader: org.codehaus.groovy.tools.RootLoader@5dcba031
Object -> com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject@1bf3f158
Init of javax.rmi.PortableRemoteObject

BOOM

java.lang.ExceptionInInitializerError
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at test.J2EETest.classLoaderTest(J2EETest.java:83)
at test.J2EETest$classLoaderTest.call(Unknown Source)
at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
at script_from_command_line.run(script_from_command_line:1)

at groovy.lang.GroovyShell.runScriptOrMainOrTestOrRunnable(GroovyShell.java:266)
at groovy.lang.GroovyShell.run(GroovyShell.java:517)
at groovy.lang.GroovyShell.run(GroovyShell.java:172)
at groovy.ui.GroovyMain.processOnce(GroovyMain.java:553)
at groovy.ui.GroovyMain.run(GroovyMain.java:337)
at groovy.ui.GroovyMain.process(GroovyMain.java:323)
at groovy.ui.GroovyMain.processArgs(GroovyMain.java:120)
at groovy.ui.GroovyMain.main(GroovyMain.java:100)     

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.codehaus.groovy.tools.GroovyStarter.rootLoader(GroovyStarter.java:108)
at org.codehaus.groovy.tools.GroovyStarter.main(GroovyStarter.java:130)

Caused by: java.lang.ClassCastException: com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject cannot be cast to   javax.rmi.CORBA.PortableRemoteObjectDelegate   at javax.rmi.PortableRemoteObject.<clinit>(PortableRemoteObject.java:77)
 ... 22 more 
```

======= 现在是没有 -Djavax.rmi.CORBA.PortableRemoteObjectClass 的 Groovy 版本 =======

这可行，但不是 glassfish 客户端的选项，因为 InitialContext （或那里的其他东西）将设置 javax.rmi.CORBA.PortableRemoteObjectClass = com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject

```
$ groovy -e "test.J2EETest.classLoaderTest()"                       
classLoader: org.codehaus.groovy.tools.RootLoader@3b4d82e1
threadClassLoader: org.codehaus.groovy.tools.RootLoader@3b4d82e1
Object -> com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject@527e2f47
Init of javax.rmi.PortableRemoteObject
class javax.rmi.PortableRemoteObject
Reflection:  PortableRemoteObject.proDelegate -> com.sun.corba.se.impl.javax.rmi.PortableRemoteObject@5b3bd1c0  # com.sun.corba.ee != com.sun.corba.se 
```

好的

有没有人遇到过类似的问题或知道如何让这段代码工作？

亲切的问候

坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:07:12.893

我试着运行你的例子，我得到：

```
classLoader: groovy.lang.GroovyClassLoader$InnerLoader@538d7ace
threadClassLoader: groovy.lang.GroovyClassLoader@1e22ab57
Caught: java.lang.ClassNotFoundException: com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject
java.lang.ClassNotFoundException: com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject
    at java_lang_Class$forName.call(Unknown Source)
    at test.J2EETest.classLoaderTest(J2EETest.groovy:16)
    at test.J2EETest$classLoaderTest.call(Unknown Source)
    at test.J2EETest.main(J2EETest.groovy:7) 
```

我能建议的最好的方法是隔离变化的事物。最可能的罪魁祸首是您在这两种情况下都使用的 JVM。将用于执行 groovy 的 JVM 与用于直接运行 jar 的 JVM 进行比较。我还建议将 groovy-all.jar 放入 Classpath 并尝试从 Java 运行 Groovy 解释器。

# javascript - Jquery UI 多次使用对象

> ID：15640367
> 
> 赞同：1
> 
> 时间：2013-03-26T15:01:38.857
> 
> 标签：javascript, jquery, jquery-ui, frontend

我需要显示不同数量的日期选择器。表单是动态生成的，所以我无法预测我将使用多少个 Datepicker。是否可以对所有输入使用一个 id？

```
 $("#datepicker").datepicker({ dateFormat: 'yy-mm-dd' }).mask("9999-99-99");
<input type="text" name="startDate1" value="" id="datepicker" >
<input type="text" name="startDate2" value="" id="datepicker" > 
```

[http://jsfiddle.net/UKbuC/](http://jsfiddle.net/UKbuC/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:04:43.667

不，您不应拥有多个具有相同 ID 的元素。在 jquery 中，更好的方法是给它们一个类 'datepicker' 并使用选择器 '.datepicker' 代替。

```
<input type="text" name="startDate1" value="" class="datepicker" >
<input type="text" name="startDate2" value="" class="datepicker" >

$(".datepicker").datepicker({ dateFormat: 'yy-mm-dd' }).mask("9999-99-99"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:04:44.020

对所有输入使用一个**类**而不是 id，并使用类名绑定日期选择器。

```
// bind datepicker using class name
$(".mydatepicker").datepicker({ dateFormat: 'yy-mm-dd' }).mask("9999-99-99");

<input type="text" name="startDate1" value="" class="mydatepicker" >
<input type="text" name="startDate2" value="" class="mydatepicker" > 
```

# jquery - asp.net 菜单作为 jquery 工具提示不需要隐藏

> ID：15640368
> 
> 赞同：0
> 
> 时间：2013-03-26T15:01:42.263
> 
> 标签：jquery, asp.net

我有使用站点地图绑定菜单的 asp:menu 控件。我正在使用 jquery 工具提示来显示菜单。问题是当我将鼠标悬停在工具提示上时，是隐藏的。

这是 jQuery 代码：

`$(".user").tooltip({ position: "bottom right", effect: 'slide', offset: [29, -162], relative: !0, delay: 800, events: { def: "click,mouseleave", tooltip: "mouseenter,mouseleave" } });`

这是 ASP.NET 控件：

```
<asp:menu id="UserMenu" CssClass="tooltip" 
staticdisplaylevels="2" 
orientation="Vertical" 
StaticMenuStyle-CssClass="user-menu"
datasourceid="UserMenuSource" 
SkipLinkText=""
IncludeStyleBlock="false"
runat="server"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:18:15.863

你可以试试这个 ClickMenu 插件

[http://p.sohei.org/jquery-plugins/clickmenu/](http://p.sohei.org/jquery-plugins/clickmenu/)

这是[演示](http://p.sohei.org/stuff/jquery/clickmenu/demo/demo.html)

# database - B 树数据库选项

> ID：15640369
> 
> 赞同：0
> 
> 时间：2013-03-26T15:01:42.823
> 
> 标签：database, postgresql, indexing, b-tree

我需要实现两个不同 pgsql 表的两个 b-tree 索引，最好在运行 python webserver 进程的同一个盒子上的内存中（查询需要尽可能快）。我想知道实现这一点的最佳方法：

1.  在进程内索引和维护内存中的 b-trees（使用 python 库手动）
2.  在单独的内存数据库（redis、mongo 等）中实现索引
3.  使用像 neo4j 或flock 之类的图形数据库（玩新热点的借口）
4.  调整 pgsql 以自己做索引。（以数据库中其他数据的性能下降为代价？）

我的需求是，按重要性排序：

*   查询速度
*   最近邻搜索*
*   索引大小
*   开源
*   蟒蛇绑定:)

附加说明：树一次可以达到数千个节点，必须承受高插入/删除率

*因此，如果我搜索 756.837，但仅存在 755.928 和 757.113，则根据参数返回任一

需要明确的是，这个 postgres 数据库将在正在处理的数据之上提供传统的 webapp crud 数据。我愿意增加复杂性以维护 webapp 数据的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T08:41:01.283

第一步是看看你能把 PostgreSQL 索引推到多远来做你想做的事。典型的 btree 索引很快，但它们没有很多特性。特别是，他们不会很好地进行 knn 搜索。根据您的需要，您可能希望将索引从 Btree 更改为 GiST。GiST 提供了 KNN 搜索（假设您的数据类型支持此功能！），并允许您做很多其他您正在寻找的事情。不利的一面是，根据您的数据类型，您最终可能需要进行一些编程才能获得对某些数据类型的适当支持。

GiST 提供了比标准 btree 索引更多的搜索选项，但它们的查询速度也有点慢。然而，主要优点是它们确实支持比 GIN 索引更高的插入/更新率，并且它们也支持 knn 搜索。

如果这对你不起作用......你可能想在内存中实现其他东西，可能使用内存缓存（如 memcached），甚至只是普通的旧 Sys V IPC 和一个单独的进程。不过要小心并发访问内存！

# c# - ADO.NET OleDB 和非常旧的 dBASE IV 文件

> ID：15640373
> 
> 赞同：3
> 
> 时间：2013-03-26T15:01:49.583
> 
> 标签：c#, encoding, ado.net, oledb, dbase

我正在以这种方式使用 OleDb 读取 DBF 文件：

```
[TestMethod]
public void TestMethod2()
{
  const string path = @"D:\VL816183.DBF";

  var connection = new OleDbConnection(string.Format("Provider=Microsoft.Jet.Oledb.4.0;Data Source={0};Extended Properties=\"dBase IV\"", Path.GetDirectoryName(path)));
  connection.Open();

  var command = new OleDbCommand(string.Format("select MNO from {0}", Path.GetFileName(path)), connection);

  using (var reader = command.ExecuteReader())
  {
    while (reader.Read())
    {
      var str = (string)reader["MNO"];

    }
  }

  connection.Close();
} 
```

一切似乎都很好，但字符串数据有问题。源数据库包含使用**CodePage=852**保存的字符串，我找不到正确读取它的方法。

我尝试将 CharSet/CodePage/CharacterSet 设置为连接字符串的扩展属性，但没有任何运气（实际上，抛出了异常：找不到可安装的 ISAM）。

我还尝试使用“vfpoledb”提供程序阅读它，但仍然没有运气。

例如，有字符串“FRANTIŠEK”，但 str 变量包含“FRANTIµEK”。

有人知道怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T06:28:52.097

好吧，几个小时后，我设法以正确的方式获得了字符串。诀窍在于将字符串列读取为 varbinary(length) ：

```
[TestMethod]
public void TestMethod2()
{
  const string path = @"D:\KN_Vzorka_2012\VL816183.DBF";

  var connection = new OleDbConnection(string.Format("Provider=vfpoledb;Data Source={0};Extended Properties=\"dBase IV\";Locale Identifier=852;", Path.GetDirectoryName(path)));
  connection.Open();

  var command = new OleDbCommand(string.Format("select cast(MNO as varbinary(20)) as MNO FROM {0}", Path.GetFileName(path)), connection);

  using (var reader = command.ExecuteReader())
  {
    while (reader.Read())
    {
      var arr = (byte[])reader["MNO"];
      var str = Encoding.GetEncoding(852).GetString(arr);

    }
  }

  connection.Close();
} 
```

唯一的问题是 varbinary CAST 中的长度。但它有效。希望这对某人也有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:26:35.330

您可以在连接字符串中指定区域设置标识符。尝试将连接字符串文本编辑为以下内容：

```
"Provider=Microsoft.Jet.Oledb.4.0;Data Source={0};Extended Properties=\"dBase IV\";Locale Identifier=852;" 
```

# plugins - 如何从 wordpress 中的 Cincopa 插件中删除图片库下方的标签图片？

> ID：15640375
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:01:49.467
> 
> 标签：plugins, wordpress

我的页面上有 cincopa 图像库。在 wordpress 中的这个图片库下方，有 cincopa 的标签图片，上面写着“由 cincopa 提供支持”和社交媒体图片（推特、脸书）。这个插件有一个php脚本页面，我找不到要评论或删除的代码，因此可以隐藏或删除标签图像。请帮助我如何从cincopa插件的一个php文件中删除或评论标签图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:45:10.263

这是 Cincopa 文章，解释了删除 Cincopa 品牌的方法 [http://help.cincopa.com/entries/444264-How-can-I-remove-the-Powered-By-Cincopa-branding-](http://help.cincopa.com/entries/444264-How-can-I-remove-the-Powered-By-Cincopa-branding-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-13T11:08:59.667

如果您想删除 Cincopa 的品牌，您需要从免费帐户升级到专业帐户。

# visual-studio - visual studio 2012 opendialog 卡在默认目录

> ID：15640377
> 
> 赞同：1
> 
> 时间：2013-03-26T15:01:57.687
> 
> 标签：visual-studio, openfiledialog

我正在 Visual Studio Ultimate 2012 上编写一个基于 Windows 窗体的应用程序。我放入了一个 opendialog 以打开和读取文件。这是代码： -

```
private void button1_Click(object sender, System.EventArgs e)
{
Stream myStream = null;
OpenFileDialog openFileDialog1 = new OpenFileDialog();

openFileDialog1.InitialDirectory = "c:\\" ;
openFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*" ;
openFileDialog1.FilterIndex = 2 ;
openFileDialog1.RestoreDirectory = true ;

if(openFileDialog1.ShowDialog() == DialogResult.OK)
{
    try
    {
        if ((myStream = openFileDialog1.OpenFile()) != null)
        {
            using (myStream)
            {
                // Insert code to read the stream here.
            }
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show("Error: Could not read file from disk. Original error: " + ex.Message);
    }
} 
```

}

但是每次我尝试运行它时，当我从浏览器窗口中选择一个文件时，它会显示一个 filenotfound 异常，因为它在默认目录中查找文件（位于 Documents/VisualStudio/Projects/WindowsFormApplication/bin/debug/ openFileDialog1)，不在我指定的目录中。请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:18:39.017

问题是以下行

```
openFileDialog1.RestoreDirectory = true; 
```

这会导致在关闭对话框后将当前目录重置为原始目录。看来该`OpenFile`方法正在使用相对路径，因此试图打开对话框开始的文件，而不是结束的文件。

`RestoreDirectory`使用该文件后，请尝试删除设置并手动重置路径

# ruby-on-rails - 当我从不同的控制器渲染部分时，堆栈级别太深错误

> ID：15640384
> 
> 赞同：0
> 
> 时间：2013-03-26T15:02:09.493
> 
> 标签：ruby-on-rails

我有一个页面，taxons#show，列出了许多产品。当您单击产品时，默认情况下会将用户定向到 products#show，其中会呈现部分 _cart_local.html.erb。但是，我已经更改了 UX，因此当您单击分类单元中的产品时#show 会在同一窗口中弹出一个灯箱，因此在分类单元控制器中并显示视图。但是，当我也尝试在灯箱内渲染*购物车*_local 部分时，我得到一个堆栈级别太深的错误。

这是有问题的文件。我知道它也可能发生在其他地方。通常是什么导致这种类型的错误？

```
<%= form_for :order, :url => populate_orders_path do |f| %> 
```

```
<% if product.has_variants? %>
  <div id="product-variants" class="columns five alpha">
    <h6 class="product-section-title"><%= t(:variants) %></h6>
    <ul>
      <% has_checked = false
      product.variants.active(current_currency).each_with_index do |v,index|
        next if v.option_values.empty? || (!v.in_stock && !Spree::Config[:show_zero_stock_products])
        checked = !has_checked && (v.in_stock || Spree::Config[:allow_backorders])
        has_checked = true if checked %>
        <li>
          <%= radio_button_tag "products[#{product.id}]", v.id, checked, :disabled => !v.in_stock && !Spree::Config[:allow_backorders], 'data-price' => v.price_in(current_currency).display_price %>
          <label for="<%= ['products', product.id, v.id].join('_') %>">
            <span class="variant-description">
              <%= variant_options v %>
            </span>
            <% if variant_price v %>
              <span class="price diff"><%= variant_price v %></span>
            <% end %>
          </label>
        </li>
      <% end%>
    </ul>
  </div>
<% end%>

<% if product.price_in(current_currency) and !product.price.nil? %>
  <div data-hook="product_price" class="columns five <% if !product.has_variants? %> alpha <% else %> omega <% end %>">

    <div id="product-price">
      <h6 class="product-section-title"><%= t(:price) %></h6>
      <div><span class="price selling" itemprop="price"><%= product.price_in(current_currency).display_price %></span></div>
    </div>

    <div class="add-to-cart">
      <% if product.on_sale? %>      
        <%= number_field_tag (product.has_variants? ? :quantity : "variants[#{product.master.id}]"),
          1, :class => 'title', :in => 1..product.on_hand, :min => 1 %>
        <%= button_tag :class => 'large primary', :id => 'add-to-cart-button', :type => :submit do %>
          <%= t(:add_to_cart) %>
        <% end %>
      <% else %>
        <%= content_tag('strong', t(:out_of_stock)) %>
      <% end %>
    </div>
  </div>
<% else %>
    <div id="product-price">
      <br>
      <div><span class="price selling" itemprop="price"><%= t('product_not_available_in_this_currency') %></span></div>
    </div>
<% end %>    

</div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:05:18.657

这个错误通常是递归变坏了。

部分调用自身，或者部分中使用的函数之一调用自身（带有坏/无中断条件）。

# xslt - XSLT 错误原因

> ID：15640385
> 
> 赞同：0
> 
> 时间：2013-03-26T15:02:15.130
> 
> 标签：xslt, xslt-2.0

我有下面的xslt。

```
 <?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
    <xsl:output method="html"/>
    <xsl:template match="/">
        <xsl:text disable-output-escaping="yes">&lt;!DOCTYPE html&gt;</xsl:text>
        <html>
            <head>
                <title>
                    <xsl:value-of select="index/title"/>
                </title>
                <link rel="stylesheet" href="er:#css" type="text/css"/>
            </head>
            <body>
                <xsl:apply-templates/>
            </body>
        </html>
    </xsl:template>
    <xsl:template match="index">
        <div class="index">
            <xsl:variable name="num">
                <xsl:number level="any" format="01"/>
            </xsl:variable>
            <a name="BVI_IDX_{$num}"/>
            <div class="index-title">
                <xsl:apply-templates select="title"/>
                <xsl:value-of select="index/title/@text()"/>
            </div>
            <xsl:apply-templates select="child::node()[not(self::title)]"/>
            <!--<xsl:apply-templates/>-->
        </div>
    </xsl:template>
    <!--<xsl:template match="index">
        <div class="index">
            <div class="index-title">
                <xsl:value-of select="index/title/@text()"/>
            </div>
            <xsl:apply-templates/>
        </div>
    </xsl:template>-->
    <xsl:template match="indexdiv">
        <div class="indexdiv">
            <xsl:apply-templates/>
        </div>
    </xsl:template>
    <xsl:template match="indexdiv/title">

    </xsl:template>
    <xsl:template match="indexentry">
        <div class="indexentry">
            <xsl:apply-templates/>
        </div>
    </xsl:template>
    <xsl:template match="primaryie">
        <div class="primaryie">
            <xsl:apply-templates select="content-style"/>
            <xsl:if test="contains(current()/text(), '.')">
                <xsl:variable name="numberString" select="substring(current()/text(), string-length(substring-before(current()/text(),'.'))-1)"/>
                <xsl:call-template name="numbersToLink">
                    <xsl:with-param name="numbersString" select="$numberString"/>
                </xsl:call-template>
            </xsl:if>
        </div>
    </xsl:template>
    <xsl:template match="secondaryie">
        <xsl:variable name="textAll">
            <xsl:value-of select="text()"/>
        </xsl:variable>
        <xsl:variable name="textOnly">
            <xsl:choose>
                <xsl:when test="contains($textAll,'.')">
                    <xsl:value-of select="substring($textAll,1,string-length(substring-before($textAll,'.'))-1)"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="text()"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="textAll1">
            <xsl:value-of select="text()"/>
        </xsl:variable>
        <xsl:variable name="numbersOnly">
            <xsl:choose>
                <xsl:when test="contains($textAll1,'.')">
                    <xsl:value-of select="substring($textAll1,string-length($textOnly))"/>
                </xsl:when>
            </xsl:choose>
        </xsl:variable>
        <div class="secondaryie">
            <xsl:value-of select="$textOnly"/>
            <xsl:call-template name="numbersToLink">
                <xsl:with-param name="numbersString" select="$numbersOnly"/>
            </xsl:call-template>
            <xsl:if test="current()/content-style/node()">
                <xsl:for-each select="current()/content-style">
                    <xsl:call-template name="content-style"/>
                </xsl:for-each>
            </xsl:if>
        </div>
    </xsl:template>
    <xsl:template match="tertiaryie">
        <xsl:variable name="tertClassType">
            <xsl:value-of select="@level"/>
        </xsl:variable>
        <xsl:variable name="tertClassTypName">
            <xsl:value-of select="concat('tertiaryie-', $tertClassType)"/>
        </xsl:variable>
        <xsl:variable name="textAll">
            <xsl:value-of select="text()"/>
        </xsl:variable>
        <xsl:variable name="textOnly">
            <xsl:choose>
                <xsl:when test="contains($textAll,'.')">
                    <xsl:value-of select="substring($textAll,1,string-length(substring-before($textAll,'.'))-1)"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="text()"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="textAll1">
            <xsl:value-of select="text()"/>
        </xsl:variable>
        <xsl:variable name="numbersOnly">
            <xsl:choose>
                <xsl:when test="contains($textAll1,'.')">
                    <xsl:value-of select="substring($textAll1,string-length($textOnly))"/>
                </xsl:when>
            </xsl:choose>
        </xsl:variable>
        <div class="{$tertClassTypName}">
            <xsl:value-of select="$textOnly"/>
            <xsl:call-template name="numbersToLink">
                <xsl:with-param name="numbersString" select="$numbersOnly"/>
            </xsl:call-template>
        </div>
    </xsl:template>

    <xsl:template match="content-style" name="content-style">
        <xsl:variable name="fontStyle">
            <xsl:value-of select="concat('font-style-',@font-style)"/>
        </xsl:variable>
        <span class="{$fontStyle}">
            <!--        <xsl:choose>
<xsl:when test="matches(.,".*\d\.\d+-\d\.\d+.*")">
</xsl:when>
        </xsl:choose>
-->
<xsl:variable name="textAll">
                <xsl:value-of select="../text()"/>
            </xsl:variable>
            <xsl:choose>
                <xsl:when test="contains($textAll, '.')">

            <xsl:variable name="textOnly">
                <xsl:choose>
                    <xsl:when test="contains($textAll,'.')">
                        <xsl:value-of select="substring($textAll,1,string-length(substring-before($textAll,'.'))-1)"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="text()"/>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:variable>
            <xsl:variable name="numbersOnly">
                <xsl:choose>
                    <xsl:when test="contains($textAll,'.')">
                        <xsl:value-of select="substring($textAll,string-length($textOnly))"/>
                    </xsl:when>
                </xsl:choose>
            </xsl:variable>
                            <xsl:value-of select="$textOnly"/>
                <xsl:call-template name="numbersToLink">
                    <xsl:with-param name="numbersString" select="$numbersOnly"/>
                </xsl:call-template>

                </xsl:when>

            <xsl:otherwise>
                         <xsl:apply-templates/>
            </xsl:otherwise>
            </xsl:choose>

        </span>
    </xsl:template>

    <xsl:template name="numbersToLink">
        <xsl:param name="numbersString"/>
        <xsl:choose>
            <xsl:when test="contains($numbersString, ',')">
                <xsl:call-template name="splitByComma">
                    <xsl:with-param name="numString" select="$numbersString"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="contains($numbersString, '-')">
                <xsl:call-template name="splitByHyphen">
                    <xsl:with-param name="numString" select="$numbersString"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="5 >= string-length(normalize-space($numbersString))">
                <xsl:variable name="x">
                    <xsl:value-of select="substring-after($numbersString,'.')"/>
                </xsl:variable>
                <xsl:variable name="y">
                    <xsl:value-of select="normalize-space(substring-before($numbersString,'.'))"/>
                </xsl:variable>
                <!--  er:#BVI_CH_07/P7-251-->
                <xsl:variable name="conca">
                    <xsl:value-of select="concat('er:#BVI_CH_0',$y,'/P',$y,'-',$x)"/>
                </xsl:variable>
                <a href="{$conca}">
                    <xsl:value-of select="$numbersString"/>
                </a>
            </xsl:when>
            <xsl:otherwise>

            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    <xsl:template name="splitByComma">
        <xsl:param name="numString"/>
        <xsl:choose>
            <xsl:when test="contains(substring-before($numString,','), '-')">
                <xsl:call-template name="splitByHyphen">
                    <xsl:with-param name="numString" select="$numString"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="contains($numString,',')">
                <xsl:variable name="abc">
                    <xsl:value-of select="normalize-space(substring-before($numString,'.'))"/>
                </xsl:variable>
                <xsl:variable name="def">
                    <xsl:value-of select="substring-before(substring-after($numString,'.'),',') "/>
                </xsl:variable>
                <xsl:variable name="conct">
                    <xsl:value-of select="concat('er:#BVI_CH_0',$abc,'/P',$abc,'-',$def)"/>
                    <!--"concat(concat('er:#BVI_CH_0',,'/P',$y,'-',$x)"/-->
                </xsl:variable>
                <a href="{$conct}">
                    <xsl:value-of select="substring-before($numString,',')"/>
                </a>
                <xsl:text>, </xsl:text>
                <xsl:if test="contains(substring-after($numString,','), '.')">
                    <xsl:call-template name="numbersToLink">
                        <xsl:with-param name="numbersString" select="normalize-space(substring-after($numString,','))"/>
                    </xsl:call-template>
                </xsl:if>
            </xsl:when>
        </xsl:choose>
    </xsl:template>
    <xsl:template name="splitByHyphen">
        <xsl:param name="numString"/>
        <xsl:choose>
            <xsl:when test="contains($numString,'-')">
                <xsl:variable name="abc">
                    <xsl:value-of select="normalize-space(substring-before($numString,'.'))"/>
                </xsl:variable>
                <xsl:variable name="def">
                    <xsl:value-of select="substring-before(substring-after($numString,'.'),'-') "/>
                </xsl:variable>
                <xsl:variable name="conct">
                    <xsl:value-of select="concat('er:#BVI_CH_0',$abc,'/P',$abc,'-',$def)"/>
                    <!--"concat(concat('er:#BVI_CH_0',,'/P',$y,'-',$x)"/-->
                </xsl:variable>
                <a href="{$conct}">
                    <!--<xsl:value-of select="substring-before($numString,'-')"/>-->
                    <xsl:value-of select="substring-before($numString,'-')"/>
                </a>
                <xsl:text>&#x2013;</xsl:text>
                <xsl:if test="contains(substring-after($numString,'-'), '.')">
                    <xsl:call-template name="numbersToLink">
                        <xsl:with-param name="numbersString" select="normalize-space(substring-after($numString,'-'))"/>
                    </xsl:call-template>
                </xsl:if>
            </xsl:when>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

当我在 Altova XMLSpy 中将它与我的 xml 表一起使用时。它没有给出任何错误。但是当我与其他 xml 编辑器（氧气和液体 xml）一起使用时，它会引发以下错误。

```
 Severity: error
Description: A sequence of more than one item is not allowed as the first argument of contains() ("", "") 
Start location: 56:0
URL: http://www.w3.org/TR/xpath20/#ERRXPTY0004 
```

请让我知道为什么会这样，我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:24:51.507

哪一行正是导致该错误的原因？XML 输入看起来如何？

众所周知，Altova 会去除空白文本节点，如果您想要与 Saxon 相同的行为，请添加

```
<xsl:strip-space elements="*"/> 
```

作为元素的子`xsl:stylesheet`元素。这可能会解决它，假设错误是由尝试选择文本内容引起的，该文本内容`text()`随后包含带有撒克逊语的空白文本节点，这些节点被 Altova 剥离。

但通常我会避免使用`text()`并简单地选择字符串内容`.`（并且在传递给类似函数时依赖函数参数的原子化`contains`）或`string(.)`显式执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T18:14:44.073

第 56 行是这样的：

该错误意味着当前节点（primaryie 元素）具有多个文本节点子节点。其中一些可能是空白文本节点——Altova 使用 Microsoft XML 解析器，默认情况下会去除空白文本节点。在不知道您的应用程序的情况下，很难知道应该用什么替换它，但它可能应该是`test="contains(., '.')"`.

顺便说一句，您的样式表中有一些错误的代码。这个：

```
<xsl:value-of select="index/title/@text()"/> 
```

选择属性轴上的所有文本节点。属性轴上永远不会有任何文本节点，尽管请求它们是合法的。您的样式表还经常使用该构造

```
<xsl:variable name="tertClassType">
     <xsl:value-of select="@level"/>
</xsl:variable> 
```

这是一种非常低效和冗长的方式来获得与

```
<xsl:variable name="tertClassType" select="@level"/> 
```

# c# - solrnet 查询失败

> ID：15640391
> 
> 赞同：0
> 
> 时间：2013-03-26T15:02:27.463
> 
> 标签：c#, solr, solrnet

我正在尝试将 solr 与 c# 一起使用。我安装了一个 bitnami apache + solr 堆栈并更改了 schema.xml 文件。我尝试了以下示例： http: [//www.chrisumbel.com/article/solrnet_solr_net](http://www.chrisumbel.com/article/solrnet_solr_net)

架构文件

```
 <field name="id" type="string" indexed="true" stored="true" required="true" multiValued="false" /> 
   <field name="title" type="string" indexed="true" stored="true" required="true"/> 
   <field name="sku" type="text_en_splitting_tight" indexed="true" stored="true" omitNorms="true"/>
   <field name="name" type="text_general" indexed="true" stored="true"/>
   <field name="manu" type="text_general" indexed="true" stored="true" omitNorms="true"/>
   <field name="cat" type="string" indexed="true" stored="true" multiValued="true"/>
   <field name="features" type="text_general" indexed="true" stored="true" multiValued="true"/>
   <field name="includes" type="text_general" indexed="true" stored="true" termVectors="true" termPositions="true" termOffsets="true" />

   <field name="weight" type="float" indexed="true" stored="true"/>
   <field name="price"  type="float" indexed="true" stored="true"/>
   <field name="popularity" type="int" indexed="true" stored="true" />
   <field name="inStock" type="boolean" indexed="true" stored="true" />

   <field name="store" type="location" indexed="true" stored="true"/>

   <!-- Common metadata fields, named specifically to match up with
     SolrCell metadata when parsing rich documents such as Word, PDF.
     Some fields are multiValued only because Tika currently may return
     multiple values for them. Some metadata is parsed from the documents,
     but there are some which come from the client context:
       "content_type": From the HTTP headers of incoming stream
       "resourcename": From SolrCell request param resource.name
   -->
   <!-- <field name="title" type="text_general" indexed="true" stored="true" multiValued="true"/> -->
   <field name="tag" type="text_general" indexed="true" stored="true" multiValued="true"/>
   <field name="subject" type="text_general" indexed="true" stored="true"/>
   <field name="description" type="text_general" indexed="true" stored="true"/>
   <field name="comments" type="text_general" indexed="true" stored="true"/>
   <field name="author" type="text_general" indexed="true" stored="true"/>
   <field name="keywords" type="text_general" indexed="true" stored="true"/>
   <field name="category" type="text_general" indexed="true" stored="true"/>
   <field name="resourcename" type="text_general" indexed="true" stored="true"/>
   <field name="url" type="text_general" indexed="true" stored="true"/>
   <field name="content_type" type="string" indexed="true" stored="true" multiValued="true"/>
   <field name="last_modified" type="date" indexed="true" stored="true"/>
   <field name="links" type="string" indexed="true" stored="true" multiValued="true"/>

   <!-- Main body of document extracted by SolrCell.
        NOTE: This field is not indexed by default, since it is also copied to "text"
        using copyField below. This is to save space. Use this field for returning and
        highlighting document content. Use the "text" field to search the content. -->
   <field name="content" type="text_general" indexed="false" stored="true" multiValued="true"/>

   <!-- catchall field, containing all other searchable text fields (implemented
        via copyField further on in this schema  -->
   <field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/>

   <!-- catchall text field that indexes tokens both normally and in reverse for efficient
        leading wildcard queries. -->
   <field name="text_rev" type="text_general_rev" indexed="true" stored="false" multiValued="true"/>

   <!-- non-tokenized version of manufacturer to make it easier to sort or group
        results by manufacturer.  copied from "manu" via copyField -->
   <field name="manu_exact" type="string" indexed="true" stored="false"/>

   <field name="payloads" type="payloads" indexed="true" stored="true"/>

   <field name="_version_" type="long" indexed="true" stored="true"/> 
```

这是代码：

文章.cs

```
using System;
using System.Collections.Generic;
using SolrNet;
using SolrNet.Attributes;
using SolrNet.Commands.Parameters;
using Microsoft.Practices.ServiceLocation;

class Article
{
    [SolrUniqueKey("id")]
    public int id { get; set; }

    [SolrField("title")]
    public string Title { get; set; }

    [SolrField("content")]
    public string Content { get; set; }

    //[SolrField("tag")]
    //public List<string> Tags { get; set; }
} 
```

主程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Microsoft.Practices.ServiceLocation;
using SolrNet;

namespace SolrTest
{
    class Program
    {
        static void Main(string[] args)
        {
            // find the service
            Startup.Init<Article>("http://berserkerpc:444/solr");
            ISolrOperations<Article> solr =
     ServiceLocator.Current.GetInstance<ISolrOperations<Article>>();

            //AddArticles(solr);

            Query(solr);

            Console.ReadLine();

        }
        private static ISolrOperations<Article> AddArticles(ISolrOperations<Article> solr)
        {
            // make some articles
            solr.Add(new Article()
            {
                id = 1,
                Title = "my laptop",
                Content = "my laptop is a portable power station",
                //      Tags = new List<string>() {
                //  "laptop",
                //  "computer",
                //  "device"
                //}
            });

            solr.Add(new Article()
            {
                id = 2,
                Title = "my iphone",
                Content = "my iphone consumes power",
                //      Tags = new List<string>() {
                //  "phone",
                //  "apple",
                //  "device"
                //}
            });

            solr.Add(new Article()
            {
                id = 3,
                Title = "your blackberry",
                Content = "your blackberry has an alt key",
                //      Tags = new List<string>() {
                //  "phone",
                //  "rim",
                //  "device"
                //}
            });

            // commit to the index
            solr.Commit();
            return solr;
        }
        private static void Query(ISolrOperations<Article> solr)
        {

            // fulltext "power" search
            Console.WriteLine("POWER ARTICLES:");

            SolrQueryResults<Article> powerArticles = solr.Query(new SolrQuery("power"));

            foreach (Article article in powerArticles)
            {
                Console.WriteLine(string.Format("{0}: {1}", article.id, article.Title));
            }

            Console.WriteLine();

            //// tag search for "phone"
            //Console.WriteLine("PHONE TAGGED ARTICLES:");
            //SolrQueryResults<Article> phoneTaggedArticles = solr.Query(new SolrQuery("tag:phone"));

            //foreach (Article article in phoneTaggedArticles)
            //{
            //  Console.WriteLine(string.Format("{0}: {1}", article.id, article.Title));
            //}
        }
    }
} 
```

solr 正在运行，我可以连接。还添加了三篇文章。如果我开始查询，则会出现以下异常：

```
System.ArgumentException was unhandled
  HResult=-2147024809
  Message=Could not convert value 'System.Collections.ArrayList' to property 'Content' of document type Article
  Source=SolrNet
  StackTrace:
       bei SolrNet.Impl.DocumentPropertyVisitors.RegularDocumentVisitor.Visit(Object doc, String fieldName, XElement field) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\DocumentPropertyVisitors\RegularDocumentVisitor.cs:Zeile 53.
       bei SolrNet.Impl.DocumentPropertyVisitors.AggregateDocumentVisitor.Visit(Object doc, String fieldName, XElement field) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\DocumentPropertyVisitors\AggregateDocumentVisitor.cs:Zeile 37.
       bei SolrNet.Impl.DocumentPropertyVisitors.DefaultDocumentVisitor.Visit(Object doc, String fieldName, XElement field) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\DocumentPropertyVisitors\DefaultDocumentVisitor.cs:Zeile 39.
       bei SolrNet.Impl.SolrDocumentResponseParser`1.ParseDocument(XElement node) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\SolrDocumentResponseParser.cs:Zeile 63.
       bei SolrNet.Impl.SolrDocumentResponseParser`1.ParseResults(XElement parentNode) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\SolrDocumentResponseParser.cs:Zeile 48.
       bei SolrNet.Impl.ResponseParsers.ResultsResponseParser`1.Parse(XDocument xml, AbstractSolrQueryResults`1 results) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\ResponseParsers\ResultsResponseParser.cs:Zeile 53.
       bei SolrNet.Impl.ResponseParsers.AggregateResponseParser`1.Parse(XDocument xml, AbstractSolrQueryResults`1 results) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\ResponseParsers\AggregateResponseParser.cs:Zeile 15.
       bei SolrNet.Impl.ResponseParsers.DefaultResponseParser`1.Parse(XDocument xml, AbstractSolrQueryResults`1 results) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\ResponseParsers\DefaultResponseParser.cs:Zeile 28.
       bei SolrNet.Impl.SolrQueryExecuter`1.Execute(ISolrQuery q, QueryOptions options) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\SolrQueryExecuter.cs:Zeile 588.
       bei SolrNet.Impl.SolrBasicServer`1.Query(ISolrQuery query, QueryOptions options) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\SolrBasicServer.cs:Zeile 98.
       bei SolrNet.Impl.SolrServer`1.Query(ISolrQuery query, QueryOptions options) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\SolrServer.cs:Zeile 49.
       bei SolrNet.Impl.SolrServer`1.Query(ISolrQuery q) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\SolrServer.cs:Zeile 88.
       bei SolrTest.Program.Query(ISolrOperations`1 solr) in c:\Users\troth\Desktop\SolrTest\SolrTest\Program.cs:Zeile 77.
       bei SolrTest.Program.Main(String[] args) in c:\Users\troth\Desktop\SolrTest\SolrTest\Program.cs:Zeile 23.
       bei System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       bei System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       bei Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       bei System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       bei System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       bei System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.ArgumentException
       HResult=-2147024809
       Message=Das Objekt mit dem Typ "System.Collections.ArrayList" kann nicht in den Typ "System.String" konvertiert werden.
       Source=mscorlib
       StackTrace:
            bei System.RuntimeType.TryChangeType(Object value, Binder binder, CultureInfo culture, Boolean needsSpecialCast)
            bei System.RuntimeType.CheckValue(Object value, Binder binder, CultureInfo culture, BindingFlags invokeAttr)
            bei System.Reflection.MethodBase.CheckArguments(Object[] parameters, Binder binder, BindingFlags invokeAttr, CultureInfo culture, Signature sig)
            bei System.Reflection.RuntimeMethodInfo.InvokeArgumentsCheck(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
            bei System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
            bei System.Reflection.RuntimePropertyInfo.SetValue(Object obj, Object value, BindingFlags invokeAttr, Binder binder, Object[] index, CultureInfo culture)
            bei System.Reflection.RuntimePropertyInfo.SetValue(Object obj, Object value, Object[] index)
            bei SolrNet.Impl.DocumentPropertyVisitors.RegularDocumentVisitor.Visit(Object doc, String fieldName, XElement field) in c:\Users\troth\Desktop\SolrNet-master\SolrNet\Impl\DocumentPropertyVisitors\RegularDocumentVisitor.cs:Zeile 51.
       InnerException: 
```

我从 solrnet 下载了最新版本。有什么建议么？

谢谢，特罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:39:43.100

如果你想使用一个多值字段，你需要将它映射到`ICollection`你的文章类中。

```
 [SolrField("content")]
 public ICollection<string> Content { get; set; } 
```

有关更多信息和示例，请参阅 SolrNet 项目页面的[映射](https://code.google.com/p/solrnet/wiki/Mapping)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:31:27.117

知道了。我在模式文件中有错误的数据类型：

```
 <field name="id" type="string" indexed="true" stored="true" required="true" /> 
   <field name="title" type="text_general" indexed="true" stored="true" required="true"/> 
   <field name="content" type="text_general" indexed="true" stored="true" required="true"/>
   <field name="tag" type="string" indexed="true" stored="true" multiValued="true"/>
   <field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/> 
```

特罗

# python - 如何在 Twisted/Python 中使用 AMP 创建双向消息传递

> ID：15640393
> 
> 赞同：6
> 
> 时间：2013-03-26T15:02:30.190
> 
> 标签：python, asynchronous, twisted

我正在尝试创建一个与本地代码库（客户端部分）通信的扭曲守护进程（服务器部分）。基本上，客户端应该使用 AMP 调用远程（）到守护程序以开始一些处理（更新数据库）一些方法。在服务器上完成每个方法的处理后，我需要服务器调用远程（）到我的客户端，以便用户知道服务器的进度。

我已经能够从客户端调用服务器并获得响应，但我无法让服务器向客户端发送响应。

我搜索了一个解决方案，但找不到任何使用 AMP 进行双向通信的示例代码——它始终是客户端调用服务器。

我试图让客户端调用服务器以开始处理（ServerStart AMP 命令），然后让服务器将多个调用发送回客户端以提供处理更新（MessageClient AMP 命令）。

任何帮助将不胜感激。一个超级简单的示例展示了如何从客户端调用服务器，然后让服务器将两个调用传回给客户端，这将是非常棒的！

ampclient.py

```
from client_server import MessageServer, Client, ServerStart
from twisted.internet.protocol import ClientCreator
from twisted.internet import reactor
from twisted.protocols import amp
from time import sleep
from twisted.internet.protocol import Factory
from twisted.internet.endpoints import TCP4ServerEndpoint
from twisted.application.service import Application
from twisted.application.internet import StreamServerEndpointService

def startServerProcess():
    def show_start(result):
        print 'result from server: %r' % result

    d = ClientCreator(reactor, amp.AMP).connectTCP(
        '127.0.0.1', 1234).addCallback(
            lambda p: p.callRemote(ServerStart, truncate=True)).addCallback(
                show_start)    

pf = Factory()
pf.protocol = Client
reactor.listenTCP(1235, pf)
print 'client listening'

startServerProcess()

sleep(4)

reactor.run() 
```

ampserver.py

```
from client_server import MessageClient, Server
from twisted.internet.protocol import ClientCreator
from twisted.internet import reactor
from twisted.protocols import amp
from time import sleep
from twisted.internet.protocol import Factory
from twisted.internet.endpoints import TCP4ServerEndpoint
from twisted.application.service import Application
from twisted.application.internet import StreamServerEndpointService

def makeClientCall():
    def show_result(result):
        print 'result from client: %r' % result     

    d = ClientCreator(reactor, amp.AMP).connectTCP(
        '127.0.0.1', 1235).addCallback(
            lambda p: p.callRemote(MessageClient)).addCallback(
                show_result)

application = Application("server app")

endpoint = TCP4ServerEndpoint(reactor, 1234)
factory = Factory()
factory.protocol = Server
service = StreamServerEndpointService(endpoint, factory)
service.setServiceParent(application)

sleep(4)

makeClientCall()
makeClientCall() 
```

客户端服务器.py

```
from twisted.protocols import amp
from twisted.internet import reactor
from twisted.internet.protocol import Factory
from twisted.internet.endpoints import TCP4ServerEndpoint
from twisted.application.service import Application
from twisted.application.internet import StreamServerEndpointService

class MessageServer(amp.Command):
    response = [('msg', amp.String())]

class ServerStart(amp.Command):
    arguments = [('truncate', amp.Boolean())]
    response = [('msg', amp.String())]

class Server(amp.AMP):
    def message_it(self):
        msg = 'This is a message from the server'
        print 'msg sent to client: %s' % msg
        return {'msg': msg}
    MessageServer.responder(message_it)

    def start_it(self, truncate):
        msg = 'Starting processing...'
        return {'msg': msg}
    ServerStart.responder(start_it)

class MessageClient(amp.Command):
    response = [('msg', amp.String())]

class Client(amp.AMP):
    def message_it(self):
        msg = 'This is a message from the client'
        return {'msg': msg}
    MessageClient.responder(message_it) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:21:33.663

这是一个双向 AMP 客户端和服务器的简单示例。关键是 AMP 协议类持有对客户端连接的引用并提供`callRemote`方法。

当然，我只有通过挖掘 AMP 代码才知道这一点。扭曲的文档充其量是缺乏的，至少在核心之外是这样。

**文件：count_server.tac**

```
from twisted.protocols.amp import AMP
from twisted.internet import reactor
from twisted.internet.protocol import Factory
from twisted.internet.endpoints import TCP4ServerEndpoint
from twisted.application.service import Application
from twisted.application.internet import StreamServerEndpointService

from count_client import Counter

application = Application('test AMP server')

endpoint = TCP4ServerEndpoint(reactor, 8750)
factory = Factory()
factory.protocol = Counter
service = StreamServerEndpointService(endpoint, factory)
service.setServiceParent(application) 
```

**文件：count_client.py**

```
if __name__ == '__main__':
    import count_client
    raise SystemExit(count_client.main())

from sys import stdout

from twisted.python.log import startLogging, err
from twisted.protocols import amp
from twisted.internet import reactor
from twisted.internet.protocol import Factory
from twisted.internet.endpoints import TCP4ClientEndpoint

class Count(amp.Command):
    arguments = [('n', amp.Integer())]
    response = [('ok', amp.Boolean())]

class Counter(amp.AMP):
    @Count.responder
    def count(self, n):
        print 'received:', n
        n += 1

        if n < 10:
            print 'sending:', n
            self.callRemote(Count, n=n)

        return {'ok': True}

def connect():
    endpoint = TCP4ClientEndpoint(reactor, '127.0.0.1', 8750)
    factory = Factory()
    factory.protocol = Counter
    return endpoint.connect(factory)

def main():
    startLogging(stdout)

    d = connect()
    d.addErrback(err, 'connection failed')
    d.addCallback(lambda p: p.callRemote(Count, n=1))
    d.addErrback(err, 'call failed')

    reactor.run() 
```

**服务器输出：**

```
$ twistd -n -y count_server.tac
2013-03-27 11:05:18-0500 [-] Log opened.
2013-03-27 11:05:18-0500 [-] twistd 12.2.0 (/usr/bin/python 2.7.3) starting up.
2013-03-27 11:05:18-0500 [-] reactor class: twisted.internet.epollreactor.EPollReactor.
2013-03-27 11:05:18-0500 [-] Factory starting on 8750
2013-03-27 11:05:18-0500 [-] Starting factory <twisted.internet.protocol.Factory instance at 0x2adc368>
2013-03-27 11:05:22-0500 [twisted.internet.protocol.Factory] Counter connection established (HOST:IPv4Address(TCP, '127.0.0.1', 8750) PEER:IPv4Address(TCP, '127.0.0.1', 58195))
2013-03-27 11:05:22-0500 [Counter,0,127.0.0.1] received: 1
2013-03-27 11:05:22-0500 [Counter,0,127.0.0.1] sending: 2
2013-03-27 11:05:22-0500 [Counter,0,127.0.0.1] received: 3
2013-03-27 11:05:22-0500 [Counter,0,127.0.0.1] sending: 4
2013-03-27 11:05:22-0500 [Counter,0,127.0.0.1] received: 5
2013-03-27 11:05:22-0500 [Counter,0,127.0.0.1] sending: 6
2013-03-27 11:05:22-0500 [Counter,0,127.0.0.1] received: 7
2013-03-27 11:05:22-0500 [Counter,0,127.0.0.1] sending: 8
2013-03-27 11:05:22-0500 [Counter,0,127.0.0.1] received: 9
2013-03-27 11:05:26-0500 [Counter,0,127.0.0.1] Counter connection lost (HOST:IPv4Address(TCP, '127.0.0.1', 8750) PEER:IPv4Address(TCP, '127.0.0.1', 58195))
^C2013-03-27 11:05:31-0500 [-] Received SIGINT, shutting down.
2013-03-27 11:05:31-0500 [-] (TCP Port 8750 Closed)
2013-03-27 11:05:31-0500 [-] Stopping factory <twisted.internet.protocol.Factory instance at 0x2adc368>
2013-03-27 11:05:31-0500 [-] Main loop terminated.
2013-03-27 11:05:31-0500 [-] Server Shut Down. 
```

**客户端输出：**

```
$ python count_client.py
2013-03-27 11:05:22-0500 [-] Log opened.
2013-03-27 11:05:22-0500 [-] Starting factory <twisted.internet.protocol.Factory instance at 0x246bf80>
2013-03-27 11:05:22-0500 [Uninitialized] Counter connection established (HOST:IPv4Address(TCP, '127.0.0.1', 58195) PEER:IPv4Address(TCP, '127.0.0.1', 8750))
2013-03-27 11:05:22-0500 [Counter,client] received: 2
2013-03-27 11:05:22-0500 [Counter,client] sending: 3
2013-03-27 11:05:22-0500 [Counter,client] received: 4
2013-03-27 11:05:22-0500 [Counter,client] sending: 5
2013-03-27 11:05:22-0500 [Counter,client] received: 6
2013-03-27 11:05:22-0500 [Counter,client] sending: 7
2013-03-27 11:05:22-0500 [Counter,client] received: 8
2013-03-27 11:05:22-0500 [Counter,client] sending: 9
^C2013-03-27 11:05:26-0500 [-] Received SIGINT, shutting down.
2013-03-27 11:05:26-0500 [Counter,client] Counter connection lost (HOST:IPv4Address(TCP, '127.0.0.1', 58195) PEER:IPv4Address(TCP, '127.0.0.1', 8750))
2013-03-27 11:05:26-0500 [Counter,client] Stopping factory <twisted.internet.protocol.Factory instance at 0x246bf80>
2013-03-27 11:05:26-0500 [-] Main loop terminated. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-29T08:26:29.923

Ryan P 之前的回应还有待改进。特别是，它实际上从未使用过 AMP 响应，而是更喜欢在各处链接 callRemote 调用。这是我的答案，基于扭曲的 ampserver.py（未更改）和 ampclient.py（重写）示例。这以适合问题的方式回答了有关双向消息传递的基本问题（尽管不完全是描述）。

简短的总结，将回调添加到您从 callRemote 获得的延迟，其参数中将包含响应。这是一本普通的字典，所以你可以用它做你想做的事。

**文件：ampserver.py**

```
from twisted.protocols import amp

class Sum(amp.Command):
    arguments = [('a', amp.Integer()),
                 ('b', amp.Integer())]
    response = [('total', amp.Integer())]

class Divide(amp.Command):
    arguments = [('numerator', amp.Integer()),
                 ('denominator', amp.Integer())]
    response = [('result', amp.Float())]
    errors = {ZeroDivisionError: 'ZERO_DIVISION'}

class Math(amp.AMP):
    def sum(self, a, b):
        total = a + b
        print 'Did a sum: %d + %d = %d' % (a, b, total)
        return {'total': total}
    Sum.responder(sum)

    def divide(self, numerator, denominator):
        result = float(numerator) / denominator
        print 'Divided: %d / %d = %f' % (numerator, denominator, result)
        return {'result': result}
    Divide.responder(divide)

def main():
    from twisted.internet import reactor
    from twisted.internet.protocol import Factory
    pf = Factory()
    pf.protocol = Math
    reactor.listenTCP(1234, pf)
    print 'started'
    reactor.run()

if __name__ == '__main__':
    main() 
```

**文件：ampclient.py**

```
from twisted.internet import reactor, protocol
from twisted.internet.task import deferLater
from twisted.protocols import amp
from ampserver import Sum, Divide

connection = None

class MathClient(amp.AMP):
    def connectionMade(self):
        global connection
        connection = self

class MathFactory(protocol.ReconnectingClientFactory):
    protocol = MathClient

if __name__ == '__main__':
    reactor.connectTCP('127.0.0.1', 1234, MathFactory())
    def simpleSum():
        global connection
        d = connection.callRemote(Sum, a=1, b=5)
        def prin(result):
            print(result)
        d.addCallback(prin)
        return d
    deferLater(reactor, 1, simpleSum)
    deferLater(reactor, 3, simpleSum)
    deferLater(reactor, 6, simpleSum)
    deferLater(reactor, 9, simpleSum)
    deferLater(reactor, 12, simpleSum)
    deferLater(reactor, 15, simpleSum)
    deferLater(reactor, 18, simpleSum).addCallback(lambda _: reactor.stop())
    reactor.run() 
```

# postgresql - Postgresql：按模式聚合结果

> ID：15640394
> 
> 赞同：0
> 
> 时间：2013-03-26T15:02:32.567
> 
> 标签：postgresql

我需要列出我在不同的游泳池有多少辆车。

这是我得到的：

```
select count(*), pool from cars group by 2 order by 1 desc;

 count | pool
-------+--------
    71 | A-12-A
    69 | B-45-A
    19 | A-45-B
    18 | A-69-A
    15 | B-12-B
    13 | A-67-B
(6 rows) 
```

但我并不真正关心中间值。我只对第一个和最后一个字母（汽车分类和我们使用的内部值）感兴趣。

如果有可能，我怎么能得到这样的东西：

```
 count | pool
-------+--------
    89 | A-%-A
    69 | B-%-A
    32 | A-%-B
    15 | B-%-B
(6 rows) 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:06:15.787

像这样的东西：

```
select count(*) as cnt, 
       regexp_replace(pool, '-[0-9]{2}-', '-%-', 'gi') as clean_pool
from cars
group by clean_pool
order by 1 desc; 
```

SQLFiddle：[http ://sqlfiddle.com/#!12/ac449/2](http://sqlfiddle.com/#!12/ac449/2)

这假设中间部分总是包含两个数字。如果不是这种情况，您需要调整正则表达式以应对这种情况。

# c# - 使用 C# 从静态链接下载文件

> ID：15640395
> 
> 赞同：0
> 
> 时间：2013-03-26T15:02:34.913
> 
> 标签：c#, download

每季度更新文件时，我需要从此[页面下载文件。](http://fhfa.gov/Default.aspx?Page=296)我正在构建一个自动化流程来使用其中一个文件中的数据，并且我也想自动化下载。

我有哪些选择？有没有比屏幕抓取更简单的方法？据说链接是静态的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:35:56.277

如果它们真的是静态的（即永远不会改变），你可以这样做：

```
var links = new Dictionary<string, string>
            {
                { "http://fhfa.gov/weblink/POSummary.xls", @"c:\temp\POSummary.xls" },
                { "...", "..."}
            };
var webClient = new WebClient();
foreach (var kvp in links)
{
    webClient.DownloadFile(kvp.Key, kvp.Value);
} 
```

或者使用一个文件更容易：

```
webClient.DownloadFile("[address]", "[fileName]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:04:09.230

> 有没有比屏幕抓取更简单的方法？

不，没有，除非网站为您提供 API，允许您返回可用文件以例如 JSON 格式下载。

# php - PHP 数组组合。一次一个新的组合

> ID：15640397
> 
> 赞同：0
> 
> 时间：2013-03-26T15:02:40.657
> 
> 标签：php, combinations

我正在尝试编写一个函数，它将生成一个可能的数组组合。

**例子 ：**

```
$a = array('0', '1', '2');
// wanted results
// 0
// 1
// 2
// 0 0
// 0 1
// 0 2
// 1 0
// 1 1
// 1 2
// 2 0
// 2 1
// 2 2 and so on.. 
```

**我想一次只得到一个组合，而不是全部组合到一个数组中。**

**就像是 ：**

```
getCombination(); // 0
getCombination(); // 1
getCombination(); // 2
getCombination(); // 0 0 and so on... 
```

**我的代码看起来像这样（但它没有按预期工作）：**

```
 $val = array('0', '1', '2');
  $now = array();
  $t = 0;
  $c = 0;
  $v = 0;
  $x = array();

  function inc()
  {
    global $val, $now, $t, $c, $v, $x;

    if(count($x) <> $c)
    {
      for($i = -1; ++$i < $c + 1;)
      {
        $x[$i] = 0;
        $now[$i] = $val[0];
      }
    }

    $now[$v] = $val[$t];

    if($t + 1 >= count($val))
    {
      if($c)
      {
        if($v >= $c)
        {
          $v = 0;
          ++$c;
        }
        else
        {
          ++$v;
        }
      }
      else
      {
        ++$c;
      }
      $t = 0;
    }
    else
    {
      ++$t;
    }

    echo implode(' ', $now), '<br>';
  }

  for($i = 0; $i < 150; $i++)
  {
    inc();
  } 
```

我需要一个关于如何为此构建工作函数或类的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:02:23.793

这是我的解决方案（希望对某人有所帮助）：

```
<?php

  $val = array('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z');

  $now = array();

  $max_size = 5;

  for($i = 0; $i < $max_size; ++$i)
  {
    $now[$i] = 0;
  }

  function getCombination()
  {
    global $now, $val;

    $l = count($val);
    $t = 1;

    foreach($now as $k => &$v)
    {
      $v += $t;
      if($v <= $l)
      {
        $t = 0;
      }
      else
      {
        $v -= $l;
        $t = 1;
      }
    }
    $ar = array();

    foreach($now as $k => $v)
    {
      $ar[$k] = $val[$v - 1];
    }

    echo strrev(implode(' ', $ar)), '<br>';
  }

  // test
  for($i = 0; $i < 800; $i++)
  {
    getCombination();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:20:24.987

如果知道如何获取所有可能的组合，那么您可以使用以下代码来获取每次新值：

```
function get()
{
    static $combinations=array();
    static $current=-1;
    static $total=-1;
    if($total==-1)
    {
        $combinations=array('1', '2', '12', '21'); // or get them in any other way
        $total=count($combinations);
    }

    return $combinations[(++$current)%$total];
}

//and testing. 
for($i=0; $i<14; $i++)
{
    echo get();
} 
```

我希望这个能帮上忙

# android - Or shows ProgressDialog or play MediaPlayer

> ID：15640402
> 
> 赞同：0
> 
> 时间：2013-03-26T15:02:50.030
> 
> 标签：android, android-mediaplayer, progressdialog

I am developing a android application that plays a digital radio. The app was playing the radio but i need to show a ProgressDialog for the user do not to think that the application was stopped.

I do not know how to fix this problem! Before i make the ProgressDialog the app was run correctly. Now the app do not plays the radio! Only shows the ProgressDialog. THANKS!

PS. SORRY FOR MY ENGLISH!

```
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle); 
    setContentView(R.layout.main);

    tx = (TextView) findViewById(R.id.txt);
    play = (Button) findViewById(R.id.PLAY);
    play.setOnClickListener(this);

    //mHandler = new Handler();

}

public void onClick (View v)
{

    if (v ==play )
    {  

        dialogo = ProgressDialog.show(this, "Radio Digital CEIZS", "Conectando-se à rádio..", false, true);
        dialogo.setCancelable(false);
                  try
                {
                    playAudio();
                }

                catch (Exception e) {
                    e.printStackTrace();
                    tx.setText("Deu ruim!");
                    dialogo.dismiss();
                }
            }
        //Bundle extras = getIntent().getExtras();
}
private void playAudio() {
    new Thread() {
        @Override
        public void run() {
            try {
                    mMediaPlayer = new MediaPlayer();
                    mMediaPlayer.setDataSource(path);
                    tx.setText("Play! 3");
                    mMediaPlayer.prepare();
                    tx.setText("Play! 4");
                mMediaPlayer.start();
                dialogo.dismiss();
            }
            catch (Exception e)
            {                   
                e.printStackTrace();
                dialogo.dismiss();
            }
        }           
    }.start();
    } 
```

# c# - Linq FindWhere clause and boolean filters?

> ID：15640405
> 
> 赞同：3
> 
> 时间：2013-03-26T15:02:56.037
> 
> 标签：c#, linq

I have to add the following to this filter,

"If the CountryID passed in equals (999) then the search should search all countries, and not filter by country."

what I currently have is this, which totally confuses me.

```
var query = rep.
    FindWhere(c => 
        (
            countryID.HasValue == false || 
            c.CityID == null || 
            c.Countries.ID == countryID
        )
        && 
        (
            mediaTypeID == 0 || 
            c.MediaTypeID == mediaTypeID
        ) 
        && c.Active); 
```

I'm assuming that if any on the conditions in the first parantheses is true then it will match against all countries?! if so then I can add an extra expression in the first parantheses to check for countryID 999?

ps. FindWhere is:

```
public IQueryable<T> FindWhere(Expression<Func<T, bool>> predicate) 
{
    return _dbSet.Where(predicate);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:08:06.597

```
rep.FindWhere(c => (c.CityID == null || !countryID.HasValue ||
                    countryID == 999 || c.Countries.ID == countryID) &&
                   (mediaTypeID == 0 || c.MediaTypeID == mediaTypeID)) 
```

顺便说一句，您的条件逻辑真的很难理解。考虑重构您的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T15:07:01.717

> 我假设如果第一个括号中的任何条件为真，那么它将与所有国家/地区匹配？！如果是这样，那么我可以在第一个括号中添加一个额外的表达式来检查 countryID 999？

这应该有效。现在，谓词要求前三个条件中的任何一个为真（`countryID`is`null`或指定的国家，或城市 is `null`），然后检查第二个条件中的任何一个。

如果您使用 999 进行国家/地区检查，则添加针对 999 的检查将始终通过第一个标准，从而有效地“删除”过滤器。

话虽如此，我个人更愿意将其分解。由于您已经在使用`IQueryable<T>`，您可以选择性地添加过滤器：

```
var query = rep.FindWhere(c => c.Active);
if (mediaType != 0)
    query = query.Where(c => c.MediaTypeID == mediaTypeID);
if (countryID != 999)
    query = query.Where(c => countryID.HasValue == false || c.CityID == null || c.Countries.ID == countryID); 
```

这更有效（您只在需要时添加过滤器），但也更容易理解。

# c# - How do I make a conditional installer to find or install SQL Server on local or networked machine?

> ID：15640406
> 
> 赞同：3
> 
> 时间：2013-03-26T15:02:56.817
> 
> 标签：c#, visual-studio-2010, sql-server-2008-r2, windows-installer, custom-action

I have written an application that uses a SQL Server database.

I've been using SQL Server Express on my local PC. The app works fine on my PC, so now I'm trying to distribute it.

Most of our customers will be fine with Express on their local machines.

Some of our larger customers may have several employees accessing the same database, so it will need to reside on a server.

How can I make my installer do the following:

1.  Ask the user if they want to use a local or network database.
2.  Search the PC/network for SQLServer running services and allow them to select one.
3.  If not present, install SQL Server Express on their local, or networked machine.

I've read about "custom actions", but they only run after an app's installation has finished, but if I've set SQL Server Express as a "prerequisite", then it gets automatically installed before my custom action gets a chance to run.

I'm using VS2010 (employer requirement), C# / .Net 3.5

Any specific or general advice is appreciated. Am I even using the right approach here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:16:04.340

您必须编写一个引导应用程序，在启动安装程序之前检查并在必要时解决 SQL 服务器先决条件。显然，您的引导应用程序将检查注册表中的某些键，但我不知道这些键是什么。其他人将不得不在那里向您提供详细信息。

您的 MSI 应该有一个在安装、修复或升级时运行的自定义操作，用于检查某种形式的 SQL 服务器是否存在，如果不存在，则告诉用户启动 .EXE（您的引导应用程序）和然后退出。或者，如果您不介意一些繁琐的工作来完成它，您可以让您的 MSI 启动 .EXE 而不是在这种情况下显示一个消息框。

# android - Android BroadCast Receiver and GMC

> ID：15640411
> 
> 赞同：1
> 
> 时间：2013-03-26T15:03:07.627
> 
> 标签：android, android-intent, google-cloud-messaging, android-broadcast

i've a problem like this [use registerReceiver for non activity and non service class](https://stackoverflow.com/questions/13238600/use-registerreceiver-for-non-activity-and-non-service-class?answertab=oldest#tab-top). i try to use the Google Message Cloud, and i need to register a BroadCastReceiver from one activity and unregister it from another activity. For do this i placed the BroadcastReceiver in another package than the activity.
in the activity i've this:

```
 public void onPushStateButtonClicked(View view) {
            // controllo se il bottone è su on
            boolean on = ((ToggleButton) view).isChecked();
            PushClientService p = new PushClientService();
            if (on) {
                // se il bottone  in impostazioni è settato ad on registro il dispositivo
                p.customReceiver(this);
                p.pushService(this);
            }else if(!on) {
                // se il bottone  in impostazioni è settato ad off cancello il dispositivo

                try{    
                    GCMRegistrar.unregister(this);
                    p.customUnregisterReceiver(this);

                }catch(IllegalArgumentException iAE){
                    Log.e("Errore:","device non registrato "+iAE);
                }
            }
} 
```

in the other class i've this:

```
private final BroadcastReceiver mHandleMessageReceiver =
            new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
                Log.d("Message",newMessage);
            }
        };
        public void customReceiver(Context context){
            context.registerReceiver(mHandleMessageReceiver,
                    new IntentFilter(DISPLAY_MESSAGE_ACTION));
        }
        public void customUnregisterReceiver(Context context){
            context.unregisterReceiver(mHandleMessageReceiver);
        } 
```

and this is the manifest:

```
?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testpushcall"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <permission android:name="com.example.testpushcall.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="com.example.testpushcall.permission.C2D_MESSAGE" /> 
    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" /> 
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.testpushcall.TestPush"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name="com.example.testpushcall.utils.CustomGCMBroadcastReceiver" 
            android:permission="com.google.android.c2dm.permission.SEND" >
          <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.example.testpushcall" />
          </intent-filter>
        </receiver>
        <service android:name="com.example.testpushcall.utils.GCMIntentService" />
    </application>

</manifest> 
```

when i unregister the receiver the value of mHandleMessageReceiver is different from the registration, how can i do? make mHandleMessageReceiver static?

Please give me an idea tnks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:34:12.207

我只使用清单中声明的​​接收器解决了这个问题。并从谷歌服务器注册和注销 id

# c++ - c++ programming issue

> ID：15640414
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:03:14.500
> 
> 标签：c++, visual-c++

I always get the error ((IntelliSense: expression must be a modifiable lvalue )) for the expression used with the "for" , please help .

```
for (c=2 ; c <= x -1 ; c++ )
    if ( x % c = 0 )
        cout << "not prime" ;
    else cout << "prime"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T15:05:26.300

我猜您正在尝试比较`x % c`with的结果`0`。在这种情况下，

```
if ( x % c = 0 ) 
```

这必须是

```
// --------v
if ( x % c == 0 ) 
```

注意额外的`=`.

* * *

原因是，它`x % c`不返回可修改的左值，并且只使用一个`=`，你试图评估`0`的结果`x % c`，这是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:05:31.720

据我所知，可能是指这里`==`而不是`=`：

```
if ( x % c = 0 ) 
```

像这样：

```
if ( x % c == 0 ) 
```

在第一种情况下，您尝试分配`%`临时操作的结果，不能分配给。这个先前的[线程](https://stackoverflow.com/a/2145824/1708801)涵盖了一些关于临时工的问题。本文更深入一点，但可能会让您更好地理解[理解 C 和 C++ 中的左值和右值](http://eli.thegreenplace.net/2011/12/15/understanding-lvalues-and-rvalues-in-c-and-c/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T15:06:03.363

您`=`在该`if`行中缺少一个：

```
for (c=2 ; c <= x -1 ; c++ )
    if ( x % c == 0 )
        cout << "not prime" ;
    else cout << "prime"; 
```

（并不是说你的代码会告诉你一个数字是否是素数；它会打印它是否是每个小于它的数字的倍数）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T15:05:08.983

你错过了一个`=`：

```
if ( x % c == 0 )
           ^^---- 
```

`=`是一个作业，`==`是一个相等性测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T15:05:20.287

`=`是*赋值*运算符。您正在寻找的是比较运算符`==`：

```
if ( x % c == 0 )
//         ^^ 
```

[***现场演示***](http://liveworkspace.org/code/4yc7Hy%242765)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T15:13:44.237

我想，你应该再看看`x % c == 0`。您将零分配给 x 模 c 的结果。

对我来说，您的代码如下所示运行良好（Objective-C，所以没有@cout@，我们使用@NSLog（）；@：

```
for ( c = 2; c <= x-1; c++ ) 
    if ( x % c == 0 ) NSLog(@"not prime");
    else NSLog(@"prime"); 
```

# jquery - Jquery JQgrid, show input field

> ID：15640416
> 
> 赞同：2
> 
> 时间：2013-03-26T15:03:23.653
> 
> 标签：jquery, jqgrid, datatables, jqgrid-php

I have a JQGrid with an input field, which works fine, but I would like to have the field always shown, now the user has to click in the field to see the input text field appear.

```
 colModel:[ {name:'Image', index:'Image', width:10, formatter: imageFormatter, align: 'center', sortable:false},                     
                 {name:'ItemId', index:'ItemId', width:15, align: 'center'}, 
                 {name:'ItemName', index:'ItemName'},                     
                 {name:'UnitId', index:'UnitId', width:10, align: 'center'},
                 {name:'MultipleQty', index:'MultipleQty', width:10, align: 'right'},
                 {name:'Quantity', index: 'Quantity', align:'center',editable:true,editrules:{number:true}, edittype:'text', width:14,editoptions:{size:5,maxlength:5}},
                 {name:'Basket', index:'Basket', width:7, formatter: basketFormatter, align: 'center', sortable:false}                  
               ], 
```

It's the quantity field, which option can I use to have the field always shown ? Where can I find the documentation surrounding all possible options ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:17:43.243

经过长时间的搜索，我终于找到了解决方案：

[jqGrid：默认情况下所有行处于“内联编辑模式”](https://stackoverflow.com/questions/9170260/jqgrid-all-rows-in-inline-edit-mode-by-default)

我添加了这个：

```
loadComplete: function () {
    var $this = $(this), ids = $this.jqGrid('getDataIDs'), i, l = ids.length;
    for (i = 0; i < l; i++) {
        $this.jqGrid('editRow', ids[i], true);
    }
} 
```

# c# - How to configure database when converting the WPF application to browser application

> ID：15640422
> 
> 赞同：0
> 
> 时间：2013-03-26T15:03:41.430
> 
> 标签：c#, asp.net, wpf, visual-studio-2010

I've created a solution with multiple projects. One of the projects is a WPF application, which runs fine as standalone application. It communicates with a service-application and a database.

Now I've created another WPF application, this time browser oriented. This means a user on the network should be able to approach my XBAP-page. This project seems to make use of the `aspnetdb.mdf` file. I've created that file but now the tables are incorrect, probably because of the roles and profiles being incorrect. I normally use my own Microsoft SQL Database.

I've read around on the internet and it seemed my solution (and application(s?)) need to be configured differently. I was wondering how I could get as close to the original solution as possible without changing too much. I don't want to use the `aspnetdb.mdf` but it seems like I should alter my original database file to make it work. What should I do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:23:46.010

这取决于您的 WPF 应用程序如何与您的服务应用程序进行通信。XBAP 应用程序被限制使用某些库（和某些通信方式），但它们支持与 WCF 服务或 asmx 服务器页面的通信。根据您已经在 WPF 应用程序和服务应用程序之间进行对话的方式，一个可能比另一个更容易。

# model-view-controller - Griffon: Error when running report with JasperReports

> ID：15640424
> 
> 赞同：0
> 
> 时间：2013-03-26T15:03:45.753
> 
> 标签：model-view-controller, jasper-reports, griffon

I tried to run this code but it give me error like this:

```
2013-03-26 22:45:55,546 [pool-2-thread-1] ERROR griffon.util.GriffonExceptionHandler - Uncaught Exception
org.codehaus.groovy.runtime.InvokerInvocationException: java.lang.NoClassDefFoundError: com/lowagie/text/SplitCharacter
    at org.codehaus.griffon.runtime.util.AbstractUIThreadHandler$1.run(AbstractUIThreadHandler.java:41)
Caused by: java.lang.NoClassDefFoundError: com/lowagie/text/SplitCharacter
    at net.sf.jasperreports.engine.JasperExportManager.exportToPdfFile(JasperExportManager.java:145)
    at net.sf.jasperreports.engine.JasperExportManager.exportReportToPdfFile(JasperExportManager.java:497)
    at net.sf.jasperreports.engine.JasperExportManager$exportReportToPdfFile.call(Unknown Source)
    at report.ReportController$_closure1_closure2.doCall(ReportController.groovy:28)
    at report.ReportController$_closure1_closure2.doCall(ReportController.groovy)
    ... 1 more
Caused by: java.lang.ClassNotFoundException: com.lowagie.text.SplitCharacter
    ... 6 more 
```

Here's the code:

--ReportController.groovy--

```
import net.sf.jasperreports.engine.JasperCompileManager
import net.sf.jasperreports.engine.JasperExportManager
import net.sf.jasperreports.engine.JasperFillManager
import net.sf.jasperreports.engine.data.JRBeanCollectionDataSource
import net.sf.jasperreports.swing.JRViewer

class ReportController {
    // these will be injected by Griffon
    def model
    def view

    def report = {
        def jasperParameter = [:]
            jasperParameter.REPORT_TITLE = "Test report"

        def jasperReport = JasperCompileManager.compileReport("report.jrxml")

        def mapData = [:]
            mapData.name = "abc"
            mapData.price = 1234
            def datas = [mapData]
                JRBeanCollectionDataSource dataSource = new JRBeanCollectionDataSource(datas)

        def jasperPrint = JasperFillManager.fillReport(jasperReport, jasperParameter, dataSource)

        JasperExportManager.exportReportToPdfFile(jasperPrint, "g:/sample.pdf")

        JRViewer viewer = new JRViewer(jasperPrint)

        viewer.setOpaque(true)
        viewer.setVisible(true)

        def jf = new javax.swing.JFrame ()

        jf.add(viewer)
        jf.setSize(800, 600)
        jf.setVisible(true)
        jf.setDefaultCloseOperation(EXIT_ON_CLOSE)
    }
} 
```

--ReportView.groovy--

```
package report

application(title: 'report',
  preferredSize: [320, 240],
  pack: true,
  //location: [50,50],
  locationByPlatform: true,
  iconImage:   imageIcon('/griffon-icon-48x48.png').image,
  iconImages: [imageIcon('/griffon-icon-48x48.png').image,
               imageIcon('/griffon-icon-32x32.png').image,
               imageIcon('/griffon-icon-16x16.png').image]) {
    gridLayout (cols: 1, rows: 1)
    button (text: 'report', actionPerformed: controller.& report)
} 
```

--report.jrxml-- (I put this file in /staging folder)

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="test" pageWidth="800" pageHeight="1200" columnWidth="555" leftMargin="25" rightMargin="25" topMargin="30" bottomMargin="30">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <queryString>
        <![CDATA[]]>
    </queryString>
    <pageHeader>
        <band height="100">
            <staticText>
                <reportElement x="0" y="0" width="285" height="36"/>
                <textElement>
                    <font size="24" isBold="true"/>
                </textElement>
                <text><![CDATA[Report of Testing]]></text>
            </staticText>
        </band>
    </pageHeader>
    <detail>
        <band height="200">
            <staticText>
                <reportElement x="0" y="0" width="374" height="48"/>
                <textElement>
                    <font size="18"/>
                </textElement>
                <text><![CDATA[If you don't see this, it didn't work blah blah blah.... ]]></text>
            </staticText>
        </band>
    </detail>
    <pageFooter>
        <band height="100"/>
    </pageFooter>
</jasperReport> 
```

I don't quite know about .jrxml, i got this sample from the web, if I made a mistake please correct it.

Source: [http://www.iaeronz.com/?p=562](http://www.iaeronz.com/?p=562)

# jquery - jquery自动完成绑定它的正确方法

> ID：15640426
> 
> 赞同：1
> 
> 时间：2013-03-26T15:03:54.060
> 
> 标签：jquery, jquery-autocomplete

我有 jquery 代码，但给出了语法错误，我无法弄清楚。请你看一下。

我有代码工作，但我需要更改绑定事件处理程序的方式，当我更改它时，它不起作用。

这段代码完美无缺，但我需要用注释的代码来改变它

```
//$("#wrapper").on("autocomplete", "#update_speciality", function () { 
  $("#update_speciality").autocomplete({
            ...........
  }); 
```

这段代码有问题，但无法弄清楚。你能帮忙吗？

```
 $("#wrapper").on("autocomplete", "#update_speciality", function () { 
            ...........
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:10:56.053

```
$(function(){
  $("#wrapper").on("keydown.autocomplete","#update_speciality",function(e){
    $(this).autocomplete({
      source : 'yoururl'
    });
  });
}); 
```

还要使用正确的 ID 命名，而不是按照[Google HTML/CSS 样式指南](http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml)的建议编写**update- speciality** [ID 和类名称分隔符，而不是 update_speciality](http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml?showone=ID_and_Class_Name_Delimiters#ID_and_Class_Name_Delimiters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:06:29.473

这`autocomplete`不是一个 jQuery 事件，它是一个 jQuery UI 小部件[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)。该`on`方法仅支持事件处理。

# android - 关于安卓电话号码的咨询

> ID：15640431
> 
> 赞同：0
> 
> 时间：2013-03-26T15:04:04.147
> 
> 标签：android

我尝试像这样获取我的电话号码：

```
private String getMyPhoneNumber(){
        TelephonyManager mTelephonyMgr;
        mTelephonyMgr = (TelephonyManager)
            getSystemService(Context.TELEPHONY_SERVICE); 
        return mTelephonyMgr.getLine1Number(); 
```

但我得到空

如何解决？以及如何获取提供者名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:04:50.157

这是因为一些供应商没有在 SIM 中保存电话号码。这在某些国家工作得很好。

最好让用户输入电话号码。

getLine1Number()的[文档](http://developer.android.com/reference/android/telephony)说，如果数字“不可用”，此方法将返回 null，但没有说明数字何时可能不可用。

获取提供者名称

查看[android 文档](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getNetworkOperatorName%28%29)。

```
TelephonyManager manager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE));
String carrierName = manager.getNetworkOperatorName(); 
```

# css - 使此列表正确展开

> ID：15640434
> 
> 赞同：0
> 
> 时间：2013-03-26T15:04:16.453
> 
> 标签：css

我有一个列表，其中包含单击链接时打开的详细信息部分。它在大多数情况下都能正常工作，但在某些极端情况下却不行。

我在代码中添加了注释来准确解释问题所在。

理想情况下，我想用 CSS 解决这个问题，但我已经在页面上使用了 javascript 和 jQuery，所以如果不能使用这些解决方案是可以的。

[这是一个小提琴](http://jsfiddle.net/gzjwF/)。

或者这里是html：

**示例 1**这就是它的外观。

```
<ul>
    <li class='open'>
        <div class='title'>
            <a class='link'>details</a>
            item 1
        </div>
        <div class='details'>
            These details open when the details link is clicked
        </div>
    </li>
    <li>
        <div class='title'>
            <a class='link'>details</a>
            item 2
        </div>            
        <div class='details'>
            this is hidden
        </div>        
    </li>
    <li>
        <div class='title'>
            <a class='link'>details</a>
            item 3            
        </div>            
        <div class='details'>
            this is hidden
        </div>        
    </li>    
</ul> 
```

**示例 2**如果名称太长，它应该将整个列表的宽度推得更宽，并且不会中断到下一行，背景会在其下方展开。相反，它覆盖了详细信息链接，而不是扩展背景。其他项目的详细信息链接也应向右移动，以便它们保持一致。

```
<ul>
    <li class='open'>
        <div class='title'>
            <a class='link'>details</a>
            item 1 with a very very  very long name
        </div>
        <div class='details'>
            These details open when the details link is clicked
        </div>
    </li>
    <li>
        <div class='title'>
            <a class='link'>details</a>
            item 2
        </div>            
        <div class='details'>
            this is hidden
        </div>        
    </li>
</ul> 
```

**示例 3**详细信息部分有时可以包含一个长 URL，该 URL 也不会中断。背景应该扩展以覆盖 url，详细信息链接向右移动以与 url 的末尾对齐。

```
<ul>
    <li class='open'>
        <div class='title'>
            <a class='link'>details</a>
            item 1
        </div>
        <div class='details'>
            <div class='url'>
                 all this should be on one line: www.a-long-url
            </div>

        </div>
    </li>
    <li>
        <div class='title'>
            <a class='link'>details</a>
            item 2
        </div>            
        <div class='details'>
            this is hidden
        </div>        
    </li>
</ul> 
```

和CSS：

```
.details {
    display: none;
}

.open .details {
    display: block;
}

.link {
    text-decoration: underline;
    float: right;
}

.title {
    font-weight: bold;
    white-space:nowrap;
}

.url {
    white-space:nowrap;
}

ul {
    list-style-type: none;
    width: 15em;
}
li.open {
    background-color: #c8d8ff;
    border-radius: 2em;
}

li>div {
    padding: 1em;     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:09:22.950

你可以只设置`display: inline-block`元素`li.open`。当然，仅当您希望每个列表项都适合其内容时。[工作示例](http://jsfiddle.net/gzjwF/2/)

虽然我不太确定你的问题是什么意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:07:14.727

只需删除该`ul { width: 15em }`部分，它就可以工作：http: [//jsfiddle.net/gzjwF/1/](http://jsfiddle.net/gzjwF/1/)

# php - CakePHP 自动用另一个字段的值填充一个字段

> ID：15640440
> 
> 赞同：0
> 
> 时间：2013-03-26T15:04:46.090
> 
> 标签：php, cakephp, foreign-keys, fullcalendar

我正在使用蛋糕 2.3.1。
在我的事件/添加视图中，我有这个字段：

```
echo $this->Form->input('customer_id', array('label' => 'Customer: ')); 
```

这是一个输入选择表单，其中包含我所有的客户。现在**我需要这个：**

```
echo $this->Form->input('title', array('type' => 'hidden')); 
```

**自动填写我在上面的字段中选择的客户名称。
如何才能做到这一点？**

关系：

> Customer HasMany 事件（外键 -> customer_id）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:18:51.227

在根据选择而变化的表单中设置隐藏值并不是一个好主意。由于最终用户可以轻松更改其值，或者可能完全禁用 Javascript（即时更改需要这样做），因此它不值得信赖。最好在 Event 模型的 beforeSave 方法中保存表单后获取标题。例如：

```
function beforeSave($options = array()) {
    if (isset($this->data[$this->alias]['customer_id'])) {
        // Set the Customer.name field as Event.title
        $this->data[$this->alias]['title'] = $this->Customer->field(
            'name', array(
                // The condition for the find operation on this customer
                'id' => $this->data[$this->alias]['customer_id']
             )
        );
    }

    return true;
} 
```

# php - Symfony 1.4：命令不起作用并且没有消息

> ID：15640441
> 
> 赞同：0
> 
> 时间：2013-03-26T15:04:49.370
> 
> 标签：php, ubuntu, doctrine, command, symfony-1.4

我尝试在 symfony 1.4 中创建教程“jobeet”，然后我到达了一个我被阻止的地方。我必须设置数据库，我做了一个：

```
mysqladmin -u root -p create jobeet 
```

它起作用了，创建了数据库，后来我不得不对项目说 jobeet 使用这个数据库：

```
php symfony configure:database " mysql:host=localhost; dbname=jobeet " root mYsEcret 
```

但是当我输入 symfony 的命令时，我从来没有成功或失败的消息。通常它不应该工作，因为密码不是“mYsEcret”。
顺便说一句，我尝试运行其他命令，例如

```
php symfony doctrine:build - all 
```

也没什么。没有构建成功或构建失败。从那一刻起，我真的被困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:14:52.503

您正在运行的命令只是配置 DSN，它不会尝试连接，因此它将始终有效。

```
php symfony help configure:database 

Description:
 The configure:database task configures the database DSN
 for a project: 
```

检查您的错误日志，您可以使用这些详细信息从您的 cli 连接到 mysql 吗？

# c# - 使用自动生成的列选项“true”和来自数据透视表的数据绑定自定义gridview？

> ID：15640446
> 
> 赞同：0
> 
> 时间：2013-03-26T15:05:03.657
> 
> 标签：c#, asp.net

我已经在这里问过这个问题：[Table with dynamic number of columns to show](https://stackoverflow.com/questions/15621099/table-with-dynamic-number-of-columns-to-show/15621820#15621820)

但我对此还有几个问题。

1.我有一个数据表，其中包含保险名称、计划类型、保费等数据……”每一行

在我的前端，我需要显示：

```
Insurance Name     HealthNet       Harvard         UniCare

Plan Type            HMO            PPO              HMO  

Premium              100            150             200 
```

为此，我使用以下方法来透视数据表并将其分配给gridview）

```
private DataTable PivotTable(DataTable origTable){

        DataTable newTable = new DataTable();
        DataRow dr = null;
        //Add Columns to new Table
        for (int i = 0; i <= origTable.Rows.Count; i++)
        {
            newTable.Columns.Add(new DataColumn(origTable.Columns[i].ColumnName, typeof(String)));
        }

        //Execute the Pivot Method
        for (int cols = 0; cols < origTable.Columns.Count; cols++)
        {
            dr = newTable.NewRow();
            for (int rows = 0; rows < origTable.Rows.Count; rows++)
            {
                if (rows < origTable.Columns.Count)
                {
                    dr[0] = origTable.Columns[cols].ColumnName; // Add the Column Name in the first Column
                    dr[rows + 1] = origTable.Rows[rows][cols];
                }
            }
            newTable.Rows.Add(dr); //add the DataRow to the new Table rows collection
        }
        return newTable;
} 
```

和数据绑定如下：

```
DataTable tempTable = PivotTable(actualDataTable);
myGridView.DataSource = tempTable;
myGridView.DataBind(); 
```

现在我的输出看起来像：

```
Insurance Name     HealthNet       Harvard         UniCare

Plan Type            HMO            PPO              HMO  

Premium              100            150             200 
```

但现在我的网格视图显示了数据源中的所有值。我想自定义我的网格视图外观，以便我可以将图像插入每个保险名称旁边的表格行并隐藏一些行。

注意：我不仅限于gridview。我对任何控制都很好，但是数据应该是动态的，而不是硬编码。

谢谢

编辑：

我可以根据列数循环而不是跟随以在每个保险名称旁边显示图像。

```
protected void myGridview_RowDataBound(Object sender, GridViewRowEventArgs e)
    {

            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                e.Row.Cells[1].Text = "<img src=../images/" + e.Row.Cells[1].Text + ".png />";
                e.Row.Cells[2].Text = "<img src=../images/" + e.Row.Cells[2].Text + ".png />";

            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:15:37.567

您可以使用GridView 的[RowDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)事件。

在 RowDataBound 事件中，您可以操作每个单元格的数据。例如，将图像插入单元格。

但是，您不能隐藏整行。如果您不想显示一行，则需要在 PivotTable 方法中实现该逻辑。

# sql - 重叠的日期范围 - 仅识别重叠

> ID：15640449
> 
> 赞同：1
> 
> 时间：2013-03-26T15:05:11.930
> 
> 标签：sql, recursive-query

我已经看到了很多用于识别日期范围重叠的记录的解决方案，以及合并重叠范围的其他示例。

但是，我对显示仅发生重叠的范围的结果感兴趣。事实上，我有 3 个 ProductID（只有 3 个会存在），我正在尝试为每个客户找到他们拥有所有三个产品的日期范围。

```
SET NOCOUNT ON; 

CREATE TABLE #tmp
(
   CustomerID integer
  ,ProductID varchar(12)
  ,Eff_Dt DATE
  ,End_Dt DATE
);

-- Customer 1000: Expecting results to show 2 rows:   1/1 - 1/5   and    1/10 - 1/15
INSERT INTO #tmp VALUES (1000,'PRODUCT_A','01-01-2013' ,'01-31-2013' );
INSERT INTO #tmp VALUES (1000,'PRODUCT_B','01-01-2013' ,'01-05-2013' );
INSERT INTO #tmp VALUES (1000,'PRODUCT_B','01-10-2013' ,'01-15-2013' );
INSERT INTO #tmp VALUES (1000,'PRODUCT_C','01-01-2013' ,'01-31-2013' );

-- Customer 2000: Expecting results to show 1 row:    1/19 - 1/31
INSERT INTO #tmp VALUES (2000,'PRODUCT_A','01-01-2013' ,'01-31-2013' );
INSERT INTO #tmp VALUES (2000,'PRODUCT_B','01-01-2013' ,'01-31-2013' );
INSERT INTO #tmp VALUES (2000,'PRODUCT_C','01-19-2013' ,'01-31-2013' );

-- Customer 3000: Expecting results to show no rows (or nulls)
INSERT INTO #tmp VALUES (3000,'PRODUCT_A','01-01-2013' ,'01-10-2013' );
INSERT INTO #tmp VALUES (3000,'PRODUCT_A','01-16-2013' ,'01-31-2013' );
INSERT INTO #tmp VALUES (3000,'PRODUCT_B','01-01-2013' ,'01-12-2013' );
INSERT INTO #tmp VALUES (3000,'PRODUCT_C','01-15-2013' ,'01-31-2013' );

-- Customer 4000: Expecting results to show 1 row:    1/15 - 1/23
INSERT INTO #tmp VALUES (4000,'PRODUCT_A','01-15-2013' ,'01-31-2013' );
INSERT INTO #tmp VALUES (4000,'PRODUCT_B','01-01-2013' ,'01-31-2013' );
INSERT INTO #tmp VALUES (4000,'PRODUCT_C','01-01-2013' ,'01-23-2013' );

-- Customer 5000: Expecting results to show 0 rows
INSERT INTO #tmp VALUES (5000,'PRODUCT_A','01-17-2013' ,'01-31-2013' );
INSERT INTO #tmp VALUES (5000,'PRODUCT_B','01-01-2013' ,'01-10-2013' );
INSERT INTO #tmp VALUES (5000,'PRODUCT_C','01-07-2013' ,'01-19-2013' );

-- Customer 6000: Expecting results to show 3 rows:    1/11 - 1/12   1/17 - 1/22    1/26 - 1/27
INSERT INTO #tmp VALUES (6000,'PRODUCT_A','01-01-2013' ,'01-04-2013' );
INSERT INTO #tmp VALUES (6000,'PRODUCT_A','01-09-2013' ,'01-12-2013' );
INSERT INTO #tmp VALUES (6000,'PRODUCT_A','01-17-2013' ,'01-22-2013' );
INSERT INTO #tmp VALUES (6000,'PRODUCT_A','01-26-2013' ,'01-31-2013' );
INSERT INTO #tmp VALUES (6000,'PRODUCT_B','01-04-2013' ,'01-28-2013' );
INSERT INTO #tmp VALUES (6000,'PRODUCT_C','01-11-2013' ,'01-27-2013' );

SET NOCOUNT OFF;
/* ======   EXPECTED RESULTS  =======================

CustomerID    EFF_DT        END_DT
1000          1/1/2013      1/5/2013
1000          1/10/2013     1/15/2013
2000          1/19/2013     1/31/2013
4000          1/15/2013     1/23/2013
6000          1/11/2013     1/12/2013
6000          1/17/2013     1/22/2013
6000          1/26/2013     1/27/2013

===================================================*/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:21:34.700

这是答案：

```
select t.customerid, t.eff_dt, count(distinct t2.productId),
       MIN(t2.end_dt) as end_dt
from #tmp t join
     #tmp t2
     on t.CustomerID = t2.CustomerID and
        t.Eff_Dt between t2.Eff_Dt and t2.End_Dt
group by t.CustomerID, t.eff_dt
having count(distinct t2.productId) = 3 
```

这是使用自联接来计算每个产品上不同产品的数量`eff_dt`。您需要三种不同的产品，这就是该`having`条款的作用。

在其中一个结束之前，共有三种不同的产品。这将是`end_dt`生效日期之后的第一个 - 这是由`min(end_dt)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:28:34.333

尝试：

```
select ab.CustomerID, 
       case when ab_Eff_Dt > c.Eff_Dt then ab_Eff_Dt else c.Eff_Dt end abc_Eff_Dt,
       case when ab_End_Dt < c.End_Dt then ab_End_Dt else c.End_Dt end abc_End_Dt
from
(select a.CustomerID, 
        case when a.Eff_Dt > b.Eff_Dt then a.Eff_Dt else b.Eff_Dt end ab_Eff_Dt,
        case when a.End_Dt < b.End_Dt then a.End_Dt else b.End_Dt end ab_End_Dt
 from #tmp a
 join #tmp b 
   on a.CustomerID = b.CustomerID and a.Eff_Dt < b.End_Dt and b.Eff_Dt < a.End_Dt
 where a.ProductID = 'PRODUCT_A' and b.ProductID = 'PRODUCT_B') ab
join #tmp c 
  on ab.CustomerID = c.CustomerID and ab_Eff_Dt < c.End_Dt and c.Eff_Dt < ab_End_Dt
where c.ProductID = 'PRODUCT_C' 
```

[（这里](http://sqlfiddle.com/#!3/d1354/1)的 SQLFiddle ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-21T13:31:50.910

```
CREATE TABLE #TMP
(
    CustomerID INT,
    ProductID VARCHAR(12),
    Eff_Dt DATE,
    End_Dt DATE
);
--
INSERT INTO #TMP
VALUES
-- Customer 1000: Expecting results to show 2 rows: "1/1 - 1/5"; "1/10 - 1/15"
(1000, 'PRODUCT_A', N'2013-01-01T00:00:00', N'2013-01-31T00:00:00'),
(1000, 'PRODUCT_B', N'2013-01-01T00:00:00', N'2013-01-05T00:00:00'),
(1000, 'PRODUCT_B', N'2013-01-10T00:00:00', N'2013-01-15T00:00:00'),
(1000, 'PRODUCT_C', N'2013-01-01T00:00:00', N'2013-01-31T00:00:00'),
-- Customer 2000: Expecting results to show 1 row: "1/19 - 1/31"
(2000, 'PRODUCT_A', N'2013-01-01T00:00:00', N'2013-01-31T00:00:00'),
(2000, 'PRODUCT_B', N'2013-01-01T00:00:00', N'2013-01-31T00:00:00'),
(2000, 'PRODUCT_C', N'2013-01-19T00:00:00', N'2013-01-31T00:00:00'),
-- Customer 3000: Expecting results to show NO rows (or nulls)
(3000, 'PRODUCT_A', N'2013-01-01T00:00:00', N'2013-01-10T00:00:00'),
(3000, 'PRODUCT_A', N'2013-01-16T00:00:00', N'2013-01-31T00:00:00'),
(3000, 'PRODUCT_B', N'2013-01-01T00:00:00', N'2013-01-12T00:00:00'),
(3000, 'PRODUCT_C', N'2013-01-15T00:00:00', N'2013-01-31T00:00:00'),
-- Customer 4000: Expecting results to show 1 row: "1/15 - 1/23"
(4000, 'PRODUCT_A', N'2013-01-15T00:00:00', N'2013-01-31T00:00:00'),
(4000, 'PRODUCT_B', N'2013-01-01T00:00:00', N'2013-01-31T00:00:00'),
(4000, 'PRODUCT_C', N'2013-01-01T00:00:00', N'2013-01-23T00:00:00'),
-- Customer 5000: Expecting results to show 0 rows
(5000, 'PRODUCT_A', N'2013-01-17T00:00:00', N'2013-01-31T00:00:00'),
(5000, 'PRODUCT_B', N'2013-01-01T00:00:00', N'2013-01-10T00:00:00'),
(5000, 'PRODUCT_C', N'2013-01-07T00:00:00', N'2013-01-19T00:00:00'),
-- Customer 6000: Expecting results to show 3 rows: "1/11 - 1/12"; "1/17 - 1/22"; "1/26 - 1/27"
(6000, 'PRODUCT_A', N'2013-01-01T00:00:00', N'2013-01-04T00:00:00'),
(6000, 'PRODUCT_A', N'2013-01-09T00:00:00', N'2013-01-12T00:00:00'),
(6000, 'PRODUCT_A', N'2013-01-17T00:00:00', N'2013-01-22T00:00:00'),
(6000, 'PRODUCT_A', N'2013-01-26T00:00:00', N'2013-01-31T00:00:00'),
(6000, 'PRODUCT_B', N'2013-01-04T00:00:00', N'2013-01-28T00:00:00'),
(6000, 'PRODUCT_C', N'2013-01-11T00:00:00', N'2013-01-27T00:00:00');
--
--
;
WITH MIN_MAX
AS (SELECT MIN(Eff_Dt) S,
           MAX(End_Dt) E
    FROM #TMP),
     ALL_DATES
AS (SELECT MIN_MAX.S DT
    FROM MIN_MAX
    UNION ALL
    SELECT DATEADD(DAY, 1, ALL_DATES.DT)
    FROM ALL_DATES
    WHERE ALL_DATES.DT < (SELECT MIN_MAX.E FROM MIN_MAX)),
     GROUPED
AS (SELECT Q.CustomerID,
           Q.ProductID,
           Q.DT,
           CASE WHEN MAX(TX.CustomerID) IS NULL THEN 0 ELSE 1 END YES
    FROM
    (
        SELECT *FROM ALL_DATES
            CROSS JOIN
            (SELECT DISTINCT CustomerID, ProductID FROM #TMP) AS AQ
    ) AS Q
        LEFT JOIN #TMP AS TX
            ON TX.CustomerID = Q.CustomerID
               AND TX.ProductID = Q.ProductID
               AND Q.DT
               BETWEEN TX.Eff_Dt AND TX.End_Dt
    GROUP BY Q.CustomerID,
             Q.ProductID,
             Q.DT),
     BuildFlags
AS (SELECT G.CustomerID,
           G.DT,
           ROW_NUMBER() OVER (PARTITION BY G.CustomerID ORDER BY G.DT) RN,
           CASE
               WHEN WQ.tot =
               (
                   SELECT COUNT(DISTINCT g2.ProductID)
                   FROM GROUPED AS g2
                   WHERE g2.CustomerID = G.CustomerID
                         AND g2.DT = G.DT
                         AND g2.YES = 1
               ) THEN 1
               ELSE 0
           END FLAG
    FROM GROUPED AS G
        CROSS APPLY
    (
        SELECT COUNT(DISTINCT E9.ProductID) tot
        FROM #TMP AS E9
        WHERE E9.CustomerID = G.CustomerID
    ) AS WQ ),
     AddRanks
AS (SELECT *,
           BuildFlags.RN - ROW_NUMBER() OVER (PARTITION BY BuildFlags.CustomerID,
                                                           BuildFlags.FLAG
                                              ORDER BY BuildFlags.DT
                                             ) groupRank
    FROM BuildFlags)
SELECT AddRanks.CustomerID,
       MIN(AddRanks.DT) AS StartDate,
       MAX(AddRanks.DT) AS EndDate
FROM AddRanks
WHERE AddRanks.FLAG = 1
GROUP BY AddRanks.CustomerID,
         AddRanks.groupRank
ORDER BY AddRanks.CustomerID,
         MIN(AddRanks.DT)
OPTION (MAXRECURSION 0); 
```

[您可以在 DB Fiddle 找到执行](https://dbfiddle.uk/?rdbms=sqlserver_2016&fiddle=f00675bd924021f75dc9abe5c63b374f)

# javascript - Java 脚本在 Internet Explorer 中不起作用

> ID：15640453
> 
> 赞同：0
> 
> 时间：2013-03-26T15:05:17.173
> 
> 标签：javascript, jquery, internet-explorer, checkbox, console.log

使用 jQuery 为网站创建了一个复选框功能，这些功能适用于所有其他浏览器，如 Chrome、Firefox、Safari、Opera 等。但它不适用于 IE 所有版本。这是我的代码：

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>

    <ul id="filters" style="list-style:none; margin-top:75px; line-height:30px; ">

    <li>

        <input type="checkbox" value="outdoor" id="outdoor" />

        <label for="filter-category">Outdoor</label>

    </li>

    <li>

        <input type="checkbox" value="remote_monitor" id="remote_monitor" />

        <label for="filter-category">Remote Monitor</label>

    </li>

     <li>

        <input type="checkbox" value="battery" id="battery" />

        <label for="filter-category">Battery Operated</label>

    </li>

</ul>
<div style="width:850px; height:148px; clear:both; margin-top:80px;">

<div  class="category outdoor " style=" float:left;  ">Rocco</div>

<div  class="category remote_monitor camera" style="float:left;margin-top:-2px; margin-left:10px;">Borocco</div>

<div  class="category battery" style="float:left; margin-top:-2px;margin-left:10px;">Sylva</div>

<div  class="category battery outdoor " style="float:left; margin-top:-2px;margin-left:10px;">Novesto</div>

<script>
$('input').change (function() {

        var selector = $('input:checkbox').map(function(){ 

            return this.checked ? '.' + this.id : ''; 

        }).get().join('');

        console.log(selector);  

        var all = $('div[class^="category"]');

        if(selector.length)

          all.hide().filter(selector).show()

        else all.hide();

    });
</script> 
```

任何人都可以帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:11:29.110

`console.log()`在打开开发工具窗口之前无法在 IE 中工作。

`console.log()`对此的简短回答是，除非您正在积极测试，否则不要在您的代码中使用。如果您正在测试，无论如何您都将打开开发工具，因此代码将正常工作。如果您不进行测试，请删除`console.log()`; 它毫无用处。

更详细的答案可以在这里找到：[为什么 JavaScript 只有在 IE 中打开开发者工具一次后才能工作？](https://stackoverflow.com/questions/7742781/why-javascript-only-works-after-opening-developer-tools-in-ie-once/7742862#7742862)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:12:57.767

您的代码在 Internet Explorer 中运行良好。我相信，就像评论中已经指出的那样 - 您没有在 Internet Explorer 中打开控制台（f12）。您需要打开开发人员工具才能使*console.log*工作 - 否则会导致错误（并且您的 javascript 的执行将停止）

问题之一：

```
console.log(selector); 
```

[**你的代码**](http://jsfiddle.net/78UzX/)

# zend-framework - 单选按钮不得已在 zend 表单中选中

> ID：15640458
> 
> 赞同：0
> 
> 时间：2013-03-26T15:05:28.697
> 
> 标签：zend-framework

我必须以 zend 形式制作单选按钮。我使用了以下代码：-

```
$GiftEscalated = new Zend_Form_Element_Radio('IsEscalated'); 

$GiftEscalated->setLabel('Gift Escalated')

        ->setRequired(false)

        ->addFilter('StripTags')

        ->addFilter('StringTrim')

        ->addMultiOptions(array('Yes','No'))

        ->setDecorators(array('ViewHelper',

                            'Description',

                            'Errors',

                            array(array('data'=>'HtmlTag'), array('tag' => 'td')),

                            array('Label', array('tag' => 'td')),

                            array(array('row'=>'HtmlTag'),array('tag'=>'tr', 'openOnly'=>true))

                            )); 
```

它的工作。显示单选按钮，但已选中一个按钮。我不想要那个。我希望单选按钮不能被选中。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:08:21.163

多选项应该是一个关联数组，所以你想要：

```
->addMultiOptions(array('yes' => 'Yes', 'no' => 'No')) 
```

而不是您当前拥有的（关键是提交的值，因此根据需要进行更改）。

如果你想提交 0 和 1，那么这会更清楚一点：

```
->addMultiOptions(array('0' => 'Yes', '1' => 'No')) 
```

但是您需要删除这两个过滤器（无论如何它们都没有任何用途）。

我认为问题在于您的表单当前将使用“0”作为第一个元素的值，使用修剪过滤器将等于 null，这是表单最初具有的值。

# java - 如何在 Applet 中访问一个类（或 .java 文件）的 JTextArea 的文本？

> ID：15640460
> 
> 赞同：0
> 
> 时间：2013-03-26T15:05:32.220
> 
> 标签：java, swing, applet

我有 2 个 java 文件。一个是`inside.java`，另一个是`editor.java`（这是一个`applet`）。我有一个`JTextArea`存档`inside.java`。当用户点击“编辑”按钮时，它应该运行一个并且所有来自的`applet`文本都应该被复制到。`JTextArea``inside.java``JTextArea``applet`

我该怎么做？

目前我正在使用`desktop.open()`调用`editor.jnlp`文件。还有其他方法可以运行`applet`和访问变量吗？

inside.java-->

```
private void editActionPerformed(java.awt.event.ActionEvent evt) {                                     
    // TODO add your handling code here:
    File file= new File("C://Users//user//Documents//NetBeansProjects//blogspot//dist//editor.jnlp");
    try{
        if (Desktop.isDesktopSupported()) {
            Desktop.getDesktop().open(file);
        }
    }catch(Exception e){
        System.out.println("ex:" + e.toString());
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:12:02.480

将 JTextArea 的内容保存在静态变量中，例如

```
public class Inside{

public static String TEXT_CONTENT = null;

//then when you saves the content:

TEXT_CONTENT = txtS.getText();
}

//then when you try to use it in another class:
String contentSaved = Inside.TEXT_CONTENT; 
```

希望它符合您的要求。此致。（我避免了一些我确定你已经知道的代码）。

# asp.net-mvc - MultiTenancy Orchard - 如何找出请求来自哪个租户

> ID：15640465
> 
> 赞同：3
> 
> 时间：2013-03-26T15:05:53.167
> 
> 标签：asp.net-mvc, orchardcms, multi-tenant

我已经搜索了很长一段时间，但我没有找到任何线程来解释如何准确地找出代码中的当前租户。例如，我想根据租户的活动情况更改一些逻辑，如下所示：

```
 IQueryable<ContentPartRecord> getContentPartDates;
            if (Tenat == ExampleTenant)
            {
                getContentPartDates = GetContentPartDates((int)Id)
                .Where(ss => ss.SalesStatus == "Guaranteed")
                .OrderBy(x => x.start_date);
            }else {
                getContentPartDates = GetContentPartDates((int) Id).OrderBy(x => x.start_date);
            } 
```

这样做的最佳方法到底是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T22:49:23.790

注入`ShellSettings`ctor。此对象包含有关当前工作单元执行的外壳（即租户）的所有数据（来自*Settings.txt文件）。*

# sitecore - Active Directory 模块：从多个 AD 域中检索成员

> ID：15640466
> 
> 赞同：1
> 
> 时间：2013-03-26T15:05:59.790
> 
> 标签：sitecore, sitecore6

Sitecore 6.5，更新 6。Active Directory 模块 1.03 修订版 111005

我正在尝试从 AD 中的特定组中检索成员，并允许这些用户登录并分配给 Sitecore 中的角色。

我已经能够更新我的成员资格提供程序以使用 customFilter 仅从 AD 检索域 1 中特定组中的那些成员。

我现在遇到的问题是该组中的成员是域（域 2）的成员，而不是该组所在的域（域 1）。因此，当我查看用户管理器时，我看不到不属于该组所在域（域 1）的成员。

我向域（域 2）添加了一个单独的成员资格提供程序和关联的连接字符串，该域包含我想要的组中的其他成员，但我最终得到了第二个域中的每个成员，而不仅仅是域中的组中的成员1\. 这第二个成员资格提供商不使用 customFilter，因为原始过滤器中指定的 OU 和组不适用于此域。

有没有办法只从域 1 中的组中获取成员，而不管该成员实际居住在哪个域？

谢谢！
克雷格

# ruby-on-rails - Rails：form_for 和单选按钮

> ID：15640470
> 
> 赞同：4
> 
> 时间：2013-03-26T15:06:09.383
> 
> 标签：ruby-on-rails, form-for

我有以下内容`form_for`

```
<div class="multiple_students">
        <%= f.label :multiple_classes, "Do you teach multiple classes?" %>
        <%= f.radio_button :multiple_classes, 1, checked: @user.multiple_classes?, class: 'multiple_classes', data: { question: 'What is your average class size?' } %> <%= f.label :multiple_classes, "Yes", class: 'multiple_classes' %>
        <%= f.radio_button :multiple_classes, 0, checked: @user.multiple_classes?, class: 'multiple_classes', data: { question: 'How many kids do you teach?' } %> <%= f.label :multiple_classes, "No", class: 'multiple_classes' %>
    </div>
    <div class="number_of_students hide">
        <%= f.label :students %>
        <%= f.text_field :students, :class=>"student_count required digits" %>
    </div> 
```

出于某种原因，即使`multiple_classes`在数据库中选择了用户的属性为真（在数据库`multiple_classes`中是布尔类型），也始终检查“否”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T15:21:45.570

好的，如果您只想使用 radio_buttons，请检查以下内容并让我知道这是否有效。

```
<%= f.radio_button :multiple_classes, "1", checked: @user.multiple_classes?, class: 'multiple_classes', data: { question: 'What is your average class size?' } %> <%= f.label :multiple_classes, "Yes", class: 'multiple_classes' %>
<%= f.radio_button :multiple_classes, "0", checked: @user.multiple_classes?, class: 'multiple_classes', data: { question: 'How many kids do you teach?' } %> <%= f.label :multiple_classes, "No", class: 'multiple_classes' %> 
```

加上引号`1`并`0`尝试....

它不是一个答案......它只是一个想法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T14:44:48.650

始终选中“否”的问题在于拼写错误。

如果您恢复`@user.multiple_classes?`为`"No"`，则复选框将被取消选中 if `@user.multiple_classes?`is `true`，因此下一个代码块应该可以正常工作：

```
<%= f.radio_button :multiple_classes, 1, checked: @user.multiple_classes?, class: 'multiple_classes', data: { question: 'What is your average class size?' } %> <%= f.label :multiple_classes, "Yes", class: 'multiple_classes' %>
<%= f.radio_button :multiple_classes, 0, checked: !@user.multiple_classes?, class: 'multiple_classes', data: { question: 'How many kids do you teach?' } %> <%= f.label :multiple_classes, "No", class: 'multiple_classes' %> 
```

# image - 用于创建 PDF 的 .net 库，可以处理矢量 (eps) 图像

> ID：15640472
> 
> 赞同：1
> 
> 时间：2013-03-26T15:06:12.067
> 
> 标签：image, pdf, vector, eps

是否有任何库可以让您在 PDF 文件中包含基于矢量的 eps 文件（例如 Illustrator eps 图像） - 我的意思不是首先将图像光栅化为 .PNG 文件，实际上我们需要保留与分辨率无关的矢量格式。
我们正在开发一种解决方案，让用户可以在线创建高分辨率的可打印文档。它们的布局可以包括各种格式的文本和图像。他们可以上传自己的艺术作品，然后我们将其转换为低分辨率的屏幕图像。如果他们上传 EPS 文件，我们需要在最终的生产文档中包含与分辨率无关的原始文件，这将是一个 PDF 文档。
大多数 PDF 创建库似乎缺乏对矢量 eps 图像的支持...

# php - 如何使用 PHP 更新我的数据库

> ID：15640473
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:06:11.963
> 
> 标签：php, database, sql-update, edit

我在一个教程中开始了这些代码片段，然后我将它们与我在互联网上找到的其他教程混合在一起，但现在我在制作“**编辑**”和“**删除**”选项时遇到了问题。有人可以帮我吗？这是我的代码片段。

* * *

1.  管理员（文件夹：add.php、index.php、logout.php）
2.  资产（文件夹：style.css）
3.  包括（文件夹：article.php，connection.php）
4.  文章.php
5.  索引.php

* * *

**索引.php**

* * *

```
<?php
include_once('includes/connection.php');
include_once('includes/article.php');

$article = new Article;
$articles = $article->fetch_all();

?>
<html>
  <head>
  <title>CMS</title>
<link href='assets/style.css' rel='stylesheet' type='text/css'> 
  </head>
  <body>

        <div class="container">
            <a href="index.php" id="logo">CMS</a>
            <ol>
                <?php foreach ($articles as $article) { ?>
                    <li>

                    <a href="article.php?id=<?php echo $article['article_id']; ?>">
                         <img src="news_images/<?php echo $article['article_photo']; ?>.jpg" width="300" height="150" alt="Ver mas" class="article_photo" />
                        </a>

                        <br />

                        <a href="article.php?id=<?php echo $article['article_id']; ?>">
                        <h2><?php echo $article['article_title'];?>
                        </a>
                        -<small><small>
                            posted <?php echo date('l jS', $article['article_timestamp']); ?>
                        </small></small>
                         </h2> 

                         <?php //echo $article['article_content'];?>

                        <a href="article.php?id=<?php echo $article['article_id']; ?>">
                        <b>Read More</b> 
                        </a>
                        <hr>

                    </li>
                <?php }?>
            </ol>
            <br />
            <small><a href="admin" >admin</a></small>

        </div>
  </body>
</html> 
```

* * *

## **文章.php**

```
<?php
include_once('includes/connection.php');
include_once('includes/article.php');

$article = new Article;
if (isset($_GET['id'])) {
    $id = $_GET['id'];
    $data = $article->fetch_data($id);

    ?>

    <html>
      <head>
      <title>CMS</title>
    <link href='assets/style.css' rel='stylesheet' type='text/css'> 
      </head>
      <body>

<!-- FB like button  -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!-- FB fINISH -->    

            <div class="container">
                <a href="index.php" id="logo">CMS</a>

                <img src="news_images/<?php echo $data['article_photo']; ?>.jpg" width="600" height="300" alt="Ver mas" class="article_photo" />

                <h2>
                    <?php echo $data['article_title']; ?>
                    <small><small><small> - posted <?php echo date('l jS', $data['article_timestamp']); ?></small></small></small>
                </h2>   
                    <div class="fb-like" data-href="http://www.wr-audio.com/article.php?id=<?php echo $data['article_id']; ?>" data-send="true" data-width="450" data-show-faces="false" data-font="arial"></div>

                    <p>
                    <?php echo $data['article_content']; ?>
                    </p>

                    <div class="fb-comments" data-href="http://www.wr-audio.com/article.php?id=<?php echo $data['article_id']; ?>" data-width="470" data-num-posts="10"></div>
                    <br />

                    <a href="index.php">&larr; Back</a>
            </div>
      </body>
    </html>

    <?php   
} else {
    header('Location: index.php');
    exit();
}

?> 
```

* * *

**包括/connection.php**

* * *

```
<?php

try {
    $pdo = new PDO('mysql:host=example.com;dbname=myDatabase', 'username', 'password');
} catch (PDOException $e) {
    exit('Database error.');
}

?> 
```

* * *

**包括/article.php**

* * *

```
<?php

class Article {
    public function fetch_all() {
    global $pdo;

    $query = $pdo->prepare("SELECT * FROM articles ORDER BY article_timestamp DESC");
    $query->execute();

    return $query->fetchAll();
    }

    public function fetch_data($article_id) {
        global $pdo;

        $query = $pdo->prepare("SELECT * FROM articles WHERE article_id = ?");
        $query->bindValue(1, $article_id);
        $query->execute();

        return $query->fetch();
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:21:09.260

老实说，很难理解你在问什么。我阅读问题的方式是您想要创建`edit`和`delete`按钮，单击时会调用一些脚本来更新数据库？

好吧，有两种选择：

1.  使用 jQuery/PHP 的 AJAX
2.  非 AJAX PHP 脚本

我将举例说明#2 的工作原理，您可以根据下面的代码搜索#1。

你将把按钮放在一个表单中（让我们做吧`delete`）：

**HTML：**

```
<form method="POST" action="">
<input type="hidden" name="article_id" value="<?php echo $article['article_id']; ?>" />
<input type="submit" value="Delete article" name="delete_article" />
</form> 
```

**PHP:** - 使用准备好的语句显示

```
 if(isset($_POST['delete_article'])){
    if(isset($_POST['article_id'])){
    $sql = "DELETE FROM table_name 
    WHERE article_id=?";

    if($stmt = $mysqli->prepare($sql)){
    $stmt->bind_param("i", $_POST['article_id']);
    $stmt->execute();
    $stmt->close();
    }

}
} 
```

# iptables - 通过命令行打开5900端口？

> ID：15640478
> 
> 赞同：0
> 
> 时间：2013-03-26T15:06:23.247
> 
> 标签：iptables, vnc

我正在使用 KDE 运行 Fedora 18。我昨天通过 GUI 打开了端口 5900，并且使用 VNC 很好，但随后尝试通过几种不同的方法打开 SMTP 端口，现在 VNC 连接“意外关闭”。

这是一个模糊的错误，但我认为这是一个防火墙问题。问题是我现在没有任何图形方式来访问防火墙，只能通过 ssh。我尝试添加一个 IPTABLES 行，`iptables -A INPUT -p tcp --dport 5900 -j ACCEPT`但这似乎没有什么不同，当我尝试时`iptables --List`，似乎没有任何关于端口 5900 的内容。我做错了 iptables 行吗？它应该是输出而不是输入吗？`-I`而不是`-A`？udp而不是tcp？

我还想知道为什么“ `iptables --List`”中似乎没有关于端口 5900 的任何内容。Fedora 18 是否有可能不再使用 iptables？

有人有建议吗？自从我没有 GUI 访问权限以来已经好几个小时了，我越来越绝望了...... :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:15:03.170

```
/sbin/service iptables restart 
```

是这个难题的缺失成分。由于某种原因 /sbin/service 防火墙重启不起作用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-12T14:41:12.037

您是否在重新启动之前保存了 iptable

```
/sbin/service iptables save 
```

# java - 为 ReceiveTask 循环中的任务触发 Activiti 工作流

> ID：15640480
> 
> 赞同：0
> 
> 时间：2013-03-26T15:06:26.220
> 
> 标签：java, alfresco, activiti

我有一个 Activiti 工作流，其中包含一个 ReceiveTask，我在其中对任务进行分组。我有一个侦听器，它在 ReceiveTask 的事件开始时触发，我在其中检查新添加的任务的属性，以查看具有相同属性的其他任务是否在 ReceiveTask 中。如果是，那么我想触发它​​们全部进入下一步。

```
<receiveTask id="IssuePost" name="Issue Post">
  <extensionElements>
    <activiti:executionListener event="start" delegateExpression="${IssuePost}"></activiti:executionListener>
  </extensionElements>
</receiveTask> 
```

当任务移动到 ReceiveTask 时，我的 Java Listener 类 IssuePost 会被调用。我可以获取该 ReceiveTask 中的其他任务列表。我在触发任务以移至工作流程的下一步时遇到问题。在任务上调用“信号”时，我陷入了循环。IssuePost 监听器不断在无限循环中被触发，直到 Alfresco/Activiti 放弃并抛出异常。

```
List<NodeRef> siblingNodes = searchService.selectNodes( parent, xpath, null, namespacePrefixResolver, false );
if( siblingNodes.size() == batchCount )
{
    for( int i=0; i < siblingNodes.size(); i++ )
    {
        List<WorkflowInstance> workflows = workflowService.getWorkflowsForContent( siblingNodes.get( i ), true );
        // this line causes the loop.
        workflowService.signal( workflows.get(0).getId(), null ); 
```

如何在不触发我的侦听器的情况下向 ReceiveTask 中的任务发出信号以移动到工作流的下一步？只有一个从 ReceiveTask 流出到工作流的下一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:10:19.707

查看**InvitationServiceImpl**我看到以下有用的片段：

```
 List<WorkflowTask> tasks = workflowService.getTasksForWorkflowPath(startTask.getPath().getId());
    if(tasks.size()==1)
    {
        WorkflowTask task = tasks.get(0);
        if(taskTypeMatches(task, taskTypes))
        {
            if(properties != null)
            {
                workflowService.updateTask(task.getId(), properties, null, null);
            }
            workflowService.endTask(task.getId(), transition);
            return;
        }
    } 
```

因此，您需要让任务本身更新或结束甚至开始。

或者在您的情况下，查找启动之后的下一个转换并发出信号而不是空值。

# codeigniter - 带有 Wiredesignz HMVC 路由的 CodeIgniter

> ID：15640481
> 
> 赞同：3
> 
> 时间：2013-03-26T15:06:27.147
> 
> 标签：codeigniter, routing, hmvc

我正在使用 HMVC 并创建了一个名为 user 的模块。在 modules/user/config 目录中，我有 routes.php，使用与 application/config/routes.php 相同的格式。

在 application/config/routes.php 我有以下路线：

`$route['login'] = 'user/login';`

这很好用，但是当我将它移到 application/modules/user/config/routes.php 时，它不起作用。我收到 404 错误。

根据 HMVC 文档 ( `https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc`)，您必须按如下方式创建路由：

`$route['module_name'] = 'controller_name';`

这意味着我将不得不这样做：

`$route['user'] = 'user';`

这会导致 404，但是，即使我没有得到 404，这也不是我的想法。当/login 转到用户/登录时，我仍然希望保持我的路由正常工作。

任何想法将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:02:24.377

I had the same exact problem as you, unfortunately the way Wiredesignz created the extension it requires that the path start with the module name itself if you put the routes file inside the module itself. That is the only way it will look at the routes file if it is placed inside a module. With that said it already knows the module name at that point, so you need to simply specify the controller and method that you want it to route to. So in your routes.php file inside of your module config directory, if you put this:

```
$route['yourmodule/some-route'] = "yourcontroller/yourmethod"; 
```

or in other words:

```
$route['user'] = 'user/login'; 
```

That would work I believe. However I still wanted more than this. I wanted to be able to use routes that may or may not have the module name. Due to this I had to extend the module to make this happen, and you can find the work I did here if this helps:

[https://github.com/brianwozeniak/codeigniter-modular-extensions-hmvc](https://github.com/brianwozeniak/codeigniter-modular-extensions-hmvc)

This would then allow you to use the route you wanted such as:

```
$route['login'] = 'user/login'; 
```

Even with that routes.php placed inside the module's config directory.

# windows - 有没有办法可以在 Windows 类型中制作 exe、bat 或其他文件以在执行后将光标更改为“忙”？

> ID：15640486
> 
> 赞同：0
> 
> 时间：2013-03-26T15:06:31.003
> 
> 标签：windows, batch-file, cursor

我试图通过执行一个文件来模拟一个繁忙的窗口，或者更简单，一个繁忙的光标，该文件将在一段时间内更改光标。我希望能够控制光标处于“忙碌”状态的时间量。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:28:15.597

创建批处理文件并放置“TIMEOUT 60”语句对您有用吗？60 只是秒数，因此您可以根据需要进行调整。

如果这没有提供您正在寻找的“忙碌”状态，您还可以在批处理文件中创建一个 for 循环，计数到某个固定数字，然后退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:10:51.410

您可以创建一个[AutoHotkey](http://www.autohotkey.com)脚本。

使用此[`SetSystemCursor`](http://www.autohotkey.com/forum/topic35600.html)函数并在自动执行部分的顶部添加以下内容：

```
#NoTrayIcon
#Persistent

DefaultBusyTime := 1000
SetSystemCursor("IDC_WAIT")
If %0% > 1
    SetTimer,RestoreSystemCursor,-%1%
Else
    SetTimer,RestoreSystemCursor,-%DefaultBusyTime%
Return

RestoreSystemCursor:
    SetSystemCursor("Restore")
    ExitApp
Return 
```

完整脚本：[busycursor.ahk](https://gist.github.com/tamamshud/5248137)

编译成独立的可执行文件：

```
Ahk2Exe.exe /in busycursor.ahk /out busycursor.exe 
```

以毫秒为单位传递繁忙等待时间作为参数：

```
busycursor 2500 
```

# javascript - 创建通过失败输入函数

> ID：15640487
> 
> 赞同：0
> 
> 时间：2013-03-26T15:06:33.913
> 
> 标签：javascript, html

我正在创建一个测试表格。我创建了一个包含要测试的步骤列表的表单。

而不是列表中的每个项目都需要：

```
<input type="radio" name="step1">Pass<input type="radio" name="step1">Fail 
```

我想创建一个函数，所以我每次都可以调用它来创建它。到目前为止，这是我的功能：

```
function createPassFail(name)
{
    var Pass = document.createElement('input');
    Pass.type = "radio";
    Pass.name = name;
    document.getElementById("Pass").innerHTML = "Pass";

    var Fail = document.createElement('input');
    Fail.type = "radio";
    Fail.name = name;
    document.getElementById("Fail").innerHTML = "Fail";
} 
```

然后我称之为：

```
<li>Step One: Turn the TV On
<input id = "step1" onload="createPassFail(this.value)">
</li> 
```

所有这一切都是创建一个文本框，这不是我想要的。我也不确定 onload 是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:14:03.057

而不是传递`value`给函数，你应该传递 id：

```
onload="createPassFail(this.id)"
//                          ^^ 
```

我说你的事件应该是`onblur`因为我不认为`onload`你应该使用事件处理程序。您可以使用我的建议，或者在文本框旁边设置一个按钮，当单击（使用`onclick`）时，它会执行您想要的操作。

此外，您还没有在 HTML 中插入通过或失败元素。尝试这个：

```
document.body.appendChild(Pass);
document.body.appendChild(Fail); 
```

这会将新创建的元素直接插入到 body 元素的末尾。如果您希望它们成为其中某个元素的子元素，则必须使用合适的方法访问该元素。例如，使用`getElementById`：

```
document.getElementById( element ).appendChild(Pass); // do the same for Fail 
```

然而，这一切都可以通过 jQuery 轻松完成。

```
$(document).ready(function() {
    function createPassFail(name)
    {
        $('body').append('<input type="radio" id="' + name + '">Pass');
        $('body').append('<input type="radio" id="' + name + '">Fail');
    }

    $('#step1').ready(function() {
        createPassFail(this.id);
    });
}); 
```

[***现场演示***](http://jsfiddle.net/DAsuJ/)

# javascript - 将函数中的淘汰 ViewMode 暴露给另一个函数

> ID：15640489
> 
> 赞同：0
> 
> 时间：2013-03-26T15:06:35.387
> 
> 标签：javascript, jquery, knockout.js

我有下一个情况...

由于某些原因，我需要在函数内部绑定淘汰赛 ViewModel 并按特定条件调用它。

这是我的代码：

```
if (... some conditions ...) {
        var polugodiste = $("#polugodiste").val();

        ApplyBindingsIzostanak(polugodiste); 

        $('#flip-min').change(function () {
            IzostanakViewModel.selectedPolugodiste(parseInt($(this).val()));
            IzostanakViewModel.GetIzostanci();
        });     
    } 
```

和功能：

```
function ApplyBindingsIzostanak(polugodiste)
{
    var Izostanak = function (cas, tekst) {
        this.Cas = cas;
        this.Tekst = tekst;
    };

    var IzostanakViewModel = {
        selectedStatus: ko.observable(),
        selectedPolugodiste: ko.observable(polugodiste),
        ucenikIzostanakList: ko.observableArray([]),
        GetIzostanci: function () {
            .. do some code ...
        }
    };

    ko.applyBindings(IzostanakViewModel);
} 
```

绑定正在工作，但是当我尝试`IzostanakViewModel`在我的内部调用时出现错误`if`，它说*IzostanakViewModel 未定义。*

我可以以及如何从函数中公开**IzostanakViewModel**并在 if 语句中使用它吗？

笔记*

我可以尝试这样的事情：

将此代码添加到`ApplyBindingsIzostanak()`：

```
window.foo = function() {
 IzostanakViewMode.GetIzostanci();
} 
```

然后从**if**语句中调用它，但也许有更好的解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:28:58.577

`IzostanakViewModel`是`ApplyBindingsIzostanak()`函数内的变量。你为什么不直接返回它以便你有参考呢？

```
function ApplyBindingsIzostanak(polugodiste)
    // ...
    return IzostanakViewModel;
} 
```

```
var IzostanakViewModel = ApplyBindingsIzostanak(polugodiste); 

$('#flip-min').change(function () {
    IzostanakViewModel.selectedPolugodiste(parseInt($(this).val()));
    IzostanakViewModel.GetIzostanci();
}); 
```

# gnu - flex 未定义的定义

> ID：15640494
> 
> 赞同：1
> 
> 时间：2013-03-26T15:06:54.637
> 
> 标签：gnu, bison, flex-lexer

我对 flex 很陌生，我不知道为什么我的定义无效。我确定我犯了一些简单的错误。这是我的代码示例，缺少的部分是类似的定义和规则。关于为什么它不会编译的任何见解？

```
%{
include <math.h>
%}

DIGIT [0-9]
NUM {DIGIT}+"."{DIGIT}+

%%
{NUM}+   {printf("%f ", atof(yytext());}
%% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:41:01.730

更正以下内容：

```
#include <math.h>
...
printf("%f ", atof(yytext)); 
```

编译器错误消息有点误导..

# c# - 行为不端的服务行为

> ID：15640500
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:07:15.790
> 
> 标签：c#, winforms, wcf, debugging

基本上我正在制作一个模拟加油站系统的程序。

我的问题是我正在尝试通过 WCF 服务发送请求，例如：

```
User Requests Pump to be activated ----> WCF SERVICE ---->  Point of Sale
User starts pumping petrol<---- WCF SERVICE <----  Point of Sale Accepts 
```

目前它有效，但只是有时。

这就是我试图得到回应的方式：

```
 while(PumpserviceClient.getRequestedAcceptedStatusFromPos().Accepted == false)
 {
    PumpserviceClient.RequestPump(int.Parse(PumpID));
    // needs to wait for pump to be activated
    if (PumpserviceClient.getRequestedAcceptedStatusFromPos().Accepted == true /*&& PumpserviceClient.getRequestedAcceptedStatusFromPos().PumpNo == int.Parse(PumpID)*/)
    {
       MessageBox.Show(" The Pos has accepted your pump request");
       // if its accepted you call
       Customer.ActivatePump();
    } 
```

这些是服务中的方法：

```
bool Accepted= false;
bool Requested=false;
public void AcceptPump(int PumpNumber)
{
   Accepted = true;
   Requested = false;
   int pumpnumber = PumpNumber;
   PumpRequest.Accepted = Accepted;
   PumpRequest.Requested = Requested;
}

public void RequestPump(int PumpNumber)
{
   int pumpnumber = PumpNumber;
   Requested = true;
   Accepted = false;

   PumpRequest.Accepted = Accepted;
   PumpRequest.PumpNo = PumpNumber;
   PumpRequest.Requested = Requested;
}

public void ResetRequest(int PumpNumber)
{
   int pumpnumber = PumpNumber;
   Requested = false;
   Accepted = false;

   PumpRequest.Accepted = Accepted;
   PumpRequest.PumpNo = 0;
   PumpRequest.Requested = Requested;
}

public Message getRequestedStatusFromPump()
{
   return PumpRequest;
}

public Message getRequestedAcceptedStatusFromPos()
{
   return PumpRequest;
} 
```

}

并且销售点系统通过以下方式接受请求：

```
if (Client.getRequestedStatusFromPump().Requested == true)
{
   MessageBox.Show("Pump Number: "+Client.getRequestedStatusFromPump().PumpNo + " Is waiting to be accepted");
   // need to press a button or something
   Client.AcceptPump(Client.getRequestedStatusFromPump().PumpNo);
} 
```

代码在这里[http://www.pastebucket.com/8642](http://www.pastebucket.com/8642)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:15:15.050

我阅读了发布的代码。您使用以下属性：

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)] 
```

这意味着您的代码不会是多线程的。但是不能保证多个会话不会发出请求并“中断”彼此的工作流程。

例如：

1.  客户端 A 调用请求泵

2.  客户端 B 调用重置泵

3.  客户 A 读取... 客户 A 想知道为什么泵被重置。

您编写的代码期望对象是会话。我建议使用这种上下文模式，看看你是否有更好的运气。

另一种选择是将会话信息添加到您的模型中。我无法想象为什么这会有用。这肯定不容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:43:55.693

在不改变服务行为的情况下，我发现解决此问题的唯一方法是创建一个新列表

```
 public void CreatePumpList()
    {
        WaitingPumps = new List<WaitingPumps>();
        for (int i = 0; i < PumpLimit+1 ; i++)
        {
            WaitingPumps.Add(new WaitingPumps());
        }
    } 
```

然后只需使用泵编号作为此列表中的索引，这样它们就不会相互混淆。

# asp.net - 实体模型不能接受没有 id 的视图？

> ID：15640502
> 
> 赞同：0
> 
> 时间：2013-03-26T15:07:26.717
> 
> 标签：asp.net, entity-framework-5, entity-model

```
SELECT DISTINCT TOP (100) 
PERCENT country_Code, country_Name

FROM         dbo.Location 
```

> 消息 1 表/视图“mixtapez.dbo.View_Select_Country”没有定义主键。已推断出密钥，并将定义创建为只读表/视图。E:\1C#asp.net\vuziq\vuziq\Projects\BannerSystem\WebBannerSystem\WebBannerSystem\Models\Model1.edmx 0 0 WebBannerSystem

该视图适用于其他语言，所以我不想`Id`与众不同，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:17:06.687

这只是一个信息性消息，即 Entity Framework 创建了它认为的主键，因为**任何 Entity Framework 实体都必须有一个主键**（即 .NET 键，而不是 SQL 键）。如果您有只读实体，则自动生成的密钥可能对您有用。为了更加安全（并消除密钥无法正常工作的任何可能性），您应该使用`NoTracking`选项来查询此实体。

如果您`.Distinct()`在将进入 SQL 查询的 LINQ 查询中使用 - 实体框架使用的关键不发挥任何作用。

# windows - ECHO 命令 echo 只显示我文件的最后一行，而不是显示每一行

> ID：15640503
> 
> 赞同：0
> 
> 时间：2013-03-26T15:07:29.277
> 
> 标签：windows, batch-file

我想从控制台中显示文件中的每一行。我试试这个：

```
findstr /v /b /c:" " <%1>toto
for /f "tokens=*" %%a in (toto) do set co=%%a 
echo. %co% 
```

还有这个：

```
findstr /v /b /c:" " <%1>toto
for /f "tokens=*" %%a in (toto) do (set co=%%a 
echo. %co%
) 
```

但是第一种方法只显示文件的最后一行，而第二种方法没有显示任何内容。

有人可以向我解释后者有什么问题以及如何输入控制台上打印的每一行的“co”变量？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:27:28.620

尝试这个：

```
for /f "tokens=1*delims=:" %%a in ('findstr /n "^" "toto"') do echo %%b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:11:34.747

你凌驾于公司之上。附加到它尝试 set co=%co% %%a

# ant - Groovy-Ant 在 Zip 存档中保留文件结构

> ID：15640505
> 
> 赞同：1
> 
> 时间：2013-03-26T15:07:44.030
> 
> 标签：ant, groovy, antbuilder

我在 Groovy 中使用 Ant，我想对目录中符合特定条件的所有文件进行操作。我有以下内容：

```
def fileSet = ant.fileset(dir: srcDir, id: "files", includes: pattern){
    date(datetime: time when: "before", pattern: datePattern)
}

ant.zip(destfile: "$destDir/$newZipFileName"){
            fileset(refid: "files")
        } 
```

这对源目录中的文件非常有用。但是我怎样才能让它也存档源位置中的目录，同时保持存档中的目录结构？

“**/*”作为我的模式获取所有文件，但将它们展平到一个目录中

我尝试使用 dirset 而不是文件集，但无济于事。

如何在镜像存档中的现有目录结构时压缩所有内容？（为了澄清，我在我的任务之外定义了文件集，因为我有几个可能使用相同文件集的任务，并且它被传递）。

# sql-server - sql server 运行远程作业

> ID：15640507
> 
> 赞同：0
> 
> 时间：2013-03-26T15:07:48.107
> 
> 标签：sql-server, database-administration

我需要从 sql server 2005 实例（本地服务器）在 150 多个 sql server 实例（sql server 2000，远程）上手动运行作业。所有这些实例的工作都是相同的。该作业只是调用一个不带参数的存储过程，这在所有实例中也是相同的。这些工作按计划进行。但现在他们希望我根据要求手动运行所有实例或指定实例的作业。

对此的最佳做法是什么？我试过用 openrowset 来调用远程存储过程。但是每次运行作业都需要几分钟，所以如果我使用循环来运行所有这些作业，它将一个接一个地运行，而且时间很长。理想情况下，它应该能够在每个实例上运行存储过程，而无需等待它完成。更理想的是，它应该能够在每个实例上运行作业而无需等待它完成，因此它可以在每个实例的作业历史记录中留下记录。

并且存储过程来自第三方，因此无法更改。

更新：

由于“人们”要求从 SSRS 报告中对其进行初始化，因此使用 SSRS 在服务器上调用一些 T-SQL/proc 是最合适的。我现在遇到的问题是，当使用 OPENQUERY 或 OPENROWSET 从本地服务器调用远程 SQL Server 2000 实例上的 msdb.dbo.sp_start_job 时，我得到了无法跟随错误。

处理对象“exec msdb.dbo.sp_start_job @job_name = 'xxx'”。链接服务器“xxx”的 OLE DB 提供程序“SQLNCLI”表示该对象没有列，或者当前用户对该对象没有权限。

我想这可能是因为 sp_start_job 没有返回任何内容，因为我可以使用 OPENQUERY/OPENROWSET 毫无问题地调用其他远程过程。那么有什么解决方法吗？

更新：

我发现它在 t-sql 中实际上非常简单。

执行 [linkedServerName].msdb.dbo.sp_start_job @job_name = 'test2'

所以我不需要使用 OPENROWSET/OPENQUERY，因为所有远程 SQL Server 2000 实例都已添加为远程服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:12:16.507

这实际上是调用该过程的 SQL 代理作业吗？如果是这样，您远程调用[sp_start_job](http://msdn.microsoft.com/en-us/library/ms186757.aspx)将异步启动作业。我假设您以系统管理员的身份进行连接以执行此操作。

如果您有 SQL Server 2008 客户端工具，则可以使用“本地服务器组”。如果您注册了所有 150 个 SQL 实例，则可以通过右键单击整个组并选择“新查询”来一次连接到它们。在状态栏下方，您会看到它连接到 150/150 个服务器。然后，无论您运行什么命令，它都会同时在所有 150 个上运行。

服务器不必是 2008，只有您的客户端工具。我经常在 SQL 2000 服务器上使用此功能。

# ios - Facebook iOS SDK 3.2.1 - [NSError fberrorShouldNotifyUser]：无法识别的选择器发送到实例

> ID：15640510
> 
> 赞同：12
> 
> 时间：2013-03-26T15:07:55.110
> 
> 标签：ios, runtime-error, facebook-ios-sdk, objective-c-category

我刚刚将我的应用程序从 Facebook iOS SDK 3.1 升级到 3.2.1，我正在尝试利用 NSError 上新的 FBError 类别提供的新错误处理。代码在底部。它编译得很好，但是当发生 FB 错误时，我在运行时得到以下信息：

```
- [NSError fberrorShouldNotifyUser]: unrecognized selector sent to instance 
```

这似乎是一个链接器错误，其中类别没有从 FacebookSDK 静态库中链接。我尝试在目标中的其他链接器标志下添加 -ObjC 和 -all_load 标志。我读到这个： http: [//developer.apple.com/library/mac/#qa/qa1490/](http://developer.apple.com/library/mac/#qa/qa1490/)但仍然没有运气。

基本上相同的代码在 Facebook 提供的示例项目中运行良好。感谢您的任何建议。

```
// Open the Facebook session.
- (void)openSession {
    NSArray *permissions = [[NSArray alloc] initWithObjects:@"email", nil];

    // Open or re-open the active session
    [FBSession openActiveSessionWithReadPermissions:permissions
                                   allowLoginUI:YES
                              completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
        [self sessionStateChanged:session state:state error:error];
    }];
}

- (void)handleAuthError:(NSError *)error{
    NSString *alertMessage, *alertTitle;

    if (error.fberrorShouldNotifyUser) {
        // If the SDK has a message for the user, surface it. This conveniently
        // handles cases like password change or iOS6 app slider state.
        alertTitle = @"Something Went Wrong";
        alertMessage = error.fberrorUserMessage;
   } else if (error.fberrorCategory == FBErrorCategoryAuthenticationReopenSession) {
        // It is important to handle session closures as mentioned. You can inspect
        // the error for more context but this sample generically notifies the user.
        alertTitle = @"Session Error";
        alertMessage = @"Your current session is no longer valid. Please log in again.";
   } else if (error.fberrorCategory == FBErrorCategoryUserCancelled) {
        // The user has cancelled a login. You can inspect the error
        // for more context. For this sample, we will simply ignore it.
        NSLog(@"user cancelled login");
    } else {
        // For simplicity, this sample treats other errors blindly, but you should
        // refer to https://developers.facebook.com/docs/technical-guides/iossdk/errors/ for more information.
        alertTitle  = @"Unknown Error";
        alertMessage = @"Error. Please try again later.";
        NSLog(@"Unexpected error:%@", error);
    }

    if (alertMessage) {
        [[[UIAlertView alloc] initWithTitle:alertTitle
                                message:alertMessage
                               delegate:nil
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil] show];
    }

}

// Handle Facebook session state changed
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState)state
                      error:(NSError *)error {
    if (error) {
        [self handleAuthError:error];
    } else {
        switch (state) {
            case FBSessionStateOpen:
                [self onSessionOpen:session];
                break;
            case FBSessionStateOpenTokenExtended:
                [self onSessionOpen:session];
                break;
            case FBSessionStateClosedLoginFailed:
                [self onSessionClose:error];
                break;
            case FBSessionStateClosed:
                // No-op
                // See: https://developers.facebook.com/docs/reference/ios/3.1/class/FBSession
                // Session is closed but token is still cached for later use.
                break;
            default:
                NSLog(@"sessionStateChanged: unknown state: %d", state);
                break;
        }
    }
} 
```

更新：一位朋友建议我检查选择器是否真的存在于链接的二进制文件中。我按照此处的说明在查找器中查找调试二进制文件的位置：[XCode 中我的应用程序二进制文件在哪里？](https://stackoverflow.com/questions/1452649/where-is-my-application-binary-in-xcode) 然后，我右键单击 MyApp.app 并选择“显示包内容”。找到二进制文件（它是列表中最大的文件），将其拖入 Vim 并搜索“fberrorShouldNotifyUser”。我找不到这个选择器或任何 FBError 选择器。我还尝试清除 XCode 的派生数据 - 仍然没有运气。

更新#2：呃，有时你完全错过了明显的答案。事实证明，我没有为我的调试版本正确设置 -ObjC 标志。看截图：

![缺少 ObjC 标志](../Images/25ae31c1a0fa112c2a05454ae83539bf.png)

感谢 d.kendall 让我再次检查。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-04T16:53:38.737

您需要在项目的构建设置中将 -ObjC 添加到“其他链接器标志”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:22:29.137

您是否将 3.2.1 sdk 安装到不同的目录（而不是覆盖 3.1 sdk）？如果是这样，xcode 可能正在链接旧版本。您能否通过以下方式确认 xcode 中的框架路径：

1.  在添加 Facebook 框架的项目导航器中，右键单击 -> 在 Finder 中显示并验证它是否打开了 3.2.1 sdk 位置；和，
2.  在目标的构建设置中，搜索“框架”并验证框架搜索路径仅包含 3.2.1 sdk 路径 - 我发现它可以记住旧的框架位置并使用错误的路径。

# textbox - 使用 Surface-On-Screen-Keyboard 更改普通 TextBox 中的文本

> ID：15640514
> 
> 赞同：0
> 
> 时间：2013-03-26T15:08:02.887
> 
> 标签：textbox, keyboard, pixelsense

是否有可能使用 Surface 键盘来更改普通文本框中的文本？

我正在创建一个文本框并在后面的代码中添加文本。现在我希望用户在触摸文本时可以更改文本。

```
<Grid x:Name="TextContainer" Margin="0,0,0,0" Background="Transparent" Height="66" Width="66">
        <TextBlock x:Name="contentTextBlock" Margin="0" Text="NodeDesign_X" VerticalAlignment="Center" d:LayoutOverrides="Width" HorizontalAlignment="Center" Foreground="White" TextTrimming="CharacterEllipsis" TextWrapping="WrapWithOverflow" />
</Grid> 
```

我没有找到改变`SurfaceTextBox`我`TextBlock`现在锁的方式的可能性。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:04:30.993

使用 a`TextBox`而不是`TextBlock`then 用户可以更改文本。`TextBox`如果您处于 Surface 模式，如果获得焦点，键盘将自动弹出。

# php - 无法通过 php post 发送 base64 > 600kb

> ID：15640518
> 
> 赞同：0
> 
> 时间：2013-03-26T15:08:07.200
> 
> 标签：php, post, base64, content-length

我正在尝试通过 php post 将图像（base64）发送到我的后端。小于 600kb 的图像可以正常工作，但大于 600kb 的图像会导致帖子值为空。

这些是我的 php.ini 统计信息

```
post_max_size = 16M
upload_max_filesize = 16M
memory_limit = 64M 
```

当 content_length 大约为 0.20M 时，2.33M 的 content_length 会导致失败

有人知道我如何上传大于 600kb 的图片吗？

# c# - 解析包含多个 JSON 数据字符串的字符串

> ID：15640524
> 
> 赞同：0
> 
> 时间：2013-03-26T15:08:35.710
> 
> 标签：c#, regex, split

我遇到了一个问题，我找不到一个好看的方法来解析一个包含多个 JSON 字符串的字符串，如`{content1}{content2}{content3}`.

什么是解析这个字符串的好方法，所以结果是：

`{content1}` `{content2}` `{content3}`

也许与正则表达式有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:15:17.743

也许你可以使用[`string.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)：

```
var output = input.Split(new[] {'{', '}'}, StringSplitOptions.RemoveEmptyEntries)
                  .Select(x => "{" + x + "}")
                  .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:18:20.710

如果您确定每个 JSON 部分都是一个对象文字，我想您可以简单地将字符串拆分为`}\s*{`，因为这永远不会发生在有效的 JSON 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:15:18.627

您可以使用正则表达式：

```
string input = "{content1}{content2}{content3}";
var matches = Regex.Match(input, "(?:({[^}]+}) *)*");
string[] contents = matches.Groups[1].Captures.Cast<Capture>().Select(c => c.Value).ToArray(); 
```

# map - 如何添加多个 Groovy 映射条目而不覆盖当前条目？

> ID：15640525
> 
> 赞同：17
> 
> 时间：2013-03-26T15:08:37.827
> 
> 标签：map, groovy

我对 Groovy Maps 的问题。我一直在寻找一种以编程方式将新条目添加到 Groovy 映射而不覆盖当前条目的方法。例如

```
def editsMap = [:]

lineEdits.flag.each 
{ lineEdits_Flag ->
   editsMap.put('FlagId',lineEdits_Flag.id)
   editsMap.put('FlagMnemonic',lineEdits_Flag.mnemonic)
   editsMap.put('Action',lineEdits_Flag.action)   
   println "editsMap: ${editsMap}"
} 
```

第一遍生成这张地图：
editsMap: [FlagId:10001, FlagMnemonic:TRA, Action:review]

但是第二遍覆盖了第一遍：editsMap：[FlagId：10002，FlagMnemonic：REB，Action：deny]

我想要做的是在一张地图中创建多个条目。我需要我的地图来填充这样的东西：

```
editsMap: [FlagId:10001, FlagMnemonic:TRA, Action:review]
editsMap: [FlagId:10002, FlagMnemonic:REB, Action:deny]
editsMap: [FlagId:10003, FlagMnemonic:UNB, Action:deny]
editsMap: [FlagId:20001, FlagMnemonic:REB, Action:deny]
editsMap: [FlagId:20002, FlagMnemonic:ICD, Action:review]
editsMap: [FlagId:30001, FlagMnemonic:REB, Action:deny]
editsMap: [FlagId:40001, FlagMnemonic:ICD, Action:review]
editsMap: [FlagId:40002, FlagMnemonic:MPR, Action:review]
editsMap: [FlagId:50001, FlagMnemonic:CPT, Action:deny]
editsMap: [FlagId:60001, FlagMnemonic:DTU, Action:deny]
editsMap: [FlagId:70001, FlagMnemonic:ICD, Action:review]
editsMap: [FlagId:70002, FlagMnemonic:MPR, Action:review] 
```

一旦我填充了我的地图，我就需要能够找到某些值来处理消息。我相信我可以使用类似的东西：

```
def thisValue = appliedEditsMap[FlagId, '10001'] ?: "default" 
```

进行快速查找。

有人可以帮助我了解如何以编程方式将值添加到 Groovy 地图而不覆盖地图中已有的值吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T15:56:35.753

你想要[Guava 的 MultiMap 之](http://tomjefferys.blogspot.com.br/2011/09/multimaps-google-guava.html)类的东西：

```
Multimap<String, String> myMultimap = ArrayListMultimap.create();

// Adding some key/value
myMultimap.put("Fruits", "Bannana");
myMultimap.put("Fruits", "Apple");
myMultimap.put("Fruits", "Pear");
myMultimap.put("Vegetables", "Carrot");

// Getting values
Collection<string> fruits = myMultimap.get("Fruits");
System.out.println(fruits); // [Bannana, Apple, Pear] 
```

[这家伙](http://www.kellyrob99.com/blog/2010/05/15/achieving-groovy-like-fluency-in-java-with-google-collections/)对 Multimap 做了一个纯 Groovy 仿真：

```
class GroovyMultimap {
    Map map = [:]

    public boolean put(Object key, Object value) {
        List list = map.get(key, [])
        list.add(value)
        map."$key" = list
    }
} 
```

您可以在地图操作中使用`putAt`和`getAt`作为语法糖。您还可以尝试在地图对象中使用[mixin 。](http://mrhaki.blogspot.com.br/2013/02/groovy-goodness-apply-mixin-to-object.html)

他还将 Groovy 与 Guava 的多图一起使用：

```
List properties = ['value1', 'value2', 'value3']
Multimap multimap = list.inject(LinkedListMultimap.create()) {
    Multimap map, object ->
    properties.each {
        map.put(it, object."$it")
    }
    map
}
properties.each {
    assertEquals (multimap.get(it), list."$it")
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-23T18:19:25.100

几年前，我在另一个网站上遇到了类似问题的答案。我找不到它最初的来源，所以如果有人知道出处，请在此处发布。

```
LinkedHashMap.metaClass.multiPut << { key, value ->
    delegate[key] = delegate[key] ?: []; delegate[key] += value
}

def myMap = [:]

myMap.multiPut("a", "1")
myMap.multiPut("a", "2")
myMap.multiPut("a", "3")

myMap.each {key, list ->
    println "${key} -> $value.list(",")
} 
```

给出：

```
a -> 1,2,3 
```

注入的**multiPut()**方法的使用具有魔力。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-26T15:45:06.340

你也可以这样做：

```
// Dummy map for testing
lineEdits = [ flag:[
  [id:10001, mnemonic:'TRA', action:'review'],
  [id:10002, mnemonic:'REB', action:'deny'],
  [id:10003, mnemonic:'UNB', action:'deny'],
  [id:20001, mnemonic:'REB', action:'deny'],
  [id:20002, mnemonic:'ICD', action:'review'],
  [id:30001, mnemonic:'REB', action:'deny'],
  [id:40001, mnemonic:'ICD', action:'review'],
  [id:40002, mnemonic:'MPR', action:'review'],
  [id:50001, mnemonic:'CPT', action:'deny'],
  [id:60001, mnemonic:'DTU', action:'deny'],
  [id:70001, mnemonic:'ICD', action:'review'],
  [id:70002, mnemonic:'MPR', action:'review'] ] ]

def editsMap = lineEdits.flag
                        .groupBy { it.id } // Group by id
                        .collectEntries { k, v ->
                          [ k, v[ 0 ] ] // Just grab the first one (flatten)
                        }

assert editsMap[ 60001 ] == [ id:60001, mnemonic:'DTU', action:'deny' ] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-09T20:52:32.063

如果你想在没有外部类的情况下做多映射，你可以只存储一个列表映射，语法不会很麻烦或任何东西。

```
def editsMap = [:].withDefault{[]}
lineEdits.flag.each 
{ 
   lineEdits_Flag ->
   editsMap.FlagId << lineEdits_Flag.id
   editsMap.FlagMnemonic << lineEdits_Flag.mnemonic
   editsMap.Action << lineEdits_Flag.action
   println "editsMap: ${editsMap}"
} 
```

或者如果你真的更喜欢你的原始语法，它看起来像： `editsMap.get('FlagId').add(lineEdits_Flag.id)` 或者甚至这应该工作： `editsMap.get('FlagId') << lineEdits_Flag.id` 这个解决方案的优点是它往往更明显你在做什么......例如，它不是转换单个项目的魔法地图到一个列表（这不是标准的地图合同），但它始终是一个列表的映射，您只需将其用作列表的映射。

.get 将始终以与描述多图相同的方式工作——它将始终返回地图中该项目的列表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-26T15:20:39.377

映射是一组键值映射，您可以通过键插入不同的值，以便以后可以使用键找到它们。您的示例是一遍又一遍地插入相同键的值。您需要选择唯一的键。

制作一些类来存储地图中一个条目的值：

```
class Stuff {
    String flagMnemonic
    String action
} 
```

制作一张地图，您将使用 flagId 作为键（因为这是您唯一标识标志的方式）和 Stuff 作为值（因为它是您要查找的数据）。

```
def editsMap = [:] 
```

如果您在此处使用类型声明，并且如果 flagId 是字符串，则地图的类型将为`Map<String, Stuff>`.

现在你可以把东西放在地图上：

```
lineEdits.flag.each { lineEdits_Flag -> 
    editsMap[lineEdits_Flag.id] = 
    new Stuff(
        flagMnemonic: lineEdits_Flag.mnemonic, 
        action: lineEdits_Flag.action) 
} 
```

并用

```
def myStuffFor10001 = editsMap['10001']
println myStuffFor10001.flagMnemonic // should equal 'TRA'
println myStuffFor10001.action // should equal 'review' 
```

还有一个简单的替代方法`?: "default"`来设置默认值，您可以`withDefault`在创建地图时使用：

```
def defaultStuff = new Stuff(
    flagMnemonic: "defaultMnemonic", action:"defaultAction")
def editsMap = [:].withDefault { defaultStuff } 
```

因此，每当您从地图中请求不存在的东西时，您都会获得指定的默认对象。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-05T14:06:22.023

为什么不使用列表和闭包，例如：

```
editsList = [
[FlagId:10001, FlagMnemonic:TRA, Action:review],
[FlagId:10002, FlagMnemonic:REB, Action:deny],
[FlagId:10003, FlagMnemonic:UNB, Action:deny],
[FlagId:20001, FlagMnemonic:REB, Action:deny],
[FlagId:20002, FlagMnemonic:ICD, Action:review],
[FlagId:30001, FlagMnemonic:REB, Action:deny],
[FlagId:40001, FlagMnemonic:ICD, Action:review], 
[FlagId:40002, FlagMnemonic:MPR, Action:review],
[FlagId:50001, FlagMnemonic:CPT, Action:deny],
[FlagId:60001, FlagMnemonic:DTU, Action:deny],
[FlagId:70001, FlagMnemonic:ICD, Action:review],
[FlagId:70002, FlagMnemonic:MPR, Action:review]
]
def appliedEditsMap = {property,idValue->
     return editsList.find{it[property] == idValue}
}
def thisValue = appliedEditsMap(FlagId, '10001') ?: "default" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-26T15:15:59.363

您需要将其放入一个类中，然后将该类添加到地图中。从我看到你的信息是相关的，所以有一个类来存储是有意义的，除非我错过任何东西

您可以做的是将您的课程定义为

```
class Flag {

String flagID
String flagMnemonic
String action
}

Now Put your Flag in to your map as

editsMap.put(10000,newFlag(flagID:'10000',flagMnemonic:'TES',action:'tes')) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-22T15:10:50.660

我最近遇到了类似的问题，我知道这是可能的，因为一些同事已经这样做了。在这里阅读答案并进行实验，我终于找到了一个适合我的用例并且不难阅读的简单答案。编写一个“通用代码”答案会使它的可读性比在我们的代码中具有正确的列名等...

`List<Map>`就我而言，我从回购查询中得到了回复；我需要类似的东西，如果结果集的键与前一个键匹配`Map<String, List<Object>>`，我需要添加。`List`当然，我`Object`不是 POJO，但你可以使用任何类。更复杂的是，我需要从一些结果值创建一个复合键（不要问，我没有创建它）*并*从原始 Map 中删除这些键，以便我可以使用剩余的条目来创建一个业务对象。

这是我所做的：

```
List<Map> listMap = repo.findWhateverItWas()

Map<String, List<Object>> resultMap = [:].withDefault {[]}  //required to avoid NPE

listMap.each { Map<String, Object> it ->
    String compKey = it['col1'] + it['col2'] + it['col3']

    Map tempMap =[:]
    it.keySet.each { k ->
        if (!(k in ['col1','col2','col3'])) {
            tempMap << [(k): it[k]]        // this is the business Object result map
        }
    }

    // createEntity is a static Entity Factory
    // the simple += is the magic
    resultMap[(compKey)] += createEntity(Entity.class, tempMap)

}

return resultMap 
```

我意识到这并不能解决您的具体情况，但我相信它可以回答问题并为更复杂的情况提供答案。

我能够通过一个简单的测试用例证明它的预期功能。我们使用斯波克...

```
def "Map of Lists test"() {
    given:
        Map<String, List<String>> map = [:].withDefault { [] }
    when:
        map['key1'] += 'item1'
        map['key1'] += 'item2'
        map['key2'] += 'item3'
        map['key1'] += 'item4'
        map['key2'] += 'item5'
    then:
        map['key1'] == ['item1', 'item2', 'item4']
        map['key2'] == ['item3', 'item5']
} 
```

# java - 为什么当我使用实例方法返回另一个对象时，我的当前对象被修改了？- 爪哇

> ID：15640527
> 
> 赞同：2
> 
> 时间：2013-03-26T15:08:46.173
> 
> 标签：java, object, instance

我有这门课，但我不明白到底发生了什么：

```
public class Table {
    private int[][] array;
    private int N;

    // constructor
    public Table(int[][] array) {
        N = array.length;
        this.array = Arrays.copyOf(array, N);
    }

    // this method returns another Table object
    public Table tweak() {
        int[][] tweak = Arrays.copyOf(array, N);
        // here I change the array
        return new Table(tweak);
    }
} 
```

问题是当我调用调整方法时，用于调用该方法的对象也发生了变化：

```
public class TestCls {
    public static void main(String[] args) {
        int[][] array = {{1, 2}, 
                         {3, 4}};
        Table a = new Table(array);
        System.out.println(a.toString());
        /* this will print
        *  1  2 
        *  3  4
        */

        Table b = a.tweak();
        System.out.println(b.toString());
        /* this will print
        *  2  1 
        *  3  4
        */

        System.out.println(a.toString());
        /* this will also print
        *  2  1 
        *  3  4
        */
    }
} 
```

请帮助我理解为什么会发生这种情况以及我应该如何更改调整方法以使原始对象不被更改。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T15:10:34.490

`Arrays.copyOf`正在创建一个新的`int[][]`，但这需要一个*浅*拷贝 - 它相当于：

```
int[][] tweak = new int[array.length][];
for (int i = 0; i < tweak.length; i++) {
    tweak[i] = array[i];
} 
```

因此，虽然您有一个新的“顶级”数组，但每个“子数组”都是共享的。您真的想制作数组的*深层*副本：

```
int[][] tweak = new int[array.length][];
for (int i = 0; i < tweak.length; i++) {
    tweak[i] = array[i].clone(); // Simpler way of performing a shallow copy
} 
```

这是对每个“子数组”执行浅拷贝，但这很好，因为元素类型只是`int`（没有办法让它“更深”）。

请注意，您只需要在方法*或*构造函数中执行此*操作。*复制两份是没有意义的。`tweak`

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T15:09:52.710

问题是`Table`构造函数制作了数组的[浅拷贝](http://en.wikipedia.org/wiki/Object_copy)。

请参阅[如何在 Java 中进行二维数组的深拷贝？](https://stackoverflow.com/questions/1564832/how-do-i-do-a-deep-copy-of-a-2d-array-in-java)*

# html - 以百分比创建 CSS 三角形

> ID：15640528
> 
> 赞同：6
> 
> 时间：2013-03-26T15:08:47.037
> 
> 标签：html, css, css-shapes

我正在尝试在顶部站点上创建一个正方形并流入三角形的 div，

方形部分不那么硬，工作正常，但三角形部分有点难。盒子需要随着屏幕尺寸改变尺寸，在正方形中我通过在宽度和高度中使用 % 来做到这一点，但我不能在边框属性中使用 % 符号

我此刻拥有的代码

HTML

```
 <div id="overV12" class="menuItem" onclick="scrollToT('#overons')" onmouseover="setHover('overV12')" onmouseout="setOldClass('overV12')"><div class="menuInner">Over V12</div></div> 
```

CSS

```
div.menuItem 
{
height: 5.38%;
width: 7.44%;
position: fixed;
background-color: rgb(239, 239, 239);
cursor: pointer;
z-index: 12;
text-align: center;
top: 4.3%;
}

div.menuItemHover
{
height: 5.38%;
width: 7.44%;
position: fixed;
cursor: pointer;
z-index: 12;
text-align: center;
top: 4.3%;
background-color: rgb(211, 211, 211);
}

div.menuItemActive
{
height: 7.8%;
width: 7.44%;
position: fixed;
cursor: pointer;
z-index: 12;
text-align: center;
top: 4.3%;
background-color: Black;
color: White;    
} 
```

JavaScript 用于设置类：我这样做是因为我使用了一个 parralax 库并希望在某个高度上将按钮设置为“活动”

我希望有人可以帮助我（也许还有其他人）解决这个问题

jsfiddle [示例](http://jsfiddle.net/t9cEy/) 我的想法是当div设置在类menuItemActive上时，它会有箭头，否则没有这只是当它设置在活动时

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T19:08:36.247

这使用两个重叠的 div 来创建三角形，并且[这种方法](http://ansciath.tumblr.com/post/7347495869/css-aspect-ratio)可以在保持纵横比的同时使事物变得流畅。

**[工作示例](http://jsfiddle.net/apaul34208/SpSdR/22/)**

```
.div1 {
    width:100%;
    height:100%;
    border: 1px solid red;
    position:absolute;
    z-index:2;
}
.div2 {
    width:70%;
    min-height:70%;
    transform:rotate(45deg);
    border:1px solid blue;
    position:absolute;
    left:15%;
    top:65%;
    z-index:1;
}
#container {
    display: inline-block;
    position: relative;
    width: 25%;
}
#dummy {
    padding-top: 100%;
}
#element {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
} 
```

我没有背景，所以你可以看到它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T08:12:44.223

我通过使用javascript而不是百分比找到了解决方案， [小提琴](http://jsfiddle.net/bLW5Z/1/) 我希望这也可以帮助其他人

我使用的java脚本是这样的：

```
$(document).ready(setSize());

function setSize() {
   var halfWidth = ($('.div1').width()) / 2;   
   $('.div2').css('border-width', ('50px ' + halfWidth + 'px 0 ' + halfWidth + 'px'));
   $('.div2').css('top', ($('.div1').height()));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T20:33:39.400

你可以在 CSS 中做三角形。

这是一篇文章的链接，概述了一般技术：[http](http://css-tricks.com/snippets/css/css-triangle/) ://css-tricks.com/snippets/css/css-triangle/ 。对于我发现和使用的稍微不同的情况，还有各种类似/其他方法，只需搜索“css triangles”。

简单描述一下该技术：它在一个元素上使用了四个边框（如果你想要一个向下箭头，你可以把这个元素放在你的内部`<div id="overV12">`，或者根据效果，将它应用到你的内部`<div>`）。有些是透明的，有些不是。通过更改边框宽度和颜色，您可以生成 CSS 三角形，可以完全自定义以形成不同的角度、长度等。我还看到这个概念用于创建纯 CSS 的语音气泡以及工具提示句柄。

我已经广泛使用了这种技术，在我的用例中，它适用于所有浏览器（尽管我确实记得在一个项目中遇到了 IE6 的问题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:55:18.610

最好将背景图像用于像这样的自定义形状，这样更容易管理，您可以轻松调整自己以适应不同的分辨率

# actionscript-3 - 动作脚本 3：将 MovieClip（来自库但不在舞台上）添加到在单独的类中声明的 Sprite

> ID：15640529
> 
> 赞同：0
> 
> 时间：2013-03-26T15:08:49.237
> 
> 标签：actionscript-3, sprite, movieclip

我想要做的是添加一个我已经创建但从实际舞台本身删除的电影剪辑，从一个单独的类到我在文档类中声明的精灵。主文档类和其他文档类之间的链接工作正常，以及相关类中对舞台的引用。

只有一行函数给了我错误：找不到类型，或者不是编译时常量：SequenceA

我已经尝试在库属性中更改“Export for Actionscript”的设置，但每次仍然收到相同的消息。

这个很迷失所以任何帮助表示赞赏。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:30:10.067

您在 Export for ActionScript 设置中将什么设置为“类”？看起来您正在尝试引用一个*实例*而不是类本身。例如，是*Class*`mc`的一个*实例*。`MovieClip`

 *假设您选择了“SequenceA”类，您可以这样做：

```
var seqA:SequenceA = new SequenceA(); 
```

[这里](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f9f.html)有更多关于对象和类的细节。*

# spring-mvc - 在 Spring MVC 中编写控制器和视图 - 拥有一个包含域对象字段的表单

> ID：15640532
> 
> 赞同：1
> 
> 时间：2013-03-26T15:09:01.617
> 
> 标签：spring-mvc

我是 Spring MVC 的新手。我找不到这样做的方法：

假设，我有一个域类。

```
class CourseRegistration {
  Student student; // Have id and name
  Course course; // Have id and name
  String semester;
} 
```

我想创建一个弹簧表单来创建课程注册。

课程由控制器填充的组合框选择。

学生姓名将被写入文本字段，但有一项服务可以通过姓名查找用户。

如何编写这样的控制器和视图？

*   您可以假设我为学生、课程和课程注册提供了适当的商业服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:23:30.083

首先，定义表单的模型。必须是 POJO。

注册将保留：用户名和课程（添加您想要的任何内容）。

```
class RegistrationModel{
    @NotNull
    private String username;

    @NotNull
    private Course course;

    // getters and setters
} 
```

控制器

```
@RequestMapping("/registration/**")
@Scope("session")
@Controller
class RegistrationController{
    @Autowired  // or inject manually in app context
    private courseService;

    @Autowired  // or inject manually in app context
    private studentService;

    // No need for getter and setter. However is a best practice to write them
    // Storing the mode in the controller will allow you to reuse the same
    // model between multiple posts (for example, validation that fails)
    private RegistrationModel registrationModel; 

    // getters and setters as usual

    // inject into the view the course list
    // there are other ways to do that, 
    // i'll get my preferred one. 
    // refer to Spring online documentation
    @ModelAttribute("courses")
    public List<Course> injectCourses(){
        return courseService.findAll();
    }

    // create and inject the registration model
    @ModelAttribute("registration")
    public RegistrationModel injectRegistration(){
        if(registrationModel==null)
            registrationModel = new RegistrationModel();

        return registrationModel;
    }

    // handles the post
    @RequestMapping(method=RequestMethod.POST)
    public ModelAndView doRegistration(@Valid @ModelAttribute("registration") registration, BindingResult bindingResult){
        if(bindingResult.hasError())
            return new ModelAndView("registration/index"); // redraw the form

        CourseRegistration cr = new CourseRegistration(); // or get it as a bean from the context
        cr.setStudent(studentService.findByUsername(registrationModel.getUsername()));
        cr.setCourse(registrationModel.getCourse());

        courseService.save(cr);

        return new ModelAndView("registration/confirm"); // imaginary path... 
    }

    // "draws" the form
    @RequestMapping
    public ModelAndView registration(){
        return new ModelAndView("registration/index"); // the path is hypothetic, change it
    }

} 
```

JSPX（表格摘录）

```
<form:form modelAttribute="registration" method="POST">
    <form:input path="username" />
    <form:errors path="username" />
    <form:select path="course">
        <c:foreach items="${courses}" var="course">
            <form:option value="${course}" label="${course.name [the property to be shown in the drop down]}" />
        </c:foreach>
    </form:select>
    <form:errors path="course" />
</form:form> 
```

您需要导入以下命名空间：

`http://www.springframework.org/tags/form`

`http://java.sun.com/jsp/jstl/core`

（检查他们）

我添加了用于模型验证的代码。实施您自己的验证器来检查学生的存在应该是一个好主意。只需 Google 搜索“JSR 303 春季验证”，您就会找到大量资源。

这应该是一个很好的开始。

而且...不要相信代码的正确性。我根据我在没有智能感知的情况下能回忆起的内容即时编写它（上帝保佑智能感知！:-)）。

斯特凡诺

# rotation - 在 Three.js 中使线成为立方体的空间对角线

> ID：15640535
> 
> 赞同：0
> 
> 时间：2013-03-26T15:09:14.377
> 
> 标签：rotation, three.js, cube, diagonal

我想创建一个立方体和一条线，并使这条线成为这个立方体的空间对角线。使用三角函数，我知道一条没有旋转的线和空间对角线形成的角度是 54.73561031724535。但在 3D 引擎系统中，我应该旋转 x、y、z 轴上的线来实现这一点。我该如何计算呢？

这张图片让我的疑问非常清楚： [https ://pbs.twimg.com/media/BGSqw3uCAAAreJf.jpg:large](https://pbs.twimg.com/media/BGSqw3uCAAAreJf.jpg:large)

我正在使用 Three.js 引擎来构建我的多维数据集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:26:49.413

您可以通过获取立方体的边界框并从边界框最小值到边界框最大值绘制一条线来避免所有三角计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:39:49.357

好的。我知道了。

在 x 轴上将线旋转 45 度以到达对角线平面。这样，该线将在空间对角线的同一平面上的 z 轴旋转。之后，我只需要将 z-axys 中的线旋转 54.73561031724535 度。

# r - 在 R 中设置绘图限制，纵横比为 1

> ID：15640547
> 
> 赞同：3
> 
> 时间：2013-03-26T15:10:04.287
> 
> 标签：r, map, aspect-ratio, clip, axes

我正在尝试在极地立体投影中绘制北极地图。为此，我使用 rGDAL 包将已投影的 shapefile 导入 R：

```
ds <- readOGR(dsn = path, layer = "10m_coastline_ps") 
```

这将创建一个`SpatialLinesDataFrame`. 现在，当我`SpatialLinesDataFrame`使用`plot()`函数绘制它时，我无法使用`xlim`和`ylim`参数设置绘图限制：

```
plot(ds, xlim=c(-1700000,1700000), ylim=c(-4000000,800000), axes=T) 
```

该`plot()`函数自动将纵横比设置为 1 并强制轴限制（如本文所述：[igraph axes xlim ylim plot wrongly](https://stackoverflow.com/questions/11272349/igraph-axes-xlim-ylim-plot-incorrectly)）。这将产生以下图：

![在此处输入图像描述](../Images/824f7f5043419077ed64d6b5db897b13.png)

我尝试在绘制 SpatialLinesDataFrame 之前初始化绘图范围，如下所示：

```
mapExtentPr <- rbind(c(-1700000,-4000000), c(1700000,800000))
plot(mapExtentPr, pch=NA)
plot(ds, xlim=c(-1700000,1700000), ylim=c(-4000000,800000), axes=T, asp = 1, add=TRUE) 
```

这设置了正确的限制，但不保持纵横比。我也尝试过使用`clip()`没有效果的功能。

有没有办法在保持纵横比为 1 的同时准确设置绘图限制（不使用`ggplot`or `spplot`）？

注意：我已经检查了这个答案：[是否可以在绘制绘图时更改 ylim 和 xlim？](https://stackoverflow.com/questions/10450233/is-it-possible-to-change-the-ylim-and-xlim-when-the-plot-has-already-been-drawn)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T22:12:33.930

我最终使用了这个：

```
xmin <- -1700000
xmax <- 1700000
ymin <- -4000000
ymax <- 100000

asratio = (ymax-ymin)/(xmax-xmin)

png("greenland_map.png",width=500,height=ceiling(500*asratio))

#plot basemap
plot(ne_10m_coastline_ps,xlim=c(xmin,xmax), ylim=c(ymin,ymax),
     axes=TRUE,asp=1,xaxs="i",yaxs="i")

par(usr=c(xmin,xmax,ymin,ymax))

dev.off() 
```

![具有精确轴限制的地图](../Images/0077c3274ce907f88ecbdca71d822f5c.png)

# delphi - 在 Delphi 中将 HBitmap 转换为字节数组

> ID：15640549
> 
> 赞同：6
> 
> 时间：2013-03-26T15:10:05.533
> 
> 标签：delphi, winapi, bitmap, hbitmap

我正在尝试将 hBitmap 转换为字节数组，但我不想使用单元 Graphics 中的 TBitmap。我的输入图像是 128x64x32bit。

```
var TheBits: array of array of Cardinal;
begin   
  with info.bmiHeader do begin
    biWidth:=131;
    biHeight:=64;
    biSize:=SizeOf(TBITMAPINFOHEADER);
    biCompression:=BI_RGB;
    biBitCount:=32;
    biPlanes:=1;
    biSizeImage:=0;
  end; 

  DC := CreateCompatibleDC(0);    
  SetLength(TheBits, 128, 64);    
  GetDIBits(DC, BmpHandle, 0, 64,@TheBits[0][0],Info,DIB_RGB_COLORS); 
```

这给了我一个很好的图像（当然是颠倒的），但我不得不将 131 放入 biWidth 中，这对我来说真的没有意义。为什么不能是128？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T15:22:17.540

你非常幸运。您的数组实际上是 128 个*完全独立*的数组。当您设置维度时，Delphi 碰巧分配的每个数组都非常接近前一个数组，它们之间用 12 个字节分隔，用于处理每个动态数组中的各种簿记数据。通过告诉 API 您的位图为 131 像素宽而撒谎，使其在为较窄的位图复制数据时跳过这些字节。

API 需要一个连续的字节块，这不是多维动态数组。多维动态数组实际上只是普通的动态数组，其元素类型恰好是另一个动态数组。

要修复您的代码，您需要一个单维数组；将其长度设置为位图高度和宽度的乘积。

# json - REST：资源表示的不同细化级别的设计模式

> ID：15640550
> 
> 赞同：2
> 
> 时间：2013-03-26T15:10:09.243
> 
> 标签：json, rest, design-patterns

我正在为许多资源设计 REST API，我需要维护至少 2 个相同格式的表示（例如 JSON），它们仅在它们公开的数据量上有所不同。

例如，我有通过 REST 公开的书籍、出版商和作者。所以我有 3 个资源集合`books`：`publishers`和`authors`. 当请求一本书时，我希望它包含关于其作者和出版商的最少信息——只是名称、ID 和指向其完整表示的超链接。

```
GET /books/12345
200 OK
{
    id: "12345",
    title: "My Book",
    authors: [
        {id:"111", name:"J. Smith", _href:"/authors/111"},
        {id:"222", name:"J.R.R. Tolkien", _href:"/authors/222"}
    ],
    publisher: {id:"333", name:"HarperCollins", _href:"/publishers/333"},
} 
```

当用户请求时，例如`/publishers/333`，它应该获得更多关于它的信息，而不仅仅是名称和 ID：

```
{
    id: "333",
    name: "HarperCollins",
    address : { ... },
    contact : { ... },
    logo : { ... }
} 
```

在我的应用程序中，我有 3 个类和`Book`，其中包含发布者和作者集合。我正在使用 Jackson 和 Spring MVC 通过 REST API 将所有实体公开为 JSON。`Publisher``Author``Book`

```
@RequestMapping("/books/{id}")
@ResponseBody
public Book getBook(String id) {
    return getBookById(id);
}

@RequestMapping("/authors/{id}")
@ResponseBody
public Book getAuthor(String id) {
    return getAuthorById(id);
} 
```

现在的问题：

*   在这种情况下，我如何告诉视图应该呈现哪个对象的哪些字段？
*   我是否应该将我的每个实体拆分为两个 - 一个是简短的，另一个是完整的表示（例如`AuthorReference`and `Author`, `PublisherReference`and `Publisher`）。
*   如果我选择选项#2，我应该更喜欢组合还是概括？
*   是否有任何最佳实践如何处理 REST 应用程序中相同实体表示的不同分解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:39:43.637

您是否考虑过使用更标准的超媒体格式，例如[HAL](https://datatracker.ietf.org/doc/html/draft-kelly-json-hal-05)？

这样做，很明显你会在资源和其他资源的链接之间存在差异。例如，它最终可能是：

```
GET /books/123
200 OK
{
  "id": "123"
  "title": "My Book"
  "_links": {
     "author": [
       { "href": "/authors/111", "title": "J. Smith" },
       { "href": "/authors/321", "title": "Jules Verne" }
     ],
     "publisher": { "href": "/publishers/123", "title": "Harper Collins" }
  }
} 
```

在实施方面，我会说你可以：

1.  为每个资源表示创建自定义 DTO 类，如下所示：

    ```
     public class BookDto {
         @JsonProperty(value="_links")
         public LinkCollection getLinks() { }

         public String getTitle() { }
     } 
    ```

2.  使用相同的类，但在 Jackson 序列化之前使用过滤器修改对象，并使用 @JsonProperty/@JsonIgnore 的某种组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:29:53.577

1/ 根据 Spring MVC 文档，要通过 HTTP 序列化您的对象，您必须定义自己的类，使用`HttpMessageConverter<T>`或`T`实现。 [http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/remoting.html#rest-message-conversion](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/remoting.html#rest-message-conversion)`Book``Publisher``Author`

2/ 没有必要将你的对象一分为二。选择从 an 中选取的字段的逻辑`Author`包含在`AuthorToHttp implement HttpMessageConverter<Author>`. `AuthorReferenceToHttp implement HttpMessageConverter<Author>`当您希望通过 HTTP 发送更少的数据时，只需要开发一个使用。

另一种解决方案可能是或者`AuthorReference extend Author`一方面`Author extend AuthorReference`，`AuthorToHttp implement HttpMessageConverter<Author>`另一方面`AuthorReferenceToHttp implement HttpMessageConverter<AuthorReference>`是序列化您的`Author`.

3/继承/泛化就足够了。不一定需要模式。

复合是错误的选择，您不需要树结构。根据情况，您想要关于作者的所有数据 - 默认行为 - 或关于作者的主要数据 - “代理”行为 -。代理将是一个更好的选择。

4/ 不知道。

# git - 无法使用 git fetch 上游连接

> ID：15640552
> 
> 赞同：0
> 
> 时间：2013-03-26T15:10:12.723
> 
> 标签：git, github, push, git-push

我正在尝试使用原始官方更新本地计算机上的存储库`git fetch upstream`，但这样做会显示以下错误：

```
fatal: unable to connect to git.moodle.org:
git.moodle.org[0: 174.123.154.58]: errno=Connection refused 
```

以下已添加。输出`git remote -v`：

```
origin  https://github.com/myname/moodle.git (fetch)
origin  https://github.com/myname/moodle.git (push)
upstream    git://git.moodle.org/moodle.git (fetch)
upstream    git://git.moodle.org/moodle.git (push) 
```

由于官方 repo 包含近 20 个分支，我如何使用官方更新本地机器上的所有分支。

**我的互联网连接是通过代理。是这个原因吗？如果是，我如何通过代理服务器更新它？**

# regex - 与可变数量的匹配捕获组匹配的正则表达式模式

> ID：15640555
> 
> 赞同：2
> 
> 时间：2013-03-26T15:10:15.680
> 
> 标签：regex, scala, pattern-matching

应该使用 Scala 模式匹配和正则表达式逐行解析文本文件。如果一行以`"names:\t"`随后的制表符分隔名称开头，则应提供为`Seq[String]`（或类似名称）。

这是一个非工作代码示例：

```
val Names = "^names:(?:\t([a-zA-Z0-9_]+))+$".r

"names:\taaa\tbbb\tccc" match {
  case Names(names @ _*) => println(names)
  // […] other cases
  case _ => println("no match")
} 
```

输出：`List(ccc)`
想要的输出：`List(aaa, bbb, ccc)`

下面的代码可以按需要工作……</p>

```
object NamesObject {
  private val NamesLine = "^names:\t([a-zA-Z0-9_]+(?:\t[a-zA-Z0-9_]+)*)$".r

  def unapplySeq(s: String): Option[Seq[String]] = s match {
    case NamesLine(nameString) => Some(nameString.split("\t"))
    case _ => None
  }
}

"names:\taaa\tbbb\tccc" match {
  case NamesObject(names @ _*) => println(names)
  // […] other cases
  case _ => println("no match")
} 
```

输出（根据需要）：`WrappedArray(aaa, bbb, ccc)`

我想知道：**这是否可以在不创建 的情况下以更简单的方式实现`object`，就像在第一个但不工作的代码示例中一样？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:28:54.687

使用您的工作正则表达式。（`\w`是一个预定义的字符类`[a-zA-Z0-9_]`）

```
 val Names = """names:\t(\w+(?:\t\w+)*)""".r
  "names:\taaa\tbbb\tccc" match {
    case Names(names) => println(names.split("\t") toSeq)
    case _ => println("no match")
  } 
```

使用第一、第二和尾部绑定，

```
 val Names = """names:\t(\w+)?\t?(\w+)?\t?((?:\w+?\t?)*)""".r
  "names:\taaa\tbbb\tccc\tddd" match {
    case Names(first, second, tail) =>
      println(first + ", " + second + ", " + (tail.split("\t") toSeq));
    case _ => println("no match")
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:03:29.257

正如 Randall Schulz 所说，仅使用正则表达式似乎是不可能的。因此，我的问题的简短回答是*否定*的。

我目前的解决方案如下：我使用这个类...</p>

```
class SeparatedLinePattern(Pattern: Regex, separator: String = "\t") {
  def unapplySeq(s: String): Option[Seq[String]] = s match {
    case Pattern(nameString) => Some(nameString.split(separator).toSeq)
    case _ => None
  }
} 
```

…创建模式：

```
val Names = new SeparatedLinePattern("""names:\t([A-Za-z]+(?:\t[A-Za-z]+)*)""".r)
val Ints = new SeparatedLinePattern("""ints:\t(\d+(?:\t\d+)*)""".r)
val ValuesWithID = new SeparatedLinePattern("""id-value:\t(\d+\t\w+(?:\t\d+\t\w+)*)""".r) 
```

这是一个如何以非常灵活的方式使用它们的示例：

```
val testStrings = List("names:\taaa", "names:\tbbb\tccc", "names:\tddd\teee\tfff\tggg\thhh",
                       "ints:\t123", "ints:\t456\t789", "ints:\t100\t200\t300",
                       "id-value:\t42\tbaz", "id-value:\t2\tfoo\t5\tbar\t23\tbla")

for (s <- testStrings) s match {
  case Names(name) => println(s"The name is '$name'")
  case Names(a, b) => println(s"The two names are '$a' and '$b'")
  case Names(names @ _*) => println("Many names: " + names.mkString(", "))

  case Ints(a) => println(s"Just $a")
  case Ints(a, b) => println(s"$a + $b == ${a.toInt + b.toInt}")
  case Ints(nums @ _*) => println("Sum is " + (nums map (_.toInt)).sum)

  case ValuesWithID(id, value) => println(s"ID of '$value' is $id")
  case ValuesWithID(values @ _*) => println("As map: " + (values.grouped(2) map (x => x(0).toInt -> x(1))).toMap)

  case _ => println("No match")
} 
```

输出：

```
The name is 'aaa'
The two names are 'bbb' and 'ccc'
Many names: ddd, eee, fff, ggg, hhh
Just 123
456 + 789 == 1245
Sum is 600
ID of 'baz' is 42
As map: Map(2 -> foo, 5 -> bar, 23 -> bla) 
```

# directx - SlimDX 相机设置

> ID：15640556
> 
> 赞同：0
> 
> 时间：2013-03-26T15:10:24.017
> 
> 标签：directx, slimdx, perspectivecamera

请告诉我我做错了什么：那是我的相机课

```
public class Camera
{
    public Matrix view;
    public Matrix world;
    public Matrix projection;

    public Vector3 position;
    public Vector3 target;

    public float fov;

    public Camera(Vector3 pos, Vector3 tar)
    {
        this.position = pos;
        this.target = tar;
        view = Matrix.LookAtLH(position, target, Vector3.UnitY);
        projection = Matrix.PerspectiveFovLH(fov, 1.6f, 0.001f, 100.0f);
        world = Matrix.Identity;
    }
} 
```

那是我的常量缓冲区结构：

```
struct ConstantBuffer 
{
    internal Matrix mWorld;
    internal Matrix mView;
    internal Matrix mProjection;
}; 
```

在这里我正在绘制三角形并设置相机：

```
x+= 0.01f;
camera.position = new Vector3(x, 0.0f, 0.0f);
camera.view = Matrix.LookAtLH(camera.position, camera.target, Vector3.UnitY);
camera.projection = Matrix.PerspectiveFovLH(camera.fov, 1.6f, 0.0f, 100.0f);

var buffer = new Buffer(device, new BufferDescription
{
  Usage = ResourceUsage.Default,
  SizeInBytes = sizeof(ConstantBuffer),
  BindFlags = BindFlags.ConstantBuffer
});

////////////////////////////// camera setup 

 ConstantBuffer cb;
 cb.mProjection =  Matrix.Transpose(camera.projection);
 cb.mView = Matrix.Transpose(camera.view);
 cb.mWorld =  Matrix.Transpose(camera.world);

 var data = new DataStream(sizeof(ConstantBuffer), true, true);
 data.Write(cb);
 data.Position = 0;

 context.UpdateSubresource(new DataBox(0, 0, data), buffer, 0);

 //////////////////////////////////////////////////////////////////////

 // set the shaders
 context.VertexShader.Set(vertexShader);
 context.PixelShader.Set(pixelShader);
 // draw the triangle
 context.Draw(4, 0);
 swapChain.Present(0, PresentFlags.None); 
```

请，如果你能看到什么是错的，告诉我！:) 我已经花了两天时间写这个了..

* * *

尝试第二个：

@paiden 我现在初始化了 fov（非常感谢 :)）但仍然没有效果（现在是 fov = 1.5707963267f;）和@Nico Schertler，也谢谢你，我把它投入使用了

```
context.VertexShader.SetConstantBuffer(buffer, 0); 
context.PixelShader.SetConstantBuffer(buffer, 0); 
```

但仍然没有效果......可能我的 .fx 文件是错误的？我需要这个有什么目的：

```
cbuffer ConstantBuffer : register( b0 ) { matrix World; matrix View; matrix Projection; } 
```

* * *

尝试第三次：@MHGameWork 也非常感谢，但仍然没有效果；）如果有人有 5 分钟的时间，我可以将源代码放到他/她的电子邮件中，然后我们将发布答案......我猜这对像我这样的新手会有很大帮助:)

```
unsafe
{
                x+= 0.01f;
                camera.position = new Vector3(x, 0.0f, 0.0f);
                camera.view = Matrix.LookAtLH(camera.position, camera.target, Vector3.UnitY);
                camera.projection = Matrix.PerspectiveFovLH(camera.fov, 1.6f, 0.01f, 100.0f);

                var buffer = new Buffer(device, new BufferDescription
                {
                    Usage = ResourceUsage.Default,
                    SizeInBytes = sizeof(ConstantBuffer),
                    BindFlags = BindFlags.ConstantBuffer
                }); 
```

**现在的问题 - 我看到了我的三角形，但相机没有移动**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:28:07.590

您已将相机的**近平面**设置为 0。这会使矩阵中的所有值除以零，因此您将得到一个填充有“NAN”的矩阵

在您的情况下使用大约 0.01 的近平面值，它将解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:16:50.410

我希望你仍然需要帮助。这是我的相机类，可以使用，并且可以使用鼠标/键盘轻松地在场景中移动。

[http://pastebin.com/JtiUSiHZ](http://pastebin.com/JtiUSiHZ)

在每一帧（或移动相机时）调用“TakeALook()”方法。

您可以使用“CameraMove”方法在它周围移动。它需要一个 Vector3 - 你想移动你的相机（不要给它很大的值，我为每一帧使用 0,001f）

使用“CameraRotate()”你可以把它转过来——它需要一个 Vector2 作为左右和上下旋转。

它很容易。我使用 EventHandlers 来调用两个函数，但可以随意编辑。

# hash - 将 WP 密码转换为 SMF 密码

> ID：15640563
> 
> 赞同：0
> 
> 时间：2013-03-26T15:10:41.700
> 
> 标签：hash, passwords, smf

我需要将用户从 Wordpress 导入 SMF。我可以访问数据库，我们都是来自 smf 和 WP 的密码哈希，但我无法弄清楚如何将它们转换为使用这 2 个引擎的克隆帐户。任何线索如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:26:23.807

你将无法做到。密码在 wordpress 和 SMF 中经过哈希处理，无法检索。

最好的办法是存储他们现在拥有的密码，然后向所有人发送一封电子邮件，说要登录，他们必须更改密码。在完成之前，他们将无法进入。

# c# - 在 Fluent NHibernate 中使用反射的动态 HasMany 映射

> ID：15640568
> 
> 赞同：2
> 
> 时间：2013-03-26T15:10:58.400
> 
> 标签：c#, nhibernate, reflection, fluent

我正在使用 NHibernate 3.3 并尝试通过反射将我的类层次结构映射到 DB，如下所示：

```
class Parent
{
    public virtual IList<Child> Children { get; set; }
}

class Child
{
    public virtual Parent MyParent { get; set; }
}

public class ParentMap : ClassMap<Parent>
{
    public ParentMap()
    {
        Helper.Map(this);
    }
}

public class Helper
{
    public static void Map<T>(ClassMap<T> map)
    {
        foreach (var property in typeof(T).GetProperties())
        {
            // creating lambda x => x.Children

            var arg = Expression.Parameter(typeof(T), "x");
            Expression expr = Expression.Property(arg, property);

            // Func<Parent, IList<Child>> does not work in HasMany()
            // var type = typeof(Func<,>).MakeGenericType(typeof(T), property.PropertyType);

            // but IEnumerable works
            var type = property.PropertyType.GetGenericArguments()[0];  // Child
            type = typeof(IEnumerable<>).MakeGenericType(type);         // IEnumerable<Child>
            type = typeof(Func<,>).MakeGenericType(typeof(T), type);    // Func<Parent, IEnumerable<Child>>

            dynamic lambda = Expression.Lambda(type, expr, arg);
            map.HasMany(lambda);
        }
    }
} 
```

上面只是一个简化的例子，主要思想是为每个集合属性动态调用 HasMany()。我似乎找不到更直接的方法来做到这一点，但它确实有效。

问题是当我将 Cascade.All() 应用于地图时，会导致 StackOverflow 异常。当手动完成映射时，这工作得很好，所以它不太可能是一个映射错误的问题。

# c# - 如何使用变量或函数在 HTML 中声明我的 SqlDataSource ID

> ID：15640569
> 
> 赞同：0
> 
> 时间：2013-03-26T15:11:05.637
> 
> 标签：c#, asp.net, html, sqldatasource, chartfx

我正在编写一个 for 循环，该循环显示带有一些 chartfx 显示的链接列表。chartfx 需要一个 sqlDataSource。每次 for 循环进行一次迭代时，我都尝试提供唯一 ID，但我无法将值或函数传递给它。我的代码中的示例如下。getSQLID() 只是一个函数，它返回一个我想成为我的 ID 的字符串。这一切都在 aspx 页面上完成，函数在 .cs 中。任何帮助将不胜感激，谢谢。

```
 //name of the contentplace holder on the aspx page
    <asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server" >

    //code behind
    Control ctrl = LoadControl("WebUserControl.ascx");
    Control placeHolderControl = this.FindControl("Content2");
    Control placeHolderControl2 = this.FindControl("ContentPlaceHolder1");

    ctrl.ID = "something";
    if (placeHolderControl != null)
        placeHolderControl.Controls.Add(ctrl);
    if (placeHolderControl2 != null)
        placeHolderControl2.Controls.Add(ctrl); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:53:09.640

首先，回想一下，像这样在设计器中声明的服务器控件在编译时附加到您的类。因此，在运行时尝试在循环中创建多个实例是没有意义的，这就是为什么在编译时必须知道例如 Id 标记中的值的原因。

一种替代方法是在后面的代码中创建它们，例如：

```
for (int i=0; i<2; ++i)
{
    var chart = new Chart();
    chart.Id = "chartId" + i;
    chart.DataSourceId = "srcid" + i;

    var src = new SqlDataSource();
    src.Id = "srcid" + i;

    Controls.Add(chart); // either add to the collection or add as a child of a placeholder
    Controls.Add(src);
} 
```

在您的情况下，将所有这些声明性属性转换为后面的代码可能需要一些工作（尽管这是可能的）。另一种方法是制作一个用户控件 (ascx)，其中包含现在在您的 aspx 页面中的标记。您可以使用以下代码实例化代码中的控件：

```
for (int i=0; i<2; ++i)
{
    var ctrl = LoadControl("~/path/to/Control.ascx");
    ctrl.Id = "something_" + i;
    Controls.Add(ctrl); // again, either here or as a child of another control
    // make the src, hook them up
} 
```

# timestamp - rsync 和备份和更改时区

> ID：15640570
> 
> 赞同：3
> 
> 时间：2013-03-26T15:11:11.280
> 
> 标签：timestamp, backup, rsync, stat

我使用 rsync 从我的相机备份我的照片，使用：

```
 rsync -vzrtl --progress --stats --timeout=0 host destination 
```

现在，当我进行第一次备份时，我在不同的时区，然后我搬到了不同的时区，并在笔记本电脑上更改了它（我使用的是 ubuntu 10.04.4）。今天我正在备份我的图片，我发现时间戳不同（我的意思是你可以用 'ls -lt' 看到的时间戳），所以 rsync 会复制整个目录（我总是先运行 rsync 选项 -n 到知道它将传输的文件列表）。现在这只是愚蠢的，因为文件实际上是相同的。所以我改回了以前的时区，实际上我的相机上的文件时间戳改变了 - 我觉得这很奇怪。

移动到上一个时区后，发现创建时间是一样的，但是文件的访问和更改时间还是不一样的，使用stat. 例如：

在主机上

```
 File: `DSC00003.JPG'
    Size: 3068392    Blocks: 6016       IO Block: 32768  regular file     
  Device: 821h/2081d Inode: 2109        Links: 1
  Access: (0755/-rwxr-xr-x)  Uid: ( 1000/simona)   Gid: ( 1000/simona)
  Access: 2013-03-26 00:00:00.000000000 +0000 
  Modify: 2007-12-25 22:48:20.000000000 +0000
  Change: 2007-12-25 22:48:20.000000000 +0000 
```

并在目的地

```
 File: `DSC00003.JPG'
    Size: 3068392    Blocks: 6008       IO Block: 4096   regular file
  Device: 802h/2050d Inode: 245762      Links: 1
  Access: (0755/-rwxr-xr-x)  Uid: ( 1000/simona)   Gid: ( 1000/simona)
  Access: 2013-03-26 10:24:49.000000000 +0000
  Modify: 2007-12-25 22:48:20.000000000 +0000
  Change: 2013-02-09 00:11:09.000000000 +0000 
```

我不想再次复制文件，这会很愚蠢，你能提出一个干净的解决方案吗？以后如何防止这种情况发生？有没有办法防止 rsync 覆盖目的地最近修改过的图片？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-13T06:16:27.933

潜在的问题是相机使用的是 Window 的 FAT 文件系统，当涉及到时区时，它会被破坏，因为它只存储本地时间。随着不同的系统试图以不同的方式补偿这种破损以避免其他类型的破损，无穷无尽的问题随之而来。

对于一个讨论、cygwin 的解决方案以及有关潜在问题的大量参考，请参阅 [Wayne Piekarski - Rsync 和 Cygwin 夏令时时区问题的解决方案](http://cygwin.com/ml/cygwin/2003-04/msg00037.html)

那里的参考资料之一有一些关于该问题的细节： [Beating the Daylight Savings Time bug and getting correct file modify times - CodeProject](http://www.codeproject.com/Articles/1144/Beating-the-Daylight-Savings-Time-bug-and-getting)

这些主要处理 Windows，所以我仍在研究如何在 Linux 上干净地处理这个问题。参见[错误 #25048 “Vfat 文件系统不尊重时区”：错误：“linux-source-2.6.15”包：Ubuntu](https://bugs.launchpad.net/ubuntu/+source/linux-source-2.6.15/+bug/25048)

这里讨论了一些 Linux 解决方案： [rsync 和备份和更改时区 - Unix & Linux Stack Exchange](https://unix.stackexchange.com/questions/69189/rsync-and-backup-and-changing-timezone)，即 --size-only 或 --modify-window=3660，但它们是有风险的，因为它们在某些情况下无法进行所需的备份.

就我而言，FAT 文件系统位于 Android 手机的 SD 卡上，这可能会对可能的解决方案引入更多限制。

我认为这将是一个非常普遍的问题，所以我很惊讶这没有得到更好的记录。

# sql - 使用 SP_ExecuteSQL 时返回 NULL 数据值

> ID：15640571
> 
> 赞同：2
> 
> 时间：2013-03-26T15:11:15.130
> 
> 标签：sql, sql-server, null, dynamic-sql, sp-executesql

我正在使用 sp_executesql，因此我可以灵活选择返回的内容。尝试返回没有数据的地方时遇到问题。

比如说我试图找到所有没有分配所有者的行。目前，我的查询编写如下。

```
 if @owner <> ''
    Begin
        SELECT @sql = @sql + 'and owner LIKE ''%'+@owner+'%'''
    END 
```

这使我不必选择所有者。如果我这样做，它当然会包含在我的查询中。

因为我现在正在尝试添加一条基本上允许我带回未分配所有者的行：

```
 if @owner = 'Unassigned'
BEGIN
    SELECT @sql = @sql + 'and owner IS NULL' 
END 
```

但是，当我这样做时，它会带回整个列表。想法/建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:31:06.600

如果您将最后一行更改为`PRINT @sql`您会注意到这两个条件都存在。尝试将您的代码更改为此。

```
if @owner <> ''
Begin
    if @owner = 'Unassigned'
        SELECT @sql = @sql + 'and owner IS NULL'
    else
        SELECT @sql = @sql + 'and owner LIKE ''%'+@owner+'%'''
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:16:28.683

您也可以将选项与[CASE](http://msdn.microsoft.com/en-us/library/ms181765.aspx)表达式一起使用

```
SELECT @sql = @sql + CASE ISNULL(@owner, '') 
                       WHEN '' THEN ''
                       WHEN 'Unassigned' THEN ' and owner IS NULL'
                       ELSE ' and owner LIKE ''%' + @owner + '%''' END 
```

# php - 页面加载时 jQuery&php 触发函数

> ID：15640578
> 
> 赞同：0
> 
> 时间：2013-03-26T15:11:31.813
> 
> 标签：php, jquery, load

我有一个带有 jQ​​uery 的 php 页面，带有范围滑块。当滑块改变时，jQuery 代码对这些值求和。

我还希望在加载页面时触发此代码。但是当我在 $(window).load(function() {}); 中触发函数时，它不会发生。或直接在 $(document).ready(function() {}); 中。

这是jQuery代码：

```
 $(document).ready(function() {
            $(window).load(function() {
                countSilders();
            });
            function countSliders(){
                var SliderValue = parseInt($("#slider0").val())+parseInt($("#slider1").val())+parseInt($("#slider2").val());
                if (SliderValue==10)
                    $("#submit_next").button("enable");
                else
                    $("#submit_next").button("disable");
                $("#lblsum_scores").text(SliderValue+"/10");
            }
            $(document).on("change","#sliders", function(){
                countSliders();
            });
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:14:13.103

尝试这个：

```
// First define your function
function countSliders() {
    var SliderValue = parseInt($("#slider0").val()) + parseInt($("#slider1").val()) + parseInt($("#slider2").val());
    if (SliderValue == 10) $("#submit_next").button("enable");
    else $("#submit_next").button("disable");
    $("#lblsum_scores").text(SliderValue + "/10");
}

// Run on ready, don't use ready and then on load, that will never happen
// And i changed the on() to change() 
$(document).ready(function(){
    countSilders();
    $("#sliders").change(function(){
        countSliders();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:14:30.893

你应该能够做到：

```
function countSliders(){
   ...
}
$(document).ready(function() {
    countSilders(); // fire it on load

    // bind it to sliders
    $(document).on("change","#sliders", function(){
        countSliders();
    });
}); 
```

# java - 为什么大多数来自 servlet 过滤器的 UDP 数据包没有显示在 Graphite 中？

> ID：15640583
> 
> 赞同：1
> 
> 时间：2013-03-26T15:11:47.347
> 
> 标签：java, networking, udp, packet, datagram

我在 servlet 过滤器中有以下内容：

```
@Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {        
    long startTimeNano = System.nanoTime();

    chain.doFilter(request, response);

    long endTimeNano = System.nanoTime();
    long differenceNano = endTimeNano - startTimeNano;
    long differenceMilliseconds = differenceNano / 1000000;

    try {
        reportResponseTimeToGraphite(differenceMilliseconds);
    } catch(Exception e) {
        Logger.log(getClass(), "Response time measure failed.");
    }
} 
```

`reportResponseTimeToGraphite`只需将 UDP 数据包发送到 Graphite 服务器：

```
private void reportResponseTimeToGraphite(long differenceMilliseconds) throws IOException {
    int currentUnixTimeSeconds = (int) (System.currentTimeMillis() / 1000L);

    String message = GRAPHITE_LABEL + " " + String.valueOf(differenceMilliseconds) + " " + String.valueOf(currentUnixTimeSeconds);

    DatagramSocket clientSocket = new DatagramSocket();
    InetAddress recipientIP = InetAddress.getByName(GRAPHITE_SERVER);
    byte[] sendData = message.getBytes();
    DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, recipientIP, GRAPHITE_PORT);

    clientSocket.send(sendPacket);
    clientSocket.close();
} 
```

奇怪的是，这*仅在某些时候*有效。这是图表的示例部分，用于每分钟处理超过 1000 个请求的机器：

![带有部分数据的图表](../Images/fecd693de3392e0c9c7d29735ce3729c.png)

很多时候，有几个小时的时间长度，图表中没有显示任何数据点。

如果相关，Graphite 服务器正在 EC2 上运行。

# linux - 如何将我的视频集流式传输到 inet

> ID：15640584
> 
> 赞同：1
> 
> 时间：2013-03-26T15:11:47.480
> 
> 标签：linux, ubuntu, streaming, video-streaming

我在地下室有一个小型 ubuntu 服务器，上面有几部自制电影。我想与我的家人分享这些视频。在我最幻想的梦想中，我会提供一个包含视频列表的网站来选择一个并观看它。比方说，像 youtube 这样的东西，但我的东西非常私密，只有我和我的家人才能访问。

我是一个或多或少有经验的 linux 用户。我已经在谷歌上搜索了一下。我找到了 Flumotion Streaming 服务器，但想在安装之前先考虑一下替代方案。我将不胜感激任何其他工具的提示。通过命令行或普通配置文件进行配置将是理想的。

谢谢

PS：我有一个 5 MBit/s 的上游到互联网。希望这对于一个客户来说应该足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:18:28.750

如今，大多数网络浏览器都支持 html5`<video>`标签。因此，您甚至不需要安装 flash/silverlight 或其他 3rd 方工具。创建视频门户/网站所需要做的就是：

a) 一个网络服务器软件（Apache 有很好的功能，但 lighttpd 的资源很轻。两者都可以在 Ubuntu 存储库中找到。

b) 你的视频。Chrome 目前支持 mp4、webm 和 ogg 格式，因此您的视频应该是其中一种格式（有关详细信息，请参阅此处：http: [//www.w3schools.com/html/html5_video.asp](http://www.w3schools.com/html/html5_video.asp)）

完成上述设置后，您需要做的就是创建一个默认的 html 页面，其中包含视频描述以及`<video>`用于流式传输视频的标签。请参阅上面的 w3schools 链接以了解语法和其他琐事。

# ms-access - 仅返回与特定字段不匹配的记录的查询

> ID：15640585
> 
> 赞同：3
> 
> 时间：2013-03-26T15:11:50.330
> 
> 标签：ms-access

我*不是*Access 人，只是想写一个我认为简单的查询来执行以下操作：

我的数据库中有两个表，从两个单独的 SharePoint 列表中导入。所以我无法控制数据的格式。我将一张表称为 MASTER 表，一张表称为 SUBSET 表。MASTER 表包含可能出现在 SUBSET 表中的所有可能值的完整列表。

两个表都有一个包含 URL 的字段，但这些字段是不同的数据类型。在 MASTER 表中，URL 字段的数据类型是文本。在 SUBSET 表中，URL 字段的数据类型为超链接。

此外，SUBSET URL 字段中的某些值可能与 MASTER URL 字段中的匹配值不完全匹配。因此，如果主 URL 是“ [http://abc.domain.com](http://abc.domain.com) ”，则子集 URL 可能包含附加信息，例如“ [http://abc.domain.com/home.apsx](http://abc.domain.com/home.apsx) ”。

我需要的是一个查询，它返回 MASTER 表中在 SUBSET 表中没有匹配的 URL 记录的所有记录。

希望这是有道理的。在此先感谢您的帮助！

编辑以包含我几乎可以肯定是可怕的查询尝试的屏幕截图。所需的输出是在 SUBSET 表中没有匹配 URL 的所有 RequestAccessEmail 值的列表。 ![查询尝试](../Images/a598ac0a0c31f73f40221fdbbdd04a53.png)

编辑以添加示例数据。

对于每个 RequestAccessEmail 值，仅当关联的 Url 值在 SP Permissions Cleanup Tracking URL 字段中不匹配时，才将其包含在查询结果中。

内部网站所有者 ID Url RequestAccessEmail 附件 1478 [http://teamsites.domain.com/sites/itfrance](http://teamsites.domain.com/sites/itfrance) First.last1@domain.com 0 1673 [http://teamsites.domain.com/sites/PricingSupport](http://teamsites.domain.com/sites/PricingSupport) First.last2@domain.com 0 1652 [http://teamsites.domain.com/sites/POProjectMgmt](http://teamsites.domain.com/sites/POProjectMgmt) First.last3@domain.com 0 1655 [http://teamsites.domain.com/sites/POSTeam](http://teamsites.domain.com/sites/POSTeam) First.last4@domain.com 0 1741 [http:// teamsites.domain.com/sites/rsa6x](http://teamsites.domain.com/sites/rsa6x) First.last5@domain.com 0 1218 [http://teamsites.domain.com/sites/EMEAProjectSupport](http://teamsites.domain.com/sites/EMEAProjectSupport) First.last6@domain.com 0 65 [http://projectsites.domain.com/站点/folsom](http://projectsites.domain.com/sites/folsom) First.last7@domain.com 0 1595 [http://teamsites.domain.com/sites/NBPCA](http://teamsites.domain.com/sites/NBPCA) First.last8@domain.com 0 1664 [http://teamsites.domain.com/sites/prepaiddev](http://teamsites.domain.com/sites/prepaiddev) First.last9@domain.com 0 1634 [http://teamsites.domain.com/sites/patchmgmt](http://teamsites.domain.com/sites/patchmgmt) First.last10@domain。 com 0 1961 [http://os.domain.com/sites/manager](http://os.domain.com/sites/manager) First.last11@domain.com 0

ID 名称 URL 8 CFPB AuditsDOMAIN_e0117427.xml [http://teamsites.domain.com/sites/itfrance/home.aspx](http://teamsites.domain.com/sites/itfrance/home.aspx) 9 St. Pete Legal DepartmentDOMAIN_e0117427.xml [http://teamsites.domain.com/sites/PricingSupport](http://teamsites.domain.com/sites/PricingSupport) 10 零售合同 ( 7)DOMAIN_e0117427.xml [http://teamsites.domain.com/sites/POPProjectMgmt](http://teamsites.domain.com/sites/POPProjectMgmt) 11 中国 HR SharesDOMAIN_lc23494.xml [http://teamsites.domain.com/sites/ChinaHRShares](http://teamsites.domain.com/sites/ChinaHRShares) 12 Client LoyaltyDOMAIN_e1033221.xml [http://teamsites.domain。 com/sites/clientloyalty](http://teamsites.domain.com/sites/clientloyalty) 13 eZoom！人力资源 R1.1DOMAIN_e1007952.xml [http://teamsites.domain.com/sites/ezoom-hr](http://teamsites.domain.com/sites/ezoom-hr) 14 IntercompanyDOMAIN_e0119924.xml [http://teamsites.domain.com/sites/intercoproject](http://teamsites.domain.com/sites/intercoproject) 15 NDMS 指导计划 DOMAIN_e1033265.xml [http://teamsites.domain.com/sites/NDMSMentoring](http://teamsites.domain.com/sites/NDMSMentoring) 16 人力资源 DOMAIN_e0015957.xml [http://teamsites.domain.com/sites/HR](http://teamsites.domain.com/sites/HR) 17 国际人力资源 [DOMAIN_e1019184.xml http://teamsites.domain .com/sites/GlobalHR](http://teamsites.domain.com/sites/GlobalHR) 18 站点标题 FSG 资源中心 DOMAIN_e0102084.xml [http://teamsites.domain.com/sites/ResourceCentral/SitePages/Home.aspx](http://teamsites.domain.com/sites/ResourceCentral/SitePages/Home.aspx) 19 TAGDOMAIN_e1022064.xml [http://teamsites.domain.com/sites/ TAG/SitePages/Home.aspx](http://teamsites.domain.com/sites/TAG/SitePages/Home.aspx) 20 WP Employee_Community EngagementDOMAIN_e1034583.xml [http://teamsites.domain.com/sites/WPEmpEngmt](http://teamsites.domain.com/sites/WPEmpEngmt) 21 法律 (6) - 根站点（审查了除 CID-DOJ-ACI 2011 之外的所有子站点）DOMAIN_e0117427.xml [http://legal.domain.com](http://legal.domain.com) 22 咨询服务客户端DOMAIN_e1035127.xml [http://clientportal.domain.com/sites/consulting/default.aspx](http://clientportal.domain.com/sites/consulting/default.aspx) 23 YMCA Fitness ChallengeDOMAIN_e1035127.xml [http://projectsites.domain.com/sites /Morgano/default.aspx](http://projectsites.domain.com/sites/Morgano/default.aspx) 24 OSNETDOMAIN_e0000185.xml [http://os.domain.com/Pages/default.aspx?sdupgwelredir=1](http://os.domain.com/Pages/default.aspx?sdupgwelredir=1) 25 USVS_ Government SolutionsDOMAIN_e0113967.xml [http://infoport.domain.com](http://infoport.domain.com) 26 Global ServicesDOMAIN_e0113967.xml [http ://teamsites.domain.com/sites/GlobalSvcs/default.aspx](http://teamsites.domain.com/sites/GlobalSvcs/default.aspx) 27 检查培训 _ Quality ServicesDOMAIN_e0113967.xml [http://teamsites.domain.com/sites/QATrain](http://teamsites.domain.com/sites/QATrain) 29 AutoSuites ArchiveDOMAIN_e0067145.xml [http://sp-archives.domain.com/sites/autosuite/SitePages/Home.aspx](http://sp-archives.domain.com/sites/autosuite/SitePages/Home.aspx) 30 VCI 客户端 SiteDOMAIN_e0067145.xml [http://clientportal.domain.com/sites/VCI/SitePages/Home.aspx](http://clientportal.domain.com/sites/VCI/SitePages/Home.aspx) 31 VCI 内部 SiteDOMAIN_e0067145 .xml [http://teamsites.domain.com/sites/VCI-IUO/SitePages/Home.aspx](http://teamsites.domain.com/sites/VCI-IUO/SitePages/Home.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:52:13.277

看看这样的事情是否适合你：

```
SELECT Distinct m.URL
FROM [Internal Site Owners] m, [SP Permissions Cleanup Tracking] s
WHERE s.URL Not Like "*" & m.URL & "*" 
```

您需要将 sql 粘贴到查询设计窗口的 SQL 视图中。

该查询询问主 URL 与子 URL 不同的行，因此“ [http://abc.domain.com](http://abc.domain.com) ”将匹配“ [http://abc.domain.com/home.apsx](http://abc.domain.com/home.apsx) ”，但不匹配“ [http ” ://home.abc.domain.com](http://home.abc.domain.com) ”。超链接类型的格式通常是`display text#http://example.com#`，所以`http://example.com`在 master 中会匹配。

**编辑重新数据和评论**

![查询和表](../Images/f6bb966a41ef6f61750963dd2a082734.png)

SQL：

```
SELECT DISTINCT m.RequestedAccessEmail, m.URL
FROM [Internal Site Owners] AS m, [SP Permissions Cleanup Tracking] AS s
WHERE s.URL Not Like "*" & [m].[URL] & "*" 
```

**来自样本数据的新版本**：

```
SELECT [Internal Site Owners].RequestAccessEmail FROM [Internal Site Owners] 
WHERE ID NOT IN (
     SELECT [Internal Site Owners].ID
     FROM [Internal Site Owners], [SP Permissions Cleanup Tracking]
     WHERE [SP Permissions Cleanup Tracking].URL 
        Like "*" & [Internal Site Owners].[url] & "*") 
```

# vb.net - 如何在VB中获取记录集中的每条记录？

> ID：15640586
> 
> 赞同：0
> 
> 时间：2013-03-26T15:11:52.573
> 
> 标签：vb.net, winforms

嘿，我的问题是我正在调用存储过程，并将记录放入 ADODB 记录集中。当我检查 field.count 时，它说我得到了 6 个结果，这很好。但是，当我尝试循环进入该记录集时，它会跳过其中一个。这是我的代码

```
 oRs = g_oSQL.GetRecords("PS_palFetchAllPalette_sel")
        If Not oRs Is Nothing Then
            cmbPallet.Items.Clear()
            oRs.MoveFirst()

            While Not oRs.EOF
                If oRs.Fields.Item("palcode").Value.ToString() <> "None" Then
                    cmbPallet.Items.Add(oRs.Fields.Item("palcode").Value.ToString())
                End If
                oRs.MoveNext()
            End While 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:48:34.053

我认为发生的情况是，当您使用 oRs.MoveNext() 到达您的最后一条记录时，您就处于 EOF，因此不会发生下一个循环。尝试改变循环的结构。

```
With oRs
  Do Until .EOF
     'get your data
     .MoveNext

  Loop 
```

结束于

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:47:30.913

我有一段时间没有使用 ADODB，但是 field.count 不会指示记录集中的字段数而不是返回的记录数吗？您可能已返回 0 条记录，但查询中仍有元数据。

您确定您的“无”检查有效吗？这将要求 palcode 不是空的或 Null，而是具有“无”的实际值。在 While 循环中设置一个断点，看看你是否得到了你所期望的。

# linux - 自主脚本

> ID：15640587
> 
> 赞同：0
> 
> 时间：2013-03-26T15:11:53.560
> 
> 标签：linux, bash, cron, crontab

如何让脚本在每天 23:59 自动执行？

我认为使用`if`语句会起作用，但我如何获得尚未执行的脚本以知道我希望它何时起作用？

如果我要在早上第一件事运行它，是否可以使用某种条目来使程序保持活动状态直到 23:59，我可以告诉它在给定时间再次运行它？这样，它只会替换之前的文件，并为我提供日常活动的汇总报告，而我不必编写多个脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:16:50.693

> 如何让脚本在每天 23:59 自动执行？

[cron](http://en.wikipedia.org/wiki/Cron)是这项工作的工具。

你会有一个看起来像的条目

```
59 23 * * * /path/to/my_script.sh 
```

这意味着`/path/to/my_script`每天 23:59 运行。

# java - 列表或数组作为最简单驱动的测试中的参数

> ID：15640588
> 
> 赞同：0
> 
> 时间：2013-03-26T15:11:54.683
> 
> 标签：java, junit, data-driven-tests

这个问题是非常[简单的](https://github.com/EaseTech/easytest-core)- 具体的（但我不知道更好的地方问）。

有没有办法使用数组或列表类型的参数？是否有可能像这样使用的分隔符（excel表）：

testMethod doubleList stringList 3.5,3.4,6.7 a,b,c

（分隔符在这里是'，'）所以我得到两个参数List doublelist和List stringList。目前我手动执行此操作：使用 all 作为字符串参数并将它们“拆分”在“，”上。然后将单个字符串转换为所需的类型。是否有最简单的“更简单”的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T07:09:04.340

您只需使用 ':' 作为分隔符，EasyTest 就会为您将字符串拆分为一个集合。

EasyTest 中 @Param 注释的 javadoc 说：

“如果你想传递一个 Collection 类型，那么 EasyTest 框架会为你提供实例化 Collection 类的功能，并在可能的情况下传递正确的泛型参数。例如，如果你有这样的测试方法：

```
@Test
public void testArrayList(@Param(name="items") ArrayList<ItemId> items){
    Assert.assertNotNull(items);
    for(ItemId item : items){
        System.out.println("testArrayList : "+item);
    }
} 
```

那么您所要做的就是：在测试数据文件（XML、CSV、Excel 或自定义）中将 itemIds 列表作为“:”分隔列表传递，例如：23:56:908:666

并注册一个编辑器或转换器，用于将字符串数据转换为对象。如果 Collection 的泛型类型参数是标准 Java 类型（日期、字符、时间戳、长整数、整数、浮点数、双精度等），那么您无需执行任何操作，框架将负责转换字符串数据到请求的类型。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T07:27:52.763

EasyTest 以行为基础（据我所知）。他们没有给出处理对象列表的任何规定。我正在使用相同的方式。我觉得原始类型更容易，但是对象列表呢..？

# lotus-notes - 在服务器上运行 Lotus Notes 代理时出现意外结果

> ID：15640590
> 
> 赞同：0
> 
> 时间：2013-03-26T15:11:59.527
> 
> 标签：lotus-notes, lotus-domino, lotusscript

我有一个 Lotus Notes 代理，它搜索数据库然后以 Excel 格式返回结果。当我使用触发器运行代理时，我得到了正确的结果：事件 -> 操作菜单选择。但是当我计划在服务器上运行代理时，我收到了不同的结果。在 Excel 文件的前 10 行中始终显示 10 个文档，当我在数据库中手动搜索它们时，我无法在数据库中找到这 10 个文档。

我从 PC 和服务器运行的代理有一些不同之处：

1.  我有 Office 2010，服务器有 Office 2003，所以 SaveAs 方法使用不同的参数

    ```
    xlApp.ActiveWorkbook.SaveAs file_Path, 43 'for Office 2003

    xlApp.ActiveWorkbook.SaveAs file_Path, 56 'for Office 2010 
    ```

2.  从我的 PC 运行代理会将 Excel 文件保存在我的本地硬盘驱动器中。从服务器运行代理会将 Excel 文件保存在以下路径中：

    ```
    C:\Windows\SysWOW64\config\systemprofile\Desktop\FileName.xls 
    ```

我的搜索声明：

```
search_Formula = {Form = "WORec" & SoftDelete != "Y" & WO_Dept="REPAIR" & } & _ 
    {WO_Status != "Completed" & WO_Status != "Declined" & } & _
    {@Like(WOBinNumber; "R%")} 
```

我认为这两个差异中的任何一个都不会导致问题，但我不知道还能尝试什么，因为当它在服务器上运行时我无法单步执行代码。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:42:50.930

当您手动运行代理时，您将在当前用户的安全上下文中运行它。计划代理在服务器的安全上下文下运行。

如果文档上有阅读器字段，它们可能只对某些用户可见（即服务器，而不是您）。

如果您转到服务器并在服务器本身上启动 Notes，您可能会看到这些文档。

# c1-cms - 当包含带有“页面”参数的 Url.Action 时，复合 C1 MvcPlayer 渲染失败

> ID：15640591
> 
> 赞同：0
> 
> 时间：2013-03-26T15:12:04.677
> 
> 标签：c1-cms

**更新**

请忽略这个问题，我完全被误解了，这个问题与我认为的无关，而是因为 Composite 将它从函数呈现的所有 html 视为 XML，因此你必须逃避某些字符（这里有一个方便的参考： http: [//www.faqs.org/docs/htmltut/characterentities_famsupp_69.html](http://www.faqs.org/docs/htmltut/characterentities_famsupp_69.html)）。在我的情况下，我不得不替换`&`为`&#38;`.

希望此信息对其他人有所帮助。

另外，这里有一篇关于如何转义字符串的好文章：[String escape into XML](https://stackoverflow.com/questions/1132494/string-escape-into-xml)

**我的老误解的问题：**

我有一个无法通过 Composite 的 MvcPlayer 函数呈现的视图。通过消除过程，我能够将其追踪到视图中的以下行：

```
Url.Action("Action", "Controller", new { Page = 123, PageSize = 180 }); 
```

然后我更进一步发现，如果我将其更改为以下内容：

```
Url.Action("Action", "Controller", new { PageSize = 180 }); 
```

然后页面呈现没有问题。

我检查了复合错误日志，其中指出：

```
System.Xml.XmlException: '=' is an unexpected token. The expected token is ';'. Line 81, position 63.
  at System.Xml.XmlTextReaderImpl.Throw(Exception e)
  at System.Xml.XmlTextReaderImpl.Throw(String res, String[] args)
  at System.Xml.XmlTextReaderImpl.ThrowUnexpectedToken(String expectedToken1, String expectedToken2)
  at System.Xml.XmlTextReaderImpl.ThrowUnexpectedToken(Int32 pos, String expectedToken1, String expectedToken2)
  at System.Xml.XmlTextReaderImpl.ThrowUnexpectedToken(Int32 pos, String expectedToken)
  at System.Xml.XmlTextReaderImpl.HandleEntityReference(Boolean isInAttributeValue, EntityExpandType expandType, Int32& charRefEndPos)
  at System.Xml.XmlTextReaderImpl.ParseAttributeValueSlow(Int32 curPos, Char quoteChar, NodeData attr)
  at System.Xml.XmlTextReaderImpl.ParseAttributes()
  at System.Xml.XmlTextReaderImpl.ParseElement()
  at System.Xml.XmlTextReaderImpl.ParseElementContent()
  at System.Xml.XmlTextReaderImpl.Read()
  at System.Xml.Linq.XContainer.ReadContentFrom(XmlReader r)
  at System.Xml.Linq.XContainer.ReadContentFrom(XmlReader r, LoadOptions o)
  at System.Xml.Linq.XDocument.Load(XmlReader reader, LoadOptions options)
  at System.Xml.Linq.XDocument.Parse(String text, LoadOptions options)
  at System.Xml.Linq.XDocument.Parse(String text)
  at Composite.AspNet.MvcPlayer.Functions.RenderInternal(String path) in c:\***************\MvcPlayer\Player.cs:line 125 
```

我知道在 Composite 中，您可以像这样引用系统内的页面：

```
<a href="/page(@aPage.Data.Id)">Page</a> 
```

我的 Url.Action 的输出是 /Controller/Action?Page=123&Page=180

所以我假设复合从动作中获取 URL 结果的“？Page = 123”部分，然后尝试将其作为复合页面引用处理，当然不是。

有谁知道我该如何解决这个问题？

# php - 使用 cURL 登录外部网站

> ID：15640592
> 
> 赞同：0
> 
> 时间：2013-03-26T15:12:04.843
> 
> 标签：php, curl

我正在尝试使用 curl 登录到外部网站。我希望用户在我的索引页面上输入用户名和密码，然后当用户单击提交按钮时，登录表单会将用户名和密码都发布到 logincheck.php。它在那里检查用户名是否已在数据库中注册。如果这是真的，那么它应该将用户名和密码转发到外部站点并尝试在那里登录。如果没有，您应该会看到回声“失败”。

```
<?php
error_reporting(-1);

ob_start();
$host="XXXXXXX";
$username="XXXXXXX";
$password="XXXXXXX";
$db_name="XXXXXXX";
$tbl_name="XXXXXXX";

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$myusername=$_POST['loginid'];
$mypassword=$_POST['password'];
$loginUrl1 = 'http://externalwebsite.com/';

$myusername = stripslashes($myusername);
$myusername = mysql_real_escape_string($myusername);

$sql="SELECT * FROM $tbl_name WHERE login='$myusername'";
$result=mysql_query($sql);
if (false === $result) {
    echo mysql_error(); exit;
}

$count=mysql_num_rows($result);

$cookieFile = "test/myCookiefile.txt";
if(!file_exists($cookieFile)) {
    $fh = fopen($cookieFile, "w");
    fwrite($fh, "");
    fclose($fh);
}

if($count==1){
session_start();
$_SESSION['myusername'] = $myusername;

$curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, $loginUrl1);
    curl_setopt($curl, CURLOPT_POST, true);
    curl_setopt($curl, CURLOPT_POSTFIELDS, 'gebruikersnaam='.$myusername.'&wachtwoord='.$mypassword);
    curl_setopt($curl, CURLOPT_FAILONERROR, true);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($curl, CURLOPT_COOKIEFILE, $cookieFile);
    curl_setopt($curl, CURLOPT_COOKIEJAR, $cookieFile);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);  
    curl_exec($curl);
    $result = curl_exec($curl);
    header('Location: http://externalwebsite.com/');
    curl_close();
}
else {
    echo "failed";
}
ob_end_flush();
?> 
```

现在，它可以很好地重定向到外部网站，但无论我尝试什么，它都不会尝试登录该网站。我究竟做错了什么？我错过了什么吗？

# matlab - 提取元胞数组中某个字符的索引

> ID：15640593
> 
> 赞同：3
> 
> 时间：2013-03-26T15:12:06.973
> 
> 标签：matlab, if-statement, cells

我有一个像这样的单元格数组：
![在此处输入图像描述](../Images/c2cba464ee6bf396aca127111d1ef75e.png)

我想在这个单元格数组中提取 2 的索引，所以我使用了这些代码行：

```
for i = 1:size(idx,1)  
    if idx{i,1} ~= []  
       index = i;  
    end  
end 
```

但代码不起作用。我的意思是调试器永远不会进入，因为它不明白 2 与 [] 不同。为什么？你建议我如何编写代码？
请注意，字符并不总是 2，它也可能出现在其他索引中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:15:07.520

要测试您的变量是否为空，请使用[ISEMPTY](http://www.mathworks.com/help/matlab/ref/isempty.html)函数。

要对单元格数组中的所有元素执行此操作，您可以使用[CELLFUN](http://www.mathworks.com/help/matlab/ref/cellfun.html)：

```
index = find(~cellfun(@isempty, idx)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:19:55.140

在 Matlab 中，[] 表示空，因此：

```
for i = 1:size(idx,1)  
   if ~isempty(idx{i,1})
      index = i;  
   end  
end 
```

# c - 在 Linux 2.6.33.9 rt 上一段时间后 UDP 广播中断

> ID：15640594
> 
> 赞同：3
> 
> 时间：2013-03-26T15:12:14.940
> 
> 标签：c, linux, sockets, udp, real-time

我有几个运行 Linux 2.6.33.9rt 的嵌入式系统。他们通过 wifi 使用 udp 广播进行通信。通信工作得很好，但几分钟后，一些客户端停止发送数据包。不过，他们仍然会收到它们。

我能够使用以下示例代码重现该问题。该代码运行了几分钟垃圾广播消息，然后它就停止了。该程序仍在运行响应。udp 消息不再出现在网络上。

程序停止发送 udp 后，重新启动它的唯一方法是断开并重新连接网络。

任何想法可能导致这种行为？

```
int main(int argc, char**argv) {

struct sockaddr_in addr;
memset(&addr,0,sizeof(addr));
addr.sin_family = AF_INET;
addr.sin_addr.s_addr = inet_addr("255.255.255.255");
addr.sin_port = htons(atoi(argv[1]));
int num = atoi(argv[2]);

int s;
if ((s = socket(AF_INET, SOCK_DGRAM, 0)) < 0)
{
    perror("unable to open socket");
    exit(1);
}
static int broadcast = 1;
  if(setsockopt(s,  
             SOL_SOCKET,  
             SO_BROADCAST,  
             &broadcast,  
             sizeof(broadcast)) < 0)
  {
    perror("unable to enable broadcast");
  }

for (int i = 0; i < num; ++i)
{
  char data[1400];
  if (sendto(s, data, 1400, 0,(struct sockaddr *) &addr, sizeof(addr)) < 0)
  {
      perror("send error");
      exit(1);
  }
}
close(s);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:40:52.903

将套接字绑定到设备特定的广播地址，在我的例子中是 192.168.5.255，修复了这个错误。我不知道为什么会发生这种情况，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-20T07:02:07.113

我遇到了同样的问题，我可以保证它取决于您的网卡接口的驱动程序。事实上，我尝试使用外部网卡（例如 Alpha 卡），我不再有这个问题了。我希望这个建议对面临同样问题的其他人有用。

# asp.net-mvc - ASP WebAPI 通用列表可选参数

> ID：15640596
> 
> 赞同：60
> 
> 时间：2013-03-26T15:12:17.330
> 
> 标签：asp.net-mvc, asp.net-web-api

我真的在努力解决这个问题。我的 Get 方法需要一个通用列表参数，但它必须是可选的。我只是这样做了：

```
public dynamic Get(List <long> ManufacturerIDs = null) 
```

不幸的是，在运行时我得到了错误：

> “FormatterParameterBinding”不支持可选参数“ManufacturerIDs”。

如何在此处获取通用列表作为可选参数？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-03-26T15:30:39.653

使用可选参数有什么意义？`List<T>`是一个引用类型，如果客户端不提供值，它将简单地为空：

```
public HttpResponseMessage Get(List<long> manufacturerIDs)
{
    ...
} 
```

# batch-file - 删除所有文件，同时保持目录结构

> ID：15640599
> 
> 赞同：11
> 
> 时间：2013-03-26T15:12:51.720
> 
> 标签：batch-file, dos, delete-file

给定目录结构 c:\a\b\c\d\ - 什么 DOS 命令将删除 c:\a 中包含的所有文件以及子目录 b、c 和 d 中的所有文件？我们不想删除任何目录 - 只是文件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T15:18:17.613

利用：

```
del *.* /s /q 
```

检查目录是否仍然存在：

```
tree 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-26T15:15:01.770

该`DEL`命令仅删除文件，而不是目录，因此以下命令将按照您的要求执行：

```
DEL /S C:\a 
```

您需要用于`RMDIR`删除目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-14T03:43:41.963

```
@del /S /Q /F a\* >nul
@for /d %%i in (a\*) do @rmdir /s /q "%%i" 
```

# c++ - 使用按位运算创建 char 字符时出现问题

> ID：15640600
> 
> 赞同：2
> 
> 时间：2013-03-26T15:12:56.797
> 
> 标签：c++, c, bit-manipulation

我正在尝试使用位操作创建一个字符（8 位），一次`hex`一个。我正在运行的机器是小端的。

所以无论如何，例如：

```
char buff;
buff = 0x54; // ('T')
printf(" %c \n", buff ); // prints T

buff |= 0x54;        // Produces the same result.
buff |= 0x50 | 0x04; // Produces the same result. 
```

`0x5`但是我应该能够使用和移位来创建上述内容`0x4`。

我试过了

```
buff = ((buff << 4) | 0x4) | (buff | 0x5); 
```

及其变体，但没有进展。我觉得我错过了一些简单的东西。

编辑：解决。

谢谢大家。我从来不知道你可以在不告诉它要改变什么的情况下改变*？

*   可能对“buff = 0x5 << 4 | 0x4”没有完全理解如果我正确解释它，它会向左移动 4，并设置 0x5，然后 OR 与 4？** 没关系。下面的迈克彻底解释了它的作用。非常感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:16:58.713

您可以结合这些步骤，但这里是细分：

```
char buff = 0x5;  // set the upper nibble of the byte
buff <<= 4;       // shift it over to the left
buff |= 0x4;      // OR in the lower nibble
printf("%x\n", buff);  // result here is 0x54 
```

为什么您的版本不起作用：

```
buff = ((buff << 4) | 0x4) ... // start on the left, you shifted nothing 
                               // (if we assume 0 was the starting value). So this 
                               // is just going to be 0x4
buff = (0x4) | (buff | 0x5); // again, if we assume buff is 0 then this becomes 0x5
buff = 0x4 | 0x5;            // (that's 0100 | 0101 which gives you 0x5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:15:50.100

您似乎对移位的工作原理有些困惑，因为您试图在 or:ing 非移位常量之前移位目的地。

您只需要：

```
buff = (5 << 4) | 4; 
```

将这些常量设为十六进制并没有什么特别的意义，但当然，由于它们每个都应该只有四位（一个十六进制数字），尽管它会更长一些，但它是有道理的：

```
buff = (0x5 << 4) | 0x4; 
```

顺便说一句，“四位数据”的名称是[半字节](http://en.wikipedia.org/wiki/Nibble)（半字节，明白吗？），说“一个十六进制”没有什么意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:15:56.880

代码不应`buf`在表达式中使用 的值，如下所示：

```
char buff = ((0x05 << 4) | 0x4); 
```

请注意，上面的表达式是一个*编译时常*量，即`((0x05 << 4) | 0x4)`计算是由编译器执行的，而不是由目标系统的 CPU 执行的。

或者，您可以在几行上执行此操作，如下所示：

```
char buff = 0x00;
buff |= 0x05;
buff <<= 4;
buff |= 0x04; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:16:30.350

然后将第一个数字向左移动 4 或与第二个数字一起移动

```
 int first = 5;
 int second = 4;
 buff = (first << 4) | second; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T15:15:48.277

相当于你上面的“buff”将是：

```
buff = (0x5 << 4) | 0x4; 
```

# mysql - 使用 LDAP 作为基于现有 MySQL 数据库的中央登录的前端

> ID：15640606
> 
> 赞同：3
> 
> 时间：2013-03-26T15:13:07.913
> 
> 标签：mysql, ldap, single-sign-on, ldapconnection

在我的公司，有一个“通用”应用程序，它是中央的，我们希望将其用作用户帐户和身份验证的中央日志。

每个用户和 ACL 都在这个数据库（这是一个 MySQL 数据库）中声明，但我们现在使用越来越多的外部应用程序，并且希望将它们连接到这个数据库以进行身份​​验证（主要是）。

LDAP 在这方面很常见，并且很好地集成在许多外部应用程序中，所以我想知道是否可以在该数据库之上构建一个 LDAP 前端，以便可以像目前一样完成帐户创建和 ACL，而外部应用程序可以与标准接口连接。

可能吗 ？有人可以指点我有关这种操作的教程或信息吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-22T19:47:35.490

OpenLDAP 和 OpenDS 可以配置为使用 SQL 数据库作为后端。可以在 LDAP 数据和 SQL 数据之间定义映射（至少在 OpenLDAP 中）。

所以，剩下的问题似乎是：映射能否定义得如此灵活以适合您现有的数据库结构？

**编辑：** MyVD 创建一个虚拟目录，您可以使用数据库提供该目录 - 并且似乎更轻量级。

# r - 将带有 \n 的字符串传递给 ggtitle 时出现问题

> ID：15640607
> 
> 赞同：0
> 
> 时间：2013-03-26T15:13:11.477
> 
> 标签：r, ggplot2

我认为这可能有一个简单的答案——我似乎在任何地方都找不到——所以我暂时放弃再现性。我有一个旨在绘制`ggplot2`. 我用来`mapply`向它传递一些字符串向量作为函数输入参数。这里关注的参数是`title`。它被输入一个字符向量，其中包含诸如`"this is a plot title"`.

然后是下面的代码：

```
p <- ggplot(df, aes(x=date, y=value)) 

## plot the line 
p <- p + geom_line()

## add plot title
p <- p + ggtitle(title) 
```

实际上工作得很好，情节标题也`"this is a plot title"`符合预期。

但是，如果标题很长，并且我想指定一个点来使用它来包装标题，`\n`则它无法正常工作。

确切地说，如果我给 ggtitle 提供一个`"this is a \n plot title"`. 我得到的正是引号中包含的内容，而不是在`\n`. 我的怀疑是我需要`eval`, or `paste`or `get`，但是我的这种请求的编队未能达到预期的结果。我很感激帮助。

更新：我想这一定是与 mapply 的交互。这应该允许您重现问题。

创建字符串的data.frame作为样本并将其分配给`fred.M.SA`

```
 structure(list(RegionalCoverage = c("National", "National", "National", 
  "National", "National", "National"), GeographicLevel = c("MSA", 
  "MSA", "MSA", "MSA", "MSA", "MSA"), Category = c("Workers", "Workers", 
"Workers", "Workers", "Workers", "Workers"), Sector = c("Labor Market", 
"Labor Market", "Labor Market", "Labor Market", "Labor Market", 
"Labor Market"), Source2 = c("FRED", "FRED", "FRED", "FRED", 
"FRED", "FRED"), Title = c("Unemployment Rate in La Crosse, WI-MN (MSA)", 
"Trade, Transportation and Utilities Employment in La Crosse, WI-MN (MSA)", 
"Professional and Business Services Employment in La Crosse, WI-MN (MSA)", 
"Other Services Employment in La Crosse, WI-MN (MSA)", "Manufacturing Employment in La Crosse, WI-MN (MSA)", 
"Leisure and Hospitality Employment \\n in La Crosse, WI-MN (MSA)"
), SeriesID = c("LACR155UR", "LACR155TRAD", "LACR155PBSV", "LACR155SRVO", 
"LACR155MFG", "LACR155LEIH"), Units = c("%", "Thous. of Persons", 
"Thous. of Persons", "Thous. of Persons", "Thous. of Persons", 
"Thous. of Persons"), Freq = c("M", "M", "M", "M", "M", "M"), 
    Seas = c("SA", "SA", "SA", "SA", "SA", "SA"), OriginalSource = c("U.S. Department of Labor: Bureau of Labor Statistics", 
    "Federal Reserve Bank of St. Louis", "Federal Reserve Bank of St. Louis", 
    "Federal Reserve Bank of St. Louis", "Federal Reserve Bank of St. Louis", 
    "Federal Reserve Bank of St. Louis"), Method = c("ImportXML", 
    "ImportXML", "ImportXML", "ImportXML", "ImportXML", "ImportXML"
    ), LinktoSource = c("", "", "", "", "", ""), Link.to.Data.Spreadsheet.Name = c("", 
    "", "", "", "", ""), Link.to.Data.Storage = c("", "", "", 
    "", "", ""), Link.to.Data.Manipulation.File = c(NA, NA, NA, 
    NA, NA, NA), Link.to.Data.Manipulation.File.1 = c(NA, NA, 
    NA, NA, NA, NA)), .Names = c("RegionalCoverage", "GeographicLevel", 
"Category", "Sector", "Source2", "Title", "SeriesID", "Units", 
"Freq", "Seas", "OriginalSource", "Method", "LinktoSource", "Link.to.Data.Spreadsheet.Name", 
"Link.to.Data.Storage", "Link.to.Data.Manipulation.File", "Link.to.Data.Manipulation.File.1"
), row.names = c(27L, 34L, 44L, 46L, 47L, 48L), class = "data.frame")

MakelineFred  <- function(series, ylab="",xlab="", title="") {

require(ggplot2)      # hadley's plotting framework
require(scales)       # to adjust y axis scales
require(ggthemes)     # extra themes including tufte
require(xts)          # our favorite time series
require(gridExtra)   # for adding a caption
require(timeDate)    # for our prediction at the end
require(quantmod)    # 

# Get Data using quantmod
data <- getSymbols(series,src="FRED") #fred ignore from dates

# convert the string df to object df
data.xts <- get(data)   

## convert data to data.frame
df <- data.frame(
date=as.Date(index(data.xts)),
value=as.numeric(data.xts))

p <- ggplot(df, aes(x=date, y=value)) 

## plot the line 
p <- p + geom_line()

## add plot title
p <- p + ggtitle(title)
file <- paste("_",series,".png",sep="")
ggsave(file=file, plot=p,  width=6, height=4) 
```

终于来了`mapply`。

```
mapply(MakelineFred, series=fred.M.SA$SeriesID, title=fred.M.SA$Title) 
```

# highcharts - 更改窗口大小后，在 Highcharts 图表更改时收到通知

> ID：15640608
> 
> 赞同：0
> 
> 时间：2013-03-26T15:13:19.583
> 
> 标签：highcharts

在窗口大小更改后重新绘制图表时，有没有办法引起注意。听窗口更改事件本身不是一个好主意，因为如果首先触发哪个事件，我不能依赖哪个事件是重绘图形或我的事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:29:27.410

当图表 div 调整大小时触发图表重绘事件[http://api.highcharts.com/highcharts#chart.events.redraw](http://api.highcharts.com/highcharts#chart.events.redraw)

```
events: {
            redraw: function () {
                alert("redrawing chart");
            }
        } 
```

请注意，这也会因其他原因而触发，例如当您添加数据点或修改系列选项等时。

# c# - 工作单元模式 - 使用工厂获取存储库

> ID：15640611
> 
> 赞同：0
> 
> 时间：2013-03-26T15:13:28.977
> 
> 标签：c#, generics, repository-pattern, unit-of-work

我正在关注`Repository Pattern`与模式相结合的教程`Unit Of Work`。

我基本上有：

```
interface IRepository<T> where T : class
{
  //...
}
class Repository<T> where T : class
{
  //Implemented methods 
}
interface IFooRepository
{
  IQueryable<Foo> GetFoos();
}
class FooRepository : Repository<Foo>, IFooRepository
{
  IQueryable<Foo> GetFoos() {}
} 
```

以上代表我的`repositories`，在基本意义上。然后我有`Uow`课。

```
public class MyUow
{
  public void Commit() { }
  public IRepository<Bar> Bars { get { return GetStandardRepo<Bar>(); } }
  public IFooRepository Foos { get { return GetRepo<IFooRepository>(); } }
  private IRepository<T> GetStandardRepo()
  {
    return RepositoryProvider.GetRepoistoryForEntityType<T>();
  }
  private T GetRepo<T>()
  {
    return RepositoryProvider.GetRepository<T>();
  }
} 
```

我的问题来了，我正在关注的教程只`Dictionairy<Type, object>`在`RepositoryProvider`课堂上实例化 a 并且似乎没有填充它，所以使用的方法`GetRepo<T>`不起作用。

```
public virtual T GetRepository<T>(Func<DbContext, object> factory = null) where T : class
{
  //Look for T in the dictionairy by typeof(T)
  object repoObj;
  Repositories.TryGetValue(typeof(T), out repoObj);
  if (repoObj != null)
    return (T)repoObj;
  //Not found or a null value, make a new instance of the repository.
  return MakeRepository<T>(factory, Context);
}
private T MakeRepository<T>(Func<DbContext, object> factory, DbContext dbContext) where T : class
{
  var f = factory ?? _repositoryFactories.GetRepositoryFactory<T>();
  if (f == null)
    //Exception here because this is null
    throw new NotImplementedException("No factory for repository type");
  var repo = (T)f(dbContext);
  Repositories[typeof(T)] = repo;
  return repo;
} 
```

我的问题本质上是实现这种模式的正确方法是什么以及我哪里出错了？我应该`Dictionairy<Type, Func<DbContext, object>`用已知存储库的列表来实例化吗？这看起来很脏。我正在疯狂地试图解决这个问题！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T11:14:13.460

如果您还没有找到答案，我会按照教程进行操作并且能够运行它（教程示例）。如果您确定您已正确实施，请注意这一点，

默认情况下，存储库字典为 null，并且仅在首次请求时才具有非标准存储库（例如 IFooRepository）的值。因此，如果您正在检查存储库字典的调试中的值并且尚未请求 IFooRepository，那么您肯定不会在那里看到它。首先有一个访问 IFooRepository 的代码，然后它将在提供程序类的 MakeRepository 方法中为其创建一个存储库。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:55:09.960

我从一开始就看到你`Repository<T>`没有实现`IRepository<T>`，所以应该是这样的：

```
class Repository<T> : IRepository<T> where T : class
{
  //Implemented methods 
} 
```

然后你完全秘密的教程应该描述如何`_repositoryFactories.GetRepositoryFactory<T>()`发现你的`IRepository<T>`实现者`FooRepository`——也许它会是自动发现的，也许你需要在某个地方注册一些东西。

接下来，我对你的具体教程和工厂等一无所知，但我想你可能需要使用`GetRepo<Foo>`代替`GetRepo<IFooRepository>`，因为现在这`IFooRepository`看起来毫无意义......或者你可能再次错过了这个`IFooRepository`声明中的一些东西，它应该像`interface IFooRepository : IRepository<Foo>`-同样，它在很大程度上取决于您正在使用的工厂的特定发现实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-17T16:35:37.883

有一个名为`RepositoryFactories.cs` 您需要为您的自定义存储库添加一个条目到字典的帮助程序类

```
{typeof(IFooRepository ), dbContext => new FooRepository (dbContext)} 
```

# html - CSS 在 CSS 和 HTML 中创建下拉列表时尝试理解替代语法

> ID：15640612
> 
> 赞同：0
> 
> 时间：2013-03-26T15:13:31.157
> 
> 标签：html, css, syntax, cascadingdropdown

我看到了两种不同的方式来引用无序列表 ( `<ul>`)、列表项 ( `<li>`) 和锚点 ( `<a>`)。

我想在一个下拉列表中设置这些项目的属性，其中至少有两级嵌套`<ul>`。

我的问题具体是关于如何引用不同级别的`<ul>`,`<li>`和`<a>`其中的。

我已经命名了导航栏`id="navBar"`。

我在 youtube 上看到过：[构建下拉导航栏](http://www.youtube.com/watch?v=T7ayE5AtRUA)

使用的语法是：

```
ul#navBar .sub1 li
ul#navBar .sub1 li a 
```

其中“ *.sub1* ”类已定义，是*嵌套* `<ul>`的第一级，“ . *sub2* ”是嵌套的第二级`<ul>`。

参考这些级别，使用的代码是。

```
ul#navBar .sub2 a {
                  background-color: blue;}

ul#navBar li:hover > a {
            background-color: #CFC;
            } 
```

在我看来，去定义*.sub1*和*.sub2*的麻烦是多余的，我一直在使用以下格式：

```
#navBar ul li{ background-color: blue;}

#navBar ul li:hover ul{ background-color: red;} 
```

真正的问题：

什么是正确的语法，使用我的（上面的代码）格式样式。要引用第二层嵌套`<ul>`并影响the `<li>`or the `<a>`there in？

我以为是这样的：

```
 #navBar ul li ul li: hover ul{ background-color: red;} 
```

但我错了:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:30:38.217

First note that there should never be a space before `:hover`.

So the basic HTML structure you're outlining is:

```
<ul id="navbar">
    <li>
        <ul class="sub1">
            <li>
                <ul class="sub2">
                    <li><a>Text</a><li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

To refer to the `li` and `a` within `.sub2`, you'd write:

```
#navbar ul ul li { style to apply to li }
#navbar ul ul li a { style to apply to a }
#navbar ul ul li:hover { style to apply to li on hover }
#navbar ul ul li:hover a { style to apply to a on li hover } 
```

The reason the tutorial assigned classes is because using generic nested element is a really inefficient way of using CSS selectors; it's faster to use classes. For more info, see [this article from CSS-Tricks](http://css-tricks.com/efficiently-rendering-css/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:26:12.050

```
#navnar ul 
{/*some style*/} Folder
#navbar ul ul
{/*some style*/} sub-folder

#navbar ul li:hover
{/*some style*/}
#navbar ul ul li:hover
{/*some style*/} 
```

我想这就是你所追求的。

查看本教程以获取更多信息[- css3-animated-dropdown-menu](http://www.red-team-design.com/css3-animated-dropdown-menu)

# javascript - Javascript setInterval 在 IE7 和 IE8 中不起作用

> ID：15640614
> 
> 赞同：0
> 
> 时间：2013-03-26T15:13:33.107
> 
> 标签：javascript, jquery, cross-browser

我正在使用 Javascript setInterval 不断轮询服务器以获取任何更新，并使用来自服务器的响应刷新屏幕。我需要支持>IE7，以及其他主流浏览器。

setInterval 函数在除 IE7 和 IE8 之外的所有浏览器中都被触发。

根据我在其他帖子中看到的建议，我尝试在 ajax 请求上设置 cache:false 以及将 setInterval 调用包装在匿名函数中。但这些建议似乎都不起作用。

以下是我正在使用的代码：

```
$(document).ready(function () {
    setInterval(pollForServerUpdates, 30000);
});

function pollForServerUpdates() {

$.ajax({ url: $.url("Home/GetUpdates"),
        type: "POST",
        cache: false,
        success: function (result) {
            updateTabelWithCurrentStatus(result);
        },
        dataType: "json"
    });    
} 
```

我不确定我是否在这里遗漏了什么。很感谢任何形式的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:49:33.030

我把我的评论放在上面作为这个问题的答案。出现问题是因为“class”似乎是 IE 中的保留关键字并导致错误。创建元素时，我将 class 关键字括在引号中，一切都很好。感谢 Pointy 让我看一下控制台。@Spudley，感谢您的提示，我将根据您的建议重构我的代码。

# mysql - Lucene/MySQL 集成 - 播放框架 (Scala)

> ID：15640616
> 
> 赞同：2
> 
> 时间：2013-03-26T15:13:38.747
> 
> 标签：mysql, hibernate, lucene, playframework-2.0, hibernate-search

有没有人尝试通过 Scala 将 Lucene 和 MySQL 与 Play Framework 集成？

我发现的挑战是如何使 lucene 索引与数据库保持同步。使用 Hibernate Search 可以做到这一点，但在使用 Play-Scala 时这是不可能的/不建议这样做。

非常感谢任何指导/建议。

谢谢

# java - Java 中的 PatternSyntaxException（匹配 Windows 注册表路径）

> ID：15640618
> 
> 赞同：1
> 
> 时间：2013-03-26T15:13:40.717
> 
> 标签：java, regex

我得到了一个如下所示的方法，当我尝试运行它时，我遇到了一个异常。

*java.util.regex.PatternSyntaxException：索引 6 ^HKLM\ 附近出现意外内部错误*

任何人都能够发现我的正则表达式有什么问题？我要做的是检查一个字符串，它是一个 Windows 注册表路径，并确保我的软件支持它。

```
 final String SUPPRTED_REGISTRY_PATH_REGEX[] = new String[] {
        "^HKLM\\",
        "^HKEY_LOCAL_MACHINE\\",
        "^HKCR\\",
        "^HKEY_CLASSES_ROOT\\"
    };

    boolean isValidated = false;

    // Windows registry path is case-insensitive therefore
    // convert the registry path to all upper case for
    // ease of comparison
    String uppercaseRegistryPath = registryPath.toUpperCase(); 

    for(int i = 0;
        i < SUPPRTED_REGISTRY_PATH_REGEX.length && isValidated == false;
        i++) {

        if(Pattern.matches(
                SUPPRTED_REGISTRY_PATH_REGEX[i], uppercaseRegistryPath)) {
            isValidated = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:21:05.180

通常要`\`在正则表达式中表示文字，您需要将其转义一次`\\`。

但在 Java 中，您还需要转义`\`String 中的特殊含义。因此，您将不得不使用`"\\\\"`生成`\\`将在正则表达式中用于匹配文字的`\`文字。

是不是很简单：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T15:17:06.317

反斜杠字符由`\\`字符表示。要在正则表达式中表示这一点，需要对每个字符进行转义，从而产生`\\\\`.

```
String SUPPRTED_REGISTRY_PATH_REGEX[] = new String[] {
   "^HKLM\\\\",
   "^HKEY_LOCAL_MACHINE\\\\",
   "^HKCR\\\\",
   "^HKEY_CLASSES_ROOT\\\\"
} 
```

*   [模式文档](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

# c# - wpf 创建 3d 立方体并沿 x、y 和 z 轴旋转

> ID：15640619
> 
> 赞同：3
> 
> 时间：2013-03-26T15:13:41.983
> 
> 标签：c#, wpf, 3d, viewport

我有以下代码：

```
<Window x:Class="Demo3D.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Viewport3D Name="viewport3D1">
            <Viewport3D.Camera>
                <PerspectiveCamera x:Name="camMain" Position="6 5 4" LookDirection="-6 -5 -4">
                </PerspectiveCamera>
            </Viewport3D.Camera>
            <ModelVisual3D>
                <ModelVisual3D.Content>
                    <DirectionalLight x:Name="dirLightMain" Direction="-1,-1,-1">
                    </DirectionalLight>
                </ModelVisual3D.Content>
            </ModelVisual3D>
            <ModelVisual3D x:Name="MyModel">
                <ModelVisual3D.Content>
                    <GeometryModel3D>
                        <GeometryModel3D.Geometry>
                            <MeshGeometry3D x:Name="meshMain"
                                Positions="0 0 0  1 0 0  0 1 0  1 1 0  0 0 1  1 0 1  0 1 1  1 1 1"
                                TriangleIndices="2 3 1  2 1 0  7 1 3  7 5 1  6 5 7  6 4 5  6 2 0  2 0 4  2 7 3  2 6 7  0 1 5  0 5 4">
                            </MeshGeometry3D>
                        </GeometryModel3D.Geometry>
                        <GeometryModel3D.Material>
                            <DiffuseMaterial x:Name="matDiffuseMain">
                                <DiffuseMaterial.Brush>
                                    <SolidColorBrush Color="Red"/>
                                </DiffuseMaterial.Brush>
                            </DiffuseMaterial>
                        </GeometryModel3D.Material>
                    </GeometryModel3D>
                </ModelVisual3D.Content>
                <ModelVisual3D.Transform>
                    <RotateTransform3D>
                        <RotateTransform3D.Rotation>
                            <AxisAngleRotation3D x:Name="rotate" Axis="1 0 0"/>
                        </RotateTransform3D.Rotation>
                    </RotateTransform3D>
                </ModelVisual3D.Transform>
            </ModelVisual3D>
        </Viewport3D>
        <Slider Height="23" HorizontalAlignment="Left" 
                Margin="12,12,0,0" Name="slider1"
                VerticalAlignment="Top" Width="187" 
                Maximum="360"
                Value="{Binding ElementName=rotate, Path=Angle}" />

    </Grid>
</Window> 
```

我可以通过滑动滑块来旋转立方体。问题是立方体不会围绕它的中心旋转。我怎样才能让那个立方体围绕它的中心旋转？换句话说，如果我能做类似[http://www.youtube.com/watch?feature=player_embedded&v=a7mTytwRGqI的事情会很好](http://www.youtube.com/watch?feature=player_embedded&v=a7mTytwRGqI)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T15:46:28.980

改变

```
<RotateTransform3D> 
```

至

```
<RotateTransform3D CenterX="0.5" CenterY="0.5" CenterZ="0.5" > 
```

结果： ![在此处输入图像描述](../Images/9c3049e7c8707f5aca5fac0addbde402.png)![在此处输入图像描述](../Images/38e5697db8007a25a8fdfdd7292bbdfb.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T15:43:39.133

旋转是相对于原点进行评估的。所以最简单的方法是定义几何，使其原点与全局原点匹配：

```
<MeshGeometry3D x:Name="meshMain"
    Positions="-0.5 -0.5 -0.5  0.5 -0.5 -0.5  -0.5 0.5 -0.5  0.5 0.5 -0.5  -0.5 -0.5 0.5  0.5 -0.5 0.5  -0.5 0.5 0.5  0.5 0.5 0.5"
    ... 
```

另一种方法是了解偏移量。您可以在转换中补偿此偏移：

```
<ModelVisual3D.Transform>
    <Transform3DGroup>
        <Transform3DGroup.Children>
            <!-- move the model to the origin -->
            <TranslateTransform3D OffsetX="-0.5" OffsetY="-0.5" OffsetZ="-0.5" />
            <RotateTransform3D>
                <RotateTransform3D.Rotation>
                    <AxisAngleRotation3D x:Name="rotate" Axis="1 0 0"/>
                </RotateTransform3D.Rotation>
            </RotateTransform3D>
            <!-- undo translation -->
            <TranslateTransform3D OffsetX="0.5" OffsetY="0.5" OffsetZ="0.5" />
        </Transform3DGroup.Children>
    </Transform3DGroup>
</ModelVisual3D.Transform> 
```

# php - 在php中实现多维数组的正确方法

> ID：15640627
> 
> 赞同：1
> 
> 时间：2013-03-26T15:14:09.220
> 
> 标签：php, arrays, multidimensional-array, key

我想创建一个带有关联键的数组数组，我真的不知道什么是正确的方法。例如，如果我有

```
 $array1 = array(
    "foo" => "bar",
    "bar" => "foo",
);
$array2 = array(
    "foo2" => "bar2",
    "bar2" => "foo2",
); 
```

写成这样是否正确：

```
$key_array=array("first"=>$array1,
                  "second"=>$array2); 
```

如果没有，我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:17:58.730

您的代码是正确的，实际上您也可以这样做：

```
$key_array = array(
               'first' => array('first' => $array1, 'second' => $array2),
               'second' => array('first' => $arra1, 'second' => $array2)
             ); 
```

并尽可能深地嵌套它。

# c# - 带有 SAML 的 wsse 安全标头

> ID：15640629
> 
> 赞同：1
> 
> 时间：2013-03-26T15:14:13.247
> 
> 标签：c#, soap, wif, saml, wse

我需要使用服务提供商公开的 Web 服务。我从他们那里得到了 WSDL 文件。在 SOAP 请求标头中，我必须添加带有 SAML 断言的 wsse:Security 标头。

请查看下面的 wsse:Security 标头。我进行了很多搜索并尝试使用 WSE 3.0、WIF 和 WCF。帮助我进一步移动花了大约 15 天，我的时间不多了。

我不需要密码。如果你给我线索就足够了。

```
 <wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <wsse:BinarySecurityToken EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" wsu:Id="CertId-2205212A7CE172EDAD136396070929096">MIIGOzCCBSOgAwIBAgIRAMLHEnngSJwPhUBrQD7Wau</wsse:BinarySecurityToken>
  <saml2:Assertion ID="2205212A7CE172EDAD136396070923593" IssueInstant="2013-03-22T13:58:29.235Z" Version="2.0" xsi:type="saml2:AssertionType" xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <saml2:Issuer>Test.com</saml2:Issuer>
    <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
      <ds:SignedInfo>
        <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
        <ds:Reference URI="#2205212A7CE172EDAD136396070923593">
          <ds:Transforms>
            <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
            <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
          </ds:Transforms>
          <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
          <ds:DigestValue>NI1mY4izfZO9cTmY9RQ1wc=</ds:DigestValue>
        </ds:Reference>
      </ds:SignedInfo>
      <ds:SignatureValue>PPiZmdZRnUNl5XLT</ds:SignatureValue>
      <ds:KeyInfo>
        <ds:X509Data>
          <ds:X509Certificate>
            MIIGOzCCBSOgAwIBAgIRAMLHEnngSJwPhUBrQD7Wa
            uEwDQYJKoZIhvcNAQEFBQAwgYkxCzAJBgNV
            BAYTAkdCMRswGQYDVQQIExJHcmVhdGVyIE1hbmNoZXN0ZXIxEDAOBgNVBAcTB1NhbGZvcmQxGjAY            
            r7A/P/13q1BRTPvLM6CYNzb4wvAgBxiuBV97OoVSnMPxYVtW03OoOCquyXDrq8bLYuR5+l1YGahY
            D5nJfSXiCb9PCf5m+hZh6smWp1rMcafMLdr5+JbZEPPk36S1q1aokpoeEo2N0Hmg9mt2GOg6Z+Qu
            ya9s
          </ds:X509Certificate>
        </ds:X509Data>
      </ds:KeyInfo>
    </ds:Signature>
    <saml2:Subject>
      <saml2:NameID Format="urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified" NameQualifier="Qualifier">CN=Test.com,OU=PlatinumSSL,OU=Test Company,OU=Test,O=Test</saml2:NameID>
      <saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:sender-vouches"/>
    </saml2:Subject>
    <saml2:Conditions NotBefore="2013-03-22T13:58:29.235Z" NotOnOrAfter="2013-03-22T14:03:29.235Z"/>
    <saml2:AuthnStatement>
      <saml2:AuthnContext>
        <saml2:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</saml2:AuthnContextClassRef>
      </saml2:AuthnContext>
    </saml2:AuthnStatement>
  </saml2:Assertion>
  <wsse:SecurityTokenReference wsse11:TokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0" wsu:Id="STRSAMLId-2205212A7CE172EDAD136396070929097" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">
    <wsse:KeyIdentifier ValueType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLID">2205212A7CE172EDAD136396070923593</wsse:KeyIdentifier>
  </wsse:SecurityTokenReference>
  <ds:Signature Id="SIG-19" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
    <ds:SignedInfo>
      <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
        <ec:InclusiveNamespaces PrefixList="head pros soapenv" xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#"/>
      </ds:CanonicalizationMethod>
      <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
      <ds:Reference URI="#id-1">
        <ds:Transforms>
          <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
            <ec:InclusiveNamespaces PrefixList="head pros" xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#"/>
          </ds:Transform>
        </ds:Transforms>
        <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <ds:DigestValue>yBGE2mVOFnzQPTA9v/7yIvq0CIk=</ds:DigestValue>
      </ds:Reference>
      <ds:Reference URI="#STRSAMLId-2205212A7CE172EDAD136396070929097">
        <ds:Transforms>
          <ds:Transform Algorithm="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#STR-Transform">
            <wsse:TransformationParameters>
              <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            </wsse:TransformationParameters>
          </ds:Transform>
        </ds:Transforms>
        <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <ds:DigestValue>/2QpTYDtLM4GnZIVq5/RihtL6Ug=</ds:DigestValue>
      </ds:Reference>
    </ds:SignedInfo>
    <ds:SignatureValue>
      Yx4SB76RTGcrll18wYlwvLAWHgNeckPcO9be1opcAL99dzDe5RspWkmLjXJ0rY7wh+RPW+wzaJyI
      r0ezOByRNCFWHFNjZOdN5wj++h7pnJRFLe70WGNktREOckaQ/U/O5NLH8adkWFm+Q/wZApw2WLI6
      6uWmQ+l8rOaWPg8gsBS8sjn1S55W2MYPtnwSew==
    </ds:SignatureValue>
    <ds:KeyInfo Id="KeyId-2205212A7CE172EDAD136396070929094">
      <wsse:SecurityTokenReference wsu:Id="STRId-2205212A7CE172EDAD136396070929095">
        <wsse:Reference URI="#CertId-2205212A7CE172EDAD136396070929096" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3"/>
      </wsse:SecurityTokenReference>
    </ds:KeyInfo>
  </ds:Signature>
</wsse:Security> 
```

谢谢和问候， P.Ponkarthik

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:56:10.527

看看 wsFederationHttpBinding，作为为您处理此安全元数据的特殊 WCF 绑定 ( [http://msdn.microsoft.com/en-us/library/ms731374.aspx](http://msdn.microsoft.com/en-us/library/ms731374.aspx) )

# image-processing - 实时图像处理

> ID：15640631
> 
> 赞同：0
> 
> 时间：2013-03-26T15:14:16.527
> 
> 标签：image-processing, embedded-linux, face-recognition, beagleboard

我正在做一个项目，该项目需要我使用连接到嵌入式板的相机来识别人脸。此板必须使用 linux 平台，并在 opencv 中进行实时图像处理。我将只使用一台相机。该板应该是负担得起的，并且性能应该是好的。我读过树莓派、beagleboard 和 pandaboard。. 哪个是最好的板子？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:26:23.197

我无法具体建议您选择哪种板，但更笼统地说，您选择的板的规格应在很大程度上取决于您对面部识别的期望性能。

如果您只是每隔几秒左右执行一次识别，那么平均规格的板可能会很好，但是如果您想每秒执行很多识别，那么您将需要性能更高的板，尤其是在图像处理是担心的。

我建议您在标准 PC 上构建您的程序（如果可能）并在那里感受其性能，并分析操作中最昂贵的部分，然后您可以做出更明智的选择。

# google-analytics - Google Analytics 找不到跟踪代码

> ID：15640632
> 
> 赞同：0
> 
> 时间：2013-03-26T15:14:23.530
> 
> 标签：google-analytics, tomcat7, vaadin

我对谷歌分析有疑问：

我实现了这样的跟踪代码：

```
 var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-XXXXXXXX-X']);
      _gaq.push(['_setDomainName', 'ransoft.at']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })(); 
```

只是它应该实现的方式（根据goole）。

跟踪代码在旁边，但谷歌分析找不到它（谷歌分析：跟踪信息：未安装跟踪！）

自己看看吧：[http ://www.ransoft.at](http://www.ransoft.at)

谷歌分析说，我没有在我的网站上安装跟踪代码。

谷歌分析：属性设置：

*   默认网址：[http ://www.ransoft.at](http://www.ransoft.at)

该网站由 Vaadin7 提供支持，并在 tomcat7 上运行。

请帮助我，我在这里很迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:37:30.590

所以，我终于设法让谷歌分析运行起来。

Google Analytics 无法在网站上找到我的跟踪代码。使用[GoogleAnalyticsTracker 插件](http://vaadin.com/directory/-/directory/addon/googleanalyticstracker)，数据已发送到 GA，但跟踪信息确实表明未安装跟踪代码。

问题是引导页面中缺少[跟踪代码](https://support.google.com/analytics/bin/answer.py?hl=en&utm_id=ad&answer=1008080)。解决方案是创建一个新的 VaadinServlet，我在其中创建了一个新的 BootstrapListener。像这样的东西：

```
public class MyVaadinServlet extends VaadinServlet {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Override
    protected void servletInitialized() throws ServletException {
        super.servletInitialized();
        getService().addSessionInitListener(new SessionInitListener() {

            /**
             * 
             */
            private static final long serialVersionUID = 1L;

            @Override
            public void sessionInit(SessionInitEvent event) throws ServiceException {
                event.getSession().addBootstrapListener(new BootstrapListener() {

                    /**
                     * 
                     */
                    private static final long serialVersionUID = 1L;

                    @Override
                    public void modifyBootstrapPage(BootstrapPageResponse response) {
                        // Adding Google Analytics to BootstrapPage header
                        head.append("<script type=\"text/javascript\">" +
                                      "var _gaq = _gaq || [];"+
                                      "_gaq.push(['_setAccount', 'UA-XXXXXXXX-X']);" +
                                      "_gaq.push(['_setDomainName', 'mydomain.com']);" +
                                      "_gaq.push(['_trackPageview', '/']);" +
                                      "(function() { " +
                                        "var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;" +
                                        "ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';" +
                                        "var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);" +
                                      "})();"+
                                    "</script>");

                    }

                    @Override
                    public void modifyBootstrapFragment(BootstrapFragmentResponse response) {

                    }
                });
            }
        });
    }
} 
```

有关更多信息，请参阅：[自定义 Vaadin 应用程序中的启动页面](https://vaadin.com/wiki/-/wiki/Main/Customizing%20the%20startup%20page%20in%20an%20application) 使用此解决方案，数据将发送到 Google Analytics，并且跟踪代码也被 Google Analytics 识别。

在 Vaadin 7 应用程序中可能有一些更简单的方法可以做到这一点，但这对我有用。以为我让你知道了。

问候

# php - 有人登录时显示注销按钮？

> ID：15640635
> 
> 赞同：3
> 
> 时间：2013-03-26T15:14:27.013
> 
> 标签：php, login, logout

有没有办法在用户登录时在我网站的所有页面上显示注销按钮，如果有人未登录，则不会出现？我假设某种 php 可以解决问题，但我不确定。我对这一切有点陌生，所以如果你能给出详细的解释，将不胜感激！

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:30:51.227

*   创建 $_SESSION['user'] 并在用户登录时填写。

*   创建一个您将包含在所有页面中的 php 页面，在此页面中检查是否设置了会话变量 $_SESSION['user']，并根据此条件显示链接

    ```
     if(isset($_SESSION["user"])){ /*your logout button*/ } else { /*your login button*/ } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:35:12.690

您可以通过启动新会话并设置会话变量来做到这一点。

在登录文件中这样做

```
<?php 
session_start();
if ($_SERVER['REQUEST_METHOD'] == 'POST' ) {

$username = trim(htmlentities(mysql_real_escape_string($_POST['username'])));
$password = trim(htmlentities(mysql_real_escape_string($_POST['password'])));
if (!empty($username) && !empty($password)) {
    $_SESSION['username'] = $username;
    echo "<br/> welcome ", $username;
    echo "<br/><a href='logout.php'>Logout</a>";

     } else {
    echo "Please enter correct username or password";
     }   
} else {
echo "Go to login page</br>";
echo "<a href='login.php'>Login</a>";
} 
```

并且每个页面都检查该会话变量

```
<?php 
session_start();
if(isset($_SESSION['username'])){
    echo "you logged in as </br>", $_SESSION['username'];
    echo "<br/><a href='logout.php'>logout</a>";
}else{
//your page stuff
} 
```

并注销，销毁会话

```
<?php 
session_start();
if (isset($_SESSION['username'])) {
   session_destroy();
   echo "<br> you are logged out successufuly!";
} 
   echo "<br/><a href='login.php'>login</a>";
 ?> 
```

//不要忘记阅读有关会话和 cookie 的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:17:47.097

这是一个例子，还有其他方法：

当用户登录时，创建一个`$_SESSION['user']`变量。

当您想显示注销按钮时，请检查是否设置了会话变量`isset($_SESSION['user'])`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:18:18.060

像这样：

```
if (isset($_SESSION['uid']))
{
      if (!empty($_SESSION['uid']))
      {
        echo "<input type='button' value='Logout' onclick='logout_function();' />";
      }
} 
```

萨卢多斯 xD

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T15:18:26.107

像这样的东西应该可以解决问题。

```
if(!empty($_SESSION["user"]))
{
/*
* logout button
*/
}
else
{
/*
* login code
*/
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T15:16:51.477

您是否研究过会话管理？ [http://www.php.net/manual/en/book.session.php](http://www.php.net/manual/en/book.session.php)

# ios - 实体及其关系的 NSFetchedResultController

> ID：15640636
> 
> 赞同：1
> 
> 时间：2013-03-26T15:14:27.407
> 
> 标签：ios, objective-c, core-data, nsfetchedresultscontroller

我有一个实体`Person`。Person 与 Entity `ObjectA`、`ObjectB`和具有三种关系`ObjectC`。

我可以使用 an`NSFetchedResultController`按类型对它们进行排序吗？所以第 0 节是`ObjectA`'s，第 1 节是`ObjectB`'s，第 3 节是`ObjectC'`s？此外，我可以按名称对它们进行排序吗？

还是我使用 3 个不同的数据源（将它们加载到一个数组或 3 个不同`NSFetchResultController`的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:32:35.547

An`NSFetchedResultController`一次只能获取一种实体类型，因此假设`ObjectA`、`ObjectB`和`ObjectC`是不同的实体类型，那么您将需要三个 NSFRC。

如果它们是三种不同的实体类型，您可以考虑将它们放在抽象实体下。然后您可以为该类型创建一个 NSFRC（[此处](https://stackoverflow.com/questions/6327835/core-data-abstract-entity-in-fetch-request)为示例）。

# python - python扭曲的中间人实现

> ID：15640640
> 
> 赞同：2
> 
> 时间：2013-03-26T15:14:35.980
> 
> 标签：python, twisted

我需要的是一种中间人实现：我需要一个服务器，它接收来自客户端的连接（具有不同长度的二进制数据）并将流转发到它连接到的服务器（充当客户端），并且然后将数据从它所连接的服务器发送回客户端。

它实际上位于客户端和服务器之间，并传递它们交换的数据（这是一个流，因此它不断地从一侧获取并发送到另一侧）。
服务器是静态的，所以它总是一样的，它的地址甚至可以硬编码；但是，当客户端断开连接时，该服务器也必须断开与“真实”服务器的连接。

我一直在环顾四周，但找不到这样一个简单问题的解决方案或示例。

我编写的代码实际上可以工作，但我还没有设法找到如何将引用放入“这是您分配的客户端”的服务器部分，或放入“这是您的服务器”的客户端。这是我的代码：

```
#!/usr/bin/env python

from twisted.internet import protocol, reactor
from twisted.protocols import basic

client = None
server = None

class ServerProtocol(protocol.Protocol):
    def connectionMade(self):
        global server
        factory = protocol.ClientFactory()
        factory.protocol = ClientProtocol
        server = self
        reactor.connectTCP('localhost', 1324, factory)

    def dataReceived(self, data):
        global client
        client.transport.write(data)

class ClientProtocol(protocol.Protocol):
    def connectionMade(self):
        global client
        # Here's the instance of the client
        client = self

    def dataReceived(self, data):
        global server
        server.transport.write(data)

def main():
    import sys
    from twisted.python import log
    log.startLogging(sys.stdout)
    factory = protocol.ServerFactory()
    factory.protocol = ServerProtocol

    # Here's the instance of the server
    server = ServerProtocol

    reactor.listenTCP(2593, factory)
    reactor.run()

if __name__ == '__main__':
    main() 
```

现在，关键是实例不能包含在全局对象中，而应该放在两个类中：如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:55:04.567

我已经设法自己解决了这个问题，为了将来的参考（或帮助遇到这个问题的其他人），这是我用来解决它的代码。

我认为我的解决方案和 jedwards 所提供的解决方案都有效；现在我只需要多研究他自己的一点，以确保我所做的是正确的：这是我第一个使用 Twisted 框架的应用程序，研究别人的解决方案是学习新东西的方法！:)

```
#!/usr/bin/env python

from twisted.internet import protocol, reactor
from twisted.protocols import basic

class ServerProtocol(protocol.Protocol):
    def __init__(self):
        self.buffer = None
        self.client = None

    def connectionMade(self):
        factory = protocol.ClientFactory()
        factory.protocol = ClientProtocol
        factory.server = self

        reactor.connectTCP('gameserver16.gamesnet.it', 2593, factory)

    def dataReceived(self, data):
        if (self.client != None):
            self.client.write(data)
        else:
            self.buffer = data

    def write(self, data):
        self.transport.write(data)
        print 'Server: ' + data.encode('hex')

class ClientProtocol(protocol.Protocol):
    def connectionMade(self):
        self.factory.server.client = self
        self.write(self.factory.server.buffer)
        self.factory.server.buffer = ''

    def dataReceived(self, data):
        self.factory.server.write(data)

    def write(self, data):
        self.transport.write(data)
        print 'Client: ' + data.encode('hex')

def main():
    import sys
    from twisted.python import log

    log.startLogging(sys.stdout)

    factory = protocol.ServerFactory()
    factory.protocol = ServerProtocol

    reactor.listenTCP(2593, factory)
    reactor.run()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T16:36:33.887

考虑这种方法

```
#!/usr/bin/env python

import sys
from twisted.internet import reactor
from twisted.internet.protocol import ServerFactory, ClientFactory, Protocol
from twisted.protocols import basic
from twisted.python import log

LISTEN_PORT = 2593
SERVER_PORT = 1234

class ServerProtocol(Protocol):
    def connectionMade(self):
        reactor.connectTCP('localhost', SERVER_PORT, MyClientFactory(self))

    def dataReceived(self, data):
        self.clientProtocol.transport.write(data)

class ClientProtocol(Protocol):
    def connectionMade(self):
        # Pass ServerProtocol a ref. to ClientProtocol
        self.serverProtocol.clientProtocol = self;  

    def dataReceived(self, data):
        self.serverProtocol.transport.write(data)

class MyServerFactory(ServerFactory):
    protocol = ServerProtocol
    def buildProtocol(self, addr):
        # Create ServerProtocol
        p = ServerFactory.buildProtocol(self, addr)
        return p

class MyClientFactory(ClientFactory):
    protocol = ClientProtocol
    def __init__(self, serverProtocol_):
        self.serverProtocol = serverProtocol_

    def buildProtocol(self, addr):
        # Create ClientProtocol
        p = ClientFactory.buildProtocol(self,addr)
        # Pass ClientProtocol a ref. to ServerProtocol
        p.serverProtocol = self.serverProtocol
        return p

def main():
    log.startLogging(sys.stdout)

    reactor.listenTCP(LISTEN_PORT, MyServerFactory())
    reactor.run()

if __name__ == '__main__':
    main() 
```

ServerProtcol 实例将自身的引用传递给 MyClientFactory 构造函数，然后它设置告诉 ClientProtcol 它与哪个 ServerProtocol 实例相关联。

同样，当 ClientProtocol 连接建立时，它使用它对 ServerProtocol 的引用来告诉 ServerProtocol 使用什么 ClientProtocol。

注意：此代码中没有错误检查，因此如果出现问题（例如，如果真实服务器未在侦听），您可能会遇到有关 NoneType 的错误。

重要的几行是：

```
reactor.connectTCP('localhost', SERVER_PORT, MyClientFactory(self))
#...
def __init__(self, serverProtocol_):
    self.serverProtocol = serverProtocol_ 
```

在这里，您将对 ServerProtocol 的引用传递给 MyClientFactory 构造函数。它将这个引用存储在一个成员变量中。您这样做是为了在客户端工厂创建 ClientProtocol 时，它可以将引用传递给：

```
# Pass ClientProtocol a ref. to ServerProtocol
p.serverProtocol = self.serverProtocol 
```

然后，一旦从您的脚本连接到*真实*服务器，就会发生相反的情况。ClientProtocol 为 ServerProtocol 提供了对其自身的引用：

```
# Pass ServerProtocol a ref. to ClientProtocol
self.serverProtocol.clientProtocol = self; 
```

最后，两个协议在收到数据时使用彼此存储的引用来发送数据：

```
def dataReceived(self, data):
    self.clientProtocol.transport.write(data)
#...
def dataReceived(self, data):
    self.serverProtocol.transport.write(data) 
```

# algorithm - 将图映射到另一个结构的算法

> ID：15640642
> 
> 赞同：1
> 
> 时间：2013-03-26T15:14:42.253
> 
> 标签：algorithm, data-structures, graph

我正在尝试将图形结构映射到下面显示的结构中。

这是我需要映射的图表类型的示例

![在此处输入图像描述](../Images/20cb119a09b504e4db499b7d544a16b5.png)

其中箭头始终具有从左到右的方向。

这是我正在寻找的结果。

![在此处输入图像描述](../Images/c2ad8394945c7d1b23754008b46db7cc.png)

目标是生成这样的 XML：

```
<root>
    <seq>
        <mod1/>
        <flow>
            <seq>
                <mod4/>
                <mod7/>
            </seq>
            <seq>
                <flow>
                    <seq>
                        <flow>
                            <mod4/>
                            <mod3/>
                        </flow>
                        <mod6/>
                    </seq>
                    <seq>
                        <flow>
                            <mod4/>
                            <mod3/>
                            <mod2/>
                        </flow>
                        <mod5/>
                    </seq>
                </flow>
                <mod8/>
            </seq>
        </flow>
    </seq>
</root> 
```

有什么我可以使用的算法吗？

我认为这无关紧要，但我正在解析 JSON 以使用 JAVA 7 编写 XML。框是 Web 服务，箭头表示输入和输出参数，例如，模块 5 被调用一次模块 1、2、3 和 4已经完成，它们的输出是它的输入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T15:28:14.660

您在上面显示的图表具有循环，因此它永远不能表示为树。一般来说，树被定义为没有环的连通图。所以只有一种方法可以将一般图转换为树 - 删除循环并在需要时连接它。

编辑：根据您的编辑，该图是定向的，因此您将拥有一个[DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph)，它再次不是树，但具有几个有趣的属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T21:13:55.513

（不是答案，但我建议的编辑因虚假原因被拒绝。）

**正式的问题重述，基于对这个问题和另一个问题的评论**

输入是有限集 X 上的[偏序](http://en.wikipedia.org/wiki/Partially_ordered_set)≤ [X]，由具有顶点 X 的无环有向图指定。输出是有限集 Y 上的[串并联偏序](http://en.wikipedia.org/wiki/Series-parallel_partial_order)≤ [Y]，由一的串联和并行组合指定元素偏序和映射 f : Y → X，明确指定，使得对于每个最大链 x [1] < [X] ... < [X] x [n] （=输入图的[传递缩减](http://en.wikipedia.org/wiki/Transitive_reduction)中的源到汇路径） , 恰好存在一个最大链 y [1] < [Y] ... < [Y] y [n]且 f(y [j]) = x [j]对于所有 j ∈ {1, ..., n}。我们想要 |Y| 尽可能小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T15:19:24.540

如果路径是有向的，那么通过复制多个叶节点形成一个等效的树结构来对应多条路径。如果结构没有有向路径，那么我相信一般情况下没有对应的树结构。

**编辑**

鉴于这是一个有向图的新信息，等效的树结构为：

```
1
  2
    5
      8
  3
    5
      8
    6
      8
  4
    6
      8
    7 
```

并且推导它的算法是图的中缀遍历，当没有传出路径时在每个肢体上停止。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T21:10:44.003

问题仍然有点不清楚，但是我感觉您需要执行**图形序列化**或图形的**拓扑排序**。这只能应用于 DAG，因为循环的存在可以解释为依赖循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T02:50:11.920

您展示的图片表明该方法应该是从头向后工作。您首先查找没有子节点的节点 - 在本例中为 8 和 7。形成树的“双主干”。然后查找 8 和 7 的所有父级。同时查找没有父级的模块 - 在本例中为 1。称其为祖先。它是“终点”。最后，对于每组公共节点，我们声明一个“族”。具有共同孩子的节点是家庭——即使同一个节点可以属于多个家庭。只有一个父节点的节点是该父节点家族的一部分。

对于 8，您会找到 5 和 6。家庭 A。

对于 7，你会找到 4。家庭 B。7 只有一个父母，所以我们称 4 是家庭 B 的一部分。

将这些称为“第 2 代”。

对于第 2 代，寻找父母。

家庭 A： 5 -> 2,3,4 。家庭 C 6 -> 3,4 。家庭 D

家庭 B：4 -> 1 - 大家庭到达祖先。这条路径现在已经完成。我们可以将一条路径捕获为 1-4-7-end（所有“家庭 B”）

现在寻找第 3 代的父母：

5 人（家庭 C）： 2 -> 1 3 -> 1 4 -> 1 具有相同父母的同一家庭的成员是“近亲”，并得到一个`<flow>`以上和以下。

6 人（家庭 D）：3 -> 1 4 -> 1 另一个亲密的家庭

既然这些家族最终都指向了祖先，我们就需要另一个家族。

因此，我们拥有所描述的每个过程的完整祖先。现在我们使用上面的“家庭”转换为您的流程图。

```
Your desired XML - annotated with the families. You can see how this works

<root>
    <seq>
        <mod1/> // the ancestor
        <flow>
            <seq> // family B - straight through.
                <mod4/>
                <mod7/>
            </seq>
            <seq> 
                <flow>
                    <seq>
                        <flow> // close family D
                            <mod4/>
                            <mod3/>
                        </flow>
                        <mod6/> // child of D
                    </seq>
                    <seq>
                        <flow> // close family C
                            <mod4/>
                            <mod3/>
                            <mod2/>
                        </flow>
                        <mod5/> // child of C
                    </seq>
                </flow>
                <mod8/>
            </seq>
        </flow>
    </seq>
</root> 
```

这有帮助吗，还是我完全不合时宜？

编辑：关于“中间关闭流程”的主题，以下想法：

如果一个家庭与另一个家庭有相同的（孙）子女，并且他们有相同的（祖）父母，那么他们的流量可以在该级别合并。要发现这一点，您需要为每个家庭保留一份“直系血统”列表，并且您需要为每个家庭反复搜索此列表，以查找同时存在普通（祖）父母和普通（孙）子女的情况。以一般方式解决这个问题需要比我今晚投入更多的精力，既然你已经表示你已经接近解决方案，我将把它留在这里......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-29T15:05:18.137

最后，我找到了一个可以完成这项工作的算法。这是给所有试图帮助我的人的：

首先，我在草图 1 中从 DAG 构建了一个反向生成树。所以我从模块 7 和 8 开始，反向构建树，并在其中复制模块。

之后，我创建名为 FLOW 和 SEQUENCE 的虚拟节点并将它们引入树中，以便每个 MODULE 节点都是 SEQUENCE 节点的子节点。跨越分支是 SEQUENCE 节点，它们是 FLOW 节点的子节点。我认为这一步足够直观，但重要的想法是了解我们需要虚拟节点，以便我们可以关闭 FLOW 节点，这些节点是从一个节点拆分为多个节点的节点。

之后，我首先检查树的深度，对于每个模块（我们将其称为驱动程序），我将其子代与驱动程序兄弟姐妹的子代进行比较。如果它们不匹配，我将继续与驱动程序的兄弟姐妹的孙子一起向下，因此，从驱动程序的兄弟姐妹中出来的所有分支都必须通过与驱动程序相同的节点。从图形上看，这意味着在某些时候，两个节点都需要完全相同的模块。

如果它们匹配，我会从重合节点向下清理合并的分支，这意味着我将它们从父节点中切断。从那里向上，它与驱动程序 SEQUENCE 节点一起进入一个新的 SEQUENCE 节点，进入同一个 FLOW 节点。

在遍历整个树之后，只要进行了合并，我们就会再次遍历树，这一次关系更大。这意味着我们不是比较司机的孩子，而是比较司机的好孩子。

最后一步显然是再次恢复树。

由于这些虚拟节点的编程所暗示的复杂性，我忽略了一些概念。主要是因为一旦引入虚拟节点，所有的父子兄弟关系都会丢失。但我希望大体的想法已经被理解。

# c# - C# ArrayList.Add 方法将 Ref 添加到项目？

> ID：15640643
> 
> 赞同：1
> 
> 时间：2013-03-26T15:14:45.790
> 
> 标签：c#, arraylist, pass-by-reference

0假设我创建了一个 ArrayList 并添加了两个字符串：

```
string item1 = string.Empty;
string item2 = string.Empty;

ArrayList someList = new ArrayList();
someList.Add(item1);
someList.Add(item2);

someFunc(someList); 
```

然后我将 someList 传递给一个方法。该方法对 item1 和 item2 执行一些操作并返回，如下所示：

```
public void someFunc(ArrayList parameters)
{
    parameters[0] = "Monkeys";
    parameters[1] = "More Monkeys";
} 
```

我希望当 someFunc 返回 item1 等于“Monkeys”并且 item2 等于“More Monkeys”时，因为 someList 分别在索引 0 和 1 中包含对 item1 和 item2 的引用。但是，我看到的是 item1 等于“Monkeys”，而 item2 等于“”。

为什么？如果不通过 ref 单独传递每个项目，我将如何执行此壮举？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:25:52.290

您的代码根本不会按照您的期望进行。`item1`您的变量`item2`不会通过重新分配到列表来修改。您不能将对***变量****的引用***添加到一个`ArrayList`（或者最好是[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)现代 .NET 世界中的一个）。您可以简单地添加值本身（可以是对***object****的引用***）。当您覆盖最初存储在列表中的值时，它不会影响先前的变量。****

 ****如果您需要更新列表内部以反映外部变量，您可能需要不同的抽象。例如，您将变量*设置为类的属性*，然后维护该类的列表。然后，您可以通过更改属性来改变类，而不是覆盖列表的内容。[Niyoko Yuliawan 的回答](https://stackoverflow.com/a/15640949/414076)中演示了这种技术，所以我不会重新展示它。

[提到的另一种技术](https://stackoverflow.com/a/15640929/414076)是将值读回变量中。如果列表具有相同数量的相同顺序的值，这是可行的。但是，我应该注意，如果您将多个值添加到列表中，将它们传递给方法，更改列表中的值，然后将这些值重新读取到变量中，*您可能不需要列表，您需要一个类.* 如果`item1`and`item2`真的*是* `firstName`and `lastName`，例如，您不想要`ArrayList list`（或者，最好`List<string> list`是 ），那么您真的想要`Person person`具有`string FirstName`and`string LastName`属性。

所以如果你有

```
public void SomeFunc(ArrayList list)
{
     list[0] = "Sam";
     list[1] = "Smith";
} 
```

您可能应该考虑改为定义一个类，然后使用该类。

```
public class Person 
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

// elsewhere in your code...

public void SomeFunc(Person person)
{
     person.FirstName = "Sam";
     person.LastName = "Smith";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:26:59.100

你不能那样做。但是，您可以这样做：

```
class Program
{
    class SomeClass
    {
        public string Content { get; set; }
    }

    static void Main(string[] args)
    {
        SomeClass a, b;
        a = new SomeClass { Content = "" };
        b = new SomeClass { Content = "" };
        ArrayList al = new ArrayList();
        al.Add(a);
        al.Add(b);

        SomeFunction(al);

        Console.WriteLine(a.Content);
        Console.WriteLine(b.Content);
        Console.ReadLine();
    }

    public static void SomeFunction(ArrayList param)
    {
        ((SomeClass)param[0]).Content = "aa";
        ((SomeClass)param[1]).Content = "bb";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:26:23.133

为了得到你想要的，你必须从你的读回值`ArrayList`：

```
string item1 = string.Empty;
string item2 = string.Empty;

ArrayList someList = new ArrayList();
someList.Add(item1);
someList.Add(item2);

someFunc(someList);

item1 = (string)someList[0];
item2 = (string)someList[1]; 
```

顺便说一句，没有太多情况下`ArrayList`是更好的选择`List<T>`，在这种情况下，`List<string>`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T15:31:42.003

如果不从数组中读取它们，你就无法做到这一点，这里有一个 LinqPad 示例来向你展示输出。如您所见，数组的值已更改，但您的原始变量没有。

```
 void Main()
{
string item1 = "test1";
string item2 = "test2";

ArrayList someList = new ArrayList();
someList.Add(item1);
someList.Add(item2);

item1.Dump();
item2.Dump();

someFunc(someList);

item1.Dump();
item2.Dump();

someList.Dump();
}

public void someFunc(ArrayList parameters)
{
    parameters[0] = "Monkeys";
    parameters[1] = "More Monkeys";
} 
```

使用“真正的”引用类型包装器有效

```
public class StringWrapper
{
    public string value;
}

void Main()
{
StringWrapper item1 = new StringWrapper() {value = "test1" };
StringWrapper item2 = new StringWrapper() {value = "test2" };

List<StringWrapper> someList = new List<StringWrapper>();
someList.Add(item1);
someList.Add(item2);

item1.Dump();
item2.Dump();

someFunc(someList);

item1.Dump();
item2.Dump();

someList.Dump();
}

public void someFunc(List<StringWrapper> parameters)
{
    parameters[0].value = "Monkeys";
    parameters[1].value = "More Monkeys";
} 
```****

# math - 计算两个对象在开始时具有设定位置时应在何处相遇

> ID：15640644
> 
> 赞同：0
> 
> 时间：2013-03-26T15:14:46.013
> 
> 标签：math

![A、B、C 点](../Images/60a856aebb2db6f0e471659eb7088e7b.png)

我想要做的是，如果我将两个对象 [A 和 B] 放在某些位置，我怎样才能找到 C 应该在哪里？速度不一样。对象 A 的速度为 30 m/s，对象 B 的速度为 20 m/s。

在图片中，我画出速度是相同的。不过，它应该让您大致了解我正在尝试做的事情。

我一直在搞砸这个，但我什至不知道从哪里开始。

提前感谢所有回复的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:27:30.943

首先，写出两个方程来表示每个点在时间 t 的 x 位置。

```
xpos_a(t) = original_xpos_a + xvelocity_a * t
xpos_b(t) = original_xpos_b + xvelocity_b * t 
```

当两点碰撞时，它们的 x 位置将相等。设置 xpos_a 等于 xpos_b 并求解 t。

```
original_xpos_a + xvelocity_a * t = original_xpos_b + xvelocity_b * t
xvelocity_a * t - xvelocity_b * t = original_xpos_b - original_xpos_a
t * (xvelocity_a - xvelocity_b) = original_xpos_b - original_xpos_a
t = (original_xpos_b - original_xpos_a) / (xvelocity_a - xvelocity_b) 
```

当您求解 t 时，有三种可能的结果：

*   两个点具有相同的原始位置和速度。`t = 0/0`; 碰撞随时可能发生。
*   这些点具有相同的速度但不同的原始位置。`t = [some nonzero number]/0`; 碰撞永远不会发生。
*   这些点具有不同的速度和不同的原始位置。`t = some real number`. 如果点确实发生碰撞，则碰撞只能在此时发生。

对 Y（和 Z，如果问题是三维的）执行相同的步骤。比较每个维度的 t 值。有四种可能的结果：

*   任何 t 值都是“永远不会发生碰撞”。碰撞永远不会发生。
*   两个或多个 t 值是不相等的实数。碰撞永远不会发生。
*   所有 t 值都是“碰撞随时可能发生”。这些点在其轨迹上的每个点上都不断地发生碰撞。
*   所有为实数的 t 值彼此相等。那时就会发生碰撞。（如果该时间为负数，则碰撞发生在您开始模拟之前；您可能希望也可能不希望将此视为“永远不会发生碰撞”）

如果最终归入最终类别，则将碰撞时间插入 xpos_a、ypos_a、zpos_a 函数以获取碰撞的空间坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:34:55.963

给定点 A 和 B，以及向量 C（ A 的[速度](http://en.wikipedia.org/wiki/Equations_of_motion#Kinematic_quantities)）和 D（B 的速度）。

```
A = (x1, y1) >start point of A
B = (x2, y2) >start point of B
C = (q1, w1) >constant velocity of A
D = (q2, w2) >constant velocity of B 
```

注意：x1、y1、x2、y2、q1、q2、w1、w2 都是常数

编辑：鉴于 A & C 和 b& D 不是共线的，请关注作品（如果它们确实发生碰撞，只需找出碰撞时间，正如 Kevin 指出的那样）

对它们进行线性化（找不到好的参考）：

```
EQ1 => (x-x1)(w1/q1)=(y-y1) >> (x-x1)(w1/q1) + y1 = y <br>
EQ2 => (x-x2)(w2/q2)=(y-y2) >> (x-x2)(w2/q2) + y2 = y <br>

EQ1 => (w1/q1) * x + y1 - x1(w1/q1) = y
         m1    * x +(     b1      ) = y

EQ2 => (w2/q2) * x + y2 - x2(w2/q2) = y
         m2    * x +(     b2      ) = y 
```

求解 EQ1 和 EQ2 得到`x`和`y`

```
x = (b2 - b1)/(m1 - m2)
y = m1 * x + b1    OR    m2 * x + b2 
```

`(x,y)`后面提到的^

求解`t1`或`t2`

```
t1 = (x-x1) / q1
t2 = (x-x2) / q2 
```

检查`y`s 的t1 和 t2 是否为真

```
t1 ?= (y-y1) / w1
t2 ?= (y-y2) / w2 
```

如果它们是相同的，那么是的，它们会发生碰撞，在`(x,y)`

注意：由于四舍五入误差，除非事先完全计算好一切，否则很可能不会发生碰撞

# c# - 在 C# 中发现 XML 子节点

> ID：15640647
> 
> 赞同：1
> 
> 时间：2013-03-26T15:14:55.093
> 
> 标签：c#, xml, xml-parsing

我需要使用具有公共父节点但具有不同子节点的 XML。一旦我得到它，我需要获取子节点的标签名称并将这些名称用作标题。在以下示例中，所有传入的 XML 将按如下方式包装：

```
<customers>
    <customer>
       ...varying child nodes that do not have child nodes themselves
    </customer>
</customers> 
```

我发现这有效：

```
List<string> headerList = new List<string>();
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(someXML);

XmlNodeList xnl = xmlDoc.SelectNodes("customers/customer");

foreach (XmlNode xn in xnl)
{
    for (int x = 0; x < xn.ChildNodes.Count; x++)
    {
        headerList.Add(xn.ChildNodes[x].Name.ToString());
    }
} 
```

有一个更好的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:19:09.453

这应该可以解决问题；

```
XDocument doc = XDocument.Load(someXML);
var headerList = doc.Descendants("customer").Elements().Select(x => x.Name); 
```

不一定“更好”，但我想它更简洁一些。

# android - 在指定时间改变亮度 - 一天两次

> ID：15640654
> 
> 赞同：0
> 
> 时间：2013-03-26T15:15:06.880
> 
> 标签：android, alarmmanager, brightness

我每天都有一组指定的小时数，当应用程序的亮度应该更改为**24/7 清醒**的应用程序时。它每天发生两次。

我想要实现的是找到解决该问题的最**经济**的方法。

我应该使用`AlarmManager`还是有更好的解决方案？

`Activity`总是醒着……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:16:50.970

如果您的应用在唤醒时未显示任何 UI，请使用`AlarmManager`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T08:04:17.567

最后，我决定使用`AlarmManager`with`BroadcastReceiver`设置值`SharedPreferences`，然后在 Activity 中使用`Handler`它来检查该值。

# jquery - 更改背景颜色 div 之前

> ID：15640662
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:15:22.503
> 
> 标签：jquery, css

当我单击复选框时，我需要更改 div“#cont-commentarios”的背景颜色。这将在一个循环中起作用，所以我需要使用“this”。在问这里之前我已经尝试了很多。按照此处的代码以获得更好的视图：

```
<div id="cont-comentario" style="margin-bottom: 10px; background:#eee; padding: 10px;">
    <p>
        <label>
            <input type="checkbox" id="atualizaComentario"/> Ativo
        </label>
    </p>
</div> 
```

[http://jsfiddle.net/9pMKy/](http://jsfiddle.net/9pMKy/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:18:11.177

你很亲近

```
$(function(){
    $('#atualizaComentario').click(function(){
        $(this).parents('div#cont-comentario').css({backgroundColor:'green'});
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T15:18:39.297

您可以使用它[`.closest()`](http://api.jquery.com/closest/)来定位您的 div 祖先，如下所示：

```
$(function(){
    $('input#atualizaComentario').click(function(){
        $(this).closest('div').css('background-color','green');
    });
}); 
```

见[**工作小提琴**](http://jsfiddle.net/gnel/9pMKy/1/)

# php - 从其他页面自动点击输入

> ID：15640664
> 
> 赞同：0
> 
> 时间：2013-03-26T15:15:23.667
> 
> 标签：php, javascript, jquery

Hy 例如，如果在页面 Y（不是我的网站）页面内容下一个按钮：

```
<input class="xxx" type="submit" id="xxx_play" value="Play"> 
```

我想在 php 或 jquery 的帮助下在 x 秒后自动输入这个输入，这可能吗？

# java - 不幸的是，应用名称已停止

> ID：15640665
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:15:25.113
> 
> 标签：java, android

我是 Java 新手，我正在尝试使用带有插件的 eclipse 为 Android 编写一个简单的应用程序。这是代码：

```
package com.example.pushthebutton;

import java.util.Timer;
import java.util.TimerTask;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {
    int counter = 30;
    TextView label;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        int delay = 0; 
        int period = 1000;
        Timer timer = new Timer();
        label = (TextView) findViewById(R.id.textView1);
        timer.scheduleAtFixedRate(new TimerTask() {
                public void run() {
                    label.setText(String.valueOf("Time left: "));
                    counter--;
                }
            }, delay, period);
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

我在模拟器中运行它后，它说：“不幸的是，应用程序名称已停止。” 日志猫：

```
03-26 15:05:47.499: E/AndroidRuntime(1269): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
03-26 15:05:47.499: E/AndroidRuntime(1269):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4746)
03-26 15:05:47.499: E/AndroidRuntime(1269):     at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:823)
03-26 15:05:47.499: E/AndroidRuntime(1269):     at android.view.View.requestLayout(View.java:15473)
03-26 15:05:47.499: E/AndroidRuntime(1269):     at android.view.View.requestLayout(View.java:15473)
03-26 15:05:47.499: E/AndroidRuntime(1269):     at android.view.View.requestLayout(View.java:15473)
03-26 15:05:47.499: E/AndroidRuntime(1269):     at android.view.View.requestLayout(View.java:15473)
03-26 15:05:47.499: E/AndroidRuntime(1269):     at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:318)
03-26 15:05:47.499: E/AndroidRuntime(1269):     at android.view.View.requestLayout(View.java:15473)
03-26 15:05:47.499: E/AndroidRuntime(1269):     at android.widget.TextView.checkForRelayout(TextView.java:6452)
03-26 15:05:47.499: E/AndroidRuntime(1269):     at android.widget.TextView.setText(TextView.java:3696)
03-26 15:05:47.499: E/AndroidRuntime(1269):     at android.widget.TextView.setText(TextView.java:3554)
03-26 15:05:47.499: E/AndroidRuntime(1269):     at android.widget.TextView.setText(TextView.java:3529)
03-26 15:05:47.499: E/AndroidRuntime(1269):     at com.example.pushthebutton.MainActivity$1.run(MainActivity.java:24)
03-26 15:05:47.499: E/AndroidRuntime(1269):     at java.util.Timer$TimerImpl.run(Timer.java:284)
03-26 15:05:47.659: E/StrictMode(628): null 
```

我是 Java 新手。我不知道它可能是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:17:21.163

您不能从不同于 UI 线程的线程更新每个视图：

以这种方式更改您的代码：

```
timer.scheduleAtFixedRate(new TimerTask() {
            public void run() {

                runOnUiThread(new Runnable()
                    public void run() {
                        label.setText(String.valueOf("Time left: "));
                        counter--;
                        }
                  ));

            }
        }, delay, period);
} 
```

通过这种方式，您要求 Android 执行`setText`调用，在`UI Thread`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:20:08.343

尝试这个：

```
 timer.scheduleAtFixedRate(new TimerTask() {
            public void run() {
                runOnUiThread(new Runnable() {
                @Override
        public void run() {
        label.setText(String.valueOf("Time left: "));
                    counter--;
        }
            }
          }
        }, delay, period); 
```

您正在从非 UI 线程（即计时器）修改 UI 线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:17:29.490

> 异常 只有创建视图层次结构的原始线程才能接触其视图。

你不能这样做。

```
label.setText(String.valueOf("Time left: ")); 
```

这样做。

```
runOnUiThread(new Runnable() {
   public void run() {
      //Update UI Here
   }
}); 
```

或处理程序来执行此操作。

## 例子

```
void startHeavyDutyStuff() {

  // Here is the heavy-duty thread
  Thread t = new Thread() {

      public void run() {
          while (true) {

              mResults = doSomethingExpensive();

              //Send update to the main thread
              messageHandler.sendMessage(Message.obtain(messageHandler, mResults)); 
          }

      }
  };
  t.start();
}

// Instantiating the Handler associated with the main thread.
private Handler messageHandler = new Handler() {

      @Override
      public void handleMessage(Message msg) {  
          switch(msg.what) {
              //handle update
              //.....
          }
      }

  };
} 
```

# javascript - 将 json 字符串解析为 javascript 对象

> ID：15640668
> 
> 赞同：0
> 
> 时间：2013-03-26T15:15:32.793
> 
> 标签：javascript, arrays, json

我正在使用 Firefox 19.0.2。我收到一个大小不断变化的 JSON 字符串（输入到 JavaScript 函数中），

有时是：

```
var jsonstring = {"CA":"CA","NY":"NY","TX":"TX"} 
```

有时是：

```
var jsonstring = {"Hello":"Hello","Goodbye":"Goodbye"} 
```

我想创建一个这样的结果数组（在第一个示例的情况下）：

```
data[0].value = "CA"
data[0].text = "CA"

data[1].value = "NY"
data[1].text = "NY"

data[2].value = "TX"
data[2].text = "TX" 
```

我怎么做？

我在这里阅读了数十篇早期文章并尝试了几个`for`循环，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:18:41.657

您可以使用`JSON.parse`转换为对象（在您的示例中，您已经有一个对象）：

```
var obj= JSON.parse('{"CA":"CA","NY":"NY","TX":"TX"}') 
```

请记住，您不能依赖对象中属性的顺序，因此您无法在 for 循环中完成上述操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:23:35.893

`JSON.parse`使用从 JSON 中获取对象后的转换如下所示：

```
obj = {
  CA: 'CA',
  LA: 'LA'
};

arr = [];

for (var key in obj) {
  if(!obj.hasOwnProperty(key))
    continue;
  arr.push({value: key, text: obj[key]});
}
// Output
[{ value: "CA", text: "CA" }, { value: "LA", text: "LA" }] 
```

# sql - 根据存在更新或插入元素到 xml 列中

> ID：15640669
> 
> 赞同：1
> 
> 时间：2013-03-26T15:15:36.853
> 
> 标签：sql, xml, sql-server-2008, xpath, sql-update

我正在尝试编写一个更新语句来检查 XML 列中是否存在元素，如果存在则更新它的值。如果不是，它将将该值作为新元素插入。

就像是：

```
UPDATE Table
SET xmlCol = 
case
when xmlCol.exist('element') = 1
then xmlCol.modify('replace value of blah')
else xmlCol.modify('insert blah')
end
where whatever 
```

我会以错误的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:08:35.603

xml 数据类型的 modify() 方法只能在 UPDATE 语句的 SET 子句中使用。

在两个语句中执行它可能是最简单的。

```
UPDATE Table 
SET xmlCol.modify('replace value of /blah')
WHERE xmlCol.exist('/blah') = 1;

UPDATE Table
SET xmlCol.modify('insert /blah')
WHERE xmlCol.exist('/blah') = 0; 
```

# matlab - Matlab 标题格式

> ID：15640673
> 
> 赞同：1
> 
> 时间：2013-03-26T15:15:49.593
> 
> 标签：matlab, formatting

对于 matlab 脚本，当我为绘图创建标题时，我使用以下命令：

```
title(['Input ', x, '; Output', y]); 
```

但是，每当我在上面的字符串上使用“，”时，这都会返回一个换行符。所以它看起来像下面这样：

```
Input
xValue
Output
yValue 
```

任何人都知道如何使这些字符串出现在同一行？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:19:47.067

从显示的输出中，我推断它`x`是`y`单元格值。如果是这样，你可以使用类似的东西：

```
title(strcat('Input=>', num2str(cell2mat(x)), '; Output=>', num2str(cell2mat(y)))) 
```

`x={1}`和的结果如下`y={2}`：

![在此处输入图像描述](../Images/042bbe195d3388a1b8bcbccc582be295.png)

像最初那样得到输出的原因是，因为`x`和`y`是单元格，MATLAB 自动将您的语句转换为

```
title([{'Input '}, x, {'; Output'}, y]); 
```

意味着您将单元格数组传递给标题；因此，它在单独的行中显示标题的每个部分。

现在，如果另一方面，`x`并​​且`y`是简单的数字，请使用：

```
title(strcat('Input=>', num2str(x), '; Output=>', num2str(y))) 
```

# android - 将数据发送到在后台运行的活动

> ID：15640676
> 
> 赞同：4
> 
> 时间：2013-03-26T15:15:52.530
> 
> 标签：android, android-activity

在活动之间传递数据时遇到问题。ListActivity 正在收集数据，当按下后退按钮时返回 MainActivity，然后想通过 onResume 方法获取该数据，但我什么也没得到。

如何解决这个问题？

ListActivity.java

```
 @Override
public void finish() {
    i = new Intent(ArrayListActivity.this, MainActivity.class);
    i.putParcelableArrayListExtra(Constants.TAG_SELECTED_PRODUCT_LIST, selected_list);
    super.finish();
} 
```

MainActivity.java

```
 @Override
protected void onResume() {
    super.onResume();

    Bundle extras = getIntent().getExtras().getBundle(Constants.TAG_SELECTED_PRODUCT_LIST);
    if(extras != null) {
        selected_list = extras.getParcelableArrayList(Constants.TAG_SELECTED_PRODUCT_LIST);

        myListView.setAdapter(new ProductAdapter(MainActivity.this,
                    R.layout.array_lisviewt_item_row, selected_list));
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:18:42.400

您可能希望通过该[`startActivityForResult(...)`](https://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int,%20android.os.Bundle%29)方法从第一个活动开始您的第二个活动。

此方法允许您将已启动活动的结果传输回其正在启动的活动。

从文档中：

> 启动一项您希望在完成后获得结果的活动。当此活动退出时，您的[onActivityResult()](https://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)方法将使用给定的 requestCode 调用。使用否定的 requestCode 与调用 startActivity(Intent) 相同（该活动不作为子活动启动）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:24:04.320

您需要使用[startActivityForResult()](https://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int,%20android.os.Bundle%29)启动活动并覆盖[onActivityResult()](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)以处理从第二个活动返回的数据。

查看Android 开发者网站上的这篇[文章以获取更多信息。](http://developer.android.com/training/basics/intents/result.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T15:41:22.293

也许你应该

*   `ListActivity`用startActivityForResult [()](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int,%20android.os.Bundle%29)从你的`MainActivity`.
*   完成对 的处理后`ListActivity`，调用[setResult()](http://developer.android.com/reference/android/app/Activity.html#setResult%28int,%20android.content.Intent%29)设置数据，然后调用[finish()](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)。

这将使您回到以前的`MainActivity`. 那么如何检索您的数据集`ListActivity`？

*   在`MainActivity`中，覆盖[onActivityResult()](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)。

[在开始活动和获取结果](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)中有对这种机制的简要说明。

# c# - WCF POST JSON HttpWebRequest 到一个安静的服务不能正常工作

> ID：15640680
> 
> 赞同：1
> 
> 时间：2013-03-26T15:16:00.317
> 
> 标签：c#, json, rest, httpwebrequest

我正在尝试对 RESTful 服务进行 WCF POST 调用，但我提供的对象似乎没有被服务器正确反序列化并设置为 null。

WCF 服务：

```
[OperationContract]
[WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat =      WebMessageFormat.Json,
BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "BuildItems")]
void Upgrade(BuildItem item); 
```

客户端代码：

```
public void Upgrade(BuildItem item)
{
    string uri = string.Format(@"http://localhost:9001/AFMServer" + "/BuildItems");
    var request = HttpWebRequest.Create(uri);
    request.Method = "POST";
    request.ContentType = "application/json; charset=utf-8";
    string json = JsonConvert.SerializeObject(item);

    using (var streamWriter = new StreamWriter(request.GetRequestStream()))
    {
        streamWriter.Write(json);
        streamWriter.Close();
    }
    request.GetResponse();
} 
```

该服务被称为属性服务器端，但 BuildItem 为空。

知道我做错了什么吗？

谢谢

编辑 - 发现问题。由于我使用“Wrapped”需要用参数名称包装对象：

{"item":{"CompletionDateTime":"/Date(-62135596800000+0000)/","Id":0,"ItemId":7,"ItemType":0}}

高温高压

# json - AS3 和 JSON：错误 1061

> ID：15640683
> 
> 赞同：2
> 
> 时间：2013-03-26T15:16:07.303
> 
> 标签：json, actionscript-3

我花了几个小时来解决一个与 FLASH 中的 JSON 编码相关的可能愚蠢的问题。

我尝试做一些非常简单的事情：我制作了一个对象，我希望它在 JSON 中序列化。

但Flash告诉我

```
> 1061: Call to a possibly undefined method encode through a reference with static type Class. 
```

这是我的代码。[这是本教程的](http://kirill-poletaev.blogspot.fr/2011/02/working-with-json-and-as3-part-3.html)副本。其中有问题（我猜不是在教程中，在我的代码中），但我不知道可以是什么：

```
import com.adobe.serialization.json.JSON;

var member1:Object = new Object();
member1.firstName = "John"
member1.lastName = "Parker"
member1.age = "32"
member1.country = "Canada"
member1.job = "Programmer"

var member2:Object = new Object();
member2.firstName = "Peter"
member2.lastName = "Anderson"
member2.age = "30"
member2.country = "USA"
member2.job = "System administrator"

var myData:Object = {staff:[member1, member2]};

var myJson:String = JSON.encode(myData);

trace(myJson); 
```

在行 var myJson:String = JSON.encode(myData); flash 产生上面提到的错误。让我准确地说 JSON 类在它必须在的地方（my_project/com/adobe/serialization/json/JSON.as ）并且我可以在其中找到编码静态方法。

有人能告诉我我的错误在哪里吗？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T15:20:23.460

`JSON.parse`并且`JSON.stringfy`是您在 Flash Player 11+ 中寻找的方法。

`JSON.encode`并且`JSON.decode`是 Adob​​e AS3 库的一部分，但由于 Flash Player 具有本机 JSON 解析器，现在您不需要该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:27:04.337

好的。像往常一样，我在发布我的问题几秒钟后找到了答案。

JSON in 现在直接合并到 As3 中，因此无需使用 com.adobe.serialization.json.JSON

所以我删除了导入并替换：

```
var myJson:String = JSON.encode(myData); 
```

经过

```
var myJson:String = JSON.stringify(myData); 
```

它有效。

# mysql - SQL 时间超过

> ID：15640689
> 
> 赞同：0
> 
> 时间：2013-03-26T15:16:21.567
> 
> 标签：mysql, sql, if-statement, time

我目前有一个输出等待时间的系统，考虑到他们的到达时间和当前时间；（当前时间 - 到达时间）。我将如何编写代码以便；

```
if the waiting_time exceeds 3 hours then alert "patient must be seen next!" 
```

这是我到目前为止计算waiting_time的代码。

```
<?php

$conn = mysqli_connect("localhost","root","") or die ("No connection");
mysqli_select_db($conn, "a&e") or die('Could not select database.');

$query = "SELECT PatientID, Forename, Surname, Gender, Illness, Priority, Arrival_time, TIME_FORMAT(ABS(TIMEDIFF(CURTIME(), Arrival_time)),'%H hours') as Waiting_Time FROM Patient";
$result = mysqli_query($conn, $query) or die("Invalid query");

echo "<table border='1'>
<tr>
<th>PatientID</th>
<th>Forename</th>
<th>Surname</th>
<th>Gender</th>
<th>Illness</th>
<th>Priority</th>
<th>Waiting Time</th>
</tr>";

while ($row = $result->fetch_object()){

 echo "<tr>
  <td>" . $row->PatientID . "</td>
  <td>" . $row->Forename . "</td>
  <td>" . $row->Surname . "</td>
  <td>" . $row->Gender . "</td>
  <td>" . $row->Illness . "</td>
  <td>" . $row->Priority . "</td>
  <td>" . $row->Waiting_Time . "</td>
  </tr>";

}

echo "</table>";
mysqli_close($conn);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:43:38.057

```
$query = "SELECT PatientID, Forename, Surname, Gender, Illness, Priority, Arrival_time,
          TIME_FORMAT(ABS(TIMEDIFF(CURTIME(), Arrival_time)),'%H hours') as Waiting_Time 
          FROM Patient
          ORDER BY TIMEDIFF(CURTIME(), Arrival_time) DESC"; 
```

然后，您的结果将按照最长等待时间排序。

```
<?php

while ($row = $result->fetch_object()): ?>

  <tr>
    <td><?=$row->PatientID?></td>
    <td><?=$row->Forename?></td>
    <td><?=$row->Surname?></td>
    <td><?=$row->Gender?></td>
    <td><?=$row->Illness?></td>
    <td><?=$row->Priority?></td>
    <td><?=$row->Waiting_Time?>
        <? if ($row->Waiting_Time >= 3): ?>
            <strong>Patient must be seen!</strong>
        <? endif; ?>
    </td>
  </tr>

<? endwhile; ?> 
```

# iphone - 同时记录叠加 AVFoundation iOS

> ID：15640694
> 
> 赞同：18
> 
> 时间：2013-03-26T15:16:40.753
> 
> 标签：iphone, ios, avfoundation

我现在已经完全设置了使用`AVFoundation`框架录制视频的能力，这一切都很好，但现在我希望在录制过程中添加一个叠加层（在`AVCaptureVideoPreviewLayer`图层上也可见）

我可以将此叠加`UIView`对象添加到 VideoPreviewLayer，但我正在努力如何在录制的视频上获得相同的视图。`UIView`这可能包含从`UILabel`s 到`UIImageView`s 的任何内容。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-05T12:53:28.497

我不确定这是否是您正在寻找的东西，但我想您可以使用 Brad Larson 的 GPU 库，有一个名为 GPUImageElement 的类可让您添加叠加层和视图。请查看示例，尤其是名为 Filter 展示的示例并滚动到一个叫做 UIElement 的东西。

这是一些示例代码：

```
 else if (filterType == GPUIMAGE_UIELEMENT)
        {
            GPUImageAlphaBlendFilter *blendFilter = [[GPUImageAlphaBlendFilter alloc] init];
            blendFilter.mix = 1.0;

            NSDate *startTime = [NSDate date];

            UILabel *timeLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, 240.0f, 320.0f)];
            timeLabel.font = [UIFont systemFontOfSize:17.0f];
            timeLabel.text = @"Time: 0.0 s";
            timeLabel.textAlignment = UITextAlignmentCenter;
            timeLabel.backgroundColor = [UIColor clearColor];
            timeLabel.textColor = [UIColor whiteColor];

            uiElementInput = [[GPUImageUIElement alloc] initWithView:timeLabel];

            [filter addTarget:blendFilter];
            [uiElementInput addTarget:blendFilter];

            [blendFilter addTarget:filterView];

            __unsafe_unretained GPUImageUIElement *weakUIElementInput = uiElementInput;

            [filter setFrameProcessingCompletionBlock:^(GPUImageOutput * filter, CMTime frameTime){
                timeLabel.text = [NSString stringWithFormat:@"Time: %f s", -[startTime timeIntervalSinceNow]];
                [weakUIElementInput update];
            }];
        } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-02T05:42:30.530

您想要覆盖`UIView`'s，但如果您不介意使用s，您可以在使用'属性`CALayer`导出后添加覆盖。它有一个属性，可以让你在输出中添加动画，但我认为如果你的叠加层的外观不能用. 您的显示标题示例*可能*是可能的，尽管我想像当前时间计数器这样简单的东西不会。如果您可以接受此限制，WWDC 2010 代码示例“AVEditDemo”是一个很好的起点。`AVAssetExportSession``AVVideoComposition``AVVideoCompositionCoreAnimationTool *animationTool``CALayer``CABasicAnimation`

 *如果您需要更多控制，您可以手动将叠加层渲染`UIView`到捕获帧上，使用`[view.layer renderInContext:contextToThenRenderToFrame]`然后将这些帧写入文件使用`AVAssetWriter`（一旦将帧捕获到内存，您就不能再使用了`AVCaptureMovieFileOutput`）。

**警告**：您正在捕获的帧可能不会以统一的速率到达，并且取决于环境照明甚至系统负载。如果您的叠加层以比捕获视频更高的速率变化，那么您将需要在第二种解决方案中重复帧。这是`AVVideoComposition`在第一个解决方案中为您处理的。

PS 解决方案二很繁琐，但不详细说明，iOS7 似乎让这变得容易了很多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T14:03:51.080

[您可以在编辑](https://developer.apple.com/library/ios/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/03_Editing.html#//apple_ref/doc/uid/TP40010188-CH8-SW1)部分 的 AVFoundation Programming Guide 中找到它

有一个部分处理图像的叠加。我将尝试放置一个示例代码/项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T01:44:33.270

要找出您的问题，在 raywenderlich 教程网站上有两个非常详细的解释。这是一个两部分的教程。

第一个在这里：[http ://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios](http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios)

第二个在这里： [http ://www.raywenderlich.com/30200/avfoundation-tutorial-adding-overlays-and-animations-to-videos](http://www.raywenderlich.com/30200/avfoundation-tutorial-adding-overlays-and-animations-to-videos)

祝你好运，希望这能帮到你！！*

# java - 冰淇淋三明治 - 全屏不工作

> ID：15640696
> 
> 赞同：0
> 
> 时间：2013-03-26T15:16:43.413
> 
> 标签：java, android, android-4.0-ice-cream-sandwich, android-fullscreen

我正在实施一个启动器。我想暂时禁用屏幕上的返回/主页/设置按钮。因此，我想将其设置为全屏。我可以在姜饼和蜂窝中做到这一点，效果很好，但在冰淇淋三明治中却不行。我试过下面的代码，都不管用。

```
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);

ActionBar actionBar = getActionBar();
actionBar.hide();

requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

我还在清单中将主题设置为全屏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:29:06.703

`android:theme="@android:style/Theme.NoTitleBar.Fullscreen">`在您的清单中使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:02:41.107

冰淇淋三明治支持您发布的代码。可能是您设备的问题。尝试相同的代码

requestWindowFeature(Window.FEATURE_NO_TITLE); getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

在您的 xml 中只有一个图像视图。尝试运行它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T15:23:00.393

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

我正在使用冰淇淋三明治，它对我来说很好用。您的应用程序中还有其他问题。

# label - Highstock：Yaxis最后一个水平标签值未显示

> ID：15640698
> 
> 赞同：0
> 
> 时间：2013-03-26T15:16:47.060
> 
> 标签：label, highstock

我有一个未显示最后一个 yAxis 水平线值的 highStock 图表。让我们看一下显示问题的图片：它显示了299、400、600，但最后一个没有显示

[http://s10.postimg.org/rlp7via7t/highstock.png](http://s10.postimg.org/rlp7via7t/highstock.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:20:17.033

您应该将 showLastLabel 设置为 true [http://api.highcharts.com/highstock#yAxis.showLastLabel](http://api.highcharts.com/highstock#yAxis.showLastLabel)

# linux - 我的 Bash 脚本工作不正常

> ID：15640702
> 
> 赞同：0
> 
> 时间：2013-03-26T15:16:57.660
> 
> 标签：linux, bash, ubuntu

我正在制作一个 bash 脚本，该脚本根据用户输入的内容显示成绩。但是，它返回错误的成绩，我不知道为什么。我在下面发布了代码。我也是 bash 脚本的新手。

```
#!/bin/bash

echo "Enter assignment mark (0 to 40): "
read assignment
echo "Enter Test1 mark (0 to 15): "
read test1
echo "Enter Test2 mark (1 to 15): "
read test2
echo "Enter Final Exam mark (1 to 30): "
read final

(( sum = ( $assignment / 40 * 40 ) + (  $test1 / 15 *15 ) + ( $test2 / 15 * 15 ) + ( $final / 30 * 30 ) ))

if [ $sum -ge "90" ] && [ $sum -le "100" ]
then
echo "Your final grade is an A+."
elif [ $sum -ge "85" ] && [ $sum -le "89" ]
then
echo "Your final grade is a A."
elif [ $sum -ge "80" ] && [ $sum -le "84" ]
then
echo "Your final grade is a A-."
elif [ $sum -ge "77" ] && [ $sum -le "79" ]
then
echo "Your final grade is a B+."
elif [ $sum -ge "73" ] && [ $sum -le "76" ]
then
echo "Your final grade is a B."
elif [ $sum -ge "70" ] && [ $sum -le "72" ]
then
echo "Your final grade is a B-."
elif [ $sum -ge "67" ] && [ $sum -le "69" ]
then
echo "Your final grade is a C+."
elif [ $sum -ge "63" ] && [ $sum -le "66" ]
then
echo "Your final grade is a C."
elif [ $sum -ge "60" ] && [ $sum -le "62" ]
then
echo "Your final grade is a C-."
elif [ $sum -ge "57" ] && [ $sum -le "59" ]
then
echo "Your final grade is a D+."
elif [ $sum -ge "53" ] && [ $sum -le "56" ]
then
echo "Your final grade is an D."
elif [ $sum -ge "50" ] && [ $sum -le "52" ]
then
echo "Your final grade is an D-."
elif [ $sum -le "49" ] 
then
echo "Your final grade is an F. Sorry!"
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:25:59.170

我不明白这一行：

```
(( sum = ( $assignment / 40 * 40 ) + (  $test1 / 15 *15 ) + ( $test2 / 15 * 15 ) + ( $final / 30 * 30 ) )) 
```

除以和乘以相同的数字似乎没有用。为什么不改成

```
(( sum =  $assignment + $test1 + $test2 + $final )) 
```

编辑：此代码有效。享受 ;-）

```
#!/bin/bash

echo "Enter assignment mark (0 to 40): "
read assignment
echo "Enter Test1 mark (0 to 15): "
read test1
echo "Enter Test2 mark (1 to 15): "
read test2
echo "Enter Final Exam mark (1 to 30): "
read final

sum=$(( assignment  +  test1  +  test2 + final  ))

if [[ $sum -ge 90 ]] && [[ $sum -le 100 ]]
then
echo Your final grade is an A+.
elif [[ $sum -ge 85 ]] && [[ $sum -le 89 ]]
then
echo Your final grade is a A.
elif [[ $sum -ge 80 ]] && [[ $sum -le 84 ]]
then
echo Your final grade is a A-.
elif [[ $sum -ge 77 ]] && [[ $sum -le 79 ]]
then
echo Your final grade is a B+.
elif [[ $sum -ge 73 ]] && [[ $sum -le 76 ]]
then
echo Your final grade is a B.
elif [[ $sum -ge 70 ]] && [[ $sum -le 72 ]]
then
echo Your final grade is a B-.
elif [[ $sum -ge 67 ]] && [[ $sum -le 69 ]]
then
echo Your final grade is a C+.
elif [[ $sum -ge 63 ]] && [[ $sum -le 66 ]]
then
echo Your final grade is a C.
elif [[ $sum -ge 60 ]] && [[ $sum -le 62 ]]
then
echo Your final grade is a C-.
elif [[ $sum -ge 57 ]] && [[ $sum -le 59 ]]
then
echo Your final grade is a D+.
elif [[ $sum -ge 53 ]] && [[ $sum -le 56 ]]
then
echo Your final grade is an D.
elif [[ $sum -ge 50 ]] && [[ $sum -le 52 ]]
then
echo Your final grade is an D-.
elif [[ $sum -le 49 ]] 
then
echo Your final grade is an F. Sorry!
fi 
```

# java - 未知的线程问题导致异步 Spring 控制器方法泄漏数据库连接

> ID：15640704
> 
> 赞同：1
> 
> 时间：2013-03-26T15:16:59.797
> 
> 标签：java, multithreading, spring, apache-commons-dbcp, jdbc-pool

我有一个异步 Spring MVC 控制器方法（它返回一个 DeferredResult），它调用一个 Spring 服务方法，该方法本身使用 entityManager 来从数据库中检索数据。

不知何故，**异步控制器方法会导致连接被泄露/放弃**。这是完整的堆栈跟踪：

```
 thread (controller) = http-bio-8080-exec-2
    org.apache.commons.dbcp.AbandonedTrace$AbandonedObjectException: DBCP object created 2013-03-26 15:54:42 by the following code was never closed:
        at org.apache.commons.dbcp.AbandonedTrace.setStackTrace(AbandonedTrace.java:139)
        at org.apache.commons.dbcp.AbandonedObjectPool.borrowObject(AbandonedObjectPool.java:81)
        at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)
        at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
        at org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider.getConnection(InjectedDataSourceConnectionProvider.java:70)
        at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:292)
        at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297)
        at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169)
        at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:67)
        at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:160)
        at org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1395)
        at org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:59)
        at org.springframework.orm.jpa.DefaultJpaDialect.beginTransaction(DefaultJpaDialect.java:71)
        at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:378)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:273)
        at org.springframework.transaction.aspectj.AbstractTransactionAspect.ajc$before$org_springframework_transaction_aspectj_AbstractTransactionAspect$1$2a73e96c(AbstractTransactionAspect.aj:63)
        at com.bignibou.service.MessageServiceImpl.findUnreadMessages(MessageServiceImpl.java:36)
        at com.bignibou.controller.MessageController.getMessages(MessageController.java:87)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:745)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:686)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:920)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:816)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:801)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
        at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:180)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(Charact
thread (service) = http-bio-8080-exec-2 
```

我确定控制器和服务方法在同一个线程中运行，因为我已经通过`Thread.currentThread().getName();`调用记录了它，在上述情况下，线程是**http-bio-8080-exec-2**。

我无法确定泄漏/放弃连接的原因......

有人可以帮忙吗？

**编辑 1**：这是相关的 Spring 配置：

```
<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
    <property name="driverClassName" value="${database.driverClassName}" />
    <property name="url" value="${database.url}" />
    <property name="username" value="${database.username}" />
    <property name="password" value="${database.password}" />
    <property name="testOnBorrow" value="true" />
    <property name="testOnReturn" value="true" />
    <property name="testWhileIdle" value="true" />
    <property name="timeBetweenEvictionRunsMillis" value="1800000" />
    <property name="numTestsPerEvictionRun" value="3" />
    <property name="minEvictableIdleTimeMillis" value="1800000" />
    <property name="validationQuery" value="SELECT 1" />
    <property name="maxActive" value="1" />
    <property name="logAbandoned" value="true" />
    <property name="removeAbandoned" value="true" />
    <property name="removeAbandonedTimeout" value="10" />
</bean>
<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>
<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager" />
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
    <property name="persistenceUnitName" value="persistenceUnit" />
    <property name="dataSource" ref="dataSource" />
</bean> 
```

**编辑 2**：

在 MessageServiceImpl 中：

```
@Override
    public List<Message> findUnreadMessages(long senderId, long recipientId) {
        System.err.println("thread (service) = " + Thread.currentThread().getName());
        Member sender = memberService.findMember(senderId);
        Member recipient = memberService.findMember(recipientId);
        return messageRepository.findByRecipientAndSenderAndMessageReadFalse(recipient, sender);
    } 
```

相关方面：

在服务中：

```
declare @type: MessageServiceImpl: @Transactional; 
```

在存储库 aj 中：

```
declare parents: MessageRepository extends JpaRepository<Message, Long>;
declare parents: MessageRepository extends JpaSpecificationExecutor<Message>;
declare @type: MessageRepository: @Repository; 
```

# gwt - 在 GWT 中使用 RequestFactory 的 FrontController

> ID：15640705
> 
> 赞同：0
> 
> 时间：2013-03-26T15:17:01.153
> 
> 标签：gwt, requestfactory, front-controller

我将 RequestFactory 与 GWT 一起使用。一切正常。我有一个指向我的 DAO 方法的 RequestContext 接口。

现在我想在调用 DAO 之前实现某种安全检查。我首先想到的是使用 FrontController 并将安全性集中在其中，但我不知道用 RequestFactory 来实现它。任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:56:51.670

如果要测试用户是否经过身份验证，可以在服务器端使用 servlet 过滤器，在`RequestTransport`客户端使用自定义过滤器。有关示例，请参阅[https://github.com/tbroyer/gwt-maven-archetypes](https://github.com/tbroyer/gwt-maven-archetypes)`guice-rf-activity`上的原型。

您还可以通过使用自定义[`ServiceLayerDecorator`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/web/bindery/requestfactory/server/ServiceLayerDecorator.html)和实现方法来检查方法级别，在用户未获得授权/身份验证时`invoke`调用（并在客户端处理）。我实现了这样一个东西，它根据服务方法或类的注释授权用户：[https ://gist.github.com/tbroyer/6091533](https://gist.github.com/tbroyer/6091533)`report()``onFailure`[`@RolesAllowed`](http://docs.oracle.com/javaee/6/api/javax/annotation/security/RolesAllowed.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:57:35.557

以下是我实施安全检查的方式：

在服务器端，我检查每个`RequestFactory`请求是否与先前登录的用户相关联。为此，`web.xml`文件（在 war/WEB-INF 目录中）必须具有 servlet 类的映射。这是文件中的条目`web.xml`：

```
<servlet>
  <servlet-name>requestFactoryServlet</servlet-name>
  <servlet-class>org.greatlogic.rfexample2.server.RFERequestFactoryServlet</servlet-class>
  <init-param>
    <param-name>symbolMapsDirectory</param-name>
    <param-value>WEB-INF/classes/symbolMaps/</param-value>
  </init-param>
</servlet>
<servlet-mapping>
  <servlet-name>requestFactoryServlet</servlet-name>
  <url-pattern>/gwtRequest</url-pattern>
</servlet-mapping> 
```

该类`RFERequestFactoryServlet`包含以下代码：

```
public class RFERequestFactoryServlet extends RequestFactoryServlet {

@Override
protected void doPost(final HttpServletRequest request, final HttpServletResponse response)
  throws IOException, ServletException {
  if (!userIsLoggedIn(request)) {
    response.sendError(HttpServletResponse.SC_UNAUTHORIZED);
  }
  else {
    super.doPost(request, response);
  }
}

private boolean userIsLoggedIn(final HttpServletRequest request) {
  boolean result = false;
  HttpSession session = request.getSession();
  if (session != null) {
    User user = (User)session.getAttribute("User");
    result = user != null;
  }
  return result;
}

} 
```

在客户端，我需要拦截每个`RequestFactory`响应以检查`SC_UNAUTHORIZED`错误。您必须告诉对象在调用`RequestFactory`中使用特定的，如下所示：`RequestTransport``RequestFactory#initialize`

```
MyRequestFactory requestFactory = GWT.create(MyRequestFactory.class);
requestFactory.initialize(eventBus, new RFERequestTransport()); 
```

我的`RFERequestTransport`班级扩展了`DefaultRequestTransport`班级：

```
public class RFERequestTransport extends DefaultRequestTransport {

private final class RFERequestCallback implements RequestCallback {

private RequestCallback _requestCallback;

private RFERequestCallback(final RequestCallback requestCallback) {
  _requestCallback = requestCallback;
}

@Override
public void onError(final Request request, final Throwable exception) {
  _requestCallback.onError(request, exception);
}

@Override
public void onResponseReceived(final Request request, final Response response) {
  if (response.getStatusCode() == Response.SC_UNAUTHORIZED) {
    // the login processing goes here
  }
  else {
    _requestCallback.onResponseReceived(request, response);
  }
}

} // end of the RFERequestCallback class

@Override
protected RequestCallback createRequestCallback(final TransportReceiver receiver) {
  return new RFERequestCallback(super.createRequestCallback(receiver));
}

} 
```

创建`RequestFactory`请求回调时，它会调用我的方法，该方法会创建我自己的`RequestCallback`. 如果用户已登录（由 servlet 确定），则它只执行正常`RequestFactory`处理；否则，我将与用户一起完成登录过程。登录过程的一部分涉及与服务器的通信以验证登录......如果登录成功，那么我在服务器上创建一个对象并将对它的引用存储在“用户”属性中 - 然后在`userIsLoggedIn`方法中检查在 servlet 类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:58:58.160

在您的 web.xml 中设置一个过滤器，以便过滤每个 RF 请求以验证会话。

```
<filter>
  <filter-name>AuthFilter</filter-name>
  <filter-class>my.namespace.AuthFilter</filter-class>
</filter>
<filter-mapping>
  <filter-name>AuthFilter</filter-name>
  <url-pattern>/gwtRequest</url-pattern>
</filter-mapping> 
```

这里有一个示例类，检查某个参数是否在会话中，该参数可以在您的应用程序的登录过程中设置，这只是一个示例，您可以使用自己的机制。

```
 public class AuthFilter implements Filter {

    public void doFilter(ServletRequest servletRequest,
        ServletResponse servletResponse, FilterChain filterChain)
        throws IOException, ServletException {

      HttpServletRequest req = (HttpServletRequest) servletRequest;
      HttpServletResponse resp = (HttpServletResponse) servletResponse;

      if (req.getSession().getAttribute("VALID_SESSION") == null) {
        resp.sendError(HttpServletResponse.SC_UNAUTHORIZED);
        return;
      }

      if (null != filterChain) {
        filterChain.doFilter(req, resp);
      }

    }
  } 
```

# msbuild - MSBuild 未触发 WebDeploy

> ID：15640707
> 
> 赞同：1
> 
> 时间：2013-03-26T15:17:05.593
> 
> 标签：msbuild, webdeploy

多个 TFS 2010 MSBuild 不会触发 Web 部署以将 Web 应用程序发布到 IIS 网站。

这适用于多个不同的软件产品、多个不同的构建配置、2 个不同的构建代理（在 2 个不同的服务器上）、多个不同服务器上的多个 IIS 网站实例。

3 种不同的持续部署设置以前有效。

因此，希望这可以排除构建/构建服务器/托管服务器/Web 部署和 IIS 的错误配置。

根据网络管理员的说法，网络上没有任何变化（所有服务器都是本地的），并且端口 8172 没有被任何安全配置阻止。

所有构建成功，网络部署失败（没有错误，日志中没有任何内容）。似乎不再触发网络部署。

这里使用了其他端口吗？还有什么可能阻止 MSBuild 和 Web Deploy 之间的通信？您是否希望它静默失败（日志中没有任何内容或传递回 MSBuild）？

**更新** 这是一个类似的问题[如何确定是否为 TFS 构建定义执行了 MSBUILD 参数](https://stackoverflow.com/questions/15644635/how-to-determine-if-msbuild-arguments-were-executed-for-tfs-build-definition)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:17:33.167

假设您使用的是 vs2012，请确保在您的构建服务器上存在以下两个文件夹：`Web`& `WebApplications`in

> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0

如果这些不存在，则需要从您进行开发的机器上复制。这对我有用，并解决了我在项目部署方面的所有问题。

# highcharts - HighCharts：缩小图表大小

> ID：15640709
> 
> 赞同：3
> 
> 时间：2013-03-26T15:17:06.523
> 
> 标签：highcharts, lazy-high-charts

有谁知道如何减小这个饼图的大小？我正在使用 Lazy High Charts gem。

```
return LazyHighCharts::HighChart.new('pie') do |f|
      f.chart({:defaultSeriesType=>"pie" , :margin=> [0, 0, 0, 0],  backgroundColor: "#F5F5F5", renderTo: "mediamix#{akid.to_s}"} )
      f.series({:type=> 'pie', :name=> "Count",:data=> data_val, borderWidth: 0})
      f.title({ :text=> nil})
      f.plot_options({:pie=>{:allowPointSelect=>true, :cursor=>"pointer" , dataLabels: {enabled: true}, showInLegend: false}})
    end 
```

![在此处输入图像描述](../Images/2cc44ed215329f15616f14e7f2ce2730.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-17T08:22:32.163

您还可以通过 Highchart API 显式定义宽度和高度：

```
 $('#container').highcharts({
       chart: {
                height: 200,
               width:100
            }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T15:26:43.240

Highcharts 渲染图表以填充您在 renderTo 选项中指定的包含 div。在您的情况下，您正在指定：

```
renderTo:"mediamix#{akid.to_s}" 
```

我不使用 Lazy Highcharts Gem，所以我不知道这是指什么，但是您需要查看代码以了解此 div 的定义位置，并将其高度和宽度设置为您需要的大小。

# javascript - 在子指令之后运行父指令

> ID：15640711
> 
> 赞同：1
> 
> 时间：2013-03-26T15:17:12.623
> 
> 标签：javascript, angularjs

所以我有一个页面，我想等到图像加载完毕后再将项目呈现到页面中。

我过去曾使用过一个[jquery 插件](https://github.com/desandro/imagesloaded)来等待图像。它会在回调/jquery 延迟对象中为您提供它们。

我之前遇到的问题是等待子元素的指令运行。所以我使用`<img ng-src='values'>`是因为我宁愿避免让图像之前尝试访问不同的服务器。

我让它工作的方式是通过`$timeout(fn,0)`延迟执行到下一次旅行。但是，我真的不喜欢这样，并认为它不雅。

有没有更好的办法？

# eclipse - Java EE Web 应用程序未部署在 JBoss 上

> ID：15640714
> 
> 赞同：1
> 
> 时间：2013-03-26T15:17:24.433
> 
> 标签：eclipse, oracle, jpa, jboss

我在 Java EE Web 应用程序上工作，我使用 Eclipse Indigo 作为 IDE，JBoss 7.1 作为应用程序服务器，Oracle 10j 作为数据库。我在 JBoss 7.1 的主文件夹中创建了这个目录`modules\oracle\jdbc\driver\main`，并添加了 Oracle 驱动程序和文件`module.xml`. 文件内容`module.xml`如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.0" name="oracle.jdbc.driver">
  <resources>
    <resource-root path="ojdbc6.jar"/>
  </resources>
  <dependencies>
    <module name="javax.api"/>
  </dependencies>
</module> 
```

我已经在文件服务器上完成了所有必要的配置`standalone.xml`。文件内容`standalone.xml`如下：

```
<datasources>
    <datasource jndi-name="java:jboss/datasources/EmnaDS" pool-name="11gDS" enabled="true" jta="true" use-java-context="true" use-ccm="true">
        <connection-url>jdbc:oracle:thin:@//localhost:1521/XE</connection-url>
        <driver>oracle</driver>
        <pool>
            <prefill>false</prefill>
            <use-strict-min>false</use-strict-min>
            <flush-strategy>FailingConnectionOnly</flush-strategy>
        </pool>
        <security>
            <user-name>bct</user-name>
            <password>emna</password>
        </security>
    </datasource>
    <drivers>
        <driver name="oracle" module="oracle.jdbc.driver">
        <driver-class>oracle.jdbc.driver.OracleDriver</driver-class>
        </driver>
        <driver name="h2" module="com.h2database.h2">
            <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class>
        </driver>
    </drivers>
</datasources> 
```

我在 Eclipse 中创建了一个 EJB 项目，我添加了 JPA 方面。文件内容`persistence.xml`如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

    <persistence-unit name="BCTProjet">
    <jta-data-source>java:jboss/datasources/EmnaDS</jta-data-source>
    <class>com.bct.entity.utilisateur</class>

    <properties>
            <property name="hibernate.hbm2ddl.auto" value="create" />
    </properties>

    </persistence-unit>
</persistence> 
```

当我在服务器上添加项目并运行它时，我得到了这个结果：

```
14:17:58,198 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-6) JBAS010400: Bound data source [java:jboss/datasources/EmnaDS]
14:17:58,267 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss AS 7.1.0.Final "Thunder" started in 9404ms - Started 135 of 206 services (70 services are passive or on-demand) 
```

但是该项目没有部署在服务器上，我看不到为数据库中的类生成的表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:16:41.950

日志太少，无法识别问题。但是你的数据源没问题。我认为您的应用程序有问题。或者它根本不部署。

# android - 以较小尺寸导入现有照片 - phonegap android

> ID：15640718
> 
> 赞同：0
> 
> 时间：2013-03-26T15:17:29.590
> 
> 标签：android, cordova

使用 Phonegap 和 android，我让用户拍照，然后向他们显示预览：

```
var img = new Image();
img.src= imageUri;
$("#dialogContent").prepend(img); 
```

它工作正常。然而，在配备超强摄像头的功能强大的现代手机 [如 Galaxy S3] 上，由于文件大小，这会使应用程序崩溃。

我想要的是能够以较小的尺寸导入我拍摄的照片，但保持原始照片的全尺寸（因为我要上传它）。

像这样的东西：

```
var maxSize = Math.max(screen.width, screen.height);
targetHeight: maxSize,
targetWidth: maxSize, 
```

如果您已经知道 fileURI ，有没有办法使用**“navigator.camera.getPicture” ？**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T15:21:16.910

```
File  file=new File("your path");

Bitmap screen = BitmapFactory.decodeFile(file);             
ByteArrayOutputStream bytes = new ByteArrayOutputStream();
screen.compress(Bitmap.CompressFormat.JPEG, 15, bytes); 
```

# facebook - 错误代码1353013。用户未确认或为灰色帐户

> ID：15640719
> 
> 赞同：1
> 
> 时间：2013-03-26T15:17:30.620
> 
> 标签：facebook, payment, facebook-credits

我们正在使用 facebook 支付订阅 api。

我们记录客户端 FB 调用收到的所有错误。最近我们开始在客户端回调中看到以下错误：

`Error code: 1353013\. Error message: "user is not confirmed or is a gray account"`

这不会影响所有帐户，即使是我们的测试用户，我们也无法重现这一点。在查看受影响用户的 /me 时，它​​会`verified: true`显示，但是我们无法查看用户的个人资料。

以下 FB 调用是我们使用的调用：

```
FB.ui({
   method: 'pay', 
   action: 'create_subscription', 
   product: 'http://example.com/our/product'
},...); 
```

有谁知道这个错误信息是什么意思？我们找不到有关此错误代码的任何文档。

**更新：**

我们发现这与 Facebook 企业帐户有关。我刚刚尝试在[https://www.facebook.com/business](https://www.facebook.com/business)上创建一个。您首先从 Facebook 收到的错误消息如下：“在 Facebook 购物之前，您必须确认您的帐户。”

然而，企业帐户有一个经过验证的手机号码，当然可以通过我们的连接卡购买广告。

一个人如何去向 facebook 报告这种问题，似乎他们指的是 stackoverflow.com 的这种报告？

# asp.net - 在 IIS 7.5 上部署 VS2010 ASP.Net 网站

> ID：15640720
> 
> 赞同：0
> 
> 时间：2013-03-26T15:17:31.767
> 
> 标签：asp.net, iis-7.5, publish

我知道这个论坛和其他资源上有相关的帖子，但我被困住了，无法继续。问题是当我将它发布到 FTP 服务器并导航到我收到错误的 url 地址时，我已经使用 VS2010 完成了一个网站。

以下是我做过的事情：

*   我已启用 IIS 服务和静态内容
*   我已将处理程序映射下的 staticFile 恢复为父级
*   我已经在命令提示符下再次注册了 asp.net（regiis.exe 的东西）
*   在 IIS 管理器中，我在站点下添加了我的网站地址，停止了默认网站并启动了我的网站。
*   我已将我的网站添加到 classic.NET AppPool（集成和 v4.0）
*   我已经启用了默认浏览..
*   我已经完成了通常涵盖的所有建议..

这是我的 web.config：

```
<configuration>
    <system.webServer>
        <directoryBrowse enabled="true" showFlags="Date, Time, Size, Extension" />
        <defaultDocument>
             <files>
                 <add value="AnaSayfa.aspx" />
             </files>
        </defaultDocument>
    </system.webServer>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>
</configuration> 
```

我在哪里犯错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:44:16.500

以下帖子对同一问题有一些答案。

[如何修复 Win Server 2k8 和 IIS7 上的 404.17 错误](https://stackoverflow.com/questions/87107/how-do-i-fix-404-17-error-on-win-server-2k8-and-iis7)

希望有帮助。

编辑：我看到你已经尝试了其中的大部分......对不起。

# javascript - 当画布路径以某种方式相交时，它不会被绘制

> ID：15640721
> 
> 赞同：2
> 
> 时间：2013-03-26T15:17:36.353
> 
> 标签：javascript, canvas

在画布上填充路径时，根据创建路径的方式，路径交叉点将使用填充颜色绘制或留空。

这是一个例子：http:
[//jsfiddle.net/C3Hbb/](http://jsfiddle.net/C3Hbb/)

```
//Works as expected:
ctx.beginPath();

ctx.rect(50, 50, 50, 50);
ctx.rect(25, 50, 50, 50);

ctx.fill();

//Transparent on intersection:
ctx.beginPath();

ctx.rect(25, 150, 50, 50);
ctx.rect(100, 150, -50, 50);

ctx.fill(); 
```

我希望两个交叉点以相同的方式绘制，因为组成它们的矩形大致相同，但是在第一个交叉点上，交叉点用填充颜色绘制，而在第二个交叉点上，交叉点是透明的。

为什么它在这两个十字路口表现不同？有没有办法避免“透明”的交叉行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:41:15.860

简单的答案是：不要将第二个矩形的宽度设置为负值。如果您的线路是：

```
ctx.rect(25, 150, 50, 50);
ctx.rect(50, 150, 50, 50); 
```

或者：

```
ctx.rect(25, 150, 50, 50);
ctx.rect(100, 200, -50, -50); 
```

它会画得很好。实际上，单个负尺寸告诉它逆时针而不是标准顺时针绘制点。HTML5 canvas.draw 指定的填充计算都将单负值多边形视为路径之外。

HTML 5 画布填充的[规范说：](http://www.w3.org/html/wg/drafts/2dcontext/html5_canvas/#drawing-rectangles-to-the-canvas)

> fill() 方法必须使用 fillStyle 填充预期路径的所有子路径，并使用可选 w 参数指定的填充规则。如果未指定可选的 w 参数，或者它是字符串“nonzero”，则此方法必须使用[非零缠绕规则](http://www.w3.org/html/wg/drafts/2dcontext/html5_canvas/#non-zero)填充所有子路径。如果可选的 w 参数是字符串“evenodd”，则此方法必须使用[奇偶规则](http://www.w3.org/html/wg/drafts/2dcontext/html5_canvas/#even-odd)填充所有子路径。打开的子路径在填充时必须隐式关闭（不影响实际的子路径）。

请注意，确定内部内容的定义的“偶数”和“非零”均表示负编号的将在您的路径之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:32:55.493

这是由您在第二个矩形上设置的 -50 宽度引起的。你只需要调整X：

```
ctx.rect(25, 150, 50, 50);
ctx.rect(50, 150, 50, 50); 
```

# gcc - gcc：传递预处理器定义列表

> ID：15640723
> 
> 赞同：1
> 
> 时间：2013-03-26T15:17:36.853
> 
> 标签：gcc, c-preprocessor

我有一个相当长的预处理器定义列表，我想将它们提供给几个用 gcc 编译的 C 程序。

基本上我可以创建一个巨大的列表 -DDEF1=1 -DDEF2=2 ... 传递给 gcc 的选项，但这会造成巨大的混乱，很难在版本控制系统中使用，并且可能在未来的某个时候打破命令行长度限制。

我想在文件中定义我的定义。

基本上 -imacros 会做我想要的，除了它只将它传递给第一个源文件：（下面来自 gcc 文档）：

> -include file 处理文件，好像#include "file" 出现在主要源文件的第一行。但是，搜索文件的第一个目录是预处理器的工作目录，而不是包含主源文件的目录。如果在此处未找到，则会在 #include "..." 搜索链的其余部分中正常进行搜索。如果给出了多个 -include 选项，则文件将按照它们在命令行中出现的顺序被包含在内。
> 
> -imacros 文件 与 -include 完全一样，只是扫描文件产生的任何输出都会被丢弃。它定义的宏保持定义。这允许您从标头获取所有宏，而无需处理其声明。-imacros 指定的所有文件都在 -include 指定的所有文件之前处理。

我需要在所有源文件中都有定义，而不仅仅是第一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:21:13.487

看看[这个参考](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Overall-Options.html#Overall-Options)的底部。

您可能想要的是`@file`选项。该选项告诉 GCC`file`用于命令行选项。这个文件当然可以包含预处理器定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:25:29.440

老实说 - 听起来您需要在构建环境中做更多的事情。

例如，一个建议是听起来您应该创建一个包含在所有源文件中的头文件并#define 所有定义。

您也可以使用`-include`，但指定一个明确的路径 - 这应该在您的 Makefile/build 环境中确定。

如果您的 Makefile 将每个源文件独立构建到其自己的目标文件中（这是典型的），则 -imacros 将起作用。听起来您只是将所有资源都投入到构建单个对象中。

# c# - 从路径中删除图像

> ID：15640732
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:17:50.433
> 
> 标签：c#, asp.net, asp.net-mvc

我需要做什么才能结束 imagePath 进程？

错误：

> 该进程无法访问文件“C:\Users\Rafal\7074edcf-8849-4ea7-a87d-e2e8b5890f3f.jpg”，因为它正被另一个进程使用。

![在此处输入图像描述](../Images/f2c5e4f221998cb93d03a6dffb428652.png)

```
public WrappedJsonResult2 UploadImageSmall(HttpPostedFileWrapper imageFile2)
        {

            if (imageFile2 == null || imageFile2.ContentLength == 0)
            {
                return new WrappedJsonResult2
                {
                    Data = new
                    {
                        IsValid = false,
                        Message = "Nie dodano zdjęcia",
                        ImagePath = string.Empty
                    }
                };
            } 
```

这里我有第一张图片的 fileName 和 imagePath

```
 var fileName = String.Format("{0}.jpg", Guid.NewGuid().ToString());
            var imagePath = Path.Combine(Server.MapPath(Url.Content("~/Content/UserImages")), fileName); 
```

这里我有第二张图片的 fileName 和 imagePath

```
 var fileNameZmniejszony = String.Format("{0}.jpg", Guid.NewGuid().ToString());
            var imagePathZmniejszony = Path.Combine(Server.MapPath(Url.Content("~/Content/UserImages")), fileNameZmniejszony); 
```

我从 JSON 中保存图片

```
 imageFile2.SaveAs(imagePath); 
```

我从 imageFile2 的方向拍照

```
 var image = Image.FromFile(imagePath); 
```

我缩放新图片并保存为第二张图片

```
 var newImage = ScaleImage(image, 300, 400);
            newImage.Save(imagePathZmniejszony); 
```

在这里，我想删除带有目录第一个图像的文件

```
 if (System.IO.File.Exists(imagePath))
            {
                System.IO.File.Delete(imagePath);
            }

            var model = new StronaGlowna();
            if (!TryUpdateModel(model))
            {
            }
            model.MaleZdjecie = String.Format("~/Content/UserImages/{0}", fileNameZmniejszony);

            return new WrappedJsonResult2
            {
                Data = new
                {
                    IsValid = true,
                    Message = string.Empty,
                    ImagePath = Url.Content(String.Format("~/Content/UserImages/{0}", fileNameZmniejszony))
                }
            };
        } 
```

为什么我在处理过程中遇到问题，因为这个处理过程（HttpPostedFileWrapper imageFile2）

并且 dispose() 不适用于这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T15:20:09.673

您需要`Dispose()`先删除您的图像，然后才能将其删除。现在，您已经打开了图像文件。

这记录在[`Image.FromFile`](http://msdn.microsoft.com/en-us/library/stf701f5.aspx)

> 该文件保持锁定状态，直到图像被释放。

在您的代码中，处理此问题的一种方法是编写：

```
using(var image = Image.FromFile(imagePath))
{
   using(var newImage = ScaleImage(image, 300, 400))
   {
       newImage.Save(imagePathZmniejszony);
   }
} 
```

这将导致两个`Image`实例都被正确处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:20:02.657

`image.Dispose()`在删除之前尝试使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T15:20:35.797

您需要处理您的图像变量。它仍在使用该文件。

`image.Dispose();`在删除之前调用。

您还可以在复制时将图像变量包装在 using 语句中。这是更好的做法。

```
using (var image = Image.FromFile(imagePath))
{
    var newImage = ScaleImage(image, 300, 400);
    newImage.Save(imagePathZmniejszony);
} 
```

以上将解决问题。始终将一次性对象包装在 Using 语句中。这会从内存中清除所有非托管资源。

# ruby - Heroku-在计划任务期间设置环境变量

> ID：15640735
> 
> 赞同：1
> 
> 时间：2013-03-26T15:17:55.220
> 
> 标签：ruby, heroku, sinatra

我正在尝试在 heroku 上创建一个计划任务，该任务将为应用程序设置一个环境变量。我将如何设置这个环境变量？有没有办法从计划任务中调用 heroku config:add ？（基于 Ruby 的应用程序。）

解决了它：

需要'heroku-api'

heroku.put_config_vars(APP, KEY => '值')

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:48:09.467

您必须使用 heroku.rb gem ( [https://github.com/heroku/heroku.rb](https://github.com/heroku/heroku.rb) ) 并从您的任务中调用它来设置变量。

# java - 如何将 Eclipse 类路径变量从一个工作区复制到新的工作区？

> ID：15640750
> 
> 赞同：6
> 
> 时间：2013-03-26T15:18:27.650
> 
> 标签：java, eclipse, workspace

如何将[Eclipse](http://www.eclipse.org/)类路径变量从打开的工作区复制到新的工作区？我正在使用[Eclipse Juno](http://www.eclipse.org/juno/)（Eclipse 平台 4.2.1 和 Eclipse Java 开发工具 3.8.2）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T15:29:53.597

尝试文件 -> 导出 -> 常规 -> 首选项并全部导出。接下来，将首选项导入您的第二个工作区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:39:45.943

类路径变量在eclipse*中至少存储在三个地方：*

**工作区级别**

这些实际上是全局的，可以在 Preferences->Java->Build Path->Classpath variables 中看到。您可以将它们与任何其他首选项一起导出，然后将它们导入到您的新工作区。

**项目级别**

在 Project->Properties->Java Build Path 编辑器中看到。这些存储在项目根目录的 .classpath 文件中。如果您想避免使用项目属性编辑器，您可以简单地将相关部分从一个 .classpath 文件复制并粘贴到另一个文件。

**运行配置**

这些是用于从 Eclipse 中实际执行代码的类路径变量，您可以在运行->运行配置->（选择一个）->类路径选项卡中看到它们。您可以通过转到“通用”选项卡并将其从“本地”更改为“共享”来“保存”配置，然后将该共享文件移动到您关心的任何位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-04T17:25:41.073

是的，没有直接的方法可以实现这一点。我找到了一个解决方法。尝试文件系统导出，为要导出的所有项目仅选择 .classpath 文件，然后在选项中选择“为文件创建目录结构”以确保每个项目类路径都在其自己的文件夹中生成。

要使用它来导入，只需将导出的文件（仅包含 .classpath 文件）复制粘贴到新工作区。

# database - 开发查找的关系

> ID：15640751
> 
> 赞同：1
> 
> 时间：2013-03-26T15:18:31.390
> 
> 标签：database

我有一个 MS Access 数据库，它在多个国家/地区拥有许多 POC，每个 POC 都有多种电话号码。

我需要最终得到一份报告，该报告允许我选择每个 POC 旁边显示的电话号码类型。

前任。John Doe 电话：210-555-1111 通讯：123-456-8910 Jane Doe 通讯：210-555-1212 Lil John 公共汽车：813-245-6789 电话：321-879-1119

而不是所有 POC 的所有号码，例如：John Doe Cell：# Comm：# Bus：# Jane Doe Cell：# Comm：# Bus：# Lil John Cell：#Comm：# Bus：#

不知道该怎么做。

谢谢，杰森

# ruby - Ruby 2.0p0 和 XMLRPC::Client

> ID：15640764
> 
> 赞同：3
> 
> 时间：2013-03-26T15:18:53.337
> 
> 标签：ruby, xml-rpc

我遇到了 Ruby 2.0p0 和 XMLRPC::Client 的问题。当我在 2 个不同版本的 ruby​​ 中运行以下代码时，我在 1.9.3 上得到正确响应，但在 2.0.0 上得到错误。有同样问题的人吗？解决方案是不使用最新版本的 ruby​​ 还是有解决方法？

```
require "xmlrpc/client"

server = XMLRPC::Client.new2('http://api.flickr.com/services/xmlrpc/')
begin
  res = server.call('flickr.test.echo')
  puts res
rescue XMLRPC::FaultException => e
  puts e.faultCode
  puts e.faultString
end 
```

使用**ruby​​-1.9.3-p392 [ x86_64 ]**

我从 flickr 得到了正确的响应，因为我没有提供 API 密钥：

```
100
Invalid API Key (Key has invalid format) 
```

使用**ruby​​-2.0.0-p0 [x86_64]**

我从 ruby​​ 收到一个错误，说“大小错误。是 365，应该是 207 (RuntimeError)”

```
/home/luisramalho/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/xmlrpc/client.rb:506:in `do_rpc': Wrong size. Was 365, should be 207 (RuntimeError)
    from /home/luisramalho/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/xmlrpc/client.rb:281:in `call2'
    from /home/luisramalho/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/xmlrpc/client.rb:262:in `call'
    from xmlrpc.rb:5:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T04:46:47.990

我在使用 ruby​​2 访问不同的 xml rpc api（upcdatabase.com's）时遇到了类似的问题（说真的，谁还在使用 xml rpc api？）。

我的解决方案是使用与 ruby​​ 默认不同的 xmlrpc 库。LibXML-XMLRPC。它使用 c 扩展，并且应该比标准库更快，但它最后一次更新是在 2008 年，所以谁知道今天这个说法有多真实。

这就是我的代码最终起作用的原因。

```
require 'xml/libxml/xmlrpc'
require 'net/http'
net = Net::HTTP.new("www.upcdatabase.com", 80)

server = XML::XMLRPC::Client.new(net, "/xmlrpc")
result = server.call('lookup', 'rpc_key' => "YOLOSWAG", 'upc' => "071160055506") 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-16T09:35:51.203

我为此提出了一个补丁。让我们看看团队对此有何看法。

[https://github.com/ruby/ruby/pull/308](https://github.com/ruby/ruby/pull/308)

# java - 如何使用 ZipOutputStream 压缩单个字符串并保存为可读字符串

> ID：15640765
> 
> 赞同：2
> 
> 时间：2013-03-26T15:18:59.180
> 
> 标签：java, android

我尝试使用 DeflaterOutputStream 压缩字符串并使用 base64 转换输出以将结果保存在另一个字符串中

```
public static String compress(String str) throws IOException {
    byte[] data = str.getBytes("UTF-8");
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    java.util.zip.Deflater compresser = new java.util.zip.Deflater(java.util.zip.Deflater.BEST_COMPRESSION, true);
    DeflaterOutputStream deflaterOutputStream = new DeflaterOutputStream(stream, cozmpresser);
    deflaterOutputStream.write(data);
    deflaterOutputStream.close();
    byte[] output = stream.toByteArray();
    return Base64Coder.encodeLines(output);
} 
```

现在我想试试 ZipOutputStream。我试过了

```
public static String compress(String str) throws IOException {
    byte[] data = str.getBytes("UTF-8");
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    ZipOutputStream deflaterOutputStream = new ZipOutputStream(stream);
    deflaterOutputStream.setMethod(ZipOutputStream.DEFLATED);
    deflaterOutputStream.setLevel(8);
    deflaterOutputStream.write(data);
    deflaterOutputStream.close();
    byte[] output = stream.toByteArray();
    return Base64Coder.encodeLines(output);
} 
```

但不工作。ZipOutputStream 似乎面向文件夹和文件的结构，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:27:52.190

`ZipOutputStream`旨在生成一个[Zip 文件](http://en.wikipedia.org/wiki/Zip_%28file_format%29)，正如您所注意到的，它通常用作文件和文件夹的容器（换句话说，“压缩文件夹”或“压缩目录树”）。

如果您只是想压缩一个字符串，然后将其转换为某种可打印的形式，那`ZipOutputStream`并不是真正的正确选择。`GZIPOutputStream`在我看来，更适合这个目的。

*由于您使用android*标签标记了这个问题，请注意此处的评论：http: [//developer.android.com/reference/java/util/zip/GZIPOutputStream.html](http://developer.android.com/reference/java/util/zip/GZIPOutputStream.html)

*使用 GZIPOutputStream 比 ZipOutputStream 容易一点，因为 GZIP 仅用于压缩，而不是多个文件的容器。*

# javascript - 通过 JavaScript 提交带有文件上传的 ajax 请求

> ID：15640767
> 
> 赞同：0
> 
> 时间：2013-03-26T15:19:04.860
> 
> 标签：javascript, ajax

我有一个可以通过提交的表格，`form.submit()`并且回复是正确的。现在我想用ajax提交，但是提交文件时出现问题。

表格非常简单：

```
<form name="Upload" enctype="multipart/form-data" method="post" action="upload.asp">
    <input type="file" name="file" id="fileinput"/>
    <input type="button" name="FileUpload" class="button" id="append_new" 
    onclick="xmlhttpPost('upload.asp', document.getElementById('fileinput').files[0]);" value="submit file"/>
</form> 
```

我得到了如下的ajax调用：

```
function xmlhttpPost(strURL, form) {
    var xmlHttpReq = false;
    var self = this;
    // Mozilla/Safari
    if (window.XMLHttpRequest) {
        self.xmlHttpReq = new XMLHttpRequest();
    }
    // IE
    else if (window.ActiveXObject) {
        self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
    }
    self.xmlHttpReq.open('POST', strURL, true);
    self.xmlHttpReq.setRequestHeader('Content-Type', 'multipart/form-data');
    self.xmlHttpReq.onreadystatechange = function() {
        if (self.xmlHttpReq.readyState == 4) {
            updatepage(self.xmlHttpReq.responseText);
        }
    }
    self.xmlHttpReq.send('file=' + file);
}

function updatepage(str){
    document.getElementById("fileitems").innerHTML = str;
} 
```

现在的问题是：服务器获取的是字符串`[object file]`而不是实际的文件内容。如何确保提交文件数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:24:12.880

您可以为此使用[formData](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)：

```
function xmlhttpPost(strURL, form) {
    var xmlHttpReq = false;
    var self = this;
    // Mozilla/Safari
    if (window.XMLHttpRequest) {
        self.xmlHttpReq = new XMLHttpRequest();
    }
    // IE
    else if (window.ActiveXObject) {
        self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
    }
    self.xmlHttpReq.open('POST', strURL, true);
    self.xmlHttpReq.setRequestHeader('Content-Type', 'multipart/form-data');
    self.xmlHttpReq.onreadystatechange = function () {
        if (self.xmlHttpReq.readyState == 4) {
            updatepage(self.xmlHttpReq.responseText);
        }
    }
    if ( !! window.FormData) {
        var formData = new FormData();
        formData.append('file', form);
        self.xmlHttpReq.send(formData);
    }
}

function updatepage(str) {
    document.getElementById("fileitems").innerHTML = str;
} 
```

[**这是**](https://github.com/newbamboo/example-ajax-upload/blob/master/public/index.html)一个带有进度的完整 ajax 文件上传器的不错示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:26:33.070

你错过了这个：

```
self.xmlHttpReq.setRequestHeader("X_FILENAME", file.name); 
```

这将区分应用层的普通 POST 和文件上传。

如果您使用的是 PHP，它看起来像：

```
$file = (isset($_SERVER['HTTP_X_FILENAME']) ? $_SERVER['HTTP_X_FILENAME'] : ''); 
```

# c++ - boost::算法::包含

> ID：15640770
> 
> 赞同：4
> 
> 时间：2013-03-26T15:19:16.447
> 
> 标签：c++, boost, contains

我查看了模板定义，参数似乎需要跨范围和谓词的迭代器。我传入了一个vector.begin()、...end() 和一个std::string 谓词，但仍然得到许多与许多boost 库项目相关的编译时错误。我可以看到一个使用 boost::algorithm::contains 的清晰示例吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T15:25:52.313

这相当简单，我猜你应该在传递容器时传递迭代器。

```
 std::string s = "fishing"; 
  std::cout << boost::algorithm::contains(s, "is") << std::endl; 
  std::vector<int> v {1,2,3,5,7,2,7,4,5,8};
  std::vector<int> v2 {5,7,2,7,4};
  std::vector<int> v3 {5,7,2,7,3};
  std::cout << boost::algorithm::contains(v, v2) << std::endl;
  std::cout << boost::algorithm::contains(v, v3) << std::endl; 
```

# c - 如何将 C 中的 uint32_t 移植到 Windows 7（32 位）

> ID：15640771
> 
> 赞同：3
> 
> 时间：2013-03-26T15:19:16.577
> 
> 标签：c

最近我遇到了一个包含数据类型的程序

```
uint32_t, uint32, uint64 etc. 
```

我可以在不进行任何更改的情况下在 Windows 7（32 位）中运行该程序吗？我将 Code::Blocks 10.05 与 MingW 一起使用。

如果需要更改，哪些数据类型可以替换它们？

另外我想知道 C 的哪个标准定义了 uint32_t、uint32 等？是所谓的gcc C吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T15:20:48.830

这些来自`<stdint.h>`，我认为是随 C99 引入的 C 标准头文件。

如果您的系统中没有 C99 或兼容的标头，您*确实*应该拥有并且*确实*应该调查，您需要自己重新创建定义。

为此，您需要引入一堆`typedef`s：

```
typedef unsigned int uint32_t; 
```

等等，当然在验证编译器上`unsigned int`确实*是*32 位之后。

但这不是必需的，我认为即使是 Visual Studio 现在也有足够的 C99 支持来提供此标头。

# javascript - 为什么以下 JavaScript 正则表达式不起作用？

> ID：15640773
> 
> 赞同：1
> 
> 时间：2013-03-26T15:19:17.913
> 
> 标签：javascript, regex, node.js, regex-lookarounds

```
s='<img src="http://25.media.tumblr.com/xxxxx/tumblr_xxx_1280.jpg">'
p=/(?=<img src=")http:\/\/\d*\.media\.tumblr\.com\/\w*\/?tumblr_\w*_\d{3,4}\.\w{3,3}(?=")/g
s.match(p) # return null 
```

但是，以下工作：

```
p=/(<img src=")http:\/\/\d*\.media\.tumblr\.com\/\w*\/?tumblr_\w*_\d{3,4}\.\w{3,3}(?=")/g 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:30:14.690

> ?= ：积极的前瞻。**在您的主要表达式之后**匹配一个组，而不将其包含在结果中。

如果您尝试仅**提取 URL** ，则您正在寻找积极的后视，因为您尝试在主要表达式**之前**匹配某些内容。

 **```
p=/(?<=img src=....
     ^ positive look-behind 
```

**编辑：**

JavaScript 不支持它们（如评论所示），因此您必须求助于[诡计](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)。

但是，如果您尝试提取 URL，将其拆分为 2 个步骤可能会更容易，获取整个匹配项，然后删除`<img src=...`部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:31:05.610

您的第一个正则表达式无法匹配，因为它使用与它后面的模式相矛盾的*零宽度*前瞻。

正则表达式无法匹配`"<img src="`，并且在字符串中的相同位置也匹配，例如`"http://25"`。**

# iphone - 将 CAShapeLayer 蒙版应用到 UIView

> ID：15640774
> 
> 赞同：8
> 
> 时间：2013-03-26T15:19:20.237
> 
> 标签：iphone, ios, cocoa-touch, uiview, cashapelayer

我正在使用此代码将图层应用于 UIview：

```
mask = [[CAShapeLayer alloc] init];
mask.frame = baseView.layer.bounds;
CGRect biggerRect = CGRectMake(mask.frame.origin.x, mask.frame.origin.y, mask.frame.size.width, mask.frame.size.height);
CGRect smallerRect = CGRectMake(0.0f, 0.0f, 0.0f, 0.0f);

UIBezierPath *maskPath = [UIBezierPath bezierPath];
[maskPath moveToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMaxY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMaxY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMinY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];

[maskPath moveToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMaxY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMaxY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMinY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];

mask.path = maskPath.CGPath;
[mask setFillRule:kCAFillRuleEvenOdd];
mask.fillColor = [[UIColor blackColor] CGColor];
baseView.layer.mask = mask; 
```

由于我要剪切的矩形发生了变化，我想知道是否有一种快速的方法来更改蒙版的大小，而不是仅仅从 UIview 中删除它并以不同的尺寸重新应用它：

例如

```
[mask removeFromSuperlayer]; 
```

和...

```
mask = [[CAShapeLayer alloc] init];
mask.frame = baseView.layer.bounds;
CGRect biggerRect = CGRectMake(mask.frame.origin.x, mask.frame.origin.y, mask.frame.size.width, mask.frame.size.height);
CGRect smallerRect = CGRectMake(0.0f, 100.0f, 200.0f, 200.0f);

UIBezierPath *maskPath = [UIBezierPath bezierPath];
[maskPath moveToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMaxY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMaxY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMinY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];

[maskPath moveToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMaxY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMaxY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMinY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];

mask.path = maskPath.CGPath;
[mask setFillRule:kCAFillRuleEvenOdd];
mask.fillColor = [[UIColor blackColor] CGColor];
baseView.layer.mask = mask; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T20:40:02.130

如果您问是否可以重新塑造面具而不必每次都绘制路径，很遗憾不是。[您可以通过设置的transform](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/transform)属性保持蒙版形状相同并在蒙版上执行转换，`CAShapeLayer`但如果您需要蒙版采用不同的形状，则必须通过创建新路径来绘制该形状。**但是**`UIView`每次你需要改变它的形状时，没有必要把它从面具上取下来并创建一个全新的面具。简单地设置 CAShapeLayer 的[path](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CAShapeLayer_class/Reference/Reference.html#//apple_ref/occ/instp/CAShapeLayer/path)属性，同时它仍然掩盖 ，`UIView`就足以使更改发生：

```
- (void)remask
{
    CAShapeLayer *mask = (CAShapeLayer *)self.view.layer.mask;

    CGRect biggerRect = CGRectMake(mask.frame.origin.x, mask.frame.origin.y, mask.frame.size.width, mask.frame.size.height);
    CGRect smallerRect = CGRectMake(0.0f, 100.0f, 200.0f, 200.0f);

    UIBezierPath *maskPath = [UIBezierPath bezierPath];
    [maskPath moveToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];
    [maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMaxY(biggerRect))];
    [maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMaxY(biggerRect))];
    [maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMinY(biggerRect))];
    [maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];

    [maskPath moveToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];
    [maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMaxY(smallerRect))];
    [maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMaxY(smallerRect))];
    [maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMinY(smallerRect))];
    [maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];

    mask.path = maskPath.CGPath;
} 
```

附带说明一下，您是否知道，您可以使用以下代码创建蒙版路径，而不是手动绘制每个矩形：

```
mask = [[CAShapeLayer alloc] init];
mask.frame = baseView.layer.bounds;
CGRect biggerRect = CGRectMake(mask.frame.origin.x, mask.frame.origin.y, mask.frame.size.width, mask.frame.size.height);
CGRect smallerRect = CGRectMake(0.0f, 100.0f, 200.0f, 200.0f);

CGMutablePathRef maskPath = CGPathCreateMutable();
CGPathAddRect(maskPath, NULL, biggerRect);
CGPathAddRect(maskPath, NULL, smallerRect);

mask.path = maskPath;
[mask setFillRule:kCAFillRuleEvenOdd];
mask.fillColor = [[UIColor blackColor] CGColor];
baseView.layer.mask = mask;

CGPathRelease(maskPath); 
```

我想我只是指出它，因为它将来可能对你方便。

# windows - 创建一个将在 cmd 中运行的文件

> ID：15640776
> 
> 赞同：0
> 
> 时间：2013-03-26T15:19:23.593
> 
> 标签：windows, command-line, batch-file

是否可以制作一个文件，当双击时，它会自动运行“ping 8.8.8.8 -t”到 Windows 命令提示符。所以不需要“Windows+R > ping 8.8.8.8 -t > enter”来做到这一点

我需要一个编译器来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:22:54.967

是的，`.bat`使用您的文本编辑器（纯文本编辑器）创建一个文件并将命令粘贴到该文件中。如：

```
ping 8.8.8.8 -t 
```

请务必将其另存`.bat`为`.txt`.

# c++ - MFC 工具提示仅在特殊场合出现

> ID：15640780
> 
> 赞同：6
> 
> 时间：2013-03-26T15:19:30.403
> 
> 标签：c++, windows, mfc, tooltip

我的任务是为配置菜单中的每个项目分配工具提示。我已完成将工具提示“添加”到页面上的每个控件，但有时工具提示似乎会显示，有时则不会，具体取决于屏幕上控件的位置。

为了工具提示，我首先

```
EnableToolTips(TRUE); 
```

在每个 CPropertyPage 的 OnInitDialog 方法中。然后我添加通知地图

```
ON_NOTIFY_EX(TTN_NEEDTEXT, 0, OnToolTipText) 
```

随着功能 OnToolTipText 看起来像这样

```
BOOL CCfgPrefPage::OnToolTipText( UINT id, NMHDR * pNMHDR, LRESULT * pResult )
{
    TOOLTIPTEXT *pTTT = (TOOLTIPTEXT *)pNMHDR;
    UINT nID = pNMHDR->idFrom;

    if (pTTT->uFlags & TTF_IDISHWND)
    {
        nID = ::GetDlgCtrlID((HWND)nID);
        if(nID)
        {
            if( nID == GetDlgItem(IDC_PICKDIST_EDIT)->GetDlgCtrlID())  
                _tcsncpy_s(pTTT->szText, _T("Tool Tip Text"), _TRUNCATE);
            else if( nID == GetDlgItem(IDC_ENDPTTOL_EDIT)->GetDlgCtrlID())  
                _tcsncpy_s(pTTT->szText, _T("Tool Tip Text"), _TRUNCATE);

            pTTT->lpszText = pTTT->szText; // Sanity Check
            pTTT->hinst = AfxGetResourceHandle(); // Don't think this is needed at all
            return TRUE;
        }
    }
    return FALSE;
} 
```

对于我的某些控件，似乎不会显示工具提示。对于大多数复选框控件，工具提示会显示，但对于少数人来说，它们只是不显示。没有其他控件覆盖它们，它们没有被禁用。

另一件事，如果我使用非标准光标窗口反复闪烁工具提示，以至于在某些情况下不可读。我怎样才能解决这个问题？这在 CEdit 控件上不是问题，那么为什么在其他地方会出现问题呢？

编辑：更新，多年来一直在页面上的控件似乎显示了工具提示。我现在/今天尝试添加的任何控件都不会显示工具提示。无论位置、控件类型、设置如何，我都无法在新插入的控件上显示单个工具提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T00:39:05.713

如果您不想使用我建议的辅助类，请修复代码中的问题。首先，在映射偶数处理程序时使用 ON_NOTIFY_EX_RANGE 宏，如下所示（这将涵盖所有 ID）：

```
ON_NOTIFY_EX_RANGE(TTN_NEEDTEXTA, 0, 0xFFFF, OnToolTipText) 
```

接下来，您需要修复您的功能。我在这里看到了一些问题。首先，在测试 TTF_IDISHWND 标志时，您只需要重新初始化 nID。您不需要将其应用于整个函数。其次，在所有操作之后，您的 nID 将是实际的对话 ID。不需要 GetDlgItem() 函数

```
BOOL CCfgPrefPage::OnToolTipText( UINT id, NMHDR * pNMHDR, LRESULT * pResult )
{
    TOOLTIPTEXT *pTTT = (TOOLTIPTEXT *)pNMHDR;
    UINT nID = pNMHDR->idFrom;

    if (pTTT->uFlags & TTF_IDISHWND)
    {
        nID = ::GetDlgCtrlID((HWND)nID);
    }
    if(nID)
    {
        if( nID == IDC_PICKDIST_EDIT)  
            _tcsncpy_s(pTTT->szText, _T("Tool Tip Text"), _TRUNCATE);
        else if( nID == IDC_ENDPTTOL_EDIT)  
            _tcsncpy_s(pTTT->szText, _T("Tool Tip Text"), _TRUNCATE);

        //pTTT->lpszText = pTTT->szText; // Sanity Check
        *pResult = 0;
        return TRUE;
    }
    return FALSE;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-08T18:43:24.210

使用从旧 MFC 应用程序的菜单中重复某些菜单项的工具栏，我已经处理了这个工具提示问题以及 (1) 修改工具栏位图以包含其他图标和 (2) 提供有关当前的用户反馈应用状态。我的问题是我必须手动完成大部分操作，而不是使用各种向导和工具。

我所做的是（1）向 CView 派生类添加新成员以处理附加消息，（2）修改工具栏位图以使用 MS Paint 和资源编辑器添加附加图标，以及（3）添加CView 派生类的消息映射的新事件 ID 和事件处理程序。

我在更改工具栏位图时遇到的一个问题是，由于我要插入一个图标，因此我必须将位图中的现有图标向右移动。我的第一次尝试导致移动图标在应用程序工具栏上显示为空白。然后我意识到我需要在工具栏位图的长度上增加一点。在工具栏位图中的最后一个图标添加几列以使其成为标准像素宽度后，图标正确显示。

对于工具提示，我在消息映射中添加了以下内容：

```
ON_NOTIFY_EX(TTN_NEEDTEXT, 0, OnToolTipText) 
```

然后我在我的类中添加了以下方法来处理我的菜单项的通知。附带说明一下，这似乎是类和类中`OnToolTipText()`使用的标准方法，但是派生自它，所以我怀疑它对方法的命名有什么影响。`CFrameWnd``CMDIChildWnd``CView``CWnd``CFrameWnd`

```
inline BOOL CPCSampleView::OnToolTipText( UINT id, NMHDR * pNMHDR, LRESULT * pResult )
{
    static wchar_t toolTextToggleExportSylk [64] = L"Toggle SYLK export.";
    static wchar_t toolTextClearWindow [64] = L"Clear the log displayed.";
    static wchar_t toolTextConnectLan [64] = L"Log on the POS terminal through the LAN.";

    TOOLTIPTEXT *pTTT = (TOOLTIPTEXT *)pNMHDR;

    switch (pNMHDR->idFrom) {
        case ID_TOGGLE_SYLK_EXPORT:
            pTTT->lpszText = toolTextToggleExportSylk;
            return TRUE;
        case ID_WINDOW_CLEAR:
            pTTT->lpszText = toolTextClearWindow;
            return TRUE;
        case ID_CONNECT_LAN_ON:
            pTTT->lpszText = toolTextConnectLan;
            return TRUE;
    }
    // if we do not handle the message then return FALSE to let someone else do it.
    return FALSE;
} 
```

对于在执行报告时切换文件导出的菜单项的用户反馈，我提供了对消息映射的以下更改，然后实施了必要的方法。涉及两种类型的消息，因此我必须添加两个方法和两个新的消息映射条目：

```
// New message map entries to handle the menu item selection event
// and to update the menu item and the toolbar icon with state changes
ON_COMMAND(ID_TOGGLE_SYLK_EXPORT, OnToggleExportSylk)
ON_UPDATE_COMMAND_UI(ID_TOGGLE_SYLK_EXPORT, OnUpdateToggleExportSylk)

// New methods added to the CView derived class

// handle the menu selection event generated by either selecting the menu item
// from the menu or by clicking on the icon in the toolbar.
void CPCSampleView::OnToggleExportSylk()
{
    // Exclusive Or to toggle the indicator bit from 0 to 1 and 1 to 0.
    GetDocument()->ulReportOptionsMap ^= CPCSampleDoc::ulReportOptionsExportSylk;
}

// handle the request from the MFC framework to update the displayed state this
// not only does a check mark against the menu item it also causes the toolbar
// icon to appear depressed if click is set or non-depressed if click is not set
inline void CPCSampleView::OnUpdateToggleExportSylk (CCmdUI* pCmdUI) 
{
    if (GetDocument()->ulReportOptionsMap & CPCSampleDoc::ulReportOptionsExportSylk)
    {
        // SYLK export is turned on so indicate status to the user. This will
        // put a check mark beside the menu item and show the toolbar button depressed
        pCmdUI->SetCheck (1);
    }
    else
    {
        // SYLK export is turned off so indicate status to the user.  This will
        // remove the check mark beside the menu item and show the toolbar button as raised.
        pCmdUI->SetCheck (0);
    }
} 
```

需要更改资源文件来为切换操作提供新按钮以及为切换操作添加新菜单项。我对几个不同的事物使用相同的资源 ID，因为它们都是独立的。因此，资源字符串的 id 与菜单项的 id 相同，工具栏按钮的 id 也相同，以简化我的生活并轻松找到所有特定的点点滴滴。

工具栏资源文件定义如下所示：

```
IDR_MAINFRAME TOOLBAR  16, 15
BEGIN
    BUTTON      ID_CONNECT_LAN_ON
    SEPARATOR
    BUTTON      ID_WINDOW_CLEAR
    SEPARATOR
    BUTTON      ID_TOGGLE_SYLK_EXPORT
    SEPARATOR
    BUTTON      ID_APP_ABOUT
END 
```

菜单的特定部分使用相同的资源 ID 作为切换事件 ID，如下所示：

```
MENUITEM "Export to SYLK file",         ID_TOGGLE_SYLK_EXPORT 
```

然后提供用鼠标显示的状态栏文本，添加了一个字符串表：

```
ID_TOGGLE_SYLK_EXPORT   "Toggle export of SYLK format report files for spreadsheets." 
```

该结构的`lpszText`成员在该结构的 MSDN 文档中描述`TOOLINFO`为：

> 指向包含工具文本的缓冲区的指针，或包含文本的字符串资源的标识符。该成员有时用于返回值。如果需要检查返回值，必须指向一个足够大的有效缓冲区。否则，可以将其设置为 NULL。如果 lpszText 设置为 LPSTR_TEXTCALLBACK，则控件将 TTN_GETDISPINFO 通知代码发送到所有者窗口以检索文本。

回顾这个问题的现有答案，我想知道`if`检查`TTF_IDISHWND`标志的语句。该`TOOLINFO`结构的 MSDN 文档有这样的说法：

> 指示 uId 成员是工具的窗口句柄。如果未设置此标志，则 uId 是工具的标识符。

# c++ - 类名作为向量的对象和函数的参数到 push_back

> ID：15640790
> 
> 赞同：0
> 
> 时间：2013-03-26T15:20:03.293
> 
> 标签：c++, class, vector

我有这个小程序，因为我试图理解作为参数传递的向量和类名。这是程序：

```
#include<iostream>
#include<vector>
using namespace std;

class objectclass{
public:
    void vec_try(){
        cout<<"print out something";
    }
};

class another{
public:
    void run();
    vector<objectclass *>ports;
    void add_obj(objectclass *p){
        ports.push_back(p);
    }
    };

void another::run(){
    //int j=0;
    ports[j]->vec_try();
}
int main(){
another a;
a.run();
system("pause");
return 0;
} 
```

我知道将向量中的类名作为对象传递是可以的，然后使用 push_back 将元素插入该向量中，但是在函数 add_obj(objectclass *p) 中，如果我不想更改定义，我该如何传递值功能。我知道这样的方法：

```
objectclass *p;
p= new objectclass[10]; 
```

但是我的函数已经定义了，而且我想用ports[i]调用函数vec_try()，所以我不知道如何传递值以及它是如何与ports[i]一起工作的。我基本上需要对此进行一些澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:37:45.423

您的`add_obj`函数采用指向`objectclass`对象的指针。因此，要将元素添加到向量中，您需要执行以下操作：

```
another a;

objectclass obj1;  // Create an objectclass
a.add_obj(&obj1);  // Pass its address to add_obj

objectclass obj2;
a.add_obj(&obj2);

objectclass obj3;
a.add_obj(&obj3); 
```

当然，您的向量会保留指向这些对象的指针。当这些对象超出范围并被销毁时，这些指针将指向无效对象。但这在这里无关紧要，因为您的对象仅在`main`.

另一种方法是动态分配您的对象：

```
another a;
a.add_obj(new objectclass());
a.add_obj(new objectclass());
a.add_obj(new objectclass()); 
```

每行动态分配一个`objectclass`对象，然后将指向该对象的指针传递给`add_obj`. 但是，您需要确保最终`delete`以某种方式实现此对象。

您进入向量的第一个元素`push_back`的索引为 0，第二个元素的索引为 1，第三个元素的索引为 2，依此类推。

如果 in `run`，你想遍历向量中的所有对象，你可以这样做：

```
for (int i = 0; i < ports.size(); i++) {
  ports[i]->vec_try();
} 
```

如您所见，这将遍历向量中的所有元素（从 0 到`ports.size()`）并调用`vec_try`每个元素。

使用迭代器有更好的方法来做到这一点，但我将把它留到以后的课程中。

# node.js - node.js socket.io - 跟踪请求的 url

> ID：15640796
> 
> 赞同：0
> 
> 时间：2013-03-26T15:20:15.217
> 
> 标签：node.js, url, express, socket.io

我正在测试给出请求的 URL，但是当我尝试时：

```
http://localhost:4000/foo 
```

浏览器说：Cannot GET /foo

我的服务器代码：

```
var express = require('express');
var app = express();
var http = require('http');
var server = http .createServer(app);
var io = require('socket.io').listen(server);
var url = require('url');

server.listen(4000);

app.get('/', function (request, response) {
var pathname = url.parse(request.url).pathname;
 console.log("currentpathname: "+pathname);
}); 
```

我想为：

```
 http://localhost:4000/foo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:43:00.677

Express 只处理您告诉它处理的路径，它返回 404 的所有其他路径以及类似的消息`Cannot GET /foo`

`app.get('/'`仅处理`'/'`您需要使用的所有路径`app.get'*'`

作为说明，规范

```
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1'); 
```

相当于

```
express().all('*', function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1'); 
```

为了了解事情是如何工作的，我建议只玩一下核心 http 模块。

# xpath - XPath 提取标签内的文本

> ID：15640797
> 
> 赞同：0
> 
> 时间：2013-03-26T15:20:16.233
> 
> 标签：xpath, html-parsing

HTML 结构如下所示：

```
<div class="Parent"> 
  <div id="A">more tags and text</div>  
  <div id="B">more tags and text</div> 
  more tags
  <p> and text </p>
</div> 
```

我想仅从父级和除 A 和 B 子级之外的标签中提取文本。我试过 **/div[@class='Parent']//text()**

它从所有后代节点中提取文本，所以一个像**/div[@class='Parent']//text()[not(self::div)]这样的约束**

但这并没有改变任何事情。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:15:54.070

```
/div[@class='Parent']/*[not(self::div and (@id='A' or @id='B'))]//text() | /div[@class='Parent']/text() 
```

# r - Weibull 分布的置信区间

> ID：15640802
> 
> 赞同：2
> 
> 时间：2013-03-26T15:20:24.313
> 
> 标签：r, distribution, confidence-interval, weibull

我有用于执行极值分析（计算回报水平）的风数据。我将*R*与包“evd”、“extRemes”和“ismev”一起使用。

我正在拟合 GEV、Gumbel 和 Weibull 分布，以估计某个时期 T 的回报水平 (RL)。
对于 GEV 和 Gumbel 案例，我可以使用*extRemes::return.level()*获得 RL 和置信区间功能。

一些代码：

```
require(ismev)
require(MASS)

data(wind)
x = wind[, 2]
rperiod = 10

fit <- fitdistr(x, 'weibull')
s <- fit$estimate['shape']
b <- fit$estimate['scale']

rlevel <- qweibull(1 - 1/rperiod, shape = s, scale = b)

## CI around rlevel
## ci.rlevel = ?? 
```

但是对于 Weibull 案例，我需要一些帮助来生成 CI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:44:01.847

我怀疑极其正确的答案是联合置信区域是一个椭圆或一些弯曲的香肠形状，但是您可以使用该函数从拟合对象中提取参数的方差估计，`vcov`然后构建标准误差，其 +/- 1.96 SE应该提供信息：

```
> sqrt(vcov(fit)["shape", "shape"])
[1] 0.691422
> sqrt(vcov(fit)["scale", "scale"])
[1] 1.371256

> s +c(-1,1)*sqrt(vcov(fit)["shape", "shape"])
[1] 6.162104 7.544948
> b +c(-1,1)*sqrt(vcov(fit)["scale", "scale"])
[1] 54.46597 57.20848 
```

计算单个参数的 CI 的常用方法是假设正态分布并使用 theta+/- 1.96*SE(theta)。在这种情况下，您有两个参数，因此对这两个参数执行此操作会给您一个“框”，即间隔的 2D 模拟。真正正确的答案将是在“比例”-“形状”参数空间中更复杂的东西，并且可能最容易通过模拟方法实现，除非您对理论的掌握比我更好。

# sql - 按顺序连接 XML 数据，然后使用 XPath 取出数据

> ID：15640805
> 
> 赞同：0
> 
> 时间：2013-03-26T15:20:28.047
> 
> 标签：sql, xml, oracle, xpath, concatenation

首先，我的桌子看起来像这样..

```
Checkpoint_Data
---------------
Checkpoint_Id
Sequence_Number
Checkpoint_Data

Checkpoint
----------
Checkpoint_Id
Location
Transaction_Id

Transaction
-----------
Transaction_Id
Name
Time 
```

Checkpoint_data 包含分解的 XML，序列号决定了它如何组合在一起

我想将所有 Checkpoint 的链接 Checkpoint_Data 按顺序 (1,2,..) 连接在一起，然后使用 XPath 提取一些我想要的数据。

这是我现在的查询，但它没有进行任何连接，并且无法正常工作：

```
SELECT distinct(xmltype(data.trans_data).extract('//somePath/text()').getStringVal())  
FROM Checkpoint_Data cpd, Checkpoint cp, Transaction tr
WHERE cpd.checkpoint_id = cp.checkpoint_id
     and cp.location = 'someLocation'
     and cp.trans_id = tr.trans_id
     and tr.time >= to_date('3/26/2013:8:00 AM', 'mm/dd/yyyy:hh:miam')  
     and tr.time <= to_date('3/26/2013:11:00 AM', 'mm/dd/yyyy:hh:miam') 
```

如何连接 Checkpoint_Data 中包含的分解 XML，然后使用 XPath 从中提取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:56:27.770

PLSQL 方法：

```
SQL> create or replace function get_xml_doc(p_id Checkpoint_Data.checkpoint_id%type)
  2    return xmltype deterministic
  3  is
  4    v_xml clob;
  5  begin
  6    for r_row in (select cd.checkpoint_data
  7                    from Checkpoint_Data cd
  8                   where cd.checkpoint_id = p_id
  9                   order by cd.sequence_number)
 10    loop
 11      v_xml := v_xml || r_row.checkpoint_data;
 12    end loop;
 13
 14    return xmltype(v_xml);
 15  end get_xml_doc;
 16  /

Function created.

SQL>
SQL> select cp.checkpoint_id, get_xml_doc(cp.checkpoint_id) xml_doc
  2    from checkpoint cp, transaction tr
  3   where cp.location = 'someLocation'
  4     and cp.trans_id = tr.trans_id
  5     and tr.time <= sysdate
  6   group by cp.checkpoint_id;

CHECKPOINT_ID XML_DOC
------------- ----------------------------------------
            1 <root>
                <a>1st node</a>
                <b>2nd node</b>
                <compType>
                  <a>foo</a>
                </compType>
                <d>another node</d>
              </root> 
```

或者如果 PLSQL 不是一个选项，则只是 SQL：

您可以使用`CDATA`例如`XMLAGG`：

```
SQL> select * from Checkpoint_Data;

CHECKPOINT_ID SEQUENCE_NUMBER CHECKPOINT_DATA
------------- --------------- --------------------------------------------------
            1               1 <root><a>1st node</a><b>2nd node</b>
            1               2 <compType><a>foo</a></compType><d>another node</d>
            1               3 </root>

SQL> select c.xmlstr.transform(xmltype('<xsl:stylesheet version="1.0"
  2          xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  3          <xsl:output method="xml" omit-xml-declaration = "yes" version="1.0" />
  4          <xsl:template match="/">
  5              <xsl:for-each select="/root/nde">
  6                  <xsl:sort select="@seq"/>
  7                  <xsl:value-of select="." disable-output-escaping="yes" />
  8              </xsl:for-each>
  9          </xsl:template>
 10      </xsl:stylesheet>')) xml
 11    from (SELECT cpd.checkpoint_id,xmlelement("root", xmlagg(
 12                 xmltype('<nde seq="' || cpd.sequence_number || '"><![CDATA['||cpd.checkpoint_data||']]></nde>'))) xmlstr
 13          FROM Checkpoint_Data cpd, Checkpoint cp, Transaction tr
 14          WHERE cpd.checkpoint_id = cp.checkpoint_id
 15               and cp.location = 'someLocation'
 16               and cp.trans_id = tr.trans_id
 17               and tr.time <= sysdate
 18           group by cpd.checkpoint_id) c;

XML
--------------------------------------------------------------------------------
<root><a>1st node</a><b>2nd node</b><compType><a>foo</a></compType><d>another no
de</d></root> 
```

所以我把每个 xml 片段转换成一个 CDATA 节点，比如：

```
<node seq="1"><!CDATA[<root><a>1st node</a><b>2nd node</b>]]></node> 
```

然后用来`XMLAGG`将它们放入一个文档中，例如

```
<root>
  <node seq="1"><!CDATA[<root><a>1st node</a><b>2nd node</b>]]></node>
  <node seq="3"><!CDATA[</root>]]></node>
  <node seq="2"><!CDATA[<compType><a>foo</a></compType><d>another node</d>]]></node>
</root> 
```

注意：这些序列可能会被 group by.. 混杂在一起，所以我应用了 XSL 对它们进行排序并打印它们（如果需要，您可以编写自己的聚合来按顺序执行此操作，或者只是编写一个`pl/sql`例程来获取所有片段和按顺序为您附加它们，如果这是一个选项，您可能更喜欢）。

注意：在 10g 中，oracle 似乎忽略了禁用输出转义（在 11g 中可以）。如果你使用 10g，你可以添加一个调用`dbms_xmlgen.convert(clob, 1)`来解码它。

```
select dbms_xmlgen.convert(
         xmlserialize(
           content c.xmlstr.transform(xmltype('<?xml version="1.0" encoding="ISO-8859-1"?>
    <xsl:stylesheet version="1.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output method="xml" version="1.0" omit-xml-declaration = "yes"  encoding="UTF-8" indent="no"/>
        <xsl:template match="/">
            <xsl:for-each select="/root/node">
                <xsl:sort select="@seq"/>
                <xsl:value-of select="." disable-output-escaping="yes"/>
            </xsl:for-each>
        </xsl:template>
    </xsl:stylesheet>')) as clob), 1) xsl, xmlstr
  from (SELECT cpd.checkpoint_id,xmlelement("root", xmlagg(
               xmltype('<node seq="' || cpd.sequence_number || '"><![CDATA['||cpd.checkpoint_data||']]></node>'))) xmlstr
        FROM Checkpoint_Data cpd, Checkpoint cp, Transaction tr
        WHERE cpd.checkpoint_id = cp.checkpoint_id
             and cp.location = 'someLocation'
             and cp.trans_id = tr.trans_id
             and tr.time <= sysdate
         group by cpd.checkpoint_id) c; 
```

小提琴：[http ://sqlfiddle.com/#!4/e1bf8/1](http://sqlfiddle.com/#!4/e1bf8/1)

# css - Firefox 和 chrome 中的 CSS span/div 宽度不同

> ID：15640806
> 
> 赞同：1
> 
> 时间：2013-03-26T15:20:28.697
> 
> 标签：css, width, rendering, html

试图在一行文本中找到一个空白，如下所示：

```
Text: (absolute positioned field here) more text 
```

在 Chrome 中，它将其推送到恰到好处的数量，因此“更多文本”就在该字段的右侧。在 Firefox 中，它显示的太靠左，因此文本隐藏在字段后面。

我在两者之间有一个绝对定位的字段。“更多文本”在一个跨度中，我尝试使用不同的测量单位以及使用宽度、左侧边距和位置：相对来定位它。Firefox 中的度量单位似乎更少。这基本上就是我所拥有的：

```
<div> Text <input /><span class="moveright"> more text </span> </div>
.moveright {display: inline-block; position:relative; left:160px} 
```

谢谢您的帮助！

**编辑：jsFiddle：http:** [//jsfiddle.net/7jmP4/](http://jsfiddle.net/7jmP4/)

在小提琴中，我故意将其隔开以产生我所看到的内容。如果我在 Chrome 和 Firefox 中查看它，它完美地产生了我遇到的问题 - 在 Firefox 中，“更多文本”正在混入顶部的文本字段。

# screen-readers - JAWS 屏幕阅读器将 -1 的 tabIndex 添加到带有图像的锚点

> ID：15640810
> 
> 赞同：5
> 
> 时间：2013-03-26T15:20:36.557
> 
> 标签：screen-readers, jaws-screen-reader

我有三个锚标签，一个带有文本，两个带有带有有效替代文本的图像。带有文本的锚标记在 JAWS 上运行良好，并且可以正确读取。但是，由于某种原因，对于内部带有图像的锚点，正在应用 -1 的 tabIndex，这意味着它们被跳过了。

这正在 IE 9 中进行测试。有什么理由应该发生这种情况吗？有没有办法防止它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T20:59:29.360

`tabindex`我在将 JAWS的链接设置为 -1时遇到了类似的问题。这是带有 JAWS 14.0 的 IE9

该问题最终是由 JAWS 中的“Web / HTML / PDFs”->“链接”下名为“过滤连续重复链接”的设置引起的。JAWS 对该功能的描述如下：

> 此选项控制是否过滤指向同一位置（一个图形和一个文本）的连续链接。选择后，只会宣布文本链接。默认情况下选中此复选框。

例如，假设您有一个图标/文本链接对，它们都做同样的事情：

```
<a href="javascript:void(0)" onclick="test();">
    <img src="untitled.png" title="Test" alt="Test">
</a>
<a href="javascript:void(0)" onclick="test();">TEST</a> 
```

选中设置后，JAWS 将从标签顺序中删除图像，只留下如下文本链接：

```
<a tabindex="-1" href="javascript:void(0)" onclick="test();">
    <img src="untitled.png" title="Test" alt="Test">
</a>
<a href="javascript:void(0)" onclick="test();">TEST</a> 
```

根据我的经验和一些基本测试，我相信这仅适用于图像链接后面跟着重复文本链接的情况，反之亦然。它也适用于图像/文本对之后的任何重复图像链接。

我遇到的问题是 JAWS 似乎只比较`href`属性而没有考虑其他属性，例如`onclick`or `onkeydown`。将此与应用于初始图像/文本链接对之后的任何图像链接的重复删除配对，您最终可能会遇到这样的情况，即图像/文本链接对之后的图像链接在不应该出现的情况下出现。例子：

```
<a href="javascript:void(0)" onclick="test();">
    <img src="untitled.png" title="Test" alt="Test">
</a>

<a href="javascript:void(0)" onclick="test();">TEST</a>

<a href='javascript:void(0)' onclick="dontTest();">
    <img src="untitled2.png" title="Test" alt="Test">
</a> 
```

结果：

```
<a tabindex="-1" href="javascript:void(0)" onclick="test();">
    <img src="untitled.png" title="Test" alt="Test">
</a>

<a href="javascript:void(0)" onclick="test();">TEST</a>

<a tabindex="-1" href='javascript:void(0)' onclick="dontTest();">
    <img src="untitled2.png" title="Test" alt="Test">
</a> 
```

注意：`href`设置`javascript:void(0)`为 纯属巧合。`href`只要所有链接的值都相同，这种行为应该可以使用任何值重现。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T04:21:27.353

JAWS 自动将 tabindex="-1" 添加到具有 href="javascript:void(0)" 的锚标记。我使用 href="#" 来解决与您相同的问题。

# java - HttpMethod.releaseConnection() 和 EntityUtils.consume(entity) 的问题

> ID：15640811
> 
> 赞同：0
> 
> 时间：2013-03-26T15:20:37.247
> 
> 标签：java, android, rest, apache-httpclient-4.x

我遇到了一个问题：我刚刚将以下代码从 NetBeans 复制到 Eclipse（一个 ADT 项目）。我已经导入了我在 NetBeans 中使用的所有相同的库，但我有 2 个错误，在以下几行中：

`EntityUtils.consume(entity);`- EntityUtils 类型的方法 consume(HttpEntity) 未定义

`httpPut.releaseConnection();`- HttpPut 类型的方法 releaseConnection() 未定义

完整代码：

```
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.auth.AuthScope;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPut;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.util.EntityUtils;
import com.android.lul.classes.User;

public class UserService {

    private static final String BASE_URI = "http://localhost:8080/LULServices/webresources";

    public static String Login (String login, String password, String ipAdd)
    {
        String toReturn = null;

        final DefaultHttpClient httpclient = new DefaultHttpClient();

        try {
                httpclient.getCredentialsProvider().setCredentials(
                    new AuthScope("localhost", 8080),
                    new UsernamePasswordCredentials("xxxx", "xxxx"));

        HttpPut httpPut = new HttpPut(BASE_URI + "/services.users/login");
        HttpConnectionParams.setConnectionTimeout(httpclient.getParams(), 10000);

        httpPut.addHeader("Content-type", "multipart/form-data");

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("login", "login"));
        nameValuePairs.add(new BasicNameValuePair("password", "password"));

        httpPut.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse response = httpclient.execute(httpPut);

        try {
                HttpEntity entity = response.getEntity();
                String putResponse = EntityUtils.toString(entity);
                toReturn = putResponse;
                EntityUtils.consume(entity);

            } finally {
                httpPut.releaseConnection();
            }

            } finally {
                httpclient.getConnectionManager().shutdown();

            return toReturn;
        } 
```

你能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:32:14.210

Android 带有预打包的 Apache HttpClient 版本，它没有这些方法。他们不再支持开发，并且该代码已过时。

Android 团队建议您对新代码使用[HttpUrlConnection](http://developer.android.com/reference/java/net/HttpURLConnection.html)而不是 HttpClient。更多信息可以在Android 开发者网站上的这个[博客中找到。](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-13T09:34:34.097

我认为您应该遵循一个更简单的示例，因为这似乎是为了上传文件（多部分/表单数据），但关于您的代码中的具体问题：

1.  而不是`EntityUtils.consume(entity);`你可以做`entity.consumeContent();` [http://developer.android.com/reference/org/apache/http/HttpEntity.html](http://developer.android.com/reference/org/apache/http/HttpEntity.html)

2.  HTTPRequest 类（HttpPost、HttpPut）没有任何`releaseConnection()`方法。可能是因为他们不需要被释放（如果我错了，请有人纠正我）。该方法通常适用于持久连接，但此处并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:30:35.250

检查您的进口；您在新项目中使用的是什么版本的 Apache HttpComponents？

# matlab - 使用标题MATLAB中的数字将数据从for循环输出到.mat文件

> ID：15640814
> 
> 赞同：0
> 
> 时间：2013-03-26T15:20:39.500
> 
> 标签：matlab, for-loop, save

我需要为以下数据输出 .mat 文件。我需要一个文件将单元格 (1,1) 设为 Mean_RPM_list1，将单元格 (2,1) 设为 Mean_RPM_list2 等。然后我需要另一个文件将单元格 (1,1) 设为 Mean_Torque_list1 以获取单元格(1, 1）......等等。

任何人都可以为我阐明这一点吗？此外，如果有人知道如何自动调用矩阵 A 和 B，这样我就可以得到 A = [Mean_rpm1:Mean_rpmMAX]，那也会很有帮助。

TIA 寻求帮助。

```
A = [Mean_rpm1 Mean_rpm2 Mean_rpm3 Mean_rpm4 Mean_rpm5 Mean_rpm6 Mean_rpm7 Mean_rpm8 Mean_rpm9 Mean_rpm10 Mean_rpm11 Mean_rpm12];

B = [Mean_torque1 Mean_torque2 Mean_torque3 Mean_torque4 Mean_torque5 Mean_torque6 Mean_torque7 Mean_torque8 Mean_torque9 Mean_torque10 Mean_torque11 Mean_torque12];

plot(A,B,'*')

for i = 1:num_bins;
  bin = first + ((i-1)/10);
  eval(sprintf('Mean_RPM_list%0.f = A;',bin*10));
  eval(sprintf('Mean_Torque_list%0.f = B;',bin*10));  
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:44:02.377

首先，您应该避免使用所有这些单独的变量。存在数组、元胞数组和结构数组等数据类型来帮助您解决此问题。如果您希望每个变量与一个名称相关联，您可以使用结构体数组。我在下面做了一个例子。`Mean_rpm1`不要像你现在所做的那样分配一个值，而是将它分配给`meanStruct.Mean_rpm1`然后保存整个结构。

```
% as you generate values for each variable, assign them to the
% appropriate field.
meanStruct.Mean_rpm1 = [10:10];
meanStruct.Mean_rpm2 = [12:15];
meanStruct.Mean_rpm3 = [13:20];
meanStruct.Mean_rpm4 = [14];
meanStruct.Mean_rpm5 = [15:18];
meanStruct.Mean_rpm6 = [16:20];
meanStruct.Mean_rpm7 = [17:22];
meanStruct.Mean_rpm8 = [18:22];
meanStruct.Mean_rpm9 = [19:22];
meanStruct.Mean_rpm10 = [20:22];
meanStruct.Mean_rpm11 = [21:22];
meanStruct.Mean_rpm12 = [22:23];

% save the structure array
save('meanValues.mat','meanStruct')

% load and access the structure array
clear all
load('meanValues.mat')
temp = meanStruct.Mean_rpm3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:36:07.197

首先，创建一组名称因数字而异的变量确实是个坏主意。如您所见，处理此类变量非常困难，您总是必须使用 eval（或其他相关）语句。

创建元胞数组 Mean_rpm 并以 Mean_rpm{1} 等方式访问其元素要容易得多。

如果向量是数字且大小相同，您还可以制作 2D/3D 数组。然后以 Mean_rpm(:,:,1) 等方式访问。

接下来，要将元胞数组存储到 mat 文件中，您必须在 MATLAB 中创建此数组。没有选项（至少现在）可以通过循环的部分来完成。（但是您可以使用 matfile 对象对数字向量和矩阵进行此操作。）那么为什么需要这个中间 Mean_RPM_list 变量呢？只是`Mean_RPM_list{bin*10} = A`在你的循环中做。

对于您的第一个问题，如果您已经拥有这些变量，则必须在循环中使用 eval 。就像是

```
A = [];
for k=1:K
    eval(sprintf('A{k} = [A, Mean_rpm%d];',k));
end 
```

您还可以获取所有相似变量的名称并将它们组合起来。

```
varlist = who('Mean_rpm*');
A = cell(1,numel(varlist);
for k = 1:numel(varlist)
    eval('A{k} = varlist{k};');
end 
```

这是一个使用 CELL2FUN 的无循环：

```
A=cellfun(@(x)evalin('base',x),varlist,'UniformOutput',0); 
```

# image - 动画 GIF - 避免存储重复的帧两次

> ID：15640818
> 
> 赞同：4
> 
> 时间：2013-03-26T15:20:50.417
> 
> 标签：image, matlab, animation, image-processing, gif

我有一个与此类似的动画 gif，其中动画的循环性质导致某些帧在动画的一个完整循环中重复两次。

![在此处输入图像描述](../Images/7126f7fffd381e4e148c3adb79beb301.png) （从[这里](http://en.wikipedia.org/wiki/File:Newtons_cradle_animation_book_2.gif)）

我目前将每个帧分别存储在 gif 中。是否可以只存储每个重复的帧一次，以有效地减少所需的存储空间？

我正在使用[`movie2gif`转换器](http://www.mathworks.co.uk/matlabcentral/fileexchange/17463-movie-to-gif-converter)在 MATLAB 中创建我的 gif ，但我会对创建 gif 的替代方法或后处理工具感到满意。

**编辑**

我所说的帧重复的意思在这个示例图像的上下文中得到了最好的解释。当左手球离开球排时，显示了一个框架。几帧之后，当左手球现在正在返回以再次击中那排球时，该精确帧会重复。由于帧的顺序，目前需要将该帧存储两次。

为了澄清我在寻找什么：我想要一种保存 gif 的方法（或对 gif 进行后处理），以便我可以保留完整的动画序列（例如 30 帧），但重复的帧被软链接回它们的第一次展示，从而消除了存储它们两次的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:25:02.620

从 movie2gif 的描述及其输入参数来看，这似乎是不可能的。此外，在阅读 gif 的工作原理（和 LZW）压缩时，我可以想象甚至不可能像这样减小 gif 的大小。

如果您只想保存最低要求的图像并且不介意在看到图像之前构建图像，那么您可以只存储每个图像和一个索引向量。

在您的情况下，可能会找到一种方法来保存一半的图像，然后循环播放：前进-后退-前进......但我不知道这是否可能。

# c# - 动态嵌套循环在c#中生成数组元素的所有可能组合

> ID：15640819
> 
> 赞同：1
> 
> 时间：2013-03-26T15:20:59.137
> 
> 标签：c#, .net, arrays, loops, dynamic

我已经在 stackoverflow 和网络上搜索了类似的问题，但我找不到我需要的解决方案。

我正在编写一个代码列表生成器。

例如，我有一个字符列表，例如`List<char> { 'a', 'b', 'c' };`.

我有几个设置，比如`(int)minLength`of`2`和 a `(int)maxLength`of `3`。

我想要这个输出：

```
aa
ab
ac
ba
bb
bc
ca
cb
cc

aaa
aab
aac
aba
abb
abc
aca
acb
acc

baa
bab
bac
bba
bbb
bbc
bca
bcb
bcc

caa
cab
cac
cba
cbb
cbc
cca
ccb
ccc 
```

在一般情况下，我只会创建多维循环，但由于 minLength、maxLength 和 charList 值不同，我必须动态地执行此操作。

所以我要像这个例子一样使用“自调用函数”：

```
 private void loop() {
        for( int i = 0; i < num; i++ ) {
            // stuff
            loop();
        }
    } 
```

到目前为止，我已经制作了以下一堆代码，但在这个阶段我被卡住了......：

```
 Thread mainThread;

    List<char> azlower;
    List<char> azupper;
    List<char> nullnine;

    List<char> totalChars;

    int totalNum;

    int levelCounter;

    bool running;

    public Form1() {
        InitializeComponent();
    }

    private void init() {
        azlower = new List<char> { 'a', 'b', 'c' , 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z' };
        azupper = new List<char> { 'A', 'B', 'C' , 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z' };
        nullnine = new List<char> { '0', '1', '2' /* , '3', '4', '5', '6', '7', '8', '9' */ };

        totalChars = new List<char> ();

        running = false;
    }

    private void button1_Click( object sender, EventArgs e ) {
        if( !running ) {
            init();

            // Start
            if( checkBoxAZ1.Checked ) {
                foreach( char character in azlower ) {
                    totalChars.Add( character );
                }
            }
            if( checkBoxAZ2.Checked ) {
                foreach( char character in azupper ) {
                    totalChars.Add( character );
                }
            }
            if( checkBox09.Checked ) {
                foreach( char character in nullnine ) {
                    totalChars.Add( character );
                }
            }
            if( checkBoxS.Checked && textBoxSpec.Text != "" ) {
                char[] specArray = textBoxSpec.Text.ToCharArray();
                foreach( char character in specArray ) {
                    totalChars.Add( character );
                }
            }
            totalNum = totalChars.Count;
            levelCounter = Int32.Parse( textBoxMinLength.Text );
            mainThread = new Thread( new ThreadStart( run ) );
            button1.Text = "Stop";
            running = true;
            mainThread.Start();
        } else {
            mainThread.Abort();
            button1.Text = "Start";
            running = false;
        }
    }

    private void run() {
        for( int i = 0; i < totalNum; i++ ) {
            Invoke( ( MethodInvoker ) delegate {
                write( totalChars[ i ].ToString() );
                if( i == totalNum - 1 && levelCounter == Int32.Parse( textBoxMaxLength.Text ) ) {
                    write( "\n" );
                }
            } );
            if( levelCounter < Int32.Parse( textBoxMaxLength.Text ) ) {
                levelCounter++;
                run();
            }
        }
        return;
    }

    private void write( string line ) {
        richTextBox1.Text += line;
    } 
```

但是使用上面的设置和我的代码，输出看起来像这样：

```
aabc
bc 
```

我想我只是犯了一个思维错误，不是吗？

所以伙计们，你对我有什么建议吗？

我也看过笛卡尔积，但我认为它不适用于仅一个数组......

谢谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:29:31.063

这是一个使用递归生成它的示例。

```
IEnumerable<string> GenerateCode(int length, int min, IEnumerable<char> chars)
{
    if (length == 0)
    {
        yield return string.Empty;
        yield break;
    }

    foreach (var mid in GenerateCode(length - 1, min, chars))
    {
        foreach (var c in chars)
        {
            var t = mid + c;
            if (length >= min)
                Console.WriteLine(t); // replace with where you want to put the results

            yield return t;
        }
    }
}

// now call this method:
GenerateCode(3 /*max length*/, 2 /*min length*/, new [] { 'a', 'b', 'c'  }); 
```

但除非这是一个练习，否则为什么要生成所有可能的变化？如果您提供实际要求，可能会有更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:29:17.017

您可以使用回溯算法，代码如下。还包括输出以证明代码有效。

如果您需要将参数传递给线程，请参阅[此答案](https://stackoverflow.com/questions/2812719/passing-parameters-to-a-thread)。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        const int MIN_LENGTH = 2;
        const int MAX_LENGTH = 3;
        static IList<string> vals;
        static IList<string> results;

    static void go(string cur)
    {
        if (cur.Length > MAX_LENGTH)
        {
            return;
        }
        if (cur.Length >= MIN_LENGTH && cur.Length <= MAX_LENGTH)
        {
            results.Add(cur);
        }

        foreach (string t in vals)
        {
            cur += t;
            go(cur);
            cur = cur.Substring(0, cur.Length - 1);
        }
    }
    static int Main(string[] args)
    {
        vals = new List<string>();
        vals.Add("a");
        vals.Add("b");
        vals.Add("c");

        results = new List<string>();
        go("");
        results = results.OrderBy(x => x.Length).ToList();

        foreach (string r in results)
        {
            Console.WriteLine(r);
        }

        return 0;
    }
} 
```

输出

```
aa
ab
ac
ba
bb
bc
ca
cb
cc
aaa
aab
aac
aba
abb
abc
aca
acb
acc
baa
bab
bac
bba
bbb
bbc
bca
bcb
bcc
caa
cab
cac
cba
cbb
cbc
cca
ccb
ccc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:33:58.500

```
public static IEnumerable<IEnumerable<T>> Permutations<T>(IEnumerable<T> source)
{
    if (source == null)
        throw new ArgumentNullException("source");
    return permutations(source.ToArray());
}

private static IEnumerable<IEnumerable<T>> permutations<T>(IEnumerable<T> source)
{
    IEnumerable<T> enumerable = source as List<T> ?? source.ToList();
    var c = enumerable.Count();
    if (c == 1)
        yield return enumerable;
    else
        for (int i = 0; i < c; i++)
            foreach (var p in permutations(enumerable.Take(i).Concat(enumerable.Skip(i + 1))))
                yield return enumerable.Skip(i).Take(1).Concat(p);
}

private static IEnumerable<string> Subsets(char[] chars)
{
    List<string> subsets = new List<string>();

    for (int i = 1; i < chars.Length; i++)
    {
        subsets.Add(chars[i - 1].ToString(CultureInfo.InvariantCulture));
        int i1 = i;
        List<string> newSubsets = subsets.Select(t => t + chars[i1]).ToList();
        subsets.AddRange(newSubsets);
    }
    subsets.Add(chars[chars.Length - 1].ToString(CultureInfo.InvariantCulture));
    return subsets;
}
private static void Main()
{
    char[] chars = new[]{'a','b','c'};
    var subsets = Subsets(chars);
    List<string> allPossibleCombPerm = 
        subsets.SelectMany(Permutations).Select(permut => string.Join("", permut)).ToList();
    allPossibleCombPerm.ForEach(Console.WriteLine);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T04:04:23.660

您可以使用以下功能。T 是将组合到字符串中的元素的类型（将在每个项目上调用 ToString()）。您可以选择为表示组合的字符串使用前缀和分隔符，因此它们看起来像 myprefix_A_1、myprefix_A_2 等，其中 _ 将是分隔符。

您必须使用 level=1 和 tmpList=null 调用此函数。

```
 public static IEnumerable<string> Combine<T>(string prefix, 
                                              string separator, 
                                              List<List<T>> collections, 
                                              int level, List<string> tmpList)
    {
        if (separator == null)
            separator = "";

        if (prefix == null)
            prefix = "";

        List<string> nextTmpList  = new List<string>();
        int length = collections.Count();

        if (tmpList == null || tmpList.Count == 0)
        {
            tmpList = new List<string>();
            foreach (var ob in collections.Last())
                tmpList.Add(ob.ToString());
        }

        if(length == level)
        {
            foreach (string s in tmpList)
                nextTmpList.Add(prefix + separator + s.ToString());
            return nextTmpList;
        }

        foreach (var comb in tmpList)
            foreach(var ob in collections[length - level - 1])
                nextTmpList.Add(ob.ToString() + separator + comb);
        return Combine(prefix, separator, collections, level + 1, nextTmpList);

    } 
```

例子：

```
Combine<int>("G1", "_", new List<List<int>>() { new List<int>() { 1, 3}, new List<int>() {2, 4 } }, 1, null); 
```

输出：

```
G1_1_2     G1_3_2    G1_1_4    G1_3_4 
```

# jquery - 如何为 JQuery addClass/removeClass 函数设置动画？

> ID：15640820
> 
> 赞同：8
> 
> 时间：2013-03-26T15:21:00.770
> 
> 标签：jquery, jquery-animate, addclass, removeclass

我想知道如何为 JQuery addClass/removeClass 函数设置动画？

对于动画功能，似乎我必须放置一些 CSS 属性，但是如果我有一个类使每次触发单击功能时元素显示为块，而所有元素在 CSS 中显示为隐藏。如何为这个过程设置动画？

这是我的代码：

```
<script src="js/jquery-1.9.1.min.js"></script>
<script>

    var allSlides = $('li');

    $('#nextSlide').click(function(){
        var nextSlide = $('.active').next();
        if (nextSlide.length == 0)
        {
            var nextSlide = allSlides.first();
        }
        $('.active').removeClass('active');
        nextSlide.addClass('active');
        return false;
    });

    $('#prevSlide').click(function(){
        var prevSlide = $('.active').prev();
        if (prevSlide.length == 0)
        {
            var prevSlide = allSlides.last();
        }
        $('.active').removeClass('active');
        prevSlide.addClass('active');
        return false;
    });

</script> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T15:24:12.970

您可以将 CSS3 过渡属性应用于使用 jQuery 操作的元素。这是一个带有供应商前缀的示例：

```
element {
    -webkit-transition: all 2s; // Chrome
    -moz-transition: all 2s; // Mozilla
    -o-transition: all 2s; // Opera
    transition: all 2s;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:49:46.133

如果你使用 jQueryUI，你可以使用 $.toggleClass(); 功能。

[http://api.jqueryui.com/toggleClass/](http://api.jqueryui.com/toggleClass/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:28:42.580

你可以使用 jQuery [.fadeIn()](http://api.jquery.com/fadeIn/)或者你可以使用 CSS3 过渡：

```
#nextSlide, #prevSlide {
  display: none;
  -webkit-transition: display .5s ease;
  -moz-transition: display .5s ease;
  -o-transition: display .5s ease;
}
.active {
  transition: display .5s ease;
  -webkit-transition: display .5s ease;
  -moz-transition: display .5s ease;
  -o-transition: display .5s ease;
} 
```

那应该对你有用。您可以通过替换`display`转换样式来添加任何其他转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-11T19:38:55.690

您绝对可以使用 jquery 为添加/删除类设置动画。请检查以下格式

```
.removeClass( className [, duration ] [, easing ] [, complete ] ) 
```

下面的示例代码

```
$( "div" ).click(function() {
   $( this ).removeClass( "big-blue", 1000, "easeInBack" );
}); 
```

[参考链接](http://api.jqueryui.com/removeclass/)

***注意：***但是您必须添加**jquery-ui.js**文件才能使其工作。

```
<script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script> 
```

希望这会有所帮助。谢谢

# jquery - 无限滚动 jQuery 插件：如何修复从“动画”左侧到页面中心的加载图形？

> ID：15640828
> 
> 赞同：0
> 
> 时间：2013-03-26T15:21:22.137
> 
> 标签：jquery, html, css, infinite-loop

我正在使用 Paul Irish 的 Infinite Scroll jQuery 插件，我注意到每次我在页面上加载更多内容时，它都会将以下 HTML 标记作为加载图形附加到 DOM 中：

```
<div id="infscr-loading" style="display: none; width: 100%;">
    <img alt="Loading..." src="loading.gif" />
    <div></div>
</div> 
```

如果您仔细观察加载图形从 DOM 中取出，然后在加载新内容后重新插入，则图形实际上是从页面左侧动画到中心。如何消除这种可能无意的“动画”？我不太确定这实际上是预期的行为，而是我认为这是上述标记与 DOM 分离并重新插入的结果......不过我可能是错的。

有没有办法确保加载图形始终出现在准确的中心并且没有“动画”？

这是脚本的链接：[https ://github.com/paulirish/infinite-scroll/blob/master/jquery.infinitescroll.js](https://github.com/paulirish/infinite-scroll/blob/master/jquery.infinitescroll.js)

我没有看到任何类型的 CSS 或 JS 产生这种效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-11T13:56:56.650

我已通过 CSS 将加载图像居中：

```
#infscr-loading{
    margin-left:auto;
    margin-right:auto;
    text-align:center;
}
#infscr-loading div{
    margin-left:auto;
    margin-right:auto;
    width:360px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-09T01:30:20.597

你可以删除它

```
('#infscr-loading').remove();
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-06T01:06:22.493

*这已经通过无限滚动 v2.1.0 进行了测试。*

**居中加载指示器**

在您的 CSS 中，根据需要设置样式`#infscr-loading`。使动画和文本居中：

```
#infscr-loading {
    text-align: center;
} 
```

您还可以定义一个完全自定义的加载指示器（id`infscr-loading`不是必需的：

```
$('#content').infinitescroll({
    loading: {
        msg: $('<div style="text-align: center">Loading…&lt;/div>')
    }
}); 
```

**禁用动画**

```
$('#content').infinitescroll({
    loading: {
        speed: 0 // default: 'fast'
    }
}); 
```

# windows - USB驱动器上的巧克力设置

> ID：15640831
> 
> 赞同：2
> 
> 时间：2013-03-26T15:21:37.833
> 
> 标签：windows, chocolatey

我第一次尝试设置 Chocolatey。我的最终目标是能够将软件包安装在 USB 驱动器上，该驱动器在我的计算机上显示为 F：因此按照[Chocolatey wiki 中的说明](https://github.com/chocolatey/chocolatey/wiki/Installation)，我在 F 驱动器上创建了一个名为 Chocolatey 的文件夹，并将环境变量 ChocolateyInstall 设置为`F:/Chocolatey`. 我按照基本指示，打开命令提示符，然后粘贴以下内容。

```
@powershell -NoProfile -ExecutionPolicy unrestricted -Command "iex ((new-object net.webclient).DownloadString('http://chocolatey.org/install.ps1'))" && SET PATH=%PATH%;%systemdrive%\chocolatey\bin 
```

安装后，我按如下方式进入 PowerShell 命令提示符并尝试安装 Notepad++ 我得到以下信息：

```
C:\Windows\system32>cinst notepadplusplus
The filename, directory name, or volume label syntax is incorrect. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:59:50.167

看来您使用 Chocolatey 的安装去了一个自定义位置。当它完成安装时，它是否说它安装在 F:/chocolatey 上？它真的安装在那里吗？如果是这样，请查看您的路径环境变量，看看它是否包含在路径中。同时关闭并重新打开 shell/命令行。它现在有效吗？如果路径（用户路径）中包含 choco 位置，并且重新加载后 shell/命令行不正确，则重新启动并查看是否可以解决问题。

如果所有这些都很好，只需键入`chocolatey /?`并查看您得到的结果。然后再试`cinst`一次。如果再次出现问题，请尝试`cinst pkgname -debug`查看错误发生的位置。

注意：不支持尝试将 Chocolatey 安装到 USB 驱动器。当然，您也许可以让它工作，但我不确定您真正获得了什么。假设您安装了 Notepad++，现在它已安装到系统（不是 USB 驱动器）。通过在 USB 驱动器上拥有 choco 存储库，您可以获得什么？

# android - 不全屏显示视频视图

> ID：15640832
> 
> 赞同：1
> 
> 时间：2013-03-26T15:21:41.443
> 
> 标签：android, media-player, android-videoview

每个人。我想 videoview 全屏显示视频，我尝试使用一些命令，但没有成功。我需要一些帮助。我把我的代码放在下面。

视频继续显示大约 1/3 的屏幕！我是新手！！！

介绍.JAVA

```
 public class Intro extends Activity {  
     public void onCreate(Bundle b) {
    super.onCreate(b);
           getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
         requestWindowFeature(Window.FEATURE_NO_TITLE);
         setContentView(R.layout.intro);

         VideoView vid = (VideoView) findViewById(R.id.videoView1);
         String uriPath = "android.resource://com.english/raw/videoenglish";
         Uri uri = Uri.parse(uriPath);
         vid.setVideoURI(uri);
         vid.start();
         vid.requestFocus();

         vid.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

         public void onCompletion(MediaPlayer mp) {
            // TODO Auto-generated method stub
                Intent main = new Intent(Intro.this, IntentsDemoActivity.class);
                    Intro.this.startActivity(main);
                    Intro.this.finish();
            }

          });
         }
        } 
```

介绍.XML

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <VideoView
    android:id="@+id/videoView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_gravity="center" />

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:03:34.460

通常，实际视频很多时候不会填满屏幕，因为视频的纵横比与屏幕本身的纵横比不匹配。

我怀疑 VideoView 本身正在填满整个屏幕。尝试使用不同的设备或模拟器。

以下是其他一些可供参考的问题：

*   [参考1](https://stackoverflow.com/questions/4701825/videoview-in-fullscreen)
*   [参考文献 2](https://stackoverflow.com/questions/11027216/video-view-is-not-full-screen-in-landscape-mode)

# css - 引导药丸

> ID：15640836
> 
> 赞同：-2
> 
> 时间：2013-03-26T15:21:47.793
> 
> 标签：css, twitter-bootstrap

我使用引导药丸作为我的导航栏。问题是它没有显示具有蓝色背景的当前活性药丸（如引导程序）这是我的代码

```
<div style="margin-left: 15px;margin-bottom: 15px;margin-top: 10px;">
    <ul class="nav nav-pills">
        <li class="active">
            <a href="index.php">Home</a></li>
        <li class=""><a href="Project.php">Projects</a></li>

        <li class=""><a href="#">Employee</a></li>

        <li><a href="#">Forum</a></li>

    </ul>
</div> 
```

输出在[这里](http://jsfiddle.net/irshadhassan/bwhme/)

只有家庭药丸是专注的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:50:03.553

在标签内添加此代码`script`：

```
$(document).ready(function(){
   $(".nav-pills li").click(function(){
       $(".active").removeClass("active");
       $(this).addClass("active");
   });
}); 
```

[演示](http://jsfiddle.net/bwhme/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:56:03.823

要根据评论给出完整的答案，您的 JSFiddle 完全按预期工作。具有 .active 类的项目将具有药丸的蓝色背景。

但是，我相信您期望发生的是，当您单击一个链接时，药丸将自动变为活动状态，这不是它的工作原理。

您需要动态生成菜单并在生成期间分配活动类，或者在每个页面上使用 JS 将活动类分配给正确的菜单列表项。为了便于使用，我建议将 ID 分配给列表项，以便您可以执行以下操作：

因此，假设您单击第二个菜单项，在 Projects.php 页面上，您可以拥有以下 jquery。

```
$('#project').addClass("active"); 
```

假设您提供了菜单项 ID。

# c# - 在 C# 中使用带有数字节点的 JSON.decode razor webhelper？

> ID：15640838
> 
> 赞同：2
> 
> 时间：2013-03-26T15:21:52.990
> 
> 标签：c#, asp.net-mvc, json, razor

我正在使用 JSON razor Web 帮助程序 ( [http://msdn.microsoft.com/en-us/library/gg538324%28v=vs.111%29.aspx](http://msdn.microsoft.com/en-us/library/gg538324%28v=vs.111%29.aspx) ) 来解码具有多个嵌套节点的 JSON 字符串。

我在另一个项目上很好地使用了 JSON.Decode 方法，但是在这个项目上，我的 JSON 源字符串具有以数字开头的嵌套节点，我遇到了问题。

我的 JSON 字符串看起来像

```
myJSONString="
{
Foo1: ‘data’,
‘Foo2:’  {
    ‘123':{
        ‘goodStuff’:{ [
                    {
                      boo1: ‘Data1’,
                      boo2: ‘Data2’
                    }
                    ] }
          }
         }
}   " 
```

通常我会这样做：

```
var decodedJsonString = Json.Decode(myJSONString) <br> 
```

并访问以下数据：

```
foreach(var p in decodedJsonString.Foo2.123.goodStuff)
{ 
   p.boo1; <br>
   p.boo2; <br>
} 
```

通常这对我来说很好，但我收到一个错误，它不喜欢*.123。*部分，因为节点以数字而不是字母开头。内联错误是“预期标识符”。如果我运行网页，服务器错误是它：“）预期”。

有什么建议么？谢谢！

我可以通过使用很多 foreach 循环来解决这个问题，例如：

```
foreach( var p in decodedJsonString.Foo2)
{ 
   var k = p.Value;
   if(p.Key.Equals("123"))
  {
    foreach(var j in k)
    {
     //etc
    }
  }
} 
```

只是不知道如何使它成为一个解码的 JSON 对象，我可以像 decodedJsonString.Foo2.123.goodStuff 一样再次引用它

感谢任何帮助。对不起，如果我遗漏了一些明显的东西！再次感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:29:26.443

你可以试试这个：

```
foreach(var p in decodedJsonString.Foo2['123'].goodStuff) 
```

# asp.net - 无法加载视图状态 - ASP.NET 中的动态控件

> ID：15640840
> 
> 赞同：3
> 
> 时间：2013-03-26T15:21:56.083
> 
> 标签：asp.net, dynamic, controls, viewstate

我已经阅读了很多关于视图状态的文章，但我无法理解它。

基本上我想要两个带有添加和删除按钮和一个继续按钮的列表框。

当按下继续按钮时，前一个被隐藏，并且为第一个列表框中的每个项目显示一个文本框，其中有 2 个下拉框来描述它 + 为第二个列表框中的每个项目提供一个文本框（也供用户添加说明）。

然后我想要一个完成按钮来将所有这些信息保存到数据库中。

到目前为止，我有以下代码：

```
 <script runat="server">   

    void Page_Load(Object sender, EventArgs e)
    {
        CreateDynamicControls();
        Page.MaintainScrollPositionOnPostBack = true;
        Build2.Visible = false;
        Build3.Visible = false;
        Build4.Visible = false;
        Finish.Visible = false;
    }

    void AddC_Click(Object sender, EventArgs e)
    {
                criteria.Items.Add(addnewc.Text.ToString());
                addnewc.Text = null;
    }

    void RemoveCriterion_Click(Object sender, EventArgs e)
    {
        for (int i = 0; i < criteria.Items.Count; i++)
        {
            if (criteria.Items[i].Selected)
            {
                criteria.Items.Remove(criteria.Items[i]);
                i--;
            }
        }
    }

    void AddAlternative_Click(Object sender, EventArgs e)
    {
                alternatives.Items.Add(addnewa.Text.ToString());
                addnewa.Text = null;
    }

    void RemoveAlternative_Click(Object sender, EventArgs e)
    {
        for (int i = 0; i < alternatives.Items.Count; i++)
        {
            if (alternatives.Items[i].Selected)
            {
                alternatives.Items.Remove(alternatives.Items[i]);
                i--;
            }
        }
    }

    void Continue_Click(Object sender, EventArgs e)
    {
            Build1.Visible = false;
            Build2.Visible = true; 
            Build3.Visible = true;

            CreateDynamicControls();

            Finish.Visible = true;
    }

    void CreateDynamicControls()
    {
        Build2.Controls.Clear();
        Build3.Controls.Clear();

        Build2.Controls.Add(new LiteralControl("<h3>Please define each criterion.</h3><p>By describing it and indicating if it is 1/2 and a/b.</p>"));

        for (int i = 0; i < criteria.Items.Count; i++)
        {
            Build2.Controls.Add(new LiteralControl("<strong>" + criteria.Items[i].Text + "</strong>&nbsp;&nbsp;Description:<br />"));
            TextBox criteriondesc = new TextBox();
            Build2.Controls.Add(criteriondesc);
            criteriondesc.ID = "c" + i.ToString();
            criteriondesc.Rows = 3;
            criteriondesc.Width = 850;
            criteriondesc.TextMode = TextBoxMode.MultiLine;
            Build2.Controls.Add(new LiteralControl("<br />"));

            Build2.Controls.Add(new LiteralControl("Desc1: "));
            DropDownList aim = new DropDownList();
            aim.ID = i.ToString();
            aim.Width = 250;
            aim.Items.Add(new ListItem("1"));
            aim.Items.Add(new ListItem("2"));
            Build2.Controls.Add(aim);

            Build2.Controls.Add(new LiteralControl("&nbsp;&nbsp;&nbsp;&nbsp;Desc2: "));
            DropDownList source = new DropDownList();
            source.ID = i.ToString();
            source.Width = 250;
            source.Items.Add(new ListItem("a"));
            source.Items.Add(new ListItem("b"));
            Build2.Controls.Add(source);

            Build2.Controls.Add(new LiteralControl("<br /><br />"));

        }

        Build3.Controls.Add(new LiteralControl("<h3>Please define each alternative.</h3><p>Please describe each alternaitve in detail.</p>"));

        for (int i = 0; i < alternatives.Items.Count; i++)
        {
            Build3.Controls.Add(new LiteralControl("<strong>" + alternatives.Items[i].Text + "</strong>&nbsp;&nbsp;Description:<br />"));
            TextBox altdesc = new TextBox();
            altdesc.ID = "a" + i.ToString();
            altdesc.Rows = 3;
            altdesc.Width = 850;
            altdesc.TextMode = TextBoxMode.MultiLine;
            Build3.Controls.Add(altdesc);
            Build3.Controls.Add(new LiteralControl("<br />"));
        }

        Build3.Controls.Add(new LiteralControl("<br /><h3>Review dates.</h3><p>Please select a date for a meeting.</p>"));
        OboutInc.Calendar2.Calendar selectdates = new OboutInc.Calendar2.Calendar();
        Build3.Controls.Add(selectdates);
    }

    void Finish_Click(Object sender, EventArgs e)
    {

            Build4.Visible = true;

            foreach (var control in Build2.Controls)
            {
                if (control.GetType() == typeof(TextBox))
                {
                    Build4.Controls.Add(new LiteralControl(((TextBox)control).Text + "<br>"));
                }
            }

            foreach (var control in Build3.Controls)
            {
                if (control.GetType() == typeof(TextBox))
                {
                    Build4.Controls.Add(new LiteralControl(((TextBox)control).Text + "<br>"));
                }
            }

    }
</script>

<asp:Content runat="server" ID="MainContent" ContentPlaceHolderID="MainContent">
    <asp:Panel ID="Build1" runat="server">
    <h3>What is your aim?</h3>
    <p>
        <asp:TextBox ID="goal" runat="server" Width="850px"></asp:TextBox>
    </p>

        <h3>What are the criteria of your decision?</h3>
    <p>
        <asp:ListBox ID="criteria" runat="server" Rows="8" Width="850px"></asp:ListBox><br />
        <asp:Button ID="RemoveCriterion" runat="server" Text="Remove" OnClick="RemoveCriterion_Click" />&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:TextBox ID="addnewc" runat="server" Width="650px"></asp:TextBox>
        <asp:Button ID="AddC" runat="server" Text="Add" OnClick="AddC_Click" />
    </p>

        </p>
        <h3>What are the alternatives of your decision?</h3>

    <p>
        <asp:ListBox ID="alternatives" runat="server" Rows="8" Width="850px"></asp:ListBox><br />
        <asp:Button ID="RemoveAlternative" runat="server" Text="Remove" OnClick="RemoveAlternative_Click" />&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:TextBox ID="addnewa" runat="server" Width="650px"></asp:TextBox>
        <asp:Button ID="AddAlternative" runat="server" Text="Add" OnClick="AddAlternative_Click" />
    </p>
    <p align="right"><asp:Button ID="continue" runat="server" Text="Continue" OnClick="Continue_Click" /></p>

    </asp:Panel>

        <asp:Panel ID="Build2" runat="server">
        </asp:Panel>
            <asp:Panel ID="Build3" runat="server">
        </asp:Panel>
                <asp:Panel ID="Build4" runat="server">
        </asp:Panel>

    <p align="right"><asp:Button ID="Finish" runat="server" Text="Finish" OnClick="Finish_Click" /></p>

</asp:Content> 
```

如您所见，此刻我只是试图从动态创建的文本框字段中输出用户的文本。

但是，我收到了错误

> 无法加载视图状态。正在加载视图状态的控制树必须与在先前请求期间用于保存视图状态的控制树匹配。例如，当动态添加控件时，回发期间添加的控件必须与初始请求期间添加的控件的类型和位置相匹配。

在：第 169 行：Build3.Controls.Add(altdesc);

有谁知道如何用视图状态解决这个问题？

我对 ASP.NET 很陌生，我的背景主要是 WinForms。

感谢您的任何帮助和建议！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:26:36.257

您创建控件为时已晚。您应该在页面的 Init 事件期间创建它们，而不是在页面加载期间创建它们。我建议您阅读有关[页面生命周期的信息](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-06T19:38:04.310

我认为最好的方法是：

```
protected void Page_Load(Object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        CreateDynamicControls();
    }
}
protected override void LoadViewState(object savedState)
{
    base.LoadViewState(savedState);
    CreateDynamicControls();<br/>
} 
```

小样本：

[http://class10e.com/Microsoft/which-method-should-you-add-to-the-web-page](http://class10e.com/Microsoft/which-method-should-you-add-to-the-web-page) [http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100 ).aspx](http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx)

# jquery - 自动调整大小，仅在窗口变大时调整大小

> ID：15640845
> 
> 赞同：0
> 
> 时间：2013-03-26T15:22:26.147
> 
> 标签：jquery

我目前正忙于 jQuery，如果窗口变大或变小，我正在尝试自动调整几个 div 的大小。现在它正在工作，但前提是窗口越来越大。如果我让窗口变小，我首先必须在调整 div 大小之前重新加载页面

我的代码：

```
function size() {   
    var winHeight = $(document).height();
    var topHeight = $("#top").height();
    var footHeight = $("#footer").height() + 50;
    var sideWidth = $("#sidebar").width() + 20;
    var winWidth = $(document).width();

    $("#sidebar").css({'height':(winHeight - topHeight)+'px'});
    $("#sidebar #navigation").css({'height':(winHeight - topHeight - footHeight)+'px'});
    $("#frame").css({'height':(winHeight - topHeight)+'px','width':(winWidth - sideWidth)+'px'});
}

$(document).ready(function(e) { 
    size();
    $(window).resize(function() {
        size();
    });         
}); 
```

的HTML：

```
<!-- Start Top -->
<div id="top">
    <!-- Start Metabalk -->
    <div id="metabalk">
        <p class="version">Version: 0.0.1</p>
    </div><!-- Stop Metabalk -->

    <!-- Start Balk-->
    <div id="balk">
        <div id="logo">
            <a href="#" title="Home"><img src="images/logo.png" alt="Logo" /></a>
        </div>

        <div id="navigation">
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Errors</a></li>
                <li><a href="#">News</a></li>
            </ul>
            <div class="clearleft"></div>
        </div>  
    </div><!-- Stop balk -->

<!-- Start Sidebar -->
<div id="sidebar">
<div id="search">
            <form>
                <input class="search" type="text" value="Search...">
            </form>
        </div>
    <ul id="navigation">
        <li>
            <div>
                <h2><a alt="content.php"><img src="images/icons/dark/home_24.png" alt="dashboard" /><span>Dashboard</span></a></h2>
            </div>
        </li>
        <li class="select">
            <div>
                <h2><img src="images/icons/dark/globe_24.png" alt="General" /><span>General</span></h2> 
                <span class="plus-min" title="Expand menu"><img src="images/icons/dark/minus_24.png" alt="" /></span>
            </div>
            <ul>
                <li><a alt="form.php">Form</a></li>
                <li><a alt="content.php">Boxes</a></li>
                <li><a alt="block.php">Blocken</a></li>
                <li><a alt="formulier.php">Formulier</a></li>
                <li><a href="#">Item 5</a></li>
            </ul>
        </li>
        <li>
            <div>
                <h2><img src="images/icons/dark/man_24.png" alt="account" /><span>Accoun</span>t</h2>
                <span class="plus-min" title="Expand menu"><img src="images/icons/dark/plus_24.png" alt="" /></span>
            </div>
            <ul>
                <li><a href="#">Item 1</a></li>
                <li><a href="#">Item 2</a></li>
                <li><a href="#">Item 3</a></li>
                <li><a href="#">Item 4</a></li>
                <li><a href="#">Item 5</a></li>
            </ul>
        </li>

    </ul>
     <!--Start Footer -->
    <div id="footer">
        <p class="copyright">&copy; <a href="http://pronation-it.nl/" title="Pronation-it">Pronation-it</a> 2012 - 2013</p>
    </div><!-- Stop Footer -->
</div><!-- Stop Sidebar -->

<!-- Start content -->
    <iframe id="frame" src="content.php"></iframe>
<!-- Stop Content --> 
```

它应该看起来像这样：

```
+---------------------------------+
|            100% width           |
|             header              |
+---------------------------------+
| 250px | auto resize content     |
| width |  it's a iframe          |
|       |                         |
|       |                         |
|       |                         |
+-------+-------------------------+ 
```

我希望你能提供帮助，因为在谷歌上我找不到任何对我有用的东西。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:43:41.607

查看[height()](http://api.jquery.com/height/)的文档。它可以返回并设置高度，这意味着您不需要 css 方法。

[这](http://jsfiddle.net/PWEVJ/)是一个小例子：

```
<div id="header"><h1>My Header</h1></div>
<div id="content" style="border: 1px solid black;">My dynamic content</div>
<div id="footer">My footer</div>

<script type="text/javascript">
$(window).resize(function() {
    var freeSpace = $(window).height() - ($("#header").height() + $("#footer").height());
    $("#content").height(freeSpace);
});
$(window).trigger('resize');
</script> 
```

如果仍有问题，请提供一些 HTML 代码。

# html - 响应式调整图像大小的问题

> ID：15640846
> 
> 赞同：0
> 
> 时间：2013-03-26T15:22:34.923
> 
> 标签：html, css

这是我用于 img 语法的 CSS。但是，它应该在浏览器调整大小时响应地调整大小。这在 Chrome 中有效，但 IE 和 FIREFOX 出于某种原因无法正常工作 - 有什么原因吗？我正在使用最新的。

```
img {
    max-width: 100%;
    height: auto;
    width: auto\9; /* ie8 */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:57:03.057

img max-width: 100% 是一种很好的响应式图像技术，但它需要与图像容器（保存图像/包装图像的元素）一起使用，以便您查看它的响应性。

试试这个，你应该让它跨浏览器工作：

```
<div class="imgHolder">
    <img src="http://www.thoughtfeast.co.uk/wp-content/uploads/Big-Data-2-1024x522.jpg" >
</div> 
```

所以你的图像被一个 div 包裹着。CSS 将是：

```
.imgHolder{
    width: 100%;
    max-width: 1000px;
    padding: 10px;
    border: 3px dashed red;
    margin: 10px auto;
}

.imgHolder img {
       max-width: 100% 
} 
```

[你可以在这里](http://codepen.io/domkoscielak/pen/KmJGD)查看codepen

# c# - DllIImport 函数抛出堆栈异常

> ID：15640848
> 
> 赞同：0
> 
> 时间：2013-03-26T15:22:36.840
> 
> 标签：c#, dllimport

我试图在这个 h 文件中调用函数 getFirstAvailableTSSComPort

[http://sourceforge.net/p/yeicapi/code/11/tree/trunk/include/yei_threespace_api.h](http://sourceforge.net/p/yeicapi/code/11/tree/trunk/include/yei_threespace_api.h)

从 h 文件中获取的相关结构和枚举（并转换为 C# 代码）

```
private enum TSS_Type
{
    TSS_BTL = 0,
    TSS_USB = 1,
    TSS_DNG = 2,
    TSS_WL = 3, //wireless wired (connected to PC)
    TSS_WL_W = 4, //wireless wireless
    TSS_EM = 5,
    TSS_DL = 6,
    TSS_BT = 7,
    TSS_UNKNOWN = 8
}

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
private struct Comport
{
    [MarshalAs(UnmanagedType.LPStr, SizeConst = 64)]
    public string Port;
    [MarshalAs(UnmanagedType.LPStr, SizeConst = 256)]
    public string FriendlyName;
    public TSS_Type Type;
} 
```

DLL导入

```
[DllImport("ThreeSpace_API.dll")]
private static extern int getFirstAvailableTSSComPort([Out, MarshalAs(UnmanagedType.Struct)] out Comport port, int filter); 
```

打电话

```
Comport port;
var error = getFirstAvailableTSSComPort(out port, 0); 
```

我明白了

> 调用 PInvoke 函数 'YEi3!YEi3.Program::getFirstAvailableTSSComPort' 使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:30:24.597

C 代码使用`cdecl`调用约定，但您的 C# 代码使用`stdcall`. 这就是您收到 p/invoke 堆栈不平衡消息的原因。

更改`DllImport`以指定调用约定：

```
[DllImport("ThreeSpace_API.dll", CallingConvention=CallingConvention.Cdecl)]
private static extern int getFirstAvailableTSSComPort(
    out Comport port, 
    int filter
); 
```

请注意，参数的默认编组就足够了。

此更改将解决堆栈不平衡问题，但您的代码仍将无法工作。那是因为结构翻译不正确。内联字符串需要编组为`ByValTStr`：

```
[StructLayoutAttribute(LayoutKind.Sequential, CharSet=CharSet.Ansi)]
public struct ComPort {
    [MarshalAsAttribute(UnmanagedType.ByValTStr, SizeConst=64)]
    public string com_port;
    [MarshalAsAttribute(UnmanagedType.ByValTStr, SizeConst=256)]
    public string friendly_name;
    public TSS_Type sensor_type;
} 
```

# java - 定时器和 DatagramSockets java

> ID：15640849
> 
> 赞同：0
> 
> 时间：2013-03-26T15:22:37.310
> 
> 标签：java, udp

我正在客户端和服务器之间实现回调函数。

客户端向服务器注册自己，当事件发生时，服务器将向客户端发送一个数据报包以通知客户端该事件。

客户端将在用户指定的整个收听期间被阻止

当它被阻塞时，它会进入这个循环继续监听服务器进行回调。

```
while (waiting) {
    aSocket.setSoTimeout(0);
    aSocket.receive(reply);
    String replyString = new String(reply.getData()).trim();
    System.out.println(replyString);
    buffer = new byte[1000];
    reply = new DatagramPacket(buffer, buffer.length);
} 
```

我用 timertask 编写了一个计时器，它在侦听期结束后将等待的值从 true 更改为 false。

我的问题是我希望客户在收听期结束后停止收听。但是，即使我使用计时器，客户端也会在

```
aSocket.receive(reply); 
```

这里有谁知道我怎样才能跳过这段代码并退出循环？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:25:08.167

来自[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html#setSoTimeout%28int%29)

> 超时必须 > 0。超时为零被解释为无限超时。

因此，当您使用 0 时`setSoTimeout()`，它只会阻塞接收（）。

# c++ - .lib 搞砸了 Qt 编译

> ID：15640850
> 
> 赞同：0
> 
> 时间：2013-03-26T15:22:48.253
> 
> 标签：c++, qt, dll, makefile, static-libraries

问题已解决，但我想知道为什么会出现问题。

我正在使用 Qt Creator 并链接外部库。在我使用的 .pro 中

```
LIBS += -LC:/Flicker/empty/ -lLabview_DLL 
```

一切顺利，程序运行正常。

使用

```
LIBS += -LC:/DATA/Vincent/SemiRead/ -lLabview_DLL 
```

编译工作没有错误，但在程序中调用库函数之一会导致崩溃。

由于两个文件夹中的 Labview_DLL.dll 相同，我想知道可能是什么问题。我发现在最后一种情况下，还有一个同名的附加 .lib 文件。删除此文件后，该文件夹的所有内容也都可以使用。它只是对现有 .lib 文件的偏好吗？操作系统是Win7-64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:10:14.947

链接到 dll，基于 dll 的位置，在编译时不是必需的。下面的链接可能会有所帮助。

[静态链接与动态链接](https://stackoverflow.com/questions/1993390/static-linking-vs-dynamic-linking)

[http://msdn.microsoft.com/en-us/library/9yd93633.aspx](http://msdn.microsoft.com/en-us/library/9yd93633.aspx)

[http://qt-project.org/doc/qt-4.8/qmake-project-files.html#declaring-other-libraries](http://qt-project.org/doc/qt-4.8/qmake-project-files.html#declaring-other-libraries)

正因为如此，“LIBS +=”调用试图做一个到库的静态链接。

希望有帮助。

# sql - Oracle SQL 相关更新

> ID：15640851
> 
> 赞同：2
> 
> 时间：2013-03-26T15:22:53.480
> 
> 标签：sql, oracle, sql-update, subquery

我有三张桌子：

```
t1.columns: a,c
t2.columns: a,b
t3.columns: b,c,d 
```

现在我想要的是用 t3.d 更新 t1.c。但我不能只使用 t1.c = t3.c 从 t3 更新 t1，我还必须通过 t3.b = t2.b 和 t1.a = t2.a。

我试过这样的事情：

```
UPDATE table1 t1
   SET t1.c = (select t3.d
               from table2 t2, table3 t3
               where t2.b = t3.b and t1.a = t2.a)                                  
 WHERE EXISTS ( SELECT 1 FROM table2 t2, table3 t3 WHERE t1.c = t3.c and t1.a = t2.a); 
```

此代码生成错误消息：ORA-01427：单行子查询返回多于一行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:28:15.493

如果 t1 和 t2 之间或 t2 和 t3 之间存在一对多关系，则 t1 中的每一行都会有很多匹配项。如果您知道 t3 中属于 t1 中同一行的所有行在 d 中具有相同的值，那么您可以使用`DISTINCT`删除（相同的）重复项。

```
UPDATE table1 t1
   SET t1.c = (select DISTINCT t3.d
               from table2 t2, table3 t3
               where t2.b = t3.b and t1.a = t2.a)                                  
 WHERE EXISTS ( SELECT 1 FROM table2 t2, table3 t3 WHERE t1.c = t3.c and t1.a = t2.a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:54:23.050

您有一个返回多行的子查询。用于`rownum`仅获取一行：

```
UPDATE table1 t1
   SET t1.c = (select d
               from (select t3.d
                     from table2 t2 join table3 t3
                          on t2.b = t3.b 
                     where t1.a = t2.a
                    ) t
                where rownum = 1
               )                                
 WHERE EXISTS ( SELECT 1 FROM table2 t2, table3 t3 WHERE t1.c = t3.c and t1.a = t2.a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T09:06:53.983

很抱歉造成混乱，但我解决了：

```
UPDATE table t1
SET t1.c = (select t3.d from table3 t3, table2 t2
                          where t1.a = t2.a and t2.b = t3.b and t3.c = t1.c)
 WHERE EXISTS ( SELECT 1 FROM table1 t1, table2 t2 WHERE t1.a = t2.a and t2.b = t3.b and t3.c = t1.c) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-17T21:58:45.860

```
UPDATE table1 t1
   SET t1.c = (select MAX(t3.d)
               from table2 t2, table3 t3
               where t2.b = t3.b and t1.a = t2.a)                                  
 WHERE EXISTS ( SELECT 1 FROM table2 t2, table3 t3 WHERE t1.c = t3.c and t1.a = t2.a); 
```

# android - 在屏幕旋转之前做点什么？

> ID：15640853
> 
> 赞同：0
> 
> 时间：2013-03-26T15:22:55.280
> 
> 标签：android, android-fragments, android-manifest, screen-orientation, onconfigurationchanged

`do_something()`每当设备从纵向旋转到横向时，我都想这样做。

我已经`<activity android:configChanges="orientation" >`在我的清单中添加了。每当我`onConfigurationChanged()`旋转我的设备时都会调用它。它*不会*重新创建活动。

在我的`onConfigurationChanged()`功能中：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        do_something();
    }
    then_fire_off_the_screen_rotation_as_normal();
    // which means re-start the Activity
    // i expect it will fire off onSaveInstanceState() -> onPause() -> onStop() -> onDestroy() -> onCreate() -> onStart() -> onRestoreInstanceState() -> onResume()
} 
```

我的问题是，我不知道我能做什么`then_fire_off_the_screen_rotation_as_normal()`。

我尝试过使用`setRequestedOrientation()`，但似乎不是用于此目的的功能：

当我传入`ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED`, `ActivityInfo.SCREEN_ORIENTATION_SENSOR`, 或`ActivityInfo.SCREEN_ORIENTATION_USER`时，Activity 仍未*重新*启动。（就像不打电话一样。）

当我通过时`ActivityInfo.SCREEN_ORIENTATION_NOSENSOR`，方向传感器关闭。（正如它所说。）

当我通过时，`ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE`活动被**强制关闭**。`AndroidRuntime:NullPointerException`

* * *

*（具体一点：这是因为在纵向布局中以编程方式添加了片段，但在横向布局中没有。在`do_something()`函数中，我将删除这些片段，因为它们在横向模式中不需要。）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:46:37.867

好吧，我想这种简单的方法可以满足我的需求：

**不**加`<activity android:configChanges="orientation" >`。意味着 NO NEED OVERRIDE `onConfigurationChanged()`。

在`onSaveInstanceState()`：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
        do_something();
    }
    super.onSaveInstanceState(outState);
} 
```

* 确定你`do_something()` ***之前*** `super.onSaveInstanceState()`。

*（因为在我的情况下，我从 Layout 和 Activity 中删除了 Fragments。如果它在 之后`super.onSaveInstanceState()`，则 Layout 将已经保存到 Bundle 中。然后在 Activity 重新创建后， Fragments**也**将被重新创建。 ###)*

###我已经证明了这个现象。但是[***在 Activity 重新创建时如何确定 Fragment 恢复的原因是什么？***](https://stackoverflow.com/questions/15555964/what-to-determine-a-fragment-restore-upon-activity-re-create)只是我的猜测。如果您对此有任何想法，请回答[我的另一个问题](https://stackoverflow.com/questions/15555964/what-to-determine-a-fragment-restore-upon-activity-re-create)。谢谢！

* * *

嗯，对上面的方法进一步改进，解决了第一条评论中提出的问题：（还是简单的）

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    if (isPortrait2Landscape()) {
        do_something();
    }
    super.onSaveInstanceState(outState);
}

private boolean isPortrait2Landscape() {
    return isDevicePortrait() && (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE);
} 
```

会`isDevicePortrait()`像：

```
private boolean isDevicePortrait() {
    return (findViewById(R.id.A_View_Only_In_Portrait) != null);
} 
```

* 请注意，我们***无法***`getResources().getConfiguration().orientation`确定设备当前*是否是*纵向的。这是因为`Resources`对象在屏幕旋转***后立即***更改 - 甚至在调用***之前！*** `onSaveInstanceState()`

如果您不想使用`findViewById()`来测试方向（出于任何原因，而且它毕竟不是那么整洁），请保留一个全局变量并通过in`private int current_orientation;`初始化它。这看起来更整洁。但是我们应该注意***不要***在 Activity 生命周期的任何地方更改它。`current_orientation = getResources().getConfiguration().orientation;``onCreate()`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:31:03.727

```
 // which means re-start the Activity
 // i expect it will fire off onSaveInstanceState() -> onPause() -> onStop() -> onDestroy() -> onCreate() -> onStart() -> onRestoreInstanceState() -> onResume() 
```

onPause()、onStop() 等将触发的假设是不正确的。通过使用`onConfigurationChanged`，您告诉 Android 不要执行这些步骤，而是您将处理在临时变量中保存有关布局的信息，然后调用`InitializeUI()`，然后将布局设置回您想要的方式。我将发布一个我有类似的东西的例子，并在一瞬间为我工作。

编辑：这是示例

```
@Override
public void onConfigurationChanged(Configuration newConfig){
    super.onConfigurationChanged(newConfig);
    setContentView(R.layout.main);
    Log.i("configChange", "configChange");

    String tmp = connect.getText().toString();
    boolean onTmp = on.isEnabled();
    boolean offTmp = off.isEnabled();
    boolean connTmp = reconnect.isEnabled();

    InitializeUI();

    connect.setText(tmp);
    on.setEnabled(onTmp);
    off.setEnabled(offTmp);
    reconnect.setEnabled(connTmp);
} 
```

现在我的`InitializeUI()`方法不过是一堆 findViewById 和设置 onClickListeners。还要确保调用`InitializeUI() in your`onCreate()`。

希望这会有所帮助。*

# depth-first-search - 二分搜索和深度优先搜索有什么区别

> ID：15640854
> 
> 赞同：1
> 
> 时间：2013-03-26T15:22:55.913
> 
> 标签：depth-first-search

二进制搜索执行通常会导致内存泄漏问题，尽管它比线性搜索更快。这两种搜索方法，深度优先搜索和二分搜索，更适合搜索随机数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:48:17.073

深度优先搜索就是这里的答案。由于二进制搜索的性质，二进制搜索不能搜索随机数（在树或其他地方），只能搜索排序数字。你看，在典型的二分搜索中，中间值被分析（或树的根）。如果目标值较高，则选择搜索域的后半部分，如果数字较低，则选择前半部分。然后在选择的任何一半上递归地执行搜索。出于这个原因，二分查找在随机排序的值列表上根本不起作用。因为这个问题得到了回答，所以我不会深入讨论 DFS 的细节。我确信上面有一个很好的 WIKI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-23T02:24:31.070

二进制搜索不是对随机数进行排序的最佳选择。

二分搜索是一种搜索算法，通过获取中间元素或根节点的值来查找元素，并将数据结构中的所有其他值与之进行比较。它必须以排序的数据结构开始。如果其他数字低于中点，则数据结构的下半部分成为完整结构，并在下半部分找到中点。如果其他数字高于中点，则对数据结构的上半部分执行相同的处理。重复此过程，直到找到值或一半交叉。

深度优先搜索是一种搜索和遍历算法，它在回溯之前尽可能沿路径访问树或图形数据结构中的节点。它使用堆栈来跟踪被访问节点的所有相邻节点，然后继续访问其所有邻居，直到那些也被认为已访问。在路径上的所有节点都被访问后，算法使用堆栈回溯。

DFS 将是搜索随机数的最佳选择，因为二进制搜索的先决条件是首先对其进行排序。如果数字没有排序，它就违背了算法的目的。DFS 将能够在 O(V + E) 时间复杂度的随机数结构中找到一个值。

# regex - 如何在正则表达式中使用变量？

> ID：15640855
> 
> 赞同：1
> 
> 时间：2013-03-26T15:22:57.003
> 
> 标签：regex, linux, perl, bash

如何在此命令中替换`regex`为？`$var`

```
echo "$many_lines" | sed -n '/regex/{g;1!p;};h' 
```

`$var`可能看起来像`fs2@auto-17`。

该`sed`命令将输出正则表达式之前的行，但不输出包含正则表达式的行。

如果使用 Perl 单线可以更轻松地完成所有这些工作，那么对我来说没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:28:38.860

它并不漂亮，但这给了我`$var`想要的前一行。

```
echo "$many_lines" | grep -B1 "$var" | grep -v "$var" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:54:55.097

在 Perl 正则表达式中，您可以将变量内容插入到正则表达式中，例如`/$foo/`. 但是，内容将被解释为模式。如果要匹配 的文字内容`$foo`，则必须转义元字符：`$safe = quotemeta $foo; /$safe/`。这可以缩写为`/\Q$foo\E/`，这是您通常想要的。尾随`\E`是可选的。

我不知道 sed 正则表达式引擎是否有类似的功能。

Perl 单行：`perl -ne'$var = "..."; print $p if /\Q$var/; $p=$_'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:25:52.060

使用双引号而不是单引号来允许变量扩展：

```
echo $many_lines | sed -n "/$var/"'{g;1!p;};h' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T03:38:13.613

由于您正在寻找正则表达式之前的一行，因此使用一个单行将不会那么琐碎和美观，但我将这样做（仅使用 Perl）：

`echo "$many_lines" | perl -nle 'print $. if /\Q$var/' | while read line_no; do     export line_no
    echo $many_lines | perl -nle 'print if $. - 1 == $ENV{line_no}'
done`

或者如果你想在一行中做

`echo "$many_lines" | perl -nle 'BEGIN {my $content = ""; } $content .= $_; END { while ($content =~ m#([^\n]+)\n[^\n]+\Q$var#gosm) { print $1 }}'`

或者这个，绝对应该匹配：

`echo "$many_lines" | perl -nle 'BEGIN {my @contents; } push @contents, $_; if ($contents[-1] =~ m#\Q$var#o)') { print $contents[-2] if defined $contents[-2]; }`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-26T15:45:09.467

或者，如果您不想转义双引号，也可以使用 here-documents！

在 Perl 中它看起来像这样：

```
$heredoc = <<HEREDOC;
  here is your text and $var is your parameter
HEREDOC 
```

用您开始的相同字符串结束heredoc很重要，在我的示例中，它的“HEREDOC”在一个新行中！

# c# - 在EOF抛出异常之前停止解密：填充无效，无法删除

> ID：15640857
> 
> 赞同：10
> 
> 时间：2013-03-26T15:23:06.730
> 
> 标签：c#, aes, encryption, encryption-symmetric

这就是我们的场景：我们有巨大的加密文件，以千兆字节为顺序，如果我们将它们读取到最后，我们可以正确解密。当我们读取并检测文件中的某些标志时出现问题，然后我们停止读取并调用 reader.Close()，会发生 CryptographicException：“填充无效且无法删除”。被抛出。我有一个重现此行为的小型控制台应用程序，要对其进行测试，只需运行它，它将在您的 C:\ 驱动器中创建一个文件，然后在按下任意键时将逐行读取，并在按下“q”时停止.

```
using System;
using System.IO;
using System.Security.Cryptography;

namespace encryptSample
{
    class Program
    {
        static void Main(string[] args)
        {
            var transform = CreateCryptoTransform(true);
            // first create encrypted file
            using (FileStream destination = new FileStream("c:\\test_enc.txt", FileMode.OpenOrCreate, FileAccess.Write, FileShare.ReadWrite))
            {
                using (CryptoStream cryptoStream = new CryptoStream(destination, transform, CryptoStreamMode.Write))
                {
                    using (StreamWriter source = new StreamWriter(cryptoStream))
                    {
                        for (int i = 0; i < 1000; i++)
                        {
                            source.WriteLine("This is just random text to fill the file and show what happens when I stop reading in the middle - " + i);
                        }
                        // Also tried this line, but is the same with or without it
                        cryptoStream.FlushFinalBlock();
                    }
                }
            }

            StreamReader reader;
            ICryptoTransform transformDec;
            CryptoStream cryptoStreamReader;

            transformDec = CreateCryptoTransform(false);
            FileStream fileStream = new FileStream("c:\\test_enc.txt", FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
            cryptoStreamReader = new CryptoStream(fileStream, transformDec, CryptoStreamMode.Read);
            reader = new StreamReader(cryptoStreamReader);

            while (Console.In.ReadLine() != "q")
            {
                Console.WriteLine(reader.ReadLine());
            }

            try
            {
                cryptoStreamReader.Close();
                reader.Close();
                reader.Dispose();
            }
            catch (CryptographicException ex)
            {
                if (reader.EndOfStream)
                    throw;

            }
        }

        private static ICryptoTransform CreateCryptoTransform(bool encrypt)
        {
            byte[] salt = new byte[] { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }; // Must be at least eight bytes.  MAKE THIS SALTIER!
            const int iterations = 1042; // Recommendation is >= 1000.
            const string password = "123456";

            AesManaged aes = new AesManaged();
            aes.BlockSize = aes.LegalBlockSizes[0].MaxSize;
            aes.KeySize = aes.LegalKeySizes[0].MaxSize;
            // NB: Rfc2898DeriveBytes initialization and subsequent calls to   GetBytes   must be eactly the same, including order, on both the encryption and decryption sides.
            Rfc2898DeriveBytes key = new Rfc2898DeriveBytes(password, salt, iterations);
            aes.Key = key.GetBytes(aes.KeySize / 8);
            aes.IV = key.GetBytes(aes.BlockSize / 8);
            aes.Mode = CipherMode.CBC;
            aes.Padding = PaddingMode.PKCS7;
            ICryptoTransform transform = encrypt ? aes.CreateEncryptor(aes.Key, aes.IV) : aes.CreateDecryptor(aes.Key, aes.IV);
            return transform;
        }

    }
} 
```

在我们原来的类中，我们在 Dispose() 期间执行 reader.Close。我的问题是，检查 reader.EndOfStream 是否为假然后捕获 CryptographicException 是否有效？还是加密/解密方法有问题？也许我们错过了一些东西。

问候！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-27T14:53:24.907

在 Dispose(true) 期间抛出此异常。从 Dispose 中抛出已经是一个设计缺陷（[https://docs.microsoft.com/en-us/visualstudio/code-quality/ca1065-do-not-raise-exceptions-in-unexpected-locations#dispose-methods](https://docs.microsoft.com/en-us/visualstudio/code-quality/ca1065-do-not-raise-exceptions-in-unexpected-locations#dispose-methods)），但更糟糕的是，甚至在底层流关闭之前就抛出了这个异常。

这意味着任何接收*可能*是 CryptoStream 的 Stream 的东西都需要解决这个问题，或者在“catch”块中关闭底层 Stream（本质上需要引用完全不相关的东西），或者以某种方式警告所有侦听器该流可能仍处于打开状态（例如，“不要尝试删除底层文件——它仍然处于打开状态！”）。

不，在我的书中，这是一个很大的疏忽，其他答案似乎并没有解决根本问题。CryptoStream 拥有传入流的所有权，因此它负责在控制离开 Dispose(true) 之前关闭底层流，故事结束。

理想情况下，它也不应该在并非真正异常的情况下抛出（例如“我们提前停止阅读，因为解密的数据格式错误，继续阅读是浪费时间”）。

我们的解决方案基本上是这样的*（更新：但要注意——正如 Will Krause 在评论中指出的那样，这可能会使敏感信息留在可以通过反射访问的私有`_InputBuffer`和字段中。.NET Framework 4.5 及更高版本`_OutputBuffer`没有这个问题。）*：

```
internal sealed class SilentCryptoStream : CryptoStream
{
    private readonly Stream underlyingStream;

    public SilentCryptoStream(Stream stream, ICryptoTransform transform, CryptoStreamMode mode)
        : base(stream, transform, mode)
    {
        // stream is already implicitly validated non-null in the base constructor.
        this.underlyingStream = stream;
    }

    protected override void Dispose(bool disposing)
    {
        try
        {
            base.Dispose(disposing);
        }
        catch (CryptographicException)
        {
            if (disposing)
            {
                this.underlyingStream.Dispose();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T02:35:34.950

`Close`调用`Dispose(true)`哪个调用`FlushFinalBlock`哪个抛出异常，因为这不是真正的最后一个块。

您可以通过覆盖该`Close`方法来防止这种情况，使其不调用`FlushFinalBlock`：

```
public class SilentCryptoStream : CryptoStream {
    public SilentCryptoStream(Stream stream, ICryptoTransform transform, CryptoStreamMode mode) :
        base(stream, transform, mode) {
    }

    public override void Close() {
        this.Dispose(false);
        GC.SuppressFinalize(this);
    }
} 
```

（您还需要手动关闭底层流。）

> 检查 reader.EndOfStream 是否为假然后捕获 CryptographicException 是否有效

我认为没关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:47:49.627

据我了解，当读取的最后一个字节不是有效的填充字节时会引发异常。当您有意提前关闭流时，最后读取的字节很可能被视为“无效填充”并引发异常。由于您是故意结束的，因此忽略异常应该是安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:46:57.567

可以关掉填充吗？

```
// aes.Padding = PaddingMode.PKCS7;
aes.Padding = PaddingMode.None; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-06T14:22:18.360

我的解决方案是，在我的派生类中，将其添加到我的 Dispose(bool) 覆盖中：

```
 protected override void Dispose(bool disposing)
    {
        // CryptoStream.Dispose(bool) has a bug in read mode. If the reader doesn't read all the way to the end of the stream, it throws an exception while trying to
        // read the final block during Dispose(). We'll work around this here by moving to the end of the stream for them. This avoids the thrown exception and
        // allows everything to be cleaned up (disposed, wiped from memory, etc.) properly.
        if ((disposing) &&
            (CanRead) &&
            (m_TransformMode == CryptoStreamMode.Read))
        {
            const int BUFFER_SIZE = 32768;
            byte[] buffer = new byte[BUFFER_SIZE];

            while (Read(buffer, 0, BUFFER_SIZE) == BUFFER_SIZE)
            {
            }
        }

        base.Dispose(disposing);
        ... 
```

通过确保始终将流读取到末尾，可以避免 CryptStream.Dispose 中的内部问题。当然，您需要根据您所阅读内容的性质来权衡它，以确保它不会产生负面影响。仅对已知有限长度的源使用它。

# jquery - 将 PX 添加回 div 高度

> ID：15640858
> 
> 赞同：1
> 
> 时间：2013-03-26T15:23:12.387
> 
> 标签：jquery

我正在编写一些获取 2 个 div 的高度并将另一个 div 设置为组合高度的 jquery。

```
var height1 = $("#heightSelector2").height();
var height2 =$("#heightSelector3").height();
var maxHeight = height1 + height2;
console.log(maxHeight); 
```

我现在如何设置 $("#heighSelector1") = maxHeight ？我知道我还需要在其中添加 px ，并且我已经看到了一些示例，但还不够清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T15:24:06.117

```
$("#heightSeletor1").height(maxHeight + "px") 
```

老实说，我不认为您需要添加`px`后面，但如果您这样做，只需使用`+`运算符附加它即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:24:38.347

您无需添加 px

尝试这个

```
 $("#heightSeletor1").height(maxHeight) 
```

例子：`$(selector).height(30);`

[看这里](http://api.jquery.com/height/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:25:19.377

这是另一种方法。

`$("#heightSelector1").css("height",maxHeight + "px");`

# jquery - 动态宽度和 FitText 插件

> ID：15640859
> 
> 赞同：0
> 
> 时间：2013-03-26T15:23:12.570
> 
> 标签：jquery, css, jquery-plugins, fonts, resize

由于某种原因，在我的网站上 FitText 插件不起作用。我用 jquery 创建的 div 宽度如下：

```
$('.myContent').css({
position: 'relative',
float: 'left',
height: $('.target').height()-50,
width: $('.target').width()/3
}); 
```

“myContent”的 CSS 如下所示：

```
div.myContent {
margin-top: 4em;
text-align: left;
font-size: 14pt;
overflow: hidden;
display: inline-block;
width: auto;
} 
```

我的 Div 中的内容是这样的：

```
<klein><fine>GEMÜSE</klein></fine> SURPRISE-MENU 
<strong>bio</strong><klein>geniessen</klein>
<stark> WEIN</stark> <klein> KERZENLICHT</klein> 
```

和 FitText.js 的小代码

```
<script>
 jQuery("#myContent").fitText(4.2);
</script> 
```

网站网址：[http ://tinyurl.com/c6rkon7](http://tinyurl.com/c6rkon7)

谢谢你的帮助，卡罗尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T20:35:12.577

当您的文档已经加载并准备好处理时，您可能需要调用它。

```
$(document).ready(function() {
    $("#myContent").fitText(4.2);
}); 
```

# c++ - 包含时 xutility 中的错误

> ID：15640860
> 
> 赞同：2
> 
> 时间：2013-03-26T15:23:28.500
> 
> 标签：c++, string, visual-studio-2008, cross-platform, standard-library

得到了一个非常简单的 C++ VC9 项目，它由一个头文件和一个源文件组成，

```
#ifndef t_h
#define t_h
#include <string>
std::string foo();
#endif // t_h 
```

和

```
#include "t.h"
std::string foo(){return "foo";}; 
```

该项目的构建日志是

```
1>t.cpp
1>C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\xutility(945) : error C2766: explicit specialization; 'std::iterator_traits<size_t>' has already been defined
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\xutility(877) : see previous definition of 'iterator_traits<unsigned __int64>'
1>C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\xutility(1472) : error C2766: explicit specialization; 'std::_Ptr_cat_helper<size_t*,size_t*>' has already been defined
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\xutility(1384) : see previous definition of '_Ptr_cat_helper<unsigned __int64 *,unsigned __int64 *>'
1>C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\xutility(1478) : error C2766: explicit specialization; 'std::_Ptr_cat_helper<const size_t*,size_t*>' has already been defined
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\xutility(1390) : see previous definition of '_Ptr_cat_helper<unsigned __int64 const *,unsigned __int64 *>' 
```

**编辑** **在我得到的 xutility 文件中，这些错误以`#ifdef _LONGLONG`块为单位；不知道在哪里`_LONGLONG`定义。**

在 32 平台上构建很好。有人知道如何解决这些错误吗？谢谢。

项目文件，万一有人会调查它：

```
<?xml version="1.0" encoding="Windows-1252"?>
<VisualStudioProject
    ProjectType="Visual C++"
    Version="9.00"
    Name="test"
    ProjectGUID="{E9D20D01-C8A4-4477-BD8A-61BB92D3AB77}"
    RootNamespace="test"
    Keyword="ManagedCProj"
    TargetFrameworkVersion="196613"
    >
    <Platforms>
        <Platform
            Name="Win32"
        />
        <Platform
            Name="x64"
        />
    </Platforms>
    <ToolFiles>
    </ToolFiles>
    <Configurations>
        <Configuration
            Name="Debug|Win32"
            OutputDirectory="$(SolutionDir)$(ConfigurationName)"
            IntermediateDirectory="$(ConfigurationName)"
            ConfigurationType="4"
            CharacterSet="2"
            ManagedExtensions="0"
            >
            <Tool
                Name="VCPreBuildEventTool"
            />
            <Tool
                Name="VCCustomBuildTool"
            />
            <Tool
                Name="VCXMLDataGeneratorTool"
            />
            <Tool
                Name="VCWebServiceProxyGeneratorTool"
            />
            <Tool
                Name="VCMIDLTool"
            />
            <Tool
                Name="VCCLCompilerTool"
                Optimization="0"
                AdditionalIncludeDirectories=".\.."
                PreprocessorDefinitions="WIN32;_DEBUG;_CRT_SECURE_NO_WARNINGS"
                BasicRuntimeChecks="3"
                RuntimeLibrary="3"
                StructMemberAlignment="0"
                ObjectFile="$(IntDir)\"
                WarningLevel="3"
                DebugInformationFormat="3"
            />
            <Tool
                Name="VCManagedResourceCompilerTool"
            />
            <Tool
                Name="VCResourceCompilerTool"
            />
            <Tool
                Name="VCPreLinkEventTool"
            />
            <Tool
                Name="VCLibrarianTool"
                OutputFile="..\..\..\lib\test_x32_mtd.lib"
                AdditionalLibraryDirectories=""
            />
            <Tool
                Name="VCALinkTool"
            />
            <Tool
                Name="VCXDCMakeTool"
            />
            <Tool
                Name="VCBscMakeTool"
            />
            <Tool
                Name="VCFxCopTool"
            />
            <Tool
                Name="VCPostBuildEventTool"
            />
        </Configuration>
        <Configuration
            Name="Debug|x64"
            OutputDirectory="$(SolutionDir)$(PlatformName)\$(ConfigurationName)"
            IntermediateDirectory="$(PlatformName)\$(ConfigurationName)"
            ConfigurationType="4"
            CharacterSet="2"
            ManagedExtensions="0"
            >
            <Tool
                Name="VCPreBuildEventTool"
            />
            <Tool
                Name="VCCustomBuildTool"
            />
            <Tool
                Name="VCXMLDataGeneratorTool"
            />
            <Tool
                Name="VCWebServiceProxyGeneratorTool"
            />
            <Tool
                Name="VCMIDLTool"
                TargetEnvironment="3"
            />
            <Tool
                Name="VCCLCompilerTool"
                Optimization="0"
                AdditionalIncludeDirectories=".\.."
                PreprocessorDefinitions="WIN64;_DEBUG"
                BasicRuntimeChecks="3"
                RuntimeLibrary="3"
                StructMemberAlignment="0"
                ObjectFile="$(IntDir)\"
                WarningLevel="3"
                DebugInformationFormat="3"
            />
            <Tool
                Name="VCManagedResourceCompilerTool"
            />
            <Tool
                Name="VCResourceCompilerTool"
            />
            <Tool
                Name="VCPreLinkEventTool"
            />
            <Tool
                Name="VCLibrarianTool"
                OutputFile="..\..\..\lib\test_x64_mtd.lib"
                AdditionalLibraryDirectories=""
            />
            <Tool
                Name="VCALinkTool"
            />
            <Tool
                Name="VCXDCMakeTool"
            />
            <Tool
                Name="VCBscMakeTool"
            />
            <Tool
                Name="VCFxCopTool"
            />
            <Tool
                Name="VCPostBuildEventTool"
            />
        </Configuration>
        <Configuration
            Name="Release|Win32"
            OutputDirectory="$(SolutionDir)$(ConfigurationName)"
            IntermediateDirectory="$(ConfigurationName)"
            ConfigurationType="4"
            CharacterSet="2"
            ManagedExtensions="0"
            >
            <Tool
                Name="VCPreBuildEventTool"
            />
            <Tool
                Name="VCCustomBuildTool"
            />
            <Tool
                Name="VCXMLDataGeneratorTool"
            />
            <Tool
                Name="VCWebServiceProxyGeneratorTool"
            />
            <Tool
                Name="VCMIDLTool"
            />
            <Tool
                Name="VCCLCompilerTool"
                Optimization="2"
                AdditionalIncludeDirectories=".\.."
                PreprocessorDefinitions="WIN32;NDEBUG;_CRT_SECURE_NO_WARNINGS"
                BasicRuntimeChecks="0"
                RuntimeLibrary="2"
                StructMemberAlignment="0"
                ObjectFile="$(IntDir)\"
                WarningLevel="3"
                DebugInformationFormat="0"
            />
            <Tool
                Name="VCManagedResourceCompilerTool"
            />
            <Tool
                Name="VCResourceCompilerTool"
            />
            <Tool
                Name="VCPreLinkEventTool"
            />
            <Tool
                Name="VCLibrarianTool"
                OutputFile="..\..\..\lib\test_x32_mt.lib"
                AdditionalLibraryDirectories=""
            />
            <Tool
                Name="VCALinkTool"
            />
            <Tool
                Name="VCXDCMakeTool"
            />
            <Tool
                Name="VCBscMakeTool"
            />
            <Tool
                Name="VCFxCopTool"
            />
            <Tool
                Name="VCPostBuildEventTool"
            />
        </Configuration>
        <Configuration
            Name="Release|x64"
            OutputDirectory="$(SolutionDir)$(PlatformName)\$(ConfigurationName)"
            IntermediateDirectory="$(PlatformName)\$(ConfigurationName)"
            ConfigurationType="4"
            CharacterSet="2"
            ManagedExtensions="0"
            >
            <Tool
                Name="VCPreBuildEventTool"
            />
            <Tool
                Name="VCCustomBuildTool"
            />
            <Tool
                Name="VCXMLDataGeneratorTool"
            />
            <Tool
                Name="VCWebServiceProxyGeneratorTool"
            />
            <Tool
                Name="VCMIDLTool"
                TargetEnvironment="3"
            />
            <Tool
                Name="VCCLCompilerTool"
                Optimization="2"
                AdditionalIncludeDirectories=".\.."
                PreprocessorDefinitions="WIN64;NDEBUG"
                BasicRuntimeChecks="0"
                RuntimeLibrary="2"
                StructMemberAlignment="0"
                ObjectFile="$(IntDir)\"
                WarningLevel="3"
                DebugInformationFormat="0"
            />
            <Tool
                Name="VCManagedResourceCompilerTool"
            />
            <Tool
                Name="VCResourceCompilerTool"
            />
            <Tool
                Name="VCPreLinkEventTool"
            />
            <Tool
                Name="VCLibrarianTool"
                OutputFile="..\..\..\lib\test_x64_mt.lib"
                AdditionalLibraryDirectories=""
            />
            <Tool
                Name="VCALinkTool"
            />
            <Tool
                Name="VCXDCMakeTool"
            />
            <Tool
                Name="VCBscMakeTool"
            />
            <Tool
                Name="VCFxCopTool"
            />
            <Tool
                Name="VCPostBuildEventTool"
            />
        </Configuration>
    </Configurations>
    <References>
    </References>
    <Files>
        <File
            RelativePath=".\t.cpp"
            >
        </File>
        <File
            RelativePath=".\t.h"
            >
        </File>
    </Files>
    <Globals>
    </Globals>
</VisualStudioProject> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T10:38:54.517

您将 LONGLONG 从 __int64 变形为 size_t。非常不健康。

检查 vc/include 目录中文件的日期戳，确保它们仍然是原始文件，并且没有被失控的 Edit+Replace 意外编辑。

# r - R名称字符串中的公式

> ID：15640863
> 
> 赞同：1
> 
> 时间：2013-03-26T15:23:43.800
> 
> 标签：r

我有以下形式的数据框：

```
 country company hitid
 1 Switzerland     CH1  <NA>
 2 Switzerland     CH2  <NA>
 3 Switzerland     CH3  <NA>
 4      Sweden     SU1  <NA>
 5      Sweden     SU2  <NA>
 6      Sweden     SU3  <NA> 
```

在hitid 列中，我想自动填写我之前运行过的循环的结果。结果以 d$COUNTRY$hitid 的形式给出，对于每个国家，我都有另一个要填写的 hitid。

编辑：我的循环输出是以下形式：

```
$Switzerland
    HITTypeId        HITId          Valid
1   1010               123           TRUE

$Sweden
   HITTypeId      HITId        Valid
1 1010            456           TRUE 
```

有什么方法可以在名称字符串中使用公式？我可以构建类似的东西：

```
hitid=d$"formula to look up country"$hitid 
```

或者任何想法如何更优雅地构建这个问题？

基本上，我只想将每个国家/地区的 HITId 提取到现有的 datfile 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:42:50.807

这里有一个`plyr`解决方案。

```
library(plyr)
ddply(dat,.(country),transform,
                hitid=  d[[unique(country)]]$hitid) 
```

我假设：

```
d <- list(Switzerland=list(hitid=1),
          Sweden=list(hitid=2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:38:30.133

这对您的数据做出了一些假设，即，这`DF$country`是一个字符列，这`d`是一个列表。

```
DF <- read.table(text="      country company hitid
 1 Switzerland     CH1  <NA>
 2 Switzerland     CH2  <NA>
 3 Switzerland     CH3  <NA>
 4      Sweden     SU1  <NA>
 5      Sweden     SU2  <NA>
 6      Sweden     SU3  <NA>",header=TRUE,stringsAsFactors=FALSE)

d <- list(Switzerland=list(hitid=123),Sweden=list(hitid=456))

fun <- function(x) d[[x]][["hitid"]]
DF$hitid <- sapply(DF$country,fun)

#       country company hitid
# 1 Switzerland     CH1   123
# 2 Switzerland     CH2   123
# 3 Switzerland     CH3   123
# 4      Sweden     SU1   456
# 5      Sweden     SU2   456
# 6      Sweden     SU3   456 
```

# php - 允许从 domain.com 和 domain/[Account_name].com 访问 Session

> ID：15640864
> 
> 赞同：0
> 
> 时间：2013-03-26T15:23:48.307
> 
> 标签：php, session

我一辈子都无法在两个 URL 上使用 $_SESSION ......它们是同一个域，只有一个 htaccess 重写更改任何 URL：

```
domain.com/ACCOUNT_NAME to domain/ACCOUNT_NAME.com 
```

我尝试了以下方法：

```
session.cookie_domain = ".domain.com" 
```

我用上面的内容更新了我的 php.ini 文件，但这不起作用。我也尝试了以下没有成功，

```
ini_set('session.cookie_domain','.domain.com'); 
```

有什么建议么？或者也许我应该以某种方式将会话数据存储在数据库中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:13:01.947

您对域命名的想法是错误的。

不可能有像这样的域名`domain/ACCOUNT_NAME.com`- 域名中不允许使用斜杠（更不用说您需要为每个用户注册另一个二级域），也不能作为域名的分隔符。即使您设法使其在本地运行，您也永远无法将这样的域名公之于众。仅用于您可以以以下形式拥有的子域`ACCOUNT_NAME.example.com`

请阅读域名：[域名](http://en.wikipedia.org/wiki/Domain_name#Technical_requirements_and_process)

所以，你只有两个选择

*   `example.com/bob`- 你需要一个重写规则（你称之为.htaccess的东西）
*   `bob.example.com`- 您不需要为此重写，但需要进行一些 DNS 和 Web 服务器调整。

一旦您解决了域命名问题，您的会话将适用于所有子域。由于它显然`sub`仅适用于 -domains，因此意味着可以为完全不同的域`example.com`设置 cookie，`bob.example.com`但不能为任何其他域设置 cookie。`example.bob.com``bob.com`

# java - 无法使用 xpath 为 XML 选择节点

> ID：15640868
> 
> 赞同：0
> 
> 时间：2013-03-26T15:23:57.093
> 
> 标签：java, xpath

我无法在以下 XML 中使用 xpath 选择任何节点。我已经使用在线 xpath 解析器来获取节点 /PartyHierarchyView//HQPDBID 但我没有得到节点。任何指针都会非常有帮助。以下是 XML 文档。

```
<ns1:PartyHierarchyView xmlns:ns1="http://wwwin.cisco.com/it/AtA/ef/AtAEFSchema">
  <ns1:PartyID>52428</ns1:PartyID>  
  <ns2:ParentID xmlns:ns2="http://wwwin.cisco.com/it/AtA/AtASchema">  
    <ns2:Type>HQ</ns2:Type> 
  </ns2:ParentID>  
  <ns3:HQID xmlns:ns3="http://wwwin.cisco.com/it/AtA/AtASchema"> 52428</ns3:HQID>  
  <ns1:HQName> 
    <ns4:Type xmlns:ns4="http://wwwin.cisco.com/it/AtA/AtASchema"> PARTY_TYPE</ns4:Type> 
  </ns1:HQName>  
  <ns1:HQPDBID> 
    <ns6:Identifier xmlns:ns6="http://wwwin.cisco.com/it/AtA/AtASchema"> 2224283</ns6:Identifier>  
    <ns7:Type xmlns:ns7="http://wwwin.cisco.com/it/AtA/AtASchema"> PDB_ID</ns7:Type> 
  </ns1:HQPDBID> 
</ns1:PartyHierarchyView> 
```

# android - 如何在 Android 中调试远程 AIDL 服务？

> ID：15640871
> 
> 赞同：3
> 
> 时间：2013-03-26T15:24:05.420
> 
> 标签：android, android-service, aidl

我有使用 AIDL 的远程服务的来源。我也有自己的应用程序连接到该服务。我同时调试两个应用程序，但在远程服务中，我只能在生成的 AIDL 文件（存根和代理）中打断点，但我无法打到远程服务的真实方法。可能是什么原因？也许我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-19T00:25:34.560

将其放入`android.os.Debug.waitForDebugger()`服务中`onCreate()`，并在下面的一行中放置一个断点。然后在AS中按“Attach debugger to Android Process”，双击要调试的服务进程。将创建新的调试会话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T16:12:51.370

我尝试这个已经有一段时间了，但从记忆中我认为我所做的是：

我在源代码中设置断点，启动使用远程服务的应用程序，然后进入 DDMS 透视图并选择与该服务对应的进程。然后单击启用断点触发的绿色小错误图标。

# linux - 对 lex 和 yacc 中的小错误的建议

> ID：15640874
> 
> 赞同：0
> 
> 时间：2013-03-26T15:24:12.043
> 
> 标签：linux, nlp, yacc, lex

在我的代码的 NLP 实现中再次出现一些问题.. 在 pro.l 文件中，我有一些模式及其操作...... Pro.l

```
%{
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
void yyerror(char *str);
%}
%%

[\t] ;
[a-zA-Z]+   { yylval = strdup(yytext) ; return INPUT ; }   /* may be this line is source of error . It has been written so as to include Junk words */
"is equal to"   { return CONDITION ; }
"whose"    { return WHOSE ; }
"by"     { return PREP ; }
"any"    { return QUALIFIER ; }
"our"    { return QUALIFIER ; }
"show"    { return ASK  ; }
"list"    { return ASK ; }
"display us"   { return ASK  ; }
"and"   { return WORD ; } 
"every"  { printf("%s \n", yylval) ; return QUALIFIER  ; }  
"of every"  { return QUALIFIER  ; }
"all"  { printf("%s \n", yylval) ; return QUALIFIER  ; } 
"name"   { yylval = strdup(yytext) ; printf("%s \n", yylval) ; return FIELD ; }
"id"   { yylval = strdup(yytext) ; return FIELD ; }
"the"  { return QUALIFIER  ; }     
"how many"   { return MOJ ; }
"count"   { return MOJ ; }
"book"  { yylval = strdup(yytext) ; printf("%s \n", yylval) ; return TABLE   ; }
"?"   { return EOL ; }
"."   { return EOL ; }
%% 
```

上面给出的是 pro.l，我想**包含一个模式**：`[a-zA-Z]+ action` 但它不允许我这样做并给出错误。我想包含这种模式，以便我可以在我的程序中容纳任何垃圾词。

下面给出的是 pro.y

```
%{
#include <stdio.h>
#include <stdio.h>
#include <string.h>
#define YYSTYPE char *        
extern char *yytext ;

int yylex(void) ;
static void yyerror(char *str) 
{
    printf("yyerror : %s " , str) ;
}
%}

%error-verbose
%token ASK
%token PREP
%token QUALIFIER
%token MOJ
%token WORD
%token TOTAL
%token EOL 
%token TABLE
%token FIELD
%token WHOSE
%token CONDITION
%token INPUT

%%

translate : select
          | count
          ;                                                                                                                                                   

select : ASK QUALIFIER TABLE EOL    { printf("SELECT DISTINCT * FROM %s",$3) ;} 
       | ASK FIELD QUALIFIER TABLE EOL        { printf("SELECT %s  FROM %s",$2,$4) ;}      
       | ASK QUALIFIER TABLE FIELD EOL  { printf("SELECT DISTINCT %s FROM %s ",$4 ,$3) ;}
       | ASK QUALIFIER FIELD WORD FIELD QUALIFIER TABLE EOL    { printf("SELECT DISTINCT %s , %s FROM %s", $3, $5, $7) ;} 
       | ASK QUALIFIER TABLE WHOSE FIELD CONDITION INPUT EOL    { printf("SELECT DISTINCT * FROM %s WHERE %s =", $3, $5); } 
       |    
       ;

count : MOJ TABLE EOL   { printf("SELECT COUNT(*) FROM %s", $2) ;}
      | ASK TABLE MOJ EOL    { printf("SELECT COUNT(*) FROM %s", $2); } 
      | MOJ TABLE PREP FIELD EOL    {printf("SELECT COUNT(*) FROM %s WHERE %s = ",$2 ,$4) ;}
      ;
%%

#include "lex.yy.c"
extern int yylex() ;
extern int yyparse() ;
extern FILE *yyin ;
int main() 
{
    FILE *myfile = fopen("sample.txt" , "r") ;
    if(!myfile)
    {
        printf("Can't open the file ") ;
        return -1 ;
    }
    yyin = myfile ;
    do
    {
        yyparse();
    }while(!feof(yyin)) ;
    yylex_destroy() ;
    return 0 ;
} 
```

请建议我一些方法来容纳当前 lex 文件模式中未表示的垃圾词。

错误 stmts : *i/p* --> 向我们显示名称等于 xyz 的书。

*错误*--> yyerror：语法错误，意外输入，期望 QUALIFIER 或 TABLE 或 FIELD。

**PS**：垃圾词，如：xyz、abc、fgfhg、jhyjg898 等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:37:41.320

您已将`[a-zA-Z]+`（乔纳森的全部内容）作为第一条规则。如果出现歧义，lex 将采用最长的匹配模式。如果两个模式匹配相同长度的字符串，则采用第一个。因此，通过将包罗万象放在首位，它还将匹配其他关键字，例如`whose`. 这就是为什么乔纳森说要把这个包罗万象的规则放在最后。这样，所有关键字将首先匹配，并且只有当它们不匹配时才会使用 catch-all。

# jquery - JQuery：检测css状态变化

> ID：15640876
> 
> 赞同：0
> 
> 时间：2013-03-26T15:24:12.960
> 
> 标签：jquery, css

我正在查看以下示例登录表单：

[登录表格](http://dailydesignnotes.com/demos/elegant-login-form/)。

请注意，底部有一个“记住”精灵。本质上，2 状态图像下方有一个隐藏的复选框。单击图像时，它会变为绿色复选标记或滑动到红色的“x”。查看复选框的 DOM 状态时，值不会改变（默认值为 value="1"）。如果我要使用它，我会使用什么 JQuery 来检测图像的状态变化，以便我可以更改复选框的值？

这是 HTML 表单：

```
 <div id="logonForm">
            <div id="box">
                <div class="elements">
                    <div class="avatar"></div>
                    <form action="" method="post">
                        <input type="text"      id="un" name="username" class="username" placeholder="Username" />
                        <input type="password"  id="pw" name="password" class="password" placeholder="•••••••••" />
                        <div class="checkbox">
                            <!-- here is the CHECK-BOX that I need to change value with JQuery -->
                            <input id="check" name="checkbox" type="checkbox" value="1" />
                            <label for="check">Remember?</label>
                        </div>
                        <div class="remember">Remember?</div>
                        <input type="button" id="login" name="submit" class="submit" value="Sign In" />
                    </form>
                </div>
            </div> 
```

这是表单复选框和标签的css（由作者提供）：

```
.checkbox {
    display: block;
    width: 40px;
    height: 15px;
    overflow: hidden;
    border-radius: 5px;
float:left;
margin:5px 0 0 0;5
}   
input[type=checkbox] {
    display: none;
}
input[type=checkbox] + label {
    text-indent: -9999px;
    display: block;
    width: 40px;
    height: 15px;
    line-height: 15px;
    background: transparent url(../images/checkboxfield.png) no-repeat;
    -webkit-transition: background-position 0.3s ease-in-out;
    -moz-transition: background-position 0.3s ease-in-out;
}
input[type=checkbox]:checked + label {
    -webkit-transition: background-position 0.3s ease-in-out;
    -moz-transition: background-position 0.3s ease-in-out;
    background-position:-26px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:03:56.530

无论选中状态如何，复选框值都应保持为 1。在经典形式中，检查状态决定是否发送值，而不是提交是否包含 1 或 0。您正在寻找的可能是“检查”属性。

设置检查属性：

```
$('#check').attr('checked', true); 
```

获得“检查”状态：

```
$('#check').attr('checked'); // returns true / false 
```

据我所知，除了在无限循环中定期检查之外，没有简单的方法来检查属性更改，但我很确定您不需要这样做。单击标签应更改复选框“已选中”属性。如果您需要 1 或 0 值而不是“1 或无”，您可以监听复选框“更改”事件并防止取消检查，但如果值为 1，则将值更改为 0，反之亦然。

```
$('#check').change(function(event){
    event.PreventDefault();
    $(this).val( ( $(this).val(  ) + 1 ) % 2 );
}); 
```

但是，阻止更改也会取消基于选中属性的任何样式，因此您必须以另一种方式引用选中状态：在 css 中使用

```
input[value=1] + label 
```

或者您可以添加一小段代码来切换自定义类

```
$('#check').change(function(event){
    event.PreventDefault();
    $(this).val( ( $(this).val(  ) + 1 ) % 2 );
    $(this).toggleClass('checked');
}); 
```

并像这样从 css 中引用它：

```
input.checked + label 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:38:12.793

值的复选框更改永远不会在 dom 中显示。取决于您在发送表单后所做的事情，您可以在表单提交后简单地检查值，例如使用 php`$_POST['checkbox']`

如果您必须在发送表单之前知道该值，您可以执行以下操作：

```
$('#checkbox').attr('checked'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:44:53.207

这可能是一个解决方案：

```
'use strict';
$(document).ready(function(){

    var buffer = $('#yourDiv').css('height');

    setInterval(function(){
        var height = $('#yourDiv').css('height');

        if (height != buffer) {
            $('#yourDiv').html('The height changed from ' + height + ' to ' + buffer);
            buffer = $('#yourDiv').css('height');
        }
    }, 100);

    $('#yourDiv').click(function(){
        $(this).css('height', (Math.random(1) * 501) + 'px');
    });
}); 
```

检查这个小提琴：http: [//jsfiddle.net/sma3y/7/](http://jsfiddle.net/sma3y/7/)

这里实际发生的事情我大多称之为`anonymous listener`;)。

`setInterval`只是继续执行其中的 lambda 并基于`if`-statement 它会做某事，或者什么都不做。这里的问题可能是“默认”缺少事件数据对象。如果您愿意（例如鼠标位置），您可以手动获取这些值。

祝你好运！

# javascript - 提交表单（POST）后，Javascript FileReader.onload 不起作用

> ID：15640879
> 
> 赞同：2
> 
> 时间：2013-03-26T15:24:19.923
> 
> 标签：javascript, jquery, html, node.js, filereader

目前我正在创建一个单页上传器。我用 Javascript (+jQuery) 开发并使用[AppJS](http://appjs.org/)。

此上传器有 2 个表单，其中上传输入可用。两个表格都在一页中，第二个表格被隐藏`display: none;`

两者都使用相同的定制上传扩展。

*   在第一种形式中，我要求 2 张图片，它们必须被丢弃。

*   当我删除图像时，它会通过套接字上传到我的 nodejs 服务器并正确保存。

*   当我再次删除第二个时，它会上传到我的 nodejs 服务器并正确保存。

*   然后我将表单发布到我的 nodejs 服务器

*   之后我`.hide()`第一个表格和`.show()`第二个表格。

当我再次使用上传插件时，没有出现错误，但也没有上传文件。

我注意到 FileReader.onload 在第一个表单发布后没有执行。

在一些示例代码下面，我无法发布我的整个应用程序。

## HTML

```
<form id="formone" action="/formone">
    <input type="text" name="background" value="Drop here" class="uploadinput" readonly />
    <input type="text" name="logo" value="Drop here" class="uploadinput" readonly />
</form>
<form id="formtwo" action="/formtwo" style="display:none;">
    <input type="text" name="icon" value="Drop here" class="uploadinput" readonly />
</form> 
```

## Javascript

```
// File upload extension
$.fn.extend({
    filedrop: function() {
        return this.each(function() {
            var files = []
            var $this = $(this)

            // Catch drop event
            $this.bind('drop', function(event) {
                event.stopPropagation()
                event.preventDefault()

                console.log('Dropped') // Works in both forms

                files = event.originalEvent.target.files || event.originalEvent.dataTransfer.files

                file = files[0]

                var reader = new FileReader()

                // reader.onload only works in form 1
                reader.onload = function(e) {
                    var buffer = e.target.result
                    socket.emit('uploadfile', file.name, buffer)
                }

                reader.onerror = function(error) {
                    console.log("error", error)
                    console.log(error.getMessage())
                }

                reader.readAsBinaryString(file)

                return false
            })
        })
    }
})

$('.uploadinput').filedrop()

window.showFormTwo = function() {
    $('#formone').hide()
    $('#formtwo').show()
} 
```

## 节点.js

```
app.router.post('/formone', function() {
    window.showFormTwo()
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:57:57.797

javascript加载后立即调用函数filedrop，但您的form2随后被隐藏。从[绑定](http://api.jquery.com/bind/)API ：

> 处理程序附加到 jQuery 对象中当前选定的元素，因此这些元素必须存在于调用 .bind() 的位置。有关更灵活的事件绑定，请参阅 .on() 或 .delegate() 中有关事件委托的讨论。

所以因为 form2 是隐藏的，所以永远不会绑定 drop 事件，并且永远不会调用它的事件处理程序。reader.onload 在此事件处理程序中。`.on`是将事件处理函数附加到元素的首选方式。

所以改变这个

```
$this.bind('drop', function(event) { 
```

至

```
$this.on('drop', function(event) { 
```

# excel - 组合框用户表单中的工作表名称

> ID：15640880
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:24:21.630
> 
> 标签：excel, combobox, windows-xp, excel-2010, vba

我正在寻找一种将工作表名称添加到我的组合框中的方法。

最终结果应该是：

两个相邻的组合框在第一个框中，我可以输入工作表名称，并使用我刚刚选择的工作表中的第二个框数据。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:20:38.267

作为起点，请执行以下操作：
从新工作簿开始，将 2 个组合框添加到 Sheet1，然后将此代码添加到“ThisWorkbook”代码模块：

```
Private Sub Workbook_Open()
    Dim ws As Worksheet

    'iterate through all worksheets and add each one to the combobox
    For Each ws In Worksheets
        Sheet1.ComboBox1.AddItem ws.Name 'add sheet name to combobox
    Next ws
End Sub 
```

然后将此代码添加到“Sheet1”代码模块：

```
Private Sub ComboBox1_Change()
    Dim i As Integer
    If ComboBox1.Value <> "" Then
        ComboBox2.Clear 'clear out the combobox
        'add values from A1 to A5 to ComboBox2 from selected worksheet
        For i = 1 To 5
            ComboBox2.AddItem Worksheets(ComboBox1.Value).Range("A" & i).Value
        Next i
    End If
End Sub 
```

使用上面的代码作为起点，阅读每一行并研究你不明白的地方，直到你能解释每一行的作用。然后，您将能够在您的解决方案中使用相同的概念。

# visual-studio - Visual Studio 不断崩溃：应用程序错误

> ID：15640883
> 
> 赞同：24
> 
> 时间：2013-03-26T15:24:32.570
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-2015, visual-studio-2013, visual-studio-2017

VS 不断崩溃，通常是当我想点击一些我想编辑的文本时。当我查看事件日志时，我得到了；

```
Log Name:      Application
Source:        Application Error
Date:          26/03/2013 15:18:30
Event ID:      1000
Task Category: (100)
Level:         Error
Keywords:      Classic
User:          N/A
Computer:      (removed)
Description:
Faulting application name: devenv.exe, version: 10.0.40219.1, time stamp: 0x4d5f2a73
Faulting module name: clr.dll, version: 4.0.30319.269, time stamp: 0x4ee9ae83
Exception code: 0xc00000fd
Fault offset: 0x00194a5d
Faulting process id: 0x47c
Faulting application start time: 0x01ce2a3396f0faf2
Faulting application path: c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe
Faulting module path: C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Report Id: 69d0daee-9628-11e2-aeba-005056c00008
Event Xml:
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
  <System>
    <Provider Name="Application Error" />
    <EventID Qualifiers="0">1000</EventID>
    <Level>2</Level>
    <Task>100</Task>
    <Keywords>0x80000000000000</Keywords>
    <TimeCreated SystemTime="2013-03-26T15:18:30.000000000Z" />
    <EventRecordID>23553</EventRecordID>
    <Channel>Application</Channel>
    <Computer>(removed)</Computer>
    <Security />
  </System>
  <EventData>
    <Data>devenv.exe</Data>
    <Data>10.0.40219.1</Data>
    <Data>4d5f2a73</Data>
    <Data>clr.dll</Data>
    <Data>4.0.30319.269</Data>
    <Data>4ee9ae83</Data>
    <Data>c00000fd</Data>
    <Data>00194a5d</Data>
    <Data>47c</Data>
    <Data>01ce2a3396f0faf2</Data>
    <Data>c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe</Data>
    <Data>C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll</Data>
    <Data>69d0daee-9628-11e2-aeba-005056c00008</Data>
  </EventData>
</Event> 
```

我也明白了；

```
Log Name:      Application
Source:        Windows Error Reporting
Date:          26/03/2013 15:21:01
Event ID:      1001
Task Category: None
Level:         Information
Keywords:      Classic
User:          N/A
Computer:      (removed)
Description:
Fault bucket 2985755835, type 1
Event Name: APPCRASH
Response: Not available
Cab Id: -721041670

Problem signature:
P1: devenv.exe
P2: 10.0.40219.1
P3: 4d5f2a73
P4: clr.dll
P5: 4.0.30319.269
P6: 4ee9ae83
P7: c00000fd
P8: 00194a5d
P9: 
P10: 

Attached files:
C:\Users\xxx\AppData\Local\Temp\WERE350.tmp.WERInternalMetadata.xml
C:\Users\xxx\AppData\Local\Temp\WERF0C9.tmp.appcompat.txt
C:\Users\xxx\AppData\Local\Temp\WERF108.tmp.mdmp

These files may be available here:
C:\Users\xxx\AppData\Local\Microsoft\Windows\WER\ReportArchive\AppCrash_devenv.exe_3f453f47c0d86c534010e7cf6788bb8f42fbcd_cab_144e2fda

Analysis symbol: 
Rechecking for solution: 0
Report Id: 69d0daee-9628-11e2-aeba-005056c00008
Report Status: 8
Event Xml:
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
  <System>
    <Provider Name="Windows Error Reporting" />
    <EventID Qualifiers="0">1001</EventID>
    <Level>4</Level>
    <Task>0</Task>
    <Keywords>0x80000000000000</Keywords>
    <TimeCreated SystemTime="2013-03-26T15:21:01.000000000Z" />
    <EventRecordID>23554</EventRecordID>
    <Channel>Application</Channel>
    <Computer>(removed)</Computer>
    <Security />
  </System>
  <EventData>
    <Data>2985755835</Data>
    <Data>1</Data>
    <Data>APPCRASH</Data>
    <Data>Not available</Data>
    <Data>-721041670</Data>
    <Data>devenv.exe</Data>
    <Data>10.0.40219.1</Data>
    <Data>4d5f2a73</Data>
    <Data>clr.dll</Data>
    <Data>4.0.30319.269</Data>
    <Data>4ee9ae83</Data>
    <Data>c00000fd</Data>
    <Data>00194a5d</Data>
    <Data>
    </Data>
    <Data>
    </Data>
    <Data>
C:\Users\xxx\AppData\Local\Temp\WERE350.tmp.WERInternalMetadata.xml
C:\Users\xxx\AppData\Local\Temp\WERF0C9.tmp.appcompat.txt
C:\Users\xxx\AppData\Local\Temp\WERF108.tmp.mdmp</Data>
    <Data>C:\Users\xxx\AppData\Local\Microsoft\Windows\WER\ReportArchive\AppCrash_devenv.exe_3f453f47c0d86c534010e7cf6788bb8f42fbcd_cab_144e2fda</Data>
    <Data>
    </Data>
    <Data>0</Data>
    <Data>69d0daee-9628-11e2-aeba-005056c00008</Data>
    <Data>8</Data>
  </EventData>
</Event> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-26T16:14:59.440

用于解决这些类型错误的标准检查：

*   卸载 Visual Studio 的任何 beta/ctp 版本。
*   查看 Windows 事件查看器并检查应用程序日志中的以下两项：[![在此处输入图像描述](../Images/125320fc9afe8dab4cac8772d2d77640.png)](https://i.stack.imgur.com/70via.png)它将包含一个堆栈跟踪，可以帮助您找到罪魁祸首。
*   删除所有`*.*user`文件和解决方案用户选项文件 ( `.suo`)
*   [在打开活动日志的情况下运行 Visual Studio，](https://msdn.microsoft.com/en-us/library/ms241272.aspx)以查看日志是否包含导致崩溃的提示。( `devenv /log`)
*   在安全模式下运行 Visual Studio ( `devenv /safemode`)
*   [清除 ComponentModelCache](https://stackoverflow.com/a/17604007/736079)文件夹
*   检查是否有任何扩展/附加组件/插件需要更新并首先更新它们以查看是否可以解决您的问题。
*   禁用所有加载项和扩展（VS 命令、WebEssentials 等）
*   卸载所有插件（resharper、coderush、reflector 等）
*   安装最新的补丁和服务包，如果您安装了 SQL Server 或其他安装了基于 Visual Studio Shell 的功能的产品，则可能需要重新应用这些服务包：

    *   2005：[SP 1](http://www.microsoft.com/en-us/download/details.aspx?id=5553) & [TFS 2010 Forward Compatibiltiy Patch](http://www.microsoft.com/en-us/download/details.aspx?id=3263) & [Visual Studio 更新适用于 Windows Vista](http://www.microsoft.com/en-us/download/details.aspx?id=7524)
    *   2008：[SP 1](http://www.microsoft.com/en-us/download/details.aspx?id=10986)和[TFS 2012/VSO 前向兼容性补丁](http://support.microsoft.com/kb/2673642/en-us)
    *   2010： Windows 8 和 TFS 2012 的[SP 1](http://www.microsoft.com/download/en/details.aspx?id=23691)和[TFS 2012/VSO 向前兼容性补丁](http://www.microsoft.com/download/en/details.aspx?id=29082)和[Visual Studio 更新](http://www.microsoft.com/en-us/download/details.aspx?id=34677)。
    *   2012：[更新 5](http://www.microsoft.com/en-us/download/details.aspx?id=39305)
    *   2013 年：[更新 5](https://go.microsoft.com/fwlink/?LinkId=519379)
    *   2015 年：[更新 3](https://go.microsoft.com/fwlink/?LinkId=691129)和[KB3165756](https://msdn.microsoft.com/en-us/library/mt752379.aspx)
    *   2017：[更新到最新版本](https://www.visualstudio.com/downloads/)
*   重置与设置 ( `devenv /resetsetting /resetaddin /resetskippkgs /setup`)

*   备份并删除`%LOCALAPPDATA%\Microsoft\VisualStudio\`文件夹以让 Visual Studio 重新创建您的设置文件夹。
*   在安装扩展、更新等时不要运行 Visual Studio。

尝试重现它。如果仍然出现，请修复 Visual Studio 并按顺序重新应用最新的服务包和修补程序。如果仍然出现，请向Microsoft提交[支持票证，或在](https://support.microsoft.com/oas/default.aspx?gprid=1117&st=1&wfxredirect=1&sd=gn)[connect](http://connect.microsoft.com/VisualStudio)上提交项目。

如果没有发生，请一一打开/安装/恢复项目，直到找到罪魁祸首。我知道这需要做很多工作，但是由于您的错误发生在 CLR 深处的某个地方（您会看到 StackOverflow 异常），因此很难轻松地查明问题。当您找到有问题的项目时，请查看是否有更新或请求他们的支持（或更新您的问题）。

在最坏的情况下，您可以使用 强制卸载 Visual Studio `vs_setup /uninstall /force`，这应该适用于 2012 和更新的安装程序。

如果您仍在使用旧版本的 Visual Studio（2010 或更早版本），真的，真的。真的考虑升级了。这些版本已超过其支持生命周期，并且是为甚至不再受支持的 Windows 版本构建的。我知道这些升级在短期内会造成痛苦，但长期的解决方案是真正摆脱旧版本。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-12-10T17:52:50.993

一种快速而肮脏的方法是将`%LOCALAPPDATA%\Microsoft\VisualStudio\`文件夹重命名为`VisualStudio.backup\`并重新启动 devenv。它将重新创建文件夹并使用默认设置文件填充它。当然，您将丢失任何自定义，但很多时候这是可以的和/或很容易重新创建。您总是有备份文件夹以防万一。

如果您想更进一步，您可以将设置从备份中逐一移回新文件夹，直到您可以完全隔离问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-30T09:42:09.747

以上都没有奏效。但是我看到文件旁边出现了一个用户设置`.sln`文件。我删除了它，以及解决方案的相应`.suo`文件。这解决了问题。

# javascript - JS：“取消隐藏”div元素后向下滚动

> ID：15640884
> 
> 赞同：1
> 
> 时间：2013-03-26T15:24:33.443
> 
> 标签：javascript, css, html

我有一个 div 元素，里面有很多内容：

```
<div id="x" class="unhidden">
    text and more divs
</div> 
```

CSS 类“未隐藏”包含：

```
display: block; 
```

当我单击一个链接时，元素 id='x' 通过 javascript 变为 class='hidden' 槽，其中包含：

```
display: none; 
```

div 元素现在被隐藏了。到目前为止，一切都很好。现在我想返回并显示完整`div='x'`并向下滚动到 div 中的某个 div `id='x'`。

因此，当我单击后退按钮时，首先该类`unhidden`再次通过 javascript 变为低谷，然后我在同一函数中运行此脚本：

```
window.scroll(0, findPos(document.getElementById(GoTo))); 
```

GoTo 是我要向下滚动到的某个 div 的 ID。使用此功能向下滚动：

```
function findPos(obj) {
    var curtop = 0;
    if (obj.offsetParent) {
       do {
            curtop += obj.offsetTop;
       } while (obj = obj.offsetParent);

       return [curtop];
   }
} 
```

该脚本确实找到了要去的位置，但不会向下滚动。

如果向下滚动脚本与隐藏/未隐藏部分分开，它也可以工作。但是在这里它不起作用，隐藏/显示部分会阻止某些东西。

任何解决方案或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:44:00.233

我认为这是由于浏览器首先执行了所有 JS 代码，然后才将控制权交还给渲染引擎——因此更改类实际上并没有使元素在计算元素位置的代码处再次可见执行（并且未显示的元素没有任何位置）。

如果您将整个`window.scroll`调用包装到一个匿名函数中并使用 以最小的延迟执行它`setTimeout`，那应该可以解决问题：

```
referenceToDivElement.className = "unhidden";
var targetElement = document.getElementById(GoTo);
window.setTimeout(function() {
  window.scroll(0, findPos(targetElement));
}, 5); 
```

# eclipse - 如何仅当所选元素具有特定属性时才启用命令？

> ID：15640892
> 
> 赞同：0
> 
> 时间：2013-03-26T15:25:06.607
> 
> 标签：eclipse, eclipse-plugin

我正在构建一个 eclipse 插件，并且我有一个树表示，其中显示了 A 类型元素的结构（见下文）。

```
Class A{
  List<B> children;
}

Abstract Class B{
  ...
}

Class C extend B{
  ...
}

Class D extend B{
  ...
} 
```

我有一个命令，只有当三个中的选定元素是 A 的实例时才能启动。这是我正在使用的表达式。

```
<extension point="org.eclipse.core.expressions.definitions">
  <definition id="SelectionOfA">
    <with variable="selection">
      <and>
        <count value="1"></count>
        <iterate ifEmpty="false" operator="or">
          <instanceof value="A"></instanceof>
        </iterate>
      </and>
    </with>
  </definition>
</extension> 
```

现在我想细化这个条件。我只想在选择 A 的实例并且子列表至少包含一个作为 C 实例的元素时启用该命令。我尝试保留此表达式并定义一个新表达式。只有当两个表达式都为真时，我才会启用该命令。我从上面报告的表达式开始，我尝试`instanceof`用 tags替换 tag `with`，`iterate`但`adapt`没有好的结果。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:15:07.353

我会实现一个**属性测试器**来检查是否满足条件。

这样的事情应该做的工作：

```
public class YourConditionTester extends PropertyTester {
  public boolean test(final Object receiver, final String property, final Object[] args, final Object expectedValue) {
    if (property.equals("isA_and_hasC")) {
      return (true if your condition is met, otherwise false)
    }
    return false;
  }
} 
```

然后，而不是使用`instanceof`set (eg) to "isA_and_hasC"。`test``property`

[在此处](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_core_expressions_propertyTesters.html)查看有关属性测试仪的更多信息。

# php - __isset 中的未定义索引

> ID：15640893
> 
> 赞同：0
> 
> 时间：2013-03-26T15:25:06.640
> 
> 标签：php

我在 __isset 中的实际代码中遇到错误，但是当我访问“运行 php 在线网站”时，它可以工作。所以我不确定为什么它在我的代码中不起作用。

```
<?
class Test {

    private $args;

    public function __construct($args = array()) {
        $this->args = $args;
    }

    public function __isset($name) {
        return $this->args[$name]; //undefined index on my server (is fine on php site)
    }

    function prnt() {
        // echo isset($this->i) ? "set" : "notset"; --> works, both print 'set'
        echo isset($this->h) ? "set" : "notset";
    }

}
?> 
```

然后我执行这个：

```
$test = new Test(array('i' => '1234'));
$test->prnt();
//result on php website: notset
//result on my website: Undefined index at the line shown above. 
```

可能有用的信息：
我的服务器正在运行 php 5.1。
这`isset($this->var)`发生在`include`我实际代码中的文件中。
只要变量存在（`i`如上），它显然有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:29:47.000

您正在尝试返回不存在的键的值，而不是使用返回键的测试结果`array_key_exists`

```
public function __isset($name) {
    return array_key_exists($name, $this->args);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T15:30:11.080

您在每个环境中的错误报告设置是不同的。一种环境允许`E_NOTICE`水平错误通过，而另一种环境则阻止它们。

你应该这样做：

```
return array_key_exists($name, $this->args); 
```

# c# - 如何使用 DirectoryInfo.EnumerateFiles

> ID：15640894
> 
> 赞同：1
> 
> 时间：2013-03-26T15:25:07.700
> 
> 标签：c#, directory, enumeration

根据[MSDN 上的文档`DirectoryInfo.EnumerateFiles`](http://msdn.microsoft.com/en-us/library/system.io.directory.enumeratefiles.aspx)，该过程涉及：

1.  `DirectoryInfo`用路径声明
2.  使用`EnumerateFiles`方法检索文件

有一些底层类可以检索这些信息，例如[`FileInfo`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)依赖于[`FileSystemInfo`](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.aspx).

```
DirectoryInfo DR = new DirectoryInfo(@"C:\temp\Downloads");
foreach(FileInfo FF in DR.EnumerateFiles())
{ 
    textBox1.Text += FF.ToString()+ "\r\n"; 
} 
```

1.  如何在[`FileInfo`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)直接使用之前在可以声明的地方重新编码？
2.  如果我要使用，我将如何重新编码`List<T>`？
3.  我将如何读取列表可枚举数据？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:26:44.413

1.  你为什么想要？
2.  `var list = DR.EnumerateFiles().ToList();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:13:36.353

您要尝试做什么并不是那么清楚，但尽管如此，您可以通过执行以下操作“在使用它之前声明它”：

```
DirectoryInfo DR = new DirectoryInfo(@"C:\temp\Downloads");
List<string> filePaths = DR.EnumerateFiles();
IEnumerable<FileInfo> fileInfos = filePaths.Select(f => new FileInfo(f));
foreach(FileInfo fileInfo in fileInfos)
{ 
    textBox1.Text += fileInfo.FullName.ToString()+ "\r\n"; 
} 
```

（也就是说，只需将声明移到foreach 循环*之外）*

由于`EnumerateFiles`返回文件的*完整路径*，因此您需要从中创建`FileInfo`实例，您可以使用为您提供的构造函数来执行此操作。

要完成您所说的“列表”位，您只需添加`ToList()`，LINQ 将为您完成工作：

```
List<FileInfo> fileInfos = filePaths.Select(f => new FileInfo(f)).ToList(); 
```

# java - 使用@IdClass 存储具有复合主键的实体，但无法持久化

> ID：15640897
> 
> 赞同：10
> 
> 时间：2013-03-26T15:25:16.973
> 
> 标签：java, jpa, jpa-2.0

我的id类如下，

```
public class EmployeeId implements Serializable{
    public EmployeeId(){}
    public EmployeeId(Integer id, String country){
        this.id = id;
        this.country = country;
    }

    private Integer id;
    private String country;

    @Override
    public int hashCode(){        
        return this.getCountry().hashCode() + getId();
    }

    @Override
    public boolean equals(Object o){
        boolean flag = false;
        EmployeeId myId = (EmployeeId) o;

        if((o instanceof EmployeeId) 
                && (this.getCountry().equals(myId.getCountry()))
                && (this.id == myId.getId())){
            flag = true;
        }
        return flag;
    }
// rest of the code with getters only
} 
```

以下是我使用的实体

```
@Entity
@IdClass(EmployeeId.class)
@Table(name="TBL_EMPLOYEE_FOUR")
public class EmployeeEntityTwo {

    public EmployeeEntityTwo(){}
    public EmployeeEntityTwo(Integer id,String country, String empName){
        this.country = country;
        this.employeeId = id;
        this.empName = empName;
    }

    @Id
    @Column(name="ID")
    private Integer employeeId;

    @Id
    @Column(name="COUNTRY",length=50)
    private String country;

    @Column(name="NAME",length=50)
    private String empName;
// getters and setters
} 
```

这是我的桌子

```
create table TBL_EMPLOYEE_FOUR(
    ID integer, 
    COUNTRY varchar(50),
    NAME varchar(50),
    constraint PK_EMP_00239 primary key(ID,COUNTRY)
) 
```

这就是我想要运行的

```
 private static void idClassStore(EntityManager em) throws Exception{
     List<EmployeeEntityTwo> employees = Arrays.asList(new EmployeeEntityTwo(12, "KENYA", "Ridushi Ogambe"),
                                                       new EmployeeEntityTwo(13, "GHANA", "Mikila Hanza"),
                                                       new EmployeeEntityTwo(14, "EGYPT", "Abdul Hameed Fagdaul"),
                                                       new EmployeeEntityTwo(15, "MOROCCO", "Jamil Mahmoud"),
                                                       new EmployeeEntityTwo(16, "LIBERIA", "Robert Damus"));

     for(EmployeeEntityTwo employee : employees){
         em.persist(employee);            
       }
} 
```

但我得到一个例外

```
Caused by: org.hibernate.AnnotationException: Property of @IdClass not found in entity com.entities.EmployeeEntityTwo: id 
```

我正在使用 JPA 和 Hibernate 作为持久性提供程序，

但是我使用的@IdClass 是 import javax.persistence.IdClass;

那么哪里出了问题，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T15:37:13.623

我发现了解决方案：

`EmployeeEntityTwo`类中的“id”字段`EmployeeId`应该相同。

```
// EmployeeId.java;
private Integer id; 
```

应该

```
// EmployeeId.java;
private Integer employeeId; 
```

我分别调整了吸气剂，它起作用了。

* * *

来自`javax.persistence.IdClass`JavaDocs：

> 主键类中的字段或属性的名称必须与实体的主键字段或属性的名称相对应，并且它们的类型必须相同。

# android - 如何更改android模拟器AVD模拟ARM5T来模拟ARM5TE

> ID：15640902
> 
> 赞同：0
> 
> 时间：2013-03-26T15:25:26.423
> 
> 标签：android, arm, avd

我的果酱应用程序报告说我的 AVD 正在模拟 ARM5T，并且它是为 ARM5TE 构建的。我找不到解释为什么它默认为 ARM5T 以及如何更改此设置的文档。有谁知道我在哪里可以找到有关此主题的文档？

# mercurial - TeamCity 属性获取克隆目录？

> ID：15640904
> 
> 赞同：3
> 
> 时间：2013-03-26T15:25:30.810
> 
> 标签：mercurial, teamcity-7.1

我们将 TeamCity 与 mercurial 一起使用，并将“克隆存储库至”字段留空，以便自动生成路径。

我有一个配置模板，我想在其中添加需要访问`.hg`目录的构建步骤。

我知道 TeamCity 将存储库克隆到，`data\system\caches\mercurial\hg_somenumbers`所以有没有办法获得这条路径？

# ios - 无法从动态加载的 NSBundle 中获取 CFBundleIdentifier

> ID：15640907
> 
> 赞同：1
> 
> 时间：2013-03-26T15:25:47.190
> 
> 标签：ios, foundation, nsbundle

我正在尝试动态加载捆绑包，以在少数情况下代替**mainBundle使用。**我设法用一些资源加载了这个包，比如 Localizable.strings 等等。当我对该包使用本地化StringForKey 时，会加载正确的本地化字符串。这就是说*它有效*。

不过，我什至想获得一个捆绑标识符。因此，我将包含**CFBundleIdentifier**字符串的*info.plist*文件添加到 bundle 文件夹的根目录。这，行不通。当我尝试通过

 **```
[myBundle bundleIdentifier] 
```

我得到一个空值。我试图将文件都命名为

```
Info.plist 
```

和

```
MyBundle-Info.plist 
```

其中 MyBundle 是包的名称（内容存储在 MyBundle.bundle 中）。但没有运气。

我真的不明白怎么了。我是否必须在 info plist 中设置其他键？或者可能是命名问题？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:58:31.367

我最终查看了 Core Foundation（毕竟 NSBundle 是基于 CFBundle）源代码，并找出了问题所在。所以..

负责收集 info.plist 内容的函数是[CFBundleGetInfoDictionary](http://www.opensource.apple.com/source/CF/CF-550/CFBundle.c)。每当请求理论上包含在 plist 中的信息时，都会调用此方法。

查看[CFBundle.c ，](http://www.opensource.apple.com/source/CF/CF-550/CFBundle.c) **CFBundleGetInfoDictionary**的实现检查包的 _infoDict 字段是否已初始化，如果未初始化，则对其进行初始化：

```
if (!bundle->_infoDict) bundle->_infoDict = _CFBundleCopyInfoDictionaryInDirectoryWithVersion(CFGetAllocator(bundle), bundle->_url, bundle->_version); 
```

**通过在我的CFBundle**上调用该函数，我没有任何运气，所以我猜想在[_CFBundleCopyInfoDictionaryInDirectoryWithVersion](http://opensource.apple.com/source/CF/CF-635.21/CFBundle_Resources.c)中一定发生了一些错误。

查看[源代码](http://opensource.apple.com/source/CF/CF-635.21/CFBundle_Resources.c)，我注意到，根据 bundle-> **_version**，使用不同的路径来搜索信息 plist。在这种情况下，**版本**取决于用于设置捆绑包的目录结构。确切地说，我的版本是**0**，因为正如函数[_CFBundleURLLooksLikeBundleVersion](http://opensource.apple.com/source/CF/CF-635.21/CFBundle_Resources.c)（在包初始化期间使用）中指定的那样，与*Resources*目录的包是这样的：

```
// check for existence of "Resources" or "Contents" or "Support Files"
    // but check for the most likely one first
    // version 0:  old-style "Resources" bundles
    // version 1:  obsolete "Support Files" bundles
    // version 2:  modern "Contents" bundles
    // version 3:  none of the above (see below)
    // version 4:  not a bundle (for main bundle only) 
```

所以，为了结束这个故事，Info.plist 的基本 URL 在[_CFBundleCopyInfoDictionaryInDirectoryWithVersion](http://opensource.apple.com/source/CF/CF-635.21/CFBundle_Resources.c)中基于版本 0进行初始化

```
 infoURLFromBase = _CFBundleInfoURLFromBase0; 
```

定义为：

```
#define _CFBundleInfoURLFromBase0 CFSTR("Resources/Info.plist") 
```

太好了...我已将*Info.plist*放在*Resources*目录中，而不是在外面，现在它可以工作了。

我想我在某种程度上是个白痴，因为我完成了所有这些旅行，因为这些东西可能写在文档的某个地方，但我找不到它:(**

# android - Android - jar 更改后的 NoClassDefFoundError

> ID：15640917
> 
> 赞同：0
> 
> 时间：2013-03-26T15:25:55.127
> 
> 标签：android, java-7, noclassdeffounderror

我知道有一些类似的问题，但没有解决方案对我有帮助。当我尝试从我的项目组访问自行创建的 .jar 中的（现有）类时，我收到了 java.lang.NoClassDefFoundError。

这个 .jar 在普通的 javaProject 中运行良好，但不适用于 Android。但是这个 .jar 的旧版本在 Android 上运行良好。

我正在使用 Eclipse + Android 开发工具 - 插件（版本 21）进行开发我已将 .jar 放在 Project_Home/libs 文件夹中。编译时没有错误。

在抛出异常之前，有一些“dalvikvm - 找不到类......从......引用”错误。

我认为，Java 版本可能存在问题，因为我们的项目组最近开始使用 Java 7，但我不确定也不知道如何修复它。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:05:39.230

通常我不想回答我自己的问题，但我希望它会对某人有所帮助。
我没有看到其他警告（不是在 Logcat 中，而是在控制台中）：

“Dx 坏类文件魔术（cafebabe）或版本（0033.0000）”

我在另一个[Stackoverflow 问题](https://stackoverflow.com/questions/7866723/dx-bad-class-file-magic-cafebabe-or-version-0033-0000-with-adk14)中发现了这个警告。我用 HexEditor 从不工作的 .jar 打开了一个类文件，并将 Major-Version-Byte 更改为 0x32 并且它工作。我知道这不是解决方案，因为类中可能存在Java 7的特性，因此类文件不再起作用，但证明这是Java版本的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:13:42.627

我认为如果项目编译正常，那么我们可以排除复制或 java buildpath 中的任何错误。我得到此错误的唯一其他时间是我的代码中的导入错误。我建议您重新检查您的导入并重新创建 R.java 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:34:49.233

将您的 lib 重命名为 libs 并更新构建路径，然后重试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:56:47.860

1.  确保您的类与 Android 中已经存在的类不具有相同的名称。在构建包时，由于“优化”而省略了具有相同名称的类。

2.  Android 库大多是针对 1.5 编译的。并非所有库都存在于 Android 中。您的包可能依赖于系统中不存在的其他一些库。

# javascript - 淘汰赛-剑道通过计算的 observable 问题绑定

> ID：15640921
> 
> 赞同：2
> 
> 时间：2013-03-26T15:26:07.440
> 
> 标签：javascript, knockout.js, kendo-ui

我正在尝试使用 knockout-kendo.js 在淘汰赛 forEach 模板中声明剑道下拉列表控件，以便在向淘汰赛可观察数组中添加新项目时，在 UI 中呈现新的剑道下拉列表。

最初，我意识到我不能再将下拉列表的选定值绑定到下拉列表指定的“数据”数组中的整个条目对象。

为了克服这个问题，我在以下线程中遵循了 RP Niemeyer 的建议： [Set the binding of a dropdown in knockout to an object](https://stackoverflow.com/questions/14613550/set-the-binding-of-a-dropdown-in-knockout-to-an-object/15639369#15639369)

现在，这一切都奏效了。伟大的。

我的问题是当尝试将第二个下拉列表添加到模板时，谁的数据绑定到从计算的 observable 返回的对象上的数组属性...（我需要链接下拉列表，以便第一个显示所有学生，第二个显示当前在第一个下拉列表中选择的学生的所有班级，第三个显示当前在第二个下拉列表中选择的班级的所有考试成绩，等等......）

我根据 RP Niemeyer 的原始小提琴创建了一个小提琴来演示我的问题：

[原始小提琴（RP Niemeyer's）](http://jsfiddle.net/rniemeyer/xz2uY/)

[我的问题](http://jsfiddle.net/wLrKb/)

我在小提琴中添加了以下几行：

HTML：

```
<input data-bind="kendoDropDownList: { dataTextField: 'caption', dataValueField: 'id', data: selectedChoice().shapes, value: selectedShapeId }" /> 
```

JS：

```
this.choices = ko.observableArray([
        { id: "1", name: "apple", shapes: ko.observableArray([ { id: "5", caption: "circle" }, { id: "6", caption: "square" }]) },
        { id: "2", name: "orange", shapes: ko.observableArray([ { id: "5", caption: "circle" }]) },
        { id: "3", name: "banana", shapes: ko.observableArray([ { id: "5", caption: "circle" }, { id: "6", caption: "square" }, { id: "7", caption: "triangle" }]) }
    ]); 
```

同样，我期待在第一个下拉列表中的选择更改（导致 selectedId 更改，导致 selectedChoice 更改）也会导致绑定到“selectedChoice”或任何 selectedChoices 属性的任何 UI 元素重新绑定-评估和用户界面分别更新。

我错过了什么吗？或者有没有更好的方法来实现这种“下拉列表链接”行为（同时仍然使用敲除模板和剑道下拉列表控件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:38:06.880

让我给你一些建议。尽量避免访问 observable 值的属性，如您所见，依赖检测并不总是能够检测到依赖。您应该创建一个计算的 observable 来为您进行访问。

```
var ViewModel = function () {
    // ...

    this.selectedChoice = ko.computed(function () {
        var id = this.selectedId();
        return ko.utils.arrayFirst(this.choices(), function(choice) {
           return choice.id ===  id;
        });
    }, this);
    this.selectedChoiceShapes = ko.computed(function () {
        var selectedChoice = this.selectedChoice();
        return selectedChoice && selectedChoice.shapes;
    }, this);
} 
```

然后你的绑定变成：

```
<input data-bind="kendoDropDownList: {
                      dataTextField: 'name',
                      dataValueField: 'id',
                      data: choices,
                      value: selectedId }" />
<input data-bind="kendoDropDownList: {
                      dataTextField: 'caption',
                      dataValueField: 'id',
                      data: selectedChoiceShapes,
                      value: selectedShapeId }" /> 
```

[更新的小提琴](http://jsfiddle.net/jeff1203/z6MwS/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T16:10:38.063

这似乎是使用 Knockout 的 Kendo 的一个缺点。当 Kendo 求值`selectedChoice().shapes`时，它会保留它找到的数组，而不是保留整个表达式。如果您使用选项更新该特定数组，您可以在第二个下拉列表中看到它们。问题是当您更新`selectedChoice`Kendo 时不会重新评估新`shapes`数组的数据。[您可以在这个 fiddle](http://jsfiddle.net/tyrsius/wLrKb/2/)中看到这种行为。

打开 JS 控制台，将上下文设置为 fiddle（默认为`top frame`in Chrome`，然后运行：

```
window.vm.choices()[1].shapes.push({"id": "6", "caption" : "Thing"}) 
```

您将看到第二个下拉列表更新。更改第一个下拉列表没有效果。您可以看到，在[这个小提琴](http://jsfiddle.net/tyrsius/wLrKb/3/)Knockout without kendo 中重新评估了整个表达式，正确地更新了第二个`select`选项。

# parsing - 实际使用推荐哪些 OCaml 类 parsec 库？

> ID：15640922
> 
> 赞同：1
> 
> 时间：2013-03-26T15:26:09.263
> 
> 标签：parsing, ocaml, parsec

Google 告诉我 OCaml 有几个类似 parsec 的库：Batteries 的 ParserCo、Planck、Mparser、PCL 和 ocaml-parsec。我的问题是知道选择哪一个。有人可以给我一些关于稳定性、主动维护、文档质量等方面的反馈吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T18:19:54.880

我对 ParserCo、Planck 和 PCL 的样子有一个模糊的概念，我会从 Planck 开始，期待找到一些粗糙的边缘，并在使用过程中让自己稍微改进一下库。它们都没有真正被积极记录，但普朗克得到了一些“严肃的”测试用例（解析 OCaml 语法本身），开发人员 Jun Furuse 可能有兴趣让它成形。

也就是说，解析组合库在 OCaml 世界中并不流行。我们仍然非常积极地使用解析器生成器。如果您对任何一种方式都没有强烈的意见，我建议您尝试一下[Menhir](http://gallium.inria.fr/~fpottier/menhir/)，它非常精致且易于使用（并且还积极维护）。

# linux - 我可以安装共享 .so 和静态 .a 版本的库吗？

> ID：15640926
> 
> 赞同：1
> 
> 时间：2013-03-26T15:26:19.250
> 
> 标签：linux, linker, shared-libraries, static-libraries, libraries

我的问题与此有关：[创建静态和共享 C++ 库](https://stackoverflow.com/questions/4863791/creating-both-static-and-shared-c-libraries)

我正在编译一个库，以便将它安装在两个不同系统上的 ~/local 中。似乎每次我这样做时都会遇到链接器问题，这需要我几个小时才能弄清楚。我正在查看的特定库是[primesieve](https://code.google.com/p/primesieve/)。在该库中，默认情况下仅构建静态库。不幸的是`count_primes.cpp`，无论出于何种原因，示例代码都不会与我的一个系统上的库的静态版本链接。最终我想出了如何构建共享版本，现在代码编译得很好，不需要丑陋的 hack。

鉴于上述情况，如果您正在使用多个系统并希望获得编译代码的最佳机会，那么编译静态版本和共享版本似乎是一个好主意。这是真的？是否有理由不构建两个版本？我意识到这是一个有点主观的问题，但这是一个严重的编程问题，我认为这里的很多人可能都遇到过。

* * *

PS。

这就是我最终用来编译和安装primesieve的共享版本和静态版本到~/local的东西：

```
make
make lib
make install PREFIX=~/local
make clean
make lib SHARED=yes
make install PREFIX=~/local 
```

`make clean`就是[因为](https://stackoverflow.com/questions/4863791/creating-both-static-and-shared-c-libraries)这个。然后我将此添加到我的`.bash_profile`：

```
export LIBRARY_PATH=$LIBRARY_PATH:~/local/lib
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:~/local/lib
export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:~/local/include 
```

或者，在不更改环境变量的情况下，我可以`count_primes.cpp`像这样编译示例程序：

```
g++ -I ~/local/include/ -L ~/local/lib/ -lprimesieve count_primes.cpp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:43:19.563

要使用静态库，您可以将其包含在编译中，就好像它是常规目标文件一样，例如

```
g++ -o foo foo.cpp /path/to/mylib.a 
```

当然，这也意味着静态链接。

您仍然可以与动态库进行静态链接，因此静态库实际上并没有多大用处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:30:11.987

没有理由不建立两者。两个图书馆都不会“做”任何事情。共享库只有在动态链接器可行的路径中才会被加载（就像您通过将其添加到 LD 库路径中所做的那样）。除非您明确链接它，否则不会使用静态的 - 但这仅在编译（链接）时完成。

# google-maps - Google Map iframe - 缓存问题

> ID：15640927
> 
> 赞同：0
> 
> 时间：2013-03-26T15:26:20.193
> 
> 标签：google-maps

我们有一个使用谷歌地图链接功能创建的 iframe 的 PHP 页面。正在显示的 Google 地图是来自我们网站的 KML 文件。

[http://www.slocleanair.org/air/AirForcasting_map3.php](http://www.slocleanair.org/air/AirForcasting_map3.php)显示了两张地图。

显示的 URL 是在页面加载时通过 PHP 脚本创建的，因此链接指向“今天”预测。六天的预报在工作日上传，KML 文件名包括日期。我们在 URL 中添加一个 &time=xxxx 参数，以使其对于每个页面加载都是唯一的。这是一个非常低容量的应用程序。

我们的问题是，如果我们搞砸了今天的预测并需要上传新版本的 KML，我们将看不到新版本。看来 time 参数并没有像我们希望的那样破坏缓存。似乎没有使用本地缓存，因为问题出现在浏览器和 PC 上。

地图是否被谷歌缓存？如果是这样，我们如何强制刷新而不重命名文件？

我想我们的网络服务器也可以缓存 - 如果是这样，是否有一种通用的方法来强制我们的服务器刷新它的缓存？如果这甚至有可能我可以联系他们寻求具体帮助 - 这个缓存点甚至可能吗？

想法？提前致谢！

# r - 应用于 R 中两个不同数据帧的所有列和行

> ID：15640928
> 
> 赞同：1
> 
> 时间：2013-03-26T15:26:21.037
> 
> 标签：r, dataframe, apply

我尝试在两个数据帧的所有行和列上应用一个函数，但我不知道如何用 apply 来解决它。我认为以下脚本解释了我打算做什么以及我试图解决它的方式。任何建议将不胜感激！请注意，这`simplefunction`只是一个示例函数，以使其保持简单。

```
# some data and a function
df1<-data.frame(name=c("aa","bb","cc","dd","ee"),a=sample(1:50,5),b=sample(1:50,5),c=sample(1:50,5))
df2<-data.frame(name=c("aa","bb","cc","dd","ee"),a=sample(1:50,5),b=sample(1:50,5),c=sample(1:50,5))

simplefunction<-function(a,b){a+b}

# apply on a single row
simplefunction(df1[1,2],df2[1,2])

# apply over all colums
apply(?)

## apply over all columns and rows
# create df to receive results
df3<-df2

# loop it
for (i in 2:5)df3[i]<-apply(?) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:33:48.653

我的第一个`mapply`答案！！对于您的简单示例，您有...

```
mapply( FUN = `+` , df1[,-1] , df2[,-1] )
#         a  b  c
#   [1,] 60 35 75
#   [2,] 57 39 92
#   [3,] 72 71 48
#   [4,] 31 19 85
#   [5,] 47 66 58 
```

你可以像这样扩展它......

```
mapply( FUN = function(x,y,z,etc){ simplefunctioncodehere} , df1[,-1] , df2[,-1] , ... other dataframes here ) 
```

数据帧将按顺序传递给函数，因此在此示例中，df1 将是 x，df2 将是 y，z 等将是您按该顺序指定的其他一些数据帧。希望这是有道理的。`mapply`将获取所有数据帧的第一行、第一列值并应用函数，然后是所有数据帧的第一行、第二列并应用函数，依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:29:12.670

您还可以使用`Reduce`：

```
set.seed(45) # for reproducibility
Reduce(function(x,y) { x + y}, list(df1[, -1], df2[,-1]))
#    a  b  c
# 1 53 22 23
# 2 64 28 91
# 3 19 56 51
# 4 38 41 53
# 5 28 42 30 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:29:54.227

你可以这样做：

```
df1[,-1] + df2[,-1] 
```

这使 ：

```
 a  b  c
1 52 24 37
2 65 63 62
3 31 90 89
4 90 35 33
5 51 33 45 
```

# xml - MusicXML 规范和和弦符号

> ID：15640931
> 
> 赞同：4
> 
> 时间：2013-03-26T15:26:25.007
> 
> 标签：xml, music-notation, musicxml

我一直在查看 musicXML 规范，据我所知，对和弦符号的支持并不能节省和弦的持续时间。这是 G6/D 的示例（[来自此处](http://www.musicxml.com/tutorial/chord-symbols-diagrams/chord-symbols/)）：

```
 <harmony default-y="100">
        <root>
          <root-step>G</root-step>
        </root>
        <kind halign="center" text="6">major-sixth</kind>
        <bass>
          <bass-step>D</bass-step>
        </bass>
      </harmony> 
```

似乎和弦必须始终与音符相关联。但是假设我们有一个全音符的 9/4 小节，三个和弦每个持续三个节拍，在下一个小节中，我们有另一个全音符，又是三个和弦，但是现在，第一个持续 4 个节拍，第二个持续3和第三个2。所以：

```
bar1 (9/4): Cm7 (3) Dm7 (3) Em (3)
bar2 (9/4): Cm7 (4) Dm7 (3) Em (2) 
```

是否可以将其保存为 musicXML 格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T05:27:04.210

您可以将和声元素放在您喜欢的任何音乐位置。和声元素本身不会移动时间线 - 为此您需要一个注释、转发或备份元素。但是，和声元素有一个子偏移元素，可让您将和声元素的位置从当前时间线位置移开。确保使用 <offset sound="yes"> 以便将声音和声和书面和弦符号一起移动到正确的音乐位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:01:49.113

我的感觉是你问的问题是不可能的，因为你注意到每个符号都需要与一个音符相关联。但是它们可以与休止符相关联，甚至可以与 print-object="no" 标签关联。或者您可以将符号放在乐谱中，然后使用标签跳到小节中的下一个位置。这将为您的数据提供最准确的表示，但代价是可能无法在符号软件和其他依赖于内部存储逻辑位置的注释的用户代理中正确呈现。

# javascript - jQuery UI 对话框按钮不会点击

> ID：15640936
> 
> 赞同：1
> 
> 时间：2013-03-26T15:26:35.923
> 
> 标签：javascript, jquery, jquery-ui

警报正在工作，但按钮不会单击...

```
$('#loginDialog .field input').keyup(function (e) {
     if (e.keyCode == 13) {
         alert('it is working!');
         $('.ui-button').click();
         return false;
     }
}); 
```

我尝试了许多不同的方法，包括在打开对话框时重新初始化方法，但似乎没有任何效果......

html:

```
<div id="loginDialog" title="Please Login">
     <div class="label">Password:</div>
     <div class="field"><input type="password" /></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:34:19.847

> ui-button 由 jquery ui 生成

我从您的评论中假设该按钮是动态生成的，并且您绑定到的任何单击事件都必须使用事件委托进行绑定，类似于：

```
$('body').on('click', '.ui-button', function(){...) 
```

代替`body`，使用最接近的静态元素也可以，并且是首选。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:33:46.297

请试试这个：

```
$(function() {
$('#loginDialog .field input').keyup(function (e) {
     if (e.keyCode == 13) {
         alert('it is working!');
         $('.ui-button').trigger('click');
         return false;
     }
});

$('.ui-button').click(function() {
   alert('hello world'); 
});
}; 
```

这里有一个例子：http: [//jsfiddle.net/netme/YZH3B/](http://jsfiddle.net/netme/YZH3B/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T15:38:58.023

这应该触发事件......

```
 $('.ui-button').trigger('click'); 
```

# iphone - 如何调用此注册设备的方法

> ID：15640939
> 
> 赞同：0
> 
> 时间：2013-03-26T15:26:37.113
> 
> 标签：iphone, ios, objective-c, xcode

我不知道如何用以下应用程序委托方法替换“方法”。

视图控制器

```
[(AppDelegate *)[[UIApplication sharedApplication] delegate] method]; 
```

应用委托

```
- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devToken {
    TUPushHelper * helper = [[TUPushHelper alloc] initWithTokenData:devToken];
    [helper registerDevice];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:33:06.733

您不需要以编程方式调用它。代理在调用UIApplication的registerForRemoteNotificationTypes:方法后收到此消息，注册过程没有错误。**didFailToRegisterForRemoteNotificationsWithError:**否则将被调用。

要为您的设备注册远程推送通知，您必须执行以下操作：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
...
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];
...
} 
```

**编辑：**[在此处](http://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9) 查看 APNS 的 Apple 指南

也看看这个[教程](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

# java - 和另一个 NPE

> ID：15640940
> 
> 赞同：-3
> 
> 时间：2013-03-26T15:26:38.923
> 
> 标签：java, android, fragment

我得到了 3 个片段，2 个是 player1 和 player2，一个是 tictactoelayout，一个基本上将所有这些片段连接在一起，即 TicTacToeGame。在我的每个播放器片段中，我都试图访问 TicTacToeGame 方法

```
public class PlayerTurn1 extends Fragment  {

public View onCreateView(LayoutInflater inflater,
    ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.playerturn1, container, false);
        return view;
    }

    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

       extras = getArguments();

       player1 = new ArrayList<String>(extras.getStringArrayList("player1"));

        row = (EditText) getActivity().findViewById(R.id.rowP1);
        column = (EditText) getActivity().findViewById(R.id.columnP1);
        p1Name = (TextView) getActivity().findViewById(R.id.p1NameInfo);
        p1Icon = (TextView) getActivity().findViewById(R.id.p1IconInfo);
        doneP1 = (Button) getActivity().findViewById(R.id.doneP1);
        resetP1 = (Button) getActivity().findViewById(R.id.resetP2);

        setPlayer();

        doneP1.setOnClickListener(new View.OnClickListener() {          
            public void onClick(View v) {   

                if(checkField() != false)
                {
                    String rowValueStr = row.getText().toString();
                    String colValueStr = column.getText().toString();
                    int rowValueInt = Integer.parseInt(rowValueStr);
                    int colValueInt = Integer.parseInt(colValueStr);

                    myObject.playTicTacToe(rowValueInt, colValueInt);
                    myObject.whosTurn = 2;
                    callPlayer2Fragment();

                }

            }
        });
    }
} 
```

这是我的 Player2 片段：

```
public class PlayerTurn2 extends Fragment{
 public View onCreateView(LayoutInflater inflater,
    ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.playerturn2, container, false);

        return view;
    }

    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        extras = getArguments();

        player2 = new ArrayList<String>(extras.getStringArrayList("player2"));

        p2Name = (TextView) getActivity().findViewById(R.id.p2NameInfo);
        p2Icon = (TextView) getActivity().findViewById(R.id.p2IconInfo);
        row = (EditText) getActivity().findViewById(R.id.rowP2);
        column = (EditText) getActivity().findViewById(R.id.columnP2);
        doneP2 = (Button) getActivity().findViewById(R.id.doneP2);
        resetP2 = (Button) getActivity().findViewById(R.id.resetP2);

        setPlayer();

        doneP2.setOnClickListener(new View.OnClickListener() {          
            public void onClick(View v) {   

                if(checkField() != false)
                {
                    String rowValueStr = row.getText().toString();
                    String colValueStr = column.getText().toString();
                    int rowValueInt = Integer.parseInt(rowValueStr);
                    int colValueInt = Integer.parseInt(colValueStr);

                    myObject2.playTicTacToe(rowValueInt, colValueInt);
                    myObject2.whosTurn = 1;
                    callPlayer1Fragment();
                }
            }
        });
    }
} 
```

这是我在井字游戏中的方法：

```
public void playTicTacToe(int r, int c)
    {
        if(whosTurn == 1)
            images[r-1][c-1].setText(player1.get(1));  
        else
            images[r-1][c-1].setText(player2.get(1));
        return;

    } 
```

这是日志猫：

```
03-26 15:11:31.770: E/AndroidRuntime(5632): java.lang.NullPointerException
03-26 15:11:31.770: E/AndroidRuntime(5632):     at As2.packageTK.TicTacToeGame.playTicTacToe(TicTacToeGame.java:153)
03-26 15:11:31.770: E/AndroidRuntime(5632):     at As2.packageTK.PlayerTurn1$1.onClick(PlayerTurn1.java:64) 
```

第 64 行：

```
myObject.playTicTacToe(rowValueInt, colValueInt); 
```

第 153 行：

```
images[r-1][c-1].setText("O"); 
```

任何想法如何解决这个问题？

**编辑**

```
 TextView[][] images;
image1 = (TextView) this.findViewById(R.id.Image1);
        image2 = (TextView) this.findViewById(R.id.Image2);
        image3 = (TextView) this.findViewById(R.id.Image3);
        image4 = (TextView) this.findViewById(R.id.Image4);
        image5 = (TextView) this.findViewById(R.id.Image5);
        image6 = (TextView) this.findViewById(R.id.Image6);
        image7 = (TextView) this.findViewById(R.id.Image7);
        image8 = (TextView) this.findViewById(R.id.Image8);
        image9 = (TextView) this.findViewById(R.id.Image9);

    images = new TextView[][]{ {image1, image2, image3},
                       {image4, image5, image6},
                       {image7, image8, image9} } 
```

;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:39:55.960

> 任何想法如何解决这个问题？

是的。仔细分析代码。

你说这个语句中抛出了NPE。

```
images[r-1][c-1].setText("O"); 
```

*   两者`r`和`c`都是`int`，因此**不能**是`null`。
*   `images`数组**可能**是`null`. _
*   子`images[r-1]`数组**可以**是.`null`
*   `images[r-1][c-1]`对象**可能**是`null`. _

（如果这不是抛出异常的地方，那么对抛出 NPE 的实际代码进行类似的分析。）

因此，您恰好有 3 个可能导致 NPE 的直接原因。使用调试器或跟踪打印来确定上述哪个是实际的`null`。然后查看创建、初始化和更新数组的代码，找出这些`null`值的来源。然后解决问题。

我无法帮助您找到空值的来源，因为相关代码尚未包含在问题中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:38:33.033

来自 LogCat：

```
java.lang.NullPointerException
    at As2.packageTK.TicTacToeGame.playTicTacToe(TicTacToeGame.java:153) 
```

您可以看到问题出在`playTicTacToe()`（特别是在第 153 行，但我无法确定这是哪一行）。如果这是完整的方法：

```
public void playTicTacToe(int r, int c)
{
    if(whosTurn == 1)
        images[r-1][c-1].setText(player1.get(1));  
    else
        images[r-1][c-1].setText(player2.get(1));
    return;
} 
```

然后`images[r-1][c-1]`, `player1`, and/or`player2`为空...您的调试器将帮助您比我们更快地确定哪些值为空，然后简单地初始化变量。
NPE并不是那么糟糕。

# sql-server-2008 - CurrentProject.OpenConnection 在 MS Access 2000 中失败

> ID：15640941
> 
> 赞同：0
> 
> 时间：2013-03-26T15:26:42.987
> 
> 标签：sql-server-2008, ms-access, vba, ms-access-2000

我支持用 MS Access VBA 编写的带有 SQL Server 后端的 LOB 应用程序。该应用程序的一个特点是能够打开应用程序的第二个实例，允许用户同时查看/修改两条记录。

我第一次打开它连接的应用程序，一切正常。但是，当我尝试打开第二个实例时，我收到以下错误消息：

```
-2147467259 - Method "OpenConnection" of object _CurrentProject failed. 
```

这是发生错误时执行的代码行：

```
CurrentProject.OpenConnection strConnection 
```

我已单步执行代码并验证`strConnection`在应用程序的第一个和第二个实例中是相同的连接字符串

我要找的东西已经不多了。任何想法都非常感谢！

**更新：**似乎有些东西不允许第二个 MSACCESS.EXE 实例使用相同的连接字符串。我的连接字符串在下面，用`database`并`server`替换了实际的数据库和服务器。

```
PROVIDER=SQLOLEDB.1;INTEGRATED SECURITY=SSPI;PERSIST SECURITY INFO=FALSE;INITIAL CATALOG=database;DATA SOURCE=server 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T16:26:53.383

尝试

```
MultipleActiveResultSets=True 
```

（[http://msdn.microsoft.com/en-us/library/h32h3abf(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/h32h3abf(v=vs.110).aspx)）

从同一个应用程序打开一个新表单会更好吗？

```
dim frm as ShowCar_Form

frm.Show 
```

# java - 如何将.py导入java

> ID：15640943
> 
> 赞同：0
> 
> 时间：2013-03-26T15:26:43.347
> 
> 标签：java, python, tomcat7

我想使用带有 Tomcat 的 java servlet 为书籍制作一个 Web 应用程序。如果可能的话，我想从项目 Calibre中导入一些代码（读取`*.epub`、`*.pdf`、`*.doc`、`*.mobi`和文件）到我的项目中。`*.txt`

口径来源：[http](http://bazaar.launchpad.net/~kovid/calibre/trunk/files) ://bazaar.launchpad.net/~kovid/calibre/trunk/files这个链接的一些来源我想在我的项目中工作。

Application Calibre 是一个用 Python 和 C 编写的开源代码。我想要的是导入用 python ( `.py`) 编写的源代码，这样我就可以在我用 java servlet 开发的项目中读取标准的 epub、pdf、txt 来查看和转换书籍。我使用 Eclipse(Java EE)，我不知道导入这些源的步骤以及如何制作。必须将这些源导出到 jar 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:36:10.753

Python 与 Java 不兼容，因为 Java 不能运行 python 代码。

但是，有几个选择。

1.  使用系统调用直接从您的 java 应用程序运行 python 代码。我在这些情况下使用[ProcessBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)，您可以查看 [http://javaevangelist.blogspot.com/2011/12/java-tip-of-day-using-processbuilder-to.html](http://javaevangelist.blogspot.com/2011/12/java-tip-of-day-using-processbuilder-to.html)。
2.  将 Calibre 设置为 Web 应用程序，并将转换函数从您的 Web 应用程序调用到您启动的 calibre Web 应用程序。根据[http://calibre-ebook.com/about](http://calibre-ebook.com/about)和 [http://www.techrepublic.com/blog/opensource/how-to-use-calibre-to-access-your ，它似乎已准备好作为 Web 应用程序运行-ebook-collection-online/2275](http://www.techrepublic.com/blog/opensource/how-to-use-calibre-to-access-your-ebook-collection-online/2275)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:40:18.233

我看到了另外两种方式：

1.  您可以与[Jython](http://www.jython.org/)合作（但我没有这方面的经验，也不知道它是否能解决您的问题）

2.  您可以为 Java 编写一个 JNI 模块，该模块依次启动并使用 Python 解释器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:42:58.000

Python 和 java 是不同的语言。在没有某种转换的情况下，你不能让 java 代码调用 python 代码，或者反过来。我认为您最好的选择是

1.  寻找可以满足您需求的 Java 库，或者
2.  用python写你的网站；这些有很多优秀的库

当然有一些方法可以从 java 调用 python，但是将它们应用到大口径的东西上会相当困难，它也使用一些 C。

# ruby-on-rails - 在 Rails 3 中的 before_add 回调中访问关联

> ID：15640952
> 
> 赞同：2
> 
> 时间：2013-03-26T15:27:07.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

在 Rails 3.2 中，我一直在寻找一种在 before_add 回调中遍历对象关联的方法。

所以基本上我的用例是：

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :meetings
end

class Meeting < ActiveRecord::Base
  has_and_belongs_to_many :users
  has_many :comments, :before_add => :set_owner_id
end

class Comment < ActiveRecord::Base
  belongs_to :meeting
end

def set_owner_id(child)
  child.owner_id = <<<THE USER ID for @user >>>
end 
```

我正在用户的上下文中创建评论：

```
@user.meetings.first.comments.create 
```

如何从 before_add 回调中遍历关联以发现 @user 的 id？我想在模型级别设置它。我一直在查看 proxy_association，但我可能遗漏了一些东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:42:15.120

您可能应该在会议的上下文中创建评论，不是吗？无论哪种方式，您都应该在控制器中处理此问题，因为您将无法访问模型中的 @user。

```
@comment = Meeting.find(id).comments.create(owner_id: @user, ... ) 
```

但是，如果您坚持自己的方式，请执行以下操作：

```
@comment = @user.meetings.first.comments.create(owner_id: @user.id) 
```

# lisp - 为什么不同函数之间的谓词命名约定不同？

> ID：15640953
> 
> 赞同：7
> 
> 时间：2013-03-26T15:27:23.943
> 
> 标签：lisp, naming-conventions, common-lisp

我是一个开始学习该语言的 Common Lisp 新手。我的问题是：我见过几个函数以不同的方式使用谓词语法。例如（刚刚查了一下），有 streamp 和 pathnamep，但也有 input-stream-p 和 output-stream-p。为什么不是所有函数都标准化为使用 *p 或 *-p？这可能只是一个历史文物吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T16:18:08.743

规则是**单词谓词名称以 just 结尾`P`**，而**多词谓词名称以 结尾`-P`**。前者的原因主要是历史原因；后者的原因是一个名字 like`input-streamp`会错误地暗示被问的问题是“这个输入是一个流吗？” 或类似的东西。

# android - 将 Google Analytis 集成到 Android 应用程序

> ID：15640954
> 
> 赞同：0
> 
> 时间：2013-03-26T15:27:27.117
> 
> 标签：android, analytics

[https://developers.google.com/analytics/devguides/collection/android/v2/#manifest](https://developers.google.com/analytics/devguides/collection/android/v2/#manifest) “将发送方法添加到每个活动的 onStart() 和 onStop() 方法中，如下例所示：”

这是问题，我的主类中没有 onStart 和 onStop 方法。我应该把那段代码放在我所有的方法中吗？还是只在特定的？我的课堂上有很多方法（可能应该对此做些什么......）：

```
package com.something.smth;

import something.com;

@SuppressLint("DefaultLocale")
public class Main extends Activity implements View.OnClickListener {

EditText input;
LinearLayout ll;

@Override
protected void onCreate(Bundle savedInstanceState) {
    something
}

private void whatToDo() {
    something
}

@Override
public void onClick(View v) {
    something
}

private void prefdata() {
    something
}

private void printAll(int i, int examNumb) {
    something
}

private void printOutFirst(String lesson, String type, int monthD,
        int dayD, int hourD) {
    something
}

private void printOutSecond(int monthD, int dayD, int hourD) {
    something
}

private void timeleft(int mDate, int dDate, int hDate) {
    something
}

@Override
public boolean onCreateOptionsMenu(android.view.Menu menu) {
    something
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    something
}
} 
```

另外，我应该把那段代码放在我所有的类中还是只放在我的主（上面）类中？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:37:38.150

您绝对应该创建这些方法并将适当的 GA 调用放在那里。另一种选择是构建一个基类并扩展它，这样您就不会重复代码。我在这里概述了一些其他技巧：

[http://www.aydabtudev.com/2011/03/google-analytics-tricks-for-android.html](http://www.aydabtudev.com/2011/03/google-analytics-tricks-for-android.html)

# ios - 保存 TableView 数据

> ID：15640963
> 
> 赞同：0
> 
> 时间：2013-03-26T15:27:51.190
> 
> 标签：ios, objective-c, core-foundation

我确实让 tableview 保存和加载数据。我有 2 个警告和 2 个错误。

错误：

> 从 'NSString *__strong' 分配给'BOOL'（又名'signed char'）的整数转换的不兼容指针
> ARC 不允许将'BOOL'（又名'signed char'）隐式转换为'id'
> 发送不兼容的整数到指针转换'BOOL'（又名'signed char'）到'id'类型的参数

我哪里错了？我该如何解决？

任务.h

```
#import <Foundation/Foundation.h>

@interface Task : NSObject

@property (nonatomic,strong) NSString *name;
@property (nonatomic,assign) BOOL done;

-(id)initWithName:(NSString *)name done:(BOOL)done;

@end 
```

任务.m

```
#import "Task.h"

@implementation Task

@synthesize name = _name;
@synthesize done = _done;

-(id)initWithName:(NSString *)name done:(BOOL)done {
    self = [super init];

    if (self) {
        self.name = name;
        self.done = done;
    }
    return self;
} 
```

我的保存和加载代码

```
- (void)applicationDidEnterBackground:(NSNotification *)notification {
    NSLog(@"Entering Background");
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    // paths[0];
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *plistPath = [documentsDirectory stringByAppendingPathComponent:@"data.plist"];
    //NSArray  *keys = [[NSArray alloc] initWithObjects:@"task", nil];
    NSMutableArray *array = [[NSMutableArray alloc] init];
    NSEnumerator *enumerator = [_tasks objectEnumerator];
    Task *tempTodo;
    while ( tempTodo = [enumerator nextObject])
    {
        [array addObject:tempTodo.name];
        [array addObject:tempTodo.done]; //Eror is here..
    }
    [array writeToFile:plistPath atomically:YES];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.tasks = [[NSMutableArray alloc] init];

    UIApplication *app = [UIApplication sharedApplication];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationDidEnterBackground:) name:UIApplicationDidEnterBackgroundNotification object:app];

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    // paths[0];
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *plistPath = [documentsDirectory stringByAppendingPathComponent:@"data.plist"];
    if ([fileManager fileExistsAtPath:plistPath] == YES)
    {
        NSMutableArray *readArray = [NSMutableArray arrayWithContentsOfFile:plistPath];
        _tasks = [[NSMutableArray alloc] init];
        NSEnumerator *enumerator = [readArray objectEnumerator];
        NSString *str = [[NSString alloc] init];
        while ( str = [enumerator nextObject])
        {
            Task *tempTodo = [[Task alloc] init];
            tempTodo.name = str;
            str = [enumerator nextObject];
            tempTodo.done = str;  //Error and warning is here.
            [_tasks addObject:tempTodo]; 

        }
        [[self tableView] reloadData];
    }

} 
```

* * *

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"AddTaskSegue"]) {
        UINavigationController *navCon = segue.destinationViewController;

        AddTaskViewController *addTaskViewController = [navCon.viewControllers objectAtIndex:0];
        addTaskViewController.taskListViewController = self;
    } else if ([segue.identifier isEqualToString:@"EditDoneTaskSegue"] || [segue.identifier isEqualToString:@"EditNotDoneTaskSegue"]) {
        EditTaskViewController *edit =segue.destinationViewController;
        edit.task = [self.tasks objectAtIndex:self.tableView.indexPathForSelectedRow.row];

    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *NotDoneCellIdentifier = @"NotDoneTaskCell";
    static NSString *DoneCellIdentifier = @"DoneTaskCell";

    Task *currentTask = [self.tasks objectAtIndex:indexPath.row];

    NSString *cellIdentifier = currentTask.done ? DoneCellIdentifier : NotDoneCellIdentifier;

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];

    // Configure the cell...
    cell.textLabel.text = currentTask.name;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:29:39.433

~~代替`@property (nonatomic,assign) BOOL done;`~~

利用

```
@property BOOL done; 
```

 ~~还，

```
 NSString *str = [[NSString alloc] init];
    while ( str = [enumerator nextObject])
    {
        Task *tempTodo = [[Task alloc] init];
        tempTodo.name = str;
        str = [enumerator nextObject];
        tempTodo.done = str;  //Error and warning is here. 
```

这`str`是字符串，您将其分配给`BOOL`.

和

```
while ( tempTodo = [enumerator nextObject])
{
    [array addObject:tempTodo.name];
    [array addObject:tempTodo.done]; //Eror is here..
} 
```

`NSArray`只能包含对象，而`tempTodo.done`is`BOOL`是原始类型`signed char`

你可以把那个东西装箱成字符串或数字

```
[array addObject:@(tempTodo.done)]; //NSNumber 
```~~

# c# - 数据：一个大块，还是一堆小块？

> ID：15640965
> 
> 赞同：0
> 
> 时间：2013-03-26T15:27:57.840
> 
> 标签：c#, stream, uart

我目前通过蓝牙连接器发送 128 包 64 字节。

这来自嵌入式系统，并交付给 C# GUI，该 GUI 以图形方式显示数据。我正在嵌入式系统上编写代码。我没有在 GUI 上编写代码；但我很确定它为 UART 的东西和图形的东西使用了多个线程。每个样本的长度为 64 个字节。

我们现在要将 USB 添加到可用数据路径的选项中。（目前我们有蓝牙和 UART）。

我可以复制该方案并发送同一组 128 个 64 字节的 blob。

我还可以重新排列数据（我认为）并一次发送一个 8,192 字节的 blob。

无论哪种方式都需要我做大量的工作。

**问题：**单个更大的 blob 是否会提高吞吐量？还是我应该坚持使用一大堆较小的斑点，让所有线程都有时间完成他们的家务活？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:44:05.713

使用奈奎斯特采样定理解决了这个问题。

[奈奎斯特采样定理](http://en.wikipedia.org/wiki/Nyquist%E2%80%93Shannon_sampling_theorem)

基本上，如果您的屏幕每秒仅更新 60 次，并且您的系统能够在 60 秒内接收到足够的数据以正确地实时更新图形 - 那么获得更高的吞吐量并不能真正为您带来任何好处。您只需在绘制的曲线上获得更精细的粒度。如果您当前获得的结果足够准确，那么追求更高的吞吐量只是额外的工作。

如果您需要极其准确地分析线路，则更高的吞吐量将有助于获取所有这些额外的数据点。这基本上是图形分辨率、屏幕刷新速度以及数据从芯片发送到计算机的速率之间的一个折衷问题。

作为一个好的经验法则，任何超过 200 个数据点的数据点对于大多数直接信号的视觉效果来说都是过度的，这些信号在整个地方都没有疯狂的高频尖峰。根据对数据的处理方式，它可能会也可能不会过分杀伤力。这实际上取决于您正在分析的信号。如果它具有极高的频率，则需要更频繁地采样以捕获数据点中的信号。

# css - 大 CSS Sprite 图像（在低 cpu 计算机中运行缓慢）

> ID：15640969
> 
> 赞同：2
> 
> 时间：2013-03-26T15:28:04.603
> 
> 标签：css, xhtml, sprite, css-sprites

我的网站有一个很大的 CSS 精灵图像。

网站： http: [//www.protohaber.com/demo](http://www.protohaber.com/demo)

雪碧图片： http: [//www.protohaber.com/demo/templates/v1/images/proto_sprite.png](http://www.protohaber.com/demo/templates/v1/images/proto_sprite.png)

我的网站在某些计算机（低 cpu 计算机）的浏览器上运行缓慢（例如页面滚动缓慢等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:07:16.073

也许您应该尝试使用[PNG Gauntlet](http://pnggauntlet.com/)来优化图像。

另一种解决方案可能是将 Sprite 拆分为两个甚至更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:57:14.757

我认为造成这种情况的主要原因是因为图像太大（几乎 1.5 兆字节），所以想象一下 CPU 需要计算多少才能将背景从一侧移动到另一侧。我认为你的精灵有很多不属于它的资源（比如一些图像（女孩，警告警报等）。而且你在同一个精灵中混合了很多颜色，这使得图像更大，因为有更多要渲染的颜色。

我认为一种选择是将精灵分成单独的一个，这将使文件更小`(the slow processors can handle, render and move better small images)`，删除像（女孩，警告警报等）这样的图像，并使它们成为 jpg 文件，这将使文件也更小。

sprites 的想法是减少对服务器的请求，但如果这会降低您的应用程序的性能，最好发出更多请求并为最终用户提供更好的性能。

# php - MySQL 一对多的关系。不同的表，还是 PHP 处理？

> ID：15640970
> 
> 赞同：0
> 
> 时间：2013-03-26T15:28:05.760
> 
> 标签：php, mysql, foreign-keys, relationship

我正在创建一个 MySQL 数据库，其中有两张表，一张用于博客，一张用于它们的位置。我所做的是一个字段，`blogs`其中是由逗号分隔的位置 ID 字符串：1,5,7。然后在我的 PHP 脚本中，我可以爆炸（）该字符串并获取位置。

如果我想使用 MySQL 查询查找某个位置的所有博客，就会出现问题。

我应该为关系创建另一个表吗？也许博客 1 位置 1，博客 1 位置 5，博客 1 位置 7。三行代表前一个示例。这样我只会在查询中选择该位置的博客。另一种方法是我必须选择所有博客并逐个检查它们。

你认为什么更快更干净？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:32:27.080

不同的桌子更干净。事实上，它是唯一的选择，因为它是关系数据库的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:33:40.753

代表关系的第三张表是真正可行的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:36:40.130

正确的是，在关系数据库设置中执行此操作的最佳方法是第三个表，有时称为连接表，用于处理博客和位置之间的关系。您描述的是多对多关系（或双向的一对多关系）。

[这](http://sqlrelationship.com/many-to-many-relationship/)是一个比我描述得更好的链接。

# python - Python networkx：边缘收缩

> ID：15640972
> 
> 赞同：6
> 
> 时间：2013-03-26T15:28:14.523
> 
> 标签：python, graph, nodes, networkx, edges

我有一个[NetworkX](http://networkx.github.com)图。我想知道如何在多个节点之间进行[边缘收缩。](http://en.wikipedia.org/wiki/Edge_contraction)

例如，如果我想收缩 X、Y 和 Z：

```
 _ node A _
       _/    |     \_
node X --- node Y --- node Z 
```

会成为

```
 node A 
             |     
           node XYZ (or whatever X/Y/Z) 
```

图形创建不是问题。有用。我想通过合并具有相同“含义”的节点来缩小图形：我称之为“end lvl”（节点名称长度等于 7）并且链接在一起的节点。

我在 NetworkX 中找到了冷凝功能，所以我尝试使用它：

```
# edge contraction for same nodes
# for each node, get the links to other nodes "end lvl"
# if there is such a link, it means that these node are
# the sames
#
# copy graph
I = G
for n,d in G.nodes(data=True):
    if n in I.nodes():
        if len(n) == 7:
            # list of nodes adjacent to n : filter only "end lvl" nodes
            neighbors = [ node for node in I.neighbors(n) if len(node) == 7 ]
            nodes_to_merges = neighbors.append(n)
            I = nx.condensation(I,scc=nodes_to_merges) 
```

当我转换为 JSON 时，我得到的是：

```
{"directed": true, "graph": [], "nodes": [{"id": 0}], "links": [], "multigraph": false} 
```

如您所见，有一个问题...

函数参考在[这里](http://networkx.github.com/documentation/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:38:09.737

怎么样：

```
add_node(XYZ)
add_edge(XYZ, A)
for edge incident on (X, Y, Z):
    v = nodes in edge not in (X, Y, Z, A)
    if v:
       remove_edge(edge)
       add_edge(v, XYZ)
for node in (X, Y, Z):
    remove_node(node) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:13:06.207

而不是尝试使用 nx.condensation （这意味着收缩强连接的组件，而不是一般的节点组）使用这些函数：

[http://networkx.readthedocs.io/en/stable/reference/classes.graph.html#adding-and-removing-nodes-and-edges](http://networkx.readthedocs.io/en/stable/reference/classes.graph.html#adding-and-removing-nodes-and-edges)

删除除一个折叠节点之外的所有节点并重新连接它们的节点。

# ios - ios touch 从一个按钮移动到另一个按钮

> ID：15640981
> 
> 赞同：1
> 
> 时间：2013-03-26T15:28:23.310
> 
> 标签：ios, objective-c, cocoa-touch, uibutton

我有两个自定义 uibuttons。

```
@interface myButton : UIButton 
```

我覆盖了几种方法，例如

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
  // do something
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];
    [self.nextResponder touchesMoved:touches withEvent:event];
    UITouch *touch = [touches anyObject];
    CGPoint touchPoint = [touch locationInView:self];

    if (!CGRectContainsPoint(self.bounds, touchPoint)) {
        [self touchesCancelled:touches withEvent:event];
    }
    return;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
   // do something
}

-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesCancelled:touches withEvent:event];
    return;
} 
```

我想要的是，当我触摸一个按钮时，我可以继续将触摸移动到另一个按钮。当触摸超出我触摸的第一个按钮的范围时，我厌倦了调用 touchesCancelled。所以我“认为”然后我移动到另一个按钮，这将是一个新的触摸事件。但它不是这样工作的。

我做错什么了吗？或者 touchesCancelled 方法不是这样使用的？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:41:59.577

您的怀疑是正确的，这不是`touchesCancelled:withEvent:`打算使用的方式。从文档中：

> 该方法在Cocoa Touch框架接收到需要取消触摸事件的系统中断时调用；为此，它会生成一个具有 UITouchPhaseCancel 阶段的 UITouch 对象。中断可能会导致应用程序不再处于活动状态或视图从窗口中删除。

如果您的用户收到来电、短信或他们的闹钟响起等，您的响应者将收到触摸取消事件。它应该用于清理在其他触摸事件中建立的任何状态信息。

似乎您想在触摸中更改与触摸事件关联的响应者，即当您从第一个按钮的边界拖动触摸并输入第二个按钮的边界时，它应该成为接收触摸事件的响应者。不幸的是，这不是响应者设计的工作方式。一旦 a`UIView`被识别为响应者，如中返回的那样`hitTest:withEvent:`，这将是`UIView`接收触摸事件的对象。

实现您想要的一个可能的锻炼是在包含您的两个按钮的超级视图中处理触摸事件（等）`touchesBegan:withEvent:`。`touchesMoved:withEvent:`然后您的超级视图将接收触摸事件，您可以根据您所在的按钮框架采取行动：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    for (UITouch *touch in touches)
    {
        CGPoint touchLocation = [touch locationInView:self.view];

        UIButton *button;
        if (CGRectContainsPoint(self.button1.frame, touchLocation))
        {
            button = self.button1;
            NSLog(@"touchesMoved: First Button");
        }
        else if (CGRectContainsPoint(self.button2.frame, touchLocation))
        {
            button = self.button2;
            NSLog(@"touchesMoved: Second Button");
        }

        // Do something with button...
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    for (UITouch *touch in touches)
    {
        CGPoint touchLocation = [touch locationInView:self.view];

        UIButton *button;
        if (CGRectContainsPoint(self.button1.frame, touchLocation))
        {
            button = self.button1;
            NSLog(@"touchesMoved: First Button");
        }
        else if (CGRectContainsPoint(self.button2.frame, touchLocation))
        {
            button = self.button2;
            NSLog(@"touchesMoved: Second Button");
        }

        // Do something with button...
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    for (UITouch *touch in touches)
    {
        CGPoint touchLocation = [touch locationInView:self.view];

        UIButton *button;
        if (CGRectContainsPoint(self.button1.frame, touchLocation))
        {
            button = self.button1;
            NSLog(@"touchesEnded: First Button");
        }
        else if (CGRectContainsPoint(self.button2.frame, touchLocation))
        {
            button = self.button2;
            NSLog(@"touchesEnded: Second Button");
        }

        // Do something with button...
    }
} 
```

# matrix - 安全地与同事共享生产文件

> ID：15640982
> 
> 赞同：0
> 
> 时间：2013-03-26T15:28:24.657
> 
> 标签：matrix, forecasting, collaboration

我想共享一些文件，在朋友之间进行协作，并 **安全地**一起处理项目，但我不确定该使用什么。我曾就 Drop Box 进行过辩论，但无法可靠地传达正在做什么或谁在做什么。添加的另一个选项是使用 Google 文档，但来回弹跳会让人头疼。是否存在允许进行矩阵或预测的私下项目通信的完整解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:37:00.657

我建议你[bitbucket](https://bitbucket.org)，它是一个控制版本工具。这将为您提供一个界面，以查看已完成的工作以及完成工作的人员，并且只需查看您的 bitbucket 项目的网页即可。

此外，唯一的必要条件是可以访问互联网，因为您可以免费获得私人仓库（还有其他工具，如 Github，但该项目必须是开源的才能免费使用）。

如果您决定使用此选项，请考虑为您和您的朋友创建一个团队，这将允许您：

-创建每个人都可以访问的团队拥有的存储库

-委派管理以管理成员和存储库

- 设置群组以快速组织成员及其权限级别

- 向新团队成员发送邀请，无论他们是否在 Bitbucket

# sql - 在 SQL 中处理“不匹配时”（如何正确合并）

> ID：15640983
> 
> 赞同：0
> 
> 时间：2013-03-26T15:28:27.717
> 
> 标签：sql, database, oracle, merge

我正在创建几个表并将它们中的数据合并到一个表中。这些表具有相似的 col1 和 col2 列，但这些列中的值可以不同，例如。tab1 的第 1 行上的 col1 可能有“0”，而 tab2 中的 col1 可能在 col1“1”的同一行上。只有在这种情况下，我才需要更新第 1 行 col1 中 tab1 的值。请看以下示例：

```
BEFORE MERGING               
tab1:
id col1 col2
1  0    0
2  0    1
3  0    0
                              AFTER MERGING WITH tab2
tab2:                         tab1:
id col1 col2                   id col1 col2
1  1    0           --->       1  1    0
2  0    0                      2  0    1
3  0    0                      3  0    0 
```

为此，我使用以下查询：

```
merge into tab1 st
   using (select id, col1, col2 from tab2) ss
   ON (st.id=ss.id)
    when matched then 
    update set  st.col1 = ss.col1,
                st.col2 = ss.col2 

  where ss.col1 != 0 or ss.col2 != 0
  when not matched then
    insert (st.id, st.col1, st.col2)
    values (ss.id, ss.col1, ss.col2)
    ; 
```

我只是在学习 sql，所以直到现在我才注意到这个查询不正确。它可以用来自tab2的“0”覆盖tab1中的“1”值。请帮我改进这个查询，我卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:54:07.117

您应该使用 的最大值进行更新`{ss.coln, st.coln}`。例如，使用[`GREATEST`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions069.htm#SQLRF00645)：

```
MERGE INTO tab1 st
USING (SELECT id, col1, col2 FROM tab2) ss
ON (st.id = ss.id)
WHEN MATCHED THEN
   UPDATE
      SET st.col1 = greatest(ss.col1, st.col1), 
          st.col2 = greatest(ss.col2, st.col2)
    WHERE ss.col1 > st.col1
       OR ss.col2 > st.col2
WHEN NOT MATCHED THEN
   INSERT (st.id, st.col1, st.col2) 
   VALUES (ss.id, ss.col1, ss.col2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:50:37.707

您可以在设置值时使用 CASE 表达式来控制分配的值。尝试类似：

```
merge into tab1 st
   using (select id, col1, col2 from tab2) ss
   ON (st.id=ss.id)
    when matched then 
    update set  st.col1 = CASE WHEN st.col1 = 0 THEN ss.col1 ELSE st.col1 END,
                st.col2 = CASE WHEN st.col2 = 0 THEN ss.col2 ELSE st.col2 END

  where ss.col1 != 0 or ss.col2 != 0
  when not matched then
    insert (st.id, st.col1, st.col2)
    values (ss.id, ss.col1, ss.col2)
    ; 
```

因此，在 WHEN MATCHED 情况下，如果 tab1 (st) 的值为零，则将其更改为 tab2 (ss) 的值，否则只需将 tabl1 的值设置为自身。

分享和享受。

# c# - 客户端/服务器多线程使用 TCP Listener 和 Streamreader/writer

> ID：15640984
> 
> 赞同：0
> 
> 时间：2013-03-26T15:28:30.340
> 
> 标签：c#, tcplistener

我被要求用 C# 编写一个客户端/服务器应用程序，并获得了半完成的代码来开始。

它使用`ThreadPool`, 和`TcpListener`with`StreamReader`类`StreamWriter`进行数据传输。客户端有一个工作目录，该目录是固定的。服务器也有一个，但可以更改。

基本上，您使用 switch 语句在客户端上键入一个选项，然后服务器处理该选项并将其发送回客户端。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.IO;
using System.Security.Cryptography;

namespace Client
{
/// <summary>
/// Remote File Service client
/// </summary>
class Client
{
    /// <summary>
    /// Static entry point to client code
    /// </summary>
    /// <param name="args">unused</param>
    static void Main(string[] args)
    {
        string dir = @"c:\st12_13d1_files";

        try
        {
            Directory.SetCurrentDirectory(dir);
        }
        catch (DirectoryNotFoundException e)
        {
            Console.WriteLine("The specified directory does not exist. {0}", e);
        }

        try
        {
            using (TcpClient client = new TcpClient("localhost", 50012))
            using (NetworkStream stream = client.GetStream())
            using (StreamReader reader = new StreamReader(stream))
            using (StreamWriter writer = new StreamWriter(stream))
            {
                writer.AutoFlush = true;
                string option;

                do
                {
                    Console.WriteLine("-Menu-\n");

                    Console.WriteLine("1-Print out file names-\n");
                    Console.WriteLine("2-Current Working Directory-\n");
                    Console.WriteLine("3-Files Present on the Server-\n");
                    Console.WriteLine("4- List of Subdirectory Names-\n");
                    Console.WriteLine("5- Change Server Directory Location-\n");
                    Console.WriteLine("6-Copy the contents of a file specified-\n");
                    Console.WriteLine("7-Close-\n");

                    Console.WriteLine("Please enter your choice: ");

                    option = Console.ReadLine();

                    switch (option)
                    {
                        case "1":
                        case "one":

                        Console.WriteLine("You have selected Print out file names: ");

                        break;
                    } 

using System;
using System.Net;
using System.Net.Sockets;
using System.IO;
using System.Text;
using System.Threading;
using System.Security.Cryptography;

namespace Server
{
/// <summary>
/// Remote File Service main functionality
/// </summary>
public class ServerMainline
{
    public ServerMainline()
    {
        /*
        * *** TO DO - your code goes here ***
        * record initial current working directory value in a global variable
        */

        string serv = (@"..\..");        

        try
        {
            //Set the current directory.
            Directory.SetCurrentDirectory(serv);
        }
        catch (DirectoryNotFoundException e)
        {
            Console.WriteLine("The specified directory does not exist. {0}", e);
        }

        TcpListener server = null;
        try
        {
            ThreadPool.SetMaxThreads(50, 50);

            server = new TcpListener(IPAddress.Any, 50012);
            server.Start();

            while (true)
            {

                Console.WriteLine("Waiting for a new Client...");
                TcpClient client = server.AcceptTcpClient();

                ThreadPool.QueueUserWorkItem(serviceClient, client);
            }
        }
        catch (Exception e)
        {
            Console.WriteLine("Server mainline: SocketException: {0}", e);
        }
        finally
        {
            server.Stop();
            server.Server.Close();
        }
    }

    /// <summary>
    /// method to run to handle each client on separate thread
    /// </summary>
    void serviceClient(object clientObject)
    {
        Thread currentThread = Thread.CurrentThread;
        int threadID = currentThread.GetHashCode();    

        try
        {
            using (TcpClient client = (TcpClient)clientObject)
            using (NetworkStream stream = client.GetStream())
            using (StreamReader reader = new StreamReader(stream))
            using (StreamWriter writer = new StreamWriter(stream))
            {
                writer.AutoFlush = true;
                Console.WriteLine("Connected with a client, threadID: {0}", threadID);

                string option = reader.ReadLine();

                while (option != "7")

                switch (option)
                {
                 case "1":
                 case "one":

                 string[] myfiles = Directory.GetFiles(@"c:\st12_13d1_files");
                 Console.WriteLine("File Names {0}",Directory.GetFiles
                 (@"c:\st12_13d1_files"));
                        foreach (string file in myfiles)
                        {
                          //Console.WriteLine(file);
                          Console.WriteLine(Path.GetFileName(file));
                          writer.WriteLine(myfiles);
                        }

                        break;

                       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:31:00.030

恕我直言，我认为让别人为你完成家庭作业是不合适的。

作为一名学生，你的工作应该是研究（网上有任意数量的 TCP 套接字演示和教程）并尝试多种解决方案，然后再求助于他人。

软件开发既是科学又是艺术，它需要你花时间练习你的艺术。你不能通过阅读书籍和让其他人为你工作来学习成为一名优秀的程序员。

投票结束。

更新：不想成为一个完整的脾气暴躁的人，这里有一些教程的链接，它们应该可以帮助您真正掌握异步 TCP/socket 编程：

*   [学习 C# 套接字编程](http://www.developerfusion.com/article/3918/socket-programming-in-c-part-1/)
*   [什么是 .net / c# 套接字编程的好教程/howto](https://stackoverflow.com/questions/104617/what-is-a-good-tutorial-howto-on-net-c-sharp-socket-programming)

# javascript - 过滤十六进制颜色

> ID：15640985
> 
> 赞同：2
> 
> 时间：2013-03-26T15:28:32.683
> 
> 标签：javascript, html, css, hex

我有大量不同的十六进制颜色（> 6500），我想删除非常暗的颜色和非常亮的颜色。

我怎样才能做到这一点？明亮和黑暗的十六进制颜色代码中是否有特定的特征可以用来过滤掉它们？我是否需要将它们转换为整数..？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:17:33.473

这是一种快速而肮脏的方法，可能会：

将您的十六进制颜色分成 R/G/B 字节。

将十六进制字节转换为十进制，将它们加在一起并除以 3 以获得平均“亮度”的粗略概念。

选择您希望颜色在 0 到 255 的最大可能范围内的亮度上限和下限，并排除这两个限制之外的任何颜色。

例如

#FFBBAA => FF BB AA => ( 255 + 187 + 170 ) / 3 = 204。

如果你决定 200 是你的“亮度”上限，那么这个颜色就太亮了。您设置的限制完全是主观的，所以取决于您。

如果您对直接使用 Hex 进行计算感到满意，则可以完全跳过转换为十进制并保留所有 Hex 计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:22:01.377

此函数使用正则表达式解析字符串值并返回从 0（黑色）到 1（100% 白色）的亮度。

```
function hexBrightness(hex) {
    var regExp = hex.length < 6 ? /^#(([a-f\d]))(([a-f\d]))(([a-f\d]))$/i : /^#([a-f\d])([a-f\d])([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i;

    var result = regExp.exec(hex);
    if (result) {
        var r = parseInt("" + result[1] + result[2], 16),
            g = parseInt("" + result[3] + result[4], 16),
            b = parseInt("" + result[5] + result[6], 16),
            max = Math.max(r, g, b),
            min = Math.min(r, g, b),
            l = (max + min) / 2;
        return l / 255;
    }
    return null;
}

// Test
var assert = function (assertion, name) {
    $("<p/>").appendTo(document.body).text(name + (assertion ? ' works' : ' fails'))
}
assert(hexBrightness('#FFFFFF') == 1, 'Uppercase');
assert(hexBrightness('#ffffff') == 1, 'Lowercase');
assert(hexBrightness('#fff') == 1, 'Short');
assert(hexBrightness('#000') == 0, 'Black');
assert(hexBrightness('invalid') == null, 'Invalid color'); 
```

工作小提琴：http: [//jsfiddle.net/L7PqT/](http://jsfiddle.net/L7PqT/)

# javascript - 在对自定义元素的 ajax 请求后重新加载脚本

> ID：15640992
> 
> 赞同：0
> 
> 时间：2013-03-26T15:28:45.920
> 
> 标签：javascript, jquery

我有一个高度定制的问卷，其中的列表看起来像这样

```
<ul>  
    <li class="customCheckbox">
    <li class="customCheckbox">
</ul> 
```

此问卷通过`JQuery.ajax`调用加载，并且在 JQuery UI 对话框中显示时，会正确处理随附的 js 代码。我在外部脚本 jquery.customCheckbox.js`customCheckbox`中正确处理了初始页面上的内容`(function($){ [...] })`

我需要类似的东西，`.live()`但是由于它已从 JQuery 中删除，因此我无法做到这一点。如果可能，我不想在 AJAX 调用中重新加载脚本。[这个问题](https://stackoverflow.com/questions/6537323/jquery-function-not-binding-to-newly-added-dom-elements)大致相同，但我不仅与事件侦听器有关。它修改了复选框，添加了一个类和侦听器和其他东西。

实际上，我正在寻找一些我`(function($)...`喜欢的东西`$(document).ready`。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:33:46.297

您可以使用[jQuery.on()](http://api.jquery.com/on/)，它已取代 .live()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:42:28.140

在这里看不到您要修改的代码，或者不清楚您要完成什么。根据您所说，您是否尝试过使用`.delegate()`？

```
$('#yourButtonIDContainer').delegate('#yourButtonID', 'click', functionCalled);

function functionCalled(e) { e.preventDefault(); *** Do Something Here **** } 
```

不确定这是否有帮助，但如果没有，请告诉我更多细节。

# linux - 使用 pam_exec 的 Linux 自定义身份验证

> ID：15640994
> 
> 赞同：4
> 
> 时间：2013-03-26T15:28:48.780
> 
> 标签：linux, pam

我在 hpw 上找不到使用 pam_exec 运行外部程序的示例，该程序将在用户登录时对其进行身份验证。

我的 pam.d 文件中有以下内容

```
 auth required pam_exec.so debug log=/tmp/aa /path/to/myscript 
```

我的脚本应该包含什么来允许或禁止身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-10T02:47:39.873

pam_exec 将只检查脚本的退出代码。如果它不等于零，您将拒绝授权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-21T13:44:02.297

针对[上述评论](https://stackoverflow.com/questions/15640994/linux-custom-authentication-with-pam-exec#comment89979872_19286219)：在我的情况下，身份验证脚本还可以，但 PAM 在该`account`阶段失败：

```
authentication: pam_unix(postgresql:account): could not identify user (from getpwnam(myuser)) 
```

这将记录到 syslog 中（如果您在 docker 中修改 PAM，请传递`-v /dev/log:/dev/log`到`docker run`以查看主机的 syslog 中的 PAM syslog 消息）。

解决方案是将以下内容添加到 pam.d 文件中：

```
account sufficient pam_permit.so 
```

# php - 防止通过php删除mysql记录

> ID：15640998
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:29:05.563
> 
> 标签：php, html

我制作了一张名为“Gebruikers”的桌子。该表如下所示：

```
+----------------+------------------+------+-----+---------+----------------+
| Field          | Type             | Null | Key | Default | Extra          |
+----------------+------------------+------+-----+---------+----------------+
| id             | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| gebruikersnaam | varchar(255)     | YES  |     | NULL    |                |
| wachtwoord     | varchar(1024)    | YES  |     | NULL    |                |
| bibliotheekid  | int(10) unsigned | YES  |     | NULL    |                |
| email          | varchar(255)     | YES  |     | NULL    |                |
+----------------+------------------+------+-----+---------+----------------+ 
```

此表存储用户和管理员的登录 ID 和密码。'gebruikersnaam' 列定义了登录 ID，以及记录是管理员还是用户。

管理员拥有所有用户（甚至他自己）的列表，并且能够删除它们（包括他自己）。

见代码：

```
$sql = "SELECT * FROM Gebruiker";   
$resultaat = mysql_query($sql);
<table>
    <tr>
        <th>id</th>
        <th>gebruikersnaam</th>
        <th>wachtwoord</th>
        <th>bibliotheekid</th>
        <th>email</th>
    </tr>

    <?php
    while(list($id, $gebruikersnaam, $wachtwoord, $bibliotheekid, $email) = mysql_fetch_row($resultaat)){
        ?>
        <tr>
            <td><?php echo $id; ?></td>
            <td><?php echo $gebruikersnaam; ?></td>
            <td><?php echo $wachtwoord; ?></td>
            <td><?php echo $bibliotheekid; ?></td>
            <td><?php echo $email; ?></td>
            <td><?php echo "<a href=\"gebruiker_verwijderen.php?id=$id\">verwijderen</a>"; ?></td>
            <td><?php echo "<a href=\"gebruiker_wijzigen.php?id=$id\">wijzigen</a>"; ?></td>
            <td><?php echo "<a href=\"gebruiker_wijzigen_ww.php?id=$id\">wachtwoord</a>"; ?></td>
        </tr>
        <?php     
    }
    ?>
</table> 
```

`<a href=\"gebruiker_verwijderen.php?id=$id\">verwijderen</a>`如果'$gebruikersnaam' 的值等于'admin' ，我想防止管理员通过在while 列表中不给出a 来删除自己。我不知道如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:32:50.003

似乎您实际上回答了自己的问题：

```
<td><?php
    if ('admin' != $gebruikersnaam) {
        echo "<a href=\"gebruiker_verwijderen.php?id=$id\">verwijderen</a>";
    }
?></td> 
```

`<td>`如果它是管理员，这将打印出一个空的。请注意，这适用于*任何*管理员（即管理员不能删除另一个管理员）。大概您还有一个登录用户的会话标识符，您可以比较它以检查他们是否也是管理员。

您可能还想添加一个限制，`gebruiker_verwijderen.php`以防止删除管理员/登录用户。